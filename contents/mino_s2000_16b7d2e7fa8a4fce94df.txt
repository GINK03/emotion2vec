{"context": "\n\n\u59cb\u3081\u306b\nMarkdown \u5f62\u5f0f\u3067\u66f8\u3044\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u3061\u3083\u3093\u3068\u6574\u5f62\u3055\u308c\u3066\u308b\u72b6\u614b\u3067\u898b\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u304c\u6b32\u3057\u3044\u306a\u3041\u3068\u601d\u3044\u3001\u3044\u308d\u3044\u308d\u63a2\u3057\u3066\u3044\u305f\u3002\nSublime Text 3 \u306e Markdown Extended \u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30d7\u30ec\u30d3\u30e5\u30fc\u3067\u3082\u3044\u3044\u306e\u3060\u3051\u3069\u3001Qiita \u3068\u304b Git \u3068\u304b\u306e\u30d7\u30ec\u30d3\u30e5\u30fc\u3068\u5fae\u5999\u306b\u9055\u3046\u306e\u304c\u3001\u3061\u3087\u3063\u3068\u6c17\u306b\u304f\u308f\u306a\u304b\u3063\u305f\u3002\n\u63a2\u3057\u3066\u3044\u308b\u4e2d\u3067\u3001Git \u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u7a81\u3063\u8fbc\u3093\u3067\u308b\u65b9\u304c\u3044\u3066\u3001\u306a\u308b\u307b\u3069\uff5e\u3068\u611f\u5fc3\u3057\u3066\u3001\u63a2\u3059\u65b9\u5411\u6027\u3092\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u3068\u304b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8Wiki\u306b\u5909\u66f4\u3057\u305f\u3068\u3053\u308d\u3001Crowi \u3092\u63a8\u3057\u3066\u3044\u308b\u8a18\u4e8b\u3092\u898b\u304b\u3051\u305f\u3002\nMarkdown\u3067\u66f8\u3051\u308b\u3001\u3088\u3055\u3052\u306aWiki\u30b5\u30fc\u30d0\u30fc\u30bd\u30d5\u30c8\u307e\u3068\u3081 - Qiita\n\u3057\u304b\u3082\u3053\u306e\u65b9\u3001Docker Image \u307e\u3067\u4f5c\u3063\u3066\u3044\u308b\u3002\n\u3061\u3087\u3046\u3069 Docker \u306e\u52c9\u5f37\u3092\u3057\u3088\u3046\u3068\u601d\u3063\u3066\u3044\u305f\u306e\u3067\u5373\u6c7a\u3002\n\u672c\u30a8\u30f3\u30c8\u30ea\u306f\u3001Docker \u521d\u5fc3\u8005\u306e\u79c1\u304c Crowi \u3092\u69cb\u7bc9\u3057\u305f\u3063\u3066\u3044\u3046\u30e1\u30e2\u3002\n\n\u74b0\u5883\nAzure \u4e0a\u306b CentOS \u306e Virtual Machine \u3092\u5efa\u3066\u3066\u3001\u305d\u3053\u306b Docker Container \u3068\u3057\u3066 Crowi \u3092\u7acb\u3061\u4e0a\u3052\u305f\u3002\nAzure Virtual Machine \u306e\u4f5c\u6210\u624b\u9806\u306f\u5272\u611b\u3002\n$ uname -r\n3.10.0-514.2.2.el7.x86_64\n\n$ cat /etc/redhat-release\nCentOS Linux release 7.3.1611 (Core) \n\n7.2 \u306e\u30a4\u30e1\u30fc\u30b8\u3067\u4f5c\u6210\u3057\u305f\u3051\u3069\u3001yum update \u3057\u305f\u3089 7.3 \u306b\u4e0a\u304c\u3063\u305f\u3002\n\u307e\u3041\u3044\u3044\u304b\u3002\n\n\u624b\u9806\n\nDocker Engine \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nDocker Group \u306e\u4f5c\u6210\nDocker Compose \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nDocker Crowi \u306e\u7acb\u3061\u4e0a\u3052\nDocker Crowi \u306e\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n\n\n1. Docker Engine \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u53c2\u8003\nInstall Docker on CentOS - Docker\ncURL \u30b3\u30de\u30f3\u30c9\u306b\u3066\u3002\n$ curl -fsSL https://get.docker.com/ | sudo sh\n\n\u30b5\u30fc\u30d3\u30b9\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3002\n$ sudo systemctl status docker.service\n\nLoaded: \u306e\u3068\u3053\u308d\u3067 disabled; \u306b\u306a\u3063\u3066\u3044\u305f\u3089\u3001\u81ea\u52d5\u958b\u59cb\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3002\n$ sudo systemctl enable docker.service\n\nenabled; \u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n$ sudo systemctl status docker.service\n\n\u8d77\u52d5\u3002\n$ sudo systemctl start docker\n\nHello World Container \u3092\u5b9f\u884c\u3057\u3066\u307f\u308b\u3002\n$ sudo docker run --rm hello-world\n\n\u3053\u3093\u306a\u306e\u304c\u51fa\u529b\u3055\u308c\u308c\u3070 OK \u3060\u3068\u601d\u3046\u3002\nUnable to find image 'hello-world:latest' locally\nlatest: Pulling from library/hello-world\nc04b14da8d14: Pull complete \nDigest: sha256:0256e8a36e2070f7bf2d0b0763dbabdd67798512411de4cdcf9431a1feb60fd9\nStatus: Downloaded newer image for hello-world:latest\n\nHello from Docker!\nThis message shows that your installation appears to be working correctly.\n\nTo generate this message, Docker took the following steps:\n 1. The Docker client contacted the Docker daemon.\n 2. The Docker daemon pulled the \"hello-world\" image from the Docker Hub.\n 3. The Docker daemon created a new container from that image which runs the\n    executable that produces the output you are currently reading.\n 4. The Docker daemon streamed that output to the Docker client, which sent it\n    to your terminal.\n\nTo try something more ambitious, you can run an Ubuntu container with:\n $ docker run -it ubuntu bash\n\nShare images, automate workflows, and more with a free Docker Hub account:\n https://hub.docker.com\n\nFor more examples and ideas, visit:\n https://docs.docker.com/engine/userguide/\n\n\n2. Docker Group \u306e\u4f5c\u6210\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u6642\u70b9\u3067\u3001\u30b0\u30eb\u30fc\u30d7\u81ea\u4f53\u306f\u4f5c\u6210\u3055\u308c\u308b\u3063\u307d\u3044\u3051\u3069\u66f8\u3044\u3066\u304a\u304f\u3002\n$ sudo groupadd docker\ngroupadd: group 'docker' already exists # \u65e2\u306b\u5b58\u5728\u3057\u305f\uff08\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u4f5c\u3089\u308c\u305f\uff1f\uff09\u306e\u3067\u3001\u6012\u3089\u308c\u305f\u3002\n\nAzure Virtual Machine \u3060\u3068 VM \u4f5c\u6210\u6642\u306b\u4f5c\u308b\u30e6\u30fc\u30b6\u30fc\u304c\u5b9f\u8cea ROOT \u3060\u3051\u3069\u3082\u3001\u6bce\u56de sudo \u3084\u3089 sudo -s \u3084\u3089\u3084\u308b\u306e\u306f\u5104\u52ab\u306a\u306e\u3067\u3001Group \u306b\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3002\n$ sudo usermod -aG docker [your_username]\n\n\u4e00\u65e6\u30ed\u30b0\u30aa\u30d5\u3057\u3066\u3001\u518d\u30ed\u30b0\u30a4\u30f3\u3002\nsudo \u6307\u5b9a\u7121\u3057\u3067 docker run \u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n$ docker run --rm hello-world\n\n\n3. Docker Compose \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u53c2\u8003\nInstall Docker Compose - Docker\nDocker \u306e\u52c9\u5f37\u306e\u305f\u3081\u306b\u306f\u3001MongoDB \u3084 Redis \u3001Elasticsearch \u306e Container \u3092\u81ea\u5206\u3067\u4f5c\u3063\u305f\u65b9\u304c\u3044\u3044\u306e\u3060\u308d\u3046\u3051\u3069\u3001Crowi Image \u306e\u4f5c\u8005\u304c YAML \u307e\u3067\u7528\u610f\u3057\u3066\u304f\u308c\u3066\u3044\u308b\u306e\u3067 Docker Compose \u3092\u4f7f\u3046\u3002\ncURL \u30b3\u30de\u30f3\u30c9\u306b\u3066\u3002\n\u6ce8\uff09\u30a8\u30f3\u30c8\u30ea\u516c\u958b\u6642\u70b9\u3067\u306e\u6700\u65b0 Release \u7248\u3092\u5229\u7528\u3002\n$ sudo curl -L \"https://github.com/docker/compose/releases/download/1.9.0/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n\n\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3002\n$ sudo chmod +x /usr/local/bin/docker-compose\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u78ba\u8a8d\u3002\n$ docker-compose --version\n\n\n\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09Docker Compose \u30b3\u30de\u30f3\u30c9\u3092 Tab \u88dc\u5b8c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n$ sudo curl -L \"https://raw.githubusercontent.com/docker/compose/$(docker-compose version --short)/contrib/completion/bash/docker-compose\" -o /etc/bash_completion.d/docker-compose\n\n\n4. Docker Crowi \u306e\u7acb\u3061\u4e0a\u3052\n\u4f5c\u8005\u306e Git \u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u9802\u6234\u3059\u308b\u3002\u3042\u308a\u304c\u305f\u3084\u3002\n\u79c1\u306f\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u8ee2\u9001\u3059\u308b\u306e\u304c\u9762\u5012\u3060\u3063\u305f\u306e\u3067\u30af\u30ed\u30fc\u30f3\u3057\u305f\u3002\n$ git clone https://github.com/Bakudankun/docker-crowi.git\n\nDockerfile \u3068 docker-entrypoint.sh \u3092 Working Dir \u306b\u30b3\u30d4\u30fc\u3059\u308b\u3002\nREADME.md \u306b\u66f8\u3044\u3066\u3042\u308b YAML \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\u3002\n\u5185\u5bb9\u306f\u5b8c\u5168\u30b3\u30d4\u30da\u3067\u52d5\u3044\u305f\u3002\u3055\u3059\u304c\u3002\n$ vi docker-compose.yml\n\n\u540c\u4e00\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4ee5\u4e0b3\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u72b6\u614b\u306b\u3059\u308b\u3002\nDockerfile\ndocker-entrypoint.sh\ndocker-compose.yml\n\n\u3044\u3056\u3001\u7acb\u3061\u4e0a\u3052\u3002\n$ docker-compose up\n\n\u30a8\u30e9\u30fc\u7b49\u7121\u304f\u3001\u9014\u4e2d\u3067\u51fa\u529b\u304c\u6b62\u307e\u3063\u305f\u3089\u8d77\u52d5\u51fa\u6765\u3066\u3044\u308b\u306f\u305a\u3002\n\u30d6\u30e9\u30a6\u30b6\u3067\u3044\u3056\u30a2\u30af\u30bb\u30b9\u3002\uff08 http://[server-ip]:8080/ \uff09\n\u30e6\u30fc\u30b6\u30fc\u65b0\u898f\u767b\u9332\u753b\u9762\u304c\u51fa\u3066\u304f\u308c\u3070 OK \u3002\n\uff08URL \u304c http://[server-ip]:8080/install \u306b\u306a\u3063\u3066\u3044\u308b\u306f\u305a\uff09\nAzure \u7684\u306a\u8a71\u3092\u3059\u308b\u3068\u3001NSG \u3067 8080 \u306b\u5bfe\u3057\u3066\u7a74\u3092\u958b\u3051\u3066\u304a\u304f\u3068\u3001Public IP \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\nPublic IP \u306e Allocation Method \u304c Static \u306a\u3089 FQDN \u3092\u6307\u5b9a\u3067\u304d\u308b\u306e\u3067\u3001\u3053\u306e FQDN \u3067\u3082\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002 \n\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u623b\u308a\u3001Ctrl + C \u3067\u4e00\u65e6\u505c\u6b62\u3002\n\n5. Docker Crowi \u306e\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n\u4eca\u306e\u72b6\u614b\u3060\u3068\u3001VM \u3092\u518d\u8d77\u52d5\u3057\u3066\u3082 Crowi \u306f\u7acb\u3061\u4e0a\u304c\u3089\u306a\u3044\u306e\u3067\u3001\u81ea\u52d5\u8d77\u52d5\u3055\u305b\u308b\u3002\n\u53c2\u8003\nCentOS7\u3067Docker\u30b3\u30f3\u30c6\u30ca\u306e\u81ea\u52d5\u8d77\u52d5 - Qiita\n\u81ea\u52d5\u8d77\u52d5\u7528\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u3063\u3066\u3057\u307e\u304a\u3046\u3002\n$ sudo sh -c 'cat << EOF > /usr/lib/systemd/system/docker-crowi-autostart.service\n[Unit]\nDescription=Auto start of crowi with docker compose\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nExecStart=/usr/local/bin/docker-compose -f [Working Dir Path]/docker-compose.yml up -d\n\n[Install]\nWantedBy=multi-user.target\nEOF'\n\n\u30b5\u30fc\u30d3\u30b9\u3092\u8aad\u307f\u8fbc\u3080\u3002\n$ sudo systemctl daemon-reload\n\n\u6709\u52b9\u5316\u3057\u3066\u3001\u81ea\u52d5\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u3002\n$ sudo systemctl enable docker-crowi-autostart.service\n\n\u305d\u3057\u3066\u8d77\u52d5\u3002\n$ sudo systemctl start docker-crowi-autostart.service\n\n\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u5b9f\u969b\u306b\u518d\u8d77\u52d5\u7b49\u3057\u3066\u78ba\u8a8d\u3092\u3002\n\nTips\n\u81ea\u5206\u304c\u30b3\u30de\u30f3\u30c9\u30d8\u30eb\u30d7\u3092\u3088\u304f\u898b\u3066\u306a\u304b\u3063\u305f\u306e\u304c\u60aa\u3044\u306e\u3060\u3051\u3069\u3082\u3001\u6b62\u3081\u3088\u3046\u3068\u601d\u3063\u3066 docker-compose down \u3057\u305f\u3089\u524a\u9664\u3055\u308c\u3066\u3057\u307e\u3063\u3066\u3001\u5927\u5909\u30b7\u30e7\u30c3\u30af\u3092\u53d7\u3051\u305f\u3002\n\u6b62\u3081\u308b\u3068\u304d\u306f kill \u30fb\u30fb\u30fb\u3002\u307c\u304f\u304a\u307c\u3048\u305f\u30fb\u30fb\u30fb\u3002\n\n\u307e\u3068\u3081\n\u3042\u307e\u308a\u306b\u3082\u3059\u3093\u306a\u308a\u4f5c\u308c\u3066\u3057\u307e\u3063\u305f\u3053\u3068\u306b\u9a5a\u3044\u305f\u3002\nDocker Image \u3084 YAML \u306e\u8cea\u304c\u3088\u3044\u8a3c\u62e0\u3002\n\u30d0\u30af\u30c0\u30f3\u304f\u3093\u3055\u3093\u3001\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\nCrowi \u81ea\u4f53\u306f\u3053\u308c\u304b\u3089\u30b4\u30ea\u30b4\u30ea\u4f7f\u3044\u8fbc\u3093\u3067\u884c\u304f\u3002\n\n\u53c2\u8003\u30ea\u30f3\u30af\n\nMarkdown\u3067\u66f8\u3051\u308b\u3001\u3088\u3055\u3052\u306aWiki\u30b5\u30fc\u30d0\u30fc\u30bd\u30d5\u30c8\u307e\u3068\u3081 - Qiita\nInstall Docker on CentOS - Docker\nInstall Docker Compose - Docker\nCentOS7\u3067Docker\u30b3\u30f3\u30c6\u30ca\u306e\u81ea\u52d5\u8d77\u52d5 - Qiita\n\n# \u59cb\u3081\u306b\nMarkdown \u5f62\u5f0f\u3067\u66f8\u3044\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u3061\u3083\u3093\u3068\u6574\u5f62\u3055\u308c\u3066\u308b\u72b6\u614b\u3067\u898b\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u304c\u6b32\u3057\u3044\u306a\u3041\u3068\u601d\u3044\u3001\u3044\u308d\u3044\u308d\u63a2\u3057\u3066\u3044\u305f\u3002\nSublime Text 3 \u306e Markdown Extended \u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30d7\u30ec\u30d3\u30e5\u30fc\u3067\u3082\u3044\u3044\u306e\u3060\u3051\u3069\u3001Qiita \u3068\u304b Git \u3068\u304b\u306e\u30d7\u30ec\u30d3\u30e5\u30fc\u3068\u5fae\u5999\u306b\u9055\u3046\u306e\u304c\u3001\u3061\u3087\u3063\u3068\u6c17\u306b\u304f\u308f\u306a\u304b\u3063\u305f\u3002\n\n\u63a2\u3057\u3066\u3044\u308b\u4e2d\u3067\u3001Git \u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u7a81\u3063\u8fbc\u3093\u3067\u308b\u65b9\u304c\u3044\u3066\u3001\u306a\u308b\u307b\u3069\uff5e\u3068\u611f\u5fc3\u3057\u3066\u3001\u63a2\u3059\u65b9\u5411\u6027\u3092\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u3068\u304b\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8Wiki\u306b\u5909\u66f4\u3057\u305f\u3068\u3053\u308d\u3001Crowi \u3092\u63a8\u3057\u3066\u3044\u308b\u8a18\u4e8b\u3092\u898b\u304b\u3051\u305f\u3002\n\n[Markdown\u3067\u66f8\u3051\u308b\u3001\u3088\u3055\u3052\u306aWiki\u30b5\u30fc\u30d0\u30fc\u30bd\u30d5\u30c8\u307e\u3068\u3081 - Qiita](http://qiita.com/Bakudankun/items/740ac8ba1395fe4e40a6)\n\n\u3057\u304b\u3082\u3053\u306e\u65b9\u3001Docker Image \u307e\u3067\u4f5c\u3063\u3066\u3044\u308b\u3002\n\u3061\u3087\u3046\u3069 Docker \u306e\u52c9\u5f37\u3092\u3057\u3088\u3046\u3068\u601d\u3063\u3066\u3044\u305f\u306e\u3067\u5373\u6c7a\u3002\n\n\u672c\u30a8\u30f3\u30c8\u30ea\u306f\u3001Docker \u521d\u5fc3\u8005\u306e\u79c1\u304c Crowi \u3092\u69cb\u7bc9\u3057\u305f\u3063\u3066\u3044\u3046\u30e1\u30e2\u3002\n\n# \u74b0\u5883\nAzure \u4e0a\u306b CentOS \u306e Virtual Machine \u3092\u5efa\u3066\u3066\u3001\u305d\u3053\u306b Docker Container \u3068\u3057\u3066 Crowi \u3092\u7acb\u3061\u4e0a\u3052\u305f\u3002\nAzure Virtual Machine \u306e\u4f5c\u6210\u624b\u9806\u306f\u5272\u611b\u3002\n\n```\n$ uname -r\n3.10.0-514.2.2.el7.x86_64\n\n$ cat /etc/redhat-release\nCentOS Linux release 7.3.1611 (Core) \n```\n\n7.2 \u306e\u30a4\u30e1\u30fc\u30b8\u3067\u4f5c\u6210\u3057\u305f\u3051\u3069\u3001`yum update` \u3057\u305f\u3089 7.3 \u306b\u4e0a\u304c\u3063\u305f\u3002\n\u307e\u3041\u3044\u3044\u304b\u3002\n\n# \u624b\u9806\n\n1. [Docker Engine \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb](./16b7d2e7fa8a4fce94df#1-docker-engine-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB)\n2. [Docker Group \u306e\u4f5c\u6210](./16b7d2e7fa8a4fce94df#2-docker-group-%E3%81%AE%E4%BD%9C%E6%88%90)\n3. [Docker Compose \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb](./16b7d2e7fa8a4fce94df#3-docker-compose-%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB)\n4. [Docker Crowi \u306e\u7acb\u3061\u4e0a\u3052](./16b7d2e7fa8a4fce94df#4-docker-crowi-%E3%81%AE%E7%AB%8B%E3%81%A1%E4%B8%8A%E3%81%92)\n5. [Docker Crowi \u306e\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a](./16b7d2e7fa8a4fce94df#5-docker-crowi-%E3%81%AE%E8%87%AA%E5%8B%95%E8%B5%B7%E5%8B%95%E8%A8%AD%E5%AE%9A)\n\n## 1. Docker Engine \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u53c2\u8003\n[Install Docker on CentOS - Docker](https://docs.docker.com/engine/installation/linux/centos/)\n\ncURL \u30b3\u30de\u30f3\u30c9\u306b\u3066\u3002\n\n```\n$ curl -fsSL https://get.docker.com/ | sudo sh\n```\n\n\u30b5\u30fc\u30d3\u30b9\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3002\n\n```\n$ sudo systemctl status docker.service\n```\n\n`Loaded:` \u306e\u3068\u3053\u308d\u3067 `disabled;` \u306b\u306a\u3063\u3066\u3044\u305f\u3089\u3001\u81ea\u52d5\u958b\u59cb\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3002\n\n```\n$ sudo systemctl enable docker.service\n```\n\n`enabled;` \u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\n```\n$ sudo systemctl status docker.service\n```\n\n\u8d77\u52d5\u3002\n\n```\n$ sudo systemctl start docker\n```\n\nHello World Container \u3092\u5b9f\u884c\u3057\u3066\u307f\u308b\u3002\n\n```\n$ sudo docker run --rm hello-world\n```\n\n\u3053\u3093\u306a\u306e\u304c\u51fa\u529b\u3055\u308c\u308c\u3070 OK \u3060\u3068\u601d\u3046\u3002\n\n```\nUnable to find image 'hello-world:latest' locally\nlatest: Pulling from library/hello-world\nc04b14da8d14: Pull complete \nDigest: sha256:0256e8a36e2070f7bf2d0b0763dbabdd67798512411de4cdcf9431a1feb60fd9\nStatus: Downloaded newer image for hello-world:latest\n\nHello from Docker!\nThis message shows that your installation appears to be working correctly.\n\nTo generate this message, Docker took the following steps:\n 1. The Docker client contacted the Docker daemon.\n 2. The Docker daemon pulled the \"hello-world\" image from the Docker Hub.\n 3. The Docker daemon created a new container from that image which runs the\n    executable that produces the output you are currently reading.\n 4. The Docker daemon streamed that output to the Docker client, which sent it\n    to your terminal.\n\nTo try something more ambitious, you can run an Ubuntu container with:\n $ docker run -it ubuntu bash\n\nShare images, automate workflows, and more with a free Docker Hub account:\n https://hub.docker.com\n\nFor more examples and ideas, visit:\n https://docs.docker.com/engine/userguide/\n```\n\n## 2. Docker Group \u306e\u4f5c\u6210\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u6642\u70b9\u3067\u3001\u30b0\u30eb\u30fc\u30d7\u81ea\u4f53\u306f\u4f5c\u6210\u3055\u308c\u308b\u3063\u307d\u3044\u3051\u3069\u66f8\u3044\u3066\u304a\u304f\u3002\n\n```\n$ sudo groupadd docker\ngroupadd: group 'docker' already exists # \u65e2\u306b\u5b58\u5728\u3057\u305f\uff08\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u4f5c\u3089\u308c\u305f\uff1f\uff09\u306e\u3067\u3001\u6012\u3089\u308c\u305f\u3002\n```\n\nAzure Virtual Machine \u3060\u3068 VM \u4f5c\u6210\u6642\u306b\u4f5c\u308b\u30e6\u30fc\u30b6\u30fc\u304c\u5b9f\u8cea ROOT \u3060\u3051\u3069\u3082\u3001\u6bce\u56de `sudo` \u3084\u3089 `sudo -s` \u3084\u3089\u3084\u308b\u306e\u306f\u5104\u52ab\u306a\u306e\u3067\u3001Group \u306b\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3002\n\n```\n$ sudo usermod -aG docker [your_username]\n```\n\n\u4e00\u65e6\u30ed\u30b0\u30aa\u30d5\u3057\u3066\u3001\u518d\u30ed\u30b0\u30a4\u30f3\u3002\n`sudo` \u6307\u5b9a\u7121\u3057\u3067 `docker run` \u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\n```\n$ docker run --rm hello-world\n```\n\n## 3. Docker Compose \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u53c2\u8003\n[Install Docker Compose - Docker](https://docs.docker.com/compose/install/)\n\nDocker \u306e\u52c9\u5f37\u306e\u305f\u3081\u306b\u306f\u3001MongoDB \u3084 Redis \u3001Elasticsearch \u306e Container \u3092\u81ea\u5206\u3067\u4f5c\u3063\u305f\u65b9\u304c\u3044\u3044\u306e\u3060\u308d\u3046\u3051\u3069\u3001Crowi Image \u306e\u4f5c\u8005\u304c YAML \u307e\u3067\u7528\u610f\u3057\u3066\u304f\u308c\u3066\u3044\u308b\u306e\u3067 Docker Compose \u3092\u4f7f\u3046\u3002\n\ncURL \u30b3\u30de\u30f3\u30c9\u306b\u3066\u3002\n\u6ce8\uff09\u30a8\u30f3\u30c8\u30ea\u516c\u958b\u6642\u70b9\u3067\u306e\u6700\u65b0 Release \u7248\u3092\u5229\u7528\u3002\n\n```\n$ sudo curl -L \"https://github.com/docker/compose/releases/download/1.9.0/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n```\n\n\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3002\n\n```\n$ sudo chmod +x /usr/local/bin/docker-compose\n```\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u78ba\u8a8d\u3002\n\n```\n$ docker-compose --version\n```\n\n### \uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09Docker Compose \u30b3\u30de\u30f3\u30c9\u3092 Tab \u88dc\u5b8c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n\n```\n$ sudo curl -L \"https://raw.githubusercontent.com/docker/compose/$(docker-compose version --short)/contrib/completion/bash/docker-compose\" -o /etc/bash_completion.d/docker-compose\n```\n\n## 4. Docker Crowi \u306e\u7acb\u3061\u4e0a\u3052\n\u4f5c\u8005\u306e Git \u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u9802\u6234\u3059\u308b\u3002\u3042\u308a\u304c\u305f\u3084\u3002\n\u79c1\u306f\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u8ee2\u9001\u3059\u308b\u306e\u304c\u9762\u5012\u3060\u3063\u305f\u306e\u3067\u30af\u30ed\u30fc\u30f3\u3057\u305f\u3002\n\n```\n$ git clone https://github.com/Bakudankun/docker-crowi.git\n```\n\n`Dockerfile` \u3068 `docker-entrypoint.sh` \u3092 Working Dir \u306b\u30b3\u30d4\u30fc\u3059\u308b\u3002\n\n`README.md` \u306b\u66f8\u3044\u3066\u3042\u308b YAML \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\u3002\n\u5185\u5bb9\u306f\u5b8c\u5168\u30b3\u30d4\u30da\u3067\u52d5\u3044\u305f\u3002\u3055\u3059\u304c\u3002\n\n```\n$ vi docker-compose.yml\n```\n\n\u540c\u4e00\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4ee5\u4e0b3\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u72b6\u614b\u306b\u3059\u308b\u3002\n\n```\nDockerfile\ndocker-entrypoint.sh\ndocker-compose.yml\n```\n\n\u3044\u3056\u3001\u7acb\u3061\u4e0a\u3052\u3002\n\n```\n$ docker-compose up\n```\n\n\u30a8\u30e9\u30fc\u7b49\u7121\u304f\u3001\u9014\u4e2d\u3067\u51fa\u529b\u304c\u6b62\u307e\u3063\u305f\u3089\u8d77\u52d5\u51fa\u6765\u3066\u3044\u308b\u306f\u305a\u3002\n\u30d6\u30e9\u30a6\u30b6\u3067\u3044\u3056\u30a2\u30af\u30bb\u30b9\u3002\uff08 http://[server-ip]:8080/ \uff09\n\u30e6\u30fc\u30b6\u30fc\u65b0\u898f\u767b\u9332\u753b\u9762\u304c\u51fa\u3066\u304f\u308c\u3070 OK \u3002\n\uff08URL \u304c http://[server-ip]:8080/install \u306b\u306a\u3063\u3066\u3044\u308b\u306f\u305a\uff09\n\nAzure \u7684\u306a\u8a71\u3092\u3059\u308b\u3068\u3001NSG \u3067 8080 \u306b\u5bfe\u3057\u3066\u7a74\u3092\u958b\u3051\u3066\u304a\u304f\u3068\u3001Public IP \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\nPublic IP \u306e Allocation Method \u304c Static \u306a\u3089 FQDN \u3092\u6307\u5b9a\u3067\u304d\u308b\u306e\u3067\u3001\u3053\u306e FQDN \u3067\u3082\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002 \n\n\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u623b\u308a\u3001`Ctrl + C` \u3067\u4e00\u65e6\u505c\u6b62\u3002\n\n## 5. Docker Crowi \u306e\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n\u4eca\u306e\u72b6\u614b\u3060\u3068\u3001VM \u3092\u518d\u8d77\u52d5\u3057\u3066\u3082 Crowi \u306f\u7acb\u3061\u4e0a\u304c\u3089\u306a\u3044\u306e\u3067\u3001\u81ea\u52d5\u8d77\u52d5\u3055\u305b\u308b\u3002\n\n\u53c2\u8003\n[CentOS7\u3067Docker\u30b3\u30f3\u30c6\u30ca\u306e\u81ea\u52d5\u8d77\u52d5 - Qiita](http://qiita.com/goosys/items/580c861177692f756df0)\n\n\u81ea\u52d5\u8d77\u52d5\u7528\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u3063\u3066\u3057\u307e\u304a\u3046\u3002\n\n```\n$ sudo sh -c 'cat << EOF > /usr/lib/systemd/system/docker-crowi-autostart.service\n[Unit]\nDescription=Auto start of crowi with docker compose\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nExecStart=/usr/local/bin/docker-compose -f [Working Dir Path]/docker-compose.yml up -d\n\n[Install]\nWantedBy=multi-user.target\nEOF'\n```\n\n\u30b5\u30fc\u30d3\u30b9\u3092\u8aad\u307f\u8fbc\u3080\u3002\n\n```\n$ sudo systemctl daemon-reload\n```\n\n\u6709\u52b9\u5316\u3057\u3066\u3001\u81ea\u52d5\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u3002\n\n```\n$ sudo systemctl enable docker-crowi-autostart.service\n```\n\n\u305d\u3057\u3066\u8d77\u52d5\u3002\n\n```\n$ sudo systemctl start docker-crowi-autostart.service\n```\n\n\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u5b9f\u969b\u306b\u518d\u8d77\u52d5\u7b49\u3057\u3066\u78ba\u8a8d\u3092\u3002\n\n# Tips\n\u81ea\u5206\u304c\u30b3\u30de\u30f3\u30c9\u30d8\u30eb\u30d7\u3092\u3088\u304f\u898b\u3066\u306a\u304b\u3063\u305f\u306e\u304c\u60aa\u3044\u306e\u3060\u3051\u3069\u3082\u3001\u6b62\u3081\u3088\u3046\u3068\u601d\u3063\u3066 `docker-compose down` \u3057\u305f\u3089\u524a\u9664\u3055\u308c\u3066\u3057\u307e\u3063\u3066\u3001\u5927\u5909\u30b7\u30e7\u30c3\u30af\u3092\u53d7\u3051\u305f\u3002\n\n\u6b62\u3081\u308b\u3068\u304d\u306f `kill` \u30fb\u30fb\u30fb\u3002\u307c\u304f\u304a\u307c\u3048\u305f\u30fb\u30fb\u30fb\u3002\n\n# \u307e\u3068\u3081\n\u3042\u307e\u308a\u306b\u3082\u3059\u3093\u306a\u308a\u4f5c\u308c\u3066\u3057\u307e\u3063\u305f\u3053\u3068\u306b\u9a5a\u3044\u305f\u3002\nDocker Image \u3084 YAML \u306e\u8cea\u304c\u3088\u3044\u8a3c\u62e0\u3002\n\n\u30d0\u30af\u30c0\u30f3\u304f\u3093\u3055\u3093\u3001\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\n\nCrowi \u81ea\u4f53\u306f\u3053\u308c\u304b\u3089\u30b4\u30ea\u30b4\u30ea\u4f7f\u3044\u8fbc\u3093\u3067\u884c\u304f\u3002\n\n# \u53c2\u8003\u30ea\u30f3\u30af\n\n- [Markdown\u3067\u66f8\u3051\u308b\u3001\u3088\u3055\u3052\u306aWiki\u30b5\u30fc\u30d0\u30fc\u30bd\u30d5\u30c8\u307e\u3068\u3081 - Qiita](http://qiita.com/Bakudankun/items/740ac8ba1395fe4e40a6)\n- [Install Docker on CentOS - Docker](https://docs.docker.com/engine/installation/linux/centos/)\n- [Install Docker Compose - Docker](https://docs.docker.com/compose/install/)\n- [CentOS7\u3067Docker\u30b3\u30f3\u30c6\u30ca\u306e\u81ea\u52d5\u8d77\u52d5 - Qiita](http://qiita.com/goosys/items/580c861177692f756df0)\n", "tags": ["Crowi", "Azure", "CentOS", "docker", "docker-compose"]}