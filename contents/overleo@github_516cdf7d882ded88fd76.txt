{"tags": ["Ruby", "ImageMagick"], "context": " More than 1 year has passed since last update.\u6bd4\u8f03\u3057\u3066\u3044\u308b\u306e\u306f\u3088\u304f\u3042\u308b\u9069\u5f53\u306a 1080 x 236 px \u306e JPEG \u753b\u50cf\u3092 ImageMagick \u3092\u4f7f\u3063\u3066\u9069\u5f53\u306a\u4f4d\u7f6e\u3092\u5207\u308a\u53d6\u3063\u3066\u304f\u308b\u3068\u3044\u3046\u51e6\u7406\u3092\u3057\u3066\u901f\u5ea6\u3092\u6bd4\u8f03\u3057\u3066\u3044\u307e\u3059\u3002\n\u6bd4\u8f03\u3057\u305f\u306e\u306f\u4ee5\u4e0b\u306e3\u3064\u3002\n\nMiniMagick\n\u30d5\u30a1\u30a4\u30eb\u6e21\u3057\u3067 ImageMagick \u3092\u76f4\u63a5\u53e9\u304f\n\u30d1\u30a4\u30d7\u6e21\u3057\u3067 ImageMagick \u3092\u76f4\u63a5\u53e9\u304f\n\n\n\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u306e\u30b9\u30af\u30ea\u30d7\u30c8\nrequire 'benchmark'\nrequire 'mini_magick'\nrequire 'tempfile'\nrequire 'open3'\n\nTARGET = 'common_case_1.jpg'\n\nN = 1000\n\nIMAGE = File.open(TARGET).read\n\ndef minimagick\n  piece_image = MiniMagick::Image.read(IMAGE)\n  piece_image.crop('450x556+0+0')\n  image = piece_image.to_blob\nend\n\ndef imagemagick_file\n  Tempfile.open('tmp_piece_input', './') do |input_image|\n    Tempfile.open('tmp_piece_output', './') do |output_image|\n      input_image.write IMAGE\n      `convert -crop 450x556+0+0 #{input_image.path} #{output_image.path}`\n      output_image.read\n    end\n  end\nend\n\ndef imagemagick_pipe\n  image,_ = Open3.capture2(\"convert -crop 450x556+0+0 jpeg:- jpeg:-\", stdin_data: IMAGE, binmode: true)\nend\n\nBenchmark.bm(20) do |x|\n  x.report('minimagick:') { N.times { minimagick } }\n  x.report('imagemagick_file:') { N.times { imagemagick_file } }\n  x.report('imagemagick_pipe:') { N.times { imagemagick_pipe } }\nend\n\n\n\u7d50\u679c\n                           user     system      total        real\nminimagick:            0.910000   2.490000  30.950000 ( 33.037064)\nimagemagick_file:      0.300000   1.470000  26.260000 ( 27.954511)\nimagemagick_pipe:      0.590000   1.420000  24.920000 ( 25.720133)\n\n\u5b50\u30d7\u30ed\u30bb\u30b9\u5206\u3067\u306e\u51e6\u7406\u3092\u306a\u3093\u3060\u304b\u3046\u307e\u304f\u8868\u793a\u3067\u304d\u306a\u3044\u306e\u3067\u308f\u304b\u308a\u3065\u3089\u3044\u304c total \u304b\u3089 user + system \u5f15\u3044\u305f\u5206\u3002\n\u30d1\u30a4\u30d7\u6e21\u3057\u3067\u53e9\u304f\u306e\u304c\u65e9\u3044\u3063\u307d\u3044\u3002\n\n\u8003\u5bdf\n\u7d50\u5c40 ImageMagick \u5185\u3067\u306e\u51e6\u7406\u304c\u4e00\u756a\u304b\u304b\u308a\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u66f8\u304d\u3067\u901f\u5ea6\u304c\u5927\u5e45\u306b\u4f4e\u4e0b\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u308f\u3051\u3067\u306f\u306a\u3044\u3088\u3046\u306b\u307f\u3048\u308b\u304c\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u66f8\u304d\u3092\u306a\u304f\u305b\u3070\u3042\u308b\u7a0b\u5ea6\u306f\u65e9\u304f\u306a\u308b\u3002JPEG \u306e\u51e6\u7406\u304c\u4e00\u756a\u51e6\u7406\u3092\u98df\u3046\u306e\u3067\u3042\u308d\u3046\u3053\u3068\u304c\u60f3\u50cf\u3055\u308c\u308b\u3002\n\u6bd4\u8f03\u3057\u3066\u3044\u308b\u306e\u306f\u3088\u304f\u3042\u308b\u9069\u5f53\u306a 1080 x 236 px \u306e JPEG \u753b\u50cf\u3092 ImageMagick \u3092\u4f7f\u3063\u3066\u9069\u5f53\u306a\u4f4d\u7f6e\u3092\u5207\u308a\u53d6\u3063\u3066\u304f\u308b\u3068\u3044\u3046\u51e6\u7406\u3092\u3057\u3066\u901f\u5ea6\u3092\u6bd4\u8f03\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u6bd4\u8f03\u3057\u305f\u306e\u306f\u4ee5\u4e0b\u306e3\u3064\u3002\n\n* MiniMagick\n* \u30d5\u30a1\u30a4\u30eb\u6e21\u3057\u3067 ImageMagick \u3092\u76f4\u63a5\u53e9\u304f\n* \u30d1\u30a4\u30d7\u6e21\u3057\u3067 ImageMagick \u3092\u76f4\u63a5\u53e9\u304f\n\n## \u30d9\u30f3\u30c1\u30de\u30fc\u30af\u306e\u30b9\u30af\u30ea\u30d7\u30c8\n\n```rb\nrequire 'benchmark'\nrequire 'mini_magick'\nrequire 'tempfile'\nrequire 'open3'\n\nTARGET = 'common_case_1.jpg'\n\nN = 1000\n\nIMAGE = File.open(TARGET).read\n\ndef minimagick\n  piece_image = MiniMagick::Image.read(IMAGE)\n  piece_image.crop('450x556+0+0')\n  image = piece_image.to_blob\nend\n\ndef imagemagick_file\n  Tempfile.open('tmp_piece_input', './') do |input_image|\n    Tempfile.open('tmp_piece_output', './') do |output_image|\n      input_image.write IMAGE\n      `convert -crop 450x556+0+0 #{input_image.path} #{output_image.path}`\n      output_image.read\n    end\n  end\nend\n\ndef imagemagick_pipe\n  image,_ = Open3.capture2(\"convert -crop 450x556+0+0 jpeg:- jpeg:-\", stdin_data: IMAGE, binmode: true)\nend\n\nBenchmark.bm(20) do |x|\n  x.report('minimagick:') { N.times { minimagick } }\n  x.report('imagemagick_file:') { N.times { imagemagick_file } }\n  x.report('imagemagick_pipe:') { N.times { imagemagick_pipe } }\nend\n```\n\n## \u7d50\u679c\n\n```\n                           user     system      total        real\nminimagick:            0.910000   2.490000  30.950000 ( 33.037064)\nimagemagick_file:      0.300000   1.470000  26.260000 ( 27.954511)\nimagemagick_pipe:      0.590000   1.420000  24.920000 ( 25.720133)\n```\n\n\u5b50\u30d7\u30ed\u30bb\u30b9\u5206\u3067\u306e\u51e6\u7406\u3092\u306a\u3093\u3060\u304b\u3046\u307e\u304f\u8868\u793a\u3067\u304d\u306a\u3044\u306e\u3067\u308f\u304b\u308a\u3065\u3089\u3044\u304c total \u304b\u3089 user + system \u5f15\u3044\u305f\u5206\u3002\n\u30d1\u30a4\u30d7\u6e21\u3057\u3067\u53e9\u304f\u306e\u304c\u65e9\u3044\u3063\u307d\u3044\u3002\n\n## \u8003\u5bdf\n\n\u7d50\u5c40 ImageMagick \u5185\u3067\u306e\u51e6\u7406\u304c\u4e00\u756a\u304b\u304b\u308a\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u66f8\u304d\u3067\u901f\u5ea6\u304c\u5927\u5e45\u306b\u4f4e\u4e0b\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u308f\u3051\u3067\u306f\u306a\u3044\u3088\u3046\u306b\u307f\u3048\u308b\u304c\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u66f8\u304d\u3092\u306a\u304f\u305b\u3070\u3042\u308b\u7a0b\u5ea6\u306f\u65e9\u304f\u306a\u308b\u3002JPEG \u306e\u51e6\u7406\u304c\u4e00\u756a\u51e6\u7406\u3092\u98df\u3046\u306e\u3067\u3042\u308d\u3046\u3053\u3068\u304c\u60f3\u50cf\u3055\u308c\u308b\u3002\n"}