{"context": "\n\n\u306f\u3058\u3081\u306b\n\u3053\u3053\u3067\u306f\u3001Python\u306e\u30c7\u30fc\u30bf\u5206\u6790\u7528\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3042\u308bPandas\u3092\u5229\u7528\u3057\u3066\u3001civilization 4\u306e\u30d7\u30ec\u30a4\u3092\u5b9a\u91cf\u7684\u306b\u8a55\u4fa1\u5206\u6790\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\u672c\u8a18\u4e8b\u306f\n\nciv4\u3068\u3044\u3046\u30b2\u30fc\u30e0\u306e\u30b7\u30b9\u30c6\u30e0\u3092\u77e5\u3063\u3066\u3044\u308b\n\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u306f1\u30642\u3064\u89e6\u3063\u305f\u3053\u3068\u304c\u3042\u308b\n\n\u3068\u3044\u3046\u8aad\u8005\u304c\u3001\u898b\u3088\u3046\u898b\u307e\u306d\u3067\u81ea\u8eab\u306e\u30d7\u30ec\u30a4\u3092\u5206\u6790\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3053\u3068\u3092\u76ee\u6a19\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30d7\u30ec\u30a4\u30c7\u30fc\u30bf\u306e\u51fa\u529b\n\u30d7\u30ec\u30a4\u30c7\u30fc\u30bf\u5206\u6790\u3092\u884c\u3046\u305f\u3081\u306b\u306f\u3001\u307e\u305a\u306f\u30c7\u30fc\u30bf\u304c\u306a\u3051\u308c\u3070\u59cb\u307e\u308a\u307e\u305b\u3093\u3002\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u30c7\u30fc\u30bf\u306e\u51fa\u529b\u65b9\u6cd5\u304b\u3089\u89e3\u8aac\u3057\u307e\u3059\u3002civ4\u306b\u306f\u30c7\u30fc\u30bf\u3092\u51fa\u529b\u3059\u308b\u3088\u3046\u306a\u6a5f\u80fd\u306f\u5b58\u5728\u3057\u306a\u3044\u305f\u3081\u3001Mod\u3067\u89e3\u6c7a\u3057\u307e\u3059\u3002\n\u4f7f\u7528\u3057\u3066\u3044\u308bMod\u306eCvEventManager.py \u306e onEndPlayerTurn\u95a2\u6570\u306b\u3001\u30d5\u30a1\u30a4\u30eb\u306b\u30c7\u30fc\u30bf\u51fa\u529b\u3059\u308b\u305f\u3081\u306e\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002open\u304b\u3089close\u307e\u3067\u304c\u30c7\u30fc\u30bf\u51fa\u529b\u7528\u306e\u8ffd\u52a0\u51e6\u7406\u3067\u3059\u3002\n\nAssets\\Python\\CvEventManager.py\n    def onEndPlayerTurn(self, argsList):\n        'Called at the end of a players turn'\n        iGameTurn, iPlayer = argsList\n\n        if (gc.getGame().getElapsedGameTurns() == 1):\n            if (gc.getPlayer(iPlayer).isHuman()):\n                if (gc.getPlayer(iPlayer).canRevolution(0)):\n                    popupInfo = CyPopupInfo()\n                    popupInfo.setButtonPopupType(ButtonPopupTypes.BUTTONPOPUP_CHANGECIVIC)\n                    popupInfo.addPopup(iPlayer)\n\n        f = open('D:/Temporary/civ4log.csv', 'a')\n        player = gc.getPlayer(iPlayer)\n        (loopCity, iter) = player.firstCity(false)\n        while(loopCity):\n            f.write('%s,%s,%s,%f,%f,%f,%f,%f,%f\\n'\n                % (gc.getGame().getElapsedGameTurns(),\n                player.getNameKey(),\n                loopCity.getNameKey(),\n                loopCity.getBaseCommerceRate(CommerceTypes.COMMERCE_GOLD) * loopCity.getTotalCommerceRateModifier(CommerceTypes.COMMERCE_GOLD) / 100,\n                loopCity.getBaseCommerceRate(CommerceTypes.COMMERCE_RESEARCH) * loopCity.getTotalCommerceRateModifier(CommerceTypes.COMMERCE_RESEARCH) / 100,\n                loopCity.getBaseCommerceRate(CommerceTypes.COMMERCE_CULTURE) * loopCity.getTotalCommerceRateModifier(CommerceTypes.COMMERCE_CULTURE) / 100,\n                loopCity.getBaseCommerceRate(CommerceTypes.COMMERCE_ESPIONAGE) * loopCity.getTotalCommerceRateModifier(CommerceTypes.COMMERCE_ESPIONAGE) / 100,\n                loopCity.getCurrentProductionDifference(true, false),\n                loopCity.getMaintenance()\n                ))\n            (loopCity, iter) = player.nextCity(iter, false)\n        f.close()\n\n        CvAdvisorUtils.resetAdvisorNags()\n        CvAdvisorUtils.endTurnFeats(iPlayer)\n\n\n\u3053\u306e\u5909\u66f4\u3092\u884c\u3063\u305f\u72b6\u614b\u3067\u30b2\u30fc\u30e0\u3092\u30d7\u30ec\u30a4\u3059\u308b\u3068\u3001D:/Temporary/civ4log.csv \u306b\u3001\u6bce\u30bf\u30fc\u30f3\u5168\u6307\u5c0e\u8005\u306e\u90fd\u5e02\u6bce\u306e\u60c5\u5831\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\u51fa\u529b\u3055\u308c\u308b\u60c5\u5831\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\n\n\u30bf\u30fc\u30f3\u6570\n\u6307\u5c0e\u8005\u540d\n\u90fd\u5e02\u540d\n\u91d1\u92ad\n\u7814\u7a76\n\u6587\u5316\u51fa\u529b\n\u30b9\u30d1\u30a4\u30dd\u30a4\u30f3\u30c8\n\u90fd\u5e02\u306e\u7dad\u6301\u8cbb\n\n\u306a\u304a\u3001\u30b2\u30fc\u30e0\u3092\u30ed\u30fc\u30c9\u3059\u308b\u3068\u540c\u3058\u30bf\u30fc\u30f3\u306e\u60c5\u5831\u304c\u91cd\u8907\u3057\u3066\u51fa\u529b\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u306e\u3067\u3001\u91cd\u8907\u5206\u306f\u624b\u52d5\u3067\u524a\u9664\u3059\u308b\u7b49\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u4eca\u304b\u3089\u30b2\u30fc\u30e0\u30d7\u30ec\u30a4\u3059\u308b\u306e\u306f\u3061\u3087\u3063\u3068\u9762\u5012\u2026\u3068\u3044\u3046\u65b9\u306f\u3001\u3053\u3061\u3089\u306b\u79c1\u306e\u30d7\u30ec\u30a4\u30c7\u30fc\u30bf\u3092\u914d\u7f6e\u3057\u3066\u3042\u308a\u307e\u3059\u306e\u3067\u5229\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3053\u306e\u30c7\u30fc\u30bf\u306f\n\n\u96e3\u6613\u5ea6: \u56fd\u738b\n\u30d1\u30f3\u30b2\u30a2\n\u6307\u5c0e\u8005: \u30da\u30ea\u30af\u30ec\u30b9\n351T\u975e\u6226\u5b87\u5b99\u52dd\u5229\n\u5c0f\u5c4b\u90fd\u5e026\u3001\u88fd\u6750\u6240\u578b\u751f\u7523\u90fd\u5e021\u3001\u56fd\u7acb\u516c\u5712&\u6c11\u65cf\u53d9\u4e8b\u8a69\u90fd\u5e021\n\u5efa\u3066\u305f\u4ee3\u8868\u7684\u306a\u4e16\u754c\u907a\u7523: \u30d5\u30a1\u30ed\u30b9\u706f\u53f0, \u30de\u30a6\u30bd\u30ed\u30b9\u970a\u5edf, \u96fb\u6c17\u7cfb\u907a\u7523\n\u30b7\u30c9\u5bff\u53f8 & \u30de\u30a4\u30f3\u30cb\u30f3\u30b0\u793e\u3042\u308a\n\n\u3068\u3044\u3046\u6bd4\u8f03\u7684\u30aa\u30fc\u30bd\u30c9\u30c3\u30af\u30b9\u306a\u975e\u6226\u52dd\u5229\u30b9\u30bf\u30a4\u30eb\u306e\u3082\u306e\u3067\u3059\u3002\n\u7acb\u5730\u306f\u3053\u3093\u306a\u611f\u3058\u3002\n\n\n\nPandas\u74b0\u5883\u306e\u6e96\u5099\nPandas\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306eURL\u304b\u3089Anaconda3\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nhttps://www.continuum.io/downloads\n\u307e\u305f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u72b6\u614b\u3067\u306f\u30b0\u30e9\u30d5\u4e2d\u3067\u65e5\u672c\u8a9e\u3092\u8868\u793a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u306b\u5f93\u3044\u3001\u30d5\u30a9\u30f3\u30c8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059\u3002\nhttp://kaisk.hatenadiary.com/entry/2015/02/15/215831\n\n\u5206\u6790\u306e\u5b9f\u65bd\n\nPandas\u5b9f\u884c\u74b0\u5883\u306e\u8d77\u52d5\n\u30b9\u30bf\u30fc\u30c8\u30e1\u30cb\u30e5\u30fc\u304b\u3089Anaconda3 - Jupyter notebook\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nPandas\u306e\u5b9f\u884c\u74b0\u5883\u3067\u3042\u308bJupyter notebook\u304c\u8d77\u52d5\u3057\u3001\u30d6\u30e9\u30a6\u30b6\u4e0a\u306bJupyter\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u6210\u529f\u3067\u3059\u3002\n\nCSV\u30d8\u30c3\u30c0\u306e\u8ffd\u52a0\nCSV\u30d5\u30a1\u30a4\u30eb\u306e\u6700\u521d\u306e\u884c\u306b\u4ee5\u4e0b\u306e\u30d8\u30c3\u30c0\u3092\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u306e\u884c\u306f\u3001Pandas\u304c\u5217\u540d\u3092\u8a8d\u8b58\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\n\u30bf\u30fc\u30f3\u6570,\u6307\u5c0e\u8005,\u90fd\u5e02\u540d,\u91d1\u92ad,\u7814\u7a76,\u6587\u5316,\u30b9\u30d1\u30a4,\u751f\u7523,\u7dad\u6301\u8cbb\n\n\nCSV\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u3068\u30c7\u30fc\u30bf\u306e\u8868\u793a\nJupyter\u306b\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u5b9f\u884c\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\u30b3\u30fc\u30c9\u3092\u5165\u529b\u5f8c\u3001Ctrl+Enter\u30ad\u30fc\u3092\u62bc\u3059\u3053\u3068\u3067\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n%matplotlib inline\n\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom IPython.display import display\n\n# \u3068\u308a\u3042\u3048\u305a\u751f\u30c7\u30fc\u30bf\u3092\u5168\u90e8\u51fa\u529b\ndata = pd.read_csv('d:/Temporary/civ4log.csv')\ndata.head(6)\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u7d50\u679c\u304c\u51fa\u529b\u3055\u308c\u305f\u306f\u305a\u3067\u3059\u3002\u8a18\u4e8b\u30b9\u30da\u30fc\u30b9\u306e\u95a2\u4fc2\u4e0a6\u884c\u3057\u304b\u8868\u793a\u3057\u3066\u3044\u307e\u305b\u3093\u304c\u3001head(6)\u306e\u7b87\u6240\u306e\u6570\u5024\u3092\u66f8\u304d\u63db\u3048\u308b\u3068\u3001\u4efb\u610f\u306e\u884c\u6570\u306e\u7d50\u679c\u304c\u8868\u793a\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001.head(6) \u3092\u4e38\u3054\u3068\u524a\u9664\u3059\u308b\u3053\u3068\u3067\u3059\u3079\u3066\u306e\u884c\u3092\u8868\u793a\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\n\n  \u30bf\u30fc\u30f3\u6570 \u6307\u5c0e\u8005 \u90fd\u5e02\u540d \u91d1\u92ad \u7814\u7a76 \u6587\u5316 \u30b9\u30d1\u30a4 \u751f\u7523 \u7dad\u6301\u8cbb \n\n\n 0 0 kojim TXT_KEY_CITY_NAME_ATHENS 0.0 10.0 4.0 4.0 1.0 0.0 \n 1 0 TXT_KEY_LEADER_WANGKON TXT_KEY_CITY_NAME_SEOUL 0.0 9.0 2.0 4.0 2.0 0.0 \n 2 0 TXT_KEY_LEADER_HAMMURABI TXT_KEY_CITY_NAME_BABYLON 0.0 9.0 2.0 4.0 1.0 0.0 \n 3 0 TXT_KEY_LEADER_PACAL TXT_KEY_CITY_NAME_MUTAL 0.0 9.0 2.0 4.0 1.0 0.0 \n 4 0 TXT_KEY_LEADER_SITTING_BULL TXT_KEY_CITY_NAME_CAHOKIA 0.0 11.0 2.0 4.0 1.0 0.0 \n 5 0 TXT_KEY_LEADER_GILGAMESH TXT_KEY_CITY_NAME_URUK 0.0 10.0 4.0 4.0 1.0 0.0 \n\n\n\n\n\u5206\u6790\u65b9\u91dd\u306b\u3064\u3044\u3066\n\u3053\u306e\u3042\u305f\u308a\u3067\u5206\u6790\u306e\u76ee\u6a19\u3092\u5b9a\u3081\u307e\u3057\u3087\u3046\u3002\u3068\u308a\u3042\u3048\u305a\u4eca\u56de\u306f\u3001\u81ea\u56fd\u306e\u5404\u90fd\u5e02\u304c\u5efa\u3066\u3089\u308c\u3066\u304b\u3089\u30b2\u30fc\u30e0\u7d42\u4e86\u6642\u3067\u3042\u308b351T\u3081\u307e\u3067\u306b\u3001\u3069\u308c\u3060\u3051\u306e\u7814\u7a76\u529b\u304a\u3088\u3073\u751f\u7523\u529b\u3092\u751f\u307f\u51fa\u3057\u305f\u304b\u7b97\u51fa\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n\u60c5\u5831\u306e\u7d5e\u8fbc\u307f\u3068\u8ffd\u52a0\n\u5148\u307b\u3069\u8868\u793a\u3057\u305f\u60c5\u5831\u306e\u3046\u3061\u3001\u6307\u5c0e\u8005\u306e\u5217\u304ckojim\u3067\u306a\u3044\u884c\u306fAI\u306e\u90fd\u5e02\u306b\u95a2\u3059\u308b\u60c5\u5831\u3067\u3059\u3002\u3053\u308c\u3089\u306f\u4eca\u56de\u306e\u5206\u6790\u3067\u306f\u4e0d\u8981\u3067\u3042\u308b\u305f\u3081\u3001\u9664\u53bb\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u3087\u3046\u3002\n\u307e\u305a\u306fJupyter\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089 Insert - Insert Cell Below\u3092\u9078\u3073\u3001\u30b3\u30fc\u30c9\u5165\u529b\u7528\u306e\u30bb\u30eb\u30921\u3064\u8ffd\u52a0\u3057\u307e\u3059\u3002\u8ffd\u52a0\u3055\u308c\u305f\u30bb\u30eb\u306b\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u5165\u529b\u3057\u3001\u5b9f\u884c\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n# AI\u306e\u30c7\u30fc\u30bf\u306f\u90aa\u9b54\u306a\u306e\u3067\u9664\u5916\ndata2 = data.query(\"\u6307\u5c0e\u8005 == 'kojim'\")\ndata2\n\n\n\n\n  \u30bf\u30fc\u30f3\u6570 \u6307\u5c0e\u8005 \u90fd\u5e02\u540d \u91d1\u92ad \u7814\u7a76 \u6587\u5316 \u30b9\u30d1\u30a4 \u751f\u7523 \u7dad\u6301\u8cbb \n\n\n 0 0 kojim TXT_KEY_CITY_NAME_ATHENS 0.0 10.0 4.0 4.0 1.0 0.0 \n 7 1 kojim TXT_KEY_CITY_NAME_ATHENS 0.0 10.0 4.0 4.0 1.0 0.0 \n 14 2 kojim TXT_KEY_CITY_NAME_ATHENS 0.0 10.0 4.0 4.0 1.0 0.0 \n 21 3 kojim TXT_KEY_CITY_NAME_ATHENS 0.0 11.0 4.0 4.0 1.0 0.0 \n 28 4 kojim TXT_KEY_CITY_NAME_ATHENS 0.0 11.0 4.0 4.0 1.0 0.0 \n 35 5 kojim TXT_KEY_CITY_NAME_ATHENS 0.0 11.0 4.0 4.0 1.0 0.0 \n\n\n\n\u898b\u4e8b\u81ea\u90fd\u5e02\u306e\u30c7\u30fc\u30bf\u3060\u3051\u306b\u7d5e\u308a\u8fbc\u307e\u308c\u307e\u3057\u305f\u3002\n\u7d9a\u3044\u3066\u3001\u90fd\u5e02\u306e\u51fa\u529b\u60c5\u5831\u3092\u5927\u307e\u304b\u306b\u8868\u3059\u5217\u3092\u8ffd\u52a0\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u3053\u306e\u30b2\u30fc\u30e0\u306b\u304a\u3044\u3066\u90fd\u5e02\u306e\u51fa\u529b\u306f\u3001\u91d1\u92ad\u51fa\u529b, \u7814\u7a76\u51fa\u529b, \u30b9\u30d1\u30a4\u30dd\u30a4\u30f3\u30c8\u51fa\u529b, \u751f\u7523\u529b\u3092\u8db3\u3057\u3001\u305d\u3053\u304b\u3089\u7dad\u6301\u8cbb\u3092\u5f15\u304f\u3053\u3068\u3067\u3056\u3063\u304f\u308a\u3068\u8868\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u6587\u5316\u529b\u3082\u8db3\u3057\u305f\u307b\u3046\u304c\u826f\u3044\u3001\u30b9\u30d1\u30a4\u30dd\u30a4\u30f3\u30c8\u306f\u4e0d\u8981\u3067\u306f\u306a\u3044\u304b\u3001\u3068\u601d\u3046\u65b9\u306f\u5404\u81ea\u30a2\u30ec\u30f3\u30b8\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\u5049\u4eba\u30dd\u30a4\u30f3\u30c8\uff1f\u5fd8\u308c\u3066\u304f\u3060\u3055\u3044\u3002\n\u305d\u308c\u3067\u306f\u30bb\u30eb\u3092\u3082\u30461\u3064\u8ffd\u52a0\u3057\u305f\u4e0a\u3067\u3001\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u5165\u529b&\u5b9f\u884c\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\ndata2['\u51fa\u529b'] = data2['\u91d1\u92ad'] + data2['\u7814\u7a76'] + data2['\u30b9\u30d1\u30a4'] + data2['\u751f\u7523'] - data2['\u7dad\u6301\u8cbb']\ndata2\n\n\n\n\n  \u30bf\u30fc\u30f3\u6570 \u6307\u5c0e\u8005 \u90fd\u5e02\u540d \u91d1\u92ad \u7814\u7a76 \u6587\u5316 \u30b9\u30d1\u30a4 \u751f\u7523 \u7dad\u6301\u8cbb \u51fa\u529b \n\n\n 0 0 kojim TXT_KEY_CITY_NAME_ATHENS 0.0 10.0 4.0 4.0 1.0 0.0 15.0 \n 7 1 kojim TXT_KEY_CITY_NAME_ATHENS 0.0 10.0 4.0 4.0 1.0 0.0 15.0 \n 14 2 kojim TXT_KEY_CITY_NAME_ATHENS 0.0 10.0 4.0 4.0 1.0 0.0 15.0 \n 21 3 kojim TXT_KEY_CITY_NAME_ATHENS 0.0 11.0 4.0 4.0 1.0 0.0 16.0 \n 28 4 kojim TXT_KEY_CITY_NAME_ATHENS 0.0 11.0 4.0 4.0 1.0 0.0 16.0 \n 35 5 kojim TXT_KEY_CITY_NAME_ATHENS 0.0 11.0 4.0 4.0 1.0 0.0 16.0 \n\n\n\n\u65b0\u3057\u3044\u5217\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u306d\u3002\n\n\u90fd\u5e02\u6bce\u306e\u96c6\u7d04\n\u6b21\u306f\u90fd\u5e02\u6bce\u306e\u30c7\u30fc\u30bf\u306e\u96c6\u7d04\u3067\u3059\u3002\n\u30c7\u30fc\u30bf\u3092\u96c6\u7d04\u3059\u308b\u306b\u306fgroupby\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002groupby\u3067\u306f\u96c6\u7d04\u306e\u30ad\u30fc\u306b\u3057\u305f\u3044\u9805\u76ee\u540d\u3092\u30d1\u30e9\u30e1\u30bf\u306b\u6e21\u3057\u3066\u3084\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4eca\u56de\u306f\u90fd\u5e02\u3054\u3068\u306e\u96c6\u8a08\u5024\u3092\u7b97\u51fa\u3057\u305f\u3044\u306e\u3067\u90fd\u5e02\u540d\u3092\u30d1\u30e9\u30e1\u30bf\u306b\u6e21\u3057\u3066\u3084\u308a\u307e\u3057\u3087\u3046\u3002\ngdata = data2.groupby('\u90fd\u5e02\u540d').sum()\ngdata\n\n\n\n\n  \u30bf\u30fc\u30f3\u6570 \u91d1\u92ad \u7814\u7a76 \u6587\u5316 \u30b9\u30d1\u30a4 \u751f\u7523 \u7dad\u6301\u8cbb \u51fa\u529b \n \u90fd\u5e02\u540d         \n\n\n TXT_KEY_CITY_NAME_ARGOS 57498 2514.0 20014.0 5771.0 3105.0 6294.0 1577.0 30350.0 \n TXT_KEY_CITY_NAME_ATHENS 61776 3323.0 98223.0 15597.0 4112.0 20076.0 1473.0 124261.0 \n TXT_KEY_CITY_NAME_CORINTH 60398 893.0 19968.0 24386.0 4604.0 10552.0 1815.0 34202.0 \n TXT_KEY_CITY_NAME_KNOSSOS 57120 1117.0 20258.0 6893.0 5789.0 9265.0 1282.0 35147.0 \n TXT_KEY_CITY_NAME_MYCENAE 56316 731.0 18085.0 7778.0 4036.0 8277.0 1358.0 29771.0 \n TXT_KEY_CITY_NAME_PHARSALOS 56105 167.0 4570.0 10231.0 2729.0 22216.0 1747.0 27935.0 \n TXT_KEY_CITY_NAME_SPARTA 60741 3521.0 12459.0 15164.0 4042.0 8050.0 2113.0 25959.0 \n TXT_KEY_CITY_NAME_THEBES 59885 20647.0 29434.0 8364.0 3550.0 10785.0 2144.0 62272.0 \n\n\n\n\u96c6\u8a08\u65b9\u6cd5\u306bsum\u3001\u3064\u307e\u308a\u5408\u8a08\u5024\u3092\u6307\u5b9a\u3057\u305f\u306e\u3067\u5404\u5217\u306f\u90fd\u5e02\u6bce\u306e\u5408\u8a08\u5024\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3055\u3066\u3053\u306e\u30c7\u30fc\u30bf\u3092\u773a\u3081\u3066\u3044\u3066\u6c17\u304c\u3064\u304f\u3053\u3068\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u7814\u7a76\u529b\u3068\u751f\u7523\u304c\u305a\u3070\u629c\u3051\u3066\u9ad8\u3044\u306e\u306f\u9996\u90fd\u3067\u3042\u308bATHENS\n\u751f\u7523\u90fd\u5e02\u3067\u3042\u308bPHARSALOS\u306e\u751f\u7523\u529b\u306f\u9996\u90fd\u306e\u305d\u308c\u3092\u4e0a\u56de\u308b\n\u6587\u5316\u529b\u30c8\u30c3\u30d7\u306f\u56fd\u5883\u6700\u524d\u7dda\u3067\u738b\u6a29\u306e\u9996\u90fd\u306e\u6587\u5316\u529b\u3068\u62bc\u3057\u5408\u3063\u3066\u3044\u305fCORINTH\n\u5c0f\u5c4b\u3092\u5f35\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u5049\u4eba\u90fd\u5e02\u306eSPARTA\u306e\u7814\u7a76\u529b\u306f\u304a\u5bdf\u3057\n\u4f01\u696d\u672c\u793e\u306e\u3042\u3063\u305fTHEBES\u306f\u91d1\u92ad\u53ce\u5165\u304c1\u6841\u9055\u3046\n\n\n\u7d9a\u304d\u306e\u8a18\u4e8b\n\u3044\u307e\u304b\u3044\u3066\u307e\u3059\n# \u306f\u3058\u3081\u306b\n\u3053\u3053\u3067\u306f\u3001Python\u306e\u30c7\u30fc\u30bf\u5206\u6790\u7528\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3042\u308bPandas\u3092\u5229\u7528\u3057\u3066\u3001civilization 4\u306e\u30d7\u30ec\u30a4\u3092\u5b9a\u91cf\u7684\u306b\u8a55\u4fa1\u5206\u6790\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\u672c\u8a18\u4e8b\u306f\n\n- civ4\u3068\u3044\u3046\u30b2\u30fc\u30e0\u306e\u30b7\u30b9\u30c6\u30e0\u3092\u77e5\u3063\u3066\u3044\u308b\n- \u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u306f1\u30642\u3064\u89e6\u3063\u305f\u3053\u3068\u304c\u3042\u308b\n\n\u3068\u3044\u3046\u8aad\u8005\u304c\u3001\u898b\u3088\u3046\u898b\u307e\u306d\u3067\u81ea\u8eab\u306e\u30d7\u30ec\u30a4\u3092\u5206\u6790\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3053\u3068\u3092\u76ee\u6a19\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\n# \u30d7\u30ec\u30a4\u30c7\u30fc\u30bf\u306e\u51fa\u529b\n\u30d7\u30ec\u30a4\u30c7\u30fc\u30bf\u5206\u6790\u3092\u884c\u3046\u305f\u3081\u306b\u306f\u3001\u307e\u305a\u306f\u30c7\u30fc\u30bf\u304c\u306a\u3051\u308c\u3070\u59cb\u307e\u308a\u307e\u305b\u3093\u3002\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u30c7\u30fc\u30bf\u306e\u51fa\u529b\u65b9\u6cd5\u304b\u3089\u89e3\u8aac\u3057\u307e\u3059\u3002civ4\u306b\u306f\u30c7\u30fc\u30bf\u3092\u51fa\u529b\u3059\u308b\u3088\u3046\u306a\u6a5f\u80fd\u306f\u5b58\u5728\u3057\u306a\u3044\u305f\u3081\u3001Mod\u3067\u89e3\u6c7a\u3057\u307e\u3059\u3002\n\u4f7f\u7528\u3057\u3066\u3044\u308bMod\u306eCvEventManager.py \u306e onEndPlayerTurn\u95a2\u6570\u306b\u3001\u30d5\u30a1\u30a4\u30eb\u306b\u30c7\u30fc\u30bf\u51fa\u529b\u3059\u308b\u305f\u3081\u306e\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002open\u304b\u3089close\u307e\u3067\u304c\u30c7\u30fc\u30bf\u51fa\u529b\u7528\u306e\u8ffd\u52a0\u51e6\u7406\u3067\u3059\u3002\n\n```Python:Assets\\Python\\CvEventManager.py\n\tdef onEndPlayerTurn(self, argsList):\n\t\t'Called at the end of a players turn'\n\t\tiGameTurn, iPlayer = argsList\n\n\t\tif (gc.getGame().getElapsedGameTurns() == 1):\n\t\t\tif (gc.getPlayer(iPlayer).isHuman()):\n\t\t\t\tif (gc.getPlayer(iPlayer).canRevolution(0)):\n\t\t\t\t\tpopupInfo = CyPopupInfo()\n\t\t\t\t\tpopupInfo.setButtonPopupType(ButtonPopupTypes.BUTTONPOPUP_CHANGECIVIC)\n\t\t\t\t\tpopupInfo.addPopup(iPlayer)\n\n\t\tf = open('D:/Temporary/civ4log.csv', 'a')\n\t\tplayer = gc.getPlayer(iPlayer)\n\t\t(loopCity, iter) = player.firstCity(false)\n\t\twhile(loopCity):\n\t\t\tf.write('%s,%s,%s,%f,%f,%f,%f,%f,%f\\n'\n\t\t\t\t% (gc.getGame().getElapsedGameTurns(),\n\t\t\t\tplayer.getNameKey(),\n\t\t\t\tloopCity.getNameKey(),\n\t\t\t\tloopCity.getBaseCommerceRate(CommerceTypes.COMMERCE_GOLD) * loopCity.getTotalCommerceRateModifier(CommerceTypes.COMMERCE_GOLD) / 100,\n\t\t\t\tloopCity.getBaseCommerceRate(CommerceTypes.COMMERCE_RESEARCH) * loopCity.getTotalCommerceRateModifier(CommerceTypes.COMMERCE_RESEARCH) / 100,\n\t\t\t\tloopCity.getBaseCommerceRate(CommerceTypes.COMMERCE_CULTURE) * loopCity.getTotalCommerceRateModifier(CommerceTypes.COMMERCE_CULTURE) / 100,\n\t\t\t\tloopCity.getBaseCommerceRate(CommerceTypes.COMMERCE_ESPIONAGE) * loopCity.getTotalCommerceRateModifier(CommerceTypes.COMMERCE_ESPIONAGE) / 100,\n\t\t\t\tloopCity.getCurrentProductionDifference(true, false),\n\t\t\t\tloopCity.getMaintenance()\n\t\t\t\t))\n\t\t\t(loopCity, iter) = player.nextCity(iter, false)\n\t\tf.close()\n\n\t\tCvAdvisorUtils.resetAdvisorNags()\n\t\tCvAdvisorUtils.endTurnFeats(iPlayer)\n```\n\n\u3053\u306e\u5909\u66f4\u3092\u884c\u3063\u305f\u72b6\u614b\u3067\u30b2\u30fc\u30e0\u3092\u30d7\u30ec\u30a4\u3059\u308b\u3068\u3001D:/Temporary/civ4log.csv \u306b\u3001\u6bce\u30bf\u30fc\u30f3\u5168\u6307\u5c0e\u8005\u306e\u90fd\u5e02\u6bce\u306e\u60c5\u5831\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\u51fa\u529b\u3055\u308c\u308b\u60c5\u5831\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\n\n- \u30bf\u30fc\u30f3\u6570\n- \u6307\u5c0e\u8005\u540d\n- \u90fd\u5e02\u540d\n- \u91d1\u92ad\n- \u7814\u7a76\n- \u6587\u5316\u51fa\u529b\n- \u30b9\u30d1\u30a4\u30dd\u30a4\u30f3\u30c8\n- \u90fd\u5e02\u306e\u7dad\u6301\u8cbb\n\n\u306a\u304a\u3001\u30b2\u30fc\u30e0\u3092\u30ed\u30fc\u30c9\u3059\u308b\u3068\u540c\u3058\u30bf\u30fc\u30f3\u306e\u60c5\u5831\u304c\u91cd\u8907\u3057\u3066\u51fa\u529b\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u306e\u3067\u3001\u91cd\u8907\u5206\u306f\u624b\u52d5\u3067\u524a\u9664\u3059\u308b\u7b49\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u4eca\u304b\u3089\u30b2\u30fc\u30e0\u30d7\u30ec\u30a4\u3059\u308b\u306e\u306f\u3061\u3087\u3063\u3068\u9762\u5012\u2026\u3068\u3044\u3046\u65b9\u306f\u3001[\u3053\u3061\u3089](https://gist.githubusercontent.com/kojim/0a47ed4258222b0541a42aa9fd7da906/raw/a5d6a1a527deec269697c5b2ddab4157184af4ff/civ4.csv)\u306b\u79c1\u306e\u30d7\u30ec\u30a4\u30c7\u30fc\u30bf\u3092\u914d\u7f6e\u3057\u3066\u3042\u308a\u307e\u3059\u306e\u3067\u5229\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3053\u306e\u30c7\u30fc\u30bf\u306f\n\n- \u96e3\u6613\u5ea6: \u56fd\u738b\n- \u30d1\u30f3\u30b2\u30a2\n- \u6307\u5c0e\u8005: \u30da\u30ea\u30af\u30ec\u30b9\n- 351T\u975e\u6226\u5b87\u5b99\u52dd\u5229\n- \u5c0f\u5c4b\u90fd\u5e026\u3001\u88fd\u6750\u6240\u578b\u751f\u7523\u90fd\u5e021\u3001\u56fd\u7acb\u516c\u5712&\u6c11\u65cf\u53d9\u4e8b\u8a69\u90fd\u5e021\n- \u5efa\u3066\u305f\u4ee3\u8868\u7684\u306a\u4e16\u754c\u907a\u7523: \u30d5\u30a1\u30ed\u30b9\u706f\u53f0, \u30de\u30a6\u30bd\u30ed\u30b9\u970a\u5edf, \u96fb\u6c17\u7cfb\u907a\u7523\n- \u30b7\u30c9\u5bff\u53f8 & \u30de\u30a4\u30f3\u30cb\u30f3\u30b0\u793e\u3042\u308a\n\n\u3068\u3044\u3046\u6bd4\u8f03\u7684\u30aa\u30fc\u30bd\u30c9\u30c3\u30af\u30b9\u306a\u975e\u6226\u52dd\u5229\u30b9\u30bf\u30a4\u30eb\u306e\u3082\u306e\u3067\u3059\u3002\n\u7acb\u5730\u306f\u3053\u3093\u306a\u611f\u3058\u3002\n\n![civ_qiita1.PNG](https://qiita-image-store.s3.amazonaws.com/0/115351/4c6c4433-6cac-d6e8-c834-638314e0108b.png)\n\n![civ_qiita2.PNG](https://qiita-image-store.s3.amazonaws.com/0/115351/64ae65ce-ce51-665f-a4fa-afe94b5934d2.png)\n\n\n# Pandas\u74b0\u5883\u306e\u6e96\u5099\nPandas\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u306eURL\u304b\u3089Anaconda3\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nhttps://www.continuum.io/downloads\n\u307e\u305f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u72b6\u614b\u3067\u306f\u30b0\u30e9\u30d5\u4e2d\u3067\u65e5\u672c\u8a9e\u3092\u8868\u793a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u305f\u3081\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u306b\u5f93\u3044\u3001\u30d5\u30a9\u30f3\u30c8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059\u3002\nhttp://kaisk.hatenadiary.com/entry/2015/02/15/215831\n\n# \u5206\u6790\u306e\u5b9f\u65bd\n## Pandas\u5b9f\u884c\u74b0\u5883\u306e\u8d77\u52d5\n\u30b9\u30bf\u30fc\u30c8\u30e1\u30cb\u30e5\u30fc\u304b\u3089Anaconda3 - Jupyter notebook\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nPandas\u306e\u5b9f\u884c\u74b0\u5883\u3067\u3042\u308bJupyter notebook\u304c\u8d77\u52d5\u3057\u3001\u30d6\u30e9\u30a6\u30b6\u4e0a\u306bJupyter\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u6210\u529f\u3067\u3059\u3002\n\n## CSV\u30d8\u30c3\u30c0\u306e\u8ffd\u52a0\nCSV\u30d5\u30a1\u30a4\u30eb\u306e\u6700\u521d\u306e\u884c\u306b\u4ee5\u4e0b\u306e\u30d8\u30c3\u30c0\u3092\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u306e\u884c\u306f\u3001Pandas\u304c\u5217\u540d\u3092\u8a8d\u8b58\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\n\n```\n\u30bf\u30fc\u30f3\u6570,\u6307\u5c0e\u8005,\u90fd\u5e02\u540d,\u91d1\u92ad,\u7814\u7a76,\u6587\u5316,\u30b9\u30d1\u30a4,\u751f\u7523,\u7dad\u6301\u8cbb\n```\n\n## CSV\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u3068\u30c7\u30fc\u30bf\u306e\u8868\u793a\nJupyter\u306b\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u5b9f\u884c\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\u30b3\u30fc\u30c9\u3092\u5165\u529b\u5f8c\u3001Ctrl+Enter\u30ad\u30fc\u3092\u62bc\u3059\u3053\u3068\u3067\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\n```py3\n%matplotlib inline\n\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom IPython.display import display\n\n# \u3068\u308a\u3042\u3048\u305a\u751f\u30c7\u30fc\u30bf\u3092\u5168\u90e8\u51fa\u529b\ndata = pd.read_csv('d:/Temporary/civ4log.csv')\ndata.head(6)\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u7d50\u679c\u304c\u51fa\u529b\u3055\u308c\u305f\u306f\u305a\u3067\u3059\u3002\u8a18\u4e8b\u30b9\u30da\u30fc\u30b9\u306e\u95a2\u4fc2\u4e0a6\u884c\u3057\u304b\u8868\u793a\u3057\u3066\u3044\u307e\u305b\u3093\u304c\u3001head(6)\u306e\u7b87\u6240\u306e\u6570\u5024\u3092\u66f8\u304d\u63db\u3048\u308b\u3068\u3001\u4efb\u610f\u306e\u884c\u6570\u306e\u7d50\u679c\u304c\u8868\u793a\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001.head(6) \u3092\u4e38\u3054\u3068\u524a\u9664\u3059\u308b\u3053\u3068\u3067\u3059\u3079\u3066\u306e\u884c\u3092\u8868\u793a\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n<div>\n<table border=\"1\">\n  <thead>\n    <tr style=\"text-align: right;\"> <th></th> <th>\u30bf\u30fc\u30f3\u6570</th> <th>\u6307\u5c0e\u8005</th> <th>\u90fd\u5e02\u540d</th> <th>\u91d1\u92ad</th> <th>\u7814\u7a76</th> <th>\u6587\u5316</th> <th>\u30b9\u30d1\u30a4</th> <th>\u751f\u7523</th> <th>\u7dad\u6301\u8cbb</th> </tr>\n  </thead>\n  <tbody>\n    <tr> <th>0</th> <td>0</td> <td>kojim</td> <td>TXT_KEY_CITY_NAME_ATHENS</td> <td>0.0</td> <td>10.0</td> <td>4.0</td> <td>4.0</td> <td>1.0</td> <td>0.0</td> </tr>\n    <tr> <th>1</th> <td>0</td> <td>TXT_KEY_LEADER_WANGKON</td> <td>TXT_KEY_CITY_NAME_SEOUL</td> <td>0.0</td> <td>9.0</td> <td>2.0</td> <td>4.0</td> <td>2.0</td> <td>0.0</td> </tr>\n    <tr> <th>2</th> <td>0</td> <td>TXT_KEY_LEADER_HAMMURABI</td> <td>TXT_KEY_CITY_NAME_BABYLON</td> <td>0.0</td> <td>9.0</td> <td>2.0</td> <td>4.0</td> <td>1.0</td> <td>0.0</td> </tr>\n    <tr> <th>3</th> <td>0</td> <td>TXT_KEY_LEADER_PACAL</td> <td>TXT_KEY_CITY_NAME_MUTAL</td> <td>0.0</td> <td>9.0</td> <td>2.0</td> <td>4.0</td> <td>1.0</td> <td>0.0</td> </tr>\n    <tr> <th>4</th> <td>0</td> <td>TXT_KEY_LEADER_SITTING_BULL</td> <td>TXT_KEY_CITY_NAME_CAHOKIA</td> <td>0.0</td> <td>11.0</td> <td>2.0</td> <td>4.0</td> <td>1.0</td> <td>0.0</td> </tr>\n    <tr> <th>5</th> <td>0</td> <td>TXT_KEY_LEADER_GILGAMESH</td> <td>TXT_KEY_CITY_NAME_URUK</td> <td>0.0</td> <td>10.0</td> <td>4.0</td> <td>4.0</td> <td>1.0</td> <td>0.0</td> </tr>\n  </tbody>\n</table>\n</div>\n\n## \u5206\u6790\u65b9\u91dd\u306b\u3064\u3044\u3066\n\u3053\u306e\u3042\u305f\u308a\u3067\u5206\u6790\u306e\u76ee\u6a19\u3092\u5b9a\u3081\u307e\u3057\u3087\u3046\u3002\u3068\u308a\u3042\u3048\u305a\u4eca\u56de\u306f\u3001\u81ea\u56fd\u306e\u5404\u90fd\u5e02\u304c\u5efa\u3066\u3089\u308c\u3066\u304b\u3089\u30b2\u30fc\u30e0\u7d42\u4e86\u6642\u3067\u3042\u308b351T\u3081\u307e\u3067\u306b\u3001\u3069\u308c\u3060\u3051\u306e\u7814\u7a76\u529b\u304a\u3088\u3073\u751f\u7523\u529b\u3092\u751f\u307f\u51fa\u3057\u305f\u304b\u7b97\u51fa\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n## \u60c5\u5831\u306e\u7d5e\u8fbc\u307f\u3068\u8ffd\u52a0\n\u5148\u307b\u3069\u8868\u793a\u3057\u305f\u60c5\u5831\u306e\u3046\u3061\u3001\u6307\u5c0e\u8005\u306e\u5217\u304ckojim\u3067\u306a\u3044\u884c\u306fAI\u306e\u90fd\u5e02\u306b\u95a2\u3059\u308b\u60c5\u5831\u3067\u3059\u3002\u3053\u308c\u3089\u306f\u4eca\u56de\u306e\u5206\u6790\u3067\u306f\u4e0d\u8981\u3067\u3042\u308b\u305f\u3081\u3001\u9664\u53bb\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u3087\u3046\u3002\n\u307e\u305a\u306fJupyter\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089 Insert - Insert Cell Below\u3092\u9078\u3073\u3001\u30b3\u30fc\u30c9\u5165\u529b\u7528\u306e\u30bb\u30eb\u30921\u3064\u8ffd\u52a0\u3057\u307e\u3059\u3002\u8ffd\u52a0\u3055\u308c\u305f\u30bb\u30eb\u306b\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u5165\u529b\u3057\u3001\u5b9f\u884c\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n```py3\n# AI\u306e\u30c7\u30fc\u30bf\u306f\u90aa\u9b54\u306a\u306e\u3067\u9664\u5916\ndata2 = data.query(\"\u6307\u5c0e\u8005 == 'kojim'\")\ndata2\n```\n\n<div>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\"> <th></th> <th>\u30bf\u30fc\u30f3\u6570</th> <th>\u6307\u5c0e\u8005</th> <th>\u90fd\u5e02\u540d</th> <th>\u91d1\u92ad</th> <th>\u7814\u7a76</th> <th>\u6587\u5316</th> <th>\u30b9\u30d1\u30a4</th> <th>\u751f\u7523</th> <th>\u7dad\u6301\u8cbb</th> </tr>\n  </thead>\n  <tbody>\n    <tr> <th>0</th> <td>0</td> <td>kojim</td> <td>TXT_KEY_CITY_NAME_ATHENS</td> <td>0.0</td> <td>10.0</td> <td>4.0</td> <td>4.0</td> <td>1.0</td> <td>0.0</td> </tr>\n    <tr> <th>7</th> <td>1</td> <td>kojim</td> <td>TXT_KEY_CITY_NAME_ATHENS</td> <td>0.0</td> <td>10.0</td> <td>4.0</td> <td>4.0</td> <td>1.0</td> <td>0.0</td> </tr>\n    <tr> <th>14</th> <td>2</td> <td>kojim</td> <td>TXT_KEY_CITY_NAME_ATHENS</td> <td>0.0</td> <td>10.0</td> <td>4.0</td> <td>4.0</td> <td>1.0</td> <td>0.0</td> </tr>\n    <tr> <th>21</th> <td>3</td> <td>kojim</td> <td>TXT_KEY_CITY_NAME_ATHENS</td> <td>0.0</td> <td>11.0</td> <td>4.0</td> <td>4.0</td> <td>1.0</td> <td>0.0</td> </tr>\n    <tr> <th>28</th> <td>4</td> <td>kojim</td> <td>TXT_KEY_CITY_NAME_ATHENS</td> <td>0.0</td> <td>11.0</td> <td>4.0</td> <td>4.0</td> <td>1.0</td> <td>0.0</td> </tr>\n    <tr> <th>35</th> <td>5</td> <td>kojim</td> <td>TXT_KEY_CITY_NAME_ATHENS</td> <td>0.0</td> <td>11.0</td> <td>4.0</td> <td>4.0</td> <td>1.0</td> <td>0.0</td> </tr>\n  </tbody>\n</table>\n</div>\n\n\u898b\u4e8b\u81ea\u90fd\u5e02\u306e\u30c7\u30fc\u30bf\u3060\u3051\u306b\u7d5e\u308a\u8fbc\u307e\u308c\u307e\u3057\u305f\u3002\n\u7d9a\u3044\u3066\u3001\u90fd\u5e02\u306e\u51fa\u529b\u60c5\u5831\u3092\u5927\u307e\u304b\u306b\u8868\u3059\u5217\u3092\u8ffd\u52a0\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u3053\u306e\u30b2\u30fc\u30e0\u306b\u304a\u3044\u3066\u90fd\u5e02\u306e\u51fa\u529b\u306f\u3001\u91d1\u92ad\u51fa\u529b, \u7814\u7a76\u51fa\u529b, \u30b9\u30d1\u30a4\u30dd\u30a4\u30f3\u30c8\u51fa\u529b, \u751f\u7523\u529b\u3092\u8db3\u3057\u3001\u305d\u3053\u304b\u3089\u7dad\u6301\u8cbb\u3092\u5f15\u304f\u3053\u3068\u3067\u3056\u3063\u304f\u308a\u3068\u8868\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u6587\u5316\u529b\u3082\u8db3\u3057\u305f\u307b\u3046\u304c\u826f\u3044\u3001\u30b9\u30d1\u30a4\u30dd\u30a4\u30f3\u30c8\u306f\u4e0d\u8981\u3067\u306f\u306a\u3044\u304b\u3001\u3068\u601d\u3046\u65b9\u306f\u5404\u81ea\u30a2\u30ec\u30f3\u30b8\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\u5049\u4eba\u30dd\u30a4\u30f3\u30c8\uff1f\u5fd8\u308c\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u305d\u308c\u3067\u306f\u30bb\u30eb\u3092\u3082\u30461\u3064\u8ffd\u52a0\u3057\u305f\u4e0a\u3067\u3001\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u5165\u529b&\u5b9f\u884c\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n```py3\ndata2['\u51fa\u529b'] = data2['\u91d1\u92ad'] + data2['\u7814\u7a76'] + data2['\u30b9\u30d1\u30a4'] + data2['\u751f\u7523'] - data2['\u7dad\u6301\u8cbb']\ndata2\n```\n\n<div>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\"> <th></th> <th>\u30bf\u30fc\u30f3\u6570</th> <th>\u6307\u5c0e\u8005</th> <th>\u90fd\u5e02\u540d</th> <th>\u91d1\u92ad</th> <th>\u7814\u7a76</th> <th>\u6587\u5316</th> <th>\u30b9\u30d1\u30a4</th> <th>\u751f\u7523</th> <th>\u7dad\u6301\u8cbb</th> <th>\u51fa\u529b</th> </tr>\n  </thead>\n  <tbody>\n    <tr> <th>0</th> <td>0</td> <td>kojim</td> <td>TXT_KEY_CITY_NAME_ATHENS</td> <td>0.0</td> <td>10.0</td> <td>4.0</td> <td>4.0</td> <td>1.0</td> <td>0.0</td> <td>15.0</td> </tr>\n    <tr> <th>7</th> <td>1</td> <td>kojim</td> <td>TXT_KEY_CITY_NAME_ATHENS</td> <td>0.0</td> <td>10.0</td> <td>4.0</td> <td>4.0</td> <td>1.0</td> <td>0.0</td> <td>15.0</td> </tr>\n    <tr> <th>14</th> <td>2</td> <td>kojim</td> <td>TXT_KEY_CITY_NAME_ATHENS</td> <td>0.0</td> <td>10.0</td> <td>4.0</td> <td>4.0</td> <td>1.0</td> <td>0.0</td> <td>15.0</td> </tr>\n    <tr> <th>21</th> <td>3</td> <td>kojim</td> <td>TXT_KEY_CITY_NAME_ATHENS</td> <td>0.0</td> <td>11.0</td> <td>4.0</td> <td>4.0</td> <td>1.0</td> <td>0.0</td> <td>16.0</td> </tr>\n    <tr> <th>28</th> <td>4</td> <td>kojim</td> <td>TXT_KEY_CITY_NAME_ATHENS</td> <td>0.0</td> <td>11.0</td> <td>4.0</td> <td>4.0</td> <td>1.0</td> <td>0.0</td> <td>16.0</td> </tr>\n    <tr> <th>35</th> <td>5</td> <td>kojim</td> <td>TXT_KEY_CITY_NAME_ATHENS</td> <td>0.0</td> <td>11.0</td> <td>4.0</td> <td>4.0</td> <td>1.0</td> <td>0.0</td> <td>16.0</td> </tr>\n  </tbody>\n</table>\n</div>\n\n\u65b0\u3057\u3044\u5217\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u306d\u3002\n\n## \u90fd\u5e02\u6bce\u306e\u96c6\u7d04\n\u6b21\u306f\u90fd\u5e02\u6bce\u306e\u30c7\u30fc\u30bf\u306e\u96c6\u7d04\u3067\u3059\u3002\n\u30c7\u30fc\u30bf\u3092\u96c6\u7d04\u3059\u308b\u306b\u306fgroupby\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002groupby\u3067\u306f\u96c6\u7d04\u306e\u30ad\u30fc\u306b\u3057\u305f\u3044\u9805\u76ee\u540d\u3092\u30d1\u30e9\u30e1\u30bf\u306b\u6e21\u3057\u3066\u3084\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4eca\u56de\u306f\u90fd\u5e02\u3054\u3068\u306e\u96c6\u8a08\u5024\u3092\u7b97\u51fa\u3057\u305f\u3044\u306e\u3067\u90fd\u5e02\u540d\u3092\u30d1\u30e9\u30e1\u30bf\u306b\u6e21\u3057\u3066\u3084\u308a\u307e\u3057\u3087\u3046\u3002\n\n```python\ngdata = data2.groupby('\u90fd\u5e02\u540d').sum()\ngdata\n```\n\n<div>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\"> <th></th> <th>\u30bf\u30fc\u30f3\u6570</th> <th>\u91d1\u92ad</th> <th>\u7814\u7a76</th> <th>\u6587\u5316</th> <th>\u30b9\u30d1\u30a4</th> <th>\u751f\u7523</th> <th>\u7dad\u6301\u8cbb</th> <th>\u51fa\u529b</th> </tr>\n    <tr> <th>\u90fd\u5e02\u540d</th> <th></th> <th></th> <th></th> <th></th> <th></th> <th></th> <th></th> <th></th> </tr>\n  </thead>\n  <tbody>\n    <tr> <th>TXT_KEY_CITY_NAME_ARGOS</th> <td>57498</td> <td>2514.0</td> <td>20014.0</td> <td>5771.0</td> <td>3105.0</td> <td>6294.0</td> <td>1577.0</td> <td>30350.0</td> </tr>\n    <tr> <th>TXT_KEY_CITY_NAME_ATHENS</th> <td>61776</td> <td>3323.0</td> <td>98223.0</td> <td>15597.0</td> <td>4112.0</td> <td>20076.0</td> <td>1473.0</td> <td>124261.0</td> </tr>\n    <tr> <th>TXT_KEY_CITY_NAME_CORINTH</th> <td>60398</td> <td>893.0</td> <td>19968.0</td> <td>24386.0</td> <td>4604.0</td> <td>10552.0</td> <td>1815.0</td> <td>34202.0</td> </tr>\n    <tr> <th>TXT_KEY_CITY_NAME_KNOSSOS</th> <td>57120</td> <td>1117.0</td> <td>20258.0</td> <td>6893.0</td> <td>5789.0</td> <td>9265.0</td> <td>1282.0</td> <td>35147.0</td> </tr>\n    <tr> <th>TXT_KEY_CITY_NAME_MYCENAE</th> <td>56316</td> <td>731.0</td> <td>18085.0</td> <td>7778.0</td> <td>4036.0</td> <td>8277.0</td> <td>1358.0</td> <td>29771.0</td> </tr>\n    <tr> <th>TXT_KEY_CITY_NAME_PHARSALOS</th> <td>56105</td> <td>167.0</td> <td>4570.0</td> <td>10231.0</td> <td>2729.0</td> <td>22216.0</td> <td>1747.0</td> <td>27935.0</td> </tr>\n    <tr> <th>TXT_KEY_CITY_NAME_SPARTA</th> <td>60741</td> <td>3521.0</td> <td>12459.0</td> <td>15164.0</td> <td>4042.0</td> <td>8050.0</td> <td>2113.0</td> <td>25959.0</td> </tr>\n    <tr> <th>TXT_KEY_CITY_NAME_THEBES</th> <td>59885</td> <td>20647.0</td> <td>29434.0</td> <td>8364.0</td> <td>3550.0</td> <td>10785.0</td> <td>2144.0</td> <td>62272.0</td> </tr>\n  </tbody>\n</table>\n</div>\n\n\u96c6\u8a08\u65b9\u6cd5\u306bsum\u3001\u3064\u307e\u308a\u5408\u8a08\u5024\u3092\u6307\u5b9a\u3057\u305f\u306e\u3067\u5404\u5217\u306f\u90fd\u5e02\u6bce\u306e\u5408\u8a08\u5024\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3055\u3066\u3053\u306e\u30c7\u30fc\u30bf\u3092\u773a\u3081\u3066\u3044\u3066\u6c17\u304c\u3064\u304f\u3053\u3068\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n- \u7814\u7a76\u529b\u3068\u751f\u7523\u304c\u305a\u3070\u629c\u3051\u3066\u9ad8\u3044\u306e\u306f\u9996\u90fd\u3067\u3042\u308bATHENS\n- \u751f\u7523\u90fd\u5e02\u3067\u3042\u308bPHARSALOS\u306e\u751f\u7523\u529b\u306f\u9996\u90fd\u306e\u305d\u308c\u3092\u4e0a\u56de\u308b\n- \u6587\u5316\u529b\u30c8\u30c3\u30d7\u306f\u56fd\u5883\u6700\u524d\u7dda\u3067\u738b\u6a29\u306e\u9996\u90fd\u306e\u6587\u5316\u529b\u3068\u62bc\u3057\u5408\u3063\u3066\u3044\u305fCORINTH\n- \u5c0f\u5c4b\u3092\u5f35\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u5049\u4eba\u90fd\u5e02\u306eSPARTA\u306e\u7814\u7a76\u529b\u306f\u304a\u5bdf\u3057\n- \u4f01\u696d\u672c\u793e\u306e\u3042\u3063\u305fTHEBES\u306f\u91d1\u92ad\u53ce\u5165\u304c1\u6841\u9055\u3046\n\n# \u7d9a\u304d\u306e\u8a18\u4e8b\n\u3044\u307e\u304b\u3044\u3066\u307e\u3059\n", "tags": ["pandas", "civ4"]}