{"context": " More than 1 year has passed since last update.\"Redmine\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30ed\u30fc\u30c9\u306e\u9806\u756a\u3092\u5236\u5fa1\u3067\u304d\u306a\u3044\" \u304b\u3089\u5f15\u304d\u7d9a\u304d\u3002\nhttp://qiita.com/ayweak/items/5390fb2dc3155a16320a\nhttps://github.com/rails/rails/blob/v3.2.20/railties/lib/rails/plugin.rb \u8fba\u308a\u3092\u771f\u4f3c\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\nhttps://gist.github.com/ayweak/f08a162866100bd09f86#file-30-redmine-rb-diff\n\nconfig/initializers/30-redmine.rb.diff\n--- a/redmine-2.6.0/config/initializers/30-redmine.rb   2014-10-22 04:13:09.000000000 +0900\n+++ b/redmine-2.6.0/config/initializers/30-redmine.rb   2014-11-13 16:11:10.000000000 +0900\n@@ -16,7 +16,7 @@\n       openid_authentication_store : :memory\n end\n\n-Redmine::Plugin.load\n+Redmine::Plugin.load(Redmine::Configuration['plugins'] || ['all'])\n unless Redmine::Configuration['mirror_plugins_assets_on_startup'] == false\n   Redmine::Plugin.mirror_assets\n end\n\n\nhttps://gist.github.com/ayweak/f08a162866100bd09f86#file-plugin-rb-diff\n\nlib/redmine/plugin.rb.diff\n--- a/redmine-2.6.0/lib/redmine/plugin.rb       2014-10-22 04:13:10.000000000 +0900\n+++ b/redmine-2.6.0/lib/redmine/plugin.rb       2014-11-13 16:11:10.000000000 +0900\n@@ -137,8 +137,20 @@\n       registered_plugins[id.to_sym].present?\n     end\n\n-    def self.load\n-      Dir.glob(File.join(self.directory, '*')).sort.each do |directory|\n+    def self.load(list)\n+      paths = Dir.glob(File.join(self.directory, '*'))\n+\n+      if !list.include?('all') then\n+        paths.delete_if do |p|\n+          !list.include?(File.basename(p))\n+        end\n+      end\n+\n+      paths.sort_by! do |p|\n+        [list.index(File.basename(p)) || list.index('all'), p]\n+      end\n+\n+      paths.each do |directory|\n         if File.directory?(directory)\n           lib = File.join(directory, \"lib\")\n           if File.directory?(lib)\n\n\n\u3042\u3068\u306f config/configuration.yml \u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304f\u3068\u671f\u5f85\u3059\u308b\u52d5\u304d\u3092\u3057\u3066\u304f\u308c\u308b\u3063\u307d\u3044\u3067\u3059\u3002\n\nconfig/configuration.yml\nproduction:\n  plugins:\n    - plugin_x\n    - plugin_p\n    - all\n\n\nRedmine \u3084 Rails \u306e\u8a73\u3057\u3044\u3053\u3068\u306f\u5206\u304b\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u4f55\u304b\u554f\u984c\u304c\u3042\u308a\u305d\u3046\u306a\u6c17\u304c\u3057\u307e\u3059\u3002\n\"Redmine\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30ed\u30fc\u30c9\u306e\u9806\u756a\u3092\u5236\u5fa1\u3067\u304d\u306a\u3044\" \u304b\u3089\u5f15\u304d\u7d9a\u304d\u3002\nhttp://qiita.com/ayweak/items/5390fb2dc3155a16320a\n\nhttps://github.com/rails/rails/blob/v3.2.20/railties/lib/rails/plugin.rb \u8fba\u308a\u3092\u771f\u4f3c\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\nhttps://gist.github.com/ayweak/f08a162866100bd09f86#file-30-redmine-rb-diff\n\n```diff:config/initializers/30-redmine.rb.diff\n--- a/redmine-2.6.0/config/initializers/30-redmine.rb   2014-10-22 04:13:09.000000000 +0900\n+++ b/redmine-2.6.0/config/initializers/30-redmine.rb   2014-11-13 16:11:10.000000000 +0900\n@@ -16,7 +16,7 @@\n       openid_authentication_store : :memory\n end\n\n-Redmine::Plugin.load\n+Redmine::Plugin.load(Redmine::Configuration['plugins'] || ['all'])\n unless Redmine::Configuration['mirror_plugins_assets_on_startup'] == false\n   Redmine::Plugin.mirror_assets\n end\n```\n\nhttps://gist.github.com/ayweak/f08a162866100bd09f86#file-plugin-rb-diff\n\n```diff:lib/redmine/plugin.rb.diff\n--- a/redmine-2.6.0/lib/redmine/plugin.rb       2014-10-22 04:13:10.000000000 +0900\n+++ b/redmine-2.6.0/lib/redmine/plugin.rb       2014-11-13 16:11:10.000000000 +0900\n@@ -137,8 +137,20 @@\n       registered_plugins[id.to_sym].present?\n     end\n\n-    def self.load\n-      Dir.glob(File.join(self.directory, '*')).sort.each do |directory|\n+    def self.load(list)\n+      paths = Dir.glob(File.join(self.directory, '*'))\n+\n+      if !list.include?('all') then\n+        paths.delete_if do |p|\n+          !list.include?(File.basename(p))\n+        end\n+      end\n+\n+      paths.sort_by! do |p|\n+        [list.index(File.basename(p)) || list.index('all'), p]\n+      end\n+\n+      paths.each do |directory|\n         if File.directory?(directory)\n           lib = File.join(directory, \"lib\")\n           if File.directory?(lib)\n```\n\n\u3042\u3068\u306f config/configuration.yml \u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304f\u3068\u671f\u5f85\u3059\u308b\u52d5\u304d\u3092\u3057\u3066\u304f\u308c\u308b\u3063\u307d\u3044\u3067\u3059\u3002\n\n```yaml:config/configuration.yml\nproduction:\n  plugins:\n    - plugin_x\n    - plugin_p\n    - all\n```\n\nRedmine \u3084 Rails \u306e\u8a73\u3057\u3044\u3053\u3068\u306f\u5206\u304b\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u4f55\u304b\u554f\u984c\u304c\u3042\u308a\u305d\u3046\u306a\u6c17\u304c\u3057\u307e\u3059\u3002\n", "tags": ["Redmine2.6.0"]}