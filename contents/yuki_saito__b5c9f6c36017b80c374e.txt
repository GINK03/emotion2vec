{"context": "\n\n1.\u4e8b\u306e\u767a\u7aef\nTomcat\u4e0a\u3067\u52d5\u3044\u3066\u3044\u308bjava\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3001CPU\u304c\u305a\u3063\u306880%\u3068\u304b\u306b\u304f\u3063\u3064\u3044\u3066\u3044\u308b\u73fe\u8c61\u304c\u767a\u751f\u3002\n\u300c\u3046\u3047\u30fc\u307e\u3058\u304b\u300d\u3068\u306a\u3063\u305f\u3002\n\u3068\u3082\u3042\u308c\u8abf\u67fb\u305b\u306d\u3070\u3002\u3068\u306a\u3063\u305f\u6642\u306b\u3084\u3063\u305f\u3053\u3068\u3002\n\n2.\u624b\u9806\n\n2.1 top\u30b3\u30de\u30f3\u30c9\u3067\u72b6\u6cc1\u78ba\u8a8d\uff08\u5f53\u6642\u306e\u3082\u306e\u3068\u306f\u9055\u3063\u3066\u3044\u307e\u3059\uff09\n\n\u30b3\u30de\u30f3\u30c9\n$ top\ntop - 18:27:24 up 285 days,  3:05,  3 users,  load average: 5.33, 5.36, 4.93\nTasks:  70 total,   1 running,  69 sleeping,   0 stopped,   0 zombie        \nCpu(s): 10.1%us,  0.9%sy,  0.0%ni,  0.0%id,  0.0%wa,  0.0%hi,  0.0%si, 89.0%st\nMem:    617044k total,   522324k used,    94720k free,     4812k buffers\nSwap:        0k total,        0k used,        0k free,    79684k cached \n\n  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND    \n 1722 root      20   0 1422m 394m 6004 S 96.5 65.5  53:50.89 jsvc       \n    6 root      20   0     0    0    0 S  3.4  0.0  11:35.37 events/0   \n 1929 hoge      20   0  2592 1000  784 R  0.3  0.2   0:24.33 top        \n    1 root      20   0  2892  868  664 S  0.0  0.1   0:01.76 init       \n    2 root      20   0     0    0    0 S  0.0  0.0   0:00.00 kthreadd   \n--- (\u4ee5\u4e0b\u7565) ---\n\n\n\n2.2 \u30d7\u30ed\u30bb\u30b9\u3067\u30e4\u30d0\u305d\u3046\u306a\u5974\u3092\u898b\u3064\u3051\u308b\n$ ps -L aux\n\u305d\u3046\u3059\u308b\u3068\u3001tomcat\u4e0a\u3067\u52d5\u304f\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u3046\u3061\u3044\u304f\u3064\u304b\u306b\u304a\u3051\u308b\uff08TIME\uff09\u304c\u6c38\u9060\u3068\u5897\u3048\u7d9a\u3051\u3066\u3044\u308b\u3053\u3068\u306b\u6c17\u4ed8\u304f\u3002\n\n\u30b3\u30de\u30f3\u30c9\n     USER       PID   LWP %CPU NLWP %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n    tomcat    3487  1111  25.1   39 14.1 10233084 2222644 ?    Sl   09:03   25:10 jsvc.exec -user tomcat -home /usr/lib/jvm/java \n\n\n\u3053\u3093\u306a\u611f\u3058\uff08\u30a4\u30e1\u30fc\u30b8\u3067\u3059\uff09\u3002\nPID\u3068LWP\u3092\u63a7\u3048\u308b\u3002\n\n2.3\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u3092\u53d6\u5f97\nroot\u30e6\u30fc\u30b6\u3067\nsu - tomcat -s /bin/bash\njstack PID\uff08\u5148\u307b\u3069\u63a7\u3048\u305f\u5974\uff09\n\u305d\u3046\u3059\u308b\u3068\u4ee5\u4e0b\u307f\u305f\u3044\u306a\u60c5\u5831\u304c\u51fa\u3066\u304f\u308b\u306e\u3067\u3001\u63a7\u3048\u308b\u306a\u308a\u3001\u76ee\u3092\u80cc\u3051\u308b\u306a\u308a\u3059\u308b\n\n\u30b9\u30bf\u30c3\u30af\u30c8\u30ec\u30fc\u30b9(\u4f8b)\n\"RMI TCP Accept-0\" #10 daemon prio=5 os_prio=0 tid=0x0000000000c29800 nid=xxxx runnable [0x00007f2f36728000]\n   java.lang.Thread.State: RUNNABLE\n        at java.net.PlainSocketImpl.socketAccept(Native Method)\n--- (\u4ee5\u4e0b\u7565) ---\n\n\n16\u9032\u6570\u306b\u3057\u305fLWP\u306eID\u304c\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u5185\u306e\"nid=xxxxx\" \u3068\u5bfe\u5fdc\u3059\u308b\n\u306a\u306e\u3067\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u305d\u306eID\u3067\u691c\u7d22\u3057\u3066\u3084\u308c\u3070\u3001\u5bfe\u8c61\u306e\u30b9\u30bf\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u304c\u898b\u3064\u304b\u308b\n\nLWP: Linux\u4e0a\u306e\u30d7\u30ed\u30bb\u30b9\u3088\u308a\u3082\u5c0f\u3055\u3044\u5b9f\u884c\u5358\u4f4d\u3001\u30b9\u30ec\u30c3\u30c9\u306e\u3088\u3046\u306a\u3082\u306e\n\n\n2.4 \u7d42\u308f\u3063\u3066\u307f\u3066\n\u8abf\u67fb\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u3001\u518d\u5e30\u51e6\u7406\u3067\u6b7b\u4ea1\u3057\u3066\u3044\u305f\u3053\u3068\u304c\u5224\u660e\u3002\u4fee\u6b63\u3057\u4e00\u6bb5\u843d\n#1.\u4e8b\u306e\u767a\u7aef\nTomcat\u4e0a\u3067\u52d5\u3044\u3066\u3044\u308bjava\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3001CPU\u304c\u305a\u3063\u306880%\u3068\u304b\u306b\u304f\u3063\u3064\u3044\u3066\u3044\u308b\u73fe\u8c61\u304c\u767a\u751f\u3002\n\u300c\u3046\u3047\u30fc\u307e\u3058\u304b\u300d\u3068\u306a\u3063\u305f\u3002\n\u3068\u3082\u3042\u308c\u8abf\u67fb\u305b\u306d\u3070\u3002\u3068\u306a\u3063\u305f\u6642\u306b\u3084\u3063\u305f\u3053\u3068\u3002\n\n#2.\u624b\u9806\n\n#2.1 top\u30b3\u30de\u30f3\u30c9\u3067\u72b6\u6cc1\u78ba\u8a8d\uff08\u5f53\u6642\u306e\u3082\u306e\u3068\u306f\u9055\u3063\u3066\u3044\u307e\u3059\uff09\n\n```shell:\u30b3\u30de\u30f3\u30c9\n$ top\ntop - 18:27:24 up 285 days,  3:05,  3 users,  load average: 5.33, 5.36, 4.93\nTasks:  70 total,   1 running,  69 sleeping,   0 stopped,   0 zombie        \nCpu(s): 10.1%us,  0.9%sy,  0.0%ni,  0.0%id,  0.0%wa,  0.0%hi,  0.0%si, 89.0%st\nMem:    617044k total,   522324k used,    94720k free,     4812k buffers\nSwap:        0k total,        0k used,        0k free,    79684k cached \n                                                                                                                                    \n  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND    \n 1722 root      20   0 1422m 394m 6004 S 96.5 65.5  53:50.89 jsvc       \n    6 root      20   0     0    0    0 S  3.4  0.0  11:35.37 events/0   \n 1929 hoge      20   0  2592 1000  784 R  0.3  0.2   0:24.33 top        \n    1 root      20   0  2892  868  664 S  0.0  0.1   0:01.76 init       \n    2 root      20   0     0    0    0 S  0.0  0.0   0:00.00 kthreadd   \n--- (\u4ee5\u4e0b\u7565) ---\n```\n\n#2.2 \u30d7\u30ed\u30bb\u30b9\u3067\u30e4\u30d0\u305d\u3046\u306a\u5974\u3092\u898b\u3064\u3051\u308b\n$ ps -L aux\n\u305d\u3046\u3059\u308b\u3068\u3001tomcat\u4e0a\u3067\u52d5\u304f\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u3046\u3061\u3044\u304f\u3064\u304b\u306b\u304a\u3051\u308b\uff08TIME\uff09\u304c\u6c38\u9060\u3068\u5897\u3048\u7d9a\u3051\u3066\u3044\u308b\u3053\u3068\u306b\u6c17\u4ed8\u304f\u3002\n\n```shell:\u30b3\u30de\u30f3\u30c9\n     USER       PID   LWP %CPU NLWP %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n    tomcat    3487  1111  25.1   39 14.1 10233084 2222644 ?    Sl   09:03   25:10 jsvc.exec -user tomcat -home /usr/lib/jvm/java \n```\n\u3053\u3093\u306a\u611f\u3058\uff08\u30a4\u30e1\u30fc\u30b8\u3067\u3059\uff09\u3002\n\nPID\u3068LWP\u3092\u63a7\u3048\u308b\u3002\n\n#2.3\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u3092\u53d6\u5f97\nroot\u30e6\u30fc\u30b6\u3067\nsu - tomcat -s /bin/bash\njstack PID\uff08\u5148\u307b\u3069\u63a7\u3048\u305f\u5974\uff09\n\n\u305d\u3046\u3059\u308b\u3068\u4ee5\u4e0b\u307f\u305f\u3044\u306a\u60c5\u5831\u304c\u51fa\u3066\u304f\u308b\u306e\u3067\u3001\u63a7\u3048\u308b\u306a\u308a\u3001\u76ee\u3092\u80cc\u3051\u308b\u306a\u308a\u3059\u308b\n\n```shell:\u30b9\u30bf\u30c3\u30af\u30c8\u30ec\u30fc\u30b9(\u4f8b)\n\"RMI TCP Accept-0\" #10 daemon prio=5 os_prio=0 tid=0x0000000000c29800 nid=xxxx runnable [0x00007f2f36728000]\n   java.lang.Thread.State: RUNNABLE\n        at java.net.PlainSocketImpl.socketAccept(Native Method)\n--- (\u4ee5\u4e0b\u7565) ---\n```\n\n16\u9032\u6570\u306b\u3057\u305fLWP\u306eID\u304c\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u5185\u306e\"nid=xxxxx\" \u3068\u5bfe\u5fdc\u3059\u308b\n\u306a\u306e\u3067\u30b9\u30ec\u30c3\u30c9\u30c0\u30f3\u30d7\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u305d\u306eID\u3067\u691c\u7d22\u3057\u3066\u3084\u308c\u3070\u3001\u5bfe\u8c61\u306e\u30b9\u30bf\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u304c\u898b\u3064\u304b\u308b\n\n* LWP: Linux\u4e0a\u306e\u30d7\u30ed\u30bb\u30b9\u3088\u308a\u3082\u5c0f\u3055\u3044\u5b9f\u884c\u5358\u4f4d\u3001\u30b9\u30ec\u30c3\u30c9\u306e\u3088\u3046\u306a\u3082\u306e\n\n#2.4 \u7d42\u308f\u3063\u3066\u307f\u3066\n\u8abf\u67fb\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u3001\u518d\u5e30\u51e6\u7406\u3067\u6b7b\u4ea1\u3057\u3066\u3044\u305f\u3053\u3068\u304c\u5224\u660e\u3002\u4fee\u6b63\u3057\u4e00\u6bb5\u843d\n", "tags": ["Java", "Tomcat"]}