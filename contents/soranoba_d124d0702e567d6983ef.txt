{"context": " More than 1 year has passed since last update.\n\nrebar\u306edeps\u3092\u66f4\u65b0\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\n\u5358\u7d14\u306a\u5834\u5408\u306frebar update-deps\u3068\u304b\u3067\u66f4\u65b0\u3067\u304d\u308b. \u3060\u304c, rebar\u306f\u305d\u3053\u307e\u3067\u8ce2\u304f\u306a\u3044\u306e\u3067\u4e0a\u624b\u304f\u3044\u304b\u306a\u3044\u5834\u5408\u3082\u3042\u308b.\n\nupdate-deps\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u5834\u5408\n- App A\n   - App B\n      - App C (version 2)\n   - App C (version 1)\n\n\u3068\u3044\u3063\u305f, \u89aa\u3068\u5b50\u3067\u540c\u3058\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306b\u4e0a\u624b\u304f\u3044\u304b\u306a\u3044.\n\u306a\u306e\u3067, git\u9650\u5b9a\u3067\u6700\u65b0\u306e\u3082\u306e\u3092\u53c2\u7167\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u305f\n\n\u30b9\u30af\u30ea\u30d7\u30c8\n\nupdate-deps\n# !/bin/bash\n\n# rebar\u306e\u30d1\u30b9\u3092\u8a2d\u5b9a\nREBAR=./rebar\n\n# for in\u3067\u6539\u884c\u5358\u4f4d\u3067\u30eb\u30fc\u30d7\u3092\u56de\u3059\nIFS=$'\\n'\nAPP=\"\"\nCOMMIT=\"\"\n\ngit_check() {\n    cd deps/$1\n    # commit\u6642\u523b\u3092\u6bd4\u8f03\u3057\u3066\u65b0\u3057\u3044\u65b9\u3092\u53d6\u308b\n    if [ `git show $2 --quiet --pretty=format:%at | tail -n 1` -ge `git show $3 --quiet --pretty=format:%at | tail -n 1` ]; then\n        COMMIT=$2\n    else\n        COMMIT=$3\n    fi\n    cd ../../\n}\n\n# \u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4e00\u89a7\u3092\u30bd\u30fc\u30c8\u3057\u3066\u540c\u3058\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u53c2\u7167\u304c\u9023\u7d9a\u3059\u308b\u3088\u3046\u306b\u3059\u308b. \n# \u6700\u5f8c\u306b\u4f59\u5206\u306b1\u56de\u30eb\u30fc\u30d7\u3092\u56de\u3059\u70ba\u306b\" \"\u3092\u3064\u3051\u3066\u3044\u308b.\nfor l in `$REBAR list-deps | grep -v \"==>\" | sort` \" \"\ndo\n    # Application\u540d TAG \u30d0\u30fc\u30b8\u30e7\u30f3\u30bf\u30b0 git://.... \u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067, \u305d\u306e1\u756a\u76ee\u30683\u756a\u76ee\u3092\u53d6\u5f97\n    APP2=`echo $l | cut -d \" \" -f 1`\n    COMMIT2=`echo $l | cut -d \" \" -f 3`\n\n    # \u524d\u56de\u3068\u540c\u3058\u3067\u3042\u308c\u3070\u3069\u3061\u3089\u304c\u65b0\u3057\u3044\u304b\u3092\u6bd4\u8f03\n    if [ \"$APP\" == \"$APP2\" ]; then\n        git_check $APP $COMMIT $COMMIT2\n    else\n        # \u524d\u56de\u3068\u9055\u3046\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u306a\u3063\u305f\u3089, \u305d\u306e\u524d\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u78ba\u5b9a\u3059\u308b\u306e\u3067, checkout\n        if [ \"$COMMIT\" != \"\" ]; then\n            cd deps/$APP\n            git checkout $COMMIT\n            cd ../../\n        fi\n        cd deps/$APP2\n        git fetch\n        cd ../../\n\n        APP=$APP2\n        COMMIT=$COMMIT2\n    fi\ndone\n\n\n\u307e\u3041, \u5927\u5206\u6c5a\u3044\u3067\u3059\u304c\u52d8\u5f01\u3057\u3066\u304f\u3060\u3055\u3044\uff3e\uff3e\uff1b\n\n\u4f7f\u7528\u3057\u3066\u3044\u308b\u30b3\u30de\u30f3\u30c9\n\nrebar.config\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u305d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b.\n\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3082\u53d6\u5f97\u3067\u304d\u307e\u3059.\n\u4f46\u3057, \u4e0d\u8981\u306a\u60c5\u5831\u3082\u5b58\u5728\u3059\u308b\u70ba, \u4e0a\u8a18\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306fgrep\u3067\u305d\u308c\u3092\u53d6\u308a\u9664\u3044\u3066\u3044\u307e\u3059.\n$ rebar list-deps\n\n\ngit\u306e\u6307\u5b9a\u3057\u305f\u30b3\u30df\u30c3\u30c8\u306e\u30b3\u30df\u30c3\u30c8\u6642\u9593\u3092\u53d6\u5f97\u3059\u308b\nsignature\u304c\u5165\u3063\u3066\u3044\u308bcommit\u3084tag\u306b\u95a2\u3057\u3066\u306f\u4ed6\u306e\u60c5\u5831\u3082\u51fa\u529b\u3055\u308c\u308b\u70ba, \u6700\u5f8c\u306e1\u884c\u3060\u3051\u3092\u53d6\u3063\u3066\u3044\u307e\u3059\n(\u3088\u3044\u3084\u308a\u65b9\u304c\u3042\u308c\u3070...)\n$ git show $2 --quiet --pretty=format:%at | tail -n 1\n\n\n\u6ce8\u610f\u70b9\n\ncommit\u306e\u65b0\u3057\u3055\u306fcommit\u6642\u523b\u3092\u53c2\u7167\u3059\u308b\u306e\u3067, \u5fc5\u305a\u3057\u3082\u6b63\u3057\u304f\u306a\u3089\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\ndeps\u4ee5\u4e0b\u306b\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u914d\u7f6e\u3057\u3066\u3044\u308b\u524d\u63d0\u3067\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3059. \u72b6\u6cc1\u306b\u5fdc\u3058\u3066\u597d\u304d\u306b\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\n\n\nrebar\u304c\u3082\u3046\u5c11\u3057\u8ce2\u3051\u308c\u3070\u306a\u3041...\n# rebar\u306edeps\u3092\u66f4\u65b0\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\n\u5358\u7d14\u306a\u5834\u5408\u306f`rebar update-deps`\u3068\u304b\u3067\u66f4\u65b0\u3067\u304d\u308b. \u3060\u304c, rebar\u306f\u305d\u3053\u307e\u3067\u8ce2\u304f\u306a\u3044\u306e\u3067\u4e0a\u624b\u304f\u3044\u304b\u306a\u3044\u5834\u5408\u3082\u3042\u308b.\n\n### update-deps\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u5834\u5408\n\n```\n- App A\n   - App B\n      - App C (version 2)\n   - App C (version 1)\n```\n\n\u3068\u3044\u3063\u305f, \u89aa\u3068\u5b50\u3067\u540c\u3058\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306b\u4e0a\u624b\u304f\u3044\u304b\u306a\u3044.\n\u306a\u306e\u3067, git\u9650\u5b9a\u3067\u6700\u65b0\u306e\u3082\u306e\u3092\u53c2\u7167\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u305f\n\n### \u30b9\u30af\u30ea\u30d7\u30c8\n\n```bash:update-deps\n# !/bin/bash\n\n# rebar\u306e\u30d1\u30b9\u3092\u8a2d\u5b9a\nREBAR=./rebar\n\n# for in\u3067\u6539\u884c\u5358\u4f4d\u3067\u30eb\u30fc\u30d7\u3092\u56de\u3059\nIFS=$'\\n'\nAPP=\"\"\nCOMMIT=\"\"\n\ngit_check() {\n    cd deps/$1\n    # commit\u6642\u523b\u3092\u6bd4\u8f03\u3057\u3066\u65b0\u3057\u3044\u65b9\u3092\u53d6\u308b\n    if [ `git show $2 --quiet --pretty=format:%at | tail -n 1` -ge `git show $3 --quiet --pretty=format:%at | tail -n 1` ]; then\n        COMMIT=$2\n    else\n        COMMIT=$3\n    fi\n    cd ../../\n}\n\n# \u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4e00\u89a7\u3092\u30bd\u30fc\u30c8\u3057\u3066\u540c\u3058\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u53c2\u7167\u304c\u9023\u7d9a\u3059\u308b\u3088\u3046\u306b\u3059\u308b. \n# \u6700\u5f8c\u306b\u4f59\u5206\u306b1\u56de\u30eb\u30fc\u30d7\u3092\u56de\u3059\u70ba\u306b\" \"\u3092\u3064\u3051\u3066\u3044\u308b.\nfor l in `$REBAR list-deps | grep -v \"==>\" | sort` \" \"\ndo\n    # Application\u540d TAG \u30d0\u30fc\u30b8\u30e7\u30f3\u30bf\u30b0 git://.... \u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067, \u305d\u306e1\u756a\u76ee\u30683\u756a\u76ee\u3092\u53d6\u5f97\n    APP2=`echo $l | cut -d \" \" -f 1`\n    COMMIT2=`echo $l | cut -d \" \" -f 3`\n\n    # \u524d\u56de\u3068\u540c\u3058\u3067\u3042\u308c\u3070\u3069\u3061\u3089\u304c\u65b0\u3057\u3044\u304b\u3092\u6bd4\u8f03\n    if [ \"$APP\" == \"$APP2\" ]; then\n        git_check $APP $COMMIT $COMMIT2\n    else\n        # \u524d\u56de\u3068\u9055\u3046\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u306a\u3063\u305f\u3089, \u305d\u306e\u524d\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u78ba\u5b9a\u3059\u308b\u306e\u3067, checkout\n        if [ \"$COMMIT\" != \"\" ]; then\n            cd deps/$APP\n            git checkout $COMMIT\n            cd ../../\n        fi\n        cd deps/$APP2\n        git fetch\n        cd ../../\n\n        APP=$APP2\n        COMMIT=$COMMIT2\n    fi\ndone\n```\n\n\u307e\u3041, \u5927\u5206\u6c5a\u3044\u3067\u3059\u304c\u52d8\u5f01\u3057\u3066\u304f\u3060\u3055\u3044\uff3e\uff3e\uff1b\n\n### \u4f7f\u7528\u3057\u3066\u3044\u308b\u30b3\u30de\u30f3\u30c9\n#### rebar.config\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u305d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b.\n\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3082\u53d6\u5f97\u3067\u304d\u307e\u3059.\n\u4f46\u3057, \u4e0d\u8981\u306a\u60c5\u5831\u3082\u5b58\u5728\u3059\u308b\u70ba, \u4e0a\u8a18\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306f`grep`\u3067\u305d\u308c\u3092\u53d6\u308a\u9664\u3044\u3066\u3044\u307e\u3059.\n\n```bash\n$ rebar list-deps\n```\n\n#### git\u306e\u6307\u5b9a\u3057\u305f\u30b3\u30df\u30c3\u30c8\u306e\u30b3\u30df\u30c3\u30c8\u6642\u9593\u3092\u53d6\u5f97\u3059\u308b\nsignature\u304c\u5165\u3063\u3066\u3044\u308bcommit\u3084tag\u306b\u95a2\u3057\u3066\u306f\u4ed6\u306e\u60c5\u5831\u3082\u51fa\u529b\u3055\u308c\u308b\u70ba, \u6700\u5f8c\u306e1\u884c\u3060\u3051\u3092\u53d6\u3063\u3066\u3044\u307e\u3059\n(\u3088\u3044\u3084\u308a\u65b9\u304c\u3042\u308c\u3070...)\n\n```bash\n$ git show $2 --quiet --pretty=format:%at | tail -n 1\n```\n\n\n### \u6ce8\u610f\u70b9\n- commit\u306e\u65b0\u3057\u3055\u306fcommit\u6642\u523b\u3092\u53c2\u7167\u3059\u308b\u306e\u3067, \u5fc5\u305a\u3057\u3082\u6b63\u3057\u304f\u306a\u3089\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\n- deps\u4ee5\u4e0b\u306b\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u914d\u7f6e\u3057\u3066\u3044\u308b\u524d\u63d0\u3067\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3059. \u72b6\u6cc1\u306b\u5fdc\u3058\u3066\u597d\u304d\u306b\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\n\n\n-----\n\nrebar\u304c\u3082\u3046\u5c11\u3057\u8ce2\u3051\u308c\u3070\u306a\u3041...\n", "tags": ["Erlang"]}