{"tags": ["Android", "Facebook"], "context": " More than 1 year has passed since last update.\n\n\u81ea\u5df1\u7d39\u4ecb\n\u3053\u3093\u306b\u3061\u306f @wasabeef_jp \u3067\u3059\u3002\n\u3042\u3001\u305d\u3046\u3044\u3048\u3070\u30012015/4/25(\u571f)\u306bDroidKaigi\u304c\u3042\u308a\u307e\u3059\u306d\u3002\n\u79c1\u3082\u53c2\u52a0\u3059\u308b\u306e\u3067\u3001\u3053\u3046\u3044\u3046\u5834\u3067\u60c5\u5831\u4ea4\u63db\u51fa\u6765\u305f\u3089\u3044\u3044\u3067\u3059\u306d\u3002\n\u4eca\u56de\u306f\u3001\u5148\u65e5Facebook\u304c\u516c\u958b\u3057\u305fStetho\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\nStetho\nStetho\u306f\u3001Android\u7528\u306eDebug Bridge\u3067\u3001\u3053\u308c\u3092\u4f7f\u3046\u3068\nChrome Developer Tools\u306e\u4e00\u90e8\u3092\u5229\u7528\u3057\u3066\u3001Javascript\u3068\u540c\u69d8\u306bNetwork\u72b6\u6cc1\u3092\u78ba\u8a8d\u3067\u304d\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\n\n\nUsage\n\nDownload\n\u307e\u305a\u306f Stetho\u672c\u4f53\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n// Gradle dependency on Stetho\ndependencies {\n  compile 'com.facebook.stetho:stetho:1.0.0'\n}\n\nNetwork inspection\u3092\u6709\u52b9\u306b\u3059\u308b\u305f\u3081\u306b\nOkHttpClient\u307e\u305f\u306fUrlConnection\u7528\u306e\u30d5\u30c3\u30af\u30e9\u30a4\u30d6\u30e9\u30ea\u3082\u6307\u5b9a\u3057\u307e\u3059\u3002\ndependencies {\n  compile 'com.facebook.stetho:stetho-okhttp:1.0.0'\n}\n\nor\ndependencies {\n  compile 'com.facebook.stetho:stetho-urlconnection:1.0.0'\n}\n\n\nSetup\nProguard\u306eShrink\u5bfe\u8c61\u304b\u3089stetho\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5916\u3057\u307e\u3059\u3002\n-keep class com.facebook.stetho.** {*;}\n\nApplication\u30af\u30e9\u30b9\u306a\u3069\u3067\u3001Stetho\u306e\u521d\u671f\u5316\u3092\u884c\u306a\u3044\u307e\u3059\u3002\nDefault\u306eProvider\u3092\u4f7f\u3046\u5834\u5408\u901a\u308a\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3001\npublic class MyApplication extends Application {\n  public void onCreate() {\n    super.onCreate();\n    Stetho.initialize(\n      Stetho.newInitializerBuilder(this)\n        .enableDumpapp(Stetho.defaultDumperPluginsProvider(this))\n        .enableWebKitInspector(Stetho.defaultInspectorModulesProvider(this))\n        .build());\n  }\n}\n\nOkHttpClient\u306enetworkInterceptors\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001Retrofit + Glide or Picasso\u306a\u3069\u8907\u6570\u3067OkHttpClient\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\n\u305d\u308c\u305e\u308c\u306eOkHttpClient\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u6307\u5b9a\u3057\u306a\u3051\u308c\u3070\u6b63\u5e38\u306b\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3002\nOkHttpClient client = new OkHttpClient();\nclient.networkInterceptors().add(new StethoInterceptor());\n\n\nRetrofit\u306e\u5834\u5408\n\nreturn new RestAdapter.Builder()\n  .setEndpoint(\"http://wasabeef.jp\")\n  .setClient(new OkClient(client))\n  .build();\n\n\nGlide\u306e\u5834\u5408\n\nOkHttpUrlLoader.Factory factory = new OkHttpUrlLoader.Factory(client);\n\n// 3.4\u4ee5\u4e0b\nGlide.get(this).register(GlideUrl.class, InputStream.class, factory);\n\n// 3.5\u4ee5\u4e0a\npublic class MyGlideModule extends OkHttpGlideModule {\n  @Override\n  public void registerComponents(Context context, Glide glide) {\n    glide.register(GlideUrl.class, InputStream.class, factory);\n  }\n}\n\n\nPicasso\u306e\u5834\u5408\n\nPicasso picasso = new Picasso.Builder(this).downloader(new OkHttpDownloader(client)).build();\nPicasso.setSingletonInstance(picasso);\n\n\u30ab\u30b9\u30bf\u30e0\u30c0\u30f3\u30d7\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u306f\u3001\u3053\u306e\u3088\u3046\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u6a19\u6e96\u306eStetho\u304c\u51fa\u529b\u3059\u308b\u30c7\u30fc\u30bf\u3067\u306f\u3001\u7269\u8db3\u308a\u306a\u3044\u5834\u5408\u306f\u3001\u30ab\u30b9\u30bf\u30e0\u306eProvider\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u8aac\u660e\u3057\u304d\u308c\u306a\u3044\u306e\u3067\u3001Sample\u3092\u78ba\u8a8d\u3057\u3066\u4e0b\u3055\u3044\u3002\nStetho.initialize(Stetho.newInitializerBuilder(context)\n    .enableDumpapp(new MyDumperPluginsProvider(context))\n    .build())\n\nprivate static class MyDumperPluginsProvider implements DumperPluginsProvider {\n  public Iterable<DumperPlugin> get() {\n    ArrayList<DumperPlugin> plugins = new ArrayList<DumperPlugin>();\n    for (DumperPlugin defaultPlugin : Stetho.defaultDumperPluginsProvider(mContext).get()) {\n      plugins.add(defaultPlugin);\n    }\n    plugins.add(new MyDumperPlugin());\n    return plugins;\n  }\n}\n\n\nFeatures\nJavascript\u306e\u958b\u767a\u3092\u3057\u3066\u308b\u65b9\u306f\u3001\u6163\u308c\u89aa\u3057\u3093\u3060\u3082\u306e\u3060\u3068\u601d\u3044\u307e\u3059\nChrome DevTools\u3067\u3001\u78ba\u8a8d\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u7aef\u672b\u3092PC\u306b\u63a5\u7d9a\u3057\u3066\u3001Chrome DevTools > inspect\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\nNetwork\u3092\u78ba\u8a8d\u3059\u308b\u3068Image, Json\u30c7\u30fc\u30bf\u306f\u52ff\u8ad6\u3067\u3001\u30c7\u30fc\u30bf\u30b5\u30a4\u30ba\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u6642\u9593\u3082\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\nResource\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001\u4f8b\u3048\u3070ActiveAndroid\u306eORM\u306a\u3069\u3067SQLite\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\nDB\u306e\u30c7\u30fc\u30bf\u72b6\u6cc1\u3092\u7d20\u65e9\u304f\u7c21\u5358\u306b\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\n\u96d1\u611f\n\u4fbf\u5229\u3059\u304e\u305f\u306e\u3067\u3001\u7686\u69d8\u3068\u5206\u304b\u3061\u5408\u3048\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n\u4f55\u304b\u3042\u308c\u3070@wasabeef_jp\u307e\u3067(\u0a6d\u0941\u0e51\u2022\u0ac5\u03c9\u2022\u00b4)\u0a6d\u0941\u207e\u207e\n## \u81ea\u5df1\u7d39\u4ecb\n\n\u3053\u3093\u306b\u3061\u306f [@wasabeef_jp](https://twitter.com/wasabeef_jp) \u3067\u3059\u3002\n\u3042\u3001\u305d\u3046\u3044\u3048\u3070\u30012015/4/25(\u571f)\u306b[DroidKaigi](http://droidkaigi.github.io)\u304c\u3042\u308a\u307e\u3059\u306d\u3002\n\u79c1\u3082\u53c2\u52a0\u3059\u308b\u306e\u3067\u3001\u3053\u3046\u3044\u3046\u5834\u3067\u60c5\u5831\u4ea4\u63db\u51fa\u6765\u305f\u3089\u3044\u3044\u3067\u3059\u306d\u3002\n\n\n\u4eca\u56de\u306f\u3001\u5148\u65e5Facebook\u304c\u516c\u958b\u3057\u305f[Stetho](http://facebook.github.io/stetho/)\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n<img src=\"https://qiita-image-store.s3.amazonaws.com/0/12099/c776c279-9172-fa4d-daf7-4f64d846d57a.png\" width=\"50%\">\n\n## Stetho\n\nStetho\u306f\u3001Android\u7528\u306eDebug Bridge\u3067\u3001\u3053\u308c\u3092\u4f7f\u3046\u3068\nChrome Developer Tools\u306e\u4e00\u90e8\u3092\u5229\u7528\u3057\u3066\u3001Javascript\u3068\u540c\u69d8\u306bNetwork\u72b6\u6cc1\u3092\u78ba\u8a8d\u3067\u304d\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\n<img src=\"https://qiita-image-store.s3.amazonaws.com/0/12099/65327a69-70e4-db0e-c869-7bf37eb054e5.png\" width=\"50%\">\n\n## Usage\n### Download\n\n\u307e\u305a\u306f Stetho\u672c\u4f53\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```groovy\n// Gradle dependency on Stetho\ndependencies {\n  compile 'com.facebook.stetho:stetho:1.0.0'\n}\n```\n\nNetwork inspection\u3092\u6709\u52b9\u306b\u3059\u308b\u305f\u3081\u306b\nOkHttpClient\u307e\u305f\u306fUrlConnection\u7528\u306e\u30d5\u30c3\u30af\u30e9\u30a4\u30d6\u30e9\u30ea\u3082\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```groovy\ndependencies {\n  compile 'com.facebook.stetho:stetho-okhttp:1.0.0'\n}\n```\n\nor\n\n```groovy\ndependencies {\n  compile 'com.facebook.stetho:stetho-urlconnection:1.0.0'\n}\n```\n\n### Setup\n\nProguard\u306eShrink\u5bfe\u8c61\u304b\u3089stetho\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5916\u3057\u307e\u3059\u3002\n\n```text\n-keep class com.facebook.stetho.** {*;}\n```\n\n\n\nApplication\u30af\u30e9\u30b9\u306a\u3069\u3067\u3001Stetho\u306e\u521d\u671f\u5316\u3092\u884c\u306a\u3044\u307e\u3059\u3002\nDefault\u306eProvider\u3092\u4f7f\u3046\u5834\u5408\u901a\u308a\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3001\n\n```java\npublic class MyApplication extends Application {\n  public void onCreate() {\n    super.onCreate();\n    Stetho.initialize(\n      Stetho.newInitializerBuilder(this)\n        .enableDumpapp(Stetho.defaultDumperPluginsProvider(this))\n        .enableWebKitInspector(Stetho.defaultInspectorModulesProvider(this))\n        .build());\n  }\n}\n```\n\nOkHttpClient\u306e`networkInterceptors`\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001Retrofit + Glide or Picasso\u306a\u3069\u8907\u6570\u3067OkHttpClient\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\n\u305d\u308c\u305e\u308c\u306eOkHttpClient\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u6307\u5b9a\u3057\u306a\u3051\u308c\u3070\u6b63\u5e38\u306b\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3002\n\n```java\nOkHttpClient client = new OkHttpClient();\nclient.networkInterceptors().add(new StethoInterceptor());\n```\n\n* Retrofit\u306e\u5834\u5408\n\n```java\nreturn new RestAdapter.Builder()\n  .setEndpoint(\"http://wasabeef.jp\")\n  .setClient(new OkClient(client))\n  .build();\n```\n\n* Glide\u306e\u5834\u5408\n\n```java\nOkHttpUrlLoader.Factory factory = new OkHttpUrlLoader.Factory(client);\n\n// 3.4\u4ee5\u4e0b\nGlide.get(this).register(GlideUrl.class, InputStream.class, factory);\n\n// 3.5\u4ee5\u4e0a\npublic class MyGlideModule extends OkHttpGlideModule {\n  @Override\n  public void registerComponents(Context context, Glide glide) {\n    glide.register(GlideUrl.class, InputStream.class, factory);\n  }\n}\n```\n\n* Picasso\u306e\u5834\u5408\n\n```java\nPicasso picasso = new Picasso.Builder(this).downloader(new OkHttpDownloader(client)).build();\nPicasso.setSingletonInstance(picasso);\n```\n\n\u30ab\u30b9\u30bf\u30e0\u30c0\u30f3\u30d7\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u306f\u3001\u3053\u306e\u3088\u3046\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\u6a19\u6e96\u306eStetho\u304c\u51fa\u529b\u3059\u308b\u30c7\u30fc\u30bf\u3067\u306f\u3001\u7269\u8db3\u308a\u306a\u3044\u5834\u5408\u306f\u3001\u30ab\u30b9\u30bf\u30e0\u306eProvider\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u8aac\u660e\u3057\u304d\u308c\u306a\u3044\u306e\u3067\u3001[Sample](https://github.com/facebook/stetho/tree/master/stetho-sample)\u3092\u78ba\u8a8d\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n\n```java\nStetho.initialize(Stetho.newInitializerBuilder(context)\n    .enableDumpapp(new MyDumperPluginsProvider(context))\n    .build())\n\nprivate static class MyDumperPluginsProvider implements DumperPluginsProvider {\n  public Iterable<DumperPlugin> get() {\n    ArrayList<DumperPlugin> plugins = new ArrayList<DumperPlugin>();\n    for (DumperPlugin defaultPlugin : Stetho.defaultDumperPluginsProvider(mContext).get()) {\n      plugins.add(defaultPlugin);\n    }\n    plugins.add(new MyDumperPlugin());\n    return plugins;\n  }\n}\n```\n\n## Features\n\nJavascript\u306e\u958b\u767a\u3092\u3057\u3066\u308b\u65b9\u306f\u3001\u6163\u308c\u89aa\u3057\u3093\u3060\u3082\u306e\u3060\u3068\u601d\u3044\u307e\u3059\nChrome DevTools\u3067\u3001\u78ba\u8a8d\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u7aef\u672b\u3092PC\u306b\u63a5\u7d9a\u3057\u3066\u3001Chrome DevTools > inspect\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n![inspector-discovery.png](https://qiita-image-store.s3.amazonaws.com/0/12099/7882a324-0cbf-89ae-0b06-2d19ae1bea0f.png)\n\nNetwork\u3092\u78ba\u8a8d\u3059\u308b\u3068Image, Json\u30c7\u30fc\u30bf\u306f\u52ff\u8ad6\u3067\u3001\u30c7\u30fc\u30bf\u30b5\u30a4\u30ba\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u6642\u9593\u3082\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n![inspector-network.png](https://qiita-image-store.s3.amazonaws.com/0/12099/65327a69-70e4-db0e-c869-7bf37eb054e5.png)\n\nResource\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001\u4f8b\u3048\u3070ActiveAndroid\u306eORM\u306a\u3069\u3067SQLite\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\nDB\u306e\u30c7\u30fc\u30bf\u72b6\u6cc1\u3092\u7d20\u65e9\u304f\u7c21\u5358\u306b\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n![inspector-sqlite.png](https://qiita-image-store.s3.amazonaws.com/0/12099/c9150a2e-691f-70ff-bec4-340824071268.png)\n\n# \u96d1\u611f\n\u4fbf\u5229\u3059\u304e\u305f\u306e\u3067\u3001\u7686\u69d8\u3068\u5206\u304b\u3061\u5408\u3048\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n\u4f55\u304b\u3042\u308c\u3070[@wasabeef_jp](https://twitter.com/wasabeef_jp)\u307e\u3067(\u0a6d\u0941\u0e51\u2022\u0ac5\u03c9\u2022\u00b4)\u0a6d\u0941\u207e\u207e\n"}