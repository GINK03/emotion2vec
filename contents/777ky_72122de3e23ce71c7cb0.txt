{"tags": ["gulp", "ejs"], "context": " More than 1 year has passed since last update.\u4f8b\uff1a\n\u30bf\u30b9\u30afstep1\u306ftrue\u3092ejs\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u6e21\u3057step1.html\u3092\u751f\u6210\u3059\u308b\u3002\n\u30bf\u30b9\u30afstep2\u306ffalse\u3092ejs\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u6e21\u3057step2.html\u3092\u751f\u6210\u3059\u308b\u3002\n\u203bnode.js\u3068gulp\u306f\u65e2\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u7701\u7565\u3057\u307e\u3059\u3002\n\ngulp-ejs\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nnpm install --save-dev gulp-ejs\n\n\ngulpfile.js\u306e\u8a18\u8ff0\u4f8b\n\ngulpfile.js\nvar steps = {\n    step1:['step1',true],\n    step2:['step2',false]\n};\nfor (var key in steps){\n    (function(key) {\n        gulp.task(steps[key][0], function() {\n            gulp.src(\"./*.ejs\")\n            .pipe(ejs({flg:steps[key][1] }))\n            .pipe(rename(steps[key][0]+\".html\"))\n            .pipe(gulp.dest(\"./\"))\n        });\n    })(key);\n}\n\n//\u30d5\u30a1\u30a4\u30eb\u306e\u76e3\u8996\ngulp.task(\"default\",['server'], function() {\n    gulp.watch([\"./**/*.ejs\"], [\"step1\",\"step2\"]);\n});\n\n\n\nejs\u30d5\u30a1\u30a4\u30eb\u306e\u8a18\u8ff0\u4f8b\n\n<%= \u5024 %> :HTML\u3092\u30a8\u30b9\u30b1\u30fc\u30d7\u51e6\u7406\u3059\u308b\n<%- \u5024 %> :HTML\u3092\u30a8\u30b9\u30b1\u30fc\u30d7\u51e6\u7406\u3057\u306a\u3044\n\n\nsample.ejs\n<%\nvar step;\nvar code;\n\nif(flg){\n    step = \"steps01\";\n    code = '<p><a href=\"#\">\u6b21\u3078</a></p>';\n}else{\n    step = \"steps02\";\n    code = '<p>\u5b8c\u4e86</p>';\n}%>\n<!DOCTYPE HTML>\n<html lang=\"ja\">\n<head>\n<meta charset=\"utf-8\">\n</head>\n<body>\n<h1 class=\"<%= step %>\"><%= step %></h1>\n<%- code %>\n</body>\n</html>\n\n\n\n\u751f\u6210\u3055\u308c\u305f\u30b3\u30fc\u30c9\n\nstep1.html\n<!DOCTYPE HTML>\n<html lang=\"ja\">\n<head>\n<meta charset=\"utf-8\">\n</head>\n<body>\n<h1 class=\"steps01\">steps01</h1>\n<p><a href=\"#\">\u6b21\u3078</a></p>\n</body>\n</html>\n\n\n\nstep2.html\n<!DOCTYPE HTML>\n<html lang=\"ja\">\n<head>\n<meta charset=\"utf-8\">\n</head>\n<body>\n<h1 class=\"steps02\">steps02</h1>\n<p>\u5b8c\u4e86</p>\n</body>\n</html>\n\n\n\u4f8b\uff1a\n\u30bf\u30b9\u30afstep1\u306ftrue\u3092ejs\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u6e21\u3057step1.html\u3092\u751f\u6210\u3059\u308b\u3002\n\u30bf\u30b9\u30afstep2\u306ffalse\u3092ejs\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u6e21\u3057step2.html\u3092\u751f\u6210\u3059\u308b\u3002\n\u203bnode.js\u3068gulp\u306f\u65e2\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u7701\u7565\u3057\u307e\u3059\u3002\n\n#gulp-ejs\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\nnpm install --save-dev gulp-ejs\n```\n\n#gulpfile.js\u306e\u8a18\u8ff0\u4f8b\n```js:gulpfile.js\nvar steps = {\n    step1:['step1',true],\n    step2:['step2',false]\n};\nfor (var key in steps){\n    (function(key) {\n        gulp.task(steps[key][0], function() {\n            gulp.src(\"./*.ejs\")\n            .pipe(ejs({flg:steps[key][1] }))\n            .pipe(rename(steps[key][0]+\".html\"))\n            .pipe(gulp.dest(\"./\"))\n        });\n    })(key);\n}\n\n//\u30d5\u30a1\u30a4\u30eb\u306e\u76e3\u8996\ngulp.task(\"default\",['server'], function() {\n    gulp.watch([\"./**/*.ejs\"], [\"step1\",\"step2\"]);\n});\n```\n\n#ejs\u30d5\u30a1\u30a4\u30eb\u306e\u8a18\u8ff0\u4f8b\n\n* <%= \u5024 %> :HTML\u3092\u30a8\u30b9\u30b1\u30fc\u30d7\u51e6\u7406\u3059\u308b\n* <%- \u5024 %> :HTML\u3092\u30a8\u30b9\u30b1\u30fc\u30d7\u51e6\u7406\u3057\u306a\u3044\n\n```js:sample.ejs\n<%\nvar step;\nvar code;\n\nif(flg){\n\tstep = \"steps01\";\n\tcode = '<p><a href=\"#\">\u6b21\u3078</a></p>';\n}else{\n\tstep = \"steps02\";\n\tcode = '<p>\u5b8c\u4e86</p>';\n}%>\n<!DOCTYPE HTML>\n<html lang=\"ja\">\n<head>\n<meta charset=\"utf-8\">\n</head>\n<body>\n<h1 class=\"<%= step %>\"><%= step %></h1>\n<%- code %>\n</body>\n</html>\n```\n\n#\u751f\u6210\u3055\u308c\u305f\u30b3\u30fc\u30c9\n\n```html:step1.html\n<!DOCTYPE HTML>\n<html lang=\"ja\">\n<head>\n<meta charset=\"utf-8\">\n</head>\n<body>\n<h1 class=\"steps01\">steps01</h1>\n<p><a href=\"#\">\u6b21\u3078</a></p>\n</body>\n</html>\n```\n\n```html:step2.html\n<!DOCTYPE HTML>\n<html lang=\"ja\">\n<head>\n<meta charset=\"utf-8\">\n</head>\n<body>\n<h1 class=\"steps02\">steps02</h1>\n<p>\u5b8c\u4e86</p>\n</body>\n</html>\n```\n"}