{"tags": ["Makefile", "C++"], "context": " More than 1 year has passed since last update.\n\n\u7279\u5fb4\n\nmake \u3059\u308b\u3060\u3051\u3067\u4f9d\u5b58\u95a2\u4fc2\u3092\u7406\u89e3\u3057\u305f\u30d3\u30eb\u30c9\u304c\u53ef\u80fd\nmakedepend \u306a\u3069\u306e\u5916\u90e8\u30c4\u30fc\u30eb\u4f9d\u5b58\u306a\u3057\n\n\u30d1\u30d6\u30ea\u30c3\u30af\u30c9\u30e1\u30a4\u30f3\u3068\u3059\u308b\u306e\u3067\u81ea\u7531\u306b\u5229\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nMakefile\n\u5229\u7528\u306e\u969b\u306f\u884c\u982d\u306e8\u5b57\u9023\u7d9a\u30b9\u30da\u30fc\u30b9\u3092\u30bf\u30d6\u306b\u5909\u63db\u3059\u308b\u3053\u3068\n\nMakefile\nPROGRAM_NAME := $(shell basename `pwd`)\n\n# compiler\nCXX := clang++\nCXXFLAGS := -O2 -Wextra\nLIBS :=\n\n# directory\nOUT_DIR := out\nSOURCE_DIR := src\nHEADER_DIR := include\n\nSOURCES := $(wildcard $(SOURCE_DIR)/*.cpp)\nHEADERS := $(wildcard $(HEADER_DIR)/*.hpp)\n\nPROGRAM_DIR := $(OUT_DIR)/bin\nOBJ_DIR := $(OUT_DIR)/obj\nDEPEND_DIR := $(OUT_DIR)/depend\n\nPROGRAM := $(PROGRAM_DIR)/$(PROGRAM_NAME)\nSOURCE_NAMES = $(notdir $(SOURCES))\nOBJS := $(addprefix $(OBJ_DIR)/,$(SOURCE_NAMES:.cpp=.o))\nDEPENDS := $(addprefix $(DEPEND_DIR)/,$(SOURCE_NAMES:.cpp=.depend))\n\n.PHONY: all\nall: $(DEPENDS) $(PROGRAM)\n$(PROGRAM): $(OBJS)\n        @mkdir -p $(PROGRAM_DIR)\n        $(CXX) $(CXXFLAGS) $(LIBS) $^ -o $(PROGRAM)\n\n$(DEPEND_DIR)/%.depend: $(SOURCE_DIR)/%.cpp $(HEADERS)\n        @echo \"generating $@\"\n        @mkdir -p $(DEPEND_DIR)\n        @$(CXX) $(CXXFLAGS) $(LIBS) -I$(HEADER_DIR) -MM $< > $@\n\n$(OBJ_DIR)/%.o: $(SOURCE_DIR)/%.cpp\n        @mkdir -p $(OBJ_DIR)\n        $(CXX) $(CXXFLAGS) $(LIBS) -I$(HEADER_DIR) -c $^ -o $@\n\n\nifneq \"$(MAKECMDGOALS)\" \"clean\"\n-include $(DEPENDS)\nendif\n\n.PHONY : clean\nclean:\n        $(RM) -r $(OUT_DIR)\n\n\n## \u7279\u5fb4\n* make \u3059\u308b\u3060\u3051\u3067\u4f9d\u5b58\u95a2\u4fc2\u3092\u7406\u89e3\u3057\u305f\u30d3\u30eb\u30c9\u304c\u53ef\u80fd\n* makedepend \u306a\u3069\u306e\u5916\u90e8\u30c4\u30fc\u30eb\u4f9d\u5b58\u306a\u3057\n\n\u30d1\u30d6\u30ea\u30c3\u30af\u30c9\u30e1\u30a4\u30f3\u3068\u3059\u308b\u306e\u3067\u81ea\u7531\u306b\u5229\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n## Makefile\n\u5229\u7528\u306e\u969b\u306f\u884c\u982d\u306e8\u5b57\u9023\u7d9a\u30b9\u30da\u30fc\u30b9\u3092\u30bf\u30d6\u306b\u5909\u63db\u3059\u308b\u3053\u3068\n\n```make:Makefile\nPROGRAM_NAME := $(shell basename `pwd`)\n \n# compiler\nCXX := clang++\nCXXFLAGS := -O2 -Wextra\nLIBS :=\n\n# directory\nOUT_DIR := out\nSOURCE_DIR := src\nHEADER_DIR := include\n\nSOURCES := $(wildcard $(SOURCE_DIR)/*.cpp)\nHEADERS := $(wildcard $(HEADER_DIR)/*.hpp)\n\nPROGRAM_DIR := $(OUT_DIR)/bin\nOBJ_DIR := $(OUT_DIR)/obj\nDEPEND_DIR := $(OUT_DIR)/depend\n\nPROGRAM := $(PROGRAM_DIR)/$(PROGRAM_NAME)\nSOURCE_NAMES = $(notdir $(SOURCES))\nOBJS := $(addprefix $(OBJ_DIR)/,$(SOURCE_NAMES:.cpp=.o))\nDEPENDS := $(addprefix $(DEPEND_DIR)/,$(SOURCE_NAMES:.cpp=.depend))\n \n.PHONY: all\nall: $(DEPENDS) $(PROGRAM)\n$(PROGRAM): $(OBJS)\n        @mkdir -p $(PROGRAM_DIR)\n        $(CXX) $(CXXFLAGS) $(LIBS) $^ -o $(PROGRAM)\n \n$(DEPEND_DIR)/%.depend: $(SOURCE_DIR)/%.cpp $(HEADERS)\n        @echo \"generating $@\"\n        @mkdir -p $(DEPEND_DIR)\n        @$(CXX) $(CXXFLAGS) $(LIBS) -I$(HEADER_DIR) -MM $< > $@\n \n$(OBJ_DIR)/%.o: $(SOURCE_DIR)/%.cpp\n        @mkdir -p $(OBJ_DIR)\n        $(CXX) $(CXXFLAGS) $(LIBS) -I$(HEADER_DIR) -c $^ -o $@\n \n \nifneq \"$(MAKECMDGOALS)\" \"clean\"\n-include $(DEPENDS)\nendif\n \n.PHONY : clean\nclean:\n        $(RM) -r $(OUT_DIR)\n```\n"}