{"tags": ["EC-CUBE", "SQL"], "context": "\n\nEC-Cube2\u3067\u4f7f\u3063\u3066\u3044\u308bSQL\n\n\u4f1a\u54e1\u767b\u9332\u6570\u3092\u30e9\u30f3\u30ad\u30f3\u30b0\u3059\u308b\u305f\u3081\u306eSQL\n\u3000\u3053\u308c\u306b\u3088\u308a\u3001\u3044\u3064\u306e\u767b\u9332\u304c\u591a\u304b\u3063\u305f\u306e\u304b\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u3000\u3053\u308c\u3092\u5143\u306b\u3001\u306a\u306b\u306e\u30ad\u30e3\u30f3\u30da\u30fc\u30f3\u3092\u884c\u306a\u3063\u305f\u306e\u304b\u3092\u8003\u3048\u3066\u3044\u307e\u3059\u3002\n\n    select count(customer_id), DATE_FORMAT(create_date, '%Y-%m-%d') \n    from dtb_customer \n    group by  DATE_FORMAT(create_date, '%Y-%m-%d')\n\n\n\u904e\u53bb\uff11\u30f6\u6708\u9593\u306e\u5168\u5546\u54c1\u30e9\u30f3\u30ad\u30f3\u30b06\u4ef6\u3092\u53d6\u5f97\u3059\u308b\n\u3000\u58f2\u308a\u4e0a\u3052\u6570\u4e0a\u4f4d\u3068\u3001\u305d\u3053\u304b\u3089\u51fa\u3055\u308c\u3066\u3044\u308b\u58f2\u308a\u4e0a\u3052\u3092\u3060\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3000\u65e5\u3005\u78ba\u8a8d\u3057\u3066\u3044\u308b\u3068\u3001\u58f2\u308a\u4e0a\u3052\u6570\u3068\u58f2\u308a\u4e0a\u3052\u306f\u6bd4\u4f8b\u3057\u306a\u3044\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n      SELECT\n      od.product_id, od.product_name, p.main_image,\n      count(*) as cnt, sum(od.price) as price\n      FROM\n      ( SELECT order_id FROM dtb_order WHERE\n      create_date > DATE_ADD(now(), INTERVAL -1 month) ) o\n      INNER JOIN dtb_order_detail od ON(o.order_id = od.order_id)\n      INNER JOIN dtb_order as do ON (do.order_id = od.order_id)\n      INNER JOIN dtb_products p ON(od.product_id = p.product_id)\n      INNER JOIN dtb_product_categories pc ON (p.product_id = pc.product_id)\n\n      where pc.category_id>8\n      and do.create_date> DATE_ADD(now(), INTERVAL -1 month)\n\n      GROUP BY od.product_id\n      order by count(od.product_id) desc\n      limit 6\n\n\n\u524d\u65e5\u306e\u4f1a\u54e1\u767b\u9332\u6570\u3092\u53d6\u5f97\u3059\u308b\n\u3000\u524d\u65e5\u306e\u4f1a\u54e1\u767b\u9332\u6570\u306f\u3001\u5f53\u65e5\u306e\u4f1a\u54e1\u767b\u9332\u6570\u3068\u306e\u6bd4\u8f03\u306b\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n     select count(customer_id) as count from dtb_customer where create_date BETWEEN (CURDATE() - INTERVAL 0 DAY) and (CURDATE() - INTERVAL -1 DAY)\n\n\n\n\u5f53\u65e5\u306e\u4f1a\u54e1\u767b\u9332\u6570\u3092\u53d6\u5f97\u3059\u308b\n\u3000\u6bce\u65e5\u306e\u4f1a\u54e1\u767b\u9332\u6570\u3092\u78ba\u8a8d\u3057\u3066\u3044\u308b\u3068\u3001\n\u3000\u66dc\u65e5\u3067\u306e\u50be\u5411\u3001\u5148\u9031\u3084\u5148\u6708\u3068\u306e\u9055\u3044\u304c\u308f\u304b\u3063\u3066\u304d\u307e\u3059\u3002\n      select count(customer_id) as count from dtb_customer where create_date BETWEEN (CURDATE() - INTERVAL 1 DAY) and (CURDATE() - INTERVAL 0 DAY)\n\n\n\n\u7537\u6027\u4f1a\u54e1\u306e\u3046\u3061\u3001\u672a\u8cfc\u5165\u306e\u4eba\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u53d6\u5f97\u3059\u308b\n\u6027\u5225\u3054\u3068\u306b\u53d6\u5f97\u3057\u3066\u3044\u3066\u3001\u3053\u308c\u306b\u3088\u308a\u3001\u7537\u5973\u3078\u306e\u8a34\u6c42\u65b9\u6cd5\u3092\u8003\u3048\u3066\u3044\u307e\u3059\u3002\n\n select count(dc.customer_id)\n from dtb_customer as dc\n where \n dc.last_buy_date is null\n and dc.sex=1\n and create_date > DATE_ADD(now(), INTERVAL -1 month)\n\n\n\n\u500b\u4eba\u60c5\u5831\u3092\u30de\u30b9\u30af\u3059\u308b\n\u30c6\u30b9\u30c8\u30b5\u30fc\u30d0\u3092\u4f5c\u308b\u3068\u304d\u306b\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\nupdate dtb_shipping set shipping_addr01='\u90fd\u5e81\u524d', shipping_addr02='\uff11\u2212\uff12\u2212\uff13';\nupdate dtb_csv_sql set csv_sql='';\nupdate dtb_customer set email='test@XXX.co.jp', addr01='\u90fd\u5e81\u524d' ,addr02='1-2-3';\nupdate dtb_customer set tel01='090', tel02='1234' ,tel03='5678';\nupdate dtb_customer set salt='salt', reminder_answer='sfddsfwoiusjdf';\nupdate dtb_customer set name01='\u306a\u307e\u3048\uff11', name02='\u306a\u307e\u30482';\nupdate dtb_customer set kana01='\u30ca\u30de\u30a81', kana02='\u30ca\u30de\u30a82';\nupdate dtb_customer set zip01='012', zip02='0123';\nupdate dtb_mail_history set mail_body='\u672c\u6587\u672c\u6587\u672c\u6587\u672c\u6587';\nupdate dtb_order set order_name01='\u6ce8\u6587\u8005\u306a\u307e\u30481', order_name02='\u6ce8\u6587\u8005\u306a\u307e\u3048\uff12';\nupdate dtb_order set order_kana01='\u30c1\u30e5\u30a6\u30e2\u30f3\u30b7\u30e31', order_kana02='\u30c1\u30e5\u30a6\u30e2\u30f3\u30b7\u30e32';\nupdate dtb_order set order_email='test@XXX.co.jp', order_tel01='090', order_tel02='1234', order_tel03='5678';\nupdate dtb_order set order_zip01='000', order_zip02='1234';\nupdate dtb_order set order_addr01='\u90fd\u5e81\u524d', order_addr02='\uff11\u2212\uff12\u2212\uff13';\nupdate dtb_order_temp set memo01='' and memo02='' and memo03='';\nupdate dtb_order_temp set memo04='' and memo05='' and memo06='';\nupdate dtb_order_temp set memo07='' and memo08='' and memo09='';\nupdate dtb_order_temp set order_name01='\u6ce8\u6587\u8005\u306a\u307e\u30481', order_name02='\u6ce8\u6587\u8005\u306a\u307e\u30482';\nupdate dtb_order_temp set order_kana01='\u30c1\u30e5\u30a6\u30e2\u30f3\u30b7\u30e31', order_kana02='\u30c1\u30e5\u30a6\u30e2\u30f3\u30b7\u30e32';\nupdate dtb_order_temp set order_email='test@XXX.co.jp';\nupdate dtb_order_temp set order_tel01='090', order_tel02='1234', order_tel03='5678';\nupdate dtb_order_temp set order_zip01='000', order_zip02='1234';\nupdate dtb_order_temp set order_addr01='\u90fd\u5e81\u524d', order_addr02='\uff11\u2212\uff12\u2212\uff13';\nupdate dtb_other_deliv set name01='\u306a\u307e\u3048', name02='\u306a\u307e\u3048';\nupdate dtb_other_deliv set kana01='\u30ca\u30de\u30a81', kana02='\u30ca\u30de\u30a82';\nupdate dtb_other_deliv set zip01='000', zip02='\u30ca\u30de\u30a8';\nupdate dtb_other_deliv set addr01='\u90fd\u5e81\u524d', addr02='\uff11\u2212\uff12\u2212\uff13';\nupdate dtb_other_deliv set tel01='090', tel02='1234', tel03='5678';\nupdate dtb_send_customer set email='test@XXX.co.jp', name='\u306a\u307e\u3048';\nupdate dtb_session set sess_data='';\nupdate dtb_shipping set shipping_name01='\u540d\u524d\uff11', shipping_name02='\u540d\u524d\uff12';\nupdate dtb_shipping set shipping_kana01='\u30ca\u30de\u30a81', shipping_kana02='\u30ca\u30de\u30a82';\nupdate dtb_shipping set shipping_tel01='090', shipping_tel02='1234', shipping_tel03='5678';\nupdate dtb_shipping set shipping_zip01='000', shipping_zip02='1234';\nupdate dtb_shipping set shipping_addr01='\u90fd\u5e81\u524d', shipping_addr02='\uff11\u2212\uff12\u2212\uff13';\n\n\n\u9996\u90fd\u570f\u4eba\u53e3\u306e\u591a\u3044\u5834\u6240\u3060\u3051\u306e\u30e6\u30fc\u30b6\u30921\u5e74\u5206\u53d6\u5f97\u3059\u308b\n\u30b7\u30a7\u30a2\u78ba\u8a8d\u306e\u305f\u3081\u306b\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\nselect * from dtb_customer\nwhere create_date > DATE_ADD(now(), INTERVAL -1 year)\nand pref in(11,12,13,14,23,27)\nand del_flg=0\n\n\n\u7279\u5b9a\u5546\u54c1\u3092\u8cfc\u5165\u3057\u305f\u4eba\u5168\u54e1\u3092\u4f1a\u54e1\u767b\u9332\u6642\u9593\u3068\u3068\u3082\u7537\u5973\u5225\u3067\u306b\u51fa\u529b\n\u3053\u308c\u306b\u3088\u308a\u51fa\u529b\u3055\u308c\u308b\u30ea\u30b9\u30c8\u3092\u7537\u5973\uff0b\u6642\u9593\u30bb\u30b0\u30e1\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3042\u308b\u30e1\u30eb\u30de\u30ac\u30b7\u30b9\u30c6\u30e0\u306b\u7e4b\u304e\u3001\u30e1\u30fc\u30eb\u30de\u30ac\u30b8\u30f3\u3092\u914d\u4fe1\u3057\u3066\u3044\u307e\u3059\u3002\u3000\u3053\u308c\u306b\u3088\u308a\u3001\u8907\u6570\u306e\u30ea\u30b9\u30c8\u3092\u7ba1\u7406\u3057\u306a\u304f\u3066\u3088\u304f\u306a\u308a\u3001\u6642\u9593\u3054\u3068\u306e\u958b\u5c01\u72b6\u6cc1\u3082\u78ba\u8a8d\u3067\u304d\u3001unsubsclive\u51e6\u7406\u3082\u307e\u3068\u3081\u3089\u308c\u307e\u3059\u3002\u5c11\u3057\u624b\u9593\u306b\u306a\u308a\u307e\u3059\u304c\u3001\u4fbf\u5229\u306a\u65b9\u6cd5\u3067\u3059\u3002\n\nselect order_email, substr(dtb_order.create_date, -8, 2) \nfrom dtb_order ,`dtb_order_detail`, dtb_customer\u3000where \ndtb_order.order_id = dtb_order_detail.order_id\nand\u3000dtb_order.customer_id = dtb_customer.customer_id\nand\u3000product_id in (100,200,300,400,500,600,700,800)\nand\u3000dtb_customer.del_flg=0\nand\u3000sex = 1\ngroup by order_email\n\n\n\n\u5f53\u65e5\u306e\u58f2\u4e0a\u6570\u3092\u53d6\u5f97\u3059\u308b\nDATE\u306b\u30ad\u30e3\u30b9\u30c8\u3057\u305f\u5024\u540c\u58eb\u3092\u6bd4\u3079\u308b\u3053\u3068\u3067\u3001\u7c21\u5358\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\nSELECT * from dtb_order where del_flg=0 and  DATE(SUBSTR(create_date,1,10)) = DATE(NOW()) -1\n\n\n#EC-Cube2\u3067\u4f7f\u3063\u3066\u3044\u308bSQL\n\n## \u4f1a\u54e1\u767b\u9332\u6570\u3092\u30e9\u30f3\u30ad\u30f3\u30b0\u3059\u308b\u305f\u3081\u306eSQL\n\u3000\u3053\u308c\u306b\u3088\u308a\u3001\u3044\u3064\u306e\u767b\u9332\u304c\u591a\u304b\u3063\u305f\u306e\u304b\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u3000\u3053\u308c\u3092\u5143\u306b\u3001\u306a\u306b\u306e\u30ad\u30e3\u30f3\u30da\u30fc\u30f3\u3092\u884c\u306a\u3063\u305f\u306e\u304b\u3092\u8003\u3048\u3066\u3044\u307e\u3059\u3002\n\n```sql\n\n    select count(customer_id), DATE_FORMAT(create_date, '%Y-%m-%d') \n    from dtb_customer \n    group by  DATE_FORMAT(create_date, '%Y-%m-%d')\n```\n\n## \u904e\u53bb\uff11\u30f6\u6708\u9593\u306e\u5168\u5546\u54c1\u30e9\u30f3\u30ad\u30f3\u30b06\u4ef6\u3092\u53d6\u5f97\u3059\u308b\n\u3000\u58f2\u308a\u4e0a\u3052\u6570\u4e0a\u4f4d\u3068\u3001\u305d\u3053\u304b\u3089\u51fa\u3055\u308c\u3066\u3044\u308b\u58f2\u308a\u4e0a\u3052\u3092\u3060\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3000\u65e5\u3005\u78ba\u8a8d\u3057\u3066\u3044\u308b\u3068\u3001\u58f2\u308a\u4e0a\u3052\u6570\u3068\u58f2\u308a\u4e0a\u3052\u306f\u6bd4\u4f8b\u3057\u306a\u3044\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n```sql\n\n      SELECT\n      od.product_id, od.product_name, p.main_image,\n      count(*) as cnt, sum(od.price) as price\n      FROM\n      ( SELECT order_id FROM dtb_order WHERE\n      create_date > DATE_ADD(now(), INTERVAL -1 month) ) o\n      INNER JOIN dtb_order_detail od ON(o.order_id = od.order_id)\n      INNER JOIN dtb_order as do ON (do.order_id = od.order_id)\n      INNER JOIN dtb_products p ON(od.product_id = p.product_id)\n      INNER JOIN dtb_product_categories pc ON (p.product_id = pc.product_id)\n\n      where pc.category_id>8\n      and do.create_date> DATE_ADD(now(), INTERVAL -1 month)\n\n      GROUP BY od.product_id\n      order by count(od.product_id) desc\n      limit 6\n```\n\n\n\n\n## \u524d\u65e5\u306e\u4f1a\u54e1\u767b\u9332\u6570\u3092\u53d6\u5f97\u3059\u308b\n\u3000\u524d\u65e5\u306e\u4f1a\u54e1\u767b\u9332\u6570\u306f\u3001\u5f53\u65e5\u306e\u4f1a\u54e1\u767b\u9332\u6570\u3068\u306e\u6bd4\u8f03\u306b\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\n```sql\n     select count(customer_id) as count from dtb_customer where create_date BETWEEN (CURDATE() - INTERVAL 0 DAY) and (CURDATE() - INTERVAL -1 DAY)\n\n```\n\n## \u5f53\u65e5\u306e\u4f1a\u54e1\u767b\u9332\u6570\u3092\u53d6\u5f97\u3059\u308b\n\u3000\u6bce\u65e5\u306e\u4f1a\u54e1\u767b\u9332\u6570\u3092\u78ba\u8a8d\u3057\u3066\u3044\u308b\u3068\u3001\n\u3000\u66dc\u65e5\u3067\u306e\u50be\u5411\u3001\u5148\u9031\u3084\u5148\u6708\u3068\u306e\u9055\u3044\u304c\u308f\u304b\u3063\u3066\u304d\u307e\u3059\u3002\n\n````sql\n      select count(customer_id) as count from dtb_customer where create_date BETWEEN (CURDATE() - INTERVAL 1 DAY) and (CURDATE() - INTERVAL 0 DAY)\n\n```\n\n\n\n\n\n\n## \u7537\u6027\u4f1a\u54e1\u306e\u3046\u3061\u3001\u672a\u8cfc\u5165\u306e\u4eba\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u53d6\u5f97\u3059\u308b\n\u6027\u5225\u3054\u3068\u306b\u53d6\u5f97\u3057\u3066\u3044\u3066\u3001\u3053\u308c\u306b\u3088\u308a\u3001\u7537\u5973\u3078\u306e\u8a34\u6c42\u65b9\u6cd5\u3092\u8003\u3048\u3066\u3044\u307e\u3059\u3002\n\n\n\n\n```sql\n\n select count(dc.customer_id)\n from dtb_customer as dc\n where \n dc.last_buy_date is null\n and dc.sex=1\n and create_date > DATE_ADD(now(), INTERVAL -1 month)\n\n```\n\n\n## \u500b\u4eba\u60c5\u5831\u3092\u30de\u30b9\u30af\u3059\u308b\n\u30c6\u30b9\u30c8\u30b5\u30fc\u30d0\u3092\u4f5c\u308b\u3068\u304d\u306b\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\n```sql\nupdate dtb_shipping set shipping_addr01='\u90fd\u5e81\u524d', shipping_addr02='\uff11\u2212\uff12\u2212\uff13';\nupdate dtb_csv_sql set csv_sql='';\nupdate dtb_customer set email='test@XXX.co.jp', addr01='\u90fd\u5e81\u524d' ,addr02='1-2-3';\nupdate dtb_customer set tel01='090', tel02='1234' ,tel03='5678';\nupdate dtb_customer set salt='salt', reminder_answer='sfddsfwoiusjdf';\nupdate dtb_customer set name01='\u306a\u307e\u3048\uff11', name02='\u306a\u307e\u30482';\nupdate dtb_customer set kana01='\u30ca\u30de\u30a81', kana02='\u30ca\u30de\u30a82';\nupdate dtb_customer set zip01='012', zip02='0123';\nupdate dtb_mail_history set mail_body='\u672c\u6587\u672c\u6587\u672c\u6587\u672c\u6587';\nupdate dtb_order set order_name01='\u6ce8\u6587\u8005\u306a\u307e\u30481', order_name02='\u6ce8\u6587\u8005\u306a\u307e\u3048\uff12';\nupdate dtb_order set order_kana01='\u30c1\u30e5\u30a6\u30e2\u30f3\u30b7\u30e31', order_kana02='\u30c1\u30e5\u30a6\u30e2\u30f3\u30b7\u30e32';\nupdate dtb_order set order_email='test@XXX.co.jp', order_tel01='090', order_tel02='1234', order_tel03='5678';\nupdate dtb_order set order_zip01='000', order_zip02='1234';\nupdate dtb_order set order_addr01='\u90fd\u5e81\u524d', order_addr02='\uff11\u2212\uff12\u2212\uff13';\nupdate dtb_order_temp set memo01='' and memo02='' and memo03='';\nupdate dtb_order_temp set memo04='' and memo05='' and memo06='';\nupdate dtb_order_temp set memo07='' and memo08='' and memo09='';\nupdate dtb_order_temp set order_name01='\u6ce8\u6587\u8005\u306a\u307e\u30481', order_name02='\u6ce8\u6587\u8005\u306a\u307e\u30482';\nupdate dtb_order_temp set order_kana01='\u30c1\u30e5\u30a6\u30e2\u30f3\u30b7\u30e31', order_kana02='\u30c1\u30e5\u30a6\u30e2\u30f3\u30b7\u30e32';\nupdate dtb_order_temp set order_email='test@XXX.co.jp';\nupdate dtb_order_temp set order_tel01='090', order_tel02='1234', order_tel03='5678';\nupdate dtb_order_temp set order_zip01='000', order_zip02='1234';\nupdate dtb_order_temp set order_addr01='\u90fd\u5e81\u524d', order_addr02='\uff11\u2212\uff12\u2212\uff13';\nupdate dtb_other_deliv set name01='\u306a\u307e\u3048', name02='\u306a\u307e\u3048';\nupdate dtb_other_deliv set kana01='\u30ca\u30de\u30a81', kana02='\u30ca\u30de\u30a82';\nupdate dtb_other_deliv set zip01='000', zip02='\u30ca\u30de\u30a8';\nupdate dtb_other_deliv set addr01='\u90fd\u5e81\u524d', addr02='\uff11\u2212\uff12\u2212\uff13';\nupdate dtb_other_deliv set tel01='090', tel02='1234', tel03='5678';\nupdate dtb_send_customer set email='test@XXX.co.jp', name='\u306a\u307e\u3048';\nupdate dtb_session set sess_data='';\nupdate dtb_shipping set shipping_name01='\u540d\u524d\uff11', shipping_name02='\u540d\u524d\uff12';\nupdate dtb_shipping set shipping_kana01='\u30ca\u30de\u30a81', shipping_kana02='\u30ca\u30de\u30a82';\nupdate dtb_shipping set shipping_tel01='090', shipping_tel02='1234', shipping_tel03='5678';\nupdate dtb_shipping set shipping_zip01='000', shipping_zip02='1234';\nupdate dtb_shipping set shipping_addr01='\u90fd\u5e81\u524d', shipping_addr02='\uff11\u2212\uff12\u2212\uff13';\n```\n\n## \u9996\u90fd\u570f\u4eba\u53e3\u306e\u591a\u3044\u5834\u6240\u3060\u3051\u306e\u30e6\u30fc\u30b6\u30921\u5e74\u5206\u53d6\u5f97\u3059\u308b\n\u30b7\u30a7\u30a2\u78ba\u8a8d\u306e\u305f\u3081\u306b\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\n```sql\nselect * from dtb_customer\nwhere create_date > DATE_ADD(now(), INTERVAL -1 year)\nand pref in(11,12,13,14,23,27)\nand del_flg=0\n```\n\n\n## \u7279\u5b9a\u5546\u54c1\u3092\u8cfc\u5165\u3057\u305f\u4eba\u5168\u54e1\u3092\u4f1a\u54e1\u767b\u9332\u6642\u9593\u3068\u3068\u3082\u7537\u5973\u5225\u3067\u306b\u51fa\u529b\n\u3053\u308c\u306b\u3088\u308a\u51fa\u529b\u3055\u308c\u308b\u30ea\u30b9\u30c8\u3092\u7537\u5973\uff0b\u6642\u9593\u30bb\u30b0\u30e1\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3042\u308b\u30e1\u30eb\u30de\u30ac\u30b7\u30b9\u30c6\u30e0\u306b\u7e4b\u304e\u3001\u30e1\u30fc\u30eb\u30de\u30ac\u30b8\u30f3\u3092\u914d\u4fe1\u3057\u3066\u3044\u307e\u3059\u3002\u3000\u3053\u308c\u306b\u3088\u308a\u3001\u8907\u6570\u306e\u30ea\u30b9\u30c8\u3092\u7ba1\u7406\u3057\u306a\u304f\u3066\u3088\u304f\u306a\u308a\u3001\u6642\u9593\u3054\u3068\u306e\u958b\u5c01\u72b6\u6cc1\u3082\u78ba\u8a8d\u3067\u304d\u3001unsubsclive\u51e6\u7406\u3082\u307e\u3068\u3081\u3089\u308c\u307e\u3059\u3002\u5c11\u3057\u624b\u9593\u306b\u306a\u308a\u307e\u3059\u304c\u3001\u4fbf\u5229\u306a\u65b9\u6cd5\u3067\u3059\u3002\n\n```sql\n\nselect order_email, substr(dtb_order.create_date, -8, 2) \nfrom dtb_order ,`dtb_order_detail`, dtb_customer\u3000where \ndtb_order.order_id = dtb_order_detail.order_id\nand\u3000dtb_order.customer_id = dtb_customer.customer_id\nand\u3000product_id in (100,200,300,400,500,600,700,800)\nand\u3000dtb_customer.del_flg=0\nand\u3000sex = 1\ngroup by order_email\n\n```\n\n\n## \u5f53\u65e5\u306e\u58f2\u4e0a\u6570\u3092\u53d6\u5f97\u3059\u308b\nDATE\u306b\u30ad\u30e3\u30b9\u30c8\u3057\u305f\u5024\u540c\u58eb\u3092\u6bd4\u3079\u308b\u3053\u3068\u3067\u3001\u7c21\u5358\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n```sql\n\nSELECT * from dtb_order where del_flg=0 and  DATE(SUBSTR(create_date,1,10)) = DATE(NOW()) -1\n\n```\n"}