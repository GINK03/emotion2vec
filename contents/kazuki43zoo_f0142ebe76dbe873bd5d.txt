{"tags": ["Java", "spring", "spring-boot", "JavaEE"], "context": "\u4eca\u56de\u306f\u3001Spring Framework 4.3\u306e\u5909\u66f4\u70b9\u7d39\u4ecb\u30b7\u30ea\u30fc\u30ba\u306e\u7b2c4\u56de\u3067\u3001JMS\u95a2\u9023\u306e\u5909\u66f4\u70b9\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n\u30b7\u30ea\u30fc\u30ba\n\n\u7b2c\uff11\u56de\uff1aSpring 4.3 DI\u30b3\u30f3\u30c6\u30ca\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9\n\n\u7b2c\uff12\u56de\uff1aSpring 4.3 \u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9\n\n\u7b2c\uff13\u56de\uff1aSpring 4.3 \u30ad\u30e3\u30c3\u30b7\u30e5\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9\n\n\u7b2c\uff15\u56de\uff1aSpring 4.3 Web\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9\n\n\u7b2c\uff16\u56de\uff1aSpring 4.3 WebSocket\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9\n\n\u7b2c\uff17\u56de(\u6700\u7d42\u56de)\uff1aSpring 4.3 \u30c6\u30b9\u30c8\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9\n\n\n\n\u52d5\u4f5c\u691c\u8a3c\u74b0\u5883\n\nSpring Framework 4.3.0.RELEASE\nSpring Boot 1.4.0.BUILD-SNAPSHOT (2016/6/11\u6642\u70b9)\nApache ActiveMQ 5.13.3\n\n\nJMS Improvements\n\u4eca\u56de\u306f\u3001JMS\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9\u3092\u307f\u3066\u3044\u304d\u307e\u3059\u3002\u516c\u5f0f\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3092\u898b\u308b\u9650\u308a\u3067\u306f\u3001\u6a5f\u80fd\u8ffd\u52a0\u306f\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n\n\n\nNo\nJMS\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9\n\n\n\n\n1\n\n@SendTo\u3092\u30af\u30e9\u30b9\u30ec\u30d9\u30eb\u306b\u4ed8\u4e0e\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n2\n\n@JmsListener\u3068@JmsListeners\u3092\u30e1\u30bf\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\n\n@SendTo\u3092\u30af\u30e9\u30b9\u30ec\u30d9\u30eb\u306b\u4ed8\u4e0e\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b \n\nSpring 4.3\u304b\u3089\u3001@SendTo\u3092\u30af\u30e9\u30b9\u30ec\u30d9\u30eb\u306b\u4ed8\u4e0e\u3059\u308b\u3053\u3068\u3067\u3001\u5fdc\u7b54\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u9001\u4fe1\u5148\u3092\u5404\u30e1\u30bd\u30c3\u30c9\u3067\u5171\u6709\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30ea\u30b9\u30ca\u30fc\u5074\n@Component\n@SendTo(\"testReplyQueue\") // \u30af\u30e9\u30b9\u30ec\u30d9\u30eb\u306b\u6307\u5b9a\u3057\u3066\u3001\u5fdc\u7b54\u5148\u3092\u5404\u30e1\u30bd\u30c3\u30c9\u3067\u5171\u6709\uff01\uff01\npublic class JmsTestListeners {\n\n    private static final Logger logger = LoggerFactory.getLogger(JmsTestListeners.class);\n\n    @JmsListener(destination = \"testQueue\", selector = \"JMSPriority = 9\", concurrency = \"1-50\")\n    public String receiveHighQuality(String text) {\n        logger.info(text);\n        return \"HighQuality:\" + UUID.randomUUID().toString();\n    }\n\n    @JmsListener(destination = \"testQueue\", selector = \"JMSPriority < 9\", concurrency = \"1\")\n    public String receiveOtherQuality(String text) {\n        logger.info(text);\n        return \"OtherQuality:\" + UUID.randomUUID().toString();\n    }\n}\n\n\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\n@Autowired\nConnectionFactory connectionFactory;\n\n@Test\npublic void send() throws InterruptedException, JMSException {\n    JmsTemplate jmsTemplate = new JmsTemplate(connectionFactory);\n    jmsTemplate.setExplicitQosEnabled(true);\n    jmsTemplate.setPriority(9);\n\n    jmsTemplate.send(\"testQueue\", (s) -> s.createTextMessage(\"high\"));\n    TextMessage message = (TextMessage) jmsTemplate.receive(\"testReplyQueue\");\n    logger.info(message.getText());\n\n    jmsTemplate.setPriority(4);\n    jmsTemplate.send(\"testQueue\", (s) -> s.createTextMessage(\"low\"));\n    message = (TextMessage) jmsTemplate.receive(\"testReplyQueue\");\n    logger.info(message.getText());\n}\n\n\n\u3061\u306a\u307f\u306b\u30fb\u30fb\u30fbSpring Boot\u304b\u3089\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308bspring-boot-starter-activemq\u3092\u5229\u7528\u3059\u308c\u3070\u3001\u7279\u5225\u306aBean\u5b9a\u7fa9\u3092\u884c\u308f\u306a\u304f\u3066\u3082\u7d44\u307f\u8fbc\u307fActive MQ\u3092\u4f7f\u7528\u3057\u305fJMS\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\npom.xml\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-activemq</artifactId>\n</dependency>\n\n\n\n@JmsListener\u3068@JmsListeners\u3092\u30e1\u30bf\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u308b \n\nSpring 4.3\u304b\u3089\u3001@JmsListener\u3068@JmsListeners\u3092\u30e1\u30bf\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u3069\u3046\u3044\u3046\u5207\u308a\u53e3\u3067\u30ab\u30b9\u30bf\u30e0\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u308b\u304b\u306f\u81ea\u7531\u3067\u3059\u304c\u3001\u3053\u3053\u3067\u306f\u3001\u512a\u5148\u5ea6\u304c\u9ad8\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u307f\u3092\u6271\u3046\u30ea\u30b9\u30ca\u30fc\u3067\u3042\u308b\u3053\u3068\u3092\u8868\u73fe\u3059\u308b\u30ab\u30b9\u30bf\u30e0\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\n\u30ab\u30b9\u30bf\u30e0\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\npackage com.example;\n\nimport org.springframework.core.annotation.AliasFor;\nimport org.springframework.jms.annotation.JmsListener;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@JmsListener(destination = \"\", selector = \"JMSPriority = 9\", concurrency = \"1-50\")\n@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface HighQualityJmsListener {\n\n    @AliasFor(annotation = JmsListener.class)\n    String destination();\n\n}\n\n\n\n\u30ea\u30b9\u30ca\u30fc\u30e1\u30bd\u30c3\u30c9\n// @JmsListener(destination = \"\", selector = \"JMSPriority = 9\", concurrency = \"1-50\")\n@HighQualityJmsListener(destination = \"testQueue\") // \u30ab\u30b9\u30bf\u30e0\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u5229\u7528\npublic String receiveHighQuality(String text) {\n    logger.info(text);\n    return \"HighQuality:\" + UUID.randomUUID().toString();\n}\n\n\n\n\u307e\u3068\u3081\n\u4eca\u56de\u306f\u3001JMS\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\u5927\u304d\u306a\u5909\u66f4\u306f\u306a\u3044\u3088\u3046\u3067\u3059\u304c\u3001\u540c\u3058\u3088\u3046\u306a\u5b9a\u7fa9\u3092\u96c6\u7d04\u3067\u304d\u308b\u4ed5\u7d44\u307f\u306e\u5c0e\u5165\u306f\u3042\u308a\u304c\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u6b21\u56de\u306f\u3001\u3044\u3088\u3044\u3088\u300cWeb\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9\u300d\u3092\u7d39\u4ecb\u3059\u308b\u4e88\u5b9a\u3067\u3059\u3002\n\n\u53c2\u8003\u30b5\u30a4\u30c8\n\nhttp://docs.spring.io/spring/docs/4.3.0.RELEASE/spring-framework-reference/htmlsingle/\n\n\u4eca\u56de\u306f\u3001Spring Framework 4.3\u306e\u5909\u66f4\u70b9\u7d39\u4ecb\u30b7\u30ea\u30fc\u30ba\u306e\u7b2c4\u56de\u3067\u3001JMS\u95a2\u9023\u306e\u5909\u66f4\u70b9\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n# \u30b7\u30ea\u30fc\u30ba\n\n* \u7b2c\uff11\u56de\uff1a[Spring 4.3 DI\u30b3\u30f3\u30c6\u30ca\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9](http://qiita.com/kazuki43zoo/items/172d132ff8f4ba098888)\n* \u7b2c\uff12\u56de\uff1a[Spring 4.3 \u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9](http://qiita.com/kazuki43zoo/items/bc036b433444f5c33dc4)\n* \u7b2c\uff13\u56de\uff1a[Spring 4.3 \u30ad\u30e3\u30c3\u30b7\u30e5\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9](http://qiita.com/kazuki43zoo/items/43cea4b36822b58c0562)\n* \u7b2c\uff15\u56de\uff1a[Spring 4.3 Web\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9](http://qiita.com/kazuki43zoo/items/53d2ca25c174ff618331)\n* \u7b2c\uff16\u56de\uff1a[Spring 4.3 WebSocket\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9](http://qiita.com/kazuki43zoo/items/f2eac11f94e2afc7c964)\n* \u7b2c\uff17\u56de(\u6700\u7d42\u56de)\uff1a[Spring 4.3 \u30c6\u30b9\u30c8\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9](http://qiita.com/kazuki43zoo/items/6b6ecafd8e69a54e4803)\n\n# \u52d5\u4f5c\u691c\u8a3c\u74b0\u5883\n\n* Spring Framework 4.3.0.RELEASE\n* Spring Boot 1.4.0.BUILD-SNAPSHOT (2016/6/11\u6642\u70b9)\n* Apache ActiveMQ 5.13.3\n\n# JMS Improvements\n\n\u4eca\u56de\u306f\u3001JMS\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9\u3092\u307f\u3066\u3044\u304d\u307e\u3059\u3002\u516c\u5f0f\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3092\u898b\u308b\u9650\u308a\u3067\u306f\u3001\u6a5f\u80fd\u8ffd\u52a0\u306f\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n\n| No | JMS\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9 |\n| --- | --- |\n| 1 | `@SendTo`\u3092\u30af\u30e9\u30b9\u30ec\u30d9\u30eb\u306b\u4ed8\u4e0e\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002 |\n| 2 | `@JmsListener`\u3068`@JmsListeners`\u3092\u30e1\u30bf\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002 |\n\n# `@SendTo`\u3092\u30af\u30e9\u30b9\u30ec\u30d9\u30eb\u306b\u4ed8\u4e0e\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b :+1: \n\nSpring 4.3\u304b\u3089\u3001`@SendTo`\u3092\u30af\u30e9\u30b9\u30ec\u30d9\u30eb\u306b\u4ed8\u4e0e\u3059\u308b\u3053\u3068\u3067\u3001\u5fdc\u7b54\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u9001\u4fe1\u5148\u3092\u5404\u30e1\u30bd\u30c3\u30c9\u3067\u5171\u6709\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```java:\u30ea\u30b9\u30ca\u30fc\u5074\n@Component\n@SendTo(\"testReplyQueue\") // \u30af\u30e9\u30b9\u30ec\u30d9\u30eb\u306b\u6307\u5b9a\u3057\u3066\u3001\u5fdc\u7b54\u5148\u3092\u5404\u30e1\u30bd\u30c3\u30c9\u3067\u5171\u6709\uff01\uff01\npublic class JmsTestListeners {\n\n    private static final Logger logger = LoggerFactory.getLogger(JmsTestListeners.class);\n\n    @JmsListener(destination = \"testQueue\", selector = \"JMSPriority = 9\", concurrency = \"1-50\")\n    public String receiveHighQuality(String text) {\n        logger.info(text);\n        return \"HighQuality:\" + UUID.randomUUID().toString();\n    }\n\n    @JmsListener(destination = \"testQueue\", selector = \"JMSPriority < 9\", concurrency = \"1\")\n    public String receiveOtherQuality(String text) {\n        logger.info(text);\n        return \"OtherQuality:\" + UUID.randomUUID().toString();\n    }\n}\n```\n\n```java:\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\n@Autowired\nConnectionFactory connectionFactory;\n\n@Test\npublic void send() throws InterruptedException, JMSException {\n    JmsTemplate jmsTemplate = new JmsTemplate(connectionFactory);\n    jmsTemplate.setExplicitQosEnabled(true);\n    jmsTemplate.setPriority(9);\n\n    jmsTemplate.send(\"testQueue\", (s) -> s.createTextMessage(\"high\"));\n    TextMessage message = (TextMessage) jmsTemplate.receive(\"testReplyQueue\");\n    logger.info(message.getText());\n\n    jmsTemplate.setPriority(4);\n    jmsTemplate.send(\"testQueue\", (s) -> s.createTextMessage(\"low\"));\n    message = (TextMessage) jmsTemplate.receive(\"testReplyQueue\");\n    logger.info(message.getText());\n}\n```\n\n\u3061\u306a\u307f\u306b\u30fb\u30fb\u30fbSpring Boot\u304b\u3089\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b`spring-boot-starter-activemq`\u3092\u5229\u7528\u3059\u308c\u3070\u3001\u7279\u5225\u306aBean\b\u5b9a\u7fa9\u3092\u884c\u308f\u306a\u304f\u3066\u3082\u7d44\u307f\u8fbc\u307fActive MQ\u3092\u4f7f\u7528\u3057\u305fJMS\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```xml:pom.xml\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-activemq</artifactId>\n</dependency>\n```\n\n# `@JmsListener`\u3068`@JmsListeners`\u3092\u30e1\u30bf\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u308b :+1: \n\nSpring 4.3\u304b\u3089\u3001`@JmsListener`\u3068`@JmsListeners`\u3092\u30e1\u30bf\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u3069\u3046\u3044\u3046\u5207\u308a\u53e3\u3067\u30ab\u30b9\u30bf\u30e0\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u308b\u304b\u306f\u81ea\u7531\u3067\u3059\u304c\u3001\u3053\u3053\u3067\u306f\u3001\u512a\u5148\u5ea6\u304c\u9ad8\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u307f\u3092\u6271\u3046\u30ea\u30b9\u30ca\u30fc\u3067\u3042\u308b\u3053\u3068\u3092\u8868\u73fe\u3059\u308b\u30ab\u30b9\u30bf\u30e0\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\n```java:\u30ab\u30b9\u30bf\u30e0\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\npackage com.example;\n\nimport org.springframework.core.annotation.AliasFor;\nimport org.springframework.jms.annotation.JmsListener;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@JmsListener(destination = \"\", selector = \"JMSPriority = 9\", concurrency = \"1-50\")\n@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface HighQualityJmsListener {\n\n    @AliasFor(annotation = JmsListener.class)\n    String destination();\n\n}\n```\n\n```java:\u30ea\u30b9\u30ca\u30fc\u30e1\u30bd\u30c3\u30c9\n// @JmsListener(destination = \"\", selector = \"JMSPriority = 9\", concurrency = \"1-50\")\n@HighQualityJmsListener(destination = \"testQueue\") // \u30ab\u30b9\u30bf\u30e0\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u5229\u7528\npublic String receiveHighQuality(String text) {\n    logger.info(text);\n    return \"HighQuality:\" + UUID.randomUUID().toString();\n}\n```\n\n# \u307e\u3068\u3081\n\n\u4eca\u56de\u306f\u3001JMS\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\u5927\u304d\u306a\u5909\u66f4\u306f\u306a\u3044\u3088\u3046\u3067\u3059\u304c\u3001\u540c\u3058\u3088\u3046\u306a\u5b9a\u7fa9\u3092\u96c6\u7d04\u3067\u304d\u308b\u4ed5\u7d44\u307f\u306e\u5c0e\u5165\u306f\u3042\u308a\u304c\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u6b21\u56de\u306f\u3001\u3044\u3088\u3044\u3088\u300cWeb\u95a2\u9023\u306e\u4e3b\u306a\u5909\u66f4\u70b9\u300d\u3092\u7d39\u4ecb\u3059\u308b\u4e88\u5b9a\u3067\u3059\u3002\n\n# \u53c2\u8003\u30b5\u30a4\u30c8\n\n* http://docs.spring.io/spring/docs/4.3.0.RELEASE/spring-framework-reference/htmlsingle/\n\n"}