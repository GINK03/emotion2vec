{"context": " More than 1 year has passed since last update.\u8a66\u3057\u3066\u306a\u3044\u304c\u3001\u305f\u3076\u3093\u3053\u308c\u3067\u5408\u3063\u3066\u308b\u306f\u305a\u2026\u2026\n/**\n * @param string $uname\n * @param string $email\n * @param string $password\n * @param float $timezoneOffset\n * @param bool $userMailOk\n * @throws RuntimeException\n */\nfunction addUser($uname, $email, $password, $timezoneOffset, $userMailOk)\n{\n    /** @var XoopsMemberHandler $memberHandler */\n    $memberHandler = xoops_gethandler('member');\n    /** @var XoopsUser $user */\n    $user = $memberHandler->createUser();\n    $user->set('uname', $uname);\n    $user->set('email', $email);\n    $user->set('user_viewemail', 0);\n    $user->set('user_avatar', 'blank.gif');\n    $user->set('timezone_offset', $timezoneOffset);\n    $user->set('pass', md5($password));\n    $user->set('user_mailok', $userMailOk);\n    $user->set('actkey', substr(md5(uniqid(mt_rand(), 1)), 0, 8));\n    $user->set('user_regdate', time());\n    $user->set('level', 1);\n\n    if ($memberHandler->insertUser($user) === false) {\n        throw new RuntimeException(\"Failed to add user\");\n    }\n\n    if ($memberHandler->addUserToGroup(XOOPS_GROUP_USERS, $user->get('uid')) === false) {\n        throw new RuntimeException(\"Failed to add user to group\");\n    }\n}\n\n\n\n\u8a66\u3057\u3066\u306a\u3044\u304c\u3001\u305f\u3076\u3093\u3053\u308c\u3067\u5408\u3063\u3066\u308b\u306f\u305a\u2026\u2026\n\n```php\n/**\n * @param string $uname\n * @param string $email\n * @param string $password\n * @param float $timezoneOffset\n * @param bool $userMailOk\n * @throws RuntimeException\n */\nfunction addUser($uname, $email, $password, $timezoneOffset, $userMailOk)\n{\n\t/** @var XoopsMemberHandler $memberHandler */\n\t$memberHandler = xoops_gethandler('member');\n\t/** @var XoopsUser $user */\n\t$user = $memberHandler->createUser();\n\t$user->set('uname', $uname);\n\t$user->set('email', $email);\n\t$user->set('user_viewemail', 0);\n\t$user->set('user_avatar', 'blank.gif');\n\t$user->set('timezone_offset', $timezoneOffset);\n\t$user->set('pass', md5($password));\n\t$user->set('user_mailok', $userMailOk);\n\t$user->set('actkey', substr(md5(uniqid(mt_rand(), 1)), 0, 8));\n\t$user->set('user_regdate', time());\n\t$user->set('level', 1);\n\n\tif ($memberHandler->insertUser($user) === false) {\n\t\tthrow new RuntimeException(\"Failed to add user\");\n\t}\n\n\tif ($memberHandler->addUserToGroup(XOOPS_GROUP_USERS, $user->get('uid')) === false) {\n\t\tthrow new RuntimeException(\"Failed to add user to group\");\n\t}\n}\n\n```\n", "tags": ["XOOPS"]}