{"context": "\n\n\u306f\u3058\u3081\u306b\n\u70b9\u3068\u7dda\u5206\u306e\u8ddd\u96e2\u3092\u6c42\u3081\u308b\u306b\u3042\u3058\u3092\u3057\u3081\u3066\u3001\u4eca\u5ea6\u306f\u3001\u4e8c\u3064\u306e\u7dda\u5206\u304c\u30af\u30ed\u30b9\u3059\u308b\uff08\u4ea4\u308f\u308b\uff09\u304b\u3069\u3046\u304b\u3092\u6c42\u3081\u307e\u3059\u3002\n\u76f4\u7dda\uff08\u7121\u9650\u9060\uff09\u306e\u5834\u5408\u306b\u306f\u3001\u5e73\u884c\u3067\u306a\u3044\u9650\u308a\u3001\u3069\u3053\u304b\u3067\u5fc5\u305a\u4ea4\u308f\u308a\u307e\u3059\u304c\u3001\u7dda\u5206\u306e\u5834\u5408\u306b\u306f\u3001\u5fc5\u305a\u3057\u3082\u4ea4\u308f\u308a\u307e\u305b\u3093\u3002\n\n\u30af\u30ed\u30b9\u3059\u308b\n\u30af\u30ed\u30b9\u306e\u6761\u4ef6\u306f\u3001http://qiita.com/yellow_73/items/dc7c5e1ebe95625aee60#st_crosses \u3067\u793a\u3057\u3066\u3044\u307e\u3059\u3002\u7dda\u5206\u306b\u9650\u308b\u3068\u3001\u5171\u6709\u90e8\u5206\u304c\u3042\u3063\u3066\u3001\u5171\u6709\u90e8\u5206\u304c\u70b9\u3067\u3042\u308b\u5834\u5408\u306b\u30af\u30ed\u30b9\u3057\u307e\u3059\u3002\n\n\u6570\u5f0f\n\u7dda\u5206$s_1 = \\overline{(x_{11},y_{11}),(x_{12},y_{12})}$\u3068$s_2 = \\overline{(x_{21},y_{21}),(x_{22},y_{22})}$\u3068\u306e\u4ea4\u70b9\u306e\u6709\u7121\u3092\u8003\u3048\u307e\u3059\u3002\n$s_1$, $s_2$\u4e0a\u306e\u4efb\u610f\u306e\u70b9\u3092$t$\u3067\u8868\u3059\u3068\n\\begin{align}\np_1(t)&=( (t(x_{12}-x_{11})+x_{11}, t(y_{12}-y_{11})+y_{11} ) \\\\\np_2(t)&=( (t(x_{22}-x_{21})+x_{21}, t(y_{22}-y_{21})+y_{21} ) \\\\\n\\end{align}\n$${\\begin{align}\np_1(t)&=( (t(x_{12}-x_{11})+x_{11}, t(y_{12}-y_{11})+y_{11} ) \\\\\np_2(t)&=( (t(x_{22}-x_{21})+x_{21}, t(y_{22}-y_{21})+y_{21} ) \\\\\n\\end{align}\n}$$\n\u305f\u3060\u3057 $0 \\le t \\le 1$ \u3067\u3059\u3002\n$p_1(t_1)=p_2(t_2)$\u3068\u306a\u308b$t_1$, $t_2$\u3092\u6c42\u3081\u307e\u3059\u3002\nx\u306b\u3064\u3044\u3066\n$t_1(x_{12}-x_{11})+x_{11}=t_2(x_{22}-x_{21})+x_{21}$\n$t_2 = \\frac{t_1(x_{12}-x_{11})-(x_{21}-x_{11})}{x_{22}-x_{21}}$\n\u3053\u3053\u3067\u3001\n\\begin{align}\ndx_{1} &= x_{12}-x_{11} \\\\\ndx_{2} &= x_{22}-x_{21} \\\\\ndx_{a} &= x_{21}-x_{11}\n\\end{align}\n$${\\begin{align}\ndx_{1} &= x_{12}-x_{11} \\\\\ndx_{2} &= x_{22}-x_{21} \\\\\ndx_{a} &= x_{21}-x_{11}\n\\end{align}\n}$$\n\u3068\u305d\u308c\u305e\u308c\u304a\u304f\u3068\nt_2 = \\frac{t_1 \\cdot dx_{1}-dx_{a}}{dx_{2}}\n$${t_2 = \\frac{t_1 \\cdot dx_{1}-dx_{a}}{dx_{2}}\n}$$\ny\u306b\u3064\u3044\u3066\u3082\u540c\u3058\u3088\u3046\u306b\nt_2 = \\frac{t_1 \\cdot dy_{1}-dy_{a}}{dy_{2}}\n$${t_2 = \\frac{t_1 \\cdot dy_{1}-dy_{a}}{dy_{2}}\n}$$\n\u4e0a\u306e\u4e8c\u3064\u306e\u5f0f\u304b\u3089\u6b21\u306b\u793a\u3059\u7b49\u5f0f\u304c\u3067\u304d\u307e\u3059\u3002\n\\frac{t_1 \\cdot dx_{1}-dx_{a}}{dx_{2}} = \\frac{t_1 \\cdot dy_{1}-dy_{a}}{dy_{2}}\n$${\\frac{t_1 \\cdot dx_{1}-dx_{a}}{dx_{2}} = \\frac{t_1 \\cdot dy_{1}-dy_{a}}{dy_{2}}\n}$$\n\u3053\u308c\u3092\u89e3\u304f\u3068\nt_1 = \\frac{dx_{a} \\cdot dy_{2} - dy_{a} \\cdot dx_{2}}{dx_{1} \\cdot dy_{2} - dx_{2} \\cdot dy_{1}}\n$${t_1 = \\frac{dx_{a} \\cdot dy_{2} - dy_{a} \\cdot dx_{2}}{dx_{1} \\cdot dy_{2} - dx_{2} \\cdot dy_{1}}\n}$$\n\u3068\u306a\u308a\u307e\u3059\u3002\n\u540c\u3058\u3088\u3046\u306b\u3057\u3066x, y\u306e\u305d\u308c\u305e\u308c\u306b\u3064\u3044\u3066$t_1$\u306b\u3064\u3044\u3066\u89e3\u304d\u3001\u7b49\u5f0f\u306b\u3059\u308b\u3068\nt_2 = \\frac{dx_{1} \\cdot dy_{a} - dx_{a} \\cdot dy_{1}}{dx_{2} \\cdot dy_{1} - dx_{1} \\cdot dy_{2}}\n$${t_2 = \\frac{dx_{1} \\cdot dy_{a} - dx_{a} \\cdot dy_{1}}{dx_{2} \\cdot dy_{1} - dx_{1} \\cdot dy_{2}}\n}$$\n$0 \\le t_1 \\le 1$ \u304b\u3064 $0 \\le t_2 \\le 1$ \u306a\u3089\u3001\u7dda\u5206\u4e0a\u3067\u4ea4\u308f\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u5206\u6bcd\u304c\u30bc\u30ed\u306e\u5834\u5408\n$t_1$, $t_2$\u306e\u4e21\u65b9\u3067\u5206\u6bcd\u304c\u30bc\u30ed\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\ndx_{2} \\cdot dy_{1} = dx_{1} \\cdot dy_{2}\n$${dx_{2} \\cdot dy_{1} = dx_{1} \\cdot dy_{2}\n}$$\n\u3068\u306a\u308b\u3068\u304d\u3067\u3059\u3002\n\\frac{dy_{1}}{dx_{1}}=\\frac{dy_{2}}{dx_{2}}\n$${\\frac{dy_{1}}{dx_{1}}=\\frac{dy_{2}}{dx_{2}}\n}$$\n\u3068\u5909\u5f62\u3067\u304d($dx_{1} \\ne 0$, $dx_{2} \\ne 0$\u306e\u3068\u304d)\u3001\u50be\u304d\u304c\u540c\u3058\u3067\u3042\u308b\u5834\u5408\u3067\u3042\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\u3053\u306e\u5834\u5408\u3001\u89e3\u4e0d\u80fd\uff08\u4ea4\u70b9\u304c\u306a\u3044\uff09\u307e\u305f\u306f\u89e3\u4e0d\u5b9a\uff08\u3044\u305f\u308b\u3068\u3053\u308d\u306b\u5171\u6709\u70b9\u304c\u3042\u308b\uff09\u3068\u306a\u308a\u307e\u3059\u3002\n\u30af\u30ed\u30b9\u306b\u9650\u5b9a\u3057\u305f\u5834\u5408\u306f\u3001\u89e3\u4e0d\u80fd\u3001\u89e3\u4e0d\u5b9a\u306e\u3069\u3061\u3089\u306b\u3057\u3066\u3082\u30af\u30ed\u30b9\u3057\u3066\u3044\u307e\u305b\u3093\uff08\u89e3\u4e0d\u5b9a\u306e\u5834\u5408\u306f\u30a4\u30f3\u30bf\u30bb\u30af\u30c8\u3059\u308b\u3053\u3068\u306b\u306f\u306a\u308a\u307e\u3059\uff09\u3002\n\n\u8ffd\u52a0: \u5206\u6bcd\u3092\u305d\u308d\u3048\u308b\n\\begin{align}\nt_1 &= \\frac{dx_{a} \\cdot dy_{2} - dy_{a} \\cdot dx_{2}}{dx_{1} \\cdot dy_{2} - dx_{2} \\cdot dy_{1}} \\\\\nt_2 &= \\frac{dx_{1} \\cdot dy_{a} - dx_{a} \\cdot dy_{1}}{dx_{2} \\cdot dy_{1} - dx_{1} \\cdot dy_{2}}\n\\end{align}\n$${\\begin{align}\nt_1 &= \\frac{dx_{a} \\cdot dy_{2} - dy_{a} \\cdot dx_{2}}{dx_{1} \\cdot dy_{2} - dx_{2} \\cdot dy_{1}} \\\\\nt_2 &= \\frac{dx_{1} \\cdot dy_{a} - dx_{a} \\cdot dy_{1}}{dx_{2} \\cdot dy_{1} - dx_{1} \\cdot dy_{2}}\n\\end{align}\n}$$\n\u3053\u308c\u306e\u5206\u6bcd\u3092\u305d\u308d\u3048\u3066\u3001\u5272\u308a\u7b97\u3092\u6e1b\u3089\u3057\u307e\u3059\u3002$t_{2}$\u306e\u53f3\u8fba\u306e\u5206\u6bcd\u3068\u5206\u5b50\u306e\u4e21\u65b9\u306b\u3064\u3044\u3066$-1$\u3092\u304b\u3051\u308b\u3001\u3064\u307e\u308a\u6b63\u8ca0\u53cd\u8ee2\u3057\u307e\u3059\u3002\u3064\u3044\u3067\u306b\u3001\u5206\u6bcd\u7b2c2\u9805\u306e$dy_{a}$\u3068$dx_{1}$\u306e\u9806\u5e8f\u3082\u6574\u7406\u3057\u307e\u3059\u3002\n\\begin{align}\nt_2 &= \\frac{dx_{a} \\cdot dy_{1} - dy_{a} \\cdot dx_{1}}{dx_{1} \\cdot dy_{2} - dx_{2} \\cdot dy_{1}}\n\\end{align}\n$${\\begin{align}\nt_2 &= \\frac{dx_{a} \\cdot dy_{1} - dy_{a} \\cdot dx_{1}}{dx_{1} \\cdot dy_{2} - dx_{2} \\cdot dy_{1}}\n\\end{align}\n}$$\n\n\u30b3\u30fc\u30c9\nfunction crosses_ss(s1, s2) {\n  var p11 = s1[0];\n  var p12 = s1[1];\n  var p21 = s2[0];\n  var p22 = s2[1];\n  var x11 = p11[0];\n  var y11 = p11[1];\n  var x12 = p12[0];\n  var y12 = p12[1];\n  var x21 = p21[0];\n  var y21 = p21[1];\n  var x22 = p22[0];\n  var y22 = p22[1];\n  var dx1 = x12 - x11;\n  var dy1 = y12 - y11;\n  var dx2 = x22 - x21;\n  var dy2 = y22 - y21;\n  var dxa = x21 - x11;\n  var dya = y21 - y11;\n  var denom = dx1*dy2-dx2*dy1;\n\n  var t1 = (dxa*dy2-dya*dx2)/denom;\n  var t2 = (dxa*dy1-dya*dx1)/denom;\n\n  return t1 >= 0 && t1 <= 1 && t2 >= 0 && t2 <= 1;\n}\n\nalert(crosses_ss([[10,10],[20,20]], [[20,10],[10,20]]));\nalert(crosses_ss([[10,10],[20,20]], [[0,0],[5,0]]));\nalert(crosses_ss([[10,10],[20,20]], [[110,110],[120,120]]));\n\n# \u306f\u3058\u3081\u306b\n\n[\u70b9\u3068\u7dda\u5206\u306e\u8ddd\u96e2\u3092\u6c42\u3081\u308b](http://qiita.com/yellow_73/items/bcd4e150e7caa0210ee6)\u306b\u3042\u3058\u3092\u3057\u3081\u3066\u3001\u4eca\u5ea6\u306f\u3001\u4e8c\u3064\u306e\u7dda\u5206\u304c\u30af\u30ed\u30b9\u3059\u308b\uff08\u4ea4\u308f\u308b\uff09\u304b\u3069\u3046\u304b\u3092\u6c42\u3081\u307e\u3059\u3002\n\n\u76f4\u7dda\uff08\u7121\u9650\u9060\uff09\u306e\u5834\u5408\u306b\u306f\u3001\u5e73\u884c\u3067\u306a\u3044\u9650\u308a\u3001\u3069\u3053\u304b\u3067\u5fc5\u305a\u4ea4\u308f\u308a\u307e\u3059\u304c\u3001\u7dda\u5206\u306e\u5834\u5408\u306b\u306f\u3001\u5fc5\u305a\u3057\u3082\u4ea4\u308f\u308a\u307e\u305b\u3093\u3002\n\n## \u30af\u30ed\u30b9\u3059\u308b\n\n\u30af\u30ed\u30b9\u306e\u6761\u4ef6\u306f\u3001http://qiita.com/yellow_73/items/dc7c5e1ebe95625aee60#st_crosses \u3067\u793a\u3057\u3066\u3044\u307e\u3059\u3002\u7dda\u5206\u306b\u9650\u308b\u3068\u3001\u5171\u6709\u90e8\u5206\u304c\u3042\u3063\u3066\u3001\u5171\u6709\u90e8\u5206\u304c\u70b9\u3067\u3042\u308b\u5834\u5408\u306b\u30af\u30ed\u30b9\u3057\u307e\u3059\u3002\n\n# \u6570\u5f0f\n\n\u7dda\u5206$s_1 = \\overline{(x_{11},y_{11}),(x_{12},y_{12})}$\u3068$s_2 = \\overline{(x_{21},y_{21}),(x_{22},y_{22})}$\u3068\u306e\u4ea4\u70b9\u306e\u6709\u7121\u3092\u8003\u3048\u307e\u3059\u3002\n\n$s_1$, $s_2$\u4e0a\u306e\u4efb\u610f\u306e\u70b9\u3092$t$\u3067\u8868\u3059\u3068\n\n```math\n\\begin{align}\np_1(t)&=( (t(x_{12}-x_{11})+x_{11}, t(y_{12}-y_{11})+y_{11} ) \\\\\np_2(t)&=( (t(x_{22}-x_{21})+x_{21}, t(y_{22}-y_{21})+y_{21} ) \\\\\n\\end{align}\n```\n\n\u305f\u3060\u3057 $0 \\le t \\le 1$ \u3067\u3059\u3002\n\n$p_1(t_1)=p_2(t_2)$\u3068\u306a\u308b$t_1$, $t_2$\u3092\u6c42\u3081\u307e\u3059\u3002\n\nx\u306b\u3064\u3044\u3066\n$t_1(x_{12}-x_{11})+x_{11}=t_2(x_{22}-x_{21})+x_{21}$\n$t_2 = \\frac{t_1(x_{12}-x_{11})-(x_{21}-x_{11})}{x_{22}-x_{21}}$\n\n\u3053\u3053\u3067\u3001\n\n```math\n\\begin{align}\ndx_{1} &= x_{12}-x_{11} \\\\\ndx_{2} &= x_{22}-x_{21} \\\\\ndx_{a} &= x_{21}-x_{11}\n\\end{align}\n```\n\n\u3068\u305d\u308c\u305e\u308c\u304a\u304f\u3068\n\n```math\nt_2 = \\frac{t_1 \\cdot dx_{1}-dx_{a}}{dx_{2}}\n```\n\ny\u306b\u3064\u3044\u3066\u3082\u540c\u3058\u3088\u3046\u306b\n\n```math\nt_2 = \\frac{t_1 \\cdot dy_{1}-dy_{a}}{dy_{2}}\n```\n\n\u4e0a\u306e\u4e8c\u3064\u306e\u5f0f\u304b\u3089\u6b21\u306b\u793a\u3059\u7b49\u5f0f\u304c\u3067\u304d\u307e\u3059\u3002\n\n```math\n\\frac{t_1 \\cdot dx_{1}-dx_{a}}{dx_{2}} = \\frac{t_1 \\cdot dy_{1}-dy_{a}}{dy_{2}}\n```\n\n\u3053\u308c\u3092\u89e3\u304f\u3068\n\n```math\nt_1 = \\frac{dx_{a} \\cdot dy_{2} - dy_{a} \\cdot dx_{2}}{dx_{1} \\cdot dy_{2} - dx_{2} \\cdot dy_{1}}\n```\n\n\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u540c\u3058\u3088\u3046\u306b\u3057\u3066x, y\u306e\u305d\u308c\u305e\u308c\u306b\u3064\u3044\u3066$t_1$\u306b\u3064\u3044\u3066\u89e3\u304d\u3001\u7b49\u5f0f\u306b\u3059\u308b\u3068\n\n```math\nt_2 = \\frac{dx_{1} \\cdot dy_{a} - dx_{a} \\cdot dy_{1}}{dx_{2} \\cdot dy_{1} - dx_{1} \\cdot dy_{2}}\n```\n\n$0 \\le t_1 \\le 1$ \u304b\u3064 $0 \\le t_2 \\le 1$ \u306a\u3089\u3001\u7dda\u5206\u4e0a\u3067\u4ea4\u308f\u3063\u3066\u3044\u307e\u3059\u3002\n\n# \u5206\u6bcd\u304c\u30bc\u30ed\u306e\u5834\u5408\n\n$t_1$, $t_2$\u306e\u4e21\u65b9\u3067\u5206\u6bcd\u304c\u30bc\u30ed\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\n```math\ndx_{2} \\cdot dy_{1} = dx_{1} \\cdot dy_{2}\n```\n\n\u3068\u306a\u308b\u3068\u304d\u3067\u3059\u3002\n\n```math\n\\frac{dy_{1}}{dx_{1}}=\\frac{dy_{2}}{dx_{2}}\n```\n\n\u3068\u5909\u5f62\u3067\u304d($dx_{1} \\ne 0$, $dx_{2} \\ne 0$\u306e\u3068\u304d)\u3001\u50be\u304d\u304c\u540c\u3058\u3067\u3042\u308b\u5834\u5408\u3067\u3042\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\n\u3053\u306e\u5834\u5408\u3001\u89e3\u4e0d\u80fd\uff08\u4ea4\u70b9\u304c\u306a\u3044\uff09\u307e\u305f\u306f\u89e3\u4e0d\u5b9a\uff08\u3044\u305f\u308b\u3068\u3053\u308d\u306b\u5171\u6709\u70b9\u304c\u3042\u308b\uff09\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u30af\u30ed\u30b9\u306b\u9650\u5b9a\u3057\u305f\u5834\u5408\u306f\u3001\u89e3\u4e0d\u80fd\u3001\u89e3\u4e0d\u5b9a\u306e\u3069\u3061\u3089\u306b\u3057\u3066\u3082\u30af\u30ed\u30b9\u3057\u3066\u3044\u307e\u305b\u3093\uff08\u89e3\u4e0d\u5b9a\u306e\u5834\u5408\u306f\u30a4\u30f3\u30bf\u30bb\u30af\u30c8\u3059\u308b\u3053\u3068\u306b\u306f\u306a\u308a\u307e\u3059\uff09\u3002\n\n# \u8ffd\u52a0: \u5206\u6bcd\u3092\u305d\u308d\u3048\u308b\n\n```math\n\\begin{align}\nt_1 &= \\frac{dx_{a} \\cdot dy_{2} - dy_{a} \\cdot dx_{2}}{dx_{1} \\cdot dy_{2} - dx_{2} \\cdot dy_{1}} \\\\\nt_2 &= \\frac{dx_{1} \\cdot dy_{a} - dx_{a} \\cdot dy_{1}}{dx_{2} \\cdot dy_{1} - dx_{1} \\cdot dy_{2}}\n\\end{align}\n```\n\u3053\u308c\u306e\u5206\u6bcd\u3092\u305d\u308d\u3048\u3066\u3001\u5272\u308a\u7b97\u3092\u6e1b\u3089\u3057\u307e\u3059\u3002$t_{2}$\u306e\u53f3\u8fba\u306e\u5206\u6bcd\u3068\u5206\u5b50\u306e\u4e21\u65b9\u306b\u3064\u3044\u3066$-1$\u3092\u304b\u3051\u308b\u3001\u3064\u307e\u308a\u6b63\u8ca0\u53cd\u8ee2\u3057\u307e\u3059\u3002\u3064\u3044\u3067\u306b\u3001\u5206\u6bcd\u7b2c2\u9805\u306e$dy_{a}$\u3068$dx_{1}$\u306e\u9806\u5e8f\u3082\u6574\u7406\u3057\u307e\u3059\u3002\n\n```math\n\\begin{align}\nt_2 &= \\frac{dx_{a} \\cdot dy_{1} - dy_{a} \\cdot dx_{1}}{dx_{1} \\cdot dy_{2} - dx_{2} \\cdot dy_{1}}\n\\end{align}\n```\n\n# \u30b3\u30fc\u30c9\n\n```javascript\nfunction crosses_ss(s1, s2) {\n  var p11 = s1[0];\n  var p12 = s1[1];\n  var p21 = s2[0];\n  var p22 = s2[1];\n  var x11 = p11[0];\n  var y11 = p11[1];\n  var x12 = p12[0];\n  var y12 = p12[1];\n  var x21 = p21[0];\n  var y21 = p21[1];\n  var x22 = p22[0];\n  var y22 = p22[1];\n  var dx1 = x12 - x11;\n  var dy1 = y12 - y11;\n  var dx2 = x22 - x21;\n  var dy2 = y22 - y21;\n  var dxa = x21 - x11;\n  var dya = y21 - y11;\n  var denom = dx1*dy2-dx2*dy1;\n\n  var t1 = (dxa*dy2-dya*dx2)/denom;\n  var t2 = (dxa*dy1-dya*dx1)/denom;\n\n  return t1 >= 0 && t1 <= 1 && t2 >= 0 && t2 <= 1;\n}\n\nalert(crosses_ss([[10,10],[20,20]], [[20,10],[10,20]]));\nalert(crosses_ss([[10,10],[20,20]], [[0,0],[5,0]]));\nalert(crosses_ss([[10,10],[20,20]], [[110,110],[120,120]]));\n```\n", "tags": ["JavaScript", "\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0"]}