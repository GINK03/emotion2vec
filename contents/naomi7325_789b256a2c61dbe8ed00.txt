{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nGoogle\u304c\u516c\u958b\u3057\u3066\u3044\u308b\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u4eba\u5de5\u77e5\u80fd\u30e9\u30a4\u30d6\u30e9\u30eaTensorFlow\u3092Ubuntu\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3068\u304d\u306e\u8a18\u9332\u3002\nCUDA Enable\u3067CIFAR-10\u306e\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u3092\u52d5\u304b\u3059\u307e\u3067\u3002\n\u516c\u5f0f: http://www.tensorflow.org\nGit: https://tensorflow.googlesource.com/tensorflow\n\n\u30de\u30b7\u30f3\u69cb\u6210\n\nOS: Ubuntu 14.04 LTS (64bit)\nShell: Ubuntu\u30c7\u30d5\u30a9\u30eb\u30c8\u306eBash\nPython 2.7.6\n\n\nCPU: i7-3770K CPU @ 3.50GHz\nDDR3 32GB (8GB x 4)\nMother board: ASUSTeK P8H77-V\nGPU: Nvidia GTX970 (ASUSTek)\nStorage: SSD 128GB (DSSDA-120G-J25C)\n\n\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u624b\u9806\n\u57fa\u672c\u7684\u306b\u306f\u516c\u5f0f\u901a\u308a\u3060\u304c\u81ea\u5206\u304c\u884c\u3063\u305f\u9806\u756a\u306b\u8a18\u9332\u3057\u3066\u304a\u304f\u3002\n(1). Git\u304b\u3089\u30bd\u30fc\u30b9\u30c4\u30ea\u30fc\u306e\u53d6\u5f97\n#Git\u304c\u5165\u3063\u3066\u306a\u3044\u4eba\u306e\u307f\n$ sudo apt-get install git\n\n$ git clone --recurse-submodules https://github.com/tensorflow/tensorflow\n\n(2). Cuda Toolkit 7.0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \n7.5\u306f\u4ee5\u964d\u306e\u624b\u9806\u3067\u8a70\u307e\u3063\u305f\u306e\u30677.0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4e0b\u8a18\u304b\u3089Ubuntu 14.04 DEB (10KB) \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u30fc\u7248(cuda-repo-ubuntu1404-7-0-local_7.0-28_amd64.deb)\u3092DL&\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \nhttps://developer.nvidia.com/cuda-toolkit-70\n$ sudo dpkg -i cuda-repo-ubuntu1404-7-0-local_7.0-28_amd64.deb\n$ sudo apt-get update\n$ sudo apt-get install cuda-7-0 \n\n(3). CUDNN Toolkit 6.5\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \nCUDNN\u306eDL\u306fNvidia\u306e\u30b5\u30a4\u30c8\u3067\u767b\u9332\u3059\u308b\u5fc5\u8981\u3042\u308a(\u3057\u304b\u3082\u767b\u9332\u5b8c\u4e86\u307e\u30672,3\u65e5\u5f85\u305f\u3055\u308c\u305f\u3088\u3046\u306a\u6c17\u304c\u3059\u308b)\n\u4e0b\u8a18\u304b\u3089 cuDNN v2 Library for Linux (cudnn-6.5-linux-x64-v2.tgz)\u3092DL&\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \nhttps://developer.nvidia.com/rdp/cudnn-archive\n$ tar xvzf cudnn-6.5-linux-x64-v2.tgz \n$ sudo cp cudnn-6.5-linux-x64-v2/cudnn.h /usr/local/cuda/include\n$ sudo cp cudnn-6.5-linux-x64-v2/libcudnn* /usr/local/cuda/lib64\n\n\u3053\u3053\u3067\u30ea\u30d6\u30fc\u30c8\n(4). VirtualEnv\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u30b3\u30f3\u30c6\u30ca\u4f5c\u6210\n#\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo apt-get install python-pip python-dev python-virtualenv\n\n#\u30b3\u30f3\u30c6\u30ca\u4f5c\u6210\n$ virtualenv --system-site-packages ~/tensorflow-GPU\n\n~/tensorflow-GPU/bin/activate \u3092\u7de8\u96c6\n\u672b\u5c3e\u306b\u4e0b\u8a182\u884c\u3092\u8ffd\u52a0\u3059\u308b\nexport LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH:/usr/local/cuda/lib64\"\nexport CUDA_HOME=/usr/local/cuda\n\n(5). TensorFlow \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \nCUDA\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u30d1\u30b9\u304c\u5909\u308f\u3063\u305f\u5834\u5408\u306b\u4e00\u5ea6\u3060\u3051\u4e0b\u8a18\u3092\u5b9f\u52b9\n#(1)\u3067\u53d6\u5f97\u3057\u305f\u30bd\u30fc\u30b9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\n$ cd ~/tensorflow/tensorflow\n\n#\u5b9f\u52b9\u6a29\u9650\u4ed8\u4e0e\n$ chmod x+ ./configure\n\n$ ./configure\nDo you wish to bulid TensorFlow with GPU support? [y/n] y\nGPU support will be enabled for TensorFlow\n\nPlease specify the location where CUDA 7.0 toolkit is installed. Refer to\nREADME.md for more details. [default is: /usr/local/cuda]: /usr/local/cuda\n\nPlease specify the location where CUDNN 6.5 V2 library is installed. Refer to\nREADME.md for more details. [default is: /usr/local/cuda]: /usr/local/cuda\n\nSetting up Cuda include\nSetting up Cuda lib64\nSetting up Cuda bin\nSetting up Cuda nvvm\nConfiguration finished\n\n\u30b3\u30f3\u30c6\u30ca\u306e\u6709\u52b9\u5316\n\u4eca\u5f8c\u3001\u65b0\u3057\u3044\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u7acb\u3061\u4e0a\u3052\u3066tensorflow-GPU\u30b3\u30f3\u30c6\u30ca\u3067\u4f5c\u696d\u3059\u308b\u5834\u5408\u306f\u307e\u305a\u4e0b\u8a18\u3067\u6709\u52b9\u5316\u3059\u308b\n$ cd ~/tensorflow-GPU\n$ source bin/activate\n\nGPU\u7248 TensorFlow \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n(tensorflow-GPU) $ pip install https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.5.0-cp27-none-linux_x86_64.whl\n\n\n\u52d5\u304b\u3057\u3066\u307f\u308b\n(1). MNIST\nMNIST\u3092\u52d5\u304b\u305d\u3046\u3057\u305f\u3068\u3053\u308d\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u306e\u3067(2015/11/15\u6642\u70b9)\u3001\u4e0b\u8a18\u306e\u5909\u66f4\u3092\u884c\u3046\n(tensorflow-GPU) $ cd ~/tensorflow/tensorflow/g3doc/tutorials/mnist/\n#\u7f6e\u304d\u63db\u3048\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u30ea\u30cd\u30fc\u30e0\n(tensorflow-GPU) $ mv mnist.py mnist_org.py\n# \u30ec\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u65e7\u7248\u3092\u53d6\u5f97\n(tensorflow-GPU) $ wget https://raw.githubusercontent.com/tensorflow/tensorflow/1d76583411038767f673a0c96174c80eaf9ff42f/tensorflow/g3doc/tutorials/mnist/mnist.py\n\nfully_connected_feed.py \u306e 23,24\u884c\u76ee\u3092\u6b21\u306e\u3088\u3046\u306b\u3059\u308b\n#from tensorflow.g3doc.tutorials.mnist import input_data\n#from tensorflow.g3doc.tutorials.mnist import mnist\nimport input_data\nimport mnist\n\n\u52d5\u304b\u3057\u3066\u307f\u308b\n(tensorflow-GPU) $ python fully_connected_feed.py\nExtracting data/train-images-idx3-ubyte.gz\nExtracting data/train-labels-idx1-ubyte.gz\nExtracting data/t10k-images-idx3-ubyte.gz\nExtracting data/t10k-labels-idx1-ubyte.gz\nI tensorflow/core/common_runtime/local_device.cc:25] Local device intra op parallelism threads: 8\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:888] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:88] Found device 0 with properties: \nname: GeForce GTX 970\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.253\npciBusID 0000:01:00.0\nTotal memory: 4.00GiB\nFree memory: 3.22GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:112] DMA: 0 \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:122] 0:   Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:643] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 970, pci bus id: 0000:01:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:47] Setting region size to 3144105984\nI tensorflow/core/common_runtime/local_session.cc:45] Local session inter op parallelism threads: 8\nStep 0: loss = 2.34 (0.300 sec)\nStep 100: loss = 2.13 (0.002 sec)\nStep 200: loss = 1.90 (0.002 sec)\nStep 300: loss = 1.52 (0.002 sec)\nStep 400: loss = 1.22 (0.002 sec)\nStep 500: loss = 0.84 (0.002 sec)\nStep 600: loss = 0.82 (0.002 sec)\nStep 700: loss = 0.68 (0.002 sec)\nStep 800: loss = 0.71 (0.002 sec)\nStep 900: loss = 0.51 (0.002 sec)\nTraining Data Eval:\n  Num examples: 55000  Num correct: 47651  Precision @ 1: 0.8664\nValidation Data Eval:\n  Num examples: 5000  Num correct: 4363  Precision @ 1: 0.8726\nTest Data Eval:\n  Num examples: 10000  Num correct: 8745  Precision @ 1: 0.8745\nStep 1000: loss = 0.46 (0.002 sec)\nStep 1100: loss = 0.44 (0.038 sec)\nStep 1200: loss = 0.52 (0.002 sec)\nStep 1300: loss = 0.43 (0.002 sec)\nStep 1400: loss = 0.64 (0.002 sec)\nStep 1500: loss = 0.34 (0.002 sec)\nStep 1600: loss = 0.41 (0.002 sec)\nStep 1700: loss = 0.34 (0.002 sec)\nStep 1800: loss = 0.30 (0.002 sec)\nStep 1900: loss = 0.35 (0.002 sec)\nTraining Data Eval:\n  Num examples: 55000  Num correct: 49286  Precision @ 1: 0.8961\nValidation Data Eval:\n  Num examples: 5000  Num correct: 4529  Precision @ 1: 0.9058\nTest Data Eval:\n  Num examples: 10000  Num correct: 9012  Precision @ 1: 0.9012\n\n(2). CIFAR-10\n\u52d5\u304b\u3057\u3066\u307f\u308b\n(tensorflow-GPU) $ cd ~/tensorflow/tensorflow/models/image/cifar10/\n(tensorflow-GPU) $ python cifar10_train.py\n>> Downloading cifar-10-binary.tar.gz 100.0%\nSuccesfully downloaded cifar-10-binary.tar.gz 170052171 bytes.\nFilling queue with 20000 CIFAR images before starting to train. This will take a few minutes.\nI tensorflow/core/common_runtime/local_device.cc:25] Local device intra op parallelism threads: 8\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:888] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:88] Found device 0 with properties: \nname: GeForce GTX 970\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.253\npciBusID 0000:01:00.0\nTotal memory: 4.00GiB\nFree memory: 3.20GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:112] DMA: 0 \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:122] 0:   Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:643] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 970, pci bus id: 0000:01:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:47] Setting region size to 3120906240\nI tensorflow/core/common_runtime/local_session.cc:45] Local session inter op parallelism threads: 8\n2015-11-17 02:14:46.611756: step 0, loss = 4.68 (6.9 examples/sec; 18.481 sec/batch)\n2015-11-17 02:14:49.068440: step 10, loss = 4.65 (562.6 examples/sec; 0.228 sec/batch)\n2015-11-17 02:14:51.224980: step 20, loss = 4.65 (617.0 examples/sec; 0.207 sec/batch)\n2015-11-17 02:14:53.375918: step 30, loss = 4.62 (664.1 examples/sec; 0.193 sec/batch)\n2015-11-17 02:14:55.513463: step 40, loss = 4.60 (610.3 examples/sec; 0.210 sec/batch)\n2015-11-17 02:14:57.696431: step 50, loss = 4.58 (615.1 examples/sec; 0.208 sec/batch)\n2015-11-17 02:14:59.877955: step 60, loss = 4.57 (567.3 examples/sec; 0.226 sec/batch)\n2015-11-17 02:15:02.101614: step 70, loss = 4.55 (621.1 examples/sec; 0.206 sec/batch)\n2015-11-17 02:15:04.593141: step 80, loss = 4.52 (490.3 examples/sec; 0.261 sec/batch)\n2015-11-17 02:15:06.983452: step 90, loss = 4.52 (641.4 examples/sec; 0.200 sec/batch)\n2015-11-17 02:15:09.232584: step 100, loss = 4.50 (563.8 examples/sec; 0.227 sec/batch)\n2015-11-17 02:15:11.783752: step 110, loss = 4.48 (538.0 examples/sec; 0.238 sec/batch)\n2015-11-17 02:15:13.997070: step 120, loss = 4.46 (589.4 examples/sec; 0.217 sec/batch)\n2015-11-17 02:15:16.458028: step 130, loss = 4.45 (467.8 examples/sec; 0.274 sec/batch)\n2015-11-17 02:15:19.128071: step 140, loss = 4.42 (581.1 examples/sec; 0.220 sec/batch)\n2015-11-17 02:15:21.491835: step 150, loss = 4.40 (568.2 examples/sec; 0.225 sec/batch)\n2015-11-17 02:15:23.962043: step 160, loss = 4.39 (635.4 examples/sec; 0.201 sec/batch)\n...\n\n\u3061\u306a\u307f\u306bCPU\u7248\u3067\u5b9f\u884c\u3059\u308b\u3068\u4e00\u56de\u306ebatch\u306b\u304b\u304b\u308b\u6642\u9593\u304c\u500d\u304f\u3089\u3044\u304b\u304b\u308b\u306e\u3067GPU\u3092\u4f7f\u3046\u3053\u3068\u3067\u52a0\u901f\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3060\n\nGPU\u7528\u306b tutorials_example_trainer \u3092\u30d3\u30eb\u30c9\u3059\u308b\n\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u3067\u306f\u306a\u304f\u901a\u5e38\u306e\u30b7\u30a7\u30eb\u3067 bazel \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# \u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo add-apt-repository ppa:webupd8team/java\n$ sudo apt-get update\n$ sudo apt-get install oracle-java8-installer\n$ sudo apt-get install pkg-config zip g++ zlib1g-dev unzip\n\n# bazel \u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u30fc\u3092DL\n$ wget https://github.com/bazelbuild/bazel/releases/download/0.1.1/bazel-0.1.1-installer-linux-x86_64.sh\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ chmod +x bazel-0.1.1-installer-linux-x86_64.sh \n$ ./bazel-0.1.1-installer-linux-x86_64.sh --user\n\n~/.bashrc \u3092\u7de8\u96c6\u3057\u3066\u672b\u5c3e\u306b\u4e0b\u8a18\u3092\u8ffd\u52a0\nexport PATH=\"$PATH:$HOME/bin\"\n\n\u4e0b\u8a18\u306e\u30d1\u30b9\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\n~/tensorflow/third_party/gpus/cuda/cuda.config\n\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u8eab\u306f\u4e0b\u8a18\nCUDA_TOOLKIT_PATH=\"/usr/local/cuda\"\nCUDNN_INSTALL_PATH=\"/usr/local/cuda\"\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u308b\u3068\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af /usr/local/cuda (=>/usr/local/cuda-7.0)\u304c\u3042\u308b\u306f\u305a\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d1\u30b9\u3092\u5909\u3048\u3066\u308b\u5834\u5408\u306f\u305d\u308c\u306b\u3042\u308f\u305b\u3066\u5909\u66f4\n\u30d3\u30eb\u30c9\u524d\u306b ./configure \u3092\u5b9f\u884c\u3057\u3066\u304a\u304f\n$ cd ~/tensorflow-GPU\n$ source bin/activate\n(tensorflow-GPU) $ cd ~/tensorflow\n(tensorflow-GPU) $ ./configure\nDo you wish to bulid TensorFlow with GPU support? [y/n] y\nGPU support will be enabled for TensorFlow\n\nPlease specify the location where CUDA 7.0 toolkit is installed. Refer to\nREADME.md for more details. [default is: /usr/local/cuda]: /usr/local/cuda\n\nPlease specify the location where CUDNN 6.5 V2 library is installed. Refer to\nREADME.md for more details. [default is: /usr/local/cuda]: /usr/local/cuda\n\nSetting up Cuda include\nSetting up Cuda lib64\nSetting up Cuda bin\nSetting up Cuda nvvm\nConfiguration finished\n\n\u30d3\u30eb\u30c9\n(tensorflow-GPU) $ bazel build -c opt --config=cuda tensorflow/cc:tutorials_example_trainer\n\n\u30d3\u30eb\u30c9\u5b8c\u4e86\u307e\u306710\u5206\u307b\u3069\u304b\u304b\u3063\u305f\n# \u6982\u8981\nGoogle\u304c\u516c\u958b\u3057\u3066\u3044\u308b\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u4eba\u5de5\u77e5\u80fd\u30e9\u30a4\u30d6\u30e9\u30eaTensorFlow\u3092Ubuntu\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3068\u304d\u306e\u8a18\u9332\u3002\nCUDA Enable\u3067CIFAR-10\u306e\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u3092\u52d5\u304b\u3059\u307e\u3067\u3002\n\n\u516c\u5f0f: http://www.tensorflow.org\nGit: https://tensorflow.googlesource.com/tensorflow\n\n# \u30de\u30b7\u30f3\u69cb\u6210\n* OS: Ubuntu 14.04 LTS (64bit)\n* Shell: Ubuntu\u30c7\u30d5\u30a9\u30eb\u30c8\u306eBash\n* Python 2.7.6\n<br><br>\n* CPU: i7-3770K CPU @ 3.50GHz\n* DDR3 32GB (8GB x 4)\n* Mother board: ASUSTeK P8H77-V\n* GPU: Nvidia GTX970 (ASUSTek)\n* Storage: SSD 128GB (DSSDA-120G-J25C)\n\n# \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u624b\u9806\n\u57fa\u672c\u7684\u306b\u306f[\u516c\u5f0f](http://www.tensorflow.org/get_started)\u901a\u308a\u3060\u304c\u81ea\u5206\u304c\u884c\u3063\u305f\u9806\u756a\u306b\u8a18\u9332\u3057\u3066\u304a\u304f\u3002\n\n(1). Git\u304b\u3089\u30bd\u30fc\u30b9\u30c4\u30ea\u30fc\u306e\u53d6\u5f97\n\n```\n#Git\u304c\u5165\u3063\u3066\u306a\u3044\u4eba\u306e\u307f\n$ sudo apt-get install git\n\n$ git clone --recurse-submodules https://github.com/tensorflow/tensorflow\n```\n\n(2). Cuda Toolkit 7.0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <br>\n7.5\u306f\u4ee5\u964d\u306e\u624b\u9806\u3067\u8a70\u307e\u3063\u305f\u306e\u30677.0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb<br>\n\u4e0b\u8a18\u304b\u3089Ubuntu 14.04 DEB (10KB) \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u30fc\u7248(cuda-repo-ubuntu1404-7-0-local_7.0-28_amd64.deb)\u3092DL&\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <br>\nhttps://developer.nvidia.com/cuda-toolkit-70\n\n```\n$ sudo dpkg -i cuda-repo-ubuntu1404-7-0-local_7.0-28_amd64.deb\n$ sudo apt-get update\n$ sudo apt-get install cuda-7-0 \n```\n\n(3). CUDNN Toolkit 6.5\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <br>\nCUDNN\u306eDL\u306f[Nvidia\u306e\u30b5\u30a4\u30c8](https://developer.nvidia.com/)\u3067\u767b\u9332\u3059\u308b\u5fc5\u8981\u3042\u308a(\u3057\u304b\u3082\u767b\u9332\u5b8c\u4e86\u307e\u30672,3\u65e5\u5f85\u305f\u3055\u308c\u305f\u3088\u3046\u306a\u6c17\u304c\u3059\u308b)<br>\n\u4e0b\u8a18\u304b\u3089 cuDNN v2 Library for Linux (cudnn-6.5-linux-x64-v2.tgz)\u3092DL&\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <br>\nhttps://developer.nvidia.com/rdp/cudnn-archive\n\n```\n$ tar xvzf cudnn-6.5-linux-x64-v2.tgz \n$ sudo cp cudnn-6.5-linux-x64-v2/cudnn.h /usr/local/cuda/include\n$ sudo cp cudnn-6.5-linux-x64-v2/libcudnn* /usr/local/cuda/lib64\n```\n\n**\u3053\u3053\u3067\u30ea\u30d6\u30fc\u30c8**\n\n(4). VirtualEnv\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u30b3\u30f3\u30c6\u30ca\u4f5c\u6210\n\n```\n#\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo apt-get install python-pip python-dev python-virtualenv\n\n#\u30b3\u30f3\u30c6\u30ca\u4f5c\u6210\n$ virtualenv --system-site-packages ~/tensorflow-GPU\n```\n\n~/tensorflow-GPU/bin/activate \u3092\u7de8\u96c6\n\u672b\u5c3e\u306b\u4e0b\u8a182\u884c\u3092\u8ffd\u52a0\u3059\u308b\n\n```\nexport LD_LIBRARY_PATH=\"$LD_LIBRARY_PATH:/usr/local/cuda/lib64\"\nexport CUDA_HOME=/usr/local/cuda\n```\n\n(5). TensorFlow \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb <br>\nCUDA\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u30d1\u30b9\u304c\u5909\u308f\u3063\u305f\u5834\u5408\u306b\u4e00\u5ea6\u3060\u3051\u4e0b\u8a18\u3092\u5b9f\u52b9\n\n```\n#(1)\u3067\u53d6\u5f97\u3057\u305f\u30bd\u30fc\u30b9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\n$ cd ~/tensorflow/tensorflow\n\n#\u5b9f\u52b9\u6a29\u9650\u4ed8\u4e0e\n$ chmod x+ ./configure\n\n$ ./configure\nDo you wish to bulid TensorFlow with GPU support? [y/n] y\nGPU support will be enabled for TensorFlow\n\nPlease specify the location where CUDA 7.0 toolkit is installed. Refer to\nREADME.md for more details. [default is: /usr/local/cuda]: /usr/local/cuda\n\nPlease specify the location where CUDNN 6.5 V2 library is installed. Refer to\nREADME.md for more details. [default is: /usr/local/cuda]: /usr/local/cuda\n\nSetting up Cuda include\nSetting up Cuda lib64\nSetting up Cuda bin\nSetting up Cuda nvvm\nConfiguration finished\n```\n\n\u30b3\u30f3\u30c6\u30ca\u306e\u6709\u52b9\u5316\n\u4eca\u5f8c\u3001\u65b0\u3057\u3044\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u7acb\u3061\u4e0a\u3052\u3066tensorflow-GPU\u30b3\u30f3\u30c6\u30ca\u3067\u4f5c\u696d\u3059\u308b\u5834\u5408\u306f\u307e\u305a\u4e0b\u8a18\u3067\u6709\u52b9\u5316\u3059\u308b\n\n```\n$ cd ~/tensorflow-GPU\n$ source bin/activate\n```\n\nGPU\u7248 TensorFlow \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n(tensorflow-GPU) $ pip install https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow-0.5.0-cp27-none-linux_x86_64.whl\n```\n\n# \u52d5\u304b\u3057\u3066\u307f\u308b\n(1). MNIST\n\nMNIST\u3092\u52d5\u304b\u305d\u3046\u3057\u305f\u3068\u3053\u308d\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u306e\u3067(2015/11/15\u6642\u70b9)\u3001\u4e0b\u8a18\u306e\u5909\u66f4\u3092\u884c\u3046\n\n```\n(tensorflow-GPU) $ cd ~/tensorflow/tensorflow/g3doc/tutorials/mnist/\n#\u7f6e\u304d\u63db\u3048\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u30ea\u30cd\u30fc\u30e0\n(tensorflow-GPU) $ mv mnist.py mnist_org.py\n# \u30ec\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u65e7\u7248\u3092\u53d6\u5f97\n(tensorflow-GPU) $ wget https://raw.githubusercontent.com/tensorflow/tensorflow/1d76583411038767f673a0c96174c80eaf9ff42f/tensorflow/g3doc/tutorials/mnist/mnist.py\n```\n\nfully_connected_feed.py \u306e 23,24\u884c\u76ee\u3092\u6b21\u306e\u3088\u3046\u306b\u3059\u308b\n\n```\n#from tensorflow.g3doc.tutorials.mnist import input_data\n#from tensorflow.g3doc.tutorials.mnist import mnist\nimport input_data\nimport mnist\n```\n\n\u52d5\u304b\u3057\u3066\u307f\u308b\n\n```\n(tensorflow-GPU) $ python fully_connected_feed.py\nExtracting data/train-images-idx3-ubyte.gz\nExtracting data/train-labels-idx1-ubyte.gz\nExtracting data/t10k-images-idx3-ubyte.gz\nExtracting data/t10k-labels-idx1-ubyte.gz\nI tensorflow/core/common_runtime/local_device.cc:25] Local device intra op parallelism threads: 8\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:888] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:88] Found device 0 with properties: \nname: GeForce GTX 970\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.253\npciBusID 0000:01:00.0\nTotal memory: 4.00GiB\nFree memory: 3.22GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:112] DMA: 0 \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:122] 0:   Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:643] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 970, pci bus id: 0000:01:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:47] Setting region size to 3144105984\nI tensorflow/core/common_runtime/local_session.cc:45] Local session inter op parallelism threads: 8\nStep 0: loss = 2.34 (0.300 sec)\nStep 100: loss = 2.13 (0.002 sec)\nStep 200: loss = 1.90 (0.002 sec)\nStep 300: loss = 1.52 (0.002 sec)\nStep 400: loss = 1.22 (0.002 sec)\nStep 500: loss = 0.84 (0.002 sec)\nStep 600: loss = 0.82 (0.002 sec)\nStep 700: loss = 0.68 (0.002 sec)\nStep 800: loss = 0.71 (0.002 sec)\nStep 900: loss = 0.51 (0.002 sec)\nTraining Data Eval:\n  Num examples: 55000  Num correct: 47651  Precision @ 1: 0.8664\nValidation Data Eval:\n  Num examples: 5000  Num correct: 4363  Precision @ 1: 0.8726\nTest Data Eval:\n  Num examples: 10000  Num correct: 8745  Precision @ 1: 0.8745\nStep 1000: loss = 0.46 (0.002 sec)\nStep 1100: loss = 0.44 (0.038 sec)\nStep 1200: loss = 0.52 (0.002 sec)\nStep 1300: loss = 0.43 (0.002 sec)\nStep 1400: loss = 0.64 (0.002 sec)\nStep 1500: loss = 0.34 (0.002 sec)\nStep 1600: loss = 0.41 (0.002 sec)\nStep 1700: loss = 0.34 (0.002 sec)\nStep 1800: loss = 0.30 (0.002 sec)\nStep 1900: loss = 0.35 (0.002 sec)\nTraining Data Eval:\n  Num examples: 55000  Num correct: 49286  Precision @ 1: 0.8961\nValidation Data Eval:\n  Num examples: 5000  Num correct: 4529  Precision @ 1: 0.9058\nTest Data Eval:\n  Num examples: 10000  Num correct: 9012  Precision @ 1: 0.9012\n```\n\n(2). CIFAR-10\n\u52d5\u304b\u3057\u3066\u307f\u308b\n\n```\n(tensorflow-GPU) $ cd ~/tensorflow/tensorflow/models/image/cifar10/\n(tensorflow-GPU) $ python cifar10_train.py\n>> Downloading cifar-10-binary.tar.gz 100.0%\nSuccesfully downloaded cifar-10-binary.tar.gz 170052171 bytes.\nFilling queue with 20000 CIFAR images before starting to train. This will take a few minutes.\nI tensorflow/core/common_runtime/local_device.cc:25] Local device intra op parallelism threads: 8\nI tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:888] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:88] Found device 0 with properties: \nname: GeForce GTX 970\nmajor: 5 minor: 2 memoryClockRate (GHz) 1.253\npciBusID 0000:01:00.0\nTotal memory: 4.00GiB\nFree memory: 3.20GiB\nI tensorflow/core/common_runtime/gpu/gpu_init.cc:112] DMA: 0 \nI tensorflow/core/common_runtime/gpu/gpu_init.cc:122] 0:   Y \nI tensorflow/core/common_runtime/gpu/gpu_device.cc:643] Creating TensorFlow device (/gpu:0) -> (device: 0, name: GeForce GTX 970, pci bus id: 0000:01:00.0)\nI tensorflow/core/common_runtime/gpu/gpu_region_allocator.cc:47] Setting region size to 3120906240\nI tensorflow/core/common_runtime/local_session.cc:45] Local session inter op parallelism threads: 8\n2015-11-17 02:14:46.611756: step 0, loss = 4.68 (6.9 examples/sec; 18.481 sec/batch)\n2015-11-17 02:14:49.068440: step 10, loss = 4.65 (562.6 examples/sec; 0.228 sec/batch)\n2015-11-17 02:14:51.224980: step 20, loss = 4.65 (617.0 examples/sec; 0.207 sec/batch)\n2015-11-17 02:14:53.375918: step 30, loss = 4.62 (664.1 examples/sec; 0.193 sec/batch)\n2015-11-17 02:14:55.513463: step 40, loss = 4.60 (610.3 examples/sec; 0.210 sec/batch)\n2015-11-17 02:14:57.696431: step 50, loss = 4.58 (615.1 examples/sec; 0.208 sec/batch)\n2015-11-17 02:14:59.877955: step 60, loss = 4.57 (567.3 examples/sec; 0.226 sec/batch)\n2015-11-17 02:15:02.101614: step 70, loss = 4.55 (621.1 examples/sec; 0.206 sec/batch)\n2015-11-17 02:15:04.593141: step 80, loss = 4.52 (490.3 examples/sec; 0.261 sec/batch)\n2015-11-17 02:15:06.983452: step 90, loss = 4.52 (641.4 examples/sec; 0.200 sec/batch)\n2015-11-17 02:15:09.232584: step 100, loss = 4.50 (563.8 examples/sec; 0.227 sec/batch)\n2015-11-17 02:15:11.783752: step 110, loss = 4.48 (538.0 examples/sec; 0.238 sec/batch)\n2015-11-17 02:15:13.997070: step 120, loss = 4.46 (589.4 examples/sec; 0.217 sec/batch)\n2015-11-17 02:15:16.458028: step 130, loss = 4.45 (467.8 examples/sec; 0.274 sec/batch)\n2015-11-17 02:15:19.128071: step 140, loss = 4.42 (581.1 examples/sec; 0.220 sec/batch)\n2015-11-17 02:15:21.491835: step 150, loss = 4.40 (568.2 examples/sec; 0.225 sec/batch)\n2015-11-17 02:15:23.962043: step 160, loss = 4.39 (635.4 examples/sec; 0.201 sec/batch)\n...\n```\n\n\u3061\u306a\u307f\u306bCPU\u7248\u3067\u5b9f\u884c\u3059\u308b\u3068\u4e00\u56de\u306ebatch\u306b\u304b\u304b\u308b\u6642\u9593\u304c\u500d\u304f\u3089\u3044\u304b\u304b\u308b\u306e\u3067GPU\u3092\u4f7f\u3046\u3053\u3068\u3067\u52a0\u901f\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3060\n\n# GPU\u7528\u306b tutorials_example_trainer \u3092\u30d3\u30eb\u30c9\u3059\u308b\n\n\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u3067\u306f\u306a\u304f\u901a\u5e38\u306e\u30b7\u30a7\u30eb\u3067 bazel \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n# \u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo add-apt-repository ppa:webupd8team/java\n$ sudo apt-get update\n$ sudo apt-get install oracle-java8-installer\n$ sudo apt-get install pkg-config zip g++ zlib1g-dev unzip\n\n# bazel \u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u30fc\u3092DL\n$ wget https://github.com/bazelbuild/bazel/releases/download/0.1.1/bazel-0.1.1-installer-linux-x86_64.sh\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ chmod +x bazel-0.1.1-installer-linux-x86_64.sh \n$ ./bazel-0.1.1-installer-linux-x86_64.sh --user\n```\n\n~/.bashrc \u3092\u7de8\u96c6\u3057\u3066\u672b\u5c3e\u306b\u4e0b\u8a18\u3092\u8ffd\u52a0\n\n```\nexport PATH=\"$PATH:$HOME/bin\"\n```\n\n\u4e0b\u8a18\u306e\u30d1\u30b9\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\n~/tensorflow/third_party/gpus/cuda/cuda.config\n\n\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u8eab\u306f\u4e0b\u8a18\n\n```\nCUDA_TOOLKIT_PATH=\"/usr/local/cuda\"\nCUDNN_INSTALL_PATH=\"/usr/local/cuda\"\n```\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u308b\u3068\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af /usr/local/cuda (=>/usr/local/cuda-7.0)\u304c\u3042\u308b\u306f\u305a\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d1\u30b9\u3092\u5909\u3048\u3066\u308b\u5834\u5408\u306f\u305d\u308c\u306b\u3042\u308f\u305b\u3066\u5909\u66f4\n\n\u30d3\u30eb\u30c9\u524d\u306b ./configure \u3092\u5b9f\u884c\u3057\u3066\u304a\u304f\n\n```\n$ cd ~/tensorflow-GPU\n$ source bin/activate\n(tensorflow-GPU) $ cd ~/tensorflow\n(tensorflow-GPU) $ ./configure\nDo you wish to bulid TensorFlow with GPU support? [y/n] y\nGPU support will be enabled for TensorFlow\n\nPlease specify the location where CUDA 7.0 toolkit is installed. Refer to\nREADME.md for more details. [default is: /usr/local/cuda]: /usr/local/cuda\n\nPlease specify the location where CUDNN 6.5 V2 library is installed. Refer to\nREADME.md for more details. [default is: /usr/local/cuda]: /usr/local/cuda\n\nSetting up Cuda include\nSetting up Cuda lib64\nSetting up Cuda bin\nSetting up Cuda nvvm\nConfiguration finished\n```\n\n\u30d3\u30eb\u30c9\n\n```\n(tensorflow-GPU) $ bazel build -c opt --config=cuda tensorflow/cc:tutorials_example_trainer\n```\n\n\u30d3\u30eb\u30c9\u5b8c\u4e86\u307e\u306710\u5206\u307b\u3069\u304b\u304b\u3063\u305f\n", "tags": ["TensorFlow", "Python", "\u6a5f\u68b0\u5b66\u7fd2", "GPGPU", "CUDA"]}