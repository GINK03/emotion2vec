{"context": "\n\n\u306f\u3058\u3081\u306b\n\n\u672c\u8a18\u4e8b\u306f\u300cOAuth 2.0 + OpenID Connect \u306e\u30d5\u30eb\u30b9\u30af\u30e9\u30c3\u30c1\u5b9f\u88c5\u8005\u304c\u77e5\u898b\u3092\u8a9e\u308b\u300d\u306e\u7d9a\u7de8\u3068\u306a\u308a\u307e\u3059\u3002\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 (protected resource endpoint)\u3001\u3044\u308f\u3086\u308b\u4e16\u306e\u4e2d\u3067\u3044\u3046\u3068\u3053\u308d\u306e (\u72ed\u7fa9\u306e) Web API \u306e\u5b9f\u88c5\u306b\u95a2\u3059\u308b\u8a71\u984c\u304c\u30e1\u30a4\u30f3\u3068\u306a\u308a\u307e\u3059\u3002\n\n1. \u3082\u3046\u4e00\u3064\u306e\u8a8d\u53ef\n\n\n1.1. \u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u3067\u306e\u8a8d\u53ef\n\n\u6df7\u4e71\u3092\u907f\u3051\u308b\u305f\u3081\u524d\u8a18\u4e8b\u3067\u306f\u6562\u3048\u3066\u8a00\u53ca\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001\u8a8d\u53ef\u3068\u3044\u3046\u8a00\u8449\u306f\u5225\u306e\u6587\u8108\u3067\u4f7f\u308f\u308c\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u6587\u8108\u3067\u306f\u3001\u300c\u8ab0\u304c\u4f55\u306e\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u304b (who has what permissions)\u300d\u3068\u3044\u3046\u60c5\u5831\u3092\u6271\u3046\u305f\u3081\u306b\u8a8d\u53ef\u3068\u3044\u3046\u8a00\u8449\u3092\u4f7f\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u3001OAuth \u306e\u6587\u8108\u3067\u306e\u8a8d\u53ef\u300c\u8ab0\u304c\u8ab0\u306b\u4f55\u306e\u6a29\u9650\u3092\u4e0e\u3048\u308b\u304b (who grants what permissions to whom)\u300d\u3068\u306f\u7570\u306a\u308a\u307e\u3059\u3002\u5384\u4ecb\u306a\u3053\u3068\u306b\u3001\u3053\u306e\u3069\u3061\u3089\u3082\u8a8d\u53ef\u3068\u547c\u3070\u308c\u3001\u82f1\u8a9e\u3067\u3082\u4e21\u65b9\u3068\u3082 authorization \u3068\u3044\u3046\u5358\u8a9e\u304c\u4f7f\u308f\u308c\u307e\u3059\u3002\n\u3042\u308b\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u969b\u3001\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u306e\u304b\u3001\u305d\u308c\u3068\u3082\u7ba1\u7406\u8005\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u306e\u304b\u306e\u9055\u3044\u306b\u3088\u308a\u3001\u30ed\u30b0\u30a4\u30f3\u5f8c\u306b\u5b9f\u884c\u53ef\u80fd\u306a\u64cd\u4f5c\u306b\u5909\u5316\u3092\u6301\u305f\u305b\u308b\u3053\u3068\u306f\u3088\u304f\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u306e\u6587\u8108\u3067\u8a8d\u53ef\u3068\u3044\u3046\u8a00\u8449\u304c\u51fa\u3066\u304d\u305f\u5834\u5408\u3001\u305d\u308c\u306f\u3001\u300c\u8ab0\u304c\u4f55\u306e\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u300d\u3068\u3044\u3046\u60c5\u5831\u3092\u6271\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u3001OAuth \u306e\u6587\u8108\u3067\u3044\u3046\u3068\u3053\u308d\u306e\u8a8d\u53ef\u3068\u306f\u7570\u306a\u308a\u307e\u3059\u3002\u3067\u3059\u306e\u3067\u3001\u300c\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u3068\u7ba1\u7406\u8005\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u533a\u5225\u3057\u305f\u3044\u306e\u3060\u3051\u3069\u3001\u3053\u308c\u3092\u5b9f\u73fe\u3059\u308b\u306b\u306f OAuth \u304c\u5fc5\u8981\u306a\u306e\u304b\uff1f\u300d\u3068\u5c0b\u306d\u3089\u308c\u305f\u3089\u3001\u305d\u306e\u7b54\u3048\u306f\u300c\u3044\u3044\u3048\u300d\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\nOAuth \u3067\u306a\u3044\u65b9\u306e\u6587\u8108\u306b\u304a\u3051\u308b\u8a8d\u53ef\u306b\u3064\u3044\u3066\u306f\u3001\u300c\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u3001\u6a29\u9650\u3092\u8868\u3059\u5c5e\u6027\u304c\u7d10\u4ed8\u3044\u3066\u3044\u308b\u300d\u3068\u8003\u3048\u308b\u3068\u5206\u304b\u308a\u3084\u3059\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u306e\u6587\u8108\u3092\u300c\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u300d\u3068\u8868\u73fe\u3059\u308b\u3068\u3059\u308c\u3070\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u306b\u304a\u3051\u308b\u8a8d\u53ef\u3068 OAuth \u6587\u8108\u306b\u304a\u3051\u308b\u8a8d\u53ef\u306f\u3001\u6b21\u306e\u8868\u306e\u3088\u3046\u306b\u6bd4\u8f03\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\n\n\u6587\u8108\n\u8a8d\u53ef\u304c\u6271\u3046\u60c5\u5831\n\n\n\n\n\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\n\u8ab0\u304c\u4f55\u306e\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u304bWho has what permissions.\n\n\nOAuth\n\u8ab0\u304c\u8ab0\u306b\u4f55\u306e\u6a29\u9650\u3092\u4e0e\u3048\u308b\u304bWho grants what permissions to whom.\n\n\n\n\n1.2. \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c6\u30fc\u30d6\u30eb\u3067\u306e\u8868\u73fe\n\n\u62bd\u8c61\u7684\u306a\u6587\u7ae0\u304c\u7d9a\u3044\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u304c\u3001\u3053\u308c\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c6\u30fc\u30d6\u30eb\u3067\u8868\u73fe\u3059\u308b\u3068\u9055\u3044\u304c\u306f\u3063\u304d\u308a\u898b\u3048\u3066\u304d\u307e\u3059\u3002\n\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u3067\u306e\u8a8d\u53ef\u306f\u6b21\u306e\u3088\u3046\u306a\u8868\u73fe\u3068\u306a\u308a\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u610f\u5473\u306f\u300c\u30a2\u30ab\u30a6\u30f3\u30c8\u30c6\u30fc\u30d6\u30eb\u300d\u3068\u306a\u308a\u307e\u3059\u3002\n\n\n\n\u4e00\u610f\u8b58\u5225\u5b50(user ID)\n\u540d\u524d(name)\n\u6301\u3063\u3066\u3044\u308b\u6a29\u9650(permissions)\n\n\n\n\nuser001\nJohn\nview\n\n\nuser002\nJane\n\nview, edit\n\n\n\n\n\u4e00\u65b9\u3001OAuth \u6587\u8108\u3067\u306e\u8a8d\u53ef\u306f\u6b21\u306e\u3088\u3046\u306a\u8868\u73fe\u3068\u306a\u308a\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u610f\u5473\u306f\u300c\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u30c6\u30fc\u30d6\u30eb\u300d\u3068\u306a\u308a\u307e\u3059\u3002\n\n\n\n\u4e00\u610f\u8b58\u5225\u5b50(access token)\n\u8ab0\u304c(user ID)\n\u8ab0\u306b(client ID)\n\u4f55\u306e\u6a29\u9650\u3092(scopes)\n\n\n\n\nfde0dke3d\nuser001\nclient001\nprofile\n\n\nabbv3Dedg\nuser002\nclient002\n\nprofile, post\n\n\n\n\n\n1.3. Apache Shiro \u304b\u3089\u5b66\u3076\n\n\u3068\u3053\u308d\u3067\u3001Apache Shiro \u3068\u3044\u3046\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u3054\u5b58\u77e5\u3067\u3057\u3087\u3046\u304b\uff1f \u79c1\u306f\u3001\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306b\u304a\u3051\u308b\u30ed\u30b0\u30a4\u30f3\u306e\u4ed5\u7d44\u307f\u3092\u5b9f\u73fe\u3059\u308b\u624b\u6bb5\u3092\u63a2\u3057\u3066\u3044\u305f\u3068\u304d\u306b\u3001Apache Shiro \u3092\u77e5\u308a\u307e\u3057\u305f\u3002Java \u7cfb\u306e\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u306f Spring Security \u304c\u6709\u540d\u3067\u3059\u304c\u3001Stack Overflow \u306e\u300cShiro vs. SpringSecurity\u300d\u306b\u3042\u308b\u901a\u308a\u3001Spring Security \u306f\u8907\u96d1\u904e\u304e\u307e\u3059\u3002\u4e00\u65b9\u3001Apache Shiro \u306f\u8a2d\u8a08\u304c\u6d17\u7df4\u3055\u308c\u3066\u3044\u3066\u3001\u7c21\u5358\u306b\u4f7f\u3048\u308b\u306e\u3067\u3059\u3002\nApache Shiro \u306f\u8a8d\u8a3c\u3092\u6271\u3044\u307e\u3059\u304c\u3001\u305d\u308c\u3068\u4f75\u305b\u3066\u3001\u8a8d\u8a3c\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306e\u6a29\u9650\u3082\u53d6\u308a\u6271\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u5148\u306b\u8ff0\u3079\u305f\u300c\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u306b\u304a\u3051\u308b\u8a8d\u53ef\u300d\u3092\u6307\u3057\u3066\u304a\u308a\u3001Apache Shiro \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u304a\u3044\u3066\u3082\u3001\u3053\u306e\u6a5f\u80fd\u306f authorization \u3068\u3044\u3046\u5358\u8a9e\u3067\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u3053\u3053\u3067 Apache Shiro \u3092\u6301\u3061\u51fa\u3057\u305f\u306e\u306f\u3001\u305d\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u4e00\u3064\u3067\u3042\u308b\u300cApache Shiro Authorization\u300d\u304c\u826f\u304f\u66f8\u3051\u3066\u3044\u3066\u3001\u8003\u3048\u65b9\u306b\u6c4e\u7528\u6027\u304c\u3042\u308b\u304b\u3089\u3067\u3059\u3002\u307e\u305f\u3001Apache Shiro \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e PMC (Project Management Committee) Chair \u3067\u3042\u308b Les Hazlewood \u6c0f\u304c Stormpath \u793e\u306e\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306b\u8f09\u305b\u3066\u3044\u308b\u6587\u66f8\u300cThe New RBAC: Resource-Based Access Control\u300d\u3082\u307e\u305f\u3001\u3088\u304f\u66f8\u3051\u3066\u3044\u3066\u975e\u5e38\u306b\u53c2\u8003\u306b\u306a\u308b\u304b\u3089\u3067\u3059\u3002\n\u3053\u308c\u3089\u306e\u6587\u66f8\u304b\u3089\u30a8\u30c3\u30bb\u30f3\u30b9\u3092\u629c\u304d\u51fa\u3057\u307e\u3059\u3002\n\n1.3.1. \u8a8d\u53ef\u306e\u69cb\u6210\u8981\u7d20\n\n\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u3067\u306e\u8a8d\u53ef\u3092\u69cb\u6210\u3059\u308b\u8981\u7d20 (Elements of Authorization) \u306b\u306f\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3 (permission)\u3001\u30ed\u30fc\u30eb (role)\u3001\u30e6\u30fc\u30b6\u30fc (user)\u3001\u306e\u4e09\u3064\u304c\u3042\u308a\u3001\u305d\u308c\u305e\u308c\u6b21\u306e\u3088\u3046\u306a\u5b9a\u7fa9\u3068\u306a\u308a\u307e\u3059\u3002\n\n\n\n\u8981\u7d20\n\u8aac\u660e\n\n\n\n\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\n\u3069\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u5bfe\u3057\u3066\u3069\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3067\u304d\u308b\u304b\n\n\n\u30ed\u30fc\u30eb\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u96c6\u5408\n\n\n\u30e6\u30fc\u30b6\u30fc\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3084\u30ed\u30fc\u30eb\u306e\u5272\u5f53\u5148\n\n\n\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306f\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30fc\u30dd\u30ea\u30b7\u30fc\u306e\u6700\u5c0f\u69cb\u6210\u8981\u7d20\u3068\u306a\u308a\u307e\u3059\u3002\u30ed\u30fc\u30eb\u306f\u5358\u306a\u308b\u300c\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u96c6\u5408\u300d\u306b\u904e\u304e\u305a\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u30b0\u30eb\u30fc\u30d7\u3068\u540c\u7fa9\u3067\u3059\u3002\u500b\u4eba\u7684\u306b\u306f\u300c\u30ed\u30fc\u30eb\uff1d\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u96c6\u5408\u300d\u3068\u3044\u3046\u5272\u308a\u5207\u308a\u65b9\u306b\u30cf\u30c3\u3068\u3055\u305b\u3089\u308c\u307e\u3057\u305f\u3002\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u4f8b\u3068\u3057\u3066\u3001\u6b21\u306e\u3088\u3046\u306a\u3082\u306e\u3092\u6319\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\n\n\u30ea\u30bd\u30fc\u30b9\n\u30a2\u30af\u30b7\u30e7\u30f3\n\n\n\n\n\u30d5\u30a1\u30a4\u30eb\u3092\n\u30aa\u30fc\u30d7\u30f3\u3059\u308b\n\n\n\u30da\u30fc\u30b8\u3092\n\u95b2\u89a7\u3059\u308b\n\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\n\u5370\u5237\u3059\u308b\n\n\n\u30e6\u30fc\u30b6\u30fc jsmith \u3092\n\u524a\u9664\u3059\u308b\n\n\n\n\u4e0a\u8a18\u8868\u4e2d\u306e\u6700\u5f8c\u306e\u4f8b\u3067\u306f\u3001\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5bfe\u8c61\u3068\u306a\u308b\u30ea\u30bd\u30fc\u30b9\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30ec\u30d9\u30eb\u3067\u9650\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u3064\u307e\u308a\u3001\u30e6\u30fc\u30b6\u30fc\u306e\u4e2d\u3067\u3082\u3001\u7279\u306b jsmith \u3068\u3044\u3046\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u9650\u5b9a\u3057\u305f\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u3089\u306e\u30ea\u30bd\u30fc\u30b9\u6307\u5b9a\u306e\u65b9\u6cd5\u3092\u6c4e\u7528\u7684\u306b\u3068\u3089\u3048\u76f4\u3059\u3068\u3001\u30ea\u30bd\u30fc\u30b9\u306f\u3001(1) \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u3060\u3051\u3067\u6307\u5b9a\u3055\u308c\u308b\u5834\u5408\u3068\u3001(2) \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u53ca\u3073\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u7d44\u3067\u6307\u5b9a\u3055\u308c\u308b\u5834\u5408\u306e\u4e8c\u3064\u304c\u3042\u308b\u3068\u8a00\u3048\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u306e\u3053\u3068\u304b\u3089\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u69cb\u6210\u30d1\u30bf\u30fc\u30f3\u3082\u307e\u305f\u3001\u6b21\u306e\u4e8c\u3064\u306b\u96c6\u7d04\u3067\u304d\u307e\u3059\u3002\n\n\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u3001\u30a2\u30af\u30b7\u30e7\u30f3\n\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u3001\u30a2\u30af\u30b7\u30e7\u30f3\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n\n\n1.3.2. \u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u8868\u73fe\n\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u30b3\u30fc\u30c9\u306b\u8fd1\u3044\u5f62\u3067\u8868\u73fe\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u69cb\u6210\u8981\u7d20\u3067\u3042\u308b\u3001\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u3001\u30a2\u30af\u30b7\u30e7\u30f3\u3001\u305d\u3057\u3066\u30aa\u30d7\u30b7\u30e7\u30ca\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6307\u5b9a\u3092\u3001\u30b3\u30ed\u30f3\u3067\u533a\u5207\u3063\u3066\u4e26\u3079\u308b\u300c\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7:\u30a2\u30af\u30b7\u30e7\u30f3[:\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9]\u300d\u3068\u3044\u3046\u5f62\u5f0f\u3092\u57fa\u672c\u3068\u3057\u307e\u3057\u3087\u3046\u3002\u305d\u3057\u3066\u3001\u305d\u308c\u305e\u308c\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u5185\u3067\u8907\u6570\u306e\u8981\u7d20\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306f\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\u5217\u6319\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u300c\u5168\u3066\u300d\u3092\u8868\u73fe\u3059\u308b\u65b9\u6cd5\u3068\u3057\u3066 * \u3092\u7528\u3044\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\u4e0b\u8a18\u306e\u8868\u306f\u3001\u3053\u306e\u30eb\u30fc\u30eb\u3092\u7528\u3044\u3066\u8868\u73fe\u3057\u305f\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u4f8b\u3067\u3059\u3002\n\n\n\n\u8868\u73fe\n\u610f\u5473\n\n\n\n\nprinter:print\n\u30d7\u30ea\u30f3\u30bf\u30fc\u3067\u5370\u5237\u3059\u308b\u6a29\u9650\n\n\nprinter:manage\n\u30d7\u30ea\u30f3\u30bf\u30fc\u3092\u7ba1\u7406\u3059\u308b\u6a29\u9650\n\n\nprinter:print,manage\n\u30d7\u30ea\u30f3\u30bf\u30fc\u306b\u5bfe\u3059\u308b\u5370\u5237\u6a29\u9650\u3068\u7ba1\u7406\u6a29\u9650\n\n\nprinter:*\n\u30d7\u30ea\u30f3\u30bf\u30fc\u306b\u95a2\u3059\u308b\u5168\u3066\u306e\u6a29\u9650\n\n\n*:view\n\u5168\u3066\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u95b2\u89a7\u3059\u308b\u6a29\u9650\n\n\nprinter:query:lp7200\n\u30d7\u30ea\u30f3\u30bf\u30fc LP7200 \u306e\u72b6\u614b\u3092\u8abf\u3079\u308b\u6a29\u9650\n\n\nprinter:print:epsoncolor\n\u30d7\u30ea\u30f3\u30bf\u30fc Epson Color \u3067\u5370\u5237\u3059\u308b\u6a29\u9650\n\n\n\n\u3053\u3053\u3067\u306f\u3001\u300c\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7:\u30a2\u30af\u30b7\u30e7\u30f3[:\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9]\u300d\u3068\u3044\u3046\u5f62\u5f0f\u3092\u63a1\u7528\u3057\u307e\u3057\u305f\u304c\u3001\u3082\u3061\u308d\u3093\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u8868\u73fe\u3059\u308b\u3068\u304d\u306b\u3053\u308c\u4ee5\u5916\u306e\u65b9\u6cd5\u3092\u7528\u3044\u3066\u3082\u304b\u307e\u3044\u307e\u305b\u3093\u3002\u8868\u73fe\u65b9\u6cd5\u306f\u3069\u306e\u3088\u3046\u306a\u3082\u306e\u3060\u3068\u3057\u3066\u3082\u3001\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u3001\u30a2\u30af\u30b7\u30e7\u30f3\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3001\u3092\u6307\u5b9a\u3067\u304d\u308b\u306e\u3067\u3042\u308c\u3070\u3001Apache Shiro \u3068\u540c\u3058\u6982\u5ff5\u3067\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u8868\u73fe\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u306a\u304a\u3001\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9\u6307\u5b9a (*) \u3092\u542b\u3080\u300c\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7:\u30a2\u30af\u30b7\u30e7\u30f3:\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u300d\u5f62\u5f0f\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5\u3068\u3057\u3066\u3001Apache Shiro \u306f WildCardPermission \u3068\u3044\u3046\u30af\u30e9\u30b9\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\n\n1.3.3. \u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u6642\u306e\u6ce8\u610f\u70b9\n\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3084\u30ed\u30fc\u30eb\u306e\u6982\u5ff5\u3068\u305d\u306e\u8868\u73fe\u65b9\u6cd5\u304c\u5b9a\u307e\u308c\u3070\u3001\u305d\u308c\u3089\u306b\u57fa\u3065\u3044\u3066\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3092\u304a\u3053\u306a\u3048\u307e\u3059\u304c\u3001\u305d\u308c\u306b\u3064\u3044\u3066\u3001\u5148\u307b\u3069\u3082\u7d39\u4ecb\u3057\u305f\u300cThe New RBAC: Resource-Based Access Control\u300d\u3068\u3044\u3046\u6587\u66f8\u306b\u6ce8\u610f\u304c\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\u8981\u7d04\u3059\u308b\u3068\u6b21\u306e\u3068\u304a\u308a\u3067\u3059\u3002\n\n\u30ed\u30fc\u30eb\u540d\u306b\u57fa\u3065\u304f\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u306f\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u7dad\u6301\u7ba1\u7406\u304c\u96e3\u3057\u304f\u306a\u308b\u50be\u5411\u306b\u3042\u308b\u3002\u4f8b\u3048\u3070\u3001\u300c\u30ed\u30fc\u30eb\u304c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u306e\u5834\u5408\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4e00\u89a7\u3092\u8868\u793a\u3059\u308b\u300d\u3068\u3044\u3046\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3092\u3057\u3066\u3044\u305f\u5834\u5408\u3001\u5f8c\u304b\u3089\u300c\u90e8\u9580\u9577\u3082\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4e00\u89a7\u3092\u898b\u3089\u308c\u308b\u3088\u3046\u306b\u300d\u3068\u3044\u3046\u8981\u6c42\u4ed5\u69d8\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3068\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u5185\u306e\u6761\u4ef6\u6587\u3092\u300c\u30ed\u30fc\u30eb\u304c\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u3082\u3057\u304f\u306f\u90e8\u9580\u2ed1\u306e\u5834\u5408\u300d\u3068\u3044\u3046\u3088\u3046\u306b\u5909\u66f4\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\u3053\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u306f\u3059\u3050\u306b\u7834\u7dbb\u3059\u308b\u3002\u3053\u306e\u305f\u3081\u3001\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u306f\u30ed\u30fc\u30eb\u57fa\u6e96\u3067\u306f\u306a\u304f\u30ea\u30bd\u30fc\u30b9\u57fa\u6e96\u3067\u304a\u3053\u306a\u3046\u306e\u304c\u3088\u3044\u3002\u4f8b\u3048\u3070\u3001\u300c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4e00\u89a7\u8868\u793a\u3059\u308b\u6a29\u9650\u304c\u3042\u308b\u304b\u300d\u3068\u3044\u3046\u5177\u5408\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u3002\n\n\u5c11\u3057\u9577\u304f\u306a\u308a\u307e\u3057\u305f\u304c\u3001Apache Shiro \u304b\u3089\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u306b\u304a\u3051\u308b\u8a8d\u53ef\u306b\u3064\u3044\u3066\u591a\u304f\u3092\u5b66\u3079\u305f\u3053\u3068\u3068\u601d\u3044\u307e\u3059\u3002\n\n1.3.4. \u88dc\u8db3\n\n\u79c1\u304c Apache Shiro \u3092\u77e5\u3063\u305f\u5f53\u6642\u3001\u65e5\u672c\u8a9e\u60c5\u5831\u304c\u5c11\u306a\u304b\u3063\u305f\u306e\u3067 (\u4eca\u3082\u5c11\u306a\u3044\u3067\u3059\u304c)\u3001\u5e7e\u3064\u304b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u65e5\u672c\u8a9e\u8a33\u3057\u3066\u304a\u304d\u307e\u3057\u305f\u3002\u53c2\u8003\u306b\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\nApache Shiro \u3067 Web \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30bb\u30ad\u30e5\u30a2\u306b\u3059\u308b\nApache Shiro Realms (\u65e5\u672c\u8a9e\u8a33)\nApache Shiro Configuration (\u65e5\u672c\u8a9e\u8a33)\n\n\u4f59\u8ac7\u3067\u3059\u304c\u3001Apache Shiro \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u3093\u3067\u3044\u308b\u3060\u3051\u3067\u3001\u3044\u304b\u306b Apache Shiro \u306e\u5b9f\u88c5\u8005\u304c\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30fc\u306b\u8a73\u3057\u3044\u304b\u304c\u5206\u304b\u308a\u307e\u3059\u3002\u30d1\u30b9\u30ef\u30fc\u30c9\u60c5\u5831\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4fdd\u5b58\u3059\u308b\u969b\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u305d\u306e\u3082\u306e\u3067\u306f\u306a\u304f\u30cf\u30c3\u30b7\u30e5\u5024\u3092\u4fdd\u5b58\u3059\u308b\u3053\u3068\u306f\u5e38\u8b58\u3060\u3068\u3057\u3066\u3082\u3001\u30bd\u30eb\u30c8\u306b\u52a0\u3048\u3001\u30cf\u30c3\u30b7\u30e5\u5024\u8a08\u7b97\u3092\u76f8\u5f53\u56de\u6570\u7e70\u308a\u8fd4\u3059\u3079\u304d\u3053\u3068\u306e\u91cd\u8981\u6027\u306b\u3064\u3044\u3066\u306f\u3001\u79c1\u306f Apache Shiro \u306e HashedCredentialsMatcher \u30af\u30e9\u30b9\u306e JavaDoc \u304b\u3089\u5b66\u3073\u307e\u3057\u305f\u3002\n\u3055\u3089\u306b\u4f59\u8ac7\u3067\u3001\u307e\u305f\u3001\u7a81\u7136\u306e\u544a\u767d\u3067\u3059\u304c\u3001\u79c1\u304c\u306a\u305c Apache Shiro \u3092\u8a55\u4fa1\u3059\u308b\u4e00\u65b9\u3067 Spring Framework \u3092\u5acc\u3046\u304b\u3068\u3044\u3046\u3068\u3001\u3042\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306f\u3001\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u8907\u96d1\u3055\u3092\u89e3\u6d88\u3057\u3066\u3044\u308b\u306e\u3067\u306f\u306a\u304f\u3001\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u8907\u96d1\u3055\u3092 Java \u30b3\u30fc\u30c9\u304b\u3089 XML \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u79fb\u52d5\u3055\u305b\u3066\u3044\u308b\u3060\u3051\u3060\u304b\u3089\u3067\u3059\u3002\u3080\u3057\u308d\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u30a8\u30e9\u30fc\u691c\u51fa\u3067\u304d\u3066\u3044\u305f\u3082\u306e\u304c\u3001\u5b9f\u884c\u3057\u3066\u307f\u306a\u3044\u3068\u30a8\u30e9\u30fc\u306b\u6c17\u4ed8\u3051\u306a\u3044\u72b6\u614b\u3068\u306a\u308a\u3001\u60aa\u5316\u3067\u3059\u3089\u3042\u308a\u307e\u3059\u3002\u30e9\u30a4\u30d6\u30e9\u30ea\u3084\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u4f5c\u308b\u3068\u304d\u306f\u3001\u8907\u96d1\u3055\u3092\u8efd\u6e1b\u3059\u308b\u305f\u3081\u306b\u4ed6\u306e\u8907\u96d1\u3055\u3092\u5c0e\u5165\u3059\u308b\u3068\u3044\u3046\u611a\u3092\u72af\u3057\u3066\u3044\u306a\u3044\u304b\u3001\u81ea\u3089\u554f\u3046\u3079\u304d\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n2. \u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\n\n\n2.1. \u8a8d\u53ef\u3092\u3081\u3050\u308b\u6df7\u4e71\n\n\u524d\u7ae0\u3067\u300c\u8ab0\u304c\u4f55\u306e\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u300d\u3068\u3044\u3046\u610f\u5473\u3067\u306e\u8a8d\u53ef\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u3001\u305d\u308c\u306a\u308a\u306e\u6587\u7ae0\u91cf\u3068\u306a\u308a\u307e\u3057\u305f\u304c\u3001\u5168\u3066\u3053\u306e\u7ae0\u306e\u305f\u3081\u306e\u524d\u7f6e\u304d\u3067\u3059\u3002\u3053\u3053\u304b\u3089\u306f\u3001OAuth \u306b\u8a71\u3092\u623b\u3057\u3001\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 (protected resource endpoint) \u306b\u3064\u3044\u3066\u66f8\u3044\u3066\u3044\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\u3042\u308b\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u3001(1) \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3067\u4fdd\u8b77\u3057\u3001\u3055\u3089\u306b (2) \u30e6\u30fc\u30b6\u30fc\u304c\u6301\u3064\u6a29\u9650\u306b\u57fa\u3065\u3044\u3066\u6a5f\u80fd\u5236\u9650\u3092\u304a\u3053\u306a\u3044\u305f\u3044\u3068\u601d\u3063\u305f\u6642\u3001(1) \u3067\u306f OAuth \u6587\u8108\u306e\u8a8d\u53ef\u3092\u3001(2) \u3067\u306f\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u306e\u8a8d\u53ef\u3092\u6271\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u4e21\u65b9\u3068\u3082\u8a8d\u53ef (authorization) \u3068\u3044\u3046\u8a00\u8449\u3092\u4f7f\u3046\u305f\u3081\u3001\u4e21\u8005\u306e\u8a8d\u53ef\u306e\u9055\u3044\u3092\u7406\u89e3\u3057\u3066\u3044\u306a\u3044\u3068\u6df7\u4e71\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u3055\u3089\u306b\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3068 ID \u30c8\u30fc\u30af\u30f3\u306b\u5bfe\u3059\u308b\u7121\u7406\u89e3\u3082\u639b\u3051\u5408\u308f\u3055\u308b\u3068\u3001\u300c\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u306f\u30e6\u30fc\u30b6\u30fc\u306e\u30af\u30ec\u30fc\u30e0 (\u30e6\u30fc\u30b6\u30fc\u306e\u5c5e\u6027\u60c5\u5831) \u304c\u5165\u3063\u3066\u3044\u308b\u304b\u3089\u3001\u305d\u306e\u30af\u30ec\u30fc\u30e0\u306b\u57fa\u3065\u3044\u3066\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u304c\u3067\u304d\u308b\u306e\u3067\u306f\u306a\u3044\u304b\uff1f\u300d\u3068\u3044\u3046\u3001\u3055\u3089\u306b\u6df1\u3044\u6df7\u4e71\u3078\u3068\u9665\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u3053\u306e\u3088\u3046\u306a\u6df7\u4e71\u3092\u62b1\u3048\u3066\u3044\u308b\u4eba\u306f\u3001\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u3069\u306e\u3088\u3046\u306b\u5b9f\u88c5\u3057\u3066\u3044\u3044\u306e\u304b\u5206\u304b\u3089\u305a\u3001\u9014\u65b9\u306b\u66ae\u308c\u3066 Stack Overflow \u306b\u3084\u3063\u3066\u304d\u307e\u3059\u3002 \u305d\u3057\u3066\u3001\u305d\u306e\u3088\u3046\u306a\u4eba\u306b\u3088\u308b\u4e00\u767a\u76ee\u306e\u8cea\u554f\u304c\u3053\u3061\u3089\u306e\u300cOAuth 2.0 Authorization Server and Access Tokens\u300d\u3067\u3059\u3002\u3053\u306e\u8cea\u554f\u8005\u306f\u771f\u9762\u76ee\u3067\u3001\u8cea\u554f\u81ea\u4f53\u306f\u4e01\u5be7\u306b\u66f8\u3044\u3066\u3044\u307e\u3059\u304c\u3001\u300cThe Authorization Server issues the access token containing the user's claims.\u300d (\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306f\u30e6\u30fc\u30b6\u30fc\u30af\u30ec\u30fc\u30e0\u3092\u542b\u3080\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u767a\u884c\u3059\u308b) \u3068\u3044\u3046\u9593\u9055\u3063\u305f\u7406\u89e3\u3092\u524d\u63d0\u306b\u8cea\u554f\u3057\u3066\u304d\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u3053\u306f\u3055\u3089\u3063\u3068\u300cAn access token does NOT contain a user's claims, but an ID token does.\u300d (\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306f\u30e6\u30fc\u30b6\u30fc\u30af\u30ec\u30fc\u30e0\u3092\u542b\u307e\u306a\u3044\u3051\u3069\u3001ID \u30c8\u30fc\u30af\u30f3\u306b\u306f\u542b\u307e\u308c\u3066\u3044\u308b\u3088\u3002) \u3068\u56de\u7b54\u3057\u3001\u8cea\u554f\u306e\u524d\u63d0\u6761\u4ef6\u3092\u4fee\u6b63\u3057\u3066\u3042\u3052\u307e\u3059\u3002\u3059\u308b\u3068\u3001\u3044\u3088\u3044\u3088\u3001OAuth \u6587\u8108\u306e\u8a8d\u53ef\u3068\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u306e\u8a8d\u53ef\u306e\u6df7\u4e71\u306b\u8d77\u56e0\u3059\u308b\u8cea\u554f\u304c\u3084\u3063\u3066\u304d\u307e\u3059\u3002\u305d\u306e\u8cea\u554f\u304c\u3053\u3061\u3089\u306e\u300cHow to verify which resources each user can access with OAuth and OpenID Connect?\u300d\u3067\u3059\u3002\n\u3053\u306e\u8cea\u554f\u306b\u5bfe\u3057\u3066\u306f\u3001\u79c1\u3082\u61c7\u5207\u4e01\u5be7\u306b\u56de\u7b54\u3057\u307e\u3057\u305f\u304c\u3001\u8981\u70b9\u306f\u3001\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u30b3\u30fc\u30c9\u306e\u958b\u59cb\u90e8\u5206\u3067\u6b21\u306e\u51e6\u7406\u3092\u304a\u3053\u306a\u3044\u307e\u3057\u3087\u3046\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n\n\n\n\u51e6\u7406\n\n\n\n\n1\n\u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u308a\u51fa\u3059\u3002 (RFC 6750)\n\n\n2\n\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u8a73\u7d30\u60c5\u5831\u3092\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306b\u554f\u3044\u5408\u308f\u305b\u308b\u3002 (RFC 7662)\n\n\n3\n\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u304c\u6709\u52b9\u304b\u3069\u3046\u304b\u3092\u8abf\u3079\u308b\u3002 (a) \u671f\u9650\u5207\u308c\u3057\u3066\u3044\u306a\u3044\u304b\u3001(b) \u5f53\u8a72\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306e\u306b\u5fc5\u8981\u306a\u6a29\u9650 (scope) \u3092\u30ab\u30d0\u30fc\u3057\u3066\u3044\u308b\u304b\u3001(c) \u53d6\u308a\u6d88\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u3001\u306a\u3069\u3002\n\n\n4\n\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u304b\u3089\u3001\u305d\u306e\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u7d10\u3065\u3044\u305f\u30e6\u30fc\u30b6\u30fc\u4e00\u610f\u8b58\u5225\u5b50\u3092\u53d6\u308a\u51fa\u3059\u3002\n\n\n5\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304b\u3089\u3001\u305d\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u5c5e\u6027\u60c5\u5831\u3092\u53d6\u308a\u51fa\u3059\u3002\n\n\n6\n\u30e6\u30fc\u30b6\u30fc\u306e\u5c5e\u6027\u60c5\u5831\u306b\u57fa\u3065\u3044\u3066\u6a5f\u80fd\u5236\u9650\u3092\u304b\u3051\u308b\u3002\n\n\n\n\u4e0a\u8a18\u30ea\u30b9\u30c8\u306e\u3046\u3061\u30011 \uff5e 3 \u307e\u3067\u304c\u3001OAuth \u6587\u8108\u306b\u304a\u3051\u308b\u8a8d\u53ef\u306e\u51e6\u7406\u3067\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3068\u306a\u308a\u307e\u3059\u3002\u4e00\u65b9\u30014 \uff5e 6 \u307e\u3067\u306f\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u306b\u304a\u3051\u308b\u8a8d\u53ef\u306e\u51e6\u7406\u3067\u3001\u30e6\u30fc\u30b6\u30fc\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3068\u306a\u308a\u307e\u3059\u3002\n\n2.2. \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u53d7\u3051\u53d6\u308a\u65b9\n\n\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306f\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u63d0\u793a\u3055\u308c\u308b\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u3069\u306e\u3088\u3046\u306b\u53d7\u3051\u53d6\u308b\u3079\u304d\u3067\u3057\u3087\u3046\u304b\uff1f \u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u5e7e\u3089\u3067\u3082\u8003\u6848\u3059\u308b\u3053\u3068\u306f\u53ef\u80fd\u3067\u3059\u304c\u3001\u8eca\u8f2a\u3092\u518d\u767a\u660e\u3059\u308b\u5fc5\u8981\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u3002 \u65e2\u306b RFC 6750 (The OAuth 2.0 Authorization Framework: Bearer Token Usage) \u306b\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d7\u3051\u53d6\u308b\u65b9\u6cd5\u304c\u4e09\u3064\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\nAuthorization \u30d8\u30c3\u30c0\u30fc (2.1. Authorization Request Header Field)\n\naccess_token \u30d5\u30a9\u30fc\u30e0\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc (2.2. Form-Encoded Body Parameter)\n\naccess_token \u30af\u30a8\u30ea\u30fc\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc (2.3. URI Query Parameter)\n\n\u3053\u308c\u3089\u4e09\u3064\u306e\u3046\u3061\u3067\u6700\u3082\u671b\u307e\u3057\u3044\u65b9\u6cd5\u306f\u4e00\u756a\u76ee\u306e\u3082\u306e\u3067\u3001RFC 6750 \u3067\u306f\u3053\u306e\u65b9\u6cd5\u306b\u3064\u3044\u3066 \"Resource servers MUST support this method.\" (\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u306f\u3053\u306e\u65b9\u6cd5\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044) \u3068\u8a00\u3063\u3066\u3044\u307e\u3059\u3002\nAuthorization \u30d8\u30c3\u30c0\u30fc\u306b\u3088\u308b\u65b9\u6cd5\u3092\u7528\u3044\u308b\u5834\u5408\u3001\u30b9\u30ad\u30fc\u30e0\u306f Bearer \u3068\u3044\u3046\u7d04\u675f\u3067\u3059\u306e\u3067\u3001\nAuthorization: Bearer {access-token}\n\n\u3068\u3044\u3046 HTTP \u30d8\u30c3\u30c0\u30fc\u3092\u542b\u3080\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u5c4a\u304f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n2.2.1. {access-token} \u306e\u5024\n\n\u4e0a\u8a18\u306e {access-token} \u306e\u90e8\u5206\u306b\u306f\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u4e8b\u524d\u306b\u767a\u884c\u3092\u53d7\u3051\u3066\u3044\u305f\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u305d\u306e\u307e\u307e\u30bb\u30c3\u30c8\u3059\u308c\u3070\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u3053\u3053\u306b\u306f\u3061\u3087\u3063\u3068\u3057\u305f\u7f60\u304c\u3042\u308a\u307e\u3059\u3002\u4f59\u8ac7\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u3069\u3046\u3044\u3046\u7f60\u304b\u3068\u8a00\u3046\u3068\u3001\u307e\u305a\u3001RFC 6750 \u3067\u306f Authorization \u30d8\u30c3\u30c0\u30fc\u306e\u5024\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092\u6b21\u306e\u3088\u3046\u306b\u5b9a\u3081\u3066\u3044\u307e\u3059\u3002\nb64token    = 1*( ALPHA / DIGIT /\n                  \"-\" / \".\" / \"_\" / \"~\" / \"+\" / \"/\" ) *\"=\"\ncredentials = \"Bearer\" 1*SP b64token\n\n\u3064\u307e\u308a\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u8868\u73fe\u3068\u3057\u3066\u4f7f\u3048\u308b\u6587\u5b57\u3092 Base64 \u7cfb\u306e\u6587\u5b57\u306e\u307f\u306b\u9650\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002 b64token \u3068\u3044\u3046\u8868\u8a18\u3092\u7528\u3044\u3066\u3044\u308b\u3053\u3068\u3084\u3001\u3053\u306e\u524d\u6bb5\u3067\u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u306b\u8a00\u53ca\u3057\u3066\u3044\u308b\u3053\u3068\u3082\u3042\u308a (\u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u3067\u306f Authorization \u30d8\u30c3\u30c0\u30fc\u306e\u5024\u3092\u751f\u6210\u3059\u308b\u969b\u306b Base64 \u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u51e6\u7406\u304c\u5165\u308a\u307e\u3059\u3002) \u3001\u8aad\u8005\u306b\u306f Base64 \u304c\u5237\u308a\u8fbc\u307e\u308c\u307e\u3059\u3002\n\u4e00\u65b9\u3001RFC 6749 \u3067\u306f\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u3064\u3044\u3066\u306f\u300c\u6587\u5b57\u5217\u3067\u3042\u308b\u300d\u3068\u3057\u304b\u66f8\u3044\u3066\u3044\u307e\u305b\u3093\u3002\n\u3053\u3053\u3067\u3001{access-token} \u306b\u30bb\u30c3\u30c8\u3059\u308b\u5024\u306b\u3064\u3044\u3066\u3001\u4e8c\u3064\u306e\u9078\u629e\u80a2\u304c\u51fa\u3066\u304d\u307e\u3059\u3002 (1) {access-token} \u306b\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u53d7\u3051\u53d6\u3063\u305f\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u305d\u306e\u307e\u307e\u30bb\u30c3\u30c8\u3059\u308b\u306e\u304b\u3001\u305d\u308c\u3068\u3082\u3001(2) \u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u53d7\u3051\u53d6\u3063\u305f\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b Base64 \u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3092\u65bd\u3057\u305f\u3082\u306e\u3092\u30bb\u30c3\u30c8\u3059\u308b\u306e\u304b\u3001\u306e\u4e8c\u3064\u306e\u9078\u629e\u80a2\u3067\u3059\u3002\u3082\u3057 (1) \u3060\u3068\u3059\u308b\u3068\u3001RFC 6750 \u306e\u8981\u6c42\u4e8b\u9805\u306b\u3088\u308a\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u4f7f\u3048\u308b\u6587\u5b57\u7a2e\u306b RFC 6749 \u3088\u308a\u3082\u53b3\u3057\u3044\u5236\u9650\u304c\u304b\u304b\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u3064\u307e\u308a\u3001RFC 6750 \u306f\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u53d7\u3051\u53d6\u308a\u65b9\u3092\u898f\u5b9a\u3059\u308b\u3068\u540c\u6642\u306b\u3001\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u88c5\u65b9\u6cd5 (\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u8868\u73fe\u65b9\u6cd5) \u306b\u3064\u3044\u3066\u3082\u6697\u9ed9\u7684\u306b\u8981\u6c42\u4ed5\u69d8\u3092\u8ffd\u52a0\u3057\u3066\u3044\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u4e00\u65b9\u3001(2) \u3067\u3042\u308c\u3070\u3001\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u304c\u767a\u884c\u3059\u308b\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u306f\u3069\u3093\u306a\u6587\u5b57\u3092\u4f7f\u3063\u3066\u3082\u3088\u304f\u306a\u308a\u307e\u3059\u3002\n\u6b63\u89e3\u306f (1) \u306a\u306e\u3067\u3059\u304c\u3001(2) \u3068\u8003\u3048\u308b\u4eba\u304c\u51fa\u3066\u304d\u3066\u3082\u3084\u3080\u3092\u5f97\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u4e8b\u5b9f\u3001OAuth \u30ef\u30fc\u30ad\u30f3\u30b0\u30b0\u30eb\u30fc\u30d7\u306e\u30e1\u30fc\u30ea\u30f3\u30b0\u30ea\u30b9\u30c8\u306b\u3082\u4e0b\u8a18\u306e\u3088\u3046\u306a\u6295\u7a3f (question about the b64token syntax in draft-ietf-oauth-v2-bearer) \u304c\u3055\u308c\u3066\u3044\u3066\u3001\u305d\u308c\u306b\u3088\u308c\u3070\u3001\u6295\u7a3f\u8005\u81ea\u8eab\u3092\u542b\u3081\u8907\u6570\u4eba\u304c (2) \u3060\u3068\u8aa4\u89e3\u3057\u3066\u3044\u305f\u305d\u3046\u306a\u306e\u3067\u3059\u3002\n\nOn casual reading of \"The OAuth 2.0 Authorization Protocol: Bearer Tokens\"* I've encountered several people (including myself) who have made the assumption that the name b64token implies that some kind of base64 encoding/decoding on the access token is taking place between the client and RS.\nDigging a bit deeper in to \"HTTP/1.1, part 7: Authentication\"**, however, I see that b64token is just an ABNF syntax definition allowing for characters typically used in base64, base64url, etc.. So the b64token doesn't define any encoding or decoding but rather just defines what characters can be used in the part of the Authorization header that will contain the access token.\nDo I read this correctly?\nIf so, I feel like some additional clarifying text in the Bearer Tokens draft might help avoid what is (based on my small sample) a common point of misunderstanding.\nAlso, does the use of b64token implicitly limit the allowed characters that an AS can use to construct a bearer access token?\nThanks,\nBrian\n\n\u304b\u304f\u3044\u3046\u79c1\u3082\u8aa4\u89e3\u3057\u3066\u3044\u307e\u3057\u305f\u3002\u300c\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u53d7\u3051\u53d6\u308a\u65b9\u306e\u8a71\u3092\u3057\u3066\u3044\u308b\u6700\u4e2d\u306b\u3001\u3055\u3089\u308a\u3068\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u88c5\u65b9\u6cd5\u306b\u8981\u6c42\u4ed5\u69d8\u3092\u8ffd\u52a0\u3059\u308b\u306a\u3093\u3066\u3042\u308a\u3048\u308b\uff1f \u306a\u3044\u3067\u3057\u3087w\u300d\u3068\u8003\u3048\u305f\u304b\u3089\u3067\u3059\u3002\n\n2.2.2. \u5b9f\u969b\u306e\u30b3\u30fc\u30c9\u4f8b\n\nRFC 6750 \u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u4e09\u3064\u306e\u65b9\u6cd5\u3092\u5168\u3066\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u30b3\u30fc\u30c9\u306f\u3001Sinatra (Ruby) \u3067\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n# \u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u308a\u51fa\u3059\u30e1\u30bd\u30c3\u30c9\ndef extract_access_token(request)\n  # Authorization \u30d8\u30c3\u30c0\u30fc\u306e\u5024\n  header = request.env[\"HTTP_AUTHORIZATION\"]\n\n  # \"Bearer {access-token}\" \u3068\u3044\u3046\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u3042\u308c\u3070\n  if /^Bearer[ ]+(.+)/i =~ header\n    # Authorization \u30d8\u30c3\u30c0\u30fc\u304b\u3089\u53d6\u308a\u51fa\u3057\u305f\u5024\u3092\u8fd4\u3059\u3002\n    return $1\n  end\n\n  # \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc access_token \u306e\u5024\u3092\u8fd4\u3059\u3002\n  return request[\"access_token\"]\nend\n\n# GET \u30e1\u30bd\u30c3\u30c9\u306e\u4f8b\nget '/hello' do\n  # \u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u308a\u51fa\u3059\u3002\n  access_token = extract_access_token(request)\nend\n\nPHP \u3060\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u3002\u306a\u304a\u3001Stack Overflow \u306e\u300cGetting response as 'Unauthorized' while sending access token via URI Query Parameter\u300d\u3068\u3044\u3046\u8cea\u554f\u306b\u3088\u308b\u3068\u3001Yii \u3068\u3044\u3046 PHP \u7cfb\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u306f\u3001Authorization \u30d8\u30c3\u30c0\u30fc\u4ee5\u5916\u306e\u65b9\u6cd5\u3067\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d7\u3051\u53d6\u308c\u306a\u3044\u3088\u3046\u3067\u3059\u3002(\u4e0b\u8a18\u306e\u30b3\u30fc\u30c9\u306f\u305d\u306e\u8cea\u554f\u306b\u5bfe\u3059\u308b\u79c1\u306e\u56de\u7b54\u306b\u542b\u3081\u305f\u30b3\u30fc\u30c9\u3067\u3059\u3002)\n/**\n * \u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u308a\u51fa\u3059\u95a2\u6570\n */\nfunction extract_access_token()\n{\n    // Authorization \u30d8\u30c3\u30c0\u30fc\u306e\u5024\n    $header = $_SERVER['HTTP_AUTHORIZATION'];\n\n    // \"Bearer {access-token}\" \u3068\u3044\u3046\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u3042\u308c\u3070\n    if ($header != null && preg_match('/^Bearer[ ]+(.+)/i', $header, $captured))\n    {\n        // Authorization \u30d8\u30c3\u30c0\u30fc\u304b\u3089\u53d6\u308a\u51fa\u3057\u305f\u5024\u3092\u8fd4\u3059\u3002\n        return $captured;\n    }\n\n    if ($_SERVER['REQUEST_METHOD'] == 'GET')\n    {\n        // \u30af\u30a8\u30ea\u30fc\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc access_token \u306e\u5024\u3092\u8fd4\u3059\u3002\n        return $_GET['access_token'];\n    }\n    else\n    {\n        // \u30d5\u30a9\u30fc\u30e0\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc access_token \u306e\u5024\u3092\u8fd4\u3059\u3002\n        return $_POST['access_token'];\n    }\n}\n\nJAX-RS (Java) (JSR-339) \u3067\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\nprivate static final Pattern CHALLENGE_PATTERN\n    = Pattern.compile(\"^Bearer *([^ ]+) *$\", Pattern.CASE_INSENSITIVE);\n\n/**\n * GET \u30e1\u30bd\u30c3\u30c9\u306e\u4f8b\n */\n@GET\npublic Response get(\n    @HeaderParam(HttpHeaders.AUTHORIZATION) String authorization,\n    @QueryParam(\"access_token\") String accessToken)\n{\n    // Authorization \u30d8\u30c3\u30c0\u30fc\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u308a\u51fa\u3059\u304b\u3001\n    // \u307e\u305f\u306f\u3001\u30af\u30a8\u30ea\u30fc\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc access_token \u306e\u5024\u3092\u4f7f\u3046\u3002\n    accessToken = extractAccessToken(authorization, accessToken);\n}\n\n/**\n * Authorization \u30d8\u30c3\u30c0\u30fc\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u308a\u51fa\u3059\u304b\u3001\n * \u3082\u3057\u304f\u306f access_token \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306e\u5024\u3092\u8fd4\u3059\u3002\n */\nprivate static String extractAccessToken(\n    String authorization, String accessToken)\n{\n    // \u30ea\u30af\u30a8\u30b9\u30c8\u306b Authorization \u30d8\u30c3\u30c0\u30fc\u304c\u542b\u307e\u308c\u3066\u3044\u306a\u3044\u5834\u5408\n    if (authorization == null)\n    {\n        // \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc access_token \u306e\u5024\u3092\u8fd4\u3059\u3002\n        return accessToken;\n    }\n\n    // Authorization \u30d8\u30c3\u30c0\u30fc\u306e\u5024\u306b\u5bfe\u3057\u3066\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u30f3\u30b0\u3092\u304a\u3053\u306a\u3046\u3002\n    Matcher matcher = CHALLENGE_PATTERN.matcher(authorization);\n\n    // Authorization \u30d8\u30c3\u30c0\u30fc\u306e\u5024\u304c \"Bearer {access-token}\" \u3068\u3044\u3046\n    // \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u3042\u308c\u3070\n    if (matcher.matches())\n    {\n        // Authorization \u30d8\u30c3\u30c0\u30fc\u304b\u3089\u53d6\u308a\u51fa\u3057\u305f\u5024\u3092\u8fd4\u3059\u3002\n        return matcher.group(1);\n    }\n    else\n    {\n        // \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc access_token \u306e\u5024\u3092\u8fd4\u3059\u3002\n        return accessToken;\n    }\n}\n\n\n2.3. \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u60c5\u5831\u306e\u53d6\u5f97\u65b9\u6cd5\n\n\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u7d10\u4ed8\u304f\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u3067\u3059\u304c\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u304c\u60c5\u5831\u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u65b9\u5f0f\u3067\u3042\u308c\u3070\u3001\u305d\u308c\u3092\u30c7\u30b3\u30fc\u30c9\u3059\u308b\u3060\u3051\u3067\u6e08\u307f\u307e\u3059 (\u524d\u8a18\u4e8b\u53c2\u7167)\u3002\u3053\u3053\u3067\u306f\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u305d\u306e\u3082\u306e\u306f\u7121\u610f\u5473\u306a\u6587\u5b57\u5217\u3067\u3001\u60c5\u5831\u306f\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5185\u306b\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u30b1\u30fc\u30b9\u306b\u3064\u3044\u3066\u306e\u307f\u8003\u3048\u307e\u3059\u3002\n\u3042\u306a\u305f\u306e\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3067\u306f\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u53d6\u308a\u51fa\u3057\u305f\u5f8c\u3001\u305d\u308c\u306b\u7d10\u4ed8\u304f\u60c5\u5831\u3092\u3069\u306e\u3088\u3046\u306b\u53d6\u5f97\u3057\u3066\u3044\u308b\u3067\u3057\u3087\u3046\u304b\uff1f \u3082\u3057\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30af\u30a8\u30ea\u30fc\u3092\u767a\u884c\u3057\u3066\u3044\u308b\u306e\u3067\u3042\u308c\u3070\u3001\u305d\u308c\u306f\u3001\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u3068\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u304c\u5bc6\u7d50\u5408\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002\u3057\u304b\u3057\u3001OAuth \u306e\u4ed5\u69d8\u4e0a\u306f\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u3068\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u306f\u5225\u3005\u306e\u3082\u306e\u306a\u306e\u3067\u3001\u3053\u308c\u3089\u4e8c\u3064\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u5171\u6709\u3057\u306a\u3044\u3088\u3046\u306b\u5b9f\u88c5\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u5171\u6709\u3057\u306a\u3044\u5b9f\u88c5\u3068\u3057\u305f\u5834\u5408\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u60c5\u5831\u3092\u5f97\u308b\u305f\u3081\u3001\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u306f\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306b\u554f\u3044\u5408\u308f\u305b\u3092\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\u305d\u3057\u3066\u3001\u305d\u306e\u554f\u3044\u5408\u308f\u305b\u65b9\u6cd5\u306f\u3001\u3057\u3070\u3089\u304f\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u5b9f\u88c5\u4f9d\u5b58\u3067\u3057\u305f\u304c\u30012015 \u5e74 10 \u6708\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f RFC 7662 (OAuth 2.0 Token Introspection) \u306b\u3088\u3063\u3066\u6a19\u6e96\u5316\u3055\u308c\u307e\u3057\u305f\u3002\nRFC 7662 \u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306f\u3001\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 (Introspection Endpoint) \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u3053\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b token \u30d1\u30e9\u30e1\u30fc\u30bf\u30fc (\u5fc5\u9808) \u3068 token_type_hint \u30d1\u30e9\u30e1\u30fc\u30bf\u30fc (\u30aa\u30d7\u30b7\u30e7\u30ca\u30eb) \u3092\u4ed8\u3051\u3066 HTTP POST \u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u308b\u3068\u3001\u60c5\u5831\u304c JSON \u5f62\u5f0f\u3067\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\u4e0b\u8a18\u306f\u3001RFC 7662 \u304b\u3089\u629c\u7c8b\u3057\u305f\u30ea\u30af\u30a8\u30b9\u30c8\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u4f8b\u3067\u3059\u3002\nPOST /introspect HTTP/1.1\nHost: server.example.com\nAccept: application/json\nContent-Type: application/x-www-form-urlencoded\nAuthorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW\n\ntoken=mF_9.B5f-4.1JqM&token_type_hint=access_token\n\nHTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n \"active\": true,\n \"client_id\": \"l238j323ds-23ij4\",\n \"username\": \"jdoe\",\n \"scope\": \"read write dolphin\",\n \"sub\": \"Z5O3upPC88QrAjx00dis\",\n \"aud\": \"https://protected.example.net/resource\",\n \"iss\": \"https://server.example.com/\",\n \"exp\": 1419356238,\n \"iat\": 1419350238,\n \"extension_field\": \"twenty-seven\"\n}\n\n\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089\u306e\u5fdc\u7b54\u306b\u542b\u307e\u308c\u308b sub \u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u306e\u5024\u304c\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u7d10\u4ed8\u3051\u3089\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306e\u4e00\u610f\u8b58\u5225\u5b50\u3067\u3059\u3002\u305f\u3060\u3057\u3001\u3053\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u306f\u4ed5\u69d8\u4e0a\u30aa\u30d7\u30b7\u30e7\u30ca\u30eb\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u7279\u306b\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u30ba\u30d5\u30ed\u30fc\u3067\u767a\u884c\u3055\u308c\u305f\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u3064\u3044\u3066\u306f\u3001\u7d10\u4ed8\u304f\u30e6\u30fc\u30b6\u30fc\u304c\u3044\u306a\u3044\u306e\u3067\u3001\u5024\u306f null \u306b\u306a\u308b\u306f\u305a\u3067\u3059\u3002\n\n2.4. \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\n\n\n2.4.1. \u78ba\u8a8d\u9805\u76ee\n\n\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u60c5\u5831\u306e\u53d6\u5f97\u5f8c\u3001\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u884c\u3044\u307e\u3059\u3002\u57fa\u672c\u7684\u306b\u306f\u6b21\u306e\u9805\u76ee\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\n\n\n\u78ba\u8a8d\u9805\u76ee\n\n\n\n\n1\n\u6709\u52b9\u671f\u9650\u304c\u5207\u308c\u3066\u3044\u306a\u3044\u3053\u3068\n\n\n2\n\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306b\u5fc5\u8981\u306a\u6a29\u9650 (scope) \u3092\u30ab\u30d0\u30fc\u3057\u3066\u3044\u308b\u3053\u3068\n\n\n3\n\u53d6\u308a\u6d88\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\n\n\n\n\u307e\u305f\u3001\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u8981\u4ef6\u306b\u3088\u3063\u3066\u306f\u3001\n\n\n\n\n\u78ba\u8a8d\u9805\u76ee\n\n\n\n\n4\n\u7279\u5b9a\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u7d10\u4ed8\u3044\u3066\u3044\u308b\u3053\u3068\n\n\n\n\u3092\u8ffd\u52a0\u3067\u78ba\u8a8d\u3057\u305f\u3044\u30b1\u30fc\u30b9\u3082\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n2.4.2. Amazon API Gateway Custom Authorization\n\n\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306b\u95a2\u9023\u3057\u3066\u3001\u6642\u4e8b\u30cd\u30bf\u3092\u4e00\u3064\u3002\n2016 \u5e74 2 \u6708 11 \u65e5\u306b AWS Compute Blog \u306e\u300cIntroducing custom authorizers in Amazon API Gateway\u300d\u3068\u3044\u3046\u8a18\u4e8b\u3067\u3001Amazon API Gateway \u306b Custom Authorizer \u3068\u3044\u3046\u4ed5\u7d44\u307f\u304c\u5c0e\u5165\u3055\u308c\u305f\u3053\u3068\u304c\u30a2\u30ca\u30a6\u30f3\u30b9\u3055\u308c\u307e\u3057\u305f\u3002\n\u3053\u308c\u306b\u3088\u308a\u3001Amazon API Gateway \u3067\u69cb\u7bc9\u3055\u308c\u305f API \u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c (OAuth \u3084 SAML \u7b49\u306e) Bearer \u30c8\u30fc\u30af\u30f3\u3092\u63d0\u793a\u3057\u3066\u304d\u305f\u3068\u304d\u3001\u305d\u306e\u30c8\u30fc\u30af\u30f3\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u5916\u90e8\u306e authorizer (\u8a8d\u53ef\u8005) \u306b\u59d4\u8b72\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u4e0b\u56f3\u306f\u30aa\u30f3\u30e9\u30a4\u30f3\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u300cEnable Amazon API Gateway Custom Authorization\u300d\u304b\u3089\u306e\u8ee2\u8f09\u3067\u3001\u56f3\u4e2d\u306e\u4e0a\u90e8\u306b\u3042\u308b\u300cLambda Auth function\u300d\u3068\u3044\u3046\u3082\u306e\u304c authorizer \u306b\u3042\u305f\u308a\u307e\u3059\u3002\u3053\u306e authorizer \u3068 API Gateway \u304c\u3084\u308a\u3068\u308a\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u30c8\u30fc\u30af\u30f3\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u304a\u3053\u306a\u3044\u307e\u3059\u3002\n\nAmazon API Gateway \u672c\u4f53\u304c OAuth \u30b5\u30fc\u30d0\u30fc\u6a5f\u80fd\u3092\u63d0\u4f9b\u3057\u3066\u3044\u306a\u3044\u70b9\u306b\u5909\u308f\u308a\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3053\u306e\u4ed5\u7d44\u307f\u3092\u4f7f\u3048\u3070\u3001Amazon API Gateway \u4e0a\u306b\u69cb\u7bc9\u3055\u308c\u305f API \u3092 OAuth \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3067\u4fdd\u8b77\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3068\u306a\u308a\u307e\u3059\u3002\n[2016/03/02]\n\u300cAmazon API Gateway \u306e Custom Authorizer \u3092\u4f7f\u3044\u3001OAuth \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3067 API \u3092\u4fdd\u8b77\u3059\u308b\u300d\u3068\u3044\u3046\u8a18\u4e8b\u3092\u66f8\u304d\u307e\u3057\u305f\u306e\u3067\u3001\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\u306a\u304a\u3001\u3053\u306e\u4ed5\u7d44\u307f\u304c\u3067\u304d\u308b\u307e\u3067\u306f\u3001Amazon API Gateway + AWS Lambda \u3067 OAuth \u3092\u3084\u308d\u3046\u3068\u3059\u308b\u3068\u3001Lambda Function \u306e\u5b9f\u88c5\u5185\u3067\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u60c5\u5831\u53d6\u5f97\u3068\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u3084\u3089\u306a\u3051\u308c\u3070\u306a\u3089\u305a\u3001\u8a66\u307f\u308b\u4eba\u306f\u307b\u3068\u3093\u3069\u3044\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u305d\u306e\u305f\u3081\u3001\u79c1\u304c\u6628\u5e74 10 \u6708\u672b\u306b Authlete \u3092\u4f7f\u3063\u3066\u5b9f\u88c5\u3057\u305f\u3068\u304d\u306b\u306f\u3061\u3087\u3063\u3068\u3057\u305f\u8a71\u984c\u306b\u306a\u308a\u3001AWS \u30c1\u30fc\u30d5\u30a8\u30d0\u30f3\u30b8\u30a7\u30ea\u30b9\u30c8\u306e Jeff Barr \u3055\u3093\u306b\u3082 Wow \u3068\u8a00\u3063\u3066\u3044\u305f\u3060\u3051\u307e\u3057\u305f\u3002\n\n2.5. \u30a8\u30e9\u30fc\u5fdc\u7b54\n\nRFC 6750 \u3067\u306f\u3001\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u30a8\u30e9\u30fc\u5fdc\u7b54\u306b\u3064\u3044\u3066\u3082\u5b9a\u3081\u3066\u3044\u307e\u3059\u3002\u7279\u5fb4\u7684\u306a\u306e\u306f\u3001\u30a8\u30e9\u30fc\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092 WWW-Authenticate \u30d8\u30c3\u30c0\u30fc\u306b\u57cb\u3081\u8fbc\u3080\u3053\u3068\u3067\u3059 (3. The WWW-Authenticate Response Header Field)\u3002\u4e0b\u8a18\u306f\u3001\u30aa\u30d7\u30b7\u30e7\u30ca\u30eb\u306e\u9805\u76ee\u3092\u3059\u3079\u3066\u542b\u3080\u30a8\u30e9\u30fc\u5fdc\u7b54\u306e\u4f8b\u3067\u3059\u3002\nHTTP/1.1 401 Unauthorized\nWWW-Authenticate: Bearer realm=\"example\",\n  error=\"invalid_token\",\n  error_description=\"The access token expired\",\n  error_uri=\"https://example.com/error/E001\",\n  scope=\"openid profile email\"\n\n\u30a8\u30e9\u30fc\u5fdc\u7b54\u5185\u306e error \u304c\u53d6\u308a\u3046\u308b\u5024\u3068\u3057\u3066\u3001RFC 6750 \u306e 3.1. Error Codes \u306b\u6b21\u306e\u4e09\u3064\u304c\u30ea\u30b9\u30c8\u3055\u308c\u3066\u304a\u308a\u3001\u30a8\u30e9\u30fc\u306e\u539f\u56e0\u306b\u3088\u3063\u3066\u4f7f\u3044\u5206\u3051\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\n\n\u8aac\u660e\n\n\n\n\ninvalid_request\n\u5fc5\u8981\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u304c\u542b\u307e\u308c\u3066\u3044\u306a\u3044\u7b49\n\n\ninvalid_token\n\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u304c\u7121\u52b9\n\n\ninsufficient_scope\n\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u304c\u5341\u5206\u306a\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u306a\u3044\n\n\n\nerror_description \u3068 error_uri \u306f\u3001\u305d\u308c\u305e\u308c\u3001\u30a8\u30e9\u30fc\u306b\u95a2\u3059\u308b\u8aac\u660e\u3068\u3001\u30a8\u30e9\u30fc\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092\u542b\u3080\u30da\u30fc\u30b8\u3078\u306e URL \u3067\u3059\u3002\u307e\u305f\u3001scope \u306f\u3001\u305d\u306e\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u6a29\u9650\u7fa4\u306e\u30ea\u30b9\u30c8\u3067\u3059\u3002\n\n2.6. \u60c5\u5831\u53d6\u5f97 + \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\n\n\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u305f\u3042\u3068\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u4f5c\u696d\u306f\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u5b9f\u88c5\u5185\u3067\u304a\u3053\u306a\u3044\u307e\u3059\u304c\u3001\u6709\u52b9\u671f\u9650\u306e\u30c1\u30a7\u30c3\u30af\u3084\u5fc5\u8981\u306a\u6a29\u9650\u304c\u30ab\u30d0\u30fc\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u306e\u30c1\u30a7\u30c3\u30af\u306a\u3069\u306f\u3001\u6c7a\u307e\u308a\u304d\u3063\u305f\u51e6\u7406\u3067\u3059\u3002\u3067\u3059\u306e\u3067\u3001\u3044\u3063\u305d\u306e\u3053\u3068\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u52a0\u3048\u3066\u3001\u547c\u3073\u51fa\u3057\u5143\u306e\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304c\u8981\u6c42\u3059\u308b\u30b9\u30b3\u30fc\u30d7\u306e\u30ea\u30b9\u30c8\u3082\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u6e21\u3057\u3001\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u3084\u3063\u3066\u3082\u3089\u3046\u3053\u3068\u306b\u3059\u308c\u3070\u3001\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u5b9f\u88c5\u306f\u697d\u306b\u306a\u308a\u307e\u3059\u3002\u3055\u3089\u306b\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u304c\u7121\u52b9\u3067\u3042\u3063\u305f\u5834\u5408\u306b\u7528\u610f\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u30a8\u30e9\u30fc\u60c5\u5831 (= \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u8fd4\u3059\u30a8\u30e9\u30fc\u5fdc\u7b54\u306b\u542b\u3081\u308b WWW-Authenticate \u30d8\u30c3\u30c0\u30fc\u306e\u5024) \u306e\u751f\u6210\u307e\u3067\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u3084\u3063\u3066\u304f\u308c\u308c\u3070\u3001\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u5b9f\u88c5\u306f\u3082\u3063\u3068\u697d\u306b\u306a\u308a\u307e\u3059\u3002\n\u3064\u307e\u308a\u3001\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u4ed5\u4e8b\u306e\u7bc4\u56f2\u304c\u3001\n\n\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u60c5\u5831\u306e\u63d0\u4f9b\n\n\u3060\u3051\u3067\u306f\u306a\u304f\u3001\n\n\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u60c5\u5831\u306e\u63d0\u4f9b\u3001\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3001RFC 6750 \u306b\u6e96\u62e0\u3059\u308b\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u751f\u6210\n\n\u307e\u3067\u5e83\u304c\u3063\u3066\u304f\u308c\u308c\u3070\u3001\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u5b9f\u88c5\u306f\u304b\u306a\u308a\u697d\u306b\u306a\u308b\u306f\u305a\u3067\u3059\u3002\n\u4f8b\u3048\u3070 Authlete \u306e\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306f\u3001RFC 7662 \u306b\u6e96\u62e0\u3057\u3066\u3044\u306a\u3044\u304b\u308f\u308a\u306b\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u60c5\u5831\u306e\u63d0\u4f9b\u306b\u52a0\u3048\u3066\u3001\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3084 RFC 6750 \u306b\u6e96\u62e0\u3059\u308b\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u751f\u6210\u3082\u884c\u3044\u307e\u3059\u3002\u3053\u306e\u304a\u304b\u3052\u3067\u3001\u300cAmazon API Gateway + AWS Lambda + OAuth\u300d\u3092\u5b9f\u73fe\u3057\u305f\u3068\u304d\u306e Lambda \u95a2\u6570\u306e\u5b9f\u88c5\u3067\u3042\u308b index.js \u3084\u3001\u300cAmazon API Gateway \u306e Custom Authorizer \u3092\u4f7f\u3044\u3001OAuth \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3067 API \u3092\u4fdd\u8b77\u3059\u308b\u300d\u3092\u5b9f\u73fe\u3057\u305f\u3068\u304d\u306e index.js\u3001\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u5b9f\u88c5 java-resource-server \u306b\u542b\u307e\u308c\u308b\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u4f8b\u3067\u3042\u308b CountryEndpoint.java \u3067\u306f\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u51e6\u7406\u3059\u308b\u30b3\u30fc\u30c9\u304c\u975e\u5e38\u306b\u77ed\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n2.7. \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u60c5\u5831\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d7\u3051\u53d6\u308b\u305f\u3073\u306b\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u3068\u901a\u4fe1\u3059\u308b\u3053\u3068\u3092\u907f\u3051\u308b\u305f\u3081\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u60c5\u5831\u3092\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u3066\u304a\u304f\u306e\u3082\u624b\u3067\u3059\u3002\u305f\u3060\u3057\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u3068\u3057\u3066\u6301\u3063\u3066\u304a\u304f\u6642\u9593\u306e\u9577\u3055\u306e\u5206\u3060\u3051\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u53d6\u308a\u6d88\u3057 (revocation) \u3092\u628a\u63e1\u3059\u308b\u306e\u304c\u6700\u5927\u3067\u30ad\u30e3\u30c3\u30b7\u30e5\u6642\u9593\u5206\u9045\u308c\u308b\u3001\u3068\u3044\u3046\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\u304c\u3042\u308a\u307e\u3059\u3002\u3057\u304b\u3057\u306a\u304c\u3089\u3001\u9006\u306b\u8a00\u3046\u3068\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u53d6\u308a\u6d88\u3057\u30a4\u30d9\u30f3\u30c8\u3092\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30b7\u30b9\u30c6\u30e0\u304c\u5b8c\u5168\u306b\u6355\u6349\u3067\u304d\u308b\u306e\u3067\u3042\u308c\u3070\u3001\u52b9\u7387\u7684\u306b\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u524d\u51fa\u306e Amazon API Gateway Custom Authorization \u3067\u306f\u3001authorizer \u306b\u3088\u308b\u51e6\u7406\u7d50\u679c\u3092 API Gateway \u5074\u3067\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u4fdd\u6301\u3059\u308b\u6642\u9593\u306f\u3001\u8a2d\u5b9a\u3067 0 \u79d2 (\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u306a\u3044) \uff5e 3,600 \u79d2\u306e\u9593\u3067\u9078\u3076\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f 300 \u79d2 (5 \u5206) \u3067\u3059\u3002\u30ad\u30e3\u30c3\u30b7\u30e5\u304c\u6709\u52b9\u306a\u9593\u306f authorizer \u306f\u547c\u3070\u308c\u307e\u305b\u3093\u3002\n\n2.8. \u56f3\u89e3\uff1a\u8a8d\u53ef\u30b3\u30fc\u30c9\u30d5\u30ed\u30fc\n\n\u305f\u3060\u3067\u3055\u3048\u767b\u5834\u4eba\u7269\u306e\u591a\u3044 OAuth \u306e\u4e16\u754c\u3067\u3001\u3055\u3089\u306b\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u3068\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u88c5\u3092\u5206\u5272\u3057\u3001\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u4e91\u3005\u3092\u8a00\u3044\u59cb\u3081\u308b\u3068\u3001\u5168\u4f53\u50cf\u306e\u628a\u63e1\u304c\u96e3\u3057\u304f\u306a\u308a\u307e\u3059\u3002\u305d\u3053\u3067\u3001\u30d5\u30ed\u30fc\u304c\u4e00\u756a\u8907\u96d1\u306b\u306a\u308b\u8a8d\u53ef\u30b3\u30fc\u30c9\u30d5\u30ed\u30fc\u3092\u56f3\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u9069\u5b9c\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044\u3002\n\n\n3. Authlete (\u30aa\u30fc\u30b9\u30ea\u30fc\u30c8)\n\n\u524d\u8a18\u4e8b\u300cOAuth 2.0 + OpenID Connect \u306e\u30d5\u30eb\u30b9\u30af\u30e9\u30c3\u30c1\u5b9f\u88c5\u8005\u304c\u77e5\u898b\u3092\u8a9e\u308b\u300d\u3092\u516c\u958b\u5f8c\u3001\u300c\u5fc5\u8981\u6700\u5c0f\u9650\u306e\u6a5f\u80fd\u3060\u3051\u3067\u3042\u308c\u3070 OpenID Connect \u306e\u5b9f\u88c5\u306f\u8a00\u3046\u307b\u3069\u96e3\u3057\u304f\u306f\u306a\u3044\u300d\u3068\u3044\u3046\u610f\u898b\u3092\u5e7e\u3064\u304b\u62dd\u898b\u3057\u307e\u3057\u305f\u3002\n\u8a00\u308f\u308c\u3066\u307f\u308c\u3070\u3001\u305d\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u5358\u306b\u3001\u30aa\u30d7\u30b7\u30e7\u30ca\u30eb\u6a5f\u80fd\u7fa4\u306e\u5b9f\u88c5\u3068 Authlete \u305d\u306e\u3082\u306e\u306e\u8a2d\u8a08\u30fb\u5b9f\u88c5\u304c\u5927\u5909\u3060\u3063\u305f\u3060\u3051\u306a\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u4ed5\u69d8\u66f8\u3092\u8aad\u307f\u8fbc\u3080\u306e\u304c\u5927\u5909\u3060\u3063\u305f\u306e\u3082\u3001\u4eca\u601d\u3048\u3070\u3001\u300c\u3067\u304d\u308b\u9650\u308a\u5168\u90e8\u5b9f\u88c5\u3059\u308b\u300d\u3068\u3044\u3046\u6c17\u6301\u3061\u3067\u8aad\u3093\u3067\u3044\u305f\u304b\u3089\u5927\u5909\u3060\u3063\u305f\u306e\u3067\u3042\u3063\u3066\u3001\u300cMUST \u4ee5\u5916\u306f\u8aad\u307e\u306a\u3044\u300d\u3068\u3044\u3046\u614b\u5ea6\u3060\u3063\u305f\u306e\u3067\u3042\u308c\u3070\u697d\u3060\u3063\u305f\u3053\u3068\u3067\u3057\u3087\u3046\u3002 \u7279\u306b\u3001OpenID Provider Metadata \u306e request_parameter_supported \u3068 request_uri_parameter_supported \u306b false \u3092\u8a2d\u5b9a\u3057\u3001OpenID Connect Core 1.0 \u306e 6. Passing Request Parameters as JWTs \u3092\u4e38\u3054\u3068\u7121\u8996\u3057\u3066\u3044\u305f\u3089\u3001\u304b\u306a\u308a\u697d\u3067\u304d\u305f\u306b\u9055\u3044\u3042\u308a\u307e\u305b\u3093\u3002\u30ea\u30af\u30a8\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001request_uri \u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3067\u6307\u5b9a\u3055\u308c\u305f\u5834\u6240\u304b\u3089\u30ea\u30af\u30a8\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30d5\u30a7\u30c3\u30c1\u3057\u3001\u305d\u308c\u304c\u975e\u5bfe\u79f0\u9375\u7cfb\u306e\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3067\u7f72\u540d\u30fb\u6697\u53f7\u5316\u3055\u308c\u3066\u3044\u305f\u3089\u3001\u52a0\u3048\u3066\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e jwks_uri \u304b\u3089 JWK Set \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u30d5\u30a7\u30c3\u30c1\u3057\u3066\u3001\u305d\u308c\u3092\u7528\u3044\u3066\u30ea\u30af\u30a8\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5fa9\u53f7\u5316\u3068\u7f72\u540d\u691c\u8a3c\u3092\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\u3082\u3061\u308d\u3093\u3001\u6bce\u56de\u30d5\u30a7\u30c3\u30c1\u3059\u308b\u306e\u306f\u3088\u308d\u3057\u304f\u306a\u3044\u306e\u3067\u3001RFC 2616, 13.2.4 Expiration Calculations \u306e\u8a08\u7b97\u5f0f\u306b\u57fa\u3065\u3044\u3066\u6709\u52b9\u671f\u9593\u3092\u8a08\u7b97\u3057\u3001\u9069\u5b9c\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u3053\u3068\u3082\u5fc5\u8981\u3067\u3059\u3002\u3057\u304b\u3057\u306a\u304c\u3089\u3001\u3053\u3053\u307e\u3067\u9811\u5f35\u3063\u3066\u304a\u3044\u3066\u306a\u3093\u3067\u3059\u304c\u3001\u6b63\u76f4\u30ea\u30af\u30a8\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f7f\u3046\u4eba\u306f\u3044\u306a\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001\u30aa\u30d7\u30b7\u30e7\u30ca\u30eb\u6a5f\u80fd\u7fa4\u306e\u8a71\u3092\u8107\u306b\u7f6e\u3044\u305f\u3068\u3057\u3066\u3082\u3001\u5358\u7d14\u306b IdP \u3092\uff11\u30bb\u30c3\u30c8\u5b9f\u88c5\u3059\u308b\u3053\u3068\u3068 Authlete \u306e\u3088\u3046\u306a\u3082\u306e\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u3068\u3067\u306f\u3001\u96e3\u6613\u5ea6\u304c\u7570\u306a\u308a\u307e\u3059\u3002\u305b\u3063\u304b\u304f\u3067\u3059\u306e\u3067\u3001Authlete \u56fa\u6709\u306e\u8a71\u3092\u3055\u305b\u3066\u3044\u305f\u3060\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\u4e16\u306e\u4e2d\u306b\u5e7e\u3064\u3082\u5b58\u5728\u3059\u308b OAuth 2.0 + OpenID Connect \u30b5\u30fc\u30d0\u30fc\u5b9f\u88c5\u306e\u4e00\u4f8b\u306b\u904e\u304e\u307e\u305b\u3093\u304c\u3001\u53c2\u8003\u306b\u306a\u308b\u90e8\u5206\u3082\u3042\u308b\u3053\u3068\u3068\u601d\u3044\u307e\u3059\u3002\n\n3.1. \u5168\u3066\u304c Web API\n\nAuthlete \u306f OAuth 2.0 \u3068 OpenID Connect \u306e\u5b9f\u88c5\u3092\u30af\u30e9\u30a6\u30c9\u3067\u63d0\u4f9b\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\u3057\u304b\u3057\u3053\u308c\u306f\u3001\u5358\u306b\u30af\u30e9\u30a6\u30c9\u4e0a\u306e\u30de\u30b7\u30f3\u3067 OpenAM \u306e\u3088\u3046\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u304c\u52d5\u3044\u3066\u3044\u308b\u3068\u3044\u3046\u5358\u7d14\u306a\u8a71\u3067\u306f\u306a\u3044\u306e\u3067\u3059\u3002\nAuthlete \u304c\u4ed6\u306e\u5b9f\u88c5\u3068\u7570\u306a\u3063\u3066\u3044\u308b\u306e\u306f\u3001\u307e\u305a\u3001OAuth 2.0 + OpenID Connect \u30b5\u30fc\u30d0\u30fc\u3092\u5b9f\u88c5\u3059\u308b\u306e\u306b\u5fc5\u8981\u306a\u6a5f\u80fd\u3092\u5168\u3066 Web API \u3068\u3057\u3066\u8a2d\u8a08\u30fb\u5b9f\u88c5\u3057\u305f\u70b9\u3067\u3059\u3002\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u767b\u9332\u7ba1\u7406\u3084\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306e\u30e1\u30bf\u60c5\u5831\u66f4\u65b0\u6a5f\u80fd\u3092 Web API \u3067\u63d0\u4f9b\u3057\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u3060\u3051\u306b\u3068\u3069\u307e\u308a\u307e\u305b\u3093\u3002\u305d\u308c\u3060\u3051\u3067\u306f\u306a\u304f\u3001\u8a8d\u53ef\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 (RFC 6749, 3.1)\u3001\u30c8\u30fc\u30af\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 (RFC 6749, 3.2)\u3001\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 (OIDC Core 1.0, 5.3)\u3001JWK Set \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 (RFC 7517)\u3001Revocation \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 (RFC 7009)\u3001\u30b3\u30f3\u30d5\u30a3\u30ae\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 (OIDC Discovery, 4) \u306a\u3069\u306e\u3001\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u7fa4\u306e\u5b9f\u88c5\u306b\u5fc5\u8981\u306a\u6a5f\u80fd\u3082\u5168\u3066 Web API \u5316\u3057\u305f\u306e\u3067\u3059\u3002\n\u4f8b\u3048\u3070\u3001\u8a8d\u53ef\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u5b9f\u88c5\u3059\u308b\u305f\u3081\u306e Web API \u3068\u3057\u3066\u3001Authlete \u306f\u6b21\u306e\u4e09\u3064\u306e Web API \u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3089\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u7528\u3044\u308b\u3053\u3068\u3067\u3001OAuth 2.0 \u3068 OpenID Connect \u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u8a8d\u53ef\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\n\n\nAPI \u30d1\u30b9\n\u5f79\u5272\n\n\n\n\n1\n/api/auth/authorization\n\u8a8d\u53ef\u8981\u6c42\u51e6\u7406\u3068\u8a8d\u53ef\u753b\u9762\u751f\u6210\u306b\u5fc5\u8981\u306a\u60c5\u5831\u306e\u6e96\u5099\n\n\n2\n/api/auth/authorization/issue\n\u30c8\u30fc\u30af\u30f3\u7fa4\u3092\u542b\u3080\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u60c5\u5831\u3092\u751f\u6210\n\n\n3\n/api/auth/authorization/fail\n\u30a8\u30e9\u30fc\u60c5\u5831\u3092\u542b\u3080\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u60c5\u5831\u306e\u751f\u6210\n\n\n\nOAuth 2.0 \u3068 OpenID Connect \u306e\u5b9f\u88c5\u672c\u4f53\u3068\u8a8d\u53ef\u95a2\u9023\u30c7\u30fc\u30bf\u306f\u5168\u3066\u30af\u30e9\u30a6\u30c9\u4e0a\u306b\u3042\u308b\u305f\u3081\u3001Authlete \u3092 BaaS (Backend-as-a-Service) \u3068\u3057\u3066\u5229\u7528\u3059\u308b\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u88c5\u3001\u4f8b\u3048\u3070 java-oauth-server \u306f\u3001\u30b3\u30fc\u30c9\u304c\u975e\u5e38\u306b\u77ed\u304f\u306a\u308a\u3001\u307e\u305f\u3001\u624b\u5143\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u6301\u3064\u5fc5\u8981\u304c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u3064\u307e\u308a\u3001DB-less \u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\n\u3069\u308c\u304f\u3089\u3044\u5b9f\u88c5\u304c\u77ed\u304f\u306a\u308b\u304b\u3068\u3044\u3046\u3068\u3001\u4f8b\u3048\u3070\u30b3\u30f3\u30d5\u30a3\u30ae\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 (OpenID Connect Discovery 1.0) \u306e\u5b9f\u88c5 (ConfigurationEndpoint.java) \u306f\u3001authlete-java-common \u3084 authlete-java-jaxrs \u3068\u3044\u3063\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u9811\u5f35\u3063\u3066\u3044\u308b\u304a\u304b\u3052\u3067\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u4e0b\u8a18\u306e\u30b3\u30fc\u30c9\u304c\u5168\u3066\u3067\u3059\u3002\u3053\u308c\u3060\u3051\u3067\u3001\u30af\u30e9\u30a6\u30c9\u4e0a\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5185\u306b\u3042\u308b\u60c5\u5831\u3092\u304b\u304d\u96c6\u3081\u3066\u8981\u6c42\u4ed5\u69d8\u901a\u308a\u306e JSON \u3092\u8fd4\u3059\u3001\u3068\u3044\u3046\u52d5\u4f5c\u304c\u5b9f\u73fe\u3055\u308c\u307e\u3059\u3002\n@Path(\"/.well-known/openid-configuration\")\npublic class ConfigurationEndpoint extends BaseConfigurationEndpoint\n{\n    /**\n     * OpenID Provider configuration endpoint.\n     */\n    @GET\n    public Response get()\n    {\n        // Handle the configuration request.\n        return handle(AuthleteApiFactory.getDefaultApi());\n    }\n}\n\n\n3.2. \u8907\u6570\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n\nAuthlete \u306e\u30e6\u30fc\u30b6\u30fc\u306f\u3001\u30af\u30e9\u30a6\u30c9\u4e0a\u306b\u8907\u6570\u306e OAuth 2.0 + OpenID Connect \u5b9f\u88c5\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u6301\u3064\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001Authlete \u304c\u63d0\u4f9b\u3059\u308b\u7ba1\u7406\u30b3\u30f3\u30bd\u30fc\u30eb (\u30b5\u30fc\u30d3\u30b9\u30aa\u30fc\u30ca\u30fc\u30b3\u30f3\u30bd\u30fc\u30eb) \u306f\u3001\u8907\u6570\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u7ba1\u7406\u3059\u308b\u524d\u63d0\u3067\u4f5c\u3089\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u7ba1\u7406\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u4f7f\u3048\u3070\u3001IdP \u3092 1 \u30bb\u30c3\u30c8\u8ffd\u52a0\u3059\u308b\u4f5c\u696d\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3067\u3088\u3051\u308c\u3070\u3001\u305f\u304b\u3060\u304b\u30dc\u30bf\u30f3 2 \u30af\u30ea\u30c3\u30af\u3067\u7d42\u308f\u3063\u3066\u3057\u307e\u3044\u307e\u3059 (Create Service)\u3002 \u4ee5\u4e0b\u3001\u30b8\u30e3\u30f3\uff1d\u30d4\u30a8\u30fc\u30eb\u30fb\u30dd\u30eb\u30ca\u30ec\u30d5\u6c0f\u304b\u3089\u306e\u30b3\u30e1\u30f3\u30c8\u3067\u3059\u3002\n\n\u3042\u30fb\u30fb\u30fb\u3042\u308a\u306e\u307e\u307e \u4eca \u8d77\u3053\u3063\u305f\u4e8b\u3092\u8a71\u3059\u305c\uff01\n\u300c\u304a\u308c\u306f MySQL \u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066 create table \u6587\u3092\u6d41\u3057\u8fbc\u3082\u3046\u3068\u601d\u3063\u305f\u3089 \u3044\u3064\u306e\u307e\u306b\u304b IdP \u304c\u3067\u304d\u3066\u3044\u305f\u300d\n\u306a\u30fb\u30fb\u30fb\u4f55\u3092\u8a00\u3063\u3066\u3044\u308b\u306e\u304b\u308f\u304b\u3089\u306d\u30fc\u3068\u601d\u3046\u304c\u3001\u304a\u308c\u3082 \u4f55\u3092\u3055\u308c\u305f\u306e\u304b\u308f\u304b\u3089\u306a\u304b\u3063\u305f\uff01\n\u982d\u304c\u3069\u3046\u306b\u304b\u306a\u308a\u305d\u3046\u3060\u3063\u305f\u30fb\u30fb\u30fb\n\u5fc5\u8981\u6700\u5c0f\u9650\u6a5f\u80fd\u3060\u3068\u304b\u30aa\u30f3\u30e1\u30e2\u30ea\u4eee\u5b9f\u88c5\u3060\u3068\u304b \u305d\u3093\u306a\u30c1\u30e3\u30c1\u306a\u3082\u3093\u3058\u3083\u3042 \u65ad\u3058\u3066\u306d\u3047\n\u3082\u3063\u3068\u6050\u308d\u3057\u3044\u3082\u306e\u306e\u7247\u9c57\u3092\u5473\u308f\u3063\u305f\u305c\u30fb\u30fb\u30fb\n\n\u8907\u6570\u306e OAuth 2.0 + OpenID Connect \u5b9f\u88c5\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u7c21\u5358\u306b\u751f\u6210\u3067\u304d\u308b\u306e\u3067\u3042\u308c\u3070\u3001\u958b\u767a\u4f5c\u696d\u3084\u30b7\u30b9\u30c6\u30e0\u8a2d\u8a08\u3082\u5909\u308f\u3063\u3066\u304d\u307e\u3059\u3002\u958b\u767a\u8005\u6bce\u306b\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u3092\u6301\u3063\u305f\u308a\u3001public \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u7528\u3068 confidential \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u7528\u306e\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u3092\u5206\u3051\u305f\u308a\u3001\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u7528\u306e\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u3068\u7ba1\u7406\u8005\u7528\u306e\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u3092\u7528\u610f\u3057\u3066 scope \u30bb\u30c3\u30c8\u306b\u5dee\u3092\u6301\u305f\u305b\u305f\u308a\u3001\u306a\u3069\u306a\u3069\u3002\n\n3.3. \u8a8d\u53ef\u306b\u7279\u5316\u3057\u3066\u3044\u308b\n\nAuthlete \u306f\u8a8d\u53ef\u306b\u7279\u5316\u3057\u3066\u304a\u308a\u3001\u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c\u3092\u304a\u3053\u306a\u3044\u307e\u305b\u3093\u3002OpenID Connect \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u306b\u3082\u95a2\u308f\u3089\u305a\u3001\u3067\u3059\u3002Authlete \u304c\u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u62b1\u3048\u8fbc\u3080\u3053\u3068\u306f\u306a\u3044\u306e\u3067\u3001\u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c\u3068\u30e6\u30fc\u30b6\u30fc\u30af\u30ec\u30fc\u30e0\u60c5\u5831\u7ba1\u7406\u306f\u3001\u5168\u3066 Authlete \u306e\u5229\u7528\u8005\u304c\u304a\u3053\u306a\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\u614e\u91cd\u306a\u8a2d\u8a08\u306b\u3088\u308a\u3001\u8a8d\u8a3c\u3068\u306e\u871c\u7d50\u5408\u3092\u907f\u3051\u305f\u3053\u3068\u3067\u3001Authlete \u306f\u3069\u306e\u3088\u3046\u306a\u8a8d\u8a3c\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3068\u3082\u7d44\u307f\u5408\u308f\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c\u306e\u65b9\u6cd5\u304c\u3001\u30ed\u30b0\u30a4\u30f3 ID & \u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u3088\u308b\u3082\u306e\u306a\u306e\u304b\u3001\u6307\u7d0b\u3084\u8679\u5f69\u306a\u3069\u306e\u751f\u4f53\u60c5\u5831\u306b\u57fa\u3065\u304f\u8a8d\u8a3c\u306a\u306e\u304b\u3001\u30ef\u30f3\u30bf\u30a4\u30e0\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u4f7f\u3046\u306e\u304b\u30012-way \u8a8d\u8a3c\u306a\u306e\u304b\u306f\u3001Authlete \u306f\u5168\u304f\u95a2\u77e5\u3057\u306a\u3044\u306e\u3067\u3059\u3002Authlete \u304c\u8a8d\u53ef\u306e\u4ed5\u7d44\u307f\u3092\u5b9f\u73fe\u3059\u308b\u4e0a\u3067\u5fc5\u8981\u306a\u306e\u306f\u3001\u8a8d\u8a3c\u304c\u7d42\u308f\u3063\u305f\u5f8c\u306b\u5b9a\u307e\u308b\u30e6\u30fc\u30b6\u30fc\u4e00\u610f\u8b58\u5225\u5b50 (subject) \u3060\u3051\u306a\u306e\u3067\u3059\u3002\u8a8d\u8a3c\u3068\u8a8d\u53ef\u3092\u5206\u3051\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u7a81\u304d\u8a70\u3081\u308b\u3068\u3001\u305d\u3053\u306b\u8fbf\u308a\u3064\u304d\u307e\u3059\u3002\n\u8fbf\u308a\u3064\u3044\u3066\u3057\u307e\u3048\u3070\u5358\u7d14\u306a\u6982\u5ff5\u3067\u3059\u304c\u3001\u305d\u306e\u6982\u5ff5\u306b\u6cbf\u3046\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u8a2d\u8a08\u3068\u5b9f\u88c5\u306f\u3001\u5fc5\u305a\u3057\u3082\u7c21\u5358\u3060\u3068\u306f\u9650\u308a\u307e\u305b\u3093\u3002\u4f8b\u3048\u3070\u3001\u67d0\u4e0a\u5834\u4f01\u696d\u306f\u3001\u8a8d\u8a3c\u30fb\u8a8d\u53ef\u30fb\u30ea\u30bd\u30fc\u30b9\u304c\u871c\u7d50\u5408\u3057\u3066\u3044\u305f OAuth \u5b9f\u88c5\u3092\u758e\u7d50\u5408\u306b\u3059\u308b\u5fc5\u8981\u306b\u8feb\u3089\u308c\u3001\u793e\u5185\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u7acb\u3061\u4e0a\u3052\u3066\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3092\u8a66\u307f\u305f\u3082\u306e\u306e\u3001\u8a8d\u53ef\u3068\u30ea\u30bd\u30fc\u30b9\u304c\u305d\u308c\u305e\u308c\u3001\u3069\u3046\u3057\u3066\u3082\u8a8d\u8a3c\u306b\u4f9d\u5b58\u3057\u3066\u3057\u307e\u3046\u5f62\u304b\u3089\u8131\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3053\u308c\u306f\u3001\u3042\u308b\u30a8\u30f3\u30b8\u30cb\u30a2\u306e\u65b9\u304b\u3089\u805e\u3044\u305f\u8a71\u3067\u3059\u3002\nAuthlete \u304c\u30b7\u30ea\u30b3\u30f3\u30d0\u30ec\u30fc\u306e IoT \u4f01\u696d\u306b\u63a1\u629e\u3055\u308c\u305f\u306e\u3082\u3001\u8a8d\u8a3c\u3092\u5207\u308a\u96e2\u3057\u3066\u3044\u305f\u304b\u3089\u3067\u3059\u3002\u8a8d\u8a3c\u306e\u5bfe\u8c61\u304c\u4eba\u9593\u3067\u306f\u306a\u304f\u3001\u30b7\u30ea\u30a2\u30eb\u30ca\u30f3\u30d0\u30fc\u3068 PIN \u30b3\u30fc\u30c9\u3067\u7279\u5b9a\u3055\u308c\u308b IoT \u6a5f\u5668\u3060\u3063\u305f\u3068\u3057\u3066\u3082\u3001\u5bfe\u8c61\u306e\u4e00\u610f\u8b58\u5225\u5b50\u304c\u5b9a\u307e\u308b\u306e\u3067\u3042\u308c\u3070\u3001Authlete \u306b\u3088\u3063\u3066\u305d\u3053\u306b\u8a8d\u53ef\u306e\u4ed5\u7d44\u307f\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u304b\u3089\u3067\u3059\u3002\n\u4f59\u8ac7\u3067\u3059\u304c\u3001\u6d77\u306e\u5411\u3053\u3046\u306e IoT \u306f\u3001\u8a8d\u8a3c\u306e\u5148\u306e\u8a8d\u53ef\u306b\u307e\u3067\u8a71\u304c\u9032\u3093\u3067\u3044\u307e\u3059\u3002\u307e\u305f\u3001\u4eba\u3068 IoT \u6a5f\u5668\u3068\u306e\u9593\u306e\u8a8d\u53ef\u306e\u307f\u306b\u3068\u3069\u307e\u3089\u305a\u3001\u7570\u306a\u308b\u30e1\u30fc\u30ab\u30fc\u304c\u751f\u7523\u3057\u305f\u6a5f\u5668\u9593\u306e\u8a8d\u53ef\u306b\u3064\u3044\u3066\u3082\u8b70\u8ad6\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n3.4. \u52d5\u7684\u751f\u6210\u304a\u3088\u3073\u8a2d\u5b9a\u5909\u66f4\n\nAuthlete \u3067\u306f\u3001OAuth 2.0 + OpenID Connect \u5b9f\u88c5\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u751f\u6210\u3068\u8a2d\u5b9a\u5909\u66f4\u3001\u304a\u3088\u3073\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u751f\u6210\u3068\u8a2d\u5b9a\u5909\u66f4\u306f\u3001\u5168\u3066\u52d5\u7684\u306b\u5b9f\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u52d5\u7684\u5909\u66f4\u53ef\u80fd\u3068\u3059\u308b\u304b\u3069\u3046\u304b\u306b\u3088\u308a\u3001\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u88c5\u306f\u3044\u308d\u3044\u308d\u3068\u5909\u308f\u3063\u3066\u304d\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001OpenID Connect Discovery 1.0  \u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30b3\u30f3\u30d5\u30a3\u30ae\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 (/.well-known/openid-configuration) \u306e\u5b9f\u88c5\u306f\u3001\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\u3092\u52d5\u7684\u306b\u5909\u66f4\u3057\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u3001\u8d77\u52d5\u6642\u306b\u9759\u7684\u306a\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u4e00\u5ea6\u3060\u3051 JSON \u3092\u751f\u6210\u3057\u3001\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u5b9f\u88c5\u306f\u305d\u306e JSON \u3092\u8fd4\u3059\u3060\u3051\u3001\u3068\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u6975\u7aef\u306a\u8a71\u3001JSON \u3092\u4e88\u3081\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u751f\u6210\u3057\u3066\u304a\u3044\u3066\u3001\u305d\u308c\u3092\u8fd4\u3059\u3060\u3051\u306e\u5b9f\u88c5\u3068\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\nAuthlete \u3067\u306f\u3001OAuth 2.0 + OpenID Connect \u5b9f\u88c5\u3092\u7ba1\u7406\u3059\u308b\u305f\u3081\u306b\u30b5\u30fc\u30d3\u30b9\u30aa\u30fc\u30ca\u30fc\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u7ba1\u7406\u3059\u308b\u305f\u3081\u306b\u30c7\u30d9\u30ed\u30c3\u30d1\u30fc\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u3001\u305d\u308c\u305e\u308c\u7528\u610f\u3057\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u3001/api/service/* API \u3084 /api/client/* API \u3092\u4f7f\u3046\u3053\u3068\u306b\u3088\u308a\u3001\u3053\u308c\u3089\u306e Web \u30b3\u30f3\u30bd\u30fc\u30eb\u7fa4\u3092\u5168\u304f\u4f7f\u308f\u305a\u306b\u7ba1\u7406\u3092\u884c\u3046\u3053\u3068\u3082\u53ef\u80fd\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u3055\u3044\u3054\u306b\n\n\u4eca\u56de\u306f\u3001\u524d\u7f6e\u304d (\u300c\u3082\u3046\u4e00\u3064\u306e\u8a8d\u53ef\u300d) \u304c\u9577\u304b\u3063\u305f\u3082\u306e\u306e\u3001\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u8a71\u304c\u30e1\u30a4\u30f3\u3067\u3057\u305f\u3002\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3001\u3044\u308f\u3086\u308b\u4e16\u306e\u4e2d\u3067\u3044\u3046\u3068\u3053\u308d\u306e (\u72ed\u7fa9\u306e) Web API \u3092\u5b9f\u88c5\u3059\u308b\u969b\u306b\u53c2\u8003\u306b\u3057\u3066\u3044\u305f\u3060\u3051\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n\u6700\u5f8c\u307e\u3067\u8aad\u3093\u3067\u3044\u305f\u3060\u304d\u3001\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\uff01\n# **\u306f\u3058\u3081\u306b**\n\n\u672c\u8a18\u4e8b\u306f\u300c[OAuth 2.0 + OpenID Connect \u306e\u30d5\u30eb\u30b9\u30af\u30e9\u30c3\u30c1\u5b9f\u88c5\u8005\u304c\u77e5\u898b\u3092\u8a9e\u308b](http://qiita.com/TakahikoKawasaki/items/f2a0d25a4f05790b3baa)\u300d\u306e\u7d9a\u7de8\u3068\u306a\u308a\u307e\u3059\u3002**\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8** (protected resource endpoint)\u3001\u3044\u308f\u3086\u308b\u4e16\u306e\u4e2d\u3067\u3044\u3046\u3068\u3053\u308d\u306e (\u72ed\u7fa9\u306e) **Web API** \u306e\u5b9f\u88c5\u306b\u95a2\u3059\u308b\u8a71\u984c\u304c\u30e1\u30a4\u30f3\u3068\u306a\u308a\u307e\u3059\u3002\n\n\n# **1. \u3082\u3046\u4e00\u3064\u306e\u8a8d\u53ef**\n\n## **1.1. \u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u3067\u306e\u8a8d\u53ef**\n\n\u6df7\u4e71\u3092\u907f\u3051\u308b\u305f\u3081\u524d\u8a18\u4e8b\u3067\u306f\u6562\u3048\u3066\u8a00\u53ca\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001\u8a8d\u53ef\u3068\u3044\u3046\u8a00\u8449\u306f\u5225\u306e\u6587\u8108\u3067\u4f7f\u308f\u308c\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u6587\u8108\u3067\u306f\u3001\u300c**\u8ab0\u304c\u4f55\u306e\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u304b** (who has what permissions)\u300d\u3068\u3044\u3046\u60c5\u5831\u3092\u6271\u3046\u305f\u3081\u306b\u8a8d\u53ef\u3068\u3044\u3046\u8a00\u8449\u3092\u4f7f\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u3001OAuth \u306e\u6587\u8108\u3067\u306e\u8a8d\u53ef\u300c**\u8ab0\u304c\u8ab0\u306b\u4f55\u306e\u6a29\u9650\u3092\u4e0e\u3048\u308b\u304b** (who grants what permissions to whom)\u300d\u3068\u306f\u7570\u306a\u308a\u307e\u3059\u3002\u5384\u4ecb\u306a\u3053\u3068\u306b\u3001\u3053\u306e\u3069\u3061\u3089\u3082\u8a8d\u53ef\u3068\u547c\u3070\u308c\u3001\u82f1\u8a9e\u3067\u3082\u4e21\u65b9\u3068\u3082 authorization \u3068\u3044\u3046\u5358\u8a9e\u304c\u4f7f\u308f\u308c\u307e\u3059\u3002\n\n\u3042\u308b\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u969b\u3001\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u306e\u304b\u3001\u305d\u308c\u3068\u3082\u7ba1\u7406\u8005\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u306e\u304b\u306e\u9055\u3044\u306b\u3088\u308a\u3001\u30ed\u30b0\u30a4\u30f3\u5f8c\u306b\u5b9f\u884c\u53ef\u80fd\u306a\u64cd\u4f5c\u306b\u5909\u5316\u3092\u6301\u305f\u305b\u308b\u3053\u3068\u306f\u3088\u304f\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u306e\u6587\u8108\u3067\u8a8d\u53ef\u3068\u3044\u3046\u8a00\u8449\u304c\u51fa\u3066\u304d\u305f\u5834\u5408\u3001\u305d\u308c\u306f\u3001\u300c\u8ab0\u304c\u4f55\u306e\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u300d\u3068\u3044\u3046\u60c5\u5831\u3092\u6271\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u3001OAuth \u306e\u6587\u8108\u3067\u3044\u3046\u3068\u3053\u308d\u306e\u8a8d\u53ef\u3068\u306f\u7570\u306a\u308a\u307e\u3059\u3002\u3067\u3059\u306e\u3067\u3001\u300c\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u3068\u7ba1\u7406\u8005\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u533a\u5225\u3057\u305f\u3044\u306e\u3060\u3051\u3069\u3001\u3053\u308c\u3092\u5b9f\u73fe\u3059\u308b\u306b\u306f OAuth \u304c\u5fc5\u8981\u306a\u306e\u304b\uff1f\u300d\u3068\u5c0b\u306d\u3089\u308c\u305f\u3089\u3001\u305d\u306e\u7b54\u3048\u306f\u300c\u3044\u3044\u3048\u300d\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\nOAuth \u3067\u306a\u3044\u65b9\u306e\u6587\u8108\u306b\u304a\u3051\u308b\u8a8d\u53ef\u306b\u3064\u3044\u3066\u306f\u3001\u300c\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u3001\u6a29\u9650\u3092\u8868\u3059\u5c5e\u6027\u304c\u7d10\u4ed8\u3044\u3066\u3044\u308b\u300d\u3068\u8003\u3048\u308b\u3068\u5206\u304b\u308a\u3084\u3059\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u306e\u6587\u8108\u3092\u300c\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u300d\u3068\u8868\u73fe\u3059\u308b\u3068\u3059\u308c\u3070\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u306b\u304a\u3051\u308b\u8a8d\u53ef\u3068 OAuth \u6587\u8108\u306b\u304a\u3051\u308b\u8a8d\u53ef\u306f\u3001\u6b21\u306e\u8868\u306e\u3088\u3046\u306b\u6bd4\u8f03\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n| \u6587\u8108 | \u8a8d\u53ef\u304c\u6271\u3046\u60c5\u5831 |\n|:--|:--|\n| \u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027 | \u8ab0\u304c\u4f55\u306e\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u304b<br/>Who has what permissions. |\n| OAuth | \u8ab0\u304c\u8ab0\u306b\u4f55\u306e\u6a29\u9650\u3092\u4e0e\u3048\u308b\u304b<br/>Who grants what permissions to whom. |\n\n\n## **1.2. \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c6\u30fc\u30d6\u30eb\u3067\u306e\u8868\u73fe**\n\n\u62bd\u8c61\u7684\u306a\u6587\u7ae0\u304c\u7d9a\u3044\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u304c\u3001\u3053\u308c\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c6\u30fc\u30d6\u30eb\u3067\u8868\u73fe\u3059\u308b\u3068\u9055\u3044\u304c\u306f\u3063\u304d\u308a\u898b\u3048\u3066\u304d\u307e\u3059\u3002\n\n\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u3067\u306e\u8a8d\u53ef\u306f\u6b21\u306e\u3088\u3046\u306a\u8868\u73fe\u3068\u306a\u308a\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u610f\u5473\u306f\u300c**\u30a2\u30ab\u30a6\u30f3\u30c8\u30c6\u30fc\u30d6\u30eb**\u300d\u3068\u306a\u308a\u307e\u3059\u3002\n\n| \u4e00\u610f\u8b58\u5225\u5b50<br/>(user ID) | \u540d\u524d<br/>(name) | \u6301\u3063\u3066\u3044\u308b\u6a29\u9650<br/>(permissions) |\n|:--|:--|:--|\n| `user001` | `John` | `view` |\n| `user002` | `Jane` | `view`, `edit` |\n\n\u4e00\u65b9\u3001OAuth \u6587\u8108\u3067\u306e\u8a8d\u53ef\u306f\u6b21\u306e\u3088\u3046\u306a\u8868\u73fe\u3068\u306a\u308a\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u610f\u5473\u306f\u300c**\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u30c6\u30fc\u30d6\u30eb**\u300d\u3068\u306a\u308a\u307e\u3059\u3002\n\n| \u4e00\u610f\u8b58\u5225\u5b50<br/>(access token) | \u8ab0\u304c<br/>(user ID) | \u8ab0\u306b<br/>(client ID) | \u4f55\u306e\u6a29\u9650\u3092<br/>(scopes) |\n|:--|:--|:--|:--|\n| `fde0dke3d` | `user001` | `client001` | `profile` |\n| `abbv3Dedg` | `user002` | `client002` | `profile`, `post` |\n\n\n## **1.3. Apache Shiro \u304b\u3089\u5b66\u3076**\n\n\u3068\u3053\u308d\u3067\u3001**[Apache Shiro](http://shiro.apache.org/)** \u3068\u3044\u3046\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u3054\u5b58\u77e5\u3067\u3057\u3087\u3046\u304b\uff1f \u79c1\u306f\u3001\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306b\u304a\u3051\u308b\u30ed\u30b0\u30a4\u30f3\u306e\u4ed5\u7d44\u307f\u3092\u5b9f\u73fe\u3059\u308b\u624b\u6bb5\u3092\u63a2\u3057\u3066\u3044\u305f\u3068\u304d\u306b\u3001Apache Shiro \u3092\u77e5\u308a\u307e\u3057\u305f\u3002Java \u7cfb\u306e\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u306f **[Spring Security](http://projects.spring.io/spring-security/)** \u304c\u6709\u540d\u3067\u3059\u304c\u3001Stack Overflow \u306e\u300c[Shiro vs. SpringSecurity](http://stackoverflow.com/q/4991084/1174054)\u300d\u306b\u3042\u308b\u901a\u308a\u3001Spring Security \u306f\u8907\u96d1\u904e\u304e\u307e\u3059\u3002\u4e00\u65b9\u3001Apache Shiro \u306f\u8a2d\u8a08\u304c\u6d17\u7df4\u3055\u308c\u3066\u3044\u3066\u3001\u7c21\u5358\u306b\u4f7f\u3048\u308b\u306e\u3067\u3059\u3002\n\nApache Shiro \u306f\u8a8d\u8a3c\u3092\u6271\u3044\u307e\u3059\u304c\u3001\u305d\u308c\u3068\u4f75\u305b\u3066\u3001\u8a8d\u8a3c\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306e\u6a29\u9650\u3082\u53d6\u308a\u6271\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u5148\u306b\u8ff0\u3079\u305f\u300c\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u306b\u304a\u3051\u308b\u8a8d\u53ef\u300d\u3092\u6307\u3057\u3066\u304a\u308a\u3001Apache Shiro \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u304a\u3044\u3066\u3082\u3001\u3053\u306e\u6a5f\u80fd\u306f authorization \u3068\u3044\u3046\u5358\u8a9e\u3067\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u3053\u3067 Apache Shiro \u3092\u6301\u3061\u51fa\u3057\u305f\u306e\u306f\u3001\u305d\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u4e00\u3064\u3067\u3042\u308b\u300c[Apache Shiro Authorization](http://shiro.apache.org/authorization.html)\u300d\u304c\u826f\u304f\u66f8\u3051\u3066\u3044\u3066\u3001\u8003\u3048\u65b9\u306b\u6c4e\u7528\u6027\u304c\u3042\u308b\u304b\u3089\u3067\u3059\u3002\u307e\u305f\u3001Apache Shiro \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e PMC (Project Management Committee) Chair \u3067\u3042\u308b Les Hazlewood \u6c0f\u304c [Stormpath \u793e](https://stormpath.com/)\u306e\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306b\u8f09\u305b\u3066\u3044\u308b\u6587\u66f8\u300c[The New RBAC: Resource-Based Access Control](https://stormpath.com/blog/new-rbac-resource-based-access-control/)\u300d\u3082\u307e\u305f\u3001\u3088\u304f\u66f8\u3051\u3066\u3044\u3066\u975e\u5e38\u306b\u53c2\u8003\u306b\u306a\u308b\u304b\u3089\u3067\u3059\u3002\n\n\u3053\u308c\u3089\u306e\u6587\u66f8\u304b\u3089\u30a8\u30c3\u30bb\u30f3\u30b9\u3092\u629c\u304d\u51fa\u3057\u307e\u3059\u3002\n\n### **1.3.1. \u8a8d\u53ef\u306e\u69cb\u6210\u8981\u7d20**\n\n\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u3067\u306e\u8a8d\u53ef\u3092\u69cb\u6210\u3059\u308b\u8981\u7d20 ([Elements of Authorization](http://shiro.apache.org/authorization.html#Authorization-ElementsofAuthorization)) \u306b\u306f\u3001**\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3** (permission)\u3001**\u30ed\u30fc\u30eb** (role)\u3001**\u30e6\u30fc\u30b6\u30fc** (user)\u3001\u306e\u4e09\u3064\u304c\u3042\u308a\u3001\u305d\u308c\u305e\u308c\u6b21\u306e\u3088\u3046\u306a\u5b9a\u7fa9\u3068\u306a\u308a\u307e\u3059\u3002\n\n| \u8981\u7d20 | \u8aac\u660e |\n|:--|:--|\n| [\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3](http://shiro.apache.org/authorization.html#Authorization-Permissions) | \u3069\u306e**\u30ea\u30bd\u30fc\u30b9**\u306b\u5bfe\u3057\u3066\u3069\u306e**\u30a2\u30af\u30b7\u30e7\u30f3**\u3092\u5b9f\u884c\u3067\u304d\u308b\u304b |\n| [\u30ed\u30fc\u30eb](http://shiro.apache.org/authorization.html#Authorization-Roles) | \u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u96c6\u5408 |\n| [\u30e6\u30fc\u30b6\u30fc](http://shiro.apache.org/authorization.html#Authorization-Users) | \u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3084\u30ed\u30fc\u30eb\u306e\u5272\u5f53\u5148 |\n\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306f\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30fc\u30dd\u30ea\u30b7\u30fc\u306e\u6700\u5c0f\u69cb\u6210\u8981\u7d20\u3068\u306a\u308a\u307e\u3059\u3002\u30ed\u30fc\u30eb\u306f\u5358\u306a\u308b\u300c\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u96c6\u5408\u300d\u306b\u904e\u304e\u305a\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u30b0\u30eb\u30fc\u30d7\u3068\u540c\u7fa9\u3067\u3059\u3002\u500b\u4eba\u7684\u306b\u306f\u300c\u30ed\u30fc\u30eb\uff1d\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u96c6\u5408\u300d\u3068\u3044\u3046\u5272\u308a\u5207\u308a\u65b9\u306b\u30cf\u30c3\u3068\u3055\u305b\u3089\u308c\u307e\u3057\u305f\u3002\n\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u4f8b\u3068\u3057\u3066\u3001\u6b21\u306e\u3088\u3046\u306a\u3082\u306e\u3092\u6319\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n| \u30ea\u30bd\u30fc\u30b9 | \u30a2\u30af\u30b7\u30e7\u30f3 |\n|:--|:--|\n| \u30d5\u30a1\u30a4\u30eb\u3092 | \u30aa\u30fc\u30d7\u30f3\u3059\u308b |\n| \u30da\u30fc\u30b8\u3092 | \u95b2\u89a7\u3059\u308b |\n| \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092 | \u5370\u5237\u3059\u308b |\n| \u30e6\u30fc\u30b6\u30fc `jsmith` \u3092 | \u524a\u9664\u3059\u308b |\n\n\u4e0a\u8a18\u8868\u4e2d\u306e\u6700\u5f8c\u306e\u4f8b\u3067\u306f\u3001\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5bfe\u8c61\u3068\u306a\u308b\u30ea\u30bd\u30fc\u30b9\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30ec\u30d9\u30eb\u3067\u9650\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u3064\u307e\u308a\u3001\u30e6\u30fc\u30b6\u30fc\u306e\u4e2d\u3067\u3082\u3001\u7279\u306b `jsmith` \u3068\u3044\u3046\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u9650\u5b9a\u3057\u305f\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u308c\u3089\u306e\u30ea\u30bd\u30fc\u30b9\u6307\u5b9a\u306e\u65b9\u6cd5\u3092\u6c4e\u7528\u7684\u306b\u3068\u3089\u3048\u76f4\u3059\u3068\u3001\u30ea\u30bd\u30fc\u30b9\u306f\u3001(1) **\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7**\u3060\u3051\u3067\u6307\u5b9a\u3055\u308c\u308b\u5834\u5408\u3068\u3001(2) \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u53ca\u3073**\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9**\u306e\u7d44\u3067\u6307\u5b9a\u3055\u308c\u308b\u5834\u5408\u306e\u4e8c\u3064\u304c\u3042\u308b\u3068\u8a00\u3048\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u306e\u3053\u3068\u304b\u3089\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u69cb\u6210\u30d1\u30bf\u30fc\u30f3\u3082\u307e\u305f\u3001\u6b21\u306e\u4e8c\u3064\u306b\u96c6\u7d04\u3067\u304d\u307e\u3059\u3002\n\n1. **\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u3001\u30a2\u30af\u30b7\u30e7\u30f3**\n2. **\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u3001\u30a2\u30af\u30b7\u30e7\u30f3\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9**\n\n### **1.3.2. \u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u8868\u73fe**\n\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u30b3\u30fc\u30c9\u306b\u8fd1\u3044\u5f62\u3067\u8868\u73fe\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u69cb\u6210\u8981\u7d20\u3067\u3042\u308b\u3001\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u3001\u30a2\u30af\u30b7\u30e7\u30f3\u3001\u305d\u3057\u3066\u30aa\u30d7\u30b7\u30e7\u30ca\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6307\u5b9a\u3092\u3001\u30b3\u30ed\u30f3\u3067\u533a\u5207\u3063\u3066\u4e26\u3079\u308b\u300c**\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7:\u30a2\u30af\u30b7\u30e7\u30f3[:\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9]**\u300d\u3068\u3044\u3046\u5f62\u5f0f\u3092\u57fa\u672c\u3068\u3057\u307e\u3057\u3087\u3046\u3002\u305d\u3057\u3066\u3001\u305d\u308c\u305e\u308c\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u5185\u3067\u8907\u6570\u306e\u8981\u7d20\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306f\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\u5217\u6319\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u300c\u5168\u3066\u300d\u3092\u8868\u73fe\u3059\u308b\u65b9\u6cd5\u3068\u3057\u3066 `*` \u3092\u7528\u3044\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n\u4e0b\u8a18\u306e\u8868\u306f\u3001\u3053\u306e\u30eb\u30fc\u30eb\u3092\u7528\u3044\u3066\u8868\u73fe\u3057\u305f\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u4f8b\u3067\u3059\u3002\n\n| \u8868\u73fe | \u610f\u5473 |\n|:--|:--|\n| `printer:print` | \u30d7\u30ea\u30f3\u30bf\u30fc\u3067\u5370\u5237\u3059\u308b\u6a29\u9650 |\n| `printer:manage` | \u30d7\u30ea\u30f3\u30bf\u30fc\u3092\u7ba1\u7406\u3059\u308b\u6a29\u9650 |\n| `printer:print,manage` | \u30d7\u30ea\u30f3\u30bf\u30fc\u306b\u5bfe\u3059\u308b\u5370\u5237\u6a29\u9650\u3068\u7ba1\u7406\u6a29\u9650 |\n| `printer:*` | \u30d7\u30ea\u30f3\u30bf\u30fc\u306b\u95a2\u3059\u308b\u5168\u3066\u306e\u6a29\u9650 |\n| `*:view` | \u5168\u3066\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u95b2\u89a7\u3059\u308b\u6a29\u9650 |\n| `printer:query:lp7200` | \u30d7\u30ea\u30f3\u30bf\u30fc LP7200 \u306e\u72b6\u614b\u3092\u8abf\u3079\u308b\u6a29\u9650 |\n| `printer:print:epsoncolor` | \u30d7\u30ea\u30f3\u30bf\u30fc Epson Color \u3067\u5370\u5237\u3059\u308b\u6a29\u9650 |\n\n\u3053\u3053\u3067\u306f\u3001\u300c\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7:\u30a2\u30af\u30b7\u30e7\u30f3[:\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9]\u300d\u3068\u3044\u3046\u5f62\u5f0f\u3092\u63a1\u7528\u3057\u307e\u3057\u305f\u304c\u3001\u3082\u3061\u308d\u3093\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u8868\u73fe\u3059\u308b\u3068\u304d\u306b\u3053\u308c\u4ee5\u5916\u306e\u65b9\u6cd5\u3092\u7528\u3044\u3066\u3082\u304b\u307e\u3044\u307e\u305b\u3093\u3002\u8868\u73fe\u65b9\u6cd5\u306f\u3069\u306e\u3088\u3046\u306a\u3082\u306e\u3060\u3068\u3057\u3066\u3082\u3001\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u3001\u30a2\u30af\u30b7\u30e7\u30f3\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3001\u3092\u6307\u5b9a\u3067\u304d\u308b\u306e\u3067\u3042\u308c\u3070\u3001Apache Shiro \u3068\u540c\u3058\u6982\u5ff5\u3067\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u8868\u73fe\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u306a\u304a\u3001\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9\u6307\u5b9a (`*`) \u3092\u542b\u3080\u300c\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7:\u30a2\u30af\u30b7\u30e7\u30f3:\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u300d\u5f62\u5f0f\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5\u3068\u3057\u3066\u3001Apache Shiro \u306f <code>[WildCardPermission](https://shiro.apache.org/static/1.2.3/apidocs/org/apache/shiro/authz/permission/WildcardPermission.html)</code> \u3068\u3044\u3046\u30af\u30e9\u30b9\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\n\n### **1.3.3. \u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u6642\u306e\u6ce8\u610f\u70b9**\n\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3084\u30ed\u30fc\u30eb\u306e\u6982\u5ff5\u3068\u305d\u306e\u8868\u73fe\u65b9\u6cd5\u304c\u5b9a\u307e\u308c\u3070\u3001\u305d\u308c\u3089\u306b\u57fa\u3065\u3044\u3066\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3092\u304a\u3053\u306a\u3048\u307e\u3059\u304c\u3001\u305d\u308c\u306b\u3064\u3044\u3066\u3001\u5148\u307b\u3069\u3082\u7d39\u4ecb\u3057\u305f\u300c[The New RBAC: Resource-Based Access Control](https://stormpath.com/blog/new-rbac-resource-based-access-control/)\u300d\u3068\u3044\u3046\u6587\u66f8\u306b\u6ce8\u610f\u304c\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\u8981\u7d04\u3059\u308b\u3068\u6b21\u306e\u3068\u304a\u308a\u3067\u3059\u3002\n\n> \u30ed\u30fc\u30eb\u540d\u306b\u57fa\u3065\u304f\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u306f\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u7dad\u6301\u7ba1\u7406\u304c\u96e3\u3057\u304f\u306a\u308b\u50be\u5411\u306b\u3042\u308b\u3002\u4f8b\u3048\u3070\u3001\u300c\u30ed\u30fc\u30eb\u304c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u306e\u5834\u5408\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4e00\u89a7\u3092\u8868\u793a\u3059\u308b\u300d\u3068\u3044\u3046\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3092\u3057\u3066\u3044\u305f\u5834\u5408\u3001\u5f8c\u304b\u3089\u300c\u90e8\u9580\u9577\u3082\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4e00\u89a7\u3092\u898b\u3089\u308c\u308b\u3088\u3046\u306b\u300d\u3068\u3044\u3046\u8981\u6c42\u4ed5\u69d8\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3068\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u5185\u306e\u6761\u4ef6\u6587\u3092\u300c\u30ed\u30fc\u30eb\u304c\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u3082\u3057\u304f\u306f\u90e8\u9580\u2ed1\u306e\u5834\u5408\u300d\u3068\u3044\u3046\u3088\u3046\u306b\u5909\u66f4\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\u3053\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u306f\u3059\u3050\u306b\u7834\u7dbb\u3059\u308b\u3002\u3053\u306e\u305f\u3081\u3001**\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u306f\u30ed\u30fc\u30eb\u57fa\u6e96\u3067\u306f\u306a\u304f\u30ea\u30bd\u30fc\u30b9\u57fa\u6e96\u3067\u304a\u3053\u306a\u3046\u306e\u304c\u3088\u3044\u3002**\u4f8b\u3048\u3070\u3001\u300c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4e00\u89a7\u8868\u793a\u3059\u308b\u6a29\u9650\u304c\u3042\u308b\u304b\u300d\u3068\u3044\u3046\u5177\u5408\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u3002\n\n\u5c11\u3057\u9577\u304f\u306a\u308a\u307e\u3057\u305f\u304c\u3001Apache Shiro \u304b\u3089\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u306b\u304a\u3051\u308b\u8a8d\u53ef\u306b\u3064\u3044\u3066\u591a\u304f\u3092\u5b66\u3079\u305f\u3053\u3068\u3068\u601d\u3044\u307e\u3059\u3002\n\n### **1.3.4. \u88dc\u8db3**\n\n\u79c1\u304c Apache Shiro \u3092\u77e5\u3063\u305f\u5f53\u6642\u3001\u65e5\u672c\u8a9e\u60c5\u5831\u304c\u5c11\u306a\u304b\u3063\u305f\u306e\u3067 (\u4eca\u3082\u5c11\u306a\u3044\u3067\u3059\u304c)\u3001\u5e7e\u3064\u304b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u65e5\u672c\u8a9e\u8a33\u3057\u3066\u304a\u304d\u307e\u3057\u305f\u3002\u53c2\u8003\u306b\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n- [Apache Shiro \u3067 Web \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30bb\u30ad\u30e5\u30a2\u306b\u3059\u308b](http://darutk-oboegaki.blogspot.jp/2013/12/apache-shiro-web.html)\n- [Apache Shiro Realms (\u65e5\u672c\u8a9e\u8a33)](http://darutk-oboegaki.blogspot.jp/2013/12/apache-shiro-realms.html)\n- [Apache Shiro Configuration (\u65e5\u672c\u8a9e\u8a33)](http://darutk-oboegaki.blogspot.jp/2014/02/apache-shiro-configuration.html)\n\n\u4f59\u8ac7\u3067\u3059\u304c\u3001Apache Shiro \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u3093\u3067\u3044\u308b\u3060\u3051\u3067\u3001\u3044\u304b\u306b Apache Shiro \u306e\u5b9f\u88c5\u8005\u304c\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30fc\u306b\u8a73\u3057\u3044\u304b\u304c\u5206\u304b\u308a\u307e\u3059\u3002\u30d1\u30b9\u30ef\u30fc\u30c9\u60c5\u5831\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4fdd\u5b58\u3059\u308b\u969b\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u305d\u306e\u3082\u306e\u3067\u306f\u306a\u304f\u30cf\u30c3\u30b7\u30e5\u5024\u3092\u4fdd\u5b58\u3059\u308b\u3053\u3068\u306f\u5e38\u8b58\u3060\u3068\u3057\u3066\u3082\u3001\u30bd\u30eb\u30c8\u306b\u52a0\u3048\u3001\u30cf\u30c3\u30b7\u30e5\u5024\u8a08\u7b97\u3092\u76f8\u5f53\u56de\u6570\u7e70\u308a\u8fd4\u3059\u3079\u304d\u3053\u3068\u306e\u91cd\u8981\u6027\u306b\u3064\u3044\u3066\u306f\u3001\u79c1\u306f Apache Shiro \u306e [<code>HashedCredentialsMatcher</code> \u30af\u30e9\u30b9\u306e JavaDoc](https://shiro.apache.org/static/1.2.3/apidocs/org/apache/shiro/authc/credential/HashedCredentialsMatcher.html) \u304b\u3089\u5b66\u3073\u307e\u3057\u305f\u3002\n\n\u3055\u3089\u306b\u4f59\u8ac7\u3067\u3001\u307e\u305f\u3001\u7a81\u7136\u306e\u544a\u767d\u3067\u3059\u304c\u3001\u79c1\u304c\u306a\u305c Apache Shiro \u3092\u8a55\u4fa1\u3059\u308b\u4e00\u65b9\u3067 Spring Framework \u3092\u5acc\u3046\u304b\u3068\u3044\u3046\u3068\u3001\u3042\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306f\u3001\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u8907\u96d1\u3055\u3092\u89e3\u6d88\u3057\u3066\u3044\u308b\u306e\u3067\u306f\u306a\u304f\u3001**\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u8907\u96d1\u3055\u3092 Java \u30b3\u30fc\u30c9\u304b\u3089 XML \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u79fb\u52d5\u3055\u305b\u3066\u3044\u308b\u3060\u3051**\u3060\u304b\u3089\u3067\u3059\u3002\u3080\u3057\u308d\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u30a8\u30e9\u30fc\u691c\u51fa\u3067\u304d\u3066\u3044\u305f\u3082\u306e\u304c\u3001\u5b9f\u884c\u3057\u3066\u307f\u306a\u3044\u3068\u30a8\u30e9\u30fc\u306b\u6c17\u4ed8\u3051\u306a\u3044\u72b6\u614b\u3068\u306a\u308a\u3001\u60aa\u5316\u3067\u3059\u3089\u3042\u308a\u307e\u3059\u3002\u30e9\u30a4\u30d6\u30e9\u30ea\u3084\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u4f5c\u308b\u3068\u304d\u306f\u3001**\u8907\u96d1\u3055\u3092\u8efd\u6e1b\u3059\u308b\u305f\u3081\u306b\u4ed6\u306e\u8907\u96d1\u3055\u3092\u5c0e\u5165\u3059\u308b\u3068\u3044\u3046\u611a**\u3092\u72af\u3057\u3066\u3044\u306a\u3044\u304b\u3001\u81ea\u3089\u554f\u3046\u3079\u304d\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n# **2. \u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8**\n\n## **2.1. \u8a8d\u53ef\u3092\u3081\u3050\u308b\u6df7\u4e71**\n\n\u524d\u7ae0\u3067\u300c\u8ab0\u304c\u4f55\u306e\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u300d\u3068\u3044\u3046\u610f\u5473\u3067\u306e\u8a8d\u53ef\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u3001\u305d\u308c\u306a\u308a\u306e\u6587\u7ae0\u91cf\u3068\u306a\u308a\u307e\u3057\u305f\u304c\u3001**\u5168\u3066\u3053\u306e\u7ae0\u306e\u305f\u3081\u306e\u524d\u7f6e\u304d**\u3067\u3059\u3002\u3053\u3053\u304b\u3089\u306f\u3001OAuth \u306b\u8a71\u3092\u623b\u3057\u3001**\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8** (protected resource endpoint) \u306b\u3064\u3044\u3066\u66f8\u3044\u3066\u3044\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3042\u308b\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u3001(1) \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3067\u4fdd\u8b77\u3057\u3001\u3055\u3089\u306b (2) \u30e6\u30fc\u30b6\u30fc\u304c\u6301\u3064\u6a29\u9650\u306b\u57fa\u3065\u3044\u3066\u6a5f\u80fd\u5236\u9650\u3092\u304a\u3053\u306a\u3044\u305f\u3044\u3068\u601d\u3063\u305f\u6642\u3001(1) \u3067\u306f OAuth \u6587\u8108\u306e\u8a8d\u53ef\u3092\u3001(2) \u3067\u306f\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u306e\u8a8d\u53ef\u3092\u6271\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u4e21\u65b9\u3068\u3082\u8a8d\u53ef (authorization) \u3068\u3044\u3046\u8a00\u8449\u3092\u4f7f\u3046\u305f\u3081\u3001\u4e21\u8005\u306e\u8a8d\u53ef\u306e\u9055\u3044\u3092\u7406\u89e3\u3057\u3066\u3044\u306a\u3044\u3068\u6df7\u4e71\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u3055\u3089\u306b\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3068 [ID \u30c8\u30fc\u30af\u30f3](http://openid.net/specs/openid-connect-core-1_0.html#IDToken)\u306b\u5bfe\u3059\u308b\u7121\u7406\u89e3\u3082\u639b\u3051\u5408\u308f\u3055\u308b\u3068\u3001\u300c\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u306f\u30e6\u30fc\u30b6\u30fc\u306e[\u30af\u30ec\u30fc\u30e0](http://openid.net/specs/openid-connect-core-1_0.html#Claims) (\u30e6\u30fc\u30b6\u30fc\u306e\u5c5e\u6027\u60c5\u5831) \u304c\u5165\u3063\u3066\u3044\u308b\u304b\u3089\u3001\u305d\u306e\u30af\u30ec\u30fc\u30e0\u306b\u57fa\u3065\u3044\u3066\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u304c\u3067\u304d\u308b\u306e\u3067\u306f\u306a\u3044\u304b\uff1f\u300d\u3068\u3044\u3046\u3001\u3055\u3089\u306b\u6df1\u3044\u6df7\u4e71\u3078\u3068\u9665\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u3053\u306e\u3088\u3046\u306a\u6df7\u4e71\u3092\u62b1\u3048\u3066\u3044\u308b\u4eba\u306f\u3001\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u3069\u306e\u3088\u3046\u306b\u5b9f\u88c5\u3057\u3066\u3044\u3044\u306e\u304b\u5206\u304b\u3089\u305a\u3001\u9014\u65b9\u306b\u66ae\u308c\u3066 Stack Overflow \u306b\u3084\u3063\u3066\u304d\u307e\u3059\u3002 \u305d\u3057\u3066\u3001\u305d\u306e\u3088\u3046\u306a\u4eba\u306b\u3088\u308b\u4e00\u767a\u76ee\u306e\u8cea\u554f\u304c\u3053\u3061\u3089\u306e\u300c[OAuth 2.0 Authorization Server and Access Tokens](http://stackoverflow.com/q/34371782/1174054)\u300d\u3067\u3059\u3002\u3053\u306e\u8cea\u554f\u8005\u306f\u771f\u9762\u76ee\u3067\u3001\u8cea\u554f\u81ea\u4f53\u306f\u4e01\u5be7\u306b\u66f8\u3044\u3066\u3044\u307e\u3059\u304c\u3001\u300cThe Authorization Server issues the access token containing the user's claims.\u300d (\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306f\u30e6\u30fc\u30b6\u30fc\u30af\u30ec\u30fc\u30e0\u3092\u542b\u3080\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u767a\u884c\u3059\u308b) \u3068\u3044\u3046\u9593\u9055\u3063\u305f\u7406\u89e3\u3092\u524d\u63d0\u306b\u8cea\u554f\u3057\u3066\u304d\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u3053\u306f\u3055\u3089\u3063\u3068\u300cAn access token does NOT contain a user's claims, but an ID token does.\u300d (\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306f\u30e6\u30fc\u30b6\u30fc\u30af\u30ec\u30fc\u30e0\u3092\u542b\u307e**\u306a\u3044**\u3051\u3069\u3001ID \u30c8\u30fc\u30af\u30f3\u306b\u306f\u542b\u307e\u308c\u3066\u3044\u308b\u3088\u3002) \u3068[\u56de\u7b54](http://stackoverflow.com/a/34371961/1174054)\u3057\u3001\u8cea\u554f\u306e\u524d\u63d0\u6761\u4ef6\u3092\u4fee\u6b63\u3057\u3066\u3042\u3052\u307e\u3059\u3002\u3059\u308b\u3068\u3001\u3044\u3088\u3044\u3088\u3001OAuth \u6587\u8108\u306e\u8a8d\u53ef\u3068\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u306e\u8a8d\u53ef\u306e\u6df7\u4e71\u306b\u8d77\u56e0\u3059\u308b\u8cea\u554f\u304c\u3084\u3063\u3066\u304d\u307e\u3059\u3002\u305d\u306e\u8cea\u554f\u304c\u3053\u3061\u3089\u306e\u300c[How to verify which resources each user can access with OAuth and OpenID Connect?](http://stackoverflow.com/q/34377012/1174054)\u300d\u3067\u3059\u3002\n\n\u3053\u306e\u8cea\u554f\u306b\u5bfe\u3057\u3066\u306f\u3001\u79c1\u3082\u61c7\u5207\u4e01\u5be7\u306b[\u56de\u7b54](http://stackoverflow.com/a/34378565/1174054)\u3057\u307e\u3057\u305f\u304c\u3001\u8981\u70b9\u306f\u3001\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u30b3\u30fc\u30c9\u306e\u958b\u59cb\u90e8\u5206\u3067\u6b21\u306e\u51e6\u7406\u3092\u304a\u3053\u306a\u3044\u307e\u3057\u3087\u3046\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n| | \u51e6\u7406 |\n|:-:|:--|\n| 1 | \u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u308a\u51fa\u3059\u3002 ([RFC 6750](https://tools.ietf.org/html/rfc6750))|\n| 2 | \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u8a73\u7d30\u60c5\u5831\u3092\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306b\u554f\u3044\u5408\u308f\u305b\u308b\u3002 ([RFC 7662](https://tools.ietf.org/html/rfc7662)) |\n| 3 | \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u304c\u6709\u52b9\u304b\u3069\u3046\u304b\u3092\u8abf\u3079\u308b\u3002 (a) \u671f\u9650\u5207\u308c\u3057\u3066\u3044\u306a\u3044\u304b\u3001(b) \u5f53\u8a72\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306e\u306b\u5fc5\u8981\u306a\u6a29\u9650 (scope) \u3092\u30ab\u30d0\u30fc\u3057\u3066\u3044\u308b\u304b\u3001(c) \u53d6\u308a\u6d88\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u3001\u306a\u3069\u3002 |\n| 4 | \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u304b\u3089\u3001\u305d\u306e\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u7d10\u3065\u3044\u305f\u30e6\u30fc\u30b6\u30fc\u4e00\u610f\u8b58\u5225\u5b50\u3092\u53d6\u308a\u51fa\u3059\u3002 |\n| 5 | \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304b\u3089\u3001\u305d\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u5c5e\u6027\u60c5\u5831\u3092\u53d6\u308a\u51fa\u3059\u3002 |\n| 6 | \u30e6\u30fc\u30b6\u30fc\u306e\u5c5e\u6027\u60c5\u5831\u306b\u57fa\u3065\u3044\u3066\u6a5f\u80fd\u5236\u9650\u3092\u304b\u3051\u308b\u3002 |\n\n\u4e0a\u8a18\u30ea\u30b9\u30c8\u306e\u3046\u3061\u30011 \uff5e 3 \u307e\u3067\u304c\u3001OAuth \u6587\u8108\u306b\u304a\u3051\u308b\u8a8d\u53ef\u306e\u51e6\u7406\u3067\u3001**\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u5236\u5fa1**\u3068\u306a\u308a\u307e\u3059\u3002\u4e00\u65b9\u30014 \uff5e 6 \u307e\u3067\u306f\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u5c5e\u6027\u6587\u8108\u306b\u304a\u3051\u308b\u8a8d\u53ef\u306e\u51e6\u7406\u3067\u3001**\u30e6\u30fc\u30b6\u30fc\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u5236\u5fa1**\u3068\u306a\u308a\u307e\u3059\u3002\n\n\n## **2.2. \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u53d7\u3051\u53d6\u308a\u65b9**\n\n\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306f\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u63d0\u793a\u3055\u308c\u308b\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u3069\u306e\u3088\u3046\u306b\u53d7\u3051\u53d6\u308b\u3079\u304d\u3067\u3057\u3087\u3046\u304b\uff1f \u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u5e7e\u3089\u3067\u3082\u8003\u6848\u3059\u308b\u3053\u3068\u306f\u53ef\u80fd\u3067\u3059\u304c\u3001\u8eca\u8f2a\u3092\u518d\u767a\u660e\u3059\u308b\u5fc5\u8981\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u3002 \u65e2\u306b **[RFC 6750](https://tools.ietf.org/html/rfc6750)** (The OAuth 2.0 Authorization Framework: Bearer Token Usage) \u306b\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d7\u3051\u53d6\u308b\u65b9\u6cd5\u304c\u4e09\u3064\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n1. `Authorization` \u30d8\u30c3\u30c0\u30fc ([2.1. Authorization Request Header Field](https://tools.ietf.org/html/rfc6750#section-2.1))\n2. `access_token` \u30d5\u30a9\u30fc\u30e0\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc ([2.2. Form-Encoded Body Parameter](https://tools.ietf.org/html/rfc6750#section-2.2))\n3. `access_token` \u30af\u30a8\u30ea\u30fc\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc ([2.3. URI Query Parameter](https://tools.ietf.org/html/rfc6750#section-2.3))\n\n\u3053\u308c\u3089\u4e09\u3064\u306e\u3046\u3061\u3067\u6700\u3082\u671b\u307e\u3057\u3044\u65b9\u6cd5\u306f\u4e00\u756a\u76ee\u306e\u3082\u306e\u3067\u3001RFC 6750 \u3067\u306f\u3053\u306e\u65b9\u6cd5\u306b\u3064\u3044\u3066 _\"Resource servers MUST support this method.\"_ (\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u306f\u3053\u306e\u65b9\u6cd5\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044) \u3068\u8a00\u3063\u3066\u3044\u307e\u3059\u3002\n\n`Authorization` \u30d8\u30c3\u30c0\u30fc\u306b\u3088\u308b\u65b9\u6cd5\u3092\u7528\u3044\u308b\u5834\u5408\u3001\u30b9\u30ad\u30fc\u30e0\u306f `Bearer` \u3068\u3044\u3046\u7d04\u675f\u3067\u3059\u306e\u3067\u3001\n\n```\nAuthorization: Bearer {access-token}\n```\n\n\u3068\u3044\u3046 HTTP \u30d8\u30c3\u30c0\u30fc\u3092\u542b\u3080\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u5c4a\u304f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n### **2.2.1. `{access-token}` \u306e\u5024**\n\n\u4e0a\u8a18\u306e `{access-token}` \u306e\u90e8\u5206\u306b\u306f\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u4e8b\u524d\u306b\u767a\u884c\u3092\u53d7\u3051\u3066\u3044\u305f\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u305d\u306e\u307e\u307e\u30bb\u30c3\u30c8\u3059\u308c\u3070\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u3053\u3053\u306b\u306f\u3061\u3087\u3063\u3068\u3057\u305f\u7f60\u304c\u3042\u308a\u307e\u3059\u3002\u4f59\u8ac7\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u3069\u3046\u3044\u3046\u7f60\u304b\u3068\u8a00\u3046\u3068\u3001\u307e\u305a\u3001RFC 6750 \u3067\u306f `Authorization` \u30d8\u30c3\u30c0\u30fc\u306e\u5024\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092\u6b21\u306e\u3088\u3046\u306b\u5b9a\u3081\u3066\u3044\u307e\u3059\u3002\n\n```\nb64token    = 1*( ALPHA / DIGIT /\n                  \"-\" / \".\" / \"_\" / \"~\" / \"+\" / \"/\" ) *\"=\"\ncredentials = \"Bearer\" 1*SP b64token\n```\n\n\u3064\u307e\u308a\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u8868\u73fe\u3068\u3057\u3066\u4f7f\u3048\u308b\u6587\u5b57\u3092 Base64 \u7cfb\u306e\u6587\u5b57\u306e\u307f\u306b\u9650\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002 `b64token` \u3068\u3044\u3046\u8868\u8a18\u3092\u7528\u3044\u3066\u3044\u308b\u3053\u3068\u3084\u3001\u3053\u306e\u524d\u6bb5\u3067[\u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c](https://tools.ietf.org/html/rfc2617#section-2)\u306b\u8a00\u53ca\u3057\u3066\u3044\u308b\u3053\u3068\u3082\u3042\u308a <sup>(\u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u3067\u306f `Authorization` \u30d8\u30c3\u30c0\u30fc\u306e\u5024\u3092\u751f\u6210\u3059\u308b\u969b\u306b Base64 \u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u51e6\u7406\u304c\u5165\u308a\u307e\u3059\u3002)</sup> \u3001\u8aad\u8005\u306b\u306f Base64 \u304c\u5237\u308a\u8fbc\u307e\u308c\u307e\u3059\u3002\n\n\u4e00\u65b9\u3001RFC 6749 \u3067\u306f\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u3064\u3044\u3066\u306f\u300c\u6587\u5b57\u5217\u3067\u3042\u308b\u300d\u3068\u3057\u304b\u66f8\u3044\u3066\u3044\u307e\u305b\u3093\u3002\n\n\u3053\u3053\u3067\u3001`{access-token}` \u306b\u30bb\u30c3\u30c8\u3059\u308b\u5024\u306b\u3064\u3044\u3066\u3001\u4e8c\u3064\u306e\u9078\u629e\u80a2\u304c\u51fa\u3066\u304d\u307e\u3059\u3002 (1) `{access-token}` \u306b\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u53d7\u3051\u53d6\u3063\u305f\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u305d\u306e\u307e\u307e\u30bb\u30c3\u30c8\u3059\u308b\u306e\u304b\u3001\u305d\u308c\u3068\u3082\u3001(2) \u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u53d7\u3051\u53d6\u3063\u305f\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b Base64 \u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3092\u65bd\u3057\u305f\u3082\u306e\u3092\u30bb\u30c3\u30c8\u3059\u308b\u306e\u304b\u3001\u306e\u4e8c\u3064\u306e\u9078\u629e\u80a2\u3067\u3059\u3002\u3082\u3057 (1) \u3060\u3068\u3059\u308b\u3068\u3001RFC 6750 \u306e\u8981\u6c42\u4e8b\u9805\u306b\u3088\u308a\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u4f7f\u3048\u308b\u6587\u5b57\u7a2e\u306b RFC 6749 \u3088\u308a\u3082\u53b3\u3057\u3044\u5236\u9650\u304c\u304b\u304b\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u3064\u307e\u308a\u3001**RFC 6750 \u306f\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u53d7\u3051\u53d6\u308a\u65b9\u3092\u898f\u5b9a\u3059\u308b\u3068\u540c\u6642\u306b\u3001\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u88c5\u65b9\u6cd5 (\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u8868\u73fe\u65b9\u6cd5) \u306b\u3064\u3044\u3066\u3082\u6697\u9ed9\u7684\u306b\u8981\u6c42\u4ed5\u69d8\u3092\u8ffd\u52a0\u3057\u3066\u3044\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002**\u4e00\u65b9\u3001(2) \u3067\u3042\u308c\u3070\u3001\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u304c\u767a\u884c\u3059\u308b\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u306f\u3069\u3093\u306a\u6587\u5b57\u3092\u4f7f\u3063\u3066\u3082\u3088\u304f\u306a\u308a\u307e\u3059\u3002\n\n\u6b63\u89e3\u306f (1) \u306a\u306e\u3067\u3059\u304c\u3001(2) \u3068\u8003\u3048\u308b\u4eba\u304c\u51fa\u3066\u304d\u3066\u3082\u3084\u3080\u3092\u5f97\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u4e8b\u5b9f\u3001OAuth \u30ef\u30fc\u30ad\u30f3\u30b0\u30b0\u30eb\u30fc\u30d7\u306e\u30e1\u30fc\u30ea\u30f3\u30b0\u30ea\u30b9\u30c8\u306b\u3082\u4e0b\u8a18\u306e\u3088\u3046\u306a\u6295\u7a3f ([question about the b64token syntax in draft-ietf-oauth-v2-bearer](https://www.ietf.org/mail-archive/web/oauth/current/msg08481.html)) \u304c\u3055\u308c\u3066\u3044\u3066\u3001\u305d\u308c\u306b\u3088\u308c\u3070\u3001\u6295\u7a3f\u8005\u81ea\u8eab\u3092\u542b\u3081\u8907\u6570\u4eba\u304c (2) \u3060\u3068\u8aa4\u89e3\u3057\u3066\u3044\u305f\u305d\u3046\u306a\u306e\u3067\u3059\u3002\n\n> On casual reading of \"The OAuth 2.0 Authorization Protocol: Bearer Tokens\"* **I've encountered several people (including myself) who have made the assumption that the name b64token implies that some kind of base64 encoding/decoding on the access token is taking place between the client and RS.**\n> \n> Digging a bit deeper in to \"HTTP/1.1, part 7: Authentication\"**, however, I see that b64token is just an ABNF syntax definition allowing for characters typically used in base64, base64url, etc.. So the b64token doesn't define any encoding or decoding but rather just defines what characters can be used in the part of the Authorization header that will contain the access token.\n> \n> Do I read this correctly?\n> \n> If so, I feel like some additional clarifying text in the Bearer Tokens draft might help avoid what is (based on my small sample) a common point of misunderstanding.\n> \n> Also, does the use of b64token implicitly limit the allowed characters that an AS can use to construct a bearer access token?\n> \n> Thanks,\n> Brian\n\n\u304b\u304f\u3044\u3046\u79c1\u3082\u8aa4\u89e3\u3057\u3066\u3044\u307e\u3057\u305f\u3002\u300c\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u53d7\u3051\u53d6\u308a\u65b9\u306e\u8a71\u3092\u3057\u3066\u3044\u308b\u6700\u4e2d\u306b\u3001\u3055\u3089\u308a\u3068\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u88c5\u65b9\u6cd5\u306b\u8981\u6c42\u4ed5\u69d8\u3092\u8ffd\u52a0\u3059\u308b\u306a\u3093\u3066\u3042\u308a\u3048\u308b\uff1f \u306a\u3044\u3067\u3057\u3087w\u300d\u3068\u8003\u3048\u305f\u304b\u3089\u3067\u3059\u3002\n\n### **2.2.2. \u5b9f\u969b\u306e\u30b3\u30fc\u30c9\u4f8b**\n\nRFC 6750 \u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u4e09\u3064\u306e\u65b9\u6cd5\u3092\u5168\u3066\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u30b3\u30fc\u30c9\u306f\u3001**[Sinatra](http://www.sinatrarb.com/)** (Ruby) \u3067\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n```rb\n# \u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u308a\u51fa\u3059\u30e1\u30bd\u30c3\u30c9\ndef extract_access_token(request)\n  # Authorization \u30d8\u30c3\u30c0\u30fc\u306e\u5024\n  header = request.env[\"HTTP_AUTHORIZATION\"]\n\n  # \"Bearer {access-token}\" \u3068\u3044\u3046\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u3042\u308c\u3070\n  if /^Bearer[ ]+(.+)/i =~ header\n    # Authorization \u30d8\u30c3\u30c0\u30fc\u304b\u3089\u53d6\u308a\u51fa\u3057\u305f\u5024\u3092\u8fd4\u3059\u3002\n    return $1\n  end\n\n  # \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc access_token \u306e\u5024\u3092\u8fd4\u3059\u3002\n  return request[\"access_token\"]\nend\n\n# GET \u30e1\u30bd\u30c3\u30c9\u306e\u4f8b\nget '/hello' do\n  # \u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u308a\u51fa\u3059\u3002\n  access_token = extract_access_token(request)\nend\n```\n\n**[PHP](http://php.net/)** \u3060\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u3002\u306a\u304a\u3001Stack Overflow \u306e\u300c[Getting response as 'Unauthorized' while sending access token via URI Query Parameter](http://stackoverflow.com/q/33788099/1174054)\u300d\u3068\u3044\u3046\u8cea\u554f\u306b\u3088\u308b\u3068\u3001**[Yii](http://www.yiiframework.com/)** \u3068\u3044\u3046 PHP \u7cfb\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u306f\u3001`Authorization` \u30d8\u30c3\u30c0\u30fc\u4ee5\u5916\u306e\u65b9\u6cd5\u3067\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d7\u3051\u53d6\u308c\u306a\u3044\u3088\u3046\u3067\u3059\u3002(\u4e0b\u8a18\u306e\u30b3\u30fc\u30c9\u306f\u305d\u306e\u8cea\u554f\u306b\u5bfe\u3059\u308b\u79c1\u306e[\u56de\u7b54](http://stackoverflow.com/a/33792349/1174054)\u306b\u542b\u3081\u305f\u30b3\u30fc\u30c9\u3067\u3059\u3002)\n\n```php\n/**\n * \u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u308a\u51fa\u3059\u95a2\u6570\n */\nfunction extract_access_token()\n{\n    // Authorization \u30d8\u30c3\u30c0\u30fc\u306e\u5024\n    $header = $_SERVER['HTTP_AUTHORIZATION'];\n\n    // \"Bearer {access-token}\" \u3068\u3044\u3046\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u3042\u308c\u3070\n    if ($header != null && preg_match('/^Bearer[ ]+(.+)/i', $header, $captured))\n    {\n        // Authorization \u30d8\u30c3\u30c0\u30fc\u304b\u3089\u53d6\u308a\u51fa\u3057\u305f\u5024\u3092\u8fd4\u3059\u3002\n        return $captured;\n    }\n\n    if ($_SERVER['REQUEST_METHOD'] == 'GET')\n    {\n        // \u30af\u30a8\u30ea\u30fc\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc access_token \u306e\u5024\u3092\u8fd4\u3059\u3002\n        return $_GET['access_token'];\n    }\n    else\n    {\n        // \u30d5\u30a9\u30fc\u30e0\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc access_token \u306e\u5024\u3092\u8fd4\u3059\u3002\n        return $_POST['access_token'];\n    }\n}\n```\n\n**JAX-RS** (Java) ([JSR-339](https://jcp.org/en/jsr/detail?id=339)) \u3067\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```java\nprivate static final Pattern CHALLENGE_PATTERN\n    = Pattern.compile(\"^Bearer *([^ ]+) *$\", Pattern.CASE_INSENSITIVE);\n\n/**\n * GET \u30e1\u30bd\u30c3\u30c9\u306e\u4f8b\n */\n@GET\npublic Response get(\n    @HeaderParam(HttpHeaders.AUTHORIZATION) String authorization,\n    @QueryParam(\"access_token\") String accessToken)\n{\n    // Authorization \u30d8\u30c3\u30c0\u30fc\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u308a\u51fa\u3059\u304b\u3001\n    // \u307e\u305f\u306f\u3001\u30af\u30a8\u30ea\u30fc\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc access_token \u306e\u5024\u3092\u4f7f\u3046\u3002\n    accessToken = extractAccessToken(authorization, accessToken);\n}\n\n/**\n * Authorization \u30d8\u30c3\u30c0\u30fc\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u308a\u51fa\u3059\u304b\u3001\n * \u3082\u3057\u304f\u306f access_token \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306e\u5024\u3092\u8fd4\u3059\u3002\n */\nprivate static String extractAccessToken(\n    String authorization, String accessToken)\n{\n    // \u30ea\u30af\u30a8\u30b9\u30c8\u306b Authorization \u30d8\u30c3\u30c0\u30fc\u304c\u542b\u307e\u308c\u3066\u3044\u306a\u3044\u5834\u5408\n    if (authorization == null)\n    {\n        // \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc access_token \u306e\u5024\u3092\u8fd4\u3059\u3002\n        return accessToken;\n    }\n\n    // Authorization \u30d8\u30c3\u30c0\u30fc\u306e\u5024\u306b\u5bfe\u3057\u3066\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u30f3\u30b0\u3092\u304a\u3053\u306a\u3046\u3002\n    Matcher matcher = CHALLENGE_PATTERN.matcher(authorization);\n\n    // Authorization \u30d8\u30c3\u30c0\u30fc\u306e\u5024\u304c \"Bearer {access-token}\" \u3068\u3044\u3046\n    // \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u3042\u308c\u3070\n    if (matcher.matches())\n    {\n        // Authorization \u30d8\u30c3\u30c0\u30fc\u304b\u3089\u53d6\u308a\u51fa\u3057\u305f\u5024\u3092\u8fd4\u3059\u3002\n        return matcher.group(1);\n    }\n    else\n    {\n        // \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc access_token \u306e\u5024\u3092\u8fd4\u3059\u3002\n        return accessToken;\n    }\n}\n```\n\n\n## **2.3. \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u60c5\u5831\u306e\u53d6\u5f97\u65b9\u6cd5**\n\n\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u7d10\u4ed8\u304f\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u3067\u3059\u304c\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u304c\u60c5\u5831\u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u65b9\u5f0f\u3067\u3042\u308c\u3070\u3001\u305d\u308c\u3092\u30c7\u30b3\u30fc\u30c9\u3059\u308b\u3060\u3051\u3067\u6e08\u307f\u307e\u3059 ([\u524d\u8a18\u4e8b](http://qiita.com/TakahikoKawasaki/items/f2a0d25a4f05790b3baa)\u53c2\u7167)\u3002\u3053\u3053\u3067\u306f\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u305d\u306e\u3082\u306e\u306f\u7121\u610f\u5473\u306a\u6587\u5b57\u5217\u3067\u3001\u60c5\u5831\u306f\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5185\u306b\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u30b1\u30fc\u30b9\u306b\u3064\u3044\u3066\u306e\u307f\u8003\u3048\u307e\u3059\u3002\n\n\u3042\u306a\u305f\u306e\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3067\u306f\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u304b\u3089\u53d6\u308a\u51fa\u3057\u305f\u5f8c\u3001\u305d\u308c\u306b\u7d10\u4ed8\u304f\u60c5\u5831\u3092\u3069\u306e\u3088\u3046\u306b\u53d6\u5f97\u3057\u3066\u3044\u308b\u3067\u3057\u3087\u3046\u304b\uff1f \u3082\u3057\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30af\u30a8\u30ea\u30fc\u3092\u767a\u884c\u3057\u3066\u3044\u308b\u306e\u3067\u3042\u308c\u3070\u3001\u305d\u308c\u306f\u3001\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u3068\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u304c\u5bc6\u7d50\u5408\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002\u3057\u304b\u3057\u3001OAuth \u306e\u4ed5\u69d8\u4e0a\u306f\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u3068\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u306f\u5225\u3005\u306e\u3082\u306e\u306a\u306e\u3067\u3001\u3053\u308c\u3089\u4e8c\u3064\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u5171\u6709\u3057\u306a\u3044\u3088\u3046\u306b\u5b9f\u88c5\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u5171\u6709\u3057\u306a\u3044\u5b9f\u88c5\u3068\u3057\u305f\u5834\u5408\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u60c5\u5831\u3092\u5f97\u308b\u305f\u3081\u3001\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u306f\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306b\u554f\u3044\u5408\u308f\u305b\u3092\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\u305d\u3057\u3066\u3001\u305d\u306e\u554f\u3044\u5408\u308f\u305b\u65b9\u6cd5\u306f\u3001\u3057\u3070\u3089\u304f\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u5b9f\u88c5\u4f9d\u5b58\u3067\u3057\u305f\u304c\u30012015 \u5e74 10 \u6708\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f **[RFC 7662](https://tools.ietf.org/html/rfc7662)** (OAuth 2.0 Token Introspection) \u306b\u3088\u3063\u3066\u6a19\u6e96\u5316\u3055\u308c\u307e\u3057\u305f\u3002\n\nRFC 7662 \u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306f\u3001**\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8** ([Introspection Endpoint](https://tools.ietf.org/html/rfc7662#section-2)) \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u3053\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b `token` \u30d1\u30e9\u30e1\u30fc\u30bf\u30fc (\u5fc5\u9808) \u3068 `token_type_hint` \u30d1\u30e9\u30e1\u30fc\u30bf\u30fc (\u30aa\u30d7\u30b7\u30e7\u30ca\u30eb) \u3092\u4ed8\u3051\u3066 HTTP POST \u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u308b\u3068\u3001\u60c5\u5831\u304c JSON \u5f62\u5f0f\u3067\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\u4e0b\u8a18\u306f\u3001RFC 7662 \u304b\u3089\u629c\u7c8b\u3057\u305f\u30ea\u30af\u30a8\u30b9\u30c8\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u4f8b\u3067\u3059\u3002\n\n```http\nPOST /introspect HTTP/1.1\nHost: server.example.com\nAccept: application/json\nContent-Type: application/x-www-form-urlencoded\nAuthorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW\n\ntoken=mF_9.B5f-4.1JqM&token_type_hint=access_token\n```\n\n```http\nHTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n \"active\": true,\n \"client_id\": \"l238j323ds-23ij4\",\n \"username\": \"jdoe\",\n \"scope\": \"read write dolphin\",\n \"sub\": \"Z5O3upPC88QrAjx00dis\",\n \"aud\": \"https://protected.example.net/resource\",\n \"iss\": \"https://server.example.com/\",\n \"exp\": 1419356238,\n \"iat\": 1419350238,\n \"extension_field\": \"twenty-seven\"\n}\n```\n\n\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089\u306e\u5fdc\u7b54\u306b\u542b\u307e\u308c\u308b `sub` \u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u306e\u5024\u304c\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u7d10\u4ed8\u3051\u3089\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306e\u4e00\u610f\u8b58\u5225\u5b50\u3067\u3059\u3002\u305f\u3060\u3057\u3001\u3053\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u306f\u4ed5\u69d8\u4e0a\u30aa\u30d7\u30b7\u30e7\u30ca\u30eb\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u7279\u306b\u3001[\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u30ba\u30d5\u30ed\u30fc](https://tools.ietf.org/html/rfc6749#section-4.4)\u3067\u767a\u884c\u3055\u308c\u305f\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u3064\u3044\u3066\u306f\u3001\u7d10\u4ed8\u304f\u30e6\u30fc\u30b6\u30fc\u304c\u3044\u306a\u3044\u306e\u3067\u3001\u5024\u306f `null` \u306b\u306a\u308b\u306f\u305a\u3067\u3059\u3002\n\n## **2.4. \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3**\n\n### **2.4.1. \u78ba\u8a8d\u9805\u76ee**\n\n\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u60c5\u5831\u306e\u53d6\u5f97\u5f8c\u3001\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u884c\u3044\u307e\u3059\u3002\u57fa\u672c\u7684\u306b\u306f\u6b21\u306e\u9805\u76ee\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n| | \u78ba\u8a8d\u9805\u76ee |\n|:--|:--|\n| 1 | \u6709\u52b9\u671f\u9650\u304c\u5207\u308c\u3066\u3044\u306a\u3044\u3053\u3068 |\n| 2 | \u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306b\u5fc5\u8981\u306a\u6a29\u9650 (scope) \u3092\u30ab\u30d0\u30fc\u3057\u3066\u3044\u308b\u3053\u3068 |\n| 3 | \u53d6\u308a\u6d88\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068 |\n\n\u307e\u305f\u3001\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u8981\u4ef6\u306b\u3088\u3063\u3066\u306f\u3001\n\n| | \u78ba\u8a8d\u9805\u76ee |\n|:--|:--|\n| 4 | \u7279\u5b9a\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u7d10\u4ed8\u3044\u3066\u3044\u308b\u3053\u3068 |\n\n\u3092\u8ffd\u52a0\u3067\u78ba\u8a8d\u3057\u305f\u3044\u30b1\u30fc\u30b9\u3082\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n### **2.4.2. Amazon API Gateway Custom Authorization**\n\n\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306b\u95a2\u9023\u3057\u3066\u3001\u6642\u4e8b\u30cd\u30bf\u3092\u4e00\u3064\u3002\n\n2016 \u5e74 2 \u6708 11 \u65e5\u306b [AWS Compute Blog](https://aws.amazon.com/jp/blogs/compute/) \u306e\u300c[Introducing custom authorizers in Amazon API Gateway](https://aws.amazon.com/jp/blogs/compute/introducing-custom-authorizers-in-amazon-api-gateway)\u300d\u3068\u3044\u3046\u8a18\u4e8b\u3067\u3001[Amazon API Gateway](https://aws.amazon.com/jp/api-gateway/) \u306b Custom Authorizer \u3068\u3044\u3046\u4ed5\u7d44\u307f\u304c\u5c0e\u5165\u3055\u308c\u305f\u3053\u3068\u304c\u30a2\u30ca\u30a6\u30f3\u30b9\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u3053\u308c\u306b\u3088\u308a\u3001Amazon API Gateway \u3067\u69cb\u7bc9\u3055\u308c\u305f API \u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c (OAuth \u3084 SAML \u7b49\u306e) Bearer \u30c8\u30fc\u30af\u30f3\u3092\u63d0\u793a\u3057\u3066\u304d\u305f\u3068\u304d\u3001\u305d\u306e\u30c8\u30fc\u30af\u30f3\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u5916\u90e8\u306e authorizer (\u8a8d\u53ef\u8005) \u306b\u59d4\u8b72\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u4e0b\u56f3\u306f\u30aa\u30f3\u30e9\u30a4\u30f3\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u300c[Enable Amazon API Gateway Custom Authorization](http://docs.aws.amazon.com/apigateway/latest/developerguide/use-custom-authorizer.html)\u300d\u304b\u3089\u306e\u8ee2\u8f09\u3067\u3001\u56f3\u4e2d\u306e\u4e0a\u90e8\u306b\u3042\u308b\u300cLambda Auth function\u300d\u3068\u3044\u3046\u3082\u306e\u304c authorizer \u306b\u3042\u305f\u308a\u307e\u3059\u3002\u3053\u306e authorizer \u3068 API Gateway \u304c\u3084\u308a\u3068\u308a\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u30c8\u30fc\u30af\u30f3\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u304a\u3053\u306a\u3044\u307e\u3059\u3002\n\n![custom-auth-workflow.png](https://qiita-image-store.s3.amazonaws.com/0/106044/aebd9baa-392a-0191-3d89-91bb8293bd0e.png)\n\nAmazon API Gateway \u672c\u4f53\u304c OAuth \u30b5\u30fc\u30d0\u30fc\u6a5f\u80fd\u3092\u63d0\u4f9b\u3057\u3066\u3044\u306a\u3044\u70b9\u306b\u5909\u308f\u308a\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3053\u306e\u4ed5\u7d44\u307f\u3092\u4f7f\u3048\u3070\u3001Amazon API Gateway \u4e0a\u306b\u69cb\u7bc9\u3055\u308c\u305f API \u3092 OAuth \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3067\u4fdd\u8b77\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3068\u306a\u308a\u307e\u3059\u3002\n\n[2016/03/02]\n\u300c[Amazon API Gateway \u306e Custom Authorizer \u3092\u4f7f\u3044\u3001OAuth \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3067 API \u3092\u4fdd\u8b77\u3059\u308b](http://qiita.com/TakahikoKawasaki/items/b372ab49da0a9aedb76a)\u300d\u3068\u3044\u3046\u8a18\u4e8b\u3092\u66f8\u304d\u307e\u3057\u305f\u306e\u3067\u3001\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\n\u306a\u304a\u3001\u3053\u306e\u4ed5\u7d44\u307f\u304c\u3067\u304d\u308b\u307e\u3067\u306f\u3001Amazon API Gateway + [AWS Lambda](http://aws.amazon.com/jp/lambda/) \u3067 OAuth \u3092\u3084\u308d\u3046\u3068\u3059\u308b\u3068\u3001Lambda Function \u306e\u5b9f\u88c5\u5185\u3067\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u60c5\u5831\u53d6\u5f97\u3068\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u3084\u3089\u306a\u3051\u308c\u3070\u306a\u3089\u305a\u3001\u8a66\u307f\u308b\u4eba\u306f\u307b\u3068\u3093\u3069\u3044\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u305d\u306e\u305f\u3081\u3001\u79c1\u304c\u6628\u5e74 10 \u6708\u672b\u306b [Authlete \u3092\u4f7f\u3063\u3066\u5b9f\u88c5\u3057\u305f](https://www.authlete.com/documents/apigateway_lambda_oauth)\u3068\u304d\u306b\u306f\u3061\u3087\u3063\u3068\u3057\u305f\u8a71\u984c\u306b\u306a\u308a\u3001AWS \u30c1\u30fc\u30d5\u30a8\u30d0\u30f3\u30b8\u30a7\u30ea\u30b9\u30c8\u306e Jeff Barr \u3055\u3093\u306b\u3082 [Wow \u3068\u8a00\u3063\u3066\u3044\u305f\u3060\u3051\u307e\u3057\u305f](https://twitter.com/jeffbarr/status/660530753415962624)\u3002\n\n\n## **2.5. \u30a8\u30e9\u30fc\u5fdc\u7b54**\n\nRFC 6750 \u3067\u306f\u3001\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u30a8\u30e9\u30fc\u5fdc\u7b54\u306b\u3064\u3044\u3066\u3082\u5b9a\u3081\u3066\u3044\u307e\u3059\u3002\u7279\u5fb4\u7684\u306a\u306e\u306f\u3001\u30a8\u30e9\u30fc\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092 `WWW-Authenticate` \u30d8\u30c3\u30c0\u30fc\u306b\u57cb\u3081\u8fbc\u3080\u3053\u3068\u3067\u3059 ([3. The WWW-Authenticate Response Header Field](https://tools.ietf.org/html/rfc6750#section-3))\u3002\u4e0b\u8a18\u306f\u3001\u30aa\u30d7\u30b7\u30e7\u30ca\u30eb\u306e\u9805\u76ee\u3092\u3059\u3079\u3066\u542b\u3080\u30a8\u30e9\u30fc\u5fdc\u7b54\u306e\u4f8b\u3067\u3059\u3002\n\n```http\nHTTP/1.1 401 Unauthorized\nWWW-Authenticate: Bearer realm=\"example\",\n  error=\"invalid_token\",\n  error_description=\"The access token expired\",\n  error_uri=\"https://example.com/error/E001\",\n  scope=\"openid profile email\"\n```\n\n\u30a8\u30e9\u30fc\u5fdc\u7b54\u5185\u306e `error` \u304c\u53d6\u308a\u3046\u308b\u5024\u3068\u3057\u3066\u3001RFC 6750 \u306e [3.1. Error Codes](https://tools.ietf.org/html/rfc6750#section-3.1) \u306b\u6b21\u306e\u4e09\u3064\u304c\u30ea\u30b9\u30c8\u3055\u308c\u3066\u304a\u308a\u3001\u30a8\u30e9\u30fc\u306e\u539f\u56e0\u306b\u3088\u3063\u3066\u4f7f\u3044\u5206\u3051\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n| | \u8aac\u660e |\n|:--|:--|\n| `invalid_request` | \u5fc5\u8981\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u304c\u542b\u307e\u308c\u3066\u3044\u306a\u3044\u7b49 |\n| `invalid_token` | \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u304c\u7121\u52b9 |\n| `insufficient_scope` | \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u304c\u5341\u5206\u306a\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u306a\u3044 |\n\n`error_description` \u3068 `error_uri` \u306f\u3001\u305d\u308c\u305e\u308c\u3001\u30a8\u30e9\u30fc\u306b\u95a2\u3059\u308b\u8aac\u660e\u3068\u3001\u30a8\u30e9\u30fc\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092\u542b\u3080\u30da\u30fc\u30b8\u3078\u306e URL \u3067\u3059\u3002\u307e\u305f\u3001`scope` \u306f\u3001\u305d\u306e\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u6a29\u9650\u7fa4\u306e\u30ea\u30b9\u30c8\u3067\u3059\u3002\n\n## **2.6. \u60c5\u5831\u53d6\u5f97 + \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3**\n\n\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u305f\u3042\u3068\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u4f5c\u696d\u306f\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u5b9f\u88c5\u5185\u3067\u304a\u3053\u306a\u3044\u307e\u3059\u304c\u3001\u6709\u52b9\u671f\u9650\u306e\u30c1\u30a7\u30c3\u30af\u3084\u5fc5\u8981\u306a\u6a29\u9650\u304c\u30ab\u30d0\u30fc\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u306e\u30c1\u30a7\u30c3\u30af\u306a\u3069\u306f\u3001\u6c7a\u307e\u308a\u304d\u3063\u305f\u51e6\u7406\u3067\u3059\u3002\u3067\u3059\u306e\u3067\u3001\u3044\u3063\u305d\u306e\u3053\u3068\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u52a0\u3048\u3066\u3001\u547c\u3073\u51fa\u3057\u5143\u306e\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304c\u8981\u6c42\u3059\u308b\u30b9\u30b3\u30fc\u30d7\u306e\u30ea\u30b9\u30c8\u3082\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u6e21\u3057\u3001\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u3084\u3063\u3066\u3082\u3089\u3046\u3053\u3068\u306b\u3059\u308c\u3070\u3001\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u5b9f\u88c5\u306f\u697d\u306b\u306a\u308a\u307e\u3059\u3002\u3055\u3089\u306b\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u304c\u7121\u52b9\u3067\u3042\u3063\u305f\u5834\u5408\u306b\u7528\u610f\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u30a8\u30e9\u30fc\u60c5\u5831 (= \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u8fd4\u3059\u30a8\u30e9\u30fc\u5fdc\u7b54\u306b\u542b\u3081\u308b `WWW-Authenticate` \u30d8\u30c3\u30c0\u30fc\u306e\u5024) \u306e\u751f\u6210\u307e\u3067\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u3084\u3063\u3066\u304f\u308c\u308c\u3070\u3001\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u5b9f\u88c5\u306f\u3082\u3063\u3068\u697d\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3064\u307e\u308a\u3001\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u4ed5\u4e8b\u306e\u7bc4\u56f2\u304c\u3001\n\n- \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u60c5\u5831\u306e\u63d0\u4f9b\n\n\u3060\u3051\u3067\u306f\u306a\u304f\u3001\n\n- \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u60c5\u5831\u306e\u63d0\u4f9b\u3001\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3001RFC 6750 \u306b\u6e96\u62e0\u3059\u308b\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u751f\u6210\n\n\u307e\u3067\u5e83\u304c\u3063\u3066\u304f\u308c\u308c\u3070\u3001\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u5b9f\u88c5\u306f\u304b\u306a\u308a\u697d\u306b\u306a\u308b\u306f\u305a\u3067\u3059\u3002\n\n\u4f8b\u3048\u3070 Authlete \u306e\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306f\u3001RFC 7662 \u306b\u6e96\u62e0\u3057\u3066\u3044\u306a\u3044\u304b\u308f\u308a\u306b\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u60c5\u5831\u306e\u63d0\u4f9b\u306b\u52a0\u3048\u3066\u3001\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3084 RFC 6750 \u306b\u6e96\u62e0\u3059\u308b\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u751f\u6210\u3082\u884c\u3044\u307e\u3059\u3002\u3053\u306e\u304a\u304b\u3052\u3067\u3001\u300c[Amazon API Gateway + AWS Lambda + OAuth](https://www.authlete.com/documents/apigateway_lambda_oauth)\u300d\u3092\u5b9f\u73fe\u3057\u305f\u3068\u304d\u306e Lambda \u95a2\u6570\u306e\u5b9f\u88c5\u3067\u3042\u308b <code>[index.js](https://gist.github.com/TakahikoKawasaki/054a8dd54da01fe8fbc4)</code> \u3084\u3001\u300c[Amazon API Gateway \u306e Custom Authorizer \u3092\u4f7f\u3044\u3001OAuth \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3067 API \u3092\u4fdd\u8b77\u3059\u308b](http://qiita.com/TakahikoKawasaki/items/b372ab49da0a9aedb76a)\u300d\u3092\u5b9f\u73fe\u3057\u305f\u3068\u304d\u306e <code>[index.js](https://gist.github.com/TakahikoKawasaki/e6fa35718a88167b1e0d)</code>\u3001\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u5b9f\u88c5 **[java-resource-server](https://github.com/authlete/java-resource-server)** \u306b\u542b\u307e\u308c\u308b\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u4f8b\u3067\u3042\u308b <code>[CountryEndpoint.java](https://github.com/authlete/java-resource-server/blob/master/src/main/java/com/authlete/jaxrs/server/api/CountryEndpoint.java)</code> \u3067\u306f\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u51e6\u7406\u3059\u308b\u30b3\u30fc\u30c9\u304c\u975e\u5e38\u306b\u77ed\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\n## **2.7. \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u60c5\u5831\u306e\u30ad\u30e3\u30c3\u30b7\u30e5**\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d7\u3051\u53d6\u308b\u305f\u3073\u306b\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u3068\u901a\u4fe1\u3059\u308b\u3053\u3068\u3092\u907f\u3051\u308b\u305f\u3081\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u60c5\u5831\u3092\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u3066\u304a\u304f\u306e\u3082\u624b\u3067\u3059\u3002\u305f\u3060\u3057\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u3068\u3057\u3066\u6301\u3063\u3066\u304a\u304f\u6642\u9593\u306e\u9577\u3055\u306e\u5206\u3060\u3051\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u53d6\u308a\u6d88\u3057 (revocation) \u3092\u628a\u63e1\u3059\u308b\u306e\u304c\u6700\u5927\u3067\u30ad\u30e3\u30c3\u30b7\u30e5\u6642\u9593\u5206\u9045\u308c\u308b\u3001\u3068\u3044\u3046\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\u304c\u3042\u308a\u307e\u3059\u3002\u3057\u304b\u3057\u306a\u304c\u3089\u3001\u9006\u306b\u8a00\u3046\u3068\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u53d6\u308a\u6d88\u3057\u30a4\u30d9\u30f3\u30c8\u3092\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30b7\u30b9\u30c6\u30e0\u304c\u5b8c\u5168\u306b\u6355\u6349\u3067\u304d\u308b\u306e\u3067\u3042\u308c\u3070\u3001\u52b9\u7387\u7684\u306b\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u524d\u51fa\u306e [Amazon API Gateway Custom Authorization](http://docs.aws.amazon.com/apigateway/latest/developerguide/use-custom-authorizer.html) \u3067\u306f\u3001authorizer \u306b\u3088\u308b\u51e6\u7406\u7d50\u679c\u3092 API Gateway \u5074\u3067\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u4fdd\u6301\u3059\u308b\u6642\u9593\u306f\u3001\u8a2d\u5b9a\u3067 0 \u79d2 (\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u306a\u3044) \uff5e 3,600 \u79d2\u306e\u9593\u3067\u9078\u3076\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f 300 \u79d2 (5 \u5206) \u3067\u3059\u3002\u30ad\u30e3\u30c3\u30b7\u30e5\u304c\u6709\u52b9\u306a\u9593\u306f authorizer \u306f\u547c\u3070\u308c\u307e\u305b\u3093\u3002\n\n\n## **2.8. \u56f3\u89e3\uff1a\u8a8d\u53ef\u30b3\u30fc\u30c9\u30d5\u30ed\u30fc**\n\n\u305f\u3060\u3067\u3055\u3048\u767b\u5834\u4eba\u7269\u306e\u591a\u3044 OAuth \u306e\u4e16\u754c\u3067\u3001\u3055\u3089\u306b\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u3068\u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u88c5\u3092\u5206\u5272\u3057\u3001\u30a4\u30f3\u30c8\u30ed\u30b9\u30da\u30af\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u4e91\u3005\u3092\u8a00\u3044\u59cb\u3081\u308b\u3068\u3001\u5168\u4f53\u50cf\u306e\u628a\u63e1\u304c\u96e3\u3057\u304f\u306a\u308a\u307e\u3059\u3002\u305d\u3053\u3067\u3001\u30d5\u30ed\u30fc\u304c\u4e00\u756a\u8907\u96d1\u306b\u306a\u308b[\u8a8d\u53ef\u30b3\u30fc\u30c9\u30d5\u30ed\u30fc](https://tools.ietf.org/html/rfc6749#section-4.1)\u3092\u56f3\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u9069\u5b9c\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044\u3002\n\n![oauth-authorization-code-flow-and-web-api-call.png](https://qiita-image-store.s3.amazonaws.com/0/106044/48e4ede9-7e6f-2a71-c471-01958266a80f.png)\n\n\n# **3. Authlete (\u30aa\u30fc\u30b9\u30ea\u30fc\u30c8)**\n\n\u524d\u8a18\u4e8b\u300c[OAuth 2.0 + OpenID Connect \u306e\u30d5\u30eb\u30b9\u30af\u30e9\u30c3\u30c1\u5b9f\u88c5\u8005\u304c\u77e5\u898b\u3092\u8a9e\u308b](http://qiita.com/TakahikoKawasaki/items/f2a0d25a4f05790b3baa)\u300d\u3092\u516c\u958b\u5f8c\u3001\u300c\u5fc5\u8981\u6700\u5c0f\u9650\u306e\u6a5f\u80fd\u3060\u3051\u3067\u3042\u308c\u3070 OpenID Connect \u306e\u5b9f\u88c5\u306f\u8a00\u3046\u307b\u3069\u96e3\u3057\u304f\u306f\u306a\u3044\u300d\u3068\u3044\u3046\u610f\u898b\u3092\u5e7e\u3064\u304b\u62dd\u898b\u3057\u307e\u3057\u305f\u3002\n\n\u8a00\u308f\u308c\u3066\u307f\u308c\u3070\u3001\u305d\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u5358\u306b\u3001\u30aa\u30d7\u30b7\u30e7\u30ca\u30eb\u6a5f\u80fd\u7fa4\u306e\u5b9f\u88c5\u3068 **[Authlete](https://www.authlete.com/)** \u305d\u306e\u3082\u306e\u306e\u8a2d\u8a08\u30fb\u5b9f\u88c5\u304c\u5927\u5909\u3060\u3063\u305f\u3060\u3051\u306a\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\u4ed5\u69d8\u66f8\u3092\u8aad\u307f\u8fbc\u3080\u306e\u304c\u5927\u5909\u3060\u3063\u305f\u306e\u3082\u3001\u4eca\u601d\u3048\u3070\u3001\u300c\u3067\u304d\u308b\u9650\u308a\u5168\u90e8\u5b9f\u88c5\u3059\u308b\u300d\u3068\u3044\u3046\u6c17\u6301\u3061\u3067\u8aad\u3093\u3067\u3044\u305f\u304b\u3089\u5927\u5909\u3060\u3063\u305f\u306e\u3067\u3042\u3063\u3066\u3001\u300cMUST \u4ee5\u5916\u306f\u8aad\u307e\u306a\u3044\u300d\u3068\u3044\u3046\u614b\u5ea6\u3060\u3063\u305f\u306e\u3067\u3042\u308c\u3070\u697d\u3060\u3063\u305f\u3053\u3068\u3067\u3057\u3087\u3046\u3002 \u7279\u306b\u3001[OpenID Provider Metadata](http://openid.net/specs/openid-connect-discovery-1_0.html#ProviderMetadata) \u306e `request_parameter_supported` \u3068 `request_uri_parameter_supported` \u306b `false` \u3092\u8a2d\u5b9a\u3057\u3001[OpenID Connect Core 1.0](http://openid.net/specs/openid-connect-core-1_0.html) \u306e [6. Passing Request Parameters as JWTs](http://openid.net/specs/openid-connect-core-1_0.html#JWTRequests) \u3092\u4e38\u3054\u3068\u7121\u8996\u3057\u3066\u3044\u305f\u3089\u3001\u304b\u306a\u308a\u697d\u3067\u304d\u305f\u306b\u9055\u3044\u3042\u308a\u307e\u305b\u3093\u3002\u30ea\u30af\u30a8\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001`request_uri` \u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3067\u6307\u5b9a\u3055\u308c\u305f\u5834\u6240\u304b\u3089\u30ea\u30af\u30a8\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30d5\u30a7\u30c3\u30c1\u3057\u3001\u305d\u308c\u304c\u975e\u5bfe\u79f0\u9375\u7cfb\u306e\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3067\u7f72\u540d\u30fb\u6697\u53f7\u5316\u3055\u308c\u3066\u3044\u305f\u3089\u3001\u52a0\u3048\u3066\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e `jwks_uri` \u304b\u3089 JWK Set \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u30d5\u30a7\u30c3\u30c1\u3057\u3066\u3001\u305d\u308c\u3092\u7528\u3044\u3066\u30ea\u30af\u30a8\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5fa9\u53f7\u5316\u3068\u7f72\u540d\u691c\u8a3c\u3092\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\u3082\u3061\u308d\u3093\u3001\u6bce\u56de\u30d5\u30a7\u30c3\u30c1\u3059\u308b\u306e\u306f\u3088\u308d\u3057\u304f\u306a\u3044\u306e\u3067\u3001RFC 2616, [13.2.4 Expiration Calculations](http://tools.ietf.org/html/rfc2616#section-13.2.4) \u306e\u8a08\u7b97\u5f0f\u306b\u57fa\u3065\u3044\u3066\u6709\u52b9\u671f\u9593\u3092\u8a08\u7b97\u3057\u3001\u9069\u5b9c\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u3053\u3068\u3082\u5fc5\u8981\u3067\u3059\u3002\u3057\u304b\u3057\u306a\u304c\u3089\u3001\u3053\u3053\u307e\u3067\u9811\u5f35\u3063\u3066\u304a\u3044\u3066\u306a\u3093\u3067\u3059\u304c\u3001\u6b63\u76f4\u30ea\u30af\u30a8\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f7f\u3046\u4eba\u306f\u3044\u306a\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u30aa\u30d7\u30b7\u30e7\u30ca\u30eb\u6a5f\u80fd\u7fa4\u306e\u8a71\u3092\u8107\u306b\u7f6e\u3044\u305f\u3068\u3057\u3066\u3082\u3001\u5358\u7d14\u306b IdP \u3092\uff11\u30bb\u30c3\u30c8\u5b9f\u88c5\u3059\u308b\u3053\u3068\u3068 Authlete \u306e\u3088\u3046\u306a\u3082\u306e\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u3068\u3067\u306f\u3001\u96e3\u6613\u5ea6\u304c\u7570\u306a\u308a\u307e\u3059\u3002\u305b\u3063\u304b\u304f\u3067\u3059\u306e\u3067\u3001Authlete \u56fa\u6709\u306e\u8a71\u3092\u3055\u305b\u3066\u3044\u305f\u3060\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\u4e16\u306e\u4e2d\u306b\u5e7e\u3064\u3082\u5b58\u5728\u3059\u308b OAuth 2.0 + OpenID Connect \u30b5\u30fc\u30d0\u30fc\u5b9f\u88c5\u306e\u4e00\u4f8b\u306b\u904e\u304e\u307e\u305b\u3093\u304c\u3001\u53c2\u8003\u306b\u306a\u308b\u90e8\u5206\u3082\u3042\u308b\u3053\u3068\u3068\u601d\u3044\u307e\u3059\u3002\n\n## **3.1. \u5168\u3066\u304c Web API**\n\nAuthlete \u306f OAuth 2.0 \u3068 OpenID Connect \u306e\u5b9f\u88c5\u3092\u30af\u30e9\u30a6\u30c9\u3067\u63d0\u4f9b\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\u3057\u304b\u3057\u3053\u308c\u306f\u3001\u5358\u306b\u30af\u30e9\u30a6\u30c9\u4e0a\u306e\u30de\u30b7\u30f3\u3067 OpenAM \u306e\u3088\u3046\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u304c\u52d5\u3044\u3066\u3044\u308b\u3068\u3044\u3046\u5358\u7d14\u306a\u8a71\u3067\u306f\u306a\u3044\u306e\u3067\u3059\u3002\n\nAuthlete \u304c\u4ed6\u306e\u5b9f\u88c5\u3068\u7570\u306a\u3063\u3066\u3044\u308b\u306e\u306f\u3001\u307e\u305a\u3001**OAuth 2.0 + OpenID Connect \u30b5\u30fc\u30d0\u30fc\u3092\u5b9f\u88c5\u3059\u308b\u306e\u306b\u5fc5\u8981\u306a\u6a5f\u80fd\u3092\u5168\u3066 Web API \u3068\u3057\u3066\u8a2d\u8a08\u30fb\u5b9f\u88c5\u3057\u305f**\u70b9\u3067\u3059\u3002\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u767b\u9332\u7ba1\u7406\u3084\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306e\u30e1\u30bf\u60c5\u5831\u66f4\u65b0\u6a5f\u80fd\u3092 Web API \u3067\u63d0\u4f9b\u3057\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u3060\u3051\u306b\u3068\u3069\u307e\u308a\u307e\u305b\u3093\u3002\u305d\u308c\u3060\u3051\u3067\u306f\u306a\u304f\u3001\u8a8d\u53ef\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 ([RFC 6749, 3.1](https://tools.ietf.org/html/rfc6749#section-3.1))\u3001\u30c8\u30fc\u30af\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 ([RFC 6749, 3.2](https://tools.ietf.org/html/rfc6749#section-3.2))\u3001\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 ([OIDC Core 1.0, 5.3](http://openid.net/specs/openid-connect-core-1_0.html#UserInfo))\u3001JWK Set \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 ([RFC 7517](https://tools.ietf.org/html/rfc7517))\u3001Revocation \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 ([RFC 7009](https://tools.ietf.org/html/rfc7009))\u3001\u30b3\u30f3\u30d5\u30a3\u30ae\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 ([OIDC Discovery, 4](http://openid.net/specs/openid-connect-discovery-1_0.html#ProviderConfig)) \u306a\u3069\u306e\u3001**\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u7fa4\u306e\u5b9f\u88c5\u306b\u5fc5\u8981\u306a\u6a5f\u80fd\u3082\u5168\u3066 Web API \u5316\u3057\u305f**\u306e\u3067\u3059\u3002\n\n\u4f8b\u3048\u3070\u3001\u8a8d\u53ef\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u5b9f\u88c5\u3059\u308b\u305f\u3081\u306e Web API \u3068\u3057\u3066\u3001Authlete \u306f\u6b21\u306e\u4e09\u3064\u306e Web API \u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3089\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u7528\u3044\u308b\u3053\u3068\u3067\u3001OAuth 2.0 \u3068 OpenID Connect \u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u8a8d\u53ef\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n| | API \u30d1\u30b9 | \u5f79\u5272 |\n|:-:|:--|:--|\n| 1 | `/api/auth/authorization`       | \u8a8d\u53ef\u8981\u6c42\u51e6\u7406\u3068\u8a8d\u53ef\u753b\u9762\u751f\u6210\u306b\u5fc5\u8981\u306a\u60c5\u5831\u306e\u6e96\u5099 |\n| 2 | `/api/auth/authorization/issue` | \u30c8\u30fc\u30af\u30f3\u7fa4\u3092\u542b\u3080\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u60c5\u5831\u3092\u751f\u6210 |\n| 3 | `/api/auth/authorization/fail`  | \u30a8\u30e9\u30fc\u60c5\u5831\u3092\u542b\u3080\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u60c5\u5831\u306e\u751f\u6210 |\n\nOAuth 2.0 \u3068 OpenID Connect \u306e\u5b9f\u88c5\u672c\u4f53\u3068\u8a8d\u53ef\u95a2\u9023\u30c7\u30fc\u30bf\u306f\u5168\u3066\u30af\u30e9\u30a6\u30c9\u4e0a\u306b\u3042\u308b\u305f\u3081\u3001Authlete \u3092 BaaS (Backend-as-a-Service) \u3068\u3057\u3066\u5229\u7528\u3059\u308b\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u88c5\u3001\u4f8b\u3048\u3070 **[java-oauth-server](https://github.com/authlete/java-oauth-server)** \u306f\u3001\u30b3\u30fc\u30c9\u304c\u975e\u5e38\u306b\u77ed\u304f\u306a\u308a\u3001\u307e\u305f\u3001\u624b\u5143\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u6301\u3064\u5fc5\u8981\u304c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u3064\u307e\u308a\u3001**DB-less \u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc**\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3069\u308c\u304f\u3089\u3044\u5b9f\u88c5\u304c\u77ed\u304f\u306a\u308b\u304b\u3068\u3044\u3046\u3068\u3001\u4f8b\u3048\u3070[\u30b3\u30f3\u30d5\u30a3\u30ae\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8](http://openid.net/specs/openid-connect-discovery-1_0.html#ProviderConfig) ([OpenID Connect Discovery 1.0](http://openid.net/specs/openid-connect-discovery-1_0.html)) \u306e\u5b9f\u88c5 (<code>[ConfigurationEndpoint.java](https://github.com/authlete/java-oauth-server/blob/master/src/main/java/com/authlete/jaxrs/server/api/ConfigurationEndpoint.java)</code>) \u306f\u3001**[authlete-java-common](https://github.com/authlete/authlete-java-common)** \u3084 **[authlete-java-jaxrs](https://github.com/authlete/authlete-java-jaxrs)** \u3068\u3044\u3063\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u9811\u5f35\u3063\u3066\u3044\u308b\u304a\u304b\u3052\u3067\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u4e0b\u8a18\u306e\u30b3\u30fc\u30c9\u304c\u5168\u3066\u3067\u3059\u3002\u3053\u308c\u3060\u3051\u3067\u3001\u30af\u30e9\u30a6\u30c9\u4e0a\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5185\u306b\u3042\u308b\u60c5\u5831\u3092\u304b\u304d\u96c6\u3081\u3066\u8981\u6c42\u4ed5\u69d8\u901a\u308a\u306e JSON \u3092\u8fd4\u3059\u3001\u3068\u3044\u3046\u52d5\u4f5c\u304c\u5b9f\u73fe\u3055\u308c\u307e\u3059\u3002\n\n```java\n@Path(\"/.well-known/openid-configuration\")\npublic class ConfigurationEndpoint extends BaseConfigurationEndpoint\n{\n    /**\n     * OpenID Provider configuration endpoint.\n     */\n    @GET\n    public Response get()\n    {\n        // Handle the configuration request.\n        return handle(AuthleteApiFactory.getDefaultApi());\n    }\n}\n```\n\n## **3.2. \u8907\u6570\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9**\n\nAuthlete \u306e\u30e6\u30fc\u30b6\u30fc\u306f\u3001\u30af\u30e9\u30a6\u30c9\u4e0a\u306b**\u8907\u6570\u306e OAuth 2.0 + OpenID Connect \u5b9f\u88c5\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u6301\u3064\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002**\u305d\u306e\u305f\u3081\u3001Authlete \u304c\u63d0\u4f9b\u3059\u308b\u7ba1\u7406\u30b3\u30f3\u30bd\u30fc\u30eb ([\u30b5\u30fc\u30d3\u30b9\u30aa\u30fc\u30ca\u30fc\u30b3\u30f3\u30bd\u30fc\u30eb](https://www.authlete.com/documents/so_console)) \u306f\u3001\u8907\u6570\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u7ba1\u7406\u3059\u308b\u524d\u63d0\u3067\u4f5c\u3089\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u7ba1\u7406\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u4f7f\u3048\u3070\u3001**IdP \u3092 1 \u30bb\u30c3\u30c8\u8ffd\u52a0\u3059\u308b\u4f5c\u696d\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3067\u3088\u3051\u308c\u3070\u3001\u305f\u304b\u3060\u304b\u30dc\u30bf\u30f3 2 \u30af\u30ea\u30c3\u30af\u3067\u7d42\u308f\u3063\u3066\u3057\u307e\u3044\u307e\u3059** ([Create Service](https://www.authlete.com/documents/so_console/create_service))\u3002 \u4ee5\u4e0b\u3001\u30b8\u30e3\u30f3\uff1d\u30d4\u30a8\u30fc\u30eb\u30fb\u30dd\u30eb\u30ca\u30ec\u30d5\u6c0f\u304b\u3089\u306e\u30b3\u30e1\u30f3\u30c8\u3067\u3059\u3002\n\n> \u3042\u30fb\u30fb\u30fb\u3042\u308a\u306e\u307e\u307e \u4eca \u8d77\u3053\u3063\u305f\u4e8b\u3092\u8a71\u3059\u305c\uff01\n> **\u300c\u304a\u308c\u306f MySQL \u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066 create table \u6587\u3092\u6d41\u3057\u8fbc\u3082\u3046\u3068\u601d\u3063\u305f\u3089 \u3044\u3064\u306e\u307e\u306b\u304b IdP \u304c\u3067\u304d\u3066\u3044\u305f\u300d**\n> \u306a\u30fb\u30fb\u30fb\u4f55\u3092\u8a00\u3063\u3066\u3044\u308b\u306e\u304b\u308f\u304b\u3089\u306d\u30fc\u3068\u601d\u3046\u304c\u3001\u304a\u308c\u3082 \u4f55\u3092\u3055\u308c\u305f\u306e\u304b\u308f\u304b\u3089\u306a\u304b\u3063\u305f\uff01\n> \u982d\u304c\u3069\u3046\u306b\u304b\u306a\u308a\u305d\u3046\u3060\u3063\u305f\u30fb\u30fb\u30fb\n> **\u5fc5\u8981\u6700\u5c0f\u9650\u6a5f\u80fd\u3060\u3068\u304b\u30aa\u30f3\u30e1\u30e2\u30ea\u4eee\u5b9f\u88c5\u3060\u3068\u304b \u305d\u3093\u306a\u30c1\u30e3\u30c1\u306a\u3082\u3093\u3058\u3083\u3042 \u65ad\u3058\u3066\u306d\u3047**\n> \u3082\u3063\u3068\u6050\u308d\u3057\u3044\u3082\u306e\u306e\u7247\u9c57\u3092\u5473\u308f\u3063\u305f\u305c\u30fb\u30fb\u30fb\n\n\u8907\u6570\u306e OAuth 2.0 + OpenID Connect \u5b9f\u88c5\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u7c21\u5358\u306b\u751f\u6210\u3067\u304d\u308b\u306e\u3067\u3042\u308c\u3070\u3001\u958b\u767a\u4f5c\u696d\u3084\u30b7\u30b9\u30c6\u30e0\u8a2d\u8a08\u3082\u5909\u308f\u3063\u3066\u304d\u307e\u3059\u3002\u958b\u767a\u8005\u6bce\u306b\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u3092\u6301\u3063\u305f\u308a\u3001public \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u7528\u3068 confidential \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u7528\u306e\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u3092\u5206\u3051\u305f\u308a\u3001\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u7528\u306e\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u3068\u7ba1\u7406\u8005\u7528\u306e\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\u3092\u7528\u610f\u3057\u3066 scope \u30bb\u30c3\u30c8\u306b\u5dee\u3092\u6301\u305f\u305b\u305f\u308a\u3001\u306a\u3069\u306a\u3069\u3002\n\n\n## **3.3. \u8a8d\u53ef\u306b\u7279\u5316\u3057\u3066\u3044\u308b**\n\nAuthlete \u306f**\u8a8d\u53ef\u306b\u7279\u5316\u3057\u3066\u304a\u308a\u3001\u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c\u3092\u304a\u3053\u306a\u3044\u307e\u305b\u3093\u3002**OpenID Connect \u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u306b\u3082\u95a2\u308f\u3089\u305a\u3001\u3067\u3059\u3002Authlete \u304c\u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u62b1\u3048\u8fbc\u3080\u3053\u3068\u306f\u306a\u3044\u306e\u3067\u3001\u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c\u3068\u30e6\u30fc\u30b6\u30fc\u30af\u30ec\u30fc\u30e0\u60c5\u5831\u7ba1\u7406\u306f\u3001\u5168\u3066 Authlete \u306e\u5229\u7528\u8005\u304c\u304a\u3053\u306a\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u614e\u91cd\u306a\u8a2d\u8a08\u306b\u3088\u308a\u3001\u8a8d\u8a3c\u3068\u306e\u871c\u7d50\u5408\u3092\u907f\u3051\u305f\u3053\u3068\u3067\u3001Authlete \u306f\u3069\u306e\u3088\u3046\u306a\u8a8d\u8a3c\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3068\u3082\u7d44\u307f\u5408\u308f\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30e6\u30fc\u30b6\u30fc\u8a8d\u8a3c\u306e\u65b9\u6cd5\u304c\u3001\u30ed\u30b0\u30a4\u30f3 ID & \u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u3088\u308b\u3082\u306e\u306a\u306e\u304b\u3001\u6307\u7d0b\u3084\u8679\u5f69\u306a\u3069\u306e\u751f\u4f53\u60c5\u5831\u306b\u57fa\u3065\u304f\u8a8d\u8a3c\u306a\u306e\u304b\u3001\u30ef\u30f3\u30bf\u30a4\u30e0\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u4f7f\u3046\u306e\u304b\u30012-way \u8a8d\u8a3c\u306a\u306e\u304b\u306f\u3001Authlete \u306f\u5168\u304f\u95a2\u77e5\u3057\u306a\u3044\u306e\u3067\u3059\u3002Authlete \u304c\u8a8d\u53ef\u306e\u4ed5\u7d44\u307f\u3092\u5b9f\u73fe\u3059\u308b\u4e0a\u3067\u5fc5\u8981\u306a\u306e\u306f\u3001\u8a8d\u8a3c\u304c\u7d42\u308f\u3063\u305f\u5f8c\u306b\u5b9a\u307e\u308b\u30e6\u30fc\u30b6\u30fc\u4e00\u610f\u8b58\u5225\u5b50 (subject) \u3060\u3051\u306a\u306e\u3067\u3059\u3002\u8a8d\u8a3c\u3068\u8a8d\u53ef\u3092\u5206\u3051\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u7a81\u304d\u8a70\u3081\u308b\u3068\u3001\u305d\u3053\u306b\u8fbf\u308a\u3064\u304d\u307e\u3059\u3002\n\n\u8fbf\u308a\u3064\u3044\u3066\u3057\u307e\u3048\u3070\u5358\u7d14\u306a\u6982\u5ff5\u3067\u3059\u304c\u3001\u305d\u306e\u6982\u5ff5\u306b\u6cbf\u3046\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u8a2d\u8a08\u3068\u5b9f\u88c5\u306f\u3001\u5fc5\u305a\u3057\u3082\u7c21\u5358\u3060\u3068\u306f\u9650\u308a\u307e\u305b\u3093\u3002\u4f8b\u3048\u3070\u3001\u67d0\u4e0a\u5834\u4f01\u696d\u306f\u3001\u8a8d\u8a3c\u30fb\u8a8d\u53ef\u30fb\u30ea\u30bd\u30fc\u30b9\u304c\u871c\u7d50\u5408\u3057\u3066\u3044\u305f OAuth \u5b9f\u88c5\u3092\u758e\u7d50\u5408\u306b\u3059\u308b\u5fc5\u8981\u306b\u8feb\u3089\u308c\u3001\u793e\u5185\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u7acb\u3061\u4e0a\u3052\u3066\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3092\u8a66\u307f\u305f\u3082\u306e\u306e\u3001\u8a8d\u53ef\u3068\u30ea\u30bd\u30fc\u30b9\u304c\u305d\u308c\u305e\u308c\u3001\u3069\u3046\u3057\u3066\u3082\u8a8d\u8a3c\u306b\u4f9d\u5b58\u3057\u3066\u3057\u307e\u3046\u5f62\u304b\u3089\u8131\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3053\u308c\u306f\u3001\u3042\u308b\u30a8\u30f3\u30b8\u30cb\u30a2\u306e\u65b9\u304b\u3089\u805e\u3044\u305f\u8a71\u3067\u3059\u3002\n\nAuthlete \u304c\u30b7\u30ea\u30b3\u30f3\u30d0\u30ec\u30fc\u306e IoT \u4f01\u696d\u306b\u63a1\u629e\u3055\u308c\u305f\u306e\u3082\u3001\u8a8d\u8a3c\u3092\u5207\u308a\u96e2\u3057\u3066\u3044\u305f\u304b\u3089\u3067\u3059\u3002\u8a8d\u8a3c\u306e\u5bfe\u8c61\u304c\u4eba\u9593\u3067\u306f\u306a\u304f\u3001\u30b7\u30ea\u30a2\u30eb\u30ca\u30f3\u30d0\u30fc\u3068 PIN \u30b3\u30fc\u30c9\u3067\u7279\u5b9a\u3055\u308c\u308b IoT \u6a5f\u5668\u3060\u3063\u305f\u3068\u3057\u3066\u3082\u3001\u5bfe\u8c61\u306e\u4e00\u610f\u8b58\u5225\u5b50\u304c\u5b9a\u307e\u308b\u306e\u3067\u3042\u308c\u3070\u3001Authlete \u306b\u3088\u3063\u3066\u305d\u3053\u306b\u8a8d\u53ef\u306e\u4ed5\u7d44\u307f\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u304b\u3089\u3067\u3059\u3002\n\n\u4f59\u8ac7\u3067\u3059\u304c\u3001\u6d77\u306e\u5411\u3053\u3046\u306e IoT \u306f\u3001\u8a8d\u8a3c\u306e\u5148\u306e\u8a8d\u53ef\u306b\u307e\u3067\u8a71\u304c\u9032\u3093\u3067\u3044\u307e\u3059\u3002\u307e\u305f\u3001\u4eba\u3068 IoT \u6a5f\u5668\u3068\u306e\u9593\u306e\u8a8d\u53ef\u306e\u307f\u306b\u3068\u3069\u307e\u3089\u305a\u3001\u7570\u306a\u308b\u30e1\u30fc\u30ab\u30fc\u304c\u751f\u7523\u3057\u305f**\u6a5f\u5668\u9593\u306e\u8a8d\u53ef**\u306b\u3064\u3044\u3066\u3082\u8b70\u8ad6\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\n## **3.4. \u52d5\u7684\u751f\u6210\u304a\u3088\u3073\u8a2d\u5b9a\u5909\u66f4**\n\nAuthlete \u3067\u306f\u3001OAuth 2.0 + OpenID Connect \u5b9f\u88c5\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u751f\u6210\u3068\u8a2d\u5b9a\u5909\u66f4\u3001\u304a\u3088\u3073\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u751f\u6210\u3068\u8a2d\u5b9a\u5909\u66f4\u306f\u3001\u5168\u3066\u52d5\u7684\u306b\u5b9f\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u52d5\u7684\u5909\u66f4\u53ef\u80fd\u3068\u3059\u308b\u304b\u3069\u3046\u304b\u306b\u3088\u308a\u3001\u30b5\u30fc\u30d0\u30fc\u306e\u5b9f\u88c5\u306f\u3044\u308d\u3044\u308d\u3068\u5909\u308f\u3063\u3066\u304d\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001[OpenID Connect Discovery 1.0 ](http://openid.net/specs/openid-connect-discovery-1_0.html) \u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b[\u30b3\u30f3\u30d5\u30a3\u30ae\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8](http://openid.net/specs/openid-connect-discovery-1_0.html#ProviderConfig) (`/.well-known/openid-configuration`) \u306e\u5b9f\u88c5\u306f\u3001\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\u3092\u52d5\u7684\u306b\u5909\u66f4\u3057\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u3001\u8d77\u52d5\u6642\u306b\u9759\u7684\u306a\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u4e00\u5ea6\u3060\u3051 JSON \u3092\u751f\u6210\u3057\u3001\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u5b9f\u88c5\u306f\u305d\u306e JSON \u3092\u8fd4\u3059\u3060\u3051\u3001\u3068\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u6975\u7aef\u306a\u8a71\u3001JSON \u3092\u4e88\u3081\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u751f\u6210\u3057\u3066\u304a\u3044\u3066\u3001\u305d\u308c\u3092\u8fd4\u3059\u3060\u3051\u306e\u5b9f\u88c5\u3068\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\nAuthlete \u3067\u306f\u3001OAuth 2.0 + OpenID Connect \u5b9f\u88c5\u3092\u7ba1\u7406\u3059\u308b\u305f\u3081\u306b**[\u30b5\u30fc\u30d3\u30b9\u30aa\u30fc\u30ca\u30fc\u30b3\u30f3\u30bd\u30fc\u30eb](https://www.authlete.com/documents/so_console)**\u3092\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u7ba1\u7406\u3059\u308b\u305f\u3081\u306b**[\u30c7\u30d9\u30ed\u30c3\u30d1\u30fc\u30b3\u30f3\u30bd\u30fc\u30eb](https://www.authlete.com/documents/cd_console)**\u3092\u3001\u305d\u308c\u305e\u308c\u7528\u610f\u3057\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u3001`/api/service/*` API \u3084 `/api/client/*` API \u3092\u4f7f\u3046\u3053\u3068\u306b\u3088\u308a\u3001\u3053\u308c\u3089\u306e Web \u30b3\u30f3\u30bd\u30fc\u30eb\u7fa4\u3092\u5168\u304f\u4f7f\u308f\u305a\u306b\u7ba1\u7406\u3092\u884c\u3046\u3053\u3068\u3082\u53ef\u80fd\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\n# **\u3055\u3044\u3054\u306b**\n\n\u4eca\u56de\u306f\u3001\u524d\u7f6e\u304d (\u300c\u3082\u3046\u4e00\u3064\u306e\u8a8d\u53ef\u300d) \u304c\u9577\u304b\u3063\u305f\u3082\u306e\u306e\u3001\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u8a71\u304c\u30e1\u30a4\u30f3\u3067\u3057\u305f\u3002\u4fdd\u8b77\u30ea\u30bd\u30fc\u30b9\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3001\u3044\u308f\u3086\u308b\u4e16\u306e\u4e2d\u3067\u3044\u3046\u3068\u3053\u308d\u306e (\u72ed\u7fa9\u306e) Web API \u3092\u5b9f\u88c5\u3059\u308b\u969b\u306b\u53c2\u8003\u306b\u3057\u3066\u3044\u305f\u3060\u3051\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u6700\u5f8c\u307e\u3067\u8aad\u3093\u3067\u3044\u305f\u3060\u304d\u3001\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\uff01\n", "tags": ["OAuth", "OpenID", "openid_connect", "OIDC", "Authlete"]}