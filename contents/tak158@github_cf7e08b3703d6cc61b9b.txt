{"context": " More than 1 year has passed since last update.\u30ed\u30b0\u30a4\u30f3\u5206\u91ce\u306b\u304a\u3044\u3066\u6700\u3082\u91cd\u8981\u306a\u306e\u306f\u3001\n\u5168\u3066\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u5e38\u306b\u30bd\u30eb\u30c8\u3068\u30cf\u30c3\u30b7\u30e5\u3092\u304b\u3051\u308b\n\u3053\u3068\u3067\u3042\u308b\u3002\n\u30bd\u30eb\u30c8\u3068\u306f\u3001\u30e6\u30fc\u30b6\u3054\u3068\u306b\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u540c\u3058\u3082\u306e\u3067\u3042\u3063\u3066\u3082\u3001\u30cf\u30c3\u30b7\u30e5\u306b\u3088\u3063\u3066\u5f97\u3089\u308c\u308b\u5024\u304c\u30e6\u30fc\u30b6\u306b\u3088\u3063\u3066\u9055\u3046\u3082\u306e\u306b\u306a\u308b\u3088\u3046\u306b\u3059\u308b\u30d7\u30ed\u30bb\u30b9\u3067\u3042\u308b\u3002\n\u30bd\u30eb\u30c8\u5316\u3057\u306a\u304b\u3063\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u30ec\u30a4\u30f3\u30dc\u30fc\u653b\u6483\u306b\u5f31\u304f\u306a\u308b\u3002\n\uff08\u3053\u3053\u3067\u306f\u30ec\u30a4\u30f3\u30dc\u30fc\u653b\u6483\u306b\u3064\u3044\u3066\u306f\u5272\u611b\u3059\u308b\uff09\n\u6b21\u306f\u3001\u30bd\u30eb\u30c8\u3092\u9069\u7528\u3057\u305f\u30ed\u30b0\u30a4\u30f3\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u4f8b\u3067\u3042\u308b\u3002\n\nsalt.rb\n\n# -*- coding: utf-8 -*-\nrequire 'digest/sha1'\n\n$hashes = { }\n$salts = { }\n\ndef hash(password, salt)\n  # hash\u5316\u306e\u969b\u306bsalt\u3092\u542b\u3080\n  Digest::SHA1.hexdigest(\"#{salt}#{password}\")\nend\n\ndef generate_salt(login)\n  Digest::SHA1.hexdigest(\"#{Time.now.to_s}#{login}\")\nend\n\ndef store_password(login, password)\n  # hash\u3092\u4f5c\u6210\u3059\u308b\u524d\u306b\u3001\u30e6\u30fc\u30b6\u3054\u3068\u306esalt\u3092\u4f5c\u6210\u3059\u308b\n  salt = $salts[login] = generate_salt(login)\n  # \u4f5c\u6210\u3057\u305fsalt\u3092\u542b\u307e\u305b\u3066\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306bhash\u3092\u304b\u3051\u308b\n  $hashes[login] = hash(password, salt)\nend\n\ndef verify_password(login, password)\n  $hashes[login] == hash(password, $salts[login])\nend\n\nstore_password('tak158', 'password')\nstore_password('snthd', 'password')\n\nputs $hashes\nputs $salts\n\nputs verify_password('tak158', 'password') # => true\nputs verify_password('tak158', 'pass') # => false\nputs verify_password('snthd', 'password') # => true\n\n\n\n\u3053\u306e\u65b9\u6cd5\u3067\u306f\u3001\u540c\u3058\u30d1\u30b9\u30ef\u30fc\u30c9\u304b\u3089hash\u3057\u3066\u3082\u7570\u306a\u308b\u5024\u304c\u5f97\u3089\u308c\u308b\u306e\u3067\u30ec\u30a4\u30f3\u30dc\u30fc\u653b\u6483\u306b\u5f37\u304f\u306a\u308b\u3002\n\n\u30ed\u30b0\u30a4\u30f3\u5206\u91ce\u306b\u304a\u3044\u3066\u6700\u3082\u91cd\u8981\u306a\u306e\u306f\u3001\n`\u5168\u3066\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u5e38\u306b\u30bd\u30eb\u30c8\u3068\u30cf\u30c3\u30b7\u30e5\u3092\u304b\u3051\u308b`\n\u3053\u3068\u3067\u3042\u308b\u3002\n\n\u30bd\u30eb\u30c8\u3068\u306f\u3001\u30e6\u30fc\u30b6\u3054\u3068\u306b\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u540c\u3058\u3082\u306e\u3067\u3042\u3063\u3066\u3082\u3001\u30cf\u30c3\u30b7\u30e5\u306b\u3088\u3063\u3066\u5f97\u3089\u308c\u308b\u5024\u304c\u30e6\u30fc\u30b6\u306b\u3088\u3063\u3066\u9055\u3046\u3082\u306e\u306b\u306a\u308b\u3088\u3046\u306b\u3059\u308b\u30d7\u30ed\u30bb\u30b9\u3067\u3042\u308b\u3002\n\n\u30bd\u30eb\u30c8\u5316\u3057\u306a\u304b\u3063\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u30ec\u30a4\u30f3\u30dc\u30fc\u653b\u6483\u306b\u5f31\u304f\u306a\u308b\u3002\n\uff08\u3053\u3053\u3067\u306f\u30ec\u30a4\u30f3\u30dc\u30fc\u653b\u6483\u306b\u3064\u3044\u3066\u306f\u5272\u611b\u3059\u308b\uff09\n\n\u6b21\u306f\u3001\u30bd\u30eb\u30c8\u3092\u9069\u7528\u3057\u305f\u30ed\u30b0\u30a4\u30f3\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u4f8b\u3067\u3042\u308b\u3002\n\n\n```ruby:salt.rb\n\n# -*- coding: utf-8 -*-\nrequire 'digest/sha1'\n\n$hashes = { }\n$salts = { }\n\ndef hash(password, salt)\n  # hash\u5316\u306e\u969b\u306bsalt\u3092\u542b\u3080\n  Digest::SHA1.hexdigest(\"#{salt}#{password}\")\nend\n\ndef generate_salt(login)\n  Digest::SHA1.hexdigest(\"#{Time.now.to_s}#{login}\")\nend\n\ndef store_password(login, password)\n  # hash\u3092\u4f5c\u6210\u3059\u308b\u524d\u306b\u3001\u30e6\u30fc\u30b6\u3054\u3068\u306esalt\u3092\u4f5c\u6210\u3059\u308b\n  salt = $salts[login] = generate_salt(login)\n  # \u4f5c\u6210\u3057\u305fsalt\u3092\u542b\u307e\u305b\u3066\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306bhash\u3092\u304b\u3051\u308b\n  $hashes[login] = hash(password, salt)\nend\n\ndef verify_password(login, password)\n  $hashes[login] == hash(password, $salts[login])\nend\n\nstore_password('tak158', 'password')\nstore_password('snthd', 'password')\n\nputs $hashes\nputs $salts\n\nputs verify_password('tak158', 'password') # => true\nputs verify_password('tak158', 'pass') # => false\nputs verify_password('snthd', 'password') # => true\n\n```\n\n\u3053\u306e\u65b9\u6cd5\u3067\u306f\u3001\u540c\u3058\u30d1\u30b9\u30ef\u30fc\u30c9\u304b\u3089hash\u3057\u3066\u3082\u7570\u306a\u308b\u5024\u304c\u5f97\u3089\u308c\u308b\u306e\u3067\u30ec\u30a4\u30f3\u30dc\u30fc\u653b\u6483\u306b\u5f37\u304f\u306a\u308b\u3002\n\n\n\n\n\n", "tags": ["\u30ed\u30b0\u30a4\u30f3", "\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3", "Ruby"]}