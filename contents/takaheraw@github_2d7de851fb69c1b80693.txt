{"context": " More than 1 year has passed since last update.Chef\u306f\u4f7f\u3063\u305f\u3053\u3068\u304c\u306a\u304f\u3001Puppet\u306f\u5fd8\u308c\u305f\u306e\u3067\u3001\u304a\u624b\u8efd\u305d\u3046\u306aFabric\u3067\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3057\u3066\u307f\u305f\u3002\n\nfabric\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30db\u30b9\u30c8\u5074\u306b\u5165\u308c\u308b\n$ sudo easy_install pip\n$ sudo pip install fabric\n\n\nvagrant-fabric\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nVagrant\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u5165\u308c\u308b\n$ vagrant plugin vagrant-fabric\n$ vagrant plugin list\nvagrant-fabric (0.2.2)\n\n\nVagrantfile\nVAGRANTFILE_API_VERSION = \"2\"\n\nVagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n  config.vm.box = \"CentOS6.5\"\n  config.vm.provision :fabric do |fabric|\n    fabric.fabfile_path = \"./fabfile.py\"\n    fabric.tasks = [\"init\"]\n  end\nend\n\n\nfabfile.py\n# -*- coding: utf-8 -*\n\nfrom fabric.api import local, run, env\n\nenv.user = \"root\"\n\ndef package():\n  run(\"yum -y update\")\n  run(\"yum -y groupinstall 'Development tools'\")\n  run(\"yum -y install wget git openssl-devel\")\n\ndef iptables():\n  run(\"chkconfig iptables off\")\n  run(\"service iptables stop\")\n\ndef locale():\n  run(\"yum -y groupinstall 'Japanese Support'\")\n  run(\"echo 'LANG=\\\"ja_JP.UTF-8\\\"\\nSYSFONT=\\\"latarcyrheb-sun16\\\"' > /etc/sysconfig/i18n\")\n  run(\"echo 'export LANG=ja_JP.UTF-8' >> ~/.bash_profile\")\n\ndef clock():\n  run(\"cp -fp /usr/share/zoneinfo/Japan /etc/localtime\")\n  run(\"echo 'ZONE=\\\"Asia/Tokyo\\\"' > /etc/sysconfig/clock\")\n\ndef mysql():\n  run(\"yum -y remove mysql*\")\n  run(\"yum -y install http://repo.mysql.com/mysql-community-release-el6-4.noarch.rpm\")\n  run(\"yum -y install mysql-community-server\")\n  run(\"chkconfig mysqld on\")\n\ndef ruby():\n  run(\"git clone https://github.com/sstephenson/rbenv.git ~/.rbenv\")\n  run(\"echo 'export PATH=\\\"$HOME/.rbenv/bin:$PATH\\\"' >> ~/.bash_profile\")\n  run(\"echo 'eval \\\"$(rbenv init -)\\\"' >> ~/.bash_profile\")\n  run(\"source ~/.bash_profile\")\n  run(\"git clone https://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build\")\n  run(\"rbenv install -v 2.1.2\")\n  run(\"rbenv rehash\")\n  run(\"rbenv global 2.1.2\")\n  run(\"echo 'export PATH=\\\"$HOME/.rbenv/versions/2.1.2/bin:$PATH\\\"' >> ~/.bash_profile\")\n  run(\"gem install bundler\")\n\ndef jq():\n  run(\"curl -o /usr/local/bin/jq http://stedolan.github.io/jq/download/linux64/jq\")\n  run(\"chmod 755 /usr/local/bin/jq\")\n\ndef twurl():\n  run(\"gem install twurl\")\n\ndef init():\n  package()\n  iptables()\n  locale()\n  clock()\n  mysql()\n  ruby()\n  jq()\n  twurl()\n\n\n\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3092\u9069\u7528\n$ vagrant up --provision\n\nChef\u306f\u4f7f\u3063\u305f\u3053\u3068\u304c\u306a\u304f\u3001Puppet\u306f\u5fd8\u308c\u305f\u306e\u3067\u3001\u304a\u624b\u8efd\u305d\u3046\u306aFabric\u3067\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3057\u3066\u307f\u305f\u3002\n\n# fabric\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30db\u30b9\u30c8\u5074\u306b\u5165\u308c\u308b\n\n```shell-session\n$ sudo easy_install pip\n$ sudo pip install fabric\n```\n\n# vagrant-fabric\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nVagrant\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u5165\u308c\u308b\n\n```shell-session\n$ vagrant plugin vagrant-fabric\n$ vagrant plugin list\nvagrant-fabric (0.2.2)\n```\n\n# Vagrantfile\n\n```rb\nVAGRANTFILE_API_VERSION = \"2\"\n\nVagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n  config.vm.box = \"CentOS6.5\"\n  config.vm.provision :fabric do |fabric|\n    fabric.fabfile_path = \"./fabfile.py\"\n    fabric.tasks = [\"init\"]\n  end\nend\n```\n\n# fabfile.py\n\n```py\n# -*- coding: utf-8 -*\n\nfrom fabric.api import local, run, env\n\nenv.user = \"root\"\n\ndef package():\n  run(\"yum -y update\")\n  run(\"yum -y groupinstall 'Development tools'\")\n  run(\"yum -y install wget git openssl-devel\")\n\ndef iptables():\n  run(\"chkconfig iptables off\")\n  run(\"service iptables stop\")\n\ndef locale():\n  run(\"yum -y groupinstall 'Japanese Support'\")\n  run(\"echo 'LANG=\\\"ja_JP.UTF-8\\\"\\nSYSFONT=\\\"latarcyrheb-sun16\\\"' > /etc/sysconfig/i18n\")\n  run(\"echo 'export LANG=ja_JP.UTF-8' >> ~/.bash_profile\")\n\ndef clock():\n  run(\"cp -fp /usr/share/zoneinfo/Japan /etc/localtime\")\n  run(\"echo 'ZONE=\\\"Asia/Tokyo\\\"' > /etc/sysconfig/clock\")\n\ndef mysql():\n  run(\"yum -y remove mysql*\")\n  run(\"yum -y install http://repo.mysql.com/mysql-community-release-el6-4.noarch.rpm\")\n  run(\"yum -y install mysql-community-server\")\n  run(\"chkconfig mysqld on\")\n\ndef ruby():\n  run(\"git clone https://github.com/sstephenson/rbenv.git ~/.rbenv\")\n  run(\"echo 'export PATH=\\\"$HOME/.rbenv/bin:$PATH\\\"' >> ~/.bash_profile\")\n  run(\"echo 'eval \\\"$(rbenv init -)\\\"' >> ~/.bash_profile\")\n  run(\"source ~/.bash_profile\")\n  run(\"git clone https://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build\")\n  run(\"rbenv install -v 2.1.2\")\n  run(\"rbenv rehash\")\n  run(\"rbenv global 2.1.2\")\n  run(\"echo 'export PATH=\\\"$HOME/.rbenv/versions/2.1.2/bin:$PATH\\\"' >> ~/.bash_profile\")\n  run(\"gem install bundler\")\n\ndef jq():\n  run(\"curl -o /usr/local/bin/jq http://stedolan.github.io/jq/download/linux64/jq\")\n  run(\"chmod 755 /usr/local/bin/jq\")\n\ndef twurl():\n  run(\"gem install twurl\")\n\ndef init():\n  package()\n  iptables()\n  locale()\n  clock()\n  mysql()\n  ruby()\n  jq()\n  twurl()\n```\n\n# \u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3092\u9069\u7528\n\n```shell-session\n$ vagrant up --provision\n```\n", "tags": ["vagrant", "fabric"]}