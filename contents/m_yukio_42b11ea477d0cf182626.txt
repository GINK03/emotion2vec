{"tags": ["macos", "CoreAudio", "Swift", "Cocoa"], "context": "\u4eca\u56de\u306f\u3001\u4ee5\u524d\u306e\u30a2\u30d7\u30ea\u3092Swift\u5316\u3059\u308b\u3060\u3051\u306e\u5185\u5bb9\u3060\u3002\n\u30c6\u30ad\u30b9\u30c8\u306e\u5185\u5bb9\u3092\u8aad\u307f\u4e0a\u3052\u308b\u304c\u3001\u305d\u308c\u306b\u30c7\u30a3\u30ec\u30a4\u3092\u304b\u3051\u308b\u3002\nimport Cocoa\nimport AudioUnit\nimport AudioToolbox\nimport CoreAudioKit\n \nclass ViewController: NSViewController {\n    override func viewDidLoad() {\n        super.viewDidLoad()\n        \n        // Do any additional setup after loading the view.\n        demo()\n    }\n    \n    override var representedObject: Any? {\n        didSet {\n        // Update the view, if already loaded.\n        }\n    }\n    \n    var auGraph: AUGraph? = nil\n    \n    func demo() {\n        var inputNode: AUNode = 0\n        var effectNode: AUNode = 0\n        var outputNode: AUNode = 0\n        \n        NewAUGraph(&auGraph);\n        \n        var cd = AudioComponentDescription()\n        cd.componentType = kAudioUnitType_Generator\n        cd.componentSubType = kAudioUnitSubType_SpeechSynthesis\n        cd.componentManufacturer = kAudioUnitManufacturer_Apple\n        cd.componentFlags = 0\n        cd.componentFlagsMask = 0\n        \n        AUGraphAddNode(auGraph!, &cd, &inputNode)\n        \n        cd.componentType = kAudioUnitType_Effect\n        cd.componentSubType = kAudioUnitSubType_Delay\n        AUGraphAddNode(auGraph!, &cd, &effectNode)\n        \n        cd.componentType = kAudioUnitType_Output\n        cd.componentSubType = kAudioUnitSubType_DefaultOutput\n        AUGraphAddNode(auGraph!, &cd, &outputNode)\n        \n        AUGraphConnectNodeInput(auGraph!, inputNode, 0, effectNode, 0)\n        AUGraphConnectNodeInput(auGraph!, effectNode, 0, outputNode, 0)\n        \n        AUGraphOpen(auGraph!)\n        AUGraphInitialize(auGraph!)\n        \n        var generateAudioUnit: AudioUnit? = nil\n        AUGraphNodeInfo(auGraph!, inputNode, nil, &generateAudioUnit)\n        var channel: SpeechChannel? = nil\n        var sz: UInt32 = UInt32(MemoryLayout.size)\n        AudioUnitGetProperty(generateAudioUnit!, kAudioUnitProperty_SpeechChannel, kAudioUnitScope_Global, 0, &channel, &sz)\n        \n        AUGraphStart(auGraph!)\n        \n        SpeakCFString(channel!, \"Nice to meet you. It's nice to see you! Nice meeting you. I'm pleased to meet you. Please say hello to your family. I look forward to seeing you again. Yes. Let's get together soon.\" as NSString, nil)\n    }\n    \n    func dispose() {\n        AUGraphStop(auGraph!)\n        AUGraphUninitialize(auGraph!)\n        AUGraphClose(auGraph!)\n        DisposeAUGraph(auGraph!)\n        auGraph = nil\n    }\n}\n\n\u95a2\u9023\u60c5\u5831\n[Mac]\u8ac7\u8a71\u3068\u7279\u6b8a\u52b9\u679c\uff08Text-to-Speech\uff09\nhttps://github.com/murakami/TextToSpeech\n\u3010Cocoa\u7df4\u7fd2\u5e33\u3011\nhttp://www.bitz.co.jp/weblog/\nhttp://ameblo.jp/bitz/\uff08\u30df\u30e9\u30fc\u30fb\u30b5\u30a4\u30c8\uff09\n<p>\u4eca\u56de\u306f\u3001\u4ee5\u524d\u306e\u30a2\u30d7\u30ea\u3092Swift\u5316\u3059\u308b\u3060\u3051\u306e\u5185\u5bb9\u3060\u3002</p>\n\n<p>\u30c6\u30ad\u30b9\u30c8\u306e\u5185\u5bb9\u3092\u8aad\u307f\u4e0a\u3052\u308b\u304c\u3001\u305d\u308c\u306b\u30c7\u30a3\u30ec\u30a4\u3092\u304b\u3051\u308b\u3002</p>\n\n<pre><code>import Cocoa\nimport AudioUnit\nimport AudioToolbox\nimport CoreAudioKit\n \nclass ViewController: NSViewController {\n    override func viewDidLoad() {\n        super.viewDidLoad()\n        \n        // Do any additional setup after loading the view.\n        demo()\n    }\n    \n    override var representedObject: Any? {\n        didSet {\n        // Update the view, if already loaded.\n        }\n    }\n    \n    var auGraph: AUGraph? = nil\n    \n    func demo() {\n        var inputNode: AUNode = 0\n        var effectNode: AUNode = 0\n        var outputNode: AUNode = 0\n        \n        NewAUGraph(&auGraph);\n        \n        var\tcd = AudioComponentDescription()\n        cd.componentType = kAudioUnitType_Generator\n        cd.componentSubType = kAudioUnitSubType_SpeechSynthesis\n        cd.componentManufacturer = kAudioUnitManufacturer_Apple\n        cd.componentFlags = 0\n        cd.componentFlagsMask = 0\n        \n        AUGraphAddNode(auGraph!, &cd, &inputNode)\n        \n        cd.componentType = kAudioUnitType_Effect\n        cd.componentSubType = kAudioUnitSubType_Delay\n        AUGraphAddNode(auGraph!, &cd, &effectNode)\n        \n        cd.componentType = kAudioUnitType_Output\n        cd.componentSubType = kAudioUnitSubType_DefaultOutput\n        AUGraphAddNode(auGraph!, &cd, &outputNode)\n        \n        AUGraphConnectNodeInput(auGraph!, inputNode, 0, effectNode, 0)\n        AUGraphConnectNodeInput(auGraph!, effectNode, 0, outputNode, 0)\n        \n        AUGraphOpen(auGraph!)\n        AUGraphInitialize(auGraph!)\n        \n        var generateAudioUnit: AudioUnit? = nil\n        AUGraphNodeInfo(auGraph!, inputNode, nil, &generateAudioUnit)\n        var channel: SpeechChannel? = nil\n        var sz: UInt32 = UInt32(MemoryLayout<SpeechChannel>.size)\n        AudioUnitGetProperty(generateAudioUnit!, kAudioUnitProperty_SpeechChannel, kAudioUnitScope_Global, 0, &channel, &sz)\n        \n        AUGraphStart(auGraph!)\n        \n        SpeakCFString(channel!, \"Nice to meet you. It's nice to see you! Nice meeting you. I'm pleased to meet you. Please say hello to your family. I look forward to seeing you again. Yes. Let's get together soon.\" as NSString, nil)\n    }\n    \n    func dispose() {\n        AUGraphStop(auGraph!)\n        AUGraphUninitialize(auGraph!)\n        AUGraphClose(auGraph!)\n        DisposeAUGraph(auGraph!)\n        auGraph = nil\n    }\n}\n</code></pre>\n\n\u95a2\u9023\u60c5\u5831\n<a href=\"http://www.bitz.co.jp/weblog/?date=20120225\">[Mac]\u8ac7\u8a71\u3068\u7279\u6b8a\u52b9\u679c\uff08Text-to-Speech\uff09</a><br />\n<a href=\"https://github.com/murakami/TextToSpeech\">https://github.com/murakami/TextToSpeech</a><br />\n\n\u3010Cocoa\u7df4\u7fd2\u5e33\u3011\n<a href=\"http://www.bitz.co.jp/weblog/\">http://www.bitz.co.jp/weblog/</a><br />\n<a href=\"http://ameblo.jp/bitz/\">http://ameblo.jp/bitz/</a>\uff08\u30df\u30e9\u30fc\u30fb\u30b5\u30a4\u30c8\uff09<br />\n<a href=\"https://t.co/6P3h2jtbRk</a>note<br />\n"}