{"context": "\u524d\u56de\u306e\u7d9a\u304d\nDrag & drop\n\u3053\u3061\u3089\u306e\u30b5\u30a4\u30c8\u3092\u65e5\u672c\u8a9e\u3067\u3056\u3063\u304f\u308a\u3068\u307e\u3068\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u3010\u30dc\u30bf\u30f3\u306b\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3011\n\nSimple_drag_and_drop.py\n#!/usr/bin/python3\n# -*- coding: utf-8 -*-\n\n\nimport sys\nfrom PyQt5.QtWidgets import (QPushButton, QWidget, \n    QLineEdit, QApplication)\n\n# QPushButton\u3092\u7d99\u627f\nclass Button(QPushButton):\n\n    def __init__(self, title, parent):\n        super().__init__(title, parent)\n\n        # \u30dc\u30bf\u30f3\u306b\u5bfe\u3057\u3066\u30c9\u30ed\u30c3\u30d7\u64cd\u4f5c\u3092\u53ef\u80fd\u306b\u3059\u308b\n        self.setAcceptDrops(True)\n\n\n    def dragEnterEvent(self, e):\n\n        # \u30c9\u30e9\u30c3\u30b0\u53ef\u80fd\u306a\u30c7\u30fc\u30bf\u5f62\u5f0f\u3092\u8a2d\u5b9a\n        if e.mimeData().hasFormat('text/plain'):\n            e.accept()\n        else:\n            e.ignore() \n\n    def dropEvent(self, e):\n\n        # \u30c9\u30ed\u30c3\u30d7\u3057\u305f\u3068\u304d\u306b\u30dc\u30bf\u30f3\u30e9\u30d9\u30eb\u3092\u5165\u308c\u66ff\u3048\u308b\n        self.setText(e.mimeData().text()) \n\n\nclass Example(QWidget):\n\n    def __init__(self):\n        super().__init__()\n\n        self.initUI()\n\n\n    def initUI(self):\n\n        edit = QLineEdit('', self)\n        # \u30c9\u30e9\u30c3\u30b0\u53ef\u80fd\u306b\u3059\u308b\n        edit.setDragEnabled(True)\n        edit.move(30, 65)\n\n        button = Button(\"Button\", self)\n        button.move(250, 65)\n\n        self.setWindowTitle('Simple drag & drop')\n        self.setGeometry(300, 300, 300, 150)\n\n\nif __name__ == '__main__':\n\n    app = QApplication(sys.argv)\n    ex = Example()\n    ex.show()\n    app.exec_()\n\n\n\u521d\u671f\u72b6\u614b\n\n\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u5f8c\n\n\n\u3010\u30dc\u30bf\u30f3\u3092\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3011\n\nDrag&drop_a_button_widget.py\n#!/usr/bin/python3\n# -*- coding: utf-8 -*-\n\n\nimport sys\nfrom PyQt5.QtWidgets import QPushButton, QWidget, QApplication\nfrom PyQt5.QtCore import Qt, QMimeData\nfrom PyQt5.QtGui import QDrag\n\n\nclass Button(QPushButton):\n\n    def __init__(self, title, parent):\n        super().__init__(title, parent)\n\n\n    def mouseMoveEvent(self, e):\n\n        # \u53f3\u30af\u30ea\u30c3\u30af\u3060\u3051\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u53ef\u80fd\u306b\u3059\u308b\n        if e.buttons() != Qt.RightButton:\n            return\n\n        # \u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3055\u308c\u308b\u30c7\u30fc\u30bf\u5f62\u5f0f\u3092\u4ee3\u5165\n        mimeData = QMimeData()\n\n        drag = QDrag(self)\n        drag.setMimeData(mimeData)\n        # \u30c9\u30ed\u30c3\u30d7\u3057\u305f\u4f4d\u7f6e\u306b\u30dc\u30bf\u30f3\u306e\u5de6\u4e0a\u3092\u30bb\u30c3\u30c8\n        drag.setHotSpot(e.pos() - self.rect().topLeft())\n        dropAction = drag.exec_(Qt.MoveAction)\n\n\n    def mousePressEvent(self, e):\n\n        # \u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\u3068\u304d\u306e\u30dc\u30bf\u30f3\u306e\u8272\u306e\u5909\u5316\n        QPushButton.mousePressEvent(self, e)\n\n        # \u5de6\u30af\u30ea\u30c3\u30af\u3057\u305f\u3068\u304d\u306b\u30b3\u30f3\u30bd\u30fc\u30eb\u306bpress\u8868\u793a\n        if e.button() == Qt.LeftButton:\n            print('press')\n\n\nclass Example(QWidget):\n\n    def __init__(self):\n        super().__init__()\n\n        self.initUI()\n\n\n    def initUI(self):\n\n        self.setAcceptDrops(True)\n\n        self.button = Button('Button', self)\n        self.button.move(100, 65)\n\n        self.setWindowTitle('Click or Move')\n        self.setGeometry(300, 300, 280, 150)\n\n\n    def dragEnterEvent(self, e):\n\n        e.accept()\n\n\n    def dropEvent(self, e):\n\n        # \u30c9\u30e9\u30c3\u30b0\u5f8c\u306e\u30de\u30a6\u30b9\u306e\u4f4d\u7f6e\u306b\u30dc\u30bf\u30f3\u3092\u914d\u7f6e\n        position = e.pos()\n        self.button.move(position)\n\n        # \u3088\u304f\u308f\u304b\u3089\u3093\n        e.setDropAction(Qt.MoveAction)\n        e.accept()\n\n\nif __name__ == '__main__':\n\n    app = QApplication(sys.argv)\n    ex = Example()\n    ex.show()\n    app.exec_()  \n\n\n\u3000\n\u6b21\u56de\u306fPainting\u3092\u3056\u3063\u304f\u308a\u8a66\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n[\u524d\u56de](http://qiita.com/Algebra_nobu/items/36bc4cc6cf4163b66847)\u306e\u7d9a\u304d\n\n[Drag & drop](http://zetcode.com/gui/pyqt5/dragdrop/)\n\u3053\u3061\u3089\u306e\u30b5\u30a4\u30c8\u3092\u65e5\u672c\u8a9e\u3067\u3056\u3063\u304f\u308a\u3068\u307e\u3068\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n#\u3010\u30dc\u30bf\u30f3\u306b\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3011\n```py3:Simple_drag_and_drop.py\n#!/usr/bin/python3\n# -*- coding: utf-8 -*-\n\n\nimport sys\nfrom PyQt5.QtWidgets import (QPushButton, QWidget, \n    QLineEdit, QApplication)\n\n# QPushButton\u3092\u7d99\u627f\nclass Button(QPushButton):\n  \n    def __init__(self, title, parent):\n        super().__init__(title, parent)\n        \n        # \u30dc\u30bf\u30f3\u306b\u5bfe\u3057\u3066\u30c9\u30ed\u30c3\u30d7\u64cd\u4f5c\u3092\u53ef\u80fd\u306b\u3059\u308b\n        self.setAcceptDrops(True)\n        \n\n    def dragEnterEvent(self, e):\n        \n        # \u30c9\u30e9\u30c3\u30b0\u53ef\u80fd\u306a\u30c7\u30fc\u30bf\u5f62\u5f0f\u3092\u8a2d\u5b9a\n        if e.mimeData().hasFormat('text/plain'):\n            e.accept()\n        else:\n            e.ignore() \n\n    def dropEvent(self, e):\n        \n        # \u30c9\u30ed\u30c3\u30d7\u3057\u305f\u3068\u304d\u306b\u30dc\u30bf\u30f3\u30e9\u30d9\u30eb\u3092\u5165\u308c\u66ff\u3048\u308b\n        self.setText(e.mimeData().text()) \n\n\nclass Example(QWidget):\n  \n    def __init__(self):\n        super().__init__()\n        \n        self.initUI()\n        \n        \n    def initUI(self):\n\n        edit = QLineEdit('', self)\n        # \u30c9\u30e9\u30c3\u30b0\u53ef\u80fd\u306b\u3059\u308b\n        edit.setDragEnabled(True)\n        edit.move(30, 65)\n\n        button = Button(\"Button\", self)\n        button.move(250, 65)\n        \n        self.setWindowTitle('Simple drag & drop')\n        self.setGeometry(300, 300, 300, 150)\n\n\nif __name__ == '__main__':\n  \n    app = QApplication(sys.argv)\n    ex = Example()\n    ex.show()\n    app.exec_()\n```\n\u521d\u671f\u72b6\u614b\n<img width=\"222\" alt=\"dradro_syoki.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/121997/61abaad9-17c0-8dea-56c6-7ec5a4687b4e.png\">\n\n\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u5f8c\n<img width=\"224\" alt=\"dradro_after.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/121997/c5ea82db-e677-ac25-b73e-768c90109710.png\">\n\n#\u3010\u30dc\u30bf\u30f3\u3092\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3011\n```py3:Drag&drop_a_button_widget.py\n#!/usr/bin/python3\n# -*- coding: utf-8 -*-\n\n\nimport sys\nfrom PyQt5.QtWidgets import QPushButton, QWidget, QApplication\nfrom PyQt5.QtCore import Qt, QMimeData\nfrom PyQt5.QtGui import QDrag\n\n\nclass Button(QPushButton):\n  \n    def __init__(self, title, parent):\n        super().__init__(title, parent)\n        \n\n    def mouseMoveEvent(self, e):\n\n        # \u53f3\u30af\u30ea\u30c3\u30af\u3060\u3051\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u53ef\u80fd\u306b\u3059\u308b\n        if e.buttons() != Qt.RightButton:\n            return\n\n        # \u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3055\u308c\u308b\u30c7\u30fc\u30bf\u5f62\u5f0f\u3092\u4ee3\u5165\n        mimeData = QMimeData()\n\n        drag = QDrag(self)\n        drag.setMimeData(mimeData)\n        # \u30c9\u30ed\u30c3\u30d7\u3057\u305f\u4f4d\u7f6e\u306b\u30dc\u30bf\u30f3\u306e\u5de6\u4e0a\u3092\u30bb\u30c3\u30c8\n        drag.setHotSpot(e.pos() - self.rect().topLeft())\n        dropAction = drag.exec_(Qt.MoveAction)\n\n\n    def mousePressEvent(self, e):\n      \n        # \u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\u3068\u304d\u306e\u30dc\u30bf\u30f3\u306e\u8272\u306e\u5909\u5316\n        QPushButton.mousePressEvent(self, e)\n        \n        # \u5de6\u30af\u30ea\u30c3\u30af\u3057\u305f\u3068\u304d\u306b\u30b3\u30f3\u30bd\u30fc\u30eb\u306bpress\u8868\u793a\n        if e.button() == Qt.LeftButton:\n            print('press')\n\n\nclass Example(QWidget):\n  \n    def __init__(self):\n        super().__init__()\n\n        self.initUI()\n        \n        \n    def initUI(self):\n\n        self.setAcceptDrops(True)\n\n        self.button = Button('Button', self)\n        self.button.move(100, 65)\n\n        self.setWindowTitle('Click or Move')\n        self.setGeometry(300, 300, 280, 150)\n        \n\n    def dragEnterEvent(self, e):\n      \n        e.accept()\n        \n\n    def dropEvent(self, e):\n\n        # \u30c9\u30e9\u30c3\u30b0\u5f8c\u306e\u30de\u30a6\u30b9\u306e\u4f4d\u7f6e\u306b\u30dc\u30bf\u30f3\u3092\u914d\u7f6e\n        position = e.pos()\n        self.button.move(position)\n\n        # \u3088\u304f\u308f\u304b\u3089\u3093\n        e.setDropAction(Qt.MoveAction)\n        e.accept()\n        \n\nif __name__ == '__main__':\n  \n    app = QApplication(sys.argv)\n    ex = Example()\n    ex.show()\n    app.exec_()  \n```\n\n<img width=\"206\" alt=\"drag_drop_middle.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/121997/35b18cb3-59f4-a279-20fc-1893cae0950a.png\">\u3000<img width=\"207\" alt=\"drag_drop_after.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/121997/d292c970-b68c-7cf2-a56f-d0bfdbbe1e67.png\">\n\n[\u6b21\u56de](http://qiita.com/Algebra_nobu/items/fec5c97bfbd6c3ff1f00)\u306f[Painting](http://zetcode.com/gui/pyqt5/painting/)\u3092\u3056\u3063\u304f\u308a\u8a66\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n", "tags": ["Python", "python3", "GUI", "PyQt5", "Windows8.1"]}