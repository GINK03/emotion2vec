{"context": "Github\u7ba1\u7406\u306eRails4\u30a2\u30d7\u30ea\u3092Heroku\u3078\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3002\n\nCircleCI\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n\n\nCircleCI\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a2d\u5b9a\n\nGithub Deploy key\u8a2d\u5b9a\n[Checkout SSH keys]\u304b\u3089deploy key\u3092\u8ffd\u52a0\u3059\u308b\u3002(deploy key\u306f\u30ea\u30dd\u30b8\u30c8\u30ea\u3054\u3068\u306b\u8a2d\u5b9a\u3067\u304d\u308b\u3002\u4e00\u65b9\u3001user key\u3092\u4f7f\u3046\u65b9\u6cd5\u3082\u3042\u308b)\n\nGithub\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u79fb\u308a\u3001\u8a2d\u5b9a\u3067Deploy keys\u306b\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n\nHeroku\u8a2d\u5b9a\nHeroku\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u8a2d\u5b9a\u3067\u3001API key\u3092\u78ba\u8a8d\u3059\u308b\u3002(Reveal\u3067\u5185\u5bb9\u304c\u8868\u793a\u3055\u308c\u308b)\n\nCircleCI\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a2d\u5b9a\u306b\u623b\u308a\u3001[Heroku Deployment]\u304b\u3089API key\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\u7d9a\u3044\u3066Deploy User\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n\ncircle.yml\u8a2d\u5b9a\nHeroku\u3078\u306epush\u6642\u306bmigrate\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3002\n\ncircle.yml\ndeployment:\n  staging:\n    branch: master\n    commands:\n      - git push git@heroku.com:circleci-heroku.git $CIRCLE_SHA1:master\n      - heroku run rake db:migrate --app circleci-heroku\n\n\n\u3053\u308c\u3092add\u3057\u3066github\u3078push\u3059\u308b\u3068CircleCI\u3067\u30d3\u30eb\u30c9\u304c\u8d70\u3063\u3066Heroku\u3078\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u306e\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n\n\u53c2\u8003\n\nCircleCI: Continuous Deployment with Heroku\n\nCircleCI: Heroku with pre or post-deployment steps\n\n\nGithub\u7ba1\u7406\u306eRails4\u30a2\u30d7\u30ea\u3092Heroku\u3078\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3002\n\n\n## CircleCI\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n\n![Screen Shot 2017-03-05 at 0.34.55.png](https://qiita-image-store.s3.amazonaws.com/0/281/084ee0b1-df29-d33f-1dc3-39b3ccaf226f.png \"Screen Shot 2017-03-05 at 0.34.55.png\")\n\n\n## CircleCI\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a2d\u5b9a\n### Github Deploy key\u8a2d\u5b9a\n[Checkout SSH keys]\u304b\u3089deploy key\u3092\u8ffd\u52a0\u3059\u308b\u3002(deploy key\u306f\u30ea\u30dd\u30b8\u30c8\u30ea\u3054\u3068\u306b\u8a2d\u5b9a\u3067\u304d\u308b\u3002\u4e00\u65b9\u3001user key\u3092\u4f7f\u3046\u65b9\u6cd5\u3082\u3042\u308b)\n\n![Screen Shot 2017-03-05 at 0.37.46.png](https://qiita-image-store.s3.amazonaws.com/0/281/5c69a3f0-ae14-6d2b-310c-fbb83539af47.png \"Screen Shot 2017-03-05 at 0.37.46.png\")\n\n\nGithub\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u79fb\u308a\u3001\u8a2d\u5b9a\u3067Deploy keys\u306b\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n![Screen Shot 2017-03-05 at 0.40.27.png](https://qiita-image-store.s3.amazonaws.com/0/281/d6ab990b-1fed-c2f3-3d5e-d1bd3d6816ae.png \"Screen Shot 2017-03-05 at 0.40.27.png\")\n\n\n### Heroku\u8a2d\u5b9a\nHeroku\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u8a2d\u5b9a\u3067\u3001API key\u3092\u78ba\u8a8d\u3059\u308b\u3002(Reveal\u3067\u5185\u5bb9\u304c\u8868\u793a\u3055\u308c\u308b)\n\n![Screen Shot 2017-03-05 at 0.43.17.png](https://qiita-image-store.s3.amazonaws.com/0/281/d761e9b0-3323-c416-a0d1-986d1068a0f2.png \"Screen Shot 2017-03-05 at 0.43.17.png\")\n\nCircleCI\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a2d\u5b9a\u306b\u623b\u308a\u3001[Heroku Deployment]\u304b\u3089API key\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\u7d9a\u3044\u3066Deploy User\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n![Screen Shot 2017-03-05 at 0.39.03.png](https://qiita-image-store.s3.amazonaws.com/0/281/6362f3bf-8d74-4417-8b75-bc8f483485d0.png \"Screen Shot 2017-03-05 at 0.39.03.png\")\n\n\n\n\n\n\n## circle.yml\u8a2d\u5b9a\nHeroku\u3078\u306epush\u6642\u306bmigrate\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3002\n\n```circle.yml\ndeployment:\n  staging:\n    branch: master\n    commands:\n      - git push git@heroku.com:circleci-heroku.git $CIRCLE_SHA1:master\n      - heroku run rake db:migrate --app circleci-heroku\n```\n\u3053\u308c\u3092add\u3057\u3066github\u3078push\u3059\u308b\u3068CircleCI\u3067\u30d3\u30eb\u30c9\u304c\u8d70\u3063\u3066Heroku\u3078\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u306e\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n![Screen Shot 2017-03-05 at 0.56.06.png](https://qiita-image-store.s3.amazonaws.com/0/281/d94a1831-0970-3e1d-24a0-3862075482df.png \"Screen Shot 2017-03-05 at 0.56.06.png\")\n\n## \u53c2\u8003\n- [CircleCI: Continuous Deployment with Heroku\n](https://circleci.com/docs/1.0/continuous-deployment-with-heroku/)\n- [CircleCI: Heroku with pre or post-deployment steps](https://circleci.com/docs/1.0/configuration/#heroku-with-pre-or-post-deployment-steps)\n\n\n", "tags": ["Heroku", "Rails4", "Rails", "CircleCI"]}