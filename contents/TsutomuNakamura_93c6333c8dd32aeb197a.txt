{"context": "\n\n\u524d\u306e\u8a18\u4e8b\nLVM \u6982\u8981\n\n\u69cb\u6210\u6982\u8981\n\n\u8907\u6570\u306e\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u304c\u3042\u308a\u3001\u305d\u306e\u4e0a\u306b\u8907\u6570\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u305d\u306e\u4e0a\u306b\u8907\u6570\u306e\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u8907\u6570\u306e\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001\u305d\u306e\u4e0a\u306b\u4f5c\u6210\u3055\u308c\u308b\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u30011 \u3064\u306e\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3088\u308a\u3082\u5927\u304d\u3044\u9818\u57df\u3092\u5272\u308a\u5f53\u3066\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059(\u305f\u3060\u3057\u3001\u305d\u306e\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u7dcf\u6570\u306e\u5bb9\u91cf\u3092\u8d8a\u3048\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093)\u3002\n\u4e0a\u8a18\u306e\u56f3\u3067\u306f\u3001\u672a\u4f7f\u7528\u9818\u57df\u304c\u5b58\u5728\u3057\u307e\u3059\u304c\u3001\u305d\u306e\u672a\u4f7f\u7528\u9818\u57df\u306f\u5f8c\u307b\u3069\u5bb9\u91cf\u304c\u8ffd\u52a0\u3067\u5fc5\u8981\u306b\u306a\u3063\u305f\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u5272\u308a\u5f53\u3066\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u4eca\u56de\u306e\u4f8b\u3067\u306flvg-share \u3068\u3044\u3046\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\u3001\u305d\u306e\u4e0a\u306b/dev/lvg-share/files, /dev/lvg-share/media, /dev/lvg-share/work \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u307e\u305f\u5f8c\u307b\u3069\u3001\u5404\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u534a\u5206\u306e\u9818\u57df\u3092\u4f7f\u7528\u3057\u3066\u3044\u304d\u3001RAID1 \u69cb\u6210\u306b\u5207\u308a\u66ff\u3048\u308b\u624b\u6cd5\u306b\u3064\u3044\u3066\u3082\u8aac\u660e\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u691c\u8a3c\u3057\u305f\u74b0\u5883\n\n\n OS\n Fedora 21\n\n\n \u69cb\u6210\n /dev/sdb \u306broot \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u304c\u5165\u3063\u3066\u3044\u308bOS \u306b\u3001/deb/sdb \u301c /dev/sdf \u306e\u7269\u7406\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u8ffd\u52a0\u3002\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u306bVMWare \u3092\u4f7f\u7528\u3002\n\n\n\n\n\n\u73fe\u5728\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u78ba\u8a8d\nfdisk -l \u30b3\u30de\u30f3\u30c9\u3067\u3001\u73fe\u5728\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n/dev/sdb \u301c /dev/sde \u30c7\u30d0\u30a4\u30b9\u306f\u307e\u3060\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\nfdisk\u30b3\u30de\u30f3\u30c9\u306b\u3088\u308b\u8a2d\u5b9a\u4f8b\n$ sudo fdisk -l\n\nDisk /dev/sdb: 42.9 GB, 42949672960 bytes\n255 heads, 63 sectors/track, 5221 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000000\n\nDisk /dev/sdb doesn't contain a valid partition table\n\nDisk /dev/sda: 85.9 GB, 85899345920 bytes\n255 heads, 63 sectors/track, 10443 cylinders, total 167772160 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x0002e29c\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sda1   *        2048   159385599    79691776   83  Linux\n/dev/sda2       159387646   167770111     4191233    5  Extended\n/dev/sda5       159387648   167770111     4191232   82  Linux swap / Solaris\n\nDisk /dev/sdd: 42.9 GB, 42949672960 bytes\n255 heads, 63 sectors/track, 5221 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000000\n\nDisk /dev/sdd doesn't contain a valid partition table\n\nDisk /dev/sde: 42.9 GB, 42949672960 bytes\n255 heads, 63 sectors/track, 5221 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000000\n\nDisk /dev/sde doesn't contain a valid partition table\n\nDisk /dev/sdc: 42.9 GB, 42949672960 bytes\n255 heads, 63 sectors/track, 5221 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000000\n\nDisk /dev/sdc doesn't contain a valid partition table\n\n\n\u3053\u308c\u304b\u3089\u3001/dev/sdb \u301c /dev/sde \u306b\u5bfe\u3057\u3066/dev/sdb1 \u301c /dev/sde1 \u3068\u3044\u3046\u5f62\u3067\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u305d\u308c\u305e\u308c\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u30b5\u30a4\u30ba\u306f10 GB \u3068\u3068\u3057\u307e\u3059\u3002\n\u307e\u305a\u306f\u3001fdisk \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066/dev/sdb \u30c7\u30d0\u30a4\u30b9\u306bLVM \u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ sudo fdisk /dev/sdb\nDevice contains neither a valid DOS partition table, nor Sun, SGI or OSF disklabel\nBuilding a new DOS disklabel with disk identifier 0x995af6e7.\nChanges will remain in memory only, until you decide to write them.\nAfter that, of course, the previous content won't be recoverable.\n\nWarning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)\n\nCommand (m for help): m\nCommand action\n   a   toggle a bootable flag\n   b   edit bsd disklabel\n   c   toggle the dos compatibility flag\n   d   delete a partition\n   l   list known partition types\n   m   print this menu\n   n   add a new partition\n   o   create a new empty DOS partition table\n   p   print the partition table\n   q   quit without saving changes\n   s   create a new empty Sun disklabel\n   t   change a partition's system id\n   u   change display/entry units\n   v   verify the partition table\n   w   write table to disk and exit\n   x   extra functionality (experts only)\n\nCommand (m for help): n\nPartition type:\n   p   primary (0 primary, 0 extended, 4 free)\n   e   extended\nSelect (default p): \nUsing default response p\nPartition number (1-4, default 1): \nUsing default value 1\nFirst sector (2048-83886079, default 2048): \nUsing default value 2048\nLast sector, +sectors or +size{K,M,G} (2048-83886079, default 83886079): +10G\n\nCommand (m for help): t\nSelected partition 1\nHex code (type L to list codes): L\n\n 0  Empty           24  NEC DOS         81  Minix / old Lin bf  Solaris        \n 1  FAT12           27  Hidden NTFS Win 82  Linux swap / So c1  DRDOS/sec (FAT-\n 2  XENIX root      39  Plan 9          83  Linux           c4  DRDOS/sec (FAT-\n 3  XENIX usr       3c  PartitionMagic  84  OS/2 hidden C:  c6  DRDOS/sec (FAT-\n 4  FAT16 <32M      40  Venix 80286     85  Linux extended  c7  Syrinx         \n 5  Extended        41  PPC PReP Boot   86  NTFS volume set da  Non-FS data    \n 6  FAT16           42  SFS             87  NTFS volume set db  CP/M / CTOS / .\n 7  HPFS/NTFS/exFAT 4d  QNX4.x          88  Linux plaintext de  Dell Utility   \n 8  AIX             4e  QNX4.x 2nd part 8e  Linux LVM       df  BootIt         \n 9  AIX bootable    4f  QNX4.x 3rd part 93  Amoeba          e1  DOS access     \n a  OS/2 Boot Manag 50  OnTrack DM      94  Amoeba BBT      e3  DOS R/O        \n b  W95 FAT32       51  OnTrack DM6 Aux 9f  BSD/OS          e4  SpeedStor      \n c  W95 FAT32 (LBA) 52  CP/M            a0  IBM Thinkpad hi eb  BeOS fs        \n e  W95 FAT16 (LBA) 53  OnTrack DM6 Aux a5  FreeBSD         ee  GPT            \n f  W95 Ext'd (LBA) 54  OnTrackDM6      a6  OpenBSD         ef  EFI (FAT-12/16/\n10  OPUS            55  EZ-Drive        a7  NeXTSTEP        f0  Linux/PA-RISC b\n11  Hidden FAT12    56  Golden Bow      a8  Darwin UFS      f1  SpeedStor      \n12  Compaq diagnost 5c  Priam Edisk     a9  NetBSD          f4  SpeedStor      \n14  Hidden FAT16 <3 61  SpeedStor       ab  Darwin boot     f2  DOS secondary  \n16  Hidden FAT16    63  GNU HURD or Sys af  HFS / HFS+      fb  VMware VMFS    \n17  Hidden HPFS/NTF 64  Novell Netware  b7  BSDI fs         fc  VMware VMKCORE \n18  AST SmartSleep  65  Novell Netware  b8  BSDI swap       fd  Linux raid auto\n1b  Hidden W95 FAT3 70  DiskSecure Mult bb  Boot Wizard hid fe  LANstep        \n1c  Hidden W95 FAT3 75  PC/IX           be  Solaris boot    ff  BBT            \n1e  Hidden W95 FAT1 80  Old Minix      \nHex code (type L to list codes): 8e\nChanged system type of partition 1 to 8e (Linux LVM)\n\nCommand (m for help): w\nThe partition table has been altered!\n\nCalling ioctl() to re-read partition table.\nSyncing disks.\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4f5c\u6210\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ sudo fdisk -l /dev/sdb\n\nDisk /dev/sdb: 42.9 GB, 42949672960 bytes\n139 heads, 49 sectors/track, 12316 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x995af6e7\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sdb1            2048    20973567    10485760   8e  Linux LVM\n\n/dev/sdb \u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4f5c\u6210\u3067\u304d\u305f\u3089\u3001/dev/sdc \u301c /dev/sde \u306b\u3082\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n$ for I in {c,d,e}; do sudo sfdisk -d /dev/sdb | sudo sfdisk /dev/sd${I} --force; done\n\n\u305d\u308c\u305e\u308c\u306e\u30c7\u30d0\u30a4\u30b9\u3067\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001fdisk -l \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u5148\u307b\u3069\u306e\u51fa\u529b\u3068\u6bd4\u8f03\u3057\u3001\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n$ sudo fdisk -l\n\nDisk /dev/sdb: 42.9 GB, 42949672960 bytes\n139 heads, 49 sectors/track, 12316 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x995af6e7\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sdb1            2048    20973567    10485760   8e  Linux LVM\n\nDisk /dev/sda: 85.9 GB, 85899345920 bytes\n255 heads, 63 sectors/track, 10443 cylinders, total 167772160 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x0002e29c\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sda1   *        2048   159385599    79691776   83  Linux\n/dev/sda2       159387646   167770111     4191233    5  Extended\n/dev/sda5       159387648   167770111     4191232   82  Linux swap / Solaris\n\nDisk /dev/sdd: 42.9 GB, 42949672960 bytes\n255 heads, 63 sectors/track, 5221 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000000\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sdd1            2048    20973567    10485760   8e  Linux LVM\n\nDisk /dev/sde: 42.9 GB, 42949672960 bytes\n255 heads, 63 sectors/track, 5221 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000000\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sde1            2048    20973567    10485760   8e  Linux LVM\n\nDisk /dev/sdc: 42.9 GB, 42949672960 bytes\n255 heads, 63 sectors/track, 5221 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000000\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sdc1            2048    20973567    10485760   8e  Linux LVM\n\n\n\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u4f5c\u6210\nLVM \u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ sudo pvcreate /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sde1\n  Physical volume \"/dev/sdb1\" successfully created\n  Physical volume \"/dev/sdc1\" successfully created\n  Physical volume \"/dev/sdd1\" successfully created\n  Physical volume \"/dev/sde1\" successfully created\n\npvdisplay \u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ sudo pvdisplay\n  \"/dev/sdb1\" is a new physical volume of \"10.00 GiB\"\n  --- NEW Physical volume ---\n  PV Name               /dev/sdb1\n  VG Name               \n  PV Size               10.00 GiB\n  Allocatable           NO\n  PE Size               0   \n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               dCvzjO-R0Tv-voXT-Me8v-q0ss-A5lI-ojbJTQ\n\n  \"/dev/sdc1\" is a new physical volume of \"10.00 GiB\"\n  --- NEW Physical volume ---\n  PV Name               /dev/sdc1\n  VG Name               \n  PV Size               10.00 GiB\n  Allocatable           NO\n  PE Size               0   \n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               fxLbYc-4nOT-YKEB-Zzeh-L4pt-QiLa-eSEwdK\n\n  \"/dev/sdd1\" is a new physical volume of \"10.00 GiB\"\n  --- NEW Physical volume ---\n  PV Name               /dev/sdd1\n  VG Name               \n  PV Size               10.00 GiB\n  Allocatable           NO\n  PE Size               0   \n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               SkmklQ-s3Si-lC2b-hQNa-nOIt-uXnb-1uGs5W\n\n  \"/dev/sde1\" is a new physical volume of \"10.00 GiB\"\n  --- NEW Physical volume ---\n  PV Name               /dev/sde1\n  VG Name               \n  PV Size               10.00 GiB\n  Allocatable           NO\n  PE Size               0   \n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               5TkFOl-wXHc-u6vg-ryfY-WefK-4ftc-UkwPLg\n\n\n\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3059\u308b\nvgcreate \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066lvg-share \u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ sudo vgcreate lvg-share /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sde1\n  Volume group \"lvg-share\" successfully created\n\nvgdisplay, vgscan \u30b3\u30de\u30f3\u30c9\u3067\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ sudo vgdisplay\n  --- Volume group ---\n  VG Name               lvg-share\n  System ID             \n  Format                lvm2\n  Metadata Areas        4\n  Metadata Sequence No  1\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                0\n  Cur LV                0\n  Open LV               0\n  Max PV                0\n  Cur PV                4\n  Act PV                4\n  VG Size               39.98 GiB\n  PE Size               4.00 MiB\n  Total PE              10236\n  Alloc PE / Size       0 / 0   \n  Free  PE / Size       10236 / 39.98 GiB\n  VG UUID               rnFwhI-ybWH-el9e-NIgK-3vOY-hO8L-sehg7c\n\n$ sudo vgscan\n  Reading all physical volumes.  This may take a while...\n  Found volume group \"lvg-share\" using metadata type lvm2\n\n\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u3092\u30ea\u30cd\u30fc\u30e0\u3059\u308b (vgrename)\n\u3082\u3057\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u540d\u3092\u5909\u66f4\u3057\u305f\u3044\u5834\u5408\u306f\u3001vgrename \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u30dc\u30ea\u30e5\u30fc\u30e0\u540d\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n$ sudo vgrename <\u5909\u66f4\u524d\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u540d> <\u5909\u66f4\u5f8c\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u540d>\n\n\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u3092\u524a\u9664\u3059\u308b (vgremove)\n\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u3092\u524a\u9664\u3059\u308b\u5834\u5408\u306f\u3001vgremove \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n$ sudo vgremove <\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u540d>\n\n\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f5c\u6210\u3059\u308b\n\u4eca\u56de\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u898b\u7a4d\u3082\u308a\u3067\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u69cb\u6210\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\n\n\u5272\u308a\u5f53\u3066\n\n\n \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u540d \n \u5bb9\u91cf\n\n\n public \n 18GB\n\n\n media \n 8GB\n\n\n document \n 6GB\n\n\n\n\nlvcreate \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3001\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n$ sudo lvcreate --name public --size 18GB lvg-share\n  Logical volume \"public\" created\n$ sudo lvcreate --name media --size 8GB lvg-share\n  Logical volume \"media\" created\n$ sudo lvcreate --name document --size 6GB lvg-share\n  Logical volume \"document\" created\n\nlvdisplay \u3067\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n$ sudo lvdisplay\n  --- Logical volume ---\n  LV Path                /dev/lvg-share/public\n  LV Name                public\n  VG Name                lvg-share\n  LV UUID                IVnPIB-hJCA-PD7o-jcpe-Et9I-zVZb-eQbcTu\n  LV Write Access        read/write\n  LV Creation host, time lvm-test-on-pdv, 2015-03-08 17:37:40 +0900\n  LV Status              available\n  # open                 0\n  LV Size                18.00 GiB\n  Current LE             4608\n  Segments               2\n  Allocation             inherit\n  Read ahead sectors     auto\n  - currently set to     256\n  Block device           252:0\n\n  --- Logical volume ---\n  LV Path                /dev/lvg-share/media\n  LV Name                media\n  VG Name                lvg-share\n  LV UUID                t9tpLc-0ddp-CnmH-BVoA-HEFr-Q1dq-M4x1Bj\n  LV Write Access        read/write\n  LV Creation host, time lvm-test-on-pdv, 2015-03-08 17:37:51 +0900\n  LV Status              available\n  # open                 0\n  LV Size                8.00 GiB\n  Current LE             2048\n  Segments               1\n  Allocation             inherit\n  Read ahead sectors     auto\n  - currently set to     256\n  Block device           252:1\n\n  --- Logical volume ---\n  LV Path                /dev/lvg-share/document\n  LV Name                document\n  VG Name                lvg-share\n  LV UUID                ERAqAq-vzZF-AQev-tTS0-gAJo-BnPq-MjUrf2\n  LV Write Access        read/write\n  LV Creation host, time lvm-test-on-pdv, 2015-03-08 17:37:57 +0900\n  LV Status              available\n  # open                 0\n  LV Size                6.00 GiB\n  Current LE             1536\n  Segments               1\n  Allocation             inherit\n  Read ahead sectors     auto\n  - currently set to     256\n  Block device           252:2\n\n$ sudo lvscan\n  ACTIVE            '/dev/lvg-share/public' [18.00 GiB] inherit\n  ACTIVE            '/dev/lvg-share/media' [8.00 GiB] inherit\n  ACTIVE            '/dev/lvg-share/document' [6.00 GiB] inherit\n\n\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u540d\u306e\u540d\u524d\u3092\u5909\u66f4\u3059\u308b(lvrename)\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u540d\u3092\u5909\u66f4\u3059\u308b\u5834\u5408\u306f\u3001lvrename \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n$ sudo lvrename <\u5909\u66f4\u524d\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u540d> <\u5909\u66f4\u5f8c\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u540d>\n\n\n\u88dc\u8db3\uff1a\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u524a\u9664\u3059\u308b(lvremove)\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u524a\u9664\u3059\u308b\u5834\u5408\u306f\u3001lvremove \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n$ sudo lvremove <\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30d1\u30b9>\n\n\n\u88dc\u8db3\uff1a\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u62e1\u5f35\u3059\u308b\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u5bb9\u91cf\u3092\u62e1\u5f35\u3059\u308b\u5834\u5408\u306f\u3001lvextend \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n$ sudo lvextend -L<\u30b5\u30a4\u30ba> <\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30d1\u30b9>\n\n\n\u4f8b(+1GBdocument\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u5bb9\u91cf\u3092\u62e1\u5f35\u3059\u308b)\n$ sudo lvextend -L+1G /dev/lvg-share/hoge\n\n\n\n\u88dc\u8db3\uff1a\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u7e2e\u5c0f\u3059\u308b\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u5bb9\u91cf\u3092\u7e2e\u5c0f\u3059\u308b\u5834\u5408\u306f\u3001lvreduce \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n$ sudo lvreduce -L<\u30b5\u30a4\u30ba> <\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30d1\u30b9>\n\n\n\u4f8b(document\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u5bb9\u91cf\u30926GB\u306b\u7e2e\u5c0f\u3059\u308b)\n$ sudo lvreduce -L6 /dev/sdz\n\n\n\u203b\u76f8\u5bfe\u6307\u5b9a\u3067-L-1G \u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u306f\u3001+1GB \u6e1b\u3089\u3059\u610f\u5473\u306b\u306a\u308b\u306e\u3067\u3001\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3059\u308b\n\u3053\u3053\u307e\u3067\u306e\u624b\u9806\u3067\u4f5c\u6210\u3055\u308c\u305f\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u307e\u305a\u3001/dev/lvg-share/public \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306bext4 \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u6b21\u306e\u3088\u3046\u306b\u5272\u308a\u5f53\u3066\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u69cb\u6210\n\n\n \u8ad6\u7406\u30c7\u30d0\u30a4\u30b9 \n \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\n\n\n /dev/lvg-share/public \n ext4\n\n\n /dev/lvg-share/media \n XFS\n\n\n /dev/lvg-share/document \n ReiserFS\n\n\n\n\n\npublic\u8ad6\u7406\u30c7\u30d0\u30a4\u30b9\u306bext4\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3059\u308b\n$ sudo mkfs.ext4 /dev/lvg-share/public\nmke2fs 1.42.9 (4-Feb-2014)\nFilesystem label=\nOS type: Linux\nBlock size#4096 (log2)\nFragment size#4096 (log2)\nStride#0 blocks, Stripe width0 blocks\n1179648 inodes, 4718592 blocks\n235929 blocks (5.00%) reserved for the super user\nFirst data block=0\nMaximum filesystem blocks=4294967296\n144 block groups\n32768 blocks per group, 32768 fragments per group\n8192 inodes per group\nSuperblock backups stored on blocks: \n    32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, \n    4096000\n\nAllocating group tables: done                            \nWriting inode tables: done                            \nCreating journal (32768 blocks): done\nWriting superblocks and filesystem accounting information: done\n\n\n\nmedia\u8ad6\u7406\u30c7\u30d0\u30a4\u30b9\u306bXFS\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3059\u308b\n$ sudo mkfs.xfs /dev/lvg-share/media\nmeta-data#/dev/lvg-share/media   isize=256    agcount=4, agsize524288 blks\n         #                       sectsz=512   attr=2, projid32bit0\ndata     #                       bsize=4096   blocks=2097152, imaxpct25\n         #                       sunit=0      swidth0 blks\nnaming   #version 2              bsize=4096   ascii-ci0\nlog      #internal log           bsize=4096   blocks=2560, version2\n         #                       sectsz=512   sunit=0 blks, lazy-count1\nrealtime #none                   extsz=4096   blocks=0, rtextents0\n\n\n\ndocument\u8ad6\u7406\u30c7\u30d0\u30a4\u30b9\u306bReiserFS\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3059\u308b\n$ sudo mkfs.reiserfs /dev/lvg-share/document\nmkfs.reiserfs 3.6.24\n\nGuessing about desired format.. Kernel 3.16.0-30-generic is running.\nFormat 3.6 with standard journal\nCount of blocks on the device: 1835008\nNumber of blocks consumed by mkreiserfs formatting process: 8267\nBlocksize: 4096\nHash function used to sort names: \"r5\"\nJournal Size 8193 blocks (first block 18)\nJournal Max transaction length 1024\ninode generation number: 0\nUUID: e56e8e90-46b1-4900-a447-33939e4a098f\nATTENTION: YOU SHOULD REBOOT AFTER FDISK!\n    ALL DATA WILL BE LOST ON '/dev/lvg-share/document'!\nContinue (y/n):y\nInitializing journal - 0%....20%....40%....60%....80%....100%\nSyncing..ok\nReiserFS is successfully created on /dev/lvg-share/document.\n\n\n\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3057\u3066\u307f\u308b\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3057\u3001df -h \u30b3\u30de\u30f3\u30c9\u3067\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n$ sudo mkdir /mnt/{public,media,document}\n$ sudo mount /dev/lvg-share/public   /mnt/public\n$ sudo mount /dev/lvg-share/media    /mnt/media\n$ sudo mount /dev/lvg-share/document /mnt/document\n$ df -h\nFilesystem                       Size  Used Avail Use% Mounted on\n/dev/sda1                         75G  1.2G   70G   2% /\nnone                             4.0K     0  4.0K   0% /sys/fs/cgroup\nudev                             2.0G  4.0K  2.0G   1% /dev\ntmpfs                            394M  3.1M  391M   1% /run\nnone                             5.0M     0  5.0M   0% /run/lock\nnone                             2.0G     0  2.0G   0% /run/shm\nnone                             100M     0  100M   0% /run/user\n/dev/mapper/lvg--share-public     18G   44M   17G   1% /mnt/public\n/dev/mapper/lvg--share-media     8.0G   33M  8.0G   1% /mnt/media\n/dev/mapper/lvg--share-document  7.0G   33M  7.0G   1% /mnt/document\n\n\u65b0\u3057\u304f\u4f5c\u6210\u3057\u305f\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u304c\u30de\u30a6\u30f3\u30c8\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u51fa\u6765\u307e\u3057\u305f\u3002\n\u3053\u306e\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3057\u305f\u9818\u57df\u306f\u3001\u901a\u5e38\u901a\u308a\u30d5\u30a1\u30a4\u30eb\u3092\u4fdd\u5b58\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u307e\u305f\u3001\u901a\u5e38\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u3068\u540c\u69d8\u306bfstab \u306b\u8a18\u8ff0\u3057\u3066OS \u8d77\u52d5\u6642\u306b\u3001\u81ea\u52d5\u7684\u306b\u30de\u30a6\u30f3\u30c8\u3055\u305b\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n$ sudo blkid | grep /dev/mapper\n/dev/mapper/lvg--share-public: UUID#\"e184b6b8-ed2f-470b-a08b-f45637623ad4\" TYPE\"ext4\" \n/dev/mapper/lvg--share-media: UUID#\"ace4c3d3-12e3-43bb-8dfc-8fd0f9b73684\" TYPE\"xfs\" \n/dev/mapper/lvg--share-document: UUID#\"e56e8e90-46b1-4900-a447-33939e4a098f\" TYPE\"reiserfs\"\n\n$ sudo cp -ip /etc/fstab /etc/fstab.org\n$ sudo vim /etc/fstab\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n/etc/fstab\nUUID=\"e184b6b8-ed2f-470b-a08b-f45637623ad4\" /mnt/public   ext4     defaults 0 0\nUUID=\"ace4c3d3-12e3-43bb-8dfc-8fd0f9b73684\" /mnt/media    xfs      defaults 0 0\nUUID=\"e56e8e90-46b1-4900-a447-33939e4a098f\" /mnt/document reiserfs defaults 0 0\n\n\nfstab \u306b\u8a18\u8ff0\u3057\u305f\u3089\u3001\u30de\u30a6\u30f3\u30c8\u306e\u30c6\u30b9\u30c8\u3092\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n$ sudo umount /mnt/{public,media,document}\n$ sudo mount -a\n$ echo $?\n0\n\n\u30a8\u30e9\u30fc\u306a\u304f\u5b9f\u884c\u3067\u304d\u305f\u3089\u3001OS \u3092\u518d\u8d77\u52d5\u3057\u3066\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n$ sudo shutdown -r now\n# ...\u518d\u8d77\u52d5\u5f8c\n$ df -h\n\u203b\u51fa\u529b\u7d50\u679c\u306b\u3064\u3044\u3066\u306f\u7701\u7565\n\nfstab \u306b\u8a18\u8ff0\u3057\u305f\u30c7\u30d0\u30a4\u30b9\u304c\u554f\u984c\u306a\u304f\u30de\u30a6\u30f3\u30c8\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u30b5\u30a4\u30ba\u3092\u5909\u66f4\u3059\u308b\n\u4e00\u5ea6\u4f5c\u6210\u3057\u305f\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u30b5\u30a4\u30ba\u3092\u5909\u66f4\u3059\u308b\u624b\u9806\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u4eca\u56de\u306f/dev/lvg-share/public \u30dc\u30ea\u30e5\u30fc\u30e0\u309218GB \u304b\u308920GB \u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u30b5\u30a4\u30ba\u3092\u62e1\u5f35\u3059\u308b\n\u307e\u305a\u306f\u3001\u30b5\u30a4\u30ba\u5909\u66f4\u5bfe\u8c61\u3068\u306a\u308b\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30a2\u30f3\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\n$ sudo umount /dev/lvg-share/public\n\nlvextend \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u62e1\u5f35\u3057\u307e\u3059\u3002\n\nlvextend\n$ sudo lvextend -L 20G /dev/lvg-share/public\n  Extending logical volume public to 20.00 GiB\n  Logical volume public successfully resized\n\n\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u62e1\u5f35\u3057\u305f\u3089\u3001\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n$ sudo e2fsck -f /dev/lvg-share/public\ne2fsck 1.42.9 (4-Feb-2014)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/dev/lvg-share/public: 11/1179648 files (0.0% non-contiguous), 118065/4718592 blocks\n\n\u3053\u306e\u6642\u70b9\u3067\u306f\u3001\u307e\u3060\u30d6\u30ed\u30c3\u30af\u6570\u306f18GB \u306e\u6642\u306e\u307e\u307e\u306a\u306e\u3067\u3001\u30d6\u30ed\u30c3\u30af\u6570\u3082\u62e1\u5f35\u3057\u307e\u3059\u3002\n$ sudo resize2fs /dev/lvg-share/public\nresize2fs 1.42.9 (4-Feb-2014)\nResizing the filesystem on /dev/lvg-share/public to 5242880 (4k) blocks.\nThe filesystem on /dev/lvg-share/public is now 5242880 blocks long.\n\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3057\u3066\u30b5\u30a4\u30ba\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n$ sudo mount /dev/lvg-share/public /mnt/public\n$ df -h\nFilesystem                       Size  Used Avail Use% Mounted on\n/dev/sda1                         75G  1.2G   70G   2% /\nnone                             4.0K     0  4.0K   0% /sys/fs/cgroup\nudev                             2.0G  4.0K  2.0G   1% /dev\ntmpfs                            394M  3.1M  391M   1% /run\nnone                             5.0M     0  5.0M   0% /run/lock\nnone                             2.0G     0  2.0G   0% /run/shm\nnone                             100M     0  100M   0% /run/user\n/dev/mapper/lvg--share-media     8.0G   33M  8.0G   1% /mnt/media\n/dev/mapper/lvg--share-document  7.0G   33M  7.0G   1% /mnt/document\n/dev/mapper/lvg--share-public     20G   44M   19G   1% /mnt/public\n\nSize \u306e\u5024\u304c20GB \u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u7e2e\u5c0f\u3059\u308b\n\u6b21\u306f\u4e00\u5ea6\u62e1\u5f35\u3057\u305f\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u30b5\u30a4\u30ba\u3092\u7e2e\u5c0f\u3059\u308b\u624b\u9806\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u307e\u305a\u3001\u7e2e\u5c0f\u3059\u308b\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30a2\u30f3\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\n$ sudo umount /dev/lvg-share/public\n\n\u6b21\u306bresize2fs \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u30b5\u30a4\u30ba\u3092\u7e2e\u5c0f\u3057\u307e\u3059\u304c\u3001\u4e8b\u524d\u306b\u6b63\u78ba\u306a\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u6c42\u3081\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u6b63\u78ba\u306a\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u6c42\u3081\u308b\u306b\u306f\u3001\u307e\u305a/dev/lvg-share/public \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e1\u30d6\u30ed\u30c3\u30af\u3042\u305f\u308a\u306e\u30b5\u30a4\u30ba\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ sudo blockdev --getbsz /dev/lvg-share/public\n4096\n\n\u4e0a\u8a18\u306e\u51fa\u529b\u304b\u3089\u3001/dev/lvg-share/public \u306e\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e1 \u30d6\u30ed\u30c3\u30af\u3042\u305f\u308a\u306e\u30b5\u30a4\u30ba\u306f4096byte \u3067\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u6b21\u306b\u3001\u3053\u306e\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u53c2\u8003\u306b18GB(GiB) \u306e\u5bb9\u91cf\u3092\u78ba\u4fdd\u3059\u308b\u306b\u306f\u3001\u3069\u308c\u3060\u3051\u306e\u30d6\u30ed\u30c3\u30af\u6570\u304c\u5fc5\u8981\u304b\u7b97\u51fa\u3057\u307e\u3059\u3002\n$ echo \"(1 * 1024 * 1024 * 1024 * 18) / 4096\" | bc\n4718592\n$ echo \"(1 * 1024 * 1024 * 1024 * 18) % 4096\" | bc\n0\n\n\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u306f4718592 \u3067\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n2 \u3064\u76ee\u306e\u8a08\u7b97\u5f0f\u3067\u3001\u5272\u308a\u5207\u308c\u306a\u3044\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u305f(\u7d50\u679c\u304c0 \u306b\u306a\u3089\u306a\u304b\u3063\u305f)\u5834\u5408\u306f\u3001\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u30921 \u5207\u308a\u4e0a\u3052\u3066\u304f\u3060\u3055\u3044\u3002\n\u6b63\u78ba\u306a\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u6c42\u3081\u3089\u308c\u305f\u3089\u3001e2fsck \u30b3\u30de\u30f3\u30c9\u3067\u3001\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304b\u3089resize2fs \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\n$ sudo e2fsck -f /dev/lvg-share/public\ne2fsck 1.42.9 (4-Feb-2014)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/dev/lvg-share/public: 11/1310720 files (0.0% non-contiguous), 126289/5242880 blocks\n\n$ sudo resize2fs /dev/lvg-share/public 4718592\nresize2fs 1.42.9 (4-Feb-2014)\nResizing the filesystem on /dev/lvg-share/public to 4718592 (4k) blocks.\nThe filesystem on /dev/lvg-share/public is now 4718592 blocks long.\n\n\u30b3\u30de\u30f3\u30c9\u304c\u6210\u529f\u3057\u305f\u3089\u3001\u518d\u5ea6e2fsck \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n$ sudo e2fsck -f /dev/lvg-share/public\ne2fsck 1.42.9 (4-Feb-2014)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/dev/lvg-share/public: 11/1179648 files (0.0% non-contiguous), 118065/4718592 blocks\n\n\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u306b\u3088\u3063\u3066\u3001\u30d6\u30ed\u30c3\u30af\u6570\u304c\u5909\u66f4\u3055\u308c\u305f\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\u6b21\u306b\u3001lvreduce \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30b5\u30a4\u30ba\u3092\u7e2e\u5c0f\u3057\u307e\u3059\u3002\n$ sudo lvreduce -L18G /dev/lvg-share/public\n  WARNING: Reducing active logical volume to 18.00 GiB\n  THIS MAY DESTROY YOUR DATA (filesystem etc.)\nDo you really want to reduce public? [y/n]: y\n  Reducing logical volume public to 18.00 GiB\n  Logical volume public successfully resized\n\n\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u6642\u306bDo you really want to reduce public? [y/n]: \u3068\u3044\u3046\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u3001\u305d\u3053\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u901a\u308a\u3001\u30c7\u30fc\u30bf\u304c\u5931\u308f\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u70b9\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u7e2e\u5c0f\u3057\u305f\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3057\u3066\u307f\u307e\u3059\u3002\n$ sudo mount /dev/lvg-share/public /mnt/public\n\n\u30de\u30a6\u30f3\u30c8\u3057\u305f\u3089\u3001df -h \u30b3\u30de\u30f3\u30c9\u3067\u8ad6\u7406\u30c9\u30e9\u30a4\u30d6\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n$ df -h\nFilesystem                       Size  Used Avail Use% Mounted on\n/dev/sda1                         75G  1.2G   70G   2% /\nnone                             4.0K     0  4.0K   0% /sys/fs/cgroup\nudev                             2.0G  4.0K  2.0G   1% /dev\ntmpfs                            394M  3.1M  391M   1% /run\nnone                             5.0M     0  5.0M   0% /run/lock\nnone                             2.0G     0  2.0G   0% /run/shm\nnone                             100M     0  100M   0% /run/user\n/dev/mapper/lvg--share-media     8.0G   33M  8.0G   1% /mnt/media\n/dev/mapper/lvg--share-document  7.0G   33M  7.0G   1% /mnt/document\n/dev/mapper/lvg--share-public     18G   44M   17G   1% /mnt/public\"\n\n\u78ba\u8a8d\u3059\u308b\u3068\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u304c\u7e2e\u5c0f\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8907\u88fd\u3059\u308b\nLVM \u3068\u3057\u3066\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u65e2\u5b58\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4ed6\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u8907\u88fd\u3057\u3001\u305d\u3061\u3089\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u65e2\u5b58\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u3068\u4ea4\u63db\u3059\u308b\u624b\u9806\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u4eca\u56de\u306f/dev/sdb1 \u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092/dev/sdf1 \u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u8907\u88fd\u3057\u3001\u8001\u673d\u5316\u3057\u305f\u30c7\u30a3\u30b9\u30af\u3092\u53d6\u308a\u66ff\u3048\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u305f\u624b\u9806\u3092\u5b9f\u65bd\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001\u30b2\u30b9\u30c8OS \u306b\u65b0\u305f\u306b\u672a\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u72b6\u614b\u306e/dev/sdf \u7269\u7406\u30c7\u30d0\u30a4\u30b9\u3092\u8ffd\u52a0\u3057\u3066\u304a\u304d\u307e\u3057\u305f\u3002\n\u4eca\u56de\u4f7f\u7528\u3057\u3066\u3044\u308bVMWare Work Station \u306b\u3066\u7269\u7406\u30c7\u30d0\u30a4\u30b9\u3092\u8ffd\u52a0\u3059\u308b\u624b\u9806\u306b\u3064\u3044\u3066\u306f\u5272\u611b\u3057\u307e\u3059\u3002\n$ sudo ls /dev/sdf\n/dev/sdf\n\n/dev/sdb \u7269\u7406\u30c7\u30d0\u30a4\u30b9\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092/dev/sdf \u7269\u7406\u30c7\u30d0\u30a4\u30b9\u306b\u8907\u88fd\u3057\u307e\u3059\u3002\n$ sudo sfdisk -d /dev/sdb | sudo sfdisk /dev/sdf --force\n\n\u30b3\u30de\u30f3\u30c9\u304c\u6b63\u5e38\u7d42\u4e86\u3057\u305f\u3089\u3001fdisk \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ sudo fdisk -l /dev/sdf\n\nDisk /dev/sdf: 42.9 GB, 42949672960 bytes\n255 heads, 63 sectors/track, 5221 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000000\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sdf1            2048    20973567    10485760   8e  Linux LVM\n\n\n/dev/sdf1 \u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306bLVM \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ sudo pvcreate /dev/sdf1\n  Physical volume \"/dev/sdf1\" successfully created\n\n/dev/sdf1 \u3092vgextend \u30b3\u30de\u30f3\u30c9\u3067lvg-share\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n$ sudo vgextend lvg-share /dev/sdf1\n  Volume group \"lvg-share\" successfully extended\n\nvgdisplay \u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ sudo vgdisplay\n  --- Volume group ---\n  VG Name               lvg-share\n  System ID             \n  Format                lvm2\n  Metadata Areas        5\n  Metadata Sequence No  8\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                0\n  Cur LV                3\n  Open LV               3\n  Max PV                0\n  Cur PV                5\n  Act PV                5\n  VG Size               49.98 GiB\n  PE Size               4.00 MiB\n  Total PE              12795\n  Alloc PE / Size       8448 / 33.00 GiB\n  Free  PE / Size       4347 / 16.98 GiB\n  VG UUID               rnFwhI-ybWH-el9e-NIgK-3vOY-hO8L-sehg7c\n\n/dev/sdb1 \u306e\u30c7\u30fc\u30bf\u3092/dev/sdf1 \u306b\u30b3\u30d4\u30fc\u3059\u308b\u306b\u3042\u305f\u3063\u3066\u3001\u4e8b\u524d\u306b/dev/sdb1(/dev/lvg-share/public) \u3092\u30a2\u30f3\u30de\u30a6\u30f3\u30c8\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n$ sudo umount /dev/lvg-share/public\n\npvmove \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u5185\u5bb9\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n$ sudo pvmove /dev/sdb1 /dev/sdf1\n  /dev/sdb1: Moved: 0.2%\n.......\n  /dev/sdb1: Moved: 100.0%\n\n\u30b3\u30d4\u30fc\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001/dev/sdb1 \u30dc\u30ea\u30e5\u30fc\u30e0\u3092lvg-share \u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u304b\u3089\u5916\u3057\u307e\u3059\u3002\n$ sudo vgreduce lvg-share /dev/sdb1\n  Removed \"/dev/sdb1\" from volume group \"lvg-share\"\n\n  --- Volume group ---\n  VG Name               lvg-share\n  System ID             \n  Format                lvm2\n  Metadata Areas        4\n  Metadata Sequence No  12\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                0\n  Cur LV                3\n  Open LV               3\n  Max PV                0\n  Cur PV                4\n  Act PV                4\n  VG Size               39.98 GiB\n  PE Size               4.00 MiB\n  Total PE              10236\n  Alloc PE / Size       8448 / 33.00 GiB\n  Free  PE / Size       1788 / 6.98 GiB\n  VG UUID               rnFwhI-ybWH-el9e-NIgK-3vOY-hO8L-sehg7c\n\npvremove \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066/dev/sdb1 \u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\u3053\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001/dev/sdb1 \u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u8868\u793a\u3055\u308c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n$ sudo pvremove /dev/sdb1\n  Labels on physical volume \"/dev/sdb1\" successfully wiped\n\n$ sudo pvdisplay\n  --- Physical volume ---\n  PV Name               /dev/sdc1\n  VG Name               lvg-share\n  PV Size               10.00 GiB / not usable 4.00 MiB\n  Allocatable           yes \n  PE Size               4.00 MiB\n  Total PE              2559\n  Free PE               510\n  Allocated PE          2049\n  PV UUID               fxLbYc-4nOT-YKEB-Zzeh-L4pt-QiLa-eSEwdK\n\n  --- Physical volume ---\n  PV Name               /dev/sdd1\n  VG Name               lvg-share\n  PV Size               10.00 GiB / not usable 4.00 MiB\n  Allocatable           yes \n  PE Size               4.00 MiB\n  Total PE              2559\n  Free PE               511\n  Allocated PE          2048\n  PV UUID               SkmklQ-s3Si-lC2b-hQNa-nOIt-uXnb-1uGs5W\n\n  --- Physical volume ---\n  PV Name               /dev/sde1\n  VG Name               lvg-share\n  PV Size               10.00 GiB / not usable 4.00 MiB\n  Allocatable           yes \n  PE Size               4.00 MiB\n  Total PE              2559\n  Free PE               767\n  Allocated PE          1792\n  PV UUID               5TkFOl-wXHc-u6vg-ryfY-WefK-4ftc-UkwPLg\n\n  --- Physical volume ---\n  PV Name               /dev/sdf1\n  VG Name               lvg-share\n  PV Size               10.00 GiB / not usable 4.00 MiB\n  Allocatable           yes (but full)\n  PE Size               4.00 MiB\n  Total PE              2559\n  Free PE               0\n  Allocated PE          2559\n  PV UUID               FezkAV-f4O5-7G2c-Y6sT-tV3m-1gcH-hveQOR\n\n\u3053\u308c\u3067/dev/sdb \u7269\u7406\u30c7\u30d0\u30a4\u30b9\u3092\u53d6\u308a\u5916\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n= \u6b21\u306e\u8a18\u4e8b =\nLVM\u3067RAID1\u306e\u69cb\u7bc9\u3001\u969c\u5bb3\u5bfe\u5fdc\u3001\u4ed6RAID\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u8ffd\u52a0\n# \u524d\u306e\u8a18\u4e8b\n[LVM \u6982\u8981](http://qiita.com/TsutomuNakamura/items/e5ebd4565bcdd8fe6c94 \"LVM \u6982\u8981\")\n\n# \u69cb\u6210\u6982\u8981 \n![LVM_CreateLVMNormal0000.png](https://qiita-image-store.s3.amazonaws.com/0/70152/5ccc2a34-eabf-3594-28d6-4dc952e16121.png)\n\n\u8907\u6570\u306e\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u304c\u3042\u308a\u3001\u305d\u306e\u4e0a\u306b\u8907\u6570\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u305d\u306e\u4e0a\u306b\u8907\u6570\u306e\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u8907\u6570\u306e\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001\u305d\u306e\u4e0a\u306b\u4f5c\u6210\u3055\u308c\u308b\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u30011 \u3064\u306e\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3088\u308a\u3082\u5927\u304d\u3044\u9818\u57df\u3092\u5272\u308a\u5f53\u3066\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059(\u305f\u3060\u3057\u3001\u305d\u306e\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u7dcf\u6570\u306e\u5bb9\u91cf\u3092\u8d8a\u3048\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093)\u3002\n\n\u4e0a\u8a18\u306e\u56f3\u3067\u306f\u3001\u672a\u4f7f\u7528\u9818\u57df\u304c\u5b58\u5728\u3057\u307e\u3059\u304c\u3001\u305d\u306e\u672a\u4f7f\u7528\u9818\u57df\u306f\u5f8c\u307b\u3069\u5bb9\u91cf\u304c\u8ffd\u52a0\u3067\u5fc5\u8981\u306b\u306a\u3063\u305f\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u5272\u308a\u5f53\u3066\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u4eca\u56de\u306e\u4f8b\u3067\u306f`lvg-share` \u3068\u3044\u3046\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\u3001\u305d\u306e\u4e0a\u306b`/dev/lvg-share/files`, `/dev/lvg-share/media`, `/dev/lvg-share/work` \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u307e\u305f\u5f8c\u307b\u3069\u3001\u5404\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u534a\u5206\u306e\u9818\u57df\u3092\u4f7f\u7528\u3057\u3066\u3044\u304d\u3001RAID1 \u69cb\u6210\u306b\u5207\u308a\u66ff\u3048\u308b\u624b\u6cd5\u306b\u3064\u3044\u3066\u3082\u8aac\u660e\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\n* \u691c\u8a3c\u3057\u305f\u74b0\u5883\n<table><tbody>\n  <tr>\n    <th> OS</th>\n    <td> Fedora 21</td>\n  </tr>\n  <tr>\n    <th> \u69cb\u6210</th>\n    <td> /dev/sdb \u306broot \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u304c\u5165\u3063\u3066\u3044\u308bOS \u306b\u3001/deb/sdb \u301c /dev/sdf \u306e\u7269\u7406\u7684\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u8ffd\u52a0\u3002\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u306bVMWare \u3092\u4f7f\u7528\u3002</td>\n  </tr>\n</tbody></table>\n\n# \u73fe\u5728\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u78ba\u8a8d \n`fdisk -l` \u30b3\u30de\u30f3\u30c9\u3067\u3001\u73fe\u5728\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n`/dev/sdb` \u301c `/dev/sde` \u30c7\u30d0\u30a4\u30b9\u306f\u307e\u3060\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\n```text:fdisk\u30b3\u30de\u30f3\u30c9\u306b\u3088\u308b\u8a2d\u5b9a\u4f8b\n$ sudo fdisk -l\n\nDisk /dev/sdb: 42.9 GB, 42949672960 bytes\n255 heads, 63 sectors/track, 5221 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000000\n\nDisk /dev/sdb doesn't contain a valid partition table\n\nDisk /dev/sda: 85.9 GB, 85899345920 bytes\n255 heads, 63 sectors/track, 10443 cylinders, total 167772160 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x0002e29c\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sda1   *        2048   159385599    79691776   83  Linux\n/dev/sda2       159387646   167770111     4191233    5  Extended\n/dev/sda5       159387648   167770111     4191232   82  Linux swap / Solaris\n\nDisk /dev/sdd: 42.9 GB, 42949672960 bytes\n255 heads, 63 sectors/track, 5221 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000000\n\nDisk /dev/sdd doesn't contain a valid partition table\n\nDisk /dev/sde: 42.9 GB, 42949672960 bytes\n255 heads, 63 sectors/track, 5221 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000000\n\nDisk /dev/sde doesn't contain a valid partition table\n\nDisk /dev/sdc: 42.9 GB, 42949672960 bytes\n255 heads, 63 sectors/track, 5221 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000000\n\nDisk /dev/sdc doesn't contain a valid partition table\n```\n\n\n\u3053\u308c\u304b\u3089\u3001`/dev/sdb` \u301c `/dev/sde` \u306b\u5bfe\u3057\u3066`/dev/sdb1` \u301c `/dev/sde1` \u3068\u3044\u3046\u5f62\u3067\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u305d\u308c\u305e\u308c\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u30b5\u30a4\u30ba\u306f10 GB \u3068\u3068\u3057\u307e\u3059\u3002\n\n\u307e\u305a\u306f\u3001fdisk \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066`/dev/sdb` \u30c7\u30d0\u30a4\u30b9\u306bLVM \u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n```text\n$ sudo fdisk /dev/sdb\nDevice contains neither a valid DOS partition table, nor Sun, SGI or OSF disklabel\nBuilding a new DOS disklabel with disk identifier 0x995af6e7.\nChanges will remain in memory only, until you decide to write them.\nAfter that, of course, the previous content won't be recoverable.\n\nWarning: invalid flag 0x0000 of partition table 4 will be corrected by w(rite)\n\nCommand (m for help): m\nCommand action\n   a   toggle a bootable flag\n   b   edit bsd disklabel\n   c   toggle the dos compatibility flag\n   d   delete a partition\n   l   list known partition types\n   m   print this menu\n   n   add a new partition\n   o   create a new empty DOS partition table\n   p   print the partition table\n   q   quit without saving changes\n   s   create a new empty Sun disklabel\n   t   change a partition's system id\n   u   change display/entry units\n   v   verify the partition table\n   w   write table to disk and exit\n   x   extra functionality (experts only)\n\nCommand (m for help): n\nPartition type:\n   p   primary (0 primary, 0 extended, 4 free)\n   e   extended\nSelect (default p): \nUsing default response p\nPartition number (1-4, default 1): \nUsing default value 1\nFirst sector (2048-83886079, default 2048): \nUsing default value 2048\nLast sector, +sectors or +size{K,M,G} (2048-83886079, default 83886079): +10G\n\nCommand (m for help): t\nSelected partition 1\nHex code (type L to list codes): L\n\n 0  Empty           24  NEC DOS         81  Minix / old Lin bf  Solaris        \n 1  FAT12           27  Hidden NTFS Win 82  Linux swap / So c1  DRDOS/sec (FAT-\n 2  XENIX root      39  Plan 9          83  Linux           c4  DRDOS/sec (FAT-\n 3  XENIX usr       3c  PartitionMagic  84  OS/2 hidden C:  c6  DRDOS/sec (FAT-\n 4  FAT16 <32M      40  Venix 80286     85  Linux extended  c7  Syrinx         \n 5  Extended        41  PPC PReP Boot   86  NTFS volume set da  Non-FS data    \n 6  FAT16           42  SFS             87  NTFS volume set db  CP/M / CTOS / .\n 7  HPFS/NTFS/exFAT 4d  QNX4.x          88  Linux plaintext de  Dell Utility   \n 8  AIX             4e  QNX4.x 2nd part 8e  Linux LVM       df  BootIt         \n 9  AIX bootable    4f  QNX4.x 3rd part 93  Amoeba          e1  DOS access     \n a  OS/2 Boot Manag 50  OnTrack DM      94  Amoeba BBT      e3  DOS R/O        \n b  W95 FAT32       51  OnTrack DM6 Aux 9f  BSD/OS          e4  SpeedStor      \n c  W95 FAT32 (LBA) 52  CP/M            a0  IBM Thinkpad hi eb  BeOS fs        \n e  W95 FAT16 (LBA) 53  OnTrack DM6 Aux a5  FreeBSD         ee  GPT            \n f  W95 Ext'd (LBA) 54  OnTrackDM6      a6  OpenBSD         ef  EFI (FAT-12/16/\n10  OPUS            55  EZ-Drive        a7  NeXTSTEP        f0  Linux/PA-RISC b\n11  Hidden FAT12    56  Golden Bow      a8  Darwin UFS      f1  SpeedStor      \n12  Compaq diagnost 5c  Priam Edisk     a9  NetBSD          f4  SpeedStor      \n14  Hidden FAT16 <3 61  SpeedStor       ab  Darwin boot     f2  DOS secondary  \n16  Hidden FAT16    63  GNU HURD or Sys af  HFS / HFS+      fb  VMware VMFS    \n17  Hidden HPFS/NTF 64  Novell Netware  b7  BSDI fs         fc  VMware VMKCORE \n18  AST SmartSleep  65  Novell Netware  b8  BSDI swap       fd  Linux raid auto\n1b  Hidden W95 FAT3 70  DiskSecure Mult bb  Boot Wizard hid fe  LANstep        \n1c  Hidden W95 FAT3 75  PC/IX           be  Solaris boot    ff  BBT            \n1e  Hidden W95 FAT1 80  Old Minix      \nHex code (type L to list codes): 8e\nChanged system type of partition 1 to 8e (Linux LVM)\n\nCommand (m for help): w\nThe partition table has been altered!\n\nCalling ioctl() to re-read partition table.\nSyncing disks.\n```\n\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4f5c\u6210\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```text\n$ sudo fdisk -l /dev/sdb\n\nDisk /dev/sdb: 42.9 GB, 42949672960 bytes\n139 heads, 49 sectors/track, 12316 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x995af6e7\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sdb1            2048    20973567    10485760   8e  Linux LVM\n```\n\n\n`/dev/sdb` \u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4f5c\u6210\u3067\u304d\u305f\u3089\u3001`/dev/sdc` \u301c `/dev/sde` \u306b\u3082\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n\n```text\n$ for I in {c,d,e}; do sudo sfdisk -d /dev/sdb | sudo sfdisk /dev/sd${I} --force; done\n```\n\n\n\u305d\u308c\u305e\u308c\u306e\u30c7\u30d0\u30a4\u30b9\u3067\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001`fdisk -l` \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u5148\u307b\u3069\u306e\u51fa\u529b\u3068\u6bd4\u8f03\u3057\u3001\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```text\n$ sudo fdisk -l\n\nDisk /dev/sdb: 42.9 GB, 42949672960 bytes\n139 heads, 49 sectors/track, 12316 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x995af6e7\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sdb1            2048    20973567    10485760   8e  Linux LVM\n\nDisk /dev/sda: 85.9 GB, 85899345920 bytes\n255 heads, 63 sectors/track, 10443 cylinders, total 167772160 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x0002e29c\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sda1   *        2048   159385599    79691776   83  Linux\n/dev/sda2       159387646   167770111     4191233    5  Extended\n/dev/sda5       159387648   167770111     4191232   82  Linux swap / Solaris\n\nDisk /dev/sdd: 42.9 GB, 42949672960 bytes\n255 heads, 63 sectors/track, 5221 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000000\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sdd1            2048    20973567    10485760   8e  Linux LVM\n\nDisk /dev/sde: 42.9 GB, 42949672960 bytes\n255 heads, 63 sectors/track, 5221 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000000\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sde1            2048    20973567    10485760   8e  Linux LVM\n\nDisk /dev/sdc: 42.9 GB, 42949672960 bytes\n255 heads, 63 sectors/track, 5221 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000000\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sdc1            2048    20973567    10485760   8e  Linux LVM\n```\n\n\n# \u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u4f5c\u6210 \nLVM \u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```text\n$ sudo pvcreate /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sde1\n  Physical volume \"/dev/sdb1\" successfully created\n  Physical volume \"/dev/sdc1\" successfully created\n  Physical volume \"/dev/sdd1\" successfully created\n  Physical volume \"/dev/sde1\" successfully created\n```\n\n\n`pvdisplay` \u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```text\n$ sudo pvdisplay\n  \"/dev/sdb1\" is a new physical volume of \"10.00 GiB\"\n  --- NEW Physical volume ---\n  PV Name               /dev/sdb1\n  VG Name               \n  PV Size               10.00 GiB\n  Allocatable           NO\n  PE Size               0   \n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               dCvzjO-R0Tv-voXT-Me8v-q0ss-A5lI-ojbJTQ\n   \n  \"/dev/sdc1\" is a new physical volume of \"10.00 GiB\"\n  --- NEW Physical volume ---\n  PV Name               /dev/sdc1\n  VG Name               \n  PV Size               10.00 GiB\n  Allocatable           NO\n  PE Size               0   \n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               fxLbYc-4nOT-YKEB-Zzeh-L4pt-QiLa-eSEwdK\n   \n  \"/dev/sdd1\" is a new physical volume of \"10.00 GiB\"\n  --- NEW Physical volume ---\n  PV Name               /dev/sdd1\n  VG Name               \n  PV Size               10.00 GiB\n  Allocatable           NO\n  PE Size               0   \n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               SkmklQ-s3Si-lC2b-hQNa-nOIt-uXnb-1uGs5W\n   \n  \"/dev/sde1\" is a new physical volume of \"10.00 GiB\"\n  --- NEW Physical volume ---\n  PV Name               /dev/sde1\n  VG Name               \n  PV Size               10.00 GiB\n  Allocatable           NO\n  PE Size               0   \n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               5TkFOl-wXHc-u6vg-ryfY-WefK-4ftc-UkwPLg\n```\n\n\n# \u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3059\u308b \n`vgcreate` \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066`lvg-share` \u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n```text\n$ sudo vgcreate lvg-share /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sde1\n  Volume group \"lvg-share\" successfully created\n```\n\n\n`vgdisplay`, `vgscan` \u30b3\u30de\u30f3\u30c9\u3067\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```text\n$ sudo vgdisplay\n  --- Volume group ---\n  VG Name               lvg-share\n  System ID             \n  Format                lvm2\n  Metadata Areas        4\n  Metadata Sequence No  1\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                0\n  Cur LV                0\n  Open LV               0\n  Max PV                0\n  Cur PV                4\n  Act PV                4\n  VG Size               39.98 GiB\n  PE Size               4.00 MiB\n  Total PE              10236\n  Alloc PE / Size       0 / 0   \n  Free  PE / Size       10236 / 39.98 GiB\n  VG UUID               rnFwhI-ybWH-el9e-NIgK-3vOY-hO8L-sehg7c\n\n$ sudo vgscan\n  Reading all physical volumes.  This may take a while...\n  Found volume group \"lvg-share\" using metadata type lvm2\n```\n\n\n## \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u3092\u30ea\u30cd\u30fc\u30e0\u3059\u308b (vgrename) \n\u3082\u3057\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u540d\u3092\u5909\u66f4\u3057\u305f\u3044\u5834\u5408\u306f\u3001`vgrename` \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u30dc\u30ea\u30e5\u30fc\u30e0\u540d\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```text\n$ sudo vgrename <\u5909\u66f4\u524d\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u540d> <\u5909\u66f4\u5f8c\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u540d>\n```\n\n\n## \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u3092\u524a\u9664\u3059\u308b (vgremove) \n\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u3092\u524a\u9664\u3059\u308b\u5834\u5408\u306f\u3001`vgremove` \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```text\n$ sudo vgremove <\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u540d>\n```\n\n\n# \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f5c\u6210\u3059\u308b \n\u4eca\u56de\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u898b\u7a4d\u3082\u308a\u3067\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u69cb\u6210\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\n\n\n* \u5272\u308a\u5f53\u3066\n<table><tbody>\n  </tr>\n  <tr>\n    <th> \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u540d </th><th> \u5bb9\u91cf</th>\n  </tr>\n  <tr>\n    <td> public </td><td> 18GB</td>\n  </tr>\n  <tr>\n    <td> media </td><td> 8GB</td>\n  </tr>\n  <tr>\n    <td> document </td><td> 6GB</td>\n  </tr>\n</tbody></table>\n\n`lvcreate` \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3001\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n```text\n$ sudo lvcreate --name public --size 18GB lvg-share\n  Logical volume \"public\" created\n$ sudo lvcreate --name media --size 8GB lvg-share\n  Logical volume \"media\" created\n$ sudo lvcreate --name document --size 6GB lvg-share\n  Logical volume \"document\" created\n```\n\n\n`lvdisplay` \u3067\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n```text\n$ sudo lvdisplay\n  --- Logical volume ---\n  LV Path                /dev/lvg-share/public\n  LV Name                public\n  VG Name                lvg-share\n  LV UUID                IVnPIB-hJCA-PD7o-jcpe-Et9I-zVZb-eQbcTu\n  LV Write Access        read/write\n  LV Creation host, time lvm-test-on-pdv, 2015-03-08 17:37:40 +0900\n  LV Status              available\n  # open                 0\n  LV Size                18.00 GiB\n  Current LE             4608\n  Segments               2\n  Allocation             inherit\n  Read ahead sectors     auto\n  - currently set to     256\n  Block device           252:0\n   \n  --- Logical volume ---\n  LV Path                /dev/lvg-share/media\n  LV Name                media\n  VG Name                lvg-share\n  LV UUID                t9tpLc-0ddp-CnmH-BVoA-HEFr-Q1dq-M4x1Bj\n  LV Write Access        read/write\n  LV Creation host, time lvm-test-on-pdv, 2015-03-08 17:37:51 +0900\n  LV Status              available\n  # open                 0\n  LV Size                8.00 GiB\n  Current LE             2048\n  Segments               1\n  Allocation             inherit\n  Read ahead sectors     auto\n  - currently set to     256\n  Block device           252:1\n   \n  --- Logical volume ---\n  LV Path                /dev/lvg-share/document\n  LV Name                document\n  VG Name                lvg-share\n  LV UUID                ERAqAq-vzZF-AQev-tTS0-gAJo-BnPq-MjUrf2\n  LV Write Access        read/write\n  LV Creation host, time lvm-test-on-pdv, 2015-03-08 17:37:57 +0900\n  LV Status              available\n  # open                 0\n  LV Size                6.00 GiB\n  Current LE             1536\n  Segments               1\n  Allocation             inherit\n  Read ahead sectors     auto\n  - currently set to     256\n  Block device           252:2\n\n$ sudo lvscan\n  ACTIVE            '/dev/lvg-share/public' [18.00 GiB] inherit\n  ACTIVE            '/dev/lvg-share/media' [8.00 GiB] inherit\n  ACTIVE            '/dev/lvg-share/document' [6.00 GiB] inherit\n```\n\n\n## \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u540d\u306e\u540d\u524d\u3092\u5909\u66f4\u3059\u308b(lvrename) \n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u540d\u3092\u5909\u66f4\u3059\u308b\u5834\u5408\u306f\u3001`lvrename` \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```text\n$ sudo lvrename <\u5909\u66f4\u524d\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u540d> <\u5909\u66f4\u5f8c\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u540d>\n```\n\n\n## \u88dc\u8db3\uff1a\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u524a\u9664\u3059\u308b(lvremove) \n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u524a\u9664\u3059\u308b\u5834\u5408\u306f\u3001`lvremove` \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```text\n$ sudo lvremove <\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30d1\u30b9>\n```\n\n\n## \u88dc\u8db3\uff1a\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u62e1\u5f35\u3059\u308b \n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u5bb9\u91cf\u3092\u62e1\u5f35\u3059\u308b\u5834\u5408\u306f\u3001`lvextend` \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```text\n$ sudo lvextend -L<\u30b5\u30a4\u30ba> <\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30d1\u30b9>\n```\n\n\n\n```text:\u4f8b(+1GBdocument\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u5bb9\u91cf\u3092\u62e1\u5f35\u3059\u308b)\n$ sudo lvextend -L+1G /dev/lvg-share/hoge\n```\n\n\n## \u88dc\u8db3\uff1a\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u7e2e\u5c0f\u3059\u308b \n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u5bb9\u91cf\u3092\u7e2e\u5c0f\u3059\u308b\u5834\u5408\u306f\u3001`lvreduce` \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```text\n$ sudo lvreduce -L<\u30b5\u30a4\u30ba> <\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30d1\u30b9>\n```\n\n\n\n```text:\u4f8b(document\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u5bb9\u91cf\u30926GB\u306b\u7e2e\u5c0f\u3059\u308b)\n$ sudo lvreduce -L6 /dev/sdz\n```\n\n\u203b\u76f8\u5bfe\u6307\u5b9a\u3067`-L-1G` \u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u306f\u3001`+1GB` \u6e1b\u3089\u3059\u610f\u5473\u306b\u306a\u308b\u306e\u3067\u3001\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n# \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3059\u308b \n\u3053\u3053\u307e\u3067\u306e\u624b\u9806\u3067\u4f5c\u6210\u3055\u308c\u305f\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u307e\u305a\u3001`/dev/lvg-share/public` \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306b`ext4` \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u4eca\u56de\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u6b21\u306e\u3088\u3046\u306b\u5272\u308a\u5f53\u3066\u3066\u3044\u304d\u307e\u3059\u3002\n\n* \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u69cb\u6210\n<table><tbody>\n  </tr>\n  <tr>\n    <th> \u8ad6\u7406\u30c7\u30d0\u30a4\u30b9 </th><th> \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0</th>\n  </tr>\n  <tr>\n    <td> /dev/lvg-share/public </td><td> ext4</td>\n  </tr>\n  <tr>\n    <td> /dev/lvg-share/media </td><td> XFS</td>\n  </tr>\n  <tr>\n    <td> /dev/lvg-share/document </td><td> ReiserFS</td>\n  </tr>\n</tbody></table>\n\n\n```text:public\u8ad6\u7406\u30c7\u30d0\u30a4\u30b9\u306bext4\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3059\u308b\n$ sudo mkfs.ext4 /dev/lvg-share/public\nmke2fs 1.42.9 (4-Feb-2014)\nFilesystem label=\nOS type: Linux\nBlock size#4096 (log2)\nFragment size#4096 (log2)\nStride#0 blocks, Stripe width0 blocks\n1179648 inodes, 4718592 blocks\n235929 blocks (5.00%) reserved for the super user\nFirst data block=0\nMaximum filesystem blocks=4294967296\n144 block groups\n32768 blocks per group, 32768 fragments per group\n8192 inodes per group\nSuperblock backups stored on blocks: \n\t32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, \n\t4096000\n\nAllocating group tables: done                            \nWriting inode tables: done                            \nCreating journal (32768 blocks): done\nWriting superblocks and filesystem accounting information: done\n```\n\n\n\n```text:media\u8ad6\u7406\u30c7\u30d0\u30a4\u30b9\u306bXFS\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3059\u308b\n$ sudo mkfs.xfs /dev/lvg-share/media\nmeta-data#/dev/lvg-share/media   isize=256    agcount=4, agsize524288 blks\n         #                       sectsz=512   attr=2, projid32bit0\ndata     #                       bsize=4096   blocks=2097152, imaxpct25\n         #                       sunit=0      swidth0 blks\nnaming   #version 2              bsize=4096   ascii-ci0\nlog      #internal log           bsize=4096   blocks=2560, version2\n         #                       sectsz=512   sunit=0 blks, lazy-count1\nrealtime #none                   extsz=4096   blocks=0, rtextents0\n```\n\n\n\n```text:document\u8ad6\u7406\u30c7\u30d0\u30a4\u30b9\u306bReiserFS\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3059\u308b\n$ sudo mkfs.reiserfs /dev/lvg-share/document\nmkfs.reiserfs 3.6.24\n\nGuessing about desired format.. Kernel 3.16.0-30-generic is running.\nFormat 3.6 with standard journal\nCount of blocks on the device: 1835008\nNumber of blocks consumed by mkreiserfs formatting process: 8267\nBlocksize: 4096\nHash function used to sort names: \"r5\"\nJournal Size 8193 blocks (first block 18)\nJournal Max transaction length 1024\ninode generation number: 0\nUUID: e56e8e90-46b1-4900-a447-33939e4a098f\nATTENTION: YOU SHOULD REBOOT AFTER FDISK!\n\tALL DATA WILL BE LOST ON '/dev/lvg-share/document'!\nContinue (y/n):y\nInitializing journal - 0%....20%....40%....60%....80%....100%\nSyncing..ok\nReiserFS is successfully created on /dev/lvg-share/document.\n```\n\n\n# \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3057\u3066\u307f\u308b \n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3057\u3001`df -h` \u30b3\u30de\u30f3\u30c9\u3067\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```text\n$ sudo mkdir /mnt/{public,media,document}\n$ sudo mount /dev/lvg-share/public   /mnt/public\n$ sudo mount /dev/lvg-share/media    /mnt/media\n$ sudo mount /dev/lvg-share/document /mnt/document\n$ df -h\nFilesystem                       Size  Used Avail Use% Mounted on\n/dev/sda1                         75G  1.2G   70G   2% /\nnone                             4.0K     0  4.0K   0% /sys/fs/cgroup\nudev                             2.0G  4.0K  2.0G   1% /dev\ntmpfs                            394M  3.1M  391M   1% /run\nnone                             5.0M     0  5.0M   0% /run/lock\nnone                             2.0G     0  2.0G   0% /run/shm\nnone                             100M     0  100M   0% /run/user\n/dev/mapper/lvg--share-public     18G   44M   17G   1% /mnt/public\n/dev/mapper/lvg--share-media     8.0G   33M  8.0G   1% /mnt/media\n/dev/mapper/lvg--share-document  7.0G   33M  7.0G   1% /mnt/document\n```\n\n\n\u65b0\u3057\u304f\u4f5c\u6210\u3057\u305f\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u304c\u30de\u30a6\u30f3\u30c8\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u51fa\u6765\u307e\u3057\u305f\u3002\n\u3053\u306e\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3057\u305f\u9818\u57df\u306f\u3001\u901a\u5e38\u901a\u308a\u30d5\u30a1\u30a4\u30eb\u3092\u4fdd\u5b58\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u307e\u305f\u3001\u901a\u5e38\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u3068\u540c\u69d8\u306bfstab \u306b\u8a18\u8ff0\u3057\u3066OS \u8d77\u52d5\u6642\u306b\u3001\u81ea\u52d5\u7684\u306b\u30de\u30a6\u30f3\u30c8\u3055\u305b\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```text\n$ sudo blkid | grep /dev/mapper\n/dev/mapper/lvg--share-public: UUID#\"e184b6b8-ed2f-470b-a08b-f45637623ad4\" TYPE\"ext4\" \n/dev/mapper/lvg--share-media: UUID#\"ace4c3d3-12e3-43bb-8dfc-8fd0f9b73684\" TYPE\"xfs\" \n/dev/mapper/lvg--share-document: UUID#\"e56e8e90-46b1-4900-a447-33939e4a098f\" TYPE\"reiserfs\"\n\n$ sudo cp -ip /etc/fstab /etc/fstab.org\n$ sudo vim /etc/fstab\n```\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```text:/etc/fstab\nUUID=\"e184b6b8-ed2f-470b-a08b-f45637623ad4\" /mnt/public   ext4     defaults 0 0\nUUID=\"ace4c3d3-12e3-43bb-8dfc-8fd0f9b73684\" /mnt/media    xfs      defaults 0 0\nUUID=\"e56e8e90-46b1-4900-a447-33939e4a098f\" /mnt/document reiserfs defaults 0 0\n```\n\n\nfstab \u306b\u8a18\u8ff0\u3057\u305f\u3089\u3001\u30de\u30a6\u30f3\u30c8\u306e\u30c6\u30b9\u30c8\u3092\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```text\n$ sudo umount /mnt/{public,media,document}\n$ sudo mount -a\n$ echo $?\n0\n```\n\n\n\u30a8\u30e9\u30fc\u306a\u304f\u5b9f\u884c\u3067\u304d\u305f\u3089\u3001OS \u3092\u518d\u8d77\u52d5\u3057\u3066\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```text\n$ sudo shutdown -r now\n# ...\u518d\u8d77\u52d5\u5f8c\n$ df -h\n\u203b\u51fa\u529b\u7d50\u679c\u306b\u3064\u3044\u3066\u306f\u7701\u7565\n```\n\n\n`fstab` \u306b\u8a18\u8ff0\u3057\u305f\u30c7\u30d0\u30a4\u30b9\u304c\u554f\u984c\u306a\u304f\u30de\u30a6\u30f3\u30c8\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n# \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u30b5\u30a4\u30ba\u3092\u5909\u66f4\u3059\u308b \n\u4e00\u5ea6\u4f5c\u6210\u3057\u305f\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u30b5\u30a4\u30ba\u3092\u5909\u66f4\u3059\u308b\u624b\u9806\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u4eca\u56de\u306f`/dev/lvg-share/public` \u30dc\u30ea\u30e5\u30fc\u30e0\u3092`18GB` \u304b\u3089`20GB` \u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n## \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u30b5\u30a4\u30ba\u3092\u62e1\u5f35\u3059\u308b \n\u307e\u305a\u306f\u3001\u30b5\u30a4\u30ba\u5909\u66f4\u5bfe\u8c61\u3068\u306a\u308b\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30a2\u30f3\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\n\n```text\n$ sudo umount /dev/lvg-share/public\n```\n\n\n`lvextend` \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u62e1\u5f35\u3057\u307e\u3059\u3002\n\n```text:lvextend\n$ sudo lvextend -L 20G /dev/lvg-share/public\n  Extending logical volume public to 20.00 GiB\n  Logical volume public successfully resized\n```\n\n\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u62e1\u5f35\u3057\u305f\u3089\u3001\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n\n```text\n$ sudo e2fsck -f /dev/lvg-share/public\ne2fsck 1.42.9 (4-Feb-2014)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/dev/lvg-share/public: 11/1179648 files (0.0% non-contiguous), 118065/4718592 blocks\n```\n\n\n\u3053\u306e\u6642\u70b9\u3067\u306f\u3001\u307e\u3060\u30d6\u30ed\u30c3\u30af\u6570\u306f18GB \u306e\u6642\u306e\u307e\u307e\u306a\u306e\u3067\u3001\u30d6\u30ed\u30c3\u30af\u6570\u3082\u62e1\u5f35\u3057\u307e\u3059\u3002\n\n\n```text\n$ sudo resize2fs /dev/lvg-share/public\nresize2fs 1.42.9 (4-Feb-2014)\nResizing the filesystem on /dev/lvg-share/public to 5242880 (4k) blocks.\nThe filesystem on /dev/lvg-share/public is now 5242880 blocks long.\n```\n\n\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3057\u3066\u30b5\u30a4\u30ba\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n```text\n$ sudo mount /dev/lvg-share/public /mnt/public\n$ df -h\nFilesystem                       Size  Used Avail Use% Mounted on\n/dev/sda1                         75G  1.2G   70G   2% /\nnone                             4.0K     0  4.0K   0% /sys/fs/cgroup\nudev                             2.0G  4.0K  2.0G   1% /dev\ntmpfs                            394M  3.1M  391M   1% /run\nnone                             5.0M     0  5.0M   0% /run/lock\nnone                             2.0G     0  2.0G   0% /run/shm\nnone                             100M     0  100M   0% /run/user\n/dev/mapper/lvg--share-media     8.0G   33M  8.0G   1% /mnt/media\n/dev/mapper/lvg--share-document  7.0G   33M  7.0G   1% /mnt/document\n/dev/mapper/lvg--share-public     20G   44M   19G   1% /mnt/public\n```\n\n\n`Size` \u306e\u5024\u304c20GB \u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n## \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u7e2e\u5c0f\u3059\u308b \n\u6b21\u306f\u4e00\u5ea6\u62e1\u5f35\u3057\u305f\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u30b5\u30a4\u30ba\u3092\u7e2e\u5c0f\u3059\u308b\u624b\u9806\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u307e\u305a\u3001\u7e2e\u5c0f\u3059\u308b\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30a2\u30f3\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\n\n\n```text\n$ sudo umount /dev/lvg-share/public\n```\n\n\n\u6b21\u306b`resize2fs` \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u30b5\u30a4\u30ba\u3092\u7e2e\u5c0f\u3057\u307e\u3059\u304c\u3001\u4e8b\u524d\u306b\u6b63\u78ba\u306a\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u6c42\u3081\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u6b63\u78ba\u306a\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u6c42\u3081\u308b\u306b\u306f\u3001\u307e\u305a`/dev/lvg-share/public` \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e1\u30d6\u30ed\u30c3\u30af\u3042\u305f\u308a\u306e\u30b5\u30a4\u30ba\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```text\n$ sudo blockdev --getbsz /dev/lvg-share/public\n4096\n```\n\n\n\u4e0a\u8a18\u306e\u51fa\u529b\u304b\u3089\u3001`/dev/lvg-share/public` \u306e\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e1 \u30d6\u30ed\u30c3\u30af\u3042\u305f\u308a\u306e\u30b5\u30a4\u30ba\u306f4096byte \u3067\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u6b21\u306b\u3001\u3053\u306e\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u53c2\u8003\u306b18GB(GiB) \u306e\u5bb9\u91cf\u3092\u78ba\u4fdd\u3059\u308b\u306b\u306f\u3001\u3069\u308c\u3060\u3051\u306e\u30d6\u30ed\u30c3\u30af\u6570\u304c\u5fc5\u8981\u304b\u7b97\u51fa\u3057\u307e\u3059\u3002\n\n```text\n$ echo \"(1 * 1024 * 1024 * 1024 * 18) / 4096\" | bc\n4718592\n$ echo \"(1 * 1024 * 1024 * 1024 * 18) % 4096\" | bc\n0\n```\n\n\n\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u306f`4718592` \u3067\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n2 \u3064\u76ee\u306e\u8a08\u7b97\u5f0f\u3067\u3001\u5272\u308a\u5207\u308c\u306a\u3044\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u305f(\u7d50\u679c\u304c0 \u306b\u306a\u3089\u306a\u304b\u3063\u305f)\u5834\u5408\u306f\u3001\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u30921 \u5207\u308a\u4e0a\u3052\u3066\u304f\u3060\u3055\u3044\u3002\n\u6b63\u78ba\u306a\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u6c42\u3081\u3089\u308c\u305f\u3089\u3001`e2fsck` \u30b3\u30de\u30f3\u30c9\u3067\u3001\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304b\u3089`resize2fs` \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```text\n$ sudo e2fsck -f /dev/lvg-share/public\ne2fsck 1.42.9 (4-Feb-2014)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/dev/lvg-share/public: 11/1310720 files (0.0% non-contiguous), 126289/5242880 blocks\n\n$ sudo resize2fs /dev/lvg-share/public 4718592\nresize2fs 1.42.9 (4-Feb-2014)\nResizing the filesystem on /dev/lvg-share/public to 4718592 (4k) blocks.\nThe filesystem on /dev/lvg-share/public is now 4718592 blocks long.\n```\n\n\n\u30b3\u30de\u30f3\u30c9\u304c\u6210\u529f\u3057\u305f\u3089\u3001\u518d\u5ea6`e2fsck` \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n```text\n$ sudo e2fsck -f /dev/lvg-share/public\ne2fsck 1.42.9 (4-Feb-2014)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/dev/lvg-share/public: 11/1179648 files (0.0% non-contiguous), 118065/4718592 blocks\n```\n\n\n\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u306b\u3088\u3063\u3066\u3001\u30d6\u30ed\u30c3\u30af\u6570\u304c\u5909\u66f4\u3055\u308c\u305f\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\u6b21\u306b\u3001`lvreduce` \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30b5\u30a4\u30ba\u3092\u7e2e\u5c0f\u3057\u307e\u3059\u3002\n\n```text\n$ sudo lvreduce -L18G /dev/lvg-share/public\n  WARNING: Reducing active logical volume to 18.00 GiB\n  THIS MAY DESTROY YOUR DATA (filesystem etc.)\nDo you really want to reduce public? [y/n]: y\n  Reducing logical volume public to 18.00 GiB\n  Logical volume public successfully resized\n```\n\n\n\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u6642\u306b`Do you really want to reduce public? [y/n]: ` \u3068\u3044\u3046\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u3001\u305d\u3053\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u901a\u308a\u3001\u30c7\u30fc\u30bf\u304c\u5931\u308f\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u70b9\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u7e2e\u5c0f\u3057\u305f\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3057\u3066\u307f\u307e\u3059\u3002\n\n```text\n$ sudo mount /dev/lvg-share/public /mnt/public\n```\n\n\n\u30de\u30a6\u30f3\u30c8\u3057\u305f\u3089\u3001`df -h` \u30b3\u30de\u30f3\u30c9\u3067\u8ad6\u7406\u30c9\u30e9\u30a4\u30d6\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n```text\n$ df -h\nFilesystem                       Size  Used Avail Use% Mounted on\n/dev/sda1                         75G  1.2G   70G   2% /\nnone                             4.0K     0  4.0K   0% /sys/fs/cgroup\nudev                             2.0G  4.0K  2.0G   1% /dev\ntmpfs                            394M  3.1M  391M   1% /run\nnone                             5.0M     0  5.0M   0% /run/lock\nnone                             2.0G     0  2.0G   0% /run/shm\nnone                             100M     0  100M   0% /run/user\n/dev/mapper/lvg--share-media     8.0G   33M  8.0G   1% /mnt/media\n/dev/mapper/lvg--share-document  7.0G   33M  7.0G   1% /mnt/document\n/dev/mapper/lvg--share-public     18G   44M   17G   1% /mnt/public\"\n```\n\n\n\u78ba\u8a8d\u3059\u308b\u3068\u3001\u30dc\u30ea\u30e5\u30fc\u30e0\u304c\u7e2e\u5c0f\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n# \u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8907\u88fd\u3059\u308b \nLVM \u3068\u3057\u3066\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u65e2\u5b58\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4ed6\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u8907\u88fd\u3057\u3001\u305d\u3061\u3089\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u65e2\u5b58\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u3068\u4ea4\u63db\u3059\u308b\u624b\u9806\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u4eca\u56de\u306f`/dev/sdb1` \u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092`/dev/sdf1` \u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u8907\u88fd\u3057\u3001\u8001\u673d\u5316\u3057\u305f\u30c7\u30a3\u30b9\u30af\u3092\u53d6\u308a\u66ff\u3048\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u305f\u624b\u9806\u3092\u5b9f\u65bd\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001\u30b2\u30b9\u30c8OS \u306b\u65b0\u305f\u306b\u672a\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u72b6\u614b\u306e`/dev/sdf` \u7269\u7406\u30c7\u30d0\u30a4\u30b9\u3092\u8ffd\u52a0\u3057\u3066\u304a\u304d\u307e\u3057\u305f\u3002\n\u4eca\u56de\u4f7f\u7528\u3057\u3066\u3044\u308bVMWare Work Station \u306b\u3066\u7269\u7406\u30c7\u30d0\u30a4\u30b9\u3092\u8ffd\u52a0\u3059\u308b\u624b\u9806\u306b\u3064\u3044\u3066\u306f\u5272\u611b\u3057\u307e\u3059\u3002\n\n\n```text\n$ sudo ls /dev/sdf\n/dev/sdf\n```\n\n\n`/dev/sdb` \u7269\u7406\u30c7\u30d0\u30a4\u30b9\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092`/dev/sdf` \u7269\u7406\u30c7\u30d0\u30a4\u30b9\u306b\u8907\u88fd\u3057\u307e\u3059\u3002\n\n```text\n$ sudo sfdisk -d /dev/sdb | sudo sfdisk /dev/sdf --force\n```\n\n\n\u30b3\u30de\u30f3\u30c9\u304c\u6b63\u5e38\u7d42\u4e86\u3057\u305f\u3089\u3001`fdisk` \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```text\n$ sudo fdisk -l /dev/sdf\n\nDisk /dev/sdf: 42.9 GB, 42949672960 bytes\n255 heads, 63 sectors/track, 5221 cylinders, total 83886080 sectors\nUnits # sectors of 1 * 512  512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk identifier: 0x00000000\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sdf1            2048    20973567    10485760   8e  Linux LVM\n\n```\n\n\n`/dev/sdf1` \u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306bLVM \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```text\n$ sudo pvcreate /dev/sdf1\n  Physical volume \"/dev/sdf1\" successfully created\n```\n\n\n`/dev/sdf1` \u3092`vgextend` \u30b3\u30de\u30f3\u30c9\u3067`lvg-share`\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```text\n$ sudo vgextend lvg-share /dev/sdf1\n  Volume group \"lvg-share\" successfully extended\n```\n\n\n`vgdisplay` \u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```text\n$ sudo vgdisplay\n  --- Volume group ---\n  VG Name               lvg-share\n  System ID             \n  Format                lvm2\n  Metadata Areas        5\n  Metadata Sequence No  8\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                0\n  Cur LV                3\n  Open LV               3\n  Max PV                0\n  Cur PV                5\n  Act PV                5\n  VG Size               49.98 GiB\n  PE Size               4.00 MiB\n  Total PE              12795\n  Alloc PE / Size       8448 / 33.00 GiB\n  Free  PE / Size       4347 / 16.98 GiB\n  VG UUID               rnFwhI-ybWH-el9e-NIgK-3vOY-hO8L-sehg7c\n```\n\n\n`/dev/sdb1` \u306e\u30c7\u30fc\u30bf\u3092`/dev/sdf1` \u306b\u30b3\u30d4\u30fc\u3059\u308b\u306b\u3042\u305f\u3063\u3066\u3001\u4e8b\u524d\u306b`/dev/sdb1(/dev/lvg-share/public)` \u3092\u30a2\u30f3\u30de\u30a6\u30f3\u30c8\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```text\n$ sudo umount /dev/lvg-share/public\n```\n\n\n`pvmove` \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u5185\u5bb9\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n```text\n$ sudo pvmove /dev/sdb1 /dev/sdf1\n  /dev/sdb1: Moved: 0.2%\n.......\n  /dev/sdb1: Moved: 100.0%\n```\n\n\n\u30b3\u30d4\u30fc\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001`/dev/sdb1` \u30dc\u30ea\u30e5\u30fc\u30e0\u3092`lvg-share` \u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u304b\u3089\u5916\u3057\u307e\u3059\u3002\n\n```text\n$ sudo vgreduce lvg-share /dev/sdb1\n  Removed \"/dev/sdb1\" from volume group \"lvg-share\"\n\n  --- Volume group ---\n  VG Name               lvg-share\n  System ID             \n  Format                lvm2\n  Metadata Areas        4\n  Metadata Sequence No  12\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                0\n  Cur LV                3\n  Open LV               3\n  Max PV                0\n  Cur PV                4\n  Act PV                4\n  VG Size               39.98 GiB\n  PE Size               4.00 MiB\n  Total PE              10236\n  Alloc PE / Size       8448 / 33.00 GiB\n  Free  PE / Size       1788 / 6.98 GiB\n  VG UUID               rnFwhI-ybWH-el9e-NIgK-3vOY-hO8L-sehg7c\n```\n\n\n`pvremove` \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066`/dev/sdb1` \u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\u3053\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001`/dev/sdb1` \u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u8868\u793a\u3055\u308c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\n\n```text\n$ sudo pvremove /dev/sdb1\n  Labels on physical volume \"/dev/sdb1\" successfully wiped\n\n$ sudo pvdisplay\n  --- Physical volume ---\n  PV Name               /dev/sdc1\n  VG Name               lvg-share\n  PV Size               10.00 GiB / not usable 4.00 MiB\n  Allocatable           yes \n  PE Size               4.00 MiB\n  Total PE              2559\n  Free PE               510\n  Allocated PE          2049\n  PV UUID               fxLbYc-4nOT-YKEB-Zzeh-L4pt-QiLa-eSEwdK\n   \n  --- Physical volume ---\n  PV Name               /dev/sdd1\n  VG Name               lvg-share\n  PV Size               10.00 GiB / not usable 4.00 MiB\n  Allocatable           yes \n  PE Size               4.00 MiB\n  Total PE              2559\n  Free PE               511\n  Allocated PE          2048\n  PV UUID               SkmklQ-s3Si-lC2b-hQNa-nOIt-uXnb-1uGs5W\n   \n  --- Physical volume ---\n  PV Name               /dev/sde1\n  VG Name               lvg-share\n  PV Size               10.00 GiB / not usable 4.00 MiB\n  Allocatable           yes \n  PE Size               4.00 MiB\n  Total PE              2559\n  Free PE               767\n  Allocated PE          1792\n  PV UUID               5TkFOl-wXHc-u6vg-ryfY-WefK-4ftc-UkwPLg\n   \n  --- Physical volume ---\n  PV Name               /dev/sdf1\n  VG Name               lvg-share\n  PV Size               10.00 GiB / not usable 4.00 MiB\n  Allocatable           yes (but full)\n  PE Size               4.00 MiB\n  Total PE              2559\n  Free PE               0\n  Allocated PE          2559\n  PV UUID               FezkAV-f4O5-7G2c-Y6sT-tV3m-1gcH-hveQOR\n```\n\n\n\u3053\u308c\u3067`/dev/sdb` \u7269\u7406\u30c7\u30d0\u30a4\u30b9\u3092\u53d6\u308a\u5916\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n= \u6b21\u306e\u8a18\u4e8b =\n[LVM\u3067RAID1\u306e\u69cb\u7bc9\u3001\u969c\u5bb3\u5bfe\u5fdc\u3001\u4ed6RAID\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u8ffd\u52a0](http://qiita.com/TsutomuNakamura/items/c9c277049e0032ed6116 \"LVM\u3067RAID1\u306e\u69cb\u7bc9\u3001\u969c\u5bb3\u5bfe\u5fdc\u3001\u4ed6RAID\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u8ffd\u52a0\")\n", "tags": ["Linux", "lvm"]}