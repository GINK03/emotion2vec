{"context": " More than 1 year has passed since last update.\n\n\nComponent\nversion\n\n\n\n\nRubyMine\n5.0(Windows)\n\n\nRails\n3.2.12\n\n\nRspec\n2.13.0\n\n\n\n\nSetup\n\n\u6700\u521d\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\u3068\u304d\u306b\u300cSkip Test:Unit files\u300d\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3002\n\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n\nGemfile\n...\ngem \"rspec-rails\", :group => [:development, :test]\n...\n\n\n\nbundle install\nTools > Run Rails Script > \"rails\", \"generate rspec:install\"\nTools > Run Rails Generator > model > Blog name:string\nmkdir spec/fixtures\n\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n\nspec/fixtures/blogs.yml\none:\n  id: 1\n  name: \u4eca\u65e5\u306e\u51fa\u6765\u4e8b\u305d\u306e\uff11\ntwo:\n  id: 2\n  name: \u4eca\u65e5\u306e\u51fa\u6765\u4e8b\u305d\u306e\uff12\n\n\n\u66f8\u5f0f\u306f\u3053\u3093\u306a\u611f\u3058\uff1a\n\u30c7\u30fc\u30bf\u540d\uff11:\n  id: 1\n  \u8981\u7d20\u540d: \u5185\u5bb9\n\u30c7\u30fc\u30bf\u540d\uff12:\n  id: 2\n  \u8981\u7d20\u540d: \u5185\u5bb9\n.\n.\n.\n\n\u30c7\u30fc\u30bf\u540d\u306f\u30c6\u30b9\u30c8\u6642\u306b\u3069\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u304b\u306e\u30b7\u30f3\u30dc\u30eb\u306b\u306a\u308b\u3002\n\u30d5\u30a3\u30af\u30b9\u30c1\u30e3\u3092\u30c6\u30b9\u30c8\u6642\u306b\u8aad\u307f\u8fbc\u3080\u3068\u304d\u306f describe \u30d6\u30ed\u30c3\u30af\u306e\u4e2d\u3067\u547c\u3073\u51fa\u305b\u3070\u3044\u3044\ndescribe \u30e2\u30c7\u30eb\u30af\u30e9\u30b9 do\n  fixtures :\u30d5\u30a3\u30af\u30b9\u30c1\u30e3\u30d5\u30a1\u30a4\u30eb\u306e\u540d\u524d\u306e\u30b7\u30f3\u30dc\u30eb\nend\n\n\u3059\u3079\u3066\u306e\u30d5\u30a3\u30af\u30b9\u30c1\u30e3\u3092\u8aad\u307f\u8fbc\u307f\u305f\u3044\u5834\u5408\u306f\nfixtures :all\n\n\nTools > Run Rake Task > db:migrate\nRun > Run > spec\nToggle auto-test\n\n\n1st red\n\n\u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3059\u308b\n\n\nspec/models/blog_spec.rb\n# encoding: utf-8\nrequire 'spec_helper'\n\ndescribe Blog do\n  subject{@blog = Blog.new}\n  context \"#title \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408:\" do\n    it{should_not be_valid}\n  end\nend\n\n\n\n\u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u3053\u3051\u308b\n\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u8ffd\u8a18\n\n\napp/models/blog.rb\n...\nvalidates :name, presence: true\n...\n\n\n\n\u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u5408\u683c\u3059\u308b\n\u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3059\u308b\n\n\nspec/models/blog_spec.rb\n...\n    it{should have(1).errors_on(:name)}\n...\n\n\n\n\u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u5408\u683c\u3059\u308b\n\n\n2nd red\n\n\u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3059\u308b\n\n\nspec/models/blog_spec.rb\ndescribe Blog do\n  fixtures :blogs, :entries\n  context \"fixture\u3092\u4f7f\u3063\u305f\u5834\u5408:\" do\n    subject{@blog = blogs(:one)}\n    it{should have_at_least(2).entries}\n  end\nend\n\n\n\n\u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u3053\u3051\u308b\nTools > Run Rails Generator > model > entry title:string body:text posted_on:date created_at:timestamp updated_at:timestamp blog_id:integer\nTools > Run Rake Task > db:migrate\n\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n\nspec/fixtures/entries.yml\nearliest:\n  id: 1\n  blog_id: 1\n  title: \"\u543e\u8f29\u306f\u732b\u3067\u3042\u308b\"\n  body: \"\u540d\u524d\u306f\u307e\u3060\u306a\u3044\"\n  posted_on: 2012-05-01\nlatest:\n  id: 2\n  blog_id: 1\n  title: \"hoge\"\n  body: \"hogehoge\"\n  posted_on: 2012-05-10\n_upgrading:\n  id: 3\n  blog_id: 2\n  title: \"fuga\"\n  body: \"fugafuga\"\n  posted_on: 2012-06-01\n\n\n\n\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n\napp/models/blog.rb\n...\nhas_many :entries\n...\n\n\n\nRun > Run > spec\u3059\u308b\u3068\u3001\u30c6\u30b9\u30c8\u3092\u901a\u904e\u3059\u308b\n\n\n3rd red\n\n\u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3059\u308b\n\n\nspec/models/entry_spec.rb\n# encoding: utf-8\nrequire 'spec_helper'\n\ndescribe Entry do\n  fixtures :entries, :blogs\n  context \"fixture\u3092\u4f7f\u3063\u305f\u5834\u5408:\" do\n    subject{@blog = entries(:earliest).blog}\n    it{should == blogs(:one)}\n  end\nend\n\n\n\n\u81ea\u52d5\u7684\u306b\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u30b3\u30b1\u308b\n\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n\napp/models/entry.rb\n...\n  belongs_to :blog\n...\n\n\n\n\u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u5408\u683c\u3059\u308b\n\n\n4th red\n\n\u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3059\u308b\n\n\nspec/models/blog_spec.rb\ndescribe Blog do\n  fixtures :blogs, :entries\n  context \"\u306b\u8a18\u4e8b\u3092\u6295\u7a3f\u3067\u304d\u305f\u5834\u5408:\" do\n    before{@blog = blogs(:one)}\n    it \"\u8a18\u4e8b\u306e\u4ef6\u6570\u304c1\u4ef6\u5897\u3048\u308b\u3053\u3068\" do\n      lambda {\n        @blog.entries.create(\n            :title => 'new_post', :body => 'hello',\n            :posted_on => Date.today)\n      }.should change(Entry, :count).by(1)\n    end\n  end\nend\n\n\n\n\u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u3053\u3051\u308b\n\n\n5th red\n\n\u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3059\u308b\n\n\nspec/models/entry_spec.rb\ndescribe Entry do\n  fixtures :blogs\n  context \"#posted_on \u304c\u5165\u529b\u3055\u308c\u305a\u306b\u4fdd\u5b58\u3055\u308c\u305f\u5834\u5408:\" do\n    subject do\n      @entry = Entry.new(title: \"\u30bf\u30a4\u30c8\u30eb\", body: \"\u672c\u6587\")\n      @entry.save!\n      @entry.reload\n      @entry\n    end\n    its('posted_on') { should == Date.today }\n  end\nend\n\n\n\n\u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u3053\u3051\u308b\n\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n\napp/models/entry.rb\nclass Entry < ActiveRecord::Base\n  attr_accessible :blog_id, :body, :created_at, :posted_on, :title, :updated_at, :blog\n  belongs_to :blog\n  before_save :posted_on_today\n\n  def posted_on_today\n    self.posted_on = Date.today\n  end\nend\n\n\n\n\u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u5408\u683c\u3059\u308b\n\n\n6th red\n\n\u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3059\u308b\n\n\nspec/models/entry_spec.rb\ndescribe Entry do\n  fixtures :blogs\n  context \"#posted_on \u3092\u660e\u793a\u3057\u3066\u4fdd\u5b58\u3055\u308c\u305f\u5834\u5408:\" do\n    subject do\n      @posted_on = Date.today - 10\n      @entry = Entry.new(title: \"\u30bf\u30a4\u30c8\u30eb\",\n                         body: \"\u672c\u6587\",\n                         posted_on: @posted_on\n      )\n      @entry.save!\n      @entry.reload\n      @entry\n    end\n    its('posted_on') { should == @posted_on }\n  end\nend\n\n\n\n\n\u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u3053\u3051\u308b\n\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n\napp/models/entry.rb\n# self.posted_on = Date.today\nself.posted_on ||= Date.today\n\n\n\n\u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u5408\u683c\u3059\u308b\n\n\u30e2\u30c7\u30eb\u7de8\u304a\u3057\u307e\u3044\u3002\n\n\u30d6\u30ed\u30b0\u3084\u3063\u3066\u307e\u3059\uff1aPAPA-tronix !\n| Component| version      |\n|:---------|-------------:|\n| RubyMine | 5.0(Windows) |\n| Rails    | 3.2.12       |\n| Rspec    | 2.13.0       |\n\n## Setup\n\n1. \u6700\u521d\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\u3068\u304d\u306b\u300cSkip Test:Unit files\u300d\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3002\n\n1. \u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n```ruby:Gemfile\n...\ngem \"rspec-rails\", :group => [:development, :test]\n...\n```\n\n1. bundle install\n\n1. Tools > Run Rails Script > \"rails\", \"generate rspec:install\"\n\n1. Tools > Run Rails Generator > model > Blog name:string\n\n1. mkdir spec/fixtures\n\n1. \u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n```yaml:spec/fixtures/blogs.yml\none:\n  id: 1\n  name: \u4eca\u65e5\u306e\u51fa\u6765\u4e8b\u305d\u306e\uff11\ntwo:\n  id: 2\n  name: \u4eca\u65e5\u306e\u51fa\u6765\u4e8b\u305d\u306e\uff12\n```\n\n\u66f8\u5f0f\u306f\u3053\u3093\u306a\u611f\u3058\uff1a\n\n```yaml\n\u30c7\u30fc\u30bf\u540d\uff11:\n  id: 1\n  \u8981\u7d20\u540d: \u5185\u5bb9\n\u30c7\u30fc\u30bf\u540d\uff12:\n  id: 2\n  \u8981\u7d20\u540d: \u5185\u5bb9\n.\n.\n.\n```\n\n\u30c7\u30fc\u30bf\u540d\u306f\u30c6\u30b9\u30c8\u6642\u306b\u3069\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u304b\u306e\u30b7\u30f3\u30dc\u30eb\u306b\u306a\u308b\u3002\n\u30d5\u30a3\u30af\u30b9\u30c1\u30e3\u3092\u30c6\u30b9\u30c8\u6642\u306b\u8aad\u307f\u8fbc\u3080\u3068\u304d\u306f describe \u30d6\u30ed\u30c3\u30af\u306e\u4e2d\u3067\u547c\u3073\u51fa\u305b\u3070\u3044\u3044\n\n```ruby\ndescribe \u30e2\u30c7\u30eb\u30af\u30e9\u30b9 do\n  fixtures :\u30d5\u30a3\u30af\u30b9\u30c1\u30e3\u30d5\u30a1\u30a4\u30eb\u306e\u540d\u524d\u306e\u30b7\u30f3\u30dc\u30eb\nend\n```\n\n\u3059\u3079\u3066\u306e\u30d5\u30a3\u30af\u30b9\u30c1\u30e3\u3092\u8aad\u307f\u8fbc\u307f\u305f\u3044\u5834\u5408\u306f\n\n```ruby\nfixtures :all\n```\n\n8. Tools > Run Rake Task > db:migrate\n\n1. Run > Run > spec\n\n1. Toggle auto-test\n\n## 1st red\n\n1. \u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3059\u308b\n\n```ruby:spec/models/blog_spec.rb\n# encoding: utf-8\nrequire 'spec_helper'\n \ndescribe Blog do\n  subject{@blog = Blog.new}\n  context \"#title \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408:\" do\n    it{should_not be_valid}\n  end\nend\n```\n\n1. \u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u3053\u3051\u308b\n\n1. \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u8ffd\u8a18\n\n```ruby:app/models/blog.rb\n...\nvalidates :name, presence: true\n...\n```\n\n1. \u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u5408\u683c\u3059\u308b\n\n1. \u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3059\u308b\n\n```ruby:spec/models/blog_spec.rb\n...\n    it{should have(1).errors_on(:name)}\n...\n```\n\n1. \u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u5408\u683c\u3059\u308b\n\n## 2nd red\n\n1. \u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3059\u308b\n\n```ruby:spec/models/blog_spec.rb\ndescribe Blog do\n  fixtures :blogs, :entries\n  context \"fixture\u3092\u4f7f\u3063\u305f\u5834\u5408:\" do\n    subject{@blog = blogs(:one)}\n    it{should have_at_least(2).entries}\n  end\nend\n```\n\n1. \u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u3053\u3051\u308b\n\n1. Tools > Run Rails Generator > model > entry title:string body:text posted_on:date created_at:timestamp updated_at:timestamp blog_id:integer\n\n8. Tools > Run Rake Task > db:migrate\n\n1. \u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n```yaml:spec/fixtures/entries.yml\nearliest:\n  id: 1\n  blog_id: 1\n  title: \"\u543e\u8f29\u306f\u732b\u3067\u3042\u308b\"\n  body: \"\u540d\u524d\u306f\u307e\u3060\u306a\u3044\"\n  posted_on: 2012-05-01\nlatest:\n  id: 2\n  blog_id: 1\n  title: \"hoge\"\n  body: \"hogehoge\"\n  posted_on: 2012-05-10\n_upgrading:\n  id: 3\n  blog_id: 2\n  title: \"fuga\"\n  body: \"fugafuga\"\n  posted_on: 2012-06-01\n```\n\n1. \u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n```ruby:app/models/blog.rb\n...\nhas_many :entries\n...\n```\n\n1. Run > Run > spec\u3059\u308b\u3068\u3001\u30c6\u30b9\u30c8\u3092\u901a\u904e\u3059\u308b\n\n## 3rd red\n\n1. \u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3059\u308b\n\n```ruby:spec/models/entry_spec.rb\n# encoding: utf-8\nrequire 'spec_helper'\n\ndescribe Entry do\n  fixtures :entries, :blogs\n  context \"fixture\u3092\u4f7f\u3063\u305f\u5834\u5408:\" do\n    subject{@blog = entries(:earliest).blog}\n    it{should == blogs(:one)}\n  end\nend\n```\n\n1. \u81ea\u52d5\u7684\u306b\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u30b3\u30b1\u308b\n\n1. \u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n```ruby:app/models/entry.rb\n...\n  belongs_to :blog\n...\n```\n\n1. \u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u5408\u683c\u3059\u308b\n\n## 4th red\n\n1. \u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3059\u308b\n\n```ruby:spec/models/blog_spec.rb\ndescribe Blog do\n  fixtures :blogs, :entries\n  context \"\u306b\u8a18\u4e8b\u3092\u6295\u7a3f\u3067\u304d\u305f\u5834\u5408:\" do\n    before{@blog = blogs(:one)}\n    it \"\u8a18\u4e8b\u306e\u4ef6\u6570\u304c1\u4ef6\u5897\u3048\u308b\u3053\u3068\" do\n      lambda {\n        @blog.entries.create(\n            :title => 'new_post', :body => 'hello',\n            :posted_on => Date.today)\n      }.should change(Entry, :count).by(1)\n    end\n  end\nend\n```\n\n1. \u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u3053\u3051\u308b\n\n## 5th red\n\n1. \u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3059\u308b\n\n```ruby:spec/models/entry_spec.rb\ndescribe Entry do\n  fixtures :blogs\n  context \"#posted_on \u304c\u5165\u529b\u3055\u308c\u305a\u306b\u4fdd\u5b58\u3055\u308c\u305f\u5834\u5408:\" do\n    subject do\n      @entry = Entry.new(title: \"\u30bf\u30a4\u30c8\u30eb\", body: \"\u672c\u6587\")\n      @entry.save!\n      @entry.reload\n      @entry\n    end\n    its('posted_on') { should == Date.today }\n  end\nend\n```\n\n1. \u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u3053\u3051\u308b\n\n1. \u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n```ruby:app/models/entry.rb\nclass Entry < ActiveRecord::Base\n  attr_accessible :blog_id, :body, :created_at, :posted_on, :title, :updated_at, :blog\n  belongs_to :blog\n  before_save :posted_on_today\n\n  def posted_on_today\n    self.posted_on = Date.today\n  end\nend\n```\n\n1. \u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u5408\u683c\u3059\u308b\n\n## 6th red\n\n1. \u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3059\u308b\n\n```ruby:spec/models/entry_spec.rb\ndescribe Entry do\n  fixtures :blogs\n  context \"#posted_on \u3092\u660e\u793a\u3057\u3066\u4fdd\u5b58\u3055\u308c\u305f\u5834\u5408:\" do\n    subject do\n      @posted_on = Date.today - 10\n      @entry = Entry.new(title: \"\u30bf\u30a4\u30c8\u30eb\",\n                         body: \"\u672c\u6587\",\n                         posted_on: @posted_on\n      )\n      @entry.save!\n      @entry.reload\n      @entry\n    end\n    its('posted_on') { should == @posted_on }\n  end\nend\n\n```\n\n1. \u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u3053\u3051\u308b\n\n1. \u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n```ruby:app/models/entry.rb\n# self.posted_on = Date.today\nself.posted_on ||= Date.today\n```\n\n1. \u4fdd\u5b58\u3059\u308b\u3068\u81ea\u52d5\u3067\u30c6\u30b9\u30c8\u304c\u8d70\u308a\u3001\u5408\u683c\u3059\u308b\n\n\u30e2\u30c7\u30eb\u7de8\u304a\u3057\u307e\u3044\u3002\n\n-----\n\u30d6\u30ed\u30b0\u3084\u3063\u3066\u307e\u3059\uff1a[PAPA-tronix !](http://weed.cocolog-nifty.com/wzero3es/)", "tags": ["Ruby", "RubyMine", "Rails", "rails3", "RSpec"]}