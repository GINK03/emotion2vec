{"context": "\u301c\u30cf\u30c3\u30ab\u30bd\u30f3\u306b\u3066\u301c\n\u300cNode.js\u4f7f\u3063\u305f\u3089\u7c21\u5358\u306bDB\u3082\u64cd\u4f5c\u3067\u304d\u308b\u3089\u3057\u3044\u300d\n\u2192\u300c\u306a\u3093\u3060\u3088\u3053\u308c\u5168\u7136\u308f\u304b\u3093\u306d\u3048\u3088\u300d\nNode.js\u3068MongoDB\u3092\u4f7f\u3063\u3066json\u30b5\u30fc\u30d0\u3092\u3064\u304f\u308d\u3046\u3068\u3057\u305f\u3051\u3069\uff0c\n\u3044\u308d\u3093\u306a\u7f60\u304c\u3042\u3063\u305f\u306e\u3067\u30e1\u30e2\u3057\u3068\u304d\u307e\u3059\uff0e\n\u521d\u3081\u3066Node.js\u3084json\uff0cMongoDB\u4f7f\u3046\u3088\u3063\u3066\u4eba\u5411\u3051\u3067\u3059\uff0e\n\u57fa\u672c\u7684\u306b\u306f\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3057\u3066\u4f5c\u3063\u3066\u307e\u3059\uff0e\n\nNode.js + Express 4.x + MongoDB(Mongoose)\u3067RESTful\u306ajsonAPI\u30b5\u30fc\u30d0\u306e\u4f5c\u6210\u3092\u4e01\u5be7\u306b\u89e3\u8aac\u3059\u308b\uff0e+ \u30c6\u30b9\u30c8\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u7528\u3044\u305fAPI\u30c6\u30b9\u30c8\u307e\u3067 - Qiita\n\u30bc\u30ed\u304b\u3089\u306f\u3058\u3081\u308bExpress + Node.js\u3092\u4f7f\u3063\u305f\u30a2\u30d7\u30ea\u958b\u767a - Qiita\nnode.js \u304b\u3089 MongoDB \u306b\u30a2\u30af\u30bb\u30b9 (Mongoose \u306e\u7d39\u4ecb) - KrdLab's blog\nMongoose \u306e Document \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u8ffd\u52a0\u3057\u3066\u306e JSON \u5316 - \u3068\u308a\u3042\u3048\u305a\u5099\u5fd8\u9332\u3068\u3057\u3066\u306f\u3058\u3081\u3088\u3046\u304b\u306a\uff1f\n\n\n\u4eca\u56de\u3064\u304f\u308b\u3082\u306e\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u304cjson\u5f62\u5f0f\u3067\u30e6\u30fc\u30b6\u540d+password/API\u3067\u53d6\u5f97\u3057\u305f\u30ad\u30fc\u3092\u9001\u4fe1\u3057\u3066\u304f\u308b\u306e\u3067\uff0c\n\u305d\u308c\u3089\u3092DB\u306b\u3076\u3061\u8fbc\u3093\u3067\u53c2\u7167\u3057\u305f\u308aupdate\u3057\u305f\u308a\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306b\u8fd4\u3057\u305f\u308a\u3059\u308b\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3057\u307e\u3059\uff0e\n\u4eca\u56de\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5074\u304c\u4f7f\u7528\u3059\u308bAPI\u306f\u3054\u5f53\u5730\u30ad\u30e3\u30e9\u30ab\u30bf\u30ed\u30b0\u3067\u3059\uff0e\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306f\u3054\u5f53\u5730\u30ad\u30e3\u30e9\u30ab\u30bf\u30ed\u30b0\u304b\u3089\u53d6\u5f97\u3057\u305f\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092\u30b5\u30fc\u30d0\u306bjson\u5f62\u5f0f\u3067POST\u9001\u4fe1\u3057\u307e\u3059\uff0e\n\n\u74b0\u5883\n\nUbuntu 14.04 LTS\nNode.js v4.4.7\nexpress v4.x\nMongoDB v2.2.11\nMongoose v2.15.8\n\nUbuntu\u4e0a\u3067\u958b\u767a\u3057\u3066\u3044\u307e\u3059\u304c\uff0c\u57fa\u672c\u7684\u306b\u30b3\u30de\u30f3\u30c9\u304c\u53e9\u3051\u305f\u3089Mac\u3067\u3082CentOS\u3067\u3082\u4f55\u3067\u3082\u3044\u3044\u3068\u601d\u3044\u307e\u3059\uff0e\n\n\u958b\u767a\u306e\u6e96\u5099\n\n\u5404\u7a2e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u3079\u304d\u3082\u306e\u306f\u4ee5\u4e0b\n\nNode.js v4.4.7\nexpress v4.x\nMongoDB v2.x\nMongoose v2.x\n\n\u3044\u308d\u3093\u306a\u30b5\u30a4\u30c8\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u4ed5\u65b9\u304c\u7d39\u4ecb\u3055\u308c\u3066\u308b\u306e\u3067\u8a73\u7d30\u306f\u5272\u611b\uff0e\n\u305d\u3093\u306a\u3093\u3044\u3061\u3044\u3061\u898b\u308b\u306e\u9762\u5012\u3060\u3088\u3063\u3066\u4eba\u5411\u3051\u306b\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u4f5c\u3063\u305f\u306e\u3067\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\uff0e\uff08\u52d5\u4f5c\u78ba\u8a8d\u3057\u3066\u306a\u3044\u3051\u3069\uff09\nhttps://github.com/tdomen/node.js_mongodb_server/blob/master/nodejs_installer.sh\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\n\u4eca\u56de\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u69cb\u6210\u3067\u958b\u767a\u3092\u884c\u3044\u307e\u3059\uff0e\n$ tree .\nbackend\n|\n|--app.js\n|--package.json\n|--nodejs_installer.sh\n|--models\n|  |--user.js\n|  |--zukan.js\n|--routes\n   |--auth\n   |  |--login.js\n   |--zukan\n      |--zukan.js\n\n$ npm init\u3057\u3068\u3051\u3070\u3060\u3044\u305f\u3044\u4e0a\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u306b\u306a\u308b\u3068\u601d\u3046\u306e\u3067\uff0c\n\u9069\u5b9c\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u8ffd\u52a0\u3057\u3066\u3044\u3063\u3066\u304f\u3060\u3055\u3044\uff0e\n\nMongoDB\u306e\u8d77\u52d5\u30fb\u8a2d\u5b9a\nMongoDB\u306e\u8d77\u52d5\u306b\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u53e9\u304d\u307e\u3059\uff0e\n$ sudo mongod --dbpath /var/db/mongo/\n\u3053\u308c\u3067DB\u30b5\u30fc\u30d0\u304c\u8d77\u52d5\u3057\u307e\u3059\uff0e\nMongoDB\u306f\u5bfe\u8a71\u578b\u306e\u30b7\u30a7\u30eb\u3067\u64cd\u4f5c\u53ef\u80fd\u3067\u3059\uff0e\n$ mongo\u30b3\u30de\u30f3\u30c9\u3067mongo\u30b7\u30a7\u30eb\u304c\u8d77\u52d5\u3057\u307e\u3059\uff0e\n\u4eca\u56de\u306f\u300cbackend\u300d\u3068\u3044\u3046\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\u3057\uff0c\n\u305d\u306e\u4e2d\u306b\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\uff08\u30c6\u30fc\u30d6\u30eb\uff09\u3092\u5165\u308c\u3066\u3044\u304d\u307e\u3059\uff0e\n\u4eca\u56de\u306f\u300cusers\u300d\uff0c\u300czukans\u300d\u306e2\u3064\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\uff0e\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\u304a\u3088\u3073\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u4f5c\u6210\u306fmongo\u30b7\u30a7\u30eb\u4e0a\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\u3053\u3068\u3067\u53ef\u80fd\u3067\u3059\uff0e\n$ mongo\n>use backend\n>db.createCollection('users')\n{ \"ok\" : 1 }\n>db.createCollection('zukans')\n{ \"ok\" : 1 }\n\n\u4e0a\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u5f8c\uff0c\u300cshow collections\u300d\u30b3\u30de\u30f3\u30c9\u306b\u3088\u3063\u3066\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5185\u306e\u3059\u3079\u3066\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff0e\n>show collections\nsystem.indexes\nusers\nzukans\n\n\u300cusers\u300d\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3068\u300czukans\u300d\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e2\u3064\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308c\u3070OK\u3067\u3059\uff0e\n\uff08system.indexes\u306f\u6700\u521d\u304b\u3089\u3042\u308b\u307f\u305f\u3044\u3067\u3059\uff0e\uff09\n\u78ba\u8a8d\u304c\u3067\u304d\u305f\u3089\u300cquit()\u300d\u30b3\u30de\u30f3\u30c9\u3067mongo\u30b7\u30a7\u30eb\u3092\u7d42\u4e86\u3057\u307e\u3059\uff0e\n\u4ee5\u4e0a\u3067\u958b\u767a\u306e\u4e0b\u6e96\u5099\u306f\u7d42\u4e86\u3067\u3059\uff0e\n\n\u30b5\u30fc\u30d0\u5b9f\u88c5\n\u4eca\u56de\u306e\u5b9f\u88c5\u306e\u6d41\u308c\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\uff0e\n\n\u30e6\u30fc\u30b6\u8a8d\u8a3c\u7528DB\u306e\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\napp.js\u306e\u8ffd\u8a18\nroutes/auth/longin.js\u306e\u5b9f\u88c5\nAPI\u306b\u3088\u308b\u53d6\u5f97\u30ad\u30fc\u7528DB\u306e\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\napp.js\u306e\u8ffd\u8a18\nroutes/zukan/zukan.js\u306e\u5b9f\u88c5\n\n\u6d41\u308c\u3092\u898b\u3066\u3082\u5206\u304b\u308b\u3068\u304a\u308a\uff0c\u57fa\u672c\u306f1. \u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\uff0c2. app.js\u306e\u8ffd\u8a18\uff0c3. \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u5148\u306e\u5b9f\u88c5\uff0c\u306e3\u30b9\u30c6\u30c3\u30d7\u3067\u3059\uff0e\n\u305d\u308c\u3067\u306f\u307e\u305a\u30e6\u30fc\u30b6\u8a8d\u8a3c\u306e\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\uff0e\n\n\u30e6\u30fc\u30b6\u8a8d\u8a3c\u6a5f\u80fd\u306e\u5b9f\u88c5\n\u672c\u9805\u3067\u306f\u30e6\u30fc\u30b6\u8a8d\u8a3c\u306e\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u307e\u3059\uff0e\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306fPOST\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u3088\u3063\u3066\u8a8d\u8a3c\u3092\u8981\u6c42\u3057\u307e\u3059\uff0e\n\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u5bb9\u306fJSON\u5f62\u5f0f\u3067\u8a18\u8ff0\u3055\u308c\u3066\u3044\u307e\u3059\uff0e\n\n\u30e6\u30fc\u30b6\u8a8d\u8a3c\u6642\u306ePOST\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u5bb9\n{\n    \"username\" : String\n    \"password\" : String\n}\n\n\n\u30b5\u30fc\u30d0\u306fusername\u3067DB\u306eusers\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u53c2\u7167\u3057\uff0c\nusername\u304c\u5b58\u5728\u3057\u305f\u5834\u5408\u306fpassword\u3068\u7167\u5408\u3057\u3066\u305d\u306e\u7d50\u679c\u3092\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306b\u8fd4\u3057\u307e\u3059\uff0e\nusername\u304c\u5b58\u5728\u3057\u306a\u304b\u3063\u305f\u5834\u5408\uff0cusername\u3068password\u3092\u65b0\u898f\u767b\u9332\u3057\u307e\u3059\uff0e\n\n1. \u30e6\u30fc\u30b6\u8a8d\u8a3c\u7528DB\u306e\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\n\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\u306f/models\u306e\u4e2d\u306b\u5b9a\u7fa9\u3057\u307e\u3059\uff0e\n\u4eca\u56de\uff0c\u30e6\u30fc\u30b6\u8a8d\u8a3c\u7528\u306e\u30b9\u30ad\u30fc\u30de\u306f/models/user.js\u306b\u8a18\u8ff0\u3057\u307e\u3059\uff0e\n\n/models/user.js\n// /backend/models/user.js\n\nvar mongoose = require('mongoose');\nvar Schema = mongoose.Schema;\n\nvar User = new Schema({\n    username : { type: String, require: true, unique: true }, \n    password : { type: String, require: true }\n});\n\nmodule.exports = mongoose.model('user', User);\n\n\nusername\u306f\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u60f3\u5b9a\u3057\u3066\u3044\u308b\u305f\u3081\uff0cunique\u306b\u3057\u3066\u3044\u307e\u3059\uff0e\n\n2. app.js\u306e\u8ffd\u8a18\napp.js\u306b\uff0c\u5f8c\u306b\u4f5c\u6210\u3059\u308blogin.js\u3092\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u5148\u306b\u6307\u5b9a\u3057\u307e\u3059\uff0e\n\napp.js\nvar express = require('express');\nvar path = require('path');\nvar favicon = require('serve-favicon');\nvar logger = require('morgan');\nvar cookieParser = require('cookie-parser');\nvar bodyParser = require('body-parser');\n\n// ---- Renamed and Added by tdomen -----\nvar login = require('./routes/auth/login');\nvar http = require('http');\nvar mongoose = require('mongoose');\n// ----------------------------------------\n\nvar app = express();\n\n// view engine setup\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'jade');\n\n// uncomment after placing your favicon in /public\n//app.use(favicon(path.join(__dirname, 'public', 'favicon.ico')));\n\n// ---- Added by tdomen -----\n// \u30dd\u30fc\u30c8\u8a2d\u5b9a\napp.set('port', process.env.PORT || 3000);\n// --------------------------\n\napp.use(logger('dev'));\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json());\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\n\n// ---- Added by tdomen -----\n// \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u6a5f\u80fd\napp.use('/login', login);\n// --------------------------\n\n// catch 404 and forward to error handler\napp.use(function(req, res, next) {\n    var err = new Error('Not Found');\n    err.status = 404;\n    next(err);\n});\n\n// error handlers\n// development error handler\n// will print stacktrace\nif (app.get('env') === 'development') {\n    app.use(function(err, req, res, next) {\n      res.status(err.status || 500);\n      res.render('error', {\n    message: err.message,\n    error: err\n    });\n  });\n}\n\n// production error handler\n// no stacktraces leaked to user\napp.use(function(err, req, res, next) {\n    res.status(err.status || 500);\n    res.render('error', {\n    message: err.message,\n    error: {}\n    });\n});\n\n// \u30b5\u30fc\u30d0\u7acb\u3061\u4e0a\u3052\nhttp.createServer(app).listen(app.get('port'), function(){\n    console.log('Express server listening on port ' + app.get('port'));\n    mongoose.connect('mongodb://localhost/backend');\n});\n// ------------------------------------------\n\nmodule.exports = app;\n\n\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5074\u304b\u3089\u300chttp://\u301c:3000/login\u300d\u3068\u3044\u3046\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u304d\u305f\u5834\u5408\uff0c\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u5148\u306b\u6307\u5b9a\u3057\u305froutes/auth/login.js\u306b\u3066\u51e6\u7406\u3055\u308c\u307e\u3059\uff0e\napp.js\u306e\u7de8\u96c6\u306f\u3068\u308a\u3042\u3048\u305a\u7d42\u308f\u308a\u3067\u3059\uff0e\n\n3. routes/auth/longin.js\u306e\u5b9f\u88c5\nlogin.js\u3067\u306f\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u304b\u3089\u6765\u305fPOST\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51e6\u7406\u3057\u307e\u3059\uff0e\nPOST\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5074\u304b\u3089\u9001\u4fe1\u3055\u308c\u305fusername\u30ad\u30fc\u3067DB\u5185\u3092\u691c\u7d22\u3057\uff0c\n\u691c\u7d22\u306b\u5f15\u3063\u304b\u304b\u3089\u306a\u304b\u3063\u305f\u5834\u5408\u306fusername\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3067\u65b0\u898f\u767b\u9332\u3092\u884c\u3044\u307e\u3059\uff0e\n\u691c\u7d22\u306b\u5f15\u3063\u304b\u304b\u3063\u305f\u5834\u5408\u306f\uff0cDB\u5185\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u5bb9\u3092\u7167\u5408\u3057\uff0c\n\u4e00\u81f4\u3057\u3066\u3044\u308c\u3070true\u3092\uff0c\u305d\u3046\u3067\u306a\u3051\u308c\u3070false\u3092\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306b\u8fd4\u3057\u307e\u3059\uff0e\n\nroutes/auth/login.js\nvar express = require('express');\nvar bodyParser = require('body-parser');\nvar router = express.Router();\nvar mongoose = require('mongoose');\n\n// \u30e2\u30c7\u30eb\u306e\u5ba3\u8a00\nvar User = require('../../models/user');\n\n// POST\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u304d\u305f\u6642\u306e\u51e6\u7406\n/* POST\u5185\u5bb9\u306fJSON\u5f62\u5f0f\u3067\u98db\u3070\u3055\u308c\u308b\n * JSON format\n * {\n *  \"username\" : String\n *  \"password\" : String\n * }\n */\nrouter.post('/', function(request, response){\n    console.log(\"catch the post request\");\n    response.setHeader('Content-Type', 'text/plain');\n\n    // \u30d1\u30e9\u30e1\u30fc\u30bf\u540d\u3001username\u3068pass\u3092\u51fa\u529b\n    console.log(request.body.username);\n    console.log(request.body.password);\n\n    var username = request.body.username;\n    var password = request.body.password;\n\n    User.find({ \"username\" : username }, function(err, result){\n    if (err)\n        console.log(err);\n\n    // \u65b0\u898f\u767b\u9332\n    if (result.length == 0){\n        var user = new User();\n\n        user.username = username;\n        user.password = password;\n\n        user.save(function(err){\n        if (err) console.log(err);\n        response.send(\"new_created\");\n        });\n    }\n    // username\u304cDB\u306b\u5b58\u5728\u3057\u305f\u5834\u5408\n    else{\n        if (result[0].password == password)\n        response.send(\"true\");\n        else\n        response.send(\"false\");\n    }\n    });\n});\n\nmodule.exports = router;\n\n\nUser.find\u306b\u3066\uff0c\u7b2c\u4e00\u5f15\u6570\u306b\u691c\u7d22\u3059\u308busername\u30ad\u30fc\u3068POST\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u306eusername\u3092\u53d6\u308a\u307e\u3059\uff0e\n\u305d\u306e\u7d50\u679c\u306f\u7b2c\u4e8c\u5f15\u6570\u306e\u7121\u540d\u95a2\u6570function(err, result)\u306e\u7b2c\u4e8c\u5f15\u6570\u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\uff0e\nresult.lentgh\u304c0\u3067\u3042\u3063\u305f\u5834\u5408\uff0c\u691c\u7d22\u6761\u4ef6\u306b\u4e00\u81f4\u305b\u305a\uff0c\nDB\u5185\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u5bb9\u306eusername\u304c\u5b58\u5728\u3057\u306a\u3044\u3053\u3068\u3092\u610f\u5473\u3059\u308b\u306e\u3067\uff0c\u65b0\u898f\u767b\u9332\u306e\u30d5\u30ed\u30fc\u306b\u5165\u3063\u3066\u3044\u304d\u307e\u3059\uff0e\n\u305d\u3046\u3067\u306a\u304b\u3063\u305f\u5834\u5408\u306f\uff0cresult\u914d\u5217\u306e0\u756a\u8981\u7d20\n\uff08\u30b9\u30ad\u30fc\u30de\u3067username\u3092unique\u6307\u5b9a\u3057\u3066\u3044\u308b\u305f\u3081\uff0c\u5fc5\u305a\u8981\u7d20\u306f1\u3064\u306e\u307f\u3068\u306a\u308b\u306f\u305a\uff09\u306e\npassword\u3068\u30ea\u30af\u30a8\u30b9\u30c8\u5185password\u3092\u7167\u5408\u3057\uff0c\u305d\u306e\u6210\u5426\u3092\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306b\u8fd4\u5374\u3057\u3066\u3044\u307e\u3059\uff0e\n\u4ee5\u4e0a\u3067\u30e6\u30fc\u30b6\u8a8d\u8a3c\u6a5f\u80fd\u306f\u5b9f\u88c5\u7d42\u4e86\u3067\u3059\uff0e\n\uff08\u4eca\u56de\u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u7b49\u306f\u884c\u3063\u3066\u3044\u307e\u305b\u3093\uff0e\u305d\u306e\u3042\u305f\u308a\u3092\u77e5\u308a\u305f\u3044\u4eba\u306fNode.js+Express+MongoDB\u3067Session\u3092\u5229\u7528\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u6a5f\u80fd\u3092\u5b9f\u88c5 - Qiita\u3092\u53c2\u8003\u306b\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff0e\uff09\n\n\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092\u30e6\u30fc\u30b6\u3054\u3068\u306b\u4fdd\u5b58/\u53d6\u5f97\u3059\u308b\u56f3\u9451\u6a5f\u80fd\u306e\u5b9f\u88c5\n\u672c\u9805\u3067\u306f\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u304b\u3089\u9001\u3089\u308c\u308b\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092\n\u30e6\u30fc\u30b6\u3054\u3068\u306b\u4fdd\u5b58\uff0c\u53d6\u5f97\u3059\u308b\u56f3\u9451\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u307e\u3059\uff0e\uff08\u30dd\u30b1\u30e2\u30f3\u56f3\u9451\u306e\u30a4\u30e1\u30fc\u30b8\u3067\u3059\uff09\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306fGET/POST\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u3088\u3063\u3066\uff0c\u4eca\u307e\u3067\u4fdd\u5b58\u3057\u3066\u304d\u305fID\u3092\u53d6\u5f97\u3059\u308b\u304b\uff0c\nDB\u306b\u4fdd\u5b58\u3059\u308b\u8981\u6c42\u3092\u884c\u3044\u307e\u3059\uff0e\nDB\u306b\u4fdd\u5b58\u3092\u8981\u6c42\u3059\u308bPOST\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u5bb9\u306fJSON\u5f62\u5f0f\u3067\u8a18\u8ff0\u3055\u308c\u3066\u3044\u307e\u3059\uff0e\n\u4eca\u56de\uff0c\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306f\u3054\u5f53\u5730\u30ad\u30e3\u30e9\u30ab\u30bf\u30ed\u30b0\u3067\u53d6\u5f97\u3057\u305f\nJSON\u3092\u30b5\u30fc\u30d0\u306b\u305d\u306e\u307e\u307e\u6e21\u3057\u307e\u3059\uff0e\n\nPOST\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u5bb9\n{\n    \"username\" : String\n    \"characterID\" : String\n}\n\n\n\u30b5\u30fc\u30d0\u306fusername\u3067DB\u3092\u53c2\u7167\u3057\uff0cPOST\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u306echaracterID\u3092\u8ffd\u52a0\u767b\u9332\u3057\u307e\u3059\uff0e\n\n1. \u56f3\u9451\u7528DB\u306e\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\n\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\u306f\u30e6\u30fc\u30b6\u8a8d\u8a3c\u7528\u3068\u540c\u3058\u304f\uff0c/models\u76f4\u4e0b\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u304d\u307e\u3059\uff0e\n\u4eca\u56de\uff0c\u56f3\u9451\u7528\u306e\u30b9\u30ad\u30fc\u30de\u3092/models/zukan.js\u306b\u8a18\u8ff0\u3057\u307e\u3059\uff0e\n\n/models/user.js\n// /backend/models/zukan.js\n\nvar mongoose = require('mongoose'); \nvar Schema = mongoose.Schema; \nvar Zukan = new Schema({ \n    username : { type: String },  \n    characterID : { type: [Number] } \n}); \n\nmodule.exports = mongoose.model('zukan', Zukan); \n\n\nusername\u306f\u672c\u6765\uff0c\u30e6\u30fc\u30b6\u8a8d\u8a3c\u7528\u306eDB\u3068\u7d44\u307f\u5408\u308f\u305b\u3066\u304a\u304f\u3068\u3088\u3044\u3067\u3059\uff0e\nDB\u8a2d\u8a08\u306f\u3061\u3083\u3093\u3068\u3084\u308b\u3079\u304d\u3067\u3059\u304c\uff0c\u307e\u3042\u4eca\u56de\u306f\u30cf\u30c3\u30ab\u30bd\u30f3\u3060\u3057\u3044\u3063\u304b\u306e\u7cbe\u795e\u3067\u5272\u611b\u3057\u307e\u3057\u305f\uff0e\ncharacterID\u306f\u6570\u5024\u306e\u914d\u5217\u3067\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\uff0e\n\u3053\u306e\u914d\u5217\u90e8\u5206\u304c\u5f8c\u306b\u3059\u3054\u304f\u82e6\u3057\u3080\u3053\u3068\u306b\u306a\u3063\u305f\u3093\u3067\u3059\u304c\u306d\uff0e\n\n2. app.js\u306e\u8ffd\u8a18\n\u3055\u304d\u307b\u3069\u3068\u540c\u69d8\uff0capp.js\u306b\uff0c\u5f8c\u306b\u4f5c\u6210\u3059\u308bzukan.js\u3092\u7528\u3044\u308b\u3053\u3068\u3092\u5ba3\u8a00\u3057\u307e\u3059\uff0e\n\napp.js\n// \u5272\u611b\n\n// ---- Renamed and Added by tdomen -----\nvar login = require('./routes/auth/login');\nvar zukan = require('./routes/zukan/zukan');\nvar http = require('http');\nvar mongoose = require('mongoose');\n// ----------------------------------------\n\n// \u5272\u611b\n\n// ---- Added by tdomen -----\n// \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u6a5f\u80fd\napp.use('/login', login);\napp.use('/zukan', zukan);\n// --------------------------\n\n// \u5272\u611b\n\n\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5074\u304b\u3089\u300chttp://\u301c:3000/zukan(:username)\u300d\u3068\u3044\u3046GET/POST\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u304d\u305f\u5834\u5408\uff0c\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u5148\u306b\u6307\u5b9a\u3057\u305froutes/zukan/zukan.js\u306b\u3066\u51e6\u7406\u3055\u308c\u307e\u3059\uff0e\n\u3053\u308c\u3067app.js\u306e\u7de8\u96c6\u306f\u7d42\u4e86\u3067\u3059\uff0e\n\n3. routes/zukan/zukan.js\u306e\u5b9f\u88c5\nzukan.js\u3067\u306f\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u304b\u3089\u304d\u305fGET/POST\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51e6\u7406\u3057\u307e\u3059\uff0e\nGET\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u5834\u5408\uff0c\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306f\u300chttp://\uff5e:3000/zukan:username\u300d\u3068\u3044\u3046\u3088\u3046\u306b\n\u81ea\u8eab\u306eusername\u3092URL\u306b\u4ed8\u3051\u3066\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u307e\u3059\uff0e\n\u30b5\u30fc\u30d0\u306f\u9001\u3089\u308c\u3066\u304d\u305fusername\u3092\u7528\u3044\u3066\u56f3\u9451\u7528DB\u3092\u691c\u7d22\u3057\uff0cusername\u3068\u4e00\u81f4\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u62bd\u51fa\u3057\u307e\u3059\uff0e\n\u305d\u3057\u3066\uff0c\u30e6\u30fc\u30b6\u304c\u767b\u9332\u3057\u3066\u3044\u305f\u5168\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092\u4e00\u6b21\u5143\u914d\u5217\u306b\u683c\u7d0d\u3057\uff0c\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306b\u8fd4\u3057\u307e\u3059\uff0e\n\nroutes/zukan/zukan.js\n\nvar express = require('express');\nvar bodyParser = require('body-parser');\nvar router = express.Router();\nvar mongoose = require('mongoose');\n\n// \u30e2\u30c7\u30eb\u306e\u5ba3\u8a00\nvar Zukan = require('../../models/zukan');\n\n// GET\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u304d\u305f\u6642\u306e\u51e6\u7406\n/*\n * Request URL: http://localhost:3000/zukan/:username\n */\nrouter.get('/:username', function(request, response){\n    console.log(\"catch the get request for zukan\");\n    response.setHeader('Content-Type', 'text/plain');\n\n    var username = request.params.username;\n    var characterID = {};\n    console.log(username);\n\n    Zukan.find({ \"username\" : username }, function(err, charId){\n    if (err) \n        console.log(err);\n    var cntID = 0;\n    for (var i=0; i < charId.length; i++){\n        for(var j=0; j < charId[i].characterID.length; j++){\n        characterID[\"id\"+cntID] = charId[i].characterID[j];\n        console.log(characterID[\"id\"+cntID]);\n        cntID++;\n        }\n    }\n    console.log(characterID);\n    response.json(characterID);\n    });\n});\n\n// \u4ee5\u4e0b\uff0cPOST\u306b\u5bfe\u3059\u308b\u8a18\u8ff0\u304c\u7d9a\u304f\n\n\n.get()\u306b\u3088\u3063\u3066GET\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5bfe\u5fdc\u3057\u307e\u3059\uff0e\n\u6700\u521d\u306bURL\u3092\u30d1\u30fc\u30b9\u3057\u3066username\u3092\u62bd\u51fa\u3057\u307e\u3059\uff0e\n.find()\u306b\u3088\u3063\u3066username\u3092\u30ad\u30fc\u306b\u56f3\u9451\u7528DB\u3092\u691c\u7d22\u3057\uff0c\u305d\u306e\u7d50\u679c\u3092\u7121\u540d\u95a2\u6570\u306e\u7b2c\u4e8c\u5f15\u6570charID\u306b\u683c\u7d0d\u3057\u307e\u3059\uff0e\n\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092\u3059\u3079\u3066\u62bd\u51fa\u3057\uff0c\u4e00\u6b21\u5143\u914d\u5217characterID[]\u306b\u683c\u7d0d\u3057\u307e\u3059\uff0e\n\u3059\u3079\u3066\u683c\u7d0d\u3057\u7d42\u308f\u3063\u305f\u3089\uff0c\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306bjson\u5f62\u5f0f\u3067\u8fd4\u3057\u307e\u3059\uff0e\n\u4ee5\u4e0a\u304czukan.js\u306eGET\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5bfe\u3059\u308b\u51e6\u7406\u3067\u3059\uff0e\n\u6b21\u306b\uff0cPOST\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5bfe\u3059\u308b\u51e6\u7406\u3092\u8a18\u8ff0\u3057\u3066\u3044\u304d\u307e\u3059\uff0e\nPOST\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u5834\u5408\uff0c\u3055\u304d\u307b\u3069\u3082\u8ff0\u3079\u305f\u3088\u3046\u306b\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u304b\u3089\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306b\u95a2\u3059\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u5165\u3063\u305fjson\u304c\u30b5\u30fc\u30d0\u306b\u6e21\u3055\u308c\u307e\u3059\uff0e\n\uff08\u8a73\u3057\u3044json\u306e\u4e2d\u8eab\u306f\u3054\u5f53\u5730\u30ad\u30e3\u30e9\u30ab\u30bf\u30ed\u30b0\u306e\u300c\u4f4d\u7f6e\u60c5\u5831\u304b\u3089\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u3092\u691c\u7d22\u300d\u306e\n\u3068\u3053\u308d\u3092\u898b\u3066\u304f\u3060\u3055\u3044\uff0e\uff09\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u304b\u3089\u6e21\u3055\u308c\u305fjson\u3092\u30d1\u30fc\u30b9\u3057\u3066\uff0c\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092\u53d6\u308a\u51fa\u3057\u307e\u3059\uff0e\n\u6b21\u306b\uff0cusername\u3067\u56f3\u9451\u7528DB\u5185\u3092\u691c\u7d22\u3057\uff0c\u30e6\u30fc\u30b6\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\uff0c\nusername\u3068\u53d6\u308a\u51fa\u3057\u305f\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092\u7528\u3044\u3066\u65b0\u898f\u767b\u9332\u3092\u884c\u3044\u307e\u3059\uff0e\n\u30e6\u30fc\u30b6\u304c\u3059\u3067\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\uff0c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5185\u306e\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u914d\u5217\u306b\n\u53d6\u308a\u51fa\u3057\u305f\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092\u8ffd\u52a0\u3057\u3066\u767b\u9332\u3057\u307e\u3059\uff0e\n\nroutes/zukan/zukan.js\n\n// GET\u306b\u5bfe\u3059\u308b\u51e6\u7406\uff08\u5272\u611b\uff09\n\n// POST\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u304d\u305f\u6642\u306e\u51e6\u7406\n/* POST\u5185\u5bb9\u306fJSON\u5f62\u5f0f\u3067\u98db\u3070\u3055\u308c\u308b\n * JSON format\n * {\n *  \"username\"    : \"String\" \n *  \"characterID\" : \"String\"\n * }\n *\n * Request URL: http://localhost:3000/zukan\n */\nrouter.post('/:username', function(request, response){\n    console.log(\"catch the post request for adding character ID\");\n    response.setHeader('Content-Type', 'text/plain');\n\n    var username = request.params.username;\n\n    Zukan.find({ \"username\" : username }, function(err, result){\n    if (err)\n        console.log(err);\n\n    // \u30d1\u30e9\u30e1\u30fc\u30bf\u540d\u3001username\u3068\u30ad\u30e3\u30e9ID\n    var jsonarray = request.body[\"result\"];\n    var idarray = [];\n    for (var i=0; i < jsonarray.length; i++){\n        idarray.push(jsonarray[i].id);\n    }\n\n    // \u65b0\u898f\u767b\u9332\n    if (result.length == 0){\n        var zukans = new Zukan();\n\n        zukans.username = username;\n        zukans.characterID = idarray;\n\n        console.log(zukans.username);\n        console.log(zukans.characterID);\n\n        // \u30e6\u30fc\u30b6\u60c5\u5831\u3092\u767b\u9332\u3059\u308b\n        zukans.save(function(err) {\n        if (err) console.log(err);\n        });  \n    }\n    // \u8ffd\u52a0\u767b\u9332\n    else{\n        result.map(function(doc){\n        var obj = doc.toObject();\n        for (var i=0; i < idarray.length; i++){\n            obj.characterID.push(idarray[i]);\n        }\n        Zukan.update({ \"username\" : username }, \n                 { $set: { characterID: obj.characterID} },\n                 function(err){\n                 if (err) console.log(err);\n                 Zukan.find({ \"username\" : username }, function(err, result){\n                     if (err)\n                     console.log(err);\n                 });\n                 });\n        });\n    }\n    });\n});\n\nmodule.exports = router;\n\n\n\u30dd\u30a4\u30f3\u30c8\u306f\u8ffd\u52a0\u767b\u9332\u306e\u3068\u3053\u308d\u3067\u3059\uff0e\u30b9\u30ad\u30fc\u30de\u3067characterID\u3092\u4e00\u6b21\u5143\u914d\u5217\u3068\u3057\u3066\u5b9a\u7fa9\u3057\u305f\u305f\u3081\uff0c\n\u4e00\u5ea6\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092toObject()\u3067\u53d6\u308a\u51fa\u3057\uff0c\u305d\u3053\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u5bb9\u306e\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092push\u3057\u3066\u3044\u307e\u3059\uff0e\n\u305d\u306e\u3042\u3068\u306fupdate\u3092\u304b\u3051\u3066\u3082\u3046\u4e00\u5ea6find()\u3067\u767b\u9332\u3067\u304d\u305f\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\uff0e\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5185\u306e\u4e00\u6b21\u5143\u914d\u5217\u306b\u3069\u3046\u3084\u3063\u3066\u8ffd\u52a0\u3059\u308b\u306e\u304b\u3067\u304b\u306a\u308a\u60a9\u3093\u3060\u306e\u3067\u3059\u304c\uff0c\n\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u306b\u7b54\u3048\u304c\u3042\u308a\u307e\u3057\u305f\uff0e\nMongoose \u306e Document \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u8ffd\u52a0\u3057\u3066\u306e JSON \u5316 - \u3068\u308a\u3042\u3048\u305a\u5099\u5fd8\u9332\u3068\u3057\u3066\u306f\u3058\u3081\u3088\u3046\u304b\u306a\uff1f\n\u3044\u3084\u3082\u3046\u307b\u3093\u3068\u3053\u306e\u90e8\u5206\u3067\u304b\u306a\u308a\u82e6\u52b4\u3057\u305f\u306e\u306b\uff0c\n\u3042\u3063\u3055\u308a\u89e3\u6c7a\u3057\u3066\u3066\u30cf\u30c3\u30ab\u30bd\u30f3\u4e2d\u5927\u58f0\u3042\u3052\u3066sugeeeee\u3063\u3066\u306a\u3063\u3066\u307e\u3057\u305f\uff0e\n\u5468\u308a\u306e\u30c1\u30fc\u30e0\u306e\u65b9\u3059\u307f\u307e\u305b\u3093\u3067\u3057\u305f\uff0e\n\u4ee5\u4e0a\u3067zukan.js\u306e\u5b9f\u88c5\u306f\u7d42\u4e86\u3067\u3059\uff0e\n\n\u304a\u308f\u308a\u306b\n\u4eca\u56de\u306f\u81ea\u8eab\u306e\u5099\u5fd8\u9332\u3068\u3057\u3066\u66f8\u3044\u305f\u306e\u3067\uff0c\u8aad\u307f\u306b\u304f\u3044\u611f\u3058\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\uff0e\n\u7d50\u5c40\u4f55\u66f8\u3044\u3066\u3042\u308b\u306e\u304b\u308f\u304b\u3089\u3093\u72b6\u614b\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\uff0c\u4eca\u5f8c\u3082\u3046\u5c11\u3057\u6574\u7406\u3057\u3066\u3044\u3053\u3046\u304b\u306a\u3068\u601d\u3044\u307e\u3059\uff0e\n\u3068\u3082\u3042\u308c\uff0c\u3084\u3063\u3071\u308a\u30cf\u30c3\u30ab\u30bd\u30f3\u3068\u304b\u306b\u53c2\u52a0\u3057\u306a\u3044\u3068\u65b0\u3057\u3044\u3053\u3068\u306b\u6311\u6226\u3059\u308b\u6a5f\u4f1a\u304c\u306a\u3044\u3067\u3059\u306d\uff0e\n\u6b21\u56de\u306f\u3069\u3093\u306a\u65b0\u3057\u3044\u3053\u3068\u3092\u3084\u308d\u3046\u304b\u8003\u3048\u4e2d\u306a\u306e\u3067\uff0c\u3053\u3093\u306a\u6280\u8853\u304a\u3082\u3057\u308d\u3044\u3088\u3063\u3066\u3053\u3068\u304c\u3042\u3063\u305f\u3089\u9023\u7d61\u304f\u3060\u3055\u3044\u304a\u9858\u3044\u3057\u307e\u3059\uff0e\n\u4eca\u56de\u4f5c\u6210\u3057\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u4ee5\u4e0b\u306b\u7f6e\u3044\u3066\u3042\u308b\u306e\u3067\uff0c\u624b\u3063\u53d6\u308a\u65e9\u304f\u52d5\u304b\u3057\u305f\u3044\u4eba\u306f\u3069\u3046\u305e\uff0e\nhttps://github.com/tdomen/node.js_mongodb_server\n\u301c\u30cf\u30c3\u30ab\u30bd\u30f3\u306b\u3066\u301c\n\u300cNode.js\u4f7f\u3063\u305f\u3089\u7c21\u5358\u306bDB\u3082\u64cd\u4f5c\u3067\u304d\u308b\u3089\u3057\u3044\u300d\n\u2192\u300c\u306a\u3093\u3060\u3088\u3053\u308c\u5168\u7136\u308f\u304b\u3093\u306d\u3048\u3088\u300d\n\nNode.js\u3068MongoDB\u3092\u4f7f\u3063\u3066json\u30b5\u30fc\u30d0\u3092\u3064\u304f\u308d\u3046\u3068\u3057\u305f\u3051\u3069\uff0c\n\u3044\u308d\u3093\u306a\u7f60\u304c\u3042\u3063\u305f\u306e\u3067\u30e1\u30e2\u3057\u3068\u304d\u307e\u3059\uff0e\n\n\u521d\u3081\u3066Node.js\u3084json\uff0cMongoDB\u4f7f\u3046\u3088\u3063\u3066\u4eba\u5411\u3051\u3067\u3059\uff0e\n\n\u57fa\u672c\u7684\u306b\u306f\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3057\u3066\u4f5c\u3063\u3066\u307e\u3059\uff0e\n\n* [Node.js + Express 4.x + MongoDB(Mongoose)\u3067RESTful\u306ajsonAPI\u30b5\u30fc\u30d0\u306e\u4f5c\u6210\u3092\u4e01\u5be7\u306b\u89e3\u8aac\u3059\u308b\uff0e+ \u30c6\u30b9\u30c8\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u7528\u3044\u305fAPI\u30c6\u30b9\u30c8\u307e\u3067 - Qiita](http://qiita.com/shopetan/items/58a62a366aac4f5faa20)\n* [\u30bc\u30ed\u304b\u3089\u306f\u3058\u3081\u308bExpress + Node.js\u3092\u4f7f\u3063\u305f\u30a2\u30d7\u30ea\u958b\u767a - Qiita](http://qiita.com/nkjm/items/723990c518acfee6e473)\n* [node.js \u304b\u3089 MongoDB \u306b\u30a2\u30af\u30bb\u30b9 (Mongoose \u306e\u7d39\u4ecb) - KrdLab's blog](http://krdlab.hatenablog.com/entry/20110317/1300367785)\n* [Mongoose \u306e Document \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u8ffd\u52a0\u3057\u3066\u306e JSON \u5316 - \u3068\u308a\u3042\u3048\u305a\u5099\u5fd8\u9332\u3068\u3057\u3066\u306f\u3058\u3081\u3088\u3046\u304b\u306a\uff1f](http://akisan123.hatenablog.com/entry/20110821/1313948021)\n\n# \u4eca\u56de\u3064\u304f\u308b\u3082\u306e\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u304cjson\u5f62\u5f0f\u3067\u30e6\u30fc\u30b6\u540d+password/API\u3067\u53d6\u5f97\u3057\u305f\u30ad\u30fc\u3092\u9001\u4fe1\u3057\u3066\u304f\u308b\u306e\u3067\uff0c\n\u305d\u308c\u3089\u3092DB\u306b\u3076\u3061\u8fbc\u3093\u3067\u53c2\u7167\u3057\u305f\u308aupdate\u3057\u305f\u308a\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306b\u8fd4\u3057\u305f\u308a\u3059\u308b\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3057\u307e\u3059\uff0e\n\u4eca\u56de\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5074\u304c\u4f7f\u7528\u3059\u308bAPI\u306f[\u3054\u5f53\u5730\u30ad\u30e3\u30e9\u30ab\u30bf\u30ed\u30b0](http://localchara.jp/services/api)\u3067\u3059\uff0e\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306f\u3054\u5f53\u5730\u30ad\u30e3\u30e9\u30ab\u30bf\u30ed\u30b0\u304b\u3089\u53d6\u5f97\u3057\u305f\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092\u30b5\u30fc\u30d0\u306bjson\u5f62\u5f0f\u3067POST\u9001\u4fe1\u3057\u307e\u3059\uff0e\n\n# \u74b0\u5883\n* Ubuntu 14.04 LTS\n* Node.js v4.4.7\n* express v4.x\n* MongoDB v2.2.11\n* Mongoose v2.15.8\n\nUbuntu\u4e0a\u3067\u958b\u767a\u3057\u3066\u3044\u307e\u3059\u304c\uff0c\u57fa\u672c\u7684\u306b\u30b3\u30de\u30f3\u30c9\u304c\u53e9\u3051\u305f\u3089Mac\u3067\u3082CentOS\u3067\u3082\u4f55\u3067\u3082\u3044\u3044\u3068\u601d\u3044\u307e\u3059\uff0e\n\n# \u958b\u767a\u306e\u6e96\u5099\n## \u5404\u7a2e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u3079\u304d\u3082\u306e\u306f\u4ee5\u4e0b\n\n* Node.js v4.4.7\n* express v4.x\n* MongoDB v2.x\n* Mongoose v2.x\n\n\u3044\u308d\u3093\u306a\u30b5\u30a4\u30c8\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u4ed5\u65b9\u304c\u7d39\u4ecb\u3055\u308c\u3066\u308b\u306e\u3067\u8a73\u7d30\u306f\u5272\u611b\uff0e\n\u305d\u3093\u306a\u3093\u3044\u3061\u3044\u3061\u898b\u308b\u306e\u9762\u5012\u3060\u3088\u3063\u3066\u4eba\u5411\u3051\u306b\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u4f5c\u3063\u305f\u306e\u3067\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\uff0e\uff08\u52d5\u4f5c\u78ba\u8a8d\u3057\u3066\u306a\u3044\u3051\u3069\uff09\nhttps://github.com/tdomen/node.js_mongodb_server/blob/master/nodejs_installer.sh\n\n## \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\n\u4eca\u56de\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u69cb\u6210\u3067\u958b\u767a\u3092\u884c\u3044\u307e\u3059\uff0e\n\n~~~\n$ tree .\nbackend\n|\n|--app.js\n|--package.json\n|--nodejs_installer.sh\n|--models\n|  |--user.js\n|  |--zukan.js\n|--routes\n   |--auth\n   |  |--login.js\n   |--zukan\n      |--zukan.js\n~~~\n\n`$ npm init`\u3057\u3068\u3051\u3070\u3060\u3044\u305f\u3044\u4e0a\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u306b\u306a\u308b\u3068\u601d\u3046\u306e\u3067\uff0c\n\u9069\u5b9c\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u8ffd\u52a0\u3057\u3066\u3044\u3063\u3066\u304f\u3060\u3055\u3044\uff0e\n\n## MongoDB\u306e\u8d77\u52d5\u30fb\u8a2d\u5b9a\nMongoDB\u306e\u8d77\u52d5\u306b\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u53e9\u304d\u307e\u3059\uff0e\n\n`$ sudo mongod --dbpath /var/db/mongo/`\n\n\u3053\u308c\u3067DB\u30b5\u30fc\u30d0\u304c\u8d77\u52d5\u3057\u307e\u3059\uff0e\nMongoDB\u306f\u5bfe\u8a71\u578b\u306e\u30b7\u30a7\u30eb\u3067\u64cd\u4f5c\u53ef\u80fd\u3067\u3059\uff0e\n`$ mongo`\u30b3\u30de\u30f3\u30c9\u3067mongo\u30b7\u30a7\u30eb\u304c\u8d77\u52d5\u3057\u307e\u3059\uff0e\n\n\u4eca\u56de\u306f\u300cbackend\u300d\u3068\u3044\u3046\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\u3057\uff0c\n\u305d\u306e\u4e2d\u306b\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\uff08\u30c6\u30fc\u30d6\u30eb\uff09\u3092\u5165\u308c\u3066\u3044\u304d\u307e\u3059\uff0e\n\u4eca\u56de\u306f\u300cusers\u300d\uff0c\u300czukans\u300d\u306e2\u3064\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\uff0e\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\u304a\u3088\u3073\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u4f5c\u6210\u306fmongo\u30b7\u30a7\u30eb\u4e0a\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\u3053\u3068\u3067\u53ef\u80fd\u3067\u3059\uff0e\n\n~~~\n$ mongo\n>use backend\n>db.createCollection('users')\n{ \"ok\" : 1 }\n>db.createCollection('zukans')\n{ \"ok\" : 1 }\n~~~\n\n\u4e0a\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u5f8c\uff0c\u300cshow collections\u300d\u30b3\u30de\u30f3\u30c9\u306b\u3088\u3063\u3066\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5185\u306e\u3059\u3079\u3066\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff0e\n\n~~~\n>show collections\nsystem.indexes\nusers\nzukans\n~~~\n\n\u300cusers\u300d\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3068\u300czukans\u300d\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e2\u3064\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308c\u3070OK\u3067\u3059\uff0e\n\uff08system.indexes\u306f\u6700\u521d\u304b\u3089\u3042\u308b\u307f\u305f\u3044\u3067\u3059\uff0e\uff09\n\u78ba\u8a8d\u304c\u3067\u304d\u305f\u3089\u300cquit()\u300d\u30b3\u30de\u30f3\u30c9\u3067mongo\u30b7\u30a7\u30eb\u3092\u7d42\u4e86\u3057\u307e\u3059\uff0e\n\n\u4ee5\u4e0a\u3067\u958b\u767a\u306e\u4e0b\u6e96\u5099\u306f\u7d42\u4e86\u3067\u3059\uff0e\n\n# \u30b5\u30fc\u30d0\u5b9f\u88c5\n\n\u4eca\u56de\u306e\u5b9f\u88c5\u306e\u6d41\u308c\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\uff0e\n\n1. \u30e6\u30fc\u30b6\u8a8d\u8a3c\u7528DB\u306e\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\n2. app.js\u306e\u8ffd\u8a18\n3. routes/auth/longin.js\u306e\u5b9f\u88c5\n4. API\u306b\u3088\u308b\u53d6\u5f97\u30ad\u30fc\u7528DB\u306e\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\n5. app.js\u306e\u8ffd\u8a18\n6. routes/zukan/zukan.js\u306e\u5b9f\u88c5\n\n\u6d41\u308c\u3092\u898b\u3066\u3082\u5206\u304b\u308b\u3068\u304a\u308a\uff0c\u57fa\u672c\u306f1. \u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\uff0c2. app.js\u306e\u8ffd\u8a18\uff0c3. \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u5148\u306e\u5b9f\u88c5\uff0c\u306e3\u30b9\u30c6\u30c3\u30d7\u3067\u3059\uff0e\n\n\u305d\u308c\u3067\u306f\u307e\u305a\u30e6\u30fc\u30b6\u8a8d\u8a3c\u306e\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\uff0e\n\n## \u30e6\u30fc\u30b6\u8a8d\u8a3c\u6a5f\u80fd\u306e\u5b9f\u88c5\n\n\u672c\u9805\u3067\u306f\u30e6\u30fc\u30b6\u8a8d\u8a3c\u306e\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u307e\u3059\uff0e\n\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306fPOST\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u3088\u3063\u3066\u8a8d\u8a3c\u3092\u8981\u6c42\u3057\u307e\u3059\uff0e\n\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u5bb9\u306fJSON\u5f62\u5f0f\u3067\u8a18\u8ff0\u3055\u308c\u3066\u3044\u307e\u3059\uff0e\n\n```json:\u30e6\u30fc\u30b6\u8a8d\u8a3c\u6642\u306ePOST\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u5bb9\n{\n    \"username\" : String\n    \"password\" : String\n}\n```\n\n\u30b5\u30fc\u30d0\u306fusername\u3067DB\u306eusers\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u53c2\u7167\u3057\uff0c\nusername\u304c\u5b58\u5728\u3057\u305f\u5834\u5408\u306fpassword\u3068\u7167\u5408\u3057\u3066\u305d\u306e\u7d50\u679c\u3092\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306b\u8fd4\u3057\u307e\u3059\uff0e\nusername\u304c\u5b58\u5728\u3057\u306a\u304b\u3063\u305f\u5834\u5408\uff0cusername\u3068password\u3092\u65b0\u898f\u767b\u9332\u3057\u307e\u3059\uff0e\n\n### 1. \u30e6\u30fc\u30b6\u8a8d\u8a3c\u7528DB\u306e\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\n\n\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\u306f/models\u306e\u4e2d\u306b\u5b9a\u7fa9\u3057\u307e\u3059\uff0e\n\u4eca\u56de\uff0c\u30e6\u30fc\u30b6\u8a8d\u8a3c\u7528\u306e\u30b9\u30ad\u30fc\u30de\u306f/models/user.js\u306b\u8a18\u8ff0\u3057\u307e\u3059\uff0e\n\n```js:/models/user.js\n// /backend/models/user.js\n\nvar mongoose = require('mongoose');\nvar Schema = mongoose.Schema;\n\nvar User = new Schema({\n    username : { type: String, require: true, unique: true }, \n    password : { type: String, require: true }\n});\n\nmodule.exports = mongoose.model('user', User);\n```\n\nusername\u306f\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u60f3\u5b9a\u3057\u3066\u3044\u308b\u305f\u3081\uff0cunique\u306b\u3057\u3066\u3044\u307e\u3059\uff0e\n\n### 2. app.js\u306e\u8ffd\u8a18\n\napp.js\u306b\uff0c\u5f8c\u306b\u4f5c\u6210\u3059\u308blogin.js\u3092\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u5148\u306b\u6307\u5b9a\u3057\u307e\u3059\uff0e\n\n```js:app.js\nvar express = require('express');\nvar path = require('path');\nvar favicon = require('serve-favicon');\nvar logger = require('morgan');\nvar cookieParser = require('cookie-parser');\nvar bodyParser = require('body-parser');\n\n// ---- Renamed and Added by tdomen -----\nvar login = require('./routes/auth/login');\nvar http = require('http');\nvar mongoose = require('mongoose');\n// ----------------------------------------\n\nvar app = express();\n\n// view engine setup\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'jade');\n\n// uncomment after placing your favicon in /public\n//app.use(favicon(path.join(__dirname, 'public', 'favicon.ico')));\n\n// ---- Added by tdomen -----\n// \u30dd\u30fc\u30c8\u8a2d\u5b9a\napp.set('port', process.env.PORT || 3000);\n// --------------------------\n\napp.use(logger('dev'));\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json());\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\n\n// ---- Added by tdomen -----\n// \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u6a5f\u80fd\napp.use('/login', login);\n// --------------------------\n\n// catch 404 and forward to error handler\napp.use(function(req, res, next) {\n    var err = new Error('Not Found');\n    err.status = 404;\n    next(err);\n});\n\n// error handlers\n// development error handler\n// will print stacktrace\nif (app.get('env') === 'development') {\n    app.use(function(err, req, res, next) {\n      res.status(err.status || 500);\n      res.render('error', {\n\tmessage: err.message,\n\terror: err\n    });\n  });\n}\n\n// production error handler\n// no stacktraces leaked to user\napp.use(function(err, req, res, next) {\n    res.status(err.status || 500);\n    res.render('error', {\n\tmessage: err.message,\n\terror: {}\n    });\n});\n\n// \u30b5\u30fc\u30d0\u7acb\u3061\u4e0a\u3052\nhttp.createServer(app).listen(app.get('port'), function(){\n    console.log('Express server listening on port ' + app.get('port'));\n    mongoose.connect('mongodb://localhost/backend');\n});\n// ------------------------------------------\n\nmodule.exports = app;\n```\n\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5074\u304b\u3089\u300chttp://\u301c:3000/login\u300d\u3068\u3044\u3046\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u304d\u305f\u5834\u5408\uff0c\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u5148\u306b\u6307\u5b9a\u3057\u305froutes/auth/login.js\u306b\u3066\u51e6\u7406\u3055\u308c\u307e\u3059\uff0e\n\napp.js\u306e\u7de8\u96c6\u306f\u3068\u308a\u3042\u3048\u305a\u7d42\u308f\u308a\u3067\u3059\uff0e\n\n### 3. routes/auth/longin.js\u306e\u5b9f\u88c5\n\nlogin.js\u3067\u306f\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u304b\u3089\u6765\u305fPOST\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51e6\u7406\u3057\u307e\u3059\uff0e\n\nPOST\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5074\u304b\u3089\u9001\u4fe1\u3055\u308c\u305fusername\u30ad\u30fc\u3067DB\u5185\u3092\u691c\u7d22\u3057\uff0c\n\u691c\u7d22\u306b\u5f15\u3063\u304b\u304b\u3089\u306a\u304b\u3063\u305f\u5834\u5408\u306fusername\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3067\u65b0\u898f\u767b\u9332\u3092\u884c\u3044\u307e\u3059\uff0e\n\u691c\u7d22\u306b\u5f15\u3063\u304b\u304b\u3063\u305f\u5834\u5408\u306f\uff0cDB\u5185\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u5bb9\u3092\u7167\u5408\u3057\uff0c\n\u4e00\u81f4\u3057\u3066\u3044\u308c\u3070true\u3092\uff0c\u305d\u3046\u3067\u306a\u3051\u308c\u3070false\u3092\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306b\u8fd4\u3057\u307e\u3059\uff0e\n\n```js:routes/auth/login.js\nvar express = require('express');\nvar bodyParser = require('body-parser');\nvar router = express.Router();\nvar mongoose = require('mongoose');\n\n// \u30e2\u30c7\u30eb\u306e\u5ba3\u8a00\nvar User = require('../../models/user');\n\n// POST\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u304d\u305f\u6642\u306e\u51e6\u7406\n/* POST\u5185\u5bb9\u306fJSON\u5f62\u5f0f\u3067\u98db\u3070\u3055\u308c\u308b\n * JSON format\n * {\n *  \"username\" : String\n *  \"password\" : String\n * }\n */\nrouter.post('/', function(request, response){\n    console.log(\"catch the post request\");\n    response.setHeader('Content-Type', 'text/plain');\n\n    // \u30d1\u30e9\u30e1\u30fc\u30bf\u540d\u3001username\u3068pass\u3092\u51fa\u529b\n    console.log(request.body.username);\n    console.log(request.body.password);\n\n    var username = request.body.username;\n    var password = request.body.password;\n\n    User.find({ \"username\" : username }, function(err, result){\n\tif (err)\n\t    console.log(err);\n\n\t// \u65b0\u898f\u767b\u9332\n\tif (result.length == 0){\n\t    var user = new User();\n\n\t    user.username = username;\n\t    user.password = password;\n\n\t    user.save(function(err){\n\t\tif (err) console.log(err);\n\t\tresponse.send(\"new_created\");\n\t    });\n\t}\n\t// username\u304cDB\u306b\u5b58\u5728\u3057\u305f\u5834\u5408\n\telse{\n\t    if (result[0].password == password)\n\t\tresponse.send(\"true\");\n\t    else\n\t\tresponse.send(\"false\");\n\t}\n    });\n});\n\nmodule.exports = router;\n```\n\nUser.find\u306b\u3066\uff0c\u7b2c\u4e00\u5f15\u6570\u306b\u691c\u7d22\u3059\u308busername\u30ad\u30fc\u3068POST\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u306eusername\u3092\u53d6\u308a\u307e\u3059\uff0e\n\u305d\u306e\u7d50\u679c\u306f\u7b2c\u4e8c\u5f15\u6570\u306e\u7121\u540d\u95a2\u6570`function(err, result)`\u306e\u7b2c\u4e8c\u5f15\u6570\u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\uff0e\n\nresult.lentgh\u304c0\u3067\u3042\u3063\u305f\u5834\u5408\uff0c\u691c\u7d22\u6761\u4ef6\u306b\u4e00\u81f4\u305b\u305a\uff0c\nDB\u5185\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u5bb9\u306eusername\u304c\u5b58\u5728\u3057\u306a\u3044\u3053\u3068\u3092\u610f\u5473\u3059\u308b\u306e\u3067\uff0c\u65b0\u898f\u767b\u9332\u306e\u30d5\u30ed\u30fc\u306b\u5165\u3063\u3066\u3044\u304d\u307e\u3059\uff0e\n\u305d\u3046\u3067\u306a\u304b\u3063\u305f\u5834\u5408\u306f\uff0cresult\u914d\u5217\u306e0\u756a\u8981\u7d20\n\uff08\u30b9\u30ad\u30fc\u30de\u3067username\u3092unique\u6307\u5b9a\u3057\u3066\u3044\u308b\u305f\u3081\uff0c\u5fc5\u305a\u8981\u7d20\u306f1\u3064\u306e\u307f\u3068\u306a\u308b\u306f\u305a\uff09\u306e\npassword\u3068\u30ea\u30af\u30a8\u30b9\u30c8\u5185password\u3092\u7167\u5408\u3057\uff0c\u305d\u306e\u6210\u5426\u3092\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306b\u8fd4\u5374\u3057\u3066\u3044\u307e\u3059\uff0e\n\n\u4ee5\u4e0a\u3067\u30e6\u30fc\u30b6\u8a8d\u8a3c\u6a5f\u80fd\u306f\u5b9f\u88c5\u7d42\u4e86\u3067\u3059\uff0e\n\uff08\u4eca\u56de\u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u7b49\u306f\u884c\u3063\u3066\u3044\u307e\u305b\u3093\uff0e\u305d\u306e\u3042\u305f\u308a\u3092\u77e5\u308a\u305f\u3044\u4eba\u306f[Node.js+Express+MongoDB\u3067Session\u3092\u5229\u7528\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u6a5f\u80fd\u3092\u5b9f\u88c5 - Qiita](http://qiita.com/n0bisuke/items/2514197d8791abbc7d87)\u3092\u53c2\u8003\u306b\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff0e\uff09\n\n## \u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092\u30e6\u30fc\u30b6\u3054\u3068\u306b\u4fdd\u5b58/\u53d6\u5f97\u3059\u308b\u56f3\u9451\u6a5f\u80fd\u306e\u5b9f\u88c5\n\n\u672c\u9805\u3067\u306f\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u304b\u3089\u9001\u3089\u308c\u308b\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092\n\u30e6\u30fc\u30b6\u3054\u3068\u306b\u4fdd\u5b58\uff0c\u53d6\u5f97\u3059\u308b\u56f3\u9451\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u307e\u3059\uff0e\uff08\u30dd\u30b1\u30e2\u30f3\u56f3\u9451\u306e\u30a4\u30e1\u30fc\u30b8\u3067\u3059\uff09\n\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306fGET/POST\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u3088\u3063\u3066\uff0c\u4eca\u307e\u3067\u4fdd\u5b58\u3057\u3066\u304d\u305fID\u3092\u53d6\u5f97\u3059\u308b\u304b\uff0c\nDB\u306b\u4fdd\u5b58\u3059\u308b\u8981\u6c42\u3092\u884c\u3044\u307e\u3059\uff0e\n\nDB\u306b\u4fdd\u5b58\u3092\u8981\u6c42\u3059\u308bPOST\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u5bb9\u306fJSON\u5f62\u5f0f\u3067\u8a18\u8ff0\u3055\u308c\u3066\u3044\u307e\u3059\uff0e\n\u4eca\u56de\uff0c\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306f[\u3054\u5f53\u5730\u30ad\u30e3\u30e9\u30ab\u30bf\u30ed\u30b0](http://localchara.jp/services/api)\u3067\u53d6\u5f97\u3057\u305f\nJSON\u3092\u30b5\u30fc\u30d0\u306b\u305d\u306e\u307e\u307e\u6e21\u3057\u307e\u3059\uff0e\n\n```json:POST\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u5bb9\n{\n    \"username\" : String\n    \"characterID\" : String\n}\n```\n\n\u30b5\u30fc\u30d0\u306fusername\u3067DB\u3092\u53c2\u7167\u3057\uff0cPOST\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u306echaracterID\u3092\u8ffd\u52a0\u767b\u9332\u3057\u307e\u3059\uff0e\n\n### 1. \u56f3\u9451\u7528DB\u306e\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\n\n\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\u306f\u30e6\u30fc\u30b6\u8a8d\u8a3c\u7528\u3068\u540c\u3058\u304f\uff0c/models\u76f4\u4e0b\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u304d\u307e\u3059\uff0e\n\u4eca\u56de\uff0c\u56f3\u9451\u7528\u306e\u30b9\u30ad\u30fc\u30de\u3092/models/zukan.js\u306b\u8a18\u8ff0\u3057\u307e\u3059\uff0e\n\n```js:/models/user.js\n// /backend/models/zukan.js\n\nvar mongoose = require('mongoose'); \nvar Schema = mongoose.Schema; \nvar Zukan = new Schema({ \n    username : { type: String },  \n    characterID : { type: [Number] } \n}); \n \nmodule.exports = mongoose.model('zukan', Zukan); \n```\n\nusername\u306f\u672c\u6765\uff0c\u30e6\u30fc\u30b6\u8a8d\u8a3c\u7528\u306eDB\u3068\u7d44\u307f\u5408\u308f\u305b\u3066\u304a\u304f\u3068\u3088\u3044\u3067\u3059\uff0e\nDB\u8a2d\u8a08\u306f\u3061\u3083\u3093\u3068\u3084\u308b\u3079\u304d\u3067\u3059\u304c\uff0c\u307e\u3042\u4eca\u56de\u306f\u30cf\u30c3\u30ab\u30bd\u30f3\u3060\u3057\u3044\u3063\u304b\u306e\u7cbe\u795e\u3067\u5272\u611b\u3057\u307e\u3057\u305f\uff0e\n\ncharacterID\u306f\u6570\u5024\u306e\u914d\u5217\u3067\u30b9\u30ad\u30fc\u30de\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\uff0e\n\u3053\u306e\u914d\u5217\u90e8\u5206\u304c\u5f8c\u306b\u3059\u3054\u304f\u82e6\u3057\u3080\u3053\u3068\u306b\u306a\u3063\u305f\u3093\u3067\u3059\u304c\u306d\uff0e\n\n### 2. app.js\u306e\u8ffd\u8a18\n\n\u3055\u304d\u307b\u3069\u3068\u540c\u69d8\uff0capp.js\u306b\uff0c\u5f8c\u306b\u4f5c\u6210\u3059\u308bzukan.js\u3092\u7528\u3044\u308b\u3053\u3068\u3092\u5ba3\u8a00\u3057\u307e\u3059\uff0e\n\n```js:app.js\n// \u5272\u611b\n\n// ---- Renamed and Added by tdomen -----\nvar login = require('./routes/auth/login');\nvar zukan = require('./routes/zukan/zukan');\nvar http = require('http');\nvar mongoose = require('mongoose');\n// ----------------------------------------\n\n// \u5272\u611b\n\n// ---- Added by tdomen -----\n// \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u6a5f\u80fd\napp.use('/login', login);\napp.use('/zukan', zukan);\n// --------------------------\n\n// \u5272\u611b\n```\n\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5074\u304b\u3089\u300chttp://\u301c:3000/zukan(:username)\u300d\u3068\u3044\u3046GET/POST\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u304d\u305f\u5834\u5408\uff0c\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u5148\u306b\u6307\u5b9a\u3057\u305froutes/zukan/zukan.js\u306b\u3066\u51e6\u7406\u3055\u308c\u307e\u3059\uff0e\n\n\u3053\u308c\u3067app.js\u306e\u7de8\u96c6\u306f\u7d42\u4e86\u3067\u3059\uff0e\n\n### 3. routes/zukan/zukan.js\u306e\u5b9f\u88c5\n\nzukan.js\u3067\u306f\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u304b\u3089\u304d\u305fGET/POST\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51e6\u7406\u3057\u307e\u3059\uff0e\n\nGET\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u5834\u5408\uff0c\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306f\u300chttp://\uff5e:3000/zukan:username\u300d\u3068\u3044\u3046\u3088\u3046\u306b\n\u81ea\u8eab\u306eusername\u3092URL\u306b\u4ed8\u3051\u3066\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u307e\u3059\uff0e\n\u30b5\u30fc\u30d0\u306f\u9001\u3089\u308c\u3066\u304d\u305fusername\u3092\u7528\u3044\u3066\u56f3\u9451\u7528DB\u3092\u691c\u7d22\u3057\uff0cusername\u3068\u4e00\u81f4\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u62bd\u51fa\u3057\u307e\u3059\uff0e\n\u305d\u3057\u3066\uff0c\u30e6\u30fc\u30b6\u304c\u767b\u9332\u3057\u3066\u3044\u305f\u5168\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092\u4e00\u6b21\u5143\u914d\u5217\u306b\u683c\u7d0d\u3057\uff0c\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306b\u8fd4\u3057\u307e\u3059\uff0e\n\n```js:routes/zukan/zukan.js\n\nvar express = require('express');\nvar bodyParser = require('body-parser');\nvar router = express.Router();\nvar mongoose = require('mongoose');\n\n// \u30e2\u30c7\u30eb\u306e\u5ba3\u8a00\nvar Zukan = require('../../models/zukan');\n\n// GET\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u304d\u305f\u6642\u306e\u51e6\u7406\n/*\n * Request URL: http://localhost:3000/zukan/:username\n */\nrouter.get('/:username', function(request, response){\n    console.log(\"catch the get request for zukan\");\n    response.setHeader('Content-Type', 'text/plain');\n\n    var username = request.params.username;\n    var characterID = {};\n    console.log(username);\n\n    Zukan.find({ \"username\" : username }, function(err, charId){\n\tif (err) \n\t    console.log(err);\n\tvar cntID = 0;\n\tfor (var i=0; i < charId.length; i++){\n\t    for(var j=0; j < charId[i].characterID.length; j++){\n\t\tcharacterID[\"id\"+cntID] = charId[i].characterID[j];\n\t\tconsole.log(characterID[\"id\"+cntID]);\n\t\tcntID++;\n\t    }\n\t}\n\tconsole.log(characterID);\n\tresponse.json(characterID);\n    });\n});\n\n// \u4ee5\u4e0b\uff0cPOST\u306b\u5bfe\u3059\u308b\u8a18\u8ff0\u304c\u7d9a\u304f\n```\n\n.get()\u306b\u3088\u3063\u3066GET\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5bfe\u5fdc\u3057\u307e\u3059\uff0e\n\u6700\u521d\u306bURL\u3092\u30d1\u30fc\u30b9\u3057\u3066username\u3092\u62bd\u51fa\u3057\u307e\u3059\uff0e\n.find()\u306b\u3088\u3063\u3066username\u3092\u30ad\u30fc\u306b\u56f3\u9451\u7528DB\u3092\u691c\u7d22\u3057\uff0c\u305d\u306e\u7d50\u679c\u3092\u7121\u540d\u95a2\u6570\u306e\u7b2c\u4e8c\u5f15\u6570charID\u306b\u683c\u7d0d\u3057\u307e\u3059\uff0e\n\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092\u3059\u3079\u3066\u62bd\u51fa\u3057\uff0c\u4e00\u6b21\u5143\u914d\u5217characterID[]\u306b\u683c\u7d0d\u3057\u307e\u3059\uff0e\n\u3059\u3079\u3066\u683c\u7d0d\u3057\u7d42\u308f\u3063\u305f\u3089\uff0c\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306bjson\u5f62\u5f0f\u3067\u8fd4\u3057\u307e\u3059\uff0e\n\n\u4ee5\u4e0a\u304czukan.js\u306eGET\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5bfe\u3059\u308b\u51e6\u7406\u3067\u3059\uff0e\n\n\u6b21\u306b\uff0cPOST\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5bfe\u3059\u308b\u51e6\u7406\u3092\u8a18\u8ff0\u3057\u3066\u3044\u304d\u307e\u3059\uff0e\nPOST\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u5834\u5408\uff0c\u3055\u304d\u307b\u3069\u3082\u8ff0\u3079\u305f\u3088\u3046\u306b\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u304b\u3089\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306b\u95a2\u3059\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u5165\u3063\u305fjson\u304c\u30b5\u30fc\u30d0\u306b\u6e21\u3055\u308c\u307e\u3059\uff0e\n\uff08\u8a73\u3057\u3044json\u306e\u4e2d\u8eab\u306f[\u3054\u5f53\u5730\u30ad\u30e3\u30e9\u30ab\u30bf\u30ed\u30b0](http://localchara.jp/services/api)\u306e\u300c\u4f4d\u7f6e\u60c5\u5831\u304b\u3089\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u3092\u691c\u7d22\u300d\u306e\n\u3068\u3053\u308d\u3092\u898b\u3066\u304f\u3060\u3055\u3044\uff0e\uff09\n\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u304b\u3089\u6e21\u3055\u308c\u305fjson\u3092\u30d1\u30fc\u30b9\u3057\u3066\uff0c\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092\u53d6\u308a\u51fa\u3057\u307e\u3059\uff0e\n\u6b21\u306b\uff0cusername\u3067\u56f3\u9451\u7528DB\u5185\u3092\u691c\u7d22\u3057\uff0c\u30e6\u30fc\u30b6\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\uff0c\nusername\u3068\u53d6\u308a\u51fa\u3057\u305f\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092\u7528\u3044\u3066\u65b0\u898f\u767b\u9332\u3092\u884c\u3044\u307e\u3059\uff0e\n\u30e6\u30fc\u30b6\u304c\u3059\u3067\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\uff0c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5185\u306e\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u914d\u5217\u306b\n\u53d6\u308a\u51fa\u3057\u305f\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092\u8ffd\u52a0\u3057\u3066\u767b\u9332\u3057\u307e\u3059\uff0e\n\n```js:routes/zukan/zukan.js\n\n// GET\u306b\u5bfe\u3059\u308b\u51e6\u7406\uff08\u5272\u611b\uff09\n\n// POST\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u304d\u305f\u6642\u306e\u51e6\u7406\n/* POST\u5185\u5bb9\u306fJSON\u5f62\u5f0f\u3067\u98db\u3070\u3055\u308c\u308b\n * JSON format\n * {\n *  \"username\"    : \"String\" \n *  \"characterID\" : \"String\"\n * }\n *\n * Request URL: http://localhost:3000/zukan\n */\nrouter.post('/:username', function(request, response){\n    console.log(\"catch the post request for adding character ID\");\n    response.setHeader('Content-Type', 'text/plain');\n\n    var username = request.params.username;\n\n    Zukan.find({ \"username\" : username }, function(err, result){\n\tif (err)\n\t    console.log(err);\n\n\t// \u30d1\u30e9\u30e1\u30fc\u30bf\u540d\u3001username\u3068\u30ad\u30e3\u30e9ID\n\tvar jsonarray = request.body[\"result\"];\n\tvar idarray = [];\n\tfor (var i=0; i < jsonarray.length; i++){\n\t    idarray.push(jsonarray[i].id);\n\t}\n\n\t// \u65b0\u898f\u767b\u9332\n\tif (result.length == 0){\n\t    var zukans = new Zukan();\n\n\t    zukans.username = username;\n\t    zukans.characterID = idarray;\n\t    \n\t    console.log(zukans.username);\n\t    console.log(zukans.characterID);\n\n\t    // \u30e6\u30fc\u30b6\u60c5\u5831\u3092\u767b\u9332\u3059\u308b\n\t    zukans.save(function(err) {\n\t\tif (err) console.log(err);\n\t    });  \n\t}\n\t// \u8ffd\u52a0\u767b\u9332\n\telse{\n\t    result.map(function(doc){\n\t\tvar obj = doc.toObject();\n\t\tfor (var i=0; i < idarray.length; i++){\n\t\t    obj.characterID.push(idarray[i]);\n\t\t}\n\t\tZukan.update({ \"username\" : username }, \n\t\t\t     { $set: { characterID: obj.characterID} },\n\t\t\t     function(err){\n\t\t\t\t if (err) console.log(err);\n\t\t\t\t Zukan.find({ \"username\" : username }, function(err, result){\n\t\t\t\t     if (err)\n\t\t\t\t\t console.log(err);\n\t\t\t\t });\n\t\t\t     });\n\t    });\n\t}\n    });\n});\n\nmodule.exports = router;\n```\n\n\u30dd\u30a4\u30f3\u30c8\u306f\u8ffd\u52a0\u767b\u9332\u306e\u3068\u3053\u308d\u3067\u3059\uff0e\u30b9\u30ad\u30fc\u30de\u3067characterID\u3092\u4e00\u6b21\u5143\u914d\u5217\u3068\u3057\u3066\u5b9a\u7fa9\u3057\u305f\u305f\u3081\uff0c\n\u4e00\u5ea6\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092toObject()\u3067\u53d6\u308a\u51fa\u3057\uff0c\u305d\u3053\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u5185\u5bb9\u306e\u30ad\u30e3\u30e9\u30af\u30bf\u30fcID\u3092push\u3057\u3066\u3044\u307e\u3059\uff0e\n\u305d\u306e\u3042\u3068\u306fupdate\u3092\u304b\u3051\u3066\u3082\u3046\u4e00\u5ea6find()\u3067\u767b\u9332\u3067\u304d\u305f\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\uff0e\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5185\u306e\u4e00\u6b21\u5143\u914d\u5217\u306b\u3069\u3046\u3084\u3063\u3066\u8ffd\u52a0\u3059\u308b\u306e\u304b\u3067\u304b\u306a\u308a\u60a9\u3093\u3060\u306e\u3067\u3059\u304c\uff0c\n\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u306b\u7b54\u3048\u304c\u3042\u308a\u307e\u3057\u305f\uff0e\n[Mongoose \u306e Document \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u8ffd\u52a0\u3057\u3066\u306e JSON \u5316 - \u3068\u308a\u3042\u3048\u305a\u5099\u5fd8\u9332\u3068\u3057\u3066\u306f\u3058\u3081\u3088\u3046\u304b\u306a\uff1f](http://akisan123.hatenablog.com/entry/20110821/1313948021)\n\n\u3044\u3084\u3082\u3046\u307b\u3093\u3068\u3053\u306e\u90e8\u5206\u3067\u304b\u306a\u308a\u82e6\u52b4\u3057\u305f\u306e\u306b\uff0c\n\u3042\u3063\u3055\u308a\u89e3\u6c7a\u3057\u3066\u3066\u30cf\u30c3\u30ab\u30bd\u30f3\u4e2d\u5927\u58f0\u3042\u3052\u3066sugeeeee\u3063\u3066\u306a\u3063\u3066\u307e\u3057\u305f\uff0e\n\u5468\u308a\u306e\u30c1\u30fc\u30e0\u306e\u65b9\u3059\u307f\u307e\u305b\u3093\u3067\u3057\u305f\uff0e\n\n\u4ee5\u4e0a\u3067zukan.js\u306e\u5b9f\u88c5\u306f\u7d42\u4e86\u3067\u3059\uff0e\n\n# \u304a\u308f\u308a\u306b\n\n\u4eca\u56de\u306f\u81ea\u8eab\u306e\u5099\u5fd8\u9332\u3068\u3057\u3066\u66f8\u3044\u305f\u306e\u3067\uff0c\u8aad\u307f\u306b\u304f\u3044\u611f\u3058\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\uff0e\n\u7d50\u5c40\u4f55\u66f8\u3044\u3066\u3042\u308b\u306e\u304b\u308f\u304b\u3089\u3093\u72b6\u614b\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\uff0c\u4eca\u5f8c\u3082\u3046\u5c11\u3057\u6574\u7406\u3057\u3066\u3044\u3053\u3046\u304b\u306a\u3068\u601d\u3044\u307e\u3059\uff0e\n\n\u3068\u3082\u3042\u308c\uff0c\u3084\u3063\u3071\u308a\u30cf\u30c3\u30ab\u30bd\u30f3\u3068\u304b\u306b\u53c2\u52a0\u3057\u306a\u3044\u3068\u65b0\u3057\u3044\u3053\u3068\u306b\u6311\u6226\u3059\u308b\u6a5f\u4f1a\u304c\u306a\u3044\u3067\u3059\u306d\uff0e\n\u6b21\u56de\u306f\u3069\u3093\u306a\u65b0\u3057\u3044\u3053\u3068\u3092\u3084\u308d\u3046\u304b\u8003\u3048\u4e2d\u306a\u306e\u3067\uff0c\u3053\u3093\u306a\u6280\u8853\u304a\u3082\u3057\u308d\u3044\u3088\u3063\u3066\u3053\u3068\u304c\u3042\u3063\u305f\u3089\u9023\u7d61\u304f\u3060\u3055\u3044\u304a\u9858\u3044\u3057\u307e\u3059\uff0e\n\n\u4eca\u56de\u4f5c\u6210\u3057\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u4ee5\u4e0b\u306b\u7f6e\u3044\u3066\u3042\u308b\u306e\u3067\uff0c\u624b\u3063\u53d6\u308a\u65e9\u304f\u52d5\u304b\u3057\u305f\u3044\u4eba\u306f\u3069\u3046\u305e\uff0e\nhttps://github.com/tdomen/node.js_mongodb_server\n\n\n\n\n\n\n\n", "tags": ["Node.js", "express4", "MongoDB", "mongoose", "JSON"]}