{"context": "\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u63a1\u7528\u3059\u308b\u7406\u7531\u3001\u6b21\u306bClean Architecture\u306e\u6982\u8981\u3001\u6700\u5f8c\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u69cb\u7bc9\u3092\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u3053\u306e\u5f8c\u8a73\u3057\u304f\u898b\u3066\u3044\u304d\u307e\u3059\u304c\u3001Clean architecture\u306e\u6982\u5ff5\u306f\u6bd4\u8f03\u7684\u30b7\u30f3\u30d7\u30eb\u3067\u308f\u304b\u308a\u3084\u3059\u3044\u3082\u306e\u3060\u3068\u601d\u3044\u307e\u3059\u3002\u3057\u304b\u3057\u5b9f\u969b\u30b3\u30fc\u30c9\u306b\u843d\u3068\u3057\u8fbc\u3093\u3060\u6642\u3001\u3053\u308c\u3063\u3066\u3069\u3046\u5b9f\u73fe\u3059\u308c\u3070\u3044\u3044\u306e\u304b\u306a\uff1f\u3068\u8ff7\u3046\u3053\u3068\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u81ea\u5206\u306e\u7406\u89e3\u3082\u6df1\u3081\u308b\u305f\u3081\u306b\u5b9f\u969b\u306bAPI Server\u3092\u69cb\u7bc9\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u306e\u63a1\u7528\u4e8b\u4f8b\u3092\u3042\u307e\u308a\u307f\u306a\u3044\u306e\u3067\u8ab0\u304b\u306e\u53c2\u8003\u306b\u306a\u308c\u3070\u3044\u3044\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u3001Go\u8a00\u8a9e\u3067\u3059\u3002\n\n\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u63a1\u7528\u3059\u308b\u7406\u7531\n\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u671f\u5f85\u3059\u308b\u3053\u3068\u306f\u3001\u95a2\u5fc3\u306e\u5206\u96e2\u3067\u3059\u3002\n\u95a2\u5fc3\u306e\u5206\u96e2\u3092\u6b63\u3057\u304f\u884c\u3046\u3053\u3068\u3067\u3001\u6b21\u306e\u3088\u3046\u306a\u30e1\u30ea\u30c3\u30c8\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u518d\u5229\u7528\u6027\u306e\u9ad8\u3044\u8a2d\u8a08\u306b\u306a\u308a\u751f\u7523\u6027\u304c\u5411\u4e0a\u3059\u308b\n\u30b3\u30fc\u30c9\u306e\u53ef\u8aad\u6027\u304c\u4e0a\u304c\u308a\u3001\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u304c\u5bb9\u6613\u306b\u306a\u308b\n\u5909\u5316\u306b\u5f37\u3044\u8a2d\u8a08\u306b\u306a\u308b\n\u5171\u901a\u8a8d\u8b58\u3092\u6301\u3066\u308b\n\n\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u306f\u3001MVC\u30d1\u30bf\u30fc\u30f3\u3092\u63a1\u7528\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nMVC\u30d1\u30bf\u30fc\u30f3\u306f\u95a2\u5fc3\u306e\u5206\u96e2\u3092\u306f\u304b\u308b\u4e0a\u3067\u3068\u3066\u3082\u6709\u7528\u3067\u3059\u3002\n\u3057\u304b\u3057\u3001Model\u306e\u5b9a\u7fa9\u304c\u66d6\u6627\u3067\u3001\u62c5\u3046\u8cac\u52d9\u304c\u591a\u304f\u306a\u308a\u3084\u3059\u3044\u306e\u3067\u3001Fat Model\u306b\u9665\u308a\u3084\u3059\u3044\u306a\u3068\u611f\u3058\u308b\u90e8\u5206\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\u30c1\u30fc\u30e0\u3067\u30eb\u30fc\u30eb\u3092\u4f5c\u308b\u306e\u3082\u3042\u308a\u3067\u3059\u304c\u3001\u554f\u984c\u304c\u8d77\u304d\u308b\u305f\u3073\u306b\u5b9a\u7fa9\u3059\u308b\u306e\u3082\u9762\u5012\u3067\u3059\u3057\u3001\u30c1\u30fc\u30e0\u958b\u767a\u3092\u3057\u3066\u3044\u308b\u3068\u65b0\u3057\u3044\u4eba\u304c\u5165\u3063\u3066\u304f\u308b\u4e8b\u306f\u3057\u3070\u3057\u3070\u3042\u308b\u3068\u601d\u3046\u306e\u3067\u3001\u5171\u901a\u8a8d\u8b58\u3092\u4fdd\u3064\u305f\u3081\u3001\u4e16\u9593\u4e00\u822c\u306b\u5e83\u307e\u3063\u3066\u3044\u308b\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u63a1\u7528\u3057\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\n\u305f\u3060\u3001\u7d30\u5206\u5316\u3055\u308c\u3059\u304e\u3066\u3044\u308b\u30d1\u30bf\u30fc\u30f3\u3084\u6982\u5ff5\u304c\u96e3\u3057\u3044\u3082\u306e\u306f\u3001\u63a1\u7528\u3057\u3066\u304b\u3089\u8ff7\u3046\u3053\u3068\u304c\u591a\u305d\u3046\u306a\u306e\u3067\u3001\u7d30\u5206\u5316\u3055\u308c\u3059\u304e\u3066\u3044\u306a\u3044\u3057\u3001\u6982\u5ff5\u304c\u30b7\u30f3\u30d7\u30eb\u306a\u3082\u306e\u3053\u3093\u306a\u90fd\u5408\u306e\u3044\u3044\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u63a2\u3057\u3066\u3044\u305f\u3068\u3053\u308d\u3001Clean architecture(\u7ffb\u8a33)\u306b\u51fa\u4f1a\u3044\u307e\u3057\u305f\u3002\n\nClean Architecture\u3068\u306f\n\nClean Architecture\u3068\u306f\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u30ec\u30a4\u30e4\u30fc\u306b\u5206\u3051\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u3001\u95a2\u5fc3\u306e\u5206\u96e2\u3092\u9054\u6210\u3059\u308b\u305f\u3081\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\uff08\u539f\u6587\u306f\u3053\u3061\u3089\uff09\nClean Architecture\u3092\u63a1\u7528\u3059\u308b\u3053\u3068\u3067\u4ee5\u4e0b\u306e\u70b9\u306b\u671f\u5f85\u3067\u304d\u307e\u3059\u3002\n\n\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u72ec\u7acb\n\n\n\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306f\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u4f9d\u5b58\u3057\u306a\u3044\u3002\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u9053\u5177\u3068\u3057\u3066\u4f7f\u3046\u3053\u3068\u3092\u53ef\u80fd\u306b\u3057\u3001\u30b7\u30b9\u30c6\u30e0\u306f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u9650\u5b9a\u3055\u308c\u305f\u5236\u7d04\u306b\u7e1b\u3089\u308c\u306a\u3044\u3002\n\n\n\u30c6\u30b9\u30c8\u53ef\u80fd\n\n\n\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u306f\u3001UI\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3001\u30a6\u30a7\u30d6\u30b5\u30fc\u30d0\u30fc\u3001\u305d\u306e\u4ed6\u5916\u90e8\u306e\u8981\u7d20\u306a\u3057\u306b\u30c6\u30b9\u30c8\u3067\u304d\u308b\u3002\n\n\nUI\u72ec\u7acb\n\n\n\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u306e\u5909\u66f4\u306a\u3057\u306b\u3001UI\u3092\u7f6e\u304d\u63db\u3048\u3089\u308c\u308b\u3002\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u72ec\u7acb\n\n\nOracle\u3042\u308b\u3044\u306fSQL Server\u3092\u3001Mongo, BigTable, CouchDB\u3042\u308b\u3044\u306f\u4ed6\u306e\u3082\u306e\u3068\u4ea4\u63db\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u62d8\u675f\u3055\u308c\u306a\u3044\u3002\n\n\n\u5916\u90e8\u6a5f\u80fd\u72ec\u7acb\n\n\n\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u306f\u3001\u5358\u306b\u5916\u5074\u306b\u3064\u3044\u3066\u306a\u306b\u3082\u77e5\u3089\u306a\u3044\u3002\n\n\n\n\n\u4f9d\u5b58\u30eb\u30fc\u30eb\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3001\u5185\u5074\u306b\u5411\u304b\u3063\u3066\u306e\u307f\u4f9d\u5b58\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u5185\u5074\u306e\u5186\u306f\u3001\u5916\u5074\u306e\u5186\u306b\u3064\u3044\u3066\u4f55\u3082\u77e5\u308b\u3053\u3068\u306f\u306a\u3044\u3002\u3068\u304f\u306b\u3001\u5916\u5074\u306e\u5186\u3067\u5ba3\u8a00\u3055\u308c\u305f\u3082\u306e\u306e\u540d\u524d\u3092\u3001\u5185\u5074\u306e\u5186\u304b\u3089\u8a00\u53ca\u3057\u3066\u306f\u306a\u3089\u306a\u3044\u3002\u3053\u308c\u306f\u3001\u95a2\u6570\u3001\u30af\u30e9\u30b9\u3001\u5909\u6570\u3001\u3042\u308b\u3044\u306f\u305d\u306e\u4ed6\u3001\u540d\u524d\u304c\u4ed8\u3051\u3089\u308c\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3059\u3079\u3066\u306b\u8a00\u3048\u308b\u3002\n\u540c\u69d8\u306b\u3001\u5916\u5074\u306e\u5186\u3067\u4f7f\u308f\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092\u5185\u5074\u306e\u5186\u3067\u4f7f\u3046\u3079\u304d\u3067\u306f\u306a\u3044\u3002\u3068\u304f\u306b\u3001\u305d\u308c\u3089\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u3001\u5916\u5074\u306e\u5186\u3067\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3042\u308c\u3070\u3002\u5916\u5074\u306e\u5186\u306e\u3069\u3093\u306a\u3082\u306e\u3082\u3001\u5185\u5074\u306e\u5186\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u3079\u304d\u3067\u306f\u306a\u3044\u306e\u3060\u3002\n\n\u4f9d\u5b58\u95a2\u4fc2\u306f\u5185\u5074\u4e00\u65b9\u5411\u306e\u307f\u3067\u3001\u5916\u5074\u306e\u30eb\u30fc\u30eb\u3092\u3001\u5185\u5074\u306b\u6301\u3061\u8fbc\u3093\u3067\u306f\u3044\u3051\u306a\u3044\u3002\n\n\u53f3\u4e0b\u306e\u56f3\u306f\u3001\u3069\u306e\u3088\u3046\u306b\u5186\u306e\u5883\u754c\u3092\u307e\u305f\u304c\u308b\u306e\u304b\u306e\u4f8b\u3060\u3002\u3053\u308c\u306f\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3068\u30d7\u30ec\u30bc\u30f3\u30bf\u30fc\u304c\u3001\u6b21\u306e\u30ec\u30a4\u30e4\u30fc\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3068\u901a\u4fe1\u3059\u308b\u69d8\u5b50\u3092\u793a\u3057\u3066\u3044\u308b\u3002\u5236\u5fa1\u306e\u6d41\u308c\u306b\u6ce8\u610f\u3057\u3066\u6b32\u3057\u3044\u3002\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u304b\u3089\u306f\u3058\u307e\u308a\u3001\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3092\u629c\u3051\u3066\u3001\u30d7\u30ec\u30bc\u30f3\u30bf\u30fc\u3067\u5b9f\u884c\u3055\u308c\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u4f9d\u5b58\u6027\u306b\u3082\u6ce8\u610f\u3002\u3044\u305a\u308c\u3082\u3001\u5185\u5074\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3092\u5411\u3044\u3066\u3044\u308b\u3002\n\u308f\u308c\u308f\u308c\u306f\u3001\u3053\u306e\u660e\u3089\u304b\u306a\u77db\u76fe\u3092 \u4f9d\u5b58\u95a2\u4fc2\u9006\u8ee2\u306e\u539f\u5247(Dependency Inversion Principle) \u3067\u89e3\u6c7a\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3002\u305f\u3068\u3048\u3070\u3001Java\u306e\u3088\u3046\u306a\u8a00\u8a9e\u3067\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3068\u7d99\u627f\u95a2\u4fc2\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u4f9d\u5b58\u6027\u304c\u3001\u5883\u754c\u3092\u307e\u305f\u304c\u3063\u305f\u53f3\u96a3\u306e\u70b9\u306e\u5236\u5fa1\u306e\u6d41\u308c\u3068\u306f\u3001\u9006\u306b\u306a\u308b\u3088\u3046\u306b\u3059\u308b\u3060\u308d\u3046\u3002\n\n\u5fc5\u305a\u3046\u307e\u308c\u308b\u77db\u76fe\u3092DIP(\u4f9d\u5b58\u95a2\u4fc2\u9006\u8ee2\u306e\u539f\u5247)\u3067\u89e3\u6c7a\u3059\u308b\u3002\n\n\u5404\u5c64\u306e\u5f79\u5272\n\nEntities\n\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u306e\u70ba\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u3001\u3082\u3057\u304f\u306f\u30e1\u30bd\u30c3\u30c9\u3092\u6301\u3063\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002\n\nUse cases\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u56fa\u6709\u306e\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u3002\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3068\u306e\u30c7\u30fc\u30bf\u306e\u6d41\u308c\u3092\u7d44\u307f\u7acb\u3066\u308b\u3002\n\nInterface\n\u5916\u90e8\u304b\u3089\u3001\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3068\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30fc\u3067\u4f7f\u308f\u308c\u308b\u5185\u90e8\u5f62\u5f0f\u306b\u30c7\u30fc\u30bf\u3092\u5909\u63db\u3001\u307e\u305f\u306f\u5185\u90e8\u304b\u3089\u5916\u90e8\u306e\u6a5f\u80fd\u306b\u3082\u3063\u3068\u3082\u4fbf\u5229\u306a\u5f62\u5f0f\u306b\u3001\u30c7\u30fc\u30bf\u3092\u5909\u63db\u3059\u308b\u30a2\u30c0\u30d7\u30bf\u30fc\u3002\n\nFrameworks & Drivers\n\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3084\u30c4\u30fc\u30eb\u304b\u3089\u69cb\u6210\u3055\u308c\u308b\u3002\u3053\u306e\u30ec\u30a4\u30e4\u30fc\u306b\u306f\u3001\u591a\u304f\u306e\u30b3\u30fc\u30c9\u306f\u66f8\u304b\u306a\u3044\u3002\u305f\u3060\u3057\u3001\u3072\u3068\u3064\u5185\u5074\u306e\u5186\u3068\u901a\u4fe1\u3059\u308b\u3064\u306a\u304e\u306e\u30b3\u30fc\u30c9\u306f\u3001\u3053\u3053\u306b\u542b\u307e\u308c\u308b\u3002\n\n\u30dd\u30a4\u30f3\u30c8\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30ec\u30a4\u30e4\u30fc\u306b\u5206\u3051\u308b\n\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3084DB\u3092\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5916\u5074\u3068\u4f4d\u7f6e\u4ed8\u3051\u308b\n\u4f9d\u5b58\u95a2\u4fc2\u306f\u5185\u5074\u4e00\u65b9\u5411\u306e\u307f\n\u5916\u5074\u306e\u30eb\u30fc\u30eb\u3092\u3001\u5185\u5074\u306b\u6301\u3061\u8fbc\u3093\u3067\u306f\u3044\u3051\u306a\u3044\nDIP\u3092\u5229\u7528\u3057\u3066\u4f9d\u5b58\u30eb\u30fc\u30eb\u3092\u5b88\u308b\nEntities,Use cases\u306b\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u3001\u305d\u308c\u4ee5\u5916\u306b\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u9054\u6210\u3059\u308b\u305f\u3081\u306e\u30ed\u30b8\u30c3\u30af\u3092\u66f8\u304f\n\n\u3053\u3093\u306a\u611f\u3058\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\n\u3067\u306f\u3001\u5b9f\u969b\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002\n\n\u4eca\u56de\u5b9f\u88c5\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\n\u30e6\u30fc\u30b6\u30fc\u30ea\u30bd\u30fc\u30b9\u3092\u63d0\u4f9b\u3059\u308b\u5358\u7d14\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3059\u3002\n\u6b21\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n\nPOST /users \u30e6\u30fc\u30b6\u30fc\u767b\u9332\n\nGET /users \u30e6\u30fc\u30b6\u30fc\u4e00\u89a7\u53d6\u5f97\n\nGET /user/:id \u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u306e\u53d6\u5f97\n\nUser\u306f\u3001id firstName lastName\u3092\u6301\u3064\u3082\u306e\u3068\u3057\u307e\u3059\u3002\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 app\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 domain\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 infrastructure\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 interfaces\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 controllers\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 database\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 server.go\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 usecase\n\n\n\u5404\u30d5\u30a9\u30eb\u30c0\u3068\u30ec\u30a4\u30e4\u30fc\u306e\u95a2\u4fc2\u6027\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d\n\u30ec\u30a4\u30e4\u30fc\n\n\n\n\ndomain\nEntities\n\n\ninfrastructure\nFrameworks & Drivers\n\n\ninterfaces\nInterface\n\n\nusecase\nUse cases\n\n\n\ninterfaces\u914d\u4e0b\u306f\u3001database\u3068controller\u306b\u5206\u3051\u3066\u3044\u307e\u3059\u3002\n\n\u3082\u3057\u3053\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304cSQL\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u3042\u308b\u306a\u3089\u3070\u3001\u3069\u3093\u306aSQL\u3067\u3042\u308c\u3001\u3053\u306e\u30ec\u30a4\u30e4\u30fc\u306b\u3001\u3082\u3063\u3068\u8a00\u3046\u3068\u3001\u3053\u306e\u30ec\u30a4\u30e4\u30fc\u306e\u4e2d\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u95a2\u9023\u3057\u305f\u90e8\u5206\u306b\u3001\u5236\u9650\u3055\u308c\u308b\u3079\u304d\u3060\u3002\n\n\u8aac\u660e\u306e\u4e00\u6587\u306b\u3082\u3042\u308b\u3088\u3046\u306b\u3001database\u306b\u95a2\u308f\u308b\u51e6\u7406\u3092database\u914d\u4e0b\u306b\u5236\u9650\u3059\u308b\u305f\u3081\u3067\u3059\u3002\n\u4eca\u56de\u306f\u3001controller\u304b\u3089\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3059\u305f\u3081\u3001presenter\u306f\u4f7f\u3044\u307e\u305b\u3093\u3002\n\n4\u3064\u306e\u5186\u3058\u3083\u306a\u3044\u3068\u30c0\u30e1\u306a\u306e?\n\u3044\u3084\u3001\u3053\u306e\u5186\u306f\u3001\u30b3\u30f3\u30bb\u30d7\u30c8\u3092\u4f1d\u3048\u308b\u305f\u3081\u306e\u65b9\u4fbf\u3060\u3002\u3053\u308c\u3089\u306e4\u3064\u4ee5\u5916\u304c\u6b32\u3057\u304f\u306a\u308b\u53ef\u80fd\u6027\u306f\u3042\u308b\u3002\u3061\u3087\u3046\u30694\u3064\u3067\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u3068\u3044\u3046\u6c7a\u307e\u308a\u306f\u306a\u3044\u3002\n\n\u53b3\u5bc6\u306b\uff14\u5c64\u3067\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u304b\u3068\u3044\u3046\u3068\u3001\u305d\u3046\u3067\u306f\u306a\u3044\u3089\u3057\u3044\u306e\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3084\u30c1\u30fc\u30e0\u306e\u30eb\u30fc\u30eb\u306b\u3088\u3063\u3066\u5909\u3048\u3066\u3082\u826f\u3055\u305d\u3046\u3067\u3059\u3002\n\nEntities\u30ec\u30a4\u30e4\u30fc\n\u307e\u305a\u306f\u3001Entities\u30ec\u30a4\u30e4\u30fc\u3067\u3059\u3002\nUser\u306f\u3001\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u306e\u70ba\u306e\u30c7\u30fc\u30bf\u306a\u306e\u3067\u3053\u306e\u5c64\u306b\u5c5e\u3057\u307e\u3059\u3002\nUser\u306f\u3001id firstName lastName\u3092\u6301\u3063\u3066\u3044\u308b\u306e\u3067\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\ndomain/user.go\npackage domain\n\n\ntype User struct {\n    ID        int\n    FirstName string\n    LastName  string\n}\n\n\n\n\nInterfaces/database,  Frameworks & Drivers\u30ec\u30a4\u30e4\u30fc\n\u30c9\u30e1\u30a4\u30f3\u99c6\u52d5\u306e\u8003\u3048\u65b9\u304b\u3089\u3059\u308b\u3068\u6b21\u306fUse cases\u30ec\u30a4\u30e4\u30fc\u3092\u8aac\u660e\u3059\u308b\u3079\u304d\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001DIP\uff08\u4f9d\u5b58\u95a2\u4fc2\u9006\u8ee2\u306e\u539f\u5247\uff09\u306e\u8aac\u660e\u3092\u3057\u3084\u3059\u3044\u3088\u3046\u306bdatabase\u5468\u308a\u306b\u79fb\u308a\u307e\u3059\u3002\nDB\u306f\u3001MySQL\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\ninfrastructure/sqlhandler.go\npackage infrastructure\n\n\nimport (\n    \"database/sql\"\n    _ \"github.com/go-sql-driver/mysql\"\n)\n\n\ntype SqlHandler struct {\n    Conn *sql.DB\n}\n\nfunc NewSqlHandler() *SqlHandler {\n    conn, err := sql.Open(\"mysql\", \"root:@tcp(db:3306)/sample\")\n    if err != nil {\n        panic(err.Error)\n    }\n    sqlHandler := new(SqlHandler)\n    sqlHandler.Conn = conn\n    return sqlHandler\n}\n\n\nDB\u63a5\u7d9a\u306b\u306f\u3001\u5916\u90e8\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u3001infrastructure\u5c64\u306b\u5b9a\u7fa9\u3057\u5916\u5074\u306e\u30eb\u30fc\u30eb\u3092\u5185\u5074\u306b\u6301\u3061\u8fbc\u307e\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u5b9f\u969b\u306b\u30c7\u30fc\u30bf\u306e\u3084\u308a\u53d6\u308a\u3092\u3059\u308b\u51e6\u7406\u306finterfaces/database\u5c64\u306b\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\ninterfaces/database/user_repository.go\npackage database\n\nimport \"app/domain\"\n\n\ntype UserRepository struct {\n    SqlHandler\n}\n\nfunc (repo *UserRepository) Store(u domain.User) (id int, err error) {\n    result, err := repo.Execute(\n        \"INSERT INTO users (first_name, last_name) VALUES (?,?)\", u.FirstName, u.LastName,\n    )\n    if err != nil {\n        return\n    }\n    id64, err := result.LastInsertId()\n    if err != nil {\n        return\n    }\n    id = int(id64)\n    return\n}\n\nfunc (repo *UserRepository) FindById(identifier int) (user domain.User, err error) {\n    row, err := repo.Query(\"SELECT id, first_name, last_name FROM users WHERE id = ?\", identifier)\n    defer row.Close()\n    if err != nil {\n        return\n    }\n    var id int\n    var firstName string\n    var lastName string\n    row.Next()\n    if err = row.Scan(&id, &firstName, &lastName); err != nil {\n        return\n    }\n    user.ID = id\n    user.FirstName = firstName\n    user.LastName = lastName\n    return\n}\n\nfunc (repo *UserRepository) FindAll() (users domain.Users, err error) {\n    rows, err := repo.Query(\"SELECT id, first_name, last_name FROM users\")\n    defer rows.Close()\n    if err != nil {\n        return\n    }\n    for rows.Next() {\n        var id int\n        var firstName string\n        var lastName string\n        if err := rows.Scan(&id, &firstName, &lastName); err != nil {\n            continue\n        }\n        user := domain.User{\n            ID:        id,\n            FirstName: firstName,\n            LastName:  lastName,\n        }\n        users = append(users, user)\n    }\n    return\n}\n\n\n\u3053\u3053\u3067\u306fUserRepository\u306b\u3001\u5148\u307b\u3069\u5b9a\u7fa9\u3057\u305fSqlHandler\u3092\u57cb\u3081\u8fbc\u307f\uff08Embed\uff09DB\u51e6\u7406\u3092\u3057\u3066\u3044\u307e\u3059\u3002\u5f15\u6570\u3084\u623b\u308a\u5024\u306b\u306f\u3001domain\u5c64\u306eUser\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002domain/user\u306finterfaces\u5c64\u306e\u5185\u5074\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u4f9d\u5b58\u95a2\u4fc2\u306f\u5b88\u308c\u3066\u3044\u305d\u3046\u3067\u3059\u3002\n\u3057\u304b\u3057\u3001SqlHandler\u306f\u3001\u4e00\u756a\u5916\u5074\u306einfrastructure\u5c64\u306b\u5b9a\u7fa9\u3057\u307e\u3057\u305f\u3002\n\u3053\u308c\u3092\u5358\u7d14\u306b\u547c\u3073\u51fa\u3057\u3066\u3057\u307e\u3046\u3068\u5916\u5074\u306e\u30eb\u30fc\u30eb\u3092\u3001\u5185\u5074\u306b\u6301\u3061\u8fbc\u3093\u3067\u306f\u3044\u3051\u306a\u3044\u306b\u53cd\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u305d\u3053\u3067DIP\uff08\u4f9d\u5b58\u95a2\u4fc2\u9006\u8ee2\u306e\u539f\u5247\uff09\u306e\u767b\u5834\u3067\u3059\u3002\nGo\u8a00\u8a9e\u3067\u306f\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u5229\u7528\u3057\u3066\u6b21\u306e\u3088\u3046\u306b\u5b9f\u73fe\u3057\u307e\u3059\u3002\n\ninterface/database/sql_handler.go\npackage database\n\n\ntype SqlHandler interface {\n    Execute(string, ...interface{}) (Result, error)\n    Query(string, ...interface{}) (Row, error)\n}\n\ntype Result interface {\n    LastInsertId() (int64, error)\n    RowsAffected() (int64, error)\n}\n\ntype Row interface {\n    Scan(...interface{}) error\n    Next() bool\n    Close() error\n}\n\n\ninterfaces/database/user_repository.go\u3068\u540c\u968e\u5c64\u306bSqlHandler\u306e\u632f\u308b\u821e\u3044\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002database\u5c64\u304b\u3089\u5b9f\u969b\u306b\u547c\u3073\u51fa\u3059\u306e\u306f\u3053\u306e\u632f\u308b\u821e\u3044\u3067\u3059\u3002\nExecute\u30e1\u30bd\u30c3\u30c9\u3001Query\u30e1\u30bd\u30c3\u30c9\u306e\u623b\u308a\u5024\u306b\u6ce8\u76ee\u3057\u3066\u304f\u3060\u3055\u3044\u3002Result\u3068Row\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u305d\u3046\u3059\u308b\u3053\u3068\u3067\u4f9d\u5b58\u30eb\u30fc\u30eb\u3092\u5b88\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3053\u306e\u307e\u307e\u3067\u306finfrastructure.SqlHndler\u304c\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u306b\u6e96\u62e0\u3057\u3066\u3044\u306a\u3044\u70ba\u3001\u6761\u4ef6\u3092\u6e80\u305f\u3059\u3088\u3046\u4fee\u6b63\u3057\u307e\u3059\u3002\n\ninfrastructure/sqlhandler.go\npackage infrastructure\n\nimport (\n    \"database/sql\"\n    _ \"github.com/go-sql-driver/mysql\"\n    \"app/interfaces/database\"\n)\n\n\ntype SqlHandler struct {\n    Conn *sql.DB\n}\n\nfunc NewSqlHandler() database.SqlHandler {\n    conn, err := sql.Open(\"mysql\", \"root:@tcp(db:3306)/sample\")\n    if err != nil {\n        panic(err.Error)\n    }\n    sqlHandler := new(SqlHandler)\n    sqlHandler.Conn = conn\n    return sqlHandler\n}\n\nfunc (handler *SqlHandler) Execute(statement string, args ...interface{}) (database.Result, error) {\n    res := SqlResult{}\n    result, err := handler.Conn.Exec(statement, args...)\n    if err != nil {\n        return res, err\n    }\n    res.Result = result\n    return res, nil\n}\n\nfunc (handler *SqlHandler) Query(statement string, args ...interface{}) (database.Row, error) {\n    rows, err := handler.Conn.Query(statement, args...)\n    if err != nil {\n        return new(SqlRow), err\n    }\n    row := new(SqlRow)\n    row.Rows = rows\n    return row, nil\n}\n\ntype SqlResult struct {\n    Result sql.Result\n}\n\nfunc (r SqlResult) LastInsertId() (int64, error) {\n    return r.Result.LastInsertId()\n}\n\nfunc (r SqlResult) RowsAffected() (int64, error) {\n    return r.Result.RowsAffected()\n}\n\ntype SqlRow struct {\n    Rows *sql.Rows\n}\n\nfunc (r SqlRow) Scan(dest ...interface{}) error {\n    return r.Rows.Scan(dest...)\n}\n\nfunc (r SqlRow) Next() bool {\n    return r.Rows.Next()\n}\n\nfunc (r SqlRow) Close() error {\n    return r.Rows.Close()\n}\n\n\n\nGo\u306e\u5834\u5408\u3001\u660e\u793a\u7684\u306b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u7d99\u627f\u3057\u306a\u304f\u3066\u3082\u3001\u5b9a\u7fa9\u3055\u308c\u305f\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u88c5\u3057\u3066\u3044\u308c\u3070\u6e96\u62e0\u3057\u3066\u3044\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u3044\u308f\u3086\u308b\u30c0\u30c3\u30af\u30bf\u30a4\u30d4\u30f3\u30b0\u3067\u3059\u3002\n\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u6e80\u305f\u3059\u305f\u3081\u3001\u5916\u90e8\u304b\u3089\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308bsql.Rows\u3068sql.Result\u3092\u30e9\u30c3\u30d7\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u3053\u3067\u6ce8\u76ee\u3059\u3079\u304d\u3068\u3053\u308d\u306f\u3001func NewSqlHandler() database.SqlHandler\u306e\u623b\u308a\u5024\u304c\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u306b\u306a\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u3067\u3059\u3002Execute\u30e1\u30bd\u30c3\u30c9\u3001Query\u30e1\u30bd\u30c3\u30c9\u306e\u623b\u308a\u5024\u3082\u540c\u69d8\u3067\u3059\u3002\u3053\u308c\u306b\u3088\u308ainterface/database/sql_handler.go\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u6e80\u305f\u3057\u305f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\nUse cases\u30ec\u30a4\u30e4\u30fc\n\u3053\u306e\u30ec\u30a4\u30e4\u30fc\u3067\u306f\u3001interfaces/database\u304b\u3089\u306eInput Port\u306e\u5f79\u5272\u3001\u304a\u3088\u3073interfaces/controllers\u3078\u306eGateway\u306e\u5f79\u5272\u3092\u62c5\u3044\u307e\u3059\u3002\n\nusecase/user_interactor.go\npackage usecase\n\nimport \"app/domain\"\n\n\ntype UserInteractor struct {\n    UserRepository UserRepository\n}\n\nfunc (interactor *UserInteractor) Add(u domain.User) (err error) {\n    err = interactor.UserRepository.Store(u)\n    return\n}\n\nfunc (interactor *UserInteractor) Users() (user domain.Users, err error) {\n    user, err = interactor.UserRepository.FindAll()\n    return\n}\n\nfunc (interactor *UserInteractor) UserById(identifier int) (user domain.User, err error) {\n    user, err = interactor.UserRepository.FindById(identifier)\n    return\n}\n\n\n\ndatabase\u5c64\u306f\u5916\u5074\u306a\u306e\u3067\u3001\u3053\u3053\u3067\u3082DIP\u3092\u5229\u7528\u3057\u3066\u4f9d\u5b58\u30eb\u30fc\u30eb\u3092\u5b88\u308a\u307e\u3059\u3002\n\nusecase/user_repository.go\npackage usecase\n\nimport \"app/domain\"\n\n\ntype UserRepository interface {\n    Store(domain.User) (int, error)\n    FindById(int) (domain.User, error)\n    FindAll() (domain.Users, error)\n}\n\n\n\ninterfaces/database\u304b\u3089\u306eInput\u3092usecase/user_repository.go\u3067\u3001interfaces/controllers\u3078\u306eGateway\u3092usecase/user_interactor.go\u3067\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002\n\nInterfaces/controllers,  Frameworks & Drivers\u30ec\u30a4\u30e4\u30fc\n\u6b21\u306b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3068\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u5468\u308a\u3092\u3057\u3063\u304b\u308a\u66f8\u304f\u306e\u306f\u3061\u3087\u3063\u3068\u624b\u9593\u3060\u3063\u305f\u306e\u3067\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306egin\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\ninterfases/controllers/user_controller.go\npackage controllers\n\nimport (\n    \"app/domain\"\n    \"app/interfaces/database\"\n    \"app/usecase\"\n    \"strconv\"\n)\n\n\ntype UserController struct {\n    Interactor usecase.UserInteractor\n}\n\nfunc NewUserController(sqlHandler database.SqlHandler) *UserController {\n    return &UserController{\n        Interactor: usecase.UserInteractor{\n            UserRepository: &database.UserRepository{\n                SqlHandler: sqlHandler,\n            },\n        },\n    }\n}\n\nfunc (controller *UserController) Create(c Context) {\n    u := domain.User{}\n    c.Bind(&u)\n    err := controller.Interactor.Add(u)\n    if err != nil {\n        c.JSON(500, NewError(err))\n        return\n    }\n    c.Status(201)\n}\n\nfunc (controller *UserController) Index(c Context) {\n    users, err := controller.Interactor.Users()\n    if err != nil {\n        c.JSON(500, NewError(err))\n        return\n    }\n    c.JSON(200, users)\n}\n\nfunc (controller *UserController) Show(c Context) {\n    id, _ := strconv.Atoi(c.Param(\"id\"))\n    user, err := controller.Interactor.UserById(id)\n    if err != nil {\n        c.JSON(500, NewError(err))\n        return\n    }\n    c.JSON(200, user)\n}\n\n\nUserController\u306f\u3001usecase.UserInteractor\u3092\u5185\u5305\u3057\u3001func NewUserController(sqlHandler database.SqlHandler) *UserController\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u308b\u969b\u306b\u3001database.SqlHandler\u3092\u5f15\u6570\u306b\u53d6\u308a\u307e\u3059\u3002\ngin\u306fgin.Context\u3092\u4f7f\u7528\u3059\u308b\u306e\u3067\u3001\u4eca\u56de\u5229\u7528\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\ninterfaces/controllers/context.go\npackage controllers\n\ntype Context interface {\n    Param(string) string\n    Bind(interface{}) error\n    Status(int)\n    JSON(int, interface{})\n}\n\n\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u51e6\u7406\u306f\u3001\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u7528\u3059\u308b\u306e\u3067\u3001infrastructure\u5c64\u306b\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\ninfrastructure/router.go\npackage infrastructure\n\nimport (\n    gin \"gopkg.in/gin-gonic/gin.v1\"\n\n    \"app/interfaces/controllers\"\n)\n\n\nvar Router *gin.Engine\n\nfunc init() {\n    router := gin.Default()\n\n    userController := controllers.NewUserController(NewSqlHandler())\n\n    router.POST(\"/users\", func(c *gin.Context) { userController.Create(c) })\n    router.GET(\"/users\", func(c *gin.Context) { userController.Index(c) })\n    router.GET(\"/users/:id\", func(c *gin.Context) { userController.Show(c) })\n\n    Router = router\n}\n\n\n\ngin.Context\u306f\u3001interfaces/controllers/context.go\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u6e80\u305f\u3057\u3066\u3044\u308b\u305f\u3081\u3001Controller\u306e\u5f15\u6570\u3068\u3057\u3066\u6e21\u305b\u3066\u3044\u307e\u3059\u3002\n\u6700\u5f8c\u306b\u3001sever.go\u304b\u3089\u30eb\u30fc\u30c6\u30a4\u30f3\u30b0\u3092\u547c\u3073\u51fa\u3057\u3066\u4e00\u901a\u308a\u5b9f\u88c5\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\nserver.go\npackage main\n\nimport \"app/infrastructure\"\n\n\nfunc main() {\n    infrastructure.Router.Run()\n}\n\n\n\nGo\u306f\u7c21\u5358\u306b\u30b5\u30fc\u30d0\u30fc\u304c\u7acb\u3066\u3089\u308c\u308b\u306e\u3067\u3001\u30b5\u30f3\u30d7\u30eb\u306b\u3082\u5411\u3044\u3066\u3044\u307e\u3059\u3002\n\u6700\u7d42\u7684\u306a\u30c4\u30ea\u30fc\u69cb\u9020\u3067\u3059\u3002\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 app\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 domain\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 user.go\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 infrastructure\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 router.go\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 sqlhandler.go\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 interfaces\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 controllers\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 context.go\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 error.go\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 user_controller.go\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 database\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 sqlhandler.go\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 user_repository.go\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 server.go\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 usecase\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 user_interactor.go\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 user_repository.go\n\n\n\n\u5b9f\u884c\n\u3067\u306f\u3001\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\uff08\u30c7\u30fc\u30bf\u306f\u9069\u5f53\u306b\u5165\u308c\u3066\u3044\u307e\u3059\uff09\n$ go run server.go \n\n\u307e\u305a\u306f\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\u3002\n// User\u767b\u9332\n$vcurl -i -H \"Accept: application/json\" -H \"Content-type: application/json\" -X POST -d '{\"FirstName\": \"Susan\", \"LastName\": \"Taylor\"}' localhost:8080/users\nHTTP/1.1 201 Created\n\n\n// User\u4e00\u89a7\n$ curl -i -H 'Content-Type:application/json' localhost:8080/users\nHTTP/1.1 200 OK\n[\n {\"ID\":1,\"FirstName\":\"Patricia\",\"LastName\":\"Smith\"},\n {\"ID\":2,\"FirstName\":\"Linda\",\"LastName\":\"Johnson\"},\n {\"ID\":3,\"FirstName\":\"Mary\",\"LastName\":\"William\"},\n {\"ID\":4,\"FirstName\":\"Robert\",\"LastName\":\"Jones\"},\n {\"ID\":5,\"FirstName\":\"James\",\"LastName\":\"Brown\"},\n {\"ID\":6,\"FirstName\":\"Susan\",\"LastName\":\"Taylor\"},\n]\n\n// User\u60c5\u5831\n$ curl -i -H 'Content-Type:application/json' localhost:8080/users/3\nHTTP/1.1 200 OK\n{\"ID\":3,\"FirstName\":\"Mary\",\"LastName\":\"William\"}\n\n\n\u671f\u5f85\u901a\u308a\u306e\u7d50\u679c\u304c\u8fd4\u3063\u3066\u304d\u307e\u3057\u305f\uff01\n\n\u4ed5\u69d8\u5909\u66f4\n\u3053\u3053\u3067\u3001\u4ed5\u69d8\u5909\u66f4\u304c\u3042\u3063\u305f\u969b\u306e\u5bfe\u5fdc\u3092\u3044\u304f\u3064\u304b\u898b\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nFullName\u3092\u30ec\u30b9\u30dd\u30f3\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u8ffd\u52a0\u3057\u3066\u6b32\u3057\u3044\n\u8ffd\u52a0\u3067FullName\u3092\u8fd4\u3057\u3066\u6b32\u3057\u3044\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u304b\u3089\u4f9d\u983c\u304c\u3042\u308a\u307e\u3057\u305f\u3002FirstName\u3068LastName\u3092\u8fd4\u3057\u3066\u308b\u3093\u3060\u304b\u3089\u305d\u3063\u3061\u3067\u3084\u3063\u3066\u3088\u3002\u3002\u3068\u3044\u3046\u601d\u3044\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u305d\u3053\u3092\u3050\u3063\u3068\u3053\u3089\u3048\u3066\u5bfe\u5fdc\u3057\u307e\u3059\u3002\uff08\u5358\u7d14\u306b\u3044\u3044\u4f8b\u304c\u6d6e\u304b\u3073\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3002\uff09\n\u307e\u305a\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u56fa\u6709\u306e\u554f\u984c\u306a\u306e\u304b\u3001\u305d\u3046\u3067\u306f\u306a\u3044\u306e\u304b\u5207\u308a\u5206\u3051\u307e\u3059\u3002Use Case\u5c64\u3088\u308a\u5185\u5074\u3067\u5bfe\u5fdc\u3059\u308b\u304b\u5916\u5074\u3067\u5bfe\u5fdc\u3059\u308b\u304b\u5224\u65ad\u3057\u307e\u3059\u3002\nFullName\u306e\u8ffd\u52a0\u3068\u306f\u3001User\u306b\u95a2\u308f\u308b\u4ed5\u69d8\u5909\u66f4\u306a\u305f\u3081\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u56fa\u6709\u306e\u554f\u984c\u3068\u6349\u3048\u3066\u826f\u3055\u305d\u3046\u3067\u3059\u3002\n\u307e\u305a\u3001domain\u5c64\u306eUser\u306bFullName\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\ndomain/user.go\npackage domain\n\n\ntype User struct {\n    ID        int\n    FirstName string\n    LastName  string\n    FullName  string\n}\n\n\ndatabase\u5c64\u304b\u3089\u76f4\u63a5FullName\u306b\u5024\u3092\u6e21\u3057\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u304c\u3001database\u3068\u306f\u95a2\u4fc2\u306a\u3044\u51e6\u7406\u306a\u306e\u3067database\u5c64\u306b\u306f\u66f8\u304d\u307e\u305b\u3093\u3002\n\u4ee3\u308f\u308a\u306bdomain.User\u306bBuild\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\ndomain/user.go\npackage domain\n\nimport \"fmt\"\n\n\ntype User struct {\n    ID        int\n    FirstName string\n    LastName  string\n    FullName  string\n}\n\nfunc (u *User) Build() *User {\n    u.FullName = fmt.Sprintf(\"%s %s\", u.FirstName, u.LastName)\n    return u\n}\n\n\n\nBuild\u30e1\u30bd\u30c3\u30c9\u306f\u81ea\u8eab\u306e\u60c5\u5831\u3092\u518d\u69cb\u7bc9\u3057\u81ea\u8eab\u3092\u8fd4\u3059\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u3002\nFullName\u306e\u51e6\u7406\u306f\u3053\u306e\u4e2d\u306b\u66f8\u304d\u307e\u3059\u3002\nBuild\u30e1\u30bd\u30c3\u30c9\u306fdatabase\u5c64\u304b\u3089\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\n\ninterfaces/database/user_repository.go\n\nfunc (repo *UserRepository) FindById(identifier int) (user domain.User, err error) {\n    row, err := repo.Query(\"SELECT id, first_name, last_name FROM users WHERE id = ?\", identifier)\n    defer row.Close()\n    if err != nil {\n        return\n    }\n    var id int\n    var firstName string\n    var lastName string\n    row.Next()\n    if err = row.Scan(&id, &firstName, &lastName); err != nil {\n        return\n    }\n    user.ID = id\n    user.FirstName = firstName\n    user.LastName = lastName\n    user.Build()\n    return\n}\n\nfunc (repo *UserRepository) FindAll() (users domain.Users, err error) {\n    rows, err := repo.Query(\"SELECT id, first_name, last_name FROM users\")\n    defer rows.Close()\n    if err != nil {\n        return\n    }\n    for rows.Next() {\n        var id int\n        var firstName string\n        var lastName string\n        if err := rows.Scan(&id, &firstName, &lastName); err != nil {\n            continue\n        }\n        user := domain.User{\n            ID:        id,\n            FirstName: firstName,\n            LastName:  lastName,\n        }\n        users = append(users, *user.Build())\n    }\n    return\n}\n\n\n\nFindById\u3001FindAll\u30e1\u30bd\u30c3\u30c9\u306e\u5024\u3092\u8fd4\u3059\u524d\u306bBuild\u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3093\u3067\u3044\u307e\u3059\u3002\nBuild\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3067\u3001\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092usecase\u5c64\u3088\u308a\u5185\u5074\u306b\u7559\u3081\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\nFullName\u306f\u30a2\u30c3\u30d1\u30fc\u30b1\u30fc\u30b9\u306b\u3057\u3066\u6b32\u3057\u3044\uff01\u306a\u3069\u306e\u8ffd\u52a0\u8981\u6c42\u304c\u6765\u305f\u5834\u5408\u3082Build\u30e1\u30bd\u30c3\u30c9\u5185\u3092\u4fee\u6b63\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n$ curl -i -H 'Content-Type:application/json' localhost:8080/users/3\nHTTP/1.1 200 OK\n{\"ID\":3,\"FirstName\":\"Mary\",\"LastName\":\"William\",\"FullName\":\"Mary William\"}\n\nFullName\u304c\u8fd4\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\nPOST /users \u306b\u4f5c\u6210\u3057\u305fUser\u60c5\u5831\u3092\u8ffd\u52a0\u3057\u3066\u6b32\u3057\u3044\n\u306f\u3044\u3001\u305d\u306e\u65b9\u304c\u4f7f\u3044\u52dd\u624b\u304c\u3088\u3055\u305d\u3046\u3067\u3059\u3002\nUser\u4f5c\u6210\u5f8c\u3001User\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3066\u304f\u308b\u51e6\u7406\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u3053\u3061\u3089\u3082\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u56fa\u6709\u306e\u554f\u984c\u3068\u6349\u3048\u307e\u3059\u3002\n\u307e\u305a\u306f\u3001usecase/user_interactor.go\u306eAdd\u30e1\u30bd\u30c3\u30c9\u3067User\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3001\u8fd4\u5374\u3059\u308b\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\n\nusecase/user_interactor.go\n\nfunc (interactor *UserInteractor) Add(u domain.User) (user domain.User, err error) {\n    identifier, err := interactor.UserRepository.Store(u)\n    if err != nil {\n        return\n    }\n    user, err = interactor.UserRepository.FindById(identifier)\n    return\n}\n\n\ncontroller\u3082\u3001interactor\u304b\u3089\u5024\u3092\u53d7\u3051\u53d6\u308a\u3001User\u60c5\u5831\u3092\u8fd4\u5374\u3059\u308b\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\n\ninterfaces/controllers/user_controller.go\nfunc (controller *UserController) Create(c Context) {\n    u := domain.User{}\n    c.Bind(&u)\n    user, err := controller.Interactor.Add(u)\n    if err != nil {\n        c.JSON(500, NewError(err))\n        return\n    }\n    c.JSON(201, user)\n}\n\n\n\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n$ curl -i -H \"Accept: application/json\" -H \"Content-type: application/json\" -X POST -d '{\"FirstName\": \"David\", \"LastName\": \"Wilson\"}' localhost:8080/users\nTTP/1.1 201 Created\n\n{\"ID\":7,\"FirstName\":\"David\",\"LastName\":\"Wilson\",\"FullName\":\"David Wilson\"}\n\nUser\u60c5\u5831\u304c\u8fd4\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u307e\u3068\u3081\nClean Architecture\u306e\u30eb\u30fc\u30eb\u306b\u5247\u308b\u3053\u3068\u3067\u5404\u5c64\u306e\u5f79\u5272\u304c\u306f\u3063\u304d\u308a\u3057\u3001\u758e\u7d50\u5408\u3068\u306a\u3063\u305f\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\u305f\u3060\u3001\u898b\u3066\u306e\u901a\u308a\u7c21\u5358\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3082\u3053\u308c\u3060\u3051\u306e\u30b3\u30fc\u30c9\u91cf\u306b\u306a\u308a\u307e\u3059\u3002\u4ed6\u306e\u65b9\u3082\u8a00\u308f\u308c\u3066\u3044\u308b\u901a\u308a\u3001\u5c0f\u3055\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3059\u3068\u30b3\u30b9\u30c8\u306b\u898b\u5408\u3046\u307b\u3069\u306e\u52b9\u679c\u306f\u671f\u5f85\u3067\u304d\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u3057\u304b\u3057\u3001\u4e00\u5ea6\u66f8\u3044\u3066\u3057\u307e\u3048\u3070\u3001\u3069\u3053\u306b\u4f55\u3092\u66f8\u3051\u3070\u3044\u3044\u304b\u6bd4\u8f03\u7684\u308f\u304b\u308a\u3084\u3059\u3044\u306e\u3067\u3001\u5927\u304d\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3084\u30c1\u30fc\u30e0\u958b\u767a\u306b\u306f\u5411\u3044\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001\u4eca\u56de\u306f\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u89e6\u308b\u305f\u3081\u306binfrastructure\u5c64\u306b\u30e9\u30c3\u30d7\u51e6\u7406\u3092\u5b9a\u7fa9\u3057\u3001\u4f9d\u5b58\u30eb\u30fc\u30eb\u3092\u5b88\u308a\u307e\u3057\u305f\u304c\u3001\u30b3\u30fc\u30c9\u91cf\u304c\u5897\u3048\u5197\u9577\u306b\u306a\u308b\u306e\u3067\u3001\u30d3\u30ba\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306e\u5c64\u3001\u3059\u306a\u308f\u3061Use case\u304b\u3089\u5185\u5074\u3055\u3048\u4f9d\u5b58\u30eb\u30fc\u30eb\u3092\u5b88\u308c\u3070Interface\u5c64\u307e\u3067\u306f\u5916\u90e8\u306b\u4f9d\u5b58\u3057\u3066\u3082\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\nClean Architecture\u306b\u671f\u5f85\u3059\u308b\u4e8b\u306e\u691c\u8a3c\uff08\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u72ec\u7acb\u3001\u30c6\u30b9\u30c8\u53ef\u80fd\u306a\u3069\uff09\u3082\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u7d50\u69cb\u306a\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u306a\u3063\u305f\u306e\u3067\u3001\u5225\u306e\u6a5f\u4f1a\u306b\u691c\u8a3c\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\u4eca\u56de\u4f7f\u7528\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\u306b\u3042\u3052\u3066\u3044\u307e\u3059\u3002\n\n\u53c2\u8003\u6587\u732e\n\nThe Clean Architecture\n\u30af\u30ea\u30fc\u30f3\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3(The Clean Architecture\u7ffb\u8a33)\nApplying The Clean Architecture to Go applications\n\u6301\u7d9a\u53ef\u80fd\u306a\u958b\u767a\u3092\u76ee\u6307\u3059 ~ \u30c9\u30e1\u30a4\u30f3\u30fb\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u99c6\u52d5\uff08\u30af\u30ea\u30fc\u30f3\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff09 + \u5358\u65b9\u5411\u306b\u5236\u9650\u3057\u305f\u51e6\u7406 + FRP\n\u3010\u30bb\u30c3\u30b7\u30e7\u30f3\u30ec\u30dd\u30fc\u30c8\u3011 Developers.IO 2016 in Osaka \u3067 \u30b2\u30f3\u30d0\u306e\u30af\u30ea\u30fc\u30f3\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u767a\u8868\u3057\u307e\u3057\u305f\uff01 #cmdevio2016\n\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u63a1\u7528\u3059\u308b\u7406\u7531\u3001\u6b21\u306bClean Architecture\u306e\u6982\u8981\u3001\u6700\u5f8c\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u69cb\u7bc9\u3092\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u3053\u306e\u5f8c\u8a73\u3057\u304f\u898b\u3066\u3044\u304d\u307e\u3059\u304c\u3001Clean architecture\u306e\u6982\u5ff5\u306f\u6bd4\u8f03\u7684\u30b7\u30f3\u30d7\u30eb\u3067\u308f\u304b\u308a\u3084\u3059\u3044\u3082\u306e\u3060\u3068\u601d\u3044\u307e\u3059\u3002\u3057\u304b\u3057\u5b9f\u969b\u30b3\u30fc\u30c9\u306b\u843d\u3068\u3057\u8fbc\u3093\u3060\u6642\u3001\u3053\u308c\u3063\u3066\u3069\u3046\u5b9f\u73fe\u3059\u308c\u3070\u3044\u3044\u306e\u304b\u306a\uff1f\u3068\u8ff7\u3046\u3053\u3068\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u81ea\u5206\u306e\u7406\u89e3\u3082\u6df1\u3081\u308b\u305f\u3081\u306b\u5b9f\u969b\u306bAPI Server\u3092\u69cb\u7bc9\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u306e\u63a1\u7528\u4e8b\u4f8b\u3092\u3042\u307e\u308a\u307f\u306a\u3044\u306e\u3067\u8ab0\u304b\u306e\u53c2\u8003\u306b\u306a\u308c\u3070\u3044\u3044\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u3001Go\u8a00\u8a9e\u3067\u3059\u3002\n\n\n## \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u63a1\u7528\u3059\u308b\u7406\u7531\n\n\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u671f\u5f85\u3059\u308b\u3053\u3068\u306f\u3001**\u95a2\u5fc3\u306e\u5206\u96e2**\u3067\u3059\u3002\n\u95a2\u5fc3\u306e\u5206\u96e2\u3092\u6b63\u3057\u304f\u884c\u3046\u3053\u3068\u3067\u3001\u6b21\u306e\u3088\u3046\u306a\u30e1\u30ea\u30c3\u30c8\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n- \u518d\u5229\u7528\u6027\u306e\u9ad8\u3044\u8a2d\u8a08\u306b\u306a\u308a\u751f\u7523\u6027\u304c\u5411\u4e0a\u3059\u308b\n- \u30b3\u30fc\u30c9\u306e\u53ef\u8aad\u6027\u304c\u4e0a\u304c\u308a\u3001\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u304c\u5bb9\u6613\u306b\u306a\u308b\n- \u5909\u5316\u306b\u5f37\u3044\u8a2d\u8a08\u306b\u306a\u308b\n- \u5171\u901a\u8a8d\u8b58\u3092\u6301\u3066\u308b\n\n\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u306f\u3001[MVC\u30d1\u30bf\u30fc\u30f3](https://ja.wikipedia.org/wiki/Model_View_Controller)\u3092\u63a1\u7528\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nMVC\u30d1\u30bf\u30fc\u30f3\u306f\u95a2\u5fc3\u306e\u5206\u96e2\u3092\u306f\u304b\u308b\u4e0a\u3067\u3068\u3066\u3082\u6709\u7528\u3067\u3059\u3002\n\u3057\u304b\u3057\u3001Model\u306e\u5b9a\u7fa9\u304c\u66d6\u6627\u3067\u3001\u62c5\u3046\u8cac\u52d9\u304c\u591a\u304f\u306a\u308a\u3084\u3059\u3044\u306e\u3067\u3001Fat Model\u306b\u9665\u308a\u3084\u3059\u3044\u306a\u3068\u611f\u3058\u308b\u90e8\u5206\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\n\u30c1\u30fc\u30e0\u3067\u30eb\u30fc\u30eb\u3092\u4f5c\u308b\u306e\u3082\u3042\u308a\u3067\u3059\u304c\u3001\u554f\u984c\u304c\u8d77\u304d\u308b\u305f\u3073\u306b\u5b9a\u7fa9\u3059\u308b\u306e\u3082\u9762\u5012\u3067\u3059\u3057\u3001\u30c1\u30fc\u30e0\u958b\u767a\u3092\u3057\u3066\u3044\u308b\u3068\u65b0\u3057\u3044\u4eba\u304c\u5165\u3063\u3066\u304f\u308b\u4e8b\u306f\u3057\u3070\u3057\u3070\u3042\u308b\u3068\u601d\u3046\u306e\u3067\u3001\u5171\u901a\u8a8d\u8b58\u3092\u4fdd\u3064\u305f\u3081\u3001\u4e16\u9593\u4e00\u822c\u306b\u5e83\u307e\u3063\u3066\u3044\u308b\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u63a1\u7528\u3057\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\n\n\u305f\u3060\u3001\u7d30\u5206\u5316\u3055\u308c\u3059\u304e\u3066\u3044\u308b\u30d1\u30bf\u30fc\u30f3\u3084\u6982\u5ff5\u304c\u96e3\u3057\u3044\u3082\u306e\u306f\u3001\u63a1\u7528\u3057\u3066\u304b\u3089\u8ff7\u3046\u3053\u3068\u304c\u591a\u305d\u3046\u306a\u306e\u3067\u3001**\u7d30\u5206\u5316\u3055\u308c\u3059\u304e\u3066\u3044\u306a\u3044\u3057\u3001\u6982\u5ff5\u304c\u30b7\u30f3\u30d7\u30eb\u306a\u3082\u306e**\u3053\u3093\u306a\u90fd\u5408\u306e\u3044\u3044\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u63a2\u3057\u3066\u3044\u305f\u3068\u3053\u308d\u3001[Clean architecture(\u7ffb\u8a33)](http://blog.tai2.net/the_clean_architecture.html)\u306b\u51fa\u4f1a\u3044\u307e\u3057\u305f\u3002\n\n## Clean Architecture\u3068\u306f\n![CleanArchitecture-8b00a9d7e2543fa9ca76b81b05066629.jpg](https://qiita-image-store.s3.amazonaws.com/0/44142/a7643c53-8cc0-b079-0745-a20f06f23372.jpeg)\n\nClean Architecture\u3068\u306f\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u30ec\u30a4\u30e4\u30fc\u306b\u5206\u3051\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u3001\u95a2\u5fc3\u306e\u5206\u96e2\u3092\u9054\u6210\u3059\u308b\u305f\u3081\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\uff08\u539f\u6587\u306f[\u3053\u3061\u3089](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html)\uff09\n\nClean Architecture\u3092\u63a1\u7528\u3059\u308b\u3053\u3068\u3067\u4ee5\u4e0b\u306e\u70b9\u306b\u671f\u5f85\u3067\u304d\u307e\u3059\u3002\n\n- \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u72ec\u7acb\n  - \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306f\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u4f9d\u5b58\u3057\u306a\u3044\u3002\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u9053\u5177\u3068\u3057\u3066\u4f7f\u3046\u3053\u3068\u3092\u53ef\u80fd\u306b\u3057\u3001\u30b7\u30b9\u30c6\u30e0\u306f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u9650\u5b9a\u3055\u308c\u305f\u5236\u7d04\u306b\u7e1b\u3089\u308c\u306a\u3044\u3002\n- \u30c6\u30b9\u30c8\u53ef\u80fd\n  - \u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u306f\u3001UI\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3001\u30a6\u30a7\u30d6\u30b5\u30fc\u30d0\u30fc\u3001\u305d\u306e\u4ed6\u5916\u90e8\u306e\u8981\u7d20\u306a\u3057\u306b\u30c6\u30b9\u30c8\u3067\u304d\u308b\u3002\n- UI\u72ec\u7acb\n  - \u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u306e\u5909\u66f4\u306a\u3057\u306b\u3001UI\u3092\u7f6e\u304d\u63db\u3048\u3089\u308c\u308b\u3002\n- \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u72ec\u7acb\n  - Oracle\u3042\u308b\u3044\u306fSQL Server\u3092\u3001Mongo, BigTable, CouchDB\u3042\u308b\u3044\u306f\u4ed6\u306e\u3082\u306e\u3068\u4ea4\u63db\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u62d8\u675f\u3055\u308c\u306a\u3044\u3002\n- \u5916\u90e8\u6a5f\u80fd\u72ec\u7acb\n  - \u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u306f\u3001\u5358\u306b\u5916\u5074\u306b\u3064\u3044\u3066\u306a\u306b\u3082\u77e5\u3089\u306a\u3044\u3002\n\n## \u4f9d\u5b58\u30eb\u30fc\u30eb\n>\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3001\u5185\u5074\u306b\u5411\u304b\u3063\u3066\u306e\u307f\u4f9d\u5b58\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u5185\u5074\u306e\u5186\u306f\u3001\u5916\u5074\u306e\u5186\u306b\u3064\u3044\u3066\u4f55\u3082\u77e5\u308b\u3053\u3068\u306f\u306a\u3044\u3002\u3068\u304f\u306b\u3001\u5916\u5074\u306e\u5186\u3067\u5ba3\u8a00\u3055\u308c\u305f\u3082\u306e\u306e\u540d\u524d\u3092\u3001\u5185\u5074\u306e\u5186\u304b\u3089\u8a00\u53ca\u3057\u3066\u306f\u306a\u3089\u306a\u3044\u3002\u3053\u308c\u306f\u3001\u95a2\u6570\u3001\u30af\u30e9\u30b9\u3001\u5909\u6570\u3001\u3042\u308b\u3044\u306f\u305d\u306e\u4ed6\u3001\u540d\u524d\u304c\u4ed8\u3051\u3089\u308c\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3059\u3079\u3066\u306b\u8a00\u3048\u308b\u3002\n>\u540c\u69d8\u306b\u3001\u5916\u5074\u306e\u5186\u3067\u4f7f\u308f\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092\u5185\u5074\u306e\u5186\u3067\u4f7f\u3046\u3079\u304d\u3067\u306f\u306a\u3044\u3002\u3068\u304f\u306b\u3001\u305d\u308c\u3089\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u3001\u5916\u5074\u306e\u5186\u3067\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3042\u308c\u3070\u3002\u5916\u5074\u306e\u5186\u306e\u3069\u3093\u306a\u3082\u306e\u3082\u3001\u5185\u5074\u306e\u5186\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u3079\u304d\u3067\u306f\u306a\u3044\u306e\u3060\u3002\n\n\n\u4f9d\u5b58\u95a2\u4fc2\u306f\u5185\u5074\u4e00\u65b9\u5411\u306e\u307f\u3067\u3001\u5916\u5074\u306e\u30eb\u30fc\u30eb\u3092\u3001\u5185\u5074\u306b\u6301\u3061\u8fbc\u3093\u3067\u306f\u3044\u3051\u306a\u3044\u3002\n\n>\u53f3\u4e0b\u306e\u56f3\u306f\u3001\u3069\u306e\u3088\u3046\u306b\u5186\u306e\u5883\u754c\u3092\u307e\u305f\u304c\u308b\u306e\u304b\u306e\u4f8b\u3060\u3002\u3053\u308c\u306f\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3068\u30d7\u30ec\u30bc\u30f3\u30bf\u30fc\u304c\u3001\u6b21\u306e\u30ec\u30a4\u30e4\u30fc\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3068\u901a\u4fe1\u3059\u308b\u69d8\u5b50\u3092\u793a\u3057\u3066\u3044\u308b\u3002\u5236\u5fa1\u306e\u6d41\u308c\u306b\u6ce8\u610f\u3057\u3066\u6b32\u3057\u3044\u3002\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u304b\u3089\u306f\u3058\u307e\u308a\u3001\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3092\u629c\u3051\u3066\u3001\u30d7\u30ec\u30bc\u30f3\u30bf\u30fc\u3067\u5b9f\u884c\u3055\u308c\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u4f9d\u5b58\u6027\u306b\u3082\u6ce8\u610f\u3002\u3044\u305a\u308c\u3082\u3001\u5185\u5074\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3092\u5411\u3044\u3066\u3044\u308b\u3002\n\u308f\u308c\u308f\u308c\u306f\u3001\u3053\u306e\u660e\u3089\u304b\u306a\u77db\u76fe\u3092 \u4f9d\u5b58\u95a2\u4fc2\u9006\u8ee2\u306e\u539f\u5247(Dependency Inversion Principle) \u3067\u89e3\u6c7a\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3002\u305f\u3068\u3048\u3070\u3001Java\u306e\u3088\u3046\u306a\u8a00\u8a9e\u3067\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3068\u7d99\u627f\u95a2\u4fc2\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u4f9d\u5b58\u6027\u304c\u3001\u5883\u754c\u3092\u307e\u305f\u304c\u3063\u305f\u53f3\u96a3\u306e\u70b9\u306e\u5236\u5fa1\u306e\u6d41\u308c\u3068\u306f\u3001\u9006\u306b\u306a\u308b\u3088\u3046\u306b\u3059\u308b\u3060\u308d\u3046\u3002\n\n\u5fc5\u305a\u3046\u307e\u308c\u308b\u77db\u76fe\u3092[DIP(\u4f9d\u5b58\u95a2\u4fc2\u9006\u8ee2\u306e\u539f\u5247)](https://en.wikipedia.org/wiki/Dependency_inversion_principle)\u3067\u89e3\u6c7a\u3059\u308b\u3002\n\n\n## \u5404\u5c64\u306e\u5f79\u5272\n\n### Entities\n\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u306e\u70ba\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u3001\u3082\u3057\u304f\u306f\u30e1\u30bd\u30c3\u30c9\u3092\u6301\u3063\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002\n\n### Use cases\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u56fa\u6709\u306e\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u3002\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3068\u306e\u30c7\u30fc\u30bf\u306e\u6d41\u308c\u3092\u7d44\u307f\u7acb\u3066\u308b\u3002\n\n### Interface\n\u5916\u90e8\u304b\u3089\u3001\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3068\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30fc\u3067\u4f7f\u308f\u308c\u308b\u5185\u90e8\u5f62\u5f0f\u306b\u30c7\u30fc\u30bf\u3092\u5909\u63db\u3001\u307e\u305f\u306f\u5185\u90e8\u304b\u3089\u5916\u90e8\u306e\u6a5f\u80fd\u306b\u3082\u3063\u3068\u3082\u4fbf\u5229\u306a\u5f62\u5f0f\u306b\u3001\u30c7\u30fc\u30bf\u3092\u5909\u63db\u3059\u308b\u30a2\u30c0\u30d7\u30bf\u30fc\u3002\n\n### Frameworks & Drivers\n\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3084\u30c4\u30fc\u30eb\u304b\u3089\u69cb\u6210\u3055\u308c\u308b\u3002\u3053\u306e\u30ec\u30a4\u30e4\u30fc\u306b\u306f\u3001\u591a\u304f\u306e\u30b3\u30fc\u30c9\u306f\u66f8\u304b\u306a\u3044\u3002\u305f\u3060\u3057\u3001\u3072\u3068\u3064\u5185\u5074\u306e\u5186\u3068\u901a\u4fe1\u3059\u308b\u3064\u306a\u304e\u306e\u30b3\u30fc\u30c9\u306f\u3001\u3053\u3053\u306b\u542b\u307e\u308c\u308b\u3002\n\n## \u30dd\u30a4\u30f3\u30c8\n\n- \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30ec\u30a4\u30e4\u30fc\u306b\u5206\u3051\u308b\n- \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3084DB\u3092\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5916\u5074\u3068\u4f4d\u7f6e\u4ed8\u3051\u308b\n- \u4f9d\u5b58\u95a2\u4fc2\u306f\u5185\u5074\u4e00\u65b9\u5411\u306e\u307f\n- \u5916\u5074\u306e\u30eb\u30fc\u30eb\u3092\u3001\u5185\u5074\u306b\u6301\u3061\u8fbc\u3093\u3067\u306f\u3044\u3051\u306a\u3044\n- DIP\u3092\u5229\u7528\u3057\u3066\u4f9d\u5b58\u30eb\u30fc\u30eb\u3092\u5b88\u308b\n- Entities,Use cases\u306b\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u3001\u305d\u308c\u4ee5\u5916\u306b\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u9054\u6210\u3059\u308b\u305f\u3081\u306e\u30ed\u30b8\u30c3\u30af\u3092\u66f8\u304f\n\n\u3053\u3093\u306a\u611f\u3058\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\n\u3067\u306f\u3001\u5b9f\u969b\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002\n\n\n## \u4eca\u56de\u5b9f\u88c5\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\n\u30e6\u30fc\u30b6\u30fc\u30ea\u30bd\u30fc\u30b9\u3092\u63d0\u4f9b\u3059\u308b\u5358\u7d14\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3059\u3002\n\u6b21\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n- `POST /users` \u30e6\u30fc\u30b6\u30fc\u767b\u9332\n- `GET /users` \u30e6\u30fc\u30b6\u30fc\u4e00\u89a7\u53d6\u5f97\n- `GET /user/:id` \u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u306e\u53d6\u5f97\n\n`User`\u306f\u3001`id` `firstName` `lastName`\u3092\u6301\u3064\u3082\u306e\u3068\u3057\u307e\u3059\u3002\n\n\n## \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\n\n```\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 app\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 domain\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 infrastructure\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 interfaces\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 controllers\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 database\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 server.go\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 usecase\n\n```\n\n\u5404\u30d5\u30a9\u30eb\u30c0\u3068\u30ec\u30a4\u30e4\u30fc\u306e\u95a2\u4fc2\u6027\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n| \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d | \u30ec\u30a4\u30e4\u30fc |\n|:----------|:-----------|\n|domain|Entities|\n|infrastructure|Frameworks & Drivers|\n|interfaces|Interface|\n|usecase|Use cases|\n\n\ninterfaces\u914d\u4e0b\u306f\u3001database\u3068controller\u306b\u5206\u3051\u3066\u3044\u307e\u3059\u3002\n\n>\u3082\u3057\u3053\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304cSQL\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u3042\u308b\u306a\u3089\u3070\u3001\u3069\u3093\u306aSQL\u3067\u3042\u308c\u3001\u3053\u306e\u30ec\u30a4\u30e4\u30fc\u306b\u3001\u3082\u3063\u3068\u8a00\u3046\u3068\u3001\u3053\u306e\u30ec\u30a4\u30e4\u30fc\u306e\u4e2d\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u95a2\u9023\u3057\u305f\u90e8\u5206\u306b\u3001\u5236\u9650\u3055\u308c\u308b\u3079\u304d\u3060\u3002\n\n\u8aac\u660e\u306e\u4e00\u6587\u306b\u3082\u3042\u308b\u3088\u3046\u306b\u3001database\u306b\u95a2\u308f\u308b\u51e6\u7406\u3092database\u914d\u4e0b\u306b\u5236\u9650\u3059\u308b\u305f\u3081\u3067\u3059\u3002\n\u4eca\u56de\u306f\u3001controller\u304b\u3089\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3059\u305f\u3081\u3001presenter\u306f\u4f7f\u3044\u307e\u305b\u3093\u3002\n\n>4\u3064\u306e\u5186\u3058\u3083\u306a\u3044\u3068\u30c0\u30e1\u306a\u306e?\n>\u3044\u3084\u3001\u3053\u306e\u5186\u306f\u3001\u30b3\u30f3\u30bb\u30d7\u30c8\u3092\u4f1d\u3048\u308b\u305f\u3081\u306e\u65b9\u4fbf\u3060\u3002\u3053\u308c\u3089\u306e4\u3064\u4ee5\u5916\u304c\u6b32\u3057\u304f\u306a\u308b\u53ef\u80fd\u6027\u306f\u3042\u308b\u3002\u3061\u3087\u3046\u30694\u3064\u3067\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u3068\u3044\u3046\u6c7a\u307e\u308a\u306f\u306a\u3044\u3002\n\n\u53b3\u5bc6\u306b\uff14\u5c64\u3067\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u304b\u3068\u3044\u3046\u3068\u3001\u305d\u3046\u3067\u306f\u306a\u3044\u3089\u3057\u3044\u306e\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3084\u30c1\u30fc\u30e0\u306e\u30eb\u30fc\u30eb\u306b\u3088\u3063\u3066\u5909\u3048\u3066\u3082\u826f\u3055\u305d\u3046\u3067\u3059\u3002\n\n\n## Entities\u30ec\u30a4\u30e4\u30fc\n\u307e\u305a\u306f\u3001Entities\u30ec\u30a4\u30e4\u30fc\u3067\u3059\u3002\n`User`\u306f\u3001\u30d3\u30b8\u30cd\u30b9\u30eb\u30fc\u30eb\u306e\u70ba\u306e\u30c7\u30fc\u30bf\u306a\u306e\u3067\u3053\u306e\u5c64\u306b\u5c5e\u3057\u307e\u3059\u3002\n`User`\u306f\u3001`id` `firstName` `lastName`\u3092\u6301\u3063\u3066\u3044\u308b\u306e\u3067\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n``` domain/user.go\npackage domain\n\n\ntype User struct {\n\tID        int\n\tFirstName string\n\tLastName  string\n}\n\n```\n\n\n## Interfaces/database,  Frameworks & Drivers\u30ec\u30a4\u30e4\u30fc\n\u30c9\u30e1\u30a4\u30f3\u99c6\u52d5\u306e\u8003\u3048\u65b9\u304b\u3089\u3059\u308b\u3068\u6b21\u306fUse cases\u30ec\u30a4\u30e4\u30fc\u3092\u8aac\u660e\u3059\u308b\u3079\u304d\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001DIP\uff08\u4f9d\u5b58\u95a2\u4fc2\u9006\u8ee2\u306e\u539f\u5247\uff09\u306e\u8aac\u660e\u3092\u3057\u3084\u3059\u3044\u3088\u3046\u306bdatabase\u5468\u308a\u306b\u79fb\u308a\u307e\u3059\u3002\nDB\u306f\u3001MySQL\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\n``` infrastructure/sqlhandler.go\npackage infrastructure\n\n\nimport (\n\t\"database/sql\"\n\t_ \"github.com/go-sql-driver/mysql\"\n)\n\n\ntype SqlHandler struct {\n\tConn *sql.DB\n}\n\nfunc NewSqlHandler() *SqlHandler {\n\tconn, err := sql.Open(\"mysql\", \"root:@tcp(db:3306)/sample\")\n\tif err != nil {\n\t\tpanic(err.Error)\n\t}\n\tsqlHandler := new(SqlHandler)\n\tsqlHandler.Conn = conn\n\treturn sqlHandler\n}\n```\n\nDB\u63a5\u7d9a\u306b\u306f\u3001\u5916\u90e8\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u3001infrastructure\u5c64\u306b\u5b9a\u7fa9\u3057\u5916\u5074\u306e\u30eb\u30fc\u30eb\u3092\u5185\u5074\u306b\u6301\u3061\u8fbc\u307e\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\u5b9f\u969b\u306b\u30c7\u30fc\u30bf\u306e\u3084\u308a\u53d6\u308a\u3092\u3059\u308b\u51e6\u7406\u306finterfaces/database\u5c64\u306b\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n``` interfaces/database/user_repository.go\npackage database\n\nimport \"app/domain\"\n\n\ntype UserRepository struct {\n\tSqlHandler\n}\n\nfunc (repo *UserRepository) Store(u domain.User) (id int, err error) {\n\tresult, err := repo.Execute(\n\t\t\"INSERT INTO users (first_name, last_name) VALUES (?,?)\", u.FirstName, u.LastName,\n\t)\n\tif err != nil {\n\t\treturn\n\t}\n\tid64, err := result.LastInsertId()\n\tif err != nil {\n\t\treturn\n\t}\n\tid = int(id64)\n\treturn\n}\n\nfunc (repo *UserRepository) FindById(identifier int) (user domain.User, err error) {\n\trow, err := repo.Query(\"SELECT id, first_name, last_name FROM users WHERE id = ?\", identifier)\n\tdefer row.Close()\n\tif err != nil {\n\t\treturn\n\t}\n\tvar id int\n\tvar firstName string\n\tvar lastName string\n\trow.Next()\n\tif err = row.Scan(&id, &firstName, &lastName); err != nil {\n\t\treturn\n\t}\n\tuser.ID = id\n\tuser.FirstName = firstName\n\tuser.LastName = lastName\n\treturn\n}\n\nfunc (repo *UserRepository) FindAll() (users domain.Users, err error) {\n\trows, err := repo.Query(\"SELECT id, first_name, last_name FROM users\")\n\tdefer rows.Close()\n\tif err != nil {\n\t\treturn\n\t}\n\tfor rows.Next() {\n\t\tvar id int\n\t\tvar firstName string\n\t\tvar lastName string\n\t\tif err := rows.Scan(&id, &firstName, &lastName); err != nil {\n\t\t\tcontinue\n\t\t}\n\t\tuser := domain.User{\n\t\t\tID:        id,\n\t\t\tFirstName: firstName,\n\t\t\tLastName:  lastName,\n\t\t}\n\t\tusers = append(users, user)\n\t}\n\treturn\n}\n```\n\n\u3053\u3053\u3067\u306f`UserRepository`\u306b\u3001\u5148\u307b\u3069\u5b9a\u7fa9\u3057\u305f`SqlHandler`\u3092\u57cb\u3081\u8fbc\u307f\uff08Embed\uff09DB\u51e6\u7406\u3092\u3057\u3066\u3044\u307e\u3059\u3002\u5f15\u6570\u3084\u623b\u308a\u5024\u306b\u306f\u3001domain\u5c64\u306e`User`\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002`domain/user`\u306finterfaces\u5c64\u306e\u5185\u5074\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u4f9d\u5b58\u95a2\u4fc2\u306f\u5b88\u308c\u3066\u3044\u305d\u3046\u3067\u3059\u3002\n\n\u3057\u304b\u3057\u3001`SqlHandler`\u306f\u3001\u4e00\u756a\u5916\u5074\u306einfrastructure\u5c64\u306b\u5b9a\u7fa9\u3057\u307e\u3057\u305f\u3002\n\u3053\u308c\u3092\u5358\u7d14\u306b\u547c\u3073\u51fa\u3057\u3066\u3057\u307e\u3046\u3068**\u5916\u5074\u306e\u30eb\u30fc\u30eb\u3092\u3001\u5185\u5074\u306b\u6301\u3061\u8fbc\u3093\u3067\u306f\u3044\u3051\u306a\u3044**\u306b\u53cd\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u305d\u3053\u3067DIP\uff08\u4f9d\u5b58\u95a2\u4fc2\u9006\u8ee2\u306e\u539f\u5247\uff09\u306e\u767b\u5834\u3067\u3059\u3002\nGo\u8a00\u8a9e\u3067\u306f\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u5229\u7528\u3057\u3066\u6b21\u306e\u3088\u3046\u306b\u5b9f\u73fe\u3057\u307e\u3059\u3002\n\n``` interface/database/sql_handler.go\npackage database\n\n\ntype SqlHandler interface {\n\tExecute(string, ...interface{}) (Result, error)\n\tQuery(string, ...interface{}) (Row, error)\n}\n\ntype Result interface {\n\tLastInsertId() (int64, error)\n\tRowsAffected() (int64, error)\n}\n\ntype Row interface {\n\tScan(...interface{}) error\n\tNext() bool\n\tClose() error\n}\n```\n\n`interfaces/database/user_repository.go`\u3068\u540c\u968e\u5c64\u306b`SqlHandler`\u306e\u632f\u308b\u821e\u3044\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002database\u5c64\u304b\u3089\u5b9f\u969b\u306b\u547c\u3073\u51fa\u3059\u306e\u306f\u3053\u306e\u632f\u308b\u821e\u3044\u3067\u3059\u3002\n\n`Execute`\u30e1\u30bd\u30c3\u30c9\u3001`Query`\u30e1\u30bd\u30c3\u30c9\u306e\u623b\u308a\u5024\u306b\u6ce8\u76ee\u3057\u3066\u304f\u3060\u3055\u3044\u3002`Result`\u3068`Row`\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u305d\u3046\u3059\u308b\u3053\u3068\u3067\u4f9d\u5b58\u30eb\u30fc\u30eb\u3092\u5b88\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u3053\u306e\u307e\u307e\u3067\u306f`infrastructure.SqlHndler`\u304c\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u306b\u6e96\u62e0\u3057\u3066\u3044\u306a\u3044\u70ba\u3001\u6761\u4ef6\u3092\u6e80\u305f\u3059\u3088\u3046\u4fee\u6b63\u3057\u307e\u3059\u3002\n\n``` infrastructure/sqlhandler.go\npackage infrastructure\n\nimport (\n\t\"database/sql\"\n\t_ \"github.com/go-sql-driver/mysql\"\n\t\"app/interfaces/database\"\n)\n\n\ntype SqlHandler struct {\n\tConn *sql.DB\n}\n\nfunc NewSqlHandler() database.SqlHandler {\n\tconn, err := sql.Open(\"mysql\", \"root:@tcp(db:3306)/sample\")\n\tif err != nil {\n\t\tpanic(err.Error)\n\t}\n\tsqlHandler := new(SqlHandler)\n\tsqlHandler.Conn = conn\n\treturn sqlHandler\n}\n\nfunc (handler *SqlHandler) Execute(statement string, args ...interface{}) (database.Result, error) {\n\tres := SqlResult{}\n\tresult, err := handler.Conn.Exec(statement, args...)\n\tif err != nil {\n\t\treturn res, err\n\t}\n\tres.Result = result\n\treturn res, nil\n}\n\nfunc (handler *SqlHandler) Query(statement string, args ...interface{}) (database.Row, error) {\n\trows, err := handler.Conn.Query(statement, args...)\n\tif err != nil {\n\t\treturn new(SqlRow), err\n\t}\n\trow := new(SqlRow)\n\trow.Rows = rows\n\treturn row, nil\n}\n\ntype SqlResult struct {\n\tResult sql.Result\n}\n\nfunc (r SqlResult) LastInsertId() (int64, error) {\n\treturn r.Result.LastInsertId()\n}\n\nfunc (r SqlResult) RowsAffected() (int64, error) {\n\treturn r.Result.RowsAffected()\n}\n\ntype SqlRow struct {\n\tRows *sql.Rows\n}\n\nfunc (r SqlRow) Scan(dest ...interface{}) error {\n\treturn r.Rows.Scan(dest...)\n}\n\nfunc (r SqlRow) Next() bool {\n\treturn r.Rows.Next()\n}\n\nfunc (r SqlRow) Close() error {\n\treturn r.Rows.Close()\n}\n\n```\n\nGo\u306e\u5834\u5408\u3001\u660e\u793a\u7684\u306b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u7d99\u627f\u3057\u306a\u304f\u3066\u3082\u3001\u5b9a\u7fa9\u3055\u308c\u305f\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u88c5\u3057\u3066\u3044\u308c\u3070\u6e96\u62e0\u3057\u3066\u3044\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u3044\u308f\u3086\u308b[\u30c0\u30c3\u30af\u30bf\u30a4\u30d4\u30f3\u30b0](https://ja.wikipedia.org/wiki/%E3%83%80%E3%83%83%E3%82%AF%E3%83%BB%E3%82%BF%E3%82%A4%E3%83%94%E3%83%B3%E3%82%B0)\u3067\u3059\u3002\n\n\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u6e80\u305f\u3059\u305f\u3081\u3001\u5916\u90e8\u304b\u3089\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b`sql.Rows`\u3068`sql.Result`\u3092\u30e9\u30c3\u30d7\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u6ce8\u76ee\u3059\u3079\u304d\u3068\u3053\u308d\u306f\u3001`func NewSqlHandler() database.SqlHandler `\u306e\u623b\u308a\u5024\u304c\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u306b\u306a\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u3067\u3059\u3002`Execute`\u30e1\u30bd\u30c3\u30c9\u3001`Query`\u30e1\u30bd\u30c3\u30c9\u306e\u623b\u308a\u5024\u3082\u540c\u69d8\u3067\u3059\u3002\u3053\u308c\u306b\u3088\u308a`interface/database/sql_handler.go`\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u6e80\u305f\u3057\u305f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n## Use cases\u30ec\u30a4\u30e4\u30fc\n\u3053\u306e\u30ec\u30a4\u30e4\u30fc\u3067\u306f\u3001`interfaces/database`\u304b\u3089\u306eInput Port\u306e\u5f79\u5272\u3001\u304a\u3088\u3073`interfaces/controllers`\u3078\u306eGateway\u306e\u5f79\u5272\u3092\u62c5\u3044\u307e\u3059\u3002\n\n``` usecase/user_interactor.go\npackage usecase\n\nimport \"app/domain\"\n\n\ntype UserInteractor struct {\n\tUserRepository UserRepository\n}\n\nfunc (interactor *UserInteractor) Add(u domain.User) (err error) {\n\terr = interactor.UserRepository.Store(u)\n\treturn\n}\n\nfunc (interactor *UserInteractor) Users() (user domain.Users, err error) {\n\tuser, err = interactor.UserRepository.FindAll()\n\treturn\n}\n\nfunc (interactor *UserInteractor) UserById(identifier int) (user domain.User, err error) {\n\tuser, err = interactor.UserRepository.FindById(identifier)\n\treturn\n}\n\n```\n\ndatabase\u5c64\u306f\u5916\u5074\u306a\u306e\u3067\u3001\u3053\u3053\u3067\u3082DIP\u3092\u5229\u7528\u3057\u3066\u4f9d\u5b58\u30eb\u30fc\u30eb\u3092\u5b88\u308a\u307e\u3059\u3002\n\n``` usecase/user_repository.go\npackage usecase\n\nimport \"app/domain\"\n\n\ntype UserRepository interface {\n\tStore(domain.User) (int, error)\n\tFindById(int) (domain.User, error)\n\tFindAll() (domain.Users, error)\n}\n \n```\n\n`interfaces/database`\u304b\u3089\u306eInput\u3092`usecase/user_repository.go`\u3067\u3001`interfaces/controllers`\u3078\u306eGateway\u3092`usecase/user_interactor.go`\u3067\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n\n## Interfaces/controllers,  Frameworks & Drivers\u30ec\u30a4\u30e4\u30fc\n\u6b21\u306b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3068\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u5468\u308a\u3092\u3057\u3063\u304b\u308a\u66f8\u304f\u306e\u306f\u3061\u3087\u3063\u3068\u624b\u9593\u3060\u3063\u305f\u306e\u3067\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e[gin](https://github.com/gin-gonic/gin)\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n``` interfases/controllers/user_controller.go\npackage controllers\n\nimport (\n\t\"app/domain\"\n\t\"app/interfaces/database\"\n\t\"app/usecase\"\n\t\"strconv\"\n)\n\n\ntype UserController struct {\n\tInteractor usecase.UserInteractor\n}\n\nfunc NewUserController(sqlHandler database.SqlHandler) *UserController {\n\treturn &UserController{\n\t\tInteractor: usecase.UserInteractor{\n\t\t\tUserRepository: &database.UserRepository{\n\t\t\t\tSqlHandler: sqlHandler,\n\t\t\t},\n\t\t},\n\t}\n}\n\nfunc (controller *UserController) Create(c Context) {\n\tu := domain.User{}\n\tc.Bind(&u)\n\terr := controller.Interactor.Add(u)\n\tif err != nil {\n\t\tc.JSON(500, NewError(err))\n\t\treturn\n\t}\n\tc.Status(201)\n}\n\nfunc (controller *UserController) Index(c Context) {\n\tusers, err := controller.Interactor.Users()\n\tif err != nil {\n\t\tc.JSON(500, NewError(err))\n\t\treturn\n\t}\n\tc.JSON(200, users)\n}\n\nfunc (controller *UserController) Show(c Context) {\n\tid, _ := strconv.Atoi(c.Param(\"id\"))\n\tuser, err := controller.Interactor.UserById(id)\n\tif err != nil {\n\t\tc.JSON(500, NewError(err))\n\t\treturn\n\t}\n\tc.JSON(200, user)\n}\n```\n\n`UserController`\u306f\u3001`usecase.UserInteractor`\u3092\u5185\u5305\u3057\u3001`func NewUserController(sqlHandler database.SqlHandler) *UserController `\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u308b\u969b\u306b\u3001`database.SqlHandler`\u3092\u5f15\u6570\u306b\u53d6\u308a\u307e\u3059\u3002\n\n\ngin\u306f`gin.Context`\u3092\u4f7f\u7528\u3059\u308b\u306e\u3067\u3001\u4eca\u56de\u5229\u7528\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n``` interfaces/controllers/context.go\npackage controllers\n\ntype Context interface {\n\tParam(string) string\n\tBind(interface{}) error\n\tStatus(int)\n\tJSON(int, interface{})\n}\n\n```\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u51e6\u7406\u306f\u3001\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u7528\u3059\u308b\u306e\u3067\u3001infrastructure\u5c64\u306b\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n``` infrastructure/router.go\npackage infrastructure\n\nimport (\n\tgin \"gopkg.in/gin-gonic/gin.v1\"\n\n\t\"app/interfaces/controllers\"\n)\n\n\nvar Router *gin.Engine\n\nfunc init() {\n\trouter := gin.Default()\n\n\tuserController := controllers.NewUserController(NewSqlHandler())\n\n\trouter.POST(\"/users\", func(c *gin.Context) { userController.Create(c) })\n\trouter.GET(\"/users\", func(c *gin.Context) { userController.Index(c) })\n\trouter.GET(\"/users/:id\", func(c *gin.Context) { userController.Show(c) })\n\n\tRouter = router\n}\n\n```\n\n`gin.Context`\u306f\u3001`interfaces/controllers/context.go`\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u6e80\u305f\u3057\u3066\u3044\u308b\u305f\u3081\u3001Controller\u306e\u5f15\u6570\u3068\u3057\u3066\u6e21\u305b\u3066\u3044\u307e\u3059\u3002\n\n\n\u6700\u5f8c\u306b\u3001`sever.go`\u304b\u3089\u30eb\u30fc\u30c6\u30a4\u30f3\u30b0\u3092\u547c\u3073\u51fa\u3057\u3066\u4e00\u901a\u308a\u5b9f\u88c5\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n``` server.go\npackage main\n\nimport \"app/infrastructure\"\n\n\nfunc main() {\n\tinfrastructure.Router.Run()\n}\n\n```\n\nGo\u306f\u7c21\u5358\u306b\u30b5\u30fc\u30d0\u30fc\u304c\u7acb\u3066\u3089\u308c\u308b\u306e\u3067\u3001\u30b5\u30f3\u30d7\u30eb\u306b\u3082\u5411\u3044\u3066\u3044\u307e\u3059\u3002\n\n\u6700\u7d42\u7684\u306a\u30c4\u30ea\u30fc\u69cb\u9020\u3067\u3059\u3002\n\n```\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 app\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 domain\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 user.go\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 infrastructure\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 router.go\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 sqlhandler.go\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 interfaces\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 controllers\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 context.go\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 error.go\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 user_controller.go\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 database\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u251c\u2500\u2500 sqlhandler.go\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0     \u2514\u2500\u2500 user_repository.go\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 server.go\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 usecase\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 user_interactor.go\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 user_repository.go\n\n```\n\n## \u5b9f\u884c\n\u3067\u306f\u3001\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\uff08\u30c7\u30fc\u30bf\u306f\u9069\u5f53\u306b\u5165\u308c\u3066\u3044\u307e\u3059\uff09\n\n``` terminal\n$ go run server.go \n```\n\n\u307e\u305a\u306f\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\u3002\n\n\n``` terminal\n// User\u767b\u9332\n$vcurl -i -H \"Accept: application/json\" -H \"Content-type: application/json\" -X POST -d '{\"FirstName\": \"Susan\", \"LastName\": \"Taylor\"}' localhost:8080/users\nHTTP/1.1 201 Created\n\n\n// User\u4e00\u89a7\n$ curl -i -H 'Content-Type:application/json' localhost:8080/users\nHTTP/1.1 200 OK\n[\n {\"ID\":1,\"FirstName\":\"Patricia\",\"LastName\":\"Smith\"},\n {\"ID\":2,\"FirstName\":\"Linda\",\"LastName\":\"Johnson\"},\n {\"ID\":3,\"FirstName\":\"Mary\",\"LastName\":\"William\"},\n {\"ID\":4,\"FirstName\":\"Robert\",\"LastName\":\"Jones\"},\n {\"ID\":5,\"FirstName\":\"James\",\"LastName\":\"Brown\"},\n {\"ID\":6,\"FirstName\":\"Susan\",\"LastName\":\"Taylor\"},\n]\n\n// User\u60c5\u5831\n$ curl -i -H 'Content-Type:application/json' localhost:8080/users/3\nHTTP/1.1 200 OK\n{\"ID\":3,\"FirstName\":\"Mary\",\"LastName\":\"William\"}\n\n```\n\n\u671f\u5f85\u901a\u308a\u306e\u7d50\u679c\u304c\u8fd4\u3063\u3066\u304d\u307e\u3057\u305f\uff01\n\n## \u4ed5\u69d8\u5909\u66f4\n\u3053\u3053\u3067\u3001\u4ed5\u69d8\u5909\u66f4\u304c\u3042\u3063\u305f\u969b\u306e\u5bfe\u5fdc\u3092\u3044\u304f\u3064\u304b\u898b\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n### FullName\u3092\u30ec\u30b9\u30dd\u30f3\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u8ffd\u52a0\u3057\u3066\u6b32\u3057\u3044\n\n\u8ffd\u52a0\u3067`FullName`\u3092\u8fd4\u3057\u3066\u6b32\u3057\u3044\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u304b\u3089\u4f9d\u983c\u304c\u3042\u308a\u307e\u3057\u305f\u3002`FirstName`\u3068`LastName`\u3092\u8fd4\u3057\u3066\u308b\u3093\u3060\u304b\u3089\u305d\u3063\u3061\u3067\u3084\u3063\u3066\u3088\u3002\u3002\u3068\u3044\u3046\u601d\u3044\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u305d\u3053\u3092\u3050\u3063\u3068\u3053\u3089\u3048\u3066\u5bfe\u5fdc\u3057\u307e\u3059\u3002\uff08\u5358\u7d14\u306b\u3044\u3044\u4f8b\u304c\u6d6e\u304b\u3073\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3002\uff09\n\n\u307e\u305a\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u56fa\u6709\u306e\u554f\u984c\u306a\u306e\u304b\u3001\u305d\u3046\u3067\u306f\u306a\u3044\u306e\u304b\u5207\u308a\u5206\u3051\u307e\u3059\u3002Use Case\u5c64\u3088\u308a\u5185\u5074\u3067\u5bfe\u5fdc\u3059\u308b\u304b\u5916\u5074\u3067\u5bfe\u5fdc\u3059\u308b\u304b\u5224\u65ad\u3057\u307e\u3059\u3002\n\n`FullName`\u306e\u8ffd\u52a0\u3068\u306f\u3001`User`\u306b\u95a2\u308f\u308b\u4ed5\u69d8\u5909\u66f4\u306a\u305f\u3081\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u56fa\u6709\u306e\u554f\u984c\u3068\u6349\u3048\u3066\u826f\u3055\u305d\u3046\u3067\u3059\u3002\n\n\u307e\u305a\u3001domain\u5c64\u306e`User`\u306b`FullName`\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n``` domain/user.go\npackage domain\n\n\ntype User struct {\n\tID        int\n\tFirstName string\n\tLastName  string\n\tFullName  string\n}\n```\n\ndatabase\u5c64\u304b\u3089\u76f4\u63a5`FullName`\u306b\u5024\u3092\u6e21\u3057\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u304c\u3001database\u3068\u306f\u95a2\u4fc2\u306a\u3044\u51e6\u7406\u306a\u306e\u3067database\u5c64\u306b\u306f\u66f8\u304d\u307e\u305b\u3093\u3002\n\u4ee3\u308f\u308a\u306b`domain.User`\u306b`Build`\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n\n``` domain/user.go\npackage domain\n\nimport \"fmt\"\n\n\ntype User struct {\n\tID        int\n\tFirstName string\n\tLastName  string\n\tFullName  string\n}\n\nfunc (u *User) Build() *User {\n\tu.FullName = fmt.Sprintf(\"%s %s\", u.FirstName, u.LastName)\n\treturn u\n}\n\n```\n\n`Build`\u30e1\u30bd\u30c3\u30c9\u306f\u81ea\u8eab\u306e\u60c5\u5831\u3092\u518d\u69cb\u7bc9\u3057\u81ea\u8eab\u3092\u8fd4\u3059\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u3002\n`FullName`\u306e\u51e6\u7406\u306f\u3053\u306e\u4e2d\u306b\u66f8\u304d\u307e\u3059\u3002\n\n`Build`\u30e1\u30bd\u30c3\u30c9\u306fdatabase\u5c64\u304b\u3089\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\n\n``` interfaces/database/user_repository.go\n\nfunc (repo *UserRepository) FindById(identifier int) (user domain.User, err error) {\n\trow, err := repo.Query(\"SELECT id, first_name, last_name FROM users WHERE id = ?\", identifier)\n\tdefer row.Close()\n\tif err != nil {\n\t\treturn\n\t}\n\tvar id int\n\tvar firstName string\n\tvar lastName string\n\trow.Next()\n\tif err = row.Scan(&id, &firstName, &lastName); err != nil {\n\t\treturn\n\t}\n\tuser.ID = id\n\tuser.FirstName = firstName\n\tuser.LastName = lastName\n\tuser.Build()\n\treturn\n}\n\nfunc (repo *UserRepository) FindAll() (users domain.Users, err error) {\n\trows, err := repo.Query(\"SELECT id, first_name, last_name FROM users\")\n\tdefer rows.Close()\n\tif err != nil {\n\t\treturn\n\t}\n\tfor rows.Next() {\n\t\tvar id int\n\t\tvar firstName string\n\t\tvar lastName string\n\t\tif err := rows.Scan(&id, &firstName, &lastName); err != nil {\n\t\t\tcontinue\n\t\t}\n\t\tuser := domain.User{\n\t\t\tID:        id,\n\t\t\tFirstName: firstName,\n\t\t\tLastName:  lastName,\n\t\t}\n\t\tusers = append(users, *user.Build())\n\t}\n\treturn\n}\n\n```\n\n`FindById`\u3001`FindAll`\u30e1\u30bd\u30c3\u30c9\u306e\u5024\u3092\u8fd4\u3059\u524d\u306b`Build`\u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3093\u3067\u3044\u307e\u3059\u3002\n`Build`\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3067\u3001\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092usecase\u5c64\u3088\u308a\u5185\u5074\u306b\u7559\u3081\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n`FullName`\u306f\u30a2\u30c3\u30d1\u30fc\u30b1\u30fc\u30b9\u306b\u3057\u3066\u6b32\u3057\u3044\uff01\u306a\u3069\u306e\u8ffd\u52a0\u8981\u6c42\u304c\u6765\u305f\u5834\u5408\u3082`Build`\u30e1\u30bd\u30c3\u30c9\u5185\u3092\u4fee\u6b63\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n\n\n\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n``` terminal\n$ curl -i -H 'Content-Type:application/json' localhost:8080/users/3\nHTTP/1.1 200 OK\n{\"ID\":3,\"FirstName\":\"Mary\",\"LastName\":\"William\",\"FullName\":\"Mary William\"}\n```\n\n`FullName`\u304c\u8fd4\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n### POST /users \u306b\u4f5c\u6210\u3057\u305fUser\u60c5\u5831\u3092\u8ffd\u52a0\u3057\u3066\u6b32\u3057\u3044\n\n\u306f\u3044\u3001\u305d\u306e\u65b9\u304c\u4f7f\u3044\u52dd\u624b\u304c\u3088\u3055\u305d\u3046\u3067\u3059\u3002\nUser\u4f5c\u6210\u5f8c\u3001User\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3066\u304f\u308b\u51e6\u7406\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\u3053\u3061\u3089\u3082\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u56fa\u6709\u306e\u554f\u984c\u3068\u6349\u3048\u307e\u3059\u3002\n\n\u307e\u305a\u306f\u3001`usecase/user_interactor.go`\u306e`Add`\u30e1\u30bd\u30c3\u30c9\u3067User\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3001\u8fd4\u5374\u3059\u308b\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\n\n``` usecase/user_interactor.go\n\nfunc (interactor *UserInteractor) Add(u domain.User) (user domain.User, err error) {\n\tidentifier, err := interactor.UserRepository.Store(u)\n\tif err != nil {\n\t\treturn\n\t}\n\tuser, err = interactor.UserRepository.FindById(identifier)\n\treturn\n}\n```\n\ncontroller\u3082\u3001interactor\u304b\u3089\u5024\u3092\u53d7\u3051\u53d6\u308a\u3001User\u60c5\u5831\u3092\u8fd4\u5374\u3059\u308b\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\n\n``` interfaces/controllers/user_controller.go\nfunc (controller *UserController) Create(c Context) {\n\tu := domain.User{}\n\tc.Bind(&u)\n\tuser, err := controller.Interactor.Add(u)\n\tif err != nil {\n\t\tc.JSON(500, NewError(err))\n\t\treturn\n\t}\n\tc.JSON(201, user)\n}\n```\n\n\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n``` terminal\n$ curl -i -H \"Accept: application/json\" -H \"Content-type: application/json\" -X POST -d '{\"FirstName\": \"David\", \"LastName\": \"Wilson\"}' localhost:8080/users\nTTP/1.1 201 Created\n\n{\"ID\":7,\"FirstName\":\"David\",\"LastName\":\"Wilson\",\"FullName\":\"David Wilson\"}\n```\n\nUser\u60c5\u5831\u304c\u8fd4\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n## \u307e\u3068\u3081\nClean Architecture\u306e\u30eb\u30fc\u30eb\u306b\u5247\u308b\u3053\u3068\u3067\u5404\u5c64\u306e\u5f79\u5272\u304c\u306f\u3063\u304d\u308a\u3057\u3001\u758e\u7d50\u5408\u3068\u306a\u3063\u305f\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\u305f\u3060\u3001\u898b\u3066\u306e\u901a\u308a\u7c21\u5358\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3082\u3053\u308c\u3060\u3051\u306e\u30b3\u30fc\u30c9\u91cf\u306b\u306a\u308a\u307e\u3059\u3002\u4ed6\u306e\u65b9\u3082\u8a00\u308f\u308c\u3066\u3044\u308b\u901a\u308a\u3001\u5c0f\u3055\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3059\u3068\u30b3\u30b9\u30c8\u306b\u898b\u5408\u3046\u307b\u3069\u306e\u52b9\u679c\u306f\u671f\u5f85\u3067\u304d\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u3057\u304b\u3057\u3001\u4e00\u5ea6\u66f8\u3044\u3066\u3057\u307e\u3048\u3070\u3001\u3069\u3053\u306b\u4f55\u3092\u66f8\u3051\u3070\u3044\u3044\u304b\u6bd4\u8f03\u7684\u308f\u304b\u308a\u3084\u3059\u3044\u306e\u3067\u3001\u5927\u304d\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3084\u30c1\u30fc\u30e0\u958b\u767a\u306b\u306f\u5411\u3044\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u4eca\u56de\u306f\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u89e6\u308b\u305f\u3081\u306binfrastructure\u5c64\u306b\u30e9\u30c3\u30d7\u51e6\u7406\u3092\u5b9a\u7fa9\u3057\u3001\u4f9d\u5b58\u30eb\u30fc\u30eb\u3092\u5b88\u308a\u307e\u3057\u305f\u304c\u3001\u30b3\u30fc\u30c9\u91cf\u304c\u5897\u3048\u5197\u9577\u306b\u306a\u308b\u306e\u3067\u3001\u30d3\u30ba\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306e\u5c64\u3001\u3059\u306a\u308f\u3061Use case\u304b\u3089\u5185\u5074\u3055\u3048\u4f9d\u5b58\u30eb\u30fc\u30eb\u3092\u5b88\u308c\u3070Interface\u5c64\u307e\u3067\u306f\u5916\u90e8\u306b\u4f9d\u5b58\u3057\u3066\u3082\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\nClean Architecture\u306b\u671f\u5f85\u3059\u308b\u4e8b\u306e\u691c\u8a3c\uff08\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u72ec\u7acb\u3001\u30c6\u30b9\u30c8\u53ef\u80fd\u306a\u3069\uff09\u3082\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u7d50\u69cb\u306a\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u306a\u3063\u305f\u306e\u3067\u3001\u5225\u306e\u6a5f\u4f1a\u306b\u691c\u8a3c\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u4eca\u56de\u4f7f\u7528\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f[\u3053\u3061\u3089](https://github.com/hirotakan/go-cleanarchitecture-sample)\u306b\u3042\u3052\u3066\u3044\u307e\u3059\u3002\n\n## \u53c2\u8003\u6587\u732e\n- [The Clean Architecture](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html)\n- [\u30af\u30ea\u30fc\u30f3\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3(The Clean Architecture\u7ffb\u8a33)](http://blog.tai2.net/the_clean_architecture.html)\n- [Applying The Clean Architecture to Go applications](http://manuel.kiessling.net/2012/09/28/applying-the-clean-architecture-to-go-applications/)\n- [\u6301\u7d9a\u53ef\u80fd\u306a\u958b\u767a\u3092\u76ee\u6307\u3059 ~ \u30c9\u30e1\u30a4\u30f3\u30fb\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u99c6\u52d5\uff08\u30af\u30ea\u30fc\u30f3\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff09 + \u5358\u65b9\u5411\u306b\u5236\u9650\u3057\u305f\u51e6\u7406 + FRP](http://qiita.com/kondei/items/41c28674c1bfd4156186)\n- [\u3010\u30bb\u30c3\u30b7\u30e7\u30f3\u30ec\u30dd\u30fc\u30c8\u3011 Developers.IO 2016 in Osaka \u3067 \u30b2\u30f3\u30d0\u306e\u30af\u30ea\u30fc\u30f3\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u767a\u8868\u3057\u307e\u3057\u305f\uff01 #cmdevio2016](http://dev.classmethod.jp/event/%E3%80%90%E3%82%BB%E3%83%83%E3%82%B7%E3%83%A7%E3%83%B3%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88%E3%80%91-developers-io-2016-in-osaka-%E3%81%A7-%E3%82%B2%E3%83%B3%E3%83%90%E3%81%AE%E3%82%AF%E3%83%AA/)\n", "tags": ["CleanArchitecture", "Go", "golang", "\u30af\u30ea\u30fc\u30f3\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3", "\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3"]}