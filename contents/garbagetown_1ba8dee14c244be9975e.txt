{"context": " More than 1 year has passed since last update.@Before\u30d5\u30a3\u30eb\u30bf\u3068log4j\u306eMDC\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u307f\u307e\u3057\u305f\u3002\n\u8907\u6570\u9805\u76ee\u3092\u51fa\u529b\u3057\u305f\u3044\u306e\u3067\u3001NDC\u3067\u306f\u306a\u304fMDC\u3092\u4f7f\u3044\u307e\u3059\u3002\u4e0b\u8a18\u306e\u3088\u3046\u306b\u3057\u3066 request \u3068session \u304b\u3089\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3066\u30ad\u30fc\u3092\u4ed8\u3051\u3066MDC\u306b\u767b\u9332\u3057\u307e\u3059\u3002\n@Before(priority = 0)\npublic static void before() {\n    MDC.put(\"ip\", request.remoteAddress);\n    MDC.put(\"id\", session.getId());\n}\n\nlog4j.properties\u3067 %X{key} \u3068\u3059\u308c\u3070\u3001\u767b\u9332\u3057\u305f\u5024\u3092\u30ed\u30b0\u306b\u51fa\u529b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n# Console\nlog4j.appender.Console=org.apache.log4j.ConsoleAppender\nlog4j.appender.Console.layout=org.apache.log4j.PatternLayout\nlog4j.appender.Console.layout.ConversionPattern=%d{ABSOLUTE} %X{ip} %X{id} %-5p ~ %m%n\n\n\n\u53c2\u8003\n\ntak\u5bb6\u3076\u308d\u3050 log4j\u306eNDC\u3068MDC\n\n@Before\u30d5\u30a3\u30eb\u30bf\u3068log4j\u306eMDC\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u8907\u6570\u9805\u76ee\u3092\u51fa\u529b\u3057\u305f\u3044\u306e\u3067\u3001NDC\u3067\u306f\u306a\u304fMDC\u3092\u4f7f\u3044\u307e\u3059\u3002\u4e0b\u8a18\u306e\u3088\u3046\u306b\u3057\u3066 `request` \u3068`session` \u304b\u3089\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3066\u30ad\u30fc\u3092\u4ed8\u3051\u3066MDC\u306b\u767b\u9332\u3057\u307e\u3059\u3002\n\n```java\n@Before(priority = 0)\npublic static void before() {\n    MDC.put(\"ip\", request.remoteAddress);\n    MDC.put(\"id\", session.getId());\n}\n```\n\nlog4j.properties\u3067 `%X{key}` \u3068\u3059\u308c\u3070\u3001\u767b\u9332\u3057\u305f\u5024\u3092\u30ed\u30b0\u306b\u51fa\u529b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```ddd\n# Console\nlog4j.appender.Console=org.apache.log4j.ConsoleAppender\nlog4j.appender.Console.layout=org.apache.log4j.PatternLayout\nlog4j.appender.Console.layout.ConversionPattern=%d{ABSOLUTE} %X{ip} %X{id} %-5p ~ %m%n\n```\n\n## \u53c2\u8003\n\n- [tak\u5bb6\u3076\u308d\u3050 log4j\u306eNDC\u3068MDC](http://takya2.blog33.fc2.com/blog-entry-18.html)", "tags": ["PlayFramework1.2.5"]}