{"context": " More than 1 year has passed since last update.\n\n\u4ee5\u4e0b\u306e\u6642\u306b\u901a\u77e5\u3057\u3066\u304f\u308c\u308b\n\nBTC\u306e\u53d7\u3051\u53d6\u308a\nBTC\u306e\u9001\u4fe1\n\u6700\u521d\u306econfirmation\u3092\u5f97\u305f\u6642\n\nQuote: wallet - How do I use walletnotify? - Bitcoin Stack Exchange\n\nPHP\u306ewalletnotify\u7528\u30b9\u30af\u30ea\u30d7\u30c8\n\ndamonp/walletnotify\n\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30b5\u30f3\u30d7\u30eb\n\nbitcoin.conf\nwalletnotify=/home/btcdev/walletnotify.sh %s\nblocknotify=/home/btcdev/blocknotify.sh %s\n\n\n\nwalletnotify.sh\n#!/bin/bash\nF=/home/btcdev/wallet_transaction_log\nD=`date +\"%Y%m%d%H%M%S\"`\necho ${D} - ${1} >> ${F}\n\n\n\ntransaction.sh\n#!/bin/sh\ncurl -d \"txid=$1\" http://127.0.0.1/some/route\n\n\n\nwallet - How do I use walletnotify? - Bitcoin Stack Exchange\n\n\nwalletnotify.php\n<?php\nif(2==$argc){\n    require_once 'jsonRPCClient.php';\n    $bitcoin = new jsonRPCClient('http://username:password@127.0.0.1:8332/');\n\n    $walletinfo = $bitcoin->getinfo();\n    $trxinfo = $bitcoin->gettransaction($argv[1]);\n\n    // Append data to the file\n    $new = \"\\n\\nTransaction hash: \".$argv[1].\"\\nGetinfo balance: \".$walletinfo[\"balance\"]\n    .\"\\n Gettransaction amount: \".$trxinfo[\"amount\"]\n    .\"\\n Gettransaction confirmations: \".$trxinfo[\"confirmations\"]\n    .\"\\n Gettransaction blockhash: \".$trxinfo[\"blockhash\"]\n    .\"\\n Gettransaction blockindex: \".$trxinfo[\"blockindex\"]\n    .\"\\n Gettransaction blocktime: \".$trxinfo[\"blocktime\"]\n    .\"\\n Gettransaction txid: \".$trxinfo[\"txid\"]\n    .\"\\n Gettransaction time: \".$trxinfo[\"time\"]\n    .\"\\n Gettransaction timereceived: \".$trxinfo[\"timereceived\"]\n    .\"\\n Gettransaction account: \".$trxinfo[\"details\"][0][\"account\"]\n    .\"\\n Gettransaction address: \".$trxinfo[\"details\"][0][\"address\"]\n    .\"\\n Gettransaction category: \".$trxinfo[\"details\"][0][\"category\"]\n    .\"\\n Gettransaction amount: \".$trxinfo[\"details\"][0][\"amount\"]\n    //.\"\\n Gettransaction fee: \".$trxinfo[\"details\"][0][\"fee\"]  // According to https://en.bitcoin.it/wiki/Original_Bitcoin_client/API_calls_list, fee is returned, but it doesn't seem that way here\n    ;\n\n    $fp=fopen(\"/tmp/notify_wallet.txt\",\"a\");\n    fwrite($fp,$new);\n}\n?>\n\n\n\n\u5f15\u7528 How to use Walletnotify?\n\n\n\n\n## \u4ee5\u4e0b\u306e\u6642\u306b\u901a\u77e5\u3057\u3066\u304f\u308c\u308b\n\n* BTC\u306e\u53d7\u3051\u53d6\u308a\n* BTC\u306e\u9001\u4fe1\n* \u6700\u521d\u306econfirmation\u3092\u5f97\u305f\u6642\n\nQuote: [wallet - How do I use walletnotify? - Bitcoin Stack Exchange](http://bitcoin.stackexchange.com/questions/24457/how-do-i-use-walletnotify)\n\n\n## PHP\u306ewalletnotify\u7528\u30b9\u30af\u30ea\u30d7\u30c8\n\n* [damonp/walletnotify](https://github.com/damonp/walletnotify)\n\n\n## \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30b5\u30f3\u30d7\u30eb\n\n```txt:bitcoin.conf\nwalletnotify=/home/btcdev/walletnotify.sh %s\nblocknotify=/home/btcdev/blocknotify.sh %s\n```\n\n\n```bash:walletnotify.sh\n#!/bin/bash\nF=/home/btcdev/wallet_transaction_log\nD=`date +\"%Y%m%d%H%M%S\"`\necho ${D} - ${1} >> ${F}\n```\n\n```sh:transaction.sh\n#!/bin/sh\ncurl -d \"txid=$1\" http://127.0.0.1/some/route\n```\n\n* [wallet - How do I use walletnotify? - Bitcoin Stack Exchange](http://bitcoin.stackexchange.com/questions/24457/how-do-i-use-walletnotify/24483#24483)\n\n\n```php:walletnotify.php\n<?php\nif(2==$argc){\n\trequire_once 'jsonRPCClient.php';\n\t$bitcoin = new jsonRPCClient('http://username:password@127.0.0.1:8332/');\n\t\n\t$walletinfo = $bitcoin->getinfo();\n\t$trxinfo = $bitcoin->gettransaction($argv[1]);\n\t\n\t// Append data to the file\n\t$new = \"\\n\\nTransaction hash: \".$argv[1].\"\\nGetinfo balance: \".$walletinfo[\"balance\"]\n\t.\"\\n Gettransaction amount: \".$trxinfo[\"amount\"]\n\t.\"\\n Gettransaction confirmations: \".$trxinfo[\"confirmations\"]\n\t.\"\\n Gettransaction blockhash: \".$trxinfo[\"blockhash\"]\n\t.\"\\n Gettransaction blockindex: \".$trxinfo[\"blockindex\"]\n\t.\"\\n Gettransaction blocktime: \".$trxinfo[\"blocktime\"]\n\t.\"\\n Gettransaction txid: \".$trxinfo[\"txid\"]\n\t.\"\\n Gettransaction time: \".$trxinfo[\"time\"]\n\t.\"\\n Gettransaction timereceived: \".$trxinfo[\"timereceived\"]\n\t.\"\\n Gettransaction account: \".$trxinfo[\"details\"][0][\"account\"]\n\t.\"\\n Gettransaction address: \".$trxinfo[\"details\"][0][\"address\"]\n\t.\"\\n Gettransaction category: \".$trxinfo[\"details\"][0][\"category\"]\n\t.\"\\n Gettransaction amount: \".$trxinfo[\"details\"][0][\"amount\"]\n\t//.\"\\n Gettransaction fee: \".$trxinfo[\"details\"][0][\"fee\"]  // According to https://en.bitcoin.it/wiki/Original_Bitcoin_client/API_calls_list, fee is returned, but it doesn't seem that way here\n\t;\n\t\n\t$fp=fopen(\"/tmp/notify_wallet.txt\",\"a\");\n\tfwrite($fp,$new);\n}\n?>\n```\n\n* \u5f15\u7528 [How to use Walletnotify?](https://bitcointalk.org/index.php?topic=203438.0)\n", "tags": ["Bitcoin"]}