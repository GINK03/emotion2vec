{"tags": ["Python", "Django"], "context": "\n\n\u6982\u8981\n\nDjango \u3067 I18N \u5bfe\u5fdc \u3055\u308c\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d6\u5f97\u3057\u3088\u3046\u3068\u3057\u305f\u6642\u3046\u307e\u304f\u53d6\u5f97\u3067\u304d\u306a\u304b\u3063\u305f\u3068\u3044\u3046\u8a71\n\n\n\u74b0\u5883\n\u78ba\u8a8d\u3057\u305f\u74b0\u5883\n\nMac OS X 10.11.5\nPython3.5\nDjango1.9\n\n\n\u524d\u63d0\n\nDjango \u3067 settings\u306e\u5185\u5bb9\u3092\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\n\nLANGUAGE_CODE = 'ja'\nUSE_I18N = True\n\n\n\u4e0a\u8a18\u306e\u69d8\u306b\u8a2d\u5b9a\u3059\u308c\u3070\u3001I18N\u5bfe\u5fdc\u3057\u305f\u65e5\u672c\u8a9e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3042\u308c\u3070\u4e0b\u8a18\u306e\u3088\u3046\u306b\u3057\u3066\u65e5\u672c\u8a9e\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u53d6\u5f97\u3067\u304d\u308b\u3002\n\nfrom django.utils.translation import ugettext_lazy as _\n_('Hello') # => \u3053\u3093\u306b\u3061\u308f\n\n\nDjango\u306eCommand\u3060\u3068\u53d6\u5f97\u3067\u304d\u306a\u3044\n\ndjango-localflaover \u3068\u3044\u3046\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u3042\u3063\u3066\u3001ISO 3166-2:JP \u3067\u5b9a\u7fa9\u3055\u308c\u305f\u3001\u65e5\u672c\u306e\u90fd\u9053\u5e9c\u770c\u60c5\u5831\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002\n\u90fd\u9053\u5e9c\u770c\u540d\u306fI18N\u5bfe\u5fdc\u3055\u308c\u3066\u3044\u3066\u3001\u65e5\u672c\u8a9e\u540d\u3067\u90fd\u9053\u770c\u540d\u304c\u53d6\u5f97\u3067\u304d\u308b\u3002\n\nfrom localflavor.jp.jp_prefectures import JP_PREFECTURE_CODES\n\ndict(JP_PREFECTURE_CODES)['13'] # => \u6771\u4eac\u90fd\n\n\n\u4e0a\u8a18\u3092runserver\u3057\u305fDjango\u30a2\u30d7\u30ea\u304b\u3089\u8aad\u3093\u3060\u308a\u3059\u308b\u3068\u300c\u6771\u4eac\u90fd\u300d\u3068\u3044\u3046\u5024\u304c\u53d6\u5f97\u3067\u304d\u308b\n\u3060\u304c\u4e0b\u8a18\u306e\u3088\u3046\u306bDjango\u306eCommand\u5185\u3067\u547c\u3076\u3068\u3001\u300cTokyo\u300d\u304c\u8fd4\u3063\u3066\u304f\u308b\n\nfrom django.core.management.base import BaseCommand\nfrom localflavor.jp.jp_prefectures import JP_PREFECTURE_CODES\n\nclass Command(BaseCommand):\n\n    def handle(self, *args, **options):\n        print(dict(JP_PREFECTURE_CODES)['13']) # => Tokyo\n\n\n\n\u306a\u3093\u3060\u3088\uff01\u56fd\u969b\u30aa\u30ea\u30f3\u30d4\u30c3\u30af\u59d4\u54e1\u4f1a\u7b2c8\u4ee3\u4f1a\u9577 \u30b8\u30e3\u30c3\u30af\u30fb\u30ed\u30b2\u6c0f\u304b\u3088\uff01\uff1f \u3068\u7a81\u3063\u8fbc\u307f\u305f\u304f\u306a\u308b\u4e00\u54c1\u3002\n\n\n\n\u306a\u3093\u3067\uff1f\n\nBy default, the BaseCommand.execute() method deactivates translations\nbecause some commands shipped with Django perform several tasks\n(for example, user-facing content rendering and database population)\nthat require a project-neutral string language.\nrefs https://docs.djangoproject.com/ja/1.9/howto/custom-management-commands/#management-commands-and-locales\n\n\n\uff71\uff6f!\uff8a\uff72!\n\u3064\u307e\u308aDjango\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b3\u30de\u30f3\u30c9\u985e\u304c\u3001translate\u3055\u308c\u3066\u308b\u3068\u90fd\u5408\u304c\u60aa\u3044\u306e\u3067I18N\u306f\u30aa\u30d5\u306b\u306a\u3063\u3066\u308b\u3068\u306e\u3053\u3068\n\u3053\u308c\u306f\u300cmanage.py shell\u300d\u306a\u3069\u306e\u30b3\u30de\u30f3\u30c9\u3082\u540c\u69d8\u3067\u3059\u3002\n\n\n\u5bfe\u5fdc\u65b9\u6cd5\n\nCommand\u306e\u30af\u30e9\u30b9\u5909\u6570\u306b\u300cleave_locale_alone=True\u300d\u3092\u4ed8\u3051\u308c\u3070\u826f\u3044\u3002\n\nfrom django.core.management.base import BaseCommand\nfrom localflavor.jp.jp_prefectures import JP_PREFECTURE_CODES\n\nclass Command(BaseCommand):\n\n    leave_locale_alone = True\n\n    def handle(self, *args, **options):\n        print(dict(JP_PREFECTURE_CODES)['13']) # => \u6771\u4eac\n\n\n\u53c2\u8003\n\nWriting custom django-admin commands > Management commands and locales\nWriting custom django-admin commands > BaseCommand.leave_locale_alone\n\n## \u6982\u8981\n\n- Django \u3067 [I18N](https://ja.wikipedia.org/wiki/%E5%9B%BD%E9%9A%9B%E5%8C%96%E3%81%A8%E5%9C%B0%E5%9F%9F%E5%8C%96#i18n) \u5bfe\u5fdc \u3055\u308c\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d6\u5f97\u3057\u3088\u3046\u3068\u3057\u305f\u6642\u3046\u307e\u304f\u53d6\u5f97\u3067\u304d\u306a\u304b\u3063\u305f\u3068\u3044\u3046\u8a71\n\n## \u74b0\u5883\n\n\u78ba\u8a8d\u3057\u305f\u74b0\u5883\n\n- Mac OS X 10.11.5\n- Python3.5\n- Django1.9\n\n## \u524d\u63d0\n\n- Django \u3067 settings\u306e\u5185\u5bb9\u3092\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\n\n```python\nLANGUAGE_CODE = 'ja'\nUSE_I18N = True\n```\n\n- \u4e0a\u8a18\u306e\u69d8\u306b\u8a2d\u5b9a\u3059\u308c\u3070\u3001I18N\u5bfe\u5fdc\u3057\u305f\u65e5\u672c\u8a9e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3042\u308c\u3070\u4e0b\u8a18\u306e\u3088\u3046\u306b\u3057\u3066\u65e5\u672c\u8a9e\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n```python\nfrom django.utils.translation import ugettext_lazy as _\n_('Hello') # => \u3053\u3093\u306b\u3061\u308f\n```\n\n## Django\u306eCommand\u3060\u3068\u53d6\u5f97\u3067\u304d\u306a\u3044\n\n- django-localflaover \u3068\u3044\u3046\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u3042\u3063\u3066\u3001[ISO 3166-2:JP](https://ja.wikipedia.org/wiki/ISO_3166-2:JP) \u3067\u5b9a\u7fa9\u3055\u308c\u305f\u3001\u65e5\u672c\u306e\u90fd\u9053\u5e9c\u770c\u60c5\u5831\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002\n- \u90fd\u9053\u5e9c\u770c\u540d\u306fI18N\u5bfe\u5fdc\u3055\u308c\u3066\u3044\u3066\u3001\u65e5\u672c\u8a9e\u540d\u3067\u90fd\u9053\u770c\u540d\u304c\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n```python\nfrom localflavor.jp.jp_prefectures import JP_PREFECTURE_CODES\n\ndict(JP_PREFECTURE_CODES)['13'] # => \u6771\u4eac\u90fd\n```\n\n- \u4e0a\u8a18\u3092runserver\u3057\u305fDjango\u30a2\u30d7\u30ea\u304b\u3089\u8aad\u3093\u3060\u308a\u3059\u308b\u3068\u300c\u6771\u4eac\u90fd\u300d\u3068\u3044\u3046\u5024\u304c\u53d6\u5f97\u3067\u304d\u308b\n- \u3060\u304c\u4e0b\u8a18\u306e\u3088\u3046\u306bDjango\u306eCommand\u5185\u3067\u547c\u3076\u3068\u3001\u300cTokyo\u300d\u304c\u8fd4\u3063\u3066\u304f\u308b\n\n```python\nfrom django.core.management.base import BaseCommand\nfrom localflavor.jp.jp_prefectures import JP_PREFECTURE_CODES\n\nclass Command(BaseCommand):\n\n    def handle(self, *args, **options):\n        print(dict(JP_PREFECTURE_CODES)['13']) # => Tokyo\n```\n\n- **\u306a\u3093\u3060\u3088\uff01\u56fd\u969b\u30aa\u30ea\u30f3\u30d4\u30c3\u30af\u59d4\u54e1\u4f1a\u7b2c8\u4ee3\u4f1a\u9577 \u30b8\u30e3\u30c3\u30af\u30fb\u30ed\u30b2\u6c0f\u304b\u3088\uff01\uff1f** \u3068\u7a81\u3063\u8fbc\u307f\u305f\u304f\u306a\u308b\u4e00\u54c1\u3002\n\n![\u30b8\u30e3\u30c3\u30af\u30fb\u30ed\u30b2](https://dl.dropboxusercontent.com/spa/ghyn87yb4ejn5yy/w2hl04y-.png)\n\n## \u306a\u3093\u3067\uff1f\n\n>By default, the BaseCommand.execute() method deactivates translations\n>because some commands shipped with Django perform several tasks\n>(for example, user-facing content rendering and database population)\n>that require a project-neutral string language.\n\n>refs https://docs.djangoproject.com/ja/1.9/howto/custom-management-commands/#management-commands-and-locales\n\n- \uff71\uff6f!\uff8a\uff72!\n- \u3064\u307e\u308aDjango\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b3\u30de\u30f3\u30c9\u985e\u304c\u3001translate\u3055\u308c\u3066\u308b\u3068\u90fd\u5408\u304c\u60aa\u3044\u306e\u3067I18N\u306f\u30aa\u30d5\u306b\u306a\u3063\u3066\u308b\u3068\u306e\u3053\u3068\n- \u3053\u308c\u306f\u300cmanage.py shell\u300d\u306a\u3069\u306e\u30b3\u30de\u30f3\u30c9\u3082\u540c\u69d8\u3067\u3059\u3002\n\n## \u5bfe\u5fdc\u65b9\u6cd5\n\n- Command\u306e\u30af\u30e9\u30b9\u5909\u6570\u306b\u300cleave_locale_alone=True\u300d\u3092\u4ed8\u3051\u308c\u3070\u826f\u3044\u3002\n\n```python\nfrom django.core.management.base import BaseCommand\nfrom localflavor.jp.jp_prefectures import JP_PREFECTURE_CODES\n\nclass Command(BaseCommand):\n\n    leave_locale_alone = True\n\n    def handle(self, *args, **options):\n        print(dict(JP_PREFECTURE_CODES)['13']) # => \u6771\u4eac\n```\n\n## \u53c2\u8003\n\n- [Writing custom django-admin commands > Management commands and locales](https://docs.djangoproject.com/ja/1.9/howto/custom-management-commands/#management-commands-and-locales)\n- [Writing custom django-admin commands > BaseCommand.leave_locale_alone](https://docs.djangoproject.com/ja/1.9/howto/custom-management-commands/#django.core.management.BaseCommand.leave_locale_alone)\n"}