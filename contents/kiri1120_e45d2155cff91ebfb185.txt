{"tags": ["Python", "AWS", "boto", "CloudWatch", "EC2"], "context": " More than 1 year has passed since last update.#!/usr/bin/python\n# coding: utf-8\nimport os\nimport commands\nimport boto.ec2.cloudwatch\n\nAWS_ACCESS_KEY = '********'\nAWS_SECRET_ACCESS_KEY = '********'\nAWS_REGION_NAME = '********'\n\n\ndef main():\n    instance_id = commands.getoutput(\"wget -q -O - http://169.254.169.254/latest/meta-data/instance-id\")\n    load_averages = os.getloadavg()\n\n    cloud_watch = boto.ec2.cloudwatch.connect_to_region(\n        aws_access_key_id=AWS_ACCESS_KEY ,\n        aws_secret_access_key=AWS_SECRET_ACCESS_KEY,\n        region_name=AWS_REGION_NAME,\n    )\n\n    cloud_watch.put_metric_data(\n        namespace='LoadAverage',\n        name='LoadAverage',\n        value=float(load_averages[0]),\n        dimensions={\n            'InstanceId': instance_id,\n        }\n    )\n\nif __name__ == '__main__':\n    main()\n\n```py\n#!/usr/bin/python\n# coding: utf-8\nimport os\nimport commands\nimport boto.ec2.cloudwatch\n\nAWS_ACCESS_KEY = '********'\nAWS_SECRET_ACCESS_KEY = '********'\nAWS_REGION_NAME = '********'\n\n\ndef main():\n    instance_id = commands.getoutput(\"wget -q -O - http://169.254.169.254/latest/meta-data/instance-id\")\n    load_averages = os.getloadavg()\n\n    cloud_watch = boto.ec2.cloudwatch.connect_to_region(\n        aws_access_key_id=AWS_ACCESS_KEY ,\n        aws_secret_access_key=AWS_SECRET_ACCESS_KEY,\n        region_name=AWS_REGION_NAME,\n    )\n\n    cloud_watch.put_metric_data(\n        namespace='LoadAverage',\n        name='LoadAverage',\n        value=float(load_averages[0]),\n        dimensions={\n            'InstanceId': instance_id,\n        }\n    )\n\nif __name__ == '__main__':\n    main()\n```\n"}