{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nGo Advent Calendar\u306e12\u67081\u65e5\u5206\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\u306f\u3044\u3001\u3059\u3044\u307e\u305b\u3093\u3002\u3082\u304612\u67082\u65e5\u3067\u3059\u304c\u3001\u5bdd\u308b\u307e\u3067\u304c12\u67081\u65e5\u3068\u3044\u3046\u3053\u3068\u3067\u3002\n\u4eca\u56de\u306f\u3001cgo\u306e\u7df4\u7fd2\u3068\u3044\u3046\u3053\u3068\u3067\u3001OpenCV\u3092\u3044\u3058\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\nOpenCV\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u79c1\u306fMac\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001homebrew\u3067\u5165\u308c\u307e\u3057\u305f\u3002\n$ brew install opencv\n\n\u3057\u3070\u3089\u304fhomebrew\u3092\u4f7f\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3088\u3046\u3068\u3057\u305f\u3089\u3001\u30a8\u30e9\u30fc\u304c\u6ca2\u5c71\u3067\u307e\u3057\u305f\u3002\u305d\u306e\u8fba\u306f\u4ee5\u4e0b\u3092\u898b\u3066\u89e3\u6c7a\u3057\u307e\u3057\u305f\u3002\n\nhttps://github.com/mxcl/homebrew/issues/11448\n\n\n\u3084\u308a\u65b9\u3092\u63a2\u3059\n\u3068\u308a\u3042\u3048\u305a\u3001\u300copencv golang\u300d\u3067\u30b0\u30b0\u308b\u3068\u3001\u4fbf\u5229\u305d\u3046\u306a\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\n\nhttps://code.google.com/p/go-opencv/\n\ngo get\u3057\u3066\u307f\u3088\u3046\u3002\ngo get code.google.com/p/go-opencv/trunk/opencv\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\u306b\u5931\u6557\u3059\u308b\u3002\n# code.google.com/p/go-opencv/opencv\n./cxcore.go:218:5: struct size calculation error off=60 bytesize=40\n\n\u3046\u3080\u3001\u826f\u304f\u308f\u304b\u3089\u3093\u3002\u30b0\u30b0\u308d\u3046\u3002\n\u3053\u306e\u8fba\u3068\u304b\u51fa\u3066\u304d\u305f\u3051\u3069\u3001\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u3084\u3081\u3088\u3046\u3002\n\nhttps://code.google.com/p/go/issues/detail?id=3505\n\n\u6642\u9593\u304c\u306a\u3044\u306e\u3067\u3001\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3092\u4f7f\u3046\u65b9\u6cd5\u306f\u3084\u3081\u307e\u3057\u305f\u3002\n\n\u76f4\u306bcgo\u3092\u4f7f\u3046\n\u307e\u305f\u3082\u3084\u300copencv golang\u300d\u30b0\u30b0\u308a\u307e\u3059\u3002\n\u826f\u3055\u3052\u306a\u8a18\u4e8b\u3092\u767a\u898b\u3057\u307e\u3057\u305f\u3002\n\nhttp://codeblag.wordpress.com/2013/03/09/how-to-use-opencv-with-go-on-linux/\n\n\u8aac\u660e\u306e\u82f1\u8a9e\u306b\u306f\u76ee\u3082\u304f\u308c\u305a\u3001Go\u8a00\u8a9e\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u898b\u307e\u3059\u3002\npackage main\n\nimport (\n    \"fmt\"\n)\n\n//#cgo pkg-config: opencv\n//#include <cv.h>\n//#include <highgui.h>\nimport \"C\"\nimport \"unsafe\"\n\nfunc main() {\n    fmt.Println(\"Hello World!\")\n    text := C.CString(\"Hello World!\")\n    defer C.free(unsafe.Pointer(text))\n    C.cvNamedWindow(text, 1)\n    img := unsafe.Pointer(C.cvCreateImage(C.cvSize(640, 480), C.IPL_DEPTH_8U, 1))\n    C.cvSet(img, C.cvScalar(0, 0, 0, 0), nil)\n    var font C.CvFont\n    C.cvInitFont(&font, C.CV_FONT_HERSHEY_SIMPLEX|C.CV_FONT_ITALIC,\n        1.0, 1.0, 0, 1, 8)\n    C.cvPutText(img, text, C.cvPoint(200, 400), &font,\n        C.cvScalar(255, 255, 0, 0))\n    C.cvShowImage(text, img)\n    C.cvWaitKey(0)\n}\n\n\u5b9f\u884c\u3059\u308b\u3068\u3001Hello, World\u3068\u51fa\u307e\u3059\u3002\n\u3075\u3080\u3075\u3080\uff01\u9854\u8a8d\u8b58\u3092\u3084\u3063\u3066\u307f\u3088\u3046\u3002\n\n\u9854\u8a8d\u8b58\ncgo\u306e\u4f7f\u3044\u65b9\u306f\u3075\u3093\u308f\u308a\u5206\u304b\u3063\u305f\u306e\u3067\u3001\u6b21\u306fopencv\u3067\u9854\u8a8d\u8b58\u3092\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3092Google\u5148\u751f\u3067\u8abf\u3079\u307e\u3057\u305f\u3002\n\nhttp://www.aianet.ne.jp/~asada/prog_doc/opencv/opencv_obj_det_img.htm\n\n\u306a\u304b\u306a\u304b\u3001\u826f\u3055\u3052\u306a\u8a18\u4e8b\u3092\u767a\u898b\u3057\u307e\u3057\u305f\u3002\u9759\u6b62\u753b\u306e\u9854\u8a8d\u8b58\u3092\u3084\u3063\u3066\u307f\u307e\u3059\u3002\nC\u8a00\u8a9e\u306e\u30b3\u30fc\u30c9\u306e\u524d\u306bC\u3092\u4ed8\u3051\u3066\u3044\u304f\u7c21\u5358\u306a\u304a\u4ed5\u4e8b\u3092\u3084\u3063\u3066\u307f\u307e\u3059\u3002\n# command-line-arguments\n./sample.go:21: not enough arguments in call to _Cfunc_cvLoad\n./sample.go:21: cannot convert _Cfunc_cvLoad(_Cfunc_CString(\"haarcascade_frontalface_default.xml\")) (type unsafe.Pointer) to type C.CvHaarClassifierCascade\n./sample.go:21: invalid indirect of _Ctype_CvHaarClassifierCascade(_Cfunc_cvLoad(_Cfunc_CString(\"haarcascade_frontalface_default.xml\"))) (type C.CvHaarClassif\nierCascade)\n./sample.go:25: cannot use tarImg (type *_Ctype_IplImage) as type unsafe.Pointer in function argument\n./sample.go:25: not enough arguments in call to _Cfunc_cvHaarDetectObjects\n./sample.go:28: undefined: CvRect\n./sample.go:28: cannot use i (type int) as type C.int in function argument\n./sample.go:30: not enough arguments in call to _Cfunc_cvRectangle\n./sample.go:36: cannot use tarImg (type *_Ctype_IplImage) as type unsafe.Pointer in function argument\n./sample.go:37: not enough arguments in call to _Cfunc_cvNamedWindow\n./sample.go:37: too many errors\n\n\u306a\u3093\u304b\u3044\u3063\u3071\u3044\u30a8\u30e9\u30fc\u3067\u305f\u3002\n\u3069\u3046\u3084\u3089\u3001\u7701\u7565\u3055\u308c\u3066\u3044\u308b\u5f15\u6570\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\u3042\u3068\u306f\u30ad\u30e3\u30b9\u30c8\u306b\u5931\u6557\u3057\u3066\u3044\u308b\u90e8\u5206\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\u30a8\u30e9\u30fc\u3092\u89e3\u6c7a\u3057\u3066\u3044\u304f\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\nface_detection1.go\n\npackage main\n\n//#cgo pkg-config: opencv\n//#include <cv.h>\n//#include <highgui.h>\nimport \"C\"\n\nimport (\n    \"flag\"\n    \"unsafe\"\n)\n\nvar (\n    filePath = flag.String(\"f\", \"lena.jpg\", \"file path\")\n)\n\nfunc main() {\n    flag.Parse()\n\n    tarImg := C.cvLoadImage(C.CString(*filePath), C.CV_LOAD_IMAGE_ANYDEPTH|C.CV_LOAD_IMAGE_ANYCOLOR)\n\n    cvHCC := (*C.CvHaarClassifierCascade)(C.cvLoad(C.CString(\"haarcascade_frontalface_default.xml\"), (*C.CvMemStorage)(nil), (*C.char)(nil), (**C.char)(nil)))\n\n    cvMStr := C.cvCreateMemStorage(0)\n\n    face := C.cvHaarDetectObjects(\n        unsafe.Pointer(tarImg),\n        cvHCC,\n        cvMStr,\n        1.11,\n        3,\n        0,\n        C.cvSize(0, 0),\n        C.cvSize(0, 0),\n    )\n\n    for i := C.int(0); i < face.total; i++ {\n        faceRect := (*C.CvRect)(unsafe.Pointer(C.cvGetSeqElem(face, i)))    \n        C.cvRectangle(\n            unsafe.Pointer(tarImg),\n            C.cvPoint(faceRect.x, faceRect.y),\n            C.cvPoint(faceRect.x+faceRect.width, faceRect.y+faceRect.height),\n            C.cvScalar(0, 0, 255, 0),\n            3,\n            C.CV_AA,\n            0,\n        )\n    }\n\n    C.cvNamedWindow(C.CString(\"face_detect\"), C.CV_WINDOW_AUTOSIZE)\n    C.cvShowImage(C.CString(\"face_detect\"), unsafe.Pointer(tarImg))\n\n    C.cvWaitKey(0)\n\n    C.cvDestroyWindow(C.CString(\"face_detect\"))\n}\n\n\n\nhaarcascade_frontalface_default.xml\u306f\u9854\u8a8d\u8b58\u306e\u5b66\u7fd2\u30c7\u30fc\u30bf\u3089\u3057\u304f\u3001\u30b0\u30b0\u308b\u3068\u898b\u3064\u3051\u308c\u307e\u3059\u3002lena.jpg\u306f\u3044\u3064\u3082\u306e\u304a\u59c9\u3055\u3093\u3067\u3059\u3002\n\u5b9f\u884c\u3057\u3066\u307f\u308b\u3002\n\n\u3075\u3080\u3002\u4f55\u304b\u7269\u8db3\u308a\u306a\u3044\u3002\u305d\u3046\u3060\u3001Gopher\u541b\u3060\uff01\n\u753b\u50cf\u306e\u4e0a\u306b\u753b\u50cf\u3092\u91cd\u306d\u308b\u65b9\u6cd5\u3092\u63a2\u305d\u3046\u3068\u601d\u3044\u3001Google\u5148\u751f\u306b\u805e\u304d\u307e\u3057\u305f\u3002\n\nhttp://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q13101143038\n\nYahoo!\u77e5\u6075\u888b\u3067\u8cea\u554f\u3057\u3066\u3044\u308b\u65b9\u304c\u3044\u307e\u3057\u305f\u3002\u30ca\u30a4\u30b9\uff01\u77e5\u6075\u888b\u306e\u6b63\u3057\u3044\u4f7f\u3044\u65b9\u3067\u3059\u306d\u3002\n\u3075\u3080\u3075\u3080\u3002ROI\u306fRegion of Interes\u306e\u7565\u3067\u3001\u6307\u5b9a\u3057\u305f\u77e9\u5f62\u9818\u57df\u306b\u3057\u304b\u4f5c\u7528\u3055\u305b\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u6a5f\u80fd\u306a\u306e\u304b\u306a\uff1f\n\u65e9\u901f\u3001\u3084\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\nface_detection2.go\npackage main\n\n//#cgo pkg-config: opencv\n//#include <cv.h>\n//#include <highgui.h>\nimport \"C\"\n\nimport (\n    \"flag\"\n    \"unsafe\"\n)\n\nvar (\n    filePath = flag.String(\"f\", \"lena.jpg\", \"file path\")\n)\n\nfunc main() {\n    flag.Parse()\n\n    gopherImg := C.cvLoadImage(C.CString(\"gopher_head.png\"), C.CV_LOAD_IMAGE_ANYDEPTH|C.CV_LOAD_IMAGE_ANYCOLOR)\n    tarImg := C.cvLoadImage(C.CString(*filePath), C.CV_LOAD_IMAGE_ANYDEPTH|C.CV_LOAD_IMAGE_ANYCOLOR)\n\n    cvHCC := (*C.CvHaarClassifierCascade)(C.cvLoad(C.CString(\"haarcascade_frontalface_default.xml\"), (*C.CvMemStorage)(nil), (*C.char)(nil), (**C.char)(nil)))\n\n    cvMStr := C.cvCreateMemStorage(0)\n\n    face := C.cvHaarDetectObjects(\n        unsafe.Pointer(tarImg),\n        cvHCC,\n        cvMStr,\n        1.11,\n        3,\n        0,\n        C.cvSize(0, 0),\n        C.cvSize(0, 0),\n    )\n\n    for i := C.int(0); i < face.total; i++ {\n        faceRect := (*C.CvRect)(unsafe.Pointer(C.cvGetSeqElem(face, i)))\n        roi := C.cvRect(\n            faceRect.x+faceRect.width/2-gopherImg.width/2,\n            faceRect.y+faceRect.height/2-gopherImg.height/2,\n            gopherImg.width,\n            gopherImg.height,\n        )\n        C.cvSetImageROI(tarImg, roi)\n        C.cvCopy(unsafe.Pointer(gopherImg), unsafe.Pointer(tarImg), unsafe.Pointer(nil))\n        C.cvResetImageROI(tarImg)\n    }\n\n    C.cvNamedWindow(C.CString(\"face_detect\"), C.CV_WINDOW_AUTOSIZE)\n    C.cvShowImage(C.CString(\"face_detect\"), unsafe.Pointer(tarImg))\n\n    C.cvWaitKey(0)\n\n    C.cvDestroyWindow(C.CString(\"face_detect\"))\n}\n\n\n\u5909\u308f\u3063\u305f\u306e\u306f\u3001Gopher\u541b\u306e\u753b\u50cf\u306e\u8aad\u8fbc\u307f\u3068\u4ee5\u4e0b\u306e\u90e8\u5206\u3067\u3059\u3002\nroi := C.cvRect(\n    faceRect.x+faceRect.width/2-gopherImg.width/2,\n         faceRect.y+faceRect.height/2-gopherImg.height/2,\n         gopherImg.width,\n         gopherImg.height,\n)\nC.cvSetImageROI(tarImg, roi)\nC.cvCopy(unsafe.Pointer(gopherImg), unsafe.Pointer(tarImg), unsafe.Pointer(nil))\nC.cvResetImageROI(tarImg)\n\n\u9854\u8a8d\u8b58\u3055\u308c\u305f\u77e9\u5f62\u9818\u57df\u306e\u4e2d\u5fc3\u306bGopher\u541b\u306e\u753b\u50cf\u306e\u4e2d\u5fc3\u304c\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u5b9f\u884c\u7d50\u679c\u3067\u3059\u3002\n\n\u900f\u904e\u51e6\u7406\u3068\u304b\u96e3\u3057\u3044\u306e\u3067\u3001\u7701\u3044\u305f\u3089\u306a\u3093\u304b\u5909\u3002\n\n\u307e\u3068\u3081\ncgo\u306f\u697d\u3057\u3044\u3067\u3059\u306d\u3002opencv\u3092\u3084\u308a\u305f\u3044\u3051\u3069\u3001C\u3067\u66f8\u304d\u305f\u304f\u306a\u3044\u5834\u5408\u306f\u30aa\u30b9\u30b9\u30e1\u3067\u3059\u3002\u3057\u304b\u3057\u3001\u30ad\u30e3\u30b9\u30c8\u3068\u304bC\u4ed8\u3051\u308b\u306e\u306f\u9762\u5012\u3067\u3059\u3002\u6b21\u306f\u52d5\u753b\u306e\u9854\u8a8d\u8b58\u3092\u3084\u3063\u3066\u307f\u305f\u3044\u3067\u3059\u306d\u3002\n\n## \u306f\u3058\u3081\u306b\nGo Advent Calendar\u306e12\u67081\u65e5\u5206\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\u306f\u3044\u3001\u3059\u3044\u307e\u305b\u3093\u3002\u3082\u304612\u67082\u65e5\u3067\u3059\u304c\u3001\u5bdd\u308b\u307e\u3067\u304c12\u67081\u65e5\u3068\u3044\u3046\u3053\u3068\u3067\u3002\n\u4eca\u56de\u306f\u3001cgo\u306e\u7df4\u7fd2\u3068\u3044\u3046\u3053\u3068\u3067\u3001OpenCV\u3092\u3044\u3058\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n## OpenCV\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u79c1\u306fMac\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001homebrew\u3067\u5165\u308c\u307e\u3057\u305f\u3002\n\n```\n$ brew install opencv\n```\n\n\u3057\u3070\u3089\u304fhomebrew\u3092\u4f7f\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3088\u3046\u3068\u3057\u305f\u3089\u3001\u30a8\u30e9\u30fc\u304c\u6ca2\u5c71\u3067\u307e\u3057\u305f\u3002\u305d\u306e\u8fba\u306f\u4ee5\u4e0b\u3092\u898b\u3066\u89e3\u6c7a\u3057\u307e\u3057\u305f\u3002\n\n* https://github.com/mxcl/homebrew/issues/11448\n\n## \u3084\u308a\u65b9\u3092\u63a2\u3059\n\n\u3068\u308a\u3042\u3048\u305a\u3001\u300copencv golang\u300d\u3067\u30b0\u30b0\u308b\u3068\u3001\u4fbf\u5229\u305d\u3046\u306a\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\n\n* https://code.google.com/p/go-opencv/\n\n`go get`\u3057\u3066\u307f\u3088\u3046\u3002\n\n```\ngo get code.google.com/p/go-opencv/trunk/opencv\n```\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\u306b\u5931\u6557\u3059\u308b\u3002\n\n```\n# code.google.com/p/go-opencv/opencv\n./cxcore.go:218:5: struct size calculation error off=60 bytesize=40\n```\n\n\u3046\u3080\u3001\u826f\u304f\u308f\u304b\u3089\u3093\u3002\u30b0\u30b0\u308d\u3046\u3002\n\u3053\u306e\u8fba\u3068\u304b\u51fa\u3066\u304d\u305f\u3051\u3069\u3001\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u3084\u3081\u3088\u3046\u3002\n\n* https://code.google.com/p/go/issues/detail?id=3505\n\n\u6642\u9593\u304c\u306a\u3044\u306e\u3067\u3001\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3092\u4f7f\u3046\u65b9\u6cd5\u306f\u3084\u3081\u307e\u3057\u305f\u3002\n\n## \u76f4\u306bcgo\u3092\u4f7f\u3046\n\n\u307e\u305f\u3082\u3084\u300copencv golang\u300d\u30b0\u30b0\u308a\u307e\u3059\u3002\n\u826f\u3055\u3052\u306a\u8a18\u4e8b\u3092\u767a\u898b\u3057\u307e\u3057\u305f\u3002\n\n* http://codeblag.wordpress.com/2013/03/09/how-to-use-opencv-with-go-on-linux/\n\n\u8aac\u660e\u306e\u82f1\u8a9e\u306b\u306f\u76ee\u3082\u304f\u308c\u305a\u3001Go\u8a00\u8a9e\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u898b\u307e\u3059\u3002\n\n```\npackage main\n \nimport (\n    \"fmt\"\n)\n \n//#cgo pkg-config: opencv\n//#include <cv.h>\n//#include <highgui.h>\nimport \"C\"\nimport \"unsafe\"\n \nfunc main() {\n    fmt.Println(\"Hello World!\")\n    text := C.CString(\"Hello World!\")\n    defer C.free(unsafe.Pointer(text))\n    C.cvNamedWindow(text, 1)\n    img := unsafe.Pointer(C.cvCreateImage(C.cvSize(640, 480), C.IPL_DEPTH_8U, 1))\n    C.cvSet(img, C.cvScalar(0, 0, 0, 0), nil)\n    var font C.CvFont\n    C.cvInitFont(&font, C.CV_FONT_HERSHEY_SIMPLEX|C.CV_FONT_ITALIC,\n        1.0, 1.0, 0, 1, 8)\n    C.cvPutText(img, text, C.cvPoint(200, 400), &font,\n        C.cvScalar(255, 255, 0, 0))\n    C.cvShowImage(text, img)\n    C.cvWaitKey(0)\n}\n```\n\u5b9f\u884c\u3059\u308b\u3068\u3001`Hello, World`\u3068\u51fa\u307e\u3059\u3002\n\u3075\u3080\u3075\u3080\uff01\u9854\u8a8d\u8b58\u3092\u3084\u3063\u3066\u307f\u3088\u3046\u3002\n\n## \u9854\u8a8d\u8b58\n\ncgo\u306e\u4f7f\u3044\u65b9\u306f\u3075\u3093\u308f\u308a\u5206\u304b\u3063\u305f\u306e\u3067\u3001\u6b21\u306fopencv\u3067\u9854\u8a8d\u8b58\u3092\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3092Google\u5148\u751f\u3067\u8abf\u3079\u307e\u3057\u305f\u3002\n\n* http://www.aianet.ne.jp/~asada/prog_doc/opencv/opencv_obj_det_img.htm\n\n\u306a\u304b\u306a\u304b\u3001\u826f\u3055\u3052\u306a\u8a18\u4e8b\u3092\u767a\u898b\u3057\u307e\u3057\u305f\u3002\u9759\u6b62\u753b\u306e\u9854\u8a8d\u8b58\u3092\u3084\u3063\u3066\u307f\u307e\u3059\u3002\nC\u8a00\u8a9e\u306e\u30b3\u30fc\u30c9\u306e\u524d\u306b`C`\u3092\u4ed8\u3051\u3066\u3044\u304f\u7c21\u5358\u306a\u304a\u4ed5\u4e8b\u3092\u3084\u3063\u3066\u307f\u307e\u3059\u3002\n\n```\n# command-line-arguments\n./sample.go:21: not enough arguments in call to _Cfunc_cvLoad\n./sample.go:21: cannot convert _Cfunc_cvLoad(_Cfunc_CString(\"haarcascade_frontalface_default.xml\")) (type unsafe.Pointer) to type C.CvHaarClassifierCascade\n./sample.go:21: invalid indirect of _Ctype_CvHaarClassifierCascade(_Cfunc_cvLoad(_Cfunc_CString(\"haarcascade_frontalface_default.xml\"))) (type C.CvHaarClassif\nierCascade)\n./sample.go:25: cannot use tarImg (type *_Ctype_IplImage) as type unsafe.Pointer in function argument\n./sample.go:25: not enough arguments in call to _Cfunc_cvHaarDetectObjects\n./sample.go:28: undefined: CvRect\n./sample.go:28: cannot use i (type int) as type C.int in function argument\n./sample.go:30: not enough arguments in call to _Cfunc_cvRectangle\n./sample.go:36: cannot use tarImg (type *_Ctype_IplImage) as type unsafe.Pointer in function argument\n./sample.go:37: not enough arguments in call to _Cfunc_cvNamedWindow\n./sample.go:37: too many errors\n```\n\n\u306a\u3093\u304b\u3044\u3063\u3071\u3044\u30a8\u30e9\u30fc\u3067\u305f\u3002\n\u3069\u3046\u3084\u3089\u3001\u7701\u7565\u3055\u308c\u3066\u3044\u308b\u5f15\u6570\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\u3042\u3068\u306f\u30ad\u30e3\u30b9\u30c8\u306b\u5931\u6557\u3057\u3066\u3044\u308b\u90e8\u5206\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u30a8\u30e9\u30fc\u3092\u89e3\u6c7a\u3057\u3066\u3044\u304f\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\n```face_detection1.go\n\npackage main\n\n//#cgo pkg-config: opencv\n//#include <cv.h>\n//#include <highgui.h>\nimport \"C\"\n\nimport (\n\t\"flag\"\n\t\"unsafe\"\n)\n\nvar (\n\tfilePath = flag.String(\"f\", \"lena.jpg\", \"file path\")\n)\n\nfunc main() {\n\tflag.Parse()\n\n\ttarImg := C.cvLoadImage(C.CString(*filePath), C.CV_LOAD_IMAGE_ANYDEPTH|C.CV_LOAD_IMAGE_ANYCOLOR)\n\n\tcvHCC := (*C.CvHaarClassifierCascade)(C.cvLoad(C.CString(\"haarcascade_frontalface_default.xml\"), (*C.CvMemStorage)(nil), (*C.char)(nil), (**C.char)(nil)))\n\n\tcvMStr := C.cvCreateMemStorage(0)\n\n\tface := C.cvHaarDetectObjects(\n\t\tunsafe.Pointer(tarImg),\n\t\tcvHCC,\n\t\tcvMStr,\n\t\t1.11,\n\t\t3,\n\t\t0,\n\t\tC.cvSize(0, 0),\n\t\tC.cvSize(0, 0),\n\t)\n\n\tfor i := C.int(0); i < face.total; i++ {\n\t\tfaceRect := (*C.CvRect)(unsafe.Pointer(C.cvGetSeqElem(face, i)))\t\n\t\tC.cvRectangle(\n\t\t\tunsafe.Pointer(tarImg),\n\t\t\tC.cvPoint(faceRect.x, faceRect.y),\n\t\t\tC.cvPoint(faceRect.x+faceRect.width, faceRect.y+faceRect.height),\n\t\t\tC.cvScalar(0, 0, 255, 0),\n\t\t\t3,\n\t\t\tC.CV_AA,\n\t\t\t0,\n\t\t)\n\t}\n\n\tC.cvNamedWindow(C.CString(\"face_detect\"), C.CV_WINDOW_AUTOSIZE)\n\tC.cvShowImage(C.CString(\"face_detect\"), unsafe.Pointer(tarImg))\n\n\tC.cvWaitKey(0)\n\n\tC.cvDestroyWindow(C.CString(\"face_detect\"))\n}\n\n```\n\n`haarcascade_frontalface_default.xml`\u306f\u9854\u8a8d\u8b58\u306e\u5b66\u7fd2\u30c7\u30fc\u30bf\u3089\u3057\u304f\u3001\u30b0\u30b0\u308b\u3068\u898b\u3064\u3051\u308c\u307e\u3059\u3002`lena.jpg`\u306f\u3044\u3064\u3082\u306e\u304a\u59c9\u3055\u3093\u3067\u3059\u3002\n\n\u5b9f\u884c\u3057\u3066\u307f\u308b\u3002\n\n![face_detection1.jpg](https://qiita-image-store.s3.amazonaws.com/0/14952/aebb6c4e-baf2-3efb-4237-8501f18a43e3.jpeg \"face_detection1.jpg\")\n\n\n\u3075\u3080\u3002\u4f55\u304b\u7269\u8db3\u308a\u306a\u3044\u3002\u305d\u3046\u3060\u3001Gopher\u541b\u3060\uff01\n\n\u753b\u50cf\u306e\u4e0a\u306b\u753b\u50cf\u3092\u91cd\u306d\u308b\u65b9\u6cd5\u3092\u63a2\u305d\u3046\u3068\u601d\u3044\u3001Google\u5148\u751f\u306b\u805e\u304d\u307e\u3057\u305f\u3002\n\n* http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q13101143038\n\nYahoo!\u77e5\u6075\u888b\u3067\u8cea\u554f\u3057\u3066\u3044\u308b\u65b9\u304c\u3044\u307e\u3057\u305f\u3002\u30ca\u30a4\u30b9\uff01\u77e5\u6075\u888b\u306e\u6b63\u3057\u3044\u4f7f\u3044\u65b9\u3067\u3059\u306d\u3002\n\n\u3075\u3080\u3075\u3080\u3002ROI\u306f`Region of Interes`\u306e\u7565\u3067\u3001\u6307\u5b9a\u3057\u305f\u77e9\u5f62\u9818\u57df\u306b\u3057\u304b\u4f5c\u7528\u3055\u305b\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u6a5f\u80fd\u306a\u306e\u304b\u306a\uff1f\n\n\u65e9\u901f\u3001\u3084\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```face_detection2.go\npackage main\n\n//#cgo pkg-config: opencv\n//#include <cv.h>\n//#include <highgui.h>\nimport \"C\"\n\nimport (\n\t\"flag\"\n\t\"unsafe\"\n)\n\nvar (\n\tfilePath = flag.String(\"f\", \"lena.jpg\", \"file path\")\n)\n\nfunc main() {\n\tflag.Parse()\n\n\tgopherImg := C.cvLoadImage(C.CString(\"gopher_head.png\"), C.CV_LOAD_IMAGE_ANYDEPTH|C.CV_LOAD_IMAGE_ANYCOLOR)\n\ttarImg := C.cvLoadImage(C.CString(*filePath), C.CV_LOAD_IMAGE_ANYDEPTH|C.CV_LOAD_IMAGE_ANYCOLOR)\n\n\tcvHCC := (*C.CvHaarClassifierCascade)(C.cvLoad(C.CString(\"haarcascade_frontalface_default.xml\"), (*C.CvMemStorage)(nil), (*C.char)(nil), (**C.char)(nil)))\n\n\tcvMStr := C.cvCreateMemStorage(0)\n\n\tface := C.cvHaarDetectObjects(\n\t\tunsafe.Pointer(tarImg),\n\t\tcvHCC,\n\t\tcvMStr,\n\t\t1.11,\n\t\t3,\n\t\t0,\n\t\tC.cvSize(0, 0),\n\t\tC.cvSize(0, 0),\n\t)\n\n\tfor i := C.int(0); i < face.total; i++ {\n\t\tfaceRect := (*C.CvRect)(unsafe.Pointer(C.cvGetSeqElem(face, i)))\n\t\troi := C.cvRect(\n\t\t\tfaceRect.x+faceRect.width/2-gopherImg.width/2,\n\t\t\tfaceRect.y+faceRect.height/2-gopherImg.height/2,\n\t\t\tgopherImg.width,\n\t\t\tgopherImg.height,\n\t\t)\n\t\tC.cvSetImageROI(tarImg, roi)\n\t\tC.cvCopy(unsafe.Pointer(gopherImg), unsafe.Pointer(tarImg), unsafe.Pointer(nil))\n\t\tC.cvResetImageROI(tarImg)\n\t}\n\n\tC.cvNamedWindow(C.CString(\"face_detect\"), C.CV_WINDOW_AUTOSIZE)\n\tC.cvShowImage(C.CString(\"face_detect\"), unsafe.Pointer(tarImg))\n\n\tC.cvWaitKey(0)\n\n\tC.cvDestroyWindow(C.CString(\"face_detect\"))\n}\n```\n\n\u5909\u308f\u3063\u305f\u306e\u306f\u3001Gopher\u541b\u306e\u753b\u50cf\u306e\u8aad\u8fbc\u307f\u3068\u4ee5\u4e0b\u306e\u90e8\u5206\u3067\u3059\u3002\n\n```\nroi := C.cvRect(\n\tfaceRect.x+faceRect.width/2-gopherImg.width/2,\n         faceRect.y+faceRect.height/2-gopherImg.height/2,\n         gopherImg.width,\n         gopherImg.height,\n)\nC.cvSetImageROI(tarImg, roi)\nC.cvCopy(unsafe.Pointer(gopherImg), unsafe.Pointer(tarImg), unsafe.Pointer(nil))\nC.cvResetImageROI(tarImg)\n```\n\n\u9854\u8a8d\u8b58\u3055\u308c\u305f\u77e9\u5f62\u9818\u57df\u306e\u4e2d\u5fc3\u306bGopher\u541b\u306e\u753b\u50cf\u306e\u4e2d\u5fc3\u304c\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u5b9f\u884c\u7d50\u679c\u3067\u3059\u3002\n\n![face_detection2.jpg](https://qiita-image-store.s3.amazonaws.com/0/14952/15ff1304-a4ad-90d1-104a-9fa1f7563c57.jpeg \"face_detection2.jpg\")\n\n\u900f\u904e\u51e6\u7406\u3068\u304b\u96e3\u3057\u3044\u306e\u3067\u3001\u7701\u3044\u305f\u3089\u306a\u3093\u304b\u5909\u3002\n\n## \u307e\u3068\u3081\ncgo\u306f\u697d\u3057\u3044\u3067\u3059\u306d\u3002opencv\u3092\u3084\u308a\u305f\u3044\u3051\u3069\u3001C\u3067\u66f8\u304d\u305f\u304f\u306a\u3044\u5834\u5408\u306f\u30aa\u30b9\u30b9\u30e1\u3067\u3059\u3002\u3057\u304b\u3057\u3001\u30ad\u30e3\u30b9\u30c8\u3068\u304b`C`\u4ed8\u3051\u308b\u306e\u306f\u9762\u5012\u3067\u3059\u3002\u6b21\u306f\u52d5\u753b\u306e\u9854\u8a8d\u8b58\u3092\u3084\u3063\u3066\u307f\u305f\u3044\u3067\u3059\u306d\u3002\n\n", "tags": ["OpenCV", "Go"]}