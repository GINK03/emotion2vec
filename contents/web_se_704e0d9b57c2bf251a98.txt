{"context": " More than 1 year has passed since last update.EC2 \u3067cli\u3067Launch\u3092\u3059\u308b\u306b\u306f\u3002\ninput\u7528\u306ejson\u3092\u4f7f\u308f\u306a\u304f\u3066\u3082\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4e0e\u3048\u3066\u3082\u4f5c\u6210\u3082\u3067\u304d\u308b\u304c\u3001\u5fc5\u9808\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u591a\u3044\u306e\u3067\u3001--input-json\u7528\u306ejson\u3092\u4f5c\u6210\u3059\u308b\u306e\u304c\u63a8\u5968\u3055\u308c\u308b\n{\n    \"ImageId\": \"ami-XXXXXX\",\n    \"SecurityGroupIds\": [\n        \"sg-aaaabbbb\"\n    ],\n    \"InstanceType\": \"m3.xlarge\",\n    \"BlockDeviceMappings\": [\n        {\n            \"DeviceName\": \"/dev/xvda\",\n            \"Ebs\": {\n                \"VolumeSize\": 30,\n                \"DeleteOnTermination\": true,\n                \"VolumeType\": \"gp2\"\n            }\n        },\n        {\n             \"DeviceName\": \"/dev/sdb\",\n             \"VirtualName\": \"ephemeral0\"\n        }\n    ],\n    \"Monitoring\": {\n        \"Enabled\": false\n    },\n    \"SubnetId\": \"subnet-2223333\",\n    \"DisableApiTermination\": true,\n    \"IamInstanceProfile\": {\n        \"Arn\": \"arn:aws:iam::99999999999:instance-profile/role-prod-web\"\n    },\n    \"EbsOptimized\": true\n}\n\nuserdata\u7528\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\n#!/bin/bash\n\ncp /usr/share/zoneinfo/Asia/Tokyo /etc/localtime\n\nexport AWS_DEFAULT_REGION=ap-northeast-1\n\n\u5b9f\u969bLaunch\u3057\u3066\u307f\u308b\u3002\naws ec2 run-instances --input-json=file://instances.json --userdata=file://userdata2.sh\n\n--generate-cli-skeleton\u3067launch\u7528json\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\u304c\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3088\u3063\u3066\u306f\u4f75\u7528\u3067\u304d\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n\u30fbNetworkInterfaces\u3068SubnetId\u306f\u5171\u5b58\u3067\u304d\u306a\u3044\n\u30fbSecurityGroups\u3068SubnetId\u306f\u5171\u5b58\u3067\u304d\u306a\u3044\n\u2192SecurityGroupIds\u3092\u4f7f\u3046\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u505c\u6b62\u3059\u308b\u30b3\u30de\u30f3\u30c9\naws ec2 stop-instances --instance-ids i-XXXXXX --region ap-northeast-1\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5909\u66f4\u3059\u308b\u30b3\u30de\u30f3\u30c9\uff08Terminate\u30d7\u30ed\u30c6\u30af\u30b7\u30e7\u30f3\u3092\u89e3\u9664)\naws ec2 modify-instance-attribute --instance-id i-XXXXX --no-disable-api-termination --region ap-northeast-1\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306eTerminate\u3059\u308b\u30b3\u30de\u30f3\u30c9\naws ec2 terminate-instances --instance-ids XXXXXX --region ap-northeast-1\n\n\nEC2 \u3067cli\u3067Launch\u3092\u3059\u308b\u306b\u306f\u3002\n\ninput\u7528\u306ejson\u3092\u4f7f\u308f\u306a\u304f\u3066\u3082\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4e0e\u3048\u3066\u3082\u4f5c\u6210\u3082\u3067\u304d\u308b\u304c\u3001\u5fc5\u9808\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u591a\u3044\u306e\u3067\u3001--input-json\u7528\u306ejson\u3092\u4f5c\u6210\u3059\u308b\u306e\u304c\u63a8\u5968\u3055\u308c\u308b\n\n\n```\n{\n    \"ImageId\": \"ami-XXXXXX\",\n    \"SecurityGroupIds\": [\n        \"sg-aaaabbbb\"\n    ],\n    \"InstanceType\": \"m3.xlarge\",\n    \"BlockDeviceMappings\": [\n        {\n            \"DeviceName\": \"/dev/xvda\",\n            \"Ebs\": {\n                \"VolumeSize\": 30,\n                \"DeleteOnTermination\": true,\n                \"VolumeType\": \"gp2\"\n            }\n        },\n        {\n             \"DeviceName\": \"/dev/sdb\",\n             \"VirtualName\": \"ephemeral0\"\n        }\n    ],\n    \"Monitoring\": {\n        \"Enabled\": false\n    },\n    \"SubnetId\": \"subnet-2223333\",\n    \"DisableApiTermination\": true,\n    \"IamInstanceProfile\": {\n        \"Arn\": \"arn:aws:iam::99999999999:instance-profile/role-prod-web\"\n    },\n    \"EbsOptimized\": true\n}\n```\n\nuserdata\u7528\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\n\n```\n#!/bin/bash\n\ncp /usr/share/zoneinfo/Asia/Tokyo /etc/localtime\n\nexport AWS_DEFAULT_REGION=ap-northeast-1\n```\n\n\u5b9f\u969bLaunch\u3057\u3066\u307f\u308b\u3002\n\n```\naws ec2 run-instances --input-json=file://instances.json --userdata=file://userdata2.sh\n```\n\n--generate-cli-skeleton\u3067launch\u7528json\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\u304c\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3088\u3063\u3066\u306f\u4f75\u7528\u3067\u304d\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30fbNetworkInterfaces\u3068SubnetId\u306f\u5171\u5b58\u3067\u304d\u306a\u3044\n\u30fbSecurityGroups\u3068SubnetId\u306f\u5171\u5b58\u3067\u304d\u306a\u3044\n\u2192SecurityGroupIds\u3092\u4f7f\u3046\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u505c\u6b62\u3059\u308b\u30b3\u30de\u30f3\u30c9\n\n```\naws ec2 stop-instances --instance-ids i-XXXXXX --region ap-northeast-1\n```\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5909\u66f4\u3059\u308b\u30b3\u30de\u30f3\u30c9\uff08Terminate\u30d7\u30ed\u30c6\u30af\u30b7\u30e7\u30f3\u3092\u89e3\u9664)\n\n```\naws ec2 modify-instance-attribute --instance-id i-XXXXX --no-disable-api-termination --region ap-northeast-1\n```\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306eTerminate\u3059\u308b\u30b3\u30de\u30f3\u30c9\n\n```\naws ec2 terminate-instances --instance-ids XXXXXX --region ap-northeast-1\n```\n", "tags": ["aws-cli"]}