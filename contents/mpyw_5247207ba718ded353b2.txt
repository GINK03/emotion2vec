{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u8a00\u8a9e\u5225\uff1a\u30d1\u30b9\u30ef\u30fc\u30c9\u5411\u3051\u306e\u6b63\u898f\u8868\u73fe \u3067\u8b70\u8ad6\u3092\u3057\u3066\u3044\u308b\u3046\u3061\u306b\u3001\u30d0\u30c3\u30af\u30c8\u30e9\u30c3\u30af\u306b\u3064\u3044\u3066\u306e\u7591\u554f\u304c\u308f\u3044\u3066\u304d\u305f\u306e\u3067\u3001\u3053\u3053\u3067\u5b9f\u969b\u306b\u8abf\u67fb\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n\n\n\u30d9\u30f3\u30c1\u30de\u30fc\u30af\n\u300c\u6587\u5b57\u5217 ~ \u6b63\u898f\u8868\u73fe (\u6700\u9577\u4e00\u81f4\u306e\u57fa\u672c\u5f62)\u300d\u306e\u898b\u51fa\u3057\u3068\u3057\u307e\u3059\u3002\n\nCase 1: \"aaa...aaa\" ~ /\\Aa+a\\z/\n\n\u6700\u77ed\u4e00\u81f4\u3068\u6700\u9577\u4e00\u81f4\u3092\u6bd4\u8f03\u3059\u308b\u969b\u306b\u7528\u3044\u3089\u308c\u308b\u5178\u578b\u7684\u306a\u4f8b\u3067\u3059\u3002\u3053\u306e\u30b1\u30fc\u30b9\u306f\u30de\u30c3\u30c1\u6210\u529f\u3092\u671f\u5f85\u3057\u307e\u3059\u3002\n\n\u4e88\u60f3\n\n\u6700\u77ed\u4e00\u81f4\u306f\u30011\u56de\u3054\u3068\u306b\u5f8c\u308d\u3068\u30de\u30c3\u30c1\u3059\u308b\u304b\u3069\u3046\u304b\u3092\u691c\u8a3c\u3059\u308b\u306e\u3067\u9045\u3044\u3002\n\u6700\u9577\u4e00\u81f4\u306f\u3001\u672b\u5c3e\u307e\u3067\u6d88\u8cbb\u3057\u305f\u5f8c1\u56de\u306e\u30d0\u30c3\u30af\u30c8\u30e9\u30c3\u30af\u3067\u30de\u30c3\u30c1\u3059\u308b\u306e\u3067\u901f\u3044\u3002\n\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4\u306f\u3001\u6700\u9577\u4e00\u81f4\u3068\u901f\u5ea6\u306f\u540c\u7b49\u3060\u304c\u30de\u30c3\u30c1\u3057\u306a\u3044\u3002\n\n\n\u7d50\u679c\n<?php\n$try = 10000;\n$length = 100000;\n$patterns = [\n    '\u6700\u77ed\u4e00\u81f4' => '/\\Aa+?a\\z/',\n    '\u6700\u9577\u4e00\u81f4' => '/\\Aa+a\\z/',\n    '\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4' => '/\\Aa++a\\z/',\n];\n$string = str_repeat('a', $length);\n$sum = array_fill_keys(array_keys($patterns), 0.0);\nfor ($i = 0; $i < $try; ++$i) {\n    foreach ($patterns as $key => $pattern) {\n        $a = microtime(true);\n        preg_match($pattern, $string);\n        $b = microtime(true);\n        $sum[$key] += $b - $a;\n    }\n}\nprint_r(array_map(\n    function ($i) use ($try) { return sprintf('%.5f sec', $i); },\n    $sum\n));\n/*\nArray\n(\n    [\u6700\u77ed\u4e00\u81f4] => 2.77713 sec\n    [\u6700\u9577\u4e00\u81f4] => 0.72023 sec\n    [\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4] => 0.71401 sec\n)\n*/\n\n\u4e88\u60f3\u901a\u308a\u3067\u3059\u3002\n\nCase 2: \"aaa...aaa\" ~ /\\Aa+a\\A/\n\n\\z\u3092\\A\u306b\u5909\u3048\u3066\u307f\u307e\u3057\u305f\u3002\u3053\u306e\u30b1\u30fc\u30b9\u306f\u30de\u30c3\u30c1\u5931\u6557\u3092\u671f\u5f85\u3057\u307e\u3059\u3002\n\n\u4e88\u60f3\n\n\u6700\u77ed\u4e00\u81f4\u306f\u30011\u56de\u3054\u3068\u306b\u5f8c\u308d\u3068\u30de\u30c3\u30c1\u3059\u308b\u304b\u3069\u3046\u304b\u3092\u691c\u8a3c\u3059\u308b\u306e\u3067\u9045\u3044\u3002\n\u6700\u9577\u4e00\u81f4\u306f\u3001\u672b\u5c3e\u307e\u3067\u6d88\u8cbb\u3057\u305f\u5f8c\u5148\u982d\u307e\u3067\u30d0\u30c3\u30af\u30c8\u30e9\u30c3\u30af\u3092\u884c\u3046\u306e\u3067\u975e\u5e38\u306b\u9045\u3044\u3002\n\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4\u306f\u3001\u672b\u5c3e\u307e\u3067\u6d88\u8cbb\u3057\u305f\u5f8c\u30d0\u30c3\u30af\u30c8\u30e9\u30c3\u30af\u3092\u884c\u308f\u306a\u3044\u306e\u3067\u901f\u3044\u3002\n\n\n\u7d50\u679c\n<?php\n$try = 10000;\n$length = 100000;\n$patterns = [\n    '\u6700\u77ed\u4e00\u81f4' => '/\\Aa+?a\\A/',\n    '\u6700\u9577\u4e00\u81f4' => '/\\Aa+a\\A/',\n    '\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4' => '/\\Aa++a\\A/',\n];\n$string = str_repeat('a', $length);\n$sum = array_fill_keys(array_keys($patterns), 0.0);\nfor ($i = 0; $i < $try; ++$i) {\n    foreach ($patterns as $key => $pattern) {\n        $a = microtime(true);\n        preg_match($pattern, $string);\n        $b = microtime(true);\n        $sum[$key] += $b - $a;\n    }\n}\nprint_r(array_map(\n    function ($i) use ($try) { return sprintf('%.5f sec', $i); },\n    $sum\n));\n/*\nArray\n(\n    [\u6700\u77ed\u4e00\u81f4] => 2.72884 sec\n    [\u6700\u9577\u4e00\u81f4] => 3.40929 sec\n    [\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4] => 0.69334 sec\n)\n*/\n\n\u3053\u308c\u3082\u4e88\u60f3\u901a\u308a\u3067\u3059\u306d\u3002\n\nCase 3: \"aaa...aaa\" ~ /\\Aa+b\\z/\n\n\u4eca\u5ea6\u306f\u672b\u5c3e\u3092b\\z\u3068\u3057\u3066\u307f\u307e\u3059\u3002\u3053\u306e\u30b1\u30fc\u30b9\u306f\u30de\u30c3\u30c1\u5931\u6557\u3092\u671f\u5f85\u3057\u307e\u3059\u3002\n\n\u4e88\u60f3\nCase 2 \u3068\u540c\u69d8\u3002\n\n\u7d50\u679c\n<?php\n$try = 10000;\n$length = 100000;\n$patterns = [\n    '\u6700\u77ed\u4e00\u81f4' => '/\\Aa+?b\\z/',\n    '\u6700\u9577\u4e00\u81f4' => '/\\Aa+b\\z/',\n    '\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4' => '/\\Aa++b\\z/',\n];\n$string = str_repeat('a', $length);\n$sum = array_fill_keys(array_keys($patterns), 0.0);\nfor ($i = 0; $i < $try; ++$i) {\n    foreach ($patterns as $key => $pattern) {\n        $a = microtime(true);\n        preg_match($pattern, $string);\n        $b = microtime(true);\n        $sum[$key] += $b - $a;\n    }\n}\nprint_r(array_map(\n    function ($i) use ($try) { return sprintf('%.5f sec', $i); },\n    $sum\n));\n/*\nArray\n(\n    [\u6700\u77ed\u4e00\u81f4] => 0.70907 sec\n    [\u6700\u9577\u4e00\u81f4] => 0.70840 sec\n    [\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4] => 0.70872 sec\n)\n*/\n\n\u304a\u3063\u3068\u3001\u3053\u308c\u306f\u3061\u3087\u3063\u3068\u4e88\u60f3\u5916\u3067\u3059\u3002\u8a00\u660e\u306e\u5834\u5408\u306f\u4f55\u3082\u8003\u3048\u305a\u30d0\u30c3\u30af\u30c8\u30e9\u30c3\u30af\u3092\u884c\u3063\u3066\u3057\u307e\u3046\u3088\u3046\u3067\u3059\u304c\u3001\u5358\u306a\u308b1\u6587\u5b57\u304c\u660e\u3089\u304b\u306b\u30de\u30c3\u30c1\u3057\u306a\u3044\u5834\u5408\u306f\u30d0\u30c3\u30af\u30c8\u30e9\u30c3\u30af\u3092\u884c\u308f\u306a\u3044\u3068\u3044\u3046\u8ce2\u660e\u306a\u5224\u65ad\u3092\u4e0b\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\nCase 4: \"aaa...aaa\" ~ /\\Aa+(?=b\\z)/\n\n\u5148\u307b\u3069\u306e\u8003\u5bdf\u3092\u5b9f\u8a3c\u3059\u308b\u305f\u3081\u3001\"\u61f8\u547d\u306a\u5224\u65ad\" \u3092\u3055\u305b\u306a\u3044\u3088\u3046\u306b\u7121\u7406\u77e2\u7406\u8a72\u5f53\u7b87\u6240\u3092\u8a00\u660e\u306b\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u3087\u3046\u3002\u3053\u306e\u30b1\u30fc\u30b9\u306f\u30de\u30c3\u30c1\u5931\u6557\u3092\u671f\u5f85\u3057\u307e\u3059\u3002\n\n\u4e88\u60f3\nCase 2 \u3068\u540c\u69d8\u3002\n\n\u7d50\u679c\n<?php\n$try = 10000;\n$length = 100000;\n$patterns = [\n    '\u6700\u77ed\u4e00\u81f4' => '/\\Aa+?(?=b\\z)/',\n    '\u6700\u9577\u4e00\u81f4' => '/\\Aa+(?=b\\z)/',\n    '\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4' => '/\\Aa++(?=b\\z)/',\n];\n$string = str_repeat('a', $length);\n$sum = array_fill_keys(array_keys($patterns), 0.0);\nfor ($i = 0; $i < $try; ++$i) {\n    foreach ($patterns as $key => $pattern) {\n        $a = microtime(true);\n        preg_match($pattern, $string);\n        $b = microtime(true);\n        $sum[$key] += $b - $a;\n    }\n}\nprint_r(array_map(\n    function ($i) use ($try) { return sprintf('%.5f sec', $i); },\n    $sum\n));\n/*\nArray\n(\n    [\u6700\u77ed\u4e00\u81f4] => 2.79401 sec\n    [\u6700\u9577\u4e00\u81f4] => 3.47638 sec\n    [\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4] => 0.68388 sec\n)\n*/\n\n\u8a00\u660e\u3067\u306e\u5acc\u304c\u3089\u305b\u5927\u6210\u529f\u3002\n\n\u7d50\u8ad6\n\u3092\u51fa\u3059\u306b\u306f\u307e\u3060\u307e\u3060\u691c\u8a3c\u4e0d\u8db3\u3060\u3068\u601d\u3046\u306e\u3067\u3001\u7de8\u96c6\u30ea\u30af\u30a8\u30b9\u30c8\u3084\u30b3\u30e1\u30f3\u30c8\u3067\u306e\u63d0\u6848\u306a\u3069\u304a\u5f85\u3061\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n# \u306f\u3058\u3081\u306b\n\n[\u8a00\u8a9e\u5225\uff1a\u30d1\u30b9\u30ef\u30fc\u30c9\u5411\u3051\u306e\u6b63\u898f\u8868\u73fe](http://qiita.com/mpyw/items/886218e7b418dfed254b) \u3067\u8b70\u8ad6\u3092\u3057\u3066\u3044\u308b\u3046\u3061\u306b\u3001\u30d0\u30c3\u30af\u30c8\u30e9\u30c3\u30af\u306b\u3064\u3044\u3066\u306e\u7591\u554f\u304c\u308f\u3044\u3066\u304d\u305f\u306e\u3067\u3001\u3053\u3053\u3067\u5b9f\u969b\u306b\u8abf\u67fb\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-06-23 16.23.34.png](https://qiita-image-store.s3.amazonaws.com/0/25060/eff0a634-fcd1-c1bf-103a-6d91161d1012.png)\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-06-23 16.23.51.png](https://qiita-image-store.s3.amazonaws.com/0/25060/4958eb3a-3402-17a7-ee7e-13c5d281d3da.png)\n\n\n\n# \u30d9\u30f3\u30c1\u30de\u30fc\u30af\n\n\u300c`\u6587\u5b57\u5217` ~ `\u6b63\u898f\u8868\u73fe (\u6700\u9577\u4e00\u81f4\u306e\u57fa\u672c\u5f62)`\u300d\u306e\u898b\u51fa\u3057\u3068\u3057\u307e\u3059\u3002\n\n## Case 1: `\"aaa...aaa\"` ~ `/\\Aa+a\\z/`\n\n\u6700\u77ed\u4e00\u81f4\u3068\u6700\u9577\u4e00\u81f4\u3092\u6bd4\u8f03\u3059\u308b\u969b\u306b\u7528\u3044\u3089\u308c\u308b\u5178\u578b\u7684\u306a\u4f8b\u3067\u3059\u3002\u3053\u306e\u30b1\u30fc\u30b9\u306f\u30de\u30c3\u30c1\u6210\u529f\u3092\u671f\u5f85\u3057\u307e\u3059\u3002\n\n### \u4e88\u60f3\n\n- \u6700\u77ed\u4e00\u81f4\u306f\u30011\u56de\u3054\u3068\u306b\u5f8c\u308d\u3068\u30de\u30c3\u30c1\u3059\u308b\u304b\u3069\u3046\u304b\u3092\u691c\u8a3c\u3059\u308b\u306e\u3067\u9045\u3044\u3002\n- \u6700\u9577\u4e00\u81f4\u306f\u3001\u672b\u5c3e\u307e\u3067\u6d88\u8cbb\u3057\u305f\u5f8c1\u56de\u306e\u30d0\u30c3\u30af\u30c8\u30e9\u30c3\u30af\u3067\u30de\u30c3\u30c1\u3059\u308b\u306e\u3067\u901f\u3044\u3002\n- \u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4\u306f\u3001\u6700\u9577\u4e00\u81f4\u3068\u901f\u5ea6\u306f\u540c\u7b49\u3060\u304c\u30de\u30c3\u30c1\u3057\u306a\u3044\u3002\n\n### \u7d50\u679c\n\n```php\n<?php\n$try = 10000;\n$length = 100000;\n$patterns = [\n    '\u6700\u77ed\u4e00\u81f4' => '/\\Aa+?a\\z/',\n    '\u6700\u9577\u4e00\u81f4' => '/\\Aa+a\\z/',\n    '\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4' => '/\\Aa++a\\z/',\n];\n$string = str_repeat('a', $length);\n$sum = array_fill_keys(array_keys($patterns), 0.0);\nfor ($i = 0; $i < $try; ++$i) {\n    foreach ($patterns as $key => $pattern) {\n        $a = microtime(true);\n        preg_match($pattern, $string);\n        $b = microtime(true);\n        $sum[$key] += $b - $a;\n    }\n}\nprint_r(array_map(\n    function ($i) use ($try) { return sprintf('%.5f sec', $i); },\n    $sum\n));\n/*\nArray\n(\n    [\u6700\u77ed\u4e00\u81f4] => 2.77713 sec\n    [\u6700\u9577\u4e00\u81f4] => 0.72023 sec\n    [\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4] => 0.71401 sec\n)\n*/\n```\n\n\u4e88\u60f3\u901a\u308a\u3067\u3059\u3002\n\n## Case 2: `\"aaa...aaa\"` ~ `/\\Aa+a\\A/`\n\n`\\z`\u3092`\\A`\u306b\u5909\u3048\u3066\u307f\u307e\u3057\u305f\u3002\u3053\u306e\u30b1\u30fc\u30b9\u306f\u30de\u30c3\u30c1\u5931\u6557\u3092\u671f\u5f85\u3057\u307e\u3059\u3002\n\n### \u4e88\u60f3\n\n- \u6700\u77ed\u4e00\u81f4\u306f\u30011\u56de\u3054\u3068\u306b\u5f8c\u308d\u3068\u30de\u30c3\u30c1\u3059\u308b\u304b\u3069\u3046\u304b\u3092\u691c\u8a3c\u3059\u308b\u306e\u3067\u9045\u3044\u3002\n- \u6700\u9577\u4e00\u81f4\u306f\u3001\u672b\u5c3e\u307e\u3067\u6d88\u8cbb\u3057\u305f\u5f8c\u5148\u982d\u307e\u3067\u30d0\u30c3\u30af\u30c8\u30e9\u30c3\u30af\u3092\u884c\u3046\u306e\u3067\u975e\u5e38\u306b\u9045\u3044\u3002\n- \u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4\u306f\u3001\u672b\u5c3e\u307e\u3067\u6d88\u8cbb\u3057\u305f\u5f8c\u30d0\u30c3\u30af\u30c8\u30e9\u30c3\u30af\u3092\u884c\u308f\u306a\u3044\u306e\u3067\u901f\u3044\u3002\n\n### \u7d50\u679c\n\n```php\n<?php\n$try = 10000;\n$length = 100000;\n$patterns = [\n    '\u6700\u77ed\u4e00\u81f4' => '/\\Aa+?a\\A/',\n    '\u6700\u9577\u4e00\u81f4' => '/\\Aa+a\\A/',\n    '\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4' => '/\\Aa++a\\A/',\n];\n$string = str_repeat('a', $length);\n$sum = array_fill_keys(array_keys($patterns), 0.0);\nfor ($i = 0; $i < $try; ++$i) {\n    foreach ($patterns as $key => $pattern) {\n        $a = microtime(true);\n        preg_match($pattern, $string);\n        $b = microtime(true);\n        $sum[$key] += $b - $a;\n    }\n}\nprint_r(array_map(\n    function ($i) use ($try) { return sprintf('%.5f sec', $i); },\n    $sum\n));\n/*\nArray\n(\n    [\u6700\u77ed\u4e00\u81f4] => 2.72884 sec\n    [\u6700\u9577\u4e00\u81f4] => 3.40929 sec\n    [\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4] => 0.69334 sec\n)\n*/\n```\n\n\u3053\u308c\u3082\u4e88\u60f3\u901a\u308a\u3067\u3059\u306d\u3002\n\n## Case 3: `\"aaa...aaa\"` ~ `/\\Aa+b\\z/`\n\n\u4eca\u5ea6\u306f\u672b\u5c3e\u3092`b\\z`\u3068\u3057\u3066\u307f\u307e\u3059\u3002\u3053\u306e\u30b1\u30fc\u30b9\u306f\u30de\u30c3\u30c1\u5931\u6557\u3092\u671f\u5f85\u3057\u307e\u3059\u3002\n\n### \u4e88\u60f3\n\nCase 2 \u3068\u540c\u69d8\u3002\n\n### \u7d50\u679c\n\n```php\n<?php\n$try = 10000;\n$length = 100000;\n$patterns = [\n    '\u6700\u77ed\u4e00\u81f4' => '/\\Aa+?b\\z/',\n    '\u6700\u9577\u4e00\u81f4' => '/\\Aa+b\\z/',\n    '\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4' => '/\\Aa++b\\z/',\n];\n$string = str_repeat('a', $length);\n$sum = array_fill_keys(array_keys($patterns), 0.0);\nfor ($i = 0; $i < $try; ++$i) {\n    foreach ($patterns as $key => $pattern) {\n        $a = microtime(true);\n        preg_match($pattern, $string);\n        $b = microtime(true);\n        $sum[$key] += $b - $a;\n    }\n}\nprint_r(array_map(\n    function ($i) use ($try) { return sprintf('%.5f sec', $i); },\n    $sum\n));\n/*\nArray\n(\n    [\u6700\u77ed\u4e00\u81f4] => 0.70907 sec\n    [\u6700\u9577\u4e00\u81f4] => 0.70840 sec\n    [\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4] => 0.70872 sec\n)\n*/\n```\n\n\u304a\u3063\u3068\u3001\u3053\u308c\u306f\u3061\u3087\u3063\u3068\u4e88\u60f3\u5916\u3067\u3059\u3002\u8a00\u660e\u306e\u5834\u5408\u306f\u4f55\u3082\u8003\u3048\u305a\u30d0\u30c3\u30af\u30c8\u30e9\u30c3\u30af\u3092\u884c\u3063\u3066\u3057\u307e\u3046\u3088\u3046\u3067\u3059\u304c\u3001\u5358\u306a\u308b1\u6587\u5b57\u304c\u660e\u3089\u304b\u306b\u30de\u30c3\u30c1\u3057\u306a\u3044\u5834\u5408\u306f\u30d0\u30c3\u30af\u30c8\u30e9\u30c3\u30af\u3092\u884c\u308f\u306a\u3044\u3068\u3044\u3046\u8ce2\u660e\u306a\u5224\u65ad\u3092\u4e0b\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\n## Case 4: `\"aaa...aaa\"` ~ `/\\Aa+(?=b\\z)/`\n\n\u5148\u307b\u3069\u306e\u8003\u5bdf\u3092\u5b9f\u8a3c\u3059\u308b\u305f\u3081\u3001\"\u61f8\u547d\u306a\u5224\u65ad\" \u3092\u3055\u305b\u306a\u3044\u3088\u3046\u306b\u7121\u7406\u77e2\u7406\u8a72\u5f53\u7b87\u6240\u3092\u8a00\u660e\u306b\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u3087\u3046\u3002\u3053\u306e\u30b1\u30fc\u30b9\u306f\u30de\u30c3\u30c1\u5931\u6557\u3092\u671f\u5f85\u3057\u307e\u3059\u3002\n\n### \u4e88\u60f3\n\nCase 2 \u3068\u540c\u69d8\u3002\n\n### \u7d50\u679c\n\n```php\n<?php\n$try = 10000;\n$length = 100000;\n$patterns = [\n    '\u6700\u77ed\u4e00\u81f4' => '/\\Aa+?(?=b\\z)/',\n    '\u6700\u9577\u4e00\u81f4' => '/\\Aa+(?=b\\z)/',\n    '\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4' => '/\\Aa++(?=b\\z)/',\n];\n$string = str_repeat('a', $length);\n$sum = array_fill_keys(array_keys($patterns), 0.0);\nfor ($i = 0; $i < $try; ++$i) {\n    foreach ($patterns as $key => $pattern) {\n        $a = microtime(true);\n        preg_match($pattern, $string);\n        $b = microtime(true);\n        $sum[$key] += $b - $a;\n    }\n}\nprint_r(array_map(\n    function ($i) use ($try) { return sprintf('%.5f sec', $i); },\n    $sum\n));\n/*\nArray\n(\n    [\u6700\u77ed\u4e00\u81f4] => 2.79401 sec\n    [\u6700\u9577\u4e00\u81f4] => 3.47638 sec\n    [\u72ec\u5360\u7684\u91cf\u6307\u5b9a\u5b50\u4ed8\u304d\u6700\u9577\u4e00\u81f4] => 0.68388 sec\n)\n*/\n```\n\n\u8a00\u660e\u3067\u306e\u5acc\u304c\u3089\u305b\u5927\u6210\u529f\u3002\n\n# \u7d50\u8ad6\n\n\u3092\u51fa\u3059\u306b\u306f\u307e\u3060\u307e\u3060\u691c\u8a3c\u4e0d\u8db3\u3060\u3068\u601d\u3046\u306e\u3067\u3001\u7de8\u96c6\u30ea\u30af\u30a8\u30b9\u30c8\u3084\u30b3\u30e1\u30f3\u30c8\u3067\u306e\u63d0\u6848\u306a\u3069\u304a\u5f85\u3061\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n", "tags": ["\u6b63\u898f\u8868\u73fe", "PHP7.0", "pcre"]}