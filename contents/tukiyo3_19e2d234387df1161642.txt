{"context": "\n\n\u53c2\u8003\n\njQuery\u3092\u4f7f\u308f\u305ajavascript\u3060\u3051\u3067\u66f8\u304d\u76f4\u3057\u305f\u969b\u306e\u8a18\u6cd5\u30e1\u30e2 - Qiita\n\u5341\u4e8c\u7ae0\u7b2c\u4e94\u56de\u3000File API \u2014 JavaScript\u521d\u7d1a\u8005\u304b\u3089\u4e2d\u7d1a\u8005\u306b\u306a\u308d\u3046 \u2014 uhyohyo.net\n\n\nIE6\u301cIE8\u5bfe\u5fdc\u306ejQuery\n\nhttps://code.jquery.com/jquery-1.12.4.min.js\n\n\njQuery <-> javascript\n\n\u4f8b1\ndocument.getElementById(\"imageFile\").files[0];\n\n$(\"#imageFile\").prop(\"files\")[0];\n\n\n\n\n\u4f8b2\n<div id=\"result\"></div>\n\ndocument.getElementById(\"result\").innerHTML = \"aa\";\n\n$(\"#result\").text(\"aa\");\n\n\n\njquery\u3067\u5c5e\u6027\u3092\u5909\u66f4\u3055\u305b\u308b\u65b9\u6cd5\n\n\nsrc\u3092\u5909\u66f4\n\n<img src=\"a.jpg\">\n\n$(\"img\").attr(\"src\",\"b.jpg\");\n\n\n\u5024\u3092\u5909\u66f4\n\n\nclass\u3092\u5909\u66f4\n$(\"img\").addClass(\"btn2\");\n\n\n\nvalue\u306e\u5909\u66f4\n$(\"\u30bb\u30ec\u30af\u30bf\").val(\"\u5909\u66f4\u5f8c\u306e\u5024\");\n\n\n\n\u5024\u3092\u53d6\u5f97\n\n\u5024\u3092\u53d6\u5f97\n$(\"\u30bb\u30ec\u30af\u30bf\").val();\n\n\n\n\u30bb\u30ec\u30af\u30bf\n$(\"#d1 > .c1 > a:first\")\n\n\niPhone\u304b\u3089\u753b\u50cfUPLOAD\n\nindex.html\n<!DOCTYPE html>\n<meta name=\"viewport\" content=\"width=device-width,user-scalable=0\">\n<script src=\"jquery-1.11.3.min.js\"></script>\n<script>\nfunction upload() {\n    var file = $(\"#imageFile\").prop(\"files\")[0];\n    $(\"#result\").text(\"uploading..\");\n    var reader = new FileReader();\n    reader.onload = function() {\n        $(\"#img\").attr(\"src\", reader.result);\n        var file = $(\"#imageFile\").prop(\"files\")[0];\n        $.ajax({\n            type: 'post',\n            url: 'upload.php',\n            data: {file: reader.result}\n        })\n        .then(\n            function(response){ $(\"#result\").text(\"\u6210\u529f\"); },\n            function(){ $(\"#result\").text(\"\u5931\u6557\"); }\n        );\n\n    }\n    reader.readAsDataURL(file);\n}\n\n$(function() {\n    if (!window.File){\n        $(\"#result\").text(\"File API \u4e0d\u53ef\");\n        return;\n    }\n}, true);\n\n</script>\n<form>\n  <input type=\"file\" accept=\"image/*\" id=\"imageFile\" onchange=\"upload();\"/>\n</form>\n<div id=\"result\">\u753b\u50cf\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044</div>\n<img id=\"img\" style=\"max-width:300px; height:auto;\" />\n\n\n\nupload.php(fixme)\n<?php\n$from_arr = array( \" \"\n    ,\"data:image/png;base64,\"\n    ,\"data:image/jpg;base64,\"\n    ,\"data:image/jpeg;base64,\");\n$to_arr   = array( \"+\" , \"\" , \"\" , \"\" , \"\" );\n$photo    = base64_decode(str_replace($from_arr, $to_arr, $_POST['file']));\n$filename = \"output.jpg\";\nfile_put_contents( $filename , $photo );\n\n\n## \u53c2\u8003\n\n* [jQuery\u3092\u4f7f\u308f\u305ajavascript\u3060\u3051\u3067\u66f8\u304d\u76f4\u3057\u305f\u969b\u306e\u8a18\u6cd5\u30e1\u30e2 - Qiita](http://qiita.com/moriyaman/items/3b3f7878f8ecc2b76372)\n* [\u5341\u4e8c\u7ae0\u7b2c\u4e94\u56de\u3000File API \u2014 JavaScript\u521d\u7d1a\u8005\u304b\u3089\u4e2d\u7d1a\u8005\u306b\u306a\u308d\u3046 \u2014 uhyohyo.net](http://uhyohyo.net/javascript/12_5.html)\n\n## IE6\u301cIE8\u5bfe\u5fdc\u306ejQuery\n\n* https://code.jquery.com/jquery-1.12.4.min.js\n\n## jQuery <-> javascript\n\n```js:\u4f8b1\ndocument.getElementById(\"imageFile\").files[0];\n\n$(\"#imageFile\").prop(\"files\")[0];\n\n```\n\n```js:\u4f8b2\n<div id=\"result\"></div>\n\ndocument.getElementById(\"result\").innerHTML = \"aa\";\n\n$(\"#result\").text(\"aa\");\n```\n\n## [jquery\u3067\u5c5e\u6027\u3092\u5909\u66f4\u3055\u305b\u308b\u65b9\u6cd5](http://www.geekzshu.com/jquery/712)\n\n* src\u3092\u5909\u66f4\n\n```js:\n<img src=\"a.jpg\">\n```\n\n```\n$(\"img\").attr(\"src\",\"b.jpg\");\n```\n\n* \u5024\u3092\u5909\u66f4\n\n```js:class\u3092\u5909\u66f4\n$(\"img\").addClass(\"btn2\");\n```\n\n```js:value\u306e\u5909\u66f4\n$(\"\u30bb\u30ec\u30af\u30bf\").val(\"\u5909\u66f4\u5f8c\u306e\u5024\");\n```\n\n## \u5024\u3092\u53d6\u5f97\n\n```js:\u5024\u3092\u53d6\u5f97\n$(\"\u30bb\u30ec\u30af\u30bf\").val();\n```\n\n## \u30bb\u30ec\u30af\u30bf\n\n```\n$(\"#d1 > .c1 > a:first\")\n```\n\n## iPhone\u304b\u3089\u753b\u50cfUPLOAD\n\n```html:index.html\n<!DOCTYPE html>\n<meta name=\"viewport\" content=\"width=device-width,user-scalable=0\">\n<script src=\"jquery-1.11.3.min.js\"></script>\n<script>\nfunction upload() {\n    var file = $(\"#imageFile\").prop(\"files\")[0];\n    $(\"#result\").text(\"uploading..\");\n    var reader = new FileReader();\n    reader.onload = function() {\n        $(\"#img\").attr(\"src\", reader.result);\n        var file = $(\"#imageFile\").prop(\"files\")[0];\n        $.ajax({\n            type: 'post',\n            url: 'upload.php',\n            data: {file: reader.result}\n        })\n        .then(\n            function(response){ $(\"#result\").text(\"\u6210\u529f\"); },\n            function(){ $(\"#result\").text(\"\u5931\u6557\"); }\n        );\n\n    }\n    reader.readAsDataURL(file);\n}\n\n$(function() {\n    if (!window.File){\n        $(\"#result\").text(\"File API \u4e0d\u53ef\");\n        return;\n    }\n}, true);\n\n</script>\n<form>\n  <input type=\"file\" accept=\"image/*\" id=\"imageFile\" onchange=\"upload();\"/>\n</form>\n<div id=\"result\">\u753b\u50cf\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044</div>\n<img id=\"img\" style=\"max-width:300px; height:auto;\" />\n```\n\n```php:upload.php(fixme)\n<?php\n$from_arr = array( \" \"\n    ,\"data:image/png;base64,\"\n    ,\"data:image/jpg;base64,\"\n    ,\"data:image/jpeg;base64,\");\n$to_arr   = array( \"+\" , \"\" , \"\" , \"\" , \"\" );\n$photo    = base64_decode(str_replace($from_arr, $to_arr, $_POST['file']));\n$filename = \"output.jpg\";\nfile_put_contents( $filename , $photo );\n```\n", "tags": ["jQuery", "snippets"]}