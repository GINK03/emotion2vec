{"context": "\u30a6\u30a7\u30d6\u30d3\u30e5\u30fc\u3092\u4ed5\u8fbc\u3093\u3060\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u30a2\u30d7\u30ea\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\n\nYouTubeApp\nObjC.import('Cocoa')\nObjC.import('WebKit')\n\nvar webViewRect = $.NSMakeRect(0, 0, 1024, 560)\nvar webViewConf = $.WKWebViewConfiguration.alloc.init\nwebViewConf.preferences.plugInsEnabled = true\nvar webView = $.WKWebView.alloc.initWithFrameConfiguration(webViewRect, webViewConf)\n\nvar url = $.NSURL.URLWithString('http://www.youtube.com/')\nvar req = $.NSURLRequest.requestWithURL(url)\nwebView.loadRequest(req)\n\nvar webViewItem = $.NSMenuItem.alloc.init\nwebViewItem.view = webView\n\nvar reloadItem = $.NSMenuItem.alloc.init\nreloadItem.title = 'Reload'\n\nvar quitItem = $.NSMenuItem.alloc.init\nquitItem.title = 'Quit'\n\nvar statusMenu = $.NSMenu.alloc.init\nstatusMenu.addItem(webViewItem)\nstatusMenu.addItem($.NSMenuItem.separatorItem)\nstatusMenu.addItem(reloadItem)\nstatusMenu.addItem($.NSMenuItem.separatorItem)\nstatusMenu.addItem(quitItem)\n\nObjC.registerSubclass({\n    name: 'ActivateStatusItemAction',\n    methods: {\n        'popUpMenu:': {\n            types: ['void', ['id']],\n            implementation: function(sender) {\n                if ($.NSApplication.sharedApplication.active) {\n                    statusItem.highlightMode = true\n                    statusItem.popUpStatusItemMenu(statusMenu)\n                    statusItem.highlightMode = false\n                } else {\n                    $.NSApplication.sharedApplication.activateIgnoringOtherApps(true)\n                }\n            }\n        },\n        'becomeActive:': {\n            types: ['void', ['id']],\n            implementation: function(sender) {\n                statusItem.button.performClick(this)\n            }\n        },\n    }\n})\n\nvar statusAction = $.ActivateStatusItemAction.alloc.init\nvar statusItem = $.NSStatusBar.systemStatusBar.statusItemWithLength($.NSVariableStatusItemLength)\nstatusItem.title = '\ud83d\udcfa'\nstatusItem.target = statusAction\nstatusItem.action = 'popUpMenu:'\nstatusItem.highlightMode = false\n\n$.NSNotificationCenter.defaultCenter.addObserverSelectorNameObject(statusAction, 'becomeActive:', $.NSApplicationDidBecomeActiveNotification, $.NSApp)\n\nObjC.registerSubclass({\n    name: 'Action',\n    methods: {\n        'reload:': {\n            types: ['void', ['id']],\n            implementation: function(sender) {\n                webView.reloadFromOrigin\n            }\n        },\n        'quit:': {\n            types: ['void', ['id']],\n            implementation: function(sender) {\n                $.NSNotificationCenter.defaultCenter.removeObserver(statusAction)\n                $.NSApp.terminate($())\n            }\n        },\n    }\n})\n\nvar action = $.Action.alloc.init\n\nreloadItem.target = action\nreloadItem.action = 'reload:'\n\nquitItem.target = action\nquitItem.action = 'quit:'\n\n\n\u30dd\u30a4\u30f3\u30c8\u306f\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u3092\u4f7f\u3063\u3066\u30af\u30ea\u30c3\u30af\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u30a2\u30d7\u30ea\u3092\u6700\u524d\u9762\u306b\u6301\u3063\u3066\u304f\u308b\u3068\u3053\u308d\u3002\u305d\u3046\u3057\u306a\u3044\u3068\u30a6\u30a7\u30d6\u30d3\u30e5\u30fc\u306f\u30ad\u30fc\u30dc\u30fc\u30c9\u5165\u529b\u3092\u53d7\u3051\u4ed8\u3051\u306a\u3044\u306e\u3067\u3002\n\u30a6\u30a7\u30d6\u30d3\u30e5\u30fc\u3092\u4ed5\u8fbc\u3093\u3060\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u30a2\u30d7\u30ea\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\n\n```js:YouTubeApp\nObjC.import('Cocoa')\nObjC.import('WebKit')\n\nvar webViewRect = $.NSMakeRect(0, 0, 1024, 560)\nvar webViewConf = $.WKWebViewConfiguration.alloc.init\nwebViewConf.preferences.plugInsEnabled = true\nvar webView = $.WKWebView.alloc.initWithFrameConfiguration(webViewRect, webViewConf)\n\nvar url = $.NSURL.URLWithString('http://www.youtube.com/')\nvar req = $.NSURLRequest.requestWithURL(url)\nwebView.loadRequest(req)\n\nvar webViewItem = $.NSMenuItem.alloc.init\nwebViewItem.view = webView\n\nvar reloadItem = $.NSMenuItem.alloc.init\nreloadItem.title = 'Reload'\n\nvar quitItem = $.NSMenuItem.alloc.init\nquitItem.title = 'Quit'\n\nvar statusMenu = $.NSMenu.alloc.init\nstatusMenu.addItem(webViewItem)\nstatusMenu.addItem($.NSMenuItem.separatorItem)\nstatusMenu.addItem(reloadItem)\nstatusMenu.addItem($.NSMenuItem.separatorItem)\nstatusMenu.addItem(quitItem)\n\nObjC.registerSubclass({\n\tname: 'ActivateStatusItemAction',\n\tmethods: {\n\t\t'popUpMenu:': {\n\t\t\ttypes: ['void', ['id']],\n\t\t\timplementation: function(sender) {\n\t\t\t\tif ($.NSApplication.sharedApplication.active) {\n\t\t\t\t\tstatusItem.highlightMode = true\n\t\t\t\t\tstatusItem.popUpStatusItemMenu(statusMenu)\n\t\t\t\t\tstatusItem.highlightMode = false\n\t\t\t\t} else {\n\t\t\t\t\t$.NSApplication.sharedApplication.activateIgnoringOtherApps(true)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t'becomeActive:': {\n\t\t\ttypes: ['void', ['id']],\n\t\t\timplementation: function(sender) {\n\t\t\t\tstatusItem.button.performClick(this)\n\t\t\t}\n\t\t},\n\t}\n})\n\nvar statusAction = $.ActivateStatusItemAction.alloc.init\nvar statusItem = $.NSStatusBar.systemStatusBar.statusItemWithLength($.NSVariableStatusItemLength)\nstatusItem.title = '\ud83d\udcfa'\nstatusItem.target = statusAction\nstatusItem.action = 'popUpMenu:'\nstatusItem.highlightMode = false\n\n$.NSNotificationCenter.defaultCenter.addObserverSelectorNameObject(statusAction, 'becomeActive:', $.NSApplicationDidBecomeActiveNotification, $.NSApp)\n\nObjC.registerSubclass({\n\tname: 'Action',\n\tmethods: {\n\t\t'reload:': {\n\t\t\ttypes: ['void', ['id']],\n\t\t\timplementation: function(sender) {\n\t\t\t\twebView.reloadFromOrigin\n\t\t\t}\n\t\t},\n\t\t'quit:': {\n\t\t\ttypes: ['void', ['id']],\n\t\t\timplementation: function(sender) {\n\t\t\t\t$.NSNotificationCenter.defaultCenter.removeObserver(statusAction)\n\t\t\t\t$.NSApp.terminate($())\n\t\t\t}\n\t\t},\n\t}\n})\n\nvar action = $.Action.alloc.init\n\nreloadItem.target = action\nreloadItem.action = 'reload:'\n\nquitItem.target = action\nquitItem.action = 'quit:'\n```\n\n\u30dd\u30a4\u30f3\u30c8\u306f\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u3092\u4f7f\u3063\u3066\u30af\u30ea\u30c3\u30af\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u30a2\u30d7\u30ea\u3092\u6700\u524d\u9762\u306b\u6301\u3063\u3066\u304f\u308b\u3068\u3053\u308d\u3002\u305d\u3046\u3057\u306a\u3044\u3068\u30a6\u30a7\u30d6\u30d3\u30e5\u30fc\u306f\u30ad\u30fc\u30dc\u30fc\u30c9\u5165\u529b\u3092\u53d7\u3051\u4ed8\u3051\u306a\u3044\u306e\u3067\u3002\n", "tags": ["jXA"]}