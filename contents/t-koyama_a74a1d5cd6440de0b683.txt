{"context": "@Temarin_PITA \u3055\u3093\u306e \u4f55\u3067\u3082\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u3057\u305f\u3044 \u3092\u8aad\u3093\u3060\u3089\u30c1\u30a7\u30fc\u30f3\u3057\u305f\u304f\u306a\u3063\u305f\u3002\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u30dc\u30c3\u30af\u30b9\u3092\u8868\u793a\u3059\u308b\n\u666e\u6bb5\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u30dc\u30c3\u30af\u30b9\u3092\u8868\u793a\u3057\u3066\u30e6\u30fc\u30b6\u30fc\u304c\u62bc\u4e0b\u3057\u305f\u30dc\u30bf\u30f3\u306b\u5fdc\u3058\u3066\u51e6\u7406\u3092\u3059\u308b\u3068\u304d\n\n\u3044\u3064\u3082\u306e\nvar result = MessageBox.Show(\"\u30e1\u30c3\u30bb\u30fc\u30b8\", \"\u30bf\u30a4\u30c8\u30eb\", MessageBoxButton.OKCancel, MessageBoxImage.Question);\n\nif (result == MessageBoxResult.OK)\n{\n    // OK \u306e\u3068\u304d\n    Console.WriteLine(\"ok\");\n}\nelse\n{\n    // \u305d\u308c\u4ee5\u5916\n    Console.WriteLine(\"cancel\");\n}\n\n\n\u307f\u305f\u3044\u306a\u611f\u3058\u3067\u66f8\u304d\u307e\u3059\u3002 if \u6587\u3067\u7d50\u679c\u306b\u5fdc\u3058\u3066\u51e6\u7406\u3092\u5206\u5c90\u3055\u305b\u308b\u3042\u308c\u3067\u3059\u3002\n\n\u3042\u308c\nif (result == MessageBoxResult.OK)\n\n\n\u4eca\u56de\u306f MessageBox.Show() \u3057\u305f\u7d50\u679c\u3092 if \u6587\u306e\u6761\u4ef6\u5206\u5c90\u3092\u4f7f\u308f\u306a\u3044\u3067\u30c1\u30a7\u30fc\u30f3\u3057\u3066\u51e6\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\u30c1\u30a7\u30fc\u30f3\u3057\u305f\u30a4\u30e1\u30fc\u30b8\nmsgBox(\"\u30e1\u30c3\u30bb\u30fc\u30b8\", \"\u30bf\u30a4\u30c8\u30eb\")\n    .OK(() => Console.WriteLine(\"ok\"))\n    .Cancel(() => Console.WriteLine(\"cancel\"))\n    .Show();\n\n\n\n\u30b3\u30fc\u30c9\n\nChainableMessageBox.cs\nusing System;\nusing System.Collections.Generic;\nusing System.Windows;\n\nnamespace WpfApplication1\n{\n    /// <summary>\n    /// \u30c1\u30a7\u30fc\u30f3\u53ef\u80fd\u306a\u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n    /// </summary>\n    public sealed class ChainableMessageBox\n    {\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3067\u62bc\u4e0b\u3055\u308c\u305f\u30dc\u30bf\u30f3\u306b\u5fdc\u3058\u3066\u5b9f\u884c\u3059\u308b\u51e6\u7406\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002\n        /// </summary>\n        private Dictionary<MessageBoxResult, Action> _acts = new Dictionary<MessageBoxResult, Action>();\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3092\u8868\u793a\u3059\u308b\u95a2\u6570\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n        /// </summary>\n        private Func<MessageBoxResult> ShowMessageBox { get; }\n\n        private ChainableMessageBox(string messageBoxText, string caption, MessageBoxButton button, MessageBoxImage icon)\n        {\n            // \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3092\u8868\u793a\u3059\u308b\u95a2\u6570\u3092\u8a2d\u5b9a\n            ShowMessageBox = () => MessageBox.Show(messageBoxText, caption, button, icon);\n        }\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3067\u62bc\u4e0b\u3055\u308c\u305f\u30dc\u30bf\u30f3\u306b\u5fdc\u3058\u3066\u5b9f\u884c\u3059\u308b\u51e6\u7406\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n        /// </summary>\n        /// <param name=\"result\">\u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3067\u62bc\u4e0b\u3055\u308c\u305f\u30dc\u30bf\u30f3</param>\n        /// <param name=\"act\">\u5b9f\u884c\u3059\u308b\u51e6\u7406</param>\n        private void SetAct(MessageBoxResult result, Action act)\n        {\n            if (_acts.ContainsKey(result))\n                _acts[result] += act;\n            else\n                _acts.Add(result, act);\n        }\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3067\u62bc\u4e0b\u3055\u308c\u305f\u30dc\u30bf\u30f3\u304c OK \u306e\u3068\u304d\u306b\u5b9f\u884c\u3059\u308b\u51e6\u7406\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n        /// </summary>\n        /// <param name=\"act\">\u5b9f\u884c\u3059\u308b\u51e6\u7406</param>\n        /// <returns>ChainableMessageBox</returns>\n        public ChainableMessageBox OK(Action act)\n        {\n            SetAct(MessageBoxResult.OK, act);\n            return this;\n        }\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3067\u62bc\u4e0b\u3055\u308c\u305f\u30dc\u30bf\u30f3\u304c Yes \u306e\u3068\u304d\u306b\u5b9f\u884c\u3059\u308b\u51e6\u7406\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n        /// </summary>\n        /// <param name=\"act\">\u5b9f\u884c\u3059\u308b\u51e6\u7406</param>\n        /// <returns>ChainableMessageBox</returns>\n        public ChainableMessageBox Yes(Action act)\n        {\n            SetAct(MessageBoxResult.Yes, act);\n            return this;\n        }\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3067\u62bc\u4e0b\u3055\u308c\u305f\u30dc\u30bf\u30f3\u304c No \u306e\u3068\u304d\u306b\u5b9f\u884c\u3059\u308b\u51e6\u7406\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n        /// </summary>\n        /// <param name=\"act\">\u5b9f\u884c\u3059\u308b\u51e6\u7406</param>\n        /// <returns>ChainableMessageBox</returns>\n        public ChainableMessageBox No(Action act)\n        {\n            SetAct(MessageBoxResult.No, act);\n            return this;\n        }\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3067\u62bc\u4e0b\u3055\u308c\u305f\u30dc\u30bf\u30f3\u304c Cancel \u306e\u3068\u304d\u306b\u5b9f\u884c\u3059\u308b\u51e6\u7406\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n        /// </summary>\n        /// <param name=\"act\">\u5b9f\u884c\u3059\u308b\u51e6\u7406</param>\n        /// <returns>ChainableMessageBox</returns>\n        public ChainableMessageBox Cancel(Action act)\n        {\n            SetAct(MessageBoxResult.Cancel, act);\n            return this;\n        }\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n        /// </summary>\n        public void Show()\n        {\n            // \u30e1\u30c3\u30bb\u30fc\u30b8\u30dc\u30c3\u30af\u30b9\u3092\u8868\u793a\u3057\u3066\u7d50\u679c\u3092\u53d7\u53d6\u308b\n            var result = ShowMessageBox();\n\n            // \u5b58\u5728\u3057\u306a\u3044\u304b\u3042\u3063\u3066\u3082 null \u306e\u5834\u5408\u306f\u4f55\u3082\u3057\u306a\u3044\n            if (!_acts.ContainsKey(result) || _acts[result] == null)\n                return;\n\n            // \u5b9f\u884c\n            _acts[result]();\n        }\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n        /// </summary>\n        /// <param name=\"messageBoxText\">\u8868\u793a\u3059\u308b\u30c6\u30ad\u30b9\u30c8</param>\n        /// <param name=\"caption\">\u8868\u793a\u3059\u308b\u30bf\u30a4\u30c8\u30eb \u30d0\u30fc \u30ad\u30e3\u30d7\u30b7\u30e7\u30f3</param>\n        /// <param name=\"button\">\u8868\u793a\u3059\u308b\u30dc\u30bf\u30f3</param>\n        /// <param name=\"icon\">\u8868\u793a\u3059\u308b\u30a2\u30a4\u30b3\u30f3</param>\n        /// <returns>ChainableMessageBox</returns>\n        public static ChainableMessageBox Create(string messageBoxText, string caption, MessageBoxButton button, MessageBoxImage icon)\n        {\n            return new ChainableMessageBox(messageBoxText, caption, button, icon);\n        }\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n        /// </summary>\n        /// <param name=\"button\">\u8868\u793a\u3059\u308b\u30dc\u30bf\u30f3</param>\n        /// <param name=\"icon\">\u8868\u793a\u3059\u308b\u30a2\u30a4\u30b3\u30f3</param>\n        /// <returns>\u8868\u793a\u3059\u308b\u30c6\u30ad\u30b9\u30c8\u3068\u30bf\u30a4\u30c8\u30eb \u30d0\u30fc \u30ad\u30e3\u30d7\u30b7\u30e7\u30f3\u3092\u5f15\u6570\u3068\u3057\u3066 ChainableMessageBox \u3092\u8fd4\u3059 System.Func</returns>\n        public static Func<string, string, ChainableMessageBox> Create(MessageBoxButton button, MessageBoxImage icon)\n        {\n            return (msg, cap) => new ChainableMessageBox(msg, cap, button, icon);\n        }\n    }\n}\n\n\nMessageBox \u3068\u4f3c\u305f\u611f\u3058\u3067\u6271\u3048\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002\u306a\u306e\u3067 sealed class \u306b\u3057\u3066\u6d3e\u751f\u30af\u30e9\u30b9\u306e\u4f5c\u6210\u304c\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u3042\u3068\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092private \u306b\u3057\u3066\u3001\u76f4\u63a5 new \u3057\u3066\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d6\u5f97\u3059\u308b\u3068\u304d\u306f Create() \u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u307e\u3059\u3002 \u4eca\u56de\u306f Create() \u3092\u4e8c\u3064\u7528\u610f\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u8868\u793a\u3059\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u30dc\u30c3\u30af\u30b9\u306e\u5185\u5bb9\u3092\u3042\u3089\u304b\u3058\u3081\u6c7a\u3081\u3066\u3057\u307e\u3046\u30d1\u30bf\u30fc\u30f3\n\u5148\u306b\u8868\u793a\u3059\u308b\u30dc\u30bf\u30f3\u3068\u30a2\u30a4\u30b3\u30f3\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u3044\u3066\u3001\u3042\u3068\u304b\u3089\u30c6\u30ad\u30b9\u30c8\u3068\u30bf\u30a4\u30c8\u30eb\u3092\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u90e8\u5206\u9069\u7528\u3057\u3066\u3044\u308b\u30d1\u30bf\u30fc\u30f3\n\n\n\u4f7f\u7528\u4f8b\nCreate() \u3057\u305f\u3089 OK() \u3084 Cancel() \u306a\u3069\u3067\u30dc\u30bf\u30f3\u306b\u51e6\u7406\u3092\u5272\u308a\u5f53\u3066\u3066\u3001\u6700\u5f8c\u306b Show() \u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3076\u3068\u30e1\u30c3\u30bb\u30fc\u30b8\u30dc\u30c3\u30af\u30b9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u307e\u305a\u306f\u666e\u901a\u306b\n\nex1\n// \u78ba\u8a8d\nvar confirm = ChainableMessageBox\n    .Create(\"\u78ba\u8a8d\u3067\u3059\u3002\", \"\u78ba\u8a8d\", MessageBoxButton.OKCancel, MessageBoxImage.Question);\n\nconfirm\n    .OK(() => Console.WriteLine(\"conf:ok\"))\n    .Cancel(() => Console.WriteLine(\"conf:cancel\"))\n    .Show();\n\n// YesNoCancel\nChainableMessageBox\n    .Create(\"\u30e1\u30c3\u30bb\u30fc\u30b8\", \"\u30bf\u30a4\u30c8\u30eb\", MessageBoxButton.YesNoCancel, MessageBoxImage.Question)\n    .Yes(() => Console.WriteLine(\"yes\"))\n    .No(() => Console.WriteLine(\"no\"))\n    .Cancel(() => Console.WriteLine(\"cancel\"))\n    .Show();\n\n\n\u90e8\u5206\u9069\u7528\u306e\u5834\u5408\n\nex2\n// \u78ba\u8a8d\nvar confirm = ChainableMessageBox.Create(MessageBoxButton.OKCancel, MessageBoxImage.Question);\n\nconfirm(\"\u78ba\u8a8d\u3067\u3059\u3002\", \"\u78ba\u8a8d\")\n    .OK(() => Console.WriteLine(\"conf:ok\"))\n    .Cancel(() => Console.WriteLine(\"conf:cancel\"))\n    .Show();\n\nconfirm(\"\u518d\u78ba\u8a8d\u3067\u3059\u3002\", \"\u518d\u78ba\u8a8d\")\n    .OK(() => Console.WriteLine(\"re;conf:ok\"))\n    .Cancel(() => Console.WriteLine(\"re;conf:cancel\"))\n    .Show();\n\n// YesNoCancel\nChainableMessageBox\n.Create(MessageBoxButton.YesNoCancel, MessageBoxImage.Question)(\"\u30e1\u30c3\u30bb\u30fc\u30b8\", \"\u30bf\u30a4\u30c8\u30eb\")\n    .Yes(() => Console.WriteLine(\"yes\"))\n    .No(() => Console.WriteLine(\"no\"))\n    .Cancel(() => Console.WriteLine(\"cancel\"))\n    .Show();\n\n\n\u3042\u3068\u3001async/await \u3057\u305f\u308a\n\nex3\n // \u30a8\u30e9\u30fc\n var error = ChainableMessageBox.Create(MessageBoxButton.OK, MessageBoxImage.Error);\n\n error(\"\u30a8\u30e9\u30fc\u3067\u3059\u3002\", \"\u30a8\u30e9\u30fc\")\n     .OK(async () =>\n     {\n         checkBox.IsChecked = false;\n         checkBox.IsEnabled = false;\n\n        // \u306a\u306b\u304b\u91cd\u305f\u3044\u51e6\u7406...\n         await Task.Delay(TimeSpan.FromSeconds(2));\n\n         checkBox.IsChecked = true;\n         checkBox.IsEnabled = true;\n     })\n     .Show();\n\n\n\n\u554f\u984c\u70b9\n\u554f\u984c\u70b9\u306f MessageBoxButton \u3067\u9078\u629e\u3055\u308c\u3066\u3044\u308b\u5185\u5bb9\u306b\u95a2\u308f\u3089\u305a\u3001\u3059\u3079\u3066\u306e\u30dc\u30bf\u30f3\u306b\u51e6\u7406\u3092\u5272\u308a\u5f53\u3066\u3089\u308c\u3061\u3083\u3046\u3068\u3053\u3067\u3057\u3087\u3046\u304b\u3002\n\n\u554f\u984c\u70b9\nvar msgBox = ChainableMessageBox.Create(MessageBoxButton.OK, MessageBoxImage.Exclamation);\nmsgBox(\"\u554f\u984c\u70b9\u3067\u3059\u3002\", \"\u554f\u984c\u70b9\")\n    .OK(() => Console.WriteLine(\"ok\"))\n    .Yes(() => Console.WriteLine(\"yes\"))\n    .No(() => Console.WriteLine(\"no\"))\n    .Cancel(() => Console.WriteLine(\"cancel\"))\n    .Show();\n\n\n\u6c17\u306b\u306a\u308b\u5834\u5408\u306f MessageBoxButton \u306e\u30bf\u30a4\u30d7\u3054\u3068\u306b\u4f5c\u6210\u304c\u5fc5\u8981\u3067\u3059\u306d\u3002\n\n@Temarin_PITA \u3055\u3093\u306e [\u4f55\u3067\u3082\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u3057\u305f\u3044](http://qiita.com/Temarin_PITA/items/001f71d70474063caab5) \u3092\u8aad\u3093\u3060\u3089\u30c1\u30a7\u30fc\u30f3\u3057\u305f\u304f\u306a\u3063\u305f\u3002\n\n# \u30e1\u30c3\u30bb\u30fc\u30b8\u30dc\u30c3\u30af\u30b9\u3092\u8868\u793a\u3059\u308b\n\n\u666e\u6bb5\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u30dc\u30c3\u30af\u30b9\u3092\u8868\u793a\u3057\u3066\u30e6\u30fc\u30b6\u30fc\u304c\u62bc\u4e0b\u3057\u305f\u30dc\u30bf\u30f3\u306b\u5fdc\u3058\u3066\u51e6\u7406\u3092\u3059\u308b\u3068\u304d\n\n```csharp:\u3044\u3064\u3082\u306e\nvar result = MessageBox.Show(\"\u30e1\u30c3\u30bb\u30fc\u30b8\", \"\u30bf\u30a4\u30c8\u30eb\", MessageBoxButton.OKCancel, MessageBoxImage.Question);\n\nif (result == MessageBoxResult.OK)\n{\n    // OK \u306e\u3068\u304d\n    Console.WriteLine(\"ok\");\n}\nelse\n{\n    // \u305d\u308c\u4ee5\u5916\n    Console.WriteLine(\"cancel\");\n}\n```\n\n\u307f\u305f\u3044\u306a\u611f\u3058\u3067\u66f8\u304d\u307e\u3059\u3002 if \u6587\u3067\u7d50\u679c\u306b\u5fdc\u3058\u3066\u51e6\u7406\u3092\u5206\u5c90\u3055\u305b\u308b\u3042\u308c\u3067\u3059\u3002\n\n```csharp:\u3042\u308c\nif (result == MessageBoxResult.OK)\n```\n\n\u4eca\u56de\u306f `MessageBox.Show()` \u3057\u305f\u7d50\u679c\u3092 if \u6587\u306e\u6761\u4ef6\u5206\u5c90\u3092\u4f7f\u308f\u306a\u3044\u3067\u30c1\u30a7\u30fc\u30f3\u3057\u3066\u51e6\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```csharp:\u30c1\u30a7\u30fc\u30f3\u3057\u305f\u30a4\u30e1\u30fc\u30b8\nmsgBox(\"\u30e1\u30c3\u30bb\u30fc\u30b8\", \"\u30bf\u30a4\u30c8\u30eb\")\n    .OK(() => Console.WriteLine(\"ok\"))\n    .Cancel(() => Console.WriteLine(\"cancel\"))\n    .Show();\n```\n\n# \u30b3\u30fc\u30c9\n\n```csharp:ChainableMessageBox.cs\nusing System;\nusing System.Collections.Generic;\nusing System.Windows;\n\nnamespace WpfApplication1\n{\n    /// <summary>\n    /// \u30c1\u30a7\u30fc\u30f3\u53ef\u80fd\u306a\u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n    /// </summary>\n    public sealed class ChainableMessageBox\n    {\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3067\u62bc\u4e0b\u3055\u308c\u305f\u30dc\u30bf\u30f3\u306b\u5fdc\u3058\u3066\u5b9f\u884c\u3059\u308b\u51e6\u7406\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002\n        /// </summary>\n        private Dictionary<MessageBoxResult, Action> _acts = new Dictionary<MessageBoxResult, Action>();\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3092\u8868\u793a\u3059\u308b\u95a2\u6570\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n        /// </summary>\n        private Func<MessageBoxResult> ShowMessageBox { get; }\n\n        private ChainableMessageBox(string messageBoxText, string caption, MessageBoxButton button, MessageBoxImage icon)\n        {\n            // \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3092\u8868\u793a\u3059\u308b\u95a2\u6570\u3092\u8a2d\u5b9a\n            ShowMessageBox = () => MessageBox.Show(messageBoxText, caption, button, icon);\n        }\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3067\u62bc\u4e0b\u3055\u308c\u305f\u30dc\u30bf\u30f3\u306b\u5fdc\u3058\u3066\u5b9f\u884c\u3059\u308b\u51e6\u7406\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n        /// </summary>\n        /// <param name=\"result\">\u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3067\u62bc\u4e0b\u3055\u308c\u305f\u30dc\u30bf\u30f3</param>\n        /// <param name=\"act\">\u5b9f\u884c\u3059\u308b\u51e6\u7406</param>\n        private void SetAct(MessageBoxResult result, Action act)\n        {\n            if (_acts.ContainsKey(result))\n                _acts[result] += act;\n            else\n                _acts.Add(result, act);\n        }\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3067\u62bc\u4e0b\u3055\u308c\u305f\u30dc\u30bf\u30f3\u304c OK \u306e\u3068\u304d\u306b\u5b9f\u884c\u3059\u308b\u51e6\u7406\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n        /// </summary>\n        /// <param name=\"act\">\u5b9f\u884c\u3059\u308b\u51e6\u7406</param>\n        /// <returns>ChainableMessageBox</returns>\n        public ChainableMessageBox OK(Action act)\n        {\n            SetAct(MessageBoxResult.OK, act);\n            return this;\n        }\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3067\u62bc\u4e0b\u3055\u308c\u305f\u30dc\u30bf\u30f3\u304c Yes \u306e\u3068\u304d\u306b\u5b9f\u884c\u3059\u308b\u51e6\u7406\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n        /// </summary>\n        /// <param name=\"act\">\u5b9f\u884c\u3059\u308b\u51e6\u7406</param>\n        /// <returns>ChainableMessageBox</returns>\n        public ChainableMessageBox Yes(Action act)\n        {\n            SetAct(MessageBoxResult.Yes, act);\n            return this;\n        }\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3067\u62bc\u4e0b\u3055\u308c\u305f\u30dc\u30bf\u30f3\u304c No \u306e\u3068\u304d\u306b\u5b9f\u884c\u3059\u308b\u51e6\u7406\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n        /// </summary>\n        /// <param name=\"act\">\u5b9f\u884c\u3059\u308b\u51e6\u7406</param>\n        /// <returns>ChainableMessageBox</returns>\n        public ChainableMessageBox No(Action act)\n        {\n            SetAct(MessageBoxResult.No, act);\n            return this;\n        }\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3067\u62bc\u4e0b\u3055\u308c\u305f\u30dc\u30bf\u30f3\u304c Cancel \u306e\u3068\u304d\u306b\u5b9f\u884c\u3059\u308b\u51e6\u7406\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n        /// </summary>\n        /// <param name=\"act\">\u5b9f\u884c\u3059\u308b\u51e6\u7406</param>\n        /// <returns>ChainableMessageBox</returns>\n        public ChainableMessageBox Cancel(Action act)\n        {\n            SetAct(MessageBoxResult.Cancel, act);\n            return this;\n        }\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n        /// </summary>\n        public void Show()\n        {\n            // \u30e1\u30c3\u30bb\u30fc\u30b8\u30dc\u30c3\u30af\u30b9\u3092\u8868\u793a\u3057\u3066\u7d50\u679c\u3092\u53d7\u53d6\u308b\n            var result = ShowMessageBox();\n\n            // \u5b58\u5728\u3057\u306a\u3044\u304b\u3042\u3063\u3066\u3082 null \u306e\u5834\u5408\u306f\u4f55\u3082\u3057\u306a\u3044\n            if (!_acts.ContainsKey(result) || _acts[result] == null)\n                return;\n\n            // \u5b9f\u884c\n            _acts[result]();\n        }\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n        /// </summary>\n        /// <param name=\"messageBoxText\">\u8868\u793a\u3059\u308b\u30c6\u30ad\u30b9\u30c8</param>\n        /// <param name=\"caption\">\u8868\u793a\u3059\u308b\u30bf\u30a4\u30c8\u30eb \u30d0\u30fc \u30ad\u30e3\u30d7\u30b7\u30e7\u30f3</param>\n        /// <param name=\"button\">\u8868\u793a\u3059\u308b\u30dc\u30bf\u30f3</param>\n        /// <param name=\"icon\">\u8868\u793a\u3059\u308b\u30a2\u30a4\u30b3\u30f3</param>\n        /// <returns>ChainableMessageBox</returns>\n        public static ChainableMessageBox Create(string messageBoxText, string caption, MessageBoxButton button, MessageBoxImage icon)\n        {\n            return new ChainableMessageBox(messageBoxText, caption, button, icon);\n        }\n\n        /// <summary>\n        /// \u30e1\u30c3\u30bb\u30fc\u30b8 \u30dc\u30c3\u30af\u30b9\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n        /// </summary>\n        /// <param name=\"button\">\u8868\u793a\u3059\u308b\u30dc\u30bf\u30f3</param>\n        /// <param name=\"icon\">\u8868\u793a\u3059\u308b\u30a2\u30a4\u30b3\u30f3</param>\n        /// <returns>\u8868\u793a\u3059\u308b\u30c6\u30ad\u30b9\u30c8\u3068\u30bf\u30a4\u30c8\u30eb \u30d0\u30fc \u30ad\u30e3\u30d7\u30b7\u30e7\u30f3\u3092\u5f15\u6570\u3068\u3057\u3066 ChainableMessageBox \u3092\u8fd4\u3059 System.Func</returns>\n        public static Func<string, string, ChainableMessageBox> Create(MessageBoxButton button, MessageBoxImage icon)\n        {\n            return (msg, cap) => new ChainableMessageBox(msg, cap, button, icon);\n        }\n    }\n}\n```\n\n`MessageBox` \u3068\u4f3c\u305f\u611f\u3058\u3067\u6271\u3048\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002\u306a\u306e\u3067 `sealed class` \u306b\u3057\u3066\u6d3e\u751f\u30af\u30e9\u30b9\u306e\u4f5c\u6210\u304c\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u3042\u3068\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092`private` \u306b\u3057\u3066\u3001\u76f4\u63a5 `new` \u3057\u3066\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d6\u5f97\u3059\u308b\u3068\u304d\u306f `Create()` \u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u307e\u3059\u3002 \u4eca\u56de\u306f `Create()` \u3092\u4e8c\u3064\u7528\u610f\u3057\u3066\u3044\u307e\u3059\u3002\n\n1. \u8868\u793a\u3059\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u30dc\u30c3\u30af\u30b9\u306e\u5185\u5bb9\u3092\u3042\u3089\u304b\u3058\u3081\u6c7a\u3081\u3066\u3057\u307e\u3046\u30d1\u30bf\u30fc\u30f3\n2. \u5148\u306b\u8868\u793a\u3059\u308b\u30dc\u30bf\u30f3\u3068\u30a2\u30a4\u30b3\u30f3\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u3044\u3066\u3001\u3042\u3068\u304b\u3089\u30c6\u30ad\u30b9\u30c8\u3068\u30bf\u30a4\u30c8\u30eb\u3092\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u90e8\u5206\u9069\u7528\u3057\u3066\u3044\u308b\u30d1\u30bf\u30fc\u30f3\n\n# \u4f7f\u7528\u4f8b\n`Create()` \u3057\u305f\u3089 `OK()` \u3084 `Cancel()` \u306a\u3069\u3067\u30dc\u30bf\u30f3\u306b\u51e6\u7406\u3092\u5272\u308a\u5f53\u3066\u3066\u3001\u6700\u5f8c\u306b `Show()` \u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3076\u3068\u30e1\u30c3\u30bb\u30fc\u30b8\u30dc\u30c3\u30af\u30b9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u307e\u305a\u306f\u666e\u901a\u306b\n\n```csharp:ex1\n// \u78ba\u8a8d\nvar confirm = ChainableMessageBox\n    .Create(\"\u78ba\u8a8d\u3067\u3059\u3002\", \"\u78ba\u8a8d\", MessageBoxButton.OKCancel, MessageBoxImage.Question);\n\nconfirm\n    .OK(() => Console.WriteLine(\"conf:ok\"))\n    .Cancel(() => Console.WriteLine(\"conf:cancel\"))\n    .Show();\n \n// YesNoCancel\nChainableMessageBox\n    .Create(\"\u30e1\u30c3\u30bb\u30fc\u30b8\", \"\u30bf\u30a4\u30c8\u30eb\", MessageBoxButton.YesNoCancel, MessageBoxImage.Question)\n    .Yes(() => Console.WriteLine(\"yes\"))\n    .No(() => Console.WriteLine(\"no\"))\n    .Cancel(() => Console.WriteLine(\"cancel\"))\n    .Show();\n```\n\n\u90e8\u5206\u9069\u7528\u306e\u5834\u5408\n\n```csharp:ex2\n// \u78ba\u8a8d\nvar confirm = ChainableMessageBox.Create(MessageBoxButton.OKCancel, MessageBoxImage.Question);\n\nconfirm(\"\u78ba\u8a8d\u3067\u3059\u3002\", \"\u78ba\u8a8d\")\n    .OK(() => Console.WriteLine(\"conf:ok\"))\n    .Cancel(() => Console.WriteLine(\"conf:cancel\"))\n    .Show();\n    \nconfirm(\"\u518d\u78ba\u8a8d\u3067\u3059\u3002\", \"\u518d\u78ba\u8a8d\")\n    .OK(() => Console.WriteLine(\"re;conf:ok\"))\n    .Cancel(() => Console.WriteLine(\"re;conf:cancel\"))\n    .Show();\n     \n// YesNoCancel\nChainableMessageBox\n.Create(MessageBoxButton.YesNoCancel, MessageBoxImage.Question)(\"\u30e1\u30c3\u30bb\u30fc\u30b8\", \"\u30bf\u30a4\u30c8\u30eb\")\n    .Yes(() => Console.WriteLine(\"yes\"))\n    .No(() => Console.WriteLine(\"no\"))\n    .Cancel(() => Console.WriteLine(\"cancel\"))\n    .Show();\n```\n\n\u3042\u3068\u3001async/await \u3057\u305f\u308a\n\n```csharp:ex3\n // \u30a8\u30e9\u30fc\n var error = ChainableMessageBox.Create(MessageBoxButton.OK, MessageBoxImage.Error);\n\n error(\"\u30a8\u30e9\u30fc\u3067\u3059\u3002\", \"\u30a8\u30e9\u30fc\")\n     .OK(async () =>\n     {\n         checkBox.IsChecked = false;\n         checkBox.IsEnabled = false;\n\n        // \u306a\u306b\u304b\u91cd\u305f\u3044\u51e6\u7406...\n         await Task.Delay(TimeSpan.FromSeconds(2));\n         \n         checkBox.IsChecked = true;\n         checkBox.IsEnabled = true;\n     })\n     .Show();\n```\n\n# \u554f\u984c\u70b9\n\n\u554f\u984c\u70b9\u306f `MessageBoxButton` \u3067\u9078\u629e\u3055\u308c\u3066\u3044\u308b\u5185\u5bb9\u306b\u95a2\u308f\u3089\u305a\u3001\u3059\u3079\u3066\u306e\u30dc\u30bf\u30f3\u306b\u51e6\u7406\u3092\u5272\u308a\u5f53\u3066\u3089\u308c\u3061\u3083\u3046\u3068\u3053\u3067\u3057\u3087\u3046\u304b\u3002\n\n```csharp:\u554f\u984c\u70b9\nvar msgBox = ChainableMessageBox.Create(MessageBoxButton.OK, MessageBoxImage.Exclamation);\nmsgBox(\"\u554f\u984c\u70b9\u3067\u3059\u3002\", \"\u554f\u984c\u70b9\")\n    .OK(() => Console.WriteLine(\"ok\"))\n    .Yes(() => Console.WriteLine(\"yes\"))\n    .No(() => Console.WriteLine(\"no\"))\n    .Cancel(() => Console.WriteLine(\"cancel\"))\n    .Show();\n```\n\n\u6c17\u306b\u306a\u308b\u5834\u5408\u306f `MessageBoxButton` \u306e\u30bf\u30a4\u30d7\u3054\u3068\u306b\u4f5c\u6210\u304c\u5fc5\u8981\u3067\u3059\u306d\u3002\n", "tags": ["C#", "WPF"]}