{"context": "\n\n\u306f\u3058\u3081\u306b\n\u74b0\u5883\u69cb\u7bc9\u306f\u3053\u3061\u3089\u3092\u53c2\u7167\n\u4eca\u56de\u306f\u3053\u3053\u306bMySQL\u3092\u8ffd\u52a0\u3057\u305f\u3082\u306e\u3092\u6e96\u5099\n\nMySQL5.6\n\n(60\u5206\u30af\u30c3\u30ad\u30f3\u30b0) Play Framework (Scala)+MySQL\u3067REST API\u30b5\u30fc\u30d0\u30fc\u3092\u4f5c\u308b\n\u3053\u308c\u3092\u5143\u306bPlayFrameWork\u3092\u4f7f\u3063\u3066\u307f\u308b\u3002\n\n\u65e9\u901f\u554f\u984c\u304c\u767a\u751f\nbuild.sbt\u306banorm\u3092\u8ffd\u52a0\u3057\u3066\u3001activator eclipse\u30b3\u30de\u30f3\u30c9\u304b\u3089\n\u5fc5\u8981\u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3092\u3059\u308b\nC:\\framework\\play\\playScalaTest>activator eclipse\nACTIVATOR_HOME=C:\\framework\\activator-1.3.10-minimal\n\u30d5\u30a1\u30a4\u30eb BIN_DIRECTORY\\..\\conf\\sbtconfig.txt \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3002\n[info] Loading project definition from C:\\framework\\play\\playScalaTest\\project\nAnorm has been moved to an external module.\nSee https://playframework.com/documentation/2.4.x/Migration24 for details.\nProject loading failed: (r)etry, (q)uit, (l)ast, or (i)gnore?\n\nhttps://playframework.com/documentation/2.4.x/Migration24\nhttps://playframework.com/documentation/2.4.x/Anorm\nPlayFrameWork2.4\u304b\u3089anorm\u306fplay\u306e\u30b3\u30a2\u304b\u3089\u5207\u308a\u51fa\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\n\u305d\u306e\u307e\u307e\u3067\u306f\u4f7f\u3048\u306a\u3044\u307f\u305f\u3044\n\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u65b9\u5411\u8ee2\u63db\u3057\u3066PlaySlick\u3092\u4f7f\u3063\u3066\u307f\u308b\n\n\u53c2\u8003\u60c5\u5831\nScala on Play\u3067API\u30b5\u30fc\u30d0\u30fc\u306e\u69cb\u7bc9 with MySQL\n\u89e3\u8aac\u3082\u308f\u304b\u308a\u3084\u3059\u304b\u3063\u305f\u306e\u3067\u3053\u3053\u3092\u53c2\u8003\u306b\u5199\u7d4c\u3057\u3066\u307f\u308b\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u8a2d\u5b9a\nGET /client  controllers.HomeController.client\n\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u8a2d\u5b9a\n\nplayScalaTest\\controllers\\HomeController.scala\npackage controllers\n\nimport javax.inject._\nimport play.api._\nimport play.api.mvc._\n// import\u3092\u8ffd\u52a0\nimport play.api.libs.json.Json\n\n/**\n * This controller creates an `Action` to handle HTTP requests to the\n * application's home page.\n */\n@Singleton\nclass HomeController @Inject() extends Controller {\n\n  /**\n   * Create an Action to render an HTML page with a welcome message.\n   * The configuration in the `routes` file means that this method\n   * will be called when the application receives a `GET` request with\n   * a path of `/`.\n   */\n  def index = Action {\n    Ok(views.html.index(\"Your new application is ready.\"))\n  }\n  // Action\u3092\u8ffd\u52a0\n  def client = Action {\n    val json = Json.obj(\"client\" -> \"Hello!\");\n\n    Ok(Json.toJson(json));\n  }\n}\n\n\n\nMySQL\u3092\u8a2d\u5b9a\nclient\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3059\u308b\nCREATE TABLE `client` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `name` text NOT NULL,\n  `address` text NOT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\u9069\u5f53\u306a\u30c7\u30fc\u30bf\u306e\u767b\u9332\u3092\u3057\u3066\u304a\u304f\n\n\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u8ffd\u52a0\nMySQL-Connector\u3068Play-Slick\u3092\u8ffd\u52a0\u3059\u308b\n\nplayScalaTest\\build.sbt\nname := \"\"\"playScalaTest\"\"\"\n\nversion := \"1.0-SNAPSHOT\"\n\nlazy val root = (project in file(\".\")).enablePlugins(PlayScala)\n\nscalaVersion := \"2.11.7\"\n\nlibraryDependencies ++= Seq(\n  jdbc,\n  cache,\n  ws,\n  \"org.scalatestplus.play\" %% \"scalatestplus-play\" % \"1.5.1\" % Test,\n  \"mysql\" % \"mysql-connector-java\" % \"5.1.39\",\n  \"com.typesafe.play\" %% \"play-slick\" % \"2.0.0\"\n)\n\nresolvers += \"scalaz-bintray\" at \"http://dl.bintray.com/scalaz/releases\"\n\n\n\n\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u304b\u3089Eclipse\u306b\u8ffd\u52a0\nC:\\framework\\play\\playScalaTest>activator eclipse\nACTIVATOR_HOME=C:\\framework\\activator-1.3.10-minimal\n\u30d5\u30a1\u30a4\u30eb BIN_DIRECTORY\\..\\conf\\sbtconfig.txt \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3002\n[info] Loading project definition from C:\\framework\\play\\playScalaTest\\project\n[info] Set current project to playScalaTest (in build file:/C:/framework/play/playScalaTest/)\n[info] About to create Eclipse project files for your project(s).\n[info] Updating {file:/C:/framework/play/playScalaTest/}root...\n[info] Resolving jline#jline;2.12.1 ...\n[info] downloading https://repo1.maven.org/maven2/mysql/mysql-connector-java/5.1.39/mysql-connector-java-5.1.39.jar ...\n[info]  [SUCCESSFUL ] mysql#mysql-connector-java;5.1.39!mysql-connector-java.jar (1789ms)\n[info] Done updating.\n[info] Successfully created Eclipse project files for project(s):\n[info] playScalaTest\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u5b9a\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u5b9a\u3092\u8ffd\u8a18\u3059\u308b\n\nplayScalaTest\\conf\\application.conf\nslick.dbs.default.driver=\"slick.driver.MySQLDriver$\"\nslick.dbs.default.db.driver=\"com.mysql.jdbc.Driver\"\nslick.dbs.default.db.url=\"jdbc:mysql://localhost:3306/test?user=[\u30e6\u30fc\u30b6\u30fc\u540d]&password=[\u30d1\u30b9\u30ef\u30fc\u30c9]\"\n\n\n\n\u30e2\u30c7\u30eb\u306e\u5b9a\u7fa9\n\nplayScalaTest\\models\\database\\Client.scala\npackage models.database\n\nimport play.api.libs.json.Json\n\ncase class Client (\n  id: Option[Long],\n  name: String,\n  address: String\n)\n\nobject Client {\n  implicit val clientWrites = Json.writes[Client]\n  implicit val clientReads = Json.reads[Client]\n}\n\n\n\nDAO\u306e\u5b9a\u7fa9\n\nplayScalaTest\\models\\ClientDAO.scala\npackage models\n\nimport javax.inject.Singleton\nimport javax.inject.Inject\nimport play.api.db.slick.DatabaseConfigProvider\nimport slick.driver.JdbcProfile\nimport scala.concurrent.impl.Future\nimport scala.concurrent.Future\n\nimport models.database.Client\nimport play.api.libs.concurrent.Execution.Implicits.defaultContext\nimport play.api.libs.json\n\n@Singleton\nclass ClientDAO @Inject()(val dbConfigProvider: DatabaseConfigProvider) {\n\n  val dbConfig = dbConfigProvider.get[JdbcProfile]\n\n  import dbConfig.driver.api._\n\n  private class ClientTable(tag: Tag) extends Table[Client](tag, \"client\") {\n    def id = column[Long](\"id\", O.PrimaryKey, O.AutoInc)\n    def name = column[String](\"name\")\n    def address = column[String](\"address\")\n\n    def * = (id.?, name, address) <> ((Client.apply _).tupled, Client.unapply)\n  }\n\n  private val clients = TableQuery[ClientTable]\n\n  def all(): Future[List[Client]] = dbConfig.db.run(clients.result).map(_.toList)\n}\n\n\n\nAPI\u306e\u5b9f\u88c5\n\nplayScalaTest\\app\\controllers\\HomeController.scala\npackage controllers\n\nimport javax.inject._\nimport play.api._\nimport play.api.mvc._\nimport play.api.libs.json.Json\n\nimport models.database.Client\nimport models.ClientDAO\n\n// Future\u3092\u6271\u3046\u306b\u306f\u3053\u306e2\u3064\u306eimport\u304c\u5fc5\u8981\nimport scala.concurrent._\nimport scala.concurrent.ExecutionContext.Implicits.global\n\n/**\n * This controller creates an `Action` to handle HTTP requests to the\n * application's home page.\n */\n@Singleton\nclass HomeController @Inject() (dao: ClientDAO) extends Controller {\n\n  /**\n   * Create an Action to render an HTML page with a welcome message.\n   * The configuration in the `routes` file means that this method\n   * will be called when the application receives a `GET` request with\n   * a path of `/`.\n   */\n  def index = Action {\n    Ok(views.html.index(\"Your new application is ready.\"))\n  }\n  // API\u306e\u51e6\u7406\u3092\u66f8\u304d\u76f4\u3057\n  def client = Action.async {\n    dao.all().map(clients => Ok(Json.toJson(Json.toJson(clients))))\n  }\n}\n\n\n\nEclipse\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\n\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u3067\u5b9f\u884c\nc:\\framework\\play\\playScalaTest>activator eclipse compile\nACTIVATOR_HOME=C:\\framework\\activator-1.3.10-minimal\n\u30d5\u30a1\u30a4\u30eb BIN_DIRECTORY\\..\\conf\\sbtconfig.txt \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3002\n[info] Loading project definition from C:\\framework\\play\\playScalaTest\\project\n[info] Set current project to playScalaTest (in build file:/C:/framework/play/playScalaTest/)\n[info] About to create Eclipse project files for your project(s).\n[info] Successfully created Eclipse project files for project(s):\n[info] playScalaTest\n[info] Compiling 7 Scala sources and 1 Java source to C:\\framework\\play\\playScalaTest\\target\\scala-2.11\\classes...\n[success] Total time: 9 s, completed 2016/06/29 21:26:45\n\n\n\u5b9f\u884c\u7d50\u679c\n\n#\u306f\u3058\u3081\u306b\n\u74b0\u5883\u69cb\u7bc9\u306f[\u3053\u3061\u3089](http://qiita.com/taka159/items/857c52e59c978e63a424)\u3092\u53c2\u7167\n\n\u4eca\u56de\u306f\u3053\u3053\u306bMySQL\u3092\u8ffd\u52a0\u3057\u305f\u3082\u306e\u3092\u6e96\u5099\n\n - MySQL5.6\n\n\n[(60\u5206\u30af\u30c3\u30ad\u30f3\u30b0) Play Framework (Scala)+MySQL\u3067REST API\u30b5\u30fc\u30d0\u30fc\u3092\u4f5c\u308b](http://qiita.com/AKB428/items/bbb085a06c37bd84d0be)\n\n\u3053\u308c\u3092\u5143\u306bPlayFrameWork\u3092\u4f7f\u3063\u3066\u307f\u308b\u3002\n\n##\u65e9\u901f\u554f\u984c\u304c\u767a\u751f\n\nbuild.sbt\u306b*anorm*\u3092\u8ffd\u52a0\u3057\u3066\u3001*activator eclipse*\u30b3\u30de\u30f3\u30c9\u304b\u3089\n\u5fc5\u8981\u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3092\u3059\u308b\n\n```\nC:\\framework\\play\\playScalaTest>activator eclipse\nACTIVATOR_HOME=C:\\framework\\activator-1.3.10-minimal\n\u30d5\u30a1\u30a4\u30eb BIN_DIRECTORY\\..\\conf\\sbtconfig.txt \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3002\n[info] Loading project definition from C:\\framework\\play\\playScalaTest\\project\nAnorm has been moved to an external module.\nSee https://playframework.com/documentation/2.4.x/Migration24 for details.\nProject loading failed: (r)etry, (q)uit, (l)ast, or (i)gnore?\n```\n\nhttps://playframework.com/documentation/2.4.x/Migration24\nhttps://playframework.com/documentation/2.4.x/Anorm\n\nPlayFrameWork2.4\u304b\u3089*anorm*\u306fplay\u306e\u30b3\u30a2\u304b\u3089\u5207\u308a\u51fa\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\n\u305d\u306e\u307e\u307e\u3067\u306f\u4f7f\u3048\u306a\u3044\u307f\u305f\u3044\n\n**\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u65b9\u5411\u8ee2\u63db\u3057\u3066PlaySlick\u3092\u4f7f\u3063\u3066\u307f\u308b**\n\n#\u53c2\u8003\u60c5\u5831\n[Scala on Play\u3067API\u30b5\u30fc\u30d0\u30fc\u306e\u69cb\u7bc9 with MySQL](https://github.com/KeitaMoromizato/scala-study-play-mysql-api-server)\n\n\u89e3\u8aac\u3082\u308f\u304b\u308a\u3084\u3059\u304b\u3063\u305f\u306e\u3067\u3053\u3053\u3092\u53c2\u8003\u306b\u5199\u7d4c\u3057\u3066\u307f\u308b\n\n\n##\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u8a2d\u5b9a\n\n```playScalaTest\\conf\\routes\nGET /client  controllers.HomeController.client\n```\n\n##\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u8a2d\u5b9a\n\n```scala:playScalaTest\\controllers\\HomeController.scala\npackage controllers\n\nimport javax.inject._\nimport play.api._\nimport play.api.mvc._\n// import\u3092\u8ffd\u52a0\nimport play.api.libs.json.Json\n\n/**\n * This controller creates an `Action` to handle HTTP requests to the\n * application's home page.\n */\n@Singleton\nclass HomeController @Inject() extends Controller {\n\n  /**\n   * Create an Action to render an HTML page with a welcome message.\n   * The configuration in the `routes` file means that this method\n   * will be called when the application receives a `GET` request with\n   * a path of `/`.\n   */\n  def index = Action {\n    Ok(views.html.index(\"Your new application is ready.\"))\n  }\n  // Action\u3092\u8ffd\u52a0\n  def client = Action {\n    val json = Json.obj(\"client\" -> \"Hello!\");\n\n    Ok(Json.toJson(json));\n  }\n}\n```\n\n##MySQL\u3092\u8a2d\u5b9a\nclient\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3059\u308b\n\n```sql:\nCREATE TABLE `client` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `name` text NOT NULL,\n  `address` text NOT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n\u9069\u5f53\u306a\u30c7\u30fc\u30bf\u306e\u767b\u9332\u3092\u3057\u3066\u304a\u304f\n\n\n##\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u8ffd\u52a0\n*MySQL-Connector*\u3068*Play-Slick*\u3092\u8ffd\u52a0\u3059\u308b\n\n```:playScalaTest\\build.sbt\nname := \"\"\"playScalaTest\"\"\"\n\nversion := \"1.0-SNAPSHOT\"\n\nlazy val root = (project in file(\".\")).enablePlugins(PlayScala)\n\nscalaVersion := \"2.11.7\"\n\nlibraryDependencies ++= Seq(\n  jdbc,\n  cache,\n  ws,\n  \"org.scalatestplus.play\" %% \"scalatestplus-play\" % \"1.5.1\" % Test,\n  \"mysql\" % \"mysql-connector-java\" % \"5.1.39\",\n  \"com.typesafe.play\" %% \"play-slick\" % \"2.0.0\"\n)\n\nresolvers += \"scalaz-bintray\" at \"http://dl.bintray.com/scalaz/releases\"\n\n```\n\n\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u304b\u3089Eclipse\u306b\u8ffd\u52a0\n\n```\nC:\\framework\\play\\playScalaTest>activator eclipse\nACTIVATOR_HOME=C:\\framework\\activator-1.3.10-minimal\n\u30d5\u30a1\u30a4\u30eb BIN_DIRECTORY\\..\\conf\\sbtconfig.txt \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3002\n[info] Loading project definition from C:\\framework\\play\\playScalaTest\\project\n[info] Set current project to playScalaTest (in build file:/C:/framework/play/playScalaTest/)\n[info] About to create Eclipse project files for your project(s).\n[info] Updating {file:/C:/framework/play/playScalaTest/}root...\n[info] Resolving jline#jline;2.12.1 ...\n[info] downloading https://repo1.maven.org/maven2/mysql/mysql-connector-java/5.1.39/mysql-connector-java-5.1.39.jar ...\n[info]  [SUCCESSFUL ] mysql#mysql-connector-java;5.1.39!mysql-connector-java.jar (1789ms)\n[info] Done updating.\n[info] Successfully created Eclipse project files for project(s):\n[info] playScalaTest\n```\n\n##\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u5b9a\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u5b9a\u3092\u8ffd\u8a18\u3059\u308b\n\n```:playScalaTest\\conf\\application.conf\nslick.dbs.default.driver=\"slick.driver.MySQLDriver$\"\nslick.dbs.default.db.driver=\"com.mysql.jdbc.Driver\"\nslick.dbs.default.db.url=\"jdbc:mysql://localhost:3306/test?user=[\u30e6\u30fc\u30b6\u30fc\u540d]&password=[\u30d1\u30b9\u30ef\u30fc\u30c9]\"\n```\n\n##\u30e2\u30c7\u30eb\u306e\u5b9a\u7fa9\n```scala:playScalaTest\\models\\database\\Client.scala\npackage models.database\n\nimport play.api.libs.json.Json\n\ncase class Client (\n  id: Option[Long],\n  name: String,\n  address: String\n)\n\nobject Client {\n  implicit val clientWrites = Json.writes[Client]\n  implicit val clientReads = Json.reads[Client]\n}\n```\n\n##DAO\u306e\u5b9a\u7fa9\n```scala:playScalaTest\\models\\ClientDAO.scala\npackage models\n\nimport javax.inject.Singleton\nimport javax.inject.Inject\nimport play.api.db.slick.DatabaseConfigProvider\nimport slick.driver.JdbcProfile\nimport scala.concurrent.impl.Future\nimport scala.concurrent.Future\n\nimport models.database.Client\nimport play.api.libs.concurrent.Execution.Implicits.defaultContext\nimport play.api.libs.json\n\n@Singleton\nclass ClientDAO @Inject()(val dbConfigProvider: DatabaseConfigProvider) {\n\n  val dbConfig = dbConfigProvider.get[JdbcProfile]\n\n  import dbConfig.driver.api._\n\n  private class ClientTable(tag: Tag) extends Table[Client](tag, \"client\") {\n    def id = column[Long](\"id\", O.PrimaryKey, O.AutoInc)\n    def name = column[String](\"name\")\n    def address = column[String](\"address\")\n\n    def * = (id.?, name, address) <> ((Client.apply _).tupled, Client.unapply)\n  }\n\n  private val clients = TableQuery[ClientTable]\n\n  def all(): Future[List[Client]] = dbConfig.db.run(clients.result).map(_.toList)\n}\n```\n\n##API\u306e\u5b9f\u88c5\n\n```scala:playScalaTest\\app\\controllers\\HomeController.scala\npackage controllers\n\nimport javax.inject._\nimport play.api._\nimport play.api.mvc._\nimport play.api.libs.json.Json\n\nimport models.database.Client\nimport models.ClientDAO\n\n// Future\u3092\u6271\u3046\u306b\u306f\u3053\u306e2\u3064\u306eimport\u304c\u5fc5\u8981\nimport scala.concurrent._\nimport scala.concurrent.ExecutionContext.Implicits.global\n\n/**\n * This controller creates an `Action` to handle HTTP requests to the\n * application's home page.\n */\n@Singleton\nclass HomeController @Inject() (dao: ClientDAO) extends Controller {\n\n  /**\n   * Create an Action to render an HTML page with a welcome message.\n   * The configuration in the `routes` file means that this method\n   * will be called when the application receives a `GET` request with\n   * a path of `/`.\n   */\n  def index = Action {\n    Ok(views.html.index(\"Your new application is ready.\"))\n  }\n  // API\u306e\u51e6\u7406\u3092\u66f8\u304d\u76f4\u3057\n  def client = Action.async {\n    dao.all().map(clients => Ok(Json.toJson(Json.toJson(clients))))\n  }\n}\n```\n\n##Eclipse\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\n\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u3067\u5b9f\u884c\n\n```\nc:\\framework\\play\\playScalaTest>activator eclipse compile\nACTIVATOR_HOME=C:\\framework\\activator-1.3.10-minimal\n\u30d5\u30a1\u30a4\u30eb BIN_DIRECTORY\\..\\conf\\sbtconfig.txt \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3002\n[info] Loading project definition from C:\\framework\\play\\playScalaTest\\project\n[info] Set current project to playScalaTest (in build file:/C:/framework/play/playScalaTest/)\n[info] About to create Eclipse project files for your project(s).\n[info] Successfully created Eclipse project files for project(s):\n[info] playScalaTest\n[info] Compiling 7 Scala sources and 1 Java source to C:\\framework\\play\\playScalaTest\\target\\scala-2.11\\classes...\n[success] Total time: 9 s, completed 2016/06/29 21:26:45\n```\n\n##\u5b9f\u884c\u7d50\u679c\n![image](https://qiita-image-store.s3.amazonaws.com/0/72166/16010af2-8eb5-5885-310c-6d958da17fa1.png)\n", "tags": ["PlayFramework"]}