{"context": "Ruby\u304b\u3089Twitter Streaming API 1.1\u3092\u5229\u7528\u3057\u3066\u30e6\u30fc\u30b6\u30fc\u306e\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3\u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u3067\u306f\u3001\u7279\u5b9a\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3\u3092\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0API\u3067\u53d6\u5f97\u3057\u3066\u3044\u307e\u3057\u305f\u3002\u4eca\u56de\u306f\u3001Public streams\u304b\u3089\u30c4\u30a4\u30fc\u30c8\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002Public streams\u306b\u306f\u3001Twitter\u306e\u5168\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u308bfirehose\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u308c\u306fTwitter\u793e\u3068\u306e\u7279\u5225\u306a\u5951\u7d04\u304c\u5fc5\u8981\u3067\u3059\u3002\u3057\u304b\u3057\u3001sample\u3068\u3044\u3046\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3\u3067\u3042\u308c\u3070\u3001\u7279\u5225\u306a\u5951\u7d04\u306a\u3057\u306b\u60c5\u5831\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002sample\u3067\u306f\u3001\u5168\u4f53\u306e1%\u307b\u3069\u306e\u30c7\u30fc\u30bf\u304c\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\u4ee5\u4e0b\u306eRuby\u30d7\u30ed\u30b0\u30e9\u30e0\u3067sample\u3092\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3067\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\nrequire 'json'\nrequire 'twitter/json_stream'\n\nTWITTER_CONSUMER_KEY = 'TWITTER_CONSUMER_KEY'\nTWITTER_CONSUMER_SECRET = 'TWITTER_CONSUMER_SECRET'\nTWITTER_OAUTH_TOKEN = 'TWITTER_OAUTH_TOKEN'\nTWITTER_OAUTH_TOKEN_SECRET = 'TWITTER_OAUTH_TOKEN_SECRET'\n\nEventMachine::run {\n  stream = Twitter::JSONStream.connect(\n    :host    => 'stream.twitter.com',\n    :path    => '/1.1/statuses/sample.json',\n    :oauth => {\n      :consumer_key    => TWITTER_CONSUMER_KEY,\n      :consumer_secret => TWITTER_CONSUMER_SECRET,\n      :access_key      => TWITTER_OAUTH_TOKEN,\n      :access_secret   => TWITTER_OAUTH_TOKEN_SECRET\n    },\n    :ssl => true\n  )\n\n  stream.each_item do |item|\n    # $stdout.print \"item: #{item}\\n\"\n    $stdout.flush\n\n    tweet = JSON.parse(item)\n    if tweet['lang'] == 'ja'\n      puts \"@#{tweet['user']['screen_name']}: #{tweet['text']}\\n\"\n    end\n  end\n\n  stream.on_error do |message|\n    $stdout.print \"error: #{message}\\n\"\n    $stdout.flush\n  end\n\n  stream.on_reconnect do |timeout, retries|\n    # reconnect...\n    $stdout.print \"reconnecting in: #{timeout} seconds\\n\"\n    $stdout.flush\n  end\n\n  stream.on_max_reconnects do |timeout, retries|\n    $stdout.print \"Failed after #{retries} failed reconnects\\n\"\n    $stdout.flush\n  end\n}\n\ntweetstream\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3082\u3042\u3063\u3066\u3001\u3053\u3061\u3089\u3082\u8a55\u4fa1\u3057\u305f\u307b\u3046\u304c\u3088\u3044\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u53c2\u8003\uff1aRuby - tweetstream \u3067 Twitter Streaming API \u3092\u5229\u7528\uff01\nRuby\u304b\u3089Twitter Streaming API 1.1\u3092\u5229\u7528\u3057\u3066\u30e6\u30fc\u30b6\u30fc\u306e\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3\u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u3067\u306f\u3001\u7279\u5b9a\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3\u3092\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0API\u3067\u53d6\u5f97\u3057\u3066\u3044\u307e\u3057\u305f\u3002\u4eca\u56de\u306f\u3001Public streams\u304b\u3089\u30c4\u30a4\u30fc\u30c8\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002Public streams\u306b\u306f\u3001Twitter\u306e\u5168\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u308bfirehose\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u308c\u306fTwitter\u793e\u3068\u306e\u7279\u5225\u306a\u5951\u7d04\u304c\u5fc5\u8981\u3067\u3059\u3002\u3057\u304b\u3057\u3001sample\u3068\u3044\u3046\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3\u3067\u3042\u308c\u3070\u3001\u7279\u5225\u306a\u5951\u7d04\u306a\u3057\u306b\u60c5\u5831\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002sample\u3067\u306f\u3001\u5168\u4f53\u306e1%\u307b\u3069\u306e\u30c7\u30fc\u30bf\u304c\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\u4ee5\u4e0b\u306eRuby\u30d7\u30ed\u30b0\u30e9\u30e0\u3067sample\u3092\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3067\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n```ruby\nrequire 'json'\nrequire 'twitter/json_stream'\n\nTWITTER_CONSUMER_KEY = 'TWITTER_CONSUMER_KEY'\nTWITTER_CONSUMER_SECRET = 'TWITTER_CONSUMER_SECRET'\nTWITTER_OAUTH_TOKEN = 'TWITTER_OAUTH_TOKEN'\nTWITTER_OAUTH_TOKEN_SECRET = 'TWITTER_OAUTH_TOKEN_SECRET'\n\nEventMachine::run {\n  stream = Twitter::JSONStream.connect(\n    :host    => 'stream.twitter.com',\n    :path    => '/1.1/statuses/sample.json',\n    :oauth => {\n      :consumer_key    => TWITTER_CONSUMER_KEY,\n      :consumer_secret => TWITTER_CONSUMER_SECRET,\n      :access_key      => TWITTER_OAUTH_TOKEN,\n      :access_secret   => TWITTER_OAUTH_TOKEN_SECRET\n    },\n    :ssl => true\n  )\n \n  stream.each_item do |item|\n    # $stdout.print \"item: #{item}\\n\"\n    $stdout.flush\n \n    tweet = JSON.parse(item)\n    if tweet['lang'] == 'ja'\n      puts \"@#{tweet['user']['screen_name']}: #{tweet['text']}\\n\"\n    end\n  end\n \n  stream.on_error do |message|\n    $stdout.print \"error: #{message}\\n\"\n    $stdout.flush\n  end\n \n  stream.on_reconnect do |timeout, retries|\n    # reconnect...\n    $stdout.print \"reconnecting in: #{timeout} seconds\\n\"\n    $stdout.flush\n  end\n \n  stream.on_max_reconnects do |timeout, retries|\n    $stdout.print \"Failed after #{retries} failed reconnects\\n\"\n    $stdout.flush\n  end\n}\n```\n\n[tweetstream](https://github.com/tweetstream/tweetstream)\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3082\u3042\u3063\u3066\u3001\u3053\u3061\u3089\u3082\u8a55\u4fa1\u3057\u305f\u307b\u3046\u304c\u3088\u3044\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\u53c2\u8003\uff1a[Ruby - tweetstream \u3067 Twitter Streaming API \u3092\u5229\u7528\uff01](http://komasaru.github.io/blog/2013/10/04/ruby-twitter-streaming-api-by-tweetstream/)\n", "tags": ["Ruby", "TwitterAPI"]}