{"tags": ["RaspberryPi", "bluetooth"], "context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\niBeacon\u3092\u4f7f\u3063\u3066\u3084\u308a\u305f\u3044\u3053\u3068\u304c\u3042\u308a\u3001Raspberry Pi (Model B)\u3067Bluetooth\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n1.Bluetooth \u30a2\u30c0\u30d7\u30bf\n\u3053\u306e\u305f\u3081\u306b\u8cfc\u5165\u3057\u305fBluetooth\u30a2\u30c0\u30d7\u30bf\u306f\u3001Bluetooth 4.0+EDR/LE\u5bfe\u5fdc\u306eIODATA USB-BT40LE\u3002\n\u4f7f\u7528\u30c1\u30c3\u30d7\u304cBroadcom BCM20702\u306a\u306e\u3067\u3001Raspbian wheezy\u3067\u3082\u305d\u306e\u307e\u307e\u3067\u5927\u4e08\u592b\u3067\u3057\u3087\u3046\u3002lsusb\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n$ lsusb\nBus 001 Device 002: ID 0424:9514 Standard Microsystems Corp. \nBus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\nBus 001 Device 003: ID 0424:ec00 Standard Microsystems Corp. \nBus 001 Device 004: ID 0a5c:21e8 Broadcom Corp. \n\n\u8a8d\u8b58\u3055\u308c\u3066\u3044\u307e\u3059\u306d\u3002\n\n2.Bluetooth\u30c9\u30e9\u30a4\u30d0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nhcitool\u304c\u5165\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u3001Bluetooth\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u53c2\u8003\uff09Install Bluetooth Dongle on Raspberry Pi\n$sudo apt-get install bluetooth\n\nhcitool\u30b3\u30de\u30f3\u30c9\u3067iBeacon(Bluetooth Low Energy)\u30c7\u30d0\u30a4\u30b9\u3092\u30b9\u30ad\u30e3\u30f3\u3057\u3066\u307f\u307e\u3059\u3002\n$ sudo hcitool lescan\nLE Scan ...\nD1:7F:7E:12:34:56 (unknown)\n\n\u7121\u4e8b\u691c\u51fa\u3067\u304d\u307e\u3057\u305f\u3002\n\u6ce8\uff09Bluetooth\u30a2\u30c9\u30ec\u30b9\u306f\u6539\u5909\u3057\u3066\u3044\u307e\u3059\u3002\n\n3.Python 2.7.9\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nPython\u3067iBeancon\u3092\u691c\u51fa\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u308b\u3064\u3082\u308a\u3067\u3059\u3002\n\u3053\u306eRaspberry Pi\u306b\u306f2.7.3\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u305f\u306e\u30672.7\u7cfb\u306e\u6700\u65b0\u7248\u3067\u3042\u308b\u30012.7.9\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u53c2\u8003\uff09Raspberry Pi\u306b\u6700\u65b0\u7248\u306e\u5404\u7a2e\u30c4\u30fc\u30eb\u30fb\u8a00\u8a9e\u30fb\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n$ wget https://www.python.org/ftp/python/2.7.9/Python-2.7.9.tgz\n$ tar xvf Python-2.7.9.tgz\n$ cd Python-2.7.9\n$ ./configure\n$ make\n$ sudo make install\n\npython\u3092\u8d77\u52d5\u3057\u3066\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ python\nPython 2.7.9 (default, Feb  6 2016, 12:56:09) \n[GCC 4.6.3] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> \n\n\u30d0\u30fc\u30b8\u30e7\u30f32.7.9\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n\n4.BlueZ\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nPython\u3067Bluetooth\u3092\u6271\u3046\u305f\u3081\u3001Bluetooth\u30d7\u30ed\u30c8\u30b3\u30eb\u30b9\u30bf\u30c3\u30af BlueZ\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u53c2\u8003\uff09iBeacon Raspberry Pi Scanner in Python\u306eInstalling blueZ on the Raspberry Pi\n\u6700\u65b0\u7248\u306f5.37\u306a\u306e\u3067\u3001\u305d\u308c\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ sudo apt-get install libusb-dev \n$ sudo apt-get install libdbus-1-dev \n$ sudo apt-get install libglib2.0-dev --fix-missing\n$ sudo apt-get install libudev-dev \n$ sudo apt-get install libical-dev\n$ sudo apt-get install libreadline-dev\n$ sudo apt-get install libdbus-glib-1-dev\n\n$ sudo mkdir bluez\n$ cd bluez\n$ sudo wget www.kernel.org/pub/linux/bluetooth/bluez-5.37.tar.gz\n$ sudo gunzip bluez-5.37.tar.gz\n$ sudo tar xvf bluez-5.37.tar\n$ cd bluez-5.37\n$ sudo ./configure --disable-systemd\n$ sudo make\n$ sudo make install\n\n$ sudo apt-get install python-bluez\n\n$ sudo shutdown -r now\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u305f\u3089hciconfig\u30b3\u30de\u30f3\u30c9\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n$ hciconfig\nhci0:   Type: BR/EDR  Bus: USB\n    BD Address: 5C:F3:70:01:23:45  ACL MTU: 1021:8  SCO MTU: 64:1\n    UP RUNNING PSCAN \n    RX bytes:1724 acl:0 sco:0 events:92 errors:0\n    TX bytes:1364 acl:0 sco:0 commands:87 errors:0\n\n# \u306f\u3058\u3081\u306b\niBeacon\u3092\u4f7f\u3063\u3066\u3084\u308a\u305f\u3044\u3053\u3068\u304c\u3042\u308a\u3001Raspberry Pi (Model B)\u3067Bluetooth\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n# 1.Bluetooth \u30a2\u30c0\u30d7\u30bf\n\u3053\u306e\u305f\u3081\u306b\u8cfc\u5165\u3057\u305fBluetooth\u30a2\u30c0\u30d7\u30bf\u306f\u3001Bluetooth 4.0+EDR/LE\u5bfe\u5fdc\u306eIODATA [USB-BT40LE](http://www.iodata.jp/product/interface/bluetooth/usb-bt40le/index.htm)\u3002\n\u4f7f\u7528\u30c1\u30c3\u30d7\u304cBroadcom BCM20702\u306a\u306e\u3067\u3001Raspbian wheezy\u3067\u3082\u305d\u306e\u307e\u307e\u3067\u5927\u4e08\u592b\u3067\u3057\u3087\u3046\u3002lsusb\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\n$ lsusb\nBus 001 Device 002: ID 0424:9514 Standard Microsystems Corp. \nBus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\nBus 001 Device 003: ID 0424:ec00 Standard Microsystems Corp. \nBus 001 Device 004: ID 0a5c:21e8 Broadcom Corp. \n```\n\u8a8d\u8b58\u3055\u308c\u3066\u3044\u307e\u3059\u306d\u3002\n\n# 2.Bluetooth\u30c9\u30e9\u30a4\u30d0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nhcitool\u304c\u5165\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u3001Bluetooth\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u53c2\u8003\uff09[Install Bluetooth Dongle on Raspberry Pi](https://rasspberrypi.wordpress.com/2012/09/03/install-bluetooth-dongle-on-raspberry-pi/)\n\n```\n$sudo apt-get install bluetooth\n```\nhcitool\u30b3\u30de\u30f3\u30c9\u3067iBeacon(Bluetooth Low Energy)\u30c7\u30d0\u30a4\u30b9\u3092\u30b9\u30ad\u30e3\u30f3\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\n$ sudo hcitool lescan\nLE Scan ...\nD1:7F:7E:12:34:56 (unknown)\n```\n\u7121\u4e8b\u691c\u51fa\u3067\u304d\u307e\u3057\u305f\u3002\n\u6ce8\uff09Bluetooth\u30a2\u30c9\u30ec\u30b9\u306f\u6539\u5909\u3057\u3066\u3044\u307e\u3059\u3002\n\n# 3.Python 2.7.9\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nPython\u3067iBeancon\u3092\u691c\u51fa\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u308b\u3064\u3082\u308a\u3067\u3059\u3002\n\u3053\u306eRaspberry Pi\u306b\u306f2.7.3\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u305f\u306e\u30672.7\u7cfb\u306e\u6700\u65b0\u7248\u3067\u3042\u308b\u30012.7.9\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u53c2\u8003\uff09[Raspberry Pi\u306b\u6700\u65b0\u7248\u306e\u5404\u7a2e\u30c4\u30fc\u30eb\u30fb\u8a00\u8a9e\u30fb\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b](http://qiita.com/kb10uy/items/976a52f687bcb7745fc7)\n\n```\n$ wget https://www.python.org/ftp/python/2.7.9/Python-2.7.9.tgz\n$ tar xvf Python-2.7.9.tgz\n$ cd Python-2.7.9\n$ ./configure\n$ make\n$ sudo make install\n```\npython\u3092\u8d77\u52d5\u3057\u3066\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n$ python\nPython 2.7.9 (default, Feb  6 2016, 12:56:09) \n[GCC 4.6.3] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> \n```\n\u30d0\u30fc\u30b8\u30e7\u30f32.7.9\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n\n# 4.BlueZ\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nPython\u3067Bluetooth\u3092\u6271\u3046\u305f\u3081\u3001Bluetooth\u30d7\u30ed\u30c8\u30b3\u30eb\u30b9\u30bf\u30c3\u30af BlueZ\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u53c2\u8003\uff09[iBeacon Raspberry Pi Scanner in Python](http://www.switchdoc.com/2014/08/ibeacon-raspberry-pi-scanner-python/)\u306eInstalling blueZ on the Raspberry Pi\n\n\u6700\u65b0\u7248\u306f5.37\u306a\u306e\u3067\u3001\u305d\u308c\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n$ sudo apt-get install libusb-dev \n$ sudo apt-get install libdbus-1-dev \n$ sudo apt-get install libglib2.0-dev --fix-missing\n$ sudo apt-get install libudev-dev \n$ sudo apt-get install libical-dev\n$ sudo apt-get install libreadline-dev\n$ sudo apt-get install libdbus-glib-1-dev\n\n$ sudo mkdir bluez\n$ cd bluez\n$ sudo wget www.kernel.org/pub/linux/bluetooth/bluez-5.37.tar.gz\n$ sudo gunzip bluez-5.37.tar.gz\n$ sudo tar xvf bluez-5.37.tar\n$ cd bluez-5.37\n$ sudo ./configure --disable-systemd\n$ sudo make\n$ sudo make install\n\n$ sudo apt-get install python-bluez\n\n$ sudo shutdown -r now\n```\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u305f\u3089hciconfig\u30b3\u30de\u30f3\u30c9\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```\n$ hciconfig\nhci0:\tType: BR/EDR  Bus: USB\n\tBD Address: 5C:F3:70:01:23:45  ACL MTU: 1021:8  SCO MTU: 64:1\n\tUP RUNNING PSCAN \n\tRX bytes:1724 acl:0 sco:0 events:92 errors:0\n\tTX bytes:1364 acl:0 sco:0 commands:87 errors:0\n```\n"}