{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nAndroid\u30a2\u30d7\u30ea\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u3068\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u6271\u3046\u3053\u3068\u3082\u3042\u308b\u3067\u3057\u3087\u3046\u3002\u3060\u304b\u3089\u3068\u3044\u3063\u3066\u3001\u5165\u9580\u66f8\u306e\u3088\u3046\u306b\u914d\u5217\u304b\u3089\u6bce\u56de\u6bce\u56de\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u69cb\u7bc9\u3055\u305b\u308b\u306a\u3093\u3066\u3053\u3068\u306f\u3042\u307e\u308a\u306a\u3044\u3067\u3057\u3087\u3046\u3002\u3066\u3053\u3068\u3067\u3001\u4e88\u3081PC\u3067\u4f5c\u6210\u3057\u3066\u304a\u3044\u305f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u5b9f\u88c5\u65b9\u6cd5\n\u307e\u305a\u306f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u6271\u3046\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nDataBaseHelper.java\npublic class DataBaseHelper extends SQLiteOpenHelper {\n    String SRC_DATABASE_NAME;\n    private static final int DATABASE_VERSION = 1;\n    private final Context context;\n    private final File databasePath;\n    private boolean createDatabase = false;\n\n    public DataBaseHelper(Context context,String Database_Name) {\n        super(context, Database_Name, null, DATABASE_VERSION);\n        SRC_DATABASE_NAME=Database_Name;\n        this.context = context;\n        this.databasePath = context.getDatabasePath(Database_Name);\n    }\n\n    @Override\n    public synchronized SQLiteDatabase getWritableDatabase() {\n        SQLiteDatabase database = super.getWritableDatabase();\n        if (createDatabase) {\n            try {\n                database = copyDatabase(database);\n            } catch (IOException e) {\n                // TODO: \u30a8\u30e9\u30fc\u51e6\u7406\n            }\n\n        }\n        return database;\n    }\n\n    private SQLiteDatabase copyDatabase(SQLiteDatabase database) throws IOException {\n        // db\u304c\u3072\u3089\u304d\u3063\u3071\u306a\u3057\u306a\u306e\u3067\u3001\u66f8\u304d\u63db\u3048\u3067\u304d\u308b\u3088\u3046\u306b\u9589\u3058\u308b\n        database.close();\n\n        // \u30b3\u30d4\u30fc\uff01\n        InputStream input = context.getAssets().open(SRC_DATABASE_NAME);\n        OutputStream output = new FileOutputStream(databasePath);\n        copy(input, output);\n\n        createDatabase = false;\n        // db\u3092\u9589\u3058\u305f\u306e\u3067\u3001\u307e\u305f\u958b\u304f\n        return super.getWritableDatabase();\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        super.onOpen(db);\n        // getWritableDatabase()\u3057\u305f\u3068\u304d\u306b\u547c\u3070\u308c\u3066\u304f\u308b\u306e\u3067\u3001\n        // \u521d\u671f\u5316\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3053\u3068\u3092\u4fdd\u5b58\u3059\u308b\n        this.createDatabase = true;\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n        onUpgrade(db, oldVersion, newVersion);\n    }\n\n    // CopyUtils\u304b\u3089\u306e\u30b3\u30d4\u30da\n    private static int copy(InputStream input, OutputStream output) throws IOException {\n        byte[] buffer = new byte[1024 * 4];\n        int count = 0;\n        int n = 0;\n        while (-1 != (n = input.read(buffer))) {\n            output.write(buffer, 0, n);\n            count += n;\n        }\n        return count;\n    }\n}\n\n\n\u6b21\u306b\u306bActivity\u306e\u65b9\u306b\u3061\u3087\u3061\u3087\u3063\u3068\u66f8\u304d\u307e\u3059\u3002\n\nMainActivity.java\n\uff5e\u7701\u7565\uff5e\nString InputText;\nDataBaseHelper mDbHelper = new DataBaseHelper(this,\"hogehoge.db\");\nSQLiteDatabase db = mDbHelper.getWritableDatabase();\nString qry=\"SELECT Number \"+\"FROM Data \"+\"WHERE Name = '\"+InputText+\"'\";\nCursor cur=db.rawQuery(qry,null);\n\uff5e\u7701\u7565\uff5e\n\n\n\u6700\u5f8c\u306basset\u30d5\u30a9\u30eb\u30c0\u306b\u4f5c\u6210\u3057\u3066\u304a\u3044\u305f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u653e\u308a\u8fbc\u3081\u3070\u7d42\u308f\u308a\u3067\u3059\u3002\n\n\u6ce8\u610f\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\u3059\u308b\u969b\u306f\u3001\u4e3b\u30c6\u30fc\u30d6\u30eb\u306e\u4ed6\u306bandroid_metadata\u3068\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u3082\u5fd8\u308c\u305a\u306b\u4f5c\u3063\u3066\u304f\u3060\u3055\u3044\u3002\u65e5\u672c\u306a\u3089en_US\u3092ja_JP\u306b\u3059\u308c\u3070OK\u3067\u3059\u3002\ncreate table android_metadata (  \n    locale text default 'en_US'  \n); \n\n\u304a\u75b2\u308c\u69d8\u3067\u3057\u305f\u3002\n\n\u53c2\u8003\nhttp://y-anz-m.blogspot.jp/2011/01/android-sqline-database.html\nhttp://d.hatena.ne.jp/henteko07/touch/20110324/1300935283\n#\u306f\u3058\u3081\u306b\nAndroid\u30a2\u30d7\u30ea\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u3068\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u6271\u3046\u3053\u3068\u3082\u3042\u308b\u3067\u3057\u3087\u3046\u3002\u3060\u304b\u3089\u3068\u3044\u3063\u3066\u3001\u5165\u9580\u66f8\u306e\u3088\u3046\u306b\u914d\u5217\u304b\u3089\u6bce\u56de\u6bce\u56de\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u69cb\u7bc9\u3055\u305b\u308b\u306a\u3093\u3066\u3053\u3068\u306f\u3042\u307e\u308a\u306a\u3044\u3067\u3057\u3087\u3046\u3002\u3066\u3053\u3068\u3067\u3001\u4e88\u3081PC\u3067\u4f5c\u6210\u3057\u3066\u304a\u3044\u305f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n#\u5b9f\u88c5\u65b9\u6cd5\n\u307e\u305a\u306f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u6271\u3046\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```DataBaseHelper.java\npublic class DataBaseHelper extends SQLiteOpenHelper {\n    String SRC_DATABASE_NAME;\n    private static final int DATABASE_VERSION = 1;\n    private final Context context;\n    private final File databasePath;\n    private boolean createDatabase = false;\n\n    public DataBaseHelper(Context context,String Database_Name) {\n        super(context, Database_Name, null, DATABASE_VERSION);\n        SRC_DATABASE_NAME=Database_Name;\n        this.context = context;\n        this.databasePath = context.getDatabasePath(Database_Name);\n    }\n\n    @Override\n    public synchronized SQLiteDatabase getWritableDatabase() {\n        SQLiteDatabase database = super.getWritableDatabase();\n        if (createDatabase) {\n            try {\n                database = copyDatabase(database);\n            } catch (IOException e) {\n                // TODO: \u30a8\u30e9\u30fc\u51e6\u7406\n            }\n\n        }\n        return database;\n    }\n\n    private SQLiteDatabase copyDatabase(SQLiteDatabase database) throws IOException {\n        // db\u304c\u3072\u3089\u304d\u3063\u3071\u306a\u3057\u306a\u306e\u3067\u3001\u66f8\u304d\u63db\u3048\u3067\u304d\u308b\u3088\u3046\u306b\u9589\u3058\u308b\n        database.close();\n\n        // \u30b3\u30d4\u30fc\uff01\n        InputStream input = context.getAssets().open(SRC_DATABASE_NAME);\n        OutputStream output = new FileOutputStream(databasePath);\n        copy(input, output);\n\n        createDatabase = false;\n        // db\u3092\u9589\u3058\u305f\u306e\u3067\u3001\u307e\u305f\u958b\u304f\n        return super.getWritableDatabase();\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        super.onOpen(db);\n        // getWritableDatabase()\u3057\u305f\u3068\u304d\u306b\u547c\u3070\u308c\u3066\u304f\u308b\u306e\u3067\u3001\n        // \u521d\u671f\u5316\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3053\u3068\u3092\u4fdd\u5b58\u3059\u308b\n        this.createDatabase = true;\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n        onUpgrade(db, oldVersion, newVersion);\n    }\n\n    // CopyUtils\u304b\u3089\u306e\u30b3\u30d4\u30da\n    private static int copy(InputStream input, OutputStream output) throws IOException {\n        byte[] buffer = new byte[1024 * 4];\n        int count = 0;\n        int n = 0;\n        while (-1 != (n = input.read(buffer))) {\n            output.write(buffer, 0, n);\n            count += n;\n        }\n        return count;\n    }\n}\n```\n\n\u6b21\u306b\u306bActivity\u306e\u65b9\u306b\u3061\u3087\u3061\u3087\u3063\u3068\u66f8\u304d\u307e\u3059\u3002\n\n```MainActivity.java\n\uff5e\u7701\u7565\uff5e\nString InputText;\nDataBaseHelper mDbHelper = new DataBaseHelper(this,\"hogehoge.db\");\nSQLiteDatabase db = mDbHelper.getWritableDatabase();\nString qry=\"SELECT Number \"+\"FROM Data \"+\"WHERE Name = '\"+InputText+\"'\";\nCursor cur=db.rawQuery(qry,null);\n\uff5e\u7701\u7565\uff5e\n```\n\n\u6700\u5f8c\u306basset\u30d5\u30a9\u30eb\u30c0\u306b\u4f5c\u6210\u3057\u3066\u304a\u3044\u305f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u653e\u308a\u8fbc\u3081\u3070\u7d42\u308f\u308a\u3067\u3059\u3002\n#\u6ce8\u610f\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\u3059\u308b\u969b\u306f\u3001\u4e3b\u30c6\u30fc\u30d6\u30eb\u306e\u4ed6\u306b`android_metadata`\u3068\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u3082\u5fd8\u308c\u305a\u306b\u4f5c\u3063\u3066\u304f\u3060\u3055\u3044\u3002\u65e5\u672c\u306a\u3089`en_US`\u3092`ja_JP`\u306b\u3059\u308c\u3070OK\u3067\u3059\u3002\n\n```\ncreate table android_metadata (  \n    locale text default 'en_US'  \n); \n```\n\n\u304a\u75b2\u308c\u69d8\u3067\u3057\u305f\u3002\n#\u53c2\u8003\nhttp://y-anz-m.blogspot.jp/2011/01/android-sqline-database.html\nhttp://d.hatena.ne.jp/henteko07/touch/20110324/1300935283\n", "tags": ["Android", "Database"]}