{"context": " More than 1 year has passed since last update.isucon2 \u306b\u5411\u3051\u305f\u3001 CentOS \u306e\u7af6\u6280\u7528\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3002\n\nSELinux\u7121\u52b9\n/etc/selinuc/config \u3067 SELINUX=disabled\n\niptables\u5207\u308b\nhttp://akitosblog.seesaa.net/article/160568740.html\n/etc/init.d/iptables stop\nchkconfig iptables off\n\n\n\u30ab\u30fc\u30cd\u30eb\u306e\u8a2d\u5b9a\nTCP\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3068\u3001\u30ab\u30fc\u30cd\u30eb\u30d1\u30cb\u30c3\u30af\u306b\u306a\u3063\u305f\u3089\u518d\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u3002\n/etc/sysctl.conf \u306e\u6700\u5f8c\u306b\u6b21\u306e\u3092\u8ffd\u8a18\u3057\u3066\u304a\u304f\u3002\nnet.ipv4.tcp_tw_reuse = 1  # recycle \u306f\u5371\u967a. reuse\u3060\u3051\u3067\u5341\u5206\nnet.ipv4.tcp_fin_timeout = 2\nnet.ipv4.tcp_rmem = 16384 131072 262144\nnet.ipv4.tcp_wmem = 16384 131072 262144\nnet.ipv4.tcp_mem  = 2048000 4096000 4096000\n\nkernel.panic = 10\n\n\u518d\u8d77\u52d5\u3082\u3057\u304f\u306f sysctl -p \u3067\u53cd\u6620\nkernel.panic \u304c\u3053\u308c\u3067\u53cd\u6620\u3055\u308c\u308b\u304b\u4e0d\u660e\u3002\u8d77\u52d5\u30aa\u30d7\u30b7\u30e7\u30f3\u306b panic=10 \u3068\u3064\u3051\u305f\u307b\u3046\u304c\u3044\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\nyum install -y \\\n  vim screen tmux rsync \\\n  pcre-devel perf strace gcc kernel-devel kernel-headers \\\n  apr-util bzip2-devel bzip2 ctags diffutils dstat \\\n  gcc gdb git httpd-tools man-pages patch pcre-devel \\\n  sqlite-devel zlib-devel\n\n\nnginx\n1.3.7 \u3092\u4f7f\u7528\u3002\nhttp {\n    open_file_cache max=10000;\n    sendfile on;\n    \u2026\n}\n\nopen_file_cache \u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3068\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304d\u76f4\u3057\uff06\u8aad\u307f\u76f4\u3057\u3057\u306a\u3044\u306e\u3067\u3001stats\u3092\u542b\u3081\u308b\u3068\u304b\u306a\u308a\u306e\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u524a\u6e1b\u3067\u304d\u308b\u3002\u5c0f\u3055\u3044\u9759\u7684\u30d5\u30a1\u30a4\u30eb\u306e\u914d\u4fe1\u901f\u5ea6\u304c\u304b\u306a\u308a\u4e0a\u304c\u308b\u306f\u305a\u3002\n\nisucon2 \u306b\u5411\u3051\u305f\u3001 CentOS \u306e\u7af6\u6280\u7528\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3002\n\n## SELinux\u7121\u52b9\n`/etc/selinuc/config` \u3067 `SELINUX=disabled`\n\n##iptables\u5207\u308b\nhttp://akitosblog.seesaa.net/article/160568740.html\n\n```\n/etc/init.d/iptables stop\nchkconfig iptables off\n```\n\n##\u30ab\u30fc\u30cd\u30eb\u306e\u8a2d\u5b9a\n\nTCP\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3068\u3001\u30ab\u30fc\u30cd\u30eb\u30d1\u30cb\u30c3\u30af\u306b\u306a\u3063\u305f\u3089\u518d\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u3002\n\n/etc/sysctl.conf \u306e\u6700\u5f8c\u306b\u6b21\u306e\u3092\u8ffd\u8a18\u3057\u3066\u304a\u304f\u3002\n\n```\nnet.ipv4.tcp_tw_reuse = 1  # recycle \u306f\u5371\u967a. reuse\u3060\u3051\u3067\u5341\u5206\nnet.ipv4.tcp_fin_timeout = 2\nnet.ipv4.tcp_rmem = 16384 131072 262144\nnet.ipv4.tcp_wmem = 16384 131072 262144\nnet.ipv4.tcp_mem  = 2048000 4096000 4096000\n\nkernel.panic = 10\n```\n\n\u518d\u8d77\u52d5\u3082\u3057\u304f\u306f sysctl -p \u3067\u53cd\u6620\n\nkernel.panic \u304c\u3053\u308c\u3067\u53cd\u6620\u3055\u308c\u308b\u304b\u4e0d\u660e\u3002\u8d77\u52d5\u30aa\u30d7\u30b7\u30e7\u30f3\u306b panic=10 \u3068\u3064\u3051\u305f\u307b\u3046\u304c\u3044\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n##\u30d1\u30c3\u30b1\u30fc\u30b8\n\n```\nyum install -y \\\n  vim screen tmux rsync \\\n  pcre-devel perf strace gcc kernel-devel kernel-headers \\\n  apr-util bzip2-devel bzip2 ctags diffutils dstat \\\n  gcc gdb git httpd-tools man-pages patch pcre-devel \\\n  sqlite-devel zlib-devel\n```\n\n##nginx\n1.3.7 \u3092\u4f7f\u7528\u3002\n\n```\nhttp {\n    open_file_cache max=10000;\n    sendfile on;\n    \u2026\n}\n```\n\nopen_file_cache \u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3068\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304d\u76f4\u3057\uff06\u8aad\u307f\u76f4\u3057\u3057\u306a\u3044\u306e\u3067\u3001stats\u3092\u542b\u3081\u308b\u3068\u304b\u306a\u308a\u306e\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u524a\u6e1b\u3067\u304d\u308b\u3002\u5c0f\u3055\u3044\u9759\u7684\u30d5\u30a1\u30a4\u30eb\u306e\u914d\u4fe1\u901f\u5ea6\u304c\u304b\u306a\u308a\u4e0a\u304c\u308b\u306f\u305a\u3002\n", "tags": ["isucon"]}