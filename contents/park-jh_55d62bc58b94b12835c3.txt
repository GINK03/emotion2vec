{"context": " More than 1 year has passed since last update.\n\n\u95a2\u9023\u8a18\u4e8b\n\n\u52c9\u5f37\u4f1aJS\u7de8\uff1c1\uff1e \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u8a00\u8a9e\u3068\u3057\u3066\u306eJavaScript\u3092\u7406\u89e3\n\u52c9\u5f37\u4f1aJS\u7de8\uff1c2\uff1e \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9MVC\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n\u52c9\u5f37\u4f1aJS\u7de8\uff1c3\uff1e \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u958b\u767a\u74b0\u5883\u69cb\u7bc9\n\u52c9\u5f37\u4f1aJS\u7de8\uff1c4\uff1e yeoman + backbone.model + grunt\n\u52c9\u5f37\u4f1aJS\u7de8\uff1c5\uff1e yeoman + backbone.collection + backbone.localStorage\n\u52c9\u5f37\u4f1aJS\u7de8\uff1c6\uff1e yeoman + backbone.view\n\u52c9\u5f37\u4f1aJS\u7de8\uff1c7\uff1e yeoman + backbone.router\n\n\u52c9\u5f37\u4f1aJS\u7de8\uff1c8\uff1e yeoman + backbone.js \u5b9f\u8df5 - \u305d\u306e\uff11 \n\u52c9\u5f37\u4f1aJS\u7de8\uff1c9\uff1e yeoman + backbone.js \u5b9f\u8df5 - \u305d\u306e\uff12\n\n\n\u30e1\u30e2\u306e\u691c\u7d22\u6a5f\u80fd\u306e\u8ffd\u52a0\n\n\u4ed5\u69d8\n\n\u691c\u7d22\u6b04\u306b\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3059\u308b\u3068\u30e1\u30e2\u4e00\u89a7\u306e\u8868\u793a\u304c\u7d5e\u308a\u8fbc\u307e\u308c\u308b\u3002\n#notes/search/\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u306e\u3088\u3046\u306a\u30eb\u30fc\u30c8\u3092\u767a\u884c\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u306e\u5c65\u6b74\u3084\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306b\u5bfe\u5fdc\u3059\u308b\u3002\n\n\nPractice.Views.NoteControl\u306e\u5f79\u5272\n\n\u30e6\u30fc\u30b6\u306e\u691c\u7d22\u64cd\u4f5c\u306b\u3088\u3063\u3066\u8d77\u3053\u308b\u30a4\u30d9\u30f3\u30c8\u3092\u691c\u51fa\u3059\u308b\u3053\u3068\n\u691c\u7d22\u30ef\u30fc\u30c9\u3092\u53d6\u5f97\u3057\u3066\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u751f\u3055\u3048\u3066\u4ed6\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u901a\u77e5\u3059\u308b\u3053\u3068\n\n\n\u691c\u7d22\u6b04\u306e\u8ffd\u52a0\n\napp/scripts/templates/note_control.js\n\ndiff --git a/app/scripts/templates/note_control.ejs b/app/scripts/templates/note_control.ejs\nindex 1f428c9..04bdf95 100644\n--- a/app/scripts/templates/note_control.ejs\n+++ b/app/scripts/templates/note_control.ejs\n@@ -1,5 +1,17 @@\n <div class=\"row\">\n   <div class=\"col-sm-6\">\n+    <!-- \u691c\u7d22\u6b04\u306eHTML\u306e\u8ffd\u52a0 start -->\n+    <form class=\"form-inline js-search-form\">\n+      <div class=\"input-group\">\n+        <input type=\"text\" class=\"form-control js-search-query\" name=\"q\">\n+        <div class=\"input-group-btn\">\n+          <button class=\"btn btn-success\" type=\"submit\">\n+            <i class=\"glyphicon glyphicon-search\"></i>\n+          </button>\n+        </div>\n+      </div>\n+    </form>\n+    <!-- \u691c\u7d22\u6b04\u306eHTML\u306e\u8ffd\u52a0 end -->\n   </div>\n   <div class=\"col-sm-6 text-right\">\n     <a href=\"#new\" class=\"btn btn-primary btn-small js-new\">\n\n\nsubmit\u30a4\u30d9\u30f3\u30c8\u306e\u76e3\u8996\u306e\u8ffd\u52a0\n\napp/scripts/views/note_control.js\n\ndiff --git a/app/scripts/views/note_control.js b/app/scripts/views/note_control.js\nindex 4ea8475..4e4631c 100644\n--- a/app/scripts/views/note_control.js\n+++ b/app/scripts/views/note_control.js\n@@ -9,6 +9,18 @@ Practice.Views = Practice.Views || {};\n\n     template: JST['app/scripts/templates/note_control.ejs'],\n\n+    // \u30d5\u30a9\u30fc\u30e0\u306esubmit\u30a4\u30d9\u30f3\u30c8\u306e\u76e3\u8996\u3092\u8ffd\u52a0\u3059\u308b\u3002\n+    events: {\n+      'submit .js-search-form': 'onSubmit'\n+    },\n+\n+    // submit\u30a4\u30d9\u30f3\u30c8\u306e\u30cf\u30f3\u30c9\u30e9\u3092\u8ffd\u52a0\u3059\u308b\u3002\n+    onSubmit: function(e) {\n+      e.preventDefault();\n+      var query = this.$('.js-search-query').val();\n+      this.trigger('submit:form', query);\n+    },\n+\n     render: function () {\n       this.$el.html(this.template);\n       return this;\n\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u4fee\u6b63\n\napp/scripts/routes/note.js\nsubmit:form\u30a4\u30d9\u30f3\u30c8\u306e\u76e3\u8996\u306e\u8ffd\u52a0\n\u691c\u7d22\u306b\u95a2\u3059\u308b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u60c5\u5831\u306e\u8ffd\u52a0\n\u691c\u7d22\u30ef\u30fc\u30c9\u304c\u542b\u307e\u308c\u305fnote\u3092\u7d5e\u308b\u305f\u3081\u306e\u51e6\u7406\u3092\u8ffd\u52a0\n\u691c\u7d22\u30ef\u30fc\u30c9\u3092\u542b\u3080note\u30ea\u30b9\u30c8\u3092\u8868\u793a\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\napp/scripts/routes/note.js\n\ndiff --git a/app/scripts/routes/note.js b/app/scripts/routes/note.js\nindex b9143b6..247685c 100644\n--- a/app/scripts/routes/note.js\n+++ b/app/scripts/routes/note.js\n@@ -10,6 +10,7 @@ Practice.Routers = Practice.Routers || {};\n       'notes/:id': 'showNoteDetail',\n       'new': 'showNewNote',\n       'notes/:id/edit': 'showEditNote',\n+      'notes/search/:query': 'searchNote',\n       '*actions': 'defaultRoute'\n     },\n\n@@ -30,24 +31,51 @@ Practice.Routers = Practice.Routers || {};\n       Practice.headerContainer.empty();\n     },\n\n-    showNoteList: function() {\n-      // \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u6e21\u3057\u3066\u30e1\u30e2\u4e00\u89a7\u306e\u89aa\u30d3\u30e5\u30fc\u3092\u521d\u671f\u5316\u3059\u308b\u3002\n-      var noteListView = new Practice.Views.NoteList({\n-        collection: Practice.noteCollection\n-      });\n-\n-      // \u8868\u793a\u9818\u57df\u306b\u30e1\u30e2\u4e00\u89a7\u3092\u8868\u793a\u3059\u308b\u3002\n-      Practice.mainContainer.show(noteListView);\n-\n-      // \u30e1\u30e2\u4e00\u89a7\u64cd\u4f5c\u30d3\u30e5\u30fc\u3092\u8868\u793a\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u306e\u547c\u3073\u51fa\u3057\u3092\u8ffd\u52a0\u3059\u308b\u3002\n+    showNoteList: function(models) {\n+      // \u4e00\u89a7\u8868\u793a\u7528\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u5225\u9014\u521d\u671f\u5316\u3059\u308b\n+      if (!this.filteredCollection) {\n+        this.filteredCollection = new Practice.Collections.Note();\n+      }\n+\n+      // NoteListView\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u8868\u793a\u4e2d\u3067\u306a\u3044\u3068\u304d\u306e\u307f\u3053\u308c\u3092\u521d\u671f\u5316\u3057\u3066\u8868\u793a\u3059\u308b\u3002\n+      if (!Practice.mainContainer.has(Practice.Views.NoteList)) {\n+        // \u521d\u671f\u5316\u306e\u969b\u306b\u4e00\u89a7\u8868\u793a\u7528\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u6e21\u3057\u3066\u304a\u304f\n+        var noteListView = new Practice.Views.NoteList({\n+          collection: this.filteredCollection\n+        });\n+        Practice.mainContainer.show(noteListView);\n+      }\n+\n+      // \u691c\u7d22\u3055\u308c\u305f\u30e2\u30c7\u30eb\u306e\u914d\u5217\u304c\u5f15\u6570\u306b\u6e21\u3055\u308c\u3066\u3044\u308c\u3070\u305d\u3061\u3089\u3092\u3001\n+      // \u305d\u3046\u3067\u306a\u3051\u308c\u3070\u3059\u3079\u3066\u306e\u30e2\u30c7\u30eb\u3092\u6301\u3064Practice.noteCollection\n+      // \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30e2\u30c7\u30eb\u306e\u914d\u5217\u3092\u4f7f\u7528\u3059\u308b\u3002\n+      models = models || Practice.noteCollection.models;\n+\n+      // \u4e00\u89a7\u8868\u793a\u7528\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306ereset()\u30e1\u30bd\u30c3\u30c9\u306b\u63a1\u7528\u3057\u305f\u307b\u3046\u306e\u30e2\u30c7\u30eb\u306e\u914d\u5217\u3092\u6e21\u3059\u3002\n+      this.filteredCollection.reset(models);\n       this.showNoteControl();\n     },\n\n     showNoteControl: function() {\n+      var self = this;\n       var noteControlView = new Practice.Views.NoteControl();\n+\n+      // submit:form\u30a4\u30d9\u30f3\u30c8\u306e\u76e3\u8996\u3092\u8ffd\u52a0\u3059\u308b\u3002\n+      noteControlView.on('submit:form', function(query) {\n+        self.searchNote(query);\n+        self.navigate('notes/search/' + query);\n+      });\n+\n       Practice.headerContainer.show(noteControlView);\n     },\n\n+    searchNote: function(query) {\n+      var filtered = Practice.noteCollection.filter(function(note) {\n+        return note.get('title').indexOf(query) !== -1;\n+      });\n+      this.showNoteList(filtered);\n+    },\n+\n     showNewNote: function() {\n       var self = this;\n       // \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e<%= title %>\u306a\u3069\u306e\u51fa\u529b\u3092\u7a7a\u6587\u5b57\u5217\u3067\u7a7a\u6b04\u306b\u3057\u3066\u304a\u304f\u305f\u3081\u3001\n\n\napp/scripts/views/container.js\n\ndiff --git a/app/scripts/views/container.js b/app/scripts/views/container.js\nindex ca3c5d3..2294229 100644\n--- a/app/scripts/views/container.js\n+++ b/app/scripts/views/container.js\n@@ -24,6 +24,10 @@ Practice.Views = Practice.Views || {};\n     empty: function() {\n       this.destroyView(this.currentView);\n       this.currentView = null;\n+    },\n+\n+    has: function(obj) {\n+      return this.currentView instanceof obj;\n     }\n\n   });\n\n\napp/scripts/views/note_list.js\n\ndiff --git a/app/scripts/views/note_list.js b/app/scripts/views/note_list.js\nindex 6caf869..ae59ecd 100644\n--- a/app/scripts/views/note_list.js\n+++ b/app/scripts/views/note_list.js\n@@ -20,7 +20,7 @@ Practice.Views = Practice.Views || {};\n     initialize: function (options) {\n       // Backbone.Collection\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d7\u3051\u53d6\u308b\n       this.collection = options.collection;\n-      // this.listenTo(this.model, 'change', this.render);\n+      this.listenTo(this.collection, 'reset', this.render);\n     },\n\n     render: function () {\n\n\nshowNoteList()\u3068showNoteList(models)\n\n\u30e1\u30bd\u30c3\u30c9\u3092showNoteList(models)\u306b\u5909\u66f4\u3057\u305f\u306e\u306b\u3001defaultRoute\u3067showNoteList()\u3092\u305d\u306e\u307e\u307e\u4f7f\u3063\u3066\u3082\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u306a\u304b\u3063\u305f\u3002\n18\u756a\u30e9\u30a4\u30f3\u306b\u30d6\u30ec\u30a4\u30af\u30dd\u30a4\u30f3\u30c8\u3092\u8a2d\u5b9a\u3057\u305f\u5f8cstep into\u3092\u62bc\u3057\u305f\u3089showNoteList(models)\u30e1\u30bd\u30c3\u30c9\u306e\u4e2d\u306b\u5165\u308a\u306a\u304c\u3089\u6a2a\u306bmodels=undefined\u3068\u3044\u3046\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u305f\u3002\nshowNoteList(models)\u30e1\u30bd\u30c3\u30c9\u3092showNoteList()\u3067\u547c\u3073\u51fa\u3059\u3068\u5f15\u6570\u304cundefined\u306a\u306e\u3060\u3002\n\u5ba3\u8a00\u3055\u308c\u3066\u3044\u306a\u3044\u5909\u6570\u3092\u547c\u3073\u51fa\u3059\u3068undefined\u3060\u3088\u306a\u3002\u3053\u308c\u3068\u540c\u3058\u3002\n\n\n\u53e4\u3044\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u7834\u68c4\n\ndeveloper tools\u306eProfiles\u306b\u3066Record Heap Allocations\u3092\u5b9f\u884c\u3057\u3066\u4e00\u89a7\u753b\u9762\u3068\u691c\u7d22\u7d50\u679c\u753b\u9762\u3092\u7e70\u308a\u8fd4\u3057\u3066\u5b9f\u884c\u3059\u308b\u3002\u300c\u623b\u308b\u300d\u3068\u300c\u9032\u3080\u300d\u309220\u56de\u4ee5\u4e0a\u7e70\u308a\u8fd4\u3059\u3002\nHTMLTableRowElement\u9805\u76ee\u306b\u3066\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u305f\u304f\u3055\u3093\u6b8b\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\u4e00\u89a7\u753b\u9762\u304c\u547c\u3070\u308c\u308b\u3068\u304d\u3001\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306b\u5bfe\u3057\u3066reset()\u3067\u30e2\u30c7\u30eb\u306e\u914d\u5217\u3092\u66f4\u65b0\u3059\u308b\u3002\n\u305d\u306e\u969bNoteList\u304c\u8868\u793a\u3092\u66f4\u65b0\u3057\u3066\u4f7f\u308f\u308c\u306a\u304f\u306a\u3063\u305f\u53e4\u3044DOM\u304c\u30e1\u30e2\u30ea\u306b\u6b8b\u3055\u308c\u3066\u3057\u307e\u3046\u3002\n\u53e4\u3044\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u7834\u68c4\u3059\u308b\u51e6\u7406\u3092\u8ffd\u52a0\n\ndiff --git a/app/scripts/views/note_list.js b/app/scripts/views/note_list.js\nindex 6caf869..9772bed 100644\n--- a/app/scripts/views/note_list.js\n+++ b/app/scripts/views/note_list.js\n@@ -20,18 +20,28 @@ Practice.Views = Practice.Views || {};\n     initialize: function (options) {\n       // Backbone.Collection\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d7\u3051\u53d6\u308b\n       this.collection = options.collection;\n-      // this.listenTo(this.model, 'change', this.render);\n+      this.listenTo(this.collection, 'reset', this.render);\n     },\n\n     render: function () {\n+      // this.$el.html()\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u524d\u306b\u53e4\u3044\u30d3\u30e5\u30fc\u3092\u7834\u68c4\u3057\u3066\u304a\u304f\u3002\n+      this.removeNoteViews();\n+\n       this.$el.html(this.template);\n-      this.collection.each(function(note) {\n+      this.noteViews = this.collection.map(function(note) {\n         var noteView = new Practice.Views.Note({\n           model: note\n         });\n         this.$('#noteList').append(noteView.render().$el);\n+        return noteView;\n       }, this);\n       return this;\n+    },\n+\n+    // \u3059\u3079\u3066\u306e\u5b50\u30d3\u30e5\u30fc\u3092\u7834\u68c4\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3059\u308b\u3002\n+    removeNoteViews: function() {\n+      // \u4fdd\u6301\u3057\u3066\u3044\u308b\u3059\u3079\u3066\u306e\u30d3\u30e5\u30fc\u306eremove()\u3092\u547c\u3073\u51fa\u3059\u3002\n+      _.invoke(this.noteViews, 'remove');\n     }\n\n   });\n\n\n\u53c2\u8003\u66f8\u7c4d\n\nJavaScript\u5fb9\u5e95\u653b\u7565\nJavaScript\u30a8\u30f3\u30b8\u30cb\u30a2\u990a\u6210\u8aad\u672c\n\u5165\u9580Backbone.js\n\n\n## \u95a2\u9023\u8a18\u4e8b\n\n* [\u52c9\u5f37\u4f1aJS\u7de8\uff1c1\uff1e \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u8a00\u8a9e\u3068\u3057\u3066\u306eJavaScript\u3092\u7406\u89e3](http://qiita.com/park-jh/items/1887d87f33474cf7d733)\n* [\u52c9\u5f37\u4f1aJS\u7de8\uff1c2\uff1e \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9MVC\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af](http://qiita.com/park-jh/items/8b0a21e09223e3a8d0bc)\n* [\u52c9\u5f37\u4f1aJS\u7de8\uff1c3\uff1e \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u958b\u767a\u74b0\u5883\u69cb\u7bc9](http://qiita.com/park-jh/items/319cacc28850c9fd4898)\n* [\u52c9\u5f37\u4f1aJS\u7de8\uff1c4\uff1e yeoman + backbone.model + grunt](http://qiita.com/park-jh/items/78bc01b93fe6d4167624)\n* [\u52c9\u5f37\u4f1aJS\u7de8\uff1c5\uff1e yeoman + backbone.collection + backbone.localStorage](http://qiita.com/park-jh/items/49fefe30cdf57de7b6f0)\n* [\u52c9\u5f37\u4f1aJS\u7de8\uff1c6\uff1e yeoman + backbone.view](http://qiita.com/park-jh/items/44fb4faac997c71201a0)\n* [\u52c9\u5f37\u4f1aJS\u7de8\uff1c7\uff1e yeoman + backbone.router](http://qiita.com/park-jh/items/8f7d4275279201d5796b)\n* [\u52c9\u5f37\u4f1aJS\u7de8\uff1c8\uff1e yeoman + backbone.js \u5b9f\u8df5 - \u305d\u306e\uff11](http://qiita.com/park-jh/items/bad19e1c6b502ef0d0fa) \n* \u52c9\u5f37\u4f1aJS\u7de8\uff1c9\uff1e yeoman + backbone.js \u5b9f\u8df5 - \u305d\u306e\uff12\n\n## \u30e1\u30e2\u306e\u691c\u7d22\u6a5f\u80fd\u306e\u8ffd\u52a0\n\n### \u4ed5\u69d8\n\n* \u691c\u7d22\u6b04\u306b\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3059\u308b\u3068\u30e1\u30e2\u4e00\u89a7\u306e\u8868\u793a\u304c\u7d5e\u308a\u8fbc\u307e\u308c\u308b\u3002\n* \\#notes/search/\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u306e\u3088\u3046\u306a\u30eb\u30fc\u30c8\u3092\u767a\u884c\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u306e\u5c65\u6b74\u3084\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306b\u5bfe\u5fdc\u3059\u308b\u3002\n\n### Practice.Views.NoteControl\u306e\u5f79\u5272\n\n* \u30e6\u30fc\u30b6\u306e\u691c\u7d22\u64cd\u4f5c\u306b\u3088\u3063\u3066\u8d77\u3053\u308b\u30a4\u30d9\u30f3\u30c8\u3092\u691c\u51fa\u3059\u308b\u3053\u3068\n* \u691c\u7d22\u30ef\u30fc\u30c9\u3092\u53d6\u5f97\u3057\u3066\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u751f\u3055\u3048\u3066\u4ed6\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u901a\u77e5\u3059\u308b\u3053\u3068\n\n### \u691c\u7d22\u6b04\u306e\u8ffd\u52a0\n\n* app/scripts/templates/note_control.js\n\n```diff\ndiff --git a/app/scripts/templates/note_control.ejs b/app/scripts/templates/note_control.ejs\nindex 1f428c9..04bdf95 100644\n--- a/app/scripts/templates/note_control.ejs\n+++ b/app/scripts/templates/note_control.ejs\n@@ -1,5 +1,17 @@\n <div class=\"row\">\n   <div class=\"col-sm-6\">\n+    <!-- \u691c\u7d22\u6b04\u306eHTML\u306e\u8ffd\u52a0 start -->\n+    <form class=\"form-inline js-search-form\">\n+      <div class=\"input-group\">\n+        <input type=\"text\" class=\"form-control js-search-query\" name=\"q\">\n+        <div class=\"input-group-btn\">\n+          <button class=\"btn btn-success\" type=\"submit\">\n+            <i class=\"glyphicon glyphicon-search\"></i>\n+          </button>\n+        </div>\n+      </div>\n+    </form>\n+    <!-- \u691c\u7d22\u6b04\u306eHTML\u306e\u8ffd\u52a0 end -->\n   </div>\n   <div class=\"col-sm-6 text-right\">\n     <a href=\"#new\" class=\"btn btn-primary btn-small js-new\">\n```\n\n### submit\u30a4\u30d9\u30f3\u30c8\u306e\u76e3\u8996\u306e\u8ffd\u52a0\n\n* app/scripts/views/note_control.js\n\n```diff\ndiff --git a/app/scripts/views/note_control.js b/app/scripts/views/note_control.js\nindex 4ea8475..4e4631c 100644\n--- a/app/scripts/views/note_control.js\n+++ b/app/scripts/views/note_control.js\n@@ -9,6 +9,18 @@ Practice.Views = Practice.Views || {};\n\n     template: JST['app/scripts/templates/note_control.ejs'],\n\n+    // \u30d5\u30a9\u30fc\u30e0\u306esubmit\u30a4\u30d9\u30f3\u30c8\u306e\u76e3\u8996\u3092\u8ffd\u52a0\u3059\u308b\u3002\n+    events: {\n+      'submit .js-search-form': 'onSubmit'\n+    },\n+\n+    // submit\u30a4\u30d9\u30f3\u30c8\u306e\u30cf\u30f3\u30c9\u30e9\u3092\u8ffd\u52a0\u3059\u308b\u3002\n+    onSubmit: function(e) {\n+      e.preventDefault();\n+      var query = this.$('.js-search-query').val();\n+      this.trigger('submit:form', query);\n+    },\n+\n     render: function () {\n       this.$el.html(this.template);\n       return this;\n```\n\n### \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u4fee\u6b63\n\n* app/scripts/routes/note.js\n* submit:form\u30a4\u30d9\u30f3\u30c8\u306e\u76e3\u8996\u306e\u8ffd\u52a0\n* \u691c\u7d22\u306b\u95a2\u3059\u308b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u60c5\u5831\u306e\u8ffd\u52a0\n* \u691c\u7d22\u30ef\u30fc\u30c9\u304c\u542b\u307e\u308c\u305fnote\u3092\u7d5e\u308b\u305f\u3081\u306e\u51e6\u7406\u3092\u8ffd\u52a0\n* \u691c\u7d22\u30ef\u30fc\u30c9\u3092\u542b\u3080note\u30ea\u30b9\u30c8\u3092\u8868\u793a\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\n* app/scripts/routes/note.js\n\n```diff\ndiff --git a/app/scripts/routes/note.js b/app/scripts/routes/note.js\nindex b9143b6..247685c 100644\n--- a/app/scripts/routes/note.js\n+++ b/app/scripts/routes/note.js\n@@ -10,6 +10,7 @@ Practice.Routers = Practice.Routers || {};\n       'notes/:id': 'showNoteDetail',\n       'new': 'showNewNote',\n       'notes/:id/edit': 'showEditNote',\n+      'notes/search/:query': 'searchNote',\n       '*actions': 'defaultRoute'\n     },\n\n@@ -30,24 +31,51 @@ Practice.Routers = Practice.Routers || {};\n       Practice.headerContainer.empty();\n     },\n\n-    showNoteList: function() {\n-      // \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u6e21\u3057\u3066\u30e1\u30e2\u4e00\u89a7\u306e\u89aa\u30d3\u30e5\u30fc\u3092\u521d\u671f\u5316\u3059\u308b\u3002\n-      var noteListView = new Practice.Views.NoteList({\n-        collection: Practice.noteCollection\n-      });\n-\n-      // \u8868\u793a\u9818\u57df\u306b\u30e1\u30e2\u4e00\u89a7\u3092\u8868\u793a\u3059\u308b\u3002\n-      Practice.mainContainer.show(noteListView);\n-\n-      // \u30e1\u30e2\u4e00\u89a7\u64cd\u4f5c\u30d3\u30e5\u30fc\u3092\u8868\u793a\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u306e\u547c\u3073\u51fa\u3057\u3092\u8ffd\u52a0\u3059\u308b\u3002\n+    showNoteList: function(models) {\n+      // \u4e00\u89a7\u8868\u793a\u7528\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u5225\u9014\u521d\u671f\u5316\u3059\u308b\n+      if (!this.filteredCollection) {\n+        this.filteredCollection = new Practice.Collections.Note();\n+      }\n+\n+      // NoteListView\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u8868\u793a\u4e2d\u3067\u306a\u3044\u3068\u304d\u306e\u307f\u3053\u308c\u3092\u521d\u671f\u5316\u3057\u3066\u8868\u793a\u3059\u308b\u3002\n+      if (!Practice.mainContainer.has(Practice.Views.NoteList)) {\n+        // \u521d\u671f\u5316\u306e\u969b\u306b\u4e00\u89a7\u8868\u793a\u7528\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u6e21\u3057\u3066\u304a\u304f\n+        var noteListView = new Practice.Views.NoteList({\n+          collection: this.filteredCollection\n+        });\n+        Practice.mainContainer.show(noteListView);\n+      }\n+\n+      // \u691c\u7d22\u3055\u308c\u305f\u30e2\u30c7\u30eb\u306e\u914d\u5217\u304c\u5f15\u6570\u306b\u6e21\u3055\u308c\u3066\u3044\u308c\u3070\u305d\u3061\u3089\u3092\u3001\n+      // \u305d\u3046\u3067\u306a\u3051\u308c\u3070\u3059\u3079\u3066\u306e\u30e2\u30c7\u30eb\u3092\u6301\u3064Practice.noteCollection\n+      // \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30e2\u30c7\u30eb\u306e\u914d\u5217\u3092\u4f7f\u7528\u3059\u308b\u3002\n+      models = models || Practice.noteCollection.models;\n+\n+      // \u4e00\u89a7\u8868\u793a\u7528\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306ereset()\u30e1\u30bd\u30c3\u30c9\u306b\u63a1\u7528\u3057\u305f\u307b\u3046\u306e\u30e2\u30c7\u30eb\u306e\u914d\u5217\u3092\u6e21\u3059\u3002\n+      this.filteredCollection.reset(models);\n       this.showNoteControl();\n     },\n\n     showNoteControl: function() {\n+      var self = this;\n       var noteControlView = new Practice.Views.NoteControl();\n+\n+      // submit:form\u30a4\u30d9\u30f3\u30c8\u306e\u76e3\u8996\u3092\u8ffd\u52a0\u3059\u308b\u3002\n+      noteControlView.on('submit:form', function(query) {\n+        self.searchNote(query);\n+        self.navigate('notes/search/' + query);\n+      });\n+\n       Practice.headerContainer.show(noteControlView);\n     },\n\n+    searchNote: function(query) {\n+      var filtered = Practice.noteCollection.filter(function(note) {\n+        return note.get('title').indexOf(query) !== -1;\n+      });\n+      this.showNoteList(filtered);\n+    },\n+\n     showNewNote: function() {\n       var self = this;\n       // \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e<%= title %>\u306a\u3069\u306e\u51fa\u529b\u3092\u7a7a\u6587\u5b57\u5217\u3067\u7a7a\u6b04\u306b\u3057\u3066\u304a\u304f\u305f\u3081\u3001\n```\n\n* app/scripts/views/container.js\n\n```diff\ndiff --git a/app/scripts/views/container.js b/app/scripts/views/container.js\nindex ca3c5d3..2294229 100644\n--- a/app/scripts/views/container.js\n+++ b/app/scripts/views/container.js\n@@ -24,6 +24,10 @@ Practice.Views = Practice.Views || {};\n     empty: function() {\n       this.destroyView(this.currentView);\n       this.currentView = null;\n+    },\n+\n+    has: function(obj) {\n+      return this.currentView instanceof obj;\n     }\n\n   });\n```\n\n* app/scripts/views/note_list.js\n\n```diff\ndiff --git a/app/scripts/views/note_list.js b/app/scripts/views/note_list.js\nindex 6caf869..ae59ecd 100644\n--- a/app/scripts/views/note_list.js\n+++ b/app/scripts/views/note_list.js\n@@ -20,7 +20,7 @@ Practice.Views = Practice.Views || {};\n     initialize: function (options) {\n       // Backbone.Collection\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d7\u3051\u53d6\u308b\n       this.collection = options.collection;\n-      // this.listenTo(this.model, 'change', this.render);\n+      this.listenTo(this.collection, 'reset', this.render);\n     },\n\n     render: function () {\n```\n\n### showNoteList()\u3068showNoteList(models)\n\n* \u30e1\u30bd\u30c3\u30c9\u3092showNoteList(models)\u306b\u5909\u66f4\u3057\u305f\u306e\u306b\u3001defaultRoute\u3067showNoteList()\u3092\u305d\u306e\u307e\u307e\u4f7f\u3063\u3066\u3082\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u306a\u304b\u3063\u305f\u3002\n* 18\u756a\u30e9\u30a4\u30f3\u306b\u30d6\u30ec\u30a4\u30af\u30dd\u30a4\u30f3\u30c8\u3092\u8a2d\u5b9a\u3057\u305f\u5f8cstep into\u3092\u62bc\u3057\u305f\u3089showNoteList(models)\u30e1\u30bd\u30c3\u30c9\u306e\u4e2d\u306b\u5165\u308a\u306a\u304c\u3089\u6a2a\u306bmodels=undefined\u3068\u3044\u3046\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u305f\u3002\n* showNoteList(models)\u30e1\u30bd\u30c3\u30c9\u3092showNoteList()\u3067\u547c\u3073\u51fa\u3059\u3068\u5f15\u6570\u304cundefined\u306a\u306e\u3060\u3002\n* \u5ba3\u8a00\u3055\u308c\u3066\u3044\u306a\u3044\u5909\u6570\u3092\u547c\u3073\u51fa\u3059\u3068undefined\u3060\u3088\u306a\u3002\u3053\u308c\u3068\u540c\u3058\u3002\n\n### \u53e4\u3044\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u7834\u68c4\n\n* developer tools\u306eProfiles\u306b\u3066Record Heap Allocations\u3092\u5b9f\u884c\u3057\u3066\u4e00\u89a7\u753b\u9762\u3068\u691c\u7d22\u7d50\u679c\u753b\u9762\u3092\u7e70\u308a\u8fd4\u3057\u3066\u5b9f\u884c\u3059\u308b\u3002\u300c\u623b\u308b\u300d\u3068\u300c\u9032\u3080\u300d\u309220\u56de\u4ee5\u4e0a\u7e70\u308a\u8fd4\u3059\u3002\n* HTMLTableRowElement\u9805\u76ee\u306b\u3066\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u305f\u304f\u3055\u3093\u6b8b\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n* \u4e00\u89a7\u753b\u9762\u304c\u547c\u3070\u308c\u308b\u3068\u304d\u3001\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306b\u5bfe\u3057\u3066reset()\u3067\u30e2\u30c7\u30eb\u306e\u914d\u5217\u3092\u66f4\u65b0\u3059\u308b\u3002\n* \u305d\u306e\u969bNoteList\u304c\u8868\u793a\u3092\u66f4\u65b0\u3057\u3066\u4f7f\u308f\u308c\u306a\u304f\u306a\u3063\u305f\u53e4\u3044DOM\u304c\u30e1\u30e2\u30ea\u306b\u6b8b\u3055\u308c\u3066\u3057\u307e\u3046\u3002\n* \u53e4\u3044\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u7834\u68c4\u3059\u308b\u51e6\u7406\u3092\u8ffd\u52a0\n\n```diff\ndiff --git a/app/scripts/views/note_list.js b/app/scripts/views/note_list.js\nindex 6caf869..9772bed 100644\n--- a/app/scripts/views/note_list.js\n+++ b/app/scripts/views/note_list.js\n@@ -20,18 +20,28 @@ Practice.Views = Practice.Views || {};\n     initialize: function (options) {\n       // Backbone.Collection\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d7\u3051\u53d6\u308b\n       this.collection = options.collection;\n-      // this.listenTo(this.model, 'change', this.render);\n+      this.listenTo(this.collection, 'reset', this.render);\n     },\n\n     render: function () {\n+      // this.$el.html()\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u524d\u306b\u53e4\u3044\u30d3\u30e5\u30fc\u3092\u7834\u68c4\u3057\u3066\u304a\u304f\u3002\n+      this.removeNoteViews();\n+\n       this.$el.html(this.template);\n-      this.collection.each(function(note) {\n+      this.noteViews = this.collection.map(function(note) {\n         var noteView = new Practice.Views.Note({\n           model: note\n         });\n         this.$('#noteList').append(noteView.render().$el);\n+        return noteView;\n       }, this);\n       return this;\n+    },\n+\n+    // \u3059\u3079\u3066\u306e\u5b50\u30d3\u30e5\u30fc\u3092\u7834\u68c4\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3059\u308b\u3002\n+    removeNoteViews: function() {\n+      // \u4fdd\u6301\u3057\u3066\u3044\u308b\u3059\u3079\u3066\u306e\u30d3\u30e5\u30fc\u306eremove()\u3092\u547c\u3073\u51fa\u3059\u3002\n+      _.invoke(this.noteViews, 'remove');\n     }\n\n   });\n```\n\n## \u53c2\u8003\u66f8\u7c4d\n* JavaScript\u5fb9\u5e95\u653b\u7565\n* JavaScript\u30a8\u30f3\u30b8\u30cb\u30a2\u990a\u6210\u8aad\u672c\n* \u5165\u9580Backbone.js\n", "tags": ["yeoman", "Backbone.js"]}