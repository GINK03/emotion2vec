{"context": " More than 1 year has passed since last update.\n\n\u306a\u3093\u3067\u3082Checkable\u306b\u3057\u305f\u304f\u306a\u308a\u307e\u3059\u3088\u306d\n\u79c1\u306f\u3001\u305f\u3068\u3048\u3070ImageView\u3084LinearLayout\u3092\u30c8\u30b0\u30eb\u30dc\u30bf\u30f3\u306b\u3057\u305f\u304f\u306a\u3063\u305f\u308a\u3057\u307e\u3059\u3002\n\nCheckable\u3092\u5b9f\u88c5\u3059\u308b\nImageView\u3092Checkable\u306b\u3057\u3066\u3001check\u3055\u308c\u305f\u6642\u306b\u753b\u50cf\u306e\u5468\u308a\u306b\u30dc\u30fc\u30c0\u30fc\u3092\u4ed8\u3051\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nCheckableImageView.java\npublic class CheckableImageView extends ImageView implements Checkable {\n\n    private static final int[] CHECKED_STATE_SET = {android.R.attr.state_checked};\n    private boolean checked = false;\n\n    public CheckableImageView(Context context) {\n        super(context);\n    }\n\n    public CheckableImageView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public CheckableImageView(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n    }\n\n    @Override\n    public void setChecked(boolean checked) {\n        if (this.checked != checked) {\n            this.checked = checked;\n            refreshDrawableState();\n        }\n    }\n\n    @Override\n    public boolean isChecked() {\n        return checked;\n    }\n\n    @Override\n    public void toggle() {\n        setChecked(!checked);\n    }\n\n    @Override\n    public int[] onCreateDrawableState(int extraSpace) {\n        final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);\n        if (isChecked()) {\n            mergeDrawableStates(drawableState, CHECKED_STATE_SET);\n        }\n        return drawableState;\n    }\n}\n\n\n\u30c1\u30a7\u30c3\u30af\u6642\u306b\u30dc\u30fc\u30c0\u30fc\u3092\u8868\u793a\u3059\u308b\u30b9\u30bf\u30a4\u30eb\u3092\u5b9a\u7fa9\nstate_checked=\"true\"\u306e\u6642\u306e\u30b9\u30bf\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\ntoggle_image_circle.xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<selector xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <item android:state_checked=\"true\">\n        <shape android:shape=\"oval\">\n            <size android:width=\"150dp\" android:height=\"150dp\" />\n            <stroke\n                android:width=\"5dp\"\n                android:color=\"#F0F0F0\" />\n        </shape>\n    </item>\n</selector>\n\n\n\u3042\u3068\u306f\u3001layout\u3067\u4f7f\u3046\u3060\u3051\n\nactivity_main.xml\n# \u30d1\u30c3\u30b1\u30fc\u30b8\u540d\u306f\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u5909\u3048\u308b\n<jp.test.views.CheckableImageView\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:id=\"@+id/sample_image\"\n    android:background=\"@drawable/toggle_image_circle\"\n    android:src=\"@mipmap/sample_image\" />\n\n\n\u7c21\u5358\u3067\u3059\u306d\u266a\n\u3044\u308d\u3093\u306a\u30d3\u30e5\u30fc\u3067\u5b9f\u65bd\u3067\u304d\u308b\u306e\u3067\u304a\u52e7\u3081\u3067\u3059\u3002\n# \u306a\u3093\u3067\u3082Checkable\u306b\u3057\u305f\u304f\u306a\u308a\u307e\u3059\u3088\u306d\n\n\u79c1\u306f\u3001\u305f\u3068\u3048\u3070ImageView\u3084LinearLayout\u3092\u30c8\u30b0\u30eb\u30dc\u30bf\u30f3\u306b\u3057\u305f\u304f\u306a\u3063\u305f\u308a\u3057\u307e\u3059\u3002\n\n\n# Checkable\u3092\u5b9f\u88c5\u3059\u308b\n\nImageView\u3092Checkable\u306b\u3057\u3066\u3001check\u3055\u308c\u305f\u6642\u306b\u753b\u50cf\u306e\u5468\u308a\u306b\u30dc\u30fc\u30c0\u30fc\u3092\u4ed8\u3051\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\n```CheckableImageView.java\npublic class CheckableImageView extends ImageView implements Checkable {\n\n    private static final int[] CHECKED_STATE_SET = {android.R.attr.state_checked};\n    private boolean checked = false;\n\n    public CheckableImageView(Context context) {\n        super(context);\n    }\n\n    public CheckableImageView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public CheckableImageView(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n    }\n\n    @Override\n    public void setChecked(boolean checked) {\n        if (this.checked != checked) {\n            this.checked = checked;\n            refreshDrawableState();\n        }\n    }\n\n    @Override\n    public boolean isChecked() {\n        return checked;\n    }\n\n    @Override\n    public void toggle() {\n        setChecked(!checked);\n    }\n\n    @Override\n    public int[] onCreateDrawableState(int extraSpace) {\n        final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);\n        if (isChecked()) {\n            mergeDrawableStates(drawableState, CHECKED_STATE_SET);\n        }\n        return drawableState;\n    }\n}\n```\n\n\u30c1\u30a7\u30c3\u30af\u6642\u306b\u30dc\u30fc\u30c0\u30fc\u3092\u8868\u793a\u3059\u308b\u30b9\u30bf\u30a4\u30eb\u3092\u5b9a\u7fa9\nstate_checked=\"true\"\u306e\u6642\u306e\u30b9\u30bf\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```toggle_image_circle.xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<selector xmlns:android=\"http://schemas.android.com/apk/res/android\">\n    <item android:state_checked=\"true\">\n        <shape android:shape=\"oval\">\n            <size android:width=\"150dp\" android:height=\"150dp\" />\n            <stroke\n                android:width=\"5dp\"\n                android:color=\"#F0F0F0\" />\n        </shape>\n    </item>\n</selector>\n```\n\n\u3042\u3068\u306f\u3001layout\u3067\u4f7f\u3046\u3060\u3051\n\n```activity_main.xml\n# \u30d1\u30c3\u30b1\u30fc\u30b8\u540d\u306f\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u5909\u3048\u308b\n<jp.test.views.CheckableImageView\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:id=\"@+id/sample_image\"\n    android:background=\"@drawable/toggle_image_circle\"\n    android:src=\"@mipmap/sample_image\" />\n```\n\n\n\n\n\u7c21\u5358\u3067\u3059\u306d\u266a\n\n\u3044\u308d\u3093\u306a\u30d3\u30e5\u30fc\u3067\u5b9f\u65bd\u3067\u304d\u308b\u306e\u3067\u304a\u52e7\u3081\u3067\u3059\u3002\n\n", "tags": ["Android", "view"]}