{"context": "riak\u4fbf\u5229\uff01\uff01\n\u4fbf\u5229\u3060\u3051\u3069\u3001\u78ba\u8a8d\u7528\u306eriak-admin\u30b3\u30de\u30f3\u30c9\u3068\u304b\u4f7f\u3044\u65b9\u3044\u3063\u3071\u3044\u3042\u308b\u3057\u3001\ncurl\u3068\u304b\u899a\u3048\u3066\u3089\u308c\u306a\u3044\u306e\u3067\u3001\u30e6\u30fc\u30b6\u5b9a\u7fa9\u95a2\u6570\u3084Alias\u306b\u3057\u3066\u307f\u305f\u3002 \n\n\u52d5\u4f5c\u74b0\u5883\n\nOS\nCentOS release 6.2 (Final)\n\n\nriak\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n[root@rittan41 ~]# riak version                          \n2.1.1\n[root@rittan41 ~]# \n\n\n\u9762\u5012\u306a\u306e\u3067/etc/profile.d/\u914d\u4e0b\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u3063\u3066\u3001\u30ed\u30b0\u30a4\u30f3\u6642\u306b\u81ea\u52d5\u3067\u53cd\u6620\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u305f\u3002\ncat << _EOT_ >> /etc/profile.d/riak.sh\nalias riak-admin-bucket-type-list='riak-admin bucket-type list'\n\nget_buckets_list(){\ncurl \"http://localhost:8098/types/\\$1/buckets?buckets=true\"\n}\n\nput_get_check(){\nDST_HOST=localhost\nDATE=\\`date '+%Y-%m-%d %T'\\`\necho \\${DATE}\n\ncurl --connect-timeout 30 -X PUT -i \"http://\\${DST_HOST}:8098/types/health_check/buckets/test/keys/\\${DST_HOST}\" -H \"Content-Type: application/json\" -d \"{server: \"\\${DST_HOST}\", date: \\${DATE}, status: \"write\"}\"\ncurl --connect-timeout 30 -s \"http://\\${DST_HOST}:8098/types/health_check/buckets/test/keys/\\${DST_HOST}\"\n}\n\n_EOT_\n\n\n\u4f7f\u3044\u65b9\n\nriak-admin-bucket-type-list\nriak-admin bucket-type list\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u3002\nbucket-type\u4e00\u89a7\u3092\u8868\u793a\u3055\u305b\u305f\u3044\u6642\u306b\u3002\n\n\u5b9f\u4f8b\u3002\n[root@rittan41 ~]# riak-admin-bucket-type-list \ndefault (active)\nusers (active)\nhealth_check (active)\nkoizumitest (active)\n[root@rittan41 ~]# \n\n\nget_buckets_list session\n\u7b2c\u4e00\u5f15\u6570\u3067\u6307\u5b9a\u3057\u305f\u3001bucket-type\u306e\u4e2d\u8eab\u3092\u8868\u793a\u3059\u308b\u95a2\u6570\u3002\n\n\u5b9f\u4f53\u3002\ncurl \"http://localhost:8098/types/\\$1/buckets?buckets=true\"\n\n\n\u5b9f\u4f8b\u3002\n[root@rittan41 ~]# get_buckets_list session\n{\"buckets\":[\"test\"]}[root@rittan41 ~]# \n\n\nput_get_check\n\u30ed\u30fc\u30ab\u30eb\u3067\u8aad\u307f\u66f8\u304d\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306e\u95a2\u6570\u3002\n\u76e3\u8996\u7528\u9014\u306b\u3069\u3046\u305e\u3002\n\nhealth_check\u3068\u3044\u3046bucket-type\u306f\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u3002\n\n\n\u5b9f\u4f53\u3002\nput_get_check(){\nDST_HOST=localhost\nDATE=\\`date '+%Y-%m-%d %T'\\`\necho \\${DATE}\n\ncurl --connect-timeout 30 -X PUT -i \"http://\\${DST_HOST}:8098/types/health_check/buckets/test/keys/\\${DST_HOST}\" -H \"Content-Type: application/json\" -d \"{server: \"\\${DST_HOST}\", date: \\${DATE}, status: \"write\"}\"\ncurl --connect-timeout 30 -s \"http://\\${DST_HOST}:8098/types/health_check/buckets/test/keys/\\${DST_HOST}\"\n}\n\n\n\u5b9f\u4f8b\u3002\n[root@rittan41 ~]# put_get_check health_check\n2016-03-16 12:27:42\nHTTP/1.1 204 No Content\nVary: Accept-Encoding\nServer: MochiWeb/1.1 WebMachine/1.10.8 (that head fake, tho)\nDate: Wed, 16 Mar 2016 03:27:42 GMT\nContent-Type: application/json\nContent-Length: 0\n\n{server: localhost, date: 2016-03-16 12:27:42, status: write}\n[root@rittan41 ~]# \n\nriak\u4fbf\u5229\uff01\uff01\n\u4fbf\u5229\u3060\u3051\u3069\u3001\u78ba\u8a8d\u7528\u306eriak-admin\u30b3\u30de\u30f3\u30c9\u3068\u304b\u4f7f\u3044\u65b9\u3044\u3063\u3071\u3044\u3042\u308b\u3057\u3001\ncurl\u3068\u304b\u899a\u3048\u3066\u3089\u308c\u306a\u3044\u306e\u3067\u3001\u30e6\u30fc\u30b6\u5b9a\u7fa9\u95a2\u6570\u3084Alias\u306b\u3057\u3066\u307f\u305f\u3002 \n\n# \u52d5\u4f5c\u74b0\u5883\n## OS\n```\nCentOS release 6.2 (Final)\n```\n\n## riak\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n```\n[root@rittan41 ~]# riak version                          \n2.1.1\n[root@rittan41 ~]# \n```\n\n\n# \u9762\u5012\u306a\u306e\u3067/etc/profile.d/\u914d\u4e0b\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u3063\u3066\u3001\u30ed\u30b0\u30a4\u30f3\u6642\u306b\u81ea\u52d5\u3067\u53cd\u6620\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\n```bash\ncat << _EOT_ >> /etc/profile.d/riak.sh\nalias riak-admin-bucket-type-list='riak-admin bucket-type list'\n\nget_buckets_list(){\ncurl \"http://localhost:8098/types/\\$1/buckets?buckets=true\"\n}\n\nput_get_check(){\nDST_HOST=localhost\nDATE=\\`date '+%Y-%m-%d %T'\\`\necho \\${DATE}\n\ncurl --connect-timeout 30 -X PUT -i \"http://\\${DST_HOST}:8098/types/health_check/buckets/test/keys/\\${DST_HOST}\" -H \"Content-Type: application/json\" -d \"{server: \"\\${DST_HOST}\", date: \\${DATE}, status: \"write\"}\"\ncurl --connect-timeout 30 -s \"http://\\${DST_HOST}:8098/types/health_check/buckets/test/keys/\\${DST_HOST}\"\n}\n\n_EOT_\n```\n\n# \u4f7f\u3044\u65b9\n## riak-admin-bucket-type-list\nriak-admin bucket-type list\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u3002\nbucket-type\u4e00\u89a7\u3092\u8868\u793a\u3055\u305b\u305f\u3044\u6642\u306b\u3002\n\n### \u5b9f\u4f8b\u3002\n```\n[root@rittan41 ~]# riak-admin-bucket-type-list \ndefault (active)\nusers (active)\nhealth_check (active)\nkoizumitest (active)\n[root@rittan41 ~]# \n```\n\n## get_buckets_list session\n\u7b2c\u4e00\u5f15\u6570\u3067\u6307\u5b9a\u3057\u305f\u3001bucket-type\u306e\u4e2d\u8eab\u3092\u8868\u793a\u3059\u308b\u95a2\u6570\u3002\n\n### \u5b9f\u4f53\u3002\n```bash\ncurl \"http://localhost:8098/types/\\$1/buckets?buckets=true\"\n```\n\n### \u5b9f\u4f8b\u3002\n```\n[root@rittan41 ~]# get_buckets_list session\n{\"buckets\":[\"test\"]}[root@rittan41 ~]# \n```\n\n## put_get_check\n\u30ed\u30fc\u30ab\u30eb\u3067\u8aad\u307f\u66f8\u304d\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306e\u95a2\u6570\u3002\n\u76e3\u8996\u7528\u9014\u306b\u3069\u3046\u305e\u3002\n\n* health_check\u3068\u3044\u3046bucket-type\u306f\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u3002\n\n### \u5b9f\u4f53\u3002\n```bash\nput_get_check(){\nDST_HOST=localhost\nDATE=\\`date '+%Y-%m-%d %T'\\`\necho \\${DATE}\n\ncurl --connect-timeout 30 -X PUT -i \"http://\\${DST_HOST}:8098/types/health_check/buckets/test/keys/\\${DST_HOST}\" -H \"Content-Type: application/json\" -d \"{server: \"\\${DST_HOST}\", date: \\${DATE}, status: \"write\"}\"\ncurl --connect-timeout 30 -s \"http://\\${DST_HOST}:8098/types/health_check/buckets/test/keys/\\${DST_HOST}\"\n}\n```\n\n### \u5b9f\u4f8b\u3002\n```bash\n[root@rittan41 ~]# put_get_check health_check\n2016-03-16 12:27:42\nHTTP/1.1 204 No Content\nVary: Accept-Encoding\nServer: MochiWeb/1.1 WebMachine/1.10.8 (that head fake, tho)\nDate: Wed, 16 Mar 2016 03:27:42 GMT\nContent-Type: application/json\nContent-Length: 0\n\n{server: localhost, date: 2016-03-16 12:27:42, status: write}\n[root@rittan41 ~]# \n```\n", "tags": ["riak", "Bash", "CentOS"]}