{"context": " More than 1 year has passed since last update.\n\u52d5\u4f5c\u78ba\u8a8d\nC++ Builder XE4\n\n\nhttp://qiita.com/7of9/items/29f5393b523bdc9a30ba\n\u306e\u554f\u984c\u306e\u5bfe\u5fdc\n\nUnit1.cpp\n#include <IdGlobal.hpp> // IsNumeric();\n...\nvoid __fastcall TForm1::Button1Click(TObject *Sender)\n{\n    String work1 = L\"AAA_BBB_CCC_123\";\n    String suffix1 = getAutoAddedNumberSuffix(work1); // \"_123\";\n\n    String work2 = L\"AAA_BBB_CCC\";\n    String suffix2 = getAutoAddedNumberSuffix(work2); // L\"\"\n\n    String work3 = L\"AAA_BBB_CCC_NAN\";\n    String suffix3 = getAutoAddedNumberSuffix(work3); // L\"\"\n\n    String work4 = L\"AAA_BBB_CCC_\";\n    String suffix4 = getAutoAddedNumberSuffix(work4); // L\"\"\n\n    String work5 = L\"AAA_BBB_CCC_1A3\";\n    String suffix5 = getAutoAddedNumberSuffix(work5); // L\"\"\n\n    String work6 = L\"AAA_BBB_CCC_31415\";\n    String suffix6 = getAutoAddedNumberSuffix(work6); // L\"_31415\"\n\n    String work7 = L\"AAA_BBB_CCC_3141592\";\n    String suffix7 = getAutoAddedNumberSuffix(work7); // L\"\"\n}\n//---------------------------------------------------------------------------\n\nString __fastcall TForm1::getAutoAddedNumberSuffix(String srcStr)\n{\n    // 5\u6841\u307e\u3067\u3057\u304b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\n    // _\u304c\u8907\u6570\u5165\u3063\u3066\u3044\u308b\u6587\u5b57\u5217\u306b\u5bfe\u5fdc\n\n    int len = srcStr.Length();\n    static const int kToTheLast = MAXINT;\n    String work = srcStr.SubString(len - 5, kToTheLast);    // 5:5\u6841\u307e\u3067\n\n    int posUnderbar = work.Pos(L\"_\");\n    if (posUnderbar == 0) {\n        return L\"\";\n    }\n\n    String suffixNoUnderbar = work.SubString(posUnderbar + 1, kToTheLast);\n    if (IsNumeric(suffixNoUnderbar)) {\n        return L\"_\" + suffixNoUnderbar;\n    }\n\n    return L\"\";\n}\n\n\ngetAutoAddedNumberSuffix()\u3092\u4f7f\u3063\u3066\u3001\u81ea\u52d5\u4ed8\u52a0\u3055\u308c\u305fsuffix\u3092\u898b\u3064\u3051\u308b\u3002\n5\u6841\u6570\u5024\u306e\u30b5\u30d5\u30a3\u30c3\u30af\u30b9\u307e\u3067\u5bfe\u5fdc (\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30925\u6841\u5206\u4f5c\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u306a\u3044\u3060\u308d\u3046\u30022\u6841\u306f\u5fc5\u8981)\u3002\n\u53d6\u5f97\u3057\u305fsuffix\u3092\u4f7f\u3063\u3066StringReplace\u3067\u53d6\u308a\u9664\u3051\u3070\u3044\u3044\u3002\n\nUnit2.cpp\n    String numberSuffix = getAutoAddedNumberSuffix(this->Name); // \u81ea\u52d5\u4ed8\u52a0\u3055\u308c\u308b\u3082\u306e\u3002\u4f8b L\"_2\"\n    String nameNoSuffix = StringReplace(this->Name, numberSuffix, L\"\", TReplaceFlags()<<rfReplaceAll);\n\n\n```txt:\u52d5\u4f5c\u78ba\u8a8d\nC++ Builder XE4\n```\n\nhttp://qiita.com/7of9/items/29f5393b523bdc9a30ba\n\u306e\u554f\u984c\u306e\u5bfe\u5fdc\n\n\n```Unit1.cpp\n#include <IdGlobal.hpp> // IsNumeric();\n...\nvoid __fastcall TForm1::Button1Click(TObject *Sender)\n{\n\tString work1 = L\"AAA_BBB_CCC_123\";\n\tString suffix1 = getAutoAddedNumberSuffix(work1); // \"_123\";\n\n\tString work2 = L\"AAA_BBB_CCC\";\n\tString suffix2 = getAutoAddedNumberSuffix(work2); // L\"\"\n\n\tString work3 = L\"AAA_BBB_CCC_NAN\";\n\tString suffix3 = getAutoAddedNumberSuffix(work3); // L\"\"\n\n\tString work4 = L\"AAA_BBB_CCC_\";\n\tString suffix4 = getAutoAddedNumberSuffix(work4); // L\"\"\n\n\tString work5 = L\"AAA_BBB_CCC_1A3\";\n\tString suffix5 = getAutoAddedNumberSuffix(work5); // L\"\"\n\n\tString work6 = L\"AAA_BBB_CCC_31415\";\n\tString suffix6 = getAutoAddedNumberSuffix(work6); // L\"_31415\"\n\n\tString work7 = L\"AAA_BBB_CCC_3141592\";\n\tString suffix7 = getAutoAddedNumberSuffix(work7); // L\"\"\n}\n//---------------------------------------------------------------------------\n\nString __fastcall TForm1::getAutoAddedNumberSuffix(String srcStr)\n{\n\t// 5\u6841\u307e\u3067\u3057\u304b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\n\t// _\u304c\u8907\u6570\u5165\u3063\u3066\u3044\u308b\u6587\u5b57\u5217\u306b\u5bfe\u5fdc\n\n\tint len = srcStr.Length();\n\tstatic const int kToTheLast = MAXINT;\n\tString work = srcStr.SubString(len - 5, kToTheLast); \t// 5:5\u6841\u307e\u3067\n\n\tint posUnderbar = work.Pos(L\"_\");\n\tif (posUnderbar == 0) {\n\t\treturn L\"\";\n\t}\n\n\tString suffixNoUnderbar = work.SubString(posUnderbar + 1, kToTheLast);\n\tif (IsNumeric(suffixNoUnderbar)) {\n\t\treturn L\"_\" + suffixNoUnderbar;\n\t}\n\n\treturn L\"\";\n}\n```\n\n\ngetAutoAddedNumberSuffix()\u3092\u4f7f\u3063\u3066\u3001\u81ea\u52d5\u4ed8\u52a0\u3055\u308c\u305fsuffix\u3092\u898b\u3064\u3051\u308b\u3002\n5\u6841\u6570\u5024\u306e\u30b5\u30d5\u30a3\u30c3\u30af\u30b9\u307e\u3067\u5bfe\u5fdc (\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30925\u6841\u5206\u4f5c\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u306a\u3044\u3060\u308d\u3046\u3002\u001c2\u6841\u306f\u5fc5\u8981)\u3002\n\n\u53d6\u5f97\u3057\u305fsuffix\u3092\u4f7f\u3063\u3066StringReplace\u3067\u53d6\u308a\u9664\u3051\u3070\u3044\u3044\u3002\n\n```Unit2.cpp\n\tString numberSuffix = getAutoAddedNumberSuffix(this->Name); // \u81ea\u52d5\u4ed8\u52a0\u3055\u308c\u308b\u3082\u306e\u3002\u4f8b L\"_2\"\n\tString nameNoSuffix = StringReplace(this->Name, numberSuffix, L\"\", TReplaceFlags()<<rfReplaceAll);\n```\n", "tags": ["cppBuilder", "indy", "stringOperation"]}