{"tags": ["centos7", "SoftEther", "VPN"], "context": "\n\nvpn proxy\u3068\u3057\u3066\u306e\u69cb\u7bc9\u65b9\u6cd5\u3067\u3059\n\n\u524d\u6e96\u5099\nansible\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067ansible\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\nyum install -y epel-release\nyum install -y git ansible\n\n\n\u81ea\u52d5\u30d3\u30eb\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\n\nbash\ngit clone https://github.com/you21979-storage/ansible-infra\ncd ansible-infra/build\nvi hosts\n\n\n\nhosts\n[all]\n127.0.0.1\n\n\n\nbash\nansible-playbook ./softether_aesni.yml -i ./hosts --connection local\n\n\n\n\u8d77\u52d5\n/etc/init.d/vpnserver start\n\n\n\u7d42\u4e86\n/etc/init.d/vpnserver stop\n\n\n\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\nln -s /etc/init.d/vpnserver /etc/rc5.d/S99vpnserver\n\n\n\u81ea\u52d5\u30d3\u30eb\u30c9\u306e\u5185\u5bb9\n---\n- hosts: all\n  user: root\n\n  vars:\n    tmpdir: /tmp/softether\n  tasks:\n    - name: yum install\n      yum: name={{item}} state=latest\n      with_items:\n        - git\n        - gcc\n        - unzip\n        - readline-devel\n        - ncurses-devel\n        - openssl-devel\n        - libselinux-python\n    - name: git download softether\n      git: repo=https://github.com/SoftEtherVPN/SoftEtherVPN.git dest={{tmpdir}}/softether\n    - name: download intel aes-ni\n      get_url: url=http://software.intel.com/sites/default/files/article/181731/intel-aesni-sample-library-v1.2.zip dest={{tmpdir}} mode=0440\n    - name: unzip\n      command: unzip -xo {{tmpdir}}/intel-aesni-sample-library-v1.2.zip chdir={{tmpdir}}\n    - name: make\n      command: ./mk_lnx64_all.sh chdir={{tmpdir}}/Intel_AESNI_Sample_Library_v1.2\n    - name: prepare\n      command: cp intel_aes_lib/lib/x64/intel_aes64.a {{tmpdir}}/softether chdir={{tmpdir}}/Intel_AESNI_Sample_Library_v1.2\n    - name: configure\n      copy: src=templates/softether_aesni/Makefile dest={{tmpdir}}/softether\n    - name: make\n      command: make chdir={{tmpdir}}/softether\n    - name: install\n      command: make install chdir={{tmpdir}}/softether\n    - name: init script copy\n      template: src=templates/softether_aesni/init.j2 dest=/etc/init.d/{{item}} mode=0755\n      with_items:\n        - vpnserver\n        - vpnbridge\n        - vpnclient\n\n# vpn proxy\u3068\u3057\u3066\u306e\u69cb\u7bc9\u65b9\u6cd5\u3067\u3059\n\n## \u524d\u6e96\u5099\n\nansible\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067ansible\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\n\n```\nyum install -y epel-release\nyum install -y git ansible\n```\n\n## \u81ea\u52d5\u30d3\u30eb\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\n\n```:bash\ngit clone https://github.com/you21979-storage/ansible-infra\ncd ansible-infra/build\nvi hosts\n```\n\n```:hosts\n[all]\n127.0.0.1\n```\n\n```:bash\nansible-playbook ./softether_aesni.yml -i ./hosts --connection local\n```\n\n## \u8d77\u52d5\n\n```\n/etc/init.d/vpnserver start\n```\n\n## \u7d42\u4e86\n\n```\n/etc/init.d/vpnserver stop\n```\n\n## \u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n\n```\nln -s /etc/init.d/vpnserver /etc/rc5.d/S99vpnserver\n```\n\n## \u81ea\u52d5\u30d3\u30eb\u30c9\u306e\u5185\u5bb9\n\n```\n---\n- hosts: all\n  user: root\n\n  vars:\n    tmpdir: /tmp/softether\n  tasks:\n    - name: yum install\n      yum: name={{item}} state=latest\n      with_items:\n        - git\n        - gcc\n        - unzip\n        - readline-devel\n        - ncurses-devel\n        - openssl-devel\n        - libselinux-python\n    - name: git download softether\n      git: repo=https://github.com/SoftEtherVPN/SoftEtherVPN.git dest={{tmpdir}}/softether\n    - name: download intel aes-ni\n      get_url: url=http://software.intel.com/sites/default/files/article/181731/intel-aesni-sample-library-v1.2.zip dest={{tmpdir}} mode=0440\n    - name: unzip\n      command: unzip -xo {{tmpdir}}/intel-aesni-sample-library-v1.2.zip chdir={{tmpdir}}\n    - name: make\n      command: ./mk_lnx64_all.sh chdir={{tmpdir}}/Intel_AESNI_Sample_Library_v1.2\n    - name: prepare\n      command: cp intel_aes_lib/lib/x64/intel_aes64.a {{tmpdir}}/softether chdir={{tmpdir}}/Intel_AESNI_Sample_Library_v1.2\n    - name: configure\n      copy: src=templates/softether_aesni/Makefile dest={{tmpdir}}/softether\n    - name: make\n      command: make chdir={{tmpdir}}/softether\n    - name: install\n      command: make install chdir={{tmpdir}}/softether\n    - name: init script copy\n      template: src=templates/softether_aesni/init.j2 dest=/etc/init.d/{{item}} mode=0755\n      with_items:\n        - vpnserver\n        - vpnbridge\n        - vpnclient\n```\n\n\n"}