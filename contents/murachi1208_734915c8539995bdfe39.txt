{"context": " More than 1 year has passed since last update.\n\n\u3044\u307e\u3055\u3089 fluentd \u306f\u3058\u3081\u3066\u307f\u308b\uff12\n\u6700\u7d42\u7684\u306a\u69cb\u60f3\u306f\u3001\u300cfluentd + Kibana + elasticsearch + MongoDB\u300d\u306e\u843d\u3068\u3057\u3069\u3053\u308d\u3060\u3051\u3069\u3001LTSV \u3063\u3066\u3044\u3046\u30ad\u30fc\u30ef\u30fc\u30c9\u306b\u5f15\u3063\u639b\u304b\u3063\u305f\u306e\u3067\u8abf\u67fb\u3057\u3066\u307f\u305f\u3002\n\nLTSV \u3063\u3066\uff1f\nLabeled Tab-Separated Values \u3068\u3044\u3046\u30c6\u30ad\u30b9\u30c8\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u4ed5\u69d8\u3089\u3057\u3044\u3002\u767a\u60f3\u305d\u306e\u3082\u306e\u306fGood\u3060\u3068\u601d\u3044\u307e\u3059\u304c\u65e2\u5b58\u30b7\u30b9\u30c6\u30e0\u306b\u5bfe\u5fdc\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u30aa\u30c3\u30b5\u30f3\u30a8\u30f3\u30b8\u30cb\u30a2\u7fa4\u304c\u7406\u89e3\u3067\u304d\u306a\u304f\u3066\u62d2\u5426\u3059\u308b\u306b300\u70b9\uff08\u53e4\u3044\u306d\uff09\u3002\n\u3068\u5197\u8ac7\u3063\u307d\u304b\u3063\u305f\u3067\u3059\u306d\uff08\u6c57\uff09 LTSV \u306f\u53ef\u8aad\u6027\u304c\u843d\u3061\u308b\u3063\u3066\u611f\u3058\u307e\u3057\u305f\u3002\u305f\u3060\u4eba\u9593\u306e\u76ee\u304b\u3089\u898b\u3066\u306e\u53ef\u8aad\u6027\u3067\u3042\u3063\u3066\u30d7\u30ed\u30b0\u30e9\u30e0\u304b\u3089\u898b\u308c\u3070\u66f8\u5f0f\u304c\u7d71\u4e00\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u4f59\u8a08\u306a\u30ed\u30b8\u30c3\u30af\u304c\u4e0d\u8981\u306b\u306a\u308b\u306e\u3067\u826f\u3044\u50be\u5411\u3067\u3059\uff08\u3053\u3046\u3044\u3046\u3068\u3053\u3067bug\u304c\u3067\u306a\u3044\u306e\u306f\u3044\u3044\u3053\u3068\uff09\u3002\u3042\u3068\u7279\u306b\u6700\u8fd1\u52d5\u304d\u306e\u306a\u3044 ASF \u3042\u305f\u308a\u304c\u7a4d\u6975\u7684\u306b\u52d5\u304f\u3079\u304d\u3060\u3068\u601d\u3046\u306e\u3060\u3051\u3069\u30fb\u30fb\u30fb\u305d\u3053\u306f\u307e\u3042\u3044\u3044\u304b\uff57\n\nApache, nginx \u3067 LTSV\n\u3061\u3087\u3044\u3068 config \u3092\u3044\u3058\u304f\u308b\u5fc5\u8981\u304c\u3042\u308b\u3050\u3089\u3044\u3002\n\n/etc/httpd/conf/httpd.conf\nLogFormat \"domain:%V\\thost:%h\\tserver:%A\\tident:%l\\tuser:%u\\ttime:%{%d/%b/%Y:%H:%M:%S %z}t\\tmethod:%m\\tpath:%U%q\\tprotocol:%H\\tstatus:%>s\\tsize:%b\\treferer:%{Referer}i\\tagent:%{User-Agent}i\\tresponse_time:%D\\tcookie:%{cookie}i\\tset_cookie:%{Set-Cookie}o\" combined\n\n\n\n\u30fbApache\u30ed\u30b0\u3092LTSV\u5f62\u5f0f\u306b\u3059\u308b\u969b\u306e\uff12\u3064\u306e\u843d\u3068\u3057\u7a74\u3068\u5bfe\u51e6\u6cd5\uff0bApache\uff06Fluentd\u306eLTSV\u8a2d\u5b9a\u30b5\u30f3\u30d7\u30eb\n\u30fb\u30b5\u30a4\u30c8\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u3092\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u30b0\u30e9\u30d5\u8868\u793a\u3059\u308b\u65b9\u6cd5 nginx \u2192 LTSV \u2192 Fluentd(td-agent) \u2192 GrowthForecast\n\n\nfluentd \u306e\u8a2d\u5b9a\nformat ltsv \u3092\u6307\u5b9a\u3059\u308b\u3060\u3051\u3002\n\u30cf\u30de\u308b\u3068\u3053\u306f\u3001 /var/log/httpd/access_log \u30d5\u30a1\u30a4\u30eb\u3092 td-agent \u30e6\u30fc\u30b6\u3067\u53c2\u7167\u3067\u304d\u308b\u3053\u3068\u3002\u3053\u3053\u5927\u4e8b\uff57\n\ntd-agent.conf\n<source>\n  type tail\n  path /var/log/httpd/access_log\n  format ltsv\n  time_key time\n  time_format %d/%b/%Y:%H:%M:%S %z\n  tag td.apache.access\n  pos_file /var/log/td-agent/apache_access.pos\n</source>\n\n\n\n\u6b21\u306f\nmongoDB \u3092\u4f7f\u3063\u305f\u65b9\u6cd5\u3092\u52c9\u5f37\u3057\u3066\u307f\u308b\uff08\u305d\u306e\uff13\uff09\u306e\u4e88\u5b9a\u3067\u3059\uff57\n# \u3044\u307e\u3055\u3089 fluentd \u306f\u3058\u3081\u3066\u307f\u308b\uff12\n\u6700\u7d42\u7684\u306a\u69cb\u60f3\u306f\u3001\u300c[fluentd](http://www.fluentd.org/) + [Kibana](Kibana) + [elasticsearch](http://www.elasticsearch.org/) + [MongoDB](http://www.mongodb.org/)\u300d\u306e\u843d\u3068\u3057\u3069\u3053\u308d\u3060\u3051\u3069\u3001[LTSV](http://ltsv.org/) \u3063\u3066\u3044\u3046\u30ad\u30fc\u30ef\u30fc\u30c9\u306b\u5f15\u3063\u639b\u304b\u3063\u305f\u306e\u3067\u8abf\u67fb\u3057\u3066\u307f\u305f\u3002\n\n# LTSV \u3063\u3066\uff1f\nLabeled Tab-Separated Values \u3068\u3044\u3046\u30c6\u30ad\u30b9\u30c8\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u4ed5\u69d8\u3089\u3057\u3044\u3002\u767a\u60f3\u305d\u306e\u3082\u306e\u306fGood\u3060\u3068\u601d\u3044\u307e\u3059\u304c\u65e2\u5b58\u30b7\u30b9\u30c6\u30e0\u306b\u5bfe\u5fdc\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u30aa\u30c3\u30b5\u30f3\u30a8\u30f3\u30b8\u30cb\u30a2\u7fa4\u304c\u7406\u89e3\u3067\u304d\u306a\u304f\u3066\u62d2\u5426\u3059\u308b\u306b[300\u70b9](https://www.google.co.jp/webhp?sourceid=chrome-instant&ion=1&espv=2&es_th=1&ie=UTF-8#q=%E3%82%AF%E3%82%A4%E3%82%BA%E3%83%80%E3%83%BC%E3%83%93%E3%83%BC)\uff08\u53e4\u3044\u306d\uff09\u3002\n\u3068\u5197\u8ac7\u3063\u307d\u304b\u3063\u305f\u3067\u3059\u306d\uff08\u6c57\uff09 LTSV \u306f\u53ef\u8aad\u6027\u304c\u843d\u3061\u308b\u3063\u3066\u611f\u3058\u307e\u3057\u305f\u3002\u305f\u3060\u4eba\u9593\u306e\u76ee\u304b\u3089\u898b\u3066\u306e\u53ef\u8aad\u6027\u3067\u3042\u3063\u3066\u30d7\u30ed\u30b0\u30e9\u30e0\u304b\u3089\u898b\u308c\u3070\u66f8\u5f0f\u304c\u7d71\u4e00\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u4f59\u8a08\u306a\u30ed\u30b8\u30c3\u30af\u304c\u4e0d\u8981\u306b\u306a\u308b\u306e\u3067\u826f\u3044\u50be\u5411\u3067\u3059\uff08\u3053\u3046\u3044\u3046\u3068\u3053\u3067bug\u304c\u3067\u306a\u3044\u306e\u306f\u3044\u3044\u3053\u3068\uff09\u3002\u3042\u3068\u7279\u306b\u6700\u8fd1\u52d5\u304d\u306e\u306a\u3044 [ASF](Apache Software Foundation) \u3042\u305f\u308a\u304c\u7a4d\u6975\u7684\u306b\u52d5\u304f\u3079\u304d\u3060\u3068\u601d\u3046\u306e\u3060\u3051\u3069\u30fb\u30fb\u30fb\u305d\u3053\u306f\u307e\u3042\u3044\u3044\u304b\uff57\n\n# Apache, nginx \u3067 LTSV \n\u3061\u3087\u3044\u3068 config \u3092\u3044\u3058\u304f\u308b\u5fc5\u8981\u304c\u3042\u308b\u3050\u3089\u3044\u3002\n\n```/etc/httpd/conf/httpd.conf\nLogFormat \"domain:%V\\thost:%h\\tserver:%A\\tident:%l\\tuser:%u\\ttime:%{%d/%b/%Y:%H:%M:%S %z}t\\tmethod:%m\\tpath:%U%q\\tprotocol:%H\\tstatus:%>s\\tsize:%b\\treferer:%{Referer}i\\tagent:%{User-Agent}i\\tresponse_time:%D\\tcookie:%{cookie}i\\tset_cookie:%{Set-Cookie}o\" combined\n```\n\n> \u30fb[Apache\u30ed\u30b0\u3092LTSV\u5f62\u5f0f\u306b\u3059\u308b\u969b\u306e\uff12\u3064\u306e\u843d\u3068\u3057\u7a74\u3068\u5bfe\u51e6\u6cd5\uff0bApache\uff06Fluentd\u306eLTSV\u8a2d\u5b9a\u30b5\u30f3\u30d7\u30eb](http://y-ken.hatenablog.com/entry/apache-tips-ltsv-access-log)\n> \u30fb[\u30b5\u30a4\u30c8\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u3092\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u30b0\u30e9\u30d5\u8868\u793a\u3059\u308b\u65b9\u6cd5 nginx \u2192 LTSV \u2192 Fluentd(td-agent) \u2192 GrowthForecast](http://www.e-agency.co.jp/column/20130423.html)\n\n## fluentd \u306e\u8a2d\u5b9a\n```format ltsv``` \u3092\u6307\u5b9a\u3059\u308b\u3060\u3051\u3002\n\u30cf\u30de\u308b\u3068\u3053\u306f\u3001 /var/log/httpd/access_log \u30d5\u30a1\u30a4\u30eb\u3092 ```td-agent``` \u30e6\u30fc\u30b6\u3067\u53c2\u7167\u3067\u304d\u308b\u3053\u3068\u3002\u3053\u3053\u5927\u4e8b\uff57\n\n```lang:td-agent.conf\n<source>\n  type tail\n  path /var/log/httpd/access_log\n  format ltsv\n  time_key time\n  time_format %d/%b/%Y:%H:%M:%S %z\n  tag td.apache.access\n  pos_file /var/log/td-agent/apache_access.pos\n</source>\n```\n\n# \u6b21\u306f\nmongoDB \u3092\u4f7f\u3063\u305f\u65b9\u6cd5\u3092\u52c9\u5f37\u3057\u3066\u307f\u308b\uff08[\u305d\u306e\uff13](http://qiita.com/murachi1208/items/8dc03a77fdde97bb4b16)\uff09\u306e\u4e88\u5b9a\u3067\u3059\uff57\n\n", "tags": ["fluentd", "vagrant", "LTSV", "Apache", "nginx"]}