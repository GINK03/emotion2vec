{"tags": ["Linux", "Ubuntu", "crash", "debug"], "context": "\n\n\u80cc\u666f\n\u793e\u5185\u3067 Linux \u30de\u30b7\u30f3\u306e\u3068\u3042\u308b\u30c9\u30e9\u30a4\u30d0\u306e\u6319\u52d5\u304c\u304a\u304b\u3057\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u300c\u30e9\u30a4\u30d6 crash \u3067\u898b\u305f\u3044\u306a\u3041\u300d\u3063\u3066\u545f\u3044\u305f\u3089\u3001\u300c\u30af\u30e9\u30c3\u30b7\u30e5\u3063\u3066\u4f55\uff1f\u58ca\u3059\u306e\uff1f\u300d\u3068\u3044\u3046\u53cd\u5fdc\u304c\u51fa\u3066\u81ea\u5206\u3068\u3057\u3066\u306f\u30ab\u30eb\u30c1\u30e3\u30fc\u30b7\u30e7\u30c3\u30af\u3092\u53d7\u3051\u305f\u306e\u3067\u3001\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u306e\u8a71\u3092\u66f8\u3044\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\u8272\u3005\u3068\u691c\u7d22\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u3001kdump\u3067\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7 (\u4e16\u306e\u4e2d\u7684\u306b\u306f\u30af\u30e9\u30c3\u30b7\u30e5\u30c0\u30f3\u30d7\u3068\u8a00\u3046\u65b9\u304c\u591a\u3044\uff1f) \u3092\u63a1\u53d6\u3059\u308b\u8a2d\u5b9a\u30fb\u624b\u9806\u306b\u3064\u3044\u3066\u306f\u305f\u304f\u3055\u3093\u3042\u308b\u3093\u3067\u3059\u304c\u3001\u5b9f\u969b\u306b\u305d\u306e\u89e3\u6790\u3092\u3069\u3046\u3084\u308b\u306e\u304b\u3063\u3066\u8a18\u4e8b\u306f\u3042\u3093\u307e\u308a\u306a\u3044\u306a\u3041\u3068\u3002\u30d1\u30c3\u3068\u898b\u3064\u304b\u3063\u305f\u30ec\u30d9\u30eb\u3060\u3068\u3053\u3093\u306a\u611f\u3058\u3002\u82f1\u6587\u8a18\u4e8b\u3082\u63a2\u305b\u3070\u51fa\u3066\u304f\u308b\u306e\u3060\u308d\u3046\u304b\u3002\n\n\nVA Linux\u306e\u300c\u30c0\u30f3\u30d7\u89e3\u6790\u8b1b\u5ea7\u300d\u306e\u8a18\u4e8b\u306f\u7d50\u69cb\u3061\u3083\u3093\u3068\u66f8\u3044\u3066\u308b\u3002\nO'Reilly\u306e\u672c Debug Hacks -\u30c7\u30d0\u30c3\u30b0\u3092\u6975\u3081\u308b\u30c6\u30af\u30cb\u30c3\u30af&\u30c4\u30fc\u30eb \u306f\u7d50\u69cb\u30da\u30fc\u30b8\u4f7f\u3063\u3066\u8aac\u660e\u3057\u3066\u308b (\u5f79\u306b\u7acb\u3064\u304b\u3069\u3046\u304b\u306f\u8aad\u307f\u624b\u6b21\u7b2c)\u3002\n\n\u30df\u30e9\u30af\u30eb\u30fb\u30ea\u30ca\u30c3\u30af\u30b9\u306eLinux crash dump \u8aad\u307f\u65b9\u5165\u9580 (pdf) \u306b\u3082\u4e00\u901a\u308a\u66f8\u3044\u3066\u304f\u308c\u3066\u308b\u3002\n\n\u300c\u3061\u3087\u3063\u3068\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u898b\u3066\u307f\u305f\u3044\u306a\u300d\u3068\u601d\u3046\u4eba\u304c\u3044\u3066\u3082\u3001\u672c\u6c17\u3067\u898b\u308b\u4eba\u306f\u5c11\u306a\u3044\u3093\u3060\u306a\u3068\u75db\u611f\u3057\u305f\u3093\u3067\u3059\u304c\u3001\u305d\u308c\u3067\u306f\u3042\u307e\u308a\u306b\u52ff\u4f53\u7121\u3044\uff01 Linux \u30ab\u30fc\u30cd\u30eb\u306e\u6249\u3092\u958b\u304f\u7b2c\u4e00\u6b69\u304c\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u3067\u3059\u3088\uff01 (\u591a\u5206)\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u5bb6\u306b\u3042\u308b Ubuntu \u3092\u5165\u308c\u305f\u30ce\u30fc\u30c8PC\u3092\u4f7f\u3044\u306a\u304c\u3089\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u306e\u4ed5\u65b9\u30fb\u8003\u3048\u65b9\u3092\u3061\u3087\u308d\u3063\u3068\u66f8\u3044\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u307e\u3041\u3001Linux \u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u306a\u3089\u3069\u308c\u3092\u4f7f\u3063\u3066\u3082\u3055\u307b\u3069\u3084\u308b\u3053\u3068\u306b\u5909\u308f\u308a\u306f\u7121\u3044\u3067\u3057\u3087\u3046\u3002CoreOS \u3068\u304b\u306b\u306a\u308b\u3068\u307e\u305f\u5225\u3067\u3059\u304c (\u672c\u5f53\u306f\u4e00\u756a CoreOS \u3067 crash \u3057\u305f\u3044\u3051\u3069)\u3002\n\u305f\u3060\u3001\u3053\u3053\u3067\u66f8\u3051\u308b\u306e\u306f crash \u30b3\u30de\u30f3\u30c9\u3067\u4f55\u304c\u3067\u304d\u308b\u304b\u3068\u3044\u3046\u3053\u3068\u304c\u30e1\u30a4\u30f3\u306b\u306a\u308a\u307e\u3059 (\u3067\u304d\u308b\u3060\u3051\u3001crash \u5185\u306e\u30b3\u30de\u30f3\u30c9\u306e\u4f7f\u3044\u3069\u3053\u308d\u306f\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u304c\u3001\u30ab\u30fc\u30cd\u30eb\u306e\u6df1\u6df5\u3092\u8997\u304f\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u6ce8\u610f)\u3002\n\u7406\u7531\u306f\u3001\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u306b\u30bb\u30aa\u30ea\u30fc\u304c\u306a\u3044\u304b\u3089\u3067\u3059\u3002\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u306f\u3042\u308b\u77ac\u9593\u306e\u30e1\u30e2\u30ea\u30a4\u30e1\u30fc\u30b8\u3092\u5438\u3044\u51fa\u3057\u305f\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u307f\u305f\u3044\u306a\u3082\u306e\u306a\u306e\u3067\u3001\u767a\u751f\u3057\u305f\u73fe\u8c61\u306e\u524d\u5f8c\u95a2\u4fc2\u304c\u308f\u304b\u3089\u306a\u3044\u3068\u969c\u5bb3\u3092\u8ffd\u3044\u304b\u3051\u308b\u3068\u304d\u306f\u304b\u306a\u308a\u8f9b\u3044\u3093\u3067\u3059\u3002\u3060\u304b\u3089\u3001\u300c\u4f55\u304b\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u3068\u308c\u3066\u3093\u3060\u3051\u3069\u898b\u3066\u304f\u308c\u308b\uff1f\u300d\u3068\u8a00\u308f\u308c\u308b\u3068\u300c\u5acc\u3067\u3059\u300d\u3063\u3066\u8a00\u3044\u305f\u3044 (\u3067\u3082\u898b\u306a\u304d\u3083\u306a\u3089\u306a\u3044\uff08\u6ce3\uff09)\u3002\u3064\u307e\u308a\u3001\u3069\u3046\u3044\u3046\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3067\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u304c\u53d6\u308c\u305f\u306e\u304b\u8003\u616e\u3057\u306a\u304c\u3089\u4e00\u3064\u4e00\u3064\u4e2d\u8eab\u3092\u898b\u3066\u3044\u304f\u3057\u304b\u306a\u304f\u3066\u3001\u3069\u3046\u3059\u308c\u3070\u554f\u984c\u89e3\u6c7a\u3059\u308b\u304b\u306a\u3093\u3066\u66f8\u304d\u5c3d\u304f\u305b\u306a\u3044\u3093\u3067\u3059\u306d\u3002\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u3092\u628a\u63e1\u3057\u3066\u306a\u3044\u3068\u3001\u3042\u308b\uff11\u3064\u306e\u30ce\u30fc\u30c9\u3067\u8d77\u304d\u305f\u554f\u984c\u304c\u89e3\u6c7a\u3067\u304d\u306a\u3044\u3063\u3066\u3044\u3046\u3053\u3068\u3082\u3088\u304f\u3042\u308a\u307e\u3059\u3002\n\u767a\u751f\u3057\u305f\u554f\u984c\u306e\u30dd\u30a4\u30f3\u30c8\u304c\u3069\u306e\u8fba\u308a\u306b\u3042\u308b\u306e\u304b Linux \u30ab\u30fc\u30cd\u30eb\u5185\u306e\u60c5\u5831\u3092\u63a2\u308a\u5f53\u3066\u308b\u305f\u3081\u306b\u3001\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u3068\u3044\u3046\u624b\u6bb5\u3068 crash \u3068\u3044\u3046\u30c4\u30fc\u30eb\u304c\u3042\u308b\u3060\u3051\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\u3067\u3059\u304c\u3001\u5f37\u529b\u306a\u30c4\u30fc\u30eb\u3067\u3042\u308b\u3053\u3068\u306f\u9593\u9055\u3044\u3042\u308a\u307e\u305b\u3093\u3002\n\u524d\u7f6e\u304d\u304c\u9577\u304f\u306a\u308a\u307e\u3057\u305f\u304c\u3001\u4ee5\u4e0b\u306b\u8aac\u660e\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u6e96\u5099\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u3082\u306e\u306f\u4ee5\u4e0b\u306e\uff13\u3064\n1. dpkg: Debian \u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30de\u30cd\u30fc\u30b8\u30e3\n2. crash: \u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u7528\u30b3\u30de\u30f3\u30c9\n3. \u30c7\u30d0\u30c3\u30b0\u30b7\u30f3\u30dc\u30eb\u4ed8\u304d\u306e\u30ab\u30fc\u30cd\u30eb\u30a4\u30e1\u30fc\u30b8\ndpkg, crash \u306f apt-get install \u3057\u307e\u3057\u3087\u3046\u3002\u305f\u3076\u3093\u3001dpkg \u306f Ubuntu \u306b\u6700\u521d\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u308b\u306e\u3067\u3084\u3089\u306a\u304f\u3066\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001crash \u306f\u7121\u3044\u3067\u3059\u3002\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u306a\u3093\u3066\u666e\u901a\u3084\u308a\u307e\u305b\u3093\u304b\u3089\u306d\u3002\n\u30c7\u30d0\u30c3\u30b0\u30b7\u30f3\u30dc\u30eb\u4ed8\u304d\u306e\u30ab\u30fc\u30cd\u30eb\u30a4\u30e1\u30fc\u30b8\u304c\u5165\u3063\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u306f\u3001Ubuntu\u306e\u5834\u5408\u4ee5\u4e0b\u306eURI\u304b\u3089\u63a2\u3057\u3066\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308c\u3070\u3044\u3044\u306e\u304b\u306a\uff1f\nhttp://ddebs.ubuntu.com/pool/main/l/linux/\n\u81ea\u5206\u306e\u30de\u30b7\u30f3\u306e\u30ab\u30fc\u30cd\u30eb\u7248\u6570\u306f uname -a \u30b3\u30de\u30f3\u30c9\u3067\u8abf\u3079\u3066\u304a\u3044\u3066\u3001\u5bfe\u5fdc\u3059\u308bdeb\u30d1\u30c3\u30b1\u30fc\u30b8 (\u3044\u3064\u306e\u9593\u306b\u304b\u62e1\u5f35\u5b50\u304c .ddeb \u306b\u306a\u3063\u3066\u308b\u3053\u3068\u306b\u9a5a\u304d\u307e\u3057\u305f\u304c) \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\u3053\u306e\u5834\u5408\u306f linux-image-3.13.0-83-generic-dbgsym_3.13.0-83.127_i386.ddeb \u3067\u3057\u305f\u3002\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u306f\u6570\u767eMB\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u306b\u306f\u5c11\u3057\u6c17\u3092\u3064\u3051\u3066\u304f\u3060\u3055\u3044\u3002\n$ uname -a\nLinux localhost 3.13.0-83-generic #127-Ubuntu SMP Fri Mar 11 00:26:47 UTC 2016 i686 i686 i686 GNU/Linux\n\n\u4e0a\u8a18\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fdeb\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u30d5\u30a1\u30a4\u30eb\u306e\u5c55\u958b\u5834\u6240\u306f /usr/lib/debug/boot \u914d\u4e0b\u3089\u3057\u3044\u3067\u3059\u3002Debian\u7cfb\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u4ee5\u5916\u306a\u3089\u9055\u3046\u306e\u304b\u3082\u3002ELF\u5f62\u5f0f\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u3001\u3061\u3083\u3093\u3068 not stripped \u306b\u306a\u3063\u3066\u307e\u3059\u306d\u3002\u3053\u306e\u8fba\u308a\u306f gdb \u306e\u30b3\u30a2\u89e3\u6790\u3068\u540c\u3058\u3002\n$ sudo dpkg -i linux-image-3.13.0-83-generic-dbgsym_3.13.0-83.127_i386.ddeb \n\u4ee5\u524d\u306b\u672a\u9078\u629e\u306e\u30d1\u30c3\u30b1\u30fc\u30b8 linux-image-3.13.0-83-generic-dbgsym \u3092\u9078\u629e\u3057\u3066\u3044\u307e\u3059\u3002\n(\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059 ... \u73fe\u5728 709471 \u500b\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u3059\u3002)\nlinux-image-3.13.0-83-generic-dbgsym_3.13.0-83.127_i386.ddeb \u3092\u5c55\u958b\u3059\u308b\u6e96\u5099\u3092\u3057\u3066\u3044\u307e\u3059 ...\nlinux-image-3.13.0-83-generic-dbgsym (3.13.0-83.127) \u3092\u5c55\u958b\u3057\u3066\u3044\u307e\u3059...\nlinux-image-3.13.0-83-generic-dbgsym (3.13.0-83.127) \u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059 ...\n$ ls -l /usr/lib/debug/boot/\n\u5408\u8a08 195264\n-rw-r--r-- 1 root root 199947085  3\u6708 11 11:05 vmlinux-3.13.0-83-generic\n$ file /usr/lib/debug/boot/vmlinux-3.13.0-83-generic \n/usr/lib/debug/boot/vmlinux-3.13.0-83-generic: ELF 32-bit LSB  executable, Intel 80386, version 1 (SYSV), statically linked, BuildID[sha1]=87e79bf33837fa08f71042ba10696b58642b8ded, not stripped\n\n\ncrash\u306e\u8d77\u52d5\n\u57fa\u672c\u7684\u306b\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u3092\u63a1\u53d6\u3057\u3066\u304b\u3089\u89e3\u6790\u3059\u308b\u3093\u3067\u3059\u304c\u3001\u5b9f\u306f Linux \u3092\u52d5\u304b\u3057\u3066\u3044\u308b\u72b6\u614b\u306e\u30de\u30b7\u30f3\u306e\u30e1\u30e2\u30ea\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059 (\u6700\u521d\u306b\u8a00\u3063\u3066\u305f\u30e9\u30a4\u30d6 crash \u306e\u3053\u3068\u3067\u3059\u306d\uff09\u3002PC\u7acb\u3061\u4e0a\u3052\u3066\u307b\u3063\u3066\u304a\u3044\u3066\u3082\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u306a\u3093\u3066\u53d6\u308c\u306a\u3044\u306e\u3067\u3001\u30e9\u30a4\u30d6 crash \u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u901a\u5e38\u306e\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u3067\u6c17\u3092\u3064\u3051\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u306f\u3001\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u3092\u63a1\u53d6\u3057\u305f\u30de\u30b7\u30f3\u3068\u89e3\u6790\u3059\u308b\u30de\u30b7\u30f3 (crash \u30b3\u30de\u30f3\u30c9\u3092\u8d77\u52d5\u3059\u308b\u30de\u30b7\u30f3) \u306eCPU\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u540c\u3058\u306b\u3057\u306a\u3044\u3068\u30c0\u30e1\u306a\u6240\u3002crash \u30b3\u30de\u30f3\u30c9\u3092\u81ea\u5206\u3067\u30d3\u30eb\u30c9\u3059\u308b\u5834\u5408\u3082\u6ce8\u610f\u3067\u3059\u306d\u3002\u306a\u308b\u3079\u304f\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u304c\u63d0\u4f9b\u3057\u3066\u3044\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u307b\u3046\u304c\u9762\u5012\u304c\u5c11\u306a\u304f\u3066\u826f\u3044\u3067\u3057\u3087\u3046 (\u30e9\u30a4\u30d6 crash \u306f\u5f53\u7136\u305d\u306e\u30de\u30b7\u30f3\u3067\u52d5\u304b\u3059\u306e\u3067\u6c17\u306b\u3057\u306a\u304f\u3066\u826f\u3044)\u3002\ncrash \u306b\u306f\u8272\u3005\u3068\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u81ea\u5206\u304c\u3088\u304f\u4f7f\u3063\u3066\u3044\u308b\u306e\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3002\u6b63\u78ba\u306a\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u610f\u5473\u3092\u77e5\u308b\u306b\u306f\u3061\u3083\u3093\u3068 help \u3092\u898b\u3066\u304f\u3060\u3055\u3044\u3002\n$ crash -e {vi|emacs} -S System.map vmlinux [dumpfile]\n-e : crash\u4e0a\u3067\u306e\u30a8\u30c7\u30a3\u30bf\u64cd\u4f5c\u3092 vi \u5f62\u5f0f\u304b emacs \u5f62\u5f0f\u304b\u3092\u9078\u3079\u308b\u3002\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3057\u3066\u3057\u306a\u3051\u308c\u3070\u30c7\u30d5\u30a9\u30eb\u30c8\u306f vi \u5f62\u5f0f\u3068\u306a\u308b\u3002\n-S : \u30ab\u30fc\u30cd\u30eb\u304c\u4f7f\u7528\u3059\u308b\u30b7\u30f3\u30dc\u30eb\u30c6\u30fc\u30d6\u30eb\u304c\u66f8\u3044\u3066\u3042\u308b System.map \u3092\u6307\u5b9a\u3059\u308b (\u5225\u306b\u7121\u304f\u3066\u3082\u8d77\u52d5\u306f\u3067\u304d\u308b)\u3002\nvmlinux  : \u30c7\u30d0\u30c3\u30b0\u30b7\u30f3\u30dc\u30eb\u4ed8\u304d\u306e\u30ab\u30fc\u30cd\u30eb\u30a4\u30e1\u30fc\u30b8\u3002\u81ea\u4f5c\u30ab\u30fc\u30cd\u30eb\u306e\u5834\u5408\u306f\u81ea\u5206\u3067\u7528\u610f\u3059\u308b\u3002\ndumpfile : \u63a1\u53d6\u3057\u305f\u30c0\u30f3\u30d7\u30d5\u30a1\u30a4\u30eb\u3002\u3053\u308c\u3092\u6307\u5b9a\u3057\u306a\u3051\u308c\u3070\u73fe\u72b6\u306e\u30de\u30b7\u30f3\u306e\u30e1\u30e2\u30ea\u3092\u898b\u308b\u30e2\u30fc\u30c9\u3067\u8d77\u52d5 (\u30e9\u30a4\u30d6 crash) \u3059\u308b\u3002\n\n\u30e9\u30a4\u30d6 crash \u306e\u8d77\u52d5\u4f8b\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002sudo \u3092\u3064\u3051\u305f\u306e\u306f /dev/mem \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u3002\u306a\u3093\u304b /boot/System.map \u306e\u8aad\u307f\u8fbc\u307f\u304c\u3067\u304d\u3066\u306a\u3044\u306a\u3069\u306e\u30a8\u30e9\u30fc\u304c\u3044\u304f\u3064\u304b\u51fa\u3066\u307e\u3059\u304c\u3001\u653e\u3063\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002crash> \u306e\u5f8c\u306b\u7d9a\u3051\u3066\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3061\u8fbc\u3093\u3067\u3044\u3051\u3070\u3001\u30e1\u30e2\u30ea\u4e0a\u306b\u4e57\u3063\u3066\u3044\u308b\u5404\u7a2e\u60c5\u5831\u3092\u53d6\u308a\u51fa\u305b\u307e\u3059\u3002\n$ sudo crash -e emacs -S /boot/System.map-3.13.0-83-generic /usr/lib/debug/boot/vmlinux-3.13.0-83-generic \n[sudo] password for user: \ncrash: cannot open /boot/System.map\n\ncrash 7.0.3\nCopyright (C) 2002-2013  Red Hat, Inc.\nCopyright (C) 2004, 2005, 2006, 2010  IBM Corporation\nCopyright (C) 1999-2006  Hewlett-Packard Co\nCopyright (C) 2005, 2006, 2011, 2012  Fujitsu Limited\nCopyright (C) 2006, 2007  VA Linux Systems Japan K.K.\nCopyright (C) 2005, 2011  NEC Corporation\nCopyright (C) 1999, 2002, 2007  Silicon Graphics, Inc.\nCopyright (C) 1999, 2000, 2001, 2002  Mission Critical Linux, Inc.\nThis program is free software, covered by the GNU General Public License,\nand you are welcome to change it and/or distribute copies of it under\ncertain conditions.  Enter \"help copying\" to see the conditions.\nThis program has absolutely no warranty.  Enter \"help warranty\" for details.\n\nGNU gdb (GDB) 7.6\nCopyright (C) 2013 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"i686-pc-linux-gnu\"...\n\ncrash: read error: kernel virtual address: c1673080  type: \"cpu_possible_mask\"\n\ncrash: this kernel may be configured with CONFIG_STRICT_DEVMEM, which\n       renders /dev/mem unusable as a live memory source.\n\ncrash: trying /proc/kcore as an alternative to /dev/mem\n\n  SYSTEM MAP: /boot/System.map-3.13.0-83-generic\nDEBUG KERNEL: /usr/lib/debug/boot/vmlinux-3.13.0-83-generic (3.13.0-83-generic)\n    DUMPFILE: /proc/kcore\n        CPUS: 4\n        DATE: Sat Apr 23 13:27:44 2016\n      UPTIME: 03:25:32\nLOAD AVERAGE: 0.17, 0.16, 0.31\n       TASKS: 459\n    NODENAME: titan\n     RELEASE: 3.13.0-83-generic\n     VERSION: #127-Ubuntu SMP Fri Mar 11 00:26:47 UTC 2016\n     MACHINE: i686  (2594 Mhz)\n      MEMORY: 3.7 GB\n         PID: 5851\n     COMMAND: \"crash\"\n        TASK: ed136800  [THREAD_INFO: f372c000]\n         CPU: 3\n       STATE: TASK_RUNNING (ACTIVE)\n\ncrash> \n\n\u6700\u521d\u306b\u8868\u793a\u3055\u308c\u308b\u60c5\u5831\u3067\u3001\u30d1\u30cb\u30c3\u30af\u767a\u751f\u6642\u523b (DATE)\u3001\u3069\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u3069\u306eCPU\u3067\u30d1\u30cb\u30c3\u30af\u51e6\u7406\u3057\u305f\u306e\u304b (PID, COMMAND, TASK, CPU)\u3001\u30d1\u30cb\u30c3\u30af\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002\u4eca\u56de\u306f\u30e9\u30a4\u30d6 crash \u306a\u306e\u3067\u30d1\u30cb\u30c3\u30af\u30e1\u30c3\u30bb\u30fc\u30b8\u7121\u3044\u3067\u3059\u306d\u3002\u305d\u306e\u4ed6\u306f\u30de\u30b7\u30f3\u60c5\u5831\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\ncrash\u306e\u64cd\u4f5c\n\u3061\u3087\u308d\u3063\u3068\u66f8\u304f\u3068\u304b\u8a00\u3044\u306a\u304c\u3089\u3081\u3061\u3083\u304f\u3061\u3083\u9577\u304f\u306a\u3063\u3066\u307e\u3059\u304c\u3001\u3053\u3063\u304b\u3089\u304c\u672c\u756a\u3067\u3059 (\u6025\u907d\u3001\u30bf\u30a4\u30c8\u30eb\u306b\u300c\u305d\u306e1\u300d\u3068\u3064\u3051\u305f)\u3002\u9593\u9055\u3063\u305f\u3053\u3068\u66f8\u3044\u3066\u305f\u308a\u4ed6\u306b\u3082\u3053\u3046\u3044\u3046\u4f7f\u3044\u65b9\u3042\u308b\u3088\u3001\u3063\u3066\u3042\u308c\u3070\u662f\u975e\u6559\u3048\u3066\u3044\u305f\u3060\u304d\u305f\u3044\u3067\u3059\u3002\n\ncrash> help\n\u3068\u308a\u3042\u3048\u305a\u3001\u30d8\u30eb\u30d7\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u4f7f\u3048\u308b\u30b3\u30de\u30f3\u30c9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\ncrash> help\n\n*              files          mach           repeat         timer          \nalias          foreach        mod            runq           tree           \nascii          fuser          mount          search         union          \nbt             gdb            net            set            vm             \nbtop           help           p              sig            vtop           \ndev            ipcs           ps             struct         waitq          \ndis            irq            pte            swap           whatis         \neval           kmem           ptob           sym            wr             \nexit           list           ptov           sys            q              \nextend         log            rd             task           \n\ncrash version: 7.0.3    gdb version: 7.6\nFor help on any command above, enter \"help <command>\".\nFor help on input options, enter \"help input\".\nFor help on output options, enter \"help output\".\n\n\n\u4ed6\u306b\u3082\u5404\u30b3\u30de\u30f3\u30c9\u306b\u5bfe\u3057\u3066\u30d8\u30eb\u30d7\u3092\u898b\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u901a\u308a\u3002\nbt \u306f\u6700\u3082\u3088\u304f\u4f7f\u3046\u30b3\u30de\u30f3\u30c9\u3067\u3001\u30d0\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u3092\u8868\u793a\u3057\u3066\u304f\u308c\u308b\u3084\u3064\u3067\u3059\u306d\u3002\u5f8c\u3067\u8aac\u660e\u3057\u307e\u3059\u3002\n\u8868\u793a\u3059\u308b\u60c5\u5831\u304c\u9577\u3044\u3068 more \u30b3\u30de\u30f3\u30c9\u3067\u30d1\u30a4\u30d7\u3057\u3066\u304f\u308c\u3066\u308b\u306e\u304b\u3001\u826f\u3044\u611f\u3058\u3067\u898b\u308c\u307e\u3059\u3002more \u304c\u5acc\u3060\u3063\u3066\u3044\u3046\u4eba\u306f\u3001\u81ea\u5206\u3067 less \u3092\u30d1\u30a4\u30d7\u3057\u3066\u3042\u3052\u307e\u3057\u3087\u3046\u3002crash \u5185\u3067\u3082\u3001\u30b7\u30a7\u30eb\u4e0a\u3067\u4f7f\u3048\u308b\u30b3\u30de\u30f3\u30c9\u304c\u7d50\u69cb\u4f7f\u3048\u308b\u306e\u3067\u3001\u8272\u3005\u8a66\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044 (\u4f7f\u3048\u308b\u4f7f\u3048\u306a\u3044\u306e\u5206\u304b\u308c\u9053\u304c\u672a\u3060\u306b\u308f\u304b\u3093\u306a\u3044\u3051\u3069)\u3002\ncrash> help bt\nNAME\n  bt - backtrace\n\nSYNOPSIS\n  bt [-a|-g|-r|-t|-T|-l|-e|-E|-f|-F|-o|-O] [-R ref] [-s [-x|d]] [-I ip] [-S sp]\n     [pid | task]\n\nDESCRIPTION\n  Display a kernel stack backtrace.  If no arguments are given, the stack\n  trace of the current context will be displayed.\n\n       -a  displays the stack traces of the active task on each CPU.\n\u30fb\u30fb\u30fb\uff08\u7701\u7565\uff09\u30fb\u30fb\u30fb\n -- MORE --  forward: <SPACE>, <ENTER> or j  backward: b or k  quit: q\n\ncrash> help bt | less\n\u3053\u306e\u5834\u5408\u306f\u3001less \u3067\u898b\u305f\u611f\u3058\u3067\u30d8\u30eb\u30d7\u304c\u898b\u308c\u308b\u3002\n\n\ncrash> sys\nsys \u306f crash \u8d77\u52d5\u6642\u306b\u8868\u793a\u3057\u305f\u60c5\u5831\u3092\u51fa\u3057\u3066\u304f\u308c\u307e\u3059\u3002\u3069\u3046\u3084\u3089\u30ab\u30fc\u30cd\u30eb\u30b3\u30f3\u30d5\u30a3\u30b0\u8a2d\u5b9a\u3082\u898b\u308c\u308b\u3089\u3057\u3044\u306e\u3067\u3059\u304c\u3001\u81ea\u5206\u306ePC\u3060\u3068\u306a\u305c\u304b\u898b\u308c\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u5f8c\u3067\u3061\u3083\u3093\u3068\u8abf\u3079\u306a\u3044\u3068\u306a\u3002\ncrash> sys\n  SYSTEM MAP: /boot/System.map-3.13.0-83-generic\nDEBUG KERNEL: /usr/lib/debug/boot/vmlinux-3.13.0-83-generic (3.13.0-83-generic)\n    DUMPFILE: /proc/kcore\n        CPUS: 4\n        DATE: Sun Apr 24 00:17:36 2016\n      UPTIME: 04:53:47\nLOAD AVERAGE: 0.21, 0.18, 0.25\n       TASKS: 491\n    NODENAME: titan\n     RELEASE: 3.13.0-83-generic\n     VERSION: #127-Ubuntu SMP Fri Mar 11 00:26:47 UTC 2016\n     MACHINE: i686  (2594 Mhz)\n      MEMORY: 3.7 GB\ncrash> \n\ncrash> sys config\nsys: kernel_config_data does not exist in this kernel\n\ncrash \u8d77\u52d5\u6642\u306b\u5206\u304b\u308b\u60c5\u5831\u3068\u540c\u3058\u306a\u306e\u3067\u3001\u3053\u308c\u3067\u4f55\u304b\u65b0\u3057\u3044\u60c5\u5831\u304c\u5206\u304b\u308b\u3068\u3044\u3046\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u5fd8\u308c\u305f\u9803\u306b\u30bf\u30b9\u30af\u6570 (TASKS), CPU\u8ca0\u8377 (LOAD AVERAGE) \u3068\u304b\u8d77\u52d5\u6642\u9593 (UPTIME) \u898b\u306a\u304c\u3089\u3001\u300c\u3084\u3063\u3071\u308a\u30bf\u30b9\u30af\u6570/\u8ca0\u8377\u304c\u7570\u5e38\u3058\u3083\u306d\uff1f\u300d\u3068\u304b\u300c\u8d77\u52d5\u6642\u9593\u304c\u77ed/\u9577\u904e\u304e\u306a\u3044\uff1f\u300d\u3068\u304b\u307f\u3066\u554f\u984c\u5207\u308a\u5206\u3051\u306e\u5224\u65ad\u30fb\u78ba\u8a8d\u3067\u4f7f\u3046\u3050\u3089\u3044\u3067\u3059\u3002\n\u305f\u304f\u3055\u3093\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u304c\u53d6\u308c\u308b\u3046\u3061\u306b\u3001\u300c\u30de\u30b7\u30f3\u8d77\u52d5\u304b\u3089\u3042\u308b\u4e00\u5b9a\u306e\u6642\u9593\u304c\u7d4c\u3064\u3068\u30d1\u30cb\u30c3\u30af\u3057\u3066\u308b\u3093\u3060\u306a\u300d\u3068\u304b\u4ed6\u306e\u60c5\u5831\u304c\u96c6\u3081\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3068\u3001\u65b0\u305f\u306a\u89b3\u70b9\u3067\u30c0\u30f3\u30d7\u8abf\u67fb\u304c\u9032\u3093\u3060\u308a\u3082\u3057\u307e\u3059\u3002\n\ncrash> bt\nbt \u306f\u30d0\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u3092\u898b\u308b\u30b3\u30de\u30f3\u30c9\u3067\u3001\u5f53\u7136\u4f7f\u3046\u5834\u9762\u304c\u4e00\u756a\u591a\u3044\u3002\u30d0\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u304c\u898b\u308c\u308b\u3068\u8a00\u3063\u3066\u3082\u30ab\u30fc\u30cd\u30eb\u5185\u306e\u30b7\u30fc\u30b1\u30f3\u30b9\u3060\u3051\u3067\u3001\u30e6\u30fc\u30b6\u30b9\u30bf\u30c3\u30af\u3092\u8868\u793a\u3057\u3066\u304f\u308c\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3067\u3059\u3002\u30d7\u30ed\u30bb\u30b9ID (PID) \u3092\u5f15\u6570\u306b\u6307\u5b9a\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3057\u3066\u304f\u308c\u307e\u3059\u3002\ncrash> bt 1\nPID: 1      TASK: f34d0000  CPU: 3   COMMAND: \"init\"\n #0 [f349fa28] __schedule at c165d593\n #1 [f349faac] schedule at c165d9de\n #2 [f349fab4] schedule_hrtimeout_range_clock at c165d0e0\n #3 [f349fb28] schedule_hrtimeout_range at c165d112\n #4 [f349fb34] poll_schedule_timeout at c118c022\n #5 [f349fb48] do_select at c118c8dd\n #6 [f349fe40] core_sys_select at c118cbd9\n #7 [f349ff78] sys_select at c118cd74\n #8 [f349ffb0] ia32_sysenter_target at c16681c6\n    EAX: 0000008e  EBX: 0000001d  ECX: bf98d3b0  EDX: bf98d430 \n    DS:  007b      ESI: bf98d4b0  ES:  007b      EDI: 00000000\n    SS:  007b      ESP: bf98d340  EBP: b77670e8  GS:  0033\n    CS:  0073      EIP: b7793428  ERR: 0000008e  EFLAGS: 00000246 \n\nTASK \u306f struct task_struct \u306e\u5148\u982d\u30a2\u30c9\u30ec\u30b9\u3001CPU \u306f\u305d\u306e\u30d7\u30ed\u30bb\u30b9 (Linux \u30ab\u30fc\u30cd\u30eb\u5185\u3067\u306f\u30d7\u30ed\u30bb\u30b9\u3082\u30b9\u30ec\u30c3\u30c9\u3082\u5168\u90e8\u30bf\u30b9\u30af\u3068\u3057\u3066\u6271\u3046\u304b\u3089\u3001\u30bf\u30b9\u30af\u3068\u8a00\u3046\u65b9\u304c\u6b63\u3057\u305d\u3046) \u304c\u52d5\u304f (\u4e88\u5b9a\u306e) CPU\u756a\u53f7\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002\u95a2\u6570\u540d at \u306b\u7d9a\u304f16\u9032\u6570\u306e\u30a2\u30c9\u30ec\u30b9\u306f\u3001\u6b21\u306e\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u30a2\u30c9\u30ec\u30b9\u3001\u3064\u307e\u308a\u3001\u547c\u3073\u51fa\u3055\u308c\u305f\u5074\u306b\u3068\u3063\u3066\u306e\u30ea\u30bf\u30fc\u30f3\u30a2\u30c9\u30ec\u30b9\u3068\u306a\u308a\u307e\u3059\u3002\nPID=1\u306b\u306finit\u30d7\u30ed\u30bb\u30b9\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u306e\u30d0\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u304c\u51fa\u3066\u307e\u3059\u306d\u3002#0 \u304c\u4e00\u756a\u6700\u5f8c\u306e\u547c\u3073\u51fa\u3057\u305f\u95a2\u6570\u3067\u3001\u6570\u5b57\u304c\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3059\u308b\u307b\u3069\u524d\u306b\u547c\u3073\u51fa\u3057\u305f\u95a2\u6570\u306b\u306a\u3063\u3066\u307e\u3059\u3002\u4e0a\u8a18\u3060\u3068\u3001\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u3067\u3042\u308b ia32_sysenter_target \u304c\u547c\u3073\u51fa\u3055\u308c\u3066 select \u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb (\u30ab\u30fc\u30cd\u30eb\u5185\u306e\u95a2\u6570\u3067\u306f sys_select) \u3092\u547c\u3073\u51fa\u3057\u305f\u5ef6\u9577\u3067\u30b9\u30ea\u30fc\u30d7\u306b\u5165\u3063\u305f (schedule \u95a2\u6570\u306b\u5165\u3063\u3066\u30bf\u30b9\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u5f85\u3061) \u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u4e00\u756a\u4e0b\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u30ec\u30b8\u30b9\u30bf\u9054\u306f\u3001\u305f\u3076\u3093 (\u5272\u308a\u8fbc\u307f) \u30b9\u30bf\u30c3\u30af\u3068\u3057\u3066\u7a4d\u307e\u308c\u305f\u5024\u3067\u3059\u304b\u306d (\u6700\u8fd1\u306ex86\u306e\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u547c\u3073\u51fa\u3057\u306f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u5272\u308a\u8fbc\u307f\u3058\u3083\u306a\u304f\u306a\u3063\u3066\u3093\u3060\u3088\u306a\u3041\u3001\u3061\u3083\u3093\u3068x86\u306e\u30a2\u30fc\u30ad\u4ed5\u69d8\u3082\u52c9\u5f37\u3057\u306a\u3044\u3068(\u6c57))\u3002\n\u30d0\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u306e\u95a2\u6570\u547c\u3073\u51fa\u3057\u6bce\u306e\u30b9\u30bf\u30c3\u30af\u60c5\u5831\u3092\u898b\u305f\u3044\u3068\u304b\u3001\u751f\u60c5\u5831\u3092\u898b\u305f\u3044\u3068\u304d\u306f -f/-r \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3044\u307e\u3059\u3002\u95a2\u6570\u547c\u3073\u51fa\u3057\u3067\u672c\u5f53\u306b\u6b63\u3057\u3044\u5f15\u6570\u304c\u5165\u3063\u3066\u305f\u306e\u304b\u8abf\u3079\u305f\u308a\u3001\u30b9\u30bf\u30c3\u30af\u7834\u58ca\u8d77\u304d\u3066\u306a\u3044\u304b\u3092\u8abf\u3079\u308b\u3068\u304d\u306b\u4f7f\u3063\u3066\u307e\u3059\u3002\u3069\u306e\u30a2\u30c9\u30ec\u30b9\u304c\u5f15\u6570\u306a\u3093\u3060\u3001\u307f\u305f\u3044\u306a\u3053\u3068\u306f\u307e\u305f\u4eca\u5ea6\u3002\ncrash> bt -f 1\nPID: 1      TASK: f34d0000  CPU: 2   COMMAND: \"init\"\n #0 [f349fa28] __schedule at c165d593\n    [RA: c165d9e3  SP: f349fa28  FP: f349faac  SIZE: 136]\n    f349fa28: f349faa8  00000082  c1086a5d  f7bae370  \n    f349fa38: 00000000  c1a9e300  a3031702  00001676  \n    f349fa48: c1a9e300  f2fa9a00  f34d0000  f7ba0300  \n    f349fa58: 00000000  00000000  00000000  00001648  \n    f349fa68: 0000c000  00000000  0337f980  00000000  \n    f349fa78: 0337f980  00000000  f6803800  00001649  \n    f349fa88: ffffffff  ffffffff  f7bae348  f7bae348  \n    f349fa98: 00000000  00000000  00000000  00000000  \n    f349faa8: f349fab0  c165d9e3  \n #1 [f349faac] schedule at c165d9de\n    [RA: c165d0e5  SP: f349fab0  FP: f349fab4  SIZE: 8]\n    f349fab0: f349fb24  c165d0e5  \n #2 [f349fab4] schedule_hrtimeout_range_clock at c165d0e0\n    [RA: c165d117  SP: f349fab8  FP: f349fb28  SIZE: 116]\n    f349fab8: ee0e2200  eb780d00  f349fae4  c108a898  \n    f349fac8: f7bae300  00000000  00000246  ee242b78  \n    f349fad8: 00000246  ee242b78  f349faf4  c1091535  \n    f349fae8: f36966c0  ee242b78  00000000  f349fb0c  \n    f349faf8: c118bf9c  f349fb04  c13d54b9  f349fb0c  \n    f349fb08: c13d15f4  f349fb28  c13cf7d9  e54116af  \n    f349fb18: f349fbd4  f34d0000  00000000  f349fb30  \n    f349fb28: c165d117  \n\u30fb\u30fb\u30fb\uff08\u7701\u7565\uff09\u30fb\u30fb\u30fb\n\ncrash> bt -r 1\nPID: 1      TASK: f34d0000  CPU: 2   COMMAND: \"init\"\nf349e000:  f34d0000 default_exec_domain 00000000 00000000 \nf349e010:  00000002 80000000 c0000000 do_no_restart_syscall \nf349e020:  00000000 00000000 00000000 00000000 \nf349e030:  00000000 00000000 00000000 b7793428 \nf349e040:  00000000 00000000 57ac6e9d 4c331e87 \nf349e050:  507d71f1 c4d848bb 676ea14f 31ea2466 \nf349e060:  25e3b88c 34efdb94 991c81da d34e157f \nf349e070:  dba691f4 2c137e8f 7890f4f3 ddb9bea1 \n\u30fb\u30fb\u30fb\uff08\u7701\u7565\uff09\u30fb\u30fb\u30fb\nf349ff70:  bf98d4b0 f349ffac sys_select+137 bf98d4b0 \nf349ff80:  00000000 0000001d bf98d3b0 bf98d430 \nf349ff90:  __close_fd+119 f34e0040 00000010 bf98d030 \nf349ffa0:  0000001d bf98d4b0 00000000 f349e000 \nf349ffb0:  sysenter_after_call 0000001d bf98d3b0 bf98d430 \nf349ffc0:  bf98d4b0 00000000 b77670e8 0000008e \nf349ffd0:  0000007b 0000007b 00000000 00000033 \nf349ffe0:  0000008e b7793428 00000073 00000246 \nf349fff0:  bf98d340 0000007b 8441e759 ad0bb5cd \n\nbt -r \u3067\u8868\u793a\u3057\u305f\u60c5\u5831\u304b\u3089\u9762\u767d\u3044\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u8868\u793a\u3055\u308c\u305f\u30b9\u30bf\u30c3\u30af\u306e\u958b\u59cb\u30a2\u30c9\u30ec\u30b9\u304c 0xf349e000 \u3067\u3001\u7d42\u4e86\u304c 0x349fff0 + 0x10 = 0x34a0000 \u3068\u306a\u3063\u3066\u3066\u3001\u3061\u3087\u3046\u3069 8KiB \u30b5\u30a4\u30ba\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u306a\u3093\u3067\u3060\u3068\u3002\n\u6b63\u89e3\u304b\u3089\u8a00\u3046\u3068\u3001Linux2.6\u7cfb\u306etask_struct\u3068\u30ab\u30fc\u30cd\u30eb\u30b9\u30bf\u30c3\u30af\u306e\u914d\u7f6e\u304c\u3053\u3046\u3044\u3046\u4f5c\u308a\u306b\u306a\u3063\u3066\u308b\u304b\u3089\u306a\u3093\u3067\u3059\u304c\u3001\u300c\u304a\u3049\u301c\u3001Linux-3.13 \u3067\u30822.6\u7cfb\u306e\u4f5c\u308a\u304c\u6b8b\u3063\u3066\u308b\u3093\u3060\uff01 \u3044\u3044\u8a2d\u8a08(?)\u306a\u3093\u3060\u306a\u3002\u300d\u3068\u306a\u3093\u3068\u306a\u304f\u601d\u3046\u308f\u3051\u3067\u3059\u3002\n\u3061\u306a\u307f\u306b\u3001\u5f8c\u3067\u8aac\u660e\u3059\u308b\u30b3\u30de\u30f3\u30c9 task \u3092\u4f7f\u3046\u3068\u3001\u3042\u308b\u30bf\u30b9\u30af\u306e\u30ab\u30fc\u30cd\u30eb\u30b9\u30bf\u30c3\u30af\u958b\u59cb\u4f4d\u7f6e\u306f\u3059\u3050\u308f\u304b\u308a\u307e\u3059\u3002\ntask_struct \u69cb\u9020\u4f53\u306e\u30e1\u30f3\u30d0\u5909\u6570 stack \u3067\u3059\u306d\u3002\u3061\u3083\u3093\u3068\u30010xf349e000 \u306b\u306a\u3063\u3066\u307e\u3059\u3002\ncrash> task 1 | head\nPID: 1      TASK: f34d0000  CPU: 0   COMMAND: \"init\"\nstruct task_struct {\n  state = 1, \n  stack = 0xf349e000, \n  usage = {\n    counter = 2\n  }, \n  flags = 4219136, \n  ptrace = 0, \n  wake_entry = {\ncrash> \n\nstack \u304c thread_info \u69cb\u9020\u4f53\u306e\u958b\u59cb\u30a2\u30c9\u30ec\u30b9\u306a\u306e\u3067\u3001struct \u30b3\u30de\u30f3\u30c9\u3067\u4e2d\u8eab\u304c\u898b\u308c\u307e\u3059\u3002\u5f53\u7136\u3067\u3059\u304c\u3001bt -r \u3067\u78ba\u8a8d\u3057\u305f\u751f\u306e\u30b9\u30bf\u30c3\u30af\u60c5\u5831\u3068\u4e00\u81f4\u3057\u3066\u307e\u3059\u3002\ncrash> struct thread_info 0xf349e000 | cat\nstruct thread_info {\n  task = 0xf34d0000, \n  exec_domain = 0xc193c980 <default_exec_domain>, \n  flags = 0, \n  status = 0, \n  cpu = 0, \n  saved_preempt_count = -2147483648, \n  addr_limit = {\n    seg = 3221225472\n  }, \n  restart_block = {\n    fn = 0xc1067ce0 <do_no_restart_syscall>, \n    {\n      futex = {\n        uaddr = 0x0, \n        val = 0, \n        flags = 0, \n        bitset = 0, \n        time = 0, \n        uaddr2 = 0x0\n      }, \n      nanosleep = {\n        clockid = 0, \n        rmtp = 0x0, \n        expires = 0\n      }, \n      poll = {\n        ufds = 0x0, \n        nfds = 0, \n        has_timeout = 0, \n        tv_sec = 0, \n        tv_nsec = 0\n      }\n    }\n  }, \n  sysenter_return = 0xb7793428, \n  previous_esp = 0, \n  supervisor_stack = 0xf349e044 \"\", \n  sig_on_uaccess_error = 0, \n  uaccess_err = 0\n}\ncrash> \n\n\u3053\u308c\u3067\u3001\u30ab\u30fc\u30cd\u30eb\u30b9\u30bf\u30c3\u30af\u304c\u7570\u5e38\u306b\u4f38\u3073\u305f\u3089 thread_info \u69cb\u9020\u4f53\u306e\u60c5\u5831\u3092\u3064\u3076\u3059\u306a\u3068\u304b\u3001\u30b9\u30bf\u30c3\u30af\u304c 4KiB \u3058\u3083\u30b9\u30bf\u30c3\u30af\u8db3\u3089\u306a\u3044\u5834\u5408\u304c\u591a\u304f\u3066 8KiB \u3067\u3044\u3053\u3046\u3001\u3063\u3066\u3053\u3068\u306b\u306a\u3063\u305f\u3093\u3058\u3083\u306a\u3044\u304b\u3068\u3044\u3046\u8a2d\u8a08\u306e\u5909\u9077\u3082\u601d\u3044\u5de1\u3089\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u308f\u3051\u3067\u3059\u306d (\u6b63\u3057\u3044\u63a8\u6e2c\u306a\u306e\u304b\u306f\u4e0d\u660e)\u3002\nbt \u30b3\u30de\u30f3\u30c9\u306f\u3082\u3063\u3068\u305f\u304f\u3055\u3093\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308b\u3093\u3067\u3059\u304c\u3001\u4ed6\u306f\u305d\u3093\u306a\u306b\u4f7f\u3063\u305f\u8a18\u61b6\u304c\u306a\u3044\u306e\u3067\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u95a2\u4fc2\u3068\u30b9\u30bf\u30c3\u30af\u60c5\u5831\u3055\u3048\u898b\u308c\u308c\u3070\u3044\u3044\u306e\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\n\u3053\u3093\u306a\u611f\u3058\u3067\u3001crash \u30b3\u30de\u30f3\u30c9\u304c\u3067\u304d\u308b\u3053\u3068\u304b\u3089\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u3059\u308b\u6642\u306e\u8003\u3048\u65b9 (\u5b8c\u5168\u306b\u500b\u4eba\u7684\u306a\u898b\u89e3\u3067\u306f\u3042\u308a\u307e\u3059\u304c) \u306a\u3069\u3092\u66f8\u3044\u3066\u3044\u3051\u308c\u3070\u306a\u3068\u601d\u3044\u307e\u3059\u3002\n\u30fb\u30fb\u30fb\u3053\u308c\u3001\u3044\u3064\u5b8c\u7d50\u3059\u308b\u3093\u3060\u308d\u3002\n#\u80cc\u666f\n\u793e\u5185\u3067 Linux \u30de\u30b7\u30f3\u306e\u3068\u3042\u308b\u30c9\u30e9\u30a4\u30d0\u306e\u6319\u52d5\u304c\u304a\u304b\u3057\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u300c\u30e9\u30a4\u30d6 crash \u3067\u898b\u305f\u3044\u306a\u3041\u300d\u3063\u3066\u545f\u3044\u305f\u3089\u3001\u300c\u30af\u30e9\u30c3\u30b7\u30e5\u3063\u3066\u4f55\uff1f\u58ca\u3059\u306e\uff1f\u300d\u3068\u3044\u3046\u53cd\u5fdc\u304c\u51fa\u3066\u81ea\u5206\u3068\u3057\u3066\u306f\u30ab\u30eb\u30c1\u30e3\u30fc\u30b7\u30e7\u30c3\u30af\u3092\u53d7\u3051\u305f\u306e\u3067\u3001\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u306e\u8a71\u3092\u66f8\u3044\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\n\u8272\u3005\u3068\u691c\u7d22\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u3001kdump\u3067\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7 (\u4e16\u306e\u4e2d\u7684\u306b\u306f\u30af\u30e9\u30c3\u30b7\u30e5\u30c0\u30f3\u30d7\u3068\u8a00\u3046\u65b9\u304c\u591a\u3044\uff1f) \u3092\u63a1\u53d6\u3059\u308b\u8a2d\u5b9a\u30fb\u624b\u9806\u306b\u3064\u3044\u3066\u306f\u305f\u304f\u3055\u3093\u3042\u308b\u3093\u3067\u3059\u304c\u3001\u5b9f\u969b\u306b\u305d\u306e\u89e3\u6790\u3092\u3069\u3046\u3084\u308b\u306e\u304b\u3063\u3066\u8a18\u4e8b\u306f\u3042\u3093\u307e\u308a\u306a\u3044\u306a\u3041\u3068\u3002\u30d1\u30c3\u3068\u898b\u3064\u304b\u3063\u305f\u30ec\u30d9\u30eb\u3060\u3068\u3053\u3093\u306a\u611f\u3058\u3002\u82f1\u6587\u8a18\u4e8b\u3082\u63a2\u305b\u3070\u51fa\u3066\u304f\u308b\u306e\u3060\u308d\u3046\u304b\u3002\n\n- [VA Linux\u306e\u300c\u30c0\u30f3\u30d7\u89e3\u6790\u8b1b\u5ea7\u300d\u306e\u8a18\u4e8b](http://www.valinux.co.jp/technologylibrary/document/linuxkernel/dump0001/)\u306f\u7d50\u69cb\u3061\u3083\u3093\u3068\u66f8\u3044\u3066\u308b\u3002\n- O'Reilly\u306e\u672c [Debug Hacks -\u30c7\u30d0\u30c3\u30b0\u3092\u6975\u3081\u308b\u30c6\u30af\u30cb\u30c3\u30af&\u30c4\u30fc\u30eb](http://www.amazon.co.jp/Debug-Hacks-%E3%83%87%E3%83%90%E3%83%83%E3%82%B0%E3%82%92%E6%A5%B5%E3%82%81%E3%82%8B%E3%83%86%E3%82%AF%E3%83%8B%E3%83%83%E3%82%AF-%E3%83%84%E3%83%BC%E3%83%AB-%E5%90%89%E5%B2%A1/dp/4873114047) \u306f\u7d50\u69cb\u30da\u30fc\u30b8\u4f7f\u3063\u3066\u8aac\u660e\u3057\u3066\u308b (\u5f79\u306b\u7acb\u3064\u304b\u3069\u3046\u304b\u306f\u8aad\u307f\u624b\u6b21\u7b2c)\u3002\n- [\u30df\u30e9\u30af\u30eb\u30fb\u30ea\u30ca\u30c3\u30af\u30b9\u306eLinux crash dump \u8aad\u307f\u65b9\u5165\u9580 (pdf)](https://users.miraclelinux.com/support/files/u1/OSC2008_Spring_dumpver1_1.pdf) \u306b\u3082\u4e00\u901a\u308a\u66f8\u3044\u3066\u304f\u308c\u3066\u308b\u3002\n\n\u300c\u3061\u3087\u3063\u3068\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u898b\u3066\u307f\u305f\u3044\u306a\u300d\u3068\u601d\u3046\u4eba\u304c\u3044\u3066\u3082\u3001\u672c\u6c17\u3067\u898b\u308b\u4eba\u306f\u5c11\u306a\u3044\u3093\u3060\u306a\u3068\u75db\u611f\u3057\u305f\u3093\u3067\u3059\u304c\u3001\u305d\u308c\u3067\u306f\u3042\u307e\u308a\u306b\u52ff\u4f53\u7121\u3044\uff01 Linux \u30ab\u30fc\u30cd\u30eb\u306e\u6249\u3092\u958b\u304f\u7b2c\u4e00\u6b69\u304c\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u3067\u3059\u3088\uff01 (\u591a\u5206)\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u5bb6\u306b\u3042\u308b Ubuntu \u3092\u5165\u308c\u305f\u30ce\u30fc\u30c8PC\u3092\u4f7f\u3044\u306a\u304c\u3089\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u306e\u4ed5\u65b9\u30fb\u8003\u3048\u65b9\u3092\u3061\u3087\u308d\u3063\u3068\u66f8\u3044\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u307e\u3041\u3001Linux \u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u306a\u3089\u3069\u308c\u3092\u4f7f\u3063\u3066\u3082\u3055\u307b\u3069\u3084\u308b\u3053\u3068\u306b\u5909\u308f\u308a\u306f\u7121\u3044\u3067\u3057\u3087\u3046\u3002CoreOS \u3068\u304b\u306b\u306a\u308b\u3068\u307e\u305f\u5225\u3067\u3059\u304c (\u672c\u5f53\u306f\u4e00\u756a CoreOS \u3067 crash \u3057\u305f\u3044\u3051\u3069)\u3002\n\n\u305f\u3060\u3001\u3053\u3053\u3067\u66f8\u3051\u308b\u306e\u306f `crash` \u30b3\u30de\u30f3\u30c9\u3067\u4f55\u304c\u3067\u304d\u308b\u304b\u3068\u3044\u3046\u3053\u3068\u304c\u30e1\u30a4\u30f3\u306b\u306a\u308a\u307e\u3059 (\u3067\u304d\u308b\u3060\u3051\u3001`crash` \u5185\u306e\u30b3\u30de\u30f3\u30c9\u306e\u4f7f\u3044\u3069\u3053\u308d\u306f\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u304c\u3001\u30ab\u30fc\u30cd\u30eb\u306e\u6df1\u6df5\u3092\u8997\u304f\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u6ce8\u610f)\u3002\n\u7406\u7531\u306f\u3001\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u306b\u30bb\u30aa\u30ea\u30fc\u304c\u306a\u3044\u304b\u3089\u3067\u3059\u3002\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u306f\u3042\u308b\u77ac\u9593\u306e\u30e1\u30e2\u30ea\u30a4\u30e1\u30fc\u30b8\u3092\u5438\u3044\u51fa\u3057\u305f\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u307f\u305f\u3044\u306a\u3082\u306e\u306a\u306e\u3067\u3001\u767a\u751f\u3057\u305f\u73fe\u8c61\u306e\u524d\u5f8c\u95a2\u4fc2\u304c\u308f\u304b\u3089\u306a\u3044\u3068\u969c\u5bb3\u3092\u8ffd\u3044\u304b\u3051\u308b\u3068\u304d\u306f\u304b\u306a\u308a\u8f9b\u3044\u3093\u3067\u3059\u3002\u3060\u304b\u3089\u3001\u300c\u4f55\u304b\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u3068\u308c\u3066\u3093\u3060\u3051\u3069\u898b\u3066\u304f\u308c\u308b\uff1f\u300d\u3068\u8a00\u308f\u308c\u308b\u3068\u300c\u5acc\u3067\u3059\u300d\u3063\u3066\u8a00\u3044\u305f\u3044 (\u3067\u3082\u898b\u306a\u304d\u3083\u306a\u3089\u306a\u3044\uff08\u6ce3\uff09)\u3002\u3064\u307e\u308a\u3001\u3069\u3046\u3044\u3046\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3067\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u304c\u53d6\u308c\u305f\u306e\u304b\u8003\u616e\u3057\u306a\u304c\u3089\u4e00\u3064\u4e00\u3064\u4e2d\u8eab\u3092\u898b\u3066\u3044\u304f\u3057\u304b\u306a\u304f\u3066\u3001\u3069\u3046\u3059\u308c\u3070\u554f\u984c\u89e3\u6c7a\u3059\u308b\u304b\u306a\u3093\u3066\u66f8\u304d\u5c3d\u304f\u305b\u306a\u3044\u3093\u3067\u3059\u306d\u3002\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u3092\u628a\u63e1\u3057\u3066\u306a\u3044\u3068\u3001\u3042\u308b\uff11\u3064\u306e\u30ce\u30fc\u30c9\u3067\u8d77\u304d\u305f\u554f\u984c\u304c\u89e3\u6c7a\u3067\u304d\u306a\u3044\u3063\u3066\u3044\u3046\u3053\u3068\u3082\u3088\u304f\u3042\u308a\u307e\u3059\u3002\n\u767a\u751f\u3057\u305f\u554f\u984c\u306e\u30dd\u30a4\u30f3\u30c8\u304c\u3069\u306e\u8fba\u308a\u306b\u3042\u308b\u306e\u304b Linux \u30ab\u30fc\u30cd\u30eb\u5185\u306e\u60c5\u5831\u3092\u63a2\u308a\u5f53\u3066\u308b\u305f\u3081\u306b\u3001\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u3068\u3044\u3046\u624b\u6bb5\u3068 `crash` \u3068\u3044\u3046\u30c4\u30fc\u30eb\u304c\u3042\u308b\u3060\u3051\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\u3067\u3059\u304c\u3001\u5f37\u529b\u306a\u30c4\u30fc\u30eb\u3067\u3042\u308b\u3053\u3068\u306f\u9593\u9055\u3044\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u524d\u7f6e\u304d\u304c\u9577\u304f\u306a\u308a\u307e\u3057\u305f\u304c\u3001\u4ee5\u4e0b\u306b\u8aac\u660e\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n#\u6e96\u5099\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u3082\u306e\u306f\u4ee5\u4e0b\u306e\uff13\u3064\n1. `dpkg`: Debian \u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30de\u30cd\u30fc\u30b8\u30e3\n2. `crash`: \u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u7528\u30b3\u30de\u30f3\u30c9\n3. \u30c7\u30d0\u30c3\u30b0\u30b7\u30f3\u30dc\u30eb\u4ed8\u304d\u306e\u30ab\u30fc\u30cd\u30eb\u30a4\u30e1\u30fc\u30b8\n\n`dpkg`, `crash` \u306f `apt-get install` \u3057\u307e\u3057\u3087\u3046\u3002\u305f\u3076\u3093\u3001`dpkg` \u306f Ubuntu \u306b\u6700\u521d\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u308b\u306e\u3067\u3084\u3089\u306a\u304f\u3066\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001`crash` \u306f\u7121\u3044\u3067\u3059\u3002\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u306a\u3093\u3066\u666e\u901a\u3084\u308a\u307e\u305b\u3093\u304b\u3089\u306d\u3002\n\n\u30c7\u30d0\u30c3\u30b0\u30b7\u30f3\u30dc\u30eb\u4ed8\u304d\u306e\u30ab\u30fc\u30cd\u30eb\u30a4\u30e1\u30fc\u30b8\u304c\u5165\u3063\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u306f\u3001Ubuntu\u306e\u5834\u5408\u4ee5\u4e0b\u306eURI\u304b\u3089\u63a2\u3057\u3066\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308c\u3070\u3044\u3044\u306e\u304b\u306a\uff1f\nhttp://ddebs.ubuntu.com/pool/main/l/linux/\n\n\u81ea\u5206\u306e\u30de\u30b7\u30f3\u306e\u30ab\u30fc\u30cd\u30eb\u7248\u6570\u306f `uname -a` \u30b3\u30de\u30f3\u30c9\u3067\u8abf\u3079\u3066\u304a\u3044\u3066\u3001\u5bfe\u5fdc\u3059\u308bdeb\u30d1\u30c3\u30b1\u30fc\u30b8 (\u3044\u3064\u306e\u9593\u306b\u304b\u62e1\u5f35\u5b50\u304c .ddeb \u306b\u306a\u3063\u3066\u308b\u3053\u3068\u306b\u9a5a\u304d\u307e\u3057\u305f\u304c) \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\u3053\u306e\u5834\u5408\u306f `linux-image-3.13.0-83-generic-dbgsym_3.13.0-83.127_i386.ddeb` \u3067\u3057\u305f\u3002\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u306f\u6570\u767eMB\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u306b\u306f\u5c11\u3057\u6c17\u3092\u3064\u3051\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\n$ uname -a\nLinux localhost 3.13.0-83-generic #127-Ubuntu SMP Fri Mar 11 00:26:47 UTC 2016 i686 i686 i686 GNU/Linux\n```\n\n\u4e0a\u8a18\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fdeb\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u30d5\u30a1\u30a4\u30eb\u306e\u5c55\u958b\u5834\u6240\u306f `/usr/lib/debug/boot` \u914d\u4e0b\u3089\u3057\u3044\u3067\u3059\u3002Debian\u7cfb\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u4ee5\u5916\u306a\u3089\u9055\u3046\u306e\u304b\u3082\u3002ELF\u5f62\u5f0f\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u3001\u3061\u3083\u3093\u3068 not stripped \u306b\u306a\u3063\u3066\u307e\u3059\u306d\u3002\u3053\u306e\u8fba\u308a\u306f `gdb` \u306e\u30b3\u30a2\u89e3\u6790\u3068\u540c\u3058\u3002\n\n```\n$ sudo dpkg -i linux-image-3.13.0-83-generic-dbgsym_3.13.0-83.127_i386.ddeb \n\u4ee5\u524d\u306b\u672a\u9078\u629e\u306e\u30d1\u30c3\u30b1\u30fc\u30b8 linux-image-3.13.0-83-generic-dbgsym \u3092\u9078\u629e\u3057\u3066\u3044\u307e\u3059\u3002\n(\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059 ... \u73fe\u5728 709471 \u500b\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u3059\u3002)\nlinux-image-3.13.0-83-generic-dbgsym_3.13.0-83.127_i386.ddeb \u3092\u5c55\u958b\u3059\u308b\u6e96\u5099\u3092\u3057\u3066\u3044\u307e\u3059 ...\nlinux-image-3.13.0-83-generic-dbgsym (3.13.0-83.127) \u3092\u5c55\u958b\u3057\u3066\u3044\u307e\u3059...\nlinux-image-3.13.0-83-generic-dbgsym (3.13.0-83.127) \u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059 ...\n$ ls -l /usr/lib/debug/boot/\n\u5408\u8a08 195264\n-rw-r--r-- 1 root root 199947085  3\u6708 11 11:05 vmlinux-3.13.0-83-generic\n$ file /usr/lib/debug/boot/vmlinux-3.13.0-83-generic \n/usr/lib/debug/boot/vmlinux-3.13.0-83-generic: ELF 32-bit LSB  executable, Intel 80386, version 1 (SYSV), statically linked, BuildID[sha1]=87e79bf33837fa08f71042ba10696b58642b8ded, not stripped\n```\n\n#crash\u306e\u8d77\u52d5\n\u57fa\u672c\u7684\u306b\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u3092\u63a1\u53d6\u3057\u3066\u304b\u3089\u89e3\u6790\u3059\u308b\u3093\u3067\u3059\u304c\u3001\u5b9f\u306f Linux \u3092\u52d5\u304b\u3057\u3066\u3044\u308b\u72b6\u614b\u306e\u30de\u30b7\u30f3\u306e\u30e1\u30e2\u30ea\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059 (\u6700\u521d\u306b\u8a00\u3063\u3066\u305f\u30e9\u30a4\u30d6 crash \u306e\u3053\u3068\u3067\u3059\u306d\uff09\u3002PC\u7acb\u3061\u4e0a\u3052\u3066\u307b\u3063\u3066\u304a\u3044\u3066\u3082\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u306a\u3093\u3066\u53d6\u308c\u306a\u3044\u306e\u3067\u3001\u30e9\u30a4\u30d6 crash \u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u901a\u5e38\u306e\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u3067\u6c17\u3092\u3064\u3051\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u306f\u3001\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u3092\u63a1\u53d6\u3057\u305f\u30de\u30b7\u30f3\u3068\u89e3\u6790\u3059\u308b\u30de\u30b7\u30f3 (`crash` \u30b3\u30de\u30f3\u30c9\u3092\u8d77\u52d5\u3059\u308b\u30de\u30b7\u30f3) \u306eCPU\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u540c\u3058\u306b\u3057\u306a\u3044\u3068\u30c0\u30e1\u306a\u6240\u3002`crash` \u30b3\u30de\u30f3\u30c9\u3092\u81ea\u5206\u3067\u30d3\u30eb\u30c9\u3059\u308b\u5834\u5408\u3082\u6ce8\u610f\u3067\u3059\u306d\u3002\u306a\u308b\u3079\u304f\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u304c\u63d0\u4f9b\u3057\u3066\u3044\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u307b\u3046\u304c\u9762\u5012\u304c\u5c11\u306a\u304f\u3066\u826f\u3044\u3067\u3057\u3087\u3046 (\u30e9\u30a4\u30d6 crash \u306f\u5f53\u7136\u305d\u306e\u30de\u30b7\u30f3\u3067\u52d5\u304b\u3059\u306e\u3067\u6c17\u306b\u3057\u306a\u304f\u3066\u826f\u3044)\u3002\n\n`crash` \u306b\u306f\u8272\u3005\u3068\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u81ea\u5206\u304c\u3088\u304f\u4f7f\u3063\u3066\u3044\u308b\u306e\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3002\u6b63\u78ba\u306a\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u610f\u5473\u3092\u77e5\u308b\u306b\u306f\u3061\u3083\u3093\u3068 help \u3092\u898b\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\n$ crash -e {vi|emacs} -S System.map vmlinux [dumpfile]\n-e : crash\u4e0a\u3067\u306e\u30a8\u30c7\u30a3\u30bf\u64cd\u4f5c\u3092 vi \u5f62\u5f0f\u304b emacs \u5f62\u5f0f\u304b\u3092\u9078\u3079\u308b\u3002\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3057\u3066\u3057\u306a\u3051\u308c\u3070\u30c7\u30d5\u30a9\u30eb\u30c8\u306f vi \u5f62\u5f0f\u3068\u306a\u308b\u3002\n-S : \u30ab\u30fc\u30cd\u30eb\u304c\u4f7f\u7528\u3059\u308b\u30b7\u30f3\u30dc\u30eb\u30c6\u30fc\u30d6\u30eb\u304c\u66f8\u3044\u3066\u3042\u308b System.map \u3092\u6307\u5b9a\u3059\u308b (\u5225\u306b\u7121\u304f\u3066\u3082\u8d77\u52d5\u306f\u3067\u304d\u308b)\u3002\nvmlinux  : \u30c7\u30d0\u30c3\u30b0\u30b7\u30f3\u30dc\u30eb\u4ed8\u304d\u306e\u30ab\u30fc\u30cd\u30eb\u30a4\u30e1\u30fc\u30b8\u3002\u81ea\u4f5c\u30ab\u30fc\u30cd\u30eb\u306e\u5834\u5408\u306f\u81ea\u5206\u3067\u7528\u610f\u3059\u308b\u3002\ndumpfile : \u63a1\u53d6\u3057\u305f\u30c0\u30f3\u30d7\u30d5\u30a1\u30a4\u30eb\u3002\u3053\u308c\u3092\u6307\u5b9a\u3057\u306a\u3051\u308c\u3070\u73fe\u72b6\u306e\u30de\u30b7\u30f3\u306e\u30e1\u30e2\u30ea\u3092\u898b\u308b\u30e2\u30fc\u30c9\u3067\u8d77\u52d5 (\u30e9\u30a4\u30d6 crash) \u3059\u308b\u3002\n```\n\n\u30e9\u30a4\u30d6 crash \u306e\u8d77\u52d5\u4f8b\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002`sudo` \u3092\u3064\u3051\u305f\u306e\u306f `/dev/mem` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u3002\u306a\u3093\u304b `/boot/System.map` \u306e\u8aad\u307f\u8fbc\u307f\u304c\u3067\u304d\u3066\u306a\u3044\u306a\u3069\u306e\u30a8\u30e9\u30fc\u304c\u3044\u304f\u3064\u304b\u51fa\u3066\u307e\u3059\u304c\u3001\u653e\u3063\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002`crash>` \u306e\u5f8c\u306b\u7d9a\u3051\u3066\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3061\u8fbc\u3093\u3067\u3044\u3051\u3070\u3001\u30e1\u30e2\u30ea\u4e0a\u306b\u4e57\u3063\u3066\u3044\u308b\u5404\u7a2e\u60c5\u5831\u3092\u53d6\u308a\u51fa\u305b\u307e\u3059\u3002\n\n```\n$ sudo crash -e emacs -S /boot/System.map-3.13.0-83-generic /usr/lib/debug/boot/vmlinux-3.13.0-83-generic \n[sudo] password for user: \ncrash: cannot open /boot/System.map\n\ncrash 7.0.3\nCopyright (C) 2002-2013  Red Hat, Inc.\nCopyright (C) 2004, 2005, 2006, 2010  IBM Corporation\nCopyright (C) 1999-2006  Hewlett-Packard Co\nCopyright (C) 2005, 2006, 2011, 2012  Fujitsu Limited\nCopyright (C) 2006, 2007  VA Linux Systems Japan K.K.\nCopyright (C) 2005, 2011  NEC Corporation\nCopyright (C) 1999, 2002, 2007  Silicon Graphics, Inc.\nCopyright (C) 1999, 2000, 2001, 2002  Mission Critical Linux, Inc.\nThis program is free software, covered by the GNU General Public License,\nand you are welcome to change it and/or distribute copies of it under\ncertain conditions.  Enter \"help copying\" to see the conditions.\nThis program has absolutely no warranty.  Enter \"help warranty\" for details.\n \nGNU gdb (GDB) 7.6\nCopyright (C) 2013 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"i686-pc-linux-gnu\"...\n\ncrash: read error: kernel virtual address: c1673080  type: \"cpu_possible_mask\"\n\ncrash: this kernel may be configured with CONFIG_STRICT_DEVMEM, which\n       renders /dev/mem unusable as a live memory source.\n\ncrash: trying /proc/kcore as an alternative to /dev/mem\n\n  SYSTEM MAP: /boot/System.map-3.13.0-83-generic\nDEBUG KERNEL: /usr/lib/debug/boot/vmlinux-3.13.0-83-generic (3.13.0-83-generic)\n    DUMPFILE: /proc/kcore\n        CPUS: 4\n        DATE: Sat Apr 23 13:27:44 2016\n      UPTIME: 03:25:32\nLOAD AVERAGE: 0.17, 0.16, 0.31\n       TASKS: 459\n    NODENAME: titan\n     RELEASE: 3.13.0-83-generic\n     VERSION: #127-Ubuntu SMP Fri Mar 11 00:26:47 UTC 2016\n     MACHINE: i686  (2594 Mhz)\n      MEMORY: 3.7 GB\n         PID: 5851\n     COMMAND: \"crash\"\n        TASK: ed136800  [THREAD_INFO: f372c000]\n         CPU: 3\n       STATE: TASK_RUNNING (ACTIVE)\n\ncrash> \n```\n\n\u6700\u521d\u306b\u8868\u793a\u3055\u308c\u308b\u60c5\u5831\u3067\u3001\u30d1\u30cb\u30c3\u30af\u767a\u751f\u6642\u523b (DATE)\u3001\u3069\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u3069\u306eCPU\u3067\u30d1\u30cb\u30c3\u30af\u51e6\u7406\u3057\u305f\u306e\u304b (PID, COMMAND, TASK, CPU)\u3001\u30d1\u30cb\u30c3\u30af\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002\u4eca\u56de\u306f\u30e9\u30a4\u30d6 crash \u306a\u306e\u3067\u30d1\u30cb\u30c3\u30af\u30e1\u30c3\u30bb\u30fc\u30b8\u7121\u3044\u3067\u3059\u306d\u3002\u305d\u306e\u4ed6\u306f\u30de\u30b7\u30f3\u60c5\u5831\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\n#crash\u306e\u64cd\u4f5c\n\u3061\u3087\u308d\u3063\u3068\u66f8\u304f\u3068\u304b\u8a00\u3044\u306a\u304c\u3089\u3081\u3061\u3083\u304f\u3061\u3083\u9577\u304f\u306a\u3063\u3066\u307e\u3059\u304c\u3001\u3053\u3063\u304b\u3089\u304c\u672c\u756a\u3067\u3059 (\u6025\u907d\u3001\u30bf\u30a4\u30c8\u30eb\u306b\u300c\u305d\u306e1\u300d\u3068\u3064\u3051\u305f)\u3002\u9593\u9055\u3063\u305f\u3053\u3068\u66f8\u3044\u3066\u305f\u308a\u4ed6\u306b\u3082\u3053\u3046\u3044\u3046\u4f7f\u3044\u65b9\u3042\u308b\u3088\u3001\u3063\u3066\u3042\u308c\u3070\u662f\u975e\u6559\u3048\u3066\u3044\u305f\u3060\u304d\u305f\u3044\u3067\u3059\u3002\n\n##crash> help\n\u3068\u308a\u3042\u3048\u305a\u3001\u30d8\u30eb\u30d7\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u4f7f\u3048\u308b\u30b3\u30de\u30f3\u30c9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n```\ncrash> help\n\n*              files          mach           repeat         timer          \nalias          foreach        mod            runq           tree           \nascii          fuser          mount          search         union          \nbt             gdb            net            set            vm             \nbtop           help           p              sig            vtop           \ndev            ipcs           ps             struct         waitq          \ndis            irq            pte            swap           whatis         \neval           kmem           ptob           sym            wr             \nexit           list           ptov           sys            q              \nextend         log            rd             task           \n\ncrash version: 7.0.3    gdb version: 7.6\nFor help on any command above, enter \"help <command>\".\nFor help on input options, enter \"help input\".\nFor help on output options, enter \"help output\".\n\n```\n\n\u4ed6\u306b\u3082\u5404\u30b3\u30de\u30f3\u30c9\u306b\u5bfe\u3057\u3066\u30d8\u30eb\u30d7\u3092\u898b\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u901a\u308a\u3002\n`bt` \u306f\u6700\u3082\u3088\u304f\u4f7f\u3046\u30b3\u30de\u30f3\u30c9\u3067\u3001\u30d0\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u3092\u8868\u793a\u3057\u3066\u304f\u308c\u308b\u3084\u3064\u3067\u3059\u306d\u3002\u5f8c\u3067\u8aac\u660e\u3057\u307e\u3059\u3002\n\u8868\u793a\u3059\u308b\u60c5\u5831\u304c\u9577\u3044\u3068 `more` \u30b3\u30de\u30f3\u30c9\u3067\u30d1\u30a4\u30d7\u3057\u3066\u304f\u308c\u3066\u308b\u306e\u304b\u3001\u826f\u3044\u611f\u3058\u3067\u898b\u308c\u307e\u3059\u3002`more` \u304c\u5acc\u3060\u3063\u3066\u3044\u3046\u4eba\u306f\u3001\u81ea\u5206\u3067 `less` \u3092\u30d1\u30a4\u30d7\u3057\u3066\u3042\u3052\u307e\u3057\u3087\u3046\u3002`crash` \u5185\u3067\u3082\u3001\u30b7\u30a7\u30eb\u4e0a\u3067\u4f7f\u3048\u308b\u30b3\u30de\u30f3\u30c9\u304c\u7d50\u69cb\u4f7f\u3048\u308b\u306e\u3067\u3001\u8272\u3005\u8a66\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044 (\u4f7f\u3048\u308b\u4f7f\u3048\u306a\u3044\u306e\u5206\u304b\u308c\u9053\u304c\u672a\u3060\u306b\u308f\u304b\u3093\u306a\u3044\u3051\u3069)\u3002\n\n```\ncrash> help bt\nNAME\n  bt - backtrace\n\nSYNOPSIS\n  bt [-a|-g|-r|-t|-T|-l|-e|-E|-f|-F|-o|-O] [-R ref] [-s [-x|d]] [-I ip] [-S sp]\n     [pid | task]\n\nDESCRIPTION\n  Display a kernel stack backtrace.  If no arguments are given, the stack\n  trace of the current context will be displayed.\n\n       -a  displays the stack traces of the active task on each CPU.\n\u30fb\u30fb\u30fb\uff08\u7701\u7565\uff09\u30fb\u30fb\u30fb\n -- MORE --  forward: <SPACE>, <ENTER> or j  backward: b or k  quit: q\n```\n\n```\ncrash> help bt | less\n\u3053\u306e\u5834\u5408\u306f\u3001less \u3067\u898b\u305f\u611f\u3058\u3067\u30d8\u30eb\u30d7\u304c\u898b\u308c\u308b\u3002\n```\n\n\n##crash> sys\n`sys` \u306f `crash` \u8d77\u52d5\u6642\u306b\u8868\u793a\u3057\u305f\u60c5\u5831\u3092\u51fa\u3057\u3066\u304f\u308c\u307e\u3059\u3002\u3069\u3046\u3084\u3089\u30ab\u30fc\u30cd\u30eb\u30b3\u30f3\u30d5\u30a3\u30b0\u8a2d\u5b9a\u3082\u898b\u308c\u308b\u3089\u3057\u3044\u306e\u3067\u3059\u304c\u3001\u81ea\u5206\u306ePC\u3060\u3068\u306a\u305c\u304b\u898b\u308c\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u5f8c\u3067\u3061\u3083\u3093\u3068\u8abf\u3079\u306a\u3044\u3068\u306a\u3002\n\n```\ncrash> sys\n  SYSTEM MAP: /boot/System.map-3.13.0-83-generic\nDEBUG KERNEL: /usr/lib/debug/boot/vmlinux-3.13.0-83-generic (3.13.0-83-generic)\n    DUMPFILE: /proc/kcore\n        CPUS: 4\n        DATE: Sun Apr 24 00:17:36 2016\n      UPTIME: 04:53:47\nLOAD AVERAGE: 0.21, 0.18, 0.25\n       TASKS: 491\n    NODENAME: titan\n     RELEASE: 3.13.0-83-generic\n     VERSION: #127-Ubuntu SMP Fri Mar 11 00:26:47 UTC 2016\n     MACHINE: i686  (2594 Mhz)\n      MEMORY: 3.7 GB\ncrash> \n```\n\n```\ncrash> sys config\nsys: kernel_config_data does not exist in this kernel\n```\n\n`crash` \u8d77\u52d5\u6642\u306b\u5206\u304b\u308b\u60c5\u5831\u3068\u540c\u3058\u306a\u306e\u3067\u3001\u3053\u308c\u3067\u4f55\u304b\u65b0\u3057\u3044\u60c5\u5831\u304c\u5206\u304b\u308b\u3068\u3044\u3046\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u5fd8\u308c\u305f\u9803\u306b\u30bf\u30b9\u30af\u6570 (TASKS), CPU\u8ca0\u8377 (LOAD AVERAGE) \u3068\u304b\u8d77\u52d5\u6642\u9593 (UPTIME) \u898b\u306a\u304c\u3089\u3001\u300c\u3084\u3063\u3071\u308a\u30bf\u30b9\u30af\u6570/\u8ca0\u8377\u304c\u7570\u5e38\u3058\u3083\u306d\uff1f\u300d\u3068\u304b\u300c\u8d77\u52d5\u6642\u9593\u304c\u77ed/\u9577\u904e\u304e\u306a\u3044\uff1f\u300d\u3068\u304b\u307f\u3066\u554f\u984c\u5207\u308a\u5206\u3051\u306e\u5224\u65ad\u30fb\u78ba\u8a8d\u3067\u4f7f\u3046\u3050\u3089\u3044\u3067\u3059\u3002\n\n\u305f\u304f\u3055\u3093\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u304c\u53d6\u308c\u308b\u3046\u3061\u306b\u3001\u300c\u30de\u30b7\u30f3\u8d77\u52d5\u304b\u3089\u3042\u308b\u4e00\u5b9a\u306e\u6642\u9593\u304c\u7d4c\u3064\u3068\u30d1\u30cb\u30c3\u30af\u3057\u3066\u308b\u3093\u3060\u306a\u300d\u3068\u304b\u4ed6\u306e\u60c5\u5831\u304c\u96c6\u3081\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3068\u3001\u65b0\u305f\u306a\u89b3\u70b9\u3067\u30c0\u30f3\u30d7\u8abf\u67fb\u304c\u9032\u3093\u3060\u308a\u3082\u3057\u307e\u3059\u3002\n\n##crash> bt\n`bt` \u306f\u30d0\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u3092\u898b\u308b\u30b3\u30de\u30f3\u30c9\u3067\u3001\u5f53\u7136\u4f7f\u3046\u5834\u9762\u304c\u4e00\u756a\u591a\u3044\u3002\u30d0\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u304c\u898b\u308c\u308b\u3068\u8a00\u3063\u3066\u3082\u30ab\u30fc\u30cd\u30eb\u5185\u306e\u30b7\u30fc\u30b1\u30f3\u30b9\u3060\u3051\u3067\u3001\u30e6\u30fc\u30b6\u30b9\u30bf\u30c3\u30af\u3092\u8868\u793a\u3057\u3066\u304f\u308c\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3067\u3059\u3002\u30d7\u30ed\u30bb\u30b9ID (PID) \u3092\u5f15\u6570\u306b\u6307\u5b9a\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\n```\ncrash> bt 1\nPID: 1      TASK: f34d0000  CPU: 3   COMMAND: \"init\"\n #0 [f349fa28] __schedule at c165d593\n #1 [f349faac] schedule at c165d9de\n #2 [f349fab4] schedule_hrtimeout_range_clock at c165d0e0\n #3 [f349fb28] schedule_hrtimeout_range at c165d112\n #4 [f349fb34] poll_schedule_timeout at c118c022\n #5 [f349fb48] do_select at c118c8dd\n #6 [f349fe40] core_sys_select at c118cbd9\n #7 [f349ff78] sys_select at c118cd74\n #8 [f349ffb0] ia32_sysenter_target at c16681c6\n    EAX: 0000008e  EBX: 0000001d  ECX: bf98d3b0  EDX: bf98d430 \n    DS:  007b      ESI: bf98d4b0  ES:  007b      EDI: 00000000\n    SS:  007b      ESP: bf98d340  EBP: b77670e8  GS:  0033\n    CS:  0073      EIP: b7793428  ERR: 0000008e  EFLAGS: 00000246 \n```\n\nTASK \u306f `struct task_struct` \u306e\u5148\u982d\u30a2\u30c9\u30ec\u30b9\u3001CPU \u306f\u305d\u306e\u30d7\u30ed\u30bb\u30b9 (Linux \u30ab\u30fc\u30cd\u30eb\u5185\u3067\u306f\u30d7\u30ed\u30bb\u30b9\u3082\u30b9\u30ec\u30c3\u30c9\u3082\u5168\u90e8\u30bf\u30b9\u30af\u3068\u3057\u3066\u6271\u3046\u304b\u3089\u3001\u30bf\u30b9\u30af\u3068\u8a00\u3046\u65b9\u304c\u6b63\u3057\u305d\u3046) \u304c\u52d5\u304f (\u4e88\u5b9a\u306e) CPU\u756a\u53f7\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002`\u95a2\u6570\u540d at` \u306b\u7d9a\u304f16\u9032\u6570\u306e\u30a2\u30c9\u30ec\u30b9\u306f\u3001\u6b21\u306e\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u30a2\u30c9\u30ec\u30b9\u3001\u3064\u307e\u308a\u3001\u547c\u3073\u51fa\u3055\u308c\u305f\u5074\u306b\u3068\u3063\u3066\u306e\u30ea\u30bf\u30fc\u30f3\u30a2\u30c9\u30ec\u30b9\u3068\u306a\u308a\u307e\u3059\u3002\n\nPID=1\u306b\u306finit\u30d7\u30ed\u30bb\u30b9\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u306e\u30d0\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u304c\u51fa\u3066\u307e\u3059\u306d\u3002#0 \u304c\u4e00\u756a\u6700\u5f8c\u306e\u547c\u3073\u51fa\u3057\u305f\u95a2\u6570\u3067\u3001\u6570\u5b57\u304c\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3059\u308b\u307b\u3069\u524d\u306b\u547c\u3073\u51fa\u3057\u305f\u95a2\u6570\u306b\u306a\u3063\u3066\u307e\u3059\u3002\u4e0a\u8a18\u3060\u3068\u3001\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\u3067\u3042\u308b `ia32_sysenter_target` \u304c\u547c\u3073\u51fa\u3055\u308c\u3066 select \u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb (\u30ab\u30fc\u30cd\u30eb\u5185\u306e\u95a2\u6570\u3067\u306f `sys_select`) \u3092\u547c\u3073\u51fa\u3057\u305f\u5ef6\u9577\u3067\u30b9\u30ea\u30fc\u30d7\u306b\u5165\u3063\u305f (`schedule` \u95a2\u6570\u306b\u5165\u3063\u3066\u30bf\u30b9\u30af\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u5f85\u3061) \u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u4e00\u756a\u4e0b\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u30ec\u30b8\u30b9\u30bf\u9054\u306f\u3001\u305f\u3076\u3093 (\u5272\u308a\u8fbc\u307f) \u30b9\u30bf\u30c3\u30af\u3068\u3057\u3066\u7a4d\u307e\u308c\u305f\u5024\u3067\u3059\u304b\u306d (\u6700\u8fd1\u306ex86\u306e\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u547c\u3073\u51fa\u3057\u306f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u5272\u308a\u8fbc\u307f\u3058\u3083\u306a\u304f\u306a\u3063\u3066\u3093\u3060\u3088\u306a\u3041\u3001\u3061\u3083\u3093\u3068x86\u306e\u30a2\u30fc\u30ad\u4ed5\u69d8\u3082\u52c9\u5f37\u3057\u306a\u3044\u3068(\u6c57))\u3002\n\n\u30d0\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u306e\u95a2\u6570\u547c\u3073\u51fa\u3057\u6bce\u306e\u30b9\u30bf\u30c3\u30af\u60c5\u5831\u3092\u898b\u305f\u3044\u3068\u304b\u3001\u751f\u60c5\u5831\u3092\u898b\u305f\u3044\u3068\u304d\u306f -f/-r \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3044\u307e\u3059\u3002\u95a2\u6570\u547c\u3073\u51fa\u3057\u3067\u672c\u5f53\u306b\u6b63\u3057\u3044\u5f15\u6570\u304c\u5165\u3063\u3066\u305f\u306e\u304b\u8abf\u3079\u305f\u308a\u3001\u30b9\u30bf\u30c3\u30af\u7834\u58ca\u8d77\u304d\u3066\u306a\u3044\u304b\u3092\u8abf\u3079\u308b\u3068\u304d\u306b\u4f7f\u3063\u3066\u307e\u3059\u3002\u3069\u306e\u30a2\u30c9\u30ec\u30b9\u304c\u5f15\u6570\u306a\u3093\u3060\u3001\u307f\u305f\u3044\u306a\u3053\u3068\u306f\u307e\u305f\u4eca\u5ea6\u3002\n\n```\ncrash> bt -f 1\nPID: 1      TASK: f34d0000  CPU: 2   COMMAND: \"init\"\n #0 [f349fa28] __schedule at c165d593\n    [RA: c165d9e3  SP: f349fa28  FP: f349faac  SIZE: 136]\n    f349fa28: f349faa8  00000082  c1086a5d  f7bae370  \n    f349fa38: 00000000  c1a9e300  a3031702  00001676  \n    f349fa48: c1a9e300  f2fa9a00  f34d0000  f7ba0300  \n    f349fa58: 00000000  00000000  00000000  00001648  \n    f349fa68: 0000c000  00000000  0337f980  00000000  \n    f349fa78: 0337f980  00000000  f6803800  00001649  \n    f349fa88: ffffffff  ffffffff  f7bae348  f7bae348  \n    f349fa98: 00000000  00000000  00000000  00000000  \n    f349faa8: f349fab0  c165d9e3  \n #1 [f349faac] schedule at c165d9de\n    [RA: c165d0e5  SP: f349fab0  FP: f349fab4  SIZE: 8]\n    f349fab0: f349fb24  c165d0e5  \n #2 [f349fab4] schedule_hrtimeout_range_clock at c165d0e0\n    [RA: c165d117  SP: f349fab8  FP: f349fb28  SIZE: 116]\n    f349fab8: ee0e2200  eb780d00  f349fae4  c108a898  \n    f349fac8: f7bae300  00000000  00000246  ee242b78  \n    f349fad8: 00000246  ee242b78  f349faf4  c1091535  \n    f349fae8: f36966c0  ee242b78  00000000  f349fb0c  \n    f349faf8: c118bf9c  f349fb04  c13d54b9  f349fb0c  \n    f349fb08: c13d15f4  f349fb28  c13cf7d9  e54116af  \n    f349fb18: f349fbd4  f34d0000  00000000  f349fb30  \n    f349fb28: c165d117  \n\u30fb\u30fb\u30fb\uff08\u7701\u7565\uff09\u30fb\u30fb\u30fb\n```\n\n```\ncrash> bt -r 1\nPID: 1      TASK: f34d0000  CPU: 2   COMMAND: \"init\"\nf349e000:  f34d0000 default_exec_domain 00000000 00000000 \nf349e010:  00000002 80000000 c0000000 do_no_restart_syscall \nf349e020:  00000000 00000000 00000000 00000000 \nf349e030:  00000000 00000000 00000000 b7793428 \nf349e040:  00000000 00000000 57ac6e9d 4c331e87 \nf349e050:  507d71f1 c4d848bb 676ea14f 31ea2466 \nf349e060:  25e3b88c 34efdb94 991c81da d34e157f \nf349e070:  dba691f4 2c137e8f 7890f4f3 ddb9bea1 \n\u30fb\u30fb\u30fb\uff08\u7701\u7565\uff09\u30fb\u30fb\u30fb\nf349ff70:  bf98d4b0 f349ffac sys_select+137 bf98d4b0 \nf349ff80:  00000000 0000001d bf98d3b0 bf98d430 \nf349ff90:  __close_fd+119 f34e0040 00000010 bf98d030 \nf349ffa0:  0000001d bf98d4b0 00000000 f349e000 \nf349ffb0:  sysenter_after_call 0000001d bf98d3b0 bf98d430 \nf349ffc0:  bf98d4b0 00000000 b77670e8 0000008e \nf349ffd0:  0000007b 0000007b 00000000 00000033 \nf349ffe0:  0000008e b7793428 00000073 00000246 \nf349fff0:  bf98d340 0000007b 8441e759 ad0bb5cd \n```\n\n`bt -r` \u3067\u8868\u793a\u3057\u305f\u60c5\u5831\u304b\u3089\u9762\u767d\u3044\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u8868\u793a\u3055\u308c\u305f\u30b9\u30bf\u30c3\u30af\u306e\u958b\u59cb\u30a2\u30c9\u30ec\u30b9\u304c 0xf349e000 \u3067\u3001\u7d42\u4e86\u304c 0x349fff0 + 0x10 = 0x34a0000 \u3068\u306a\u3063\u3066\u3066\u3001\u3061\u3087\u3046\u3069 8KiB \u30b5\u30a4\u30ba\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u306a\u3093\u3067\u3060\u3068\u3002\n\u6b63\u89e3\u304b\u3089\u8a00\u3046\u3068\u3001[Linux2.6\u7cfb\u306etask_struct\u3068\u30ab\u30fc\u30cd\u30eb\u30b9\u30bf\u30c3\u30af\u306e\u914d\u7f6e\u304c\u3053\u3046\u3044\u3046\u4f5c\u308a\u306b\u306a\u3063\u3066\u308b\u304b\u3089](http://www.kerneldesign.info/wiki/index.php?current_thread_info()%2Flinux2.6)\u306a\u3093\u3067\u3059\u304c\u3001\u300c\u304a\u3049\u301c\u3001Linux-3.13 \u3067\u30822.6\u7cfb\u306e\u4f5c\u308a\u304c\u6b8b\u3063\u3066\u308b\u3093\u3060\uff01 \u3044\u3044\u8a2d\u8a08(?)\u306a\u3093\u3060\u306a\u3002\u300d\u3068\u306a\u3093\u3068\u306a\u304f\u601d\u3046\u308f\u3051\u3067\u3059\u3002\n\n\u3061\u306a\u307f\u306b\u3001\u5f8c\u3067\u8aac\u660e\u3059\u308b\u30b3\u30de\u30f3\u30c9 `task` \u3092\u4f7f\u3046\u3068\u3001\u3042\u308b\u30bf\u30b9\u30af\u306e\u30ab\u30fc\u30cd\u30eb\u30b9\u30bf\u30c3\u30af\u958b\u59cb\u4f4d\u7f6e\u306f\u3059\u3050\u308f\u304b\u308a\u307e\u3059\u3002\n`task_struct` \u69cb\u9020\u4f53\u306e\u30e1\u30f3\u30d0\u5909\u6570 `stack` \u3067\u3059\u306d\u3002\u3061\u3083\u3093\u3068\u30010xf349e000 \u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\n```\ncrash> task 1 | head\nPID: 1      TASK: f34d0000  CPU: 0   COMMAND: \"init\"\nstruct task_struct {\n  state = 1, \n  stack = 0xf349e000, \n  usage = {\n    counter = 2\n  }, \n  flags = 4219136, \n  ptrace = 0, \n  wake_entry = {\ncrash> \n```\n\n`stack` \u304c `thread_info` \u69cb\u9020\u4f53\u306e\u958b\u59cb\u30a2\u30c9\u30ec\u30b9\u306a\u306e\u3067\u3001`struct` \u30b3\u30de\u30f3\u30c9\u3067\u4e2d\u8eab\u304c\u898b\u308c\u307e\u3059\u3002\u5f53\u7136\u3067\u3059\u304c\u3001`bt -r` \u3067\u78ba\u8a8d\u3057\u305f\u751f\u306e\u30b9\u30bf\u30c3\u30af\u60c5\u5831\u3068\u4e00\u81f4\u3057\u3066\u307e\u3059\u3002\n\n```\ncrash> struct thread_info 0xf349e000 | cat\nstruct thread_info {\n  task = 0xf34d0000, \n  exec_domain = 0xc193c980 <default_exec_domain>, \n  flags = 0, \n  status = 0, \n  cpu = 0, \n  saved_preempt_count = -2147483648, \n  addr_limit = {\n    seg = 3221225472\n  }, \n  restart_block = {\n    fn = 0xc1067ce0 <do_no_restart_syscall>, \n    {\n      futex = {\n        uaddr = 0x0, \n        val = 0, \n        flags = 0, \n        bitset = 0, \n        time = 0, \n        uaddr2 = 0x0\n      }, \n      nanosleep = {\n        clockid = 0, \n        rmtp = 0x0, \n        expires = 0\n      }, \n      poll = {\n        ufds = 0x0, \n        nfds = 0, \n        has_timeout = 0, \n        tv_sec = 0, \n        tv_nsec = 0\n      }\n    }\n  }, \n  sysenter_return = 0xb7793428, \n  previous_esp = 0, \n  supervisor_stack = 0xf349e044 \"\", \n  sig_on_uaccess_error = 0, \n  uaccess_err = 0\n}\ncrash> \n```\n\n\u3053\u308c\u3067\u3001\u30ab\u30fc\u30cd\u30eb\u30b9\u30bf\u30c3\u30af\u304c\u7570\u5e38\u306b\u4f38\u3073\u305f\u3089 `thread_info` \u69cb\u9020\u4f53\u306e\u60c5\u5831\u3092\u3064\u3076\u3059\u306a\u3068\u304b\u3001\u30b9\u30bf\u30c3\u30af\u304c 4KiB \u3058\u3083\u30b9\u30bf\u30c3\u30af\u8db3\u3089\u306a\u3044\u5834\u5408\u304c\u591a\u304f\u3066 8KiB \u3067\u3044\u3053\u3046\u3001\u3063\u3066\u3053\u3068\u306b\u306a\u3063\u305f\u3093\u3058\u3083\u306a\u3044\u304b\u3068\u3044\u3046\u8a2d\u8a08\u306e\u5909\u9077\u3082\u601d\u3044\u5de1\u3089\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u308f\u3051\u3067\u3059\u306d (\u6b63\u3057\u3044\u63a8\u6e2c\u306a\u306e\u304b\u306f\u4e0d\u660e)\u3002\n\n`bt` \u30b3\u30de\u30f3\u30c9\u306f\u3082\u3063\u3068\u305f\u304f\u3055\u3093\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308b\u3093\u3067\u3059\u304c\u3001\u4ed6\u306f\u305d\u3093\u306a\u306b\u4f7f\u3063\u305f\u8a18\u61b6\u304c\u306a\u3044\u306e\u3067\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u95a2\u4fc2\u3068\u30b9\u30bf\u30c3\u30af\u60c5\u5831\u3055\u3048\u898b\u308c\u308c\u3070\u3044\u3044\u306e\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u3001`crash` \u30b3\u30de\u30f3\u30c9\u304c\u3067\u304d\u308b\u3053\u3068\u304b\u3089\u30e1\u30e2\u30ea\u30c0\u30f3\u30d7\u89e3\u6790\u3059\u308b\u6642\u306e\u8003\u3048\u65b9 (\u5b8c\u5168\u306b\u500b\u4eba\u7684\u306a\u898b\u89e3\u3067\u306f\u3042\u308a\u307e\u3059\u304c) \u306a\u3069\u3092\u66f8\u3044\u3066\u3044\u3051\u308c\u3070\u306a\u3068\u601d\u3044\u307e\u3059\u3002\n\u30fb\u30fb\u30fb\u3053\u308c\u3001\u3044\u3064\u5b8c\u7d50\u3059\u308b\u3093\u3060\u308d\u3002\n"}