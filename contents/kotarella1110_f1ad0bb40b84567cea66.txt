{"context": "\n\nfastcgi_param \u30c7\u30a3\u30ec\u30a4\u30af\u30c6\u30a3\u30d6\u306b\u3064\u3044\u3066\nModule ngx_http_fastcgi_module\n\nSyntax:   fastcgi_param parameter value [if_not_empty];\nDefault:  \u2014\nContext:  http, server, location\n\nSets a parameter that should be passed to the FastCGI server. The value can contain text, variables, and their combination. These directives are inherited from the previous level if and only if there are no fastcgi_param directives defined on the current level.\n\nFastCGI \u30b5\u30fc\u30d0\u306b\u6e21\u3055\u308c\u308b\u3079\u304d\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002 \u5024\u306b\u306f\u30c6\u30ad\u30b9\u30c8\u3001 \u5909\u6570\u3001\u305d\u308c\u3089\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u542b\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u73fe\u5728\u306e\u30ec\u30d9\u30eb\u306b fastcgi_param \u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u304c\u7121\u3044\u5834\u5408\u306b\u9650\u308a\u3001\u3053\u308c\u3089\u306e\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u306f\u4e0a\u306e\u30ec\u30d9\u30eb\u304b\u3089\u5f15\u304d\u7d99\u304c\u308c\u307e\u3059\u3002\nnginx \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u306b\u4e0b\u8a18\u306e\u30b3\u30fc\u30c9\u3092\u542b\u3093\u3060 PHP \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3067\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u8a2d\u5b9a\u5024\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n<?php var_export($_SERVER); ?>\n\n\n\u3088\u304f\u898b\u304b\u3051\u308b\u8aa4\u308a\u304c\u3042\u308b FastCGI \u306e\u8a2d\u5b9a\n\u4e0b\u8a18\u306e\u8a2d\u5b9a\u3067\u306f\u3001 SCRIPT_FILENAME \u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f $document_root$fastcgi_script_name \u3067\u306f\u306a\u304f $request_filename \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3057\u307e\u3044\u3001 fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; \u306e\u8a18\u8ff0\u306f\u7121\u610f\u5473\u3068\u306a\u308a\u307e\u3059\u3002\n\u7406\u7531\u3068\u3057\u3066\u306f\u3001 fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; \u3088\u308a\u5f8c\u306b include fastcgi_params; \u3068\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\n/etc/nginx/fastcgi_params \u30d5\u30a1\u30a4\u30eb\u5185\u306e fastcgi_param SCRIPT_FILENAME $request_filename; \u304c\u6709\u52b9\u3068\u306a\u308a\u4e0a\u66f8\u304d\u3055\u308c\u3066\u3057\u307e\u3046\u304b\u3089\u3067\u3059\u3002\n\u203b PATH_INFO PATH_TRANSLATED \u306b\u95a2\u3057\u3066\u306f\u3001 /etc/nginx/fastcgi_params \u30d5\u30a1\u30a4\u30eb\u5185\u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u305f\u3081 include fastcgi_params; \u306e\u524d\u5f8c\u95a2\u308f\u3089\u305a\u671f\u5f85\u901a\u308a\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\n\n/etc/nginx/nginx.conf\nlocation ~ [^/]\\.php(/|$) {\n    fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n    if (!-f $document_root$fastcgi_script_name) {\n        return 404;\n    }\n    fastcgi_pass unix:/var/run/php5-fpm.sock;\n    fastcgi_index index.php;\n    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n    fastcgi_param PATH_INFO $fastcgi_path_info;\n    fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;\n    include fastcgi_params;\n}\n\n\n/etc/nginx/fastcgi_params \u3067\u8a2d\u5b9a\u3055\u308c\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4e0a\u66f8\u304d\u3057\u305f\u3044\u5834\u5408\u306f\u3001 include fastcgi_params; \u3088\u308a\u5f8c\u3067\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u6b63\u3057\u3044 FastCGI \u306e\u8a2d\u5b9a\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a 2 \u901a\u308a\u306e\u8a2d\u5b9a\u304c\u3042\u308a\u307e\u3059\u3002\n\n/etc/nginx/fastcgi_params \u3092 include \u3057\u305f\u5f8c\u3067\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\n\n/etc/nginx/nginx.conf\nlocation ~ [^/]\\.php(/|$) {\n    fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n    if (!-f $document_root$fastcgi_script_name) {\n        return 404;\n    }\n    fastcgi_pass unix:/var/run/php5-fpm.sock;\n    fastcgi_index index.php;\n    include fastcgi_params;\n    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n    fastcgi_param PATH_INFO $fastcgi_path_info;\n    fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;\n}\n\n\n\n/etc/nginx/fastcgi_params \u3092\u7de8\u96c6\u3057 include \u3059\u308b\n\n/etc/nginx/fastcgi_params\n    fastcgi_param   QUERY_STRING            $query_string;\n    fastcgi_param   REQUEST_METHOD          $request_method;\n    fastcgi_param   CONTENT_TYPE            $content_type;\n    fastcgi_param   CONTENT_LENGTH          $content_length;\n\n-   fastcgi_param   SCRIPT_FILENAME         $request_filename;\n+   fastcgi_param   SCRIPT_FILENAME         $document_root$fastcgi_script_name;\n    fastcgi_param   SCRIPT_NAME             $fastcgi_script_name;\n+   fastcgi_param   PATH_INFO               $fastcgi_path_info;\n+   fastcgi_param   PATH_TRANSLATED         $document_root$fastcgi_path_info;\n    fastcgi_param   REQUEST_URI             $request_uri;\n    fastcgi_param   DOCUMENT_URI            $document_uri;\n    fastcgi_param   DOCUMENT_ROOT           $document_root;\n    fastcgi_param   SERVER_PROTOCOL         $server_protocol;\n\n    fastcgi_param   GATEWAY_INTERFACE       CGI/1.1;\n    fastcgi_param   SERVER_SOFTWARE         nginx/$nginx_version;\n\n    fastcgi_param   REMOTE_ADDR             $remote_addr;\n    fastcgi_param   REMOTE_PORT             $remote_port;\n    fastcgi_param   SERVER_ADDR             $server_addr;\n    fastcgi_param   SERVER_PORT             $server_port;\n    fastcgi_param   SERVER_NAME             $server_name;\n\n    fastcgi_param   HTTPS                   $https;\n\n    # PHP only, required if PHP was built with --enable-force-cgi-redirect\n    fastcgi_param   REDIRECT_STATUS         200;\n\n\n\n/etc/nginx/nginx.conf\nlocation ~ [^/]\\.php(/|$) {\n    fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n    if (!-f $document_root$fastcgi_script_name) {\n        return 404;\n    }\n    fastcgi_pass unix:/var/run/php5-fpm.sock;\n    fastcgi_index index.php;\n    include fastcgi_params;\n}\n\n\n\n## `fastcgi_param` \u30c7\u30a3\u30ec\u30a4\u30af\u30c6\u30a3\u30d6\u306b\u3064\u3044\u3066\n\n[Module ngx_http_fastcgi_module](http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_param \"Module ngx_http_fastcgi_module\")\n\n> ```\n> Syntax:\tfastcgi_param parameter value [if_not_empty];\n> Default:\t\u2014\n> Context:\thttp, server, location\n> ```\n> Sets a parameter that should be passed to the FastCGI server. The value can contain text, variables, and their combination. These directives are inherited from the previous level if and only if there are no fastcgi_param directives defined on the current level.\n\nFastCGI \u30b5\u30fc\u30d0\u306b\u6e21\u3055\u308c\u308b\u3079\u304d\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002 \u5024\u306b\u306f\u30c6\u30ad\u30b9\u30c8\u3001 \u5909\u6570\u3001\u305d\u308c\u3089\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u542b\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u73fe\u5728\u306e\u30ec\u30d9\u30eb\u306b `fastcgi_param` \u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u304c\u7121\u3044\u5834\u5408\u306b\u9650\u308a\u3001\u3053\u308c\u3089\u306e\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u306f\u4e0a\u306e\u30ec\u30d9\u30eb\u304b\u3089\u5f15\u304d\u7d99\u304c\u308c\u307e\u3059\u3002\n\nnginx \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u306b\u4e0b\u8a18\u306e\u30b3\u30fc\u30c9\u3092\u542b\u3093\u3060 PHP \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3067\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u8a2d\u5b9a\u5024\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n```php\n<?php var_export($_SERVER); ?>\n```\n\n## \u3088\u304f\u898b\u304b\u3051\u308b\u8aa4\u308a\u304c\u3042\u308b FastCGI \u306e\u8a2d\u5b9a\n\n\u4e0b\u8a18\u306e\u8a2d\u5b9a\u3067\u306f\u3001 `SCRIPT_FILENAME` \u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f `$document_root$fastcgi_script_name` \u3067\u306f\u306a\u304f `$request_filename` \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3057\u307e\u3044\u3001 `fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;` \u306e\u8a18\u8ff0\u306f\u7121\u610f\u5473\u3068\u306a\u308a\u307e\u3059\u3002\n\u7406\u7531\u3068\u3057\u3066\u306f\u3001 `fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;` \u3088\u308a\u5f8c\u306b `include fastcgi_params;` \u3068\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\n`/etc/nginx/fastcgi_params` \u30d5\u30a1\u30a4\u30eb\u5185\u306e `fastcgi_param SCRIPT_FILENAME $request_filename;` \u304c\u6709\u52b9\u3068\u306a\u308a\u4e0a\u66f8\u304d\u3055\u308c\u3066\u3057\u307e\u3046\u304b\u3089\u3067\u3059\u3002\n\n\u203b `PATH_INFO` `PATH_TRANSLATED` \u306b\u95a2\u3057\u3066\u306f\u3001 `/etc/nginx/fastcgi_params` \u30d5\u30a1\u30a4\u30eb\u5185\u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u305f\u3081 `include fastcgi_params;` \u306e\u524d\u5f8c\u95a2\u308f\u3089\u305a\u671f\u5f85\u901a\u308a\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\n\n```nginx:/etc/nginx/nginx.conf\nlocation ~ [^/]\\.php(/|$) {\n    fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n    if (!-f $document_root$fastcgi_script_name) {\n        return 404;\n    }\n    fastcgi_pass unix:/var/run/php5-fpm.sock;\n    fastcgi_index index.php;\n    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n    fastcgi_param PATH_INFO $fastcgi_path_info;\n    fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;\n    include fastcgi_params;\n}\n```\n\n`/etc/nginx/fastcgi_params` \u3067\u8a2d\u5b9a\u3055\u308c\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4e0a\u66f8\u304d\u3057\u305f\u3044\u5834\u5408\u306f\u3001 `include fastcgi_params;` \u3088\u308a\u5f8c\u3067\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n## \u6b63\u3057\u3044 FastCGI \u306e\u8a2d\u5b9a\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a 2 \u901a\u308a\u306e\u8a2d\u5b9a\u304c\u3042\u308a\u307e\u3059\u3002\n\n### `/etc/nginx/fastcgi_params` \u3092 include \u3057\u305f\u5f8c\u3067\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\n\n```nginx:/etc/nginx/nginx.conf\nlocation ~ [^/]\\.php(/|$) {\n    fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n    if (!-f $document_root$fastcgi_script_name) {\n        return 404;\n    }\n    fastcgi_pass unix:/var/run/php5-fpm.sock;\n    fastcgi_index index.php;\n    include fastcgi_params;\n    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n    fastcgi_param PATH_INFO $fastcgi_path_info;\n    fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info;\n}\n```\n\n### `/etc/nginx/fastcgi_params` \u3092\u7de8\u96c6\u3057 include \u3059\u308b\n\n```diff:/etc/nginx/fastcgi_params\n\tfastcgi_param   QUERY_STRING            $query_string;\n\tfastcgi_param   REQUEST_METHOD          $request_method;\n\tfastcgi_param   CONTENT_TYPE            $content_type;\n\tfastcgi_param   CONTENT_LENGTH          $content_length;\n\t\n-\tfastcgi_param   SCRIPT_FILENAME         $request_filename;\n+\tfastcgi_param   SCRIPT_FILENAME         $document_root$fastcgi_script_name;\n\tfastcgi_param   SCRIPT_NAME             $fastcgi_script_name;\n+\tfastcgi_param   PATH_INFO               $fastcgi_path_info;\n+\tfastcgi_param   PATH_TRANSLATED         $document_root$fastcgi_path_info;\n\tfastcgi_param   REQUEST_URI             $request_uri;\n\tfastcgi_param   DOCUMENT_URI            $document_uri;\n\tfastcgi_param   DOCUMENT_ROOT           $document_root;\n\tfastcgi_param   SERVER_PROTOCOL         $server_protocol;\n\t\n\tfastcgi_param   GATEWAY_INTERFACE       CGI/1.1;\n\tfastcgi_param   SERVER_SOFTWARE         nginx/$nginx_version;\n\t\n\tfastcgi_param   REMOTE_ADDR             $remote_addr;\n\tfastcgi_param   REMOTE_PORT             $remote_port;\n\tfastcgi_param   SERVER_ADDR             $server_addr;\n\tfastcgi_param   SERVER_PORT             $server_port;\n\tfastcgi_param   SERVER_NAME             $server_name;\n\t\n\tfastcgi_param   HTTPS                   $https;\n\n\t# PHP only, required if PHP was built with --enable-force-cgi-redirect\n\tfastcgi_param   REDIRECT_STATUS         200;\n```\n\n```nginx:/etc/nginx/nginx.conf\nlocation ~ [^/]\\.php(/|$) {\n    fastcgi_split_path_info ^(.+\\.php)(/.+)$;\n    if (!-f $document_root$fastcgi_script_name) {\n        return 404;\n    }\n    fastcgi_pass unix:/var/run/php5-fpm.sock;\n    fastcgi_index index.php;\n    include fastcgi_params;\n}\n```\n", "tags": ["nginx", "php-fpm", "PHP"]}