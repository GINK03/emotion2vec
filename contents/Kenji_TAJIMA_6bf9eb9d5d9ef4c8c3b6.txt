{"context": "\n\n\u306f\u3058\u3081\u306b\n\n\n\n\u76e3\u8996\u3059\u308b\n\u76e3\u8996\u3055\u308c\u308b\n\n\n\n\n192.168.56.20\n192.168.56.10\n\n\n\n\u4eca\u56de\u306f\u3001\u76e3\u8996\u3055\u308c\u308b192.168.56.10\u306b\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\u307e\u305f\u3001Cacti(192.168.56.20)\u3067\u76e3\u8996\u5bfe\u8c61(192.168.56.10)\u304b\u3089\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3001\n\u30b0\u30e9\u30d5\u8868\u793a\u3092\u884c\u3046\u3002\nSNMP\u30de\u30cd\u30fc\u30b8\u30e3\u304a\u3088\u3073Cacti\u306f\u3053\u3061\u3089\u3067\u8a2d\u5b9a\u6e08\u307f\u3002\n\n\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nCacti\u304c\u4ed6\u306e\u30db\u30b9\u30c8\u3092\u76e3\u8996\u3059\u308b\u969b\u3001SNMP\u3068\u3044\u3046\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u4f7f\u3046\u3002\n\u305d\u306e\u969b\u3001\u76e3\u8996\u3055\u308c\u308b\u5074\u306b\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u5165\u308c\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3001\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u3046\u3002\n# yum -y install net-snmp net-snmp-utils\n\n\n\u8a2d\u5b9a\n\u9577\u3044\u305f\u3081\u629c\u7c8b\u3068\u3059\u308b\u3002\n\n/etc/snmp/snmpd.conf\n#       sec.name   source        community\ncom2sec local      localhost     public\ncom2sec devNetwork 192.168.56.20 public\n\n# Second, map the security name into a group name:\n#       groupName      securityModel securityName\ngroup   devGroup       v1          devNetwork\n\n# Third, create a view for us to let the group have rights to:\n\n# Make at least  snmpwalk -v 1 localhost -c public system fast again.\n#       name           incl/excl     subtree         mask(optional)\nview all included .1 80\n\n# Finally, grant the group read-only access to the systemview view.\n#       group          context sec.model sec.level prefix read   write  notif\naccess devGroup \"\" any noauth exact all all none\n\n\nv1 \u3068\u3057\u3066\u3044\u308b\u304c\u3001\u3053\u306e\u3042\u305f\u308a\u3092\u8aad\u3080\u9650\u308av2\u304c\u671b\u307e\u3057\u3044\u306e\u3060\u3068\u601d\u3046\u3002\n\nsnmpwalk\u3067\u78ba\u8a8d\n\u76e3\u8996\u3059\u308b\u5074\u304b\u3089\u3001\u76e3\u8996\u5bfe\u8c61\u306e\u60c5\u5831\u304c\u53d6\u5f97\u3067\u304d\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002\n# snmpwalk -v 1 192.168.56.10 -c public\nSNMPv2-MIB::sysDescr.0 = STRING: Linux localhost.localdomain 3.10.0-229.20.1.el7.x86_64 #1 SMP Tue Nov 3 19:10:07 UTC 2015 x86_64\nSNMPv2-MIB::sysObjectID.0 = OID: NET-SNMP-MIB::netSnmpAgentOIDs.10\nDISMAN-EVENT-MIB::sysUpTimeInstance = Timeticks: (278040) 0:46:20.40\nSNMPv2-MIB::sysContact.0 = STRING: Root <root@localhost> (configure /etc/snmp/snmp.local.conf)\nSNMPv2-MIB::sysName.0 = STRING: localhost.localdomain\nSNMPv2-MIB::sysLocation.0 = STRING: Unknown (edit /etc/snmp/snmpd.conf)\nSNMPv2-MIB::sysORLastChange.0 = Timeticks: (3) 0:00:00.03\nSNMPv2-MIB::sysORID.1 = OID: SNMP-MPD-MIB::snmpMPDCompliance\nSNMPv2-MIB::sysORID.2 = OID: SNMP-USER-BASED-SM-MIB::usmMIBCompliance\nSNMPv2-MIB::sysORID.3 = OID: SNMP-FRAMEWORK-MIB::snmpFrameworkMIBCompliance\nSNMPv2-MIB::sysORID.4 = OID: SNMPv2-MIB::snmpMIB\nSNMPv2-MIB::sysORID.5 = OID: TCP-MIB::tcpMIB\nSNMPv2-MIB::sysORID.6 = OID: IP-MIB::ip\nSNMPv2-MIB::sysORID.7 = OID: UDP-MIB::udpMIB\nSNMPv2-MIB::sysORID.8 = OID: SNMP-VIEW-BASED-ACM-MIB::vacmBasicGroup\nSNMPv2-MIB::sysORID.9 = OID: SNMP-NOTIFICATION-MIB::snmpNotifyFullCompliance\nSNMPv2-MIB::sysORID.10 = OID: NOTIFICATION-LOG-MIB::notificationLogMIB\nSNMPv2-MIB::sysORDescr.1 = STRING: The MIB for Message Processing and Dispatching.\nSNMPv2-MIB::sysORDescr.2 = STRING: The management information definitions for the SNMP User-based Security Model.\nSNMPv2-MIB::sysORDescr.3 = STRING: The SNMP Management Architecture MIB.\n\u7701\u7565\n\n\n\u30b5\u30fc\u30d3\u30b9\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n# systemctl enable snmpd\n\n\n\u8d77\u52d5\n# systemctl start snmpd\n\n\nCacti\u306e\u8a2d\u5b9a\n\n\u30c7\u30d0\u30a4\u30b9\u767b\u9332\n\u30e1\u30cb\u30e5\u30fc\u304b\u3089\"Device\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u753b\u9762\u9077\u79fb\u5f8c\u53f3\u4e0a\u306e\"Add\"\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3002\n\u30c7\u30d0\u30a4\u30b9\u306e\u60c5\u5831\u3092\u5165\u529b\u3057\u3001\"create\"\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3059\u308b\u3002\n\u6b63\u5e38\u306b\u767b\u9332\u3067\u304d\u308b\u3068\u3001\"SNMP Information\"\u306e\u4e0b\u306bSNMP\u3067\u53d6\u5f97\u3057\u305f\u60c5\u5831\u304c\u8868\u793a\u3055\u308c\u308b\u3002\n\u5c1a\u3001\"SNMP\u30a8\u30e9\u30fc\"\u3068\u8868\u793a\u3055\u308c\u308b\u5834\u5408\u306f\u3001SNMP\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u304c\u76e3\u8996\u5bfe\u8c61\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u3001\n\u8a2d\u5b9a\u304c\u8aa4\u3063\u3066\u3044\u308b\u3068\u601d\u308f\u308c\u308b\u3002\n\n\n\u30b0\u30e9\u30d5\u8a2d\u5b9a\n\"New Graph\"\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3002\n\"Create\"\u30d7\u30eb\u30c0\u30a6\u30f3\u304b\u3089\u76e3\u8996\u3057\u305f\u3044\u9805\u76ee\u3092\u9078\u629e\u3057\u3001\"Create\"\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3059\u308b\u3002\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\u753b\u9762\u4e0a\u90e8\u306e\"graphs\"\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u30b0\u30e9\u30d5\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\uff08cron\u304c\u5b9f\u884c\u3055\u308c\u308b\u307e\u3067\u5f85\u3064\u3053\u3068\uff09\n\n\n\u304a\u308f\u308a\u306b\nsnmpd\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u8a2d\u5b9a\u3068\u3001Cacti\u3067\u306e\u30b0\u30e9\u30d5\u8868\u793a\u8a2d\u5b9a\u3092\u884c\u3063\u305f\u3002\nsnmpd.conf\u306b\u3064\u3044\u3066\u4eca\u56de\u306f\u7c21\u6613\u306a\u8a2d\u5b9a\u3067\u6e08\u307e\u305b\u305f\u304c\u3001\nSNMP\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u653b\u6483\u306e\u8e0f\u307f\u53f0\u306b\u60aa\u7528\u3055\u308c\u308b\u5371\u967a\u3082\u3042\u308b\u305f\u3081\u3001\n\u5b66\u7fd2\u76ee\u7684\u306e\u5229\u7528\u3067\u3042\u3063\u3066\u3082\u982d\u306e\u7247\u9685\u306b\u7f6e\u3044\u3066\u304a\u3044\u305f\u307b\u3046\u304c\u826f\u3044\u3068\u601d\u3046\u3002\n#\u306f\u3058\u3081\u306b\n\n|\u76e3\u8996\u3059\u308b|\u76e3\u8996\u3055\u308c\u308b|\n|-------------|------------|\n|192.168.56.20|192.168.56.10|\n\n\u4eca\u56de\u306f\u3001\u76e3\u8996\u3055\u308c\u308b192.168.56.10\u306b\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\u307e\u305f\u3001Cacti(192.168.56.20)\u3067\u76e3\u8996\u5bfe\u8c61(192.168.56.10)\u304b\u3089\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3001\n\u30b0\u30e9\u30d5\u8868\u793a\u3092\u884c\u3046\u3002\nSNMP\u30de\u30cd\u30fc\u30b8\u30e3\u304a\u3088\u3073Cacti\u306f[\u3053\u3061\u3089](http://qiita.com/Kenji_TAJIMA/items/91965a94c624fa0c89ca)\u3067\u8a2d\u5b9a\u6e08\u307f\u3002\n\n#\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nCacti\u304c\u4ed6\u306e\u30db\u30b9\u30c8\u3092\u76e3\u8996\u3059\u308b\u969b\u3001SNMP\u3068\u3044\u3046\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u4f7f\u3046\u3002\n\u305d\u306e\u969b\u3001\u76e3\u8996\u3055\u308c\u308b\u5074\u306b\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u5165\u308c\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3001\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u3046\u3002\n\n```\n# yum -y install net-snmp net-snmp-utils\n```\n\n#\u8a2d\u5b9a\n\n\u9577\u3044\u305f\u3081\u629c\u7c8b\u3068\u3059\u308b\u3002\n##\n```/etc/snmp/snmpd.conf\n#       sec.name   source        community\ncom2sec local      localhost     public\ncom2sec devNetwork 192.168.56.20 public\n\n# Second, map the security name into a group name:\n#       groupName      securityModel securityName\ngroup   devGroup       v1          devNetwork\n\n# Third, create a view for us to let the group have rights to:\n\n# Make at least  snmpwalk -v 1 localhost -c public system fast again.\n#       name           incl/excl     subtree         mask(optional)\nview all included .1 80\n\n# Finally, grant the group read-only access to the systemview view.\n#       group          context sec.model sec.level prefix read   write  notif\naccess devGroup \"\" any noauth exact all all none\n```\n\nv1 \u3068\u3057\u3066\u3044\u308b\u304c\u3001[\u3053\u306e\u3042\u305f\u308a](http://www.itmedia.co.jp/enterprise/articles/0705/16/news011_2.html)\u3092\u8aad\u3080\u9650\u308av2\u304c\u671b\u307e\u3057\u3044\u306e\u3060\u3068\u601d\u3046\u3002\n\n##snmpwalk\u3067\u78ba\u8a8d\n\u76e3\u8996\u3059\u308b\u5074\u304b\u3089\u3001\u76e3\u8996\u5bfe\u8c61\u306e\u60c5\u5831\u304c\u53d6\u5f97\u3067\u304d\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002\n\n```\n# snmpwalk -v 1 192.168.56.10 -c public\nSNMPv2-MIB::sysDescr.0 = STRING: Linux localhost.localdomain 3.10.0-229.20.1.el7.x86_64 #1 SMP Tue Nov 3 19:10:07 UTC 2015 x86_64\nSNMPv2-MIB::sysObjectID.0 = OID: NET-SNMP-MIB::netSnmpAgentOIDs.10\nDISMAN-EVENT-MIB::sysUpTimeInstance = Timeticks: (278040) 0:46:20.40\nSNMPv2-MIB::sysContact.0 = STRING: Root <root@localhost> (configure /etc/snmp/snmp.local.conf)\nSNMPv2-MIB::sysName.0 = STRING: localhost.localdomain\nSNMPv2-MIB::sysLocation.0 = STRING: Unknown (edit /etc/snmp/snmpd.conf)\nSNMPv2-MIB::sysORLastChange.0 = Timeticks: (3) 0:00:00.03\nSNMPv2-MIB::sysORID.1 = OID: SNMP-MPD-MIB::snmpMPDCompliance\nSNMPv2-MIB::sysORID.2 = OID: SNMP-USER-BASED-SM-MIB::usmMIBCompliance\nSNMPv2-MIB::sysORID.3 = OID: SNMP-FRAMEWORK-MIB::snmpFrameworkMIBCompliance\nSNMPv2-MIB::sysORID.4 = OID: SNMPv2-MIB::snmpMIB\nSNMPv2-MIB::sysORID.5 = OID: TCP-MIB::tcpMIB\nSNMPv2-MIB::sysORID.6 = OID: IP-MIB::ip\nSNMPv2-MIB::sysORID.7 = OID: UDP-MIB::udpMIB\nSNMPv2-MIB::sysORID.8 = OID: SNMP-VIEW-BASED-ACM-MIB::vacmBasicGroup\nSNMPv2-MIB::sysORID.9 = OID: SNMP-NOTIFICATION-MIB::snmpNotifyFullCompliance\nSNMPv2-MIB::sysORID.10 = OID: NOTIFICATION-LOG-MIB::notificationLogMIB\nSNMPv2-MIB::sysORDescr.1 = STRING: The MIB for Message Processing and Dispatching.\nSNMPv2-MIB::sysORDescr.2 = STRING: The management information definitions for the SNMP User-based Security Model.\nSNMPv2-MIB::sysORDescr.3 = STRING: The SNMP Management Architecture MIB.\n\u7701\u7565\n```\n\n##\u30b5\u30fc\u30d3\u30b9\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n\n```\n# systemctl enable snmpd\n```\n\n##\u8d77\u52d5\n\n```\n# systemctl start snmpd\n```\n\n#Cacti\u306e\u8a2d\u5b9a\n##\u30c7\u30d0\u30a4\u30b9\u767b\u9332\n\n\u30e1\u30cb\u30e5\u30fc\u304b\u3089\"Device\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u753b\u9762\u9077\u79fb\u5f8c\u53f3\u4e0a\u306e\"Add\"\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3002\n\u30c7\u30d0\u30a4\u30b9\u306e\u60c5\u5831\u3092\u5165\u529b\u3057\u3001\"create\"\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3059\u308b\u3002\n\n\u6b63\u5e38\u306b\u767b\u9332\u3067\u304d\u308b\u3068\u3001\"SNMP Information\"\u306e\u4e0b\u306bSNMP\u3067\u53d6\u5f97\u3057\u305f\u60c5\u5831\u304c\u8868\u793a\u3055\u308c\u308b\u3002\n\u5c1a\u3001\"SNMP\u30a8\u30e9\u30fc\"\u3068\u8868\u793a\u3055\u308c\u308b\u5834\u5408\u306f\u3001SNMP\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u304c\u76e3\u8996\u5bfe\u8c61\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u3001\n\u8a2d\u5b9a\u304c\u8aa4\u3063\u3066\u3044\u308b\u3068\u601d\u308f\u308c\u308b\u3002\n\n![add_device.png](https://qiita-image-store.s3.amazonaws.com/0/65994/e1c6ddcc-54c2-1a65-073b-c6f3119b6728.png)\n\n##\u30b0\u30e9\u30d5\u8a2d\u5b9a\n\n\"New Graph\"\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3002\n\"Create\"\u30d7\u30eb\u30c0\u30a6\u30f3\u304b\u3089\u76e3\u8996\u3057\u305f\u3044\u9805\u76ee\u3092\u9078\u629e\u3057\u3001\"Create\"\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3059\u308b\u3002\n\n![Capture 2016-04-21 20.46.12.png](https://qiita-image-store.s3.amazonaws.com/0/65994/bfd1eef0-a865-bcd5-0f63-06b9b75e0e05.png)\n\n#\u52d5\u4f5c\u78ba\u8a8d\n\n\u753b\u9762\u4e0a\u90e8\u306e\"graphs\"\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u30b0\u30e9\u30d5\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\uff08cron\u304c\u5b9f\u884c\u3055\u308c\u308b\u307e\u3067\u5f85\u3064\u3053\u3068\uff09\n\n![Capture 2016-04-22 1.23.25.png](https://qiita-image-store.s3.amazonaws.com/0/65994/5ff19ffe-5af7-494e-d981-583686805b8a.png)\n\n\n#\u304a\u308f\u308a\u306b\nsnmpd\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u8a2d\u5b9a\u3068\u3001Cacti\u3067\u306e\u30b0\u30e9\u30d5\u8868\u793a\u8a2d\u5b9a\u3092\u884c\u3063\u305f\u3002\nsnmpd.conf\u306b\u3064\u3044\u3066\u4eca\u56de\u306f\u7c21\u6613\u306a\u8a2d\u5b9a\u3067\u6e08\u307e\u305b\u305f\u304c\u3001\nSNMP\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u653b\u6483\u306e\u8e0f\u307f\u53f0\u306b\u60aa\u7528\u3055\u308c\u308b\u5371\u967a\u3082\u3042\u308b\u305f\u3081\u3001\n\u5b66\u7fd2\u76ee\u7684\u306e\u5229\u7528\u3067\u3042\u3063\u3066\u3082\u982d\u306e\u7247\u9685\u306b\u7f6e\u3044\u3066\u304a\u3044\u305f\u307b\u3046\u304c\u826f\u3044\u3068\u601d\u3046\u3002\n", "tags": ["cacti", "snmp", "snmpwalk", "centos7"]}