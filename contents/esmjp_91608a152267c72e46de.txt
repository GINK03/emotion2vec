{"context": " More than 1 year has passed since last update.mac\u306eboot2docker\u4e0a\u306edocker\u30b3\u30f3\u30c6\u30ca\u3067centos6+elasticsearch1.4+kibana4+td-agent2\u3092\u7acb\u3066\u3066\u307f\u308b\n\u30b5\u30f3\u30d7\u30eb\u3067td-agent2\u3067\u53ce\u96c6\u3057\u305fdstat\u306e\u5024\u3092\u6d41\u3057\u8fbc\u3080\n\n\u30b3\u30f3\u30c6\u30ca\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nOS\u30b3\u30f3\u30c6\u30ca\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n$ docker pull centos:centos6\nStatus: Downloaded newer image for centos:centos6\n\n\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\n$ docker run --name kibana4 -t -i -p 5601:5601 centos:centos6 /bin/bash\n\n\n\u5fc5\u8981\u306a\u3082\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# yum groupinstall 'Development tools'\n\u301c\u7701\u7565\u301c\nwarning: rpmts_HdrFromFdno: Header V3 RSA/SHA256 Signature, key ID c105b9de: NOKEY\nRetrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6\nImporting GPG key 0xC105B9DE:\n Userid : CentOS-6 Key (CentOS 6 Official Signing Key) <centos-6-key@centos.org>\n Package: centos-release-6-6.el6.centos.12.2.x86_64 (@CentOS/$releasever)\n From   : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6\nIs this ok [y/N]: y  # \u2190\uff59 enter\n\u301c\u7701\u7565\u301c\nComplete!\n\n# yum install which\n\u301c\u7701\u7565\u301c\nInstalled:\n  which.x86_64 0:2.19-6.el6                                                                                             \n\nComplete!\n\n# yum install wget\n\u301c\u7701\u7565\u301c\nInstalled:\n  wget.x86_64 0:1.12-5.el6_6.1                                                                                          \n\nComplete!\n\n# yum install tar\n\u301c\u7701\u7565\u301c\nInstalled:\n  tar.x86_64 2:1.23-11.el6                                                                                              \n\nComplete!\n\n# yum install sudo\nInstalled:\n  sudo.x86_64 0:1.8.6p3-15.el6                                                                                                                                                                \n\nComplete!\n\n# yum install curl-devel\nInstalled:\n  libcurl-devel.x86_64 0:7.19.7-40.el6_6.1                                                                                                                                                          \n\nDependency Installed:\n  libidn-devel.x86_64 0:1.18-2.el6                                                                                                                                                                  \n\nComplete!\n\n# yum install dstat\n\u301c\u7701\u7565\u301c\nInstalled:\n  dstat.noarch 0:0.7.0-1.el6                                                                                                                                                                  \n\nComplete!\n\n\n\njdk\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# yum install java-1.7.0-openjdk\n\u301c\u7701\u7565\u301c\nImporting GPG key 0xC105B9DE:\n Userid : CentOS-6 Key (CentOS 6 Official Signing Key) <centos-6-key@centos.org>\n Package: centos-release-6-6.el6.centos.12.2.x86_64 (@CentOS/$releasever)\n From   : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6\nIs this ok [y/N]: y\n\u301c\u7701\u7565\u301c\nInstalled:\n  java-1.7.0-openjdk.x86_64 1:1.7.0.71-2.5.3.1.el6                                                                      \n\nDependency Installed:\n  alsa-lib.x86_64 0:1.0.22-3.el6                             atk.x86_64 0:1.30.0-1.el6                                  \n  avahi-libs.x86_64 0:0.6.25-15.el6                          cairo.x86_64 0:1.8.8-3.1.el6                               \n  cups-libs.x86_64 1:1.4.2-67.el6                            flac.x86_64 0:1.2.1-6.1.el6                                \n  fontconfig.x86_64 0:2.8.0-5.el6                            freetype.x86_64 0:2.3.11-14.el6_3.1                        \n  gdk-pixbuf2.x86_64 0:2.24.1-5.el6                          giflib.x86_64 0:4.1.6-3.1.el6                              \n  gnutls.x86_64 0:2.8.5-14.el6_5                             gtk2.x86_64 0:2.24.23-6.el6                                \n  hicolor-icon-theme.noarch 0:0.11-1.1.el6                   jasper-libs.x86_64 0:1.900.1-15.el6_1.1                    \n  jpackage-utils.noarch 0:1.7.5-3.12.el6                     libICE.x86_64 0:1.0.6-1.el6                                \n  libSM.x86_64 0:1.2.1-2.el6                                 libX11.x86_64 0:1.6.0-2.2.el6                              \n  libX11-common.noarch 0:1.6.0-2.2.el6                       libXau.x86_64 0:1.0.6-4.el6                                \n  libXcomposite.x86_64 0:0.4.3-4.el6                         libXcursor.x86_64 0:1.1.14-2.1.el6                         \n  libXdamage.x86_64 0:1.1.3-4.el6                            libXext.x86_64 0:1.3.2-2.1.el6                             \n  libXfixes.x86_64 0:5.0.1-2.1.el6                           libXfont.x86_64 0:1.4.5-4.el6_6                            \n  libXft.x86_64 0:2.3.1-2.el6                                libXi.x86_64 0:1.7.2-2.2.el6                               \n  libXinerama.x86_64 0:1.1.3-2.1.el6                         libXrandr.x86_64 0:1.4.1-2.1.el6                           \n  libXrender.x86_64 0:0.9.8-2.1.el6                          libXtst.x86_64 0:1.2.2-2.1.el6                             \n  libasyncns.x86_64 0:0.8-1.1.el6                            libfontenc.x86_64 0:1.0.5-2.el6                            \n  libjpeg-turbo.x86_64 0:1.2.1-3.el6_5                       libogg.x86_64 2:1.1.4-2.1.el6                              \n  libpng.x86_64 2:1.2.49-1.el6_2                             libsndfile.x86_64 0:1.0.20-5.el6                           \n  libthai.x86_64 0:0.1.12-3.el6                              libtiff.x86_64 0:3.9.4-10.el6_5                            \n  libvorbis.x86_64 1:1.2.3-4.el6_2.1                         libxcb.x86_64 0:1.9.1-2.el6                                \n  pango.x86_64 0:1.28.1-10.el6                               pixman.x86_64 0:0.32.4-4.el6                               \n  pulseaudio-libs.x86_64 0:0.9.21-17.el6                     tcp_wrappers-libs.x86_64 0:7.6-57.el6                      \n  ttmkfdir.x86_64 0:3.0.9-32.1.el6                           tzdata-java.noarch 0:2014j-1.el6                           \n  xorg-x11-font-utils.x86_64 1:7.2-11.el6                    xorg-x11-fonts-Type1.noarch 0:7.2-9.1.el6                  \n\nComplete!\n\n# yum install java-1.7.0-openjdk-devel\n\u301c\u7701\u7565\u301c\nInstalled:\n  java-1.7.0-openjdk-devel.x86_64 1:1.7.0.71-2.5.3.1.el6                                                                \n\nComplete!\n\n\nelasticsearch\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# rpm --import http://packages.elasticsearch.org/GPG-KEY-elasticsearch\n\n# vi /etc/yum.repos.d/elasticsearch.repo\n[elasticsearch-1.4]\nname=Elasticsearch repository for 1.4.x packages\nbaseurl=http://packages.elasticsearch.org/elasticsearch/1.4/centos\ngpgcheck=1\ngpgkey=http://packages.elasticsearch.org/GPG-KEY-elasticsearch\nenabled=1\n\n# yum install elasticsearch\nInstalled:\n  elasticsearch.noarch 0:1.4.0-1                                                                                        \n\nComplete!\n\n\nelasticsearch\u8d77\u52d5\n# /etc/init.d/elasticsearch start\nerror: \"Read-only file system\" setting key \"vm.max_map_count\"\nStarting elasticsearch:                                    [  OK  ]\n\n\nkibana4 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# cd /tmp\n# wget https://download.elasticsearch.org/kibana/kibana/kibana-4.0.0-BETA2.tar.gz\n--2014-11-22 13:26:47--  https://download.elasticsearch.org/kibana/kibana/kibana-4.0.0-BETA2.tar.gz\nResolving download.elasticsearch.org... 54.243.77.158, 54.225.133.195, 107.22.222.16, ...\nConnecting to download.elasticsearch.org|54.243.77.158|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 22874131 (22M) [application/octet-stream]\nSaving to: \u201ckibana-4.0.0-BETA2.tar.gz\u201d\n\n100%[==============================================================================>] 22,874,131   821K/s   in 49s     \n\n2014-11-22 13:27:37 (459 KB/s) - \u201ckibana-4.0.0-BETA2.tar.gz\u201d saved [22874131/22874131]\n# tar zxvf kibana-4.0.0-BETA2.tar.gz \n# cd kibana-4.0.0-BETA2/bin/\n# ./kibana &\n\n\ntd-agent2\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# curl -L http://toolbelt.treasuredata.com/sh/install-redhat-td-agent2.sh | sh\n\u301c\u7701\u7565\u301c\nInstalled:\n  td-agent.x86_64 0:2.1.2-0                                                                                                                                                                   \n\nComplete!\n\n\nelasticsearch plugin\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n# /opt/td-agent/embedded/bin/gem install fluent-plugin-elasticsearch --no-ri --no-rdoc -V\n\n\ndstat plugin\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n# /opt/td-agent/embedded/bin/gem install fluent-plugin-dstat --no-ri --no-rdoc -V\n\n\ntd-agent.conf\u7de8\u96c6\n# vi /etc/td-agent/td-agent.conf\n## OS Performance\n<source>\n  type dstat\n  tag perf.dstat\n  option -lcmdn     # \u2190\u30ed\u30fc\u30c9\u30a2\u30d9\u30ec\u30fc\u30b8\u3001CPU\u3001\u30e1\u30e2\u30ea\u3001\u30c7\u30a3\u30b9\u30afIO\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af(Byte)\u306e\u53ce\u96c6\n  delay 1               # \u2190\u5468\u671f\u306e\u8a2d\u5b9a\u3067\u3059\uff08\u5358\u4f4d\u306f\u79d2\uff09\n</source>\n\n## ElasticSearch Insert\n<match perf.**>\n  type elasticsearch\n  type_name performance\n  include_tag_key true\n  tag_key tag\n  host 127.0.0.1\n  port 9200\n  logstash_format true\n  logstash_prefix perf\n  flush_interval 1s\n</match>\n\n\n\ntd-agent\u8d77\u52d5\n# /etc/init.d/td-agent start\n\n\nmac\u306eboot2docker\u4e0a\u306edocker\u30b3\u30f3\u30c6\u30ca\u3067centos6+elasticsearch1.4+kibana4+td-agent2\u3092\u7acb\u3066\u3066\u307f\u308b\n\u30b5\u30f3\u30d7\u30eb\u3067td-agent2\u3067\u53ce\u96c6\u3057\u305fdstat\u306e\u5024\u3092\u6d41\u3057\u8fbc\u3080\n\n##\u30b3\u30f3\u30c6\u30ca\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nOS\u30b3\u30f3\u30c6\u30ca\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n```\n$ docker pull centos:centos6\nStatus: Downloaded newer image for centos:centos6\n```\n\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\n\n```\n$ docker run --name kibana4 -t -i -p 5601:5601 centos:centos6 /bin/bash\n```\n\n##\u5fc5\u8981\u306a\u3082\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n# yum groupinstall 'Development tools'\n\u301c\u7701\u7565\u301c\nwarning: rpmts_HdrFromFdno: Header V3 RSA/SHA256 Signature, key ID c105b9de: NOKEY\nRetrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6\nImporting GPG key 0xC105B9DE:\n Userid : CentOS-6 Key (CentOS 6 Official Signing Key) <centos-6-key@centos.org>\n Package: centos-release-6-6.el6.centos.12.2.x86_64 (@CentOS/$releasever)\n From   : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6\nIs this ok [y/N]: y  # \u2190\uff59 enter\n\u301c\u7701\u7565\u301c\nComplete!\n\n# yum install which\n\u301c\u7701\u7565\u301c\nInstalled:\n  which.x86_64 0:2.19-6.el6                                                                                             \n\nComplete!\n\n# yum install wget\n\u301c\u7701\u7565\u301c\nInstalled:\n  wget.x86_64 0:1.12-5.el6_6.1                                                                                          \n\nComplete!\n\n# yum install tar\n\u301c\u7701\u7565\u301c\nInstalled:\n  tar.x86_64 2:1.23-11.el6                                                                                              \n\nComplete!\n\n# yum install sudo\nInstalled:\n  sudo.x86_64 0:1.8.6p3-15.el6                                                                                                                                                                \n\nComplete!\n\n# yum install curl-devel\nInstalled:\n  libcurl-devel.x86_64 0:7.19.7-40.el6_6.1                                                                                                                                                          \n\nDependency Installed:\n  libidn-devel.x86_64 0:1.18-2.el6                                                                                                                                                                  \n\nComplete!\n\n# yum install dstat\n\u301c\u7701\u7565\u301c\nInstalled:\n  dstat.noarch 0:0.7.0-1.el6                                                                                                                                                                  \n\nComplete!\n\n```\n\n\n##jdk\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n# yum install java-1.7.0-openjdk\n\u301c\u7701\u7565\u301c\nImporting GPG key 0xC105B9DE:\n Userid : CentOS-6 Key (CentOS 6 Official Signing Key) <centos-6-key@centos.org>\n Package: centos-release-6-6.el6.centos.12.2.x86_64 (@CentOS/$releasever)\n From   : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6\nIs this ok [y/N]: y\n\u301c\u7701\u7565\u301c\nInstalled:\n  java-1.7.0-openjdk.x86_64 1:1.7.0.71-2.5.3.1.el6                                                                      \n\nDependency Installed:\n  alsa-lib.x86_64 0:1.0.22-3.el6                             atk.x86_64 0:1.30.0-1.el6                                  \n  avahi-libs.x86_64 0:0.6.25-15.el6                          cairo.x86_64 0:1.8.8-3.1.el6                               \n  cups-libs.x86_64 1:1.4.2-67.el6                            flac.x86_64 0:1.2.1-6.1.el6                                \n  fontconfig.x86_64 0:2.8.0-5.el6                            freetype.x86_64 0:2.3.11-14.el6_3.1                        \n  gdk-pixbuf2.x86_64 0:2.24.1-5.el6                          giflib.x86_64 0:4.1.6-3.1.el6                              \n  gnutls.x86_64 0:2.8.5-14.el6_5                             gtk2.x86_64 0:2.24.23-6.el6                                \n  hicolor-icon-theme.noarch 0:0.11-1.1.el6                   jasper-libs.x86_64 0:1.900.1-15.el6_1.1                    \n  jpackage-utils.noarch 0:1.7.5-3.12.el6                     libICE.x86_64 0:1.0.6-1.el6                                \n  libSM.x86_64 0:1.2.1-2.el6                                 libX11.x86_64 0:1.6.0-2.2.el6                              \n  libX11-common.noarch 0:1.6.0-2.2.el6                       libXau.x86_64 0:1.0.6-4.el6                                \n  libXcomposite.x86_64 0:0.4.3-4.el6                         libXcursor.x86_64 0:1.1.14-2.1.el6                         \n  libXdamage.x86_64 0:1.1.3-4.el6                            libXext.x86_64 0:1.3.2-2.1.el6                             \n  libXfixes.x86_64 0:5.0.1-2.1.el6                           libXfont.x86_64 0:1.4.5-4.el6_6                            \n  libXft.x86_64 0:2.3.1-2.el6                                libXi.x86_64 0:1.7.2-2.2.el6                               \n  libXinerama.x86_64 0:1.1.3-2.1.el6                         libXrandr.x86_64 0:1.4.1-2.1.el6                           \n  libXrender.x86_64 0:0.9.8-2.1.el6                          libXtst.x86_64 0:1.2.2-2.1.el6                             \n  libasyncns.x86_64 0:0.8-1.1.el6                            libfontenc.x86_64 0:1.0.5-2.el6                            \n  libjpeg-turbo.x86_64 0:1.2.1-3.el6_5                       libogg.x86_64 2:1.1.4-2.1.el6                              \n  libpng.x86_64 2:1.2.49-1.el6_2                             libsndfile.x86_64 0:1.0.20-5.el6                           \n  libthai.x86_64 0:0.1.12-3.el6                              libtiff.x86_64 0:3.9.4-10.el6_5                            \n  libvorbis.x86_64 1:1.2.3-4.el6_2.1                         libxcb.x86_64 0:1.9.1-2.el6                                \n  pango.x86_64 0:1.28.1-10.el6                               pixman.x86_64 0:0.32.4-4.el6                               \n  pulseaudio-libs.x86_64 0:0.9.21-17.el6                     tcp_wrappers-libs.x86_64 0:7.6-57.el6                      \n  ttmkfdir.x86_64 0:3.0.9-32.1.el6                           tzdata-java.noarch 0:2014j-1.el6                           \n  xorg-x11-font-utils.x86_64 1:7.2-11.el6                    xorg-x11-fonts-Type1.noarch 0:7.2-9.1.el6                  \n\nComplete!\n\n# yum install java-1.7.0-openjdk-devel\n\u301c\u7701\u7565\u301c\nInstalled:\n  java-1.7.0-openjdk-devel.x86_64 1:1.7.0.71-2.5.3.1.el6                                                                \n\nComplete!\n```\n\n\n##elasticsearch\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n# rpm --import http://packages.elasticsearch.org/GPG-KEY-elasticsearch\n\n# vi /etc/yum.repos.d/elasticsearch.repo\n[elasticsearch-1.4]\nname=Elasticsearch repository for 1.4.x packages\nbaseurl=http://packages.elasticsearch.org/elasticsearch/1.4/centos\ngpgcheck=1\ngpgkey=http://packages.elasticsearch.org/GPG-KEY-elasticsearch\nenabled=1\n\n# yum install elasticsearch\nInstalled:\n  elasticsearch.noarch 0:1.4.0-1                                                                                        \n\nComplete!\n```\n\n##elasticsearch\u8d77\u52d5\n\n```\n# /etc/init.d/elasticsearch start\nerror: \"Read-only file system\" setting key \"vm.max_map_count\"\nStarting elasticsearch:                                    [  OK  ]\n```\n\n\n##kibana4 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n# cd /tmp\n# wget https://download.elasticsearch.org/kibana/kibana/kibana-4.0.0-BETA2.tar.gz\n--2014-11-22 13:26:47--  https://download.elasticsearch.org/kibana/kibana/kibana-4.0.0-BETA2.tar.gz\nResolving download.elasticsearch.org... 54.243.77.158, 54.225.133.195, 107.22.222.16, ...\nConnecting to download.elasticsearch.org|54.243.77.158|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 22874131 (22M) [application/octet-stream]\nSaving to: \u201ckibana-4.0.0-BETA2.tar.gz\u201d\n\n100%[==============================================================================>] 22,874,131   821K/s   in 49s     \n\n2014-11-22 13:27:37 (459 KB/s) - \u201ckibana-4.0.0-BETA2.tar.gz\u201d saved [22874131/22874131]\n# tar zxvf kibana-4.0.0-BETA2.tar.gz \n# cd kibana-4.0.0-BETA2/bin/\n# ./kibana &\n```\n\n\n##td-agent2\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n# curl -L http://toolbelt.treasuredata.com/sh/install-redhat-td-agent2.sh | sh\n\u301c\u7701\u7565\u301c\nInstalled:\n  td-agent.x86_64 0:2.1.2-0                                                                                                                                                                   \n\nComplete!\n```\n\n##elasticsearch plugin\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n```\n# /opt/td-agent/embedded/bin/gem install fluent-plugin-elasticsearch --no-ri --no-rdoc -V\n```\n\t\n##dstat plugin\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n```\n# /opt/td-agent/embedded/bin/gem install fluent-plugin-dstat --no-ri --no-rdoc -V\n```\n\n\n##td-agent.conf\u7de8\u96c6\n\n```\n# vi /etc/td-agent/td-agent.conf\n## OS Performance\n<source>\n  type dstat\n  tag perf.dstat\n  option -lcmdn     # \u2190\u30ed\u30fc\u30c9\u30a2\u30d9\u30ec\u30fc\u30b8\u3001CPU\u3001\u30e1\u30e2\u30ea\u3001\u30c7\u30a3\u30b9\u30afIO\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af(Byte)\u306e\u53ce\u96c6\n  delay 1               # \u2190\u5468\u671f\u306e\u8a2d\u5b9a\u3067\u3059\uff08\u5358\u4f4d\u306f\u79d2\uff09\n</source>\n\n## ElasticSearch Insert\n<match perf.**>\n  type elasticsearch\n  type_name performance\n  include_tag_key true\n  tag_key tag\n  host 127.0.0.1\n  port 9200\n  logstash_format true\n  logstash_prefix perf\n  flush_interval 1s\n</match>\n\n```\n\n##td-agent\u8d77\u52d5\n\n```\n# /etc/init.d/td-agent start\n", "tags": ["docker", "Kibana4", "Elasticsearch", "td-agent2"]}