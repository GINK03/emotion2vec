{"tags": ["Swift", "iOS", "Swift3.0", "Xcode"], "context": "(\u8ffd\u8a18) \u6b63\u3057\u3044\u4f7f\u3044\u65b9\u306f @mono0926 \u3055\u3093\u304c\u3053\u3061\u3089\u306b\u3066\u66f8\u3044\u3066\u3044\u307e\u3059\u306e\u3067\u305d\u3061\u3089\u3078\u3069\u3046\u305e  \n\nSwift 3 \u4ee5\u964d\u306e NotificationCenter \u306e\u6b63\u3057\u3044\u4f7f\u3044\u65b9\n\n\u56de\u308c\u53f3\u3002\n\n\u203b\u4ee5\u4e0b\u306e\u5185\u5bb9\u306f\u4e00\u5fdc\u30a2\u30fc\u30ab\u30a4\u30d6\u3068\u3057\u3066\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u304c\u3001\u826f\u304d\u4f7f\u3044\u65b9\u3067\u306f\u306a\u3044\u306e\u3067\u3054\u4e86\u627f\u304f\u3060\u3055\u3044\u307e\u305b\u3002\n\n\n\n\nSwift3.0\u3067\u5909\u308f\u3063\u305fNSNotificationCenter\nSwift2\u304b\u3089Swift3\u306b\u5909\u308f\u3063\u3066\u3001Foundation\u7cfb\u306b\u3082\u624b\u304c\u52a0\u3048\u3089\u308c\u3001 NSNotificationCenter \u5468\u308a\u306b\u3082\u5909\u66f4\u304c\u3042\u308a\u307e\u3057\u305f\u3002\nSwift2.2\u3068Swift3.0\u3067addObserve\u3059\u308b\u5834\u5408\u306e\u540c\u3058\u51e6\u7406\u3092\u898b\u6bd4\u3079\u3066\u307f\u307e\u3059\u3002\n\nSwift2\nclass Hoge {\n    @objc func doSomething(notification: Notification) {\n        // ...\n    }\n}\n\nNSNotificationCenter.defaultCenter().addObserver(\n    self, \n    selector: #selector(hoge.doSomething(_:)), \n    name: \"NotificationKey\", \n    object: nil\n)\n\n\n\n\nSwift3\nclass Hoge {\n    @objc func doSomething(_ notification: Notification) {\n        // ...\n    }\n}\n\nlet hoge = Hoge()\nNotificationCenter.default.addObserver(\n    hoge, \n    selector: #selector(hoge.doSomething(_:)), \n    name: NSNotification.Name(\"NotificationKey\"),  //\u304a\u3084...?\n    object: nil\n)\n\n\n\n\u3053\u3053\u3067\u3001 NSNotification.Name \u3068\u3044\u3046\u898b\u6163\u308c\u306a\u3044\u3082\u306e\u304c\u3067\u3066\u304d\u307e\u3057\u305f\u3002\n(\u3061\u306a\u307f\u306b Notification.Name \u3082\u306e\u3082\u3042\u3063\u3066\u3001\u8fbf\u308b\u3068 NSNotification.Name \u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u307b\u307c\u540c\u7fa9\u3067\u3059\u3002\u3069\u3061\u3089\u3067\u66f8\u3044\u3066\u3082\u9593\u9055\u3044\u3067\u306f\u306a\u3055\u305d\u3046\u3002)\n\u3069\u3046\u3084\u3089Swift3\u304b\u3089\u306f\u901a\u77e5\u3092\u767a\u884c\u3059\u308b\u305f\u3081\u306ename\u306fString\u3067\u306f\u306a\u304f\u3066\u3053\u306eNSNotification.Name\u3092\u4f7f\u3048\u3068\u306a\u3063\u305f\u3088\u3046\u3067\u3059\u3002\n\u3057\u304b\u3057\u3001\u3053\u308c\u6bce\u56de\nNSNotification.Name(\"SomeNotificationKey\")\n\n\u3063\u3066\u3084\u308b\u306e \u3057\u3093\u3069\u3044 \u3067\u3059\u3088\u306d\u3002\n\u306a\u306e\u3067\u3001\u4eca\u307e\u3067\u3069\u304a\u308a\u306e\u5f62\u306b\u8fd1\u3044\u611f\u3058\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\n\n\u9b54\u6cd5\u3092\u304b\u3051\u308b\n\u3067\u304d\u308c\u3070\u4eca\u307e\u3067\u3069\u304a\u308a name: \"NotificationKey\" \u3068\u66f8\u304d\u305f\u3044\u306e\u3067\u3001 NSNotification.Name \u306b\u9b54\u6cd5\u3092\u304b\u3051\u307e\u3059\u3002\n\u3053\u3053\u3067\u3001 ExpressibleByStringLiteral \u3068\u3044\u3046protocol\u306e\u51fa\u756a\u3068\u306a\u308a\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u3001\u3053\u306e ExpressibleByStringLiteral \u306f\u3001Swift2\u3067\u306f StringLiteralConvertible \u3068\u3044\u3046\u540d\u524d\u3067\u3057\u305f\u3002\n\nExpressibleByStringLiteral\u3092Notification.Name\u306b\u9069\u5fdc\u3055\u305b\u308b\nextension NSNotification.Name: ExpressibleByStringLiteral {\n    public init(unicodeScalarLiteral value: String) {\n        self.init(rawValue: value)\n    }\n\n    public init(extendedGraphemeClusterLiteral value: String) {\n        self.init(rawValue: value)\n    }\n\n    public init(stringLiteral value: String) {\n        self.init(rawValue: value)\n    }\n}\n\n\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u3001\n// good!\nNotificationCenter.default.addObserver(\n    hoge, \n    selector: #selector(hoge.doSomething(_:)), \n    name: \"NotificationKey\", \n    object: nil\n)\n\n\u3053\u306e\u3088\u3046\u306b\u3001\u6587\u5b57\u30ea\u30c6\u30e9\u30eb(\"\")\u3092\u4f7f\u3063\u3066\u4eca\u307e\u3067\u3069\u304a\u308a\u306e\u66f8\u304d\u65b9\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n...\u3048\u3001\u3053\u308c\u304c \u5909\u6570\u306e\u5834\u5408\u306f\u3069\u3046\u3059\u308b\u306e\uff1f \u3063\u3066\u306a\u308a\u307e\u3059\u3088\u306d\u3002\n\u305d\u306e\u5834\u5408\u306f\u3001\u5909\u6570\u3092\u5b9a\u7fa9\u3059\u308b\u578b\u3092 Notification.Name \u306b\u3057\u307e\u3059\u3002\n\nclass Hoge {\n    // \u5de6\u8fba\u5074\u3067\u578b\u3092\u6307\u5b9a\u3057\u3066\u3042\u3052\u308b\u3053\u3068\u3067\u3001\u53f3\u8fba\u306fString\u3067\u306f\u306a\u304f\u3066\u3001Notification.Name\u3068\u63a8\u8ad6\u3055\u308c\u308b\n    static let NotificationKey: NSNotification.Name = \"NotificationKey\"\n\n    // NG : \u4eca\u307e\u3067\u3069\u304a\u308a\u306e\u5ba3\u8a00\u3060\u3068\u3001String\u3068\u63a8\u8ad6\u3055\u308c\u308b\n    // static let NotificationKey = \"NotificationKey\"\n\n    @objc func doSomething(_ notification: Notification) {\n        // ...\n    }\n}\n\n// good!\nNotificationCenter.default.addObserver(\n    hoge, \n    selector: #selector(hoge.doSomething(_:)), \n    name: Hoge.NotificationKey,  // \u4eca\u307e\u3067\u3069\u304a\u308a\u3044\u3051\u308b\uff01\n    object: nil\n)\n\n\n\u307e\u3068\u3081\nSwift3\u306b\u306a\u3063\u3066 NSNotification.Name \u3068\u304b\u51fa\u3066\u304d\u3066\u3061\u3087\u3063\u3068\u602f\u3093\u3060\u306e\u3067\u3059\u304c\u3001\u5c11\u3057\u5de5\u592b\u3057\u3066\u3042\u3052\u308b\u3068\u6271\u3044\u3084\u3059\u304f\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002 ExpressibleByStringLiteral \u3042\u308a\u304c\u3068\u3046\u3002\n\n\u304a\u307e\u3051\n\u305d\u3053\u305d\u3053\u5229\u7528\u983b\u5ea6\u306e\u9ad8\u3044\u3001UIApplicationDidBecomeActiveNotification \u3068\u3044\u3063\u305fUIApplication\u5468\u308a\u306eNotification\u306ekey\u306b\u95a2\u3057\u3066\u306f\u3001\n// swift2\u307e\u3067\u306f\u3053\u308c\nUIApplicationDidBecomeActiveNotification\n// swift3\u304b\u3089\u306f\u3053\u308c\nNSNotification.Name.UIApplicationDidBecomeActive\n\n\u306e\u3088\u3046\u306b\u5909\u308f\u3063\u305f\u306e\u3067\u6c17\u3092\u3064\u3051\u307e\u3057\u3087\u3046\u3002\u3082\u3057\u304b\u3057\u305f\u3089\u81ea\u52d5\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306a\u308a\u88dc\u5b8c\u304c\u52b9\u304f\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3002\u3002\u3002\n(\u6700\u521d\u3069\u3053\u306b\u884c\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u304b\u6c17\u3065\u3051\u306a\u304b\u3063\u305f...)\n(\u203b\u6ce8 Xcode8 beta6 \u6642\u70b9\u306eSwift3.0\u3092\u57fa\u306b\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\n(\u8ffd\u8a18) \u6b63\u3057\u3044\u4f7f\u3044\u65b9\u306f @mono0926 \u3055\u3093\u304c\u3053\u3061\u3089\u306b\u3066\u66f8\u3044\u3066\u3044\u307e\u3059\u306e\u3067\u305d\u3061\u3089\u3078\u3069\u3046\u305e :runner: \n\n - [Swift 3 \u4ee5\u964d\u306e NotificationCenter \u306e\u6b63\u3057\u3044\u4f7f\u3044\u65b9](http://qiita.com/mono0926/items/754c5d2dbe431542c75e)\n\n\u56de\u308c\u53f3\u3002\n<br />\n\n**\u203b\u4ee5\u4e0b\u306e\u5185\u5bb9\u306f\u4e00\u5fdc\u30a2\u30fc\u30ab\u30a4\u30d6\u3068\u3057\u3066\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u304c\u3001\u826f\u304d\u4f7f\u3044\u65b9\u3067\u306f\u306a\u3044\u306e\u3067\u3054\u4e86\u627f\u304f\u3060\u3055\u3044\u307e\u305b\u3002**\n<br />\n<br />\n\n-----\n\n## Swift3.0\u3067\u5909\u308f\u3063\u305fNSNotificationCenter\nSwift2\u304b\u3089Swift3\u306b\u5909\u308f\u3063\u3066\u3001Foundation\u7cfb\u306b\u3082\u624b\u304c\u52a0\u3048\u3089\u308c\u3001 `NSNotificationCenter` \u5468\u308a\u306b\u3082\u5909\u66f4\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\nSwift2.2\u3068Swift3.0\u3067addObserve\u3059\u308b\u5834\u5408\u306e\u540c\u3058\u51e6\u7406\u3092\u898b\u6bd4\u3079\u3066\u307f\u307e\u3059\u3002\n\n```swift:Swift2\nclass Hoge {\n    @objc func doSomething(notification: Notification) {\n        // ...\n    }\n}\n\nNSNotificationCenter.defaultCenter().addObserver(\n    self, \n    selector: #selector(hoge.doSomething(_:)), \n    name: \"NotificationKey\", \n    object: nil\n)\n\n```\n\n```swift:Swift3\nclass Hoge {\n    @objc func doSomething(_ notification: Notification) {\n        // ...\n    }\n}\n\nlet hoge = Hoge()\nNotificationCenter.default.addObserver(\n    hoge, \n    selector: #selector(hoge.doSomething(_:)), \n    name: NSNotification.Name(\"NotificationKey\"),  //\u304a\u3084...?\n    object: nil\n)\n\n```\n\n\u3053\u3053\u3067\u3001 **NSNotification.Name** \u3068\u3044\u3046\u898b\u6163\u308c\u306a\u3044\u3082\u306e\u304c\u3067\u3066\u304d\u307e\u3057\u305f\u3002\n(\u3061\u306a\u307f\u306b *Notification.Name* \u3082\u306e\u3082\u3042\u3063\u3066\u3001\u8fbf\u308b\u3068 **NSNotification.Name** \u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u307b\u307c\u540c\u7fa9\u3067\u3059\u3002\u3069\u3061\u3089\u3067\u66f8\u3044\u3066\u3082\u9593\u9055\u3044\u3067\u306f\u306a\u3055\u305d\u3046\u3002)\n\n\u3069\u3046\u3084\u3089Swift3\u304b\u3089\u306f\u901a\u77e5\u3092\u767a\u884c\u3059\u308b\u305f\u3081\u306e`name`\u306f`String`\u3067\u306f\u306a\u304f\u3066\u3053\u306e`NSNotification.Name`\u3092\u4f7f\u3048\u3068\u306a\u3063\u305f\u3088\u3046\u3067\u3059\u3002\n\u3057\u304b\u3057\u3001\u3053\u308c\u6bce\u56de\n\n```swift\nNSNotification.Name(\"SomeNotificationKey\")\n```\n\n\u3063\u3066\u3084\u308b\u306e **\u3057\u3093\u3069\u3044** \u3067\u3059\u3088\u306d\u3002\n\u306a\u306e\u3067\u3001\u4eca\u307e\u3067\u3069\u304a\u308a\u306e\u5f62\u306b\u8fd1\u3044\u611f\u3058\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\n----\n\n## \u9b54\u6cd5\u3092\u304b\u3051\u308b\n\u3067\u304d\u308c\u3070\u4eca\u307e\u3067\u3069\u304a\u308a `name: \"NotificationKey\"` \u3068\u66f8\u304d\u305f\u3044\u306e\u3067\u3001 **NSNotification.Name** \u306b\u9b54\u6cd5\u3092\u304b\u3051\u307e\u3059\u3002\n\u3053\u3053\u3067\u3001 **ExpressibleByStringLiteral** \u3068\u3044\u3046protocol\u306e\u51fa\u756a\u3068\u306a\u308a\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u3001\u3053\u306e **ExpressibleByStringLiteral** \u306f\u3001Swift2\u3067\u306f *StringLiteralConvertible* \u3068\u3044\u3046\u540d\u524d\u3067\u3057\u305f\u3002\n\n```swift:ExpressibleByStringLiteral\u3092Notification.Name\u306b\u9069\u5fdc\u3055\u305b\u308b\nextension NSNotification.Name: ExpressibleByStringLiteral {\n    public init(unicodeScalarLiteral value: String) {\n        self.init(rawValue: value)\n    }\n    \n    public init(extendedGraphemeClusterLiteral value: String) {\n        self.init(rawValue: value)\n    }\n    \n    public init(stringLiteral value: String) {\n        self.init(rawValue: value)\n    }\n}\n```\n\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u3001\n\n```swift\n// good!\nNotificationCenter.default.addObserver(\n    hoge, \n    selector: #selector(hoge.doSomething(_:)), \n    name: \"NotificationKey\", \n    object: nil\n)\n```\n\n\u3053\u306e\u3088\u3046\u306b\u3001\u6587\u5b57\u30ea\u30c6\u30e9\u30eb(`\"\"`)\u3092\u4f7f\u3063\u3066\u4eca\u307e\u3067\u3069\u304a\u308a\u306e\u66f8\u304d\u65b9\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n...\u3048\u3001\u3053\u308c\u304c **\u5909\u6570\u306e\u5834\u5408\u306f\u3069\u3046\u3059\u308b\u306e\uff1f** \u3063\u3066\u306a\u308a\u307e\u3059\u3088\u306d\u3002\n\u305d\u306e\u5834\u5408\u306f\u3001\u5909\u6570\u3092\u5b9a\u7fa9\u3059\u308b\u578b\u3092 **Notification.Name** \u306b\u3057\u307e\u3059\u3002\n\n```swift\n\nclass Hoge {\n    // \u5de6\u8fba\u5074\u3067\u578b\u3092\u6307\u5b9a\u3057\u3066\u3042\u3052\u308b\u3053\u3068\u3067\u3001\u53f3\u8fba\u306fString\u3067\u306f\u306a\u304f\u3066\u3001Notification.Name\u3068\u63a8\u8ad6\u3055\u308c\u308b\n    static let NotificationKey: NSNotification.Name = \"NotificationKey\"\n\n    // NG : \u4eca\u307e\u3067\u3069\u304a\u308a\u306e\u5ba3\u8a00\u3060\u3068\u3001String\u3068\u63a8\u8ad6\u3055\u308c\u308b\n    // static let NotificationKey = \"NotificationKey\"\n\n    @objc func doSomething(_ notification: Notification) {\n        // ...\n    }\n}\n\n// good!\nNotificationCenter.default.addObserver(\n    hoge, \n    selector: #selector(hoge.doSomething(_:)), \n    name: Hoge.NotificationKey,  // \u4eca\u307e\u3067\u3069\u304a\u308a\u3044\u3051\u308b\uff01\n    object: nil\n)\n```\n\n## \u307e\u3068\u3081\nSwift3\u306b\u306a\u3063\u3066 **NSNotification.Name** \u3068\u304b\u51fa\u3066\u304d\u3066\u3061\u3087\u3063\u3068\u602f\u3093\u3060\u306e\u3067\u3059\u304c\u3001\u5c11\u3057\u5de5\u592b\u3057\u3066\u3042\u3052\u308b\u3068\u6271\u3044\u3084\u3059\u304f\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002 **ExpressibleByStringLiteral** \u3042\u308a\u304c\u3068\u3046\u3002\n\n## \u304a\u307e\u3051\n\u305d\u3053\u305d\u3053\u5229\u7528\u983b\u5ea6\u306e\u9ad8\u3044\u3001`UIApplicationDidBecomeActiveNotification` \u3068\u3044\u3063\u305fUIApplication\u5468\u308a\u306eNotification\u306ekey\u306b\u95a2\u3057\u3066\u306f\u3001\n\n```swift\n// swift2\u307e\u3067\u306f\u3053\u308c\nUIApplicationDidBecomeActiveNotification\n// swift3\u304b\u3089\u306f\u3053\u308c\nNSNotification.Name.UIApplicationDidBecomeActive\n```\n\n\u306e\u3088\u3046\u306b\u5909\u308f\u3063\u305f\u306e\u3067\u6c17\u3092\u3064\u3051\u307e\u3057\u3087\u3046\u3002\u3082\u3057\u304b\u3057\u305f\u3089\u81ea\u52d5\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306a\u308a\u88dc\u5b8c\u304c\u52b9\u304f\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3002\u3002\u3002\n(\u6700\u521d\u3069\u3053\u306b\u884c\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u304b\u6c17\u3065\u3051\u306a\u304b\u3063\u305f...)\n\n\n\n*(\u203b\u6ce8 Xcode8 beta6 \u6642\u70b9\u306eSwift3.0\u3092\u57fa\u306b\u66f8\u3044\u3066\u3044\u307e\u3059\u3002*\n"}