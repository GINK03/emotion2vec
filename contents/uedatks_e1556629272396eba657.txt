{"context": "\n\n\u4eca\u56de\u8a66\u3059\u3053\u3068\n\u524d\u306e\u8a18\u4e8b\u3067\u3001\u65e2\u5b58 MySQL DB\u306e API\u5316\u3092\u884c\u3063\u305f\u3002\n\u5b9f\u969b\u306eAPI\u516c\u958b\u3067\u306f\u3001\u8907\u6570\u306e\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u304b\u3089\u60c5\u5831\u3092\u96c6\u3081\u3066API\u516c\u958b\u3059\u308b\u30b7\u30ca\u30ea\u30aa\u304c\u5f53\u7136\u306e\u3088\u3046\u306b\u3042\u308b\u3002\nLoopBack\u3060\u3068\u3069\u3046\u3059\u308b\uff1f\u3068\u601d\u3063\u3066\u3044\u305f\u3068\u3053\u308d\u3001LoopBack\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u300cCreating model relations\u300d\u306b\u3001\u7570\u306a\u308b\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u3092\u5b9a\u7fa9\u3057\u305f\u30e2\u30c7\u30eb\u9593\u3067\u3082relation\u3092\u6301\u3066\u308b\u3068\u3042\u3063\u305f\u306e\u3067\u3001\u3053\u3046\u3044\u3046\u30b7\u30ca\u30ea\u30aa\u306b\u3082\u4f7f\u3048\u308b\u306e\u304b\u8a66\u3057\u3066\u307f\u305f\u3002\n\nIt's important to understand that all models inherit from the Model class and they can have relations between them regardless of the specific type of model or the backing data source.  Models backed by different data sources can have relations between them.\n\nAPI Connect\u306e\u30e2\u30c7\u30eb\n- employee\u30e2\u30c7\u30eb\uff1aMySQL\u306b\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u3092\u7528\u610f\n- department\u30e2\u30c7\u30eb\uff1aPostgreSQL\u306b\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u3092\u7528\u610f\n2\u3064\u306e\u30e2\u30c7\u30eb\u306e\u95a2\u4fc2\n- department\u306b\u306f\u3001\u8907\u6570\u4eba\u306eemployee\u304c\u6240\u5c5e\n- employee\u306f\u30011\u3064\u306edepartment\u306b\u6240\u5c5e\n\n\u74b0\u5883\n\nWindows7 Professional SP1\nMySQL Ver 14.14 Distrib 5.7.11\nNode v4.2.2\nnpm v3.8.2\napiconnect v1.0.2\n(\u524d\u56de\u304b\u3089\u306e\u8ffd\u52a0)PostgreSQL v9.5.2\n\n\n\u30c6\u30fc\u30d6\u30eb\u306e\u7528\u610f\nMySQL\u306b\u3064\u3044\u3066\u306f\u3001\u524d\u306e\u8a18\u4e8b\u3092\u53c2\u7167\u3002PostgreSQL\u3082\u7c21\u5358\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f5c\u6210\u3002\n$ create database sample;\n$ create table department(deptid int primary key, deptname varchar(20));\n$ insert into department(deptid, deptname) values(1,'Sales');\n$ insert into department(deptid, deptname) values(2,'General affairs');\n$ insert into department(deptid, deptname) values(3,'Human Resources');\n\n\nAPI Connect\u3067\u65e2\u5b58PostgreSQL DB\u3092API\u5316\n\u524d\u56de\u3068\u540c\u69d8\u306e\u624b\u9806\u3067\u3001PostgreSQL\u306edepartment\u3092API\u5316\u3059\u308b\u3002\n\nPostgreSQL\u7528\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u306e\u4f5c\u6210\n\n\u540d\u524d : postgresDS\n\u30b3\u30cd\u30af\u30bf\u30fc : PostgreSQL\nhost : localhost\n\u30dd\u30fc\u30c8 : 5432\n\u30e6\u30fc\u30b6\u30fc : \u8a72\u5f53\u30e6\u30fc\u30b6\u30fc\n\u30d1\u30b9\u30ef\u30fc\u30c9 : \u8a72\u5f53\u30d1\u30b9\u30ef\u30fc\u30c9\ndatabase : sample\n\n\n\u30b3\u30de\u30f3\u30c9\u30fb\u30d7\u30ed\u30f3\u30d7\u30c8\u3067\u3001\u753b\u9762\u306b\u8868\u793a\u304c\u3042\u308b\u3088\u3046\u306b\u3001postgreSQL\u7528\u306eConnector\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\u6ce8\uff1amysqlcon\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u5185\u3067\u5b9f\u884c\n$ npm install --save loopback-connector-postgresql\n\n\nAPI Designer\u3092\u4f7f\u7528\u3057\u3066Department\u30e2\u30c7\u30eb\u306e\u4f5c\u6210\n\u5fc5\u8981\u306a\u60c5\u5831\u3092\u5165\u529b\u3057\u3001\u4fdd\u5b58\u3059\u308b\u3002\n\n\u540d\u524d : department\n\u8907\u6570\u5f62 : \u306a\u3057\n\u57fa\u672c\u30e2\u30c7\u30eb : PersistedModel\n\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9 : postgresqlDS(\u5148\u307b\u3069\u4f5c\u3063\u305f\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9)\n\u516c\u958b : \u30c1\u30a7\u30c3\u30af\n\n\n\n\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f5c\u6210\u3057\u3001\u4fdd\u5b58\u3002\n\n\u524d\u56de\u306f\u3001DB\u3068\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u884c\u3046\u4f5c\u696d\u3092\u884c\u3063\u305f\u304c\u3001\u4eca\u56de\u306f\u30c6\u30fc\u30d6\u30eb\u540d\u3001\u30ab\u30e9\u30e0\u540d\u3092\u5b8c\u5168\u4e00\u81f4\u3055\u305b\u3066\u3001PostgreSQL\u3068\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u306f\u7701\u7565\u3002\n\nemployee\u306b\u30e2\u30c7\u30eb\u9593\u306erelation\u3092\u8a2d\u5b9a\u3059\u308b\n\u3053\u3053\u304b\u3089\u3001\u524d\u56de\u4f5c\u6210\u3057\u305femployee\u30e2\u30c7\u30eb\u3068department\u30e2\u30c7\u30eb\u9593\u306erelation\u3092\u4f5c\u6210\u3059\u308b\u3002\u307e\u305a\u306f\u3001employee\u5074\u306e\u8a2d\u5b9a\u3002\u30b3\u30de\u30f3\u30c9\u30fb\u30d7\u30ed\u30f3\u30d7\u30c8\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3002\n$ cd mysqlcon\n$ apic loopback:relation\n\n\u95a2\u9023\u3092\u4f5c\u6210\u3059\u308b\u30e2\u30c7\u30eb\uff1aemployee\nrelation\u30bf\u30a4\u30d7\uff1abelongs to\n\u95a2\u9023\u4ed8\u3051\u308b\u30e2\u30c7\u30eb\uff1adepartment\n\u95a2\u9023\u540d\uff1a\u30c7\u30d5\u30a9\u30eb\u30c8(department)\nforeign key\uff1adeptid\n\n\nemployee.json\u30d5\u30a1\u30a4\u30eb\u306b\"relations\"\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\nemployee.json(\u4e00\u90e8)\n---\u7701\u7565------\n\n  \"validations\": [],\n  \"relations\": {\n    \"department\": {\n      \"type\": \"belongsTo\",\n      \"model\": \"department\",\n      \"foreignKey\": \"deptid\"\n    }\n  },\n  \"acls\": [],\n  \"methods\": {}\n}\n\n\n\ndepartment\u306b\u30e2\u30c7\u30eb\u9593\u306erelation\u3092\u8a2d\u5b9a\u3059\u308b\n\u6b21\u306b\u3001department\u5074\u306e\u8a2d\u5b9a\u3002\u30b3\u30de\u30f3\u30c9\u30fb\u30d7\u30ed\u30f3\u30d7\u30c8\u3067\u540c\u69d8\u306b\u4ee5\u4e0b\u3092\u5b9f\u884c\u3002\n$ apic loopback:relation\n\n\u95a2\u9023\u3092\u4f5c\u6210\u3059\u308b\u30e2\u30c7\u30eb\uff1adepartment\nrelation\u30bf\u30a4\u30d7\uff1ahas many\n\u95a2\u9023\u4ed8\u3051\u308b\u30e2\u30c7\u30eb\uff1aemployee\n\u95a2\u9023\u540d\uff1a\u30c7\u30d5\u30a9\u30eb\u30c8(employees) \nforeign key\uff1adeptid\nthrough model:No\n\n\ndepartment.json\u30d5\u30a1\u30a4\u30eb\u306b\"relations\"\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\ndepartment.json(\u4e00\u90e8)\n---\u7701\u7565------\n\n  \"validations\": [],\n  \"relations\": {\n    \"employees\": {\n      \"type\": \"hasMany\",\n      \"model\": \"employee\",\n      \"foreignKey\": \"deptid\"\n    }\n  },\n  \"acls\": [],\n  \"methods\": {}\n}\n\n\n\u3053\u308c\u3067relation\u306e\u8a2d\u5b9a\u306f\u7d42\u4e86\u3002\n\n\u5b9f\u884c\n\u6b21\u306b\u3001\u4f5c\u6210\u3057\u305f\u30e2\u30c7\u30eb\u3092\u5b9f\u884c\u3059\u308b\u3002\nAPI Designer\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300c\u5b9f\u884c\u300d\u3092\u9078\u629e\u3057\u300c\u958b\u59cb\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\u30b5\u30fc\u30d0\u30fc\u958b\u59cb\u3092\u78ba\u8a8d\u5f8c\u3001\u300c\u63a2\u7d22\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\u4f5c\u6210\u3057\u305femployee\u3068department\u306eAPI\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\u5de6\u30e1\u30cb\u30e5\u30fc\u306e\u300cGET /employees\u300d\u3092\u9078\u629e\u3002\n\u524d\u56de\u540c\u69d8\u3001\u300c\u64cd\u4f5c\u306e\u547c\u3073\u51fa\u3057\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001relation\u8a2d\u5b9a\u3057\u305fdepartment\u306e\u5024\u306f\u6301\u3063\u3066\u3053\u306a\u3044\u3002LoopBack\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u300cQuerying data\u300d\u3067\u3001\"include\"\u3068\u3044\u3046\u30d5\u30a3\u30eb\u30bf\u30fc\u304c\u5229\u7528\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306b\u3001\"include\"\u3068relation\u3067\u6307\u5b9a\u3057\u305f\u540d\u524d\"department\"\u3092\u6307\u5b9a\u3057\u3001\u300c\u64cd\u4f5c\u306e\u547c\u3073\u51fa\u3057\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n{\"include\" : \"department\"}\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001relation\u542b\u3081\u305f\u5024\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3002\n\ndepartment\u306b\u95a2\u3057\u3066\u3082\u540c\u69d8\u306b\u78ba\u8a8d\u3002\u300cGET /departments\u300d\u3092\u9078\u629e\u3002\u300c\u64cd\u4f5c\u306e\u547c\u3073\u51fa\u3057\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u305f\u3060\u3051\u3067\u306f\u3001relation\u8a2d\u5b9a\u3057\u305femployee\u306e\u5024\u306f\u6301\u3063\u3066\u3053\u306a\u3044\u3002\u540c\u69d8\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306b\u4ee5\u4e0b\u3092\u6307\u5b9a\u3002\n{\"include\" : \"employees\"}\n\n\u300c\u64cd\u4f5c\u306e\u547c\u3073\u51fa\u3057\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u540c\u69d8\u306brelation\u542b\u3081\u305f\u5024\u304c\u53d6\u5f97\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\n\u66f4\u65b0\u7cfb\u306f\uff1f\nrelation\u306b\u5bfe\u3057\u3066\u66f4\u65b0\u306f\u3067\u304d\u306a\u3044\u3002\"include\"\u30d5\u30a3\u30eb\u30bf\u30fc\u306f\u3001\u53c2\u7167\u306e\u307f\u306b\u3057\u304b\u4f7f\u3048\u306a\u3044\u3002LoopBack\u30de\u30cb\u30e5\u30a2\u30eb\u53c2\u7167\u300cInclude Filter\u300d\n\nYou can use an include filter with find(), findOne() and findById().\n\n\u8907\u6570\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u306b\u5bfe\u3057\u3066\u66f4\u65b0\u51e6\u7406\u3092\u884c\u3046\u3001\u3042\u308b\u3044\u306f\u540c\u3058\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u3067\u8907\u6570\u30c6\u30fc\u30d6\u30eb\u306b\u5bfe\u3057\u3066\u66f4\u65b0\u51e6\u7406\u3092\u884c\u3046\u306e\u306f\u96e3\u3057\u3044\u3002\n\n\u307e\u3068\u3081\n\u8907\u6570\u306e\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u304b\u3089\u307e\u3068\u3081\u3066\u60c5\u5831\u3092\u63d0\u4f9b\u3059\u308bAPI\u306f\u4f5c\u6210\u53ef\u80fd\n\u7570\u306a\u308b\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u3092\u6301\u3064\u30e2\u30c7\u30eb\u3092\u5b9a\u7fa9\u3057\u3001\u305d\u308c\u3089\u306brelation\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3067\u3001\u53c2\u7167\u7cfb\u3068\u3057\u3066API\u3092\u516c\u958b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u305f\u3002relation\u3092\u4f7f\u3063\u3066\u306e\u30012\u3064\u306e\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u306b\u307e\u305f\u304c\u308b\u66f4\u65b0\u3001\u3042\u308b\u3044\u306f\u540c\u4e00\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u306e\u8907\u6570\u30c6\u30fc\u30d6\u30eb\u306b\u307e\u305f\u304c\u308b\u66f4\u65b0\u306f\u3067\u304d\u306a\u3044\u6a21\u69d8\u3002\n#\u4eca\u56de\u8a66\u3059\u3053\u3068\n[\u524d\u306e\u8a18\u4e8b](http://qiita.com/uedatks/items/beabf047be438876bdc3)\u3067\u3001\u65e2\u5b58 MySQL DB\u306e API\u5316\u3092\u884c\u3063\u305f\u3002\n\u5b9f\u969b\u306eAPI\u516c\u958b\u3067\u306f\u3001\u8907\u6570\u306e\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u304b\u3089\u60c5\u5831\u3092\u96c6\u3081\u3066API\u516c\u958b\u3059\u308b\u30b7\u30ca\u30ea\u30aa\u304c\u5f53\u7136\u306e\u3088\u3046\u306b\u3042\u308b\u3002\nLoopBack\u3060\u3068\u3069\u3046\u3059\u308b\uff1f\u3068\u601d\u3063\u3066\u3044\u305f\u3068\u3053\u308d\u3001LoopBack\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u300c[Creating model relations](https://docs.strongloop.com/display/APIC/Creating+model+relations)\u300d\u306b\u3001\u7570\u306a\u308b\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u3092\u5b9a\u7fa9\u3057\u305f\u30e2\u30c7\u30eb\u9593\u3067\u3082relation\u3092\u6301\u3066\u308b\u3068\u3042\u3063\u305f\u306e\u3067\u3001\u3053\u3046\u3044\u3046\u30b7\u30ca\u30ea\u30aa\u306b\u3082\u4f7f\u3048\u308b\u306e\u304b\u8a66\u3057\u3066\u307f\u305f\u3002\n>It's important to understand that all models inherit from the Model class and they can have relations between them regardless of the specific type of model or the backing data source.  Models backed by different data sources can have relations between them.\n\nAPI Connect\u306e\u30e2\u30c7\u30eb\n- employee\u30e2\u30c7\u30eb\uff1aMySQL\u306b\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u3092\u7528\u610f\n- department\u30e2\u30c7\u30eb\uff1aPostgreSQL\u306b\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u3092\u7528\u610f\n\n2\u3064\u306e\u30e2\u30c7\u30eb\u306e\u95a2\u4fc2\n- department\u306b\u306f\u3001\u8907\u6570\u4eba\u306eemployee\u304c\u6240\u5c5e\n- employee\u306f\u30011\u3064\u306edepartment\u306b\u6240\u5c5e\n\n#\u74b0\u5883\n- Windows7 Professional SP1\n- MySQL Ver 14.14 Distrib 5.7.11\n- Node v4.2.2\n- npm v3.8.2\n- apiconnect v1.0.2\n- (\u524d\u56de\u304b\u3089\u306e\u8ffd\u52a0)PostgreSQL v9.5.2\n \n#\u30c6\u30fc\u30d6\u30eb\u306e\u7528\u610f\nMySQL\u306b\u3064\u3044\u3066\u306f\u3001[\u524d\u306e\u8a18\u4e8b](http://qiita.com/uedatks/items/beabf047be438876bdc3)\u3092\u53c2\u7167\u3002PostgreSQL\u3082\u7c21\u5358\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f5c\u6210\u3002\n\n```postgres\n$ create database sample;\n$ create table department(deptid int primary key, deptname varchar(20));\n$ insert into department(deptid, deptname) values(1,'Sales');\n$ insert into department(deptid, deptname) values(2,'General affairs');\n$ insert into department(deptid, deptname) values(3,'Human Resources');\n```\n\n#API Connect\u3067\u65e2\u5b58PostgreSQL DB\u3092API\u5316\n\n\u524d\u56de\u3068\u540c\u69d8\u306e\u624b\u9806\u3067\u3001PostgreSQL\u306edepartment\u3092API\u5316\u3059\u308b\u3002\n##PostgreSQL\u7528\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u306e\u4f5c\u6210\n- \u540d\u524d : postgresDS\n- \u30b3\u30cd\u30af\u30bf\u30fc : PostgreSQL\n- host : localhost\n- \u30dd\u30fc\u30c8 : 5432\n- \u30e6\u30fc\u30b6\u30fc : \u8a72\u5f53\u30e6\u30fc\u30b6\u30fc\n- \u30d1\u30b9\u30ef\u30fc\u30c9 : \u8a72\u5f53\u30d1\u30b9\u30ef\u30fc\u30c9\n- database : sample\n\n![postgres01.JPG](https://qiita-image-store.s3.amazonaws.com/0/121209/d9f6ee25-6d7c-6f2e-6e9a-5cc92e45621e.jpeg)\n\n\n\u30b3\u30de\u30f3\u30c9\u30fb\u30d7\u30ed\u30f3\u30d7\u30c8\u3067\u3001\u753b\u9762\u306b\u8868\u793a\u304c\u3042\u308b\u3088\u3046\u306b\u3001postgreSQL\u7528\u306eConnector\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002**\u6ce8\uff1amysqlcon\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u5185\u3067\u5b9f\u884c**\n`$ npm install --save loopback-connector-postgresql`\n![postgres02.JPG](https://qiita-image-store.s3.amazonaws.com/0/121209/65bb594c-1164-1bcf-31cf-b69db12c9155.jpeg)\n\n\n##API Designer\u3092\u4f7f\u7528\u3057\u3066Department\u30e2\u30c7\u30eb\u306e\u4f5c\u6210\n\n\u5fc5\u8981\u306a\u60c5\u5831\u3092\u5165\u529b\u3057\u3001\u4fdd\u5b58\u3059\u308b\u3002\n\n- \u540d\u524d : department\n- \u8907\u6570\u5f62 : \u306a\u3057\n- \u57fa\u672c\u30e2\u30c7\u30eb : PersistedModel\n- \u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9 : postgresqlDS(\u5148\u307b\u3069\u4f5c\u3063\u305f\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9)\n- \u516c\u958b : \u30c1\u30a7\u30c3\u30af\n![postgre05.JPG](https://qiita-image-store.s3.amazonaws.com/0/121209/918ff4df-50c2-d495-39cd-c0ff185a4c0d.jpeg)\n\n\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f5c\u6210\u3057\u3001\u4fdd\u5b58\u3002\n![postgres06.JPG](https://qiita-image-store.s3.amazonaws.com/0/121209/c7142c15-a359-9bef-5c5b-397c8552efc4.jpeg)\n\u524d\u56de\u306f\u3001DB\u3068\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u884c\u3046\u4f5c\u696d\u3092\u884c\u3063\u305f\u304c\u3001\u4eca\u56de\u306f\u30c6\u30fc\u30d6\u30eb\u540d\u3001\u30ab\u30e9\u30e0\u540d\u3092\u5b8c\u5168\u4e00\u81f4\u3055\u305b\u3066\u3001PostgreSQL\u3068\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u306f\u7701\u7565\u3002\n\n#employee\u306b\u30e2\u30c7\u30eb\u9593\u306erelation\u3092\u8a2d\u5b9a\u3059\u308b\n\u3053\u3053\u304b\u3089\u3001\u524d\u56de\u4f5c\u6210\u3057\u305femployee\u30e2\u30c7\u30eb\u3068department\u30e2\u30c7\u30eb\u9593\u306erelation\u3092\u4f5c\u6210\u3059\u308b\u3002\u307e\u305a\u306f\u3001employee\u5074\u306e\u8a2d\u5b9a\u3002\u30b3\u30de\u30f3\u30c9\u30fb\u30d7\u30ed\u30f3\u30d7\u30c8\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3002\n`$ cd mysqlcon`\n`$ apic loopback:relation`\n\n- \u95a2\u9023\u3092\u4f5c\u6210\u3059\u308b\u30e2\u30c7\u30eb\uff1aemployee\n- relation\u30bf\u30a4\u30d7\uff1abelongs to\n- \u95a2\u9023\u4ed8\u3051\u308b\u30e2\u30c7\u30eb\uff1adepartment\n- \u95a2\u9023\u540d\uff1a\u30c7\u30d5\u30a9\u30eb\u30c8(department)\n- foreign key\uff1adeptid\n\n![postgres07.JPG](https://qiita-image-store.s3.amazonaws.com/0/121209/49241308-531f-6193-655f-3099d57b9fd1.jpeg)\n\nemployee.json\u30d5\u30a1\u30a4\u30eb\u306b\"relations\"\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\n```employee.json(\u4e00\u90e8)\n---\u7701\u7565------\n\n  \"validations\": [],\n  \"relations\": {\n    \"department\": {\n      \"type\": \"belongsTo\",\n      \"model\": \"department\",\n      \"foreignKey\": \"deptid\"\n    }\n  },\n  \"acls\": [],\n  \"methods\": {}\n}\n```\n\n#department\u306b\u30e2\u30c7\u30eb\u9593\u306erelation\u3092\u8a2d\u5b9a\u3059\u308b\n\u6b21\u306b\u3001department\u5074\u306e\u8a2d\u5b9a\u3002\u30b3\u30de\u30f3\u30c9\u30fb\u30d7\u30ed\u30f3\u30d7\u30c8\u3067\u540c\u69d8\u306b\u4ee5\u4e0b\u3092\u5b9f\u884c\u3002\n`$ apic loopback:relation`\n\n- \u95a2\u9023\u3092\u4f5c\u6210\u3059\u308b\u30e2\u30c7\u30eb\uff1adepartment\n- relation\u30bf\u30a4\u30d7\uff1ahas many\n- \u95a2\u9023\u4ed8\u3051\u308b\u30e2\u30c7\u30eb\uff1aemployee\n- \u95a2\u9023\u540d\uff1a\u30c7\u30d5\u30a9\u30eb\u30c8(employees) \n- foreign key\uff1adeptid\n- through model:No\n\n![postgres08.JPG](https://qiita-image-store.s3.amazonaws.com/0/121209/39a4cdef-bb94-d705-585b-2e4f8097bae4.jpeg)\n\n\ndepartment.json\u30d5\u30a1\u30a4\u30eb\u306b\"relations\"\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\n```department.json(\u4e00\u90e8)\n---\u7701\u7565------\n\n  \"validations\": [],\n  \"relations\": {\n    \"employees\": {\n      \"type\": \"hasMany\",\n      \"model\": \"employee\",\n      \"foreignKey\": \"deptid\"\n    }\n  },\n  \"acls\": [],\n  \"methods\": {}\n}\n```\n\u3053\u308c\u3067relation\u306e\u8a2d\u5b9a\u306f\u7d42\u4e86\u3002\n\n#\u5b9f\u884c\n\u6b21\u306b\u3001\u4f5c\u6210\u3057\u305f\u30e2\u30c7\u30eb\u3092\u5b9f\u884c\u3059\u308b\u3002\nAPI Designer\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300c\u5b9f\u884c\u300d\u3092\u9078\u629e\u3057\u300c\u958b\u59cb\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\u30b5\u30fc\u30d0\u30fc\u958b\u59cb\u3092\u78ba\u8a8d\u5f8c\u3001\u300c\u63a2\u7d22\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\u4f5c\u6210\u3057\u305femployee\u3068department\u306eAPI\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\u5de6\u30e1\u30cb\u30e5\u30fc\u306e\u300cGET /employees\u300d\u3092\u9078\u629e\u3002\n\u524d\u56de\u540c\u69d8\u3001\u300c\u64cd\u4f5c\u306e\u547c\u3073\u51fa\u3057\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001relation\u8a2d\u5b9a\u3057\u305fdepartment\u306e\u5024\u306f\u6301\u3063\u3066\u3053\u306a\u3044\u3002LoopBack\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u300c[Querying data](https://docs.strongloop.com/display/APIC/Querying+data)\u300d\u3067\u3001\"include\"\u3068\u3044\u3046\u30d5\u30a3\u30eb\u30bf\u30fc\u304c\u5229\u7528\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306b\u3001\"include\"\u3068relation\u3067\u6307\u5b9a\u3057\u305f\u540d\u524d\"department\"\u3092\u6307\u5b9a\u3057\u3001\u300c\u64cd\u4f5c\u306e\u547c\u3073\u51fa\u3057\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n`{\"include\" : \"department\"}`\n![postgres10.JPG](https://qiita-image-store.s3.amazonaws.com/0/121209/c84b2f43-f83d-726c-311e-320a5e455a65.jpeg)\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001relation\u542b\u3081\u305f\u5024\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3002\n![postgres11.JPG](https://qiita-image-store.s3.amazonaws.com/0/121209/57445954-d7b5-7488-9793-4dbead04c126.jpeg)\n\ndepartment\u306b\u95a2\u3057\u3066\u3082\u540c\u69d8\u306b\u78ba\u8a8d\u3002\u300cGET /departments\u300d\u3092\u9078\u629e\u3002\u300c\u64cd\u4f5c\u306e\u547c\u3073\u51fa\u3057\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u305f\u3060\u3051\u3067\u306f\u3001relation\u8a2d\u5b9a\u3057\u305femployee\u306e\u5024\u306f\u6301\u3063\u3066\u3053\u306a\u3044\u3002\u540c\u69d8\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306b\u4ee5\u4e0b\u3092\u6307\u5b9a\u3002\n`{\"include\" : \"employees\"}`\n![postgres12.JPG](https://qiita-image-store.s3.amazonaws.com/0/121209/676eeee2-cb86-41d9-e54f-222fe9f9262c.jpeg)\n\n\u300c\u64cd\u4f5c\u306e\u547c\u3073\u51fa\u3057\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u540c\u69d8\u306brelation\u542b\u3081\u305f\u5024\u304c\u53d6\u5f97\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n![postgres13.JPG](https://qiita-image-store.s3.amazonaws.com/0/121209/05b68bdc-7f41-6ddf-b5ed-14e523760666.jpeg)\n\n**\u66f4\u65b0\u7cfb\u306f\uff1f**\nrelation\u306b\u5bfe\u3057\u3066\u66f4\u65b0\u306f\u3067\u304d\u306a\u3044\u3002\"include\"\u30d5\u30a3\u30eb\u30bf\u30fc\u306f\u3001\u53c2\u7167\u306e\u307f\u306b\u3057\u304b\u4f7f\u3048\u306a\u3044\u3002LoopBack\u30de\u30cb\u30e5\u30a2\u30eb\u53c2\u7167\u300c[Include Filter](https://docs.strongloop.com/display/APIC/Include+filter)\u300d\n>You can use an include filter with find(), findOne() and findById().\n\n\u8907\u6570\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u306b\u5bfe\u3057\u3066\u66f4\u65b0\u51e6\u7406\u3092\u884c\u3046\u3001\u3042\u308b\u3044\u306f\u540c\u3058\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u3067\u8907\u6570\u30c6\u30fc\u30d6\u30eb\u306b\u5bfe\u3057\u3066\u66f4\u65b0\u51e6\u7406\u3092\u884c\u3046\u306e\u306f\u96e3\u3057\u3044\u3002\n\n#\u307e\u3068\u3081\n**\u8907\u6570\u306e\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u304b\u3089\u307e\u3068\u3081\u3066\u60c5\u5831\u3092\u63d0\u4f9b\u3059\u308bAPI\u306f\u4f5c\u6210\u53ef\u80fd**\n\u7570\u306a\u308b\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u3092\u6301\u3064\u30e2\u30c7\u30eb\u3092\u5b9a\u7fa9\u3057\u3001\u305d\u308c\u3089\u306brelation\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3067\u3001\u53c2\u7167\u7cfb\u3068\u3057\u3066API\u3092\u516c\u958b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u305f\u3002relation\u3092\u4f7f\u3063\u3066\u306e\u30012\u3064\u306e\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u306b\u307e\u305f\u304c\u308b\u66f4\u65b0\u3001\u3042\u308b\u3044\u306f\u540c\u4e00\u30c7\u30fc\u30bf\u30fb\u30bd\u30fc\u30b9\u306e\u8907\u6570\u30c6\u30fc\u30d6\u30eb\u306b\u307e\u305f\u304c\u308b\u66f4\u65b0\u306f\u3067\u304d\u306a\u3044\u6a21\u69d8\u3002\n", "tags": ["apiconnect", "loopback", "Nod.js", "PostgreSQL"]}