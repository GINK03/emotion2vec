{"context": " More than 1 year has passed since last update.Conoha\u306e\u4e00\u304b\u6708\u7121\u6599\u671f\u9593\u3092\u5229\u7528\u3057\u3066Gitlab\u3092\u5165\u308c\u3066\u307f\u305f\u3044\uff01\u3068\u601d\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u8a66\u307f\u305f\u306e\u3067\u3059\u304c\u3001\u601d\u3044\u306e\u307b\u304b\u82e6\u6226\u3057\u305f\u306e\u3067\u8a18\u4e8b\u306b\u307e\u3068\u3081\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\u4f7f\u7528\u3057\u305fOS\u306fCentOS release 6.5 (Final)\u3067\u3059\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3042\u305f\u3063\u3066\u4e0b\u8a18\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\n\u516c\u5f0f\u30da\u30fc\u30b8: sameersbn/docker-gitlab\nDocker\u3092\u5c0e\u5165\u3059\u308b\uff08CentOS\u7248\uff09\nDocker\u30c1\u30fc\u30c8\u30b7\u30fc\u30c8\nAmazonLinux\u306bGitLab\u69cb\u7bc9\u3057\u3066\u307f\u308b\n\n\u9593\u9055\u3044\u3084\u6539\u5584\u6848\u306a\u3069\u304c\u3042\u3063\u305f\u3089\u3054\u6307\u6458\u3044\u305f\u3060\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002\n\n\u3084\u308a\u305f\u3044\u3053\u3068\n\n\u65e2\u306b\u51fa\u6765\u4e0a\u304c\u3063\u3066\u308bgitlab\u306edocker\u30a4\u30e1\u30fc\u30b8sameersbn/docker-gitlab\u3092\u5165\u308c\u308b\ngitlab\u304c\u9001\u308b\u30e1\u30fc\u30eb\u3092Gmail\u3067\u9001\u308b\u3088\u3046\u306b\u3059\u308b\ngitlab\u3068\u4ed6\u306eweb\u30b5\u30fc\u30d3\u30b9\u3092\u5206\u3051\u305f\u3044\u305f\u3081\u3001http://gitlab.\u81ea\u5206\u306e\u30c9\u30e1\u30a4\u30f3/ \u3068\u3044\u3046\u5f62\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\uff08gitlab\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u3042\u308bnginx\u3068docker\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u524d\u304b\u3089\u5b58\u5728\u3057\u3066\u3044\u308bnginx\u306e\u4e21\u65b9\u304c\u3042\u308b\u3068\u3044\u3046\u72b6\u614b\uff09\n\n\u306a\u304a\u30012014/12/27\u6642\u70b9\u3067\u4e0a\u8a18\u306e\u30a4\u30e1\u30fc\u30b8\u5185\u306b\u3042\u308b\u74b0\u5883\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\n\nGitLab 7.6.1\nGitLab Shell 2.4.0\nGitLab API v3\nRuby 2.1.5p273\nRails 4.1.1\n\n\u3068\u3044\u3046\u611f\u3058\u3067\u3059\u3002(gitlab\u306eadmin\u753b\u9762\u3092\u5f15\u7528)\n\ndocker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u516c\u5f0f\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806(http://docs.docker.com/installation/rhel/)\u3067EPEL\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u5c0e\u5165\u3057\u308d\u3068\u66f8\u3044\u3066\u3042\u308b\u306e\u3067\u305d\u308c\u306b\u5f93\u3044\u307e\u3059\u3002\n$ sudo rpm --import http://dl.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-6 update\n$ sudo yum update\n$ sudo yum -y install http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm\n$ sudo yum -y install docker-io\n\ndocker\u3092\u8d77\u52d5\uff01\n$ sudo service docker start\n$ sudo chkconfig docker on\n\n\n\u6700\u5c0f\u9650\u306e\u8a2d\u5b9a\u3067gitlab\u3092\u52d5\u304b\u3059\n\u516c\u5f0f\u306eQuick Start\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u30b3\u30de\u30f3\u30c9\u3092\u305d\u306e\u307e\u307e\u6253\u3063\u3066\u3082Database\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u307f\u305f\u3044\u306a\u30a8\u30e9\u30fc\u3092\u5410\u304b\u308c\u3066\u3057\u307e\u3046\u3002\u3002\u307e\u305a\u5fc5\u8981\u306a\u3082\u306e\u3092pull\u3057\u307e\u3059\u3002\n$ sudo docker pull sameersbn/gitlab:7.6.1\n$ sudo docker pull sameersbn/mysql:latest\n$ sudo docker pull sameersbn/redis:latest\n\nMySQL\u3068gitlab\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2\u3092\u4f5c\u6210\n$ sudo mkdir -p /opt/gitlab/data\n$ sudo mkdir -p /opt/mysql/data\n\n\nMySQL\u3092\u8d77\u52d5\u3002-e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u74b0\u5883\u8a2d\u5b9a\u304c\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001-v\u30aa\u30d7\u30b7\u30e7\u30f3\u306e/opt/mysql/data\u3068\u66f8\u3044\u3066\u3042\u308b\u6240\u3067\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\u5834\u6240\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002DB_PASS\u306f\u3001\u5909\u3048\u3066\u304a\u3044\u305f\u307b\u3046\u304c\u826f\u3055\u3052\u3067\u3057\u3087\u3046\u3002\n$ sudo docker run --name=mysql -d \\\n  -e 'DB_NAME=gitlabhq_production' \\\n  -e 'DB_USER=gitlab' -e 'DB_PASS=\u4efb\u610f\u306e\u30d1\u30b9\u30ef\u30fc\u30c9' \\\n  -v /opt/mysql/data:/var/lib/mysql \\\n  sameersbn/mysql:latest\n\nRedis\u3092\u8d77\u52d5\u3002\n$ sudo docker run --name=redis -d sameersbn/redis:latest\n\nGitlab\u3092\u8d77\u52d5\u3002\n$ sudo docker run --name=gitlab -d \\\n  --link mysql:mysql \\\n  --link redis:redisio \\\n  -v /opt/gitlab/data:/home/git/data \\\n  -e 'DB_NAME=gitlabhq_production' \\\n  -e 'DB_USER=gitlab' -e 'DB_PASS=MySQL\u3067\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9' \\\n  -e 'GITLAB_HOST=\u81ea\u5206\u306e\u30db\u30b9\u30c8\u540d' \\\n  -e 'GITLAB_PORT=10080' -e 'GITLAB_SSH_PORT=10022' \\\n  -p 10022:22 -p 10080:80 \\\n  sameersbn/gitlab:7.6.1\n\n\u3057\u3070\u3089\u304f(\u6700\u95773\u5206\u304f\u3089\u3044?)\u3057\u305f\u3089http://\u81ea\u5206\u306e\u30db\u30b9\u30c8\u540d:10080 \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u53ef\u611b\u304f\u306a\u3044\u30ad\u30c4\u30cd\u304c\u73fe\u308c\u305f\u3089\u3072\u3068\u307e\u305a\u6210\u529f\u3067\u3059\u3002\n\nGitLab\u306e\u8a2d\u5b9a\n\n\u30c7\u30fc\u30bf\u306e\u4fdd\u5b58\u5834\u6240\u3092\u5909\u66f4\u3059\u308b\nhttps://help.conoha.jp/app/answers/detail/a_id/14436 \u306b\u66f8\u3044\u3066\u3042\u308b\u3088\u3046\u306bConoha\u306e\u30c7\u30a3\u30b9\u30af\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306f\u521d\u671f\u8a2d\u5b9a\u306e\u5834\u5408\u3001\u57fa\u672c\u30c7\u30a3\u30b9\u30af\u306b20GB\u5272\u308a\u5f53\u3066\u3089\u308c\u307e\u3059\u3002\u6b8b\u308a\u306e80GB(100GB\u30d7\u30e9\u30f3\u306e\u5834\u5408)\u3092\u8aad\u307f\u66f8\u304d\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3044\u3044\u304b\u3068\u3044\u3046\u3068/data\u4ee5\u4e0b\u3092\u4f7f\u3063\u3066\u3084\u308c\u3070\u3044\u3044\u306e\u3067\u3059\u3002\n$ df -h\nFilesystem            Size  Used Avail Use% Mounted on\n/dev/mapper/VolGroup-lv_root\n                       18G  6.5G   10G  40% /\ntmpfs                 499M     0  499M   0% /dev/shm\n/dev/vda1             485M   55M  405M  12% /boot\n/dev/vdb               79G  184M   75G   1% /data\n\n\u305d\u3093\u306a\u308f\u3051\u3067/opt/gitlab/data\u306a\u3093\u3066\u6240\u306b\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3057\u3066\u304a\u304f\u3068\u3082\u3057\u304b\u3057\u305f\u3089\u30c7\u30a3\u30b9\u30af\u304c\u3044\u3063\u3071\u3044\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u3093\u306a\u6642\u306f\u5148\u307b\u3069\u306eMySQL\u3068Gitlab\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c7\u30fc\u30bf\u3092\u305f\u3081\u308b\u5834\u6240\u3092\u5909\u3048\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u306a\u304a\u3001\u65e2\u306brun\u3057\u3066\u3044\u308bgitlab\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b\u306b\u306f\u3001gitlab\u30b3\u30f3\u30c6\u30ca\u3092stop\u3057\u3066rm\u3057\u3066\u304b\u3089run\u3057\u307e\u3059\u3002\n$ sudo mkdir -p /data/gitlab/data\n$ sudo mkdir -p /data/mysql/data\n\n$ sudo docker stop gitlab mysql\n$ sudo docker rm gitlab mysql\n\n$ sudo docker run --name=mysql -d \\\n  -e 'DB_NAME=gitlabhq_production' \\\n  -e 'DB_USER=gitlab' -e 'DB_PASS=\u4efb\u610f\u306e\u30d1\u30b9\u30ef\u30fc\u30c9' \\\n  -v /data/mysql/data:/var/lib/mysql \\\n  sameersbn/mysql:latest\n\n$ sudo docker run --name=gitlab -d \\\n  --link mysql:mysql \\\n  --link redis:redisio \\\n  -v /data/gitlab/data:/home/git/data \\\n  -e 'DB_NAME=gitlabhq_production' \\\n  -e 'DB_USER=gitlab' -e 'DB_PASS=MySQL\u3067\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9' \\\n  -e 'GITLAB_HOST=gitlab.\u81ea\u5206\u306e\u30db\u30b9\u30c8\u540d' \\\n  -e 'GITLAB_PORT=10080' -e 'GITLAB_SSH_PORT=10022' \\\n  -p 10022:22 -p 10080:80 \\\n  sameersbn/gitlab:7.6.1\n\n\u203b[2015/1/2\u8ffd\u8a18]GITLAB_PORT\u3092\u8a2d\u5b9a\u3057\u3066\u3057\u307e\u3046\u3068\u3001\u4f8b\u3048\u3070gitlab\u304b\u3089\u9001\u3089\u308c\u308b\u30e1\u30fc\u30eb\u306b\u8a18\u8f09\u3055\u308c\u308bURL\u306b\u30dd\u30fc\u30c8\u756a\u53f7\u304c\u5165\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u77e5\u3089\u308c\u305f\u304f\u306a\u3044\u5834\u5408\u306f\u8a2d\u5b9a\u3057\u306a\u304f\u3066\u3044\u3044\u307f\u305f\u3044\u3067\u3059\u3002\n\nGitLab\u304b\u3089\u306e\u30e1\u30fc\u30eb\u3092Gmail\u306b\u9001\u3089\u305b\u308b\nSMTP_USER,SMTP_PASS\u3092\u8a2d\u5b9a\u3059\u308c\u3070OK\u3067\u3059\u3002\n$ sudo docker stop gitlab\n$ sudo docker rm gitlab\n\n$ sudo docker run --name=gitlab -d \\\n  --link mysql:mysql \\\n  --link redis:redisio \\\n  -v /data/gitlab/data:/home/git/data \\\n  -e 'DB_NAME=gitlabhq_production' \\\n  -e 'DB_USER=gitlab' -e 'DB_PASS=MySQL\u3067\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9' \\\n  -e 'SMTP_USER=gitlab\u306b\u4f7f\u308f\u305b\u305f\u3044Gmail\u30a2\u30c9\u30ec\u30b9' \\\n  -e 'SMTP_PASS=\u305d\u306eGmail\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9' \\\n  -e 'GITLAB_HOST=gitlab.\u81ea\u5206\u306e\u30db\u30b9\u30c8\u540d' \\\n  -e 'GITLAB_PORT=10080' -e 'GITLAB_SSH_PORT=10022' \\\n  -p 10022:22 -p 10080:80 \\\n  sameersbn/gitlab:7.6.1\n\n\nnginx\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u305b\u308b\nnginx\u306econf\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3002nginx\u306e\u8a2d\u5b9a\u306f/etc/nginx/nginx.conf\u306b\u52a0\u3048\u3066/etc/nginx/conf.d/\u4ee5\u4e0b\u306b\u3042\u308b.conf\u30d5\u30a1\u30a4\u30eb\u304c\u3059\u3079\u3066\u9069\u7528\u3055\u308c\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u65b0\u3057\u304f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\uff08\u65e2\u306b\u3042\u308bconf\u306b\u8ffd\u8a18\u3057\u3066\u3082\u25ce\uff09\nsudo vim /etc/nginx/conf.d/gitlab.conf\n\n\n/etc/nginx/conf.d/gitlab.conf\nupstream gitlab_hostname {\n    #hostname\u306b\u81ea\u5206\u306e\u30db\u30b9\u30c8\u540d\u3092\u5165\u308c\u308b\n    server      gitlab.hostname:10080;\n}\n\nserver {\n    listen      80;\n    #hostname\u306b\u81ea\u5206\u306e\u30db\u30b9\u30c8\u540d\u3092\u5165\u308c\u308b\n    server_name gitlab.hostname;\n    access_log  /var/log/nginx/gitlab.access.log    main;\n    error_log   /var/log/nginx/gitlab.error.log;\n\n    location / {\n        proxy_pass  http://gitlab_hostname;\n    }\n}\n\n\n\u203b[2014/12/27]\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u65b9\u5f0f\u304b\u3089\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3092\u4f7f\u3046\u3084\u308a\u65b9\u306b\u4fee\u6b63\u3057\u307e\u3057\u305f\u3002(Thanks! @kimama1997)\nnginx\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\nsudo service nginx restart\n\n\n\u8ffd\u8a18\n\u3053\u306e\u65b9\u6cd5\u3060\u3068gitlab\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3068\u304d\u306bURL\u306b\u30dd\u30fc\u30c8\u756a\u53f7(:10080)\u304c\u8868\u793a\u3055\u308c\u3066\u3057\u307e\u3046\u306e\u304c\u5fc3\u6b8b\u308a\u3067\u3059\u306d\u3002\u81ea\u5206\u306a\u308a\u306b\u3082\u3001Gitlab\u30b3\u30f3\u30c6\u30ca\u306bssh\u63a5\u7d9a\u2026docker\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u76f4\u63a5\u66f8\u304d\u304b\u3048\u2026\u306a\u3069\u8a66\u307f\u305f\u306e\u3067\u3059\u304c\u3001\u524d\u8005\u306f\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u5206\u304b\u3089\u306a\u3044\u3001\u5f8c\u8005\u306fhttp://deeeet.com/writing/2013/12/16/where-are-docker-images-storede/\u306b\u66f8\u3044\u3066\u3042\u3063\u305f\u5834\u6240\u306b\u306a\u3044\u3058\u3083\u3093\uff01\u3063\u3066\u306a\u3063\u3066\u8ae6\u3081\u307e\u3057\u305f\u3002\u305d\u306e\u3046\u3061\u63a2\u3059\u4e88\u5b9a\u3002\nConoha\u306e\u4e00\u304b\u6708\u7121\u6599\u671f\u9593\u3092\u5229\u7528\u3057\u3066Gitlab\u3092\u5165\u308c\u3066\u307f\u305f\u3044\uff01\u3068\u601d\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u8a66\u307f\u305f\u306e\u3067\u3059\u304c\u3001\u601d\u3044\u306e\u307b\u304b\u82e6\u6226\u3057\u305f\u306e\u3067\u8a18\u4e8b\u306b\u307e\u3068\u3081\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\u4f7f\u7528\u3057\u305fOS\u306fCentOS release 6.5 (Final)\u3067\u3059\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3042\u305f\u3063\u3066\u4e0b\u8a18\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002<b>\n[\u516c\u5f0f\u30da\u30fc\u30b8: sameersbn/docker-gitlab](https://github.com/sameersbn/docker-gitlab)\n[Docker\u3092\u5c0e\u5165\u3059\u308b\uff08CentOS\u7248\uff09](http://qiita.com/zwirky/items/991f61a231f4e198a320)\n[Docker\u30c1\u30fc\u30c8\u30b7\u30fc\u30c8](http://qiita.com/bungoume/items/b8911fd243d9c084bd63)\n[AmazonLinux\u306bGitLab\u69cb\u7bc9\u3057\u3066\u307f\u308b](http://chaetodon.hatenablog.com/entry/2014/10/12/020838)\n</b>\n\n\u9593\u9055\u3044\u3084\u6539\u5584\u6848\u306a\u3069\u304c\u3042\u3063\u305f\u3089\u3054\u6307\u6458\u3044\u305f\u3060\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002\n\n#\u3084\u308a\u305f\u3044\u3053\u3068\n+ \u65e2\u306b\u51fa\u6765\u4e0a\u304c\u3063\u3066\u308bgitlab\u306edocker\u30a4\u30e1\u30fc\u30b8[sameersbn/docker-gitlab](https://github.com/sameersbn/docker-gitlab)\u3092\u5165\u308c\u308b\n+ gitlab\u304c\u9001\u308b\u30e1\u30fc\u30eb\u3092Gmail\u3067\u9001\u308b\u3088\u3046\u306b\u3059\u308b\n+ gitlab\u3068\u4ed6\u306eweb\u30b5\u30fc\u30d3\u30b9\u3092\u5206\u3051\u305f\u3044\u305f\u3081\u3001http://gitlab.\u81ea\u5206\u306e\u30c9\u30e1\u30a4\u30f3/ \u3068\u3044\u3046\u5f62\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\uff08gitlab\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u3042\u308bnginx\u3068docker\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u524d\u304b\u3089\u5b58\u5728\u3057\u3066\u3044\u308bnginx\u306e\u4e21\u65b9\u304c\u3042\u308b\u3068\u3044\u3046\u72b6\u614b\uff09\n\n\u306a\u304a\u30012014/12/27\u6642\u70b9\u3067\u4e0a\u8a18\u306e\u30a4\u30e1\u30fc\u30b8\u5185\u306b\u3042\u308b\u74b0\u5883\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\n\n>GitLab 7.6.1\n>GitLab Shell 2.4.0\n>GitLab API v3\n>Ruby 2.1.5p273\n>Rails 4.1.1\n\n\u3068\u3044\u3046\u611f\u3058\u3067\u3059\u3002(gitlab\u306eadmin\u753b\u9762\u3092\u5f15\u7528)\n\n#docker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u516c\u5f0f\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806([http://docs.docker.com/installation/rhel/](http://docs.docker.com/installation/rhel/))\u3067EPEL\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u5c0e\u5165\u3057\u308d\u3068\u66f8\u3044\u3066\u3042\u308b\u306e\u3067\u305d\u308c\u306b\u5f93\u3044\u307e\u3059\u3002\n\n```\n$ sudo rpm --import http://dl.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-6 update\n$ sudo yum update\n$ sudo yum -y install http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm\n$ sudo yum -y install docker-io\n```\n\ndocker\u3092\u8d77\u52d5\uff01\n\n```\n$ sudo service docker start\n$ sudo chkconfig docker on\n```\n\n#\u6700\u5c0f\u9650\u306e\u8a2d\u5b9a\u3067gitlab\u3092\u52d5\u304b\u3059\n\u516c\u5f0f\u306eQuick Start\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u30b3\u30de\u30f3\u30c9\u3092\u305d\u306e\u307e\u307e\u6253\u3063\u3066\u3082Database\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u307f\u305f\u3044\u306a\u30a8\u30e9\u30fc\u3092\u5410\u304b\u308c\u3066\u3057\u307e\u3046\u3002\u3002\u307e\u305a\u5fc5\u8981\u306a\u3082\u306e\u3092pull\u3057\u307e\u3059\u3002\n\n```\n$ sudo docker pull sameersbn/gitlab:7.6.1\n$ sudo docker pull sameersbn/mysql:latest\n$ sudo docker pull sameersbn/redis:latest\n```\n\nMySQL\u3068gitlab\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2\u3092\u4f5c\u6210\n\n```\n$ sudo mkdir -p /opt/gitlab/data\n$ sudo mkdir -p /opt/mysql/data\n\n```\n\nMySQL\u3092\u8d77\u52d5\u3002-e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u74b0\u5883\u8a2d\u5b9a\u304c\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001-v\u30aa\u30d7\u30b7\u30e7\u30f3\u306e/opt/mysql/data\u3068\u66f8\u3044\u3066\u3042\u308b\u6240\u3067\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\u5834\u6240\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002DB_PASS\u306f\u3001\u5909\u3048\u3066\u304a\u3044\u305f\u307b\u3046\u304c\u826f\u3055\u3052\u3067\u3057\u3087\u3046\u3002\n\n```\n$ sudo docker run --name=mysql -d \\\n  -e 'DB_NAME=gitlabhq_production' \\\n  -e 'DB_USER=gitlab' -e 'DB_PASS=\u4efb\u610f\u306e\u30d1\u30b9\u30ef\u30fc\u30c9' \\\n  -v /opt/mysql/data:/var/lib/mysql \\\n  sameersbn/mysql:latest\n```\n\nRedis\u3092\u8d77\u52d5\u3002\n\n```\n$ sudo docker run --name=redis -d sameersbn/redis:latest\n```\n\nGitlab\u3092\u8d77\u52d5\u3002\n\n```\n$ sudo docker run --name=gitlab -d \\\n  --link mysql:mysql \\\n  --link redis:redisio \\\n  -v /opt/gitlab/data:/home/git/data \\\n  -e 'DB_NAME=gitlabhq_production' \\\n  -e 'DB_USER=gitlab' -e 'DB_PASS=MySQL\u3067\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9' \\\n  -e 'GITLAB_HOST=\u81ea\u5206\u306e\u30db\u30b9\u30c8\u540d' \\\n  -e 'GITLAB_PORT=10080' -e 'GITLAB_SSH_PORT=10022' \\\n  -p 10022:22 -p 10080:80 \\\n  sameersbn/gitlab:7.6.1\n```\n\n\u3057\u3070\u3089\u304f(\u6700\u95773\u5206\u304f\u3089\u3044?)\u3057\u305f\u3089http://\u81ea\u5206\u306e\u30db\u30b9\u30c8\u540d:10080 \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u53ef\u611b\u304f\u306a\u3044\u30ad\u30c4\u30cd\u304c\u73fe\u308c\u305f\u3089\u3072\u3068\u307e\u305a\u6210\u529f\u3067\u3059\u3002\n\n#GitLab\u306e\u8a2d\u5b9a\n##\u30c7\u30fc\u30bf\u306e\u4fdd\u5b58\u5834\u6240\u3092\u5909\u66f4\u3059\u308b\nhttps://help.conoha.jp/app/answers/detail/a_id/14436 \u306b\u66f8\u3044\u3066\u3042\u308b\u3088\u3046\u306bConoha\u306e\u30c7\u30a3\u30b9\u30af\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306f\u521d\u671f\u8a2d\u5b9a\u306e\u5834\u5408\u3001\u57fa\u672c\u30c7\u30a3\u30b9\u30af\u306b20GB\u5272\u308a\u5f53\u3066\u3089\u308c\u307e\u3059\u3002\u6b8b\u308a\u306e80GB(100GB\u30d7\u30e9\u30f3\u306e\u5834\u5408)\u3092\u8aad\u307f\u66f8\u304d\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3044\u3044\u304b\u3068\u3044\u3046\u3068/data\u4ee5\u4e0b\u3092\u4f7f\u3063\u3066\u3084\u308c\u3070\u3044\u3044\u306e\u3067\u3059\u3002\n\n```\n$ df -h\nFilesystem            Size  Used Avail Use% Mounted on\n/dev/mapper/VolGroup-lv_root\n                       18G  6.5G   10G  40% /\ntmpfs                 499M     0  499M   0% /dev/shm\n/dev/vda1             485M   55M  405M  12% /boot\n/dev/vdb               79G  184M   75G   1% /data\n```\n\n\u305d\u3093\u306a\u308f\u3051\u3067/opt/gitlab/data\u306a\u3093\u3066\u6240\u306b\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3057\u3066\u304a\u304f\u3068\u3082\u3057\u304b\u3057\u305f\u3089\u30c7\u30a3\u30b9\u30af\u304c\u3044\u3063\u3071\u3044\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u3093\u306a\u6642\u306f\u5148\u307b\u3069\u306eMySQL\u3068Gitlab\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c7\u30fc\u30bf\u3092\u305f\u3081\u308b\u5834\u6240\u3092\u5909\u3048\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u306a\u304a\u3001\u65e2\u306brun\u3057\u3066\u3044\u308bgitlab\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b\u306b\u306f\u3001gitlab\u30b3\u30f3\u30c6\u30ca\u3092stop\u3057\u3066rm\u3057\u3066\u304b\u3089run\u3057\u307e\u3059\u3002\n\n```\n$ sudo mkdir -p /data/gitlab/data\n$ sudo mkdir -p /data/mysql/data\n\n$ sudo docker stop gitlab mysql\n$ sudo docker rm gitlab mysql\n\n$ sudo docker run --name=mysql -d \\\n  -e 'DB_NAME=gitlabhq_production' \\\n  -e 'DB_USER=gitlab' -e 'DB_PASS=\u4efb\u610f\u306e\u30d1\u30b9\u30ef\u30fc\u30c9' \\\n  -v /data/mysql/data:/var/lib/mysql \\\n  sameersbn/mysql:latest\n\n$ sudo docker run --name=gitlab -d \\\n  --link mysql:mysql \\\n  --link redis:redisio \\\n  -v /data/gitlab/data:/home/git/data \\\n  -e 'DB_NAME=gitlabhq_production' \\\n  -e 'DB_USER=gitlab' -e 'DB_PASS=MySQL\u3067\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9' \\\n  -e 'GITLAB_HOST=gitlab.\u81ea\u5206\u306e\u30db\u30b9\u30c8\u540d' \\\n  -e 'GITLAB_PORT=10080' -e 'GITLAB_SSH_PORT=10022' \\\n  -p 10022:22 -p 10080:80 \\\n  sameersbn/gitlab:7.6.1\n```\n\n\u203b[2015/1/2\u8ffd\u8a18]GITLAB_PORT\u3092\u8a2d\u5b9a\u3057\u3066\u3057\u307e\u3046\u3068\u3001\u4f8b\u3048\u3070gitlab\u304b\u3089\u9001\u3089\u308c\u308b\u30e1\u30fc\u30eb\u306b\u8a18\u8f09\u3055\u308c\u308bURL\u306b\u30dd\u30fc\u30c8\u756a\u53f7\u304c\u5165\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u77e5\u3089\u308c\u305f\u304f\u306a\u3044\u5834\u5408\u306f\u8a2d\u5b9a\u3057\u306a\u304f\u3066\u3044\u3044\u307f\u305f\u3044\u3067\u3059\u3002\n##GitLab\u304b\u3089\u306e\u30e1\u30fc\u30eb\u3092Gmail\u306b\u9001\u3089\u305b\u308b\nSMTP_USER,SMTP_PASS\u3092\u8a2d\u5b9a\u3059\u308c\u3070OK\u3067\u3059\u3002\n\n```\n$ sudo docker stop gitlab\n$ sudo docker rm gitlab\n\n$ sudo docker run --name=gitlab -d \\\n  --link mysql:mysql \\\n  --link redis:redisio \\\n  -v /data/gitlab/data:/home/git/data \\\n  -e 'DB_NAME=gitlabhq_production' \\\n  -e 'DB_USER=gitlab' -e 'DB_PASS=MySQL\u3067\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9' \\\n  -e 'SMTP_USER=gitlab\u306b\u4f7f\u308f\u305b\u305f\u3044Gmail\u30a2\u30c9\u30ec\u30b9' \\\n  -e 'SMTP_PASS=\u305d\u306eGmail\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9' \\\n  -e 'GITLAB_HOST=gitlab.\u81ea\u5206\u306e\u30db\u30b9\u30c8\u540d' \\\n  -e 'GITLAB_PORT=10080' -e 'GITLAB_SSH_PORT=10022' \\\n  -p 10022:22 -p 10080:80 \\\n  sameersbn/gitlab:7.6.1\n```\n\n#nginx\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u305b\u308b\nnginx\u306econf\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3002nginx\u306e\u8a2d\u5b9a\u306f/etc/nginx/nginx.conf\u306b\u52a0\u3048\u3066/etc/nginx/conf.d/\u4ee5\u4e0b\u306b\u3042\u308b.conf\u30d5\u30a1\u30a4\u30eb\u304c\u3059\u3079\u3066\u9069\u7528\u3055\u308c\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u65b0\u3057\u304f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\uff08\u65e2\u306b\u3042\u308bconf\u306b\u8ffd\u8a18\u3057\u3066\u3082\u25ce\uff09\n\n```\nsudo vim /etc/nginx/conf.d/gitlab.conf\n```\n\n\n```/etc/nginx/conf.d/gitlab.conf\nupstream gitlab_hostname {\n    #hostname\u306b\u81ea\u5206\u306e\u30db\u30b9\u30c8\u540d\u3092\u5165\u308c\u308b\n    server      gitlab.hostname:10080;\n}\n\nserver {\n    listen      80;\n    #hostname\u306b\u81ea\u5206\u306e\u30db\u30b9\u30c8\u540d\u3092\u5165\u308c\u308b\n    server_name gitlab.hostname;\n    access_log  /var/log/nginx/gitlab.access.log    main;\n    error_log   /var/log/nginx/gitlab.error.log;\n\n    location / {\n        proxy_pass  http://gitlab_hostname;\n    }\n}\n```\n\n\u203b[2014/12/27]\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u65b9\u5f0f\u304b\u3089\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3092\u4f7f\u3046\u3084\u308a\u65b9\u306b\u4fee\u6b63\u3057\u307e\u3057\u305f\u3002(Thanks! @kimama1997)\n\nnginx\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\nsudo service nginx restart\n```\n\n##\u8ffd\u8a18\n<s>\u3053\u306e\u65b9\u6cd5\u3060\u3068gitlab\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3068\u304d\u306bURL\u306b\u30dd\u30fc\u30c8\u756a\u53f7(:10080)\u304c\u8868\u793a\u3055\u308c\u3066\u3057\u307e\u3046\u306e\u304c\u5fc3\u6b8b\u308a\u3067\u3059\u306d\u3002\u81ea\u5206\u306a\u308a\u306b\u3082\u3001Gitlab\u30b3\u30f3\u30c6\u30ca\u306bssh\u63a5\u7d9a\u2026docker\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u76f4\u63a5\u66f8\u304d\u304b\u3048\u2026\u306a\u3069\u8a66\u307f\u305f\u306e\u3067\u3059\u304c\u3001\u524d\u8005\u306f\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u5206\u304b\u3089\u306a\u3044\u3001\u5f8c\u8005\u306f[http://deeeet.com/writing/2013/12/16/where-are-docker-images-storede/](http://deeeet.com/writing/2013/12/16/where-are-docker-images-storede/)\u306b\u66f8\u3044\u3066\u3042\u3063\u305f\u5834\u6240\u306b\u306a\u3044\u3058\u3083\u3093\uff01\u3063\u3066\u306a\u3063\u3066\u8ae6\u3081\u307e\u3057\u305f\u3002\u305d\u306e\u3046\u3061\u63a2\u3059\u4e88\u5b9a\u3002</s>\n", "tags": ["docker", "GitLab"]}