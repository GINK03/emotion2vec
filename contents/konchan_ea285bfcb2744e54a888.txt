{"context": " More than 1 year has passed since last update.Apache Spark\u3092\u69cb\u7bc9\u3057\u3001\u7ba1\u7406\u30b5\u30fc\u30d0\u7d4c\u7531\u3067Spark\u306e\u7ba1\u7406\u753b\u9762\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u3001HAProxy\u3092Reverse Proxy\u3068\u3057\u3066\u69cb\u7bc9\u3057\u307e\u3059\u3002\n\n\u8981\u4ef6/\u4ed5\u69d8\n\nApache Spark master\u306f3\u53f0\u3067\u69cb\u6210\u3059\u308b\u3002\n\u4e0a\u8a183\u53f0\u306e\u3046\u3061Spark\u306e\u72b6\u6cc1\u304c\u308f\u304b\u308b\u306e\u306fLeader\u306e\u307f\u3002\u7ba1\u7406\u753b\u9762\u4e0a\u3067Status: ALIVE\u3068\u306a\u3063\u3066\u3044\u308b\u3082\u306e\u3092\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\uff08Leader\u4ee5\u5916\u306estandby\u6a5f\u306fWorker\u7b49\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u304c\u8868\u793a\u3055\u308c\u306a\u3044\u305f\u3081\uff09\nSpark\u306e\u7ba1\u7406\u753b\u9762\u306f http://\u7ba1\u7406\u30b5\u30fc\u30d0IP/spark/ \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3082\u306e\u3068\u3059\u308b\uff08leader\u306b\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3059\u308c\u3070 http://Leader_IP:8080/ \u3067\u72b6\u6cc1\u3092\u78ba\u8a8d\u3067\u304d\u308b\uff09\n\n\n\n\u5b9f\u73fe\u69cb\u6210\n\u4e0a\u8a18\u8981\u4ef6\u3088\u308a\u4e0b\u56f3\u306e\u3088\u3046\u306a\u69cb\u6210\u3068\u3057\u3001HAProxy\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n\n\u4ed5\u69d82\u306e\u5bfe\u5fdc\n\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u6a5f\u80fd\u306e\u623b\u308a\u5024\u30c1\u30a7\u30c3\u30af\u3092\u5229\u7528\u3057\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u4e2d\u8eab\u3067Status: ALIVE\u304c\u542b\u307e\u308c\u308b\u3082\u306e\u3092\u6b63\u5e38\u3068\u3059\u308b\u3002\n\n\u4ed5\u69d83\u306e\u5bfe\u5fdc\nHTTP\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30ea\u30d7\u30ec\u30fc\u30b9\u6a5f\u80fd\u3092\u5229\u7528\u3057\u3001 /spark/ \u306b\u30de\u30c3\u30c1\u3059\u308b\u5834\u5408\u3001\u305d\u306e\u30de\u30c3\u30c1\u3057\u305f\u3082\u306e\u3092\u53d6\u308a\u9664\u3044\u305f\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u8ee2\u9001\u3059\u308b\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u5229\u7528\u53ef\u80fd\u3067\u3059\u3002\nsudo yum install -y haproxy\n\n\u305f\u3060\u3057\u3001\u4e0a\u8a18\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3001\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u3082\u3057\u672c\u756a\u74b0\u5883\u306b\u5c0e\u5165\u3055\u308c\u308b\u5834\u5408\u306f\u3001\u8106\u5f31\u6027\u5bfe\u5fdc\u304c\u3055\u308c\u305f\u6700\u65b0\u7248\u306e\u30bd\u30fc\u30b9\u304b\u3089\u30d3\u30eb\u30c9\u3057\u305f\u307b\u3046\u304c\u3044\u3044\u3067\u3059\u3002\n\n\u8a2d\u5b9a\u5185\u5bb9\n\u4eca\u5f8c\u5225\u306a\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u306e\u7ba1\u7406\u753b\u9762\u3082\u7ba1\u7406\u30b5\u30fc\u30d0\u7d4c\u7531\u3067\u53c2\u7167\u3059\u308b\u3053\u3068\u3092\u8003\u616e\u3057\u3001frontend\u3068backend\u306b\u308f\u3051\u3066\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\uff08frontend\u3067URL\u30de\u30c3\u30c1\u30f3\u30b0\u5224\u5b9a\u3057\u3001\u9069\u5207\u306abackend\u3078\u8ee2\u9001\u3059\u308b\u305f\u3081\uff09\u3002\u3059\u3067\u306b\u8ee2\u9001\u5148\u304c\u6c7a\u307e\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u3001listen \u3067\u307e\u3068\u3081\u3066\u3057\u307e\u3063\u3066\u3082\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306fHAProxy\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002\n\n\u4ed5\u69d82\u306e\u8a2d\u5b9a\n  option  httpchk GET /\n  http-check expect rstring .+Status.+ALIVE.+\n\noption httpchk GET /\u3067\u5404Spark master\u306e / \u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\u5358\u306b\u3053\u306e\u8a2d\u5b9a\u3060\u3051\u3060\u3068\u3001Response\u304c2xx\u304b3xx\u304b\u3057\u304b\u30c1\u30a7\u30c3\u30af\u3057\u307e\u305b\u3093\u3002http-check expect\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3001Response\u306e\u4e2d\u8eab\u307e\u3067\u30c1\u30a7\u30c3\u30af\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002rstring\u306f\u623b\u308a\u5024\u306e\u30c1\u30a7\u30c3\u30af\u3092\u6b63\u898f\u8868\u73fe\u3067\u884c\u3044\u305f\u3044\u5834\u5408\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\u4ed5\u69d83\u306e\u8a2d\u5b9a\n  reqrep  ^([^\\ :]*)\\ /spark\\/(.*)  \\1\\ /\\2\n\nreqrep\u304cURL rewrite\u3059\u308b\u5834\u5408\u306e\u8a2d\u5b9a\u3067\u3059\u3002URL\u3060\u3051\u3067\u306a\u304f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u5168\u4f53\u3092\u898b\u3066\u3044\u308b\u305f\u3081\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306a\u6b63\u898f\u8868\u73fe\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\uff08\u88dc\u8db3\uff09http \u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306f\u4e00\u822c\u7684\u306b\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\nuser% curl -v http://\u7ba1\u7406\u30b5\u30fc\u30d0IP/spark/\n* Hostname was NOT found in DNS cache\n*   Trying xx.xx.xx.xx...\n* Connected to xx.xx.xx.xx (xx.xx.xx.xx) port 80 (#0)\n> GET /spark/ HTTP/1.1\n> User-Agent: curl/7.37.1\n> Host: xx.xx.xx.xx\n> Accept: */*\n\n\u6700\u7d42\u7684\u306a\u8a2d\u5b9a\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\nglobal\n  log      127.0.0.1  local4 info\n  user     root\n  group    root\n  daemon\n\ndefaults\n  log      global\n  mode     http\n  option   dontlognull\n  option   redispatch\n  balance  leastconn\n  retries  3\n  maxconn  100\n  timeout  connect  5000\n  timeout  client  50000\n  timeout  server  50000\n  stats    enable\n\nfrontend MGMTSRV\n  bind    :80\n  mode    http\n  option  httplog  clf\n  acl     spark    path_reg  /spark/\n  acl     static   path_reg  /static/\n  use_backend SRV_SPARK  if spark\n  use_backend SRV_SPARK  if static\n\nbackend  SRV_SPARK\n  mode    http\n  option  httplog  clf\n  option  httpchk GET /\n  http-check expect rstring .+Status.+ALIVE.+\n  reqrep  ^([^\\ :]*)\\ /spark\\/(.*)  \\1\\ /\\2\n  server  spark1 SparkMaster1_IP:8080 check inter 10s rise 2 fall 2\n  server  spark2 SparkMaster2_IP:8080 check inter 10s rise 2 fall 2\n  server  spark3 SparkMaster3_IP:8080 check inter 10s rise 2 fall 2\n\n\n\u203b Spark\u306eCSS\u304c/static/\u914d\u4e0b\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u305d\u306e\u5834\u5408\u3082Spark master\u306b\u8ee2\u9001\u3059\u308b\u8a2d\u5b9a\u3092\u5165\u308c\u3066\u3042\u308a\u307e\u3059\u3002\n\n\u7d50\u679c\uff08haproxy?stats\uff09\nhttp://\u7ba1\u7406\u30b5\u30fc\u30d0IP/haproxy?stats \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3069\u306e\u30b5\u30fc\u30d0\u304c\u6b63\u5e38\u306b\u8d77\u52d5\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\n\u6240\u611f\nHAProxy\u306f\u4fbf\u5229\u3067\u3059\u306d\u3002\u52d5\u4f5c\u3082\u8efd\u5feb\u3067\u3001CPU\u3078\u306e\u30a4\u30f3\u30d1\u30af\u30c8\u304c\u307b\u3068\u3093\u3069\u3042\u308a\u307e\u305b\u3093\u3002\u305f\u307e\u306b\u767a\u751f\u3059\u308b\u7ba1\u7406\u753b\u9762\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3067\u3042\u308c\u3070\u3001t2.micro\u3067\u52d5\u304b\u3057\u3066\u3082\u307e\u3063\u305f\u304f\u554f\u984c\u306a\u3044\u3067\u3059\u3002\u7d20\u6674\u3089\u3057\u3044\u3067\u3059\u3002\n\n\u6ce8\u610f\n\u52d5\u4f5c\u306f\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u4fdd\u8a3c\u3059\u308b\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u5b9f\u969b\u304a\u8a66\u3057\u306b\u306a\u308b\u5834\u5408\u306f\u6b63\u3057\u304f\u52d5\u4f5c\u3057\u306a\u3044\u53ef\u80fd\u6027\u3082\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u3054\u7559\u610f\u304f\u3060\u3055\u3044\u3002\n\u5185\u5bb9\u3067\u9593\u9055\u3063\u3066\u3044\u308b\u90e8\u5206\u7b49\u3042\u308a\u307e\u3057\u305f\u3089\u3054\u6307\u6458\u3044\u305f\u3060\u3051\u308b\u3068\u3046\u308c\u3057\u3044\u3067\u3059\u3002\n\nApache Spark\u3092\u69cb\u7bc9\u3057\u3001\u7ba1\u7406\u30b5\u30fc\u30d0\u7d4c\u7531\u3067Spark\u306e\u7ba1\u7406\u753b\u9762\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u3001HAProxy\u3092Reverse Proxy\u3068\u3057\u3066\u69cb\u7bc9\u3057\u307e\u3059\u3002\n\n## \u8981\u4ef6/\u4ed5\u69d8\n\n1. Apache Spark master\u306f3\u53f0\u3067\u69cb\u6210\u3059\u308b\u3002\n2. \u4e0a\u8a183\u53f0\u306e\u3046\u3061Spark\u306e\u72b6\u6cc1\u304c\u308f\u304b\u308b\u306e\u306fLeader\u306e\u307f\u3002\u7ba1\u7406\u753b\u9762\u4e0a\u3067Status: ALIVE\u3068\u306a\u3063\u3066\u3044\u308b\u3082\u306e\u3092\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\uff08Leader\u4ee5\u5916\u306estandby\u6a5f\u306fWorker\u7b49\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u304c\u8868\u793a\u3055\u308c\u306a\u3044\u305f\u3081\uff09\n3. Spark\u306e\u7ba1\u7406\u753b\u9762\u306f http://\u7ba1\u7406\u30b5\u30fc\u30d0IP/spark/ \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3082\u306e\u3068\u3059\u308b\uff08leader\u306b\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3059\u308c\u3070 http://Leader_IP:8080/ \u3067\u72b6\u6cc1\u3092\u78ba\u8a8d\u3067\u304d\u308b\uff09\n\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2015-07-30_16_57_48.png](https://qiita-image-store.s3.amazonaws.com/0/28210/d17343f5-0f0a-4d6a-f74d-425fa61b0511.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2015-07-30_16_57_48.png\")\n\n## \u5b9f\u73fe\u69cb\u6210\n\n\u4e0a\u8a18\u8981\u4ef6\u3088\u308a\u4e0b\u56f3\u306e\u3088\u3046\u306a\u69cb\u6210\u3068\u3057\u3001HAProxy\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n![\u540d\u79f0\u672a\u8a2d\u5b9a.png](https://qiita-image-store.s3.amazonaws.com/0/28210/283156c9-88b3-e4de-e5e1-865ae82a47f3.png \"\u540d\u79f0\u672a\u8a2d\u5b9a.png\")\n\n#### \u4ed5\u69d82\u306e\u5bfe\u5fdc\n\n\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u6a5f\u80fd\u306e\u623b\u308a\u5024\u30c1\u30a7\u30c3\u30af\u3092\u5229\u7528\u3057\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u4e2d\u8eab\u3067Status: ALIVE\u304c\u542b\u307e\u308c\u308b\u3082\u306e\u3092\u6b63\u5e38\u3068\u3059\u308b\u3002\n\n#### \u4ed5\u69d83\u306e\u5bfe\u5fdc\n\nHTTP\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30ea\u30d7\u30ec\u30fc\u30b9\u6a5f\u80fd\u3092\u5229\u7528\u3057\u3001 /spark/ \u306b\u30de\u30c3\u30c1\u3059\u308b\u5834\u5408\u3001\u305d\u306e\u30de\u30c3\u30c1\u3057\u305f\u3082\u306e\u3092\u53d6\u308a\u9664\u3044\u305f\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u8ee2\u9001\u3059\u308b\u3002\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u5229\u7528\u53ef\u80fd\u3067\u3059\u3002\n\n```bash\nsudo yum install -y haproxy\n```\n\n\u305f\u3060\u3057\u3001\u4e0a\u8a18\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3001\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u3082\u3057\u672c\u756a\u74b0\u5883\u306b\u5c0e\u5165\u3055\u308c\u308b\u5834\u5408\u306f\u3001\u8106\u5f31\u6027\u5bfe\u5fdc\u304c\u3055\u308c\u305f\u6700\u65b0\u7248\u306e\u30bd\u30fc\u30b9\u304b\u3089\u30d3\u30eb\u30c9\u3057\u305f\u307b\u3046\u304c\u3044\u3044\u3067\u3059\u3002\n\n\n## \u8a2d\u5b9a\u5185\u5bb9\n\n\u4eca\u5f8c\u5225\u306a\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u306e\u7ba1\u7406\u753b\u9762\u3082\u7ba1\u7406\u30b5\u30fc\u30d0\u7d4c\u7531\u3067\u53c2\u7167\u3059\u308b\u3053\u3068\u3092\u8003\u616e\u3057\u3001frontend\u3068backend\u306b\u308f\u3051\u3066\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\uff08frontend\u3067URL\u30de\u30c3\u30c1\u30f3\u30b0\u5224\u5b9a\u3057\u3001\u9069\u5207\u306abackend\u3078\u8ee2\u9001\u3059\u308b\u305f\u3081\uff09\u3002\u3059\u3067\u306b\u8ee2\u9001\u5148\u304c\u6c7a\u307e\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u3001listen \u3067\u307e\u3068\u3081\u3066\u3057\u307e\u3063\u3066\u3082\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306f[HAProxy\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://cbonte.github.io/haproxy-dconv/configuration-1.5.html)\u3092\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002\n\n#### \u4ed5\u69d82\u306e\u8a2d\u5b9a\n```text\n  option  httpchk GET /\n  http-check expect rstring .+Status.+ALIVE.+\n```\n\n```option httpchk GET /```\u3067\u5404Spark master\u306e / \u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\u5358\u306b\u3053\u306e\u8a2d\u5b9a\u3060\u3051\u3060\u3068\u3001Response\u304c2xx\u304b3xx\u304b\u3057\u304b\u30c1\u30a7\u30c3\u30af\u3057\u307e\u305b\u3093\u3002```http-check expect```\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3001Response\u306e\u4e2d\u8eab\u307e\u3067\u30c1\u30a7\u30c3\u30af\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002```rstring```\u306f\u623b\u308a\u5024\u306e\u30c1\u30a7\u30c3\u30af\u3092\u6b63\u898f\u8868\u73fe\u3067\u884c\u3044\u305f\u3044\u5834\u5408\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n#### \u4ed5\u69d83\u306e\u8a2d\u5b9a\n```text\n  reqrep  ^([^\\ :]*)\\ /spark\\/(.*)  \\1\\ /\\2\n```\n\n```reqrep```\u304cURL rewrite\u3059\u308b\u5834\u5408\u306e\u8a2d\u5b9a\u3067\u3059\u3002URL\u3060\u3051\u3067\u306a\u304f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u5168\u4f53\u3092\u898b\u3066\u3044\u308b\u305f\u3081\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306a\u6b63\u898f\u8868\u73fe\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\uff08\u88dc\u8db3\uff09http \u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306f\u4e00\u822c\u7684\u306b\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```text\nuser% curl -v http://\u7ba1\u7406\u30b5\u30fc\u30d0IP/spark/\n* Hostname was NOT found in DNS cache\n*   Trying xx.xx.xx.xx...\n* Connected to xx.xx.xx.xx (xx.xx.xx.xx) port 80 (#0)\n> GET /spark/ HTTP/1.1\n> User-Agent: curl/7.37.1\n> Host: xx.xx.xx.xx\n> Accept: */*\n```\n\n\u6700\u7d42\u7684\u306a\u8a2d\u5b9a\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n\n```text\nglobal\n  log      127.0.0.1  local4 info\n  user     root\n  group    root\n  daemon\n\ndefaults\n  log      global\n  mode     http\n  option   dontlognull\n  option   redispatch\n  balance  leastconn\n  retries  3\n  maxconn  100\n  timeout  connect  5000\n  timeout  client  50000\n  timeout  server  50000\n  stats    enable\n\nfrontend MGMTSRV\n  bind    :80\n  mode    http\n  option  httplog  clf\n  acl     spark    path_reg  /spark/\n  acl     static   path_reg  /static/\n  use_backend SRV_SPARK  if spark\n  use_backend SRV_SPARK  if static\n\nbackend  SRV_SPARK\n  mode    http\n  option  httplog  clf\n  option  httpchk GET /\n  http-check expect rstring .+Status.+ALIVE.+\n  reqrep  ^([^\\ :]*)\\ /spark\\/(.*)  \\1\\ /\\2\n  server  spark1 SparkMaster1_IP:8080 check inter 10s rise 2 fall 2\n  server  spark2 SparkMaster2_IP:8080 check inter 10s rise 2 fall 2\n  server  spark3 SparkMaster3_IP:8080 check inter 10s rise 2 fall 2\n\n```\n\n\u203b Spark\u306eCSS\u304c/static/\u914d\u4e0b\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u305d\u306e\u5834\u5408\u3082Spark master\u306b\u8ee2\u9001\u3059\u308b\u8a2d\u5b9a\u3092\u5165\u308c\u3066\u3042\u308a\u307e\u3059\u3002\n\n## \u7d50\u679c\uff08haproxy?stats\uff09\n\nhttp://\u7ba1\u7406\u30b5\u30fc\u30d0IP/haproxy?stats \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3069\u306e\u30b5\u30fc\u30d0\u304c\u6b63\u5e38\u306b\u8d77\u52d5\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-07-30 17.34.50.png](https://qiita-image-store.s3.amazonaws.com/0/28210/dc86e361-b8d1-56c9-5112-3a9c8670f8a3.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-07-30 17.34.50.png\")\n\n## \u6240\u611f\n\nHAProxy\u306f\u4fbf\u5229\u3067\u3059\u306d\u3002\u52d5\u4f5c\u3082\u8efd\u5feb\u3067\u3001CPU\u3078\u306e\u30a4\u30f3\u30d1\u30af\u30c8\u304c\u307b\u3068\u3093\u3069\u3042\u308a\u307e\u305b\u3093\u3002\u305f\u307e\u306b\u767a\u751f\u3059\u308b\u7ba1\u7406\u753b\u9762\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3067\u3042\u308c\u3070\u3001t2.micro\u3067\u52d5\u304b\u3057\u3066\u3082\u307e\u3063\u305f\u304f\u554f\u984c\u306a\u3044\u3067\u3059\u3002\u7d20\u6674\u3089\u3057\u3044\u3067\u3059\u3002\n\n## \u6ce8\u610f\n\n\u52d5\u4f5c\u306f\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u4fdd\u8a3c\u3059\u308b\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u5b9f\u969b\u304a\u8a66\u3057\u306b\u306a\u308b\u5834\u5408\u306f\u6b63\u3057\u304f\u52d5\u4f5c\u3057\u306a\u3044\u53ef\u80fd\u6027\u3082\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u3054\u7559\u610f\u304f\u3060\u3055\u3044\u3002\n\u5185\u5bb9\u3067\u9593\u9055\u3063\u3066\u3044\u308b\u90e8\u5206\u7b49\u3042\u308a\u307e\u3057\u305f\u3089\u3054\u6307\u6458\u3044\u305f\u3060\u3051\u308b\u3068\u3046\u308c\u3057\u3044\u3067\u3059\u3002\n", "tags": ["haproxy", "Linux", "\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u30fc"]}