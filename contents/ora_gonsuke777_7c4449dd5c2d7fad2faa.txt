{"context": "Oracle Database \u3067\u306f IN\u53e5\u306b1000\u500b\u4ee5\u4e0a\u306e\u5024\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001ORA-1795\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\nSQL> SELECT COUNT(*) FROM TBL_X T1\n  2  WHERE C1 IN (\n  3        1\n  4    ,   2\n  5    ,   3\n:\n(\u4e2d\u7565)\n:\n4001    ,3999\n4002    ,4000\n4003  );\n  ,1001\n   *\nERROR at line 1003:\nORA-01795: maximum number of expressions in a list is 1000\n\nSQL>\n\n\u3053\u306e\u30a8\u30e9\u30fc(ORA-1795)\u3092 PL/SQL\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3 \u3068 Oracle Database 12c\u65b0\u6a5f\u80fd \u306e WITH\u53e5\u306e\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3 \u3067 \u56de\u907f\uff0f\u514b\u670d\u3057\u3066\u307f\u308b\u3084\u3067\u5f61(\uff9f)(\uff9f)\n-- PL/SQL Collection Type\nCREATE OR REPLACE TYPE tp_num_array IS TABLE OF NUMBER;\n/\n\n-- Select Query plus WITH FUNCTION\nWITH\n  FUNCTION fnc_num_array RETURN tp_num_array IS\n    -- PL/SQL Collection\n    arr_num_c1 tp_num_array := tp_num_array(NULL);\n  BEGIN\n    arr_num_c1.extend(3999);\n    arr_num_c1(1) := 1;\n    arr_num_c1(2) := 2;\n    arr_num_c1(3) := 3;\n--:\n--(\u4e2d\u7565)\n--:\n    arr_num_c1(3999) := 3999;\n    arr_num_c1(4000) := 4000;\n    RETURN arr_num_c1;\n  END;\nSELECT COUNT(*) FROM TBL_X\nWHERE C1 IN (\n  -- TABLE Function\n  SELECT * FROM TABLE(fnc_num_array)\n)\n/\n\n\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002\u4e0a\u624b\u304f\u884c\u3063\u305f\u3067\u30021000\u500b\u306e\u58c1\u3092\u8d8a\u3048\u305f\u3084\u3067\u5f61(^)(^)\nSQL> -- PL/SQL Collection Type\nSQL> CREATE OR REPLACE TYPE tp_num_array IS TABLE OF NUMBER;\n  2  /\n\nType created.\n\nSQL> -- Select Query plus WITH FUNCTION\nSQL> WITH\n  2    -- WITH FUNCTION\n  3    FUNCTION fnc_num_array RETURN tp_num_array IS\n  4      -- PL/SQL Collection\n  5      arr_num_c1 tp_num_array := tp_num_array(NULL);\n  6    BEGIN\n  7      arr_num_c1.extend(3999);\n  8      arr_num_c1(1) := 1;\n  9      arr_num_c1(2) := 2;\n 10      arr_num_c1(3) := 3;\n:\n(\u4e2d\u7565)\n:\n4006      arr_num_c1(3999) := 3999;\n4007      arr_num_c1(4000) := 4000;\n4008      RETURN arr_num_c1;\n4009    END;\n4010  -- Select Query Body\n4011  SELECT COUNT(*) FROM TBL_X\n4012  WHERE C1 IN (\n4013    -- TABLE Function\n4014    SELECT * FROM TABLE(fnc_num_array)\n4015  )\n4016  /\n\n  COUNT(*)\n----------\n      4000\n\nSQL>\n\n\u30c8\u30ea\u30c3\u30ad\u30fc \u304b\u3064 \u304b\u306a\u308a\u7121\u7406\u77e2\u7406\u306a\u3084\u308a\u65b9 \u306a\u3093\u3084\u3051\u3069\u306d\u2026\u2026\u5f61(-)(-)\n\u3067\u3082 12c\u65b0\u6a5f\u80fd\u306e WITH\u53e5\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3 \u306f\u7d50\u69cb\u4f7f\u3048\u308b\u3093\u3084\u306d\u3002\u5f61(\uff9f)(\uff9f)\nOracle Database \u3067\u306f IN\u53e5\u306b1000\u500b\u4ee5\u4e0a\u306e\u5024\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001ORA-1795\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n```sql\nSQL> SELECT COUNT(*) FROM TBL_X T1\n  2  WHERE C1 IN (\n  3        1\n  4    ,   2\n  5    ,   3\n:\n(\u4e2d\u7565)\n:\n4001    ,3999\n4002    ,4000\n4003  );\n  ,1001\n   *\nERROR at line 1003:\nORA-01795: maximum number of expressions in a list is 1000\n\nSQL>\n```\n\n\u3053\u306e\u30a8\u30e9\u30fc(ORA-1795)\u3092 PL/SQL\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3 \u3068 Oracle Database 12c\u65b0\u6a5f\u80fd \u306e WITH\u53e5\u306e\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3 \u3067 \u56de\u907f\uff0f\u514b\u670d\u3057\u3066\u307f\u308b\u3084\u3067\u5f61(\uff9f)(\uff9f)\n\n```sql\n-- PL/SQL Collection Type\nCREATE OR REPLACE TYPE tp_num_array IS TABLE OF NUMBER;\n/\n\n-- Select Query plus WITH FUNCTION\nWITH\n  FUNCTION fnc_num_array RETURN tp_num_array IS\n    -- PL/SQL Collection\n    arr_num_c1 tp_num_array := tp_num_array(NULL);\n  BEGIN\n    arr_num_c1.extend(3999);\n    arr_num_c1(1) := 1;\n    arr_num_c1(2) := 2;\n    arr_num_c1(3) := 3;\n--:\n--(\u4e2d\u7565)\n--:\n    arr_num_c1(3999) := 3999;\n    arr_num_c1(4000) := 4000;\n    RETURN arr_num_c1;\n  END;\nSELECT COUNT(*) FROM TBL_X\nWHERE C1 IN (\n  -- TABLE Function\n  SELECT * FROM TABLE(fnc_num_array)\n)\n/\n```\n\n\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002\u4e0a\u624b\u304f\u884c\u3063\u305f\u3067\u30021000\u500b\u306e\u58c1\u3092\u8d8a\u3048\u305f\u3084\u3067\u5f61(^)(^)\n\n```sql\nSQL> -- PL/SQL Collection Type\nSQL> CREATE OR REPLACE TYPE tp_num_array IS TABLE OF NUMBER;\n  2  /\n\nType created.\n\nSQL> -- Select Query plus WITH FUNCTION\nSQL> WITH\n  2    -- WITH FUNCTION\n  3    FUNCTION fnc_num_array RETURN tp_num_array IS\n  4      -- PL/SQL Collection\n  5      arr_num_c1 tp_num_array := tp_num_array(NULL);\n  6    BEGIN\n  7      arr_num_c1.extend(3999);\n  8      arr_num_c1(1) := 1;\n  9      arr_num_c1(2) := 2;\n 10      arr_num_c1(3) := 3;\n:\n(\u4e2d\u7565)\n:\n4006      arr_num_c1(3999) := 3999;\n4007      arr_num_c1(4000) := 4000;\n4008      RETURN arr_num_c1;\n4009    END;\n4010  -- Select Query Body\n4011  SELECT COUNT(*) FROM TBL_X\n4012  WHERE C1 IN (\n4013    -- TABLE Function\n4014    SELECT * FROM TABLE(fnc_num_array)\n4015  )\n4016  /\n\n  COUNT(*)\n----------\n      4000\n\nSQL>\n```\n\n\u30c8\u30ea\u30c3\u30ad\u30fc \u304b\u3064 \u304b\u306a\u308a\u7121\u7406\u77e2\u7406\u306a\u3084\u308a\u65b9 \u306a\u3093\u3084\u3051\u3069\u306d\u2026\u2026\u5f61(-)(-)\n\u3067\u3082 12c\u65b0\u6a5f\u80fd\u306e WITH\u53e5\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3 \u306f\u7d50\u69cb\u4f7f\u3048\u308b\u3093\u3084\u306d\u3002\u5f61(\uff9f)(\uff9f)\n", "tags": ["plsql", "oracle", "Database"]}