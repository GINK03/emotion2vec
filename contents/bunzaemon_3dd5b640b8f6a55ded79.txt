{"tags": ["bioinformatics", "Python"], "context": "Qiime 1.9.0 \u304c \u6b63\u5f0f\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u8981\u4ef6\n\n'CentOS6.6', pyenv \u3067\u306e\u74b0\u5883\u69cb\u7bc9\n\npython \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f 2.7.3\n\npython \u30d0\u30fc\u30b8\u30e7\u30f3\u8981\u4ef6\u304c\u3001\u3053\u3053\u306e\u3069\u3053\u3092\u6398\u3063\u3066\u3082\u51fa\u3066\u6765\u306a\u3044\u3002\n\u99c4\u76ee\u5143\u3067\u30013\u7cfb\u3092\u8a66\u3057\u305f\u3082\u306e\u306e\u3001\u3084\u3063\u3071\u308a\u4e0a\u624b\u304f\u884c\u304b\u306a\u304b\u3063\u305f\u3002\n\u4e00\u5fdc\u3001\u524d\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u74b0\u5883\u306b\u4f75\u305b\u3066\u3002\npyenv \u74b0\u5883\u3067\u306f\u7121\u3044\u4eba\u306f\u5fc5\u8981\u306b\u5fdc\u3058\u3066 sudo \u3059\u308b\u3002--prefix \u4ee5\u964d\u3092\u6d88\u53bb\u3059\u308b\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u9694\u96e2\u74b0\u5883\u4f5c\u6210\npyenv \u4f7f\u3063\u3066\u306a\u3044\u4eba\u306b\u306f\u7121\u95a2\u4fc2\n$ pyenv virtualenv 2.7.3 qiime1.9\n$ pyenv shell qiime1.9\n$ pyenv rehash\n$ pip install --upgrade setuptools\n$ pip install --upgrade pip\n\n\n\u672c\u4f53\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nQiime1.8 \u304b\u3089\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306e\u5834\u5408\u306b\u3001\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u304c\u5fc5\u8981\u304b\u3069\u3046\u304b\u306f\u691c\u8a3c\u3057\u3066\u3044\u306a\u3044\n\nnose,numpy\n$ pip install nose\n$ pip install numpy  \n\nnose \u306f\u3001 numpy \u306a\u3069\u306e\u30c6\u30b9\u30c8\u306b\u5fc5\u8981\n\nscipy \u7528\u306e\u6570\u5024\u6f14\u7b97\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc\n\u5148\u306b\u5165\u308c\u3068\u304b\u306a\u3044\u3068 scipy \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u30b3\u30b1\u308b\n\u7d20\u76f4\u306b sudo \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u5f53\u65b9\u306e\u74b0\u5883\u3067\u306f\u3001 lapack-devel \u306e\u307f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3060\u304c\u3001\u4e00\u5fdc\u5168\u90e8\u66f8\u304f\u3002\n$ sudo yum install lapack-devel\n$ sudo yum install blas-devel\n$ sudo yum install atlas\n\n\nscipy\n\u672c\u4f53\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u304c\u3001\u4e0a\u8a18\u306e\u304b\u3089\u307f\u3067\u5148\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n$ pip install scipy\n\n\n\u672c\u4f53\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u65b0\u898f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30b3\u30b1\u308b\u4e8b\u3082\u306a\u304f\u3001\u3001\u3001\n$ pip install qiime \n\n\nQiime1.8 \u304b\u3089\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\n\u306e\u5834\u5408\u3082\u3001\u4e0a\u306b\u540c\u3058\n$ pip install --upgrade qiime \n\n\n\u78ba\u8a8d\n\u500b\u3005\u306e\u30a2\u30d7\u30ea\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u74b0\u5883\u5909\u6570\u8a2d\u5b9a\u5f8c\u306b\u3001\n$ print_qiime_config.py -tf\n\n\u30a8\u30e9\u30fc\u306f\u51fa\u3066\u306a\u3044\u306e\u3067\u826f\u3057\u3059\u308b\u3002\n\n\u500b\u3005\u306e\u30a2\u30d7\u30ea\n\u4ee5\u4e0b\u306e\u3082\u306e\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3060\u3051\u8a18\u8f09\n\n\u65b0\u898f\u306b\u5fc5\u8981\u3060\u3063\u305f hdf5, h5py\n\nMothur 1.25.0 \uff08\u3061\u3087\u3063\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u96e3\u3057\u3044\u3082\u306e\uff09\n\n${PLENV_ROOT}/versions/qiime1.9/src \u306b\u30bd\u30fc\u30b9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u3042\u308b\u3068\u60f3\u5b9a\n\nhdf5, h5py\n\u30d1\u30e9\u30ec\u30eb\u5fc5\u8981\u306a\u7a0b\u306e\u30c7\u30fc\u30bf\u306f\u6271\u3063\u3066\u306a\u3044\u3002\n\u30f2\u30fc\u30cb\u30f3\u30b0\u304c\u5c71\u7a0b\u51fa\u305f\u304c\u3001make check \u306f\u30d1\u30b9\u3057\u305f\u3002\n$ wget -q http://www.hdfgroup.org/ftp/HDF5/current/src/hdf5-1.8.14.tar.bz2\n$ tar xjf hdf5-1.8.14.tar.bz2\n$ cd hdf5-1.8.14\n$ ./configure --prefix=${PLENV_ROOT}/versions/qiime1.9\n$ make\n$ make check\n$ make install\n\n$ HDF5_DIR=${PLENV_ROOT}/versions/qiime1.9 pip install h5py\n\n\nmothur 1.25.0\nQiime\u306b\u3088\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a => 1.25.0\n\u3053\u3053\u304b\u3089 src_mothur \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n$ ls | grep Mot\nMothur.1.25.0.zip\n$ unzip Mothur.1.25.0.zip\n\n\nuchime_src/Makefile \u306e\u7de8\u96c6\n\u7aef\u6298\u3063\u3066\u307e\u3059\u304c\u3001\u9069\u5f53\u306a\u30a8\u30c7\u30a3\u30bf\u3067\u7de8\u96c6\u3057\u3066\u3002\n\u884c\u982d\u306e\u7a7a\u767d\u306f'\u30bf\u30d6'\n$ cd Mothur.source/uchime_src\n$ touch Makefile\n\n\nMakefile\nCXX=g++\nCXXFLAGS=-O3 -msse4.2 -mavx -mfpmath=sse -D_FILE_OFFSET_BITS=64 -DNDEBUG=1 -DUCHIMES=1\nOBJ=$(subst .cpp,.o,$(wildcard  *.cpp))\n\nuchime: $(OBJ)\n    $(CXX) $(OBJ) -o $@ -lm\n    strip uchime\n    mv uchime ../\n\n\n\nmakefile \u306e\u7de8\u96c6\n\u7aef\u6298\u3063\u3066\u307e\u3059\u304c\u3001\uff08\u7565\uff09\n$ cd ../\n$ diff makefile makefile.bak\n31c31\n<       #TARGET_ARCH += -arch x86_64\n---\n>       TARGET_ARCH += -arch x86_64\n40c40\n<       CXXFLAGS += -mtune=native -march=native -m64\n---\n>       #CXXFLAGS += -mtune=native -march=native -m64\n104c104\n<       make -C uchime_src\n---\n>       cd uchime_src && ./mk && mv uchime .. && cd ..\n\n\nmake\n\n$ make\n$ mv mothur uchime ../../bin/\n$ cd ../\n$ rm -rf Mothur.source __MACOSX\n$ mothur -version\nMothur version=1.25.0\nRelease Date=5/1/2012\n\n\n[Qiime](http://qiime.org/) 1.9.0 \u304c [\u6b63\u5f0f\u30ea\u30ea\u30fc\u30b9](https://qiime.wordpress.com/2015/01/30/qiime-1-9-0-is-live/)\u3055\u308c\u307e\u3057\u305f\u3002\n\n### \u8981\u4ef6\n* 'CentOS6.6', `pyenv` \u3067\u306e\u74b0\u5883\u69cb\u7bc9\n* `python` \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f 2.7.3\n\n`python` \u30d0\u30fc\u30b8\u30e7\u30f3\u8981\u4ef6\u304c\u3001[\u3053\u3053](http://qiime.org/)\u306e\u3069\u3053\u3092\u6398\u3063\u3066\u3082\u51fa\u3066\u6765\u306a\u3044\u3002\n\u99c4\u76ee\u5143\u3067\u30013\u7cfb\u3092\u8a66\u3057\u305f\u3082\u306e\u306e\u3001\u3084\u3063\u3071\u308a\u4e0a\u624b\u304f\u884c\u304b\u306a\u304b\u3063\u305f\u3002\n\u4e00\u5fdc\u3001\u524d\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u74b0\u5883\u306b\u4f75\u305b\u3066\u3002\n\n`pyenv` \u74b0\u5883\u3067\u306f\u7121\u3044\u4eba\u306f\u5fc5\u8981\u306b\u5fdc\u3058\u3066 `sudo` \u3059\u308b\u3002`--prefix` \u4ee5\u964d\u3092\u6d88\u53bb\u3059\u308b\u3002\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\n### \u9694\u96e2\u74b0\u5883\u4f5c\u6210\n`pyenv` \u4f7f\u3063\u3066\u306a\u3044\u4eba\u306b\u306f\u7121\u95a2\u4fc2\n\n```bash:\n$ pyenv virtualenv 2.7.3 qiime1.9\n$ pyenv shell qiime1.9\n$ pyenv rehash\n$ pip install --upgrade setuptools\n$ pip install --upgrade pip\n```\n\n### \u672c\u4f53\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nQiime1.8 \u304b\u3089\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u306e\u5834\u5408\u306b\u3001\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u304c\u5fc5\u8981\u304b\u3069\u3046\u304b\u306f\u691c\u8a3c\u3057\u3066\u3044\u306a\u3044\n\n#### nose,numpy\n\n```bash:\n$ pip install nose\n$ pip install numpy  \n```\n`nose` \u306f\u3001 `numpy` \u306a\u3069\u306e\u30c6\u30b9\u30c8\u306b\u5fc5\u8981\n\n#### scipy \u7528\u306e\u6570\u5024\u6f14\u7b97\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc\n\u5148\u306b\u5165\u308c\u3068\u304b\u306a\u3044\u3068 `scipy` \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u30b3\u30b1\u308b\n\u7d20\u76f4\u306b `sudo` \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u5f53\u65b9\u306e\u74b0\u5883\u3067\u306f\u3001 `lapack-devel` \u306e\u307f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3060\u304c\u3001\u4e00\u5fdc\u5168\u90e8\u66f8\u304f\u3002\n\n```bash:\n$ sudo yum install lapack-devel\n$ sudo yum install blas-devel\n$ sudo yum install atlas\n```\n\n#### scipy\n\u672c\u4f53\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u304c\u3001\u4e0a\u8a18\u306e\u304b\u3089\u307f\u3067\u5148\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```bash:\n$ pip install scipy\n```\n\n\n### \u672c\u4f53\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n#### \u65b0\u898f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30b3\u30b1\u308b\u4e8b\u3082\u306a\u304f\u3001\u3001\u3001\n\n```bash:\n$ pip install qiime \n```\n\n#### Qiime1.8 \u304b\u3089\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\n\u306e\u5834\u5408\u3082\u3001\u4e0a\u306b\u540c\u3058\n\n\n```bash:\n$ pip install --upgrade qiime \n```\n\n### \u78ba\u8a8d\n\u500b\u3005\u306e\u30a2\u30d7\u30ea\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u74b0\u5883\u5909\u6570\u8a2d\u5b9a\u5f8c\u306b\u3001\n\n```bash:\n$ print_qiime_config.py -tf\n```\n\n\u30a8\u30e9\u30fc\u306f\u51fa\u3066\u306a\u3044\u306e\u3067\u826f\u3057\u3059\u308b\u3002\n\n### \u500b\u3005\u306e\u30a2\u30d7\u30ea\n\n\u4ee5\u4e0b\u306e\u3082\u306e\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3060\u3051\u8a18\u8f09\n\n* \u65b0\u898f\u306b\u5fc5\u8981\u3060\u3063\u305f `hdf5`, `h5py`\n* Mothur 1.25.0 \uff08\u3061\u3087\u3063\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u96e3\u3057\u3044\u3082\u306e\uff09\n\n`${PLENV_ROOT}/versions/qiime1.9/src` \u306b\u30bd\u30fc\u30b9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u3042\u308b\u3068\u60f3\u5b9a\n\n#### hdf5, h5py\n\n\u30d1\u30e9\u30ec\u30eb\u5fc5\u8981\u306a\u7a0b\u306e\u30c7\u30fc\u30bf\u306f\u6271\u3063\u3066\u306a\u3044\u3002\n\u30f2\u30fc\u30cb\u30f3\u30b0\u304c\u5c71\u7a0b\u51fa\u305f\u304c\u3001`make check` \u306f\u30d1\u30b9\u3057\u305f\u3002\n\n```bash:\n$ wget -q http://www.hdfgroup.org/ftp/HDF5/current/src/hdf5-1.8.14.tar.bz2\n$ tar xjf hdf5-1.8.14.tar.bz2\n$ cd hdf5-1.8.14\n$ ./configure --prefix=${PLENV_ROOT}/versions/qiime1.9\n$ make\n$ make check\n$ make install\n```\n\n```bash:\n$ HDF5_DIR=${PLENV_ROOT}/versions/qiime1.9 pip install h5py\n```\n\n#### mothur 1.25.0\n\nQiime\u306b\u3088\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a => 1.25.0\n[\u3053\u3053](http://qiime.org/install/install.html)\u304b\u3089 src_mothur \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n```bash:\n$ ls | grep Mot\nMothur.1.25.0.zip\n$ unzip Mothur.1.25.0.zip\n```\n\n\n##### `uchime_src/Makefile` \u306e\u7de8\u96c6\n\u7aef\u6298\u3063\u3066\u307e\u3059\u304c\u3001\u9069\u5f53\u306a\u30a8\u30c7\u30a3\u30bf\u3067\u7de8\u96c6\u3057\u3066\u3002\n\u884c\u982d\u306e\u7a7a\u767d\u306f'\u30bf\u30d6'\n\n\n```bash:\n$ cd Mothur.source/uchime_src\n$ touch Makefile\n```\n\n```Makefile:Makefile\nCXX=g++\nCXXFLAGS=-O3 -msse4.2 -mavx -mfpmath=sse -D_FILE_OFFSET_BITS=64 -DNDEBUG=1 -DUCHIMES=1\nOBJ=$(subst .cpp,.o,$(wildcard  *.cpp))\n\nuchime: $(OBJ)\n\t$(CXX) $(OBJ) -o $@ -lm\n\tstrip uchime\n\tmv uchime ../\n```\n\n##### `makefile` \u306e\u7de8\u96c6\n\u7aef\u6298\u3063\u3066\u307e\u3059\u304c\u3001\uff08\u7565\uff09\n\n\n```bash:\n$ cd ../\n$ diff makefile makefile.bak\n31c31\n<       #TARGET_ARCH += -arch x86_64\n---\n>       TARGET_ARCH += -arch x86_64\n40c40\n<       CXXFLAGS += -mtune=native -march=native -m64\n---\n>       #CXXFLAGS += -mtune=native -march=native -m64\n104c104\n<       make -C uchime_src\n---\n>       cd uchime_src && ./mk && mv uchime .. && cd ..\n```\n\n##### `make`\n\n```bash:\n$ make\n$ mv mothur uchime ../../bin/\n$ cd ../\n$ rm -rf Mothur.source __MACOSX\n$ mothur -version\nMothur version=1.25.0\nRelease Date=5/1/2012\n```\n\n"}