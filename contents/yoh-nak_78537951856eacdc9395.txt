{"context": " More than 1 year has passed since last update.GitHub\nhttps://github.com/yoh-nak/xml2jsonp\n\n\u4f7f\u3044\u65b9\nXML\u3067\u53d7\u3051\u53d6\u308bwebapi\u3092jsonp\u306b\u7f6e\u63db\u3059\u308b\u3053\u3068\u3067\u30af\u30ed\u30b9\u30aa\u30ea\u30b8\u30f3\u30dd\u30ea\u30b7\u30fc\u3092\u89e3\u6d88\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001URL\u30af\u30a8\u30ea\u306b\u6307\u5b9a\u3057\u305f\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u540d\u3068Web API\u3092\u4f7f\u3063\u305fjsonp\u3092\u51fa\u529b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nhttp://\u30c9\u30e1\u30a4\u30f3:3000/?callback=\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u540d&api=API\u306eURL\n\n\n! \u6ce8\u610f\nAPI\u306b\u6307\u5b9a\u3059\u308bURL\u306f\u4e0b\u8a18\u306e\u30b5\u30a4\u30c8\nhttp://www.tagindex.com/tool/url.html\n\u306a\u3069\u3092\u3064\u304b\u3063\u3066UTF-8\u3067URL\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u305f\u3082\u306e\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u305f\u3068\u3048\u3070\u4e0b\u8a18\u306eAPI\u306eURL\u3092URL\u30a8\u30f3\u30b3\u30fc\u30c9\u3059\u308b\u3068\nhttp://wikipedia.simpleapi.net/api?keyword=HTTP&output=xml\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\nhttp%3a%2f%2fwikipedia%2esimpleapi%2enet%2fapi%3fkeyword%3dHTTP%26output%3dxml\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nExpress\n$ npm install -g express\n\n$ express xml2jsonp\n$ cd xml2jsonp\n$ npm install\n\n\n\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\n$ npm install xmljson --save\n\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\npackage.json\n{\n  \"name\": \"application-name\",\n  \"version\": \"0.0.1\",\n  \"private\": true,\n  \"scripts\": {\n    \"start\": \"node app.js\"\n  },\n  \"dependencies\": {\n    \"express\": \"3.4.8\",\n    \"jade\": \"*\",\n    \"stylus\": \"*\",\n    \"xmljson\": \"^0.2.0\"\n  }\n}\n\n\n\napp.js\n\n/**\n * Module dependencies.\n */\n\nvar express = require('express');\nvar routes = require('./routes');\nvar user = require('./routes/user');\nvar http = require('http');\nvar path = require('path');\n\nvar app = express();\n\n// all environments\napp.set('port', process.env.PORT || 3000);\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'jade');\napp.use(express.favicon());\napp.use(express.logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded());\napp.use(express.methodOverride());\napp.use(app.router);\napp.use(require('stylus').middleware(path.join(__dirname, 'public')));\napp.use(express.static(path.join(__dirname, 'public')));\n\n// development only\nif ('development' == app.get('env')) {\n  app.use(express.errorHandler());\n}\n\napp.get('/', routes.index);\napp.get('/users', user.list);\n\nhttp.createServer(app).listen(app.get('port'), function(){\n  console.log('Express server listening on port ' + app.get('port'));\n});\n\n\n\nroutes/index.js\n\n/*\n * GET home page.\n */\n\nexports.index = function(req, res){\n\n    var xml2jsonp = require('../libs/xml2jsonp');\n    xml2jsonp.convert(req, res);\n\n};\n\n\n\nlibs/xml2jsonp.js\n\nvar http = require('http');\nvar xmljson = require('xmljson');\n\nexports.convert = function(req, res){\n\n    var testUrl = 'http://wikipedia.simpleapi.net/api?keyword=HTTP&output=xml';\n\n    var api = decodeURIComponent(req.query.api) ? decodeURIComponent(req.query.api) : testUrl;\n    var callback = req.query.callback ? req.query.callback : 'callback';\n\n    var xml = '';\n\n    http.get(api, function(response) {\n\n        response.setEncoding('utf8');\n        response.on('data', function(str) {\n            xml += str;\n\n            xmljson.to_json(xml, function (error, data) {\n\n                var jsonp = callback + '(' + JSON.stringify(data) + ')';\n\n                res.header('Content-Type', 'text/javascript; charset=UTF-8');\n                res.send(jsonp);\n\n            });\n        });\n    }).on('error', function(e){\n        console.log(e.message);\n    });\n}\n\n\nGitHub\nhttps://github.com/yoh-nak/xml2jsonp\n\n## \u4f7f\u3044\u65b9\n\nXML\u3067\u53d7\u3051\u53d6\u308bwebapi\u3092jsonp\u306b\u7f6e\u63db\u3059\u308b\u3053\u3068\u3067\u30af\u30ed\u30b9\u30aa\u30ea\u30b8\u30f3\u30dd\u30ea\u30b7\u30fc\u3092\u89e3\u6d88\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001URL\u30af\u30a8\u30ea\u306b\u6307\u5b9a\u3057\u305f\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u540d\u3068Web API\u3092\u4f7f\u3063\u305fjsonp\u3092\u51fa\u529b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```\nhttp://\u30c9\u30e1\u30a4\u30f3:3000/?callback=\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u540d&api=API\u306eURL\n```\n\n### ! \u6ce8\u610f\n\nAPI\u306b\u6307\u5b9a\u3059\u308bURL\u306f\u4e0b\u8a18\u306e\u30b5\u30a4\u30c8\n\nhttp://www.tagindex.com/tool/url.html\n\n\u306a\u3069\u3092\u3064\u304b\u3063\u3066UTF-8\u3067URL\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u305f\u3082\u306e\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u305f\u3068\u3048\u3070\u4e0b\u8a18\u306eAPI\u306eURL\u3092URL\u30a8\u30f3\u30b3\u30fc\u30c9\u3059\u308b\u3068\n\n```\nhttp://wikipedia.simpleapi.net/api?keyword=HTTP&output=xml\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\nhttp%3a%2f%2fwikipedia%2esimpleapi%2enet%2fapi%3fkeyword%3dHTTP%26output%3dxml\n```\n\n\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n### Express\n\n```\n$ npm install -g express\n```\n\n\n```\n$ express xml2jsonp\n$ cd xml2jsonp\n$ npm install\n```\n\n### \u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\n\n```\n$ npm install xmljson --save\n```\n\n## \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\n```json:package.json\n{\n  \"name\": \"application-name\",\n  \"version\": \"0.0.1\",\n  \"private\": true,\n  \"scripts\": {\n    \"start\": \"node app.js\"\n  },\n  \"dependencies\": {\n    \"express\": \"3.4.8\",\n    \"jade\": \"*\",\n    \"stylus\": \"*\",\n    \"xmljson\": \"^0.2.0\"\n  }\n}\n```\n\n```js:app.js\n\n/**\n * Module dependencies.\n */\n\nvar express = require('express');\nvar routes = require('./routes');\nvar user = require('./routes/user');\nvar http = require('http');\nvar path = require('path');\n\nvar app = express();\n\n// all environments\napp.set('port', process.env.PORT || 3000);\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'jade');\napp.use(express.favicon());\napp.use(express.logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded());\napp.use(express.methodOverride());\napp.use(app.router);\napp.use(require('stylus').middleware(path.join(__dirname, 'public')));\napp.use(express.static(path.join(__dirname, 'public')));\n\n// development only\nif ('development' == app.get('env')) {\n  app.use(express.errorHandler());\n}\n\napp.get('/', routes.index);\napp.get('/users', user.list);\n\nhttp.createServer(app).listen(app.get('port'), function(){\n  console.log('Express server listening on port ' + app.get('port'));\n});\n```\n\n```js:routes/index.js\n\n/*\n * GET home page.\n */\n\nexports.index = function(req, res){\n\n    var xml2jsonp = require('../libs/xml2jsonp');\n    xml2jsonp.convert(req, res);\n\n};\n```\n\n```js:libs/xml2jsonp.js\n\nvar http = require('http');\nvar xmljson = require('xmljson');\n\nexports.convert = function(req, res){\n\n    var testUrl = 'http://wikipedia.simpleapi.net/api?keyword=HTTP&output=xml';\n\n    var api = decodeURIComponent(req.query.api) ? decodeURIComponent(req.query.api) : testUrl;\n    var callback = req.query.callback ? req.query.callback : 'callback';\n\n    var xml = '';\n\n    http.get(api, function(response) {\n\n        response.setEncoding('utf8');\n        response.on('data', function(str) {\n            xml += str;\n\n            xmljson.to_json(xml, function (error, data) {\n\n                var jsonp = callback + '(' + JSON.stringify(data) + ')';\n                \n                res.header('Content-Type', 'text/javascript; charset=UTF-8');\n                res.send(jsonp);\n\n            });\n        });\n    }).on('error', function(e){\n        console.log(e.message);\n    });\n}\n```\n\n", "tags": ["Node.js", "WebAPI", "jsonp", "Express"]}