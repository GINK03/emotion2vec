{"context": "\u3000\n\u3053\u308c\u306f\u3001OpenCV Advent Calendar 2016 16\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\u95a2\u9023\u8a18\u4e8b\u306f\u76ee\u6b21\u306b\u307e\u3068\u3081\u3089\u308c\u3066\u3044\u307e\u3059\u3002\n\n\n1. \u306f\u3058\u3081\u306b\n\u7686\u3055\u3093\u3054\u5b58\u77e5\u306e\u3088\u3046\u306b\uff0cOpenCV-3.1\u3067(contrib\u306b)sfm\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u5165\u308a\u307e\u3057\u305f\uff0e\u7686\u3055\u3093\u4f7f\u3063\u3066\u3044\u307e\u3059\u304b\uff1f\u3082\u3061\u308d\u3093\u50d5\u306f\u6bce\u65e5\u30d0\u30ea\u30d0\u30ea\u4f7f\u3063\u3066\u2026\u307e\u305b\u3093\uff0e\u30d3\u30eb\u30c9\u3057\u3066\u30b5\u30f3\u30d7\u30eb\u3092\u8a66\u3057\u305f\u3060\u3051\u3067\uff0c\u5b9f\u7528\u3068\u3057\u3066\u4f7f\u3063\u305f\u3053\u3068\u306f\u4e00\u5ea6\u3082\u3042\u308a\u307e\u305b\u3093\uff0e\u3057\u304b\u3057\uff0c\u305d\u3053\u306b\u30b3\u30fc\u30c9\u304c\u3042\u308b\u9650\u308a\uff0c\u5b8c\u5168\u4f53\u3092\u76ee\u6307\u3057\u3066\u30d3\u30eb\u30c9\u3059\u308b\u306e\u306f\u4eba\u306e\u6027\u3068\u3044\u3046\u3082\u306e\u3067\u3057\u3087\u3046\uff0e\n\u3068\u3044\u3046\u3053\u3068\u3067\uff0csfm\u30e2\u30b8\u30e5\u30fc\u30eb\u5165\u308a\u306eOpenCV\u30d3\u30eb\u30c9\u3068\u30b5\u30f3\u30d7\u30eb\u5b9f\u884c\u306b\u3064\u3044\u3066\uff0c\u5b9f\u969b\u306b\u8a66\u3057\u305f\u4eba\u3057\u304b\u77e5\u3089\u306a\u3044\u843d\u3068\u3057\u7a74\u3092\u524d\u7de8\u30fb\u5f8c\u7de8\u306b\u5206\u3051\u3066\u7d39\u4ecb\u3057\u307e\u3059\uff0e\n\u672c\u65e5\u306fVisualStudio 2015\u3067sfm\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\uff0e\u4ee5\u4e0b\u3067\u306f64bit\u3067Release\u30d3\u30eb\u30c9\u3092\u3057\u3066\u3044\u307e\u3059\uff0e\ncygwin\u3067\u30d3\u30eb\u30c9\u3057\u305f\u3044\u4eba\u306f\uff0c\u3053\u3061\u3089\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\uff0e\nLinux\u3067\u30d3\u30eb\u30c9\u3057\u305f\u3044\u4eba\u306f\uff0c\u4ee5\u4e0b\u3067\u5fc5\u8981\u306a\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u5168\u3066apt-get\u3067\u304d\u305f\u306f\u305a\u306a\u306e\u3067\uff0c\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306b3\u7ae0\u306eOpenCV\u306e\u30d3\u30eb\u30c9\u8a2d\u5b9a\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\uff0e\n\u305d\u306e\u4ed6\u306e\u74b0\u5883(macOS\u3068\u304bAndroid\u3068\u304b)\u306b\u3064\u3044\u3066\u306f\u5168\u304f\u77e5\u3089\u306a\u3044\u306e\u3067\u3054\u3081\u3093\u306a\u3055\u3044\uff0e\n\u306a\u304a\uff0c\u8efd\u304f\u691c\u7d22\u3057\u305f\u3060\u3051\u3067\uff0c\u85e4\u672c\u3055\u3093\u304clibmv\uff08\u2190opencv_sfm\u3078\u79fb\u690d\u3055\u308c\u308b\u524d\u306e\u5143\u30b3\u30fc\u30c9\uff09\u3092\u30d3\u30eb\u30c9\u3057\u3066\u3044\u305f\u308a\uff0c\u305d\u308c\u3092\u53c2\u8003\u306b\u3057\u3066opencv_sfm\u3092libmv\u3078\u4e0a\u66f8\u304d\u3057\u3066\u30d3\u30eb\u30c9\u3057\u3066\u3044\u308b\u65b9\u306a\u3069\u304c\u898b\u53d7\u3051\u3089\u308c\u307e\u3059\u304c\uff0c\u3053\u3053\u3067\u306fOpenCV\u306e\u7d20\u6750\u672c\u6765\u306e\u5473\u3092\u751f\u304b\u3057\u305f\u672c\u6765\u306e\u30d3\u30eb\u30c9\u30b7\u30b9\u30c6\u30e0\u306e\u4e2d\u3067\u30d3\u30eb\u30c9\u3057\u307e\u3059\uff0e\n\u307e\u305f\uff0c\u4ee5\u4e0b\u3067\u306f\u5404\u7a2e\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u3064\u3044\u3066github\u3067\u306emaster\u30b3\u30fc\u30c9\u306f\u4f7f\u308f\u305a\uff0c\u30d0\u30fc\u30b8\u30e7\u30f3\u30ca\u30f3\u30d0\u30fc\u304c\u3042\u308b\uff08\uff1d\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\uff09\u30b3\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u304c\uff0c\u30b3\u30fc\u30c9\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u56fa\u5b9a\u3057\u3066\u7d39\u4ecb\u3057\u305f\u3060\u3051\u306e\u7406\u7531\u3067\u3059\u306e\u3067\uff0cmaster\u3067\u3082\u57fa\u672c\u7684\u306b\u540c\u69d8\u306e\u624b\u9806\u3067\u3044\u3051\u308b\u3068\u306f\u601d\u3044\u307e\u3059\uff0e\n\u305d\u308c\u3068\uff0c\u4ee5\u4e0b\u306e\u8aac\u660e\u3067\u306fcmake\u3067\u3044\u308d\u3044\u308d\u306a\u5909\u6570\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u304c\uff0cWindows\u306ecmake\u3067\u306f\uff0c\u4f55\u304b\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u3066\u304b\u3089Configure\u3059\u308b\u3068\u65b0\u3057\u3044\u5909\u6570\u304c\u51fa\u3066\u304d\u305f\u308a\u3059\u308b\u306e\u3067\uff0c\u5fc5\u8981\u306b\u5fdc\u3058\u3066Configure\u3092\u7e54\u308a\u4ea4\u305c\u306a\u304c\u3089\u8a66\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff0e\n\n2. \u524d\u6e96\u5099\n\u307e\u305a\uff0copencv_sfm\u306e\u30d3\u30eb\u30c9\u306b\u5fc5\u8981\u306a\u5177\u6750\u3092\u9806\u756a\u306b\u30d3\u30eb\u30c9\u3057\u3066\u3044\u304d\u307e\u3059\uff0e\n\n2.1 Eigen\neigen \u306e\u672c\u7a3f\u57f7\u7b46\u6642\u306e\u6700\u65b0\u7248\u306f3.3.0\u3067\u3059\uff0e\n\u6700\u521d\u306b3.3.0\u3092\u4f7f\u3063\u3066\u4f5c\u696d\u3057\u305f\u969b\u306b\u306f\uff0c\u6700\u5f8c\u306eOpenCV\u306e\u30d3\u30eb\u30c9\u306e\u969b\u306b\u610f\u5473\u4e0d\u660e\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u3066\uff0c\u4e8c\u6669\u30cf\u30de\u3063\u3066\u304b\u3089\u632b\u6298\u3057\u307e\u3057\u305f\uff0e\u672c\u7a3f\u3092\u66f8\u304d\u7d42\u3048\u305f\u5f8c\u3067\u5ff5\u306e\u305f\u3081\u78ba\u8a8d\u3057\u305f\u3089\uff0c\u4eca\u5ea6\u306f\u3059\u3093\u306a\u308a\u30d3\u30eb\u30c9\u304c\u901a\u308a\u307e\u3057\u305f\uff0e\u306a\u306e\u3067\uff0c3.3.0\u3067\u3082\u826f\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\uff0c3.2.10\u3092\u4f7f\u3063\u305f\u65b9\u304c\u5b89\u5168\u3060\u3068\u601d\u3044\u307e\u3059\uff0e\n\u3044\u305a\u308c\u306b\u305b\u3088Eigen\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306f\u666e\u901a\u306bcmake\uff0c\u30d3\u30eb\u30c9\uff0c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067OK\u306a\u306f\u305a\u3067\u3059\uff0e\n\n2.2 Glog\nglog\u306e\u672c\u7a3f\u57f7\u7b46\u6642\u306e\u6700\u65b0\u7248\u306f0.3.4\u3067\u3059\uff0e\n\u914d\u5e03\u7269\u306bgoogle-glog.sln\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067\uff0c\u305d\u308c\u3092\u4f7f\u3044\u307e\u3059\uff0eVisualStudio\u3067\u958b\u3051\u3070\u308f\u304b\u308a\u307e\u3059\u304c\uff0c\u3053\u308c\u306f32bit\u30d3\u30eb\u30c9\u7528\u306a\u306e\u3067\uff0c\u69cb\u6210\u30de\u30cd\u30fc\u30b8\u30e3\u306764bit\u30d3\u30eb\u30c9\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5909\u63db\u3057\u307e\u3059\uff0e\n\u307e\u305f\uff0c\u914d\u5e03\u3055\u308c\u3066\u3044\u308b\u30b3\u30fc\u30c9\u3092\u305d\u306e\u307e\u307eVisualStudio2015\u3067\u30d3\u30eb\u30c9\u3059\u308b\u3068\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\uff0e\u3053\u3061\u3089\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u3088\u3046\u306b\uff0cport.cc\u306e\u4e2d\u306esnprintf()\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3059\u308c\u3070\u30d3\u30eb\u30c9\u304c\u901a\u308a\u307e\u3059\uff0e\n\u3053\u3053\u3067\u306flibglog_static\u3067\u306f\u306a\u304flibglog\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3057\u305f\uff0e\n\n2.3 Gflags\ngflags\u306e\u672c\u7a3f\u57f7\u7b46\u6642\u306e\u6700\u65b0\u7248\u306f2.2.0\u3067\u3059\uff0e\n\u3000BUILD_SHARED_LIBS\n\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3066\u304b\u3089\uff0c\u666e\u901a\u306bcmake\u3057\u3066\u30d3\u30eb\u30c9\u3057\u307e\u3057\u305f\uff0e\n\n2.4 SuiteSpase\uff0cMetis\nWindows\u5bfe\u5fdcSuiteSpase + Metis\u306e\u672c\u7a3f\u57f7\u7b46\u6642\u306e\u6700\u65b0\u7248\u306f1.3.1\u3067\u3059\uff0e\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u3067cmake\u306f\u901a\u308a\u307e\u3059\u304c\uff0c\u30d3\u30eb\u30c9\u3059\u308b\u3068\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\uff0e\u3053\u306e\u539f\u56e0\u306fmetis/GKlib/gk_arch.h\u306e61\u884c\u76ee\u304b\u3089\u306e\n 61 #ifdef __MSC__\n 62 /* MSC does not have rint() function */\n 63 #define rint(x) ((int)((x)+0.5))\n 64\n 65 /* MSC does not have INFINITY defined */\n 66 #ifndef INFINITY\n 67 #define INFINITY FLT_MAX\n 68 #endif\n 69 #endif\n\n\u306e\u90e8\u5206\u3067\u3059\uff0eVisualStudio 2015\u3067\u306f\"does not have\"\u3067\u306f\u306a\u3044\u306e\u3067\uff0c\u524a\u9664\u3057\u3066\u3057\u307e\u3063\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\u304c\uff0c\u79c1\u306f\n 61 #if defined __MSC__ && _MSC_VER < 1900\n 62 /* MSC does not have rint() function */\n 63 #define rint(x) ((int)((x)+0.5))\n 64\n 65 /* MSC does not have INFINITY defined */\n 66 #ifndef INFINITY\n 67 #define INFINITY FLT_MAX\n 68 #endif\n 69 #endif\n\n\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3057\u305f\uff0e\n\n2.5 Ceres-Solver\nCeres-Solver\u306e\u672c\u7a3f\u57f7\u7b46\u6642\u306e\u6700\u65b0\u7248\u306f1.11.0\u3067\u3059\uff0e1.12.0\u306erc\u7248\u3082\u3042\u308b\u3088\u3046\u3067\u3059\u304c\uff0c\u3068\u308a\u3042\u3048\u305a1.11.0\u3092\u4f7f\u3046\u3053\u3068\u306b\u3057\u307e\u3059\uff0e\ncmake\u3059\u308b\u3068\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\u304c\uff0c\u3053\u3053\u304b\u3089\u8a2d\u5b9a\u3092\u59cb\u3081\u3066\u3044\u304d\u307e\u3059\uff0e\n\u3000EIGEN_INCLUDE_DIR\n\u3092\u8a2d\u5b9a\u3057\u3066Configure\u3059\u308b\u3068\uff0c\u3044\u304f\u3064\u304b\u65b0\u305f\u306a\u5909\u6570\u304c\u51fa\u3066\u304d\u307e\u3059\uff0e\n\u3000gflags_DIR\n\u3000GLOG_INCLUDE_DIR\n\u3000GLOG_LIBRARY\n\u3092\u8a2d\u5b9a\u3057\u307e\u3059\uff0e\u306a\u304a\uff0cGLOG_INCLUDE_DIR\u306f\"glog-0.3.4/src/\"\u3067\u306f\u306a\u304f\"glog-0.3.4/src/windows/\"\u306a\u306e\u3067\u6ce8\u610f\u3057\u307e\u3057\u3087\u3046\uff0e\u7d9a\u3044\u3066\uff0c\n\u3000CXSPARSE\n\u3000LAPACK\n\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3066\uff0c\n\u3000CXSPARSE_INCLUDE_DIR\n\u3000CXSPARSE_LIBRARY\n\u3000BLAS_blas_LIBRARY\n\u3000LAPACK_lapack_LIBRARY\n\u306bsuitesparse-metis-for-windows\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u6307\u5b9a\u3057\u307e\u3059\uff0e\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8a2d\u5b9a\u306b\u30df\u30b9\u308b\u3068\uff0cConfigure\u3057\u305f\u5f8c\u3067\u30c1\u30a7\u30c3\u30af\u304c\u5916\u3055\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u8981\u6ce8\u610f\u3067\u3059\uff0e\u3053\u3053\u307e\u3067\u3067\u304d\u305f\u3089\uff0c\n\u3000SUITESPARSE\n\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3066Configure\u3057\u307e\u3059\uff0e\u307e\u305f\u5927\u91cf\u306b\u5909\u6570\u304c\u5897\u3048\u307e\u3059\u304c\uff0c\n\u3000METIS_LIBRARY\n\u3000UFCONFIG_INCLUDE_DIR\n\u3000AMD_INCLUDE_DIR\n\u3000AMD_LIBRARY\n\u3000CAMD_INCLUDE_DIR\n\u3000CAMD_LIBRARY\n\u3000CCOLAMD_INCLUDE_DIR\n\u3000CCOLAMD_LIBRARY\n\u3000CHOLMOD_INCLUDE_DIR\n\u3000CHOLMOD_LIBRARY\n\u3000COLAMD_INCLUDE_DIR\n\u3000COLAMD_LIBRARY\n\u3000SUITESPARSE_CONFIG_INCLUDE_DIR\n\u3000SUITESPARSE_CONFIG_LIBRARY\n\u3000SUITESPARSEQR_INCLUDE_DIR\n\u3000SUITESPARSEQR_LIBRARY\n\u3092\u5168\u3066suitesparse-metis-for-windows\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u6307\u5b9a\u3057\u307e\u3059\uff0e\n\u3053\u3053\u307e\u3067\u3067\u304d\u308c\u3070\uff0c\u3042\u3068\u306fGenerate\u3057\u3066\u30d3\u30eb\u30c9\u3067\u304d\u308b\u306f\u305a\u3067\u3059\uff0e\n\n2.6 VTK\nVTK\u306fviz\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u306f\u5fc5\u9808\uff08\u3068\u3044\u3046\u3088\u308a\u306f\uff0cviz\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u5b9f\u8cea\u7684\u306bVTK\u306ewrapper\u6a5f\u80fd\u3067\u3042\u308b\uff0c\u3068\u3044\u3046\u3079\u304d\u304b\u3082\u3057\u308c\u306a\u3044\uff09\u3067\u3059\u304c\uff0c\u5f53\u7136\uff0csfm\u306bVTK\u304c\u5fc5\u8981\u3068\u3044\u3046\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\uff0e\u3057\u304b\u3057\uff0cOpenCV\u306b\u542b\u307e\u308c\u308b\u300csfm\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u300d\u306e\u30d3\u30eb\u30c9\u306b\u306fviz\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u5fc5\u9808\u306a\u306e\u3067\uff0c\u4eca\u56de\u306fVTK\u3082\u5fc5\u9808\u3067\u3059\uff0e\nVTK\u306eweb site\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3068\uff0c\u3069\u3046\u3082\u672c\u7a3f\u3092\u57f7\u7b46\u3059\u308b\u76f4\u524d\u306e11/25\u306bVTK-7.1.0\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u3088\u3046\u3067\u3059\uff0e\u3053\u3053\u306f\u30d2\u30c8\u30d0\u30b7\u30e9\u30fc\u3068\u3057\u3066\uff0c\u3055\u3063\u305d\u304fVTK-7.1.0\u3092cmake\uff0c\u30d3\u30eb\u30c9\uff0c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u4f7f\u3044\u307e\u3057\u3087\u3046\uff0e\n\u3082\u3061\u308d\u3093VTK-7.0.0\u3084\uff0cVTK-6.3.0\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\uff0e\u3069\u308c\u3082\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u306e\u307e\u307e\u3067\u666e\u901a\u306b\u30d3\u30eb\u30c9\u304c\u901a\u308b\u306f\u305a\u3067\u3059\uff0e\n\u306a\u304a\uff0c\u3053\u3061\u3089\u306e\u30da\u30fc\u30b8\u3067\u306f\u300c\u73fe\u72b6\u30017.0.0\u3067\u306fOpenCV\u306e\u30d3\u30eb\u30c9\u304c\u4e0a\u624b\u304f\u3044\u304b\u306a\u3044\u300d\u3068\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u304c\uff0c\u5f8c\u8ff0\u306e\u3088\u3046\u306bOpenCV\u5074\u306e\u3061\u3087\u3063\u3068\u3057\u305f\u4fee\u6b63\u3067\u5bfe\u5fdc\u3067\u304d\u307e\u3059\uff0e\n\n3. OpenCV\u306e\u30d3\u30eb\u30c9\n\u672c\u4e38\u306eOpenCV\u3067\u3059\u304c\uff0c\u3068\u308a\u3042\u3048\u305aopencv-3.1.0\u3068opencv_contrib-3.1.0\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\uff0c\u5c55\u958b\u3057\u3066\u304b\u3089\uff0c\u4ee5\u964d\u306e\u4f5c\u696d\u306b\u9032\u307f\u307e\u3057\u3087\u3046\uff0e\n\n3.1 viz\u30e2\u30b8\u30e5\u30fc\u30eb\u8a2d\u5b9a\n\u307e\u305acmake\u3067opencv-3.1.0\u3092\u8aad\u307f\u8fbc\u3093\u3067\u304b\u3089Configure\u3059\u308b\u3068\uff0c\u6bce\u5ea6\u304a\u306a\u3058\u307f\u306e\uff0c\u8a2d\u5b9a\u5909\u6570\u304c\u3044\u308d\u3044\u308d\u8868\u793a\u3055\u308c\u305f\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\uff0e\u305d\u3053\u3067OPENCV_EXTRA_MODULES_PATH\u306bopencv_contrib-3.1.0/modules/\u3092\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046\uff0e\n\n\u518d\u5ea6Configure\u3059\u308b\u3068\uff0ccontrib\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30d3\u30eb\u30c9\u5bfe\u8c61\u306b\u8ffd\u52a0\u3055\u308c\u307e\u3059\uff0e\u3057\u304b\u3057\uff0cviz\u3082sfm\u3082\u201dUnavailable\u201d\u3068\u306a\u308a\u307e\u3059\uff0e\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u5f53\u7136\u3067\u3059\u306d\uff0e\n\n\u3067\u306f\uff0cVTK\u306e\u30d1\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046\uff0e\u30d3\u30eb\u30c9\u5f8c\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u307e\u3067\u3084\u3063\u305f\u5834\u5408\u306f\uff0c\u4ee5\u4e0b\u306e\u3088\u3046\u306b\uff0cVTK_DIR\u306b\"<\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148>/lib/cmake/vtk-7.1/\"\u3092\u6307\u5b9a\u3057\u307e\u3059\uff0e\u3042\u308b\u3044\u306f\u30d3\u30eb\u30c9\u3057\u305f\u30d5\u30a9\u30eb\u30c0\u3092\u6307\u5b9a\u3057\u3066\u3082\u826f\u304b\u3063\u305f\u3088\u3046\u306a\u8a18\u61b6\u3082\u8584\u3063\u3059\u3089\u3068\u3042\u308a\u307e\u3059\uff0e\n\n\u3055\u3066\uff0c\u3053\u306e\u72b6\u614b\u3067Configure\u3092\u3059\u308b\u3068\uff0c\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\uff0e\n\n\u304a\u305d\u3089\u304f\uff0c\u300cVTK-7\u3060\u3068\u30d3\u30eb\u30c9\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u300d\u3068\u3044\u3046\u98a8\u8aac\u306f\u3053\u308c\u3092\u6307\u3057\u3066\u3044\u308b\u304b\u3068\u601d\u3044\u307e\u3059\uff0e\n\u30a8\u30e9\u30fc\u306f\u300cvtkRenderingOpenGL\u304c\u3042\u3089\u3078\u3093\u3067\u300d\u3068\u8a00\u3063\u3066\u307e\u3059\u304c\uff0c\u305f\u3057\u304b\u306b\u5b58\u5728\u3057\u307e\u305b\u3093\uff0eVTK-7\u304b\u3089vtkRenderingOpenGL2\u3068\u3044\u3046\u65b0\u30e2\u30b8\u30e5\u30fc\u30eb\u3078\u79fb\u884c\u3057\u305f\u306e\u304c\u539f\u56e0\u3067\u3059\uff0eVTK\u306e\u30d3\u30eb\u30c9\u6642\u306bOpenGL2\u3067\u306f\u306a\u304fOpenGL\u3092\u4f7f\u3046\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u304c\uff0c\u305d\u3046\u3044\u3046\u5f8c\u308d\u5411\u304d\u306e\u89e3\u6c7a\u65b9\u6cd5\u3067\u306f\u306a\u304f\uff0c\u3061\u3083\u3093\u3068OpenGL2\u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\uff0e\n\u3053\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u306b\u306f opencv-3.1.0/cmake/OpenCVDetectVTK.cmake \u3092\u4fee\u6b63\u3057\u307e\u3059\uff0e\u5192\u982d\u90e8\u5206\u3067\n\n\u4fee\u6b63\u524d\n# VTK 6.x components\nfind_package(VTK QUIET COMPONENTS vtkRenderingOpenGL vtkInteractionStyle vtkRenderingLOD vtkIOPLY vtkFiltersTexture vtkRenderingFreeType vtkIOExport NO_MODULE)\n\n\n\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u304c\uff0c\u79c1\u306f\n\n\u4fee\u6b63\u5f8c\n# VTK 6.x/7.x components\nfind_package(VTK QUIET COMPONENTS vtkInteractionStyle NO_MODULE)\nif(\"${VTK_RENDERING_BACKEND}\" STREQUAL \"OpenGL2\")\n  find_package(VTK QUIET COMPONENTS vtkRenderingOpenGL2 vtkInteractionStyle vtkRenderingLOD vtkIOGeometry vtkIOPLY vtkFiltersTexture vtkRenderingFreeType vtkIOExport NO_MODULE)\nelse()\n  find_package(VTK QUIET COMPONENTS vtkRenderingOpenGL vtkInteractionStyle vtkRenderingLOD vtkIOGeometry vtkIOPLY vtkFiltersTexture vtkRenderingFreeType vtkIOExport NO_MODULE)\nendif()\n\n\n\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3057\u305f\uff0e\n\u5143\u306fvtkRenderingOpenGL\u306a\u3069\u306e\u6709\u7121\u3067VTK\u306e\u6709\u7121\u3092\u5224\u5b9a\u3057\u3066\u3044\u307e\u3057\u305f\u304c\uff0c\u4fee\u6b63\u5f8c\u306f\u300c\u307e\u305a\u306fvtk-6,7\u306b\u5171\u901a\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3067VTK\u81ea\u4f53\u306e\u5b58\u5728\u3092\u78ba\u8a8d\u300d\u2192\u300c\u5b58\u5728\u3057\u305f\u5834\u5408\u306b\u306f\uff0cOpenGL\u304bOpenGL2\u304b\u3092\u78ba\u8a8d\u300d\u2192\u300c\u5834\u5408\u5206\u3051\u3092\u3057\u3066\uff0c\u5fc5\u8981\u306a\u5168\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u6709\u7121\u3092\u30c1\u30a7\u30c3\u30af\u300d\u3068\u3044\u3046\u51e6\u7406\u306b\u306a\u3063\u3066\u3044\u307e\u3059\uff0e\n\u3069\u3046\u3082VTK-7.0\u30687.1\u3067\u5fae\u5999\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4ed5\u69d8\u304c\u5909\u308f\u3063\u305f\u3088\u3046\u3067\uff0c7.0\u3067\u52d5\u3044\u3066\u3044\u305f\u8a2d\u5b9a\u3067\u306f7.1\u306f\u30c0\u30e1\u3060\u3063\u305f\u306e\u3067\u3059\u304c\uff0c\u3068\u306b\u304b\u304f\u4e0a\u8a18\u306e\u4fee\u6b63\u3092\u3059\u308c\u30706.3\u30827.0\u30827.1\u3082\u3044\u3051\u308b\u306f\u305a\u3067\u3059\uff0e\n\u3055\u3066\uff0c\u3053\u306e\u4fee\u6b63\u3092\u3057\u3066\u304b\u3089VTK_DIR\u3092\u8a2d\u5b9a\u3057\u3066Configure\u3059\u308c\u3070\uff0cVTK\u3082\u8a8d\u8b58\u3055\u308c\uff0c\u3081\u3067\u305f\u304fviz\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30d3\u30eb\u30c9\u5bfe\u8c61\u306b\u5165\u308a\u307e\u3059\uff0e\n\n\n3.2 sfm\u30e2\u30b8\u30e5\u30fc\u30eb\u8a2d\u5b9a\n\u6b21\u306b\uff0csfm\u306b\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u304d\u307e\u3059\uff0e\n\u3000EIGEN_INCLUDE_PATH\n\u3000WITH_EIGEN\n\u3000GLOG_Libs\n\u3000Ceres_DIR\n\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u3067\u3059\uff0e\u3053\u308c\u3089\u3092\u8a2d\u5b9a\u3057\u3066Configure\u3059\u308b\u3068\uff0c\n\n\u3053\u306e\u3088\u3046\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u691c\u51fa\u3055\u308c\u307e\u3059\uff0e\u3053\u308c\u3067sfm\u304c\u30d3\u30eb\u30c9\u5bfe\u8c61\u306b\u5165\u308b\u308f\u3051\u3067\u3059\uff0esfm\u304cenable\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\uff0e\n\n\u3093\uff1f\u3042\uff0c\u3042\u308c\u3063\uff1f\n\"Module opencv_sfm disabled\" \u2026\u3060\u3068\uff1f\uff01(\uff9f\u0434\uff9flll)\uff76\uff9e\uff70\uff9d\n\u3000\n\u3000\n\u2026\u3053\u306e\u8b0e\u306b\u5bfe\u5fdc\u3057\u3088\u3046\u3068\u53f3\u5f80\u5de6\u5f80\u3057\u3066\u30cd\u30bf\u3092\u5f15\u3063\u5f35\u308d\u3046\u304b\u3068\u3082\u601d\u3044\u307e\u3057\u305f\u304c\uff0c\u7d50\u8ad6\u304b\u3089\u8a00\u3046\u3068\uff0c\u3044\u304f\u3089cmake\u4e0a\u3067\u8a2d\u5b9a\u3092\u3044\u3058\u3063\u3066\u3082\uff0c\u3053\u3053\u3067opencv_sfm\u3092enable\u3059\u308b\u3053\u3068\u306f\u7d76\u5bfe\u306b\u3067\u304d\u307e\u305b\u3093\uff0e\u306a\u305c\u304b\u3068\u3044\u3046\u3068\uff0copencv_contrib-3.1.0/modules/sfm/CMakeLists.txt\u306b\u539f\u56e0\u304c\u3042\u308b\u304b\u3089\u3067\u3059\uff0e16\u884c\u76ee\u4ee5\u964d\u3092\u78ba\u8a8d\u3059\u308b\u3068\n 16 if(NOT DEFINED SFM_DEPS_OK)\n 17\n 18   set(_fname \"${CMAKE_CURRENT_BINARY_DIR}/test_sfm_deps.cpp\")\n 19   file(WRITE \"${_fname}\" \"#include <glog/logging.h>\\n#include <gflags/gflags.h>\\nint main() { (void)(0); return 0; }\\n\")\n 20   try_compile(SFM_DEPS_OK \"${CMAKE_CURRENT_BINARY_DIR}\" \"${_fname}\"\n 21       CMAKE_FLAGS \"-DINCLUDE_DIRECTORIES:STRING=${GLOG_INCLUDE_DIRS};${GFLAGS_INCLUDE_DIRS}\"\n 22       LINK_LIBRARIES ${GLOG_LIBRARIES} ${GFLAGS_LIBRARIES}\n 23       OUTPUT_VARIABLE OUTPUT\n 24   )\n 25   file(REMOVE \"${_fname}\")\n 26   message(STATUS \"Checking SFM deps... ${SFM_DEPS_OK}\")\n 27 endif()\n 28\n\n\u3068\u3044\u3046\u30b3\u30fc\u30c9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\uff0e\u3053\u306e16\u884c\u76ee\u306e\"NOT DEFINED\"\u3068\u3044\u3046\u6761\u4ef6\u5206\u5c90\u304c\u66f2\u8005\u3067\uff0c\u8981\u306f\uff0c\u4e00\u56de\u3067\u3082Configure\u3057\u3066\u3057\u307e\u3046\u3068SFM_DEPS_OK\u306b\u306fTRUE\u304bFALSE\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u305f\u3081\uff0c\u305d\u306e\u5f8c\u306f\u4f55\u5ea6cmake\u3092\u8d70\u3089\u305b\u3066\u3082\u4e8c\u5ea6\u3068\u5909\u66f4\u3055\u308c\u307e\u305b\u3093\uff0e\n\u305d\u3057\u3066\uff0cWindows\u74b0\u5883\u3067\u306f\u6700\u521d\u306b\u4e00\u5ea6Configure\u3057\u306a\u3044\u3068GUI\u306b\u5909\u6570\u304c\u8868\u793a\u3055\u308c\u306a\u3044\u306e\u3067\uff0c\u7d50\u679c\u7684\u306b\u5fc5\u305adisable\u3055\u308c\u308b\u308f\u3051\u3067\u3059\uff0e\u6700\u521d\u3053\u308c\u3092\u898b\u305f\u3068\u304d\u306b\u306f\u6bba\u610f\u3092\uff08ry\n\u6c17\u3092\u53d6\u308a\u76f4\u3057\u3066\uff0c16\u884c\u76ee\u3092\n 16 if(NOT DEFINED SFM_DEPS_OK OR NOT SFM_DEPS_OK)\n\n\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\uff0e\n\u3068\u3044\u3046\u3053\u3068\u3067\uff0c\u3053\u306e\u843d\u3068\u3057\u7a74\u304c\u672c\u65e5\u306e\u30cd\u30bf\u3067\u3057\u305f\uff0e\u3053\u306e\u4fee\u6b63\u5f8c\u3082\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u5834\u5408\u306f\uff0c\u3055\u3089\u306b\u65b0\u305f\u306a\u5909\u6570\u3068\u3057\u3066\nGFLAGS_INCLUDE_DIRS\nGFLAGS_LIBRARIES\n\u3092\"Add Entry\"\u30dc\u30bf\u30f3\u304b\u3089\u8ffd\u52a0\u3057\u3066\uff0c\u305d\u308c\u305e\u308c\uff0c\"<gflags\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148>/include/\"\u3068\uff0c\"<gflags\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148>/lib/gflags.lib\"\u3092\u8a2d\u5b9a\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff0e\n\u305d\u306e\u4ed6\u306e\u4fee\u6b63\u70b9\u3092\u4ee5\u4e0b\u306b\u5217\u6319\u3057\u307e\u3059\uff0e\nopencv_contrib-3.1.0/modules/sfm/CMakeLists.txt\n\n\u4fee\u6b63\u524d\n 59 if(Ceres_FOUND)\n 60   add_definitions(\"-DCERES_FOUND=1\")\n 61   list(APPEND LIBMV_LIGHT_LIBS simple_pipeline)\n 62 else()\n\n\n\n\u4fee\u6b63\u5f8c\n 59 if(Ceres_FOUND)\n 60   add_definitions(\"-DCERES_FOUND=1\")\n 61   list(APPEND LIBMV_LIGHT_LIBS simple_pipeline)\n 62   list(APPEND LIBMV_LIGHT_INCLUDES ${CERES_INCLUDE_DIRS})\n 63 else()\n\n\n\n\u4fee\u6b63\u524d\n130 if(Ceres_FOUND)\n131   ocv_add_samples(opencv_viz)\n132 endif ()\n\n\n\n\u4fee\u6b63\u5f8c\n131 if(Ceres_FOUND AND BUILD_opencv_viz)\n132   ocv_add_module(viz)\n133   ocv_add_samples(opencv_sfm)\n134 endif ()\n\n\nopencv_contrib-3.1.0/modules/sfm/src/libmv_light/libmv/multiview/CMakeLists.txt\n\n\u4fee\u6b63\u524d\n 20 TARGET_LINK_LIBRARIES(multiview glog numeric)\n\n\n\n\u4fee\u6b63\u5f8c\n 20 TARGET_LINK_LIBRARIES(multiview ${GLOG_LIBRARIES} numeric)\n\n\n\n3.3 \u30d3\u30eb\u30c9\n\u79c1\u306e\u4eca\u56de\u306e\u74b0\u5883\u3067\u306fBUILD_opencv_hdf\u3068BUILD_opencv_bioinspired\u306b\u3082\u81ea\u52d5\u3067\u30c1\u30a7\u30c3\u30af\u304c\u5165\u3063\u3066\u3044\u305f\u306e\u3067\u3059\u304c\uff0c\u3053\u306e\uff12\u3064\u304c\u30d3\u30eb\u30c9\u6642\u306b\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3057\u305f\uff0e\uff08\u4ee5\u524d\u306b\u30d3\u30eb\u30c9\u3057\u305f\u969b\u306fbioinspired\u306f\u30d3\u30eb\u30c9\u3067\u304d\u3066\u3044\u305f\u306f\u305a\u306a\u306e\u3067\uff0c\u4f55\u304b\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u4f9d\u5b58\u306e\u554f\u984c\u306a\u3069\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff0e\uff09\u3069\u3061\u3089\u3082\u4eca\u56de\u306e\u76ee\u7684\u3068\u306f\u95a2\u4fc2\u306a\u3044\u306e\u3067\uff0c\u3053\u3053\u3067\u306f\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3057\u3066\u30d3\u30eb\u30c9\u3057\u307e\u3057\u305f\uff0e\n\n4. \u307e\u3068\u3081\n\u3068\u3044\u3046\u3053\u3068\u3067\uff0c\u4eca\u65e5\u306fopencv_sfm\u3092VisualStudio 2015\u3092\u4f7f\u3063\u3066\u30d3\u30eb\u30c9\u3057\u307e\u3057\u305f\uff0e\u660e\u3089\u304b\u306bVisualStudio\u306f\u60f3\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u96f0\u56f2\u6c17\u3067\u3059\u304c\uff0c\u305d\u308c\u3067\u3082\uff0c\u305d\u308c\u306a\u308a\u306b\u624b\u9593\u3092\u304b\u3051\u308b\u3053\u3068\u3067\u30d3\u30eb\u30c9\u3067\u304d\u308b\u3068\u3044\u3046\u3053\u3068\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\uff0e\n\n\u660e\u65e5\u306f\uff0cOpenCV\u306b\u4ed8\u5c5e\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u4f7f\u3063\u3066SfM\u306e\u52d5\u4f5c\u78ba\u8a8d\u3092\u3057\u307e\u3059\uff0e\n\u3000\n\u3053\u308c\u306f\u3001OpenCV Advent Calendar 2016 16\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\u95a2\u9023\u8a18\u4e8b\u306f[\u76ee\u6b21](http://qiita.com/advent-calendar/2016/opencv)\u306b\u307e\u3068\u3081\u3089\u308c\u3066\u3044\u307e\u3059\u3002\n\n---\n\n1. \u306f\u3058\u3081\u306b\n===\n\n\u7686\u3055\u3093\u3054\u5b58\u77e5\u306e\u3088\u3046\u306b\uff0cOpenCV-3.1\u3067(contrib\u306b)sfm\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u5165\u308a\u307e\u3057\u305f\uff0e\u7686\u3055\u3093\u4f7f\u3063\u3066\u3044\u307e\u3059\u304b\uff1f\u3082\u3061\u308d\u3093\u50d5\u306f\u6bce\u65e5\u30d0\u30ea\u30d0\u30ea\u4f7f\u3063\u3066\u2026\u307e\u305b\u3093\uff0e\u30d3\u30eb\u30c9\u3057\u3066\u30b5\u30f3\u30d7\u30eb\u3092\u8a66\u3057\u305f\u3060\u3051\u3067\uff0c\u5b9f\u7528\u3068\u3057\u3066\u4f7f\u3063\u305f\u3053\u3068\u306f\u4e00\u5ea6\u3082\u3042\u308a\u307e\u305b\u3093\uff0e\u3057\u304b\u3057\uff0c[\u305d\u3053\u306b\u30b3\u30fc\u30c9\u304c\u3042\u308b\u9650\u308a\uff0c\u5b8c\u5168\u4f53\u3092\u76ee\u6307\u3057\u3066\u30d3\u30eb\u30c9\u3059\u308b](http://qiita.com/fukushima1981/items/fae7d40123bfdf426624)\u306e\u306f\u4eba\u306e\u6027\u3068\u3044\u3046\u3082\u306e\u3067\u3057\u3087\u3046\uff0e\n\n\u3068\u3044\u3046\u3053\u3068\u3067\uff0csfm\u30e2\u30b8\u30e5\u30fc\u30eb\u5165\u308a\u306eOpenCV\u30d3\u30eb\u30c9\u3068\u30b5\u30f3\u30d7\u30eb\u5b9f\u884c\u306b\u3064\u3044\u3066\uff0c\u5b9f\u969b\u306b\u8a66\u3057\u305f\u4eba\u3057\u304b\u77e5\u3089\u306a\u3044\u843d\u3068\u3057\u7a74\u3092\u524d\u7de8\u30fb\u5f8c\u7de8\u306b\u5206\u3051\u3066\u7d39\u4ecb\u3057\u307e\u3059\uff0e\n\n\u672c\u65e5\u306fVisualStudio 2015\u3067sfm\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\uff0e\u4ee5\u4e0b\u3067\u306f64bit\u3067Release\u30d3\u30eb\u30c9\u3092\u3057\u3066\u3044\u307e\u3059\uff0e\ncygwin\u3067\u30d3\u30eb\u30c9\u3057\u305f\u3044\u4eba\u306f\uff0c[\u3053\u3061\u3089](http://hvrl.ics.keio.ac.jp/kimura/opencv/opencv-3.1.0.html.ja)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\uff0e\nLinux\u3067\u30d3\u30eb\u30c9\u3057\u305f\u3044\u4eba\u306f\uff0c\u4ee5\u4e0b\u3067\u5fc5\u8981\u306a\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u5168\u3066apt-get\u3067\u304d\u305f\u306f\u305a\u306a\u306e\u3067\uff0c\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306b3\u7ae0\u306eOpenCV\u306e\u30d3\u30eb\u30c9\u8a2d\u5b9a\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\uff0e\n\u305d\u306e\u4ed6\u306e\u74b0\u5883(macOS\u3068\u304bAndroid\u3068\u304b)\u306b\u3064\u3044\u3066\u306f\u5168\u304f\u77e5\u3089\u306a\u3044\u306e\u3067\u3054\u3081\u3093\u306a\u3055\u3044\uff0e\n\n\u306a\u304a\uff0c\u8efd\u304f\u691c\u7d22\u3057\u305f\u3060\u3051\u3067\uff0c[\u85e4\u672c\u3055\u3093\u304clibmv\uff08\u2190opencv_sfm\u3078\u79fb\u690d\u3055\u308c\u308b\u524d\u306e\u5143\u30b3\u30fc\u30c9\uff09\u3092\u30d3\u30eb\u30c9](http://qiita.com/SatoshiRobatoFujimoto/items/c87b14cd20cda3c97306)\u3057\u3066\u3044\u305f\u308a\uff0c\u305d\u308c\u3092\u53c2\u8003\u306b\u3057\u3066[opencv_sfm\u3092libmv\u3078\u4e0a\u66f8\u304d\u3057\u3066\u30d3\u30eb\u30c9\u3057\u3066\u3044\u308b\u65b9](https://blog.negativemind.com/2016/05/27/build-opencv-3-1-with-contrib-module-on-win-10-pro-visual-studio-2015/)\u306a\u3069\u304c\u898b\u53d7\u3051\u3089\u308c\u307e\u3059\u304c\uff0c\u3053\u3053\u3067\u306fOpenCV\u306e~~\u7d20\u6750\u672c\u6765\u306e\u5473\u3092\u751f\u304b\u3057\u305f~~\u672c\u6765\u306e\u30d3\u30eb\u30c9\u30b7\u30b9\u30c6\u30e0\u306e\u4e2d\u3067\u30d3\u30eb\u30c9\u3057\u307e\u3059\uff0e\n\n\u307e\u305f\uff0c\u4ee5\u4e0b\u3067\u306f\u5404\u7a2e\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u3064\u3044\u3066github\u3067\u306emaster\u30b3\u30fc\u30c9\u306f\u4f7f\u308f\u305a\uff0c\u30d0\u30fc\u30b8\u30e7\u30f3\u30ca\u30f3\u30d0\u30fc\u304c\u3042\u308b\uff08\uff1d\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\uff09\u30b3\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u304c\uff0c\u30b3\u30fc\u30c9\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u56fa\u5b9a\u3057\u3066\u7d39\u4ecb\u3057\u305f\u3060\u3051\u306e\u7406\u7531\u3067\u3059\u306e\u3067\uff0cmaster\u3067\u3082\u57fa\u672c\u7684\u306b\u540c\u69d8\u306e\u624b\u9806\u3067\u3044\u3051\u308b\u3068\u306f\u601d\u3044\u307e\u3059\uff0e\n\n\u305d\u308c\u3068\uff0c\u4ee5\u4e0b\u306e\u8aac\u660e\u3067\u306fcmake\u3067\u3044\u308d\u3044\u308d\u306a\u5909\u6570\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u304c\uff0cWindows\u306ecmake\u3067\u306f\uff0c\u4f55\u304b\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u3066\u304b\u3089Configure\u3059\u308b\u3068\u65b0\u3057\u3044\u5909\u6570\u304c\u51fa\u3066\u304d\u305f\u308a\u3059\u308b\u306e\u3067\uff0c\u5fc5\u8981\u306b\u5fdc\u3058\u3066Configure\u3092\u7e54\u308a\u4ea4\u305c\u306a\u304c\u3089\u8a66\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff0e\n\n\n2. \u524d\u6e96\u5099\n===\n\n\u307e\u305a\uff0copencv_sfm\u306e\u30d3\u30eb\u30c9\u306b\u5fc5\u8981\u306a\u5177\u6750\u3092\u9806\u756a\u306b\u30d3\u30eb\u30c9\u3057\u3066\u3044\u304d\u307e\u3059\uff0e\n\n\n2.1 Eigen\n---\n[eigen](http://eigen.tuxfamily.org/) \u306e\u672c\u7a3f\u57f7\u7b46\u6642\u306e\u6700\u65b0\u7248\u306f[3.3.0](http://bitbucket.org/eigen/eigen/get/3.3.0.zip)\u3067\u3059\uff0e\n\u6700\u521d\u306b3.3.0\u3092\u4f7f\u3063\u3066\u4f5c\u696d\u3057\u305f\u969b\u306b\u306f\uff0c\u6700\u5f8c\u306eOpenCV\u306e\u30d3\u30eb\u30c9\u306e\u969b\u306b\u610f\u5473\u4e0d\u660e\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u3066\uff0c\u4e8c\u6669\u30cf\u30de\u3063\u3066\u304b\u3089\u632b\u6298\u3057\u307e\u3057\u305f\uff0e\u672c\u7a3f\u3092\u66f8\u304d\u7d42\u3048\u305f\u5f8c\u3067\u5ff5\u306e\u305f\u3081\u78ba\u8a8d\u3057\u305f\u3089\uff0c\u4eca\u5ea6\u306f\u3059\u3093\u306a\u308a\u30d3\u30eb\u30c9\u304c\u901a\u308a\u307e\u3057\u305f\uff0e\u306a\u306e\u3067\uff0c3.3.0\u3067\u3082\u826f\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\uff0c[3.2.10](http://bitbucket.org/eigen/eigen/get/3.2.10.zip)\u3092\u4f7f\u3063\u305f\u65b9\u304c\u5b89\u5168\u3060\u3068\u601d\u3044\u307e\u3059\uff0e\n\u3044\u305a\u308c\u306b\u305b\u3088Eigen\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306f\u666e\u901a\u306bcmake\uff0c\u30d3\u30eb\u30c9\uff0c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067OK\u306a\u306f\u305a\u3067\u3059\uff0e\n\n\n2.2 Glog\n---\n[glog](https://github.com/google/glog/)\u306e\u672c\u7a3f\u57f7\u7b46\u6642\u306e\u6700\u65b0\u7248\u306f[0.3.4](tree/https://github.com/google/glog/v0.3.4)\u3067\u3059\uff0e\n\u914d\u5e03\u7269\u306bgoogle-glog.sln\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067\uff0c\u305d\u308c\u3092\u4f7f\u3044\u307e\u3059\uff0eVisualStudio\u3067\u958b\u3051\u3070\u308f\u304b\u308a\u307e\u3059\u304c\uff0c\u3053\u308c\u306f32bit\u30d3\u30eb\u30c9\u7528\u306a\u306e\u3067\uff0c\u69cb\u6210\u30de\u30cd\u30fc\u30b8\u30e3\u306764bit\u30d3\u30eb\u30c9\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5909\u63db\u3057\u307e\u3059\uff0e\n\n\u307e\u305f\uff0c\u914d\u5e03\u3055\u308c\u3066\u3044\u308b\u30b3\u30fc\u30c9\u3092\u305d\u306e\u307e\u307eVisualStudio2015\u3067\u30d3\u30eb\u30c9\u3059\u308b\u3068\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\uff0e[\u3053\u3061\u3089](https://github.com/google/glog/issues/41)\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u3088\u3046\u306b\uff0cport.cc\u306e\u4e2d\u306esnprintf()\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3059\u308c\u3070\u30d3\u30eb\u30c9\u304c\u901a\u308a\u307e\u3059\uff0e\n\n\u3053\u3053\u3067\u306flibglog_static\u3067\u306f\u306a\u304flibglog\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3057\u305f\uff0e\n\n\n2.3 Gflags\n---\n[gflags](https://github.com/gflags/gflags/)\u306e\u672c\u7a3f\u57f7\u7b46\u6642\u306e\u6700\u65b0\u7248\u306f[2.2.0](https://github.com/gflags/gflags/tree/v2.2.0)\u3067\u3059\uff0e\n\n\u3000BUILD_SHARED_LIBS\n\n\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3066\u304b\u3089\uff0c\u666e\u901a\u306bcmake\u3057\u3066\u30d3\u30eb\u30c9\u3057\u307e\u3057\u305f\uff0e\n\n\n2.4 SuiteSpase\uff0cMetis\n---\n[Windows\u5bfe\u5fdcSuiteSpase + Metis](https://github.com/jlblancoc/suitesparse-metis-for-windows)\u306e\u672c\u7a3f\u57f7\u7b46\u6642\u306e\u6700\u65b0\u7248\u306f[1.3.1](https://github.com/jlblancoc/suitesparse-metis-for-windows/tree/v1.3.1)\u3067\u3059\uff0e\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u3067cmake\u306f\u901a\u308a\u307e\u3059\u304c\uff0c\u30d3\u30eb\u30c9\u3059\u308b\u3068\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\uff0e\u3053\u306e\u539f\u56e0\u306fmetis/GKlib/gk_arch.h\u306e61\u884c\u76ee\u304b\u3089\u306e\n\n```cpp\n 61 #ifdef __MSC__\n 62 /* MSC does not have rint() function */\n 63 #define rint(x) ((int)((x)+0.5))\n 64\n 65 /* MSC does not have INFINITY defined */\n 66 #ifndef INFINITY\n 67 #define INFINITY FLT_MAX\n 68 #endif\n 69 #endif\n```\n\n\u306e\u90e8\u5206\u3067\u3059\uff0eVisualStudio 2015\u3067\u306f\"does not have\"\u3067\u306f\u306a\u3044\u306e\u3067\uff0c\u524a\u9664\u3057\u3066\u3057\u307e\u3063\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\u304c\uff0c\u79c1\u306f\n\n```cpp\n 61 #if defined __MSC__ && _MSC_VER < 1900\n 62 /* MSC does not have rint() function */\n 63 #define rint(x) ((int)((x)+0.5))\n 64\n 65 /* MSC does not have INFINITY defined */\n 66 #ifndef INFINITY\n 67 #define INFINITY FLT_MAX\n 68 #endif\n 69 #endif\n```\n\n\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3057\u305f\uff0e\n\n\n2.5 Ceres-Solver\n---\n[Ceres-Solver](https://github.com/ceres-solver/ceres-solver)\u306e\u672c\u7a3f\u57f7\u7b46\u6642\u306e\u6700\u65b0\u7248\u306f[1.11.0](https://github.com/ceres-solver/ceres-solver/tree/1.11.0)\u3067\u3059\uff0e1.12.0\u306erc\u7248\u3082\u3042\u308b\u3088\u3046\u3067\u3059\u304c\uff0c\u3068\u308a\u3042\u3048\u305a1.11.0\u3092\u4f7f\u3046\u3053\u3068\u306b\u3057\u307e\u3059\uff0e\n\ncmake\u3059\u308b\u3068\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\u304c\uff0c\u3053\u3053\u304b\u3089\u8a2d\u5b9a\u3092\u59cb\u3081\u3066\u3044\u304d\u307e\u3059\uff0e\n\n\u3000EIGEN_INCLUDE_DIR\n\n\u3092\u8a2d\u5b9a\u3057\u3066Configure\u3059\u308b\u3068\uff0c\u3044\u304f\u3064\u304b\u65b0\u305f\u306a\u5909\u6570\u304c\u51fa\u3066\u304d\u307e\u3059\uff0e\n\n\u3000gflags_DIR\n\u3000GLOG_INCLUDE_DIR\n\u3000GLOG_LIBRARY\n\n\u3092\u8a2d\u5b9a\u3057\u307e\u3059\uff0e\u306a\u304a\uff0cGLOG_INCLUDE_DIR\u306f\"glog-0.3.4/src/\"\u3067\u306f\u306a\u304f\"glog-0.3.4/src/windows/\"\u306a\u306e\u3067\u6ce8\u610f\u3057\u307e\u3057\u3087\u3046\uff0e\u7d9a\u3044\u3066\uff0c\n\n\u3000CXSPARSE\n\u3000LAPACK\n\n\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3066\uff0c\n\n\u3000CXSPARSE_INCLUDE_DIR\n\u3000CXSPARSE_LIBRARY\n\u3000BLAS_blas_LIBRARY\n\u3000LAPACK_lapack_LIBRARY\n\n\u306bsuitesparse-metis-for-windows\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u6307\u5b9a\u3057\u307e\u3059\uff0e\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8a2d\u5b9a\u306b\u30df\u30b9\u308b\u3068\uff0cConfigure\u3057\u305f\u5f8c\u3067\u30c1\u30a7\u30c3\u30af\u304c\u5916\u3055\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u8981\u6ce8\u610f\u3067\u3059\uff0e\u3053\u3053\u307e\u3067\u3067\u304d\u305f\u3089\uff0c\n\n\u3000SUITESPARSE\n\n\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3066Configure\u3057\u307e\u3059\uff0e\u307e\u305f\u5927\u91cf\u306b\u5909\u6570\u304c\u5897\u3048\u307e\u3059\u304c\uff0c\n\n\u3000METIS_LIBRARY\n\u3000UFCONFIG_INCLUDE_DIR\n\u3000AMD_INCLUDE_DIR\n\u3000AMD_LIBRARY\n\u3000CAMD_INCLUDE_DIR\n\u3000CAMD_LIBRARY\n\u3000CCOLAMD_INCLUDE_DIR\n\u3000CCOLAMD_LIBRARY\n\u3000CHOLMOD_INCLUDE_DIR\n\u3000CHOLMOD_LIBRARY\n\u3000COLAMD_INCLUDE_DIR\n\u3000COLAMD_LIBRARY\n\u3000SUITESPARSE_CONFIG_INCLUDE_DIR\n\u3000SUITESPARSE_CONFIG_LIBRARY\n\u3000SUITESPARSEQR_INCLUDE_DIR\n\u3000SUITESPARSEQR_LIBRARY\n\n\u3092\u5168\u3066suitesparse-metis-for-windows\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u6307\u5b9a\u3057\u307e\u3059\uff0e\n\u3053\u3053\u307e\u3067\u3067\u304d\u308c\u3070\uff0c\u3042\u3068\u306fGenerate\u3057\u3066\u30d3\u30eb\u30c9\u3067\u304d\u308b\u306f\u305a\u3067\u3059\uff0e\n\n\n2.6 VTK\n---\n[VTK](http://www.vtk.org/download/)\u306fviz\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u306f\u5fc5\u9808\uff08\u3068\u3044\u3046\u3088\u308a\u306f\uff0cviz\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u5b9f\u8cea\u7684\u306bVTK\u306ewrapper\u6a5f\u80fd\u3067\u3042\u308b\uff0c\u3068\u3044\u3046\u3079\u304d\u304b\u3082\u3057\u308c\u306a\u3044\uff09\u3067\u3059\u304c\uff0c\u5f53\u7136\uff0csfm\u306bVTK\u304c\u5fc5\u8981\u3068\u3044\u3046\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\uff0e\u3057\u304b\u3057\uff0cOpenCV\u306b\u542b\u307e\u308c\u308b\u300csfm\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u300d\u306e\u30d3\u30eb\u30c9\u306b\u306fviz\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u5fc5\u9808\u306a\u306e\u3067\uff0c\u4eca\u56de\u306fVTK\u3082\u5fc5\u9808\u3067\u3059\uff0e\n\nVTK\u306eweb site\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3068\uff0c\u3069\u3046\u3082\u672c\u7a3f\u3092\u57f7\u7b46\u3059\u308b\u76f4\u524d\u306e[11/25\u306bVTK-7.1.0\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f](https://blog.kitware.com/vtk-7-1-0/)\u3088\u3046\u3067\u3059\uff0e\u3053\u3053\u306f\u30d2\u30c8\u30d0\u30b7\u30e9\u30fc\u3068\u3057\u3066\uff0c\u3055\u3063\u305d\u304f[VTK-7.1.0](http://www.vtk.org/files/release/7.1/VTK-7.1.0.zip)\u3092cmake\uff0c\u30d3\u30eb\u30c9\uff0c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u4f7f\u3044\u307e\u3057\u3087\u3046\uff0e\n\u3082\u3061\u308d\u3093[VTK-7.0.0](http://www.vtk.org/files/release/7.0/VTK-7.0.0.zip)\u3084\uff0c[VTK-6.3.0](http://www.vtk.org/files/release/6.3/VTK-6.3.0.zip)\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\uff0e\u3069\u308c\u3082\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u306e\u307e\u307e\u3067\u666e\u901a\u306b\u30d3\u30eb\u30c9\u304c\u901a\u308b\u306f\u305a\u3067\u3059\uff0e\n\n\u306a\u304a\uff0c[\u3053\u3061\u3089\u306e\u30da\u30fc\u30b8](https://blog.negativemind.com/2016/05/27/build-opencv-3-1-with-contrib-module-on-win-10-pro-visual-studio-2015/)\u3067\u306f\u300c\u73fe\u72b6\u30017.0.0\u3067\u306fOpenCV\u306e\u30d3\u30eb\u30c9\u304c\u4e0a\u624b\u304f\u3044\u304b\u306a\u3044\u300d\u3068\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u304c\uff0c\u5f8c\u8ff0\u306e\u3088\u3046\u306bOpenCV\u5074\u306e\u3061\u3087\u3063\u3068\u3057\u305f\u4fee\u6b63\u3067\u5bfe\u5fdc\u3067\u304d\u307e\u3059\uff0e\n\n\n3. OpenCV\u306e\u30d3\u30eb\u30c9\n===\n\n\u672c\u4e38\u306eOpenCV\u3067\u3059\u304c\uff0c\u3068\u308a\u3042\u3048\u305a[opencv-3.1.0](https://codeload.github.com/opencv/opencv/zip/3.1.0)\u3068[opencv_contrib-3.1.0](https://codeload.github.com/opencv/opencv_contrib/zip/3.1.0)\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\uff0c\u5c55\u958b\u3057\u3066\u304b\u3089\uff0c\u4ee5\u964d\u306e\u4f5c\u696d\u306b\u9032\u307f\u307e\u3057\u3087\u3046\uff0e\n\n\n3.1 viz\u30e2\u30b8\u30e5\u30fc\u30eb\u8a2d\u5b9a\n---\n\n\u307e\u305acmake\u3067opencv-3.1.0\u3092\u8aad\u307f\u8fbc\u3093\u3067\u304b\u3089Configure\u3059\u308b\u3068\uff0c\u6bce\u5ea6\u304a\u306a\u3058\u307f\u306e\uff0c\u8a2d\u5b9a\u5909\u6570\u304c\u3044\u308d\u3044\u308d\u8868\u793a\u3055\u308c\u305f\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\uff0e\u305d\u3053\u3067OPENCV_EXTRA_MODULES_PATH\u306bopencv_contrib-3.1.0/modules/\u3092\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046\uff0e\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/105294/ca6c4bc7-51e9-f94a-684a-d745144cc5ec.png)\n\n\u518d\u5ea6Configure\u3059\u308b\u3068\uff0ccontrib\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30d3\u30eb\u30c9\u5bfe\u8c61\u306b\u8ffd\u52a0\u3055\u308c\u307e\u3059\uff0e\u3057\u304b\u3057\uff0cviz\u3082sfm\u3082\u201dUnavailable\u201d\u3068\u306a\u308a\u307e\u3059\uff0e\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u5f53\u7136\u3067\u3059\u306d\uff0e\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/105294/9b7dcfbb-7df3-4af4-1987-ddd80c56e1aa.png)\n\n\u3067\u306f\uff0cVTK\u306e\u30d1\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046\uff0e\u30d3\u30eb\u30c9\u5f8c\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u307e\u3067\u3084\u3063\u305f\u5834\u5408\u306f\uff0c\u4ee5\u4e0b\u306e\u3088\u3046\u306b\uff0cVTK_DIR\u306b\"<\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148>/lib/cmake/vtk-7.1/\"\u3092\u6307\u5b9a\u3057\u307e\u3059\uff0e\u3042\u308b\u3044\u306f\u30d3\u30eb\u30c9\u3057\u305f\u30d5\u30a9\u30eb\u30c0\u3092\u6307\u5b9a\u3057\u3066\u3082\u826f\u304b\u3063\u305f\u3088\u3046\u306a\u8a18\u61b6\u3082\u8584\u3063\u3059\u3089\u3068\u3042\u308a\u307e\u3059\uff0e\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/105294/f55ae52a-67a3-8c52-6a3d-00322b8511e8.png)\n\n\u3055\u3066\uff0c\u3053\u306e\u72b6\u614b\u3067Configure\u3092\u3059\u308b\u3068\uff0c\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\uff0e\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/105294/1102cd46-e870-3139-c9d5-c2eff20639e8.png)\n\n\u304a\u305d\u3089\u304f\uff0c\u300cVTK-7\u3060\u3068\u30d3\u30eb\u30c9\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u300d\u3068\u3044\u3046\u98a8\u8aac\u306f\u3053\u308c\u3092\u6307\u3057\u3066\u3044\u308b\u304b\u3068\u601d\u3044\u307e\u3059\uff0e\n\u30a8\u30e9\u30fc\u306f\u300cvtkRenderingOpenGL\u304c\u3042\u3089\u3078\u3093\u3067\u300d\u3068\u8a00\u3063\u3066\u307e\u3059\u304c\uff0c\u305f\u3057\u304b\u306b\u5b58\u5728\u3057\u307e\u305b\u3093\uff0eVTK-7\u304b\u3089vtkRenderingOpenGL2\u3068\u3044\u3046\u65b0\u30e2\u30b8\u30e5\u30fc\u30eb\u3078\u79fb\u884c\u3057\u305f\u306e\u304c\u539f\u56e0\u3067\u3059\uff0eVTK\u306e\u30d3\u30eb\u30c9\u6642\u306bOpenGL2\u3067\u306f\u306a\u304fOpenGL\u3092\u4f7f\u3046\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u304c\uff0c\u305d\u3046\u3044\u3046\u5f8c\u308d\u5411\u304d\u306e\u89e3\u6c7a\u65b9\u6cd5\u3067\u306f\u306a\u304f\uff0c\u3061\u3083\u3093\u3068OpenGL2\u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\uff0e\n\n\u3053\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u306b\u306f opencv-3.1.0/cmake/OpenCVDetectVTK.cmake \u3092\u4fee\u6b63\u3057\u307e\u3059\uff0e\u5192\u982d\u90e8\u5206\u3067\n\n```cmake:\u4fee\u6b63\u524d\n# VTK 6.x components\nfind_package(VTK QUIET COMPONENTS vtkRenderingOpenGL vtkInteractionStyle vtkRenderingLOD vtkIOPLY vtkFiltersTexture vtkRenderingFreeType vtkIOExport NO_MODULE)\n```\n\n\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u304c\uff0c\u79c1\u306f\n\n```cmake:\u4fee\u6b63\u5f8c\n# VTK 6.x/7.x components\nfind_package(VTK QUIET COMPONENTS vtkInteractionStyle NO_MODULE)\nif(\"${VTK_RENDERING_BACKEND}\" STREQUAL \"OpenGL2\")\n  find_package(VTK QUIET COMPONENTS vtkRenderingOpenGL2 vtkInteractionStyle vtkRenderingLOD vtkIOGeometry vtkIOPLY vtkFiltersTexture vtkRenderingFreeType vtkIOExport NO_MODULE)\nelse()\n  find_package(VTK QUIET COMPONENTS vtkRenderingOpenGL vtkInteractionStyle vtkRenderingLOD vtkIOGeometry vtkIOPLY vtkFiltersTexture vtkRenderingFreeType vtkIOExport NO_MODULE)\nendif()\n```\n\n\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3057\u305f\uff0e\n\u5143\u306fvtkRenderingOpenGL\u306a\u3069\u306e\u6709\u7121\u3067VTK\u306e\u6709\u7121\u3092\u5224\u5b9a\u3057\u3066\u3044\u307e\u3057\u305f\u304c\uff0c\u4fee\u6b63\u5f8c\u306f\u300c\u307e\u305a\u306fvtk-6,7\u306b\u5171\u901a\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3067VTK\u81ea\u4f53\u306e\u5b58\u5728\u3092\u78ba\u8a8d\u300d\u2192\u300c\u5b58\u5728\u3057\u305f\u5834\u5408\u306b\u306f\uff0cOpenGL\u304bOpenGL2\u304b\u3092\u78ba\u8a8d\u300d\u2192\u300c\u5834\u5408\u5206\u3051\u3092\u3057\u3066\uff0c\u5fc5\u8981\u306a\u5168\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u6709\u7121\u3092\u30c1\u30a7\u30c3\u30af\u300d\u3068\u3044\u3046\u51e6\u7406\u306b\u306a\u3063\u3066\u3044\u307e\u3059\uff0e\n\u3069\u3046\u3082VTK-7.0\u30687.1\u3067\u5fae\u5999\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4ed5\u69d8\u304c\u5909\u308f\u3063\u305f\u3088\u3046\u3067\uff0c7.0\u3067\u52d5\u3044\u3066\u3044\u305f\u8a2d\u5b9a\u3067\u306f7.1\u306f\u30c0\u30e1\u3060\u3063\u305f\u306e\u3067\u3059\u304c\uff0c\u3068\u306b\u304b\u304f\u4e0a\u8a18\u306e\u4fee\u6b63\u3092\u3059\u308c\u30706.3\u30827.0\u30827.1\u3082\u3044\u3051\u308b\u306f\u305a\u3067\u3059\uff0e\n\n\u3055\u3066\uff0c\u3053\u306e\u4fee\u6b63\u3092\u3057\u3066\u304b\u3089VTK_DIR\u3092\u8a2d\u5b9a\u3057\u3066Configure\u3059\u308c\u3070\uff0cVTK\u3082\u8a8d\u8b58\u3055\u308c\uff0c\u3081\u3067\u305f\u304fviz\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30d3\u30eb\u30c9\u5bfe\u8c61\u306b\u5165\u308a\u307e\u3059\uff0e\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/105294/30958520-9e51-c52c-31ce-dd5e2bba88cb.png)\n\n\n3.2 sfm\u30e2\u30b8\u30e5\u30fc\u30eb\u8a2d\u5b9a\n---\n\u6b21\u306b\uff0csfm\u306b\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u304d\u307e\u3059\uff0e\n\n\u3000EIGEN_INCLUDE_PATH\n\u3000WITH_EIGEN\n\u3000GLOG_Libs\n\u3000Ceres_DIR\n\n\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u3067\u3059\uff0e\u3053\u308c\u3089\u3092\u8a2d\u5b9a\u3057\u3066Configure\u3059\u308b\u3068\uff0c\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/105294/8f78745c-a65c-56e1-9076-d19e4fac433d.png)\n\n\u3053\u306e\u3088\u3046\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u691c\u51fa\u3055\u308c\u307e\u3059\uff0e\u3053\u308c\u3067sfm\u304c\u30d3\u30eb\u30c9\u5bfe\u8c61\u306b\u5165\u308b\u308f\u3051\u3067\u3059\uff0esfm\u304cenable\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\uff0e\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/105294/e3d0cd14-2c12-0339-b767-d25264a99e3b.png)\n\n\u3093\uff1f\u3042\uff0c\u3042\u308c\u3063\uff1f\n\n**\"Module opencv_sfm disabled\" \u2026\u3060\u3068\uff1f\uff01(\uff9f\u0434\uff9flll)\uff76\uff9e\uff70\uff9d**\n\n\u3000\n\u3000\n\u2026\u3053\u306e\u8b0e\u306b\u5bfe\u5fdc\u3057\u3088\u3046\u3068\u53f3\u5f80\u5de6\u5f80\u3057\u3066\u30cd\u30bf\u3092\u5f15\u3063\u5f35\u308d\u3046\u304b\u3068\u3082\u601d\u3044\u307e\u3057\u305f\u304c\uff0c\u7d50\u8ad6\u304b\u3089\u8a00\u3046\u3068\uff0c\u3044\u304f\u3089cmake\u4e0a\u3067\u8a2d\u5b9a\u3092\u3044\u3058\u3063\u3066\u3082\uff0c\u3053\u3053\u3067opencv_sfm\u3092enable\u3059\u308b\u3053\u3068\u306f\u7d76\u5bfe\u306b\u3067\u304d\u307e\u305b\u3093\uff0e\u306a\u305c\u304b\u3068\u3044\u3046\u3068\uff0copencv_contrib-3.1.0/modules/sfm/CMakeLists.txt\u306b\u539f\u56e0\u304c\u3042\u308b\u304b\u3089\u3067\u3059\uff0e16\u884c\u76ee\u4ee5\u964d\u3092\u78ba\u8a8d\u3059\u308b\u3068\n\n```cmake\n 16 if(NOT DEFINED SFM_DEPS_OK)\n 17\n 18   set(_fname \"${CMAKE_CURRENT_BINARY_DIR}/test_sfm_deps.cpp\")\n 19   file(WRITE \"${_fname}\" \"#include <glog/logging.h>\\n#include <gflags/gflags.h>\\nint main() { (void)(0); return 0; }\\n\")\n 20   try_compile(SFM_DEPS_OK \"${CMAKE_CURRENT_BINARY_DIR}\" \"${_fname}\"\n 21       CMAKE_FLAGS \"-DINCLUDE_DIRECTORIES:STRING=${GLOG_INCLUDE_DIRS};${GFLAGS_INCLUDE_DIRS}\"\n 22       LINK_LIBRARIES ${GLOG_LIBRARIES} ${GFLAGS_LIBRARIES}\n 23       OUTPUT_VARIABLE OUTPUT\n 24   )\n 25   file(REMOVE \"${_fname}\")\n 26   message(STATUS \"Checking SFM deps... ${SFM_DEPS_OK}\")\n 27 endif()\n 28\n```\n\n\u3068\u3044\u3046\u30b3\u30fc\u30c9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\uff0e\u3053\u306e16\u884c\u76ee\u306e\"NOT DEFINED\"\u3068\u3044\u3046\u6761\u4ef6\u5206\u5c90\u304c\u66f2\u8005\u3067\uff0c\u8981\u306f\uff0c\u4e00\u56de\u3067\u3082Configure\u3057\u3066\u3057\u307e\u3046\u3068SFM_DEPS_OK\u306b\u306fTRUE\u304bFALSE\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u305f\u3081\uff0c\u305d\u306e\u5f8c\u306f\u4f55\u5ea6cmake\u3092\u8d70\u3089\u305b\u3066\u3082\u4e8c\u5ea6\u3068\u5909\u66f4\u3055\u308c\u307e\u305b\u3093\uff0e\n\u305d\u3057\u3066\uff0c**Windows\u74b0\u5883\u3067\u306f\u6700\u521d\u306b\u4e00\u5ea6Configure\u3057\u306a\u3044\u3068GUI\u306b\u5909\u6570\u304c\u8868\u793a\u3055\u308c\u306a\u3044\u306e\u3067\uff0c\u7d50\u679c\u7684\u306b\u5fc5\u305adisable\u3055\u308c\u308b**\u308f\u3051\u3067\u3059\uff0e\u6700\u521d\u3053\u308c\u3092\u898b\u305f\u3068\u304d\u306b\u306f\u6bba\u610f\u3092\uff08ry\n \n\n\u6c17\u3092\u53d6\u308a\u76f4\u3057\u3066\uff0c16\u884c\u76ee\u3092\n\n```cmake\n 16 if(NOT DEFINED SFM_DEPS_OK OR NOT SFM_DEPS_OK)\n```\n\n\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\uff0e\n\n\n\u3068\u3044\u3046\u3053\u3068\u3067\uff0c\u3053\u306e\u843d\u3068\u3057\u7a74\u304c\u672c\u65e5\u306e\u30cd\u30bf\u3067\u3057\u305f\uff0e\u3053\u306e\u4fee\u6b63\u5f8c\u3082\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u5834\u5408\u306f\uff0c\u3055\u3089\u306b\u65b0\u305f\u306a\u5909\u6570\u3068\u3057\u3066\n\nGFLAGS_INCLUDE_DIRS\nGFLAGS_LIBRARIES\n\n\u3092\"Add Entry\"\u30dc\u30bf\u30f3\u304b\u3089\u8ffd\u52a0\u3057\u3066\uff0c\u305d\u308c\u305e\u308c\uff0c\"\\<gflags\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\\>/include/\"\u3068\uff0c\"\\<gflags\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\\>/lib/gflags.lib\"\u3092\u8a2d\u5b9a\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff0e\n\n\u305d\u306e\u4ed6\u306e\u4fee\u6b63\u70b9\u3092\u4ee5\u4e0b\u306b\u5217\u6319\u3057\u307e\u3059\uff0e\n\nopencv_contrib-3.1.0/modules/sfm/CMakeLists.txt\n\n```cmake:\u4fee\u6b63\u524d\n 59 if(Ceres_FOUND)\n 60   add_definitions(\"-DCERES_FOUND=1\")\n 61   list(APPEND LIBMV_LIGHT_LIBS simple_pipeline)\n 62 else()\n```\n\n```cmake:\u4fee\u6b63\u5f8c\n 59 if(Ceres_FOUND)\n 60   add_definitions(\"-DCERES_FOUND=1\")\n 61   list(APPEND LIBMV_LIGHT_LIBS simple_pipeline)\n 62   list(APPEND LIBMV_LIGHT_INCLUDES ${CERES_INCLUDE_DIRS})\n 63 else()\n```\n\n```cmake:\u4fee\u6b63\u524d\n130 if(Ceres_FOUND)\n131   ocv_add_samples(opencv_viz)\n132 endif ()\n```\n\n```cmake:\u4fee\u6b63\u5f8c\n131 if(Ceres_FOUND AND BUILD_opencv_viz)\n132   ocv_add_module(viz)\n133   ocv_add_samples(opencv_sfm)\n134 endif ()\n```\n\nopencv_contrib-3.1.0/modules/sfm/src/libmv_light/libmv/multiview/CMakeLists.txt\n\n```cmake:\u4fee\u6b63\u524d\n 20 TARGET_LINK_LIBRARIES(multiview glog numeric)\n```\n\n```cmake:\u4fee\u6b63\u5f8c\n 20 TARGET_LINK_LIBRARIES(multiview ${GLOG_LIBRARIES} numeric)\n```\n\n3.3 \u30d3\u30eb\u30c9\n--\n\u79c1\u306e\u4eca\u56de\u306e\u74b0\u5883\u3067\u306fBUILD_opencv_hdf\u3068BUILD_opencv_bioinspired\u306b\u3082\u81ea\u52d5\u3067\u30c1\u30a7\u30c3\u30af\u304c\u5165\u3063\u3066\u3044\u305f\u306e\u3067\u3059\u304c\uff0c\u3053\u306e\uff12\u3064\u304c\u30d3\u30eb\u30c9\u6642\u306b\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3057\u305f\uff0e\uff08\u4ee5\u524d\u306b\u30d3\u30eb\u30c9\u3057\u305f\u969b\u306fbioinspired\u306f\u30d3\u30eb\u30c9\u3067\u304d\u3066\u3044\u305f\u306f\u305a\u306a\u306e\u3067\uff0c\u4f55\u304b\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u4f9d\u5b58\u306e\u554f\u984c\u306a\u3069\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff0e\uff09\u3069\u3061\u3089\u3082\u4eca\u56de\u306e\u76ee\u7684\u3068\u306f\u95a2\u4fc2\u306a\u3044\u306e\u3067\uff0c\u3053\u3053\u3067\u306f\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3057\u3066\u30d3\u30eb\u30c9\u3057\u307e\u3057\u305f\uff0e\n\n\n\n\n4. \u307e\u3068\u3081\n===\n\n\u3068\u3044\u3046\u3053\u3068\u3067\uff0c\u4eca\u65e5\u306fopencv_sfm\u3092VisualStudio 2015\u3092\u4f7f\u3063\u3066\u30d3\u30eb\u30c9\u3057\u307e\u3057\u305f\uff0e\u660e\u3089\u304b\u306bVisualStudio\u306f\u60f3\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u96f0\u56f2\u6c17\u3067\u3059\u304c\uff0c\u305d\u308c\u3067\u3082\uff0c\u305d\u308c\u306a\u308a\u306b\u624b\u9593\u3092\u304b\u3051\u308b\u3053\u3068\u3067\u30d3\u30eb\u30c9\u3067\u304d\u308b\u3068\u3044\u3046\u3053\u3068\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\uff0e\n\n---\n\n\u660e\u65e5\u306f\uff0cOpenCV\u306b\u4ed8\u5c5e\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u4f7f\u3063\u3066SfM\u306e\u52d5\u4f5c\u78ba\u8a8d\u3092\u3057\u307e\u3059\uff0e\n\n\n\n", "tags": ["OpenCV", "Structure-from-Motion", "VisualStudio"]}