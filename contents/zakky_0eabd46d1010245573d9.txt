{"context": "\u3053\u308c\u306fAWS Certificate Manager (ACM)\u5165\u9580\u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\u306e\u4e00\u90e8\u3067\u3059\u3002\n\u6700\u521d\u304b\u3089\u7d9a\u3051\u3066\u884c\u3063\u3066\u3044\u308b\u5834\u5408\u300c0.\u6e96\u5099\u300d\u306e\u5404\u9805\u306f\u4f5c\u696d\u4e0d\u8981\u3067\u3059\u3002\u7b2c1\u9805\u3078\u9032\u3093\u3067\u304f\u3060\u3055\u3044\u3002\n\n0. \u6e96\u5099\n\n0.1. HostedZoneId\u306e\u5909\u6570\u3078\u306e\u683c\u7d0d\n\n\u30b3\u30de\u30f3\u30c9\nHOSTED_ZONE_ID=`aws route53 list-hosted-zones \\\n --query HostedZones[].Id --output text` && echo ${HOSTED_ZONE_ID}\n\n\n\n\u7d50\u679c(\u4f8b)\n      /hostedzone/Z1S92TCRCPLEYH\n\n\n\n1. Route53\u30ec\u30b3\u30fc\u30c9\u30bb\u30c3\u30c8\u306e\u524a\u9664\n\n1.1. \u30ec\u30b3\u30fc\u30c9\u30bb\u30c3\u30c8\u306e\u524a\u9664\nRoute53\u306e\u30be\u30fc\u30f3\uff08\u30c9\u30e1\u30a4\u30f3\uff09\u524a\u9664\u3059\u308b\u306b\u306f\u3001\u5168\u3066\u306e\u767b\u9332\u3057\u305f\u30ec\u30b3\u30fc\u30c9\u3092\u524a\u9664\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\n\u30ec\u30b3\u30fc\u30c9\u30bb\u30c3\u30c8\u767b\u9332\u6642\u306b\u4f7f\u7528\u3057\u305fJSON\u30d5\u30a1\u30a4\u30eb\u306eCREATE\u3092DELETE\u306b\u7f6e\u63db\u3059\u308b\u3053\u3068\u3067\u518d\u5229\u7528\u53ef\u80fd\u306a\u306e\u3067\u3001\u3053\u308c\u306b\u3088\u308a\u524a\u9664\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u8907\u6570\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u540c\u6642\u306b\u306f\u51e6\u7406\u3067\u304d\u307e\u305b\u3093\u304b\u3089\u3001\u9806\u6b21\u4f5c\u696d\u3057\u307e\u3059\u3002\n\uff08\uff11\u56de\u76ee\uff09\n\n\u30b3\u30de\u30f3\u30c9\ncat ./route53.json | sed -e 's/CREATE/DELETE/g' > ./route53delete.json\naws route53 change-resource-record-sets \\\n --hosted-zone-id ${HOSTED_ZONE_ID} --change-batch file://route53delete.json\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n          \"ChangeInfo\": {\n              \"Status\": \"PENDING\",\n              \"Comment\": \"SESincoming\",\n              \"SubmittedAt\": \"2016-11-03T05:17:25.761Z\",\n              \"Id\": \"/change/CWGAZK7G2ILU4\"\n          }\n      }\n\n\n\uff08\uff12\u56de\u76ee\uff09\n\n\u30b3\u30de\u30f3\u30c9\ncat ./route53b.json | sed -e 's/CREATE/DELETE/g' > ./route53delete.json\naws route53 change-resource-record-sets \\\n --hosted-zone-id ${HOSTED_ZONE_ID} --change-batch file://route53delete.json\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n          \"ChangeInfo\": {\n              \"Status\": \"PENDING\",\n              \"Comment\": \"AliasRecord\",\n              \"SubmittedAt\": \"2016-11-03T06:52:06.554Z\",\n              \"Id\": \"/change/C385JS8Z5GJZAB\"\n          }\n      }\n\n\n\uff08CloudFront\u307e\u3067\u306e\u65b9\u306f\u6b21\u306e\uff13\u56de\u76ee\u306f\u4e0d\u8981\u3067\u3059\u3002\u3053\u3061\u3089\u306fALB\u307e\u3067\u69cb\u7bc9\u3057\u305f\u65b9\u306e\u307f\uff09\n\n\u30b3\u30de\u30f3\u30c9\ncat ./route53c.json | sed -e 's/CREATE/DELETE/g' > ./route53delete.json\naws route53 change-resource-record-sets \\\n --hosted-zone-id ${HOSTED_ZONE_ID} --change-batch file://route53delete.json\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n          \"ChangeInfo\": {\n              \"Status\": \"PENDING\",\n              \"Comment\": \"ALB-AliasRecord\",\n              \"SubmittedAt\": \"2016-11-03T06:52:06.554Z\",\n              \"Id\": \"/change/C385JS8Z5GJZAB\"\n          }\n      }\n\n\n\u3053\u3053\u307e\u3067\u5b9f\u884c\u3057\u305f\u3089\uff11\u5206\u7a0b\u5ea6\u5f85\u3061\u307e\u3059\u3002\n\uff08\u30ec\u30b3\u30fc\u30c9\u30bb\u30c3\u30c8\u306e\u524a\u9664\u304c\u5b8c\u4e86\u3057\u306a\u3044\u3068\u30be\u30fc\u30f3\u3092\u524a\u9664\u3067\u304d\u306a\u3044\u304b\u3089\u3067\u3059\uff09\n\n1.2. \u30ec\u30b3\u30fc\u30c9\u30bb\u30c3\u30c8\u524a\u9664\u306e\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\naws route53 get-hosted-zone --id ${HOSTED_ZONE_ID} --query HostedZone.ResourceRecordSetCount\n\n\n\n\u7d50\u679c\n      2\n\n\n\u51fa\u529b\u7d50\u679c\u304c 2 \u3067\u306a\u3044\u5834\u5408\u306f\u3001\u3082\u3046\uff11\u5206\u7a0b\u5ea6\u5f85\u3063\u3066\u518d\u5ea6\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u305d\u308c\u3067\u3082\u5909\u308f\u3089\u306a\u3044\u5834\u5408\u3001\u30ec\u30b3\u30fc\u30c9\u30bb\u30c3\u30c8\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u3066\u3044\u307e\u3059\u304b\u3089\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n2. Route53\u30db\u30b9\u30c8\u30be\u30fc\u30f3\u306e\u524a\u9664\n\n2.1. \u30be\u30fc\u30f3\u306e\u524a\u9664\n\n\u30b3\u30de\u30f3\u30c9\naws route53 delete-hosted-zone --id ${HOSTED_ZONE_ID}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n          \"ChangeInfo\": {\n              \"Status\": \"PENDING\",\n              \"SubmittedAt\": \"2016-11-03T06:55:05.380Z\",\n              \"Id\": \"/change/C3RGFWB23BB5L7\"\n          }\n      }\n\n\n\n2.2. \u30be\u30fc\u30f3\u304c\u524a\u9664\u3055\u308c\u305f\u304b\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\naws route53 list-hosted-zones\n\n\n\n\u7d50\u679c\n      {\n          \"HostedZones\": []\n      }\n\n\n\n\u61c7\u89aa\u4f1a\u3078\u884c\u304d\u307e\u3057\u3087\u3046\uff01\n\u4ee5\u4e0a\u3067\u672c\u65e5\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u306f\u7247\u4ed8\u3051\u307e\u3067\u5168\u3066\u7d42\u4e86\u3067\u3059\u3002\n\u304a\u3064\u304b\u308c\u3055\u307e\u3067\u3057\u305f\u3002\u8377\u7269\u3092\u7247\u4ed8\u3051\u3066\u61c7\u89aa\u4f1a\u3078\u884c\u304d\u307e\u3057\u3087\u3046\u3002\n\n\u6ce8\u610f\nRoute53\u306b\u306f\u7121\u6599\u5229\u7528\u67a0\u304c\u6709\u308a\u307e\u305b\u3093\u3002\n\u524a\u9664\u3057\u5fd8\u308c\u308b\u3068\u8ab2\u91d1\u3055\u308c\u7d9a\u3051\u307e\u3059\u3002\u304d\u3061\u3093\u3068\u524a\u9664\u306e\u78ba\u8a8d\u3092\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\u3053\u308c\u306f<A HREF=\"http://qiita.com/zakky/items/29cf8095f6faa24f216b\" target=_blank>AWS Certificate Manager (ACM)\u5165\u9580\u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599</A>\u306e\u4e00\u90e8\u3067\u3059\u3002\n\u6700\u521d\u304b\u3089\u7d9a\u3051\u3066\u884c\u3063\u3066\u3044\u308b\u5834\u5408\u300c0.\u6e96\u5099\u300d\u306e\u5404\u9805\u306f\u4f5c\u696d\u4e0d\u8981\u3067\u3059\u3002<A HREF=\"#1-route53\u30ec\u30b3\u30fc\u30c9\u30bb\u30c3\u30c8\u306e\u524a\u9664\">\u7b2c1\u9805\u3078\u9032\u3093\u3067\u304f\u3060\u3055\u3044</A>\u3002\n\n\n0. \u6e96\u5099\n=======\n\n0.1. HostedZoneId\u306e\u5909\u6570\u3078\u306e\u683c\u7d0d\n---------------\n\n```bash:\u30b3\u30de\u30f3\u30c9\nHOSTED_ZONE_ID=`aws route53 list-hosted-zones \\\n --query HostedZones[].Id --output text` && echo ${HOSTED_ZONE_ID}\n```\n```text:\u7d50\u679c(\u4f8b):\n      /hostedzone/Z1S92TCRCPLEYH\n```\n\n\n1. Route53\u30ec\u30b3\u30fc\u30c9\u30bb\u30c3\u30c8\u306e\u524a\u9664\n===========\n\n1.1. \u30ec\u30b3\u30fc\u30c9\u30bb\u30c3\u30c8\u306e\u524a\u9664\n---------------\n\nRoute53\u306e\u30be\u30fc\u30f3\uff08\u30c9\u30e1\u30a4\u30f3\uff09\u524a\u9664\u3059\u308b\u306b\u306f\u3001\u5168\u3066\u306e\u767b\u9332\u3057\u305f\u30ec\u30b3\u30fc\u30c9\u3092\u524a\u9664\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\n\u30ec\u30b3\u30fc\u30c9\u30bb\u30c3\u30c8\u767b\u9332\u6642\u306b\u4f7f\u7528\u3057\u305fJSON\u30d5\u30a1\u30a4\u30eb\u306eCREATE\u3092DELETE\u306b\u7f6e\u63db\u3059\u308b\u3053\u3068\u3067\u518d\u5229\u7528\u53ef\u80fd\u306a\u306e\u3067\u3001\u3053\u308c\u306b\u3088\u308a\u524a\u9664\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u8907\u6570\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u540c\u6642\u306b\u306f\u51e6\u7406\u3067\u304d\u307e\u305b\u3093\u304b\u3089\u3001\u9806\u6b21\u4f5c\u696d\u3057\u307e\u3059\u3002\n\n\uff08\uff11\u56de\u76ee\uff09\n\n```bash:\u30b3\u30de\u30f3\u30c9:\ncat ./route53.json | sed -e 's/CREATE/DELETE/g' > ./route53delete.json\naws route53 change-resource-record-sets \\\n --hosted-zone-id ${HOSTED_ZONE_ID} --change-batch file://route53delete.json\n```\n```text:\u7d50\u679c(\u4f8b):\n      {\n          \"ChangeInfo\": {\n              \"Status\": \"PENDING\",\n              \"Comment\": \"SESincoming\",\n              \"SubmittedAt\": \"2016-11-03T05:17:25.761Z\",\n              \"Id\": \"/change/CWGAZK7G2ILU4\"\n          }\n      }\n```\n\n\uff08\uff12\u56de\u76ee\uff09\n\n```bash:\u30b3\u30de\u30f3\u30c9:\ncat ./route53b.json | sed -e 's/CREATE/DELETE/g' > ./route53delete.json\naws route53 change-resource-record-sets \\\n --hosted-zone-id ${HOSTED_ZONE_ID} --change-batch file://route53delete.json\n```\n```text:\u7d50\u679c(\u4f8b):\n      {\n          \"ChangeInfo\": {\n              \"Status\": \"PENDING\",\n              \"Comment\": \"AliasRecord\",\n              \"SubmittedAt\": \"2016-11-03T06:52:06.554Z\",\n              \"Id\": \"/change/C385JS8Z5GJZAB\"\n          }\n      }\n```\n\n\uff08CloudFront\u307e\u3067\u306e\u65b9\u306f\u6b21\u306e\uff13\u56de\u76ee\u306f\u4e0d\u8981\u3067\u3059\u3002\u3053\u3061\u3089\u306fALB\u307e\u3067\u69cb\u7bc9\u3057\u305f\u65b9\u306e\u307f\uff09\n\n```bash:\u30b3\u30de\u30f3\u30c9:\ncat ./route53c.json | sed -e 's/CREATE/DELETE/g' > ./route53delete.json\naws route53 change-resource-record-sets \\\n --hosted-zone-id ${HOSTED_ZONE_ID} --change-batch file://route53delete.json\n```\n```text:\u7d50\u679c(\u4f8b):\n      {\n          \"ChangeInfo\": {\n              \"Status\": \"PENDING\",\n              \"Comment\": \"ALB-AliasRecord\",\n              \"SubmittedAt\": \"2016-11-03T06:52:06.554Z\",\n              \"Id\": \"/change/C385JS8Z5GJZAB\"\n          }\n      }\n```\n\n\u3053\u3053\u307e\u3067\u5b9f\u884c\u3057\u305f\u3089\uff11\u5206\u7a0b\u5ea6\u5f85\u3061\u307e\u3059\u3002\n\uff08\u30ec\u30b3\u30fc\u30c9\u30bb\u30c3\u30c8\u306e\u524a\u9664\u304c\u5b8c\u4e86\u3057\u306a\u3044\u3068\u30be\u30fc\u30f3\u3092\u524a\u9664\u3067\u304d\u306a\u3044\u304b\u3089\u3067\u3059\uff09\n\n\n1.2. \u30ec\u30b3\u30fc\u30c9\u30bb\u30c3\u30c8\u524a\u9664\u306e\u78ba\u8a8d\n---------------\n\n```bash:\u30b3\u30de\u30f3\u30c9\naws route53 get-hosted-zone --id ${HOSTED_ZONE_ID} --query HostedZone.ResourceRecordSetCount\n```\n```text:\u7d50\u679c:\n      2\n```\n\n\u51fa\u529b\u7d50\u679c\u304c 2 \u3067\u306a\u3044\u5834\u5408\u306f\u3001\u3082\u3046\uff11\u5206\u7a0b\u5ea6\u5f85\u3063\u3066\u518d\u5ea6\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u305d\u308c\u3067\u3082\u5909\u308f\u3089\u306a\u3044\u5834\u5408\u3001\u30ec\u30b3\u30fc\u30c9\u30bb\u30c3\u30c8\u306e\u524a\u9664\u306b\u5931\u6557\u3057\u3066\u3044\u307e\u3059\u304b\u3089\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n2. Route53\u30db\u30b9\u30c8\u30be\u30fc\u30f3\u306e\u524a\u9664\n===========\n\n2.1. \u30be\u30fc\u30f3\u306e\u524a\u9664\n---------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws route53 delete-hosted-zone --id ${HOSTED_ZONE_ID}\n```\n```text:\u7d50\u679c(\u4f8b):\n      {\n          \"ChangeInfo\": {\n              \"Status\": \"PENDING\",\n              \"SubmittedAt\": \"2016-11-03T06:55:05.380Z\",\n              \"Id\": \"/change/C3RGFWB23BB5L7\"\n          }\n      }\n```\n\n2.2. \u30be\u30fc\u30f3\u304c\u524a\u9664\u3055\u308c\u305f\u304b\u78ba\u8a8d\n-----------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9\naws route53 list-hosted-zones\n```\n```text:\u7d50\u679c:\n      {\n          \"HostedZones\": []\n      }\n```\n\n\n\n\u61c7\u89aa\u4f1a\u3078\u884c\u304d\u307e\u3057\u3087\u3046\uff01\n=======\n\n\u4ee5\u4e0a\u3067\u672c\u65e5\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u306f\u7247\u4ed8\u3051\u307e\u3067\u5168\u3066\u7d42\u4e86\u3067\u3059\u3002\n\u304a\u3064\u304b\u308c\u3055\u307e\u3067\u3057\u305f\u3002\u8377\u7269\u3092\u7247\u4ed8\u3051\u3066\u61c7\u89aa\u4f1a\u3078\u884c\u304d\u307e\u3057\u3087\u3046\u3002\n\n\n\u6ce8\u610f\n=======\nRoute53\u306b\u306f\u7121\u6599\u5229\u7528\u67a0\u304c\u6709\u308a\u307e\u305b\u3093\u3002\n\u524a\u9664\u3057\u5fd8\u308c\u308b\u3068\u8ab2\u91d1\u3055\u308c\u7d9a\u3051\u307e\u3059\u3002\u304d\u3061\u3093\u3068\u524a\u9664\u306e\u78ba\u8a8d\u3092\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n", "tags": ["aws-cli", "route53", "awscli", "AWS"]}