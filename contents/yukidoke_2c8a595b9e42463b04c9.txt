{"context": "\u3053\u306e\u8a18\u4e8b\u306f\u3001Three.js Advent Calendar 2016 13\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n\n\ndisplacement\u306b\u89e6\u308c\u305f\u304d\u3063\u304b\u3051\n\u7d75\u306b\u51f9\u51f8\u304c\u3064\u3044\u305f\u308a\u3001\u767d\u3068\u9ed2\u3092\u5224\u5225\u3059\u308b\u3068\u3053\u308d\u304c\u4e0d\u601d\u8b70\u306a\u611f\u3058\u304c\u3057\u3066\u3001\u89e6\u308c\u3066\u307f\u305f\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\u9759\u6b62\u753b\u306b\u3067\u304d\u308b\u306a\u3089\u52d5\u753b\u306b\u3082\u9069\u7528\u3067\u304d\u308b\u304b\u3082\u3001\u3068\u8a66\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u3001\u3046\u307e\u304f\u3044\u304d\u307e\u3057\u305f\u3002\ndemo\n\nvideo displacement\u306b\u3064\u3044\u3066\n\u30b3\u30fc\u30c9\u81ea\u4f53\u77ed\u304f\u3001\u30b7\u30f3\u30d7\u30eb\u306a\u306e\u3067\u3001\u8981\u70b9\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u3002\ndemo\u3067\u306f\u3001\u51f9\u51f8\u304c\u898b\u3084\u3059\u3044\u3088\u3046\u306b\u30cb\u753b\u9762\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\u30cb\u753b\u9762\u306e\u3084\u308a\u65b9\u306f\u3053\u306e\u8a18\u4e8b\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\n\nvideo\u306e\u30bd\u30fc\u30b9\n\u307e\u305a\u3001video\u30bf\u30b0\u3092\u66f8\u3044\u3066\n\u30aa\u30fc\u30c8\u30d7\u30ec\u30a4\u3001\u30eb\u30fc\u30d7\u3001\u30a4\u30f3\u30e9\u30a4\u30f3\u3001\u30df\u30e5\u30fc\u30c8\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nios10\u304b\u3089video\u3092\u30a4\u30f3\u30e9\u30a4\u30f3\u3067\u518d\u751f\u53ef\u80fd\u306b\u306a\u3063\u305f\u305f\u3081\u3001\u3053\u306e\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\nios9\u3088\u308a\u4ee5\u524d\u306e\u7aef\u672b\u3067\u306f\u3046\u307e\u304f\u6620\u3089\u306a\u3044\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n<video id=\"video\" src=\"01.mp4\" autoplay loop playsinline muted></video>\n\n\u305d\u3057\u3066\u3001javascript\u5074\u3067\nvideo = document.getElementById(\"video\");  // \u6307\u5b9aID\u306e\u8981\u7d20\u3092\u53d6\u5f97\n\n\u8981\u7d20\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n#video { display: none; }\n\nvideo\u304c\u91cd\u306a\u3063\u3066\u6620\u3063\u3066\u3057\u307e\u3046\u305f\u3081\u3001video\u30bf\u30b0\u306e\u65b9\u3092none\u306b\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3082\u3063\u3068\u826f\u3044\u65b9\u6cd5\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u30ab\u30e9\u30fc\u3068\u3057\u3066\u6620\u308bvideoTexture\u3068\u51f9\u51f8\u3092\u5224\u5225\u3059\u308bvideoTexture\u3092\u5225\u3005\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\ntexture = new THREE.VideoTexture(video);\n\nmaterial = new THREE.MeshPhongMaterial({\n    side: THREE.DoubleSide,    // \u4e21\u9762\u306b\u6620\u3059\n    map: texture,              // \u30c6\u30af\u30b9\u30c1\u30e3\n    displacementMap: texture,  // displacement\u306e\u30c6\u30af\u30b9\u30c1\u30e3\n    displacementScale: -12     // displacement\u306e\u5927\u304d\u3055\n});\n\n\u5168\u4f53\u306e\u30b3\u30fc\u30c9\u3082\u306e\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n\nindex.html\n<!DOCTYPE html>\n\n<html lang=\"ja\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <title>displacement</title>\n    <style>\n        * {\n            overflow: hidden;\n        }\n\n        #displ {\n            margin: 0;\n            padding: 0;\n            border: 0;\n        }\n\n        #button {\n            position: absolute;\n            top: 10px;\n            left: 10px;\n        }\n\n        #video {\n            display: none;\n        }\n    </style>\n    <script src=\"js/three.min.js\"></script>\n    <script src=\"js/OrbitControls.js\"></script>\n    <script src=\"js/main.js\"></script>\n</head>\n\n<body>\n    <div id=\"displ\"></div>\n    <div id=\"button\">\n        <input type=\"button\" value=\"\u306f\u3058\u3081\u304b\u3089\" onclick=\"video.load();\" />\n        <input type=\"button\" value=\"\u518d\u751f\" onclick=\"video.play();\" />\n        <input type=\"button\" value=\"\u4e00\u6642\u505c\u6b62\" onclick=\"video.pause();\" />\n    </div>\n    <video id=\"video\" src=\"001.mp4\" autoplay loop playsinline muted></video>\n</body>\n\n</html>\n\n\n\nmain.js\n    var initScene, render,\n        renderer, scene, cameraL, cameraR, light, light2, controls,\n        geometry, material, texture, plane;\n    var SCREEN_WIDTH = window.innerWidth,\n        SCREEN_HEIGHT = window.innerHeight;\n\n    function initScene() {\n\n        scene = new THREE.Scene();\n\n        // \u5de6\u5074\u306e\u30ab\u30e1\u30e9\n        cameraL = new THREE.PerspectiveCamera(75, SCREEN_WIDTH / SCREEN_HEIGHT, 1, 1000);\n        cameraL.position.set(0, 0, 70);\n        controls = new THREE.OrbitControls(cameraL);\n        scene.add(cameraL);\n\n        // \u53f3\u5074\u306e\u30ab\u30e1\u30e9\n        cameraR = new THREE.PerspectiveCamera(75, SCREEN_WIDTH / SCREEN_HEIGHT, 1, 1000);\n        cameraR.position.set(45, 5, 0);\n        cameraR.lookAt({x: 0, y: 0, z: 0});\n        scene.add(cameraR);\n\n        light = new THREE.AmbientLight(0xffffff);\n        scene.add(light);\n\n        light2 = new THREE.DirectionalLight(0xffffff, 1);\n        light2.position.set(20, 20, 20);\n        scene.add(light2);\n\n        video = document.getElementById(\"video\");  // \u6307\u5b9aID\u306e\u8981\u7d20\u3092\u53d6\u5f97\n\n        geometry = new THREE.PlaneGeometry(96, 54, 256, 256);\n        texture = new THREE.VideoTexture(video);\n        texture.minFilter = THREE.LinearFilter;\n        texture.magFilter = THREE.LinearFilter;\n        texture.format = THREE.RGBFormat;\n\n        material = new THREE.MeshPhongMaterial({\n            side: THREE.DoubleSide,    // \u4e21\u9762\u306b\u6620\u3059\n            map: texture,              // \u30c6\u30af\u30b9\u30c1\u30e3\n            displacementMap: texture,  // displacement\u306e\u30c6\u30af\u30b9\u30c1\u30e3\n            displacementScale: -12     // displacement\u306e\u5927\u304d\u3055\n        });\n        plane = new THREE.Mesh(geometry, material);\n        plane.geometry.verticesNeedUpdate = true;\n        scene.add(plane);\n\n        renderer = new THREE.WebGLRenderer({antialias: true});\n        renderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);\n        renderer.setClearColor(0xaaaaaa);\n        renderer.autoClear = false;\n        document.getElementById(\"displ\").appendChild(renderer.domElement);\n\n        document.addEventListener('keydown', onKeyDown, false);\n\n        keydown = {};\n\n        function onKeyDown(event) {\n            switch (event.keyCode) {\n                case 87:\n                    /*W*/ video.load();\n                    break;\n                case 83:\n                    /*S*/ video.play();\n                    break;\n                case 88:\n                    /*X*/ video.pause();\n                    break;\n            }\n        }\n        render();\n    }\n\n    function render() {\n        requestAnimationFrame(render);\n        controls.update();\n        plane.geometry.verticesNeedUpdate = true;\n\n        cameraL.aspect = 0.5 * SCREEN_WIDTH / SCREEN_HEIGHT;\n        cameraR.aspect = 0.5 * SCREEN_WIDTH / SCREEN_HEIGHT;\n        cameraL.updateProjectionMatrix();\n        cameraR.updateProjectionMatrix();\n\n        renderer.setViewport(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);\n        renderer.clear();\n\n        renderer.setViewport(1, 1, 0.5 * SCREEN_WIDTH - 2, SCREEN_HEIGHT - 2);\n        renderer.render(scene, cameraL);\n\n        renderer.setViewport(0.5 * SCREEN_WIDTH + 1, 1, 0.5 * SCREEN_WIDTH - 2, SCREEN_HEIGHT - 2);\n        renderer.render(scene, cameraR);\n    }\n    window.onload = initScene;\n\n\n\n\u6700\u5f8c\u306b\n\u3069\u3046\u4f7f\u3046\u304b\u304c\u60a9\u307f\u6240\u3067\u3059\u304c\u3001\u97f3\u697d\u3068\u5408\u308f\u305b\u3066\u3001\u51f9\u51f8\u3092\u51fa\u3057\u305f\u308a\u3057\u305f\u3089\u9762\u767d\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u306a\u3069\u8003\u3048\u3066\u3044\u307e\u3059\u3002\ndisplacement\u3001\u3068\u3066\u3082\u9762\u767d\u3044\u306e\u3067\u307e\u305f\u4f55\u304b\u4f5c\u308a\u305f\u3044\u3082\u306e\u3067\u3059\u3002\n\u3067\u306f\u3001\u6700\u5f8c\u307e\u3067\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\n\u3053\u306e\u8a18\u4e8b\u306f\u3001[Three.js Advent Calendar 2016](http://qiita.com/advent-calendar/2016/threejs) 13\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n***\n\n![SnapCrab1.png](https://qiita-image-store.s3.amazonaws.com/0/150548/40e5e743-0cdd-9771-5cfa-ab15bd91dbe4.png)\n\n\n#displacement\u306b\u89e6\u308c\u305f\u304d\u3063\u304b\u3051\n\u7d75\u306b\u51f9\u51f8\u304c\u3064\u3044\u305f\u308a\u3001\u767d\u3068\u9ed2\u3092\u5224\u5225\u3059\u308b\u3068\u3053\u308d\u304c\u4e0d\u601d\u8b70\u306a\u611f\u3058\u304c\u3057\u3066\u3001\u89e6\u308c\u3066\u307f\u305f\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\u9759\u6b62\u753b\u306b\u3067\u304d\u308b\u306a\u3089\u52d5\u753b\u306b\u3082\u9069\u7528\u3067\u304d\u308b\u304b\u3082\u3001\u3068\u8a66\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u3001\u3046\u307e\u304f\u3044\u304d\u307e\u3057\u305f\u3002\n\n[demo](http://ii9.jp/displacement_qiita/)\n\n#video displacement\u306b\u3064\u3044\u3066\n\u30b3\u30fc\u30c9\u81ea\u4f53\u77ed\u304f\u3001\u30b7\u30f3\u30d7\u30eb\u306a\u306e\u3067\u3001\u8981\u70b9\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u3002\ndemo\u3067\u306f\u3001\u51f9\u51f8\u304c\u898b\u3084\u3059\u3044\u3088\u3046\u306b\u30cb\u753b\u9762\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\u30cb\u753b\u9762\u306e\u3084\u308a\u65b9\u306f[\u3053\u306e\u8a18\u4e8b](http://gupuru.hatenablog.jp/entry/2013/12/23/203045)\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\n\n#video\u306e\u30bd\u30fc\u30b9\n\u307e\u305a\u3001video\u30bf\u30b0\u3092\u66f8\u3044\u3066\n\u30aa\u30fc\u30c8\u30d7\u30ec\u30a4\u3001\u30eb\u30fc\u30d7\u3001\u30a4\u30f3\u30e9\u30a4\u30f3\u3001\u30df\u30e5\u30fc\u30c8\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nios10\u304b\u3089video\u3092\u30a4\u30f3\u30e9\u30a4\u30f3\u3067\u518d\u751f\u53ef\u80fd\u306b\u306a\u3063\u305f\u305f\u3081\u3001\u3053\u306e\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\nios9\u3088\u308a\u4ee5\u524d\u306e\u7aef\u672b\u3067\u306f\u3046\u307e\u304f\u6620\u3089\u306a\u3044\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\n```html\n<video id=\"video\" src=\"01.mp4\" autoplay loop playsinline muted></video>\n```\n\n\u305d\u3057\u3066\u3001javascript\u5074\u3067\n\n```js\nvideo = document.getElementById(\"video\");  // \u6307\u5b9aID\u306e\u8981\u7d20\u3092\u53d6\u5f97\n```\n\n\u8981\u7d20\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```css\n#video { display: none; }\n```\nvideo\u304c\u91cd\u306a\u3063\u3066\u6620\u3063\u3066\u3057\u307e\u3046\u305f\u3081\u3001video\u30bf\u30b0\u306e\u65b9\u3092none\u306b\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3082\u3063\u3068\u826f\u3044\u65b9\u6cd5\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\u30ab\u30e9\u30fc\u3068\u3057\u3066\u6620\u308bvideoTexture\u3068\u51f9\u51f8\u3092\u5224\u5225\u3059\u308bvideoTexture\u3092\u5225\u3005\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n```js\ntexture = new THREE.VideoTexture(video);\n\nmaterial = new THREE.MeshPhongMaterial({\n    side: THREE.DoubleSide,    // \u4e21\u9762\u306b\u6620\u3059\n    map: texture,              // \u30c6\u30af\u30b9\u30c1\u30e3\n    displacementMap: texture,  // displacement\u306e\u30c6\u30af\u30b9\u30c1\u30e3\n    displacementScale: -12     // displacement\u306e\u5927\u304d\u3055\n});\n```\n\n\u5168\u4f53\u306e\u30b3\u30fc\u30c9\u3082\u306e\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n\n```html:index.html\n<!DOCTYPE html>\n\n<html lang=\"ja\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <title>displacement</title>\n    <style>\n        * {\n            overflow: hidden;\n        }\n\n        #displ {\n            margin: 0;\n            padding: 0;\n            border: 0;\n        }\n\n        #button {\n            position: absolute;\n            top: 10px;\n            left: 10px;\n        }\n\n        #video {\n            display: none;\n        }\n    </style>\n    <script src=\"js/three.min.js\"></script>\n    <script src=\"js/OrbitControls.js\"></script>\n    <script src=\"js/main.js\"></script>\n</head>\n\n<body>\n    <div id=\"displ\"></div>\n    <div id=\"button\">\n        <input type=\"button\" value=\"\u306f\u3058\u3081\u304b\u3089\" onclick=\"video.load();\" />\n        <input type=\"button\" value=\"\u518d\u751f\" onclick=\"video.play();\" />\n        <input type=\"button\" value=\"\u4e00\u6642\u505c\u6b62\" onclick=\"video.pause();\" />\n    </div>\n    <video id=\"video\" src=\"001.mp4\" autoplay loop playsinline muted></video>\n</body>\n\n</html>\n```\n\n```js:main.js\n    var initScene, render,\n        renderer, scene, cameraL, cameraR, light, light2, controls,\n        geometry, material, texture, plane;\n    var SCREEN_WIDTH = window.innerWidth,\n        SCREEN_HEIGHT = window.innerHeight;\n\n    function initScene() {\n\n        scene = new THREE.Scene();\n\n        // \u5de6\u5074\u306e\u30ab\u30e1\u30e9\n        cameraL = new THREE.PerspectiveCamera(75, SCREEN_WIDTH / SCREEN_HEIGHT, 1, 1000);\n        cameraL.position.set(0, 0, 70);\n        controls = new THREE.OrbitControls(cameraL);\n        scene.add(cameraL);\n\n        // \u53f3\u5074\u306e\u30ab\u30e1\u30e9\n        cameraR = new THREE.PerspectiveCamera(75, SCREEN_WIDTH / SCREEN_HEIGHT, 1, 1000);\n        cameraR.position.set(45, 5, 0);\n        cameraR.lookAt({x: 0, y: 0, z: 0});\n        scene.add(cameraR);\n\n        light = new THREE.AmbientLight(0xffffff);\n        scene.add(light);\n\n        light2 = new THREE.DirectionalLight(0xffffff, 1);\n        light2.position.set(20, 20, 20);\n        scene.add(light2);\n\n        video = document.getElementById(\"video\");  // \u6307\u5b9aID\u306e\u8981\u7d20\u3092\u53d6\u5f97\n\n        geometry = new THREE.PlaneGeometry(96, 54, 256, 256);\n        texture = new THREE.VideoTexture(video);\n        texture.minFilter = THREE.LinearFilter;\n        texture.magFilter = THREE.LinearFilter;\n        texture.format = THREE.RGBFormat;\n\n        material = new THREE.MeshPhongMaterial({\n            side: THREE.DoubleSide,    // \u4e21\u9762\u306b\u6620\u3059\n            map: texture,              // \u30c6\u30af\u30b9\u30c1\u30e3\n            displacementMap: texture,  // displacement\u306e\u30c6\u30af\u30b9\u30c1\u30e3\n            displacementScale: -12     // displacement\u306e\u5927\u304d\u3055\n        });\n        plane = new THREE.Mesh(geometry, material);\n        plane.geometry.verticesNeedUpdate = true;\n        scene.add(plane);\n\n        renderer = new THREE.WebGLRenderer({antialias: true});\n        renderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);\n        renderer.setClearColor(0xaaaaaa);\n        renderer.autoClear = false;\n        document.getElementById(\"displ\").appendChild(renderer.domElement);\n\n        document.addEventListener('keydown', onKeyDown, false);\n\n        keydown = {};\n\n        function onKeyDown(event) {\n            switch (event.keyCode) {\n                case 87:\n                    /*W*/ video.load();\n                    break;\n                case 83:\n                    /*S*/ video.play();\n                    break;\n                case 88:\n                    /*X*/ video.pause();\n                    break;\n            }\n        }\n        render();\n    }\n\n    function render() {\n        requestAnimationFrame(render);\n        controls.update();\n        plane.geometry.verticesNeedUpdate = true;\n\n        cameraL.aspect = 0.5 * SCREEN_WIDTH / SCREEN_HEIGHT;\n        cameraR.aspect = 0.5 * SCREEN_WIDTH / SCREEN_HEIGHT;\n        cameraL.updateProjectionMatrix();\n        cameraR.updateProjectionMatrix();\n\n        renderer.setViewport(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);\n        renderer.clear();\n\n        renderer.setViewport(1, 1, 0.5 * SCREEN_WIDTH - 2, SCREEN_HEIGHT - 2);\n        renderer.render(scene, cameraL);\n\n        renderer.setViewport(0.5 * SCREEN_WIDTH + 1, 1, 0.5 * SCREEN_WIDTH - 2, SCREEN_HEIGHT - 2);\n        renderer.render(scene, cameraR);\n    }\n    window.onload = initScene;\n```\n\n#\u6700\u5f8c\u306b\n\u3069\u3046\u4f7f\u3046\u304b\u304c\u60a9\u307f\u6240\u3067\u3059\u304c\u3001\u97f3\u697d\u3068\u5408\u308f\u305b\u3066\u3001\u51f9\u51f8\u3092\u51fa\u3057\u305f\u308a\u3057\u305f\u3089\u9762\u767d\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u306a\u3069\u8003\u3048\u3066\u3044\u307e\u3059\u3002\ndisplacement\u3001\u3068\u3066\u3082\u9762\u767d\u3044\u306e\u3067\u307e\u305f\u4f55\u304b\u4f5c\u308a\u305f\u3044\u3082\u306e\u3067\u3059\u3002\n\u3067\u306f\u3001\u6700\u5f8c\u307e\u3067\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\n", "tags": ["three.js", "WebGL"]}