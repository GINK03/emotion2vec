{"context": " More than 1 year has passed since last update.Gruntfile.js \u3092 CoffeeScript \u3067\u66f8\u3044\u3066\u898b\u3084\u3059\u304f\u3059\u308b - Qiita \u304b\u3089 1 \u5e74\u7d4c\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u65b0\u3057\u304f Gruntfile.coffee \u3092\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\u3053\u308c\u3092\u8a2d\u5b9a\u3057\u305f\u4e0a\u3067 grunt \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089\u521d\u56de grunt \u307e\u3067\u30b3\u30de\u30f3\u30c9\u4e00\u767a\u3067\u5b8c\u4e86\u3055\u305b\u308b\u30bf\u30fc\u30df\u30ca\u30eb\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8 - Qiita\u3092\u3084\u308b\u3068\u3001\u30bf\u30fc\u30df\u30ca\u30eb\u4e0a\u3067 grunt.command \u3092\u53e9\u304f\u3060\u3051\u3067\u74b0\u5883\u304c\u6574\u3044\u307e\u3059\u3002\n\n\u5404\u30d5\u30a1\u30a4\u30eb\u3067\u3084\u308a\u305f\u3044\u3053\u3068\n\nSass\n\n.sass -> .css \u3078\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\uff08\u8a72\u5f53\u30d5\u30a1\u30a4\u30eb\u306e\u307f\uff09\n.css \u306e concat\nminify\n\n\nCoffeeScript\n\n.coffee -> .js \u3078\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\nminify\n\n\nSlim\n\nHTML \u3078\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\n\n\nHTML/Python/Ruby/YAML \u306a\u3069\n\n\u6b63\u898f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc\n\n\n\u5171\u901a\u3057\u3066\u3084\u308a\u305f\u3044\u3053\u3068\n\u4e0a\u8a18\u306e\u500b\u5225\u30d5\u30a1\u30a4\u30eb\u51e6\u7406\u5f8c\u306b\u884c\u3044\u307e\u3059\u3002\n\nsftp \u3067\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n\u51e6\u7406\u5b8c\u4e86\u97f3\u3092\u9cf4\u3089\u3059\n\n\nGruntfile.coffee\nmodule.exports = (grunt) ->\n    pkg = grunt.file.readJSON 'package.json'\n    grunt.initConfig\n        compass:\n            dev:\n                options:\n                    config: 'config.rb'\n                    environment: 'development'\n                    force: true\n                    specify: '<%= dir.src %>'\n            prod:\n                options:\n                    config: 'config.rb'\n                    environment: 'production'\n                    force: true\n        coffee:\n            functions:\n                files:\n                    '<%= dir.dest %>': '<%= dir.src %>'\n        slim:\n            main:\n                files:\n                    '<%= dir.dest %>': '<%= dir.src %>'\n        concat:\n            main:\n                files:\n                    'css/styles.css': ['css/reset.css', 'css/fonts.css', 'css/common.css']\n        cssmin:\n            common:\n                files:\n                    'css/styles.min.css': ['css/styles.css']\n            tablet:\n                files:\n                    'css/tablet.min.css': ['css/tablet.css']\n            mobile:\n                files:\n                    'css/mobile.min.css': ['css/mobile.css']\n        uglify:\n            main:\n                files:\n                    '<%= dir.dest_min %>': '<%= dir.files %>'\n        copy:\n            main:\n                src: '<%= dir.src %>'\n                dest: '<%= dir.dest %>'\n        sftp:\n            main:\n                files:\n                    './': '<%= dir.uploads %>'\n                options: fx.setSftp '<%= dir.dir %>'\n        play:\n            main:\n                file: '/System/Library/Sounds/Glass.aiff'\n        esteWatch:\n            options:\n                dirs: ['src/**']\n            '*': (file) ->\n                response = fx.setTask file\n                return unless response\n                grunt.config.set 'dir', response.config\n                response.tasks\n\n    for t of pkg.devDependencies\n        grunt.loadNpmTasks t if t.substring(0, 6) is 'grunt-'\n\n    grunt.registerTask 'w', ['esteWatch']\n\nclass FX\n    constructor: ->\n        @excludes = ['.DS_Store']\n        @src = 'src/'\n        @sftp = {host: host, username: username, password: password, path: path}\n        return\n\n    getTarget: (file) ->\n        files = file.split('/')\n        {file: file, path: files.slice(1, -1).join('/'), name: String(files.slice -1), type: String(file.split('.').slice -1)}\n\n\n    setTask: (file) ->\n        options = @getTarget file\n        return if @excludes.indexOf(options.name) > -1\n\n        response = if @[options.type] then @[options.type] options else @common options\n        response.tasks.push 'play'\n        response\n\n    common: (options) ->\n        dest = options.file.substr(@src.length)\n        {config: {src: options.file, dest: dest, dir: options.path, uploads: [dest]}, tasks: ['copy', 'sftp']}\n\n    slim: (options) ->\n        response = @common options\n        response.config.dest = response.config.dest.replace '.slim', '.html'\n        response.config.uploads = [response.config.dest]\n        response.tasks[0] = 'slim'\n        response\n\n    sass: (options) ->\n        target = options.name.replace '.sass', ''\n        response = {config: {src: [options.file], uploads: []}, tasks: ['compass:dev']}\n        if target is 'tablet' or target is 'mobile'\n            response.config.uploads.push \"css/#{target}.min.css\"\n            response.tasks.push \"cssmin:#{target}\"\n        else if target.charAt(0) is '_'\n            response.config =\n                src: ['src/common.sass', 'src/tablet.sass', 'src/mobile.sass']\n                uploads: ['css/styles.min.css', 'css/tablet.min.css', 'css/mobile.min.css']\n            response.tasks.push 'concat', 'cssmin:common', 'cssmin:tablet', 'cssmin:mobile'\n        else\n            response.config.uploads.push 'css/styles.min.css'\n            response.tasks.push 'concat', 'cssmin:common'\n        response.config.dir = 'css'\n        response.tasks.push 'sftp'\n        response\n\n    coffee: (options) ->\n        response = {config: {src: options.file, dest: options.file.replace(@src, 'js/').replace('.coffee', '.js'), dir: 'js'}, tasks: ['coffee', 'uglify', 'sftp']}\n        response.config.files = [response.config.dest]\n        response.config.dest_min = response.config.dest.replace '.js', '.min.js'\n        response.config.uploads = [response.config.dest_min]\n        response\n\n    setSftp: (dir) ->\n        options = @sftp\n        options.path += dir\n        options.srcBasePath = dir\n        options\n\nfx = new FX()\n\n\n<a href=\"http://qiita.com/wings1685/items/67446d856a10d890c650\" target=\"_blank\" title=\"Gruntfile.js \u3092 CoffeeScript \u3067\u66f8\u3044\u3066\u898b\u3084\u3059\u304f\u3059\u308b - Qiita\">Gruntfile.js \u3092 CoffeeScript \u3067\u66f8\u3044\u3066\u898b\u3084\u3059\u304f\u3059\u308b - Qiita</a> \u304b\u3089 1 \u5e74\u7d4c\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u65b0\u3057\u304f Gruntfile.coffee \u3092\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u3053\u308c\u3092\u8a2d\u5b9a\u3057\u305f\u4e0a\u3067 <a href=\"http://qiita.com/wings1685/items/c03ca0676613826ae274\" target=\"_blank\" title=\"grunt \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089\u521d\u56de grunt \u307e\u3067\u30b3\u30de\u30f3\u30c9\u4e00\u767a\u3067\u5b8c\u4e86\u3055\u305b\u308b\u30bf\u30fc\u30df\u30ca\u30eb\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8 - Qiita\">grunt \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089\u521d\u56de grunt \u307e\u3067\u30b3\u30de\u30f3\u30c9\u4e00\u767a\u3067\u5b8c\u4e86\u3055\u305b\u308b\u30bf\u30fc\u30df\u30ca\u30eb\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8 - Qiita</a>\u3092\u3084\u308b\u3068\u3001\u30bf\u30fc\u30df\u30ca\u30eb\u4e0a\u3067 grunt.command \u3092\u53e9\u304f\u3060\u3051\u3067\u74b0\u5883\u304c\u6574\u3044\u307e\u3059\u3002\n# \u5404\u30d5\u30a1\u30a4\u30eb\u3067\u3084\u308a\u305f\u3044\u3053\u3068\n## Sass\n1. .sass -> .css \u3078\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\uff08\u8a72\u5f53\u30d5\u30a1\u30a4\u30eb\u306e\u307f\uff09\n2. .css \u306e concat\n3. minify\n\n## CoffeeScript\n1. .coffee -> .js \u3078\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\n2. minify\n\n## Slim\n1. HTML \u3078\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\n\n## HTML/Python/Ruby/YAML \u306a\u3069\n1. \u6b63\u898f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u30b3\u30d4\u30fc\n\n# \u5171\u901a\u3057\u3066\u3084\u308a\u305f\u3044\u3053\u3068\n\u4e0a\u8a18\u306e\u500b\u5225\u30d5\u30a1\u30a4\u30eb\u51e6\u7406\u5f8c\u306b\u884c\u3044\u307e\u3059\u3002\n\n1. sftp \u3067\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n2. \u51e6\u7406\u5b8c\u4e86\u97f3\u3092\u9cf4\u3089\u3059\n\n\n```coffeescript:Gruntfile.coffee\nmodule.exports = (grunt) ->\n\tpkg = grunt.file.readJSON 'package.json'\n\tgrunt.initConfig\n\t\tcompass:\n\t\t\tdev:\n\t\t\t\toptions:\n\t\t\t\t\tconfig: 'config.rb'\n\t\t\t\t\tenvironment: 'development'\n\t\t\t\t\tforce: true\n\t\t\t\t\tspecify: '<%= dir.src %>'\n\t\t\tprod:\n\t\t\t\toptions:\n\t\t\t\t\tconfig: 'config.rb'\n\t\t\t\t\tenvironment: 'production'\n\t\t\t\t\tforce: true\n\t\tcoffee:\n\t\t\tfunctions:\n\t\t\t\tfiles:\n\t\t\t\t\t'<%= dir.dest %>': '<%= dir.src %>'\n\t\tslim:\n\t\t\tmain:\n\t\t\t\tfiles:\n\t\t\t\t\t'<%= dir.dest %>': '<%= dir.src %>'\n\t\tconcat:\n\t\t\tmain:\n\t\t\t\tfiles:\n\t\t\t\t\t'css/styles.css': ['css/reset.css', 'css/fonts.css', 'css/common.css']\n\t\tcssmin:\n\t\t\tcommon:\n\t\t\t\tfiles:\n\t\t\t\t\t'css/styles.min.css': ['css/styles.css']\n\t\t\ttablet:\n\t\t\t\tfiles:\n\t\t\t\t\t'css/tablet.min.css': ['css/tablet.css']\n\t\t\tmobile:\n\t\t\t\tfiles:\n\t\t\t\t\t'css/mobile.min.css': ['css/mobile.css']\n\t\tuglify:\n\t\t\tmain:\n\t\t\t\tfiles:\n\t\t\t\t\t'<%= dir.dest_min %>': '<%= dir.files %>'\n\t\tcopy:\n\t\t\tmain:\n\t\t\t\tsrc: '<%= dir.src %>'\n\t\t\t\tdest: '<%= dir.dest %>'\n\t\tsftp:\n\t\t\tmain:\n\t\t\t\tfiles:\n\t\t\t\t\t'./': '<%= dir.uploads %>'\n\t\t\t\toptions: fx.setSftp '<%= dir.dir %>'\n\t\tplay:\n\t\t\tmain:\n\t\t\t\tfile: '/System/Library/Sounds/Glass.aiff'\n\t\testeWatch:\n\t\t\toptions:\n\t\t\t\tdirs: ['src/**']\n\t\t\t'*': (file) ->\n\t\t\t\tresponse = fx.setTask file\n\t\t\t\treturn unless response\n\t\t\t\tgrunt.config.set 'dir', response.config\n\t\t\t\tresponse.tasks\n\n\tfor t of pkg.devDependencies\n\t\tgrunt.loadNpmTasks t if t.substring(0, 6) is 'grunt-'\n\n\tgrunt.registerTask 'w', ['esteWatch']\n\nclass FX\n\tconstructor: ->\n\t\t@excludes = ['.DS_Store']\n\t\t@src = 'src/'\n\t\t@sftp = {host: host, username: username, password: password, path: path}\n\t\treturn\n\n\tgetTarget: (file) ->\n\t\tfiles = file.split('/')\n\t\t{file: file, path: files.slice(1, -1).join('/'), name: String(files.slice -1), type: String(file.split('.').slice -1)}\n\n\n\tsetTask: (file) ->\n\t\toptions = @getTarget file\n\t\treturn if @excludes.indexOf(options.name) > -1\n\n\t\tresponse = if @[options.type] then @[options.type] options else @common options\n\t\tresponse.tasks.push 'play'\n\t\tresponse\n\n\tcommon: (options) ->\n\t\tdest = options.file.substr(@src.length)\n\t\t{config: {src: options.file, dest: dest, dir: options.path, uploads: [dest]}, tasks: ['copy', 'sftp']}\n\n\tslim: (options) ->\n\t\tresponse = @common options\n\t\tresponse.config.dest = response.config.dest.replace '.slim', '.html'\n\t\tresponse.config.uploads = [response.config.dest]\n\t\tresponse.tasks[0] = 'slim'\n\t\tresponse\n\n\tsass: (options) ->\n\t\ttarget = options.name.replace '.sass', ''\n\t\tresponse = {config: {src: [options.file], uploads: []}, tasks: ['compass:dev']}\n\t\tif target is 'tablet' or target is 'mobile'\n\t\t\tresponse.config.uploads.push \"css/#{target}.min.css\"\n\t\t\tresponse.tasks.push \"cssmin:#{target}\"\n\t\telse if target.charAt(0) is '_'\n\t\t\tresponse.config =\n\t\t\t\tsrc: ['src/common.sass', 'src/tablet.sass', 'src/mobile.sass']\n\t\t\t\tuploads: ['css/styles.min.css', 'css/tablet.min.css', 'css/mobile.min.css']\n\t\t\tresponse.tasks.push 'concat', 'cssmin:common', 'cssmin:tablet', 'cssmin:mobile'\n\t\telse\n\t\t\tresponse.config.uploads.push 'css/styles.min.css'\n\t\t\tresponse.tasks.push 'concat', 'cssmin:common'\n\t\tresponse.config.dir = 'css'\n\t\tresponse.tasks.push 'sftp'\n\t\tresponse\n\n\tcoffee: (options) ->\n\t\tresponse = {config: {src: options.file, dest: options.file.replace(@src, 'js/').replace('.coffee', '.js'), dir: 'js'}, tasks: ['coffee', 'uglify', 'sftp']}\n\t\tresponse.config.files = [response.config.dest]\n\t\tresponse.config.dest_min = response.config.dest.replace '.js', '.min.js'\n\t\tresponse.config.uploads = [response.config.dest_min]\n\t\tresponse\n\n\tsetSftp: (dir) ->\n\t\toptions = @sftp\n\t\toptions.path += dir\n\t\toptions.srcBasePath = dir\n\t\toptions\n\nfx = new FX()\n```\n", "tags": ["Sass3.4.6", "Compass1.0.1", "grunt0.4.5", "CoffeeScript1.8.0"]}