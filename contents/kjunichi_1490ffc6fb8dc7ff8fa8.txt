{"context": " More than 1 year has passed since last update.\n\n\u524d\u56de\n\nHeroku\u3067Docker\u3067Trusterd\u3092\u52d5\u304b\u3059\u307e\u3067\u3000\u6e96\u5099\u7de8\u305d\u306e1 - Qiita\n\n\nHeroku\u306e\u4e2d\u3067\u8907\u6570\u306e\u30dd\u30fc\u30c8\u3092\u5f85\u3061\u53d7\u3051\u308b\n\u3053\u308c\u304c\u51fa\u6765\u306a\u3044\u3068\u3001nghttpx\u3067HTTP/1.1\u3067\u53d7\u3051\u3066\u3001HTTP/2\u306b\u3057\u3066\ntrusterd\u306b\u63a5\u7d9a\u3057\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u8fd4\u3059\u3068\u3044\u3046\u4e00\u9023\u306e\u4f01\u307f\u304c\u51fa\u6765\u306a\u3044\u3053\u3068\u306b\u306a\u308b\u3002\n\n\u307e\u305a\u306fSimpleHttpServer\u3067\u8907\u6570Web\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3061\u4e0a\u3052\u5b9f\u9a13\n\nserver.rb\nqueue = %w[\u751f \u9ea6 \u751f \u7c73 \u751f \u5375]\n\nserver = SimpleHttpServer.new(\n  server_ip:     \"0.0.0.0\",\n  port:          ARGV[0] || 3000,\n  document_root: \"./\",\n)\n\nserver.location \"/\" do |r|\n  content = \"\"\n  content << `curl http://127.0.0.1:8000/`\n  server.response_body = \"#{content}\\n\"\n  server.create_response\nend\n\ns2 = SimpleHttpServer.new(\n  server_ip:     \"127.0.0.1\",\n  port:          8000,\n  document_root: \"./\",\n)\n\ns2.location \"/\" do |r|\n  content = \"\"\n  while rand > 0.1 do\n    char = queue.shift\n    content << char\n    queue.push(char)\n  end\n  s2.response_body = \"#{content}\\n\"\n  s2.create_response\nend\n\n#server.run\npid1 = Process.fork() { server.run }\npid2 = Process.fork() { s2.run }\nProcess.waitpid pid1\nProcess.waitpid.pid2\n\n\n\u3046\u3061\u5411\u3051\u306eWeb\u30b5\u30fc\u30d0\u30fc\u306es2\u306b\u5916\u5411\u3051\u306eserver\u304b\u3089curl\u3067\u30a2\u30af\u30bb\u3057\u3066\u7d50\u679c\u3092\u8fd4\u305b\u305f\u3002\n\n\u53c2\u8003\u8a18\u4e8b\n\nTrusterd HTTP/2 Web\u30b5\u30fc\u30d0\u3067\u8907\u6570\u306e\u30b5\u30fc\u30d0\u3092\u7c21\u5358\u306b\u7acb\u3061\u4e0a\u3052\u308b\u65b9\u6cd5 - \u4eba\u9593\u3068\u30a6\u30a7\u30d6\u306e\u672a\u6765\n\n\n\u7d9a\u304d\n\n- Heroku\u3067Docker\u3067Trusterd\u3092\u52d5\u304b\u3059\u307e\u3067\u3000\u6e96\u5099\u7de8\u305d\u306e3 - Qiita\n\n# \u524d\u56de\n\n- [Heroku\u3067Docker\u3067Trusterd\u3092\u52d5\u304b\u3059\u307e\u3067\u3000\u6e96\u5099\u7de8\u305d\u306e1 - Qiita](http://qiita.com/kjunichi/items/63ee6085595b9192e46e)\n\n# Heroku\u306e\u4e2d\u3067\u8907\u6570\u306e\u30dd\u30fc\u30c8\u3092\u5f85\u3061\u53d7\u3051\u308b\n\n\u3053\u308c\u304c\u51fa\u6765\u306a\u3044\u3068\u3001nghttpx\u3067HTTP/1.1\u3067\u53d7\u3051\u3066\u3001HTTP/2\u306b\u3057\u3066\ntrusterd\u306b\u63a5\u7d9a\u3057\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u8fd4\u3059\u3068\u3044\u3046\u4e00\u9023\u306e\u4f01\u307f\u304c\u51fa\u6765\u306a\u3044\u3053\u3068\u306b\u306a\u308b\u3002\n\n# \u307e\u305a\u306fSimpleHttpServer\u3067\u8907\u6570Web\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3061\u4e0a\u3052\u5b9f\u9a13\n\n```rb:server.rb \nqueue = %w[\u751f \u9ea6 \u751f \u7c73 \u751f \u5375]\n\nserver = SimpleHttpServer.new(\n  server_ip:     \"0.0.0.0\",\n  port:          ARGV[0] || 3000,\n  document_root: \"./\",\n)\n\nserver.location \"/\" do |r|\n  content = \"\"\n  content << `curl http://127.0.0.1:8000/`\n  server.response_body = \"#{content}\\n\"\n  server.create_response\nend\n\ns2 = SimpleHttpServer.new(\n  server_ip:     \"127.0.0.1\",\n  port:          8000,\n  document_root: \"./\",\n)\n\ns2.location \"/\" do |r|\n  content = \"\"\n  while rand > 0.1 do\n    char = queue.shift\n    content << char\n    queue.push(char)\n  end\n  s2.response_body = \"#{content}\\n\"\n  s2.create_response\nend\n\n#server.run\npid1 = Process.fork() { server.run }\npid2 = Process.fork() { s2.run }\nProcess.waitpid pid1\nProcess.waitpid.pid2\n```\n\n\u3046\u3061\u5411\u3051\u306eWeb\u30b5\u30fc\u30d0\u30fc\u306es2\u306b\u5916\u5411\u3051\u306eserver\u304b\u3089curl\u3067\u30a2\u30af\u30bb\u3057\u3066\u7d50\u679c\u3092\u8fd4\u305b\u305f\u3002\n\n# \u53c2\u8003\u8a18\u4e8b\n\n- [Trusterd HTTP/2 Web\u30b5\u30fc\u30d0\u3067\u8907\u6570\u306e\u30b5\u30fc\u30d0\u3092\u7c21\u5358\u306b\u7acb\u3061\u4e0a\u3052\u308b\u65b9\u6cd5 - \u4eba\u9593\u3068\u30a6\u30a7\u30d6\u306e\u672a\u6765](http://hb.matsumoto-r.jp/entry/2015/02/05/232454)\n\n# \u7d9a\u304d\n\n- [Heroku\u3067Docker\u3067Trusterd\u3092\u52d5\u304b\u3059\u307e\u3067\u3000\u6e96\u5099\u7de8\u305d\u306e3 - Qiita](http://qiita.com/kjunichi/items/11921600d39c9917bbf8)\n- \n\n", "tags": ["mruby", "Heroku"]}