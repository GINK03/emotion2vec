{"tags": ["CentOS6.5", "CakePHP", "xkhtmltopdf", "vps"], "context": " More than 1 year has passed since last update.CakePHP\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u3068\u304d\u3001PDF\u3092\u51fa\u529b\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3068\u304d\u3001html\u304b\u3089PDF\u3092\u4f5c\u6210\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u300cwkhtmltopdf\u300d\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\nVPS\u306eOS\u3092\u30c1\u30a7\u30c3\u30af\ncat /etc/ \\ls /etc -F | grep \"release|version|version\"``\nOS\u304cLinux\u306e\u30b5\u30fc\u30d0\u30fc\u3067\u3001xkhtmltopdf\u3092\u5229\u7528\u3059\u308b\n\u4ee5\u4e0b\u306eURL\u30da\u30fc\u30b8\u3067\u3001Linux\uff08CentOS6\uff09\u306e64bit\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3068\u4ee5\u4e0b\u304c\u4fdd\u5b58\u3055\u308c\u308b\nhttp://wkhtmltopdf.org/downloads.html\nwkhtmltox-0.12.1_linux-centos6-amd64.rpm\n\u305d\u306e\u5f8c\u3001\u89e3\u51cd\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3001wkhtmltox-0.12.1_linux-centos6-amd64.rpm\u3092\u89e3\u51cd\u3002\n\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u300cwkhtmltopdf\u300d\u3068\u300cwkhtmltoimage\u300d\u3092\u30b5\u30fc\u30d0\u30fc\u306e\u300c/usr/local/bin/\u300d\u76f4\u4e0b\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001\u300c/usr/local/bin/\u300d\u306e\u300cwkhtmltopdf\u300d\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u3092\u5909\u66f4\u3059\u308b\nchmod a+w wkhtmltopdf\n\u89e3\u51cd\u3057\u305f\u4ed6\u306e\u30d5\u30a1\u30a4\u30eb\u3082\u3001\u30b5\u30fc\u30d0\u30fc\u306e\u5404\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u914d\u7f6e\u3059\u308b\n\nusr/local/lib/\n->libwkhtmltox.so.0.12.1\u3001libwkhtmltotox.so.0\u3001libwkhtmltox.so\u3001libwkhtmltox.so.0.12\nusr/local/include/\n->/wkhtmltox/\n->dllend.inc\u3001pdf.h\u3001image.h\u3001dllbegin.inc\nusr/local/share/\n->.fonts\u3001fonts\u3001IPAexfont00201\u3001man\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nsudo yum install libjpeg libpng libXrender libXext fontconfig\n\u53c2\u8003URL\uff1ahttps://github.com/zakird/wkhtmltopdf_binary_gem/issues/19\nbootstrap.php\u306b\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\n\nCache::config('default', array(\n    'engine' => 'File',\n    'mask' => 0666  //\u672c\u756a\u74b0\u5883\u306b\u5408\u308f\u305b\u308b\n));\nCakePlugin::load('CakePdf', array('bootstrap' => true, 'routes' => true));\nConfigure::write('CakePdf', array(\n    'engine' => 'CakePdf.WkHtmlToPdf', // \u4f7f\u7528\u3059\u308bPDF\u30a8\u30f3\u30b8\u30f3\n    'binary' => '/usr/local/bin/wkhtmltopdf', // WkHtmlToPdf\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\n    'options' => array(\n        'print-media-type' => false,\n        'outline' => true,\n        'dpi' => 96\n    ),\n    'margin' => array(\n        'bottom' => 0,\n        'left' => 0,\n        'right' => 0,\n        'top' => 0\n    ),\n    'orientation' => 'landscape', // landscape\uff08\u6a2a\uff09\u6307\u5b9a\u3082\u3067\u304d\u308b\n    'download' => false // \u8868\u793a\u306e\u307f\u304b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u304b\n));\n\nroute.php\u306b\u306f\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3002\n\u3053\u308c\u3067\u3001.pdf\u306e\u62e1\u5f35\u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\n\nRouter::parseExtensions('pdf');\n\n\nPDF\u3092\u51fa\u529b\u3057\u305f\u3044\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u5185\u3067\u3001\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3059\u308b\npublic $components = array('RequestHandler');\n\n\u305d\u3057\u3066\u3001View\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7528\u610f\u3059\u308b\n\nView/\u30e2\u30c7\u30eb\u540d/pdf/view.ctp\nView/Layout/pdf/default.ctp\n\n\u3053\u308c\u3067\u3001http://xxxx.com/controller/view/1.pdf\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001view.ctp\u306b\u5165\u529b\u3057\u305f\u30c7\u30fc\u30bf\u304cPDF\u3068\u3057\u3066\u8868\u793a\u3055\u308c\u308b\u3002\n\n\nCakePHP\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u3068\u304d\u3001PDF\u3092\u51fa\u529b\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3068\u304d\u3001html\u304b\u3089PDF\u3092\u4f5c\u6210\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u300cwkhtmltopdf\u300d\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n- VPS\u306eOS\u3092\u30c1\u30a7\u30c3\u30af\n`cat /etc/ \\`ls /etc -F | grep \"release$\\|version$\"\\``\n\n- OS\u304cLinux\u306e\u30b5\u30fc\u30d0\u30fc\u3067\u3001xkhtmltopdf\u3092\u5229\u7528\u3059\u308b\n\n- \u4ee5\u4e0b\u306eURL\u30da\u30fc\u30b8\u3067\u3001Linux\uff08CentOS6\uff09\u306e64bit\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3068\u4ee5\u4e0b\u304c\u4fdd\u5b58\u3055\u308c\u308b\n\thttp://wkhtmltopdf.org/downloads.html\n\twkhtmltox-0.12.1_linux-centos6-amd64.rpm\n- \u305d\u306e\u5f8c\u3001\u89e3\u51cd\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3001wkhtmltox-0.12.1_linux-centos6-amd64.rpm\u3092\u89e3\u51cd\u3002\n- \u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u300cwkhtmltopdf\u300d\u3068\u300cwkhtmltoimage\u300d\u3092\u30b5\u30fc\u30d0\u30fc\u306e\u300c/usr/local/bin/\u300d\u76f4\u4e0b\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\n- \u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001\u300c/usr/local/bin/\u300d\u306e\u300cwkhtmltopdf\u300d\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u3092\u5909\u66f4\u3059\u308b\n\tchmod a+w wkhtmltopdf\n- \u89e3\u51cd\u3057\u305f\u4ed6\u306e\u30d5\u30a1\u30a4\u30eb\u3082\u3001\u30b5\u30fc\u30d0\u30fc\u306e\u5404\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u914d\u7f6e\u3059\u308b\n\nusr/local/lib/\n->libwkhtmltox.so.0.12.1\u3001libwkhtmltotox.so.0\u3001libwkhtmltox.so\u3001libwkhtmltox.so.0.12\n\nusr/local/include/\n->/wkhtmltox/\n->dllend.inc\u3001pdf.h\u3001image.h\u3001dllbegin.inc\n\nusr/local/share/\n->.fonts\u3001fonts\u3001IPAexfont00201\u3001man\n\n- \u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nsudo yum install libjpeg libpng libXrender libXext fontconfig\n\u53c2\u8003URL\uff1ahttps://github.com/zakird/wkhtmltopdf_binary_gem/issues/19\n\n- bootstrap.php\u306b\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\n\nCache::config('default', array(\n\t'engine' => 'File',\n\t'mask' => 0666\t//\u672c\u756a\u74b0\u5883\u306b\u5408\u308f\u305b\u308b\n));\n\nCakePlugin::load('CakePdf', array('bootstrap' => true, 'routes' => true));\nConfigure::write('CakePdf', array(\n    'engine' => 'CakePdf.WkHtmlToPdf', // \u4f7f\u7528\u3059\u308bPDF\u30a8\u30f3\u30b8\u30f3\n    'binary' => '/usr/local/bin/wkhtmltopdf', // WkHtmlToPdf\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\n    'options' => array(\n        'print-media-type' => false,\n        'outline' => true,\n        'dpi' => 96\n    ),\n    'margin' => array(\n        'bottom' => 0,\n        'left' => 0,\n        'right' => 0,\n        'top' => 0\n    ),\n    'orientation' => 'landscape', // landscape\uff08\u6a2a\uff09\u6307\u5b9a\u3082\u3067\u304d\u308b\n    'download' => false // \u8868\u793a\u306e\u307f\u304b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u304b\n));\n\n- route.php\u306b\u306f\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3002\n\u3053\u308c\u3067\u3001.pdf\u306e\u62e1\u5f35\u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\n\nRouter::parseExtensions('pdf');\n\n- PDF\u3092\u51fa\u529b\u3057\u305f\u3044\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u5185\u3067\u3001\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3059\u308b\n\n\tpublic $components = array('RequestHandler');\n\n- \u305d\u3057\u3066\u3001View\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7528\u610f\u3059\u308b\n\nView/\u30e2\u30c7\u30eb\u540d/pdf/view.ctp\nView/Layout/pdf/default.ctp\n\n- \u3053\u308c\u3067\u3001http://xxxx.com/controller/view/1.pdf\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001view.ctp\u306b\u5165\u529b\u3057\u305f\u30c7\u30fc\u30bf\u304cPDF\u3068\u3057\u3066\u8868\u793a\u3055\u308c\u308b\u3002\n"}