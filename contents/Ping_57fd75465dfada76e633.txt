{"tags": ["UNIX", "Linux", "ShellScript", "Bash"], "context": "\u3000\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u6587\u6cd5\u304c\u30b7\u30f3\u30d7\u30eb\u3067\u899a\u3048\u308b\u3068\u4fbf\u5229\u3002\u4ed6\u306e\u8a00\u8a9e\u3060\u3068\u4f55\u884c\u3082\u304b\u304b\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u30d5\u30a1\u30a4\u30eb\u64cd\u4f5c\u3084\u305d\u306e\u4e2d\u8eab\u306e\u30c7\u30fc\u30bf\u51e6\u7406\u3092\u3001\u3061\u3087\u3061\u3087\u3044\u3068\uff11\u301c\u6570\u884c\u3067\u66f8\u3051\u305f\u308a\u3059\u308b\u3002\u30b3\u30de\u30f3\u30c9\u3068\u306e\u89aa\u548c\u6027\u304c\u9ad8\u3044\u6069\u6075\u3060\u308d\u3046\u3002\n\u4eca\u3067\u3082Bash\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u3061\u3087\u304f\u3061\u3087\u304f\u66f8\u304f\u306e\u3060\u3051\u3069\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4f5c\u6210\u983b\u5ea6\u304c\u4f4e\u3044\u304b\u3089\u304b\u4ed6\u306e\u8a00\u8a9e\u3068\u6587\u6cd5\u304c\u3054\u3063\u3061\u3083\u306b\u306a\u3063\u305f\u308a\u3001\u3082\u3068\u3082\u3068Solaris\u304b\u3089\u5165\u3063\u305fsh\u6d3e\u306a\u306e\u3067\u306e\u3067Bash\u3067\u4f55\u304c\u4f7f\u3048\u308b\u3093\u3060\u3063\u3051\uff1f\u3068\u304b\u3001\u5272\u3068\u5fd8\u308c\u305f\u308a\u899a\u3048\u3066\u306a\u3044\u3082\u306e\u304c\u591a\u304b\u3063\u305f\u308a\u3059\u308b\u3002\n\u306a\u306e\u3067\u3001\u30e1\u30e2\u304c\u3066\u3089\u3001Bash\u306e\u30dd\u30a4\u30f3\u30c8\u3092\u307e\u3068\u3081\u3066\u307f\u305f\u3002\n\u4e3b\u306a\u53c2\u7167\u5148\uff08\u3088\u304f\u304a\u4e16\u8a71\u306b\u306a\u3063\u3066\u3044\u308b\u30da\u30fc\u30b8\uff09\uff1a\n\nUNIX\u306e\u90e8\u5c4b(68user's page) - http://x68000.q-e-d.net/~68user/unix/\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u5165\u9580 - http://www.k4.dion.ne.jp/~mms/unix/shellscript/\nThe Bash Hackers Wiki - http://wiki.bash-hackers.org/start\n\n\n\u8a18\u6cd5\u30fb\u7279\u6b8a\u5909\u6570\n\n\u57fa\u672c\n\n\u305d\u3093\u306a\u9ad8\u7d1a\u306a\u8a00\u8a9e\u4ed5\u69d8\u3058\u3083\u306a\u3044\u3057\u3001\u308f\u308a\u3068\u30c7\u30d0\u30c3\u30b0\u3084\u30c6\u30b9\u30c8\u3082\u3057\u306b\u304f\u3044\u3002\n\n\n\u3067\u3082\u3001\u4ed6\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u8a00\u8a9e\u3060\u3068\u624b\u7d9a\u304d\u304c\u5fc5\u8981\u306a\u51e6\u7406\u3082\u3001\u30b3\u30de\u30f3\u30c9\u6570\u767a\u3067\u3044\u3051\u305f\u308a\u3068\u304b\u9b45\u529b\u3002\n\n\n\u4ed6\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u3042\u308b\u3088\u3046\u306a\u3001\u547d\u4ee4\u5f8c\u306b;\uff08\u30bb\u30df\u30b3\u30ed\u30f3\uff09\u306f\u3044\u3089\u306a\u3044\u3002\u305f\u3060\u3057\u3001\uff11\u884c\u306b\u8907\u6570\u547d\u4ee4\u3092\u5404\u5834\u5408\u306f\u3001\u660e\u793a\u7684\u306b;\u3067\u533a\u5207\u308b\u3053\u3068\u304c\u53ef\u80fd\u3002\n\nif ~ fi \u3068\u304b case ~ esac \u3068\u304b\u3001\u4ed6\u306e\u8a00\u8a9e\u3058\u3083\u898b\u3089\u308c\u306a\u3044\u3088\u3046\u306a\u3001\u30a4\u30ab\u3057\u305f\u6587\u6cd5\u3042\u308a\u307e\u3059\u3002\n\n\n\u30b7\u30a7\u30d0\u30f3\u30b0\n\u3000\u30b9\u30af\u30ea\u30d7\u30c8\u884c\u982d\u306e#!\u3067\u59cb\u307e\u308b\u884c\u3092\u30b7\u30a7\u30d0\u30f3\u30b0\uff08\u30b7\u30a7\u30d0\u30f3\u3001\u30b7\u30d0\u30f3\u3068\u3082\uff09\u3068\u3044\u3044\u3001\u306a\u3093\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u5b9f\u884c\u3059\u3079\u304d\u304b\u3092\u6307\u3057\u793a\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5834\u5408\u306f\u3001\n#!/bin/sh\n\n\u3084\n#!/bin/bash\n\n\u3068\u3044\u3063\u305f\u5f62\u306b\u306a\u308b\u3060\u308d\u3046\u3002\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u306b\u5b9f\u884c\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3057\u3066\u76f4\u63a5\u5b9f\u884c\u3059\u308b\u3068\u3001\u3053\u306e\u30b7\u30a7\u30eb\u306f\u3053\u306e\uff11\u884c\u76ee\u3092\u5224\u65ad\u3057\u3066\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3002\n\u3000Linux\u306a\u3069\u3067\u306fsh\u306fbash\u3078\u306e\u30ea\u30f3\u30af\u3068\u306a\u3063\u3066\u3044\u308b\u3002\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30b7\u30a7\u30d0\u30f3\u30b01\u3067sh\u3092\u6307\u5b9a\u3057\u3066\u3082Bash\u304c\u5b9f\u884c\u3055\u308c\u308b\u306e\u3060\u304c\u3001Bash\u306f\u305d\u306e\u30b7\u30a7\u30d0\u30f3\u30b0\u306e\u5185\u5bb9\u3092\u898b\u3066sh\u3067\u5b9f\u884c\u3055\u308c\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u306f\u3001\u3067\u304d\u308b\u3060\u3051sh\u306e\u52d5\u4f5c\u3092\u771f\u4f3c\u3057\u3088\u3046\u3068\u3059\u308b\u3002\u305d\u306e\u7d50\u679c\u3001Bash\u72ec\u81ea\u306e\u8a18\u6cd5\u304c\u4e00\u90e8\u4f7f\u3048\u306a\u304f\u306a\u308b\u306e\u3067\u3001\u3053\u306e\u70b9\u306f\u6ce8\u610f\u3002\uff08\u3053\u3061\u3089\u306e\u89e3\u8aac\u304c\u53c2\u8003\u306b\u306a\u308b\u3002\uff09\n\nsh\u30b9\u30af\u30ea\u30d7\u30c8\n#!/bin/sh\ngrep 'fuga' < <(cat hoge.txt)    # \u30a8\u30e9\u30fc\u3002sh \u3068\u3057\u3066 <() \u3092\u89e3\u91c8\u3067\u304d\u306a\u3044\u3002\n\n\n\nbash\u30b9\u30af\u30ea\u30d7\u30c8\n#!/bin/bash\ngrep 'fuga' < <(cat hoge.txt)    # OK. Bash\u306e\u69cb\u6587\u3068\u3057\u3066\u89e3\u91c8\u3055\u308c\u308b\u3002\n\n\n\n\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u7d50\u679c\u306e\u7d42\u4e86\u30b3\u30fc\u30c9\n\u3000\u30b7\u30a7\u30eb\u4e0a\u3084\u30b9\u30af\u30ea\u30d7\u30c8\u5b9f\u884c\u6642\u3001\u76f4\u524d\u306e\u30b3\u30de\u30f3\u30c9\u306e\u7d42\u4e86\u30b3\u30fc\u30c9\u306f$?\u306b\u4ee3\u5165\u3055\u308c\u308b\u3002\u7d42\u4e86\u30b3\u30fc\u30c9\u306f0\uff08\u30bc\u30ed\uff09\u306e\u5834\u5408\u306f\u6b63\u5e38\u7d42\u4e86\u3092\u610f\u5473\u3057\u3001\u305d\u308c\u4ee5\u5916\u306f\u30a8\u30e9\u30fc\u3084\u305d\u308c\u306b\u6e96\u305a\u308b\u72b6\u614b\u3067\u3042\u308b2\u3002\n\n\u30bf\u30fc\u30df\u30ca\u30eb\u4e0a\u3067\n$ date\nWed Dec 28 14:37:26 JST 2016\n$ echo $?\n0\n$ hogehoge                             # \u5b58\u5728\u3057\u306a\u3044\u30b3\u30de\u30f3\u30c9\n-bash: hogehoge: command not found\n$ echo $?\n127                                    # bash \u304c\u30bb\u30c3\u30c8\u3057\u305f\u30a8\u30e9\u30fc\u30b3\u30fc\u30c9\n\n\n\u306a\u304a\u3001if\u3084while\u3082\u30010\u3092\u771f\u5024\u3001\u305d\u308c\u4ee5\u5916\u3092\u507d\u5024\u3068\u3057\u305f\u771f\u507d\u5224\u65ad\u3092\u884c\u306a\u3063\u3066\u3044\u308b\u3002\u4e0b\u8a18read\u306e\u8aac\u660e\u306easksure.sh\u30b5\u30f3\u30d7\u30eb\u3092\u53c2\u7167\u3057\u3066\u307b\u3057\u3044\u3002\n\nNOP\n\u3000No OPeration \u306e\u3053\u3068\u3002\u4f55\u3082\u305b\u305a\u306b\u7d42\u4e86\u30b3\u30fc\u30c90\uff08\u6b63\u5e38\u7d42\u4e86\uff09\u3092\u8fd4\u3059\u3002\n\u3000\u4f7f\u3046\u5834\u9762\u306f\u3001\u53ef\u8aad\u6027\u76ee\u7684\u3067case\u6587\u4e2d\u306b\u304a\u3044\u305f\u308a\u3001\u7121\u73fe\u30eb\u30fc\u30d7\u306a\u3069\u3002\n\u3000\u307e\u305f\u3001\u5f15\u6570\u3092\u53d6\u308c\u308b\u306e\u3067\u3001\u672c\u6765\u306e\u30b3\u30de\u30f3\u30c9\u3068\u4e00\u6642\u7684\u306b\u7f6e\u304d\u63db\u3048\u305f\u308a\u3057\u3066\u3001\u30c7\u30d0\u30c3\u30b0\u3084\u4fdd\u5b88\u76ee\u7684\uff08\u66ab\u5b9a\u5bfe\u5fdc\uff09\u306a\u3069\u306b\u4f7f\u3048\u308b\u3002\nif [ \"x$wanna\" = \"xsleep\" ]; then\n    : # sleep 60    # commented out for debug.\nfi\n\n\ntest\u3068\u6f14\u7b97\u5b50\n\u3000\u30b3\u30de\u30f3\u30c9test\u306b\u3064\u3044\u3066\u306e\u8aac\u660e\u306f\u3001\u3053\u3053\uff08UNIX\u306e\u90e8\u5c4b\uff09\u306e\u8aac\u660e\u304c\u5206\u304b\u308a\u3084\u3059\u3044\u3002\n\u3000\u305f\u3060\u3057\u3001\u6f14\u7b97\u5b50\u3084\u30d5\u30a1\u30a4\u30eb\u30c6\u30b9\u30c8\u6f14\u7b97\u5b50\u306e\u8aac\u660e\u3082\u3042\u308b\u304c\u3001\u3053\u308c\u306b\u95a2\u3057\u3066\u306f\u3001\u3053\u3061\u3089\u306e\u30da\u30fc\u30b8\uff08\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u5165\u9580\uff09\u306e\u307b\u3046\u304c\u5206\u304b\u308a\u3084\u3059\u3044\u304b\u3082\u3002\n\u3000\u306a\u304a\u3001\u4f8b\u3048\u3070-e\u306a\u3069\u306f\u3001\u53e4\u3044sh\u3067\u306f\u4f7f\u3048\u306a\u304b\u3063\u305f\u308a\u3059\u308b\u3002\n\n\u6587\u5b57\u5217\u9023\u7d50\u3068\u30af\u30a9\u30fc\u30c8\u30de\u30fc\u30af\n\u3000\u6587\u5b57\u5217\u3092\u9023\u7d50\u3059\u308b\u5834\u5408\u306f\u7279\u306b\u6f14\u7b97\u5b50\u306f\u5fc5\u8981\u306a\u3044\u306e\u3067\u3001\u30b3\u30de\u30f3\u30c9\u5f15\u6570\u306e\u6587\u5b57\u5217\u306e\u4e2d\u306b\u4f55\u304b\u5909\u6570\u306a\u3069\u3092\u57cb\u3081\u8fbc\u307f\u305f\u3044\u5834\u5408\u306f\u3001\u6587\u5b57\u5217\u3092\u4f7f\u3063\u3066\u3044\u308b\u30af\u30a9\u30fc\u30c8\u30de\u30fc\u30af\u3067\u533a\u5207\u3063\u3066\u3001\u305d\u306e\u9593\u306b\u597d\u304d\u306a\u5909\u6570\u3092\u5165\u308c\u308c\u3070\u3088\u3044\u3002\u3053\u306e\u7406\u5c48\u3067\u3001\u30a8\u30b9\u30b1\u30fc\u30d7\u7121\u3057\u3067\u6587\u5b57\u5217\u306e\u4e2d\u306b\u30af\u30a9\u30fc\u30c8\u30de\u30fc\u30af\u3092\u5165\u308c\u308b\u3053\u3068\u3082\u53ef\u80fd\u3068\u306a\u308b\u3002\n$ echo \"hoge\"\"fuga\"\nhogefuga\n$ HOGE='TSUNODA \"'\"STAR\"'\" HIRO'        # TSUNODA \"STAR\" HIRO\n$ FUGA=\"NISHIKINO \"'\"STAR\"'\" AKIRA\"     # NISHIKINO \"STAR\" AKIRA\n$ STAR=\"\u2606\"\n$ perl -e 'print qq(LUCKY '\"'\"$STAR\"'\"' STAR\\n)'\n\n\n\u30d0\u30c3\u30af\u30af\u30a9\u30fc\u30c8\n\u3000\u30d0\u30c3\u30af\u30af\u30a9\u30fc\u30c8\u3092\u4f7f\u3063\u3066\u3001`commnd`\u3067\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u3092\u5909\u6570\u306b\u683c\u7d0d\u3067\u304d\u308b\u3002\u4f1d\u7d71\u7684\u306a` `\u3092\u4f7f\u3063\u305f\u8a18\u6cd5\u3088\u308a\u3082\u6700\u8fd1\u306f$(command) \u3092\u4f7f\u3046\u65b9\u304c\u597d\u307e\u308c\u308b\u3088\u3046\u3060\u3002$()\u306f\u5165\u308c\u5b50\u306b\u3067\u304d\u308b\u3002\n#!/bin/sh\n\nTODAY=`date +'%Y%m%d'`\necho $TODAY\nNOWTIME=$(date +'%H%M%S')\necho $NOWTIME\n\nEXAMPLE=$(expr $(date +%M) + $(date +%S))\necho $EXAMPLE\n\n\n\u5909\u6570\u5c55\u958b\u6642\u306e\u7f6e\u63db\n\u3000Bash\u306e\u4fbf\u5229\u6a5f\u80fd\u3002\u305f\u304f\u3055\u3093\u3042\u308b\u3002\u3053\u3053\u306b\u8a73\u3057\u304f\u66f8\u304b\u308c\u3066\u3044\u308b\u3002\n\nbash\necho $HOGE            # (null)\necho ${HOGE:-hoge}    # hoge    ... just behalf\necho $HOGE            # (null)\n\necho $FUGA            # (null)\necho ${FUGA:=fuga}    # fuga\necho $FUGA            # fuga    ... also substituting value as deafult\n\n\n\nbash\n# change suffix of files\nfor F in *.JPG;do mv $F ${F//.JPG/.jpg};done;\n# cut matched string at head of value\nwhile read URL;do echo ${URL#http://};done < urls.txt\n# cut matched string at foot of value\nfor F in *.tmp;do echo ${F%.tmp};done\n# cut matched string as long as pattern can from head\nmyfilename=${0##*/}    # same as basename\n\n\n\n\u4f4d\u7f6e\u30d1\u30e9\u30e1\u30fc\u30bf\n\u3000\u30b9\u30af\u30ea\u30d7\u30c8\u5b9f\u884c\u6642\u306b\u5f15\u6570\u3068\u3057\u3066\u6e21\u3055\u308c\u305f\u5185\u5bb9\u306f\u3001\u4f4d\u7f6e\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u547c\u3070\u308c\u308b\u7279\u6b8a\u5909\u6570\u306b\u4fdd\u6301\u3055\u308c\u308b\u3002\u3053\u308c\u3089\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u4e2d\u3067\u306f\u3001$1\uff5e$9\u3067\u8868\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u300010\u756a\u76ee\u4ee5\u964d\u306e\u4f4d\u7f6e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u3001${10}\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3059\u308b\u3002\n\u3000\u306a\u304a\u3001\u4f4d\u7f6e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u95a2\u6570\u5185\u3067\u305d\u306e\u95a2\u6570\u3078\u306e\u5f15\u6570\u3092\u5c55\u958b\u3059\u308b\u5834\u5408\u3082\u4f7f\u3048\u308b\u3002\n$ piyopiyo.sh \"hoge\" \"fuga\" 3 4 5 6 7 8 9 ten eleven\n# $1    => hoge\n# ${10} => ten\n\n\n$*, $@, \"$@\" \u306e\u9055\u3044\n\u3000\u4f4d\u7f6e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u96c6\u5408\u7684\u306b\u6271\u3046\u5834\u5408\u306f\u3001$*, $@, \"$@\"\u3092\u5229\u7528\u3059\u308b\u3002\n\u3000\u66f8\u304d\u65b9\u306b\u3088\u3063\u3066\u5c55\u958b\u3055\u308c\u308b\u5185\u5bb9\u304c\u5909\u308f\u3063\u3066\u304f\u308b\u3002\n\nsample.sh\necho '--- $* ---'; for P in $*; do echo $P; done\necho '--- $@ ---'; for P in $@; do echo $P; done        # same as $*\necho '--- \"$@\" ---'; for P in \"$@\"; do echo $P; done\n\n\n$ ./sample.sh \"1 2\" \"hoge fuga\"\n--- $* ---\n1\n2\nhoge\nfuga\n--- $@ ---\n1\n2\nhoge\nfuga\n--- \"$@\" ---\n1 2\nhoge fuga\n\n\ncase\n\u3000;; \u3092\u5fd8\u308c\u304c\u3061\u3063\u3066\u3044\u3046\u306d\uff08; ;\uff09\u3002\n\u3000\u3061\u306a\u307f\u306b\u3001\u3053\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u306f:\u3092\u4f7f\u3063\u3066\u7121\u9650\u30eb\u30fc\u30d7\u3092\u3057\u3066\u3044\u308b\u3002\nwhile :\ndo\n    echo -n \"What'up?) \"\n    read K\n    case $K in\n        x)   echo \"X-(\";;\n        \"q\") echo \"Bye\"             # \"\" \u3067\u6587\u5b57\u5217\u8a55\u4fa1\u3057\u3066\u3082OK\n             break ;;               # \u3053\u306ebreak\u306f\u30eb\u30fc\u30d7\u304b\u3089\u306e\u629c\u3051\u51fa\u3057\n        *shirabero)                 # *,? \u306e\u30e1\u30bf\u6587\u5b57OK\n             echo \"Nothing is there, Boss\";;\n        [yY] | yes | YES )          # \u8ad6\u7406\u548c, [abc][a-z][!0-9] \u3082OK\n             echo \"Yeah!\" ;;\n        [nN] | no | NO )\n             echo \"Oops...\" ;;\n        *)   echo \"What?\";;         # default. \u9806\u756a\u306b\u8a55\u4fa1\u3055\u308c\u308b\u306e\u3067\u6700\u5f8c\u306b.\n    esac\ndone\n\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u30d1\u30bf\u30fc\u30f3\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u81ea\u8eab\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u53d6\u5f97\n\u3000\u3053\u3053\u306e\u89e3\u8aac\u3092\u53c2\u8003\u306b\u3057\u305f\u3002\n\nbash\nSCRIPTDIR=$(cd $(dirname $BASH_SOURCE); pwd)\n\n\n\nexec\u3092\u3064\u304b\u3063\u3066\u6a19\u6e96\u51fa\u529b\u3092\u4e00\u6642\u7684\u306b\u30d5\u30a1\u30a4\u30eb\u306b\u51fa\u529b\u3059\u308b\n\u3000> \u306e\u5411\u304d\u3067\u4e3b\u5ba2\u3092\u53d6\u308a\u9055\u3048\u3066\u3057\u307e\u3046\u306e\u3067\u6ce8\u610f\u304b\u306a\u3002\nexec 3>&1 >$tmpfile    # \u6a19\u6e96\u51fa\u529b(1) \u3092 \u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30b9\u30af\u30ea\u30d7\u30bf3 \u306b\u8907\u88fd\ncat hogehoge.txt       # \u4efb\u610f\u306e\u30b3\u30de\u30f3\u30c9\nexec 1>&3              # \u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30b9\u30af\u30ea\u30d7\u30bf3 \u3092 1 \u306b\u8907\u88fd\uff08\u6a19\u6e96\u51fa\u529b\u30921\u306b\u623b\u3059\uff09\n\n\nset \u306b\u3088\u308b\u30d1\u30e9\u30e1\u30bf\u5206\u5272\n\u3000set\u306f\u3001--\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u4e8b\u3067\u3001\u6587\u5b57\u5217\u3092\u7a7a\u767d\u6587\u5b57\u3067\u5206\u5272\u3057\u3066\u3001\u4f4d\u7f6e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u30bb\u30c3\u30c8\u3067\u304d\u308b\u3002\nset -- $line    # line <= \"hoge fuga\"\n$chunk1=$1      # hoge\n$chunk2=$2      # fuga\n\n\u3000\u306a\u304a\u3001\u5206\u5272\u5bfe\u8c61\u306e\u6587\u5b57\u5217\u4e2d\u306b\u3001Glob\u6587\u5b57\uff08*\uff09\u304c\u3042\u308b\u3068\u3001\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u304c\u5c55\u958b\u3055\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u3053\u308c\u3092\u7121\u52b9\u306b\u3057\u305f\u5834\u5408\u306f\u3001-f \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u308b\u3002\nline='* hoge'\nset -f -- $line\n\n\ngetopts \u306b\u3088\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u30d1\u30e9\u30e1\u30fc\u30bf\u89e3\u6790\nwhile getopts a:h OPT\ndo\n    case $OPT in\n        a) SOMEVAL=$OPTARG           # some command\n            ;;\n        h) help                      # go help subroutine\n            ;;\n        *) help\n            ;;\n    esac\ndone\n\nshift $(( $OPTIND - 1 ))            # <- \u8a18\u8ff0\u3092\u5fd8\u308c\u304c\u3061\uff01\n\n\nread\n\u3000\u30b3\u30e1\u30f3\u30c8\u3088\u308aBuild-in\u306eread\u304c\u8907\u6570\u5909\u6570\u3092\u6307\u5b9a\u3067\u304d\u308b\u3053\u3068\u3092\u6559\u3048\u3066\u3082\u3089\u3063\u305f\u3002\n\u3000read \u306f\u3044\u308d\u3044\u308d\u306a\u30aa\u30d7\u30b7\u30e7\u30f3\u3082\u6307\u5b9a\u3067\u304d\u308b\uff08The read builtin command\uff09\u3002\n\u3000\u30b5\u30f3\u30d7\u30eb\u4e2d\u306e\u30b7\u30a7\u30eb\u5909\u6570IFS\u306f\u3001\u5206\u5272\u5b50\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u3002\ncat somedata.csv | while IFS=',' read p1 p2 p3\ndo\n    if [ \"x$p1\" = \"x1\" ]; then\n        printf \"%d + %d = %d\u00a5n\", $p2, $p3, `expr $p2 '+' $p3`\n    fi\ndone\n\n\u884c\u3092\u307e\u308b\u3063\u3068\u4f7f\u3046\u5834\u5408\u306f\u3001read\u5c02\u7528\u30b7\u30a7\u30eb\u5909\u6570$REPLY\u3092\u4f7f\u3046\u3002\u305f\u3060\u3057\u3001read\u306b\u6307\u5b9a\u3059\u308b\u5909\u6570\u304c\u306a\u3044\u5834\u5408\u306e\u307f\u6709\u52b9\u3002\ncat somedata.txt | while read\ndo\n    set -- $REPLY\n    if [ \"x$1\" = \"xOK\" ]; then echo $REPLY; fi\ndone\n\n\u3000\u306a\u304a\u3001\u30d1\u30a4\u30d7\u7d4c\u7531\u3067while\u3078\u30c7\u30fc\u30bf\u3092\u6e21\u3059\u3088\u3046\u306a\u66f8\u304d\u65b9\u3060\u3068\u3001while\u304c\u30b5\u30d6\u30b7\u30a7\u30eb\u3067\u8d77\u52d5\u3055\u308c\u308b\u305f\u3081\u3001\u305d\u306e\u5916\u5074\u3067\u5b9a\u7fa9\u3057\u305f\u5909\u6570\u306f\u66f4\u65b0\u3055\u308c\u306a\u3044\u3002for\u3084\u5916\u90e8\u30d5\u30a1\u30a4\u30eb\u306e\u5165\u529b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\uff08<\uff09\u3001\u540d\u524d\u4ed8\u304d\u30d1\u30a4\u30d7\u306a\u3069\u3067\u884c\u3046\u3068\u3088\u3044\u3002\uff08\u53c2\u8003\u5143\uff1a\u300cbash \u3067\uff0c\u30b5\u30d6\u30b7\u30a7\u30eb\u304c\u8d77\u52d5\u3055\u308c\u308b\u6761\u4ef6\u300d\uff09\nCOUNT=0\ncat somedata.txt | while read NAME VALUE\ndo\n    [ \"x$NAME\" = \"xHAGE\" ] && COUNT=`expr $COUNT + $VALUE`\ndone\necho \"HAGE TOTAL: $COUNT\"     # 0 \u306e\u307e\u307e\n\n# \u5165\u529b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3092\u4f7f\u3063\u305f\u65b9\u6cd5\nCOUNT=0\nwhile read NAME VALUE\ndo\n    [ \"x$NAME\" = \"xHAGE\" ] && COUNT=`expr $COUNT + $VALUE`\ndone < somedata.txt\n\n\nbash\n# \u540d\u524d\u4ed8\u304d\u30d1\u30a4\u30d7\u3092\u4f7f\u3063\u305f\u65b9\u6cd5\nCOUNT=0\nwhile read NAME VALUE\ndo\n    [ \"x$NAME\" = \"xHAGE\" ] && COUNT=`expr $COUNT + $VALUE`\ndone < <(cat somedata.txt) \n\n\n\u3000\u4e0a\u306eThe read builtin command\u306b\u3042\u3063\u305f\u3001Yes/No\u30a2\u30f3\u30b5\u30fc\u3002\u4fbf\u5229\u305d\u3046\u306a\u306e\u3067\u5f15\u7528\u3002\n\nasksure.sh\nasksure() {\n  echo -n \"Are you sure (Y/N)? \"\n  while read -r -n 1 -s answer; do\n    if [[ $answer = [YyNn] ]]; then\n      [[ $answer = [Yy] ]] && retval=0\n      [[ $answer = [Nn] ]] && retval=1\n      break\n    fi\n  done\n  echo # just a final linefeed, optics...\n  return $retval\n}\n\n### using it\nif asksure; then\n  echo \"Okay, performing rm -rf / then, master....\"\u3000\u3000\u3000\u3000# \u304a\u3044w\nelse\n  echo \"Pfff...\"\nfi\n\n\n\ntrap\n\u3000\u30b7\u30b0\u30ca\u30eb\u3054\u3068\u306b\u8a2d\u5b9a\u53ef\u80fd\u3002\u3068\u3044\u3063\u3066\u3082\u4f7f\u3046\u30b7\u30b0\u30ca\u30eb\u306f\u9650\u3089\u308c\u3066\u3044\u308b\u304b\u3002KILL(9)\u306f\u30ad\u30e3\u30c3\u30c1\u4e0d\u53ef\u3002\n# trap 'command' sing-num \ntrap 'echo \"see you\"' 0           # 0 ... exit\ntrap 'rm -f $tmpfile;exit 1' 2    # 2 ... INT(Ctrl+C)\ntrap 0                            # reset (no command, just 1 arg)\n\n\n\u30b7\u30a7\u30eb\u5909\u6570 $PIPESTATUS\n\u3000\u81ea\u5206\u306f\u3042\u307e\u308a\u4f7f\u308f\u306a\u3044\u306e\u3067\u3001\u8a73\u3057\u304f\u66f8\u3044\u3066\u3044\u308b\u30ea\u30f3\u30af\u3060\u3051\u63b2\u8f09\u3002\n\u30b3\u30de\u30f3\u30c9\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u7d42\u4e86\u30b3\u30fc\u30c9 - \u62e1\u5f35 POSIX \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8 Advent Calendar 2013 - \u30c0\u30e1\u51fa\u3057 Blog\n\n\u95a2\u6570\n\u3000\u95a2\u6570\u306f\u305d\u308c\u3092\u547c\u3076\u5834\u6240\u3088\u308a\u524d\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\n\u95a2\u6570\uff08\u3068\u30ed\u30fc\u30ab\u30eb\u5909\u6570\uff09\nfuncname() {\n    local FUGA\n    set -- $*\n    HOGE=$1\n    FUGA=$2    # FUGA \u306f\u30ed\u30fc\u30ab\u30eb\u5909\u6570\n}\n\n\nreturn\n\u3000\u8fd4\u305b\u308b\u5024\u306f255\u307e\u3067\u3002\uff08\u51e6\u7406\u3055\u308c\u305f\uff09\u5024\u3092\u8fd4\u3059\u3068\u3044\u3046\u3088\u308a\u306f\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u8fd4\u3059\u76ee\u7684\u3067\u4f7f\u3046\u305f\u3081\u3067\u3042\u308b\u3002\nsomefunc() {\n   [ \"x$1\" = \"x0\" ] && return 1       # some script\n}\n\n\neval \u3092\u4f7f\u3063\u3066\u95a2\u6570\u306e\u8fd4\u5024\u3092\u5909\u6570\u306b\u4ee3\u5165\ngetdate() {\n    eval $1=`date '+%Y/%m/%d'`\n}\ngetdate TODAY\necho $TODAY    # ex) 2015/12/25\n\n\n\u30b3\u30de\u30f3\u30c9\n\u3000\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u69cb\u6587\u3067\u306f\u306a\u3044\u3051\u3069\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u5185\u3067\u4f7f\u3046\u3068\u4fbf\u5229\u306a\u30b3\u30de\u30f3\u30c9\u95a2\u9023Tips\u3002\n\ntar \u3068 gzip \u3092\u4f7f\u3063\u305f\u30d1\u30a4\u30d7\u51e6\u7406\u306b\u3088\u308b\u5727\u7e2e\n\u3000gzip \u306f -c \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001\u6a19\u6e96\u5165\u529b\u30fb\u51fa\u529b\u3068\u3067\u5727\u7e2e\u5bfe\u8c61\u30c7\u30fc\u30bf\u306e\u3084\u308a\u53d6\u308a\u3092\u3059\u308b\u3002\n\u3000tar \u306f - \u3067\u3001\u5bfe\u8c61\u3092\u6a19\u6e96\u5165\u529b\u30fb\u51fa\u529b\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n$ # making tarball & gzipping\n$ tar cvf - target_dir | gzip -9c > target_dir.bkup20160704.tar.gz\n$ # ungipping & expand tarball\n$ gunzip -c target_dir.bkup20160704.tar.gz | tar xvf -\n\n\u3000\u3082\u3061\u308d\u3093\u3001Linux\u306a\u3069\u304c\u4f7f\u3063\u3066\u3044\u308bGNU gzip\u306a\u3089\u3001gzip\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001\u6700\u521d\u304b\u3089\u5727\u7e2e\u3055\u308c\u305fTarBall .tgz \u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u308c\u308b\u3002\n\ndate \u30b3\u30de\u30f3\u30c9\u306b\u3088\u308b\u65e5\u4ed8\u306e\u30d1\u30fc\u30b9\ndate --date=\"$somestr\" '+%Y/%m/%d'\n# not only date string but also: today, yesterday, last month, etc.\n\n\ncurl \u306b\u30d1\u30a4\u30d7\u7d4c\u7531\u3067\u30c7\u30fc\u30bf\u3092\u6e21\u3059\ncat text.txt | curl -X POST -d @- http://example.com/boopoo    # -d @- \n\n\n\u6539\u884c\u30b3\u30fc\u30c9\u3092\u6539\u884c\u30b3\u30fc\u30c9\u6587\u5b57\u5217\u306b\n\u306a\u3093\u306e\u3053\u3063\u3061\u3083\u304b\u3082\u3060\u304c\u3001\u6539\u884c\u30b3\u30fc\u30c9\u3092\u00a5n\u3068\u3044\u3046\u6587\u5b57\u5217\u306b\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3002Perl\u3067\u3002\ncat some.txt | perl -pe 's/\\n/%5Cn/'\n\n\n\n\n\n\n\u81ea\u5206\u306f\u300c\u30b7\u30a7\u30d0\u30f3\u30b0\u300d\u3068\u547c\u3076\u6d3e\u3002Wikipedia \u3067\u306f\u300c\u30b7\u30d0\u30f3\u300d\u3067\u66f8\u304b\u308c\u3066\u3044\u308b1\u3002ping\u306e\u8aad\u307f\u65b9\u306e\u6d41\u6d3e\u306b\u4f3c\u3066\u3044\u308b\u306d\u3002\u00a0\u21a9\n\n\n\u305f\u3060\u3001\u30b3\u30de\u30f3\u30c9\u306b\u3088\u3063\u3066\u306f\u3001\u5225\u306a\u3053\u3068\u3092\u610f\u5473\u3059\u308b\u5834\u5408\u304c\u3042\u308b\u3002\u4f8b\u3048\u3070diff\u3067\u306fExit status is 0 if inputs are the same, 1 if different, 2 if trouble.\u3067\u3042\u308b\u3002\u00a0\u21a9\n\n\n\n\u3000\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u6587\u6cd5\u304c\u30b7\u30f3\u30d7\u30eb\u3067\u899a\u3048\u308b\u3068\u4fbf\u5229\u3002\u4ed6\u306e\u8a00\u8a9e\u3060\u3068\u4f55\u884c\u3082\u304b\u304b\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u30d5\u30a1\u30a4\u30eb\u64cd\u4f5c\u3084\u305d\u306e\u4e2d\u8eab\u306e\u30c7\u30fc\u30bf\u51e6\u7406\u3092\u3001\u3061\u3087\u3061\u3087\u3044\u3068\uff11\u301c\u6570\u884c\u3067\u66f8\u3051\u305f\u308a\u3059\u308b\u3002\u30b3\u30de\u30f3\u30c9\u3068\u306e\u89aa\u548c\u6027\u304c\u9ad8\u3044\u6069\u6075\u3060\u308d\u3046\u3002\n\n \u4eca\u3067\u3082Bash\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u3061\u3087\u304f\u3061\u3087\u304f\u66f8\u304f\u306e\u3060\u3051\u3069\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4f5c\u6210\u983b\u5ea6\u304c\u4f4e\u3044\u304b\u3089\u304b\u4ed6\u306e\u8a00\u8a9e\u3068\u6587\u6cd5\u304c\u3054\u3063\u3061\u3083\u306b\u306a\u3063\u305f\u308a\u3001\u3082\u3068\u3082\u3068Solaris\u304b\u3089\u5165\u3063\u305f`sh`\u6d3e\u306a\u306e\u3067\u306e\u3067Bash\u3067\u4f55\u304c\u4f7f\u3048\u308b\u3093\u3060\u3063\u3051\uff1f\u3068\u304b\u3001\u5272\u3068\u5fd8\u308c\u305f\u308a\u899a\u3048\u3066\u306a\u3044\u3082\u306e\u304c\u591a\u304b\u3063\u305f\u308a\u3059\u308b\u3002\n\n \u306a\u306e\u3067\u3001\u30e1\u30e2\u304c\u3066\u3089\u3001Bash\u306e\u30dd\u30a4\u30f3\u30c8\u3092\u307e\u3068\u3081\u3066\u307f\u305f\u3002\n\n*\u4e3b\u306a\u53c2\u7167\u5148\uff08\u3088\u304f\u304a\u4e16\u8a71\u306b\u306a\u3063\u3066\u3044\u308b\u30da\u30fc\u30b8\uff09\uff1a*\n\n - [UNIX\u306e\u90e8\u5c4b(68user's page) - http://x68000.q-e-d.net/~68user/unix/](http://x68000.q-e-d.net/~68user/unix/)\n - [\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u5165\u9580 - http://www.k4.dion.ne.jp/~mms/unix/shellscript/](http://www.k4.dion.ne.jp/~mms/unix/shellscript/index.html)\n - [The Bash Hackers Wiki - http://wiki.bash-hackers.org/start](http://wiki.bash-hackers.org/start)\n\n## \u8a18\u6cd5\u30fb\u7279\u6b8a\u5909\u6570\n\n### \u57fa\u672c\n\n- \u305d\u3093\u306a\u9ad8\u7d1a\u306a\u8a00\u8a9e\u4ed5\u69d8\u3058\u3083\u306a\u3044\u3057\u3001\u308f\u308a\u3068\u30c7\u30d0\u30c3\u30b0\u3084\u30c6\u30b9\u30c8\u3082\u3057\u306b\u304f\u3044\u3002\n    - \u3067\u3082\u3001\u4ed6\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u8a00\u8a9e\u3060\u3068\u624b\u7d9a\u304d\u304c\u5fc5\u8981\u306a\u51e6\u7406\u3082\u3001\u30b3\u30de\u30f3\u30c9\u6570\u767a\u3067\u3044\u3051\u305f\u308a\u3068\u304b\u9b45\u529b\u3002\n- \u4ed6\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u3042\u308b\u3088\u3046\u306a\u3001\u547d\u4ee4\u5f8c\u306b`;`\uff08\u30bb\u30df\u30b3\u30ed\u30f3\uff09\u306f\u3044\u3089\u306a\u3044\u3002\u305f\u3060\u3057\u3001\uff11\u884c\u306b\u8907\u6570\u547d\u4ee4\u3092\u5404\u5834\u5408\u306f\u3001\u660e\u793a\u7684\u306b`;`\u3067\u533a\u5207\u308b\u3053\u3068\u304c\u53ef\u80fd\u3002\n- `if ~ fi` \u3068\u304b `case ~ esac` \u3068\u304b\u3001\u4ed6\u306e\u8a00\u8a9e\u3058\u3083\u898b\u3089\u308c\u306a\u3044\u3088\u3046\u306a\u3001\u30a4\u30ab\u3057\u305f\u6587\u6cd5\u3042\u308a\u307e\u3059\u3002\n\n### \u30b7\u30a7\u30d0\u30f3\u30b0\n\n\u3000\u30b9\u30af\u30ea\u30d7\u30c8\u884c\u982d\u306e`#!`\u3067\u59cb\u307e\u308b\u884c\u3092\u30b7\u30a7\u30d0\u30f3\u30b0\uff08\u30b7\u30a7\u30d0\u30f3\u3001\u30b7\u30d0\u30f3\u3068\u3082\uff09\u3068\u3044\u3044\u3001\u306a\u3093\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u5b9f\u884c\u3059\u3079\u304d\u304b\u3092\u6307\u3057\u793a\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5834\u5408\u306f\u3001\n\n```sh\n#!/bin/sh\n```\n\n\u3084\n\n```bash\n#!/bin/bash\n```\n\u3068\u3044\u3063\u305f\u5f62\u306b\u306a\u308b\u3060\u308d\u3046\u3002\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u306b\u5b9f\u884c\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3057\u3066\u76f4\u63a5\u5b9f\u884c\u3059\u308b\u3068\u3001\u3053\u306e\u30b7\u30a7\u30eb\u306f\u3053\u306e\uff11\u884c\u76ee\u3092\u5224\u65ad\u3057\u3066\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3002\n\n\u3000Linux\u306a\u3069\u3067\u306f`sh`\u306f`bash`\u3078\u306e\u30ea\u30f3\u30af\u3068\u306a\u3063\u3066\u3044\u308b\u3002\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30b7\u30a7\u30d0\u30f3\u30b0[^1]\u3067sh\u3092\u6307\u5b9a\u3057\u3066\u3082Bash\u304c\u5b9f\u884c\u3055\u308c\u308b\u306e\u3060\u304c\u3001Bash\u306f\u305d\u306e\u30b7\u30a7\u30d0\u30f3\u30b0\u306e\u5185\u5bb9\u3092\u898b\u3066`sh`\u3067\u5b9f\u884c\u3055\u308c\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u306f\u3001\u3067\u304d\u308b\u3060\u3051`sh`\u306e\u52d5\u4f5c\u3092\u771f\u4f3c\u3057\u3088\u3046\u3068\u3059\u308b\u3002\u305d\u306e\u7d50\u679c\u3001Bash\u72ec\u81ea\u306e\u8a18\u6cd5\u304c\u4e00\u90e8\u4f7f\u3048\u306a\u304f\u306a\u308b\u306e\u3067\u3001\u3053\u306e\u70b9\u306f\u6ce8\u610f\u3002\uff08[\u3053\u3061\u3089\u306e\u89e3\u8aac](http://sechiro.hatenablog.com/entry/20120806/1344267619 \"\u300c/bin/sh \u3068 /bin/bash \u306e\u9055\u3044\u300d- \u53cc\u516d\u5de5\u5834\u65e5\u8a8c\")\u304c\u53c2\u8003\u306b\u306a\u308b\u3002\uff09\n\n```:sh\u30b9\u30af\u30ea\u30d7\u30c8\n#!/bin/sh\ngrep 'fuga' < <(cat hoge.txt)    # \u30a8\u30e9\u30fc\u3002sh \u3068\u3057\u3066 <() \u3092\u89e3\u91c8\u3067\u304d\u306a\u3044\u3002\n```\n\n```bash:bash\u30b9\u30af\u30ea\u30d7\u30c8\n#!/bin/bash\ngrep 'fuga' < <(cat hoge.txt)    # OK. Bash\u306e\u69cb\u6587\u3068\u3057\u3066\u89e3\u91c8\u3055\u308c\u308b\u3002\n```\n\n[^1]: \u81ea\u5206\u306f\u300c\u30b7\u30a7\u30d0\u30f3\u30b0\u300d\u3068\u547c\u3076\u6d3e\u3002Wikipedia \u3067\u306f\u300c[\u30b7\u30d0\u30f3](https://ja.wikipedia.org/wiki/%E3%82%B7%E3%83%90%E3%83%B3_(Unix) \u30b7\u30d0\u30f3 - Wikipedia)\u300d\u3067\u66f8\u304b\u308c\u3066\u3044\u308b[^1]\u3002`ping`\u306e\u8aad\u307f\u65b9\u306e\u6d41\u6d3e\u306b\u4f3c\u3066\u3044\u308b\u306d\u3002\n\n\n\n### \u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u7d50\u679c\u306e\u7d42\u4e86\u30b3\u30fc\u30c9\n\n\u3000\u30b7\u30a7\u30eb\u4e0a\u3084\u30b9\u30af\u30ea\u30d7\u30c8\u5b9f\u884c\u6642\u3001\u76f4\u524d\u306e\u30b3\u30de\u30f3\u30c9\u306e\u7d42\u4e86\u30b3\u30fc\u30c9\u306f`$?`\u306b\u4ee3\u5165\u3055\u308c\u308b\u3002\u7d42\u4e86\u30b3\u30fc\u30c9\u306f0\uff08\u30bc\u30ed\uff09\u306e\u5834\u5408\u306f\u6b63\u5e38\u7d42\u4e86\u3092\u610f\u5473\u3057\u3001\u305d\u308c\u4ee5\u5916\u306f\u30a8\u30e9\u30fc\u3084\u305d\u308c\u306b\u6e96\u305a\u308b\u72b6\u614b\u3067\u3042\u308b[^2]\u3002\n\n```:\u30bf\u30fc\u30df\u30ca\u30eb\u4e0a\u3067\n$ date\nWed Dec 28 14:37:26 JST 2016\n$ echo $?\n0\n$ hogehoge                             # \u5b58\u5728\u3057\u306a\u3044\u30b3\u30de\u30f3\u30c9\n-bash: hogehoge: command not found\n$ echo $?\n127                                    # bash \u304c\u30bb\u30c3\u30c8\u3057\u305f\u30a8\u30e9\u30fc\u30b3\u30fc\u30c9\n```\n\n\u306a\u304a\u3001`if`\u3084`while`\u3082\u3001`0`\u3092\u771f\u5024\u3001\u305d\u308c\u4ee5\u5916\u3092\u507d\u5024\u3068\u3057\u305f\u771f\u507d\u5224\u65ad\u3092\u884c\u306a\u3063\u3066\u3044\u308b\u3002[\u4e0b\u8a18read\u306e\u8aac\u660e](#read)\u306e`asksure.sh`\u30b5\u30f3\u30d7\u30eb\u3092\u53c2\u7167\u3057\u3066\u307b\u3057\u3044\u3002\n\n[^2]: \u305f\u3060\u3001\u30b3\u30de\u30f3\u30c9\u306b\u3088\u3063\u3066\u306f\u3001\u5225\u306a\u3053\u3068\u3092\u610f\u5473\u3059\u308b\u5834\u5408\u304c\u3042\u308b\u3002\u4f8b\u3048\u3070`diff`\u3067\u306f`Exit status is 0 if inputs are the same, 1 if different, 2 if trouble.`\u3067\u3042\u308b\u3002\n\n### NOP\n\n\u3000No OPeration \u306e\u3053\u3068\u3002\u4f55\u3082\u305b\u305a\u306b\u7d42\u4e86\u30b3\u30fc\u30c90\uff08\u6b63\u5e38\u7d42\u4e86\uff09\u3092\u8fd4\u3059\u3002\n\u3000\u4f7f\u3046\u5834\u9762\u306f\u3001\u53ef\u8aad\u6027\u76ee\u7684\u3067`case`\u6587\u4e2d\u306b\u304a\u3044\u305f\u308a\u3001\u7121\u73fe\u30eb\u30fc\u30d7\u306a\u3069\u3002\n\u3000\u307e\u305f\u3001\u5f15\u6570\u3092\u53d6\u308c\u308b\u306e\u3067\u3001\u672c\u6765\u306e\u30b3\u30de\u30f3\u30c9\u3068\u4e00\u6642\u7684\u306b\u7f6e\u304d\u63db\u3048\u305f\u308a\u3057\u3066\u3001\u30c7\u30d0\u30c3\u30b0\u3084\u4fdd\u5b88\u76ee\u7684\uff08\u66ab\u5b9a\u5bfe\u5fdc\uff09\u306a\u3069\u306b\u4f7f\u3048\u308b\u3002\n\n```\nif [ \"x$wanna\" = \"xsleep\" ]; then\n    : # sleep 60    # commented out for debug.\nfi\n```\n\n### test\u3068\u6f14\u7b97\u5b50\n\n\u3000\u30b3\u30de\u30f3\u30c9`test`\u306b\u3064\u3044\u3066\u306e\u8aac\u660e\u306f\u3001[\u3053\u3053\uff08UNIX\u306e\u90e8\u5c4b\uff09\u306e\u8aac\u660e\u304c\u5206\u304b\u308a\u3084\u3059\u3044](http://x68000.q-e-d.net/~68user/unix/pickup?keyword=test&target=command)\u3002\n\u3000\u305f\u3060\u3057\u3001\u6f14\u7b97\u5b50\u3084\u30d5\u30a1\u30a4\u30eb\u30c6\u30b9\u30c8\u6f14\u7b97\u5b50\u306e\u8aac\u660e\u3082\u3042\u308b\u304c\u3001\u3053\u308c\u306b\u95a2\u3057\u3066\u306f\u3001[\u3053\u3061\u3089\u306e\u30da\u30fc\u30b8\uff08\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u5165\u9580\uff09](http://www.k4.dion.ne.jp/~mms/unix/shellscript/shell_calc.html)\u306e\u307b\u3046\u304c\u5206\u304b\u308a\u3084\u3059\u3044\u304b\u3082\u3002\n\u3000\u306a\u304a\u3001\u4f8b\u3048\u3070`-e`\u306a\u3069\u306f\u3001\u53e4\u3044`sh`\u3067\u306f\u4f7f\u3048\u306a\u304b\u3063\u305f\u308a\u3059\u308b\u3002\n\n\n### \u6587\u5b57\u5217\u9023\u7d50\u3068\u30af\u30a9\u30fc\u30c8\u30de\u30fc\u30af\n\n\u3000\u6587\u5b57\u5217\u3092\u9023\u7d50\u3059\u308b\u5834\u5408\u306f\u7279\u306b\u6f14\u7b97\u5b50\u306f\u5fc5\u8981\u306a\u3044\u306e\u3067\u3001\u30b3\u30de\u30f3\u30c9\u5f15\u6570\u306e\u6587\u5b57\u5217\u306e\u4e2d\u306b\u4f55\u304b\u5909\u6570\u306a\u3069\u3092\u57cb\u3081\u8fbc\u307f\u305f\u3044\u5834\u5408\u306f\u3001\u6587\u5b57\u5217\u3092\u4f7f\u3063\u3066\u3044\u308b\u30af\u30a9\u30fc\u30c8\u30de\u30fc\u30af\u3067\u533a\u5207\u3063\u3066\u3001\u305d\u306e\u9593\u306b\u597d\u304d\u306a\u5909\u6570\u3092\u5165\u308c\u308c\u3070\u3088\u3044\u3002\u3053\u306e\u7406\u5c48\u3067\u3001\u30a8\u30b9\u30b1\u30fc\u30d7\u7121\u3057\u3067\u6587\u5b57\u5217\u306e\u4e2d\u306b\u30af\u30a9\u30fc\u30c8\u30de\u30fc\u30af\u3092\u5165\u308c\u308b\u3053\u3068\u3082\u53ef\u80fd\u3068\u306a\u308b\u3002\n\n```shell-session\n$ echo \"hoge\"\"fuga\"\nhogefuga\n$ HOGE='TSUNODA \"'\"STAR\"'\" HIRO'        # TSUNODA \"STAR\" HIRO\n$ FUGA=\"NISHIKINO \"'\"STAR\"'\" AKIRA\"     # NISHIKINO \"STAR\" AKIRA\n$ STAR=\"\u2606\"\n$ perl -e 'print qq(LUCKY '\"'\"$STAR\"'\"' STAR\\n)'\n```\n\n### \u30d0\u30c3\u30af\u30af\u30a9\u30fc\u30c8\n\n\u3000\u30d0\u30c3\u30af\u30af\u30a9\u30fc\u30c8\u3092\u4f7f\u3063\u3066\u3001`` `commnd` ``\u3067\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u3092\u5909\u6570\u306b\u683c\u7d0d\u3067\u304d\u308b\u3002\u4f1d\u7d71\u7684\u306a`` ` ` ``\u3092\u4f7f\u3063\u305f\u8a18\u6cd5\u3088\u308a\u3082\u6700\u8fd1\u306f`$(command)` \u3092\u4f7f\u3046\u65b9\u304c\u597d\u307e\u308c\u308b\u3088\u3046\u3060\u3002`$()`\u306f\u5165\u308c\u5b50\u306b\u3067\u304d\u308b\u3002\n\n```sh\n#!/bin/sh\n\nTODAY=`date +'%Y%m%d'`\necho $TODAY\nNOWTIME=$(date +'%H%M%S')\necho $NOWTIME\n\nEXAMPLE=$(expr $(date +%M) + $(date +%S))\necho $EXAMPLE\n```\n\n### \u5909\u6570\u5c55\u958b\u6642\u306e\u7f6e\u63db\n\u3000Bash\u306e\u4fbf\u5229\u6a5f\u80fd\u3002\u305f\u304f\u3055\u3093\u3042\u308b\u3002[\u3053\u3053\u306b\u8a73\u3057\u304f\u66f8\u304b\u308c\u3066\u3044\u308b](http://qiita.com/bsdhack/items/597eb7daee4a8b3276ba \"\u30b7\u30a7\u30eb\u306e\u5909\u6570\u5c55\u958b - Qiita\")\u3002\n\n```bash:bash\necho $HOGE            # (null)\necho ${HOGE:-hoge}    # hoge    ... just behalf\necho $HOGE            # (null)\n\necho $FUGA            # (null)\necho ${FUGA:=fuga}    # fuga\necho $FUGA            # fuga    ... also substituting value as deafult\n```\n```bash:bash\n# change suffix of files\nfor F in *.JPG;do mv $F ${F//.JPG/.jpg};done;\n# cut matched string at head of value\nwhile read URL;do echo ${URL#http://};done < urls.txt\n# cut matched string at foot of value\nfor F in *.tmp;do echo ${F%.tmp};done\n# cut matched string as long as pattern can from head\nmyfilename=${0##*/}    # same as basename\n```\n\n### \u4f4d\u7f6e\u30d1\u30e9\u30e1\u30fc\u30bf\n\n\u3000\u30b9\u30af\u30ea\u30d7\u30c8\u5b9f\u884c\u6642\u306b\u5f15\u6570\u3068\u3057\u3066\u6e21\u3055\u308c\u305f\u5185\u5bb9\u306f\u3001\u4f4d\u7f6e\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u547c\u3070\u308c\u308b\u7279\u6b8a\u5909\u6570\u306b\u4fdd\u6301\u3055\u308c\u308b\u3002\u3053\u308c\u3089\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u4e2d\u3067\u306f\u3001`$1`\uff5e`$9`\u3067\u8868\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u300010\u756a\u76ee\u4ee5\u964d\u306e\u4f4d\u7f6e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u3001`${10}`\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3059\u308b\u3002\n\u3000\u306a\u304a\u3001\u4f4d\u7f6e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u95a2\u6570\u5185\u3067\u305d\u306e\u95a2\u6570\u3078\u306e\u5f15\u6570\u3092\u5c55\u958b\u3059\u308b\u5834\u5408\u3082\u4f7f\u3048\u308b\u3002\n\n```shell\n$ piyopiyo.sh \"hoge\" \"fuga\" 3 4 5 6 7 8 9 ten eleven\n# $1    => hoge\n# ${10} => ten\n```\n\n### $*, $@, \"$@\" \u306e\u9055\u3044\n\n\u3000\u4f4d\u7f6e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u96c6\u5408\u7684\u306b\u6271\u3046\u5834\u5408\u306f\u3001`$*`, `$@`, `\"$@\"`\u3092\u5229\u7528\u3059\u308b\u3002\n\u3000\u66f8\u304d\u65b9\u306b\u3088\u3063\u3066\u5c55\u958b\u3055\u308c\u308b\u5185\u5bb9\u304c\u5909\u308f\u3063\u3066\u304f\u308b\u3002\n\n```shell-session:sample.sh\necho '--- $* ---'; for P in $*; do echo $P; done\necho '--- $@ ---'; for P in $@; do echo $P; done        # same as $*\necho '--- \"$@\" ---'; for P in \"$@\"; do echo $P; done\n```\n```\n$ ./sample.sh \"1 2\" \"hoge fuga\"\n--- $* ---\n1\n2\nhoge\nfuga\n--- $@ ---\n1\n2\nhoge\nfuga\n--- \"$@\" ---\n1 2\nhoge fuga\n```\n\n### case\n\n\u3000`;;` \u3092\u5fd8\u308c\u304c\u3061\u3063\u3066\u3044\u3046\u306d\uff08; ;\uff09\u3002\n\u3000\u3061\u306a\u307f\u306b\u3001\u3053\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u306f`:`\u3092\u4f7f\u3063\u3066\u7121\u9650\u30eb\u30fc\u30d7\u3092\u3057\u3066\u3044\u308b\u3002\n\n```shell-session\nwhile :\ndo\n    echo -n \"What'up?) \"\n    read K\n    case $K in\n        x)   echo \"X-(\";;\n        \"q\") echo \"Bye\"             # \"\" \u3067\u6587\u5b57\u5217\u8a55\u4fa1\u3057\u3066\u3082OK\n             break ;;               # \u3053\u306ebreak\u306f\u30eb\u30fc\u30d7\u304b\u3089\u306e\u629c\u3051\u51fa\u3057\n        *shirabero)                 # *,? \u306e\u30e1\u30bf\u6587\u5b57OK\n             echo \"Nothing is there, Boss\";;\n        [yY] | yes | YES )          # \u8ad6\u7406\u548c, [abc][a-z][!0-9] \u3082OK\n             echo \"Yeah!\" ;;\n        [nN] | no | NO )\n             echo \"Oops...\" ;;\n        *)   echo \"What?\";;         # default. \u9806\u756a\u306b\u8a55\u4fa1\u3055\u308c\u308b\u306e\u3067\u6700\u5f8c\u306b.\n    esac\ndone\n```\n\n## \u30d7\u30ed\u30b0\u30e9\u30e0\u30d1\u30bf\u30fc\u30f3\n\n### \u30b9\u30af\u30ea\u30d7\u30c8\u81ea\u8eab\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u53d6\u5f97\n\n\u3000[\u3053\u3053\u306e\u89e3\u8aac](http://qiita.com/yudoufu/items/48cb6fb71e5b498b2532 \"bash/zsh\u3067source\u3055\u308c\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u5185\u3067\u3001\u30d5\u30a1\u30a4\u30eb\u81ea\u8eab\u306e\u7d76\u5bfe\u30d1\u30b9\u3092\u3068\u308b\u30b7\u30f3\u30d7\u30eb\u306a\u8a18\u6cd5 - Qiita\")\u3092\u53c2\u8003\u306b\u3057\u305f\u3002\n\n```bash:bash\nSCRIPTDIR=$(cd $(dirname $BASH_SOURCE); pwd)\n```\n\n### exec\u3092\u3064\u304b\u3063\u3066\u6a19\u6e96\u51fa\u529b\u3092\u4e00\u6642\u7684\u306b\u30d5\u30a1\u30a4\u30eb\u306b\u51fa\u529b\u3059\u308b\n\u3000`>` \u306e\u5411\u304d\u3067\u4e3b\u5ba2\u3092\u53d6\u308a\u9055\u3048\u3066\u3057\u307e\u3046\u306e\u3067\u6ce8\u610f\u304b\u306a\u3002\n\n```shell-session\nexec 3>&1 >$tmpfile    # \u6a19\u6e96\u51fa\u529b(1) \u3092 \u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30b9\u30af\u30ea\u30d7\u30bf3 \u306b\u8907\u88fd\ncat hogehoge.txt       # \u4efb\u610f\u306e\u30b3\u30de\u30f3\u30c9\nexec 1>&3              # \u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30b9\u30af\u30ea\u30d7\u30bf3 \u3092 1 \u306b\u8907\u88fd\uff08\u6a19\u6e96\u51fa\u529b\u30921\u306b\u623b\u3059\uff09\n```\n\n### set \u306b\u3088\u308b\u30d1\u30e9\u30e1\u30bf\u5206\u5272\n\u3000`set`\u306f\u3001`--`\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u4e8b\u3067\u3001\u6587\u5b57\u5217\u3092\u7a7a\u767d\u6587\u5b57\u3067\u5206\u5272\u3057\u3066\u3001\u4f4d\u7f6e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u30bb\u30c3\u30c8\u3067\u304d\u308b\u3002\n\n```shell-session\nset -- $line    # line <= \"hoge fuga\"\n$chunk1=$1      # hoge\n$chunk2=$2      # fuga\n```\n\n\u3000\u306a\u304a\u3001\u5206\u5272\u5bfe\u8c61\u306e\u6587\u5b57\u5217\u4e2d\u306b\u3001Glob\u6587\u5b57\uff08`*`\uff09\u304c\u3042\u308b\u3068\u3001\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u304c\u5c55\u958b\u3055\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u3053\u308c\u3092\u7121\u52b9\u306b\u3057\u305f\u5834\u5408\u306f\u3001`-f` \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u308b\u3002\n\n```shell-session\nline='* hoge'\nset -f -- $line\n```\n\n### getopts \u306b\u3088\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u30d1\u30e9\u30e1\u30fc\u30bf\u89e3\u6790\n\n```shell-session\nwhile getopts a:h OPT\ndo\n    case $OPT in\n        a) SOMEVAL=$OPTARG           # some command\n            ;;\n        h) help                      # go help subroutine\n            ;;\n        *) help\n            ;;\n    esac\ndone\n\nshift $(( $OPTIND - 1 ))            # <- \u8a18\u8ff0\u3092\u5fd8\u308c\u304c\u3061\uff01\n```\n\n### read\n\n\u3000\u30b3\u30e1\u30f3\u30c8\u3088\u308aBuild-in\u306e`read`\u304c\u8907\u6570\u5909\u6570\u3092\u6307\u5b9a\u3067\u304d\u308b\u3053\u3068\u3092\u6559\u3048\u3066\u3082\u3089\u3063\u305f\u3002\n\u3000`read` \u306f\u3044\u308d\u3044\u308d\u306a\u30aa\u30d7\u30b7\u30e7\u30f3\u3082\u6307\u5b9a\u3067\u304d\u308b\uff08[The read builtin command](http://wiki.bash-hackers.org/commands/builtin/read \"The read builtin command - Bash Hackers Wiki\")\uff09\u3002\n\u3000\u30b5\u30f3\u30d7\u30eb\u4e2d\u306e\u30b7\u30a7\u30eb\u5909\u6570`IFS`\u306f\u3001\u5206\u5272\u5b50\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u3002\n\n```\ncat somedata.csv | while IFS=',' read p1 p2 p3\ndo\n    if [ \"x$p1\" = \"x1\" ]; then\n        printf \"%d + %d = %d\u00a5n\", $p2, $p3, `expr $p2 '+' $p3`\n    fi\ndone\n```\n\n\u884c\u3092\u307e\u308b\u3063\u3068\u4f7f\u3046\u5834\u5408\u306f\u3001`read`\u5c02\u7528\u30b7\u30a7\u30eb\u5909\u6570`$REPLY`\u3092\u4f7f\u3046\u3002\u305f\u3060\u3057\u3001`read`\u306b\u6307\u5b9a\u3059\u308b\u5909\u6570\u304c\u306a\u3044\u5834\u5408\u306e\u307f\u6709\u52b9\u3002\n\n```\ncat somedata.txt | while read\ndo\n    set -- $REPLY\n    if [ \"x$1\" = \"xOK\" ]; then echo $REPLY; fi\ndone\n```\n\n\u3000\u306a\u304a\u3001\u30d1\u30a4\u30d7\u7d4c\u7531\u3067`while`\u3078\u30c7\u30fc\u30bf\u3092\u6e21\u3059\u3088\u3046\u306a\u66f8\u304d\u65b9\u3060\u3068\u3001`while`\u304c\u30b5\u30d6\u30b7\u30a7\u30eb\u3067\u8d77\u52d5\u3055\u308c\u308b\u305f\u3081\u3001\u305d\u306e\u5916\u5074\u3067\u5b9a\u7fa9\u3057\u305f\u5909\u6570\u306f\u66f4\u65b0\u3055\u308c\u306a\u3044\u3002`for`\u3084\u5916\u90e8\u30d5\u30a1\u30a4\u30eb\u306e\u5165\u529b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\uff08`<`\uff09\u3001\u540d\u524d\u4ed8\u304d\u30d1\u30a4\u30d7\u306a\u3069\u3067\u884c\u3046\u3068\u3088\u3044\u3002\uff08\u53c2\u8003\u5143\uff1a\u300c[bash \u3067\uff0c\u30b5\u30d6\u30b7\u30a7\u30eb\u304c\u8d77\u52d5\u3055\u308c\u308b\u6761\u4ef6](http://dsas.blog.klab.org/archives/50703133.html)\u300d\uff09\n\n```\nCOUNT=0\ncat somedata.txt | while read NAME VALUE\ndo\n    [ \"x$NAME\" = \"xHAGE\" ] && COUNT=`expr $COUNT + $VALUE`\ndone\necho \"HAGE TOTAL: $COUNT\"     # 0 \u306e\u307e\u307e\n```\n\n```\n# \u5165\u529b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3092\u4f7f\u3063\u305f\u65b9\u6cd5\nCOUNT=0\nwhile read NAME VALUE\ndo\n    [ \"x$NAME\" = \"xHAGE\" ] && COUNT=`expr $COUNT + $VALUE`\ndone < somedata.txt\n```\n\n```bash:bash\n# \u540d\u524d\u4ed8\u304d\u30d1\u30a4\u30d7\u3092\u4f7f\u3063\u305f\u65b9\u6cd5\nCOUNT=0\nwhile read NAME VALUE\ndo\n    [ \"x$NAME\" = \"xHAGE\" ] && COUNT=`expr $COUNT + $VALUE`\ndone < <(cat somedata.txt) \n```\n\n\u3000\u4e0a\u306e[The read builtin command](http://wiki.bash-hackers.org/commands/builtin/read \"The read builtin command - Bash Hackers Wiki\")\u306b\u3042\u3063\u305f\u3001Yes/No\u30a2\u30f3\u30b5\u30fc\u3002\u4fbf\u5229\u305d\u3046\u306a\u306e\u3067\u5f15\u7528\u3002\n\n```bash:asksure.sh\nasksure() {\n  echo -n \"Are you sure (Y/N)? \"\n  while read -r -n 1 -s answer; do\n    if [[ $answer = [YyNn] ]]; then\n      [[ $answer = [Yy] ]] && retval=0\n      [[ $answer = [Nn] ]] && retval=1\n      break\n    fi\n  done\n  echo # just a final linefeed, optics...\n  return $retval\n}\n\n### using it\nif asksure; then\n  echo \"Okay, performing rm -rf / then, master....\"\u3000\u3000\u3000\u3000# \u304a\u3044w\nelse\n  echo \"Pfff...\"\nfi\n```\n\n### trap\n\n\u3000\u30b7\u30b0\u30ca\u30eb\u3054\u3068\u306b\u8a2d\u5b9a\u53ef\u80fd\u3002\u3068\u3044\u3063\u3066\u3082\u4f7f\u3046\u30b7\u30b0\u30ca\u30eb\u306f\u9650\u3089\u308c\u3066\u3044\u308b\u304b\u3002KILL(9)\u306f\u30ad\u30e3\u30c3\u30c1\u4e0d\u53ef\u3002\n\n```\n# trap 'command' sing-num \ntrap 'echo \"see you\"' 0           # 0 ... exit\ntrap 'rm -f $tmpfile;exit 1' 2    # 2 ... INT(Ctrl+C)\ntrap 0                            # reset (no command, just 1 arg)\n```\n\n### \u30b7\u30a7\u30eb\u5909\u6570 $PIPESTATUS\n\u3000\u81ea\u5206\u306f\u3042\u307e\u308a\u4f7f\u308f\u306a\u3044\u306e\u3067\u3001\u8a73\u3057\u304f\u66f8\u3044\u3066\u3044\u308b\u30ea\u30f3\u30af\u3060\u3051\u63b2\u8f09\u3002\n\n[\u30b3\u30de\u30f3\u30c9\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u306e\u7d42\u4e86\u30b3\u30fc\u30c9 - \u62e1\u5f35 POSIX \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8 Advent Calendar 2013 - \u30c0\u30e1\u51fa\u3057 Blog](https://fumiyas.github.io/2013/12/18/pipestatus.sh-advent-calendar.html)\n\n## \u95a2\u6570\n\u3000\u95a2\u6570\u306f\u305d\u308c\u3092\u547c\u3076\u5834\u6240\u3088\u308a\u524d\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\n### \u95a2\u6570\uff08\u3068\u30ed\u30fc\u30ab\u30eb\u5909\u6570\uff09\n```shell-session\nfuncname() {\n    local FUGA\n    set -- $*\n    HOGE=$1\n    FUGA=$2    # FUGA \u306f\u30ed\u30fc\u30ab\u30eb\u5909\u6570\n}\n```\n\n### return\n\u3000\u8fd4\u305b\u308b\u5024\u306f255\u307e\u3067\u3002\uff08\u51e6\u7406\u3055\u308c\u305f\uff09\u5024\u3092\u8fd4\u3059\u3068\u3044\u3046\u3088\u308a\u306f\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u8fd4\u3059\u76ee\u7684\u3067\u4f7f\u3046\u305f\u3081\u3067\u3042\u308b\u3002\n\n```shell-session\nsomefunc() {\n   [ \"x$1\" = \"x0\" ] && return 1       # some script\n}\n```\n\n### eval \u3092\u4f7f\u3063\u3066\u95a2\u6570\u306e\u8fd4\u5024\u3092\u5909\u6570\u306b\u4ee3\u5165\n```shell-session\ngetdate() {\n    eval $1=`date '+%Y/%m/%d'`\n}\ngetdate TODAY\necho $TODAY    # ex) 2015/12/25\n```\n\n## \u30b3\u30de\u30f3\u30c9\n\u3000\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u69cb\u6587\u3067\u306f\u306a\u3044\u3051\u3069\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u5185\u3067\u4f7f\u3046\u3068\u4fbf\u5229\u306a\u30b3\u30de\u30f3\u30c9\u95a2\u9023Tips\u3002\n\n### tar \u3068 gzip \u3092\u4f7f\u3063\u305f\u30d1\u30a4\u30d7\u51e6\u7406\u306b\u3088\u308b\u5727\u7e2e\n\n\u3000`gzip` \u306f `-c` \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001\u6a19\u6e96\u5165\u529b\u30fb\u51fa\u529b\u3068\u3067\u5727\u7e2e\u5bfe\u8c61\u30c7\u30fc\u30bf\u306e\u3084\u308a\u53d6\u308a\u3092\u3059\u308b\u3002\n\u3000`tar` \u306f `-` \u3067\u3001\u5bfe\u8c61\u3092\u6a19\u6e96\u5165\u529b\u30fb\u51fa\u529b\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n```shell-session\n$ # making tarball & gzipping\n$ tar cvf - target_dir | gzip -9c > target_dir.bkup20160704.tar.gz\n$ # ungipping & expand tarball\n$ gunzip -c target_dir.bkup20160704.tar.gz | tar xvf -\n```\n\n\u3000\u3082\u3061\u308d\u3093\u3001Linux\u306a\u3069\u304c\u4f7f\u3063\u3066\u3044\u308bGNU gzip\u306a\u3089\u3001`gzip`\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001\u6700\u521d\u304b\u3089\u5727\u7e2e\u3055\u308c\u305fTarBall `.tgz` \u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u308c\u308b\u3002\n\n### date \u30b3\u30de\u30f3\u30c9\u306b\u3088\u308b\u65e5\u4ed8\u306e\u30d1\u30fc\u30b9\n```shell-session\ndate --date=\"$somestr\" '+%Y/%m/%d'\n# not only date string but also: today, yesterday, last month, etc.\n```\n\n### curl \u306b\u30d1\u30a4\u30d7\u7d4c\u7531\u3067\u30c7\u30fc\u30bf\u3092\u6e21\u3059\n```shell-session\ncat text.txt | curl -X POST -d @- http://example.com/boopoo    # -d @- \n```\n\n### \u6539\u884c\u30b3\u30fc\u30c9\u3092\u6539\u884c\u30b3\u30fc\u30c9\u6587\u5b57\u5217\u306b\n\u306a\u3093\u306e\u3053\u3063\u3061\u3083\u304b\u3082\u3060\u304c\u3001\u6539\u884c\u30b3\u30fc\u30c9\u3092`\u00a5n`\u3068\u3044\u3046\u6587\u5b57\u5217\u306b\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3002Perl\u3067\u3002\n\n```shell-session\ncat some.txt | perl -pe 's/\\n/%5Cn/'\n```\n\n----\n"}