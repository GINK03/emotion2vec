{"tags": ["kubernetes"], "context": " More than 1 year has passed since last update.v0.11.0\u304b\u3089\u5c0e\u5165\u3055\u308c\u305fSecret API\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\u8a66\u3057\u305f\u306e\u306f15/03/08\u6642\u70b9\u306eHEAD\u3067\u3059\u3002\nSecret API\u306f\u540d\u524d\u306e\u901a\u308aSSH\u306e\u79d8\u5bc6\u9375\u3084\u30d1\u30b9\u30ef\u30fc\u30c9\u306a\u3069\u306e\u79d8\u5bc6\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306eAPI\u3067\u3059\u3002\u4e3b\u306a\u76ee\u7684\u306fPod\u304c\u79d8\u5bc6\u30c7\u30fc\u30bf\u3092\u5b89\u5168\u306b\u53d6\u5f97\u3057\u3066\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u3082\u306e\u3067\u3059\u3002Pod(Node)\u306b\u30c7\u30fc\u30bf\u3092\u914d\u5e03\u3059\u308b\u65b9\u6cd5\u306f\u81ea\u7531\u306b\u3067\u304d\u308b\u3088\u3046\u306b\u30d7\u30e9\u30b0\u30a4\u30f3\u5f62\u5f0f\u306b\u306a\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\u73fe\u5728\u306fetcd\u306b\u4fdd\u5b58\u3057\u3066\u53d6\u5f97\u3059\u308b\u3082\u306e\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u8a73\u3057\u3044\u3053\u3068\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u307f\u307e\u3057\u3087\u3046\u3002\u5c0e\u5165\u306e\u7d4c\u7def\u306f\u3053\u306e\u3042\u305f\u308a\u3067\u3059PR4126, PR4514\u3002\n\n\u79d8\u5bc6\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\nSecret API\u306e\u4f7f\u3044\u65b9\u306f\u307e\u3068\u3082\u306a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u307e\u3060\u306a\u3044\u3067\u3059\u304c\u3001\u4e00\u756a\u305d\u308c\u3089\u3057\u3044\u306e\u306fopenshift\u306eexample\u306e\u4e2d\u306b\u3042\u308a\u307e\u3059\u3002\n\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306bkind\u306bSecret\u3092\u6307\u5b9a\u3057\u3066data\u306b\u8907\u6570\u306e\u79d8\u5bc6\u30c7\u30fc\u30bf\u3092\u5165\u308c\u3066\u304a\u304d\u307e\u3059\u3002data\u306evalue\u306b\u306fbase64\u3067\u5165\u308c\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n# secret.yml\napiVersion: v1beta1\nkind: Secret\nid: kubernetes-secret\ndata:\n  foo: _secret-data-1_\n  bar: _secret-data-2_\n\n\u4eca\u56de\u306ffoo\u306e\u30c7\u30fc\u30bf\u3068\u3057\u3066foo-secret\u3001bar\u306e\u30c7\u30fc\u30bf\u3068\u3057\u3066bar-secret\u3092\u5165\u308c\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n$ echo -n foo-secret | base64 --wrap=0\nZm9vLXNlY3JldA==\n$ echo -n bar-secret | base64 --wrap=0\nYmFyLXNlY3JldA==\n\n$ cat secret.yml\napiVersion: v1beta1\nkind: Secret\nid: kubernetes-secret\ndata:\n  foo: Zm9vLXNlY3JldA==\n  bar: YmFyLXNlY3JldA==\n\n\u3042\u3068\u306fkubectl create\u3067\u4f5c\u6210\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n$ kubectl create -f secret.yml\nkubernetes-secret\n\n\u30c7\u30fc\u30bf\u306fetcd\u306b\u5165\u3063\u3066\u3044\u307e\u3059\u3002\u3082\u3061\u308d\u3093\u6697\u53f7\u5316\u306f\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n $ etcdctl --no-sync ls --recursive /registry/secrets/\n/registry/secrets/default\n/registry/secrets/default/kubernetes-secret\n\n$ etcdctl --no-sync get /registry/secrets/default/kubernetes-secret | jq .\n{\n  \"type\": \"Opaque\",\n  \"data\": {\n    \"foo\": \"Zm9vLXNlY3JldA==\",\n    \"bar\": \"YmFyLXNlY3JldA==\"\n  },\n  \"namespace\": \"default\",\n  \"apiVersion\": \"v1beta1\",\n  \"creationTimestamp\": \"2015-03-08T08:26:04Z\",\n  \"uid\": \"c2d4db23-c56c-11e4-8d70-08002763b728\",\n  \"id\": \"kubernetes-secret\",\n  \"kind\": \"Secret\"\n}\n\n\u3042\u3068\u30d8\u30eb\u30d7\u306b\u306f\u51fa\u3066\u3053\u306a\u3044\u3067\u3059\u304c\u5b9f\u306fkubectl\u304b\u3089\u3082\u53c2\u7167\u3067\u304d\u307e\u3059\u3002\u524a\u9664\u3082kubectl delete secrets\u3067\u53ef\u80fd\u3067\u3059\u3002\n$ kubectl get secrets\nNAME                DATA\nkubernetes-secret   2\n\n$ kubectl get secrets kubernetes-secret -o json\n{\n    \"kind\": \"Secret\",\n    \"id\": \"kubernetes-secret\",\n    \"uid\": \"c2d4db23-c56c-11e4-8d70-08002763b728\",\n    \"creationTimestamp\": \"2015-03-08T08:26:04Z\",\n    \"selfLink\": \"/api/v1beta1/secrets/kubernetes-secret?namespace=default\",\n    \"resourceVersion\": 7621,\n    \"apiVersion\": \"v1beta1\",\n    \"namespace\": \"default\",\n    \"data\": {\n        \"bar\": \"YmFyLXNlY3JldA==\",\n        \"foo\": \"Zm9vLXNlY3JldA==\"\n    },\n    \"type\": \"Opaque\"\n}\n\n\nPod\u304b\u3089\u53c2\u7167\u3059\u308b\n\u3061\u306a\u307f\u306b\u4ee5\u4e0b\u306e\u65b9\u6cd5\u3067\u306f\u52d5\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\nPod\u304b\u3089Secret\u3092\u53c2\u7167\u3059\u308b\u65b9\u6cd5\u3082\u3044\u304f\u3064\u304b\u7528\u610f(\u30d7\u30e9\u30b0\u30a4\u30f3)\u3059\u308b\u3088\u3046\u3067\u3059\u304c\u3001\u4eca\u3042\u308b\u306e\u306f\u30dc\u30ea\u30e5\u30fc\u30e0\u3068\u3057\u3066\u30de\u30a6\u30f3\u30c8\u3059\u308b\u65b9\u6cd5\u306e\u307f\u3067\u3059\u3002\nexamples/guestbook/redis-master-controller.json\u3092\u5c11\u3057\u4fee\u6b63\u3057\u3066Secret\u3092\u4f7f\u3046\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\u30dd\u30a4\u30f3\u30c8\u306fcontainer\u304b\u3089\u306f\u5358\u306b\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u306e\u3068\u3001volumes\u306e\u30bd\u30fc\u30b9\u306bsecret\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3059\u3002\n# redis.yml\napiVersion: v1beta1\nkind: ReplicationController\nid: redis-master-controller\ndesiredState:\n  replicas: 1\n  replicaSelector:\n    name: redis-master\n  podTemplate:\n    desiredState:\n      manifest:\n        version: v1beta1\n        id: redis-master\n        containers:\n          - name: redis-master\n            image: dockerfile/redis\n            ports:\n              - containerPort: 6379\n            volumeMounts:\n              - mountPath: /etc/secret-volume\n                name: secret-volume\n                readOnly: true\n        volumes:\n          - name: secret-volume\n            source:\n              secret:\n                target:\n                  kind: Secret\n                  name: kubernetes-secret\n                  namespace: default\n    labels:\n      name: redis-master\n      app: redis\nlabels:\n  name: redis-master\n\n$ kubectl create -f sample/redis.yml\nredis-master-controller\n\n$ kubectl get po\nPOD                             IP                  CONTAINER(S)        IMAGE(S)            HOST                        LABELS                        STATUS              CREATED\nredis-master-controller-i7hvs   10.244.87.6         redis-master        dockerfile/redis    172.17.8.103/172.17.8.103   app=redis,name=redis-master   Running             6 seconds\n\n172.17.8.103\u306fnode-02\u306a\u306e\u3067docker container\u306b\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3057\u3066\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ ssh node-02 'docker ps'\nCONTAINER ID        IMAGE                     COMMAND                CREATED             STATUS              PORTS                              NAMES\nb7f255ec5f83        dockerfile/redis:latest   \"redis-server /etc/r   48 seconds ago      Up 47 seconds                                          k8s_redis-master.810715e9_redis-master-controller-i7hvs.default.api_6abb1233-c56e-11e4-8d70-08002763b728_1cfff4fb   \n3d00a7472b66        kubernetes/pause:go       \"/pause\"               48 seconds ago      Up 47 seconds                                          k8s_POD.5efe987_redis-master-controller-i7hvs.default.api_6abb1233-c56e-11e4-8d70-08002763b728_709dd17a             \n1d0c5a165143        google/cadvisor:0.10.1    \"/usr/bin/cadvisor -   2 hours ago         Up 2 hours          8080/tcp, 0.0.0.0:4194->4194/tcp   cadvisor                             \n\n## inspect\u3067\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\n$ ssh node-02 'docker inspect b7f255ec5f83' | jq '.[].Volumes'\n{\n  \"/etc/secret-volume\": \"/var/lib/kubelet/pods/6abb1233-c56e-11e4-8d70-08002763b728/volumes/kubernetes.io~empty-dir/secret-volume\",\n  \"/dev/termination-log\": \"/var/lib/kubelet/pods/6abb1233-c56e-11e4-8d70-08002763b728/containers/redis-master/b7f255ec5f83c777472a589b6ff899f91b2210f509bea1eca35cebb82e93ac92\",\n  \"/data\": \"/var/lib/docker/vfs/dir/e1c55258f2e650ed631801a9ed1161f9065f12ebac726b4349e3894fd33d37bf\"\n}\n\n## exec\u3067\u30de\u30a6\u30f3\u30c8\u306e\u4e2d\u8eab\u3092\u898b\u308b\n$ ssh node-02 'docker exec b7f255ec5f83 ls -al /etc/secret-volume'\ntotal 8\ndrwxr-x--- 2 root root 4096 Mar  7 16:10 .\ndrwxr-xr-x 1 root root 4096 Mar  7 16:10 ..\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u30de\u30a6\u30f3\u30c8\u306f\u3067\u304d\u305f\u3051\u3069\u3001Secret\u306f\u3046\u307e\u304f\u3068\u308c\u306a\u304b\u3063\u305f\u3067\u3059\u3002\u539f\u56e0\u307e\u3067\u306f\u4eca\u56de\u306f\u8abf\u3079\u3066\u3044\u307e\u305b\u3093\u3002\u3067\u304d\u3066\u3044\u308c\u3070\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066Secret\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u306f\u305d\u308c\u3092\u81ea\u5206\u3067\u8aad\u3093\u3067\u4f7f\u3046\u3068\u3044\u3046\u30b9\u30bf\u30a4\u30eb\u306b\u306a\u308a\u307e\u3059\u3002\n\u81ea\u5206\u3067\u6d88\u5316\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u74b0\u5883\u5909\u6570\u3068\u3057\u3066export\u3059\u308b\u6a5f\u80fd\u3082\u8ffd\u52a0\u3055\u308c\u308b\u4e88\u5b9a\u3067\u3059(PR4710)\u3002\n15/03/21\u8ffd\u8a18\n\u518d\u5ea6\u6700\u65b0\u7248\u3067\u78ba\u8a8d\u3057\u305f\u3068\u3053\u308d\u7121\u4e8b\u79d8\u5bc6\u30c7\u30fc\u30bf\u304c\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n$ ssh node-01 'docker exec 7d5aa958003f ls -al /etc/secret-volume' \ntotal 12\ndrwxrwxrwt 2 root root   80 Mar 21 10:33 .\ndrwxr-xr-x 1 root root 4096 Mar 21 10:33 ..\n-rwxr-xr-x 1 root root   10 Mar 21 10:34 bar\n-rwxr-xr-x 1 root root   10 Mar 21 10:34 foo\n\n$ ssh node-01 'docker exec 7d5aa958003f cat /etc/secret-volume/bar'\nbar-secret\n$ ssh node-01 'docker exec 7d5aa958003f cat /etc/secret-volume/foo'\nfoo-secret\n\nv0.11.0\u304b\u3089\u5c0e\u5165\u3055\u308c\u305fSecret API\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\u8a66\u3057\u305f\u306e\u306f15/03/08\u6642\u70b9\u306eHEAD\u3067\u3059\u3002\n\nSecret API\u306f\u540d\u524d\u306e\u901a\u308aSSH\u306e\u79d8\u5bc6\u9375\u3084\u30d1\u30b9\u30ef\u30fc\u30c9\u306a\u3069\u306e\u79d8\u5bc6\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306eAPI\u3067\u3059\u3002\u4e3b\u306a\u76ee\u7684\u306fPod\u304c\u79d8\u5bc6\u30c7\u30fc\u30bf\u3092\u5b89\u5168\u306b\u53d6\u5f97\u3057\u3066\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u3082\u306e\u3067\u3059\u3002Pod(Node)\u306b\u30c7\u30fc\u30bf\u3092\u914d\u5e03\u3059\u308b\u65b9\u6cd5\u306f\u81ea\u7531\u306b\u3067\u304d\u308b\u3088\u3046\u306b\u30d7\u30e9\u30b0\u30a4\u30f3\u5f62\u5f0f\u306b\u306a\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\u73fe\u5728\u306fetcd\u306b\u4fdd\u5b58\u3057\u3066\u53d6\u5f97\u3059\u308b\u3082\u306e\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u8a73\u3057\u3044\u3053\u3068\u306f[\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://github.com/GoogleCloudPlatform/kubernetes/blob/master/docs/design/secrets.md)\u3092\u8aad\u307f\u307e\u3057\u3087\u3046\u3002\u5c0e\u5165\u306e\u7d4c\u7def\u306f\u3053\u306e\u3042\u305f\u308a\u3067\u3059[PR4126](https://github.com/GoogleCloudPlatform/kubernetes/pull/4126), [PR4514](https://github.com/GoogleCloudPlatform/kubernetes/pull/4514)\u3002\n\n### \u79d8\u5bc6\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\n\nSecret API\u306e\u4f7f\u3044\u65b9\u306f\u307e\u3068\u3082\u306a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u307e\u3060\u306a\u3044\u3067\u3059\u304c\u3001\u4e00\u756a\u305d\u308c\u3089\u3057\u3044\u306e\u306fopenshift\u306e[example](https://github.com/GoogleCloudPlatform/kubernetes/tree/master/examples/openshift-origin)\u306e\u4e2d\u306b\u3042\u308a\u307e\u3059\u3002\n\n\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306bkind\u306b`Secret`\u3092\u6307\u5b9a\u3057\u3066data\u306b\u8907\u6570\u306e\u79d8\u5bc6\u30c7\u30fc\u30bf\u3092\u5165\u308c\u3066\u304a\u304d\u307e\u3059\u3002data\u306evalue\u306b\u306f**base64**\u3067\u5165\u308c\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```yaml\n# secret.yml\napiVersion: v1beta1\nkind: Secret\nid: kubernetes-secret\ndata:\n  foo: _secret-data-1_\n  bar: _secret-data-2_\n```\n\n\u4eca\u56de\u306ffoo\u306e\u30c7\u30fc\u30bf\u3068\u3057\u3066`foo-secret`\u3001bar\u306e\u30c7\u30fc\u30bf\u3068\u3057\u3066`bar-secret`\u3092\u5165\u308c\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n```\n$ echo -n foo-secret | base64 --wrap=0\nZm9vLXNlY3JldA==\n$ echo -n bar-secret | base64 --wrap=0\nYmFyLXNlY3JldA==\n\n$ cat secret.yml\napiVersion: v1beta1\nkind: Secret\nid: kubernetes-secret\ndata:\n  foo: Zm9vLXNlY3JldA==\n  bar: YmFyLXNlY3JldA==\n```\n\n\u3042\u3068\u306f`kubectl create`\u3067\u4f5c\u6210\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n\n```\n$ kubectl create -f secret.yml\nkubernetes-secret\n```\n\n\u30c7\u30fc\u30bf\u306fetcd\u306b\u5165\u3063\u3066\u3044\u307e\u3059\u3002\u3082\u3061\u308d\u3093**\u6697\u53f7\u5316\u306f\u3055\u308c\u3066\u3044\u307e\u305b\u3093**\u3002\n\n```\n $ etcdctl --no-sync ls --recursive /registry/secrets/\n/registry/secrets/default\n/registry/secrets/default/kubernetes-secret\n\n$ etcdctl --no-sync get /registry/secrets/default/kubernetes-secret | jq .\n{\n  \"type\": \"Opaque\",\n  \"data\": {\n    \"foo\": \"Zm9vLXNlY3JldA==\",\n    \"bar\": \"YmFyLXNlY3JldA==\"\n  },\n  \"namespace\": \"default\",\n  \"apiVersion\": \"v1beta1\",\n  \"creationTimestamp\": \"2015-03-08T08:26:04Z\",\n  \"uid\": \"c2d4db23-c56c-11e4-8d70-08002763b728\",\n  \"id\": \"kubernetes-secret\",\n  \"kind\": \"Secret\"\n}\n```\n\n\u3042\u3068\u30d8\u30eb\u30d7\u306b\u306f\u51fa\u3066\u3053\u306a\u3044\u3067\u3059\u304c\u5b9f\u306fkubectl\u304b\u3089\u3082\u53c2\u7167\u3067\u304d\u307e\u3059\u3002\u524a\u9664\u3082`kubectl delete secrets`\u3067\u53ef\u80fd\u3067\u3059\u3002\n\n```\n$ kubectl get secrets\nNAME                DATA\nkubernetes-secret   2\n\n$ kubectl get secrets kubernetes-secret -o json\n{\n    \"kind\": \"Secret\",\n    \"id\": \"kubernetes-secret\",\n    \"uid\": \"c2d4db23-c56c-11e4-8d70-08002763b728\",\n    \"creationTimestamp\": \"2015-03-08T08:26:04Z\",\n    \"selfLink\": \"/api/v1beta1/secrets/kubernetes-secret?namespace=default\",\n    \"resourceVersion\": 7621,\n    \"apiVersion\": \"v1beta1\",\n    \"namespace\": \"default\",\n    \"data\": {\n        \"bar\": \"YmFyLXNlY3JldA==\",\n        \"foo\": \"Zm9vLXNlY3JldA==\"\n    },\n    \"type\": \"Opaque\"\n}\n```\n\n### Pod\u304b\u3089\u53c2\u7167\u3059\u308b\n\n_\u3061\u306a\u307f\u306b\u4ee5\u4e0b\u306e\u65b9\u6cd5\u3067\u306f\u52d5\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002_\n\nPod\u304b\u3089Secret\u3092\u53c2\u7167\u3059\u308b\u65b9\u6cd5\u3082\u3044\u304f\u3064\u304b\u7528\u610f(\u30d7\u30e9\u30b0\u30a4\u30f3)\u3059\u308b\u3088\u3046\u3067\u3059\u304c\u3001\u4eca\u3042\u308b\u306e\u306f\u30dc\u30ea\u30e5\u30fc\u30e0\u3068\u3057\u3066\u30de\u30a6\u30f3\u30c8\u3059\u308b\u65b9\u6cd5\u306e\u307f\u3067\u3059\u3002\n\n`examples/guestbook/redis-master-controller.json`\u3092\u5c11\u3057\u4fee\u6b63\u3057\u3066Secret\u3092\u4f7f\u3046\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\u30dd\u30a4\u30f3\u30c8\u306fcontainer\u304b\u3089\u306f\u5358\u306b\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u306e\u3068\u3001volumes\u306e\u30bd\u30fc\u30b9\u306b`secret`\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3059\u3002\n\n```yaml\n# redis.yml\napiVersion: v1beta1\nkind: ReplicationController\nid: redis-master-controller\ndesiredState:\n  replicas: 1\n  replicaSelector:\n    name: redis-master\n  podTemplate:\n    desiredState:\n      manifest:\n        version: v1beta1\n        id: redis-master\n        containers:\n          - name: redis-master\n            image: dockerfile/redis\n            ports:\n              - containerPort: 6379\n            volumeMounts:\n              - mountPath: /etc/secret-volume\n                name: secret-volume\n                readOnly: true\n        volumes:\n          - name: secret-volume\n            source:\n              secret:\n                target:\n                  kind: Secret\n                  name: kubernetes-secret\n                  namespace: default\n    labels:\n      name: redis-master\n      app: redis\nlabels:\n  name: redis-master\n```\n\n```\n$ kubectl create -f sample/redis.yml\nredis-master-controller\n\n$ kubectl get po\nPOD                             IP                  CONTAINER(S)        IMAGE(S)            HOST                        LABELS                        STATUS              CREATED\nredis-master-controller-i7hvs   10.244.87.6         redis-master        dockerfile/redis    172.17.8.103/172.17.8.103   app=redis,name=redis-master   Running             6 seconds\n```\n\n`172.17.8.103`\u306f`node-02`\u306a\u306e\u3067docker container\u306b\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3057\u3066\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n$ ssh node-02 'docker ps'\nCONTAINER ID        IMAGE                     COMMAND                CREATED             STATUS              PORTS                              NAMES\nb7f255ec5f83        dockerfile/redis:latest   \"redis-server /etc/r   48 seconds ago      Up 47 seconds                                          k8s_redis-master.810715e9_redis-master-controller-i7hvs.default.api_6abb1233-c56e-11e4-8d70-08002763b728_1cfff4fb   \n3d00a7472b66        kubernetes/pause:go       \"/pause\"               48 seconds ago      Up 47 seconds                                          k8s_POD.5efe987_redis-master-controller-i7hvs.default.api_6abb1233-c56e-11e4-8d70-08002763b728_709dd17a             \n1d0c5a165143        google/cadvisor:0.10.1    \"/usr/bin/cadvisor -   2 hours ago         Up 2 hours          8080/tcp, 0.0.0.0:4194->4194/tcp   cadvisor                             \n\n## inspect\u3067\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\n$ ssh node-02 'docker inspect b7f255ec5f83' | jq '.[].Volumes'\n{\n  \"/etc/secret-volume\": \"/var/lib/kubelet/pods/6abb1233-c56e-11e4-8d70-08002763b728/volumes/kubernetes.io~empty-dir/secret-volume\",\n  \"/dev/termination-log\": \"/var/lib/kubelet/pods/6abb1233-c56e-11e4-8d70-08002763b728/containers/redis-master/b7f255ec5f83c777472a589b6ff899f91b2210f509bea1eca35cebb82e93ac92\",\n  \"/data\": \"/var/lib/docker/vfs/dir/e1c55258f2e650ed631801a9ed1161f9065f12ebac726b4349e3894fd33d37bf\"\n}\n\n## exec\u3067\u30de\u30a6\u30f3\u30c8\u306e\u4e2d\u8eab\u3092\u898b\u308b\n$ ssh node-02 'docker exec b7f255ec5f83 ls -al /etc/secret-volume'\ntotal 8\ndrwxr-x--- 2 root root 4096 Mar  7 16:10 .\ndrwxr-xr-x 1 root root 4096 Mar  7 16:10 ..\n```\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u30de\u30a6\u30f3\u30c8\u306f\u3067\u304d\u305f\u3051\u3069\u3001Secret\u306f\u3046\u307e\u304f\u3068\u308c\u306a\u304b\u3063\u305f\u3067\u3059\u3002\u539f\u56e0\u307e\u3067\u306f\u4eca\u56de\u306f\u8abf\u3079\u3066\u3044\u307e\u305b\u3093\u3002\u3067\u304d\u3066\u3044\u308c\u3070\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066Secret\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u306f\u305d\u308c\u3092\u81ea\u5206\u3067\u8aad\u3093\u3067\u4f7f\u3046\u3068\u3044\u3046\u30b9\u30bf\u30a4\u30eb\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u81ea\u5206\u3067\u6d88\u5316\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u74b0\u5883\u5909\u6570\u3068\u3057\u3066export\u3059\u308b\u6a5f\u80fd\u3082\u8ffd\u52a0\u3055\u308c\u308b\u4e88\u5b9a\u3067\u3059([PR4710](https://github.com/GoogleCloudPlatform/kubernetes/issues/4710))\u3002\n\n**15/03/21\u8ffd\u8a18**\n\n\u518d\u5ea6\u6700\u65b0\u7248\u3067\u78ba\u8a8d\u3057\u305f\u3068\u3053\u308d\u7121\u4e8b\u79d8\u5bc6\u30c7\u30fc\u30bf\u304c\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\n```\n$ ssh node-01 'docker exec 7d5aa958003f ls -al /etc/secret-volume' \ntotal 12\ndrwxrwxrwt 2 root root   80 Mar 21 10:33 .\ndrwxr-xr-x 1 root root 4096 Mar 21 10:33 ..\n-rwxr-xr-x 1 root root   10 Mar 21 10:34 bar\n-rwxr-xr-x 1 root root   10 Mar 21 10:34 foo\n\n$ ssh node-01 'docker exec 7d5aa958003f cat /etc/secret-volume/bar'\nbar-secret\n$ ssh node-01 'docker exec 7d5aa958003f cat /etc/secret-volume/foo'\nfoo-secret\n```\n"}