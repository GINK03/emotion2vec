{"tags": ["AWS", "aws-cli", "DynamoDB"], "context": " More than 1 year has passed since last update.https://jawsug-cli.doorkeeper.jp/events/20523 \u3067\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\u3067\u3059\u3002\nAWS CLI\u3092\u5229\u7528\u3057\u3066\u3001DynamoDB\u306e\u30c6\u30fc\u30d6\u30eb(\u30cf\u30c3\u30b7\u30e5\u30ad\u30fc + \u30ec\u30f3\u30b8\u30ad\u30fc)\u3092\u4f5c\u6210\u3057\u3001\u30a2\u30a4\u30c6\u30e0\u3092\u767b\u9332\u3057\u3066\u307f\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001DynamoDB\u958b\u767a\u8005\u30ac\u30a4\u30c9\u306e\u30b5\u30f3\u30d7\u30eb\u30c6\u30fc\u30d6\u30eb\u300cThread\u300d\u3092CLI\u3067\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\nhttp://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/GettingStartedCreateTables.html\n\n\u524d\u63d0\u6761\u4ef6\n\nDynamoDB\u3078\u306e\u6a29\u9650\n\nDynamoDB\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\n\nAWS CLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\nAWS CLI 1.7.18\n\n\n\u30b3\u30de\u30f3\u30c9\naws --version\n\n\n\n\u7d50\u679c(\u4f8b)\naws-cli/1.7.18 Python/2.7.5 Darwin/13.4.0\n\n\n\n0. \u6e96\u5099\n\n0.1. \u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u6c7a\u5b9a\n\u4f5c\u6210\u3059\u308b\u30e6\u30fc\u30b6\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30ea\u30fc\u30b8\u30e7\u30f3\u3092\u6c7a\u3081\u307e\u3059\u3002\n(\u30ab\u30ec\u30f3\u30c8\u30e6\u30fc\u30b6\u304c\u5229\u7528\u3059\u308b\u30ab\u30ec\u30f3\u30c8\u30ea\u30fc\u30b8\u30e7\u30f3\u3082\u5207\u308a\u5909\u308f\u308a\u307e\u3059\u3002)\n\n\u30b3\u30de\u30f3\u30c9(\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u5834\u5408)\nexport AWS_DEFAULT_REGION='ap-northeast-1'\n\n\n\n0.2. \u5909\u6570\u306e\u78ba\u8a8d\n\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3068\u30ea\u30fc\u30b8\u30e7\u30f3\u304c\u60f3\u5b9a\u306e\u3082\u306e\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u5909\u6570\u306e\u78ba\u8a8d\naws configure list\n\n\n\n\u7d50\u679c(\u4f8b)\n            Name                    Value             Type    Location\n            ----                    -----             ----    --------\n         profile      iam_full-prjZ-mbp13              env    AWS_DEFAULT_PROFILE\n      access_key     ****************LOAQ shared-credentials-file\n      secret_key     ****************I1O1 shared-credentials-file\n          region           ap-northeast-1              env    AWS_DEFAULT_REGION\n\n\n\n0. \u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u8a08\n\u30c6\u30fc\u30d6\u30eb\u540d:   Thread (ForumName, Subject, ...)\n\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\u306e\u30bf\u30a4\u30d7:   \u30cf\u30c3\u30b7\u30e5 + \u30ec\u30f3\u30b8\n\u30cf\u30c3\u30b7\u30e5\u5c5e\u6027\u306e\u540d\u524d\u3068\u578b\n  * \u5c5e\u6027\u540d: ForumName\n  *  (\u578b: String)\n\u7bc4\u56f2\u5c5e\u6027\u306e\u540d\u524d\u3068\u578b\n  * \u5c5e\u6027\u540d: Subject\n  *  (\u578b: String)\n\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3055\u308c\u305f\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8:\n   *   \u8aad\u307f\u8fbc\u307f\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u30fc\u30e6\u30cb\u30c3\u30c8: 10\n   *   \u66f8\u304d\u8fbc\u307f\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u30fc\u30e6\u30cb\u30c3\u30c8: 5\n\n1. \u4e8b\u524d\u6e96\u5099\n\n1.1. DynamoDB\u30c6\u30fc\u30d6\u30eb\u540d\u306e\u6c7a\u5b9a\n\n\u30b3\u30de\u30f3\u30c9(\u4f8b)\nDYNAMO_TABLE_NAME='Thread'\n\n\n\u540c\u3058\u540d\u524d\u306e\u30c6\u30fc\u30d6\u30eb\u304c\u7121\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb describe-table --table-name ${DYNAMO_TABLE_NAME}\n\n\n\n\u7d50\u679c\n      A client error (ResourceNotFoundException) occurred when calling the DescribeTable operation: Requested resource not found: Table: ProductCatalog not found\n\n\n\n1.2. \u30b9\u30ad\u30fc\u30de\u306e\u5b9a\u7fa9\n\n\u30cf\u30c3\u30b7\u30e5\u30ad\u30fc\u306e\u6307\u5b9a\n\n\u30b3\u30de\u30f3\u30c9(\u4f8b)\nDYNAMO_HASH_NAME='ForumName'\nDYNAMO_HASH_TYPE='S'\n\n\n\n\u30ec\u30f3\u30b8\u30ad\u30fc\u306e\u6307\u5b9a\n\n\u30b3\u30de\u30f3\u30c9(\u4f8b)\nDYNAMO_RANGE_NAME='Subject'\nDYNAMO_RANGE_TYPE='S'\n\n\n\nCLI\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u4f5c\u6210\n\n\u30b3\u30de\u30f3\u30c9\nDYNAMO_ATTRIBUTE=\"AttributeName=${DYNAMO_HASH_NAME},AttributeType=${DYNAMO_HASH_TYPE} AttributeName=${DYNAMO_RANGE_NAME},AttributeType=${DYNAMO_RANGE_TYPE}\"\nDYNAMO_KEY_SCHEMA=\"AttributeName=${DYNAMO_HASH_NAME},KeyType=HASH AttributeName=${DYNAMO_RANGE_NAME},KeyType=RANGE\"\n\n\n\n1.3. \u30d7\u30ed\u30d3\u30b8\u30e7\u30f3\u30c9\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u306e\u6307\u5b9a\n\n\u30b3\u30de\u30f3\u30c9(\u4f8b)\nDYNAMO_READ_UNIT='10'\nDYNAMO_WRITE_UNIT='5'\n\nDYNAMO_PROV_THPUT=\"ReadCapacityUnits=${DYNAMO_READ_UNIT},WriteCapacityUnits=${DYNAMO_WRITE_UNIT}\"\n\n\n\n2. \u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\n\n2.1. \u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n        DYNAMO_TABLE_NAME: ${DYNAMO_TABLE_NAME}\n        DYNAMO_ATTRIBUTE:  ${DYNAMO_ATTRIBUTE}\n        DYNAMO_KEY_SCHEMA: ${DYNAMO_KEY_SCHEMA}\n        DYNAMO_PROV_THPUT: ${DYNAMO_PROV_THPUT}\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb create-table \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --attribute-definitions ${DYNAMO_ATTRIBUTE} \\\n        --key-schema ${DYNAMO_KEY_SCHEMA} \\\n        --provisioned-throughput ${DYNAMO_PROV_THPUT}\n\n\n\n\u7d50\u679c\n      {\n        \"TableDescription\": {\n          \"AttributeDefinitions\": [\n              {\n                  \"AttributeName\": \"ForumName\",\n                  \"AttributeType\": \"S\"\n              },\n              {\n                  \"AttributeName\": \"Subject\",\n                  \"AttributeType\": \"S\"\n              }\n          ],\n          \"ProvisionedThroughput\": {\n              \"NumberOfDecreasesToday\": 0,\n              \"WriteCapacityUnits\": 5,\n              \"ReadCapacityUnits\": 10\n          },\n          \"TableSizeBytes\": 0,\n          \"TableName\": \"Thread\",\n          \"TableStatus\": \"CREATING\",\n          \"KeySchema\": [\n              {\n                  \"KeyType\": \"HASH\",\n                  \"AttributeName\": \"ForumName\"\n              },\n              {\n                  \"KeyType\": \"RANGE\",\n                  \"AttributeName\": \"Subject\"\n              }\n          ],\n          \"ItemCount\": 0,\n          \"CreationDateTime\": 1427678617.154\n        }\n      }\n\n\n\n2.2. \u78ba\u8a8d(\u4e00\u89a7)\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb list-tables \n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"TableNames\": [\n          \"Thread\"\n        ]\n      }\n\n\n\n2.3. \u78ba\u8a8d(\u8a73\u7d30)\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb describe-table --table-name ${DYNAMO_TABLE_NAME}\n\n\n\n\u7d50\u679c\n      {\n        \"Table\": {\n          \"AttributeDefinitions\": [\n              {\n                  \"AttributeName\": \"ForumName\",\n                  \"AttributeType\": \"S\"\n              },\n              {\n                  \"AttributeName\": \"Subject\",\n                  \"AttributeType\": \"S\"\n              }\n          ],\n          \"ProvisionedThroughput\": {\n              \"NumberOfDecreasesToday\": 0,\n              \"WriteCapacityUnits\": 5,\n              \"ReadCapacityUnits\": 10\n          },\n          \"TableSizeBytes\": 0,\n          \"TableName\": \"Thread\",\n          \"TableStatus\": \"ACTIVE\",\n          \"KeySchema\": [\n              {\n                  \"KeyType\": \"HASH\",\n                  \"AttributeName\": \"ForumName\"\n              },\n              {\n                  \"KeyType\": \"RANGE\",\n                  \"AttributeName\": \"Subject\"\n              }\n          ],\n          \"ItemCount\": 0,\n          \"CreationDateTime\": 1427678617.154\n        }\n      }\n\n\n\n3. \u30a2\u30a4\u30c6\u30e0\u306e\u4f5c\u6210 (put-item)\n\n3.1. Thread 1\nsample forum1:\nForumName:\n   \"Amazon DynamoDB\"\nSubject:\n   \"DynamoDB Thread 1\"\nMessage:\n   \"DynamoDB thread 1 message text\"\nLastPostedBy:\n   \"User A\"\nLastPostedDateTime:\n   DateTime.UtcNow.Subtract(new TimeSpan(14, 0, 0, 0))\nViews:\n   0\nReplies:\n   0\nAnswered:\n   false\nTags:\n   { \"index\", \"primarykey\", \"table\" }\n\n\u30b3\u30de\u30f3\u30c9\nDYNAMO_ITEM_STRING='{\"ForumName\":{\"S\":\"Amazon DynamoDB\"},\"Subject\":{\"S\":\"DynamoDB Thread 1\"},\"Message\":{\"S\":\"DynamoDB thread 1 message text\"},\"LastPostedBy\":{\"S\":\"User A\"},\"LastPostedDateTime\":{\"S\":\"2015-03-20 00:00:01\"},\"Views\":{\"N\":\"0\"},\"Replies\":{\"N\":\"0\"},\"Answered\":{\"BOOL\":false},\"Tags\":{\"SS\":[\"index\",\"primarykey\",\"table\"]}}'\n\n\n\n\u30b3\u30de\u30f3\u30c9\necho ${DYNAMO_ITEM_STRING} | json_verify\n\n\n\n\u7d50\u679c\n      JSON is valid\n\n\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n        DYNAMO_TABLE_NAME:  ${DYNAMO_TABLE_NAME}\n        DYNAMO_ITEM_STRING: ${DYNAMO_ITEM_STRING}\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\n aws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n\n3.2. Thread 2\nsample forum2:\nForumName:\n   \"Amazon DynamoDB\"\nSubject:\n   \"DynamoDB Thread 2\"\nMessage:\n   \"DynamoDB thread 2 message text\"\nLastPostedBy:\n   \"User A\"\nLastPostedDateTime:\n   DateTime.UtcNow.Subtract(new TimeSpan(21, 0, 0, 0))\nViews:\n   0\nReplies:\n   0\nAnswered:\n   false\nTags:\n   { \"index\", \"primarykey\", \"rangekey\" }\n\n\u30b3\u30de\u30f3\u30c9\nDYNAMO_ITEM_STRING='{\"ForumName\":{\"S\":\"Amazon DynamoDB\"},\"Subject\":{\"S\":\"DynamoDB Thread 2\"},\"Message\":{\"S\":\"DynamoDB thread 2 message text\"},\"LastPostedBy\":{\"S\":\"User A\"},\"LastPostedDateTime\":{\"S\":\"2015-03-20 00:01:01\"},\"Views\":{\"N\":\"0\"},\"Replies\":{\"N\":\"0\"},\"Answered\":{\"BOOL\":false},\"Tags\":{\"SS\":[\"index\",\"primarykey\",\"rangekey\"]}}'\n\n\n\n\u30b3\u30de\u30f3\u30c9\necho ${DYNAMO_ITEM_STRING} | json_verify\n\n\n\n\u7d50\u679c\n      JSON is valid\n\n\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n        DYNAMO_TABLE_NAME:  ${DYNAMO_TABLE_NAME}\n        DYNAMO_ITEM_STRING: ${DYNAMO_ITEM_STRING}\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n\n3.3. Thread 3\nsample forum3:\nForumName:\n   \"Amazon S3\"\nSubject:\n   \"S3 Thread 1\"\nMessage:\n   \"S3 thread 3 message text\"\nLastPostedBy:\n   \"User A\"\nLastPostedDateTime:\n   DateTime.UtcNow.Subtract(new TimeSpan(7, 0, 0, 0))\nViews:\n   0\nReplies:\n   0\nAnswered:\n   false\nTags:\n   { \"largeobjects\", \"multipart upload\" }\n\n\u30b3\u30de\u30f3\u30c9\nDYNAMO_ITEM_STRING='{\"ForumName\":{\"S\":\"Amazon S3\"},\"Subject\":{\"S\":\"S3 Thread 1\"},\"Message\":{\"S\":\"S3 thread 3 message text\"},\"LastPostedBy\":{\"S\":\"User A\"},\"LastPostedDateTime\":{\"S\":\"2015-03-20 00:02:02\"},\"Views\":{\"N\":\"0\"},\"Replies\":{\"N\":\"0\"},\"Answered\":{\"BOOL\":false},\"Tags\":{\"SS\":[\"largeobjects\",\"multipart upload\"]}}'\n\n\n\n\u30b3\u30de\u30f3\u30c9\necho ${DYNAMO_ITEM_STRING} | json_verify\n\n\n\n\u7d50\u679c\n      JSON is valid\n\n\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n        DYNAMO_TABLE_NAME:  ${DYNAMO_TABLE_NAME}\n        DYNAMO_ITEM_STRING: ${DYNAMO_ITEM_STRING}\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n\n4. \u30b9\u30ad\u30e3\u30f3\n\n4.1. \u30a2\u30a4\u30c6\u30e0\u6570\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb scan --table-name ${DYNAMO_TABLE_NAME} --query 'Count'\n\n\n\n\u7d50\u679c\n      3\n\n\n\n4.2. \u5168\u4ef6\u8868\u793a\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb scan --table-name ${DYNAMO_TABLE_NAME}\n\n\n\n\u7d50\u679c\n      {\n        \"Count\": 3,\n        \"Items\": [\n          {\n              \"Tags\": {\n                  \"SS\": [\n                      \"largeobjects\",\n                      \"multipart upload\"\n                  ]\n              },\n              \"LastPostedDateTime\": {\n                  \"S\": \"2015-03-20 00:02:02\"\n              },\n              \"Views\": {\n                  \"N\": \"0\"\n              },\n              \"LastPostedBy\": {\n                  \"S\": \"User A\"\n              },\n              \"Answered\": {\n                  \"BOOL\": false\n              },\n              \"Replies\": {\n                  \"N\": \"0\"\n              },\n              \"Message\": {\n                  \"S\": \"S3 thread 3 message text\"\n              },\n              \"Subject\": {\n                  \"S\": \"S3 Thread 1\"\n              },\n              \"ForumName\": {\n                  \"S\": \"Amazon S3\"\n              }\n          },\n          {\n              \"Tags\": {\n                  \"SS\": [\n                      \"index\",\n                      \"primarykey\",\n                      \"table\"\n                  ]\n              },\n              \"LastPostedDateTime\": {\n                  \"S\": \"2015-03-20 00:00:01\"\n              },\n              \"Views\": {\n                  \"N\": \"0\"\n              },\n              \"LastPostedBy\": {\n                  \"S\": \"User A\"\n              },\n              \"Answered\": {\n                  \"BOOL\": false\n              },\n              \"Replies\": {\n                  \"N\": \"0\"\n              },\n              \"Message\": {\n                  \"S\": \"DynamoDB thread 1 message text\"\n              },\n              \"Subject\": {\n                  \"S\": \"DynamoDB Thread 1\"\n              },\n              \"ForumName\": {\n                  \"S\": \"Amazon DynamoDB\"\n              }\n          },\n          {\n              \"Tags\": {\n                  \"SS\": [\n                      \"index\",\n                      \"primarykey\",\n                      \"rangekey\"\n                  ]\n              },\n              \"LastPostedDateTime\": {\n                  \"S\": \"2015-03-20 00:01:01\"\n              },\n              \"Views\": {\n                  \"N\": \"0\"\n              },\n              \"LastPostedBy\": {\n                  \"S\": \"User A\"\n              },\n              \"Answered\": {\n                  \"BOOL\": false\n              },\n              \"Replies\": {\n                  \"N\": \"0\"\n              },\n              \"Message\": {\n                  \"S\": \"DynamoDB thread 2 message text\"\n              },\n              \"Subject\": {\n                  \"S\": \"DynamoDB Thread 2\"\n              },\n              \"ForumName\": {\n                  \"S\": \"Amazon DynamoDB\"\n              }\n          }\n        ],\n        \"ScannedCount\": 3,\n        \"ConsumedCapacity\": null\n      }\n\n\n\n5. \u30af\u30a8\u30ea\n\u30a2\u30a4\u30c6\u30e0\u3092\u4ee5\u4e0b\u306e\u6761\u4ef6\u3067\u30af\u30a8\u30ea\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u30cf\u30c3\u30b7\u30e5\u30ad\u30fc\"ForumName\"\u306e\u5024: \"Amazon DynamoDB\"\u3068\u540c\u3058\n\u30ec\u30f3\u30b8\u30ad\u30fc\"Subject\"\u306e\u5024: \"DynamoDB Thread\"\u3067\u59cb\u307e\u308b\n\n\n5.1. \u30af\u30a8\u30ea\u30c7\u30fc\u30bf\u306e\u4f5c\u6210\n\n\u30b3\u30de\u30f3\u30c9\npk=ForumName\npt=S\npv=\"Amazon DynamoDB\"\npo=\"EQ\"\n\nrk=Subject\nrt=S\nrv=\"DynamoDB Thread\"\nro=\"BEGINS_WITH\"\n\n\n\n\u30b3\u30de\u30f3\u30c9\nSTR_QUERY=\"{\\\"${pk}\\\":{\\\"AttributeValueList\\\":[{\\\"${pt}\\\":\\\"${pv}\\\"}],\\\"ComparisonOperator\\\":\\\"${po}\\\"},\\\"${rk}\\\":{\\\"AttributeValueList\\\":[{\\\"${rt}\\\":\\\"${rv}\\\"}],\\\"ComparisonOperator\\\":\\\"${ro}\\\"}}\"\n\necho ${STR_QUERY} | json_verify\n\n\n\n5.2. \u30af\u30a8\u30ea\u306e\u5b9f\u884c\n\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb query \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key-conditions \"${STR_QUERY}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"Count\": 2,\n        \"Items\": [\n          {\n              \"Tags\": {\n                  \"SS\": [\n                      \"index\",\n                      \"primarykey\",\n                      \"table\"\n                  ]\n              },\n              \"LastPostedDateTime\": {\n                  \"S\": \"2015-03-20 00:00:01\"\n              },\n              \"Views\": {\n                  \"N\": \"0\"\n              },\n              \"LastPostedBy\": {\n                  \"S\": \"User A\"\n              },\n              \"Answered\": {\n                  \"BOOL\": false\n              },\n              \"Replies\": {\n                  \"N\": \"0\"\n              },\n              \"Message\": {\n                  \"S\": \"DynamoDB thread 1 message text\"\n              },\n              \"Subject\": {\n                  \"S\": \"DynamoDB Thread 1\"\n              },\n              \"ForumName\": {\n                  \"S\": \"Amazon DynamoDB\"\n              }\n          },\n          {\n              \"Tags\": {\n                  \"SS\": [\n                      \"index\",\n                      \"primarykey\",\n                      \"rangekey\"\n                  ]\n              },\n              \"LastPostedDateTime\": {\n                  \"S\": \"2015-03-20 00:01:01\"\n              },\n              \"Views\": {\n                  \"N\": \"0\"\n              },\n              \"LastPostedBy\": {\n                  \"S\": \"User A\"\n              },\n              \"Answered\": {\n                  \"BOOL\": false\n              },\n              \"Replies\": {\n                  \"N\": \"0\"\n              },\n              \"Message\": {\n                  \"S\": \"DynamoDB thread 2 message text\"\n              },\n              \"Subject\": {\n                  \"S\": \"DynamoDB Thread 2\"\n              },\n              \"ForumName\": {\n                  \"S\": \"Amazon DynamoDB\"\n              }\n          }\n        ],\n        \"ScannedCount\": 2,\n        \"ConsumedCapacity\": null\n      }\n\n\n2\u4ef6\u8868\u793a\u3055\u308c\u308c\u3070OK\u3067\u3059\u3002\nhttps://jawsug-cli.doorkeeper.jp/events/20523 \u3067\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\u3067\u3059\u3002\n\nAWS CLI\u3092\u5229\u7528\u3057\u3066\u3001DynamoDB\u306e\u30c6\u30fc\u30d6\u30eb(\u30cf\u30c3\u30b7\u30e5\u30ad\u30fc + \u30ec\u30f3\u30b8\u30ad\u30fc)\u3092\u4f5c\u6210\u3057\u3001\u30a2\u30a4\u30c6\u30e0\u3092\u767b\u9332\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u306f\u3001DynamoDB\u958b\u767a\u8005\u30ac\u30a4\u30c9\u306e\u30b5\u30f3\u30d7\u30eb\u30c6\u30fc\u30d6\u30eb\u300cThread\u300d\u3092CLI\u3067\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\nhttp://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/GettingStartedCreateTables.html\n\n\n\u524d\u63d0\u6761\u4ef6\n========\n\n## DynamoDB\u3078\u306e\u6a29\u9650\n\n* DynamoDB\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\n## AWS CLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\n* AWS CLI 1.7.18\n\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws --version\n```\n\n```text:\u7d50\u679c(\u4f8b):\naws-cli/1.7.18 Python/2.7.5 Darwin/13.4.0\n```\n0. \u6e96\u5099\n=======\n\n\n0.1. \u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u6c7a\u5b9a\n---------------------\n\n\u4f5c\u6210\u3059\u308b\u30e6\u30fc\u30b6\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30ea\u30fc\u30b8\u30e7\u30f3\u3092\u6c7a\u3081\u307e\u3059\u3002\n(\u30ab\u30ec\u30f3\u30c8\u30e6\u30fc\u30b6\u304c\u5229\u7528\u3059\u308b\u30ab\u30ec\u30f3\u30c8\u30ea\u30fc\u30b8\u30e7\u30f3\u3082\u5207\u308a\u5909\u308f\u308a\u307e\u3059\u3002)\n\n```bash:\u30b3\u30de\u30f3\u30c9(\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u5834\u5408):\nexport AWS_DEFAULT_REGION='ap-northeast-1'\n```\n\n\n0.2. \u5909\u6570\u306e\u78ba\u8a8d\n---------------\n\n\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3068\u30ea\u30fc\u30b8\u30e7\u30f3\u304c\u60f3\u5b9a\u306e\u3082\u306e\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\naws configure list\n```\n\n```text:\u7d50\u679c(\u4f8b):\n            Name                    Value             Type    Location\n            ----                    -----             ----    --------\n         profile      iam_full-prjZ-mbp13              env    AWS_DEFAULT_PROFILE\n      access_key     ****************LOAQ shared-credentials-file\n      secret_key     ****************I1O1 shared-credentials-file\n          region           ap-northeast-1              env    AWS_DEFAULT_REGION\n```\n\n\n0. \u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u8a08\n==============\n\n\n\u30c6\u30fc\u30d6\u30eb\u540d:   Thread (ForumName, Subject, ...)\n\n\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\u306e\u30bf\u30a4\u30d7:   \u30cf\u30c3\u30b7\u30e5 + \u30ec\u30f3\u30b8\n\n\u30cf\u30c3\u30b7\u30e5\u5c5e\u6027\u306e\u540d\u524d\u3068\u578b\n  * \u5c5e\u6027\u540d: ForumName\n  *  (\u578b: String)\n\n\u7bc4\u56f2\u5c5e\u6027\u306e\u540d\u524d\u3068\u578b\n  * \u5c5e\u6027\u540d: Subject\n  *  (\u578b: String)\n\n\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3055\u308c\u305f\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8:\n   *   \u8aad\u307f\u8fbc\u307f\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u30fc\u30e6\u30cb\u30c3\u30c8: 10\n   *   \u66f8\u304d\u8fbc\u307f\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u30fc\u30e6\u30cb\u30c3\u30c8: 5\n\n\n1. \u4e8b\u524d\u6e96\u5099\n===========\n\n\n1.1. DynamoDB\u30c6\u30fc\u30d6\u30eb\u540d\u306e\u6c7a\u5b9a\n-----------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9(\u4f8b):\nDYNAMO_TABLE_NAME='Thread'\n```\n\n\u540c\u3058\u540d\u524d\u306e\u30c6\u30fc\u30d6\u30eb\u304c\u7121\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb describe-table --table-name ${DYNAMO_TABLE_NAME}\n```\n\n```text:\u7d50\u679c:\n      A client error (ResourceNotFoundException) occurred when calling the DescribeTable operation: Requested resource not found: Table: ProductCatalog not found\n```\n\n\n1.2. \u30b9\u30ad\u30fc\u30de\u306e\u5b9a\u7fa9\n-------------------\n\n### \u30cf\u30c3\u30b7\u30e5\u30ad\u30fc\u306e\u6307\u5b9a\n\n```bash:\u30b3\u30de\u30f3\u30c9(\u4f8b):\nDYNAMO_HASH_NAME='ForumName'\nDYNAMO_HASH_TYPE='S'\n```\n\n### \u30ec\u30f3\u30b8\u30ad\u30fc\u306e\u6307\u5b9a\n\n```bash:\u30b3\u30de\u30f3\u30c9(\u4f8b):\nDYNAMO_RANGE_NAME='Subject'\nDYNAMO_RANGE_TYPE='S'\n```\n\n### CLI\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u4f5c\u6210\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nDYNAMO_ATTRIBUTE=\"AttributeName=${DYNAMO_HASH_NAME},AttributeType=${DYNAMO_HASH_TYPE} AttributeName=${DYNAMO_RANGE_NAME},AttributeType=${DYNAMO_RANGE_TYPE}\"\nDYNAMO_KEY_SCHEMA=\"AttributeName=${DYNAMO_HASH_NAME},KeyType=HASH AttributeName=${DYNAMO_RANGE_NAME},KeyType=RANGE\"\n```\n\n\n1.3. \u30d7\u30ed\u30d3\u30b8\u30e7\u30f3\u30c9\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u306e\u6307\u5b9a\n-------------------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9(\u4f8b):\nDYNAMO_READ_UNIT='10'\nDYNAMO_WRITE_UNIT='5'\n\nDYNAMO_PROV_THPUT=\"ReadCapacityUnits=${DYNAMO_READ_UNIT},WriteCapacityUnits=${DYNAMO_WRITE_UNIT}\"\n```\n\n\n2. \u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\n=================\n\n## 2.1. \u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n        DYNAMO_TABLE_NAME: ${DYNAMO_TABLE_NAME}\n        DYNAMO_ATTRIBUTE:  ${DYNAMO_ATTRIBUTE}\n        DYNAMO_KEY_SCHEMA: ${DYNAMO_KEY_SCHEMA}\n        DYNAMO_PROV_THPUT: ${DYNAMO_PROV_THPUT}\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb create-table \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --attribute-definitions ${DYNAMO_ATTRIBUTE} \\\n        --key-schema ${DYNAMO_KEY_SCHEMA} \\\n        --provisioned-throughput ${DYNAMO_PROV_THPUT}\n```\n\n```json:\u7d50\u679c:\n      {\n        \"TableDescription\": {\n          \"AttributeDefinitions\": [\n              {\n                  \"AttributeName\": \"ForumName\",\n                  \"AttributeType\": \"S\"\n              },\n              {\n                  \"AttributeName\": \"Subject\",\n                  \"AttributeType\": \"S\"\n              }\n          ],\n          \"ProvisionedThroughput\": {\n              \"NumberOfDecreasesToday\": 0,\n              \"WriteCapacityUnits\": 5,\n              \"ReadCapacityUnits\": 10\n          },\n          \"TableSizeBytes\": 0,\n          \"TableName\": \"Thread\",\n          \"TableStatus\": \"CREATING\",\n          \"KeySchema\": [\n              {\n                  \"KeyType\": \"HASH\",\n                  \"AttributeName\": \"ForumName\"\n              },\n              {\n                  \"KeyType\": \"RANGE\",\n                  \"AttributeName\": \"Subject\"\n              }\n          ],\n          \"ItemCount\": 0,\n          \"CreationDateTime\": 1427678617.154\n        }\n      }\n```\n\n\n## 2.2. \u78ba\u8a8d(\u4e00\u89a7)\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb list-tables \n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"TableNames\": [\n          \"Thread\"\n        ]\n      }\n```\n\n\n## 2.3. \u78ba\u8a8d(\u8a73\u7d30)\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb describe-table --table-name ${DYNAMO_TABLE_NAME}\n```\n\n```json:\u7d50\u679c:\n      {\n        \"Table\": {\n          \"AttributeDefinitions\": [\n              {\n                  \"AttributeName\": \"ForumName\",\n                  \"AttributeType\": \"S\"\n              },\n              {\n                  \"AttributeName\": \"Subject\",\n                  \"AttributeType\": \"S\"\n              }\n          ],\n          \"ProvisionedThroughput\": {\n              \"NumberOfDecreasesToday\": 0,\n              \"WriteCapacityUnits\": 5,\n              \"ReadCapacityUnits\": 10\n          },\n          \"TableSizeBytes\": 0,\n          \"TableName\": \"Thread\",\n          \"TableStatus\": \"ACTIVE\",\n          \"KeySchema\": [\n              {\n                  \"KeyType\": \"HASH\",\n                  \"AttributeName\": \"ForumName\"\n              },\n              {\n                  \"KeyType\": \"RANGE\",\n                  \"AttributeName\": \"Subject\"\n              }\n          ],\n          \"ItemCount\": 0,\n          \"CreationDateTime\": 1427678617.154\n        }\n      }\n```\n\n\n\n\n\n\n\n\n\n\n\n3. \u30a2\u30a4\u30c6\u30e0\u306e\u4f5c\u6210 (put-item)\n============================\n\n\n3.1. Thread 1\n--------\n\nsample forum1:\n\nForumName:\n   \"Amazon DynamoDB\"\n\nSubject:\n   \"DynamoDB Thread 1\"\n\nMessage:\n   \"DynamoDB thread 1 message text\"\n\nLastPostedBy:\n   \"User A\"\n\nLastPostedDateTime:\n   DateTime.UtcNow.Subtract(new TimeSpan(14, 0, 0, 0))\n\nViews:\n   0\n\nReplies:\n   0\n\nAnswered:\n   false\n\nTags:\n   { \"index\", \"primarykey\", \"table\" }\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nDYNAMO_ITEM_STRING='{\"ForumName\":{\"S\":\"Amazon DynamoDB\"},\"Subject\":{\"S\":\"DynamoDB Thread 1\"},\"Message\":{\"S\":\"DynamoDB thread 1 message text\"},\"LastPostedBy\":{\"S\":\"User A\"},\"LastPostedDateTime\":{\"S\":\"2015-03-20 00:00:01\"},\"Views\":{\"N\":\"0\"},\"Replies\":{\"N\":\"0\"},\"Answered\":{\"BOOL\":false},\"Tags\":{\"SS\":[\"index\",\"primarykey\",\"table\"]}}'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\necho ${DYNAMO_ITEM_STRING} | json_verify\n```\n\n```text:\u7d50\u679c:\n      JSON is valid\n```\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n        DYNAMO_TABLE_NAME:  ${DYNAMO_TABLE_NAME}\n        DYNAMO_ITEM_STRING: ${DYNAMO_ITEM_STRING}\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\n aws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n\n3.2. Thread 2\n--------\n\nsample forum2:\n\nForumName:\n   \"Amazon DynamoDB\"\n\nSubject:\n   \"DynamoDB Thread 2\"\n\nMessage:\n   \"DynamoDB thread 2 message text\"\n\nLastPostedBy:\n   \"User A\"\n\nLastPostedDateTime:\n   DateTime.UtcNow.Subtract(new TimeSpan(21, 0, 0, 0))\n\nViews:\n   0\n\nReplies:\n   0\n\nAnswered:\n   false\n\nTags:\n   { \"index\", \"primarykey\", \"rangekey\" }\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nDYNAMO_ITEM_STRING='{\"ForumName\":{\"S\":\"Amazon DynamoDB\"},\"Subject\":{\"S\":\"DynamoDB Thread 2\"},\"Message\":{\"S\":\"DynamoDB thread 2 message text\"},\"LastPostedBy\":{\"S\":\"User A\"},\"LastPostedDateTime\":{\"S\":\"2015-03-20 00:01:01\"},\"Views\":{\"N\":\"0\"},\"Replies\":{\"N\":\"0\"},\"Answered\":{\"BOOL\":false},\"Tags\":{\"SS\":[\"index\",\"primarykey\",\"rangekey\"]}}'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\necho ${DYNAMO_ITEM_STRING} | json_verify\n```\n\n```text:\u7d50\u679c:\n      JSON is valid\n```\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n        DYNAMO_TABLE_NAME:  ${DYNAMO_TABLE_NAME}\n        DYNAMO_ITEM_STRING: ${DYNAMO_ITEM_STRING}\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n\n3.3. Thread 3\n--------\n\nsample forum3:\n\nForumName:\n   \"Amazon S3\"\n\nSubject:\n   \"S3 Thread 1\"\n\nMessage:\n   \"S3 thread 3 message text\"\n\nLastPostedBy:\n   \"User A\"\n\nLastPostedDateTime:\n   DateTime.UtcNow.Subtract(new TimeSpan(7, 0, 0, 0))\n\nViews:\n   0\n\nReplies:\n   0\n\nAnswered:\n   false\n\nTags:\n   { \"largeobjects\", \"multipart upload\" }\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nDYNAMO_ITEM_STRING='{\"ForumName\":{\"S\":\"Amazon S3\"},\"Subject\":{\"S\":\"S3 Thread 1\"},\"Message\":{\"S\":\"S3 thread 3 message text\"},\"LastPostedBy\":{\"S\":\"User A\"},\"LastPostedDateTime\":{\"S\":\"2015-03-20 00:02:02\"},\"Views\":{\"N\":\"0\"},\"Replies\":{\"N\":\"0\"},\"Answered\":{\"BOOL\":false},\"Tags\":{\"SS\":[\"largeobjects\",\"multipart upload\"]}}'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\necho ${DYNAMO_ITEM_STRING} | json_verify\n```\n\n```text:\u7d50\u679c:\n      JSON is valid\n```\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n        DYNAMO_TABLE_NAME:  ${DYNAMO_TABLE_NAME}\n        DYNAMO_ITEM_STRING: ${DYNAMO_ITEM_STRING}\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n\n4. \u30b9\u30ad\u30e3\u30f3\n=======\n\n\n4.1. \u30a2\u30a4\u30c6\u30e0\u6570\u78ba\u8a8d\n-------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb scan --table-name ${DYNAMO_TABLE_NAME} --query 'Count'\n```\n\n```text:\u7d50\u679c:\n      3\n```\n\n\n4.2. \u5168\u4ef6\u8868\u793a\n-------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb scan --table-name ${DYNAMO_TABLE_NAME}\n```\n\n```json:\u7d50\u679c:\n      {\n        \"Count\": 3,\n        \"Items\": [\n          {\n              \"Tags\": {\n                  \"SS\": [\n                      \"largeobjects\",\n                      \"multipart upload\"\n                  ]\n              },\n              \"LastPostedDateTime\": {\n                  \"S\": \"2015-03-20 00:02:02\"\n              },\n              \"Views\": {\n                  \"N\": \"0\"\n              },\n              \"LastPostedBy\": {\n                  \"S\": \"User A\"\n              },\n              \"Answered\": {\n                  \"BOOL\": false\n              },\n              \"Replies\": {\n                  \"N\": \"0\"\n              },\n              \"Message\": {\n                  \"S\": \"S3 thread 3 message text\"\n              },\n              \"Subject\": {\n                  \"S\": \"S3 Thread 1\"\n              },\n              \"ForumName\": {\n                  \"S\": \"Amazon S3\"\n              }\n          },\n          {\n              \"Tags\": {\n                  \"SS\": [\n                      \"index\",\n                      \"primarykey\",\n                      \"table\"\n                  ]\n              },\n              \"LastPostedDateTime\": {\n                  \"S\": \"2015-03-20 00:00:01\"\n              },\n              \"Views\": {\n                  \"N\": \"0\"\n              },\n              \"LastPostedBy\": {\n                  \"S\": \"User A\"\n              },\n              \"Answered\": {\n                  \"BOOL\": false\n              },\n              \"Replies\": {\n                  \"N\": \"0\"\n              },\n              \"Message\": {\n                  \"S\": \"DynamoDB thread 1 message text\"\n              },\n              \"Subject\": {\n                  \"S\": \"DynamoDB Thread 1\"\n              },\n              \"ForumName\": {\n                  \"S\": \"Amazon DynamoDB\"\n              }\n          },\n          {\n              \"Tags\": {\n                  \"SS\": [\n                      \"index\",\n                      \"primarykey\",\n                      \"rangekey\"\n                  ]\n              },\n              \"LastPostedDateTime\": {\n                  \"S\": \"2015-03-20 00:01:01\"\n              },\n              \"Views\": {\n                  \"N\": \"0\"\n              },\n              \"LastPostedBy\": {\n                  \"S\": \"User A\"\n              },\n              \"Answered\": {\n                  \"BOOL\": false\n              },\n              \"Replies\": {\n                  \"N\": \"0\"\n              },\n              \"Message\": {\n                  \"S\": \"DynamoDB thread 2 message text\"\n              },\n              \"Subject\": {\n                  \"S\": \"DynamoDB Thread 2\"\n              },\n              \"ForumName\": {\n                  \"S\": \"Amazon DynamoDB\"\n              }\n          }\n        ],\n        \"ScannedCount\": 3,\n        \"ConsumedCapacity\": null\n      }\n```\n\n\n\n\n5. \u30af\u30a8\u30ea\n===============\n\n\u30a2\u30a4\u30c6\u30e0\u3092\u4ee5\u4e0b\u306e\u6761\u4ef6\u3067\u30af\u30a8\u30ea\u3057\u3066\u307f\u307e\u3059\u3002\n\n* \u30cf\u30c3\u30b7\u30e5\u30ad\u30fc\"ForumName\"\u306e\u5024: \"Amazon DynamoDB\"\u3068\u540c\u3058\n* \u30ec\u30f3\u30b8\u30ad\u30fc\"Subject\"\u306e\u5024: \"DynamoDB Thread\"\u3067\u59cb\u307e\u308b\n\n\n\n5.1. \u30af\u30a8\u30ea\u30c7\u30fc\u30bf\u306e\u4f5c\u6210\n-----------------------\n\n\n```bash:\u30b3\u30de\u30f3\u30c9:\npk=ForumName\npt=S\npv=\"Amazon DynamoDB\"\npo=\"EQ\"\n\nrk=Subject\nrt=S\nrv=\"DynamoDB Thread\"\nro=\"BEGINS_WITH\"\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nSTR_QUERY=\"{\\\"${pk}\\\":{\\\"AttributeValueList\\\":[{\\\"${pt}\\\":\\\"${pv}\\\"}],\\\"ComparisonOperator\\\":\\\"${po}\\\"},\\\"${rk}\\\":{\\\"AttributeValueList\\\":[{\\\"${rt}\\\":\\\"${rv}\\\"}],\\\"ComparisonOperator\\\":\\\"${ro}\\\"}}\"\n\necho ${STR_QUERY} | json_verify\n```\n\n\n5.2. \u30af\u30a8\u30ea\u306e\u5b9f\u884c\n-----------------\n\n\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb query \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key-conditions \"${STR_QUERY}\"\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"Count\": 2,\n        \"Items\": [\n          {\n              \"Tags\": {\n                  \"SS\": [\n                      \"index\",\n                      \"primarykey\",\n                      \"table\"\n                  ]\n              },\n              \"LastPostedDateTime\": {\n                  \"S\": \"2015-03-20 00:00:01\"\n              },\n              \"Views\": {\n                  \"N\": \"0\"\n              },\n              \"LastPostedBy\": {\n                  \"S\": \"User A\"\n              },\n              \"Answered\": {\n                  \"BOOL\": false\n              },\n              \"Replies\": {\n                  \"N\": \"0\"\n              },\n              \"Message\": {\n                  \"S\": \"DynamoDB thread 1 message text\"\n              },\n              \"Subject\": {\n                  \"S\": \"DynamoDB Thread 1\"\n              },\n              \"ForumName\": {\n                  \"S\": \"Amazon DynamoDB\"\n              }\n          },\n          {\n              \"Tags\": {\n                  \"SS\": [\n                      \"index\",\n                      \"primarykey\",\n                      \"rangekey\"\n                  ]\n              },\n              \"LastPostedDateTime\": {\n                  \"S\": \"2015-03-20 00:01:01\"\n              },\n              \"Views\": {\n                  \"N\": \"0\"\n              },\n              \"LastPostedBy\": {\n                  \"S\": \"User A\"\n              },\n              \"Answered\": {\n                  \"BOOL\": false\n              },\n              \"Replies\": {\n                  \"N\": \"0\"\n              },\n              \"Message\": {\n                  \"S\": \"DynamoDB thread 2 message text\"\n              },\n              \"Subject\": {\n                  \"S\": \"DynamoDB Thread 2\"\n              },\n              \"ForumName\": {\n                  \"S\": \"Amazon DynamoDB\"\n              }\n          }\n        ],\n        \"ScannedCount\": 2,\n        \"ConsumedCapacity\": null\n      }\n```\n\n2\u4ef6\u8868\u793a\u3055\u308c\u308c\u3070OK\u3067\u3059\u3002\n"}