{"context": " More than 1 year has passed since last update.Grunt + CoffeeScript + Karma + Jasmine \u3067\u30c1\u30fc\u30e0\u958b\u767a\u304c\u5b89\u5b9a\u3057\u3066\u304d\u305f\u306e\u3067\uff0c\u5099\u5fd8\u9332\u7684\u306b\u307e\u3068\u3081\u3066\u3044\u304f\uff0e\n\nCoffeeScript\u95a2\u9023\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n$ npm init\n$ npm install\n$ npm install coffee-script --save-dev    \n$ npm install grunt --save-dev\n$ npm install grunt-contrib-coffee --save-dev\n$ npm install grunt-contrib-concat --save-dev\n$ npm install grunt-contrib-uglify --save-dev\n$ npm install grunt-contrib-watch --save-dev\n\n\n\u30d7\u30ed\u30c0\u30af\u30c8\u30b3\u30fc\u30c9\n\nhello.coffee\nhello = ->\n  console.log(\"Hello world!!\")\n\n\n\nmain.coffee\nhello()\n\nuser = new User(\"Tanaka\", 24)\nconsole.log(user.profile())\n\n\n\nsrc/user.coffee\nclass User\n  # static private param\n  _uid = 987654321\n\n  # constructor\n  constructor: (@NAME, @age) ->\n\n  # public method\n  profile: ->\n    return @NAME + \" : \" + @age\n\n  # private method\n  _toAge = ->\n    @age++\n\n\n\nGruntfile.coffee\nGrunt\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\uff0e\n\nGruntfile.coffee\nmodule.exports = (grunt)->\n  grunt.initConfig\n    watch:\n      coffee:\n        files: ['src/**/*.coffee']\n        tasks: 'coffee:app'\n    coffee:\n      app:\n        files: [\n          expand: true\n          cwd: 'src/'\n          src: ['**/*.coffee']\n          dest: 'src/js'\n          ext: '.js'\n        ]\n      dist:\n        files: [\n          expand: true\n          cwd: 'src/'\n          src: ['**/_all.coffee']\n          dest: 'dist/'\n          ext: '.js'\n        ]\n    concat:\n      dist:\n        src: ['src/hello.coffee', 'src/user.coffee', 'src/main.coffee']\n        dest: 'src/_all.coffee'\n\n  grunt.loadNpmTasks 'grunt-contrib-coffee'\n  grunt.loadNpmTasks 'grunt-contrib-watch'\n  grunt.loadNpmTasks 'grunt-contrib-concat'\n\n  grunt.registerTask 'default', ['watch']\n  grunt.registerTask 'publish', ['concat', 'coffee:dist']\n\n\nsrc/\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u306e\u5909\u66f4\u3092\u76e3\u8996\u3057\u3066\uff0c\u5909\u66f4\u6642\u306b\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\uff0e\n$ grunt default\n\n\u516c\u958b\u7528JavaScript\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b\uff0e\n$ grunt publish\n\n\nUnit Testing \u95a2\u9023\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8ffd\u52a0\n$ npm install karma --save-dev\n$ npm install grunt-karma --save-dev\n$ npm install karma-chrome-launcher --save-dev\n$ npm install karma-coffee-preprocessor --save-dev\n$ npm install karma-jasmine --save-dev\n\n\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n\nspec/userSpec.coffee\ndescribe \"User\", ->\n\n  describe \"#profile\", ->\n    it \"profile is valid\", ->\n      user = new User(\"Tanaka\", 25)\n      expect(user.profile()).toEqual(\"Tanaka : 25\")\n\n\n\nKarma\u306e\u8a2d\u5b9a\nkarma.conf.coffee\u3092\u4f5c\u6210\u3059\u308b\uff0e\n$ node_modules/karma/bin/karma init\n\n\nkarma.conf.coffee\nmodule.exports = (config) ->\n  config.set\n\n    # base path that will be used to resolve all patterns (eg. files, exclude)\n    basePath: ''\n\n\n    # frameworks to use\n    # available frameworks: https://npmjs.org/browse/keyword/karma-adapter\n    frameworks: ['jasmine']\n\n\n    # list of files / patterns to load in the browser\n    files: [\n      # src\n      'src/**/*.coffee'\n\n      # test\n      'spec/**/*Spec.coffee'\n    ]\n\n\n    # list of files to exclude\n    exclude: [\n    ]\n\n\n    # preprocess matching files before serving them to the browser\n    # available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor\n    preprocessors: {\n      '**/*.coffee': ['coffee']\n    }\n\n\n    # test results reporter to use\n    # possible values: 'dots', 'progress'\n    # available reporters: https://npmjs.org/browse/keyword/karma-reporter\n    reporters: ['progress']\n\n\n    # web server port\n    port: 9876\n\n\n    # enable / disable colors in the output (reporters and logs)\n    colors: true\n\n\n    # level of logging\n    # possible values:\n    # - config.LOG_DISABLE\n    # - config.LOG_ERROR\n    # - config.LOG_WARN\n    # - config.LOG_INFO\n    # - config.LOG_DEBUG\n    logLevel: config.LOG_INFO\n\n\n    # enable / disable watching file and executing tests whenever any file changes\n    autoWatch: true\n\n\n    # start these browsers\n    # available browser launchers: https://npmjs.org/browse/keyword/karma-launcher\n    browsers: ['Chrome']\n\n\n    # Continuous Integration mode\n    # if true, Karma captures browsers, runs the tests and exits\n    singleRun: false\n\n\n\nGrunt\u306b\u30c6\u30b9\u30c8\u95a2\u9023\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\nGruntfile.coffee\ngrunt.initConfig\n    \u2022\u2022\u2022\n    # Add\n    karma:\n        unit:\n            configFile: 'karma.conf.coffee'\n\n\u2022\u2022\u2022\n# Add\ngrunt.loadNpmTasks 'grunt-karma'\n\n\u2022\u2022\u2022\n# Add\ngrunt.registerTask 'spec', ['concat', 'karma']\n\n\n\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\uff0e\n$ grunt spec\n\n\n\u30c6\u30b9\u30c8\u6642\u306bPhantomJS\u3092\u4f7f\u7528\u3059\u308b\n\u4e0a\u8a18\u8a2d\u5b9a\u3060\u3068\u30c6\u30b9\u30c8\u5b9f\u884c\u6642\u306bChrome\u304c\u8d77\u52d5\u3059\u308b\uff0e\n\u6bce\u56de\u8d77\u52d5\u3055\u308c\u308b\u3068\u3046\u3063\u3068\u304a\u3057\u3044\u306e\u3068\uff0cCI\u3084\u308b\u3068\u304d\u306b\u306fPhantomJS\u3092\u4f7f\u3044\u305f\u3044\uff0e\nnpm\u3067phantomjs\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u30e9\u30f3\u30c1\u30e3\u30fc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\uff0e\n$ npm install phantomjs --save-dev\n$ npm install karma-phantomjs-launcher --save-dev\n\nkarma.conf.coffee\u306b\u8a2d\u5b9a\u3059\u308b\uff0e\n\nkarma.conf.coffee\n# browsers: ['Chrome']\nbrowsers: ['PhantomJS']\n\n\n\nSource\n\nView Source on Github\n\nGrunt + CoffeeScript + Karma + Jasmine \u3067\u30c1\u30fc\u30e0\u958b\u767a\u304c\u5b89\u5b9a\u3057\u3066\u304d\u305f\u306e\u3067\uff0c\u5099\u5fd8\u9332\u7684\u306b\u307e\u3068\u3081\u3066\u3044\u304f\uff0e\n\n# CoffeeScript\u95a2\u9023\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\n```\n$ npm init\n$ npm install\n$ npm install coffee-script --save-dev    \n$ npm install grunt --save-dev\n$ npm install grunt-contrib-coffee --save-dev\n$ npm install grunt-contrib-concat --save-dev\n$ npm install grunt-contrib-uglify --save-dev\n$ npm install grunt-contrib-watch --save-dev\n```\n\n# \u30d7\u30ed\u30c0\u30af\u30c8\u30b3\u30fc\u30c9\n\n```coffeescript:hello.coffee\nhello = ->\n  console.log(\"Hello world!!\")\n```\n\n```coffeescript:main.coffee\nhello()\n\nuser = new User(\"Tanaka\", 24)\nconsole.log(user.profile())\n```\n\n```coffeescript:src/user.coffee\nclass User\n  # static private param\n  _uid = 987654321\n\n  # constructor\n  constructor: (@NAME, @age) ->\n\n  # public method\n  profile: ->\n    return @NAME + \" : \" + @age\n\n  # private method\n  _toAge = ->\n    @age++\n```\n\n# Gruntfile.coffee \n\nGrunt\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\uff0e\n\n```coffeescript:Gruntfile.coffee\nmodule.exports = (grunt)->\n  grunt.initConfig\n    watch:\n      coffee:\n        files: ['src/**/*.coffee']\n        tasks: 'coffee:app'\n    coffee:\n      app:\n        files: [\n          expand: true\n          cwd: 'src/'\n          src: ['**/*.coffee']\n          dest: 'src/js'\n          ext: '.js'\n        ]\n      dist:\n        files: [\n          expand: true\n          cwd: 'src/'\n          src: ['**/_all.coffee']\n          dest: 'dist/'\n          ext: '.js'\n        ]\n    concat:\n      dist:\n        src: ['src/hello.coffee', 'src/user.coffee', 'src/main.coffee']\n        dest: 'src/_all.coffee'\n\n  grunt.loadNpmTasks 'grunt-contrib-coffee'\n  grunt.loadNpmTasks 'grunt-contrib-watch'\n  grunt.loadNpmTasks 'grunt-contrib-concat'\n\n  grunt.registerTask 'default', ['watch']\n  grunt.registerTask 'publish', ['concat', 'coffee:dist']\n```\n\nsrc/\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u306e\u5909\u66f4\u3092\u76e3\u8996\u3057\u3066\uff0c\u5909\u66f4\u6642\u306b\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\uff0e\n\n```\n$ grunt default\n```\n\n\u516c\u958b\u7528JavaScript\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b\uff0e\n\n```\n$ grunt publish\n```\n\n# Unit Testing \u95a2\u9023\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8ffd\u52a0\n\n```\n$ npm install karma --save-dev\n$ npm install grunt-karma --save-dev\n$ npm install karma-chrome-launcher --save-dev\n$ npm install karma-coffee-preprocessor --save-dev\n$ npm install karma-jasmine --save-dev\n```\n\n# \u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n\n```coffeescript:spec/userSpec.coffee\ndescribe \"User\", ->\n\n  describe \"#profile\", ->\n    it \"profile is valid\", ->\n      user = new User(\"Tanaka\", 25)\n      expect(user.profile()).toEqual(\"Tanaka : 25\")\n```\n\n# Karma\u306e\u8a2d\u5b9a\n\nkarma.conf.coffee\u3092\u4f5c\u6210\u3059\u308b\uff0e\n\n```\n$ node_modules/karma/bin/karma init\n```\n\n```coffeescript:karma.conf.coffee\nmodule.exports = (config) ->\n  config.set\n\n    # base path that will be used to resolve all patterns (eg. files, exclude)\n    basePath: ''\n\n\n    # frameworks to use\n    # available frameworks: https://npmjs.org/browse/keyword/karma-adapter\n    frameworks: ['jasmine']\n\n\n    # list of files / patterns to load in the browser\n    files: [\n      # src\n      'src/**/*.coffee'\n\n      # test\n      'spec/**/*Spec.coffee'\n    ]\n\n\n    # list of files to exclude\n    exclude: [\n    ]\n\n\n    # preprocess matching files before serving them to the browser\n    # available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor\n    preprocessors: {\n      '**/*.coffee': ['coffee']\n    }\n\n\n    # test results reporter to use\n    # possible values: 'dots', 'progress'\n    # available reporters: https://npmjs.org/browse/keyword/karma-reporter\n    reporters: ['progress']\n\n\n    # web server port\n    port: 9876\n\n\n    # enable / disable colors in the output (reporters and logs)\n    colors: true\n\n\n    # level of logging\n    # possible values:\n    # - config.LOG_DISABLE\n    # - config.LOG_ERROR\n    # - config.LOG_WARN\n    # - config.LOG_INFO\n    # - config.LOG_DEBUG\n    logLevel: config.LOG_INFO\n\n\n    # enable / disable watching file and executing tests whenever any file changes\n    autoWatch: true\n\n\n    # start these browsers\n    # available browser launchers: https://npmjs.org/browse/keyword/karma-launcher\n    browsers: ['Chrome']\n\n\n    # Continuous Integration mode\n    # if true, Karma captures browsers, runs the tests and exits\n    singleRun: false\n```\n\n# Grunt\u306b\u30c6\u30b9\u30c8\u95a2\u9023\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\n```coffeescript:Gruntfile.coffee\ngrunt.initConfig\n    \u2022\u2022\u2022\n    # Add\n    karma:\n        unit:\n            configFile: 'karma.conf.coffee'\n        \n\u2022\u2022\u2022\n# Add\ngrunt.loadNpmTasks 'grunt-karma'\n\n\u2022\u2022\u2022\n# Add\ngrunt.registerTask 'spec', ['concat', 'karma']\n```\n\n\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\uff0e\n\n```\n$ grunt spec\n```\n\n\n# \u30c6\u30b9\u30c8\u6642\u306bPhantomJS\u3092\u4f7f\u7528\u3059\u308b\n\n\u4e0a\u8a18\u8a2d\u5b9a\u3060\u3068\u30c6\u30b9\u30c8\u5b9f\u884c\u6642\u306bChrome\u304c\u8d77\u52d5\u3059\u308b\uff0e\n\u6bce\u56de\u8d77\u52d5\u3055\u308c\u308b\u3068\u3046\u3063\u3068\u304a\u3057\u3044\u306e\u3068\uff0cCI\u3084\u308b\u3068\u304d\u306b\u306fPhantomJS\u3092\u4f7f\u3044\u305f\u3044\uff0e\n\nnpm\u3067phantomjs\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u30e9\u30f3\u30c1\u30e3\u30fc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\uff0e\n\n``` \n$ npm install phantomjs --save-dev\n$ npm install karma-phantomjs-launcher --save-dev\n```\n\nkarma.conf.coffee\u306b\u8a2d\u5b9a\u3059\u308b\uff0e\n\n```coffeescript:karma.conf.coffee\n# browsers: ['Chrome']\nbrowsers: ['PhantomJS']\n```\n\n# Source\n#### [View Source on Github](https://github.com/tanakaworld/coffeescript-project-sample/tree/basic)\n", "tags": ["CoffeeScript", "grunt", "karma", "jasmine"]}