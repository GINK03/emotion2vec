{"context": "\n\n\u7d4c\u7def\n\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u6700\u8fd1\u4f7f\u3044\u59cb\u3081\u305f\u306e\u3067\u3059\u304c\u3001\u672c\u756a\u74b0\u5883\u3067\u904b\u7528\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d0\u306e\u53f0\u6570\u304c\u5897\u3048\u3066\u304d\u3066\u3001\u969c\u5bb3\u5bfe\u5fdc\u6642\u306a\u3069\u306b\u8907\u6570\u53f0\u969c\u5bb3\u304c\u767a\u751f\u3057\u3066\u3044\u308b\u3068\u3001tmux\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u4f5c\u6210\u3057\u3066\u30a6\u30a3\u30f3\u30c9\u30a6\u4f5c\u6210\u3057\u3066\u753b\u9762\u5206\u5272\u3057\u3066\u3092\u8907\u6570\u53f0\u624b\u52d5\u3067\u3084\u308b\u306e\u306f\uff82\uff97\uff72\u3068\u3044\u3046\u3053\u3068\u3067Python\u306e\u52c9\u5f37\u304c\u3066\u3089\u81ea\u52d5\u5316\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u74b0\u5883\n\n\ntmux1.6.3\nCentOS6.7\nPython2.6.6\n\n\n\u3084\u308a\u305f\u3044\u3053\u3068\n\n\n\u8e0f\u307f\u53f0\u30b5\u30fc\u30d0\u3078\u81ea\u7aef\u672b\u304b\u3089SSH\u63a5\u7d9a\u3059\u308b\n\u8e0f\u307f\u53f0\u30b5\u30fc\u30d0\u3067tmux\u3092\u8d77\u52d5\u3057\u30b7\u30b9\u30c6\u30e0\u6bce\uff08\u30b5\u30fc\u30d010\u53f0\u7a0b\u5ea6\uff09\u306b\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\n\u5404\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u5404\u30a6\u30a3\u30f3\u30c9\u30a6\u306f3\u30da\u30a4\u30f3\u69cb\u6210\u306b\u3059\u308b\n\n\n\u30b9\u30af\u30ea\u30d7\u30c8\n\n\n\u30db\u30b9\u30c8\u4e00\u89a7\u306fhosts.ini\u306b\u8a18\u8ff0\u3059\u308b\n\n#!/usr/bin/python\n# -*- coding: utf-8 -*-\n\nimport subprocess\nimport ConfigParser\n\ninifile = ConfigParser.SafeConfigParser()\ninifile.read(\"./hosts.ini\")\n\nfor section in inifile.sections():\n    cmd = \"tmux new-session -s %s -d\" % section\n    subprocess.call(cmd, shell=True)\n    for key, value in inifile.items(section):\n        new_window = \"tmux new-window -t %s\" % section\n        rename     = \"tmux rename-window %s\" % key\n        ssh_0      = \"tmux send-keys -t %s.0 'ssh %s' C-m\" % (key, value)\n        ssh_1      = \"tmux send-keys -t %s.1 'ssh %s' C-m\" % (key, value)\n        ssh_2      = \"tmux send-keys -t %s.2 'ssh %s' C-m\" % (key, value)\n        subprocess.call(new_window, shell=True)\n        subprocess.call(rename, shell=True)\n        subprocess.call(\"tmux split-window\" ,shell=True)\n        subprocess.call(\"tmux split-window -h\" ,shell=True)\n        subprocess.call(ssh_0, shell=True)\n        subprocess.call(ssh_1, shell=True)\n        subprocess.call(ssh_2, shell=True)\n    else:\n        # new-session\u5206\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u4e0d\u8981\u306a\u305f\u3081\u524a\u9664\n        # \u3053\u306e\u51e6\u7406\u304c\u306a\u3093\u3060\u304b\u30a4\u30b1\u3066\u3044\u306a\u3044\n        del_window = \"tmux kill-window -t bash\"\n        subprocess.call(del_window, shell=True)\n\n\nhosts.ini\n[webserver]\ncentos01=192.168.5.11\ncentos02=192.168.5.12\ncentos03=192.168.5.13\ncentos04=192.168.5.14\ncentos05=192.168.5.15\ncentos06=192.168.5.16\n\n[database]\ncentos11=192.168.5.21\ncentos12=192.168.5.22\ncentos13=192.168.5.23\ncentos14=192.168.5.24\ncentos15=192.168.5.25\ncentos16=192.168.5.26\n\n\n\n\u89e3\u8aac\n\n\n\u89e3\u8aac\u3059\u308b\u307e\u3067\u3082\u306a\u3044\u30ab\u30b9\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3059\u304c\u3001\u81ea\u5206\u306e\u305f\u3081\u306e\u899a\u66f8\u3068\u3057\u3066\u30fb\u30fb\u30fb\uff3c(^o^)\uff0f\n\n\nConfigParser\n\n\nhosts.ini\u306e\u30d1\u30fc\u30b5\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u3057\u3066ConfigParser\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3044\u307e\u3059\uff01\n\n\u4f8b\u3048\u3070\u3053\u3093\u306aini\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u3063\u305f\u5834\u5408\u30fb\u30fb\u30fb\u3002\n\n\nhosts.ini\n[webserver]\ncentos01=192.168.5.11\ncentos02=192.168.5.12\n\n\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u30bf\u30d7\u30eb\u306e\u30c7\u30fc\u30bf\u578b\u3067\u8fd4\u3057\u3066\u304f\u308c\u308b\uff01\u4fbf\u5229\uff01\n\n>>> import ConfigParser\n>>> inifile = ConfigParser.SafeConfigParser()\n>>> inifile.read(\"./hosts.ini\")\n['./hosts.ini']\n>>> print inifile.items(\"webserver\")\n[('centos01', '192.168.5.11'), ('centos02', '192.168.5.12')]\n\n\nsubprocess\n\n\ntmux\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u306e\u305f\u3081\u306bsubprocess\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3044\u307e\u3059\uff01\n\n\u5916\u90e8\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u3044\u304f\u3064\u304b\u3042\u308b\u3051\u3069\u3001subprocess\u4ee5\u5916\u306f\u73fe\u5728\u63a8\u5968\u3055\u308c\u3066\u3044\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3059\uff01\n\n\n\u3055\u3063\u304d\u306e\u7d9a\u304d\n>>> import subprocess\n>>> for key, value in inifile.items(\"webserver\"):\n...     cmd = \"echo %s : %s\" % (key, value)\n...     subprocess.call(cmd, shell=True)\n...\ncentos01 : 192.168.5.11\n0\ncentos02 : 192.168.5.12\n0\n\n\n\ntmux\n\n\n\u6e96\u5099\u304c\u6574\u3063\u305f\u306e\u3067tmux\u306e\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9subprosecc\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u3092\u5b9f\u884c\u3057\u307e\u3059\uff01\n\n\u65b0\u3057\u3044\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\ntmux new-session -s {session_name} -d\n\n\n\n\u65b0\u3057\u3044\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u4f5c\u6210\u3059\u308b\ntmux new-window -t {session_name}\n\n\n\n\u30a6\u30a3\u30f3\u30c9\u30a6\u540d\u306e\u5909\u66f4\ntmux rename-window {window_name}\n\n\n\n\u753b\u9762\u5206\u5272\ntmux split-window\ntmux split-window -h\n\n\n\n\u5404\u30da\u30a4\u30f3\u3067\u306eSSH\u63a5\u7d9a\ntmux send-keys -t {window_name}.0 'ssh {IP}'\ntmux send-keys -t {window_name}.1 'ssh {IP}'\ntmux send-keys -t {window_name}.2 'ssh {IP}'\n\n\n\n\u304a\u308f\u308a\u306b\n\n\u306a\u3093\u3060\u304b\u5168\u7136\u30b9\u30de\u30fc\u30c8\u306a\u611f\u3058\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001\u3068\u308a\u3042\u3048\u305a\u6700\u4f4e\u9650\u306e\u8981\u4ef6\u306f\u6e80\u305f\u305b\u305f\u306e\u3067\u3001\u3042\u3068\u306f\u5c11\u3057\u3065\u3064\u6539\u826f\u3057\u3066\u3044\u3051\u308c\u3070\u826f\u3044\u306a\u3068\u3044\u3046\u6c17\u6301\u3061\u3067\u3059\u3002\nRuby\u3082\u697d\u3057\u3044\u3051\u3069Python\u3082\u697d\u3057\u3044\u306a\u3041\u301c\uff3c(^o^)\uff0f\n# **\u7d4c\u7def**\n<blockquote class=\"twitter-tweet\" data-lang=\"ja\"><p lang=\"ja\" dir=\"ltr\">tmux\u4fbf\u5229\u904e\u304e\u308b\u30fb\u30fb\u30fb\u3002\u306a\u3093\u3067\u4eca\u307e\u3067\u4f7f\u304a\u3046\u3068\u3057\u306a\u304b\u3063\u305f\u306e\u3060\u308d\u3046\u304b\u30fb\u30fb\u30fborz</p>&mdash; \u3068\u3057\u3057@\u30d7\u30ed\u30b0\u30e9\u30de\u30fc\u306b\u306a\u308a\u305f\u3072 (@Tocyuki) <a href=\"https://twitter.com/Tocyuki/status/753445302149849089\">2016\u5e747\u670814\u65e5</a></blockquote>\n<script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u6700\u8fd1\u4f7f\u3044\u59cb\u3081\u305f\u306e\u3067\u3059\u304c\u3001\u672c\u756a\u74b0\u5883\u3067\u904b\u7528\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d0\u306e\u53f0\u6570\u304c\u5897\u3048\u3066\u304d\u3066\u3001\u969c\u5bb3\u5bfe\u5fdc\u6642\u306a\u3069\u306b\u8907\u6570\u53f0\u969c\u5bb3\u304c\u767a\u751f\u3057\u3066\u3044\u308b\u3068\u3001tmux\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u4f5c\u6210\u3057\u3066\u30a6\u30a3\u30f3\u30c9\u30a6\u4f5c\u6210\u3057\u3066\u753b\u9762\u5206\u5272\u3057\u3066\u3092\u8907\u6570\u53f0\u624b\u52d5\u3067\u3084\u308b\u306e\u306f\uff82\uff97\uff72\u3068\u3044\u3046\u3053\u3068\u3067Python\u306e\u52c9\u5f37\u304c\u3066\u3089\u81ea\u52d5\u5316\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n# **\u74b0\u5883**\n- tmux1.6.3\n- CentOS6.7\n- Python2.6.6\n\n# **\u3084\u308a\u305f\u3044\u3053\u3068**\n- \u8e0f\u307f\u53f0\u30b5\u30fc\u30d0\u3078\u81ea\u7aef\u672b\u304b\u3089SSH\u63a5\u7d9a\u3059\u308b\n- \u8e0f\u307f\u53f0\u30b5\u30fc\u30d0\u3067`tmux`\u3092\u8d77\u52d5\u3057\u30b7\u30b9\u30c6\u30e0\u6bce\uff08\u30b5\u30fc\u30d010\u53f0\u7a0b\u5ea6\uff09\u306b\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\n- \u5404\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u5404\u30a6\u30a3\u30f3\u30c9\u30a6\u306f3\u30da\u30a4\u30f3\u69cb\u6210\u306b\u3059\u308b\n\n# **\u30b9\u30af\u30ea\u30d7\u30c8**\n- \u30db\u30b9\u30c8\u4e00\u89a7\u306f`hosts.ini`\u306b\u8a18\u8ff0\u3059\u308b\n\n```py\n#!/usr/bin/python\n# -*- coding: utf-8 -*-\n\nimport subprocess\nimport ConfigParser\n\ninifile = ConfigParser.SafeConfigParser()\ninifile.read(\"./hosts.ini\")\n\nfor section in inifile.sections():\n    cmd = \"tmux new-session -s %s -d\" % section\n    subprocess.call(cmd, shell=True)\n    for key, value in inifile.items(section):\n        new_window = \"tmux new-window -t %s\" % section\n        rename     = \"tmux rename-window %s\" % key\n        ssh_0      = \"tmux send-keys -t %s.0 'ssh %s' C-m\" % (key, value)\n        ssh_1      = \"tmux send-keys -t %s.1 'ssh %s' C-m\" % (key, value)\n        ssh_2      = \"tmux send-keys -t %s.2 'ssh %s' C-m\" % (key, value)\n        subprocess.call(new_window, shell=True)\n        subprocess.call(rename, shell=True)\n        subprocess.call(\"tmux split-window\" ,shell=True)\n        subprocess.call(\"tmux split-window -h\" ,shell=True)\n        subprocess.call(ssh_0, shell=True)\n        subprocess.call(ssh_1, shell=True)\n        subprocess.call(ssh_2, shell=True)\n    else:\n        # new-session\u5206\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u4e0d\u8981\u306a\u305f\u3081\u524a\u9664\n        # \u3053\u306e\u51e6\u7406\u304c\u306a\u3093\u3060\u304b\u30a4\u30b1\u3066\u3044\u306a\u3044\n        del_window = \"tmux kill-window -t bash\"\n        subprocess.call(del_window, shell=True)\n```\n\n```ini:hosts.ini\n[webserver]\ncentos01=192.168.5.11\ncentos02=192.168.5.12\ncentos03=192.168.5.13\ncentos04=192.168.5.14\ncentos05=192.168.5.15\ncentos06=192.168.5.16\n\n[database]\ncentos11=192.168.5.21\ncentos12=192.168.5.22\ncentos13=192.168.5.23\ncentos14=192.168.5.24\ncentos15=192.168.5.25\ncentos16=192.168.5.26\n```\n\n# **\u89e3\u8aac**\n- \u89e3\u8aac\u3059\u308b\u307e\u3067\u3082\u306a\u3044\u30ab\u30b9\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3059\u304c\u3001\u81ea\u5206\u306e\u305f\u3081\u306e\u899a\u66f8\u3068\u3057\u3066\u30fb\u30fb\u30fb\uff3c(^o^)\uff0f\n\n## **ConfigParser**\n### `hosts.ini`\u306e\u30d1\u30fc\u30b5\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u3057\u3066`ConfigParser`\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3044\u307e\u3059\uff01\n- \u4f8b\u3048\u3070\u3053\u3093\u306aini\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u3063\u305f\u5834\u5408\u30fb\u30fb\u30fb\u3002\n\n```ini:hosts.ini\n[webserver]\ncentos01=192.168.5.11\ncentos02=192.168.5.12\n```\n\n- \u3053\u3093\u306a\u611f\u3058\u3067\u30bf\u30d7\u30eb\u306e\u30c7\u30fc\u30bf\u578b\u3067\u8fd4\u3057\u3066\u304f\u308c\u308b\uff01\u4fbf\u5229\uff01\n\n```pycon\n>>> import ConfigParser\n>>> inifile = ConfigParser.SafeConfigParser()\n>>> inifile.read(\"./hosts.ini\")\n['./hosts.ini']\n>>> print inifile.items(\"webserver\")\n[('centos01', '192.168.5.11'), ('centos02', '192.168.5.12')]\n```\n\n## **subprocess**\n### `tmux`\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u306e\u305f\u3081\u306b`subprocess`\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3044\u307e\u3059\uff01\n- \u5916\u90e8\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u3044\u304f\u3064\u304b\u3042\u308b\u3051\u3069\u3001`subprocess`\u4ee5\u5916\u306f\u73fe\u5728\u63a8\u5968\u3055\u308c\u3066\u3044\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3059\uff01\n\n```pycon:\u3055\u3063\u304d\u306e\u7d9a\u304d\n>>> import subprocess\n>>> for key, value in inifile.items(\"webserver\"):\n...     cmd = \"echo %s : %s\" % (key, value)\n...     subprocess.call(cmd, shell=True)\n...\ncentos01 : 192.168.5.11\n0\ncentos02 : 192.168.5.12\n0\n```\n\n## **tmux**\n### \u6e96\u5099\u304c\u6574\u3063\u305f\u306e\u3067`tmux`\u306e\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9`subprosecc`\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u3092\u5b9f\u884c\u3057\u307e\u3059\uff01\n```bash:\u65b0\u3057\u3044\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\ntmux new-session -s {session_name} -d\n```\n\n```bash:\u65b0\u3057\u3044\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u4f5c\u6210\u3059\u308b\ntmux new-window -t {session_name}\n```\n\n```bash:\u30a6\u30a3\u30f3\u30c9\u30a6\u540d\u306e\u5909\u66f4\ntmux rename-window {window_name}\n```\n\n```bash:\u753b\u9762\u5206\u5272\ntmux split-window\ntmux split-window -h\n```\n\n```bash:\u5404\u30da\u30a4\u30f3\u3067\u306eSSH\u63a5\u7d9a\ntmux send-keys -t {window_name}.0 'ssh {IP}'\ntmux send-keys -t {window_name}.1 'ssh {IP}'\ntmux send-keys -t {window_name}.2 'ssh {IP}'\n```\n\n# **\u304a\u308f\u308a\u306b**\n\u306a\u3093\u3060\u304b\u5168\u7136\u30b9\u30de\u30fc\u30c8\u306a\u611f\u3058\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001\u3068\u308a\u3042\u3048\u305a\u6700\u4f4e\u9650\u306e\u8981\u4ef6\u306f\u6e80\u305f\u305b\u305f\u306e\u3067\u3001\u3042\u3068\u306f\u5c11\u3057\u3065\u3064\u6539\u826f\u3057\u3066\u3044\u3051\u308c\u3070\u826f\u3044\u306a\u3068\u3044\u3046\u6c17\u6301\u3061\u3067\u3059\u3002\n\nRuby\u3082\u697d\u3057\u3044\u3051\u3069Python\u3082\u697d\u3057\u3044\u306a\u3041\u301c\uff3c(^o^)\uff0f\n", "tags": ["tmux", "Python"]}