{"context": " More than 1 year has passed since last update.\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306a\u8a18\u4e8b\u3092\u307f\u3066\u3001camel\u3067\u3082\u30d1\u30e9\u3063\u3068\u3067\u304d\u305d\u3046\u3060\u3063\u305f\u306e\u3067\u66f8\u3044\u3066\u307f\u305f\u3002\n\u66f8\u3044\u3066\u307f\u305f\u3089\u8272\u3005\u524d\u51e6\u7406\u304c\u5fc5\u8981\u3060\u3063\u305f\u3051\u3069\u3001\u4e3b\u8981\u306a\u90e8\u5206\u306f\u3053\u3053\u3002\n from(\"direct:start\")\n .to(\"http://dummy\") // HTTP\u30a2\u30af\u30bb\u30b9\uff08HTTP_URI\u5148\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3044\u308b\uff09\n .unmarshal().tidyMarkup() // HTML-> XML\u306b\u5909\u63db\n .setHeader(\"title_data\").xpath(\"//title/text()\");// XML\u304b\u3089title\u3092\u53d6\u308a\u51fa\u3057\u3066\u4fdd\u5b58\n\n\u3053\u3053\u3060\u3051\u3067\u3001http\u30a2\u30af\u30bb\u30b9\u3057\u3066title\u306e\u30c6\u30ad\u30b9\u30c8\u90e8\u5206\u3092\u53d6\u308a\u51fa\u3059\u51e6\u7406\u304c\u5b8c\u4e86\u3002\n\nWeb\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\nhttp(s)\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u60c5\u5831\u3092\u53d6\u5f97\u3002\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u3080\u3068\u3044\u3046\u51e6\u7406\u3060\u305d\u3046\u3060\u3002\n\ncamel\u3068\u306f\uff1f\n\u8272\u3005\u306a\u3082\u306e\u306b\u3064\u306a\u304c\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3002\n\u30eb\u30fc\u30c8\u3068\u547c\u3070\u308c\u308b\u51e6\u7406\u306e\u30b9\u30c8\u30fc\u30ea\u30fc\u3063\u307d\u3044\u306e\u3082\u66f8\u3051\u308b\u3002RouteBuilder\u3063\u3066\u6240\u304c\u305d\u308c\u3002\n\u305f\u304f\u3055\u3093\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u3042\u3063\u3066\u3001\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u4f7f\u3063\u3066\u63a5\u7d9a\u3059\u308b\u3002\n\u4eca\u56de\u4f7f\u3063\u305f\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306fhttp\u3068tagsoup\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u306e\u5185\u5bb9\n\n\u8d77\u52d5\u6642\u306b\uff11\u56de\u9650\u308a\u53d6\u3063\u3066\u304f\u308b\nhttps://www.google.co.jp\u3000\u306b\u30a2\u30af\u30bb\u30b9\n\u30bf\u30a4\u30c8\u30eb\u306e\u5185\u5bb9\u3092\u53d6\u3063\u3066\"title_data\"\u306b\u4fdd\u5b58\n\u4fdd\u5b58\u3055\u308c\u305ftitle_data\u3092\u6a19\u6e96\u51fa\u529b\nhttp\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306f\u52d5\u7684\u306bURL\u3092\u5909\u66f4\u3057\u3066\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3044\u308b\n\n\nHello\npackage test.scraping;\n\nimport org.apache.camel.Exchange;\nimport org.apache.camel.builder.RouteBuilder;\nimport org.apache.camel.impl.DefaultCamelContext;\nimport org.apache.camel.impl.DefaultExchange;\nimport org.apache.camel.main.Main;\n\npublic class Hello {\n\n    public static void main(String[] args) throws Exception {\n        // camel\u306e\u8a2d\u5b9a\u3068\u8d77\u52d5\n        Main camel = new Main();\n        camel.addRouteBuilder(getTitleRoute);\n        camel.start();\n\n        // camel\u306e\u30eb\u30fc\u30c8\u306b\u9001\u308b\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n        Exchange exchange = new DefaultExchange(new DefaultCamelContext());\n        exchange.getIn().setHeader(Exchange.HTTP_URI, \"https://www.google.co.jp\");\n\n        // camel\u306e\u30eb\u30fc\u30c8\u306b\u30c7\u30fc\u30bf\u3092\u9001\u308b\n        camel.getCamelTemplate().send(\"direct:start\", exchange);\n\n        // \u7d50\u679c\u3092\u53d6\u5f97\u30fb\u8868\u793a\n        String title = exchange.getIn().getHeader(\"title_data\", String.class);\n        System.out.println(title);\n    }\n\n    /** HTTP(s)\u30a2\u30af\u30bb\u30b9\u3057\u3066\u30bf\u30a4\u30c8\u30eb\u3092\u53d6\u3063\u3066\u304f\u308b\u30b7\u30ca\u30ea\u30aa */\n    public static RouteBuilder getTitleRoute = new RouteBuilder() {\n\n        @Override\n        public void configure() throws Exception {\n            from(\"direct:start\")\n            .to(\"http://dummy\")\n            .unmarshal().tidyMarkup() // HTML-> XML\u306b\u5909\u63db\n            .setHeader(\"title_data\").xpath(\"//title/text()\"); // XML\u304b\u3089title\u3092\u53d6\u308a\u51fa\u3057\u3066\u4fdd\u5b58\n        }\n    };\n}\n\n\n\u3067\u304d\u305fpom\u3082\u3064\u3044\u3067\u306b\u8f09\u3063\u3051\u3066\u304a\u304d\u307e\u3059\n\npom.xml\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n  <modelVersion>4.0.0</modelVersion>\n  <groupId>test</groupId>\n  <artifactId>test.scraping</artifactId>\n  <version>0.0.1-SNAPSHOT</version>\n  <properties>\n    <camel-ver>2.12.2</camel-ver>\n  </properties>\n  <dependencies>\n    <dependency>\n        <groupId>org.apache.camel</groupId>\n        <artifactId>camel-core</artifactId>\n        <version>${camel-ver}</version>\n    </dependency>\n    <dependency>\n        <groupId>org.apache.camel</groupId>\n        <artifactId>camel-http</artifactId>\n        <version>${camel-ver}</version>\n    </dependency>\n    <dependency>\n        <groupId>org.apache.camel</groupId>\n        <artifactId>camel-tagsoup</artifactId>\n        <version>${camel-ver}</version>\n    </dependency>\n  </dependencies>\n</project>\n\n\n\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306a\u8a18\u4e8b\u3092\u307f\u3066\u3001camel\u3067\u3082\u30d1\u30e9\u3063\u3068\u3067\u304d\u305d\u3046\u3060\u3063\u305f\u306e\u3067\u66f8\u3044\u3066\u307f\u305f\u3002\n\u66f8\u3044\u3066\u307f\u305f\u3089\u8272\u3005\u524d\u51e6\u7406\u304c\u5fc5\u8981\u3060\u3063\u305f\u3051\u3069\u3001\u4e3b\u8981\u306a\u90e8\u5206\u306f\u3053\u3053\u3002\n\n```java\n from(\"direct:start\")\n .to(\"http://dummy\") // HTTP\u30a2\u30af\u30bb\u30b9\uff08HTTP_URI\u5148\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3044\u308b\uff09\n .unmarshal().tidyMarkup() // HTML-> XML\u306b\u5909\u63db\n .setHeader(\"title_data\").xpath(\"//title/text()\");// XML\u304b\u3089title\u3092\u53d6\u308a\u51fa\u3057\u3066\u4fdd\u5b58\n```\n\n\u3053\u3053\u3060\u3051\u3067\u3001http\u30a2\u30af\u30bb\u30b9\u3057\u3066title\u306e\u30c6\u30ad\u30b9\u30c8\u90e8\u5206\u3092\u53d6\u308a\u51fa\u3059\u51e6\u7406\u304c\u5b8c\u4e86\u3002\n\n# Web\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\nhttp(s)\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u60c5\u5831\u3092\u53d6\u5f97\u3002\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u3080\u3068\u3044\u3046\u51e6\u7406\u3060\u305d\u3046\u3060\u3002\n\n# camel\u3068\u306f\uff1f\n\u8272\u3005\u306a\u3082\u306e\u306b\u3064\u306a\u304c\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3002\n\u30eb\u30fc\u30c8\u3068\u547c\u3070\u308c\u308b\u51e6\u7406\u306e\u30b9\u30c8\u30fc\u30ea\u30fc\u3063\u307d\u3044\u306e\u3082\u66f8\u3051\u308b\u3002RouteBuilder\u3063\u3066\u6240\u304c\u305d\u308c\u3002\n\u305f\u304f\u3055\u3093\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u3042\u3063\u3066\u3001\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u4f7f\u3063\u3066\u63a5\u7d9a\u3059\u308b\u3002\n\u4eca\u56de\u4f7f\u3063\u305f\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306fhttp\u3068tagsoup\u3002\n\n# \u30b5\u30f3\u30d7\u30eb\u306e\u5185\u5bb9\n\n* \u8d77\u52d5\u6642\u306b\uff11\u56de\u9650\u308a\u53d6\u3063\u3066\u304f\u308b\n* https://www.google.co.jp\u3000\u306b\u30a2\u30af\u30bb\u30b9\n* \u30bf\u30a4\u30c8\u30eb\u306e\u5185\u5bb9\u3092\u53d6\u3063\u3066\"title_data\"\u306b\u4fdd\u5b58\n* \u4fdd\u5b58\u3055\u308c\u305ftitle_data\u3092\u6a19\u6e96\u51fa\u529b\n* http\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306f\u52d5\u7684\u306bURL\u3092\u5909\u66f4\u3057\u3066\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3044\u308b\n\n```java:Hello\npackage test.scraping;\n\nimport org.apache.camel.Exchange;\nimport org.apache.camel.builder.RouteBuilder;\nimport org.apache.camel.impl.DefaultCamelContext;\nimport org.apache.camel.impl.DefaultExchange;\nimport org.apache.camel.main.Main;\n\npublic class Hello {\n\t\n\tpublic static void main(String[] args) throws Exception {\n\t\t// camel\u306e\u8a2d\u5b9a\u3068\u8d77\u52d5\n\t\tMain camel = new Main();\n\t\tcamel.addRouteBuilder(getTitleRoute);\n\t\tcamel.start();\n\t\t\n\t\t// camel\u306e\u30eb\u30fc\u30c8\u306b\u9001\u308b\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n\t\tExchange exchange = new DefaultExchange(new DefaultCamelContext());\n\t\texchange.getIn().setHeader(Exchange.HTTP_URI, \"https://www.google.co.jp\");\n\t\t\n\t\t// camel\u306e\u30eb\u30fc\u30c8\u306b\u30c7\u30fc\u30bf\u3092\u9001\u308b\n\t\tcamel.getCamelTemplate().send(\"direct:start\", exchange);\n\t\t\n\t\t// \u7d50\u679c\u3092\u53d6\u5f97\u30fb\u8868\u793a\n\t\tString title = exchange.getIn().getHeader(\"title_data\", String.class);\n\t\tSystem.out.println(title);\n\t}\n\t\n\t/** HTTP(s)\u30a2\u30af\u30bb\u30b9\u3057\u3066\u30bf\u30a4\u30c8\u30eb\u3092\u53d6\u3063\u3066\u304f\u308b\u30b7\u30ca\u30ea\u30aa */\n\tpublic static RouteBuilder getTitleRoute = new RouteBuilder() {\n\t\t\n\t\t@Override\n\t\tpublic void configure() throws Exception {\n\t\t\tfrom(\"direct:start\")\n\t\t\t.to(\"http://dummy\")\n\t\t\t.unmarshal().tidyMarkup() // HTML-> XML\u306b\u5909\u63db\n\t\t\t.setHeader(\"title_data\").xpath(\"//title/text()\"); // XML\u304b\u3089title\u3092\u53d6\u308a\u51fa\u3057\u3066\u4fdd\u5b58\n\t\t}\n\t};\n}\n```\n\n\u3067\u304d\u305fpom\u3082\u3064\u3044\u3067\u306b\u8f09\u3063\u3051\u3066\u304a\u304d\u307e\u3059\n\n```xml:pom.xml\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n  <modelVersion>4.0.0</modelVersion>\n  <groupId>test</groupId>\n  <artifactId>test.scraping</artifactId>\n  <version>0.0.1-SNAPSHOT</version>\n  <properties>\n  \t<camel-ver>2.12.2</camel-ver>\n  </properties>\n  <dependencies>\n  \t<dependency>\n  \t\t<groupId>org.apache.camel</groupId>\n  \t\t<artifactId>camel-core</artifactId>\n  \t\t<version>${camel-ver}</version>\n  \t</dependency>\n  \t<dependency>\n  \t\t<groupId>org.apache.camel</groupId>\n  \t\t<artifactId>camel-http</artifactId>\n  \t\t<version>${camel-ver}</version>\n  \t</dependency>\n  \t<dependency>\n  \t\t<groupId>org.apache.camel</groupId>\n  \t\t<artifactId>camel-tagsoup</artifactId>\n  \t\t<version>${camel-ver}</version>\n  \t</dependency>\n  </dependencies>\n</project>\n```\n\n", "tags": ["Java", "apache-camel"]}