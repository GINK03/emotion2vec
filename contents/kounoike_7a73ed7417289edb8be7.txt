{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u524d\u306b\u3082\u4f3c\u305f\u3088\u3046\u306a\u3053\u3068\u3092\u66f8\u304d\u307e\u3057\u305f\u304c\u6539\u3081\u3066\u3002\n\npyenv\u74b0\u5883\u306e\u6e96\u5099\npyenv, pyenv-virtualenv\u3092homebrew\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n$ mkdir qiita-sin\n$ cd qiita-sin\n$ pyenv virtualenv 2.7.8 qiita-sin\n$ pyenv local qiita-sin\n\n\n\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068Heroku\u3067\u52d5\u304b\u3059\u6e96\u5099\n$ pip install flask\n$ pip install gunicorn\n$ pip install matplotlib\n$ echo python-2.7.8 > runtime.txt\n$ pip freeze > requirements.txt\n$ echo web: gunicorn app:app --log-file=- > Procfile\n$ mkdir templates\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3001\u30a2\u30d7\u30ea\u306e\u6e96\u5099\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n\nsin.html\n<!DOCTYPE html>\n<html lang=\"ja\">\n    <head>\n        <title>sin\u30ab\u30fc\u30d6\u30c6\u30b9\u30c8</title>\n    </head>\n    <body>\n        <h1>sin\u30ab\u30fc\u30d6\u30c6\u30b9\u30c8</h1>\n        {% autoescape false %}{{svgstr}}{% endautoescape %}\n    </body>\n</html>\n\n\n\n\u30a2\u30d7\u30ea\n\napp.py\n#!/bin/env python\n# coding: utf-8\n\nimport os\nimport StringIO\n\nfrom flask import Flask, render_template\nimport matplotlib\nmatplotlib.use('Agg')\nimport matplotlib.pyplot as plt\nimport numpy as np\n\napp = Flask(__name__)\napp.debug = True\n\n@app.route('/')\ndef do_sin():\n    x = np.arange(-np.pi, np.pi, 0.1)\n    y = np.sin(x)\n\n    fig = plt.figure()\n    plt.plot(x, y, label=\"sin\")\n    plt.legend(loc=\"best\")\n\n    strio = StringIO.StringIO()\n    fig.savefig(strio, format=\"svg\")\n    plt.close(fig)\n\n    strio.seek(0)\n    svgstr = strio.buf[strio.buf.find(\"<svg\"):]\n\n    return render_template(\"sin.html\", svgstr=svgstr.decode(\"utf-8\"))\n\nif __name__ == \"__main__\":\n    port = int(os.environ.get(\"PORT\", 5000))\n    app.run(port=port)\n\n\n\n\u30c7\u30d7\u30ed\u30a4\n\ngit\u306b\u8ffd\u52a0\n$ git init\n$ echo .python-version > .gitignore\n$ git add .\n$ git commit -m \"initial commit\" .\n\n\nheroku\u306b\u30c7\u30d7\u30ed\u30a4\n$ heroku create\n$ git push heroku master\n\nnumpy\u3084matplotlib\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u3042\u308b\u306e\u3067\u3057\u3070\u3057\u30b3\u30fc\u30d2\u30fc\u30d6\u30ec\u30a4\u30af\n\n\u5b8c\u6210\n\n\u78ba\u8a8d\n$ heroku open\n\nhttps://limitless-garden-3527.herokuapp.com/ \u304c\u958b\u304f\n\n\u30dd\u30a4\u30f3\u30c8\n\nSVG\u306e\u51e6\u7406\uff08strio.buf.find(\"<svg\")\u3068decode(\"utf-8\")\u3042\u305f\u308a\u304c\u30dd\u30a4\u30f3\u30c8\n\u65e5\u672c\u8a9e\u306e\u8868\u793a\u306f\u3042\u3068\u3067\u307e\u305f\n\n\n\u30b3\u30e1\u30f3\u30c8\n\u306a\u3093\u304b\u3044\u3064\u306e\u9593\u306b\u304bCeder-14\u30b9\u30bf\u30c3\u30af\u3068https\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306b\u306a\u3063\u3066\u305f\u3093\u3067\u3059\u306d\n# \u306f\u3058\u3081\u306b\n\u524d\u306b\u3082\u4f3c\u305f\u3088\u3046\u306a\u3053\u3068\u3092\u66f8\u304d\u307e\u3057\u305f\u304c\u6539\u3081\u3066\u3002\n\n## pyenv\u74b0\u5883\u306e\u6e96\u5099\npyenv, pyenv-virtualenv\u3092homebrew\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```shell-session\n$ mkdir qiita-sin\n$ cd qiita-sin\n$ pyenv virtualenv 2.7.8 qiita-sin\n$ pyenv local qiita-sin\n```\n\n## \u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068Heroku\u3067\u52d5\u304b\u3059\u6e96\u5099\n```shell-session\n$ pip install flask\n$ pip install gunicorn\n$ pip install matplotlib\n$ echo python-2.7.8 > runtime.txt\n$ pip freeze > requirements.txt\n$ echo web: gunicorn app:app --log-file=- > Procfile\n$ mkdir templates\n```\n\n# \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3001\u30a2\u30d7\u30ea\u306e\u6e96\u5099\n## \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n\n```html+jinja:sin.html\n<!DOCTYPE html>\n<html lang=\"ja\">\n    <head>\n        <title>sin\u30ab\u30fc\u30d6\u30c6\u30b9\u30c8</title>\n    </head>\n    <body>\n        <h1>sin\u30ab\u30fc\u30d6\u30c6\u30b9\u30c8</h1>\n        {% autoescape false %}{{svgstr}}{% endautoescape %}\n    </body>\n</html>\n```\n\n## \u30a2\u30d7\u30ea\n\n```py:app.py\n#!/bin/env python\n# coding: utf-8\n\nimport os\nimport StringIO\n\nfrom flask import Flask, render_template\nimport matplotlib\nmatplotlib.use('Agg')\nimport matplotlib.pyplot as plt\nimport numpy as np\n\napp = Flask(__name__)\napp.debug = True\n\n@app.route('/')\ndef do_sin():\n    x = np.arange(-np.pi, np.pi, 0.1)\n    y = np.sin(x)\n\n    fig = plt.figure()\n    plt.plot(x, y, label=\"sin\")\n    plt.legend(loc=\"best\")\n\n    strio = StringIO.StringIO()\n    fig.savefig(strio, format=\"svg\")\n    plt.close(fig)\n\n    strio.seek(0)\n    svgstr = strio.buf[strio.buf.find(\"<svg\"):]\n\n    return render_template(\"sin.html\", svgstr=svgstr.decode(\"utf-8\"))\n\nif __name__ == \"__main__\":\n    port = int(os.environ.get(\"PORT\", 5000))\n    app.run(port=port)\n```\n\n# \u30c7\u30d7\u30ed\u30a4\n## git\u306b\u8ffd\u52a0\n\n```shell-session\n$ git init\n$ echo .python-version > .gitignore\n$ git add .\n$ git commit -m \"initial commit\" .\n```\n\n## heroku\u306b\u30c7\u30d7\u30ed\u30a4\n```shell-session\n$ heroku create\n$ git push heroku master\n```\n\nnumpy\u3084matplotlib\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u3042\u308b\u306e\u3067\u3057\u3070\u3057\u30b3\u30fc\u30d2\u30fc\u30d6\u30ec\u30a4\u30af\n\n# \u5b8c\u6210\n## \u78ba\u8a8d\n```shell-session\n$ heroku open\n```\n\nhttps://limitless-garden-3527.herokuapp.com/ \u304c\u958b\u304f\n\n# \u30dd\u30a4\u30f3\u30c8\n\n* SVG\u306e\u51e6\u7406`\uff08strio.buf.find(\"<svg\")`\u3068`decode(\"utf-8\")`\u3042\u305f\u308a\u304c\u30dd\u30a4\u30f3\u30c8\n* \u65e5\u672c\u8a9e\u306e\u8868\u793a\u306f\u3042\u3068\u3067\u307e\u305f\n\n# \u30b3\u30e1\u30f3\u30c8\n\u306a\u3093\u304b\u3044\u3064\u306e\u9593\u306b\u304bCeder-14\u30b9\u30bf\u30c3\u30af\u3068https\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306b\u306a\u3063\u3066\u305f\u3093\u3067\u3059\u306d\n", "tags": ["Heroku", "Python", "matplotlib", "Flask", "SVG"]}