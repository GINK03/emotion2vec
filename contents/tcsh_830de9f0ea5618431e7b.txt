{"context": "\u81ea\u5206\u306e\u30c9\u30e1\u30a4\u30f3\u306e\u6a29\u5a01\u30b5\u30fc\u30d0\u3092Route53\u306b\u5f15\u304d\u53d7\u3051\u3066\u3082\u3089\u3046\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n\n[\u91cd\u8981] Route53\u306b\u306f\u7121\u6599\u4f7f\u7528\u67a0\u304c\u306a\u3044\u306e\u3067\u8ab2\u91d1\u304c\u767a\u751f\n\n\nRoute53\u306b\u306f\u7121\u6599\u4f7f\u7528\u67a0\u304c\u306a\u3044\u306e\u3067\u3001\u4e0b\u8a18\u306e\u6599\u91d1\u304c\u304b\u304b\u308a\u307e\u3059\u3002\n\nhttp://aws.amazon.com/jp/route53/pricing/\n\n\n\n\u30db\u30b9\u30c8\u30be\u30fc\u30f3\n\n\u30db\u30b9\u30c8\u30be\u30fc\u30f3\u3054\u3068 (\u6700\u521d\u306e25\u30db\u30b9\u30c8\u30be\u30fc\u30f3\u307e\u3067): 0.50 USD\n\u4f5c\u6210\u304b\u3089 12 \u6642\u9593\u4ee5\u5185\u306b\u524a\u9664\u3055\u308c\u305f\u30db\u30b9\u30c8\u30be\u30fc\u30f3\u306b\u3064\u3044\u3066\u306f\u7121\u6599\u3002\n1\u30f5\u6708\u306b\u6e80\u305f\u306a\u3044\u5206\u306b\u5bfe\u3057\u3066\u65e5\u5272\u308a\u8a08\u7b97\u3055\u308c\u305a\u3001\u6708\u521d\u306b\u8ab2\u91d1\u3055\u308c\u308b\u3002\n\n\n\n\u30af\u30a8\u30ea(\u6a19\u6e96\u7684\u30af\u30a8\u30ea\u3092\u9078\u629e\u3057\u305f\u5834\u5408)\n\n100\u4e07\u30af\u30a8\u30ea\u3054\u3068 (\u6700\u521d\u306e10\u5104\u30af\u30a8\u30ea/\u6708\u307e\u3067): 0.500 USD\n\n\n\n\n\u524d\u63d0\u6761\u4ef6\n\n\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\n\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u4fdd\u6709\u3057\u3066\u304a\u308a\u3001\u30ec\u30b8\u30b9\u30c8\u30e9\u306b\u5bfe\u3057\u3066Whois\u60c5\u5831\u5909\u66f4\u306e\u4f9d\u983c\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u3002\n\nRoute53\u3078\u306e\u6a29\u9650\nRoute53\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\nAWS CLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\nAWS CLI 1.10.38\n\n\n\u30b3\u30de\u30f3\u30c9\naws --version\n\n\n\n\u7d50\u679c(\u4f8b)\n      aws-cli/1.10.38 Python/2.7.11 Darwin/15.5.0 botocore/1.4.28\n\n\n\n0. \u6e96\u5099\n\n0.1. \u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u6c7a\u5b9a\n\u69cb\u7bc9\u3059\u308b\u30ea\u30fc\u30b8\u30e7\u30f3\u3092\u6c7a\u3081\u307e\u3059\u3002 (\u30ab\u30ec\u30f3\u30c8\u30e6\u30fc\u30b6\u304c\u5229\u7528\u3059\u308b\u30ab\u30ec\u30f3\u30c8\u30ea\u30fc\u30b8\u30e7\u30f3\u3082\u5207\u308a\u5909\u308f\u308a\u307e\u3059\u3002)\n\n\u30b3\u30de\u30f3\u30c9(\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u5834\u5408)\nexport AWS_DEFAULT_REGION='ap-northeast-1'\n\n\n\n0.2. \u5909\u6570\u306e\u78ba\u8a8d\n\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u304c\u60f3\u5b9a\u306e\u3082\u306e\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\naws configure list\n\n\n\n\u7d50\u679c(\u4f8b)\n\n            Name                    Value             Type    Location\n            ----                    -----             ----    --------\n         profile         administrator-prjz-mbp13        env    AWS_DEFAULT_PROFILE\n      access_key     ****************XXXX shared-credentials-file\n      secret_key     ****************XXXX shared-credentials-file\n          region                         ap-northeast-1  env    AWS_DEFAULT_REGION\n\n\nAssumeRole\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306fprofile\u304c ''\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002 \u305d\u308c\u4ee5\u5916\u306e\u3068\u304d\u306bprofile\u304c '' \u3068\u8868\u793a\u3055\u308c\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nexport AWS_DEFAULT_PROFILE=<IAM\u30e6\u30fc\u30b6\u540d>\n\n\n\n0.3. whois\u30b3\u30de\u30f3\u30c9\u306e\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\nwhich whois\n\n\nAmazon Linux\u306e\u5834\u5408\u3001\u6a19\u6e96\u3067whois\u30b3\u30de\u30f3\u30c9\u304c\u306f\u3044\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u3053\u3053\u3067\u306f\u65e5\u672c\u8a9e\u5bfe\u5fdc(\u3089\u3057\u3044)jwhois\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9(AmazonLinux)\nsudo yum install jwhois -y\n\n\n\u6ce8\u91c8: OSX\u3084FreeBSD\u3067\u306f\u3001whois\u30b3\u30de\u30f3\u30c9\u306f\u6a19\u6e96\u3067\u5229\u7528\u53ef\u80fd\u3067\u3059\u3002\n\n1. \u4e8b\u524d\u4f5c\u696d\n\n\u767b\u9332\u30c9\u30e1\u30a4\u30f3\u306e\u6c7a\u5b9a\nRoute53\u306b\u767b\u9332\u3059\u308b\u30c9\u30e1\u30a4\u30f3\u3092\u6c7a\u3081\u307e\u3059\u3002\n\u30d0\u30b1\u30c3\u30c8\u306e\u4f5c\u6210 (\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3)\n( http://qiita.com/tcsh/items/1f707443e667b6b3c8cf )\u3067\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u7528\u306e\u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u6210\u5f8c\u3067\u3042\u308c\u3070\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306b\u5909\u6570\u306b\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u683c\u7d0d\u3057\u307e\u3059\u3002\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nR53_ZONE_NAME=\"${DOMAIN_NAME}\" \\\n        && echo ${R53_ZONE_NAME}\n\n\n\n2. hosted zone\u4f5c\u6210\nRoute53\u4e0a\u3067\u3001\u767b\u9332\u3059\u308b\u30c9\u30e1\u30a4\u30f3\u306ehosted zone\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nCaller\u306f\u3001\u5909\u66f4\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30e6\u30cb\u30fc\u30af\u6027\u304c\u4fdd\u8a3c\u3055\u308c\u308c\u3070\u3069\u3093\u306a\u6587\u5b57\u5217\u3067\u3082\u826f\u3044\u3088\u3046\u3067\u3059\u3002\nComment\u306f\u3001\u4efb\u610f\u306e\u6587\u5b57\u5217\u3067OK\u3067\u3059\u3002(\u30aa\u30d7\u30b7\u30e7\u30f3)\n\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nR53_CALLER=\"${R53_ZONE_NAME}-$(date +%Y%m%d-%H%M%S)\"\nR53_COMMENT=\"example zone\"\n\n\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n        R53_ZONE_NAME: ${R53_ZONE_NAME}\n        R53_CALLER:    ${R53_CALLER}\n        R53_COMMENT:  \"${R53_COMMENT}\"\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws route53 create-hosted-zone \\\n        --name ${R53_ZONE_NAME} \\\n        --caller-reference ${R53_CALLER} \\\n        --hosted-zone-config Comment=\"${R53_COMMENT}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"HostedZone\": {\n          \"ResourceRecordSetCount\": 2,\n          \"CallerReference\": \"example.jp-20160620-193012\",\n          \"Config\": {\n              \"Comment\": \"example zone\",\n              \"PrivateZone\": false\n          },\n          \"Id\": \"/hostedzone/xxxxxxxxxxxxx\",\n          \"Name\": \"example.jp.\"\n        },\n        \"DelegationSet\": {\n          \"NameServers\": [\n              \"ns-xxx.awsdns-xx.co.uk\",\n              \"ns-xxx.awsdns-xx.net\",\n              \"ns-xxx.awsdns-xx.com\",\n              \"ns-xxx.awsdns-xx.org\"\n          ]\n        },\n        \"Location\": \"https://route53.amazonaws.com/2013-04-01/hostedzone/xxxxxxxxxxxxx\",\n        \"ChangeInfo\": {\n          \"Status\": \"PENDING\",\n          \"SubmittedAt\": \"6\u6708 19, 2016T01:23:45.678Z\",\n          \"Id\": \"/change/xxxxxxxxxxxxx\"\n        }\n      }\n\n\n\n2. ns\u78ba\u8a8d\n\u4f5c\u6210\u3057\u305fhosted zone\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305fNS\u30ec\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\u307e\u305a\u3001\u4f5c\u6210\u3057\u305fhosted zone\u306eID\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\nR53_ZONE_ID=$( \\\n        aws route53 list-hosted-zones \\\n          --query \"HostedZones[?Name == \\`${R53_ZONE_NAME}.\\`].Id\" \\\n          --output text \\\n        | sed 's/\\/hostedzone\\///' \\\n) && echo ${R53_ZONE_ID}\n\n\n\n\u7d50\u679c(\u4f8b)\n      Zxxxxxxxxxxxx\n\n\n\u305d\u306eHosted zone ID\u306eNS(NameServers)\u306e\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002 \u3053\u3053\u3067\u306f\u3001\u30ec\u30b8\u30b9\u30c8\u30e9\u306e\u7ba1\u7406\u753b\u9762\u3067\u4f5c\u696d\u3057\u3084\u3059\u3044\u3088\u3046\u306b\u30c6\u30fc\u30d6\u30eb\u5f62\u5f0f\u3067\u51fa\u529b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30b3\u30de\u30f3\u30c9\naws route53 get-hosted-zone \\\n        --id /hostedzone/${R53_ZONE_ID} \\\n        --query DelegationSet.NameServers \\\n        --output table\n\n\n\n\u7d50\u679c(\u4f8b)\n      -----------------------------\n      |       GetHostedZone       |\n      +---------------------------+\n      |  ns-xxx.awsdns-xx.co.uk   |\n      |  ns-xxx.awsdns-xx.net     |\n      |  ns-xxx.awsdns-xx.com     |\n      |  ns-xxx.awsdns-xx.org     |\n      +---------------------------+\n\n\nBIND\u306b\u767b\u9332\u3059\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3057\u307e\u3059\u3002\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n        R53_ZONE_NAME: ${R53_ZONE_NAME}\n        R53_ZONE_ID:   ${R53_ZONE_ID}\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\nfor i in $( \\\n        aws route53 get-hosted-zone \\\n          --id /hostedzone/${R53_ZONE_ID} \\\n          --query DelegationSet.NameServers \\\n          --output text \\\n); do echo \"${R53_ZONE_NAME}. IN NS ${i}.\"; done\n\n\n\n3. whois\u5909\u66f4\n\n3.1. Route53\u3078\u306e\u30c9\u30e1\u30a4\u30f3\u306e\u767b\u9332\n\nwhois\u5909\u66f4 (\u30c9\u30e1\u30a4\u30f3\u3092Route53\u306b\u767b\u9332\u3059\u308b\u5834\u5408)\nRoute53\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305fNS\u30ec\u30b3\u30fc\u30c9\u306e\u30db\u30b9\u30c8\u540d\u3092\u3001\u81ea\u5206\u306e\u30c9\u30e1\u30a4\u30f3\u306eWhois\u60c5\u5831\u306bName Server\u3068\u3057\u3066\u767b\u9332\u3057\u307e\u3059\u3002\n\u30c9\u30e1\u30a4\u30f3\u306e\u7ba1\u7406\u3092\u59d4\u8a17\u3057\u3066\u3044\u308b\u30ec\u30b8\u30b9\u30c8\u30e9\u306e\u7ba1\u7406\u753b\u9762\u306a\u3069\u3092\u5229\u7528\u3057\u307e\u3059\u3002 (\u5404\u30ec\u30b8\u30b9\u30c8\u30e9\u306e\u30b5\u30dd\u30fc\u30c8\u30da\u30fc\u30b8\u306a\u3069\u3092\u53c2\u8003\u306b\u304c\u3093\u3070\u3063\u3066\u304f\u3060\u3055\u3044\u3002)\n\n\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u5909\u66f4 (\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3092Route53\u306b\u767b\u9332\u3059\u308b\u5834\u5408)\nRoute53\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305fNS\u30ec\u30b3\u30fc\u30c9\u306e\u30db\u30b9\u30c8\u540d\u3092\u3001\u30c9\u30e1\u30a4\u30f3\u3092\u7ba1\u7406\u3059\u308b\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u306b\u767b\u9332\u3057\u307e\u3059\u3002 (BIND\u3084NSD\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u53c2\u8003\u306b\u304c\u3093\u3070\u3063\u3066\u304f\u3060\u3055\u3044\u3002)\n\n3.2. whois\u78ba\u8a8d (\u30c9\u30e1\u30a4\u30f3\u5168\u4f53\u3092Route53\u306b\u767b\u9332\u3059\u308b\u5834\u5408\u306e\u307f)\n\u81ea\u5206\u306e\u30c9\u30e1\u30a4\u30f3\u306eWhois\u60c5\u5831\u306bName Server\u60c5\u5831\u304c\u53cd\u6620\u3055\u308c\u305f\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\nwhois ${R53_ZONE_NAME} | grep 'Name Server'\n\n\n\n\u7d50\u679c(.org\u306e\u4f8b)\n      Name Server:NS-xxxx.AWSDNS-xx.ORG\n      Name Server:NS-xx.AWSDNS-xx.COM\n      Name Server:NS-xxx.AWSDNS-xx.NET\n      Name Server:NS-xxxx.AWSDNS-xx.CO.UK\n      Name Server:\n      Name Server:\n      Name Server:\n      Name Server:\n      Name Server:\n      Name Server:\n      Name Server:\n      Name Server:\n      Name Server:\n\n\n\n\u7d50\u679c(.jp\u306e\u4f8b)\n      [Name Server]                   NS-xxxx.AWSDNS-xx.ORG\n      [Name Server]                   NS-xx.AWSDNS-xx.COM\n      [Name Server]                   NS-xxx.AWSDNS-xx.NET\n      [Name Server]                   NS-xxxx.AWSDNS-xx.CO.UK\n\n\n\n3. \u4e8b\u5f8c\u4f5c\u696d\n\u81ea\u5206\u306e\u30c9\u30e1\u30a4\u30f3\u306eNS\u30ec\u30b3\u30fc\u30c9\u304c\u3001Route53\u306e\u767b\u9332\u60c5\u5831\u3068\u540c\u3058\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\ndig ns ${R53_ZONE_NAME} | grep ${R53_ZONE_NAME}\n\n\n\n\u7d50\u679c\n      ;example.jp.                  IN      NS\n      example.jp.           152631  IN      NS      ns-xxxx.awsdns-xx.org.\n      example.jp.           152631  IN      NS      ns-xxxx.awsdns-xx.co.uk.\n      example.jp.           152631  IN      NS      ns-xx.awsdns-xx.com.\n      example.jp.           152631  IN      NS      ns-xxx.awsdns-xx.net.\n\n\n\n\u5b8c\u4e86\n\u3053\u308c\u4ee5\u964d\u306f\u3001Route53\u4e0a\u3067\u81ea\u5206\u306e\u30c9\u30e1\u30a4\u30f3\u3092\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u81ea\u5206\u306e\u30c9\u30e1\u30a4\u30f3\u306e\u6a29\u5a01\u30b5\u30fc\u30d0\u3092Route53\u306b\u5f15\u304d\u53d7\u3051\u3066\u3082\u3089\u3046\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n\n\n## [\u91cd\u8981] Route53\u306b\u306f\u7121\u6599\u4f7f\u7528\u67a0\u304c\u306a\u3044\u306e\u3067\u8ab2\u91d1\u304c\u767a\u751f\n\n* Route53\u306b\u306f\u7121\u6599\u4f7f\u7528\u67a0\u304c\u306a\u3044\u306e\u3067\u3001\u4e0b\u8a18\u306e\u6599\u91d1\u304c\u304b\u304b\u308a\u307e\u3059\u3002\n\n  * http://aws.amazon.com/jp/route53/pricing/\n\n* \u30db\u30b9\u30c8\u30be\u30fc\u30f3\n  * \u30db\u30b9\u30c8\u30be\u30fc\u30f3\u3054\u3068 (\u6700\u521d\u306e25\u30db\u30b9\u30c8\u30be\u30fc\u30f3\u307e\u3067): 0.50 USD\n  * \u4f5c\u6210\u304b\u3089 12 \u6642\u9593\u4ee5\u5185\u306b\u524a\u9664\u3055\u308c\u305f\u30db\u30b9\u30c8\u30be\u30fc\u30f3\u306b\u3064\u3044\u3066\u306f\u7121\u6599\u3002\n  * 1\u30f5\u6708\u306b\u6e80\u305f\u306a\u3044\u5206\u306b\u5bfe\u3057\u3066\u65e5\u5272\u308a\u8a08\u7b97\u3055\u308c\u305a\u3001\u6708\u521d\u306b\u8ab2\u91d1\u3055\u308c\u308b\u3002\n\n* \u30af\u30a8\u30ea(\u6a19\u6e96\u7684\u30af\u30a8\u30ea\u3092\u9078\u629e\u3057\u305f\u5834\u5408)\n  * 100\u4e07\u30af\u30a8\u30ea\u3054\u3068 (\u6700\u521d\u306e10\u5104\u30af\u30a8\u30ea/\u6708\u307e\u3067): 0.500 USD\n\n\u524d\u63d0\u6761\u4ef6\n========\n\n\n\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\n------------\n\n\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u4fdd\u6709\u3057\u3066\u304a\u308a\u3001\u30ec\u30b8\u30b9\u30c8\u30e9\u306b\u5bfe\u3057\u3066Whois\u60c5\u5831\u5909\u66f4\u306e\u4f9d\u983c\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u3002\n\n\nRoute53\u3078\u306e\u6a29\u9650\n---------------\n\nRoute53\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\n\nAWS CLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n-------------------\n\n\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\n* AWS CLI 1.10.38\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws --version\n```\n\n```text:\u7d50\u679c(\u4f8b):\n      aws-cli/1.10.38 Python/2.7.11 Darwin/15.5.0 botocore/1.4.28\n```\n\n\n0. \u6e96\u5099\n=======\n\n\n0.1. \u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u6c7a\u5b9a\n---------------------\n\n\u69cb\u7bc9\u3059\u308b\u30ea\u30fc\u30b8\u30e7\u30f3\u3092\u6c7a\u3081\u307e\u3059\u3002 (\u30ab\u30ec\u30f3\u30c8\u30e6\u30fc\u30b6\u304c\u5229\u7528\u3059\u308b\u30ab\u30ec\u30f3\u30c8\u30ea\u30fc\u30b8\u30e7\u30f3\u3082\u5207\u308a\u5909\u308f\u308a\u307e\u3059\u3002)\n\n```bash:\u30b3\u30de\u30f3\u30c9(\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u5834\u5408):\nexport AWS_DEFAULT_REGION='ap-northeast-1'\n```\n\n\n0.2. \u5909\u6570\u306e\u78ba\u8a8d\n---------------\n\n\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u304c\u60f3\u5b9a\u306e\u3082\u306e\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws configure list\n```\n\n```text:\u7d50\u679c(\u4f8b)\n\n            Name                    Value             Type    Location\n            ----                    -----             ----    --------\n         profile         administrator-prjz-mbp13        env    AWS_DEFAULT_PROFILE\n      access_key     ****************XXXX shared-credentials-file\n      secret_key     ****************XXXX shared-credentials-file\n          region                         ap-northeast-1  env    AWS_DEFAULT_REGION\n```\n\nAssumeRole\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306fprofile\u304c '<not set>'\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002 \u305d\u308c\u4ee5\u5916\u306e\u3068\u304d\u306bprofile\u304c '<not set>' \u3068\u8868\u793a\u3055\u308c\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nexport AWS_DEFAULT_PROFILE=<IAM\u30e6\u30fc\u30b6\u540d>\n```\n\n\n0.3. whois\u30b3\u30de\u30f3\u30c9\u306e\u78ba\u8a8d\n------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nwhich whois\n```\n\nAmazon Linux\u306e\u5834\u5408\u3001\u6a19\u6e96\u3067whois\u30b3\u30de\u30f3\u30c9\u304c\u306f\u3044\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u3053\u3053\u3067\u306f\u65e5\u672c\u8a9e\u5bfe\u5fdc(\u3089\u3057\u3044)jwhois\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9(AmazonLinux):\nsudo yum install jwhois -y\n```\n\n\u6ce8\u91c8: OSX\u3084FreeBSD\u3067\u306f\u3001whois\u30b3\u30de\u30f3\u30c9\u306f\u6a19\u6e96\u3067\u5229\u7528\u53ef\u80fd\u3067\u3059\u3002\n\n\n\n1. \u4e8b\u524d\u4f5c\u696d\n===========\n\n\n\u767b\u9332\u30c9\u30e1\u30a4\u30f3\u306e\u6c7a\u5b9a\n-----------------------\n\nRoute53\u306b\u767b\u9332\u3059\u308b\u30c9\u30e1\u30a4\u30f3\u3092\u6c7a\u3081\u307e\u3059\u3002\n\n\u30d0\u30b1\u30c3\u30c8\u306e\u4f5c\u6210 (\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3)\n( http://qiita.com/tcsh/items/1f707443e667b6b3c8cf )\u3067\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u7528\u306e\u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u6210\u5f8c\u3067\u3042\u308c\u3070\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306b\u5909\u6570\u306b\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u683c\u7d0d\u3057\u307e\u3059\u3002\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nR53_ZONE_NAME=\"${DOMAIN_NAME}\" \\\n        && echo ${R53_ZONE_NAME}\n```\n\n\n2. hosted zone\u4f5c\u6210\n==================\n\nRoute53\u4e0a\u3067\u3001\u767b\u9332\u3059\u308b\u30c9\u30e1\u30a4\u30f3\u306ehosted zone\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n* Caller\u306f\u3001\u5909\u66f4\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30e6\u30cb\u30fc\u30af\u6027\u304c\u4fdd\u8a3c\u3055\u308c\u308c\u3070\u3069\u3093\u306a\u6587\u5b57\u5217\u3067\u3082\u826f\u3044\u3088\u3046\u3067\u3059\u3002\n\n* Comment\u306f\u3001\u4efb\u610f\u306e\u6587\u5b57\u5217\u3067OK\u3067\u3059\u3002(\u30aa\u30d7\u30b7\u30e7\u30f3)\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nR53_CALLER=\"${R53_ZONE_NAME}-$(date +%Y%m%d-%H%M%S)\"\nR53_COMMENT=\"example zone\"\n```\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n        R53_ZONE_NAME: ${R53_ZONE_NAME}\n        R53_CALLER:    ${R53_CALLER}\n        R53_COMMENT:  \"${R53_COMMENT}\"\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws route53 create-hosted-zone \\\n        --name ${R53_ZONE_NAME} \\\n        --caller-reference ${R53_CALLER} \\\n        --hosted-zone-config Comment=\"${R53_COMMENT}\"\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"HostedZone\": {\n          \"ResourceRecordSetCount\": 2,\n          \"CallerReference\": \"example.jp-20160620-193012\",\n          \"Config\": {\n              \"Comment\": \"example zone\",\n              \"PrivateZone\": false\n          },\n          \"Id\": \"/hostedzone/xxxxxxxxxxxxx\",\n          \"Name\": \"example.jp.\"\n        },\n        \"DelegationSet\": {\n          \"NameServers\": [\n              \"ns-xxx.awsdns-xx.co.uk\",\n              \"ns-xxx.awsdns-xx.net\",\n              \"ns-xxx.awsdns-xx.com\",\n              \"ns-xxx.awsdns-xx.org\"\n          ]\n        },\n        \"Location\": \"https://route53.amazonaws.com/2013-04-01/hostedzone/xxxxxxxxxxxxx\",\n        \"ChangeInfo\": {\n          \"Status\": \"PENDING\",\n          \"SubmittedAt\": \"6\u6708 19, 2016T01:23:45.678Z\",\n          \"Id\": \"/change/xxxxxxxxxxxxx\"\n        }\n      }\n```\n\n\n2. ns\u78ba\u8a8d\n=========\n\n\u4f5c\u6210\u3057\u305fhosted zone\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305fNS\u30ec\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u307e\u305a\u3001\u4f5c\u6210\u3057\u305fhosted zone\u306eID\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nR53_ZONE_ID=$( \\\n        aws route53 list-hosted-zones \\\n          --query \"HostedZones[?Name == \\`${R53_ZONE_NAME}.\\`].Id\" \\\n          --output text \\\n        | sed 's/\\/hostedzone\\///' \\\n) && echo ${R53_ZONE_ID}\n```\n\n```text:\u7d50\u679c(\u4f8b):\n      Zxxxxxxxxxxxx\n```\n\n\u305d\u306eHosted zone ID\u306eNS(NameServers)\u306e\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002 \u3053\u3053\u3067\u306f\u3001\u30ec\u30b8\u30b9\u30c8\u30e9\u306e\u7ba1\u7406\u753b\u9762\u3067\u4f5c\u696d\u3057\u3084\u3059\u3044\u3088\u3046\u306b\u30c6\u30fc\u30d6\u30eb\u5f62\u5f0f\u3067\u51fa\u529b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws route53 get-hosted-zone \\\n        --id /hostedzone/${R53_ZONE_ID} \\\n        --query DelegationSet.NameServers \\\n        --output table\n```\n\n```text:\u7d50\u679c(\u4f8b):\n      -----------------------------\n      |       GetHostedZone       |\n      +---------------------------+\n      |  ns-xxx.awsdns-xx.co.uk   |\n      |  ns-xxx.awsdns-xx.net     |\n      |  ns-xxx.awsdns-xx.com     |\n      |  ns-xxx.awsdns-xx.org     |\n      +---------------------------+\n```\n\nBIND\u306b\u767b\u9332\u3059\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3057\u307e\u3059\u3002\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n        R53_ZONE_NAME: ${R53_ZONE_NAME}\n        R53_ZONE_ID:   ${R53_ZONE_ID}\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nfor i in $( \\\n        aws route53 get-hosted-zone \\\n          --id /hostedzone/${R53_ZONE_ID} \\\n          --query DelegationSet.NameServers \\\n          --output text \\\n); do echo \"${R53_ZONE_NAME}. IN NS ${i}.\"; done\n```\n\n\n3. whois\u5909\u66f4\n============\n\n\n3.1. Route53\u3078\u306e\u30c9\u30e1\u30a4\u30f3\u306e\u767b\u9332\n------------------------------\n\n### whois\u5909\u66f4 (\u30c9\u30e1\u30a4\u30f3\u3092Route53\u306b\u767b\u9332\u3059\u308b\u5834\u5408)\n\nRoute53\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305fNS\u30ec\u30b3\u30fc\u30c9\u306e\u30db\u30b9\u30c8\u540d\u3092\u3001\u81ea\u5206\u306e\u30c9\u30e1\u30a4\u30f3\u306eWhois\u60c5\u5831\u306bName Server\u3068\u3057\u3066\u767b\u9332\u3057\u307e\u3059\u3002\n\n\u30c9\u30e1\u30a4\u30f3\u306e\u7ba1\u7406\u3092\u59d4\u8a17\u3057\u3066\u3044\u308b\u30ec\u30b8\u30b9\u30c8\u30e9\u306e\u7ba1\u7406\u753b\u9762\u306a\u3069\u3092\u5229\u7528\u3057\u307e\u3059\u3002 (\u5404\u30ec\u30b8\u30b9\u30c8\u30e9\u306e\u30b5\u30dd\u30fc\u30c8\u30da\u30fc\u30b8\u306a\u3069\u3092\u53c2\u8003\u306b\u304c\u3093\u3070\u3063\u3066\u304f\u3060\u3055\u3044\u3002)\n\n###\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u5909\u66f4 (\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3092Route53\u306b\u767b\u9332\u3059\u308b\u5834\u5408)\n\nRoute53\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305fNS\u30ec\u30b3\u30fc\u30c9\u306e\u30db\u30b9\u30c8\u540d\u3092\u3001\u30c9\u30e1\u30a4\u30f3\u3092\u7ba1\u7406\u3059\u308b\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u306b\u767b\u9332\u3057\u307e\u3059\u3002 (BIND\u3084NSD\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u53c2\u8003\u306b\u304c\u3093\u3070\u3063\u3066\u304f\u3060\u3055\u3044\u3002)\n\n\n3.2. whois\u78ba\u8a8d (\u30c9\u30e1\u30a4\u30f3\u5168\u4f53\u3092Route53\u306b\u767b\u9332\u3059\u308b\u5834\u5408\u306e\u307f)\n--------------------------------------------------------\n\n\u81ea\u5206\u306e\u30c9\u30e1\u30a4\u30f3\u306eWhois\u60c5\u5831\u306bName Server\u60c5\u5831\u304c\u53cd\u6620\u3055\u308c\u305f\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nwhois ${R53_ZONE_NAME} | grep 'Name Server'\n```\n\n```text:\u7d50\u679c(.org\u306e\u4f8b):\n      Name Server:NS-xxxx.AWSDNS-xx.ORG\n      Name Server:NS-xx.AWSDNS-xx.COM\n      Name Server:NS-xxx.AWSDNS-xx.NET\n      Name Server:NS-xxxx.AWSDNS-xx.CO.UK\n      Name Server:\n      Name Server:\n      Name Server:\n      Name Server:\n      Name Server:\n      Name Server:\n      Name Server:\n      Name Server:\n      Name Server:\n```\n\n```text:\u7d50\u679c(.jp\u306e\u4f8b):\n      [Name Server]                   NS-xxxx.AWSDNS-xx.ORG\n      [Name Server]                   NS-xx.AWSDNS-xx.COM\n      [Name Server]                   NS-xxx.AWSDNS-xx.NET\n      [Name Server]                   NS-xxxx.AWSDNS-xx.CO.UK\n```\n\n\n3. \u4e8b\u5f8c\u4f5c\u696d\n===========\n\n\u81ea\u5206\u306e\u30c9\u30e1\u30a4\u30f3\u306eNS\u30ec\u30b3\u30fc\u30c9\u304c\u3001Route53\u306e\u767b\u9332\u60c5\u5831\u3068\u540c\u3058\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9\ndig ns ${R53_ZONE_NAME} | grep ${R53_ZONE_NAME}\n```\n\n```text:\u7d50\u679c:\n      ;example.jp.                  IN      NS\n      example.jp.           152631  IN      NS      ns-xxxx.awsdns-xx.org.\n      example.jp.           152631  IN      NS      ns-xxxx.awsdns-xx.co.uk.\n      example.jp.           152631  IN      NS      ns-xx.awsdns-xx.com.\n      example.jp.           152631  IN      NS      ns-xxx.awsdns-xx.net.\n```\n\n\n\u5b8c\u4e86\n====\n\n\u3053\u308c\u4ee5\u964d\u306f\u3001Route53\u4e0a\u3067\u81ea\u5206\u306e\u30c9\u30e1\u30a4\u30f3\u3092\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n", "tags": ["AWS", "aws-cli", "route53"]}