{"context": " More than 1 year has passed since last update.\u306a\u304b\u306a\u304bAndroid Studio\u304cNDK\u30b5\u30dd\u30fc\u30c8\u3092\u8ffd\u52a0\u3057\u306a\u3044\u306e\u3067\u3001gradle\u306e\u4ed5\u7d44\u307f\u3092\u4f7f\u3063\u3066\u3068\u308a\u3042\u3048\u305aNDK\u5bfe\u5fdc\u3057\u3066\u307f\u308b\u3002\n\u53c2\u8003\u306b\u3057\u305f\u306e\u306fOculus Mobile SDK\u306e\u30bd\u30fc\u30b9\u3002\n\n\u3084\u308a\u65b9\n\u30a2\u30d7\u30ea\u306ebuild.gradle\u306b\u3001\u6b21\u306e\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3059\u308b\u3002\u4e00\u756a\u4e0b\u3068\u304b\u3067\u826f\u3044\u3067\u3059\u3002\n// ANDROID_NDK_HOME\n// ANDROID_NDK\n// NDKROOT\n// local.properties \u306e ndk.dir\n// \u306e\u9806\u306bNDK\u306e\u30d1\u30b9\u3092\u691c\u7d22\u3057\u3066\u3001ndk-build\u306e\u30d5\u30eb\u30d1\u30b9\u3092\u53d6\u5f97\u3059\u308b\ndef GetNDKBuildCmd() {\n\n    def ndkDir = System.getenv('ANDROID_NDK_HOME')\n    if (ndkDir == null) {\n        ndkDir = System.getenv('ANDROID_NDK')\n    }\n    if (ndkDir == null) {\n        ndkDir = System.getenv('NDKROOT')\n    }\n    if (ndkDir == null) {\n        Properties properties = new Properties()\n        properties.load(project.rootProject.file('local.properties').newDataInputStream())\n        ndkDir = properties.getProperty('ndk.dir')\n    }\n    if (ndkDir == null) {\n        throw new GradleException('NDK not found! Check your environment for ANDROID_NDK or your local.properties contains ndk.dir')\n    }\n    if (OperatingSystem.current().isWindows()) {\n        return ndkDir + '/ndk-build.cmd'\n    } else {\n        return ndkDir + '/ndk-build'\n    }\n}\n\nproject.afterEvaluate {\n    compileDebugNdk.dependsOn 'NDKBuildDebug'\n    compileReleaseNdk.dependsOn 'NDKBuildRelease'\n    clean.dependsOn 'NDKBuildClean'\n}\n\ntask NDKBuildDebug(type: Exec) {\n    commandLine GetNDKBuildCmd(), 'V=0', '-j10', 'NDK_DEBUG=1', 'OVR_DEBUG=1', \"NDK_PROJECT_PATH=$projectDir/src/main\"\n}\n\ntask NDKBuildRelease(type: Exec) {\n    commandLine GetNDKBuildCmd(), 'V=0', '-j10', 'NDK_DEBUG=0', 'OVR_DEBUG=0', \"NDK_PROJECT_PATH=$projectDir/src/main\"\n}\n\ntask NDKBuildClean(type: Exec) {\n    commandLine GetNDKBuildCmd(), 'clean', \"NDK_PROJECT_PATH=$projectDir/src/main\"\n}\n\n\u305d\u3057\u3066\u3001android -> sourceSets -> main \u306e\u30d6\u30ed\u30c3\u30af\u5185\u306bjni\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\u3002\nandroid {\n    ...\n\n    sourceSets {\n        main {\n            jniLibs.srcDir 'src/main/libs'\n            jni.srcDirs = [] // \u30ec\u30ac\u30b7\u30fc ndk-build \u30b5\u30dd\u30fc\u30c8\u3092\u7121\u52b9\u306b\u3059\u308b\n        }\n    }\n}\n\n\u3053\u308c\u3067\u3001Android Studio\u306e\u30d3\u30eb\u30c9\u3092\u8d70\u3089\u305b\u305f\u6642\u306b ndk-build \u304c\u547c\u3070\u308c\u3001APK\u306b\u542b\u307e\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u306a\u304b\u306a\u304bAndroid Studio\u304cNDK\u30b5\u30dd\u30fc\u30c8\u3092\u8ffd\u52a0\u3057\u306a\u3044\u306e\u3067\u3001gradle\u306e\u4ed5\u7d44\u307f\u3092\u4f7f\u3063\u3066\u3068\u308a\u3042\u3048\u305aNDK\u5bfe\u5fdc\u3057\u3066\u307f\u308b\u3002\n\u53c2\u8003\u306b\u3057\u305f\u306e\u306f[Oculus Mobile SDK](https://developer.oculus.com/downloads/)\u306e\u30bd\u30fc\u30b9\u3002\n\n## \u3084\u308a\u65b9\n\n\u30a2\u30d7\u30ea\u306ebuild.gradle\u306b\u3001\u6b21\u306e\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3059\u308b\u3002\u4e00\u756a\u4e0b\u3068\u304b\u3067\u826f\u3044\u3067\u3059\u3002\n\n```groovy\n// ANDROID_NDK_HOME\n// ANDROID_NDK\n// NDKROOT\n// local.properties \u306e ndk.dir\n// \u306e\u9806\u306bNDK\u306e\u30d1\u30b9\u3092\u691c\u7d22\u3057\u3066\u3001ndk-build\u306e\u30d5\u30eb\u30d1\u30b9\u3092\u53d6\u5f97\u3059\u308b\ndef GetNDKBuildCmd() {\n\n    def ndkDir = System.getenv('ANDROID_NDK_HOME')\n    if (ndkDir == null) {\n        ndkDir = System.getenv('ANDROID_NDK')\n    }\n    if (ndkDir == null) {\n        ndkDir = System.getenv('NDKROOT')\n    }\n    if (ndkDir == null) {\n        Properties properties = new Properties()\n        properties.load(project.rootProject.file('local.properties').newDataInputStream())\n        ndkDir = properties.getProperty('ndk.dir')\n    }\n    if (ndkDir == null) {\n        throw new GradleException('NDK not found! Check your environment for ANDROID_NDK or your local.properties contains ndk.dir')\n    }\n    if (OperatingSystem.current().isWindows()) {\n        return ndkDir + '/ndk-build.cmd'\n    } else {\n        return ndkDir + '/ndk-build'\n    }\n}\n\nproject.afterEvaluate {\n    compileDebugNdk.dependsOn 'NDKBuildDebug'\n    compileReleaseNdk.dependsOn 'NDKBuildRelease'\n    clean.dependsOn 'NDKBuildClean'\n}\n\ntask NDKBuildDebug(type: Exec) {\n    commandLine GetNDKBuildCmd(), 'V=0', '-j10', 'NDK_DEBUG=1', 'OVR_DEBUG=1', \"NDK_PROJECT_PATH=$projectDir/src/main\"\n}\n\ntask NDKBuildRelease(type: Exec) {\n    commandLine GetNDKBuildCmd(), 'V=0', '-j10', 'NDK_DEBUG=0', 'OVR_DEBUG=0', \"NDK_PROJECT_PATH=$projectDir/src/main\"\n}\n\ntask NDKBuildClean(type: Exec) {\n    commandLine GetNDKBuildCmd(), 'clean', \"NDK_PROJECT_PATH=$projectDir/src/main\"\n}\n```\n\n\u305d\u3057\u3066\u3001android -> sourceSets -> main \u306e\u30d6\u30ed\u30c3\u30af\u5185\u306bjni\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n```groovy\nandroid {\n    ...\n\n    sourceSets {\n        main {\n            jniLibs.srcDir 'src/main/libs'\n            jni.srcDirs = [] // \u30ec\u30ac\u30b7\u30fc ndk-build \u30b5\u30dd\u30fc\u30c8\u3092\u7121\u52b9\u306b\u3059\u308b\n        }\n    }\n}\n```\n\n\u3053\u308c\u3067\u3001Android Studio\u306e\u30d3\u30eb\u30c9\u3092\u8d70\u3089\u305b\u305f\u6642\u306b ndk-build \u304c\u547c\u3070\u308c\u3001APK\u306b\u542b\u307e\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n", "tags": ["AndroidStudio", "NDK", "Android", "AndroidNDK"]}