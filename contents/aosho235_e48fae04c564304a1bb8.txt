{"context": "\n\n\u6982\u8981\ncron\u30b8\u30e7\u30d6\u306e\u4e2d\u304b\u3089/usr/bin/script --command \"mycommand\"\u306e\u3088\u3046\u306a\u3053\u3068\u3092\u3059\u308b\u3068\u3001mycommand\u304c\u7d42\u4e86\u3059\u308b\u306e\u3092\u5f85\u305f\u305a\u306bscript\u81ea\u4f53\u304c\u7d42\u4e86\u3057\u3066\u3057\u307e\u3046\u3002\nutil-linux\u30922.23.2\u304b\u30892.27\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3057\u305f\u3089\u518d\u73fe\u3057\u306a\u304f\u306a\u3063\u305f\u3002\u3069\u3046\u3082\u30d0\u30b0\u3060\u3063\u305f\u3089\u3057\u3044\u3002\u3061\u306a\u307f\u306b\n\nCentOS 7\u3067\u306f\u518d\u73fe\u3057\u305f\u3002\nArch Linux\uff08Cent\u3084Amazon\u3068\u540c\u3058\u304fcronie\uff09\u3067\u306f\u518d\u73fe\u3057\u306a\u304b\u3063\u305f\u3002\nFreeBSD\u3067\u306f\u518d\u73fe\u3057\u306a\u304b\u3063\u305f\u3002\n\n\n\u74b0\u5883\n\nAmazon Linux 2015.09\ncronie-1.4.4-12.6.amzn1.x86_64\nscript from util-linux 2.23.2\n\n\n\u5b9f\u9a13\u65b9\u6cd5\n\ncron\u306e\u8a2d\u5b9a\n1\u5206\u304a\u304d\u306bscript_test.sh\u3092\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n/etc/cron.d/script_test\n* * * * *  root cd /home/ken && /home/ken/script_test.sh\n\n\n\nscript_test.sh\n#!/bin/sh\n\nLOG=\"/home/ken/script_test.log\"\nrm $LOG\necho \"$0 start $(date)\" >> $LOG\nscript --return --flush --command \"date; sleep 3; date; sleep 3; date; sleep 3;\" /home/ken/typescript\necho \"$0 end   $(date)\" >> $LOG\n\n--return --flush\u306f\u3064\u3051\u306a\u304f\u3066\u3082\u7d50\u679c\u306f\u540c\u3058\u3060\u3063\u305f\u3002\n\n\u7d50\u679c\n$ cat script_test.log\n/home/ken/script_test.sh start Wed Apr 13 13:06:01 JST 2016\n/home/ken/script_test.sh end   Wed Apr 13 13:06:01 JST 2016\n\n$ cat typescript \nScript started on Wed 13 Apr 2016 01:06:01 PM JST\nWed Apr 13 13:06:01 JST 2016\nWed Apr 13 13:06:04 JST 2016\nWed Apr 13 13:06:07 JST 2016\n\nScript done on Wed 13 Apr 2016 01:06:10 PM JST\n\nscript\u306e\u5f15\u6570\u3067sleep 3\u30923\u56de\u547c\u3093\u3067\u3044\u308b\u306e\u3067\u5c11\u306a\u304f\u3068\u30829\u79d2\u304b\u304b\u308b\u306f\u305a\u3002typescript\u3092\u898b\u308b\u3068\u5b9f\u969b\u306b9\u79d2\u304b\u3051\u3066\u5b9f\u884c\u3057\u3066\u3044\u308b\u304c\u3001\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u81ea\u4f53\u306f1\u79d2\u3082\u304b\u304b\u3089\u305a\u3059\u3050\u306b\u7d42\u4e86\u3057\u3066\u3044\u308b\u3002\n## \u6982\u8981\n\ncron\u30b8\u30e7\u30d6\u306e\u4e2d\u304b\u3089`/usr/bin/script --command \"mycommand\"`\u306e\u3088\u3046\u306a\u3053\u3068\u3092\u3059\u308b\u3068\u3001mycommand\u304c\u7d42\u4e86\u3059\u308b\u306e\u3092\u5f85\u305f\u305a\u306bscript\u81ea\u4f53\u304c\u7d42\u4e86\u3057\u3066\u3057\u307e\u3046\u3002\n\nutil-linux\u30922.23.2\u304b\u30892.27\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3057\u305f\u3089\u518d\u73fe\u3057\u306a\u304f\u306a\u3063\u305f\u3002\u3069\u3046\u3082\u30d0\u30b0\u3060\u3063\u305f\u3089\u3057\u3044\u3002\u3061\u306a\u307f\u306b\n\n- CentOS 7\u3067\u306f\u518d\u73fe\u3057\u305f\u3002\n- Arch Linux\uff08Cent\u3084Amazon\u3068\u540c\u3058\u304fcronie\uff09\u3067\u306f\u518d\u73fe\u3057\u306a\u304b\u3063\u305f\u3002\n- FreeBSD\u3067\u306f\u518d\u73fe\u3057\u306a\u304b\u3063\u305f\u3002\n\n## \u74b0\u5883\n\n- Amazon Linux 2015.09\n- cronie-1.4.4-12.6.amzn1.x86_64\n- script from util-linux 2.23.2\n\n## \u5b9f\u9a13\u65b9\u6cd5\n\n### cron\u306e\u8a2d\u5b9a\n\n1\u5206\u304a\u304d\u306b`script_test.sh`\u3092\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n```/etc/cron.d/script_test\n* * * * *  root cd /home/ken && /home/ken/script_test.sh\n```\n\n### script_test.sh\n\n```\n#!/bin/sh\n\nLOG=\"/home/ken/script_test.log\"\nrm $LOG\necho \"$0 start $(date)\" >> $LOG\nscript --return --flush --command \"date; sleep 3; date; sleep 3; date; sleep 3;\" /home/ken/typescript\necho \"$0 end   $(date)\" >> $LOG\n```\n\n`--return --flush`\u306f\u3064\u3051\u306a\u304f\u3066\u3082\u7d50\u679c\u306f\u540c\u3058\u3060\u3063\u305f\u3002\n\n### \u7d50\u679c\n\n```\n$ cat script_test.log\n/home/ken/script_test.sh start Wed Apr 13 13:06:01 JST 2016\n/home/ken/script_test.sh end   Wed Apr 13 13:06:01 JST 2016\n\n$ cat typescript \nScript started on Wed 13 Apr 2016 01:06:01 PM JST\nWed Apr 13 13:06:01 JST 2016\nWed Apr 13 13:06:04 JST 2016\nWed Apr 13 13:06:07 JST 2016\n\nScript done on Wed 13 Apr 2016 01:06:10 PM JST\n```\n\n`script`\u306e\u5f15\u6570\u3067`sleep 3`\u30923\u56de\u547c\u3093\u3067\u3044\u308b\u306e\u3067\u5c11\u306a\u304f\u3068\u30829\u79d2\u304b\u304b\u308b\u306f\u305a\u3002typescript\u3092\u898b\u308b\u3068\u5b9f\u969b\u306b9\u79d2\u304b\u3051\u3066\u5b9f\u884c\u3057\u3066\u3044\u308b\u304c\u3001\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u81ea\u4f53\u306f1\u79d2\u3082\u304b\u304b\u3089\u305a\u3059\u3050\u306b\u7d42\u4e86\u3057\u3066\u3044\u308b\u3002\n", "tags": ["Linux", "cron", "script"]}