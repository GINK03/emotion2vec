{"context": " More than 1 year has passed since last update.Unity\u306eAPI\u306f\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u4e0a\u3067\u3057\u304b\u6271\u3048\u306a\u3044\u3068\u3044\u3046\u5236\u9650\u304c\u3042\u308a\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001\u91cd\u3044\u51e6\u7406\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u901a\u3057\u305f\u51e6\u7406\u306a\u3069\u306f\u5225\u306e\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3057\u305f\u307b\u3046\u304c\u3088\u3044\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002\n\u305d\u3053\u3067UniRx\u306eObserveOn\u3068SubscribeOn\u3092\u4f7f\u7528\u3059\u308c\u3070\u3001\u7c21\u5358\u306b\u51e6\u7406\u3092\u5b9f\u884c\u3059\u308b\u30b9\u30ec\u30c3\u30c9\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nObserveOn\nObserveOn\u3092\u4f7f\u7528\u3059\u308b\u3068observer.OnNext\u3084observer.OnCompleted\u306a\u3069\u306e\u64cd\u4f5c\u304c\u6307\u5b9a\u3057\u305f\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u4e0a\u3067\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u308c\u3092\u4f7f\u3048\u3070Select\u3084Subscribe\u306b\u6e21\u3059\u95a2\u6570\u3092\u7279\u5b9a\u306e\u30b9\u30ec\u30c3\u30c9\u4e0a\u3067\u52d5\u304b\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nObserveOnMainThread\u3092\u4f7f\u7528\u3059\u308c\u3070\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u52d5\u304b\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u4f7f\u7528\u4f8b\nvoid Start()\n{\n    // Scheduler.MainThread\u306b\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308b(\u521d\u3081\u3066\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3068\u304d\u306b\u5185\u90e8\u306e\u5909\u6570\u304c\u521d\u671f\u5316\u3055\u308c\u308b\u305f\u3081)\n    var s = Scheduler.MainThread;\n    new Thread(() =>\n    {\n        // Debug.Log(this.gameObject.name);  // get_gameObject can only be called from the main thread.\n        Observable.Create<string>(observer =>\n        {\n            observer.OnNext(\"\");\n            return null;\n        })\n        .ObserveOnMainThread()\n        .Select(_ => this.gameObject.name)\n        .Subscribe(Debug.Log);\n    }).Start();\n}\n\n\u6ce8:Thread\u3092\u305d\u306e\u307e\u307e\u4f7f\u7528\u3057\u3066\u3044\u308b\u306e\u306f\u30b5\u30f3\u30d7\u30eb\u3060\u304b\u3089\u3067\u3059\u3002\u666e\u6bb5\u306fObsavable.Start\u3068\u304b\u3092\u4f7f\u7528\u3057\u305f\u307b\u3046\u304c\u3044\u3044\u3067\u3059\u3002\nObserveOnMainThread\u3092\u4f7f\u7528\u3057\u305f\u5f8c\u306eSelect\u3084Subscribe\u306b\u6e21\u3057\u305f\u95a2\u6570\u306f\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3055\u308c\u308b\u305f\u3081this.gameObject.name\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3082\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u305b\u3093\u3002\n\nSubscribeOn\nSubscribeOn\u3092\u4f7f\u7528\u3059\u308b\u3068Subscribe\u304c\u6307\u5b9a\u3057\u305f\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u4e0a\u3067\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u5185\u90e8\u306eSubscribe\u304c\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u4e0a\u3067\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3060\u3051\u3067Subscribe\u306b\u6e21\u3057\u305f\u95a2\u6570\u304c\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u4e0a\u3067\u5b9f\u884c\u3055\u308c\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3053\u3068\u306b\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\nSubscribeOnMainThread\u3092\u9014\u4e2d\u306b\u631f\u3093\u3067\u3082Subscribe\u306b\u6e21\u3057\u305f\u95a2\u6570\u306f\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3055\u308c\u306a\u3044\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002\n(\u57fa\u672c\u7684\u306b\u306fIObserver.OnNext\u3092\u5b9f\u884c\u3057\u305f\u30b9\u30ec\u30c3\u30c9\u4e0a\u3067Subscribe\u306b\u6e21\u3057\u305f\u95a2\u6570\u304c\u5b9f\u884c\u3055\u308c\u308b\u3002\u5909\u66f4\u3057\u305f\u3044\u5834\u5408\u306fObserveOn\u3092\u4f7f\u7528\u3059\u308b\u3002)\n\n\u4f7f\u7528\u4f8b\nvoid Start()\n{\n    Observable.Create<string>(observer =>\n    {\n        // \u91cd\u3044\u51e6\u7406, \u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u4e0a\u3067\u5b9f\u884c\u3059\u308b\u3068\u30b2\u30fc\u30e0\u304c\u6b62\u307e\u3063\u3066\u3057\u307e\u3046\n        Thread.Sleep(3000);\n        observer.OnNext(\"\");\n        return null;\n    })\n    // Subscribe\u3092\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u4e0a\u3067\u5b9f\u884c\u3059\u308b\n    .SubscribeOn(Scheduler.ThreadPool)\n    // UnityAPI\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u306b\u5207\u308a\u66ff\u3048\u308b\n    .ObserveOnMainThread()\n    .Select(_ => this.gameObject.name)\n    .Subscribe(Debug.Log);\n}\n\nObsavable.Create\u306b\u6e21\u3057\u305f\u95a2\u6570\u5185\u3067\u306fThread.Sleep(3000)\u3092\u5b9f\u884c\u3057\u3066\u304a\u308a\u3001\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3059\u308b\u3068\u30b2\u30fc\u30e0\u304c\u6b62\u307e\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\nSubscribeOn(Scheduler.ThreadPool)\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u4e0a\u3067Obsavable.Create\u306b\u6e21\u3057\u305f\u95a2\u6570\u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u5931\u6557\u4f8b\n\u81ea\u5206\u304c\u8a66\u884c\u932f\u8aa4\u3057\u305f\u3068\u304d\u306e\u30b3\u30fc\u30c9\u3067\u3059\u3002\n\n\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u306e\u521d\u671f\u5316\u304c\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u4ee5\u5916\u3067\u8d77\u3053\u3063\u3066\u3057\u307e\u3046\nvoid Start()\n{\n    var subject = new Subject<int>();\n    new Thread(() =>\n    {\n        subject\n            // Exception: UniRx requires a MainThreadDispatcher component created on the main thread. Make sure it is added to the scene before calling UniRx from a worker thread.\n            .ObserveOnMainThread()\n            .Subscribe(_ => Debug.Log(this.gameObject.name));\n    }).Start();\n}\n\n\n\nMainThreadDispatcher\u304c\u52d5\u304d\u51fa\u3059\u3088\u308a\u524d\u306bOnNext\u3057\u3066\u3057\u307e\u3046\nvoid Start()\n{\n    var subject = new Subject<int>();\n    subject\n        .SubscribeOnMainThread()\n        .Subscribe(_ => Debug.Log(\"hoge\"));\n    // OnNext\u3057\u3066\u3082Debug.Log(\"hoge\")\u304c\u5b9f\u884c\u3055\u308c\u306a\u3044\n    // SubscribeOnMainThread()\u3059\u308b\u3068MainThreadDispatcher.Update\u304c\u5b9f\u884c\u3055\u308c\u308b\u307e\u3067\u306fSubscribe\u3055\u308c\u306a\u3044\u305f\u3081\n    // 1\u30d5\u30ec\u30fc\u30e0\u5f85\u3064\u3068\u6b63\u5e38\u306b\u52d5\u304f\n    subject.OnNext(0);\n}\n\n\n\nSubscribeOnMainThread\u3057\u3066\u3082Subscribe\u306b\u6e21\u3057\u305f\u95a2\u6570\u306f\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3055\u308c\u308b\u308f\u3051\u3067\u306f\u306a\u3044\nvoid Start()\n{\n    IObserver<Unit> o = null;\n    Observable.Create<Unit>(observer =>\n    {\n        o = observer;\n        return null;\n    })\n    .SubscribeOnMainThread()\n    // get_gameObject can only be called from the main thread.\n    .Subscribe(_ => Debug.Log(this.gameObject.name));\n\n    this.UpdateAsObservable()\n        .Where(_ => o != null)\n        .ObserveOn(Scheduler.ThreadPool)\n        .Subscribe(_ => o.OnNext(Unit.Default));\n}\n\n\n\n\u6700\u5f8c\u306b\n\u3069\u3046\u3057\u3066\u3082\u308f\u304b\u3089\u306a\u3044\u90e8\u5206\u306f\u30bd\u30fc\u30b9\u3092\u8aad\u307f\u307e\u3057\u3087\u3046\u3002\n\u5185\u90e8\u306e\u51e6\u7406\u3092\u77e5\u308b\u3053\u3068\u3067\u3069\u306e\u3088\u3046\u306b\u66f8\u304f\u3068\u3088\u3044\u304b\u304c\u306a\u3093\u3068\u306a\u304f\u898b\u3048\u3066\u304f\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nUnity\u306eAPI\u306f\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u4e0a\u3067\u3057\u304b\u6271\u3048\u306a\u3044\u3068\u3044\u3046\u5236\u9650\u304c\u3042\u308a\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001\u91cd\u3044\u51e6\u7406\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u901a\u3057\u305f\u51e6\u7406\u306a\u3069\u306f\u5225\u306e\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3057\u305f\u307b\u3046\u304c\u3088\u3044\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002\n\u305d\u3053\u3067UniRx\u306e`ObserveOn`\u3068`SubscribeOn`\u3092\u4f7f\u7528\u3059\u308c\u3070\u3001\u7c21\u5358\u306b\u51e6\u7406\u3092\u5b9f\u884c\u3059\u308b\u30b9\u30ec\u30c3\u30c9\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n# ObserveOn\n`ObserveOn`\u3092\u4f7f\u7528\u3059\u308b\u3068`observer.OnNext`\u3084`observer.OnCompleted`\u306a\u3069\u306e\u64cd\u4f5c\u304c\u6307\u5b9a\u3057\u305f\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u4e0a\u3067\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u308c\u3092\u4f7f\u3048\u3070`Select`\u3084`Subscribe`\u306b\u6e21\u3059\u95a2\u6570\u3092\u7279\u5b9a\u306e\u30b9\u30ec\u30c3\u30c9\u4e0a\u3067\u52d5\u304b\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n`ObserveOnMainThread`\u3092\u4f7f\u7528\u3059\u308c\u3070\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u52d5\u304b\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n## \u4f7f\u7528\u4f8b\n```csharp\nvoid Start()\n{\n    // Scheduler.MainThread\u306b\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308b(\u521d\u3081\u3066\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3068\u304d\u306b\u5185\u90e8\u306e\u5909\u6570\u304c\u521d\u671f\u5316\u3055\u308c\u308b\u305f\u3081)\n    var s = Scheduler.MainThread;\n    new Thread(() =>\n    {\n        // Debug.Log(this.gameObject.name);  // get_gameObject can only be called from the main thread.\n        Observable.Create<string>(observer =>\n        {\n            observer.OnNext(\"\");\n            return null;\n        })\n        .ObserveOnMainThread()\n        .Select(_ => this.gameObject.name)\n        .Subscribe(Debug.Log);\n    }).Start();\n}\n```\n\n\u6ce8:`Thread`\u3092\u305d\u306e\u307e\u307e\u4f7f\u7528\u3057\u3066\u3044\u308b\u306e\u306f\u30b5\u30f3\u30d7\u30eb\u3060\u304b\u3089\u3067\u3059\u3002\u666e\u6bb5\u306f`Obsavable.Start`\u3068\u304b\u3092\u4f7f\u7528\u3057\u305f\u307b\u3046\u304c\u3044\u3044\u3067\u3059\u3002\n`ObserveOnMainThread`\u3092\u4f7f\u7528\u3057\u305f\u5f8c\u306e`Select`\u3084`Subscribe`\u306b\u6e21\u3057\u305f\u95a2\u6570\u306f\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3055\u308c\u308b\u305f\u3081`this.gameObject.name`\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3082\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u305b\u3093\u3002\n\n# SubscribeOn\n`SubscribeOn`\u3092\u4f7f\u7528\u3059\u308b\u3068`Subscribe`\u304c\u6307\u5b9a\u3057\u305f\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u4e0a\u3067\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u5185\u90e8\u306e`Subscribe`\u304c\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u4e0a\u3067\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3060\u3051\u3067`Subscribe`\u306b\u6e21\u3057\u305f\u95a2\u6570\u304c\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u4e0a\u3067\u5b9f\u884c\u3055\u308c\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3053\u3068\u306b\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\n`SubscribeOnMainThread`\u3092\u9014\u4e2d\u306b\u631f\u3093\u3067\u3082`Subscribe`\u306b\u6e21\u3057\u305f\u95a2\u6570\u306f\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3055\u308c\u306a\u3044\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002\n(\u57fa\u672c\u7684\u306b\u306f`IObserver.OnNext`\u3092\u5b9f\u884c\u3057\u305f\u30b9\u30ec\u30c3\u30c9\u4e0a\u3067`Subscribe`\u306b\u6e21\u3057\u305f\u95a2\u6570\u304c\u5b9f\u884c\u3055\u308c\u308b\u3002\u5909\u66f4\u3057\u305f\u3044\u5834\u5408\u306f`ObserveOn`\u3092\u4f7f\u7528\u3059\u308b\u3002)\n\n## \u4f7f\u7528\u4f8b\n```csharp\nvoid Start()\n{\n    Observable.Create<string>(observer =>\n    {\n        // \u91cd\u3044\u51e6\u7406, \u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u4e0a\u3067\u5b9f\u884c\u3059\u308b\u3068\u30b2\u30fc\u30e0\u304c\u6b62\u307e\u3063\u3066\u3057\u307e\u3046\n        Thread.Sleep(3000);\n        observer.OnNext(\"\");\n        return null;\n    })\n    // Subscribe\u3092\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u4e0a\u3067\u5b9f\u884c\u3059\u308b\n    .SubscribeOn(Scheduler.ThreadPool)\n    // UnityAPI\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u306b\u5207\u308a\u66ff\u3048\u308b\n    .ObserveOnMainThread()\n    .Select(_ => this.gameObject.name)\n    .Subscribe(Debug.Log);\n}\n```\n\n`Obsavable.Create`\u306b\u6e21\u3057\u305f\u95a2\u6570\u5185\u3067\u306f`Thread.Sleep(3000)`\u3092\u5b9f\u884c\u3057\u3066\u304a\u308a\u3001\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3059\u308b\u3068\u30b2\u30fc\u30e0\u304c\u6b62\u307e\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n`SubscribeOn(Scheduler.ThreadPool)`\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u4e0a\u3067`Obsavable.Create`\u306b\u6e21\u3057\u305f\u95a2\u6570\u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002\n\n# \u5931\u6557\u4f8b\n\u81ea\u5206\u304c\u8a66\u884c\u932f\u8aa4\u3057\u305f\u3068\u304d\u306e\u30b3\u30fc\u30c9\u3067\u3059\u3002\n\n```csharp:\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u306e\u521d\u671f\u5316\u304c\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u4ee5\u5916\u3067\u8d77\u3053\u3063\u3066\u3057\u307e\u3046\nvoid Start()\n{\n    var subject = new Subject<int>();\n    new Thread(() =>\n    {\n        subject\n            // Exception: UniRx requires a MainThreadDispatcher component created on the main thread. Make sure it is added to the scene before calling UniRx from a worker thread.\n            .ObserveOnMainThread()\n            .Subscribe(_ => Debug.Log(this.gameObject.name));\n    }).Start();\n}\n```\n\n```csharp:MainThreadDispatcher\u304c\u52d5\u304d\u51fa\u3059\u3088\u308a\u524d\u306bOnNext\u3057\u3066\u3057\u307e\u3046\nvoid Start()\n{\n    var subject = new Subject<int>();\n    subject\n        .SubscribeOnMainThread()\n        .Subscribe(_ => Debug.Log(\"hoge\"));\n    // OnNext\u3057\u3066\u3082Debug.Log(\"hoge\")\u304c\u5b9f\u884c\u3055\u308c\u306a\u3044\n    // SubscribeOnMainThread()\u3059\u308b\u3068MainThreadDispatcher.Update\u304c\u5b9f\u884c\u3055\u308c\u308b\u307e\u3067\u306fSubscribe\u3055\u308c\u306a\u3044\u305f\u3081\n    // 1\u30d5\u30ec\u30fc\u30e0\u5f85\u3064\u3068\u6b63\u5e38\u306b\u52d5\u304f\n    subject.OnNext(0);\n}\n```\n\n```csharp:SubscribeOnMainThread\u3057\u3066\u3082Subscribe\u306b\u6e21\u3057\u305f\u95a2\u6570\u306f\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3055\u308c\u308b\u308f\u3051\u3067\u306f\u306a\u3044\nvoid Start()\n{\n    IObserver<Unit> o = null;\n    Observable.Create<Unit>(observer =>\n    {\n        o = observer;\n        return null;\n    })\n    .SubscribeOnMainThread()\n    // get_gameObject can only be called from the main thread.\n    .Subscribe(_ => Debug.Log(this.gameObject.name));\n\n    this.UpdateAsObservable()\n        .Where(_ => o != null)\n        .ObserveOn(Scheduler.ThreadPool)\n        .Subscribe(_ => o.OnNext(Unit.Default));\n}\n```\n\n# \u6700\u5f8c\u306b\n\u3069\u3046\u3057\u3066\u3082\u308f\u304b\u3089\u306a\u3044\u90e8\u5206\u306f\u30bd\u30fc\u30b9\u3092\u8aad\u307f\u307e\u3057\u3087\u3046\u3002\n\u5185\u90e8\u306e\u51e6\u7406\u3092\u77e5\u308b\u3053\u3068\u3067\u3069\u306e\u3088\u3046\u306b\u66f8\u304f\u3068\u3088\u3044\u304b\u304c\u306a\u3093\u3068\u306a\u304f\u898b\u3048\u3066\u304f\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n", "tags": ["C#", "UniRx", "Unity"]}