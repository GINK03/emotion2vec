{"context": " More than 1 year has passed since last update.API\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3082\u660e\u306b\u306f\u66f8\u3044\u3066\u306a\u304b\u3063\u305f\u6c17\u304c\u3059\u308b\u306e\u3067\u5099\u5fd8\u9332\u3068\u3057\u3066\u3002\n\u203b\u4ee5\u4e0b\u3067\u306fActiveJob\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\nqueue\u306b\u5165\u3063\u3066\u3044\u308bJob\u306e\u6570\u3092\u78ba\u8a8d\u3059\u308b\u3002\nqueue\u540d\u3092\u6307\u5b9a\u3057\u3066 Sidekiq::Queue.new \u3059\u308b\u3068\u8272\u3005\u30b4\u30cb\u30e7\u30b4\u30cb\u30e7\u51fa\u6765\u308b\u307f\u305f\u3044\u3002\n\u4ee5\u4e0b\u306f default \u3068\u3044\u3046queue\u3092\u53d6\u5f97\u3059\u308b\u4f8b\u3002\n[60] pry(main)> queue = Sidekiq::Queue.new('default')\n[61] pry(main)> queue.size\n\n\nqueue\u306e\u5404Job\u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3059\u308b\nqueue.first \u3067\u6700\u521d\u306eJob\u306e\u4e2d\u8eab\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3088\u3046\u306a\u306e\u3067\u898b\u3066\u307f\u308b\u3002\n[33] pry(main)> queue.first\n=> #<Sidekiq::Job:0x007fac2ca82ca0\n @item=\n  {\"class\"=>\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\n   \"wrapped\"=>\"ActionMailer::DeliveryJob\",\n   \"queue\"=>\"mailers\",\n   \"args\"=>\n    [{\"job_class\"=>\"ActionMailer::DeliveryJob\",\n      \"job_id\"=>\"e02f1e74-aef4-4ea1-b374-e93da431a949\",\n      \"queue_name\"=>\"mailers\",\n      \"arguments\"=>[\"HogeMailer\", \"user_created\", \"deliver_later\", {\"_aj_globalid\"=>\"gid://app/User/1\"}]}],\n   \"retry\"=>true,\n   \"jid\"=>\"3b19683d5a8dbc085b1302c6\",\n   \"created_at\"=>1444714057.8843222,\n   \"enqueued_at\"=>1444714057.884371},\n @queue=\"mailers\",\n @value=\n  \"{\\\"class\\\":\\\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\\\",\\\"wrapped\\\":\\\"ActionMailer::DeliveryJob\\\",\\\"queue\\\":\\\"mailers\\\",\\\"args\\\":[{\\\"job_class\\\":\\\"ActionMailer::DeliveryJob\\\",\\\"job_id\\\":\\\"e02f1e74-aef4-4ea1-b374-e93da431a949\\\",\\\"queue_name\\\":\\\"mailers\\\",\\\"arguments\\\":[\\\"HogeMailer\\\",\\\"user_created\\\",\\\"deliver_later\\\",{\\\"_aj_globalid\\\":\\\"gid://app/User/1\\\"}]}],\\\"retry\\\":true,\\\"jid\\\":\\\"3b19683d5a8dbc085b1302c6\\\",\\\"created_at\\\":1444714057.8843222,\\\"enqueued_at\\\":1444714057.884371}\">\n\n\u4e0a\u8a18\u304b\u3089\u3001\u5404Job\u306e\u4e2d\u8eab\u306b\u3088\u3063\u3066\u8272\u3005\u96c6\u8a08\u5909\u3048\u305f\u3044\u3068\u304b\u51e6\u7406\u5909\u3048\u305f\u3044\u3068\u304b\u4f55\u304b\u3057\u305f\u3044\u3060\u3063\u305f\u3089\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308c\u3070\u826f\u3055\u305d\u3046\nqueue = Sidekiq::Queue.new('default')\nqueue.each do |q|\n  if q.args.first[\"arguments\"].include?('hogehoge')\n    puts hogehoge\n  end\nend\n\nAPI\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3082\u660e\u306b\u306f\u66f8\u3044\u3066\u306a\u304b\u3063\u305f\u6c17\u304c\u3059\u308b\u306e\u3067\u5099\u5fd8\u9332\u3068\u3057\u3066\u3002\n\u203b\u4ee5\u4e0b\u3067\u306fActiveJob\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\n## \tqueue\u306b\u5165\u3063\u3066\u3044\u308bJob\u306e\u6570\u3092\u78ba\u8a8d\u3059\u308b\u3002\nqueue\u540d\u3092\u6307\u5b9a\u3057\u3066 `Sidekiq::Queue.new` \u3059\u308b\u3068\u8272\u3005\u30b4\u30cb\u30e7\u30b4\u30cb\u30e7\u51fa\u6765\u308b\u307f\u305f\u3044\u3002\n\u4ee5\u4e0b\u306f `default` \u3068\u3044\u3046queue\u3092\u53d6\u5f97\u3059\u308b\u4f8b\u3002\n\n```ruby\n[60] pry(main)> queue = Sidekiq::Queue.new('default')\n[61] pry(main)> queue.size\n```\n\n## queue\u306e\u5404Job\u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3059\u308b\n`queue.first` \u3067\u6700\u521d\u306eJob\u306e\u4e2d\u8eab\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3088\u3046\u306a\u306e\u3067\u898b\u3066\u307f\u308b\u3002\n\n```ruby\n[33] pry(main)> queue.first\n=> #<Sidekiq::Job:0x007fac2ca82ca0\n @item=\n  {\"class\"=>\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\",\n   \"wrapped\"=>\"ActionMailer::DeliveryJob\",\n   \"queue\"=>\"mailers\",\n   \"args\"=>\n    [{\"job_class\"=>\"ActionMailer::DeliveryJob\",\n      \"job_id\"=>\"e02f1e74-aef4-4ea1-b374-e93da431a949\",\n      \"queue_name\"=>\"mailers\",\n      \"arguments\"=>[\"HogeMailer\", \"user_created\", \"deliver_later\", {\"_aj_globalid\"=>\"gid://app/User/1\"}]}],\n   \"retry\"=>true,\n   \"jid\"=>\"3b19683d5a8dbc085b1302c6\",\n   \"created_at\"=>1444714057.8843222,\n   \"enqueued_at\"=>1444714057.884371},\n @queue=\"mailers\",\n @value=\n  \"{\\\"class\\\":\\\"ActiveJob::QueueAdapters::SidekiqAdapter::JobWrapper\\\",\\\"wrapped\\\":\\\"ActionMailer::DeliveryJob\\\",\\\"queue\\\":\\\"mailers\\\",\\\"args\\\":[{\\\"job_class\\\":\\\"ActionMailer::DeliveryJob\\\",\\\"job_id\\\":\\\"e02f1e74-aef4-4ea1-b374-e93da431a949\\\",\\\"queue_name\\\":\\\"mailers\\\",\\\"arguments\\\":[\\\"HogeMailer\\\",\\\"user_created\\\",\\\"deliver_later\\\",{\\\"_aj_globalid\\\":\\\"gid://app/User/1\\\"}]}],\\\"retry\\\":true,\\\"jid\\\":\\\"3b19683d5a8dbc085b1302c6\\\",\\\"created_at\\\":1444714057.8843222,\\\"enqueued_at\\\":1444714057.884371}\">\n```\n\n\u4e0a\u8a18\u304b\u3089\u3001\u5404Job\u306e\u4e2d\u8eab\u306b\u3088\u3063\u3066\u8272\u3005\u96c6\u8a08\u5909\u3048\u305f\u3044\u3068\u304b\u51e6\u7406\u5909\u3048\u305f\u3044\u3068\u304b\u4f55\u304b\u3057\u305f\u3044\u3060\u3063\u305f\u3089\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308c\u3070\u826f\u3055\u305d\u3046\n\n```ruby\nqueue = Sidekiq::Queue.new('default')\nqueue.each do |q|\n  if q.args.first[\"arguments\"].include?('hogehoge')\n    puts hogehoge\n  end\nend\n```\n", "tags": ["Rails", "sidekiq", "Ruby"]}