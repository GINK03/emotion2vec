{"context": " More than 1 year has passed since last update.\n\nHeroku\u306bLumen+Postgres\u306e\u74b0\u5883\u3092\u4f5c\u3063\u3066\u307f\u308b\u3002\n\n\u524d\u63d0\u6761\u4ef6\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089heroku\u3078\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u300cfooo\u300d\u3068\u3044\u3046\u30a2\u30d7\u30ea\u4f5c\u6210\u6e08\u307f\u3002\n\n\nLumen\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nComposer\u3067\u30ed\u30fc\u30ab\u30eb\u306b\u843d\u3068\u3059\u3002\n% composer create-project laravel/lumen --prefer-dist herokuLumenTest\n\n\nHeroku\u3078\u30c7\u30d7\u30ed\u30a4\n\nProcfile\u8ffd\u52a0\n% cd herokuLumenTest\n% vi Procfile\n\n\nProcfile\nvendor/bin/heroku-php-apache2\n\n\n\nHeroku\u30ed\u30b0\u30a4\u30f3\n% heroku login\nEnter your Heroku credentials.\nEmail: hoge@hoge.com\nPassword (typing will be hidden): \nAuthentication successful.\n\n\nCommit\u3059\u308b\n% git init\n% heroku git:remote -a fooo\n% git add .\n% git commit -am '1st commit.'\n% git push heroku master\n\nhttps://fooo.herokuapp.com/\u3000\nLumen\u753b\u9762\u8868\u793a\u78ba\u8a8d\u3002\n\nDB\n\nheroku-postgres\u3067DB\u4f5c\u308b\nHeroku\u306e\u30b5\u30a4\u30c8\u3067\u4f5c\u308b\u3002\n\nDB\u60c5\u5831\u3092Heoroku\u306b\u8a2d\u5b9a\n% heroku config:add DB_HOST=ec2-000-00-000-000.compute-0.amazonaws.com\n% heroku config:add DB_DATABASE=databasename                        \n% heroku config:add DB_USERNAME=username\n% heroku config:add DB_PASSWORD=password\n% heroku config\n=== fooo Config Vars\nDB_CONNECTION: pgsql\nDB_HOST:       ec2-000-00-000-000.compute-0.amazonaws.com\nDB_DATABASE:   databasename\nDB_PASSWORD:   username\nDB_USERNAME:   password\n\n\nMigrate\u4f5c\u6210\n# heroku run php artisan migrate:install\n\n\nPostgres\u7528\u306eGUI\u30a2\u30d7\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\npgAdmin3 MacOSX\u7248\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u8a2d\u5b9a\n\u30d5\u30a1\u30a4\u30eb->\u30b5\u30fc\u30d0\u30fc\u306e\u8ffd\u52a0\n\n\u63a5\u7d9a\u3057\u3066\u307f\u308b\u3068migrations\u30c6\u30fc\u30d6\u30eb\u304c\u3067\u304d\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\n\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210(\u30ed\u30fc\u30ab\u30eb\u306b\u4f5c\u308b)\nphp artisan make:migration create_customers_table\n\ndatabase/migrations\u306b\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u304c\u3067\u304d\u308b\u306e\u3067\u7de8\u96c6\n\n2015_05_26_053458_create_customers_table.php\n    public function up()\n    {\n        Schema::create('customers', function(Blueprint $table)\n        {\n            $table->increments('id');\n            $table->integer('user_id');\n            $table->string('name');\n            $table->string('memo');\n            $table->timestamps();\n        });\n    }\n\n    public function down()\n    {\n        Schema::drop('customers');\n    }\n\n\n\nSeeder\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\nvi database/seeds/CustomerTableSeeder.php\n\n\nCustomerTableSeeder.php\n<?php\n\nuse Illuminate\\Database\\Seeder;\nuse App\\Customer;\n\nclass CustomerTableSeeder extends Seeder {\n\n    public function run()\n    {\n        DB::table('customers')->delete();\n        Customer::create(['user_id' => 1, 'name' => '\u7530\u4e2d', 'memo' => '\u9ad8\u5ca1\u5e02\u5728\u4f4f']);\n    }\n\n}\n\n\ndatabase/seeds/DatabaseSeeder.php\n\n\nDatabaseSeeder.php\n<?php\n\nuse Illuminate\\Database\\Seeder;\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass DatabaseSeeder extends Seeder {\n\n    /**\n     * Run the database seeds.\n     *\n     * @return void\n     */\n    public function run()\n    {\n        Model::unguard();\n        $this->call('CustomerTableSeeder');\n    }\n\n}\n\n\n\nCustomer\u30af\u30e9\u30b9\u4f5c\u6210\nvi app/Customer.php\n\n\nCustomer.php\n<?php namespace App;\n\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass Customer extends Model {\n    /**\n     * The database table used by the model.\n     *\n     * @var string\n     */\n    protected $table = 'customers';\n\n    /**\n     * The attributes that are mass assignable.\n     *\n     * @var array\n     */\n    protected $fillable = ['name', 'memo'];\n}\n\n\n\nHeroku\u3078\u30c7\u30d7\u30ed\u30a4&\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u5b9f\u884c\n% git push heroku master\n% heroku run php artisan migrate:refresh --seed\n\n\n# Heroku\u306bLumen+Postgres\u306e\u74b0\u5883\u3092\u4f5c\u3063\u3066\u307f\u308b\u3002\n\n## \u524d\u63d0\u6761\u4ef6\n- \u30d6\u30e9\u30a6\u30b6\u304b\u3089heroku\u3078\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u300cfooo\u300d\u3068\u3044\u3046\u30a2\u30d7\u30ea\u4f5c\u6210\u6e08\u307f\u3002\n\n## Lumen\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nComposer\u3067\u30ed\u30fc\u30ab\u30eb\u306b\u843d\u3068\u3059\u3002\n\n~~~\n% composer create-project laravel/lumen --prefer-dist herokuLumenTest\n~~~\n\n## Heroku\u3078\u30c7\u30d7\u30ed\u30a4\n\n### Procfile\u8ffd\u52a0\n~~~\n% cd herokuLumenTest\n% vi Procfile\n~~~\n\n~~~ text:Procfile \nvendor/bin/heroku-php-apache2\n~~~\n\n### Heroku\u30ed\u30b0\u30a4\u30f3\n~~~\n% heroku login\nEnter your Heroku credentials.\nEmail: hoge@hoge.com\nPassword (typing will be hidden): \nAuthentication successful.\n~~~\n\n### Commit\u3059\u308b\n~~~\n% git init\n% heroku git:remote -a fooo\n% git add .\n% git commit -am '1st commit.'\n% git push heroku master\n~~~\n\nhttps://fooo.herokuapp.com/\u3000\nLumen\u753b\u9762\u8868\u793a\u78ba\u8a8d\u3002\n\n## DB\n\n### heroku-postgres\u3067DB\u4f5c\u308b\nHeroku\u306e\u30b5\u30a4\u30c8\u3067\u4f5c\u308b\u3002\n\n### DB\u60c5\u5831\u3092Heoroku\u306b\u8a2d\u5b9a\n~~~\n% heroku config:add DB_HOST=ec2-000-00-000-000.compute-0.amazonaws.com\n% heroku config:add DB_DATABASE=databasename                        \n% heroku config:add DB_USERNAME=username\n% heroku config:add DB_PASSWORD=password\n% heroku config\n=== fooo Config Vars\nDB_CONNECTION: pgsql\nDB_HOST:       ec2-000-00-000-000.compute-0.amazonaws.com\nDB_DATABASE:   databasename\nDB_PASSWORD:   username\nDB_USERNAME:   password\n~~~\n\n#### Migrate\u4f5c\u6210\n~~~\n# heroku run php artisan migrate:install\n~~~\n\n### Postgres\u7528\u306eGUI\u30a2\u30d7\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n[pgAdmin3 MacOSX\u7248](http://www.pgadmin.org/download/macosx.php)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n#### \u8a2d\u5b9a\n\n\u30d5\u30a1\u30a4\u30eb->\u30b5\u30fc\u30d0\u30fc\u306e\u8ffd\u52a0\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-05-26 14.02.08.png](https://qiita-image-store.s3.amazonaws.com/0/9907/db6465fe-a377-5920-50ea-574df138e01f.png)\n\n\u63a5\u7d9a\u3057\u3066\u307f\u308b\u3068migrations\u30c6\u30fc\u30d6\u30eb\u304c\u3067\u304d\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-05-26 15.21.52.png](https://qiita-image-store.s3.amazonaws.com/0/9907/81c9e940-c7da-3a58-470f-bb017ecbfb04.png)\n\n### \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210(\u30ed\u30fc\u30ab\u30eb\u306b\u4f5c\u308b)\n~~~\nphp artisan make:migration create_customers_table\n~~~\n\ndatabase/migrations\u306b\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u304c\u3067\u304d\u308b\u306e\u3067\u7de8\u96c6\n\n~~~ php:2015_05_26_053458_create_customers_table.php\n\tpublic function up()\n\t{\n\t\tSchema::create('customers', function(Blueprint $table)\n\t\t{\n\t\t\t$table->increments('id');\n\t\t\t$table->integer('user_id');\n\t\t\t$table->string('name');\n\t\t\t$table->string('memo');\n\t\t\t$table->timestamps();\n\t\t});\n\t}\n\n\tpublic function down()\n\t{\n\t\tSchema::drop('customers');\n\t}\n~~~\n\n### Seeder\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n\n~~~\nvi database/seeds/CustomerTableSeeder.php\n~~~\n\n~~~ php:CustomerTableSeeder.php\n<?php\n\nuse Illuminate\\Database\\Seeder;\nuse App\\Customer;\n\nclass CustomerTableSeeder extends Seeder {\n\n    public function run()\n    {\n        DB::table('customers')->delete();\n        Customer::create(['user_id' => 1, 'name' => '\u7530\u4e2d', 'memo' => '\u9ad8\u5ca1\u5e02\u5728\u4f4f']);\n    }\n\n}\n~~~\n\n~~~\ndatabase/seeds/DatabaseSeeder.php\n~~~\n\n~~~ php:DatabaseSeeder.php\n<?php\n\nuse Illuminate\\Database\\Seeder;\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass DatabaseSeeder extends Seeder {\n\n\t/**\n\t * Run the database seeds.\n\t *\n\t * @return void\n\t */\n\tpublic function run()\n\t{\n\t\tModel::unguard();\n\t\t$this->call('CustomerTableSeeder');\n\t}\n\n}\n~~~\n\n### Customer\u30af\u30e9\u30b9\u4f5c\u6210\n\n~~~\nvi app/Customer.php\n~~~\n\n~~~ php:Customer.php\n<?php namespace App;\n\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass Customer extends Model {\n\t/**\n\t * The database table used by the model.\n\t *\n\t * @var string\n\t */\n\tprotected $table = 'customers';\n\n\t/**\n\t * The attributes that are mass assignable.\n\t *\n\t * @var array\n\t */\n\tprotected $fillable = ['name', 'memo'];\n}\n~~~\n\n### Heroku\u3078\u30c7\u30d7\u30ed\u30a4&\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u5b9f\u884c\n~~~\n% git push heroku master\n% heroku run php artisan migrate:refresh --seed\n~~~\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-05-26 16.31.39.png](https://qiita-image-store.s3.amazonaws.com/0/9907/526a8169-560c-1990-2ce5-1cc5a13f3ef3.png)\n", "tags": ["lumen", "Heroku", "PostgreSQL"]}