{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nhubot-starbucks-egift\u306e\u74b0\u5883\u69cb\u7bc9\u65b9\u6cd5\u3092\u307e\u3068\u3081\u307e\u3057\u305f\n\ndocker/docker-compose\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nselenium\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u95a2\u4fc2\u3067\u3001docker\u4e0a\u306bhubot\u3092\u4f5c\u6210\u3059\u308b\ndocker/docker-compose\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u516c\u5f0f\u30da\u30fc\u30b8\u3092\u53c2\u8003\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ndocker\ndocker-compose\n\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\n\napp\ndocker-compose.yml\u3092\u914d\u5099\napp/bot\nhubot\u30b3\u30f3\u30c6\u30ca\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\napp/bot/resources\n\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u683c\u7d0d\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\napp/bot/judge\n\u6761\u4ef6\u5224\u5b9a\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u683c\u7d0d\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n\n\n\u3000\u30db\u30b9\u30c8\u74b0\u5883\u306bhubot\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nhubot\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nnpm install -g hubot coffee-script yo generator-hubot \n\n\nhubot\u3092\u4f5c\u6210\napp/bot\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3001\u96db\u5f62\u3092\u4f5c\u6210\u3059\u308b\n\napp/bot\nyo hubot\n\n\npackage.json\u3068external-scripts.json\u306bhubot-starbucks-egift\u3092\u8ffd\u8a18\u3059\u308b\n\napp/bot/package.json\n\"dependencies\": {\n  \"hubot-starbucks-egift\": \"0.0.1\"\n}\n\n\n\napp/bot/external-scripts.json\n[\"hubot-starbucks-egift\"]\n\n\n\nDockerfile\u3092\u4f5c\u6210\u3059\u308b\napp/bot\u306bDockerfile\u3092\u4f5c\u6210\u3059\u308b\n\u203badapter\u3092slack\u306b\u3057\u3066\u3044\u307e\u3059\n\napp/bot/Dockerfile\nFROM iojs:2.3.0\n\nRUN mkdir /bot && cd /bot\nADD . /bot\n\nWORKDIR /bot\n\nCMD [\"bin/hubot\", \"--adapter\", \"slack\"]\n\n\n\ndocker-compose.yml\u3092\u4f5c\u6210\u3059\u308b\napp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bdocker-compose.yml\u3092\u4f5c\u6210\n\u203b \u30d6\u30e9\u30a6\u30b6\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3088\u3046\u306b\u30c7\u30d0\u30c3\u30b0\u7528\u306e\u8a2d\u5b9a\u3067\u3059\n\napp/docker-compose.yml\nselenium:\n  image: selenium/standalone-chrome-debug:2.46.0\n  ports:\n    - \"4444:4444\"\n    - \"5900:5900\"\n  environment:\n    SCREEN_WIDTH: 1280\n    SCREEN_HEIGHT: 800\n  volumes:\n    - /dev/urandom:/dev/random\n\nbot:\n  build: ./bot\n  restart: always # \u63a5\u7d9a\u304c\u5207\u308c\u308b\u3068hubot\u304c\u843d\u3061\u308b\u306e\u3067\u518d\u8d77\u52d5\u3092\u8a2d\u5b9a\n  ports:\n    - \"8080:8080\"\n  environment:\n    HUBOT_SLACK_TOKEN: \n    SELENIUM_BROWSER: chrome\n    SELENIUM_REMOTE_URL: http://<\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8IP>:4444/wd/hub\u3000# \u306a\u305c\u304blocalhost\u3060\u3068\u63a5\u7d9a\u3067\u304d\u306a\u3044\u306e\u3067\n    STARBUCKS_MAIL_ADDRESS: \u6c7a\u6e08\u901a\u77e5\u7528\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\n    STARBUCKS_CREDIT_NUMBER: \"\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u756a\u53f7\"\n    STARBUCKS_CREDIT_MONTH: \"\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9(\u6708)\"\n    STARBUCKS_CREDIT_YEAR: \"\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9(\u5e74)\"\n\n\n\n\u8d77\u52d5\napp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001hubot\u3068selenium\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u8d77\u52d5\u3059\u308b\n\napp\ndocker-compose up -d\n\n\n\n# \u6982\u8981\n[hubot-starbucks-egift](https://www.npmjs.com/package/hubot-starbucks-egift)\u306e\u74b0\u5883\u69cb\u7bc9\u65b9\u6cd5\u3092\u307e\u3068\u3081\u307e\u3057\u305f\n\n# docker/docker-compose\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n* selenium\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u95a2\u4fc2\u3067\u3001docker\u4e0a\u306bhubot\u3092\u4f5c\u6210\u3059\u308b\n* docker/docker-compose\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u516c\u5f0f\u30da\u30fc\u30b8\u3092\u53c2\u8003\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n* [docker](https://docs.docker.com/)\n* [docker-compose](https://docs.docker.com/compose/install/)\n\n# \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\n<dl>\n\t<dt>app</dt><dd>docker-compose.yml\u3092\u914d\u5099</dd>\n\t<dt>app/bot</dt><dd>hubot\u30b3\u30f3\u30c6\u30ca\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea</dd>\n\t<dt>app/bot/resources</dt><dd>\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u683c\u7d0d\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea</dd>\n\t<dt>app/bot/judge</dt><dd>\u6761\u4ef6\u5224\u5b9a\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u683c\u7d0d\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea</dd>\n</dl>\n\n#\u3000\u30db\u30b9\u30c8\u74b0\u5883\u306bhubot\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n## hubot\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\nnpm install -g hubot coffee-script yo generator-hubot \n```\n\n## hubot\u3092\u4f5c\u6210\napp/bot\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3001\u96db\u5f62\u3092\u4f5c\u6210\u3059\u308b\n\n```bash:app/bot\nyo hubot\n```\n\npackage.json\u3068external-scripts.json\u306bhubot-starbucks-egift\u3092\u8ffd\u8a18\u3059\u308b\n\n```bash:app/bot/package.json\n\"dependencies\": {\n  \"hubot-starbucks-egift\": \"0.0.1\"\n}\n```\n\n```bash:app/bot/external-scripts.json\n[\"hubot-starbucks-egift\"]\n```\n\n## Dockerfile\u3092\u4f5c\u6210\u3059\u308b\napp/bot\u306bDockerfile\u3092\u4f5c\u6210\u3059\u308b\n\u203badapter\u3092slack\u306b\u3057\u3066\u3044\u307e\u3059\n\n```\u001dbash:app/bot/Dockerfile\nFROM iojs:2.3.0\n\nRUN mkdir /bot && cd /bot\nADD . /bot\n\nWORKDIR /bot\n\nCMD [\"bin/hubot\", \"--adapter\", \"slack\"]\n```\n\n## docker-compose.yml\u3092\u4f5c\u6210\u3059\u308b\napp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bdocker-compose.yml\u3092\u4f5c\u6210\n\u203b \u30d6\u30e9\u30a6\u30b6\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3088\u3046\u306b\u30c7\u30d0\u30c3\u30b0\u7528\u306e\u8a2d\u5b9a\u3067\u3059\n\n```bash:app/docker-compose.yml\nselenium:\n  image: selenium/standalone-chrome-debug:2.46.0\n  ports:\n    - \"4444:4444\"\n    - \"5900:5900\"\n  environment:\n    SCREEN_WIDTH: 1280\n    SCREEN_HEIGHT: 800\n  volumes:\n    - /dev/urandom:/dev/random\n\nbot:\n  build: ./bot\n  restart: always # \u63a5\u7d9a\u304c\u5207\u308c\u308b\u3068hubot\u304c\u843d\u3061\u308b\u306e\u3067\u518d\u8d77\u52d5\u3092\u8a2d\u5b9a\n  ports:\n    - \"8080:8080\"\n  environment:\n    HUBOT_SLACK_TOKEN: \n    SELENIUM_BROWSER: chrome\n    SELENIUM_REMOTE_URL: http://<\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8IP>:4444/wd/hub\u3000# \u306a\u305c\u304blocalhost\u3060\u3068\u63a5\u7d9a\u3067\u304d\u306a\u3044\u306e\u3067\n    STARBUCKS_MAIL_ADDRESS: \u6c7a\u6e08\u901a\u77e5\u7528\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\n    STARBUCKS_CREDIT_NUMBER: \"\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u756a\u53f7\"\n    STARBUCKS_CREDIT_MONTH: \"\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9(\u6708)\"\n    STARBUCKS_CREDIT_YEAR: \"\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9(\u5e74)\"\n```\n\n# \u8d77\u52d5\napp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001hubot\u3068selenium\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u8d77\u52d5\u3059\u308b\n\n```bash:app\ndocker-compose up -d\n```\n", "tags": ["Hubot", "docker", "docker-compose"]}