{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nGoogle Analytics Advent Calender 2\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\n\u3053\u306e\u8a18\u4e8b\u306f\u3001\u4ee5\u4e0b\u306e\u69d8\u306a\u65b9\u3005\u306b\u6367\u3052\u307e\u3059\u3002\n\nWeb\u30b5\u30a4\u30c8\u306b\u52d5\u753b\u3092\u57cb\u3081\u8fbc\u3093\u3060\u3051\u3069\u3001\u5b9f\u969b\u306b\u305d\u308c\u304c\u30b5\u30a4\u30c8\u3067\u518d\u751f\u3055\u308c\u3066\u3044\u308b\u304b\u52d5\u753b\u306e\u30aa\u30fc\u30ca\u30fc\u3058\u3083\u306a\u3044\u306e\u3067\u308f\u304b\u3089\u306a\u3044\u3002\u3067\u3082\u306a\u3093\u3068\u304b\u3057\u3066\u518d\u751f\u6570\u3092\u77e5\u308a\u305f\u3044\u3002\n\u52d5\u753b\u306e\u30aa\u30fc\u30ca\u30fc\u3067\u306f\u3042\u308b\u3051\u3069\u3001\u5358\u7d14\u306a\u518d\u751f\u56de\u6570\u3067\u306f\u306a\u304f\u3066\u3001Youtube.com\u3067\u518d\u751f\u3055\u308c\u305f\u306e\u304b\u3001\u81ea\u5206\u306e\u30b5\u30a4\u30c8\u306b\u57cb\u3081\u8fbc\u3093\u3060\u30d7\u30ec\u30a4\u30e4\u30fc\u3067\u518d\u751f\u3055\u308c\u305f\u306e\u304b\u3001\u5185\u8a33\u3092\u77e5\u308a\u305f\u3044\u3002\n\u3048\u3063\u3001Google Analytics\u3067\u52d5\u753b\u8a08\u6e2c\u3067\u304d\u308b\u306e\uff1f \u3068\u308a\u3042\u3048\u305a\u3084\u308a\u65b9\u304c\u77e5\u308a\u305f\u3044\nGTM\uff08Google Tag Manager\uff09\u3092\u4f7f\u3063\u305f\u4f55\u304b\u4fbf\u5229\u306a\u3053\u3068\u3092\u3057\u3066\u307f\u305f\u3044\n\n\n\u524d\u63d0\n\u5f53\u8a18\u4e8b\u306f\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3001\u7b46\u8005\u304c\u5185\u5bb9\u3092\u548c\u8a33\u30fb\u5480\u56bc\u30fb\u4fee\u6b63\u3057\u305f\u8a18\u4e8b\u3067\u3059\u3002\nYOUTUBE VIDEO TRACKING WITH GTM AND UA: A STEP BY STEP GUIDE\n\u203b\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5185\u5bb9\u7406\u89e3\u3092\u6df1\u3081\u308b\u305f\u3081\u306b\u3001\u30b3\u30fc\u30c9\u306e\u90e8\u5206\u7b49\u3092\u610f\u56f3\u7684\u306b\u6539\u5909\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u6982\u8981\nGoogle Analytics\uff08Universal Analytics\uff09\u3092\u4f7f\u7528\u3057\u3066\u3001\nYoutube\u306e\u52d5\u753b\u304c\u3069\u308c\u3060\u3051\u518d\u751f\u3055\u308c\u305f\u304b\u3092\u8abf\u3079\u307e\u3059\u3002\n\u4ed5\u8fbc\u307f\u306b\u306fGoogle Tag Manager\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u624b\u6cd5\u3092\u7528\u3044\u308b\u30e1\u30ea\u30c3\u30c8\n\u305d\u3082\u305d\u3082\u306eYoutube\u306b\u306f\u518d\u751f\u6570\u306a\u3069\u3092\u5206\u6790\u3059\u308b\u6a5f\u80fd\u304c\u5143\u304b\u3089\u3064\u3044\u3066\u3044\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001\u305d\u308c\u3092\u95b2\u89a7\u3067\u304d\u308b\u306e\u306f\u52d5\u753b\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u306e\u307f\u3067\u3059\u3002\n\u3053\u306e\u624b\u6cd5\u3092\u7528\u3044\u308b\u3068\u3001\n\n\u81ea\u5206\u306e\u30b5\u30a4\u30c8\u306b\u8cbc\u3063\u305fYoutube\u52d5\u753b\u306e\u518d\u751f\u6570\u304c\u8a08\u6e2c\u3067\u304d\u308b\nGoogle Analytics\u306e\u8a08\u6e2c\u3068\u5408\u308f\u305b\u308b\u3053\u3068\u3067\u3001\u52d5\u753b\u3092\u898b\u305f\u30e6\u30fc\u30b6\u30fc\u306e\u52d5\u7dda\u304c\u308f\u304b\u308b\n\n\u306a\u3069\u306e\u30e1\u30ea\u30c3\u30c8\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u8a2d\u5b9a\n\u30de\u30af\u30ed\u3001\u30c8\u30ea\u30ac\u30fc\u3001\u30bf\u30b0\u306b\u3064\u3044\u3066\u305d\u308c\u305e\u308c\u8a2d\u5b9a\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u30de\u30af\u30ed\n\u30de\u30af\u30ed\u3067\u8a2d\u5b9a\u3059\u308b\u9805\u76ee\u306f3\u3064\u3067\u3059\n\nYoutube\u306e\u5b58\u5728\u78ba\u8a8d\ndataLayer\u306e\u9805\u76ee\u8ffd\u52a0\uff08action\uff09\ndataLayer\u306e\u9805\u76ee\u8ffd\u52a0\uff08label\uff09\n\n\n1.Youtube\u306e\u5b58\u5728\u78ba\u8a8d\n\n\n\n\u8a2d\u5b9a\u9805\u76ee\n\u5024\n\n\n\n\n\u540d\u524d\nYoutube\u5b58\u5728\u78ba\u8a8d\n\n\n\u30ab\u30c6\u30b4\u30ea\u30fc\n\u5909\u6570\uff08Variable\uff09\n\n\n\u7a2e\u985e\n\u30ab\u30b9\u30bf\u30e0Javascript\n\n\n\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u30c6\u30ad\u30b9\u30c8\u30a8\u30ea\u30a2\u306b\u8cbc\u308a\u4ed8\u3051\u308b\n\nYoutube\u5b58\u5728\u78ba\u8a8d\n/**\n * \u5c11\u306a\u304f\u3068\u3082\u3001\u6700\u4f4e1\u500b\u3042\u308c\u3070\u3001true\u304c\u8fd4\u308b\n */\nfunction () {\n    var frames = document.getElementsByTagName('iframe');\n\n    for (var i = 0, i <= frames.length; i--;){\n        if (/youtube.com\\/embed/.test(frames[i].src)){\n            return true;\n        }\n    }\n    return false;\n}\n\n\n\n2.dataLayer\u306e\u9805\u76ee\u8ffd\u52a0\uff08action\uff09\n\n\n\n\u8a2d\u5b9a\u9805\u76ee\n\u5024\n\n\n\n\n\u30ab\u30c6\u30b4\u30ea\u30fc\n\u5909\u6570\uff08Variable\uff09\n\n\n\u540d\u524d\n\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc_action\n\n\n\u7a2e\u985e\n\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc\u306e\u5909\u6570\n\n\n\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc\u306e\u5909\u6570\u540d\naction\n\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\n\u30d0\u30fc\u30b8\u30e7\u30f32\n\n\n\n\n3.dataLayer\u306e\u9805\u76ee\u8ffd\u52a0\uff08label\uff09\n\n\n\n\u8a2d\u5b9a\u9805\u76ee\n\u5024\n\n\n\n\n\u30ab\u30c6\u30b4\u30ea\u30fc\n\u5909\u6570\uff08Variable\uff09\n\n\n\u540d\u524d\n\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc_label\n\n\n\u7a2e\u985e\n\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc\u306e\u5909\u6570\n\n\n\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc\u306e\u5909\u6570\u540d\nlabel\n\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\n\u30d0\u30fc\u30b8\u30e7\u30f32\n\n\n\n\n\n\u30c8\u30ea\u30ac\u30fc\n\u30c8\u30ea\u30ac\u30fc\u3067\u8a2d\u5b9a\u3059\u308b\u306e\u306f2\u3064\u3067\u3059\n\nYoutube\u306e\u52d5\u753b\u304c\u30da\u30fc\u30b8\u306b\u3042\u3063\u305f\u3089\u914d\u4fe1\u30c8\u30ea\u30ac\u30fc\nYoutube\u306e\u30a4\u30d9\u30f3\u30c8\u304c\u4f55\u304b\u3057\u3089\u3042\u3063\u305f\u3089\u914d\u4fe1\u30c8\u30ea\u30ac\u30fc\n\n\n1.Youtube\u306e\u52d5\u753b\u304c\u30da\u30fc\u30b8\u306b\u3042\u3063\u305f\u3089\u914d\u4fe1\u30c8\u30ea\u30ac\u30fc\n\n\n\n\u8a2d\u5b9a\u9805\u76ee\n\u5024\n\n\n\n\n\u30ab\u30c6\u30b4\u30ea\u30fc\n\u30c8\u30ea\u30ac\u30fc\uff08Trigger\uff09\n\n\n\u540d\u524d\nYoutube\u30c8\u30ea\u30ac\u30fc\n\n\n\u30a4\u30d9\u30f3\u30c8\u3092\u9078\u629e\n\u30ab\u30b9\u30bf\u30e0\u30a4\u30d9\u30f3\u30c8\n\n\n\u914d\u4fe1\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\n{{Event}}\u3000\u7b49\u3057\u3044\u3000gtm.dom\n\n\n\u914d\u4fe1\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b02\n{{Youtube\u5b58\u5728\u78ba\u8a8d}}\u3000\u7b49\u3057\u3044\u3000true\u3000\n\n\n\n\n2.Youtube\u306e\u30a4\u30d9\u30f3\u30c8\u304c\u4f55\u304b\u3057\u3089\u3042\u3063\u305f\u3089\u914d\u4fe1\u30c8\u30ea\u30ac\u30fc\n\n\n\n\u8a2d\u5b9a\u9805\u76ee\n\u5024\n\n\n\n\n\u30ab\u30c6\u30b4\u30ea\u30fc\n\u30c8\u30ea\u30ac\u30fc\uff08Trigger\uff09\n\n\n\u540d\u524d\nYoutube\u30a4\u30d9\u30f3\u30c8\u30c8\u30ea\u30ac\u30fc\n\n\n\u30a4\u30d9\u30f3\u30c8\u3092\u9078\u629e\n\u30ab\u30b9\u30bf\u30e0\u30a4\u30d9\u30f3\u30c8\n\n\n\u914d\u4fe1\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\n{{Event}}\u3000\u7b49\u3057\u3044\u3000youtube\n\n\n\n\n\n\u30bf\u30b0\n\u30bf\u30b0\u3067\u8a2d\u5b9a\u3059\u308b\u306e\u306f2\u3064\u3067\u3059\n\nYoutube\u30ea\u30b9\u30ca\u30fc\nYoutube\u30a4\u30d9\u30f3\u30c8\u30bf\u30b0\n\n\n1.Youtube\u30ea\u30b9\u30ca\u30fc\n\n\n\n\u8a2d\u5b9a\u9805\u76ee\n\u5024\n\n\n\n\n\u30ab\u30c6\u30b4\u30ea\u30fc\n\u30bf\u30b0\uff08Tag\uff09\n\n\n\u540d\u524d\nYoutube\u30ea\u30b9\u30ca\u30fc\n\n\n\u30d7\u30ed\u30c0\u30af\u30c8\u306e\u9078\u629e\n\u30ab\u30b9\u30bf\u30e0HTML\u30bf\u30b0\n\n\n\u914d\u4fe1\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\nYoutube\u30c8\u30ea\u30ac\u30fc\u3000\u3092\u9078\u629e\n\n\n\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u30c6\u30ad\u30b9\u30c8\u30a8\u30ea\u30a2\u306b\u8cbc\u308a\u4ed8\u3051\u308b\n\nYoutube\u30ea\u30b9\u30ca\u30fc\n<script type=\"text/javascript\">\n/*\n * Youtube\u306eJavascriptAPI\u306f\u3001\u305d\u3082\u305d\u3082iframe\u3067\u8aad\u307f\u8fbc\u3080URL\u306b\n * \u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3067enablejsapi=1\u304c\u3064\u3044\u3066\u3044\u306a\u3044\u3068\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3002\n * \u306a\u306e\u3067\u3001iframe\u306e\u30bf\u30b0\u3092\u9806\u756a\u306b\u306a\u3081\u3066\u3044\u304d\u3001\n * youtube\u306e\u57cb\u3081\u8fbc\u307f\u7528\u304b\u3064\u305d\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u304c\u3064\u3044\u3066\u306a\u3044\u5834\u5408\u306f\n * \u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306e\u6587\u5b57\u5217\u3092\u3064\u3051\u308b\u3088\u3046\u306b\u4fee\u6b63\u3059\u308b\n */\nfor (var e = document.getElementsByTagName(\"iframe\"), x = e.length; x--;)\n  if (/youtube.com\\/embed/.test(e[x].src))\n     if(e[x].src.indexOf('enablejsapi=') === -1)\n        e[x].src += (e[x].src.indexOf('?') ===-1 ? '?':'&') + 'enablejsapi=1';\n\n// \u540c\u3058\u30da\u30fc\u30b8\u306b\u8907\u6570\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u30b5\u30dd\u30fc\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u914d\u5217\u5f62\u5f0f\u3067\u4fdd\u6301\u3092\u3057\u307e\u3059\nvar gtmYTListeners = [];\n\n// API\u304c\u30ed\u30fc\u30c9\u3055\u308c\u305f\u6642\u306b\u3053\u306eYTListener\u3092\u8ffd\u52a0\u3057\u3066\u3044\u304f\nfunction onYouTubeIframeAPIReady() {\n    for (var e = document.getElementsByTagName(\"iframe\"), x = e.length; x--;) {\n        if (/youtube.com\\/embed/.test(e[x].src)) {\n            gtmYTListeners.push(new YT.Player(e[x], {\n                events: {\n                    onStateChange: onPlayerStateChange,\n                    onError: onPlayerError\n                }\n            }));\n            YT.gtmLastAction = \"p\";\n        }\n    }\n}\n\n\n/*\n * \u518d\u751f\u3068\u4e00\u6642\u505c\u6b62\u304c\u62bc\u3055\u308c\u305f\u6642\u306e\u51e6\u7406\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n * if\u6761\u4ef6\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u5dfb\u304d\u623b\u3057\u3084\u7d42\u4e86\u306a\u3069\u306e\u4ed6\u306e\u51e6\u7406\u3082\u8ffd\u52a0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n * \u307e\u305f\u3001\u4f55\uff05\u518d\u751f\u304c\u5b8c\u4e86\u3057\u305f\u304b\u306e\u51e6\u7406\u3092\u4ed5\u8fbc\u3093\u3067\u3044\u307e\u3059\n * \n */ \nfunction onPlayerStateChange(e) {\n    e[\"data\"] == YT.PlayerState.PLAYING && setTimeout(onPlayerPercent, 1000, e[\"target\"]);\n    var video_data = e.target[\"getVideoData\"](),\n        label = video_data.video_id+':'+video_data.title;\n\n    /*\n     * \u518d\u751f\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\u6642\u306b\u518d\u751f\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u751f\u3055\u305b\u307e\u3059\u3002\n     * \u76f4\u524d\u306e\u52d5\u4f5c\u304c\u4e00\u6642\u505c\u6b62\u3067\u306a\u3044\u3068\u767a\u751f\u3057\u307e\u305b\u3093\n     * \u3064\u307e\u308a\u3001\u81ea\u7136\u306b\u505c\u6b62\uff08\u4e00\u5ea6\u518d\u751f\u5b8c\u4e86\uff09\u3057\u305f\u5834\u5408\u306f\u3001\u767a\u751f\u3057\u307e\u305b\u3093\u3002\n     * \u4f55\u5ea6\u518d\u751f\u5b8c\u4e86\u3057\u3066\u3082\u3001\u767a\u751f\u3055\u305b\u305f\u3044\u5834\u5408\u306fYT.gtmLastAction == \"p\"\u306e\u6761\u4ef6\u3092\u5916\u3057\u307e\u3059\n     */ \n    if (e[\"data\"] == YT.PlayerState.PLAYING && YT.gtmLastAction == \"p\") {\n        dataLayer.push({\n            event: \"youtube\",\n            action: \"play\",\n            label: label\n        });\n        YT.gtmLastAction = \"\";\n    }\n\n    /**\n     * \u4e00\u6642\u505c\u6b62\u304c\u62bc\u3055\u308c\u305f\u6642\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u751f\u3055\u305b\u307e\u3059\u3002\n     */\n    if (e[\"data\"] == YT.PlayerState.PAUSED) {\n        dataLayer.push({\n            event: \"youtube\",\n            action: \"pause\",\n            label: label\n        });\n        YT.gtmLastAction = \"p\";\n    }\n}\n\n\n\n/*\n * GTM\u306e\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc\u3092\u4ecb\u3057\u3066\u30a8\u30e9\u30fc\u30ec\u30dd\u30fc\u30c8\u3059\u308b\u305f\u3081\u306e\u51e6\u7406\n * GTM\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u529b\u3055\u308c\u308b\u3068\u3001UniversalAnalytics\u3067\u306f\u305d\u308c\u3092\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0\u3067\u304d\u307e\u3059\n * \u4f8b\u3048\u3070\u3001\u52d5\u753b\u304c\u524a\u9664\u3055\u308c\u3066\u3044\u305f\u308a\u52d5\u753bID\u304c\u9593\u9055\u3063\u3066\u3044\u305f\u5834\u5408\u306b\u3053\u306e\u30a8\u30e9\u30fc\u304c\u52d5\u304d\u307e\u3059\u3002\n *\n * \u53c2\u8003\uff1ahttps://developers.google.com/youtube/js_api_reference#Events\n */\nfunction onPlayerError(e) {\n    dataLayer.push({\n        event: \"error\",\n        action: \"GTM\",\n        label: \"youtube:\" + e\n    })\n}\n\n\n/*\n * \u52d5\u753b\u3092\u4f55\uff05\u518d\u751f\u3057\u305f\u304b\u3092\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0\u3057\u307e\u3059\u3002\n * 0%\u300125%\u300150%\u300175%\u3001100%\u3092\u518d\u751f\u3057\u305f\u6642\u70b9\u3067\u305d\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002\n * 1\u79d2\u6bce\u306b\u51e6\u7406\u3092\u5b9f\u884c\u3057\u3066\u518d\u751f\u6642\u9593\u3092\u78ba\u8a8d\u3057\u3001\n * \u3057\u304d\u3044\u5024\u3092\u8d85\u3048\u3066\u3044\u305f\u3089\u30a4\u30d9\u30f3\u30c8\u3092\u9001\u4fe1\u3059\u308b\u3068\u3044\u3046\u6d41\u308c\u3067\u3059\u3002\n * \u3053\u306e\u51e6\u7406\u306f\u3001\u518d\u751f\u3082\u3057\u304f\u306f\u4e00\u6642\u505c\u6b62\u304c\u62bc\u3055\u308c\u305f\u6642\u306b\u76e3\u8996\u304c\u958b\u59cb\u3057\u307e\u3059\u3002\n */\nfunction onPlayerPercent(e) {\n    if (e[\"getPlayerState\"]() == YT.PlayerState.PLAYING) {\n        var t = e[\"getDuration\"]() - e[\"getCurrentTime\"]() <= 1.5 ? 1 : (Math.floor(e[\"getCurrentTime\"]() / e[\"getDuration\"]() * 4) / 4).toFixed(2);\n         if (!e[\"lastP\"] || t > e[\"lastP\"]) {\n            var video_data = e[\"getVideoData\"](),\n                label = video_data.video_id+':'+video_data.title;\n            e[\"lastP\"] = t;\n            dataLayer.push({\n                event: \"youtube\",\n                action: t * 100 + \"%\",\n                label: label\n            })\n        }\n        e[\"lastP\"] != 1 && setTimeout(onPlayerPercent, 1000, e);\n    }\n}\n\n\n\n/*\n * \u30af\u30ed\u30b9\u30d6\u30e9\u30a6\u30b6\u51e6\u7406\u3002\n * \u53c2\u8003\uff1ahttps://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeunload\n */\nwindow.onbeforeunload = function (e) {\n var e = e || window.event;\n // IE\u3068Firefix4\u4ee5\u524d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7528\n if(e)\n e.returnValue = 'na';\n // Safari\u7528\n return 'na';\n};\nwindow.onbeforeunload = trackYTUnload;\n\n\n/*\n * gtmYTUnload\u304c\u7834\u68c4\u3055\u308c\u305f\u6642\u306b\u3059\u308b\u51e6\u7406\u3002\n * \u30da\u30fc\u30b8\u304c\u5909\u308f\u3063\u305f\u308a\u9589\u3058\u308b\u76f4\u524d\u306b\u884c\u308f\u308c\u308b\u3002\n */ \nfunction trackYTUnload() {\n    for (var i = 0; i < gtmYTplayers.length; i++){\n        if (gtmYTlisteners[i].getPlayerState() === 1) { // \u518d\u751f\n            var video_data = gtmYTlisteners[i]['getVideoData'](),\n                label = video_data.video_id+':'+video_data.title;\n            dataLayer.push({\n                event: 'youtube',\n                action: 'exit',\n                label: label\n            });\n        }\n    }\n}\n\n\n\n/*\n * \u73fe\u5728\u306e\u30da\u30fc\u30b8\u306bYoutube\u306eJavascriptAPI\u306e\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\n */\nvar j = document.createElement(\"script\"),\n    f = document.getElementsByTagName(\"script\")[0];\nj.src = \"//www.youtube.com/iframe_api\";\nj.async = true;\nf.parentNode.insertBefore(j, f);\n</script>\n\n\n\n2.Youtube\u30a4\u30d9\u30f3\u30c8\u30bf\u30b0\n\n\n\n\u8a2d\u5b9a\u9805\u76ee\n\u5024\n\n\n\n\n\u30ab\u30c6\u30b4\u30ea\u30fc\n\u30bf\u30b0\uff08Tag\uff09\n\n\n\u540d\u524d\nYoutube\u30a4\u30d9\u30f3\u30c8\n\n\n\u30d7\u30ed\u30c0\u30af\u30c8\u306e\u9078\u629e\nGoogle Analytics\n\n\n\u30bf\u30b0\u306e\u7a2e\u985e\u3092\u9078\u629e\n\u30e6\u30cb\u30d0\u30fc\u30b5\u30eb\u30a2\u30ca\u30ea\u30c6\u30a3\u30af\u30b9\n\n\n\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0ID\nUA-XXXXXX-Y\uff08\u3054\u81ea\u8eab\u306e\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0ID\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\uff09\n\n\n\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0\u30bf\u30a4\u30d7\n\u30a4\u30d9\u30f3\u30c8\n\n\n\u30ab\u30c6\u30b4\u30ea\n{{Event}}\n\n\n\u30a2\u30af\u30b7\u30e7\u30f3\n{{\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc_action}}\n\n\n\u30e9\u30d9\u30eb\n{{\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc_label}}\n\n\n\u914d\u4fe1\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\nYoutube\u30a4\u30d9\u30f3\u30c8\u30c8\u30ea\u30ac\u30fc\u3000\u3092\u9078\u629e\n\n\n\n\n\u4ee5\u4e0a\u306e\u30de\u30af\u30ed\u3001\u30c8\u30ea\u30ac\u30fc\u3001\u30bf\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\nGA\u306e\u30a4\u30d9\u30f3\u30c8\u30ec\u30dd\u30fc\u30c8\u753b\u9762\u3067\u52d5\u753b\u306e\u518d\u751f/\u4e00\u6642\u505c\u6b62\u56de\u6570\u3001\u518d\u751f\u9032\u884c\u5ea6\uff080%\u301c100\uff05\uff09\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u300c\u52d5\u753b\u3092\u518d\u751f\u3057\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fc\u306e\u307b\u3046\u304c\u30b3\u30f3\u30d0\u30fc\u30b8\u30e7\u30f3\u7387\u304c\u9ad8\u3044\u300d\u3068\u304b\u3001\n\u300c\u610f\u5916\u3068\u6700\u5f8c\u307e\u3067\u518d\u751f\u3057\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fc\u306e\u307b\u3046\u304c\u76f4\u5e30\u3057\u3066\u3044\u308b\u300d\u306a\u3069\u306e\u793a\u5506\u3092\u5f97\u3089\u308c\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\u4f59\u8ac7\nYoutube\u306eAPI\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3092\u307f\u308b\u3068\u3001\u4ed6\u306b\u3082\u8272\u3005\u3068\u3067\u304d\u308b\u3053\u3068\u304c\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\n\u30d0\u30c3\u30d5\u30a1\u30ea\u30f3\u30b0\u4e2d\u306e\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\u306a\u3069\u3082\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u4ed6\u306b\u3082\u4f55\u304b\u8272\u3005\u3068\u8a08\u6e2c\u304c\u51fa\u6765\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n#\u306f\u3058\u3081\u306b\nGoogle Analytics Advent Calender 2\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\n\n\u3053\u306e\u8a18\u4e8b\u306f\u3001\u4ee5\u4e0b\u306e\u69d8\u306a\u65b9\u3005\u306b\u6367\u3052\u307e\u3059\u3002\n\n* Web\u30b5\u30a4\u30c8\u306b\u52d5\u753b\u3092\u57cb\u3081\u8fbc\u3093\u3060\u3051\u3069\u3001\u5b9f\u969b\u306b\u305d\u308c\u304c\u30b5\u30a4\u30c8\u3067\u518d\u751f\u3055\u308c\u3066\u3044\u308b\u304b\u52d5\u753b\u306e\u30aa\u30fc\u30ca\u30fc\u3058\u3083\u306a\u3044\u306e\u3067\u308f\u304b\u3089\u306a\u3044\u3002\u3067\u3082\u306a\u3093\u3068\u304b\u3057\u3066\u518d\u751f\u6570\u3092\u77e5\u308a\u305f\u3044\u3002\n\n* \u52d5\u753b\u306e\u30aa\u30fc\u30ca\u30fc\u3067\u306f\u3042\u308b\u3051\u3069\u3001\u5358\u7d14\u306a\u518d\u751f\u56de\u6570\u3067\u306f\u306a\u304f\u3066\u3001Youtube.com\u3067\u518d\u751f\u3055\u308c\u305f\u306e\u304b\u3001\u81ea\u5206\u306e\u30b5\u30a4\u30c8\u306b\u57cb\u3081\u8fbc\u3093\u3060\u30d7\u30ec\u30a4\u30e4\u30fc\u3067\u518d\u751f\u3055\u308c\u305f\u306e\u304b\u3001\u5185\u8a33\u3092\u77e5\u308a\u305f\u3044\u3002\n* \u3048\u3063\u3001Google Analytics\u3067\u52d5\u753b\u8a08\u6e2c\u3067\u304d\u308b\u306e\uff1f \u3068\u308a\u3042\u3048\u305a\u3084\u308a\u65b9\u304c\u77e5\u308a\u305f\u3044\n* GTM\uff08Google Tag Manager\uff09\u3092\u4f7f\u3063\u305f\u4f55\u304b\u4fbf\u5229\u306a\u3053\u3068\u3092\u3057\u3066\u307f\u305f\u3044\n\n##\u524d\u63d0\n\u5f53\u8a18\u4e8b\u306f\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3001\u7b46\u8005\u304c\u5185\u5bb9\u3092\u548c\u8a33\u30fb\u5480\u56bc\u30fb\u4fee\u6b63\u3057\u305f\u8a18\u4e8b\u3067\u3059\u3002\n[YOUTUBE VIDEO TRACKING WITH GTM AND UA: A STEP BY STEP GUIDE](http://www.cardinalpath.com/youtube-video-tracking-with-gtm-and-ua-a-step-by-step-guide/)\n\u203b\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5185\u5bb9\u7406\u89e3\u3092\u6df1\u3081\u308b\u305f\u3081\u306b\u3001\u30b3\u30fc\u30c9\u306e\u90e8\u5206\u7b49\u3092\u610f\u56f3\u7684\u306b\u6539\u5909\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n##\u6982\u8981\nGoogle Analytics\uff08Universal Analytics\uff09\u3092\u4f7f\u7528\u3057\u3066\u3001\nYoutube\u306e\u52d5\u753b\u304c\u3069\u308c\u3060\u3051\u518d\u751f\u3055\u308c\u305f\u304b\u3092\u8abf\u3079\u307e\u3059\u3002\n\u4ed5\u8fbc\u307f\u306b\u306fGoogle Tag Manager\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n##\u3053\u306e\u624b\u6cd5\u3092\u7528\u3044\u308b\u30e1\u30ea\u30c3\u30c8\n\u305d\u3082\u305d\u3082\u306eYoutube\u306b\u306f\u518d\u751f\u6570\u306a\u3069\u3092\u5206\u6790\u3059\u308b\u6a5f\u80fd\u304c\u5143\u304b\u3089\u3064\u3044\u3066\u3044\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001\u305d\u308c\u3092\u95b2\u89a7\u3067\u304d\u308b\u306e\u306f\u52d5\u753b\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u306e\u307f\u3067\u3059\u3002\n\u3053\u306e\u624b\u6cd5\u3092\u7528\u3044\u308b\u3068\u3001\n\n* \u81ea\u5206\u306e\u30b5\u30a4\u30c8\u306b\u8cbc\u3063\u305fYoutube\u52d5\u753b\u306e\u518d\u751f\u6570\u304c\u8a08\u6e2c\u3067\u304d\u308b\n* Google Analytics\u306e\u8a08\u6e2c\u3068\u5408\u308f\u305b\u308b\u3053\u3068\u3067\u3001\u52d5\u753b\u3092\u898b\u305f\u30e6\u30fc\u30b6\u30fc\u306e\u52d5\u7dda\u304c\u308f\u304b\u308b\n\n\u306a\u3069\u306e\u30e1\u30ea\u30c3\u30c8\u304c\u3042\u308a\u307e\u3059\u3002\n\n\n#\u8a2d\u5b9a\n\u30de\u30af\u30ed\u3001\u30c8\u30ea\u30ac\u30fc\u3001\u30bf\u30b0\u306b\u3064\u3044\u3066\u305d\u308c\u305e\u308c\u8a2d\u5b9a\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\n##\u30de\u30af\u30ed\n\u30de\u30af\u30ed\u3067\u8a2d\u5b9a\u3059\u308b\u9805\u76ee\u306f3\u3064\u3067\u3059\n\n1. Youtube\u306e\u5b58\u5728\u78ba\u8a8d\n1. dataLayer\u306e\u9805\u76ee\u8ffd\u52a0\uff08action\uff09\n1. dataLayer\u306e\u9805\u76ee\u8ffd\u52a0\uff08label\uff09\n\n\n###1.Youtube\u306e\u5b58\u5728\u78ba\u8a8d\n\n|\u8a2d\u5b9a\u9805\u76ee|\u5024|\n|---|---|\n|\u540d\u524d|Youtube\u5b58\u5728\u78ba\u8a8d|\n|\u30ab\u30c6\u30b4\u30ea\u30fc|\u5909\u6570\uff08Variable\uff09|\n|\u7a2e\u985e|\u30ab\u30b9\u30bf\u30e0Javascript|\n\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u30c6\u30ad\u30b9\u30c8\u30a8\u30ea\u30a2\u306b\u8cbc\u308a\u4ed8\u3051\u308b\n\n```js:Youtube\u5b58\u5728\u78ba\u8a8d\n/**\n * \u5c11\u306a\u304f\u3068\u3082\u3001\u6700\u4f4e1\u500b\u3042\u308c\u3070\u3001true\u304c\u8fd4\u308b\n */\nfunction () {\n    var frames = document.getElementsByTagName('iframe');\n\n    for (var i = 0, i <= frames.length; i--;){\n        if (/youtube.com\\/embed/.test(frames[i].src)){\n            return true;\n        }\n    }\n    return false;\n}\n```\n\n\n###2.dataLayer\u306e\u9805\u76ee\u8ffd\u52a0\uff08action\uff09\n\n|\u8a2d\u5b9a\u9805\u76ee|\u5024|\n|---|---|\n|\u30ab\u30c6\u30b4\u30ea\u30fc|\u5909\u6570\uff08Variable\uff09|\n|\u540d\u524d|\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc_action|\n|\u7a2e\u985e|\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc\u306e\u5909\u6570|\n|\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc\u306e\u5909\u6570\u540d|action|\n|\u30d0\u30fc\u30b8\u30e7\u30f3|\u30d0\u30fc\u30b8\u30e7\u30f32|\n\n\n###3.dataLayer\u306e\u9805\u76ee\u8ffd\u52a0\uff08label\uff09\n\n|\u8a2d\u5b9a\u9805\u76ee|\u5024|\n|---|---|\n|\u30ab\u30c6\u30b4\u30ea\u30fc|\u5909\u6570\uff08Variable\uff09|\n|\u540d\u524d|\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc_label|\n|\u7a2e\u985e|\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc\u306e\u5909\u6570|\n|\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc\u306e\u5909\u6570\u540d|label|\n|\u30d0\u30fc\u30b8\u30e7\u30f3|\u30d0\u30fc\u30b8\u30e7\u30f32|\n\n\n--------\n\n\n##\u30c8\u30ea\u30ac\u30fc\n\u30c8\u30ea\u30ac\u30fc\u3067\u8a2d\u5b9a\u3059\u308b\u306e\u306f2\u3064\u3067\u3059\n\n1. Youtube\u306e\u52d5\u753b\u304c\u30da\u30fc\u30b8\u306b\u3042\u3063\u305f\u3089\u914d\u4fe1\u30c8\u30ea\u30ac\u30fc\n1. Youtube\u306e\u30a4\u30d9\u30f3\u30c8\u304c\u4f55\u304b\u3057\u3089\u3042\u3063\u305f\u3089\u914d\u4fe1\u30c8\u30ea\u30ac\u30fc\n\n###1.Youtube\u306e\u52d5\u753b\u304c\u30da\u30fc\u30b8\u306b\u3042\u3063\u305f\u3089\u914d\u4fe1\u30c8\u30ea\u30ac\u30fc\n|\u8a2d\u5b9a\u9805\u76ee|\u5024|\n|---|---|\n|\u30ab\u30c6\u30b4\u30ea\u30fc|\u30c8\u30ea\u30ac\u30fc\uff08Trigger\uff09|\n|\u540d\u524d|Youtube\u30c8\u30ea\u30ac\u30fc|\n|\u30a4\u30d9\u30f3\u30c8\u3092\u9078\u629e|\u30ab\u30b9\u30bf\u30e0\u30a4\u30d9\u30f3\u30c8|\n|\u914d\u4fe1\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0|{{Event}}\u3000\u7b49\u3057\u3044\u3000gtm.dom|\n|\u914d\u4fe1\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b02|{{Youtube\u5b58\u5728\u78ba\u8a8d}}\u3000\u7b49\u3057\u3044\u3000true\u3000|\n\n\n###2.Youtube\u306e\u30a4\u30d9\u30f3\u30c8\u304c\u4f55\u304b\u3057\u3089\u3042\u3063\u305f\u3089\u914d\u4fe1\u30c8\u30ea\u30ac\u30fc\n|\u8a2d\u5b9a\u9805\u76ee|\u5024|\n|---|---|\n|\u30ab\u30c6\u30b4\u30ea\u30fc|\u30c8\u30ea\u30ac\u30fc\uff08Trigger\uff09|\n|\u540d\u524d|Youtube\u30a4\u30d9\u30f3\u30c8\u30c8\u30ea\u30ac\u30fc|\n|\u30a4\u30d9\u30f3\u30c8\u3092\u9078\u629e|\u30ab\u30b9\u30bf\u30e0\u30a4\u30d9\u30f3\u30c8|\n|\u914d\u4fe1\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0|{{Event}}\u3000\u7b49\u3057\u3044\u3000youtube|\n\n\n\n---------\n\n##\u30bf\u30b0\n\u30bf\u30b0\u3067\u8a2d\u5b9a\u3059\u308b\u306e\u306f2\u3064\u3067\u3059\n\n* Youtube\u30ea\u30b9\u30ca\u30fc\n* Youtube\u30a4\u30d9\u30f3\u30c8\u30bf\u30b0\n\n###1.Youtube\u30ea\u30b9\u30ca\u30fc\n\n|\u8a2d\u5b9a\u9805\u76ee|\u5024|\n|---|---|\n|\u30ab\u30c6\u30b4\u30ea\u30fc|\u30bf\u30b0\uff08Tag\uff09|\n|\u540d\u524d|Youtube\u30ea\u30b9\u30ca\u30fc|\n|\u30d7\u30ed\u30c0\u30af\u30c8\u306e\u9078\u629e|\u30ab\u30b9\u30bf\u30e0HTML\u30bf\u30b0|\n|\u914d\u4fe1\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0|Youtube\u30c8\u30ea\u30ac\u30fc\u3000\u3092\u9078\u629e|\n\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u30c6\u30ad\u30b9\u30c8\u30a8\u30ea\u30a2\u306b\u8cbc\u308a\u4ed8\u3051\u308b\n\n```html:Youtube\u30ea\u30b9\u30ca\u30fc\n<script type=\"text/javascript\">\n/*\n * Youtube\u306eJavascriptAPI\u306f\u3001\u305d\u3082\u305d\u3082iframe\u3067\u8aad\u307f\u8fbc\u3080URL\u306b\n * \u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3067enablejsapi=1\u304c\u3064\u3044\u3066\u3044\u306a\u3044\u3068\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3002\n * \u306a\u306e\u3067\u3001iframe\u306e\u30bf\u30b0\u3092\u9806\u756a\u306b\u306a\u3081\u3066\u3044\u304d\u3001\n * youtube\u306e\u57cb\u3081\u8fbc\u307f\u7528\u304b\u3064\u305d\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u304c\u3064\u3044\u3066\u306a\u3044\u5834\u5408\u306f\n * \u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306e\u6587\u5b57\u5217\u3092\u3064\u3051\u308b\u3088\u3046\u306b\u4fee\u6b63\u3059\u308b\n */\nfor (var e = document.getElementsByTagName(\"iframe\"), x = e.length; x--;)\n  if (/youtube.com\\/embed/.test(e[x].src))\n     if(e[x].src.indexOf('enablejsapi=') === -1)\n        e[x].src += (e[x].src.indexOf('?') ===-1 ? '?':'&') + 'enablejsapi=1';\n\n// \u540c\u3058\u30da\u30fc\u30b8\u306b\u8907\u6570\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u30b5\u30dd\u30fc\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u914d\u5217\u5f62\u5f0f\u3067\u4fdd\u6301\u3092\u3057\u307e\u3059\nvar gtmYTListeners = [];\n\n// API\u304c\u30ed\u30fc\u30c9\u3055\u308c\u305f\u6642\u306b\u3053\u306eYTListener\u3092\u8ffd\u52a0\u3057\u3066\u3044\u304f\nfunction onYouTubeIframeAPIReady() {\n    for (var e = document.getElementsByTagName(\"iframe\"), x = e.length; x--;) {\n        if (/youtube.com\\/embed/.test(e[x].src)) {\n            gtmYTListeners.push(new YT.Player(e[x], {\n                events: {\n                    onStateChange: onPlayerStateChange,\n                    onError: onPlayerError\n                }\n            }));\n            YT.gtmLastAction = \"p\";\n        }\n    }\n}\n\n\n/*\n * \u518d\u751f\u3068\u4e00\u6642\u505c\u6b62\u304c\u62bc\u3055\u308c\u305f\u6642\u306e\u51e6\u7406\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n * if\u6761\u4ef6\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u5dfb\u304d\u623b\u3057\u3084\u7d42\u4e86\u306a\u3069\u306e\u4ed6\u306e\u51e6\u7406\u3082\u8ffd\u52a0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n * \u307e\u305f\u3001\u4f55\uff05\u518d\u751f\u304c\u5b8c\u4e86\u3057\u305f\u304b\u306e\u51e6\u7406\u3092\u4ed5\u8fbc\u3093\u3067\u3044\u307e\u3059\n * \n */ \nfunction onPlayerStateChange(e) {\n    e[\"data\"] == YT.PlayerState.PLAYING && setTimeout(onPlayerPercent, 1000, e[\"target\"]);\n    var video_data = e.target[\"getVideoData\"](),\n        label = video_data.video_id+':'+video_data.title;\n\n    /*\n     * \u518d\u751f\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\u6642\u306b\u518d\u751f\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u751f\u3055\u305b\u307e\u3059\u3002\n     * \u76f4\u524d\u306e\u52d5\u4f5c\u304c\u4e00\u6642\u505c\u6b62\u3067\u306a\u3044\u3068\u767a\u751f\u3057\u307e\u305b\u3093\n     * \u3064\u307e\u308a\u3001\u81ea\u7136\u306b\u505c\u6b62\uff08\u4e00\u5ea6\u518d\u751f\u5b8c\u4e86\uff09\u3057\u305f\u5834\u5408\u306f\u3001\u767a\u751f\u3057\u307e\u305b\u3093\u3002\n     * \u4f55\u5ea6\u518d\u751f\u5b8c\u4e86\u3057\u3066\u3082\u3001\u767a\u751f\u3055\u305b\u305f\u3044\u5834\u5408\u306fYT.gtmLastAction == \"p\"\u306e\u6761\u4ef6\u3092\u5916\u3057\u307e\u3059\n     */ \n    if (e[\"data\"] == YT.PlayerState.PLAYING && YT.gtmLastAction == \"p\") {\n        dataLayer.push({\n            event: \"youtube\",\n            action: \"play\",\n            label: label\n        });\n        YT.gtmLastAction = \"\";\n    }\n\n    /**\n     * \u4e00\u6642\u505c\u6b62\u304c\u62bc\u3055\u308c\u305f\u6642\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u751f\u3055\u305b\u307e\u3059\u3002\n     */\n    if (e[\"data\"] == YT.PlayerState.PAUSED) {\n        dataLayer.push({\n            event: \"youtube\",\n            action: \"pause\",\n            label: label\n        });\n        YT.gtmLastAction = \"p\";\n    }\n}\n\n\n\n/*\n * GTM\u306e\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc\u3092\u4ecb\u3057\u3066\u30a8\u30e9\u30fc\u30ec\u30dd\u30fc\u30c8\u3059\u308b\u305f\u3081\u306e\u51e6\u7406\n * GTM\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u529b\u3055\u308c\u308b\u3068\u3001UniversalAnalytics\u3067\u306f\u305d\u308c\u3092\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0\u3067\u304d\u307e\u3059\n * \u4f8b\u3048\u3070\u3001\u52d5\u753b\u304c\u524a\u9664\u3055\u308c\u3066\u3044\u305f\u308a\u52d5\u753bID\u304c\u9593\u9055\u3063\u3066\u3044\u305f\u5834\u5408\u306b\u3053\u306e\u30a8\u30e9\u30fc\u304c\u52d5\u304d\u307e\u3059\u3002\n *\n * \u53c2\u8003\uff1ahttps://developers.google.com/youtube/js_api_reference#Events\n */\nfunction onPlayerError(e) {\n    dataLayer.push({\n        event: \"error\",\n        action: \"GTM\",\n        label: \"youtube:\" + e\n    })\n}\n\n\n/*\n * \u52d5\u753b\u3092\u4f55\uff05\u518d\u751f\u3057\u305f\u304b\u3092\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0\u3057\u307e\u3059\u3002\n * 0%\u300125%\u300150%\u300175%\u3001100%\u3092\u518d\u751f\u3057\u305f\u6642\u70b9\u3067\u305d\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u9001\u4fe1\u3057\u307e\u3059\u3002\n * 1\u79d2\u6bce\u306b\u51e6\u7406\u3092\u5b9f\u884c\u3057\u3066\u518d\u751f\u6642\u9593\u3092\u78ba\u8a8d\u3057\u3001\n * \u3057\u304d\u3044\u5024\u3092\u8d85\u3048\u3066\u3044\u305f\u3089\u30a4\u30d9\u30f3\u30c8\u3092\u9001\u4fe1\u3059\u308b\u3068\u3044\u3046\u6d41\u308c\u3067\u3059\u3002\n * \u3053\u306e\u51e6\u7406\u306f\u3001\u518d\u751f\u3082\u3057\u304f\u306f\u4e00\u6642\u505c\u6b62\u304c\u62bc\u3055\u308c\u305f\u6642\u306b\u76e3\u8996\u304c\u958b\u59cb\u3057\u307e\u3059\u3002\n */\nfunction onPlayerPercent(e) {\n    if (e[\"getPlayerState\"]() == YT.PlayerState.PLAYING) {\n        var t = e[\"getDuration\"]() - e[\"getCurrentTime\"]() <= 1.5 ? 1 : (Math.floor(e[\"getCurrentTime\"]() / e[\"getDuration\"]() * 4) / 4).toFixed(2);\n         if (!e[\"lastP\"] || t > e[\"lastP\"]) {\n            var video_data = e[\"getVideoData\"](),\n                label = video_data.video_id+':'+video_data.title;\n            e[\"lastP\"] = t;\n            dataLayer.push({\n                event: \"youtube\",\n                action: t * 100 + \"%\",\n                label: label\n            })\n        }\n        e[\"lastP\"] != 1 && setTimeout(onPlayerPercent, 1000, e);\n    }\n}\n\n\n\n/*\n * \u30af\u30ed\u30b9\u30d6\u30e9\u30a6\u30b6\u51e6\u7406\u3002\n * \u53c2\u8003\uff1ahttps://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeunload\n */\nwindow.onbeforeunload = function (e) {\n var e = e || window.event;\n // IE\u3068Firefix4\u4ee5\u524d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7528\n if(e)\n e.returnValue = 'na';\n // Safari\u7528\n return 'na';\n};\nwindow.onbeforeunload = trackYTUnload;\n\n\n/*\n * gtmYTUnload\u304c\u7834\u68c4\u3055\u308c\u305f\u6642\u306b\u3059\u308b\u51e6\u7406\u3002\n * \u30da\u30fc\u30b8\u304c\u5909\u308f\u3063\u305f\u308a\u9589\u3058\u308b\u76f4\u524d\u306b\u884c\u308f\u308c\u308b\u3002\n */ \nfunction trackYTUnload() {\n    for (var i = 0; i < gtmYTplayers.length; i++){\n        if (gtmYTlisteners[i].getPlayerState() === 1) { // \u518d\u751f\n            var video_data = gtmYTlisteners[i]['getVideoData'](),\n                label = video_data.video_id+':'+video_data.title;\n            dataLayer.push({\n                event: 'youtube',\n                action: 'exit',\n                label: label\n            });\n        }\n    }\n}\n\n\n\n/*\n * \u73fe\u5728\u306e\u30da\u30fc\u30b8\u306bYoutube\u306eJavascriptAPI\u306e\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\n */\nvar j = document.createElement(\"script\"),\n    f = document.getElementsByTagName(\"script\")[0];\nj.src = \"//www.youtube.com/iframe_api\";\nj.async = true;\nf.parentNode.insertBefore(j, f);\n</script>\n```\n\n###2.Youtube\u30a4\u30d9\u30f3\u30c8\u30bf\u30b0\n\n|\u8a2d\u5b9a\u9805\u76ee|\u5024|\n|---|---|\n|\u30ab\u30c6\u30b4\u30ea\u30fc|\u30bf\u30b0\uff08Tag\uff09|\n|\u540d\u524d|Youtube\u30a4\u30d9\u30f3\u30c8|\n|\u30d7\u30ed\u30c0\u30af\u30c8\u306e\u9078\u629e|Google Analytics|\n|\u30bf\u30b0\u306e\u7a2e\u985e\u3092\u9078\u629e|\u30e6\u30cb\u30d0\u30fc\u30b5\u30eb\u30a2\u30ca\u30ea\u30c6\u30a3\u30af\u30b9|\n|\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0ID|UA-XXXXXX-Y\uff08\u3054\u81ea\u8eab\u306e\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0ID\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\uff09|\n|\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0\u30bf\u30a4\u30d7|\u30a4\u30d9\u30f3\u30c8|\n|\u30ab\u30c6\u30b4\u30ea|{{Event}}|\n|\u30a2\u30af\u30b7\u30e7\u30f3|{{\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc_action}}|\n|\u30e9\u30d9\u30eb|{{\u30c7\u30fc\u30bf\u30ec\u30a4\u30e4\u30fc_label}}|\n|\u914d\u4fe1\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0|Youtube\u30a4\u30d9\u30f3\u30c8\u30c8\u30ea\u30ac\u30fc\u3000\u3092\u9078\u629e|\n\n-----------\n\n\n\u4ee5\u4e0a\u306e\u30de\u30af\u30ed\u3001\u30c8\u30ea\u30ac\u30fc\u3001\u30bf\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\nGA\u306e\u30a4\u30d9\u30f3\u30c8\u30ec\u30dd\u30fc\u30c8\u753b\u9762\u3067\u52d5\u753b\u306e\u518d\u751f/\u4e00\u6642\u505c\u6b62\u56de\u6570\u3001\u518d\u751f\u9032\u884c\u5ea6\uff080%\u301c100\uff05\uff09\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\n\u300c\u52d5\u753b\u3092\u518d\u751f\u3057\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fc\u306e\u307b\u3046\u304c\u30b3\u30f3\u30d0\u30fc\u30b8\u30e7\u30f3\u7387\u304c\u9ad8\u3044\u300d\u3068\u304b\u3001\n\u300c\u610f\u5916\u3068\u6700\u5f8c\u307e\u3067\u518d\u751f\u3057\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fc\u306e\u307b\u3046\u304c\u76f4\u5e30\u3057\u3066\u3044\u308b\u300d\u306a\u3069\u306e\u793a\u5506\u3092\u5f97\u3089\u308c\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\n#\u4f59\u8ac7\n[Youtube\u306eAPI\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](https://developers.google.com/youtube/js_api_reference)\u3092\u307f\u308b\u3068\u3001\u4ed6\u306b\u3082\u8272\u3005\u3068\u3067\u304d\u308b\u3053\u3068\u304c\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\n\u30d0\u30c3\u30d5\u30a1\u30ea\u30f3\u30b0\u4e2d\u306e\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\u306a\u3069\u3082\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u4ed6\u306b\u3082\u4f55\u304b\u8272\u3005\u3068\u8a08\u6e2c\u304c\u51fa\u6765\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n", "tags": ["GoogleAnalytics", "GoogleTagManager", "YouTubePlayerAPI", "JavaScript"]}