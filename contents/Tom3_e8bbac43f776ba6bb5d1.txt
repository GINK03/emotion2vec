{"context": "\n\n\u6982\u8981\nEC2\u306bOpenAM\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n\u30bf\u30fc\u30b2\u30c3\u30c8\u74b0\u5883\n\u4eca\u56de\u306f\u3001\u4ee5\u4e0b\u306e\u69cb\u6210\u306e\u74b0\u5883\u3092\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u3002\n\n\n\u624b\u9806\n\u4ee5\u4e0b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u624b\u9806\u3092\u66f8\u304d\u307e\u3059\u3002\n\n\u4e0d\u8981\u306a\u30b5\u30fc\u30d3\u30b9\u306e\u505c\u6b62\n$ sudo service iptables stop\n$ sudo service ip6tables stop\n$ sudo chkconfig iptables off\n$ sudo chkconfig ip6tables off\n\n\nhosts\u306e\u7de8\u96c6\n$ sudo cp /etc/hosts{,.orgn}\n$ sudo vi /etc/hosts\n$ sudo diff /etc/hosts.orgn /etc/hosts\n1a2\n> 172.31.29.76 sso.XXXXX.com\n\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u7de8\u96c6\n$ sudo cp /etc/sysconfig/network{,.orgn}\n$ sudo vi /etc/sysconfig/network\n$ sudo diff /etc/sysconfig/network.orgn /etc/sysconfig/network\n2c2\n< HOSTNAME=localhost.localdomain\n---\n> HOSTNAME=sso.XXXXX.com\n\n\nTomcat\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo yum -y install tomcat7\n$ sudo /sbin/chkconfig --level 2345 tomcat7 on\n\n\nOpenAM\u306e\u5165\u624b\n\u30b5\u30a4\u30c8\u304b\u3089war\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n$ sudo mv OpenAM-13.0.0.war /usr/share/tomcat7/webapps/openam.war\n$ sudo chown -R tomcat /usr/share/tomcat7/\n\n\nTomcat\u306e\u8a2d\u5b9a\n$ sudo cp /etc/tomcat7/tomcat7.conf{,.orgn}\n$ sudo vi /etc/tomcat7/tomcat7.conf\n$ sudo diff /etc/tomcat7/tomcat7.conf.orgn /etc/tomcat7/tomcat7.conf\n21a22\n> JAVA_OPTS=\"-Xmx1024m -XX:MaxPermSize=256m\"\n\n\nTomcat\u306e\u8d77\u52d5\u3068\u30ed\u30b0\u30d5\u30a9\u30eb\u30c0\u6a29\u9650\u5909\u66f4\n$ sudo /sbin/service tomcat7 start\n$ sudo chmod -R 775 /var/log/tomcat7/\n\n\nOpenAM\u306b\u30a2\u30af\u30bb\u30b9\nhttp://sso.XXXXX.com:8080/openam/\nOpenAM\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\n\n# \u6982\u8981\nEC2\u306bOpenAM\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n# \u30bf\u30fc\u30b2\u30c3\u30c8\u74b0\u5883\n\u4eca\u56de\u306f\u3001\u4ee5\u4e0b\u306e\u69cb\u6210\u306e\u74b0\u5883\u3092\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u3002\n![39B3C51E-4A39-4DEF-A92C-3539045988C6.png](https://qiita-image-store.s3.amazonaws.com/0/118448/c03f0281-e219-eb5b-ba4d-ddf2cd14331c.png)\n# \u624b\u9806\n\u4ee5\u4e0b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u624b\u9806\u3092\u66f8\u304d\u307e\u3059\u3002\n## \u4e0d\u8981\u306a\u30b5\u30fc\u30d3\u30b9\u306e\u505c\u6b62\n```\n$ sudo service iptables stop\n$ sudo service ip6tables stop\n$ sudo chkconfig iptables off\n$ sudo chkconfig ip6tables off\n```\n## hosts\u306e\u7de8\u96c6\n```\n$ sudo cp /etc/hosts{,.orgn}\n$ sudo vi /etc/hosts\n$ sudo diff /etc/hosts.orgn /etc/hosts\n1a2\n> 172.31.29.76 sso.XXXXX.com\n```\n## \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u7de8\u96c6\n```\n$ sudo cp /etc/sysconfig/network{,.orgn}\n$ sudo vi /etc/sysconfig/network\n$ sudo diff /etc/sysconfig/network.orgn /etc/sysconfig/network\n2c2\n< HOSTNAME=localhost.localdomain\n---\n> HOSTNAME=sso.XXXXX.com\n```\n## Tomcat\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n$ sudo yum -y install tomcat7\n$ sudo /sbin/chkconfig --level 2345 tomcat7 on\n```\n## OpenAM\u306e\u5165\u624b\n[\u30b5\u30a4\u30c8](https://backstage.forgerock.com/#!/downloads)\u304b\u3089war\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n\n```\n$ sudo mv OpenAM-13.0.0.war /usr/share/tomcat7/webapps/openam.war\n$ sudo chown -R tomcat /usr/share/tomcat7/\n```\n## Tomcat\u306e\u8a2d\u5b9a\n```\n$ sudo cp /etc/tomcat7/tomcat7.conf{,.orgn}\n$ sudo vi /etc/tomcat7/tomcat7.conf\n$ sudo diff /etc/tomcat7/tomcat7.conf.orgn /etc/tomcat7/tomcat7.conf\n21a22\n> JAVA_OPTS=\"-Xmx1024m -XX:MaxPermSize=256m\"\n```\n## Tomcat\u306e\u8d77\u52d5\u3068\u30ed\u30b0\u30d5\u30a9\u30eb\u30c0\u6a29\u9650\u5909\u66f4\n```\n$ sudo /sbin/service tomcat7 start\n$ sudo chmod -R 775 /var/log/tomcat7/\n```\n## OpenAM\u306b\u30a2\u30af\u30bb\u30b9\nhttp://sso.XXXXX.com:8080/openam/\nOpenAM\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\n![OpenAM.png](https://qiita-image-store.s3.amazonaws.com/0/118448/5ab35a2d-ab46-2adc-327d-6ebfdfb31ae4.png)\n\n\n", "tags": ["OpenAM", "AWS"]}