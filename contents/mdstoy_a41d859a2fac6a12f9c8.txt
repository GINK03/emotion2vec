{"context": " More than 1 year has passed since last update.\u6295\u7a3f\u306e\u5185\u5bb9\u3092\u9069\u5207\u306b\u8868\u73fe\u3057\u305f\u30bf\u30a4\u30c8\u30eb\u52df\u96c6\u4e2d\uff01\n\n\u6539\u7248\u5c65\u6b74\n2014/04/17 Oracle \u3067\u306e\u9023\u756a\u4f5c\u6210\u306e\u3084\u308a\u65b9\u3092\u8ffd\u8a18\n\n\u3084\u308a\u305f\u3044\u3053\u3068\ntable name : table1\n\n\n\nid\nname\nnum\n\n\n\n\n1\naaa\n2\n\n\n2\nbbb\n3\n\n\n3\nccc\n5\n\n\n4\nddd\n1\n\n\n\n\u3053\u3093\u306a\u30c6\u30fc\u30d6\u30eb\u3092\u3001num \u306e\u6570\u306b\u7740\u76ee\u3057\n\n\n\nid\nname\nseq\n\n\n\n\n1\naaa\n1\n\n\n1\naaa\n2\n\n\n2\nbbb\n1\n\n\n2\nbbb\n2\n\n\n2\nbbb\n3\n\n\n3\nccc\n1\n\n\n3\nccc\n2\n\n\n3\nccc\n3\n\n\n3\nccc\n4\n\n\n3\nccc\n5\n\n\n4\nddd\n1\n\n\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u5897\u5e45\u3055\u305b\u305f\u3044\u3053\u3068\u3063\u3066\u3001\u3088\u304f\u306f\u306a\u3044\u3051\u3069\u305f\u307e\u306b\u306f\u3042\u308a\u307e\u3059\u3088\u306d\uff1f\n\n\u3084\u308a\u304b\u305f (MySQL \u306e\u5834\u5408)\nselect\n  t1.id\n  , t1.name\n  , seq_t.seq\nfrom\n  table1 as t1\n  , (select\n       @i := @i + 1 as seq\n     from\n       information_schema.tables\n       , (select @i := 0) as dummy\n     where\n       @i < 5) as seq_t\nwhere\n  t1.num >= seq_t.seq order by t1.id, seq_t.seq;\n\n\n\u306a\u3093\u3067\u305d\u3046\u306a\u308b\u306e\uff1f\n\n\u9023\u756a\u4f5c\u6210\nselect\n  @i := @i + 1 as seq\nfrom\n  information_schema.tables\n  , (select @i := 0) as dummy\nwhere\n  @i < 5;\n\n\u3053\u306e\u3001\u30b5\u30d6\u30af\u30a8\u30ea\u306e\u90e8\u5206\u306e SQL \u306e\u7d50\u679c\u306f\n\n\n\nseq\n\n\n\n\n1\n\n\n2\n\n\n3\n\n\n4\n\n\n5\n\n\n\n\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n\u89e3\u8aac\n(select @i := 0) as dummy \u3067\u958b\u59cb\u5024\u3001\u3092\u8a2d\u5b9a\u3057\u3001@i := @i + 1 \u3067\u4e00\u884c\u3054\u3068\u306b\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3055\u305b\u3066\u8868\u793a\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\u3068\u306f\u3044\u3048\u3001\u305d\u308c\u3060\u3051\uff08select @i := @i + 1 as num from (select @i := 0) as d;\uff09\u3067\u306f\u4e00\u884c\u3057\u304b\u62fe\u3063\u3066\u3053\u308c\u307e\u305b\u3093\u306e\u3067\u3001\u9069\u5f53\u306a\u30c6\u30fc\u30d6\u30eb\u3092 join \u3055\u305b\u3066\u884c\u6570\u3092\u7a3c\u304e\u307e\u3059\u3002\u4e0a\u8a18\u306e\u4f8b\u3067\u306f information_schema.tables \u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u5fc5\u8981\u306a\u884c\u6570\u3092\u6301\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u4fdd\u8a3c\u3067\u304d\u308b\u306a\u3089\u3069\u3093\u306a\u30c6\u30fc\u30d6\u30eb\u3067\u3082\u3044\u3044\u3067\u3059\u3002\uff08\u6163\u4f8b\u7684\u306b\u306f\u3001\u5fc5\u305a\u5b58\u5728\u3057\u3066\u3042\u308b\u7a0b\u5ea6\u306e\u884c\u6570\u304c\u4fdd\u8a3c\u3055\u308c\u308b\u30b7\u30b9\u30c6\u30e0\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u3046\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002\uff09\n\u7121\u6761\u4ef6\u3067\u7d50\u5408\u3055\u305b\u308b\u3068 information_schema.tables \u306e\u884c\u6570\u5206\u306e\u9023\u756a\u304c\u3067\u304d\u3066\u3057\u307e\u3044\u307e\u3059\u306e\u3067\u3001where \u53e5\u3092\u4ed8\u3051\u3066\u9069\u5f53\u306a\u9577\u3055\u3067\u5207\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u5897\u5e45\n\u30b5\u30d6\u30af\u30a8\u30ea\u306e\u90e8\u5206\u304c\u9023\u756a\u4f5c\u6210\u3092\u307e\u304b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002\nselect\n  t1.id\n  , t1.name\n  , seq_t.seq\nfrom\n  table1 as t1\n  , (\u9023\u756a\u4f5c\u6210) as seq_t\nwhere\n  t1.num >= seq_t.seq order by t1.id, seq_t.seq;\n\n\u8981\u3059\u308b\u306b\u3001\u3053\u3046\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n\u89e3\u8aac\n\u3053\u3053\u307e\u3067\u6765\u308c\u3070\u3082\u3046\u7c21\u5358\u3067\u3059\u306d\u3002\nfrom\n  table1 as t1\n  , (\u9023\u756a\u4f5c\u6210) as seq_t\n\n\u5897\u5e45\u3055\u305b\u305f\u3044\u30c6\u30fc\u30d6\u30eb\u3068\u3001\u9023\u756a\u30c6\u30fc\u30d6\u30eb\u306e\u76f4\u7a4d\u3092\u3068\u3063\u3066\n\n\n\nid\nname\nnum\nseq\n\n\n\n\n1\naaa\n2\n1\n\n\n1\naaa\n2\n2\n\n\n1\naaa\n2\n3\n\n\n1\naaa\n2\n4\n\n\n1\naaa\n2\n5\n\n\n2\nbbb\n3\n1\n\n\n2\nbbb\n3\n2\n\n\n2\nbbb\n3\n3\n\n\n2\nbbb\n3\n4\n\n\n2\nbbb\n3\n5\n\n\n3\nccc\n5\n1\n\n\n3\nccc\n5\n2\n\n\n3\nccc\n5\n3\n\n\n3\nccc\n5\n4\n\n\n3\nccc\n5\n5\n\n\n4\nddd\n1\n1\n\n\n4\nddd\n1\n2\n\n\n4\nddd\n1\n3\n\n\n4\nddd\n1\n4\n\n\n4\nddd\n1\n5\n\n\n\n\u305d\u3053\u304b\u3089\nwhere\n  t1.num >= seq_t.seq\n\n\u9023\u756a\u304c num \u3092\u8d85\u3048\u306a\u3044\u7bc4\u56f2\u306e\u30ec\u30b3\u30fc\u30c9\u306e\u307f\u3092\u62bd\u51fa\u3059\u308c\u3070\u3001\u7121\u4e8b\u8981\u4ef6\u3092\u6e80\u305f\u3057\u307e\u3057\u305f\u3002\u3081\u3067\u305f\u3057\u3081\u3067\u305f\u3057\u3002\n\nOracle \u306e\u5834\u5408\n\nOracle \u306e\u5834\u5408\u306e\u9023\u756a\u4f5c\u6210\nselect rownum seq from all_catalog where rownum <= 5;\n\nOracle \u3060\u3068 rownum \u304c\u3042\u308b\u306e\u3067\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u306d\u3002\n\u3053\u3053\u3067\u3082\u3001\u5bfe\u8c61\u30c6\u30fc\u30d6\u30eb\u306f\u9069\u5207\u306a\u4ef6\u6570\u304c\u3042\u308b\u3082\u306e\u306a\u3089\u4f55\u3067\u3082\u3044\u3044\u3067\u3059\u304c\u3001\u3084\u306f\u308a\u5fc5\u305a\u5b58\u5728\u3057\u3066\u3042\u308b\u7a0b\u5ea6\u306e\u884c\u6570\u304c\u4fdd\u8a3c\u3055\u308c\u308b\u30b7\u30b9\u30c6\u30e0\u30c6\u30fc\u30d6\u30eb\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u6163\u4f8b\u7684\u306b all_catalog \u304c\u7528\u3044\u3089\u308c\u308b\u3053\u3068\u304c\u591a\u3044\u3088\u3046\u3067\u3059\u3002\n\n\u6ce8\u610f\u70b9\n\u76f4\u7a4d\u3092\u53d6\u308b\u305f\u3081\u3001\u3046\u3063\u304b\u308a\u3059\u308b\u3068\u4ef6\u6570\u304c\u7206\u767a\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u6295\u7a3f\u306e\u5185\u5bb9\u3092\u9069\u5207\u306b\u8868\u73fe\u3057\u305f\u30bf\u30a4\u30c8\u30eb\u52df\u96c6\u4e2d\uff01\n\n# \u6539\u7248\u5c65\u6b74\n\n2014/04/17 Oracle \u3067\u306e\u9023\u756a\u4f5c\u6210\u306e\u3084\u308a\u65b9\u3092\u8ffd\u8a18\n\n# \u3084\u308a\u305f\u3044\u3053\u3068\n\n**table name : table1**\n\n| id | name | num |\n|---:|:-----|----:|\n| 1  | aaa  | 2 |\n| 2  | bbb  | 3 |\n| 3  | ccc  | 5 |\n| 4  | ddd  | 1 |\n\n\u3053\u3093\u306a\u30c6\u30fc\u30d6\u30eb\u3092\u3001num \u306e\u6570\u306b\u7740\u76ee\u3057\n\n| id | name | seq |\n|---:|:-----|----:|\n| 1  | aaa  | 1 |\n| 1  | aaa  | 2 |\n| 2  | bbb  | 1 |\n| 2  | bbb  | 2 |\n| 2  | bbb  | 3 |\n| 3  | ccc  | 1 |\n| 3  | ccc  | 2 |\n| 3  | ccc  | 3 |\n| 3  | ccc  | 4 |\n| 3  | ccc  | 5 |\n| 4  | ddd  | 1 |\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u5897\u5e45\u3055\u305b\u305f\u3044\u3053\u3068\u3063\u3066\u3001\u3088\u304f\u306f\u306a\u3044\u3051\u3069\u305f\u307e\u306b\u306f\u3042\u308a\u307e\u3059\u3088\u306d\uff1f\n\n# \u3084\u308a\u304b\u305f (MySQL \u306e\u5834\u5408)\n\n```sql\nselect\n  t1.id\n  , t1.name\n  , seq_t.seq\nfrom\n  table1 as t1\n  , (select\n       @i := @i + 1 as seq\n     from\n       information_schema.tables\n       , (select @i := 0) as dummy\n     where\n       @i < 5) as seq_t\nwhere\n  t1.num >= seq_t.seq order by t1.id, seq_t.seq;\n```\n\n# \u306a\u3093\u3067\u305d\u3046\u306a\u308b\u306e\uff1f\n\n## \u9023\u756a\u4f5c\u6210\n\n```sql\nselect\n  @i := @i + 1 as seq\nfrom\n  information_schema.tables\n  , (select @i := 0) as dummy\nwhere\n  @i < 5;\n```\n\n\u3053\u306e\u3001\u30b5\u30d6\u30af\u30a8\u30ea\u306e\u90e8\u5206\u306e SQL \u306e\u7d50\u679c\u306f\n\n| seq |\n|:--:|\n| 1  |\n| 2  |\n| 3  |\n| 4  |\n| 5  |\n\n\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n### \u89e3\u8aac\n\n`(select @i := 0) as dummy` \u3067\u958b\u59cb\u5024\u3001\u3092\u8a2d\u5b9a\u3057\u3001` @i := @i + 1` \u3067\u4e00\u884c\u3054\u3068\u306b\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3055\u305b\u3066\u8868\u793a\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\u3068\u306f\u3044\u3048\u3001\u305d\u308c\u3060\u3051\uff08`select @i := @i + 1 as num from (select @i := 0) as d;`\uff09\u3067\u306f\u4e00\u884c\u3057\u304b\u62fe\u3063\u3066\u3053\u308c\u307e\u305b\u3093\u306e\u3067\u3001\u9069\u5f53\u306a\u30c6\u30fc\u30d6\u30eb\u3092 join \u3055\u305b\u3066\u884c\u6570\u3092\u7a3c\u304e\u307e\u3059\u3002\u4e0a\u8a18\u306e\u4f8b\u3067\u306f `information_schema.tables` \u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u5fc5\u8981\u306a\u884c\u6570\u3092\u6301\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u4fdd\u8a3c\u3067\u304d\u308b\u306a\u3089\u3069\u3093\u306a\u30c6\u30fc\u30d6\u30eb\u3067\u3082\u3044\u3044\u3067\u3059\u3002\uff08\u6163\u4f8b\u7684\u306b\u306f\u3001\u5fc5\u305a\u5b58\u5728\u3057\u3066\u3042\u308b\u7a0b\u5ea6\u306e\u884c\u6570\u304c\u4fdd\u8a3c\u3055\u308c\u308b\u30b7\u30b9\u30c6\u30e0\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u3046\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002\uff09\n\u7121\u6761\u4ef6\u3067\u7d50\u5408\u3055\u305b\u308b\u3068 `information_schema.tables` \u306e\u884c\u6570\u5206\u306e\u9023\u756a\u304c\u3067\u304d\u3066\u3057\u307e\u3044\u307e\u3059\u306e\u3067\u3001where \u53e5\u3092\u4ed8\u3051\u3066\u9069\u5f53\u306a\u9577\u3055\u3067\u5207\u3063\u3066\u3044\u307e\u3059\u3002\n\n## \u5897\u5e45\n\n\u30b5\u30d6\u30af\u30a8\u30ea\u306e\u90e8\u5206\u304c\u9023\u756a\u4f5c\u6210\u3092\u307e\u304b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002\n\n```sql\nselect\n  t1.id\n  , t1.name\n  , seq_t.seq\nfrom\n  table1 as t1\n  , (\u9023\u756a\u4f5c\u6210) as seq_t\nwhere\n  t1.num >= seq_t.seq order by t1.id, seq_t.seq;\n```\n\n\u8981\u3059\u308b\u306b\u3001\u3053\u3046\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n### \u89e3\u8aac\n\n\u3053\u3053\u307e\u3067\u6765\u308c\u3070\u3082\u3046\u7c21\u5358\u3067\u3059\u306d\u3002\n\n```sql\nfrom\n  table1 as t1\n  , (\u9023\u756a\u4f5c\u6210) as seq_t\n```\n\n\u5897\u5e45\u3055\u305b\u305f\u3044\u30c6\u30fc\u30d6\u30eb\u3068\u3001\u9023\u756a\u30c6\u30fc\u30d6\u30eb\u306e\u76f4\u7a4d\u3092\u3068\u3063\u3066\n\n| id | name | num | seq |\n|---:|:-----|----:|----:|\n| 1  | aaa  | 2 | 1 |\n| 1  | aaa  | 2 | 2 |\n| 1  | aaa  | 2 | 3 |\n| 1  | aaa  | 2 | 4 |\n| 1  | aaa  | 2 | 5 |\n| 2  | bbb  | 3 | 1 |\n| 2  | bbb  | 3 | 2 |\n| 2  | bbb  | 3 | 3 |\n| 2  | bbb  | 3 | 4 |\n| 2  | bbb  | 3 | 5 |\n| 3  | ccc  | 5 | 1 |\n| 3  | ccc  | 5 | 2 |\n| 3  | ccc  | 5 | 3 |\n| 3  | ccc  | 5 | 4 |\n| 3  | ccc  | 5 | 5 |\n| 4  | ddd  | 1 | 1 |\n| 4  | ddd  | 1 | 2 |\n| 4  | ddd  | 1 | 3 |\n| 4  | ddd  | 1 | 4 |\n| 4  | ddd  | 1 | 5 |\n\n\u305d\u3053\u304b\u3089\n\n```sql\nwhere\n  t1.num >= seq_t.seq\n```\n\n\u9023\u756a\u304c num \u3092\u8d85\u3048\u306a\u3044\u7bc4\u56f2\u306e\u30ec\u30b3\u30fc\u30c9\u306e\u307f\u3092\u62bd\u51fa\u3059\u308c\u3070\u3001\u7121\u4e8b\u8981\u4ef6\u3092\u6e80\u305f\u3057\u307e\u3057\u305f\u3002\u3081\u3067\u305f\u3057\u3081\u3067\u305f\u3057\u3002\n\n# Oracle \u306e\u5834\u5408\n\n## Oracle \u306e\u5834\u5408\u306e\u9023\u756a\u4f5c\u6210\n\n```sql\nselect rownum seq from all_catalog where rownum <= 5;\n```\n\nOracle \u3060\u3068 rownum \u304c\u3042\u308b\u306e\u3067\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u306d\u3002\n\u3053\u3053\u3067\u3082\u3001\u5bfe\u8c61\u30c6\u30fc\u30d6\u30eb\u306f\u9069\u5207\u306a\u4ef6\u6570\u304c\u3042\u308b\u3082\u306e\u306a\u3089\u4f55\u3067\u3082\u3044\u3044\u3067\u3059\u304c\u3001\u3084\u306f\u308a\u5fc5\u305a\u5b58\u5728\u3057\u3066\u3042\u308b\u7a0b\u5ea6\u306e\u884c\u6570\u304c\u4fdd\u8a3c\u3055\u308c\u308b\u30b7\u30b9\u30c6\u30e0\u30c6\u30fc\u30d6\u30eb\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u6163\u4f8b\u7684\u306b all_catalog \u304c\u7528\u3044\u3089\u308c\u308b\u3053\u3068\u304c\u591a\u3044\u3088\u3046\u3067\u3059\u3002\n\n# \u6ce8\u610f\u70b9\n\n\u76f4\u7a4d\u3092\u53d6\u308b\u305f\u3081\u3001\u3046\u3063\u304b\u308a\u3059\u308b\u3068\u4ef6\u6570\u304c\u7206\u767a\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "tags": ["SQL", "MySQL", "oracle"]}