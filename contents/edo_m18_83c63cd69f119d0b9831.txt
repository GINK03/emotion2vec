{"context": "\u304c\u3063\u3064\u308a\u3068\u3084\u308b\u3064\u3082\u308a\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3082\u3057\u304b\u3057\u305f\u3089\u8aad\u3080\u5fc5\u8981\u304c\u51fa\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u5c11\u3057\u3060\u3051\u304a\u52c9\u5f37\u3002\n\u3082\u3068\u3082\u3068\u4ed5\u7d44\u307f\u3092\u77e5\u308b\u3053\u3068\u304c\u597d\u304d\u306a\u306e\u3067\u8aad\u307f\u59cb\u3081\u308b\u3068\u7d50\u69cb\u9762\u767d\u3044\u3067\u3059\u3002\n\uff08\u307b\u3093\u3068\u306farm\u306e\u307b\u3046\u304c\u77e5\u8b58\u3068\u3057\u3066\u306f\u5fc5\u8981\u306a\u3093\u3060\u3051\u3069\u3001\u305d\u308c\u306f\u307e\u305f\u5f8c\u65e5\u8abf\u3079\u308b\uff09\n\n\u306f\u3058\u3081\u306b\n\u4eca\u56de\u307e\u3068\u3081\u3066\u3044\u308b\u306e\u306fx86\u3068x86_64\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u95a2\u3059\u308b\u3082\u306e\u3067\u3059\u3002\narm\u306a\u3069\u306f\u307e\u305f\u7570\u306a\u3063\u305f\u3082\u306e\u3068\u306a\u308a\u307e\u3059\u3002\n\u307e\u305f\u3001\u69cb\u6587\u3082\u3044\u304f\u3064\u304b\u3042\u308b\u3088\u3046\u3067\u3001\u305d\u308c\u305e\u308c AT&T\u69cb\u6587\u3001 Intel\u69cb\u6587\u3068\u3044\u3046\u3088\u3046\u3067\u3059\u3002\u3000\n\n\u69cb\u6587\u306e\u9055\u3044\n%rax\u306a\u3069\u306e\u3088\u3046\u306b\u3001\u30ec\u30b8\u30b9\u30bf\u306b%\u304c\u3064\u3044\u3066\u3044\u305f\u308a\u3059\u308b\u306e\u306fAT&T\u69cb\u6587\u3067\u3059\u3002\n\u3064\u3044\u3066\u3044\u306a\u3044\u3082\u306e\u306fIntel\u69cb\u6587\u3067\u3059\u3002\n\u307e\u305f\u3001\u30bb\u30af\u30b7\u30e7\u30f3\u306e\u5b9a\u7fa9\u306a\u3069\u7d30\u304b\u3044\u3068\u3053\u308d\u3067\u8272\u3005\u3068\u5dee\u7570\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u30bd\u30fc\u30b9\u30fb\u30c7\u30a3\u30b9\u30c6\u30a3\u30cd\u30fc\u30b7\u30e7\u30f3\n\u4e0a\u8a18\u69cb\u6587\u306e\u4e2d\u3067\u7279\u306b\u899a\u3048\u3066\u304a\u304b\u306a\u3044\u3068\u6df7\u4e71\u3059\u308b\u306e\u304c\u3053\u306e\u300c\u30bd\u30fc\u30b9\u300d\u3068\u300c\u30c7\u30a3\u30b9\u30c6\u30a3\u30cd\u30fc\u30b7\u30e7\u30f3\u300d\u306e\u9806\u756a\u3067\u3059\u3002\n\u4f8b\u3048\u3070\u3001rax\u30ec\u30b8\u30b9\u30bf\u306b1\u3092\u683c\u7d0d\u3059\u308b\u306e\u3092\u305d\u308c\u305e\u308c\u898b\u3066\u307f\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n; for intel syntax\nmov eax, 1\n\n# for AT&T syntax\nmov $1, %eax\n\nintel\u69cb\u6587\u3067\u306f\u5de6\u304c\u30c7\u30a3\u30b9\u30c6\u30a3\u30cd\u30fc\u30b7\u30e7\u30f3\u3001\u53f3\u304c\u30bd\u30fc\u30b9\u3067\u3059\u3002\uff08AT&T\u3067\u306f\u305d\u306e\u9006\uff09\n\u30c7\u30a3\u30b9\u30c6\u30a3\u30cd\u30fc\u30b7\u30e7\u30f3\u306f\u8a08\u7b97\u7d50\u679c\u304c\u683c\u7d0d\u3055\u308c\u308b\u30ec\u30b8\u30b9\u30bf\u3067\u3059\u3002\n\u30bd\u30fc\u30b9\u306f\u30ec\u30b8\u30b9\u30bf\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u5024\u3067\u3001\u30bd\u30fc\u30b9\u306b\u30ec\u30b8\u30b9\u30bf\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u3067\u3082\u3001\u30bd\u30fc\u30b9\u5074\u306e\u30ec\u30b8\u30b9\u30bf\u306f\u5909\u66f4\u3055\u308c\u307e\u305b\u3093\u3002\n\n\u30b3\u30f3\u30d1\u30a4\u30e9\n\u69cb\u6587\u306e\u9055\u3044\u306f\u30b3\u30f3\u30d1\u30a4\u30e9\u306e\u9055\u3044\u3067\u3082\u3042\u308a\u307e\u3059\u3002\ngcc\u306a\u3069\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u5834\u5408\u3001 GAS (GNU Assembler\uff09\u3001 nasm\u3067\u306f NASM (Netwide Assembler)\u3068\u305d\u308c\u305e\u308c\u7570\u306a\u308a\u307e\u3059\u3002\n\uff08\u3053\u306e\u3042\u305f\u308a\u306e\u7d30\u304b\u3044\u9055\u3044\u306f\u307e\u3060\u3088\u304f\u308f\u304b\u3063\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u3068\u308a\u3042\u3048\u305a\u3053\u308c\u3092\u899a\u3048\u3066\u304a\u304b\u306a\u3044\u3068\u8abf\u3079\u3066\u51fa\u3066\u304d\u305f\u69cb\u6587\u304c\u5fae\u5999\u306b\u9055\u3046\u306e\u3067\u6df7\u4e71\u3057\u307e\u3059( ;\u00b4\u0414`)\uff09\n\u3061\u306a\u307f\u306b\u3053\u3061\u3089\u306e\u8a18\u4e8b\u304c\u305d\u306e\u6bd4\u8f03\u3092\u884c\u3063\u3066\u3044\u3066\u5206\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\n\n\u547d\u4ee4\uff08\u30cb\u30fc\u30e2\u30cb\u30c3\u30af\uff09\u306e\u4f8b\n\u30a2\u30bb\u30f3\u30d6\u30e9\u3067\u306f\u3042\u307e\u308a\u591a\u304f\u306e\u547d\u4ee4\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u307e\u305f\u30011\u884c\u306e\u51e6\u7406\u304cCPU\u306b\u5bfe\u3059\u308b\u3072\u3068\u3064\u306e\u547d\u4ee4\u306b\u306a\u308a\u307e\u3059\u3002\n\u305d\u3046\u3044\u3046\u610f\u5473\u3067\u3082\u3001CPU\u304c\u3067\u304d\u308b\u3053\u3068\u3060\u3051\u3092\u8a18\u8ff0\u3067\u304d\u308b\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u306d\u3002\n\n\u30b3\u30e1\u30f3\u30c8\n\u547d\u4ee4\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001\u30a2\u30bb\u30f3\u30d6\u30e9\u3067\u306fAT&T\u69cb\u6587\u306e\u5834\u5408\u306f;\u3001intel\u69cb\u6587\u306e\u5834\u5408\u306f#\u4ee5\u964d\u304c\u30b3\u30e1\u30f3\u30c8\u3068\u3057\u3066\u6271\u308f\u308c\u307e\u3059\u3002\n\nmov\nmov\u306f\u5024\u3092\u30b3\u30d4\u30fc\u3059\u308b\u547d\u4ee4\u3067\u3059\u3002\nmov rax, rbx\n\n\nadd\nadd\u306f\u5024\u3092\u52a0\u7b97\u3057\u307e\u3059\u3002\n\u305f\u3060\u3001\u666e\u901a\u306e\u8a00\u8a9e\u306e\u3088\u3046\u306ba = b + c\u307f\u305f\u3044\u306a\u611f\u3058\u3067\u306f\u306a\u304f\u3001add rax, rbx\u3068\u66f8\u304f\u3068\u3001rax\u306brbx\u306e\u5024\u3092\u8db3\u3059\u3001\u3068\u3044\u3046\u52d5\u4f5c\u306b\u306a\u308a\u307e\u3059\u3002\n\u306a\u306e\u3067\u3001\u4f8b\u3048\u30705 + 3\u3068\u3044\u3046\u7c21\u5358\u306a\u5f0f\u3092\u5b9f\u73fe\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002\nmov rax, 5\nmov rbx, 3\nadd rax, rbx\n\n\nsub\nsub\u306f\u5f15\u304d\u7b97\u3067\u3059\u3002\n\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9\u306fadd\u3068\u540c\u3058\u3067\u3001\u7d50\u679c\u304c\u30ec\u30b8\u30b9\u30bf\u306b\u4fdd\u5b58\u3055\u308c\u308b\u306e\u3082\u540c\u3058\u52d5\u4f5c\u3067\u3059\u3002\nmov rax, 5\nmov rbx, 3\nsub rax, rbx\n\n\nmul\nmul\u306f\u639b\u3051\u7b97\uff08Multiple\uff09\u3067\u3059\u3002\n\u3061\u306a\u307f\u306b\u3069\u3046\u3084\u3089mul\u306e\u52d5\u4f5c\u306f\u4ed6\u3068\u5fae\u5999\u306b\u7570\u306a\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u5177\u4f53\u7684\u306b\u306f\u4ee5\u4e0b\u3002\nmov rax, 5\nmov rbx, 3\nmul rbx\n\nadd\u3001sub\u3067\u306f\u30aa\u30da\u30e9\u30f3\u30c9\uff08rbx\u3068\u304b\u306e\u3068\u3053\u308d\uff09\u304c2\u3064\u3067\u3057\u305f\u304c\u3001mul\u306e\u5834\u5408\u306f\u3072\u3068\u3064\u3057\u304b\u3042\u308a\u307e\u305b\u3093\u3002\n\u3053\u308c\u306f \u639b\u3051\u7b97\u306frax\u30ec\u30b8\u30b9\u30bf\u304c\u4f7f\u7528\u3055\u308c\u308b\u3068\u3044\u3046\u300c\u6697\u9ed9\u306e\u4e86\u89e3\u300d \u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\uff08\u305f\u3060\u3001\u53c2\u8003\u306b\u3057\u305f\u8a18\u4e8b\u304ceax\u3068\u66f8\u3044\u3066\u3044\u305f\u306e\u3067x64\u306eCPU\u3067\u306f\u3082\u3057\u304b\u3057\u305f\u3089\u52d5\u4f5c\u304c\u9055\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff09\n\ndiv\ndiv\u306f\u5272\u308a\u7b97\u3067\u3059\u3002\nmov rdx, 0\nmov rax, 5\nmov rbx, 3\ndiv rbx\n\nmul\u3068\u540c\u69d8\u306b\u3001div\u306f\u30aa\u30da\u30e9\u30f3\u30c9\u304c\u3072\u3068\u3064\u3060\u3051\u3068\u306a\u308a\u307e\u3059\u3002\n\u5272\u308a\u7b97\u3067\u3082rax\u304c\u6697\u9ed9\u306b\u4f7f\u308f\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\u307e\u305f\u3001\u6700\u521d\u306e\u884c\u3067rdx\u306b0\u3092\u683c\u7d0d\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u3001\u5272\u308a\u7b97\u306e\u3042\u307e\u308a\u304c\u81ea\u52d5\u7684\u306brdx\u306b\u4fdd\u5b58\u3055\u308c\u308b\u305f\u3081\u306e\u3088\u3046\u3067\u3059\u3002\n\u305d\u306e\u305f\u3081\u306b\u3001\u4e88\u30810\u3067\u521d\u671f\u5316\u3057\u3066\u304a\u304f\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\u305d\u3057\u3066\u3053\u308c\u3089\u306e\u52d5\u4f5c\u306f \u30a4\u30f3\u30c6\u30eb\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u4ed5\u69d8 \u306e\u3088\u3046\u3067\u3059\u3002\n\u306a\u306e\u3067\u305d\u308c\u4ee5\u5916\u306eCPU\u3067\u306f\u307e\u305f\u9055\u3063\u305f\u4ed5\u69d8\u306b\u306a\u3063\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\n\nloop\n\u30a4\u30f3\u30c6\u30eb\u30d7\u30ed\u30bb\u30c3\u30b5\u306f\u3001loop\u3068\u3044\u3046\u547d\u4ee4\u3092\u898b\u3064\u3051\u308b\u3068\u6307\u5b9a\u56de\u6570\u5206\u3001\u30e9\u30d9\u30eb\u306b\u5236\u5fa1\u3092\u30b8\u30e3\u30f3\u30d7\u3055\u305b\u307e\u3059\u3002\n\u305d\u3057\u3066\u3053\u306e\u300c\u6307\u5b9a\u56de\u6570\u300d\u3092\u6307\u793a\u3059\u308b\u306b\u306f\u30ec\u30b8\u30b9\u30bf\u3092\u5229\u7528\u3057\u307e\u3059\u3002\nrcx\u30ec\u30b8\u30b9\u30bf\u304c\u305d\u306e\u5f79\u5272\u3092\u6301\u3061\u307e\u3059\u3002c\u306f\u30ab\u30a6\u30f3\u30c8\u306ec\u3067\u3059\u3002\nmov rcx, 5\nmov rax, 0\nmov rbx, 3\n\nLOOPLABEL:\nadd rax, rbx\n\nloop LOOPLABEL\n\n\u306a\u3069\u3068\u3059\u308b\u3068\u3001rax\u306brbx\u306e3\u30925\u56de\u8db3\u3059\u3001\u3068\u3044\u3046\u51e6\u7406\u306b\u306a\u308a\u307e\u3059\u3002\n\nDWORD PTR\n\n\u30a2\u30bb\u30f3\u30d6\u30e9\u306e\u30b3\u30fc\u30c9\u3092\u898b\u3066\u3044\u308b\u3068\u898b\u304b\u3051\u308b\u3053\u306e DWORD PTR \u3002\n\u3053\u308c\u306f\u5bfe\u8c61\u306e\u5024\uff08\u3084\u30ec\u30b8\u30b9\u30bf\uff09\u3092\u4f55\u30d0\u30a4\u30c8\u3068\u3057\u3066\u6271\u3046\u304b\u3001\u3068\u3044\u3046\u3053\u3068\u3092\u4fee\u98fe\u3059\u308b\u3082\u306e\u306e\u3088\u3046\u3067\u3059\u3002\n\nDWORD\u306f4\u30d0\u30a4\u30c8\nWORD\u306f2\u30d0\u30a4\u30c8\nBYTE\u306f1\u30d0\u30a4\u30c8\n\n\u3092\u610f\u5473\u3059\u308b\u4fee\u98fe\u5b50\u3068\u306a\u308a\u307e\u3059\u3002\n\u30ec\u30b8\u30b9\u30bf\u306f\u4f55\u30d0\u30a4\u30c8\uff08\u4f55\u30d3\u30c3\u30c8\uff09\u306a\u306e\u304b\u3092\u660e\u793a\u3057\u306a\u3044\u3068\u306a\u3089\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n\u305d\u306e\u305f\u3081\u3001\u4f8b\u3048\u3070\u5373\u5024\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u4f55\u30d0\u30a4\u30c8\u306e\u30c7\u30fc\u30bf\u306a\u306e\u304b\u3092\u660e\u793a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u3053\u3046\u3057\u305f\u3001\u4f55\u30d0\u30a4\u30c8\u306e\u30c7\u30fc\u30bf\u304b\u3001\u3092\u660e\u793a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u308b\u306e\u304c\u4e0a\u8a18\u306e\u4fee\u98fe\u5b50\u3067\u3059\u3002\nmov [AFLAG], BYTE PTR 1\n\n\u3068\u3044\u3046\u7406\u89e3\u3067\u3042\u3063\u3066\u308b\u304b\u306a\uff1f( ;\u00b4\u0414`)\n\n\u305d\u306e\u4ed6\n\n\n\n\u30cb\u30fc\u30e2\u30cb\u30c3\u30af\n\u610f\u5473\n\u6a5f\u80fd\n\n\n\n\nLD\nLoaD\n\u30e1\u30e2\u30ea\u30fc\u304b\u3089CPU\u3078\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u3080\n\n\nST\nSTore\nCPU\u304b\u3089\u30e1\u30e2\u30ea\u30fc\u306b\u30c7\u30fc\u30bf\u3092\u66f8\u304d\u51fa\u3059\n\n\nLAD\nLoad ADdress\nCPU\u306e\u30ec\u30b8\u30b9\u30bf\u306b\u5024\u3092\u8a2d\u5b9a\u3059\u308b\n\n\nPUSH\nPUSH\n\u30b9\u30bf\u30c3\u30af\u306b\u30c7\u30fc\u30bf\u3092\u66f8\u304d\u51fa\u3059\n\n\nPOP\nPOP\n\u30b9\u30bf\u30c3\u30af\u304b\u3089\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u3080\n\n\nSVC\nSuperVisor Call\nI/O\u3068\u306e\u5165\u51fa\u529b\u3092\u884c\u3046\n\n\n\n\n\n\u30e1\u30e2\n\u3068\u308a\u3042\u3048\u305a\u3001\u5fd8\u308c\u305d\u3046\u306a\u3001\u305d\u3057\u3066\u3042\u3068\u3067\u4f7f\u3044\u305d\u3046\u306a\u3053\u3068\u3092\u3064\u3089\u3064\u3089\u3068\u30e1\u30e2\u3002\n\n\u30ec\u30b8\u30b9\u30bf\n\u30ec\u30b8\u30b9\u30bf\u306f\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u3067\u8868\u793a\u3055\u308c\u307e\u3059\u3002\uff08rax\u3068\u304b\uff09\n\u3053\u308c\u304c\u306a\u306b\u3092\u610f\u5473\u3057\u3066\u3044\u308b\u306e\u304b\u3001\u7565\u79f0\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u5206\u304b\u308a\u3065\u3089\u3044\u3067\u3059\u306d\u3002\nWikipedia\u306b\u3088\u308b\u3068\u4ee5\u4e0b\u306e\u610f\u5473\u306e\u3088\u3046\u3002\n\n\n\u30d3\u30c3\u30c8\u306e\u62e1\u5f35\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u8cc7\u7523\u306e\u6709\u52b9\u6d3b\u7528\u3092\u76ee\u7684\u3068\u3057\u3066\u300116\u30d3\u30c3\u30c8\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u547d\u4ee4\u30bb\u30c3\u30c8\u3092\u305d\u306e\u307e\u307e\u52d5\u4f5c\u3067\u304d\u308b32\u30d3\u30c3\u30c8\u30d7\u30ed\u30bb\u30c3\u30b5\u306a\u3069\u304c\u3057\u3070\u3057\u3070\u958b\u767a\u3055\u308c\u308b\u3002\n\u3053\u306e\u5834\u5408\u3001\u30d7\u30ed\u30bb\u30c3\u30b5\u5185\u90e8\u306e\u30ec\u30b8\u30b9\u30bf\u306e\u30d3\u30c3\u30c8\u9577\u306f\u5927\u304d\u304f\uff08\u305f\u3044\u3066\u3044\u306e\u5834\u54082\u500d\u306b\uff09\u306a\u3063\u3066\u3044\u308b\u306e\u3060\u304c\u3001\u4e92\u63db\u6027\u3092\u4fdd\u3064\u305f\u3081\u306b\u53e4\u3044CPU\u306e\u547d\u4ee4\u30b3\u30fc\u30c9\u3067\u52d5\u4f5c\u3059\u308b\u5834\u5408\u306b\u306f\u4e0b\u4f4d\u306e\u30d3\u30c3\u30c8\u3057\u304b\u7528\u3044\u306a\u3044\u3002\n\u30a4\u30f3\u30c6\u30eb\u793e\u306e8086\u7cfb\u5217\u306eCPU\u306f\u3001\u3053\u306e\u3088\u3046\u306b\u62e1\u5f35\u3057\u3066\u304d\u305f\u7d4c\u7def\u3092\u6301\u3064\u4ee3\u8868\u7684\u306a\u30d7\u30ed\u30bb\u30c3\u30b5\u3067\u3042\u308b\u30028086CPU\u304c\u8a95\u751f\u3059\u308b\u524d\u306e\u30a4\u30f3\u30c6\u30eb\u306e8\u30d3\u30c3\u30c8CPU\u30018080\u3067\u306f\u6c4e\u7528\u30ec\u30b8\u30b9\u30bf\u3092\u201ca\u201d, \u201cb\u201d, \u201cc\u201d\u2026\u3068\u540d\u4ed8\u3051\u3066\u3044\u305f\u3002\u3053\u308c\u3092\u62e1\u5f35\u3057\u305f8086\u306e\u6c4e\u7528\u30ec\u30b8\u30b9\u30bf\u306f\u201cax\u201d, \u201cbx\u201d, \u201ccx\u201d\u2026\u3068\u306a\u3063\u305f\u3002\uff08x\u306fextend\u306e\u7565\uff09\u3068\u3053\u308d\u304c\u300180386\u306732\u30d3\u30c3\u30c8\u5316\u3057\u305f\u305f\u3081\u3001\u30ec\u30b8\u30b9\u30bf\u306e\u540d\u524d\u306f\u201ceax\u201d, \u201cebx\u201d\", \u201cecx\u201d\u2026\u3068\u306a\u3063\u305f\u3002\uff08e\u3082extend\u306e\u7565\uff09\u3055\u3089\u306b\u3001AMD\u793e\u304cAMD64\u306764\u30d3\u30c3\u30c8\u306b\u62e1\u5f35\u3057\u305f\u6642\u306b\u306f\u3001\u30ec\u30b8\u30b9\u30bf\u540d\u306f\u201crax\u201d, \u201crbx\u201d, \u201crcx\u201d\u2026\u3068\u306b\u306a\u3063\u305f\u3002\n\n\u3061\u306a\u307f\u306brax\u3068\u304b\u306er\u306f\u3001Yahoo!\u77e5\u6075\u888b\u306e\u56de\u7b54\u3092\u898b\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u3002\n\n\u6614\u306e A \u30ec\u30b8\u30b9\u30bf\uff08\u30a2\u30ad\u30e5\u30fc\u30e0\u30ec\u30fc\u30bf\uff09\u3001\u3053\u308c\u306f\uff18\u30d3\u30c3\u30c8\u3002\u305d\u3053\u304b\u3089\u3001AX \u30ec\u30b8\u30b9\u30bf\u3068\u3057\u3066\uff11\uff16\u30d3\u30c3\u30c8\u306b\u306a\u308a\u3001EAX \u3067\uff13\uff12\u30d3\u30c3\u30c8\u3002\u305d\u3057\u3066x64 \u3067\u306f RAX \u3068\u3057\u3066\uff16\uff14\u30d3\u30c3\u30c8\u3068\u3001\u968f\u5206\u3068\u9032\u5316\u3057\u305f\u3082\u306e\u3067\u3059\u306d\u3002\u305d\u308c\u3067\u30ec\u30b8\u30b9\u30bf\u306e\u540d\u524d\u304c 'Register' \u306b\u7531\u6765\u3059\u308b 'R' \u3068\u3002\u4f55\u304b\u611f\u6168\u6df1\u3044\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u307e\u305f\u3001a\u3001b\u3001c\u3068\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u306e\u9023\u7d9a\u306b\u306a\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u304c\u3001\u3069\u3046\u3084\u3089\u305d\u308c\u305e\u308c\u3061\u3083\u3093\u3068\u610f\u5473\u306e\u3042\u308b\u5358\u8a9e\u306e\u982d\u6587\u5b57\u306e\u3088\u3046\u3002\n\n\u6c4e\u7528\u30ec\u30b8\u30b9\u30bf\n\nAX    \u30a2\u30ad\u30e5\u30e0\u30ec\u30fc\u30bf\nBX    \u30d9\u30fc\u30b9\u30ec\u30b8\u30b9\u30bf\nCX    \u30ab\u30a6\u30f3\u30c8\u30ec\u30b8\u30b9\u30bf\nDX    \u30c7\u30fc\u30bf\u30ec\u30b8\u30b9\u30bf\n\n\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30ec\u30b8\u30b9\u30bf\n\nSI    \u30bd\u30fc\u30b9\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\nDI    \u30c7\u30a3\u30b9\u30c6\u30a3\u30cd\u30fc\u30b7\u30e7\u30f3\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\n\n\n\u7279\u6b8a\u30ec\u30b8\u30b9\u30bf\n\nBP    \u30d9\u30fc\u30b9\u30dd\u30a4\u30f3\u30bf\nSP    \u30b9\u30bf\u30c3\u30af\u30dd\u30a4\u30f3\u30bf\nIP    \u30a4\u30f3\u30b9\u30c8\u30e9\u30af\u30b7\u30e7\u30f3\u30dd\u30a4\u30f3\u30bf\n\n\n\u30bb\u30b0\u30e1\u30f3\u30c8\u30ec\u30b8\u30b9\u30bf\n\nCS    \u30b3\u30fc\u30c9\u30bb\u30b0\u30e1\u30f3\u30c8\nDS    \u30c7\u30fc\u30bf\u30bb\u30b0\u30e1\u30f3\u30c8\nES    \u30a8\u30af\u30b9\u30c8\u30e9\u30bb\u30b0\u30e1\u30f3\u30c8\nSS    \u30b9\u30bf\u30c3\u30af\u30bb\u30b0\u30e1\u30f3\u30c8\n\n\n\n0x90\n\n\u3069\u3046\u3084\u3089\u30a2\u30bb\u30f3\u30d6\u30e9\u3067\u306f\u300c\u7a7a\u300d\u3092\u610f\u5473\u3059\u308b\u3082\u306e\u3089\u3057\u3044\u3002\n.align 4, 0x90\u3068\u304b\u51fa\u3066\u304f\u308b\u3068\u3053\u308d\u304c\u3042\u308b\u3051\u3069\u3001\u304a\u305d\u3089\u304f4\u30d0\u30a4\u30c8\u5883\u754c\u306b\u30a2\u30e9\u30a4\u30e1\u30f3\u30c8\u3057\u3066\u3001\u7a7a\u3067\u57cb\u3081\u308b\u3001\u7684\u306a\u3053\u3068\uff1f\n\n\u95a2\u6570\n\u5f15\u6570\nx86_64\u3067\u306f6\u500b\u304f\u3089\u3044\u307e\u3067\u306f\u30ec\u30b8\u30b9\u30bf\u3067\u6e21\u3059\u307f\u305f\u3044\u3002\n\u305d\u308c\u4ee5\u4e0a\u306e\u5834\u5408\u306f\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u3093\u3067\u6e21\u3059\u3089\u3057\u3044\u3002\n\uff08x86\u306e32bit\u3067\u306f\u30ec\u30b8\u30b9\u30bf\u304c\u5c11\u306a\u3044\u304b\u3089\u3088\u308a\u591a\u304f\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u3093\u3067\u5f15\u6570\u3068\u3057\u3066\u6e21\u3059\u3089\u3057\u3044\uff09\n\u623b\u308a\u5024\n\u95a2\u6570\u306e\u623b\u308a\u5024\u306frax\u306b\u5165\u308c\u3066\u8fd4\u3059\u3001\u3068\u3044\u3046\u3053\u3068\u306e\u3088\u3046\u3002\n\n\u30a2\u30c9\u30ec\u30b9\u30a2\u30af\u30bb\u30b9\n\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u3066\u30c7\u30fc\u30bf\u3092\u79fb\u52d5\u3057\u305f\u308a\u3059\u308b\u5834\u5408\u306f[]\u3092\u5229\u7528\u3057\u307e\u3059\u3002\nmov al, [esi]\n\nal\u30ec\u30b8\u30b9\u30bf\u306besi\u30ec\u30b8\u30b9\u30bf\u304c\u4fdd\u6301\u3057\u3066\u3044\u308b\u30a2\u30c9\u30ec\u30b9\u306e\u60c5\u5831\u3092\u79fb\u52d5\u3059\u308b\u3001\u3068\u3044\u3046\u547d\u4ee4\u3067\u3059\u3002\n\n\u30a2\u30c9\u30ec\u30b9\u64cd\u4f5c\nC\u8a00\u8a9e\u306e\u30dd\u30a4\u30f3\u30bf\u3068\u4f3c\u305f\u3088\u3046\u306a\u611f\u3058\u3067\u30a2\u30c9\u30ec\u30b9\u3092\u64cd\u4f5c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\nmov al, [esi]\nmov [edi], al\nadd edi, 1\nadd esi, 1\n\nal\u306besi\u304c\u4fdd\u6301\u3057\u3066\u3044\u308b\u30a2\u30c9\u30ec\u30b9\u306e\u30c7\u30fc\u30bf\u3092\u79fb\u52d5\u3057\u3001\u6b21\u306bedi\u304c\u4fdd\u6301\u3057\u3066\u3044\u308b\u30a2\u30c9\u30ec\u30b9\u306bal\u3092\u66f8\u304d\u8fbc\u3093\u3067\u3044\u307e\u3059\u3002\n\u305d\u3057\u3066edi\u3001esi\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u3072\u3068\u3064\u9032\u3081\u308b\u610f\u5473\u3067add edi, 1\u3068\u3044\u3046\u3088\u3046\u306b\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30b9\u30bf\u30c3\u30af\n\u30b9\u30bf\u30c3\u30af\u306f\u3001\u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\u3067\u6709\u540d\u306a\u30b9\u30bf\u30c3\u30af\u3067\u3059\uff57\n\u30a2\u30bb\u30f3\u30d6\u30e9\u3067\u306f\u3001\u30b9\u30bf\u30c3\u30af\u7528\u306b\u9818\u57df\u304c\u78ba\u4fdd\u3055\u308c\u3001\u305d\u306e\u5148\u982d\u30a2\u30c9\u30ec\u30b9\u304c\u30b9\u30bf\u30c3\u30af\u7528\u30ec\u30b8\u30b9\u30bf\u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\n\uff08\u30b9\u30bf\u30c3\u30af\u7528\u306e\u30ec\u30b8\u30b9\u30bf\u306frsp\uff08\u30b9\u30bf\u30c3\u30af\u30dd\u30a4\u30f3\u30bf\uff09\u304c\u5229\u7528\u3055\u308c\u308b\uff09\n\u305d\u3057\u3066\u30b9\u30bf\u30c3\u30af\u306f\u3001\u5404\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u3054\u3068\u306b\u6c7a\u307e\u3063\u305f\u5bb9\u91cf\u3060\u3051\u78ba\u4fdd\u3055\u308c\u307e\u3059\u3002\n\u3053\u308c\u304c\u5927\u4e8b\u306a\u30dd\u30a4\u30f3\u30c8\u3067\u3001\u300c\u6c7a\u307e\u3063\u305f\u5bb9\u91cf\u300d\u3057\u304b\u306a\u3044\u306b\u3082\u304b\u304b\u308f\u3089\u305a\u3001CPU\u306f\u3069\u308c\u3060\u3051\u30b9\u30bf\u30c3\u30af\u9818\u57df\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u308b\u304b\u77e5\u308a\u307e\u305b\u3093\u3002\n\u306a\u306e\u3067\u547d\u4ee4\u3055\u308c\u305f\u3060\u3051\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u307f\u4e0a\u3052\u3066\u3044\u304d\u3001\u305d\u308c\u304c\u4e00\u5b9a\u5024\u3092\u8d85\u3048\u308b\u3068\u300c\u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\u300d\u304c\u767a\u751f\u3057\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u30b9\u30bf\u30c3\u30af\u30dd\u30a4\u30f3\u30bf\u306e\u5229\u7528\u65b9\u6cd5\u306f\u3001\u95a2\u6570\u304c\u547c\u3070\u308c\u308b\u305f\u3073\u306b\u30b9\u30bf\u30c3\u30af\u306b\u5f15\u6570\u3084\u3001\u623b\u308a\u5148\u30a2\u30c9\u30ec\u30b9\u306a\u3069\u304c\u3069\u3093\u3069\u3093\u3068push\u3055\u308c\u3066\u3044\u304d\u307e\u3059\u3002\n\u305d\u3057\u3066\u95a2\u6570\u306e\u30ea\u30bf\u30fc\u30f3\u6642\u306b\u3001\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u307e\u308c\u305f\u60c5\u5831\u3092\u5143\u306b\u51e6\u7406\u3059\u308b\u4f4d\u7f6e\u3092\u79fb\u52d5\u3059\u308b\u3001\u3068\u3044\u3046\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0 - \u95a2\u6570\u306b\u6e21\u3055\u308c\u308b\u5f15\u6570\u3092\u77e5\u308b | Web/DB \u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u5fb9\u5e95\u89e3\u8aac\u306b\u30b9\u30bf\u30c3\u30af\u306e\u72b6\u614b\u306e\u8a71\u304c\u8f09\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n\u305d\u308c\u3092\u8aad\u3093\u3067\u306e\u7406\u89e3\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u3067\u3059\u3002\n\n\u95a2\u6570\u547c\u3073\u51fa\u3057\u6642\u3001\u5f15\u6570\u306f\u53f3\u304b\u3089\u5de6\u306b\u5411\u304b\u3063\u3066\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u307e\u308c\u308b\n\nrbp\u30ec\u30b8\u30b9\u30bf\u306e\u5185\u5bb9\u3092\u30b9\u30bf\u30c3\u30af\u306bPUSH\u3059\u308b\uff08\u3053\u308c\u306f\u306a\u3093\u3067\u304b\u307e\u3060\u5206\u304b\u308a\u307e\u305b\u3093\uff1b\uff09\n\u30ed\u30fc\u30ab\u30eb\u5909\u6570\uff08\u81ea\u52d5\u5909\u6570\uff09\u304c\u3042\u308b\u5834\u5408\u306f\u3055\u3089\u306b\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u3080\n\n\u3068\u3044\u3046\u6d41\u308c\u306b\u306a\u308a\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306aC\u30b3\u30fc\u30c9\u304c\u3042\u3063\u305f\u3068\u3057\u3066\u3001\nint add(int a, int b) {\n    int c = a + b;\n    return c;\n}\n\nint b\u3001int a\u306e\u9806\u306b\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u307e\u308c\u3001rbp\u306e\u5024\u304c\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u307e\u308c\u3001\u6700\u5f8c\u306bint c\u306e\u5909\u6570\u304c\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u307e\u308c\u307e\u3059\u3002\n\uff08rbp\u306f\u95a2\u6570\u958b\u59cb\u6642\u306e\u30b9\u30bf\u30c3\u30af\u30dd\u30a4\u30f3\u30bf\u306e\u4f4d\u7f6e\uff09\n\u56f3\u306b\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n0x00000h  +----> +           +\n                 |           |\n                 |           |\n                 +-----------+\n                 |   int c   |\n                 +-----------+\n                 |    rbp    |\n                 +-----------+\n                 |   int a   |\n                 +-----------+\n                 |   int b   |\n                 +-----------+\n\n\u306a\u304a\u3001\u30b9\u30bf\u30c3\u30af\u306f\u5927\u304d\u3044\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u5c0f\u3055\u3044\u30a2\u30c9\u30ec\u30b9\u306b\u5411\u304b\u3063\u3066\u4f38\u3073\u3066\u3044\u304d\u307e\u3059\u3002\n\u306a\u306e\u3067\u3001rbp\u3088\u308a\u30de\u30a4\u30ca\u30b9\u65b9\u5411\uff08\u3064\u307e\u308a\u5c0f\u3055\u3044\u65b9\u5411\uff09\u306b\u3042\u308b\u30b9\u30bf\u30c3\u30af\u306f\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3001\u9006\u306b\u30d7\u30e9\u30b9\u65b9\u5411\uff08\u3064\u307e\u308a\u5927\u304d\u3044\u65b9\u5411\uff09\u306b\u3042\u308b\u30b9\u30bf\u30c3\u30af\u306f\u5f15\u6570\u3001\u3068\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u3001\u3053\u308c\u306fx86\u306e\u4ed5\u69d8\u3067\u3001x64\u3067\u306f\u30ec\u30b8\u30b9\u30bf\u6570\u304c\u5897\u3048\u305f\u305f\u3081\uff08\uff1f\uff09\u3001\u5f15\u6570\u3092\u7121\u7406\u306b\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u3080\u306e\u3067\u306f\u306a\u304f\u3001\u3044\u304f\u3064\u304b\u306e\u30ec\u30b8\u30b9\u30bf\u306b\u76f4\u306b\u4fdd\u6301\u3055\u308c\u3066\u95a2\u6570\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\u4e0b\u8a18\u306b\u8a18\u8f09\u3057\u3066\u3044\u308b\u300c\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306b\u4f7f\u308f\u308c\u308b\u30ec\u30b8\u30b9\u30bf\u300d\u306e\u3068\u3053\u308d\u3067\u3001\u3069\u306e\u30ec\u30b8\u30b9\u30bf\u304c\u4f7f\u308f\u308c\u308b\u306e\u304b\u3092\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u305d\u3061\u3089\u3082\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\n\u547c\u3073\u51fa\u3057\u898f\u7d04\n\u30a2\u30bb\u30f3\u30d6\u30e9\u306b\u306f\u547c\u3073\u51fa\u3057\u898f\u7d04\u3068\u3044\u3046\u3082\u306e\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\u3064\u307e\u308a\u3001\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u6642\u306b\u3001\u547c\u3073\u51fa\u3057\u5143\u3068\u547c\u3073\u51fa\u3057\u5148\u3067\u305d\u308c\u305e\u308c\u3084\u3089\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u51e6\u7406\u304c\u6c7a\u307e\u3063\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\u3053\u308c\u3092\u5b88\u3089\u306a\u3044\u3068\u7834\u58ca\u3057\u3066\u306f\u3044\u3051\u306a\u3044\u30ec\u30b8\u30b9\u30bf\u306e\u5185\u5bb9\u3092\u7834\u58ca\u3057\u305f\u308a\u3001\u3068\u3044\u3063\u305f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\uff08\u3068\u3044\u3046\u8a8d\u8b58\u3067\u3042\u3063\u3066\u308b\u304b\u306a\uff1f\uff09\n\uff08\u3061\u306a\u307f\u306b\u3069\u3046\u3084\u3089\u3053\u306e\u898f\u7d04\u3092 ABI\uff08Application Binary Interface\uff09 \u3068\u547c\u3076\u3088\u3046\u3067\u3059\uff09\n\u3053\u3061\u3089\u306e\u8a18\u4e8b\u304b\u3089\u5f15\u7528\u3055\u305b\u3066\u3082\u3089\u3044\u307e\u3059\u3002\n\n\n\u547c\u3073\u51fa\u3059\u5074\u306e\u898f\u7d04\n\u6b21\u306b\u4e0a\u8a18\u898f\u7d04\u3092\u6e80\u305f\u3059\u95a2\u6570(func)\u304c\u3042\u3063\u305f\u3068\u304d\u306b\uff0cfunc\u3092asm\u304b\u3089\u547c\u3073\u51fa\u3059\u624b\u7d9a\u304d\u306b\u3064\u3044\u3066\u8ff0\u3079\u307e\u3059\uff0easm\u3067\u306f\u6b21\u306e\u898f\u7d04\u306b\u5f93\u3063\u3066\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3066\u304f\u3060\u3055\u3044\uff0e\n\nfunc\u306e\u5f15\u6570\u3092\u53f3\u5074\u304b\u3089push\u3059\u308b\uff0e\ncall func\u3059\u308b(Xbyak\u3067\u306fcall(int(func));)\uff0e\n\u5f15\u6570\u306e\u6570 x 4\u3060\u3051esp\u3092\u5927\u304d\u304f\u3059\u308b\uff0e\n\u95a2\u6570\u306e\u8fd4\u308a\u5024\u306feax\u306b\u5165\u3063\u3066\u3044\u308b\uff0evoid\u578b\u306e\u5834\u5408\u306feax\u306e\u5024\u306f\u4e0d\u5b9a\uff0e\n\u305f\u3068\u3048\u3070\n\nint func0(int a, char *b, double *c);\n\n\u306e\u5834\u5408\u306f\npush(\u30dd\u30a4\u30f3\u30bfc\u306e\u5024);\npush(\u30dd\u30a4\u30f3\u30bfb\u306e\u5024);\npush(a\u306e\u5024);\ncall(int(func0));\nadd(esp, 3 * 4); /* \u5f15\u6570\u304c3\u500b\u306a\u306e\u30673 * 4 */\n\n\u3068\u3057\u307e\u3059\uff0e\u5f15\u6570\u304c\u306a\u3051\u308c\u3070push\u3068add\u306f\u7701\u7565\u3067\u304d\u307e\u3059\uff0e\u305f\u3068\u3048\u3070\nvoid func();\n\n\u306e\u5834\u5408\u306f\ncall(int(func));\n\n\u3068\u306a\u308a\u307e\u3059\n\n\n\n\n\u547c\u3073\u51fa\u3055\u308c\u308b\u5074\u306e\u898f\u7d04\nC\u304b\u3089\u547c\u3073\u51fa\u3055\u308c\u308b\u95a2\u6570\u306f\u6b21\u306e\u898f\u7d04\u306b\u5f93\u3063\u3066\u304f\u3060\u3055\u3044\uff0e\n\n\u8fd4\u308a\u5024\u306feax\u306b\u4ee3\u5165\u3059\u308b(\u8fd4\u308a\u5024\u304cvoid\u306a\u3089eax\u306e\u5024\u306f\u4e0d\u5b9a)\uff0e\n\u6c4e\u7528\u30ec\u30b8\u30b9\u30bf\u306e\u3046\u3061ebx, esi, edi, ebp, esp\u306e\u5024\u306f\u95a2\u6570\u3092\u629c\u3051\u308b\u3068\u304d\u306b\u547c\u3073\u51fa\u3055\u308c\u305f\u3068\u304d\u306e\u72b6\u614b\u306b\u623b\u3059\uff0eecx, edx\u306e\u5024\u3092\u4fdd\u5b58\u3059\u308b\u5fc5\u8981\u306f\u306a\u3044\uff0e\nret();\u3067\u95a2\u6570\u304b\u3089\u623b\u308b\uff0e\n\u3053\u306e\u3068\u304d\uff0c\u95a2\u6570\u306e\u5f15\u6570\u306f\u300cesp + \u5de6\u304b\u3089\u5f15\u6570\u304c\u4f55\u756a\u76ee\u306b\u3042\u308b\u304b(1\u30aa\u30ea\u30b8\u30f3) * 4\u300d\u306e\u30a2\u30c9\u30ec\u30b9\u306b\u683c\u7d0d\u3055\u308c\u3066\u3044\u307e\u3059\uff0e\n\u95a2\u6570\u306e\u5f15\u6570\u306b\u3064\u3044\u3066\u3082\u3046\u5c11\u3057\u8a73\u3057\u304f\u8aac\u660e\u3057\u307e\u3059\uff0e\u4f8b\u3068\u3057\u3066func0()\u3092\u8003\u3048\u307e\u3057\u3087\u3046\uff0e\n\nfunc0\u306e\u547c\u3073\u51fa\u3057\u624b\u7d9a\u304d\u306b\u5f93\u3063\u3066func0\u304c\u547c\u3070\u308c\u305f\u3068\u304d\u306e\u30b9\u30bf\u30c3\u30af\u306e\u72b6\u6cc1\u3092\u8003\u3048\u307e\u3059\uff0ec, b, a\u3068\u9806\u306bpush\u3055\u308c\u305f\u306e\u3067\u30b9\u30bf\u30c3\u30af\u306b\u306f\u5927\u304d\u3044\u65b9\u304b\u3089\u5c0f\u3055\u3044\u65b9\u3078c, b, a\u3068\u4e26\u3093\u3067\u3044\u308b\u306f\u305a\u3067\u3059\uff0e\u3068\u3044\u3046\u3053\u3068\u306f\nesp + 8 : c\nesp + 4 : b\nesp + 0 : a\n\n\u306a\u306e\u3067\u3057\u3087\u3046\u304b\uff0e\u5b9f\u306f\u3061\u3087\u3063\u3068\u9055\u3044\u307e\u3057\u3066\uff0ccall\u3092\u5b9f\u884c\u3057\u305f\u3068\u304d\uff0c\u3053\u3063\u305d\u308a\u3068\u5b9f\u884c\u3057\u3066\u3044\u305f\u547d\u4ee4\u306e\u6b21\u306e\u547d\u4ee4\u306e\u5148\u982d\u30a2\u30c9\u30ec\u30b9\u304c\u30b9\u30bf\u30c3\u30af\u306b\u683c\u7d0d\u3055\u308c\u3066\u3044\u307e\u3059\uff0e\u3064\u307e\u308a\u6b63\u89e3\u306f\nesp + 12: c\nesp + 8 : b\nesp + 4 : a\nesp + 0 : \u6b21\u306e\u547d\u4ee4\u306e\u30a2\u30c9\u30ec\u30b9\n\n\n\n\u547c\u3073\u51fa\u3057\u898f\u7d042\n\u306a\u304a\u3001\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3092\u5f15\u7528\u3055\u305b\u3066\u3082\u3089\u3046\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u898f\u5247\u3082\u3042\u308b\u307f\u305f\u3044\u3002\n\uff08\u3053\u3063\u3061\u306fx64\u306e\u898f\u7d04\u304b\u306a\uff1f\uff09\n\n\nRCX\u3001RDX\u3001R8\u3001R9 \u306f\u3001\u5de6\u304b\u3089\u53f3\u306b\u3053\u306e\u9806\u5e8f\u3067\u6574\u6570\u304a\u3088\u3073\u30dd\u30a4\u30f3\u30bf\u30fc\u5f15\u6570\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\nXMM0\u30011\u30012\u3001\u304a\u3088\u3073 3 \u306f\u6d6e\u52d5\u5c0f\u6570\u70b9\u5f15\u6570\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\n\u8ffd\u52a0\u306e\u5f15\u6570\u306f\u3001\u5de6\u304b\u3089\u53f3\u3078\u30b9\u30bf\u30c3\u30af\u306b\u30d7\u30c3\u30b7\u30e5\u3055\u308c\u307e\u3059\u3002\n\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306e\u9577\u3055\u304c 64 \u30d3\u30c3\u30c8\u672a\u6e80\u306e\u5834\u5408\u3001\u30bc\u30ed\u62e1\u5f35\u3055\u308c\u305a\u3001\u4e0a\u4f4d\u30d3\u30c3\u30c8\u306f\u4e0d\u5b9a\u3067\u3059\u3002\n\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u524d\u306b\u3001\u547c\u3073\u51fa\u3057\u5143\u3067 (\u5fc5\u8981\u306b\u5fdc\u3058\u3066 RCX\u3001RDX\u3001R8\u3001\u304a\u3088\u3073 R9 \u3092\u683c\u7d0d\u3059\u308b\u305f\u3081\u306e) 32 \u30d0\u30a4\u30c8\u306e \u201c\u30b7\u30e3\u30c9\u30a6\u9818\u57df\u201d \u3092\u5272\u308a\u5f53\u3066\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\n\u547c\u3073\u51fa\u3057\u5f8c\u306b\u3001\u547c\u3073\u51fa\u3057\u5143\u3067\u30b9\u30bf\u30c3\u30af\u3092\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\n(x86 \u3068\u540c\u3058\u3088\u3046\u306b) \u6574\u6570\u578b\u306e\u623b\u308a\u5024\u306f\u300164 \u30d3\u30c3\u30c8\u4ee5\u4e0b\u306e\u5834\u5408\u306f RAX \u306b\u683c\u7d0d\u3055\u308c\u8fd4\u3055\u308c\u307e\u3059\u3002\n\u6d6e\u52d5\u5c0f\u6570\u70b9\u578b\u306e\u623b\u308a\u5024\u306f\u3001XMM0 \u306b\u683c\u7d0d\u3055\u308c\u8fd4\u3055\u308c\u307e\u3059\u3002\n\u30b5\u30a4\u30ba\u306e\u5927\u304d\u306a\u623b\u308a\u5024 (\u69cb\u9020\u4f53\u306a\u3069) \u306f\u3001\u547c\u3073\u51fa\u3057\u5143\u306b\u3088\u308a\u30b9\u30bf\u30c3\u30af\u306b\u9818\u57df\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3001\u547c\u3073\u51fa\u3057\u5148\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u3068\u304d\u306b\u30ea\u30bf\u30fc\u30f3\u9818\u57df\u3078\u306e\u30dd\u30a4\u30f3\u30bf\u30fc\u304c RCX \u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\u305d\u3057\u3066\u3001\u6574\u6570\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3067\u4f7f\u7528\u3055\u308c\u308b\u30ec\u30b8\u30b9\u30bf\u30fc\u306f\u53f3\u306b 1 \u3064\u30d7\u30c3\u30b7\u30e5\u3055\u308c\u307e\u3059\u3002RAX \u306f\u3053\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u547c\u3073\u51fa\u3057\u5143\u306b\u8fd4\u3057\u307e\u3059\u3002\n\u30b9\u30bf\u30c3\u30af\u306f 16 \u30d0\u30a4\u30c8\u3067\u30a2\u30e9\u30a4\u30e1\u30f3\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u201dcall\u201d \u547d\u4ee4\u306f 8 \u30d0\u30a4\u30c8\u306e\u623b\u308a\u5024\u3092\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u305f\u3081\u3001\u30ea\u30fc\u30d5\u3067\u306a\u3044\u95a2\u6570\u306f\u30b9\u30bf\u30c3\u30af\u9818\u57df\u3092\u5272\u308a\u5f53\u3066\u308b\u969b\u306b\u3001\u5024\u3092 16n+8 \u5f62\u5f0f\u3067\u6307\u5b9a\u3057\u3066\u30b9\u30bf\u30c3\u30af\u3092\u8abf\u6574\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nRAX\u3001RCX\u3001RDX\u3001R8\u3001R9\u3001R10\u3001\u304a\u3088\u3073 R11 \u30ec\u30b8\u30b9\u30bf\u30fc\u306f\u4e0d\u5b9a\u3067\u3001\u95a2\u6570\u547c\u3073\u51fa\u3057\u6642\u306b\u7834\u68c4\u3055\u308c\u308b\u3068\u8003\u3048\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\nRBX\u3001RBP\u3001RDI\u3001RSI\u3001R12\u3001R13\u3001R14\u3001\u304a\u3088\u3073 R15 \u306f\u3001\u3053\u308c\u3089\u3092\u4f7f\u7528\u3059\u308b\u95a2\u6570\u3067\u4fdd\u5b58\u3055\u308c\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\n\u6d6e\u52d5\u5c0f\u6570\u70b9 (\u3064\u307e\u308a MMX) \u30ec\u30b8\u30b9\u30bf\u30fc\u306e\u547c\u3073\u51fa\u3057\u898f\u7d04\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u8a73\u7d30 (\u53ef\u5909\u500b\u5f15\u6570\u3001\u4f8b\u5916\u51e6\u7406\u3001\u30b9\u30bf\u30c3\u30af\u306e\u5dfb\u304d\u623b\u3057\u306a\u3069) \u306f\u3001Microsoft* \u306e\u30b5\u30a4\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n\n\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\n.\u304b\u3089\u59cb\u307e\u308b\u547d\u4ee4\u3092\u300c\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u300d\u3068\u547c\u3073\u307e\u3059\u3002\n\uff08.section\u306a\u3069\u3002\u305f\u3060\u3057\u3053\u308c\u306fAT&T\u69cb\u6587\uff09\n\n\u30a4\u30f3\u30b9\u30c8\u30e9\u30af\u30b7\u30e7\u30f3\n\u3044\u308f\u3086\u308b\u547d\u4ee4\u306e\u3053\u3068\u304b\u306a\uff1f\n\n****q\npushq\u306a\u3069\u306eq\u306f64bit\u3092\u8868\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\npushq\u3084popq\u3001movq\u306a\u306964bit\u3067\u306e\u51e6\u7406\u3092\u3059\u308b\u5834\u5408\u306fq\u3092\u4ed8\u3051\u307e\u3059\u3002\n\n****l\nmovl\u306a\u3069\u306el\u304c\u4ed8\u304f\u306e\u306f32bit\u306e\u51e6\u7406\u3092\u3059\u308b\u547d\u4ee4\u3067\u3059\u3002\n\n\u305d\u306e\u4ed6\u5927\u4e8b\u305d\u3046\u306a\u547d\u4ee4\n\u3053\u3061\u3089\u306e\u8a18\u4e8b\u306e\u5f15\u7528\u3067\u3059\u3002\n\n5.1.3.6. call\n\u3000call a \u306f\u95a2\u6570\u547c\u3073\u51fa\u3057\u306e\u547d\u4ee4\u3067\u3059\u3002\u30e9\u30d9\u30eba\u306e\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\u5177\u4f53\u7684\u306a\u52d5\u4f5c\u306fcall\u306e\u6b21\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u3093\u3067\u30e9\u30d9\u30eba\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n5.1.3.7. leave\n\u3000leave\u306f\u3001\u95a2\u6570\u7d42\u4e86\u51e6\u7406\u306e\u547d\u4ee4\u3067\u3059\u3002%rbp \u3092 %rsp\u306b\u79fb\u52d5\u3057\u3001\u30b9\u30bf\u30c3\u30af\u304b\u3089%rbp\u306b\u5024\u3092\u53d6\u308a\u51fa\u3057\u307e\u3059\u3002\n\n\n\u30a2\u30c9\u30ec\u30b9\u30aa\u30da\u30e9\u30f3\u30c9\u306e\u6587\u6cd5\nAT&T\u8a18\u6cd5\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\uff08X86\u30a2\u30bb\u30f3\u30d6\u30e9/GAS\u3067\u306e\u6587\u6cd5\u3092\u5f15\u7528\u3055\u305b\u3066\u3082\u3089\u3044\u307e\u3057\u305f\uff09\nmovl    -4(%ebp, %edx, 4), %eax  # \u5b8c\u5168\u306a\u4f8b: (ebp - 4 + (edx * 4))\u306e\u30a2\u30c9\u30ec\u30b9\u306e\u5185\u5bb9\u3092eax\u306b\u8ee2\u9001\u3059\u308b\nmovl    -4(%ebp), %eax           # \u3088\u304f\u3042\u308b\u4f8b: \u30b9\u30bf\u30c3\u30af\u306e\u5024\u3092eax\u306b\u8ee2\u9001\u3059\u308b\nmovl    (%ecx), %edx             # \u30aa\u30d5\u30bb\u30c3\u30c8\u306e\u306a\u3044\u5834\u5408: \u30dd\u30a4\u30f3\u30bf\u306e\u6307\u3059\u5185\u5bb9\u3092\u30ec\u30b8\u30b9\u30bf\u306b\u8ee2\u9001\u3059\u308b\nleal    8(,%eax,4), %eax         # \u7b97\u8853\u6f14\u7b97\u306e\u4f8b: eax\u306b4\u3092\u639b\u30518\u3092\u8db3\u3057\u305f\u30a2\u30c9\u30ec\u30b9\u3092eax\u306b\u683c\u7d0d\u3059\u308b\nleal    (%eax,%eax,2), %eax      # \u7b97\u8853\u6f14\u7b97\u306e\u4f8b: eax\u306e\u6307\u3059\u5024\u30923\u500d\u3057\u305f\u30a2\u30c9\u30ec\u30b9\u3092eax\u306b\u683c\u7d0d\u3059\u308b\n\n\u306a\u304a\u3001 Intel\u69cb\u6587\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n[ebp - 4 + (edx * 4)]\n\n\n.len: equ $ - msg\n\n\u306a\u3093\u304b\u305f\u307e\u306b\u898b\u304b\u3051\u308b\u3053\u3093\u306a\u611f\u3058\u306e\u3084\u3064\u3002\nNASM Hello World Segmentation Fault - Stack overflow\u3067\u540c\u3058\u3053\u3068\u3092\u8cea\u554f\u3057\u3066\u3044\u308b\u4eba\u304c\u3044\u305f\u3002\n\u305d\u3053\u304b\u3089\u5f15\u7528\u3055\u305b\u3066\u3082\u3089\u3046\u3068\u3001\n\nHow does the statement .len equ $-msg work? I understand this is the length of the string. I also know that equ is like #define in C. So this variable does not exist in memory, it is put in place by the assembler. (nasm)\n\n\u3064\u307e\u308a\u3001equ\u306f#define\u7684\u306a\u52d5\u4f5c\u3092\u3059\u308b\u307f\u305f\u3044\u3002\n\u307e\u305f\u3001\n\n$ represents the address of the current line. So the following:\n\n\u3068\u3042\u308a\u3001$\u306f\u73fe\u5728\u306e\u884c\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u4fdd\u6301\u3059\u308b\u7279\u6b8a\u5909\u6570\u3089\u3057\u3044\u3002\n\u305d\u3057\u3066- msg\u306f\u3001msg\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u5f15\u304f\u3001\u3068\u3044\u3046\u3053\u3068\u306e\u3088\u3046\u3002\uff08\u666e\u901a\u306b\u30de\u30a4\u30ca\u30b9\u8a18\u53f7\u3068\u306f\u30fb\u30fb\uff09\n\u8aac\u660e\u3092\u5f15\u7528\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u610f\u5473\u307f\u305f\u3044\u3067\u3059\u3002\n\nMeans the current address minus the address of msg. That gives the length of the data stored between msg and .len (since the address of .len is represented by $). Thus, the symbol .len represents (equated to) that length value.\n\n\u3064\u307e\u308a\u3001\u73fe\u5728\u306e\u30a2\u30c9\u30ec\u30b9\u3067\u3042\u308b$\u304b\u3089\u76f4\u524d\u306emsg\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u5f15\u3044\u305f\u9577\u3055\u306f\u3001\u3064\u307e\u308b\u3068\u3053\u308dmsg\u306e\u9577\u3055\u3060\u3088\u306d\u3001\u3063\u3066\u3053\u3068\u3067\u89e3\u91c8\u3042\u3063\u3066\u308b\u304b\u306a\uff1f\n\n\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306b\u4f7f\u308f\u308c\u308b\u30ec\u30b8\u30b9\u30bf\n\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\nThe number of the syscall has to be passed in register rax.\n\nrdi - used to pass 1st argument to functions\nrsi - used to pass 2nd argument to functions\nrdx - used to pass 3rd argument to functions\nrcx - used to pass 4th argument to functions\nr8 - used to pass 5th argument to functions\nr9 - used to pass 6th argument to functions\n\nA system-call is done via the syscall instruction. The kernel destroys registers rcx and r11.\n\n\n0x2000001\u3068\u304b\u306e\u6b63\u4f53\n\u3053\u308c\u306f\u3069\u3046\u3084\u3089\u30de\u30b9\u30af\u3055\u308c\u308b\u60f3\u5b9a\u306e\u6570\u5024\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u3089\u3057\u3044\u3002\n\u4f8b\u3048\u3070\u3053\u3093\u306a\u8a18\u8ff0\u3002\nmov rax, 0x2000004      ; System call write = 4\n\n\u3053\u308c\u306f\u3001Unix\u7cfb\u306e\u5834\u5408\u306f\u4e0a\u4f4d\u30d3\u30c3\u30c8\u304c2\u3068\u3057\u3066\u30de\u30b9\u30af\u3055\u308c\u3066\u3001\u305d\u308c\u306b\u30de\u30c3\u30c1\u3057\u305f\u5834\u5408\u306b\u5b9f\u884c\u3055\u308c\u308b\u3001\u3068\u3044\u3046\u611f\u3058\u3060\u308d\u3046\u304b\u3002\n\u3068\u306b\u304b\u304f\u3053\u306e\u30de\u30b8\u30c3\u30af\u30ca\u30f3\u30d0\u30fc\u306e\u6b63\u4f53\u306f\u30de\u30b9\u30af\u3055\u308c\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u305f\u6570\u5024\u307f\u305f\u3044\u3067\u3059\u3002\n\uff08\u307e\u3060\u3061\u3083\u3093\u3068\u308f\u304b\u3063\u3066\u306a\u3044\uff09\n\nhello world\n\u3061\u306a\u307f\u306b\u4e0a\u8a18\u306e\u30de\u30b9\u30af\u3092\u9069\u7528\u3057\u3001\u5b9f\u969b\u306b\u52d5\u304fhello world\u306f\u3053\u3093\u306a\u611f\u3058\u3002\nsection .data\nhello_world     db      \"Hello World!\", 0x0a\n\nsection .text\nglobal start\n\nstart:\nmov rax, 0x2000004      ; System call write = 4\nmov rdi, 1              ; Write to standard out = 1\nmov rsi, hello_world    ; The address of hello_world string\nmov rdx, 14             ; The size to write\nsyscall                 ; Invoke the kernel\nmov rax, 0x2000001      ; System call number for exit = 1\nmov rdi, 0              ; Exit success = 0\nsyscall                 ; Invoke the kernel\n\nsyscall\u306f\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3067\u3001rax\u306b\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306e\u756a\u53f7\u3092\u3001rbx\u306b\u5f15\u6570\u3092\u3001\u3068\u3044\u3046\u611f\u3058\u3067\u6c7a\u307e\u3063\u3066\u3044\u308b\u3088\u3046\u3002\n\uff08\u3053\u3061\u3089\u306b\u305d\u306e\u3078\u3093\u304c\u307e\u3068\u307e\u3063\u3066\u307e\u3059\uff09\n\n\u53c2\u8003\u306b\u3057\u305f\u8a18\u4e8b\n\n\u6c4e\u7528\u30ec\u30b8\u30b9\u30bf\n\u30a2\u30bb\u30f3\u30d6\u30e9\u5165\u9580\nx64\u306e\u30ec\u30b8\u30b9\u30bf\u62e1\u5f35 (1/2)\n\u30b9\u30bf\u30c3\u30af\u3063\u3066\u306a\u3042\u306b\uff1f(3)\n\u30a2\u30bb\u30f3\u30d6\u30e9\u3092\u5b66\u3073\u306a\u304c\u3089Scala\u3067\u4f5c\u308b\u30b3\u30f3\u30d1\u30a4\u30e9\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u5165\u9580\nLinux \u306e\u30a2\u30bb\u30f3\u30d6\u30e9\u30fc: GAS \u3068 NASM \u3092\u6bd4\u8f03\u3059\u308b\nx64 \u30a2\u30bb\u30f3\u30d6\u30ea\u8a00\u8a9e\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\nLinux Syscall Reference\nx86\u5165\u9580(3) \u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u898f\u7d04\n\n\n\u304c\u3063\u3064\u308a\u3068\u3084\u308b\u3064\u3082\u308a\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3082\u3057\u304b\u3057\u305f\u3089\u8aad\u3080\u5fc5\u8981\u304c\u51fa\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u5c11\u3057\u3060\u3051\u304a\u52c9\u5f37\u3002\n\u3082\u3068\u3082\u3068\u4ed5\u7d44\u307f\u3092\u77e5\u308b\u3053\u3068\u304c\u597d\u304d\u306a\u306e\u3067\u8aad\u307f\u59cb\u3081\u308b\u3068\u7d50\u69cb\u9762\u767d\u3044\u3067\u3059\u3002\n\n*\uff08\u307b\u3093\u3068\u306farm\u306e\u307b\u3046\u304c\u77e5\u8b58\u3068\u3057\u3066\u306f\u5fc5\u8981\u306a\u3093\u3060\u3051\u3069\u3001\u305d\u308c\u306f\u307e\u305f\u5f8c\u65e5\u8abf\u3079\u308b\uff09*\n\n## \u306f\u3058\u3081\u306b\n\n\u4eca\u56de\u307e\u3068\u3081\u3066\u3044\u308b\u306e\u306f`x86`\u3068`x86_64`\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u95a2\u3059\u308b\u3082\u306e\u3067\u3059\u3002\n`arm`\u306a\u3069\u306f\u307e\u305f\u7570\u306a\u3063\u305f\u3082\u306e\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u69cb\u6587\u3082\u3044\u304f\u3064\u304b\u3042\u308b\u3088\u3046\u3067\u3001\u305d\u308c\u305e\u308c **AT&T\u69cb\u6587**\u3001 **Intel\u69cb\u6587**\u3068\u3044\u3046\u3088\u3046\u3067\u3059\u3002\u3000\n\n### \u69cb\u6587\u306e\u9055\u3044\n\n`%rax`\u306a\u3069\u306e\u3088\u3046\u306b\u3001\u30ec\u30b8\u30b9\u30bf\u306b`%`\u304c\u3064\u3044\u3066\u3044\u305f\u308a\u3059\u308b\u306e\u306fAT&T\u69cb\u6587\u3067\u3059\u3002\n\u3064\u3044\u3066\u3044\u306a\u3044\u3082\u306e\u306fIntel\u69cb\u6587\u3067\u3059\u3002\n\n\u307e\u305f\u3001\u30bb\u30af\u30b7\u30e7\u30f3\u306e\u5b9a\u7fa9\u306a\u3069\u7d30\u304b\u3044\u3068\u3053\u308d\u3067\u8272\u3005\u3068\u5dee\u7570\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\n#### \u30bd\u30fc\u30b9\u30fb\u30c7\u30a3\u30b9\u30c6\u30a3\u30cd\u30fc\u30b7\u30e7\u30f3\n\n\u4e0a\u8a18\u69cb\u6587\u306e\u4e2d\u3067\u7279\u306b\u899a\u3048\u3066\u304a\u304b\u306a\u3044\u3068\u6df7\u4e71\u3059\u308b\u306e\u304c\u3053\u306e\u300c\u30bd\u30fc\u30b9\u300d\u3068\u300c\u30c7\u30a3\u30b9\u30c6\u30a3\u30cd\u30fc\u30b7\u30e7\u30f3\u300d\u306e\u9806\u756a\u3067\u3059\u3002\n\n\u4f8b\u3048\u3070\u3001`rax`\u30ec\u30b8\u30b9\u30bf\u306b`1`\u3092\u683c\u7d0d\u3059\u308b\u306e\u3092\u305d\u308c\u305e\u308c\u898b\u3066\u307f\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```asm\n; for intel syntax\nmov eax, 1\n```\n\n```asm\n# for AT&T syntax\nmov $1, %eax\n```\n\nintel\u69cb\u6587\u3067\u306f\u5de6\u304c\u30c7\u30a3\u30b9\u30c6\u30a3\u30cd\u30fc\u30b7\u30e7\u30f3\u3001\u53f3\u304c\u30bd\u30fc\u30b9\u3067\u3059\u3002\uff08AT&T\u3067\u306f\u305d\u306e\u9006\uff09\n\u30c7\u30a3\u30b9\u30c6\u30a3\u30cd\u30fc\u30b7\u30e7\u30f3\u306f\u8a08\u7b97\u7d50\u679c\u304c\u683c\u7d0d\u3055\u308c\u308b\u30ec\u30b8\u30b9\u30bf\u3067\u3059\u3002\n\u30bd\u30fc\u30b9\u306f\u30ec\u30b8\u30b9\u30bf\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u5024\u3067\u3001\u30bd\u30fc\u30b9\u306b\u30ec\u30b8\u30b9\u30bf\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u3067\u3082\u3001\u30bd\u30fc\u30b9\u5074\u306e\u30ec\u30b8\u30b9\u30bf\u306f\u5909\u66f4\u3055\u308c\u307e\u305b\u3093\u3002\n\n### \u30b3\u30f3\u30d1\u30a4\u30e9\n\n\u69cb\u6587\u306e\u9055\u3044\u306f\u30b3\u30f3\u30d1\u30a4\u30e9\u306e\u9055\u3044\u3067\u3082\u3042\u308a\u307e\u3059\u3002\ngcc\u306a\u3069\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u5834\u5408\u3001 **GAS (GNU Assembler\uff09**\u3001 nasm\u3067\u306f **NASM (Netwide Assembler)**\u3068\u305d\u308c\u305e\u308c\u7570\u306a\u308a\u307e\u3059\u3002\n*\uff08\u3053\u306e\u3042\u305f\u308a\u306e\u7d30\u304b\u3044\u9055\u3044\u306f\u307e\u3060\u3088\u304f\u308f\u304b\u3063\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u3068\u308a\u3042\u3048\u305a\u3053\u308c\u3092\u899a\u3048\u3066\u304a\u304b\u306a\u3044\u3068\u8abf\u3079\u3066\u51fa\u3066\u304d\u305f\u69cb\u6587\u304c\u5fae\u5999\u306b\u9055\u3046\u306e\u3067\u6df7\u4e71\u3057\u307e\u3059( ;\u00b4\u0414`)\uff09*\n\n\u3061\u306a\u307f\u306b[\u3053\u3061\u3089\u306e\u8a18\u4e8b](http://www.ibm.com/developerworks/jp/linux/library/l-gas-nasm.html)\u304c\u305d\u306e\u6bd4\u8f03\u3092\u884c\u3063\u3066\u3044\u3066\u5206\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\n\n## \u547d\u4ee4\uff08\u30cb\u30fc\u30e2\u30cb\u30c3\u30af\uff09\u306e\u4f8b\n\n\u30a2\u30bb\u30f3\u30d6\u30e9\u3067\u306f\u3042\u307e\u308a\u591a\u304f\u306e\u547d\u4ee4\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u307e\u305f\u30011\u884c\u306e\u51e6\u7406\u304cCPU\u306b\u5bfe\u3059\u308b\u3072\u3068\u3064\u306e\u547d\u4ee4\u306b\u306a\u308a\u307e\u3059\u3002\n\u305d\u3046\u3044\u3046\u610f\u5473\u3067\u3082\u3001CPU\u304c\u3067\u304d\u308b\u3053\u3068\u3060\u3051\u3092\u8a18\u8ff0\u3067\u304d\u308b\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u306d\u3002\n\n### \u30b3\u30e1\u30f3\u30c8\n\n\u547d\u4ee4\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001\u30a2\u30bb\u30f3\u30d6\u30e9\u3067\u306fAT&T\u69cb\u6587\u306e\u5834\u5408\u306f`;`\u3001intel\u69cb\u6587\u306e\u5834\u5408\u306f`#`\u4ee5\u964d\u304c\u30b3\u30e1\u30f3\u30c8\u3068\u3057\u3066\u6271\u308f\u308c\u307e\u3059\u3002\n\n### mov\n\n`mov`\u306f\u5024\u3092\u30b3\u30d4\u30fc\u3059\u308b\u547d\u4ee4\u3067\u3059\u3002\n\n```asm\nmov rax, rbx\n```\n\n\n### add\n\n`add`\u306f\u5024\u3092\u52a0\u7b97\u3057\u307e\u3059\u3002\n\u305f\u3060\u3001\u666e\u901a\u306e\u8a00\u8a9e\u306e\u3088\u3046\u306b`a = b + c`\u307f\u305f\u3044\u306a\u611f\u3058\u3067\u306f\u306a\u304f\u3001`add rax, rbx`\u3068\u66f8\u304f\u3068\u3001`rax`\u306b`rbx`\u306e\u5024\u3092\u8db3\u3059\u3001\u3068\u3044\u3046\u52d5\u4f5c\u306b\u306a\u308a\u307e\u3059\u3002\n\u306a\u306e\u3067\u3001\u4f8b\u3048\u3070`5 + 3`\u3068\u3044\u3046\u7c21\u5358\u306a\u5f0f\u3092\u5b9f\u73fe\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```asm\nmov rax, 5\nmov rbx, 3\nadd rax, rbx\n```\n\n\n### sub\n\n`sub`\u306f\u5f15\u304d\u7b97\u3067\u3059\u3002\n\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9\u306f`add`\u3068\u540c\u3058\u3067\u3001\u7d50\u679c\u304c\u30ec\u30b8\u30b9\u30bf\u306b\u4fdd\u5b58\u3055\u308c\u308b\u306e\u3082\u540c\u3058\u52d5\u4f5c\u3067\u3059\u3002\n\n```asm\nmov rax, 5\nmov rbx, 3\nsub rax, rbx\n```\n\n### mul\n\n`mul`\u306f\u639b\u3051\u7b97\uff08Multiple\uff09\u3067\u3059\u3002\n\u3061\u306a\u307f\u306b\u3069\u3046\u3084\u3089`mul`\u306e\u52d5\u4f5c\u306f\u4ed6\u3068\u5fae\u5999\u306b\u7570\u306a\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u5177\u4f53\u7684\u306b\u306f\u4ee5\u4e0b\u3002\n\n```asm\nmov rax, 5\nmov rbx, 3\nmul rbx\n```\n\n`add`\u3001`sub`\u3067\u306f\u30aa\u30da\u30e9\u30f3\u30c9\uff08`rbx`\u3068\u304b\u306e\u3068\u3053\u308d\uff09\u304c2\u3064\u3067\u3057\u305f\u304c\u3001`mul`\u306e\u5834\u5408\u306f\u3072\u3068\u3064\u3057\u304b\u3042\u308a\u307e\u305b\u3093\u3002\n\u3053\u308c\u306f **\u639b\u3051\u7b97\u306f`rax`\u30ec\u30b8\u30b9\u30bf\u304c\u4f7f\u7528\u3055\u308c\u308b\u3068\u3044\u3046\u300c\u6697\u9ed9\u306e\u4e86\u89e3\u300d** \u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\uff08\u305f\u3060\u3001\u53c2\u8003\u306b\u3057\u305f\u8a18\u4e8b\u304c`eax`\u3068\u66f8\u3044\u3066\u3044\u305f\u306e\u3067x64\u306eCPU\u3067\u306f\u3082\u3057\u304b\u3057\u305f\u3089\u52d5\u4f5c\u304c\u9055\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff09\n\n\n### div\n\n`div`\u306f\u5272\u308a\u7b97\u3067\u3059\u3002\n\n```asm\nmov rdx, 0\nmov rax, 5\nmov rbx, 3\ndiv rbx\n```\n\n`mul`\u3068\u540c\u69d8\u306b\u3001`div`\u306f\u30aa\u30da\u30e9\u30f3\u30c9\u304c\u3072\u3068\u3064\u3060\u3051\u3068\u306a\u308a\u307e\u3059\u3002\n\u5272\u308a\u7b97\u3067\u3082`rax`\u304c\u6697\u9ed9\u306b\u4f7f\u308f\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\u307e\u305f\u3001\u6700\u521d\u306e\u884c\u3067`rdx`\u306b`0`\u3092\u683c\u7d0d\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u3001\u5272\u308a\u7b97\u306e\u3042\u307e\u308a\u304c\u81ea\u52d5\u7684\u306b`rdx`\u306b\u4fdd\u5b58\u3055\u308c\u308b\u305f\u3081\u306e\u3088\u3046\u3067\u3059\u3002\n\u305d\u306e\u305f\u3081\u306b\u3001\u4e88\u3081`0`\u3067\u521d\u671f\u5316\u3057\u3066\u304a\u304f\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\n\u305d\u3057\u3066\u3053\u308c\u3089\u306e\u52d5\u4f5c\u306f **\u30a4\u30f3\u30c6\u30eb\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u4ed5\u69d8** \u306e\u3088\u3046\u3067\u3059\u3002\n\u306a\u306e\u3067\u305d\u308c\u4ee5\u5916\u306eCPU\u3067\u306f\u307e\u305f\u9055\u3063\u305f\u4ed5\u69d8\u306b\u306a\u3063\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\n\n\n### loop\n\n\u30a4\u30f3\u30c6\u30eb\u30d7\u30ed\u30bb\u30c3\u30b5\u306f\u3001`loop`\u3068\u3044\u3046\u547d\u4ee4\u3092\u898b\u3064\u3051\u308b\u3068\u6307\u5b9a\u56de\u6570\u5206\u3001\u30e9\u30d9\u30eb\u306b\u5236\u5fa1\u3092\u30b8\u30e3\u30f3\u30d7\u3055\u305b\u307e\u3059\u3002\n\n\u305d\u3057\u3066\u3053\u306e\u300c\u6307\u5b9a\u56de\u6570\u300d\u3092\u6307\u793a\u3059\u308b\u306b\u306f\u30ec\u30b8\u30b9\u30bf\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n`rcx`\u30ec\u30b8\u30b9\u30bf\u304c\u305d\u306e\u5f79\u5272\u3092\u6301\u3061\u307e\u3059\u3002`c`\u306f\u30ab\u30a6\u30f3\u30c8\u306ec\u3067\u3059\u3002\n\n```asm\nmov rcx, 5\nmov rax, 0\nmov rbx, 3\n\nLOOPLABEL:\nadd rax, rbx\n\nloop LOOPLABEL\n```\n\n\u306a\u3069\u3068\u3059\u308b\u3068\u3001`rax`\u306b`rbx`\u306e`3`\u30925\u56de\u8db3\u3059\u3001\u3068\u3044\u3046\u51e6\u7406\u306b\u306a\u308a\u307e\u3059\u3002\n\n### `DWORD PTR`\n\n\u30a2\u30bb\u30f3\u30d6\u30e9\u306e\u30b3\u30fc\u30c9\u3092\u898b\u3066\u3044\u308b\u3068\u898b\u304b\u3051\u308b\u3053\u306e `DWORD PTR` \u3002\n\u3053\u308c\u306f\u5bfe\u8c61\u306e\u5024\uff08\u3084\u30ec\u30b8\u30b9\u30bf\uff09\u3092\u4f55\u30d0\u30a4\u30c8\u3068\u3057\u3066\u6271\u3046\u304b\u3001\u3068\u3044\u3046\u3053\u3068\u3092\u4fee\u98fe\u3059\u308b\u3082\u306e\u306e\u3088\u3046\u3067\u3059\u3002\n\n- DWORD\u306f4\u30d0\u30a4\u30c8\n- WORD\u306f2\u30d0\u30a4\u30c8\n- BYTE\u306f1\u30d0\u30a4\u30c8\n\n\u3092\u610f\u5473\u3059\u308b\u4fee\u98fe\u5b50\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u30ec\u30b8\u30b9\u30bf\u306f\u4f55\u30d0\u30a4\u30c8\uff08\u4f55\u30d3\u30c3\u30c8\uff09\u306a\u306e\u304b\u3092\u660e\u793a\u3057\u306a\u3044\u3068\u306a\u3089\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n\u305d\u306e\u305f\u3081\u3001\u4f8b\u3048\u3070\u5373\u5024\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u4f55\u30d0\u30a4\u30c8\u306e\u30c7\u30fc\u30bf\u306a\u306e\u304b\u3092\u660e\u793a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u3053\u3046\u3057\u305f\u3001\u4f55\u30d0\u30a4\u30c8\u306e\u30c7\u30fc\u30bf\u304b\u3001\u3092\u660e\u793a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u308b\u306e\u304c\u4e0a\u8a18\u306e\u4fee\u98fe\u5b50\u3067\u3059\u3002\n\n```asm\nmov [AFLAG], BYTE PTR 1\n```\n\n\u3068\u3044\u3046\u7406\u89e3\u3067\u3042\u3063\u3066\u308b\u304b\u306a\uff1f( ;\u00b4\u0414`)\n\n\n### \u305d\u306e\u4ed6\n\n| \u30cb\u30fc\u30e2\u30cb\u30c3\u30af | \u610f\u5473 | \u6a5f\u80fd |\n|:----------|:-------|:----|\n| LD | LoaD | \u30e1\u30e2\u30ea\u30fc\u304b\u3089CPU\u3078\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u3080 |\n| ST | STore | CPU\u304b\u3089\u30e1\u30e2\u30ea\u30fc\u306b\u30c7\u30fc\u30bf\u3092\u66f8\u304d\u51fa\u3059 |\n| LAD | Load ADdress | CPU\u306e\u30ec\u30b8\u30b9\u30bf\u306b\u5024\u3092\u8a2d\u5b9a\u3059\u308b |\n| PUSH | PUSH | \u30b9\u30bf\u30c3\u30af\u306b\u30c7\u30fc\u30bf\u3092\u66f8\u304d\u51fa\u3059 |\n| POP | POP | \u30b9\u30bf\u30c3\u30af\u304b\u3089\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u3080 |\n| SVC | SuperVisor Call | I/O\u3068\u306e\u5165\u51fa\u529b\u3092\u884c\u3046 |\n\n-------------------------------------------\n\n\n## \u30e1\u30e2\n\n\u3068\u308a\u3042\u3048\u305a\u3001\u5fd8\u308c\u305d\u3046\u306a\u3001\u305d\u3057\u3066\u3042\u3068\u3067\u4f7f\u3044\u305d\u3046\u306a\u3053\u3068\u3092\u3064\u3089\u3064\u3089\u3068\u30e1\u30e2\u3002\n\n### \u30ec\u30b8\u30b9\u30bf\n\n\u30ec\u30b8\u30b9\u30bf\u306f\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u3067\u8868\u793a\u3055\u308c\u307e\u3059\u3002\uff08`rax`\u3068\u304b\uff09\n\u3053\u308c\u304c\u306a\u306b\u3092\u610f\u5473\u3057\u3066\u3044\u308b\u306e\u304b\u3001\u7565\u79f0\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u5206\u304b\u308a\u3065\u3089\u3044\u3067\u3059\u306d\u3002\nWikipedia\u306b\u3088\u308b\u3068\u4ee5\u4e0b\u306e\u610f\u5473\u306e\u3088\u3046\u3002\n\n>## \u30d3\u30c3\u30c8\u306e\u62e1\u5f35\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u8cc7\u7523\u306e\u6709\u52b9\u6d3b\u7528\u3092\u76ee\u7684\u3068\u3057\u3066\u300116\u30d3\u30c3\u30c8\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u547d\u4ee4\u30bb\u30c3\u30c8\u3092\u305d\u306e\u307e\u307e\u52d5\u4f5c\u3067\u304d\u308b32\u30d3\u30c3\u30c8\u30d7\u30ed\u30bb\u30c3\u30b5\u306a\u3069\u304c\u3057\u3070\u3057\u3070\u958b\u767a\u3055\u308c\u308b\u3002\n\u3053\u306e\u5834\u5408\u3001\u30d7\u30ed\u30bb\u30c3\u30b5\u5185\u90e8\u306e\u30ec\u30b8\u30b9\u30bf\u306e\u30d3\u30c3\u30c8\u9577\u306f\u5927\u304d\u304f\uff08\u305f\u3044\u3066\u3044\u306e\u5834\u54082\u500d\u306b\uff09\u306a\u3063\u3066\u3044\u308b\u306e\u3060\u304c\u3001\u4e92\u63db\u6027\u3092\u4fdd\u3064\u305f\u3081\u306b\u53e4\u3044CPU\u306e\u547d\u4ee4\u30b3\u30fc\u30c9\u3067\u52d5\u4f5c\u3059\u308b\u5834\u5408\u306b\u306f\u4e0b\u4f4d\u306e\u30d3\u30c3\u30c8\u3057\u304b\u7528\u3044\u306a\u3044\u3002\n\u30a4\u30f3\u30c6\u30eb\u793e\u306e8086\u7cfb\u5217\u306eCPU\u306f\u3001\u3053\u306e\u3088\u3046\u306b\u62e1\u5f35\u3057\u3066\u304d\u305f\u7d4c\u7def\u3092\u6301\u3064\u4ee3\u8868\u7684\u306a\u30d7\u30ed\u30bb\u30c3\u30b5\u3067\u3042\u308b\u30028086CPU\u304c\u8a95\u751f\u3059\u308b\u524d\u306e\u30a4\u30f3\u30c6\u30eb\u306e8\u30d3\u30c3\u30c8CPU\u30018080\u3067\u306f\u6c4e\u7528\u30ec\u30b8\u30b9\u30bf\u3092\u201ca\u201d, \u201cb\u201d, \u201cc\u201d\u2026\u3068\u540d\u4ed8\u3051\u3066\u3044\u305f\u3002\u3053\u308c\u3092\u62e1\u5f35\u3057\u305f8086\u306e\u6c4e\u7528\u30ec\u30b8\u30b9\u30bf\u306f\u201cax\u201d, \u201cbx\u201d, \u201ccx\u201d\u2026\u3068\u306a\u3063\u305f\u3002\uff08x\u306fextend\u306e\u7565\uff09\u3068\u3053\u308d\u304c\u300180386\u306732\u30d3\u30c3\u30c8\u5316\u3057\u305f\u305f\u3081\u3001\u30ec\u30b8\u30b9\u30bf\u306e\u540d\u524d\u306f\u201ceax\u201d, \u201cebx\u201d\", \u201cecx\u201d\u2026\u3068\u306a\u3063\u305f\u3002\uff08e\u3082extend\u306e\u7565\uff09\u3055\u3089\u306b\u3001AMD\u793e\u304cAMD64\u306764\u30d3\u30c3\u30c8\u306b\u62e1\u5f35\u3057\u305f\u6642\u306b\u306f\u3001\u30ec\u30b8\u30b9\u30bf\u540d\u306f\u201crax\u201d, \u201crbx\u201d, \u201crcx\u201d\u2026\u3068\u306b\u306a\u3063\u305f\u3002\n\n\u3061\u306a\u307f\u306b`rax`\u3068\u304b\u306e`r`\u306f\u3001[Yahoo!\u77e5\u6075\u888b\u306e\u56de\u7b54](http://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q11116234946)\u3092\u898b\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u3002\n\n>\u6614\u306e A \u30ec\u30b8\u30b9\u30bf\uff08\u30a2\u30ad\u30e5\u30fc\u30e0\u30ec\u30fc\u30bf\uff09\u3001\u3053\u308c\u306f\uff18\u30d3\u30c3\u30c8\u3002\u305d\u3053\u304b\u3089\u3001AX \u30ec\u30b8\u30b9\u30bf\u3068\u3057\u3066\uff11\uff16\u30d3\u30c3\u30c8\u306b\u306a\u308a\u3001EAX \u3067\uff13\uff12\u30d3\u30c3\u30c8\u3002\u305d\u3057\u3066x64 \u3067\u306f RAX \u3068\u3057\u3066\uff16\uff14\u30d3\u30c3\u30c8\u3068\u3001\u968f\u5206\u3068\u9032\u5316\u3057\u305f\u3082\u306e\u3067\u3059\u306d\u3002\u305d\u308c\u3067\u30ec\u30b8\u30b9\u30bf\u306e\u540d\u524d\u304c 'Register' \u306b\u7531\u6765\u3059\u308b 'R' \u3068\u3002\u4f55\u304b\u611f\u6168\u6df1\u3044\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u307e\u305f\u3001`a`\u3001`b`\u3001`c`\u3068\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u306e\u9023\u7d9a\u306b\u306a\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u304c\u3001\u3069\u3046\u3084\u3089\u305d\u308c\u305e\u308c\u3061\u3083\u3093\u3068\u610f\u5473\u306e\u3042\u308b\u5358\u8a9e\u306e\u982d\u6587\u5b57\u306e\u3088\u3046\u3002\n\n\n#### \u6c4e\u7528\u30ec\u30b8\u30b9\u30bf\n\n- AX\t\u30a2\u30ad\u30e5\u30e0\u30ec\u30fc\u30bf\n- BX\t\u30d9\u30fc\u30b9\u30ec\u30b8\u30b9\u30bf\n- CX\t\u30ab\u30a6\u30f3\u30c8\u30ec\u30b8\u30b9\u30bf\n- DX\t\u30c7\u30fc\u30bf\u30ec\u30b8\u30b9\u30bf\n\n#### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30ec\u30b8\u30b9\u30bf\n\n- SI\t\u30bd\u30fc\u30b9\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\n- DI\t\u30c7\u30a3\u30b9\u30c6\u30a3\u30cd\u30fc\u30b7\u30e7\u30f3\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\n\n#### \u7279\u6b8a\u30ec\u30b8\u30b9\u30bf\n\n- BP\t\u30d9\u30fc\u30b9\u30dd\u30a4\u30f3\u30bf\n- SP\t\u30b9\u30bf\u30c3\u30af\u30dd\u30a4\u30f3\u30bf\n- IP\t\u30a4\u30f3\u30b9\u30c8\u30e9\u30af\u30b7\u30e7\u30f3\u30dd\u30a4\u30f3\u30bf\n\n#### \u30bb\u30b0\u30e1\u30f3\u30c8\u30ec\u30b8\u30b9\u30bf\n\n- CS\t\u30b3\u30fc\u30c9\u30bb\u30b0\u30e1\u30f3\u30c8\n- DS\t\u30c7\u30fc\u30bf\u30bb\u30b0\u30e1\u30f3\u30c8\n- ES\t\u30a8\u30af\u30b9\u30c8\u30e9\u30bb\u30b0\u30e1\u30f3\u30c8\n- SS\t\u30b9\u30bf\u30c3\u30af\u30bb\u30b0\u30e1\u30f3\u30c8\n\n-------------------------------------------\n\n### `0x90`\n\n\u3069\u3046\u3084\u3089\u30a2\u30bb\u30f3\u30d6\u30e9\u3067\u306f\u300c\u7a7a\u300d\u3092\u610f\u5473\u3059\u308b\u3082\u306e\u3089\u3057\u3044\u3002\n`.align 4, 0x90`\u3068\u304b\u51fa\u3066\u304f\u308b\u3068\u3053\u308d\u304c\u3042\u308b\u3051\u3069\u3001\u304a\u305d\u3089\u304f4\u30d0\u30a4\u30c8\u5883\u754c\u306b\u30a2\u30e9\u30a4\u30e1\u30f3\u30c8\u3057\u3066\u3001\u7a7a\u3067\u57cb\u3081\u308b\u3001\u7684\u306a\u3053\u3068\uff1f\n\n### \u95a2\u6570\n\n**\u5f15\u6570**\n\nx86_64\u3067\u306f6\u500b\u304f\u3089\u3044\u307e\u3067\u306f\u30ec\u30b8\u30b9\u30bf\u3067\u6e21\u3059\u307f\u305f\u3044\u3002\n\u305d\u308c\u4ee5\u4e0a\u306e\u5834\u5408\u306f\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u3093\u3067\u6e21\u3059\u3089\u3057\u3044\u3002\n\uff08x86\u306e32bit\u3067\u306f\u30ec\u30b8\u30b9\u30bf\u304c\u5c11\u306a\u3044\u304b\u3089\u3088\u308a\u591a\u304f\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u3093\u3067\u5f15\u6570\u3068\u3057\u3066\u6e21\u3059\u3089\u3057\u3044\uff09\n\n**\u623b\u308a\u5024**\n\n\u95a2\u6570\u306e\u623b\u308a\u5024\u306f`rax`\u306b\u5165\u308c\u3066\u8fd4\u3059\u3001\u3068\u3044\u3046\u3053\u3068\u306e\u3088\u3046\u3002\n\n### \u30a2\u30c9\u30ec\u30b9\u30a2\u30af\u30bb\u30b9\n\n\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u3066\u30c7\u30fc\u30bf\u3092\u79fb\u52d5\u3057\u305f\u308a\u3059\u308b\u5834\u5408\u306f`[]`\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n```asm\nmov al, [esi]\n```\n\n`al`\u30ec\u30b8\u30b9\u30bf\u306b`esi`\u30ec\u30b8\u30b9\u30bf\u304c\u4fdd\u6301\u3057\u3066\u3044\u308b\u30a2\u30c9\u30ec\u30b9\u306e\u60c5\u5831\u3092\u79fb\u52d5\u3059\u308b\u3001\u3068\u3044\u3046\u547d\u4ee4\u3067\u3059\u3002\n\n\n### \u30a2\u30c9\u30ec\u30b9\u64cd\u4f5c\n\nC\u8a00\u8a9e\u306e\u30dd\u30a4\u30f3\u30bf\u3068\u4f3c\u305f\u3088\u3046\u306a\u611f\u3058\u3067\u30a2\u30c9\u30ec\u30b9\u3092\u64cd\u4f5c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\n```asm\nmov al, [esi]\nmov [edi], al\nadd edi, 1\nadd esi, 1\n```\n\n`al`\u306b`esi`\u304c\u4fdd\u6301\u3057\u3066\u3044\u308b\u30a2\u30c9\u30ec\u30b9\u306e\u30c7\u30fc\u30bf\u3092\u79fb\u52d5\u3057\u3001\u6b21\u306b`edi`\u304c\u4fdd\u6301\u3057\u3066\u3044\u308b\u30a2\u30c9\u30ec\u30b9\u306b`al`\u3092\u66f8\u304d\u8fbc\u3093\u3067\u3044\u307e\u3059\u3002\n\u305d\u3057\u3066`edi`\u3001`esi`\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u3072\u3068\u3064\u9032\u3081\u308b\u610f\u5473\u3067`add edi, 1`\u3068\u3044\u3046\u3088\u3046\u306b\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002\n\n### \u30b9\u30bf\u30c3\u30af\n\n\u30b9\u30bf\u30c3\u30af\u306f\u3001\u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\u3067\u6709\u540d\u306a\u30b9\u30bf\u30c3\u30af\u3067\u3059\uff57\n\u30a2\u30bb\u30f3\u30d6\u30e9\u3067\u306f\u3001\u30b9\u30bf\u30c3\u30af\u7528\u306b\u9818\u57df\u304c\u78ba\u4fdd\u3055\u308c\u3001\u305d\u306e\u5148\u982d\u30a2\u30c9\u30ec\u30b9\u304c\u30b9\u30bf\u30c3\u30af\u7528\u30ec\u30b8\u30b9\u30bf\u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\n\uff08\u30b9\u30bf\u30c3\u30af\u7528\u306e\u30ec\u30b8\u30b9\u30bf\u306f`rsp`\uff08\u30b9\u30bf\u30c3\u30af\u30dd\u30a4\u30f3\u30bf\uff09\u304c\u5229\u7528\u3055\u308c\u308b\uff09\n\n\u305d\u3057\u3066\u30b9\u30bf\u30c3\u30af\u306f\u3001\u5404\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u3054\u3068\u306b\u6c7a\u307e\u3063\u305f\u5bb9\u91cf\u3060\u3051\u78ba\u4fdd\u3055\u308c\u307e\u3059\u3002\n\u3053\u308c\u304c\u5927\u4e8b\u306a\u30dd\u30a4\u30f3\u30c8\u3067\u3001\u300c\u6c7a\u307e\u3063\u305f\u5bb9\u91cf\u300d\u3057\u304b\u306a\u3044\u306b\u3082\u304b\u304b\u308f\u3089\u305a\u3001CPU\u306f\u3069\u308c\u3060\u3051\u30b9\u30bf\u30c3\u30af\u9818\u57df\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u308b\u304b\u77e5\u308a\u307e\u305b\u3093\u3002\n\n\u306a\u306e\u3067\u547d\u4ee4\u3055\u308c\u305f\u3060\u3051\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u307f\u4e0a\u3052\u3066\u3044\u304d\u3001\u305d\u308c\u304c\u4e00\u5b9a\u5024\u3092\u8d85\u3048\u308b\u3068\u300c\u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\u300d\u304c\u767a\u751f\u3057\u307e\u3059\u3002\n\n\u3061\u306a\u307f\u306b\u30b9\u30bf\u30c3\u30af\u30dd\u30a4\u30f3\u30bf\u306e\u5229\u7528\u65b9\u6cd5\u306f\u3001\u95a2\u6570\u304c\u547c\u3070\u308c\u308b\u305f\u3073\u306b\u30b9\u30bf\u30c3\u30af\u306b\u5f15\u6570\u3084\u3001\u623b\u308a\u5148\u30a2\u30c9\u30ec\u30b9\u306a\u3069\u304c\u3069\u3093\u3069\u3093\u3068push\u3055\u308c\u3066\u3044\u304d\u307e\u3059\u3002\n\u305d\u3057\u3066\u95a2\u6570\u306e\u30ea\u30bf\u30fc\u30f3\u6642\u306b\u3001\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u307e\u308c\u305f\u60c5\u5831\u3092\u5143\u306b\u51e6\u7406\u3059\u308b\u4f4d\u7f6e\u3092\u79fb\u52d5\u3059\u308b\u3001\u3068\u3044\u3046\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\n[\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0 - \u95a2\u6570\u306b\u6e21\u3055\u308c\u308b\u5f15\u6570\u3092\u77e5\u308b | Web/DB \u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u5fb9\u5e95\u89e3\u8aac](http://keicode.com/debug/dbg205.php)\u306b\u30b9\u30bf\u30c3\u30af\u306e\u72b6\u614b\u306e\u8a71\u304c\u8f09\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n\n\u305d\u308c\u3092\u8aad\u3093\u3067\u306e\u7406\u89e3\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u3067\u3059\u3002\n\n1. \u95a2\u6570\u547c\u3073\u51fa\u3057\u6642\u3001\u5f15\u6570\u306f\u53f3\u304b\u3089\u5de6\u306b\u5411\u304b\u3063\u3066\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u307e\u308c\u308b\n2. `rbp`\u30ec\u30b8\u30b9\u30bf\u306e\u5185\u5bb9\u3092\u30b9\u30bf\u30c3\u30af\u306bPUSH\u3059\u308b\uff08\u3053\u308c\u306f\u306a\u3093\u3067\u304b\u307e\u3060\u5206\u304b\u308a\u307e\u305b\u3093\uff1b\uff09\n3. \u30ed\u30fc\u30ab\u30eb\u5909\u6570\uff08\u81ea\u52d5\u5909\u6570\uff09\u304c\u3042\u308b\u5834\u5408\u306f\u3055\u3089\u306b\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u3080\n\n\u3068\u3044\u3046\u6d41\u308c\u306b\u306a\u308a\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306aC\u30b3\u30fc\u30c9\u304c\u3042\u3063\u305f\u3068\u3057\u3066\u3001\n\n```c\nint add(int a, int b) {\n\tint c = a + b;\n\treturn c;\n}\n```\n\n`int b`\u3001`int a`\u306e\u9806\u306b\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u307e\u308c\u3001`rbp`\u306e\u5024\u304c\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u307e\u308c\u3001\u6700\u5f8c\u306b`int c`\u306e\u5909\u6570\u304c\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u307e\u308c\u307e\u3059\u3002\n*\uff08`rbp`\u306f\u95a2\u6570\u958b\u59cb\u6642\u306e\u30b9\u30bf\u30c3\u30af\u30dd\u30a4\u30f3\u30bf\u306e\u4f4d\u7f6e\uff09*\n\n\u56f3\u306b\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\n0x00000h  +----> +           +\n                 |           |\n                 |           |\n                 +-----------+\n                 |   int c   |\n                 +-----------+\n                 |    rbp    |\n                 +-----------+\n                 |   int a   |\n                 +-----------+\n                 |   int b   |\n                 +-----------+\n```\n\n\u306a\u304a\u3001\u30b9\u30bf\u30c3\u30af\u306f\u5927\u304d\u3044\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u5c0f\u3055\u3044\u30a2\u30c9\u30ec\u30b9\u306b\u5411\u304b\u3063\u3066\u4f38\u3073\u3066\u3044\u304d\u307e\u3059\u3002\n\u306a\u306e\u3067\u3001`rbp`\u3088\u308a\u30de\u30a4\u30ca\u30b9\u65b9\u5411\uff08\u3064\u307e\u308a\u5c0f\u3055\u3044\u65b9\u5411\uff09\u306b\u3042\u308b\u30b9\u30bf\u30c3\u30af\u306f\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3001\u9006\u306b\u30d7\u30e9\u30b9\u65b9\u5411\uff08\u3064\u307e\u308a\u5927\u304d\u3044\u65b9\u5411\uff09\u306b\u3042\u308b\u30b9\u30bf\u30c3\u30af\u306f\u5f15\u6570\u3001\u3068\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u3061\u306a\u307f\u306b\u3001\u3053\u308c\u306fx86\u306e\u4ed5\u69d8\u3067\u3001x64\u3067\u306f\u30ec\u30b8\u30b9\u30bf\u6570\u304c\u5897\u3048\u305f\u305f\u3081\uff08\uff1f\uff09\u3001\u5f15\u6570\u3092\u7121\u7406\u306b\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u3080\u306e\u3067\u306f\u306a\u304f\u3001\u3044\u304f\u3064\u304b\u306e\u30ec\u30b8\u30b9\u30bf\u306b\u76f4\u306b\u4fdd\u6301\u3055\u308c\u3066\u95a2\u6570\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u4e0b\u8a18\u306b\u8a18\u8f09\u3057\u3066\u3044\u308b\u300c\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306b\u4f7f\u308f\u308c\u308b\u30ec\u30b8\u30b9\u30bf\u300d\u306e\u3068\u3053\u308d\u3067\u3001\u3069\u306e\u30ec\u30b8\u30b9\u30bf\u304c\u4f7f\u308f\u308c\u308b\u306e\u304b\u3092\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u305d\u3061\u3089\u3082\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\n\n\n\n### \u547c\u3073\u51fa\u3057\u898f\u7d04\n\n\u30a2\u30bb\u30f3\u30d6\u30e9\u306b\u306f\u547c\u3073\u51fa\u3057\u898f\u7d04\u3068\u3044\u3046\u3082\u306e\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\u3064\u307e\u308a\u3001\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u6642\u306b\u3001\u547c\u3073\u51fa\u3057\u5143\u3068\u547c\u3073\u51fa\u3057\u5148\u3067\u305d\u308c\u305e\u308c\u3084\u3089\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u51e6\u7406\u304c\u6c7a\u307e\u3063\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n\u3053\u308c\u3092\u5b88\u3089\u306a\u3044\u3068\u7834\u58ca\u3057\u3066\u306f\u3044\u3051\u306a\u3044\u30ec\u30b8\u30b9\u30bf\u306e\u5185\u5bb9\u3092\u7834\u58ca\u3057\u305f\u308a\u3001\u3068\u3044\u3063\u305f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\uff08\u3068\u3044\u3046\u8a8d\u8b58\u3067\u3042\u3063\u3066\u308b\u304b\u306a\uff1f\uff09\n\n\uff08\u3061\u306a\u307f\u306b\u3069\u3046\u3084\u3089\u3053\u306e\u898f\u7d04\u3092 **ABI\uff08Application Binary Interface\uff09** \u3068\u547c\u3076\u3088\u3046\u3067\u3059\uff09\n\n[\u3053\u3061\u3089\u306e\u8a18\u4e8b](http://labs.cybozu.co.jp/blog/mitsunari/2007/10/x863_1.html)\u304b\u3089\u5f15\u7528\u3055\u305b\u3066\u3082\u3089\u3044\u307e\u3059\u3002\n\n>### \u547c\u3073\u51fa\u3059\u5074\u306e\u898f\u7d04\n>\n\u6b21\u306b\u4e0a\u8a18\u898f\u7d04\u3092\u6e80\u305f\u3059\u95a2\u6570(func)\u304c\u3042\u3063\u305f\u3068\u304d\u306b\uff0cfunc\u3092asm\u304b\u3089\u547c\u3073\u51fa\u3059\u624b\u7d9a\u304d\u306b\u3064\u3044\u3066\u8ff0\u3079\u307e\u3059\uff0easm\u3067\u306f\u6b21\u306e\u898f\u7d04\u306b\u5f93\u3063\u3066\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3066\u304f\u3060\u3055\u3044\uff0e\n>\n- func\u306e\u5f15\u6570\u3092\u53f3\u5074\u304b\u3089push\u3059\u308b\uff0e\n- call func\u3059\u308b(Xbyak\u3067\u306fcall(int(func));)\uff0e\n- \u5f15\u6570\u306e\u6570 x 4\u3060\u3051esp\u3092\u5927\u304d\u304f\u3059\u308b\uff0e\n- \u95a2\u6570\u306e\u8fd4\u308a\u5024\u306feax\u306b\u5165\u3063\u3066\u3044\u308b\uff0evoid\u578b\u306e\u5834\u5408\u306feax\u306e\u5024\u306f\u4e0d\u5b9a\uff0e\n\u305f\u3068\u3048\u3070\n>\n```asm\nint func0(int a, char *b, double *c);\n```\n>\n\u306e\u5834\u5408\u306f\n>\n```asm\npush(\u30dd\u30a4\u30f3\u30bfc\u306e\u5024);\npush(\u30dd\u30a4\u30f3\u30bfb\u306e\u5024);\npush(a\u306e\u5024);\ncall(int(func0));\nadd(esp, 3 * 4); /* \u5f15\u6570\u304c3\u500b\u306a\u306e\u30673 * 4 */\n```\n>\n\u3068\u3057\u307e\u3059\uff0e\u5f15\u6570\u304c\u306a\u3051\u308c\u3070push\u3068add\u306f\u7701\u7565\u3067\u304d\u307e\u3059\uff0e\u305f\u3068\u3048\u3070\n>\n```asm\nvoid func();\n```\n>\n\u306e\u5834\u5408\u306f\n>\n```asm\ncall(int(func));\n```\n>\n\u3068\u306a\u308a\u307e\u3059\n\n-------------------------------------------\n\n>### \u547c\u3073\u51fa\u3055\u308c\u308b\u5074\u306e\u898f\u7d04\n>\nC\u304b\u3089\u547c\u3073\u51fa\u3055\u308c\u308b\u95a2\u6570\u306f\u6b21\u306e\u898f\u7d04\u306b\u5f93\u3063\u3066\u304f\u3060\u3055\u3044\uff0e\n>\n- \u8fd4\u308a\u5024\u306feax\u306b\u4ee3\u5165\u3059\u308b(\u8fd4\u308a\u5024\u304cvoid\u306a\u3089eax\u306e\u5024\u306f\u4e0d\u5b9a)\uff0e\n- \u6c4e\u7528\u30ec\u30b8\u30b9\u30bf\u306e\u3046\u3061ebx, esi, edi, ebp, esp\u306e\u5024\u306f\u95a2\u6570\u3092\u629c\u3051\u308b\u3068\u304d\u306b\u547c\u3073\u51fa\u3055\u308c\u305f\u3068\u304d\u306e\u72b6\u614b\u306b\u623b\u3059\uff0eecx, edx\u306e\u5024\u3092\u4fdd\u5b58\u3059\u308b\u5fc5\u8981\u306f\u306a\u3044\uff0e\n- ret();\u3067\u95a2\u6570\u304b\u3089\u623b\u308b\uff0e\n\u3053\u306e\u3068\u304d\uff0c\u95a2\u6570\u306e\u5f15\u6570\u306f\u300cesp + \u5de6\u304b\u3089\u5f15\u6570\u304c\u4f55\u756a\u76ee\u306b\u3042\u308b\u304b(1\u30aa\u30ea\u30b8\u30f3) * 4\u300d\u306e\u30a2\u30c9\u30ec\u30b9\u306b\u683c\u7d0d\u3055\u308c\u3066\u3044\u307e\u3059\uff0e\n\u95a2\u6570\u306e\u5f15\u6570\u306b\u3064\u3044\u3066\u3082\u3046\u5c11\u3057\u8a73\u3057\u304f\u8aac\u660e\u3057\u307e\u3059\uff0e\u4f8b\u3068\u3057\u3066func0()\u3092\u8003\u3048\u307e\u3057\u3087\u3046\uff0e\n>\nfunc0\u306e\u547c\u3073\u51fa\u3057\u624b\u7d9a\u304d\u306b\u5f93\u3063\u3066func0\u304c\u547c\u3070\u308c\u305f\u3068\u304d\u306e\u30b9\u30bf\u30c3\u30af\u306e\u72b6\u6cc1\u3092\u8003\u3048\u307e\u3059\uff0ec, b, a\u3068\u9806\u306bpush\u3055\u308c\u305f\u306e\u3067\u30b9\u30bf\u30c3\u30af\u306b\u306f\u5927\u304d\u3044\u65b9\u304b\u3089\u5c0f\u3055\u3044\u65b9\u3078c, b, a\u3068\u4e26\u3093\u3067\u3044\u308b\u306f\u305a\u3067\u3059\uff0e\u3068\u3044\u3046\u3053\u3068\u306f\n>\n```asm\nesp + 8 : c\nesp + 4 : b\nesp + 0 : a\n```\n>\u306a\u306e\u3067\u3057\u3087\u3046\u304b\uff0e\u5b9f\u306f\u3061\u3087\u3063\u3068\u9055\u3044\u307e\u3057\u3066\uff0ccall\u3092\u5b9f\u884c\u3057\u305f\u3068\u304d\uff0c\u3053\u3063\u305d\u308a\u3068\u5b9f\u884c\u3057\u3066\u3044\u305f\u547d\u4ee4\u306e\u6b21\u306e\u547d\u4ee4\u306e\u5148\u982d\u30a2\u30c9\u30ec\u30b9\u304c\u30b9\u30bf\u30c3\u30af\u306b\u683c\u7d0d\u3055\u308c\u3066\u3044\u307e\u3059\uff0e\u3064\u307e\u308a\u6b63\u89e3\u306f\n>\n```asm\nesp + 12: c\nesp + 8 : b\nesp + 4 : a\nesp + 0 : \u6b21\u306e\u547d\u4ee4\u306e\u30a2\u30c9\u30ec\u30b9\n```\n\n### \u547c\u3073\u51fa\u3057\u898f\u7d042\n\n\u306a\u304a\u3001[\u3053\u3061\u3089\u306e\u8a18\u4e8b](http://www.isus.jp/article/introduction-to-x64-assembly/)\u3092\u5f15\u7528\u3055\u305b\u3066\u3082\u3089\u3046\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u898f\u5247\u3082\u3042\u308b\u307f\u305f\u3044\u3002\n\uff08\u3053\u3063\u3061\u306fx64\u306e\u898f\u7d04\u304b\u306a\uff1f\uff09\n\n>\n- RCX\u3001RDX\u3001R8\u3001R9 \u306f\u3001\u5de6\u304b\u3089\u53f3\u306b\u3053\u306e\u9806\u5e8f\u3067\u6574\u6570\u304a\u3088\u3073\u30dd\u30a4\u30f3\u30bf\u30fc\u5f15\u6570\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\n- XMM0\u30011\u30012\u3001\u304a\u3088\u3073 3 \u306f\u6d6e\u52d5\u5c0f\u6570\u70b9\u5f15\u6570\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\n- \u8ffd\u52a0\u306e\u5f15\u6570\u306f\u3001\u5de6\u304b\u3089\u53f3\u3078\u30b9\u30bf\u30c3\u30af\u306b\u30d7\u30c3\u30b7\u30e5\u3055\u308c\u307e\u3059\u3002\n- \u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306e\u9577\u3055\u304c 64 \u30d3\u30c3\u30c8\u672a\u6e80\u306e\u5834\u5408\u3001\u30bc\u30ed\u62e1\u5f35\u3055\u308c\u305a\u3001\u4e0a\u4f4d\u30d3\u30c3\u30c8\u306f\u4e0d\u5b9a\u3067\u3059\u3002\n- \u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u524d\u306b\u3001\u547c\u3073\u51fa\u3057\u5143\u3067 (\u5fc5\u8981\u306b\u5fdc\u3058\u3066 RCX\u3001RDX\u3001R8\u3001\u304a\u3088\u3073 R9 \u3092\u683c\u7d0d\u3059\u308b\u305f\u3081\u306e) 32 \u30d0\u30a4\u30c8\u306e \u201c\u30b7\u30e3\u30c9\u30a6\u9818\u57df\u201d \u3092\u5272\u308a\u5f53\u3066\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\n- \u547c\u3073\u51fa\u3057\u5f8c\u306b\u3001\u547c\u3073\u51fa\u3057\u5143\u3067\u30b9\u30bf\u30c3\u30af\u3092\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\n- (x86 \u3068\u540c\u3058\u3088\u3046\u306b) \u6574\u6570\u578b\u306e\u623b\u308a\u5024\u306f\u300164 \u30d3\u30c3\u30c8\u4ee5\u4e0b\u306e\u5834\u5408\u306f RAX \u306b\u683c\u7d0d\u3055\u308c\u8fd4\u3055\u308c\u307e\u3059\u3002\n- \u6d6e\u52d5\u5c0f\u6570\u70b9\u578b\u306e\u623b\u308a\u5024\u306f\u3001XMM0 \u306b\u683c\u7d0d\u3055\u308c\u8fd4\u3055\u308c\u307e\u3059\u3002\n- \u30b5\u30a4\u30ba\u306e\u5927\u304d\u306a\u623b\u308a\u5024 (\u69cb\u9020\u4f53\u306a\u3069) \u306f\u3001\u547c\u3073\u51fa\u3057\u5143\u306b\u3088\u308a\u30b9\u30bf\u30c3\u30af\u306b\u9818\u57df\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3001\u547c\u3073\u51fa\u3057\u5148\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u3068\u304d\u306b\u30ea\u30bf\u30fc\u30f3\u9818\u57df\u3078\u306e\u30dd\u30a4\u30f3\u30bf\u30fc\u304c RCX \u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\u305d\u3057\u3066\u3001\u6574\u6570\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3067\u4f7f\u7528\u3055\u308c\u308b\u30ec\u30b8\u30b9\u30bf\u30fc\u306f\u53f3\u306b 1 \u3064\u30d7\u30c3\u30b7\u30e5\u3055\u308c\u307e\u3059\u3002RAX \u306f\u3053\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u547c\u3073\u51fa\u3057\u5143\u306b\u8fd4\u3057\u307e\u3059\u3002\n- \u30b9\u30bf\u30c3\u30af\u306f 16 \u30d0\u30a4\u30c8\u3067\u30a2\u30e9\u30a4\u30e1\u30f3\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u201dcall\u201d \u547d\u4ee4\u306f 8 \u30d0\u30a4\u30c8\u306e\u623b\u308a\u5024\u3092\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u305f\u3081\u3001\u30ea\u30fc\u30d5\u3067\u306a\u3044\u95a2\u6570\u306f\u30b9\u30bf\u30c3\u30af\u9818\u57df\u3092\u5272\u308a\u5f53\u3066\u308b\u969b\u306b\u3001\u5024\u3092 16n+8 \u5f62\u5f0f\u3067\u6307\u5b9a\u3057\u3066\u30b9\u30bf\u30c3\u30af\u3092\u8abf\u6574\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n- RAX\u3001RCX\u3001RDX\u3001R8\u3001R9\u3001R10\u3001\u304a\u3088\u3073 R11 \u30ec\u30b8\u30b9\u30bf\u30fc\u306f\u4e0d\u5b9a\u3067\u3001\u95a2\u6570\u547c\u3073\u51fa\u3057\u6642\u306b\u7834\u68c4\u3055\u308c\u308b\u3068\u8003\u3048\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\n- RBX\u3001RBP\u3001RDI\u3001RSI\u3001R12\u3001R13\u3001R14\u3001\u304a\u3088\u3073 R15 \u306f\u3001\u3053\u308c\u3089\u3092\u4f7f\u7528\u3059\u308b\u95a2\u6570\u3067\u4fdd\u5b58\u3055\u308c\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\n- \u6d6e\u52d5\u5c0f\u6570\u70b9 (\u3064\u307e\u308a MMX) \u30ec\u30b8\u30b9\u30bf\u30fc\u306e\u547c\u3073\u51fa\u3057\u898f\u7d04\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n- \u8a73\u7d30 (\u53ef\u5909\u500b\u5f15\u6570\u3001\u4f8b\u5916\u51e6\u7406\u3001\u30b9\u30bf\u30c3\u30af\u306e\u5dfb\u304d\u623b\u3057\u306a\u3069) \u306f\u3001Microsoft* \u306e\u30b5\u30a4\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n### \u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\n\n`.`\u304b\u3089\u59cb\u307e\u308b\u547d\u4ee4\u3092\u300c\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u300d\u3068\u547c\u3073\u307e\u3059\u3002\n\uff08`.section`\u306a\u3069\u3002\u305f\u3060\u3057\u3053\u308c\u306fAT&T\u69cb\u6587\uff09\n\n### \u30a4\u30f3\u30b9\u30c8\u30e9\u30af\u30b7\u30e7\u30f3\n\n\u3044\u308f\u3086\u308b\u547d\u4ee4\u306e\u3053\u3068\u304b\u306a\uff1f\n\n#### ****q\n\n`pushq`\u306a\u3069\u306e`q`\u306f64bit\u3092\u8868\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n`pushq`\u3084`popq`\u3001`movq`\u306a\u306964bit\u3067\u306e\u51e6\u7406\u3092\u3059\u308b\u5834\u5408\u306f`q`\u3092\u4ed8\u3051\u307e\u3059\u3002\n\n#### ****l\n\n`movl`\u306a\u3069\u306e`l`\u304c\u4ed8\u304f\u306e\u306f32bit\u306e\u51e6\u7406\u3092\u3059\u308b\u547d\u4ee4\u3067\u3059\u3002\n\n#### \u305d\u306e\u4ed6\u5927\u4e8b\u305d\u3046\u306a\u547d\u4ee4\n\n[\u3053\u3061\u3089\u306e\u8a18\u4e8b](http://hsk.github.io/x86_64/)\u306e\u5f15\u7528\u3067\u3059\u3002\n\n>5.1.3.6. call\n>\n\u3000call a \u306f\u95a2\u6570\u547c\u3073\u51fa\u3057\u306e\u547d\u4ee4\u3067\u3059\u3002\u30e9\u30d9\u30eba\u306e\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\u5177\u4f53\u7684\u306a\u52d5\u4f5c\u306fcall\u306e\u6b21\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u30b9\u30bf\u30c3\u30af\u306b\u7a4d\u3093\u3067\u30e9\u30d9\u30eba\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n>5.1.3.7. leave\n>\n\u3000leave\u306f\u3001\u95a2\u6570\u7d42\u4e86\u51e6\u7406\u306e\u547d\u4ee4\u3067\u3059\u3002%rbp \u3092 %rsp\u306b\u79fb\u52d5\u3057\u3001\u30b9\u30bf\u30c3\u30af\u304b\u3089%rbp\u306b\u5024\u3092\u53d6\u308a\u51fa\u3057\u307e\u3059\u3002\n\n\n#### \u30a2\u30c9\u30ec\u30b9\u30aa\u30da\u30e9\u30f3\u30c9\u306e\u6587\u6cd5\n\nAT&T\u8a18\u6cd5\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n*\uff08[X86\u30a2\u30bb\u30f3\u30d6\u30e9/GAS\u3067\u306e\u6587\u6cd5](http://ja.wikibooks.org/wiki/X86\u30a2\u30bb\u30f3\u30d6\u30e9/GAS\u3067\u306e\u6587\u6cd5)\u3092\u5f15\u7528\u3055\u305b\u3066\u3082\u3089\u3044\u307e\u3057\u305f\uff09*\n\n```asm\nmovl    -4(%ebp, %edx, 4), %eax  # \u5b8c\u5168\u306a\u4f8b: (ebp - 4 + (edx * 4))\u306e\u30a2\u30c9\u30ec\u30b9\u306e\u5185\u5bb9\u3092eax\u306b\u8ee2\u9001\u3059\u308b\nmovl    -4(%ebp), %eax           # \u3088\u304f\u3042\u308b\u4f8b: \u30b9\u30bf\u30c3\u30af\u306e\u5024\u3092eax\u306b\u8ee2\u9001\u3059\u308b\nmovl    (%ecx), %edx             # \u30aa\u30d5\u30bb\u30c3\u30c8\u306e\u306a\u3044\u5834\u5408: \u30dd\u30a4\u30f3\u30bf\u306e\u6307\u3059\u5185\u5bb9\u3092\u30ec\u30b8\u30b9\u30bf\u306b\u8ee2\u9001\u3059\u308b\nleal    8(,%eax,4), %eax         # \u7b97\u8853\u6f14\u7b97\u306e\u4f8b: eax\u306b4\u3092\u639b\u30518\u3092\u8db3\u3057\u305f\u30a2\u30c9\u30ec\u30b9\u3092eax\u306b\u683c\u7d0d\u3059\u308b\nleal    (%eax,%eax,2), %eax      # \u7b97\u8853\u6f14\u7b97\u306e\u4f8b: eax\u306e\u6307\u3059\u5024\u30923\u500d\u3057\u305f\u30a2\u30c9\u30ec\u30b9\u3092eax\u306b\u683c\u7d0d\u3059\u308b\n```\n\n\u306a\u304a\u3001 **Intel\u69cb\u6587**\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```asm\n[ebp - 4 + (edx * 4)]\n```\n\n### `.len: equ $ - msg`\n\n\u306a\u3093\u304b\u305f\u307e\u306b\u898b\u304b\u3051\u308b\u3053\u3093\u306a\u611f\u3058\u306e\u3084\u3064\u3002\n\n[NASM Hello World Segmentation Fault - Stack overflow](http://stackoverflow.com/questions/17847215/nasm-hello-world-segmentation-fault)\u3067\u540c\u3058\u3053\u3068\u3092\u8cea\u554f\u3057\u3066\u3044\u308b\u4eba\u304c\u3044\u305f\u3002\n\n\u305d\u3053\u304b\u3089\u5f15\u7528\u3055\u305b\u3066\u3082\u3089\u3046\u3068\u3001\n\n>How does the statement `.len equ $-msg` work? I understand this is the length of the string. I also know that equ is like `#define` in C. So this variable does not exist in memory, it is put in place by the assembler. (nasm)\n\n\u3064\u307e\u308a\u3001`equ`\u306f`#define`\u7684\u306a\u52d5\u4f5c\u3092\u3059\u308b\u307f\u305f\u3044\u3002\n\u307e\u305f\u3001\n\n>`$` represents the address of the current line. So the following:\n\n\u3068\u3042\u308a\u3001`$`\u306f\u73fe\u5728\u306e\u884c\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u4fdd\u6301\u3059\u308b\u7279\u6b8a\u5909\u6570\u3089\u3057\u3044\u3002\n\u305d\u3057\u3066`- msg`\u306f\u3001`msg`\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u5f15\u304f\u3001\u3068\u3044\u3046\u3053\u3068\u306e\u3088\u3046\u3002\uff08\u666e\u901a\u306b\u30de\u30a4\u30ca\u30b9\u8a18\u53f7\u3068\u306f\u30fb\u30fb\uff09\n\n\u8aac\u660e\u3092\u5f15\u7528\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u610f\u5473\u307f\u305f\u3044\u3067\u3059\u3002\n\n>Means the current address minus the address of msg. That gives the length of the data stored between msg and .len (since the address of .len is represented by $). Thus, the symbol .len represents (equated to) that length value.\n\n\u3064\u307e\u308a\u3001\u73fe\u5728\u306e\u30a2\u30c9\u30ec\u30b9\u3067\u3042\u308b`$`\u304b\u3089\u76f4\u524d\u306e`msg`\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u5f15\u3044\u305f\u9577\u3055\u306f\u3001\u3064\u307e\u308b\u3068\u3053\u308d`msg`\u306e\u9577\u3055\u3060\u3088\u306d\u3001\u3063\u3066\u3053\u3068\u3067\u89e3\u91c8\u3042\u3063\u3066\u308b\u304b\u306a\uff1f\n\n## \u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306b\u4f7f\u308f\u308c\u308b\u30ec\u30b8\u30b9\u30bf\n\n[\u3053\u3061\u3089\u3092\u53c2\u8003](http://dustin.schultz.io/blog/2010/11/15/mac-os-x-64-bit-assembly-system-calls/)\u306b\u3057\u307e\u3057\u305f\u3002\n\n```\nThe number of the syscall has to be passed in register rax.\n    \nrdi - used to pass 1st argument to functions\nrsi - used to pass 2nd argument to functions\nrdx - used to pass 3rd argument to functions\nrcx - used to pass 4th argument to functions\nr8 - used to pass 5th argument to functions\nr9 - used to pass 6th argument to functions\n    \nA system-call is done via the syscall instruction. The kernel destroys registers rcx and r11.\n```\n\n### `0x2000001`\u3068\u304b\u306e\u6b63\u4f53\n\n\u3053\u308c\u306f\u3069\u3046\u3084\u3089\u30de\u30b9\u30af\u3055\u308c\u308b\u60f3\u5b9a\u306e\u6570\u5024\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u3089\u3057\u3044\u3002\n\u4f8b\u3048\u3070\u3053\u3093\u306a\u8a18\u8ff0\u3002\n\n```asm\nmov rax, 0x2000004      ; System call write = 4\n```\n\n\u3053\u308c\u306f\u3001Unix\u7cfb\u306e\u5834\u5408\u306f\u4e0a\u4f4d\u30d3\u30c3\u30c8\u304c`2`\u3068\u3057\u3066\u30de\u30b9\u30af\u3055\u308c\u3066\u3001\u305d\u308c\u306b\u30de\u30c3\u30c1\u3057\u305f\u5834\u5408\u306b\u5b9f\u884c\u3055\u308c\u308b\u3001\u3068\u3044\u3046\u611f\u3058\u3060\u308d\u3046\u304b\u3002\n\u3068\u306b\u304b\u304f\u3053\u306e\u30de\u30b8\u30c3\u30af\u30ca\u30f3\u30d0\u30fc\u306e\u6b63\u4f53\u306f\u30de\u30b9\u30af\u3055\u308c\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u305f\u6570\u5024\u307f\u305f\u3044\u3067\u3059\u3002\n\uff08\u307e\u3060\u3061\u3083\u3093\u3068\u308f\u304b\u3063\u3066\u306a\u3044\uff09\n\n## hello world\n\n\u3061\u306a\u307f\u306b\u4e0a\u8a18\u306e\u30de\u30b9\u30af\u3092\u9069\u7528\u3057\u3001\u5b9f\u969b\u306b\u52d5\u304fhello world\u306f\u3053\u3093\u306a\u611f\u3058\u3002\n\n```asm\nsection .data\nhello_world     db      \"Hello World!\", 0x0a\n\nsection .text\nglobal start\n\nstart:\nmov rax, 0x2000004      ; System call write = 4\nmov rdi, 1              ; Write to standard out = 1\nmov rsi, hello_world    ; The address of hello_world string\nmov rdx, 14             ; The size to write\nsyscall                 ; Invoke the kernel\nmov rax, 0x2000001      ; System call number for exit = 1\nmov rdi, 0              ; Exit success = 0\nsyscall                 ; Invoke the kernel\n```\n\n`syscall`\u306f\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3067\u3001`rax`\u306b\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306e\u756a\u53f7\u3092\u3001`rbx`\u306b\u5f15\u6570\u3092\u3001\u3068\u3044\u3046\u611f\u3058\u3067\u6c7a\u307e\u3063\u3066\u3044\u308b\u3088\u3046\u3002\n\uff08[\u3053\u3061\u3089](http://syscalls.kernelgrok.com/)\u306b\u305d\u306e\u3078\u3093\u304c\u307e\u3068\u307e\u3063\u3066\u307e\u3059\uff09\n\n## \u53c2\u8003\u306b\u3057\u305f\u8a18\u4e8b\n\n- [\u6c4e\u7528\u30ec\u30b8\u30b9\u30bf](http://wisdom.sakura.ne.jp/programming/asm/assembly3.html)\n- [\u30a2\u30bb\u30f3\u30d6\u30e9\u5165\u9580](http://www5c.biglobe.ne.jp/~ecb/assembler/assembler00.html)\n- [x64\u306e\u30ec\u30b8\u30b9\u30bf\u62e1\u5f35 (1/2)](http://www.itmedia.co.jp/enterprise/articles/0506/29/news002.html)\n- [\u30b9\u30bf\u30c3\u30af\u3063\u3066\u306a\u3042\u306b\uff1f(3)](http://www.uquest.co.jp/embedded/learning/lecture13.html)\n- [\u30a2\u30bb\u30f3\u30d6\u30e9\u3092\u5b66\u3073\u306a\u304c\u3089Scala\u3067\u4f5c\u308b\u30b3\u30f3\u30d1\u30a4\u30e9\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u5165\u9580](http://hsk.github.io/x86_64/)\n- [Linux \u306e\u30a2\u30bb\u30f3\u30d6\u30e9\u30fc: GAS \u3068 NASM \u3092\u6bd4\u8f03\u3059\u308b](http://www.ibm.com/developerworks/jp/linux/library/l-gas-nasm.html)\n- [x64 \u30a2\u30bb\u30f3\u30d6\u30ea\u8a00\u8a9e\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0](http://homepage1.nifty.com/herumi/prog/x64.html)\n- [Linux Syscall Reference](http://syscalls.kernelgrok.com)\n- [x86\u5165\u9580(3) \u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u898f\u7d04](http://labs.cybozu.co.jp/blog/mitsunari/2007/10/x863_1.html)\n", "tags": ["\u30a2\u30bb\u30f3\u30d6\u30e9"]}