{"context": " More than 1 year has passed since last update.\n\n[1] \u5165\u793e\u5e74\u6708\u304c\u540c\u4e00\u3067\u3042\u308b\u5f93\u696d\u54e1\u3092\u540c\u4e00\u884c\u306b\u4e26\u3079\u308b\n\nSQL\nSELECT e.empno                                    AS empno, \n       e.ename                                    AS ename,\n       TO_CHAR(e.hiredate, 'YYYY/MM')             AS hire_ym,\n       LISTAGG(same_ym.ename, ',') \n         WITHIN GROUP (ORDER BY same_ym.empno)    AS same_ym_list\nFROM   emp e \n       INNER JOIN emp same_ym\n               ON TO_CHAR(same_ym.hiredate, 'YYYY/MM') =\n                  TO_CHAR(e.hiredate, 'YYYY/MM')\nGROUP  BY e.empno,\n          e.ename,\n          TO_CHAR(e.hiredate, 'YYYY/MM')\nORDER  BY e.empno\n\n\n\u7d50\u679c\n\n\n\nEMPNO\nENAME\nHIRE_YM\nSAME_YM_LIST\n\n\n\n\n7369\nSMITH\n1980/12\nSMITH\n\n\n7499\nALLEN\n1981/02\nALLEN,WARD\n\n\n7521\nWARD\n1981/02\nALLEN,WARD\n\n\n7566\nJONES\n1981/04\nJONES\n\n\n7654\nMARTIN\n1981/09\nMARTIN,TURNER\n\n\n7698\nBLAKE\n1981/05\nBLAKE\n\n\n7782\nCLARK\n1981/06\nCLARK\n\n\n7839\nKING\n1981/11\nKING\n\n\n7844\nTURNER\n1981/09\nMARTIN,TURNER\n\n\n7900\nJAMES\n1981/12\nJAMES,FORD\n\n\n7902\nFORD\n1981/12\nJAMES,FORD\n\n\n7934\nMILLER\n1982/01\nMILLER\n\n\n\n\n[2] \u6240\u5c5e\u90e8\u9580\u304c\u540c\u4e00\u3067\u3042\u308b\u5f93\u696d\u54e1\u3092\u540c\u4e00\u884c\u306b\u4e26\u3079\u308b\n\nSQL\nSELECT e.empno                                    AS empno,\n       e.ename                                    AS ename,\n       d.deptno                                   AS deptno,\n       d.dname                                    AS dname,\n       LISTAGG(same_dept.ename, ',')\n         WITHIN GROUP (ORDER BY same_dept.empno)  AS same_dept_list\nFROM   emp e\n       INNER JOIN dept d\n               ON d.deptno = e.deptno\n       INNER JOIN emp same_dept\n               ON same_dept.deptno = e.deptno\nGROUP  BY e.empno,\n          e.ename,\n          d.deptno,\n          d.dname\nORDER  BY e.empno\n\n\n\u7d50\u679c\n\n\n\nEMPNO\nENAME\nDEPTNO\nDNAME\nSAME_DEPT_LIST\n\n\n\n\n7369\nSMITH\n20\nRESEARCH\nSMITH,JONES,FORD\n\n\n7499\nALLEN\n30\nSALES\nALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES\n\n\n7521\nWARD\n30\nSALES\nALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES\n\n\n7566\nJONES\n20\nRESEARCH\nSMITH,JONES,FORD\n\n\n7654\nMARTIN\n30\nSALES\nALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES\n\n\n7698\nBLAKE\n30\nSALES\nALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES\n\n\n7782\nCLARK\n10\nACCOUNTING\nCLARK,KING,MILLER\n\n\n7839\nKING\n10\nACCOUNTING\nCLARK,KING,MILLER\n\n\n7844\nTURNER\n30\nSALES\nALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES\n\n\n7900\nJAMES\n30\nSALES\nALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES\n\n\n7902\nFORD\n20\nRESEARCH\nSMITH,JONES,FORD\n\n\n7934\nMILLER\n10\nACCOUNTING\nCLARK,KING,MILLER\n\n\n\n\n[3] \u5165\u793e\u5e74\u6708\u304c\u540c\u4e00\u3067\u3042\u308b\u5f93\u696d\u54e1\u3068\u3001\u6240\u5c5e\u90e8\u9580\u304c\u540c\u4e00\u3067\u3042\u308b\u5f93\u696d\u54e1\u3092\u305d\u308c\u305e\u308c\u540c\u4e00\u884c\u306b\u4e26\u3079\u308b([1]\u3068[2]\u306e\u7d44\u5408\u305b)\n\nSQL\nSELECT e.empno,\n       e.ename,\n       TO_CHAR(e.hiredate, 'YYYY/MM') AS hire_ym,\n       e.deptno,\n       d.dname,\n       e_ym.same_ym_list,\n       e_dept.same_dept_list\nFROM   emp e\n       INNER JOIN dept d\n               ON d.deptno = e.deptno\n       INNER JOIN (SELECT e.empno                                   AS empno,\n                          LISTAGG(same_ym.ename, ',')\n                            WITHIN GROUP (ORDER BY same_ym.empno)   AS same_ym_list\n                   FROM   emp e\n                          INNER JOIN emp same_ym\n                                  ON TO_CHAR(same_ym.hiredate, 'YYYY/MM') =\n                                     TO_CHAR(e.hiredate, 'YYYY/MM')\n                   GROUP  BY e.empno) e_ym\n               ON e_ym.empno = e.empno\n       INNER JOIN (SELECT e.empno                                   AS empno,\n                          LISTAGG(same_dept.ename, ',')\n                            WITHIN GROUP (ORDER BY same_dept.empno) AS same_dept_list\n                   FROM   emp e\n                          INNER JOIN emp same_dept\n                                  ON same_dept.deptno = e.deptno\n                   GROUP  BY e.empno) e_dept\n               ON e_dept.empno = e.empno\nORDER  BY e.empno\n\n\n\u7d50\u679c\n\n\n\nEMPNO\nENAME\nHIRE_YM\nDEPTNO\nDNAME\nSAME_YM_LIST\nSAME_DEPT_LIST\n\n\n\n\n7369\nSMITH\n1980/12\n20\nRESEARCH\nSMITH\nSMITH,JONES,FORD\n\n\n7499\nALLEN\n1981/02\n30\nSALES\nALLEN,WARD\nALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES\n\n\n7521\nWARD\n1981/02\n30\nSALES\nALLEN,WARD\nALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES\n\n\n7566\nJONES\n1981/04\n20\nRESEARCH\nJONES\nSMITH,JONES,FORD\n\n\n7654\nMARTIN\n1981/09\n30\nSALES\nMARTIN,TURNER\nALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES\n\n\n7698\nBLAKE\n1981/05\n30\nSALES\nBLAKE\nALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES\n\n\n7782\nCLARK\n1981/06\n10\nACCOUNTING\nCLARK\nCLARK,KING,MILLER\n\n\n7839\nKING\n1981/11\n10\nACCOUNTING\nKING\nCLARK,KING,MILLER\n\n\n7844\nTURNER\n1981/09\n30\nSALES\nMARTIN,TURNER\nALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES\n\n\n7900\nJAMES\n1981/12\n30\nSALES\nJAMES,FORD\nALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES\n\n\n7902\nFORD\n1981/12\n20\nRESEARCH\nJAMES,FORD\nSMITH,JONES,FORD\n\n\n7934\nMILLER\n1982/01\n10\nACCOUNTING\nMILLER\nCLARK,KING,MILLER\n\n\n\n\n[4] \u30c0\u30e1\u306a\u4f8b\n\nSQL\nSELECT e.empno                                    AS empno,\n       e.ename                                    AS ename,\n       TO_CHAR(e.hiredate, 'YYYY/MM')             AS hire_ym,\n       d.deptno                                   AS deptno,\n       d.dname                                    AS dname,\n       LISTAGG(same_ym.ename, ',')\n         WITHIN GROUP (ORDER BY same_ym.empno)    AS same_ym_list,\n       LISTAGG(same_dept.ename, ',')\n         WITHIN GROUP (ORDER BY same_dept.empno)  AS same_dept_list\nFROM   emp e\n       INNER JOIN dept d\n               ON d.deptno = e.deptno\n       INNER JOIN emp same_ym\n               ON TO_CHAR(same_ym.hiredate, 'YYYY/MM') =\n                  TO_CHAR(e.hiredate, 'YYYY/MM')\n       INNER JOIN emp same_dept\n               ON same_dept.deptno = e.deptno\nGROUP  BY e.empno,\n          e.ename,\n          TO_CHAR(e.hiredate, 'YYYY/MM'),\n          d.deptno,\n          d.dname\nORDER  BY e.empno\n\n\n\u7d50\u679c\n\n\n\nEMPNO\nENAME\nHIRE_YM\nDEPTNO\nDNAME\nSAME_YM_LIST\nSAME_DEPT_LIST\n\n\n\n\n7369\nSMITH\n1980/12\n20\nRESEARCH\nSMITH,SMITH,SMITH\nSMITH,JONES,FORD\n\n\n7499\nALLEN\n1981/02\n30\nSALES\nALLEN,ALLEN,ALLEN,ALLEN,ALLEN,ALLEN,WARD,WARD,WARD,WARD,WARD,WARD\nALLEN,ALLEN,WARD,WARD,MARTIN,MARTIN,BLAKE,BLAKE,TURNER,TURNER,JAMES,JAMES\n\n\n7521\nWARD\n1981/02\n30\nSALES\nALLEN,ALLEN,ALLEN,ALLEN,ALLEN,ALLEN,WARD,WARD,WARD,WARD,WARD,WARD\nALLEN,ALLEN,WARD,WARD,MARTIN,MARTIN,BLAKE,BLAKE,TURNER,TURNER,JAMES,JAMES\n\n\n7566\nJONES\n1981/04\n20\nRESEARCH\nJONES,JONES,JONES\nSMITH,JONES,FORD\n\n\n7654\nMARTIN\n1981/09\n30\nSALES\nMARTIN,MARTIN,MARTIN,MARTIN,MARTIN,MARTIN,TURNER,TURNER,TURNER,TURNER,TURNER,TURNER\nALLEN,ALLEN,WARD,WARD,MARTIN,MARTIN,BLAKE,BLAKE,TURNER,TURNER,JAMES,JAMES\n\n\n7698\nBLAKE\n1981/05\n30\nSALES\nBLAKE,BLAKE,BLAKE,BLAKE,BLAKE,BLAKE\nALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES\n\n\n7782\nCLARK\n1981/06\n10\nACCOUNTING\nCLARK,CLARK,CLARK\nCLARK,KING,MILLER\n\n\n7839\nKING\n1981/11\n10\nACCOUNTING\nKING,KING,KING\nCLARK,KING,MILLER\n\n\n7844\nTURNER\n1981/09\n30\nSALES\nMARTIN,MARTIN,MARTIN,MARTIN,MARTIN,MARTIN,TURNER,TURNER,TURNER,TURNER,TURNER,TURNER\nALLEN,ALLEN,WARD,WARD,MARTIN,MARTIN,BLAKE,BLAKE,TURNER,TURNER,JAMES,JAMES\n\n\n7900\nJAMES\n1981/12\n30\nSALES\nJAMES,JAMES,JAMES,JAMES,JAMES,JAMES,FORD,FORD,FORD,FORD,FORD,FORD\nALLEN,ALLEN,WARD,WARD,MARTIN,MARTIN,BLAKE,BLAKE,TURNER,TURNER,JAMES,JAMES\n\n\n7902\nFORD\n1981/12\n20\nRESEARCH\nJAMES,JAMES,JAMES,FORD,FORD,FORD\nSMITH,SMITH,JONES,JONES,FORD,FORD\n\n\n7934\nMILLER\n1982/01\n10\nACCOUNTING\nMILLER,MILLER,MILLER\nCLARK,KING,MILLER\n\n\n\n\u6b8b\u5ff5\u306a\u304c\u3089LISTAGG\u3067\u306fDISTINCT\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u4f7f\u3048\u307e\u305b\u3093\u3002\n\u3082\u3046\u5c11\u3057\u7c21\u6f54\u306a\u65b9\u6cd5\u306f\u306a\u3044\u306e\u304b\u306a\uff1f\nLISTAGG(DISTINCT same_ym.ename, ',') WITHIN GROUP (ORDER BY same_ym.empno)\n\n\n\u7d50\u679c\nORA-30482: \u3053\u306e\u6a5f\u80fd\u306bDISTINCT\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u4f7f\u7528\u3067\u304d\u307e\u305b\u3093\n\n\u53c2\u8003\n\n\u4f7f\u7528\u3057\u305f\u30c6\u30fc\u30d6\u30eb\uff08Oracle\u306e\u30b5\u30f3\u30d7\u30eb\u30b9\u30ad\u30fc\u30de\uff09\n\nEMP\n\n\n\nEMPNO\nENAME\nJOB\nMGR\nHIREDATE\nSAL\nCOMM\nDEPTNO\n\n\n\n\n7369\nSMITH\nCLERK\n7902\n1980/12/17\n800\n20\n\n\n\n7499\nALLEN\nSALESMAN\n7698\n1981/02/20\n1600\n300\n30\n\n\n7521\nWARD\nSALESMAN\n7698\n1981/02/22\n1250\n500\n30\n\n\n7566\nJONES\nMANAGER\n7839\n1981/04/02\n2975\n20\n\n\n\n7654\nMARTIN\nSALESMAN\n7698\n1981/09/28\n1250\n1400\n30\n\n\n7698\nBLAKE\nMANAGER\n7839\n1981/05/01\n2850\n30\n\n\n\n7782\nCLARK\nMANAGER\n7839\n1981/06/09\n2450\n10\n\n\n\n7839\nKING\nPRESIDENT\n\n1981/11/17\n5000\n10\n\n\n\n7844\nTURNER\nSALESMAN\n7698\n1981/09/08\n1500\n0\n30\n\n\n7900\nJAMES\nCLERK\n7698\n1981/12/03\n950\n30\n\n\n\n7902\nFORD\nANALYST\n7566\n1981/12/03\n3000\n20\n\n\n\n7934\nMILLER\nCLERK\n7782\n1982/01/23\n1300\n10\n\n\n\n\n\nDEPT\n\n\n\nDEPTNO\nDNAME\nLOC\n\n\n\n\n10\nACCOUNTING\nNEW YORK\n\n\n20\nRESEARCH\nDALLAS\n\n\n30\nSALES\nCHICAGO\n\n\n40\nOPERATIONS\nBOSTON\n\n\n\n##[1] \u5165\u793e\u5e74\u6708\u304c\u540c\u4e00\u3067\u3042\u308b\u5f93\u696d\u54e1\u3092\u540c\u4e00\u884c\u306b\u4e26\u3079\u308b\n###SQL\n```sql\nSELECT e.empno                                    AS empno, \n       e.ename                                    AS ename,\n       TO_CHAR(e.hiredate, 'YYYY/MM')             AS hire_ym,\n       LISTAGG(same_ym.ename, ',') \n         WITHIN GROUP (ORDER BY same_ym.empno)    AS same_ym_list\nFROM   emp e \n       INNER JOIN emp same_ym\n               ON TO_CHAR(same_ym.hiredate, 'YYYY/MM') =\n                  TO_CHAR(e.hiredate, 'YYYY/MM')\nGROUP  BY e.empno,\n          e.ename,\n          TO_CHAR(e.hiredate, 'YYYY/MM')\nORDER  BY e.empno\n```\n\n###\u7d50\u679c\n|EMPNO|ENAME|HIRE_YM|SAME_YM_LIST|\n|----:|:----|:------|:-----------|\n|7369|SMITH|1980/12|SMITH|\n|7499|ALLEN|1981/02|ALLEN,WARD|\n|7521|WARD|1981/02|ALLEN,WARD|\n|7566|JONES|1981/04|JONES|\n|7654|MARTIN|1981/09|MARTIN,TURNER|\n|7698|BLAKE|1981/05|BLAKE|\n|7782|CLARK|1981/06|CLARK|\n|7839|KING|1981/11|KING|\n|7844|TURNER|1981/09|MARTIN,TURNER|\n|7900|JAMES|1981/12|JAMES,FORD|\n|7902|FORD|1981/12|JAMES,FORD|\n|7934|MILLER|1982/01|MILLER|\n\n##[2] \u6240\u5c5e\u90e8\u9580\u304c\u540c\u4e00\u3067\u3042\u308b\u5f93\u696d\u54e1\u3092\u540c\u4e00\u884c\u306b\u4e26\u3079\u308b\n###SQL\n```sql\nSELECT e.empno                                    AS empno,\n       e.ename                                    AS ename,\n       d.deptno                                   AS deptno,\n       d.dname                                    AS dname,\n       LISTAGG(same_dept.ename, ',')\n         WITHIN GROUP (ORDER BY same_dept.empno)  AS same_dept_list\nFROM   emp e\n       INNER JOIN dept d\n               ON d.deptno = e.deptno\n       INNER JOIN emp same_dept\n               ON same_dept.deptno = e.deptno\nGROUP  BY e.empno,\n          e.ename,\n          d.deptno,\n          d.dname\nORDER  BY e.empno\n```\n\n###\u7d50\u679c\n|EMPNO|ENAME|DEPTNO|DNAME|SAME_DEPT_LIST|\n|--:|:--|--:|:--|:--|\n|7369|SMITH|20|RESEARCH|SMITH,JONES,FORD|\n|7499|ALLEN|30|SALES|ALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES|\n|7521|WARD|30|SALES|ALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES|\n|7566|JONES|20|RESEARCH|SMITH,JONES,FORD|\n|7654|MARTIN|30|SALES|ALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES|\n|7698|BLAKE|30|SALES|ALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES|\n|7782|CLARK|10|ACCOUNTING|CLARK,KING,MILLER|\n|7839|KING|10|ACCOUNTING|CLARK,KING,MILLER|\n|7844|TURNER|30|SALES|ALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES|\n|7900|JAMES|30|SALES|ALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES|\n|7902|FORD|20|RESEARCH|SMITH,JONES,FORD|\n|7934|MILLER|10|ACCOUNTING|CLARK,KING,MILLER|\n\n##[3] \u5165\u793e\u5e74\u6708\u304c\u540c\u4e00\u3067\u3042\u308b\u5f93\u696d\u54e1\u3068\u3001\u6240\u5c5e\u90e8\u9580\u304c\u540c\u4e00\u3067\u3042\u308b\u5f93\u696d\u54e1\u3092\u305d\u308c\u305e\u308c\u540c\u4e00\u884c\u306b\u4e26\u3079\u308b([1]\u3068[2]\u306e\u7d44\u5408\u305b)\n###SQL\n\n```sql\nSELECT e.empno,\n       e.ename,\n       TO_CHAR(e.hiredate, 'YYYY/MM') AS hire_ym,\n       e.deptno,\n       d.dname,\n       e_ym.same_ym_list,\n       e_dept.same_dept_list\nFROM   emp e\n       INNER JOIN dept d\n               ON d.deptno = e.deptno\n       INNER JOIN (SELECT e.empno                                   AS empno,\n                          LISTAGG(same_ym.ename, ',')\n                            WITHIN GROUP (ORDER BY same_ym.empno)   AS same_ym_list\n                   FROM   emp e\n                          INNER JOIN emp same_ym\n                                  ON TO_CHAR(same_ym.hiredate, 'YYYY/MM') =\n                                     TO_CHAR(e.hiredate, 'YYYY/MM')\n                   GROUP  BY e.empno) e_ym\n               ON e_ym.empno = e.empno\n       INNER JOIN (SELECT e.empno                                   AS empno,\n                          LISTAGG(same_dept.ename, ',')\n                            WITHIN GROUP (ORDER BY same_dept.empno) AS same_dept_list\n                   FROM   emp e\n                          INNER JOIN emp same_dept\n                                  ON same_dept.deptno = e.deptno\n                   GROUP  BY e.empno) e_dept\n               ON e_dept.empno = e.empno\nORDER  BY e.empno\n```\n\n###\u7d50\u679c\n|EMPNO|ENAME|HIRE_YM|DEPTNO|DNAME|SAME_YM_LIST|SAME_DEPT_LIST|\n|--:|:--|:--|--:|:--|:--|:--|\n|7369|SMITH|1980/12|20|RESEARCH|SMITH|SMITH,JONES,FORD|\n|7499|ALLEN|1981/02|30|SALES|ALLEN,WARD|ALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES|\n|7521|WARD|1981/02|30|SALES|ALLEN,WARD|ALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES|\n|7566|JONES|1981/04|20|RESEARCH|JONES|SMITH,JONES,FORD|\n|7654|MARTIN|1981/09|30|SALES|MARTIN,TURNER|ALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES|\n|7698|BLAKE|1981/05|30|SALES|BLAKE|ALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES|\n|7782|CLARK|1981/06|10|ACCOUNTING|CLARK|CLARK,KING,MILLER|\n|7839|KING|1981/11|10|ACCOUNTING|KING|CLARK,KING,MILLER|\n|7844|TURNER|1981/09|30|SALES|MARTIN,TURNER|ALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES|\n|7900|JAMES|1981/12|30|SALES|JAMES,FORD|ALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES|\n|7902|FORD|1981/12|20|RESEARCH|JAMES,FORD|SMITH,JONES,FORD|\n|7934|MILLER|1982/01|10|ACCOUNTING|MILLER|CLARK,KING,MILLER|\n\n##[4] \u30c0\u30e1\u306a\u4f8b\n###SQL\n\n```sql\nSELECT e.empno                                    AS empno,\n       e.ename                                    AS ename,\n       TO_CHAR(e.hiredate, 'YYYY/MM')             AS hire_ym,\n       d.deptno                                   AS deptno,\n       d.dname                                    AS dname,\n       LISTAGG(same_ym.ename, ',')\n         WITHIN GROUP (ORDER BY same_ym.empno)    AS same_ym_list,\n       LISTAGG(same_dept.ename, ',')\n         WITHIN GROUP (ORDER BY same_dept.empno)  AS same_dept_list\nFROM   emp e\n       INNER JOIN dept d\n               ON d.deptno = e.deptno\n       INNER JOIN emp same_ym\n               ON TO_CHAR(same_ym.hiredate, 'YYYY/MM') =\n                  TO_CHAR(e.hiredate, 'YYYY/MM')\n       INNER JOIN emp same_dept\n               ON same_dept.deptno = e.deptno\nGROUP  BY e.empno,\n          e.ename,\n          TO_CHAR(e.hiredate, 'YYYY/MM'),\n          d.deptno,\n          d.dname\nORDER  BY e.empno\n```\n\n###\u7d50\u679c\n|EMPNO|ENAME|HIRE_YM|DEPTNO|DNAME|SAME_YM_LIST|SAME_DEPT_LIST|\n|--:|:--|:--|--:|:--|:--|:--|\n|7369|SMITH|1980/12|20|RESEARCH|SMITH,SMITH,SMITH|SMITH,JONES,FORD|\n|7499|ALLEN|1981/02|30|SALES|ALLEN,ALLEN,ALLEN,ALLEN,ALLEN,ALLEN,WARD,WARD,WARD,WARD,WARD,WARD|ALLEN,ALLEN,WARD,WARD,MARTIN,MARTIN,BLAKE,BLAKE,TURNER,TURNER,JAMES,JAMES|\n|7521|WARD|1981/02|30|SALES|ALLEN,ALLEN,ALLEN,ALLEN,ALLEN,ALLEN,WARD,WARD,WARD,WARD,WARD,WARD|ALLEN,ALLEN,WARD,WARD,MARTIN,MARTIN,BLAKE,BLAKE,TURNER,TURNER,JAMES,JAMES|\n|7566|JONES|1981/04|20|RESEARCH|JONES,JONES,JONES|SMITH,JONES,FORD|\n|7654|MARTIN|1981/09|30|SALES|MARTIN,MARTIN,MARTIN,MARTIN,MARTIN,MARTIN,TURNER,TURNER,TURNER,TURNER,TURNER,TURNER|ALLEN,ALLEN,WARD,WARD,MARTIN,MARTIN,BLAKE,BLAKE,TURNER,TURNER,JAMES,JAMES|\n|7698|BLAKE|1981/05|30|SALES|BLAKE,BLAKE,BLAKE,BLAKE,BLAKE,BLAKE|ALLEN,WARD,MARTIN,BLAKE,TURNER,JAMES|\n|7782|CLARK|1981/06|10|ACCOUNTING|CLARK,CLARK,CLARK|CLARK,KING,MILLER|\n|7839|KING|1981/11|10|ACCOUNTING|KING,KING,KING|CLARK,KING,MILLER|\n|7844|TURNER|1981/09|30|SALES|MARTIN,MARTIN,MARTIN,MARTIN,MARTIN,MARTIN,TURNER,TURNER,TURNER,TURNER,TURNER,TURNER|ALLEN,ALLEN,WARD,WARD,MARTIN,MARTIN,BLAKE,BLAKE,TURNER,TURNER,JAMES,JAMES|\n|7900|JAMES|1981/12|30|SALES|JAMES,JAMES,JAMES,JAMES,JAMES,JAMES,FORD,FORD,FORD,FORD,FORD,FORD|ALLEN,ALLEN,WARD,WARD,MARTIN,MARTIN,BLAKE,BLAKE,TURNER,TURNER,JAMES,JAMES|\n|7902|FORD|1981/12|20|RESEARCH|JAMES,JAMES,JAMES,FORD,FORD,FORD|SMITH,SMITH,JONES,JONES,FORD,FORD|\n|7934|MILLER|1982/01|10|ACCOUNTING|MILLER,MILLER,MILLER|CLARK,KING,MILLER|\n\n\u6b8b\u5ff5\u306a\u304c\u3089LISTAGG\u3067\u306fDISTINCT\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u4f7f\u3048\u307e\u305b\u3093\u3002\n\u3082\u3046\u5c11\u3057\u7c21\u6f54\u306a\u65b9\u6cd5\u306f\u306a\u3044\u306e\u304b\u306a\uff1f\n\n```sql\nLISTAGG(DISTINCT same_ym.ename, ',') WITHIN GROUP (ORDER BY same_ym.empno)\n```\n\n###\u7d50\u679c\n```ORA-30482: \u3053\u306e\u6a5f\u80fd\u306bDISTINCT\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u4f7f\u7528\u3067\u304d\u307e\u305b\u3093```\n\n#\u53c2\u8003\n##\u4f7f\u7528\u3057\u305f\u30c6\u30fc\u30d6\u30eb\uff08Oracle\u306e\u30b5\u30f3\u30d7\u30eb\u30b9\u30ad\u30fc\u30de\uff09\n###EMP\n|EMPNO|ENAME|JOB|MGR|HIREDATE|SAL|COMM|DEPTNO|\n|----:|:----|:--|--:|:-------|--:|---:|-----:|\n|7369|SMITH|CLERK|7902|1980/12/17|800|20|\n|7499|ALLEN|SALESMAN|7698|1981/02/20|1600|300|30|\n|7521|WARD|SALESMAN|7698|1981/02/22|1250|500|30|\n|7566|JONES|MANAGER|7839|1981/04/02|2975|20|\n|7654|MARTIN|SALESMAN|7698|1981/09/28|1250|1400|30|\n|7698|BLAKE|MANAGER|7839|1981/05/01|2850|30|\n|7782|CLARK|MANAGER|7839|1981/06/09|2450|10|\n|7839|KING|PRESIDENT||1981/11/17|5000|10|\n|7844|TURNER|SALESMAN|7698|1981/09/08|1500|0|30|\n|7900|JAMES|CLERK|7698|1981/12/03|950|30|\n|7902|FORD|ANALYST|7566|1981/12/03|3000|20|\n|7934|MILLER|CLERK|7782|1982/01/23|1300|10|\n\n###DEPT\n|DEPTNO|DNAME|LOC|\n|-----:|:----|:--|\n|10|ACCOUNTING|NEW YORK|\n|20|RESEARCH|DALLAS|\n|30|SALES|CHICAGO|\n|40|OPERATIONS|BOSTON|", "tags": ["oracle", "SQL"]}