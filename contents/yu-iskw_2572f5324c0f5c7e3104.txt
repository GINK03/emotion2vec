{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nHive \u306e\u30af\u30e9\u30b9\u30bf\u9593\u30c7\u30fc\u30bf\u79fb\u884c\u306a\u3069\u3067\uff0cHDFS \u4e0a\u306e\u30c7\u30fc\u30bf\u3092 LOAD DATA \u3042\u308b\u3044\u306f ADD PARTITION \u3057\u305f\u3044\u3053\u3068\u304c\u3042\u308b\uff0e\n\u305d\u306e\u3088\u3046\u306a\u5834\u9762\u3067\uff0c\u305d\u3082\u305d\u3082 Hive \u306e metastore \u306b\u306f\u30c7\u30fc\u30bf\u304c\u5b58\u5728\u3057\u306a\u3044\u304c\uff0cHDFS \u4e0a\u306b\u306f\u30c7\u30fc\u30bf\u304c\u5b58\u5728\u3059\u308b\u3068\u304d DROP TABLE \u3092\u5b9f\u884c\u3059\u308b\u3068\u3069\u3046\u306a\u308b\u306e\u304b\u3092\u691c\u8a3c\u3057\u305f\uff0e\n\n\u7d50\u8ad6\n\u30c7\u30fc\u30bf\u306f\u524a\u9664\u3055\u308c\u308b\nHDFS \u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3054\u3068\u524a\u9664\u3055\u308c\u308b\n\uff08hdfs dfs -rm -r \u3068\u540c\u69d8\u306e\u64cd\u4f5c\u304c\u50cd\u3044\u3066\u3044\u308b\uff1f\uff09\n\n\u691c\u8a3c\n1 Hive \u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u7684\u306b\u306f\u4e00\u90e8\u3057\u304b\u5b58\u5728\u3057\u306a\u3044\n\nhive> show partitions test_load_data015;\ndt=2013-05-01/device=mobile/type_id=2\ndt=2013-05-01/device=pc/type_id=1\n\n2 HDFS \u4e0a\u306b\u306f\u307b\u304b\u306b\u30c7\u30fc\u30bf\u304c\u5b58\u5728\n\nhdfs dfs -ls -R /user/hive/warehouse/test_load_data015/ | awk '$2 == 3 {print $8}' | grep 'dt='\n/user/hive/warehouse/test_load_data015/dt=2013-05-01/device=mobile/type_id=2/000000_0\n/user/hive/warehouse/test_load_data015/dt=2013-05-01/device=pc/type_id=1/000000_0\n/user/hive/warehouse/test_load_data015/dt=2013-05-02/device=mobile/type_id=2/000000_0\n/user/hive/warehouse/test_load_data015/dt=2013-05-02/device=pc/type_id=1/000000_0\n/user/hive/warehouse/test_load_data015/dt=2013-05-03/device=mobile/type_id=2/000000_0\n/user/hive/warehouse/test_load_data015/dt=2013-05-03/device=pc/type_id=1/000000_0\n/user/hive/warehouse/test_load_data015/tmp/dt=2013-05-04/device=mobile/type_id=2/000000_0\n/user/hive/warehouse/test_load_data015/tmp/dt=2013-05-04/device=pc/type_id=1/000000_0\n/user/hive/warehouse/test_load_data015/tmp/dt=2013-05-05/device=mobile/type_id=2/000000_0\n/user/hive/warehouse/test_load_data015/tmp/dt=2013-05-05/device=pc/type_id=1/000000_0\n\n3 DROP TABLE \u3092\u5b9f\u884c\n\nDROP TABLE test_load_data015;\n\n4 HDFS \u4e0a\u306e\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\n\nhfds dfs -ls /user/hive/warehouse/test_load_data015\nls: `/user/hive/warehouse/test_load_data015/': No such file or directory\n\n# \u6982\u8981\n\nHive \u306e\u30af\u30e9\u30b9\u30bf\u9593\u30c7\u30fc\u30bf\u79fb\u884c\u306a\u3069\u3067\uff0cHDFS \u4e0a\u306e\u30c7\u30fc\u30bf\u3092 LOAD DATA \u3042\u308b\u3044\u306f ADD PARTITION \u3057\u305f\u3044\u3053\u3068\u304c\u3042\u308b\uff0e\n\u305d\u306e\u3088\u3046\u306a\u5834\u9762\u3067\uff0c\u305d\u3082\u305d\u3082 Hive \u306e metastore \u306b\u306f\u30c7\u30fc\u30bf\u304c\u5b58\u5728\u3057\u306a\u3044\u304c\uff0cHDFS \u4e0a\u306b\u306f\u30c7\u30fc\u30bf\u304c\u5b58\u5728\u3059\u308b\u3068\u304d DROP TABLE \u3092\u5b9f\u884c\u3059\u308b\u3068\u3069\u3046\u306a\u308b\u306e\u304b\u3092\u691c\u8a3c\u3057\u305f\uff0e\n\n# \u7d50\u8ad6\n\n\u30c7\u30fc\u30bf\u306f\u524a\u9664\u3055\u308c\u308b\nHDFS \u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3054\u3068\u524a\u9664\u3055\u308c\u308b\n\uff08hdfs dfs -rm -r \u3068\u540c\u69d8\u306e\u64cd\u4f5c\u304c\u50cd\u3044\u3066\u3044\u308b\uff1f\uff09\n\n# \u691c\u8a3c\n\n1 Hive \u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u7684\u306b\u306f\u4e00\u90e8\u3057\u304b\u5b58\u5728\u3057\u306a\u3044\n\n>hive> show partitions test_load_data015;\n>dt=2013-05-01/device=mobile/type_id=2\n>dt=2013-05-01/device=pc/type_id=1\n\n2 HDFS \u4e0a\u306b\u306f\u307b\u304b\u306b\u30c7\u30fc\u30bf\u304c\u5b58\u5728\n\n>hdfs dfs -ls -R /user/hive/warehouse/test_load_data015/ | awk '$2 == 3 {print $8}' | grep 'dt='\n>/user/hive/warehouse/test_load_data015/dt=2013-05-01/device=mobile/type_id=2/000000_0\n>/user/hive/warehouse/test_load_data015/dt=2013-05-01/device=pc/type_id=1/000000_0\n>/user/hive/warehouse/test_load_data015/dt=2013-05-02/device=mobile/type_id=2/000000_0\n>/user/hive/warehouse/test_load_data015/dt=2013-05-02/device=pc/type_id=1/000000_0\n>/user/hive/warehouse/test_load_data015/dt=2013-05-03/device=mobile/type_id=2/000000_0\n>/user/hive/warehouse/test_load_data015/dt=2013-05-03/device=pc/type_id=1/000000_0\n>/user/hive/warehouse/test_load_data015/tmp/dt=2013-05-04/device=mobile/type_id=2/000000_0\n>/user/hive/warehouse/test_load_data015/tmp/dt=2013-05-04/device=pc/type_id=1/000000_0\n>/user/hive/warehouse/test_load_data015/tmp/dt=2013-05-05/device=mobile/type_id=2/000000_0\n>/user/hive/warehouse/test_load_data015/tmp/dt=2013-05-05/device=pc/type_id=1/000000_0\n\n3 DROP TABLE \u3092\u5b9f\u884c\n\n> DROP TABLE test_load_data015;\n\n4 HDFS \u4e0a\u306e\u30c7\u30fc\u30bf\u3092\u78ba\u8a8d\n\n> hfds dfs -ls /user/hive/warehouse/test_load_data015\n> ls: `/user/hive/warehouse/test_load_data015/': No such file or directory", "tags": ["hive"]}