{"context": " More than 1 year has passed since last update.\u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306e\u52d5\u753b\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\u306e\u3067\u8aac\u660e\n\n\u52d5\u753b\u306e\u4fdd\u5b58\u5834\u6240\u306e\u5165\u624b\n\u52d5\u753b\u306e\u4fdd\u5b58\u5834\u6240\u3092\u5165\u624b\u3059\u308bgetflv\u3068\u3044\u3046API\u304c\u3042\u308a\u307e\u3059\nhttp://flapi.nicovideo.jp/api/getflv/sm#{id}\n\u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306eAPI\u3092\u4f7f\u3046\u6e96\u5099\u3068\u3057\u3066\u3068\u308a\u3042\u3048\u305a\u3001\u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b\n\u30ed\u30b0\u30a4\u30f3\u3092\u3057\u3066\u308bCookie\u3068\u305d\u306e\u52d5\u753b\u3078\u306e\u30a2\u30af\u30bb\u30b9\u304c\u7121\u3044\u3068\u52d5\u753b\u306a\u3069\u3092\u4fdd\u5b58\u3057\u3066\u3044\u308bURL\u306a\u3069\u3092\u8fd4\u3057\u3066\u304f\u308c\u306a\u3044\n\u697d\u304c\u3057\u305f\u3044\u306e\u3067\u3068\u308a\u3042\u3048\u305amechanize\nrequire 'rubygems'\nrequire 'mechanize'\n\nmail = \"\u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306b\u767b\u9332\u3057\u3066\u308b\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\"\npass = \"\u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306b\u767b\u9332\u3057\u3066\u3044\u308b\u30d1\u30b9\u30ef\u30fc\u30c9\"\nagent = Mechanize.new;\nagent.post(\"https://secure.nicovideo.jp/secure/login?site=niconico\",\"mail\"=>mail,\"password\"=>pass);\nagent.get(\"http://www.nicovideo.jp/watch/sm#{id}\");\n\n\u3042\u3068\u306fgetflv\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u52d5\u753b\u306e\u4fdd\u5b58\u3055\u308c\u3066\u308bURL\u3092\u6559\u3048\u3066\u304f\u308c\u308b\nmoviedate = agent.get(\"http://www.nicovideo.jp/api/getflv?v=sm#{id}\");\n\n\u305d\u3046\u3059\u308b\u3068\n\nthread_id=1173108780&l=319&url=http%3A%2F%2Fsmile-com42.nicovideo.jp%2Fsmile%3Fv%3D9.0468&link=http%3A%2F%2Fwww.smilevideo.jp%2Fview%2F9%2F16899326&ms=http%3A%2F%2Fmsg.nicovideo.jp%2F10%2Fapi%2F&ms_sub=http%3A%2F%2Fsub.msg.nicovideo.jp%2F10%2Fapi%2F&user_id=16899326&is_premium=0&nickname=%E3%81%8D%E3%81%BF%E3%81%A8%E3%81%BC%E3%81%8F%E3%81%AE%E4%B8%83%E6%97%A5%E9%96%93&time=1363070293743&done=true&hms=hiroba01.nicovideo.jp&hmsp=2527&hmst=1000000003&hmstk=1363070353.H4EKrVgto621n76tb4IRpYJ7h_0&rpu=%7B%22count%22%3A1886330%2C%22users%22%3A%5B%22%5Cu30e9%5Cu30b9%5Cu30af%22%2C%22huto%22%2C%22EX%5Cu3059%5Cu305a%5Cu304d%22%2C%22%5Cu30d2%5Cu30ed%22%2C%22%5Cu3044%5Cu3061%5Cu3054%22%2C%22yamasan%22%2C%22%5Cu30a8%5Cu30fc%5Cu30b9%22%2C%22%5Cu672a%5Cu7d17%22%2C%22%5Cu30bb%5Cu30c3%5Cu30ad%5Cu30fc%22%2C%22Wen+Chi%22%2C%22%5Cu3068%5Cu3089%5Cu3053%22%2C%22%5Cu5bdd%5Cu5e8a%22%2C%22dieu%22%2C%22%5Cu304d%5Cu306e%5Cu3053%22%2C%22%5Cu30c1%5Cu30e3%5Cu30d4%5Cu30bf%5Cu30f3%22%2C%22%5Cu3082%5Cu3049%5Cu3061%5Cu3083%5Cu3093%22%2C%22%5Cu86ed%5Cu5b50%28%5Cu30d2%5Cu30eb%5Cu30b3%29%22%2C%22kai%22%2C%22abe%22%2C%22%5Cu304e%5Cu308b%5Cu3055%5Cu3093%5Cu2462%22%5D%2C%22extra%22%3A9%7D\n\n\u307f\u305f\u3044\u306a\u611f\u3058\u306e\u7269\u304c\u8fd4\u3063\u3066\u304f\u308b\u306e\u3067\u305d\u306e\u4e2d\u304b\u3089\u6b63\u898f\u8868\u73fe\u3067=\u3068\u306a\u3063\u3066\u3044\u308b\u7269\u3092\u53d6\u308a\u51fa\u305b\u3070\u826f\u3044\u306e\u3067scan\u30b3\u30de\u30f3\u30c9\u3067\u9811\u5f35\u3063\u3066\u307f\u308b\n\u3053\u306e\u8fd4\u3063\u3066\u304f\u308b\u6587\u5b57\u5217\u306f&\u3067\u533a\u5207\u3089\u308c\u3066\u308b\u306e\u3067\u305d\u308c\u3067\u9811\u5f35\u308b\u3001Rublar\u3063\u3066\u3044\u3046Ruby\u306e\u6b63\u898f\u8868\u73fe\u304c\u8a66\u305b\u308b\u30da\u30fc\u30b8\u304c\u3042\u308b\u306e\u3067\u3053\u308c\u3067\u8a66\u884c\u932f\u8aa4\u3057\u306a\u304c\u3089\u304c\u3093\u3070\u3063\u305f\u3089\nmap = {};\nmoviedate.body.scan(/([^&]+)=([^&]*)/).each do |i|\n  map[i[0]] = i[1];\nend\n\n\u307f\u305f\u3044\u306a\u611f\u3058\u306b\u306a\u308b\u306e\u3067\u305d\u308c\u3092map\u306b\u4fdd\u7ba1\u3057\u3068\u304f\n\n\u52d5\u753b\u306e\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f\u3092\u5165\u624b\n\u3042\u3068\u306f\u3001\u3053\u306e\u4fdd\u5b58\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u5f62\u5f0f\u306e\u6240\u5f97\u3092\u3057\u3066\u4fdd\u5b58\u3059\u308b\u3060\u3051\n\u52d5\u753b\u306e\u5f62\u5f0f\u3092\u77e5\u308b\u306e\u306fgetthumbinfo\u3063\u3066\u3044\u3046API\u3092\u4f7f\u3046\nhttp://ext.nicovideo.jp/api/getthumbinfo/sm#{id}\nrequire 'open-uri'\nrequire 'rexml/document'\n\ndoc = REXML::Document.new(open(\"http://ext.nicovideo.jp/api/getthumbinfo/sm#{id}\"));\nfiletype = doc.elements['nicovideo_thumb_response/thumb/movie_type'].text.to_s;\n\n\n\u52d5\u753b\u306e\u4fdd\u5b58\nrequire 'cgi'\n\ntitle = doc.elements['nicovideo_thumb_response/thumb/title'].text.to_s\nopen(\"#{title}.#{filetype}\",\"wb\") do |i|\n  i.print agent.get_file(CGI::unescape(map[\"url\"]));\nend\n\ncgi\u306fmap\u306b\u5165\u308c\u3089\u308c\u305furl\u306e\u6587\u5b57\u5217\u304cURL\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u306e\u3092\u30c7\u30b3\u30fc\u30c9\u3057\u3066\u308b\n\u3053\u308c\u3067\u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306e\u52d5\u753b\u304c\u4fdd\u5b58\u51fa\u6765\u305f\u3088,\n\u52d5\u753b\u306eID\u306f\u4fdd\u5b58\u3057\u305f\u3044\u52d5\u753b\u306eID\u306b\u5909\u3048\u3066\u306d\u3063\u3001\n\n\u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306e\u52d5\u753b\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\u306e\u3067\u8aac\u660e\n## \u52d5\u753b\u306e\u4fdd\u5b58\u5834\u6240\u306e\u5165\u624b\n\u52d5\u753b\u306e\u4fdd\u5b58\u5834\u6240\u3092\u5165\u624b\u3059\u308bgetflv\u3068\u3044\u3046API\u304c\u3042\u308a\u307e\u3059\nhttp://flapi.nicovideo.jp/api/getflv/sm#{id}\n\u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306eAPI\u3092\u4f7f\u3046\u6e96\u5099\u3068\u3057\u3066\u3068\u308a\u3042\u3048\u305a\u3001\u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b\n\u30ed\u30b0\u30a4\u30f3\u3092\u3057\u3066\u308bCookie\u3068\u305d\u306e\u52d5\u753b\u3078\u306e\u30a2\u30af\u30bb\u30b9\u304c\u7121\u3044\u3068\u52d5\u753b\u306a\u3069\u3092\u4fdd\u5b58\u3057\u3066\u3044\u308bURL\u306a\u3069\u3092\u8fd4\u3057\u3066\u304f\u308c\u306a\u3044\n\u697d\u304c\u3057\u305f\u3044\u306e\u3067\u3068\u308a\u3042\u3048\u305amechanize\n\n```Ruby\nrequire 'rubygems'\nrequire 'mechanize'\n\nmail = \"\u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306b\u767b\u9332\u3057\u3066\u308b\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\"\npass = \"\u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306b\u767b\u9332\u3057\u3066\u3044\u308b\u30d1\u30b9\u30ef\u30fc\u30c9\"\nagent = Mechanize.new;\nagent.post(\"https://secure.nicovideo.jp/secure/login?site=niconico\",\"mail\"=>mail,\"password\"=>pass);\nagent.get(\"http://www.nicovideo.jp/watch/sm#{id}\");\n```\n\n\u3042\u3068\u306fgetflv\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u52d5\u753b\u306e\u4fdd\u5b58\u3055\u308c\u3066\u308bURL\u3092\u6559\u3048\u3066\u304f\u308c\u308b\n\n```Ruby\nmoviedate = agent.get(\"http://www.nicovideo.jp/api/getflv?v=sm#{id}\");\n```\n\n\u305d\u3046\u3059\u308b\u3068\n\n>thread_id=1173108780&l=319&url=http%3A%2F%2Fsmile-com42.nicovideo.jp%2Fsmile%3Fv%3D9.0468&link=http%3A%2F%2Fwww.smilevideo.jp%2Fview%2F9%2F16899326&ms=http%3A%2F%2Fmsg.nicovideo.jp%2F10%2Fapi%2F&ms_sub=http%3A%2F%2Fsub.msg.nicovideo.jp%2F10%2Fapi%2F&user_id=16899326&is_premium=0&nickname=%E3%81%8D%E3%81%BF%E3%81%A8%E3%81%BC%E3%81%8F%E3%81%AE%E4%B8%83%E6%97%A5%E9%96%93&time=1363070293743&done=true&hms=hiroba01.nicovideo.jp&hmsp=2527&hmst=1000000003&hmstk=1363070353.H4EKrVgto621n76tb4IRpYJ7h_0&rpu=%7B%22count%22%3A1886330%2C%22users%22%3A%5B%22%5Cu30e9%5Cu30b9%5Cu30af%22%2C%22huto%22%2C%22EX%5Cu3059%5Cu305a%5Cu304d%22%2C%22%5Cu30d2%5Cu30ed%22%2C%22%5Cu3044%5Cu3061%5Cu3054%22%2C%22yamasan%22%2C%22%5Cu30a8%5Cu30fc%5Cu30b9%22%2C%22%5Cu672a%5Cu7d17%22%2C%22%5Cu30bb%5Cu30c3%5Cu30ad%5Cu30fc%22%2C%22Wen+Chi%22%2C%22%5Cu3068%5Cu3089%5Cu3053%22%2C%22%5Cu5bdd%5Cu5e8a%22%2C%22dieu%22%2C%22%5Cu304d%5Cu306e%5Cu3053%22%2C%22%5Cu30c1%5Cu30e3%5Cu30d4%5Cu30bf%5Cu30f3%22%2C%22%5Cu3082%5Cu3049%5Cu3061%5Cu3083%5Cu3093%22%2C%22%5Cu86ed%5Cu5b50%28%5Cu30d2%5Cu30eb%5Cu30b3%29%22%2C%22kai%22%2C%22abe%22%2C%22%5Cu304e%5Cu308b%5Cu3055%5Cu3093%5Cu2462%22%5D%2C%22extra%22%3A9%7D\n\n\u307f\u305f\u3044\u306a\u611f\u3058\u306e\u7269\u304c\u8fd4\u3063\u3066\u304f\u308b\u306e\u3067\u305d\u306e\u4e2d\u304b\u3089\u6b63\u898f\u8868\u73fe\u3067*=*\u3068\u306a\u3063\u3066\u3044\u308b\u7269\u3092\u53d6\u308a\u51fa\u305b\u3070\u826f\u3044\u306e\u3067scan\u30b3\u30de\u30f3\u30c9\u3067\u9811\u5f35\u3063\u3066\u307f\u308b\n\u3053\u306e\u8fd4\u3063\u3066\u304f\u308b\u6587\u5b57\u5217\u306f&\u3067\u533a\u5207\u3089\u308c\u3066\u308b\u306e\u3067\u305d\u308c\u3067\u9811\u5f35\u308b\u3001[Rublar](http://www.rubular.com/)\u3063\u3066\u3044\u3046Ruby\u306e\u6b63\u898f\u8868\u73fe\u304c\u8a66\u305b\u308b\u30da\u30fc\u30b8\u304c\u3042\u308b\u306e\u3067\u3053\u308c\u3067\u8a66\u884c\u932f\u8aa4\u3057\u306a\u304c\u3089\u304c\u3093\u3070\u3063\u305f\u3089\n\n```Ruby\nmap = {};\nmoviedate.body.scan(/([^&]+)=([^&]*)/).each do |i|\n  map[i[0]] = i[1];\nend\n```\n\n\u307f\u305f\u3044\u306a\u611f\u3058\u306b\u306a\u308b\u306e\u3067\u305d\u308c\u3092map\u306b\u4fdd\u7ba1\u3057\u3068\u304f\n\n## \u52d5\u753b\u306e\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f\u3092\u5165\u624b\n\u3042\u3068\u306f\u3001\u3053\u306e\u4fdd\u5b58\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u5f62\u5f0f\u306e\u6240\u5f97\u3092\u3057\u3066\u4fdd\u5b58\u3059\u308b\u3060\u3051\n\u52d5\u753b\u306e\u5f62\u5f0f\u3092\u77e5\u308b\u306e\u306fgetthumbinfo\u3063\u3066\u3044\u3046API\u3092\u4f7f\u3046\nhttp://ext.nicovideo.jp/api/getthumbinfo/sm#{id}\n\n```Ruby\nrequire 'open-uri'\nrequire 'rexml/document'\n\ndoc = REXML::Document.new(open(\"http://ext.nicovideo.jp/api/getthumbinfo/sm#{id}\"));\nfiletype = doc.elements['nicovideo_thumb_response/thumb/movie_type'].text.to_s;\n```\n\n## \u52d5\u753b\u306e\u4fdd\u5b58\n\n```Ruby\nrequire 'cgi'\n\ntitle = doc.elements['nicovideo_thumb_response/thumb/title'].text.to_s\nopen(\"#{title}.#{filetype}\",\"wb\") do |i|\n  i.print agent.get_file(CGI::unescape(map[\"url\"]));\nend\n```\n\ncgi\u306fmap\u306b\u5165\u308c\u3089\u308c\u305furl\u306e\u6587\u5b57\u5217\u304cURL\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u306e\u3092\u30c7\u30b3\u30fc\u30c9\u3057\u3066\u308b\n\u3053\u308c\u3067\u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306e\u52d5\u753b\u304c\u4fdd\u5b58\u51fa\u6765\u305f\u3088,\n\u52d5\u753b\u306eID\u306f\u4fdd\u5b58\u3057\u305f\u3044\u52d5\u753b\u306eID\u306b\u5909\u3048\u3066\u306d\u3063\u3001\n\n", "tags": ["\u30cb\u30b3\u30cb\u30b3\u52d5\u753b", "Ruby"]}