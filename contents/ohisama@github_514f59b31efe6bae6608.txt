{"context": "\n\n\u6982\u8981\narduino uno\u306busb host\u3064\u306a\u3044\u3067\u3001android\u3064\u306a\u3044\u3067\u3001L\u30c1\u30ab\u3057\u3066\u307f\u305f\u3002\nandroid\u306f\u3001HT-03A\u3067android 1.6\u3067\u3059\u3002\n\n\u5199\u771f\n\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n#include <SPI.h>\n#include \"Adb.h\"\n\nConnection * connection;\nvoid handler(Connection * connection, adb_eventType event, uint16_t length, uint8_t * data)\n{\n    if (event == ADB_CONNECTION_RECEIVE)\n    {\n        if (data[0] == 1)\n        {\n            digitalWrite(2, HIGH);\n        }\n        if (data[0] == 2)\n        {\n            digitalWrite(2, LOW);\n        }\n    }\n}\nvoid setup()\n{\n    Serial.begin(115200);\n    pinMode(2, OUTPUT);\n    digitalWrite(2, HIGH);\n    ADB::init();\n    connection = ADB::addConnection(\"tcp:4567\", true, handler);\n}\nvoid loop()\n{\n    ADB::poll();\n}\n\n\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\npackage com.ohisamallc.ohiapp123;\n\nimport java.io.IOException;\nimport org.microbridge.server.AbstractServerListener;\nimport org.microbridge.server.Server;\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.os.Handler;\nimport android.util.Log;\nimport android.view.View;\nimport android.view.View.OnClickListener;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\npublic class ohiapp123 extends Activity\n{\n    Server server = null;\n    Handler mHandler = new Handler();\n    private Button mButton;\n    private EditText mText1;\n    private TextView mTextView2;\n    @Override public void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.main);\n        mButton = (Button) findViewById(R.id.Button01);\n        mButton.setText(\" send \");\n        mButton.setTextSize(50);\n        mText1 = (EditText) findViewById(R.id.editText1);\n        mText1.setText(\"2345\");\n        mText1.setTextSize(30);\n        mText1.setHeight(50);\n        mTextView2 = (TextView) findViewById(R.id.TextView02);\n        mTextView2.setText(\"ok\");\n        mTextView2.setTextSize(30);\n        mTextView2.setHeight(50);\n        try\n        {\n            server = new Server(4567);\n            server.start();\n        }\n        catch (IOException e)\n        {\n            System.exit(-1);\n        }\n        mButton.setOnClickListener(new OnClickListener()\n        {\n            @Override public void onClick(View v)\n            {\n                String command = mText1.getText().toString();\n                sendCommand(command);\n            }\n        });\n        server.addListener(new AbstractServerListener()\n        {\n            @Override public void onReceive(org.microbridge.server.Client client, byte[] data)\n            {\n                if (data.length > 0)\n                {\n                    final String message = new String(data);\n                    mHandler.post(new Runnable()\n                    {\n                        @Override public void run()\n                        {\n                            mTextView2.setText(message);\n                        }\n                    });\n                }\n            };\n        });\n    }\n    private void sendCommand(String command)\n    {\n        int n = Integer.parseInt(command);\n        if (n < 1) return;\n        byte[] b = new byte[4];\n        b[0] = (byte) (n >>> 0);\n        b[1] = (byte) (n >>> 8);\n        b[2] = (byte) (n >>> 16);\n        b[3] = (byte) (n >>> 24);\n        try\n        {\n            server.send(b);\n            mTextView2.setText(\"\");\n        }\n        catch (IOException e)\n        {\n        }\n    }\n    @Override protected void onDestroy()\n    {\n        if (server.isRunning())\n        {\n            server.stop();\n        }\n        super.onDestroy();\n    }\n}\n\n\n#\u6982\u8981\narduino uno\u306busb host\u3064\u306a\u3044\u3067\u3001android\u3064\u306a\u3044\u3067\u3001L\u30c1\u30ab\u3057\u3066\u307f\u305f\u3002\nandroid\u306f\u3001HT-03A\u3067android 1.6\u3067\u3059\u3002\n#\u5199\u771f\n![MVC-005S.JPG](https://qiita-image-store.s3.amazonaws.com/0/18104/f4eccee8-564d-b361-fb57-d985647c9c90.jpeg)\n\n#\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n```\n#include <SPI.h>\n#include \"Adb.h\"\n\nConnection * connection;\nvoid handler(Connection * connection, adb_eventType event, uint16_t length, uint8_t * data)\n{\n\tif (event == ADB_CONNECTION_RECEIVE)\n\t{\n\t\tif (data[0] == 1)\n\t\t{\n\t\t\tdigitalWrite(2, HIGH);\n\t\t}\n\t\tif (data[0] == 2)\n\t\t{\n\t\t\tdigitalWrite(2, LOW);\n\t\t}\n\t}\n}\nvoid setup()\n{\n\tSerial.begin(115200);\n\tpinMode(2, OUTPUT);\n\tdigitalWrite(2, HIGH);\n\tADB::init();\n\tconnection = ADB::addConnection(\"tcp:4567\", true, handler);\n}\nvoid loop()\n{\n\tADB::poll();\n}\n\n```\n#\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n```\npackage com.ohisamallc.ohiapp123;\n\nimport java.io.IOException;\nimport org.microbridge.server.AbstractServerListener;\nimport org.microbridge.server.Server;\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.os.Handler;\nimport android.util.Log;\nimport android.view.View;\nimport android.view.View.OnClickListener;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\npublic class ohiapp123 extends Activity\n{\n\tServer server = null;\n\tHandler mHandler = new Handler();\n\tprivate Button mButton;\n\tprivate EditText mText1;\n\tprivate TextView mTextView2;\n\t@Override public void onCreate(Bundle savedInstanceState)\n\t{\n\t\tsuper.onCreate(savedInstanceState);\n\t\tsetContentView(R.layout.main);\n\t\tmButton = (Button) findViewById(R.id.Button01);\n\t\tmButton.setText(\" send \");\n\t\tmButton.setTextSize(50);\n\t\tmText1 = (EditText) findViewById(R.id.editText1);\n\t\tmText1.setText(\"2345\");\n\t\tmText1.setTextSize(30);\n\t\tmText1.setHeight(50);\n\t\tmTextView2 = (TextView) findViewById(R.id.TextView02);\n\t\tmTextView2.setText(\"ok\");\n\t\tmTextView2.setTextSize(30);\n\t\tmTextView2.setHeight(50);\n\t\ttry\n\t\t{\n\t\t\tserver = new Server(4567);\n\t\t\tserver.start();\n\t\t}\n\t\tcatch (IOException e)\n\t\t{\n\t\t\tSystem.exit(-1);\n\t\t}\n\t\tmButton.setOnClickListener(new OnClickListener()\n\t\t{\n\t\t\t@Override public void onClick(View v)\n\t\t\t{\n\t\t\t\tString command = mText1.getText().toString();\n\t\t\t\tsendCommand(command);\n\t\t\t}\n\t\t});\n\t\tserver.addListener(new AbstractServerListener()\n\t\t{\n\t\t\t@Override public void onReceive(org.microbridge.server.Client client, byte[] data)\n\t\t\t{\n\t\t\t\tif (data.length > 0)\n\t\t\t\t{\n\t\t\t\t\tfinal String message = new String(data);\n\t\t\t\t\tmHandler.post(new Runnable()\n\t\t\t\t\t{\n\t\t\t\t\t\t@Override public void run()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmTextView2.setText(message);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t}\n\tprivate void sendCommand(String command)\n\t{\n\t\tint n = Integer.parseInt(command);\n\t\tif (n < 1) return;\n\t\tbyte[] b = new byte[4];\n\t\tb[0] = (byte) (n >>> 0);\n\t\tb[1] = (byte) (n >>> 8);\n\t\tb[2] = (byte) (n >>> 16);\n\t\tb[3] = (byte) (n >>> 24);\n\t\ttry\n\t\t{\n\t\t\tserver.send(b);\n\t\t\tmTextView2.setText(\"\");\n\t\t}\n\t\tcatch (IOException e)\n\t\t{\n\t\t}\n\t}\n\t@Override protected void onDestroy()\n\t{\n\t\tif (server.isRunning())\n\t\t{\n\t\t\tserver.stop();\n\t\t}\n\t\tsuper.onDestroy();\n\t}\n}\n\n```\n", "tags": ["Arduino", "usbhost", "L\u30c1\u30ab", "Android"]}