{"context": " More than 1 year has passed since last update.\u30bf\u30a4\u30c8\u30eb\u306e\u901a\u308a\u3001\u4efb\u610f\u306e\u30b3\u30de\u30f3\u30c9\u3092Web\u30b5\u30fc\u30d0\u30fc\u5316\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\nGo\u8a00\u8a9e\u3067\u4f5c\u3063\u3066\u3044\u308b\u306e\u3067\u30af\u30ed\u30b9\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u4f7f\u3048\u307e\u3059\u3002\nviewb -Github\n\u4f7f\u3044\u65b9\u306f\u7c21\u5358\u3002\n\u3053\u3093\u306a\u611f\u3058\u3067 viewb \u306e\u5f8c\u306bWeb\u30b5\u30fc\u30d0\u30fc\u5316\u3057\u305f\u3044\u30b3\u30de\u30f3\u30c9\u3092\u7d9a\u3051\u308b\u3068\u30fb\u30fb\u30fb\n\n\u5b9f\u884c\u4f8b\n$viewb ls -l /\n\n\n\n\u3053\u306e\u3088\u3046\u306b\u7d50\u679c\u3092\u30d6\u30e9\u30a6\u30b6\u3067\u78ba\u8a8d\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3073\u306b\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3055\u308c\u308b\u306e\u3067\u3001\u6700\u65b0\u306e\u7d50\u679c\u304c\u5e38\u306b\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u306e\u4ee3\u308f\u308a\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u6307\u5b9a\u3059\u308c\u3070\u30b9\u30af\u30ea\u30d7\u30c8\u3082\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\n\u5916\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3068\u306e\u5c0e\u901a\u78ba\u8a8d\u3057\u3066\u307f\u305f\u308a\n\nPing\n$viewb ping -c 1 8.8.8.8\n\n\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u3066\u7d50\u679c\u3092\u78ba\u8a8d\u3057\u305f\u308a\n\nGoTest\n$viewb go test\n\n\n\n\u610f\u5473\u3082\u306a\u304f\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3066\u3066\u307f\u305f\u308a\n\nItWorks\n$viewb echo It works!\n\n\n\n\u4f7f\u3044\u65b9\u306f\u7121\u9650\u5927\u3002\nBASIC\u8a8d\u8a3c\u3067\u9375\u3092\u304b\u3051\u308b\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u3002\u203b\u8a8d\u8a3c\u304c\u901a\u308b\u307e\u3067\u30b3\u30de\u30f3\u30c9\u306f\u5b9f\u884c\u3055\u308c\u307e\u305b\u3093\u3002\n\nbalse\n$viewb -user laputa -pass balse echo booomb!\n\n\n\n\u4e2d\u8eab\n\u4ee5\u4e0b\u304cviewb\u30b3\u30de\u30f3\u30c9\u306e\u30bd\u30fc\u30b9\u3067\u3059\u3002Go\u8a00\u8a9e\u3067\u4f5c\u3063\u3066\u307e\u3059\u3002\n\u3084\u3063\u3066\u308b\u3053\u3068\u304c\u5358\u7d14\u306a\u3060\u3051\u3042\u3063\u3066\u3001\u4e2d\u8eab\u3082\u5358\u7d14\u3067\u3059\u3002\n\u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30f3\u306eWeb\u30b5\u30fc\u30d0\u30fc\u3092\u7c21\u5358\u306b\u7d44\u307f\u8fbc\u3093\u3067\u914d\u5e03\u3067\u304d\u308b\u306e\u306fGo\u8a00\u8a9e\u306e\u5927\u304d\u306a\u9b45\u529b\u3067\u3059\u306d\u3002\n\nviewb.go\npackage main\n\nimport (\n    \"flag\"\n    \"fmt\"\n    \"net/http\"\n    \"os\"\n    \"os/exec\"\n    \"runtime\"\n    \"strconv\"\n    \"strings\"\n)\n\nvar (\n    port int\n    user string\n    pass string\n    com  string\n)\n\nfunc main() {\n    //parse args\n    flag.IntVar(&port, \"p\", 8080, \"port /default:8080\")\n    flag.StringVar(&user, \"user\", \"\", \"user (BASIC AUTH)\")\n    flag.StringVar(&pass, \"pass\", \"\", \"pass (BASIC AUTH)\")\n    flag.Parse()\n    com = strings.Join(flag.Args(), \" \")\n    //start server\n    fmt.Println(\"http://localhost\" + \":\" + strconv.Itoa(port))\n    fmt.Println(\"Stop: Ctrl+C\")\n    http.HandleFunc(\"/\", handler)\n    err := http.ListenAndServe(\":\"+strconv.Itoa(port), nil)\n    if err != nil {\n        fmt.Fprintln(os.Stderr, err.Error())\n        os.Exit(1)\n    }\n}\n\n//handler: command result\nfunc handler(w http.ResponseWriter, r *http.Request) {\n    w.Header().Set(\"Content-Type\", \"text/plain; charset=UTF-8\")\n    if auth(r) == false {\n        w.Header().Set(\"WWW-Authenticate\", `Basic realm=\"MY REALM\"`)\n        w.WriteHeader(401)\n        w.Write([]byte(\"401 Unauthorized\\n\"))\n        return\n    }\n    fmt.Fprint(w, cmd(com))\n}\n\n//exec command\nfunc cmd(commandString string) string {\n    var command string\n    var op string\n    if runtime.GOOS == \"windows\" {\n        command = \"cmd\"\n        op = \"/c\"\n    } else {\n        command = \"/bin/sh\"\n        op = \"-c\"\n    }\n    out, err := exec.Command(command, op, commandString).Output()\n    if err != nil {\n        return string(err.Error())\n    }\n    return string(out)\n}\n\n//basic auth\nfunc auth(r *http.Request) bool {\n    if user == \"\" || pass == \"\" {\n        return true\n    }\n    _user, _pass, ok := r.BasicAuth()\n    if ok == false {\n        return false\n    }\n    return _user == user && _pass == pass\n}\n\n\n\n\n\u307e\u3068\u3081\n\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u306f\u3053\u3053\u304b\u3089\u843d\u3068\u305b\u307e\u3059\u3002\nviewb\u3067viewb\u3092\u5b9f\u884c\u3059\u308b\u3068\u5384\u4ecb\u306a\u3053\u3068\u306b\u306a\u308b\u306e\u3067\u3084\u3081\u307e\u3057\u3087\u3046\u3002\n\n\u30bf\u30a4\u30c8\u30eb\u306e\u901a\u308a\u3001\u4efb\u610f\u306e\u30b3\u30de\u30f3\u30c9\u3092Web\u30b5\u30fc\u30d0\u30fc\u5316\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\nGo\u8a00\u8a9e\u3067\u4f5c\u3063\u3066\u3044\u308b\u306e\u3067\u30af\u30ed\u30b9\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u4f7f\u3048\u307e\u3059\u3002\n\n[viewb -Github](https://github.com/kurehajime/viewb)\n\n\u4f7f\u3044\u65b9\u306f\u7c21\u5358\u3002\n\n\u3053\u3093\u306a\u611f\u3058\u3067 viewb \u306e\u5f8c\u306bWeb\u30b5\u30fc\u30d0\u30fc\u5316\u3057\u305f\u3044\u30b3\u30de\u30f3\u30c9\u3092\u7d9a\u3051\u308b\u3068\u30fb\u30fb\u30fb\n\n```sh:\u5b9f\u884c\u4f8b\n$viewb ls -l /\n\n```\n\n\u3053\u306e\u3088\u3046\u306b\u7d50\u679c\u3092\u30d6\u30e9\u30a6\u30b6\u3067\u78ba\u8a8d\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3073\u306b\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3055\u308c\u308b\u306e\u3067\u3001\u6700\u65b0\u306e\u7d50\u679c\u304c\u5e38\u306b\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u306e\u4ee3\u308f\u308a\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u6307\u5b9a\u3059\u308c\u3070\u30b9\u30af\u30ea\u30d7\u30c8\u3082\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\n![viewb_ss.png](https://qiita-image-store.s3.amazonaws.com/0/33890/c8f28503-0c58-f45f-0841-115829560aac.png \"viewb_ss.png\")\n\n\n\u5916\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3068\u306e\u5c0e\u901a\u78ba\u8a8d\u3057\u3066\u307f\u305f\u308a\n\n```sh:Ping\n$viewb ping -c 1 8.8.8.8\n\n```\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u3066\u7d50\u679c\u3092\u78ba\u8a8d\u3057\u305f\u308a\n\n```sh:GoTest\n$viewb go test\n\n```\n\n\u610f\u5473\u3082\u306a\u304f\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3066\u3066\u307f\u305f\u308a\n\n```sh:ItWorks\n$viewb echo It works!\n\n```\n\n\n\n\n\u4f7f\u3044\u65b9\u306f\u7121\u9650\u5927\u3002\n\nBASIC\u8a8d\u8a3c\u3067\u9375\u3092\u304b\u3051\u308b\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u3002\u203b\u8a8d\u8a3c\u304c\u901a\u308b\u307e\u3067\u30b3\u30de\u30f3\u30c9\u306f\u5b9f\u884c\u3055\u308c\u307e\u305b\u3093\u3002\n\n```sh:balse\n$viewb -user laputa -pass balse echo booomb!\n```\n\n\n\n## \u4e2d\u8eab\n\n\u4ee5\u4e0b\u304cviewb\u30b3\u30de\u30f3\u30c9\u306e\u30bd\u30fc\u30b9\u3067\u3059\u3002Go\u8a00\u8a9e\u3067\u4f5c\u3063\u3066\u307e\u3059\u3002\n\u3084\u3063\u3066\u308b\u3053\u3068\u304c\u5358\u7d14\u306a\u3060\u3051\u3042\u3063\u3066\u3001\u4e2d\u8eab\u3082\u5358\u7d14\u3067\u3059\u3002\n\u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30f3\u306eWeb\u30b5\u30fc\u30d0\u30fc\u3092\u7c21\u5358\u306b\u7d44\u307f\u8fbc\u3093\u3067\u914d\u5e03\u3067\u304d\u308b\u306e\u306fGo\u8a00\u8a9e\u306e\u5927\u304d\u306a\u9b45\u529b\u3067\u3059\u306d\u3002\n\n```go:viewb.go\npackage main\n\nimport (\n\t\"flag\"\n\t\"fmt\"\n\t\"net/http\"\n\t\"os\"\n\t\"os/exec\"\n\t\"runtime\"\n\t\"strconv\"\n\t\"strings\"\n)\n\nvar (\n\tport int\n\tuser string\n\tpass string\n\tcom  string\n)\n\nfunc main() {\n\t//parse args\n\tflag.IntVar(&port, \"p\", 8080, \"port /default:8080\")\n\tflag.StringVar(&user, \"user\", \"\", \"user (BASIC AUTH)\")\n\tflag.StringVar(&pass, \"pass\", \"\", \"pass (BASIC AUTH)\")\n\tflag.Parse()\n\tcom = strings.Join(flag.Args(), \" \")\n\t//start server\n\tfmt.Println(\"http://localhost\" + \":\" + strconv.Itoa(port))\n\tfmt.Println(\"Stop: Ctrl+C\")\n\thttp.HandleFunc(\"/\", handler)\n\terr := http.ListenAndServe(\":\"+strconv.Itoa(port), nil)\n\tif err != nil {\n\t\tfmt.Fprintln(os.Stderr, err.Error())\n\t\tos.Exit(1)\n\t}\n}\n\n//handler: command result\nfunc handler(w http.ResponseWriter, r *http.Request) {\n\tw.Header().Set(\"Content-Type\", \"text/plain; charset=UTF-8\")\n\tif auth(r) == false {\n\t\tw.Header().Set(\"WWW-Authenticate\", `Basic realm=\"MY REALM\"`)\n\t\tw.WriteHeader(401)\n\t\tw.Write([]byte(\"401 Unauthorized\\n\"))\n\t\treturn\n\t}\n\tfmt.Fprint(w, cmd(com))\n}\n\n//exec command\nfunc cmd(commandString string) string {\n\tvar command string\n\tvar op string\n\tif runtime.GOOS == \"windows\" {\n\t\tcommand = \"cmd\"\n\t\top = \"/c\"\n\t} else {\n\t\tcommand = \"/bin/sh\"\n\t\top = \"-c\"\n\t}\n\tout, err := exec.Command(command, op, commandString).Output()\n\tif err != nil {\n\t\treturn string(err.Error())\n\t}\n\treturn string(out)\n}\n\n//basic auth\nfunc auth(r *http.Request) bool {\n\tif user == \"\" || pass == \"\" {\n\t\treturn true\n\t}\n\t_user, _pass, ok := r.BasicAuth()\n\tif ok == false {\n\t\treturn false\n\t}\n\treturn _user == user && _pass == pass\n}\n\n```\n\n## \u307e\u3068\u3081\n\n\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u306f[\u3053\u3053](https://github.com/kurehajime/viewb/releases)\u304b\u3089\u843d\u3068\u305b\u307e\u3059\u3002\nviewb\u3067viewb\u3092\u5b9f\u884c\u3059\u308b\u3068\u5384\u4ecb\u306a\u3053\u3068\u306b\u306a\u308b\u306e\u3067\u3084\u3081\u307e\u3057\u3087\u3046\u3002\n", "tags": ["ShellScript", "\u30b5\u30fc\u30d0\u30fc", "Go\u8a00\u8a9e", "golang", "Go"]}