{"context": "symfony\u516c\u5f0f\u306b\u306ffilter\u3057\u304b\u66f8\u3044\u3066\u306a\u3044\u306e\u3067\u3088\u304f\u4f7f\u3044\u305d\u3046\u306a\nfunction,filter,global\u306etwig\u62e1\u5f35\u306e\u30e1\u30e2\u3002\n\n\u30af\u30e9\u30b9\u4f8b\nnamespace CommonBundle\\Twig\\Extension;\n\nclass CommonExtension extends \\Twig_Extension implements \\Twig_Extension_GlobalsInterface\n{\n\n    protected $container;\n\n    public function __construct(ContainerInterface $container)\n    {\n        $this->container = $container;\n    }\n\n    public function getName()\n    {\n        return \"common_extension\";\n    }\n\n    /**\n     * twig\u3067\u4f7f\u7528\u3059\u308bfilter\u3092\u8a2d\u5b9a\n     *\n     * @return array\n     */\n    public function getFilters() {\n        return [\n            new \\Twig_SimpleFilter('date'  ,[$this, 'dateFilter']),\n           ];\n    }\n\n\n    /**\n     * twig\u3067\u4f7f\u7528\u3059\u308bfunction\u3092\u8a2d\u5b9a\n     *\n     * @return array\n     */\n    public function getFunctions() {\n        return [\n            new \\Twig_SimpleFunction('testFunction', [$this, 'testFunction']),\n        ];\n    }\n\n    /**\n     * twig\u3067\u4f7f\u7528\u3059\u308bglobal\u5909\u6570\u3092\u8a2d\u5b9a\n     *\n     * @return array\n     */\n    public function getGlobals()\n    {\n       //twig\u5185\u3067\u4f7f\u7528\u3057\u305f\u3044\u5909\u6570\u3068\u304b\u3092\u8fd4\u308a\u5024\u306b\u8a2d\u5b9a\n        $user = \"hogehoge\";\n        return [\n            'user' => $user,\n        ];\n    }\n\n    /**\n     * @param  $dateTime\n     * @return string\n     */\n    public function dateFilter($dateTime)\n    {\n        // \u4f55\u304b\u51e6\u7406\n        return $hoge;\n    }\n\n        /**\n     * @param  hoge \n     * @return string\n     */\n    public function testFunction($hoge)\n    {\n        // \u4f55\u304b\u51e6\u7406\n        return $hoge;\n    }\n}\n\n\nDI\u8a2d\u5b9a\n\nservice.yml\n\u30b5\u30fc\u30d3\u30b9\u30b3\u30f3\u30c6\u30ca\u30fc\u3092\u4f7f\u3046\u5834\u5408\n    common.twig.extension:\n        class: CommonBundle\\Twig\\Extension\\CommonExtension\n        arguments: ['@service_container' ]\n        tags:\n            - { name: twig.extension }\n\n\ntwig\u5074\n\nfilter\n{{ dateTime|date }}\n\n\nfunction\n{{ testFunction(\"hogehoge\") }}\n\ngetGlobal\u3067\u6307\u5b9a\u3057\u305f\u5909\u6570\u306ftwig\u5074\u3067\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\n{{ user }}\n\nhogehoge\n\n\u3068\u51fa\u308b\u306f\u305a\u3002\nsymfony\u516c\u5f0f\u306b\u306ffilter\u3057\u304b\u66f8\u3044\u3066\u306a\u3044\u306e\u3067\u3088\u304f\u4f7f\u3044\u305d\u3046\u306a\nfunction,filter,global\u306etwig\u62e1\u5f35\u306e\u30e1\u30e2\u3002\n\n###\u30af\u30e9\u30b9\u4f8b\n\n```\nnamespace CommonBundle\\Twig\\Extension;\n\nclass CommonExtension extends \\Twig_Extension implements \\Twig_Extension_GlobalsInterface\n{\n\n    protected $container;\n\n    public function __construct(ContainerInterface $container)\n    {\n        $this->container = $container;\n    }\n\n    public function getName()\n    {\n        return \"common_extension\";\n    }\n\n    /**\n     * twig\u3067\u4f7f\u7528\u3059\u308bfilter\u3092\u8a2d\u5b9a\n     *\n     * @return array\n     */\n    public function getFilters() {\n        return [\n            new \\Twig_SimpleFilter('date'  ,[$this, 'dateFilter']),\n           ];\n    }\n\n\n    /**\n     * twig\u3067\u4f7f\u7528\u3059\u308bfunction\u3092\u8a2d\u5b9a\n     *\n     * @return array\n     */\n    public function getFunctions() {\n        return [\n            new \\Twig_SimpleFunction('testFunction', [$this, 'testFunction']),\n        ];\n    }\n\n    /**\n     * twig\u3067\u4f7f\u7528\u3059\u308bglobal\u5909\u6570\u3092\u8a2d\u5b9a\n     *\n     * @return array\n     */\n    public function getGlobals()\n    {\n       //twig\u5185\u3067\u4f7f\u7528\u3057\u305f\u3044\u5909\u6570\u3068\u304b\u3092\u8fd4\u308a\u5024\u306b\u8a2d\u5b9a\n        $user = \"hogehoge\";\n        return [\n            'user' => $user,\n        ];\n    }\n\n    /**\n     * @param  $dateTime\n     * @return string\n     */\n    public function dateFilter($dateTime)\n    {\n        // \u4f55\u304b\u51e6\u7406\n        return $hoge;\n    }\n\n        /**\n     * @param  hoge \n     * @return string\n     */\n    public function testFunction($hoge)\n    {\n        // \u4f55\u304b\u51e6\u7406\n        return $hoge;\n    }\n}\n```\n\n### DI\u8a2d\u5b9a\n####service.yml\n\u30b5\u30fc\u30d3\u30b9\u30b3\u30f3\u30c6\u30ca\u30fc\u3092\u4f7f\u3046\u5834\u5408\n\n```\n    common.twig.extension:\n        class: CommonBundle\\Twig\\Extension\\CommonExtension\n        arguments: ['@service_container' ]\n        tags:\n            - { name: twig.extension }\n```\n\n###twig\u5074\n\n####filter\n\n```\n{{ dateTime|date }}\n```\n####function \n\n```\n{{ testFunction(\"hogehoge\") }}\n```\n\ngetGlobal\u3067\u6307\u5b9a\u3057\u305f\u5909\u6570\u306ftwig\u5074\u3067\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\n\n```\n{{ user }}\n```\n\n```\nhogehoge\n```\n\u3068\u51fa\u308b\u306f\u305a\u3002\n", "tags": ["PHP", "Symfony2", "twig"]}