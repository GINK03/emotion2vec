{"context": "\n\n\u76ee\u7684\n\u30b9\u30c8\u30ec\u30fc\u30b8\u5bb9\u91cf\u304c\u8db3\u308a\u306a\u304f\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u3001Thick\u304b\u3089Thin\u306b\u5909\u66f4\u3057\u3066\u5bb9\u91cf\u7bc0\u7d04\u3057\u305f\u3044\n\n\n\u30b3\u30de\u30f3\u30c9\u4f5c\u696d\n\u5bfe\u8c61\u30db\u30b9\u30c8\u306bssh\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3001vmkfstools\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\n[root@vmware-esx01:~] vmkfstools\nNo valid command specified\n\n\nOPTIONS FOR FILE SYSTEMS:\n\nvmkfstools -C --createfs [vmfs5|vfat]\n               -S --setfsname fsName\n           -Z --spanfs span-partition\n           -G --growfs grown-partition\n   deviceName\n\n           -P --queryfs -h --humanreadable\n           -T --upgradevmfs\n   vmfsPath\n           -y --reclaimBlocks vmfsPath [--reclaimBlocksUnit #blocks]\n\nOPTIONS FOR VIRTUAL DISKS:\n\nvmkfstools -c --createvirtualdisk #[bBsSkKmMgGtT]\n               -d --diskformat [zeroedthick\n                               |thin\n                               |eagerzeroedthick\n                               ]\n               -a --adaptertype [deprecated]\n               -W --objecttype [file|vsan|vvol]\n               --policyFile <fileName>\n           -w --writezeros\n           -j --inflatedisk\n           -k --eagerzero\n           -K --punchzero\n           -U --deletevirtualdisk\n           -E --renamevirtualdisk srcDisk\n           -i --clonevirtualdisk srcDisk\n               -d --diskformat [zeroedthick\n                               |thin\n                               |eagerzeroedthick\n                               |rdm:<device>|rdmp:<device>\n                               |2gbsparse]\n               -W --object [file|vsan|vvol]\n               --policyFile <fileName>\n               -N --avoidnativeclone\n           -X --extendvirtualdisk #[bBsSkKmMgGtT]\n               [-d --diskformat eagerzeroedthick]\n           -M --migratevirtualdisk\n           -r --createrdm /vmfs/devices/disks/...\n           -q --queryrdm\n           -z --createrdmpassthru /vmfs/devices/disks/...\n           -v --verbose #\n           -g --geometry\n           -x --fix [check|repair]\n           -e --chainConsistent\n           -Q --objecttype name/value pair\n           --uniqueblocks childDisk\n   vmfsPath\n\nOPTIONS FOR DEVICES: \n\n           -L --lock [reserve|release|lunreset|targetreset|busreset|readkeys|readresv\n                     ] /vmfs/devices/disks/...\n           -B --breaklock /vmfs/devices/disks/...\n\nvmkfstools -H --help\n\n\u5bfe\u8c61\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u30d5\u30a9\u30eb\u30c0\u3092\u898b\u307e\u3059\n[root@vmware-esx01:~] ls -alh /vmfs/volumes/Datastore\\ 1/ZVM-test/\ntotal 9891856\ndrwxr-xr-x    1 root     root        1.4K Aug  4 08:46 .\ndrwxr-xr-t    1 root     root        2.7K Aug 10 16:32 ..\n-rw-r--r--    1 root     root         552 Aug  4 08:46 ZVM-test-70f957a2.hlog\n-rw-------    1 root     root       40.0G Aug  4 08:46 ZVM-test-flat.vmdk\n-rw-------    1 root     root        8.5K Aug  4 08:46 ZVM-test.nvram\n-rw-------    1 root     root         546 Aug  4 08:46 ZVM-test.vmdk\n-rw-r--r--    1 root     root           0 Aug  4 08:46 ZVM-test.vmsd\n-rwxr-xr-x    1 root     root        2.9K Aug  4 08:46 ZVM-test.vmx\n-rw-------    1 root     root      268.5K Aug  4 08:46 vmware-1.log\n-rw-------    1 root     root      264.6K Aug  4 08:46 vmware.log\n\n\u4e8b\u524d\u306b\u5bfe\u8c61\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u30d1\u30ef\u30fc\u30aa\u30d5\u3057\u3066\u304a\u304d\u3001\n\u3053\u306e\u30d5\u30a9\u30eb\u30c0\u5185\u306evmdk\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u63db\u3092\u304b\u3051\u3066\u30af\u30ed\u30fc\u30f3\u3057\u307e\u3059\n[root@vmware-esx01:~] vmkfstools -i /vmfs/volumes/Datastore\\ 1/ZVM-test/ZVM-test.vmdk -d thin /vmfs/volumes/Datastore\\ 1/ZVM-test/ZVM-test-thin.vmdk\nDestination disk format: VMFS thin-provisioned\nCloning disk '/vmfs/volumes/Datastore 1/ZVM-test/ZVM-test.vmdk'...\nClone: 100% done.\n\n\u30d5\u30a1\u30a4\u30eb\u304c\u3067\u304d\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\n[root@vmware-esx01:~] ls -alh /vmfs/volumes/Datastore\\ 1/ZVM-test/\ntotal 19779600\ndrwxr-xr-x    1 root     root        1.6K Aug 15 08:32 .\ndrwxr-xr-t    1 root     root        2.7K Aug 10 16:32 ..\n-rw-r--r--    1 root     root         552 Aug  4 08:46 ZVM-test-70f957a2.hlog\n-rw-------    1 root     root       40.0G Aug  4 08:46 ZVM-test-flat.vmdk\n-rw-------    1 root     root       40.0G Aug 15 08:29 ZVM-test-thin-flat.vmdk\n-rw-------    1 root     root         551 Aug 15 08:32 ZVM-test-thin.vmdk\n-rw-------    1 root     root        8.5K Aug  4 08:46 ZVM-test.nvram\n-rw-------    1 root     root         546 Aug  4 08:46 ZVM-test.vmdk\n-rw-r--r--    1 root     root           0 Aug  4 08:46 ZVM-test.vmsd\n-rwxr-xr-x    1 root     root        2.9K Aug  4 08:46 ZVM-test.vmx\n-rw-------    1 root     root      268.5K Aug  4 08:46 vmware-1.log\n-rw-------    1 root     root      264.6K Aug  4 08:46 vmware.log\n\n\nvCenter\u304b\u3089\u306e\u4f5c\u696d\n\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u300c\u8a2d\u5b9a\u306e\u7de8\u96c6\u300d\u304b\u3089\u300c\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u300d\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\n\u524a\u9664\u304c\u5b8c\u4e86\u3057\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u305f\u5f8c\u3001\u300c\u8a2d\u5b9a\u306e\u7de8\u96c6\u300d-->\u300c\u65b0\u898f\u30c7\u30d0\u30a4\u30b9\u300d-->\u300c\u65e2\u5b58\u306e\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u300d\u304b\u3089\u3001\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210\u6e08\u307f\u306e\u300c\u301cthin.vmdk\u300d\u3092\u6307\u5b9a\u3057\u3066\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\n\u78ba\u8a8d\n\u518d\u5ea6\u3001\u5bb9\u91cf\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001\u30b7\u30f3\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u306b\u3057\u305f\u3053\u3068\u3067\u4f7f\u7528\u9818\u57df\u304c30GB\u307b\u3069\u7bc0\u7d04\u3067\u304d\u307e\u3057\u305f\uff01\n\n\n\u53c2\u8003\n\n\u30b7\u30c3\u30af\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3067\u4f5c\u6210\u3057\u305fvmdk\u3092\u5909\u63db\u3059\u308b - \u96d1\u6728\u6797\nVMware\u3067\u30b2\u30b9\u30c8OS\u306e\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u91cf\u3092\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\u3002\u30b7\u30f3\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u306e\u5834\u5408 | puti se blog\n\n#\u76ee\u7684\n\u30b9\u30c8\u30ec\u30fc\u30b8\u5bb9\u91cf\u304c\u8db3\u308a\u306a\u304f\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u3001Thick\u304b\u3089Thin\u306b\u5909\u66f4\u3057\u3066\u5bb9\u91cf\u7bc0\u7d04\u3057\u305f\u3044\n![vmkfstools_thick_to_thin1-1.png](https://qiita-image-store.s3.amazonaws.com/0/101361/6cbf0217-df90-dfee-863d-8d2eed32bf17.png)\n\n\n#\u30b3\u30de\u30f3\u30c9\u4f5c\u696d\n\u5bfe\u8c61\u30db\u30b9\u30c8\u306bssh\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3001vmkfstools\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\n\n```\n[root@vmware-esx01:~] vmkfstools\nNo valid command specified\n\n\nOPTIONS FOR FILE SYSTEMS:\n\nvmkfstools -C --createfs [vmfs5|vfat]\n               -S --setfsname fsName\n           -Z --spanfs span-partition\n           -G --growfs grown-partition\n   deviceName\n\n           -P --queryfs -h --humanreadable\n           -T --upgradevmfs\n   vmfsPath\n           -y --reclaimBlocks vmfsPath [--reclaimBlocksUnit #blocks]\n\nOPTIONS FOR VIRTUAL DISKS:\n\nvmkfstools -c --createvirtualdisk #[bBsSkKmMgGtT]\n               -d --diskformat [zeroedthick\n                               |thin\n                               |eagerzeroedthick\n                               ]\n               -a --adaptertype [deprecated]\n               -W --objecttype [file|vsan|vvol]\n               --policyFile <fileName>\n           -w --writezeros\n           -j --inflatedisk\n           -k --eagerzero\n           -K --punchzero\n           -U --deletevirtualdisk\n           -E --renamevirtualdisk srcDisk\n           -i --clonevirtualdisk srcDisk\n               -d --diskformat [zeroedthick\n                               |thin\n                               |eagerzeroedthick\n                               |rdm:<device>|rdmp:<device>\n                               |2gbsparse]\n               -W --object [file|vsan|vvol]\n               --policyFile <fileName>\n               -N --avoidnativeclone\n           -X --extendvirtualdisk #[bBsSkKmMgGtT]\n               [-d --diskformat eagerzeroedthick]\n           -M --migratevirtualdisk\n           -r --createrdm /vmfs/devices/disks/...\n           -q --queryrdm\n           -z --createrdmpassthru /vmfs/devices/disks/...\n           -v --verbose #\n           -g --geometry\n           -x --fix [check|repair]\n           -e --chainConsistent\n           -Q --objecttype name/value pair\n           --uniqueblocks childDisk\n   vmfsPath\n\nOPTIONS FOR DEVICES: \n\n           -L --lock [reserve|release|lunreset|targetreset|busreset|readkeys|readresv\n                     ] /vmfs/devices/disks/...\n           -B --breaklock /vmfs/devices/disks/...\n\nvmkfstools -H --help\n```\n\n\u5bfe\u8c61\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u30d5\u30a9\u30eb\u30c0\u3092\u898b\u307e\u3059\n\n```\n[root@vmware-esx01:~] ls -alh /vmfs/volumes/Datastore\\ 1/ZVM-test/\ntotal 9891856\ndrwxr-xr-x    1 root     root        1.4K Aug  4 08:46 .\ndrwxr-xr-t    1 root     root        2.7K Aug 10 16:32 ..\n-rw-r--r--    1 root     root         552 Aug  4 08:46 ZVM-test-70f957a2.hlog\n-rw-------    1 root     root       40.0G Aug  4 08:46 ZVM-test-flat.vmdk\n-rw-------    1 root     root        8.5K Aug  4 08:46 ZVM-test.nvram\n-rw-------    1 root     root         546 Aug  4 08:46 ZVM-test.vmdk\n-rw-r--r--    1 root     root           0 Aug  4 08:46 ZVM-test.vmsd\n-rwxr-xr-x    1 root     root        2.9K Aug  4 08:46 ZVM-test.vmx\n-rw-------    1 root     root      268.5K Aug  4 08:46 vmware-1.log\n-rw-------    1 root     root      264.6K Aug  4 08:46 vmware.log\n```\n\n\u4e8b\u524d\u306b\u5bfe\u8c61\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u30d1\u30ef\u30fc\u30aa\u30d5\u3057\u3066\u304a\u304d\u3001\n\u3053\u306e\u30d5\u30a9\u30eb\u30c0\u5185\u306evmdk\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u63db\u3092\u304b\u3051\u3066\u30af\u30ed\u30fc\u30f3\u3057\u307e\u3059\n\n```\n[root@vmware-esx01:~] vmkfstools -i /vmfs/volumes/Datastore\\ 1/ZVM-test/ZVM-test.vmdk -d thin /vmfs/volumes/Datastore\\ 1/ZVM-test/ZVM-test-thin.vmdk\nDestination disk format: VMFS thin-provisioned\nCloning disk '/vmfs/volumes/Datastore 1/ZVM-test/ZVM-test.vmdk'...\nClone: 100% done.\n```\n\n\u30d5\u30a1\u30a4\u30eb\u304c\u3067\u304d\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\n\n```\n[root@vmware-esx01:~] ls -alh /vmfs/volumes/Datastore\\ 1/ZVM-test/\ntotal 19779600\ndrwxr-xr-x    1 root     root        1.6K Aug 15 08:32 .\ndrwxr-xr-t    1 root     root        2.7K Aug 10 16:32 ..\n-rw-r--r--    1 root     root         552 Aug  4 08:46 ZVM-test-70f957a2.hlog\n-rw-------    1 root     root       40.0G Aug  4 08:46 ZVM-test-flat.vmdk\n-rw-------    1 root     root       40.0G Aug 15 08:29 ZVM-test-thin-flat.vmdk\n-rw-------    1 root     root         551 Aug 15 08:32 ZVM-test-thin.vmdk\n-rw-------    1 root     root        8.5K Aug  4 08:46 ZVM-test.nvram\n-rw-------    1 root     root         546 Aug  4 08:46 ZVM-test.vmdk\n-rw-r--r--    1 root     root           0 Aug  4 08:46 ZVM-test.vmsd\n-rwxr-xr-x    1 root     root        2.9K Aug  4 08:46 ZVM-test.vmx\n-rw-------    1 root     root      268.5K Aug  4 08:46 vmware-1.log\n-rw-------    1 root     root      264.6K Aug  4 08:46 vmware.log\n```\n\n#vCenter\u304b\u3089\u306e\u4f5c\u696d\n\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u300c\u8a2d\u5b9a\u306e\u7de8\u96c6\u300d\u304b\u3089\u300c\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u300d\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n![vmkfstools_thick_to_thin2-1.png](https://qiita-image-store.s3.amazonaws.com/0/101361/5a67e31d-a031-ed63-a51c-8c3c99736672.png)\n\n\u524a\u9664\u304c\u5b8c\u4e86\u3057\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u305f\u5f8c\u3001\u300c\u8a2d\u5b9a\u306e\u7de8\u96c6\u300d-->\u300c\u65b0\u898f\u30c7\u30d0\u30a4\u30b9\u300d-->\u300c\u65e2\u5b58\u306e\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u300d\u304b\u3089\u3001\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210\u6e08\u307f\u306e\u300c\u301cthin.vmdk\u300d\u3092\u6307\u5b9a\u3057\u3066\u8ffd\u52a0\u3057\u307e\u3059\u3002\n![vmkfstools_thick_to_thin3-1.png](https://qiita-image-store.s3.amazonaws.com/0/101361/11f66a96-bdee-67c2-b590-d0a1db85bbb2.png)\n\n#\u78ba\u8a8d\n\u518d\u5ea6\u3001\u5bb9\u91cf\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001\u30b7\u30f3\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u306b\u3057\u305f\u3053\u3068\u3067\u4f7f\u7528\u9818\u57df\u304c30GB\u307b\u3069\u7bc0\u7d04\u3067\u304d\u307e\u3057\u305f\uff01\n![vmkfstools_thick_to_thin4-1.png](https://qiita-image-store.s3.amazonaws.com/0/101361/093089ad-177a-11e0-1685-0aa655a1fc44.png)\n\n#\u53c2\u8003\n- [\u30b7\u30c3\u30af\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3067\u4f5c\u6210\u3057\u305fvmdk\u3092\u5909\u63db\u3059\u308b - \u96d1\u6728\u6797](http://zokibayashi.hatenablog.com/entry/2015/10/12/014943)\n- [VMware\u3067\u30b2\u30b9\u30c8OS\u306e\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u91cf\u3092\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\u3002\u30b7\u30f3\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u306e\u5834\u5408 | puti se blog](http://blog.putise.com/vmware%E3%81%A7%E3%82%B2%E3%82%B9%E3%83%88os%E3%81%AE%E3%83%87%E3%82%A3%E3%82%B9%E3%82%AF%E4%BD%BF%E7%94%A8%E9%87%8F%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95%E3%80%82%E3%82%B7/)\n", "tags": ["SoftLayer", "vmware", "VMware_ESXi", "VMware_vSphere", "VMwareTools"]}