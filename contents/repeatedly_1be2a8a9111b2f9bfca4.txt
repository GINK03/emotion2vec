{"context": " More than 1 year has passed since last update.README\u306f\u82f1\u8a9e\u3067\u66f8\u304b\u308c\u3066\u3044\u308b\u306e\u3067\uff0c\u65e5\u672c\u8a9e\u3067yajl-d\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3059\u308b\u8a18\u4e8b\u3067\u3059\uff0e\u5185\u5bb9\u306f\u57f7\u7b46\u6642\u70b9\u3067\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3042\u308b0.2.0\u3067\u3059\uff0e\n\nyajl-d\nyajl-d\u306fyajl\u306eD\u8a00\u8a9e\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3067\u3059\uff0e\u6a19\u6e96\u306estd.json\u306f\u3061\u3087\u3063\u3068\u4f7f\u3046\u5206\u306b\u306f\u826f\u3044\u3093\u3067\u3059\u304c\uff0c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u304c\u306a\u304b\u3063\u305f\u308a\uff0c\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u7684\u306b\u30c7\u30b3\u30fc\u30c9\u51fa\u6765\u306a\u304b\u3063\u305f\u308a\u3068\uff0c\u3044\u304f\u3064\u304b\u6b32\u3057\u3044\u6a5f\u80fd\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u4f5c\u308a\u307e\u3057\u305f\uff0e\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u307e\u305ayajl\u672c\u4f53\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff0e\u5927\u62b5\u5404OS\u306b\u306f\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\uff0eMac\u306a\u3089homebrew\u3092\u4f7f\u3048\u3070\u697d\u3067\u3059\uff0e\nbrew install yajl\n\nyajl-d\u306fyajl\u3068\u3044\u3046\u540d\u524d\u3067dub\u306b\u767b\u9332\u3057\u3066\u3042\u308b\u306e\u3067\uff0cdub.json\u306edependencies\u306b\u8ffd\u52a0\u3059\u308c\u3070\u5229\u7528\u51fa\u6765\u307e\u3059\uff0e\u4ee5\u4e0b\u306f\u5358\u7d14\u306a\u4f8b\u3067\u3059\uff0e\n  \"dependencies\": {\n    \"yajl\": \">=0.1.2\"\n  }\n\nyajl\u3092\u4f7f\u3046\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306bimport\u3057\u307e\u3059\uff0e\nimport yajl;\n\n\nAPI\n\nencode(value) / decode(json)\n\u5358\u306bJSON\u3092\u6271\u3046\u3060\u3051\u3067\u3042\u308c\u3070\uff0cencode/decode\u306e\u30da\u30a2\u304c\u697d\u3067\u3059\uff0eencode\u306b\u306fJSON\u306b\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u3057\u305f\u3044\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\uff0cdecode\u306b\u306fJSON\u6587\u5b57\u5217\u3092\u6e21\u3057\u307e\u3059\uff0e\n\u307e\u305f\uff0cdecode\u306etemplate\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u306f\uff0cJSON\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u305f\u3044\u578b\u3092\u6307\u5b9a\u3057\u307e\u3059\uff0e\u6307\u5b9a\u3057\u306a\u3051\u308c\u3070\uff0cstd.json.JSONValue\u304c\u8fd4\u308a\u307e\u3059\uff0e\nimport yajl;\n\nstruct Hoge\n{ \n    ulong id;\n    string word;\n    bool yes; \n}\n\nvoid main()\n{\n    // json is {\"id\":100,\"word\":\"hey!\",\"yes\":true}\n    string json = encode(Hoge(100, \"hey!\", true));\n\n    // Convert decoded result into Hoge\n    Hoge hoge = decode!Hoge(json);\n    assert(hoge.id == 100);\n\n    // The default return type is std.json.JSONValue\n    JSONValue jv = decode(json);\n    assert(jv[\"id\"].integer == 100);\n}\n\n\u72ec\u81ea\u306eJSON\u578b\u3092\u4f5c\u3089\u305a\u306bstd.json.JSONValue\u3092\u4f7f\u3063\u305f\u306e\u306f\uff0cJSON\u578b\u306e\u5b9f\u88c5\u3068\u3057\u3066std.json.JSONValue\u306f\u57fa\u672c\u7684\u306a\u6a5f\u80fd\u3092\u5099\u3048\u3066\u3044\u305f\u304b\u3089\u3067\u3059\uff0e\n\nencode(value, opt) / decode(json, opt)\nencode/decode\u306e\u7b2c\u4e8c\u5f15\u6570\u306b\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6e21\u3059\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3059\uff0e\n\nEncoder.Option\n\n\u30aa\u30d7\u30b7\u30e7\u30f3\u7fa4\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\uff0e\u8a73\u7d30\u3092\u8aac\u660e\u3059\u308b\u306e\u304c\u9762\u5012\u306a\u306e\u3067\uff0cyajl\u306e\u8aac\u660e\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\uff0e\nstatic struct Option\n{\n    bool beautify;\n    bool validateUTF8;\n    bool escapeSolidus;\n    string indentString;\n}\n\n\n\nDecoder.Option\n\nEncoder.Option\u3068\u540c\u3058\u304f\uff0c\u8a73\u7d30\u306fyajl\u306e\u8aac\u660e\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\uff0emissingHandler\u306fyajl-d\u72ec\u81ea\u306e\u3082\u306e\u3067\uff0c\u5f8c\u3067\u8aac\u660e\u3057\u307e\u3059\uff0e\nstatic struct Option\n{\n    bool allowComments;\n    bool dontValidateStrings;\n    bool allowTrailingGarbage;\n    bool allowMultipleValues;\n    bool allowPartialValue;\n\n    MissingHandler missingHandler;\n}\n\n\u4e21\u65b9\u3068\u3082\uff0cOption\u3092\u751f\u6210\u3057\u3066\u7b2c\u4e8c\u5f15\u6570\u306b\u6e21\u3059\u3060\u3051\u3067\u3059\uff0e\u4ee5\u4e0b\u306fdecode\u306e\u4f8b\u3067\u3059\uff0e\nDecoder.Option opt;\nopt.allowComments = true;\ndecode(json, opt);\n\n\nEncode / Decoder\nencode/decode\u306f\uff0c\u4e2d\u3067\u306fEncoder\uff0cDecoder\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\uff0e\u3053\u306e\u4e8c\u3064\u3092\u76f4\u63a5\u4f7f\u3048\u3070\uff0c\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u751f\u6210\u3092\u6291\u3048\u3066\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u6539\u5584\u3067\u304d\uff0c\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u7684\u306b\u30c7\u30b3\u30fc\u30c9\u304c\u51fa\u6765\u305f\u308a\u3057\u307e\u3059\uff0e\nEncoder\u306f\u304b\u306a\u308a\u30b7\u30f3\u30d7\u30eb\u306a\u5b9f\u88c5\u306b\u306a\u3063\u3066\u3044\u307e\u3059\uff0eencode(value)\u306e\u4e2d\u8eab\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\uff0e\nEncoder encoder;\nencoder.encode(value);\n\n// Encoder\u3092\u4f7f\u3044\u56de\u3059\u3053\u3068\u3067\u751f\u6210\u30b3\u30b9\u30c8\u3092\u6291\u3048\u3089\u308c\u308b\nencoder.encode(value2);\n\nDecoder\u306f\u5b9f\u88c5\u304c\u305d\u3082\u305d\u3082Streaming Decoder\u306b\u306a\u3063\u3066\u3044\u3066\uff0c\u5c11\u3057API\u304cEncoder\u3068\u306f\u9055\u3044\u307e\u3059\uff0e\u4ee5\u4e0b\u304cdecode\u306e\u4e2d\u8eab\u3067\u3059\uff0e\nDecoder decoder;\nif (decoder.decode(json))\n    return decoder.decodedValue!T;\n\ndecode\u3067\u306f\u30c7\u30b3\u30fc\u30c9\u51fa\u6765\u305f\u304b\u3069\u3046\u304b\u304c\u771f\u507d\u5024\u3067\u8fd4\u3063\u3066\u304d\u307e\u3059\uff0efalse\u3060\u3063\u305f\u5834\u5408\u306b\u306f\u4e0d\u5b8c\u5168\u306aJSON\u304c\u6e21\u3063\u3066\u304d\u305f\u3068\u3044\u3046\u3053\u3068\u3067\uff0c\u6b21\u306edecode\u547c\u3073\u51fa\u3057\u306b\u3055\u3089\u306bJSON\u3092\u6e21\u305b\u307e\u3059\uff0e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u4e0a\u3060\u3068\u65ad\u7d9a\u7684\u306b\u30c7\u30fc\u30bf\u304c\u6e21\u3063\u3066\u304d\u305f\u308a\u3059\u308b\u306e\u3067\uff0c\u305d\u306e\u3088\u3046\u306a\u5834\u5408\u306b\u52b9\u7387\u7684\u306b\u30c7\u30b3\u30fc\u30c9\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u307e\u3059\uff0e\n\u305d\u306e\u5f8c\uff0cdecodedValue\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u3067\uff0c\u30c7\u30b3\u30fc\u30c9\u7d50\u679c\u3092\u53d6\u5f97\u51fa\u6765\u307e\u3059\uff0e\nDecoder\u306f\u5185\u90e8\u306b\u72b6\u614b\u3092\u6301\u3063\u3066\u3044\u3066\uff0c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u8907\u6570JSON\u3092\u9023\u7d9a\u3057\u3066\u30c7\u30b3\u30fc\u30c9\u51fa\u6765\u306a\u304f\u306a\u3063\u3066\u3044\u307e\u3059\uff0e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f7f\u3044\u56de\u3057\u3066\u52b9\u7387\u7684\u306b\u30c7\u30b3\u30fc\u30c9\u3059\u308b\u306b\u306f\uff0c\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u307e\u3059\uff0e\nDecoder.Option opt;\nopt.allowMultipleValues = true;\nDecoder decoder = Decoder(opt);\nforeach (j; jsons) {\n    decoder.decode(j);\n    decoder.decodedValue;\n}\n\n\nJSON\u3067\u30ad\u30fc\u304c\u8db3\u308a\u306a\u3044\u6642\u306b\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3059\u308b\nDecoder.Option\u306emissingHandler\u3092\u30bb\u30c3\u30c8\u3059\u308b\u3068\uff0c\u53d7\u3051\u53d6\u3063\u305fJSON\u3092\u69cb\u9020\u4f53\u306b\u5909\u63db\u3059\u308b\u6642\u306b\u30ad\u30fc\u304c\u898b\u3064\u304b\u3089\u306a\u3051\u308c\u3070\uff0c\u305d\u306e\u30ad\u30fc\u3092\u5f15\u6570\u306b\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u304c\u547c\u3070\u308c\u307e\u3059\uff0e\nstruct Test\n{\n    string name;\n    int age;\n}\n\nvoid main()\n{\n    auto encoded = `{ \"name\": \"Bob\", \"age\": 20}`;\n    auto missing = `{ \"name\": \"Bob\"}`;\n\n    Decoder.Option opt;\n    opt.missingHandler = (string field) { writeln(field); };\n    writeln(decode!Test(encoded, opt));\n    writeln(decode!Test(missing, opt)); // Callback called with missing field\n}\n\n\nD\u8a00\u8a9e\u306e\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u6301\u3064JSON\u3092\u6271\u3046\n\u4eca\u307e\u3067\u306e\u4f8b\u3092\u898b\u308c\u3070\u5206\u304b\u308b\u3088\u3046\u306b\uff0cyajl-d\u306f\u69cb\u9020\u4f53\u3084\u30af\u30e9\u30b9\u3092\u30a8\u30f3\u30b3\u30fc\u30c9/\u30c7\u30b3\u30fc\u30c9\u3059\u308b\u3068\u304d\u306b\uff0c\u5404\u30e1\u30f3\u30d0\u306e\u540d\u524d\u3092\u81ea\u52d5\u7684\u306b\u30ad\u30fc\u306b\u3057\u307e\u3059\uff0e\u3057\u304b\u3057\uff0cD\u8a00\u8a9e\u306f\u4e88\u7d04\u8a9e\u306f\u5909\u6570\u540d\u306b\u51fa\u6765\u306a\u3044\u306e\u3067\uff0c\u305d\u306e\u3088\u3046\u306aJSON\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u4e0a\u624b\u304f\u6271\u3048\u307e\u305b\u3093\uff0e\n\u3053\u306e\u30b1\u30fc\u30b9\u306b\u5bfe\u5fdc\u3059\u308b\u306b\u306f\uff0cJSONName\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3044\u307e\u3059\uff0e\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5bfe\u8c61\u306e\u30e1\u30f3\u30d0\u306b\u5bfe\u3057\u3066JSONName\u3092\u4f7f\u3044\uff0c\u30de\u30c3\u30d4\u30f3\u30b0\u5148\u3092\u6307\u5b9a\u51fa\u6765\u307e\u3059\uff0e\nstruct Hoge\n{ \n    ulong id;\n    @JSONName(\"body\") string _body;\n    bool yes; \n}\n\n// {\"id\":100,\"body\":\"hey!\",\"yes\":true}\nstring json = encode(Hoge(100, \"hey!\", true));\n\n\u3053\u306e\u6a5f\u80fd\u306fAdam\u3055\u3093\u304b\u3089\u9802\u3044\u305f\u30d1\u30c3\u30c1\u3067\u5b9f\u73fe\u3057\u307e\u3057\u305f\uff0e\n\n\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\n\u624b\u5143\u306eMBP\u3067std.json\uff0cvibe.data.json\uff0cyajl\u3092\u4f7f\u3063\u3066\uff0c\u69cb\u9020\u4f53\u3092JSON\u6587\u5b57\u5217\u3078\u306e\u30a8\u30f3\u30b3\u30fc\u30c9\uff0cJSON\u6587\u5b57\u5217\u3092JSON\u578b\u3078\u30c7\u30b3\u30fc\u30c9\u3059\u308b\u306e\u3092\u7c21\u5358\u306b\u6bd4\u8f03\u3057\u3066\u307f\u305f\u6240\uff0c\u3068\u308a\u3042\u3048\u305a\u4e00\u756a\u901f\u304b\u3063\u305f(\u30bd\u30fc\u30b9\u306f\u30b3\u30b3)\uff0e\nencode:\njson: 229240 QPS\nvibe: 416995 QPS\nyajl: 624793 QPS\ndecode:\njson: 230197 QPS\nvibe: 271000 QPS\nyajl: 440328 QPS\n\nEncoder/Decoder\u3092\u4f7f\u3063\u3066\u8907\u6570JSON\u3092\u51e6\u7406\u3059\u308c\u3070\uff0c\u3082\u3063\u3068\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u51fa\u307e\u3059\uff0e\u3053\u308c\u306b\u95a2\u3057\u3066\u306fREADME\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u6240\u3092\u898b\u3066\u304f\u3060\u3055\u3044\uff0e\n\n\u307e\u3068\u3081\nyajl-d\uff0cyajl\u4f9d\u5b58\u304c\u3042\u308b\u306e\u3067std.json\u307b\u3069\u624b\u8efd\u3067\u306f\u306a\u3044\u3067\u3059\u304c\uff0c\u8272\u3005\u3068\u8ffd\u52a0\u6a5f\u80fd\u3082\u3042\u308a\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3082\u3044\u3044\u306e\u3067\uff0c\u4f55\u304bD\u8a00\u8a9e\u3067JSON\u3092\u6271\u3046\u3053\u3068\u304c\u3042\u308c\u3070\uff0c\u691c\u8a0e\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044 :)\n\nREADME\u306f\u82f1\u8a9e\u3067\u66f8\u304b\u308c\u3066\u3044\u308b\u306e\u3067\uff0c\u65e5\u672c\u8a9e\u3067[yajl-d](https://github.com/repeatedly/yajl-d)\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3059\u308b\u8a18\u4e8b\u3067\u3059\uff0e\u5185\u5bb9\u306f\u57f7\u7b46\u6642\u70b9\u3067\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3042\u308b0.2.0\u3067\u3059\uff0e\n\n## yajl-d\n\nyajl-d\u306f[yajl](http://lloyd.github.io/yajl/)\u306eD\u8a00\u8a9e\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3067\u3059\uff0e\u6a19\u6e96\u306estd.json\u306f\u3061\u3087\u3063\u3068\u4f7f\u3046\u5206\u306b\u306f\u826f\u3044\u3093\u3067\u3059\u304c\uff0c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u304c\u306a\u304b\u3063\u305f\u308a\uff0c\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u7684\u306b\u30c7\u30b3\u30fc\u30c9\u51fa\u6765\u306a\u304b\u3063\u305f\u308a\u3068\uff0c\u3044\u304f\u3064\u304b\u6b32\u3057\u3044\u6a5f\u80fd\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u4f5c\u308a\u307e\u3057\u305f\uff0e\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u307e\u305ayajl\u672c\u4f53\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff0e\u5927\u62b5\u5404OS\u306b\u306f\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\uff0eMac\u306a\u3089homebrew\u3092\u4f7f\u3048\u3070\u697d\u3067\u3059\uff0e\n\n```sh\nbrew install yajl\n```\n\nyajl-d\u306fyajl\u3068\u3044\u3046\u540d\u524d\u3067dub\u306b\u767b\u9332\u3057\u3066\u3042\u308b\u306e\u3067\uff0cdub.json\u306e`dependencies`\u306b\u8ffd\u52a0\u3059\u308c\u3070\u5229\u7528\u51fa\u6765\u307e\u3059\uff0e\u4ee5\u4e0b\u306f\u5358\u7d14\u306a\u4f8b\u3067\u3059\uff0e\n\n```json\n  \"dependencies\": {\n    \"yajl\": \">=0.1.2\"\n  }\n```\n\nyajl\u3092\u4f7f\u3046\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306bimport\u3057\u307e\u3059\uff0e\n\n```d\nimport yajl;\n```\n\n## API\n\n### encode(value) / decode(json)\n\n\u5358\u306bJSON\u3092\u6271\u3046\u3060\u3051\u3067\u3042\u308c\u3070\uff0c`encode`/`decode`\u306e\u30da\u30a2\u304c\u697d\u3067\u3059\uff0e`encode`\u306b\u306fJSON\u306b\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u3057\u305f\u3044\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\uff0c`decode`\u306b\u306fJSON\u6587\u5b57\u5217\u3092\u6e21\u3057\u307e\u3059\uff0e\n\u307e\u305f\uff0c`decode`\u306etemplate\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u306f\uff0cJSON\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u305f\u3044\u578b\u3092\u6307\u5b9a\u3057\u307e\u3059\uff0e\u6307\u5b9a\u3057\u306a\u3051\u308c\u3070\uff0c`std.json.JSONValue`\u304c\u8fd4\u308a\u307e\u3059\uff0e\n\n```d\nimport yajl;\n\nstruct Hoge\n{ \n    ulong id;\n    string word;\n    bool yes; \n}\n\nvoid main()\n{\n    // json is {\"id\":100,\"word\":\"hey!\",\"yes\":true}\n    string json = encode(Hoge(100, \"hey!\", true));\n\n    // Convert decoded result into Hoge\n    Hoge hoge = decode!Hoge(json);\n    assert(hoge.id == 100);\n\n    // The default return type is std.json.JSONValue\n    JSONValue jv = decode(json);\n    assert(jv[\"id\"].integer == 100);\n}\n```\n\n\u72ec\u81ea\u306eJSON\u578b\u3092\u4f5c\u3089\u305a\u306b`std.json.JSONValue`\u3092\u4f7f\u3063\u305f\u306e\u306f\uff0cJSON\u578b\u306e\u5b9f\u88c5\u3068\u3057\u3066`std.json.JSONValue`\u306f\u57fa\u672c\u7684\u306a\u6a5f\u80fd\u3092\u5099\u3048\u3066\u3044\u305f\u304b\u3089\u3067\u3059\uff0e\n\n### encode(value, opt) / decode(json, opt)\n\n`encode`/`decode`\u306e\u7b2c\u4e8c\u5f15\u6570\u306b\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6e21\u3059\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3059\uff0e\n\n- Encoder.Option\n\n\u30aa\u30d7\u30b7\u30e7\u30f3\u7fa4\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\uff0e\u8a73\u7d30\u3092\u8aac\u660e\u3059\u308b\u306e\u304c\u9762\u5012\u306a\u306e\u3067\uff0c[yajl\u306e\u8aac\u660e](http://lloyd.github.io/yajl/yajl-2.1.0/yajl__gen_8h.html#a57c29080044a7231ac0cf1fead4de4b0)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\uff0e\n\n\n```d\nstatic struct Option\n{\n    bool beautify;\n    bool validateUTF8;\n    bool escapeSolidus;\n    string indentString;\n}\n\n```\n\n- Decoder.Option\n\n`Encoder.Option`\u3068\u540c\u3058\u304f\uff0c\u8a73\u7d30\u306f[yajl\u306e\u8aac\u660e](http://lloyd.github.io/yajl/yajl-2.1.0/yajl__parse_8h.html#a5434a7c3b3165d782ea42c17d6ba9ac3)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\uff0e`missingHandler`\u306fyajl-d\u72ec\u81ea\u306e\u3082\u306e\u3067\uff0c\u5f8c\u3067\u8aac\u660e\u3057\u307e\u3059\uff0e\n\n```d\nstatic struct Option\n{\n    bool allowComments;\n    bool dontValidateStrings;\n    bool allowTrailingGarbage;\n    bool allowMultipleValues;\n    bool allowPartialValue;\n\n    MissingHandler missingHandler;\n}\n```\n\n\u4e21\u65b9\u3068\u3082\uff0cOption\u3092\u751f\u6210\u3057\u3066\u7b2c\u4e8c\u5f15\u6570\u306b\u6e21\u3059\u3060\u3051\u3067\u3059\uff0e\u4ee5\u4e0b\u306fdecode\u306e\u4f8b\u3067\u3059\uff0e\n\n```d\nDecoder.Option opt;\nopt.allowComments = true;\ndecode(json, opt);\n```\n\n### Encode / Decoder\n\n`encode`/`decode`\u306f\uff0c\u4e2d\u3067\u306f`Encoder`\uff0c`Decoder`\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\uff0e\u3053\u306e\u4e8c\u3064\u3092\u76f4\u63a5\u4f7f\u3048\u3070\uff0c\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u751f\u6210\u3092\u6291\u3048\u3066\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u6539\u5584\u3067\u304d\uff0c\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u7684\u306b\u30c7\u30b3\u30fc\u30c9\u304c\u51fa\u6765\u305f\u308a\u3057\u307e\u3059\uff0e\n\n`Encoder`\u306f\u304b\u306a\u308a\u30b7\u30f3\u30d7\u30eb\u306a\u5b9f\u88c5\u306b\u306a\u3063\u3066\u3044\u307e\u3059\uff0e`encode(value)`\u306e\u4e2d\u8eab\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\uff0e\n\n```d\nEncoder encoder;\nencoder.encode(value);\n\n// Encoder\u3092\u4f7f\u3044\u56de\u3059\u3053\u3068\u3067\u751f\u6210\u30b3\u30b9\u30c8\u3092\u6291\u3048\u3089\u308c\u308b\nencoder.encode(value2);\n```\n\n`Decoder`\u306f\u5b9f\u88c5\u304c\u305d\u3082\u305d\u3082Streaming Decoder\u306b\u306a\u3063\u3066\u3044\u3066\uff0c\u5c11\u3057API\u304c`Encoder`\u3068\u306f\u9055\u3044\u307e\u3059\uff0e\u4ee5\u4e0b\u304c`decode`\u306e\u4e2d\u8eab\u3067\u3059\uff0e\n\n```d\nDecoder decoder;\nif (decoder.decode(json))\n    return decoder.decodedValue!T;\n```\n\n`decode`\u3067\u306f\u30c7\u30b3\u30fc\u30c9\u51fa\u6765\u305f\u304b\u3069\u3046\u304b\u304c\u771f\u507d\u5024\u3067\u8fd4\u3063\u3066\u304d\u307e\u3059\uff0e`false`\u3060\u3063\u305f\u5834\u5408\u306b\u306f\u4e0d\u5b8c\u5168\u306aJSON\u304c\u6e21\u3063\u3066\u304d\u305f\u3068\u3044\u3046\u3053\u3068\u3067\uff0c\u6b21\u306e`decode`\u547c\u3073\u51fa\u3057\u306b\u3055\u3089\u306bJSON\u3092\u6e21\u305b\u307e\u3059\uff0e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u4e0a\u3060\u3068\u65ad\u7d9a\u7684\u306b\u30c7\u30fc\u30bf\u304c\u6e21\u3063\u3066\u304d\u305f\u308a\u3059\u308b\u306e\u3067\uff0c\u305d\u306e\u3088\u3046\u306a\u5834\u5408\u306b\u52b9\u7387\u7684\u306b\u30c7\u30b3\u30fc\u30c9\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u307e\u3059\uff0e\n\u305d\u306e\u5f8c\uff0c`decodedValue`\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u3067\uff0c\u30c7\u30b3\u30fc\u30c9\u7d50\u679c\u3092\u53d6\u5f97\u51fa\u6765\u307e\u3059\uff0e\n\n`Decoder`\u306f\u5185\u90e8\u306b\u72b6\u614b\u3092\u6301\u3063\u3066\u3044\u3066\uff0c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u8907\u6570JSON\u3092\u9023\u7d9a\u3057\u3066\u30c7\u30b3\u30fc\u30c9\u51fa\u6765\u306a\u304f\u306a\u3063\u3066\u3044\u307e\u3059\uff0e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f7f\u3044\u56de\u3057\u3066\u52b9\u7387\u7684\u306b\u30c7\u30b3\u30fc\u30c9\u3059\u308b\u306b\u306f\uff0c\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u307e\u3059\uff0e\n\n```d\nDecoder.Option opt;\nopt.allowMultipleValues = true;\nDecoder decoder = Decoder(opt);\nforeach (j; jsons) {\n    decoder.decode(j);\n    decoder.decodedValue;\n}\n```\n\n### JSON\u3067\u30ad\u30fc\u304c\u8db3\u308a\u306a\u3044\u6642\u306b\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3059\u308b\n\n`Decoder.Option`\u306e`missingHandler`\u3092\u30bb\u30c3\u30c8\u3059\u308b\u3068\uff0c\u53d7\u3051\u53d6\u3063\u305fJSON\u3092\u69cb\u9020\u4f53\u306b\u5909\u63db\u3059\u308b\u6642\u306b\u30ad\u30fc\u304c\u898b\u3064\u304b\u3089\u306a\u3051\u308c\u3070\uff0c\u305d\u306e\u30ad\u30fc\u3092\u5f15\u6570\u306b\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u304c\u547c\u3070\u308c\u307e\u3059\uff0e\n\n```d\nstruct Test\n{\n    string name;\n    int age;\n}\n\nvoid main()\n{\n    auto encoded = `{ \"name\": \"Bob\", \"age\": 20}`;\n    auto missing = `{ \"name\": \"Bob\"}`;\n\n    Decoder.Option opt;\n    opt.missingHandler = (string field) { writeln(field); };\n    writeln(decode!Test(encoded, opt));\n    writeln(decode!Test(missing, opt)); // Callback called with missing field\n}\n```\n\n### D\u8a00\u8a9e\u306e\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u6301\u3064JSON\u3092\u6271\u3046\n\n\u4eca\u307e\u3067\u306e\u4f8b\u3092\u898b\u308c\u3070\u5206\u304b\u308b\u3088\u3046\u306b\uff0cyajl-d\u306f\u69cb\u9020\u4f53\u3084\u30af\u30e9\u30b9\u3092\u30a8\u30f3\u30b3\u30fc\u30c9/\u30c7\u30b3\u30fc\u30c9\u3059\u308b\u3068\u304d\u306b\uff0c\u5404\u30e1\u30f3\u30d0\u306e\u540d\u524d\u3092\u81ea\u52d5\u7684\u306b\u30ad\u30fc\u306b\u3057\u307e\u3059\uff0e\u3057\u304b\u3057\uff0cD\u8a00\u8a9e\u306f\u4e88\u7d04\u8a9e\u306f\u5909\u6570\u540d\u306b\u51fa\u6765\u306a\u3044\u306e\u3067\uff0c\u305d\u306e\u3088\u3046\u306aJSON\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u4e0a\u624b\u304f\u6271\u3048\u307e\u305b\u3093\uff0e\n\u3053\u306e\u30b1\u30fc\u30b9\u306b\u5bfe\u5fdc\u3059\u308b\u306b\u306f\uff0c`JSONName`\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3044\u307e\u3059\uff0e\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5bfe\u8c61\u306e\u30e1\u30f3\u30d0\u306b\u5bfe\u3057\u3066`JSONName`\u3092\u4f7f\u3044\uff0c\u30de\u30c3\u30d4\u30f3\u30b0\u5148\u3092\u6307\u5b9a\u51fa\u6765\u307e\u3059\uff0e\n\n```d\nstruct Hoge\n{ \n    ulong id;\n    @JSONName(\"body\") string _body;\n    bool yes; \n}\n\n// {\"id\":100,\"body\":\"hey!\",\"yes\":true}\nstring json = encode(Hoge(100, \"hey!\", true));\n```\n\n\u3053\u306e\u6a5f\u80fd\u306fAdam\u3055\u3093\u304b\u3089\u9802\u3044\u305f\u30d1\u30c3\u30c1\u3067\u5b9f\u73fe\u3057\u307e\u3057\u305f\uff0e\n\n## \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\n\n\u624b\u5143\u306eMBP\u3067std.json\uff0cvibe.data.json\uff0cyajl\u3092\u4f7f\u3063\u3066\uff0c\u69cb\u9020\u4f53\u3092JSON\u6587\u5b57\u5217\u3078\u306e\u30a8\u30f3\u30b3\u30fc\u30c9\uff0cJSON\u6587\u5b57\u5217\u3092JSON\u578b\u3078\u30c7\u30b3\u30fc\u30c9\u3059\u308b\u306e\u3092\u7c21\u5358\u306b\u6bd4\u8f03\u3057\u3066\u307f\u305f\u6240\uff0c\u3068\u308a\u3042\u3048\u305a\u4e00\u756a\u901f\u304b\u3063\u305f(\u30bd\u30fc\u30b9\u306f[\u30b3\u30b3](https://gist.github.com/repeatedly/c4a0352c3ec322446e49))\uff0e\n\n```sh\nencode:\njson: 229240 QPS\nvibe: 416995 QPS\nyajl: 624793 QPS\ndecode:\njson: 230197 QPS\nvibe: 271000 QPS\nyajl: 440328 QPS\n```\n\n`Encoder`/`Decoder`\u3092\u4f7f\u3063\u3066\u8907\u6570JSON\u3092\u51e6\u7406\u3059\u308c\u3070\uff0c\u3082\u3063\u3068\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u51fa\u307e\u3059\uff0e\u3053\u308c\u306b\u95a2\u3057\u3066\u306f[README\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9](https://github.com/repeatedly/yajl-d#perfomance)\u306e\u6240\u3092\u898b\u3066\u304f\u3060\u3055\u3044\uff0e\n\n## \u307e\u3068\u3081\n\nyajl-d\uff0cyajl\u4f9d\u5b58\u304c\u3042\u308b\u306e\u3067std.json\u307b\u3069\u624b\u8efd\u3067\u306f\u306a\u3044\u3067\u3059\u304c\uff0c\u8272\u3005\u3068\u8ffd\u52a0\u6a5f\u80fd\u3082\u3042\u308a\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3082\u3044\u3044\u306e\u3067\uff0c\u4f55\u304bD\u8a00\u8a9e\u3067JSON\u3092\u6271\u3046\u3053\u3068\u304c\u3042\u308c\u3070\uff0c\u691c\u8a0e\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044 :)\n", "tags": ["dlang", "JSON", "yajl"]}