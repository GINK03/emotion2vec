{"tags": ["Linux", "nmcli", "Bridge", "Network"], "context": "\u30d6\u30ea\u30c3\u30b8\u63a5\u7d9a\u4fbf\u5229\u3067\u3059\u3088\u306d\u3001\u304b\u306a\u308a\u4f7f\u3063\u3066\u307e\u3059\u3002\nDocker\u3068\u304bKVM\u3068\u304b\u5229\u7528\u7528\u9014\u304c\u5e83\u3044\u306e\u3067\u899a\u3048\u3066\u304a\u304f\u3068\u4fbf\u5229\u3067\u3059\u3002\n\u3053\u306e\u4f5c\u308a\u65b9\u306a\u3089NetworkManager\u3092\u6b62\u3081\u306a\u304f\u3066\u3082OK\n\n\u30d6\u30ea\u30c3\u30b8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u4f5c\u308a\u65b9\n\n1\u884c\u76ee\n# nmcli connection add type bridge con-name br0 ifname br0 stp no\n\n\u30d6\u30ea\u30c3\u30b8\u300cbr0\u300d\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u4f5c\u6210\u306e\u969b\u306bSTP\u306f\u6b62\u3081\u3066\u304a\u304d\u307e\u3059\u3002\n\n2\u884c\u76ee\n# nmcli connection modify br0 ipv4.method manual ipv4.addresses \"192.168.0.1/24\" ipv4.gateway \"192.168.0.254\" ipv4.dns 8.8.8.8\n\n\u4eca\u56de\u306e\u30ad\u30e2\u3067\u3059ipv4.addresses\u306b\u306f\u30d6\u30ea\u30c3\u30b8\u5148\u306eIP\u3092\u5272\u308a\u5f53\u3066\u3001ipv4.gateway\u306b\u306f\u305d\u306eGateway\u3092\u3001ipv4.dns\u306b\u306f\u8a00\u308f\u305a\u3082\u304c\u306aDNS\u3092\u5272\u308a\u5f53\u3066\u307e\u3059\u3002\n\n3\u884c\u76ee\n# nmcli connection add type bridge ifname eth0 master br0\n\n\u3053\u306e\u30b3\u30de\u30f3\u30c9\u3067eth0\u3068br0\u3092\u30d6\u30ea\u30c3\u30b8\u63a5\u7d9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n4\u884c\u76ee\n# nmcli con del eth0\n\n\u4e0d\u8981\u306b\u306a\u3063\u305feth0\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\n5\u884c\u76ee\n# systemctl restart network\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u518d\u8d77\u52d5\u3057\u3066\u5b8c\u6210\u3067\u3059\u3002\n\u6614\u307f\u305f\u304f/etc/sysconfig/network-script/ifcfg-ethX\u3092\u5f04\u304f\u3063\u305f\u308a\u3057\u306a\u304f\u3066\u826f\u304f\u3066\u697d\u3061\u3093\u3067\u3059\u306d\uff01\n\n\u307e\u3068\u3081(\u30b3\u30d4\u30da\u7528)\nnmcli connection add type bridge con-name br0 ifname br0 stp no\nnmcli connection modify br0 ipv4.method manual ipv4.addresses \"IPAddr/24\" ipv4.gateway \"Gateway\" ipv4.dns 8.8.8.8\nnmcli connection add type bridge ifname eth0 master br0\nnmcli con del eth0\nsystemctl restart network\n\n\n\u30d6\u30ea\u30c3\u30b8\u63a5\u7d9a\u4fbf\u5229\u3067\u3059\u3088\u306d\u3001\u304b\u306a\u308a\u4f7f\u3063\u3066\u307e\u3059\u3002\nDocker\u3068\u304bKVM\u3068\u304b\u5229\u7528\u7528\u9014\u304c\u5e83\u3044\u306e\u3067\u899a\u3048\u3066\u304a\u304f\u3068\u4fbf\u5229\u3067\u3059\u3002\n\u3053\u306e\u4f5c\u308a\u65b9\u306a\u3089NetworkManager\u3092\u6b62\u3081\u306a\u304f\u3066\u3082OK\n\n# \u30d6\u30ea\u30c3\u30b8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u4f5c\u308a\u65b9\n\n## 1\u884c\u76ee\n\n```shell-session\n# nmcli connection add type bridge con-name br0 ifname br0 stp no\n```\n\n\u30d6\u30ea\u30c3\u30b8\u300cbr0\u300d\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u4f5c\u6210\u306e\u969b\u306bSTP\u306f\u6b62\u3081\u3066\u304a\u304d\u307e\u3059\u3002\n\n## 2\u884c\u76ee\n\n```shell-session\n# nmcli connection modify br0 ipv4.method manual ipv4.addresses \"192.168.0.1/24\" ipv4.gateway \"192.168.0.254\" ipv4.dns 8.8.8.8\n```\n\n\u4eca\u56de\u306e\u30ad\u30e2\u3067\u3059ipv4.addresses\u306b\u306f\u30d6\u30ea\u30c3\u30b8\u5148\u306eIP\u3092\u5272\u308a\u5f53\u3066\u3001ipv4.gateway\u306b\u306f\u305d\u306eGateway\u3092\u3001ipv4.dns\u306b\u306f\u8a00\u308f\u305a\u3082\u304c\u306aDNS\u3092\u5272\u308a\u5f53\u3066\u307e\u3059\u3002\n\n## 3\u884c\u76ee\n\n```shell-session\n# nmcli connection add type bridge ifname eth0 master br0\n```\n\n\u3053\u306e\u30b3\u30de\u30f3\u30c9\u3067eth0\u3068br0\u3092\u30d6\u30ea\u30c3\u30b8\u63a5\u7d9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n## 4\u884c\u76ee\n\n```shell-session\n# nmcli con del eth0\n```\n\u4e0d\u8981\u306b\u306a\u3063\u305feth0\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\n## 5\u884c\u76ee\n\n```shell-session\n# systemctl restart network\n```\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u518d\u8d77\u52d5\u3057\u3066\u5b8c\u6210\u3067\u3059\u3002\n\n\u6614\u307f\u305f\u304f/etc/sysconfig/network-script/ifcfg-ethX\u3092\u5f04\u304f\u3063\u305f\u308a\u3057\u306a\u304f\u3066\u826f\u304f\u3066\u697d\u3061\u3093\u3067\u3059\u306d\uff01\n\n# \u307e\u3068\u3081(\u30b3\u30d4\u30da\u7528)\n\n```shell-session\nnmcli connection add type bridge con-name br0 ifname br0 stp no\nnmcli connection modify br0 ipv4.method manual ipv4.addresses \"IPAddr/24\" ipv4.gateway \"Gateway\" ipv4.dns 8.8.8.8\nnmcli connection add type bridge ifname eth0 master br0\nnmcli con del eth0\nsystemctl restart network\n```\n\n\n\n"}