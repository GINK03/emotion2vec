{"context": " More than 1 year has passed since last update.ROMA\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u78ba\u8a8d\u65b9\u6cd5\u3067\u3059\u3002\nROMA\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u6628\u65e5\u306e\u30dd\u30b9\u30c8\u3092\u53c2\u7167\nhttp://qiita.com/hiroaki-iwase/items/d00936fc0e2bcb64a62a\n\n\u30b3\u30de\u30f3\u30c9\nstat [regexp]\n\n\n\ntelnet <address> <port>\u3067ROMA\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\n\nregexp\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u8868\u793a\u9805\u76ee\u3092\u6b63\u898f\u8868\u73fe\u3067\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\n\n\n\u898b\u65b9\n\nstat\n> stat\nversion 1.2.0\nconfig.DEFAULT_LOST_ACTION auto_assign\n.\n.\n.\nEND\n\n\n\u5168\u30b9\u30c6\u30fc\u30bf\u30b9\u9805\u76ee\u3092\u8868\u793a\u3057\u307e\u3059\n\n\nstat node\n> stat node\nstats.run_receive_a_vnode {}\nrouting.nodes.length 2\nrouting.nodes [\"localhost_10001\", \"localhost_10002\"]\nrouting.vnodes.length 512\nrouting.short_vnodes 0\nrouting.lost_vnodes 0\nrouting.version_of_nodes {\"localhost_10001\"=>66048, \"localhost_10002\"=>66048}\nEND\n\n\n\u57fa\u672c\u7684\u306a\u30b9\u30c6\u30fc\u30bf\u30b9\u60c5\u5831\u3092\u8868\u793a\u3057\u307e\u3059\n\nrouting.short_vnodes\u306f\u5197\u9577\u5ea6\u306e\u843d\u3061\u305fvnode\u306e\u6570\u3092\u8868\u3057\u307e\u3059\n\n\u5197\u9577\u5ea62\u306e\u5834\u5408\u30011\u3064\u306evnode\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u304f\u306a\u3063\u3066\u3044\u308b\u72b6\u614b\u3067\u3059\ndata\u306e\u8aad\u307f\u66f8\u304d\u306f\u884c\u3048\u307e\u3059\n\u901a\u5e38\u6642\u306f0\u3067\u3059\n\n\n\nrouting.lost_vnodes\u306f\u5197\u9577\u5ea6\u304c0\u306b\u306a\u3063\u305fvnode\u306e\u6570\u3092\u8868\u3057\u307e\u3059(\u901a\u5e38\u6642\u306f0\u3067\u3059)\n\n\u5197\u9577\u5ea62\u306e\u5834\u5408\u30012\u3064(\u4e21\u65b9)\u306evnode\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u304f\u306a\u3063\u3066\u3044\u308b\u72b6\u614b\u3067\u3059\ndata\u306e\u8aad\u307f\u66f8\u304d\u304c\u884c\u3048\u307e\u305b\u3093\n\u901a\u5e38\u6642\u306f0\u3067\u3059\n\n\n\n\nstat primary|secondary\n> stat primary|secondary\nrouting.primary 263\nrouting.secondary1 249\nEND\n\n\ntelnet\u3067\u30a2\u30af\u30bb\u30b9\u3057\u305fnode\u304c\u62c5\u5f53\u3057\u3066\u3044\u308bvnodes\u306e\u6570\u3092\u8868\u793a\u3057\u307e\u3059\n\n\nstat path\n> stat path|PATH\nconfig.LOG_PATH /home/roma\nconfig.RTTABLE_PATH /home/roma\nconfig.WRITEBEHIND_PATH /home/roma/wb\nstats.config_path roma/config\nstorages[roma].storage.storage_path /home/roma/localhost_10001/roma\nwrite-behind.path /home/roma/wb\n\n\nROMA\u304c\u53c2\u7167\u3057\u3066\u3044\u308b\u5404\u30d5\u30a1\u30a4\u30eb\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306epath\u3092\u8868\u793a\u3057\u307e\u3059\n\n\nstat storage\n> stat storage\nstorages[roma].storage.storage_path /home/roma/localhost_10001/roma\nstorages[roma].storage.st_class RubyHashStorage\nstorages[roma].storage.divnum 10\n.\n.\n.\n\n\nROMA\u306estorage\u60c5\u5831\u3092\u8868\u793a\u3057\u307e\u3059\n\nst_class\u306f\u4f7f\u7528\u3057\u3066\u3044\u308bstorage\u306e\u30bf\u30a4\u30d7\u3092\u8868\u793a\u3057\u307e\u3059\n\u4f8b\nRubyHashStorage : \u30e1\u30e2\u30ea\u30fc\u30e2\u30fc\u30c9\nTCStorage : TokyoCabinet\nGroongaStorage : Groonga\n\n\nroma-adm\u30b3\u30de\u30f3\u30c9\ntelnet\u304c\u4f7f\u7528\u3067\u304d\u306a\u3044/install\u51fa\u6765\u306a\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306eroma-adm\u30b3\u30de\u30f3\u30c9\u3067\u3082\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\nroma-adm <adm-command> <port No.>\n\u4f8b\n$ roma-adm 'stat node' 10001\n.\nstats.run_receive_a_vnode {}\nrouting.nodes.length 2\nrouting.nodes [\"localhost_10001\", \"localhost_10002\"]\nrouting.vnodes.length 512\nrouting.short_vnodes 0\nrouting.lost_vnodes 0\nrouting.version_of_nodes {}\nEND\n\n\n\u53c2\u7167URL\nROMA Status List : http://roma-kvs.org/learn/status.html\nROMA\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u78ba\u8a8d\u65b9\u6cd5\u3067\u3059\u3002\nROMA\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u6628\u65e5\u306e\u30dd\u30b9\u30c8\u3092\u53c2\u7167\nhttp://qiita.com/hiroaki-iwase/items/d00936fc0e2bcb64a62a\n\n# \u30b3\u30de\u30f3\u30c9\n```\nstat [regexp]\n```\n- `telnet <address> <port>`\u3067ROMA\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\n- `regexp`\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u8868\u793a\u9805\u76ee\u3092\u6b63\u898f\u8868\u73fe\u3067\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\n\n# \u898b\u65b9\n## stat\n```\n> stat\nversion 1.2.0\nconfig.DEFAULT_LOST_ACTION auto_assign\n.\n.\n.\nEND\n```\n- \u5168\u30b9\u30c6\u30fc\u30bf\u30b9\u9805\u76ee\u3092\u8868\u793a\u3057\u307e\u3059\n\n## stat node\n```\n> stat node\nstats.run_receive_a_vnode {}\nrouting.nodes.length 2\nrouting.nodes [\"localhost_10001\", \"localhost_10002\"]\nrouting.vnodes.length 512\nrouting.short_vnodes 0\nrouting.lost_vnodes 0\nrouting.version_of_nodes {\"localhost_10001\"=>66048, \"localhost_10002\"=>66048}\nEND\n```\n- \u57fa\u672c\u7684\u306a\u30b9\u30c6\u30fc\u30bf\u30b9\u60c5\u5831\u3092\u8868\u793a\u3057\u307e\u3059\n- `routing.short_vnodes`\u306f\u5197\u9577\u5ea6\u306e\u843d\u3061\u305fvnode\u306e\u6570\u3092\u8868\u3057\u307e\u3059\n<ul>\n<li>\u5197\u9577\u5ea62\u306e\u5834\u5408\u30011\u3064\u306evnode\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u304f\u306a\u3063\u3066\u3044\u308b\u72b6\u614b\u3067\u3059</li>\n<li>data\u306e\u8aad\u307f\u66f8\u304d\u306f\u884c\u3048\u307e\u3059</li>\n<li>\u901a\u5e38\u6642\u306f0\u3067\u3059</li>\n</ul>\n- `routing.lost_vnodes`\u306f\u5197\u9577\u5ea6\u304c0\u306b\u306a\u3063\u305fvnode\u306e\u6570\u3092\u8868\u3057\u307e\u3059(\u901a\u5e38\u6642\u306f0\u3067\u3059)\n<ul>\n<li>\u5197\u9577\u5ea62\u306e\u5834\u5408\u30012\u3064(\u4e21\u65b9)\u306evnode\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u304f\u306a\u3063\u3066\u3044\u308b\u72b6\u614b\u3067\u3059</li>\n<li>data\u306e\u8aad\u307f\u66f8\u304d\u304c\u884c\u3048\u307e\u305b\u3093</li>\n<li>\u901a\u5e38\u6642\u306f0\u3067\u3059</li>\n</ul>\n\n## stat primary|secondary\n```\n> stat primary|secondary\nrouting.primary 263\nrouting.secondary1 249\nEND\n```\n- telnet\u3067\u30a2\u30af\u30bb\u30b9\u3057\u305fnode\u304c\u62c5\u5f53\u3057\u3066\u3044\u308bvnodes\u306e\u6570\u3092\u8868\u793a\u3057\u307e\u3059\n\n## stat path\n```\n> stat path|PATH\nconfig.LOG_PATH /home/roma\nconfig.RTTABLE_PATH /home/roma\nconfig.WRITEBEHIND_PATH /home/roma/wb\nstats.config_path roma/config\nstorages[roma].storage.storage_path /home/roma/localhost_10001/roma\nwrite-behind.path /home/roma/wb\n```\n- ROMA\u304c\u53c2\u7167\u3057\u3066\u3044\u308b\u5404\u30d5\u30a1\u30a4\u30eb\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306epath\u3092\u8868\u793a\u3057\u307e\u3059\n\n## stat storage\n```\n> stat storage\nstorages[roma].storage.storage_path /home/roma/localhost_10001/roma\nstorages[roma].storage.st_class RubyHashStorage\nstorages[roma].storage.divnum 10\n.\n.\n.\n```\n- ROMA\u306estorage\u60c5\u5831\u3092\u8868\u793a\u3057\u307e\u3059\n- `st_class`\u306f\u4f7f\u7528\u3057\u3066\u3044\u308bstorage\u306e\u30bf\u30a4\u30d7\u3092\u8868\u793a\u3057\u307e\u3059  \n\u4f8b  \nRubyHashStorage : \u30e1\u30e2\u30ea\u30fc\u30e2\u30fc\u30c9  \nTCStorage : TokyoCabinet  \nGroongaStorage : Groonga\n\n# roma-adm\u30b3\u30de\u30f3\u30c9\ntelnet\u304c\u4f7f\u7528\u3067\u304d\u306a\u3044/install\u51fa\u6765\u306a\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306eroma-adm\u30b3\u30de\u30f3\u30c9\u3067\u3082\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059  \n```roma-adm <adm-command> <port No.>```\n\n\u4f8b\n\n```\n$ roma-adm 'stat node' 10001\n.\nstats.run_receive_a_vnode {}\nrouting.nodes.length 2\nrouting.nodes [\"localhost_10001\", \"localhost_10002\"]\nrouting.vnodes.length 512\nrouting.short_vnodes 0\nrouting.lost_vnodes 0\nrouting.version_of_nodes {}\nEND\n```\n\n# \u53c2\u7167URL\nROMA Status List : http://roma-kvs.org/learn/status.html\n", "tags": ["Ruby", "nosql", "Database", "KVS", "roma"]}