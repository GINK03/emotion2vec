{"context": " More than 1 year has passed since last update.vagrant\u74b0\u5883\uff1aCentOS Linux release 7.1.1503 (Core)\n\u516c\u5f0f\u901a\u308a\u3001\u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3092yum\u3067\u5165\u308c\u308b\u3002\nhttps://github.com/tatsuhiro-t/nghttp2\nsudo apt-get install g++ make binutils autoconf automake autotools-dev libtool pkg-config \\\n  zlib1g-dev libcunit1-dev libssl-dev libxml2-dev libev-dev libevent-dev libjansson-dev \\\n  libjemalloc-dev cython python3-dev python-setuptools\n\n\u5b9f\u969b\u306b\u5fc5\u8981\u3060\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u4ee5\u4e0b python\u304c\u5fc5\u8981\u3002\u4eca\u56de\u306fv2.7.5\n#yum install libtool binutils libev-devel autoconf automake python python-devel\n\nlibtools\u304c\u7121\u3044\u3068autoconf-i\u3057\u305f\u6642\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u308b\u3002\n\noutput\nCan't exec \"libtoolize\": No such file or directory at /usr/share/autoconf/Autom4te/FileUtils.pm line 345, <GEN3> line 5.\nautoreconf: failed to run libtoolize: No such file or directory\nautoreconf: libtoolize is needed because this package uses Libtool\n\n\nnghttp2 v1.5.0\u3092github\u304b\u3089\n#wget https://github.com/tatsuhiro-t/nghttp2/releases/download/v1.5.0/nghttp2-1.5.0.tar.gz\n#tar zxvf nghttp2-1.5.0.tar.gz\n#cd nghttp2-1.5.0\n#autoreconf -i\n#automake\n#autoconf\n#./configure\n#make\n#make install\n#make html\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n#touch /etc/sysconfig/nghttpd\n#vi /etc/sysconfig/nghttpd\n\n\u9375\u306e\u4f5c\u6210\n#openssl genrsa 2048 > server.key\n#openssl rsa -in server.key -out server.key\n#openssl req -new -key server.key > server.csr\n#openssl x509 -days 3650 -req -signkey server.key < server.csr > server.crt\n\nnghttp2\u30e6\u30fc\u30b6\u306e\u4f5c\u6210\n#chmod 600 server.crt\n#chmod 600 server.key\n#chown nghttp2:nghttp2 /root/ssl/server.key\n#chown nghttp2:nghttp2 /root/ssl/server.crt\n\n\u30b5\u30fc\u30d3\u30b9\u767b\u9332\n#cd /etc/systemd/system\n#touch nghttpd.service\n#vi nghttpd.service\n#systemctl daemon-reload\n#systemctl list-unit-files | grep nghttpd\n#systemctl start nghttpd.service\n\n\n\u78ba\u8a8d\n#ss -antup\nNetid  State      Recv-Q Send-Q     Local Address:Port       Peer Address:Port\ntcp    UNCONN     0      0                      *:51203                 *:*      users:((\"dhclient\",1175,20))\ntcp    UNCONN     0      0                      *:68                    *:*      users:((\"dhclient\",1175,6))\ntcp    UNCONN     0      0                     :::61435                :::*      users:((\"dhclient\",1175,21))\ntcp    LISTEN     0      128                    *:22                    *:*      users:((\"sshd\",1147,3))\ntcp    LISTEN     0      10             127.0.0.1:25                    *:*      users:((\"sendmail\",1213,4))\ntcp    ESTAB      0      0              10.0.2.15:22             10.0.2.2:57340  users:((\"sshd\",2512,3),(\"sshd\",2509,3))\ntcp    LISTEN     0      128                   :::8080                 :::*      users:((\"nghttpd\",1149,10))\ntcp    LISTEN     0      128                   :::22                   :::*      users:((\"sshd\",1147,4))\n\n# ps ax | grep nghttp\n21983 ?        Ss     0:00 /usr/local/bin/nghttpd -n 1 -d /var/www/html 8080 /etc/pki/tls/private/server.key /etc/pki/tls/private/server.crt\n\nFireWalld\u3092\u6b62\u3081\u308b\n#systemctl stop firewalld\n#systemctl disable firewalld\n\n\u3053\u3053\u307e\u3067\u3067\u9069\u5f53\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bindex.html\u30d5\u30a1\u30a4\u30eb\u3092\u304a\u304f\u3068\u3001http2\u3067\u306e\u30d6\u30e9\u30a6\u30b6\u78ba\u8a8d\u304c\u3067\u304d\u308b\u3002\ncurl\u3092http2\u306b\u5bfe\u5fdc\u3055\u305b\u308b\n\u3082\u3068\u3082\u3068CentOS\u306b\u5165\u3063\u3066\u3044\u308bopenssl,zlib,curl\u3092\u4f7f\u308f\u305a\u3001\u6700\u65b0\u3092\u6301\u3063\u3066\u304f\u308b\u3002\n# curl -LO https://www.openssl.org/source/openssl-1.0.2e.tar.gz\n# tar zxvf openssl-1.0.2e.tar.gz\n# cd openssl-1.0.2e\n# ./config shared zlib-dynamic\n# make && make test\n# sudo make install\n\n# curl -LO http://zlib.net/zlib-1.2.8.tar.gz\n# tar zxvf zlib-1.2.8.tar.gz\n# cd zlib-1.2.8\n# ./configure\n# make && make test\n# make install\n\n# curl -LO http://curl.haxx.se/download/curl-7.46.0.tar.gz\n# tar zxvf curl-7.46.0.tar.gz\n# cd curl-7.46.0\n# ./configure --help\n# ./configure --with-nghttp2=/usr/local/\n\nlibnghttp2\u3092\u4f7f\u3046 \u203b\u74b0\u5883\u306b\u3088\u3063\u3066\u306f\u3001boost\u304c\u5fc5\u8981\n# cd nghttp2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n# ./configure --enable-asio-lib\n# make\n# make install\n\n\noutput\ncurl version:     7.46.0\nHost setup:       x86_64-pc-linux-gnu\nInstall prefix:   /usr/local\nCompiler:         gcc\nSSL support:      enabled (OpenSSL)\nSSH support:      no      (--with-libssh2)\nzlib support:     enabled\nGSS-API support:  no      (--with-gssapi)\nTLS-SRP support:  no      (--enable-tls-srp)\nresolver:         default (--enable-ares / --enable-threaded-resolver)\nIPv6 support:     enabled\nUnix sockets support: enabled\nIDN support:      no      (--with-{libidn,winidn})\nBuild libcurl:    Shared=yes, Static=yes\nBuilt-in manual:  enabled\n--libcurl option: enabled (--disable-libcurl-option)\nVerbose errors:   enabled (--disable-verbose)\nSSPI support:     no      (--enable-sspi)\nca cert bundle:   /etc/pki/tls/certs/ca-bundle.crt\nca cert path:     no\nLDAP support:     no      (--enable-ldap / --with-ldap-lib / --with-lber-lib)\nLDAPS support:    no      (--enable-ldaps)\nRTSP support:     enabled\nRTMP support:     no      (--with-librtmp)\nmetalink support: no      (--with-libmetalink)\nPSL support:      no      (libpsl not found)\nHTTP2 support:    enabled (nghttp2)\u2605\nProtocols:        DICT FILE FTP FTPS GOPHER HTTP HTTPS IMA\n\n\ngoogle\u306fhttp2\u5bfe\u5fdc\u3057\u3066\u3044\u3066yahoo\u306f\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u3002\n#/usr/local/bin/nghttp -nv https://google.com\n[  0.015] Connected\n[  0.020][NPN] server offers:\n          * h2\n          * spdy/3.1\n          * http/1.1\nThe negotiated protocol: h2 \u2605\n[  0.032] recv SETTINGS frame <length=18, flags=0x00, stream_id=0>\n          (niv=3)\n          [SETTINGS_MAX_CONCURRENT_STREAMS(0x03):100]\n          [SETTINGS_INITIAL_WINDOW_SIZE(0x04):1048576]\n          [SETTINGS_MAX_FRAME_SIZE(0x05):16384]\n[  0.032] recv WINDOW_UPDATE frame <length=4, flags=0x00, stream_id=0>\n          (window_size_increment=983041)\n[  0.032] send SETTINGS frame <length=12, flags=0x00, stream_id=0>\n          (niv=2)\n          [SETTINGS_MAX_CONCURRENT_STREAMS(0x03):100]\n          [SETTINGS_INITIAL_WINDOW_SIZE(0x04):65535]\n[  0.032] send SETTINGS frame <length=0, flags=0x01, stream_id=0>\n          ; ACK\n          (niv=0)\n[  0.032] send PRIORITY frame <length=5, flags=0x00, stream_id=3>\n          (dep_stream_id=0, weight=201, exclusive=0)\n[  0.032] send PRIORITY frame <length=5, flags=0x00, stream_id=5>\n          (dep_stream_id=0, weight=101, exclusive=0)\n[  0.032] send PRIORITY frame <length=5, flags=0x00, stream_id=7>\n          (dep_stream_id=0, weight=1, exclusive=0)\n[  0.032] send PRIORITY frame <length=5, flags=0x00, stream_id=9>\n          (dep_stream_id=7, weight=1, exclusive=0)\n[  0.032] send PRIORITY frame <length=5, flags=0x00, stream_id=11>\n          (dep_stream_id=3, weight=1, exclusive=0)\n[  0.032] send HEADERS frame <length=35, flags=0x25, stream_id=13>\n          ; END_STREAM | END_HEADERS | PRIORITY\n          (padlen=0, dep_stream_id=11, weight=16, exclusive=0)\n          ; Open new stream\n          :method: GET\n          :path: /\n          :scheme: https\n          :authority: google.com\n          accept: */*\n          accept-encoding: gzip, deflate\n          user-agent: nghttp2/1.5.0\n[  0.037] recv SETTINGS frame <length=0, flags=0x01, stream_id=0>\n          ; ACK\n          (niv=0)\n[  0.037] recv (stream_id=13) :status: 302\n[  0.037] recv (stream_id=13) cache-control: private\n[  0.037] recv (stream_id=13) content-type: text/html; charset=UTF-8\n[  0.037] recv (stream_id=13) location: https://www.google.co.jp/?gfe_rd=cr&ei=ESVpVsPeOer98weXwJPYCA\n[  0.037] recv (stream_id=13) content-length: 262\n[  0.037] recv (stream_id=13) date: Thu, 10 Dec 2015 07:09:05 GMT\n[  0.037] recv (stream_id=13) server: GFE/2.0\n[  0.037] recv (stream_id=13) alternate-protocol: 443:quic,p=0\n[  0.037] recv (stream_id=13) alt-svc: clear\n[  0.037] recv HEADERS frame <length=160, flags=0x04, stream_id=13>\n          ; END_HEADERS\n          (padlen=0)\n          ; First response header\n[  0.037] recv DATA frame <length=262, flags=0x01, stream_id=13>\n          ; END_STREAM\n[  0.038] recv PING frame <length=8, flags=0x00, stream_id=0>\n          (opaque_data=0000000000000000)\n[  0.038] send GOAWAY frame <length=8, flags=0x00, stream_id=0>\n          (last_stream_id=0, error_code=NO_ERROR(0x00), opaque_data(0)=[])\n\nyahoo\u306b\u30a2\u30af\u30bb\u30b9\n# /usr/local/bin/nghttp -nv https://yahoo.com\n[  0.100] Connected\n[  0.191][NPN] server offers:\n          * spdy/3.1\n          * spdy/3\n          * http/1.1\n          * http/1.0\n[ERROR] HTTP/2 protocol was not selected. (nghttp2 expects h2)\nSome requests were not processed. total=1, processed=0\n\ncurl\u3092\u4f7f\u3063\u3066\u30a2\u30af\u30bb\u30b9\n# curl -vso /dev/null --http2 https://youtube.com\n* Rebuilt URL to: https://youtube.com/\n*   Trying 216.58.221.14...\n* Connected to youtube.com (216.58.221.14) port 443 (#0)\n* Cipher selection: ALL:!EXPORT:!EXPORT40:!EXPORT56:!aNULL:!LOW:!RC4:@STRENGTH\n* successfully set certificate verify locations:\n*   CAfile: /etc/pki/tls/certs/ca-bundle.crt\n  CApath: none\n* TLSv1.2 (OUT), TLS handshake, Client hello (1):\n} [252 bytes data]\n* TLSv1.2 (IN), TLS handshake, Server hello (2):\n{ [116 bytes data]\n* NPN, negotiated HTTP2 (h2)\n* TLSv1.2 (IN), TLS handshake, Certificate (11):\n{ [3700 bytes data]\n* TLSv1.2 (IN), TLS handshake, Server key exchange (12):\n{ [148 bytes data]\n* TLSv1.2 (IN), TLS handshake, Server finished (14):\n{ [4 bytes data]\n* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):\n} [70 bytes data]\n* TLSv1.2 (OUT), TLS change cipher, Client hello (1):\n} [1 bytes data]\n* TLSv1.2 (OUT), TLS handshake, Unknown (67):\n} [36 bytes data]\n* TLSv1.2 (OUT), TLS handshake, Finished (20):\n} [16 bytes data]\n* TLSv1.2 (IN), TLS change cipher, Client hello (1):\n{ [1 bytes data]\n* TLSv1.2 (IN), TLS handshake, Finished (20):\n{ [16 bytes data]\n* SSL connection using TLSv1.2 / ECDHE-ECDSA-AES128-GCM-SHA256\n* Server certificate:\n*        subject: C=US; ST=California; L=Mountain View; O=Google Inc; CN=*.google.com\n*        start date: Nov 26 00:09:43 2015 GMT\n*        expire date: Feb 23 00:00:00 2016 GMT\n*        subjectAltName: youtube.com matched\n*        issuer: C=US; O=Google Inc; CN=Google Internet Authority G2\n*        SSL certificate verify ok.\n* Using HTTP2, server supports multi-use\n* Connection state changed (HTTP/2 confirmed)\n* TCP_NODELAY set\n* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0\n* Using Stream ID: 1 (easy handle 0x1ad2fb0)\n> GET / HTTP/1.1\n> Host: youtube.com\n> User-Agent: curl/7.46.0\n> Accept: */*\n>\n< HTTP/2.0 301\n< date:Thu, 10 Dec 2015 07:38:04 GMT\n< server:gwiseguy/2.0\n< location:https://www.youtube.com/\n< content-length:0\n< content-type:text/html\n< x-xss-protection:1; mode=block\n< alternate-protocol:443:quic,p=0\n< alt-svc:clear\n<\n* Connection #0 to host youtube.com left intact\n\n\u53c2\u8003\nhttp://takeshiyako.blogspot.jp/2015/09/curl-http2.html\nhttps://blog.cloudflare.com/tools-for-debugging-testing-and-using-http-2/\nhttp://qiita.com/0xfffffff7/items/3a3c75f46c781d83a70d\nvagrant\u74b0\u5883\uff1aCentOS Linux release 7.1.1503 (Core)\n\n\u516c\u5f0f\u901a\u308a\u3001\u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3092yum\u3067\u5165\u308c\u308b\u3002\nhttps://github.com/tatsuhiro-t/nghttp2\n\n```\nsudo apt-get install g++ make binutils autoconf automake autotools-dev libtool pkg-config \\\n  zlib1g-dev libcunit1-dev libssl-dev libxml2-dev libev-dev libevent-dev libjansson-dev \\\n  libjemalloc-dev cython python3-dev python-setuptools\n```\n\u5b9f\u969b\u306b\u5fc5\u8981\u3060\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u4ee5\u4e0b python\u304c\u5fc5\u8981\u3002\u4eca\u56de\u306fv2.7.5\n\n```\n#yum install libtool binutils libev-devel autoconf automake python python-devel\n```\n\nlibtools\u304c\u7121\u3044\u3068autoconf-i\u3057\u305f\u6642\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u308b\u3002\n\n```lang:output\nCan't exec \"libtoolize\": No such file or directory at /usr/share/autoconf/Autom4te/FileUtils.pm line 345, <GEN3> line 5.\nautoreconf: failed to run libtoolize: No such file or directory\nautoreconf: libtoolize is needed because this package uses Libtool\n```\n\n\nnghttp2 v1.5.0\u3092github\u304b\u3089\n\n```\n#wget https://github.com/tatsuhiro-t/nghttp2/releases/download/v1.5.0/nghttp2-1.5.0.tar.gz\n#tar zxvf nghttp2-1.5.0.tar.gz\n#cd nghttp2-1.5.0\n#autoreconf -i\n#automake\n#autoconf\n#./configure\n#make\n#make install\n#make html\n```\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n\n```\n#touch /etc/sysconfig/nghttpd\n#vi /etc/sysconfig/nghttpd\n```\n\n\u9375\u306e\u4f5c\u6210\n\n```\n#openssl genrsa 2048 > server.key\n#openssl rsa -in server.key -out server.key\n#openssl req -new -key server.key > server.csr\n#openssl x509 -days 3650 -req -signkey server.key < server.csr > server.crt\n```\n\nnghttp2\u30e6\u30fc\u30b6\u306e\u4f5c\u6210\n\n```\n#chmod 600 server.crt\n#chmod 600 server.key\n#chown nghttp2:nghttp2 /root/ssl/server.key\n#chown nghttp2:nghttp2 /root/ssl/server.crt\n```\n\n\u30b5\u30fc\u30d3\u30b9\u767b\u9332\n\n```\n#cd /etc/systemd/system\n#touch nghttpd.service\n#vi nghttpd.service\n#systemctl daemon-reload\n#systemctl list-unit-files | grep nghttpd\n#systemctl start nghttpd.service\n\n```\n\n\u78ba\u8a8d\n\n```\n#ss -antup\nNetid  State      Recv-Q Send-Q     Local Address:Port       Peer Address:Port\ntcp    UNCONN     0      0                      *:51203                 *:*      users:((\"dhclient\",1175,20))\ntcp    UNCONN     0      0                      *:68                    *:*      users:((\"dhclient\",1175,6))\ntcp    UNCONN     0      0                     :::61435                :::*      users:((\"dhclient\",1175,21))\ntcp    LISTEN     0      128                    *:22                    *:*      users:((\"sshd\",1147,3))\ntcp    LISTEN     0      10             127.0.0.1:25                    *:*      users:((\"sendmail\",1213,4))\ntcp    ESTAB      0      0              10.0.2.15:22             10.0.2.2:57340  users:((\"sshd\",2512,3),(\"sshd\",2509,3))\ntcp    LISTEN     0      128                   :::8080                 :::*      users:((\"nghttpd\",1149,10))\ntcp    LISTEN     0      128                   :::22                   :::*      users:((\"sshd\",1147,4))\n\n# ps ax | grep nghttp\n21983 ?        Ss     0:00 /usr/local/bin/nghttpd -n 1 -d /var/www/html 8080 /etc/pki/tls/private/server.key /etc/pki/tls/private/server.crt\n```\n\nFireWalld\u3092\u6b62\u3081\u308b\n\n```\n#systemctl stop firewalld\n#systemctl disable firewalld\n```\n\u3053\u3053\u307e\u3067\u3067\u9069\u5f53\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bindex.html\u30d5\u30a1\u30a4\u30eb\u3092\u304a\u304f\u3068\u3001http2\u3067\u306e\u30d6\u30e9\u30a6\u30b6\u78ba\u8a8d\u304c\u3067\u304d\u308b\u3002\n\n<h2>curl\u3092http2\u306b\u5bfe\u5fdc\u3055\u305b\u308b</h2>\n\u3082\u3068\u3082\u3068CentOS\u306b\u5165\u3063\u3066\u3044\u308bopenssl,zlib,curl\u3092\u4f7f\u308f\u305a\u3001\u6700\u65b0\u3092\u6301\u3063\u3066\u304f\u308b\u3002\n\n```\n# curl -LO https://www.openssl.org/source/openssl-1.0.2e.tar.gz\n# tar zxvf openssl-1.0.2e.tar.gz\n# cd openssl-1.0.2e\n# ./config shared zlib-dynamic\n# make && make test\n# sudo make install\n\n# curl -LO http://zlib.net/zlib-1.2.8.tar.gz\n# tar zxvf zlib-1.2.8.tar.gz\n# cd zlib-1.2.8\n# ./configure\n# make && make test\n# make install\n\n# curl -LO http://curl.haxx.se/download/curl-7.46.0.tar.gz\n# tar zxvf curl-7.46.0.tar.gz\n# cd curl-7.46.0\n# ./configure --help\n# ./configure --with-nghttp2=/usr/local/\n\nlibnghttp2\u3092\u4f7f\u3046 \u203b\u74b0\u5883\u306b\u3088\u3063\u3066\u306f\u3001boost\u304c\u5fc5\u8981\n# cd nghttp2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n# ./configure --enable-asio-lib\n# make\n# make install\n```\n\n```lang:output\ncurl version:     7.46.0\nHost setup:       x86_64-pc-linux-gnu\nInstall prefix:   /usr/local\nCompiler:         gcc\nSSL support:      enabled (OpenSSL)\nSSH support:      no      (--with-libssh2)\nzlib support:     enabled\nGSS-API support:  no      (--with-gssapi)\nTLS-SRP support:  no      (--enable-tls-srp)\nresolver:         default (--enable-ares / --enable-threaded-resolver)\nIPv6 support:     enabled\nUnix sockets support: enabled\nIDN support:      no      (--with-{libidn,winidn})\nBuild libcurl:    Shared=yes, Static=yes\nBuilt-in manual:  enabled\n--libcurl option: enabled (--disable-libcurl-option)\nVerbose errors:   enabled (--disable-verbose)\nSSPI support:     no      (--enable-sspi)\nca cert bundle:   /etc/pki/tls/certs/ca-bundle.crt\nca cert path:     no\nLDAP support:     no      (--enable-ldap / --with-ldap-lib / --with-lber-lib)\nLDAPS support:    no      (--enable-ldaps)\nRTSP support:     enabled\nRTMP support:     no      (--with-librtmp)\nmetalink support: no      (--with-libmetalink)\nPSL support:      no      (libpsl not found)\nHTTP2 support:    enabled (nghttp2)\u2605\nProtocols:        DICT FILE FTP FTPS GOPHER HTTP HTTPS IMA\n```\n\ngoogle\u306fhttp2\u5bfe\u5fdc\u3057\u3066\u3044\u3066yahoo\u306f\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u3002\n\n```\n#/usr/local/bin/nghttp -nv https://google.com\n[  0.015] Connected\n[  0.020][NPN] server offers:\n          * h2\n          * spdy/3.1\n          * http/1.1\nThe negotiated protocol: h2 \u2605\n[  0.032] recv SETTINGS frame <length=18, flags=0x00, stream_id=0>\n          (niv=3)\n          [SETTINGS_MAX_CONCURRENT_STREAMS(0x03):100]\n          [SETTINGS_INITIAL_WINDOW_SIZE(0x04):1048576]\n          [SETTINGS_MAX_FRAME_SIZE(0x05):16384]\n[  0.032] recv WINDOW_UPDATE frame <length=4, flags=0x00, stream_id=0>\n          (window_size_increment=983041)\n[  0.032] send SETTINGS frame <length=12, flags=0x00, stream_id=0>\n          (niv=2)\n          [SETTINGS_MAX_CONCURRENT_STREAMS(0x03):100]\n          [SETTINGS_INITIAL_WINDOW_SIZE(0x04):65535]\n[  0.032] send SETTINGS frame <length=0, flags=0x01, stream_id=0>\n          ; ACK\n          (niv=0)\n[  0.032] send PRIORITY frame <length=5, flags=0x00, stream_id=3>\n          (dep_stream_id=0, weight=201, exclusive=0)\n[  0.032] send PRIORITY frame <length=5, flags=0x00, stream_id=5>\n          (dep_stream_id=0, weight=101, exclusive=0)\n[  0.032] send PRIORITY frame <length=5, flags=0x00, stream_id=7>\n          (dep_stream_id=0, weight=1, exclusive=0)\n[  0.032] send PRIORITY frame <length=5, flags=0x00, stream_id=9>\n          (dep_stream_id=7, weight=1, exclusive=0)\n[  0.032] send PRIORITY frame <length=5, flags=0x00, stream_id=11>\n          (dep_stream_id=3, weight=1, exclusive=0)\n[  0.032] send HEADERS frame <length=35, flags=0x25, stream_id=13>\n          ; END_STREAM | END_HEADERS | PRIORITY\n          (padlen=0, dep_stream_id=11, weight=16, exclusive=0)\n          ; Open new stream\n          :method: GET\n          :path: /\n          :scheme: https\n          :authority: google.com\n          accept: */*\n          accept-encoding: gzip, deflate\n          user-agent: nghttp2/1.5.0\n[  0.037] recv SETTINGS frame <length=0, flags=0x01, stream_id=0>\n          ; ACK\n          (niv=0)\n[  0.037] recv (stream_id=13) :status: 302\n[  0.037] recv (stream_id=13) cache-control: private\n[  0.037] recv (stream_id=13) content-type: text/html; charset=UTF-8\n[  0.037] recv (stream_id=13) location: https://www.google.co.jp/?gfe_rd=cr&ei=ESVpVsPeOer98weXwJPYCA\n[  0.037] recv (stream_id=13) content-length: 262\n[  0.037] recv (stream_id=13) date: Thu, 10 Dec 2015 07:09:05 GMT\n[  0.037] recv (stream_id=13) server: GFE/2.0\n[  0.037] recv (stream_id=13) alternate-protocol: 443:quic,p=0\n[  0.037] recv (stream_id=13) alt-svc: clear\n[  0.037] recv HEADERS frame <length=160, flags=0x04, stream_id=13>\n          ; END_HEADERS\n          (padlen=0)\n          ; First response header\n[  0.037] recv DATA frame <length=262, flags=0x01, stream_id=13>\n          ; END_STREAM\n[  0.038] recv PING frame <length=8, flags=0x00, stream_id=0>\n          (opaque_data=0000000000000000)\n[  0.038] send GOAWAY frame <length=8, flags=0x00, stream_id=0>\n          (last_stream_id=0, error_code=NO_ERROR(0x00), opaque_data(0)=[])\n\nyahoo\u306b\u30a2\u30af\u30bb\u30b9\n# /usr/local/bin/nghttp -nv https://yahoo.com\n[  0.100] Connected\n[  0.191][NPN] server offers:\n          * spdy/3.1\n          * spdy/3\n          * http/1.1\n          * http/1.0\n[ERROR] HTTP/2 protocol was not selected. (nghttp2 expects h2)\nSome requests were not processed. total=1, processed=0\n```\n\ncurl\u3092\u4f7f\u3063\u3066\u30a2\u30af\u30bb\u30b9\n\n```\n# curl -vso /dev/null --http2 https://youtube.com\n* Rebuilt URL to: https://youtube.com/\n*   Trying 216.58.221.14...\n* Connected to youtube.com (216.58.221.14) port 443 (#0)\n* Cipher selection: ALL:!EXPORT:!EXPORT40:!EXPORT56:!aNULL:!LOW:!RC4:@STRENGTH\n* successfully set certificate verify locations:\n*   CAfile: /etc/pki/tls/certs/ca-bundle.crt\n  CApath: none\n* TLSv1.2 (OUT), TLS handshake, Client hello (1):\n} [252 bytes data]\n* TLSv1.2 (IN), TLS handshake, Server hello (2):\n{ [116 bytes data]\n* NPN, negotiated HTTP2 (h2)\n* TLSv1.2 (IN), TLS handshake, Certificate (11):\n{ [3700 bytes data]\n* TLSv1.2 (IN), TLS handshake, Server key exchange (12):\n{ [148 bytes data]\n* TLSv1.2 (IN), TLS handshake, Server finished (14):\n{ [4 bytes data]\n* TLSv1.2 (OUT), TLS handshake, Client key exchange (16):\n} [70 bytes data]\n* TLSv1.2 (OUT), TLS change cipher, Client hello (1):\n} [1 bytes data]\n* TLSv1.2 (OUT), TLS handshake, Unknown (67):\n} [36 bytes data]\n* TLSv1.2 (OUT), TLS handshake, Finished (20):\n} [16 bytes data]\n* TLSv1.2 (IN), TLS change cipher, Client hello (1):\n{ [1 bytes data]\n* TLSv1.2 (IN), TLS handshake, Finished (20):\n{ [16 bytes data]\n* SSL connection using TLSv1.2 / ECDHE-ECDSA-AES128-GCM-SHA256\n* Server certificate:\n*        subject: C=US; ST=California; L=Mountain View; O=Google Inc; CN=*.google.com\n*        start date: Nov 26 00:09:43 2015 GMT\n*        expire date: Feb 23 00:00:00 2016 GMT\n*        subjectAltName: youtube.com matched\n*        issuer: C=US; O=Google Inc; CN=Google Internet Authority G2\n*        SSL certificate verify ok.\n* Using HTTP2, server supports multi-use\n* Connection state changed (HTTP/2 confirmed)\n* TCP_NODELAY set\n* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0\n* Using Stream ID: 1 (easy handle 0x1ad2fb0)\n> GET / HTTP/1.1\n> Host: youtube.com\n> User-Agent: curl/7.46.0\n> Accept: */*\n>\n< HTTP/2.0 301\n< date:Thu, 10 Dec 2015 07:38:04 GMT\n< server:gwiseguy/2.0\n< location:https://www.youtube.com/\n< content-length:0\n< content-type:text/html\n< x-xss-protection:1; mode=block\n< alternate-protocol:443:quic,p=0\n< alt-svc:clear\n<\n* Connection #0 to host youtube.com left intact\n```\n\n\n\u53c2\u8003\nhttp://takeshiyako.blogspot.jp/2015/09/curl-http2.html\nhttps://blog.cloudflare.com/tools-for-debugging-testing-and-using-http-2/\nhttp://qiita.com/0xfffffff7/items/3a3c75f46c781d83a70d\n", "tags": ["nghttp2", "http2"]}