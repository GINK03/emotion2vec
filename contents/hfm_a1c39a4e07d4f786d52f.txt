{"tags": ["Puppet"], "context": " More than 1 year has passed since last update.\n\n\u80cc\u666f\nPuppet 4.0 \u304b\u3089\u3001 import \u95a2\u6570\u304c\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002\n\u30b6\u30c3\u30af\u30ea\u8a00\u3046\u3068\u3001\u3053\u308c\u306f\u8907\u6570\u306e manifests \u3092\u30ac\u30c3\u30c1\u30e3\u30f3\u30b3\u3059\u308b\u3082\u306e\u3067\u3059\u3002\n# default.pp \u3068 node.pp \u306e\u5185\u5bb9\u3092\u53d6\u308a\u8fbc\u3093\u3067\u4f7f\u3046\nimport 'default.pp'\nimport 'node.pp'\n\n4.0 \u304b\u3089 import \u95a2\u6570\u304c\u5165\u3063\u3066\u3044\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30a8\u30e9\u30fc\u3068\u306a\u308a\u307e\u3059\u3002\n$ puppet apply /tmp/hello.pp\nError: Evaluation Error: Use of 'import' has been discontinued in favor of a manifest directory. See http://links.puppetlabs.com/puppet-import-deprecation at /tmp/hello.pp:1:1 on node okkun.local\n\n\n\u3053\u308c\u304b\u3089\u306f\u3069\u3046\u3059\u308b\n\u4eca\u307e\u3067 site.pp \u306e\u3088\u3046\u306aMain Manifest\u3067 import \u3057\u3066\u3044\u305f\u5834\u5408\u306f\u30014.x\u304b\u3089\u306f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u56de\u907f\u3067\u304d\u305d\u3046\u3067\u3059\u3002\n\n\nDirectories: The Main Manifest(s) \u2014 Documentation \u2014 Puppet Labs\n\nIf the main manifest is a directory, Puppet will parse every .pp file in the directory in alphabetical order and then evaluate the combined manifest. It will descend into all subdirectories of the manifest dir, and load files in depth-first order. (For example, if the manifest directory contains a directory named 01 and a file named 02.pp, it will parse all the files in 01 before 02.)\n\npuppet apply /path/to/directory \u3068\u3059\u308c\u3070\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4e2d\u306e Puppet manifests\u3092\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u9806\u306b\u8aad\u307f\u8fbc\u307f\u3001\u307e\u3068\u3081\u30661\u3064\u306e Manifest \u3068\u3057\u3066\u7d50\u5408\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\n\u4f8b\nhello.pp \u3068 world.pp \u306b\u305d\u308c\u305e\u308c\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5185\u5bb9\u304c\u3042\u308b\u3068\u3057\u307e\u3059\u3002\n\u3069\u3061\u3089\u3082 hello world \u3068\u51fa\u529b\u3059\u308b\u3060\u3051\u306e manifests \u3067\u3059\u3002\n# hello.pp\nnotice('hello')\n\n# world.pp\nnotice('world')\n\n\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u30921\u3064\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u5165\u308c\u3066\u3001 puppet apply /path/to/manifests_dir \u3068\u5b9f\u884c\u3059\u308c\u3070\u3001\u6307\u5b9a\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\uff08\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u542b\u3080\uff09\u3092\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u9806\u306b\u7d50\u5408\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n$ puppet apply /tmp/puppet_main_manifest/\nNotice: Scope(Class[main]): hello\nNotice: Scope(Class[main]): world\nNotice: Compiled catalog for okkun.local in environment production in 0.66 seconds\nNotice: Applied catalog in 0.01 seconds\n\n\n\u7d50\u8ad6\n\u3053\u308c\u307e\u3067\uff1a\n# site.pp\nimport 'default.pp'\nimport 'node.pp'\n\npuppet apply /path/to/manifests/site.pp\n\n/path/to/manifests\n\u251c\u2500\u2500 default.pp\n\u251c\u2500\u2500 node.pp\n\u2514\u2500\u2500 site.pp\n\n\u3053\u308c\u304b\u3089\uff1a\npuppet apply /path/to/manifests_dir\n\n/path/to/manifests_dir\n\u251c\u2500\u2500 default.pp\n\u2514\u2500\u2500 node.pp\n\n\n\u80cc\u666f\n---\n\nPuppet 4.0 \u304b\u3089\u3001 `import` \u95a2\u6570\u304c\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002\n\u30b6\u30c3\u30af\u30ea\u8a00\u3046\u3068\u3001\u3053\u308c\u306f\u8907\u6570\u306e manifests \u3092\u30ac\u30c3\u30c1\u30e3\u30f3\u30b3\u3059\u308b\u3082\u306e\u3067\u3059\u3002\n\n```puppet\n# default.pp \u3068 node.pp \u306e\u5185\u5bb9\u3092\u53d6\u308a\u8fbc\u3093\u3067\u4f7f\u3046\nimport 'default.pp'\nimport 'node.pp'\n```\n\n4.0 \u304b\u3089 `import` \u95a2\u6570\u304c\u5165\u3063\u3066\u3044\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30a8\u30e9\u30fc\u3068\u306a\u308a\u307e\u3059\u3002\n\n```console\n$ puppet apply /tmp/hello.pp\nError: Evaluation Error: Use of 'import' has been discontinued in favor of a manifest directory. See http://links.puppetlabs.com/puppet-import-deprecation at /tmp/hello.pp:1:1 on node okkun.local\n```\n\n\u3053\u308c\u304b\u3089\u306f\u3069\u3046\u3059\u308b\n---\n\n\u4eca\u307e\u3067 `site.pp` \u306e\u3088\u3046\u306aMain Manifest\u3067 `import` \u3057\u3066\u3044\u305f\u5834\u5408\u306f\u30014.x\u304b\u3089\u306f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u56de\u907f\u3067\u304d\u305d\u3046\u3067\u3059\u3002\n\n> ### [Directories: The Main Manifest(s) \u2014 Documentation \u2014 Puppet Labs](https://docs.puppetlabs.com/puppet/4.2/reference/dirs_manifest.html)\n>\n> If the main manifest is a directory, Puppet will parse every `.pp` file in the directory in alphabetical order and then evaluate the combined manifest. It will descend into all subdirectories of the manifest dir, and load files in depth-first order. (For example, if the manifest directory contains a directory named `01` and a file named `02.pp`, it will parse all the files in `01` before `02`.)\n\n`puppet apply /path/to/directory` \u3068\u3059\u308c\u3070\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4e2d\u306e Puppet manifests\u3092\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u9806\u306b\u8aad\u307f\u8fbc\u307f\u3001\u307e\u3068\u3081\u30661\u3064\u306e Manifest \u3068\u3057\u3066\u7d50\u5408\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\n### \u4f8b\n\n`hello.pp` \u3068 `world.pp` \u306b\u305d\u308c\u305e\u308c\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5185\u5bb9\u304c\u3042\u308b\u3068\u3057\u307e\u3059\u3002\n\u3069\u3061\u3089\u3082 `hello` `world` \u3068\u51fa\u529b\u3059\u308b\u3060\u3051\u306e manifests \u3067\u3059\u3002\n\n```puppet\n# hello.pp\nnotice('hello')\n```\n\n```puppet\n# world.pp\nnotice('world')\n```\n\n\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u30921\u3064\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u5165\u308c\u3066\u3001 `puppet apply /path/to/manifests_dir` \u3068\u5b9f\u884c\u3059\u308c\u3070\u3001\u6307\u5b9a\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\uff08\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u542b\u3080\uff09\u3092\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u9806\u306b\u7d50\u5408\u3057\u3066\u5b9f\u884c\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\n```console\n$ puppet apply /tmp/puppet_main_manifest/\nNotice: Scope(Class[main]): hello\nNotice: Scope(Class[main]): world\nNotice: Compiled catalog for okkun.local in environment production in 0.66 seconds\nNotice: Applied catalog in 0.01 seconds\n```\n\n\u7d50\u8ad6\n---\n\n\u3053\u308c\u307e\u3067\uff1a\n\n```puppet\n# site.pp\nimport 'default.pp'\nimport 'node.pp'\n```\n```\npuppet apply /path/to/manifests/site.pp\n\n/path/to/manifests\n\u251c\u2500\u2500 default.pp\n\u251c\u2500\u2500 node.pp\n\u2514\u2500\u2500 site.pp\n```\n\n\n\u3053\u308c\u304b\u3089\uff1a\n\n```\npuppet apply /path/to/manifests_dir\n\n/path/to/manifests_dir\n\u251c\u2500\u2500 default.pp\n\u2514\u2500\u2500 node.pp\n```\n"}