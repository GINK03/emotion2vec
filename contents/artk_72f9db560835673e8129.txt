{"context": " More than 1 year has passed since last update.PC\u306b\u7e4b\u3044\u3060\u30bb\u30f3\u30b5\u60c5\u5831\u3092android\u306b\u9001\u4fe1\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u308b\u6a5f\u4f1a\u304c\u3042\u3063\u305f\u306e\u3067\uff0c\u305d\u306e\u307e\u3068\u3081\uff0e\n\u30b7\u30b9\u30c6\u30e0\u306e\u8981\u4ef6\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u69d8\u306b\u306a\u308a\u307e\u3059\uff0e\n\nAndroid\u5074\u306f\u5143\u3005Bluetooth\u3067\u30c7\u30fc\u30bf\u3092\u3084\u308a\u53d6\u308a\u3059\u308b\u90e8\u5206\u304c\u3042\u308a\uff0c\u305d\u306e\u30c7\u30fc\u30bf\u3092\u30bb\u30f3\u30b5\u60c5\u5831\u3067\u7f6e\u304d\u63db\u3048\u308b\u305f\u3081\u901a\u4fe1\u306b\u306fBluetooth\u3092\u4f7f\u7528\nPC\u306fVAIO\u3067\uff0c\u5143\u304b\u3089Bluetooth\u3092\u642d\u8f09\u3057\u3066\u3044\u308b\u306e\u3067\uff0c\u305d\u308c\u3092\u4f7f\u7528\uff0e\n\u30bb\u30f3\u30b5\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304cC++\u306e\u30b3\u30fc\u30c9\u3067\u7528\u610f\u3055\u308c\u3066\u3044\u305f\u306e\u3067\uff0cPC\u5074\u306fC++\u3092\u4f7f\u7528\nPC\u5074\u306e\u30bd\u30b1\u30c3\u30c8\u901a\u4fe1\u306b\u306f\u6700\u3082\u30e1\u30b8\u30e3\u30fc\u3067\u3042\u308d\u3046Socket\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u7528\n\u30b5\u30fc\u30d0\u30fc\u306fPC\u5074\u3067\u7acb\u3066\uff0cAndroid\u304b\u3089\u63a5\u7d9a\n\n\u3084\u3063\u305f\u3053\u3068\u3042\u308b\u4eba\u306b\u306f\u7c21\u5358\u3058\u3083\u306a\u3044\u304b\u3068\u601d\u308f\u308c\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\uff0c\u81ea\u5206\u306f\u901a\u4fe1\u307e\u308f\u308a\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u304c\u3068\u3066\u3082\u82e6\u624b\u3067\uff0c\u4eca\u56de\u3082\u6848\u306e\u5b9a\u5927\u82e6\u6226\u3092\u5f37\u3044\u3089\u308c\u307e\u3057\u305f\u30fb\u30fb\u30fb\n\u5168\u4f53\u306e\u304a\u304a\u307e\u304b\u306a\u6d41\u308c\u3068\u3057\u3066\u306f\uff0c\u4ee5\u4e0b\u306e\u69d8\u306b\u306a\u308a\u307e\u3059\uff0e\n\nAndroid\u304b\u3089\u306e\u63a5\u7d9a\u3092\u53d7\u3051\u4ed8\u3051\u308b\u305f\u3081\u306eSocket\u3092\u958b\u304f\nAndroid\u304b\u3089\u63a5\u7d9a\u3057\uff0c\u901a\u4fe1\u7528\u306eSocket\u3092\u958b\u304f\n\u901a\u4fe1\u7528\u306e\u30bd\u30b1\u30c3\u30c8\u3092\u901a\u3057\uff0c\u30bb\u30f3\u30b5\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3059\u308b\n\n\n\u901a\u4fe1\u7528\u306eSocket\u3092\u958b\u304f\u307e\u3067\n\n\u4e0b\u6e96\u5099\n\u307e\u305aBluetooth\u306e\u30da\u30a2\u30ea\u30f3\u30b0\u3092\u884c\u3044\u307e\u3059\uff0e\u3053\u306e\u90e8\u5206\u306b\u95a2\u3057\u3066\u306fBluetooth\u30c9\u30f3\u30b0\u30eb\u3092\u7528\u3044\u305f\u5834\u5408\u306a\u3069\uff0c\u500b\u5225\u306e\u30b1\u30fc\u30b9\u306b\u3088\u308b\u306e\u3067\u5272\u611b\uff0e\n\u6b21\u306b\u901a\u4fe1\u7528\u306eCOM\u30dd\u30fc\u30c8\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059(\u3053\u308c\u306f\u3072\u3087\u3063\u3068\u3057\u305f\u3089\u5fc5\u8981\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c)\uff0e\u4eca\u56de\u7528\u3044\u305fVAIOPC\u306e\u5834\u5408\uff0cAndroid\u5074\u3067UUID\u3092\u6307\u5b9a\u3057\u3066\u30bd\u30b1\u30c3\u30c8\u3092\u958b\u304f\u3068Bluetooth\u306e\u8a2d\u5b9a\u304b\u3089\u63a5\u7d9a\u5148\u306eCOM\u30dd\u30fc\u30c8\u306e\u8ffd\u52a0\u304c\u3067\u304d\u307e\u3057\u305f\uff0eUSB\u3067\u3064\u306a\u3050\u5834\u5408\u306f\u81ea\u52d5\u7684\u306b\u5272\u308a\u632f\u3089\u308c\u308b\u3068\u601d\u3044\u307e\u3059(\u78ba\u8a8d\u306f\u3057\u3066\u306a\u3044\u3051\u3069)\uff0e\n\nsocket\u90e8\u5206\u306e\u30b3\u30fc\u30c9\n\u3053\u3053\u307e\u3067\u3067\u4e0b\u6e96\u5099\u306f\u7d42\u4e86\uff0e\u3053\u3053\u304b\u3089\u306f\u30b3\u30fc\u30c9\u306b\u79fb\u308a\u307e\u3059\uff0e\nAndroid\u5074\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u95a2\u3057\u3066\u306f\uff0c\u516c\u5f0f\u306esample\u306eBluetoothChat\u306e\u901a\u4fe1\u90e8\u5206\u3092\u7528\u3044\u307e\u3057\u305f\uff0e\u4e00\u90e8\u5909\u66f4\u70b9\u3068\u3057\u3066\u306f\uff0cUUID\u3068\u3057\u3066SPP(SerialPortServiceClass_UUID)\u3092\u4f7f\u7528\u3057\uff0cBluetoothChatService.java\u306eMY_UUID\u3092\u5909\u66f4\u3057\u307e\u3059\uff0e\u901a\u4fe1\u306eUUID\u306b\u95a2\u3057\u3066\u8a73\u3057\u304f\u77e5\u308a\u305f\u3044\u65b9\u306f\u3053\u3053\u3092\u53c2\u8003\u306b\uff0e\n\u5909\u66f4\u524d\n// Unique UUID for this application\nprivate static final UUID MY_UUID = UUID.fromString(\"fa87c0d0-afac-11de-8a39-0800200c9a66\");\n\n\u5909\u66f4\u5f8c\n// Unique UUID for this application\nprivate static final UUID MY_UUID = UUID.fromString(\"00001101-0000-1000-8000-00805F9B34FB\");\n\n\u6b21\u306bPC\u5074\u3067\u3059\uff0e\u3053\u306e\u90e8\u5206\u306fSPP\u901a\u4fe1\u7528Bluetooth Socket Server\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\uff0e\u30b3\u30fc\u30c9\u306f\u91cd\u8981\u306a\u90e8\u5206\u306e\u307f\u629c\u7c8b\uff0e\n\u63a5\u7d9a\u7528\u306esocket\u3092\u958b\u304d\uff0candroid\u304b\u3089\u306e\u63a5\u7d9a\u3092\u5f85\u3063\u3066\u901a\u4fe1\u7528\u306esocket\u3092\u958b\u304f\u90e8\u5206\u306e\u30b3\u30fc\u30c9\uff0e\n    SOCKET sockRecv;\n    SOCKADDR_BTH sockAddrBth = {0};\n\n    sockRecv = socket(AF_BTH, SOCK_STREAM, BTHPROTO_RFCOMM);\n    if (INVALID_SOCKET == sockRecv) {\n        return false;\n    }\n\n    sockAddrBth.addressFamily = AF_BTH; // For Bluetooth\n    sockAddrBth.port = BT_PORT_ANY;\n    if (SOCKET_ERROR == bind(sockRecv, (SOCKADDR *) &sockAddrBth, sizeof(sockAddrBth)))\n    {\n        closesocket(sockRecv);\n        return false;\n    }\n\n    int size = sizeof(sockAddrBth);\n    getsockname(sockRecv, (SOCKADDR *) &sockAddrBth, &size);\n\n    CSADDR_INFO info = {0};\n    info.LocalAddr.lpSockaddr = (LPSOCKADDR) &sockAddrBth;\n    info.LocalAddr.iSockaddrLength = sizeof(sockAddrBth);\n    info.iSocketType = SOCK_STREAM;\n    info.iProtocol = BTHPROTO_RFCOMM;\n\n    WSAQUERYSET set = {0};\n    set.dwSize = sizeof(WSAQUERYSET);                              // Must be set to sizeof(WSAQUERYSET)\n    set.dwOutputFlags = 0;                                         // Not used\n    set.lpszServiceInstanceName = \"Server\";                        // Recommended.\n    set.lpServiceClassId = (LPGUID)&SerialPortServiceClass_UUID;   // !\u3053\u3053\u306eUUID(00001101-0000-1000-8000-00805F9B34FB)\u306fAndroid\u5074\u3068\u30de\u30c3\u30c1\u3057\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b!\n    set.lpVersion = NULL;                                          // Not used.\n    set.lpszComment = NULL;                                        // Optional.\n    set.dwNameSpace = NS_BTH;                                      // Must be NS_BTH.\n    set.lpNSProviderId = NULL;                                     // Not required.\n    set.lpszContext = NULL;                                        // Not used.\n    set.dwNumberOfProtocols = 0;                                   // Not used.\n    set.lpafpProtocols = NULL;                                     // Not used.\n    set.lpszQueryString = NULL;                                    // not used.\n    set.dwNumberOfCsAddrs = 1;                                     // Must be 1.\n    set.lpcsaBuffer = &info;                                       // Pointer to a CSADDR_INFO.\n    set.lpBlob = NULL;                                             // Optional.\n\n    if (WSASetService(&set, RNRSERVICE_REGISTER, 0) != 0) {\n        return false;\n    }\n\n    listen(sockRecv, 0);\n\n    SOCKADDR_BTH sab2;\n    int ilen = sizeof(sab2);\n    // \u901a\u4fe1\u7528\u306esocket\u3092\u958b\u304f\uff0e\u3053\u306esocket\u3067\u901a\u4fe1\u3092\u884c\u3046\uff0e\n    acceptedSocket = accept(sockRecv, (SOCKADDR *)&sab2, &ilen);\n    // \u63a5\u7d9a\u7528\u306esocket\u306f\u5fc5\u8981\u306a\u3044\u306e\u3067\u9589\u3058\u308b\n    closesocket(sockRecv);\n\n\n\u4e0a\u8a18\u30b3\u30fc\u30c9\u306eacceptedSocket\u306f\u4fdd\u6301\u3057\u3066\u304a\u304d\uff0c\u901a\u4fe1\u306b\u3082\u7528\u3044\u307e\u3059\uff0e\n\nAndroid\u306b\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\n\u3053\u3053\u307e\u3067\u304f\u308c\u3070\u3042\u3068\u5c11\u3057\u30fb\u30fb\u30fb\u306e\u306f\u305a\u304c\uff0c\u3053\u3053\u3067\u307e\u3055\u304b\u306e\u3069\u3093\u8a70\u307e\u308a\uff0e\u6570\u6642\u9593\u60a9\u307f\u307e\u3057\u305f\u30fb\u30fb\u30fb\nSocket\u3092\u901a\u3057\u3066\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3059\u308b\u306e\u306f\u7c21\u5358\u3067\uff0csend\u306e\u95a2\u6570\u4e00\u3064\u306e\u547c\u3073\u51fa\u3057\u3067\u53ef\u80fd\u3067\u3059\uff0e\u4f55\u6545\u8a70\u307e\u3063\u305f\u304b\u3068\u8a00\u3046\u3068\uff0cAndroid\u5074\u3067\u30c7\u30b3\u30fc\u30c9\u3057\u305f\u30c7\u30fc\u30bf\u304c\u5168\u7136\u9055\u3046\u3068\u3044\u3046\u554f\u984c\u304c\u89e3\u6c7a\u3057\u306a\u304b\u3063\u305f\u305f\u3081\u3067\u3059\uff0e\n\u3061\u306a\u307f\u306b\uff0csend\u306f\uff0csend(SOCKET s, const char* buf, int len, int flags)\u306e\u5f62\u5f0f\u3092\u53d6\u308a\uff0cbuf\u306e\u90e8\u5206\u3067\u914d\u5217\u306a\u3069\u3092\u5909\u63db\u3057\u3066\u9001\u4fe1\u3057\u307e\u3059\uff0e\u4eca\u56de\u306fint\u306e\u914d\u5217\u3092\u9001\u4fe1\u3059\u308b\u305f\u3081\uff0cint * -> char * \u306e\u5909\u63db\u3092\u3057\u307e\u3057\u305f\uff0e\nAndroid\u5074\u306e\u30c7\u30b3\u30fc\u30c9\u306f\u4ed6\u3067\u3082\u4f7f\u3063\u3066\u3044\u3066\u6050\u3089\u304f\u9593\u9055\u3063\u3066\u3044\u306a\u3044(\u3068\u3044\u3046\u304b\u6b63\u3057\u304b\u3063\u305f)\u3068\u8003\u3048\uff0c\u30a8\u30f3\u30b3\u30fc\u30c9\u306e\u969b\u306b\u3069\u3046\u3059\u308c\u3070\u3088\u3044\u306e\u304b\u3092\u5ef6\u3005\u3068\u8abf\u3079\u3066\u306f\u8a66\u3059\u3068\u3044\u3046\u7e70\u308a\u8fd4\u3057\u3067\u3057\u305f\u30fb\u30fb\u30fb\n\u3053\u306e\u3084\u308a\u65b9\u306b\u95a2\u3059\u308b\u8a18\u4e8b\u306f\u7d50\u69cb\u3042\u308b\u306e\u3067\u3059\u304c\uff0c\u5358\u7d14\u306b(char *) (int\u306e\u914d\u5217)\u3068\u3044\u3046\u98a8\u306b\u578b\u5909\u63db\u3059\u308c\u3070\u3044\u3044\u3068\u66f8\u3044\u3066\u3042\u308b\u3082\u306e\u304c\u591a\u304f\uff0c\u8a66\u3057\u307e\u3057\u305f\u304c\u30c0\u30e1\uff0e\u3055\u3089\u306bint * -> byte * -> char * \u306e\u5909\u63db\u7b49\u3082\u8272\u3005\u8a66\u3057\u307e\u3057\u305f\u304c\uff0c\u4e00\u5411\u306b\u89e3\u6c7a\u305b\u305a\uff0e\u9014\u65b9\u306b\u66ae\u308c\u3066\u3044\u305f\u3068\u3053\u308d\u3067\u4e00\u7b4b\u306e\u5149\u304c\uff0e\nstackoverflow\u306e\u3053\u306e\u8a18\u4e8b\u306b\u3088\u308b\u3068\uff0chton\u3092\u565b\u307e\u305b\u3066\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30d0\u30a4\u30c8\u30aa\u30fc\u30c0\u30fc\u306b\u5909\u63db\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3068\u306e\u3053\u3068\uff0e\n\u6700\u7d42\u7684\u306b\u306f\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u9001\u4fe1\u3067\u304d\u307e\u3057\u305f\uff0earray\u304c\u9001\u4fe1\u3059\u308b\u914d\u5217\uff0cint\u306f\u9001\u4fe1\u3059\u308b\u30c7\u30fc\u30bf\u6570(\u914d\u5217\u306e\u9577\u3055\u3068\u7b49\u4fa1)\u3067\u3059\uff0e\nvoid btSend(int* array, int len) {\n        int* netArray;\n        netArray = (int*)malloc(sizeof(int)*len);\n        for (int i = 0; i < len; i++) {\n            netArray[i] = htonl(array[i]);\n        }\n        send(acceptedSocket,  (const char *)netArray, sizeof(int)*len, 0);\n}\n\n\u5206\u304b\u3063\u3066\u308c\u3070\u4e00\u6642\u9593\u3082\u304b\u304b\u3089\u305a\u3067\u304d\u305f\u3082\u306e\u306b\u7d50\u5c402\u65e5\u3082\u304b\u304b\u3063\u3066\u3057\u307e\u3044\uff0c\u672c\u5f53\u306b\u901a\u4fe1\u5468\u308a\u306e\u77e5\u8b58\u3092\u3064\u3051\u306a\u3044\u3068\u307e\u305a\u3044\u3068\u611f\u3058\u307e\u3057\u305f\u30fb\u30fb\u30fb\nPC\u306b\u7e4b\u3044\u3060\u30bb\u30f3\u30b5\u60c5\u5831\u3092android\u306b\u9001\u4fe1\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u308b\u6a5f\u4f1a\u304c\u3042\u3063\u305f\u306e\u3067\uff0c\u305d\u306e\u307e\u3068\u3081\uff0e\n\u30b7\u30b9\u30c6\u30e0\u306e\u8981\u4ef6\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u69d8\u306b\u306a\u308a\u307e\u3059\uff0e\n\n* Android\u5074\u306f\u5143\u3005Bluetooth\u3067\u30c7\u30fc\u30bf\u3092\u3084\u308a\u53d6\u308a\u3059\u308b\u90e8\u5206\u304c\u3042\u308a\uff0c\u305d\u306e\u30c7\u30fc\u30bf\u3092\u30bb\u30f3\u30b5\u60c5\u5831\u3067\u7f6e\u304d\u63db\u3048\u308b\u305f\u3081\u901a\u4fe1\u306b\u306fBluetooth\u3092\u4f7f\u7528\n* PC\u306fVAIO\u3067\uff0c\u5143\u304b\u3089Bluetooth\u3092\u642d\u8f09\u3057\u3066\u3044\u308b\u306e\u3067\uff0c\u305d\u308c\u3092\u4f7f\u7528\uff0e\n* \u30bb\u30f3\u30b5\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304cC++\u306e\u30b3\u30fc\u30c9\u3067\u7528\u610f\u3055\u308c\u3066\u3044\u305f\u306e\u3067\uff0cPC\u5074\u306fC++\u3092\u4f7f\u7528\n* PC\u5074\u306e\u30bd\u30b1\u30c3\u30c8\u901a\u4fe1\u306b\u306f\u6700\u3082\u30e1\u30b8\u30e3\u30fc\u3067\u3042\u308d\u3046Socket\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u7528\n* \u30b5\u30fc\u30d0\u30fc\u306fPC\u5074\u3067\u7acb\u3066\uff0cAndroid\u304b\u3089\u63a5\u7d9a\n\n\n\u3084\u3063\u305f\u3053\u3068\u3042\u308b\u4eba\u306b\u306f\u7c21\u5358\u3058\u3083\u306a\u3044\u304b\u3068\u601d\u308f\u308c\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\uff0c\u81ea\u5206\u306f\u901a\u4fe1\u307e\u308f\u308a\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u304c\u3068\u3066\u3082\u82e6\u624b\u3067\uff0c\u4eca\u56de\u3082\u6848\u306e\u5b9a\u5927\u82e6\u6226\u3092\u5f37\u3044\u3089\u308c\u307e\u3057\u305f\u30fb\u30fb\u30fb\n\u5168\u4f53\u306e\u304a\u304a\u307e\u304b\u306a\u6d41\u308c\u3068\u3057\u3066\u306f\uff0c\u4ee5\u4e0b\u306e\u69d8\u306b\u306a\u308a\u307e\u3059\uff0e\n\n1. Android\u304b\u3089\u306e\u63a5\u7d9a\u3092\u53d7\u3051\u4ed8\u3051\u308b\u305f\u3081\u306eSocket\u3092\u958b\u304f\n2. Android\u304b\u3089\u63a5\u7d9a\u3057\uff0c\u901a\u4fe1\u7528\u306eSocket\u3092\u958b\u304f\n3. \u901a\u4fe1\u7528\u306e\u30bd\u30b1\u30c3\u30c8\u3092\u901a\u3057\uff0c\u30bb\u30f3\u30b5\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3059\u308b\n\n### \u901a\u4fe1\u7528\u306eSocket\u3092\u958b\u304f\u307e\u3067\n\n######\u4e0b\u6e96\u5099\n\u307e\u305aBluetooth\u306e\u30da\u30a2\u30ea\u30f3\u30b0\u3092\u884c\u3044\u307e\u3059\uff0e\u3053\u306e\u90e8\u5206\u306b\u95a2\u3057\u3066\u306fBluetooth\u30c9\u30f3\u30b0\u30eb\u3092\u7528\u3044\u305f\u5834\u5408\u306a\u3069\uff0c\u500b\u5225\u306e\u30b1\u30fc\u30b9\u306b\u3088\u308b\u306e\u3067\u5272\u611b\uff0e\n\u6b21\u306b\u901a\u4fe1\u7528\u306eCOM\u30dd\u30fc\u30c8\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059(\u3053\u308c\u306f\u3072\u3087\u3063\u3068\u3057\u305f\u3089\u5fc5\u8981\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c)\uff0e\u4eca\u56de\u7528\u3044\u305fVAIOPC\u306e\u5834\u5408\uff0cAndroid\u5074\u3067UUID\u3092\u6307\u5b9a\u3057\u3066\u30bd\u30b1\u30c3\u30c8\u3092\u958b\u304f\u3068Bluetooth\u306e\u8a2d\u5b9a\u304b\u3089\u63a5\u7d9a\u5148\u306eCOM\u30dd\u30fc\u30c8\u306e\u8ffd\u52a0\u304c\u3067\u304d\u307e\u3057\u305f\uff0eUSB\u3067\u3064\u306a\u3050\u5834\u5408\u306f\u81ea\u52d5\u7684\u306b\u5272\u308a\u632f\u3089\u308c\u308b\u3068\u601d\u3044\u307e\u3059(\u78ba\u8a8d\u306f\u3057\u3066\u306a\u3044\u3051\u3069)\uff0e\n\n###### socket\u90e8\u5206\u306e\u30b3\u30fc\u30c9\n\u3053\u3053\u307e\u3067\u3067\u4e0b\u6e96\u5099\u306f\u7d42\u4e86\uff0e\u3053\u3053\u304b\u3089\u306f\u30b3\u30fc\u30c9\u306b\u79fb\u308a\u307e\u3059\uff0e\n**Android\u5074\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u95a2\u3057\u3066\u306f\uff0c\u516c\u5f0f\u306esample\u306e[BluetoothChat](https://android.googlesource.com/platform/development/+/eclair-passion-release/samples/BluetoothChat?autodive=0)\u306e\u901a\u4fe1\u90e8\u5206\u3092\u7528\u3044\u307e\u3057\u305f\uff0e\u4e00\u90e8\u5909\u66f4\u70b9\u3068\u3057\u3066\u306f\uff0cUUID\u3068\u3057\u3066SPP(SerialPortServiceClass_UUID)\u3092\u4f7f\u7528\u3057\uff0cBluetoothChatService.java\u306eMY_UUID\u3092\u5909\u66f4\u3057\u307e\u3059\uff0e**\u901a\u4fe1\u306eUUID\u306b\u95a2\u3057\u3066\u8a73\u3057\u304f\u77e5\u308a\u305f\u3044\u65b9\u306f[\u3053\u3053](https://www.bluetooth.org/ja-jp/specification/assigned-numbers/service-discovery)\u3092\u53c2\u8003\u306b\uff0e\n\n\u5909\u66f4\u524d\n\n```java\n// Unique UUID for this application\nprivate static final UUID MY_UUID = UUID.fromString(\"fa87c0d0-afac-11de-8a39-0800200c9a66\");\n```\n\n\u5909\u66f4\u5f8c\n\n```java\n// Unique UUID for this application\nprivate static final UUID MY_UUID = UUID.fromString(\"00001101-0000-1000-8000-00805F9B34FB\");\n```\n\n\u6b21\u306bPC\u5074\u3067\u3059\uff0e\u3053\u306e\u90e8\u5206\u306f[SPP\u901a\u4fe1\u7528Bluetooth Socket Server](http://kkayataka.hatenablog.com/entry/20110822/1314016776)\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\uff0e\u30b3\u30fc\u30c9\u306f\u91cd\u8981\u306a\u90e8\u5206\u306e\u307f\u629c\u7c8b\uff0e\n\u63a5\u7d9a\u7528\u306esocket\u3092\u958b\u304d\uff0candroid\u304b\u3089\u306e\u63a5\u7d9a\u3092\u5f85\u3063\u3066\u901a\u4fe1\u7528\u306esocket\u3092\u958b\u304f\u90e8\u5206\u306e\u30b3\u30fc\u30c9\uff0e\n\n```cpp\n\tSOCKET sockRecv;\n\tSOCKADDR_BTH sockAddrBth = {0};\n\n    sockRecv = socket(AF_BTH, SOCK_STREAM, BTHPROTO_RFCOMM);\n\tif (INVALID_SOCKET == sockRecv) {\n        return false;\n\t}\n \n\tsockAddrBth.addressFamily = AF_BTH; // For Bluetooth\n\tsockAddrBth.port = BT_PORT_ANY;\n    if (SOCKET_ERROR == bind(sockRecv, (SOCKADDR *) &sockAddrBth, sizeof(sockAddrBth)))\n    {\n        closesocket(sockRecv);\n        return false;\n    }\n\n\tint size = sizeof(sockAddrBth);\n\tgetsockname(sockRecv, (SOCKADDR *) &sockAddrBth, &size);\n\n\tCSADDR_INFO info = {0};\n\tinfo.LocalAddr.lpSockaddr = (LPSOCKADDR) &sockAddrBth;\n\tinfo.LocalAddr.iSockaddrLength = sizeof(sockAddrBth);\n\tinfo.iSocketType = SOCK_STREAM;\n\tinfo.iProtocol = BTHPROTO_RFCOMM;\n\n\tWSAQUERYSET set = {0};\n\tset.dwSize = sizeof(WSAQUERYSET);                              // Must be set to sizeof(WSAQUERYSET)\n    set.dwOutputFlags = 0;                                         // Not used\n    set.lpszServiceInstanceName = \"Server\";                        // Recommended.\n    set.lpServiceClassId = (LPGUID)&SerialPortServiceClass_UUID;   // !\u3053\u3053\u306eUUID(00001101-0000-1000-8000-00805F9B34FB)\u306fAndroid\u5074\u3068\u30de\u30c3\u30c1\u3057\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b!\n    set.lpVersion = NULL;                                          // Not used.\n    set.lpszComment = NULL;                                        // Optional.\n    set.dwNameSpace = NS_BTH;                                      // Must be NS_BTH.\n    set.lpNSProviderId = NULL;                                     // Not required.\n    set.lpszContext = NULL;                                        // Not used.\n    set.dwNumberOfProtocols = 0;                                   // Not used.\n    set.lpafpProtocols = NULL;                                     // Not used.\n    set.lpszQueryString = NULL;                                    // not used.\n    set.dwNumberOfCsAddrs = 1;                                     // Must be 1.\n    set.lpcsaBuffer = &info;                                       // Pointer to a CSADDR_INFO.\n    set.lpBlob = NULL;                                             // Optional.\n\n    if (WSASetService(&set, RNRSERVICE_REGISTER, 0) != 0) {\n        return false;\n    }\n    \n    listen(sockRecv, 0);\n\n    SOCKADDR_BTH sab2;\n    int ilen = sizeof(sab2);\n    // \u901a\u4fe1\u7528\u306esocket\u3092\u958b\u304f\uff0e\u3053\u306esocket\u3067\u901a\u4fe1\u3092\u884c\u3046\uff0e\n    acceptedSocket = accept(sockRecv, (SOCKADDR *)&sab2, &ilen);\n    // \u63a5\u7d9a\u7528\u306esocket\u306f\u5fc5\u8981\u306a\u3044\u306e\u3067\u9589\u3058\u308b\n    closesocket(sockRecv);\n\n```\n\n\u4e0a\u8a18\u30b3\u30fc\u30c9\u306eacceptedSocket\u306f\u4fdd\u6301\u3057\u3066\u304a\u304d\uff0c\u901a\u4fe1\u306b\u3082\u7528\u3044\u307e\u3059\uff0e\n\n### Android\u306b\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\n\u3053\u3053\u307e\u3067\u304f\u308c\u3070\u3042\u3068\u5c11\u3057\u30fb\u30fb\u30fb\u306e\u306f\u305a\u304c\uff0c\u3053\u3053\u3067\u307e\u3055\u304b\u306e\u3069\u3093\u8a70\u307e\u308a\uff0e\u6570\u6642\u9593\u60a9\u307f\u307e\u3057\u305f\u30fb\u30fb\u30fb\n\nSocket\u3092\u901a\u3057\u3066\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3059\u308b\u306e\u306f\u7c21\u5358\u3067\uff0csend\u306e\u95a2\u6570\u4e00\u3064\u306e\u547c\u3073\u51fa\u3057\u3067\u53ef\u80fd\u3067\u3059\uff0e\u4f55\u6545\u8a70\u307e\u3063\u305f\u304b\u3068\u8a00\u3046\u3068\uff0cAndroid\u5074\u3067\u30c7\u30b3\u30fc\u30c9\u3057\u305f\u30c7\u30fc\u30bf\u304c\u5168\u7136\u9055\u3046\u3068\u3044\u3046\u554f\u984c\u304c\u89e3\u6c7a\u3057\u306a\u304b\u3063\u305f\u305f\u3081\u3067\u3059\uff0e\n\u3061\u306a\u307f\u306b\uff0csend\u306f\uff0csend(SOCKET s, const char* buf, int len, int flags)\u306e\u5f62\u5f0f\u3092\u53d6\u308a\uff0cbuf\u306e\u90e8\u5206\u3067\u914d\u5217\u306a\u3069\u3092\u5909\u63db\u3057\u3066\u9001\u4fe1\u3057\u307e\u3059\uff0e\u4eca\u56de\u306fint\u306e\u914d\u5217\u3092\u9001\u4fe1\u3059\u308b\u305f\u3081\uff0cint * -> char * \u306e\u5909\u63db\u3092\u3057\u307e\u3057\u305f\uff0e\n\nAndroid\u5074\u306e\u30c7\u30b3\u30fc\u30c9\u306f\u4ed6\u3067\u3082\u4f7f\u3063\u3066\u3044\u3066\u6050\u3089\u304f\u9593\u9055\u3063\u3066\u3044\u306a\u3044(\u3068\u3044\u3046\u304b\u6b63\u3057\u304b\u3063\u305f)\u3068\u8003\u3048\uff0c\u30a8\u30f3\u30b3\u30fc\u30c9\u306e\u969b\u306b\u3069\u3046\u3059\u308c\u3070\u3088\u3044\u306e\u304b\u3092\u5ef6\u3005\u3068\u8abf\u3079\u3066\u306f\u8a66\u3059\u3068\u3044\u3046\u7e70\u308a\u8fd4\u3057\u3067\u3057\u305f\u30fb\u30fb\u30fb\n\u3053\u306e\u3084\u308a\u65b9\u306b\u95a2\u3059\u308b\u8a18\u4e8b\u306f\u7d50\u69cb\u3042\u308b\u306e\u3067\u3059\u304c\uff0c\u5358\u7d14\u306b(char *) (int\u306e\u914d\u5217)\u3068\u3044\u3046\u98a8\u306b\u578b\u5909\u63db\u3059\u308c\u3070\u3044\u3044\u3068\u66f8\u3044\u3066\u3042\u308b\u3082\u306e\u304c\u591a\u304f\uff0c\u8a66\u3057\u307e\u3057\u305f\u304c\u30c0\u30e1\uff0e\u3055\u3089\u306bint * -> byte * -> char * \u306e\u5909\u63db\u7b49\u3082\u8272\u3005\u8a66\u3057\u307e\u3057\u305f\u304c\uff0c\u4e00\u5411\u306b\u89e3\u6c7a\u305b\u305a\uff0e\u9014\u65b9\u306b\u66ae\u308c\u3066\u3044\u305f\u3068\u3053\u308d\u3067\u4e00\u7b4b\u306e\u5149\u304c\uff0e\n\nstackoverflow\u306e[\u3053\u306e\u8a18\u4e8b](http://stackoverflow.com/questions/12996657/send-raw-binary-data-over-c-socket, \"\u3053\u306e\u8a18\u4e8b\")\u306b\u3088\u308b\u3068\uff0chton\u3092\u565b\u307e\u305b\u3066\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30d0\u30a4\u30c8\u30aa\u30fc\u30c0\u30fc\u306b\u5909\u63db\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3068\u306e\u3053\u3068\uff0e\n\u6700\u7d42\u7684\u306b\u306f\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u9001\u4fe1\u3067\u304d\u307e\u3057\u305f\uff0earray\u304c\u9001\u4fe1\u3059\u308b\u914d\u5217\uff0cint\u306f\u9001\u4fe1\u3059\u308b\u30c7\u30fc\u30bf\u6570(\u914d\u5217\u306e\u9577\u3055\u3068\u7b49\u4fa1)\u3067\u3059\uff0e\n\n```cpp\nvoid btSend(int* array, int len) {\n\t\tint* netArray;\n\t\tnetArray = (int*)malloc(sizeof(int)*len);\n\t\tfor (int i = 0; i < len; i++) {\n\t\t\tnetArray[i] = htonl(array[i]);\n\t\t}\n\t\tsend(acceptedSocket,  (const char *)netArray, sizeof(int)*len, 0);\n}\n```\n\n\u5206\u304b\u3063\u3066\u308c\u3070\u4e00\u6642\u9593\u3082\u304b\u304b\u3089\u305a\u3067\u304d\u305f\u3082\u306e\u306b\u7d50\u5c402\u65e5\u3082\u304b\u304b\u3063\u3066\u3057\u307e\u3044\uff0c\u672c\u5f53\u306b\u901a\u4fe1\u5468\u308a\u306e\u77e5\u8b58\u3092\u3064\u3051\u306a\u3044\u3068\u307e\u305a\u3044\u3068\u611f\u3058\u307e\u3057\u305f\u30fb\u30fb\u30fb\n", "tags": ["bluetooth", "Android", "C++", "Socket\u901a\u4fe1"]}