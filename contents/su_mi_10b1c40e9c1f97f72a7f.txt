{"context": "\u4eca\u56de\u306fMysql\u3067\u4f7f\u7528\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3067\u4f7f\u7528\u3059\u308bmodel\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\ndefmodule Sample.User do\n  use Sample.Web, :model\n\n  schema \"users\" do\n    field :name, :string\n    field :age, :integer\n\n    timestamps()\n  end\nend\n\n\n\n\u57fa\u672c\n#\u5168\u4ef6\u53d6\u5f97\nUser |> Repo.all()\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0\n\n#ID\u304b\u3089\u53d6\u5f97\nUser |> Repo.get!(1)\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`id` = ?) \n#[1]\n\n\n\n\u6761\u4ef6\u6307\u5b9a\nUser\n  |> select([u], [u.name, u.age])\n  |> Repo.all()\n#SELECT u0.`name`, u0.`age` FROM `users` AS u0\n\nUser\n  |> select([u], count(u.id))\n  |> Repo.all()\n#SELECT count(u0.`id`) FROM `users` AS u0\n\n\n\n# =\nname = \"TEST\"\nUser\n  |> where([u], u.name == ^name)\n  |> Repo.all()\n\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`name` = ?) \n#[\"TEST\"]\n\n\n# !=\nname = \"TEST\"\nUser\n  |> where([u], u.name != ^name)\n  |> Repo.all()\n\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`name` != ?) \n#[\"TEST\"]\n\n# >\nage = 20\n\nUser\n    |> where([u], u.age > ^age)\n    |> Repo.all()\n\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`age` > ?)\n#[20]\n\n# >=\nage = 20\n\nUser\n    |> where([u], u.age >= ^age)\n    |> Repo.all()\n\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`age` >= ?)\n#[20]\n\n# <\nage = 20\n\nUser\n    |> where([u], u.age < ^age)\n    |> Repo.all()\n\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`age` < ?)\n#[20]\n\n# <=\nage = 20\n\nUser\n    |> where([u], u.age <= ^age)\n    |> Repo.all()\n\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`age` <= ?)\n#[20]\n\n# IN\nage = [20, 30]\n\nUser\n    |> where([u], u.age in ^age)\n    |> Repo.all()\n\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`age` IN (?,?))\n#[20, 30]\n\n# IS NULL\nUser\n    |> where([u], is_nil(u.age))\n    |> Repo.all()\n\n#SLECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`age` IS NULL) \n\n# LIKE\nname = \"TEST\"\nUser\n    |> where([u], like(u.name, ^(\"#{name}%\")))\n    |> Repo.all()\n\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`name` LIKE ?) \n#[\"TEST%\"]\n\n# OR\nname1 = \"TEST1\"\nname2 = \"TEST2\"\nname3 = \"TEST3\"\n\nUser\n    |> where([u], like(u.name, ^(\"#{name1}%\")) or like(u.name, ^(\"#{name2}%\")))\n    |> where([u], like(u.name, ^(\"#{name3}%\")))\n    |> Repo.all()\n\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE ((u0.`name` LIKE ?) OR (u0.`name` LIKE ?)) AND (u0.`name` LIKE ?)\n#[\"TEST1%\", \"TEST2%\", \"TEST3%\"]\n\n\n\n\u305d\u306e\u4ed6\nUser\n  |> distinct(true)\n  |> Repo.all()\n#SELECT DISTINCT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0\n\nUser\n  |> limit(10)\n  |> offset(0)\n  |> Repo.all()\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 LIMIT 10 OFFSET 0\n\nUser\n  |> group_by([u], u.age)\n  |> Repo.all()\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 GROUP BY u0.`age`\n\nUser\n  |> order_by([u], [asc: u.id, desc: u.age])\n  |> Repo.all()\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 ORDER BY u0.`id`, u0.`age` DESC\n\nUser\n  |> join(:inner, [u], p in User, u.id == p.id)\n  |> select([u, p], [u.id, p.name])\n  |> Repo.all()\n#SELECT u0.`id`, u1.`name` FROM `users` AS u0 INNER JOIN `users` AS u1 ON u0.`id` = u1.`id`\n\n\n\u30ea\u30f3\u30af\n1.elixir on phoenix \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n2.elixir on phoenix Mix Tasks\u306b\u3064\u3044\u3066\n3.elixir on phoenix ecto\u3092\u4f7f\u3063\u3066\u3044\u308d\u3044\u308d\u306aSELECT\u6587\n4.elixir on phoenix \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u66f8\u304d\u65b9\u306b\u3064\u3044\u3066\u307e\u3068\u3081\u3066\u307f\u305f\n5.elixir on phoenix changeset\u3067\u306eValidates\n\n\u4eca\u56de\u306fMysql\u3067\u4f7f\u7528\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3067\u4f7f\u7528\u3059\u308bmodel\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\n\n```ex\ndefmodule Sample.User do\n  use Sample.Web, :model\n\n  schema \"users\" do\n    field :name, :string\n    field :age, :integer\n\n    timestamps()\n  end\nend\n\n```\n\n#\u57fa\u672c\n\n```ex\n#\u5168\u4ef6\u53d6\u5f97\nUser |> Repo.all()\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0\n\n#ID\u304b\u3089\u53d6\u5f97\nUser |> Repo.get!(1)\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`id` = ?) \n#[1]\n\n```\n\n#\u6761\u4ef6\u6307\u5b9a\n\n```ex\nUser\n  |> select([u], [u.name, u.age])\n  |> Repo.all()\n#SELECT u0.`name`, u0.`age` FROM `users` AS u0\n\nUser\n  |> select([u], count(u.id))\n  |> Repo.all()\n#SELECT count(u0.`id`) FROM `users` AS u0\n\n  \n```\n\n```ex\n# =\nname = \"TEST\"\nUser\n  |> where([u], u.name == ^name)\n  |> Repo.all()\n  \n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`name` = ?) \n#[\"TEST\"]\n\n\n# !=\nname = \"TEST\"\nUser\n  |> where([u], u.name != ^name)\n  |> Repo.all()\n  \n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`name` != ?) \n#[\"TEST\"]\n\n# >\nage = 20\n\nUser\n    |> where([u], u.age > ^age)\n    |> Repo.all()\n    \n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`age` > ?)\n#[20]\n\n# >=\nage = 20\n\nUser\n    |> where([u], u.age >= ^age)\n    |> Repo.all()\n    \n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`age` >= ?)\n#[20]\n\n# <\nage = 20\n\nUser\n    |> where([u], u.age < ^age)\n    |> Repo.all()\n    \n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`age` < ?)\n#[20]\n\n# <=\nage = 20\n\nUser\n    |> where([u], u.age <= ^age)\n    |> Repo.all()\n    \n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`age` <= ?)\n#[20]\n\n# IN\nage = [20, 30]\n\nUser\n    |> where([u], u.age in ^age)\n    |> Repo.all()\n    \n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`age` IN (?,?))\n#[20, 30]\n\n# IS NULL\nUser\n    |> where([u], is_nil(u.age))\n    |> Repo.all()\n    \n#SLECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`age` IS NULL) \n\n# LIKE\nname = \"TEST\"\nUser\n    |> where([u], like(u.name, ^(\"#{name}%\")))\n    |> Repo.all()\n    \n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE (u0.`name` LIKE ?) \n#[\"TEST%\"]\n\n# OR\nname1 = \"TEST1\"\nname2 = \"TEST2\"\nname3 = \"TEST3\"\n\nUser\n    |> where([u], like(u.name, ^(\"#{name1}%\")) or like(u.name, ^(\"#{name2}%\")))\n    |> where([u], like(u.name, ^(\"#{name3}%\")))\n    |> Repo.all()\n    \n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 WHERE ((u0.`name` LIKE ?) OR (u0.`name` LIKE ?)) AND (u0.`name` LIKE ?)\n#[\"TEST1%\", \"TEST2%\", \"TEST3%\"]\n\n```\n\n#\u305d\u306e\u4ed6\n\n```ex\nUser\n  |> distinct(true)\n  |> Repo.all()\n#SELECT DISTINCT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0\n\nUser\n  |> limit(10)\n  |> offset(0)\n  |> Repo.all()\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 LIMIT 10 OFFSET 0\n\nUser\n  |> group_by([u], u.age)\n  |> Repo.all()\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 GROUP BY u0.`age`\n\nUser\n  |> order_by([u], [asc: u.id, desc: u.age])\n  |> Repo.all()\n#SELECT u0.`id`, u0.`name`, u0.`age`, u0.`inserted_at`, u0.`updated_at` FROM `users` AS u0 ORDER BY u0.`id`, u0.`age` DESC\n\nUser\n  |> join(:inner, [u], p in User, u.id == p.id)\n  |> select([u, p], [u.id, p.name])\n  |> Repo.all()\n#SELECT u0.`id`, u1.`name` FROM `users` AS u0 INNER JOIN `users` AS u1 ON u0.`id` = u1.`id`\n```\n\n#\u30ea\u30f3\u30af\n\n[1.elixir on phoenix \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7](http://qiita.com/su_mi/items/effc008f290d9037ece8)\n[2.elixir on phoenix Mix Tasks\u306b\u3064\u3044\u3066](http://qiita.com/su_mi/items/d5d25a10a3d967f7b1a0)\n3.elixir on phoenix ecto\u3092\u4f7f\u3063\u3066\u3044\u308d\u3044\u308d\u306aSELECT\u6587\n[4.elixir on phoenix \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u66f8\u304d\u65b9\u306b\u3064\u3044\u3066\u307e\u3068\u3081\u3066\u307f\u305f](http://qiita.com/su_mi/items/1ec1df829a2325ff71bc)\n[5.elixir on phoenix changeset\u3067\u306eValidates](http://qiita.com/su_mi/items/feb97e62aa24c73b3eb0)\n", "tags": ["Elixir", "Phoenix"]}