{"context": "\u3053\u3093\u306b\u3061\u306f ayaran \u3067\u3059\u3002\n\u793e\u5185\u958b\u767a\u3067\u306f\u3044\u308d\u3093\u306a\u90fd\u5408\u304c\u3042\u3063\u3066GitHub\u3068\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u74b0\u5883\u306eGitLab\u306e\u4e21\u65b9\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\u3082\u3061\u308d\u3093\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u74b0\u5883\u306eGitLab\u306a\u306e\u3067\u904b\u7528\u3082\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u3059\u3002\n\u4eca\u56de\u306fGitLab\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u306b\u3064\u3044\u3066\u5c11\u3057\u66f8\u3044\u3066\u307f\u3088\u3046\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\nGitLab\u306b\u3064\u3044\u3066\n\u305d\u3082\u305d\u3082GitLab\u3063\u3066\u306a\u3093\u3060\u3063\u3066\u4eba\u3082\u3044\u305d\u3046\u306a\u306e\u3067\u7c21\u5358\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\nGitLab\u306fGit\u3067\u7ba1\u7406\u3055\u308c\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092WEB\u3067Git\u30ea\u30dd\u30b8\u30c8\u30ea\u7ba1\u7406\u3001\u8ab2\u984c\u8ffd\u8de1\u3001\u30b3\u30fc\u30c9\u30ec\u30d3\u30e5\u30fc\u306a\u3069\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u308bRuby on Rails\u3067\u4f5c\u3089\u308c\u305f\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3059\u3002\n\u793e\u5185\u3067\u306f\u3001\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30b5\u30fc\u30d0\u4e0a\u306b\u69cb\u7bc9\u3057\u305fGitLab Community Edition\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u6709\u511f\u7248\u306eGitLab Enterprise Edition\u3001\u307e\u305fGitHub\u3068\u540c\u69d8\u306bGitLab\u304c\u904b\u7528\u3057\u3066\u3044\u308bgitlab.com\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3059\u308b\u74b0\u5883\n\u4eca\u56de\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3059\u308b\u793e\u5185\u306eGitLab\u306e\u74b0\u5883\u306b\u3064\u3044\u3066\u7c21\u5358\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\nGitLab\u306e\u904b\u7528\u306f\u30d0\u30fc\u30b8\u30e7\u30f36.0\u306e\u9803\u304b\u3089\u904b\u7528\u3057\u3066\u304d\u3066\u304a\u308a\u3001\u6570\u56de\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3092\u7d4c\u3066\u73fe\u5728\u30d0\u30fc\u30b8\u30e7\u30f37.9.4\u3092\u904b\u7528\u3057\u3066\u3044\u307e\u3059\u3002\nGitLab\u306f\u3060\u3044\u305f\u3044\u67081\u56de\u30da\u30fc\u30b9\u3067\u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30ea\u30ea\u30fc\u30b9\u3057\u3066\u304a\u308a\u3001\u73fe\u5728\u306f\u30d0\u30fc\u30b8\u30e7\u30f38.14.3\u304c\u6700\u65b0\u306eStable\u7248\u3067\u30d0\u30fc\u30b8\u30e7\u30f38.15\u304c\u03b2\u7248\u3067\u3059\u3002\n\n\u8a73\u7d30\u306a\u60c5\u5831\n\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u524d\u306e\u74b0\u5883\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\n\n\n\u9805\u76ee\n\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\n\n\nOS\nCentOS6\n\n\nRuby\n2.1.5\n\n\nGit\n1.8.3\n\n\nnginx\n1.4.7\n\n\nRedis\n2.8.19\n\n\nMySQL\n5.6.21\n\n\n\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u306b\u5fc5\u8981\u306a\u3053\u3068\nGitLab\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3092\u3059\u308b\u306b\u306fGitLab\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u5408\u308f\u305b\u3066\u30b5\u30fc\u30d0\u74b0\u5883\u3082\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4eca\u56de\u30d0\u30fc\u30b8\u30e7\u30f38.14.3\u306b\u3042\u3052\u308b\u308f\u3051\u3067\u3059\u304c\u3001\u3044\u304f\u3064\u304b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u305f\u308a\u65b0\u305f\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u308a\u3057\u307e\u3059\u3002\n\nRuby \n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u524d\u306e\u74b0\u5883\u3060\u3068Ruby2.1\u7cfb\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u5f8c\u306bSidekiq\u3068\u3044\u3046\u975e\u540c\u671f\u51e6\u7406\u3092\u884c\u3046gem\u304c\u8d77\u52d5\u3057\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u305f\u3081\u3001Ruby2.2\u7cfb\u4ee5\u964d\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3001\u516c\u5f0f\u624b\u9806\u306b\u3042\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\uff12\uff0e\uff13\uff0e\uff11\u307e\u3067\u4e0a\u3052\u307e\u3059\u3002\n\nGit \n\nGitLab\u306e\u73fe\u5728\u306e\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f38.14.3\u306b\u3059\u308b\u3068Git\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c2.7.3\u4ee5\u4e0a\u304c\u5fc5\u8981\u306a\u305f\u3081\u3001Git\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30821.8.3\u304b\u30892.8.4\u307e\u3067\u4e0a\u3052\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u3042\u3052\u306a\u304b\u3063\u305f\u5834\u5408\u3001WEB\u4e0a\u3067\u306eGit\u306e\u64cd\u4f5c\u304c\u3067\u304d\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\nGo \n\nGitLab8.0\u304b\u3089gitlab-git-http-server\u3001GitLab8.2\u304b\u3089gitlab-git-http-server\u306b\u304b\u308f\u3063\u3066gitlab-workhorse\u3092\u4f7f\u3046\u3088\u3046\u306b\u306a\u308a\u3001\u3053\u308c\u3089\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u969b\u306bGo\u304c\u5fc5\u8981\u306a\u305f\u3081\u3001Go\u3092\u65b0\u3057\u304f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4eca\u56de\u306f\u516c\u5f0f\u624b\u9806\u306b\u3042\u308b\u30d0\u30fc\u30b8\u30e7\u30f31.5.3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u305f\u3002\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u65b9\u6cd5\nGitLab\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u306f\u3001GitLab\u306eGit\u30ea\u30dd\u30b8\u30c8\u30ea\u5185\u306b\u5404\u30d0\u30fc\u30b8\u30e7\u30f3\u3054\u3068\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u305d\u308c\u3092\u53c2\u7167\u3057\u306a\u304c\u3089\u9032\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n1. GitLab\u306e\u505c\u6b62\n\u52d5\u4f5c\u3057\u3066\u3044\u308bGitLab\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\n$ sudo service gitlab stop\n\n\n2. \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n\u307e\u3093\u304c\u3044\u3061\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u306b\u5931\u6557\u3057\u305f\u969b\u306b\u5207\u308a\u623b\u3057\u3092\u884c\u3046\u305f\u3081\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u5f97\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n$ cd /home/git/gitlab\n$ sudo -u git -H bundle exec rake gitlab:backup:create RAILS_ENV=production\n\n\n3. Ruby\u3001Git\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\nRuby\u306e\u5c0e\u5165\u306e\u4ed5\u65b9\u306b\u3088\u3063\u3066\u65b9\u6cd5\u304c\u5909\u308f\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u4eca\u56de\u306e\u74b0\u5883\u3067\u306fRPM\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3057\u305fRuby\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u4e00\u65e6\u524a\u9664\u3057\u305f\u306e\u3061\u3001yum install\u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3092\u884c\u3044\u307e\u3059\u3002\n\u540c\u69d8\u306b\u3001Git\u3082RPM\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3057\u305f\u3082\u306e\u4f7f\u7528\u3057\u3066\u308b\u305f\u3081yum update\u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3092\u884c\u3044\u307e\u3059\u3002\n\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3057\u305fRPM\u306f\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u7f6e\u3044\u3066\u304a\u304d\u307e\u3059\u3002\n$ sudo yum remove ruby\n$ sudo yum install ruby\n$ sudo yum update git\n\n\u307e\u305f\u3001Ruby\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u3042\u3052\u305f\u306e\u3067gem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u969b\u306b\u5229\u7528\u3059\u308bbundler\u3082\u518d\u5ea6\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ sudo gem install bundler --no-ri --no-rdoc\n\n\n4. Go\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nGo\u3082Ruby\u3068Git\u3068\u540c\u69d8\u306bRPM\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3057\u305f\u3082\u306e\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ sudo yum install golang\n\n\n5. gitlab-workhorse\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u524d\u8ff0\u3057\u307e\u3057\u305f\u304c\u3001GitLab8.2\u4ee5\u964d\u3067\u306fgitlab-workhorse\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n$ cd /home/git\n$ sudo -u git -H git clone https://gitlab.com/gitlab-org/gitlab-workhorse.git\n$ cd gitlab-workhorse\n$ sudo -u git -H git checkout v1.0.1\n$ sudo -u git -H make\n\n\n6. \u5404\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u66f4\u65b0\nGitLab\u3068GitLab Shell\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u66f4\u65b0\u3092\u884c\u3044\u307e\u3059\u3002\n$ sudo cd /home/git/gitlab\n$ sudo -u git -H git fetch --all\n$ sudo -u git -H git checkout -- db/schema.rb\n$ sudo -u git -H git checkout 8-14-stable\n$ cd /home/git/gitlab-shell\n$ sudo -u git -H git fetch --all --tags\n$ sudo -u git -H git checkout v4.0.0\n\n\n7. secrets.yml\u306e\u8a2d\u7f6e\n\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u524d\u306eGitLab7.9.4\u3067\u306fRails\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c4.1\u7cfb\u3067\u3057\u305f\u304c\u3001GitLab8.14.3\u3067\u306fRails\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c4.2\u7cfb\u3068\u306a\u308a\u307e\u3059\u3002\nRails\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c4.2\u7cfb\u306b\u306a\u308b\u3068secrets.yml\u304c\u5fc5\u9808\u3068\u306a\u308a\u3001\u65b0\u305f\u306b\u8a2d\u7f6e\u3057\u3066\u3042\u3052\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n$ cd /home/git/gitlab\n$ sudo -u git -H cp config/secrets.yml.example config/secrets.yml\n$ sudo -u git -H chmod 0600 config/secrets.yml\n\n\n8. Gem\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u5229\u7528\u3059\u308bGem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306e\u74b0\u5883\u3067\u306fMySQL\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u3001PostgreSQL\u3092\u9664\u5916\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ cd /home/git/gitlab\n$ sudo -u git -H bundle install --without postgres development test --deployment\n$ sudo -u git -H bundle clean\n\n\n9. \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\nGitLab8.14\u3092\u52d5\u304b\u3059\u305f\u3081\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u5909\u66f4\u3092\u304b\u3051\u3066\u3044\u304d\u307e\u3059\u3002\n$ sudo -u git -H bundle exec rake db:migrate RAILS_ENV=production\n\n\n10. \u30d5\u30a1\u30a4\u30eb\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\nGitLab\u3067\u4f7f\u3046js\u3084css\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u307e\u3059\u3002\nsudo -u git -H bundle exec rake assets:clean assets:precompile cache:clear RAILS_ENV=production\n\n\n\u300011. gitlab.yml\u306e\u5909\u66f4\n\u7d30\u304b\u304f\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4e0a\u3052\u3066\u3044\u304f\u5834\u5408\u306f\u3001\u5dee\u5206\u3092\u78ba\u8a8d\u3057\u3066\u9069\u5b9c\u4fee\u6b63\u3057\u3066\u3044\u304f\u306e\u3067\u3059\u304c\u3001\u3055\u3059\u304c\u306b\u30d0\u30fc\u30b8\u30e7\u30f37.9.4\u304b\u30898.14.3\u3060\u3068\u5927\u304d\u304f\u5185\u5bb9\u304c\u5909\u308f\u3063\u3066\u3044\u307e\u3059\u3002\n\u306a\u306e\u3067\u3001\u30d0\u30fc\u30b8\u30e7\u30f38.14.3\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u53c2\u8003\u306b\u74b0\u5883\u306b\u5408\u308f\u305b\u305f\u60c5\u5831\u306b\u7f6e\u304d\u63db\u3048\u3066\u3001\u5dee\u3057\u66ff\u3048\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\n12. \u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5909\u66f4\n\u305d\u306e\u307e\u307e\u3067\u3082\u52d5\u304f\u306e\u306f\u52d5\u304f\u306e\u3067\u3059\u304c\u3001\u30c1\u30a7\u30c3\u30af\u30c4\u30fc\u30eb\u3092\u4f7f\u3063\u305f\u6642\u306b\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3057\u307e\u3059\u306e\u3067\u3001\u6700\u65b0\u306e\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n$ sudo cp lib/support/init.d/gitlab /etc/init.d/gitlab\n\n\n13. nginx\u306e\u8a2d\u5b9a\u5909\u66f4\n\u65b0\u3057\u304fgitlab-workhorse\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u305f\u3081\u3001nginx\u306e\u8a2d\u5b9a\u3082\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4e3b\u306a\u5909\u66f4\u70b9\u306f\u3001\n-upstream gitlab {\n-  server unix:/home/git/gitlab/tmp/sockets/gitlab.socket fail_timeout=0;\n+upstream gitlab-workhorse {\n+  server unix:/home/git/gitlab/tmp/sockets/gitlab-workhorse.socket fail_timeout=0;\n\n-    proxy_redirect          off;\n+    proxy_http_version 1.1;\n\n+    client_max_body_size 0;\n+    gzip off;\n\n     proxy_set_header    X-Forwarded-Proto   $scheme;\n-    proxy_set_header    X-Frame-Options     SAMEORIGIN;\n\n-    proxy_pass http://gitlab;\n+    proxy_pass http://gitlab-workhorse;\n\n\u5143\u304b\u3089\u516c\u5f0f\u306e\u30b3\u30f3\u30d5\u30a3\u30b0\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u305d\u306e\u307e\u307e\u5dee\u3057\u66ff\u3048\u3061\u3083\u3063\u3066\u3082\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n14. nginx\u306e\u518d\u8d77\u52d5\u3068GitLab\u306e\u8d77\u52d5\n\u3059\u3079\u3066\u306e\u5909\u66f4\u304c\u7d42\u308f\u3063\u305f\u306e\u3067\u3001nginx\u306e\u518d\u8d77\u52d5\u3068\u3001\u505c\u6b62\u3057\u3066\u3044\u308bGitLab\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n$ sudo service nginx restart\n$ sudo service gitlab start\n\n\n15. \u6700\u7d42\u30c1\u30a7\u30c3\u30af\n\u6700\u5f8c\u306b\u30c1\u30a7\u30c3\u30af\u30c4\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u78ba\u8a8d\u3092\u884c\u3044\u307e\u3059\u3002\n$ sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production\n$ sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production\n\n\u5b9f\u884c\u3057\u305f\u7d50\u679c\u3001NG\u304c\u306a\u3051\u308c\u3070\u7121\u4e8b\u30d0\u30fc\u30b8\u30f3\u30a2\u30c3\u30d7\u5b8c\u4e86\u3067\u3059\u3002\n\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u5f8c\u306e\u74b0\u5883\n\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u5f8c\u306e\u74b0\u5883\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\n\n\n\u9805\u76ee\n\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\n\n\nOS\nCentOS6\n\n\nRuby\n2.3.1\n\n\ngit\n2.8.4\n\n\ngo\n1.5.3\n\n\nnginx\n1.4.7\n\n\nredis\n2.8.19\n\n\nMySQL\n5.6.21\n\n\n\n\n\u307e\u3068\u3081\n\u516c\u5f0f\u624b\u9806\u3092\u53c2\u8003\u306b\u3057\u306a\u304c\u3089\u9032\u3081\u308b\u3068\u3001\u3042\u307e\u308a\u30cf\u30de\u308b\u3053\u3068\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\u3067\u3059\u304c\u3001\u74b0\u5883\u306b\u3082\u3088\u308a\u307e\u3059\u304c\u6642\u671f\u306b\u3088\u3063\u3066\u306f\u4e0a\u624b\u304f\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3067\u304d\u306a\u3044\u5834\u5408\u3082\u3042\u308a\u307e\u3059\u3002\n\u3053\u307e\u3081\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3059\u308b\u306e\u304c\u3044\u3044\u3093\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u904e\u53bb\u306bBug\u3092\u8e0f\u3093\u3067Marge\u3067\u304d\u306a\u304b\u3063\u305f\u308a\u3001\u7a7a\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u3042\u308b\u3068\u30ea\u30b9\u30c8\u30a2\u3067\u304d\u306a\u304b\u3063\u305f\u308a\u3068\u4e0d\u5177\u5408\u3082\u3042\u3063\u305f\u308a\u3059\u308b\u306e\u3067\u3001\u691c\u8a3c\u306f\u5341\u5206\u306b\u3057\u305f\u307b\u3046\u304c\u826f\u3044\u3067\u3059\u306d\u3002\n\u307e\u3060\u3001\u691c\u8a3c\u306e\u6bb5\u968e\u306a\u306e\u3067\u5b9f\u969b\u306e\u74b0\u5883\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u306e\u306f\u3082\u3046\u5c11\u3057\u304b\u304b\u308a\u305d\u3046\u3067\u3059\u3002\n\u3053\u3093\u306b\u3061\u306f ayaran \u3067\u3059\u3002\n\n\u793e\u5185\u958b\u767a\u3067\u306f\u3044\u308d\u3093\u306a\u90fd\u5408\u304c\u3042\u3063\u3066[GitHub](https://github.com)\u3068\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u74b0\u5883\u306e[GitLab](https://gitlab.com/)\u306e\u4e21\u65b9\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\u3082\u3061\u308d\u3093\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u74b0\u5883\u306eGitLab\u306a\u306e\u3067\u904b\u7528\u3082\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u3059\u3002\n\u4eca\u56de\u306fGitLab\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u306b\u3064\u3044\u3066\u5c11\u3057\u66f8\u3044\u3066\u307f\u3088\u3046\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n# GitLab\u306b\u3064\u3044\u3066\n\u305d\u3082\u305d\u3082GitLab\u3063\u3066\u306a\u3093\u3060:interrobang:\u3063\u3066\u4eba\u3082\u3044\u305d\u3046\u306a\u306e\u3067\u7c21\u5358\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\n\nGitLab\u306f[Git](https://git-scm.com/)\u3067\u7ba1\u7406\u3055\u308c\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092WEB\u3067Git\u30ea\u30dd\u30b8\u30c8\u30ea\u7ba1\u7406\u3001\u8ab2\u984c\u8ffd\u8de1\u3001\u30b3\u30fc\u30c9\u30ec\u30d3\u30e5\u30fc\u306a\u3069\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u308b[Ruby on Rails](http://rubyonrails.org/)\u3067\u4f5c\u3089\u308c\u305f\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3059\u3002\n\u793e\u5185\u3067\u306f\u3001\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30b5\u30fc\u30d0\u4e0a\u306b\u69cb\u7bc9\u3057\u305fGitLab Community Edition\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u6709\u511f\u7248\u306eGitLab Enterprise Edition\u3001\u307e\u305fGitHub\u3068\u540c\u69d8\u306bGitLab\u304c\u904b\u7528\u3057\u3066\u3044\u308b[gitlab.com](https://gitlab.com/)\u304c\u3042\u308a\u307e\u3059\u3002\n\n# \u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3059\u308b\u74b0\u5883\n\u4eca\u56de\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3059\u308b\u793e\u5185\u306eGitLab\u306e\u74b0\u5883\u306b\u3064\u3044\u3066\u7c21\u5358\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\nGitLab\u306e\u904b\u7528\u306f\u30d0\u30fc\u30b8\u30e7\u30f3`6.0`\u306e\u9803\u304b\u3089\u904b\u7528\u3057\u3066\u304d\u3066\u304a\u308a\u3001\u6570\u56de\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3092\u7d4c\u3066\u73fe\u5728\u30d0\u30fc\u30b8\u30e7\u30f3`7.9.4`\u3092\u904b\u7528\u3057\u3066\u3044\u307e\u3059\u3002\nGitLab\u306f\u3060\u3044\u305f\u3044\u67081\u56de\u30da\u30fc\u30b9\u3067\u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30ea\u30ea\u30fc\u30b9\u3057\u3066\u304a\u308a\u3001\u73fe\u5728\u306f\u30d0\u30fc\u30b8\u30e7\u30f3`8.14.3`\u304c\u6700\u65b0\u306eStable\u7248\u3067\u30d0\u30fc\u30b8\u30e7\u30f38.15\u304c\u03b2\u7248\u3067\u3059\u3002\n\n## \u8a73\u7d30\u306a\u60c5\u5831\n\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u524d\u306e\u74b0\u5883\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\n|\u9805\u76ee|\u30d0\u30fc\u30b8\u30e7\u30f3|\n|:-:|:-:|\n|OS|CentOS6|\n|Ruby|2.1.5|\n|Git|1.8.3|\n|nginx|1.4.7|\n|Redis|2.8.19|\n|MySQL|5.6.21|\n\n# \u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u306b\u5fc5\u8981\u306a\u3053\u3068\nGitLab\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3092\u3059\u308b\u306b\u306fGitLab\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u5408\u308f\u305b\u3066\u30b5\u30fc\u30d0\u74b0\u5883\u3082\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4eca\u56de\u30d0\u30fc\u30b8\u30e7\u30f3`8.14.3`\u306b\u3042\u3052\u308b\u308f\u3051\u3067\u3059\u304c\u3001\u3044\u304f\u3064\u304b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u305f\u308a\u65b0\u305f\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u308a\u3057\u307e\u3059\u3002\n\n## Ruby :up:\n\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u524d\u306e\u74b0\u5883\u3060\u3068Ruby2.1\u7cfb\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u5f8c\u306b[Sidekiq](http://sidekiq.org/)\u3068\u3044\u3046\u975e\u540c\u671f\u51e6\u7406\u3092\u884c\u3046gem\u304c\u8d77\u52d5\u3057\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u305f\u3081\u3001Ruby2.2\u7cfb\u4ee5\u964d\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3001\u516c\u5f0f\u624b\u9806\u306b\u3042\u308b\u30d0\u30fc\u30b8\u30e7\u30f3`\uff12\uff0e\uff13\uff0e\uff11`\u307e\u3067\u4e0a\u3052\u307e\u3059\u3002\n\n## Git :up:\nGitLab\u306e\u73fe\u5728\u306e\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3`8.14.3`\u306b\u3059\u308b\u3068Git\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c`2.7.3`\u4ee5\u4e0a\u304c\u5fc5\u8981\u306a\u305f\u3081\u3001Git\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3082`1.8.3`\u304b\u3089`2.8.4`\u307e\u3067\u4e0a\u3052\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u3042\u3052\u306a\u304b\u3063\u305f\u5834\u5408\u3001WEB\u4e0a\u3067\u306eGit\u306e\u64cd\u4f5c\u304c\u3067\u304d\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n## Go :new:\nGitLab8.0\u304b\u3089[gitlab-git-http-server](https://gitlab.com/gitlab-org/gitlab-git-http-server)\u3001GitLab8.2\u304b\u3089gitlab-git-http-server\u306b\u304b\u308f\u3063\u3066[gitlab-workhorse](https://gitlab.com/gitlab-org/gitlab-workhorse)\u3092\u4f7f\u3046\u3088\u3046\u306b\u306a\u308a\u3001\u3053\u308c\u3089\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u969b\u306b[Go](https://golang.org/)\u304c\u5fc5\u8981\u306a\u305f\u3081\u3001Go\u3092\u65b0\u3057\u304f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4eca\u56de\u306f\u516c\u5f0f\u624b\u9806\u306b\u3042\u308b\u30d0\u30fc\u30b8\u30e7\u30f3`1.5.3`\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u305f\u3002\n\n# \u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u65b9\u6cd5\nGitLab\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u306f\u3001[GitLab\u306eGit\u30ea\u30dd\u30b8\u30c8\u30ea](https://github.com/gitlabhq)\u5185\u306b\u5404\u30d0\u30fc\u30b8\u30e7\u30f3\u3054\u3068\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u305d\u308c\u3092\u53c2\u7167\u3057\u306a\u304c\u3089\u9032\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n## 1. GitLab\u306e\u505c\u6b62\n\u52d5\u4f5c\u3057\u3066\u3044\u308bGitLab\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\n\n```\n$ sudo service gitlab stop\n```\n\n## 2. \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n\u307e\u3093\u304c\u3044\u3061\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u306b\u5931\u6557\u3057\u305f\u969b\u306b\u5207\u308a\u623b\u3057\u3092\u884c\u3046\u305f\u3081\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u5f97\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n$ cd /home/git/gitlab\n$ sudo -u git -H bundle exec rake gitlab:backup:create RAILS_ENV=production\n```\n\n## 3. Ruby\u3001Git\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\nRuby\u306e\u5c0e\u5165\u306e\u4ed5\u65b9\u306b\u3088\u3063\u3066\u65b9\u6cd5\u304c\u5909\u308f\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u4eca\u56de\u306e\u74b0\u5883\u3067\u306fRPM\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3057\u305fRuby\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u4e00\u65e6\u524a\u9664\u3057\u305f\u306e\u3061\u3001yum install\u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3092\u884c\u3044\u307e\u3059\u3002\n\u540c\u69d8\u306b\u3001Git\u3082RPM\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3057\u305f\u3082\u306e\u4f7f\u7528\u3057\u3066\u308b\u305f\u3081yum update\u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3092\u884c\u3044\u307e\u3059\u3002\n\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3057\u305fRPM\u306f\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u7f6e\u3044\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n$ sudo yum remove ruby\n$ sudo yum install ruby\n$ sudo yum update git\n```\n\n\u307e\u305f\u3001Ruby\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u3042\u3052\u305f\u306e\u3067gem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u969b\u306b\u5229\u7528\u3059\u308b[bundler](http://bundler.io/)\u3082\u518d\u5ea6\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n$ sudo gem install bundler --no-ri --no-rdoc\n``` \n\n## 4. Go\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nGo\u3082Ruby\u3068Git\u3068\u540c\u69d8\u306bRPM\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3057\u305f\u3082\u306e\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n$ sudo yum install golang\n```\n\n## 5. gitlab-workhorse\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u524d\u8ff0\u3057\u307e\u3057\u305f\u304c\u3001GitLab8.2\u4ee5\u964d\u3067\u306fgitlab-workhorse\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```\n$ cd /home/git\n$ sudo -u git -H git clone https://gitlab.com/gitlab-org/gitlab-workhorse.git\n$ cd gitlab-workhorse\n$ sudo -u git -H git checkout v1.0.1\n$ sudo -u git -H make\n```\n\n## 6. \u5404\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u66f4\u65b0\nGitLab\u3068[GitLab Shell](https://github.com/gitlabhq/gitlab-shell)\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u66f4\u65b0\u3092\u884c\u3044\u307e\u3059\u3002\n\n```\n$ sudo cd /home/git/gitlab\n$ sudo -u git -H git fetch --all\n$ sudo -u git -H git checkout -- db/schema.rb\n$ sudo -u git -H git checkout 8-14-stable\n$ cd /home/git/gitlab-shell\n$ sudo -u git -H git fetch --all --tags\n$ sudo -u git -H git checkout v4.0.0\n```\n\n## 7. secrets.yml\u306e\u8a2d\u7f6e\n\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u524d\u306eGitLab`7.9.4`\u3067\u306fRails\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c4.1\u7cfb\u3067\u3057\u305f\u304c\u3001GitLab`8.14.3`\u3067\u306fRails\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c4.2\u7cfb\u3068\u306a\u308a\u307e\u3059\u3002\nRails\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c4.2\u7cfb\u306b\u306a\u308b\u3068secrets.yml\u304c\u5fc5\u9808\u3068\u306a\u308a\u3001\u65b0\u305f\u306b\u8a2d\u7f6e\u3057\u3066\u3042\u3052\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```\n$ cd /home/git/gitlab\n$ sudo -u git -H cp config/secrets.yml.example config/secrets.yml\n$ sudo -u git -H chmod 0600 config/secrets.yml\n```\n\n## 8. Gem\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u5229\u7528\u3059\u308bGem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306e\u74b0\u5883\u3067\u306fMySQL\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u3001PostgreSQL\u3092\u9664\u5916\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n$ cd /home/git/gitlab\n$ sudo -u git -H bundle install --without postgres development test --deployment\n$ sudo -u git -H bundle clean\n```\n\n## 9. \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\nGitLab8.14\u3092\u52d5\u304b\u3059\u305f\u3081\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u5909\u66f4\u3092\u304b\u3051\u3066\u3044\u304d\u307e\u3059\u3002\n\n```\n$ sudo -u git -H bundle exec rake db:migrate RAILS_ENV=production\n```\n\n## 10. \u30d5\u30a1\u30a4\u30eb\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\nGitLab\u3067\u4f7f\u3046js\u3084css\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u307e\u3059\u3002\n\n```\nsudo -u git -H bundle exec rake assets:clean assets:precompile cache:clear RAILS_ENV=production\n```\n\n##\u300011. gitlab.yml\u306e\u5909\u66f4\n\u7d30\u304b\u304f\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4e0a\u3052\u3066\u3044\u304f\u5834\u5408\u306f\u3001\u5dee\u5206\u3092\u78ba\u8a8d\u3057\u3066\u9069\u5b9c\u4fee\u6b63\u3057\u3066\u3044\u304f\u306e\u3067\u3059\u304c\u3001\u3055\u3059\u304c\u306b\u30d0\u30fc\u30b8\u30e7\u30f3`7.9.4`\u304b\u3089`8.14.3`\u3060\u3068\u5927\u304d\u304f\u5185\u5bb9\u304c\u5909\u308f\u3063\u3066\u3044\u307e\u3059\u3002\n\u306a\u306e\u3067\u3001\u30d0\u30fc\u30b8\u30e7\u30f3`8.14.3`\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u53c2\u8003\u306b\u74b0\u5883\u306b\u5408\u308f\u305b\u305f\u60c5\u5831\u306b\u7f6e\u304d\u63db\u3048\u3066\u3001\u5dee\u3057\u66ff\u3048\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\n## 12. \u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5909\u66f4\n\u305d\u306e\u307e\u307e\u3067\u3082\u52d5\u304f\u306e\u306f\u52d5\u304f\u306e\u3067\u3059\u304c\u3001\u30c1\u30a7\u30c3\u30af\u30c4\u30fc\u30eb\u3092\u4f7f\u3063\u305f\u6642\u306b\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3057\u307e\u3059\u306e\u3067\u3001\u6700\u65b0\u306e\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```\n$ sudo cp lib/support/init.d/gitlab /etc/init.d/gitlab\n```\n\n## 13. nginx\u306e\u8a2d\u5b9a\u5909\u66f4\n\u65b0\u3057\u304fgitlab-workhorse\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u305f\u3081\u3001nginx\u306e\u8a2d\u5b9a\u3082\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u4e3b\u306a\u5909\u66f4\u70b9\u306f\u3001\n\n```\n-upstream gitlab {\n-  server unix:/home/git/gitlab/tmp/sockets/gitlab.socket fail_timeout=0;\n+upstream gitlab-workhorse {\n+  server unix:/home/git/gitlab/tmp/sockets/gitlab-workhorse.socket fail_timeout=0;\n```\n```\n-    proxy_redirect          off;\n+    proxy_http_version 1.1;\n```\n```\n+    client_max_body_size 0;\n+    gzip off;\n```\n```\n     proxy_set_header    X-Forwarded-Proto   $scheme;\n-    proxy_set_header    X-Frame-Options     SAMEORIGIN;\n\n-    proxy_pass http://gitlab;\n+    proxy_pass http://gitlab-workhorse;\n```\n\n\u5143\u304b\u3089\u516c\u5f0f\u306e\u30b3\u30f3\u30d5\u30a3\u30b0\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u305d\u306e\u307e\u307e\u5dee\u3057\u66ff\u3048\u3061\u3083\u3063\u3066\u3082\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\n## 14. nginx\u306e\u518d\u8d77\u52d5\u3068GitLab\u306e\u8d77\u52d5\n\u3059\u3079\u3066\u306e\u5909\u66f4\u304c\u7d42\u308f\u3063\u305f\u306e\u3067\u3001nginx\u306e\u518d\u8d77\u52d5\u3068\u3001\u505c\u6b62\u3057\u3066\u3044\u308bGitLab\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\n$ sudo service nginx restart\n$ sudo service gitlab start\n```\n\n## 15. \u6700\u7d42\u30c1\u30a7\u30c3\u30af\n\u6700\u5f8c\u306b\u30c1\u30a7\u30c3\u30af\u30c4\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u78ba\u8a8d\u3092\u884c\u3044\u307e\u3059\u3002\n\n```\n$ sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production\n$ sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production\n```\n\n\u5b9f\u884c\u3057\u305f\u7d50\u679c\u3001NG\u304c\u306a\u3051\u308c\u3070\u7121\u4e8b\u30d0\u30fc\u30b8\u30f3\u30a2\u30c3\u30d7\u5b8c\u4e86\u3067\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-08 19.18.09.png](https://qiita-image-store.s3.amazonaws.com/0/122536/a574ed00-eb55-e5f7-8cb0-6323365de358.png)\n\n## \u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u5f8c\u306e\u74b0\u5883\n\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u5f8c\u306e\u74b0\u5883\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\n|\u9805\u76ee|\u30d0\u30fc\u30b8\u30e7\u30f3|\n|:-:|:-:|\n|OS|CentOS6|\n|Ruby|2.3.1|\n|git|2.8.4|\n|go|1.5.3|\n|nginx|1.4.7|\n|redis|2.8.19|\n|MySQL|5.6.21|\n\n# \u307e\u3068\u3081\n\u516c\u5f0f\u624b\u9806\u3092\u53c2\u8003\u306b\u3057\u306a\u304c\u3089\u9032\u3081\u308b\u3068\u3001\u3042\u307e\u308a\u30cf\u30de\u308b\u3053\u3068\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\u3067\u3059\u304c\u3001\u74b0\u5883\u306b\u3082\u3088\u308a\u307e\u3059\u304c\u6642\u671f\u306b\u3088\u3063\u3066\u306f\u4e0a\u624b\u304f\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3067\u304d\u306a\u3044\u5834\u5408\u3082\u3042\u308a\u307e\u3059\u3002\n\u3053\u307e\u3081\u306b\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3059\u308b\u306e\u304c\u3044\u3044\u3093\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u904e\u53bb\u306bBug\u3092\u8e0f\u3093\u3067Marge\u3067\u304d\u306a\u304b\u3063\u305f\u308a\u3001\u7a7a\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u3042\u308b\u3068\u30ea\u30b9\u30c8\u30a2\u3067\u304d\u306a\u304b\u3063\u305f\u308a\u3068\u4e0d\u5177\u5408\u3082\u3042\u3063\u305f\u308a\u3059\u308b\u306e\u3067\u3001\u691c\u8a3c\u306f\u5341\u5206\u306b\u3057\u305f\u307b\u3046\u304c\u826f\u3044\u3067\u3059\u306d\u3002\n\n\u307e\u3060\u3001\u691c\u8a3c\u306e\u6bb5\u968e\u306a\u306e\u3067\u5b9f\u969b\u306e\u74b0\u5883\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u306e\u306f\u3082\u3046\u5c11\u3057\u304b\u304b\u308a\u305d\u3046\u3067\u3059\u3002\n", "tags": ["GitLab"]}