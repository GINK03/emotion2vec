{"tags": ["pixiv"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002Wikipedia\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u308b\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7\u3092\u4f7f\u3063\u3066\u8868\u984c\u306e\u3053\u3068\u3092\u3084\u3063\u3066\u307f\u308b\u3002\n\nWikipedia\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\n\u4f7f\u3046\u306e\u306f\u4ee5\u4e0b\u306e2\u3064\u3002\n\npage.sql : \u30da\u30fc\u30b8\u60c5\u5831\uff08page_id\u3084\u30bf\u30a4\u30c8\u30eb\u7b49\uff09\nlanglinks.sql : \u5404\u30da\u30fc\u30b8\u306e\u300c\u4ed6\u306e\u8a00\u8a9e\u300d\u60c5\u5831\n\nMySQL\u306eSQL\u3068\u3057\u3066\u914d\u5e03\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u30ed\u30fc\u30ab\u30eb\u306eMySQL\u306b\u8aad\u307f\u8fbc\u3080\u3002\n$ curl -O http://dumps.wikimedia.org/jawiki/latest/jawiki-latest-langlinks.sql.gz\n$ gunzip jawiki-latest-langlinks.sql.gz\n$ mysql -uroot -Dwikipedia < ./jawiki-latest-langlinks.sql\n\n$ curl -O http://dumps.wikimedia.org/jawiki/latest/$ jawiki-latest-page.sql.gz\n$ gunzip jawiki-latest-page.sql.gz\n$ mysql -uroot -Dwikipedia < ./jawiki-latest-page.sql\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u306b\u306f\u305d\u308c\u306a\u308a\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u3002\n\u3053\u3046\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u306b\u306a\u308b\u3002\nmysql> select * from langlinks limit 5;\n+---------+---------+--------------------+\n| ll_from | ll_lang | ll_title           |\n+---------+---------+--------------------+\n| 2433742 | aa      | Category:User aa   |\n|  254887 | aa      | Category:User de   |\n|  254893 | aa      | Category:User de-1 |\n|  351074 | aa      | Main Page          |\n| 2166573 | aa      | Template:Delete    |\n+---------+---------+--------------------+\n5 rows in set (0.01 sec)\n\nmysql> select * from page limit 5;\n+---------+----------------+----------------------------------------+-------------------+--------------+------------------+-------------+---------------------+----------------+--------------------+-------------+----------+\n| page_id | page_namespace | page_title                             | page_restrictions | page_counter | page_is_redirect | page_is_new | page_random         | page_touched   | page_links_updated | page_latest | page_len |\n+---------+----------------+----------------------------------------+-------------------+--------------+------------------+-------------+---------------------+----------------+--------------------+-------------+----------+\n|       1 |              4 | \u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u30ed\u30b0_2004\u5e744\u6708             | sysop             |          498 |                0 |           0 | 0.00326005555992951 | 20140408110536 | NULL               |     2168855 |   106607 |\n|       2 |              4 | \u524a\u9664\u8a18\u9332/\u904e\u53bb\u30ed\u30b0_2002\u5e7412\u6708           | sysop             |           48 |                0 |           0 |  0.0138938864822443 | 20050702201737 | NULL               |     2168856 |      208 |\n|       5 |              0 | \u30a2\u30f3\u30d1\u30b5\u30f3\u30c9                           |                   |           10 |                0 |           0 |   0.870079839481115 | 20140410100515 | 20140403073058     |    49408724 |     4201 |\n|       6 |              4 | Sandbox                                |                   |           46 |                1 |           0 |  0.7534875168963221 | 20140416150013 | 20140208143521     |    50624493 |      122 |\n|       7 |              2 | Brion_VIBBER                           |                   |          360 |                0 |           0 |   0.453168387015507 | 20121029175050 | NULL               |    24874659 |     8489 |\n+---------+----------------+----------------------------------------+-------------------+--------------+------------------+-------------+---------------------+----------------+--------------------+-------------+----------+\n5 rows in set (0.00 sec)\n\n\npixiv\u306e\u30bf\u30b0\u4e0a\u4f4d5000\u4ef6\u3092\u7528\u610f\n\u2193\u3053\u3053\u306b\u3042\u308b\u306e\u3067\u3001(1\u30da\u30fc\u30b8500\u30bf\u30b0) * (10\u30da\u30fc\u30b8) \u30675000\u30bf\u30b0\u307e\u3067\u306f\u624b\u306b\u5165\u308b\u3002\n\nhttp://www.pixiv.net/tags.php\n\n\u3053\u308c\u3092\u5143\u306b\u4ee5\u4e0b\u306e\u69d8\u306aSQL\u3092\u7d44\u307f\u7acb\u3066\u308b\u3002\nINSERT INTO pixiv_tags (name,num) VALUES\n(\"\u30aa\u30ea\u30b8\u30ca\u30eb\",2247619),\n(\"\u6771\u65b9\",1584753),\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u3053\u3093\u306a\u98a8\u306b\u4f5c\u3063\u3066\u3001\nCREATE TABLE `pixiv_tags` (\n  `name` varchar(60) NOT NULL DEFAULT '',\n  `num` int(10) unsigned DEFAULT NULL,\n  PRIMARY KEY (`name`)\n) ENGINE=InnoDB\n\n\u30a4\u30f3\u30dd\u30fc\u30c8\u3002\n$ mysql -uroot -Dwikipedia < tags.sql\n\n\nSELECT\n\u3053\u3093\u306aSQL\u3067\u7d50\u679c\u3092\u4f5c\u6210\u3002\nSELECT\n  name,\n  num,\n  COALESCE(en.ll_title, '') AS en,\n  COALESCE(ko.ll_title, '') AS ko,\n  COALESCE(zh.ll_title, '') AS zh,\n  COALESCE(ru.ll_title, '') AS ru,\n  COALESCE(fr.ll_title, '') AS fr,\n  COALESCE(es.ll_title, '') AS es,\n  COALESCE(th.ll_title, '') AS th\nFROM\n  pixiv_tags\n  LEFT JOIN page ON (name = page_title AND page_namespace = 0)\n  LEFT JOIN langlinks AS en ON (page_id = en.ll_from AND en.ll_lang = 'en')\n  LEFT JOIN langlinks AS ko ON (page_id = ko.ll_from AND ko.ll_lang = 'ko')\n  LEFT JOIN langlinks AS zh ON (page_id = zh.ll_from AND zh.ll_lang = 'zh')\n  LEFT JOIN langlinks AS ru ON (page_id = ru.ll_from AND ru.ll_lang = 'ru')\n  LEFT JOIN langlinks AS fr ON (page_id = fr.ll_from AND fr.ll_lang = 'fr')\n  LEFT JOIN langlinks AS es ON (page_id = es.ll_from AND es.ll_lang = 'es')\n  LEFT JOIN langlinks AS th ON (page_id = th.ll_from AND th.ll_lang = 'th')\nORDER BY num DESC\n\n\u51fa\u6765\u4e0a\u304c\u3063\u305f\u3082\u306e\u304c\u3053\u3061\u3089\u3002\n\n\n[Wikipedia\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u308b\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7](http://www.mwsoft.jp/programming/munou/wikipedia_data_list.html)\u3092\u4f7f\u3063\u3066\u8868\u984c\u306e\u3053\u3068\u3092\u3084\u3063\u3066\u307f\u308b\u3002\n\n## Wikipedia\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\n\n\u4f7f\u3046\u306e\u306f\u4ee5\u4e0b\u306e2\u3064\u3002\n\n* page.sql : \u30da\u30fc\u30b8\u60c5\u5831\uff08page_id\u3084\u30bf\u30a4\u30c8\u30eb\u7b49\uff09\n* langlinks.sql : \u5404\u30da\u30fc\u30b8\u306e\u300c\u4ed6\u306e\u8a00\u8a9e\u300d\u60c5\u5831\n\nMySQL\u306eSQL\u3068\u3057\u3066\u914d\u5e03\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u30ed\u30fc\u30ab\u30eb\u306eMySQL\u306b\u8aad\u307f\u8fbc\u3080\u3002\n\n```bash\n$ curl -O http://dumps.wikimedia.org/jawiki/latest/jawiki-latest-langlinks.sql.gz\n$ gunzip jawiki-latest-langlinks.sql.gz\n$ mysql -uroot -Dwikipedia < ./jawiki-latest-langlinks.sql\n\n$ curl -O http://dumps.wikimedia.org/jawiki/latest/$ jawiki-latest-page.sql.gz\n$ gunzip jawiki-latest-page.sql.gz\n$ mysql -uroot -Dwikipedia < ./jawiki-latest-page.sql\n```\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u306b\u306f\u305d\u308c\u306a\u308a\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u3002\n\n\u3053\u3046\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u306b\u306a\u308b\u3002\n\n```\nmysql> select * from langlinks limit 5;\n+---------+---------+--------------------+\n| ll_from | ll_lang | ll_title           |\n+---------+---------+--------------------+\n| 2433742 | aa      | Category:User aa   |\n|  254887 | aa      | Category:User de   |\n|  254893 | aa      | Category:User de-1 |\n|  351074 | aa      | Main Page          |\n| 2166573 | aa      | Template:Delete    |\n+---------+---------+--------------------+\n5 rows in set (0.01 sec)\n\nmysql> select * from page limit 5;\n+---------+----------------+----------------------------------------+-------------------+--------------+------------------+-------------+---------------------+----------------+--------------------+-------------+----------+\n| page_id | page_namespace | page_title                             | page_restrictions | page_counter | page_is_redirect | page_is_new | page_random         | page_touched   | page_links_updated | page_latest | page_len |\n+---------+----------------+----------------------------------------+-------------------+--------------+------------------+-------------+---------------------+----------------+--------------------+-------------+----------+\n|       1 |              4 | \u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u30ed\u30b0_2004\u5e744\u6708             | sysop             |          498 |                0 |           0 | 0.00326005555992951 | 20140408110536 | NULL               |     2168855 |   106607 |\n|       2 |              4 | \u524a\u9664\u8a18\u9332/\u904e\u53bb\u30ed\u30b0_2002\u5e7412\u6708           | sysop             |           48 |                0 |           0 |  0.0138938864822443 | 20050702201737 | NULL               |     2168856 |      208 |\n|       5 |              0 | \u30a2\u30f3\u30d1\u30b5\u30f3\u30c9                           |                   |           10 |                0 |           0 |   0.870079839481115 | 20140410100515 | 20140403073058     |    49408724 |     4201 |\n|       6 |              4 | Sandbox                                |                   |           46 |                1 |           0 |  0.7534875168963221 | 20140416150013 | 20140208143521     |    50624493 |      122 |\n|       7 |              2 | Brion_VIBBER                           |                   |          360 |                0 |           0 |   0.453168387015507 | 20121029175050 | NULL               |    24874659 |     8489 |\n+---------+----------------+----------------------------------------+-------------------+--------------+------------------+-------------+---------------------+----------------+--------------------+-------------+----------+\n5 rows in set (0.00 sec)\n```\n\n## pixiv\u306e\u30bf\u30b0\u4e0a\u4f4d5000\u4ef6\u3092\u7528\u610f\n\n\u2193\u3053\u3053\u306b\u3042\u308b\u306e\u3067\u3001(1\u30da\u30fc\u30b8500\u30bf\u30b0) * (10\u30da\u30fc\u30b8) \u30675000\u30bf\u30b0\u307e\u3067\u306f\u624b\u306b\u5165\u308b\u3002\n\n * http://www.pixiv.net/tags.php\n\n\u3053\u308c\u3092\u5143\u306b\u4ee5\u4e0b\u306e\u69d8\u306aSQL\u3092\u7d44\u307f\u7acb\u3066\u308b\u3002\n\n```sql\nINSERT INTO pixiv_tags (name,num) VALUES\n(\"\u30aa\u30ea\u30b8\u30ca\u30eb\",2247619),\n(\"\u6771\u65b9\",1584753),\n```\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u3053\u3093\u306a\u98a8\u306b\u4f5c\u3063\u3066\u3001\n\n```sql\nCREATE TABLE `pixiv_tags` (\n  `name` varchar(60) NOT NULL DEFAULT '',\n  `num` int(10) unsigned DEFAULT NULL,\n  PRIMARY KEY (`name`)\n) ENGINE=InnoDB\n```\n\n\u30a4\u30f3\u30dd\u30fc\u30c8\u3002\n\n```bash\n$ mysql -uroot -Dwikipedia < tags.sql\n```\n\n## SELECT\n\n\u3053\u3093\u306aSQL\u3067\u7d50\u679c\u3092\u4f5c\u6210\u3002\n\n```sql\nSELECT\n  name,\n  num,\n  COALESCE(en.ll_title, '') AS en,\n  COALESCE(ko.ll_title, '') AS ko,\n  COALESCE(zh.ll_title, '') AS zh,\n  COALESCE(ru.ll_title, '') AS ru,\n  COALESCE(fr.ll_title, '') AS fr,\n  COALESCE(es.ll_title, '') AS es,\n  COALESCE(th.ll_title, '') AS th\nFROM\n  pixiv_tags\n  LEFT JOIN page ON (name = page_title AND page_namespace = 0)\n  LEFT JOIN langlinks AS en ON (page_id = en.ll_from AND en.ll_lang = 'en')\n  LEFT JOIN langlinks AS ko ON (page_id = ko.ll_from AND ko.ll_lang = 'ko')\n  LEFT JOIN langlinks AS zh ON (page_id = zh.ll_from AND zh.ll_lang = 'zh')\n  LEFT JOIN langlinks AS ru ON (page_id = ru.ll_from AND ru.ll_lang = 'ru')\n  LEFT JOIN langlinks AS fr ON (page_id = fr.ll_from AND fr.ll_lang = 'fr')\n  LEFT JOIN langlinks AS es ON (page_id = es.ll_from AND es.ll_lang = 'es')\n  LEFT JOIN langlinks AS th ON (page_id = th.ll_from AND th.ll_lang = 'th')\nORDER BY num DESC\n```\n\n\u51fa\u6765\u4e0a\u304c\u3063\u305f\u3082\u306e\u304c\u3053\u3061\u3089\u3002\n\n![kobito.1398838675.245980.png](https://qiita-image-store.s3.amazonaws.com/0/5978/569c95ca-56e5-c79e-a629-d2a9c57a4f13.png \"kobito.1398838675.245980.png\")\n"}