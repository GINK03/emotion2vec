{"tags": ["RabbitMQ3.5.3"], "context": " More than 1 year has passed since last update.\n\n\u6982\u8981\n1\u53f0\u306eWindows7\u4e0a\u306b2\u30ce\u30fc\u30c9\u304b\u3089\u6210\u308bRabbitMQ\u306e\u30af\u30e9\u30b9\u30bf\u30fc\u3092\u69cb\u7bc9\u3059\u308b\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\u307e\u305f\u3001\u7c21\u5358\u3067\u3059\u304cRabbitMQ\u306e\u7279\u5fb4\u3084rabbitmqctl\u30b3\u30de\u30f3\u30c9\u306b\u3088\u308bRabbitMQ\u30b5\u30fc\u30d0\u30fc\u306e\u64cd\u4f5c\u65b9\u6cd5\u306a\u3069\u3082\u8aac\u660e\u3057\u307e\u3059\u3002\n\u3053\u306e\u8a18\u4e8b\u306e\u5185\u5bb9\u306f\u4e0b\u8a18\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u3092\u884c\u3044\u307e\u3057\u305f\u3002\n\nWindows7 (64bit)\nRabbitMQ 3.5.3\nErlang/OTP 17.5\n\n\n1. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u521d\u671f\u8a2d\u5b9a\n\u672c\u683c\u7684\u306a\u8aac\u660e\u306fRabbitMQ\u306eInstalling on Windows (manual)\u30da\u30fc\u30b8\u306b\u3042\u308a\u307e\u3059\u3002\n\nErlnag\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nRabbitMQ\u306e\u5b9f\u884c\u306b\u306fErlang\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u4e8b\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059\u3002\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30da\u30fc\u30b8\u3088\u308a\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u30fc\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u4eca\u56de\u4f7f\u7528\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306fotp_win64_17.5.exe\u3067\u3059\u3002\n\n\u521d\u671f\u8a2d\u5b9a\n\u74b0\u5883\u5909\u6570\u306eERLANG_HOME\u306berlang\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u74b0\u5883\u5909\u6570\u306epath\u306b%ERLANG_HOME%\\bin\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306e\u78ba\u8a8d\n\u5ff5\u306e\u305f\u3081\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u304b\u3089erl.exe\u3092\u5b9f\u884c\u3057\u3066shell\u304c\u8d77\u52d5\u3059\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\nRabbitMQ\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n1\u53f0\u306ePC\u306bRabbitMQ\u30922\u30ce\u30fc\u30c9\u8d77\u52d5\u3057\u30af\u30e9\u30b9\u30bf\u30fc\u3092\u69cb\u6210\u3057\u307e\u3059\u3002\n\u69cb\u6210\u306f\u4e0b\u8868\u306e\u901a\u308a\u3067\u3059\u3002\n\n\n\nnode name\nport\nport(ssl)\nport(management)\n\n\n\n\nrabbit_node1@localhost\n5672\n5671\n15672\n\n\nrabbit_node2@localhost\n5674\n5673\n15674\n\n\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30da\u30fc\u30b8\u3088\u308a\u3001\u30a2\u30fc\u30ab\u30a4\u30d6\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\u4eca\u56de\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306frabbitmq-server-windows-3.5.3.zip\u3067\u3059\u3002\n\u30a2\u30fc\u30ab\u30a4\u30d6\u30d5\u30a1\u30a4\u30eb\u3092\u9069\u5f53\u306a\u5834\u6240\u3078\u89e3\u51cd\u3057\u307e\u3059\u3002\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u4e0b\u8a18\u306e\u5834\u6240\u3078\u6e96\u5099\u3057\u307e\u3057\u305f\u3002\nnode1\nC:\\rabbitmq-3.5.3\\rabbitmq_server-3.5.3_node1\nnode2\nC:\\rabbitmq-3.5.3\\rabbitmq_server-3.5.3_node2\n\n\u521d\u671f\u8a2d\u5b9a\nbase\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nnode1\u7528\nC:\\rabbitmq-3.5.3\\node1\nnode2\u7528\nC:\\rabbitmq-3.5.3\\node2\ndb\u3001log\u30d5\u30a1\u30a4\u30eb\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nnode1\u7528\nC:\\rabbitmq-3.5.3\\node1\\db\nC:\\rabbitmq-3.5.3\\node1\\log\nnode2\u7528\nC:\\rabbitmq-3.5.3\\node2\\db\nC:\\rabbitmq-3.5.3\\node2\\log\nconf\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3053\u308c\u3092\u5229\u7528\u3057\u307e\u3059\u3002\nC:\\rabbitmq-3.5.3\\rabbitmq_server-3.5.3_node1\\etc\\rabbitmq.config.example\u30d5\u30a1\u30a4\u30eb\u3092rabbitmq.config\u3078\u30ea\u30cd\u30fc\u30e0\u3057\u3066\u4e0b\u8a18\u306e\u5834\u6240\u3078\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\nnode1\u7528\nC:\\rabbitmq-3.5.3\\node1\\rabbitmq.config\nnode2\u7528\nC:\\rabbitmq-3.5.3\\node2\\rabbitmq.config\n\u6b21\u306brabbitmq.config\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\u4e0b\u8a18\u306e\u5185\u5bb9\u306f\u5909\u66f4\u70b9\u3060\u3051\u629c\u7c8b\u3057\u305f\u3082\u306e\u3067\u3059\u3002\uff08\u30dd\u30fc\u30c8\u3084\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u306e\u51fa\u529b\u5148\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\uff09\nnode1\u7528\n\nrabbitmq.config\n{rabbit,\n[\n  {tcp_listeners, [5672]},\n  {ssl_listeners, [5671]},\n]},\n\n{rabbitmq_management,\n[\n  {http_log_dir, \"C:\\rabbitmq-3.5.3\\node1\\log\\access.log\"},\n  {listener, [{port, 15672},\n              {ip, \"127.0.0.1\"}]\n  },\n  {rates_mode, basic}\n]},\n\n\nnode2\u7528\n\nrabbitmq.config\n{rabbit,\n[\n  {tcp_listeners, [5674]},\n  {ssl_listeners, [5673]},\n]},\n\n{rabbitmq_management,\n[\n  {http_log_dir, \"C:\\rabbitmq-3.5.3\\node2\\log\\access.log\"},\n  {listener, [{port, 15674},\n              {ip, \"127.0.0.1\"}]\n  },\n  {rates_mode, basic}\n]},\n\n\n\u6b21\u306bbat\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\nbat\u30d5\u30a1\u30a4\u30eb\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306esbin\u4e0b\u306b\u3042\u308a\u307e\u3059\u3002\nnode1\u7528\nrabbitmqctl.bat\n\nrabbitmqctl.bat\nsetlocal enabledelayedexpansion\n\n+ set RABBITMQ_BASE=C:/rabbitmq-3.5.3/node1\n+ set RABBITMQ_NODENAME=rabbit_node1@localhost\n\nif \"!RABBITMQ_BASE!\"==\"\" (\n\n\nrabbitmq-server.bat\n\nrabbitmq-server.bat\nsetlocal enabledelayedexpansion\n\n+ set RABBITMQ_BASE=C:/rabbitmq-3.5.3/node1\n+ set RABBITMQ_NODENAME=rabbit_node1@localhost\n+ set RABBITMQ_NODE_PORT=5672\n\nif \"!RABBITMQ_USE_LONGNAME!\"==\"\" (\n\n\nrabbitmq-plugins.bat\n\nrabbitmq-plugins.bat\nsetlocal enabledelayedexpansion\n\n+ set RABBITMQ_BASE=C:/rabbitmq-3.5.3/node1\n+ set RABBITMQ_NODENAME=rabbit_node1@localhost\n\nif \"!RABBITMQ_SERVICENAME!\"==\"\" (\n\n\nnode2\u7528\nrabbitmqctl.bat\n\nrabbitmqctl.bat\nsetlocal enabledelayedexpansion\n\n+ set RABBITMQ_BASE=C:/rabbitmq-3.5.3/node2\n+ set RABBITMQ_NODENAME=rabbit_node2@localhost\n\nif \"!RABBITMQ_BASE!\"==\"\" (\n\n\nrabbitmq-server.bat\n\nrabbitmq-server.bat\nsetlocal enabledelayedexpansion\n\n+ set RABBITMQ_BASE=C:/rabbitmq-3.5.3/node2\n+ set RABBITMQ_NODENAME=rabbit_node2@localhost\n+ set RABBITMQ_NODE_PORT=5674\n\nif \"!RABBITMQ_USE_LONGNAME!\"==\"\" (\n\n\nrabbitmq-plugins.bat\n\nrabbitmq-plugins.bat\nsetlocal enabledelayedexpansion\n\n+ set RABBITMQ_BASE=C:/rabbitmq-3.5.3/node2\n+ set RABBITMQ_NODENAME=rabbit_node2@localhost\n\nif \"!RABBITMQ_SERVICENAME!\"==\"\" (\n\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306e\u78ba\u8a8d\nnode1\u3001node2\u3067RabbitMQ\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n> rabbitmq-server.bat -detached\n\n\u8d77\u52d5\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n> rabbitmqctl.bat status\n\n\u307e\u305f\u3001RabbitMQ\u30b5\u30fc\u30d0\u30fc\u306e\u505c\u6b62\u306f\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3067\u884c\u3044\u307e\u3059\u3002\n> rabbitmqctl.bat stop\n\n\nrabbitmq_management\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u6709\u52b9\u5316\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u306fRabbitMQ\u30b5\u30fc\u30d0\u30fc\u306e\u76e3\u8996\u3084\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3001\u30ad\u30e5\u30fc\u3001\u30e6\u30fc\u30b6\u30fc\u306a\u3069\u3092\u64cd\u4f5c\u3067\u304d\u308b\u30d6\u30e9\u30a6\u30b6\u30d9\u30fc\u30b9\u306e\u7ba1\u7406\u6a5f\u80fd\u3067\u3059\u3002\nnode1\u3001node2\u3067\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u6709\u52b9\u5316\u3057\u307e\u3059\u3002\nnode1\n> rabbitmq-plugins.bat enable rabbitmq_management \nThe following plugins have been enabled:\n  mochiweb\n  webmachine\n  rabbitmq_web_dispatch\n  amqp_client\n  rabbitmq_management_agent\n  rabbitmq_management\n\nApplying plugin configuration to rabbit_node1@localhost... started 6 plugins.\n\nnode2\n> rabbitmq-plugins.bat enable rabbitmq_management \nThe following plugins have been enabled:\n  mochiweb\n  webmachine\n  rabbitmq_web_dispatch\n  amqp_client\n  rabbitmq_management_agent\n  rabbitmq_management\n\nApplying plugin configuration to rabbit_node2@localhost... started 6 plugins.\n\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u4e0b\u8a18\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30e6\u30fc\u30b6\u30fc/\u30d1\u30b9\u30ef\u30fc\u30c9\u306fguest/guest\u3067\u3059\u3002\nnode1\nhttp://localhost:15672/\nnode2\nhttp://localhost:15674/\n\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u7528\u306e\u7ba1\u7406\u8005\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210\n\u6700\u521d\u304b\u3089\u7528\u610f\u3055\u308c\u3066\u3044\u308bguest\u30e6\u30fc\u30b6\u30fc\u3092\u524a\u9664\u3057\u3001\u305d\u306e\u4ee3\u308f\u308a\u306e\u7ba1\u7406\u8005\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210\u306fmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u3068rabbitmqctl\u30b3\u30de\u30f3\u30c9\u304b\u3089\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u4e0b\u8a18\u306e\u60c5\u5831\u3067\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\n\n\nname\npassword\ntag\nvhost\n\n\n\n\nadmin\nadmin\nadministrator\n/\n\n\n\n\u30bf\u30b0\u3067\u30ed\u30fc\u30eb\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30bf\u30b0\u306b\u4f7f\u7528\u3067\u304d\u308b\u540d\u524d\u306f\u4e0b\u8868\u306e\u901a\u308a\u3067\u3059\u3002\n\n\n\nname\ndescription\n\n\n\n\n(none)\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093\u3002\n\n\nmanagement\n\n\n\npolicymaker\nmanagement+\n\n\nmonitoring\nmanagement+\n\n\nadministrator\npolicymaker+, management+\n\n\n\nrabbitmqctl\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\n> rabbitmqctl.bat -n rabbit_node1@localhost add_user admin admin\nCreating user \"admin\" ...\n\n> rabbitmqctl.bat -n rabbit_node1@localhost set_user_tags admin administrator\nSetting tags for user \"admin\" to [administrator] ...\n\n> rabbitmqctl.bat -n rabbit_node1@localhost set_permissions -p / admin \".*\" \".*\" \".*\"\nSetting permissions for user \"admin\" in vhost \"/\" ...\n\n\u4e0a\u8a18\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8(/)\u306b\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u5897\u3084\u3057\u305f\u5834\u5408\u306f\u3001\u305d\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306b\u5bfe\u3057\u3066\u3082\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u4ed8\u4e0e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\uff08\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u306a\u3044\u3068management\u30d7\u30e9\u30b0\u30a4\u30f3\u4e0a\u3067\u64cd\u4f5c\u304c\u3067\u304d\u307e\u305b\u3093\u3002\uff09\nguest\u30e6\u30fc\u30b6\u30fc\u3092\u524a\u9664\u3057\u307e\u3059\n\nexample\n> rabbitmqctl.bat -n rabbit_node1@localhost delete_user guest\nDeleting user \"guest\" ...\n\n\n\u53c2\u8003\n\nManagement Plugin\n\n\n\u30af\u30e9\u30b9\u30bf\u30fc\u306e\u69cb\u7bc9\n\u30af\u30e9\u30b9\u30bf\u30fc\u306e\u69cb\u7bc9\u306fnode1\u3001node2\u3092\u8d77\u52d5\u3057\u305f\u72b6\u614b\u3067\u884c\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306fnode2\u3092node1\u3078\u53c2\u52a0\u3055\u305b\u307e\u3059\u3002(node1\u304c\u30de\u30b9\u30bf\u30fc\u3001node2\u304c\u30b9\u30ec\u30fc\u30d6\u306b\u306a\u308a\u307e\u3059\u3002\uff09\n\u69cb\u7bc9\u524d\u306e\u30af\u30e9\u30b9\u30bf\u30fc\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u307e\u3059\n> rabbitmqctl.bat -n rabbit_node1@localhost cluster_status\nCluster status of node rabbit_node1@localhost ...\n[{nodes,[{disc,[rabbit_node1@localhost]}]},\n {running_nodes,[rabbit_node1@localhost]},\n {cluster_name,<<\"rabbit_node1@localhost\">>},\n {partitions,[]}]\n\n\u30af\u30e9\u30b9\u30bf\u30fc\u3092\u69cb\u7bc9\u3057\u307e\u3059\n> rabbitmqctl.bat -n rabbit_node2@localhost stop_app\nStopping node rabbit_node2@localhost ...\n\n> rabbitmqctl.bat -n rabbit_node2@localhost join_cluster rabbit_node1@localhost\nClustering node rabbit_node2@localhost with rabbit_node1@localhost ...\n\n> rabbitmqctl.bat -n rabbit_node2@localhost start_app\nStarting node rabbit_node2@localhost ...\n\n\u69cb\u7bc9\u5f8c\u306e\u30af\u30e9\u30b9\u30bf\u30fc\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u307e\u3059\n> rabbitmqctl.bat -n rabbit_node1@localhost cluster_status\nCluster status of node rabbit_node2@localhost ...\n[{nodes,[{disc,[rabbit_node1@localhost,rabbit_node2@localhost]}]},\n {running_nodes,[rabbit_node1@localhost,rabbit_node2@localhost]},\n {cluster_name,<<\"rabbit_node1@localhost\">>},\n {partitions,[]}]\n\n\n\u30af\u30e9\u30b9\u30bf\u30fc\u306e\u89e3\u9664\u65b9\u6cd5\n\u4e00\u6642\u7684\u306b\u30af\u30e9\u30b9\u30bf\u30fc\u304b\u3089\u5916\u3059\u65b9\u6cd5\nforget_cluster_node\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u30af\u30e9\u30b9\u30bf\u30fc\u3078\u53c2\u52a0\u3055\u305b\u308b\u306b\u306f\u3082\u3046\u4e00\u5ea6join_cluster\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n> rabbitmqctl.bat -n rabbit_node2@localhost stop_app\nStopping node rabbit_node2@localhost ...\n\n> rabbitmqctl.bat -n rabbit_node1@localhost forget_cluster_node rabbit_node2@localhost\nResetting node rabbit_node2@localhost from cluster ...\n\n\u30af\u30e9\u30b9\u30bf\u30fc\u304b\u3089\u5916\u3059\u65b9\u6cd5\n\nexample\n> rabbitmqctl.bat -n rabbit_node2@localhost stop_app\nStopping node rabbit_node2@localhost ...\n\n> rabbitmqctl.bat -n rabbit_node2@localhost reset\nResetting node rabbit_node2@localhost ...\n\n> rabbitmqctl.bat -n rabbit_node2@localhost start_app\nStarting node rabbit_node2@localhost ...\n\n\n\u53c2\u8003\n\nClustering Guide\nHighly Available Queues\n\n\n2. RabbitMQ\u306e\u69cb\u6210\n\u3053\u3053\u304b\u3089\u306f\u6b21\u306e\u30b7\u30ca\u30ea\u30aa\u306b\u57fa\u3065\u3044\u3066\u767b\u9332\u3092\u884c\u3044\u306a\u304c\u3089\u5404\u8981\u7d20\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u30922\u3064(v1\u3001v2)\u767b\u9332\u3057\u307e\u3059\u3002\n\u305d\u308c\u305e\u308c\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3078\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u30e6\u30fc\u30b6\u30fc(v1_user\u3001v2_user)\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\n\n\nv1\u306b2\u3064\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8(notice.direct\u3001broadcast.fanout)\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\nv1\u306b3\u3064\u306e\u30ad\u30e5\u30fc(userid:1000\u3001userid:1001\u3001userid:2002)\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\nnotice.direct\u304b\u3089\u30ad\u30e5\u30fc\u3078\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306f\u56fa\u6709\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u306b\u3088\u3063\u3066\u884c\u3044\u307e\u3059\u3002\n\nbroadcast.fanout\u304b\u3089\u306f\u3059\u3079\u3066\u306e\u30ad\u30e5\u30fc\u3078\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3057\u307e\u3059\u3002\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\n\n\nv2\u306b1\u3064\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8(notice.topic)\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\nv2\u306b4\u3064\u306e\u30ad\u30e5\u30fc(userid:1000.info\u3001userid:1000.warn\u3001userid:1001.info\u3001userid:1001.warn)\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\nnotice.topic\u304b\u3089\u30ad\u30e5\u30fc\u3078\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306f\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u306e\u90e8\u5206\u30de\u30c3\u30c1\u306b\u3088\u3063\u3066\u884c\u3044\u307e\u3059\u3002\n\n\u30ad\u30e5\u30fc\u306e\u30dd\u30ea\u30b7\u30fc\nv1\u306e\u30ad\u30e5\u30fcuserid:1000\u3001userid:1001\u306b\u300cuser1x\u300d\u30dd\u30ea\u30b7\u30fc\u3092\u9069\u7528\u3057\u307e\u3059\u3002\nv1\u306e\u30ad\u30e5\u30fcuserid:2002\u306b\u300cuser2x\u300d\u30dd\u30ea\u30b7\u30fc\u3092\u9069\u7528\u3057\u307e\u3059\u3002\nv2\u306e\u30ad\u30e5\u30fcuserid:1000.info\u3001userid:1001.info\u306b\u300cinfo\u300d\u30dd\u30ea\u30b7\u30fc\u3092\u9069\u7528\u3057\u307e\u3059\u3002\nv2\u306e\u30ad\u30e5\u30fcuserid:1000.warn\u3001userid:1001.warn\u306b\u300cwarn\u300d\u30dd\u30ea\u30b7\u30fc\u3092\u9069\u7528\u3057\u307e\u3059\u3002\n\u30dd\u30ea\u30b7\u30fc\u306e\u5b9a\u7fa9\u5185\u5bb9\n\n\n\nname\npattern\ndefinition\ndescription\n\n\n\n\nuser1x\n^userid:[1].*\nmax-length:50\n\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30ad\u30e5\u30fc\u306b\u6700\u592750\u4ef6\u307e\u3067\u4fdd\u6301\n\n\nuser2x\n^userid:[2].*\nmax-length:100\n\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30ad\u30e5\u30fc\u306b\u6700\u5927100\u4ef6\u307e\u3067\u4fdd\u6301\n\n\ninfo\n^userid:.*.info\nmessage-ttl:1800000\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u751f\u5b58\u671f\u9593\u309230\u5206\u307e\u3067\n\n\nwarn\n^userid:.*.warn\nmessage-ttl:3600000\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u751f\u5b58\u671f\u9593\u309260\u5206\u307e\u3067\n\n\n\n\n\u4f8b\n [vhost]      [exchange]            [routing key]       [queue]\n----------+----------------------+------------------+-------------------\n   v1    ---> notice.direct     --->  '1000'       ---> userid:1000\n                                --->  '1001'       ---> userid:1001\n                                --->  '2002'       ---> userid:2002\n\n         ---> broadcast.fanout  ----------------------> userid:1000\n                                ----------------------> userid:1001\n                                ----------------------> userid:2002\n\n   v2    ---> notice.topic      --->   '*.info'    ---> userid:1000.info\n                                --->   '*.info'    ---> userid:1001.info\n                                --->   '*.warn'    ---> userid:1000.warn\n                                --->   '*.warn'    ---> userid:1001.warn\n\n\n\u767b\u9332\u306e\u8aac\u660e\u306frabbitmqctl\u30b3\u30de\u30f3\u30c9\u3068management\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u4e21\u65b9\u3067\u884c\u3044\u307e\u3059\u304c\u3001\u4e00\u90e8\u306e\u767b\u9332\u306frabbitmqctl\u3067\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\u305d\u308c\u3092\u4e0b\u8868\u306b\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\n\n\n\u64cd\u4f5c\nrabbitmqctl\u30b3\u30de\u30f3\u30c9\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\ndesc\n\n\n\n\n\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u4f5c\u6210\n\u53ef (add_vhost)\n\u53ef\n\n\n\n\u30e6\u30fc\u30b6\u30fc\u306e\u767b\u9332\n\u53ef (add_user)\n\u53ef\n\n\n\n\u30a2\u30af\u30bb\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\n\u53ef (set_permissions)\n\u53ef\n\n\n\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u4f5c\u6210\n\u4e0d\u53ef\n\u53ef\n\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u5225\n\n\n\u30ad\u30e5\u30fc\u306e\u4f5c\u6210\n\u4e0d\u53ef\n\u53ef\n\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u5225\n\n\n\u30d0\u30a4\u30f3\u30c9\n\u4e0d\u53ef\n\u53ef\n\n\n\n\u30dd\u30ea\u30b7\u30fc\u306e\u4f5c\u6210\n\u53ef (set_policy)\n\u53ef\n\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u5225\n\n\n\n\n\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc (producer) / \u30b3\u30f3\u30b7\u30e5\u30fc\u30de\u30fc (consumer)\n\n\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u306f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u914d\u4fe1\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u914d\u4fe1\u3092\u30d6\u30ed\u30fc\u30ab\u30fc\u3078\u4f9d\u983c\u3057\u307e\u3059\u3002\n\u30b3\u30f3\u30b7\u30e5\u30fc\u30de\u30fc\u306f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u4fe1\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30d6\u30ed\u30fc\u30ab\u30fc\u304b\u3089\u53d7\u3051\u53d6\u308a\u307e\u3059\u3002\n\n\n\u30d6\u30ed\u30fc\u30ab\u30fc (broker)\nRabbitMQ\u30b5\u30fc\u30d0\u30fc\u306e\u3053\u3068\u3067\u3059\u3002\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u4e2d\u7d99\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002\u30d6\u30ed\u30fc\u30ab\u30fc\u306f\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3001\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3001\u30ad\u30e5\u30fc\u3068\u3044\u3063\u305f\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304b\u3089\u69cb\u6210\u3055\u308c\u307e\u3059\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u9593\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u9001\u53d7\u4fe1\u3092\u30d6\u30ed\u30fc\u30ab\u30fc\u304c\u4e2d\u7d99\u3059\u308b\u3053\u3068\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540c\u58eb\u3092\u758e\u7d50\u5408\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8 (virtual host)\n\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306f\u3001\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3084\u30ad\u30e5\u30fc\u3092\u610f\u5473\u306e\u3042\u308b\u30b0\u30eb\u30fc\u30d7\u306b\u5206\u5272\u3057\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8(/)\u304c\u4e8b\u524d\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u3066\u3001rabbitmqctl\u30b3\u30de\u30f3\u30c9\u3067\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u6307\u5b9a\u3092\u7701\u7565\u3057\u305f\u5834\u5408\u3001\u3053\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u304c\u4f7f\u7528\u3055\u308c\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u4f5c\u6210\u306frabbitmqctl\u30b3\u30de\u30f3\u30c9\u3001management\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u4e00\u89a7\u3092\u8868\u793a\u3057\u307e\u3059\n\nSynopsis\nlist_vhosts [vhostinfoitem ...]\n\n\n\nlist_vhosts\n> rabbitmqctl.bat -n rabbit_node1@localhost list_vhosts\nListing vhosts ...\n/\n\n\n\n\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u4f5c\u6210\nrabbitmqct\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\nrabbitmqctl\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210\u3059\u308b\u306b\u306fadd_vhost\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\nSynopsis\nadd_vhost {vhostpath}\n\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nadd_vhost\n> rabbitmqctl.bat -n rabbit_node1@localhost add_vhost v2\nCreating vhost \"v2\" ...\n\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nadd_vhost\n> rabbitmqctl.bat -n rabbit_node1@localhost add_vhost v2\nCreating vhost \"v2\" ...\n\n\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Admin]\u2192[Virtual Hosts]\u3092\u9078\u629e\u3057\u307e\u3059\u3002\nName\u306b\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u540d\u3092\u5165\u529b\u3057\u3066\u767b\u9332\u3057\u307e\u3059\u3002\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nName\nv1\n\n\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nName\nv2\n\n\n\n\u767b\u9332\u5f8c\u306f\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n\u4f5c\u6210\u76f4\u5f8c\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306b\u306f\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u30e6\u30fc\u30b6\u30fc\u304c\u5b58\u5728\u3057\u307e\u305b\u3093\u306e\u3067\u3001\u7d9a\u3044\u3066\u30e6\u30fc\u30b6\u30fc\u306e\u767b\u9332\u3068\u305d\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u30a2\u30af\u30bb\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u306e\u8a2d\u5b9a\u3092\u884c\u3046\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30e6\u30fc\u30b6\u30fc (user)\n\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\u9069\u5207\u306a\u6a29\u9650\u304c\u4ed8\u4e0e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u30e6\u30fc\u30b6\u30fc\u306e\u4e00\u89a7\u3092\u8868\u793a\u3057\u307e\u3059\n\nSynopsis\nlist_users\n\n\n\nlist_users\n> rabbitmqctl -n rabbit_node1@localhost list_users\nListing users ...\nadmin   [administrator]\n\n\n\n\u30e6\u30fc\u30b6\u30fc\u306e\u767b\u9332\nRabbitMQ\u306e\u30e6\u30fc\u30b6\u30fc\u306f\u3001\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u4fe1\u3059\u308bproducer\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3001\u30ad\u30e5\u30fc\u304b\u3089\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u4fe1\u3059\u308bconsumer\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3082\u4f7f\u7528\u3057\u307e\u3059\u3002\n\u30e6\u30fc\u30b6\u30fc\u306e\u767b\u9332\u306frabbitmqctl\u30b3\u30de\u30f3\u30c9\u3001management\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nrabbitmqct\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\nrabbitmqctl\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210\u3059\u308b\u306b\u306fadd_user\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\nSynopsis\nadd_user {username} {password}\n\n\nv1_user\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nadd_user\n> rabbitmqctl.bat -n rabbit_node1@localhost add_user v1_user pass\nCreating user \"v1_user\" ...\n\n\nv2_user\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nadd_user\n> rabbitmqctl.bat -n rabbit_node1@localhost add_user v2_user pass\nCreating user \"v2_user\" ...\n\n\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Admin]\u2192[Users]\u3092\u9078\u629e\u3057\u307e\u3059\u3002\nUsername\u306b\u30e6\u30fc\u30b6\u30fc\u540d\u3001Password\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u767b\u9332\u3057\u307e\u3059\u3002Tags\u306f\u5165\u529b\u4e0d\u8981\u3067\u3059\u3002\n\nv1_user\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nUsername\nv1_user\n\n\nPassword\npass\n\n\nTags\n(nothing)\n\n\n\nv2_user\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nUsername\nv2_user\n\n\nPassword\npass\n\n\nTags\n(nothing)\n\n\n\n\u767b\u9332\u5f8c\u306f\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n\u7d9a\u3044\u3066\u30e6\u30fc\u30b6\u30fc\u3078\u30a2\u30af\u30bb\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u30a2\u30af\u30bb\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\n\u30e6\u30fc\u30b6\u30fc\u304c\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3068\u6a29\u9650\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nrabbitmqct\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\nrabbitmqctl\u30b3\u30de\u30f3\u30c9\u3067\u30a2\u30af\u30bb\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306fset_permissions\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\nSynopsis\nset_permissions [-p vhostpath] {user} {conf} {write} {read}\n\n\n\n\n\noption\nvalue\n\n\n\n\n-p\n\u30e6\u30fc\u30b6\u30fc\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u4ed8\u4e0e\u3059\u308b\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f/\u3067\u3059\n\n\n{user}\n\u30e6\u30fc\u30b6\u30fc\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n{conf}\n\u8a2d\u5b9a\u6a29\u9650\u3092\u4e0e\u3048\u308b\u30ea\u30bd\u30fc\u30b9\u540d\u3092\u6b63\u898f\u8868\u73fe\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n{write}\n\u66f8\u304d\u8fbc\u307f\u6a29\u9650\u3092\u4e0e\u3048\u308b\u30ea\u30bd\u30fc\u30b9\u540d\u3092\u6b63\u898f\u8868\u73fe\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n{read}\n\u8aad\u307f\u8fbc\u307f\u6a29\u9650\u3092\u4e0e\u3048\u308b\u30ea\u30bd\u30fc\u30b9\u540d\u3092\u6b63\u898f\u8868\u73fe\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n\n\u5168\u6a29\u9650\u3092\u4e0e\u3048\u308b\u5834\u5408\u306f\".*\"\u3001\u6a29\u9650\u3092\u4e0e\u3048\u306a\u3044\u5834\u5408\u306f\"^$\"\nv1_user\u306bv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306b\u5bfe\u3059\u308b\u6a29\u9650\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nset_permissions\n> rabbitmqctl.bat -n rabbit_node1@localhost set_permissions -p v1 v1_user \"^$\" \".*\" \".*\"\nSetting permissions for user \"v1_user\" in vhost \"v1\" ...\n\n\nv2_user\u306bv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306b\u5bfe\u3059\u308b\u6a29\u9650\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nset_permissions\n> rabbitmqctl.bat -n rabbit_node1@localhost set_permissions -p v2 v2_user \"^$\" \".*\" \".*\"\nSetting permissions for user \"v2_user\" in vhost \"v2\" ...\n\n\nmanagemanet\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u7ba1\u7406\u30e6\u30fc\u30b6\u30fc\u306b\u3082\u6a29\u9650\u3092\u4e0e\u3048\u307e\u3059\u3002\n\nset_permissions\n> rabbitmqctl.bat -n rabbit_node1@localhost set_permissions -p v1 admin \".*\" \".*\" \".*\"\nSetting permissions for user \"admin\" in vhost \"v1\" ...\n> rabbitmqctl.bat -n rabbit_node1@localhost set_permissions -p v2 admin \".*\" \".*\" \".*\"\nSetting permissions for user \"admin\" in vhost \"v2\" ...\n\n\n\u30e6\u30fc\u30b6\u30fc\u306e\u4ed8\u4e0e\u3055\u308c\u305f\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u4e00\u89a7\u3092\u8868\u793a\u3057\u307e\u3059\n\nSynopsis\nlist_user_permissions {username}\n\n\n\nlist_user_permissions\n> rabbitmqctl.bat -n rabbit_node1@localhost list_user_permissions admin\nListing permissions for user \"admin\" ...\n/       .*      .*      .*\nv1      .*      .*      .*\nv2      .*      .*      .*\n> rabbitmqctl.bat -n rabbit_node1@localhost list_user_permissions v1_user\nListing permissions for user \"v1_user\" ...\nv1      ^$      .*      .*\n> rabbitmqctl.bat -n rabbit_node1@localhost list_user_permissions v2_user\nListing permissions for user \"v2_user\" ...\nv2      ^$      .*      .*\n\n\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Admin]\u2192[Users]\u3092\u9078\u629e\u3057\u30a2\u30af\u30bb\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3092\u8a2d\u5b9a\u3057\u305f\u3044\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308bVirtual Host\u3092\u30ea\u30b9\u30c8\u304b\u3089\u9078\u629e\u3057\u3001\u6a29\u9650\u3092\u4e0e\u3048\u308b\u30ea\u30bd\u30fc\u30b9\u3092\u6b63\u898f\u8868\u73fe\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nv1_user\u306bv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306b\u5bfe\u3059\u308b\u6a29\u9650\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nVirtual Host\nv1\n\n\nConfigure regexp\n^$\n\n\nWrite regexp\n.*\n\n\nRead regexp\n.*\n\n\n\nv2_user\u306bv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306b\u5bfe\u3059\u308b\u6a29\u9650\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nVirtual Host\nv2\n\n\nConfigure regexp\n^$\n\n\nWrite regexp\n.*\n\n\nRead regexp\n.*\n\n\n\nadmin\u306b\u3082v1\u3001v2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306b\u5bfe\u3059\u308b\u6a29\u9650\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u767b\u9332\u5f8c\u306f\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8 (exchange)\n\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u304b\u3089\u53d7\u3051\u53d6\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u3001\u30d0\u30a4\u30f3\u30c9\u306e\u8a2d\u5b9a\u306b\u3057\u305f\u304c\u3063\u3066\u30ad\u30e5\u30fc\u3078\u914d\u9001\u3057\u307e\u3059\u3002\n\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u7a2e\u985e\nfanout\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306b\u30d0\u30a4\u30f3\u30c9\u3055\u308c\u3066\u3044\u308b\u3059\u3079\u3066\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u914d\u9001\u3057\u307e\u3059\u3002\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u306f\u4f7f\u7528\u3057\u307e\u305b\u3093\u3002\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30c8\u306b\u5411\u3044\u3066\u3044\u307e\u3059\u3002\ndirect\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306b\u30d0\u30a4\u30f3\u30c9\u3055\u308c\u3066\u3044\u308b\u30ad\u30e5\u30fc\u306e\u3046\u3061\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u3068\u30d0\u30a4\u30f3\u30c9\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u304c\u4e00\u81f4\u3059\u308b\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u914d\u9001\u3057\u307e\u3059\u3002\n\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u7279\u5b9a\u306e\u30ad\u30e5\u30fc\u3078\u914d\u9001\u3059\u308b\u306e\u306b\u5411\u3044\u3066\u3044\u307e\u3059\u3002\ntopic\ndirect\u3068\u4f3c\u3066\u3044\u307e\u3059\u304c\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u3068\u30d0\u30a4\u30f3\u30c9\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u30d1\u30bf\u30fc\u30f3\u304c\u30de\u30c3\u30c1\u30f3\u30b0\u3059\u308b\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u914d\u9001\u3057\u307e\u3059\u3002\nheaders\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30d8\u30c3\u30c0\u30fc\u306b\u57fa\u3065\u3044\u3066\u914d\u9001\u5148\u306e\u30ad\u30e5\u30fc\u3092\u6c7a\u5b9a\u3057\u307e\u3059\u3002\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u306f\u4f7f\u7528\u3057\u307e\u305b\u3093\u3002\n\n\u7d44\u307f\u8fbc\u307f\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\n\u4e8b\u524d\u306b\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306f\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u6bce\u306b\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3089\u3092\u305d\u306e\u307e\u307e\u4f7f\u7528\u3059\u308b\u3053\u3068\u3082\u3001\u72ec\u81ea\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n\n\nname\ntype\n\n\n\n\n(AMQP default)\ndirect\n\n\namq.direct\ndirect\n\n\namq.fanout\nfanout\n\n\namq.headers\nheaders\n\n\namq.match\nheaders\n\n\namq.rabbitmq.log\ntopic\n\n\namq.rabbitmq.trace\ntopic\n\n\namq.topic\ntopic\n\n\n\nAMQP default : \u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u914d\u4fe1\u5148\uff08\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\uff09\u3092\u660e\u793a\u7684\u306b\u6307\u5b9a\u3057\u306a\u304b\u3063\u305f\u3068\u304d\u306b\u4f7f\u7528\u3055\u308c\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3067\u3059\u3002\u3053\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306f\u6697\u9ed9\u7684\u306b\u3059\u3079\u3066\u306e\u30ad\u30e5\u30fc\u306b\u30d0\u30a4\u30f3\u30c9\u3055\u308c\u3066\u304a\u308a\u3001\u307e\u305f\u524a\u9664\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u305b\u3093\u3002\n\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u4f5c\u6210\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u4f5c\u6210\u306frabbitmqctl\u30b3\u30de\u30f3\u30c9\u3067\u306f\u3067\u304d\u307e\u305b\u3093\u306e\u3067\u3001management\u30d7\u30e9\u30b0\u30a4\u30f3\u304bclient\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Exchanges]\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306f\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u6bce\u306b\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4f5c\u6210\u5bfe\u8c61\u306eVirtual Host\u3092\u9078\u3073\u3001Name\u306b\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u540d\u3092\u5165\u529b\u3057\u307e\u3059\u3002\u305f\u3060\u3057\u540d\u524d\u306e\u5148\u982d\u306b\"amp.\"\u3092\u4ed8\u3051\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306bnotice.direct\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nVirtual Host\nv1\n\n\nName\nnotice.direct\n\n\nType\ndirect\n\n\nDurability\nDurable\n\n\nAuto Delete\nNo\n\n\nInternal\nNo\n\n\nArguments\n(nothing)\n\n\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306bbroadcast.fanout\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nVirtual Host\nv1\n\n\nName\nbroadcast.fanout\n\n\nType\nfanout\n\n\nDurability\nDurable\n\n\nAuto Delete\nNo\n\n\nInternal\nNo\n\n\nArguments\n(nothing)\n\n\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306bnotice.topic\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nVirtual Host\nv2\n\n\nName\nnotice.topic\n\n\nType\ntopic\n\n\nDurability\nDurable\n\n\nAuto Delete\nNo\n\n\nInternal\nNo\n\n\nArguments\n(nothing)\n\n\n\n\u767b\u9332\u5f8c\u306f\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002(*\u9752\u7dda\u3067\u56f2\u3063\u305f\u90e8\u5206\u304c\u767b\u9332\u3057\u305f\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3067\u3059\u3002\u305d\u306e\u4ed6\u306f\u4e8b\u524d\u5b9a\u7fa9\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3067\u3059\u3002)\n\n\nproperties\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306b\u8a2d\u5b9a\u3067\u304d\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\n\n\n\nproperty\nvalue\ndescription\n\n\n\n\nDurability\n\nDurable\nTransient\n\nDurable:\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3092\u6c38\u7d9a\u5316\u3057\u307e\u3059\u3001Transient:\u4e00\u6642\u7684\u306a\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3068\u3057\u307e\u3059\u3002\n\n\nAuto Delete\n\nYES\nNO\n\nYES:\u30d0\u30a4\u30f3\u30c9\u3059\u308b\u30ad\u30e5\u30fc\u304c\u7121\u304f\u306a\u3063\u305f\u5834\u5408\u306b\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\n\nInternal\n\nYES\nNO\n\nYES:\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u304b\u3089\u3057\u304b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u3051\u53d6\u308a\u307e\u305b\u3093\u3002\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8 to \u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u7528\u3067\u3059\u3002\n\n\n\n\narguments\n\n\n\narguments\ntype\ndescription\n\n\n\n\nalternate-exchange\nString\nIf messages to this exchange cannot otherwise be routed, send them to the alternate exchange named here.\n\n\n\n\n\u30ad\u30e5\u30fc (queue)\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u304b\u3089\u914d\u9001\u3055\u308c\u3066\u304d\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u4fdd\u7ba1\u5834\u6240\u3067\u3059\u3002\n1\u3064\u306e\u30ad\u30e5\u30fc\u306f1\u3064\u306e\u30ce\u30fc\u30c9\u4e0a\u306b\u4f5c\u6210\u3057\u307e\u3059\uff08RabbitMQ\u30b5\u30fc\u30d0\u30fc\u3092\u30af\u30e9\u30b9\u30bf\u30fc\u69cb\u6210\u306b\u3057\u3066\u3044\u3066\u3082\uff09\u304c\u3001\u30dd\u30ea\u30b7\u30fc\u306e\u8a2d\u5b9a\u306b\u3088\u3063\u3066\u30ad\u30e5\u30fc\u3092\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30ad\u30e5\u30fc\u306e\u4f5c\u6210\n\u30ad\u30e5\u30fc\u306e\u4f5c\u6210\u306frabbitmqctl\u30b3\u30de\u30f3\u30c9\u3067\u306f\u3067\u304d\u307e\u305b\u3093\u306e\u3067\u3001management\u30d7\u30e9\u30b0\u30a4\u30f3\u304bclient\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Queues]\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u30ad\u30e5\u30fc\u306f\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u6bce\u306b\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4f5c\u6210\u5bfe\u8c61\u306eVirtual Host\u3092\u9078\u3073\u3001Name\u306b\u30ad\u30e5\u30fc\u540d\u3092\u5165\u529b\u3057\u307e\u3059\u3002\u305f\u3060\u3057\u540d\u524d\u306e\u5148\u982d\u306b\"amp.\"\u3092\u4ed8\u3051\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306buserid:1000\u3001userid:1001\u3001userid:2002\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nVirtual Host\nv1\n\n\nName\nuserid:1000\u3001userid:1001\u3001userid:2002\n\n\nDurability\nDurable\n\n\nNode\nrabbit_node1@localhost\n\n\nAuto Delete\nNo\n\n\nArguments\nx-max-priority = 9\n\n\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306buserid:1000.info\u3001userid:1000.warn\u3001userid:1001.info\u3001userid:1001.warn\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nVirtual Host\nv2\n\n\nName\nuserid:1000.info\u3001userid:1000.warn\u3001userid:1001.info\u3001userid:1001.warn\n\n\nDurability\nDurable\n\n\nNode\nrabbit_node1@localhost\n\n\nAuto Delete\nNo\n\n\nArguments\nx-max-priority = 9\n\n\n\n\u767b\u9332\u5f8c\u306f\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\nproperties\n\u30ad\u30e5\u30fc\u306b\u8a2d\u5b9a\u3067\u304d\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\n\n\n\nproperty\nvalue\ndescription\n\n\n\n\nDurability\n\nDurable\nTransient\n\nDurable:\u30ad\u30e5\u30fc\u3092\u6c38\u7d9a\u5316\u3057\u307e\u3059\u3001Transient:\u4e00\u6642\u7684\u306a\u30ad\u30e5\u30fc\u3068\u3057\u307e\u3059\u3002\n\n\nNode\n\u30ea\u30b9\u30c8\u304b\u3089\u9078\u629e\u3057\u307e\u3059\n\u30ad\u30e5\u30fc\u3092\u4f5c\u6210\u3059\u308b\u30ce\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\n\n\nAuto delete\n\nYES\nNO\n\nYES:consumer\u304b\u3089\u306e\u63a5\u7d9a\u304c\u7121\u304f\u306a\u3063\u305f\u5834\u5408\u306b\u30ad\u30e5\u30fc\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\n\n\nDurability\u3068\u306f\u3001\u30ad\u30e5\u30fc\u306e\u767b\u9332\u60c5\u5831\u3092RabbitMQ\u30b5\u30fc\u30d0\u30fc\u306e\u505c\u6b62\u5f8c\u3082\u4fdd\u5b58\u3059\u308b\u304b\u3092\u6307\u5b9a\u3059\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u3067\u3059\u3002Transient\u306e\u5834\u5408\u3001RabbitMQ\u30b5\u30fc\u30d0\u30fc\u3092\u505c\u6b62\u3055\u305b\u308b\u3068\u305d\u306e\u30ad\u30e5\u30fc\u306f\u7121\u304f\u306a\u308a\u307e\u3059\u3002\n\narguments\n\n\n\narguments\ntype\ndescription\n\n\n\n\nx-message-ttl\nNumber\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u751f\u5b58\u671f\u9593(\u30df\u30ea\u79d2)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\nx-expires\nNumber\n\u30ad\u30e5\u30fc\u306e\u6709\u52b9\u671f\u9593(\u30df\u30ea\u79d2)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u6307\u5b9a\u3057\u305f\u6642\u9593\u4f7f\u7528\u3055\u308c\u306a\u304b\u3063\u305f\u5834\u5408\u30ad\u30e5\u30fc\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\n\nx-max-length\nNumber\n\u30ad\u30e5\u30fc\u306b\u4fdd\u5b58\u3059\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u6700\u5927\u6570\uff08\u3053\u308c\u3092\u8d85\u3048\u308b\u3068\u53e4\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u304b\u3089\u524a\u9664)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\nx-max-length-bytes\nNumber\n\u30ad\u30e5\u30fc\u306b\u4fdd\u5b58\u3059\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u6700\u5927\u5408\u8a08\u30b5\u30a4\u30ba\u6570 (\u3053\u308c\u3092\u8d85\u3048\u308b\u3068\u53e4\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u304b\u3089\u524a\u9664)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\nx-dead-letter-exchange\nString\ndead-letter\u306b\u306a\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u8ee2\u9001\u5148\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\nx-dead-letter-routing-key\nString\ndead-letter\u306b\u306a\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u4ed8\u3051\u308b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\nx-max-priority\nNumber\n\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u306e\u6700\u5927\u5024\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u5927\u304d\u3044\u5024\u307b\u3069\u512a\u5148\u5ea6\u304c\u9ad8\u304f\u306a\u308a\u307e\u3059\u3002\n\n\nx-match\nString\n\nall:\u3059\u3079\u3066\u306e\u6761\u4ef6\u304c\u30de\u30c3\u30c1\u3059\u308b\u5834\u5408\u306b\u53d7\u4fe1\u3059\u308b\u3002any:\u6761\u4ef6\u304c1\u3064\u3067\u3082\u30de\u30c3\u30c1\u3059\u308b\u5834\u5408\u306b\u53d7\u4fe1\u3059\u308b\u3002\n\n\n\n\n\u30d0\u30a4\u30f3\u30c9 (binding)\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3068\u30ad\u30e5\u30fc\u3092\u95a2\u9023\u4ed8\u3051\u307e\u3059\u3002\u95a2\u9023\u306f\u300c\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u304b\u3089\u30ad\u30e5\u30fc\u300d\u3068\u300c\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u304b\u3089\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u300d\u306e2\u901a\u308a\u304c\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u304c\u53d7\u3051\u53d6\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u914d\u9001\u5148\u306f\u95a2\u9023\u4ed8\u3051\u3089\u308c\u305f\u30ad\u30e5\u30fc\u306e\u4e2d\u304b\u3089\u9078\u629e\u3055\u308c\u307e\u3059\u304c\u3001\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u30bf\u30a4\u30d7\u304cdirect\u304btopic\u306e\u5834\u5408\u306f\u3001\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u306b\u3088\u3063\u3066\u914d\u9001\u306e\u30ad\u30e5\u30fc\u3092\u5206\u5c90\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nheaders\u306e\u5834\u5408\u306f\u3001\u30d8\u30c3\u30c0\u30fc\u306b\u6307\u5b9a\u3057\u305f\u6761\u4ef6\u306b\u3088\u3063\u3066\u914d\u9001\u5148\u306e\u30ad\u30e5\u30fc\u3092\u5206\u5c90\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc (routing key)\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u30bf\u30a4\u30d7\u304cdirect\u304btopic\u306e\u3068\u304d\u3001\u30d0\u30a4\u30f3\u30c9\u306b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u3053\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u3068\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u6301\u3064\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u304c\u6bd4\u8f03\u3055\u308c\u914d\u9001\u3059\u308b\u30ad\u30e5\u30fc\u304c\u6c7a\u5b9a\u3055\u308c\u307e\u3059\u3002\ndirect\ndirect\u306e\u5834\u5408\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u304c\u30d0\u30a4\u30f3\u30c9\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u3068\u4e00\u81f4\u3057\u305f\u5834\u5408\u306b\u3001\u305d\u306e\u30d0\u30a4\u30f3\u30c9\u5148\u306e\u30ad\u30e5\u30fc\u304c\u9078\u629e\u3055\u308c\u307e\u3059\u3002\n\ndirect_exchange\u4f8b\n +- [message]--------------+      +-[ direct exchange]------------+\n |                         |      |                               |\n |  routing key : ?        |----->|   +-[binding] A ----------+   |     +-[ queue ]-----+\n |                         |      |   | routing key : 1000    |-------->|               |\n |  payload {              |      |   |                       |   |     +---------------+\n |     ...                 |      |   +-----------------------+   |\n |  }                      |      |   +-[binding] B ----------+   |     +-[ queue ]-----+\n +-------------------------+      |   | routing key : 1001    |-------->|               |\n                                  |   |                       |   |     +---------------+\n                                  |   +-----------------------+   |\n                                  |   +-[binding] C ----------+   |     +-[ queue ]-----+\n                                  |   | routing key : 2000    |-------->|               |\n                                  |   |                       |   |     +---------------+\n                                  |   +-----------------------+   |\n                                  +-------------------------------+\n\n\n\u4e0a\u56f3\u306edirect_exchange\u4f8b\u3067\u306f\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306erouting key\u304c1000\u306e\u5834\u5408\u3001binding A\u304c\u4f7f\u7528\u3055\u308c\u3001\u305d\u306e\u5148\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u307e\u3059\u3002\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306erouting key\u304c1001\u306e\u5834\u5408\u3001binding B\u304c\u4f7f\u7528\u3055\u308c\u3001\u305d\u306e\u5148\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u307e\u3059\u3002\n\ntopic\ntopic\u306e\u5834\u5408\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u304c\u30d0\u30a4\u30f3\u30c9\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u30d1\u30bf\u30fc\u30f3\u3068\u4e00\u81f4\u3059\u308b\u5834\u5408\u306b\u3001\u305d\u306e\u30d0\u30a4\u30f3\u30c9\u5148\u306e\u30ad\u30e5\u30fc\u304c\u9078\u629e\u3055\u308c\u307e\u3059\u3002\u4e00\u898b\u3059\u308b\u3068\u6b63\u898f\u8868\u73fe\u306e\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u304c\u305d\u3046\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u306e\u3067\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u30d0\u30a4\u30f3\u30c9\u306b\u8a18\u8ff0\u3059\u308b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u306f\n\n.(\u30c9\u30c3\u30c8)\u3067\u533a\u5207\u3089\u308c\u305f\u5358\u8a9e\u304b\u3089\u69cb\u6210\u3057\u307e\u3059\u3002\n\u30ad\u30fc\u306e\u6700\u5927\u6587\u5b57\u9577\u306f255\u30d0\u30a4\u30c8\u3067\u3059\u3002\n\u5358\u8a9e\u306b\u306f\u7279\u6b8a\u306a\u610f\u5473\u3092\u6301\u3064*\u3001#\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n*\u306f1\u500b\u306e\u5358\u8a9e\u3068\u7f6e\u304d\u63db\u3048\u3089\u308c\u307e\u3059\u3002\n\n#\u306f0\u500b\u307e\u305f\u306f1\u500b\u4ee5\u4e0a\u306e\u5358\u8a9e\u3068\u7f6e\u304d\u63db\u3048\u3089\u308c\u307e\u3059\u3002\n\n\n\n\npattern\n\u30de\u30c3\u30c1\u3059\u308b\u30d1\u30bf\u30fc\u30f3\n\u30de\u30c3\u30c1\u3057\u306a\u3044\u30d1\u30bf\u30fc\u30f3\n\n\n\n\nA.*\n\nA.A\u3001A.B\u3001A.C\u306a\u3069\n\nA\u3001A.B.C\u306a\u3069\n\n\nA.#\n\nA\u3001A.A\u3001A.A.A\n\n\nAA\u3001AA.B\u306a\u3069\n\n\nA.#.Z\n\nA.Z\u3001A.B.Z\u3001A.B.C.Z\n\n\nA\u3001A.B\u3001A.B.C\u306a\u3069\n\n\n\n\ntopics_exchange\u4f8b\n +- [message]--------------+      +-[ topic exchange]----------------+\n |                         |      |                                  |\n |  routing key : ?        |----->|   +-[binding] A -------------+   |     +-[ queue ]-----+\n |                         |      |   | routing key : id.*.info  |-------->|               |\n |  payload {              |      |   |                          |   |     +---------------+\n |     ...                 |      |   +--------------------------+   |\n |  }                      |      |   +-[binding] B -------------+   |     +-[ queue ]-----+\n +-------------------------+      |   | routing key : id.*.warn  |-------->|               |\n                                  |   |                          |   |     +---------------+\n                                  |   +--------------------------+   |\n                                  |   +-[binding] C -------------+   |     +-[ queue ]-----+\n                                  |   | routing key : broad.#    |-------->|               |\n                                  |   |                          |   |     +---------------+\n                                  |   +--------------------------+   |\n                                  +----------------------------------+\n\n\n\u4e0a\u56f3\u306etopics_exchange\u4f8b\u3067\u306f\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306erouting key\u304cid.1000.info\u306e\u5834\u5408\u3001binding A\u304c\u4f7f\u7528\u3055\u308c\u3001\u305d\u306e\u5148\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u307e\u3059\u3002\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306erouting key\u304cid.1001.warn\u306e\u5834\u5408\u3001binding B\u304c\u4f7f\u7528\u3055\u308c\u3001\u305d\u306e\u5148\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u307e\u3059\u3002\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306erouting key\u304cbroad.update.2000\u3084\u3001broad.delete.2001\u306e\u5834\u5408\u3001binding C\u304c\u4f7f\u7528\u3055\u308c\u3001\u305d\u306e\u5148\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u307e\u3059\u3002\n\n\n\u5f15\u6570 (arguments)\nheaders\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u30bf\u30a4\u30d7\u304cheaders\u306e\u3068\u304d\u306b\u3001\u30d0\u30a4\u30f3\u30c9\u306e\u5f15\u6570\u306b\u4efb\u610f\u306e\u5206\u5c90\u6761\u4ef6\u3092\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002\n\u3053\u306e\u5206\u5c90\u6761\u4ef6\u3068\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30d8\u30c3\u30c0\u30fc\u304c\u6bd4\u8f03\u3055\u308c\u914d\u9001\u5148\u306e\u30ad\u30e5\u30fc\u304c\u6c7a\u5b9a\u3055\u308c\u307e\u3059\u3002\nheaders exchange\u306e\u30d0\u30a4\u30f3\u30c9\u306f\u5f15\u6570\u306bx-match\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u8a2d\u5b9a\u3067\u304d\u308b\u5024\u306fany\u304ball\u3067\u3059\u3002\n\n\nany\u8a2d\u5b9a\u306f\u3001\u30d0\u30a4\u30f3\u30c9\u306e\u5206\u5c90\u6761\u4ef6\u306e\u4f55\u308c\u304b\u3092\u6e80\u305f\u3057\u305f\u5834\u5408\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\n\nall\u8a2d\u5b9a\u306f\u3001\u30d0\u30a4\u30f3\u30c9\u306e\u5206\u5c90\u6761\u4ef6\u306e\u3059\u3079\u3066\u3092\u6e80\u305f\u3057\u305f\u5834\u5408\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\n\n\nheaders_exchange\u306e\u4f8b\n +- [message]--------------+      +-[ headers exchange]-----------+\n |                         |      |                               |\n |  arguments              |----->|   +-[binding] A --------+     |     +-[ queue ]-----+\n |   arg1 = ?              |      |   | x-match : any       |---------->|               |\n |   arg2 = ?              |      |   | arg1 : 100          |     |     +---------------+\n |   arg3 = ?              |      |   | arg2 : 200          |     |\n |   arg4 = ?              |      |   +---------------------+     |\n |                         |      |   +-[binding] B --------+     |     +-[ queue ]-----+\n | payload {               |      |   | x-match : any       |---------->|               |\n |    ...                  |      |   | arg3 : 300          |     |     +---------------+\n | }                       |      |   | arg4 : 400          |     |\n +-------------------------+      |   +---------------------+     |\n                                  |   +-[binding] C --------+     |     +-[ queue ]-----+\n                                  |   | x-match : all       |---------->|               |\n                                  |   | arg1 : 100          |     |     +---------------+\n                                  |   | arg3 : 300          |     |\n                                  |   +---------------------+     |\n                                  +-------------------------------+\n\n\n\u4e0a\u56f3\u306eheaders_exchange\u4f8b\u3067\u306f\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306earg1\u5f15\u6570\u304c100\u3001\u307e\u305f\u306farg2\u5f15\u6570\u304c200\u306e\u5834\u5408\u3001binding A\u304c\u4f7f\u7528\u3055\u308c\u3001\u305d\u306e\u5148\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u307e\u3059\u3002\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306earg3\u5f15\u6570\u304c300\u3001\u307e\u305f\u306farg4\u5f15\u6570\u304c400\u306e\u5834\u5408\u3001binding B\u304c\u4f7f\u7528\u3055\u308c\u3001\u305d\u306e\u5148\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u307e\u3059\u3002\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306earg1\u5f15\u6570\u304c100\u3001\u4e14\u3064arg3\u5f15\u6570\u304c300\u306e\u5834\u5408\u3001binding A,B,C\u304c\u4f7f\u7528\u3055\u308c\u3001\u305d\u308c\u305e\u308c\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u307e\u3059\u3002\n\n\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3068\u30ad\u30e5\u30fc\u306e\u30d0\u30a4\u30f3\u30c9\n\u30d0\u30a4\u30f3\u30c9\u306frabbitmqctl\u30b3\u30de\u30f3\u30c9\u3067\u306f\u3067\u304d\u307e\u305b\u3093\u306e\u3067\u3001management\u30d7\u30e9\u30b0\u30a4\u30f3\u304bclient\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Exchanges]\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u4e00\u89a7\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u306e\u3067\u3001\u305d\u306e\u4e2d\u304b\u3089\u30d0\u30a4\u30f3\u30c9\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u305f\u3044\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u540d\u524d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\nBindings\u6b04\u306b\u3042\u308b\u300cAdd binding from this exchange\u300d\u3068\u3044\u3046\u30d5\u30a9\u30fc\u30e0\u304b\u3089\u30d0\u30a4\u30f3\u30c9\u306e\u8a2d\u5b9a\u5185\u5bb9\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306enotice.direct\u306buserid:1000\u3001userid:1001\u3001userid:2002\u3078\u306e\u30d0\u30a4\u30f3\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nTo queue\nuserid:1000\n\n\nRouting key\n1000\n\n\nArguments\n(nothing)\n\n\n\n\n\n\nfield\nvalue\n\n\n\n\nTo queue\nuserid:1001\n\n\nRouting key\n1001\n\n\nArguments\n(nothing)\n\n\n\n\n\n\nfield\nvalue\n\n\n\n\nTo queue\nuserid:2002\n\n\nRouting key\n2002\n\n\nArguments\n(nothing)\n\n\n\n\u767b\u9332\u5f8c\u306f\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306ebroadcast.fanout\u306buserid:1000\u3001userid:1001\u3001userid:2002\u3078\u306e\u30d0\u30a4\u30f3\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nTo queue\nuserid:1000\n\n\nRouting key\n(nothing)\n\n\nArguments\n(nothing)\n\n\n\n\n\n\nfield\nvalue\n\n\n\n\nTo queue\nuserid:1001\n\n\nRouting key\n(nothing)\n\n\nArguments\n(nothing)\n\n\n\n\n\n\nfield\nvalue\n\n\n\n\nTo queue\nuserid:2002\n\n\nRouting key\n(nothing)\n\n\nArguments\n(nothing)\n\n\n\n\u767b\u9332\u5f8c\u306f\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306enotice.topic\u306buserid:1000.info\u3001userid:1000.warn\u3001userid:1001.info\u3001userid:1001.warn\u3078\u306e\u30d0\u30a4\u30f3\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nTo queue\nuserid:1000.info\n\n\nRouting key\n*.info\n\n\nArguments\n(nothing)\n\n\n\n\n\n\nfield\nvalue\n\n\n\n\nTo queue\nuserid:1000.warn\n\n\nRouting key\n*.warn\n\n\nArguments\n(nothing)\n\n\n\n\n\n\nfield\nvalue\n\n\n\n\nTo queue\nuserid:1001.info\n\n\nRouting key\n*.info\n\n\nArguments\n(nothing)\n\n\n\n\n\n\nfield\nvalue\n\n\n\n\nTo queue\nuserid:1001.warn\n\n\nRouting key\n*.warn\n\n\nArguments\n(nothing)\n\n\n\n\u767b\u9332\u5f8c\u306f\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n\n\u30dd\u30ea\u30b7\u30fc (policy)\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3001\u30ad\u30e5\u30fc\u306e\u52d5\u4f5c\u3092\u30dd\u30ea\u30b7\u30fc\u306b\u3088\u3063\u3066\u5236\u5fa1\u3067\u304d\u307e\u3059\u3002\u30dd\u30ea\u30b7\u30fc\u306f\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u6bce\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30dd\u30ea\u30b7\u30fc\u306frabbitmqctl\u30b3\u30de\u30f3\u30c9\u304bmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u30dd\u30ea\u30b7\u30fc\u306e\u4e00\u89a7\u3092\u8868\u793a\u3057\u307e\u3059\n\nSynopsis\nlist_policies [-p vhostpath]\n\n\n\nlist_policies\n> rabbitmqctl.bat -n rabbit_node1@localhost list_policies -p /\nListing policies ...\n> rabbitmqctl.bat -n rabbit_node1@localhost list_policies -p v1\nListing policies ...\n> rabbitmqctl.bat -n rabbit_node1@localhost list_policies -p v2\nListing policies ...\n\n\n\n\u30dd\u30ea\u30b7\u30fc\u306e\u4f5c\u6210\nrabbitmqctl\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\nrabbitmqctl\u30b3\u30de\u30f3\u30c9\u3067\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3059\u308b\u306b\u306fset_policy\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\nSynopsis\nset_policy [-p vhostpath] [--priority priority] [--apply-to apply-to] {name} {pattern} {definition}\n\n\n\n\n\noption\nvalue\n\n\n\n\n-p\n\u30dd\u30ea\u30b7\u30fc\u3092\u9069\u7528\u3059\u308b\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n--priority\n\u30dd\u30ea\u30b7\u30fc\u306e\u512a\u5148\u5ea6\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n--apply-to\n\nall,exchanges,queues\u304b\u3089\u9078\u3073\u307e\u3059\u3002\n\n\n{name}\n\u30dd\u30ea\u30b7\u30fc\u306e\u540d\u524d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n{pattern}\n\u30dd\u30ea\u30b7\u30fc\u3092\u9069\u7528\u3059\u308b\u5bfe\u8c61\u3092\u6b63\u898f\u8868\u73fe\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n{definition}\n\u30dd\u30ea\u30b7\u30fc\u306e\u5185\u5bb9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306buser1x\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nset_policy\n> rabbitmqctl.bat -n rabbit_node1@localhost -p v1 set_policy --priority 0 --apply-to queues \"user1x\" \"^userid:[1].*\" \"{\"\"max-length\"\":50}\"\nSetting policy \"user1x\" for pattern \"^userid:[1].*\" to \"{\\\"max-length\\\":50}\" with priority \"0\" ...\n\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306buser2x\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nset_policy\n> rabbitmqctl.bat -n rabbit_node1@localhost -p v1 set_policy --priority 0 --apply-to queues \"user2x\" \"^userid:[2].*\" \"{\"\"max-length\"\":100}\"\nSetting policy \"user2x\" for pattern \"^userid:[2].*\" to \"{\\\"max-length\\\":100}\" with priority \"0\" ...\n\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306binfo\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nset_policy\n> rabbitmqctl.bat -n rabbit_node1@localhost -p v2 set_policy --priority 0 --apply-to queues \"info\" \"^userid:.*\\.info\" \"{\"\"message-ttl\"\":1800000}\"\nSetting policy \"info\" for pattern \"^userid:.*\\\\.info\" to \"{\\\"message-ttl\\\":1800000}\" with priority \"0\" ...\n\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306bwarn\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nset_policy\n> rabbitmqctl.bat -n rabbit_node1@localhost -p v2 set_policy --priority 0 --apply-to queues \"warn\" \"^userid:.*\\.warn\" \"{\"\"message-ttl\"\":3600000}\"\nSetting policy \"warn\" for pattern \"^userid:.*\\\\.warn\" to \"{\\\"message-ttl\\\":3600000}\" with priority \"0\" ...\n\n\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Admin]\u2192[Policies]\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u30dd\u30ea\u30b7\u30fc\u306f\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u6bce\u306b\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4f5c\u6210\u5bfe\u8c61\u306eVirtual Host\u3092\u9078\u3073\u3001Name\u306b\u30dd\u30ea\u30b7\u30fc\u540d\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306buser1x\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nVirtual Host\nv1\n\n\nName\nuser1x\n\n\nPattern\n^userid:[1].*\n\n\nApply to\nqueues\n\n\nPriority\n0\n\n\nDefinition\nmax-length = 50\n\n\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306buser2x\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nVirtual Host\nv1\n\n\nName\nuser2x\n\n\nPattern\n^userid:[2].*\n\n\nApply to\nqueues\n\n\nPriority\n0\n\n\nDefinition\nmax-length = 100\n\n\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306binfo\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nVirtual Host\nv2\n\n\nName\ninfo\n\n\nPattern\n^userid:.*.info\n\n\nApply to\nqueues\n\n\nPriority\n0\n\n\nDefinition\nmessage-ttl = 1800000\n\n\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306bwarn\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nVirtual Host\nv2\n\n\nName\nwarn\n\n\nPattern\n^userid:.*.warn\n\n\nApply to\nqueues\n\n\nPriority\n0\n\n\nDefinition\nmessage-ttl = 3600000\n\n\n\n\u767b\u9332\u5f8c\u306f\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u30ad\u30e5\u30fc\u306e\u4e00\u89a7\u3067\u3082\u9069\u7528\u3055\u308c\u308b\u30dd\u30ea\u30b7\u30fc\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\nproperties\n\u30dd\u30ea\u30b7\u30fc\u306b\u8a2d\u5b9a\u3067\u304d\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\nPattern\n\u30dd\u30ea\u30b7\u30fc\u3092\u9069\u7528\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u540d\u3092\u6b63\u898f\u8868\u73fe\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\".*\"\u3068\u3059\u308b\u3068\u5168\u3066\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u9069\u7528\u3055\u308c\u307e\u3059\u3002\nApply to\n\u9069\u7528\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u3092\u30ea\u30b9\u30c8\u304b\u3089\u9078\u629e\u3057\u307e\u3059\u3002\n\nExchanges and queues\nExchanges\nQueues\n\nPriority\n\u30dd\u30ea\u30b7\u30fc\u306e\u512a\u5148\u5ea6\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30d1\u30bf\u30fc\u30f3\u306b\u30de\u30c3\u30c1\u3059\u308b\u30dd\u30ea\u30b7\u30fc\u304c\u8907\u6570\u3042\u3063\u305f\u5834\u5408\u3001\u512a\u5148\u5ea6\u306e\u9ad8\u3044\u30dd\u30ea\u30b7\u30fc\u304c\u9069\u7528\u3055\u308c\u307e\u3059\u3002\u5927\u304d\u3044\u5024\u304c\u3088\u308a\u512a\u5148\u5ea6\u304c\u9ad8\u3044\u3068\u5224\u65ad\u3055\u308c\u307e\u3059\u3002\nDefinition\n\u30dd\u30ea\u30b7\u30fc\u306e\u5185\u5bb9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nHA\n\u30ad\u30e5\u30fc\u306e\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u306b\u95a2\u3059\u308b\u30dd\u30ea\u30b7\u30fc\u3067\u3059\u3002\n\n\n\narguments\ntype\ndescription\n\n\n\n\nha-mode\nString\n\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u306e\u30e2\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\nha-params\nString\n\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u306e\u30e2\u30fc\u30c9\u306b\u5bfe\u3059\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\nha-sync-mode\nString\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u540c\u671f\u30e2\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n\nFederation\n\n\n\narguments\ntype\ndescription\n\n\n\n\nfederation-upstream-set\nString\nA string; only if the federation plugin is enabled. Chooses the name of a set of upstreams to use with federation, or \"all\" to use all upstreams. Incompatible with federation-upstream.\n\n\nfederation-upstream\nString\nA string; only if the federation plugin is enabled. Chooses a specific upstream set to use for federation. Incompatible with federation-upstream-set.\n\n\n\nQueues\n\u30ad\u30e5\u30fc\u306b\u95a2\u3059\u308b\u30dd\u30ea\u30b7\u30fc\u3067\u3059\u3002\n\n\n\narguments\ntype\ndescription\n\n\n\n\nmessage-ttl\nNumber\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u751f\u5b58\u671f\u9593(\u30df\u30ea\u79d2)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\nexpires\nNumber\n\u30ad\u30e5\u30fc\u306e\u6709\u52b9\u671f\u9593(\u30df\u30ea\u79d2)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u6307\u5b9a\u3057\u305f\u6642\u9593\u4f7f\u7528\u3055\u308c\u306a\u304b\u3063\u305f\u5834\u5408\u30ad\u30e5\u30fc\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\n\nmax-length\nNumber\n\u30ad\u30e5\u30fc\u306b\u4fdd\u5b58\u3059\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u6700\u5927\u6570\uff08\u3053\u308c\u3092\u8d85\u3048\u308b\u3068\u53e4\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u304b\u3089\u524a\u9664)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\nmax-length-bytes\nNumber\n\u30ad\u30e5\u30fc\u306b\u4fdd\u5b58\u3059\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u6700\u5927\u5408\u8a08\u30b5\u30a4\u30ba\u6570 (\u3053\u308c\u3092\u8d85\u3048\u308b\u3068\u53e4\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u304b\u3089\u524a\u9664)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\ndead-letter-exchange\nString\ndead-letter\u306b\u306a\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u8ee2\u9001\u5148\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\ndead-letter-routing-key\nString\ndead-letter\u306b\u306a\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u4ed8\u3051\u308b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n\nExchanges\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306b\u95a2\u3059\u308b\u30dd\u30ea\u30b7\u30fc\u3067\u3059\u3002\n\n\n\narguments\ntype\ndescription\n\n\n\n\nalternate-exchange\nString\n\u4ee3\u66ff\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u540d\u524d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n\n\nHighly Available Queues\n\u30af\u30e9\u30b9\u30bf\u30fc\u69cb\u6210\u306eRabbitMQ\u3067\u306f\u30ad\u30e5\u30fc\u3092\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u9006\u306b\u30af\u30e9\u30b9\u30bf\u30fc\u69cb\u6210\u306b\u3057\u3066\u3082\u521d\u671f\u72b6\u614b\u3067\u306f\u30ad\u30e5\u30fc\u306f\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u3055\u308c\u307e\u305b\u3093\u3002\n\u30ad\u30e5\u30fc\u306e\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u306f\u30dd\u30ea\u30b7\u30fc\u306e\u8a2d\u5b9a\u306b\u3088\u3063\u3066\u884c\u3044\u3001\u30dd\u30ea\u30b7\u30fc\u306e\u8a2d\u5b9a\u4ee5\u964d\u306b\u53d7\u4fe1\u3057\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u304b\u3089\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u304c\u884c\u308f\u308c\u307e\u3059\u3002\n\n\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u7528\u306e\u30dd\u30ea\u30b7\u30fc\u306e\u4f5c\u6210\nrabbitmqct\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\n\nSynopsis\nset_policy [-p vhostpath] [--priority priority] [--apply-to apply-to] {name} {pattern} {definition}\n\n\ndefinition\u306bjson\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u306e\u65b9\u6cd5\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\nha-mode\u306b\u30ad\u30e5\u30fc\u306e\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u306e\u65b9\u6cd5\u3092\u4e0b\u8a18\u306e3\u7a2e\u985e\u304b\u3089\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n\nha-mode\ndescription\n\n\n\n\nall\n\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u3059\u3079\u3066\u306e\u30ce\u30fc\u30c9\u3067\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u3092\u884c\u3044\u307e\u3059\u3002\n\n\nexactly\n\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u6307\u5b9a\u6570\u306e\u30ce\u30fc\u30c9\u3067\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u3092\u884c\u3044\u307e\u3059\u3002\n\n\nnodes\n\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u6307\u540d\u3057\u305f\u30ce\u30fc\u30c9\u3067\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u3092\u884c\u3044\u307e\u3059\u3002\n\n\n\nha-sync-mode\u306b\u540c\u671f\u30e2\u30fc\u30c9\u3092\u4e0b\u8a18\u306e2\u7a2e\u985e\u304b\u3089\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n\nha-sync-mode\ndescription\n\n\n\n\nmanual\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u3059\u3002\u975e\u540c\u671f\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u3001\u624b\u52d5\u3067\u540c\u671f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\nautomatic\n\u975e\u540c\u671f\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u3001\u81ea\u52d5\u3067\u540c\u671f\u3092\u884c\u3044\u307e\u3059\u3002\n\n\n\n\u624b\u52d5\u3067\u540c\u671f\u3059\u308b\u306b\u306frabbitmqctl\u30b3\u30de\u30f3\u30c9\u304bmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\nrabbitmqctl\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306fsync_queue\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\nsync_queue\n> rabbitmqctl.bat -n rabbit_node1@localhost -p v2 sync_queue userid:2002\nSynchronising queue 'userid:2002' in vhost 'v2' ...\n\n\n\nRabbitMQ: Why is the default ha-sync-mode manual?\n\nall\u306f\u3001\u3059\u3079\u3066\u306e\u30ce\u30fc\u30c9\u3067\u30df\u30e9\u30fc\u3057\u307e\u3059\u3002\n\nall\n{\"ha-mode\":\"all\", \"ha-sync-mode\": \"automatic\"}\n\n\nexactly\u306f\u3001ha-params\u3067\u6307\u5b9a\u3057\u305f\u6570\u306e\u30ce\u30fc\u30c9\u3067\u30df\u30e9\u30fc\u3057\u307e\u3059\u3002\n\nexactly\n{\"ha-mode\":\"exactly\", \"ha-params\":2, \"ha-sync-mode\":\"automatic\"}\n\n\nnodes\u306f\u3001ha-params\u3067\u6307\u540d\u3057\u305f\u30ce\u30fc\u30c9\u3067\u30df\u30e9\u30fc\u3057\u307e\u3059\u3002\n\nnodes\n{\"ha-mode\":\"nodes\", \"ha-params\":[\"rabbit_node1@localhost\",\"rabbit_node2@localhost\"]}\n\n\n\u3053\u306e\u4f8b\u3067\u306f\u3001v2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306euserid:1000.info\u3001userid:1001.info\u30ad\u30e5\u30fc\u3092\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u30ad\u30e5\u30fc\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u305f\u3060\u3057\u3001\u3059\u3067\u306b\u30dd\u30ea\u30b7\u30fc\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u30fc\u3092\u9ad8\u304f\u3057\u3066\u512a\u5148\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nset_policy\n> rabbitmqctl.bat -n rabbit_node1@localhost -p v2 set_policy --priority 1 --apply-to queues \"ha_info\" \"^userid:.*\\.info\" \"{\"\"ha-mode\"\":\"\"all\"\", \"\"ha-sync-mode\"\":\"\"automatic\"\", \"\"message-ttl\"\":1800000}\"\nSetting policy \"ha_info\" for pattern \"^userid:.*\\\\.info\" to \"{\\\"ha-mode\\\":\\\"all\\\", \\\"ha-sync-mode\\\":\\\"automatic\\\", \\\"message-ttl\\\":1800000}\" with priority \"1\" ...\n\n\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\n\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u7528\u306e\u30dd\u30ea\u30b7\u30fc\u3082\u901a\u5e38\u306e\u30dd\u30ea\u30b7\u30fc\u3068\u540c\u69d8\u306e\u65b9\u6cd5\u3067\u767b\u9332\u3057\u307e\u3059\u3002\n\n\u540c\u3058\u30d1\u30bf\u30fc\u30f3\u306e\u30dd\u30ea\u30b7\u30fc\u304c2\u3064\u4f5c\u6210\u3055\u308c\u307e\u3059\u304c\u3001Priority\u306e\u9ad8\u3044\u65b9(ha_info)\u304c\u9069\u7528\u3055\u308c\u307e\u3059\u3002\n\n\u30ad\u30e5\u30fc\u306e\u4e00\u89a7\u3067\u65b0\u3057\u3044\u30dd\u30ea\u30b7\u30fc\u304c\u9069\u7528\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3053\u306e\u4f8b\u3067\u306f\u30ce\u30fc\u30c9\u540d\u306e\u53f3\u5074\u306b\u3042\u308b\"+1\"\u304c\u30df\u30e9\u30fc\u3057\u3066\u3044\u308b\u30ce\u30fc\u30c9\u306e\u6570\u3092\u8868\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n\u30e1\u30c3\u30bb\u30fc\u30b8 (message)\n\u901a\u5e38\u306fclient\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3088\u308a\u9001\u4fe1\u3055\u308c\u308b\u30c7\u30fc\u30bf\u3067\u3059\u3002\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u4fe1\u3059\u308b\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u304b\u3089\u3082\u691c\u8a3c\u76ee\u7684\u306e\u305f\u3081\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u4fe1\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\u3053\u3053\u3067\u3001\u3053\u308c\u307e\u3067\u306b\u767b\u9332\u3057\u305f\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3092\u4f7f\u3063\u3066\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u914d\u4fe1\u30c6\u30b9\u30c8\u3092\u884c\u3063\u3066\u307f\u307e\u3059\u3002\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Exchanges]\u2192\u30ea\u30b9\u30c8\u4e2d\u304b\u3089\u300cnotice.direct\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u300cPublish message\u300d\u6b04\u304b\u3089\u4e0b\u8a18\u306e\u5185\u5bb9\u3092\u5165\u529b\u3057\u3066\u300cPublish message\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u7dd1\u8272\u306e\u30c0\u30a4\u30a2\u30ed\u30b0\u306b\"Message published.\"\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3078\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u9001\u4fe1\u306f\u6210\u529f\u3067\u3059\u3002\n\n\n\nfield\nvalue\n\n\n\n\nRouting key\n1000\n\n\nDelivery mode\n2 - Persistent\n\n\nHeaders\n(nothing)\n\n\nProperties\n(nothing)\n\n\npayload\nuserid:1000\u3078\u30c6\u30b9\u30c8\u914d\u4fe1\n\n\n\n\u6b21\u306b\u3001\u30ad\u30e5\u30fc\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Queues]\u2192\u30ea\u30b9\u30c8\u4e2d\u304b\u3089\u300cuserid:1000\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u300cDetails\u300d\u6b04\u306e\"Messages\"\u304c\u4e0b\u56f3\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308c\u3070\u3001\u30ad\u30e5\u30fc\u307e\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u307e\u305f\u300cGet messages\u300d\u6b04\u3067\u53d7\u4fe1\u3057\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nRequeue\u3092\u300cNo\u300d\u306b\u5909\u3048\u3066\u300cGet Message(s)\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\nproperties\n\u30e1\u30c3\u30bb\u30fc\u30b8\u9001\u4fe1\u6642\u306b\u8a2d\u5b9a\u3067\u304d\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\nDelivery mode\n\u914d\u4fe1\u30e2\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n1 Non-persistent : \u30e1\u30c3\u30bb\u30fc\u30b8\u3092disk\u306b\u4fdd\u5b58\u3057\u307e\u305b\u3093\u3002RabbitMQ\u30b5\u30fc\u30d0\u30fc\u3092\u505c\u6b62\u3057\u305f\u308a\u30af\u30e9\u30c3\u30b7\u30e5\u3057\u305f\u5834\u5408\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u5931\u308f\u308c\u307e\u3059\u3002\n2 Persistent : \u30ad\u30e5\u30fc\u304cDurability\u306e\u3068\u304d\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092disk\u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\nHeaders\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u30d8\u30c3\u30c0\u30fc\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u30d8\u30c3\u30c0\u30fc\u306b\u306f\u4efb\u610f\u306e\u540d\u524d\u3068\u5024\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306eheaders\u306f\u3053\u306e\u5024\u3092\u898b\u3066\u914d\u9001\u5148\u306e\u30ad\u30e5\u30fc\u3092\u9078\u629e\u3057\u307e\u3059\u3002\nProperties\nYou can set other message properties here (delivery mode and headers are pulled out as the most common cases).\nInvalid properties will be ignored. Valid properties are:\n\u8a2d\u5b9a\u3067\u304d\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u4e00\u89a7\u3067\u3059\u3002\n\ncontent_type\ncontent_encoding\npriority\ncorrelation_id\nreply_to\nexpiration\nmessage_id\ntimestamp\ntype\nuser_id\napp_id\ncluster_id\n\nPayload\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u672c\u4f53\u3067\u3059\u3002\n\nPriority Queue Support\n\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u30ad\u30e5\u30fc\u304c\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n\nRabbitMQ has priority queue implementation in the core as of version 3.5.0.\n\n\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u30ad\u30e5\u30fc\u306fx-max-priority\u306b\u6700\u5927\u512a\u5148\u5ea6\u3092\u6307\u5b9a\u3057\u3066\u767b\u9332\u3057\u307e\u3059\u3002\n\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u3092\u4ed8\u3051\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u30fc\u30ad\u30e5\u30fc\u3078\u914d\u9001\u3059\u308b\u3068\u30b3\u30f3\u30b7\u30e5\u30fc\u30de\u30fc\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u30fc\u306e\u9ad8\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u304b\u3089\u9806\u306b\u53d7\u4fe1\u3057\u307e\u3059\u3002\n\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u306f\u6570\u5024\u306e\u5927\u304d\u3044\u65b9\u304c\u3088\u308a\u512a\u5148\u5ea6\u304c\u9ad8\u3044\u3068\u5224\u65ad\u3055\u308c\u307e\u3059\u3002\u6307\u5b9a\u3067\u304d\u308b\u5024\u306e\u7bc4\u56f2\u306f0\uff5e9\u3067\u3059\u3002\n\u306a\u304a\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u304c\u6700\u5927\u512a\u5148\u5ea6\u3092\u8d85\u3048\u3066\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u3066\u3082\u62d2\u5426\u3055\u308c\u308b\u3053\u3068\u306f\u7121\u304f\u6700\u5927\u5024\u3068\u307f\u306a\u3055\u308c\u307e\u3059\u3002\uff08\u305f\u3068\u3048\u3070\u3001\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u30fc\u3092100\u306b\u3057\u3066\u3082\u6700\u5927\u5024\u306e9\u3068\u3057\u3066\u6271\u308f\u308c\u307e\u3059\u3002\uff09\n\u4e0b\u8868\u306f\u3001\u6700\u5927\u512a\u5148\u5ea6\u30925\u306b\u8a2d\u5b9a\u3057\u305f\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u30fc\u30ad\u30e5\u30fc\u3078\u3001\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u30fc\u30921\uff5e5\u306e\u7bc4\u56f2\u3067\u8a2d\u5b9a\u3057\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u9001\u4fe1\u9806\u3068\u53d7\u4fe1\u9806\u306e\u95a2\u4fc2\u3067\u3059\u3002\n\n\n\n\u9001\u4fe1\u9806\n\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\n\u53d7\u4fe1\u9806\n\n\n\n\n1\n5\n1\n\n\n2\n4\n5\n\n\n3\n3\n7\n\n\n4\n5\n2\n\n\n5\n2\n8\n\n\n6\n1\n10\n\n\n7\n5\n3\n\n\n8\n6\n4\n\n\n9\n2\n9\n\n\n10\n4\n6\n\n\n\n\nPriority Queue Support\n\n\n3. rabbitmqctl\u30b3\u30de\u30f3\u30c9\u306e\u30de\u30cb\u30e5\u30a2\u30eb\n\nSynopsis\nrabbitmqctl [-n node] [-q] {command} [command options...]\n\n\n\u53c2\u8003\n\nrabbitmqctl(1) manual page\n\n\n4. Tip`s\n\u3061\u3087\u3063\u3068\u4fbf\u5229\u306a\u5c0f\u6280\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\nerl.exe\u30d7\u30ed\u30bb\u30b9\u306e\u5b9f\u884c\u5f15\u6570\u306e\u78ba\u8a8d\nRabbitMQ\u30b5\u30fc\u30d0\u30fc\u3092\u5b9f\u884c\u3059\u308b\u969b\u306e\u5f15\u6570\u3092\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\n> wmic.exe process where \"name=\\\"erl.exe\\\"\" get name,commandline\n\n\nFile descriptors\u6b04\u306e\u8868\u793a\u3092\u6709\u52b9\u306b\u3059\u308b\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u3067File descriptors\u6b04\u306e\u8868\u793a\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u5225\u9014Microsoft\u3088\u308aHandle.exe\u3092\u53d6\u5f97\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u53d6\u5f97\u3057\u305fHandle.exe\u306fPath\u306e\u901a\u3063\u305f\u5834\u6240\u3067\u3042\u308c\u3070\u3069\u3053\u306b\u7f6e\u3044\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\u3002\n# \u6982\u8981\n\n1\u53f0\u306eWindows7\u4e0a\u306b2\u30ce\u30fc\u30c9\u304b\u3089\u6210\u308bRabbitMQ\u306e\u30af\u30e9\u30b9\u30bf\u30fc\u3092\u69cb\u7bc9\u3059\u308b\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\u307e\u305f\u3001\u7c21\u5358\u3067\u3059\u304cRabbitMQ\u306e\u7279\u5fb4\u3084rabbitmqctl\u30b3\u30de\u30f3\u30c9\u306b\u3088\u308bRabbitMQ\u30b5\u30fc\u30d0\u30fc\u306e\u64cd\u4f5c\u65b9\u6cd5\u306a\u3069\u3082\u8aac\u660e\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u8a18\u4e8b\u306e\u5185\u5bb9\u306f\u4e0b\u8a18\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u3092\u884c\u3044\u307e\u3057\u305f\u3002\n\n* Windows7 (64bit)\n* RabbitMQ 3.5.3\n* Erlang/OTP 17.5\n\n## 1. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u521d\u671f\u8a2d\u5b9a\n\n\u672c\u683c\u7684\u306a\u8aac\u660e\u306fRabbitMQ\u306e[Installing on Windows (manual)](https://www.rabbitmq.com/install-windows-manual.html)\u30da\u30fc\u30b8\u306b\u3042\u308a\u307e\u3059\u3002\n\n### Erlnag\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nRabbitMQ\u306e\u5b9f\u884c\u306b\u306fErlang\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u4e8b\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059\u3002\n\n[\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30da\u30fc\u30b8] (http://www.erlang.org/download.html)\u3088\u308a\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u30fc\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u4eca\u56de\u4f7f\u7528\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306f`otp_win64_17.5.exe`\u3067\u3059\u3002\n\n#### \u521d\u671f\u8a2d\u5b9a\n\n\u74b0\u5883\u5909\u6570\u306e`ERLANG_HOME`\u306berlang\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u74b0\u5883\u5909\u6570\u306e`path`\u306b`%ERLANG_HOME%\\bin`\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n#### \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306e\u78ba\u8a8d\n\n\u5ff5\u306e\u305f\u3081\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u304b\u3089erl.exe\u3092\u5b9f\u884c\u3057\u3066shell\u304c\u8d77\u52d5\u3059\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n### RabbitMQ\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n1\u53f0\u306ePC\u306bRabbitMQ\u30922\u30ce\u30fc\u30c9\u8d77\u52d5\u3057\u30af\u30e9\u30b9\u30bf\u30fc\u3092\u69cb\u6210\u3057\u307e\u3059\u3002\n\u69cb\u6210\u306f\u4e0b\u8868\u306e\u901a\u308a\u3067\u3059\u3002\n\n|node name              |port |port(ssl)|port(management)|\n|:----------------------|:----|:--------|:---------------|\n|rabbit_node1@localhost |5672 |5671     |15672           |\n|rabbit_node2@localhost |5674 |5673     |15674           |\n\n[\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30da\u30fc\u30b8] (http://www.rabbitmq.com/install-windows-manual.html)\u3088\u308a\u3001\u30a2\u30fc\u30ab\u30a4\u30d6\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\u4eca\u56de\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306f`rabbitmq-server-windows-3.5.3.zip`\u3067\u3059\u3002\n\n\u30a2\u30fc\u30ab\u30a4\u30d6\u30d5\u30a1\u30a4\u30eb\u3092\u9069\u5f53\u306a\u5834\u6240\u3078\u89e3\u51cd\u3057\u307e\u3059\u3002\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u4e0b\u8a18\u306e\u5834\u6240\u3078\u6e96\u5099\u3057\u307e\u3057\u305f\u3002\n**node1**\n`C:\\rabbitmq-3.5.3\\rabbitmq_server-3.5.3_node1`\n**node2**\n`C:\\rabbitmq-3.5.3\\rabbitmq_server-3.5.3_node2`\n\n#### \u521d\u671f\u8a2d\u5b9a\n\nbase\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n**node1\u7528**\n`C:\\rabbitmq-3.5.3\\node1`\n**node2\u7528**\n`C:\\rabbitmq-3.5.3\\node2`\n\ndb\u3001log\u30d5\u30a1\u30a4\u30eb\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n**node1\u7528**\n`C:\\rabbitmq-3.5.3\\node1\\db`\n`C:\\rabbitmq-3.5.3\\node1\\log`\n**node2\u7528**\n`C:\\rabbitmq-3.5.3\\node2\\db`\n`C:\\rabbitmq-3.5.3\\node2\\log`\n\nconf\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3053\u308c\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n`C:\\rabbitmq-3.5.3\\rabbitmq_server-3.5.3_node1\\etc\\rabbitmq.config.example`\u30d5\u30a1\u30a4\u30eb\u3092`rabbitmq.config`\u3078\u30ea\u30cd\u30fc\u30e0\u3057\u3066\u4e0b\u8a18\u306e\u5834\u6240\u3078\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n**node1\u7528**\n`C:\\rabbitmq-3.5.3\\node1\\rabbitmq.config`\n**node2\u7528**\n`C:\\rabbitmq-3.5.3\\node2\\rabbitmq.config`\n\n\u6b21\u306brabbitmq.config\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\u4e0b\u8a18\u306e\u5185\u5bb9\u306f\u5909\u66f4\u70b9\u3060\u3051\u629c\u7c8b\u3057\u305f\u3082\u306e\u3067\u3059\u3002\uff08\u30dd\u30fc\u30c8\u3084\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u306e\u51fa\u529b\u5148\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\uff09\n\n**node1\u7528**\n\n```text:rabbitmq.config\n{rabbit,\n[\n  {tcp_listeners, [5672]},\n  {ssl_listeners, [5671]},\n]},\n\n{rabbitmq_management,\n[\n  {http_log_dir, \"C:\\rabbitmq-3.5.3\\node1\\log\\access.log\"},\n  {listener, [{port, 15672},\n              {ip, \"127.0.0.1\"}]\n  },\n  {rates_mode, basic}\n]},\n```\n\n**node2\u7528**\n\n```text:rabbitmq.config\n{rabbit,\n[\n  {tcp_listeners, [5674]},\n  {ssl_listeners, [5673]},\n]},\n\n{rabbitmq_management,\n[\n  {http_log_dir, \"C:\\rabbitmq-3.5.3\\node2\\log\\access.log\"},\n  {listener, [{port, 15674},\n              {ip, \"127.0.0.1\"}]\n  },\n  {rates_mode, basic}\n]},\n```\n\n\u6b21\u306bbat\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\nbat\u30d5\u30a1\u30a4\u30eb\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306esbin\u4e0b\u306b\u3042\u308a\u307e\u3059\u3002\n\n**node1\u7528**\nrabbitmqctl.bat\n\n```diff:rabbitmqctl.bat\nsetlocal enabledelayedexpansion\n\n+ set RABBITMQ_BASE=C:/rabbitmq-3.5.3/node1\n+ set RABBITMQ_NODENAME=rabbit_node1@localhost\n\nif \"!RABBITMQ_BASE!\"==\"\" (\n```\n\nrabbitmq-server.bat\n\n```diff:rabbitmq-server.bat\nsetlocal enabledelayedexpansion\n\n+ set RABBITMQ_BASE=C:/rabbitmq-3.5.3/node1\n+ set RABBITMQ_NODENAME=rabbit_node1@localhost\n+ set RABBITMQ_NODE_PORT=5672\n\nif \"!RABBITMQ_USE_LONGNAME!\"==\"\" (\n```\n\nrabbitmq-plugins.bat\n\n```diff:rabbitmq-plugins.bat\nsetlocal enabledelayedexpansion\n\n+ set RABBITMQ_BASE=C:/rabbitmq-3.5.3/node1\n+ set RABBITMQ_NODENAME=rabbit_node1@localhost\n\nif \"!RABBITMQ_SERVICENAME!\"==\"\" (\n```\n\n**node2\u7528**\nrabbitmqctl.bat\n\n```diff:rabbitmqctl.bat\nsetlocal enabledelayedexpansion\n\n+ set RABBITMQ_BASE=C:/rabbitmq-3.5.3/node2\n+ set RABBITMQ_NODENAME=rabbit_node2@localhost\n\nif \"!RABBITMQ_BASE!\"==\"\" (\n```\n\nrabbitmq-server.bat\n\n```diff:rabbitmq-server.bat\nsetlocal enabledelayedexpansion\n\n+ set RABBITMQ_BASE=C:/rabbitmq-3.5.3/node2\n+ set RABBITMQ_NODENAME=rabbit_node2@localhost\n+ set RABBITMQ_NODE_PORT=5674\n\nif \"!RABBITMQ_USE_LONGNAME!\"==\"\" (\n```\n\nrabbitmq-plugins.bat\n\n```diff:rabbitmq-plugins.bat\nsetlocal enabledelayedexpansion\n\n+ set RABBITMQ_BASE=C:/rabbitmq-3.5.3/node2\n+ set RABBITMQ_NODENAME=rabbit_node2@localhost\n\nif \"!RABBITMQ_SERVICENAME!\"==\"\" (\n```\n\n#### \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306e\u78ba\u8a8d\n\nnode1\u3001node2\u3067RabbitMQ\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```bat\n> rabbitmq-server.bat -detached\n```\n\n\u8d77\u52d5\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bat\n> rabbitmqctl.bat status\n```\n\n\u307e\u305f\u3001RabbitMQ\u30b5\u30fc\u30d0\u30fc\u306e\u505c\u6b62\u306f\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3067\u884c\u3044\u307e\u3059\u3002\n\n```bat\n> rabbitmqctl.bat stop\n```\n\n#### rabbitmq_management\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u6709\u52b9\u5316\n\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u306fRabbitMQ\u30b5\u30fc\u30d0\u30fc\u306e\u76e3\u8996\u3084\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3001\u30ad\u30e5\u30fc\u3001\u30e6\u30fc\u30b6\u30fc\u306a\u3069\u3092\u64cd\u4f5c\u3067\u304d\u308b\u30d6\u30e9\u30a6\u30b6\u30d9\u30fc\u30b9\u306e\u7ba1\u7406\u6a5f\u80fd\u3067\u3059\u3002\n\nnode1\u3001node2\u3067\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u6709\u52b9\u5316\u3057\u307e\u3059\u3002\n\n**node1**\n\n```bat:\n> rabbitmq-plugins.bat enable rabbitmq_management \nThe following plugins have been enabled:\n  mochiweb\n  webmachine\n  rabbitmq_web_dispatch\n  amqp_client\n  rabbitmq_management_agent\n  rabbitmq_management\n\nApplying plugin configuration to rabbit_node1@localhost... started 6 plugins.\n```\n\n**node2**\n\n```bat\n> rabbitmq-plugins.bat enable rabbitmq_management \nThe following plugins have been enabled:\n  mochiweb\n  webmachine\n  rabbitmq_web_dispatch\n  amqp_client\n  rabbitmq_management_agent\n  rabbitmq_management\n\nApplying plugin configuration to rabbit_node2@localhost... started 6 plugins.\n```\n\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u4e0b\u8a18\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30e6\u30fc\u30b6\u30fc/\u30d1\u30b9\u30ef\u30fc\u30c9\u306f`guest/guest`\u3067\u3059\u3002\n\n**node1**\nhttp://localhost:15672/\n\n**node2**\nhttp://localhost:15674/\n\n\n#### management\u30d7\u30e9\u30b0\u30a4\u30f3\u7528\u306e\u7ba1\u7406\u8005\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210\n\n\u6700\u521d\u304b\u3089\u7528\u610f\u3055\u308c\u3066\u3044\u308b`guest`\u30e6\u30fc\u30b6\u30fc\u3092\u524a\u9664\u3057\u3001\u305d\u306e\u4ee3\u308f\u308a\u306e\u7ba1\u7406\u8005\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210\u306fmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u3068rabbitmqctl\u30b3\u30de\u30f3\u30c9\u304b\u3089\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u4e0b\u8a18\u306e\u60c5\u5831\u3067\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\n|name  |password |tag           |vhost|\n|:-----|:--------|:-------------|:----|\n|admin |admin    |administrator |/    |\n\n\u30bf\u30b0\u3067\u30ed\u30fc\u30eb\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30bf\u30b0\u306b\u4f7f\u7528\u3067\u304d\u308b\u540d\u524d\u306f\u4e0b\u8868\u306e\u901a\u308a\u3067\u3059\u3002\n\n|name            |description                             |\n|:---------------|:---------------------------------------|\n|`(none)`        |management\u30d7\u30e9\u30b0\u30a4\u30f3\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093\u3002 |\n|`management`    | |\n|`policymaker`   |management+ |\n|`monitoring`    |management+ |\n|`administrator` |policymaker+, management+|\n\n**rabbitmqctl\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059**\n\n```bat\n> rabbitmqctl.bat -n rabbit_node1@localhost add_user admin admin\nCreating user \"admin\" ...\n\n> rabbitmqctl.bat -n rabbit_node1@localhost set_user_tags admin administrator\nSetting tags for user \"admin\" to [administrator] ...\n\n> rabbitmqctl.bat -n rabbit_node1@localhost set_permissions -p / admin \".*\" \".*\" \".*\"\nSetting permissions for user \"admin\" in vhost \"/\" ...\n```\n\n\u4e0a\u8a18\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8(`/`)\u306b\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u5897\u3084\u3057\u305f\u5834\u5408\u306f\u3001\u305d\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306b\u5bfe\u3057\u3066\u3082\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u4ed8\u4e0e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\uff08\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u306a\u3044\u3068management\u30d7\u30e9\u30b0\u30a4\u30f3\u4e0a\u3067\u64cd\u4f5c\u304c\u3067\u304d\u307e\u305b\u3093\u3002\uff09\n\n**guest\u30e6\u30fc\u30b6\u30fc\u3092\u524a\u9664\u3057\u307e\u3059**\n\n```bat:example\n> rabbitmqctl.bat -n rabbit_node1@localhost delete_user guest\nDeleting user \"guest\" ...\n```\n\n\u53c2\u8003\n\n> [Management Plugin] (https://www.rabbitmq.com/management.html)\n\n\n### \u30af\u30e9\u30b9\u30bf\u30fc\u306e\u69cb\u7bc9\n\n\u30af\u30e9\u30b9\u30bf\u30fc\u306e\u69cb\u7bc9\u306fnode1\u3001node2\u3092\u8d77\u52d5\u3057\u305f\u72b6\u614b\u3067\u884c\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306fnode2\u3092node1\u3078\u53c2\u52a0\u3055\u305b\u307e\u3059\u3002(node1\u304c\u30de\u30b9\u30bf\u30fc\u3001node2\u304c\u30b9\u30ec\u30fc\u30d6\u306b\u306a\u308a\u307e\u3059\u3002\uff09\n\n**\u69cb\u7bc9\u524d\u306e\u30af\u30e9\u30b9\u30bf\u30fc\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u307e\u3059**\n\n```bash\n> rabbitmqctl.bat -n rabbit_node1@localhost cluster_status\nCluster status of node rabbit_node1@localhost ...\n[{nodes,[{disc,[rabbit_node1@localhost]}]},\n {running_nodes,[rabbit_node1@localhost]},\n {cluster_name,<<\"rabbit_node1@localhost\">>},\n {partitions,[]}]\n```\n\n**\u30af\u30e9\u30b9\u30bf\u30fc\u3092\u69cb\u7bc9\u3057\u307e\u3059**\n\n```bash\n> rabbitmqctl.bat -n rabbit_node2@localhost stop_app\nStopping node rabbit_node2@localhost ...\n\n> rabbitmqctl.bat -n rabbit_node2@localhost join_cluster rabbit_node1@localhost\nClustering node rabbit_node2@localhost with rabbit_node1@localhost ...\n\n> rabbitmqctl.bat -n rabbit_node2@localhost start_app\nStarting node rabbit_node2@localhost ...\n```\n\n**\u69cb\u7bc9\u5f8c\u306e\u30af\u30e9\u30b9\u30bf\u30fc\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u307e\u3059**\n\n```bash\n> rabbitmqctl.bat -n rabbit_node1@localhost cluster_status\nCluster status of node rabbit_node2@localhost ...\n[{nodes,[{disc,[rabbit_node1@localhost,rabbit_node2@localhost]}]},\n {running_nodes,[rabbit_node1@localhost,rabbit_node2@localhost]},\n {cluster_name,<<\"rabbit_node1@localhost\">>},\n {partitions,[]}]\n```\n\n#### \u30af\u30e9\u30b9\u30bf\u30fc\u306e\u89e3\u9664\u65b9\u6cd5\n\n**\u4e00\u6642\u7684\u306b\u30af\u30e9\u30b9\u30bf\u30fc\u304b\u3089\u5916\u3059\u65b9\u6cd5**\n\nforget_cluster_node\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u30af\u30e9\u30b9\u30bf\u30fc\u3078\u53c2\u52a0\u3055\u305b\u308b\u306b\u306f\u3082\u3046\u4e00\u5ea6join_cluster\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```bat\n> rabbitmqctl.bat -n rabbit_node2@localhost stop_app\nStopping node rabbit_node2@localhost ...\n\n> rabbitmqctl.bat -n rabbit_node1@localhost forget_cluster_node rabbit_node2@localhost\nResetting node rabbit_node2@localhost from cluster ...\n```\n\n**\u30af\u30e9\u30b9\u30bf\u30fc\u304b\u3089\u5916\u3059\u65b9\u6cd5**\n\n```bat:example\n> rabbitmqctl.bat -n rabbit_node2@localhost stop_app\nStopping node rabbit_node2@localhost ...\n\n> rabbitmqctl.bat -n rabbit_node2@localhost reset\nResetting node rabbit_node2@localhost ...\n\n> rabbitmqctl.bat -n rabbit_node2@localhost start_app\nStarting node rabbit_node2@localhost ...\n```\n\n\u53c2\u8003\n> [Clustering Guide] (https://www.rabbitmq.com/clustering.html)\n> [Highly Available Queues] (https://www.rabbitmq.com/ha.html)\n\n\n\n## 2. RabbitMQ\u306e\u69cb\u6210\n\n\u3053\u3053\u304b\u3089\u306f\u6b21\u306e\u30b7\u30ca\u30ea\u30aa\u306b\u57fa\u3065\u3044\u3066\u767b\u9332\u3092\u884c\u3044\u306a\u304c\u3089\u5404\u8981\u7d20\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n* \u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u30922\u3064(`v1`\u3001`v2`)\u767b\u9332\u3057\u307e\u3059\u3002\n* \u305d\u308c\u305e\u308c\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3078\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u30e6\u30fc\u30b6\u30fc(`v1_user`\u3001`v2_user`)\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\n**v1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8**\n\n* `v1`\u306b2\u3064\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8(`notice.direct`\u3001`broadcast.fanout`)\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n* `v1`\u306b3\u3064\u306e\u30ad\u30e5\u30fc(`userid:1000`\u3001`userid:1001`\u3001`userid:2002`)\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n* `notice.direct`\u304b\u3089\u30ad\u30e5\u30fc\u3078\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306f\u56fa\u6709\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u306b\u3088\u3063\u3066\u884c\u3044\u307e\u3059\u3002\n* `broadcast.fanout`\u304b\u3089\u306f\u3059\u3079\u3066\u306e\u30ad\u30e5\u30fc\u3078\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3057\u307e\u3059\u3002\n\n**v2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8**\n\n* `v2`\u306b1\u3064\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8(`notice.topic`)\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n* `v2`\u306b4\u3064\u306e\u30ad\u30e5\u30fc(`userid:1000.info`\u3001`userid:1000.warn`\u3001`userid:1001.info`\u3001`userid:1001.warn`)\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n* `notice.topic`\u304b\u3089\u30ad\u30e5\u30fc\u3078\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306f\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u306e\u90e8\u5206\u30de\u30c3\u30c1\u306b\u3088\u3063\u3066\u884c\u3044\u307e\u3059\u3002\n\n**\u30ad\u30e5\u30fc\u306e\u30dd\u30ea\u30b7\u30fc**\n\nv1\u306e\u30ad\u30e5\u30fc`userid:1000`\u3001`userid:1001`\u306b\u300cuser1x\u300d\u30dd\u30ea\u30b7\u30fc\u3092\u9069\u7528\u3057\u307e\u3059\u3002\nv1\u306e\u30ad\u30e5\u30fc`userid:2002`\u306b\u300cuser2x\u300d\u30dd\u30ea\u30b7\u30fc\u3092\u9069\u7528\u3057\u307e\u3059\u3002\nv2\u306e\u30ad\u30e5\u30fc`userid:1000.info`\u3001`userid:1001.info`\u306b\u300cinfo\u300d\u30dd\u30ea\u30b7\u30fc\u3092\u9069\u7528\u3057\u307e\u3059\u3002\nv2\u306e\u30ad\u30e5\u30fc`userid:1000.warn`\u3001`userid:1001.warn`\u306b\u300cwarn\u300d\u30dd\u30ea\u30b7\u30fc\u3092\u9069\u7528\u3057\u307e\u3059\u3002\n\n\u30dd\u30ea\u30b7\u30fc\u306e\u5b9a\u7fa9\u5185\u5bb9\n\n|name   |pattern          |definition          |description                       |\n|:------|:----------------|:-------------------|:---------------------------------|\n|user1x |^userid:[1].*    |max-length:50       |\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30ad\u30e5\u30fc\u306b\u6700\u592750\u4ef6\u307e\u3067\u4fdd\u6301 |\n|user2x |^userid:[2].*    |max-length:100      |\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30ad\u30e5\u30fc\u306b\u6700\u5927100\u4ef6\u307e\u3067\u4fdd\u6301|\n|info   |^userid:.*\\.info |message-ttl:1800000 |\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u751f\u5b58\u671f\u9593\u309230\u5206\u307e\u3067      |\n|warn   |^userid:.*\\.warn |message-ttl:3600000 |\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u751f\u5b58\u671f\u9593\u309260\u5206\u307e\u3067       |\n\n```text:\u4f8b\n [vhost]      [exchange]            [routing key]       [queue]\n----------+----------------------+------------------+-------------------\n   v1    ---> notice.direct     --->  '1000'       ---> userid:1000\n                                --->  '1001'       ---> userid:1001\n                                --->  '2002'       ---> userid:2002\n\n         ---> broadcast.fanout  ----------------------> userid:1000\n                                ----------------------> userid:1001\n                                ----------------------> userid:2002\n\n   v2    ---> notice.topic      --->   '*.info'    ---> userid:1000.info\n                                --->   '*.info'    ---> userid:1001.info\n                                --->   '*.warn'    ---> userid:1000.warn\n                                --->   '*.warn'    ---> userid:1001.warn\n```\n\n\u767b\u9332\u306e\u8aac\u660e\u306frabbitmqctl\u30b3\u30de\u30f3\u30c9\u3068management\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u4e21\u65b9\u3067\u884c\u3044\u307e\u3059\u304c\u3001\u4e00\u90e8\u306e\u767b\u9332\u306frabbitmqctl\u3067\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\u305d\u308c\u3092\u4e0b\u8868\u306b\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\n|\u64cd\u4f5c                       |rabbitmqctl\u30b3\u30de\u30f3\u30c9   |management\u30d7\u30e9\u30b0\u30a4\u30f3 |desc    |\n|:--------------------------|:-------------------:|:-------------------:|:------|\n|\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u4f5c\u6210       |\u53ef (`add_vhost`)     |\u53ef                   | |\n|\u30e6\u30fc\u30b6\u30fc\u306e\u767b\u9332              |\u53ef (`add_user`)      |\u53ef                   | |\n|\u30a2\u30af\u30bb\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb         |\u53ef (`set_permissions`)|\u53ef                   | |\n|\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u4f5c\u6210         |\u4e0d\u53ef                 |\u53ef                   |\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u5225 |\n|\u30ad\u30e5\u30fc\u306e\u4f5c\u6210                |\u4e0d\u53ef                  |\u53ef                  |\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u5225 |\n|\u30d0\u30a4\u30f3\u30c9                    |\u4e0d\u53ef                  |\u53ef                  | |\n|\u30dd\u30ea\u30b7\u30fc\u306e\u4f5c\u6210              |\u53ef (`set_policy`)     |\u53ef                  |\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u5225 |\n\n### \u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc (producer) / \u30b3\u30f3\u30b7\u30e5\u30fc\u30de\u30fc (consumer)\n\n* \u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u306f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u914d\u4fe1\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u914d\u4fe1\u3092\u30d6\u30ed\u30fc\u30ab\u30fc\u3078\u4f9d\u983c\u3057\u307e\u3059\u3002\n* \u30b3\u30f3\u30b7\u30e5\u30fc\u30de\u30fc\u306f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u4fe1\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30d6\u30ed\u30fc\u30ab\u30fc\u304b\u3089\u53d7\u3051\u53d6\u308a\u307e\u3059\u3002\n\n### \u30d6\u30ed\u30fc\u30ab\u30fc (broker)\n\nRabbitMQ\u30b5\u30fc\u30d0\u30fc\u306e\u3053\u3068\u3067\u3059\u3002\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u4e2d\u7d99\u3092\u62c5\u5f53\u3057\u307e\u3059\u3002\u30d6\u30ed\u30fc\u30ab\u30fc\u306f\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3001\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3001\u30ad\u30e5\u30fc\u3068\u3044\u3063\u305f\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304b\u3089\u69cb\u6210\u3055\u308c\u307e\u3059\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u9593\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u9001\u53d7\u4fe1\u3092\u30d6\u30ed\u30fc\u30ab\u30fc\u304c\u4e2d\u7d99\u3059\u308b\u3053\u3068\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540c\u58eb\u3092\u758e\u7d50\u5408\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n### \u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8 (virtual host)\n\n\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306f\u3001\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3084\u30ad\u30e5\u30fc\u3092\u610f\u5473\u306e\u3042\u308b\u30b0\u30eb\u30fc\u30d7\u306b\u5206\u5272\u3057\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8(`/`)\u304c\u4e8b\u524d\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u3066\u3001rabbitmqctl\u30b3\u30de\u30f3\u30c9\u3067\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u6307\u5b9a\u3092\u7701\u7565\u3057\u305f\u5834\u5408\u3001\u3053\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u304c\u4f7f\u7528\u3055\u308c\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u4f5c\u6210\u306frabbitmqctl\u30b3\u30de\u30f3\u30c9\u3001management\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n**\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u4e00\u89a7\u3092\u8868\u793a\u3057\u307e\u3059**\n\n```text:Synopsis\nlist_vhosts [vhostinfoitem ...]\n```\n\n```bat:list_vhosts\n> rabbitmqctl.bat -n rabbit_node1@localhost list_vhosts\nListing vhosts ...\n/\n```\n\n#### \u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u4f5c\u6210\n\n**rabbitmqct\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408**\n\nrabbitmqctl\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210\u3059\u308b\u306b\u306fadd_vhost\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```text:Synopsis\nadd_vhost {vhostpath}\n```\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bat:add_vhost\n> rabbitmqctl.bat -n rabbit_node1@localhost add_vhost v2\nCreating vhost \"v2\" ...\n```\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bat:add_vhost\n> rabbitmqctl.bat -n rabbit_node1@localhost add_vhost v2\nCreating vhost \"v2\" ...\n```\n\n**management\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408**\n\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Admin]\u2192[Virtual Hosts]\u3092\u9078\u629e\u3057\u307e\u3059\u3002\nName\u306b\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u540d\u3092\u5165\u529b\u3057\u3066\u767b\u9332\u3057\u307e\u3059\u3002\n\n![add_new_virtual_host.png](https://qiita-image-store.s3.amazonaws.com/0/22772/40412cfa-5b5b-ddec-13a9-5c21616dc3d8.png)\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field|value|\n|:----|:----|\n|Name | v1  |\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field|value|\n|:----|:----|\n|Name | v2  |\n\n\u767b\u9332\u5f8c\u306f\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n![all_virtual_hosts.png](https://qiita-image-store.s3.amazonaws.com/0/22772/f42e7d45-48af-36b2-73bd-506198211dd9.png)\n\n\u4f5c\u6210\u76f4\u5f8c\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306b\u306f\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u30e6\u30fc\u30b6\u30fc\u304c\u5b58\u5728\u3057\u307e\u305b\u3093\u306e\u3067\u3001\u7d9a\u3044\u3066\u30e6\u30fc\u30b6\u30fc\u306e\u767b\u9332\u3068\u305d\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u30a2\u30af\u30bb\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u306e\u8a2d\u5b9a\u3092\u884c\u3046\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n### \u30e6\u30fc\u30b6\u30fc (user)\n\n\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\u9069\u5207\u306a\u6a29\u9650\u304c\u4ed8\u4e0e\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n**\u30e6\u30fc\u30b6\u30fc\u306e\u4e00\u89a7\u3092\u8868\u793a\u3057\u307e\u3059**\n\n```text:Synopsis\nlist_users\n```\n\n```bat:list_users\n> rabbitmqctl -n rabbit_node1@localhost list_users\nListing users ...\nadmin   [administrator]\n```\n\n#### \u30e6\u30fc\u30b6\u30fc\u306e\u767b\u9332\n\nRabbitMQ\u306e\u30e6\u30fc\u30b6\u30fc\u306f\u3001\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u4fe1\u3059\u308bproducer\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3001\u30ad\u30e5\u30fc\u304b\u3089\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u4fe1\u3059\u308bconsumer\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3082\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\u30e6\u30fc\u30b6\u30fc\u306e\u767b\u9332\u306frabbitmqctl\u30b3\u30de\u30f3\u30c9\u3001management\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n**rabbitmqct\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408**\n\nrabbitmqctl\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210\u3059\u308b\u306b\u306fadd_user\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```text:Synopsis\nadd_user {username} {password}\n```\n\nv1_user\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bat:add_user\n> rabbitmqctl.bat -n rabbit_node1@localhost add_user v1_user pass\nCreating user \"v1_user\" ...\n```\n\nv2_user\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bat:add_user\n> rabbitmqctl.bat -n rabbit_node1@localhost add_user v2_user pass\nCreating user \"v2_user\" ...\n```\n\n**management\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408**\n\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Admin]\u2192[Users]\u3092\u9078\u629e\u3057\u307e\u3059\u3002\nUsername\u306b\u30e6\u30fc\u30b6\u30fc\u540d\u3001Password\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u767b\u9332\u3057\u307e\u3059\u3002Tags\u306f\u5165\u529b\u4e0d\u8981\u3067\u3059\u3002\n\n![add_new_user.png](https://qiita-image-store.s3.amazonaws.com/0/22772/aa6360d1-85c5-ccd9-7a56-c680f1df2338.png)\n\nv1_user\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field    |value      |\n|:--------|:----------|\n|Username | v1_user   |\n|Password | pass      |\n|Tags     | (nothing) |\n\nv2_user\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field    |value      |\n|:--------|:----------|\n|Username | v2_user   |\n|Password | pass      |\n|Tags     | (nothing) |\n\n\u767b\u9332\u5f8c\u306f\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n![add_users.png](https://qiita-image-store.s3.amazonaws.com/0/22772/0d6721f4-d518-2e9b-765a-4cf6bd2d5c89.png)\n\n\u7d9a\u3044\u3066\u30e6\u30fc\u30b6\u30fc\u3078\u30a2\u30af\u30bb\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n#### \u30a2\u30af\u30bb\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\n\n\u30e6\u30fc\u30b6\u30fc\u304c\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3068\u6a29\u9650\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n**rabbitmqct\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408**\n\nrabbitmqctl\u30b3\u30de\u30f3\u30c9\u3067\u30a2\u30af\u30bb\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306fset_permissions\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```text:Synopsis\nset_permissions [-p vhostpath] {user} {conf} {write} {read}\n```\n\n|option    |value                                            |\n|:---------|:------------------------------------------------|\n|`-p`      |\u30e6\u30fc\u30b6\u30fc\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u4ed8\u4e0e\u3059\u308b\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f`/`\u3067\u3059|\n|`{user}`  |\u30e6\u30fc\u30b6\u30fc\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002                             |\n|`{conf}`  |\u8a2d\u5b9a\u6a29\u9650\u3092\u4e0e\u3048\u308b\u30ea\u30bd\u30fc\u30b9\u540d\u3092\u6b63\u898f\u8868\u73fe\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002   |\n|`{write}` |\u66f8\u304d\u8fbc\u307f\u6a29\u9650\u3092\u4e0e\u3048\u308b\u30ea\u30bd\u30fc\u30b9\u540d\u3092\u6b63\u898f\u8868\u73fe\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002|\n|`{read}`  |\u8aad\u307f\u8fbc\u307f\u6a29\u9650\u3092\u4e0e\u3048\u308b\u30ea\u30bd\u30fc\u30b9\u540d\u3092\u6b63\u898f\u8868\u73fe\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002|\n\n\u5168\u6a29\u9650\u3092\u4e0e\u3048\u308b\u5834\u5408\u306f`\".*\"`\u3001\u6a29\u9650\u3092\u4e0e\u3048\u306a\u3044\u5834\u5408\u306f`\"^$\"`\n\nv1_user\u306bv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306b\u5bfe\u3059\u308b\u6a29\u9650\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bat:set_permissions\n> rabbitmqctl.bat -n rabbit_node1@localhost set_permissions -p v1 v1_user \"^$\" \".*\" \".*\"\nSetting permissions for user \"v1_user\" in vhost \"v1\" ...\n```\n\nv2_user\u306bv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306b\u5bfe\u3059\u308b\u6a29\u9650\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bat:set_permissions\n> rabbitmqctl.bat -n rabbit_node1@localhost set_permissions -p v2 v2_user \"^$\" \".*\" \".*\"\nSetting permissions for user \"v2_user\" in vhost \"v2\" ...\n```\n\nmanagemanet\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u7ba1\u7406\u30e6\u30fc\u30b6\u30fc\u306b\u3082\u6a29\u9650\u3092\u4e0e\u3048\u307e\u3059\u3002\n\n```bat:set_permissions\n> rabbitmqctl.bat -n rabbit_node1@localhost set_permissions -p v1 admin \".*\" \".*\" \".*\"\nSetting permissions for user \"admin\" in vhost \"v1\" ...\n> rabbitmqctl.bat -n rabbit_node1@localhost set_permissions -p v2 admin \".*\" \".*\" \".*\"\nSetting permissions for user \"admin\" in vhost \"v2\" ...\n```\n\n\u30e6\u30fc\u30b6\u30fc\u306e\u4ed8\u4e0e\u3055\u308c\u305f\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u4e00\u89a7\u3092\u8868\u793a\u3057\u307e\u3059\n\n```text:Synopsis\nlist_user_permissions {username}\n```\n\n```bat:list_user_permissions\n> rabbitmqctl.bat -n rabbit_node1@localhost list_user_permissions admin\nListing permissions for user \"admin\" ...\n/       .*      .*      .*\nv1      .*      .*      .*\nv2      .*      .*      .*\n> rabbitmqctl.bat -n rabbit_node1@localhost list_user_permissions v1_user\nListing permissions for user \"v1_user\" ...\nv1      ^$      .*      .*\n> rabbitmqctl.bat -n rabbit_node1@localhost list_user_permissions v2_user\nListing permissions for user \"v2_user\" ...\nv2      ^$      .*      .*\n```\n\n**management\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408**\n\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Admin]\u2192[Users]\u3092\u9078\u629e\u3057\u30a2\u30af\u30bb\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3092\u8a2d\u5b9a\u3057\u305f\u3044\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308bVirtual Host\u3092\u30ea\u30b9\u30c8\u304b\u3089\u9078\u629e\u3057\u3001\u6a29\u9650\u3092\u4e0e\u3048\u308b\u30ea\u30bd\u30fc\u30b9\u3092\u6b63\u898f\u8868\u73fe\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n![set_permissions.png](https://qiita-image-store.s3.amazonaws.com/0/22772/fd60098c-1bde-7bc3-0b6d-164573c28b26.png)\n\nv1_user\u306bv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306b\u5bfe\u3059\u308b\u6a29\u9650\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field            |value|\n|:----------------|:----|\n|Virtual Host     | v1  |\n|Configure regexp | ^$  |\n|Write regexp     | .*  |\n|Read regexp      | .*  |\n\nv2_user\u306bv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306b\u5bfe\u3059\u308b\u6a29\u9650\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field            |value|\n|:----------------|:----|\n|Virtual Host     | v2  |\n|Configure regexp | ^$  |\n|Write regexp     | .*  |\n|Read regexp      | .*  |\n\nadmin\u306b\u3082v1\u3001v2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306b\u5bfe\u3059\u308b\u6a29\u9650\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u767b\u9332\u5f8c\u306f\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n![all_users.png](https://qiita-image-store.s3.amazonaws.com/0/22772/93c6b937-3d27-8437-f193-f5cfdc85de13.png)\n\n\n### \u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8 (exchange)\n\n\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u304b\u3089\u53d7\u3051\u53d6\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u3001\u30d0\u30a4\u30f3\u30c9\u306e\u8a2d\u5b9a\u306b\u3057\u305f\u304c\u3063\u3066\u30ad\u30e5\u30fc\u3078\u914d\u9001\u3057\u307e\u3059\u3002\n\n#### \u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u7a2e\u985e\n\n**fanout**\n\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306b\u30d0\u30a4\u30f3\u30c9\u3055\u308c\u3066\u3044\u308b\u3059\u3079\u3066\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u914d\u9001\u3057\u307e\u3059\u3002\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u306f\u4f7f\u7528\u3057\u307e\u305b\u3093\u3002\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30c8\u306b\u5411\u3044\u3066\u3044\u307e\u3059\u3002\n\n**direct**\n\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306b\u30d0\u30a4\u30f3\u30c9\u3055\u308c\u3066\u3044\u308b\u30ad\u30e5\u30fc\u306e\u3046\u3061\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u3068\u30d0\u30a4\u30f3\u30c9\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u304c\u4e00\u81f4\u3059\u308b\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u914d\u9001\u3057\u307e\u3059\u3002\n\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u7279\u5b9a\u306e\u30ad\u30e5\u30fc\u3078\u914d\u9001\u3059\u308b\u306e\u306b\u5411\u3044\u3066\u3044\u307e\u3059\u3002\n\n**topic**\n\ndirect\u3068\u4f3c\u3066\u3044\u307e\u3059\u304c\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u3068\u30d0\u30a4\u30f3\u30c9\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u30d1\u30bf\u30fc\u30f3\u304c\u30de\u30c3\u30c1\u30f3\u30b0\u3059\u308b\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u914d\u9001\u3057\u307e\u3059\u3002\n\n**headers**\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30d8\u30c3\u30c0\u30fc\u306b\u57fa\u3065\u3044\u3066\u914d\u9001\u5148\u306e\u30ad\u30e5\u30fc\u3092\u6c7a\u5b9a\u3057\u307e\u3059\u3002\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u306f\u4f7f\u7528\u3057\u307e\u305b\u3093\u3002\n\n##### \u7d44\u307f\u8fbc\u307f\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\n\n\u4e8b\u524d\u306b\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306f\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u6bce\u306b\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3089\u3092\u305d\u306e\u307e\u307e\u4f7f\u7528\u3059\u308b\u3053\u3068\u3082\u3001\u72ec\u81ea\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n|name                 |type    |\n|:--------------------|:-------|\n|(AMQP default)       |direct  |\n|`amq.direct`         |direct  |\n|`amq.fanout`         |fanout  |\n|`amq.headers`        |headers |\n|`amq.match`          |headers |\n|`amq.rabbitmq.log`   |topic   |\n|`amq.rabbitmq.trace` |topic   |\n|`amq.topic`          |topic   |\n\n`AMQP default` : \u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u914d\u4fe1\u5148\uff08\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\uff09\u3092\u660e\u793a\u7684\u306b\u6307\u5b9a\u3057\u306a\u304b\u3063\u305f\u3068\u304d\u306b\u4f7f\u7528\u3055\u308c\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3067\u3059\u3002\u3053\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306f\u6697\u9ed9\u7684\u306b\u3059\u3079\u3066\u306e\u30ad\u30e5\u30fc\u306b\u30d0\u30a4\u30f3\u30c9\u3055\u308c\u3066\u304a\u308a\u3001\u307e\u305f\u524a\u9664\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u305b\u3093\u3002\n\n#### \u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u4f5c\u6210\n\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u4f5c\u6210\u306frabbitmqctl\u30b3\u30de\u30f3\u30c9\u3067\u306f\u3067\u304d\u307e\u305b\u3093\u306e\u3067\u3001management\u30d7\u30e9\u30b0\u30a4\u30f3\u304bclient\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n**management\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b**\n\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Exchanges]\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306f\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u6bce\u306b\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4f5c\u6210\u5bfe\u8c61\u306eVirtual Host\u3092\u9078\u3073\u3001Name\u306b\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u540d\u3092\u5165\u529b\u3057\u307e\u3059\u3002\u305f\u3060\u3057\u540d\u524d\u306e\u5148\u982d\u306b\"amp.\"\u3092\u4ed8\u3051\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\n![add_new_exchange.png](https://qiita-image-store.s3.amazonaws.com/0/22772/8dbe22d0-49a3-53a9-a733-3a9f63b3fd39.png)\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306bnotice.direct\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field        |value          |\n|:------------|:--------------|\n|Virtual Host | v1            |\n|Name         | notice.direct |\n|Type         | direct        |\n|Durability   | Durable       |\n|Auto Delete  | No            |\n|Internal     | No            |\n|Arguments    |  (nothing)    |\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306bbroadcast.fanout\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field        |value          |\n|:------------|:--------------|\n|Virtual Host | v1            |\n|Name         | broadcast.fanout |\n|Type         | fanout        |\n|Durability   | Durable       |\n|Auto Delete  | No            |\n|Internal     | No            |\n|Arguments    |  (nothing)    |\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306bnotice.topic\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field        |value          |\n|:------------|:--------------|\n|Virtual Host | v2            |\n|Name         | notice.topic  |\n|Type         | topic         |\n|Durability   | Durable       |\n|Auto Delete  | No            |\n|Internal     | No            |\n|Arguments    | (nothing)     |\n\n\u767b\u9332\u5f8c\u306f\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002(*\u9752\u7dda\u3067\u56f2\u3063\u305f\u90e8\u5206\u304c\u767b\u9332\u3057\u305f\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3067\u3059\u3002\u305d\u306e\u4ed6\u306f\u4e8b\u524d\u5b9a\u7fa9\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3067\u3059\u3002)\n\n![all_exchanges.png](https://qiita-image-store.s3.amazonaws.com/0/22772/aa1dfc53-9a3f-f893-acaa-fac0091f6aca.png)\n\n\n##### properties\n\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306b\u8a2d\u5b9a\u3067\u304d\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\n\n|property      |value                                        |description                     |\n|:-------------|:--------------------------------------------|:-------------------------------|\n|`Durability`  |<ul><li>Durable</li><li>Transient</li></ul>  |Durable:\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3092\u6c38\u7d9a\u5316\u3057\u307e\u3059\u3001Transient:\u4e00\u6642\u7684\u306a\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3068\u3057\u307e\u3059\u3002|\n|`Auto Delete` |<ul><li>YES</li><li>NO</li></ul>             |YES:\u30d0\u30a4\u30f3\u30c9\u3059\u308b\u30ad\u30e5\u30fc\u304c\u7121\u304f\u306a\u3063\u305f\u5834\u5408\u306b\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3092\u524a\u9664\u3057\u307e\u3059\u3002|\n|`Internal`    |<ul><li>YES</li><li>NO</li></ul>             |YES:\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u304b\u3089\u3057\u304b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u3051\u53d6\u308a\u307e\u305b\u3093\u3002\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8 to \u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u7528\u3067\u3059\u3002 |\n\n##### arguments\n\n|arguments                 |type   |description                   |\n|:-------------------------|:------|:-----------------------------|\n|`alternate-exchange`      |String |If messages to this exchange cannot otherwise be routed, send them to the alternate exchange named here.|\n\n### \u30ad\u30e5\u30fc (queue)\n\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u304b\u3089\u914d\u9001\u3055\u308c\u3066\u304d\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u4fdd\u7ba1\u5834\u6240\u3067\u3059\u3002\n1\u3064\u306e\u30ad\u30e5\u30fc\u306f1\u3064\u306e\u30ce\u30fc\u30c9\u4e0a\u306b\u4f5c\u6210\u3057\u307e\u3059\uff08RabbitMQ\u30b5\u30fc\u30d0\u30fc\u3092\u30af\u30e9\u30b9\u30bf\u30fc\u69cb\u6210\u306b\u3057\u3066\u3044\u3066\u3082\uff09\u304c\u3001\u30dd\u30ea\u30b7\u30fc\u306e\u8a2d\u5b9a\u306b\u3088\u3063\u3066\u30ad\u30e5\u30fc\u3092\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n#### \u30ad\u30e5\u30fc\u306e\u4f5c\u6210\n\n\u30ad\u30e5\u30fc\u306e\u4f5c\u6210\u306frabbitmqctl\u30b3\u30de\u30f3\u30c9\u3067\u306f\u3067\u304d\u307e\u305b\u3093\u306e\u3067\u3001management\u30d7\u30e9\u30b0\u30a4\u30f3\u304bclient\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n**management\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b**\n\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Queues]\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u30ad\u30e5\u30fc\u306f\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u6bce\u306b\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4f5c\u6210\u5bfe\u8c61\u306eVirtual Host\u3092\u9078\u3073\u3001Name\u306b\u30ad\u30e5\u30fc\u540d\u3092\u5165\u529b\u3057\u307e\u3059\u3002\u305f\u3060\u3057\u540d\u524d\u306e\u5148\u982d\u306b\"amp.\"\u3092\u4ed8\u3051\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\n![add_new_queue.png](https://qiita-image-store.s3.amazonaws.com/0/22772/21c40f74-fab6-b518-d575-ab481f214943.png)\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306b`userid:1000`\u3001`userid:1001`\u3001`userid:2002`\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field        |value          |\n|:------------|:--------------|\n|Virtual Host | v1            |\n|Name         | userid:1000\u3001userid:1001\u3001userid:2002 |\n|Durability   | Durable       |\n|Node         | rabbit_node1@localhost|\n|Auto Delete  | No            |\n|Arguments    | x-max-priority = 9|\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306b`userid:1000.info`\u3001`userid:1000.warn`\u3001`userid:1001.info`\u3001`userid:1001.warn`\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field        |value          |\n|:------------|:--------------|\n|Virtual Host | v2            |\n|Name         | userid:1000.info\u3001userid:1000.warn\u3001userid:1001.info\u3001userid:1001.warn |\n|Durability   | Durable       |\n|Node         | rabbit_node1@localhost|\n|Auto Delete  | No            |\n|Arguments    | x-max-priority = 9|\n\n\u767b\u9332\u5f8c\u306f\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n![all_queues.png](https://qiita-image-store.s3.amazonaws.com/0/22772/1fcec3c6-0ece-f07e-e966-c6a88c5e5534.png)\n\n\n##### properties\n\n\u30ad\u30e5\u30fc\u306b\u8a2d\u5b9a\u3067\u304d\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\n\n|property      |value                                        |description                              |\n|:-------------|:--------------------------------------------|:----------------------------------------|\n|`Durability`  |<ul><li>Durable</li><li>Transient</li></ul>  |Durable:\u30ad\u30e5\u30fc\u3092\u6c38\u7d9a\u5316\u3057\u307e\u3059\u3001Transient:\u4e00\u6642\u7684\u306a\u30ad\u30e5\u30fc\u3068\u3057\u307e\u3059\u3002|\n|`Node`        |\u30ea\u30b9\u30c8\u304b\u3089\u9078\u629e\u3057\u307e\u3059                           |\u30ad\u30e5\u30fc\u3092\u4f5c\u6210\u3059\u308b\u30ce\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059         |\n|`Auto delete` |<ul><li>YES</li><li>NO</li></ul>             |YES:consumer\u304b\u3089\u306e\u63a5\u7d9a\u304c\u7121\u304f\u306a\u3063\u305f\u5834\u5408\u306b\u30ad\u30e5\u30fc\u3092\u524a\u9664\u3057\u307e\u3059\u3002  |\n\n`Durability`\u3068\u306f\u3001\u30ad\u30e5\u30fc\u306e\u767b\u9332\u60c5\u5831\u3092RabbitMQ\u30b5\u30fc\u30d0\u30fc\u306e\u505c\u6b62\u5f8c\u3082\u4fdd\u5b58\u3059\u308b\u304b\u3092\u6307\u5b9a\u3059\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u3067\u3059\u3002`Transient`\u306e\u5834\u5408\u3001RabbitMQ\u30b5\u30fc\u30d0\u30fc\u3092\u505c\u6b62\u3055\u305b\u308b\u3068\u305d\u306e\u30ad\u30e5\u30fc\u306f\u7121\u304f\u306a\u308a\u307e\u3059\u3002\n\n##### arguments\n\n|arguments                   |type   |description                        |\n|:---------------------------|:------|:----------------------------------|\n|`x-message-ttl`             |Number |\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u751f\u5b58\u671f\u9593(\u30df\u30ea\u79d2)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 |\n|`x-expires`                 |Number |\u30ad\u30e5\u30fc\u306e\u6709\u52b9\u671f\u9593(\u30df\u30ea\u79d2)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u6307\u5b9a\u3057\u305f\u6642\u9593\u4f7f\u7528\u3055\u308c\u306a\u304b\u3063\u305f\u5834\u5408\u30ad\u30e5\u30fc\u3092\u524a\u9664\u3057\u307e\u3059\u3002|\n|`x-max-length`              |Number |\u30ad\u30e5\u30fc\u306b\u4fdd\u5b58\u3059\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u6700\u5927\u6570\uff08\u3053\u308c\u3092\u8d85\u3048\u308b\u3068\u53e4\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u304b\u3089\u524a\u9664)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002|\n|`x-max-length-bytes`        |Number |\u30ad\u30e5\u30fc\u306b\u4fdd\u5b58\u3059\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u6700\u5927\u5408\u8a08\u30b5\u30a4\u30ba\u6570 (\u3053\u308c\u3092\u8d85\u3048\u308b\u3068\u53e4\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u304b\u3089\u524a\u9664)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002|\n|`x-dead-letter-exchange`    |String |dead-letter\u306b\u306a\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u8ee2\u9001\u5148\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002|\n|`x-dead-letter-routing-key` |String |dead-letter\u306b\u306a\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u4ed8\u3051\u308b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002|\n|`x-max-priority`            |Number |\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u306e\u6700\u5927\u5024\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u5927\u304d\u3044\u5024\u307b\u3069\u512a\u5148\u5ea6\u304c\u9ad8\u304f\u306a\u308a\u307e\u3059\u3002|\n|`x-match`                   |String |`all`:\u3059\u3079\u3066\u306e\u6761\u4ef6\u304c\u30de\u30c3\u30c1\u3059\u308b\u5834\u5408\u306b\u53d7\u4fe1\u3059\u308b\u3002<br/>`any`:\u6761\u4ef6\u304c1\u3064\u3067\u3082\u30de\u30c3\u30c1\u3059\u308b\u5834\u5408\u306b\u53d7\u4fe1\u3059\u308b\u3002|\n\n### \u30d0\u30a4\u30f3\u30c9 (binding)\n\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3068\u30ad\u30e5\u30fc\u3092\u95a2\u9023\u4ed8\u3051\u307e\u3059\u3002\u95a2\u9023\u306f\u300c\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u304b\u3089\u30ad\u30e5\u30fc\u300d\u3068\u300c\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u304b\u3089\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u300d\u306e2\u901a\u308a\u304c\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u304c\u53d7\u3051\u53d6\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u914d\u9001\u5148\u306f\u95a2\u9023\u4ed8\u3051\u3089\u308c\u305f\u30ad\u30e5\u30fc\u306e\u4e2d\u304b\u3089\u9078\u629e\u3055\u308c\u307e\u3059\u304c\u3001\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u30bf\u30a4\u30d7\u304c`direct`\u304b`topic`\u306e\u5834\u5408\u306f\u3001\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u306b\u3088\u3063\u3066\u914d\u9001\u306e\u30ad\u30e5\u30fc\u3092\u5206\u5c90\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n`headers`\u306e\u5834\u5408\u306f\u3001\u30d8\u30c3\u30c0\u30fc\u306b\u6307\u5b9a\u3057\u305f\u6761\u4ef6\u306b\u3088\u3063\u3066\u914d\u9001\u5148\u306e\u30ad\u30e5\u30fc\u3092\u5206\u5c90\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n#### \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc (routing key)\n\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u30bf\u30a4\u30d7\u304c`direct`\u304b`topic`\u306e\u3068\u304d\u3001\u30d0\u30a4\u30f3\u30c9\u306b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u3053\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u3068\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u6301\u3064\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u304c\u6bd4\u8f03\u3055\u308c\u914d\u9001\u3059\u308b\u30ad\u30e5\u30fc\u304c\u6c7a\u5b9a\u3055\u308c\u307e\u3059\u3002\n\n**direct**\n\n`direct`\u306e\u5834\u5408\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u304c\u30d0\u30a4\u30f3\u30c9\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u3068\u4e00\u81f4\u3057\u305f\u5834\u5408\u306b\u3001\u305d\u306e\u30d0\u30a4\u30f3\u30c9\u5148\u306e\u30ad\u30e5\u30fc\u304c\u9078\u629e\u3055\u308c\u307e\u3059\u3002\n\n```text:direct_exchange\u4f8b\n +- [message]--------------+      +-[ direct exchange]------------+\n |                         |      |                               |\n |  routing key : ?        |----->|   +-[binding] A ----------+   |     +-[ queue ]-----+\n |                         |      |   | routing key : 1000    |-------->|               |\n |  payload {              |      |   |                       |   |     +---------------+\n |     ...                 |      |   +-----------------------+   |\n |  }                      |      |   +-[binding] B ----------+   |     +-[ queue ]-----+\n +-------------------------+      |   | routing key : 1001    |-------->|               |\n                                  |   |                       |   |     +---------------+\n                                  |   +-----------------------+   |\n                                  |   +-[binding] C ----------+   |     +-[ queue ]-----+\n                                  |   | routing key : 2000    |-------->|               |\n                                  |   |                       |   |     +---------------+\n                                  |   +-----------------------+   |\n                                  +-------------------------------+\n```\n\n\u4e0a\u56f3\u306edirect_exchange\u4f8b\u3067\u306f\n\n* \u30e1\u30c3\u30bb\u30fc\u30b8\u306erouting key\u304c1000\u306e\u5834\u5408\u3001binding A\u304c\u4f7f\u7528\u3055\u308c\u3001\u305d\u306e\u5148\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u307e\u3059\u3002\n* \u30e1\u30c3\u30bb\u30fc\u30b8\u306erouting key\u304c1001\u306e\u5834\u5408\u3001binding B\u304c\u4f7f\u7528\u3055\u308c\u3001\u305d\u306e\u5148\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u307e\u3059\u3002\n\n\n**topic**\n\n`topic`\u306e\u5834\u5408\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u304c\u30d0\u30a4\u30f3\u30c9\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u30d1\u30bf\u30fc\u30f3\u3068\u4e00\u81f4\u3059\u308b\u5834\u5408\u306b\u3001\u305d\u306e\u30d0\u30a4\u30f3\u30c9\u5148\u306e\u30ad\u30e5\u30fc\u304c\u9078\u629e\u3055\u308c\u307e\u3059\u3002\u4e00\u898b\u3059\u308b\u3068\u6b63\u898f\u8868\u73fe\u306e\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u304c\u305d\u3046\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u306e\u3067\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u30d0\u30a4\u30f3\u30c9\u306b\u8a18\u8ff0\u3059\u308b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u306f\n\n* .(\u30c9\u30c3\u30c8)\u3067\u533a\u5207\u3089\u308c\u305f\u5358\u8a9e\u304b\u3089\u69cb\u6210\u3057\u307e\u3059\u3002\n* \u30ad\u30fc\u306e\u6700\u5927\u6587\u5b57\u9577\u306f255\u30d0\u30a4\u30c8\u3067\u3059\u3002\n* \u5358\u8a9e\u306b\u306f\u7279\u6b8a\u306a\u610f\u5473\u3092\u6301\u3064`*`\u3001`#`\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n* `*`\u306f1\u500b\u306e\u5358\u8a9e\u3068\u7f6e\u304d\u63db\u3048\u3089\u308c\u307e\u3059\u3002\n* `#`\u306f0\u500b\u307e\u305f\u306f1\u500b\u4ee5\u4e0a\u306e\u5358\u8a9e\u3068\u7f6e\u304d\u63db\u3048\u3089\u308c\u307e\u3059\u3002\n\n|pattern   |\u30de\u30c3\u30c1\u3059\u308b\u30d1\u30bf\u30fc\u30f3           |\u30de\u30c3\u30c1\u3057\u306a\u3044\u30d1\u30bf\u30fc\u30f3      |\n|:---------|:--------------------------|:------------------------|\n|`A.*`     |`A.A`\u3001`A.B`\u3001`A.C`\u306a\u3069    |`A`\u3001`A.B.C`\u306a\u3069          |\n|`A.#`     |`A`\u3001`A.A`\u3001`A.A.A`        |`AA`\u3001`AA.B`\u306a\u3069          |\n|`A.#.Z`   |`A.Z`\u3001`A.B.Z`\u3001`A.B.C.Z`  |`A`\u3001`A.B`\u3001`A.B.C`\u306a\u3069   |\n\n\n```text:topics_exchange\u4f8b\n +- [message]--------------+      +-[ topic exchange]----------------+\n |                         |      |                                  |\n |  routing key : ?        |----->|   +-[binding] A -------------+   |     +-[ queue ]-----+\n |                         |      |   | routing key : id.*.info  |-------->|               |\n |  payload {              |      |   |                          |   |     +---------------+\n |     ...                 |      |   +--------------------------+   |\n |  }                      |      |   +-[binding] B -------------+   |     +-[ queue ]-----+\n +-------------------------+      |   | routing key : id.*.warn  |-------->|               |\n                                  |   |                          |   |     +---------------+\n                                  |   +--------------------------+   |\n                                  |   +-[binding] C -------------+   |     +-[ queue ]-----+\n                                  |   | routing key : broad.#    |-------->|               |\n                                  |   |                          |   |     +---------------+\n                                  |   +--------------------------+   |\n                                  +----------------------------------+\n```\n\n\u4e0a\u56f3\u306etopics_exchange\u4f8b\u3067\u306f\n\n* \u30e1\u30c3\u30bb\u30fc\u30b8\u306erouting key\u304cid.1000.info\u306e\u5834\u5408\u3001binding A\u304c\u4f7f\u7528\u3055\u308c\u3001\u305d\u306e\u5148\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u307e\u3059\u3002\n* \u30e1\u30c3\u30bb\u30fc\u30b8\u306erouting key\u304cid.1001.warn\u306e\u5834\u5408\u3001binding B\u304c\u4f7f\u7528\u3055\u308c\u3001\u305d\u306e\u5148\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u307e\u3059\u3002\n* \u30e1\u30c3\u30bb\u30fc\u30b8\u306erouting key\u304cbroad.update.2000\u3084\u3001broad.delete.2001\u306e\u5834\u5408\u3001binding C\u304c\u4f7f\u7528\u3055\u308c\u3001\u305d\u306e\u5148\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u307e\u3059\u3002\n\n\n#### \u5f15\u6570 (arguments)\n\n**headers**\n\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u30bf\u30a4\u30d7\u304c`headers`\u306e\u3068\u304d\u306b\u3001\u30d0\u30a4\u30f3\u30c9\u306e\u5f15\u6570\u306b\u4efb\u610f\u306e\u5206\u5c90\u6761\u4ef6\u3092\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002\n\u3053\u306e\u5206\u5c90\u6761\u4ef6\u3068\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30d8\u30c3\u30c0\u30fc\u304c\u6bd4\u8f03\u3055\u308c\u914d\u9001\u5148\u306e\u30ad\u30e5\u30fc\u304c\u6c7a\u5b9a\u3055\u308c\u307e\u3059\u3002\n\nheaders exchange\u306e\u30d0\u30a4\u30f3\u30c9\u306f\u5f15\u6570\u306b`x-match`\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u8a2d\u5b9a\u3067\u304d\u308b\u5024\u306f`any`\u304b`all`\u3067\u3059\u3002\n\n* `any`\u8a2d\u5b9a\u306f\u3001\u30d0\u30a4\u30f3\u30c9\u306e\u5206\u5c90\u6761\u4ef6\u306e\u4f55\u308c\u304b\u3092\u6e80\u305f\u3057\u305f\u5834\u5408\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\n* `all`\u8a2d\u5b9a\u306f\u3001\u30d0\u30a4\u30f3\u30c9\u306e\u5206\u5c90\u6761\u4ef6\u306e\u3059\u3079\u3066\u3092\u6e80\u305f\u3057\u305f\u5834\u5408\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\n\n```text:headers_exchange\u306e\u4f8b\n +- [message]--------------+      +-[ headers exchange]-----------+\n |                         |      |                               |\n |  arguments              |----->|   +-[binding] A --------+     |     +-[ queue ]-----+\n |   arg1 = ?              |      |   | x-match : any       |---------->|               |\n |   arg2 = ?              |      |   | arg1 : 100          |     |     +---------------+\n |   arg3 = ?              |      |   | arg2 : 200          |     |\n |   arg4 = ?              |      |   +---------------------+     |\n |                         |      |   +-[binding] B --------+     |     +-[ queue ]-----+\n | payload {               |      |   | x-match : any       |---------->|               |\n |    ...                  |      |   | arg3 : 300          |     |     +---------------+\n | }                       |      |   | arg4 : 400          |     |\n +-------------------------+      |   +---------------------+     |\n                                  |   +-[binding] C --------+     |     +-[ queue ]-----+\n                                  |   | x-match : all       |---------->|               |\n                                  |   | arg1 : 100          |     |     +---------------+\n                                  |   | arg3 : 300          |     |\n                                  |   +---------------------+     |\n                                  +-------------------------------+\n```\n\n\u4e0a\u56f3\u306eheaders_exchange\u4f8b\u3067\u306f\n\n* \u30e1\u30c3\u30bb\u30fc\u30b8\u306earg1\u5f15\u6570\u304c100\u3001\u307e\u305f\u306farg2\u5f15\u6570\u304c200\u306e\u5834\u5408\u3001binding A\u304c\u4f7f\u7528\u3055\u308c\u3001\u305d\u306e\u5148\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u307e\u3059\u3002\n* \u30e1\u30c3\u30bb\u30fc\u30b8\u306earg3\u5f15\u6570\u304c300\u3001\u307e\u305f\u306farg4\u5f15\u6570\u304c400\u306e\u5834\u5408\u3001binding B\u304c\u4f7f\u7528\u3055\u308c\u3001\u305d\u306e\u5148\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u307e\u3059\u3002\n* \u30e1\u30c3\u30bb\u30fc\u30b8\u306earg1\u5f15\u6570\u304c100\u3001\u4e14\u3064arg3\u5f15\u6570\u304c300\u306e\u5834\u5408\u3001binding A,B,C\u304c\u4f7f\u7528\u3055\u308c\u3001\u305d\u308c\u305e\u308c\u306e\u30ad\u30e5\u30fc\u3078\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u307e\u3059\u3002\n\n#### \u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3068\u30ad\u30e5\u30fc\u306e\u30d0\u30a4\u30f3\u30c9\n\n\u30d0\u30a4\u30f3\u30c9\u306frabbitmqctl\u30b3\u30de\u30f3\u30c9\u3067\u306f\u3067\u304d\u307e\u305b\u3093\u306e\u3067\u3001management\u30d7\u30e9\u30b0\u30a4\u30f3\u304bclient\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n**management\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b**\n\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Exchanges]\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u4e00\u89a7\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u306e\u3067\u3001\u305d\u306e\u4e2d\u304b\u3089\u30d0\u30a4\u30f3\u30c9\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u305f\u3044\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u540d\u524d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\nBindings\u6b04\u306b\u3042\u308b\u300cAdd binding from this exchange\u300d\u3068\u3044\u3046\u30d5\u30a9\u30fc\u30e0\u304b\u3089\u30d0\u30a4\u30f3\u30c9\u306e\u8a2d\u5b9a\u5185\u5bb9\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\n![bindings.png](https://qiita-image-store.s3.amazonaws.com/0/22772/dfa77982-18b6-c9ab-e0d8-a97c7fc53174.png)\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306enotice.direct\u306buserid:1000\u3001userid:1001\u3001userid:2002\u3078\u306e\u30d0\u30a4\u30f3\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field        |value          |\n|:------------|:--------------|\n|To queue     | userid:1000   |\n|Routing key  | 1000          |\n|Arguments    | (nothing)     |\n\n|field        |value          |\n|:------------|:--------------|\n|To queue     | userid:1001   |\n|Routing key  | 1001          |\n|Arguments    | (nothing)     |\n\n|field        |value          |\n|:------------|:--------------|\n|To queue     | userid:2002   |\n|Routing key  | 2002          |\n|Arguments    | (nothing)     |\n\n\u767b\u9332\u5f8c\u306f\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n![notice_direct_binding.png](https://qiita-image-store.s3.amazonaws.com/0/22772/b5696133-bc5e-fbf8-7ab0-d268fb2d306b.png)\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306ebroadcast.fanout\u306buserid:1000\u3001userid:1001\u3001userid:2002\u3078\u306e\u30d0\u30a4\u30f3\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field        |value          |\n|:------------|:--------------|\n|To queue     | userid:1000   |\n|Routing key  | (nothing)     |\n|Arguments    | (nothing)     |\n\n|field        |value          |\n|:------------|:--------------|\n|To queue     | userid:1001   |\n|Routing key  | (nothing)     |\n|Arguments    | (nothing)     |\n\n|field        |value          |\n|:------------|:--------------|\n|To queue     | userid:2002   |\n|Routing key  | (nothing)     |\n|Arguments    | (nothing)     |\n\n\u767b\u9332\u5f8c\u306f\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n![broadcast_fanout_binding.png](https://qiita-image-store.s3.amazonaws.com/0/22772/c9981b9e-f589-eaa0-eac0-20de92cd1c9d.png)\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306enotice.topic\u306buserid:1000.info\u3001userid:1000.warn\u3001userid:1001.info\u3001userid:1001.warn\u3078\u306e\u30d0\u30a4\u30f3\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field        |value             |\n|:------------|:-----------------|\n|To queue     | userid:1000.info |\n|Routing key  | *.info           |\n|Arguments    | (nothing)        |\n\n|field        |value             |\n|:------------|:-----------------|\n|To queue     | userid:1000.warn |\n|Routing key  | *.warn           |\n|Arguments    | (nothing)        |\n\n|field        |value             |\n|:------------|:-----------------|\n|To queue     | userid:1001.info |\n|Routing key  | *.info           |\n|Arguments    | (nothing)        |\n\n|field        |value             |\n|:------------|:-----------------|\n|To queue     | userid:1001.warn |\n|Routing key  | *.warn           |\n|Arguments    | (nothing)        |\n\n\u767b\u9332\u5f8c\u306f\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n![notice_topic_binding.png](https://qiita-image-store.s3.amazonaws.com/0/22772/b57c0edd-7f5c-f105-9e25-e034680cb68d.png)\n\n### \u30dd\u30ea\u30b7\u30fc (policy)\n\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3001\u30ad\u30e5\u30fc\u306e\u52d5\u4f5c\u3092\u30dd\u30ea\u30b7\u30fc\u306b\u3088\u3063\u3066\u5236\u5fa1\u3067\u304d\u307e\u3059\u3002\u30dd\u30ea\u30b7\u30fc\u306f\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u6bce\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30dd\u30ea\u30b7\u30fc\u306frabbitmqctl\u30b3\u30de\u30f3\u30c9\u304bmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n**\u30dd\u30ea\u30b7\u30fc\u306e\u4e00\u89a7\u3092\u8868\u793a\u3057\u307e\u3059**\n\n```text:Synopsis\nlist_policies [-p vhostpath]\n```\n\n```bat:list_policies\n> rabbitmqctl.bat -n rabbit_node1@localhost list_policies -p /\nListing policies ...\n> rabbitmqctl.bat -n rabbit_node1@localhost list_policies -p v1\nListing policies ...\n> rabbitmqctl.bat -n rabbit_node1@localhost list_policies -p v2\nListing policies ...\n```\n\n#### \u30dd\u30ea\u30b7\u30fc\u306e\u4f5c\u6210\n\n**rabbitmqctl\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408**\n\nrabbitmqctl\u30b3\u30de\u30f3\u30c9\u3067\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3059\u308b\u306b\u306fset_policy\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```text:Synopsis\nset_policy [-p vhostpath] [--priority priority] [--apply-to apply-to] {name} {pattern} {definition}\n```\n\n|option         |value                                        |\n|:--------------|:--------------------------------------------|\n|`-p`           |\u30dd\u30ea\u30b7\u30fc\u3092\u9069\u7528\u3059\u308b\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 |\n|`--priority`   |\u30dd\u30ea\u30b7\u30fc\u306e\u512a\u5148\u5ea6\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002                 |\n|`--apply-to`   |`all`,`exchanges`,`queues`\u304b\u3089\u9078\u3073\u307e\u3059\u3002      |\n|`{name}`       |\u30dd\u30ea\u30b7\u30fc\u306e\u540d\u524d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002                   |\n|`{pattern}`    |\u30dd\u30ea\u30b7\u30fc\u3092\u9069\u7528\u3059\u308b\u5bfe\u8c61\u3092\u6b63\u898f\u8868\u73fe\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002   |\n|`{definition}` |\u30dd\u30ea\u30b7\u30fc\u306e\u5185\u5bb9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002                   |\n\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306buser1x\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bat:set_policy\n> rabbitmqctl.bat -n rabbit_node1@localhost -p v1 set_policy --priority 0 --apply-to queues \"user1x\" \"^userid:[1].*\" \"{\"\"max-length\"\":50}\"\nSetting policy \"user1x\" for pattern \"^userid:[1].*\" to \"{\\\"max-length\\\":50}\" with priority \"0\" ...\n```\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306buser2x\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bat:set_policy\n> rabbitmqctl.bat -n rabbit_node1@localhost -p v1 set_policy --priority 0 --apply-to queues \"user2x\" \"^userid:[2].*\" \"{\"\"max-length\"\":100}\"\nSetting policy \"user2x\" for pattern \"^userid:[2].*\" to \"{\\\"max-length\\\":100}\" with priority \"0\" ...\n```\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306binfo\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bat:set_policy\n> rabbitmqctl.bat -n rabbit_node1@localhost -p v2 set_policy --priority 0 --apply-to queues \"info\" \"^userid:.*\\.info\" \"{\"\"message-ttl\"\":1800000}\"\nSetting policy \"info\" for pattern \"^userid:.*\\\\.info\" to \"{\\\"message-ttl\\\":1800000}\" with priority \"0\" ...\n```\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306bwarn\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bat:set_policy\n> rabbitmqctl.bat -n rabbit_node1@localhost -p v2 set_policy --priority 0 --apply-to queues \"warn\" \"^userid:.*\\.warn\" \"{\"\"message-ttl\"\":3600000}\"\nSetting policy \"warn\" for pattern \"^userid:.*\\\\.warn\" to \"{\\\"message-ttl\\\":3600000}\" with priority \"0\" ...\n```\n\n**management\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408**\n\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Admin]\u2192[Policies]\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u30dd\u30ea\u30b7\u30fc\u306f\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u6bce\u306b\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4f5c\u6210\u5bfe\u8c61\u306eVirtual Host\u3092\u9078\u3073\u3001Name\u306b\u30dd\u30ea\u30b7\u30fc\u540d\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\n![add_policy.png](https://qiita-image-store.s3.amazonaws.com/0/22772/07dddcde-70a6-076f-d48b-9218ceed20af.png)\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306buser1x\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field        |value             |\n|:----------- |:-----------------|\n|Virtual Host | v1               |\n|Name         | user1x           |\n|Pattern      | ^userid:[1].*    |\n|Apply to     | queues           |\n|Priority     | 0                |\n|Definition   | max-length = 50  |\n\nv1\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306buser2x\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field        |value             |\n|:----------- |:-----------------|\n|Virtual Host | v1               |\n|Name         | user2x           |\n|Pattern      | ^userid:[2].*    |\n|Apply to     | queues           |\n|Priority     | 0                |\n|Definition   | max-length = 100 |\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306binfo\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field        |value                  |\n|:----------- |:----------------------|\n|Virtual Host | v2                    |\n|Name         | info                  |\n|Pattern      | ^userid:.*\\.info      |\n|Apply to     | queues                |\n|Priority     | 0                     |\n|Definition   | message-ttl = 1800000 |\n\nv2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306bwarn\u30dd\u30ea\u30b7\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|field        |value                  |\n|:----------- |:----------------------|\n|Virtual Host | v2                    |\n|Name         | warn                  |\n|Pattern      | ^userid:.*\\.warn      |\n|Apply to     | queues                |\n|Priority     | 0                     |\n|Definition   | message-ttl = 3600000 |\n\n\u767b\u9332\u5f8c\u306f\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n![all_policies.png](https://qiita-image-store.s3.amazonaws.com/0/22772/ecd68818-b48c-0c0b-e2c2-744e84b04d9c.png)\n\n\u307e\u305f\u3001\u30ad\u30e5\u30fc\u306e\u4e00\u89a7\u3067\u3082\u9069\u7528\u3055\u308c\u308b\u30dd\u30ea\u30b7\u30fc\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n![all_queues_policies.png](https://qiita-image-store.s3.amazonaws.com/0/22772/7edff944-cbd4-b659-2daa-e0d4c309d98b.png)\n\n##### properties\n\n\u30dd\u30ea\u30b7\u30fc\u306b\u8a2d\u5b9a\u3067\u304d\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\n\n**Pattern**\n\n\u30dd\u30ea\u30b7\u30fc\u3092\u9069\u7528\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u540d\u3092\u6b63\u898f\u8868\u73fe\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\".*\"\u3068\u3059\u308b\u3068\u5168\u3066\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u9069\u7528\u3055\u308c\u307e\u3059\u3002\n\n**Apply to**\n\n\u9069\u7528\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u3092\u30ea\u30b9\u30c8\u304b\u3089\u9078\u629e\u3057\u307e\u3059\u3002\n\n* Exchanges and queues\n* Exchanges\n* Queues\n\n**Priority**\n\n\u30dd\u30ea\u30b7\u30fc\u306e\u512a\u5148\u5ea6\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30d1\u30bf\u30fc\u30f3\u306b\u30de\u30c3\u30c1\u3059\u308b\u30dd\u30ea\u30b7\u30fc\u304c\u8907\u6570\u3042\u3063\u305f\u5834\u5408\u3001\u512a\u5148\u5ea6\u306e\u9ad8\u3044\u30dd\u30ea\u30b7\u30fc\u304c\u9069\u7528\u3055\u308c\u307e\u3059\u3002\u5927\u304d\u3044\u5024\u304c\u3088\u308a\u512a\u5148\u5ea6\u304c\u9ad8\u3044\u3068\u5224\u65ad\u3055\u308c\u307e\u3059\u3002\n\n**Definition**\n\n\u30dd\u30ea\u30b7\u30fc\u306e\u5185\u5bb9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n***HA***\n\u30ad\u30e5\u30fc\u306e\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u306b\u95a2\u3059\u308b\u30dd\u30ea\u30b7\u30fc\u3067\u3059\u3002\n\n|arguments                 |type   |description                      |\n|:-------------------------|:------|:--------------------------------|\n|`ha-mode`                 |String |\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u306e\u30e2\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002  |\n|`ha-params`               |String |\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u306e\u30e2\u30fc\u30c9\u306b\u5bfe\u3059\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002|\n|`ha-sync-mode`            |String |\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u540c\u671f\u30e2\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002|\n\n***Federation***\n\n|arguments                 |type   |description                              |\n|:-------------------------|:------|:----------------------------------------|\n|`federation-upstream-set` |String |A string; only if the federation plugin is enabled. Chooses the name of a set of upstreams to use with federation, or \"all\" to use all upstreams. Incompatible with federation-upstream. |\n|`federation-upstream`     |String |A string; only if the federation plugin is enabled. Chooses a specific upstream set to use for federation. Incompatible with federation-upstream-set. |\n\n***Queues***\n\u30ad\u30e5\u30fc\u306b\u95a2\u3059\u308b\u30dd\u30ea\u30b7\u30fc\u3067\u3059\u3002\n\n|arguments                   |type   |description                            |\n|:---------------------------|:------|:--------------------------------------|\n|`message-ttl`               |Number |\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u751f\u5b58\u671f\u9593(\u30df\u30ea\u79d2)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002|\n|`expires`                   |Number |\u30ad\u30e5\u30fc\u306e\u6709\u52b9\u671f\u9593(\u30df\u30ea\u79d2)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u6307\u5b9a\u3057\u305f\u6642\u9593\u4f7f\u7528\u3055\u308c\u306a\u304b\u3063\u305f\u5834\u5408\u30ad\u30e5\u30fc\u3092\u524a\u9664\u3057\u307e\u3059\u3002|\n|`max-length`                |Number |\u30ad\u30e5\u30fc\u306b\u4fdd\u5b58\u3059\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u6700\u5927\u6570\uff08\u3053\u308c\u3092\u8d85\u3048\u308b\u3068\u53e4\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u304b\u3089\u524a\u9664)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002|\n|`max-length-bytes`          |Number |\u30ad\u30e5\u30fc\u306b\u4fdd\u5b58\u3059\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u6700\u5927\u5408\u8a08\u30b5\u30a4\u30ba\u6570 (\u3053\u308c\u3092\u8d85\u3048\u308b\u3068\u53e4\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u304b\u3089\u524a\u9664)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002      |\n|`dead-letter-exchange`      |String |dead-letter\u306b\u306a\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u8ee2\u9001\u5148\u306e\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002|\n|`dead-letter-routing-key`   |String |dead-letter\u306b\u306a\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u4ed8\u3051\u308b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30ad\u30fc\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002|\n\n***Exchanges***\n\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306b\u95a2\u3059\u308b\u30dd\u30ea\u30b7\u30fc\u3067\u3059\u3002\n\n|arguments                   |type   |description                            |\n|:---------------------------|:------|:--------------------------------------|\n|`alternate-exchange`        |String |\u4ee3\u66ff\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306e\u540d\u524d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002    |\n\n#### Highly Available Queues\n\n\u30af\u30e9\u30b9\u30bf\u30fc\u69cb\u6210\u306eRabbitMQ\u3067\u306f\u30ad\u30e5\u30fc\u3092\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u9006\u306b\u30af\u30e9\u30b9\u30bf\u30fc\u69cb\u6210\u306b\u3057\u3066\u3082\u521d\u671f\u72b6\u614b\u3067\u306f\u30ad\u30e5\u30fc\u306f\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u3055\u308c\u307e\u305b\u3093\u3002\n\u30ad\u30e5\u30fc\u306e\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u306f\u30dd\u30ea\u30b7\u30fc\u306e\u8a2d\u5b9a\u306b\u3088\u3063\u3066\u884c\u3044\u3001\u30dd\u30ea\u30b7\u30fc\u306e\u8a2d\u5b9a\u4ee5\u964d\u306b\u53d7\u4fe1\u3057\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u304b\u3089\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u304c\u884c\u308f\u308c\u307e\u3059\u3002\n\n##### \u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u7528\u306e\u30dd\u30ea\u30b7\u30fc\u306e\u4f5c\u6210\n\n**rabbitmqct\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408**\n\n```text:Synopsis\nset_policy [-p vhostpath] [--priority priority] [--apply-to apply-to] {name} {pattern} {definition}\n```\n\ndefinition\u306bjson\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u306e\u65b9\u6cd5\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n`ha-mode`\u306b\u30ad\u30e5\u30fc\u306e\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u306e\u65b9\u6cd5\u3092\u4e0b\u8a18\u306e3\u7a2e\u985e\u304b\u3089\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n|ha-mode       |description                         |\n|:-------------|:-----------------------------------|\n|`all`         |\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u3059\u3079\u3066\u306e\u30ce\u30fc\u30c9\u3067\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u3092\u884c\u3044\u307e\u3059\u3002 |\n|`exactly`     |\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u6307\u5b9a\u6570\u306e\u30ce\u30fc\u30c9\u3067\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u3092\u884c\u3044\u307e\u3059\u3002 |\n|`nodes`       |\u30af\u30e9\u30b9\u30bf\u30fc\u5185\u306e\u6307\u540d\u3057\u305f\u30ce\u30fc\u30c9\u3067\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u3092\u884c\u3044\u307e\u3059\u3002 |\n\n`ha-sync-mode`\u306b\u540c\u671f\u30e2\u30fc\u30c9\u3092\u4e0b\u8a18\u306e2\u7a2e\u985e\u304b\u3089\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n|ha-sync-mode  |description                         |\n|:-------------|:-----------------------------------|\n|`manual`      |\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u3059\u3002\u975e\u540c\u671f\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u3001\u624b\u52d5\u3067\u540c\u671f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002       |\n|`automatic`   |\u975e\u540c\u671f\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u3001\u81ea\u52d5\u3067\u540c\u671f\u3092\u884c\u3044\u307e\u3059\u3002                               |\n\n\u624b\u52d5\u3067\u540c\u671f\u3059\u308b\u306b\u306frabbitmqctl\u30b3\u30de\u30f3\u30c9\u304bmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\nrabbitmqctl\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f`sync_queue`\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```bat:sync_queue\n> rabbitmqctl.bat -n rabbit_node1@localhost -p v2 sync_queue userid:2002\nSynchronising queue 'userid:2002' in vhost 'v2' ...\n```\n\n> [RabbitMQ: Why is the default ha-sync-mode manual?] (http://serverfault.com/questions/543160/rabbitmq-why-is-the-default-ha-sync-mode-manual)\n\n`all`\u306f\u3001\u3059\u3079\u3066\u306e\u30ce\u30fc\u30c9\u3067\u30df\u30e9\u30fc\u3057\u307e\u3059\u3002\n\n```json:all\n{\"ha-mode\":\"all\", \"ha-sync-mode\": \"automatic\"}\n```\n\n`exactly`\u306f\u3001`ha-params`\u3067\u6307\u5b9a\u3057\u305f\u6570\u306e\u30ce\u30fc\u30c9\u3067\u30df\u30e9\u30fc\u3057\u307e\u3059\u3002\n\n```json:exactly\n{\"ha-mode\":\"exactly\", \"ha-params\":2, \"ha-sync-mode\":\"automatic\"}\n```\n\n`nodes`\u306f\u3001`ha-params`\u3067\u6307\u540d\u3057\u305f\u30ce\u30fc\u30c9\u3067\u30df\u30e9\u30fc\u3057\u307e\u3059\u3002\n\n```json:nodes\n{\"ha-mode\":\"nodes\", \"ha-params\":[\"rabbit_node1@localhost\",\"rabbit_node2@localhost\"]}\n```\n\n\u3053\u306e\u4f8b\u3067\u306f\u3001v2\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306euserid:1000.info\u3001userid:1001.info\u30ad\u30e5\u30fc\u3092\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u30ad\u30e5\u30fc\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u305f\u3060\u3057\u3001\u3059\u3067\u306b\u30dd\u30ea\u30b7\u30fc\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u30fc\u3092\u9ad8\u304f\u3057\u3066\u512a\u5148\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```bat:set_policy\n> rabbitmqctl.bat -n rabbit_node1@localhost -p v2 set_policy --priority 1 --apply-to queues \"ha_info\" \"^userid:.*\\.info\" \"{\"\"ha-mode\"\":\"\"all\"\", \"\"ha-sync-mode\"\":\"\"automatic\"\", \"\"message-ttl\"\":1800000}\"\nSetting policy \"ha_info\" for pattern \"^userid:.*\\\\.info\" to \"{\\\"ha-mode\\\":\\\"all\\\", \\\"ha-sync-mode\\\":\\\"automatic\\\", \\\"message-ttl\\\":1800000}\" with priority \"1\" ...\n```\n\n**management\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408**\n\n\u30df\u30e9\u30fc\u30ea\u30f3\u30b0\u7528\u306e\u30dd\u30ea\u30b7\u30fc\u3082\u901a\u5e38\u306e\u30dd\u30ea\u30b7\u30fc\u3068\u540c\u69d8\u306e\u65b9\u6cd5\u3067\u767b\u9332\u3057\u307e\u3059\u3002\n\n![add_ha_mirror_policy.png](https://qiita-image-store.s3.amazonaws.com/0/22772/53821daf-a79e-8e67-309f-c161538da460.png)\n\n\u540c\u3058\u30d1\u30bf\u30fc\u30f3\u306e\u30dd\u30ea\u30b7\u30fc\u304c2\u3064\u4f5c\u6210\u3055\u308c\u307e\u3059\u304c\u3001Priority\u306e\u9ad8\u3044\u65b9(ha_info)\u304c\u9069\u7528\u3055\u308c\u307e\u3059\u3002\n\n![all_policies_ha.png](https://qiita-image-store.s3.amazonaws.com/0/22772/368e9b02-f674-9693-bc73-e9f6ccf3e22f.png)\n\n\u30ad\u30e5\u30fc\u306e\u4e00\u89a7\u3067\u65b0\u3057\u3044\u30dd\u30ea\u30b7\u30fc\u304c\u9069\u7528\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3053\u306e\u4f8b\u3067\u306f\u30ce\u30fc\u30c9\u540d\u306e\u53f3\u5074\u306b\u3042\u308b\"+1\"\u304c\u30df\u30e9\u30fc\u3057\u3066\u3044\u308b\u30ce\u30fc\u30c9\u306e\u6570\u3092\u8868\u3057\u3066\u3044\u307e\u3059\u3002\n\n![ha_queues.png](https://qiita-image-store.s3.amazonaws.com/0/22772/1c4cb6e6-5649-fa8d-25ec-251702ebbcaa.png)\n\n\n### \u30e1\u30c3\u30bb\u30fc\u30b8 (message)\n\n\u901a\u5e38\u306fclient\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3088\u308a\u9001\u4fe1\u3055\u308c\u308b\u30c7\u30fc\u30bf\u3067\u3059\u3002\n\n#### \u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u4fe1\u3059\u308b\n\n**management\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u7528\u3059\u308b**\n\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u304b\u3089\u3082\u691c\u8a3c\u76ee\u7684\u306e\u305f\u3081\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u4fe1\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n![publish_message.png](https://qiita-image-store.s3.amazonaws.com/0/22772/f9b4c64c-0dab-b0da-1339-e8280e9fe9b1.png)\n\n\u3053\u3053\u3067\u3001\u3053\u308c\u307e\u3067\u306b\u767b\u9332\u3057\u305f\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3092\u4f7f\u3063\u3066\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u914d\u4fe1\u30c6\u30b9\u30c8\u3092\u884c\u3063\u3066\u307f\u307e\u3059\u3002\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Exchanges]\u2192\u30ea\u30b9\u30c8\u4e2d\u304b\u3089\u300cnotice.direct\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u300cPublish message\u300d\u6b04\u304b\u3089\u4e0b\u8a18\u306e\u5185\u5bb9\u3092\u5165\u529b\u3057\u3066\u300cPublish message\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u7dd1\u8272\u306e\u30c0\u30a4\u30a2\u30ed\u30b0\u306b\"Message published.\"\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u3078\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u9001\u4fe1\u306f\u6210\u529f\u3067\u3059\u3002\n\n|field         |value                   |\n|:-------------|:-----------------------|\n|Routing key   | 1000                   |\n|Delivery mode | 2 - Persistent         |\n|Headers       | (nothing)              |\n|Properties    | (nothing)              |\n|payload       |userid:1000\u3078\u30c6\u30b9\u30c8\u914d\u4fe1  |\n\n\u6b21\u306b\u3001\u30ad\u30e5\u30fc\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e[Queues]\u2192\u30ea\u30b9\u30c8\u4e2d\u304b\u3089\u300cuserid:1000\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u300cDetails\u300d\u6b04\u306e\"Messages\"\u304c\u4e0b\u56f3\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308c\u3070\u3001\u30ad\u30e5\u30fc\u307e\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u914d\u9001\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n![queue_details.png](https://qiita-image-store.s3.amazonaws.com/0/22772/32a5bed8-0b6d-fbb6-1561-f6ea13624ad6.png)\n\n\u307e\u305f\u300cGet messages\u300d\u6b04\u3067\u53d7\u4fe1\u3057\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nRequeue\u3092\u300cNo\u300d\u306b\u5909\u3048\u3066\u300cGet Message(s)\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n![get_message.png](https://qiita-image-store.s3.amazonaws.com/0/22772/fe4e7e96-100b-b8b6-a298-41127f921c03.png)\n\n##### properties\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u9001\u4fe1\u6642\u306b\u8a2d\u5b9a\u3067\u304d\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\n\n**Delivery mode**\n\n\u914d\u4fe1\u30e2\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n* 1 Non-persistent : \u30e1\u30c3\u30bb\u30fc\u30b8\u3092disk\u306b\u4fdd\u5b58\u3057\u307e\u305b\u3093\u3002RabbitMQ\u30b5\u30fc\u30d0\u30fc\u3092\u505c\u6b62\u3057\u305f\u308a\u30af\u30e9\u30c3\u30b7\u30e5\u3057\u305f\u5834\u5408\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u5931\u308f\u308c\u307e\u3059\u3002\n* 2 Persistent : \u30ad\u30e5\u30fc\u304c`Durability`\u306e\u3068\u304d\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092disk\u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\n**Headers**\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u30d8\u30c3\u30c0\u30fc\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\u30d8\u30c3\u30c0\u30fc\u306b\u306f\u4efb\u610f\u306e\u540d\u524d\u3068\u5024\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30a8\u30af\u30b9\u30c1\u30a7\u30f3\u30b8\u306eheaders\u306f\u3053\u306e\u5024\u3092\u898b\u3066\u914d\u9001\u5148\u306e\u30ad\u30e5\u30fc\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n**Properties**\n\nYou can set other message properties here (delivery mode and headers are pulled out as the most common cases).\nInvalid properties will be ignored. Valid properties are:\n\n\u8a2d\u5b9a\u3067\u304d\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u4e00\u89a7\u3067\u3059\u3002\n\n* content_type\n* content_encoding\n* priority\n* correlation_id\n* reply_to\n* expiration\n* message_id\n* timestamp\n* type\n* user_id\n* app_id\n* cluster_id\n\n**Payload**\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u672c\u4f53\u3067\u3059\u3002\n\n#### Priority Queue Support\n\n\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u30ad\u30e5\u30fc\u304c\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n\n> RabbitMQ has priority queue implementation in the core as of version 3.5.0.\n\n\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u30ad\u30e5\u30fc\u306f`x-max-priority`\u306b\u6700\u5927\u512a\u5148\u5ea6\u3092\u6307\u5b9a\u3057\u3066\u767b\u9332\u3057\u307e\u3059\u3002\n\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u3092\u4ed8\u3051\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u30fc\u30ad\u30e5\u30fc\u3078\u914d\u9001\u3059\u308b\u3068\u30b3\u30f3\u30b7\u30e5\u30fc\u30de\u30fc\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u30fc\u306e\u9ad8\u3044\u30e1\u30c3\u30bb\u30fc\u30b8\u304b\u3089\u9806\u306b\u53d7\u4fe1\u3057\u307e\u3059\u3002\n\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u306f\u6570\u5024\u306e\u5927\u304d\u3044\u65b9\u304c\u3088\u308a\u512a\u5148\u5ea6\u304c\u9ad8\u3044\u3068\u5224\u65ad\u3055\u308c\u307e\u3059\u3002\u6307\u5b9a\u3067\u304d\u308b\u5024\u306e\u7bc4\u56f2\u306f0\uff5e9\u3067\u3059\u3002\n\u306a\u304a\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u304c\u6700\u5927\u512a\u5148\u5ea6\u3092\u8d85\u3048\u3066\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u3066\u3082\u62d2\u5426\u3055\u308c\u308b\u3053\u3068\u306f\u7121\u304f\u6700\u5927\u5024\u3068\u307f\u306a\u3055\u308c\u307e\u3059\u3002\uff08\u305f\u3068\u3048\u3070\u3001\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u30fc\u3092100\u306b\u3057\u3066\u3082\u6700\u5927\u5024\u306e9\u3068\u3057\u3066\u6271\u308f\u308c\u307e\u3059\u3002\uff09\n\n\u4e0b\u8868\u306f\u3001\u6700\u5927\u512a\u5148\u5ea6\u30925\u306b\u8a2d\u5b9a\u3057\u305f\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u30fc\u30ad\u30e5\u30fc\u3078\u3001\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u30fc\u30921\uff5e5\u306e\u7bc4\u56f2\u3067\u8a2d\u5b9a\u3057\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u9001\u4fe1\u9806\u3068\u53d7\u4fe1\u9806\u306e\u95a2\u4fc2\u3067\u3059\u3002\n\n|\u9001\u4fe1\u9806|\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3|\u53d7\u4fe1\u9806|\n|:---:|:-----------:|:----:|\n|1    | 5           |1     |\n|2    | 4           |5     |\n|3    | 3           |7     |\n|4    | 5           |2     |\n|5    | 2           |8     |\n|6    | 1           |10    |\n|7    | 5           |3     |\n|8    | 6           |4     |\n|9    | 2           |9     |\n|10   | 4           |6     |\n\n> [Priority Queue Support] (https://www.rabbitmq.com/priority.html)\n\n## 3. rabbitmqctl\u30b3\u30de\u30f3\u30c9\u306e\u30de\u30cb\u30e5\u30a2\u30eb\n\n```text:Synopsis\nrabbitmqctl [-n node] [-q] {command} [command options...]\n```\n\n\u53c2\u8003\n\n> [rabbitmqctl(1) manual page] (https://www.rabbitmq.com/man/rabbitmqctl.1.man.html)\n\n## 4. Tip`s\n\n\u3061\u3087\u3063\u3068\u4fbf\u5229\u306a\u5c0f\u6280\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n### erl.exe\u30d7\u30ed\u30bb\u30b9\u306e\u5b9f\u884c\u5f15\u6570\u306e\u78ba\u8a8d\n\nRabbitMQ\u30b5\u30fc\u30d0\u30fc\u3092\u5b9f\u884c\u3059\u308b\u969b\u306e\u5f15\u6570\u3092\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\n\n```bat\n> wmic.exe process where \"name=\\\"erl.exe\\\"\" get name,commandline\n```\n\n### File descriptors\u6b04\u306e\u8868\u793a\u3092\u6709\u52b9\u306b\u3059\u308b\n\nmanagement\u30d7\u30e9\u30b0\u30a4\u30f3\u3067File descriptors\u6b04\u306e\u8868\u793a\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u5225\u9014[Microsoft](https://technet.microsoft.com/en-us/sysinternals/bb896655)\u3088\u308aHandle.exe\u3092\u53d6\u5f97\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u53d6\u5f97\u3057\u305fHandle.exe\u306fPath\u306e\u901a\u3063\u305f\u5834\u6240\u3067\u3042\u308c\u3070\u3069\u3053\u306b\u7f6e\u3044\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\u3002\n"}