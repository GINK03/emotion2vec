{"context": " More than 1 year has passed since last update.\u3053\u3093\u306b\u3061\u306f\u3001LED\u304c\u5927\u597d\u304d\u306akentya6\u3067\u3059\u3002\n\u4eca\u56de\u306f\u3001Nexturn\u3068\u3044\u3046LED\u96fb\u7403\u3092iOS\u304b\u3089\u5236\u5fa1\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\nNexturn\u306f\u3001\u4e0b\u306e\u5199\u771f\u306e\u3084\u3064\u3067\u3059\u3002\u79cb\u8449\u539f\u306e\u30c9\u30b9\u30d1\u30e9\u3067\u8cb7\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n\nNexturn\u306f\u3001\u898b\u305f\u611f\u3058\u666e\u901a\u306e\u96fb\u7403\u3067\u3059\u304c\u3001BLE\u901a\u4fe1\u3067\u69d8\u3005\u306a\u8272\u306b\u5909\u5316\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u5024\u6bb5\u30823000\u5186\u3061\u3087\u3063\u3068\u306a\u306e\u3067\u3001\u67d0\u30b9\u30de\u30fc\u30c8LED\u96fb\u7403\u3088\u308a\u3082\u5b89\u304f\u30b9\u30de\u30fc\u30c8LED\u96fb\u7403\u3092\u624b\u306b\u5165\u308c\u3089\u308c\u307e\u3057\u305f\u3002\n\u3067\u306fNexturn\u3092\u4f7f\u3063\u3066\u3001\u30a4\u30eb\u30df\u30cd\u30fc\u30b7\u30e7\u30f3\u3063\u307d\u3044\u30af\u30ea\u30b9\u30de\u30b9\u306a\u96f0\u56f2\u6c17\u3092\u611f\u3058\u308b\u3053\u3068\u304c\u3067\u304d\u308biOS\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\niOS\u3067BLE\u901a\u4fe1\u3092\u3059\u308b\u6d41\u308c\n\u4eca\u56de\u306f\u3001\u5927\u96d1\u628a\u3067\u3059\u304c\u4ee5\u4e0b\u306e\u3088\u3046\u306bBLE\u901a\u4fe1\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u30a2\u30d7\u30ea\u8d77\u52d5\nNexturn\u3092\u691c\u7d22\n\u63a5\u7d9a\nService\u3092\u53d6\u5f97\nCharacteristic\u3092\u53d6\u5f97\n\u30e6\u30fc\u30b6\u304c\u62bc\u3057\u305f\u30dc\u30bf\u30f3\u306b\u5bfe\u5fdc\u3059\u308bCharacteristic\u3092\u6307\u5b9a\u3057\u3066\u30c7\u30fc\u30bf\u901a\u4fe1\u3057\u3001LED\u3092\u70b9\u706f\n\nNexturn\u3068\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u3001\u307e\u305aNexturn\u306e\u30c7\u30d0\u30a4\u30b9\u60c5\u5831\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\nNexturn\u306e\u30c7\u30d0\u30a4\u30b9\u60c5\u5831\u3092\u78ba\u8a8d\u3059\u308b\n\u4eca\u56de\u306f\u3001LightBlue\u3068\u3044\u3046\u30a2\u30d7\u30ea\u3092\u4f7f\u7528\u3057\u3066\u3001Nexturn\u306e\u30c7\u30d0\u30a4\u30b9\u60c5\u5831\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\nNexturn\u306e\u96fb\u6e90\u3092\u5165\u308c\u3001LightBlue\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\u3059\u308b\u3068\u3001\u306a\u306b\u3084\u3089Nexturn\u3089\u3057\u304d\u30c7\u30d0\u30a4\u30b9\u304c\u691c\u51fa\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u3053\u306eNexturn\u306e\u90e8\u5206\u3092\u30bf\u30c3\u30d7\u3059\u308b\u3068\u3001\u30c7\u30d0\u30a4\u30b9\u60c5\u5831\u304c\u6b21\u306e\u753b\u50cf\u306e\u3088\u3046\u306b\u51fa\u3066\u304d\u307e\u3059\u3002\n\n\u753b\u50cf\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308bUUID\u3092\u4f7f\u7528\u3057\u3066\u3001iOS\u30c7\u30d0\u30a4\u30b9\u3068Nexturn\u3092\u63a5\u7d9a\u3057\u307e\u3059\u3002\n\u30c7\u30d0\u30a4\u30b9\u60c5\u5831\u3092\u3069\u3093\u3069\u3093\u773a\u3081\u3066\u3044\u304f\u3068\u3001\u4f55\u3084\u3089LED\u306e\u8272\u3092\u5909\u5316\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u305d\u3046\u306a\u7b87\u6240\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\n\n\u3053\u308c\u3089\u306e\u60c5\u5831\u3092\u4f7f\u3063\u3066BLE\u901a\u4fe1\u3092\u3059\u308c\u3070\u70b9\u706f\u3055\u305b\u3089\u308c\u305d\u3046\u3067\u3059\uff01\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u5b9f\u969b\u306b\u3053\u308c\u3089\u306e\u60c5\u5831\u3092\u4f7f\u3063\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u958b\u767a\u3057\u307e\u3059\u3002\n\n\u30a2\u30d7\u30ea\u958b\u767a\nNexturn\u3068\u306e\u63a5\u7d9a\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3068\u3001LED\u3092\u70b9\u706f\u3055\u305b\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u60c5\u5831\u304c\u5206\u304b\u3063\u305f\u3068\u3053\u308d\u3067\u3001\u3053\u308c\u304b\u3089\u5b9f\u969b\u306bNexturn\u3092\u5236\u5fa1\u3059\u308biOS\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u958b\u767a\u3057\u3066\u307f\u307e\u3059\u3002\n\u4eca\u56de\u958b\u767a\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u6a5f\u80fd\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u3068\u3057\u307e\u3057\u305f\u3002\n\n\u8d64\u3001\u9752\u3001\u7dd1\u3001\u767d\u305d\u308c\u305e\u308c\u306e\u8272\u3054\u3068\u306b\u72ec\u7acb\u3057\u3066\u70b9\u706f\n\u5168\u8272\u540c\u6642\u306b\u70b9\u706f\n\u6d88\u706f\n\n\u305d\u308c\u305e\u308c\u306e\u8272\u3054\u3068\u3001\u6a5f\u80fd\u3054\u3068\u306b\u30dc\u30bf\u30f3\u3092\u5272\u308a\u5f53\u3066\u308b\u306e\u3067\u3001\u5fc5\u8981\u306a\u30dc\u30bf\u30f3\u306f\uff16\u500b\u306b\u306a\u308a\u307e\u3059\u3002\n\u307e\u305f\u3001\u6bce\u56de\u540c\u3058\u660e\u308b\u3055\u3060\u3068\u3061\u3087\u3063\u3068\u5358\u7d14\u904e\u304e\u308b\u306e\u3067\u3001\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u5ea6\u306b255\u6bb5\u968e\u306e\u660e\u308b\u3055\u304c\u30e9\u30f3\u30c0\u30e0\u3067\u6c7a\u5b9a\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u305d\u308c\u3067\u306f\u3001\u5148\u307b\u3069\u8ff0\u3079\u305fBLE\u901a\u4fe1\u306e\u6d41\u308c\u306b\u6cbf\u3063\u3066\u3001\u5b9f\u969b\u306bNexturn\u3092\u5236\u5fa1\u3059\u308b\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u69cb\u6210\n\u4eca\u56de\u306f\u3001\u4e3b\u306b3\u3064\u306e\u30af\u30e9\u30b9\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u88fd\u4f5c\u3057\u307e\u3057\u305f\u3002\n\u305d\u308c\u3067\u306f\u3001\u5b9f\u969b\u306b\u66f8\u3044\u305f\u30b3\u30fc\u30c9\u306e\u8aac\u660e\u3092\u7c21\u5358\u306b\u884c\u3044\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n1. ViewController\nViewController\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u3068\u304d\u306e\u51e6\u7406\u3092\u8a18\u8ff0\nCentralManager\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u3001Nexturn\u3068\u901a\u4fe1\u3059\u308b\u6e96\u5099\u3092\u958b\u59cb\n\n\nViewController.swift\nimport UIKit\n\nclass ViewController: UIViewController {\n    @IBOutlet private weak var redButton: UIButton!\n    @IBOutlet private weak var greenButton: UIButton!\n    @IBOutlet private weak var blueButton: UIButton!\n    @IBOutlet private weak var whiteButton: UIButton!\n    @IBOutlet private weak var randomButton: UIButton!\n    @IBOutlet private weak var offButton: UIButton!\n    var centralManager = CentralManager.alloc()\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n        let queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)\n        centralManager = CentralManager(delegate: self.centralManager, queue: queue, options: nil)\n    }\n\n    // \u62bc\u3055\u308c\u305f\u30dc\u30bf\u30f3\u306b\u5bfe\u5fdc\u3057\u305f\u30c7\u30fc\u30bf\u3092\u6e21\u3059\n    @IBAction func ledButtonTapped(sender: AnyObject) {\n        centralManager.ledButtonTapped(sender.tag)\n    }\n}\n\n\n\n2. CentralManager\nCentralManager\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\n\nBLE\u30c7\u30d0\u30a4\u30b9(\u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u5074)\u3092\u691c\u7d22\n\u691c\u7d22\u3057\u305f\u30c7\u30d0\u30a4\u30b9\u304cNexturn\u3060\u3063\u305f\u5834\u5408\u3001\u63a5\u7d9a\u3092\u958b\u59cb\nNexturn\u306b\u63a5\u7d9a\u5f8c\u3001Service\u3092\u691c\u7d22\n\u62bc\u3055\u308c\u305f\u30dc\u30bf\u30f3\u60c5\u5831\u3092Nexturn\u306b\u901a\u77e5\n\n\nCentralManager.swift\nimport Foundation\nimport CoreBluetooth\n\nclass CentralManager: CBCentralManager, CBCentralManagerDelegate {\n    private var nexturnObject = NexturnObject()\n\n    override init(delegate: CBCentralManagerDelegate!, queue: dispatch_queue_t!, options: [NSObject : AnyObject]!) {\n        super.init(delegate: delegate, queue: queue, options: options)\n        self.delegate = self\n    }\n\n    // MARK: - CBCentralManager Delegate Method\n    // CBCentralManager\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u66f4\u65b0\u5f8c\u306b\u547c\u3070\u308c\u308b\n    func centralManagerDidUpdateState(central: CBCentralManager!) {\n        switch central.state {\n        case .PoweredOn:\n            let options = [\"CBCentralManagerScanOptionAllowDuplicatesKey\" : true]\n            scanForPeripheralsWithServices(nil, options: options)\n        default:\n            break\n        }\n    }\n\n    // \u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u767a\u898b\u6642\u306b\u547c\u3070\u308c\u308b\n    func centralManager(central: CBCentralManager!, didDiscoverPeripheral peripheral: CBPeripheral!, advertisementData: [NSObject : AnyObject]!, RSSI: NSNumber!) {\n        switch peripheral.name {\n        case nexturnObject.kNexturnName:\n            peripheral.delegate = nexturnObject\n            nexturnObject.peripheral = peripheral\n            connectPeripheral(nexturnObject.peripheral, options: nil)\n        default:\n            break\n        }\n    }\n\n    // \u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u3068\u63a5\u7d9a\u5f8c\u306b\u547c\u3070\u308c\u308b\n    func centralManager(central: CBCentralManager!, didConnectPeripheral peripheral: CBPeripheral!) {\n        switch peripheral.name {\n        case nexturnObject.kNexturnName:\n            let UUID = CBUUID(string: nexturnObject.kNexturnLEDServiceUUID)\n            nexturnObject.peripheral?.discoverServices([UUID])\n            stopScan()\n        default:\n            break\n        }\n    }\n\n    // MARK: - Call from IBAction\n    // \u62bc\u3055\u308c\u305f\u30dc\u30bf\u30f3\u306b\u5bfe\u5fdc\u3057\u305f\u30c7\u30fc\u30bf\u3092\u6e21\u3059\n    func ledButtonTapped(tag: NSInteger) {\n        nexturnObject.ledButtonTapped(tag)\n    }\n}\n\n\n\n3. NexturnObject\nNexturnObject\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\n\nNexturn\u306eService\u3092\u53d6\u5f97\nNexturn\u306eCharacteristic\u3092\u53d6\u5f97\n\u30dc\u30bf\u30f3\u3092\u62bc\u3055\u308c\u305f\u3068\u304d\u3001\u5404\u30dc\u30bf\u30f3\u306b\u5bfe\u5fdc\u3059\u308b\u30c7\u30fc\u30bf\u3092Nexturn\u306b\u9001\u4fe1\n\n\u5404Characteristic\u306b\u5bfe\u3057\u3066\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3059\u308b\u3053\u3068\u3067\u3001\u5bfe\u5fdc\u3059\u308b\u8272\u304c\u5149\u308b\u3068\u3044\u3046\u4ed5\u7d44\u307f\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u6307\u5b9a\u3059\u308bCharacteristic\u306f\u3001\u524d\u8ff0\u3057\u305f\u30c7\u30d0\u30a4\u30b9\u60c5\u5831\u3067\u78ba\u8a8d\u3057\u305f\u300cRed\u300d\u3084\u300cBlue\u300d\u3068\u3044\u3063\u305f\u30d7\u30ed\u30d1\u30c6\u30a3\u3067\u3059\u3002\n\nNexturnObject.swift\nimport Foundation\nimport CoreBluetooth\n\nclass NexturnObject: NSObject, CBPeripheralDelegate {\n    // MARK: - Please Replace This UUID to Your's Nexturn UUID\n    let kNexturnUUID = \"F71FCA69-78A5-B654-9667-F27BF8E5CAC9\"\n    let kNexturnName = \"Nexturn\"\n    let kNexturnLEDServiceUUID = \"FFE0\"\n    var peripheral: CBPeripheral?\n    private var characteristicArray = [CBCharacteristic]()\n\n    private enum ledButtonTag: Int {\n        case Red, Green, Blue, White, Random, Off\n\n        private var type: NSData {\n            get {\n                switch self {\n                case .Red, .Green, .Blue, .White:\n                    return createLedData(UInt8(arc4random_uniform(255)))\n                case .Random:\n                    return createLedData(arc4random_uniform(UInt32.max))\n                case .Off:\n                    return createLedData(UInt32(0))\n                }\n            }\n        }\n\n        // LED\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n        func createLedData(hexData: UInt32) -> NSData {\n            let red   = Byte((hexData & 0xFF000000) >> 24)\n            let green = Byte((hexData & 0x00FF0000) >> 16)\n            let blue  = Byte((hexData & 0x0000FF00) >> 8)\n            let white = Byte(hexData & 0x000000FF)\n            var data  = [red, green, blue, white]\n\n            return NSData(bytes: &data, length: 4)\n        }\n\n        // LED\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n        func createLedData(hexData: UInt8) -> NSData {\n            var data = Byte(hexData)\n\n            return NSData(bytes: &data, length: 1)\n        }\n    }\n\n    // \u62bc\u3055\u308c\u305f\u30dc\u30bf\u30f3\u306b\u5bfe\u5fdc\u3057\u305f\u30c7\u30fc\u30bf\u3092Nexturn\u306b\u9001\u4fe1\n    func ledButtonTapped(tag: NSInteger) {\n        let buttonTag = ledButtonTag(rawValue: tag)!\n\n        switch buttonTag {\n        case .Red, .Green, .Blue, .White:\n            self.peripheral?.writeValue(buttonTag.type, forCharacteristic: characteristicArray[tag], type: .WithResponse)\n        case .Random, .Off:\n            self.peripheral?.writeValue(buttonTag.type, forCharacteristic: characteristicArray[4], type: .WithResponse)\n        }\n    }\n\n    // MARK: - CBPeripheralDelegate\n    // Service\u767a\u898b\u6642\u306b\u547c\u3070\u308c\u308b\n    func peripheral(peripheral: CBPeripheral!, didDiscoverServices error: NSError!) {\n        for service in peripheral.services {\n            self.peripheral?.discoverCharacteristics(nil, forService: service as CBService)\n        }\n    }\n\n    // Characteristic\u767a\u898b\u6642\u306b\u547c\u3070\u308c\u308b\n    func peripheral(peripheral: CBPeripheral!, didDiscoverCharacteristicsForService service: CBService!, error: NSError!) {\n        for characteristic in service.characteristics {\n            self.characteristicArray.append(characteristic as CBCharacteristic)\n        }\n    }\n}\n\n\n\n\u30c7\u30e2\n\u4eca\u56de\u958b\u767a\u3057\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u3001\u3053\u306e\u3088\u3046\u306a\u753b\u9762\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u305d\u308c\u305e\u308c\u306e\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u3001\u30dc\u30bf\u30f3\u306b\u5bfe\u5fdc\u3057\u305f\u8272\u306bNexturn\u304c\u5149\u3063\u3066\u304f\u308c\u307e\u3059\u3002\n\u30c7\u30e2\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\n\u62bc\u3057\u305f\u30dc\u30bf\u30f3\u306b\u5fdc\u3058\u3066Nexturn\u306e\u8272\u304c\u5909\u308f\u3063\u3066\u3044\u307e\u3059\u306d\uff01\n\u4eca\u65e5\u306f\u30af\u30ea\u30b9\u30de\u30b9\u30fb\u30a4\u30d6\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u30af\u30ea\u30b9\u30de\u30b9\u30c4\u30ea\u30fc\u3092\u96a3\u306b\u7f6e\u3044\u305f\u3060\u3051\u3067\u3059\u304c\u30af\u30ea\u30b9\u30de\u30b9\u611f\u3092\u6f14\u51fa\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u4eca\u56de\u4f5c\u6210\u3057\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306fGitHub\u3067\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u307f\u306a\u3055\u3093\u81ea\u7531\u306bNexturn\u3092\u5236\u5fa1\u3057\u3066\u904a\u3093\u3067\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\u3053\u3093\u306b\u3061\u306f\u3001LED\u304c\u5927\u597d\u304d\u306akentya6\u3067\u3059\u3002\n\n\u4eca\u56de\u306f\u3001Nexturn\u3068\u3044\u3046LED\u96fb\u7403\u3092iOS\u304b\u3089\u5236\u5fa1\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\nNexturn\u306f\u3001\u4e0b\u306e\u5199\u771f\u306e\u3084\u3064\u3067\u3059\u3002\u79cb\u8449\u539f\u306e\u30c9\u30b9\u30d1\u30e9\u3067\u8cb7\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n\n![Nexturn](https://qiita-image-store.s3.amazonaws.com/0/2037/fd01e8c0-0b34-5bfd-8a11-11e2e35a370e.png)\n\nNexturn\u306f\u3001\u898b\u305f\u611f\u3058\u666e\u901a\u306e\u96fb\u7403\u3067\u3059\u304c\u3001BLE\u901a\u4fe1\u3067\u69d8\u3005\u306a\u8272\u306b\u5909\u5316\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u5024\u6bb5\u30823000\u5186\u3061\u3087\u3063\u3068\u306a\u306e\u3067\u3001[\u67d0\u30b9\u30de\u30fc\u30c8LED\u96fb\u7403](http://store.apple.com/jp/product/HA780J/A/philips-hue-\u30b7\u30f3\u30b0\u30eb\u30e9\u30f3\u30d7)\u3088\u308a\u3082\u5b89\u304f\u30b9\u30de\u30fc\u30c8LED\u96fb\u7403\u3092\u624b\u306b\u5165\u308c\u3089\u308c\u307e\u3057\u305f\u3002\n\n\u3067\u306fNexturn\u3092\u4f7f\u3063\u3066\u3001\u30a4\u30eb\u30df\u30cd\u30fc\u30b7\u30e7\u30f3\u3063\u307d\u3044\u30af\u30ea\u30b9\u30de\u30b9\u306a\u96f0\u56f2\u6c17\u3092\u611f\u3058\u308b\u3053\u3068\u304c\u3067\u304d\u308biOS\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\n## iOS\u3067BLE\u901a\u4fe1\u3092\u3059\u308b\u6d41\u308c\n\u4eca\u56de\u306f\u3001\u5927\u96d1\u628a\u3067\u3059\u304c\u4ee5\u4e0b\u306e\u3088\u3046\u306bBLE\u901a\u4fe1\u3092\u884c\u3044\u307e\u3059\u3002\n\n1. \u30a2\u30d7\u30ea\u8d77\u52d5\n2. Nexturn\u3092\u691c\u7d22\n3. \u63a5\u7d9a\n4. Service\u3092\u53d6\u5f97\n5. Characteristic\u3092\u53d6\u5f97\n6. \u30e6\u30fc\u30b6\u304c\u62bc\u3057\u305f\u30dc\u30bf\u30f3\u306b\u5bfe\u5fdc\u3059\u308bCharacteristic\u3092\u6307\u5b9a\u3057\u3066\u30c7\u30fc\u30bf\u901a\u4fe1\u3057\u3001LED\u3092\u70b9\u706f\n\nNexturn\u3068\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u3001\u307e\u305aNexturn\u306e\u30c7\u30d0\u30a4\u30b9\u60c5\u5831\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n## Nexturn\u306e\u30c7\u30d0\u30a4\u30b9\u60c5\u5831\u3092\u78ba\u8a8d\u3059\u308b\n\u4eca\u56de\u306f\u3001[LightBlue](https://itunes.apple.com/jp/app/lightblue-bluetooth-low-energy/id557428110?mt=8)\u3068\u3044\u3046\u30a2\u30d7\u30ea\u3092\u4f7f\u7528\u3057\u3066\u3001Nexturn\u306e\u30c7\u30d0\u30a4\u30b9\u60c5\u5831\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\nNexturn\u306e\u96fb\u6e90\u3092\u5165\u308c\u3001LightBlue\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\u3059\u308b\u3068\u3001\u306a\u306b\u3084\u3089Nexturn\u3089\u3057\u304d\u30c7\u30d0\u30a4\u30b9\u304c\u691c\u51fa\u3055\u308c\u307e\u3057\u305f\u3002\n\n![Nexturn\u691c\u51fa](https://qiita-image-store.s3.amazonaws.com/0/2037/b255b5cc-55b8-59f5-9616-e68e04941ba1.png)\n\n\u3053\u306eNexturn\u306e\u90e8\u5206\u3092\u30bf\u30c3\u30d7\u3059\u308b\u3068\u3001\u30c7\u30d0\u30a4\u30b9\u60c5\u5831\u304c\u6b21\u306e\u753b\u50cf\u306e\u3088\u3046\u306b\u51fa\u3066\u304d\u307e\u3059\u3002\n\n![Nexturn\u30c7\u30d0\u30a4\u30b9\u60c5\u5831](https://qiita-image-store.s3.amazonaws.com/0/2037/3a64ccf7-0517-2b68-5eb8-c120706bd187.png)\n\n\u753b\u50cf\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308bUUID\u3092\u4f7f\u7528\u3057\u3066\u3001iOS\u30c7\u30d0\u30a4\u30b9\u3068Nexturn\u3092\u63a5\u7d9a\u3057\u307e\u3059\u3002\n\n\u30c7\u30d0\u30a4\u30b9\u60c5\u5831\u3092\u3069\u3093\u3069\u3093\u773a\u3081\u3066\u3044\u304f\u3068\u3001\u4f55\u3084\u3089LED\u306e\u8272\u3092\u5909\u5316\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u305d\u3046\u306a\u7b87\u6240\u304c\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\n\n![NexturnLED\u60c5\u5831](https://qiita-image-store.s3.amazonaws.com/0/2037/70cafc55-fb33-f834-27b9-7390998419ab.png)\n\n\u3053\u308c\u3089\u306e\u60c5\u5831\u3092\u4f7f\u3063\u3066BLE\u901a\u4fe1\u3092\u3059\u308c\u3070\u70b9\u706f\u3055\u305b\u3089\u308c\u305d\u3046\u3067\u3059\uff01\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u5b9f\u969b\u306b\u3053\u308c\u3089\u306e\u60c5\u5831\u3092\u4f7f\u3063\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u958b\u767a\u3057\u307e\u3059\u3002\n\n## \u30a2\u30d7\u30ea\u958b\u767a\nNexturn\u3068\u306e\u63a5\u7d9a\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3068\u3001LED\u3092\u70b9\u706f\u3055\u305b\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u60c5\u5831\u304c\u5206\u304b\u3063\u305f\u3068\u3053\u308d\u3067\u3001\u3053\u308c\u304b\u3089\u5b9f\u969b\u306bNexturn\u3092\u5236\u5fa1\u3059\u308biOS\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u958b\u767a\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u4eca\u56de\u958b\u767a\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u6a5f\u80fd\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u3068\u3057\u307e\u3057\u305f\u3002\n\n- \u8d64\u3001\u9752\u3001\u7dd1\u3001\u767d\u305d\u308c\u305e\u308c\u306e\u8272\u3054\u3068\u306b\u72ec\u7acb\u3057\u3066\u70b9\u706f\n- \u5168\u8272\u540c\u6642\u306b\u70b9\u706f\n- \u6d88\u706f\n\n\u305d\u308c\u305e\u308c\u306e\u8272\u3054\u3068\u3001\u6a5f\u80fd\u3054\u3068\u306b\u30dc\u30bf\u30f3\u3092\u5272\u308a\u5f53\u3066\u308b\u306e\u3067\u3001\u5fc5\u8981\u306a\u30dc\u30bf\u30f3\u306f\uff16\u500b\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u6bce\u56de\u540c\u3058\u660e\u308b\u3055\u3060\u3068\u3061\u3087\u3063\u3068\u5358\u7d14\u904e\u304e\u308b\u306e\u3067\u3001\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u5ea6\u306b255\u6bb5\u968e\u306e\u660e\u308b\u3055\u304c\u30e9\u30f3\u30c0\u30e0\u3067\u6c7a\u5b9a\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\u305d\u308c\u3067\u306f\u3001\u5148\u307b\u3069\u8ff0\u3079\u305fBLE\u901a\u4fe1\u306e\u6d41\u308c\u306b\u6cbf\u3063\u3066\u3001\u5b9f\u969b\u306bNexturn\u3092\u5236\u5fa1\u3059\u308b\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\n\n## \u30d7\u30ed\u30b0\u30e9\u30e0\u69cb\u6210\n\u4eca\u56de\u306f\u3001\u4e3b\u306b3\u3064\u306e\u30af\u30e9\u30b9\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u88fd\u4f5c\u3057\u307e\u3057\u305f\u3002\n\n\u305d\u308c\u3067\u306f\u3001\u5b9f\u969b\u306b\u66f8\u3044\u305f\u30b3\u30fc\u30c9\u306e\u8aac\u660e\u3092\u7c21\u5358\u306b\u884c\u3044\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n### 1. ViewController\nViewController\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\n\n1. \u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u3068\u304d\u306e\u51e6\u7406\u3092\u8a18\u8ff0\n2. CentralManager\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u3001Nexturn\u3068\u901a\u4fe1\u3059\u308b\u6e96\u5099\u3092\u958b\u59cb\n\n```swift:ViewController.swift\nimport UIKit\n\nclass ViewController: UIViewController {\n    @IBOutlet private weak var redButton: UIButton!\n    @IBOutlet private weak var greenButton: UIButton!\n    @IBOutlet private weak var blueButton: UIButton!\n    @IBOutlet private weak var whiteButton: UIButton!\n    @IBOutlet private weak var randomButton: UIButton!\n    @IBOutlet private weak var offButton: UIButton!\n    var centralManager = CentralManager.alloc()\n    \n    override func viewDidLoad() {\n        super.viewDidLoad()\n        let queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)\n        centralManager = CentralManager(delegate: self.centralManager, queue: queue, options: nil)\n    }\n\n    // \u62bc\u3055\u308c\u305f\u30dc\u30bf\u30f3\u306b\u5bfe\u5fdc\u3057\u305f\u30c7\u30fc\u30bf\u3092\u6e21\u3059\n    @IBAction func ledButtonTapped(sender: AnyObject) {\n        centralManager.ledButtonTapped(sender.tag)\n    }\n}\n```\n\n### 2. CentralManager\nCentralManager\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\n\n1. BLE\u30c7\u30d0\u30a4\u30b9(\u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u5074)\u3092\u691c\u7d22\n2. \u691c\u7d22\u3057\u305f\u30c7\u30d0\u30a4\u30b9\u304cNexturn\u3060\u3063\u305f\u5834\u5408\u3001\u63a5\u7d9a\u3092\u958b\u59cb\n3. Nexturn\u306b\u63a5\u7d9a\u5f8c\u3001Service\u3092\u691c\u7d22\n4. \u62bc\u3055\u308c\u305f\u30dc\u30bf\u30f3\u60c5\u5831\u3092Nexturn\u306b\u901a\u77e5\n\n```swift:CentralManager.swift\nimport Foundation\nimport CoreBluetooth\n\nclass CentralManager: CBCentralManager, CBCentralManagerDelegate {\n    private var nexturnObject = NexturnObject()\n    \n    override init(delegate: CBCentralManagerDelegate!, queue: dispatch_queue_t!, options: [NSObject : AnyObject]!) {\n        super.init(delegate: delegate, queue: queue, options: options)\n        self.delegate = self\n    }\n    \n    // MARK: - CBCentralManager Delegate Method\n    // CBCentralManager\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u66f4\u65b0\u5f8c\u306b\u547c\u3070\u308c\u308b\n    func centralManagerDidUpdateState(central: CBCentralManager!) {\n        switch central.state {\n        case .PoweredOn:\n            let options = [\"CBCentralManagerScanOptionAllowDuplicatesKey\" : true]\n            scanForPeripheralsWithServices(nil, options: options)\n        default:\n            break\n        }\n    }\n    \n    // \u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u767a\u898b\u6642\u306b\u547c\u3070\u308c\u308b\n    func centralManager(central: CBCentralManager!, didDiscoverPeripheral peripheral: CBPeripheral!, advertisementData: [NSObject : AnyObject]!, RSSI: NSNumber!) {\n        switch peripheral.name {\n        case nexturnObject.kNexturnName:\n            peripheral.delegate = nexturnObject\n            nexturnObject.peripheral = peripheral\n            connectPeripheral(nexturnObject.peripheral, options: nil)\n        default:\n            break\n        }\n    }\n    \n    // \u30da\u30ea\u30d5\u30a7\u30e9\u30eb\u3068\u63a5\u7d9a\u5f8c\u306b\u547c\u3070\u308c\u308b\n    func centralManager(central: CBCentralManager!, didConnectPeripheral peripheral: CBPeripheral!) {\n        switch peripheral.name {\n        case nexturnObject.kNexturnName:\n            let UUID = CBUUID(string: nexturnObject.kNexturnLEDServiceUUID)\n            nexturnObject.peripheral?.discoverServices([UUID])\n            stopScan()\n        default:\n            break\n        }\n    }\n    \n    // MARK: - Call from IBAction\n    // \u62bc\u3055\u308c\u305f\u30dc\u30bf\u30f3\u306b\u5bfe\u5fdc\u3057\u305f\u30c7\u30fc\u30bf\u3092\u6e21\u3059\n    func ledButtonTapped(tag: NSInteger) {\n        nexturnObject.ledButtonTapped(tag)\n    }\n}\n```\n\n### 3. NexturnObject\nNexturnObject\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\n\n1. Nexturn\u306eService\u3092\u53d6\u5f97\n2. Nexturn\u306eCharacteristic\u3092\u53d6\u5f97\n3. \u30dc\u30bf\u30f3\u3092\u62bc\u3055\u308c\u305f\u3068\u304d\u3001\u5404\u30dc\u30bf\u30f3\u306b\u5bfe\u5fdc\u3059\u308b\u30c7\u30fc\u30bf\u3092Nexturn\u306b\u9001\u4fe1\n\n\u5404Characteristic\u306b\u5bfe\u3057\u3066\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3059\u308b\u3053\u3068\u3067\u3001\u5bfe\u5fdc\u3059\u308b\u8272\u304c\u5149\u308b\u3068\u3044\u3046\u4ed5\u7d44\u307f\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u6307\u5b9a\u3059\u308bCharacteristic\u306f\u3001\u524d\u8ff0\u3057\u305f\u30c7\u30d0\u30a4\u30b9\u60c5\u5831\u3067\u78ba\u8a8d\u3057\u305f\u300cRed\u300d\u3084\u300cBlue\u300d\u3068\u3044\u3063\u305f\u30d7\u30ed\u30d1\u30c6\u30a3\u3067\u3059\u3002\n\n```swift:NexturnObject.swift\nimport Foundation\nimport CoreBluetooth\n\nclass NexturnObject: NSObject, CBPeripheralDelegate {\n    // MARK: - Please Replace This UUID to Your's Nexturn UUID\n    let kNexturnUUID = \"F71FCA69-78A5-B654-9667-F27BF8E5CAC9\"\n    let kNexturnName = \"Nexturn\"\n    let kNexturnLEDServiceUUID = \"FFE0\"\n    var peripheral: CBPeripheral?\n    private var characteristicArray = [CBCharacteristic]()\n    \n    private enum ledButtonTag: Int {\n        case Red, Green, Blue, White, Random, Off\n\n        private var type: NSData {\n            get {\n                switch self {\n                case .Red, .Green, .Blue, .White:\n                    return createLedData(UInt8(arc4random_uniform(255)))\n                case .Random:\n                    return createLedData(arc4random_uniform(UInt32.max))\n                case .Off:\n                    return createLedData(UInt32(0))\n                }\n            }\n        }\n        \n        // LED\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n        func createLedData(hexData: UInt32) -> NSData {\n            let red   = Byte((hexData & 0xFF000000) >> 24)\n            let green = Byte((hexData & 0x00FF0000) >> 16)\n            let blue  = Byte((hexData & 0x0000FF00) >> 8)\n            let white = Byte(hexData & 0x000000FF)\n            var data  = [red, green, blue, white]\n            \n            return NSData(bytes: &data, length: 4)\n        }\n        \n        // LED\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n        func createLedData(hexData: UInt8) -> NSData {\n            var data = Byte(hexData)\n            \n            return NSData(bytes: &data, length: 1)\n        }\n    }\n    \n    // \u62bc\u3055\u308c\u305f\u30dc\u30bf\u30f3\u306b\u5bfe\u5fdc\u3057\u305f\u30c7\u30fc\u30bf\u3092Nexturn\u306b\u9001\u4fe1\n    func ledButtonTapped(tag: NSInteger) {\n        let buttonTag = ledButtonTag(rawValue: tag)!\n        \n        switch buttonTag {\n        case .Red, .Green, .Blue, .White:\n            self.peripheral?.writeValue(buttonTag.type, forCharacteristic: characteristicArray[tag], type: .WithResponse)\n        case .Random, .Off:\n            self.peripheral?.writeValue(buttonTag.type, forCharacteristic: characteristicArray[4], type: .WithResponse)\n        }\n    }\n    \n    // MARK: - CBPeripheralDelegate\n    // Service\u767a\u898b\u6642\u306b\u547c\u3070\u308c\u308b\n    func peripheral(peripheral: CBPeripheral!, didDiscoverServices error: NSError!) {\n        for service in peripheral.services {\n            self.peripheral?.discoverCharacteristics(nil, forService: service as CBService)\n        }\n    }\n    \n    // Characteristic\u767a\u898b\u6642\u306b\u547c\u3070\u308c\u308b\n    func peripheral(peripheral: CBPeripheral!, didDiscoverCharacteristicsForService service: CBService!, error: NSError!) {\n        for characteristic in service.characteristics {\n            self.characteristicArray.append(characteristic as CBCharacteristic)\n        }\n    }\n}\n```\n\n## \u30c7\u30e2\n\u4eca\u56de\u958b\u767a\u3057\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u3001\u3053\u306e\u3088\u3046\u306a\u753b\u9762\u306b\u3057\u307e\u3057\u305f\u3002\n\n![\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u753b\u9762](https://qiita-image-store.s3.amazonaws.com/0/2037/aa8c78fd-e584-cf15-e3db-97596529dace.png)\n\n\u305d\u308c\u305e\u308c\u306e\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u3001\u30dc\u30bf\u30f3\u306b\u5bfe\u5fdc\u3057\u305f\u8272\u306bNexturn\u304c\u5149\u3063\u3066\u304f\u308c\u307e\u3059\u3002\n\n\u30c7\u30e2\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\n![demo2.gif](http://kentya6.github.io/NexturnController/images/demo.gif)\n\n\u62bc\u3057\u305f\u30dc\u30bf\u30f3\u306b\u5fdc\u3058\u3066Nexturn\u306e\u8272\u304c\u5909\u308f\u3063\u3066\u3044\u307e\u3059\u306d\uff01\n\n\u4eca\u65e5\u306f\u30af\u30ea\u30b9\u30de\u30b9\u30fb\u30a4\u30d6\u3068\u3044\u3046\u3053\u3068\u3067\u3001~~\u30af\u30ea\u30b9\u30de\u30b9\u30c4\u30ea\u30fc\u3092\u96a3\u306b\u7f6e\u3044\u305f\u3060\u3051\u3067\u3059\u304c~~\u30af\u30ea\u30b9\u30de\u30b9\u611f\u3092\u6f14\u51fa\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u4eca\u56de\u4f5c\u6210\u3057\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f[GitHub](https://github.com/kentya6/NexturnController)\u3067\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u307f\u306a\u3055\u3093\u81ea\u7531\u306bNexturn\u3092\u5236\u5fa1\u3057\u3066\u904a\u3093\u3067\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n", "tags": ["BLE", "IoT", "Swift", "iOS"]}