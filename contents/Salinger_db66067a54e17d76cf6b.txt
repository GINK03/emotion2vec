{"context": " More than 1 year has passed since last update.Hadoop\u3001 Hive\u3001Impala \u306b\u95a2\u3059\u308b\u66f8\u7c4d\u3092\u3061\u3087\u3053\u3061\u3087\u3053\u8aad\u307f\u59cb\u3081\u3066\u3001\u624b\u5143\u306b\u5b9f\u884c\u74b0\u5883\u304c\u6b32\u3057\u304f\u306a\u3063\u305f\u306e\u3067\u3055\u304f\u3063\u3068\u69cb\u7bc9\u3002\n\u5fc5\u8981\u306a\u3082\u306e: \u30e1\u30e2\u30ea16GB\u4ee5\u4e0a\u7a4d\u3093\u3060 Mac or Linux \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306ePC\u3002\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u3064\u3064\u30c6\u30b9\u30c8\u74b0\u5883\u3092\u4f5c\u308b\u3002\nhow-to-install-a-virtual-apache-hadoop-cluster-with-vagrant-and-cloudera-manager\n\nVirtualBox \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4ee5\u4e0b\u304b\u3089\u6700\u65b0\u7248\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\nhttps://www.virtualbox.org/wiki/Downloads\n\nVagrant \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4ee5\u4e0b\u304b\u3089\u6700\u65b0\u7248\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\nhttp://www.vagrantup.com/downloads\n\nVagrant \u306b\u3088\u308b\u30af\u30e9\u30b9\u30bf\u74b0\u5883\u69cb\u7bc9\n\u30db\u30b9\u30c8\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3002\n$ mkdir ~/vagrant\n$ cd ~/vagrant/\n$ vagrant plugin install vagrant-hostmanager\n$ git clone https://github.com/DandyDev/virtual-hadoop-cluster.git\n$ cd virtual-hadoop-cluster\n$ vagrant up\n\n\nCloudera Manager \u306b\u3088\u308b\u30af\u30e9\u30b9\u30bf\u74b0\u5883\u8a2d\u5b9a\n\u30d6\u30e9\u30a6\u30b6\u3067\u4ee5\u4e0b\u306b\u30a2\u30af\u30bb\u30b9\u3002\nhttp://vm-cluster-node1:7180\nCloudera Manager 5 \u306e\u753b\u9762\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u306f\u305a\u3002\n\nadmin / admin \u3067\u30ed\u30b0\u30a4\u30f3\u3002\nCloudera Express \u3092\u9078\u3093\u3067\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\nCDH\u30af\u30e9\u30b9\u30bf\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u30db\u30b9\u30c8\u3092\u6307\u5b9a\u3002\n\n\nvm-cluster-node[1-4] \u3068\u5165\u529b\u3057\u3066\u300c\u691c\u7d22\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u30684\u53f0\u306e\u30ce\u30fc\u30c9\u304c\u691c\u7d22\u3067\u304d\u308b\u3002\n\n\n\u30af\u30e9\u30b9\u30bf\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb > \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u9078\u629e\n\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\n\n\u30af\u30e9\u30b9\u30bf\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb > JDK \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\n\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\n\n\u30af\u30e9\u30b9\u30bf\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb >\u3000SSH \u30ed\u30b0\u30a4\u30f3\u306e\u8cc7\u683c\u60c5\u5831\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \n\n\n\u5225\u306e\u30e6\u30fc\u30b6\u30fc: vagrant \u30d1\u30b9\u30ef\u30fc\u30c9: vagrant \u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u78ba\u8a8d:vagrant \u3092\u5165\u529b\u3002\u3053\u308c\u3067\u30af\u30e9\u30b9\u30bf\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4f5c\u696d\u304c\u9032\u3080\u3002\n\n\n\u9014\u4e2d\u30671\u53f0\u306e\u307f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u9032\u884c\u3057\u306a\u304f\u306a\u3063\u305f\u306e\u3067\u4e00\u5ea6\u4e2d\u6b62\u3092\u30af\u30ea\u30c3\u30af\u3057\u305f\u5f8c\u3001\u3082\u3046\u4e00\u5ea6\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u9032\u3081\u305f\u3089\u554f\u984c\u306a\u304f\u9032\u884c\u3002\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\n\n\n\n\u30af\u30e9\u30b9\u30bf\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb > \u9078\u629e\u3057\u305f Parcel \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\n\u5404\u7a2e\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u306e\u3092\u5f85\u3064\u3002\u7d42\u308f\u3063\u305f\u3089\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\n\n\u30af\u30e9\u30b9\u30bf\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb > \u30db\u30b9\u30c8\u304c\u6b63\u5e38\u304b\u3069\u3046\u304b\u306e\u691c\u67fb\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u72b6\u6cc1\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3002\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\n\n\u30af\u30e9\u30b9\u30bf\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 > \u30af\u30e9\u30b9\u30bf\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b CDH 5 \u30b5\u30fc\u30d3\u30b9\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n*\u300c\u3059\u3079\u3066\u306e\u30b5\u30fc\u30d3\u30b9\u300d\u3092\u9078\u3093\u3067\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\u30af\u30e9\u30b9\u30bf\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 > \u30ed\u30fc\u30eb\u5272\u308a\u5f53\u3066\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\u30af\u30e9\u30b9\u30bf\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 > \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\n\n\u30af\u30e9\u30b9\u30bf\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 > \u5909\u66f4\u306e\u78ba\u8a8d\n\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\n\n\u30af\u30e9\u30b9\u30bf\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 > \u9032\u884c\u72b6\u6cc1\n\n\n\u5168\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u306e\u3092\u5f85\u3061\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\n\n\n\u3053\u308c\u3067 Cloudera Manager \u306e\u30db\u30fc\u30e0\u753b\u9762\u306b\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u3002\n\nImpala \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nhttp://gyazo.com/f606d5ead7ffe1152e9353ae6f1f1204\n\n\u3053\u306e\u56f3\u306e6\u306b\u306a\u3063\u3066\u3044\u308b\u90e8\u5206\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001Impala\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3002\n\u753b\u9762\u4e0b\u90e8\u306e Cluster 1 \u306e\u90e8\u5206\u306e\u914d\u5e03\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3002 \n\n\u4f5c\u6210\u3057\u305f\u30af\u30e9\u30b9\u30bf\u306b\u30ed\u30b0\u30a4\u30f3\n\u30db\u30b9\u30c8\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3002\n$ ssh vagrant@vm-cluster-node1\n\nPASS \u306f vagrant\n\nYARN \u3067 MapReduce \u51e6\u7406\u306e\u52d5\u4f5c\u30c1\u30a7\u30c3\u30af\nvagrant@vm-cluster-node1 \u3067\u4f5c\u696d\u3002\n\n$ sudo su - hdfs\n$ hadoop jar /opt/cloudera/parcels/CDH-5.2.0-1.cdh5.2.0.p0.36/lib/hadoop-mapreduce/hadoop-mapreduce-examples.jar pi 4 100\n\nJob \u306e\u5b9f\u884c\u72b6\u6cc1\u306f\u4e0b\u8a18URL\u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002\nhttp://vm-cluster-node1:8088/cluster\n\n\u5b9f\u884c\u7d50\u679c\nNumber of Maps  = 4\nSamples per Map = 100\nWrote input for Map #0\nWrote input for Map #1\nWrote input for Map #2\nWrote input for Map #3\nStarting Job\n14/11/03 11:44:03 INFO client.RMProxy: Connecting to ResourceManager at vm-cluster-node1/10.211.55.100:8032\n14/11/03 11:44:04 INFO input.FileInputFormat: Total input paths to process : 4\n14/11/03 11:44:04 INFO mapreduce.JobSubmitter: number of splits:4\n14/11/03 11:44:05 INFO mapreduce.JobSubmitter: Submitting tokens for job: job_1415003058856_0001\n14/11/03 11:44:05 INFO impl.YarnClientImpl: Submitted application application_1415003058856_0001\n14/11/03 11:44:05 INFO mapreduce.Job: The url to track the job: http://vm-cluster-node1:8088/proxy/application_1415003058856_0001/\n14/11/03 11:44:05 INFO mapreduce.Job: Running job: job_1415003058856_0001\n14/11/03 11:44:25 INFO mapreduce.Job: Job job_1415003058856_0001 running in uber mode : false\n14/11/03 11:44:25 INFO mapreduce.Job:  map 0% reduce 0%\n14/11/03 11:44:39 INFO mapreduce.Job:  map 25% reduce 0%\n14/11/03 11:44:40 INFO mapreduce.Job:  map 50% reduce 0%\n14/11/03 11:44:50 INFO mapreduce.Job:  map 100% reduce 0%\n14/11/03 11:45:01 INFO mapreduce.Job:  map 100% reduce 100%\n14/11/03 11:45:02 INFO mapreduce.Job: Job job_1415003058856_0001 completed successfully\n14/11/03 11:45:02 INFO mapreduce.Job: Counters: 49\n         File System Counters\n              FILE: Number of bytes read=62\n                    FILE: Number of bytes written=532213\n                          FILE: Number of read operations=0\n                                FILE: Number of large read operations=0\n                                      FILE: Number of write operations=0\n                                            HDFS: Number of bytes read=1084\n                                                  HDFS: Number of bytes written=215\n                                                        HDFS: Number of read operations=19\n                                                              HDFS: Number of large read operations=0\n                                                                    HDFS: Number of write operations=3\n                                                                    Job Counters \n                                                                        Launched map tasks=4\n                                                                                 Launched reduce tasks=1\n                                                                                          Data-local map tasks=4\n                                                                                                     Total time spent by all maps in occupied slots (ms)=40475\n                                                                                                           Total time spent by all reduces in occupied slots (ms)=5994\n                                                                                                                 Total time spent by all map tasks (ms)=40475\n                                                                                                                       Total time spent by all reduce tasks (ms)=5994\n                                                                                                                             Total vcore-seconds taken by all map tasks=40475\n                                                                                                                                   Total vcore-seconds taken by all reduce tasks=5994\n                                                                                                                                         Total megabyte-seconds taken by all map tasks=41446400\n                                                                                                                                               Total megabyte-seconds taken by all reduce tasks=6137856\n                                                                                                                                               Map-Reduce Framework\n                                                                                                                                                          Map input records=4\n                                                                                                                                                              Map output records=8\n                                                                                                                                                                  Map output bytes=72\n                                                                                                                                                                      Map output materialized bytes=136\n                                                                                                                                                                          Input split bytes=612\n                                                                                                                                                                                Combine input records=0\n                                                                                                                                                                                        Combine output records=0\n                                                                                                                                                                                                Reduce input groups=2\n                                                                                                                                                                                                       Reduce shuffle bytes=136\n                                                                                                                                                                                                              Reduce input records=8\n                                                                                                                                                                                                                     Reduce output records=0\n                                                                                                                                                                                                                            Spilled Records=16\n                                                                                                                                                                                                                                    Shuffled Maps =4\n                                                                                                                                                                                                                                             Failed Shuffles=0\n                                                                                                                                                                                                                                                    Merged Map outputs=4\n                                                                                                                                                                                                                                                           GC time elapsed (ms)=211\n                                                                                                                                                                                                                                                              CPU time spent (ms)=5230\n                                                                                                                                                                                                                                                                  Physical memory (bytes) snapshot=1845346304\n                                                                                                                                                                                                                                                                           Virtual memory (bytes) snapshot=8395341824\n                                                                                                                                                                                                                                                                                   Total committed heap usage (bytes)=1530396672\n                                                                                                                                                                                                                                                                                   Shuffle Errors\n                                                                                                                                                                                                                                                                                           BAD_ID=0\n                                                                                                                                                                                                                                                                                            CONNECTION=0\n                                                                                                                                                                                                                                                                                             IO_ERROR=0\n                                                                                                                                                                                                                                                                                              WRONG_LENGTH=0\n                                                                                                                                                                                                                                                                                               WRONG_MAP=0\n                                                                                                                                                                                                                                                                                                WRONG_REDUCE=0\n                                                                                                                                                                                                                                                                                                File Input Format Counters \n                                                                                                                                                                                                                                                                                                     Bytes Read=472\n                                                                                                                                                                                                                                                                                                     File Output Format Counters \n                                                                                                                                                                                                                                                                                                          Bytes Written=97\nJob Finished in 59.247 seconds\nEstimated value of Pi is 3.17000000000000000000\nhdfs@vm-cluster-node1:~$ \n\nMapReduce \u306e Job \u304c YARN \u3067\u5b9f\u884c\u3067\u304d\u305f\u3002\n\nHive \u306e\u52d5\u4f5c\u78ba\u8a8d\nvagrant@vm-cluster-node1 \u3067\u4f5c\u696d\u3002\n$ hive\nhive> SHOW databases;\nOK\ndefault\nTime taken: 0.388 seconds, Fetched: 1 row(s)\nhive> CREATE DATABASE IF NOT EXISTS sample_logs;\nOK\nTime taken: 0.408 seconds\nhive> USE sample_logs;          \nOK\nTime taken: 0.54 seconds\nhive> CREATE TABLE logs(id INT, created_at STRING) row format delimited fields terminated by ',' lines terminated by '\\n';\nOK\nTime taken: 0.771 seconds\nhive>\n\n\u52d5\u4f5c\u3057\u305f\u3002\n\nImpala \u306e\u52d5\u4f5c\u78ba\u8a8d\n\u6b21\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068 Impala \u306e WebUI \u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\nhttp://vm-cluster-node1:25010\nvm-cluster-node1 \u3067\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u30b7\u30a7\u30eb\u306e\u8d77\u52d5\u3002\u30ce\u30fc\u30c92 ~ 4 \u306e\u3069\u308c\u304b\u306b\u30ed\u30b0\u30a4\u30f3\u3002\n\n$ impala-shell -i vm-cluster-node2 \n\n\u64cd\u4f5c\u3057\u3066\u307f\u308b\u3002\n[vm-cluster-node2:21000] > SHOW databases;\n[vm-cluster-node2:21000] > CREATE DATABASE IF NOT EXISTS sample_logs;\n[vm-cluster-node2:21000] > USE sample_logs;\n[vm-cluster-node2:21000] > CREATE TABLE logs(id INT, created_at STRING) row format delimited fields terminated by ',' lines terminated by '\\n';\n[vm-cluster-node2:21000] > SHOW tables;\nQuery: show tables\n+------+\n| name |\n+------+\n| logs |\n+------+\n\n\u52d5\u4f5c\u3057\u305f\u3002\n\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u3001\n\n$ vagrant halt\n\n\u3067\u30af\u30e9\u30b9\u30bf\u306e\u5168\u30b5\u30fc\u30d0\u30fc\u3092\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3002\n\u3068\u308a\u3042\u3048\u305a\u3001\u3053\u3053\u307e\u3067\u3067\u30c6\u30b9\u30c8\u7528\u306e CDH5 \u306e Hadoop (HDFS + YARN \u306b\u3088\u308bMapReduce)\u3001Hive\u3001Impala\u74b0\u5883\u304c\u69cb\u7bc9\u3067\u304d\u305f\u3002\nHadoop\u3001 Hive\u3001Impala \u306b\u95a2\u3059\u308b\u66f8\u7c4d\u3092\u3061\u3087\u3053\u3061\u3087\u3053\u8aad\u307f\u59cb\u3081\u3066\u3001\u624b\u5143\u306b\u5b9f\u884c\u74b0\u5883\u304c\u6b32\u3057\u304f\u306a\u3063\u305f\u306e\u3067\u3055\u304f\u3063\u3068\u69cb\u7bc9\u3002\n\n\u5fc5\u8981\u306a\u3082\u306e: \u30e1\u30e2\u30ea16GB\u4ee5\u4e0a\u7a4d\u3093\u3060 Mac or Linux \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306ePC\u3002\n\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u3064\u3064\u30c6\u30b9\u30c8\u74b0\u5883\u3092\u4f5c\u308b\u3002\n[how-to-install-a-virtual-apache-hadoop-cluster-with-vagrant-and-cloudera-manager](http://blog.cloudera.com/blog/2014/06/how-to-install-a-virtual-apache-hadoop-cluster-with-vagrant-and-cloudera-manager/)\n\n\n# VirtualBox \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4ee5\u4e0b\u304b\u3089\u6700\u65b0\u7248\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n[https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads)\n\n\n# Vagrant \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4ee5\u4e0b\u304b\u3089\u6700\u65b0\u7248\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n[http://www.vagrantup.com/downloads](http://www.vagrantup.com/downloads)\n\n\n# Vagrant \u306b\u3088\u308b\u30af\u30e9\u30b9\u30bf\u74b0\u5883\u69cb\u7bc9\n\u30db\u30b9\u30c8\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3002\n\n```\n$ mkdir ~/vagrant\n$ cd ~/vagrant/\n$ vagrant plugin install vagrant-hostmanager\n$ git clone https://github.com/DandyDev/virtual-hadoop-cluster.git\n$ cd virtual-hadoop-cluster\n$ vagrant up\n```\n\n\n# Cloudera Manager \u306b\u3088\u308b\u30af\u30e9\u30b9\u30bf\u74b0\u5883\u8a2d\u5b9a\n\u30d6\u30e9\u30a6\u30b6\u3067\u4ee5\u4e0b\u306b\u30a2\u30af\u30bb\u30b9\u3002\n[http://vm-cluster-node1:7180](http://vm-cluster-node1:7180)\n\nCloudera Manager 5 \u306e\u753b\u9762\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u306f\u305a\u3002\n\n* admin / admin \u3067\u30ed\u30b0\u30a4\u30f3\u3002\n* Cloudera Express \u3092\u9078\u3093\u3067\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n* CDH\u30af\u30e9\u30b9\u30bf\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u30db\u30b9\u30c8\u3092\u6307\u5b9a\u3002\n    * vm-cluster-node[1-4] \u3068\u5165\u529b\u3057\u3066\u300c\u691c\u7d22\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u30684\u53f0\u306e\u30ce\u30fc\u30c9\u304c\u691c\u7d22\u3067\u304d\u308b\u3002\n* \u30af\u30e9\u30b9\u30bf\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb > \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u9078\u629e\n    * \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n* \u30af\u30e9\u30b9\u30bf\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb > JDK \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\n    * \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n* \u30af\u30e9\u30b9\u30bf\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb >\u3000SSH \u30ed\u30b0\u30a4\u30f3\u306e\u8cc7\u683c\u60c5\u5831\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 \n    * \u5225\u306e\u30e6\u30fc\u30b6\u30fc: vagrant \u30d1\u30b9\u30ef\u30fc\u30c9: vagrant \u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u78ba\u8a8d:vagrant \u3092\u5165\u529b\u3002\u3053\u308c\u3067\u30af\u30e9\u30b9\u30bf\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4f5c\u696d\u304c\u9032\u3080\u3002\n        * \u9014\u4e2d\u30671\u53f0\u306e\u307f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u9032\u884c\u3057\u306a\u304f\u306a\u3063\u305f\u306e\u3067\u4e00\u5ea6\u4e2d\u6b62\u3092\u30af\u30ea\u30c3\u30af\u3057\u305f\u5f8c\u3001\u3082\u3046\u4e00\u5ea6\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u9032\u3081\u305f\u3089\u554f\u984c\u306a\u304f\u9032\u884c\u3002\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n* \u30af\u30e9\u30b9\u30bf\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb > \u9078\u629e\u3057\u305f Parcel \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n    * \u5404\u7a2e\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u306e\u3092\u5f85\u3064\u3002\u7d42\u308f\u3063\u305f\u3089\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n* \u30af\u30e9\u30b9\u30bf\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb > \u30db\u30b9\u30c8\u304c\u6b63\u5e38\u304b\u3069\u3046\u304b\u306e\u691c\u67fb\n    * \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u72b6\u6cc1\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3002\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n* \u30af\u30e9\u30b9\u30bf\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 > \u30af\u30e9\u30b9\u30bf\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b CDH 5 \u30b5\u30fc\u30d3\u30b9\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n    *\u300c\u3059\u3079\u3066\u306e\u30b5\u30fc\u30d3\u30b9\u300d\u3092\u9078\u3093\u3067\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n* \u30af\u30e9\u30b9\u30bf\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 > \u30ed\u30fc\u30eb\u5272\u308a\u5f53\u3066\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n* \u30af\u30e9\u30b9\u30bf\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 > \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n    * \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n* \u30af\u30e9\u30b9\u30bf\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 > \u5909\u66f4\u306e\u78ba\u8a8d\n    * \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n* \u30af\u30e9\u30b9\u30bf\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 > \u9032\u884c\u72b6\u6cc1\n    * \u5168\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u306e\u3092\u5f85\u3061\u300c\u7d9a\u884c\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\n\u3053\u308c\u3067 Cloudera Manager \u306e\u30db\u30fc\u30e0\u753b\u9762\u306b\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u3002\n\n# Impala \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n[http://gyazo.com/f606d5ead7ffe1152e9353ae6f1f1204](http://gyazo.com/f606d5ead7ffe1152e9353ae6f1f1204)\n![f606d5ead7ffe1152e9353ae6f1f1204.png](https://qiita-image-store.s3.amazonaws.com/0/58390/620a060e-ca91-d526-c224-d988de5ffa6e.png)\n\n\u3053\u306e\u56f3\u306e6\u306b\u306a\u3063\u3066\u3044\u308b\u90e8\u5206\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001Impala\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3002\n\u753b\u9762\u4e0b\u90e8\u306e Cluster 1 \u306e\u90e8\u5206\u306e\u914d\u5e03\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3002 \n\n# \u4f5c\u6210\u3057\u305f\u30af\u30e9\u30b9\u30bf\u306b\u30ed\u30b0\u30a4\u30f3\n\u30db\u30b9\u30c8\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3002\n\n```\n$ ssh vagrant@vm-cluster-node1\n```\nPASS \u306f vagrant\n\n# YARN \u3067 MapReduce \u51e6\u7406\u306e\u52d5\u4f5c\u30c1\u30a7\u30c3\u30af\nvagrant@vm-cluster-node1 \u3067\u4f5c\u696d\u3002\n```\n$ sudo su - hdfs\n$ hadoop jar /opt/cloudera/parcels/CDH-5.2.0-1.cdh5.2.0.p0.36/lib/hadoop-mapreduce/hadoop-mapreduce-examples.jar pi 4 100\n```\n\nJob \u306e\u5b9f\u884c\u72b6\u6cc1\u306f\u4e0b\u8a18URL\u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002\n[http://vm-cluster-node1:8088/cluster](http://vm-cluster-node1:8088/cluster)\n\n## \u5b9f\u884c\u7d50\u679c\n```\nNumber of Maps  = 4\nSamples per Map = 100\nWrote input for Map #0\nWrote input for Map #1\nWrote input for Map #2\nWrote input for Map #3\nStarting Job\n14/11/03 11:44:03 INFO client.RMProxy: Connecting to ResourceManager at vm-cluster-node1/10.211.55.100:8032\n14/11/03 11:44:04 INFO input.FileInputFormat: Total input paths to process : 4\n14/11/03 11:44:04 INFO mapreduce.JobSubmitter: number of splits:4\n14/11/03 11:44:05 INFO mapreduce.JobSubmitter: Submitting tokens for job: job_1415003058856_0001\n14/11/03 11:44:05 INFO impl.YarnClientImpl: Submitted application application_1415003058856_0001\n14/11/03 11:44:05 INFO mapreduce.Job: The url to track the job: http://vm-cluster-node1:8088/proxy/application_1415003058856_0001/\n14/11/03 11:44:05 INFO mapreduce.Job: Running job: job_1415003058856_0001\n14/11/03 11:44:25 INFO mapreduce.Job: Job job_1415003058856_0001 running in uber mode : false\n14/11/03 11:44:25 INFO mapreduce.Job:  map 0% reduce 0%\n14/11/03 11:44:39 INFO mapreduce.Job:  map 25% reduce 0%\n14/11/03 11:44:40 INFO mapreduce.Job:  map 50% reduce 0%\n14/11/03 11:44:50 INFO mapreduce.Job:  map 100% reduce 0%\n14/11/03 11:45:01 INFO mapreduce.Job:  map 100% reduce 100%\n14/11/03 11:45:02 INFO mapreduce.Job: Job job_1415003058856_0001 completed successfully\n14/11/03 11:45:02 INFO mapreduce.Job: Counters: 49\n         File System Counters\n              FILE: Number of bytes read=62\n                    FILE: Number of bytes written=532213\n                          FILE: Number of read operations=0\n                                FILE: Number of large read operations=0\n                                      FILE: Number of write operations=0\n                                            HDFS: Number of bytes read=1084\n                                                  HDFS: Number of bytes written=215\n                                                        HDFS: Number of read operations=19\n                                                              HDFS: Number of large read operations=0\n                                                                    HDFS: Number of write operations=3\n                                                                    Job Counters \n                                                                        Launched map tasks=4\n                                                                                 Launched reduce tasks=1\n                                                                                          Data-local map tasks=4\n                                                                                                     Total time spent by all maps in occupied slots (ms)=40475\n                                                                                                           Total time spent by all reduces in occupied slots (ms)=5994\n                                                                                                                 Total time spent by all map tasks (ms)=40475\n                                                                                                                       Total time spent by all reduce tasks (ms)=5994\n                                                                                                                             Total vcore-seconds taken by all map tasks=40475\n                                                                                                                                   Total vcore-seconds taken by all reduce tasks=5994\n                                                                                                                                         Total megabyte-seconds taken by all map tasks=41446400\n                                                                                                                                               Total megabyte-seconds taken by all reduce tasks=6137856\n                                                                                                                                               Map-Reduce Framework\n                                                                                                                                                          Map input records=4\n                                                                                                                                                              Map output records=8\n                                                                                                                                                                  Map output bytes=72\n                                                                                                                                                                      Map output materialized bytes=136\n                                                                                                                                                                          Input split bytes=612\n                                                                                                                                                                                Combine input records=0\n                                                                                                                                                                                        Combine output records=0\n                                                                                                                                                                                                Reduce input groups=2\n                                                                                                                                                                                                       Reduce shuffle bytes=136\n                                                                                                                                                                                                              Reduce input records=8\n                                                                                                                                                                                                                     Reduce output records=0\n                                                                                                                                                                                                                            Spilled Records=16\n                                                                                                                                                                                                                                    Shuffled Maps =4\n                                                                                                                                                                                                                                             Failed Shuffles=0\n                                                                                                                                                                                                                                                    Merged Map outputs=4\n                                                                                                                                                                                                                                                           GC time elapsed (ms)=211\n                                                                                                                                                                                                                                                              CPU time spent (ms)=5230\n                                                                                                                                                                                                                                                                  Physical memory (bytes) snapshot=1845346304\n                                                                                                                                                                                                                                                                           Virtual memory (bytes) snapshot=8395341824\n                                                                                                                                                                                                                                                                                   Total committed heap usage (bytes)=1530396672\n                                                                                                                                                                                                                                                                                   Shuffle Errors\n                                                                                                                                                                                                                                                                                           BAD_ID=0\n                                                                                                                                                                                                                                                                                            CONNECTION=0\n                                                                                                                                                                                                                                                                                             IO_ERROR=0\n                                                                                                                                                                                                                                                                                              WRONG_LENGTH=0\n                                                                                                                                                                                                                                                                                               WRONG_MAP=0\n                                                                                                                                                                                                                                                                                                WRONG_REDUCE=0\n                                                                                                                                                                                                                                                                                                File Input Format Counters \n                                                                                                                                                                                                                                                                                                     Bytes Read=472\n                                                                                                                                                                                                                                                                                                     File Output Format Counters \n                                                                                                                                                                                                                                                                                                          Bytes Written=97\nJob Finished in 59.247 seconds\nEstimated value of Pi is 3.17000000000000000000\nhdfs@vm-cluster-node1:~$ \n```\n\nMapReduce \u306e Job \u304c YARN \u3067\u5b9f\u884c\u3067\u304d\u305f\u3002\n\n\n# Hive \u306e\u52d5\u4f5c\u78ba\u8a8d\nvagrant@vm-cluster-node1 \u3067\u4f5c\u696d\u3002\n\n```\n$ hive\nhive> SHOW databases;\nOK\ndefault\nTime taken: 0.388 seconds, Fetched: 1 row(s)\nhive> CREATE DATABASE IF NOT EXISTS sample_logs;\nOK\nTime taken: 0.408 seconds\nhive> USE sample_logs;          \nOK\nTime taken: 0.54 seconds\nhive> CREATE TABLE logs(id INT, created_at STRING) row format delimited fields terminated by ',' lines terminated by '\\n';\nOK\nTime taken: 0.771 seconds\nhive>\n``` \n\u52d5\u4f5c\u3057\u305f\u3002\n\n# Impala \u306e\u52d5\u4f5c\u78ba\u8a8d\n\u6b21\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068 Impala \u306e WebUI \u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\n[http://vm-cluster-node1:25010](http://vm-cluster-node1:25010)\n\nvm-cluster-node1 \u3067\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u30b7\u30a7\u30eb\u306e\u8d77\u52d5\u3002\u30ce\u30fc\u30c92 ~ 4 \u306e\u3069\u308c\u304b\u306b\u30ed\u30b0\u30a4\u30f3\u3002\n```\n$ impala-shell -i vm-cluster-node2 \n```\n\n\u64cd\u4f5c\u3057\u3066\u307f\u308b\u3002\n\n```\n[vm-cluster-node2:21000] > SHOW databases;\n[vm-cluster-node2:21000] > CREATE DATABASE IF NOT EXISTS sample_logs;\n[vm-cluster-node2:21000] > USE sample_logs;\n[vm-cluster-node2:21000] > CREATE TABLE logs(id INT, created_at STRING) row format delimited fields terminated by ',' lines terminated by '\\n';\n[vm-cluster-node2:21000] > SHOW tables;\nQuery: show tables\n+------+\n| name |\n+------+\n| logs |\n+------+\n```\n\n\u52d5\u4f5c\u3057\u305f\u3002\n\n\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u3001\n```\n$ vagrant halt\n```\n\u3067\u30af\u30e9\u30b9\u30bf\u306e\u5168\u30b5\u30fc\u30d0\u30fc\u3092\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3002\n\n\u3068\u308a\u3042\u3048\u305a\u3001\u3053\u3053\u307e\u3067\u3067\u30c6\u30b9\u30c8\u7528\u306e CDH5 \u306e Hadoop (HDFS + YARN \u306b\u3088\u308bMapReduce)\u3001Hive\u3001Impala\u74b0\u5883\u304c\u69cb\u7bc9\u3067\u304d\u305f\u3002\n", "tags": ["CDH5", "hadoop", "hive", "vagrant", "Impala"]}