{"tags": ["api", "WebAPI", "Node.js", "gulp"], "context": "\n\nAPI Blueprint\u3068\u306f\nAPI Blueprint\u306f\u3001API\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8a18\u8ff0\u3059\u308b\u305f\u3081\u306eMarkdown\u62e1\u5f35\u3067\u3001\n\u591a\u304f\u306e\u30c4\u30fc\u30eb\u304c\u516c\u958b\u3055\u308c\u3066\u304a\u308a\u3001\u81ea\u52d5\u3067html\u306b\u5909\u63db\u3057\u305f\u308a\u3001mock-server\u3092\u7acb\u3066\u305f\u308a\u3067\u304d\u307e\u3059\u3002\n\n\u74b0\u5883\u69cb\u7bc9\n\u4eca\u56de\u306f\u4ee5\u4e0b\u306e\u74b0\u5883\u3067\u884c\u3044\u307e\u3057\u305f\u3002\n\u30fbVagrant 1.8.1\n\u30fbCentOS release 6.6 (Final)\n\u30fbNode.js\u30d0\u30fc\u30b8\u30e7\u30f3: v0.10.45\n\u30fbnvm\u30d0\u30fc\u30b8\u30e7\u30f3: 0.31.1\n\n\u4eca\u56de\u3084\u308a\u305f\u3044\u3053\u3068\nweb\u4e0a\u306b\u4e0b\u8a18\u306e\u753b\u9762\u3092\u8868\u793a\u3055\u305b\u308b\n\n\n\n\n\u74b0\u5883\u69cb\u7bc9\n\u305d\u308c\u3067\u306f\u884c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\u53c2\u8003\u30b5\u30a4\u30c8\uff1ahttp://dackdive.hateblo.jp/entry/2015/08/07/181723\n\n\u79c1\u304c\u6700\u7d42\u7684\u306b\u5165\u308c\u305fNode\u30e2\u30b8\u30e5\u30fc\u30eb\n\n\n\n\u30e2\u30b8\u30e5\u30fc\u30eb\n\u8aac\u660e\n\n\n\n\ngulp\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\nNode.js\u3092\u30d9\u30fc\u30b9\u3068\u3057\u305f\u30d3\u30eb\u30c9\u30c4\u30fc\u30eb\n\n\naglio\u3000\nHTML \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u751f\u6210\u30c4\u30fc\u30eb\u3000\n\n\ngulp-aglio\nBlueprint\u3067\u66f8\u304b\u308c\u305fMarkdown\u3092HTML\u306b\u5909\u63db\u3057\u3066\u304f\u308c\u308b\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\n\n\nbrowser-sync \u3000\u3000\u3000\u3000\nWeb\u30da\u30fc\u30b8\u3092\u518d\u8aad\u307f\u8fbc\u307f\u3057\u306a\u304f\u3066\u3082\u5909\u66f4\u304c\u53cd\u6620\u3055\u308c\u308b(\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u30d7\u30ec\u30d3\u30e5\u30fc)\n\n\ngulp-rename\n\u30d5\u30a1\u30a4\u30eb\u3092\u7c21\u5358\u306b\u30ea\u30cd\u30fc\u30e0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b gulp \u7528\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\n\n\nrimraf\n\u30d5\u30a1\u30a4\u30eb\u524a\u9664\n\n\ngulp-ejs\n\u30d5\u30a1\u30a4\u30eb\u3092\u8907\u6570\u5206\u5272\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\n\n\napi-mock\n\u30e2\u30c3\u30af\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3068\u304d\u306b\u5fc5\u8981\n\n\n\n\n1. \u30d7\u30e9\u30b0\u30a4\u30f3\u306a\u3069\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n1-1. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u3000Node.js \u3068 npm \u3068 nvm \u304c\u5165\u3063\u3066\u3044\u306a\u3051\u308c\u3070\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\u3000\u30fbNode.js\n\u3000\u3000\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9Javascript\n\u3000\u30fbnpm\n\u3000\u3000Node.js\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3084\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u30c4\u30fc\u30eb\n\u3000\u30fbnvm\n\u3000\u3000Node.js\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u7ba1\u7406\u3057\u3066\u304f\u308c\u308b\u30c4\u30fc\u30eb\u3002\n\u3000\u3000Node.js\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048\u304c\u5bb9\u6613\u306b\u3067\u304d\u307e\u3059\uff01\n\nnvm\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u25bc nvm\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ git clone git://github.com/creationix/nvm.git ~/.nvm\n\n\u25bc nvm\u3092\u6709\u52b9\u5316\u3059\u308b\n$ source ~/.nvm/nvm.sh\n\n\u25bc nvm\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n$ nvm --version\n\n\nNode.js\u3068npm\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u25bc \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308bNode.js\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u8868\u793a\u3055\u305b\u308b\n$ nvm ls-remote\n\n\u25bc Node.js\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ nvm install v0.10.45\n\n\u25bc Node\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n$ node --version\n\n\u25bc npm\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n$ npm --version\n\n\n1-2. npm init\n\u74b0\u5883\u3092\u69cb\u7bc9\u3055\u305b\u305f\u3044\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067npm init \u3092\u5b9f\u884c\u3059\u308b\u3002\nnpm init\u53c2\u8003\n\u3072\u305f\u3059\u3089Enter\u9023\u6253\u3067\u3044\u3044\u304b\u3068\u3002package.json\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\n\n1-3. \u5fc5\u8981\u306aNode\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nWARN\u306f\u3042\u3093\u307e\u308a\u6c17\u306b\u3057\u306a\u304f\u3066\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001\nERR\u304c\u51fa\u305f\u5834\u5408\u306f\u30b0\u30b0\u30c3\u3066\u89e3\u6c7a\u3057\u3066\u4e0b\u3055\u3044...\u591a\u5206Node\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u89e3\u6c7a\u3067\u304d\u307e\u3059\u3002\n$ npm install -g gulp\n$ npm install -g aglio\n$ npm install gulp --save-dev\n$ npm install gulp-aglio --save-dev\n\n\u25bc \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u30d7\u30ec\u30d3\u30e5\u30fc\u306b\u5fc5\u8981\n$ npm install browser-sync --save-dev\n$ npm install gulp-rename --save-dev\n\n\u25bc \u8907\u6570\u30d5\u30a1\u30a4\u30eb\u5206\u5272\u306b\u5fc5\u8981\n$ npm install rimraf --save-dev\n$ npm install gulp-ejs --save-dev\n\n\u25bc \u30e2\u30c3\u30af\u30b5\u30fc\u30d0\u306b\u5fc5\u8981\n$ npm install -g api-mock\n\n--save-dev\u3068\u306f\n\n2. gulpfile\u306e\u4f5c\u6210\ngulpfile.js\u3092vim\u306a\u3069\u3092\u4f7f\u7528\u3057\u3066\u4f5c\u6210\u3059\u308b\u3002 \u53c2\u8003\u30b3\u30fc\u30c9\n\n\ngulpfile.js\nvar gulp = require('gulp'),\n    aglio = require('gulp-aglio'),\n    browserSync = require('browser-sync'),\n    rename = require('gulp-rename'),\n    rimraf = require('rimraf'),\n    ejs = require('gulp-ejs');\n\nvar reload = browserSync.reload;\n\nvar TEMPLATE_FILES = ['apidocs/**/*.md'],\n    LAYOUT_FILE = 'apidocs/layout.md',\n    PUBLISHED_DIR = 'published';\n\ngulp.task('combine', function(){\n  return gulp.src(LAYOUT_FILE)\n    .pipe(ejs({},{ ext: '.md' }))\n    .pipe(rename('index.md'))\n    .pipe(gulp.dest(PUBLISHED_DIR));\n});\n\ngulp.task('generate-api-docs', ['combine'], function() {\n  return gulp.src(PUBLISHED_DIR + '/index.md')\n    .pipe(aglio({template: 'default'}))\n    .pipe(gulp.dest(PUBLISHED_DIR));\n});\n\ngulp.task('watch', function () {\n  gulp.watch(TEMPLATE_FILES, ['generate-api-docs', reload]);\n});\n\ngulp.task('browserSync', function() {\n  browserSync({\n    logConnections: true,\n    logFileChanges: true,\n    notify: true,\n    port: 8088,\n    open: false,\n    server: {\n      baseDir: PUBLISHED_DIR\n    }\n  });\n});\n\ngulp.task('clean', function(cb) {\n  rimraf(PUBLISHED_DIR, cb);\n});\n\ngulp.task('publish', ['clean', 'generate-api-docs']);\ngulp.task('default', ['generate-api-docs', 'watch', 'browserSync']);\ngulp.task('default', ['generate-api-docs', 'watch', 'browserSync']);\n\n\n\n\n3. \u8907\u6570\u306emd\u30d5\u30a1\u30a4\u30eb\u30921\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u3059\u308b\ngulpfile\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u901a\u308a\u3001\n\u307e\u305aapidocs\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068published\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\u3002\napidocs\u5185\u306b\u3001md\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3044\u304f\u3002\n\n3-1. md\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\napidocs\u5185\u306bsample1.md\u3068sample2.md\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3002\n\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u8eab\u306f\u3001\u3053\u3061\u3089\u306e\u30b5\u30a4\u30c8\u306e\u30b3\u30fc\u30c9\u3092\u5165\u308c\u3066\u307f\u307e\u3057\u305f\u3002\n\n\nsample1.md\n## \u30e6\u30fc\u30b6\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 [/v1/users]\n\n### \u30e6\u30fc\u30b6\u767b\u9332 [POST]\n\n#### \u51e6\u7406\u6982\u8981\n\n* \u30e6\u30fc\u30b6\u60c5\u5831\u3092\u65b0\u3057\u304f\u767b\u9332\u3059\u308b\u3002\n* \u767b\u9332\u306b\u6210\u529f\u3057\u305f\u5834\u5408\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u8fd4\u3059\u3002\n\n+ Request (application/json)\n\n   + Headers\n\n           Accept: application/json\n\n   + Attributes\n        + email: test@example.com (string, required) - \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\uff08format: email\uff09\n        + password: abc123 (string, required) - \u30d1\u30b9\u30ef\u30fc\u30c9\uff08pattern: ^[0-9A-Za-z]{6,16}$\uff09\n\n+ Response 201 (application/json)\n\n   + Attributes\n        + accessToken: f58ba22059f5a8aa8f346e0f40987adab326041fac99029c909bef2c6300821a (string, required) - \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\n\n\n\nsample2.md\n## \u30e6\u30fc\u30b6\u60c5\u5831\u53d6\u5f97 [/v1/groups/{groupId}/users{?userId,mailAddress}]\n\n### \u30e6\u30fc\u30b6\u60c5\u5831\u53d6\u5f97API [GET]\n\n#### \u51e6\u7406\u6982\u8981\n\n* \u6307\u5b9a\u3057\u305f\u4f1a\u54e1\u306e\u60c5\u5831\u3092\u8fd4\u3059\u3002\n* userId\u304bmailAddress\u3044\u305a\u308c\u304b\u306f\u5fc5\u9808\u3002\u3069\u3061\u3089\u3082\u6307\u5b9a\u304c\u306a\u3044\u5834\u5408\u3001BadRequest\u3092\u8fd4\u3059\u3002\n* userId\u3068mailAddress\u304c\u3069\u3061\u3089\u3082\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001userId\u306e\u60c5\u5831\u3092\u5229\u7528\u3057\u3001mailAddress\u306f\u5229\u7528\u3057\u306a\u3044\u3002\n\n+ Parameters\n\n   + groupId: 11440002 (number, required) - \u30e6\u30fc\u30b6\u304c\u6240\u5c5e\u3059\u308b\u30b0\u30eb\u30fc\u30d7ID\n    + userId: 300 (number, optional) - \u30e6\u30fc\u30b6ID\n    + mailAddress: some@example.com (string, optional) - \u30e6\u30fc\u30b6\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\n\n+ Response 200 (application/json)\n\n   + Attributes\n        + user (required)\n            + name: wada (string, required)            + age: 18 (number, required)\n            + type: 0 (enum, required) - \u30e6\u30fc\u30b6\u7a2e\u5225(0:\u7121\u6599\u30e6\u30fc\u30b6, 1:\u6709\u6599\u30e6\u30fc\u30b6)\n                + 0 (number)\n                + 1 (number)\n            + profile (object, required)\n            + registered: `2015-06-11T08:40:51Z` (string, required)\n            + favorites (array)\n                + `http://dev.classmethod.jp/` (string)\n        + messageHistory (array)\n            + (object)\n                + id: 22345 (number, required)\n                + title: \u4eca\u65e5\u306e\u732e\u7acb (string, required)\n\n\n\n\u305d\u306e\u5f8c\u3001\napidocs\u306blayout.md\u3092\u4f5c\u6210\u3059\u308b\nlayout.md\u306f\u8907\u6570\u30d5\u30a1\u30a4\u30eb\u30921\u3064\u306e\u30d5\u30a1\u30a4\u30eb(index.md)\u306b\u7d50\u5408\u3055\u305b\u308b\u5f79\u5272\u3002\n\nlayout.md\nFORMAT: 1A\n\n<% include sample1.md %>\n<% include sample2.md %>\n\n\n\n3.2 \u69cb\u6210\n\u6700\u7d42\u7684\u306b\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\u251c\u2500\u2500 apidocs\n\u2502   \u251c\u2500\u2500 sample1.md\n\u2502   \u251c\u2500\u2500 sample2.md\n\u2502   \u2514\u2500\u2500 layout.md\n\u251c\u2500\u2500 gulpfile.js\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 published\n    \u251c\u2500\u2500 index.html\n    \u2514\u2500\u2500 index.md\n\n\n4. gulp\u306e\u5b9f\u884c\n\n4.1 \u30dd\u30fc\u30c8\u3092\u958b\u3051\u308b\nvagrant\u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\u306f\u30dd\u30fc\u30c8\u3092\u958b\u3051\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\nVagrantfile\u306b\u4ee5\u4e0b\u306e2\u3064\u3092\u8ffd\u8a18\u3059\u308b\u3002\u3000\u53c2\u8003\u30b5\u30a4\u30c8\n\nVagrantfile\nconfig.vm.network \"forwarded_port\", guest: 3000, host: 3000\nconfig.vm.network \"forwarded_port\", guest: 8088, host: 8088\n\n\n\n4.2 \u5b9f\u884c\ngulp\u3092\u5b9f\u884c\u3059\u308b\u3002\n\u5b9f\u884c\u5f8c\u3001\ngulpfile\u304c\u51e6\u7406\u3055\u308c\u3001\npublished\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bindex.md\u3068index.html\u304c\u81ea\u52d5\u3067\u4f5c\u6210\u3055\u308c\u308b\u3002\n\u63a5\u7d9a\u3092\u5207\u308b\u3068\u304d\u306fctrl + C\n\u30a2\u30af\u30bb\u30b9\u3059\u308b\nhttp://localhost:8088\n\u4e0a\u8a18\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3057web\u4e0a\u3067\u4ee5\u4e0b\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u6210\u529f\uff01\n\n\u4eca\u56de\u306f\u3053\u3053\u307e\u3067\u3002\n\u307e\u305f\u3001\u66f4\u65b0\u3057\u307e\u3059\u3002\n\n\u53c2\u8003\u30b5\u30a4\u30c8\nhttp://dackdive.hateblo.jp/entry/2015/08/07/181723\nhttp://dev.classmethod.jp/server-side/api-document-with-api-blueprint/\nhttp://blog.10rane.com/2015/09/15/to-create-the-api-documentation-and-the-stub-from-markdown-using-aglio/\nhttp://blog.amedama.jp/entry/2016/03/08/202403\nhttps://speakerdeck.com/shimastripe/api-blueprintsu-xi-hui-at-wantedly\n# API Blueprint\u3068\u306f\nAPI Blueprint\u306f\u3001API\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8a18\u8ff0\u3059\u308b\u305f\u3081\u306eMarkdown\u62e1\u5f35\u3067\u3001\n\u591a\u304f\u306e\u30c4\u30fc\u30eb\u304c\u516c\u958b\u3055\u308c\u3066\u304a\u308a\u3001\u81ea\u52d5\u3067html\u306b\u5909\u63db\u3057\u305f\u308a\u3001mock-server\u3092\u7acb\u3066\u305f\u308a\u3067\u304d\u307e\u3059\u3002\n\n# \u74b0\u5883\u69cb\u7bc9\n\u4eca\u56de\u306f\u4ee5\u4e0b\u306e\u74b0\u5883\u3067\u884c\u3044\u307e\u3057\u305f\u3002\n\u30fbVagrant 1.8.1\n\u30fbCentOS release 6.6 (Final)\n\u30fbNode.js\u30d0\u30fc\u30b8\u30e7\u30f3: v0.10.45\n\u30fbnvm\u30d0\u30fc\u30b8\u30e7\u30f3: 0.31.1\n\n# \u4eca\u56de\u3084\u308a\u305f\u3044\u3053\u3068\n\nweb\u4e0a\u306b\u4e0b\u8a18\u306e\u753b\u9762\u3092\u8868\u793a\u3055\u305b\u308b\n\n------\n![qiita_api\u6700\u5f8c.PNG](https://qiita-image-store.s3.amazonaws.com/0/75241/3e586755-bc9a-b1c5-e2ca-4dbad5b2fb21.png)\n\n\n-------\n\n\n# \u74b0\u5883\u69cb\u7bc9\n\u305d\u308c\u3067\u306f\u884c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\u53c2\u8003\u30b5\u30a4\u30c8\uff1ahttp://dackdive.hateblo.jp/entry/2015/08/07/181723\n\n### \u79c1\u304c\u6700\u7d42\u7684\u306b\u5165\u308c\u305fNode\u30e2\u30b8\u30e5\u30fc\u30eb\n\n|    \u30e2\u30b8\u30e5\u30fc\u30eb     |\u8aac\u660e |\n|:-----------------------|:--------------------------------------------------------|\n|gulp\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000| Node.js\u3092\u30d9\u30fc\u30b9\u3068\u3057\u305f\u30d3\u30eb\u30c9\u30c4\u30fc\u30eb |\n|aglio\u3000|HTML \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u751f\u6210\u30c4\u30fc\u30eb\u3000|\n|gulp-aglio        | Blueprint\u3067\u66f8\u304b\u308c\u305fMarkdown\u3092HTML\u306b\u5909\u63db\u3057\u3066\u304f\u308c\u308b\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000|\n|browser-sync \u3000\u3000\u3000\u3000| Web\u30da\u30fc\u30b8\u3092\u518d\u8aad\u307f\u8fbc\u307f\u3057\u306a\u304f\u3066\u3082\u5909\u66f4\u304c\u53cd\u6620\u3055\u308c\u308b(\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u30d7\u30ec\u30d3\u30e5\u30fc) |\n|gulp-rename     | \u30d5\u30a1\u30a4\u30eb\u3092\u7c21\u5358\u306b\u30ea\u30cd\u30fc\u30e0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b gulp \u7528\u306e\u30d7\u30e9\u30b0\u30a4\u30f3 |\n|rimraf            | \u30d5\u30a1\u30a4\u30eb\u524a\u9664 |\n|gulp-ejs         | \u30d5\u30a1\u30a4\u30eb\u3092\u8907\u6570\u5206\u5272\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b |\n|api-mock          | \u30e2\u30c3\u30af\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3068\u304d\u306b\u5fc5\u8981 |\n\n### 1. \u30d7\u30e9\u30b0\u30a4\u30f3\u306a\u3069\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n####1-1. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n  \u3000**Node.js** \u3068 **npm** \u3068 **nvm** \u304c\u5165\u3063\u3066\u3044\u306a\u3051\u308c\u3070\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\u3000\u30fbNode.js\n\u3000\u3000\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9Javascript\n\u3000\u30fbnpm\n\u3000\u3000Node.js\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3084\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u30c4\u30fc\u30eb\n\u3000\u30fbnvm\n\u3000\u3000Node.js\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u7ba1\u7406\u3057\u3066\u304f\u308c\u308b\u30c4\u30fc\u30eb\u3002\n\u3000\u3000Node.js\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048\u304c\u5bb9\u6613\u306b\u3067\u304d\u307e\u3059\uff01\n\n\n\n##### nvm\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n\u25bc nvm\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ git clone git://github.com/creationix/nvm.git ~/.nvm\n\n\u25bc nvm\u3092\u6709\u52b9\u5316\u3059\u308b\n$ source ~/.nvm/nvm.sh\n\n\u25bc nvm\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n$ nvm --version\n```\n\n##### Node.js\u3068npm\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n\u25bc \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308bNode.js\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u8868\u793a\u3055\u305b\u308b\n$ nvm ls-remote\n\n\u25bc Node.js\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ nvm install v0.10.45\n\n\u25bc Node\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n$ node --version\n\n\u25bc npm\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n$ npm --version\n```\n\n####1-2. npm init\n\u74b0\u5883\u3092\u69cb\u7bc9\u3055\u305b\u305f\u3044\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067`npm init` \u3092\u5b9f\u884c\u3059\u308b\u3002\n[npm init\u53c2\u8003](http://qiita.com/sinmetal/items/395edf1d195382cfd8bc)\n\u3072\u305f\u3059\u3089Enter\u9023\u6253\u3067\u3044\u3044\u304b\u3068\u3002package.json\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\n####1-3. \u5fc5\u8981\u306aNode\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n**WARN**\u306f\u3042\u3093\u307e\u308a\u6c17\u306b\u3057\u306a\u304f\u3066\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001\n**ERR**\u304c\u51fa\u305f\u5834\u5408\u306f\u30b0\u30b0\u30c3\u3066\u89e3\u6c7a\u3057\u3066\u4e0b\u3055\u3044...\u591a\u5206Node\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u89e3\u6c7a\u3067\u304d\u307e\u3059\u3002\n\n```\n$ npm install -g gulp\n$ npm install -g aglio\n$ npm install gulp --save-dev\n$ npm install gulp-aglio --save-dev\n\n\u25bc \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u30d7\u30ec\u30d3\u30e5\u30fc\u306b\u5fc5\u8981\n$ npm install browser-sync --save-dev\n$ npm install gulp-rename --save-dev\n\n\u25bc \u8907\u6570\u30d5\u30a1\u30a4\u30eb\u5206\u5272\u306b\u5fc5\u8981\n$ npm install rimraf --save-dev\n$ npm install gulp-ejs --save-dev\n\n\u25bc \u30e2\u30c3\u30af\u30b5\u30fc\u30d0\u306b\u5fc5\u8981\n$ npm install -g api-mock\n```\n[--save-dev](http://d.hatena.ne.jp/seinzumtode/20160226/1456450867)\u3068\u306f\n\n### 2. gulpfile\u306e\u4f5c\u6210\ngulpfile.js\u3092vim\u306a\u3069\u3092\u4f7f\u7528\u3057\u3066\u4f5c\u6210\u3059\u308b\u3002 [\u53c2\u8003\u30b3\u30fc\u30c9](https://github.com/zaki-yama/aglio-sample)\n>\n```gulpfile.js\nvar gulp = require('gulp'),\n    aglio = require('gulp-aglio'),\n    browserSync = require('browser-sync'),\n    rename = require('gulp-rename'),\n    rimraf = require('rimraf'),\n    ejs = require('gulp-ejs');\n\n>var reload = browserSync.reload;\n\n>var TEMPLATE_FILES = ['apidocs/**/*.md'],\n    LAYOUT_FILE = 'apidocs/layout.md',\n    PUBLISHED_DIR = 'published';\n\n>gulp.task('combine', function(){\n  return gulp.src(LAYOUT_FILE)\n    .pipe(ejs({},{ ext: '.md' }))\n    .pipe(rename('index.md'))\n    .pipe(gulp.dest(PUBLISHED_DIR));\n});\n\n>gulp.task('generate-api-docs', ['combine'], function() {\n  return gulp.src(PUBLISHED_DIR + '/index.md')\n    .pipe(aglio({template: 'default'}))\n    .pipe(gulp.dest(PUBLISHED_DIR));\n});\n\n>gulp.task('watch', function () {\n  gulp.watch(TEMPLATE_FILES, ['generate-api-docs', reload]);\n});\n\n>gulp.task('browserSync', function() {\n  browserSync({\n    logConnections: true,\n    logFileChanges: true,\n    notify: true,\n    port: 8088,\n    open: false,\n    server: {\n      baseDir: PUBLISHED_DIR\n    }\n  });\n});\n\n>gulp.task('clean', function(cb) {\n  rimraf(PUBLISHED_DIR, cb);\n});\n\n>gulp.task('publish', ['clean', 'generate-api-docs']);\ngulp.task('default', ['generate-api-docs', 'watch', 'browserSync']);\ngulp.task('default', ['generate-api-docs', 'watch', 'browserSync']);\n```\n\n### 3. \u8907\u6570\u306emd\u30d5\u30a1\u30a4\u30eb\u30921\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u3059\u308b\ngulpfile\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u901a\u308a\u3001\n\u307e\u305a**apidocs\u30c7\u30a3\u30ec\u30af\u30c8\u30ea**\u3068**published\u30c7\u30a3\u30ec\u30af\u30c8\u30ea**\u3092\u4f5c\u6210\u3059\u308b\u3002\napidocs\u5185\u306b\u3001md\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3044\u304f\u3002\n\n#### 3-1. md\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\napidocs\u5185\u306bsample1.md\u3068sample2.md\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3002\n\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u8eab\u306f\u3001[\u3053\u3061\u3089](http://dev.classmethod.jp/server-side/api-document-with-api-blueprint/)\u306e\u30b5\u30a4\u30c8\u306e\u30b3\u30fc\u30c9\u3092\u5165\u308c\u3066\u307f\u307e\u3057\u305f\u3002\n>\n```sample1.md\n## \u30e6\u30fc\u30b6\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 [/v1/users]\n\n>### \u30e6\u30fc\u30b6\u767b\u9332 [POST]\n\n>#### \u51e6\u7406\u6982\u8981\n\n>* \u30e6\u30fc\u30b6\u60c5\u5831\u3092\u65b0\u3057\u304f\u767b\u9332\u3059\u308b\u3002\n* \u767b\u9332\u306b\u6210\u529f\u3057\u305f\u5834\u5408\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u8fd4\u3059\u3002\n\n>+ Request (application/json)\n\n>    + Headers\n\n>            Accept: application/json\n\n>    + Attributes\n        + email: test@example.com (string, required) - \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\uff08format: email\uff09\n        + password: abc123 (string, required) - \u30d1\u30b9\u30ef\u30fc\u30c9\uff08pattern: ^[0-9A-Za-z]{6,16}$\uff09\n\n>+ Response 201 (application/json)\n\n>    + Attributes\n        + accessToken: f58ba22059f5a8aa8f346e0f40987adab326041fac99029c909bef2c6300821a (string, required) - \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\n```\n\n>\n```sample2.md\n## \u30e6\u30fc\u30b6\u60c5\u5831\u53d6\u5f97 [/v1/groups/{groupId}/users{?userId,mailAddress}]\n\n>### \u30e6\u30fc\u30b6\u60c5\u5831\u53d6\u5f97API [GET]\n\n>#### \u51e6\u7406\u6982\u8981\n\n>* \u6307\u5b9a\u3057\u305f\u4f1a\u54e1\u306e\u60c5\u5831\u3092\u8fd4\u3059\u3002\n* userId\u304bmailAddress\u3044\u305a\u308c\u304b\u306f\u5fc5\u9808\u3002\u3069\u3061\u3089\u3082\u6307\u5b9a\u304c\u306a\u3044\u5834\u5408\u3001BadRequest\u3092\u8fd4\u3059\u3002\n* userId\u3068mailAddress\u304c\u3069\u3061\u3089\u3082\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001userId\u306e\u60c5\u5831\u3092\u5229\u7528\u3057\u3001mailAddress\u306f\u5229\u7528\u3057\u306a\u3044\u3002\n\n>+ Parameters\n\n>    + groupId: 11440002 (number, required) - \u30e6\u30fc\u30b6\u304c\u6240\u5c5e\u3059\u308b\u30b0\u30eb\u30fc\u30d7ID\n    + userId: 300 (number, optional) - \u30e6\u30fc\u30b6ID\n    + mailAddress: some@example.com (string, optional) - \u30e6\u30fc\u30b6\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\n\n>+ Response 200 (application/json)\n\n>    + Attributes\n        + user (required)\n            + name: wada (string, required)            + age: 18 (number, required)\n            + type: 0 (enum, required) - \u30e6\u30fc\u30b6\u7a2e\u5225(0:\u7121\u6599\u30e6\u30fc\u30b6, 1:\u6709\u6599\u30e6\u30fc\u30b6)\n                + 0 (number)\n                + 1 (number)\n            + profile (object, required)\n            + registered: `2015-06-11T08:40:51Z` (string, required)\n            + favorites (array)\n                + `http://dev.classmethod.jp/` (string)\n        + messageHistory (array)\n            + (object)\n                + id: 22345 (number, required)\n                + title: \u4eca\u65e5\u306e\u732e\u7acb (string, required)\n```\n\n\u305d\u306e\u5f8c\u3001\napidocs\u306blayout.md\u3092\u4f5c\u6210\u3059\u308b\nlayout.md\u306f\u8907\u6570\u30d5\u30a1\u30a4\u30eb\u30921\u3064\u306e\u30d5\u30a1\u30a4\u30eb(index.md)\u306b\u7d50\u5408\u3055\u305b\u308b\u5f79\u5272\u3002\n\n```layout.md\nFORMAT: 1A\n\n<% include sample1.md %>\n<% include sample2.md %>\n```\n\n#### 3.2 \u69cb\u6210\n\u6700\u7d42\u7684\u306b\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\n\u251c\u2500\u2500 apidocs\n\u2502   \u251c\u2500\u2500 sample1.md\n\u2502   \u251c\u2500\u2500 sample2.md\n\u2502   \u2514\u2500\u2500 layout.md\n\u251c\u2500\u2500 gulpfile.js\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 published\n    \u251c\u2500\u2500 index.html\n    \u2514\u2500\u2500 index.md\n```\n\n###4. gulp\u306e\u5b9f\u884c\n#### 4.1 \u30dd\u30fc\u30c8\u3092\u958b\u3051\u308b\nvagrant\u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\u306f\u30dd\u30fc\u30c8\u3092\u958b\u3051\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\nVagrantfile\u306b\u4ee5\u4e0b\u306e2\u3064\u3092\u8ffd\u8a18\u3059\u308b\u3002\u3000[\u53c2\u8003\u30b5\u30a4\u30c8](http://blog.10rane.com/2015/09/15/to-create-the-api-documentation-and-the-stub-from-markdown-using-aglio/)\n\n```text:Vagrantfile\nconfig.vm.network \"forwarded_port\", guest: 3000, host: 3000\nconfig.vm.network \"forwarded_port\", guest: 8088, host: 8088\n```\n\n#### 4.2 \u5b9f\u884c\n\n`gulp`\u3092\u5b9f\u884c\u3059\u308b\u3002\n\u5b9f\u884c\u5f8c\u3001\ngulpfile\u304c\u51e6\u7406\u3055\u308c\u3001\n**published\u30c7\u30a3\u30ec\u30af\u30c8\u30ea**\u306b**index.md**\u3068**index.html**\u304c\u81ea\u52d5\u3067\u4f5c\u6210\u3055\u308c\u308b\u3002\n\n\u63a5\u7d9a\u3092\u5207\u308b\u3068\u304d\u306f`ctrl + C`\n\n\u30a2\u30af\u30bb\u30b9\u3059\u308b\nhttp://localhost:8088\n\n\n\u4e0a\u8a18\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3057web\u4e0a\u3067\u4ee5\u4e0b\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u6210\u529f\uff01\n\n![qiita_api\u6700\u5f8c.PNG](https://qiita-image-store.s3.amazonaws.com/0/75241/d1c8733b-0a1c-023b-d429-ae5e045aca6c.png)\n\n\n\u4eca\u56de\u306f\u3053\u3053\u307e\u3067\u3002\n\u307e\u305f\u3001\u66f4\u65b0\u3057\u307e\u3059\u3002\n\n\n# \u53c2\u8003\u30b5\u30a4\u30c8\nhttp://dackdive.hateblo.jp/entry/2015/08/07/181723\nhttp://dev.classmethod.jp/server-side/api-document-with-api-blueprint/\nhttp://blog.10rane.com/2015/09/15/to-create-the-api-documentation-and-the-stub-from-markdown-using-aglio/\nhttp://blog.amedama.jp/entry/2016/03/08/202403\n\nhttps://speakerdeck.com/shimastripe/api-blueprintsu-xi-hui-at-wantedly\n\n\n"}