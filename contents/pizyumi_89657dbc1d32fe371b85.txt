{"context": "LaTeX\u2192DVI\u2192PDF\u2192\uff08\u8907\u6570\u679a\u306e\uff09\u753b\u50cf\u2192\u7d50\u5408\u3057\u305f\u753b\u50cf\u3068\u3044\u3046\u9806\u756a\u3067\u51e6\u7406\u3057\u307e\u3059\u3002\nLaTeX\u3092DVI\u306b\u5909\u63db\u3059\u308b\u306b\u306f\nplatex -guess-input-enc -interaction=nonstopmode xxx.tex\n\n\u3068\u3057\u307e\u3059\u3002\nDVI\u3092PDF\u306b\u5909\u63db\u3059\u308b\u306b\u306f\ndvipdfmx -f ptex-ipaex.map xxx.dvi\n\n\u3068\u3057\u307e\u3059\uff08ptex-ipaex.map\u306f\u30d5\u30a9\u30f3\u30c8\u57cb\u3081\u8fbc\u307f\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u3059\uff09\u3002\nPDF\u3092PNG\u753b\u50cf\u306b\u5909\u63db\u3059\u308b\u306b\u306fImageMagick\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3042\u308bconvert\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\nconvert -density 800 xxx.pdf -quality 100 -resize 800 xxx.png\n\n\u3068\u3057\u307e\u3059\uff08-density\u306f\u89e3\u50cf\u5ea6\u3001-quality\u306f\u54c1\u8cea\u3001-resize\u306f\u30b5\u30a4\u30ba\u3067\u3059\uff09\u3002PDF\u304c\u8907\u6570\u30da\u30fc\u30b8\u306e\u5834\u5408\u306f\u8907\u6570\u679a\u306e\u753b\u50cf\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\u8907\u6570\u679a\u306e\u753b\u50cf\u304c\u751f\u6210\u3055\u308c\u308b\u5834\u5408\u3001\u305d\u308c\u305e\u308c\u306e\u753b\u50cf\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u306fxxx-1.png\u3001xxx-2.png\u3001\u30fb\u30fb\u30fb\u3001xxx-9.png\u3001xxx-10.png\u3001\u30fb\u30fb\u30fb\u3068\u306a\u308a\u307e\u3059\u3002\n\u753b\u50cf\u3092\u7d50\u5408\u3059\u308b\u306b\u306f\nmontage +frame +shadow +label -tile 2x -geometry 800x600+0+0 xxx-*.png xxx.png\n\n\u3068\u3057\u307e\u3059\uff08+frame +shadow +label\u306fmontage\u306b\u753b\u50cf\u306e\u7d50\u5408\u4ee5\u5916\u306e\u4f59\u8a08\u306a\u3053\u3068\u3092\u3055\u305b\u306a\u3044\u305f\u3081\u306e\u8a2d\u5b9a\u3001-tile\u306f\u7e26\u6a2a\u4f55\u679a\u305a\u3064\u753b\u50cf\u3092\u4e26\u3079\u308b\u304b\u3001-geometry\u306f\u753b\u50cf\u3092\u4e26\u3079\u308b\u5834\u6240\uff08\u30bf\u30a4\u30eb\uff09\u306e\u30b5\u30a4\u30ba\u3067\u3059\u3002-tile 2x\u3067\u6a2a2\u679a\u305a\u3064\u4e26\u3079\u308b\u3068\u3044\u3046\u8a2d\u5b9a\u3067\u3059\u3002-geometry 800x600+0+0\u3067\u30bf\u30a4\u30eb\u306e\u30b5\u30a4\u30ba\u304c\u6a2a800px\u3001\u7e26600px\u3068\u306a\u308a\u307e\u3059\u3002+0+0\u306f\u4f59\u767d\u306a\u3057\u3068\u3044\u3046\u3053\u3068\u3067\u3059\uff09\u3002\n\n\u3053\u306e\u3088\u3046\u306a\u51e6\u7406\u3092Node.js\u3092\u4f7f\u3063\u3066\u884c\u3046\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\u305f\u3060\u3057\u3001PDF\u304b\u3089\u751f\u6210\u3055\u308c\u305f\u753b\u50cf\u304c10\u679a\u4ee5\u4e0a\u306e\u5834\u5408\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u540d\u306e\u6240\u70ba\u3067\u3001montage\u3067\u7d50\u5408\u3092\u884c\u3046\u306810\u679a\u76ee\uff5e19\u679a\u76ee\u306e\u753b\u50cf\u304c2\u679a\u76ee\u306e\u753b\u50cf\u306e\u524d\u306b\u7d50\u5408\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u3053\u308c\u3067\u306f\u4e0d\u5473\u3044\u306e\u3067PDF\u304b\u3089\u751f\u6210\u3055\u308c\u305f\u753b\u50cf\u304c10\u679a\u4ee5\u4e0a\u3042\u308b\u5834\u5408\u306b\u306f1\u679a\u76ee\u304b\u30899\u679a\u76ee\u307e\u3067\u306e\u753b\u50cf\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u9023\u756a\u90e8\u5206\u306e\u5192\u982d\u306b0\u3092\u633f\u5165\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\u3053\u308c\u3067\u753b\u50cf\u304c10\u679a\u4ee5\u4e0a100\u679a\u672a\u6e80\u306e\u5834\u5408\u306b\u306f\u5bfe\u5fdc\u3067\u304d\u3066\u3044\u307e\u3059\u304c\u3001100\u679a\u4ee5\u4e0a\u306e\u5834\u5408\u306b\u306f\u5bfe\u5fdc\u3067\u304d\u3066\u3044\u306a\u3044\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\uff08\u30b9\u30e9\u30a4\u30c9\u306e\u679a\u6570\u304c100\u679a\u4ee5\u4e0a\u306b\u306a\u308b\u3053\u3068\u306f\u7a00\u3060\u3068\u601d\u3046\u306e\u3067100\u679a\u4ee5\u4e0a\u306e\u5834\u5408\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\uff09\u3002\n\u3042\u3068\u3001\u3053\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3059\u308b\u524d\u306b\u306f\u540c\u3058\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308b\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u306f\u5168\u3066\u524a\u9664\u3059\u308b\u304b\u3001\u3069\u3053\u304b\u5225\u306e\u5834\u6240\u306b\u79fb\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u305d\u3046\u3057\u306a\u3044\u3068\u3001\u7121\u95a2\u4fc2\u306e\u753b\u50cf\u304c\u7d50\u5408\u3055\u308c\u3066\u3057\u307e\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff08\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u6700\u521d\u306b\u81ea\u52d5\u3067\u524a\u9664\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3082\u826f\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff09\u3002\nvar childProcess = require('child_process');\nvar fs = require('fs');\n\nif (process.argv.length < 3) {\n    console.error('lack argument.');\n    process.exit(1);\n}\n\nvar tex = process.argv[2] + '.tex';\nvar dvi = process.argv[2] + '.dvi';\nvar pdf = process.argv[2] + '.pdf';\nvar pngs = process.argv[2] + '-*.png';\nvar png = process.argv[2] + '.png';\n\nfunction pngn(n) {\n    return process.argv[2] + '-' + + n + '.png';\n}\n\nfunction pngn2(n) {\n    return process.argv[2] + '-0' + + n + '.png';\n}\n\nprocessPlatex(0);\n\nfunction processPlatex(i) {\n    var platex = childProcess.spawn('platex', ['-guess-input-enc', '-interaction=nonstopmode', tex], { stdio: 'inherit' });\n    platex.on('close', function (code) {\n        if (i == 0) {\n            processPlatex(1)\n        }\n        else if (i == 1) {\n            processDvipdfmx();\n        }\n        else {\n            console.error('coding error.');\n            process.exit(1);\n        }\n    });\n    platex.on('error', function (err) {\n        console.error(err);\n        process.exit(1);\n    });\n}\n\nfunction processDvipdfmx() {\n    var dvipdfmx = childProcess.spawn('dvipdfmx', ['-f', 'ptex-ipaex.map', dvi], { stdio: 'inherit' });\n    dvipdfmx.on('close', function (code) {\n        processConvert();\n    });\n    dvipdfmx.on('error', function (err) {\n        console.error(err);\n        process.exit(1);\n    });\n}\n\nfunction processConvert() {\n    var convert = childProcess.spawn('convert', ['-density', '800', pdf, '-quality', '100', '-resize', '800', png], { stdio: 'inherit' });\n    convert.on('close', function (code) {\n        fs.stat(pngn(10), function (err, stats) {\n            if (!err) {\n                processRename(1);\n            }\n            else {\n                processMontage();\n            }\n        });\n    });\n    convert.on('error', function (err) {\n        console.error(err);\n        process.exit(1);\n    });\n}\n\nfunction processRename(i) {\n    if (i == 10) {\n        processMontage();\n    }\n    else {\n        fs.rename(pngn(i), pngn2(i), function (err) {\n            if (err) {\n                console.error(err);\n                process.exit(1);\n            }\n            else {\n                processRename(++i);\n            }\n        });\n    }\n}\n\nfunction processMontage() {\n    var montage = childProcess.spawn('montage', ['+frame', '+shadow', '+label', '-tile', '2x', '-geometry', '800x600+0+0', pngs, png], { stdio: 'inherit' });\n    montage.on('close', function (code) {\n        console.log('finished!!');\n    });\n    montage.on('error', function (err) {\n        console.error(err);\n        process.exit(1);\n    });\n}\n\nLaTeX\u2192DVI\u2192PDF\u2192\uff08\u8907\u6570\u679a\u306e\uff09\u753b\u50cf\u2192\u7d50\u5408\u3057\u305f\u753b\u50cf\u3068\u3044\u3046\u9806\u756a\u3067\u51e6\u7406\u3057\u307e\u3059\u3002\n\nLaTeX\u3092DVI\u306b\u5909\u63db\u3059\u308b\u306b\u306f\n\n```\nplatex -guess-input-enc -interaction=nonstopmode xxx.tex\n```\n\n\u3068\u3057\u307e\u3059\u3002\n\nDVI\u3092PDF\u306b\u5909\u63db\u3059\u308b\u306b\u306f\n\n```\ndvipdfmx -f ptex-ipaex.map xxx.dvi\n```\n\n\u3068\u3057\u307e\u3059\uff08`ptex-ipaex.map`\u306f\u30d5\u30a9\u30f3\u30c8\u57cb\u3081\u8fbc\u307f\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u3059\uff09\u3002\n\nPDF\u3092PNG\u753b\u50cf\u306b\u5909\u63db\u3059\u308b\u306b\u306fImageMagick\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3042\u308b`convert`\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```\nconvert -density 800 xxx.pdf -quality 100 -resize 800 xxx.png\n```\n\n\u3068\u3057\u307e\u3059\uff08`-density`\u306f\u89e3\u50cf\u5ea6\u3001`-quality`\u306f\u54c1\u8cea\u3001`-resize`\u306f\u30b5\u30a4\u30ba\u3067\u3059\uff09\u3002PDF\u304c\u8907\u6570\u30da\u30fc\u30b8\u306e\u5834\u5408\u306f\u8907\u6570\u679a\u306e\u753b\u50cf\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\u8907\u6570\u679a\u306e\u753b\u50cf\u304c\u751f\u6210\u3055\u308c\u308b\u5834\u5408\u3001\u305d\u308c\u305e\u308c\u306e\u753b\u50cf\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u306f`xxx-1.png`\u3001`xxx-2.png`\u3001\u30fb\u30fb\u30fb\u3001`xxx-9.png`\u3001`xxx-10.png`\u3001\u30fb\u30fb\u30fb\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u753b\u50cf\u3092\u7d50\u5408\u3059\u308b\u306b\u306f\n\n```\nmontage +frame +shadow +label -tile 2x -geometry 800x600+0+0 xxx-*.png xxx.png\n```\n\n\u3068\u3057\u307e\u3059\uff08`+frame +shadow +label`\u306f`montage`\u306b\u753b\u50cf\u306e\u7d50\u5408\u4ee5\u5916\u306e\u4f59\u8a08\u306a\u3053\u3068\u3092\u3055\u305b\u306a\u3044\u305f\u3081\u306e\u8a2d\u5b9a\u3001`-tile`\u306f\u7e26\u6a2a\u4f55\u679a\u305a\u3064\u753b\u50cf\u3092\u4e26\u3079\u308b\u304b\u3001`-geometry`\u306f\u753b\u50cf\u3092\u4e26\u3079\u308b\u5834\u6240\uff08\u30bf\u30a4\u30eb\uff09\u306e\u30b5\u30a4\u30ba\u3067\u3059\u3002`-tile 2x`\u3067\u6a2a2\u679a\u305a\u3064\u4e26\u3079\u308b\u3068\u3044\u3046\u8a2d\u5b9a\u3067\u3059\u3002`-geometry 800x600+0+0`\u3067\u30bf\u30a4\u30eb\u306e\u30b5\u30a4\u30ba\u304c\u6a2a`800px`\u3001\u7e26`600px`\u3068\u306a\u308a\u307e\u3059\u3002`+0+0`\u306f\u4f59\u767d\u306a\u3057\u3068\u3044\u3046\u3053\u3068\u3067\u3059\uff09\u3002\n\n----\n\n\u3053\u306e\u3088\u3046\u306a\u51e6\u7406\u3092Node.js\u3092\u4f7f\u3063\u3066\u884c\u3046\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\n\u305f\u3060\u3057\u3001PDF\u304b\u3089\u751f\u6210\u3055\u308c\u305f\u753b\u50cf\u304c10\u679a\u4ee5\u4e0a\u306e\u5834\u5408\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u540d\u306e\u6240\u70ba\u3067\u3001`montage`\u3067\u7d50\u5408\u3092\u884c\u3046\u306810\u679a\u76ee\uff5e19\u679a\u76ee\u306e\u753b\u50cf\u304c2\u679a\u76ee\u306e\u753b\u50cf\u306e\u524d\u306b\u7d50\u5408\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u3053\u308c\u3067\u306f\u4e0d\u5473\u3044\u306e\u3067PDF\u304b\u3089\u751f\u6210\u3055\u308c\u305f\u753b\u50cf\u304c10\u679a\u4ee5\u4e0a\u3042\u308b\u5834\u5408\u306b\u306f1\u679a\u76ee\u304b\u30899\u679a\u76ee\u307e\u3067\u306e\u753b\u50cf\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u9023\u756a\u90e8\u5206\u306e\u5192\u982d\u306b`0`\u3092\u633f\u5165\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u3053\u308c\u3067\u753b\u50cf\u304c10\u679a\u4ee5\u4e0a100\u679a\u672a\u6e80\u306e\u5834\u5408\u306b\u306f\u5bfe\u5fdc\u3067\u304d\u3066\u3044\u307e\u3059\u304c\u3001100\u679a\u4ee5\u4e0a\u306e\u5834\u5408\u306b\u306f\u5bfe\u5fdc\u3067\u304d\u3066\u3044\u306a\u3044\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\uff08\u30b9\u30e9\u30a4\u30c9\u306e\u679a\u6570\u304c100\u679a\u4ee5\u4e0a\u306b\u306a\u308b\u3053\u3068\u306f\u7a00\u3060\u3068\u601d\u3046\u306e\u3067100\u679a\u4ee5\u4e0a\u306e\u5834\u5408\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\uff09\u3002\n\n\u3042\u3068\u3001\u3053\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3059\u308b\u524d\u306b\u306f\u540c\u3058\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308b\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u306f\u5168\u3066\u524a\u9664\u3059\u308b\u304b\u3001\u3069\u3053\u304b\u5225\u306e\u5834\u6240\u306b\u79fb\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u305d\u3046\u3057\u306a\u3044\u3068\u3001\u7121\u95a2\u4fc2\u306e\u753b\u50cf\u304c\u7d50\u5408\u3055\u308c\u3066\u3057\u307e\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff08\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u6700\u521d\u306b\u81ea\u52d5\u3067\u524a\u9664\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3082\u826f\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff09\u3002\n\n```js\nvar childProcess = require('child_process');\nvar fs = require('fs');\n\nif (process.argv.length < 3) {\n\tconsole.error('lack argument.');\n\tprocess.exit(1);\n}\n\nvar tex = process.argv[2] + '.tex';\nvar dvi = process.argv[2] + '.dvi';\nvar pdf = process.argv[2] + '.pdf';\nvar pngs = process.argv[2] + '-*.png';\nvar png = process.argv[2] + '.png';\n\nfunction pngn(n) {\n\treturn process.argv[2] + '-' + + n + '.png';\n}\n\nfunction pngn2(n) {\n\treturn process.argv[2] + '-0' + + n + '.png';\n}\n\nprocessPlatex(0);\n\nfunction processPlatex(i) {\n\tvar platex = childProcess.spawn('platex', ['-guess-input-enc', '-interaction=nonstopmode', tex], { stdio: 'inherit' });\n\tplatex.on('close', function (code) {\n\t\tif (i == 0) {\n\t\t\tprocessPlatex(1)\n\t\t}\n\t\telse if (i == 1) {\n\t\t\tprocessDvipdfmx();\n\t\t}\n\t\telse {\n\t\t\tconsole.error('coding error.');\n\t\t\tprocess.exit(1);\n\t\t}\n\t});\n\tplatex.on('error', function (err) {\n\t\tconsole.error(err);\n\t\tprocess.exit(1);\n\t});\n}\n\nfunction processDvipdfmx() {\n\tvar dvipdfmx = childProcess.spawn('dvipdfmx', ['-f', 'ptex-ipaex.map', dvi], { stdio: 'inherit' });\n\tdvipdfmx.on('close', function (code) {\n\t\tprocessConvert();\n\t});\n\tdvipdfmx.on('error', function (err) {\n\t\tconsole.error(err);\n\t\tprocess.exit(1);\n\t});\n}\n\nfunction processConvert() {\n\tvar convert = childProcess.spawn('convert', ['-density', '800', pdf, '-quality', '100', '-resize', '800', png], { stdio: 'inherit' });\n\tconvert.on('close', function (code) {\n\t\tfs.stat(pngn(10), function (err, stats) {\n\t\t\tif (!err) {\n\t\t\t\tprocessRename(1);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tprocessMontage();\n\t\t\t}\n\t\t});\n\t});\n\tconvert.on('error', function (err) {\n\t\tconsole.error(err);\n\t\tprocess.exit(1);\n\t});\n}\n\nfunction processRename(i) {\n\tif (i == 10) {\n\t\tprocessMontage();\n\t}\n\telse {\n\t\tfs.rename(pngn(i), pngn2(i), function (err) {\n\t\t\tif (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t\tprocess.exit(1);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tprocessRename(++i);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction processMontage() {\n\tvar montage = childProcess.spawn('montage', ['+frame', '+shadow', '+label', '-tile', '2x', '-geometry', '800x600+0+0', pngs, png], { stdio: 'inherit' });\n\tmontage.on('close', function (code) {\n\t\tconsole.log('finished!!');\n\t});\n\tmontage.on('error', function (err) {\n\t\tconsole.error(err);\n\t\tprocess.exit(1);\n\t});\n}\n```\n", "tags": ["JavaScript", "Node.js", "LaTeX", "ImageMagick"]}