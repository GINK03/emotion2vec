{"context": " More than 1 year has passed since last update.\n\nUtility\n/**\n * \u5e8a\u306e\u30de\u30a6\u30b9\u5ea7\u6a19(2D\u5ea7\u6a19)\u304b\u30893D\u5ea7\u6a19\u3092\u6c42\u3081\u308b\n * \u7528\u9014: \u30de\u30a6\u30b9\u30ab\u30fc\u30bd\u30eb\u306b\u8ffd\u968f\u3059\u308b\u5e8a\u306e\u76ee\u5370\u306a\u3069 \n */\npublic function get3DcoordsFrom2D():Vector3D\n{\n    if (!isNaN(mouseX) && !isNaN(mouseY)){\n        var pico:PickingCollisionVO = view.mousePicker.getViewCollision(mouseX, mouseY, view);\n        if (pico){\n            return new Vector3D(pico.localPosition.x, pico.localPosition.y, pico.localPosition.z);\n        }\n    }\n    return null;\n}\n\n/**\n * \u30e1\u30c3\u30b7\u30e5\u306e3D\u5ea7\u6a19\u304b\u3089\u30b9\u30af\u30ea\u30fc\u30f32D\u5ea7\u6a19\u3092\u6c42\u3081\u308b\n * \u7528\u9014: \u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u982d\u4e0a\u306b\u8868\u793a\u3059\u308b2D\u306e\u30a4\u30f3\u30b8\u30b1\u30fc\u30bf\u306a\u3069\n */\npublic function get2DcoordsFromMesh(mesh:Mesh):Point\n{\n    var pos2D:Vector3D = view.project(mesh.sceneTransform.position);\n    return new Point(pos2D.x, pos2D.y);\n}\n\n\n\u6e96\u5099\nview.mousePicker\u306b\u53cd\u5fdc\u3055\u305b\u308b\u305f\u3081\u306b\u306f\u3001\u5e8a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066\u4ee5\u4e0b\u306e\u64cd\u4f5c\u304c\u5fc5\u8981\u3067\u3059\u3002\nfloor.mouseEnabled = true;\n\n\n\u4f7f\u3044\u65b9\nenterframe\u5185\nvar vec:Vector3D = get3DcoordsFrom2D();\nif(vec){\n    mesh.x = vec.x;\n    mesh.z = vec.z;\n}\nvar p:Point = get2DcoordsFromMesh(mesh);\nsquare.x = p.x - square.width/2;\nsquare.y = p.y - square.height; //\u9ad8\u3055\u306b\u8abf\u6574\u5fc5\u8981\nview.render();\n\n\n\u305d\u306e\u4ed6\n\n\u5b9f\u969b\u306b\u4f7f\u3046\u969b\u306freturn \u3067 new\u3055\u305b\u308b\u306e\u3067\u306f\u306a\u304f\u304a\u597d\u307f\u3067\u5024\u3092\u8a2d\u5b9a\u3055\u305b\u308b\u306a\u3069\u3057\u3066\u304f\u3060\u3055\u3044\n\u30ad\u30e3\u30e9\u306e\u982d\u306b\u8a2d\u5b9a\u3057\u305f\u3044\u3068\u304d\u306f\u3001\u30a4\u30f3\u30b8\u30b1\u30fc\u30bf\u7528\u30c0\u30df\u30fc\u306eMesh\u3092\u982d\u306b\u8a2d\u5b9a\u3059\u308b\u3068\u304d\u308c\u3044\u306b\u30cf\u30de\u308a\u307e\u3059\n\n## Utility\n\n```as3\n/**\n * \u5e8a\u306e\u30de\u30a6\u30b9\u5ea7\u6a19(2D\u5ea7\u6a19)\u304b\u30893D\u5ea7\u6a19\u3092\u6c42\u3081\u308b\n * \u7528\u9014: \u30de\u30a6\u30b9\u30ab\u30fc\u30bd\u30eb\u306b\u8ffd\u968f\u3059\u308b\u5e8a\u306e\u76ee\u5370\u306a\u3069 \n */\npublic function get3DcoordsFrom2D():Vector3D\n{\n\tif (!isNaN(mouseX) && !isNaN(mouseY)){\n\t\tvar pico:PickingCollisionVO = view.mousePicker.getViewCollision(mouseX, mouseY, view);\n\t\tif (pico){\n\t\t\treturn new Vector3D(pico.localPosition.x, pico.localPosition.y, pico.localPosition.z);\n\t\t}\n\t}\n\treturn null;\n}\n\n/**\n * \u30e1\u30c3\u30b7\u30e5\u306e3D\u5ea7\u6a19\u304b\u3089\u30b9\u30af\u30ea\u30fc\u30f32D\u5ea7\u6a19\u3092\u6c42\u3081\u308b\n * \u7528\u9014: \u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u982d\u4e0a\u306b\u8868\u793a\u3059\u308b2D\u306e\u30a4\u30f3\u30b8\u30b1\u30fc\u30bf\u306a\u3069\n */\npublic function get2DcoordsFromMesh(mesh:Mesh):Point\n{\n\tvar pos2D:Vector3D = view.project(mesh.sceneTransform.position);\n\treturn new Point(pos2D.x, pos2D.y);\n}\n```\n\n## \u6e96\u5099\nview.mousePicker\u306b\u53cd\u5fdc\u3055\u305b\u308b\u305f\u3081\u306b\u306f\u3001\u5e8a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066\u4ee5\u4e0b\u306e\u64cd\u4f5c\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n```as3\nfloor.mouseEnabled = true;\n```\n\n## \u4f7f\u3044\u65b9\n\nenterframe\u5185\n\n```as3\nvar vec:Vector3D = get3DcoordsFrom2D();\nif(vec){\n\tmesh.x = vec.x;\n\tmesh.z = vec.z;\n}\nvar p:Point = get2DcoordsFromMesh(mesh);\nsquare.x = p.x - square.width/2;\nsquare.y = p.y - square.height; //\u9ad8\u3055\u306b\u8abf\u6574\u5fc5\u8981\nview.render();\n```\n\n## \u305d\u306e\u4ed6\n- \u5b9f\u969b\u306b\u4f7f\u3046\u969b\u306freturn \u3067 new\u3055\u305b\u308b\u306e\u3067\u306f\u306a\u304f\u304a\u597d\u307f\u3067\u5024\u3092\u8a2d\u5b9a\u3055\u305b\u308b\u306a\u3069\u3057\u3066\u304f\u3060\u3055\u3044\n- \u30ad\u30e3\u30e9\u306e\u982d\u306b\u8a2d\u5b9a\u3057\u305f\u3044\u3068\u304d\u306f\u3001\u30a4\u30f3\u30b8\u30b1\u30fc\u30bf\u7528\u30c0\u30df\u30fc\u306eMesh\u3092\u982d\u306b\u8a2d\u5b9a\u3059\u308b\u3068\u304d\u308c\u3044\u306b\u30cf\u30de\u308a\u307e\u3059", "tags": ["ActionScript", "Away3D4.1", "Stage3D"]}