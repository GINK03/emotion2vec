{"context": " More than 1 year has passed since last update.\n\n[\u73fe\u8c61]\n\nnginx \u3068 uwsgi \u3092\u8d77\u52d5\u3057\u305f\u304c\u300c502 Bad Gateway\u300d\nnginx\u304b\u3089\u30d7\u30ed\u30ad\u30b7\u306f\u3046\u307e\u304f\u3044\u3063\u3066\u3044\u308b\u304cuwsgi\u304c\u53d7\u53d6\u308c\u3066\u3044\u306a\u3044\u3088\u3046\u3060\n\n\n[\u539f\u56e0]\n\n\u30ab\u30fc\u30cd\u30eb\u5024\u8abf\u6574\u4e0d\u8db3\n\n\n\n\u30ed\u30b0\u78ba\u8a8d\n\n//uWSGI\u30ed\u30b0\n*** Starting uWSGI 2.0.9 (64bit) on [Fri May 29 19:34:16 2015] ***\ncompiled with version: 4.4.7 20120313 (Red Hat 4.4.7-11) on 27 May 2015 15:04:13\nos: Linux-2.6.32-504.el6.x86_64 #1 SMP Wed Oct 15 04:27:16 UTC 2014\nnodename: webap-01\nmachine: x86_64\nclock source: unix\ndetected number of CPU cores: 1\ncurrent working directory: /etc/uwsgi\ndetected binary path: /opt/venv/app/bin/uwsgi\n!!! no internal routing support, rebuild with pcre support !!!\nsetgid() to 99\nsetuid() to 498\nchdir() to /opt/app/\nyour processes number limit is 20480\nyour memory page size is 4096 bytes\ndetected max file descriptor number: 65536\nlock engine: pthread robust mutexes\nthunder lock: disabled (you can enable it with --thunder-lock)\nListen queue size is greater than the system max net.core.somaxconn (1024).\n\n\n\u300cnet.core.somaxconn\u300d\u304c\u8db3\u308a\u306a\u3044\u3088\u3046\u3060\u3002\n\n# grep listen /etc/uwsgi.yaml\n  listen: 16384\n# vi /etc/sysctl.conf\nnet.core.somaxconn = 20480\n# sysctl -w net.core.somaxconn=20480\n# sysctl net.core.somaxconn\n\n# /etc/rc.d/init.d/uwsgi restart\n\n//uWSGI\u30ed\u30b0\n\n*** Starting uWSGI 2.0.9 (64bit) \n:\n*** uWSGI is running in multiple interpreter mode ***\nspawned uWSGI master process (pid: 26131)\nspawned uWSGI worker 1 (pid: 26132, cores: 1)\nspawned uWSGI worker 2 (pid: 26133, cores: 1)\nspawned uWSGI worker 3 (pid: 26134, cores: 1)\nspawned uWSGI worker 4 (pid: 26135, cores: 1)\n\n\u8d77\u52d5\u3057\u305f\u3000\u03b5-(\u00b4\u2200\uff40*)\uff8e\uff6f\n####[\u73fe\u8c61]\n* nginx \u3068 uwsgi \u3092\u8d77\u52d5\u3057\u305f\u304c\u300c502 Bad Gateway\u300d\n* nginx\u304b\u3089\u30d7\u30ed\u30ad\u30b7\u306f\u3046\u307e\u304f\u3044\u3063\u3066\u3044\u308b\u304cuwsgi\u304c\u53d7\u53d6\u308c\u3066\u3044\u306a\u3044\u3088\u3046\u3060\n\n####[\u539f\u56e0]\n* \u30ab\u30fc\u30cd\u30eb\u5024\u8abf\u6574\u4e0d\u8db3\n\n--------------------------------------------------\n\n* \u30ed\u30b0\u78ba\u8a8d\n\n```\n//uWSGI\u30ed\u30b0\n*** Starting uWSGI 2.0.9 (64bit) on [Fri May 29 19:34:16 2015] ***\ncompiled with version: 4.4.7 20120313 (Red Hat 4.4.7-11) on 27 May 2015 15:04:13\nos: Linux-2.6.32-504.el6.x86_64 #1 SMP Wed Oct 15 04:27:16 UTC 2014\nnodename: webap-01\nmachine: x86_64\nclock source: unix\ndetected number of CPU cores: 1\ncurrent working directory: /etc/uwsgi\ndetected binary path: /opt/venv/app/bin/uwsgi\n!!! no internal routing support, rebuild with pcre support !!!\nsetgid() to 99\nsetuid() to 498\nchdir() to /opt/app/\nyour processes number limit is 20480\nyour memory page size is 4096 bytes\ndetected max file descriptor number: 65536\nlock engine: pthread robust mutexes\nthunder lock: disabled (you can enable it with --thunder-lock)\nListen queue size is greater than the system max net.core.somaxconn (1024).\n```\n\n* \u300cnet.core.somaxconn\u300d\u304c\u8db3\u308a\u306a\u3044\u3088\u3046\u3060\u3002\n\n```\n# grep listen /etc/uwsgi.yaml\n  listen: 16384\n# vi /etc/sysctl.conf\nnet.core.somaxconn = 20480\n# sysctl -w net.core.somaxconn=20480\n# sysctl net.core.somaxconn\n```\n\n```\n# /etc/rc.d/init.d/uwsgi restart\n```\n\n```\n//uWSGI\u30ed\u30b0\n\n*** Starting uWSGI 2.0.9 (64bit) \n:\n*** uWSGI is running in multiple interpreter mode ***\nspawned uWSGI master process (pid: 26131)\nspawned uWSGI worker 1 (pid: 26132, cores: 1)\nspawned uWSGI worker 2 (pid: 26133, cores: 1)\nspawned uWSGI worker 3 (pid: 26134, cores: 1)\nspawned uWSGI worker 4 (pid: 26135, cores: 1)\n```\n\n\u8d77\u52d5\u3057\u305f\u3000\u03b5-(\u00b4\u2200\uff40*)\uff8e\uff6f\n", "tags": ["nginx", "python3", "uwsgi"]}