{"tags": ["d3.js"], "context": " More than 1 year has passed since last update.D3.js\u3067\u5358\u7d14\u306a\u68d2\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\u3057\u3066\u307f\u308b\u3002\n\u4f7f\u7528\u3059\u308bWebAPI\u306fIT\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u304b\u3089\u9078\u5b9a\u3002\n\u25a0css\n.axis path,\n.axis line {\n   fill: none;\n   stroke: black;\n   shape-rendering: crispEdges;\n}\n\n.axis text {\n   font-family: sans-serif;\n   font-size: 11px;\n}\n\n.d3sample text {\n    font-size: 11px;\n    width: 100%;\n}\n\ncss\u3067\u306f\u30b0\u30e9\u30d5\u4e0a\u306e\u30c6\u30ad\u30b9\u30c8\u3084\u76ee\u76db\u306e\u7dda\u5e45\u306a\u3069\u3092\u8abf\u6574\u3057\u3066\u3044\u308b\u3002\n\u25a0js\nvar WebAPIURL = \"http://www.itdashboard.go.jp/PublicApi/getData.json?dataset=BasicInformation&field=organization&option=count\";\n\nd3.json(WebAPIURL, function(error, data) {\n    var areaId = \"#d3numberofsystem\";\n    // WebAPI\u547c\u51fa\u3057\u6642\u30a8\u30e9\u30fc\n    if (error) {\n        d3.select(areaId).html(error.statusText);\n        return;\n    }\n\n    // \u30b0\u30e9\u30d5\u63cf\u753b\u7528\u5b9a\u6570 \u5358\u4f4d\u306f\u3059\u3079\u3066px\n    var xZeroPoint = 100; // x\u5ea7\u6a19\u306e\u8d77\u70b9\n    var yZeroPoint = 5; // y\u5ea7\u6a19\u306e\u8d77\u70b9\n    var scaleRange = 50; // \u76ee\u76db\u306e\u5e45\n    var axisRange = 20; // \u8ef8\u306e\u5e45\n    var rectRange = 8; // \u68d2\u306e\u5e45\n    var rectSpace = rectRange + 6; // \u4f59\u767d\u8fbc\u307f\u306e\u68d2\u306e\u5e45\n\n    // \u30b0\u30e9\u30d5\u63cf\u753b\u7528\u5909\u6570\n    // \u53d6\u5f97\u30c7\u30fc\u30bf\u304b\u3089\u30b0\u30e9\u30d5\u63cf\u753b\u306e\u5e45\u306b\u5fc5\u8981\u306apx\u3092\u7b97\u51fa\n    var xMAX = xZeroPoint + d3.max(data.raw_data, function(d) {\n        return d.count;\n    });\n    // \u53d6\u5f97\u30c7\u30fc\u30bf\u304b\u3089\u30b0\u30e9\u30d5\u63cf\u753b\u306e\u9ad8\u3055\u306b\u5fc5\u8981\u306apx\u3092\u7b97\u51fa\n    var yMAX = yZeroPoint + data.raw_data.length * rectSpace;\n    // \u76ee\u76db\u6700\u5927\u5024\u3092\u7b97\u51fa\n    var xAxisMAX = (xMAX - xMAX % scaleRange) + scaleRange;\n\n    // SVG\u306e\u63cf\u753b\u30a8\u30ea\u30a2\u3092\u4f5c\u6210\n    var svg = d3.select(areaId) // \u63cf\u753b\u30a8\u30ea\u30a2\u3092\u6307\u5b9a\n        .append(\"svg\") // svg\u8981\u7d20\u3092\u8ffd\u52a0\n        .attr(\"width\", xMAX + axisRange) // \u63cf\u753b\u30a8\u30ea\u30a2\u306e\u6a2a\u5e45\u3092\u6307\u5b9a\n        .attr(\"height\", yMAX + axisRange); // \u63cf\u753b\u30a8\u30ea\u30a2\u306e\u7e26\u5e45\u3092\u6307\u5b9a\n\n    // \u76ee\u76db\u5e45\u306e\u30b0\u30ea\u30c3\u30c9\u7dda\u3092\u4f5c\u6210\n    var range = d3.range(xAxisMAX, xZeroPoint, -scaleRange);\n    svg.selectAll(\"line.v\")\n        .data(range).enter().append(\"line\")\n        .attr(\"x1\", function(d, i) {\n            return d;\n        }).attr(\"y1\", yZeroPoint)\n        .attr(\"x2\", function(d, i) {\n            return d;\n        }).attr(\"y2\", yMAX);\n    svg.selectAll(\"line\")\n        .attr(\"stroke\", \"#DDDDDD\")\n        .attr(\"shape-rendering\", \"crispEdges\");\n\n    // \u68d2\u30b0\u30e9\u30d5\u306e\u68d2\u306e\u90e8\u5206\u3092\u4f5c\u6210\n    svg.selectAll(\"rect\")\n        .data(data.raw_data) // \u53d6\u5f97\u30c7\u30fc\u30bf\u306e\u8a2d\u5b9a\n        .enter() // \u30c7\u30fc\u30bf\u6570\u5206\u7e70\u308a\u8fd4\u3057\n        .append(\"rect\")\n        .attr(\"x\", xZeroPoint) // x\u5ea7\u6a19\u306f\u8d77\u70b9\u306e\u305f\u3081\u56fa\u5b9a\n        .attr(\"y\", function(row, i) {\n            return i * rectSpace + yZeroPoint;\n        }) // y\u5ea7\u6a19\u306f\u30c7\u30fc\u30bf1\u884c\u3054\u3068\u306b\u8d77\u70b9\u3092\u5909\u66f4\n        .attr(\"width\", function(row) {\n            return row.count;\n        }) // \u6a2a\u5e45\u3092\u6307\u5b9a\n        .attr(\"height\", rectRange) // \u7e26\u5e45\u3092\u6307\u5b9a\n        .attr(\"fill\", \"blue\");\n\n    // \u68d2\u30b0\u30e9\u30d5\u306e\u7e26\u8ef8\u306e\u8868\u793a\u8981\u7d20(\u7d44\u7e54\u540d\u4e00\u89a7)\u3092\u4f5c\u6210\n    svg.selectAll(\"text\")\n        .data(data.raw_data)\n        .enter()\n        .append(\"text\")\n        .attr(\"x\", 10)\n        .attr(\"y\", function(row, i) {\n            return i * rectSpace + (yZeroPoint + rectRange);\n        })\n        .text(function(row) {\n            return row.organization;\n        });\n\n    // \u7e26\u8ef8\u306e\u4f5c\u6210\n    // \u30b9\u30b1\u30fc\u30eb\u8a2d\u5b9a\uff08\u76ee\u76db\u7121\u3057\uff09\n    var yScale = d3.scale.linear()\n        .domain([0, 0])\n        .range([0, yMAX]);\n    // y\u8ef8\u306e\u63cf\u753b\n    svg.append(\"g\")\n        .attr(\"class\", \"axis\")\n        .attr(\"transform\", \"translate(\" + xZeroPoint + \", \" + 0 + \")\") // \u51fa\u529b\u8d77\u70b9\n        .call(d3.svg.axis()\n            .scale(yScale) // \u30b9\u30b1\u30fc\u30eb\u3092\u9069\u7528\u3059\u308b\n            .orient(\"left\")); // \u7dda\u306e\u63cf\u753b\u4f4d\u7f6e\n\n    // \u30b9\u30b1\u30fc\u30eb\u8a2d\u5b9a\uff08\u76ee\u76db\u6709\u308a\uff09\n    var xScale = d3.scale.linear() // \u30b9\u30b1\u30fc\u30eb\u3092\u8a2d\u5b9a\n        .domain([0, xAxisMAX]) // \u8868\u793a\u4e0a\u306e\u30b5\u30a4\u30ba\n        .range([0, xAxisMAX]); // \u5b9f\u969b\u306e\u51fa\u529b\u30b5\u30a4\u30ba\n    // x\u8ef8\u306e\u63cf\u753b\n    svg.append(\"g\")\n        .attr(\"class\", \"axis\")\n        .attr(\"transform\", \"translate(\" + xZeroPoint + \", \" + yMAX + \")\") // \u51fa\u529b\u8d77\u70b9\n        .call(d3.svg.axis()\n            .scale(xScale) //\u30b9\u30b1\u30fc\u30eb\u3092\u9069\u7528\u3059\u308b\n            .orient(\"bottom\"));\n});\n\n\nD3.js\u3067\u5358\u7d14\u306a\u68d2\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\u3057\u3066\u307f\u308b\u3002\n\n\u4f7f\u7528\u3059\u308bWebAPI\u306f[IT\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9](http://www.itdashboard.go.jp/)\u304b\u3089\u9078\u5b9a\u3002\n\n\u25a0css\n\n```css\n.axis path,\n.axis line {\n   fill: none;\n   stroke: black;\n   shape-rendering: crispEdges;\n}\n\n.axis text {\n   font-family: sans-serif;\n   font-size: 11px;\n}\n\n.d3sample text {\n\tfont-size: 11px;\n\twidth: 100%;\n}\n```\n\ncss\u3067\u306f\u30b0\u30e9\u30d5\u4e0a\u306e\u30c6\u30ad\u30b9\u30c8\u3084\u76ee\u76db\u306e\u7dda\u5e45\u306a\u3069\u3092\u8abf\u6574\u3057\u3066\u3044\u308b\u3002\n\n\u25a0js\n\n```js\nvar WebAPIURL = \"http://www.itdashboard.go.jp/PublicApi/getData.json?dataset=BasicInformation&field=organization&option=count\";\n\nd3.json(WebAPIURL, function(error, data) {\n    var areaId = \"#d3numberofsystem\";\n    // WebAPI\u547c\u51fa\u3057\u6642\u30a8\u30e9\u30fc\n    if (error) {\n        d3.select(areaId).html(error.statusText);\n        return;\n    }\n\n    // \u30b0\u30e9\u30d5\u63cf\u753b\u7528\u5b9a\u6570 \u5358\u4f4d\u306f\u3059\u3079\u3066px\n    var xZeroPoint = 100; // x\u5ea7\u6a19\u306e\u8d77\u70b9\n    var yZeroPoint = 5; // y\u5ea7\u6a19\u306e\u8d77\u70b9\n    var scaleRange = 50; // \u76ee\u76db\u306e\u5e45\n    var axisRange = 20; // \u8ef8\u306e\u5e45\n    var rectRange = 8; // \u68d2\u306e\u5e45\n    var rectSpace = rectRange + 6; // \u4f59\u767d\u8fbc\u307f\u306e\u68d2\u306e\u5e45\n\n    // \u30b0\u30e9\u30d5\u63cf\u753b\u7528\u5909\u6570\n    // \u53d6\u5f97\u30c7\u30fc\u30bf\u304b\u3089\u30b0\u30e9\u30d5\u63cf\u753b\u306e\u5e45\u306b\u5fc5\u8981\u306apx\u3092\u7b97\u51fa\n    var xMAX = xZeroPoint + d3.max(data.raw_data, function(d) {\n        return d.count;\n    });\n    // \u53d6\u5f97\u30c7\u30fc\u30bf\u304b\u3089\u30b0\u30e9\u30d5\u63cf\u753b\u306e\u9ad8\u3055\u306b\u5fc5\u8981\u306apx\u3092\u7b97\u51fa\n    var yMAX = yZeroPoint + data.raw_data.length * rectSpace;\n    // \u76ee\u76db\u6700\u5927\u5024\u3092\u7b97\u51fa\n    var xAxisMAX = (xMAX - xMAX % scaleRange) + scaleRange;\n    \n    // SVG\u306e\u63cf\u753b\u30a8\u30ea\u30a2\u3092\u4f5c\u6210\n    var svg = d3.select(areaId) // \u63cf\u753b\u30a8\u30ea\u30a2\u3092\u6307\u5b9a\n        .append(\"svg\") // svg\u8981\u7d20\u3092\u8ffd\u52a0\n        .attr(\"width\", xMAX + axisRange) // \u63cf\u753b\u30a8\u30ea\u30a2\u306e\u6a2a\u5e45\u3092\u6307\u5b9a\n        .attr(\"height\", yMAX + axisRange); // \u63cf\u753b\u30a8\u30ea\u30a2\u306e\u7e26\u5e45\u3092\u6307\u5b9a\n\n    // \u76ee\u76db\u5e45\u306e\u30b0\u30ea\u30c3\u30c9\u7dda\u3092\u4f5c\u6210\n    var range = d3.range(xAxisMAX, xZeroPoint, -scaleRange);\n    svg.selectAll(\"line.v\")\n        .data(range).enter().append(\"line\")\n        .attr(\"x1\", function(d, i) {\n            return d;\n        }).attr(\"y1\", yZeroPoint)\n        .attr(\"x2\", function(d, i) {\n            return d;\n        }).attr(\"y2\", yMAX);\n    svg.selectAll(\"line\")\n        .attr(\"stroke\", \"#DDDDDD\")\n        .attr(\"shape-rendering\", \"crispEdges\");\n\n    // \u68d2\u30b0\u30e9\u30d5\u306e\u68d2\u306e\u90e8\u5206\u3092\u4f5c\u6210\n    svg.selectAll(\"rect\")\n        .data(data.raw_data) // \u53d6\u5f97\u30c7\u30fc\u30bf\u306e\u8a2d\u5b9a\n        .enter() // \u30c7\u30fc\u30bf\u6570\u5206\u7e70\u308a\u8fd4\u3057\n        .append(\"rect\")\n        .attr(\"x\", xZeroPoint) // x\u5ea7\u6a19\u306f\u8d77\u70b9\u306e\u305f\u3081\u56fa\u5b9a\n        .attr(\"y\", function(row, i) {\n            return i * rectSpace + yZeroPoint;\n        }) // y\u5ea7\u6a19\u306f\u30c7\u30fc\u30bf1\u884c\u3054\u3068\u306b\u8d77\u70b9\u3092\u5909\u66f4\n        .attr(\"width\", function(row) {\n            return row.count;\n        }) // \u6a2a\u5e45\u3092\u6307\u5b9a\n        .attr(\"height\", rectRange) // \u7e26\u5e45\u3092\u6307\u5b9a\n        .attr(\"fill\", \"blue\");\n\n    // \u68d2\u30b0\u30e9\u30d5\u306e\u7e26\u8ef8\u306e\u8868\u793a\u8981\u7d20(\u7d44\u7e54\u540d\u4e00\u89a7)\u3092\u4f5c\u6210\n    svg.selectAll(\"text\")\n        .data(data.raw_data)\n        .enter()\n        .append(\"text\")\n        .attr(\"x\", 10)\n        .attr(\"y\", function(row, i) {\n            return i * rectSpace + (yZeroPoint + rectRange);\n        })\n        .text(function(row) {\n            return row.organization;\n        });\n\n    // \u7e26\u8ef8\u306e\u4f5c\u6210\n    // \u30b9\u30b1\u30fc\u30eb\u8a2d\u5b9a\uff08\u76ee\u76db\u7121\u3057\uff09\n    var yScale = d3.scale.linear()\n        .domain([0, 0])\n        .range([0, yMAX]);\n    // y\u8ef8\u306e\u63cf\u753b\n    svg.append(\"g\")\n        .attr(\"class\", \"axis\")\n        .attr(\"transform\", \"translate(\" + xZeroPoint + \", \" + 0 + \")\") // \u51fa\u529b\u8d77\u70b9\n        .call(d3.svg.axis()\n            .scale(yScale) // \u30b9\u30b1\u30fc\u30eb\u3092\u9069\u7528\u3059\u308b\n            .orient(\"left\")); // \u7dda\u306e\u63cf\u753b\u4f4d\u7f6e\n\n    // \u30b9\u30b1\u30fc\u30eb\u8a2d\u5b9a\uff08\u76ee\u76db\u6709\u308a\uff09\n    var xScale = d3.scale.linear() // \u30b9\u30b1\u30fc\u30eb\u3092\u8a2d\u5b9a\n        .domain([0, xAxisMAX]) // \u8868\u793a\u4e0a\u306e\u30b5\u30a4\u30ba\n        .range([0, xAxisMAX]); // \u5b9f\u969b\u306e\u51fa\u529b\u30b5\u30a4\u30ba\n    // x\u8ef8\u306e\u63cf\u753b\n    svg.append(\"g\")\n        .attr(\"class\", \"axis\")\n        .attr(\"transform\", \"translate(\" + xZeroPoint + \", \" + yMAX + \")\") // \u51fa\u529b\u8d77\u70b9\n        .call(d3.svg.axis()\n            .scale(xScale) //\u30b9\u30b1\u30fc\u30eb\u3092\u9069\u7528\u3059\u308b\n            .orient(\"bottom\"));\n});\n\n```\n"}