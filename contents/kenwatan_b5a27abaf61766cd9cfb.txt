{"context": " More than 1 year has passed since last update.Database \u306f\u524a\u9664\u3057\u305f\u306e\u306b\u3001ASM\u4e0a\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u6b8b\u3063\u3066\u3044\u308b\n\u524a\u9664\u3057\u305f\u3044\u3001\u305d\u3093\u306a\u3068\u304d\u306e\u30b9\u30af\u30ea\u30d7\u30c8\n--\ncolumn a format a120\nset linesize 120\nselect 'alter diskgroup ' || gname || ' drop file ''+' || gname || sys_connect_by_path(aname, '/') || ''';' a\n from ( select b.name gname, a.parent_index pindex, a.name aname,\n a.reference_index rindex , a.system_created, a.alias_directory\n from vasmaliasa,vasmaliasa,vasm_alias a, vasm_diskgroup b\n where a.group_number = b.group_number\n )\n where alias_directory = 'N'\n and system_created = 'Y'\n start with (mod(pindex, power(2, 24))) = 0\n and rindex in\n ( select a.reference_index\n from vasmaliasa,vasmaliasa,vasm_alias a, vasm_diskgroup b\n where a.group_number = b.group_number\n and (mod(a.parent_index, power(2, 24))) = 0\n and a.name = '&DATABASENAME'\n )\n\n connect by prior rindex = pindex;\n\u5b9f\u884c\u3059\u308b\u3068 \u30d7\u30ed\u30f3\u30d7\u30c8\u304c \u3042\u3089\u308f\u308c\u308b\u306e\u3067 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\u3092\u5165\u529b\nEnter value for databasename: ORCL\nold 15: and a.name = '&DATABASENAME'\nnew 15: and a.name = 'ORCL'\n\u3042\u3068\u306f ASM\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067 \u51fa\u529b\u3055\u308c\u305f alter\u6587\u3092\u5b9f\u884c\u3059\u308b\nalter diskgroup DATA drop file '+DATA/ORCL/ARCHIVELOG/2016_01_08/thread_1_seq_81.272.707781651';\nDatabase \u306f\u524a\u9664\u3057\u305f\u306e\u306b\u3001ASM\u4e0a\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u6b8b\u3063\u3066\u3044\u308b\n\u524a\u9664\u3057\u305f\u3044\u3001\u305d\u3093\u306a\u3068\u304d\u306e\u30b9\u30af\u30ea\u30d7\u30c8\n\n--\ncolumn a format a120\nset linesize 120\n\nselect 'alter diskgroup ' || gname || ' drop file ''+' || gname || sys_connect_by_path(aname, '/') || ''';' a\n from ( select b.name gname, a.parent_index pindex, a.name aname,\n a.reference_index rindex , a.system_created, a.alias_directory\n from v$asm_alias a, v$asm_diskgroup b\n where a.group_number = b.group_number\n )\n where alias_directory = 'N'\n and system_created = 'Y'\n start with (mod(pindex, power(2, 24))) = 0\n and rindex in\n ( select a.reference_index\n from v$asm_alias a, v$asm_diskgroup b\n where a.group_number = b.group_number\n and (mod(a.parent_index, power(2, 24))) = 0\n and a.name = '&DATABASENAME'\n )\n connect by prior rindex = pindex;\n--\n\n\u5b9f\u884c\u3059\u308b\u3068 \u30d7\u30ed\u30f3\u30d7\u30c8\u304c \u3042\u3089\u308f\u308c\u308b\u306e\u3067 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\u3092\u5165\u529b\n\nEnter value for databasename: ORCL\nold 15: and a.name = '&DATABASENAME'\nnew 15: and a.name = 'ORCL'\n\n\n\u3042\u3068\u306f ASM\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067 \u51fa\u529b\u3055\u308c\u305f alter\u6587\u3092\u5b9f\u884c\u3059\u308b\n\nalter diskgroup DATA drop file '+DATA/ORCL/ARCHIVELOG/2016_01_08/thread_1_seq_81.272.707781651';\n\n\n", "tags": ["oracle", "asm"]}