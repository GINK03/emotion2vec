{"tags": ["Linux", "iptables", "\u3055\u304f\u3089VPS"], "context": " More than 1 year has passed since last update.\n\n\u88f8\u306eLinux\u306f\u3084\u3070\u3044\u306e\u3067iptables\u3067\u9632\u5fa1\u3059\u308b\u30e1\u30e2\u3002\n\u3053\u3053\u3092\u53c2\u8003\u306b\u3057\u305f\n#\u30b5\u30fc\u30d0\u3078\u306e\u653b\u6483\u5bfe\u7b56\nsudo iptables -A INPUT -p tcp --tcp-flags ALL NONE -j DROP\nsudo iptables -A INPUT -p tcp ! --syn -m state --state NEW -j DROP\nsudo iptables -A INPUT -p tcp --tcp-flags ALL ALL -j DROP\n\n#\u901a\u4fe1\u5185\u5bb9\u306e\u5236\u9650\nsudo iptables -A INPUT -i lo -j ACCEPT\nsudo iptables -A INPUT -p icmp -j ACCEPT\n\n#\u78ba\u7acb\u6e08\u307f\u306e\u901a\u4fe1\u3092\u8a31\u53ef\nsudo iptables -I INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n\n#http\u306e\u30dd\u30fc\u30c8\u3092\u6307\u5b9a(80)\nsudo iptables -A INPUT -p tcp -m tcp --dport 80 -j ACCEPT\n#https\u306e\u30dd\u30fc\u30c8\u3092\u6307\u5b9a(443)\nsudo iptables -A INPUT -p tcp -m tcp --dport 443 -j ACCEPT\n#ssh\u306e\u30dd\u30fc\u30c8\u3092\u6307\u5b9a(default:22)\nsudo iptables -A INPUT -p tcp -m tcp --dport 64188 -j ACCEPT\n\n#\u30d1\u30b1\u30c3\u30c8\u306e\u8a2d\u5b9a\nsudo iptables -P INPUT DROP\nsudo iptables -P OUTPUT ACCEPT\n\n#\u8a2d\u5b9a\u3092\u4fdd\u5b58\nsudo service iptables save\n#\u518d\u8d77\u52d5\nsudo service iptables restart\n\n\n# \u88f8\u306eLinux\u306f\u3084\u3070\u3044\u306e\u3067iptables\u3067\u9632\u5fa1\u3059\u308b\u30e1\u30e2\u3002\n\n[\u3053\u3053\u3092\u53c2\u8003\u306b\u3057\u305f](http://blog.nzakr.com/vps-setting/)\n\n```shell-session\n#\u30b5\u30fc\u30d0\u3078\u306e\u653b\u6483\u5bfe\u7b56\nsudo iptables -A INPUT -p tcp --tcp-flags ALL NONE -j DROP\nsudo iptables -A INPUT -p tcp ! --syn -m state --state NEW -j DROP\nsudo iptables -A INPUT -p tcp --tcp-flags ALL ALL -j DROP\n\n#\u901a\u4fe1\u5185\u5bb9\u306e\u5236\u9650\nsudo iptables -A INPUT -i lo -j ACCEPT\nsudo iptables -A INPUT -p icmp -j ACCEPT\n\n#\u78ba\u7acb\u6e08\u307f\u306e\u901a\u4fe1\u3092\u8a31\u53ef\nsudo iptables -I INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n\n#http\u306e\u30dd\u30fc\u30c8\u3092\u6307\u5b9a(80)\nsudo iptables -A INPUT -p tcp -m tcp --dport 80 -j ACCEPT\n#https\u306e\u30dd\u30fc\u30c8\u3092\u6307\u5b9a(443)\nsudo iptables -A INPUT -p tcp -m tcp --dport 443 -j ACCEPT\n#ssh\u306e\u30dd\u30fc\u30c8\u3092\u6307\u5b9a(default:22)\nsudo iptables -A INPUT -p tcp -m tcp --dport 64188 -j ACCEPT\n\n#\u30d1\u30b1\u30c3\u30c8\u306e\u8a2d\u5b9a\nsudo iptables -P INPUT DROP\nsudo iptables -P OUTPUT ACCEPT\n\n#\u8a2d\u5b9a\u3092\u4fdd\u5b58\nsudo service iptables save\n#\u518d\u8d77\u52d5\nsudo service iptables restart\n```\n"}