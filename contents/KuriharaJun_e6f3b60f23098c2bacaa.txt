{"context": "Mastering Xamarin.Forms1\u3092\u898b\u306a\u304c\u3089\u3001Xamarin.Forms\u3067GPS\u3092\u4f7f\u7528\u3057\u3066\u3001\u7def\u5ea6\u30fb\u7d4c\u5ea6\u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u3092\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\u52d5\u4f5c\u78ba\u8a8d\u74b0\u5883\n\nMac OS X\nXamarin Studio 6.0\n\n\nPCL\u306e\u5b9f\u88c5\n\n\u4f4d\u7f6e\u60c5\u5831\uff08\u7def\u5ea6\u30fb\u7d4c\u5ea6\uff09\u3092\u683c\u7d0d\u3059\u308b\u30af\u30e9\u30b9\u306e\u5b9f\u88c5\n\nGeoCoords.cs\n/// <summary>\n/// \u4f4d\u7f6e\u60c5\u5831\u683c\u7d0d\u30af\u30e9\u30b9\n/// </summary>\npublic class GeoCoords\n{\n    /// <summary>\n    /// \u7def\u5ea6\n    /// </summary>\n    public double Latitude { get; set; }\n    /// <summary>\n    /// \u7d4c\u5ea6\n    /// </summary>\n    public double Longitude { get; set; }\n}\n\n\n\n\u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u51e6\u7406\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u8ffd\u52a0\nXamarin\u306eIoC\u6a5f\u80fd\u3092\u4f7f\u7528\u3057\u3066\n\nILocationService.cs\n/// <summary>\n/// \u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u30b5\u30fc\u30d3\u30b9\n/// </summary>\npublic interface ILocationService\n{\n    /// <summary>\n    /// \u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u51e6\u7406\n    /// </summary>\n    Task<GeoCoords> GetGeoCoordinatesAsync();\n}\n\n\nAndroid\n\nLocationService.cs\n/// <summary>\n/// \u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u30b5\u30fc\u30d3\u30b9\u306eAndroid\u5b9f\u88c5\n/// </summary>\npublic class LocationService : ILocationService\n{\n    public async Task<GeoCoords> GetGeoCoordinatesAsync()\n    {\n        var locator = new Geolocator(Forms.Context)\n        {\n            // \u89e3\u50cf\u5ea6\u30921.3m\u306b\u8a2d\u5b9a\n            DesiredAccuracy = 30\n        };\n\n        var position = await locator.GetPositionAsync(30000);\n\n        var result = new GeoCoords\n        {\n            Latitude = position.Latitude,\n            Longitude = position.Longitude\n        };\n\n        return result;\n    }\n}\n\n\niOS\n\nLocationService.cs\npublic class LocationService : ILocationService\n{\n    public async Task<GeoCoords> GetGeoCoordinatesAsync()\n    {\n        var locator = new Geolocator\n        {\n            DesiredAccuracy = 30\n        };\n\n        var position = await locator.GetPositionAsync(30000);\n\n        var result = new GeoCoords\n        {\n            Latitude = position.Latitude,\n            Longitude = position.Longitude\n        };\n\n        return result;\n    }\n}\n\n\n\n\n\n\nMastering Xamarin.Forms(Ed Snider 2016/1/30) ISBN:978-1-78528-719-0 \u00a0\u21a9\n\n\n\nMastering Xamarin.Forms[^1]\u3092\u898b\u306a\u304c\u3089\u3001Xamarin.Forms\u3067GPS\u3092\u4f7f\u7528\u3057\u3066\u3001\u7def\u5ea6\u30fb\u7d4c\u5ea6\u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u3092\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u52d5\u4f5c\u78ba\u8a8d\u74b0\u5883\n\n- Mac OS X\n\n- Xamarin Studio 6.0\n\n##PCL\u306e\u5b9f\u88c5\n\n###\u4f4d\u7f6e\u60c5\u5831\uff08\u7def\u5ea6\u30fb\u7d4c\u5ea6\uff09\u3092\u683c\u7d0d\u3059\u308b\u30af\u30e9\u30b9\u306e\u5b9f\u88c5\n\n```csharp:GeoCoords.cs\n/// <summary>\n/// \u4f4d\u7f6e\u60c5\u5831\u683c\u7d0d\u30af\u30e9\u30b9\n/// </summary>\npublic class GeoCoords\n{\n    /// <summary>\n    /// \u7def\u5ea6\n    /// </summary>\n    public double Latitude { get; set; }\n    /// <summary>\n    /// \u7d4c\u5ea6\n    /// </summary>\n    public double Longitude { get; set; }\n}\n```\n\n###\u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u51e6\u7406\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u8ffd\u52a0\nXamarin\u306eIoC\u6a5f\u80fd\u3092\u4f7f\u7528\u3057\u3066\n\n```csharp:ILocationService.cs\n/// <summary>\n/// \u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u30b5\u30fc\u30d3\u30b9\n/// </summary>\npublic interface ILocationService\n{\n    /// <summary>\n    /// \u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u51e6\u7406\n    /// </summary>\n    Task<GeoCoords> GetGeoCoordinatesAsync();\n}\n```\n\nAndroid\n\n```csharp:LocationService.cs\n/// <summary>\n/// \u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u30b5\u30fc\u30d3\u30b9\u306eAndroid\u5b9f\u88c5\n/// </summary>\npublic class LocationService : ILocationService\n{\n    public async Task<GeoCoords> GetGeoCoordinatesAsync()\n    {\n        var locator = new Geolocator(Forms.Context)\n        {\n            // \u89e3\u50cf\u5ea6\u30921.3m\u306b\u8a2d\u5b9a\n            DesiredAccuracy = 30\n        };\n\n        var position = await locator.GetPositionAsync(30000);\n\n        var result = new GeoCoords\n        {\n            Latitude = position.Latitude,\n            Longitude = position.Longitude\n        };\n\n        return result;\n    }\n}\n```\n\niOS\n\n```csharp:LocationService.cs\npublic class LocationService : ILocationService\n{\n\tpublic async Task<GeoCoords> GetGeoCoordinatesAsync()\n\t{\n\t\tvar locator = new Geolocator\n\t\t{\n\t\t\tDesiredAccuracy = 30\n\t\t};\n\n\t\tvar position = await locator.GetPositionAsync(30000);\n\n\t\tvar result = new GeoCoords\n\t\t{\n\t\t\tLatitude = position.Latitude,\n\t\t\tLongitude = position.Longitude\n\t\t};\n\n\t\treturn result;\n\t}\n}\n```\n\n[^1]: Mastering Xamarin.Forms(Ed Snider 2016/1/30) ISBN:978-1-78528-719-0 \n", "tags": ["Xamarin", "Xamarin.Forms", "C#"]}