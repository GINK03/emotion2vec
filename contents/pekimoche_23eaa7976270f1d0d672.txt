{"context": " More than 1 year has passed since last update.MySQL5.6\u304b\u3089\u3001SQL_MODE\u304cSTRICT\u30c7\u30d5\u30a9\u30eb\u30c8\u5316\u3057\u3066\u305f\u306e\u3067\u3001\u30af\u30a8\u30ea\u6319\u52d5\u306e\u5dee\u7570\u306b\u3064\u3044\u3066\u307e\u3068\u3081\u305f\u3002\n\nSQL_MODE\u306b\u3088\u308b\u6319\u52d5\u5909\u5316\nsql_mode=\"\"\u306e\u72b6\u614b\u3060\u3068\u3001\u4e0d\u9069\u5207\u306a\u30c7\u30fc\u30bf\u5024\u304c\u8a31\u53ef\u3055\u308c\u3066\u304a\u308a\u3001\u30c7\u30fc\u30bf\u5165\u529b\u306e\u969b\u306b\u305d\u308c\u3089\u3092\u6709\u52b9\u5024\u306b\u5f37\u5236\u5909\u63db\u3059\u308b\u4ed5\u69d8\u304c\u3042\u308b\u3002\nMySQL5.5\u307e\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u304csql_mode=\"\"\u3060\u3063\u305f\u304c\u3001MySQL5.6\u304b\u3089\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u52dd\u624b\u306bSTRICT_MODE\u304c\u8a2d\u5b9a\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\nmy.ini\nsql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES\n\n\n\nMySQL5.5\u307e\u3067STRICT\u30e2\u30fc\u30c9\u306b\u3057\u306a\u304b\u3063\u305f\u3093\u3060\u3051\u3069\uff1f\nsql_mode=\"\"\u3067\u904b\u7528\u3057\u3066\u304d\u305f\u30b7\u30b9\u30c6\u30e0\u3092\u3001sql_mode=\"STRICT_TRANS_TABLES\"\u306b\u3059\u308b\u3068\u4ee5\u4e0b\u306b\u8ff0\u3079\u308b\u3088\u3046\u306a\u30af\u30a8\u30ea\u306f\u5168\u90e8\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\n\u6b8b\u5ff5\u306a\u304c\u3089ALLOW_INVALID_DATES(\u65e5\u4ed8\u306e\u5b8c\u5168\u30c1\u30a7\u30c3\u30af\u3092\u884c\u308f\u306a\u3044)\u306ftimestamp\u306b\u306f\u610f\u5473\u3092\u6210\u3055\u306a\u3044\u3002\nSQL_MODE\u306e\u78ba\u8a8d\u65b9\u6cd5\u306f\u3001select @@global.sql_mode;\u3000\u3067\u51fa\u6765\u308b\u3002\n\u5bfe\u7b56\u3068\u3057\u3066\u306f\u3001my.ini\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3059\u308b\u3057\u304b\u306a\u3044\u3002\n#sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES\nsql-mode=''\n\n\u30aa\u30f3\u30e9\u30a4\u30f3\u3067\u5909\u66f4\u3082\u3067\u304d\u308b\u3002\nset sql_mode = \"\";\n\n\n\uff11\u3001timstamp\u30ab\u30e9\u30e0\u3067\u3001\u7bc4\u56f2\u5916\u306e\u6642\u9593\u3092\u6307\u5b9a\u3059\u308b\n\u691c\u8a3c\u30c6\u30fc\u30d6\u30eb\nCREATE TABLE peki_test_timestamp (\n  timestamp timestamp NOT NULL,\n  datetime datetime NOT NULL\n) ENGINE=InnoDB;\n\n\u5b9f\u884c\u30af\u30a8\u30ea\n> insert into peki_test_timestamp (timestamp, datetime) values ('1013-01-01 00:00:00', '2013-01-01 00:00:00');\n> insert into peki_test_timestamp (timestamp, datetime) values ('2013-01-01 00:00:00', '1013-01-01 00:00:00');\n\n\nNOT_STRICT\nQuery OK, 1 row affected, 1 warning (0.00 sec)\nWarning (Code 1264): Out of range value adjusted for column 'timestamp' at row 1\n\nQuery OK, 1 row affected (0.01 sec)\n\n+---------------------+---------------------+\n| timestamp           | datetime            |\n+---------------------+---------------------+\n| 0000-00-00 00:00:00 | 2013-01-01 00:00:00 |\n| 2013-01-01 00:00:00 | 1013-01-01 00:00:00 |\n+---------------------+---------------------+\n\n\n\nSTRICT;\nERROR 1292 (22007): Incorrect datetime value: '1013-01-01 00:00:00' for column 'timestamp' at row 1\nQuery OK, 1 row affected (0.01 sec)\n\n+---------------------+---------------------+\n| timestamp           | datetime            |\n+---------------------+---------------------+\n| 2013-01-01 00:00:00 | 1013-01-01 00:00:00 |\n+---------------------+---------------------+\n\n\ntimestamp\u306f\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\u3000datetime\u306f\u5909\u308f\u3089\u306a\u3044\u3002\n\n\uff12\u3001NOT NULL\u88dc\u5b8c\n\u691c\u8a3c\u30c6\u30fc\u30d6\u30eb\ncreate table peki_not_nulls (\n    `id` int(11) not null,\n    `id2` int(11) default null\n) ENGINE=InnoDB;\n\n\u5b9f\u884c\u30af\u30a8\u30ea\ninsert into peki_not_nulls (id2) values(100);\n\n\nNOT_STRICT\nQuery OK, 1 row affected, 1 warning (0.00 sec)\nWarning (Code 1364): Field 'id' doesn't have a default value\n\n+----+------+\n| id | id2  |\n+----+------+\n|  0 |  100 |\n+----+------+\n\n\n\uff10\u3067\u88dc\u5b8c\u3055\u308c\u308b\u3002\n\nSTRICT;\nERROR 1364 (HY000): Field 'id' doesn't have a default value\n\n\n\n\uff13\u3001varchar \u306e\u6587\u5b57\u5217\u6ea2\u308c\n\u691c\u8a3c\u30c6\u30fc\u30d6\u30eb\ncreate table peki_varchar (text varchar(10));\n\n\u5b9f\u884c\u30af\u30a8\u30ea\ninsert peki_varchar (text) values('aaabbccddeeffgghhiijj');\n\n\nNOT_STRICT\nQuery OK, 1 row affected, 1 warning (0.00 sec)\nWarning (Code 1265): Data truncated for column 'text' at row 1\n\n+------------+\n| text       |\n+------------+\n| aaabbccdde |\n+------------+\n\n\n\nSTRICT;\nset sql_mode = 'STRICT_ALL_TABLES';\nERROR 1406 (22001): Data too long for column 'text' at row 1\n\n\nMySQL5.6\u304b\u3089\u3001SQL_MODE\u304cSTRICT\u30c7\u30d5\u30a9\u30eb\u30c8\u5316\u3057\u3066\u305f\u306e\u3067\u3001\u30af\u30a8\u30ea\u6319\u52d5\u306e\u5dee\u7570\u306b\u3064\u3044\u3066\u307e\u3068\u3081\u305f\u3002\n\n# SQL_MODE\u306b\u3088\u308b\u6319\u52d5\u5909\u5316\nsql_mode=\"\"\u306e\u72b6\u614b\u3060\u3068\u3001\u4e0d\u9069\u5207\u306a\u30c7\u30fc\u30bf\u5024\u304c\u8a31\u53ef\u3055\u308c\u3066\u304a\u308a\u3001\u30c7\u30fc\u30bf\u5165\u529b\u306e\u969b\u306b\u305d\u308c\u3089\u3092\u6709\u52b9\u5024\u306b\u5f37\u5236\u5909\u63db\u3059\u308b\u4ed5\u69d8\u304c\u3042\u308b\u3002\nMySQL5.5\u307e\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u304csql_mode=\"\"\u3060\u3063\u305f\u304c\u3001MySQL5.6\u304b\u3089\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u52dd\u624b\u306bSTRICT_MODE\u304c\u8a2d\u5b9a\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\n```ini:my.ini\nsql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES\n```\n\n# MySQL5.5\u307e\u3067STRICT\u30e2\u30fc\u30c9\u306b\u3057\u306a\u304b\u3063\u305f\u3093\u3060\u3051\u3069\uff1f\n`sql_mode=\"\"`\u3067\u904b\u7528\u3057\u3066\u304d\u305f\u30b7\u30b9\u30c6\u30e0\u3092\u3001`sql_mode=\"STRICT_TRANS_TABLES\"`\u306b\u3059\u308b\u3068\u4ee5\u4e0b\u306b\u8ff0\u3079\u308b\u3088\u3046\u306a\u30af\u30a8\u30ea\u306f\u5168\u90e8\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\n\u6b8b\u5ff5\u306a\u304c\u3089ALLOW_INVALID_DATES(\u65e5\u4ed8\u306e\u5b8c\u5168\u30c1\u30a7\u30c3\u30af\u3092\u884c\u308f\u306a\u3044)\u306ftimestamp\u306b\u306f\u610f\u5473\u3092\u6210\u3055\u306a\u3044\u3002\n \nSQL_MODE\u306e\u78ba\u8a8d\u65b9\u6cd5\u306f\u3001`select @@global.sql_mode;`\u3000\u3067\u51fa\u6765\u308b\u3002\n\n\u5bfe\u7b56\u3068\u3057\u3066\u306f\u3001my.ini\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3059\u308b\u3057\u304b\u306a\u3044\u3002\n\n```\n#sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES\nsql-mode=''\n```\n\n\u30aa\u30f3\u30e9\u30a4\u30f3\u3067\u5909\u66f4\u3082\u3067\u304d\u308b\u3002\n\n```mysql\nset sql_mode = \"\";\n```\n\n## \uff11\u3001timstamp\u30ab\u30e9\u30e0\u3067\u3001\u7bc4\u56f2\u5916\u306e\u6642\u9593\u3092\u6307\u5b9a\u3059\u308b\n\n\u691c\u8a3c\u30c6\u30fc\u30d6\u30eb\n\n```mysql\nCREATE TABLE peki_test_timestamp (\n  timestamp timestamp NOT NULL,\n  datetime datetime NOT NULL\n) ENGINE=InnoDB;\n```\n\n\u5b9f\u884c\u30af\u30a8\u30ea\n\n```\n> insert into peki_test_timestamp (timestamp, datetime) values ('1013-01-01 00:00:00', '2013-01-01 00:00:00');\n> insert into peki_test_timestamp (timestamp, datetime) values ('2013-01-01 00:00:00', '1013-01-01 00:00:00');\n```\n\n```mysql:NOT_STRICT\nQuery OK, 1 row affected, 1 warning (0.00 sec)\nWarning (Code 1264): Out of range value adjusted for column 'timestamp' at row 1\n  \nQuery OK, 1 row affected (0.01 sec)\n \n+---------------------+---------------------+\n| timestamp           | datetime            |\n+---------------------+---------------------+\n| 0000-00-00 00:00:00 | 2013-01-01 00:00:00 |\n| 2013-01-01 00:00:00 | 1013-01-01 00:00:00 |\n+---------------------+---------------------+\n```\n\n```mysql:STRICT;\nERROR 1292 (22007): Incorrect datetime value: '1013-01-01 00:00:00' for column 'timestamp' at row 1\nQuery OK, 1 row affected (0.01 sec)\n \n+---------------------+---------------------+\n| timestamp           | datetime            |\n+---------------------+---------------------+\n| 2013-01-01 00:00:00 | 1013-01-01 00:00:00 |\n+---------------------+---------------------+\n```\n\ntimestamp\u306f\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\u3000datetime\u306f\u5909\u308f\u3089\u306a\u3044\u3002\n\n## \uff12\u3001NOT NULL\u88dc\u5b8c\n\n\u691c\u8a3c\u30c6\u30fc\u30d6\u30eb\n\n```mysql\ncreate table peki_not_nulls (\n    `id` int(11) not null,\n    `id2` int(11) default null\n) ENGINE=InnoDB;\n```\n\n\u5b9f\u884c\u30af\u30a8\u30ea\n\n```mysql\ninsert into peki_not_nulls (id2) values(100);\n```\n\n```mysql:NOT_STRICT\nQuery OK, 1 row affected, 1 warning (0.00 sec)\nWarning (Code 1364): Field 'id' doesn't have a default value\n \n+----+------+\n| id | id2  |\n+----+------+\n|  0 |  100 |\n+----+------+\n```\n\uff10\u3067\u88dc\u5b8c\u3055\u308c\u308b\u3002\n \n```mysql:STRICT;\nERROR 1364 (HY000): Field 'id' doesn't have a default value\n```\n\n## \uff13\u3001varchar \u306e\u6587\u5b57\u5217\u6ea2\u308c\n \n\u691c\u8a3c\u30c6\u30fc\u30d6\u30eb\n\n```\ncreate table peki_varchar (text varchar(10));\n```\n\n\u5b9f\u884c\u30af\u30a8\u30ea\n\n```\ninsert peki_varchar (text) values('aaabbccddeeffgghhiijj');\n```\n\n```mysql:NOT_STRICT\nQuery OK, 1 row affected, 1 warning (0.00 sec)\nWarning (Code 1265): Data truncated for column 'text' at row 1\n \n+------------+\n| text       |\n+------------+\n| aaabbccdde |\n+------------+\n```\n\n```mysql:STRICT;\nset sql_mode = 'STRICT_ALL_TABLES';\nERROR 1406 (22001): Data too long for column 'text' at row 1\n```\n\n", "tags": ["MySQL", "mysql5.6", "SQL_MODE", "SQL"]}