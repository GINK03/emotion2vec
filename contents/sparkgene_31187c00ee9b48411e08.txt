{"tags": ["AWS", "aws-sdk"], "context": " More than 1 year has passed since last update.CloudWatch Logs\u4f7f\u3063\u3066\u307e\u3059\u304b\uff1f\nfilter + \u30ab\u30b9\u30bf\u30e0\u30e1\u30c8\u30ea\u30c3\u30af\u30b9\u3067\u7c21\u5358\u306a\u76e3\u8996\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u3057\u3001\u8272\u3005\u3068\u4fbf\u5229\u3067\u3059\u3088\u306d\u3002\n\u30a2\u30d7\u30ea\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u6642\u3082\u3001\u30ab\u30b9\u30bf\u30e0\u30e1\u30c8\u30ea\u30c3\u30af\u30b9\u306e\u30a2\u30e9\u30fc\u30c8\u3092\u4f7f\u3048\u3070\u3001\u901a\u77e5\u3082\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u7c21\u5358\u306a\u76e3\u8996\u306e\u30b7\u30b9\u30c6\u30e0\u306f\u3053\u308c\u3067\u306a\u3093\u3068\u304b\u306a\u308b\u611f\u3058\u3067\u3059\u3002\n\u3057\u304b\u3057\u3001\u30a2\u30e9\u30fc\u30c8\u3092\u691c\u77e5\u3057\u3066\u3082\u305d\u306e\u30ed\u30b0\u3092\u4e00\u7dd2\u306b\u901a\u77e5\u3057\u3066\u304f\u308c\u308c\u3070\u4fbf\u5229\u306a\u3093\u3067\u3059\u304c\uff08Amazon\u3055\u3093\u304a\u9858\u3044\u3057\u307e\u3059\uff01\uff01\uff09\u3001\u539f\u56e0\u3092\u8abf\u3079\u308b\u305f\u3081\u306bSSH\u3067\u30b5\u30fc\u30d0\u306b\u5165\u3063\u3066\u30ed\u30b0\u3092\u78ba\u8a8d\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u3051\u3069\u3001\u305d\u306e\u90fd\u5ea6\u30b5\u30fc\u30d0\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u8abf\u3079\u308b\u306e\u3082\u3001\u958b\u767a\u8005\u306b\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u767a\u884c\u3057\u3066\u3068\u8a00\u3063\u305f\u8a2d\u5b9a\u3082\u51fa\u3066\u304f\u308b\u3057\u3001\u9593\u9055\u3048\u3066\u5909\u306a\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3055\u308c\u305f\u3089\u5927\u5909\u306a\u4e8b\u306b\u306a\u308a\u307e\u3059\u3002\n\u305d\u3053\u3067\u3001\u3082\u3063\u3068\u6c17\u8efd\u306b\u30ed\u30b0\u3092\u898b\u308c\u308b\u65b9\u6cd5\u304c\u306a\u3044\u304b\u8003\u3048\u3066\u307f\u305f\u3068\u3053\u308d\u3001CloudWatch Logs\u306b\u9001\u308a\u8fbc\u3093\u3067\u308b\u30ed\u30b0\u3092\u898b\u308c\u308b\u3088\u3046\u306b\u3059\u308c\u3070\u3001\u308f\u3056\u308f\u3056\u30b5\u30fc\u30d0\u306bSSH\u3057\u306a\u304f\u3066\u3082\u3067\u304d\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\u305d\u3093\u306a\u8a33\u3067\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u305f\u3002\nhttps://github.com/sparkgene/cloudwatch_logs_tail\n\n\u4f7f\u3044\u65b9\n\u30aa\u30d7\u30b7\u30e7\u30f3\u4e00\u89a7\n% ruby tail_cwlog.rb --help\n\nUsage: tail_cwlog [options]\n        --use-iamrole                USE IAM ROLE\n        --aws-region=[VALUE]         AWS REGION\n        --aws-access-key=[VALUE]     AWS ACCESS KEY\n        --aws-secret-key=[VALUE]     AWS SECRET KEY\n        --discribe-groups            Describe log groups\n        --discribe-streams           Describe log streams\n        --tailf                      tail -f log stream\n        --tail=[VALUE]               tail log stream\n        --log-group=[VALUE]          log group name\n        --log-stream=[VALUE]         log stream name\n\nCloudWatch Logs\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308bLog Group\u306e\u4e00\u89a7\u8868\u793a\n% ruby tail_cwlog.rb --aws-region=ap-northeast-1 --discribe-groups\n\n/var/log/cron\n/var/log/maillog\n/var/log/messages\n/var/log/secure\n\nLog Group\u306b\u542b\u307e\u308c\u3066\u3044\u308bLog Stream\u306e\u4e00\u89a7\u53d6\u5f97\n% ruby tail_cwlog.rb --aws-region=ap-northeast-1 --discribe-streams --log-group=/var/log/cron\n\nserver-apps-1\nserver-apps-2\nserver-apps-3\n\ntail -100 \u307f\u305f\u3044\u306b\u904e\u53bb\u306e\u30ed\u30b0\u3092\u8868\u793a\u3057\u305f\u3044\u5834\u5408\n% ruby tail_cwlog.rb --aws-region=ap-northeast-1 --discribe-streams --log-group=/var/log/cron --log-stream=server-apps-3 --tail=100\n\nFeb 21 01:22:01 server-apps-3 CROND[2837]: (root) CMD (/var/awslogs/bin/awslogs-nanny.sh > /dev/null 2>&1)\nFeb 21 01:23:01 server-apps-3 CROND[2863]: (root) CMD (/var/awslogs/bin/awslogs-nanny.sh > /dev/null 2>&1)\nFeb 21 01:24:01 server-apps-3 CROND[2890]: (root) CMD (/var/awslogs/bin/awslogs-nanny.sh > /dev/null 2>&1)\n\ntail -f\u307f\u305f\u3044\u306b\u30ed\u30b0\u3092\u76e3\u8996\u3057\u305f\u3044\u5834\u5408\n% ruby tail_cwlog.rb --aws-region=ap-northeast-1 --discribe-streams --log-group=/var/log/cron --log-stream=server-apps-3 --tailf\n\nFeb 21 01:22:01 server-apps-3 CROND[2837]: (root) CMD (/var/awslogs/bin/awslogs-nanny.sh > /dev/null 2>&1)\nFeb 21 01:23:01 server-apps-3 CROND[2863]: (root) CMD (/var/awslogs/bin/awslogs-nanny.sh > /dev/null 2>&1)\nFeb 21 01:24:01 server-apps-3 CROND[2890]: (root) CMD (/var/awslogs/bin/awslogs-nanny.sh > /dev/null 2>&1)\n\n--tailf \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u6700\u5f8c\u306e20\u884c\u3092\u8868\u793a\u3057\u3066\u3001\u30ed\u30b0\u306e\u76e3\u8996\u3092\u884c\u3044\u307e\u3059\u3002\n5\u79d2\u306b1\u56de\u30ed\u30b0\u3092\u898b\u306b\u884c\u304d\u307e\u3059\u306e\u3067\u3001\u30b5\u30fc\u30d0\u304b\u3089CloudWatch Logs\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u3001\u624b\u5143\u306b\u5c4a\u304f\u307e\u3067\u30bf\u30a4\u30e0\u30e9\u30b0\u304c\u3042\u308a\u307e\u3059\u3002\n\u3088\u308a\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u76e3\u8996\u3057\u305f\u3044\u5834\u5408\u306f\u3001 \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4e2d\u306esleep(5)\u3068\u306a\u3063\u3066\u3044\u308b\u90e8\u5206\u3001\u8abf\u6574\u3057\u3066\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u6ce8\u610f\nCloudWatch Logs\u306b\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u5834\u5408\u306f\u3001AWS\u306e\u8ee2\u9001\u6599\u53ca\u3073API\u5229\u7528\u6599\u304c\u304b\u304b\u308a\u307e\u3059\u3002\nhttp://aws.amazon.com/cloudwatch/pricing/\n\nAmazon CloudWatch API Requests\n$0.01 per 1,000 GetMetricStatistics, ListMetrics, or PutMetricData requests\nAmazon CloudWatch Logs*\n$0.50 per GB ingested**\n$0.03 per GB archived per month***\nData Transfer OUT from CloudWatch Logs is priced equivalent to the \u201cData Transfer OUT from Amazon EC2 To\u201d and \u201cData Transfer OUT from Amazon EC2 to Internet\u201d tables on the EC2 Pricing Page(http://aws.amazon.com/ec2/pricing/).\n\n\u3054\u5229\u7528\u306f\u8a08\u753b\u7684\u306b\u3002\nCloudWatch Logs\u4f7f\u3063\u3066\u307e\u3059\u304b\uff1f\n\nfilter + \u30ab\u30b9\u30bf\u30e0\u30e1\u30c8\u30ea\u30c3\u30af\u30b9\u3067\u7c21\u5358\u306a\u76e3\u8996\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u3057\u3001\u8272\u3005\u3068\u4fbf\u5229\u3067\u3059\u3088\u306d\u3002\n\n\u30a2\u30d7\u30ea\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u6642\u3082\u3001\u30ab\u30b9\u30bf\u30e0\u30e1\u30c8\u30ea\u30c3\u30af\u30b9\u306e\u30a2\u30e9\u30fc\u30c8\u3092\u4f7f\u3048\u3070\u3001\u901a\u77e5\u3082\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u7c21\u5358\u306a\u76e3\u8996\u306e\u30b7\u30b9\u30c6\u30e0\u306f\u3053\u308c\u3067\u306a\u3093\u3068\u304b\u306a\u308b\u611f\u3058\u3067\u3059\u3002\n\n\u3057\u304b\u3057\u3001\u30a2\u30e9\u30fc\u30c8\u3092\u691c\u77e5\u3057\u3066\u3082\u305d\u306e\u30ed\u30b0\u3092\u4e00\u7dd2\u306b\u901a\u77e5\u3057\u3066\u304f\u308c\u308c\u3070\u4fbf\u5229\u306a\u3093\u3067\u3059\u304c\uff08Amazon\u3055\u3093\u304a\u9858\u3044\u3057\u307e\u3059\uff01\uff01\uff09\u3001\u539f\u56e0\u3092\u8abf\u3079\u308b\u305f\u3081\u306bSSH\u3067\u30b5\u30fc\u30d0\u306b\u5165\u3063\u3066\u30ed\u30b0\u3092\u78ba\u8a8d\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3051\u3069\u3001\u305d\u306e\u90fd\u5ea6\u30b5\u30fc\u30d0\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u8abf\u3079\u308b\u306e\u3082\u3001\u958b\u767a\u8005\u306b\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u767a\u884c\u3057\u3066\u3068\u8a00\u3063\u305f\u8a2d\u5b9a\u3082\u51fa\u3066\u304f\u308b\u3057\u3001\u9593\u9055\u3048\u3066\u5909\u306a\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3055\u308c\u305f\u3089\u5927\u5909\u306a\u4e8b\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u305d\u3053\u3067\u3001\u3082\u3063\u3068\u6c17\u8efd\u306b\u30ed\u30b0\u3092\u898b\u308c\u308b\u65b9\u6cd5\u304c\u306a\u3044\u304b\u8003\u3048\u3066\u307f\u305f\u3068\u3053\u308d\u3001CloudWatch Logs\u306b\u9001\u308a\u8fbc\u3093\u3067\u308b\u30ed\u30b0\u3092\u898b\u308c\u308b\u3088\u3046\u306b\u3059\u308c\u3070\u3001\u308f\u3056\u308f\u3056\u30b5\u30fc\u30d0\u306bSSH\u3057\u306a\u304f\u3066\u3082\u3067\u304d\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\n\u305d\u3093\u306a\u8a33\u3067\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u305f\u3002\nhttps://github.com/sparkgene/cloudwatch_logs_tail\n\n\n\n# \u4f7f\u3044\u65b9\n\n\u30aa\u30d7\u30b7\u30e7\u30f3\u4e00\u89a7\n\n```\n% ruby tail_cwlog.rb --help\n\nUsage: tail_cwlog [options]\n        --use-iamrole                USE IAM ROLE\n        --aws-region=[VALUE]         AWS REGION\n        --aws-access-key=[VALUE]     AWS ACCESS KEY\n        --aws-secret-key=[VALUE]     AWS SECRET KEY\n        --discribe-groups            Describe log groups\n        --discribe-streams           Describe log streams\n        --tailf                      tail -f log stream\n        --tail=[VALUE]               tail log stream\n        --log-group=[VALUE]          log group name\n        --log-stream=[VALUE]         log stream name\n```\n\nCloudWatch Logs\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308bLog Group\u306e\u4e00\u89a7\u8868\u793a\n\n```\n% ruby tail_cwlog.rb --aws-region=ap-northeast-1 --discribe-groups\n\n/var/log/cron\n/var/log/maillog\n/var/log/messages\n/var/log/secure\n```\n\nLog Group\u306b\u542b\u307e\u308c\u3066\u3044\u308bLog Stream\u306e\u4e00\u89a7\u53d6\u5f97\n\n```\n% ruby tail_cwlog.rb --aws-region=ap-northeast-1 --discribe-streams --log-group=/var/log/cron\n\nserver-apps-1\nserver-apps-2\nserver-apps-3\n```\n\ntail -100 \u307f\u305f\u3044\u306b\u904e\u53bb\u306e\u30ed\u30b0\u3092\u8868\u793a\u3057\u305f\u3044\u5834\u5408\n\n```\n% ruby tail_cwlog.rb --aws-region=ap-northeast-1 --discribe-streams --log-group=/var/log/cron --log-stream=server-apps-3 --tail=100\n\nFeb 21 01:22:01 server-apps-3 CROND[2837]: (root) CMD (/var/awslogs/bin/awslogs-nanny.sh > /dev/null 2>&1)\nFeb 21 01:23:01 server-apps-3 CROND[2863]: (root) CMD (/var/awslogs/bin/awslogs-nanny.sh > /dev/null 2>&1)\nFeb 21 01:24:01 server-apps-3 CROND[2890]: (root) CMD (/var/awslogs/bin/awslogs-nanny.sh > /dev/null 2>&1)\n```\n\ntail -f\u307f\u305f\u3044\u306b\u30ed\u30b0\u3092\u76e3\u8996\u3057\u305f\u3044\u5834\u5408\n\n```\n% ruby tail_cwlog.rb --aws-region=ap-northeast-1 --discribe-streams --log-group=/var/log/cron --log-stream=server-apps-3 --tailf\n\nFeb 21 01:22:01 server-apps-3 CROND[2837]: (root) CMD (/var/awslogs/bin/awslogs-nanny.sh > /dev/null 2>&1)\nFeb 21 01:23:01 server-apps-3 CROND[2863]: (root) CMD (/var/awslogs/bin/awslogs-nanny.sh > /dev/null 2>&1)\nFeb 21 01:24:01 server-apps-3 CROND[2890]: (root) CMD (/var/awslogs/bin/awslogs-nanny.sh > /dev/null 2>&1)\n```\n\n`--tailf` \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u6700\u5f8c\u306e20\u884c\u3092\u8868\u793a\u3057\u3066\u3001\u30ed\u30b0\u306e\u76e3\u8996\u3092\u884c\u3044\u307e\u3059\u3002\n5\u79d2\u306b1\u56de\u30ed\u30b0\u3092\u898b\u306b\u884c\u304d\u307e\u3059\u306e\u3067\u3001\u30b5\u30fc\u30d0\u304b\u3089CloudWatch Logs\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u3001\u624b\u5143\u306b\u5c4a\u304f\u307e\u3067\u30bf\u30a4\u30e0\u30e9\u30b0\u304c\u3042\u308a\u307e\u3059\u3002\n\u3088\u308a\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u76e3\u8996\u3057\u305f\u3044\u5834\u5408\u306f\u3001 \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4e2d\u306e`sleep(5)`\u3068\u306a\u3063\u3066\u3044\u308b\u90e8\u5206\u3001\u8abf\u6574\u3057\u3066\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n### \u6ce8\u610f\nCloudWatch Logs\u306b\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u5834\u5408\u306f\u3001AWS\u306e\u8ee2\u9001\u6599\u53ca\u3073API\u5229\u7528\u6599\u304c\u304b\u304b\u308a\u307e\u3059\u3002\n\nhttp://aws.amazon.com/cloudwatch/pricing/\n\n> Amazon CloudWatch API Requests\n> $0.01 per 1,000 GetMetricStatistics, ListMetrics, or PutMetricData requests\n\n> Amazon CloudWatch Logs*\n> $0.50 per GB ingested**\n> $0.03 per GB archived per month***\n> Data Transfer OUT from CloudWatch Logs is priced equivalent to the \u201cData Transfer OUT from Amazon EC2 To\u201d and \u201cData Transfer OUT from Amazon EC2 to Internet\u201d tables on the EC2 Pricing Page(http://aws.amazon.com/ec2/pricing/).\n\n\u3054\u5229\u7528\u306f\u8a08\u753b\u7684\u306b\u3002\n"}