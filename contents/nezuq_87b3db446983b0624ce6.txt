{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\n\u524d\u56de\u3001\u4e16\u754c\u89b3\u8a2d\u5b9a\u5225\u306b\u65e5\u672c\u8a9e\u5c0f\u8aac\u3092\u5206\u985e\u3059\u308bR\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\u304c\u3001\n\u6a5f\u68b0\u304c\u3069\u306e\u3088\u3046\u306a\u57fa\u6e96\u3067\u305d\u308c\u3089\u3092\u5206\u985e\u3057\u3066\u3044\u308b\u304b\u306f\u8aac\u660e\u3057\u3065\u3089\u3044\u3002\n\u6c7a\u5b9a\u6728\u3067\u306f\u3001\u5c11\u306a\u3044\u5909\u6570\uff08\u672a\u96c6\u7d04\uff09\u3067\u5206\u985e\u3059\u308b\u30e2\u30c7\u30eb\u3092\u4f5c\u308b\u306e\u3067\u3001\u305d\u308c\u304c\u8aac\u660e\u3057\u3084\u3059\u3044\u3002\n\u8a66\u3057\u3066\u307f\u308b\u3002\n\n\u51e6\u7406\n\u524d\u56de\u306e\u51e6\u7406\u3068\u540c\u3058\u3002\n\u305f\u3060\u3057\u3001R\u30b3\u30fc\u30c9\u306e\u4e2d\u8eab\u306f\u4e0b\u8a18\u306e\u3082\u306e\u306b\u5909\u66f4\u3059\u308b\u3002\n\u53c8\u3001\u7528\u610f\u3059\u308b\u6587\u66f8\u306f\u8a13\u7df4\u30c7\u30fc\u30bf(train)\u3060\u3051\u3067\u826f\u3044\u3002\n\nNEZUQ_\u5dee\u5206\u30ef\u30fc\u30c9\u62bd\u51fa\u5668.R\n#NEZUQ_\u5dee\u5206\u30ef\u30fc\u30c9\u62bd\u51fa\u5668.R\n#Copyright (c) 2014 nezuq\n#This software is released under the MIT License.\n#http://opensource.org/licenses/mit-license.php\n\nlibrary(RMeCab)\nlibrary(mvpart)\n\n#\u57fa\u76e4\u30d5\u30a9\u30eb\u30c0\npath <- \".\"\n#\u8a13\u7df4\u30c7\u30fc\u30bf\u30d5\u30a9\u30eb\u30c0\npath.train <- paste(path,\"train\",sep=\"/\")\n\n#\u7d50\u679c\u30d5\u30a9\u30eb\u30c0\npath.result <- paste(path,format(Sys.time(), \"%y%m%d%H%M%S\"),sep=\"/\") \ndir.create(path.result)\n#\u9014\u4e2d\u30c7\u30fc\u30bf\u683c\u7d0d\u7528\u30d5\u30a9\u30eb\u30c0\npath.input <- paste(path.result,\"input\",sep=\"/\") \ndir.create(path.input)\n#\u5206\u985e\u6e08\u307f\u30c7\u30fc\u30bf\u683c\u7d0d\u7528\u30d5\u30a9\u30eb\u30c0\npath.output <- paste(path.result,\"output\",sep=\"/\") \ndir.create(path.output)\n\n#\u30d5\u30a1\u30a4\u30eb\u540d\u5206\u5272\u8a18\u53f7\nsep <- \"_\"\n\n#\u8a13\u7df4\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u4e00\u6642\u30d5\u30a9\u30eb\u30c0\u306b\u79fb\u52d5\ngather.files <- function(from, to, prefix=\"\", sep=\"_\"){\n  for(fname in dir(from, recursive=T)){\n    fname.full <- paste(from, fname, sep = \"/\")\n    fname.to <- gsub(\"/\", sep, fname)\n    #\u63a5\u982d\u8f9e\u6307\u5b9a\u306e\u5834\u5408\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u4ed8\u4e0e\n    if (0 < nchar(prefix)) {fname.to <- paste(prefix, fname.to, sep = sep)}\n    fname.to.full <- paste(to, fname.to, sep = \"/\")\n    file.copy(fname.full,fname.to.full)\n  }\n}\ngather.files(path.train, path.input, sep = sep)\n\n#\u5358\u8a9e\u5225\u983b\u5ea6\u8868\u3092\u4f5c\u6210\nd.origin <- t(docMatrix2(path.input, pos = c(\"\u540d\u8a5e\"), weight = \"norm\"))\n#\u8a18\u53f7\u304c\u542b\u307e\u308c\u308b\u5358\u8a9e\u983b\u5ea6\u5217\u3092\u524a\u9664\u3057\u305f\u30c7\u30fc\u30bf\u30d5\u30ec\u30fc\u30e0\u306b\u5909\u63db\nptn.rmv <- \"^([a-zA-Z0-9\uff61-\uff9f\u3041-\u3093\u30a1-\u30f6\u30fc\u4e00-\u9fa0])+$\"\nd <- as.data.frame(d.origin[,regexpr(ptn.rmv,colnames(d.origin)) > -1])\n#\u5217\u540d\u306b\u63a5\u982d\u8f9e\u3092\u4ed8\u4e0e \u203b\u5217\u540d\u304c\u6570\u5024\u3060\u3068\u4ed6\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u95a2\u6570\u3067\u30a8\u30e9\u30fc\u3092\u8d77\u3053\u3059\u3002\ncolnames(d) <- paste(\"d.\", colnames(d), sep = \"\")\n#\u8a13\u7df4\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\nd.info <- do.call(rbind, strsplit(rownames(d), sep))\nd[\"s.tag\"] <- factor(d.info[, 1])\n\n#\u30e2\u30c7\u30eb\u3092\u4f5c\u6210 \nd.rp <- rpart(s.tag~., data = d)\n#\u30e2\u30c7\u30eb\u3092\u6587\u5b57\u8868\u793a\nd.rp\n\n#\u9014\u4e2d\u30c7\u30fc\u30bf\u30d5\u30a9\u30eb\u30c0\u3092\u524a\u9664\n#file.remove(dir(path.input,full.names=T))\n#file.remove(path.input)\n\n\n\n\u51fa\u529b\u30a4\u30e1\u30fc\u30b8\n\u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u6700\u5f8c\u306b\u6587\u5b57\u3067\u8868\u793a\u3055\u308c\u308b\u3002\nn= 16 \n\nnode), split, n, loss, yval, (yprob)\n      * denotes terminal node\n\n1) root 16 8 \u73fe\u5728\u8a2d\u5b9a (0.5000000 0.5000000)  \n  2) d.\u9ad8\u6821< 0.002960446 8 0 \u73fe\u5728\u8a2d\u5b9a (1.0000000 0.0000000) *\n  3) d.\u9ad8\u6821>=0.002960446 8 0 \u672a\u6765\u8a2d\u5b9a (0.0000000 1.0000000) *\n\n\n\u611f\u60f3\n\u73fe\u5728\u8a2d\u5b9a(\u9ad8\u6821\u751f\u8a2d\u5b9a)\u304b\u672a\u6765\u8a2d\u5b9a(\u793e\u4f1a\u4eba\u8a2d\u5b9a)\u304b\u306e\u5206\u985e\u3092\u8a66\u3057\u305f\u306e\u3067\u300c\u3067\u3059\u3088\u306d\u30fc\u300d\u304c\u611f\u60f3\u3002\n\u30ad\u30fc\u30ef\u30fc\u30c9\u300c\u9ad8\u6821\u300d\u304c\u51fa\u73fe\u3059\u308b\u983b\u5ea6\u3092\u4f7f\u3048\u3070\u5206\u985e\u3067\u304d\u308b\u4e8b\u304c\u5206\u304b\u3063\u305f\u3002\n#\u6982\u8981\n[\u524d\u56de](http://qiita.com/nezuq/items/99a599587b1e48705c65)\u3001\u4e16\u754c\u89b3\u8a2d\u5b9a\u5225\u306b\u65e5\u672c\u8a9e\u5c0f\u8aac\u3092\u5206\u985e\u3059\u308bR\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\u304c\u3001\n\u6a5f\u68b0\u304c\u3069\u306e\u3088\u3046\u306a\u57fa\u6e96\u3067\u305d\u308c\u3089\u3092\u5206\u985e\u3057\u3066\u3044\u308b\u304b\u306f\u8aac\u660e\u3057\u3065\u3089\u3044\u3002\n\u6c7a\u5b9a\u6728\u3067\u306f\u3001\u5c11\u306a\u3044\u5909\u6570\uff08\u672a\u96c6\u7d04\uff09\u3067\u5206\u985e\u3059\u308b\u30e2\u30c7\u30eb\u3092\u4f5c\u308b\u306e\u3067\u3001\u305d\u308c\u304c\u8aac\u660e\u3057\u3084\u3059\u3044\u3002\n\u8a66\u3057\u3066\u307f\u308b\u3002\n\n#\u51e6\u7406\n[\u524d\u56de](http://qiita.com/nezuq/items/99a599587b1e48705c65)\u306e\u51e6\u7406\u3068\u540c\u3058\u3002\n\u305f\u3060\u3057\u3001R\u30b3\u30fc\u30c9\u306e\u4e2d\u8eab\u306f\u4e0b\u8a18\u306e\u3082\u306e\u306b\u5909\u66f4\u3059\u308b\u3002\n\u53c8\u3001\u7528\u610f\u3059\u308b\u6587\u66f8\u306f\u8a13\u7df4\u30c7\u30fc\u30bf(train)\u3060\u3051\u3067\u826f\u3044\u3002\n\n```r:NEZUQ_\u5dee\u5206\u30ef\u30fc\u30c9\u62bd\u51fa\u5668.R\n#NEZUQ_\u5dee\u5206\u30ef\u30fc\u30c9\u62bd\u51fa\u5668.R\n#Copyright (c) 2014 nezuq\n#This software is released under the MIT License.\n#http://opensource.org/licenses/mit-license.php\n\nlibrary(RMeCab)\nlibrary(mvpart)\n\n#\u57fa\u76e4\u30d5\u30a9\u30eb\u30c0\npath <- \".\"\n#\u8a13\u7df4\u30c7\u30fc\u30bf\u30d5\u30a9\u30eb\u30c0\npath.train <- paste(path,\"train\",sep=\"/\")\n\n#\u7d50\u679c\u30d5\u30a9\u30eb\u30c0\npath.result <- paste(path,format(Sys.time(), \"%y%m%d%H%M%S\"),sep=\"/\") \ndir.create(path.result)\n#\u9014\u4e2d\u30c7\u30fc\u30bf\u683c\u7d0d\u7528\u30d5\u30a9\u30eb\u30c0\npath.input <- paste(path.result,\"input\",sep=\"/\") \ndir.create(path.input)\n#\u5206\u985e\u6e08\u307f\u30c7\u30fc\u30bf\u683c\u7d0d\u7528\u30d5\u30a9\u30eb\u30c0\npath.output <- paste(path.result,\"output\",sep=\"/\") \ndir.create(path.output)\n\n#\u30d5\u30a1\u30a4\u30eb\u540d\u5206\u5272\u8a18\u53f7\nsep <- \"_\"\n\n#\u8a13\u7df4\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u4e00\u6642\u30d5\u30a9\u30eb\u30c0\u306b\u79fb\u52d5\ngather.files <- function(from, to, prefix=\"\", sep=\"_\"){\n  for(fname in dir(from, recursive=T)){\n    fname.full <- paste(from, fname, sep = \"/\")\n    fname.to <- gsub(\"/\", sep, fname)\n    #\u63a5\u982d\u8f9e\u6307\u5b9a\u306e\u5834\u5408\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u4ed8\u4e0e\n    if (0 < nchar(prefix)) {fname.to <- paste(prefix, fname.to, sep = sep)}\n    fname.to.full <- paste(to, fname.to, sep = \"/\")\n    file.copy(fname.full,fname.to.full)\n  }\n}\ngather.files(path.train, path.input, sep = sep)\n\n#\u5358\u8a9e\u5225\u983b\u5ea6\u8868\u3092\u4f5c\u6210\nd.origin <- t(docMatrix2(path.input, pos = c(\"\u540d\u8a5e\"), weight = \"norm\"))\n#\u8a18\u53f7\u304c\u542b\u307e\u308c\u308b\u5358\u8a9e\u983b\u5ea6\u5217\u3092\u524a\u9664\u3057\u305f\u30c7\u30fc\u30bf\u30d5\u30ec\u30fc\u30e0\u306b\u5909\u63db\nptn.rmv <- \"^([a-zA-Z0-9\uff61-\uff9f\u3041-\u3093\u30a1-\u30f6\u30fc\u4e00-\u9fa0])+$\"\nd <- as.data.frame(d.origin[,regexpr(ptn.rmv,colnames(d.origin)) > -1])\n#\u5217\u540d\u306b\u63a5\u982d\u8f9e\u3092\u4ed8\u4e0e \u203b\u5217\u540d\u304c\u6570\u5024\u3060\u3068\u4ed6\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u95a2\u6570\u3067\u30a8\u30e9\u30fc\u3092\u8d77\u3053\u3059\u3002\ncolnames(d) <- paste(\"d.\", colnames(d), sep = \"\")\n#\u8a13\u7df4\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\nd.info <- do.call(rbind, strsplit(rownames(d), sep))\nd[\"s.tag\"] <- factor(d.info[, 1])\n\n#\u30e2\u30c7\u30eb\u3092\u4f5c\u6210 \nd.rp <- rpart(s.tag~., data = d)\n#\u30e2\u30c7\u30eb\u3092\u6587\u5b57\u8868\u793a\nd.rp\n\n#\u9014\u4e2d\u30c7\u30fc\u30bf\u30d5\u30a9\u30eb\u30c0\u3092\u524a\u9664\n#file.remove(dir(path.input,full.names=T))\n#file.remove(path.input)\n```\n\n#\u51fa\u529b\u30a4\u30e1\u30fc\u30b8\n\u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u6700\u5f8c\u306b\u6587\u5b57\u3067\u8868\u793a\u3055\u308c\u308b\u3002\n\n```\nn= 16 \n\nnode), split, n, loss, yval, (yprob)\n      * denotes terminal node\n\n1) root 16 8 \u73fe\u5728\u8a2d\u5b9a (0.5000000 0.5000000)  \n  2) d.\u9ad8\u6821< 0.002960446 8 0 \u73fe\u5728\u8a2d\u5b9a (1.0000000 0.0000000) *\n  3) d.\u9ad8\u6821>=0.002960446 8 0 \u672a\u6765\u8a2d\u5b9a (0.0000000 1.0000000) *\n```\n\n#\u611f\u60f3\n\u73fe\u5728\u8a2d\u5b9a(\u9ad8\u6821\u751f\u8a2d\u5b9a)\u304b\u672a\u6765\u8a2d\u5b9a(\u793e\u4f1a\u4eba\u8a2d\u5b9a)\u304b\u306e\u5206\u985e\u3092\u8a66\u3057\u305f\u306e\u3067\u300c\u3067\u3059\u3088\u306d\u30fc\u300d\u304c\u611f\u60f3\u3002\n\u30ad\u30fc\u30ef\u30fc\u30c9\u300c\u9ad8\u6821\u300d\u304c\u51fa\u73fe\u3059\u308b\u983b\u5ea6\u3092\u4f7f\u3048\u3070\u5206\u985e\u3067\u304d\u308b\u4e8b\u304c\u5206\u304b\u3063\u305f\u3002\n", "tags": ["R3.1.0", "\u81ea\u7136\u8a00\u8a9e\u51e6\u7406", "\u6a5f\u68b0\u5b66\u7fd2", "Pixiv\u7d71\u8a08\u30b7\u30ea\u30fc\u30ba"]}