{"tags": ["VirtualMachine", "CentOS6"], "context": " More than 1 year has passed since last update.\n\nVirtual Machine\u57fa\u672c\u8a2d\u5b9a\n\n\n==Docker\u30b3\u30f3\u30c6\u30ca\u306e\u5834\u5408\u306f\u3001\u7b2c6.5\u7ae0\u306e\u307f\u5b9f\u884c\u3059\u308b\u3053\u3068\u3002==\n\n1.CentOS6.6(Final)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n1.1 Minimal Instration Disc\u3092\u4f7f\u3046\u3002\n/Users/soushi/OneDrive/ISO/CentOS-6.6-x86_64-\nminimal.iso\n\n2.\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5468\u8fba\u8a2d\u5b9a\n\n2.0 VMWare\u306e\u8a2d\u5b9a\u753b\u9762\u3067\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092Share with my Mac\u306b\u3059\u308b\u3002\n\n2.0.1 VMWare->Preferences\n\n\n2.0.2 Share with my Mac\u3092\u9078\u629e\n\n\n2.1 \u5404VM\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\u753b\u9762\u3067\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092Share with my Mac\u306b\u3059\u308b\u3002\n\n2.1.1\n\n2.1 Network Manager\u3092\u30aa\u30d5\u306b\u3059\u308b\u3002\n\u203b\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u306f\u305a\u3002\u3053\u306e\u5834\u5408\u3001\u8ffd\u52a0\u306e\u8a2d\u5b9a\u306f\u4e0d\u8981\u3002\nchkconfig --list NetworkManager\n#> error reading information on service NetworkManager: No such file or directory\n\n\u8a2d\u5b9a\u304c\u5fc5\u8981\u306a\u5834\u5408\u3001\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\nservice NetworkManager stop\nchkconfig NetworkManager off\nservice network restart\ncat /etc/sysconfig/network-scripts/ifcfg-eth0 | sed -i 's/NM_CONTROLLED=no/NM_CONTROLLED=yes/g'\n\n\n2.2 IP\u30a2\u30c9\u30ec\u30b9/\u30db\u30b9\u30c8\u540d/\u30c9\u30e1\u30a4\u30f3\u540d\u306e\u8a2d\u5b9a\n/etc/sysconfig/network-scripts/ifcfg-eth0\u3092\u7de8\u96c6\u3059\u308b\u3002\nDEVICE=eth0\nONBOOT=yes\nHWADDR=VM\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a->Advanced option\n\nIPADDR=131.113.102.219\nNETMASK=255.255.255.128\nGATEWAY=131.113.102.129\nNAMESERVER=131.113.102.130\nBROADCASTADDR=131.113.102.255\nHOSTNAME=g2vm1\nDOMAINNAME=yamanaka.ics.keio.ac.jp\n\nsed -i -e '/BOOTPROTO=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"BOOTPROTO=static\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\nsed -i -e '/BOOTPROTO=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"BOOTPROTO=static\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\nsed -i -e '/IPADDR=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"IPADDR=$IPADDR\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\nsed -i -e '/NETMASK=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"NETMASK=$NETMASK\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\nsed -i -e '/GATEWAY=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"GATEWAY=$GATEWAY\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\nsed -i -e '/BROADCAST=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"BROADCAST=$BROADCASTADDR\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\nsed -i -e '/IPV6INIT=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"IPV6INIT=no\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\nsed -i -e '/PEERDNS=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"PEERDNS=no\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\n\nsed -i -e '/DOMAIN=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"DOMAIN=$DOMAINNAME\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\n\nsed -i -e '/domain.*/d' /etc/resolv.conf;\nsed -i -e '/search.*/d' /etc/resolv.conf;\necho \"search $DOMAINNAME\" >> /etc/resolv.conf;\n\nsed -i -e '/nameserver.*/d' /etc/resolv.conf;\necho \"nameserver $NAMESERVER\" >> /etc/resolv.conf;\n\nsed -i -e '/NETWORKING=.*/d' /etc/sysconfig/network;\necho \"NETWORKING=yes\" >> /etc/sysconfig/network;\nsed -i -e '/HOSTNAME=.*/d' /etc/sysconfig/network;\necho \"HOSTNAME=$HOSTNAME.$DOMAINNAME\" >> /etc/sysconfig/network;\n\nsed -i -e '/127\\.0\\.0\\.1.*/d' /etc/hosts;\necho \"127.0.0.1    $HOSTNAME.$DOMAINNAME $HOSTNAME localhost.localdomain localhost\" >> /etc/hosts\nsed -i -e '/\\:\\:1.*/d' /etc/hosts\necho \"::1    $HOSTNAME.$DOMAINNAME $HOSTNAME localhost.localdomain localhost\" >> /etc/hosts\nreboot;\n\n\n3 \u8a2d\u5b9a\u5024\u306e\u78ba\u8a8d\n\n3.1 \u30db\u30b9\u30c8\u540d\u30fb\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u78ba\u8a8d\n\u203bdomainname\u306f(none)\u3067OK\u3002\u3053\u306e\u8a2d\u5b9a\u5024\u306f\u4e0d\u8981\u3068\u306a\u3063\u305f\u3002\nhostname\n#>vm1.soushi.jp\nhostname -d\n#>soushi.jp\nifconfig\n\n\n4 OpenSSH\u306e\u5c0e\u5165\n\n4.1 yum\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\nyum update\nyum check-update\nyum -y install openssh-clients\n\n\n4.2 \u30e6\u30fc\u30b6\u30fcsoushi\u3092\u8ffd\u52a0\u3059\u308b\n\u3053\u3061\u3089\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u53c2\u7167\n\n4.2.2 \u9375\u8a8d\u8a3c\u63a5\u7d9a\u3092\u30c6\u30b9\u30c8\u3057\u307e\u3059\u3002\n\u203b\u30ed\u30fc\u30ab\u30eb\u7aef\u672b\u3067\u5b9f\u884c\nssh soushi@$server\nexit\n\n\n4.4 SSH\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u3092\u9375\u8a8d\u8a3c\u306e\u307f\u8a31\u53ef\u3059\u308b\n\nSSH2\u306b\u3088\u308b\u63a5\u7d9a\u306e\u307f\u8a31\u53ef\nsudo sed -i -e 's/^Protocol/#Protocol/g' /etc/ssh/sshd_config\nsudo sed -i -e '/^#Protocol/a Protocol 2' /etc/ssh/sshd_config\n\n#### RSA\u516c\u958b\u9375\u306b\u3088\u308b\u8a8d\u8a3c\nsudo sed -i -e 's/^RSAAuthentication/#RSAAuthentication/g' /etc/ssh/sshd_config\nsudo sed -i -e '/^#RSAAuthentication/a RSAAuthentication yes' /etc/ssh/sshd_config\n\n#### rhosts\u3067\u306e\u8a8d\u8a3c\u3092\u7981\u6b62\nsudo sed -i -e 's/^RhostsRSAAuthentication/#RhostsRSAAuthentication/g' /etc/ssh/sshd_config\nsudo sed -i -e '/^#RhostsRSAAuthentication/a RhostsRSAAuthentication no' /etc/ssh/sshd_config\n\n#### \u30d1\u30b9\u30ef\u30fc\u30c9\u3067\u306e\u8a8d\u8a3c\u3092\u7981\u6b62\uff08\u516c\u958b\u9375\u306b\u3088\u308b\u8a8d\u8a3c\u306e\u307f\u306b\u3059\u308b\uff09\nsudo sed -i -e 's/^PermitEmptyPasswords/#PermitEmptyPasswords/g' /etc/ssh/sshd_config\nsudo sed -i -e '/^#PermitEmptyPasswords/a PermitEmptyPasswords no' /etc/ssh/sshd_config\nsudo sed -i -e 's/^PasswordAuthentication/#PasswordAuthentication/g' /etc/ssh/sshd_config\nsudo sed -i -e '/^#PasswordAuthentication/a PasswordAuthentication no' /etc/ssh/sshd_config\n\n#### \u30c1\u30e3\u30ec\u30f3\u30b8/\u30ec\u30b9\u30dd\u30f3\u30b9\u8a8d\u8a3c\u3092\u7121\u52b9\u5316\u3059\u308b\nsudo sed -i -e 's/^ChallengeResponseAuthentication/#ChallengeResponseAuthentication/g' /etc/ssh/sshd_config\nsudo sed -i -e '/^#ChallengeResponseAuthentication/a ChallengeResponseAuthentication no' /etc/ssh/sshd_config\n\n#### \u8a2d\u5b9a\u3092\u53cd\u6620\nsudo service sshd restart\n\n\n(\u30aa\u30d7\u30b7\u30e7\u30f3)VMware ESXi\u4e0a\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u5834\u5408\u3001\u4e0b\u8a18\u3092\u5b9f\u884c\u3057\u3066MAC\u30a2\u30c9\u30ec\u30b9\u306e\u5024\u3092\u9069\u5207\u306a\u5024\u306b\u66f8\u304d\u63db\u3048\u308b\u3053\u3068\u3002\n\n1 \u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\nscp ~/OneDrive/Scripts/ConfigureMACaddressForVMsOnESXi.sh root@$IPADDR:~/vmwarenetrewrite\n\n\n2 VM\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002\nssh -i ~/OneDrive/.ssh/id_rsa root@$IPADDR\n\n\n3 \u8a2d\u5b9a\u3092\u66f8\u304d\u8fbc\u307f\u307e\u3059\u3002\n==(\u6b21\u56de\u306e\u518d\u8d77\u52d5\u6642\u306b\u9069\u5207\u306aMAC\u30a2\u30c9\u30ec\u30b9\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002)==\nchmod +x /root/vmwarenetrewrite\necho \"/root/vmwarenetrewrite\" >> /etc/rc.d/rc.local\n\n\n(\u30aa\u30d7\u30b7\u30e7\u30f3)\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u3001root\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u3092\u7981\u6b62\u3057\u307e\u3059\u3002\n#### root\u3067\u306e\u8a8d\u8a3c\u3092\u7981\u6b62\nsudo sed -i -e 's/^PermitRootLogin/#PermitRootLogin/g' /etc/ssh/sshd_config\nsudo sed -i -e '/^#PermitRootLogin/a PermitRootLogin no' /etc/ssh/sshd_config\n\n\n5 \u5b9f\u9a13\u7528\u8a2d\u5b9a\n\n5.2 ipv6, iptables, SELINUX\u3092\u7121\u52b9\u306b\u3059\u308b\u3002\nsudo echo 'options ipv6 disable=1' > /etc/modprobe.d/disable-ipv6.conf\nsudo service iptables stop\nsudo chkconfig iptables off\nsudo chkconfig ip6tables off\nsudo sed -i -e 's/^SELINUX=/#SELINUX=/g' /etc/selinux/config;\nsudo sed -i -e '/^#SELINUX/a SELINUX=disabled' /etc/selinux/config;\nsudo setenforce 0\n\n\n6 \u958b\u767a\u74b0\u5883\u306e\u5c0e\u5165\n==\u203broot\u30e6\u30fc\u30b6\u30fc\u3067\u884c\u3046\u3002==\n\n6.1 \u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\n\u203b/etc/profile\u306b\u3001LANG\u3068LC_ALL\u306e\u74b0\u5883\u5909\u6570\u3092\u66f8\u304d\u8fbc\u3093\u3067\u304a\u304f\u3002\nsudo sed -i \"s/^\\(LANG.*\\)/#\\1/g\" /etc/sysconfig/i18n\nsudo echo 'LANG=en_US.utf8' >> /etc/sysconfig/i18n\nsudo echo 'LC_CTYPE=en_US.utf8' >> /etc/sysconfig/i18n\nsudo echo 'LC_NUMERIC=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_TIME=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_COLLATE=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_MONETARY=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_MESSAGES=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_PAPER=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_NAME=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_ADDRESS=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_TELEPHONE=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_MEASUREMENT=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_IDENTIFICATION=\"en_US.utf8\"' >> /etc/sysconfig/i18n\n\n\n6.2 C\u30b3\u30f3\u30d1\u30a4\u30e9\u304a\u3088\u3073\u305d\u306e\u4ed6\u30c4\u30fc\u30eb\u3092\u5c0e\u5165\n\nIPv6\u306eSingle Request Reopen\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002\u7406\u7531\u306f\u3053\u3061\u3089\n\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u4ee5\u5916\u306eCentOS\u3067\u306f\u3001\u4e0b\u8a18\u3092\u884c\u3046\u3053\u3068\u3002\n\nsudo sed -i -e \"s|mirror\\.centos\\.org/centos/\\$releasever|vault\\.centos\\.org/6.6|g\" /etc/yum.repos.d/CentOS-Base.repo\nsudo sed -i -e \"s|#baseurl=|baseurl=|g\" /etc/yum.repos.d/CentOS-Base.repo\nsudo sed -i -e \"s|mirrorlist=|#mirrorlist=|g\" /etc/yum.repos.d/CentOS-Base.repo\necho 'options single-request-reopen' >> /etc/resolv.conf\n\nyum -y update\n\n\n\u30ab\u30fc\u30cd\u30eb\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u304c\u542b\u307e\u308c\u3066\u3044\u305f\u5834\u5408\u3001\u4e00\u65e6\u3053\u3053\u3067\u518d\u8d77\u52d5\u3002\n\nshutdown -r now\n\nLANG=C yum -y groupinstall \"Development tools\"\nyum -y install man man-pages man-pages-overrides man-pages-ja\nyum -y check-update\nyum -y install gcc*\nyum -y install gcc gcc-c++\nyum -y install which\nyum -y install tcpdump\nyum -y install uuid*\nyum -y install e2fsprogs*\nyum -y install libuuid*\nyum -y install libtool*\nyum -y install tree\nyum -y install wget\nyum -y install git\nyum -y install unzip\nyum -y install python\nyum -y install perl\nyum -y install tar\nyum -y install ruby\nyum -y install traceroute\nyum -y install nmap\nyum -y install man\nyum -y install jq\nyum -y install nc\nyum -y install screen\nyum -y install openssh\nyum -y install openssh-server\nyum -y install openssh-clients\nyum -y install nethogs\nyum -y install openssl-devel\nyum -y install readline-devel zlib-devel\nyum -y install libffi-devel\nyum -y --enablerepo=epel,remi,rpmforge install libxml2 libxml2-devel\nyum -y --enablerepo=epel,remi,rpmforge install libxslt libxslt-devel\n\nmkdir /usr/local/download\ncd /usr/local/download\nwget http://launchpad.net/byobu/trunk/3.16/+download/byobu_3.16.orig.tar.gz\ntar zxvf byobu_3.16.orig.tar.gz\ncd byobu-3.16\n./configure --prefix=\"/usr/local/byobu\"\nmake\nmake install\necho 'export PATH=$PATH:/usr/local/byobu/bin' >> /etc/profile\nexport PATH=$PATH:/usr/local/byobu/bin\n\n\n6.3 ntpd\u3092\u5c0e\u5165\nyum -y install ntp\nchkconfig ntpd on\necho \"restrict 133.243.238.163 mask 255.255.255.255 nomodify notrap noquery\" >> /etc/ntp.conf\necho \"restrict 133.243.238.164 mask 255.255.255.255 nomodify notrap noquery\" >> /etc/ntp.conf\necho \"restrict 133.243.238.243 mask 255.255.255.255 nomodify notrap noquery\" >> /etc/ntp.conf\necho \"restrict 133.243.238.244 mask 255.255.255.255 nomodify notrap noquery\" >> /etc/ntp.conf\necho \"server ntp.nict.jp\" >> /etc/ntp.conf\nservice ntpd restart\nntpq -p\necho \"# \u6bce\u671d5\u6642\u306b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30af\u30ed\u30c3\u30af\u304c\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30af\u30ed\u30c3\u30af\u306b\u53cd\u6620\" >> /etc/crontab\necho \"0 5 * * 0 root /sbin/hwclock -w > /dev/null 2>&1\" >> /etc/crontab\n\n\n6.4 Fedora EPEL, remi, RPMForge\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092yum\u306b\u8ffd\u52a0\u3059\u308b\u3002\n\n6.4.1 \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9(CentOS6\u306e\u5834\u5408)\nmkdir /usr/local/download\ncd /usr/local/download\nwget http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm\nwget wget http://rpms.famillecollet.com/enterprise/remi-release-6.rpm\nwget http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm\n\n\n6.4.2 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nrpm -Uvh epel-release-6-8.noarch.rpm remi-release-6.rpm rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm\n\n\n6.4.3 \u8a2d\u5b9a\n\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u8ffd\u52a0\u3067\u304d\u305f\u3089\u3001\u305d\u308c\u305e\u308c\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u3044\u3063\u305f\u3093\u7121\u52b9\u5316\u3057\u307e\u3059\u3002\n\u5177\u4f53\u7684\u306b\u8a00\u3046\u3068\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306eenabled\u3068\u3044\u3046\u9805\u76ee\u30920\u306b\u5909\u66f4\u3057\u3001yum\u5b9f\u884c\u6642\u306b\u660e\u793a\u7684\u306b\u6307\u5b9a\u3055\u308c\u306a\u3044\u9650\u308a\u3001\u65b0\u305f\u306b\u8ffd\u52a0\u3057\u305f\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u5229\u7528\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u3001remi\u306f\u3082\u3068\u3082\u3068enabled=0\u3068\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001Fedora EPEL\u3068RPMForge\u306e\u307fvi\u30b3\u30de\u30f3\u30c9\u3067\u7de8\u96c6\u3057\u307e\u3059\u3002\n\u203b\u610f\u56f3\u305b\u305a\u3001\u6a19\u6e96\u5916\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\uff08\u4eca\u56de\u8ffd\u52a0\u3057\u305f\u30ea\u30dd\u30b8\u30c8\u30ea\uff09\u304c\u4f7f\u308f\u308c\u306a\u3044\u305f\u3081\u306e\u5bfe\u7b56\u3067\u3059\u3002\n\n6.4.3.1 /etc/yum.repos.d/epel.repo\u306eenabled\u30920\u306b\u5909\u66f4\u3002\nsed -i -e 's/^enabled/#enabled=/g' /etc/yum.repos.d/epel.repo\nsed -i -e '/^#enabled/a enabled=0' /etc/yum.repos.d/epel.repo\n\n\n6.4.3.2 [rpmforge]\u306eenabled\u30920\u306b\u5909\u66f4\u3002\nsed -i -e 's/^enabled/#enabled=/g' /etc/yum.repos.d/rpmforge.repo\nsed -i -e '/^#enabled/a enabled=0' /etc/yum.repos.d/rpmforge.repo\n\n\n6.4.4 \u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f7f\u3046\u3068\u304d\nyum -y --enablerepo=remi,epel,rpmforge install <<\u30d1\u30c3\u30b1\u30fc\u30b8\u540d>>\n\n\n6.5 tmux\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nyum -y --enablerepo=rpmforge install tmux\n\n\n6.6 \u305d\u306e\u4ed6\u4fbf\u5229\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n# python\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u30bd\u30d5\u30c8pip\nyum -y --enablerepo=\"epel\" install python-pip\n# \u30ab\u30e9\u30fc\u30ea\u30f3\u30b0\u304c\u884c\u3048\u308bcat\u3001Pygments\nsudo yes | pip install pygments\necho \"alias ccat='pygmentize -g'\" >> /etc/profile\n\n\n6.7 Ruby on Rails\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\nrbenv\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(\u30b7\u30b9\u30c6\u30e0\u30ef\u30a4\u30c9\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059)\n\u307e\u305a sudoers \u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 PATH \u304c\u53c2\u7167\u3057\u306a\u3044\u5834\u6240\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u306e\u3067\u3001sudo \u304c\u305d\u308c\u3092\u8a8d\u8b58\u3057\u306a\u3044\u3068\u56f0\u308a\u307e\u3059\u3002.profile \u7b49\u3067\u64cd\u4f5c\u30e6\u30fc\u30b6\u306e PATH \u3092\u5909\u66f4\u3057\u3066\u3082\u901a\u5e38\u306f sudo \u306f\u305d\u308c\u3092\u8a8d\u8b58\u3057\u3066\u304f\u308c\u307e\u305b\u3093\u306e\u3067\u3001\u64cd\u4f5c\u30e6\u30fc\u30b6\u306e PATH \u3092 sudo \u304c\u5f15\u304d\u7d99\u3052\u308b\u3088\u3046\u306b sudoers \u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\nsudo visudo\n\n# :/usr/local/rbenv/bin:/usr/local/rbenv/shims\u306e2\u3064\u3092\u8ffd\u8a18\u3059\u308b\nDefaults secure_path=<\u73fe\u5728secure_path\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5024>:/usr/local/rbenv/bin:/usr/local/rbenv/shims\nDefaults env_keep += \"PATH RBENV_ROOT\"\n\n\n/usr/local/rbenv \u306b rbenv \u304a\u3088\u3073 rbenv \u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u3057\u3066 ruby-build \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u4ee5\u5f8c\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3059\u308b\u5834\u5408\u306f\u305d\u308c\u305e\u308c\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3066 sudo git pull \u3059\u308c\u3070\u7c21\u5358\u306b\u6700\u65b0\u7248\u306b\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nexport RBENV_ROOT=/usr/local/rbenv\nexport PATH=${RBENV_ROOT}/bin:${PATH}\nsudo git clone git://github.com/sstephenson/rbenv.git ${RBENV_ROOT}\nsudo git clone git://github.com/sstephenson/ruby-build.git ${RBENV_ROOT}/plugins/ruby-build\n\n\n\u914d\u7f6e\u304c\u3067\u304d\u305f\u3089 rbenv \u306e\u521d\u671f\u8a2d\u5b9a(\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4f5c\u6210\u7b49)\u3092\u884c\u3044\u307e\u3059\u3002rbenv\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3060\u3068 .profile \u306b\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u81ea\u52d5\u5316\u3057\u3066\u307e\u3059\u304c\u3001\u4eca\u56de\u306e\u74b0\u5883\u3067\u306f root \u6a29\u9650\u304c\u306a\u3044\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u3001\u4e88\u3081\u624b\u52d5\u3067\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nsudo rbenv init -\n\n\n\u6700\u5f8c\u306b\u3001rbenv \u3092\u81ea\u5206\u306e\u74b0\u5883\u304b\u3089\u547c\u3079\u308b\u3088\u3046\u3001.profile \u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nsu - vagrant\n\nbash -c 'cat <<\\__EOT__ >> ~/.bash_profile\nexport RBENV_ROOT=\"/usr/local/rbenv\"\nexport PATH=\"${RBENV_ROOT}/bin:${PATH}\"\neval \"$(rbenv init -)\"\n__EOT__'\n\nsu -\n\nbash -c 'cat <<\\__EOT__ >> ~/.bash_profile\nexport RBENV_ROOT=\"/usr/local/rbenv\"\nexport PATH=\"${RBENV_ROOT}/bin:${PATH}\"\neval \"$(rbenv init -)\"\n__EOT__'\n\n\n\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u305f\u3089\u30b7\u30a7\u30eb\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\nexec ${SHELL} -l\nsudo rbenv install -l\n\n\nRuby\u306e\u6700\u65b0\u7248(2.2.3)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nRuby \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5834\u5408\u306f\u3001sudo \u3092\u901a\u3057\u3066 renv install \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\nsudo rbenv install 2.2.3\nsudo rbenv versions\nsudo rbenv global 2.2.3\nsudo rbenv version\nsudo rbenv rehash\n\n\nRails\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nsudo gem install nokogiri -- --use-system-libraries\nsudo gem update --system\nsudo gem install --no-ri --no-rdoc rails\nsudo gem install bundler\nsudo gem install compass-rails\nsudo rbenv rehash\nsudo rails -v\n\n\npostgresql\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u3053\u3061\u3089\u3067\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u5f8c\u3001PostgreSQL Yum Repository\u306e\u9805\u76ee\u3092\u5b9f\u884c\u3002\n==RPM\u30ea\u30dd\u30b8\u30c8\u30ea\u3092ON\u306b\u3059\u308b\u3053\u3068\uff01==\n\nsu\n\nyum -y remove postgresql*\nyum -y install yum install postgresql-devel.x86_64 --enablerepo=rpmforge\nyum -y install http://yum.postgresql.org/9.4/redhat/rhel-6-x86_64/pgdg-redhat94-9.4-1.noarch.rpm --enablerepo=rpmforge\nyum -y install postgresql94-server postgresql94-contrib --enablerepo=rpmforge\nyum -y install nodejs npm --enablerepo=epel\nservice postgresql-9.4 initdb\nchkconfig postgresql-9.4 on\n\nsu - vagrant\n\nsudo gem install pg\n\n\npostgresql\u3092\u8abf\u6574\n\nsudo find / -name pg_hba.conf\nsudo vi /var/lib/pgsql/9.4/data/pg_hba.conf\n\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u5909\u66f4\n\n# \"local\" is for Unix domain socket connections only\nlocal   all             all                                     peer\n# IPv4 local connections:\nhost    all             all             127.0.0.1/32            ident\n# \u2193 \u4e0b\u8a18\u306e\u901a\u308a\u66f8\u304d\u63db\u3048\u308b(trust\u306f\u7121\u6761\u4ef6,md5\u304c\u63a8\u5968)\n# \"local\" is for Unix domain socket connections only\nlocal   all             all                                     trust\n# IPv4 local connections:\nhost    all             all             127.0.0.1/32            md5\nhost    all             all             10.0.0.0/8              md5\nhost    all             all             172.16.0.0/12           md5\nhost    all             all             192.168.0.0/16          md5\n\nsudo /etc/rc.d/init.d/postgresql-9.4 start\nsudo -u postgres psql\n\n\n\u3053\u3053\u307e\u3067\u3067postgresql\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306f\u5b8c\u4e86\u3002Rails\u3067\u4f7f\u3046\u5834\u5408\u306f\u8ffd\u52a0\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u3002\u7d9a\u304d\u306fRailsTechnics.md\u3092\u53c2\u7167\n\n\n6.7(\u30aa\u30d7\u30b7\u30e7\u30f3)VMware tools\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n==VMware ESXi\u4e0a\u306b\u3042\u308bVM\u306e\u5834\u5408\u3001ESXi\u30db\u30b9\u30c8\u304b\u3089\u96fb\u6e90\u30aa\u30f3/\u30aa\u30d5\u306a\u3069\u306e\u64cd\u4f5c\u3092\u884c\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081==\u3001VMware tools\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n6.5 \u7b2c6\u7ae0\u4ee5\u964d\u306e\u5168\u30b3\u30fc\u30c9\nVirtual Machine Setup.md.sh\u306b\u5168\u3066\u306e\u30b3\u30de\u30f3\u30c9\u3092\u8a18\u8f09\n\n7 \u958b\u767a\u74b0\u5883\u306e\u69cb\u7bc9\u5b8c\u4e86\n\nApache Storm\u3092\u5b9f\u884c\u3057\u305f\u3044\u3002\n\u3053\u3061\u3089\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u53c2\u7167\n#Virtual Machine\u57fa\u672c\u8a2d\u5b9a\n\n\n---\n==Docker\u30b3\u30f3\u30c6\u30ca\u306e\u5834\u5408\u306f\u3001\u7b2c6.5\u7ae0\u306e\u307f\u5b9f\u884c\u3059\u308b\u3053\u3068\u3002==\n---\n\n##1.CentOS6.6(Final)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n###1.1 Minimal Instration Disc\u3092\u4f7f\u3046\u3002\n/Users/soushi/OneDrive/ISO/CentOS-6.6-x86_64-\nminimal.iso\n\n##2.\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5468\u8fba\u8a2d\u5b9a\n###2.0 VMWare\u306e\u8a2d\u5b9a\u753b\u9762\u3067\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092Share with my Mac\u306b\u3059\u308b\u3002\n\n####2.0.1 VMWare->Preferences\n\n\n<img width=\"221\" alt=\"Virtual Machine Basis fig1.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/9023/4a95f323-a9e3-e66d-ba1b-3275848a7046.png\">\n\n####2.0.2 Share with my Mac\u3092\u9078\u629e\n\n<img width=\"572\" alt=\"Virtual Machine Basis fig3.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/9023/b7c95f52-2dc9-764c-9749-723885a42ff6.png\">\n\n###2.1 \u5404VM\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\u753b\u9762\u3067\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092Share with my Mac\u306b\u3059\u308b\u3002\n####2.1.1 \n\n###2.1 Network Manager\u3092\u30aa\u30d5\u306b\u3059\u308b\u3002\n\u203b\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u306f\u305a\u3002\u3053\u306e\u5834\u5408\u3001\u8ffd\u52a0\u306e\u8a2d\u5b9a\u306f\u4e0d\u8981\u3002\n\n~~~sh\nchkconfig --list NetworkManager\n#> error reading information on service NetworkManager: No such file or directory\n~~~\n\n\u8a2d\u5b9a\u304c\u5fc5\u8981\u306a\u5834\u5408\u3001\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\n\n~~~sh\nservice NetworkManager stop\nchkconfig NetworkManager off\nservice network restart\ncat /etc/sysconfig/network-scripts/ifcfg-eth0 | sed -i 's/NM_CONTROLLED=no/NM_CONTROLLED=yes/g'\n~~~\n\n###2.2 IP\u30a2\u30c9\u30ec\u30b9/\u30db\u30b9\u30c8\u540d/\u30c9\u30e1\u30a4\u30f3\u540d\u306e\u8a2d\u5b9a\n/etc/sysconfig/network-scripts/ifcfg-eth0\u3092\u7de8\u96c6\u3059\u308b\u3002\n\n~~~\nDEVICE=eth0\nONBOOT=yes\nHWADDR=VM\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a->Advanced option\n~~~\n\n~~~sh\nIPADDR=131.113.102.219\nNETMASK=255.255.255.128\nGATEWAY=131.113.102.129\nNAMESERVER=131.113.102.130\nBROADCASTADDR=131.113.102.255\nHOSTNAME=g2vm1\nDOMAINNAME=yamanaka.ics.keio.ac.jp\n\nsed -i -e '/BOOTPROTO=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"BOOTPROTO=static\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\nsed -i -e '/BOOTPROTO=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"BOOTPROTO=static\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\nsed -i -e '/IPADDR=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"IPADDR=$IPADDR\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\nsed -i -e '/NETMASK=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"NETMASK=$NETMASK\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\nsed -i -e '/GATEWAY=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"GATEWAY=$GATEWAY\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\nsed -i -e '/BROADCAST=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"BROADCAST=$BROADCASTADDR\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\nsed -i -e '/IPV6INIT=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"IPV6INIT=no\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\nsed -i -e '/PEERDNS=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"PEERDNS=no\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\n\nsed -i -e '/DOMAIN=.*/d' /etc/sysconfig/network-scripts/ifcfg-eth0;\necho \"DOMAIN=$DOMAINNAME\" >> /etc/sysconfig/network-scripts/ifcfg-eth0;\n\nsed -i -e '/domain.*/d' /etc/resolv.conf;\nsed -i -e '/search.*/d' /etc/resolv.conf;\necho \"search $DOMAINNAME\" >> /etc/resolv.conf;\n\nsed -i -e '/nameserver.*/d' /etc/resolv.conf;\necho \"nameserver $NAMESERVER\" >> /etc/resolv.conf;\n\nsed -i -e '/NETWORKING=.*/d' /etc/sysconfig/network;\necho \"NETWORKING=yes\" >> /etc/sysconfig/network;\nsed -i -e '/HOSTNAME=.*/d' /etc/sysconfig/network;\necho \"HOSTNAME=$HOSTNAME.$DOMAINNAME\" >> /etc/sysconfig/network;\n\nsed -i -e '/127\\.0\\.0\\.1.*/d' /etc/hosts;\necho \"127.0.0.1    $HOSTNAME.$DOMAINNAME $HOSTNAME localhost.localdomain localhost\" >> /etc/hosts\nsed -i -e '/\\:\\:1.*/d' /etc/hosts\necho \"::1    $HOSTNAME.$DOMAINNAME $HOSTNAME localhost.localdomain localhost\" >> /etc/hosts\nreboot;\n~~~\n\n##3 \u8a2d\u5b9a\u5024\u306e\u78ba\u8a8d\n###3.1 \u30db\u30b9\u30c8\u540d\u30fb\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u78ba\u8a8d\n\u203bdomainname\u306f(none)\u3067OK\u3002\u3053\u306e\u8a2d\u5b9a\u5024\u306f[\u4e0d\u8981](http://www.atmarkit.co.jp/bbs/phpBB/viewtopic.php?topic=32230&forum=10)\u3068\u306a\u3063\u305f\u3002\n\n~~~sh\nhostname\n#>vm1.soushi.jp\nhostname -d\n#>soushi.jp\nifconfig\n~~~\n\n##4 OpenSSH\u306e\u5c0e\u5165\n###4.1 yum\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\n\n~~~sh\nyum update\nyum check-update\nyum -y install openssh-clients\n~~~\n\n###4.2 \u30e6\u30fc\u30b6\u30fcsoushi\u3092\u8ffd\u52a0\u3059\u308b\n\u3053\u3061\u3089\u306e[\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u53c2\u7167](./Linux\u306e\u30e6\u30fc\u30b6\u30fc\u8ffd\u52a0\u301cssh\u516c\u958b\u9375\u8ffd\u52a0\u307e\u3067.md)\n\n\n\n###4.2.2 \u9375\u8a8d\u8a3c\u63a5\u7d9a\u3092\u30c6\u30b9\u30c8\u3057\u307e\u3059\u3002\n\u203b\u30ed\u30fc\u30ab\u30eb\u7aef\u672b\u3067\u5b9f\u884c\n\n~~~sh\nssh soushi@$server\nexit\n~~~\n\n\n###4.4 SSH\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u3092\u9375\u8a8d\u8a3c\u306e\u307f\u8a31\u53ef\u3059\u308b\n\n#### SSH2\u306b\u3088\u308b\u63a5\u7d9a\u306e\u307f\u8a31\u53ef\n~~~sh\nsudo sed -i -e 's/^Protocol/#Protocol/g' /etc/ssh/sshd_config\nsudo sed -i -e '/^#Protocol/a Protocol 2' /etc/ssh/sshd_config\n\n#### RSA\u516c\u958b\u9375\u306b\u3088\u308b\u8a8d\u8a3c\nsudo sed -i -e 's/^RSAAuthentication/#RSAAuthentication/g' /etc/ssh/sshd_config\nsudo sed -i -e '/^#RSAAuthentication/a RSAAuthentication yes' /etc/ssh/sshd_config\n\n#### rhosts\u3067\u306e\u8a8d\u8a3c\u3092\u7981\u6b62\nsudo sed -i -e 's/^RhostsRSAAuthentication/#RhostsRSAAuthentication/g' /etc/ssh/sshd_config\nsudo sed -i -e '/^#RhostsRSAAuthentication/a RhostsRSAAuthentication no' /etc/ssh/sshd_config\n\n#### \u30d1\u30b9\u30ef\u30fc\u30c9\u3067\u306e\u8a8d\u8a3c\u3092\u7981\u6b62\uff08\u516c\u958b\u9375\u306b\u3088\u308b\u8a8d\u8a3c\u306e\u307f\u306b\u3059\u308b\uff09\nsudo sed -i -e 's/^PermitEmptyPasswords/#PermitEmptyPasswords/g' /etc/ssh/sshd_config\nsudo sed -i -e '/^#PermitEmptyPasswords/a PermitEmptyPasswords no' /etc/ssh/sshd_config\nsudo sed -i -e 's/^PasswordAuthentication/#PasswordAuthentication/g' /etc/ssh/sshd_config\nsudo sed -i -e '/^#PasswordAuthentication/a PasswordAuthentication no' /etc/ssh/sshd_config\n\n#### \u30c1\u30e3\u30ec\u30f3\u30b8/\u30ec\u30b9\u30dd\u30f3\u30b9\u8a8d\u8a3c\u3092\u7121\u52b9\u5316\u3059\u308b\nsudo sed -i -e 's/^ChallengeResponseAuthentication/#ChallengeResponseAuthentication/g' /etc/ssh/sshd_config\nsudo sed -i -e '/^#ChallengeResponseAuthentication/a ChallengeResponseAuthentication no' /etc/ssh/sshd_config\n\n#### \u8a2d\u5b9a\u3092\u53cd\u6620\nsudo service sshd restart\n~~~\n\n#### (\u30aa\u30d7\u30b7\u30e7\u30f3)VMware ESXi\u4e0a\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u5834\u5408\u3001\u4e0b\u8a18\u3092\u5b9f\u884c\u3057\u3066MAC\u30a2\u30c9\u30ec\u30b9\u306e\u5024\u3092\u9069\u5207\u306a\u5024\u306b\u66f8\u304d\u63db\u3048\u308b\u3053\u3068\u3002\n#####1 \u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n~~~sh\nscp ~/OneDrive/Scripts/ConfigureMACaddressForVMsOnESXi.sh root@$IPADDR:~/vmwarenetrewrite\n~~~\n\n#####2 VM\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002\n~~~sh\nssh -i ~/OneDrive/.ssh/id_rsa root@$IPADDR\n~~~\n\n#####3 \u8a2d\u5b9a\u3092\u66f8\u304d\u8fbc\u307f\u307e\u3059\u3002\n==(\u6b21\u56de\u306e\u518d\u8d77\u52d5\u6642\u306b\u9069\u5207\u306aMAC\u30a2\u30c9\u30ec\u30b9\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002)==\n\n~~~sh\nchmod +x /root/vmwarenetrewrite\necho \"/root/vmwarenetrewrite\" >> /etc/rc.d/rc.local\n~~~\n\n#### (\u30aa\u30d7\u30b7\u30e7\u30f3)\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u3001root\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u3092\u7981\u6b62\u3057\u307e\u3059\u3002\n~~~sh\n#### root\u3067\u306e\u8a8d\u8a3c\u3092\u7981\u6b62\nsudo sed -i -e 's/^PermitRootLogin/#PermitRootLogin/g' /etc/ssh/sshd_config\nsudo sed -i -e '/^#PermitRootLogin/a PermitRootLogin no' /etc/ssh/sshd_config\n~~~\n\n##5 \u5b9f\u9a13\u7528\u8a2d\u5b9a\n###5.2 ipv6, iptables, SELINUX\u3092\u7121\u52b9\u306b\u3059\u308b\u3002\n\n~~~sh\nsudo echo 'options ipv6 disable=1' > /etc/modprobe.d/disable-ipv6.conf\nsudo service iptables stop\nsudo chkconfig iptables off\nsudo chkconfig ip6tables off\nsudo sed -i -e 's/^SELINUX=/#SELINUX=/g' /etc/selinux/config;\nsudo sed -i -e '/^#SELINUX/a SELINUX=disabled' /etc/selinux/config;\nsudo setenforce 0\n~~~\n\n##6 \u958b\u767a\u74b0\u5883\u306e\u5c0e\u5165\n==\u203broot\u30e6\u30fc\u30b6\u30fc\u3067\u884c\u3046\u3002==\n\n###6.1 \u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\n\u203b/etc/profile\u306b\u3001LANG\u3068LC_ALL\u306e\u74b0\u5883\u5909\u6570\u3092\u66f8\u304d\u8fbc\u3093\u3067\u304a\u304f\u3002\n\n~~~sh\nsudo sed -i \"s/^\\(LANG.*\\)/#\\1/g\" /etc/sysconfig/i18n\nsudo echo 'LANG=en_US.utf8' >> /etc/sysconfig/i18n\nsudo echo 'LC_CTYPE=en_US.utf8' >> /etc/sysconfig/i18n\nsudo echo 'LC_NUMERIC=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_TIME=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_COLLATE=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_MONETARY=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_MESSAGES=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_PAPER=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_NAME=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_ADDRESS=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_TELEPHONE=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_MEASUREMENT=\"en_US.utf8\"' >> /etc/sysconfig/i18n\nsudo echo 'LC_IDENTIFICATION=\"en_US.utf8\"' >> /etc/sysconfig/i18n\n~~~\n\n###6.2 C\u30b3\u30f3\u30d1\u30a4\u30e9\u304a\u3088\u3073\u305d\u306e\u4ed6\u30c4\u30fc\u30eb\u3092\u5c0e\u5165\n\n- IPv6\u306eSingle Request Reopen\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002\u7406\u7531\u306f[\u3053\u3061\u3089](http://www.kunitake.org/chalow/2012-11-02-1.html)\n\n- \u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u4ee5\u5916\u306eCentOS\u3067\u306f\u3001\u4e0b\u8a18\u3092\u884c\u3046\u3053\u3068\u3002\n\n~~~sh\nsudo sed -i -e \"s|mirror\\.centos\\.org/centos/\\$releasever|vault\\.centos\\.org/6.6|g\" /etc/yum.repos.d/CentOS-Base.repo\nsudo sed -i -e \"s|#baseurl=|baseurl=|g\" /etc/yum.repos.d/CentOS-Base.repo\nsudo sed -i -e \"s|mirrorlist=|#mirrorlist=|g\" /etc/yum.repos.d/CentOS-Base.repo\necho 'options single-request-reopen' >> /etc/resolv.conf\n~~~\n\n~~~sh\nyum -y update\n~~~\n\n- \u30ab\u30fc\u30cd\u30eb\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u304c\u542b\u307e\u308c\u3066\u3044\u305f\u5834\u5408\u3001\u4e00\u65e6\u3053\u3053\u3067\u518d\u8d77\u52d5\u3002\n\n~~~sh\nshutdown -r now\n~~~\n\n~~~sh\nLANG=C yum -y groupinstall \"Development tools\"\nyum -y install man man-pages man-pages-overrides man-pages-ja\nyum -y check-update\nyum -y install gcc*\nyum -y install gcc gcc-c++\nyum -y install which\nyum -y install tcpdump\nyum -y install uuid*\nyum -y install e2fsprogs*\nyum -y install libuuid*\nyum -y install libtool*\nyum -y install tree\nyum -y install wget\nyum -y install git\nyum -y install unzip\nyum -y install python\nyum -y install perl\nyum -y install tar\nyum -y install ruby\nyum -y install traceroute\nyum -y install nmap\nyum -y install man\nyum -y install jq\nyum -y install nc\nyum -y install screen\nyum -y install openssh\nyum -y install openssh-server\nyum -y install openssh-clients\nyum -y install nethogs\nyum -y install openssl-devel\nyum -y install readline-devel zlib-devel\nyum -y install libffi-devel\nyum -y --enablerepo=epel,remi,rpmforge install libxml2 libxml2-devel\nyum -y --enablerepo=epel,remi,rpmforge install libxslt libxslt-devel\n\nmkdir /usr/local/download\ncd /usr/local/download\nwget http://launchpad.net/byobu/trunk/3.16/+download/byobu_3.16.orig.tar.gz\ntar zxvf byobu_3.16.orig.tar.gz\ncd byobu-3.16\n./configure --prefix=\"/usr/local/byobu\"\nmake\nmake install\necho 'export PATH=$PATH:/usr/local/byobu/bin' >> /etc/profile\nexport PATH=$PATH:/usr/local/byobu/bin\n~~~\n\n###6.3 ntpd\u3092\u5c0e\u5165\n\n~~~sh\nyum -y install ntp\nchkconfig ntpd on\necho \"restrict 133.243.238.163 mask 255.255.255.255 nomodify notrap noquery\" >> /etc/ntp.conf\necho \"restrict 133.243.238.164 mask 255.255.255.255 nomodify notrap noquery\" >> /etc/ntp.conf\necho \"restrict 133.243.238.243 mask 255.255.255.255 nomodify notrap noquery\" >> /etc/ntp.conf\necho \"restrict 133.243.238.244 mask 255.255.255.255 nomodify notrap noquery\" >> /etc/ntp.conf\necho \"server ntp.nict.jp\" >> /etc/ntp.conf\nservice ntpd restart\nntpq -p\necho \"# \u6bce\u671d5\u6642\u306b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30af\u30ed\u30c3\u30af\u304c\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30af\u30ed\u30c3\u30af\u306b\u53cd\u6620\" >> /etc/crontab\necho \"0 5 * * 0 root /sbin/hwclock -w > /dev/null 2>&1\" >> /etc/crontab\n~~~\n\n###6.4 Fedora EPEL, remi, RPMForge\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092yum\u306b\u8ffd\u52a0\u3059\u308b\u3002\n####6.4.1 \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9(CentOS6\u306e\u5834\u5408)\n\n~~~sh\nmkdir /usr/local/download\ncd /usr/local/download\nwget http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm\nwget wget http://rpms.famillecollet.com/enterprise/remi-release-6.rpm\nwget http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm\n~~~\n####6.4.2 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n~~~sh\nrpm -Uvh epel-release-6-8.noarch.rpm remi-release-6.rpm rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm\n~~~\n\n####6.4.3 \u8a2d\u5b9a\n\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u8ffd\u52a0\u3067\u304d\u305f\u3089\u3001\u305d\u308c\u305e\u308c\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u3044\u3063\u305f\u3093\u7121\u52b9\u5316\u3057\u307e\u3059\u3002\n\u5177\u4f53\u7684\u306b\u8a00\u3046\u3068\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306eenabled\u3068\u3044\u3046\u9805\u76ee\u30920\u306b\u5909\u66f4\u3057\u3001yum\u5b9f\u884c\u6642\u306b\u660e\u793a\u7684\u306b\u6307\u5b9a\u3055\u308c\u306a\u3044\u9650\u308a\u3001\u65b0\u305f\u306b\u8ffd\u52a0\u3057\u305f\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u5229\u7528\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u3001remi\u306f\u3082\u3068\u3082\u3068enabled=0\u3068\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001Fedora EPEL\u3068RPMForge\u306e\u307fvi\u30b3\u30de\u30f3\u30c9\u3067\u7de8\u96c6\u3057\u307e\u3059\u3002\n\u203b\u610f\u56f3\u305b\u305a\u3001\u6a19\u6e96\u5916\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\uff08\u4eca\u56de\u8ffd\u52a0\u3057\u305f\u30ea\u30dd\u30b8\u30c8\u30ea\uff09\u304c\u4f7f\u308f\u308c\u306a\u3044\u305f\u3081\u306e\u5bfe\u7b56\u3067\u3059\u3002\n\n#####6.4.3.1 /etc/yum.repos.d/epel.repo\u306eenabled\u30920\u306b\u5909\u66f4\u3002\n~~~sh\nsed -i -e 's/^enabled/#enabled=/g' /etc/yum.repos.d/epel.repo\nsed -i -e '/^#enabled/a enabled=0' /etc/yum.repos.d/epel.repo\n~~~\n\n#####6.4.3.2 [rpmforge]\u306eenabled\u30920\u306b\u5909\u66f4\u3002\n~~~sh\nsed -i -e 's/^enabled/#enabled=/g' /etc/yum.repos.d/rpmforge.repo\nsed -i -e '/^#enabled/a enabled=0' /etc/yum.repos.d/rpmforge.repo\n~~~\n\n#####6.4.4 \u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f7f\u3046\u3068\u304d\n\n~~~sh\nyum -y --enablerepo=remi,epel,rpmforge install <<\u30d1\u30c3\u30b1\u30fc\u30b8\u540d>>\n~~~\n\n###6.5 tmux\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n~~~sh\nyum -y --enablerepo=rpmforge install tmux\n~~~\n\n###6.6 \u305d\u306e\u4ed6\u4fbf\u5229\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n~~~sh\n# python\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u30bd\u30d5\u30c8pip\nyum -y --enablerepo=\"epel\" install python-pip\n# \u30ab\u30e9\u30fc\u30ea\u30f3\u30b0\u304c\u884c\u3048\u308bcat\u3001Pygments\nsudo yes | pip install pygments\necho \"alias ccat='pygmentize -g'\" >> /etc/profile\n~~~\n\n###6.7 Ruby on Rails\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n- rbenv\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(\u30b7\u30b9\u30c6\u30e0\u30ef\u30a4\u30c9\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059)\n- \u307e\u305a sudoers \u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n- \u30c7\u30d5\u30a9\u30eb\u30c8\u3067 PATH \u304c\u53c2\u7167\u3057\u306a\u3044\u5834\u6240\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u306e\u3067\u3001sudo \u304c\u305d\u308c\u3092\u8a8d\u8b58\u3057\u306a\u3044\u3068\u56f0\u308a\u307e\u3059\u3002.profile \u7b49\u3067\u64cd\u4f5c\u30e6\u30fc\u30b6\u306e PATH \u3092\u5909\u66f4\u3057\u3066\u3082\u901a\u5e38\u306f sudo \u306f\u305d\u308c\u3092\u8a8d\u8b58\u3057\u3066\u304f\u308c\u307e\u305b\u3093\u306e\u3067\u3001\u64cd\u4f5c\u30e6\u30fc\u30b6\u306e PATH \u3092 sudo \u304c\u5f15\u304d\u7d99\u3052\u308b\u3088\u3046\u306b sudoers \u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n~~~sh\nsudo visudo\n~~~\n\n~~~\n# :/usr/local/rbenv/bin:/usr/local/rbenv/shims\u306e2\u3064\u3092\u8ffd\u8a18\u3059\u308b\nDefaults secure_path=<\u73fe\u5728secure_path\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5024>:/usr/local/rbenv/bin:/usr/local/rbenv/shims\nDefaults env_keep += \"PATH RBENV_ROOT\"\n~~~\n\n- /usr/local/rbenv \u306b rbenv \u304a\u3088\u3073 rbenv \u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u3057\u3066 ruby-build \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n- \u4ee5\u5f8c\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3059\u308b\u5834\u5408\u306f\u305d\u308c\u305e\u308c\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3066 sudo git pull \u3059\u308c\u3070\u7c21\u5358\u306b\u6700\u65b0\u7248\u306b\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n~~~sh\nexport RBENV_ROOT=/usr/local/rbenv\nexport PATH=${RBENV_ROOT}/bin:${PATH}\nsudo git clone git://github.com/sstephenson/rbenv.git ${RBENV_ROOT}\nsudo git clone git://github.com/sstephenson/ruby-build.git ${RBENV_ROOT}/plugins/ruby-build\n~~~\n\n- \u914d\u7f6e\u304c\u3067\u304d\u305f\u3089 rbenv \u306e\u521d\u671f\u8a2d\u5b9a(\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4f5c\u6210\u7b49)\u3092\u884c\u3044\u307e\u3059\u3002rbenv\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3060\u3068 .profile \u306b\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u81ea\u52d5\u5316\u3057\u3066\u307e\u3059\u304c\u3001\u4eca\u56de\u306e\u74b0\u5883\u3067\u306f root \u6a29\u9650\u304c\u306a\u3044\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u3001\u4e88\u3081\u624b\u52d5\u3067\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n~~~sh\nsudo rbenv init -\n~~~\n\n- \u6700\u5f8c\u306b\u3001rbenv \u3092\u81ea\u5206\u306e\u74b0\u5883\u304b\u3089\u547c\u3079\u308b\u3088\u3046\u3001.profile \u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n~~~sh\nsu - vagrant\n~~~\n\n~~~sh\nbash -c 'cat <<\\__EOT__ >> ~/.bash_profile\nexport RBENV_ROOT=\"/usr/local/rbenv\"\nexport PATH=\"${RBENV_ROOT}/bin:${PATH}\"\neval \"$(rbenv init -)\"\n__EOT__'\n~~~\n\n~~~sh\nsu -\n~~~\n\n~~~sh\nbash -c 'cat <<\\__EOT__ >> ~/.bash_profile\nexport RBENV_ROOT=\"/usr/local/rbenv\"\nexport PATH=\"${RBENV_ROOT}/bin:${PATH}\"\neval \"$(rbenv init -)\"\n__EOT__'\n~~~\n\n- \u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u305f\u3089\u30b7\u30a7\u30eb\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n~~~sh\nexec ${SHELL} -l\nsudo rbenv install -l\n~~~\n\n- Ruby\u306e\u6700\u65b0\u7248(2.2.3)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n- Ruby \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5834\u5408\u306f\u3001sudo \u3092\u901a\u3057\u3066 renv install \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n~~~sh\nsudo rbenv install 2.2.3\nsudo rbenv versions\nsudo rbenv global 2.2.3\nsudo rbenv version\nsudo rbenv rehash\n~~~\n\n- Rails\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n~~~\nsudo gem install nokogiri -- --use-system-libraries\nsudo gem update --system\nsudo gem install --no-ri --no-rdoc rails\nsudo gem install bundler\nsudo gem install compass-rails\nsudo rbenv rehash\nsudo rails -v\n~~~\n\n- postgresql\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n- [\u3053\u3061\u3089\u3067\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d](http://www.postgresql.org/download/linux/redhat/)\u5f8c\u3001PostgreSQL Yum Repository\u306e\u9805\u76ee\u3092\u5b9f\u884c\u3002\n- ==RPM\u30ea\u30dd\u30b8\u30c8\u30ea\u3092ON\u306b\u3059\u308b\u3053\u3068\uff01==\n\n~~~sh\nsu\n~~~\n\n~~~sh\nyum -y remove postgresql*\nyum -y install yum install postgresql-devel.x86_64 --enablerepo=rpmforge\nyum -y install http://yum.postgresql.org/9.4/redhat/rhel-6-x86_64/pgdg-redhat94-9.4-1.noarch.rpm --enablerepo=rpmforge\nyum -y install postgresql94-server postgresql94-contrib --enablerepo=rpmforge\nyum -y install nodejs npm --enablerepo=epel\nservice postgresql-9.4 initdb\nchkconfig postgresql-9.4 on\n~~~\n\n~~~sh\nsu - vagrant\n~~~\n\n~~~sh\nsudo gem install pg\n~~~\n\n- postgresql\u3092\u8abf\u6574\n\n~~~sh\nsudo find / -name pg_hba.conf\nsudo vi /var/lib/pgsql/9.4/data/pg_hba.conf\n~~~\n\n- \u4e0b\u8a18\u306e\u3088\u3046\u306b\u5909\u66f4\n\n~~~\n# \"local\" is for Unix domain socket connections only\nlocal   all             all                                     peer\n# IPv4 local connections:\nhost    all             all             127.0.0.1/32            ident\n# \u2193 \u4e0b\u8a18\u306e\u901a\u308a\u66f8\u304d\u63db\u3048\u308b(trust\u306f\u7121\u6761\u4ef6,md5\u304c\u63a8\u5968)\n# \"local\" is for Unix domain socket connections only\nlocal   all             all                                     trust\n# IPv4 local connections:\nhost    all             all             127.0.0.1/32            md5\nhost    all             all             10.0.0.0/8              md5\nhost    all             all             172.16.0.0/12           md5\nhost    all             all             192.168.0.0/16          md5\n~~~\n\n~~~sh\nsudo /etc/rc.d/init.d/postgresql-9.4 start\nsudo -u postgres psql\n~~~\n\n- \u3053\u3053\u307e\u3067\u3067postgresql\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306f\u5b8c\u4e86\u3002Rails\u3067\u4f7f\u3046\u5834\u5408\u306f\u8ffd\u52a0\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u3002\u7d9a\u304d\u306f[RailsTechnics.md](./RailsTechnics.md)\u3092\u53c2\u7167\n\n###6.7(\u30aa\u30d7\u30b7\u30e7\u30f3)VMware tools\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n==VMware ESXi\u4e0a\u306b\u3042\u308bVM\u306e\u5834\u5408\u3001ESXi\u30db\u30b9\u30c8\u304b\u3089\u96fb\u6e90\u30aa\u30f3/\u30aa\u30d5\u306a\u3069\u306e\u64cd\u4f5c\u3092\u884c\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081==\u3001VMware tools\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n##6.5 \u7b2c6\u7ae0\u4ee5\u964d\u306e\u5168\u30b3\u30fc\u30c9\n\n[Virtual Machine Setup.md.sh](/Users/soushi/OneDrive/Scripts/Virtual Machine Setup.md.sh)\u306b\u5168\u3066\u306e\u30b3\u30de\u30f3\u30c9\u3092\u8a18\u8f09\n\n\n##7 \u958b\u767a\u74b0\u5883\u306e\u69cb\u7bc9\u5b8c\u4e86\n###Apache Storm\u3092\u5b9f\u884c\u3057\u305f\u3044\u3002\n\u3053\u3061\u3089\u306e[\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u53c2\u7167](/Users/soushi/OneDrive/Manuals/Apache Storm.md)\n"}