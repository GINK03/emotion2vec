{"context": "\n\n\u6982\u8981\n\u524d\u56de\u306e\u8a18\u4e8b\u306b\u5f15\u304d\u7d9a\u3044\u3066Slim\u3092\u89e6\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\u4eca\u56de\u306fMySQL\u306b\u63a5\u7d9a\u3057\u3066DB\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u8a2d\u5b9a\n\u307e\u305a\u306f\u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u8003\u306b\u3057\u3001DSN\u60c5\u5831\u3092setting.php\u306b\u8a18\u8f09\u3057\u307e\u3059\u3002\n\nsrc/setting.php\n// db\u63a5\u7d9a\u60c5\u5831\n'db' => [\n    'host'   => 'localhost',\n    'user'   => '\u30e6\u30fc\u30b6\u540d',\n    'pass'   => '\u30d1\u30b9\u30ef\u30fc\u30c9',\n    'dbname' => 'DB\u540d',\n]\n\n\n\u6b21\u306b\u3001DB\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u751f\u6210\u3092\u884c\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306f\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3068\u540c\u69d8\u306bPDO\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\nsrc/dependencies.php\n// DB\u63a5\u7d9a\n$container['db'] = function ($c) {\n    $dsn = 'mysql:host=%s;dbname=%s;charset=utf8mb4'\n    $db  = $c['settings']['db'];\n    $pdo = new PDO(sprintf($dsn, $db['host'], $db['dbname']),\n        $db['user'], $db['pass']);\n    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n    $pdo->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);\n    return $pdo;\n};\n\n\n\u3053\u308c\u3067\u6e96\u5099\u306f\u6574\u3044\u307e\u3057\u305f\u3002\n\u305d\u308c\u3067\u306f\u5b9f\u969b\u306bDB\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u30c7\u30fc\u30bf\u53d6\u5f97\n\u4eca\u56de\u306f\u30d6\u30ed\u30b0\u306e\u4ef6\u540d\u3068\u767b\u9332\u5185\u5bb9\u3092\u683c\u7d0d\u3057\u305fposts\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u5148\u7a0b\u751f\u6210\u3057\u305fDB\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u3001routes.php\u5185\u3067$this->db\u3068\u3057\u3066\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\nsrc/routes.php\n// \u30d6\u30ed\u30b0\u767b\u9332\u5185\u5bb9\u53d6\u5f97\n$app->get('/blog', function ($request, $response, $args) {\n\n    $sql = 'SELECT * FROM posts';\n    $query = $this->db->prepare($sql);\n    $query->execute();\n\n    $data = $query->fetchAll(PDO::FETCH_ASSOC);\n\n    var_dump($data);\n});\n\n\n\u5b9f\u969b\u306b\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306b\u30c7\u30fc\u30bf\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u307e\u3057\u305f\u3002\narray \n  0 => \n    array\n      'id' => string '1'\n      'title' => string '???'\n      'body' => string '???lol'\n      'created' => string '2016-03-03 01:49:06'\n      'modify' => string '2016-03-11 02:25:00'\n\n\u306a\u305c\u304b\u30de\u30eb\u30c1\u30d0\u30a4\u30c8\u304c\u6587\u5b57\u5316\u3051\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u30c7\u30fc\u30bf\u53d6\u5f97\u81ea\u4f53\u306f\u51fa\u6765\u305f\u306e\u3067\u4eca\u56de\u306f\u3053\u3053\u307e\u3067\u3068\u3057\u307e\u3059\u3002\n\n\u8ffd\u8a18\n\u30de\u30eb\u30c1\u30d0\u30a4\u30c8\u306e\u6587\u5b57\u5316\u3051\u306f\u30b3\u30e1\u30f3\u30c8\u306b\u3066\u3054\u6307\u6458\u9802\u3044\u305f\u3088\u3046\u306bcharset\u306e\u6307\u5b9a\u6f0f\u308c\u3067\u3057\u305f\u3002\n\u3061\u3083\u3093\u3068charset\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u6587\u5b57\u5316\u3051\u306f\u89e3\u6d88\u3055\u308c\u307e\u3057\u305f\u3002\narray \n  0 => \n    array\n      'id' => string '1'\n      'title' => string '\u30c6\u30b9\u30c8'\n      'body' => string '\u30c6\u30b9\u30c8lol'\n      'created' => string '2016-03-03 01:49:06'\n      'modify' => string '2016-03-11 02:25:00'\n\n\n## \u6982\u8981\n[\u524d\u56de\u306e\u8a18\u4e8b](http://qiita.com/juve_534/items/79877a0cf0b0b6b8298c)\u306b\u5f15\u304d\u7d9a\u3044\u3066Slim\u3092\u89e6\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u4eca\u56de\u306fMySQL\u306b\u63a5\u7d9a\u3057\u3066DB\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n## \u8a2d\u5b9a\n\u307e\u305a\u306f[\u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://www.slimframework.com/docs/tutorial/first-app.html)\u3092\u53c2\u8003\u306b\u3057\u3001DSN\u60c5\u5831\u3092setting.php\u306b\u8a18\u8f09\u3057\u307e\u3059\u3002\n\n```src/setting.php\n// db\u63a5\u7d9a\u60c5\u5831\n'db' => [\n    'host'   => 'localhost',\n    'user'   => '\u30e6\u30fc\u30b6\u540d',\n    'pass'   => '\u30d1\u30b9\u30ef\u30fc\u30c9',\n    'dbname' => 'DB\u540d',\n]\n```\n\n\u6b21\u306b\u3001DB\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u751f\u6210\u3092\u884c\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306f\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3068\u540c\u69d8\u306bPDO\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n```src/dependencies.php\n// DB\u63a5\u7d9a\n$container['db'] = function ($c) {\n    $dsn = 'mysql:host=%s;dbname=%s;charset=utf8mb4'\n    $db  = $c['settings']['db'];\n    $pdo = new PDO(sprintf($dsn, $db['host'], $db['dbname']),\n        $db['user'], $db['pass']);\n    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n    $pdo->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);\n    return $pdo;\n};\n```\n\u3053\u308c\u3067\u6e96\u5099\u306f\u6574\u3044\u307e\u3057\u305f\u3002\n\u305d\u308c\u3067\u306f\u5b9f\u969b\u306bDB\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n## \u30c7\u30fc\u30bf\u53d6\u5f97\n\u4eca\u56de\u306f\u30d6\u30ed\u30b0\u306e\u4ef6\u540d\u3068\u767b\u9332\u5185\u5bb9\u3092\u683c\u7d0d\u3057\u305fposts\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u5148\u7a0b\u751f\u6210\u3057\u305fDB\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u3001routes.php\u5185\u3067$this->db\u3068\u3057\u3066\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\n```src/routes.php\n// \u30d6\u30ed\u30b0\u767b\u9332\u5185\u5bb9\u53d6\u5f97\n$app->get('/blog', function ($request, $response, $args) {\n\n    $sql = 'SELECT * FROM posts';\n    $query = $this->db->prepare($sql);\n    $query->execute();\n\n    $data = $query->fetchAll(PDO::FETCH_ASSOC);\n\n    var_dump($data);\n});\n```\n\n\u5b9f\u969b\u306b\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306b\u30c7\u30fc\u30bf\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u307e\u3057\u305f\u3002\n\n```\narray \n  0 => \n    array\n      'id' => string '1'\n      'title' => string '???'\n      'body' => string '???lol'\n      'created' => string '2016-03-03 01:49:06'\n      'modify' => string '2016-03-11 02:25:00'\n```\n\n\u306a\u305c\u304b\u30de\u30eb\u30c1\u30d0\u30a4\u30c8\u304c\u6587\u5b57\u5316\u3051\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u30c7\u30fc\u30bf\u53d6\u5f97\u81ea\u4f53\u306f\u51fa\u6765\u305f\u306e\u3067\u4eca\u56de\u306f\u3053\u3053\u307e\u3067\u3068\u3057\u307e\u3059\u3002\n\n## \u8ffd\u8a18\n\u30de\u30eb\u30c1\u30d0\u30a4\u30c8\u306e\u6587\u5b57\u5316\u3051\u306f\u30b3\u30e1\u30f3\u30c8\u306b\u3066\u3054\u6307\u6458\u9802\u3044\u305f\u3088\u3046\u306bcharset\u306e\u6307\u5b9a\u6f0f\u308c\u3067\u3057\u305f\u3002\n\u3061\u3083\u3093\u3068charset\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u6587\u5b57\u5316\u3051\u306f\u89e3\u6d88\u3055\u308c\u307e\u3057\u305f\u3002\n\n```\narray \n  0 => \n    array\n      'id' => string '1'\n      'title' => string '\u30c6\u30b9\u30c8'\n      'body' => string '\u30c6\u30b9\u30c8lol'\n      'created' => string '2016-03-03 01:49:06'\n      'modify' => string '2016-03-11 02:25:00'\n```\n", "tags": ["slimphp", "Slim3", "PHP", "MySQL"]}