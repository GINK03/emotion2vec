{"context": "\n\n\u30e1\u30cb\u30e5\u30fc\n\n\u6ce8\u610f\n\n\u8cc7\u6599\u306e\u898b\u65b9\n\u4e8b\u524d\u6e96\u5099\u306b\u3064\u3044\u3066\n\u8cc7\u6599\u5185\u3067\u7d39\u4ecb\u3059\u308b\u5404\u7a2e\u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3064\u3044\u3066\n\u5f8c\u7247\u4ed8\u3051\u306f\u3057\u3063\u304b\u308a\u3068\n\n\n\u53c2\u8003\u8cc7\u6599\n\n\u53c2\u8003 URL\n\u53c2\u8003\u66f8\u7c4d\n\n\n1. \u4e8b\u524d\u6e96\u5099\n1-1. Docker Engine \u3092\u52d5\u304b\u3059\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3059\u308b\n1-2. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b SSH \u3067\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n1-3. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b HTTP \u3067\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n\n2. \u6e96\u5099\u904b\u52d5\n2-1. Docker Engine \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n2-2. \u521d\u3081\u3066\u306e docker run\n2-3. \u521d\u3081\u3066\u306e docker build \u304b\u3089\u306e docker run\n\n\n\u6ce8\u610f\n\n\u8cc7\u6599\u306e\u898b\u65b9\n\u4ee5\u4e0b\u3001\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306e\u8868\u793a\u3067\u3059\u3002\n\ncommand\n# \u30b3\u30e1\u30f3\u30c8\u3067\u3059\n\n# \u30cf\u30f3\u30ba\u30aa\u30f3\u5185\u3067\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3067\u3059\uff08\u30b3\u30d4\u30fc\uff06\u30da\u30fc\u30b9\u30c8\u3067\u8cbc\u308a\u4ed8\u3051\u3066\u5229\u7528\u3057\u3066\u4e0b\u3055\u3044\uff09\ncommand \"foo\" \"bar\"\n\n\n\u4ee5\u4e0b\u3001\u51fa\u529b\u4f8b\u306e\u8868\u793a\u3067\u3059\u3002\n\noutput\n# \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u5f8c\u306e\u51fa\u529b\u4f8b\u3067\u3059\n\n\n\u4e0a\u8a18\u306b\u5b9f\u884c\u4f8b\u3068\u7570\u306a\u308b\u51fa\u529b\u3092\u78ba\u8a8d\u3057\u305f\u5834\u5408\u306b\u306f\u304a\u58f0\u304c\u3051\u4e0b\u3055\u3044\u3002\n\n\u4e8b\u524d\u6e96\u5099\u306b\u3064\u3044\u3066\n\n\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u5186\u6ed1\u306b\u9032\u3081\u308b\u306b\u3042\u305f\u3063\u3066\u4e8b\u524d\u6e96\u5099\u306f\u51fa\u6765\u308b\u3060\u3051\u884c\u3046\u3088\u3046\u306b\u3057\u3066\u4e0b\u3055\u3044\n\n\n\u8cc7\u6599\u5185\u3067\u7d39\u4ecb\u3059\u308b\u5404\u7a2e\u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3064\u3044\u3066\n\u8cc7\u6599\u5185\u3067\u7d39\u4ecb\u3059\u308b\u5404\u7a2e\u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\nOS\n\n\noutput\n$ cat /etc/lsb-release \nDISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=14.04\nDISTRIB_CODENAME=trusty\nDISTRIB_DESCRIPTION=\"Ubuntu 14.04.3 LTS\"\n\n\n\nDocker Engine\n\n\noutput\n$ docker version\nClient:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 15:54:52 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 15:54:52 2016\n OS/Arch:      linux/amd64\n\n\n\nDocker Compose\n\n\noutput\n$ docker-compose version\ndocker-compose version 1.6.2, build 4d72027\ndocker-py version: 1.7.2\nCPython version: 2.7.9\nOpenSSL version: OpenSSL 1.0.1e 11 Feb 2013\n\n\n\nWordPress\n\n\nWordPress 4.4.2 \u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n\u5f8c\u7247\u4ed8\u3051\u306f\u3057\u3063\u304b\u308a\u3068\n\u672c\u65e5\u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306f\u30cf\u30f3\u30ba\u30aa\u30f3\u7d42\u4e86\u5f8c\u3001\u4e0d\u8981\u3067\u3042\u308c\u3070\u524a\u9664\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n\n\u53c2\u8003\u8cc7\u6599\n\n\u53c2\u8003 URL\n\nDocker \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u65e5\u672c\u8a9e\u5316\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\n\n\n\u53c2\u8003\u66f8\u7c4d\n\n\u30d7\u30ed\u30b0\u30e9\u30de\u306e\u305f\u3081\u306eDocker\u6559\u79d1\u66f8 \u30a4\u30f3\u30d5\u30e9\u306e\u57fa\u790e\u77e5\u8b58\uff06\u30b3\u30fc\u30c9\u306b\u3088\u308b\u74b0\u5883\u69cb\u7bc9\u306e\u81ea\u52d5\u5316\n\n\n\n1. \u4e8b\u524d\u6e96\u5099\n\n\u6982\u8981\n\nDocker Engine \u3092\u52d5\u304b\u3059\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3059\u308b\n\u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b SSH \u3067\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n\u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b HTTP \u3067\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n\n\n1.1 Docker Engine \u3092\u52d5\u304b\u3059\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3059\u308b\nDocker Engine \u3092\u52d5\u304b\u3059\u4eee\u60f3\u30de\u30b7\u30f3\u3092 Ubuntu Serve 14.04 LTS 64bit \u3067\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n\n\n\u74b0\u5883\nAMI ID / \u30a4\u30e1\u30fc\u30b8\u540d / Vagrant Box\n\u53c2\u8003\u624b\u9806\n\n\n\n\nAWS\nami-a21529cc\n\u4f53\u80b2\u4f1a\u7cfb Amazon EC2 \u3092 Vagrant \u7d4c\u7531\u3067\u8d77\u52d5\u3059\u308b\u624b\u9806\n\n\nIDCF Cloud\nUbuntu Serve 14.04 LTS 64bit\n\u4f53\u80b2\u4f1a\u7cfb IDCF Cloud \u306e\u4eee\u60f3\u30de\u30b7\u30f3\u3092 Vagrant \u7d4c\u7531\u3067\u8d77\u52d5\u3059\u308b\u624b\u9806\n\n\n\u30ed\u30fc\u30ab\u30eb\u30de\u30b7\u30f3\nubuntu/trusty64\nvagrant init ubuntu/trusty64; vagrant up --provider virtualbox\n\n\n\n\u4e0a\u8a18\u306e\u4f55\u308c\u304b\u306e\u69cb\u6210\u3067\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3055\u308c\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u524d\u63d0\u306b\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u9032\u3081\u307e\u3059\u3002\n\u5c1a\u3001\u4eca\u56de\u306f Docker Toolbox \u3067\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u305f\u74b0\u5883\u306b\u3064\u3044\u3066\u8003\u616e\u3057\u3066\u8a18\u8f09\u3057\u3066\u304a\u308a\u307e\u305b\u3093\u304c\u3001docker-compose \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3084\u30d6\u30e9\u30a6\u30b6\u3067 WordPress \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u969b\u306e IP \u30a2\u30c9\u30ec\u30b9\u306b\u6ce8\u610f\u3057\u3066\u9802\u3051\u308c\u3070\u3001\u672c\u8cc7\u6599\u306e\u624b\u9806\u3067 WordPress \u306e\u69cb\u7bc9\u306f\u53ef\u80fd\u3067\u3059\u3002\n\n1.2 \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b SSH \u3067\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n\u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u4e8b\u524d\u306b SSH \u3067\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n1.3 \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b HTTP \u3067\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n\n1.3.1 AWS \u306b\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3057\u305f\u5834\u5408\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u3092\u8a2d\u5b9a\u3057\u3066\u4eee\u60f3\u30de\u30b7\u30f3\u306b HTTP \u63a5\u7d9a\u51fa\u6765\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n1.3.2 IDCF Cloud \u306b\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3057\u305f\u5834\u5408\n\u30d5\u30a1\u30a4\u30e4\u30fc\u30a6\u30a9\u30fc\u30eb\u3068\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3057\u3066\u4eee\u60f3\u30de\u30b7\u30f3\u306b HTTP \u63a5\u7d9a\u51fa\u6765\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n1.3.3 Vagrant \u306b\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3057\u305f\u5834\u5408\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b Vagrantfile \u3092\u7528\u610f\u3057\u307e\u3057\u3087\u3046\u3002\n\nVagrantfile\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\nVagrant.configure(2) do |config|\n  config.vm.box = \"ubuntu/trusty64\"\n  config.vm.network :private_network, ip: \"192.168.33.10\"\n  config.vm.network :forwarded_port, host: 10080, guest: 80\nend\n\n\n\n\n2. \u6e96\u5099\u904b\u52d5\n\n\u6982\u8981\n\nDocker Engine \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u521d\u3081\u3066\u306e docker run\nDockerfile \u3092\u66f8\u3044\u3066\u307f\u308b\n\u521d\u3081\u3066\u306e docker build \u304b\u3089\u306e docker run\n\n\n2.1. Docker Engine \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u4e8b\u524d\u306b\u4eee\u60f3\u30de\u30b7\u30f3\u306b SSH \u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n\n2.1.1. \u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u9806\u756a\u306b\u5b9f\u884c\u3059\u308b\n\ncommand\nsudo apt-get install apt-transport-https ca-certificates git unzip\nsudo apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\nsudo sh -c 'echo \"deb https://apt.dockerproject.org/repo ubuntu-trusty main\" > /etc/apt/sources.list.d/docker.list'\nsudo apt-get update\nsudo apt-get install docker-engine\n\n\n\n2.1.2. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u3053\u3068\u3092\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u78ba\u8a8d\u3059\u308b\n\ncommand\nsudo docker version\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\noutput\nClient:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 15:54:52 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 15:54:52 2016\n OS/Arch:      linux/amd64\n\n\n\n2.1.3. \u30e6\u30fc\u30b6\u30fc\u6a29\u9650\u3067 docker \u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u51fa\u6765\u308b\u3088\u3046\u306b\u3082\u3046\u3072\u3068\u624b\u9593\u52a0\u3048\u308b\n\ncommand\nsudo usermod -aG docker ${USER}\nid ${USER}\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002(\u203b vagrant \u3067\u8a66\u3057\u305f\u4f8b\u3067\u3059)\n\noutput\nuid=1000(vagrant) gid=1000(vagrant) groups=1000(vagrant),999(docker)\n\n\n\u4e00\u5ea6\u3001SSH \u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3059\u3002\n\n2.1.4. \u518d\u3073\u30ed\u30b0\u30a4\u30f3\u3057\u3066 docker \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u307e\u3059\n\ncommand\ndocker version\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\noutput\nClient:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 15:54:52 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 15:54:52 2016\n OS/Arch:      linux/amd64\n\n\n\n2.2. \u521d\u3081\u3066\u306e docker run\n\n2.2.1. Nginx \u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u3066\u307f\u308b\n\ncommand\n#\n# \u4f5c\u696d\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\n#\nmkdir -p ~/dockerfile/nginx\ncd ~/dockerfile/nginx\n\n#\n# index.html \u3092\u7528\u610f\u3059\u308b\n#\necho \"Hello World\" > index.html\n\n#\n# \u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3059\u308b\n#\ndocker run --name=nginx01 -d -p 80:80 -v `pwd`:/usr/share/nginx/html:ro nginx\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\noutput\n# \u4ee5\u4e0b\u306e\u6570\u5024\u3084\u6587\u5b57\u306f\u5b9f\u884c\u74b0\u5883\u306b\u3088\u308a\u7570\u306a\u308a\u307e\u3059\n1512153d80bf3301f8fbc568cb8d8f5b59c5730b7d883e57f73cb5045bdd2c42\n\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\ncommand\ndocker ps\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\noutput\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                         NAMES\ndf886ba1de0d        nginx               \"nginx -g 'daemon off\"   5 minutes ago       Up 5 minutes        0.0.0.0:80->80/tcp, 443/tcp   nginx01\n\n\n\u30d6\u30e9\u30a6\u30b6\u3067 Nginx \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u307e\u3059\u3002\n\ncurl \u3067\u3082\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\ncommand\ncurl localhost\n\n\nindex.html \u3092\u9069\u5b9c\u5909\u66f4\u3057\u3066\u30ea\u30ed\u30fc\u30c9\u3059\u308b\u3068\u30b3\u30f3\u30c6\u30f3\u30c4\u304c\u5909\u5316\u3059\u308b\u3053\u3068\u3082\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\noutput\nHello World\n\n\n\n2.2.2. \u30b3\u30f3\u30c6\u30ca\u306e\u505c\u6b62\n\u6e80\u8db3\u3067\u304d\u305f\u3089\u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\n\ncommand\ndocker stop nginx01\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\noutput\nnginx01\n\n\n\u505c\u6b62\u3057\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\ncommand\ndocker ps\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\noutput\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n\n\n\n2.3. \u521d\u3081\u3066\u306e docker build \u304b\u3089\u306e docker run\n\u524d\u306e\u30b9\u30c6\u30c3\u30d7\u3068\u540c\u3058\u3088\u3046\u306b Nginx \u30b3\u30f3\u30c6\u30ca\u3092\u5229\u7528\u3059\u308b Dockerfile \u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002(\u203b\u65e2\u306b\u4f5c\u6210\u6e08\u307f\u306e Dockerfile \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u5229\u7528\u3057\u307e\u3059\u3002)\n\n2.3.1. \u4f5c\u6210\u6e08\u307f\u306e Dockerfile \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b Dockerfile \u3092\u30c0\u30a6\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\ncommand\ncd ~/dockerfile/nginx\nwget https://raw.githubusercontent.com/inokappa/handson-docker-dockerfiles/master/nginx/Dockerfile\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b Dockerfile \u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\ncommand\nls -l Dockerfile\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\noutput\n-rw-rw-r-- 1 vagrant vagrant 11 Mar 12 01:14 Dockerfile\n\n\n\n2.3.2. Dockerfile \u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3059\u308b\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b Dockerfile \u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\ncommand\ncat Dockerfile\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\nouput\n# \u5143\u3068\u306a\u308b\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092 FROM \u3067\u6307\u5b9a\u3059\u308b\nFROM nginx\n\n# \u30e9\u30d9\u30eb\u3092\u4ed8\u3051\u308b\nLABEL handson-nginx=\n\n# \u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u5b58\u5728\u3059\u308b index.html \u3092\u30b3\u30f3\u30c6\u30ca\u306e /usr/share/nginx/html/ \u306b\u8ffd\u52a0\u3059\u308b\nADD index.html /usr/share/nginx/html/index.html\n\n\n\n2.3.3. Docker \u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 Docker \u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\n\ncommand\ndocker build --no-cache=true -t handson-nginx .\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\noutput\nSending build context to Docker daemon 4.096 kB\nStep 1 : FROM nginx\n ---> af4b3d7d5401\nStep 2 : LABEL handson-nginx \n ---> Running in 3edde94deda2\n ---> eb968b9c26f3\nRemoving intermediate container 3edde94deda2\nStep 3 : ADD index.html /usr/share/nginx/html/index.html\n ---> be614755092e\nRemoving intermediate container 2e7f1b33f9d3\nSuccessfully built be614755092e\n\n\n\n2.3.4. \u30d3\u30eb\u30c9\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3092\u78ba\u8a8d\u3059\u308b\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30d3\u30eb\u30c9\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\ncommand\ndocker images --filter \"label=handson-nginx\"\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\noutput\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nhandson-nginx       latest              849816da644b        4 seconds ago       190.5 MB\n\n\n\n2.3.5. \u30d3\u30eb\u30c9\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3059\u308b\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30d3\u30eb\u30c9\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\ncommand\ndocker run --name nginx02 -d -p 80:80 handson-nginx\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\noutput\n# \u4ee5\u4e0b\u306e\u6570\u5024\u3084\u6587\u5b57\u306f\u5b9f\u884c\u74b0\u5883\u306b\u3088\u308a\u7570\u306a\u308a\u307e\u3059\n1512153d80bf3301f8fbc568cb8d8f5b59c5730b7d883e57f73cb5045bdd2c42\n\n\n\u30d6\u30e9\u30a6\u30b6\u3067 Nginx \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u307e\u3059\u3002\n\ncurl \u3067\u3082\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\ncommand\ncurl localhost\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\noutput\nHello World\n\n\n\n2.3.6. \u30b3\u30f3\u30c6\u30ca\u306e\u505c\u6b62\n\u6e80\u8db3\u3067\u304d\u305f\u3089\u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\n\ncommand\ndocker stop nginx02\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\noutput\nnginx02\n\n\n\u505c\u6b62\u3057\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\ncommand\ndocker ps\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\noutput\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n\n\n\n\u4f53\u80b2\u4f1a\u7cfb Docker Compose \u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\uff082\uff09\u306b\u7d9a\u304d\u307e\u3059\u3002\n\n## \u30e1\u30cb\u30e5\u30fc\n\n### \u6ce8\u610f\n\n- \u8cc7\u6599\u306e\u898b\u65b9\n- \u4e8b\u524d\u6e96\u5099\u306b\u3064\u3044\u3066\n- \u8cc7\u6599\u5185\u3067\u7d39\u4ecb\u3059\u308b\u5404\u7a2e\u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3064\u3044\u3066\n- \u5f8c\u7247\u4ed8\u3051\u306f\u3057\u3063\u304b\u308a\u3068\n\n### \u53c2\u8003\u8cc7\u6599\n\n- \u53c2\u8003 URL\n- \u53c2\u8003\u66f8\u7c4d\n\n### 1. \u4e8b\u524d\u6e96\u5099\n\n1-1. Docker Engine \u3092\u52d5\u304b\u3059\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3059\u308b\n1-2. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b SSH \u3067\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n1-3. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b HTTP \u3067\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n\n### 2. \u6e96\u5099\u904b\u52d5\n\n2-1. Docker Engine \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n2-2. \u521d\u3081\u3066\u306e docker run\n2-3. \u521d\u3081\u3066\u306e docker build \u304b\u3089\u306e docker run\n\n***\n\n## \u6ce8\u610f\n\n### \u8cc7\u6599\u306e\u898b\u65b9\n\n\u4ee5\u4e0b\u3001\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306e\u8868\u793a\u3067\u3059\u3002\n\n~~~sh:command\n# \u30b3\u30e1\u30f3\u30c8\u3067\u3059\n\n# \u30cf\u30f3\u30ba\u30aa\u30f3\u5185\u3067\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3067\u3059\uff08\u30b3\u30d4\u30fc\uff06\u30da\u30fc\u30b9\u30c8\u3067\u8cbc\u308a\u4ed8\u3051\u3066\u5229\u7528\u3057\u3066\u4e0b\u3055\u3044\uff09\ncommand \"foo\" \"bar\"\n~~~\n\n\u4ee5\u4e0b\u3001\u51fa\u529b\u4f8b\u306e\u8868\u793a\u3067\u3059\u3002\n\n~~~sh:output\n# \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u5f8c\u306e\u51fa\u529b\u4f8b\u3067\u3059\n~~~\n\n\u4e0a\u8a18\u306b\u5b9f\u884c\u4f8b\u3068\u7570\u306a\u308b\u51fa\u529b\u3092\u78ba\u8a8d\u3057\u305f\u5834\u5408\u306b\u306f\u304a\u58f0\u304c\u3051\u4e0b\u3055\u3044\u3002\n\n### \u4e8b\u524d\u6e96\u5099\u306b\u3064\u3044\u3066\n\n- \u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u5186\u6ed1\u306b\u9032\u3081\u308b\u306b\u3042\u305f\u3063\u3066\u4e8b\u524d\u6e96\u5099\u306f\u51fa\u6765\u308b\u3060\u3051\u884c\u3046\u3088\u3046\u306b\u3057\u3066\u4e0b\u3055\u3044\n\n### \u8cc7\u6599\u5185\u3067\u7d39\u4ecb\u3059\u308b\u5404\u7a2e\u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3064\u3044\u3066\n\n\u8cc7\u6599\u5185\u3067\u7d39\u4ecb\u3059\u308b\u5404\u7a2e\u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n- OS\n\n~~~sh:output\n$ cat /etc/lsb-release \nDISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=14.04\nDISTRIB_CODENAME=trusty\nDISTRIB_DESCRIPTION=\"Ubuntu 14.04.3 LTS\"\n~~~\n\n- Docker Engine\n\n~~~sh:output\n$ docker version\nClient:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 15:54:52 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 15:54:52 2016\n OS/Arch:      linux/amd64\n~~~\n\n- Docker Compose\n\n~~~sh:output\n$ docker-compose version\ndocker-compose version 1.6.2, build 4d72027\ndocker-py version: 1.7.2\nCPython version: 2.7.9\nOpenSSL version: OpenSSL 1.0.1e 11 Feb 2013\n~~~\n\n- WordPress\n\n![2016031304.png](https://qiita-image-store.s3.amazonaws.com/0/87189/533944d7-a069-2d9c-89e4-4bf4c31627ca.png \"2016031304.png\")\n\nWordPress 4.4.2 \u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n### \u5f8c\u7247\u4ed8\u3051\u306f\u3057\u3063\u304b\u308a\u3068\n\n\u672c\u65e5\u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306f\u30cf\u30f3\u30ba\u30aa\u30f3\u7d42\u4e86\u5f8c\u3001\u4e0d\u8981\u3067\u3042\u308c\u3070\u524a\u9664\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n***\n\n## \u53c2\u8003\u8cc7\u6599\n\n### \u53c2\u8003 URL\n\n- [Docker \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u65e5\u672c\u8a9e\u5316\u30d7\u30ed\u30b8\u30a7\u30af\u30c8](http://docs.docker.jp/)\n\n### \u53c2\u8003\u66f8\u7c4d\n\n- [\u30d7\u30ed\u30b0\u30e9\u30de\u306e\u305f\u3081\u306eDocker\u6559\u79d1\u66f8 \u30a4\u30f3\u30d5\u30e9\u306e\u57fa\u790e\u77e5\u8b58\uff06\u30b3\u30fc\u30c9\u306b\u3088\u308b\u74b0\u5883\u69cb\u7bc9\u306e\u81ea\u52d5\u5316](http://www.shoeisha.co.jp/book/detail/9784798141022)\n\n***\n\n## 1. \u4e8b\u524d\u6e96\u5099\n\n### \u6982\u8981\n\n- Docker Engine \u3092\u52d5\u304b\u3059\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3059\u308b\n- \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b SSH \u3067\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n- \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b HTTP \u3067\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n\n### 1.1 Docker Engine \u3092\u52d5\u304b\u3059\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3059\u308b\n\nDocker Engine \u3092\u52d5\u304b\u3059\u4eee\u60f3\u30de\u30b7\u30f3\u3092 Ubuntu Serve 14.04 LTS 64bit \u3067\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n| \u74b0\u5883 | AMI ID / \u30a4\u30e1\u30fc\u30b8\u540d / Vagrant Box | \u53c2\u8003\u624b\u9806 |\n|:---|:---|:---|\n| AWS | ami-a21529cc | [\u4f53\u80b2\u4f1a\u7cfb Amazon EC2 \u3092 Vagrant \u7d4c\u7531\u3067\u8d77\u52d5\u3059\u308b\u624b\u9806](http://qiita.com/inokappa/private/25a98ca152850e373f02) |\n| IDCF Cloud | Ubuntu Serve 14.04 LTS 64bit | [\u4f53\u80b2\u4f1a\u7cfb IDCF Cloud \u306e\u4eee\u60f3\u30de\u30b7\u30f3\u3092 Vagrant \u7d4c\u7531\u3067\u8d77\u52d5\u3059\u308b\u624b\u9806](http://qiita.com/inokappa/private/1e184f28d48178817bbc) |\n| \u30ed\u30fc\u30ab\u30eb\u30de\u30b7\u30f3 | ubuntu/trusty64 | `vagrant init ubuntu/trusty64; vagrant up --provider virtualbox` |\n\n\u4e0a\u8a18\u306e\u4f55\u308c\u304b\u306e\u69cb\u6210\u3067\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3055\u308c\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u524d\u63d0\u306b\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u9032\u3081\u307e\u3059\u3002\n\n\u5c1a\u3001\u4eca\u56de\u306f [Docker Toolbox](https://www.docker.com/products/docker-toolbox) \u3067\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u305f\u74b0\u5883\u306b\u3064\u3044\u3066\u8003\u616e\u3057\u3066\u8a18\u8f09\u3057\u3066\u304a\u308a\u307e\u305b\u3093\u304c\u3001docker-compose \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3084\u30d6\u30e9\u30a6\u30b6\u3067 WordPress \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u969b\u306e IP \u30a2\u30c9\u30ec\u30b9\u306b\u6ce8\u610f\u3057\u3066\u9802\u3051\u308c\u3070\u3001\u672c\u8cc7\u6599\u306e\u624b\u9806\u3067 WordPress \u306e\u69cb\u7bc9\u306f\u53ef\u80fd\u3067\u3059\u3002\n\n### 1.2 \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b SSH \u3067\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n\n\u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u4e8b\u524d\u306b SSH \u3067\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n### 1.3 \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b HTTP \u3067\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n\n#### 1.3.1 AWS \u306b\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3057\u305f\u5834\u5408\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u3092\u8a2d\u5b9a\u3057\u3066\u4eee\u60f3\u30de\u30b7\u30f3\u306b HTTP \u63a5\u7d9a\u51fa\u6765\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n#### 1.3.2 IDCF Cloud \u306b\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3057\u305f\u5834\u5408\n\u30d5\u30a1\u30a4\u30e4\u30fc\u30a6\u30a9\u30fc\u30eb\u3068\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3057\u3066\u4eee\u60f3\u30de\u30b7\u30f3\u306b HTTP \u63a5\u7d9a\u51fa\u6765\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n#### 1.3.3 Vagrant \u306b\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3057\u305f\u5834\u5408\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b Vagrantfile \u3092\u7528\u610f\u3057\u307e\u3057\u3087\u3046\u3002\n\n~~~ruby:Vagrantfile\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\nVagrant.configure(2) do |config|\n  config.vm.box = \"ubuntu/trusty64\"\n  config.vm.network :private_network, ip: \"192.168.33.10\"\n  config.vm.network :forwarded_port, host: 10080, guest: 80\nend\n~~~\n\n***\n\n## 2. \u6e96\u5099\u904b\u52d5\n\n### \u6982\u8981\n\n- Docker Engine \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n- \u521d\u3081\u3066\u306e docker run\n- Dockerfile \u3092\u66f8\u3044\u3066\u307f\u308b\n- \u521d\u3081\u3066\u306e docker build \u304b\u3089\u306e docker run\n\n### 2.1. Docker Engine \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n- \u4e8b\u524d\u306b\u4eee\u60f3\u30de\u30b7\u30f3\u306b SSH \u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n#### 2.1.1. \u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u9806\u756a\u306b\u5b9f\u884c\u3059\u308b\n\n~~~sh:command\nsudo apt-get install apt-transport-https ca-certificates git unzip\nsudo apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\nsudo sh -c 'echo \"deb https://apt.dockerproject.org/repo ubuntu-trusty main\" > /etc/apt/sources.list.d/docker.list'\nsudo apt-get update\nsudo apt-get install docker-engine\n~~~\n\n#### 2.1.2. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u3053\u3068\u3092\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u78ba\u8a8d\u3059\u308b\n\n~~~sh:command\nsudo docker version\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\n~~~sh:output\nClient:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 15:54:52 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 15:54:52 2016\n OS/Arch:      linux/amd64\n~~~\n\n#### 2.1.3. \u30e6\u30fc\u30b6\u30fc\u6a29\u9650\u3067 docker \u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u51fa\u6765\u308b\u3088\u3046\u306b\u3082\u3046\u3072\u3068\u624b\u9593\u52a0\u3048\u308b\n\n~~~sh:command\nsudo usermod -aG docker ${USER}\nid ${USER}\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002(\u203b vagrant \u3067\u8a66\u3057\u305f\u4f8b\u3067\u3059)\n\n~~~sh:output\nuid=1000(vagrant) gid=1000(vagrant) groups=1000(vagrant),999(docker)\n~~~\n\n\u4e00\u5ea6\u3001SSH \u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3059\u3002\n\n#### 2.1.4. \u518d\u3073\u30ed\u30b0\u30a4\u30f3\u3057\u3066 docker \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u307e\u3059\n\n~~~sh:command\ndocker version\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\n~~~sh:output\nClient:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 15:54:52 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.10.3\n API version:  1.22\n Go version:   go1.5.3\n Git commit:   20f81dd\n Built:        Thu Mar 10 15:54:52 2016\n OS/Arch:      linux/amd64\n~~~\n\n### 2.2. \u521d\u3081\u3066\u306e docker run\n\n#### 2.2.1. Nginx \u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u3066\u307f\u308b\n\n~~~sh:command\n#\n# \u4f5c\u696d\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\n#\nmkdir -p ~/dockerfile/nginx\ncd ~/dockerfile/nginx\n\n#\n# index.html \u3092\u7528\u610f\u3059\u308b\n#\necho \"Hello World\" > index.html\n\n#\n# \u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3059\u308b\n#\ndocker run --name=nginx01 -d -p 80:80 -v `pwd`:/usr/share/nginx/html:ro nginx\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:output\n# \u4ee5\u4e0b\u306e\u6570\u5024\u3084\u6587\u5b57\u306f\u5b9f\u884c\u74b0\u5883\u306b\u3088\u308a\u7570\u306a\u308a\u307e\u3059\n1512153d80bf3301f8fbc568cb8d8f5b59c5730b7d883e57f73cb5045bdd2c42\n~~~\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:command\ndocker ps\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:output\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                         NAMES\ndf886ba1de0d        nginx               \"nginx -g 'daemon off\"   5 minutes ago       Up 5 minutes        0.0.0.0:80->80/tcp, 443/tcp   nginx01\n~~~\n\n\u30d6\u30e9\u30a6\u30b6\u3067 Nginx \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u307e\u3059\u3002\n\n![2016031201.png](https://qiita-image-store.s3.amazonaws.com/0/87189/9ff67ac1-ac5f-b0aa-2d41-aae4be925336.png \"2016031201.png\")\n\n`curl` \u3067\u3082\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:command\ncurl localhost\n~~~\n\n`index.html` \u3092\u9069\u5b9c\u5909\u66f4\u3057\u3066\u30ea\u30ed\u30fc\u30c9\u3059\u308b\u3068\u30b3\u30f3\u30c6\u30f3\u30c4\u304c\u5909\u5316\u3059\u308b\u3053\u3068\u3082\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\n~~~sh:output\nHello World\n~~~\n\n#### 2.2.2. \u30b3\u30f3\u30c6\u30ca\u306e\u505c\u6b62\n\n\u6e80\u8db3\u3067\u304d\u305f\u3089\u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\n\n~~~sh:command\ndocker stop nginx01\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n~~~sh:output\nnginx01\n~~~\n\n\u505c\u6b62\u3057\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:command\ndocker ps\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:output\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n~~~\n\n### 2.3. \u521d\u3081\u3066\u306e docker build \u304b\u3089\u306e docker run\n\n\u524d\u306e\u30b9\u30c6\u30c3\u30d7\u3068\u540c\u3058\u3088\u3046\u306b Nginx \u30b3\u30f3\u30c6\u30ca\u3092\u5229\u7528\u3059\u308b Dockerfile \u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002(\u203b\u65e2\u306b\u4f5c\u6210\u6e08\u307f\u306e Dockerfile \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u5229\u7528\u3057\u307e\u3059\u3002)\n\n#### 2.3.1. \u4f5c\u6210\u6e08\u307f\u306e Dockerfile \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b Dockerfile \u3092\u30c0\u30a6\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n~~~sh:command\ncd ~/dockerfile/nginx\nwget https://raw.githubusercontent.com/inokappa/handson-docker-dockerfiles/master/nginx/Dockerfile\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b Dockerfile \u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:command\nls -l Dockerfile\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:output\n-rw-rw-r-- 1 vagrant vagrant 11 Mar 12 01:14 Dockerfile\n~~~\n\n#### 2.3.2. Dockerfile \u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3059\u308b\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b Dockerfile \u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:command\ncat Dockerfile\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:ouput\n# \u5143\u3068\u306a\u308b\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092 FROM \u3067\u6307\u5b9a\u3059\u308b\nFROM nginx\n\n# \u30e9\u30d9\u30eb\u3092\u4ed8\u3051\u308b\nLABEL handson-nginx=\n\n# \u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u5b58\u5728\u3059\u308b index.html \u3092\u30b3\u30f3\u30c6\u30ca\u306e /usr/share/nginx/html/ \u306b\u8ffd\u52a0\u3059\u308b\nADD index.html /usr/share/nginx/html/index.html\n~~~\n\n#### 2.3.3. Docker \u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 Docker \u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\n\n~~~sh:command\ndocker build --no-cache=true -t handson-nginx .\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:output\nSending build context to Docker daemon 4.096 kB\nStep 1 : FROM nginx\n ---> af4b3d7d5401\nStep 2 : LABEL handson-nginx \n ---> Running in 3edde94deda2\n ---> eb968b9c26f3\nRemoving intermediate container 3edde94deda2\nStep 3 : ADD index.html /usr/share/nginx/html/index.html\n ---> be614755092e\nRemoving intermediate container 2e7f1b33f9d3\nSuccessfully built be614755092e\n~~~\n\n#### 2.3.4. \u30d3\u30eb\u30c9\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3092\u78ba\u8a8d\u3059\u308b\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30d3\u30eb\u30c9\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:command\ndocker images --filter \"label=handson-nginx\"\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:output\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nhandson-nginx       latest              849816da644b        4 seconds ago       190.5 MB\n~~~\n\n#### 2.3.5. \u30d3\u30eb\u30c9\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3059\u308b\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30d3\u30eb\u30c9\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n~~~sh:command\ndocker run --name nginx02 -d -p 80:80 handson-nginx\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:output\n# \u4ee5\u4e0b\u306e\u6570\u5024\u3084\u6587\u5b57\u306f\u5b9f\u884c\u74b0\u5883\u306b\u3088\u308a\u7570\u306a\u308a\u307e\u3059\n1512153d80bf3301f8fbc568cb8d8f5b59c5730b7d883e57f73cb5045bdd2c42\n~~~\n\n\u30d6\u30e9\u30a6\u30b6\u3067 Nginx \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u307e\u3059\u3002\n\n![2016031201.png](https://qiita-image-store.s3.amazonaws.com/0/87189/9ff67ac1-ac5f-b0aa-2d41-aae4be925336.png \"2016031201.png\")\n\n`curl` \u3067\u3082\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:command\ncurl localhost\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:output\nHello World\n~~~\n\n#### 2.3.6. \u30b3\u30f3\u30c6\u30ca\u306e\u505c\u6b62\n\n\u6e80\u8db3\u3067\u304d\u305f\u3089\u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\n\n~~~sh:command\ndocker stop nginx02\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n~~~sh:output\nnginx02\n~~~\n\n\u505c\u6b62\u3057\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:command\ndocker ps\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n~~~sh:output\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n~~~\n\n***\n\n[\u4f53\u80b2\u4f1a\u7cfb Docker Compose \u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\uff082\uff09](http://qiita.com/inokappa/private/e5388726ee80ce24f633)\u306b\u7d9a\u304d\u307e\u3059\u3002\n", "tags": ["docker", "docker-compose", "\u30cf\u30f3\u30ba\u30aa\u30f3"]}