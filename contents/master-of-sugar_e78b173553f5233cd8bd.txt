{"context": " More than 1 year has passed since last update.Redis\u3092\u3044\u3058\u304f\u308a\u5012\u3057\u3066\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u691c\u8a3c\u3059\u308b\u3053\u3068\u306b\u306a\u3063\u305f\u306e\u3067\u74b0\u5883\u69cb\u7bc9\u3057\u3066\u307f\u308b\u3002\n\n\u5fc5\u8981\u306a\u3082\u306e\n\nVagrant\nVirtualBox\nAnsible\n\n\n\u6e96\u5099\n\nVagrant\u3092\u3044\u308c\u308b\n\u3053\u3053\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3044\u308c\u308b\u3002\n\nVirtualBox\u3092\u3044\u308c\u308b\n\u3053\u3053\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3044\u308c\u308b\u3002\n\nAnsible\u3092\u3044\u308c\u308b\nbrew install ansible\n\n\nVagrant\u306eBOX\u3092\u8ffd\u52a0\u3059\u308b\n\u4eca\u56de\u306fCentOS 7\u3092\u3044\u308c\u308b\u3002\nvagrant box add cent7 https://github.com/holms/vagrant-centos7-box/releases/download/7.1.1503.001/CentOS-7.1.1503-x86_64-netboot.box\n\n\u9069\u5f53\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u79fb\u52d5\u3059\u308b\u3002\nmkdir hoge\ncd hoge\n\nVagrant\u521d\u671f\u5316\u3002\nvagrant init cent7\n\nVagrantfile\u304c\u3067\u304d\u308b\u306e\u3067\u4ee5\u4e0b\u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u5916\u3059\u3002\nconfig.vm.network \"private_network\", ip: \"192.168.33.10\"\n\nVirtual Machine\u3092\u8d77\u52d5\u3059\u308b\u3002\nvagrant up\n\nvagrant ssh\u3067\u3082\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u304c\u3001Vagrantfile\u3067\u6307\u5b9a\u3057\u305fip\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u304b\u3069\u3046\u304b\u8a66\u3057\u3066\u307f\u308b\u3002\u30d1\u30b9\u30ef\u30fc\u30c9\u306fvagrant\u3002\nssh vagrant@192.168.10.33\n\n\nAnsible\u306e\u8a2d\u5b9a\u3092\u3059\u308b\ninventory file\u3092\u4f5c\u6210\u3059\u308b\u3002\u30d5\u30a1\u30a4\u30eb\u540d\u306f\u9069\u5f53\u306b\u3002\n[test-server]\n192.168.33.10\n\n[all:vars]\nansible_ssh_port=22\nansible_ssh_user=vagrant \nansible_ssh_pass=vagrant\nansible_sudo_pass=vagrant\nansible_connection=paramiko\n\nansible_connection=paramiko\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u3046\u307e\u3044\u3053\u3068ssh\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u3044\u306e\u3067\u6ce8\u610f\u3002\nPlaybook\u3092\u4f5c\u308b\u3002\u30d5\u30a1\u30a4\u30eb\u540d\u306f\u9069\u5f53\u306b\u3002\n\nplaybook.yml\n---\n- hosts: test-server\n  sudo: yes\n  tasks:\n    - name: libselinux-python install\n      yum: name=libselinux-python state=latest\n    - name: gcc install\n      yum: name=gcc state=latest\n    - name: redis source download\n      get_url: >\n        url=http://download.redis.io/releases/redis-2.8.19.tar.gz\n        dest=/tmp/redis-2.8.19.tar.gz\n    - name: redis unarchive\n      command: >\n        tar zxvf redis-2.8.19.tar.gz\n        chdir=/tmp/\n    - name: make\n      command: >\n        make\n        chdir=/tmp/redis-2.8.19\n    - name: make install\n      command: >\n        make install\n        chdir=/tmp/redis-2.8.19\n    - name: deamonize on\n      replace: >\n        dest=/tmp/redis-2.8.19/redis.conf\n        regexp='daemonize no'\n        replace='daemonize yes'\n    - name: redis.conf copy\n      shell: creates=/etc/redis.conf cp /tmp/redis-2.8.19/redis.conf /etc/redis.conf\n    - name: redis start\n      command: >\n        redis-server /etc/redis.conf\n      sudo: no\n\n\n\n\u5b9f\u884c\u3057\u3066\u307f\u308b\nansible-playbook -i hosts playbook.yml\n\nPLAY [test-server] ************************************************************ \n\nGATHERING FACTS *************************************************************** \nok: [192.168.33.10]\n\nTASK: [libselinux-python install] ********************************************* \nok: [192.168.33.10]\n\nTASK: [gcc install] *********************************************************** \nok: [192.168.33.10]\n\nTASK: [redis source download] ************************************************* \nok: [192.168.33.10]\n\nTASK: [redis unarchive] ******************************************************* \nchanged: [192.168.33.10]\n\nTASK: [make] ****************************************************************** \nchanged: [192.168.33.10]\n\nTASK: [make install] ********************************************************** \nchanged: [192.168.33.10]\n\nTASK: [deamonize on] ********************************************************** \nchanged: [192.168.33.10]\n\nTASK: [redis.conf copy] ******************************************************* \nok: [192.168.33.10]\n\nTASK: [redis start] *********************************************************** \nchanged: [192.168.33.10]\n\nPLAY RECAP ******************************************************************** \n192.168.33.10              : ok=10   changed=5    unreachable=0    failed=0   \n\n\u4e0a\u306e\u306f\uff12\u56de\u306b\u5b9f\u884c\u3057\u305f\u7d50\u679c\u306a\u306e\u3067\u521d\u56de\u306e\u7d50\u679c\u3068\u306f\u82e5\u5e72\u9055\u3046\u304b\u3082\u3002\u6700\u7d42\u7684\u306bok=10\u306b\u306a\u3063\u3066\u308c\u3070OK\u3060\u3068\u601d\u3046\u3002\n\n\u78ba\u8a8d\u3057\u3066\u307f\u308b\nvagrant ssh\u3067\u3082\u76f4\u63a5ssh\u3067\u3082\u3069\u3061\u3089\u3067\u3082\u3044\u3044\u306e\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\nvagrant ssh\n\n[vagrant@localhost ~]$ redis-server -v\nRedis server v=2.8.19 sha=00000000:0 malloc=jemalloc-3.6.0 bits=64 build=41ebe2a844e67838\n[vagrant@localhost ~]$ redis-cli\n127.0.0.1:6379> \n\n\u3061\u3083\u3093\u3068\u5165\u3063\u3066\u308b\u3002\u6210\u529f\u3002\n\n\u53c2\u8003\n\n\u69cb\u6210\u7ba1\u7406\u30c4\u30fc\u30eb Ansible\u3092\u4f7f\u3063\u3066\u307f\u308b\nAnsible\u3067Redis\u306e2.5\u4ee5\u964d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bPlaybook\nMac\u3067Ansible\u304c\u52d5\u304b\u306a\u304f\u306a\u3063\u305f\u6642\u306e\u30d5\u30a1\u30fc\u30b9\u30c8\u30a2\u30af\u30b7\u30e7\u30f3\n\n\n`Redis`\u3092\u3044\u3058\u304f\u308a\u5012\u3057\u3066\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u691c\u8a3c\u3059\u308b\u3053\u3068\u306b\u306a\u3063\u305f\u306e\u3067\u74b0\u5883\u69cb\u7bc9\u3057\u3066\u307f\u308b\u3002\n\n##\u5fc5\u8981\u306a\u3082\u306e\n - Vagrant\n - VirtualBox\n - Ansible\n\n##\u6e96\u5099\n###Vagrant\u3092\u3044\u308c\u308b\n[\u3053\u3053](https://www.vagrantup.com/)\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3044\u308c\u308b\u3002\n\n###VirtualBox\u3092\u3044\u308c\u308b\n[\u3053\u3053](https://www.virtualbox.org/wiki/Downloads)\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3044\u308c\u308b\u3002\n\n###Ansible\u3092\u3044\u308c\u308b\n\n```\nbrew install ansible\n```\n\n##Vagrant\u306eBOX\u3092\u8ffd\u52a0\u3059\u308b\n\n\u4eca\u56de\u306fCentOS 7\u3092\u3044\u308c\u308b\u3002\n\n```\nvagrant box add cent7 https://github.com/holms/vagrant-centos7-box/releases/download/7.1.1503.001/CentOS-7.1.1503-x86_64-netboot.box\n```\n\n\u9069\u5f53\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u79fb\u52d5\u3059\u308b\u3002\n\n```\nmkdir hoge\ncd hoge\n```\n\nVagrant\u521d\u671f\u5316\u3002\n\n```\nvagrant init cent7\n```\n\n`Vagrantfile`\u304c\u3067\u304d\u308b\u306e\u3067\u4ee5\u4e0b\u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u5916\u3059\u3002\n\n```Vagrantfile\nconfig.vm.network \"private_network\", ip: \"192.168.33.10\"\n```\n\nVirtual Machine\u3092\u8d77\u52d5\u3059\u308b\u3002\n\n```\nvagrant up\n```\n\n`vagrant ssh`\u3067\u3082\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u304c\u3001`Vagrantfile`\u3067\u6307\u5b9a\u3057\u305fip\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u304b\u3069\u3046\u304b\u8a66\u3057\u3066\u307f\u308b\u3002\u30d1\u30b9\u30ef\u30fc\u30c9\u306f`vagrant`\u3002\n\n```\nssh vagrant@192.168.10.33\n```\n\n##Ansible\u306e\u8a2d\u5b9a\u3092\u3059\u308b\ninventory file\u3092\u4f5c\u6210\u3059\u308b\u3002\u30d5\u30a1\u30a4\u30eb\u540d\u306f\u9069\u5f53\u306b\u3002\n\n```hosts\n[test-server]\n192.168.33.10\n\n[all:vars]\nansible_ssh_port=22\nansible_ssh_user=vagrant \nansible_ssh_pass=vagrant\nansible_sudo_pass=vagrant\nansible_connection=paramiko\n```\n\n`ansible_connection=paramiko`\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u3046\u307e\u3044\u3053\u3068ssh\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u3044\u306e\u3067\u6ce8\u610f\u3002\n\nPlaybook\u3092\u4f5c\u308b\u3002\u30d5\u30a1\u30a4\u30eb\u540d\u306f\u9069\u5f53\u306b\u3002\n\n```playbook.yml\n---\n- hosts: test-server\n  sudo: yes\n  tasks:\n    - name: libselinux-python install\n      yum: name=libselinux-python state=latest\n    - name: gcc install\n      yum: name=gcc state=latest\n    - name: redis source download\n      get_url: >\n        url=http://download.redis.io/releases/redis-2.8.19.tar.gz\n        dest=/tmp/redis-2.8.19.tar.gz\n    - name: redis unarchive\n      command: >\n        tar zxvf redis-2.8.19.tar.gz\n        chdir=/tmp/\n    - name: make\n      command: >\n        make\n        chdir=/tmp/redis-2.8.19\n    - name: make install\n      command: >\n        make install\n        chdir=/tmp/redis-2.8.19\n    - name: deamonize on\n      replace: >\n        dest=/tmp/redis-2.8.19/redis.conf\n        regexp='daemonize no'\n        replace='daemonize yes'\n    - name: redis.conf copy\n      shell: creates=/etc/redis.conf cp /tmp/redis-2.8.19/redis.conf /etc/redis.conf\n    - name: redis start\n      command: >\n        redis-server /etc/redis.conf\n      sudo: no\n```\n\n##\u5b9f\u884c\u3057\u3066\u307f\u308b\n\n```\nansible-playbook -i hosts playbook.yml\n```\n\n\n\n```\u5b9f\u884c\u7d50\u679c\nPLAY [test-server] ************************************************************ \n\nGATHERING FACTS *************************************************************** \nok: [192.168.33.10]\n\nTASK: [libselinux-python install] ********************************************* \nok: [192.168.33.10]\n\nTASK: [gcc install] *********************************************************** \nok: [192.168.33.10]\n\nTASK: [redis source download] ************************************************* \nok: [192.168.33.10]\n\nTASK: [redis unarchive] ******************************************************* \nchanged: [192.168.33.10]\n\nTASK: [make] ****************************************************************** \nchanged: [192.168.33.10]\n\nTASK: [make install] ********************************************************** \nchanged: [192.168.33.10]\n\nTASK: [deamonize on] ********************************************************** \nchanged: [192.168.33.10]\n\nTASK: [redis.conf copy] ******************************************************* \nok: [192.168.33.10]\n\nTASK: [redis start] *********************************************************** \nchanged: [192.168.33.10]\n\nPLAY RECAP ******************************************************************** \n192.168.33.10              : ok=10   changed=5    unreachable=0    failed=0   \n```\n\n\u4e0a\u306e\u306f\uff12\u56de\u306b\u5b9f\u884c\u3057\u305f\u7d50\u679c\u306a\u306e\u3067\u521d\u56de\u306e\u7d50\u679c\u3068\u306f\u82e5\u5e72\u9055\u3046\u304b\u3082\u3002\u6700\u7d42\u7684\u306b`ok=10`\u306b\u306a\u3063\u3066\u308c\u3070OK\u3060\u3068\u601d\u3046\u3002\n\n\n##\u78ba\u8a8d\u3057\u3066\u307f\u308b\n`vagrant ssh`\u3067\u3082\u76f4\u63a5ssh\u3067\u3082\u3069\u3061\u3089\u3067\u3082\u3044\u3044\u306e\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\n\n```\nvagrant ssh\n```\n\n```\n[vagrant@localhost ~]$ redis-server -v\nRedis server v=2.8.19 sha=00000000:0 malloc=jemalloc-3.6.0 bits=64 build=41ebe2a844e67838\n[vagrant@localhost ~]$ redis-cli\n127.0.0.1:6379> \n```\n\n\u3061\u3083\u3093\u3068\u5165\u3063\u3066\u308b\u3002\u6210\u529f\u3002\n\n##\u53c2\u8003\n - [\u69cb\u6210\u7ba1\u7406\u30c4\u30fc\u30eb Ansible\u3092\u4f7f\u3063\u3066\u307f\u308b](http://dev.classmethod.jp/tool/ansible/)\n - [Ansible\u3067Redis\u306e2.5\u4ee5\u964d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bPlaybook](http://qiita.com/joytomo/items/d0cb45074c61dd8935fd)\n - [Mac\u3067Ansible\u304c\u52d5\u304b\u306a\u304f\u306a\u3063\u305f\u6642\u306e\u30d5\u30a1\u30fc\u30b9\u30c8\u30a2\u30af\u30b7\u30e7\u30f3](http://qiita.com/tienlen/items/f629f780eba18d5bfdf5)\n", "tags": ["Ansible", "Redis", "vagrant"]}