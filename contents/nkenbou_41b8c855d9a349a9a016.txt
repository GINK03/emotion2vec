{"context": "\n\n\u306f\u3058\u3081\u306b\n\n\u5bfe\u8c61\u3068\u306a\u308b\u8aad\u8005\n\n\n\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306a GitLab \u30a4\u30e1\u30fc\u30b8 \u3092\u4f7f\u3044\u305f\u3044\u4eba\n\n\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306a Redmine \u30a4\u30e1\u30fc\u30b8 \u3092\u4f7f\u3044\u305f\u3044\u4eba\n\u4e0a\u8a18\u306e\u30a4\u30e1\u30fc\u30b8\u304b\u3089\u4f5c\u6210\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3092\u9023\u643a\u3055\u305b\u305f\u3044\u4eba\n\n\n\u3053\u306e\u8a18\u4e8b\u3092\u8aad\u3093\u3060\u5f8c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3053\u3068\n\nGitLab \u306e Issues \u30bf\u30d6\u304c Redmine \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30ea\u30f3\u30af\u3055\u308c\u307e\u3059\u3002\nGitLab \u306e\u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u306e issue \u756a\u53f7\u304c Redmine \u30c1\u30b1\u30c3\u30c8\u306b\u30ea\u30f3\u30af\u3055\u308c\u307e\u3059\u3002\nRedmine \u306e\u30c1\u30b1\u30c3\u30c8\u9023\u643a\u6a5f\u80fd\u304c\u305d\u306e\u307e\u307e\u4f7f\u3048\u307e\u3059\u3002\n\n\n\u3053\u306e\u8a18\u4e8b\u3092\u66f8\u3044\u305f\u3068\u304d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n\nGitLab \u30a4\u30e1\u30fc\u30b8: gitlab/gitlab-ce: 8.15.4-ce.1\nRedmine \u30a4\u30e1\u30fc\u30b8: redmine:3.3.2\nPostgreSQL \u30a4\u30e1\u30fc\u30b8: postgres:9.6.1 \u203bRedmine \u7528\n\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9 (docker-compose.yml\u3001Dockerfile \u306a\u3069)\n\u4eca\u56de\u4f5c\u3063\u305f GitLab & Redmine \u9023\u643a\u306e Docker \u30b3\u30f3\u30c6\u30ca\u7528\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f GitHub \u306b\u7f6e\u3044\u3066\u3042\u308a\u307e\u3059\u3002\nhttps://github.com/nkenbou/gitlab-redmine\n\n\u9023\u643a\u53ef\u80fd\u306a\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306e\u30cf\u30c3\u30af & \u8a2d\u5b9a\ndocker\u3001docker-compose \u306e\u30b3\u30de\u30f3\u30c9\u306e\u4f7f\u3044\u65b9\u3084\u3001Dockerfile\u3001docker-compose.yml \u306e\u66f8\u304d\u65b9\u306a\u3069\u306e\u8aac\u660e\u306f\u7701\u7565\u3057\u307e\u3059\u3002\n\nGitLab \u30b3\u30f3\u30c6\u30ca\u4e0a\u306e git \u30ea\u30dd\u30b8\u30c8\u30ea\u3092 Redmine \u30b3\u30f3\u30c6\u30ca\u304b\u3089\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\nRedmine \u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u8a2d\u5b9a\u3067 GitLab \u30b3\u30f3\u30c6\u30ca\u4e0a\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u306b\u3001GitLab \u306e\u30c7\u30fc\u30bf\u30dc\u30ea\u30e5\u30fc\u30e0\u3092 Redmine \u3067\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\u304c\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e GitLab \u30a4\u30e1\u30fc\u30b8\u3060\u3068\u305d\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u30aa\u30fc\u30ca\u30fc\u3057\u304b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u6a29\u9650\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001\u30b3\u30f3\u30c6\u30ca\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u624b\u52d5\u3067\u30aa\u30fc\u30ca\u30fc\u5909\u66f4&\u6a29\u9650\u5909\u66f4\u3057\u3066\u3082\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u518d\u8d77\u52d5\u6642\u306a\u3069\u306b Chef \u304c\u5b9f\u884c\u3055\u308c\u3066\u8a2d\u5b9a\u304c\u5143\u306b\u623b\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n$ cd /var/opt/gitlab\n$ ls -l\n...\ndrwx------ 3 git          root        4096 Jan 17 23:13 git-data\n...\n$ ls -al git-data/\n...\ndrwxrws---  5 git  root  4096 Jan 20 21:18 repositories\n...\n\n$ cat /opt/gitlab/embedded/cookbooks/gitlab/attributes/default.rb\n...\ndefault['gitlab']['user']['username'] = \"git\"\ndefault['gitlab']['user']['group'] = \"git\"\ndefault['gitlab']['user']['uid'] = nil\ndefault['gitlab']['user']['gid'] = nil\n...\ndefault['gitlab']['gitlab-shell']['git_data_directories'] = {\n  \"default\" => \"/var/opt/gitlab/git-data\"\n}\ndefault['gitlab']['gitlab-rails']['repositories_storages'] = {\n  \"default\" => \"/var/opt/gitlab/git-data/repositories\"\n}\n...\n\n$ cat /opt/gitlab/embedded/cookbooks/gitlab/recipes/gitlab-shell.rb\n...\ngit_data_directories = node['gitlab']['gitlab-shell']['git_data_directories']\nrepositories_storages = node['gitlab']['gitlab-rails']['repositories_storages']\n...\ngit_data_directories.each do |_name, git_data_directory|\n  storage_directory git_data_directory do\n    owner git_user\n    mode \"0700\"\n  end\nend\n\nrepositories_storages.each do |_name, repositories_storage|\n  storage_directory repositories_storage do\n    owner git_user\n    mode \"2770\"\n  end\nend\n...\n\n\u305d\u3053\u3067\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e GitLab \u30a4\u30e1\u30fc\u30b8\u3092\u7d99\u627f\u3057\u3066\u3001\u30aa\u30fc\u30ca\u30fc\u3068\u6a29\u9650\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u51e6\u7406\u3092\u4e0a\u66f8\u304d\u3057\u3066 git \u30b0\u30eb\u30fc\u30d7\u306b\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u307e\u3059\u3002\ngitlab-ce/Dockerfile (\u629c\u7c8b)\nRUN sed -i -e '/storage_directory git_data_directory do/,/end/ s/mode \"[0-9]\\+\"/mode \"0750\"/ ' /opt/gitlab/embedded/cookbooks/gitlab/recipes/gitlab-shell.rb\n\nRUN sed -i -e '/storage_directory git_data_directory do$/a \\ \\ \\ \\ group git_group' /opt/gitlab/embedded/cookbooks/gitlab/recipes/gitlab-shell.rb\n\nRUN sed -i -e '/storage_directory repositories_storage do$/a \\ \\ \\ \\ group git_group' /opt/gitlab/embedded/cookbooks/gitlab/recipes/gitlab-shell.rb\n\n\u3055\u3089\u306b\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30aa\u30fc\u30ca\u30fc (git) \u306e uid \u3068 gid \u3092\u660e\u793a\u7684\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\ndocker-compose.yml (\u629c\u7c8b)\n...\nservices:\n  gitlab:\n    ...\n    environment:\n      GITLAB_OMNIBUS_CONFIG: |\n        external_url 'http://localhost'\n        user['uid'] = 998\n        user['gid'] = 998\n...\n\n\u305d\u3057\u3066\u3001Redmine \u306e\u307b\u3046\u3082\u30a4\u30e1\u30fc\u30b8\u3092\u7d99\u627f\u3057\u3066\u3001git \u30e6\u30fc\u30b6\u30fc\u3001git \u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\u3001redmine \u30e6\u30fc\u30b6\u30fc\u3092 git \u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\nredmine/Dockerfile\nRUN groupadd -g 998 git && useradd -u 998 -g git git && gpasswd -a redmine git\n\n\u3053\u308c\u3067\u3001GitLab \u30b3\u30f3\u30c6\u30ca\u4e0a\u306e git \u30ea\u30dd\u30b8\u30c8\u30ea\u3092 Redmine \u30b3\u30f3\u30c6\u30ca\u304b\u3089\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\nGitLab \u3068 Redmine \u3092\u9023\u643a\u3055\u305b\u3066\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3053\u3068\n\u5f53\u8a18\u4e8b\u3067\u53d6\u308a\u6271\u3063\u3066\u3044\u308b\u306e\u306f\u79c1\u81ea\u8eab\u304c\u5b9f\u969b\u306b\u8a66\u3057\u305f\u6a5f\u80fd\u3060\u3051\u3067\u3059\u3002\u3053\u3053\u306b\u66f8\u3044\u305f\u3053\u3068\u4ee5\u5916\u306b\u3082\u4fbf\u5229\u306a\u6a5f\u80fd\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\nGitLab \u306e Issues \u30bf\u30d6\u304c Redmine \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30ea\u30f3\u30af\u3055\u308c\u307e\u3059\u3002\nGitLab \u306e New issue \u30e1\u30cb\u30e5\u30fc\u304c Redmine \u306e\u65b0\u898f\u30c1\u30b1\u30c3\u30c8\u4f5c\u6210\u30da\u30fc\u30b8\u306b\u30ea\u30f3\u30af\u3055\u308c\u307e\u3059\u3002\nGit \u306e\u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u306b refs #123 \u306a\u3069 (\u30c1\u30b1\u30c3\u30c8\u756a\u53f7\u3060\u3068\u5224\u5b9a\u3055\u305b\u308b\u305f\u3081\u306e\u30ad\u30fc\u30ef\u30fc\u30c9 (refs \u306a\u3069) \u306f\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\u5f8c\u8ff0\u3002) \u3068\u66f8\u304f\u3068\u3001GitLab \u306e\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u304b\u3089 Redmine \u306e #123 \u30c1\u30b1\u30c3\u30c8\u3078\u306e\u30ea\u30f3\u30af\u304c\u4f5c\u6210\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\nGit \u306e\u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u304b\u3089\u3001Redmine \u30c1\u30b1\u30c3\u30c8\u306e\u5404\u7a2e\u30b9\u30c6\u30fc\u30bf\u30b9 (\u4f5c\u696d\u6642\u9593\u306a\u3069) \u3092\u64cd\u4f5c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u5f53\u8a18\u4e8b\u3067\u306f GitLab\u3001Redmine \u3068\u3082 test \u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u3068\u3057\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\n\nRedmine \u5074\u306e\u8a2d\u5b9a\nRedmine \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3068\u9023\u643a\u3055\u305b\u308b\u305f\u3081\u306b Redmine \u5074\u306b\u3082\u6e96\u5099\u304c\u5fc5\u8981\u3067\u3059\u3002\n\nRedmine \u30e6\u30fc\u30b6\u30fc\u306e\u8a2d\u5b9a\nRedmine \u306e \u30ed\u30b0\u30a4\u30f3ID \u3068\u5404\u30e6\u30fc\u30b6\u30fc\u306e\u958b\u767a\u30de\u30b7\u30f3\u306e git \u8a2d\u5b9a user.name \u306f\u5408\u308f\u305b\u3066\u304a\u304f\u3068\u3088\u3044\u3067\u3059\u3002\n\u958b\u767a\u30de\u30b7\u30f3\u306e user.name \u3092\u8a2d\u5b9a\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\n$ git config --global user.name \"nkenbou\"\n\n\u3082\u3057\u3001\u5225\u3005\u306b\u3057\u305f\u3044\u5834\u5408\u306f\u6b21\u306e\u30da\u30fc\u30b8\u3067\u3001\u30ed\u30b0\u304b\u3089\u691c\u51fa\u3055\u308c\u305f git \u30e6\u30fc\u30b6\u30fc\u3068 Redmine \u30e6\u30fc\u30b6\u30fc\u3092\u95a2\u9023\u4ed8\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\n\u30ea\u30dd\u30b8\u30c8\u30ea (\u7ba1\u7406) \u306e\u8a2d\u5b9a\n\n\u8a2d\u5b9a\u306e\u30dd\u30a4\u30f3\u30c8:\n\n\n\u30b3\u30df\u30c3\u30c8\u3092\u81ea\u52d5\u53d6\u5f97\u3059\u308b: on\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u7ba1\u7406\u7528\u306eWeb\u30b5\u30fc\u30d3\u30b9\u3092\u6709\u52b9\u306b\u3059\u308b: on\n\nAPI\u30ad\u30fc: \u30ad\u30fc\u306e\u751f\u6210 \u30ea\u30f3\u30af\u304b\u3089\u8a2d\u5b9a\n\n\u53c2\u7167\u7528\u30ad\u30fc\u30ef\u30fc\u30c9: \u30c1\u30b1\u30c3\u30c8\u756a\u53f7\u3060\u3068\u5224\u5b9a\u3055\u305b\u308b\u305f\u3081\u306e\u30ad\u30fc\u30ef\u30fc\u30c9\u306e\u8a2d\u5b9a\u3067\u3059\u3002* \u3092\u8ffd\u52a0\u3059\u308b\u3068\u30ad\u30fc\u30ef\u30fc\u30c9\u304c\u4e0d\u8981\u306b\u306a\u308a\u307e\u3059 (\u4f8b. #123)\u3002\n\n\u7570\u306a\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30c1\u30b1\u30c3\u30c8\u306e\u53c2\u7167/\u4fee\u6b63\u3092\u8a31\u53ef: on\n\n\u30b3\u30df\u30c3\u30c8\u6642\u306b\u4f5c\u696d\u6642\u9593\u3092\u8a18\u9332\u3059\u308b: on\n\n\u4f5c\u696d\u6642\u9593\u306e\u4f5c\u696d\u5206\u985e: \u9069\u5b9c\n\n\n\u30ea\u30dd\u30b8\u30c8\u30ea (\u30d7\u30ed\u30b8\u30a7\u30af\u30c8) \u306e\u8a2d\u5b9a\n\n\u8a2d\u5b9a\u306e\u30dd\u30a4\u30f3\u30c8:\n\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0: Git\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30d1\u30b9: /var/opt/gitlab/git-data/repositories/XXX/YYY.git\n\n\n\nXXX: GitLab \u3067\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\n\nYYY: GitLab \u3067\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\n\n\n\u305d\u306e\u4ed6\u306e\u8a2d\u5b9a\u306f\u9069\u5b9c\n\n\n\u305d\u306e\u4ed6\u3001Redmine \u3067\u6700\u4f4e\u9650\u5fc5\u8981\u306a\u8a2d\u5b9a\u9805\u76ee\n\n\u30c1\u30b1\u30c3\u30c8\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\n\u30c8\u30e9\u30c3\u30ab\u30fc\n\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\n\u5217\u6319\u9805\u76ee\n\n\n\u30c1\u30b1\u30c3\u30c8\u306e\u512a\u5148\u5ea6\n\u4f5c\u696d\u5206\u985e (\u6642\u9593\u7ba1\u7406)\n\n\n\n\nGitLab \u5074\u306e\u8a2d\u5b9a\n\nRedmine \u30b5\u30fc\u30d3\u30b9 (\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8) \u306e\u8a2d\u5b9a\nAdmin \u6a29\u9650\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3001Service Templates > Redmine \u3068\u9078\u629e\u3057\u3066\u3044\u304d Redmine \u30b5\u30fc\u30d3\u30b9\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u30da\u30fc\u30b8\u3092\u958b\u304d\u307e\u3059\u3002\n\n\u8a2d\u5b9a\u306e\u30dd\u30a4\u30f3\u30c8:\n\n\nActive: on\n\nTrigger: on\nURL \u306elocalhost:10081 \u306e\u90e8\u5206\u306f\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u9069\u5207\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\nProject url \u3001 New issue url \u306e :project_id \u306e\u90e8\u5206\u306f (\u81ea\u52d5\u7684\u306b\u7f6e\u304d\u63db\u3048\u3089\u308c\u305d\u3046\u3067\u3059\u304c) \u500b\u3005\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067 Redmine \u30b5\u30fc\u30d3\u30b9\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u969b\u306b\u624b\u52d5\u3067\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\nIssues url \u306e :id \u306f\u9023\u643a\u6642\u306b\u81ea\u52d5\u7684\u306b\u7f6e\u304d\u63db\u308f\u308a\u307e\u3059\u3002\n\n\nRedmine \u30b5\u30fc\u30d3\u30b9 (\u30d7\u30ed\u30b8\u30a7\u30af\u30c8) \u3092\u8a2d\u5b9a\nRedmine \u3068\u9023\u643a\u3057\u305f\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067 Services > Redmine \u3068\u9078\u629e\u3057\u3066\u3044\u304d Redmine \u30b5\u30fc\u30d3\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u30da\u30fc\u30b8\u3092\u958b\u304d\u307e\u3059\u3002\n\n\u8a2d\u5b9a\u306e\u30dd\u30a4\u30f3\u30c8:\n\n\nProject url \u3001 New issue url \u306e :project_id \u90e8\u5206\u3092 Redmine \u5074\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d (\u4f8b. test) \u306b\u7f6e\u304d\u63db\u3048\u307e\u3059\u3002\n\n\nWebhooks \u306e\u8a2d\u5b9a\nRedmine \u3068\u9023\u643a\u3057\u305f\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e Webhooks \u30e1\u30cb\u30e5\u30fc\u304b\u3089 Webhooks \u306e\u8a2d\u5b9a\u30da\u30fc\u30b8\u3092\u958b\u304d\u307e\u3059\u3002\n\n\u8a2d\u5b9a\u306e\u30dd\u30a4\u30f3\u30c8:\n\n\nURL:\n\n\n\u30db\u30b9\u30c8\u540d (\u4f8b. redmine) \u306f\u30b3\u30f3\u30c6\u30ca\u540c\u58eb\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306b Docker \u5185\u3067\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u3082\u306e\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002docker-compose.yml \u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u30b5\u30fc\u30d3\u30b9\u540d\u3067\u3059\u3002\n\u30dd\u30fc\u30c8: redmine \u30b3\u30f3\u30c6\u30ca\u5074\u306e\u30dd\u30fc\u30c8 (\u4f8b. 3000) \u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nkey=: Redmine \u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u8a2d\u5b9a\u306e API\u30ad\u30fc (\u4f8b. bP6pRCyiDsjPIHMNQAQf) \u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\u3053\u308c\u3067\u3001\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u3002\nRedmine \u306e\u30c1\u30b1\u30c3\u30c8\u9023\u643a\u6a5f\u80fd\u3060\u3051\u52d5\u4f5c\u78ba\u8a8d\u3092\u8f09\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u30b3\u30df\u30c3\u30c8 (\u4f5c\u696d\u6642\u9593\u306e\u8a18\u9332)\n\u4f8b. #1 \u30c1\u30b1\u30c3\u30c8\u306b\u4f5c\u696d\u6642\u9593 2h30m \u3067\u767b\u9332\u3059\u308b\u3088\u3046\u306b\u30b3\u30df\u30c3\u30c8\u3002\n$ cd /path/to/test\n$ echo \"#GitLab & Redmine\" > README.md\n$ git add README.md\n$ git commit -m \"#1 @2h30m add title\"\n$ git push\n\n\n\u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u3088\u308b\u4f5c\u696d\u6642\u9593\u306e\u8a18\u9332\u306b\u3064\u3044\u3066\u306f\u6b21\u306e\u30b5\u30a4\u30c8\u304c\u8a73\u3057\u3044\u3067\u3059\u3002\nhttp://blog.redmine.jp/articles/new-feature-1_1/automatic-spent-time-logging/\n\n\u307e\u3068\u3081\n\u3053\u306e\u8a18\u4e8b\u306e\u65b9\u6cd5\u3060\u3068\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u6642\u306b\u52d5\u4f5c\u3057\u306a\u304f\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u305f\u3044\u3057\u305f\u30cf\u30c3\u30af\u306f\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u305d\u306e\u90fd\u5ea6\u5bfe\u5fdc\u3082\u3067\u304d\u305d\u3046\u3067\u3059\u3002\n\u3060\u3051\u3069\u3001\u73fe\u6642\u70b9\u3067\u306f sameersbn/docker-gitlab \u3068 sameersbn/docker-redmine \u3092\u4f7f\u3063\u305f\u307b\u3046\u304c\u697d\u304b\u306a\u3002\n\u305d\u3053\u305d\u3053\u8abf\u3079\u305f\u306e\u3067\u3059\u304c\u3001\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306a GitLab \u3068 Redmine \u306e Docker \u30b3\u30f3\u30c6\u30ca\u3092\u9023\u643a\u3055\u305b\u308b\u6b63\u5f53\u306a\u3084\u308a\u65b9\u306f\u898b\u3064\u3051\u3089\u308c\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3054\u5b58\u3058\u306e\u65b9\u304c\u3044\u3089\u3063\u3057\u3083\u3044\u307e\u3057\u305f\u3089\u30b3\u30e1\u30f3\u30c8\u306a\u3069\u3044\u305f\u3060\u3051\u308b\u3068\u3046\u308c\u3057\u3044\u3067\u3059\u3002\n\n\u53c2\u8003\u6587\u732e\n\nRedmine Service - GitLab Documentation\nRedmine 1.1 \u65b0\u6a5f\u80fd\u7d39\u4ecb: \u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u3088\u308b\u4f5c\u696d\u6642\u9593\u306e\u8a18\u9332 | Redmine.JP Blog\nSE\u596e\u95d8\u8a18: Redmine\u3068GitLab\u306e\u9023\u643a\u3002Push\u3067\u30c1\u30b1\u30c3\u30c8\u306eStatus\u3092\u5909\u66f4\n\n## \u306f\u3058\u3081\u306b\n\n### \u5bfe\u8c61\u3068\u306a\u308b\u8aad\u8005\n\n* [\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306a GitLab \u30a4\u30e1\u30fc\u30b8](https://hub.docker.com/r/gitlab/gitlab-ce/) \u3092\u4f7f\u3044\u305f\u3044\u4eba\n* [\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306a Redmine \u30a4\u30e1\u30fc\u30b8](https://hub.docker.com/_/redmine/) \u3092\u4f7f\u3044\u305f\u3044\u4eba\n* \u4e0a\u8a18\u306e\u30a4\u30e1\u30fc\u30b8\u304b\u3089\u4f5c\u6210\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3092\u9023\u643a\u3055\u305b\u305f\u3044\u4eba\n\n### \u3053\u306e\u8a18\u4e8b\u3092\u8aad\u3093\u3060\u5f8c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3053\u3068\n\n* GitLab \u306e Issues \u30bf\u30d6\u304c Redmine \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30ea\u30f3\u30af\u3055\u308c\u307e\u3059\u3002\n* GitLab \u306e\u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u5185\u306e issue \u756a\u53f7\u304c Redmine \u30c1\u30b1\u30c3\u30c8\u306b\u30ea\u30f3\u30af\u3055\u308c\u307e\u3059\u3002\n* Redmine \u306e\u30c1\u30b1\u30c3\u30c8\u9023\u643a\u6a5f\u80fd\u304c\u305d\u306e\u307e\u307e\u4f7f\u3048\u307e\u3059\u3002\n\n### \u3053\u306e\u8a18\u4e8b\u3092\u66f8\u3044\u305f\u3068\u304d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n\n* GitLab \u30a4\u30e1\u30fc\u30b8: gitlab/gitlab-ce: 8.15.4-ce.1\n* Redmine \u30a4\u30e1\u30fc\u30b8: redmine:3.3.2\n* PostgreSQL \u30a4\u30e1\u30fc\u30b8: postgres:9.6.1 \u203bRedmine \u7528\n\n### \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9 (docker-compose.yml\u3001Dockerfile \u306a\u3069)\n\n\u4eca\u56de\u4f5c\u3063\u305f GitLab & Redmine \u9023\u643a\u306e Docker \u30b3\u30f3\u30c6\u30ca\u7528\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f GitHub \u306b\u7f6e\u3044\u3066\u3042\u308a\u307e\u3059\u3002\n\nhttps://github.com/nkenbou/gitlab-redmine\n\n## \u9023\u643a\u53ef\u80fd\u306a\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306e\u30cf\u30c3\u30af & \u8a2d\u5b9a\n\ndocker\u3001docker-compose \u306e\u30b3\u30de\u30f3\u30c9\u306e\u4f7f\u3044\u65b9\u3084\u3001Dockerfile\u3001docker-compose.yml \u306e\u66f8\u304d\u65b9\u306a\u3069\u306e\u8aac\u660e\u306f\u7701\u7565\u3057\u307e\u3059\u3002\n\n### GitLab \u30b3\u30f3\u30c6\u30ca\u4e0a\u306e git \u30ea\u30dd\u30b8\u30c8\u30ea\u3092 Redmine \u30b3\u30f3\u30c6\u30ca\u304b\u3089\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n\nRedmine \u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u8a2d\u5b9a\u3067 GitLab \u30b3\u30f3\u30c6\u30ca\u4e0a\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u306b\u3001GitLab \u306e\u30c7\u30fc\u30bf\u30dc\u30ea\u30e5\u30fc\u30e0\u3092 Redmine \u3067\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\u304c\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e GitLab \u30a4\u30e1\u30fc\u30b8\u3060\u3068\u305d\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u30aa\u30fc\u30ca\u30fc\u3057\u304b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u6a29\u9650\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u30b3\u30f3\u30c6\u30ca\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u624b\u52d5\u3067\u30aa\u30fc\u30ca\u30fc\u5909\u66f4&\u6a29\u9650\u5909\u66f4\u3057\u3066\u3082\u3001\u30b3\u30f3\u30c6\u30ca\u306e\u518d\u8d77\u52d5\u6642\u306a\u3069\u306b Chef \u304c\u5b9f\u884c\u3055\u308c\u3066\u8a2d\u5b9a\u304c\u5143\u306b\u623b\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n```sh\n$ cd /var/opt/gitlab\n$ ls -l\n...\ndrwx------ 3 git          root        4096 Jan 17 23:13 git-data\n...\n$ ls -al git-data/\n...\ndrwxrws---  5 git  root  4096 Jan 20 21:18 repositories\n...\n```\n\n```sh\n$ cat /opt/gitlab/embedded/cookbooks/gitlab/attributes/default.rb\n...\ndefault['gitlab']['user']['username'] = \"git\"\ndefault['gitlab']['user']['group'] = \"git\"\ndefault['gitlab']['user']['uid'] = nil\ndefault['gitlab']['user']['gid'] = nil\n...\ndefault['gitlab']['gitlab-shell']['git_data_directories'] = {\n  \"default\" => \"/var/opt/gitlab/git-data\"\n}\ndefault['gitlab']['gitlab-rails']['repositories_storages'] = {\n  \"default\" => \"/var/opt/gitlab/git-data/repositories\"\n}\n...\n```\n\n```sh\n$ cat /opt/gitlab/embedded/cookbooks/gitlab/recipes/gitlab-shell.rb\n...\ngit_data_directories = node['gitlab']['gitlab-shell']['git_data_directories']\nrepositories_storages = node['gitlab']['gitlab-rails']['repositories_storages']\n...\ngit_data_directories.each do |_name, git_data_directory|\n  storage_directory git_data_directory do\n    owner git_user\n    mode \"0700\"\n  end\nend\n\nrepositories_storages.each do |_name, repositories_storage|\n  storage_directory repositories_storage do\n    owner git_user\n    mode \"2770\"\n  end\nend\n...\n```\n\n\u305d\u3053\u3067\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e GitLab \u30a4\u30e1\u30fc\u30b8\u3092\u7d99\u627f\u3057\u3066\u3001\u30aa\u30fc\u30ca\u30fc\u3068\u6a29\u9650\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u51e6\u7406\u3092\u4e0a\u66f8\u304d\u3057\u3066 `git` \u30b0\u30eb\u30fc\u30d7\u306b\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u307e\u3059\u3002\n\n**gitlab-ce/Dockerfile** (\u629c\u7c8b)\n\n```Dockerfile\nRUN sed -i -e '/storage_directory git_data_directory do/,/end/ s/mode \"[0-9]\\+\"/mode \"0750\"/ ' /opt/gitlab/embedded/cookbooks/gitlab/recipes/gitlab-shell.rb\n\nRUN sed -i -e '/storage_directory git_data_directory do$/a \\ \\ \\ \\ group git_group' /opt/gitlab/embedded/cookbooks/gitlab/recipes/gitlab-shell.rb\n\nRUN sed -i -e '/storage_directory repositories_storage do$/a \\ \\ \\ \\ group git_group' /opt/gitlab/embedded/cookbooks/gitlab/recipes/gitlab-shell.rb\n```\n\n\u3055\u3089\u306b\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30aa\u30fc\u30ca\u30fc (`git`) \u306e uid \u3068 gid \u3092\u660e\u793a\u7684\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n**docker-compose\\.yml** (\u629c\u7c8b)\n\n```yaml\n...\nservices:\n  gitlab:\n    ...\n    environment:\n      GITLAB_OMNIBUS_CONFIG: |\n        external_url 'http://localhost'\n        user['uid'] = 998\n        user['gid'] = 998\n...\n```\n\n\u305d\u3057\u3066\u3001Redmine \u306e\u307b\u3046\u3082\u30a4\u30e1\u30fc\u30b8\u3092\u7d99\u627f\u3057\u3066\u3001`git` \u30e6\u30fc\u30b6\u30fc\u3001`git` \u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\u3001`redmine` \u30e6\u30fc\u30b6\u30fc\u3092 `git` \u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n**redmine/Dockerfile**\n\n```dockerfile\nRUN groupadd -g 998 git && useradd -u 998 -g git git && gpasswd -a redmine git\n```\n\n\u3053\u308c\u3067\u3001GitLab \u30b3\u30f3\u30c6\u30ca\u4e0a\u306e git \u30ea\u30dd\u30b8\u30c8\u30ea\u3092 Redmine \u30b3\u30f3\u30c6\u30ca\u304b\u3089\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n## GitLab \u3068 Redmine \u3092\u9023\u643a\u3055\u305b\u3066\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3053\u3068\n\n\u5f53\u8a18\u4e8b\u3067\u53d6\u308a\u6271\u3063\u3066\u3044\u308b\u306e\u306f\u79c1\u81ea\u8eab\u304c\u5b9f\u969b\u306b\u8a66\u3057\u305f\u6a5f\u80fd\u3060\u3051\u3067\u3059\u3002\u3053\u3053\u306b\u66f8\u3044\u305f\u3053\u3068\u4ee5\u5916\u306b\u3082\u4fbf\u5229\u306a\u6a5f\u80fd\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n* GitLab \u306e **Issues** \u30bf\u30d6\u304c Redmine \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30ea\u30f3\u30af\u3055\u308c\u307e\u3059\u3002\n* GitLab \u306e **New issue** \u30e1\u30cb\u30e5\u30fc\u304c Redmine \u306e\u65b0\u898f\u30c1\u30b1\u30c3\u30c8\u4f5c\u6210\u30da\u30fc\u30b8\u306b\u30ea\u30f3\u30af\u3055\u308c\u307e\u3059\u3002\n* Git \u306e\u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u306b `refs #123` \u306a\u3069 (\u30c1\u30b1\u30c3\u30c8\u756a\u53f7\u3060\u3068\u5224\u5b9a\u3055\u305b\u308b\u305f\u3081\u306e\u30ad\u30fc\u30ef\u30fc\u30c9 (`refs` \u306a\u3069) \u306f\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\u5f8c\u8ff0\u3002) \u3068\u66f8\u304f\u3068\u3001GitLab \u306e\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u304b\u3089 Redmine \u306e `#123` \u30c1\u30b1\u30c3\u30c8\u3078\u306e\u30ea\u30f3\u30af\u304c\u4f5c\u6210\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n* Git \u306e\u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u304b\u3089\u3001Redmine \u30c1\u30b1\u30c3\u30c8\u306e\u5404\u7a2e\u30b9\u30c6\u30fc\u30bf\u30b9 (\u4f5c\u696d\u6642\u9593\u306a\u3069) \u3092\u64cd\u4f5c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u5f53\u8a18\u4e8b\u3067\u306f GitLab\u3001Redmine \u3068\u3082 `test` \u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u3068\u3057\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\n\n## Redmine \u5074\u306e\u8a2d\u5b9a\n\nRedmine \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3068\u9023\u643a\u3055\u305b\u308b\u305f\u3081\u306b Redmine \u5074\u306b\u3082\u6e96\u5099\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n### Redmine \u30e6\u30fc\u30b6\u30fc\u306e\u8a2d\u5b9a\n\nRedmine \u306e **\u30ed\u30b0\u30a4\u30f3ID** \u3068\u5404\u30e6\u30fc\u30b6\u30fc\u306e\u958b\u767a\u30de\u30b7\u30f3\u306e git \u8a2d\u5b9a `user.name` \u306f\u5408\u308f\u305b\u3066\u304a\u304f\u3068\u3088\u3044\u3067\u3059\u3002\n\n\u958b\u767a\u30de\u30b7\u30f3\u306e `user.name` \u3092\u8a2d\u5b9a\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\n\n```sh\n$ git config --global user.name \"nkenbou\"\n```\n\n\u3082\u3057\u3001\u5225\u3005\u306b\u3057\u305f\u3044\u5834\u5408\u306f\u6b21\u306e\u30da\u30fc\u30b8\u3067\u3001\u30ed\u30b0\u304b\u3089\u691c\u51fa\u3055\u308c\u305f git \u30e6\u30fc\u30b6\u30fc\u3068 Redmine \u30e6\u30fc\u30b6\u30fc\u3092\u95a2\u9023\u4ed8\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n![redmine-repository-user.png](https://qiita-image-store.s3.amazonaws.com/0/85728/e5db39d7-a565-f664-2476-dab26eeaf407.png)\n\n\n\n### \u30ea\u30dd\u30b8\u30c8\u30ea (\u7ba1\u7406) \u306e\u8a2d\u5b9a\n\n![redmine-admin-repository.png](https://qiita-image-store.s3.amazonaws.com/0/85728/8cb6e120-b80b-c79b-3ae8-5193ea43286b.png)\n\n**\u8a2d\u5b9a\u306e\u30dd\u30a4\u30f3\u30c8:**\n\n* **\u30b3\u30df\u30c3\u30c8\u3092\u81ea\u52d5\u53d6\u5f97\u3059\u308b**: on\n* **\u30ea\u30dd\u30b8\u30c8\u30ea\u7ba1\u7406\u7528\u306eWeb\u30b5\u30fc\u30d3\u30b9\u3092\u6709\u52b9\u306b\u3059\u308b**: on\n* **API\u30ad\u30fc**: **\u30ad\u30fc\u306e\u751f\u6210** \u30ea\u30f3\u30af\u304b\u3089\u8a2d\u5b9a\n* **\u53c2\u7167\u7528\u30ad\u30fc\u30ef\u30fc\u30c9**: \u30c1\u30b1\u30c3\u30c8\u756a\u53f7\u3060\u3068\u5224\u5b9a\u3055\u305b\u308b\u305f\u3081\u306e\u30ad\u30fc\u30ef\u30fc\u30c9\u306e\u8a2d\u5b9a\u3067\u3059\u3002`*` \u3092\u8ffd\u52a0\u3059\u308b\u3068\u30ad\u30fc\u30ef\u30fc\u30c9\u304c\u4e0d\u8981\u306b\u306a\u308a\u307e\u3059 (\u4f8b. `#123`)\u3002\n* **\u7570\u306a\u308b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30c1\u30b1\u30c3\u30c8\u306e\u53c2\u7167/\u4fee\u6b63\u3092\u8a31\u53ef**: on\n* **\u30b3\u30df\u30c3\u30c8\u6642\u306b\u4f5c\u696d\u6642\u9593\u3092\u8a18\u9332\u3059\u308b**: on\n* **\u4f5c\u696d\u6642\u9593\u306e\u4f5c\u696d\u5206\u985e**: \u9069\u5b9c\n\n### \u30ea\u30dd\u30b8\u30c8\u30ea (\u30d7\u30ed\u30b8\u30a7\u30af\u30c8) \u306e\u8a2d\u5b9a\n\n![redmine-project-repository.png](https://qiita-image-store.s3.amazonaws.com/0/85728/b2ec626f-dbb9-29c9-b5bf-fe506e31d288.png)\n\n**\u8a2d\u5b9a\u306e\u30dd\u30a4\u30f3\u30c8:**\n\n* **\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0**: Git\n* **\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30d1\u30b9**: /var/opt/gitlab/git-data/repositories/*XXX*/*YYY*.git\n    * *XXX*: GitLab \u3067\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\n    * *YYY*: GitLab \u3067\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\n* \u305d\u306e\u4ed6\u306e\u8a2d\u5b9a\u306f\u9069\u5b9c\n\n### \u305d\u306e\u4ed6\u3001Redmine \u3067\u6700\u4f4e\u9650\u5fc5\u8981\u306a\u8a2d\u5b9a\u9805\u76ee\n\n* \u30c1\u30b1\u30c3\u30c8\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\n* \u30c8\u30e9\u30c3\u30ab\u30fc\n* \u30ef\u30fc\u30af\u30d5\u30ed\u30fc\n* \u5217\u6319\u9805\u76ee\n    * \u30c1\u30b1\u30c3\u30c8\u306e\u512a\u5148\u5ea6\n    * \u4f5c\u696d\u5206\u985e (\u6642\u9593\u7ba1\u7406)\n\n## GitLab \u5074\u306e\u8a2d\u5b9a\n\n### Redmine \u30b5\u30fc\u30d3\u30b9 (\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8) \u306e\u8a2d\u5b9a\n\nAdmin \u6a29\u9650\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3001**Service Templates** > **Redmine** \u3068\u9078\u629e\u3057\u3066\u3044\u304d Redmine \u30b5\u30fc\u30d3\u30b9\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u30da\u30fc\u30b8\u3092\u958b\u304d\u307e\u3059\u3002\n\n![gitlab-service-template-redmine.png](https://qiita-image-store.s3.amazonaws.com/0/85728/e68b3dd5-69e9-0074-dee1-261e230fd35b.png)\n\n**\u8a2d\u5b9a\u306e\u30dd\u30a4\u30f3\u30c8:**\n\n* **Active**: on\n* **Trigger**: on\n* URL \u306e`localhost:10081` \u306e\u90e8\u5206\u306f\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u9069\u5207\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n* **Project url** \u3001 **New issue url** \u306e `:project_id` \u306e\u90e8\u5206\u306f (\u81ea\u52d5\u7684\u306b\u7f6e\u304d\u63db\u3048\u3089\u308c\u305d\u3046\u3067\u3059\u304c) \u500b\u3005\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067 Redmine \u30b5\u30fc\u30d3\u30b9\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u969b\u306b\u624b\u52d5\u3067\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n* **Issues url** \u306e `:id` \u306f\u9023\u643a\u6642\u306b\u81ea\u52d5\u7684\u306b\u7f6e\u304d\u63db\u308f\u308a\u307e\u3059\u3002\n\n### Redmine \u30b5\u30fc\u30d3\u30b9 (\u30d7\u30ed\u30b8\u30a7\u30af\u30c8) \u3092\u8a2d\u5b9a\n\nRedmine \u3068\u9023\u643a\u3057\u305f\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067 **Services** > **Redmine** \u3068\u9078\u629e\u3057\u3066\u3044\u304d Redmine \u30b5\u30fc\u30d3\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u30da\u30fc\u30b8\u3092\u958b\u304d\u307e\u3059\u3002\n\n![gitlab-service-redmine.png](https://qiita-image-store.s3.amazonaws.com/0/85728/968e623d-2e11-63ae-7e69-5190523c6ac7.png)\n\n\n**\u8a2d\u5b9a\u306e\u30dd\u30a4\u30f3\u30c8:**\n\n* **Project url** \u3001 **New issue url** \u306e `:project_id` \u90e8\u5206\u3092 Redmine \u5074\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d (\u4f8b. `test`) \u306b\u7f6e\u304d\u63db\u3048\u307e\u3059\u3002\n\n### Webhooks \u306e\u8a2d\u5b9a\n\nRedmine \u3068\u9023\u643a\u3057\u305f\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e **Webhooks** \u30e1\u30cb\u30e5\u30fc\u304b\u3089 Webhooks \u306e\u8a2d\u5b9a\u30da\u30fc\u30b8\u3092\u958b\u304d\u307e\u3059\u3002\n\n![gitlab-webhooks.png](https://qiita-image-store.s3.amazonaws.com/0/85728/879d3b4f-0580-5ebb-340c-1361db99510b.png)\n\n**\u8a2d\u5b9a\u306e\u30dd\u30a4\u30f3\u30c8:**\n\n* **URL**:\n    * \u30db\u30b9\u30c8\u540d (\u4f8b. `redmine`) \u306f\u30b3\u30f3\u30c6\u30ca\u540c\u58eb\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306b Docker \u5185\u3067\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u3082\u306e\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002docker-compose.yml \u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u30b5\u30fc\u30d3\u30b9\u540d\u3067\u3059\u3002\n    * \u30dd\u30fc\u30c8: redmine \u30b3\u30f3\u30c6\u30ca\u5074\u306e\u30dd\u30fc\u30c8 (\u4f8b. `3000`) \u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n    * key=: Redmine \u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u8a2d\u5b9a\u306e **API\u30ad\u30fc** (\u4f8b. `bP6pRCyiDsjPIHMNQAQf`) \u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n## \u52d5\u4f5c\u78ba\u8a8d\n\n\u3053\u308c\u3067\u3001\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\nRedmine \u306e\u30c1\u30b1\u30c3\u30c8\u9023\u643a\u6a5f\u80fd\u3060\u3051\u52d5\u4f5c\u78ba\u8a8d\u3092\u8f09\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n\n### \u30b3\u30df\u30c3\u30c8 (\u4f5c\u696d\u6642\u9593\u306e\u8a18\u9332)\n\n\u4f8b. `#1` \u30c1\u30b1\u30c3\u30c8\u306b\u4f5c\u696d\u6642\u9593 2h30m \u3067\u767b\u9332\u3059\u308b\u3088\u3046\u306b\u30b3\u30df\u30c3\u30c8\u3002\n\n```sh\n$ cd /path/to/test\n$ echo \"#GitLab & Redmine\" > README.md\n$ git add README.md\n$ git commit -m \"#1 @2h30m add title\"\n$ git push\n```\n\n![redmine-set-worktime.png](https://qiita-image-store.s3.amazonaws.com/0/85728/92a3a5c2-0ca3-79f5-f46b-ce60e85740cd.png)\n\n\u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u3088\u308b\u4f5c\u696d\u6642\u9593\u306e\u8a18\u9332\u306b\u3064\u3044\u3066\u306f\u6b21\u306e\u30b5\u30a4\u30c8\u304c\u8a73\u3057\u3044\u3067\u3059\u3002\n\nhttp://blog.redmine.jp/articles/new-feature-1_1/automatic-spent-time-logging/\n\n## \u307e\u3068\u3081\n\n\u3053\u306e\u8a18\u4e8b\u306e\u65b9\u6cd5\u3060\u3068\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u6642\u306b\u52d5\u4f5c\u3057\u306a\u304f\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u305f\u3044\u3057\u305f\u30cf\u30c3\u30af\u306f\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u305d\u306e\u90fd\u5ea6\u5bfe\u5fdc\u3082\u3067\u304d\u305d\u3046\u3067\u3059\u3002\n\u3060\u3051\u3069\u3001\u73fe\u6642\u70b9\u3067\u306f [sameersbn/docker-gitlab](https://github.com/sameersbn/docker-gitlab) \u3068 [sameersbn/docker-redmine](https://github.com/sameersbn/docker-redmine) \u3092\u4f7f\u3063\u305f\u307b\u3046\u304c\u697d\u304b\u306a\u3002\n\n\u305d\u3053\u305d\u3053\u8abf\u3079\u305f\u306e\u3067\u3059\u304c\u3001\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306a GitLab \u3068 Redmine \u306e Docker \u30b3\u30f3\u30c6\u30ca\u3092\u9023\u643a\u3055\u305b\u308b\u6b63\u5f53\u306a\u3084\u308a\u65b9\u306f\u898b\u3064\u3051\u3089\u308c\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3054\u5b58\u3058\u306e\u65b9\u304c\u3044\u3089\u3063\u3057\u3083\u3044\u307e\u3057\u305f\u3089\u30b3\u30e1\u30f3\u30c8\u306a\u3069\u3044\u305f\u3060\u3051\u308b\u3068\u3046\u308c\u3057\u3044\u3067\u3059\u3002\n\n### \u53c2\u8003\u6587\u732e\n\n* [Redmine Service - GitLab Documentation](https://docs.gitlab.com/ce/project_services/redmine.html)\n* [Redmine 1.1 \u65b0\u6a5f\u80fd\u7d39\u4ecb: \u30b3\u30df\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u3088\u308b\u4f5c\u696d\u6642\u9593\u306e\u8a18\u9332 | Redmine.JP Blog](http://blog.redmine.jp/articles/new-feature-1_1/automatic-spent-time-logging/)\n* [SE\u596e\u95d8\u8a18: Redmine\u3068GitLab\u306e\u9023\u643a\u3002Push\u3067\u30c1\u30b1\u30c3\u30c8\u306eStatus\u3092\u5909\u66f4](http://blog.dksg.jp/2015/05/redminegitlabpushstatus.html)\n", "tags": ["docker", "GitLab", "Redmine"]}