{"context": "require 'nokogiri'\nrequire 'pry'\nnow = Time.now\n\nTARGET = 8000\n\n# binding.pry\n@doc = Nokogiri::XML(File.open(ARGV[0]))\n\nall_coordinates_str = @doc.search(\"coordinates\").children.to_s\n\nall_coordinates = all_coordinates_str.split(\"\\n\")\n\nall_coordinates.each_with_index do |value, index|\n  all_coordinates.delete(value) if index%2==0\nend if all_coordinates.length > TARGET\nputs all_coordinates.length\n\n@doc.search(\"coordinates\").first.children = all_coordinates.join(\"\\n\")\n\nputs \"write back to #{ARGV[0] + \"_new.kml\"}\"\nputs Time.now-now\nFile.write(ARGV[0] + \"_new.xml\", @doc.to_xml)\n\n\nThis script try to reduce the KML point size to enable import to latlonglab\n\n```ruby\nrequire 'nokogiri'\nrequire 'pry'\nnow = Time.now\n\nTARGET = 8000\n\n# binding.pry\n@doc = Nokogiri::XML(File.open(ARGV[0]))\n\nall_coordinates_str = @doc.search(\"coordinates\").children.to_s\n\nall_coordinates = all_coordinates_str.split(\"\\n\")\n\nall_coordinates.each_with_index do |value, index|\n  all_coordinates.delete(value) if index%2==0\nend if all_coordinates.length > TARGET\nputs all_coordinates.length\n\n@doc.search(\"coordinates\").first.children = all_coordinates.join(\"\\n\")\n\nputs \"write back to #{ARGV[0] + \"_new.kml\"}\"\nputs Time.now-now\nFile.write(ARGV[0] + \"_new.xml\", @doc.to_xml)\n\n```\n\nThis script try to reduce the `KML` point size to enable import to [latlonglab](latlonglab.yahoo.co.jp/route)\n", "tags": ["Ruby", "Nokogiri"]}