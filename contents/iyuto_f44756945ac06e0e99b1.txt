{"tags": ["extension", "JavaScript", "MacOSX", "Safari"], "context": " More than 1 year has passed since last update.\u3084\u3084\u3053\u3057\u3044\u4e0a\u306b\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u5206\u304b\u308a\u306b\u304f\u3044\u3057\u3001\u30cd\u30c3\u30c8\u4e0a\u306b\u3082\u60c5\u5831\u304c\u5c11\u306a\u3044\u306e\u3067\u30e1\u30e2\u3002\n\u9593\u9055\u3063\u3066\u3044\u305f\u3089\u6307\u6458\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n1.PopOver\u7de8\n\npopover\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u969b\u306b\u8d77\u3053\u308b\u30a4\u30d9\u30f3\u30c8\u306e\u30ea\u30b9\u30ca\u30fc\n//popover.html\nsafari.application.addEventListener(\"popover\", functionName, true);\n\npopover\u306eHTML\u306b\u8a18\u8ff0\u3002popover\u306eHTML\u306b\u95a2\u6570\u3092\u7f6e\u304f\n\npopover\u5185\u304b\u3089global\u30da\u30fc\u30b8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\n//popover.html\nsafari.extension.globalPage.contentWindow.hoge();\n\nhoge();\u306fglobal\u30da\u30fc\u30b8\u5185\u306e\u95a2\u6570\u3002\u5f15\u6570\u3084\u623b\u308a\u5024\u306e\u8a2d\u5b9a\u3082\u53ef\u3002\n\npopover\u3092\u547c\u3073\u51fa\u3059\n//global.html\nsafari.extension.toolbarItems[i].showPopover();\n\nglobal\u30da\u30fc\u30b8\u306a\u3069\u3067\u547c\u3073\u51fa\u3059\u3002\ni\u306f\u30dc\u30bf\u30f3\u306e\u914d\u5217\u3002(\u30dc\u30bf\u30f3\u304c1\u500b\u306a\u30890)\npopover\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u3092global\u3067\u30c0\u30a4\u30ca\u30df\u30c3\u30af\u306b\u4f5c\u308b\u5834\u5408\u3082\u3001\u6700\u5f8c\u306b\u3053\u308c\u3092\u53e9\u304f\u3002\n\n2.Message\u7de8\n\ninject\u304b\u3089global\u3078\n//inject.js\nsafari.self.tab.dispatchMessage(name,hoge);\n\nname\u306fmessage\u306e\u540d\u524d\u3002\nhoge\u306f\u9001\u4fe1\u3059\u308b\u5909\u6570\u3002\n//global.html\nfunction huga(e){\n    console.log(e.message);\n    console.log(e.name);\n}\nsafari.application.addEventListener(\"message\",huga, false);\n\nhuga\u306f\u95a2\u6570\u540d\u3002e.message\u3067\u6e21\u3055\u308c\u305f\u5909\u6570\u3092\u53d7\u4fe1\u3002\ne.name\u3067message\u306e\u540d\u524d\u3092\u53c2\u7167\u3002\n\nglobal\u304b\u3089inject\u3078\n//global.html\nsafari.application.activeBrowserWindow.activeTab.page.dispatchMessage(name,hoge);\n\nname\u306fmessage\u306e\u540d\u524d\u3002\nhoge\u306f\u9001\u4fe1\u3059\u308b\u5909\u6570\u3002\n//inject.js\nsafari.self.addEventListener(\"message\",huga,false);\n\nhuga\u306f\u95a2\u6570\u540d\u3002\n\n\u3084\u3084\u3053\u3057\u3044\u4e0a\u306b[\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/MessagesandProxies/MessagesandProxies.html#//apple_ref/doc/uid/TP40009977-CH14-SW1)\u3067\u306f\u5206\u304b\u308a\u306b\u304f\u3044\u3057\u3001\u30cd\u30c3\u30c8\u4e0a\u306b\u3082\u60c5\u5831\u304c\u5c11\u306a\u3044\u306e\u3067\u30e1\u30e2\u3002\n\n\u9593\u9055\u3063\u3066\u3044\u305f\u3089\u6307\u6458\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n#1.PopOver\u7de8\n\n##popover\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u969b\u306b\u8d77\u3053\u308b\u30a4\u30d9\u30f3\u30c8\u306e\u30ea\u30b9\u30ca\u30fc\n\n```javascript\n//popover.html\nsafari.application.addEventListener(\"popover\", functionName, true);\n```\n\npopover\u306eHTML\u306b\u8a18\u8ff0\u3002popover\u306eHTML\u306b\u95a2\u6570\u3092\u7f6e\u304f\n\n\n##popover\u5185\u304b\u3089global\u30da\u30fc\u30b8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\n\n```javascript\n//popover.html\nsafari.extension.globalPage.contentWindow.hoge();\n```\n\nhoge();\u306fglobal\u30da\u30fc\u30b8\u5185\u306e\u95a2\u6570\u3002\u5f15\u6570\u3084\u623b\u308a\u5024\u306e\u8a2d\u5b9a\u3082\u53ef\u3002\n\n##popover\u3092\u547c\u3073\u51fa\u3059\n\n```javascript\n//global.html\nsafari.extension.toolbarItems[i].showPopover();\n```\n\nglobal\u30da\u30fc\u30b8\u306a\u3069\u3067\u547c\u3073\u51fa\u3059\u3002\ni\u306f\u30dc\u30bf\u30f3\u306e\u914d\u5217\u3002(\u30dc\u30bf\u30f3\u304c1\u500b\u306a\u30890)\npopover\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u3092global\u3067\u30c0\u30a4\u30ca\u30df\u30c3\u30af\u306b\u4f5c\u308b\u5834\u5408\u3082\u3001\u6700\u5f8c\u306b\u3053\u308c\u3092\u53e9\u304f\u3002\n\n\n#2.Message\u7de8\n\n##inject\u304b\u3089global\u3078\n\n```javascript\n//inject.js\nsafari.self.tab.dispatchMessage(name,hoge);\n```\n\nname\u306fmessage\u306e\u540d\u524d\u3002\nhoge\u306f\u9001\u4fe1\u3059\u308b\u5909\u6570\u3002\n\n\n```javascript\n//global.html\nfunction huga(e){\n\tconsole.log(e.message);\n\tconsole.log(e.name);\n}\nsafari.application.addEventListener(\"message\",huga, false);\n```\n\nhuga\u306f\u95a2\u6570\u540d\u3002e.message\u3067\u6e21\u3055\u308c\u305f\u5909\u6570\u3092\u53d7\u4fe1\u3002\ne.name\u3067message\u306e\u540d\u524d\u3092\u53c2\u7167\u3002\n\n##global\u304b\u3089inject\u3078\n\n```javascript\n//global.html\nsafari.application.activeBrowserWindow.activeTab.page.dispatchMessage(name,hoge);\n```\n\nname\u306fmessage\u306e\u540d\u524d\u3002\nhoge\u306f\u9001\u4fe1\u3059\u308b\u5909\u6570\u3002\n\n```javascript\n//inject.js\nsafari.self.addEventListener(\"message\",huga,false);\n```\n\nhuga\u306f\u95a2\u6570\u540d\u3002\n"}