{"tags": ["MacOSX", "AppleScript", "ShellScript", "Bash"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002\nosascript \u3067 choose \u301c \u3092\u4f7f\u3044\u307e\u3059\u3002\n\nchoose file : \u30d5\u30a1\u30a4\u30eb\nchoose folder : \u30d5\u30a9\u30eb\u30c0\nchoose file name : \u65b0\u898f\u30d5\u30a1\u30a4\u30eb\n\nSystem Events \u304b AppleScript Runner \u3092\u7d4c\u7531\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n# tell \u306e\u4f8b\nosascript -e 'tell application \"System Events\" to POSIX path of (choose file)'\nosascript -e 'tell application \"AppleScript Runner\" to POSIX path of (choose file)'\n# get \u306e\u4f8b\nosascript -e 'POSIX path of (get choose file of application \"System Events\")'\nosascript -e 'POSIX path of (get choose file of application \"AppleScript Runner\")'\n\n\u5909\u6570\u306b\u4ee3\u5165\u3057\u305f\u308a\u3001\u30b3\u30de\u30f3\u30c9\u306b\u76f4\u63a5\u5f15\u6570\u3068\u3057\u3066\u6e21\u3059\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u30b9\u30da\u30fc\u30b9\u5bfe\u7b56\u306f quoted form of \u3092\u4f7f\u7528\u3059\u308b\u3068\u30af\u30aa\u30fc\u30c8\u4ed8\u304d\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3068\u3057\u3066\u6271\u308f\u308c\u3066\u3057\u307e\u3046\u305f\u3081\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u5074\u3067\u30c0\u30d6\u30eb\u30af\u30aa\u30fc\u30c8\u3067\u62ec\u3063\u3066\u304a\u304d\u307e\u3059\u3002\nfoo=\"$(osascript -e 'POSIX path of (get choose file of application \"System Events\")')\"\nfile \"$(osascript -e 'POSIX path of (get choose file of application \"System Events\")')\"\n\n\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\u3057\u305f\u5834\u5408\u306f\u7a7a\u306b\u306a\u308b\u306e\u3067\u30ad\u30e3\u30f3\u30bb\u30eb\u5bfe\u7b56\u3092\u3057\u3066\u304a\u3044\u305f\u65b9\u304c\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\nfile \"$(osascript -e 'POSIX path of (get choose file of application \"System Events\")' || echo /dev/null)\"\n\n\n\u4f7f\u7528\u4f8b\n\u5165\u529b\u30d5\u30a1\u30a4\u30eb\u3068\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a4\u30a2\u30ed\u30b0\u3092\u8868\u793a\u3057\u3001iconv \u3067\u5909\u63db\u3002\u30b7\u30a7\u30eb\u5909\u6570\u306f awk \u306e\u3088\u3046\u306b\u30b7\u30f3\u30b0\u30eb\u30af\u30aa\u30fc\u30c8\u3067\u533a\u5207\u308b\u3053\u3068\u3067 osascript \u5185\u3078\u633f\u5165\u3067\u304d\u307e\u3059\u3002\n\u203biconv \u304c\u540c\u4e00\u30d5\u30a1\u30a4\u30eb\u306e\u4e0a\u66f8\u304d\u304c\u3067\u304d\u306a\u3044\u305f\u3081\u4e00\u6642\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u66f8\u304d\u623b\u3057\u3066\u3044\u307e\u3059\u3002\nif\n    input=\"$(osascript -e 'POSIX path of (get choose file of application \"System Events\")')\" &&\n    output=\"$(osascript -e 'POSIX path of (get choose file name of application \"System Events\" default name \"'\"$(basename \"${input}\")\"'\")')\"\nthen\n    tmp=/tmp/$(uuidgen) &&\n    iconv -f SJIS -t UTF-8 \"${input}\" > ${tmp} &&\n    cat ${tmp} > \"${output}\" &&\n    rm ${tmp}\nfi\n\n\n\u958b\u59cb\u5834\u6240\u306e\u6307\u5b9a\ndefault location \u3067\u958b\u59cb\u5834\u6240\u306e\u6307\u5b9a\u304c\u3067\u304d\u307e\u3059\u3002\n# get \u306e\u4f8b\nosascript -e 'POSIX path of (get choose file of application \"System Events\" default location path to (home folder))'\nosascript -e 'POSIX path of (get choose file of application \"System Events\" default location \"/Users/foo\")'\nosascript -e 'POSIX path of (get choose file of application \"System Events\" default location \"'\"$HOME\"'\")'\n# tell \u306e\u4f8b\nosascript -e 'tell application \"System Events\" to POSIX path of (choose file default location path to (home folder))'\n\n\u305d\u306e\u4ed6\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3084\u4e0d\u53ef\u8996\u9805\u76ee\u306e\u8868\u793a\u306a\u3069\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u516c\u5f0f\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u306b\u3066\u3002\nhttp://developer.apple.com/library/mac/#documentation/applescript/conceptual/applescriptlangguide/reference/ASLR_cmds.html#//apple_ref/doc/uid/TP40000983-CH216-SW4\n\n\u8907\u6570\u30d5\u30a1\u30a4\u30eb\u9078\u629e\nmultiple selections allowed \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002log\uff08stderr\uff09\u3067\u51fa\u529b\u3059\u308b\u306e\u3067 try \u3067\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\u3057\u305f\u3068\u304d\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6291\u5236\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nosascript -e '\n    try\n        repeat with aFile in (get choose file of application \"System Events\" default location (path to home folder) with multiple selections allowed)\n            log POSIX path of aFile\n        end repeat\n    end try\n' 2>&1\n\ntell \u3092\u4f7f\u3046\u5834\u5408\u306f tell \u5185\u3067 log \u3092\u4f7f\u3063\u3066\u3082\u4f55\u3082\u51fa\u529b\u3055\u308c\u306a\u3044\uff08\uff1f\uff09\u306e\u3067\u4e00\u5ea6\u5909\u6570\u306b\u4ee3\u5165\u3057\u3066\u304b\u3089 tell \u306e\u5916\u3067\u51fa\u529b\u3057\u307e\u3059\u3002try \u3067\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u305f\u5834\u5408\u3001\u30ea\u30b9\u30c8 aList \u304c\u5b58\u5728\u305b\u305a\u306b\u30a8\u30e9\u30fc\u306b\u306a\u308b\u305f\u3081\u6700\u521d\u306b\u7a7a\u306e\u30ea\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\nosascript -e '\n    set aList to {}\n    tell application \"System Events\"\n        activate\n        try\n            set aList to choose file default location (path to home folder) with multiple selections allowed\n        end try\n    end tell\n    repeat with aFile in aList\n        log POSIX path of aFile\n    end repeat\n' 2>&1\n\n\u66f8\u304d\u65b9\u306f\u4ed6\u306b\u3082\u8272\u3005\u3042\u308b\u3068\u601d\u3046\u306e\u3067\u304a\u597d\u307f\u3067\u3002\n![System Events](https://lh6.googleusercontent.com/-supSuba70d0/UZTBqQwo_0I/AAAAAAAAKQU/9ivO5H5NUiw/s800/EBAA03CE-B8C9-470E-B1F6-E9D0818439C2.png)\n\nosascript \u3067 `choose \u301c` \u3092\u4f7f\u3044\u307e\u3059\u3002\n\n- choose file : \u30d5\u30a1\u30a4\u30eb\n- choose folder : \u30d5\u30a9\u30eb\u30c0\n- choose file name : \u65b0\u898f\u30d5\u30a1\u30a4\u30eb\n\nSystem Events \u304b AppleScript Runner \u3092\u7d4c\u7531\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```bash\n# tell \u306e\u4f8b\nosascript -e 'tell application \"System Events\" to POSIX path of (choose file)'\nosascript -e 'tell application \"AppleScript Runner\" to POSIX path of (choose file)'\n# get \u306e\u4f8b\nosascript -e 'POSIX path of (get choose file of application \"System Events\")'\nosascript -e 'POSIX path of (get choose file of application \"AppleScript Runner\")'\n```\n\n\u5909\u6570\u306b\u4ee3\u5165\u3057\u305f\u308a\u3001\u30b3\u30de\u30f3\u30c9\u306b\u76f4\u63a5\u5f15\u6570\u3068\u3057\u3066\u6e21\u3059\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u30b9\u30da\u30fc\u30b9\u5bfe\u7b56\u306f `quoted form of` \u3092\u4f7f\u7528\u3059\u308b\u3068\u30af\u30aa\u30fc\u30c8\u4ed8\u304d\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3068\u3057\u3066\u6271\u308f\u308c\u3066\u3057\u307e\u3046\u305f\u3081\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u5074\u3067\u30c0\u30d6\u30eb\u30af\u30aa\u30fc\u30c8\u3067\u62ec\u3063\u3066\u304a\u304d\u307e\u3059\u3002\n\n```bash\nfoo=\"$(osascript -e 'POSIX path of (get choose file of application \"System Events\")')\"\nfile \"$(osascript -e 'POSIX path of (get choose file of application \"System Events\")')\"\n```\n\n\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\u3057\u305f\u5834\u5408\u306f\u7a7a\u306b\u306a\u308b\u306e\u3067\u30ad\u30e3\u30f3\u30bb\u30eb\u5bfe\u7b56\u3092\u3057\u3066\u304a\u3044\u305f\u65b9\u304c\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n```bash\nfile \"$(osascript -e 'POSIX path of (get choose file of application \"System Events\")' || echo /dev/null)\"\n```\n\n#### \u4f7f\u7528\u4f8b ####\n\n\u5165\u529b\u30d5\u30a1\u30a4\u30eb\u3068\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a4\u30a2\u30ed\u30b0\u3092\u8868\u793a\u3057\u3001iconv \u3067\u5909\u63db\u3002\u30b7\u30a7\u30eb\u5909\u6570\u306f awk \u306e\u3088\u3046\u306b\u30b7\u30f3\u30b0\u30eb\u30af\u30aa\u30fc\u30c8\u3067\u533a\u5207\u308b\u3053\u3068\u3067 osascript \u5185\u3078\u633f\u5165\u3067\u304d\u307e\u3059\u3002\n\n\u203biconv \u304c\u540c\u4e00\u30d5\u30a1\u30a4\u30eb\u306e\u4e0a\u66f8\u304d\u304c\u3067\u304d\u306a\u3044\u305f\u3081\u4e00\u6642\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u66f8\u304d\u623b\u3057\u3066\u3044\u307e\u3059\u3002\n\n```bash\nif\n    input=\"$(osascript -e 'POSIX path of (get choose file of application \"System Events\")')\" &&\n    output=\"$(osascript -e 'POSIX path of (get choose file name of application \"System Events\" default name \"'\"$(basename \"${input}\")\"'\")')\"\nthen\n    tmp=/tmp/$(uuidgen) &&\n    iconv -f SJIS -t UTF-8 \"${input}\" > ${tmp} &&\n    cat ${tmp} > \"${output}\" &&\n    rm ${tmp}\nfi\n```\n\n#### \u958b\u59cb\u5834\u6240\u306e\u6307\u5b9a ####\n\n`default location` \u3067\u958b\u59cb\u5834\u6240\u306e\u6307\u5b9a\u304c\u3067\u304d\u307e\u3059\u3002\n\n```bash\n# get \u306e\u4f8b\nosascript -e 'POSIX path of (get choose file of application \"System Events\" default location path to (home folder))'\nosascript -e 'POSIX path of (get choose file of application \"System Events\" default location \"/Users/foo\")'\nosascript -e 'POSIX path of (get choose file of application \"System Events\" default location \"'\"$HOME\"'\")'\n# tell \u306e\u4f8b\nosascript -e 'tell application \"System Events\" to POSIX path of (choose file default location path to (home folder))'\n```\n\n\u305d\u306e\u4ed6\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3084\u4e0d\u53ef\u8996\u9805\u76ee\u306e\u8868\u793a\u306a\u3069\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u516c\u5f0f\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u306b\u3066\u3002\n\nhttp://developer.apple.com/library/mac/#documentation/applescript/conceptual/applescriptlangguide/reference/ASLR_cmds.html#//apple_ref/doc/uid/TP40000983-CH216-SW4\n\n#### \u8907\u6570\u30d5\u30a1\u30a4\u30eb\u9078\u629e ####\n\n`multiple selections allowed` \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002`log`\uff08stderr\uff09\u3067\u51fa\u529b\u3059\u308b\u306e\u3067 `try` \u3067\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u3092\u30ad\u30e3\u30f3\u30bb\u30eb\u3057\u305f\u3068\u304d\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6291\u5236\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```bash\nosascript -e '\n    try\n        repeat with aFile in (get choose file of application \"System Events\" default location (path to home folder) with multiple selections allowed)\n            log POSIX path of aFile\n        end repeat\n    end try\n' 2>&1\n```\n\n`tell` \u3092\u4f7f\u3046\u5834\u5408\u306f `tell` \u5185\u3067 `log` \u3092\u4f7f\u3063\u3066\u3082\u4f55\u3082\u51fa\u529b\u3055\u308c\u306a\u3044\uff08\uff1f\uff09\u306e\u3067\u4e00\u5ea6\u5909\u6570\u306b\u4ee3\u5165\u3057\u3066\u304b\u3089 `tell` \u306e\u5916\u3067\u51fa\u529b\u3057\u307e\u3059\u3002`try` \u3067\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u305f\u5834\u5408\u3001\u30ea\u30b9\u30c8 `aList` \u304c\u5b58\u5728\u305b\u305a\u306b\u30a8\u30e9\u30fc\u306b\u306a\u308b\u305f\u3081\u6700\u521d\u306b\u7a7a\u306e\u30ea\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n\n```bash\nosascript -e '\n    set aList to {}\n    tell application \"System Events\"\n        activate\n        try\n            set aList to choose file default location (path to home folder) with multiple selections allowed\n        end try\n    end tell\n    repeat with aFile in aList\n        log POSIX path of aFile\n    end repeat\n' 2>&1\n```\n\n\u66f8\u304d\u65b9\u306f\u4ed6\u306b\u3082\u8272\u3005\u3042\u308b\u3068\u601d\u3046\u306e\u3067\u304a\u597d\u307f\u3067\u3002"}