{"tags": ["vagrant", "CoreOS", "kubernetes"], "context": "\u3053\u3053\u3067\u306f\u3001\u69cb\u7bc9\u3057\u305f\u74b0\u5883\u3067Kubernetes\u306e\u30b5\u30f3\u30d7\u30eb\u306e\u4e2d\u3067\u3082\u6a19\u6e96\u7684\u306aguestbook\u3068\u3044\u3046\u30b5\u30f3\u30d7\u30eb\u3092\u5b9f\u884c\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u4f5c\u696d\u306e\u524d\u306b\u3042\u3089\u304b\u3058\u3081kubernetes\u306e\u30d5\u30a9\u30eb\u30c0\u306e\u4e2d\u306b\u79fb\u52d5\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n$ cd kubernetes\n\n\n\u2460Redis Master\u306e\u8ffd\u52a0\n$ kubectl create -f examples/guestbook/legacy/redis-master-controller.yaml\nreplicationcontroller \"redis-master-controller\" created\n$ kubectl create -f examples/guestbook/redis-master-service.yaml\nservice \"redis-master\" created\n\n\n\u2461Redis Slave\u306e\u8ffd\u52a0\n$ kubectl create -f create -f examples/guestbook/legacy/redis-slave-controller.yaml\nreplicationcontroller \"redis-slave\" created\n$ kubectl create -f examples/guestbook/redis-slave-service.yaml\nservice \"redis-slave\" created\n\n\n\u2462Frontend-service\u306e\u8a2d\u5b9a\u3092\u4fee\u6b63\u3059\u308b\nMac\u306e\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u8a2d\u5b9a\u3092\u5909\u3048\u307e\u3059\u3002\nVim\u3067\u306a\u304f\u3066\u3082\u5927\u4e08\u592b\u3067\u3059\u3002\n$ vi examples/guestbook/frontend-service.yaml\n# \u4e0b\u8a18\u306e\u3088\u3046\u306b2\u884c\u8ffd\u52a0\u3059\u308b\napiVersion: v1\nkind: Service\nmetadata:\n  name: frontend\n  labels:\n    name: frontend\nspec:\n  # if your cluster supports it, uncomment the following to automatically create\n  # an external load-balanced IP for the frontend service.\n  # type: LoadBalancer\n  type: NodePort # \u3053\u306e\u884c\u8ffd\u52a0\n  ports:\n    # the port that this service should serve on\n    - port: 80\n      nodePort: 30301 # \u3053\u306e\u884c\u8ffd\u52a0\n  selector:\n    name: frontend\n\n\n\u2463Frontend\u306e\u8ffd\u52a0\n\u5148\u306bMac\u306eFireWall\u3092Off\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n$ kubectl create -f examples/guestbook/legacy/frontend-controller.yaml\nreplicationcontroller \"frontend\" created\nYou have exposed your service on an external port on all nodes in your\ncluster.  If you want to expose this service to the external internet, you may\nneed to set up firewall rules for the service port(s) (tcp:30301) to serve traffic.\n\nSee http://releases.k8s.io/release-1.1/docs/user-guide/services-firewalls.md for more details.\n$ kubectl create -f examples/guestbook/frontend-service.yaml\nservice \"frontend\" created\n\n\n\u2464\u52d5\u4f5c\u3055\u305b\u308b\nNode\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u63a2\u3057\u307e\u3059\u3002\n$ kubectl get nodes\nNAME           STATUS    AGE\n172.17.8.102   Ready     1d\n172.17.8.103   Ready     1d\n\n\u3053\u3053\u3067\u306f1\u756a\u76ee\u306enode\u3067\u3042\u308b172.17.8.102\u304c\u30a2\u30af\u30bb\u30b9\u5148\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u308c\u306bFrontend\u306b\u8ffd\u52a0\u3057\u305f\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u4ed8\u52a0\u3057\u305f\uff08\u3053\u3053\u3067\u306f\uff13\uff10\uff13\uff10\uff11\u756a\uff09\u300c172.17.8.102:30301\u300d\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\n\nguestbook\u306e\u753b\u9762\u304c\u51fa\u3066\u3067\u304d\u305f\u3089\u5b9f\u969b\u306b\u8a66\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\uff01\n\u74b0\u5883\u69cb\u7bc9\u7de8\u306f\u3053\u3061\u3089\n\u3053\u3053\u3067\u306f\u3001\u69cb\u7bc9\u3057\u305f\u74b0\u5883\u3067Kubernetes\u306e\u30b5\u30f3\u30d7\u30eb\u306e\u4e2d\u3067\u3082\u6a19\u6e96\u7684\u306aguestbook\u3068\u3044\u3046\u30b5\u30f3\u30d7\u30eb\u3092\u5b9f\u884c\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u4f5c\u696d\u306e\u524d\u306b\u3042\u3089\u304b\u3058\u3081kubernetes\u306e\u30d5\u30a9\u30eb\u30c0\u306e\u4e2d\u306b\u79fb\u52d5\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash\n$ cd kubernetes\n```\n\n###\u2460Redis Master\u306e\u8ffd\u52a0\n\n```bash\n$ kubectl create -f examples/guestbook/legacy/redis-master-controller.yaml\nreplicationcontroller \"redis-master-controller\" created\n$ kubectl create -f examples/guestbook/redis-master-service.yaml\nservice \"redis-master\" created\n```\n\n###\u2461Redis Slave\u306e\u8ffd\u52a0\n\n```bash\n$ kubectl create -f create -f examples/guestbook/legacy/redis-slave-controller.yaml\nreplicationcontroller \"redis-slave\" created\n$ kubectl create -f examples/guestbook/redis-slave-service.yaml\nservice \"redis-slave\" created\n```\n\n###\u2462Frontend-service\u306e\u8a2d\u5b9a\u3092\u4fee\u6b63\u3059\u308b\nMac\u306e\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u8a2d\u5b9a\u3092\u5909\u3048\u307e\u3059\u3002\nVim\u3067\u306a\u304f\u3066\u3082\u5927\u4e08\u592b\u3067\u3059\u3002\n\n```bash\n$ vi examples/guestbook/frontend-service.yaml\n# \u4e0b\u8a18\u306e\u3088\u3046\u306b2\u884c\u8ffd\u52a0\u3059\u308b\napiVersion: v1\nkind: Service\nmetadata:\n  name: frontend\n  labels:\n    name: frontend\nspec:\n  # if your cluster supports it, uncomment the following to automatically create\n  # an external load-balanced IP for the frontend service.\n  # type: LoadBalancer\n  type: NodePort # \u3053\u306e\u884c\u8ffd\u52a0\n  ports:\n    # the port that this service should serve on\n    - port: 80\n      nodePort: 30301 # \u3053\u306e\u884c\u8ffd\u52a0\n  selector:\n    name: frontend\n```\n\n###\u2463Frontend\u306e\u8ffd\u52a0\n\n\u5148\u306bMac\u306eFireWall\u3092Off\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash\n$ kubectl create -f examples/guestbook/legacy/frontend-controller.yaml\nreplicationcontroller \"frontend\" created\nYou have exposed your service on an external port on all nodes in your\ncluster.  If you want to expose this service to the external internet, you may\nneed to set up firewall rules for the service port(s) (tcp:30301) to serve traffic.\n\nSee http://releases.k8s.io/release-1.1/docs/user-guide/services-firewalls.md for more details.\n$ kubectl create -f examples/guestbook/frontend-service.yaml\nservice \"frontend\" created\n```\n\n###\u2464\u52d5\u4f5c\u3055\u305b\u308b\nNode\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u63a2\u3057\u307e\u3059\u3002\n\n```bash\n$ kubectl get nodes\nNAME           STATUS    AGE\n172.17.8.102   Ready     1d\n172.17.8.103   Ready     1d\n```\n\n\u3053\u3053\u3067\u306f1\u756a\u76ee\u306enode\u3067\u3042\u308b172.17.8.102\u304c\u30a2\u30af\u30bb\u30b9\u5148\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u308c\u306bFrontend\u306b\u8ffd\u52a0\u3057\u305f\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u4ed8\u52a0\u3057\u305f\uff08\u3053\u3053\u3067\u306f\uff13\uff10\uff13\uff10\uff11\u756a\uff09\u300c172.17.8.102:30301\u300d\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\n\n###guestbook\u306e\u753b\u9762\u304c\u51fa\u3066\u3067\u304d\u305f\u3089\u5b9f\u969b\u306b\u8a66\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\uff01\n\n**[\u74b0\u5883\u69cb\u7bc9\u7de8\u306f\u3053\u3061\u3089](http://qiita.com/Clip-glass/items/1eb61f983a69f22ac8e3)**\n"}