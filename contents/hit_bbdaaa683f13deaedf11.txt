{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nMySQL\u306e\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u4e00\u89a7\u3092\u66f4\u65b0\u3059\u308bSQL\u306b\u306a\u308a\u307e\u3059\u3002\u4e0b\u8a18SQL\u3060\u3068\u3001Sleep\u3068\u304b\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3082\u3082\u3063\u3066\u304d\u3066\u3057\u307e\u3044\u307e\u3059\u304c\u3001\n\u305d\u306e\u3042\u305f\u308a\u306f\u3001\u9069\u5b9c\u6761\u4ef6\u3092\u8ffd\u52a0\u3057\u3066\u3044\u305f\u3060\u3051\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u5b9a\u7fa9\nmysql> desc information_schema.processlist ;\n+---------+-------------+------+-----+---------+-------+\n| Field   | Type        | Null | Key | Default | Extra |\n+---------+-------------+------+-----+---------+-------+\n| ID      | bigint(4)   | NO   |     | 0       |       |\n| USER    | varchar(16) | NO   |     |         |       |\n| HOST    | varchar(64) | NO   |     |         |       |\n| DB      | varchar(64) | YES  |     | NULL    |       |\n| COMMAND | varchar(16) | NO   |     |         |       |\n| TIME    | int(7)      | NO   |     | 0       |       |\n| STATE   | varchar(64) | YES  |     | NULL    |       |\n| INFO    | longtext    | YES  |     | NULL    |       |\n+---------+-------------+------+-----+---------+-------+\n\n\nSQL\nselect\n  '[' || RTRIM(IFNULL(X.db,'N/A')) || ']' || RTRIM(X.host) || '@' || RTRIM(count(X.id)) AS CLIENT_NAME\nfrom\n(\n  select\n   replace(host,mid(host,instr(host,':'),length(host)),'') as host,\n   db,\n   id\n  from\n    information_schema.processlist\n) as X\ngroup by\n  X.db,\n  X.host\norder by\n  X.db asc,\n  X.host asc;\n\n\n\u51fa\u529b\u7d50\u679c\n@\u4ee5\u964d\u304c\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u6570\n[]\u304c\u30db\u30b9\u30c8\u540d\n\u3068\u3044\u3063\u305f\u611f\u3058\u3067\u8868\u793a\u3057\u3066\u304a\u308a\u307e\u3059\u3002\nCLIENT_NAME\n----------------------------------\n[N/A]@2\n[N/A]192.168.0.249@1\n[N/A]localhost@1\n[master]192.168.0.126@20\n[master]192.168.0.127@20\n[master]192.168.0.128@20\n[master]192.168.0.129@20\n[master]192.168.0.130@20\n[master]192.168.0.135@20\n[master]192.168.0.136@20\n[master]192.168.0.137@20\n[master]192.168.0.138@20\n[master]192.168.0.140@2\n[master]192.168.0.144@21\n[master]192.168.0.147@10\n[master]192.168.0.167@20\n[master]192.168.0.168@20\n[master]192.168.0.184@20\n[master]192.168.0.185@20\n\n## \u6982\u8981\n\nMySQL\u306e\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u4e00\u89a7\u3092\u66f4\u65b0\u3059\u308bSQL\u306b\u306a\u308a\u307e\u3059\u3002\u4e0b\u8a18SQL\u3060\u3068\u3001Sleep\u3068\u304b\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3082\u3082\u3063\u3066\u304d\u3066\u3057\u307e\u3044\u307e\u3059\u304c\u3001\n\u305d\u306e\u3042\u305f\u308a\u306f\u3001\u9069\u5b9c\u6761\u4ef6\u3092\u8ffd\u52a0\u3057\u3066\u3044\u305f\u3060\u3051\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n\n## \u5b9a\u7fa9\n\n```\nmysql> desc information_schema.processlist ;\n+---------+-------------+------+-----+---------+-------+\n| Field   | Type        | Null | Key | Default | Extra |\n+---------+-------------+------+-----+---------+-------+\n| ID      | bigint(4)   | NO   |     | 0       |       |\n| USER    | varchar(16) | NO   |     |         |       |\n| HOST    | varchar(64) | NO   |     |         |       |\n| DB      | varchar(64) | YES  |     | NULL    |       |\n| COMMAND | varchar(16) | NO   |     |         |       |\n| TIME    | int(7)      | NO   |     | 0       |       |\n| STATE   | varchar(64) | YES  |     | NULL    |       |\n| INFO    | longtext    | YES  |     | NULL    |       |\n+---------+-------------+------+-----+---------+-------+\n```\n\n## SQL\n\n```\nselect\n  '[' || RTRIM(IFNULL(X.db,'N/A')) || ']' || RTRIM(X.host) || '@' || RTRIM(count(X.id)) AS CLIENT_NAME\nfrom\n(\n  select\n   replace(host,mid(host,instr(host,':'),length(host)),'') as host,\n   db,\n   id\n  from\n    information_schema.processlist\n) as X\ngroup by\n  X.db,\n  X.host\norder by\n  X.db asc,\n  X.host asc;\n```\n\n## \u51fa\u529b\u7d50\u679c\n\n@\u4ee5\u964d\u304c\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u6570\n[]\u304c\u30db\u30b9\u30c8\u540d\n\n\u3068\u3044\u3063\u305f\u611f\u3058\u3067\u8868\u793a\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\n```\nCLIENT_NAME\n----------------------------------\n[N/A]@2\n[N/A]192.168.0.249@1\n[N/A]localhost@1\n[master]192.168.0.126@20\n[master]192.168.0.127@20\n[master]192.168.0.128@20\n[master]192.168.0.129@20\n[master]192.168.0.130@20\n[master]192.168.0.135@20\n[master]192.168.0.136@20\n[master]192.168.0.137@20\n[master]192.168.0.138@20\n[master]192.168.0.140@2\n[master]192.168.0.144@21\n[master]192.168.0.147@10\n[master]192.168.0.167@20\n[master]192.168.0.168@20\n[master]192.168.0.184@20\n[master]192.168.0.185@20\n```\n", "tags": ["MySQL", "SQL", "mariadb"]}