{"context": " More than 1 year has passed since last update.\n\niPhone 6s \u3068 force touch event\niPhone 6s \u304b\u3089 ForceTouchEvent \u304c\u5229\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u6a5f\u80fd\u3092\u4f53\u611f\u3067\u304d\u308b \u7c21\u5358\u306a\u304a\u7d75\u304b\u304d\u30c7\u30e2 \u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002 iPhone 6s \u306e Safari \u3067\u30a2\u30af\u30bb\u30b9\u3057\u3001\u6307\u3067\u753b\u9762\u3092\u306a\u305e\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n\nDemo Code\n\u30c7\u30e2\u306e\u30b3\u30fc\u30c9\u306f\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n<!DOCTYPE html><html><head><title>ForceTouch Event demo</title>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, user-scalable=no\">\n<style>\nhtml, body, ul { margin: 0; padding: 0; }\ncanvas { margin: 2px; padding: 0; }\n.touchable { outline: 1px outset gray; }\n.pallet { list-style: none; }\n.pallet li { display: inline }\n.pallet li button { width: 40px; height: 40px; border-radius: 32px; }\n</style>\n</head>\n<body>\n<canvas class=\"touchable\" width=\"370\" height=\"480\"></canvas>\n<ul class=\"pallet\">\n  <li><button style=\"background-color:pink\"  onclick=\"changePenColor(this)\"></button></li>\n  <li><button style=\"background-color:red\"   onclick=\"changePenColor(this)\"></button></li>\n  <li><button style=\"background-color:blue\"  onclick=\"changePenColor(this)\"></button></li>\n  <li><button style=\"background-color:green\" onclick=\"changePenColor(this)\"></button></li>\n  <li><button style=\"background-color:white\" onclick=\"changePenColor(this)\"></button></li>\n  <li><button style=\"background-color:black\" onclick=\"changePenColor(this)\"></button></li>\n</ul>\n\n<script>\nvar ctx = null;\nvar pen = { x: 0, y: 0, color: \"black\" };\n\nfunction changePenColor(target) {\n  pen.color = window.getComputedStyle(target, null).backgroundColor;\n  ctx.fillStyle = pen.color;\n}\nwindow.onload = function() {\n  var node = document.querySelector(\"canvas\");\n  node.addEventListener(\"touchstart\", handleEvent);\n  node.addEventListener(\"touchmove\", handleEvent);\n  node.addEventListener(\"touchend\", handleEvent);\n  ctx = node.getContext(\"2d\");\n};\n\nfunction handleEvent(event) {\n  var type  = event.type;\n  var touch = event.touches[0];\n  var force = touch ? touch.force || 0.0 : 1.0;\n  var x     = touch ? touch.clientX : pen.x;\n  var y     = touch ? touch.clientY : pen.y;\n\n  pen.x = x;\n  pen.y = y;\n  event.preventDefault();\n\n  switch (type) {\n  case \"touchstart\": drawCircle(ctx, x, y, force); break;\n  case \"touchmove\":  drawCircle(ctx, x, y, force); break;\n  case \"touchend\":   drawCircle(ctx, x, y, 0.0);   break;\n  }\n}\n\nfunction drawCircle(ctx, x, y, force) {\n  var radius = force * 20 + 4;\n  var alpha  = force * 0.4;\n  alpha = alpha < 0.1 ? 0.1 : alpha;\n\n  ctx.globalAlpha = alpha;\n  ctx.beginPath();\n  ctx.arc(x, y, radius, 0, Math.PI * 2, false);\n  ctx.fill();\n  ctx.closePath();\n}\n</script>\n\n</body></html>\n\n\n\u52d8\u6240\nForceTouch \u30a4\u30d9\u30f3\u30c8\u306f\u3001touchstart/touchmove \u306e event.touches[n].force \u304b\u3089\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002force \u306e\u5024\u306f 0.0\u301c1.0 \u3067\u3059\u3002\nnode.addEventListener(\"touchstart\", handleEvent);\nnode.addEventListener(\"touchmove\", handleEvent);\n\nfunction handleEvent(event) {\n  var touch = event.touches[0];\n  if (touch) {\n    touch.force // -> 0.0 \u301c 1.0\n  }\n}\n\nChrome \u306e DevTools \u4e0a\u3067\u3082\u3001force \u3068 webkitForce \u306e\u4e21\u65b9\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\u306e\u3067\u3001iPhone 6s \u306e\u5b9f\u6a5f\u304c\u306a\u304f\u3066\u3082\u3042\u308b\u7a0b\u5ea6\u306e\u52d5\u4f5c\u78ba\u8a8d\u304c\u53ef\u80fd\u3067\u3059\u3002\n(\u611f\u5727\u30c7\u30d0\u30a4\u30b9\u304c\u7121\u3044\u5834\u5408\u306f\u3001force \u5024\u306f\u5e38\u306b1.0\u306b\u306a\u308a\u307e\u3059)\n\n\u6700\u5f8c\u306b\n\u5f53\u521d\u306f\u3001WWDC \u3067\u767a\u8868\u3055\u308c\u305f\u5185\u5bb9\u306b\u5f93\u3044\u3001\u4ee5\u4e0b\u306e\u65b0\u3057\u3044\u30a4\u30d9\u30f3\u30c8\u3092\u99c6\u4f7f\u3057\u3066\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3057\u3088\u3046\u3068\u3057\u307e\u3057\u305f\u304c\u3001\u5168\u304f\u52d5\u4f5c\u305b\u305a\u2026\n\nwebkitmouseforcecancelled\nwebkitmouseforcechanged\nwebkitmouseforceclick\nwebkitmouseforcedown\nwebkitmouseforceup\nwebkitmouseforcewillbegin\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3082\u8272\u3005\u3068\u3042\u305f\u308a\u307e\u3057\u305f\u304c\u3001\u300c\u30eb\u30fc\u30af\u3088\u2026 webkitmouseforcexxx \u3092\u4f7f\u3046\u306e\u3060\u2026\u300d\u3068\u3044\u3063\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3070\u304b\u308a\u3067\u3059\u3002\u8b0e\u304c\u8b0e\u3092\u751f\u3080\u5c55\u958b\u3067\u3059\u3002\n\u7d50\u5c40 WebKit \u306e\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\u3057\u3066\u3001\u6b63\u89e3\u306b\u305f\u3069\u308a\u7740\u304d\u307e\u3057\u305f\u3002\n\u7b54\u3048\u304c\u5206\u304b\u3063\u3066\u3057\u307e\u3048\u3070\u3068\u3063\u3066\u3082\u7c21\u5358\u3067\u3059\u306d! \u53c2\u8003\u306b\u306a\u3055\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n(\u03b5\u30fb \u30ef \u30fb)\u0437 May the Force be with you. (\u30d5\u30a9\u30fc\u30b9\u3068\u5171\u306b\u3042\u3089\u3093\u3053\u3068\u3092)\n# iPhone 6s \u3068 force touch event\n\niPhone 6s \u304b\u3089 ForceTouchEvent \u304c\u5229\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u6a5f\u80fd\u3092\u4f53\u611f\u3067\u304d\u308b [\u7c21\u5358\u306a\u304a\u7d75\u304b\u304d\u30c7\u30e2](http://uupaa.github.io/Examples/demo/ForceTouch/index.html) \u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002 iPhone 6s \u306e Safari \u3067\u30a2\u30af\u30bb\u30b9\u3057\u3001\u6307\u3067\u753b\u9762\u3092\u306a\u305e\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n![](https://gyazo.com/800bee0eaf26d140aaee1a8e05086360.png)\n\n## Demo Code\n\n\u30c7\u30e2\u306e\u30b3\u30fc\u30c9\u306f\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```html\n<!DOCTYPE html><html><head><title>ForceTouch Event demo</title>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, user-scalable=no\">\n<style>\nhtml, body, ul { margin: 0; padding: 0; }\ncanvas { margin: 2px; padding: 0; }\n.touchable { outline: 1px outset gray; }\n.pallet { list-style: none; }\n.pallet li { display: inline }\n.pallet li button { width: 40px; height: 40px; border-radius: 32px; }\n</style>\n</head>\n<body>\n<canvas class=\"touchable\" width=\"370\" height=\"480\"></canvas>\n<ul class=\"pallet\">\n  <li><button style=\"background-color:pink\"  onclick=\"changePenColor(this)\"></button></li>\n  <li><button style=\"background-color:red\"   onclick=\"changePenColor(this)\"></button></li>\n  <li><button style=\"background-color:blue\"  onclick=\"changePenColor(this)\"></button></li>\n  <li><button style=\"background-color:green\" onclick=\"changePenColor(this)\"></button></li>\n  <li><button style=\"background-color:white\" onclick=\"changePenColor(this)\"></button></li>\n  <li><button style=\"background-color:black\" onclick=\"changePenColor(this)\"></button></li>\n</ul>\n\n<script>\nvar ctx = null;\nvar pen = { x: 0, y: 0, color: \"black\" };\n\nfunction changePenColor(target) {\n  pen.color = window.getComputedStyle(target, null).backgroundColor;\n  ctx.fillStyle = pen.color;\n}\nwindow.onload = function() {\n  var node = document.querySelector(\"canvas\");\n  node.addEventListener(\"touchstart\", handleEvent);\n  node.addEventListener(\"touchmove\", handleEvent);\n  node.addEventListener(\"touchend\", handleEvent);\n  ctx = node.getContext(\"2d\");\n};\n\nfunction handleEvent(event) {\n  var type  = event.type;\n  var touch = event.touches[0];\n  var force = touch ? touch.force || 0.0 : 1.0;\n  var x     = touch ? touch.clientX : pen.x;\n  var y     = touch ? touch.clientY : pen.y;\n\n  pen.x = x;\n  pen.y = y;\n  event.preventDefault();\n\n  switch (type) {\n  case \"touchstart\": drawCircle(ctx, x, y, force); break;\n  case \"touchmove\":  drawCircle(ctx, x, y, force); break;\n  case \"touchend\":   drawCircle(ctx, x, y, 0.0);   break;\n  }\n}\n\nfunction drawCircle(ctx, x, y, force) {\n  var radius = force * 20 + 4;\n  var alpha  = force * 0.4;\n  alpha = alpha < 0.1 ? 0.1 : alpha;\n\n  ctx.globalAlpha = alpha;\n  ctx.beginPath();\n  ctx.arc(x, y, radius, 0, Math.PI * 2, false);\n  ctx.fill();\n  ctx.closePath();\n}\n</script>\n\n</body></html>\n```\n\n## \u52d8\u6240\n\nForceTouch \u30a4\u30d9\u30f3\u30c8\u306f\u3001touchstart/touchmove \u306e event.touches[n].force \u304b\u3089\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002force \u306e\u5024\u306f 0.0\u301c1.0 \u3067\u3059\u3002\n\n```js\nnode.addEventListener(\"touchstart\", handleEvent);\nnode.addEventListener(\"touchmove\", handleEvent);\n\nfunction handleEvent(event) {\n  var touch = event.touches[0];\n  if (touch) {\n    touch.force // -> 0.0 \u301c 1.0\n  }\n}\n```\n\nChrome \u306e DevTools \u4e0a\u3067\u3082\u3001force \u3068 webkitForce \u306e\u4e21\u65b9\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\u306e\u3067\u3001iPhone 6s \u306e\u5b9f\u6a5f\u304c\u306a\u304f\u3066\u3082\u3042\u308b\u7a0b\u5ea6\u306e\u52d5\u4f5c\u78ba\u8a8d\u304c\u53ef\u80fd\u3067\u3059\u3002\n(\u611f\u5727\u30c7\u30d0\u30a4\u30b9\u304c\u7121\u3044\u5834\u5408\u306f\u3001force \u5024\u306f\u5e38\u306b1.0\u306b\u306a\u308a\u307e\u3059)\n\n## \u6700\u5f8c\u306b\n\n\u5f53\u521d\u306f\u3001WWDC \u3067\u767a\u8868\u3055\u308c\u305f\u5185\u5bb9\u306b\u5f93\u3044\u3001\u4ee5\u4e0b\u306e\u65b0\u3057\u3044\u30a4\u30d9\u30f3\u30c8\u3092\u99c6\u4f7f\u3057\u3066\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3057\u3088\u3046\u3068\u3057\u307e\u3057\u305f\u304c\u3001\u5168\u304f\u52d5\u4f5c\u305b\u305a\u2026\n\n- webkitmouseforcecancelled\n- webkitmouseforcechanged\n- webkitmouseforceclick\n- webkitmouseforcedown\n- webkitmouseforceup\n- webkitmouseforcewillbegin\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3082\u8272\u3005\u3068\u3042\u305f\u308a\u307e\u3057\u305f\u304c\u3001\u300c\u30eb\u30fc\u30af\u3088\u2026 webkitmouseforcexxx \u3092\u4f7f\u3046\u306e\u3060\u2026\u300d\u3068\u3044\u3063\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3070\u304b\u308a\u3067\u3059\u3002\u8b0e\u304c\u8b0e\u3092\u751f\u3080\u5c55\u958b\u3067\u3059\u3002\n\n\u7d50\u5c40 WebKit \u306e\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\u3057\u3066\u3001\u6b63\u89e3\u306b\u305f\u3069\u308a\u7740\u304d\u307e\u3057\u305f\u3002\n\u7b54\u3048\u304c\u5206\u304b\u3063\u3066\u3057\u307e\u3048\u3070\u3068\u3063\u3066\u3082\u7c21\u5358\u3067\u3059\u306d! \u53c2\u8003\u306b\u306a\u3055\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n(\u03b5\u30fb \u30ef \u30fb)\u0437 May the Force be with you. (\u30d5\u30a9\u30fc\u30b9\u3068\u5171\u306b\u3042\u3089\u3093\u3053\u3068\u3092)\n\n", "tags": ["iOS", "Safari", "ForceTouch", "JavaScript"]}