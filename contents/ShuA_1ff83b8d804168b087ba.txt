{"context": "\n\n\u9806\u6b21\u8ffd\u8a18\u4e88\u5b9a\n\n\u5168\u822c\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u66f4\u65b0\n$ sudo gcloud components update\n\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u78ba\u8a8d\n$ gcloud config list\n\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u5207\u308a\u66ff\u3048\n$ gcloud config set project <project name>\n\n\n\u5b9f\u884c\u6642\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u6307\u5b9a\n$ gcloud --project <project id>\n\n\nProject\u6bce\u306e\u30af\u30a9\u30fc\u30bf\n$ gcloud compute regions list\n\n\n\u4eca\u4f7f\u3048\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u78ba\u8a8d\n$ gcloud components list\n\n\nGCE\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u4e00\u89a7\n$ gcloud compute instances list\n\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u4f5c\u6210\n$ gcloud compute instances create test-instance --project test_pj --zone asia-east1-a \n\n\nFirewall\u306e\u30eb\u30fc\u30eb\u53c2\u7167\n$ gcloud compute routes list\n\n\nBigQuery\n\n\u5b9f\u884c\u6642\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u5207\u308a\u66ff\u3048\n$ bq --project_id <project id>\n\n\n\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\n\n\u307e\u305a\u306f\u3001\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306e\u4f5c\u6210\n\n $ bq mk <project name>:<dataset name>\n\n\n\u30c7\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\n\n $ bq mk --schema id:int,name:string -t <dataset name>.<table name>\n\n\n\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210(\u30ab\u30e9\u30e0\u306emode\u3092\u3057\u3066\u3044\u308b\u5834\u5408)\n\nbq\u30b3\u30de\u30f3\u30c9\u306bschema\u3092\u76f4\u63a5\u66f8\u304f\u5834\u5408\u3001mode\u304c\u6307\u5b9a\u3067\u304d\u306a\u3044\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306enullable\u306b\u306a\u308b\u3002\n\n$ bq mk --schema schema.ddl  -t <dataset name>.<table name>\n\n\nschema.ddl\n[\n  {\"name\": \"name\", \"type\": \"string\", \"mode\": \"required\"},\n  {\"name\": \"gender\", \"type\": \"string\", \"mode\": \"nullable\"},\n  {\"name\": \"count\", \"type\": \"integer\", \"mode\": \"repeated\"}\n]\n\n\n\n\u30c6\u30fc\u30d6\u30eb\u306e\u4e00\u89a7\n$ bq ls <dataset name>\n\n\n\u30c7\u30fc\u30bf\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\nbq extract <dataset name>.<table name> gs://<bucket name>/<file name>\n\n\n\u30c7\u30fc\u30bf\u91cf\u304c\u591a\u3044\u5834\u5408\u3001\u30d5\u30a1\u30a4\u30eb\u540d\u306b*\u3092\u3064\u3051\u3066\u304a\u304f\u3053\u3068\u3002\u305d\u3046\u3059\u308b\u3068\u52dd\u624b\u306b\u30d5\u30a1\u30a4\u30eb\u5206\u5272\u3059\u308b\u3002\n\n\n\u30c7\u30fc\u30bf\u306e\u30ed\u30fc\u30c9(\u533a\u5207\u308a\u6587\u5b57\u304c\u30d1\u30a4\u30d7\u306e\u5834\u5408)\nbq load -F '|' <dataset name>.<table name> gs://<bucket name>/<target file(pipe splited)>\n\n\n\u30c7\u30fc\u30bf\u30ed\u30fc\u30c9\u306b\u533a\u5207\u308a\u6587\u5b57\u300cx001\u300d\u3092\u6307\u5b9a\n\n\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u5165\u529b\u3057\u3065\u3089\u3044\u5236\u5fa1\u6587\u5b57\u306a\u3069\u3092\u533a\u5207\u308a\u6587\u5b57\u3068\u3059\u308b\u5834\u5408\nhive\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3053\u306e\u533a\u5207\u308a\u6587\u5b57\u3092\u4f7f\u3046\n\n$ bq load -F \"`echo $'\\x01'`\" <dataset name>.<table name> gs://<bucket name>/<target file(x001 splitted)>\n\n\n\u8907\u6570\u884c\u306e\u30b3\u30e1\u30f3\u30c8\n/*\n\u30b3\u30e1\u30f3\u30c8\u5185\u5bb9\n*/\n\n\nGCS\n\nlinux\u30b5\u30fc\u30d0\u304b\u3089\u306e\u30c7\u30fc\u30bf\u306e\u30b3\u30d4\u30fc\n$ gsutil copy <local file name> gs://<bucket name>/\n\n\n\u756a\u5916\u7de8\n\ncurl\u3067GCS\u64cd\u4f5c\n\nGCE\u304b\u3001Google cloud shell\u3067\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066token\u3092\u53d6\u5f97\u3002\u8fd4\u3063\u3066\u304d\u305fJSON\u306e\"access_token\"\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u5024\u3092\u5f97\u308b\u3002\n\ncurl \"http://metadata/computeMetadata/v1/instance/service-accounts/default/token\" -H \"X-Google-Metadata-Request: True\"\n\n\n\u30d0\u30b1\u30c3\u30c8\u306e\u4e2d\u8eab\u3092\u898b\u308b\u3002JSON\u3067\u8fd4\u3063\u3066\u304f\u308b\u3002\n\ncurl -X PUT  -X GET  -H \"Authorization: Bearer <accsess_token>\" \"https://www.googleapis.com/storage/v1/b/<bucket_name>/o\"\n\n\n\u30ed\u30fc\u30ab\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u9001\u308b\n\ncurl -X POST --data-binary @hogehoge.txt -H \"Authorization: Bearer <access_token>\" \"https://www.googleapis.com/upload/storage/v1/b/<bucket_name>/o?name=hogehoge.txt\"\n\n## \u9806\u6b21\u8ffd\u8a18\u4e88\u5b9a\n\n## \u5168\u822c\n### \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u66f4\u65b0\n\n```\n$ sudo gcloud components update\n```\n\n### \u30c7\u30d5\u30a9\u30eb\u30c8\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u78ba\u8a8d\n\n```\n$ gcloud config list\n```\n\n### \u30c7\u30d5\u30a9\u30eb\u30c8\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u5207\u308a\u66ff\u3048\n\n```\n$ gcloud config set project <project name>\n```\n\n### \u5b9f\u884c\u6642\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u6307\u5b9a\n\n```\n$ gcloud --project <project id>\n```\n\n### Project\u6bce\u306e\u30af\u30a9\u30fc\u30bf\n\n```\n$ gcloud compute regions list\n```\n\n### \u4eca\u4f7f\u3048\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u78ba\u8a8d\n```\n$ gcloud components list\n```\n\n## GCE\n### \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u4e00\u89a7\n```\n$ gcloud compute instances list\n```\n\n### \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u4f5c\u6210\n```\n$ gcloud compute instances create test-instance --project test_pj --zone asia-east1-a \n```\n\n### Firewall\u306e\u30eb\u30fc\u30eb\u53c2\u7167\n\n```\n$ gcloud compute routes list\n```\n\n## BigQuery\n### \u5b9f\u884c\u6642\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u5207\u308a\u66ff\u3048\n\n```\n$ bq --project_id <project id>\n```\n\n### \u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\n\n* \u307e\u305a\u306f\u3001\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306e\u4f5c\u6210\n \n ```\n $ bq mk <project name>:<dataset name>\n ```\n\n* \u30c7\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\n\n ```\n $ bq mk --schema id:int,name:string -t <dataset name>.<table name>\n ```\n\n### \u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210(\u30ab\u30e9\u30e0\u306emode\u3092\u3057\u3066\u3044\u308b\u5834\u5408)\n* bq\u30b3\u30de\u30f3\u30c9\u306bschema\u3092\u76f4\u63a5\u66f8\u304f\u5834\u5408\u3001mode\u304c\u6307\u5b9a\u3067\u304d\u306a\u3044\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306enullable\u306b\u306a\u308b\u3002\n\n```\n$ bq mk --schema schema.ddl  -t <dataset name>.<table name>\n```\n\n```schema.ddl\n[\n  {\"name\": \"name\", \"type\": \"string\", \"mode\": \"required\"},\n  {\"name\": \"gender\", \"type\": \"string\", \"mode\": \"nullable\"},\n  {\"name\": \"count\", \"type\": \"integer\", \"mode\": \"repeated\"}\n]\n```\n\n### \u30c6\u30fc\u30d6\u30eb\u306e\u4e00\u89a7\n\n```\n$ bq ls <dataset name>\n```\n\n### \u30c7\u30fc\u30bf\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\n```\nbq extract <dataset name>.<table name> gs://<bucket name>/<file name>\n```\n\n* \u30c7\u30fc\u30bf\u91cf\u304c\u591a\u3044\u5834\u5408\u3001\u30d5\u30a1\u30a4\u30eb\u540d\u306b*\u3092\u3064\u3051\u3066\u304a\u304f\u3053\u3068\u3002\u305d\u3046\u3059\u308b\u3068\u52dd\u624b\u306b\u30d5\u30a1\u30a4\u30eb\u5206\u5272\u3059\u308b\u3002\n\n### \u30c7\u30fc\u30bf\u306e\u30ed\u30fc\u30c9(\u533a\u5207\u308a\u6587\u5b57\u304c\u30d1\u30a4\u30d7\u306e\u5834\u5408)\n```\nbq load -F '|' <dataset name>.<table name> gs://<bucket name>/<target file(pipe splited)>\n```\n\n### \u30c7\u30fc\u30bf\u30ed\u30fc\u30c9\u306b\u533a\u5207\u308a\u6587\u5b57\u300cx001\u300d\u3092\u6307\u5b9a\n* \u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u5165\u529b\u3057\u3065\u3089\u3044\u5236\u5fa1\u6587\u5b57\u306a\u3069\u3092\u533a\u5207\u308a\u6587\u5b57\u3068\u3059\u308b\u5834\u5408\n* hive\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3053\u306e\u533a\u5207\u308a\u6587\u5b57\u3092\u4f7f\u3046\n\n```\n$ bq load -F \"`echo $'\\x01'`\" <dataset name>.<table name> gs://<bucket name>/<target file(x001 splitted)>\n```\n\n### \u8907\u6570\u884c\u306e\u30b3\u30e1\u30f3\u30c8\n\n```\n/*\n\u30b3\u30e1\u30f3\u30c8\u5185\u5bb9\n*/\n```\n\n## GCS\n### linux\u30b5\u30fc\u30d0\u304b\u3089\u306e\u30c7\u30fc\u30bf\u306e\u30b3\u30d4\u30fc\n```\n$ gsutil copy <local file name> gs://<bucket name>/\n```\n\n## \u756a\u5916\u7de8\n### curl\u3067GCS\u64cd\u4f5c\n* GCE\u304b\u3001Google cloud shell\u3067\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066token\u3092\u53d6\u5f97\u3002\u8fd4\u3063\u3066\u304d\u305fJSON\u306e\"access_token\"\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u5024\u3092\u5f97\u308b\u3002\n\n```\ncurl \"http://metadata/computeMetadata/v1/instance/service-accounts/default/token\" -H \"X-Google-Metadata-Request: True\"\n```\n\n* \u30d0\u30b1\u30c3\u30c8\u306e\u4e2d\u8eab\u3092\u898b\u308b\u3002JSON\u3067\u8fd4\u3063\u3066\u304f\u308b\u3002\n\n```\ncurl -X PUT  -X GET  -H \"Authorization: Bearer <accsess_token>\" \"https://www.googleapis.com/storage/v1/b/<bucket_name>/o\"\n```\n\n* \u30ed\u30fc\u30ab\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u9001\u308b\n\n```\ncurl -X POST --data-binary @hogehoge.txt -H \"Authorization: Bearer <access_token>\" \"https://www.googleapis.com/upload/storage/v1/b/<bucket_name>/o?name=hogehoge.txt\"\n```\n", "tags": ["GoogleCloudPlatform", "bigquery", "gcp"]}