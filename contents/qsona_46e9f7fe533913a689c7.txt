{"context": "\u793e\u5185\u306e\u8b70\u8ad6\u3067\u4e00\u822c\u5316\u3067\u304d\u305d\u3046\u306a\u306e\u306fqiita\u306b\u66f8\u3044\u3066\u307f\u308b\u3002\u6709\u7528\u6027\u306f\u5fae\u5999\u30fb\u30fb\n\n\u524d\u63d0\n\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u3092\u6271\u3046\u3001\u5171\u901a\u57fa\u76e4\u7684\u306a\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9 P (Provider) \u304c\u3042\u308b\u3002\n\u30e6\u30fc\u30b6\u5411\u3051\u306e\u30b5\u30fc\u30d3\u30b9 C (Consumer) \u306f\u3001\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u767b\u9332\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u3002\u7b46\u8005\u306f\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u958b\u767a\u3092\u62c5\u5f53\u3057\u3066\u3044\u308b\u3002\nC \u306f\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u767b\u9332\u3084\u5546\u54c1\u8cfc\u5165\u306a\u3069\u306eAPI\u3092\u3082\u3063\u3066\u304a\u308a\u3001\u30e6\u30fc\u30b6\u304b\u3089\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u53d6\u308b\u3068\u3001\u5185\u90e8\u3067\u306f C \u306b\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u767b\u9332\u3084\u6c7a\u6e08\u306a\u3069\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u3063\u3066\u3044\u308b\u3002\n\n\u554f\u984c\u306b\u306a\u3063\u305f\u3053\u3068\n\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u767b\u9332\u6642\u306b\u3001\u30ab\u30fc\u30c9\u88cf\u306e\u756a\u53f7 cvv \u3092\u5165\u529b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\u3053\u306e\u756a\u53f7\u306f4\u6841\u4ee5\u5185\u3067\u3042\u308b\u3002\n\u30b5\u30fc\u30d3\u30b9C\u306f\u3001\u7279\u306bcvv\u306e\u9577\u3055\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u884c\u308f\u305a\u3001\u305d\u306e\u307e\u307e\u30b5\u30fc\u30d3\u30b9P\u306b\u9001\u3063\u3066\u3044\u305f\u3002\u30b5\u30fc\u30d3\u30b9P\u306f400 Bad Request\u3092\u8fd4\u3057\u3064\u3064\u3001\u30a8\u30e9\u30fc\u306eSlack\u901a\u77e5\u3092\u3057\u3066\u3044\u305f\u3002\u30a8\u30e9\u30fc\u304c\u5b9a\u5e38\u7684\u306b\u898b\u3089\u308c\u305f\u305f\u3081\u3001P\u306e\u958b\u767a\u8005\u306f\u3001C\u306e\u958b\u767a\u8005\u306bvalidation\u3092\u304b\u3051\u3066\u307b\u3057\u3044\u3068\u8a00\u3063\u305f\u3002\n\n\u8ad6\u70b9\n\u30b5\u30fc\u30d3\u30b9C\u5074\u3068\u3057\u3066\u306f\u3001cvv\u306e\u9577\u3055\u306evalidation\u3092\u304b\u3051\u308b\u3053\u3068\u306f\u53ef\u80fd\u3060\u304c\u3001\u3044\u304f\u3064\u304b\u306e\u7591\u554f\u304c\u3042\u3063\u305f\u3002\n\u305d\u3082\u305d\u3082\u3053\u306e\u7a2e\u306e\u30a8\u30e9\u30fc\u306f\u3001\u5f15\u304d\u8d77\u3053\u3055\u306a\u3044\u3079\u304d\u306a\u306e\u304b?\n\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u3063\u3066\u305d\u306e\u30a8\u30e9\u30fc\u306e\u30bf\u30a4\u30d7\u3092\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3059\u308b\u307b\u3046\u304c\u5b9f\u88c5\u304c\u697d\u3067\u3001\u5404\u30b5\u30fc\u30d0\u3067\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306f\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u306e\u5206\u6563\u3092\u751f\u3080\u306e\u3067\u3001\u3084\u308a\u305f\u304f\u306a\u3044\u5834\u5408\u3082\u3042\u308b\u3002\n\u307e\u305f\u3001\u4eca\u56de\u3067\u3044\u3046\u3068Payment Gateway\u306b\u554f\u3044\u5408\u308f\u305b\u306a\u3044\u3068\u6700\u7d42\u7684\u306b\u6b63\u3057\u3044cvv\u304b\u306f\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u9577\u3055\u306evalidation\u3060\u3051\u3092\u7279\u5225\u6271\u3044\u3059\u308b\u7406\u7531\u306f\u3042\u308b\u306e\u304b\u3069\u3046\u304b\u3002\n\u672c\u5f53\u306bSlack\u901a\u77e5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u30bf\u30a4\u30d7\u306e\u30a8\u30e9\u30fc\u306a\u306e\u304b?\n\u3068\u3044\u3046\u7591\u554f\u3092\u3082\u3068\u306b\u3001\u8b70\u8ad6\u3092\u3057\u305f\u3002\n\n\u7d50\u8ad6\n\u4ee5\u4e0b\u306e\u5834\u5408\u306b\u9650\u308a\u3001consumer\u306b\u4e8b\u524d\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u5f37\u5236\u3055\u305b\u3066\u3088\u3044\u3001\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u3063\u305f\u3002\n\nconsumer\u304c\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u3067\u306f\u306a\u304f\u5185\u90e8\u306e\u30b5\u30fc\u30d3\u30b9\u3067\u3042\u308b\u3002\n\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30ed\u30b8\u30c3\u30af\u304c\u7c21\u6f54\u3067\u3042\u308b\u3002\n\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30ed\u30b8\u30c3\u30af\u304cstable\u3067\u3042\u308b\u3002(\u4eca\u5f8c\u305d\u3046\u5909\u308f\u3089\u306a\u3044)\n\n\u4eca\u56de\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001cvv\u306f4\u6841\u4ee5\u5185\u3068\u3044\u3046\u3001\u7c21\u5358\u304b\u3064\u305d\u3046\u5909\u308f\u3089\u306a\u3044\u30ed\u30b8\u30c3\u30af\u3067\u3042\u308b\u3002\n\u3053\u308c\u306b\u3088\u308a\u3001\u30d7\u30ed\u30c0\u30af\u30c8\u5168\u4f53\u3068\u3057\u3066\u3001\u30d0\u30b0\u65e9\u671f\u767a\u898b\u306b\u3064\u306a\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u5834\u5408\u304c\u3042\u308b\u305f\u3081\u3002\n\u305d\u306e\u5834\u5408\u3001provider\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u7528\u610f\u3057consumer\u306b\u308f\u304b\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n\u304a\u307e\u3051\nP\u30c1\u30fc\u30e0\u306e\u30a8\u30f3\u30b8\u30cb\u30a2\u304c\u8b70\u8ad6\u307e\u3068\u3081\u3066\u304f\u308c\u305f\u306e\u3067\u3001\u305d\u306e\u307e\u307e\u8cbc\u308b\u3002\n\nP Team should be responsible for keeping updated with any changes to the rules for credit card validations.\nP should document the basic validation rules for CVV, Credit Card numbers, expiry dates.\nP should inform its consumers when there are any validation changes.\nConsumers should implement the validation rules. Ideally for the best User-Experience this should be client-side, but server-side is be good enough to prevent bad requests going to payment gateway.\nP will generate Airbrake/ErrBit alerts when validation rules are broken. And P Team will identify the consumer and inform them of the problems.\n\n\u793e\u5185\u306e\u8b70\u8ad6\u3067\u4e00\u822c\u5316\u3067\u304d\u305d\u3046\u306a\u306e\u306fqiita\u306b\u66f8\u3044\u3066\u307f\u308b\u3002\u6709\u7528\u6027\u306f\u5fae\u5999\u30fb\u30fb\n\n## \u524d\u63d0\n\n\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u3092\u6271\u3046\u3001\u5171\u901a\u57fa\u76e4\u7684\u306a\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9 `P` (Provider) \u304c\u3042\u308b\u3002\n\n\u30e6\u30fc\u30b6\u5411\u3051\u306e\u30b5\u30fc\u30d3\u30b9 `C` (Consumer) \u306f\u3001\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u767b\u9332\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u3002\u7b46\u8005\u306f\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u958b\u767a\u3092\u62c5\u5f53\u3057\u3066\u3044\u308b\u3002\n\n`C` \u306f\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u767b\u9332\u3084\u5546\u54c1\u8cfc\u5165\u306a\u3069\u306eAPI\u3092\u3082\u3063\u3066\u304a\u308a\u3001\u30e6\u30fc\u30b6\u304b\u3089\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u53d6\u308b\u3068\u3001\u5185\u90e8\u3067\u306f `C` \u306b\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u767b\u9332\u3084\u6c7a\u6e08\u306a\u3069\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u3063\u3066\u3044\u308b\u3002\n\n## \u554f\u984c\u306b\u306a\u3063\u305f\u3053\u3068\n\n\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u767b\u9332\u6642\u306b\u3001\u30ab\u30fc\u30c9\u88cf\u306e\u756a\u53f7 cvv \u3092\u5165\u529b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\u3053\u306e\u756a\u53f7\u306f4\u6841\u4ee5\u5185\u3067\u3042\u308b\u3002\n\n\u30b5\u30fc\u30d3\u30b9C\u306f\u3001\u7279\u306bcvv\u306e\u9577\u3055\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u884c\u308f\u305a\u3001\u305d\u306e\u307e\u307e\u30b5\u30fc\u30d3\u30b9P\u306b\u9001\u3063\u3066\u3044\u305f\u3002\u30b5\u30fc\u30d3\u30b9P\u306f400 Bad Request\u3092\u8fd4\u3057\u3064\u3064\u3001\u30a8\u30e9\u30fc\u306eSlack\u901a\u77e5\u3092\u3057\u3066\u3044\u305f\u3002\u30a8\u30e9\u30fc\u304c\u5b9a\u5e38\u7684\u306b\u898b\u3089\u308c\u305f\u305f\u3081\u3001P\u306e\u958b\u767a\u8005\u306f\u3001C\u306e\u958b\u767a\u8005\u306bvalidation\u3092\u304b\u3051\u3066\u307b\u3057\u3044\u3068\u8a00\u3063\u305f\u3002\n\n## \u8ad6\u70b9\n\n\u30b5\u30fc\u30d3\u30b9C\u5074\u3068\u3057\u3066\u306f\u3001cvv\u306e\u9577\u3055\u306evalidation\u3092\u304b\u3051\u308b\u3053\u3068\u306f\u53ef\u80fd\u3060\u304c\u3001\u3044\u304f\u3064\u304b\u306e\u7591\u554f\u304c\u3042\u3063\u305f\u3002\n\n\u305d\u3082\u305d\u3082\u3053\u306e\u7a2e\u306e\u30a8\u30e9\u30fc\u306f\u3001\u5f15\u304d\u8d77\u3053\u3055\u306a\u3044\u3079\u304d\u306a\u306e\u304b?\n\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u3063\u3066\u305d\u306e\u30a8\u30e9\u30fc\u306e\u30bf\u30a4\u30d7\u3092\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3059\u308b\u307b\u3046\u304c\u5b9f\u88c5\u304c\u697d\u3067\u3001\u5404\u30b5\u30fc\u30d0\u3067\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306f\u30c9\u30e1\u30a4\u30f3\u30ed\u30b8\u30c3\u30af\u306e\u5206\u6563\u3092\u751f\u3080\u306e\u3067\u3001\u3084\u308a\u305f\u304f\u306a\u3044\u5834\u5408\u3082\u3042\u308b\u3002\n\n\u307e\u305f\u3001\u4eca\u56de\u3067\u3044\u3046\u3068Payment Gateway\u306b\u554f\u3044\u5408\u308f\u305b\u306a\u3044\u3068\u6700\u7d42\u7684\u306b\u6b63\u3057\u3044cvv\u304b\u306f\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u9577\u3055\u306evalidation\u3060\u3051\u3092\u7279\u5225\u6271\u3044\u3059\u308b\u7406\u7531\u306f\u3042\u308b\u306e\u304b\u3069\u3046\u304b\u3002\n\u672c\u5f53\u306bSlack\u901a\u77e5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u30bf\u30a4\u30d7\u306e\u30a8\u30e9\u30fc\u306a\u306e\u304b?\n\n\u3068\u3044\u3046\u7591\u554f\u3092\u3082\u3068\u306b\u3001\u8b70\u8ad6\u3092\u3057\u305f\u3002\n\n## \u7d50\u8ad6\n\n\u4ee5\u4e0b\u306e\u5834\u5408\u306b\u9650\u308a\u3001consumer\u306b\u4e8b\u524d\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u5f37\u5236\u3055\u305b\u3066\u3088\u3044\u3001\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u3063\u305f\u3002\n\n- consumer\u304c\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u3067\u306f\u306a\u304f\u5185\u90e8\u306e\u30b5\u30fc\u30d3\u30b9\u3067\u3042\u308b\u3002\n- \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30ed\u30b8\u30c3\u30af\u304c\u7c21\u6f54\u3067\u3042\u308b\u3002\n- \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30ed\u30b8\u30c3\u30af\u304cstable\u3067\u3042\u308b\u3002(\u4eca\u5f8c\u305d\u3046\u5909\u308f\u3089\u306a\u3044)\n\n\u4eca\u56de\u306e\u30b1\u30fc\u30b9\u3067\u306f\u3001cvv\u306f4\u6841\u4ee5\u5185\u3068\u3044\u3046\u3001\u7c21\u5358\u304b\u3064\u305d\u3046\u5909\u308f\u3089\u306a\u3044\u30ed\u30b8\u30c3\u30af\u3067\u3042\u308b\u3002\n\n\u3053\u308c\u306b\u3088\u308a\u3001\u30d7\u30ed\u30c0\u30af\u30c8\u5168\u4f53\u3068\u3057\u3066\u3001\u30d0\u30b0\u65e9\u671f\u767a\u898b\u306b\u3064\u306a\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u5834\u5408\u304c\u3042\u308b\u305f\u3081\u3002\n\n\u305d\u306e\u5834\u5408\u3001provider\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u7528\u610f\u3057consumer\u306b\u308f\u304b\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n## \u304a\u307e\u3051\n\nP\u30c1\u30fc\u30e0\u306e\u30a8\u30f3\u30b8\u30cb\u30a2\u304c\u8b70\u8ad6\u307e\u3068\u3081\u3066\u304f\u308c\u305f\u306e\u3067\u3001\u305d\u306e\u307e\u307e\u8cbc\u308b\u3002\n\n* `P Team` should be responsible for keeping updated with any changes to the rules for credit card validations.\n\n* `P` should document the basic validation rules for CVV, Credit Card numbers, expiry dates.\n\n* `P` should inform its `consumers` when there are any validation changes.\n\n* `Consumers` should implement the validation rules. Ideally for the best User-Experience this should be client-side, but server-side is be good enough to prevent bad requests going to `payment gateway`.\n\n* `P` will generate Airbrake/ErrBit alerts when validation rules are broken. And `P Team` will identify the `consumer` and inform them of the problems.\n\n", "tags": ["microservices"]}