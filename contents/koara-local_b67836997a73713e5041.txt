{"context": "\n\nTL;DR\nsystemd-analyze\u3067\u8d77\u52d5\u6642\u306e\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u3092\u89e3\u6790\u3059\u308b\u65b9\u6cd5\u30e1\u30e2\n\n\u5b9f\u884c\u65b9\u6cd5\nVirtualBox\u4e0a\u306eUbuntu 16.04\u3067\u691c\u8a3c\u3057\u307e\u3057\u305f\u3002\n\nsystemd-analyze : kernel\u3068userspace\u305d\u308c\u305e\u308c\u306e\u8d77\u52d5\u6642\u9593\u306e\u8868\u793a\n$ systemd-analyze\nStartup finished in 4.604s (kernel) + 4min 19.644s (userspace) = 4min 24.249s\n\n\nsystemd-analyze blame : \u6642\u9593\u304c\u304b\u304b\u3063\u3066\u3044\u308b\u9806\u306b\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u6642\u9593\u3092\u8868\u793a\n$ systemd-analyze blame | head\n    4min 12.385s apt-daily.service\n         15.536s docker.service\n          7.015s ModemManager.service\n          4.008s apparmor.service\n          3.843s networking.service\n          3.618s NetworkManager.service\n          3.391s dev-sda1.device\n          2.811s thermald.service\n          2.743s vboxadd.service\n          2.693s avahi-daemon.service\n\n\nsystemd-analyze critical-chain : \u6642\u9593\u306e\u304b\u304b\u3063\u3066\u3044\u308b\u547c\u3073\u51fa\u3057\u30c1\u30a7\u30fc\u30f3\u3092\u8868\u793a\n$ systemd-analyze critical-chain \nThe time after the unit is active or started is printed after the \"@\" character.\nThe time the unit takes to start is printed after the \"+\" character.\n\ngraphical.target @29.149s\n\u2514\u2500multi-user.target @29.149s\n  \u2514\u2500docker.service @13.612s +15.536s\n    \u2514\u2500network.target @13.602s\n      \u2514\u2500NetworkManager.service @9.984s +3.618s\n        \u2514\u2500dbus.service @7.349s\n          \u2514\u2500basic.target @7.258s\n            \u2514\u2500sockets.target @7.258s\n              \u2514\u2500snapd.socket @7.170s +67ms\n                \u2514\u2500sysinit.target @7.168s\n                  \u2514\u2500apparmor.service @3.133s +4.008s\n                    \u2514\u2500local-fs.target @3.132s\n                      \u2514\u2500run-user-1000-gvfs.mount @54.632s\n                        \u2514\u2500run-user-1000.mount @49.219s\n                          \u2514\u2500local-fs-pre.target @3.132s\n                            \u2514\u2500systemd-remount-fs.service @3.080s +37ms\n                              \u2514\u2500system.slice @1.713s\n                                \u2514\u2500-.slice @1.693s\n\n\nsystemd-analyze plot > plot.svg : \u8d77\u52d5\u6642\u9593\u306e\u30c1\u30e3\u30fc\u30c8\u3092\u30d7\u30ed\u30c3\u30c8\n$ systemd-analyze plot > plot.svg\n\n\n\n\u53c2\u8003\n\u8d77\u52d5\u304c\u9045\u3044\u539f\u56e0\u306f\uff1f\u305d\u3093\u306a\u6642\u306fsystemd-analyze\u3067\u30c1\u30a7\u30c3\u30af | Simple blog @atani\n\u30d6\u30fc\u30c8\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u5411\u4e0a - ArchWiki\nImproving performance/Boot process - ArchWiki\n# TL;DR\n\nsystemd-analyze\u3067\u8d77\u52d5\u6642\u306e\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u3092\u89e3\u6790\u3059\u308b\u65b9\u6cd5\u30e1\u30e2\n\n# \u5b9f\u884c\u65b9\u6cd5\nVirtualBox\u4e0a\u306eUbuntu 16.04\u3067\u691c\u8a3c\u3057\u307e\u3057\u305f\u3002\n\n## `systemd-analyze` : kernel\u3068userspace\u305d\u308c\u305e\u308c\u306e\u8d77\u52d5\u6642\u9593\u306e\u8868\u793a\n```bash\n$ systemd-analyze\nStartup finished in 4.604s (kernel) + 4min 19.644s (userspace) = 4min 24.249s\n```\n## `systemd-analyze blame` : \u6642\u9593\u304c\u304b\u304b\u3063\u3066\u3044\u308b\u9806\u306b\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u6642\u9593\u3092\u8868\u793a\n\n```bash\n$ systemd-analyze blame | head\n    4min 12.385s apt-daily.service\n         15.536s docker.service\n          7.015s ModemManager.service\n          4.008s apparmor.service\n          3.843s networking.service\n          3.618s NetworkManager.service\n          3.391s dev-sda1.device\n          2.811s thermald.service\n          2.743s vboxadd.service\n          2.693s avahi-daemon.service\n```\n\n## `systemd-analyze critical-chain` : \u6642\u9593\u306e\u304b\u304b\u3063\u3066\u3044\u308b\u547c\u3073\u51fa\u3057\u30c1\u30a7\u30fc\u30f3\u3092\u8868\u793a\n\n```bash\n$ systemd-analyze critical-chain \nThe time after the unit is active or started is printed after the \"@\" character.\nThe time the unit takes to start is printed after the \"+\" character.\n\ngraphical.target @29.149s\n\u2514\u2500multi-user.target @29.149s\n  \u2514\u2500docker.service @13.612s +15.536s\n    \u2514\u2500network.target @13.602s\n      \u2514\u2500NetworkManager.service @9.984s +3.618s\n        \u2514\u2500dbus.service @7.349s\n          \u2514\u2500basic.target @7.258s\n            \u2514\u2500sockets.target @7.258s\n              \u2514\u2500snapd.socket @7.170s +67ms\n                \u2514\u2500sysinit.target @7.168s\n                  \u2514\u2500apparmor.service @3.133s +4.008s\n                    \u2514\u2500local-fs.target @3.132s\n                      \u2514\u2500run-user-1000-gvfs.mount @54.632s\n                        \u2514\u2500run-user-1000.mount @49.219s\n                          \u2514\u2500local-fs-pre.target @3.132s\n                            \u2514\u2500systemd-remount-fs.service @3.080s +37ms\n                              \u2514\u2500system.slice @1.713s\n                                \u2514\u2500-.slice @1.693s\n```\n\n## `systemd-analyze plot > plot.svg` : \u8d77\u52d5\u6642\u9593\u306e\u30c1\u30e3\u30fc\u30c8\u3092\u30d7\u30ed\u30c3\u30c8\n\n```bash:\n$ systemd-analyze plot > plot.svg\n```\n\n![\u7121\u984c.png](https://qiita-image-store.s3.amazonaws.com/0/37721/c716fe91-d789-5b86-d73d-73c384688431.png)\n\n# \u53c2\u8003\n[\u8d77\u52d5\u304c\u9045\u3044\u539f\u56e0\u306f\uff1f\u305d\u3093\u306a\u6642\u306fsystemd-analyze\u3067\u30c1\u30a7\u30c3\u30af | Simple blog @atani](https://atani.github.io/2015/06/%E8%B5%B7%E5%8B%95%E3%81%8C%E9%81%85%E3%81%84%E5%8E%9F%E5%9B%A0%E3%81%AF%EF%BC%9F%E3%81%9D%E3%82%93%E3%81%AA%E6%99%82%E3%81%AFsystemd-analyze%E3%81%A7%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF/)\n[\u30d6\u30fc\u30c8\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u5411\u4e0a - ArchWiki](https://wiki.archlinuxjp.org/index.php/%E3%83%96%E3%83%BC%E3%83%88%E3%83%91%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%B3%E3%82%B9%E3%81%AE%E5%90%91%E4%B8%8A)\n[Improving performance/Boot process - ArchWiki](https://wiki.archlinux.org/index.php/Improving_performance/Boot_process)\n", "tags": ["Linux", "systemd"]}