{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\n\u6a5f\u80fd\u30a2\u30c3\u30d7\u3057\u305fRICOH THETA S\u3092node.js\u304b\u3089\u64cd\u4f5c\u3057\u3066\u307f\u308b\u3002\n\u516c\u5f0f\u306b\u3088\u308b\u3068API\u304cGoogle\u306eOpen Spherical Camera API Version 1.0\u6e96\u62e0\u306b\u306a\u3063\u305f\u3068\u3044\u3046\u3053\u3068\u306a\u306e\u3067\u3001OSC\u3092\u4f7f\u3063\u3066\u5236\u5fa1\u3057\u3066\u307f\u308b\u3002\n\n\u6e96\u5099\nTHETA\u306fP2P\u306ewifi\u63a5\u7d9a\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306e\u3067\u3001PC\u5074\u306bwifi\u30a2\u30c0\u30d7\u30bf\u3092\u3064\u306a\u304e\u3001\u901a\u4fe1\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\u30ce\u30fc\u30c8PC\u74b0\u5883\u3067wifi\u63a5\u7d9a\u3067\u304d\u308b\u74b0\u5883\u3067\u3082\u826f\u3044\u306e\u3060\u304c\u3001THETA\u3068\u63a5\u7d9a\u3059\u308b\u3068\u901a\u5e38\u306e\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u74b0\u5883\u304c\u5931\u308f\u308c\u308b\u305f\u3081\u3001\u65e2\u5b58\u306e\u30cd\u30c3\u30c8\u74b0\u5883\u306f\u7dad\u6301\u3057\u3064\u3064\u3001THETA\u3092\u3064\u306a\u3052\u308b\u306b\u306f\uff12\u3064\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a2\u30c0\u30d7\u30bf\u304c\u6700\u4f4e\u9650\u5fc5\u8981\u3002\n\u4eca\u56de\u306f\u6709\u7dda\u3067\u901a\u5e38\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u74b0\u5883\u3092\u7dad\u6301\u3057\u3064\u3064\u3001wifi\u306fTHETA\u306b\u7e4b\u3052\u308b\u3068\u3044\u3046\u69cb\u6210\u306b\u3057\u305f\u3002\n\ncurl\u3067\u63a5\u7d9a\u78ba\u8a8d\n\u516c\u5f0f\u306eAPI Reference\u306b\u3088\u308b\u3068THETA\u306eIP\u30a2\u30c9\u30ec\u30b9\u3068\u30dd\u30fc\u30c8\u306f192.168.1.1:80\u306a\u306e\u3067\u3001\u3053\u306e\u30a2\u30c9\u30ec\u30b9\u306b\u5bfe\u3057\u3066curl\u3067\u30b3\u30de\u30f3\u30c9\u3092\u6295\u3052\u3066\u307f\u308b\u3002\ncurl http://192.168.1.1:80/osc/info\u3067info\u3092\u3068\u3063\u3066\u307f\u308b\u3002\n\u30ec\u30b9\u30dd\u30f3\u30b9\n{\n    \"manufacturer\": \"RICOH\",\n    \"model\": \"RICOH THETA S\",\n    \"serialNumber\": \"00XXXXXX\",\n    \"firmareVersion\": \"01.11\",\n    \"supportUrl\": \"https://theta360.com/en/support/\",\n    \"endpoints\": {\n        \"httpPort\": 80,\n        \"httpUpdatesPort\": 80\n    },\n    \"gps\": false,\n    \"gyro\": false,\n    \"uptime\": 222,\n    \"api\": [\n        \"/osc/info\",\n        \"/osc/state\",\n        \"/osc/checkForUpdates\",\n        \"/osc/commands/execute\",\n        \"/osc/commands/status\"\n    ]\n}\n\ncurl -X POST http://192.168.1.1:80/osc/state\u3067THETA\u306e\u72b6\u614b\u3092\u53d6\u5f97\u3057\u3066\u307f\u308b\u3002\n\u30ec\u30b9\u30dd\u30f3\u30b9\n{\n    \"fingerprint\": \"FIG_0002\",\n    \"state\": {\n        \"sessionId\": \"SID_0000\",\n        \"batteryLevel\": 1,\n        \"storageChanged\": false,\n        \"_captureStatus\": \"idle\",\n        \"_recordedTime\": 0,\n        \"_recordableTime\": 0,\n        \"_latestFileUri\": \"\",\n        \"_batteryState\": \"disconnect\"\n    }\n}\n\n\nnode.js\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\nOpen Spherical Camera API\u3092\u30e9\u30c3\u30d7\u3057\u305fosc-client\u3092\u4f7f\u3063\u3066\u307f\u308b\u3002\ntakePicture()\u3067\u5199\u771f\u3092\u64ae\u308a\u3001jpeg\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\ntheta.js\nvar fs = require('fs');\nvar OscClientClass = require('osc-client').OscClient;\n\nvar domain = '192.168.1.1';\nvar port = '80';\nvar client = new OscClientClass(domain, port);\nvar sessionId;\nvar filename;\n\nclient.startSession().then(function(res){\n  sessionId = res.body.results.sessionId;\n  return client.takePicture(sessionId);\n})\n.then(function (res) {\n  var pictureUri = res.body.results.fileUri;\n  console.log('pictureUri :%s',pictureUri);\n\n  var path = pictureUri.split('/');\n  filename = path.pop();\n  return client.getImage(pictureUri);\n})\n.then(function(res){\n  var imgData = res.body;\n  fs.writeFile(filename,imgData);\n  return client.closeSession(sessionId);\n});\n\n\nnode theta.js\u3067\u5b9f\u884c\u3059\u308b\u3068\u64ae\u5f71\u3057\u305f\u5f8c\u306bfileUri\u3092\u8868\u793a\u3057\u3066\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u308a\u8fbc\u3080\u3002\nnode theta.js\npictureUri :100RICOH/R0010009.JPG\n\n\u5b9f\u884c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\n\nIP\u30a2\u30c9\u30ec\u30b9\u3068\u30dd\u30fc\u30c8\u306fAPI Reference\u306b\u8a18\u8f09\u306e\u3082\u306e\u3092\u4f7f\u7528\u3059\u308b\u3002\nP2P\u63a5\u7d9a\u3001\u304b\u3064\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306f1\u53f0\u3057\u304b\u7e4b\u304c\u3089\u306a\u3044\u306e\u3067\u5225\u306b\u6652\u3057\u3066\u3082OK\u3002\n\u51e6\u7406\u306e\u6982\u8981\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3002\n1. startSession()\u3067sessionId\u3092\u53d6\u5f97\u3059\u308b\n2. \u53d6\u5f97\u3057\u305fsessionId\u3092\u6307\u5b9a\u3057\u3066takePicture()\u3067\u64ae\u5f71\u3002\n3. takePicture()\u306e\u30ec\u30b9\u30dd\u30f3\u30b9(fileUri)\u3092\u6307\u5b9a\u3057\u3066\u3001getImage()\u3067\u30d5\u30a1\u30a4\u30eb\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\u3002\n4. closeSession()\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u30af\u30ed\u30fc\u30ba\u3002\n\n\u3055\u3044\u3054\u306b\n\u65b0\u3057\u3044theta s\u306fOpen Spherical Camera API\u306b\u6e96\u62e0\u3057\u305f\u305f\u3081\u3001\u3088\u308a\u7c21\u5358\u306b\u30a2\u30d7\u30ea\u306e\u69cb\u7bc9\u304c\u53ef\u80fd\u306b\u306a\u3063\u3066\u3044\u308b\u5370\u8c61\u3002\n\u7d50\u69cb\u58f2\u308c\u3066\u3044\u308b\u307f\u305f\u3044\u3060\u3057\u3001\u3053\u308c\u304b\u3089\u9762\u767d\u3044\u4f7f\u3044\u65b9\u304c\u5897\u3048\u3066\u304f\u308b\u306e\u3067\u306f\u306a\u3044\u304b\u306a\uff1f\n\u500b\u4eba\u7684\u306b\u306fwifi\u306e\u5207\u308a\u66ff\u3048\u3001theta\u30a2\u30d7\u30ea\u306e\u8d77\u52d5\u306a\u3069\u3001\u4e00\u9023\u306e\u4f5c\u696d\u304c\u9762\u5012\u306a\u306e\u3067NFC\u30bf\u30b0\u3092\u5229\u7528\u3057\u3066\u3001\u81ea\u52d5\u5316\u3057\u3088\u3046\u3068\u8003\u3048\u4e2d\u3002\n\u5b8c\u6210\u3057\u305f\u3089\u6295\u7a3f\u4e88\u5b9a\u3002\n#\u306f\u3058\u3081\u306b\n![theta s.png](https://qiita-image-store.s3.amazonaws.com/0/95484/6a59b9f3-b480-6918-94db-9201319d1677.png)\n\n\u6a5f\u80fd\u30a2\u30c3\u30d7\u3057\u305fRICOH THETA S\u3092node.js\u304b\u3089\u64cd\u4f5c\u3057\u3066\u307f\u308b\u3002\n[\u516c\u5f0f](https://developers.theta360.com/ja/docs/v2/api_reference/)\u306b\u3088\u308b\u3068API\u304cGoogle\u306eOpen Spherical Camera API Version 1.0\u6e96\u62e0\u306b\u306a\u3063\u305f\u3068\u3044\u3046\u3053\u3068\u306a\u306e\u3067\u3001OSC\u3092\u4f7f\u3063\u3066\u5236\u5fa1\u3057\u3066\u307f\u308b\u3002\n\n#\u6e96\u5099\nTHETA\u306fP2P\u306ewifi\u63a5\u7d9a\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306e\u3067\u3001PC\u5074\u306bwifi\u30a2\u30c0\u30d7\u30bf\u3092\u3064\u306a\u304e\u3001\u901a\u4fe1\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\u30ce\u30fc\u30c8PC\u74b0\u5883\u3067wifi\u63a5\u7d9a\u3067\u304d\u308b\u74b0\u5883\u3067\u3082\u826f\u3044\u306e\u3060\u304c\u3001THETA\u3068\u63a5\u7d9a\u3059\u308b\u3068\u901a\u5e38\u306e\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u74b0\u5883\u304c\u5931\u308f\u308c\u308b\u305f\u3081\u3001\u65e2\u5b58\u306e\u30cd\u30c3\u30c8\u74b0\u5883\u306f\u7dad\u6301\u3057\u3064\u3064\u3001THETA\u3092\u3064\u306a\u3052\u308b\u306b\u306f\uff12\u3064\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a2\u30c0\u30d7\u30bf\u304c\u6700\u4f4e\u9650\u5fc5\u8981\u3002\n\u4eca\u56de\u306f\u6709\u7dda\u3067\u901a\u5e38\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u74b0\u5883\u3092\u7dad\u6301\u3057\u3064\u3064\u3001wifi\u306fTHETA\u306b\u7e4b\u3052\u308b\u3068\u3044\u3046\u69cb\u6210\u306b\u3057\u305f\u3002\n\n##curl\u3067\u63a5\u7d9a\u78ba\u8a8d\n[\u516c\u5f0f](https://developers.theta360.com/ja/docs/v2/api_reference/)\u306eAPI Reference\u306b\u3088\u308b\u3068THETA\u306eIP\u30a2\u30c9\u30ec\u30b9\u3068\u30dd\u30fc\u30c8\u306f`192.168.1.1:80`\u306a\u306e\u3067\u3001\u3053\u306e\u30a2\u30c9\u30ec\u30b9\u306b\u5bfe\u3057\u3066curl\u3067\u30b3\u30de\u30f3\u30c9\u3092\u6295\u3052\u3066\u307f\u308b\u3002\n\n`curl http://192.168.1.1:80/osc/info`\u3067info\u3092\u3068\u3063\u3066\u307f\u308b\u3002\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\n\n```json\n{\n    \"manufacturer\": \"RICOH\",\n    \"model\": \"RICOH THETA S\",\n    \"serialNumber\": \"00XXXXXX\",\n    \"firmareVersion\": \"01.11\",\n    \"supportUrl\": \"https://theta360.com/en/support/\",\n    \"endpoints\": {\n        \"httpPort\": 80,\n        \"httpUpdatesPort\": 80\n    },\n    \"gps\": false,\n    \"gyro\": false,\n    \"uptime\": 222,\n    \"api\": [\n        \"/osc/info\",\n        \"/osc/state\",\n        \"/osc/checkForUpdates\",\n        \"/osc/commands/execute\",\n        \"/osc/commands/status\"\n    ]\n}\n```\n\n`curl -X POST http://192.168.1.1:80/osc/state`\u3067THETA\u306e\u72b6\u614b\u3092\u53d6\u5f97\u3057\u3066\u307f\u308b\u3002\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\n\n```json\n{\n    \"fingerprint\": \"FIG_0002\",\n    \"state\": {\n        \"sessionId\": \"SID_0000\",\n        \"batteryLevel\": 1,\n        \"storageChanged\": false,\n        \"_captureStatus\": \"idle\",\n        \"_recordedTime\": 0,\n        \"_recordableTime\": 0,\n        \"_latestFileUri\": \"\",\n        \"_batteryState\": \"disconnect\"\n    }\n}\n```\n\n#node.js\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\nOpen Spherical Camera API\u3092\u30e9\u30c3\u30d7\u3057\u305f[osc-client](https://www.npmjs.com/package/osc-client)\u3092\u4f7f\u3063\u3066\u307f\u308b\u3002\ntakePicture()\u3067\u5199\u771f\u3092\u64ae\u308a\u3001jpeg\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\n```js:theta.js\nvar fs = require('fs');\nvar OscClientClass = require('osc-client').OscClient;\n \nvar domain = '192.168.1.1';\nvar port = '80';\nvar client = new OscClientClass(domain, port);\nvar sessionId;\nvar filename;\n \nclient.startSession().then(function(res){\n  sessionId = res.body.results.sessionId;\n  return client.takePicture(sessionId);\n})\n.then(function (res) {\n  var pictureUri = res.body.results.fileUri;\n  console.log('pictureUri :%s',pictureUri);\n  \n  var path = pictureUri.split('/');\n  filename = path.pop();\n  return client.getImage(pictureUri);\n})\n.then(function(res){\n  var imgData = res.body;\n  fs.writeFile(filename,imgData);\n  return client.closeSession(sessionId);\n});\n```\n\n`node theta.js`\u3067\u5b9f\u884c\u3059\u308b\u3068\u64ae\u5f71\u3057\u305f\u5f8c\u306bfileUri\u3092\u8868\u793a\u3057\u3066\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u308a\u8fbc\u3080\u3002\n\n```\nnode theta.js\npictureUri :100RICOH/R0010009.JPG\n```\n\u5b9f\u884c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\n![theta.png](https://qiita-image-store.s3.amazonaws.com/0/95484/d51f1507-584e-b9f4-5368-9bfa859f7ef1.png)\n\nIP\u30a2\u30c9\u30ec\u30b9\u3068\u30dd\u30fc\u30c8\u306f[API Reference](https://developers.theta360.com/ja/docs/v2/api_reference/)\u306b\u8a18\u8f09\u306e\u3082\u306e\u3092\u4f7f\u7528\u3059\u308b\u3002\nP2P\u63a5\u7d9a\u3001\u304b\u3064\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306f1\u53f0\u3057\u304b\u7e4b\u304c\u3089\u306a\u3044\u306e\u3067\u5225\u306b\u6652\u3057\u3066\u3082OK\u3002\n\n\u51e6\u7406\u306e\u6982\u8981\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3002\n1. startSession()\u3067sessionId\u3092\u53d6\u5f97\u3059\u308b\n2. \u53d6\u5f97\u3057\u305fsessionId\u3092\u6307\u5b9a\u3057\u3066takePicture()\u3067\u64ae\u5f71\u3002\n3. takePicture()\u306e\u30ec\u30b9\u30dd\u30f3\u30b9(fileUri)\u3092\u6307\u5b9a\u3057\u3066\u3001getImage()\u3067\u30d5\u30a1\u30a4\u30eb\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\u3002\n4. closeSession()\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u30af\u30ed\u30fc\u30ba\u3002\n\n#\u3055\u3044\u3054\u306b\n\u65b0\u3057\u3044theta s\u306fOpen Spherical Camera API\u306b\u6e96\u62e0\u3057\u305f\u305f\u3081\u3001\u3088\u308a\u7c21\u5358\u306b\u30a2\u30d7\u30ea\u306e\u69cb\u7bc9\u304c\u53ef\u80fd\u306b\u306a\u3063\u3066\u3044\u308b\u5370\u8c61\u3002\n\u7d50\u69cb\u58f2\u308c\u3066\u3044\u308b\u307f\u305f\u3044\u3060\u3057\u3001\u3053\u308c\u304b\u3089\u9762\u767d\u3044\u4f7f\u3044\u65b9\u304c\u5897\u3048\u3066\u304f\u308b\u306e\u3067\u306f\u306a\u3044\u304b\u306a\uff1f\n\n\u500b\u4eba\u7684\u306b\u306fwifi\u306e\u5207\u308a\u66ff\u3048\u3001theta\u30a2\u30d7\u30ea\u306e\u8d77\u52d5\u306a\u3069\u3001\u4e00\u9023\u306e\u4f5c\u696d\u304c\u9762\u5012\u306a\u306e\u3067NFC\u30bf\u30b0\u3092\u5229\u7528\u3057\u3066\u3001\u81ea\u52d5\u5316\u3057\u3088\u3046\u3068\u8003\u3048\u4e2d\u3002\n\u5b8c\u6210\u3057\u305f\u3089\u6295\u7a3f\u4e88\u5b9a\u3002\n", "tags": ["Node.js", "Theta", "Windows"]}