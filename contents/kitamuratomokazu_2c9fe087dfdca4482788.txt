{"context": "\nextract_image_zip.py\n\nimport boto3\nimport zipfile\nimport traceback\nimport os\n\nprint('Loading function')\n\ns3 = boto3.resource('s3')\ns3_client = boto3.client('s3')\n\ndef lambda_handler(event, context):\n\n    # Get the object from the event and show its content type\n    bucket = event['Records'][0]['s3']['bucket']['name']\n    key = event['Records'][0]['s3']['object']['key']\n\n    try: \n        s3_client.download_file(bucket, key, '/tmp/file.zip')\n        print('download')\n        zfile = zipfile.ZipFile('/tmp/file.zip')\n        namelist = zfile.namelist()\n        print(namelist)\n\n        for filename in namelist:\n            if not os.path.basename('/tmp/'+filename):\n                os.mkdir('/tmp/'+filename)\n            else:\n                f = open('/tmp/' + str(filename), 'wb')\n                data = zfile.read(filename)\n                f.write(data)\n                f.close()\n        for filename in namelist:\n            if '.jpg' in filename:\n                s3_client.upload_file('/tmp/'+filename, bucket, key + filename)\n\n\n    except Exception as e:\n        print(e)\n        print(traceback.format_exc())\n\n\n\n```python:extract_image_zip.py\n\nimport boto3\nimport zipfile\nimport traceback\nimport os\n\nprint('Loading function')\n\ns3 = boto3.resource('s3')\ns3_client = boto3.client('s3')\n\ndef lambda_handler(event, context):\n\n    # Get the object from the event and show its content type\n    bucket = event['Records'][0]['s3']['bucket']['name']\n    key = event['Records'][0]['s3']['object']['key']\n\n    try: \n        s3_client.download_file(bucket, key, '/tmp/file.zip')\n        print('download')\n        zfile = zipfile.ZipFile('/tmp/file.zip')\n        namelist = zfile.namelist()\n        print(namelist)\n\n        for filename in namelist:\n            if not os.path.basename('/tmp/'+filename):\n                os.mkdir('/tmp/'+filename)\n            else:\n                f = open('/tmp/' + str(filename), 'wb')\n                data = zfile.read(filename)\n                f.write(data)\n                f.close()\n        for filename in namelist:\n            if '.jpg' in filename:\n                s3_client.upload_file('/tmp/'+filename, bucket, key + filename)\n                \n\n    except Exception as e:\n        print(e)\n        print(traceback.format_exc())\n\n```\n", "tags": ["S3", "zip"]}