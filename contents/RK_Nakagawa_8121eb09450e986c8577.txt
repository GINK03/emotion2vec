{"tags": ["dovecot"], "context": "\n\n\u8d70\u308a\u66f8\u304d\u30e2\u30fc\u30c9 Postfix\u306b\u3064\u3044\u3066\u306f\u8ffd\u8a18\u3057\u307e\u3059\u3002 \u2193\u306econf\u3082\u5909\u66f4\u3055\u308c\u308b\u53ef\u80fd\u6027\u5927\u3067\u3059\uff08\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3068\u304b\uff09\n\u3068\u308a\u3042\u3048\u305aThunderbird\u3067\u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210\u304c\u3067\u304d\u306a\u3044\u3053\u3068\u306b\u5bfe\u5fdc\u3002\nssl_cipher_list\u306b\u3064\u3044\u3066\u306f https://mozilla.github.io/server-side-tls/ssl-config-generator/ \u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\ndovecot.conf\n# 2.2.10: /etc/dovecot/dovecot.conf\n# OS: Linux 4.4.5-15.26.amzn1.x86_64 x86_64  \nauth_mechanisms = plain login\npassdb {\n  driver = pam\n}\nservice auth {\n  unix_listener /var/spool/postfix/private/auth {\n    group = postfix\n    mode = 0666\n    user = postfix\n  }\n}\nssl = required\nssl_cert = </etc/pki/tls/certs/mail.pem\nssl_cipher_list = ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA:ECDHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA:ECDHE-ECDSA-DES-CBC3-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:DES-CBC3-SHA:!DSS\nssl_key = </etc/pki/tls/certs/mail.pem\nssl_protocols = !SSLv3\nuserdb {\n  driver = passwd\n}\n\n\n\nPostfix2.6 -\u8d70\u308a\u66f8\u304d-\n#postconf -n \u3067\u629c\u3044\u3066\u304d\u305f\u8a2d\u5b9a\u3002\n\u4f59\u8ac7\u3060\u304c\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u30fc\u306e\u30bd\u30d5\u30c8\uff08\u30c8\u30ec\u30f3\u30c9\u30de\u30a4\u30af\u30ed\u306e\u30bd\u30d5\u30c8\u306a\u3069\uff09\u304cPostfix\u3092\u62e1\u5f35\u3057\u305f\u5834\u5408\u306a\u3069\u306b\u305d\u306e\u8a2d\u5b9a\u304cpostconf -n\u3067\u8868\u793a\u3055\u308c\u306a\u3044\u5834\u5408\u304c\u3042\u308b\u306e\u3067\u300c\u540c\u3058\u8a2d\u5b9a\u306e\u30b5\u30fc\u30d0\u3092\u4f5c\u308a\u305f\u3044\u300d\u306a\u3069\u306e\u6642\u306b\u306f\u6ce8\u610f\u3059\u308b\u3002\n\nmain.cf\nalias_database = hash:/etc/aliases\nalias_maps = hash:/etc/aliases\ncommand_directory = /usr/sbin\nconfig_directory = /etc/postfix\ndaemon_directory = /usr/libexec/postfix\ndata_directory = /var/lib/postfix\ndebug_peer_level = 2\nhome_mailbox = Maildir/\nhtml_directory = no\ninet_interfaces = localhost\ninet_protocols = all\nmail_owner = postfix\nmailq_path = /usr/bin/mailq.postfix\nmanpage_directory = /usr/share/man\nmydestination = $myhostname, localhost.$mydomain, localhost\nmydomain = <\u30c9\u30e1\u30a4\u30f3\u540d>\nmyhostname = <\u30db\u30b9\u30c8\u540d>\nmyorigin = $myhostname\nnewaliases_path = /usr/bin/newaliases.postfix\nqueue_directory = /var/spool/postfix\nreadme_directory = /usr/share/doc/postfix-2.6.6/README_FILES\nrelayhost = [smtp.gmail.com]:submission\nsample_directory = /usr/share/doc/postfix-2.6.6/samples\nsendmail_path = /usr/sbin/sendmail.postfix\nsetgid_group = postdrop\nsmtp_sasl_auth_enable = yes\nsmtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd\nsmtp_sasl_security_options = noanonymous\nsmtp_tls_CAfile = /etc/ssl/certs/ca-bundle.crt\nsmtp_tls_note_starttls_offer = yes\nsmtp_tls_security_level = encrypt\nsmtp_use_tls = yes\nsoft_bounce = yes\nunknown_local_recipient_reject_code = 550\n\n\n\u3053\u306e\u8a2d\u5b9a\u3067\u306fOB25\u3092\u304f\u3050\u308a\u629c\u3051\u3066GMail\u306e\u30b5\u30fc\u30d0\u306b\u30e1\u30fc\u30eb\u3092\u56de\u9001\u3059\u308b\u3002\nGMail\u306fSMTP Auth\u3092\u5fc5\u9808\u306b\u3057\u3066\u3044\u308b\u306e\u3067smtp_sasl_password_maps\u3092\u4f7f\u7528\u3057\u8a8d\u8a3c\u60c5\u5831\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u3002\n\nsasl_passwd\n[smtp.gmail.com]:submission <gamil\u306e\u30a2\u30c9\u30ec\u30b9>@gmail.com:<\u30d1\u30b9\u30ef\u30fc\u30c9>\n\n\n##\u8d70\u308a\u66f8\u304d\u30e2\u30fc\u30c9 Postfix\u306b\u3064\u3044\u3066\u306f\u8ffd\u8a18\u3057\u307e\u3059\u3002 \u2193\u306econf\u3082\u5909\u66f4\u3055\u308c\u308b\u53ef\u80fd\u6027\u5927\u3067\u3059\uff08\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3068\u304b\uff09\n\u3068\u308a\u3042\u3048\u305aThunderbird\u3067\u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210\u304c\u3067\u304d\u306a\u3044\u3053\u3068\u306b\u5bfe\u5fdc\u3002\nssl_cipher_list\u306b\u3064\u3044\u3066\u306f https://mozilla.github.io/server-side-tls/ssl-config-generator/ \u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\n```conf:dovecot.conf\n# 2.2.10: /etc/dovecot/dovecot.conf\n# OS: Linux 4.4.5-15.26.amzn1.x86_64 x86_64  \nauth_mechanisms = plain login\npassdb {\n  driver = pam\n}\nservice auth {\n  unix_listener /var/spool/postfix/private/auth {\n    group = postfix\n    mode = 0666\n    user = postfix\n  }\n}\nssl = required\nssl_cert = </etc/pki/tls/certs/mail.pem\nssl_cipher_list = ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA:ECDHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA:ECDHE-ECDSA-DES-CBC3-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:DES-CBC3-SHA:!DSS\nssl_key = </etc/pki/tls/certs/mail.pem\nssl_protocols = !SSLv3\nuserdb {\n  driver = passwd\n}\n```\n###Postfix2.6 -\u8d70\u308a\u66f8\u304d-\n\\#postconf -n \u3067\u629c\u3044\u3066\u304d\u305f\u8a2d\u5b9a\u3002\n\u4f59\u8ac7\u3060\u304c\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u30fc\u306e\u30bd\u30d5\u30c8\uff08\u30c8\u30ec\u30f3\u30c9\u30de\u30a4\u30af\u30ed\u306e\u30bd\u30d5\u30c8\u306a\u3069\uff09\u304cPostfix\u3092\u62e1\u5f35\u3057\u305f\u5834\u5408\u306a\u3069\u306b\u305d\u306e\u8a2d\u5b9a\u304cpostconf -n\u3067\u8868\u793a\u3055\u308c\u306a\u3044\u5834\u5408\u304c\u3042\u308b\u306e\u3067\u300c\u540c\u3058\u8a2d\u5b9a\u306e\u30b5\u30fc\u30d0\u3092\u4f5c\u308a\u305f\u3044\u300d\u306a\u3069\u306e\u6642\u306b\u306f\u6ce8\u610f\u3059\u308b\u3002\n\n```conf:main.cf\nalias_database = hash:/etc/aliases\nalias_maps = hash:/etc/aliases\ncommand_directory = /usr/sbin\nconfig_directory = /etc/postfix\ndaemon_directory = /usr/libexec/postfix\ndata_directory = /var/lib/postfix\ndebug_peer_level = 2\nhome_mailbox = Maildir/\nhtml_directory = no\ninet_interfaces = localhost\ninet_protocols = all\nmail_owner = postfix\nmailq_path = /usr/bin/mailq.postfix\nmanpage_directory = /usr/share/man\nmydestination = $myhostname, localhost.$mydomain, localhost\nmydomain = <\u30c9\u30e1\u30a4\u30f3\u540d>\nmyhostname = <\u30db\u30b9\u30c8\u540d>\nmyorigin = $myhostname\nnewaliases_path = /usr/bin/newaliases.postfix\nqueue_directory = /var/spool/postfix\nreadme_directory = /usr/share/doc/postfix-2.6.6/README_FILES\nrelayhost = [smtp.gmail.com]:submission\nsample_directory = /usr/share/doc/postfix-2.6.6/samples\nsendmail_path = /usr/sbin/sendmail.postfix\nsetgid_group = postdrop\nsmtp_sasl_auth_enable = yes\nsmtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd\nsmtp_sasl_security_options = noanonymous\nsmtp_tls_CAfile = /etc/ssl/certs/ca-bundle.crt\nsmtp_tls_note_starttls_offer = yes\nsmtp_tls_security_level = encrypt\nsmtp_use_tls = yes\nsoft_bounce = yes\nunknown_local_recipient_reject_code = 550\n```\n\n\u3053\u306e\u8a2d\u5b9a\u3067\u306fOB25\u3092\u304f\u3050\u308a\u629c\u3051\u3066GMail\u306e\u30b5\u30fc\u30d0\u306b\u30e1\u30fc\u30eb\u3092\u56de\u9001\u3059\u308b\u3002\nGMail\u306fSMTP Auth\u3092\u5fc5\u9808\u306b\u3057\u3066\u3044\u308b\u306e\u3067smtp_sasl_password_maps\u3092\u4f7f\u7528\u3057\u8a8d\u8a3c\u60c5\u5831\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u3002\n\n```conf:sasl_passwd\n[smtp.gmail.com]:submission <gamil\u306e\u30a2\u30c9\u30ec\u30b9>@gmail.com:<\u30d1\u30b9\u30ef\u30fc\u30c9>\n```\n"}