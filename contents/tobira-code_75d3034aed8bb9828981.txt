{"context": "\n\n\u306f\u3058\u3081\u306b\nx86-64\u30d7\u30ed\u30bb\u30c3\u30b5\u306b\u304a\u3051\u308b\u30b9\u30bf\u30c3\u30af\u306b\u3064\u3044\u3066\u8a18\u8f09\u3057\u307e\u3059\u3002\n\u4f7f\u7528\u3057\u305f\u30d7\u30ed\u30bb\u30c3\u30b5 / OS / gcc / gdb\u306f\u4ee5\u4e0b\u3067\u3059\u3002\nIntel(R) Core(TM) i7-2600 CPU @ 3.40GHz 64bit\nUbuntu14.04 64bit\ngcc (Ubuntu 4.8.2-19ubuntu1) 4.8.2\nGNU gdb (Ubuntu 7.7-0ubuntu3) 7.7\n\n\u30d7\u30ed\u30bb\u30c3\u30b5\u306b\u306f\u30b9\u30bf\u30c3\u30af\u3092\u64cd\u4f5c\u3059\u308b\u305f\u3081\u306e\u30ec\u30b8\u30b9\u30bf\u3084\u547d\u4ee4\u304c\u3042\u308a\u307e\u3059\u3002\n\u30b9\u30bf\u30c3\u30af\u306f\u4e3b\u306b\u6b21\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\u30ea\u30bf\u30fc\u30f3\u30a2\u30c9\u30ec\u30b9\n\u30d9\u30fc\u30b9\u30dd\u30a4\u30f3\u30bf\n\u5f15\u6570\n\u30ed\u30fc\u30ab\u30eb\u5909\u6570\n\n\n\u30b9\u30bf\u30c3\u30af\n\u30b9\u30bf\u30c3\u30af\u3068\u306f\u5f8c\u5165\u308c\u5148\u51fa\u3057(LIFO;Last In First Out)\u65b9\u5f0f\u306e\u30c7\u30fc\u30bf\u4fdd\u5b58\u9818\u57df\u3067\u3059\u3002\n\u30c7\u30fc\u30bf\u3092\u30b9\u30bf\u30c3\u30af\u306b\u5165\u308c\u308b\u64cd\u4f5c\u3092push\u3068\u3044\u3044\u307e\u3059\u3002\n\u30c7\u30fc\u30bf\u3092\u30b9\u30bf\u30c3\u30af\u304b\u3089\u53d6\u308a\u51fa\u3059\u64cd\u4f5c\u3092pop\u3068\u3044\u3044\u307e\u3059\u3002\npop\u3067\u53d6\u308a\u51fa\u3059\u30c7\u30fc\u30bf\u306f\u6700\u8fd1push\u3057\u305f\u30c7\u30fc\u30bf\u3067\u3059\u3002\u3053\u308c\u304cLIFO\u3068\u3044\u308f\u308c\u308b\u7406\u7531\u3067\u3059\u3002\n\u5177\u4f53\u4f8b\u3092\u793a\u3057\u307e\u3059\u3002\u6700\u521d\u30b9\u30bf\u30c3\u30af\u306b61,27,67\u306e\u30c7\u30fc\u30bf\u304c\u3042\u308b\u3068\u3057\u307e\u3059\u3002\npush 20\u3059\u308b\u3068\u30b9\u30bf\u30c3\u30af\u306e\u30c8\u30c3\u30d7\u306b\u30c7\u30fc\u30bf\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\npop\u3059\u308b\u3068\u30b9\u30bf\u30c3\u30af\u306e\u30c8\u30c3\u30d7\u306e\u30c7\u30fc\u30bf\u304c\u524a\u9664\u3055\u308c\u3066\u53d6\u308a\u51fa\u3055\u308c\u307e\u3059\u3002\n\n\u30b9\u30bf\u30c3\u30af\u3068\u3044\u3046\u8a00\u8449\u306b\u306f\u5e72\u3057\u8349\u306e\u5c71\u3068\u3044\u3046\u610f\u5473\u304c\u3042\u308a\u307e\u3059\u3002\n\u5e72\u3057\u8349\u306e\u5c71(\u30b9\u30bf\u30c3\u30af)\u306b\u5e72\u3057\u8349(\u30c7\u30fc\u30bf)\u3092\u7a4d\u307f\u4e0a\u3052\u305f\u308a(push)\n\u5e72\u3057\u8349\u3092\u53d6\u308a\u51fa\u3057\u305f\u308a(pop)\u3059\u308b\u5149\u666f\u3092\u30a4\u30e1\u30fc\u30b8\u3059\u308b\u3068\u899a\u3048\u3084\u3059\u3044\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\n\u30ec\u30b8\u30b9\u30bf\n\u30b9\u30bf\u30c3\u30af\u306b\u5f71\u97ff\u3059\u308b\u30ec\u30b8\u30b9\u30bf\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\nss  : \u30b9\u30bf\u30c3\u30af\u30bb\u30b0\u30e1\u30f3\u30c8\nrsp : \u30b9\u30bf\u30c3\u30af\u30dd\u30a4\u30f3\u30bf\nrbp : \u30d9\u30fc\u30b9\u30dd\u30a4\u30f3\u30bf\n\nss\u306f\u30b9\u30bf\u30c3\u30af\u304c\u914d\u7f6e\u3055\u308c\u308b\u30e1\u30e2\u30ea\u9818\u57df\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002OS\u304c\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nrsp\u306f\u30b9\u30bf\u30c3\u30af\u306e\u30c8\u30c3\u30d7\u306e\u30e1\u30e2\u30ea\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002\npush\u547d\u4ee4\u3067\u30c7\u30af\u30ea\u30e1\u30f3\u30c8\u3055\u308c\u3001pop\u547d\u4ee4\u3067\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3055\u308c\u307e\u3059\u3002\nrbp\u306f\u95a2\u6570\u5185\u306b\u304a\u3044\u3066\u30b9\u30bf\u30c3\u30af\u9818\u57df\u3092\u6271\u3046\u51e6\u7406\u306e\u57fa\u6e96\u3068\u306a\u308b\u30e1\u30e2\u30ea\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002\n\u95a2\u6570\u306e\u5148\u982d\u3067\u6b21\u306e\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u547c\u3073\u51fa\u3057\u5143\u306erbp\u3092\u30b9\u30bf\u30c3\u30af\u306bpush\u3059\u308b\nrsp\u3092rbp\u306b\u4ee3\u5165\u3059\u308b\n\n\u95a2\u6570\u5185\u90e8\u3067\u306frbp\u3092\u57fa\u6e96\u306b\u3057\u3066\u30b9\u30bf\u30c3\u30af\u9818\u57df\u3092\u6271\u3044\u307e\u3059\u3002\n\u95a2\u6570\u306e\u6700\u5f8c\u3067\u6b21\u306e\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\nrbp\u3092rsp\u306b\u4ee3\u5165\u3059\u308b(*)\npop\u3057\u3066rbp\u3092\u547c\u3073\u51fa\u3057\u5143\u306e\u5024\u306b\u623b\u3059\nretq\u547d\u4ee4\u3067\u547c\u3073\u51fa\u3057\u5143\u306b\u623b\u308b\n\n\u4e0a\u8a18\u51e6\u7406\u3092\u884c\u3046\u3053\u3068\u3067\u547c\u3073\u51fa\u3057\u5143\u3067\u306f\u95a2\u6570\u547c\u3073\u51fa\u3057\u524d\u5f8c\u3067rsp/rbp\u306f\u5909\u5316\u3057\u307e\u305b\u3093\u3002\n1./2.\u306fleaveq\u547d\u4ee4\u3067\u4e00\u5ea6\u306b\u884c\u3048\u307e\u3059\u3002\n(*)\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u78ba\u4fdd\u306a\u3069\u3067rsp\u3092\u66f4\u65b0\u3057\u305f\u5834\u5408\u306brbp\u306b\u623b\u3059\u305f\u3081\u306b\u884c\u3044\u307e\u3059\u3002\n\n\u547d\u4ee4\n\u30b9\u30bf\u30c3\u30af\u306b\u5f71\u97ff\u3059\u308b\u547d\u4ee4\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\npush\n\u6b21\u306e\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\nrsp\u3092\u30c7\u30af\u30ea\u30e1\u30f3\u30c8\u3057\u307e\u3059\u3002\nrsp\u306e\u30e1\u30e2\u30ea\u30a2\u30c9\u30ec\u30b9\u306b\u5024\u3092\u66f8\u304d\u8fbc\u307f\u307e\u3059\u3002\n\n\u51e6\u7406\u9806\u756a\u306f1.\u21922.\u3067\u3042\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u30b9\u30bf\u30c3\u30af\u306f\u30e1\u30e2\u30ea\u30a2\u30c9\u30ec\u30b9\u306e\u5024\u306e\u5c0f\u3055\u3044\u65b9\u5411\u306b\u5ef6\u3073\u3066\u3044\u304d\u307e\u3059\u3002\n\npop\n\u6b21\u306e\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\nrsp\u306e\u30e1\u30e2\u30ea\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u5024\u3092\u8aad\u307f\u51fa\u3057\u307e\u3059\u3002\nrsp\u3092\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3057\u307e\u3059\u3002\n\n\u51e6\u7406\u9806\u756a\u306f1.\u21922.\u3067\u3042\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\ncallq\n\u6b21\u306e\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\nrsp\u3092\u30c7\u30af\u30ea\u30e1\u30f3\u30c8\u3057\u307e\u3059\u3002\nrsp\u306e\u30e1\u30e2\u30ea\u30a2\u30c9\u30ec\u30b9\u306brip\u306e\u6b21\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u66f8\u304d\u8fbc\u307f\u307e\u3059\u3002\nrip\u306b\u547c\u3073\u51fa\u3057\u5148\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n\nretq\n\u6b21\u306e\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\nrsp\u306e\u30e1\u30e2\u30ea\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u5024\u3092\u8aad\u307f\u51fa\u3057\u3066rip\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nrsp\u3092\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3057\u307e\u3059\u3002\n\n\n\u5177\u4f53\u4f8b\n\u7c21\u5358\u306a\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092gdb\u3067disassemble\u3057\u3066\n\u30b9\u30bf\u30c3\u30af\u306e\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\nmain\u95a2\u6570\u304b\u3089\u8db3\u3057\u7b97\u3092\u3059\u308badd\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\n\ntest.c\nint add(int a1, int a2, int a3, int a4, int a5, int a6,\n    int a7, int a8, int a9, int a10)\n{\n    int c;\n    c = a1+a2+a3+a4+a5+a6+a7+a8+a9+a10;\n    return c;\n}\n\nint main(int argc, char *argv[])\n{\n    int ret = add(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);\n    return ret;\n}\n\n\n\nmakefile\n\u30c7\u30d0\u30c3\u30b0\u60c5\u5831\u3042\u308a(g\u30aa\u30d7\u30b7\u30e7\u30f3)\u3001\u6700\u9069\u5316\u306a\u3057(O0)\u3067make\u3057\u307e\u3059\u3002\n(*)\u534a\u89d2space 4\u500b\u3092\u30bf\u30d6\u6587\u5b57\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\nmakefile\nCFLAGS=-I. -g -O0 -Wall -Werror\nINCS=#test.h\nOBJS=test.o\nLIBS=#-lpthread -lm\nTARGET=test\n\n%.o: %.c $(INCS)\n    $(CC) $(CFLAGS) -c -o $@ $<\n\n$(TARGET): $(OBJS)\n    $(CC) $(CFLAGS) -o $@ $^ $(LIBS)\n\nclean:\n    rm -rf $(TARGET) *.o\n\n\n\ngdb\nmain\u95a2\u6570\u306e\u5148\u982d\u306e\u547d\u4ee4\u3067\u51e6\u7406\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\n\u547d\u4ee4\u306e\u30a2\u30c9\u30ec\u30b9\u306f\u76f4\u5024\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u9069\u5b9c\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\ndisassemble\u30b3\u30de\u30f3\u30c9\u3067main\u95a2\u6570\u3001add\u95a2\u6570\u306e\u30a2\u30bb\u30f3\u30d6\u30ea\u30b3\u30fc\u30c9\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\ngdb ./test\nb *0x40053d\nr\ndisassemble\ndisassemble add\n\n\n\u30a2\u30bb\u30f3\u30d6\u30ea\u30b3\u30fc\u30c9\nmain\u95a2\u6570\u3001add\u95a2\u6570\u306e\u30a2\u30bb\u30f3\u30d6\u30ea\u30b3\u30fc\u30c9\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\n\u305d\u308c\u305e\u308c\u306e\u8aac\u660e\u3092\u884c\u3046\u524d\u306b\u95a2\u6570\u547c\u3073\u51fa\u3057\u306b\u304a\u6c7a\u307e\u308a\u306e\u51e6\u7406\u3067\u3042\u308b\nFunction prologue / epilogue\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\u547c\u3073\u51fa\u3057\u5143\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u306a\u3044\u3067\u547c\u3073\u51fa\u3057\u5148\u306e\u51e6\u7406\u3092\u884c\u3046\u3053\u3068\u3092\u76ee\u7684\u3068\u3057\u305f\u3082\u306e\u3067\u3059\u3002\n\nFunction prologue\n\u95a2\u6570\u306e\u5148\u982d\u306b\u3042\u308b\u6b21\u306e2\u547d\u4ee4\u306fFunction prologue\u3068\u547c\u3070\u308c\u308b\u304a\u6c7a\u307e\u308a\u306e\u51e6\u7406\u3067\u3059\u3002\npush   %rbp\n\u547c\u3073\u51fa\u3057\u5143\u306erbp\u3092\u30b9\u30bf\u30c3\u30af\u306bpush\u3057\u307e\u3059\u3002\nmov    %rsp,%rbp\nrbp\u306brsp\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\u95a2\u6570\u5185\u3067\u306frbp\u3092\u57fa\u6e96\u30e1\u30e2\u30ea\u30a2\u30c9\u30ec\u30b9\u3068\u3057\u307e\u3059\u3002\n2\u547d\u4ee4\u5f8c\u306e\u30b9\u30bf\u30c3\u30af\u72b6\u614b\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\ncaller addr\u306f\u547c\u3073\u51fa\u3057\u5143\u306e\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002\n\u547c\u3073\u51fa\u3057\u5143\u306ecallq\u547d\u4ee4\u306e\u6b21\u306e\u547d\u4ee4\u306e\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002\ncaller addr\u306f\u547c\u3073\u51fa\u3057\u5143\u306ecallq\u547d\u4ee4\u3067\u30b9\u30bf\u30c3\u30af\u306bpush\u3055\u308c\u307e\u3059\u3002\n\nFunction epilogue\n\u95a2\u6570\u306e\u6700\u5f8c\u306e2\u547d\u4ee4\u306fFunction epilogue\u3068\u547c\u3070\u308c\u308b\u304a\u6c7a\u307e\u308a\u306e\u51e6\u7406\u3067\u3059\u3002\nleaveq\nleaveq\u547d\u4ee4\u306f\u6b21\u306e\u547d\u4ee4\u3068\u540c\u3058\u3067\u3059\u3002\nmov    %rbp,%rsp\npop    %rbp\n\nrsp\u306brbp\u3092\u30b3\u30d4\u30fc\u3057\u3066\u547c\u3073\u51fa\u3057\u5143\u306erbp\u3092\u30b9\u30bf\u30c3\u30af\u304b\u3089pop\u3057\u307e\u3059\u3002\n\u3064\u307e\u308aFunction prologue\u306e\u9006\u51e6\u7406\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\nleaveq\u547d\u4ee4\u5f8c\u306e\u30b9\u30bf\u30c3\u30af\u72b6\u614b\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\nretq\n\u30b9\u30bf\u30c3\u30af\u304b\u3089caller addr\u3092pop\u3057\u3066rip\u306b\u4ee3\u5165\u3057\u307e\u3059\u3002\n\u3053\u308c\u306b\u3088\u308a\u547c\u3073\u51fa\u3057\u5143\u306b\u623b\u308a\u307e\u3059\u3002\n\nmain\nmain\u95a2\u6570\u306e\u51e6\u7406\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\nadd\u95a2\u6570\u306b\u3082\u8a00\u3048\u308b\u3053\u3068\u3067\u3059\u304c\u6700\u9069\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u305f\u3081\u4e0d\u8981\u306a\u51e6\u7406\u304c\u591a\u3044\u3067\u3059\u3002\n=> 0x000000000040053d <+0>: push   %rbp\n   0x000000000040053e <+1>: mov    %rsp,%rbp\n   0x0000000000400541 <+4>: sub    $0x40,%rsp\n   0x0000000000400545 <+8>: mov    %edi,-0x14(%rbp)\n   0x0000000000400548 <+11>:    mov    %rsi,-0x20(%rbp)\n   0x000000000040054c <+15>:    movl   $0xa,0x18(%rsp)\n   0x0000000000400554 <+23>:    movl   $0x9,0x10(%rsp)\n   0x000000000040055c <+31>:    movl   $0x8,0x8(%rsp)\n   0x0000000000400564 <+39>:    movl   $0x7,(%rsp)\n   0x000000000040056b <+46>:    mov    $0x6,%r9d\n   0x0000000000400571 <+52>:    mov    $0x5,%r8d\n   0x0000000000400577 <+58>:    mov    $0x4,%ecx\n   0x000000000040057c <+63>:    mov    $0x3,%edx\n   0x0000000000400581 <+68>:    mov    $0x2,%esi\n   0x0000000000400586 <+73>:    mov    $0x1,%edi\n   0x000000000040058b <+78>:    callq  0x4004ed <add>\n   0x0000000000400590 <+83>:    mov    %eax,-0x4(%rbp)\n   0x0000000000400593 <+86>:    mov    -0x4(%rbp),%eax\n   0x0000000000400596 <+89>:    leaveq \n   0x0000000000400597 <+90>:    retq   \n\n\u6b21\u306e\u547d\u4ee4\u3067\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306e\u9818\u57df\u3092\u78ba\u4fdd\u3057\u3066\u3044\u307e\u3059\u30020x40\u30d0\u30a4\u30c8\u78ba\u4fdd\u3057\u3066\u3044\u307e\u3059\u3002\nrsp\u3092\u6e1b\u3089\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002main\u95a2\u6570\u5185\u3067\u306frbp\u304b\u3089rsp\u306e\u9593\u306e\u30e1\u30e2\u30ea\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\nsub    $0x40,%rsp\n\nmain\u95a2\u6570\u306e\u5f15\u6570\u306f\u547c\u3073\u51fa\u3057\u5143\u3067\u6b21\u306e\u3088\u3046\u306b\u30ec\u30b8\u30b9\u30bf\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\nargc -> edi\nargv -> rsi\nedi,rsi\u306e\u5024\u3092\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306e\u9818\u57df\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\nmov    %edi,-0x14(%rbp)\nmov    %rsi,-0x20(%rbp)\n\n\u7b2c1\u304b\u3089\u7b2c6\u307e\u3067\u306e\u5f15\u6570\u306fedi,esi,edx,ecx,r8d,r9d\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\u7b2c7\u5f15\u6570\u4ee5\u964d\u306f\u30b9\u30bf\u30c3\u30af\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\nmovl   $0xa,0x18(%rsp)\nmovl   $0x9,0x10(%rsp)\nmovl   $0x8,0x8(%rsp)\nmovl   $0x7,(%rsp)\nmov    $0x6,%r9d\nmov    $0x5,%r8d\nmov    $0x4,%ecx\nmov    $0x3,%edx\nmov    $0x2,%esi\nmov    $0x1,%edi\n\n\u3053\u306e\u6642\u70b9\u3067\u306e\u30b9\u30bf\u30c3\u30af\u306e\u72b6\u614b\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\nadd\u95a2\u6570\u3092\u30b3\u30fc\u30eb\u3057\u307e\u3059\ncallq  0x4004ed <add>\n\neax\u306b\u623b\u308a\u5024\u304c\u8fd4\u308a\u307e\u3059\u3002\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306e\u9818\u57df\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\nmov    %eax,-0x4(%rbp)\n\neax\u306bmain\u95a2\u6570\u306e\u623b\u308a\u5024\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nmov    -0x4(%rbp),%eax\n\n\nadd\n   0x00000000004004ed <+0>: push   %rbp\n   0x00000000004004ee <+1>: mov    %rsp,%rbp\n   0x00000000004004f1 <+4>: mov    %edi,-0x14(%rbp)\n   0x00000000004004f4 <+7>: mov    %esi,-0x18(%rbp)\n   0x00000000004004f7 <+10>:    mov    %edx,-0x1c(%rbp)\n   0x00000000004004fa <+13>:    mov    %ecx,-0x20(%rbp)\n   0x00000000004004fd <+16>:    mov    %r8d,-0x24(%rbp)\n   0x0000000000400501 <+20>:    mov    %r9d,-0x28(%rbp)\n   0x0000000000400505 <+24>:    mov    -0x18(%rbp),%eax\n   0x0000000000400508 <+27>:    mov    -0x14(%rbp),%edx\n   0x000000000040050b <+30>:    add    %eax,%edx\n   0x000000000040050d <+32>:    mov    -0x1c(%rbp),%eax\n   0x0000000000400510 <+35>:    add    %eax,%edx\n   0x0000000000400512 <+37>:    mov    -0x20(%rbp),%eax\n   0x0000000000400515 <+40>:    add    %eax,%edx\n   0x0000000000400517 <+42>:    mov    -0x24(%rbp),%eax\n   0x000000000040051a <+45>:    add    %eax,%edx\n   0x000000000040051c <+47>:    mov    -0x28(%rbp),%eax\n   0x000000000040051f <+50>:    add    %eax,%edx\n   0x0000000000400521 <+52>:    mov    0x10(%rbp),%eax\n   0x0000000000400524 <+55>:    add    %eax,%edx\n   0x0000000000400526 <+57>:    mov    0x18(%rbp),%eax\n   0x0000000000400529 <+60>:    add    %eax,%edx\n   0x000000000040052b <+62>:    mov    0x20(%rbp),%eax\n   0x000000000040052e <+65>:    add    %eax,%edx\n   0x0000000000400530 <+67>:    mov    0x28(%rbp),%eax\n   0x0000000000400533 <+70>:    add    %edx,%eax\n   0x0000000000400535 <+72>:    mov    %eax,-0x4(%rbp)\n   0x0000000000400538 <+75>:    mov    -0x4(%rbp),%eax\n   0x000000000040053b <+78>:    pop    %rbp\n   0x000000000040053c <+79>:    retq   \n\nFunction prologue\u5f8c\u306e\u30b9\u30bf\u30c3\u30af\u306e\u72b6\u614b\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\n\u7b2c1\u304b\u3089\u7b2c6\u307e\u3067\u306e\u5f15\u6570\u3092\u30b9\u30bf\u30c3\u30af\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\nmov    %edi,-0x14(%rbp)\nmov    %esi,-0x18(%rbp)\nmov    %edx,-0x1c(%rbp)\nmov    %ecx,-0x20(%rbp)\nmov    %r8d,-0x24(%rbp)\nmov    %r9d,-0x28(%rbp)\n\n\u5f15\u6570\u3092\u30ec\u30b8\u30b9\u30bfeax\u306b\u8aad\u8fbc\u3093\u3067edx\u306b\u5bfe\u3057\u3066\u8db3\u3057\u8fbc\u3093\u3067\u3044\u304d\u307e\u3059\u3002\n\u6700\u5f8c\u306feax\u306b\u5408\u8a08\u5024\u3092\u5165\u308c\u307e\u3059\u3002\nmov    -0x18(%rbp),%eax\nmov    -0x14(%rbp),%edx\nadd    %eax,%edx\nmov    -0x1c(%rbp),%eax\nadd    %eax,%edx\nmov    -0x20(%rbp),%eax\nadd    %eax,%edx\nmov    -0x24(%rbp),%eax\nadd    %eax,%edx\nmov    -0x28(%rbp),%eax\nadd    %eax,%edx\nmov    0x10(%rbp),%eax\nadd    %eax,%edx\nmov    0x18(%rbp),%eax\nadd    %eax,%edx\nmov    0x20(%rbp),%eax\nadd    %eax,%edx\nmov    0x28(%rbp),%eax\nadd    %edx,%eax\n\n\u7b2c7\u4ee5\u964d\u306e\u5f15\u6570\u306f\u30b9\u30bf\u30c3\u30af\u4e0a\u306b\u7f6e\u304b\u308c\u3066\u3044\u308b\u305f\u3081\u3001\nrbp\u306b\u5bfe\u3057\u3066\u30d7\u30e9\u30b9\u306eoffset\u3067\u53c2\u7167\u3057\u3066\u3044\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nmov    0x10(%rbp),%eax\nadd    %eax,%edx\nmov    0x18(%rbp),%eax\nadd    %eax,%edx\nmov    0x20(%rbp),%eax\nadd    %eax,%edx\nmov    0x28(%rbp),%eax\n\n\u7d50\u679c\u3092\u30b9\u30bf\u30c3\u30af\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\nmov    %eax,-0x4(%rbp)\n\n\u7d50\u679c\u3092eax\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002eax\u306f\u623b\u308a\u5024\u3067\u3059\u3002\nmov    -0x4(%rbp),%eax\n\n\u3053\u306e\u6642\u70b9\u306e\u30b9\u30bf\u30c3\u30af\u306e\u72b6\u614b\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\n\u547c\u3073\u51fa\u3057\u5143\u306erbp\u3092\u30b9\u30bf\u30c3\u30af\u304b\u3089pop\u3057\u307e\u3059\u3002\nleaveq\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304crsp\u304c\u5909\u5316\u3057\u3066\u3044\u306a\u3044\u305f\u3081pop\u3060\u3051\u3067OK\u3067\u3059\u3002\npop    %rbp\n\n\n\u53c2\u7167\nx86 calling conventions\nFunction_prologue\n# \u306f\u3058\u3081\u306b\nx86-64\u30d7\u30ed\u30bb\u30c3\u30b5\u306b\u304a\u3051\u308b\u30b9\u30bf\u30c3\u30af\u306b\u3064\u3044\u3066\u8a18\u8f09\u3057\u307e\u3059\u3002\n\u4f7f\u7528\u3057\u305f\u30d7\u30ed\u30bb\u30c3\u30b5 / OS / gcc / gdb\u306f\u4ee5\u4e0b\u3067\u3059\u3002\n\n```\nIntel(R) Core(TM) i7-2600 CPU @ 3.40GHz 64bit\nUbuntu14.04 64bit\ngcc (Ubuntu 4.8.2-19ubuntu1) 4.8.2\nGNU gdb (Ubuntu 7.7-0ubuntu3) 7.7\n```\n\n\u30d7\u30ed\u30bb\u30c3\u30b5\u306b\u306f\u30b9\u30bf\u30c3\u30af\u3092\u64cd\u4f5c\u3059\u308b\u305f\u3081\u306e\u30ec\u30b8\u30b9\u30bf\u3084\u547d\u4ee4\u304c\u3042\u308a\u307e\u3059\u3002\n\u30b9\u30bf\u30c3\u30af\u306f\u4e3b\u306b\u6b21\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n- \u30ea\u30bf\u30fc\u30f3\u30a2\u30c9\u30ec\u30b9\n- \u30d9\u30fc\u30b9\u30dd\u30a4\u30f3\u30bf\n- \u5f15\u6570\n- \u30ed\u30fc\u30ab\u30eb\u5909\u6570\n\n# \u30b9\u30bf\u30c3\u30af\n\u30b9\u30bf\u30c3\u30af\u3068\u306f\u5f8c\u5165\u308c\u5148\u51fa\u3057(LIFO;Last In First Out)\u65b9\u5f0f\u306e\u30c7\u30fc\u30bf\u4fdd\u5b58\u9818\u57df\u3067\u3059\u3002\n\u30c7\u30fc\u30bf\u3092\u30b9\u30bf\u30c3\u30af\u306b\u5165\u308c\u308b\u64cd\u4f5c\u3092**push**\u3068\u3044\u3044\u307e\u3059\u3002\n\u30c7\u30fc\u30bf\u3092\u30b9\u30bf\u30c3\u30af\u304b\u3089\u53d6\u308a\u51fa\u3059\u64cd\u4f5c\u3092**pop**\u3068\u3044\u3044\u307e\u3059\u3002\npop\u3067\u53d6\u308a\u51fa\u3059\u30c7\u30fc\u30bf\u306f\u6700\u8fd1push\u3057\u305f\u30c7\u30fc\u30bf\u3067\u3059\u3002\u3053\u308c\u304cLIFO\u3068\u3044\u308f\u308c\u308b\u7406\u7531\u3067\u3059\u3002\n\n\u5177\u4f53\u4f8b\u3092\u793a\u3057\u307e\u3059\u3002\u6700\u521d\u30b9\u30bf\u30c3\u30af\u306b61,27,67\u306e\u30c7\u30fc\u30bf\u304c\u3042\u308b\u3068\u3057\u307e\u3059\u3002\npush 20\u3059\u308b\u3068\u30b9\u30bf\u30c3\u30af\u306e\u30c8\u30c3\u30d7\u306b\u30c7\u30fc\u30bf\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\npop\u3059\u308b\u3068\u30b9\u30bf\u30c3\u30af\u306e\u30c8\u30c3\u30d7\u306e\u30c7\u30fc\u30bf\u304c\u524a\u9664\u3055\u308c\u3066\u53d6\u308a\u51fa\u3055\u308c\u307e\u3059\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/84205/8ad4e8e0-e4df-b260-2bda-b633b4b86db2.png)\n\n\u30b9\u30bf\u30c3\u30af\u3068\u3044\u3046\u8a00\u8449\u306b\u306f**\u5e72\u3057\u8349\u306e\u5c71**\u3068\u3044\u3046\u610f\u5473\u304c\u3042\u308a\u307e\u3059\u3002\n\u5e72\u3057\u8349\u306e\u5c71(\u30b9\u30bf\u30c3\u30af)\u306b\u5e72\u3057\u8349(\u30c7\u30fc\u30bf)\u3092\u7a4d\u307f\u4e0a\u3052\u305f\u308a(push)\n\u5e72\u3057\u8349\u3092\u53d6\u308a\u51fa\u3057\u305f\u308a(pop)\u3059\u308b\u5149\u666f\u3092\u30a4\u30e1\u30fc\u30b8\u3059\u308b\u3068\u899a\u3048\u3084\u3059\u3044\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\n# \u30ec\u30b8\u30b9\u30bf\n\u30b9\u30bf\u30c3\u30af\u306b\u5f71\u97ff\u3059\u308b\u30ec\u30b8\u30b9\u30bf\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n- ss  : \u30b9\u30bf\u30c3\u30af\u30bb\u30b0\u30e1\u30f3\u30c8\n- rsp : \u30b9\u30bf\u30c3\u30af\u30dd\u30a4\u30f3\u30bf\n- rbp : \u30d9\u30fc\u30b9\u30dd\u30a4\u30f3\u30bf\n\nss\u306f\u30b9\u30bf\u30c3\u30af\u304c\u914d\u7f6e\u3055\u308c\u308b\u30e1\u30e2\u30ea\u9818\u57df\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002OS\u304c\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\nrsp\u306f\u30b9\u30bf\u30c3\u30af\u306e\u30c8\u30c3\u30d7\u306e\u30e1\u30e2\u30ea\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002\npush\u547d\u4ee4\u3067\u30c7\u30af\u30ea\u30e1\u30f3\u30c8\u3055\u308c\u3001pop\u547d\u4ee4\u3067\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3055\u308c\u307e\u3059\u3002\n\nrbp\u306f\u95a2\u6570\u5185\u306b\u304a\u3044\u3066\u30b9\u30bf\u30c3\u30af\u9818\u57df\u3092\u6271\u3046\u51e6\u7406\u306e\u57fa\u6e96\u3068\u306a\u308b\u30e1\u30e2\u30ea\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002\n\u95a2\u6570\u306e\u5148\u982d\u3067\u6b21\u306e\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\n1. \u547c\u3073\u51fa\u3057\u5143\u306erbp\u3092\u30b9\u30bf\u30c3\u30af\u306bpush\u3059\u308b\n2. rsp\u3092rbp\u306b\u4ee3\u5165\u3059\u308b\n\n\u95a2\u6570\u5185\u90e8\u3067\u306frbp\u3092\u57fa\u6e96\u306b\u3057\u3066\u30b9\u30bf\u30c3\u30af\u9818\u57df\u3092\u6271\u3044\u307e\u3059\u3002\n\n\u95a2\u6570\u306e\u6700\u5f8c\u3067\u6b21\u306e\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\n1. rbp\u3092rsp\u306b\u4ee3\u5165\u3059\u308b(*)\n2. pop\u3057\u3066rbp\u3092\u547c\u3073\u51fa\u3057\u5143\u306e\u5024\u306b\u623b\u3059\n3. retq\u547d\u4ee4\u3067\u547c\u3073\u51fa\u3057\u5143\u306b\u623b\u308b\n\n\u4e0a\u8a18\u51e6\u7406\u3092\u884c\u3046\u3053\u3068\u3067\u547c\u3073\u51fa\u3057\u5143\u3067\u306f\u95a2\u6570\u547c\u3073\u51fa\u3057\u524d\u5f8c\u3067rsp/rbp\u306f\u5909\u5316\u3057\u307e\u305b\u3093\u3002\n1./2.\u306fleaveq\u547d\u4ee4\u3067\u4e00\u5ea6\u306b\u884c\u3048\u307e\u3059\u3002\n(*)\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u78ba\u4fdd\u306a\u3069\u3067rsp\u3092\u66f4\u65b0\u3057\u305f\u5834\u5408\u306brbp\u306b\u623b\u3059\u305f\u3081\u306b\u884c\u3044\u307e\u3059\u3002\n\n# \u547d\u4ee4\n\u30b9\u30bf\u30c3\u30af\u306b\u5f71\u97ff\u3059\u308b\u547d\u4ee4\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n## push\n\u6b21\u306e\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\n1. rsp\u3092\u30c7\u30af\u30ea\u30e1\u30f3\u30c8\u3057\u307e\u3059\u3002\n2. rsp\u306e\u30e1\u30e2\u30ea\u30a2\u30c9\u30ec\u30b9\u306b\u5024\u3092\u66f8\u304d\u8fbc\u307f\u307e\u3059\u3002\n\n\u51e6\u7406\u9806\u756a\u306f1.\u21922.\u3067\u3042\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u30b9\u30bf\u30c3\u30af\u306f\u30e1\u30e2\u30ea\u30a2\u30c9\u30ec\u30b9\u306e\u5024\u306e\u5c0f\u3055\u3044\u65b9\u5411\u306b\u5ef6\u3073\u3066\u3044\u304d\u307e\u3059\u3002\n\n## pop\n\u6b21\u306e\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\n1. rsp\u306e\u30e1\u30e2\u30ea\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u5024\u3092\u8aad\u307f\u51fa\u3057\u307e\u3059\u3002\n2. rsp\u3092\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3057\u307e\u3059\u3002\n\n\u51e6\u7406\u9806\u756a\u306f1.\u21922.\u3067\u3042\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n## callq\n\u6b21\u306e\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\n1. rsp\u3092\u30c7\u30af\u30ea\u30e1\u30f3\u30c8\u3057\u307e\u3059\u3002\n2. rsp\u306e\u30e1\u30e2\u30ea\u30a2\u30c9\u30ec\u30b9\u306b**rip\u306e\u6b21\u306e\u30a2\u30c9\u30ec\u30b9**\u3092\u66f8\u304d\u8fbc\u307f\u307e\u3059\u3002\n3. rip\u306b\u547c\u3073\u51fa\u3057\u5148\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n## retq\n\u6b21\u306e\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\n1. rsp\u306e\u30e1\u30e2\u30ea\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u5024\u3092\u8aad\u307f\u51fa\u3057\u3066rip\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n2. rsp\u3092\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3057\u307e\u3059\u3002\n\n# \u5177\u4f53\u4f8b\n\u7c21\u5358\u306a\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092gdb\u3067disassemble\u3057\u3066\n\u30b9\u30bf\u30c3\u30af\u306e\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n## \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\nmain\u95a2\u6570\u304b\u3089\u8db3\u3057\u7b97\u3092\u3059\u308badd\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\n\n```c:test.c\nint add(int a1, int a2, int a3, int a4, int a5, int a6,\n\tint a7, int a8, int a9, int a10)\n{\n\tint c;\n\tc = a1+a2+a3+a4+a5+a6+a7+a8+a9+a10;\n\treturn c;\n}\n\nint main(int argc, char *argv[])\n{\n\tint ret = add(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);\n    return ret;\n}\n```\n\n## makefile\n\u30c7\u30d0\u30c3\u30b0\u60c5\u5831\u3042\u308a(g\u30aa\u30d7\u30b7\u30e7\u30f3)\u3001\u6700\u9069\u5316\u306a\u3057(O0)\u3067make\u3057\u307e\u3059\u3002\n(*)\u534a\u89d2space 4\u500b\u3092\u30bf\u30d6\u6587\u5b57\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n```:makefile\nCFLAGS=-I. -g -O0 -Wall -Werror\nINCS=#test.h\nOBJS=test.o\nLIBS=#-lpthread -lm\nTARGET=test\n\n%.o: %.c $(INCS)\n\t$(CC) $(CFLAGS) -c -o $@ $<\n\n$(TARGET): $(OBJS)\n\t$(CC) $(CFLAGS) -o $@ $^ $(LIBS)\n\nclean:\n\trm -rf $(TARGET) *.o\n```\n\n## gdb\nmain\u95a2\u6570\u306e\u5148\u982d\u306e\u547d\u4ee4\u3067\u51e6\u7406\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\n\u547d\u4ee4\u306e\u30a2\u30c9\u30ec\u30b9\u306f\u76f4\u5024\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u9069\u5b9c\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\ndisassemble\u30b3\u30de\u30f3\u30c9\u3067main\u95a2\u6570\u3001add\u95a2\u6570\u306e\u30a2\u30bb\u30f3\u30d6\u30ea\u30b3\u30fc\u30c9\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\n\n```\ngdb ./test\nb *0x40053d\nr\ndisassemble\ndisassemble add\n```\n\n## \u30a2\u30bb\u30f3\u30d6\u30ea\u30b3\u30fc\u30c9\nmain\u95a2\u6570\u3001add\u95a2\u6570\u306e\u30a2\u30bb\u30f3\u30d6\u30ea\u30b3\u30fc\u30c9\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\n\n\u305d\u308c\u305e\u308c\u306e\u8aac\u660e\u3092\u884c\u3046\u524d\u306b\u95a2\u6570\u547c\u3073\u51fa\u3057\u306b\u304a\u6c7a\u307e\u308a\u306e\u51e6\u7406\u3067\u3042\u308b\nFunction prologue / epilogue\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\u547c\u3073\u51fa\u3057\u5143\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u306a\u3044\u3067\u547c\u3073\u51fa\u3057\u5148\u306e\u51e6\u7406\u3092\u884c\u3046\u3053\u3068\u3092\u76ee\u7684\u3068\u3057\u305f\u3082\u306e\u3067\u3059\u3002\n\n### Function prologue\n\u95a2\u6570\u306e\u5148\u982d\u306b\u3042\u308b\u6b21\u306e2\u547d\u4ee4\u306f**Function prologue**\u3068\u547c\u3070\u308c\u308b\u304a\u6c7a\u307e\u308a\u306e\u51e6\u7406\u3067\u3059\u3002\n\n**push   %rbp**\n\u547c\u3073\u51fa\u3057\u5143\u306erbp\u3092\u30b9\u30bf\u30c3\u30af\u306bpush\u3057\u307e\u3059\u3002\n\n**mov    %rsp,%rbp**\nrbp\u306brsp\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\u95a2\u6570\u5185\u3067\u306frbp\u3092\u57fa\u6e96\u30e1\u30e2\u30ea\u30a2\u30c9\u30ec\u30b9\u3068\u3057\u307e\u3059\u3002\n\n2\u547d\u4ee4\u5f8c\u306e\u30b9\u30bf\u30c3\u30af\u72b6\u614b\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/84205/22f9e034-0383-e092-56de-72b8a1460cbe.png)\n\n**caller addr**\u306f\u547c\u3073\u51fa\u3057\u5143\u306e\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002\n\u547c\u3073\u51fa\u3057\u5143\u306ecallq\u547d\u4ee4\u306e\u6b21\u306e\u547d\u4ee4\u306e\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002\ncaller addr\u306f\u547c\u3073\u51fa\u3057\u5143\u306ecallq\u547d\u4ee4\u3067\u30b9\u30bf\u30c3\u30af\u306bpush\u3055\u308c\u307e\u3059\u3002\n\n### Function epilogue\n\u95a2\u6570\u306e\u6700\u5f8c\u306e2\u547d\u4ee4\u306f**Function epilogue**\u3068\u547c\u3070\u308c\u308b\u304a\u6c7a\u307e\u308a\u306e\u51e6\u7406\u3067\u3059\u3002\n\n**leaveq**\nleaveq\u547d\u4ee4\u306f\u6b21\u306e\u547d\u4ee4\u3068\u540c\u3058\u3067\u3059\u3002\n\n```\nmov    %rbp,%rsp\npop    %rbp\n```\nrsp\u306brbp\u3092\u30b3\u30d4\u30fc\u3057\u3066\u547c\u3073\u51fa\u3057\u5143\u306erbp\u3092\u30b9\u30bf\u30c3\u30af\u304b\u3089pop\u3057\u307e\u3059\u3002\n\u3064\u307e\u308aFunction prologue\u306e\u9006\u51e6\u7406\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\n\nleaveq\u547d\u4ee4\u5f8c\u306e\u30b9\u30bf\u30c3\u30af\u72b6\u614b\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/84205/579a1aca-47ab-eaa5-9264-26da0f5ad21b.png)\n\n**retq**\n\u30b9\u30bf\u30c3\u30af\u304b\u3089caller addr\u3092pop\u3057\u3066rip\u306b\u4ee3\u5165\u3057\u307e\u3059\u3002\n\u3053\u308c\u306b\u3088\u308a\u547c\u3073\u51fa\u3057\u5143\u306b\u623b\u308a\u307e\u3059\u3002\n\n### main\nmain\u95a2\u6570\u306e\u51e6\u7406\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\nadd\u95a2\u6570\u306b\u3082\u8a00\u3048\u308b\u3053\u3068\u3067\u3059\u304c\u6700\u9069\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u305f\u3081\u4e0d\u8981\u306a\u51e6\u7406\u304c\u591a\u3044\u3067\u3059\u3002\n\n```\n=> 0x000000000040053d <+0>:\tpush   %rbp\n   0x000000000040053e <+1>:\tmov    %rsp,%rbp\n   0x0000000000400541 <+4>:\tsub    $0x40,%rsp\n   0x0000000000400545 <+8>:\tmov    %edi,-0x14(%rbp)\n   0x0000000000400548 <+11>:\tmov    %rsi,-0x20(%rbp)\n   0x000000000040054c <+15>:\tmovl   $0xa,0x18(%rsp)\n   0x0000000000400554 <+23>:\tmovl   $0x9,0x10(%rsp)\n   0x000000000040055c <+31>:\tmovl   $0x8,0x8(%rsp)\n   0x0000000000400564 <+39>:\tmovl   $0x7,(%rsp)\n   0x000000000040056b <+46>:\tmov    $0x6,%r9d\n   0x0000000000400571 <+52>:\tmov    $0x5,%r8d\n   0x0000000000400577 <+58>:\tmov    $0x4,%ecx\n   0x000000000040057c <+63>:\tmov    $0x3,%edx\n   0x0000000000400581 <+68>:\tmov    $0x2,%esi\n   0x0000000000400586 <+73>:\tmov    $0x1,%edi\n   0x000000000040058b <+78>:\tcallq  0x4004ed <add>\n   0x0000000000400590 <+83>:\tmov    %eax,-0x4(%rbp)\n   0x0000000000400593 <+86>:\tmov    -0x4(%rbp),%eax\n   0x0000000000400596 <+89>:\tleaveq \n   0x0000000000400597 <+90>:\tretq   \n```\n\n\u6b21\u306e\u547d\u4ee4\u3067\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306e\u9818\u57df\u3092\u78ba\u4fdd\u3057\u3066\u3044\u307e\u3059\u30020x40\u30d0\u30a4\u30c8\u78ba\u4fdd\u3057\u3066\u3044\u307e\u3059\u3002\nrsp\u3092\u6e1b\u3089\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002main\u95a2\u6570\u5185\u3067\u306frbp\u304b\u3089rsp\u306e\u9593\u306e\u30e1\u30e2\u30ea\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```\nsub    $0x40,%rsp\n```\nmain\u95a2\u6570\u306e\u5f15\u6570\u306f\u547c\u3073\u51fa\u3057\u5143\u3067\u6b21\u306e\u3088\u3046\u306b\u30ec\u30b8\u30b9\u30bf\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\nargc -> edi\nargv -> rsi\n\nedi,rsi\u306e\u5024\u3092\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306e\u9818\u57df\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n```\nmov    %edi,-0x14(%rbp)\nmov    %rsi,-0x20(%rbp)\n```\n\n\u7b2c1\u304b\u3089\u7b2c6\u307e\u3067\u306e\u5f15\u6570\u306fedi,esi,edx,ecx,r8d,r9d\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\u7b2c7\u5f15\u6570\u4ee5\u964d\u306f\u30b9\u30bf\u30c3\u30af\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n```\nmovl   $0xa,0x18(%rsp)\nmovl   $0x9,0x10(%rsp)\nmovl   $0x8,0x8(%rsp)\nmovl   $0x7,(%rsp)\nmov    $0x6,%r9d\nmov    $0x5,%r8d\nmov    $0x4,%ecx\nmov    $0x3,%edx\nmov    $0x2,%esi\nmov    $0x1,%edi\n```\n\n\u3053\u306e\u6642\u70b9\u3067\u306e\u30b9\u30bf\u30c3\u30af\u306e\u72b6\u614b\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/84205/f163afa9-4347-bbe0-9478-a1149f57b49c.png)\n\nadd\u95a2\u6570\u3092\u30b3\u30fc\u30eb\u3057\u307e\u3059\n\n```\ncallq  0x4004ed <add>\n```\n\neax\u306b\u623b\u308a\u5024\u304c\u8fd4\u308a\u307e\u3059\u3002\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306e\u9818\u57df\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n```\nmov    %eax,-0x4(%rbp)\n```\n\neax\u306bmain\u95a2\u6570\u306e\u623b\u308a\u5024\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n```\nmov    -0x4(%rbp),%eax\n```\n\n### add\n\n```\n   0x00000000004004ed <+0>:\tpush   %rbp\n   0x00000000004004ee <+1>:\tmov    %rsp,%rbp\n   0x00000000004004f1 <+4>:\tmov    %edi,-0x14(%rbp)\n   0x00000000004004f4 <+7>:\tmov    %esi,-0x18(%rbp)\n   0x00000000004004f7 <+10>:\tmov    %edx,-0x1c(%rbp)\n   0x00000000004004fa <+13>:\tmov    %ecx,-0x20(%rbp)\n   0x00000000004004fd <+16>:\tmov    %r8d,-0x24(%rbp)\n   0x0000000000400501 <+20>:\tmov    %r9d,-0x28(%rbp)\n   0x0000000000400505 <+24>:\tmov    -0x18(%rbp),%eax\n   0x0000000000400508 <+27>:\tmov    -0x14(%rbp),%edx\n   0x000000000040050b <+30>:\tadd    %eax,%edx\n   0x000000000040050d <+32>:\tmov    -0x1c(%rbp),%eax\n   0x0000000000400510 <+35>:\tadd    %eax,%edx\n   0x0000000000400512 <+37>:\tmov    -0x20(%rbp),%eax\n   0x0000000000400515 <+40>:\tadd    %eax,%edx\n   0x0000000000400517 <+42>:\tmov    -0x24(%rbp),%eax\n   0x000000000040051a <+45>:\tadd    %eax,%edx\n   0x000000000040051c <+47>:\tmov    -0x28(%rbp),%eax\n   0x000000000040051f <+50>:\tadd    %eax,%edx\n   0x0000000000400521 <+52>:\tmov    0x10(%rbp),%eax\n   0x0000000000400524 <+55>:\tadd    %eax,%edx\n   0x0000000000400526 <+57>:\tmov    0x18(%rbp),%eax\n   0x0000000000400529 <+60>:\tadd    %eax,%edx\n   0x000000000040052b <+62>:\tmov    0x20(%rbp),%eax\n   0x000000000040052e <+65>:\tadd    %eax,%edx\n   0x0000000000400530 <+67>:\tmov    0x28(%rbp),%eax\n   0x0000000000400533 <+70>:\tadd    %edx,%eax\n   0x0000000000400535 <+72>:\tmov    %eax,-0x4(%rbp)\n   0x0000000000400538 <+75>:\tmov    -0x4(%rbp),%eax\n   0x000000000040053b <+78>:\tpop    %rbp\n   0x000000000040053c <+79>:\tretq   \n```\n\nFunction prologue\u5f8c\u306e\u30b9\u30bf\u30c3\u30af\u306e\u72b6\u614b\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/84205/b2d7868b-2fe5-22b7-5985-a26ba5e17210.png)\n\n\u7b2c1\u304b\u3089\u7b2c6\u307e\u3067\u306e\u5f15\u6570\u3092\u30b9\u30bf\u30c3\u30af\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\n\n```\nmov    %edi,-0x14(%rbp)\nmov    %esi,-0x18(%rbp)\nmov    %edx,-0x1c(%rbp)\nmov    %ecx,-0x20(%rbp)\nmov    %r8d,-0x24(%rbp)\nmov    %r9d,-0x28(%rbp)\n```\n\u5f15\u6570\u3092\u30ec\u30b8\u30b9\u30bfeax\u306b\u8aad\u8fbc\u3093\u3067edx\u306b\u5bfe\u3057\u3066\u8db3\u3057\u8fbc\u3093\u3067\u3044\u304d\u307e\u3059\u3002\n\u6700\u5f8c\u306feax\u306b\u5408\u8a08\u5024\u3092\u5165\u308c\u307e\u3059\u3002\n\n```\nmov    -0x18(%rbp),%eax\nmov    -0x14(%rbp),%edx\nadd    %eax,%edx\nmov    -0x1c(%rbp),%eax\nadd    %eax,%edx\nmov    -0x20(%rbp),%eax\nadd    %eax,%edx\nmov    -0x24(%rbp),%eax\nadd    %eax,%edx\nmov    -0x28(%rbp),%eax\nadd    %eax,%edx\nmov    0x10(%rbp),%eax\nadd    %eax,%edx\nmov    0x18(%rbp),%eax\nadd    %eax,%edx\nmov    0x20(%rbp),%eax\nadd    %eax,%edx\nmov    0x28(%rbp),%eax\nadd    %edx,%eax\n```\n\n\u7b2c7\u4ee5\u964d\u306e\u5f15\u6570\u306f\u30b9\u30bf\u30c3\u30af\u4e0a\u306b\u7f6e\u304b\u308c\u3066\u3044\u308b\u305f\u3081\u3001\nrbp\u306b\u5bfe\u3057\u3066\u30d7\u30e9\u30b9\u306eoffset\u3067\u53c2\u7167\u3057\u3066\u3044\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\nmov    0x10(%rbp),%eax\nadd    %eax,%edx\nmov    0x18(%rbp),%eax\nadd    %eax,%edx\nmov    0x20(%rbp),%eax\nadd    %eax,%edx\nmov    0x28(%rbp),%eax\n```\n\n\u7d50\u679c\u3092\u30b9\u30bf\u30c3\u30af\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n```\nmov    %eax,-0x4(%rbp)\n```\n\n\u7d50\u679c\u3092eax\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002eax\u306f\u623b\u308a\u5024\u3067\u3059\u3002\n\n```\nmov    -0x4(%rbp),%eax\n```\n\n\u3053\u306e\u6642\u70b9\u306e\u30b9\u30bf\u30c3\u30af\u306e\u72b6\u614b\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/84205/c4764ff0-4a69-bdbf-3cc0-150a419394ec.png)\n\n\u547c\u3073\u51fa\u3057\u5143\u306erbp\u3092\u30b9\u30bf\u30c3\u30af\u304b\u3089pop\u3057\u307e\u3059\u3002\nleaveq\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304crsp\u304c\u5909\u5316\u3057\u3066\u3044\u306a\u3044\u305f\u3081pop\u3060\u3051\u3067OK\u3067\u3059\u3002\n\n```\npop    %rbp\n```\n\n# \u53c2\u7167\n\n[x86 calling conventions](https://en.wikipedia.org/wiki/X86_calling_conventions)\n[Function_prologue](https://en.wikipedia.org/wiki/Function_prologue)\n", "tags": ["x86-64", "assembly", "stack", "\u30b9\u30bf\u30c3\u30af", "\u547c\u51fa\u898f\u7d04"]}