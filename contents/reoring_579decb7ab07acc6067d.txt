{"tags": ["SSH", "OpenSSH", "Linux", "server"], "context": "OpenSSH 5.4\u4ee5\u4e0a\u3067\u306f-W\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067nc\u30b3\u30de\u30f3\u30c9\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u30b5\u30fc\u30d0\u3082ProxyCommand\u3067\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u308c\u307e\u3067\u306enc\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u305f\u66f8\u304d\u65b9\nHost node-*\n  ProxyCommand ssh proxy_host nc -w 6000 %h %p\n\n\nnc\u30b3\u30de\u30f3\u30c9\u3092-W\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u7f6e\u63db\u3048\u305f\u66f8\u304d\u65b9\nHost node-*\n  ProxyCommand ssh -W %h:%p proxy_host\n\n\n\u4f8b\n\u4e0b\u8a18\u306e\u4f8b\u306e\u69d8\u306b\u8a18\u8ff0\u3059\u308b\u3068\u3001ssh nodes-node1\u306a\u3069\u3001nodes-*\u306b\u30de\u30c3\u30c1\u3057\u305f\u969b\u306b\u306bProxyCommand\u304c\u4f7f\u7528\u3055\u308c\u308b\u3002\nHost proxy_host\n  HostName 10.0.0.1\n  User ubuntu\n  IdentityFile /Users/hoge/.ssh/proxy_key\n\nHost nodes-*\n  ProxyCommand ssh -W %h:%p proxy_host\n\nHost nodes-node1\n  HostName 192.168.0.1\n  User ubuntu\n\nHost nodes-node2\n  HostName 192.168.0.2\n  User ubuntu\n\nOpenSSH 5.4\u4ee5\u4e0a\u3067\u306f-W\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067nc\u30b3\u30de\u30f3\u30c9\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u30b5\u30fc\u30d0\u3082ProxyCommand\u3067\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n## \u3053\u308c\u307e\u3067\u306enc\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u305f\u66f8\u304d\u65b9\n\n```\nHost node-*\n  ProxyCommand ssh proxy_host nc -w 6000 %h %p\n```\n## nc\u30b3\u30de\u30f3\u30c9\u3092-W\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u7f6e\u63db\u3048\u305f\u66f8\u304d\u65b9\n\n```\nHost node-*\n  ProxyCommand ssh -W %h:%p proxy_host\n```\n\n## \u4f8b\n\n\u4e0b\u8a18\u306e\u4f8b\u306e\u69d8\u306b\u8a18\u8ff0\u3059\u308b\u3068\u3001ssh nodes-node1\u306a\u3069\u3001nodes-*\u306b\u30de\u30c3\u30c1\u3057\u305f\u969b\u306b\u306bProxyCommand\u304c\u4f7f\u7528\u3055\u308c\u308b\u3002\n\n```\nHost proxy_host\n  HostName 10.0.0.1\n  User ubuntu\n  IdentityFile /Users/hoge/.ssh/proxy_key\n\nHost nodes-*\n  ProxyCommand ssh -W %h:%p proxy_host\n\nHost nodes-node1\n  HostName 192.168.0.1\n  User ubuntu\n\nHost nodes-node2\n  HostName 192.168.0.2\n  User ubuntu\n```\n"}