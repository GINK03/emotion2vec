{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\n\nknockoutjs\u3067websocket-rails\u3092\u3064\u304b\u3063\u305f\u306e\u3067\u3001\u5c0e\u5165\u3057\u305f\u624b\u9806\u3068\u3001\u3064\u307e\u3065\u3044\u305f\u70b9\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\u3064\u304f\u3063\u305f\u306e\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u306b\u7d10\u3065\u304f\u30bf\u30b9\u30af\u30ea\u30b9\u30c8\u306e\u300c\u8ffd\u52a0\u30fb\u7de8\u96c6\u30fb\u524a\u9664\u30fb\u5b8c\u4e86\u300d\u307f\u305f\u3044\u306a\u306e\u304c\u5168\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u53cd\u6620\u3055\u308c\u308b\u3084\u3064\u3067\u3059\u3002\n\u30c7\u30fc\u30bf\u7684\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u69d8\u306a\u611f\u3058\u3067\u3059\u3002\u30e6\u30fc\u30b6\u30fc\u306f\u4f55\u4eba\u304b\u3044\u307e\u3059\u3002\nuser: [{\n    id: 1,\n    name: aaaa,\n    todo: [\n        {id: 1, name: aaaaaaa, del: 1},\n        {id: 2, name: eeee, del: 1},\n        {id: 3, name: ccccc, del: 0},\n        {id: 4, name: hhhhh, del: 0},\n        {id: 5, name: kkkkk, del: 0},\n    ]\n},\n{\n    id: 2,\n    name: aaaa,\n    todo: [\n        {id: 6, name: jjj, del: 1},\n        {id: 7, name: ee, del: 1},\n        {id: 8, name: gggg, del: 0},\n    ]\n},\n{\n    id: 3,\n    name: aaaa,\n    todo: [\n        {id: 9, name: aaaaaaa, del: 1},\n        {id: 10, name: eeee, del: 1},\n        {id: 11, name: ccccc, del: 0},\n        {id: 12, name: hhhhh, del: 0},\n    ]\n}]\n\n\nwebsocket-rails\u3092\u5c0e\u5165\u3059\u308b\n\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\u57fa\u672c\u7684\u306b\u306f\u3001\u624b\u9806\u901a\u308a\u3084\u308c\u3070\u554f\u984c\u306a\u3044\u306f\u305a\u3067\u3059\u3002\n\nWebSocket\u3067\u30b5\u30fc\u30d0\u30d7\u30c3\u30b7\u30e5 \uff5eWebsocket-Rails\uff5e\nRails\u3067WebSocket\u3092\u4f7f\u3046\nwebsocket-rails\u3067\u30c1\u30e3\u30c3\u30c8\u3082\u3069\u304d\n\n\u7c21\u5358\u306b\u307e\u3068\u3081\u308b\u3068\u3001\u4ee5\u4e0b\u306e\uff15\u624b\u9806\u3067\u5b8c\u4e86\u3057\u307e\u3059\u3002\n\nwebsocket-rails\u306egem\u3044\u308c\u308b\nevent.rb\u3067\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3092\u30de\u30c3\u30d4\u30f3\u30b0\nJS\u3067\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u305f\u30eb\u30fc\u30c8\u306b\u30c7\u30fc\u30bf\u9001\u4fe1\nRails\u3067\u53d7\u3051\u53d6\u308a\u3001\u3059\u3079\u3066\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u9001\u4fe1\nJS\u3067\u30a4\u30d9\u30f3\u30c8\u3092\u30d0\u30a4\u30f3\u30c9\u3057\u3001\u53d7\u3051\u53d6\u3063\u305f\u30c7\u30fc\u30bf\u3092\u597d\u304d\u306b\u51e6\u7406\u3059\u308b\n\n\nJS\u5074\u3067\u914d\u5217\u51e6\u7406\u3092\u3059\u308b\n\n\u30bf\u30b9\u30af\u3092ko.observable\u3055\u305b\u305f\u3044\u306e\u3067\u3001\u8a72\u5f53\u3059\u308b\u30c7\u30fc\u30bf\u3092\u3001\u3057\u304b\u308b\u3079\u304d\u914d\u5217\u306e\u4e2d\u306b\u3064\u3063\u3053\u307e\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\u3053\u3053\u304c\u6163\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u6238\u60d1\u3044\u307e\u3057\u305f\u3002\u4ee5\u4e0b\u30bd\u30fc\u30b9\u3067\u3059\u3002\n\n\u524a\u9664\u306e\u51e6\u7406\n      // todo_destroy\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\n      // dispatcher\u306f\u300cnew WebSocketRails(\"ws://\u30db\u30b9\u30c8/websocket\");\u300d\u3067\u3001\u30b0\u30ed\u30fc\u30d0\u30eb\u3067\u3059\u3002\n      dispatcher.bind('todo_destroy', function (removedTodo) {\n\n        $.each(view_model.users(), function() {\n          this.todo.remove(function(item) { \n\n            // item\u306fobservable\u306a\u306e\u3067item.id()\u3068\u3059\u308b(http://qiita.com/okmttdhr/items/a180b96b5e5e1b30aa1c)\n            // id\u304c\u540c\u3058todo\u3092\u914d\u5217\u304b\u3089\u524a\u9664\n\n            return item.id() == removedTodo.id \n          });\n        });\n\n      });\n\n\n\u7de8\u96c6\u306e\u51e6\u7406\n\u5b8c\u4e86\u3082\u3053\u308c\u3068\u540c\u3058\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n      // todo_update\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\n      dispatcher.bind('todo_update', function (updatedTodo) {\n        $.each(view_model.users(), function() {\n\n          // \u66f4\u65b0\u306e\u969b\u306fremove\u306e\u3088\u3046\u306b\u4fbf\u5229\u306a\u30e1\u30bd\u30c3\u30c9\u304c\u306a\u3044\u306e\u3067(\u3042\u3063\u305f\u3089\u6559\u3048\u3066\u4e0b\u3055\u3044)\u3001each\u3092\u30cd\u30b9\u30c8\u3055\u305b\u3066users\u306etodo\u306e\u4e2d\u8eab\u3092\u898b\u308b\u3002\n\n          $.each(this.todo(), function(i, item) {\n\n            // item\u306fobservable\u306a\u306e\u3067item.id()\u3068\u3059\u308b(http://qiita.com/okmttdhr/items/a180b96b5e5e1b30aa1c)\n            // item\u306fobservable\u306a\u306e\u3067item.name(updatedTodo.name)\u306e\u3088\u3046\u306b\u66f4\u65b0\u3059\u308b\n            // id\u304c\u540c\u3058todo\u306b\u5bfe\u3057\u3066\u66f4\u65b0\n\n            if(item.id() == updatedTodo.id) item.name(updatedTodo.name);\n          });\n        });\n      });\n\n\n\u8ffd\u52a0\u306e\u51e6\u7406\n\n      function TodoConf(data) {\n          var self = this;\n          self.id = ko.observable(data.id);\n          self.name = ko.observable(data.user_id);\n          self.del = ko.observable(data.completed);\n      }\n\n      // todo_create\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\n      dispatcher.bind('todo_create', function (newTodo) {\n\n        // push\u3057\u305f\u30c7\u30fc\u30bf\u3082observable\u306b\u3057\u305f\u3044\u306e\u3067\u3001\u751f\u306e\u30c7\u30fc\u30bf\u3092\u4e00\u5ea6observable\u306b\u5909\u63db\u3059\u308b\n        var newTodo = new TodoConf(newTodo);\n\n        $.each(view_model.users(), function() {\n          // user_id\u304c\u540c\u3058user\u306b\u5bfe\u3057\u3066todo\u3092\u914d\u5217\u306b\u8ffd\u52a0\n          if (this.id() == newTodo.user_id()) {\n            this.todo.push(newTodo);\n          };\n        });\n      });\n\n\n\u307e\u3068\u3081\n\nknockoutjs\u3063\u307d\u3044\u3053\u3068\u3068\u3044\u3048\u3070\u3001observable\u306b\u3059\u308b\u305f\u3081\u306b\u914d\u5217\u3069\u3046\u3059\u308b\u304b\u8003\u3048\u305f\u3053\u3068\u304f\u3089\u3044\u3067\u3057\u3087\u3046\u304b\u3002\nwebsocket\u306f\u6848\u5916\u96e3\u3057\u304f\u306a\u304f\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067DOM\u3092\u305f\u3060\u3057\u304f\u53cd\u6620\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u306e\u65b9\u304c\u3001\u8907\u96d1\u306b\u306a\u308c\u3070\u306a\u308b\u307b\u3069\u96e3\u3057\u304f\u306a\u3063\u3066\u3086\u304f\u306e\u304b\u306a\u3068\u601d\u3044\u307e\u3057\u305f\u3002\u3068\u308a\u3042\u3048\u305a\u3001jQuery\u3067\u3084\u3089\u306a\u304f\u3066\u3088\u304b\u3063\u305f\u3067\u3059\u3002\u3002\n\n# **\u6982\u8981**\n\nknockoutjs\u3067websocket-rails\u3092\u3064\u304b\u3063\u305f\u306e\u3067\u3001\u5c0e\u5165\u3057\u305f\u624b\u9806\u3068\u3001\u3064\u307e\u3065\u3044\u305f\u70b9\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n\u3064\u304f\u3063\u305f\u306e\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u306b\u7d10\u3065\u304f\u30bf\u30b9\u30af\u30ea\u30b9\u30c8\u306e\u300c\u8ffd\u52a0\u30fb\u7de8\u96c6\u30fb\u524a\u9664\u30fb\u5b8c\u4e86\u300d\u307f\u305f\u3044\u306a\u306e\u304c\u5168\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u53cd\u6620\u3055\u308c\u308b\u3084\u3064\u3067\u3059\u3002\n\n\u30c7\u30fc\u30bf\u7684\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u69d8\u306a\u611f\u3058\u3067\u3059\u3002\u30e6\u30fc\u30b6\u30fc\u306f\u4f55\u4eba\u304b\u3044\u307e\u3059\u3002\n\n```\nuser: [{\n    id: 1,\n    name: aaaa,\n    todo: [\n        {id: 1, name: aaaaaaa, del: 1},\n        {id: 2, name: eeee, del: 1},\n        {id: 3, name: ccccc, del: 0},\n        {id: 4, name: hhhhh, del: 0},\n        {id: 5, name: kkkkk, del: 0},\n    ]\n},\n{\n    id: 2,\n    name: aaaa,\n    todo: [\n        {id: 6, name: jjj, del: 1},\n        {id: 7, name: ee, del: 1},\n        {id: 8, name: gggg, del: 0},\n    ]\n},\n{\n    id: 3,\n    name: aaaa,\n    todo: [\n        {id: 9, name: aaaaaaa, del: 1},\n        {id: 10, name: eeee, del: 1},\n        {id: 11, name: ccccc, del: 0},\n        {id: 12, name: hhhhh, del: 0},\n    ]\n}]\n```\n\n# **websocket-rails\u3092\u5c0e\u5165\u3059\u308b**\n\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\u57fa\u672c\u7684\u306b\u306f\u3001\u624b\u9806\u901a\u308a\u3084\u308c\u3070\u554f\u984c\u306a\u3044\u306f\u305a\u3067\u3059\u3002\n\n* <a href=\"http://www.school.ctc-g.co.jp/columns/masuidrive/masuidrive14.html\" target=\"_blank\">WebSocket\u3067\u30b5\u30fc\u30d0\u30d7\u30c3\u30b7\u30e5 \uff5eWebsocket-Rails\uff5e</a>\n* <a href=\"http://washiiku.hatenablog.com/entry/2013/11/13/235027\" target=\"_blank\">Rails\u3067WebSocket\u3092\u4f7f\u3046</a>\n* <a href=\"http://ithijikata.hatenablog.com/entry/2014/03/06/021948\" target=\"_blank\">websocket-rails\u3067\u30c1\u30e3\u30c3\u30c8\u3082\u3069\u304d</a>\n\n\u7c21\u5358\u306b\u307e\u3068\u3081\u308b\u3068\u3001\u4ee5\u4e0b\u306e\uff15\u624b\u9806\u3067\u5b8c\u4e86\u3057\u307e\u3059\u3002\n\n1. websocket-rails\u306egem\u3044\u308c\u308b\n2. event.rb\u3067\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3092\u30de\u30c3\u30d4\u30f3\u30b0\n3. JS\u3067\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u305f\u30eb\u30fc\u30c8\u306b\u30c7\u30fc\u30bf\u9001\u4fe1\n4. Rails\u3067\u53d7\u3051\u53d6\u308a\u3001\u3059\u3079\u3066\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u9001\u4fe1\n5. JS\u3067\u30a4\u30d9\u30f3\u30c8\u3092\u30d0\u30a4\u30f3\u30c9\u3057\u3001\u53d7\u3051\u53d6\u3063\u305f\u30c7\u30fc\u30bf\u3092\u597d\u304d\u306b\u51e6\u7406\u3059\u308b\n\n\n# **JS\u5074\u3067\u914d\u5217\u51e6\u7406\u3092\u3059\u308b**\n\n\u30bf\u30b9\u30af\u3092ko.observable\u3055\u305b\u305f\u3044\u306e\u3067\u3001\u8a72\u5f53\u3059\u308b\u30c7\u30fc\u30bf\u3092\u3001\u3057\u304b\u308b\u3079\u304d\u914d\u5217\u306e\u4e2d\u306b\u3064\u3063\u3053\u307e\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\u3053\u3053\u304c\u6163\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u6238\u60d1\u3044\u307e\u3057\u305f\u3002\u4ee5\u4e0b\u30bd\u30fc\u30b9\u3067\u3059\u3002\n\n### \u524a\u9664\u306e\u51e6\u7406\n\n```js\n      // todo_destroy\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\n      // dispatcher\u306f\u300cnew WebSocketRails(\"ws://\u30db\u30b9\u30c8/websocket\");\u300d\u3067\u3001\u30b0\u30ed\u30fc\u30d0\u30eb\u3067\u3059\u3002\n      dispatcher.bind('todo_destroy', function (removedTodo) {\n\n        $.each(view_model.users(), function() {\n          this.todo.remove(function(item) { \n\n            // item\u306fobservable\u306a\u306e\u3067item.id()\u3068\u3059\u308b(http://qiita.com/okmttdhr/items/a180b96b5e5e1b30aa1c)\n            // id\u304c\u540c\u3058todo\u3092\u914d\u5217\u304b\u3089\u524a\u9664\n\n            return item.id() == removedTodo.id \n          });\n        });\n\n      });\n```\n\n### \u7de8\u96c6\u306e\u51e6\u7406\n\n\u5b8c\u4e86\u3082\u3053\u308c\u3068\u540c\u3058\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n\n```js\n      // todo_update\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\n      dispatcher.bind('todo_update', function (updatedTodo) {\n        $.each(view_model.users(), function() {\n\n          // \u66f4\u65b0\u306e\u969b\u306fremove\u306e\u3088\u3046\u306b\u4fbf\u5229\u306a\u30e1\u30bd\u30c3\u30c9\u304c\u306a\u3044\u306e\u3067(\u3042\u3063\u305f\u3089\u6559\u3048\u3066\u4e0b\u3055\u3044)\u3001each\u3092\u30cd\u30b9\u30c8\u3055\u305b\u3066users\u306etodo\u306e\u4e2d\u8eab\u3092\u898b\u308b\u3002\n\n          $.each(this.todo(), function(i, item) {\n\n            // item\u306fobservable\u306a\u306e\u3067item.id()\u3068\u3059\u308b(http://qiita.com/okmttdhr/items/a180b96b5e5e1b30aa1c)\n            // item\u306fobservable\u306a\u306e\u3067item.name(updatedTodo.name)\u306e\u3088\u3046\u306b\u66f4\u65b0\u3059\u308b\n            // id\u304c\u540c\u3058todo\u306b\u5bfe\u3057\u3066\u66f4\u65b0\n\n            if(item.id() == updatedTodo.id) item.name(updatedTodo.name);\n          });\n        });\n      });\n```\n\n### \u8ffd\u52a0\u306e\u51e6\u7406\n\n```js\n\n      function TodoConf(data) {\n          var self = this;\n          self.id = ko.observable(data.id);\n          self.name = ko.observable(data.user_id);\n          self.del = ko.observable(data.completed);\n      }\n\n      // todo_create\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\n      dispatcher.bind('todo_create', function (newTodo) {\n\n        // push\u3057\u305f\u30c7\u30fc\u30bf\u3082observable\u306b\u3057\u305f\u3044\u306e\u3067\u3001\u751f\u306e\u30c7\u30fc\u30bf\u3092\u4e00\u5ea6observable\u306b\u5909\u63db\u3059\u308b\n        var newTodo = new TodoConf(newTodo);\n\n        $.each(view_model.users(), function() {\n          // user_id\u304c\u540c\u3058user\u306b\u5bfe\u3057\u3066todo\u3092\u914d\u5217\u306b\u8ffd\u52a0\n          if (this.id() == newTodo.user_id()) {\n            this.todo.push(newTodo);\n          };\n        });\n      });\n```\n\n\n# **\u307e\u3068\u3081**\n\nknockoutjs\u3063\u307d\u3044\u3053\u3068\u3068\u3044\u3048\u3070\u3001observable\u306b\u3059\u308b\u305f\u3081\u306b\u914d\u5217\u3069\u3046\u3059\u308b\u304b\u8003\u3048\u305f\u3053\u3068\u304f\u3089\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\nwebsocket\u306f\u6848\u5916\u96e3\u3057\u304f\u306a\u304f\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067DOM\u3092\u305f\u3060\u3057\u304f\u53cd\u6620\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u306e\u65b9\u304c\u3001\u8907\u96d1\u306b\u306a\u308c\u3070\u306a\u308b\u307b\u3069\u96e3\u3057\u304f\u306a\u3063\u3066\u3086\u304f\u306e\u304b\u306a\u3068\u601d\u3044\u307e\u3057\u305f\u3002\u3068\u308a\u3042\u3048\u305a\u3001jQuery\u3067\u3084\u3089\u306a\u304f\u3066\u3088\u304b\u3063\u305f\u3067\u3059\u3002\u3002\n\n\n\n\n\n", "tags": ["knockoutjs", "websocket", "Rails", "JavaScript", "HTML5"]}