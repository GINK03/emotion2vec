{"context": "\n\n\u80cc\u666f\n\u30b9\u30ab\u30a4\u30c4\u30ea\u30fc\u306e\u5199\u771f\u3092\u4f7f\u3063\u3066\u753b\u50cf\u306e\u30bb\u30b0\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u884c\u3044\uff0c\u5efa\u7269\u90e8\u5206\u3060\u3051\u3092\u629c\u304d\u51fa\u3057\u307e\u3059\uff0e\n\u4f7f\u7528\u74b0\u5883: MATLAB R2016b \n\u4f7f\u7528\u3057\u305f\u30c4\u30fc\u30eb\u30dc\u30c3\u30af\u30b9: Image Processing Toolbox, Statistics and Machine Learning Toolbox \n\n\u753b\u50cf\u306e\u8868\u793a\nimread \u3067\u753b\u50cf\u3092\u8aad\u307f\u8fbc\u307f\u307e\u3059\uff0e\u30b5\u30a4\u30ba\u304c\u5927\u304d\u3044\u306e\u3067\uff0cimresize \u30670.2\u500d\u306b\u3057\u3066\u3044\u307e\u3059\uff0e\nimg = 'skytree.jpg';\nJ = imread(img);\nI = imresize(J, 0.2);\n\nfigure\nimshow(I)\n\n\n\n\u30b9\u30fc\u30d1\u30fc\u30d4\u30af\u30bb\u30eb\u3092\u7528\u3044\u305f\u753b\u50cf\u306e\u5206\u5272\n\u753b\u50cf\u3092\uff0c\u753b\u7d20\u5358\u4f4d\u3067\u306f\u306a\u304f\u8f1d\u5ea6\u3084\u8272\u304c\u4f3c\u3066\u3044\u308b\u9818\u57df\u5358\u4f4d\u306b\u51e6\u7406\u3059\u308b\u30b9\u30fc\u30d1\u30fc\u30d4\u30af\u30bb\u30eb\u306b\u5909\u63db\u3057\u307e\u3059\uff0eL*a*b* \u8272\u7a7a\u9593\u306b\u5909\u63db\u3057\u305f\u5834\u5408\u306f\uff0csuperpixels \u95a2\u6570\u306e\u30d7\u30ed\u30d1\u30c6\u30a3 IsInputLab \u3092 true \u306b\u8a2d\u5b9a\u3057\u307e\u3059\uff0e\u3053\u3053\u3067\u306f\u30b9\u30fc\u30d1\u30fc\u30d4\u30af\u30bb\u30eb\u306e\u6570\u3092 1000 \u306b\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\nIlab = rgb2lab(I);     \n[Ls, N] = superpixels(Ilab, 1000, 'IsInputLab', true); \nBmask = boundarymask(Ls);  % \u30bb\u30b0\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u9818\u57df\u5883\u754c\u3092\u691c\u51fa       \nI1 = imoverlay(I, Bmask,'c');   % \u30b9\u30fc\u30d1\u30fc\u30d4\u30af\u30bb\u30eb\u3092\u753b\u50cf\u306b\u91cd\u306d\u66f8\u304d   \n\nfigure;\nimshow(I1);\n\n\n\n\u30b9\u30fc\u30d1\u30fc\u30d4\u30af\u30bb\u30eb\u3054\u3068\u306e\u5e73\u5747\u5024\u3092\u7b97\u51fa\nN \u500b\u306e\u305d\u308c\u305e\u308c\u306e\u30b9\u30fc\u30d1\u30fc\u30d4\u30af\u30bb\u30eb\u306b\u5bfe\u3057\u3066\uff0cL*, a*, b* \u306e\u5e73\u5747\u5024\u3092\u8a08\u7b97\u3057\uff0cimshowpair \u3067\uff0c\u5143\u753b\u50cf\u3068\u30b9\u30fc\u30d1\u30fc\u30d4\u30af\u30bb\u30eb\u3054\u3068\u306b\u5e73\u5747\u3092\u53d6\u3063\u305f\u753b\u50cf\u3092\u8868\u793a\u3057\u307e\u3059\uff0e\npixIdxList = label2idx(Ls);    % \u5404\u30e9\u30d9\u30eb\u9818\u57df\u306e\u884c\u5217\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u53d6\u5f97\nsz = numel(Ls);                % \u753b\u7d20\u6570\nsuperLab = zeros(N,3);\nfor  i = 1:N    \n  superLab(i,1) = mean(Ilab(pixIdxList{i}      ));  % L* mean\n  superLab(i,2) = mean(Ilab(pixIdxList{i}+   sz));  % a* mean\n  superLab(i,3) = mean(Ilab(pixIdxList{i}+ 2*sz));  % b* mean\nend\nI2 = label2rgb(Ls, lab2rgb(superLab));\n\nfigure; \nimshowpair(I, imoverlay(I2, boundarymask(Ls),'w'), 'montage'); \n\n\n\nK-means\u3067\u8272\u306e\u985e\u4f3c\u5ea6\u3092\u7528\u3044\u305f\u30af\u30e9\u30b9\u30bf\u30ea\u30f3\u30b0\n\u4eca\u56de\u306f\u30af\u30e9\u30b9\u6570\u30922\u306b\u8a2d\u5b9a\u3057\u307e\u3059\uff0e\u30af\u30e9\u30b9\u30bf\u30ea\u30f3\u30b0\u306f kmeans \u3092\u4f7f\u7528\u3057\u307e\u3059\uff0e\nnumColors = 2;       \n[idx, cLab] = kmeans(superLab, numColors);\nLc = zeros(size(Ls));\nfor i = 1:N                        \n    Lc(pixIdxList{i}) = idx(i);    \nend\n\nI3  = label2rgb(Lc, lab2rgb(cLab)); \nI3b = imoverlay(I3, boundarymask(Lc), 'm');      \n\nfigure;\nimshow(I3b); \n\n\n\u5efa\u7269\u306e\u90e8\u5206\u306e\u307f\u3092\u62bd\u51fa\n\u307b\u3089\u5efa\u7269\u3060\u3051\u53d6\u308c\u305f\uff0e\n\u5bae\u6bbf\u307f\u305f\u3044\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\uff0e\nmaskA = (Lc == 1);\nmaskA_filled = imfill(maskA, 'holes');       % \u30de\u30b9\u30af\u306e\u7a74\u3092\u57cb\u3081\u308b\nIout = imoverlay(I, maskA_filled, 'w');\n\nfigure; \nimshowpair(I, Iout);                  \n\n\n## \u80cc\u666f\n\u30b9\u30ab\u30a4\u30c4\u30ea\u30fc\u306e\u5199\u771f\u3092\u4f7f\u3063\u3066\u753b\u50cf\u306e\u30bb\u30b0\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u884c\u3044\uff0c\u5efa\u7269\u90e8\u5206\u3060\u3051\u3092\u629c\u304d\u51fa\u3057\u307e\u3059\uff0e\n\n\u4f7f\u7528\u74b0\u5883: MATLAB R2016b \n\u4f7f\u7528\u3057\u305f\u30c4\u30fc\u30eb\u30dc\u30c3\u30af\u30b9: Image Processing Toolbox, Statistics and Machine Learning Toolbox \n\n## \u753b\u50cf\u306e\u8868\u793a\n<a href=\"https://jp.mathworks.com/help/matlab/ref/imread.html\">imread</a> \u3067\u753b\u50cf\u3092\u8aad\u307f\u8fbc\u307f\u307e\u3059\uff0e\u30b5\u30a4\u30ba\u304c\u5927\u304d\u3044\u306e\u3067\uff0c<a href=\"https://jp.mathworks.com/help/images/ref/imresize.html\">imresize</a> \u30670.2\u500d\u306b\u3057\u3066\u3044\u307e\u3059\uff0e\n\n```\nimg = 'skytree.jpg';\nJ = imread(img);\nI = imresize(J, 0.2);\n\nfigure\nimshow(I)\n```\n\n![tree1.png](https://qiita-image-store.s3.amazonaws.com/0/168437/3b88c3d1-dd72-ca74-e7c2-d6913dca3ace.png)\n\n\n## \u30b9\u30fc\u30d1\u30fc\u30d4\u30af\u30bb\u30eb\u3092\u7528\u3044\u305f\u753b\u50cf\u306e\u5206\u5272\n\u753b\u50cf\u3092\uff0c\u753b\u7d20\u5358\u4f4d\u3067\u306f\u306a\u304f\u8f1d\u5ea6\u3084\u8272\u304c\u4f3c\u3066\u3044\u308b\u9818\u57df\u5358\u4f4d\u306b\u51e6\u7406\u3059\u308b\u30b9\u30fc\u30d1\u30fc\u30d4\u30af\u30bb\u30eb\u306b\u5909\u63db\u3057\u307e\u3059\uff0eL*a*b* \u8272\u7a7a\u9593\u306b\u5909\u63db\u3057\u305f\u5834\u5408\u306f\uff0c<a href=\"https://jp.mathworks.com/help/images/ref/superpixels.html\">superpixels</a> \u95a2\u6570\u306e\u30d7\u30ed\u30d1\u30c6\u30a3 **IsInputLab** \u3092 **true** \u306b\u8a2d\u5b9a\u3057\u307e\u3059\uff0e\u3053\u3053\u3067\u306f\u30b9\u30fc\u30d1\u30fc\u30d4\u30af\u30bb\u30eb\u306e\u6570\u3092 **1000** \u306b\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n```\nIlab = rgb2lab(I);     \n[Ls, N] = superpixels(Ilab, 1000, 'IsInputLab', true); \nBmask = boundarymask(Ls);  % \u30bb\u30b0\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u9818\u57df\u5883\u754c\u3092\u691c\u51fa       \nI1 = imoverlay(I, Bmask,'c');   % \u30b9\u30fc\u30d1\u30fc\u30d4\u30af\u30bb\u30eb\u3092\u753b\u50cf\u306b\u91cd\u306d\u66f8\u304d   \n\nfigure;\nimshow(I1);\n```\n\n![tree2.png](https://qiita-image-store.s3.amazonaws.com/0/168437/076b404d-ff69-f80e-af16-2130a2ee4274.png)\n\n\n## \u30b9\u30fc\u30d1\u30fc\u30d4\u30af\u30bb\u30eb\u3054\u3068\u306e\u5e73\u5747\u5024\u3092\u7b97\u51fa\nN \u500b\u306e\u305d\u308c\u305e\u308c\u306e\u30b9\u30fc\u30d1\u30fc\u30d4\u30af\u30bb\u30eb\u306b\u5bfe\u3057\u3066\uff0cL*, a*, b* \u306e\u5e73\u5747\u5024\u3092\u8a08\u7b97\u3057\uff0c<a href=\"https://jp.mathworks.com/help/images/ref/imshowpair.html\">imshowpair</a> \u3067\uff0c\u5143\u753b\u50cf\u3068\u30b9\u30fc\u30d1\u30fc\u30d4\u30af\u30bb\u30eb\u3054\u3068\u306b\u5e73\u5747\u3092\u53d6\u3063\u305f\u753b\u50cf\u3092\u8868\u793a\u3057\u307e\u3059\uff0e\n\n```\npixIdxList = label2idx(Ls);    % \u5404\u30e9\u30d9\u30eb\u9818\u57df\u306e\u884c\u5217\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u53d6\u5f97\nsz = numel(Ls);                % \u753b\u7d20\u6570\nsuperLab = zeros(N,3);\nfor  i = 1:N    \n  superLab(i,1) = mean(Ilab(pixIdxList{i}      ));  % L* mean\n  superLab(i,2) = mean(Ilab(pixIdxList{i}+   sz));  % a* mean\n  superLab(i,3) = mean(Ilab(pixIdxList{i}+ 2*sz));  % b* mean\nend\nI2 = label2rgb(Ls, lab2rgb(superLab));\n\nfigure; \nimshowpair(I, imoverlay(I2, boundarymask(Ls),'w'), 'montage'); \n```\n\n![tree3.png](https://qiita-image-store.s3.amazonaws.com/0/168437/2830dfc7-d245-e133-18f0-7b9bf5a65938.png)\n\n## K-means\u3067\u8272\u306e\u985e\u4f3c\u5ea6\u3092\u7528\u3044\u305f\u30af\u30e9\u30b9\u30bf\u30ea\u30f3\u30b0\n\u4eca\u56de\u306f\u30af\u30e9\u30b9\u6570\u30922\u306b\u8a2d\u5b9a\u3057\u307e\u3059\uff0e\u30af\u30e9\u30b9\u30bf\u30ea\u30f3\u30b0\u306f <a href=\"https://jp.mathworks.com/help/stats/kmeans.html\">kmeans</a> \u3092\u4f7f\u7528\u3057\u307e\u3059\uff0e\n\n```\nnumColors = 2;       \n[idx, cLab] = kmeans(superLab, numColors);\nLc = zeros(size(Ls));\nfor i = 1:N                        \n    Lc(pixIdxList{i}) = idx(i);    \nend\n\nI3  = label2rgb(Lc, lab2rgb(cLab)); \nI3b = imoverlay(I3, boundarymask(Lc), 'm');      \n\nfigure;\nimshow(I3b); \n```\n\n## \u5efa\u7269\u306e\u90e8\u5206\u306e\u307f\u3092\u62bd\u51fa\n\u307b\u3089\u5efa\u7269\u3060\u3051\u53d6\u308c\u305f\uff0e\n\u5bae\u6bbf\u307f\u305f\u3044\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\uff0e\n\n```\nmaskA = (Lc == 1);\nmaskA_filled = imfill(maskA, 'holes');       % \u30de\u30b9\u30af\u306e\u7a74\u3092\u57cb\u3081\u308b\nIout = imoverlay(I, maskA_filled, 'w');\n\nfigure; \nimshowpair(I, Iout);                  \n```\n\n![tree4.png](https://qiita-image-store.s3.amazonaws.com/0/168437/2beeae0b-7e94-b5f2-8350-c67c430e530b.png)\n", "tags": ["\u753b\u50cf\u51e6\u7406", "matlab"]}