{"context": "\u30ab\u30e9\u30e0\u5b9a\u7fa9\u3092\u5909\u66f4\u3057\u305f\u308a\u3001\u30ab\u30e9\u30e0\u3092\u30c9\u30ed\u30c3\u30d7\u3057\u305f\u308a\u3059\u308b\u969b\u306b\u3001\u51fa\u73fe\u3059\u308b\u5fcc\u307e\u308f\u3057\u304d\u30a8\u30e9\u30fc\nThe object 'DF__hogehoge' is dependent on column 'PIYO'.\n\u5909\u66f4\u3059\u308b\u30ab\u30e9\u30e0\u304c\u4e00\u3064\u306a\u3089\u307e\u3060\u3057\u3082\u3001\u8907\u6570\u306b\u306a\u3063\u305f\u5834\u5408\u3001\u3044\u3061\u3044\u3061\u5236\u7d04\u3092\u30c9\u30ed\u30c3\u30d7\u3059\u308b\u306e\u304c\u9762\u5012\u306a\u5834\u5408\u306b\n\u5909\u66f4\u3057\u305f\u3044\u30ab\u30e9\u30e0\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5236\u7d04\u3092\u4e00\u62ec\u53d6\u5f97\u3057\u3001\u30c9\u30ed\u30c3\u30d7\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\n DECLARE @listOfDFs TABLE (DF nvarchar(50))\n\nINSERT @listOfDFs(DF)\n    SELECT df_con.name\n    FROM sys.default_constraints df_con\n    INNER JOIN sys.columns sys_col\n    ON df_con.parent_object_id = sys_col.object_id\n    INNER JOIN sys.tables sys_tbl\n    ON df_con.parent_object_id = sys_tbl.object_id\n    WHERE  \n        sys_tbl.name = 'your_table_name'\n        AND sys_col.column_id = df_con.parent_column_id\n        AND sys_col.name in (\n            'hoge', 'fuga', 'piyo'\n        )\n\nDECLARE @DF nvarchar(50)\nDECLARE @sql nvarchar(200)\nDECLARE @i int\nSET @i = 0\n\nDECLARE DFcursor CURSOR\n    for select * from @listOfDFs\n\nOPEN DFcursor\n\nWHILE (@i < 3)\nBEGIN\n    FETCH NEXT FROM DFcursor into @DF\n    SELECT @DF\n    SET @sql = N'ALTER TABLE your_table_name DROP CONSTRAINT ' + @DF\n    EXEC sp_executesql @sql\n    SET @i = @i+1\nEND\n\nCLOSE DFcorsor \n\n\u30ab\u30e9\u30e0\u5b9a\u7fa9\u3092\u5909\u66f4\u3057\u305f\u308a\u3001\u30ab\u30e9\u30e0\u3092\u30c9\u30ed\u30c3\u30d7\u3057\u305f\u308a\u3059\u308b\u969b\u306b\u3001\u51fa\u73fe\u3059\u308b\u5fcc\u307e\u308f\u3057\u304d\u30a8\u30e9\u30fc\n\n` The object 'DF__hogehoge' is dependent on column 'PIYO'.`\n\n\u5909\u66f4\u3059\u308b\u30ab\u30e9\u30e0\u304c\u4e00\u3064\u306a\u3089\u307e\u3060\u3057\u3082\u3001\u8907\u6570\u306b\u306a\u3063\u305f\u5834\u5408\u3001\u3044\u3061\u3044\u3061\u5236\u7d04\u3092\u30c9\u30ed\u30c3\u30d7\u3059\u308b\u306e\u304c\u9762\u5012\u306a\u5834\u5408\u306b\n\u5909\u66f4\u3057\u305f\u3044\u30ab\u30e9\u30e0\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5236\u7d04\u3092\u4e00\u62ec\u53d6\u5f97\u3057\u3001\u30c9\u30ed\u30c3\u30d7\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\n\n\n```sql\n DECLARE @listOfDFs TABLE (DF nvarchar(50))\n\nINSERT @listOfDFs(DF)\n\tSELECT df_con.name\n\tFROM sys.default_constraints df_con\n\tINNER JOIN sys.columns sys_col\n    ON df_con.parent_object_id = sys_col.object_id\n\tINNER JOIN sys.tables sys_tbl\n    ON df_con.parent_object_id = sys_tbl.object_id\n\tWHERE  \n\t\tsys_tbl.name = 'your_table_name'\n\t\tAND sys_col.column_id = df_con.parent_column_id\n\t\tAND sys_col.name in (\n\t\t\t'hoge', 'fuga', 'piyo'\n\t\t)\n\nDECLARE @DF nvarchar(50)\nDECLARE @sql nvarchar(200)\nDECLARE @i int\nSET @i = 0\n\nDECLARE DFcursor CURSOR\n\tfor select * from @listOfDFs\n\nOPEN DFcursor\n\nWHILE (@i < 3)\nBEGIN\n\tFETCH NEXT FROM DFcursor into @DF\n\tSELECT @DF\n\tSET @sql = N'ALTER TABLE your_table_name DROP CONSTRAINT ' + @DF\n\tEXEC sp_executesql @sql\n\tSET @i = @i+1\nEND\n\nCLOSE DFcorsor \n```\n\n", "tags": ["SQLServer"]}