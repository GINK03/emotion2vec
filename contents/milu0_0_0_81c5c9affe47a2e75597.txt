{"context": " More than 1 year has passed since last update.\n\nOracle\u3067\u6570\u72ec\u3092\u89e3\u304f\nOracle\u3067\u6570\u72ec\u304c\u89e3\u3051\u308b\u3089\u3057\u3044\u304c\u8aad\u3093\u3067\u3082\u610f\u5473\u304c\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u7d30\u304b\u304f\u8abf\u3079\u3066\u307f\u308b\u3002\n\u4ee5\u4e0b\u306f11g\u4ee5\u4e0a\u306eoracle\u3067\u5b9f\u884c\u53ef\u80fd\u3067\u3059\u3002\n\n\u5143\u8a18\u4e8b\nhttps://technology.amis.nl/2009/10/13/oracle-rdbms-11gr2-solving-a-sudoku-using-recursive-subquery-factoring/\n\n\u554f\u984c\n\n\u3053\u306e\u554f\u984c\u3092\u5de6\u4e0a\u304b\u3089\u53f3\u65b9\u5411\u306b\u4e00\u884c\u305a\u3064\u4e26\u3079\u3066\u7a7a\u767d\u306f\u534a\u89d2\u30b9\u30da\u30fc\u30b9\u3068\u3044\u3063\u305f\u611f\u3058\u3067\u4e00\u3064\u306e\u6587\u5b57\u5217\u306b\u3057\u3066\u8868\u73fe\u3057\u307e\u3059\n'53  7    6  195    98    6 8   6   34  8 3  17   2   6 6    28    419  5    8  79'\n\n\u7b54\u3048\nwith x( s, ind ) as\n( select sud, instr( sud, ' ' )\n  from ( select '53  7    6  195    98    6 8   6   34  8 3  17   2   6 6    28    419  5    8  79' sud from dual )\n  union all\n  select substr( s, 1, ind - 1 ) || z || substr( s, ind + 1 )\n       , instr( s, ' ', ind + 1 )\n  from x\n     , ( select to_char( rownum ) z\n         from dual\n         connect by rownum <= 9\n       ) z\n  where ind > 0\n  and not exists ( select null\n                   from ( select rownum lp\n                          from dual\n                          connect by rownum <= 9\n                        )\n                   where z = substr( s, trunc( ( ind - 1 ) / 9 ) * 9 + lp, 1 )\n                   or    z = substr( s, mod( ind - 1, 9 ) - 8 + lp * 9, 1 )\n                   or    z = substr( s, mod( trunc( ( ind - 1 ) / 3 ), 3 ) * 3\n                                      + trunc( ( ind - 1 ) / 27 ) * 27 + lp\n                                      + trunc( ( lp - 1 ) / 3 ) * 6\n                                   , 1 )\n                 )\n)\nselect s\nfrom x\nwhere ind = 0\n\n\n\u89e3\u8aac\n\u4f55\u304c\u306a\u3093\u3084\u3089\u3088\u304f\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u307e\u305awith\u53e5\u304b\u3089\u8aac\u660e\u3092\u59cb\u3081\u307e\u3057\u3087\u3046\n\n\u518d\u5e30WITH\u53e5\nSQL\u3067\u518d\u5e30\u66f8\u3051\u308b\u3063\u3066\u3060\u3051\u3067\u3082\u3061\u3087\u3063\u3068\u9a5a\u304d\u3067\u3059\u304c\u4ee5\u4e0b\u3092\u5f15\u7528\u3057\u3066\u8aac\u660e\u3057\u3066\u307f\u307e\u3059\u3002\nhttp://www.oracle.com/technetwork/jp/articles/otnj-sql-image7-1525406-ja.html#a\n\u7c21\u5358\u306a\u518d\u5e30WITH\u53e5\u3092\u4f8b\u306b\u51fa\u3057\u307e\u3059\u3002\nWITH rec(STR) AS (\n  SELECT CAST('A' AS VARCHAR(20))\n  FROM dual\n  UNION ALL\n  SELECT CONCAT(STR,  'A')\n  FROM rec\n  WHERE LENGTH(STR) < 5)\nSELECT STR\nFROM rec;\n\n\u307e\u305awith rec(STR)\u306f\nrec\u306f\u30c6\u30fc\u30d6\u30eb\u540d STR\u306f\u30ab\u30e9\u30e0\u540d\u3067\u3059\u3002\n\u6b21\u306bwith\u53e5\u306e\u4e2d\u3092\u898b\u3066\u4e0b\u3055\u3044\u3002\nUNION ALL\u3067\u533a\u5207\u3089\u308c\u305f2\u3064\u306eSELECT\u30af\u30a8\u30ea\u304c\u3042\u308a\u307e\u3059\u304c\u3001\n\u305d\u308c\u305e\u308c\u524d\u8005\u3092\u975e\u518d\u5e30\u9805\u3002\u5f8c\u8005\u3092\u518d\u5e30\u9805\u3068\u547c\u3073\u307e\u3059\u3002\n\u518d\u5e30with\u53e5\u306f\u3001\u6700\u521d\u306b\u975e\u518d\u5e30\u9805\u306eselect\u3092\u5b9f\u884c\u3057\u3066\u3001\n\u305d\u306eselect\u6587\u306e\u7d50\u679c\u3092\u4f7f\u3063\u3066\u518d\u5e30\u9805\u306eselect\u3092\u5b9f\u884c\u3057\u3066\u3001\n\u305d\u306eselect\u6587\u306e\u7d50\u679c\u3092\u4f7f\u3063\u3066\u518d\u5e30\u9805\u306eselect\u3092\u5b9f\u884c\u3057\u3066\u30fb\u30fb\u30fb\u30fb\n\u7d50\u679c\u304c0\u4ef6\u306b\u306a\u308b\u307e\u3067\u5b9f\u884c\u3055\u308c\u7d9a\u3051\u307e\u3059\u3002\n\n\u3053\u306e\u5834\u5408\u6700\u521d\u306b\u975e\u518d\u5e30\u9805\u3067'A'\u3068\u3044\u3046\u4e00\u3064\u306e\u30ec\u30b3\u30fc\u30c9\u304c\u8fd4\u3055\u308c\u305d\u308c\u3092\u518d\u5e30\u9805\u306b\u6e21\u3057\u3001\n\u9577\u3055\u304c5\u3092\u8d85\u3048\u308b\u307e\u3067'A'\u3092\u7d50\u5408\u3057\u3066\u30ec\u30b3\u30fc\u30c9\u3092\u8fd4\u3057\u3066\u3068\u3044\u3046\u306e\u3092\u7e70\u308a\u8fd4\u3057\u307e\u3059\u3002\nWITH\u53e5\u304c\u306a\u304b\u306a\u304b\u3059\u3054\u3044\u3053\u3068\u304c\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u6570\u72ec\u3082\u89e3\u3051\u308b\u6c17\u304c\u3057\u3066\u304d\u307e\u3059\u3002\n\n\u518d\u5e30\u3092\u4f7f\u3063\u3066\u6570\u72ec\u3092\u89e3\u304f\n\u305d\u308c\u3067\u306f\u7c21\u5358\u306a\u30af\u30a8\u30ea\u304b\u3089\u9806\u756a\u306b\u8089\u4ed8\u3051\u3057\u3066\u56de\u7b54\u306e\u30af\u30a8\u30ea\u3092\u7d44\u307f\u4e0a\u3052\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u6570\u72ec\u306e\u89e3\u304d\u65b9\n\u5148\u982d\u306e\u30b9\u30da\u30fc\u30b9\u306b1-9\u306e\u6570\u5b57\u3092\u57cb\u3081\u305f\u3082\u306e\u3092\u4f5c\u308a\u3001\u305d\u308c\u304c\u6570\u72ec\u306e\u30eb\u30fc\u30eb\u306b\u5408\u308f\u306a\u3051\u308c\u3070\u7701\u304f\u3002\n\u3053\u308c\u3092\u7e70\u308a\u8fd4\u3057\u30b9\u30da\u30fc\u30b9\u304c0\u306b\u306a\u308c\u3070\u305d\u308c\u304c\u7b54\u3048\u3068\u306a\u308a\u307e\u3059\u3002\n\n1-9\u306e\u6570\u5b57\u8868\u3092\u4f5c\u308b\nSELECT rownum z\n   FROM dual\n   CONNECT BY rownum <= 9\n\nCONNECT\u53e5\u304c\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059\u304c\u3053\u308c\u3082\u518d\u8d77\u51e6\u7406\uff08\u968e\u5c64\u554f\u3044\u5408\u308f\u305b\uff09\u3092\u884c\u3048\u308b\u30af\u30a8\u30ea\u3067\u3059\u3002\nconnect by\u53e5\u306f\u305d\u306e\u5f8c\u306b\u7d9a\u304f\u6761\u4ef6\u304c\u6e80\u305f\u3055\u308c\u308b\u9650\u308a\u884c\u3092\u751f\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u3053\u308c\u306b\u3088\u308a9\u307e\u3067\u306e\u5024\u3092\u683c\u7d0d\u3057\u305f\u8868\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\n\n\u30b9\u30da\u30fc\u30b9\u3092\u6570\u5b57\u3067\u57cb\u3081\u308b\n\u518d\u8d77\u30af\u30a8\u30ea\u3092\u4f5c\u3063\u30662\u500b\u306e\u30b9\u30da\u30fc\u30b9\u30921\u304b2\u3067\u57cb\u3081\u308b\u30af\u30a8\u30ea\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\nWITH rec(s, ind) AS (\n  SELECT sud, instr(sud, ' ')\n  FROM (SELECT '[ ][ ]' sud FROM dual)\n  UNION ALL\n  SELECT\n    (substr(s, 1, ind - 1) || z || substr(s, ind + 1)),\n    instr(s, ' ', ind + 1)\n  FROM rec, (\n            SELECT to_char(rownum) z\n            FROM dual\n            CONNECT BY rownum <= 2\n          ) z\n  where ind > 0\n)\nSELECT s\nFROM rec\n\n\n\u5148\u307b\u3069\u4f5c\u3063\u305f\u6570\u5024\u8868\u306e\u6761\u4ef6\u3092\u5909\u66f4\u3057\u30662\u307e\u3067\u306e\u6570\u5024\u8868\u306b\u3057\u305f\u4e0a\u3067\u7b49\u4fa1\u7d50\u5408\u3057\u3001\n(substr(s, 1, ind - 1) || z || substr(s, ind + 1)),\u3053\u308c\u3067\u30b9\u30da\u30fc\u30b9\u306e\u524d\u5f8c\u3067\u533a\u5207\u3063\u3066\u6570\u5024\u8868\u306e\u6570\u5024\u3068\u7f6e\u63db\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u3067\u306f\u30b9\u30da\u30fc\u30b9\u304c\u6b8b\u3063\u305f\u7269\u3082\u8a08\u7b97\u7d50\u679c\u306b\u51fa\u3066\u3044\u308b\u306e\u3067\u5148\u307b\u3069\u306e\u30af\u30a8\u30ea\u306e\u6700\u5f8c\u306b\u6761\u4ef6\u3092\u8ffd\u52a0\u3057\u3066\u6392\u9664\u3057\u307e\u3057\u3087\u3046\nWHERE ind = 0;\n\n\u3053\u308c\u3067\u5168\u3066\u306e\u7a7a\u767d\u30de\u30b9\u30921-9\u3067\u57cb\u3081\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u4e0d\u6b63\u89e3\u306e\u6570\u72ec\u3092\u6392\u9664\u3059\u308b\n\u6570\u72ec\u306e\u30eb\u30fc\u30eb\u3092\u5fa9\u7fd2\u3057\u307e\u3059\u3002\n- \u6a2a\u306b1-9\u304c\u63c3\u3046\u3053\u3068\n- \u7e26\u306b1-9\u304c\u63c3\u3046\u3053\u3068\n- \u5de6\u4e0a\u304b\u3089\u9806\u306b3*3\u3067\u533a\u5207\u3063\u305f\u683c\u5b50\u306e\u305d\u308c\u305e\u308c\u306e\u90e8\u5c4b\u306b1-9\u307e\u3067\u306e\u6570\u5b57\u304c\u63c3\u3046\u3053\u3068\n\u3053\u308c\u3092\u6e80\u305f\u3059\u6570\u5b57\u3067\u30b9\u30da\u30fc\u30b9\u3092\u57cb\u3081\u3066\u3044\u3051\u3070\u30b4\u30fc\u30eb\u306b\u8fbf\u308a\u7740\u304f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\u3088\u3063\u3066WITH\u306e\u518d\u5e30\u9805\u306e\u90e8\u5206\u306f\u5148\u306e\u30eb\u30fc\u30eb\u3067\u57cb\u3081\u308b\u6570\u5b57\u3092\u9078\u629e\u3057\u4e14\u3064\u30b9\u30da\u30fc\u30b9\u304c\u307e\u3060\u6b8b\u3063\u3066\u3044\u308b\u5834\u5408\u3001\n\u7d50\u679c\u3092\u8fd4\u3057\u3066\u3044\u3051\u3070\u6700\u5f8c\u306b\u306f\u30b9\u30da\u30fc\u30b9\u3092\u542b\u307e\u306a\u3044\u30eb\u30fc\u30eb\u306b\u53cd\u3057\u306a\u3044\u6587\u5b57\u5217\u304c\u51fa\u6765\u4e0a\u304c\u308a\u3001\u518d\u5e30\u51e6\u7406\u304c\u7d42\u4e86\u3057\u307e\u3059\u3002\n\n\u30eb\u30fc\u30eb\u306b\u53cd\u3057\u306a\u3044\u6570\u5b57\u3067\u57cb\u3081\u308b\n\u5148\u307b\u30691-9\u306e\u6570\u5b57\u3067\u57cb\u3081\u308b\u65b9\u6cd5\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u304c\u3053\u308c\u3092\u300c\u30eb\u30fc\u30eb\u306b\u53cd\u3057\u306a\u3044\u6570\u5b57\u300d\u3067\u57cb\u3081\u308b\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\u307e\u305a\u6a2a\u5217\u3092\u691c\u8a3c\u3059\u308b\u30eb\u30fc\u30eb\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u5148\u307b\u3069\u307e\u3067\u306b\u4f5c\u3063\u305f\u30af\u30a8\u30ea\u3092\u5c11\u3057\u4fee\u6b63\u3057\u3066\u6570\u72ec\u306e\u4e00\u884c\u76ee\u306e\u6700\u5f8c\u3060\u3051\u57cb\u307e\u3063\u3066\u306a\u3044\u6587\u5b57\u5217\u3092\u4e0e\u3048\u3066\u307f\u307e\u3059\u3002\nWITH rec(s, ind) AS (\n  SELECT\n    sud,\n    instr(sud, ' ')\n  FROM (SELECT '12345678 ' sud\n        FROM dual)\n  UNION ALL\n  SELECT\n    (substr(s, 1, ind - 1) || z || substr(s, ind + 1)),\n    instr(s, ' ', ind + 1)\n  FROM rec, (\n              SELECT to_char(rownum) z\n              FROM dual\n              CONNECT BY rownum <= 9\n            ) z_t\n  WHERE ind > 0\n)\nSELECT s\nFROM rec\nWHERE ind = 0;\n\n\u3053\u308c\u3092\u3053\u306e\u307e\u307e\u5b9f\u884c\u3059\u308b\u30689\u5217\u306e\u7d50\u679c\u304c\u3067\u307e\u3059\u304c\u3053\u306e\u51858\u500b\u306f\u6a2a\u5217\u306e\u6761\u4ef6\u304c\u6e80\u305f\u305b\u3066\u3044\u307e\u305b\u3093\u3002\n\u3067\u306f\u3053\u308c\u3092\u6392\u9664\u3059\u308b\u3088\u3046\u306bNOT EXISTS\u3092\u4f7f\u3063\u3066\u6a2a\u5217\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u6570\u5b57\u3092\u9664\u5916\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nWITH rec(s, ind) AS (\n  SELECT\n    sud,\n    instr(sud, ' ')\n  FROM (SELECT '12345678 ' sud\n        FROM dual)\n  UNION ALL\n  SELECT\n    (substr(s, 1, ind - 1) || z || substr(s, ind + 1)),\n    instr(s, ' ', ind + 1)\n  FROM rec, (\n              SELECT to_char(rownum) z\n              FROM dual\n              CONNECT BY rownum <= 9\n            ) z_t\n  WHERE ind > 0 AND NOT EXISTS(SELECT NULL\n                               FROM (SELECT rownum lp\n                                     FROM dual\n                                     CONNECT BY rownum <= 9)\n                               WHERE z = substr(s, lp, 1))\n)\nSELECT s\nFROM rec\nWHERE ind = 0;\n\nNOT EXISTS\u306e\u4e2d\u306b\u307e\u305fCONNECT\u304c\u73fe\u308c\u3066\u3044\u307e\u3059\u304c\u3053\u308c\u3082\u307e\u305f1-9\u306e\u6570\u5b57\u306e\u8868\u3092\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002\n\u305d\u3057\u3066\u4f5c\u3063\u305f\u8868\u3092substr\u306e\u7b2c\u4e8c\u5f15\u6570\u306b\u5f53\u3066\u308b\u3053\u3068\u3067s(='123456789 ')\u304b\u3089\u4e00\u6587\u5b57\u305a\u3064\u53d6\u308a\u51fa\u3057\n\u5b58\u5728\u3059\u308b\u3082\u306e\u3092NOT EXISTS\u3067z_t\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u9664\u5916\u3057\u3066\u3044\u307e\u3059\u3002\n\u8a66\u3057\u306b\u8907\u6570\u306e\u6570\u5b57\u3092\u629c\u3044\u3066'1 34 678 '\u306a\u3069\u3067\u3082\u5b9f\u884c\u3057\u3066\u307f\u308b\u3068\u6761\u4ef6\u3092\u6e80\u305f\u3055\u306a\u3044\u6570\u5024\u306f\u9664\u5916\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u3042\u3068\u306f\u672c\u6765\u306e\u6570\u72ec\u306f\u8907\u6570\u884c\u3042\u308a\u3001\u66f4\u306b\u7e26\u6761\u4ef6\u3068\u683c\u5b50\u6761\u4ef6\u304c\u3042\u308b\u306e\u3067\u305d\u308c\u3092\u3053\u306eNOT EXISTS\u53e5\u306b\u76db\u308a\u8fbc\u3080\u3068\u6700\u521d\u306e\u30af\u30a8\u30ea\u306b\u305f\u3069\u308a\u7740\u3051\u307e\u3059\u3002\n\n\u307e\u3068\u3081\nSELECT\u6587\u3092\u3061\u3087\u308d\u3061\u3087\u308d\u66f8\u3044\u3066WEB\u30a2\u30d7\u30ea\u4f5c\u3063\u3066\u308b\u3060\u3051\u306e\u4eba\u9593\u306a\u306e\u3067\u3001\u3053\u3093\u306a\u3053\u3068\u304c\u51fa\u6765\u305f\u306e\u306f\u9a5a\u304d\u3067\u3057\u305f\u3002\nSQL\u5965\u304c\u6df1\u3044\u30fb\u30fb\u30fb\n# Oracle\u3067\u6570\u72ec\u3092\u89e3\u304f\nOracle\u3067\u6570\u72ec\u304c\u89e3\u3051\u308b\u3089\u3057\u3044\u304c\u8aad\u3093\u3067\u3082\u610f\u5473\u304c\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u7d30\u304b\u304f\u8abf\u3079\u3066\u307f\u308b\u3002\n\u4ee5\u4e0b\u306f11g\u4ee5\u4e0a\u306eoracle\u3067\u5b9f\u884c\u53ef\u80fd\u3067\u3059\u3002\n\n## \u5143\u8a18\u4e8b\nhttps://technology.amis.nl/2009/10/13/oracle-rdbms-11gr2-solving-a-sudoku-using-recursive-subquery-factoring/\n\n## \u554f\u984c\n![250px-sudoku-by-l2g-20050714_svg.png](https://qiita-image-store.s3.amazonaws.com/0/44786/3fb119b9-7d78-1426-d661-88b2423eec1c.png)\n\n\n\u3053\u306e\u554f\u984c\u3092\u5de6\u4e0a\u304b\u3089\u53f3\u65b9\u5411\u306b\u4e00\u884c\u305a\u3064\u4e26\u3079\u3066\u7a7a\u767d\u306f\u534a\u89d2\u30b9\u30da\u30fc\u30b9\u3068\u3044\u3063\u305f\u611f\u3058\u3067\u4e00\u3064\u306e\u6587\u5b57\u5217\u306b\u3057\u3066\u8868\u73fe\u3057\u307e\u3059\n`'53  7    6  195    98    6 8   6   34  8 3  17   2   6 6    28    419  5    8  79' `\n\n## \u7b54\u3048\n```sql\nwith x( s, ind ) as\n( select sud, instr( sud, ' ' )\n  from ( select '53  7    6  195    98    6 8   6   34  8 3  17   2   6 6    28    419  5    8  79' sud from dual )\n  union all\n  select substr( s, 1, ind - 1 ) || z || substr( s, ind + 1 )\n       , instr( s, ' ', ind + 1 )\n  from x\n     , ( select to_char( rownum ) z\n         from dual\n         connect by rownum <= 9\n       ) z\n  where ind > 0\n  and not exists ( select null\n                   from ( select rownum lp\n                          from dual\n                          connect by rownum <= 9\n                        )\n                   where z = substr( s, trunc( ( ind - 1 ) / 9 ) * 9 + lp, 1 )\n                   or    z = substr( s, mod( ind - 1, 9 ) - 8 + lp * 9, 1 )\n                   or    z = substr( s, mod( trunc( ( ind - 1 ) / 3 ), 3 ) * 3\n                                      + trunc( ( ind - 1 ) / 27 ) * 27 + lp\n                                      + trunc( ( lp - 1 ) / 3 ) * 6\n                                   , 1 )\n                 )\n)\nselect s\nfrom x\nwhere ind = 0\n```\n\n## \u89e3\u8aac\n\u4f55\u304c\u306a\u3093\u3084\u3089\u3088\u304f\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u307e\u305awith\u53e5\u304b\u3089\u8aac\u660e\u3092\u59cb\u3081\u307e\u3057\u3087\u3046\n### \u518d\u5e30WITH\u53e5\nSQL\u3067\u518d\u5e30\u66f8\u3051\u308b\u3063\u3066\u3060\u3051\u3067\u3082\u3061\u3087\u3063\u3068\u9a5a\u304d\u3067\u3059\u304c\u4ee5\u4e0b\u3092\u5f15\u7528\u3057\u3066\u8aac\u660e\u3057\u3066\u307f\u307e\u3059\u3002\nhttp://www.oracle.com/technetwork/jp/articles/otnj-sql-image7-1525406-ja.html#a\n\n\u7c21\u5358\u306a\u518d\u5e30WITH\u53e5\u3092\u4f8b\u306b\u51fa\u3057\u307e\u3059\u3002\n\n```sql\nWITH rec(STR) AS (\n  SELECT CAST('A' AS VARCHAR(20))\n  FROM dual\n  UNION ALL\n  SELECT CONCAT(STR,  'A')\n  FROM rec\n  WHERE LENGTH(STR) < 5)\nSELECT STR\nFROM rec;\n```\n\u307e\u305a`with rec(STR)`\u306f\nrec\u306f\u30c6\u30fc\u30d6\u30eb\u540d STR\u306f\u30ab\u30e9\u30e0\u540d\u3067\u3059\u3002\n\n\u6b21\u306bwith\u53e5\u306e\u4e2d\u3092\u898b\u3066\u4e0b\u3055\u3044\u3002\nUNION ALL\u3067\u533a\u5207\u3089\u308c\u305f2\u3064\u306eSELECT\u30af\u30a8\u30ea\u304c\u3042\u308a\u307e\u3059\u304c\u3001\n\u305d\u308c\u305e\u308c\u524d\u8005\u3092\u975e\u518d\u5e30\u9805\u3002\u5f8c\u8005\u3092\u518d\u5e30\u9805\u3068\u547c\u3073\u307e\u3059\u3002\n\u518d\u5e30with\u53e5\u306f\u3001\u6700\u521d\u306b\u975e\u518d\u5e30\u9805\u306eselect\u3092\u5b9f\u884c\u3057\u3066\u3001\n\u305d\u306eselect\u6587\u306e\u7d50\u679c\u3092\u4f7f\u3063\u3066\u518d\u5e30\u9805\u306eselect\u3092\u5b9f\u884c\u3057\u3066\u3001\n\u305d\u306eselect\u6587\u306e\u7d50\u679c\u3092\u4f7f\u3063\u3066\u518d\u5e30\u9805\u306eselect\u3092\u5b9f\u884c\u3057\u3066\u30fb\u30fb\u30fb\u30fb\n\u7d50\u679c\u304c0\u4ef6\u306b\u306a\u308b\u307e\u3067\u5b9f\u884c\u3055\u308c\u7d9a\u3051\u307e\u3059\u3002\n\n![0fd31a7a6b4f81631f6d5f1b776860c1.png](https://qiita-image-store.s3.amazonaws.com/0/44786/10b8b1c6-9f51-c39b-e077-4fb1fb9eb265.png)\n\n\n\u3053\u306e\u5834\u5408\u6700\u521d\u306b\u975e\u518d\u5e30\u9805\u3067'A'\u3068\u3044\u3046\u4e00\u3064\u306e\u30ec\u30b3\u30fc\u30c9\u304c\u8fd4\u3055\u308c\u305d\u308c\u3092\u518d\u5e30\u9805\u306b\u6e21\u3057\u3001\n\u9577\u3055\u304c5\u3092\u8d85\u3048\u308b\u307e\u3067'A'\u3092\u7d50\u5408\u3057\u3066\u30ec\u30b3\u30fc\u30c9\u3092\u8fd4\u3057\u3066\u3068\u3044\u3046\u306e\u3092\u7e70\u308a\u8fd4\u3057\u307e\u3059\u3002\n\nWITH\u53e5\u304c\u306a\u304b\u306a\u304b\u3059\u3054\u3044\u3053\u3068\u304c\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u6570\u72ec\u3082\u89e3\u3051\u308b\u6c17\u304c\u3057\u3066\u304d\u307e\u3059\u3002\n\n## \u518d\u5e30\u3092\u4f7f\u3063\u3066\u6570\u72ec\u3092\u89e3\u304f\n\n\u305d\u308c\u3067\u306f\u7c21\u5358\u306a\u30af\u30a8\u30ea\u304b\u3089\u9806\u756a\u306b\u8089\u4ed8\u3051\u3057\u3066\u56de\u7b54\u306e\u30af\u30a8\u30ea\u3092\u7d44\u307f\u4e0a\u3052\u3066\u3044\u304d\u307e\u3059\u3002\n\n### \u6570\u72ec\u306e\u89e3\u304d\u65b9\n\u5148\u982d\u306e\u30b9\u30da\u30fc\u30b9\u306b1-9\u306e\u6570\u5b57\u3092\u57cb\u3081\u305f\u3082\u306e\u3092\u4f5c\u308a\u3001\u305d\u308c\u304c\u6570\u72ec\u306e\u30eb\u30fc\u30eb\u306b\u5408\u308f\u306a\u3051\u308c\u3070\u7701\u304f\u3002\n\u3053\u308c\u3092\u7e70\u308a\u8fd4\u3057\u30b9\u30da\u30fc\u30b9\u304c0\u306b\u306a\u308c\u3070\u305d\u308c\u304c\u7b54\u3048\u3068\u306a\u308a\u307e\u3059\u3002\n\n### 1-9\u306e\u6570\u5b57\u8868\u3092\u4f5c\u308b\n```sql\nSELECT rownum z\n   FROM dual\n   CONNECT BY rownum <= 9\n```\nCONNECT\u53e5\u304c\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059\u304c\u3053\u308c\u3082\u518d\u8d77\u51e6\u7406\uff08\u968e\u5c64\u554f\u3044\u5408\u308f\u305b\uff09\u3092\u884c\u3048\u308b\u30af\u30a8\u30ea\u3067\u3059\u3002\nconnect by\u53e5\u306f\u305d\u306e\u5f8c\u306b\u7d9a\u304f\u6761\u4ef6\u304c\u6e80\u305f\u3055\u308c\u308b\u9650\u308a\u884c\u3092\u751f\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u3053\u308c\u306b\u3088\u308a9\u307e\u3067\u306e\u5024\u3092\u683c\u7d0d\u3057\u305f\u8868\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\n\n### \u30b9\u30da\u30fc\u30b9\u3092\u6570\u5b57\u3067\u57cb\u3081\u308b\n\u518d\u8d77\u30af\u30a8\u30ea\u3092\u4f5c\u3063\u30662\u500b\u306e\u30b9\u30da\u30fc\u30b9\u30921\u304b2\u3067\u57cb\u3081\u308b\u30af\u30a8\u30ea\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\n```sql\nWITH rec(s, ind) AS (\n  SELECT sud, instr(sud, ' ')\n  FROM (SELECT '[ ][ ]' sud FROM dual)\n  UNION ALL\n  SELECT\n    (substr(s, 1, ind - 1) || z || substr(s, ind + 1)),\n    instr(s, ' ', ind + 1)\n  FROM rec, (\n            SELECT to_char(rownum) z\n            FROM dual\n            CONNECT BY rownum <= 2\n          ) z\n  where ind > 0\n)\nSELECT s\nFROM rec\n```\n\n![1eb2fa9c98505ab20aba2774d99f94f5.png](https://qiita-image-store.s3.amazonaws.com/0/44786/824a0572-520a-f68e-2523-ccdf37ceffa3.png)\n\n\n\u5148\u307b\u3069\u4f5c\u3063\u305f\u6570\u5024\u8868\u306e\u6761\u4ef6\u3092\u5909\u66f4\u3057\u30662\u307e\u3067\u306e\u6570\u5024\u8868\u306b\u3057\u305f\u4e0a\u3067\u7b49\u4fa1\u7d50\u5408\u3057\u3001\n`(substr(s, 1, ind - 1) || z || substr(s, ind + 1)),`\u3053\u308c\u3067\u30b9\u30da\u30fc\u30b9\u306e\u524d\u5f8c\u3067\u533a\u5207\u3063\u3066\u6570\u5024\u8868\u306e\u6570\u5024\u3068\u7f6e\u63db\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u308c\u3067\u306f\u30b9\u30da\u30fc\u30b9\u304c\u6b8b\u3063\u305f\u7269\u3082\u8a08\u7b97\u7d50\u679c\u306b\u51fa\u3066\u3044\u308b\u306e\u3067\u5148\u307b\u3069\u306e\u30af\u30a8\u30ea\u306e\u6700\u5f8c\u306b\u6761\u4ef6\u3092\u8ffd\u52a0\u3057\u3066\u6392\u9664\u3057\u307e\u3057\u3087\u3046\n`WHERE ind = 0;`\n\n![cd46f12405488b344f772d0ff1533bed.png](https://qiita-image-store.s3.amazonaws.com/0/44786/97d33eab-1541-ee19-8ff4-19fd679daf46.png)\n\n\u3053\u308c\u3067\u5168\u3066\u306e\u7a7a\u767d\u30de\u30b9\u30921-9\u3067\u57cb\u3081\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n### \u4e0d\u6b63\u89e3\u306e\u6570\u72ec\u3092\u6392\u9664\u3059\u308b\n\u6570\u72ec\u306e\u30eb\u30fc\u30eb\u3092\u5fa9\u7fd2\u3057\u307e\u3059\u3002\n- \u6a2a\u306b1-9\u304c\u63c3\u3046\u3053\u3068\n- \u7e26\u306b1-9\u304c\u63c3\u3046\u3053\u3068\n- \u5de6\u4e0a\u304b\u3089\u9806\u306b3*3\u3067\u533a\u5207\u3063\u305f\u683c\u5b50\u306e\u305d\u308c\u305e\u308c\u306e\u90e8\u5c4b\u306b1-9\u307e\u3067\u306e\u6570\u5b57\u304c\u63c3\u3046\u3053\u3068\n\u3053\u308c\u3092\u6e80\u305f\u3059\u6570\u5b57\u3067\u30b9\u30da\u30fc\u30b9\u3092\u57cb\u3081\u3066\u3044\u3051\u3070\u30b4\u30fc\u30eb\u306b\u8fbf\u308a\u7740\u304f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3088\u3063\u3066WITH\u306e\u518d\u5e30\u9805\u306e\u90e8\u5206\u306f\u5148\u306e\u30eb\u30fc\u30eb\u3067\u57cb\u3081\u308b\u6570\u5b57\u3092\u9078\u629e\u3057\u4e14\u3064**\u30b9\u30da\u30fc\u30b9\u304c\u307e\u3060\u6b8b\u3063\u3066\u3044\u308b**\u5834\u5408\u3001\n\u7d50\u679c\u3092\u8fd4\u3057\u3066\u3044\u3051\u3070\u6700\u5f8c\u306b\u306f\u30b9\u30da\u30fc\u30b9\u3092\u542b\u307e\u306a\u3044\u30eb\u30fc\u30eb\u306b\u53cd\u3057\u306a\u3044\u6587\u5b57\u5217\u304c\u51fa\u6765\u4e0a\u304c\u308a\u3001\u518d\u5e30\u51e6\u7406\u304c\u7d42\u4e86\u3057\u307e\u3059\u3002\n\n### \u30eb\u30fc\u30eb\u306b\u53cd\u3057\u306a\u3044\u6570\u5b57\u3067\u57cb\u3081\u308b\n\u5148\u307b\u30691-9\u306e\u6570\u5b57\u3067\u57cb\u3081\u308b\u65b9\u6cd5\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u304c\u3053\u308c\u3092\u300c\u30eb\u30fc\u30eb\u306b\u53cd\u3057\u306a\u3044\u6570\u5b57\u300d\u3067\u57cb\u3081\u308b\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\n\u307e\u305a\u6a2a\u5217\u3092\u691c\u8a3c\u3059\u308b\u30eb\u30fc\u30eb\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u5148\u307b\u3069\u307e\u3067\u306b\u4f5c\u3063\u305f\u30af\u30a8\u30ea\u3092\u5c11\u3057\u4fee\u6b63\u3057\u3066\u6570\u72ec\u306e\u4e00\u884c\u76ee\u306e\u6700\u5f8c\u3060\u3051\u57cb\u307e\u3063\u3066\u306a\u3044\u6587\u5b57\u5217\u3092\u4e0e\u3048\u3066\u307f\u307e\u3059\u3002\n\n```sql\nWITH rec(s, ind) AS (\n  SELECT\n    sud,\n    instr(sud, ' ')\n  FROM (SELECT '12345678 ' sud\n        FROM dual)\n  UNION ALL\n  SELECT\n    (substr(s, 1, ind - 1) || z || substr(s, ind + 1)),\n    instr(s, ' ', ind + 1)\n  FROM rec, (\n              SELECT to_char(rownum) z\n              FROM dual\n              CONNECT BY rownum <= 9\n            ) z_t\n  WHERE ind > 0\n)\nSELECT s\nFROM rec\nWHERE ind = 0;\n```\n\u3053\u308c\u3092\u3053\u306e\u307e\u307e\u5b9f\u884c\u3059\u308b\u30689\u5217\u306e\u7d50\u679c\u304c\u3067\u307e\u3059\u304c\u3053\u306e\u51858\u500b\u306f\u6a2a\u5217\u306e\u6761\u4ef6\u304c\u6e80\u305f\u305b\u3066\u3044\u307e\u305b\u3093\u3002\n\u3067\u306f\u3053\u308c\u3092\u6392\u9664\u3059\u308b\u3088\u3046\u306bNOT EXISTS\u3092\u4f7f\u3063\u3066\u6a2a\u5217\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u6570\u5b57\u3092\u9664\u5916\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```sql\nWITH rec(s, ind) AS (\n  SELECT\n    sud,\n    instr(sud, ' ')\n  FROM (SELECT '12345678 ' sud\n        FROM dual)\n  UNION ALL\n  SELECT\n    (substr(s, 1, ind - 1) || z || substr(s, ind + 1)),\n    instr(s, ' ', ind + 1)\n  FROM rec, (\n              SELECT to_char(rownum) z\n              FROM dual\n              CONNECT BY rownum <= 9\n            ) z_t\n  WHERE ind > 0 AND NOT EXISTS(SELECT NULL\n                               FROM (SELECT rownum lp\n                                     FROM dual\n                                     CONNECT BY rownum <= 9)\n                               WHERE z = substr(s, lp, 1))\n)\nSELECT s\nFROM rec\nWHERE ind = 0;\n```\nNOT EXISTS\u306e\u4e2d\u306b\u307e\u305fCONNECT\u304c\u73fe\u308c\u3066\u3044\u307e\u3059\u304c\u3053\u308c\u3082\u307e\u305f1-9\u306e\u6570\u5b57\u306e\u8868\u3092\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002\n\u305d\u3057\u3066\u4f5c\u3063\u305f\u8868\u3092substr\u306e\u7b2c\u4e8c\u5f15\u6570\u306b\u5f53\u3066\u308b\u3053\u3068\u3067s(='123456789 ')\u304b\u3089\u4e00\u6587\u5b57\u305a\u3064\u53d6\u308a\u51fa\u3057\n\u5b58\u5728\u3059\u308b\u3082\u306e\u3092NOT EXISTS\u3067z_t\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u9664\u5916\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u8a66\u3057\u306b\u8907\u6570\u306e\u6570\u5b57\u3092\u629c\u3044\u3066'1 34 678 '\u306a\u3069\u3067\u3082\u5b9f\u884c\u3057\u3066\u307f\u308b\u3068\u6761\u4ef6\u3092\u6e80\u305f\u3055\u306a\u3044\u6570\u5024\u306f\u9664\u5916\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n![ae82487f8f00d59648701883d46640d2.png](https://qiita-image-store.s3.amazonaws.com/0/44786/6d535bf0-e109-ce55-bb71-0655cebc8bfd.png)\n\n\u3042\u3068\u306f\u672c\u6765\u306e\u6570\u72ec\u306f\u8907\u6570\u884c\u3042\u308a\u3001\u66f4\u306b\u7e26\u6761\u4ef6\u3068\u683c\u5b50\u6761\u4ef6\u304c\u3042\u308b\u306e\u3067\u305d\u308c\u3092\u3053\u306eNOT EXISTS\u53e5\u306b\u76db\u308a\u8fbc\u3080\u3068\u6700\u521d\u306e\u30af\u30a8\u30ea\u306b\u305f\u3069\u308a\u7740\u3051\u307e\u3059\u3002\n\n## \u307e\u3068\u3081\nSELECT\u6587\u3092\u3061\u3087\u308d\u3061\u3087\u308d\u66f8\u3044\u3066WEB\u30a2\u30d7\u30ea\u4f5c\u3063\u3066\u308b\u3060\u3051\u306e\u4eba\u9593\u306a\u306e\u3067\u3001\u3053\u3093\u306a\u3053\u3068\u304c\u51fa\u6765\u305f\u306e\u306f\u9a5a\u304d\u3067\u3057\u305f\u3002\nSQL\u5965\u304c\u6df1\u3044\u30fb\u30fb\u30fb\n\n\n\n", "tags": ["SQL", "oracle11g"]}