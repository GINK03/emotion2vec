{"context": "\n\u52d5\u4f5c\u74b0\u5883\nC++ Builder XE4\n\n\n\u4ee5\u4e0b\u3092\u8a66\u3057\u305f\u3002\n\n1\u3064\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306bForm1\u3068Form2\u304c\u3042\u308b\nForm1\u304b\u3089Form2\u306bWindow Message\u3092\u9001\u4fe1\u3059\u308b\n\n\ncode\n\nUnit1.h\n\nUnit1.h\n//---------------------------------------------------------------------------\n\n#ifndef Unit1H\n#define Unit1H\n//---------------------------------------------------------------------------\n#include <System.Classes.hpp>\n#include <Vcl.Controls.hpp>\n#include <Vcl.StdCtrls.hpp>\n#include <Vcl.Forms.hpp>\n//---------------------------------------------------------------------------\n\n#define WM_SHOW_MSG2 (WM_USER + 1)\n\nclass TForm1 : public TForm\n{\n__published:\n    void __fastcall FormShow(TObject *Sender);\nprivate:\n    String m_message;\npublic:\n    String __fastcall GetForm1Message(void);\n\n    __fastcall TForm1(TComponent* Owner);\n};\n//---------------------------------------------------------------------------\nextern PACKAGE TForm1 *Form1;\n//---------------------------------------------------------------------------\n#endif\n\n\n\nUnit1.cpp\n\nUnit1.cpp\n//---------------------------------------------------------------------------\n\n#include <vcl.h>\n#pragma hdrstop\n\n#include \"Unit1.h\"\n#include \"Unit2.h\"\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm1 *Form1;\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner)\n    : TForm(Owner)\n{\n    m_message = L\"\";\n}\n//---------------------------------------------------------------------------\nvoid __fastcall TForm1::FormShow(TObject *Sender)\n{\n    m_message = L\"ready\";\n\n    Form2->ShowMessage();\n\n    // PostMessage(Handle, WM_SHOW_MSG2, 0, 0);\n    PostMessage(Form2->Handle, WM_SHOW_MSG2, 0, 0);\n}\n//---------------------------------------------------------------------------\n\nString __fastcall TForm1::GetForm1Message(void)\n{\n    return m_message;\n}\n\n\n\nUnit2.h\n\nUnit2.h\n//---------------------------------------------------------------------------\n\n#ifndef Unit2H\n#define Unit2H\n//---------------------------------------------------------------------------\n#include <System.Classes.hpp>\n#include <Vcl.Controls.hpp>\n#include <Vcl.StdCtrls.hpp>\n#include <Vcl.Forms.hpp>\n//---------------------------------------------------------------------------\n\n#define WM_SHOW_MSG2 (WM_APP + 1)\n\nclass TForm2 : public TForm\n{\n__published:\nprivate:\npublic:\n    void __fastcall WMshowMessage2(TMessage &msg);\n    void __fastcall ShowMessage(void);\n\n    __fastcall TForm2(TComponent* Owner);\n\nBEGIN_MESSAGE_MAP\n    MESSAGE_HANDLER(WM_SHOW_MSG2, TMessage, WMshowMessage2);\nEND_MESSAGE_MAP(TForm)\n};\n//---------------------------------------------------------------------------\nextern PACKAGE TForm2 *Form2;\n//---------------------------------------------------------------------------\n#endif\n\n\n\nUnit2.cpp\n\nUnit2.cpp\n//---------------------------------------------------------------------------\n\n#include <vcl.h>\n#pragma hdrstop\n\n#include \"Unit2.h\"\n#include \"Unit1.h\"\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm2 *Form2;\n//---------------------------------------------------------------------------\n__fastcall TForm2::TForm2(TComponent* Owner)\n    : TForm(Owner)\n{\n    String msg1 = L\"Line16: msg1=\" + Form1->GetForm1Message();\n    OutputDebugString(msg1.c_str());\n}\n\nvoid __fastcall TForm2::ShowMessage(void)\n{\n    String msg1 = L\"Line21: msg1=\" + Form1->GetForm1Message();\n    OutputDebugString(msg1.c_str());\n}\n\nvoid __fastcall TForm2::WMshowMessage2(TMessage &msg)\n{\n    String msg1 = L\"Line28: msg1=\" + Form1->GetForm1Message();\n    OutputDebugString(msg1.c_str());\n}\n\n//---------------------------------------------------------------------------\n\n\n\n\u5b9f\u884c\u7d50\u679c\n\n\u30a4\u30d9\u30f3\u30c8\u30ed\u30b0\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b: Line16: msg1= \u30d7\u30ed\u30bb\u30b9 Project1.exe (2344)\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b: Line21: msg1=ready \u30d7\u30ed\u30bb\u30b9 Project1.exe (2344)\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b: Line28: msg1=ready \u30d7\u30ed\u30bb\u30b9 Project1.exe (2344)\n\n\n\n\u5099\u8003\nForm1\u306b\u3066Form2->Handle\u3092\u4f7f\u3046\u5834\u5408\u3001#include \"Unit2.h\"\u3068\u3059\u308b\u305f\u3081\u3001\u4f9d\u5b58\u95a2\u4fc2\u304c\u751f\u307e\u308c\u308b\u3002\u305d\u3053\u3067Window Message\u3092\u4f7f\u3063\u3066\u3082\u5229\u70b9\u306f\u306a\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n#include \"Unit2.h\"\u305b\u305a\u306bWindow Message\u3092\u4f7f\u3046\u9650\u308a\u306f\u4f9d\u5b58\u95a2\u4fc2\u306f\u5207\u308a\u96e2\u3057\u3067\u304d\u305d\u3046\u3002\n\u305d\u306e\u5834\u5408\u306f\u3001FindWindow\u3092\u4f7f\u3063\u3066Form2\u306eHWND\u578b\u5909\u6570\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3002\n```txt:\u52d5\u4f5c\u74b0\u5883\nC++ Builder XE4\n```\n\n\u4ee5\u4e0b\u3092\u8a66\u3057\u305f\u3002\n\n- 1\u3064\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306bForm1\u3068Form2\u304c\u3042\u308b\n- Form1\u304b\u3089Form2\u306bWindow Message\u3092\u9001\u4fe1\u3059\u308b\n\n## code\n\n### Unit1.h\n\n```Unit1.h\n//---------------------------------------------------------------------------\n\n#ifndef Unit1H\n#define Unit1H\n//---------------------------------------------------------------------------\n#include <System.Classes.hpp>\n#include <Vcl.Controls.hpp>\n#include <Vcl.StdCtrls.hpp>\n#include <Vcl.Forms.hpp>\n//---------------------------------------------------------------------------\n\n#define WM_SHOW_MSG2 (WM_USER + 1)\n\nclass TForm1 : public TForm\n{\n__published:\n    void __fastcall FormShow(TObject *Sender);\nprivate:\n    String m_message;\npublic:\n    String __fastcall GetForm1Message(void);\n\n    __fastcall TForm1(TComponent* Owner);\n};\n//---------------------------------------------------------------------------\nextern PACKAGE TForm1 *Form1;\n//---------------------------------------------------------------------------\n#endif\n```\n\n### Unit1.cpp\n\n```Unit1.cpp\n//---------------------------------------------------------------------------\n\n#include <vcl.h>\n#pragma hdrstop\n\n#include \"Unit1.h\"\n#include \"Unit2.h\"\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm1 *Form1;\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner)\n    : TForm(Owner)\n{\n    m_message = L\"\";\n}\n//---------------------------------------------------------------------------\nvoid __fastcall TForm1::FormShow(TObject *Sender)\n{\n\tm_message = L\"ready\";\n\n\tForm2->ShowMessage();\n\n\t// PostMessage(Handle, WM_SHOW_MSG2, 0, 0);\n\tPostMessage(Form2->Handle, WM_SHOW_MSG2, 0, 0);\n}\n//---------------------------------------------------------------------------\n\nString __fastcall TForm1::GetForm1Message(void)\n{\n\treturn m_message;\n}\n```\n\n### Unit2.h\n\n```Unit2.h\n//---------------------------------------------------------------------------\n\n#ifndef Unit2H\n#define Unit2H\n//---------------------------------------------------------------------------\n#include <System.Classes.hpp>\n#include <Vcl.Controls.hpp>\n#include <Vcl.StdCtrls.hpp>\n#include <Vcl.Forms.hpp>\n//---------------------------------------------------------------------------\n\n#define WM_SHOW_MSG2 (WM_APP + 1)\n\nclass TForm2 : public TForm\n{\n__published:\nprivate:\npublic:\n    void __fastcall WMshowMessage2(TMessage &msg);\n    void __fastcall ShowMessage(void);\n\n    __fastcall TForm2(TComponent* Owner);\n\nBEGIN_MESSAGE_MAP\n    MESSAGE_HANDLER(WM_SHOW_MSG2, TMessage, WMshowMessage2);\nEND_MESSAGE_MAP(TForm)\n};\n//---------------------------------------------------------------------------\nextern PACKAGE TForm2 *Form2;\n//---------------------------------------------------------------------------\n#endif\n```\n\n### Unit2.cpp\n\n```Unit2.cpp\n//---------------------------------------------------------------------------\n\n#include <vcl.h>\n#pragma hdrstop\n\n#include \"Unit2.h\"\n#include \"Unit1.h\"\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm2 *Form2;\n//---------------------------------------------------------------------------\n__fastcall TForm2::TForm2(TComponent* Owner)\n    : TForm(Owner)\n{\n\tString msg1 = L\"Line16: msg1=\" + Form1->GetForm1Message();\n\tOutputDebugString(msg1.c_str());\n}\n\nvoid __fastcall TForm2::ShowMessage(void)\n{\n    String msg1 = L\"Line21: msg1=\" + Form1->GetForm1Message();\n    OutputDebugString(msg1.c_str());\n}\n\nvoid __fastcall TForm2::WMshowMessage2(TMessage &msg)\n{\n    String msg1 = L\"Line28: msg1=\" + Form1->GetForm1Message();\n    OutputDebugString(msg1.c_str());\n}\n\n//---------------------------------------------------------------------------\n```\n\n### \u5b9f\u884c\u7d50\u679c\n\n```txt:\u30a4\u30d9\u30f3\u30c8\u30ed\u30b0\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b: Line16: msg1= \u30d7\u30ed\u30bb\u30b9 Project1.exe (2344)\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b: Line21: msg1=ready \u30d7\u30ed\u30bb\u30b9 Project1.exe (2344)\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b: Line28: msg1=ready \u30d7\u30ed\u30bb\u30b9 Project1.exe (2344)\n```\n\n### \u5099\u8003\n\nForm1\u306b\u3066Form2->Handle\u3092\u4f7f\u3046\u5834\u5408\u3001`#include \"Unit2.h\"`\u3068\u3059\u308b\u305f\u3081\u3001\u4f9d\u5b58\u95a2\u4fc2\u304c\u751f\u307e\u308c\u308b\u3002\u305d\u3053\u3067Window Message\u3092\u4f7f\u3063\u3066\u3082\u5229\u70b9\u306f\u306a\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n`#include \"Unit2.h\"`\u305b\u305a\u306bWindow Message\u3092\u4f7f\u3046\u9650\u308a\u306f\u4f9d\u5b58\u95a2\u4fc2\u306f\u5207\u308a\u96e2\u3057\u3067\u304d\u305d\u3046\u3002\n\u305d\u306e\u5834\u5408\u306f\u3001FindWindow\u3092\u4f7f\u3063\u3066Form2\u306eHWND\u578b\u5909\u6570\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3002\n\n\n", "tags": ["cppBuilder", "windowMessage"]}