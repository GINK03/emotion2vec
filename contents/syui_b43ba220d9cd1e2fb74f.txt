{"context": "Docker\u304b\u3089GUI\u30a2\u30d7\u30ea\u3092\u4f7f\u3046\u65b9\u6cd5\u306b\u306f\u3044\u304f\u3064\u304b\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\u4e00\u3064\u306f\u3001VNC\u7d4c\u7531\u3067\u3001\u3082\u3046\u4e00\u3064\u306fSSH\u7d4c\u7531\u3067\u3059\u3002\nLinux\u3067Windows\u30a2\u30d7\u30ea\u3092\u52d5\u304b\u3057\u305f\u3044\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u79c1\u306f\u3001\u305d\u3093\u306a\u6642\u3001Wine\u3067\u52d5\u304b\u3057\u3066\u3001VNC\u3084SSH\u3067\u63a5\u7d9a\u3059\u308b\u306e\u3067\u3059\u304c(\u307b\u3068\u3093\u3069\u5916\u90e8\u30b5\u30fc\u30d0\u30fc\u3067\u52d5\u304b\u3057\u3066\u308b\u306e\u3067)\u3001Docker Image\u3082\u4f7f\u3044\u307e\u3059\u3002\n\u30db\u30b9\u30c8\u306fArch Linux\u3067\u3044\u304d\u307e\u3059\u3002\u30b2\u30b9\u30c8\u306fUbuntu\u3092\u4f7f\u3044\u307e\u3059\u3002\n\nDocker\u3067\u8d77\u52d5\u3057\u305fGUI\u30a2\u30d7\u30ea\u306b\u63a5\u7d9a\u3059\u308b\u307e\u3067\n\nHost,ArchLinux\n$ sudo pacman -S docker lxc openssh\n\n$ docker -v\n\n$ sudo cp /usr/lib/systemd/system/docker.service /etc/systemd/system/docker.service\n\n$ sudo mkdir -p /etc/systemd/system/docker.service.d/\n\n$ sudo vim /etc/systemd/system/docker.service.d/lxc.conf\n[Service]\nExecStart=\nExecStart=/usr/bin/docker -d -e lxc\n\n$ sudo vim /etc/ssh/sshd_config\nAllowAgentForwarding yes\nAllowTcpForwarding yes\nGatewayPorts no\nX11Forwarding yes\nX11DisplayOffset 10\nX11UseLocalhost yes\n\n$ sudo systemctl start docker\n$ sudo systemctl start sshd\n\n\nDockerfile\u3092\u66f8\u3044\u3066\u304d\u307e\u3059\u3002\n\n~/docker/firefox/Dockerfile\nFROM ubuntu:14.04\n\nRUN apt-get update && apt-get install -y firefox\n\n# Replace 1000 with your user / group id\nRUN export uid=1000 gid=1000 && \\\n    mkdir -p /home/developer && \\\n    echo \"developer:x:${uid}:${gid}:Developer,,,:/home/developer:/bin/bash\" >> /etc/passwd && \\\n    echo \"developer:x:${uid}:\" >> /etc/group && \\\n    echo \"developer ALL=(ALL) NOPASSWD: ALL\" > /etc/sudoers.d/developer && \\\n    chmod 0440 /etc/sudoers.d/developer && \\\n    chown ${uid}:${gid} -R /home/developer\n\nUSER developer\nENV HOME /home/developer\nCMD /usr/bin/firefox\n\n\n\u53c2\u8003:http://postd.cc/running-gui-apps-with-docker\n\u8d77\u52d5\u65b9\u6cd5\u306f\u3053\u3093\u306a\u611f\u3058\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3044\u307e\u3059\u3002\n$ cd ~/docker/firefox\n\n$ sudo docker build -t firefox .\n\n# Guest:Ubuntu\n$ sudo docker run -ti --rm \\\n  -e DISPLAY=$DISPLAY \\\n  -v /tmp/.X11-unix:/tmp/.X11-unix \\\n  firefox\n\ndeveloper@docker $ firefox\n\n\u6b21\u306b\u3001Wine\u7528\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\n~/docker/wine/Dockerfile\nFROM ubuntu:14.04\n\nRUN dpkg --add-architecture i386\nRUN apt-get update -y\nRUN apt-get install --no-install-recommends software-properties-common -y\nRUN add-apt-repository -y ppa:ubuntu-wine/ppa\nRUN apt-get update -y\nRUN apt-get install wine1.7 winetricks winbind -y\n\nRUN cp /usr/share/zoneinfo/Asia/Tokyo /etc/localtime\nRUN apt-get install language-pack-ja -y && update-locale LANG=ja_JP.UTF-8\nRUN apt-get install fonts-takao fonts-takao-gothic fonts-takao-pgothic fonts-takao-mincho\nRUN sed -i -e 's/^XKBMODEL=\"pc105\"/XKBMODEL=\"jp106\"/g' /etc/default/keyboard\nRUN sed -i -e 's/^XKBLAYOUT=\"us\"/XKBLAYOUT=\"jp\"/g' /etc/default/keyboard\nRUN apt-get purge software-properties-common -y\nRUN apt-get autoclean -y\nRUN export uid=1000 gid=1000 && \\\n    mkdir -p /home/wineuser && \\\n    echo \"wineuser:x:${uid}:${gid}:Developer,,,:/home/wineuser:/bin/bash\" >> /etc/passwd && \\\n    echo \"wineuser:x:${uid}:\" >> /etc/group && \\\n    echo \"wineuser ALL=(ALL) NOPASSWD: ALL\" > /etc/sudoers.d/wineuser && \\\n    chmod 0440 /etc/sudoers.d/wineuser && \\\n    chown ${uid}:${gid} -R /home/wineuser\n\nUSER wineuser\nENV HOME /home/wineuser\nENV LANG ja_JP.UTF-8\nWORKDIR /home/wineuser\nCMD /bin/bash\n\n\n\u5f8c\u306f\u3001\u5148\u307b\u3069\u3068\u540c\u3058\u3088\u3046\u306bDocker Build, Run\u3057\u307e\u3059\u3002\n$ cd ~/docker/wine\n\n$ sudo docker build -t wine:base .\n\n# `lxc.network.hwaddr = ac:ac:ac:11:22:33`\u3067\u306f\u3001\u30a2\u30d7\u30ea\u306b\u3088\u3063\u3066\u30cf\u30fc\u30c9\u56fa\u6709\u306e\u756a\u53f7\u304c\u8aad\u307f\u8fbc\u307e\u308c\u308b\u3053\u3068\u304c\u3042\u308b\u306e\u3067\u4fbf\u5b9c\u4e0a\u6307\u5b9a\u3057\u307e\u3059\u3002\n$ sudo docker run -ti --rm --lxc-conf=\"lxc.network.hwaddr = ac:ac:ac:11:22:33\" \\\n  -e XMODIFIERS=\"@im=fcitx\" \\\n  -e GTK_IM_MODULE=fcitx \\\n  -e QT_IM_MODULE=fcitx \\\n  -e XIMPROGRAM=fcitx \\\n  -e LC_CTYPE=ja_JP.UTF-8 \\\n  -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix \\\n  wine:base\n\nwineuser@docker $ wget http://cdn.line-apps.com/client/win/new/LineInst.exe\nwineuser@docker $ wine LineInst.exe\n--------------------------------------------\n$ sudo docker ps\ncommitID\n\n$ sudo docker commit ${commitID} wine:line\n$ sudo docker images\nwine line\nwine base\n\n$  sudo docker run -ti --rm --lxc-conf=\"lxc.network.hwaddr = ac:ac:ac:11:22:33\" \\\n  -e XMODIFIERS=\"@im=fcitx\" \\\n  -e GTK_IM_MODULE=fcitx \\\n  -e QT_IM_MODULE=fcitx \\\n  -e XIMPROGRAM=fcitx \\\n  -e LC_CTYPE=ja_JP.UTF-8 \\\n  -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix \\\n  wine:line\n\n\u53c2\u8003:http://netbuffalo.doorblog.jp/archives/5001669.html\n\nDocker\u304b\u3089GUI\u30a2\u30d7\u30ea\u3092\u4f7f\u3046\u65b9\u6cd5\u306b\u306f\u3044\u304f\u3064\u304b\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\u4e00\u3064\u306f\u3001VNC\u7d4c\u7531\u3067\u3001\u3082\u3046\u4e00\u3064\u306fSSH\u7d4c\u7531\u3067\u3059\u3002\n\nLinux\u3067Windows\u30a2\u30d7\u30ea\u3092\u52d5\u304b\u3057\u305f\u3044\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u79c1\u306f\u3001\u305d\u3093\u306a\u6642\u3001Wine\u3067\u52d5\u304b\u3057\u3066\u3001VNC\u3084SSH\u3067\u63a5\u7d9a\u3059\u308b\u306e\u3067\u3059\u304c(\u307b\u3068\u3093\u3069\u5916\u90e8\u30b5\u30fc\u30d0\u30fc\u3067\u52d5\u304b\u3057\u3066\u308b\u306e\u3067)\u3001Docker Image\u3082\u4f7f\u3044\u307e\u3059\u3002\n\n\u30db\u30b9\u30c8\u306fArch Linux\u3067\u3044\u304d\u307e\u3059\u3002\u30b2\u30b9\u30c8\u306fUbuntu\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n## Docker\u3067\u8d77\u52d5\u3057\u305fGUI\u30a2\u30d7\u30ea\u306b\u63a5\u7d9a\u3059\u308b\u307e\u3067\n\n```bash:Host,ArchLinux\n$ sudo pacman -S docker lxc openssh\n\n$ docker -v\n\n$ sudo cp /usr/lib/systemd/system/docker.service /etc/systemd/system/docker.service\n\n$ sudo mkdir -p /etc/systemd/system/docker.service.d/\n\n$ sudo vim /etc/systemd/system/docker.service.d/lxc.conf\n[Service]\nExecStart=\nExecStart=/usr/bin/docker -d -e lxc\n\n$ sudo vim /etc/ssh/sshd_config\nAllowAgentForwarding yes\nAllowTcpForwarding yes\nGatewayPorts no\nX11Forwarding yes\nX11DisplayOffset 10\nX11UseLocalhost yes\n\n$ sudo systemctl start docker\n$ sudo systemctl start sshd\n```\n\nDockerfile\u3092\u66f8\u3044\u3066\u304d\u307e\u3059\u3002\n\n```bash:~/docker/firefox/Dockerfile\nFROM ubuntu:14.04\n\nRUN apt-get update && apt-get install -y firefox\n\n# Replace 1000 with your user / group id\nRUN export uid=1000 gid=1000 && \\\n    mkdir -p /home/developer && \\\n    echo \"developer:x:${uid}:${gid}:Developer,,,:/home/developer:/bin/bash\" >> /etc/passwd && \\\n    echo \"developer:x:${uid}:\" >> /etc/group && \\\n    echo \"developer ALL=(ALL) NOPASSWD: ALL\" > /etc/sudoers.d/developer && \\\n    chmod 0440 /etc/sudoers.d/developer && \\\n    chown ${uid}:${gid} -R /home/developer\n\nUSER developer\nENV HOME /home/developer\nCMD /usr/bin/firefox\n```\n\n\u53c2\u8003:http://postd.cc/running-gui-apps-with-docker\n\n\u8d77\u52d5\u65b9\u6cd5\u306f\u3053\u3093\u306a\u611f\u3058\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n```bash:\n$ cd ~/docker/firefox\n\n$ sudo docker build -t firefox .\n\n# Guest:Ubuntu\n$ sudo docker run -ti --rm \\\n  -e DISPLAY=$DISPLAY \\\n  -v /tmp/.X11-unix:/tmp/.X11-unix \\\n  firefox\n\ndeveloper@docker $ firefox\n```\n\n\u6b21\u306b\u3001Wine\u7528\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\n```bash:~/docker/wine/Dockerfile\nFROM ubuntu:14.04\n\nRUN dpkg --add-architecture i386\nRUN apt-get update -y\nRUN apt-get install --no-install-recommends software-properties-common -y\nRUN add-apt-repository -y ppa:ubuntu-wine/ppa\nRUN apt-get update -y\nRUN apt-get install wine1.7 winetricks winbind -y\n\nRUN cp /usr/share/zoneinfo/Asia/Tokyo /etc/localtime\nRUN apt-get install language-pack-ja -y && update-locale LANG=ja_JP.UTF-8\nRUN apt-get install fonts-takao fonts-takao-gothic fonts-takao-pgothic fonts-takao-mincho\nRUN sed -i -e 's/^XKBMODEL=\"pc105\"/XKBMODEL=\"jp106\"/g' /etc/default/keyboard\nRUN sed -i -e 's/^XKBLAYOUT=\"us\"/XKBLAYOUT=\"jp\"/g' /etc/default/keyboard\nRUN apt-get purge software-properties-common -y\nRUN apt-get autoclean -y\nRUN export uid=1000 gid=1000 && \\\n    mkdir -p /home/wineuser && \\\n    echo \"wineuser:x:${uid}:${gid}:Developer,,,:/home/wineuser:/bin/bash\" >> /etc/passwd && \\\n    echo \"wineuser:x:${uid}:\" >> /etc/group && \\\n    echo \"wineuser ALL=(ALL) NOPASSWD: ALL\" > /etc/sudoers.d/wineuser && \\\n    chmod 0440 /etc/sudoers.d/wineuser && \\\n    chown ${uid}:${gid} -R /home/wineuser\n\nUSER wineuser\nENV HOME /home/wineuser\nENV LANG ja_JP.UTF-8\nWORKDIR /home/wineuser\nCMD /bin/bash\n```\n\n\u5f8c\u306f\u3001\u5148\u307b\u3069\u3068\u540c\u3058\u3088\u3046\u306bDocker Build, Run\u3057\u307e\u3059\u3002\n\n```bash\n$ cd ~/docker/wine\n\n$ sudo docker build -t wine:base .\n\n# `lxc.network.hwaddr = ac:ac:ac:11:22:33`\u3067\u306f\u3001\u30a2\u30d7\u30ea\u306b\u3088\u3063\u3066\u30cf\u30fc\u30c9\u56fa\u6709\u306e\u756a\u53f7\u304c\u8aad\u307f\u8fbc\u307e\u308c\u308b\u3053\u3068\u304c\u3042\u308b\u306e\u3067\u4fbf\u5b9c\u4e0a\u6307\u5b9a\u3057\u307e\u3059\u3002\n$ sudo docker run -ti --rm --lxc-conf=\"lxc.network.hwaddr = ac:ac:ac:11:22:33\" \\\n  -e XMODIFIERS=\"@im=fcitx\" \\\n  -e GTK_IM_MODULE=fcitx \\\n  -e QT_IM_MODULE=fcitx \\\n  -e XIMPROGRAM=fcitx \\\n  -e LC_CTYPE=ja_JP.UTF-8 \\\n  -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix \\\n  wine:base\n\nwineuser@docker $ wget http://cdn.line-apps.com/client/win/new/LineInst.exe\nwineuser@docker $ wine LineInst.exe\n--------------------------------------------\n$ sudo docker ps\ncommitID\n\n$ sudo docker commit ${commitID} wine:line\n$ sudo docker images\nwine line\nwine base\n\n$  sudo docker run -ti --rm --lxc-conf=\"lxc.network.hwaddr = ac:ac:ac:11:22:33\" \\\n  -e XMODIFIERS=\"@im=fcitx\" \\\n  -e GTK_IM_MODULE=fcitx \\\n  -e QT_IM_MODULE=fcitx \\\n  -e XIMPROGRAM=fcitx \\\n  -e LC_CTYPE=ja_JP.UTF-8 \\\n  -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix \\\n  wine:line\n```\n\n\u53c2\u8003:http://netbuffalo.doorblog.jp/archives/5001669.html\n", "tags": ["wine", "docker", "archLinux", "Linux"]}