{"tags": ["elasticache"], "context": " More than 1 year has passed since last update.\n\u4eca\u65e5\u306fElastiCacheRedis\u3092\u89e6\u308b\u3053\u3068\u304c\u591a\u304b\u3063\u305f\u306e\u3067\u3001\u672c\u65e5\u4e8c\u56de\u76ee\u306eElastiCache\u306e\u30e1\u30e2\u3002\nElastiCacheRedis\u304cMulti-AZ\u5bfe\u5fdc\u3057\u305f\u306e\u3067\u3001Multi-AZ\u69cb\u6210\u3067\u30af\u30e9\u30b9\u30bf\u3092\u4f5c\u6210\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\n\u306a\u3093\u3068ParameterGroup\u3067appendonly yes\u306b\u3057\u305fgroup\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u30a8\u30e9\u30fc\u3068\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3059\uff01\u30c9\u30f3\uff01\uff08\u591a\u5206\u3060\u3051\u3069\u3002\u3002\u3002\uff09\n\nCannot have redis persistence(appendonly) and Multi-AZ both on\n\n\u3061\u306a\u307f\u306b\u3053\u3093\u306a\u30a8\u30e9\u30fc\u3002\n\u3069\u3046\u3084\u3089\u540c\u3058\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u65b9\u304c\u3044\u305f\u3088\u3046\u3067\u3001\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\n[AWS]\u30de\u30eb\u30c1AZ\u306aElastiCache Redis\u306e\u6c38\u7d9a\u6027\u306b\u3064\u3044\u3066\u30e1\u30e2\n\u5b9f\u306f\u4eca\u5e74\u306e\u4e00\u6708\u3050\u3089\u3044\u306b\u4ed6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u540c\u3058Multi-AZ\u69cb\u6210\u306b\u3057\u305f\u30af\u30e9\u30b9\u30bf\u304c\u3042\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u305d\u3061\u3089\u306f\u306a\u3093\u3068AOF\u306e\u8a2d\u5b9a\u304c\u51fa\u6765\u3066\u3044\u308b\u306e\u3067\u3059\uff01\uff08\u3055\u3089\u306b\u6df1\u307e\u308b\u8b0e\uff09\n\u7d50\u5c40\u306e\u3068\u3053\u308d\n\u57d2\u304c\u660e\u304b\u306a\u3044\u306e\u3067\u3001AOF\u306e\u8a2d\u5b9a\u7121\u3057\u306eParameterGroup\u3092\u8a2d\u5b9a\u3057\u305f\u3068\u3053\u308d\u3001\u30af\u30e9\u30b9\u30bf\u306e\u4f5c\u6210\u304c\u554f\u984c\u306a\u304f\u51fa\u6765\u307e\u3057\u305f\u3002\n\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u3044\u305f\u8a18\u4e8b\u306b\u3042\u308a\u307e\u3057\u305f\u304c\u3001Multi-AZ\u3067\u306f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u6b7b\u3093\u3060\u3089\u3001\u305d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u7834\u68c4\u3059\u308b\u306e\u3067\u3001AOF\u3092\u6b8b\u3059\u610f\u5473\u304c\u306a\u3044\u304b\u3089\uff1f\u3068\u3044\u3046\u4eee\u8aac\u3092\u7acb\u3066\u3089\u308c\u3066\u304a\u308a\u307e\u3057\u305f\u3002\n\u81ea\u5206\u3082\u305d\u306e\u610f\u898b\u306b\u306f\u7d0d\u5f97\u3067\u3059\u3002\n\u3060\u308c\u304b\u3054\u5b58\u77e5\u306e\u65b9\u3044\u307e\u3059\u304b\u30fc\u30fc\u30fc\u30fc\u30fc\uff1f\n\u8ffd\u8a18 2015/02/18\n\u3053\u306e\u4ef6\u306b\u3064\u3044\u3066AWS\u306b\u554f\u3044\u5408\u308f\u305b\u3057\u305f\u3068\u3053\u308d\u65e9\u901f\u56de\u7b54\u304c\u304d\u307e\u3057\u305f\uff01\nMulti-AZ\u69cb\u6210\u3067AOF\u8a2d\u5b9a\u306f\u51fa\u6765\u306a\u3044\u4ed5\u69d8\n\u3055\u3089\u306b\u82f1\u8a9e\u306e\u307f\u3067\u3059\u304c\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3068\u306e\u3053\u3068\u3002\n\u3000- Best Practices for Implementing Amazon ElastiCache / Mitigating Out-of-Disk-Space Issues When Using AOF\n\u3000http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/BestPractices.html#BestPractices.FaultTolerance\n\nEnabling Redis Multi-AZ as a Better Approach to Fault Tolerance\n\u3000If you are enabling AOF to protect against data loss, consider using a replication group with Multi-AZ enabled instead of AOF. In any Redis replication group, if a replica fails, it is automatically replaced and synchronized with the primary cluster. If Multi-AZ is enabled on a Redis replication group and the primary fails, it fails over to a read replica. This functionality is much faster than rebuilding the primary from an AOF file. For maximum fault tolerance, even against a hardware fault in an underlying physical server, launch your primary and replica clusters in different Availability Zones. Because there is no need for AOF in this scenario, you do not risk running out of disk space.\n\nAOF \u3067\u3059\u304c\u30ed\u30fc\u30ab\u30eb\u30c7\u30a3\u30b9\u30af\u306b\u66f8\u304d\u8fbc\u307f\u3092\u884c\u3046\u90fd\u5408\u4e0a\u3001\u7269\u7406\u7684\u306a\u969c\u5bb3\u306b\u306f\u5bfe\u5fdc\u3067\u304d\u307e\u305b\u3093\u3002\u307e\u305f\u3001\u30c7\u30a3\u30b9\u30af\u306b\u66f8\u304d\u8fbc\u307f\u3092\u884c\u3046\u90fd\u5408\u4e0a\u3001\u66f4\u65b0\u304c\u975e\u5e38\u306b\u591a\u3044\u3068\u30ed\u30fc\u30ab\u30eb\u30c7\u30a3\u30b9\u30af\u3092\u4f7f\u3044\u5207\u308a\u66f8\u304d\u8fbc\u307f\u304c\u3067\u304d\u306a\u304f\u306a\u308b\u4e8b\u4f8b\u3082\u5831\u544a\u3055\u308c\u3066\u304a\u308a\u307e\u3059\u3002\u3053\u306e\u5f71\u97ff\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u3001\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3068\u3057\u3066\u306f AOF \u3067\u306f\u306a\u304f Multi-AZ \u69cb\u6210\u306b\u3088\u3063\u3066\u8010\u969c\u5bb3\u6027\u3092\u8003\u616e\u9802\u304f\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u3066\u304a\u308a\u307e\u3059\u3002\nMulti-AZ \u69cb\u6210\u306b\u3088\u308a\u5341\u5206\u306a\u8010\u969c\u5bb3\u6027\u304c\u78ba\u4fdd\u3067\u304d\u308b\u3053\u3068\u304b\u3089\u3001ElastiCache \u306e\u4ed5\u69d8\u3068\u3057\u3066\u306f AOF \u3068\u306e\u4f75\u7528\u304c\u3067\u304d\u306a\u3044\u3088\u3046\u306a\u4ed5\u69d8\u3068\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002\n\n\u3084\u306f\u308aMulti-AZ\u306b\u306a\u3063\u305f\u3053\u3068\u3067AOF\u30d5\u30a1\u30a4\u30eb\u3064\u304f\u308b\u5fc5\u8981\u304c\u306a\u3044\u3068\u3044\u3046\u5224\u65ad\u306e\u3088\u3046\u3067\u3059\u3002\n\u65e9\u6025\u306b\u9023\u7d61\u304f\u308c\u305f\u30b5\u30dd\u30fc\u30c8\u306b\u611f\u8b1d\uff01\n<img src=\"http://nikuniku.me/wp-content/uploads/redis.png\" alt=\"Redis\" title=\"redis.png\" border=\"0\" width=\"349\" height=\"300\" />\n\u4eca\u65e5\u306fElastiCacheRedis\u3092\u89e6\u308b\u3053\u3068\u304c\u591a\u304b\u3063\u305f\u306e\u3067\u3001\u672c\u65e5\u4e8c\u56de\u76ee\u306eElastiCache\u306e\u30e1\u30e2\u3002\n\nElastiCacheRedis\u304cMulti-AZ\u5bfe\u5fdc\u3057\u305f\u306e\u3067\u3001Multi-AZ\u69cb\u6210\u3067\u30af\u30e9\u30b9\u30bf\u3092\u4f5c\u6210\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\n\u306a\u3093\u3068ParameterGroup\u3067appendonly yes\u306b\u3057\u305fgroup\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u30a8\u30e9\u30fc\u3068\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3059\uff01\u30c9\u30f3\uff01\uff08\u591a\u5206\u3060\u3051\u3069\u3002\u3002\u3002\uff09\n\n<pre><code>\nCannot have redis persistence(appendonly) and Multi-AZ both on\n</code></pre>\n\n\u3061\u306a\u307f\u306b\u3053\u3093\u306a\u30a8\u30e9\u30fc\u3002\n\n\u3069\u3046\u3084\u3089\u540c\u3058\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u65b9\u304c\u3044\u305f\u3088\u3046\u3067\u3001\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\n<a href=\"https://siguniang.wordpress.com/2015/02/14/cannot-have-aws-redis-aof-and-multi-az-both-on/\" target=\"_blank\">[AWS]\u30de\u30eb\u30c1AZ\u306aElastiCache Redis\u306e\u6c38\u7d9a\u6027\u306b\u3064\u3044\u3066\u30e1\u30e2</a>\n\n\u5b9f\u306f\u4eca\u5e74\u306e\u4e00\u6708\u3050\u3089\u3044\u306b\u4ed6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u540c\u3058Multi-AZ\u69cb\u6210\u306b\u3057\u305f\u30af\u30e9\u30b9\u30bf\u304c\u3042\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u305d\u3061\u3089\u306f\u306a\u3093\u3068AOF\u306e\u8a2d\u5b9a\u304c\u51fa\u6765\u3066\u3044\u308b\u306e\u3067\u3059\uff01\uff08\u3055\u3089\u306b\u6df1\u307e\u308b\u8b0e\uff09\n\n<h2>\u7d50\u5c40\u306e\u3068\u3053\u308d</h2>\n\u57d2\u304c\u660e\u304b\u306a\u3044\u306e\u3067\u3001AOF\u306e\u8a2d\u5b9a\u7121\u3057\u306eParameterGroup\u3092\u8a2d\u5b9a\u3057\u305f\u3068\u3053\u308d\u3001\u30af\u30e9\u30b9\u30bf\u306e\u4f5c\u6210\u304c\u554f\u984c\u306a\u304f\u51fa\u6765\u307e\u3057\u305f\u3002\n\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u3044\u305f\u8a18\u4e8b\u306b\u3042\u308a\u307e\u3057\u305f\u304c\u3001Multi-AZ\u3067\u306f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u6b7b\u3093\u3060\u3089\u3001\u305d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u7834\u68c4\u3059\u308b\u306e\u3067\u3001AOF\u3092\u6b8b\u3059\u610f\u5473\u304c\u306a\u3044\u304b\u3089\uff1f\u3068\u3044\u3046\u4eee\u8aac\u3092\u7acb\u3066\u3089\u308c\u3066\u304a\u308a\u307e\u3057\u305f\u3002\n\u81ea\u5206\u3082\u305d\u306e\u610f\u898b\u306b\u306f\u7d0d\u5f97\u3067\u3059\u3002\n\n\u3060\u308c\u304b\u3054\u5b58\u77e5\u306e\u65b9\u3044\u307e\u3059\u304b\u30fc\u30fc\u30fc\u30fc\u30fc\uff1f\n\n<font color=\"red\">\u8ffd\u8a18 2015/02/18</font>\n\u3053\u306e\u4ef6\u306b\u3064\u3044\u3066AWS\u306b\u554f\u3044\u5408\u308f\u305b\u3057\u305f\u3068\u3053\u308d\u65e9\u901f\u56de\u7b54\u304c\u304d\u307e\u3057\u305f\uff01\nMulti-AZ\u69cb\u6210\u3067AOF\u8a2d\u5b9a\u306f<strong>\u51fa\u6765\u306a\u3044\u4ed5\u69d8</strong>\n\u3055\u3089\u306b\u82f1\u8a9e\u306e\u307f\u3067\u3059\u304c\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3068\u306e\u3053\u3068\u3002\n\u3000- Best Practices for Implementing Amazon ElastiCache / Mitigating Out-of-Disk-Space Issues When Using AOF\n\u3000<a href=\"http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/BestPractices.html#BestPractices.FaultTolerance\" target=\"_blank\">http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/BestPractices.html#BestPractices.FaultTolerance</a>\n\n<BLOCKQUOTE>\nEnabling Redis Multi-AZ as a Better Approach to Fault Tolerance\n\u3000If you are enabling AOF to protect against data loss, consider using a replication group with Multi-AZ enabled instead of AOF. In any Redis replication group, if a replica fails, it is automatically replaced and synchronized with the primary cluster. If Multi-AZ is enabled on a Redis replication group and the primary fails, it fails over to a read replica. This functionality is much faster than rebuilding the primary from an AOF file. For maximum fault tolerance, even against a hardware fault in an underlying physical server, launch your primary and replica clusters in different Availability Zones. Because there is no need for AOF in this scenario, you do not risk running out of disk space.\n\nAOF \u3067\u3059\u304c\u30ed\u30fc\u30ab\u30eb\u30c7\u30a3\u30b9\u30af\u306b\u66f8\u304d\u8fbc\u307f\u3092\u884c\u3046\u90fd\u5408\u4e0a\u3001\u7269\u7406\u7684\u306a\u969c\u5bb3\u306b\u306f\u5bfe\u5fdc\u3067\u304d\u307e\u305b\u3093\u3002\u307e\u305f\u3001\u30c7\u30a3\u30b9\u30af\u306b\u66f8\u304d\u8fbc\u307f\u3092\u884c\u3046\u90fd\u5408\u4e0a\u3001\u66f4\u65b0\u304c\u975e\u5e38\u306b\u591a\u3044\u3068\u30ed\u30fc\u30ab\u30eb\u30c7\u30a3\u30b9\u30af\u3092\u4f7f\u3044\u5207\u308a\u66f8\u304d\u8fbc\u307f\u304c\u3067\u304d\u306a\u304f\u306a\u308b\u4e8b\u4f8b\u3082\u5831\u544a\u3055\u308c\u3066\u304a\u308a\u307e\u3059\u3002\u3053\u306e\u5f71\u97ff\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u3001\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3068\u3057\u3066\u306f AOF \u3067\u306f\u306a\u304f Multi-AZ \u69cb\u6210\u306b\u3088\u3063\u3066\u8010\u969c\u5bb3\u6027\u3092\u8003\u616e\u9802\u304f\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u3066\u304a\u308a\u307e\u3059\u3002\nMulti-AZ \u69cb\u6210\u306b\u3088\u308a\u5341\u5206\u306a\u8010\u969c\u5bb3\u6027\u304c\u78ba\u4fdd\u3067\u304d\u308b\u3053\u3068\u304b\u3089\u3001ElastiCache \u306e\u4ed5\u69d8\u3068\u3057\u3066\u306f AOF \u3068\u306e\u4f75\u7528\u304c\u3067\u304d\u306a\u3044\u3088\u3046\u306a\u4ed5\u69d8\u3068\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002\n</BLOCKQUOTE>\n\n\u3084\u306f\u308aMulti-AZ\u306b\u306a\u3063\u305f\u3053\u3068\u3067AOF\u30d5\u30a1\u30a4\u30eb\u3064\u304f\u308b\u5fc5\u8981\u304c\u306a\u3044\u3068\u3044\u3046\u5224\u65ad\u306e\u3088\u3046\u3067\u3059\u3002\n\n\u65e9\u6025\u306b\u9023\u7d61\u304f\u308c\u305f\u30b5\u30dd\u30fc\u30c8\u306b\u611f\u8b1d\uff01\n"}