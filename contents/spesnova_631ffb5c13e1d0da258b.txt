{"tags": ["log", "logentries", "CoreOS", "systemd"], "context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nCoreOS \u4e0a\u3067\u51fa\u308b\u5168\u3066\u306e\u30ed\u30b0\u3092\u30ea\u30e2\u30fc\u30c8\u306e\u30ed\u30b0\u30b5\u30fc\u30d0\u3078\u9001\u308b\u3068\u3044\u3046\u8a71\u3002\nCoreOS \u306b\u306f systemd \u304c\u5165\u3063\u3066\u304a\u308a\u3001\u5168\u3066\u306e\u30b5\u30fc\u30d3\u30b9\u3092 systemd \u7d4c\u7531\u3067\u7ba1\u7406\u3059\u308b\u3068 systemd \u4ed8\u5c5e\u306e jounalctl \u306b\u3088\u3063\u3066\u30ed\u30b0\u304c\u4e00\u5143\u7ba1\u7406\u3067\u304d\u308b\u3002 CoreOS \u30de\u30b7\u30f3\u3092 disposable \u306b\u3057\u3066\u304a\u304f\u305f\u3081\u306b\u4e00\u5143\u7ba1\u7406\u3057\u305f\u30ed\u30b0\u3092\u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u3078\u9001\u308b\n\n\u30ed\u30b0\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\n\u53ce\u96c6\u3057\u305f\u30ed\u30b0\u306f ncat \u306e\u30b3\u30cd\u30af\u30c8\u30e2\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u30ed\u30b0\u4fdd\u5b58\u5148\u306e listen \u30dd\u30fc\u30c8\u3078 UDP \u30c7\u30fc\u30bf\u3068\u3057\u3066\u9001\u308b\u3002\n$ journalctl -o short -f | ncat remote-destination.com 12345\n\n\u30ed\u30b0\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u5148\u306f\u8272\u3005\u3042\u308b\u3002\n\nPapertrail\nLogentries\nLoggly\nDatadog\nSplunk\n\nFluentd (OSS)\n\nLogstash (OSS)\n\nGraylog2 (OSS)\n\n\nLogentries \u3078\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3059\u308b\u4f8b\nLogentries \u306f\u56fa\u6709\u30dd\u30fc\u30c8\u3078\u306e Plain TCP, UDP \u7d4c\u7531\u3067\u9001\u308b\u3068\u3001\u9001\u4fe1\u5143 IP \u3067\u5224\u5225\u3059\u308b\u306e\u3067\u3001CoreOS \u30de\u30b7\u30f3\u3092\u6368\u3066\u3089\u308c\u306a\u304f\u306a\u308b\u3002Logentries \u3078\u306f Token \u30d9\u30fc\u30b9\u3067\u9001\u4fe1\u3059\u308b\ncore@core-01 ~ $ journalctl -o short -f | sed \\\"s/^/<YOUR_TOKEN> \\\\0/g\\\" | ncat data.logentries.com 10000\"\n\njson \u5f62\u5f0f\u3067\u9001\u308b\ncore@core-01 ~ $ journalctl -o json -f | sed \\\"s/^/<YOUR_TOKEN> \\\\0/g\\\" | ncat data.logentries.com 10000\"\n\n\nCloud-Config \u3067\u8d77\u52d5\u3059\u308b\n#cloud-config\n\ncoreos:\n  update:\n    group: stable\n  etcd:\n    discovery: https://discovery.etcd.io/xxxxxxxxxxxxxxxxxxx\n    addr: $public_ipv4:4001\n    peer-addr: $public_ipv4:7001\n  fleet:\n    public-ip: $public_ipv4\n  units:\n    - name: journal-router-short.service\n      command: start\n      content: |\n        [Unit]\n        Description=Journal Router (short)\n\n        [Service]\n        TimeoutStartSec=0\n        ExecStart=/bin/sh -c '/usr/bin/journalctl -o short -f | sed \\\"s/^/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx \\\\0/g\\\" | ncat data.logentries.com 10000'\n\n        [Install]\n        WantedBy=multi-user.target\n    - name: journal-router-json.service\n      command: start\n      content: |\n        [Unit]\n        Description=Journal Router (json)\n\n        [Service]\n        TimeoutStartSec=0\n        ExecStart=/bin/sh -c '/usr/bin/journalctl -o json -f | sed \\\"s/^/xxxxxxxxxxxxxxxxxxxxxxxxxxxx \\\\0/g\\\" | ncat data.logentries.com 10000'\n\n        [Install]\n        WantedBy=multi-user.target\n\n\nhuman readable \u306a\u30ed\u30b0\u3068\u3057\u3066 short \u3001\u5f8c\u3067\u8a73\u7d30\u3092\u8abf\u3079\u308b\u3001\u30ed\u30b0\u3092\u4f7f\u3063\u3066\u4f55\u304b\u3059\u308b\u3068\u304d\u306e\u305f\u3081\u306b json \u30ed\u30b0\u3068\u3082\u306b\u9001\u4fe1\u3057\u3066\u304a\u304f\n\n\n\u88dc\u8db3: Logentries \u306e\u8a2d\u5b9a\u4f8b\n\n\n\n\n\n\n\u30e1\u30e2\u3068\u611f\u60f3\n\n\u5404\u30b3\u30f3\u30c6\u30ca\u306e\u8d77\u52d5\u5931\u6557\u7b49\u306e\u30ed\u30b0\u3082\u6b32\u3057\u3044\u306e\u3067\u4e00\u756a\u6700\u521d\u306b\u8d77\u52d5\u3059\u308b\u3088\u3046\u66f8\u304f\nunits \u306e\u4e00\u756a\u4e0a\u306b\u66f8\u3051\u3070\u3044\u3044\u3093\u3060\u3068\u601d\u3046\n\nREF\n\nCoreOS logging to remote destinations\n\nCoreOS\u3092Logentries\u3067\u30ed\u30b0\u76e3\u8996\u3057\u3066\u307f\u305f - uzyexe\u306e\u30ce\u30fc\u30c8 - \u81ea\u5206\u3082 logentries \u30e6\u30fc\u30b6\u306a\u306e\u3067\u30b8\u30e3\u30b9\u30c8\u306a\u8a18\u4e8b\u3067\u3057\u305f\n\n\n## \u6982\u8981\nCoreOS \u4e0a\u3067\u51fa\u308b\u5168\u3066\u306e\u30ed\u30b0\u3092\u30ea\u30e2\u30fc\u30c8\u306e\u30ed\u30b0\u30b5\u30fc\u30d0\u3078\u9001\u308b\u3068\u3044\u3046\u8a71\u3002\nCoreOS \u306b\u306f systemd \u304c\u5165\u3063\u3066\u304a\u308a\u3001\u5168\u3066\u306e\u30b5\u30fc\u30d3\u30b9\u3092 systemd \u7d4c\u7531\u3067\u7ba1\u7406\u3059\u308b\u3068 systemd \u4ed8\u5c5e\u306e jounalctl \u306b\u3088\u3063\u3066\u30ed\u30b0\u304c\u4e00\u5143\u7ba1\u7406\u3067\u304d\u308b\u3002 CoreOS \u30de\u30b7\u30f3\u3092 disposable \u306b\u3057\u3066\u304a\u304f\u305f\u3081\u306b\u4e00\u5143\u7ba1\u7406\u3057\u305f\u30ed\u30b0\u3092\u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u3078\u9001\u308b\n\n## \u30ed\u30b0\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\n\u53ce\u96c6\u3057\u305f\u30ed\u30b0\u306f `ncat` \u306e\u30b3\u30cd\u30af\u30c8\u30e2\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u30ed\u30b0\u4fdd\u5b58\u5148\u306e listen \u30dd\u30fc\u30c8\u3078 UDP \u30c7\u30fc\u30bf\u3068\u3057\u3066\u9001\u308b\u3002\n\n```bash\n$ journalctl -o short -f | ncat remote-destination.com 12345\n```\n\n\n\u30ed\u30b0\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u5148\u306f\u8272\u3005\u3042\u308b\u3002\n\n* [Papertrail](https://papertrailapp.com)\n* [Logentries](https://logentries.com)\n* [Loggly](https://www.loggly.com)\n* [Datadog](https://www.datadoghq.com)\n* [Splunk](http://www.splunk.com)\n* [Fluentd](http://www.fluentd.org/) (OSS)\n* [Logstash](http://logstash.net) (OSS)\n* [Graylog2](http://graylog2.org) (OSS)\n\n### Logentries \u3078\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3059\u308b\u4f8b\nLogentries \u306f\u56fa\u6709\u30dd\u30fc\u30c8\u3078\u306e Plain TCP, UDP \u7d4c\u7531\u3067\u9001\u308b\u3068\u3001\u9001\u4fe1\u5143 IP \u3067\u5224\u5225\u3059\u308b\u306e\u3067\u3001CoreOS \u30de\u30b7\u30f3\u3092\u6368\u3066\u3089\u308c\u306a\u304f\u306a\u308b\u3002Logentries \u3078\u306f [Token \u30d9\u30fc\u30b9\u3067\u9001\u4fe1\u3059\u308b](https://logentries.com/doc/input-token/)\n\n```bash\ncore@core-01 ~ $ journalctl -o short -f | sed \\\"s/^/<YOUR_TOKEN> \\\\0/g\\\" | ncat data.logentries.com 10000\"\n```\n\njson \u5f62\u5f0f\u3067\u9001\u308b\n\n```bash\ncore@core-01 ~ $ journalctl -o json -f | sed \\\"s/^/<YOUR_TOKEN> \\\\0/g\\\" | ncat data.logentries.com 10000\"\n```\n\n## Cloud-Config \u3067\u8d77\u52d5\u3059\u308b\n\n```yaml\n#cloud-config\n\ncoreos:\n  update:\n    group: stable\n  etcd:\n    discovery: https://discovery.etcd.io/xxxxxxxxxxxxxxxxxxx\n    addr: $public_ipv4:4001\n    peer-addr: $public_ipv4:7001\n  fleet:\n    public-ip: $public_ipv4\n  units:\n    - name: journal-router-short.service\n      command: start\n      content: |\n        [Unit]\n        Description=Journal Router (short)\n\n        [Service]\n        TimeoutStartSec=0\n        ExecStart=/bin/sh -c '/usr/bin/journalctl -o short -f | sed \\\"s/^/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx \\\\0/g\\\" | ncat data.logentries.com 10000'\n\n        [Install]\n        WantedBy=multi-user.target\n    - name: journal-router-json.service\n      command: start\n      content: |\n        [Unit]\n        Description=Journal Router (json)\n\n        [Service]\n        TimeoutStartSec=0\n        ExecStart=/bin/sh -c '/usr/bin/journalctl -o json -f | sed \\\"s/^/xxxxxxxxxxxxxxxxxxxxxxxxxxxx \\\\0/g\\\" | ncat data.logentries.com 10000'\n\n        [Install]\n        WantedBy=multi-user.target\n```\n\n* human readable \u306a\u30ed\u30b0\u3068\u3057\u3066 short \u3001\u5f8c\u3067\u8a73\u7d30\u3092\u8abf\u3079\u308b\u3001\u30ed\u30b0\u3092\u4f7f\u3063\u3066\u4f55\u304b\u3059\u308b\u3068\u304d\u306e\u305f\u3081\u306b json \u30ed\u30b0\u3068\u3082\u306b\u9001\u4fe1\u3057\u3066\u304a\u304f\n\n## \u88dc\u8db3: Logentries \u306e\u8a2d\u5b9a\u4f8b\n\n![](https://qiita-image-store.s3.amazonaws.com/0/20833/9ee6e289-259d-5055-a563-069ef8017efd.png)\n\n![host___Logentries.png](https://qiita-image-store.s3.amazonaws.com/0/20833/ad9b5eb6-a089-99a6-a0f1-83a6e5b542dd.png \"host___Logentries.png\")\n\n![host___Logentries.png](https://qiita-image-store.s3.amazonaws.com/0/20833/ba5d98c5-2545-d2b2-76fd-5f7ab2c681f9.png \"host___Logentries.png\")\n\n![host___Logentries.png](https://qiita-image-store.s3.amazonaws.com/0/20833/89bcaa6b-7d94-4f70-b5e7-1d5c8ccfa2ad.png \"host___Logentries.png\")\n\n![host___Logentries_\u3068_CoreOS_\u4e0a\u306e\u5168\u3066\u306e\u30ed\u30b0\u3092\u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u3078\u9001\u308b.png](https://qiita-image-store.s3.amazonaws.com/0/20833/73fc3a84-7374-e6e6-dc28-82edbc7281a6.png \"host___Logentries_\u3068_CoreOS_\u4e0a\u306e\u5168\u3066\u306e\u30ed\u30b0\u3092\u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u3078\u9001\u308b.png\")\n\n\n\n## \u30e1\u30e2\u3068\u611f\u60f3\n### \u5404\u30b3\u30f3\u30c6\u30ca\u306e\u8d77\u52d5\u5931\u6557\u7b49\u306e\u30ed\u30b0\u3082\u6b32\u3057\u3044\u306e\u3067\u4e00\u756a\u6700\u521d\u306b\u8d77\u52d5\u3059\u308b\u3088\u3046\u66f8\u304f\nunits \u306e\u4e00\u756a\u4e0a\u306b\u66f8\u3051\u3070\u3044\u3044\u3093\u3060\u3068\u601d\u3046\n\n## REF\n\n* [CoreOS logging to remote destinations](https://medium.com/coreos-linux-for-massive-server-deployments/coreos-logging-to-remote-destinations-defb984185c5)\n* [CoreOS\u3092Logentries\u3067\u30ed\u30b0\u76e3\u8996\u3057\u3066\u307f\u305f - uzyexe\u306e\u30ce\u30fc\u30c8](https://www.instapaper.com/read/509284528) - \u81ea\u5206\u3082 logentries \u30e6\u30fc\u30b6\u306a\u306e\u3067\u30b8\u30e3\u30b9\u30c8\u306a\u8a18\u4e8b\u3067\u3057\u305f\n"}