{"context": " More than 1 year has passed since last update.\u76e3\u8996\u3063\u3064\u3063\u3066\u3082\u3044\u308d\u3044\u308d\u3042\u308b\u304c\u3001\u307e\u305a\u306f\u6700\u4f4e\u9650\u3068\u3057\u3066\u3001\u30e1\u30e2\u30ea\u4f7f\u7528\u91cf\u3092\u3002\n\u3064\u3044\u3067\u306b\u30ef\u30fc\u30ab\u30fc\u30d7\u30ed\u30bb\u30b9\u6570\u3082\u540c\u3058\u624b\u9806\u3067\u3067\u304d\u308b\u306e\u3067\u3053\u308c\u3082\u3002\n\u3053\u3053\u3067\u306fmunin\u3092\u5229\u7528\u3057\u3066\u308b\u524d\u63d0\u3068\u3059\u308b\u3002\u4ed6\u306e\u76e3\u8996\u30c4\u30fc\u30eb\u4f7f\u3063\u3066\u308b\u3068\u3053\u308d\u306f\u30fb\u30fb\u30fb\u304c\u3093\u3070\u3063\u3066\u3002\n\n\u624b\u9806\nhttps://github.com/munin-monitoring/contrib/tree/master/plugins/unicorn\n\u3053\u3044\u3064\u3092\u4f7f\u3046\u306e\u3067\u3001clone\n\nuser$\nsudo su\n\n\n\nroot#\ncd\ngit clone --depth 1 https://github.com/munin-monitoring/contrib.git munin-contrib\n\n\nunicorn\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u306f2\u30bb\u30c3\u30c8\u3042\u3063\u3066\u3001\n\n\nunicorn_\n\n\nps | grep unicorn\u3063\u3066\u611f\u3058\u3067\u8a08\u6e2c\u3059\u308b\u306e\u3067\u3001\u8907\u6570\u30a2\u30d7\u30ea\u304c1\u30b5\u30fc\u30d0\u306b\u76f8\u4e57\u308a\u3057\u3066\u308b\u5834\u5408\u306f\u5408\u8a08\u306b\u306a\u308b\n\n\n\nunicorn_memory_status\u3068unicorn_status\n\n\u3061\u3068\u3081\u3093\u3069\u3044\u3051\u3069\u3001\u30a2\u30d7\u30ea\u3054\u3068\u306b\u96c6\u8a08\u3067\u304d\u308b\n\n\n\n\u4eca\u56de\u306f\u5f8c\u8005\u4f7f\u3046\u3002\u8907\u6570\u30a2\u30d7\u30ea\u76f8\u4e57\u308a\u524d\u63d0\u3067\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\nroot#\ncp munin-contrib/plugins/unicorn/unicorn_{memory_,}status /usr/share/munin/plugins/\n\n\n\u6709\u52b9\u5316\u3002\u3053\u3053\u3067\u306fmyapp\u3068\u3044\u3046\u540d\u524d\u306e\u30a2\u30d7\u30ea\u306e\u3064\u3082\u308a\u3067\u30b3\u30de\u30f3\u30c9\u66f8\u304f\u306e\u3067\u3001\u9069\u5b9c\u66f8\u304d\u63db\u3048\u3092\u3002\n\nroot#\ncd /etc/munin/plugins\nln -s /usr/share/munin/plugins/unicorn_memory_status unicorn_memory_status_myapp\nln -s /usr/share/munin/plugins/unicorn_status unicorn_status_myapp\n\n\n\u8a2d\u5b9a\u3002\n\nroot#\nvi /etc/munin/prugin-conf.d/unicorn\n\n\n\n/etc/munin/prugin-conf.d/unicorn\n[unicorn_memory_status_myapp]\n  env.rails_root /path/to/myapp/current\n[unicorn_status_myapp]\n  env.rails_root /path/to/myapp/current\n\n\n\u3082\u3061\u308d\u3093\u5404\u81ea\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d1\u30b9\u3092\u66f8\u304f\u3053\u3068\u3002Capistrano\u4f7f\u3063\u3066\u308b\u306a\u3089current\u307e\u3067\u4e0b\u308b\u3002\n\u518d\u8d77\u52d5\u3002munin\u8a2d\u5b9a\u306e\u3042\u308b\u3042\u308b\u7f60\uff08\u518d\u8d77\u52d5\u5fd8\u308c\uff09\u306f\u304d\u3061\u3093\u3068\u56de\u907f\u3002\n\nroot#\nsystemctl restart munin-node\n\n\n\n\u3042\u3068\u304c\u304d\nCPU\u306e\u76e3\u8996\u3060\u308c\u304b\n\u76e3\u8996\u3063\u3064\u3063\u3066\u3082\u3044\u308d\u3044\u308d\u3042\u308b\u304c\u3001\u307e\u305a\u306f\u6700\u4f4e\u9650\u3068\u3057\u3066\u3001\u30e1\u30e2\u30ea\u4f7f\u7528\u91cf\u3092\u3002\n\u3064\u3044\u3067\u306b\u30ef\u30fc\u30ab\u30fc\u30d7\u30ed\u30bb\u30b9\u6570\u3082\u540c\u3058\u624b\u9806\u3067\u3067\u304d\u308b\u306e\u3067\u3053\u308c\u3082\u3002\n\n\u3053\u3053\u3067\u306fmunin\u3092\u5229\u7528\u3057\u3066\u308b\u524d\u63d0\u3068\u3059\u308b\u3002\u4ed6\u306e\u76e3\u8996\u30c4\u30fc\u30eb\u4f7f\u3063\u3066\u308b\u3068\u3053\u308d\u306f\u30fb\u30fb\u30fb\u304c\u3093\u3070\u3063\u3066\u3002\n\n## \u624b\u9806\n\nhttps://github.com/munin-monitoring/contrib/tree/master/plugins/unicorn\n\n\u3053\u3044\u3064\u3092\u4f7f\u3046\u306e\u3067\u3001clone\n\n```bash:user$\nsudo su\n```\n\n```bash:root#\ncd\ngit clone --depth 1 https://github.com/munin-monitoring/contrib.git munin-contrib\n```\n\nunicorn\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u306f2\u30bb\u30c3\u30c8\u3042\u3063\u3066\u3001\n\n- `unicorn_`\n\t- `ps | grep unicorn`\u3063\u3066\u611f\u3058\u3067\u8a08\u6e2c\u3059\u308b\u306e\u3067\u3001\u8907\u6570\u30a2\u30d7\u30ea\u304c1\u30b5\u30fc\u30d0\u306b\u76f8\u4e57\u308a\u3057\u3066\u308b\u5834\u5408\u306f\u5408\u8a08\u306b\u306a\u308b\n- `unicorn_memory_status`\u3068`unicorn_status`\n\t- \u3061\u3068\u3081\u3093\u3069\u3044\u3051\u3069\u3001\u30a2\u30d7\u30ea\u3054\u3068\u306b\u96c6\u8a08\u3067\u304d\u308b\n\n\u4eca\u56de\u306f\u5f8c\u8005\u4f7f\u3046\u3002\u8907\u6570\u30a2\u30d7\u30ea\u76f8\u4e57\u308a\u524d\u63d0\u3067\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```bash:root#\ncp munin-contrib/plugins/unicorn/unicorn_{memory_,}status /usr/share/munin/plugins/\n```\n\n\u6709\u52b9\u5316\u3002\u3053\u3053\u3067\u306f`myapp`\u3068\u3044\u3046\u540d\u524d\u306e\u30a2\u30d7\u30ea\u306e\u3064\u3082\u308a\u3067\u30b3\u30de\u30f3\u30c9\u66f8\u304f\u306e\u3067\u3001\u9069\u5b9c\u66f8\u304d\u63db\u3048\u3092\u3002\n\n```bash:root#\ncd /etc/munin/plugins\nln -s /usr/share/munin/plugins/unicorn_memory_status unicorn_memory_status_myapp\nln -s /usr/share/munin/plugins/unicorn_status unicorn_status_myapp\n```\n\n\u8a2d\u5b9a\u3002\n\n```bash:root#\nvi /etc/munin/prugin-conf.d/unicorn\n```\n\n```text:/etc/munin/prugin-conf.d/unicorn\n[unicorn_memory_status_myapp]\n  env.rails_root /path/to/myapp/current\n[unicorn_status_myapp]\n  env.rails_root /path/to/myapp/current\n```\n\n\u3082\u3061\u308d\u3093\u5404\u81ea\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d1\u30b9\u3092\u66f8\u304f\u3053\u3068\u3002Capistrano\u4f7f\u3063\u3066\u308b\u306a\u3089`current`\u307e\u3067\u4e0b\u308b\u3002\n\n\u518d\u8d77\u52d5\u3002munin\u8a2d\u5b9a\u306e\u3042\u308b\u3042\u308b\u7f60\uff08\u518d\u8d77\u52d5\u5fd8\u308c\uff09\u306f\u304d\u3061\u3093\u3068\u56de\u907f\u3002\n\n```bash:root#\nsystemctl restart munin-node\n```\n\n## \u3042\u3068\u304c\u304d\n\nCPU\u306e\u76e3\u8996\u3060\u308c\u304b\n", "tags": ["unicorn", "Munin"]}