{"context": "\u3042\u3089\u3059\u3058: \u5404\u8a00\u8a9e\u306e clock_gettime(2) \u306e\u5f15\u6570\u306e\u6271\u3044\u3092\u8abf\u67fb\u3057\u3066\u3044\u305f\u3089\u3001\u3053\u306e\u3088\u3046\u306a\u5947\u3063\u602a\u306a\u6587\u7ae0\u304c\u3067\u304d\u3042\u304c\u3063\u3066\u3044\u305f\u3002\u305d\u3046\u3044\u3046\u4e8b\u60c5\u3067\u3042\u308b\u306e\u3067\u3001Windows\u95a2\u4fc2\u306e\u8a18\u8ff0\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u5f8c\u3005\u8ffd\u52a0\u3059\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\nclock_gettime\nclock_gettime(2) \u306fSingle Unix Specification v2\u306b\u3088\u3063\u3066\u898f\u683c\u5316\u3055\u308c\u3066\u3044\u308b\u6642\u9593\u53d6\u5f97\u306e\u305f\u3081\u306eAPI\u3067\u3042\u308b\u3002 clock_gettime(2) \u306b\u306f clock_id \u306b\u6e21\u3059\u5b9a\u6570\u306b\u3088\u3063\u3066\u6642\u523b\u53d6\u5f97\u306e\u30bb\u30de\u30f3\u30c6\u30a3\u30af\u30b9\u3084\u7cbe\u5ea6\u304c\u5909\u308f\u3063\u3066\u304f\u308b\u3002\n\u4e00\u4f8b\u3092Linux\u306eman\u304b\u3089\u5f15\u7528\u3059\u308b\u3068\u3001\n- CLOCK_REALTIME\n\u5b9f\u6642\u9593\u3092\u8a08\u6e2c\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u3067\u4e00\u610f\u306a\u6642\u9593\u3002 \u3053\u306e\u30af\u30ed\u30c3\u30af\u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306f\u9069\u5207\u306a\u7279\u6a29\u304c\u5fc5\u8981\u3067\u3042\u308b\u3002 \u3053\u306e\u30af\u30ed\u30c3\u30af\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u6642\u9593\u306e\u4e0d\u9023\u7d9a\u306a\u5909\u5316 (\u4f8b\u3048\u3070\u3001\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\u8005\u304c \u30b7\u30b9\u30c6\u30e0\u6642\u9593\u3092\u624b\u52d5\u3067\u5909\u66f4\u3057\u305f\u5834\u5408\u306a\u3069) \u3084 adjtime \u3084 NTP \u304c\u884c\u3046 \u6bb5\u968e\u7684\u306a\u8abf\u6574\u306e\u5f71\u97ff\u3092\u53d7\u3051\u308b\u3002\nCLOCK_REALTIME_COARSE (Linux 2.6.32 \u4ee5\u964d; Linux \u7279\u6709)\n\u9ad8\u901f\u3060\u304c\u7cbe\u5ea6\u304c\u4f4e\u3044 CLOCK_REALTIME\u3002\u901f\u5ea6\u304c\u975e\u5e38\u306b\u5fc5\u8981\u3067\u3001\u304b\u3064\u9ad8\u7cbe\u5ea6\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u304c\u4e0d\u8981\u306a\u5834\u5408\u306b\u4f7f\u7528\u3059\u308b\u3068\u3088\u3044\u3002\nCLOCK_MONOTONIC\n\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u30af\u30ed\u30c3\u30af\u3067\u3001\u3042\u308b\u958b\u59cb\u6642\u70b9\u304b\u3089\u306e\u5358\u8abf\u5897\u52a0\u306e\u6642\u9593\u3067 \u8868\u73fe\u3055\u308c\u308b\u30af\u30ed\u30c3\u30af (\u958b\u59cb\u6642\u70b9\u304c\u3069\u306e\u6642\u70b9\u3068\u306a\u308b\u304b\u306f\u898f\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044)\u3002 \u3053\u306e\u6642\u8a08\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u6642\u9593\u306e\u4e0d\u9023\u7d9a\u306a\u5909\u5316 (\u4f8b\u3048\u3070\u3001\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\u8005\u304c\u30b7\u30b9\u30c6 \u30e0\u6642\u9593\u3092\u624b\u52d5\u3067\u5909\u66f4\u3057\u305f\u5834\u5408\u306a\u3069) \u306e\u5f71\u97ff\u3092\u53d7\u3051\u306a\u3044\u304c\u3001 adjtime(3) \u3084 NTP \u304c\u884c\u3046\u6bb5\u968e\u7684\u306a\u8abf\u6574\u306e\u5f71\u97ff\u3092\u53d7\u3051\u308b\u3002\nCLOCK_MONOTONIC_COARSE (Linux 2.6.32 \u4ee5\u964d; Linux \u7279\u6709)\n\u9ad8\u901f\u3060\u304c\u7cbe\u5ea6\u304c\u4f4e\u3044 CLOCK_MONOTONIC\u3002\u901f\u5ea6\u304c\u975e\u5e38\u306b\u5fc5\u8981\u3067\u3001\u304b\u3064\u9ad8\u7cbe\u5ea6\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u304c\u4e0d\u8981\u306a\u5834\u5408\u306b\u4f7f\u7528\u3059\u308b\u3068\u3088\u3044\u3002\nCLOCK_MONOTONIC_RAW (Linux 2.6.28 \u4ee5\u964d; Linux \u7279\u6709)\nCLOCK_MONOTONIC \u3068\u540c\u69d8\u3060\u304c\u3001NTP \u306b\u3088\u308b\u8abf\u6574\u3084 adjtime(3) \u304c\u884c\u3046 \u6bb5\u968e\u7684\u306a\u8abf\u6574\u306e\u5f71\u97ff\u3092\u53d7\u3051\u306a\u3044\u3001\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u306b\u3088\u308b\u751f\u306e\u6642\u523b\u3078\u306e\u30a2\u30af\u30bb\u30b9 \u304c\u3067\u304d\u308b\u3002\nCLOCK_BOOTTIME (Linux 2.6.39 \u4ee5\u964d; Linux \u56fa\u6709)\nCLOCK_MONOTONIC \u3068\u540c\u3058\u3060\u304c\u3001\u30b7\u30b9\u30c6\u30e0\u304c\u30b5\u30b9\u30da\u30f3\u30c9\u3055\u308c\u3066\u3044\u308b\u6642\u9593\u3082\u542b\u307e\u308c\u308b\u70b9\u304c\u7570\u306a\u308b\u3002 \u3053\u308c\u3092\u4f7f\u3046\u3068\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u30b5\u30b9\u30da\u30f3\u30c9\u72b6\u614b\u3082\u6271\u3048\u308b \"monotonic\" \u306a\u30af\u30ed\u30c3\u30af\u3092\u5f97\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002 \u3057\u304b\u3082\u3001 CLOCK_REALTIME \u306b\u304a\u3051\u308b\u8907\u96d1\u306a\u51e6\u7406\u3092\u884c\u3046\u5fc5\u8981\u3082\u306a\u304f\u306a\u308b\u3002 CLOCK_REALTIME \u3067\u306f\u3001 settimeofday(2) \u3092\u4f7f\u3063\u3066\u6642\u523b\u3092\u5909\u66f4\u3057\u305f\u5834\u5408\u3001\u6642\u523b\u306b\u4e0d\u9023\u7d9a\u306a\u5909\u5316\u304c\u767a\u751f\u3059\u308b\u304b\u3089\u3060\u3002\n\n\u3068\u3042\u308b\u3002\u3053\u306e\u5b9a\u6570\u306fOS\u306b\u3088\u3063\u3066\u307e\u3061\u307e\u3061\u3067\u3042\u308b\u3002\u307e\u305fsierra\u306e\u3088\u3046\u306b clock_gettime_nsec_np \u3068\u3044\u3046\u7279\u6b8a\u306aAPI\u3092\u8ffd\u52a0\u3057\u3066\u3044\u308b\u3082\u306e\u3082\u3042\u308b\u3002\n\u3053\u3061\u3089\u306e\u30d6\u30ed\u30b0\u306f\u5b9f\u88c5\u306e\u5f15\u7528\u7b87\u6240\u304c\u53c2\u8003\u306b\u306a\u3063\u305f\u3002 http://d.hatena.ne.jp/yohei-a/20140913/1410628229\n\nRuby\n\nCRuby 2.4.0\n\n\nProcess.clock_gettime\nRuby\u306f\u76f4\u63a5 clock_gettime(2) \u3092\u547c\u3076API\u3092\u63d0\u4f9b\u3057\u3066\u3044\u308b\u3002Process.clock_gettime \u306e\u5f15\u6570\u306b clock_id \u3092\u6307\u5b9a\u3059\u308b\u3002\n\u6307\u5b9a\u3067\u304d\u308b\u306e\u306fprocess.c\u306b\u3088\u308b\u3068\u4ee5\u4e0b\u306e\u5b9a\u6570\u3002\u3061\u3083\u3093\u3068\u3069\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u8ffd\u52a0\u3055\u308c\u305f\u306e\u304b\u3082\u66f8\u3044\u3066\u304a\u308a\u5927\u5909\u3059\u3070\u3089\u3057\u3044\u3002Solaris\u306eCLOCK_HIGHRES\u306b\u95a2\u3057\u3066\u306f\u6307\u5b9a\u304c\u306a\u304b\u3063\u305f\u3002\u307e\u305fDragonflyBSD\u3082\u5c11\u306a\u304f\u3068\u3082\u76f4\u8fd1\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306fFreeBSD\u3068\u540c\u3058\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3067\u304d\u308b\u306f\u305a\u3067\u3042\u308b\u304c\u8a00\u53ca\u304c\u306a\u304b\u3063\u305f\u3002\n *  [CLOCK_REALTIME] SUSv2 to 4, Linux 2.5.63, FreeBSD 3.0, NetBSD 2.0, OpenBSD 2.1, macOS 10.12\n *  [CLOCK_MONOTONIC] SUSv3 to 4, Linux 2.5.63, FreeBSD 3.0, NetBSD 2.0, OpenBSD 3.4, macOS 10.12\n *  [CLOCK_PROCESS_CPUTIME_ID] SUSv3 to 4, Linux 2.5.63, OpenBSD 5.4, macOS 10.12\n *  [CLOCK_THREAD_CPUTIME_ID] SUSv3 to 4, Linux 2.5.63, FreeBSD 7.1, OpenBSD 5.4, macOS 10.12\n *  [CLOCK_VIRTUAL] FreeBSD 3.0, OpenBSD 2.1\n *  [CLOCK_PROF] FreeBSD 3.0, OpenBSD 2.1\n *  [CLOCK_REALTIME_FAST] FreeBSD 8.1\n *  [CLOCK_REALTIME_PRECISE] FreeBSD 8.1\n *  [CLOCK_REALTIME_COARSE] Linux 2.6.32\n *  [CLOCK_REALTIME_ALARM] Linux 3.0\n *  [CLOCK_MONOTONIC_FAST] FreeBSD 8.1\n *  [CLOCK_MONOTONIC_PRECISE] FreeBSD 8.1\n *  [CLOCK_MONOTONIC_COARSE] Linux 2.6.32\n *  [CLOCK_MONOTONIC_RAW] Linux 2.6.28, macOS 10.12\n *  [CLOCK_MONOTONIC_RAW_APPROX] macOS 10.12\n *  [CLOCK_BOOTTIME] Linux 2.6.39\n *  [CLOCK_BOOTTIME_ALARM] Linux 3.0\n *  [CLOCK_UPTIME] FreeBSD 7.0, OpenBSD 5.5\n *  [CLOCK_UPTIME_FAST] FreeBSD 8.1\n *  [CLOCK_UPTIME_RAW] macOS 10.12\n *  [CLOCK_UPTIME_RAW_APPROX] macOS 10.12\n *  [CLOCK_UPTIME_PRECISE] FreeBSD 8.1\n *  [CLOCK_SECOND] FreeBSD 8.1\n\n\nTime.now\n\u6700\u3082\u3088\u304f\u4f7f\u308f\u308c\u308b\u3067\u3042\u308d\u3046 Time.now \u3068\u3044\u3046\u304b Time#initialize \u3067\u547c\u3073\u51fa\u3055\u308c\u308b\u73fe\u5728\u6642\u523b\u306fclock_gettime\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308c\u3070 CLOCK_REALTIME \u56fa\u5b9a\u3067\u547c\u3073\u51fa\u3055\u308c\u3066\u3044\u308b\u3002\u306a\u3044\u5834\u5408\u306fgettimeofday(macOS\u306a\u3069)\u3092\u4f7f\u3063\u3066\u3044\u308b\u3002\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u306f\u66f8\u304b\u308c\u3066\u3044\u306a\u3044\u304c\u3001\u5185\u90e8\u3067clock_gettime/gettimeofday\u304c\u5931\u6557\u3057\u305f\u5834\u5408\u306f rb_sys_fail \u3067\u4f8b\u5916\u3092\u51fa\u3059\u3002\n\nPython3 (3.3\u4ee5\u964d)\n\nCPython 3.6.0\n\n\ntime.clock_gettime\nPython\u30823.3\u4ee5\u964d\u3067\u306fRuby\u3068\u540c\u69d8\u306b time.clock_gettime(clock_id) \u3067\u76f4\u63a5 clock_gettime(2) \u3092\u547c\u3076\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u305f\u3060\u3057clock_id\u306b\u6e21\u3059\u3053\u3068\u306e\u3067\u304d\u308b\u3082\u306e\u306f\u30a2\u30f3\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30c3\u30c9\u3067\u3042\u308b\u4e0a\u306b\u3001\u3069\u3046\u3084\u3089 CLOCK_MONOTONIC_COARSE \u306a\u3069\u306e\u5b9a\u6570\u306f\u6e21\u3059\u3053\u3068\u304c\u3067\u304d\u306a\u3044(3.6.0\u73fe\u5728)\u3002\u305d\u3082\u305d\u3082Python\u306f\u5185\u90e8\u3067 CLOCK_MONOTONIC_COARSE \u3092\u4f7f\u3063\u305f\u308a\u5916\u304b\u3089\u6e21\u3059API\u3092\u63d0\u4f9b\u3057\u3066\u3044\u306a\u3044\u3088\u3046\u3060\u3002\npytime.c\u3092\u307f\u308b\u3068pymonotonic\u95a2\u6570\u3067 CLOCK_MONOTONIC \u3001pygettimeofday\u95a2\u6570\u3067 CLOCK_REALTIME \u56fa\u5b9a\u3067\u305d\u308c\u305e\u308c\u4f7f\u308f\u308c\u3066\u3044\u308b\u3002pymonotonic\u3067\u306fmacOS\u306e\u5834\u5408 mach_absolute_time \u3092\u3001Solaris\u306e\u5834\u5408 CLOCK_HIGHRES \u3092\u6e21\u3057\u3066\u3044\u308b\u3002\n\ntime.time\n\u6700\u3082\u3088\u304f\u4f7f\u308f\u308c\u308b\u3067\u3042\u308d\u3046time.time() \u306f pygetimeofday \u95a2\u6570\u3092\u5185\u90e8\u3067\u547c\u3093\u3067\u304a\u308a\u3001\u3053\u308c\u306f time.clock_gettime(CLOCK_REALTIME) \u3068\u7b49\u4fa1\u3068\u306a\u308b\u3002Ruby\u306eTime.now\u540c\u69d8\u306bfallback\u5148\u3068\u3057\u3066gettimeofday(2)\u3092\u4f7f\u3063\u3066\u3044\u308b\u3002\n\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u547c\u3073\u51fa\u3057\u306b\u5931\u6557\u3057\u305f\u5834\u5408\u306f\u5185\u90e8\u3067NULL\u3092\u8fd4\u3057\u3066\u3044\u308b\u304c\u3088\u304f\u308f\u304b\u3089\u3093\u3002\n\npep418\nPython3.3\u3067time\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u65b0\u8a2d\u3055\u308c\u305fclock\u7cfb\u306e\u63d0\u6848PEP\u306f\u3053\u308c https://www.python.org/dev/peps/pep-0418/\n\nPerl5\n\nPerl 5.24\n\n\u672c\u4f53\u306b\u4ed8\u5c5e\uff1f\u3057\u3066\u3044\u308bTime::HiRes\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30c7\u30d5\u30a1\u30af\u30c8\u306e\u3088\u3046\u3060\u3002\n\nclock_gettime\nclock_gettime \u306b CLOCK_MONOTONIC \u3084 CLOCK_REALTIME \u3092\u6e21\u305b\u308b\u3002Ruby,Python\u540c\u69d8\u3001clock_gettime\u306fOS\u5074\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u751f\u3048\u306a\u3044\u306e\u3067gettimofday(2)\u306bfallback\u3059\u308b\u4ed5\u7d44\u307f\u306f\u306a\u3044\u3002\u73fe\u6642\u70b9\u3067\u6700\u65b0\u306emacOS Sierra\u3067\u65b0\u8a2d\u3055\u308c\u305fAPI\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u306a\u304b\u3063\u305f\u304c\u3001FreeBSD\u306e CLOCK_MONOTONIC_FAST \u306a\u3069\u306f\u5b9a\u6570\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002\n\ntime\ntime\u95a2\u6570\u306f\u5185\u90e8\u3067\u306fgettimeofday(2)\u3092\u547c\u3093\u3067\u3044\u308b\u3002gettimeofday(2)\u306e\u547c\u3073\u51fa\u3057\u306b\u5931\u6557\u3057\u305f\u5834\u5408\u306b-1.0\u3092\u8fd4\u3059\u3088\u3046\u3060\u3002\u3044\u3063\u305f\u3044\u3053\u308c\u306f\u3069\u3046\u3044\u3046\u3053\u3068\u3060\u308d\u3046\u3068\u8003\u3048\u305f\u3068\u3053\u308d\u3001\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306e\u5931\u6557\u30b9\u30c6\u30fc\u30bf\u30b9\u3092float\u3068\u3057\u3066\u8868\u73fe\u3057\u3066\u3044\u308b\u306e\u3060\u308d\u3046\u3068\u601d\u3044\u81f3\u3063\u305f\u3002Perl\u306b\u306f\u76f4\u548c\u578b\u3082\u76f4\u7a4d\u578b\u3082\u4f8b\u5916\u3082\u306a\u3044\u306e\u3067\u3053\u306e\u3088\u3046\u306b\u8fd4\u308a\u5024\u306e\u610f\u5473\u304c\u6df7\u5728\u3057\u305f\u8868\u73fe\u306b\u3059\u308b\u3088\u308a\u306a\u3044\u306e\u3060\u308d\u3046\u3002\n\u3081\u3093\u3069\u304f\u3055\u304f\u306a\u3063\u305f\u306e\u3067\u96d1\u306b\u306a\u3063\u305f\u3002\n\nC++\n\ngcc6.2\n\nSTL\u306b\u3042\u308bstd::chrono(libstdc++-v3/src/c++11/chrono.cc) \u3092\u307f\u308b\u3002\n\nstd::chrono::system_clock::now\n\nclock_gettime(2)\u304c\u3042\u308c\u3070 CLOCK_REALTIME \u3092\u4f7f\u3046\n\u306a\u3051\u308c\u3070 gettimeofday(2) \u3092\u4f7f\u3046\n\u305d\u308c\u3082\u306a\u3051\u308c\u3070 time(2) \u3092\u4f7f\u3046\n\n\nstd::chrono::steady_clock::now\n\nclock_gettime(2)\u304c\u3042\u308c\u3070 CLOCK_MONOTONIC \u3092\u4f7f\u3046\n\u306a\u3051\u308c\u3070 std::chrono::system_clock \u3092\u4f7f\u3063\u3066\u5dee\u5206\u3092\u6c42\u3081\u308b\n\n\u3068\u306a\u3063\u3066\u3044\u308b\u3002\n\nGo\n\nGo 1.8rc2\n\n\u591a\u304f\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0(Linux,FreeBSD,OpenBSD)\u3067\u306f\u3001\u5404\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3054\u3068\u306b now \u306e\u5b9f\u88c5\u306b  CLOCK_REALTIME \u3001 nanotime \u306e\u5b9f\u88c5\u306b CLOCK_MONOTONIC \u3092\u4f7f\u3063\u3066\u3044\u308b\u3002NetBSD,Solaris\u306b\u95a2\u3057\u3066\u306fnanotime\u306e\u5b9f\u88c5\u306b\u3082 CLOCK_REALTIME \u3092\u7528\u3044\u3066\u3044\u308b\u304c\u3001\u3053\u308c\u306f\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3002Plan9\u306f\u306a\u3093\u304b\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3002\n\u9759\u7684\u30ea\u30f3\u30af\u306a\u30d0\u30a4\u30ca\u30ea\u3068\u3044\u3046\u4e8b\u60c5\u304c\u3042\u308b\u305f\u3081\u304b\u3001macOS\u3067\u306f\u4e8b\u60c5\u304c\u8fbc\u307f\u5165\u3063\u3066\u3044\u308b\u3002\u3057\u304b\u3057\u3053\u3061\u3089\u3082\u3088\u304f\u308f\u304b\u3089\u305a\u3002\u53c2\u7167\u3055\u308c\u3066\u3044\u305fURL\u3060\u3051\u306f\u3063\u3066\u304a\u304f\u3002 https://opensource.apple.com/source/xnu/xnu-1699.26.8/osfmk/i386/cpu_capabilities.h\nFreeBSD\u3067\u306f 8-STABLE\u306e\u30b5\u30dd\u30fc\u30c8\u3092\u5207\u308c\u3070 CLOCK_MONOTONIC_FAST \u3092\u4f7f\u3048\u308b\u3068\u3042\u308b\u304c\u3001Linux\u3067\u306f CLOCK_MONOTONIC_COARSE \u30922.6.32\u4ee5\u524d\u306e\u30b5\u30dd\u30fc\u30c8\u3092\u5207\u308c\u3070\u3092\u4f7f\u3048\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u66f8\u304b\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u3002\n// func now() (sec int64, nsec int32)\nTEXT time\u00b7now(SB), NOSPLIT, $32\n    MOVL    $232, AX // clock_gettime\n    MOVQ    $0, DI      // CLOCK_REALTIME\n    LEAQ    8(SP), SI\n    SYSCALL\n    MOVQ    8(SP), AX   // sec\n    MOVQ    16(SP), DX  // nsec\n\n    // sec is in AX, nsec in DX\n    MOVQ    AX, sec+0(FP)\n    MOVL    DX, nsec+8(FP)\n    RET\n\nTEXT runtime\u00b7nanotime(SB), NOSPLIT, $32\n    MOVL    $232, AX\n    // We can use CLOCK_MONOTONIC_FAST here when we drop\n    // support for FreeBSD 8-STABLE.\n    MOVQ    $4, DI      // CLOCK_MONOTONIC\n    LEAQ    8(SP), SI\n    SYSCALL\n    MOVQ    8(SP), AX   // sec\n    MOVQ    16(SP), DX  // nsec\n\n    // sec is in AX, nsec in DX\n    // return nsec in AX\n    IMULQ   $1000000000, AX\n    ADDQ    DX, AX\n    MOVQ    AX, ret+0(FP)\n    RET\n\n\nRust\n\n1.16.0-nightly\n\n\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30eastd::time\u306b\u304a\u3044\u3066\u591a\u304f\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u306f Instant::now \u306f CLOCK_MONOTONIC \u56fa\u5b9a\u3001 SystemTime::now \u306f CLOCK_REALTIME \u56fa\u5b9a\u3068\u306a\u3063\u3066\u3044\u308b\u3002macOS\u306b\u95a2\u3057\u3066\u306f\u305d\u308c\u305e\u308c mach_absolute_time / gettimeofday \u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u3002Ruby\u306e\u30bd\u30fc\u30b9\u306e\u30b3\u30e1\u30f3\u30c8\u304b\u3089\u307f\u308b\u306b CLOCK_MONOTONIC \u306fLinux 2.5.63, FreeBSD 3.0, NetBSD 2.0, OpenBSD 3.4 (\u305d\u3057\u3066\u3044\u3064\u304b\u3089\u304b\u306f\u4e0d\u660e\u3060\u304c\u3053\u3053\u6700\u8fd1\u306eDragonflyBSD) \u3067\u554f\u984c\u306a\u304f\u52d5\u304f\u306f\u305a\u3067\u3042\u308b\u3002\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u547c\u3073\u51fa\u3057\u306b\u5931\u6557\u3057\u305f\u5834\u5408panic\u3059\u308b\u3002\n\nInstant::now\n\nmach_absolute_time (macOS/iOS)\nCLOCK_MONOTONIC (Linux/Android)\n\n\nSystemTime::now\n\ngettimeofday (macOS/iOS)\nCLOCK_REALTIME (Linux/Android)\n\n\nrust-coarsetime crate\n\u7cbe\u5ea6\u3088\u308a\u901f\u5ea6\u304c\u6b32\u3057\u3044\u5834\u5408\u306frust-coarsetime \u304c\u4f7f\u3048\u308b\u3002rust-coarsetime\u306fLinux/OSX/FreeBSD(DragonflyBSD)\u306b\u304a\u3044\u3066\u305d\u308c\u305e\u308c CLOCK_MONOTONIC_COARSE / CLOCK_MONOTONIC_RAW_APPROX / CLOCK_MONOTONIC_FAST \u3092\u4f7f\u3063\u3066\u3044\u308b\u3002\n\nD\u8a00\u8a9e\n\nphobos (dmd-2.073.0)\n\n\u6642\u523b\u53d6\u5f97\u306eAPI\u3068\u3057\u3066\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30eaPhobos\u306e std.datetime \u306b Clock.currTime / Clock.currStdTime \u304c\u3042\u308a\u3001ClockType\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u3044\u305a\u308c\u3082\u5185\u90e8\u7684\u306b\u306f currStdTime\u95a2\u6570\u3092\u547c\u3093\u3067\u3044\u308b\u3002\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u547c\u3073\u51fa\u3057\u306b\u5931\u6557\u3057\u305f\u5834\u5408TimeException\u4f8b\u5916\u3092\u9001\u51fa\u3059\u308b\u3002\nClockType\u306e\u6307\u5b9a\u306b\u3088\u308bcurrStdTime\u5404OS\u3054\u3068\u306e\u5b9f\u88c5\u306f\u4ee5\u4e0b\u306e\u8868\u306b\u307e\u3068\u3081\u308b\u3002Sierra\u306e\u65b0API\u30b5\u30dd\u30fc\u30c8\u304c\u306a\u304b\u3063\u305f\u308a\u3053\u3053\u306e\u5206\u5c90\u306b\u306a\u3044OS(\u4f8b\u3048\u3070OpenBSD)\u306f\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306bUnsupported OS\u3068\u3057\u3066\u6b7b\u306c\u3002\n\u3053\u3053\u3067 time(2)/gettimeofday(2) \u306f\u305d\u308c\u305e\u308c\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u8868\u3057\u3001\u5b9a\u6570\u3063\u307d\u3044\u3084\u3064\u306f clock_gettime(2) \u306e\u5f15\u6570\u306b\u6e21\u3055\u308c\u308b\u5b9a\u6570\u3067\u3042\u308b\u3002\n\nClockType.second\n\n\ntime(2) (Linux)\ntime(2) (OSX)\nCLOCK_SECOND (FreeBSD 8.1)\ntime(2) (NetBSD)\ntime(2) (Solaris)\n\n\nClockType.coarse\n\n\nCLOCK_REALTIME_COARSE (Linux 2.6.32)\ngettimeofday(2) (OSX)\nCLOCK_REALTIME_FAST (FreeBSD 8.1)\ngettimeofday(2) (NetBSD)\n CLOCK_REALTIME (Solaris)\n\n\n\nClockType.normal\n\n\nCLOCK_REALTIME (Linux 2.5.63)\ngettimeofday(2) (OSX)\nCLOCK_REALTIME (FreeBSD 3.0)\ngettimeofday(2) (NetBSD)\n CLOCK_REALTIME (Solaris)\n\n\n\nClockType.precise\n\n\nCLOCK_REALTIME (Linux 2.5.63)\ngettimeofday(2) (OSX)\nCLOCK_REALTIME_PRECISE (FreeBSD 8.1)\ngettimeofday(2) (NetBSD)\nCLOCK_REALTIME (Solaris)\n\n\n\n\u3042\u3089\u3059\u3058: \u5404\u8a00\u8a9e\u306e `clock_gettime(2)` \u306e\u5f15\u6570\u306e\u6271\u3044\u3092\u8abf\u67fb\u3057\u3066\u3044\u305f\u3089\u3001\u3053\u306e\u3088\u3046\u306a\u5947\u3063\u602a\u306a\u6587\u7ae0\u304c\u3067\u304d\u3042\u304c\u3063\u3066\u3044\u305f\u3002\u305d\u3046\u3044\u3046\u4e8b\u60c5\u3067\u3042\u308b\u306e\u3067\u3001Windows\u95a2\u4fc2\u306e\u8a18\u8ff0\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u5f8c\u3005\u8ffd\u52a0\u3059\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n## clock_gettime\n\n`clock_gettime(2)` \u306fSingle Unix Specification v2\u306b\u3088\u3063\u3066\u898f\u683c\u5316\u3055\u308c\u3066\u3044\u308b\u6642\u9593\u53d6\u5f97\u306e\u305f\u3081\u306eAPI\u3067\u3042\u308b\u3002 `clock_gettime(2)` \u306b\u306f `clock_id` \u306b\u6e21\u3059\u5b9a\u6570\u306b\u3088\u3063\u3066\u6642\u523b\u53d6\u5f97\u306e\u30bb\u30de\u30f3\u30c6\u30a3\u30af\u30b9\u3084\u7cbe\u5ea6\u304c\u5909\u308f\u3063\u3066\u304f\u308b\u3002\n\n\u4e00\u4f8b\u3092Linux\u306eman\u304b\u3089\u5f15\u7528\u3059\u308b\u3068\u3001\n\n```\n- CLOCK_REALTIME\n\u5b9f\u6642\u9593\u3092\u8a08\u6e2c\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u3067\u4e00\u610f\u306a\u6642\u9593\u3002 \u3053\u306e\u30af\u30ed\u30c3\u30af\u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306f\u9069\u5207\u306a\u7279\u6a29\u304c\u5fc5\u8981\u3067\u3042\u308b\u3002 \u3053\u306e\u30af\u30ed\u30c3\u30af\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u6642\u9593\u306e\u4e0d\u9023\u7d9a\u306a\u5909\u5316 (\u4f8b\u3048\u3070\u3001\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\u8005\u304c \u30b7\u30b9\u30c6\u30e0\u6642\u9593\u3092\u624b\u52d5\u3067\u5909\u66f4\u3057\u305f\u5834\u5408\u306a\u3069) \u3084 adjtime \u3084 NTP \u304c\u884c\u3046 \u6bb5\u968e\u7684\u306a\u8abf\u6574\u306e\u5f71\u97ff\u3092\u53d7\u3051\u308b\u3002\nCLOCK_REALTIME_COARSE (Linux 2.6.32 \u4ee5\u964d; Linux \u7279\u6709)\n\u9ad8\u901f\u3060\u304c\u7cbe\u5ea6\u304c\u4f4e\u3044 CLOCK_REALTIME\u3002\u901f\u5ea6\u304c\u975e\u5e38\u306b\u5fc5\u8981\u3067\u3001\u304b\u3064\u9ad8\u7cbe\u5ea6\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u304c\u4e0d\u8981\u306a\u5834\u5408\u306b\u4f7f\u7528\u3059\u308b\u3068\u3088\u3044\u3002\nCLOCK_MONOTONIC\n\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u30af\u30ed\u30c3\u30af\u3067\u3001\u3042\u308b\u958b\u59cb\u6642\u70b9\u304b\u3089\u306e\u5358\u8abf\u5897\u52a0\u306e\u6642\u9593\u3067 \u8868\u73fe\u3055\u308c\u308b\u30af\u30ed\u30c3\u30af (\u958b\u59cb\u6642\u70b9\u304c\u3069\u306e\u6642\u70b9\u3068\u306a\u308b\u304b\u306f\u898f\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044)\u3002 \u3053\u306e\u6642\u8a08\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u6642\u9593\u306e\u4e0d\u9023\u7d9a\u306a\u5909\u5316 (\u4f8b\u3048\u3070\u3001\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\u8005\u304c\u30b7\u30b9\u30c6 \u30e0\u6642\u9593\u3092\u624b\u52d5\u3067\u5909\u66f4\u3057\u305f\u5834\u5408\u306a\u3069) \u306e\u5f71\u97ff\u3092\u53d7\u3051\u306a\u3044\u304c\u3001 adjtime(3) \u3084 NTP \u304c\u884c\u3046\u6bb5\u968e\u7684\u306a\u8abf\u6574\u306e\u5f71\u97ff\u3092\u53d7\u3051\u308b\u3002\nCLOCK_MONOTONIC_COARSE (Linux 2.6.32 \u4ee5\u964d; Linux \u7279\u6709)\n\u9ad8\u901f\u3060\u304c\u7cbe\u5ea6\u304c\u4f4e\u3044 CLOCK_MONOTONIC\u3002\u901f\u5ea6\u304c\u975e\u5e38\u306b\u5fc5\u8981\u3067\u3001\u304b\u3064\u9ad8\u7cbe\u5ea6\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u304c\u4e0d\u8981\u306a\u5834\u5408\u306b\u4f7f\u7528\u3059\u308b\u3068\u3088\u3044\u3002\nCLOCK_MONOTONIC_RAW (Linux 2.6.28 \u4ee5\u964d; Linux \u7279\u6709)\nCLOCK_MONOTONIC \u3068\u540c\u69d8\u3060\u304c\u3001NTP \u306b\u3088\u308b\u8abf\u6574\u3084 adjtime(3) \u304c\u884c\u3046 \u6bb5\u968e\u7684\u306a\u8abf\u6574\u306e\u5f71\u97ff\u3092\u53d7\u3051\u306a\u3044\u3001\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u306b\u3088\u308b\u751f\u306e\u6642\u523b\u3078\u306e\u30a2\u30af\u30bb\u30b9 \u304c\u3067\u304d\u308b\u3002\nCLOCK_BOOTTIME (Linux 2.6.39 \u4ee5\u964d; Linux \u56fa\u6709)\nCLOCK_MONOTONIC \u3068\u540c\u3058\u3060\u304c\u3001\u30b7\u30b9\u30c6\u30e0\u304c\u30b5\u30b9\u30da\u30f3\u30c9\u3055\u308c\u3066\u3044\u308b\u6642\u9593\u3082\u542b\u307e\u308c\u308b\u70b9\u304c\u7570\u306a\u308b\u3002 \u3053\u308c\u3092\u4f7f\u3046\u3068\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u30b5\u30b9\u30da\u30f3\u30c9\u72b6\u614b\u3082\u6271\u3048\u308b \"monotonic\" \u306a\u30af\u30ed\u30c3\u30af\u3092\u5f97\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002 \u3057\u304b\u3082\u3001 CLOCK_REALTIME \u306b\u304a\u3051\u308b\u8907\u96d1\u306a\u51e6\u7406\u3092\u884c\u3046\u5fc5\u8981\u3082\u306a\u304f\u306a\u308b\u3002 CLOCK_REALTIME \u3067\u306f\u3001 settimeofday(2) \u3092\u4f7f\u3063\u3066\u6642\u523b\u3092\u5909\u66f4\u3057\u305f\u5834\u5408\u3001\u6642\u523b\u306b\u4e0d\u9023\u7d9a\u306a\u5909\u5316\u304c\u767a\u751f\u3059\u308b\u304b\u3089\u3060\u3002\n```\n\n\u3068\u3042\u308b\u3002\u3053\u306e\u5b9a\u6570\u306fOS\u306b\u3088\u3063\u3066\u307e\u3061\u307e\u3061\u3067\u3042\u308b\u3002\u307e\u305fsierra\u306e\u3088\u3046\u306b `clock_gettime_nsec_np` \u3068\u3044\u3046\u7279\u6b8a\u306aAPI\u3092\u8ffd\u52a0\u3057\u3066\u3044\u308b\u3082\u306e\u3082\u3042\u308b\u3002\n\n\u3053\u3061\u3089\u306e\u30d6\u30ed\u30b0\u306f\u5b9f\u88c5\u306e\u5f15\u7528\u7b87\u6240\u304c\u53c2\u8003\u306b\u306a\u3063\u305f\u3002 http://d.hatena.ne.jp/yohei-a/20140913/1410628229\n\n## Ruby\n\n- CRuby 2.4.0\n\n### Process.clock_gettime\n\nRuby\u306f\u76f4\u63a5 `clock_gettime(2)` \u3092\u547c\u3076API\u3092\u63d0\u4f9b\u3057\u3066\u3044\u308b\u3002Process.clock_gettime \u306e\u5f15\u6570\u306b `clock_id` \u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\u6307\u5b9a\u3067\u304d\u308b\u306e\u306fprocess.c\u306b\u3088\u308b\u3068\u4ee5\u4e0b\u306e\u5b9a\u6570\u3002\u3061\u3083\u3093\u3068\u3069\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u8ffd\u52a0\u3055\u308c\u305f\u306e\u304b\u3082\u66f8\u3044\u3066\u304a\u308a\u5927\u5909\u3059\u3070\u3089\u3057\u3044\u3002Solaris\u306eCLOCK_HIGHRES\u306b\u95a2\u3057\u3066\u306f\u6307\u5b9a\u304c\u306a\u304b\u3063\u305f\u3002\u307e\u305fDragonflyBSD\u3082\u5c11\u306a\u304f\u3068\u3082\u76f4\u8fd1\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306fFreeBSD\u3068\u540c\u3058\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3067\u304d\u308b\u306f\u305a\u3067\u3042\u308b\u304c\u8a00\u53ca\u304c\u306a\u304b\u3063\u305f\u3002\n\n```\n *  [CLOCK_REALTIME] SUSv2 to 4, Linux 2.5.63, FreeBSD 3.0, NetBSD 2.0, OpenBSD 2.1, macOS 10.12\n *  [CLOCK_MONOTONIC] SUSv3 to 4, Linux 2.5.63, FreeBSD 3.0, NetBSD 2.0, OpenBSD 3.4, macOS 10.12\n *  [CLOCK_PROCESS_CPUTIME_ID] SUSv3 to 4, Linux 2.5.63, OpenBSD 5.4, macOS 10.12\n *  [CLOCK_THREAD_CPUTIME_ID] SUSv3 to 4, Linux 2.5.63, FreeBSD 7.1, OpenBSD 5.4, macOS 10.12\n *  [CLOCK_VIRTUAL] FreeBSD 3.0, OpenBSD 2.1\n *  [CLOCK_PROF] FreeBSD 3.0, OpenBSD 2.1\n *  [CLOCK_REALTIME_FAST] FreeBSD 8.1\n *  [CLOCK_REALTIME_PRECISE] FreeBSD 8.1\n *  [CLOCK_REALTIME_COARSE] Linux 2.6.32\n *  [CLOCK_REALTIME_ALARM] Linux 3.0\n *  [CLOCK_MONOTONIC_FAST] FreeBSD 8.1\n *  [CLOCK_MONOTONIC_PRECISE] FreeBSD 8.1\n *  [CLOCK_MONOTONIC_COARSE] Linux 2.6.32\n *  [CLOCK_MONOTONIC_RAW] Linux 2.6.28, macOS 10.12\n *  [CLOCK_MONOTONIC_RAW_APPROX] macOS 10.12\n *  [CLOCK_BOOTTIME] Linux 2.6.39\n *  [CLOCK_BOOTTIME_ALARM] Linux 3.0\n *  [CLOCK_UPTIME] FreeBSD 7.0, OpenBSD 5.5\n *  [CLOCK_UPTIME_FAST] FreeBSD 8.1\n *  [CLOCK_UPTIME_RAW] macOS 10.12\n *  [CLOCK_UPTIME_RAW_APPROX] macOS 10.12\n *  [CLOCK_UPTIME_PRECISE] FreeBSD 8.1\n *  [CLOCK_SECOND] FreeBSD 8.1\n```\n\n### Time.now\n\n\u6700\u3082\u3088\u304f\u4f7f\u308f\u308c\u308b\u3067\u3042\u308d\u3046 `Time.now` \u3068\u3044\u3046\u304b `Time#initialize` \u3067\u547c\u3073\u51fa\u3055\u308c\u308b\u73fe\u5728\u6642\u523b\u306fclock_gettime\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308c\u3070 `CLOCK_REALTIME` \u56fa\u5b9a\u3067\u547c\u3073\u51fa\u3055\u308c\u3066\u3044\u308b\u3002\u306a\u3044\u5834\u5408\u306fgettimeofday(macOS\u306a\u3069)\u3092\u4f7f\u3063\u3066\u3044\u308b\u3002\n\n[\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://ruby-doc.org/core-2.4.0/Time.html#method-c-now)\u306b\u306f\u66f8\u304b\u308c\u3066\u3044\u306a\u3044\u304c\u3001\u5185\u90e8\u3067clock_gettime/gettimeofday\u304c\u5931\u6557\u3057\u305f\u5834\u5408\u306f `rb_sys_fail` \u3067\u4f8b\u5916\u3092\u51fa\u3059\u3002\n\n## Python3 (3.3\u4ee5\u964d)\n\n- CPython 3.6.0\n\n### time.clock_gettime\n\nPython\u30823.3\u4ee5\u964d\u3067\u306fRuby\u3068\u540c\u69d8\u306b `time.clock_gettime(clock_id)` \u3067\u76f4\u63a5 `clock_gettime(2)` \u3092\u547c\u3076\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u305f\u3060\u3057clock_id\u306b\u6e21\u3059\u3053\u3068\u306e\u3067\u304d\u308b\u3082\u306e\u306f\u30a2\u30f3\u30c9\u30ad\u30e5\u30e1\u30f3\u30c6\u30c3\u30c9\u3067\u3042\u308b\u4e0a\u306b\u3001\u3069\u3046\u3084\u3089 `CLOCK_MONOTONIC_COARSE` \u306a\u3069\u306e\u5b9a\u6570\u306f\u6e21\u3059\u3053\u3068\u304c\u3067\u304d\u306a\u3044(3.6.0\u73fe\u5728)\u3002\u305d\u3082\u305d\u3082Python\u306f\u5185\u90e8\u3067 `CLOCK_MONOTONIC_COARSE` \u3092\u4f7f\u3063\u305f\u308a\u5916\u304b\u3089\u6e21\u3059API\u3092\u63d0\u4f9b\u3057\u3066\u3044\u306a\u3044\u3088\u3046\u3060\u3002\n\npytime.c\u3092\u307f\u308b\u3068pymonotonic\u95a2\u6570\u3067 `CLOCK_MONOTONIC` \u3001pygettimeofday\u95a2\u6570\u3067 `CLOCK_REALTIME` \u56fa\u5b9a\u3067\u305d\u308c\u305e\u308c\u4f7f\u308f\u308c\u3066\u3044\u308b\u3002pymonotonic\u3067\u306fmacOS\u306e\u5834\u5408 `mach_absolute_time` \u3092\u3001Solaris\u306e\u5834\u5408 `CLOCK_HIGHRES` \u3092\u6e21\u3057\u3066\u3044\u308b\u3002\n\n### time.time\n\n\u6700\u3082\u3088\u304f\u4f7f\u308f\u308c\u308b\u3067\u3042\u308d\u3046`time.time()` \u306f `pygetimeofday` \u95a2\u6570\u3092\u5185\u90e8\u3067\u547c\u3093\u3067\u304a\u308a\u3001\u3053\u308c\u306f `time.clock_gettime(CLOCK_REALTIME)` \u3068\u7b49\u4fa1\u3068\u306a\u308b\u3002Ruby\u306eTime.now\u540c\u69d8\u306bfallback\u5148\u3068\u3057\u3066gettimeofday(2)\u3092\u4f7f\u3063\u3066\u3044\u308b\u3002\n\n\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u547c\u3073\u51fa\u3057\u306b\u5931\u6557\u3057\u305f\u5834\u5408\u306f\u5185\u90e8\u3067NULL\u3092\u8fd4\u3057\u3066\u3044\u308b\u304c\u3088\u304f\u308f\u304b\u3089\u3093\u3002\n\n### pep418\n\nPython3.3\u3067time\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u65b0\u8a2d\u3055\u308c\u305fclock\u7cfb\u306e\u63d0\u6848PEP\u306f\u3053\u308c https://www.python.org/dev/peps/pep-0418/\n\n## Perl5\n\n- Perl 5.24\n\n\u672c\u4f53\u306b\u4ed8\u5c5e\uff1f\u3057\u3066\u3044\u308bTime::HiRes\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30c7\u30d5\u30a1\u30af\u30c8\u306e\u3088\u3046\u3060\u3002\n\n### clock_gettime\n\n`clock_gettime` \u306b `CLOCK_MONOTONIC` \u3084 `CLOCK_REALTIME` \u3092\u6e21\u305b\u308b\u3002Ruby,Python\u540c\u69d8\u3001clock_gettime\u306fOS\u5074\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u751f\u3048\u306a\u3044\u306e\u3067gettimofday(2)\u306bfallback\u3059\u308b\u4ed5\u7d44\u307f\u306f\u306a\u3044\u3002\u73fe\u6642\u70b9\u3067\u6700\u65b0\u306emacOS Sierra\u3067\u65b0\u8a2d\u3055\u308c\u305fAPI\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u306a\u304b\u3063\u305f\u304c\u3001FreeBSD\u306e `CLOCK_MONOTONIC_FAST` \u306a\u3069\u306f\u5b9a\u6570\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002\n\n### time\n\ntime\u95a2\u6570\u306f\u5185\u90e8\u3067\u306fgettimeofday(2)\u3092\u547c\u3093\u3067\u3044\u308b\u3002gettimeofday(2)\u306e\u547c\u3073\u51fa\u3057\u306b\u5931\u6557\u3057\u305f\u5834\u5408\u306b-1.0\u3092\u8fd4\u3059\u3088\u3046\u3060\u3002\u3044\u3063\u305f\u3044\u3053\u308c\u306f\u3069\u3046\u3044\u3046\u3053\u3068\u3060\u308d\u3046\u3068\u8003\u3048\u305f\u3068\u3053\u308d\u3001\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306e\u5931\u6557\u30b9\u30c6\u30fc\u30bf\u30b9\u3092float\u3068\u3057\u3066\u8868\u73fe\u3057\u3066\u3044\u308b\u306e\u3060\u308d\u3046\u3068\u601d\u3044\u81f3\u3063\u305f\u3002Perl\u306b\u306f\u76f4\u548c\u578b\u3082\u76f4\u7a4d\u578b\u3082\u4f8b\u5916\u3082\u306a\u3044\u306e\u3067\u3053\u306e\u3088\u3046\u306b\u8fd4\u308a\u5024\u306e\u610f\u5473\u304c\u6df7\u5728\u3057\u305f\u8868\u73fe\u306b\u3059\u308b\u3088\u308a\u306a\u3044\u306e\u3060\u308d\u3046\u3002\n\n\u3081\u3093\u3069\u304f\u3055\u304f\u306a\u3063\u305f\u306e\u3067\u96d1\u306b\u306a\u3063\u305f\u3002\n\n## C++\n\n- gcc6.2\n\nSTL\u306b\u3042\u308bstd::chrono(libstdc++-v3/src/c++11/chrono.cc) \u3092\u307f\u308b\u3002\n\n### std::chrono::system_clock::now\n\n1. clock_gettime(2)\u304c\u3042\u308c\u3070 `CLOCK_REALTIME` \u3092\u4f7f\u3046\n2. \u306a\u3051\u308c\u3070 gettimeofday(2) \u3092\u4f7f\u3046\n3. \u305d\u308c\u3082\u306a\u3051\u308c\u3070 time(2) \u3092\u4f7f\u3046\n\n### std::chrono::steady_clock::now\n\n1. clock_gettime(2)\u304c\u3042\u308c\u3070 `CLOCK_MONOTONIC` \u3092\u4f7f\u3046\n2. \u306a\u3051\u308c\u3070 std::chrono::system_clock \u3092\u4f7f\u3063\u3066\u5dee\u5206\u3092\u6c42\u3081\u308b\n\n\u3068\u306a\u3063\u3066\u3044\u308b\u3002\n\n## Go\n\n- Go 1.8rc2\n\n\u591a\u304f\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0(Linux,FreeBSD,OpenBSD)\u3067\u306f\u3001\u5404\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3054\u3068\u306b `now` \u306e\u5b9f\u88c5\u306b  `CLOCK_REALTIME` \u3001 `nanotime` \u306e\u5b9f\u88c5\u306b `CLOCK_MONOTONIC` \u3092\u4f7f\u3063\u3066\u3044\u308b\u3002NetBSD,Solaris\u306b\u95a2\u3057\u3066\u306fnanotime\u306e\u5b9f\u88c5\u306b\u3082 `CLOCK_REALTIME` \u3092\u7528\u3044\u3066\u3044\u308b\u304c\u3001\u3053\u308c\u306f\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3002Plan9\u306f\u306a\u3093\u304b\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3002\n\n\u9759\u7684\u30ea\u30f3\u30af\u306a\u30d0\u30a4\u30ca\u30ea\u3068\u3044\u3046\u4e8b\u60c5\u304c\u3042\u308b\u305f\u3081\u304b\u3001macOS\u3067\u306f\u4e8b\u60c5\u304c\u8fbc\u307f\u5165\u3063\u3066\u3044\u308b\u3002\u3057\u304b\u3057\u3053\u3061\u3089\u3082\u3088\u304f\u308f\u304b\u3089\u305a\u3002\u53c2\u7167\u3055\u308c\u3066\u3044\u305fURL\u3060\u3051\u306f\u3063\u3066\u304a\u304f\u3002 https://opensource.apple.com/source/xnu/xnu-1699.26.8/osfmk/i386/cpu_capabilities.h\n\nFreeBSD\u3067\u306f 8-STABLE\u306e\u30b5\u30dd\u30fc\u30c8\u3092\u5207\u308c\u3070 `CLOCK_MONOTONIC_FAST` \u3092\u4f7f\u3048\u308b\u3068\u3042\u308b\u304c\u3001Linux\u3067\u306f `CLOCK_MONOTONIC_COARSE` \u30922.6.32\u4ee5\u524d\u306e\u30b5\u30dd\u30fc\u30c8\u3092\u5207\u308c\u3070\u3092\u4f7f\u3048\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u66f8\u304b\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u3002\n\n```asm\n// func now() (sec int64, nsec int32)\nTEXT time\u00b7now(SB), NOSPLIT, $32\n\tMOVL\t$232, AX // clock_gettime\n\tMOVQ\t$0, DI\t\t// CLOCK_REALTIME\n\tLEAQ\t8(SP), SI\n\tSYSCALL\n\tMOVQ\t8(SP), AX\t// sec\n\tMOVQ\t16(SP), DX\t// nsec\n\n\t// sec is in AX, nsec in DX\n\tMOVQ\tAX, sec+0(FP)\n\tMOVL\tDX, nsec+8(FP)\n\tRET\n\nTEXT runtime\u00b7nanotime(SB), NOSPLIT, $32\n\tMOVL\t$232, AX\n\t// We can use CLOCK_MONOTONIC_FAST here when we drop\n\t// support for FreeBSD 8-STABLE.\n\tMOVQ\t$4, DI\t\t// CLOCK_MONOTONIC\n\tLEAQ\t8(SP), SI\n\tSYSCALL\n\tMOVQ\t8(SP), AX\t// sec\n\tMOVQ\t16(SP), DX\t// nsec\n\n\t// sec is in AX, nsec in DX\n\t// return nsec in AX\n\tIMULQ\t$1000000000, AX\n\tADDQ\tDX, AX\n\tMOVQ\tAX, ret+0(FP)\n\tRET\n```\n\n## Rust\n\n- 1.16.0-nightly\n\n\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30eastd::time\u306b\u304a\u3044\u3066\u591a\u304f\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u306f `Instant::now` \u306f `CLOCK_MONOTONIC` \u56fa\u5b9a\u3001 `SystemTime::now` \u306f `CLOCK_REALTIME` \u56fa\u5b9a\u3068\u306a\u3063\u3066\u3044\u308b\u3002macOS\u306b\u95a2\u3057\u3066\u306f\u305d\u308c\u305e\u308c `mach_absolute_time` / `gettimeofday` \u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u3002Ruby\u306e\u30bd\u30fc\u30b9\u306e\u30b3\u30e1\u30f3\u30c8\u304b\u3089\u307f\u308b\u306b `CLOCK_MONOTONIC` \u306fLinux 2.5.63, FreeBSD 3.0, NetBSD 2.0, OpenBSD 3.4 (\u305d\u3057\u3066\u3044\u3064\u304b\u3089\u304b\u306f\u4e0d\u660e\u3060\u304c\u3053\u3053\u6700\u8fd1\u306eDragonflyBSD) \u3067\u554f\u984c\u306a\u304f\u52d5\u304f\u306f\u305a\u3067\u3042\u308b\u3002\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u547c\u3073\u51fa\u3057\u306b\u5931\u6557\u3057\u305f\u5834\u5408panic\u3059\u308b\u3002\n\n### Instant::now\n\n- `mach_absolute_time (macOS/iOS)`\n- `CLOCK_MONOTONIC (Linux/Android)`\n\n### SystemTime::now\n\n- `gettimeofday (macOS/iOS)`\n- `CLOCK_REALTIME (Linux/Android)`\n\n### rust-coarsetime crate\n\n\u7cbe\u5ea6\u3088\u308a\u901f\u5ea6\u304c\u6b32\u3057\u3044\u5834\u5408\u306f[rust-coarsetime](https://github.com/jedisct1/rust-coarsetime) \u304c\u4f7f\u3048\u308b\u3002rust-coarsetime\u306fLinux/OSX/FreeBSD(DragonflyBSD)\u306b\u304a\u3044\u3066\u305d\u308c\u305e\u308c `CLOCK_MONOTONIC_COARSE` / `CLOCK_MONOTONIC_RAW_APPROX` / `CLOCK_MONOTONIC_FAST` \u3092\u4f7f\u3063\u3066\u3044\u308b\u3002\n\n## D\u8a00\u8a9e\n\n- phobos (dmd-2.073.0)\n\n\u6642\u523b\u53d6\u5f97\u306eAPI\u3068\u3057\u3066\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30eaPhobos\u306e std.datetime \u306b `Clock.currTime` / `Clock.currStdTime` \u304c\u3042\u308a\u3001ClockType\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u3044\u305a\u308c\u3082\u5185\u90e8\u7684\u306b\u306f currStdTime\u95a2\u6570\u3092\u547c\u3093\u3067\u3044\u308b\u3002\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u547c\u3073\u51fa\u3057\u306b\u5931\u6557\u3057\u305f\u5834\u5408TimeException\u4f8b\u5916\u3092\u9001\u51fa\u3059\u308b\u3002\n\nClockType\u306e\u6307\u5b9a\u306b\u3088\u308bcurrStdTime\u5404OS\u3054\u3068\u306e\u5b9f\u88c5\u306f\u4ee5\u4e0b\u306e\u8868\u306b\u307e\u3068\u3081\u308b\u3002Sierra\u306e\u65b0API\u30b5\u30dd\u30fc\u30c8\u304c\u306a\u304b\u3063\u305f\u308a\u3053\u3053\u306e\u5206\u5c90\u306b\u306a\u3044OS(\u4f8b\u3048\u3070OpenBSD)\u306f\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306bUnsupported OS\u3068\u3057\u3066\u6b7b\u306c\u3002\n\n\u3053\u3053\u3067 time(2)/gettimeofday(2) \u306f\u305d\u308c\u305e\u308c\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u8868\u3057\u3001\u5b9a\u6570\u3063\u307d\u3044\u3084\u3064\u306f clock_gettime(2) \u306e\u5f15\u6570\u306b\u6e21\u3055\u308c\u308b\u5b9a\u6570\u3067\u3042\u308b\u3002\n\n- ClockType.second\n    - `time(2) (Linux)`\n    - `time(2) (OSX)`\n    - `CLOCK_SECOND (FreeBSD 8.1)`\n    - `time(2) (NetBSD)`\n    - `time(2) (Solaris)`\n- ClockType.coarse\n    - `CLOCK_REALTIME_COARSE (Linux 2.6.32)`\n    - `gettimeofday(2) (OSX)`\n    - `CLOCK_REALTIME_FAST (FreeBSD 8.1)`\n    - `gettimeofday(2) (NetBSD)`\n    -  `CLOCK_REALTIME (Solaris)`\n- ClockType.normal\n    - `CLOCK_REALTIME (Linux 2.5.63)`\n    - `gettimeofday(2) (OSX)`\n    - `CLOCK_REALTIME (FreeBSD 3.0)`\n    - `gettimeofday(2) (NetBSD)`\n    -  `CLOCK_REALTIME (Solaris)`\n- ClockType.precise\n    - `CLOCK_REALTIME (Linux 2.5.63)`\n    - `gettimeofday(2) (OSX)`\n    - `CLOCK_REALTIME_PRECISE (FreeBSD 8.1)`\n    - `gettimeofday(2) (NetBSD)`\n    - `CLOCK_REALTIME (Solaris)`\n", "tags": ["dlang", "rust", "Ruby", "Python", "Go"]}