{"context": " More than 1 year has passed since last update.vmstat \u3068\u304b top \u3082\u3042\u308b\u3051\u3069\u306d\u3002\n\nfree\nfree \u304c\u3042\u308b\u3068\u5fc3\u304c\u843d\u3061\u7740\u304d\u307e\u3059\u306d\u3002cached \u304c\u5927\u304d\u3044\u3060\u3051\u3060\u3068\u5b89\u5fc3\u3057\u307e\u3059\u306d\u3002\n$ free\n             total       used       free     shared    buffers     cached\nMem:       3860692    1521364    2339328          0      85388    1049928\n-/+ buffers/cache:     386048    3474644\nSwap:            0          0          0\n\n\nps auxwwO-r\n\u30d7\u30ed\u30bb\u30b9\u3054\u3068\u306e\u30e1\u30e2\u30ea\u306f\u3053\u308c\u3067\u898b\u308c\u308b\u304b\u306a\u3002\u307e\u3041 O-r \u306f\u30bd\u30fc\u30c8\u306a\u306e\u3067\u597d\u304d\u306a\u306e\u306b\u5909\u3048\u305f\u3089\u826f\u3044\u3002\n$ ps auxwwO-r | head\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot      6912  0.0  0.1 111688  4276 ?        Ss   Apr01   0:00 sshd: ec2-user [priv]\nec2-user  6914  0.0  0.0 111820  2540 ?        S    Apr01   0:02 sshd: ec2-user@pts/0,pts/1,pts/2\nec2-user  8151  0.4  0.0 121992  2420 pts/1    Ss+  Apr01   5:13 -bash\nec2-user  9257  0.0  0.0 117488  2188 pts/0    Ss+  Apr01   0:00 -bash\nec2-user 29292  0.0  0.0 117384  2132 pts/2    Ss   04:11   0:00 -bash\nroot      1593  0.0  0.0  89044  2116 ?        Ss   Mar13   0:27 sendmail: accepting connections\nsmmsp     1600  0.0  0.0  80500  1692 ?        Ss   Mar13   0:00 sendmail: Queue runner@01:00:00 for /var/spool/clientmqueue\nroot     23677  0.0  0.0 183768  1416 ?        Sl   Mar29   0:00 /sbin/rsyslogd -i /var/run/syslogd.pid -c 5\nroot     23590  0.0  0.0  77936  1288 ?        Ss   Mar29   0:00 /usr/sbin/sshd\n\n\ncat /proc/meminfo\n\u7d50\u679c\u304c\u9577\u3044\u3057\u4f55\u3060\u304b\u826f\u304f\u5206\u304b\u3089\u306a\u3044\u305c! \u3067\u3082 Active \u3068\u304b Inactive \u3068\u304b\u5b57\u9762\u306b\u9a19\u3055\u308c\u3061\u3083\u3044\u3051\u306a\u3044\u3063\u3066\u3058\u3063\u3061\u3083\u3093\u304c\u8a00\u3063\u3066\u307e\u3057\u305f\u3002\u304d\u3063\u3068 /proc/meminfo\u3092\u8003\u3048\u308b - \u3081\u3082\u3081\u3082 \u3092\u901a\u308a\u3059\u304c\u308b\u3068\u8272\u3005\u5206\u304b\u308b\u3088\u3046\u306b\u306a\u308b\u306b\u9055\u3044\u3042\u308a\u307e\u305b\u3093\u3002\n$ cat /proc/meminfo | head -n 25\nMemTotal:        3860692 kB\nMemFree:         2339320 kB\nBuffers:           85388 kB\nCached:          1049928 kB\nSwapCached:            0 kB\nActive:           443068 kB\nInactive:         704024 kB\nActive(anon):      11788 kB\nInactive(anon):      392 kB\nActive(file):     431280 kB\nInactive(file):   703632 kB\nUnevictable:           0 kB\nMlocked:               0 kB\nSwapTotal:             0 kB\nSwapFree:              0 kB\nDirty:                 0 kB\nWriteback:             0 kB\nAnonPages:         11824 kB\nMapped:             7440 kB\nShmem:               404 kB\nSlab:             329724 kB\nSReclaimable:     318664 kB\nSUnreclaim:        11060 kB\nKernelStack:         544 kB\nPageTables:         1976 kB\n\n\ndstat -tclmgdnpy --tcp 5\n\u307c\u30fc\u3063\u3068\u773a\u3081\u3066\u3044\u308b\u3068\u3001\u305d\u308c\u3060\u3051\u3067\u7652\u3055\u308c\u307e\u3059\u306d\u3002\u3082\u3049\u71b1\u5e2f\u9b5a\u306a\u3093\u3066\u98fc\u308f\u306a\u304f\u3066\u3082\u5927\u4e08\u592b\u3067\u3059\u3002\u3069\u3093\u3060\u3051\u5897\u3059\u304b\u306f\u30bf\u30fc\u30df\u30ca\u30eb\u306e\u5e45\u3068\u76f8\u8ac7\u3057\u307e\u3057\u3087\u3046\n$ dstat -tclmgdnpy --tcp 5\n----system---- ----total-cpu-usage---- ---load-avg--- ------memory-usage----- ---paging-- -dsk/total- -net/total- ---procs--- ---system-- ----tcp-sockets----\n  date/time   |usr sys idl wai hiq siq| 1m   5m  15m | used  buff  cach  free|  in   out | read  writ| recv  send|run blk new| int   csw |lis act syn tim clo\n02-04 04:42:15|  0   0 100   0   0   0|   0 0.01 0.05| 381M 83.5M 1026M 2279M|   0     0 |2750B 3152B|   0     0 |  0   0 1.3|  27    20 |  3   1   0   0   0\n02-04 04:42:20|  0   0 100   0   0   0|   0 0.01 0.05| 381M 83.5M 1026M 2279M|   0     0 |   0     0 |  66B  133B|  0   0   0|  22    13 |  3   1   0   0   0\n02-04 04:42:25|  0   0 100   0   0   0|   0 0.01 0.05| 381M 83.5M 1026M 2279M|   0     0 |   0     0 |  66B  120B|  0   0   0|  21    13 |  3   1   0   0   0\n02-04 04:42:30|  0   0 100   0   0   0|   0 0.01 0.05| 381M 83.5M 1026M 2279M|   0     0 |   0     0 |  66B  120B|  0   0   0|  19    12 |  3   1   0   0   0\n02-04 04:42:35|  0   0 100   0   0   0|   0 0.01 0.05| 381M 83.5M 1026M 2279M|   0     0 |   0     0 |  66B  117B|  0   0   0|  21    12 |  3   1   0   0   0\n\n\nsudo slabtop -o -s c\n\u3053\u3063\u3061\u306f\u3042\u3093\u307e\u308a\u7652\u3055\u308c\u307e\u305b\u3093\u306d\u3002dentry \u3081!! \u3068\u3044\u3046\u611f\u3058\u3067\u3059\u3002\n$ sudo slabtop -o -s c | head -n 15\n Active / Total Objects (% used)    : 1695897 / 1700554 (99.7%)\n Active / Total Slabs (% used)      : 71781 / 71781 (100.0%)\n Active / Total Caches (% used)     : 67 / 96 (69.8%)\n Active / Total Size (% used)       : 323362.33K / 325133.74K (99.5%)\n Minimum / Average / Maximum Object : 0.01K / 0.19K / 8.00K\n\n  OBJS ACTIVE  USE OBJ SIZE  SLABS OBJ/SLAB CACHE SIZE NAME\n1297464 1297464 100%    0.19K  61784       21    247136K dentry\n 37074  37074 100%    0.86K   1002       37     32064K ext4_inode_cache\n263913 263913 100%    0.10K   6767       39     27068K buffer_head\n 14287  14287 100%    0.55K    511       28      8176K radix_tree_node\n  5336   4999  93%    0.55K    184       29      2944K inode_cache\n 26860  25982  96%    0.05K    316       85      1264K shared_policy_node\n  8604   8604 100%    0.11K    239       36       956K sysfs_dir_cache\n  2912   1971  67%    0.25K     91       32       728K kmalloc-256\n\n\nwhile true; do date '+%H:%M:%S ' | tr -d '\\n'; cat /proc/sys/fs/dentry-state; sleep 5; done\n\u3053\u3093\u306a\u3082\u3093\u305d\u3046\u305d\u3046\u53e9\u304f\u6a5f\u4f1a\u306f\u7121\u3044\u304b....\n$ while true; do date '+%H:%M:%S ' | tr -d '\\n'; cat /proc/sys/fs/dentry-state; sleep 5; done\n05:01:00 1297322        1291697 45      0       0       0\n05:01:05 1297322        1291697 45      0       0       0\n05:01:10 1297322        1291697 45      0       0       0\n05:01:15 1297322        1291697 45      0       0       0\n\n`vmstat` \u3068\u304b `top` \u3082\u3042\u308b\u3051\u3069\u306d\u3002\n\n## free\n\nfree \u304c\u3042\u308b\u3068\u5fc3\u304c\u843d\u3061\u7740\u304d\u307e\u3059\u306d\u3002cached \u304c\u5927\u304d\u3044\u3060\u3051\u3060\u3068\u5b89\u5fc3\u3057\u307e\u3059\u306d\u3002\n\n```shell-session\n$ free\n             total       used       free     shared    buffers     cached\nMem:       3860692    1521364    2339328          0      85388    1049928\n-/+ buffers/cache:     386048    3474644\nSwap:            0          0          0\n```\n\n## ps auxwwO-r\n\n\u30d7\u30ed\u30bb\u30b9\u3054\u3068\u306e\u30e1\u30e2\u30ea\u306f\u3053\u308c\u3067\u898b\u308c\u308b\u304b\u306a\u3002\u307e\u3041 O-r \u306f\u30bd\u30fc\u30c8\u306a\u306e\u3067\u597d\u304d\u306a\u306e\u306b\u5909\u3048\u305f\u3089\u826f\u3044\u3002\n\n```shell-session\n$ ps auxwwO-r | head\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot      6912  0.0  0.1 111688  4276 ?        Ss   Apr01   0:00 sshd: ec2-user [priv]\nec2-user  6914  0.0  0.0 111820  2540 ?        S    Apr01   0:02 sshd: ec2-user@pts/0,pts/1,pts/2\nec2-user  8151  0.4  0.0 121992  2420 pts/1    Ss+  Apr01   5:13 -bash\nec2-user  9257  0.0  0.0 117488  2188 pts/0    Ss+  Apr01   0:00 -bash\nec2-user 29292  0.0  0.0 117384  2132 pts/2    Ss   04:11   0:00 -bash\nroot      1593  0.0  0.0  89044  2116 ?        Ss   Mar13   0:27 sendmail: accepting connections\nsmmsp     1600  0.0  0.0  80500  1692 ?        Ss   Mar13   0:00 sendmail: Queue runner@01:00:00 for /var/spool/clientmqueue\nroot     23677  0.0  0.0 183768  1416 ?        Sl   Mar29   0:00 /sbin/rsyslogd -i /var/run/syslogd.pid -c 5\nroot     23590  0.0  0.0  77936  1288 ?        Ss   Mar29   0:00 /usr/sbin/sshd\n```\n\n## cat /proc/meminfo\n\n\u7d50\u679c\u304c\u9577\u3044\u3057\u4f55\u3060\u304b\u826f\u304f\u5206\u304b\u3089\u306a\u3044\u305c! \u3067\u3082 Active \u3068\u304b Inactive \u3068\u304b\u5b57\u9762\u306b\u9a19\u3055\u308c\u3061\u3083\u3044\u3051\u306a\u3044\u3063\u3066\u3058\u3063\u3061\u3083\u3093\u304c\u8a00\u3063\u3066\u307e\u3057\u305f\u3002\u304d\u3063\u3068 [/proc/meminfo\u3092\u8003\u3048\u308b - \u3081\u3082\u3081\u3082](http://d.hatena.ne.jp/enakai00/20110906/1315315488) \u3092\u901a\u308a\u3059\u304c\u308b\u3068\u8272\u3005\u5206\u304b\u308b\u3088\u3046\u306b\u306a\u308b\u306b\u9055\u3044\u3042\u308a\u307e\u305b\u3093\u3002\n\n```shell-session\n$ cat /proc/meminfo | head -n 25\nMemTotal:        3860692 kB\nMemFree:         2339320 kB\nBuffers:           85388 kB\nCached:          1049928 kB\nSwapCached:            0 kB\nActive:           443068 kB\nInactive:         704024 kB\nActive(anon):      11788 kB\nInactive(anon):      392 kB\nActive(file):     431280 kB\nInactive(file):   703632 kB\nUnevictable:           0 kB\nMlocked:               0 kB\nSwapTotal:             0 kB\nSwapFree:              0 kB\nDirty:                 0 kB\nWriteback:             0 kB\nAnonPages:         11824 kB\nMapped:             7440 kB\nShmem:               404 kB\nSlab:             329724 kB\nSReclaimable:     318664 kB\nSUnreclaim:        11060 kB\nKernelStack:         544 kB\nPageTables:         1976 kB\n```\n\n### dstat -tclmgdnpy --tcp 5\n\n\u307c\u30fc\u3063\u3068\u773a\u3081\u3066\u3044\u308b\u3068\u3001\u305d\u308c\u3060\u3051\u3067\u7652\u3055\u308c\u307e\u3059\u306d\u3002\u3082\u3049\u71b1\u5e2f\u9b5a\u306a\u3093\u3066\u98fc\u308f\u306a\u304f\u3066\u3082\u5927\u4e08\u592b\u3067\u3059\u3002\u3069\u3093\u3060\u3051\u5897\u3059\u304b\u306f\u30bf\u30fc\u30df\u30ca\u30eb\u306e\u5e45\u3068\u76f8\u8ac7\u3057\u307e\u3057\u3087\u3046\n\n```shell-session\n$ dstat -tclmgdnpy --tcp 5\n----system---- ----total-cpu-usage---- ---load-avg--- ------memory-usage----- ---paging-- -dsk/total- -net/total- ---procs--- ---system-- ----tcp-sockets----\n  date/time   |usr sys idl wai hiq siq| 1m   5m  15m | used  buff  cach  free|  in   out | read  writ| recv  send|run blk new| int   csw |lis act syn tim clo\n02-04 04:42:15|  0   0 100   0   0   0|   0 0.01 0.05| 381M 83.5M 1026M 2279M|   0     0 |2750B 3152B|   0     0 |  0   0 1.3|  27    20 |  3   1   0   0   0\n02-04 04:42:20|  0   0 100   0   0   0|   0 0.01 0.05| 381M 83.5M 1026M 2279M|   0     0 |   0     0 |  66B  133B|  0   0   0|  22    13 |  3   1   0   0   0\n02-04 04:42:25|  0   0 100   0   0   0|   0 0.01 0.05| 381M 83.5M 1026M 2279M|   0     0 |   0     0 |  66B  120B|  0   0   0|  21    13 |  3   1   0   0   0\n02-04 04:42:30|  0   0 100   0   0   0|   0 0.01 0.05| 381M 83.5M 1026M 2279M|   0     0 |   0     0 |  66B  120B|  0   0   0|  19    12 |  3   1   0   0   0\n02-04 04:42:35|  0   0 100   0   0   0|   0 0.01 0.05| 381M 83.5M 1026M 2279M|   0     0 |   0     0 |  66B  117B|  0   0   0|  21    12 |  3   1   0   0   0\n```\n\n## sudo slabtop -o -s c\n\n\u3053\u3063\u3061\u306f\u3042\u3093\u307e\u308a\u7652\u3055\u308c\u307e\u305b\u3093\u306d\u3002dentry \u3081!! \u3068\u3044\u3046\u611f\u3058\u3067\u3059\u3002\n\n```shell-session\n$ sudo slabtop -o -s c | head -n 15\n Active / Total Objects (% used)    : 1695897 / 1700554 (99.7%)\n Active / Total Slabs (% used)      : 71781 / 71781 (100.0%)\n Active / Total Caches (% used)     : 67 / 96 (69.8%)\n Active / Total Size (% used)       : 323362.33K / 325133.74K (99.5%)\n Minimum / Average / Maximum Object : 0.01K / 0.19K / 8.00K\n\n  OBJS ACTIVE  USE OBJ SIZE  SLABS OBJ/SLAB CACHE SIZE NAME\n1297464 1297464 100%    0.19K  61784       21    247136K dentry\n 37074  37074 100%    0.86K   1002       37     32064K ext4_inode_cache\n263913 263913 100%    0.10K   6767       39     27068K buffer_head\n 14287  14287 100%    0.55K    511       28      8176K radix_tree_node\n  5336   4999  93%    0.55K    184       29      2944K inode_cache\n 26860  25982  96%    0.05K    316       85      1264K shared_policy_node\n  8604   8604 100%    0.11K    239       36       956K sysfs_dir_cache\n  2912   1971  67%    0.25K     91       32       728K kmalloc-256\n```\n\n## while true; do date '+%H:%M:%S ' | tr -d '\\n'; cat /proc/sys/fs/dentry-state; sleep 5; done\n\n\u3053\u3093\u306a\u3082\u3093\u305d\u3046\u305d\u3046\u53e9\u304f\u6a5f\u4f1a\u306f\u7121\u3044\u304b....\n\n```shell-session\n$ while true; do date '+%H:%M:%S ' | tr -d '\\n'; cat /proc/sys/fs/dentry-state; sleep 5; done\n05:01:00 1297322        1291697 45      0       0       0\n05:01:05 1297322        1291697 45      0       0       0\n05:01:10 1297322        1291697 45      0       0       0\n05:01:15 1297322        1291697 45      0       0       0\n```", "tags": ["command"]}