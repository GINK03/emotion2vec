{"tags": ["FuelPHP"], "context": "\u4ed5\u4e8b\u3067\u3001FuelPHP\u3092\u89e6\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\nDB\u306e\u4f7f\u3044\u65b9\u306f\u3001\u516c\u5f0f\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b(\u65e5\u672c\u8a9e: Ver1.8\u7248)\nhttp://fuelphp.jp/docs/1.8/classes/database/usage.html\n\u3082\u3063\u3068\u8a73\u3057\u3044\u4f7f\u3044\u65b9\u306f\u3001\u3053\u3061\u3089\u306e\u65b9\u306e\u30d6\u30ed\u30b0\u304c\u4e01\u5be7\u306b\u307e\u3068\u3081\u3089\u308c\u3066\u3044\u308b\n\u30de\u30b3\u30c8\u306e\u304a\u3082\u3061\u3083\u7bb1\n\nSELECT\n\nSELECT\n$result = DB::select('col1', 'col2')->from('table_name')->where('id', 1)->execute();\n\n\n\u8fd4\u308a\u5024: Fuel\u306eDatabase_Query \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n\u914d\u5217\u3067\u53d6\u5f97\ncontroller\u5185\u3067\u52a0\u5de5\u3057\u305f\u3044\u3068\u304d\u306fas_array()\u3067\u914d\u5217\u306b\u5909\u63db\u3057\u3066\u3057\u307e\u3046\u3068\u4fbf\u5229\u3002\n\u30ab\u30e9\u30e0\u540d\u3092key\u3068\u3057\u3066\u30c7\u30fc\u30bf\u304c\u683c\u7d0d\u3055\u308c\u308b\u3002\n\n\u914d\u5217\u3067\u53d6\u5f97\n$result = DB::select('col1', 'col2')->from('table_name')->execute()->as_array();\n\nvar_dump($result);\n/*array(3) {\n  [0]=>\n  array(11) {\n    [\"col1\"]=>\n    string(1) \"hoge\"\n    [\"col2\"]=>\n    string(19) \"fuga\"\n  }\n  [1]=>...\n}*/\n\n\n\nJOIN\u3068\u5225\u540d\nJOIN\u306f\u3001join()->on()\nON\u304c\u8907\u6570\u3042\u308b\u3068\u304d\u306f\u3001and_on()\u3092\u4f7f\u3046\u3002\n\u5225\u540d\u306f\u3001\u30ab\u30e9\u30e0\u540d\u306e\u4ee3\u308f\u308aarray('\u30ab\u30e9\u30e0\u540d', '\u5225\u540d')\u3068\u8a18\u8ff0\u3059\u308b\n\nJOIN\u3068\u5225\u540d\n$result = \nDB::select('table_name.col1', array('table_name2.col1', 'as_name')\n   -> from('table_name')\n   -> join('table_name2', 'LEFT')->on('table_name.id', '=', 'table_name2.id')\n   -> join(array('table_name3', 'table3'),'LEFT')\n   -> on('table_name.id', '=', 'table3.id')->and_on('table_name.col3', '=', 'table3.col3')\n   ->where('table_name.del_flg', '0')\n   ->execute()->as_array();\n\nvar_dump($result);\n/*array(3) {\n  [0]=>\n  array(11) {\n    [\"col1\"]=>\n    string(1) \"hoge\"\n    [\"as_name\"]=>\n    string(19) \"fuga\"\n  }\n  [1]=>...\n}*/\n\n\n\nINSERT\n\nINSERT\n$result = DB::insert('table_name')->set(array(\n    'col1' => 'hoge',\n    'col2' => 'fuga',\n) )->execute();\n\nif($result[1] > 0){ //\u6210\u529f }\n\n\n\u8fd4\u308a\u5024: \u914d\u5217\n\uff11\u3064\u633f\u5165\u3057\u305f\u5834\u5408\u306e\u8fd4\u308a\u5024\u306f\u3001\n[int: Insert\u3057\u305f\u30ec\u30b3\u30fc\u30c9\u306ePrimaryKey, int: Insert\u3055\u308c\u305f\u30ec\u30b3\u30fc\u30c9\u6570]\n\nUPDATE\n\nUPDATE\n$result = DB::update('table_name')->value('col1', 'hoge')->where('id', 1)->execute();\n\nif($result > 0){ //\u6210\u529f }\n\n\n\u8fd4\u308a\u5024: \u6570\u5024\nUPDATE\u3055\u308c\u305f\u30ec\u30b3\u30fc\u30c9\u6570\u3092\u8fd4\u3059\u3002\n\nDELETE\n\nDELETE\n$result = DB::delete('table_name')->where('id', 1)->execute();\n\nif($result > 0){ //\u6210\u529f }\n\n\n\u8fd4\u308a\u5024: \u6570\u5024\nDELETE\u3055\u308c\u305f\u30ec\u30b3\u30fc\u30c9\u6570\u3092\u8fd4\u3059\u3002\n\n\u4ed5\u4e8b\u3067\u3001FuelPHP\u3092\u89e6\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n\nDB\u306e\u4f7f\u3044\u65b9\u306f\u3001\u516c\u5f0f\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b(\u65e5\u672c\u8a9e: Ver1.8\u7248)\nhttp://fuelphp.jp/docs/1.8/classes/database/usage.html\n\n\n\u3082\u3063\u3068\u8a73\u3057\u3044\u4f7f\u3044\u65b9\u306f\u3001\u3053\u3061\u3089\u306e\u65b9\u306e\u30d6\u30ed\u30b0\u304c\u4e01\u5be7\u306b\u307e\u3068\u3081\u3089\u308c\u3066\u3044\u308b\n[\u30de\u30b3\u30c8\u306e\u304a\u3082\u3061\u3083\u7bb1](http://piyopiyocs.blog115.fc2.com/blog-entry-549.html)\n\n\n### SELECT\n```php:SELECT\n$result = DB::select('col1', 'col2')->from('table_name')->where('id', 1)->execute();\n```\n\n**\u8fd4\u308a\u5024: Fuel\u306eDatabase_Query \u30aa\u30d6\u30b8\u30a7\u30af\u30c8**\n\n\n##### \u914d\u5217\u3067\u53d6\u5f97\ncontroller\u5185\u3067\u52a0\u5de5\u3057\u305f\u3044\u3068\u304d\u306fas_array()\u3067\u914d\u5217\u306b\u5909\u63db\u3057\u3066\u3057\u307e\u3046\u3068\u4fbf\u5229\u3002\n\u30ab\u30e9\u30e0\u540d\u3092key\u3068\u3057\u3066\u30c7\u30fc\u30bf\u304c\u683c\u7d0d\u3055\u308c\u308b\u3002\n\n\n```php:\u914d\u5217\u3067\u53d6\u5f97\n$result = DB::select('col1', 'col2')->from('table_name')->execute()->as_array();\n\nvar_dump($result);\n/*array(3) {\n  [0]=>\n  array(11) {\n    [\"col1\"]=>\n    string(1) \"hoge\"\n    [\"col2\"]=>\n    string(19) \"fuga\"\n  }\n  [1]=>...\n}*/\n```\n\n##### JOIN\u3068\u5225\u540d\nJOIN\u306f\u3001join()->on()\nON\u304c\u8907\u6570\u3042\u308b\u3068\u304d\u306f\u3001and_on()\u3092\u4f7f\u3046\u3002\n\n\u5225\u540d\u306f\u3001\u30ab\u30e9\u30e0\u540d\u306e\u4ee3\u308f\u308aarray('\u30ab\u30e9\u30e0\u540d', '\u5225\u540d')\u3068\u8a18\u8ff0\u3059\u308b\n\n```php:JOIN\u3068\u5225\u540d\n$result = \nDB::select('table_name.col1', array('table_name2.col1', 'as_name')\n   -> from('table_name')\n   -> join('table_name2', 'LEFT')->on('table_name.id', '=', 'table_name2.id')\n   -> join(array('table_name3', 'table3'),'LEFT')\n   -> on('table_name.id', '=', 'table3.id')->and_on('table_name.col3', '=', 'table3.col3')\n   ->where('table_name.del_flg', '0')\n   ->execute()->as_array();\n\nvar_dump($result);\n/*array(3) {\n  [0]=>\n  array(11) {\n    [\"col1\"]=>\n    string(1) \"hoge\"\n    [\"as_name\"]=>\n    string(19) \"fuga\"\n  }\n  [1]=>...\n}*/\n```\n\n\n\n### INSERT\n```php:INSERT\n$result = DB::insert('table_name')->set(array(\n    'col1' => 'hoge',\n    'col2' => 'fuga',\n) )->execute();\n\nif($result[1] > 0){ //\u6210\u529f }\n```\n\n**\u8fd4\u308a\u5024: \u914d\u5217**\n\uff11\u3064\u633f\u5165\u3057\u305f\u5834\u5408\u306e\u8fd4\u308a\u5024\u306f\u3001\n[int: Insert\u3057\u305f\u30ec\u30b3\u30fc\u30c9\u306ePrimaryKey, int: Insert\u3055\u308c\u305f\u30ec\u30b3\u30fc\u30c9\u6570]\n\n### UPDATE\n```php:UPDATE\n$result = DB::update('table_name')->value('col1', 'hoge')->where('id', 1)->execute();\n\nif($result > 0){ //\u6210\u529f }\n```\n\n\u8fd4\u308a\u5024: \u6570\u5024\nUPDATE\u3055\u308c\u305f\u30ec\u30b3\u30fc\u30c9\u6570\u3092\u8fd4\u3059\u3002\n\n\n### DELETE\n\n```php:DELETE\n$result = DB::delete('table_name')->where('id', 1)->execute();\n\nif($result > 0){ //\u6210\u529f }\n```\n\n\u8fd4\u308a\u5024: \u6570\u5024\nDELETE\u3055\u308c\u305f\u30ec\u30b3\u30fc\u30c9\u6570\u3092\u8fd4\u3059\u3002\n"}