{"context": " More than 1 year has passed since last update.\u306a\u3093\u304b\u307e\u305f\u5f8c\u3067\u8abf\u3079\u308b\u306f\u3081\u306b\u306a\u308b\u304b\u3082\u306a\u306e\u3067\u307e\u3068\u3081\u305f\u3002\n\n1.passenger\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nconsole\ngem install passenger\n\n\ngem\u304c\u4f7f\u3048\u308c\u3070\u666e\u901a\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u306f\u305a\n\n2.Apache\u7528\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30d3\u30eb\u30c9\n\nconsole\npassenger-install-apache2-module\n\n\nApache\u3092\u30bd\u30fc\u30b9\u30d3\u30eb\u30c9\u3057\u305f\u5834\u5408\u306f\u306a\u3093\u304bPATH\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u3089\u3057\u3044\u304c\u305d\u3093\u306a\u4e8b\u3092\u3059\u308b\u4e88\u5b9a\u306f\u306a\u3044\u306e\u3067\u7701\u7565\n\u8272\u3005\u8868\u793a\u3055\u308c\u308b\u304c\u5927\u4f53\u7121\u8996\u3057\u3066Enter\u3092\u62bc\u3057\u3066OK\n\u6700\u5f8c\u306e\u307b\u3046\u3067\u3001\u8a2d\u5b9a\u7528\u306e\u30c6\u30ad\u30b9\u30c8\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u30b3\u30d4\u30fc\u3059\u308b\n\nconsole\nLoadModule passenger_module /usr/local/rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/passenger-4.0.50/buildout/apache2/mod_passenger.so\n<IfModule mod_passenger.c>\n  PassengerRoot /usr/local/rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/passenger-4.0.50\n  PassengerDefaultRuby /usr/local/rbenv/versions/2.0.0-p247/bin/ruby\n</IfModule>\n\n\n\u3042\u3068\u3067\u4e0a\u8a18\u306e\u30c6\u30ad\u30b9\u30c8\u3060\u3051\u898b\u305f\u3044\u5834\u5408\u306f\n\nconsole\npassenger-install-apache2-module --snippet\n\n\n\u3067\u898b\u308c\u308b\n\n3.passenger.conf\u306e\u8a2d\u5b9a\nApache\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30ebpassenger.conf\u3092\u4f5c\u6210\u3059\u308b\uff08\u306a\u3044\u5834\u5408\u306f\u65b0\u898f\u3067\uff09\n\nconsole\nvim /etc/httpd/conf.d/passenger.conf\n\n\n\npassenger.conf\n# Passenger base config\nLoadModule passenger_module /usr/local/rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/passenger-4.0.50/buildout/apache2/mod_passenger.so\n<IfModule mod_passenger.c>\n  PassengerRoot /usr/local/rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/passenger-4.0.50\n  PassengerDefaultRuby /usr/local/rbenv/versions/2.0.0-p247/bin/ruby\n</IfModule>\n\n# Delete Passenger's HTTP Header\nHeader always unset \"X-Powered-By\"\nHeader always unset \"X-Rack-Cache\"\nHeader always unset \"X-Content-Digest\"\nHeader always unset \"X-Runtime\"\n\n# Passenger tuning config\nPassengerMaxPoolSize 20\nPassengerMaxInstancesPerApp 4\nPassengerPoolIdleTime 3600\nPassengerHighPerformance on\nPassengerStatThrottleRate 10\nRailsSpawnMethod smart\nRailsAppSpawnerIdleTime 86400\nPassengerMaxPreloaderIdleTime 0\n\nRailsEnv development  # production \u304b development \u3092\u8a2d\u5b9a\nRackBaseURI /app1     # DocumentRoot\u304b\u3089\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d5\u30a9\u30eb\u30c0\u76f8\u5bfe\u4f4d\u7f6e\nRackBaseURI /app2     # \u8907\u6570\u8a2d\u5b9a\u53ef\u80fd\n\n\n\n4.\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d5\u30a9\u30eb\u30c0\u306e\u914d\u7f6e\nsinatra\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d5\u30a9\u30eb\u30c0\u3092\u3069\u3063\u304b\u306b\u7f6e\u304f\uff08\u4eee\u306bapp1, app2\u3068\u3059\u308b\uff09\napp1/public \u3078\u306eSymLink\u3092DocumentRoot\uff08\u3053\u3053\u3067\u306f/var/www/html\uff09\u306b\u4f5c\u6210\u3059\u308b\n\nconsole\ncd /var/www/html\nln -s app1/public app1\nln -s app2/public app2\n\n\n\u3042\u3068\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u8a2d\u5b9a\u3068\u304b\u3059\u308b\u3002\n\n5.Apache\u518d\u8d77\u52d5\n\nconsole\nservice httpd restart\n\n\n\u6a29\u9650\u5468\u308a\u3067\u52d5\u304b\u306a\u3044\u6642\u306f\u3001PassengerUserSwitching PassengerDefaultUser \u3042\u305f\u308a\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b\u304b\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u30aa\u30fc\u30ca\u30fc\u3092\u66f8\u304d\u63db\u3048\u308b\u3002\n\u304a\u308f\u308a\n\u306a\u3093\u304b\u307e\u305f\u5f8c\u3067\u8abf\u3079\u308b\u306f\u3081\u306b\u306a\u308b\u304b\u3082\u306a\u306e\u3067\u307e\u3068\u3081\u305f\u3002\n\n###1.passenger\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```text:console\ngem install passenger\n```\n\ngem\u304c\u4f7f\u3048\u308c\u3070\u666e\u901a\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u306f\u305a\n\n\n###2.Apache\u7528\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30d3\u30eb\u30c9\n\n```text:console\npassenger-install-apache2-module\n```\n\nApache\u3092\u30bd\u30fc\u30b9\u30d3\u30eb\u30c9\u3057\u305f\u5834\u5408\u306f\u306a\u3093\u304bPATH\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u3089\u3057\u3044\u304c\u305d\u3093\u306a\u4e8b\u3092\u3059\u308b\u4e88\u5b9a\u306f\u306a\u3044\u306e\u3067\u7701\u7565\n\u8272\u3005\u8868\u793a\u3055\u308c\u308b\u304c\u5927\u4f53\u7121\u8996\u3057\u3066Enter\u3092\u62bc\u3057\u3066OK\n\n\u6700\u5f8c\u306e\u307b\u3046\u3067\u3001\u8a2d\u5b9a\u7528\u306e\u30c6\u30ad\u30b9\u30c8\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u30b3\u30d4\u30fc\u3059\u308b\n\n```text:console\nLoadModule passenger_module /usr/local/rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/passenger-4.0.50/buildout/apache2/mod_passenger.so\n<IfModule mod_passenger.c>\n  PassengerRoot /usr/local/rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/passenger-4.0.50\n  PassengerDefaultRuby /usr/local/rbenv/versions/2.0.0-p247/bin/ruby\n</IfModule>\n```\n\n\u3042\u3068\u3067\u4e0a\u8a18\u306e\u30c6\u30ad\u30b9\u30c8\u3060\u3051\u898b\u305f\u3044\u5834\u5408\u306f\n\n```text:console\npassenger-install-apache2-module --snippet\n```\n\n\u3067\u898b\u308c\u308b\n\n###3.passenger.conf\u306e\u8a2d\u5b9a\nApache\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30ebpassenger.conf\u3092\u4f5c\u6210\u3059\u308b\uff08\u306a\u3044\u5834\u5408\u306f\u65b0\u898f\u3067\uff09\n\n```text:console\nvim /etc/httpd/conf.d/passenger.conf\n```\n\n```text:passenger.conf\n# Passenger base config\nLoadModule passenger_module /usr/local/rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/passenger-4.0.50/buildout/apache2/mod_passenger.so\n<IfModule mod_passenger.c>\n  PassengerRoot /usr/local/rbenv/versions/2.0.0-p247/lib/ruby/gems/2.0.0/gems/passenger-4.0.50\n  PassengerDefaultRuby /usr/local/rbenv/versions/2.0.0-p247/bin/ruby\n</IfModule>\n\n# Delete Passenger's HTTP Header\nHeader always unset \"X-Powered-By\"\nHeader always unset \"X-Rack-Cache\"\nHeader always unset \"X-Content-Digest\"\nHeader always unset \"X-Runtime\"\n\n# Passenger tuning config\nPassengerMaxPoolSize 20\nPassengerMaxInstancesPerApp 4\nPassengerPoolIdleTime 3600\nPassengerHighPerformance on\nPassengerStatThrottleRate 10\nRailsSpawnMethod smart\nRailsAppSpawnerIdleTime 86400\nPassengerMaxPreloaderIdleTime 0\n\nRailsEnv development  # production \u304b development \u3092\u8a2d\u5b9a\nRackBaseURI /app1     # DocumentRoot\u304b\u3089\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d5\u30a9\u30eb\u30c0\u76f8\u5bfe\u4f4d\u7f6e\nRackBaseURI /app2     # \u8907\u6570\u8a2d\u5b9a\u53ef\u80fd\n```\n\n###4.\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d5\u30a9\u30eb\u30c0\u306e\u914d\u7f6e\nsinatra\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d5\u30a9\u30eb\u30c0\u3092\u3069\u3063\u304b\u306b\u7f6e\u304f\uff08\u4eee\u306bapp1, app2\u3068\u3059\u308b\uff09\napp1/public \u3078\u306eSymLink\u3092DocumentRoot\uff08\u3053\u3053\u3067\u306f/var/www/html\uff09\u306b\u4f5c\u6210\u3059\u308b\n\n```text:console\ncd /var/www/html\nln -s app1/public app1\nln -s app2/public app2\n```\n\n\u3042\u3068\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u8a2d\u5b9a\u3068\u304b\u3059\u308b\u3002\n\n###5.Apache\u518d\u8d77\u52d5\n\n```text:console\nservice httpd restart\n```\n\n\u6a29\u9650\u5468\u308a\u3067\u52d5\u304b\u306a\u3044\u6642\u306f\u3001PassengerUserSwitching PassengerDefaultUser \u3042\u305f\u308a\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b\u304b\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u30aa\u30fc\u30ca\u30fc\u3092\u66f8\u304d\u63db\u3048\u308b\u3002\n\n\n\u304a\u308f\u308a\n", "tags": ["Ruby", "passenger"]}