{"context": "\u8131react-router\u3057\u305f\u3044\u4eba\u306e0.5\u6b69\u76ee\u304f\u3089\u3044\u306e\u3082\u306e\nhttps://medium.freecodecamp.com/you-might-not-need-react-router-38673620f3d#.5pzh5miki\n\u306e\u8a18\u4e8b\u3092\u898b\u305f\u308a\u3001\nhttps://github.com/kriasoft/react-static-boilerplate\n\u306a\u3093\u304b\u3092\u898b\u305f\u3082\u306e\u306e\u3001\nwebpack, redux\u304c\u524d\u63d0\u3060\u3063\u305f\u308ahistory\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u304b\u3063\u305f\u308a\u3057\u3066\u3001\u3046\u304c\u30fc\u3068\u306a\u3063\u305f\u306e\u3067\u3082\u3046\u5c11\u3057\u7c21\u7d20\u306b\u3046\u3054\u304f\u3082\u306e\u4f5c\u3063\u3066\u307f\u305f\u3002\n\u8131react-router\u3057\u305f\u3044\u7406\u7531\u306f\u7279\u306b\u89e6\u308c\u306a\u3044\u3002\npackages.json, .babelrc\u306f\u3060\u3044\u305f\u3044\u3053\u3093\u306a\u611f\u3058\u3002\nhttps://github.com/mjackson/history\n\u3092\u4f7f\u3046\u3002\n\npackages.json\n{\n  \"private\": true,\n  \"scripts\": {\n    \"build\": \"browserify -t babelify ./path/to/src/root.js -o ./path/to/public/js/bundle.js\"\n },\n  \"dependencies\": {\n    \"babel-plugin-transform-object-rest-spread\": \"^6.8.0\",\n    \"babel-preset-es2015\": \"^6.13.2\",\n    \"babel-preset-react\": \"^6.11.1\",\n    \"babelify\": \"^7.3.0\",\n    \"history\": \"^4.2.0\",\n    \"react\": \"^15.3.0\",\n    \"react-dom\": \"^15.3.0\"\n  }\n}\n\n\n\n{\n  \"presets\": [\"react\", \"es2015\"],\n  \"plugins\": [\"transform-object-rest-spread\"]\n}\n\n\u6700\u4e0a\u4f4d\u306e\u89aa\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092Root\u3068\u3057\u3066\u5b9a\u7fa9\u3002\n\u30da\u30fc\u30b8\u306e\u5185\u5bb9\u306fIndex, Sub\u3068\u3057\u3066\u5b9a\u7fa9\u3002\npath\u304c'/index'\u306a\u3089Index\u3092\u8868\u793a\u30fb\n'/sub\u306a\u3089Sub\u3092\u8868\u793a\u3059\u308b\u3002\nRoot\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u4e0a\u306b\u5404\u30da\u30fc\u30b8\u3078\u306e\u30ea\u30f3\u30af\u3092\u914d\u7f6e\u3002\n\nroot.js\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport createBrowserHistory from 'history/createBrowserHistory';\n\n// history\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3002\nlet history = createBrowserHistory();\n\nclass Root extends Component {\n  constructor() {\n    super();\n    this.state = {\n      key1: 'foo',\n      key2: 'bar',\n    }\n  }\n  // \u30da\u30fc\u30b8\u9077\u79fb\u3092\u884c\u3046\n  transition(e) {\n    e.preventDefault();\n    history.push(e.currentTarget.pathname);\n  }\n  render() {\n    // React.cloneElement()\u3092\u4f7f\u3063\u3066\u5b50\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306bstate\u3092props\u3068\u3057\u3066\u6e21\u3059\u3002\n    return (\n      <div>\n      <ul>\n        <li>\n          <a href=\"/\" onClick={(e) => this.transition(e)}>Index</a>\n        </li>\n        <li>\n          <a href=\"/sub\" onClick={(e) => this.transition(e)}>Sub</a>\n        </li>\n      </ul>\n      {React.cloneElement(this.props.children, { ...this.state })}\n      </div>\n    );\n  }\n}\n\n// \u5404\u30da\u30fc\u30b8\u7528\u5b50\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u5b9a\u7fa9\nconst Index = (props) => {\n  return (\n    <div>\n      {props.key1}<br />\n      \u3053\u308c\u306fIndex\u30da\u30fc\u30b8\n    </div>\n  );\n}\n\nconst Sub = (props) => {\n  return (\n    <div>\n      {props.key2}<br />\n      \u3053\u308c\u306fSub\u30da\u30fc\u30b8\n    </div>\n  );\n}\n\n// \u30d1\u30b9\u3068\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u7d10\u4ed8\u3051\u5b9a\u7fa9\nconst routes = [\n  { path: '/', action: () => <Index />},\n  { path: '/sub', action: () => <Sub />}\n]\n\nconst root = document.getElementById('root');\n\n// \u30d1\u30b9\u306b\u5fdc\u3058\u305f\u5b50\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3068\u3068\u3082\u306brender\u3059\u308b\u3002\n// \u5b9f\u969b\u306f\u6b63\u898f\u8868\u73fe\u3092\u4f7f\u7528\u3057\u3066\u3082\u3063\u3068\u3044\u3044\u611f\u3058\u306b\u3059\u308b\u3068\u3053\u308d\u3002\n\nfunction render(location) {\n  for (let route of routes) {\n    if(location.pathname === route.path) {\n      const content = route.action();\n      ReactDOM.render(\n        <Root>{content}</Root>,\n        root\n      );\n      return;\n    }\n  }\n}\n\n// history\u3092\u76e3\u8996\u3001\u30d1\u30b9\u304c\u5909\u5316\u3057\u305f\u3068\u304d\u306b\u5f15\u6570\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u5b9f\u884c\u3057\u3066\u3001content\u3092\u66f4\u65b0\u3059\u308b\u3002\n// \u7b2c\u4e8c\u5f15\u6570\u306e\u4f7f\u3044\u65b9\u306f\u5f8c\u3067\u8abf\u3079\u308b\nhistory.listen((location, action) => {\n  render(location);\n});\n// \u30da\u30fc\u30b8\u8aad\u307f\u8fbc\u307f\u6642\u306b\u6700\u521d\u306b\u5b9f\u884c\u3055\u308c\u308b\nrender(history.location);\n\n\n\nsub\u30da\u30fc\u30b8\u306e\u30d1\u30b9\u306b\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3055\u308c\u305f\u5834\u5408\u306a\u3069\u3001\u4f55\u3082\u3057\u306a\u3051\u308c\u3070not found\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u304c\u4f8b\u3048\u3070Laraval5.3\u3067\u3042\u308c\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u30a2\u30af\u30bb\u30b9\u3092root\u30d1\u30b9\u306e\u30cf\u30f3\u30c9\u30e9\u30fc\u306b\u96c6\u7d04\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\nroutes/web.php\nRoute::get('/{action?}', function () {\n    return view('root');\n});\n\n\n\u8131react-router\u3057\u305f\u3044\u4eba\u306e0.5\u6b69\u76ee\u304f\u3089\u3044\u306e\u3082\u306e\n\nhttps://medium.freecodecamp.com/you-might-not-need-react-router-38673620f3d#.5pzh5miki\n\u306e\u8a18\u4e8b\u3092\u898b\u305f\u308a\u3001\nhttps://github.com/kriasoft/react-static-boilerplate\n\u306a\u3093\u304b\u3092\u898b\u305f\u3082\u306e\u306e\u3001\nwebpack, redux\u304c\u524d\u63d0\u3060\u3063\u305f\u308ahistory\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u304b\u3063\u305f\u308a\u3057\u3066\u3001\u3046\u304c\u30fc\u3068\u306a\u3063\u305f\u306e\u3067\u3082\u3046\u5c11\u3057\u7c21\u7d20\u306b\u3046\u3054\u304f\u3082\u306e\u4f5c\u3063\u3066\u307f\u305f\u3002\n\u8131react-router\u3057\u305f\u3044\u7406\u7531\u306f\u7279\u306b\u89e6\u308c\u306a\u3044\u3002\n\npackages.json, .babelrc\u306f\u3060\u3044\u305f\u3044\u3053\u3093\u306a\u611f\u3058\u3002\nhttps://github.com/mjackson/history\n\u3092\u4f7f\u3046\u3002\n\n```packages.json\n{\n  \"private\": true,\n  \"scripts\": {\n    \"build\": \"browserify -t babelify ./path/to/src/root.js -o ./path/to/public/js/bundle.js\"\n },\n  \"dependencies\": {\n    \"babel-plugin-transform-object-rest-spread\": \"^6.8.0\",\n    \"babel-preset-es2015\": \"^6.13.2\",\n    \"babel-preset-react\": \"^6.11.1\",\n    \"babelify\": \"^7.3.0\",\n    \"history\": \"^4.2.0\",\n    \"react\": \"^15.3.0\",\n    \"react-dom\": \"^15.3.0\"\n  }\n}\n\n```\n\n```.babelrc\n{\n  \"presets\": [\"react\", \"es2015\"],\n  \"plugins\": [\"transform-object-rest-spread\"]\n}\n```\n\n\u6700\u4e0a\u4f4d\u306e\u89aa\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092Root\u3068\u3057\u3066\u5b9a\u7fa9\u3002\n\u30da\u30fc\u30b8\u306e\u5185\u5bb9\u306fIndex, Sub\u3068\u3057\u3066\u5b9a\u7fa9\u3002\npath\u304c'/index'\u306a\u3089Index\u3092\u8868\u793a\u30fb\n'/sub\u306a\u3089Sub\u3092\u8868\u793a\u3059\u308b\u3002\nRoot\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u4e0a\u306b\u5404\u30da\u30fc\u30b8\u3078\u306e\u30ea\u30f3\u30af\u3092\u914d\u7f6e\u3002\n\n```root.js\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport createBrowserHistory from 'history/createBrowserHistory';\n\n// history\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3002\nlet history = createBrowserHistory();\n\nclass Root extends Component {\n  constructor() {\n    super();\n    this.state = {\n      key1: 'foo',\n      key2: 'bar',\n    }\n  }\n  // \u30da\u30fc\u30b8\u9077\u79fb\u3092\u884c\u3046\n  transition(e) {\n    e.preventDefault();\n    history.push(e.currentTarget.pathname);\n  }\n  render() {\n    // React.cloneElement()\u3092\u4f7f\u3063\u3066\u5b50\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306bstate\u3092props\u3068\u3057\u3066\u6e21\u3059\u3002\n    return (\n      <div>\n      <ul>\n        <li>\n          <a href=\"/\" onClick={(e) => this.transition(e)}>Index</a>\n        </li>\n        <li>\n          <a href=\"/sub\" onClick={(e) => this.transition(e)}>Sub</a>\n        </li>\n      </ul>\n      {React.cloneElement(this.props.children, { ...this.state })}\n      </div>\n    );\n  }\n}\n\n// \u5404\u30da\u30fc\u30b8\u7528\u5b50\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u5b9a\u7fa9\nconst Index = (props) => {\n  return (\n    <div>\n      {props.key1}<br />\n      \u3053\u308c\u306fIndex\u30da\u30fc\u30b8\n    </div>\n  );\n}\n\nconst Sub = (props) => {\n  return (\n    <div>\n      {props.key2}<br />\n      \u3053\u308c\u306fSub\u30da\u30fc\u30b8\n    </div>\n  );\n}\n\n// \u30d1\u30b9\u3068\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u7d10\u4ed8\u3051\u5b9a\u7fa9\nconst routes = [\n  { path: '/', action: () => <Index />},\n  { path: '/sub', action: () => <Sub />}\n]\n\nconst root = document.getElementById('root');\n\n// \u30d1\u30b9\u306b\u5fdc\u3058\u305f\u5b50\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3068\u3068\u3082\u306brender\u3059\u308b\u3002\n// \u5b9f\u969b\u306f\u6b63\u898f\u8868\u73fe\u3092\u4f7f\u7528\u3057\u3066\u3082\u3063\u3068\u3044\u3044\u611f\u3058\u306b\u3059\u308b\u3068\u3053\u308d\u3002\n\nfunction render(location) {\n  for (let route of routes) {\n    if(location.pathname === route.path) {\n      const content = route.action();\n      ReactDOM.render(\n        <Root>{content}</Root>,\n        root\n      );\n      return;\n    }\n  }\n}\n\n// history\u3092\u76e3\u8996\u3001\u30d1\u30b9\u304c\u5909\u5316\u3057\u305f\u3068\u304d\u306b\u5f15\u6570\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u5b9f\u884c\u3057\u3066\u3001content\u3092\u66f4\u65b0\u3059\u308b\u3002\n// \u7b2c\u4e8c\u5f15\u6570\u306e\u4f7f\u3044\u65b9\u306f\u5f8c\u3067\u8abf\u3079\u308b\nhistory.listen((location, action) => {\n  render(location);\n});\n// \u30da\u30fc\u30b8\u8aad\u307f\u8fbc\u307f\u6642\u306b\u6700\u521d\u306b\u5b9f\u884c\u3055\u308c\u308b\nrender(history.location);\n\n```\n\nsub\u30da\u30fc\u30b8\u306e\u30d1\u30b9\u306b\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3055\u308c\u305f\u5834\u5408\u306a\u3069\u3001\u4f55\u3082\u3057\u306a\u3051\u308c\u3070not found\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u304c\u4f8b\u3048\u3070Laraval5.3\u3067\u3042\u308c\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u30a2\u30af\u30bb\u30b9\u3092root\u30d1\u30b9\u306e\u30cf\u30f3\u30c9\u30e9\u30fc\u306b\u96c6\u7d04\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n```routes/web.php\nRoute::get('/{action?}', function () {\n    return view('root');\n});\n```\n", "tags": ["reactjs", "history", "react-router"]}