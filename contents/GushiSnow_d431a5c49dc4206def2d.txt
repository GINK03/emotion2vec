{"context": " More than 1 year has passed since last update.\n\n\u524d\u56de\n\uff11\uff1ahttp://qiita.com/GushiSnow/items/cc1440e0a8ea199e78c5\n\uff12\uff1ahttp://qiita.com/GushiSnow/items/a24cad7231de341738ee\n\uff13\uff1ahttp://qiita.com/GushiSnow/items/e099baf9d1c2e72cb3d1\n\u3044\u3088\u3044\u3088\u5b66\u7fd2\u306e\u30d5\u30a7\u30fc\u30ba\u306b\u5165\u308b\u3002\n\n\u30c7\u30fc\u30bf\u306e\u632f\u308a\u5206\u3051\nutils/subset_data_dir.sh data/train 1000 data/train.1k  || exit 1;\n\n\u5b66\u7fd2\u3067\u306f\u4e0a\u8a18\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u30c7\u30fc\u30bf\u306e\u632f\u308a\u5206\u3051\u3092\u884c\u3046\u3002\n\u5f15\u6570\u306f\u6a19\u6e96\u3067\uff13\u3064\n\uff11\uff1a\u4e0b\u8a18\u306e\u30d5\u30a1\u30a4\u30eb\u53ca\u3073\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\ncmvn.scp\u3000\uff5c\u3000spk2gender\u3000\uff5c\u3000split20/\u3000\uff5c\u3000utt2spk\nfeats.scp\u3000\uff5c\u3000spk2utt\u3000\uff5c\u3000text\u3000\uff5c\u3000wav.scp \n\uff12\uff1a\u5b66\u7fd2\u3059\u308b\u306e\u306b\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u91cf\u3092\u6307\u5b9a\n\uff13\uff1a\u51fa\u529b\u5148\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\n\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\n--per-spk  #\u305d\u308c\u305e\u308c\u306e\u8a71\u8005\u306e\u767a\u8a71\u6570\u3092\u6307\u5b9a\n--speakers #\u30e9\u30f3\u30c0\u30e0\u306b\u8a71\u8005\u3092\u9078\u629e\n--shortest #\u767a\u8a71\u3092\u3059\u3079\u3066\u5c0f\u6587\u5b57\u3067\u7528\u610f\n--first    #\u6700\u521d\u306e\u767a\u8a71\u306e\u307f\n--last     #\u6700\u5f8c\u306e\u767a\u8a71\u306e\u307f\n--spk-list #\u8a71\u8005\u306e\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\n\n\n\u30e2\u30ce\u30d5\u30a9\u30f3\u5b66\u7fd2\n1\uff1a\u521d\u671f\u30e2\u30c7\u30eb\u306e\u5b66\u7fd2\u3092\u884c\u3063\u3066\u3044\u308b\ngmm-init-mono $shared_phones_opt \"--train-feats=$feats subset-feats --n=    10 ark:- ark:-|\" $lang/topo $feat_dim $dir/0.mdl $dir/tree || exit 1;\n\n\n2\uff1a\u30b0\u30e9\u30d5\u306e\u5b66\u7fd2\u3092\u884c\u3063\u3066\u3044\u308b\u3002\uff08\u30b0\u30e9\u30d5\u306e\u8a73\u7d30\u306fOpenFst\u3092\u53c2\u7167)\ncompile-train-graphs $dir/tree $dir/0.mdl  $lang/L.fst \\                \n\"ark:sym2int.pl --map-oov $oov_sym -f 2- $lang/words.txt < $sdata/JOB/te    xt|\" \n\n\u53c2\u7167\nhttp://qiita.com/GushiSnow/items/a24cad7231de341738ee\n\uff13\uff1a\u30a2\u30e9\u30a4\u30e1\u30f3\u30c8\u3092\u884c\u3046\nalign-equal-compiled \"ark:gunzip -c $dir/fsts.JOB.gz|\" \"$feats\" ark,t:-      \\| \\                                                                   \ngmm-acc-stats-ali --binary=true $dir/0.mdl \"$feats\" ark:- \\  \n\n\uff14\uff1a\u30a2\u30e9\u30a4\u30e1\u30f3\u30c8\u304c\u6b63\u3057\u3044\u304b\u6700\u5c24\u63a8\u5b9a\u3092\u884c\u3046\ngmm-est --min-gaussian-occupancy=3  --mix-up=$numgauss --power=$power \\   \n\n$dir/0.mdl \"gmm-sum-accs - $dir/0.*.acc|\" $dir/1.mdl 2> $dir/log/update.0.log || exit 1;\n\n\u30d3\u30fc\u30e0\u5e45\u3092\u5927\u304d\u304f\u3057\u305f\u63a2\u7d22\u3092\u884c\u3046\u5834\u5408\u306f\u4e0b\u8a18\u306e\u30b7\u30a7\u30eb\u304c\u5b9f\u884c\u3055\u308c\u308b\u3002\nx=1\nwhile [ $x -lt $num_iters ]; do\n  echo \"$0: Pass $x\"\n  if [ $stage -le $x ]; then\n    if echo $realign_iters | grep -w $x >/dev/null; then\n      echo \"$0: Aligning data\"\n      mdl=\"gmm-boost-silence --boost=$boost_silence `cat $lang/phones/optional_s\nilence.csl` $dir/$x.mdl - |\"\n      $cmd JOB=1:$nj $dir/log/align.$x.JOB.log \\\n        gmm-align-compiled $scale_opts --beam=$beam --retry-beam=$[$beam*4] --ca\nreful=$careful \"$mdl\" \\\n        \"ark:gunzip -c $dir/fsts.JOB.gz|\" \"$feats\" \"ark,t:|gzip -c >$dir/ali.JOB\n.gz\" \\\n        || exit 1;\n    fi\n    $cmd JOB=1:$nj $dir/log/acc.$x.JOB.log \\\n      gmm-acc-stats-ali  $dir/$x.mdl \"$feats\" \"ark:gunzip -c $dir/ali.JOB.gz|\" \\\n      $dir/$x.JOB.acc || exit 1;\n\n    $cmd $dir/log/update.$x.log \\\n      gmm-est --write-occs=$dir/$[$x+1].occs --mix-up=$numgauss --power=$power $\ndir/$x.mdl \\\n      \"gmm-sum-accs - $dir/$x.*.acc|\" $dir/$[$x+1].mdl || exit 1;\n    rm $dir/$x.mdl $dir/$x.*.acc $dir/$x.occs 2>/dev/null\n  fi\n  if [ $x -le $max_iter_inc ]; then\n     numgauss=$[$numgauss+$incgauss];\n  fi\n  beam=10\n  x=$[$x+1]\ndone\n\ngmm-boost-silence\u306f\nsilience\u30e2\u30c7\u30eb\u3092\u4ed6\u306eGMM\u30e2\u30c7\u30eb\u306b\u30b7\u30a7\u30a2\u3059\u308b\u3053\u3068\u3067\u3059\u3079\u3066\u306e\u30e2\u30c7\u30eb\u306b\u304a\u3051\u308bGMM\u91cd\u307f\u304csilence\u3068\u4e00\u81f4\u3059\u308b\u3002\n#\u524d\u56de\n\n\uff11\uff1ahttp://qiita.com/GushiSnow/items/cc1440e0a8ea199e78c5\n\n\uff12\uff1ahttp://qiita.com/GushiSnow/items/a24cad7231de341738ee\n\n\uff13\uff1ahttp://qiita.com/GushiSnow/items/e099baf9d1c2e72cb3d1\n\n\u3044\u3088\u3044\u3088\u5b66\u7fd2\u306e\u30d5\u30a7\u30fc\u30ba\u306b\u5165\u308b\u3002\n\n#\u30c7\u30fc\u30bf\u306e\u632f\u308a\u5206\u3051\n\n```shell-session\nutils/subset_data_dir.sh data/train 1000 data/train.1k  || exit 1;\n```\n\n\u5b66\u7fd2\u3067\u306f\u4e0a\u8a18\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u30c7\u30fc\u30bf\u306e\u632f\u308a\u5206\u3051\u3092\u884c\u3046\u3002\n\n\u5f15\u6570\u306f\u6a19\u6e96\u3067\uff13\u3064\n\n\uff11\uff1a\u4e0b\u8a18\u306e\u30d5\u30a1\u30a4\u30eb\u53ca\u3073\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\n\ncmvn.scp\u3000\uff5c\u3000spk2gender\u3000\uff5c\u3000split20/\u3000\uff5c\u3000utt2spk     \nfeats.scp\u3000\uff5c\u3000spk2utt\u3000\uff5c\u3000text\u3000\uff5c\u3000wav.scp \n\n\uff12\uff1a\u5b66\u7fd2\u3059\u308b\u306e\u306b\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u91cf\u3092\u6307\u5b9a\n\n\uff13\uff1a\u51fa\u529b\u5148\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\n\n\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\n\n```shell-session\n--per-spk  #\u305d\u308c\u305e\u308c\u306e\u8a71\u8005\u306e\u767a\u8a71\u6570\u3092\u6307\u5b9a\n--speakers #\u30e9\u30f3\u30c0\u30e0\u306b\u8a71\u8005\u3092\u9078\u629e\n--shortest #\u767a\u8a71\u3092\u3059\u3079\u3066\u5c0f\u6587\u5b57\u3067\u7528\u610f\n--first    #\u6700\u521d\u306e\u767a\u8a71\u306e\u307f\n--last     #\u6700\u5f8c\u306e\u767a\u8a71\u306e\u307f\n--spk-list #\u8a71\u8005\u306e\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\n```\n\n#\u30e2\u30ce\u30d5\u30a9\u30f3\u5b66\u7fd2\n\n1\uff1a\u521d\u671f\u30e2\u30c7\u30eb\u306e\u5b66\u7fd2\u3092\u884c\u3063\u3066\u3044\u308b\n\n```shell-session\ngmm-init-mono $shared_phones_opt \"--train-feats=$feats subset-feats --n=    10 ark:- ark:-|\" $lang/topo $feat_dim $dir/0.mdl $dir/tree || exit 1;\n\n```\n2\uff1a\u30b0\u30e9\u30d5\u306e\u5b66\u7fd2\u3092\u884c\u3063\u3066\u3044\u308b\u3002\uff08\u30b0\u30e9\u30d5\u306e\u8a73\u7d30\u306fOpenFst\u3092\u53c2\u7167)\n\n\n```shell-session\ncompile-train-graphs $dir/tree $dir/0.mdl  $lang/L.fst \\                \n\"ark:sym2int.pl --map-oov $oov_sym -f 2- $lang/words.txt < $sdata/JOB/te    xt|\" \n```\n\n\u53c2\u7167\nhttp://qiita.com/GushiSnow/items/a24cad7231de341738ee\n\n\uff13\uff1a\u30a2\u30e9\u30a4\u30e1\u30f3\u30c8\u3092\u884c\u3046\n\n```shell-session\nalign-equal-compiled \"ark:gunzip -c $dir/fsts.JOB.gz|\" \"$feats\" ark,t:-      \\| \\                                                                   \ngmm-acc-stats-ali --binary=true $dir/0.mdl \"$feats\" ark:- \\  \n```\n\n\uff14\uff1a\u30a2\u30e9\u30a4\u30e1\u30f3\u30c8\u304c\u6b63\u3057\u3044\u304b\u6700\u5c24\u63a8\u5b9a\u3092\u884c\u3046\n\n```shell-session\ngmm-est --min-gaussian-occupancy=3  --mix-up=$numgauss --power=$power \\   \n\n$dir/0.mdl \"gmm-sum-accs - $dir/0.*.acc|\" $dir/1.mdl 2> $dir/log/update.0.log || exit 1;\n```\n\n\u30d3\u30fc\u30e0\u5e45\u3092\u5927\u304d\u304f\u3057\u305f\u63a2\u7d22\u3092\u884c\u3046\u5834\u5408\u306f\u4e0b\u8a18\u306e\u30b7\u30a7\u30eb\u304c\u5b9f\u884c\u3055\u308c\u308b\u3002\n\n```shell-session\nx=1\nwhile [ $x -lt $num_iters ]; do\n  echo \"$0: Pass $x\"\n  if [ $stage -le $x ]; then\n    if echo $realign_iters | grep -w $x >/dev/null; then\n      echo \"$0: Aligning data\"\n      mdl=\"gmm-boost-silence --boost=$boost_silence `cat $lang/phones/optional_s\nilence.csl` $dir/$x.mdl - |\"\n      $cmd JOB=1:$nj $dir/log/align.$x.JOB.log \\\n        gmm-align-compiled $scale_opts --beam=$beam --retry-beam=$[$beam*4] --ca\nreful=$careful \"$mdl\" \\\n        \"ark:gunzip -c $dir/fsts.JOB.gz|\" \"$feats\" \"ark,t:|gzip -c >$dir/ali.JOB\n.gz\" \\\n        || exit 1;\n    fi\n    $cmd JOB=1:$nj $dir/log/acc.$x.JOB.log \\\n      gmm-acc-stats-ali  $dir/$x.mdl \"$feats\" \"ark:gunzip -c $dir/ali.JOB.gz|\" \\\n      $dir/$x.JOB.acc || exit 1;\n\n    $cmd $dir/log/update.$x.log \\\n      gmm-est --write-occs=$dir/$[$x+1].occs --mix-up=$numgauss --power=$power $\ndir/$x.mdl \\\n      \"gmm-sum-accs - $dir/$x.*.acc|\" $dir/$[$x+1].mdl || exit 1;\n    rm $dir/$x.mdl $dir/$x.*.acc $dir/$x.occs 2>/dev/null\n  fi\n  if [ $x -le $max_iter_inc ]; then\n     numgauss=$[$numgauss+$incgauss];\n  fi\n  beam=10\n  x=$[$x+1]\ndone\n```\n\ngmm-boost-silence\u306f\n\nsilience\u30e2\u30c7\u30eb\u3092\u4ed6\u306eGMM\u30e2\u30c7\u30eb\u306b\u30b7\u30a7\u30a2\u3059\u308b\u3053\u3068\u3067\u3059\u3079\u3066\u306e\u30e2\u30c7\u30eb\u306b\u304a\u3051\u308bGMM\u91cd\u307f\u304csilence\u3068\u4e00\u81f4\u3059\u308b\u3002\n\n\n", "tags": ["Kaldi", "\u97f3\u58f0\u8a8d\u8b58"]}