{"context": "\n\n\u306f\u3058\u3081\u306b\nPivotal HDP + HAWQ\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3064\u3044\u3066\u306f\u3001\nPivotal HDP + HAWQ\u4e0a\u3067\u6a5f\u68b0\u5b66\u7fd2\u30e9\u30a4\u30d6\u30e9\u30eaMADlib\u3092\u8a66\u3057\u3066\u307f\u308b\uff08\uff11\uff09\n\u3067\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002\u4eca\u56de\u306f\u3001Pivotal\u304cApache Madlib\u3068\u3057\u3066OSS\u5316\u3057\u305f\u6a5f\u68b0\u5b66\u7fd2\u30e9\u30a4\u30d6\u30e9\u30eaMADlib\u3092HAWQ\u4e0a\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\u4f7f\u7528\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nMadlib v1.9\u3067\u306f\u3001Pivotal HD\u6539\u3081HDP\u306b\u5bfe\u5fdc\u3057\u305fHAWQ 2.0\u306b\u5bfe\u5fdc\u3057\u307e\u3057\u305f\u3002\n\u8a73\u7d30\u306fRelease\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002\n\nMADlib\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30d1\u30c3\u30b1\u30fc\u30b8\u306f\u3053\u3053\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u307e\u3059\u3002\u5c1a\u3001\u4eca\u56de\u306e\u74b0\u5883\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\nOS:CentOS 6.7\nAmbari:2.2.2\nHDP:2.4\nHAWQ:2.0.0\nMADlib:1.9\n5/9\u306bPivotal\u304b\u3089gp\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u63d0\u4f9b\u3055\u308c\u307e\u3057\u305f\u3002\n\u305d\u308c\u307e\u3067\u306f\u3001tar\u3067\u843d\u3068\u3057\u3066\u4e2d\u306b\u542b\u307e\u308c\u3066\u3044\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u8003\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u3063\u3066\u307f\u307e\u3057\u305f\u304c\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u4e0d\u9069\u5408\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u3002\n\u7121\u7406\u3084\u308a\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\u3092\u3044\u3058\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3067\u304d\u305f\u3082\u306e\u306e\u3046\u307e\u304f\u52d5\u304b\u305a\u3001\u3001\n\u6df1\u304f\u306f\u8ffd\u3063\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u4eca\u56de\u306fgp\u30d1\u30c3\u30b1\u30fc\u30b8\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\ngp\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u6700\u5f8c\u306bsuccessfully installed.\u3068\u51fa\u307e\u3059\u3002\nmkdir /home/gpadmin/madlib\n\nls -l /tmp\n-rw-r--r--  1 root    root    2611033 May 19 11:24 madlib-ossv1.9_pv1.9.5_hawq2.0-rhel5-x86_64.solitairetheme8\n\ntar -zxvf /tmp/madlib-ossv1.9_pv1.9.5_hawq2.0-rhel5-x86_64.solitairetheme8 -C /home/gpadmin/madlib/\nmadlib-ossv1.9_pv1.9.5_hawq2.0-rhel5-x86_64.gppkg\n\nls -l /home/gpadmin/madlib/\ntotal 2680\n-rw-r--r-- 1 gpadmin gpadmin 2557445 Apr 16 10:39 madlib-ossv1.9_pv1.9.5_hawq2.0-rhel5-x86_64.gppkg\n-rw-r--r-- 1 gpadmin gpadmin  135534 Apr 15 02:28 open_source_license_MADlib_1.9_GA.txt\n-rw-r--r-- 1 gpadmin gpadmin   44051 Apr 15 02:34 ReleaseNotes.txt\n\ngppkg --install /home/gpadmin/madlib/madlib-ossv1.9_pv1.9.5_hawq2.0-rhel5-x86_64.gppkg\n...madlib-ossv1.9_pv1.9.5_hawq2.0-rhel5-x86_64.gppkg successfully installed.\n\nDatabase\u3092\u4f5c\u6210\u3057\u3001madpack\u30b3\u30de\u30f3\u30c9\u3067MADlib\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nHAWQ 2.0\u3067\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068madpack\u306e\u30d1\u30b9\u304c\u5c11\u3057\u7570\u306a\u308a\u307e\u3059\u304c$GPHOME/madlib/bin/madpack\u3067\u3059\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u305f\u3089\u6700\u5f8c\u306bMADlib 1.9 installed successfully in MADLIB schema.\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\ncreatedb -h namenode-02 -p 5432 madlib-test\n\npsql madlib-test\npsql (8.2.15)\nType \"help\" for help.\n\n/usr/local/hawq/madlib/bin/madpack install -p hawq -c gpadmin@namenode-02:5432/madlib-test\n...MADlib 1.9 installed successfully in MADLIB schema.\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306bMADlib\u306e\u52d5\u4f5c\u78ba\u8a8d\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u56de\u5e30\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u304c\u3001\u304b\u306a\u308a\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3057\u305f(\u6ce3)\n\u3069\u308c\u304f\u3089\u3044\u304b\u304b\u3063\u305f\u304b\u306f\u3001\u4e0b\u8a18\u306e\u5168\u30df\u30ea\u79d2\u3092\u8db3\u3057\u3066\u9802\u3051\u308c\u3070\u3068\u3002\u3002\n/usr/local/hawq/madlib/bin/madpack install-check -s madlib -p hawq -c gpadmin@namenode-02:5432/madlib-test\nmadpack.py : INFO : Detected HAWQ version 2.0.\nTEST CASE RESULT|Module: array_ops|array_ops.sql_in|PASS|Time: 2887 milliseconds\nTEST CASE RESULT|Module: bayes|gaussian_naive_bayes.sql_in|PASS|Time: 27239 milliseconds\nTEST CASE RESULT|Module: bayes|bayes.sql_in|PASS|Time: 144832 milliseconds\nTEST CASE RESULT|Module: crf|crf_train_small.sql_in|PASS|Time: 66271 milliseconds\nTEST CASE RESULT|Module: crf|crf_train_large.sql_in|PASS|Time: 69897 milliseconds\nTEST CASE RESULT|Module: crf|crf_test_small.sql_in|PASS|Time: 75566 milliseconds\nTEST CASE RESULT|Module: crf|crf_test_large.sql_in|PASS|Time: 81538 milliseconds\nTEST CASE RESULT|Module: elastic_net|elastic_net_install_check.sql_in|PASS|Time: 141132 milliseconds\nTEST CASE RESULT|Module: linalg|svd.sql_in|PASS|Time: 246214 milliseconds\nTEST CASE RESULT|Module: linalg|matrix_ops.sql_in|PASS|Time: 144442 milliseconds\nTEST CASE RESULT|Module: linalg|linalg.sql_in|PASS|Time: 4292 milliseconds\nTEST CASE RESULT|Module: pmml|table_to_pmml.sql_in|PASS|Time: 67336 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_rf.sql_in|PASS|Time: 64269 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_ordinal.sql_in|PASS|Time: 23005 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_multinom.sql_in|PASS|Time: 15461 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_glm_poisson.sql_in|PASS|Time: 11261 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_glm_normal.sql_in|PASS|Time: 9513 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_glm_ig.sql_in|PASS|Time: 9905 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_glm_gamma.sql_in|PASS|Time: 34263 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_glm_binomial.sql_in|PASS|Time: 16366 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_dt.sql_in|PASS|Time: 17647 milliseconds\nTEST CASE RESULT|Module: prob|prob.sql_in|PASS|Time: 856 milliseconds\nTEST CASE RESULT|Module: sketch|support.sql_in|PASS|Time: 87 milliseconds\nTEST CASE RESULT|Module: sketch|mfv.sql_in|PASS|Time: 167 milliseconds\nTEST CASE RESULT|Module: sketch|fm.sql_in|PASS|Time: 7668 milliseconds\nTEST CASE RESULT|Module: sketch|cm.sql_in|PASS|Time: 13737 milliseconds\nTEST CASE RESULT|Module: tsa|arima_train.sql_in|PASS|Time: 111843 milliseconds\nTEST CASE RESULT|Module: tsa|arima.sql_in|PASS|Time: 119091 milliseconds\nTEST CASE RESULT|Module: conjugate_gradient|conj_grad.sql_in|PASS|Time: 28276 milliseconds\nTEST CASE RESULT|Module: lda|lda.sql_in|PASS|Time: 110019 milliseconds\nTEST CASE RESULT|Module: stats|wsr_test.sql_in|PASS|Time: 6337 milliseconds\nTEST CASE RESULT|Module: stats|t_test.sql_in|PASS|Time: 7042 milliseconds\nTEST CASE RESULT|Module: stats|robust_and_clustered_variance_coxph.sql_in|PASS|Time: 52745 milliseconds\nTEST CASE RESULT|Module: stats|mw_test.sql_in|PASS|Time: 3351 milliseconds\nTEST CASE RESULT|Module: stats|ks_test.sql_in|PASS|Time: 4142 milliseconds\nTEST CASE RESULT|Module: stats|f_test.sql_in|PASS|Time: 3544 milliseconds\nTEST CASE RESULT|Module: stats|cox_prop_hazards.sql_in|PASS|Time: 140258 milliseconds\nTEST CASE RESULT|Module: stats|correlation.sql_in|PASS|Time: 43725 milliseconds\nTEST CASE RESULT|Module: stats|chi2_test.sql_in|PASS|Time: 6348 milliseconds\nTEST CASE RESULT|Module: stats|anova_test.sql_in|PASS|Time: 2638 milliseconds\nTEST CASE RESULT|Module: svec_util|svec_test.sql_in|PASS|Time: 21959 milliseconds\nTEST CASE RESULT|Module: svec_util|gp_sfv_sort_order.sql_in|PASS|Time: 5365 milliseconds\nTEST CASE RESULT|Module: utilities|text_utilities.sql_in|PASS|Time: 10388 milliseconds\nTEST CASE RESULT|Module: utilities|path.sql_in|PASS|Time: 22815 milliseconds\nTEST CASE RESULT|Module: utilities|drop_madlib_temp.sql_in|PASS|Time: 2299 milliseconds\nTEST CASE RESULT|Module: assoc_rules|assoc_rules.sql_in|PASS|Time: 106534 milliseconds\nTEST CASE RESULT|Module: convex|lmf.sql_in|PASS|Time: 38685 milliseconds\nTEST CASE RESULT|Module: glm|poisson.sql_in|PASS|Time: 49597 milliseconds\nTEST CASE RESULT|Module: glm|ordinal.sql_in|PASS|Time: 36686 milliseconds\nTEST CASE RESULT|Module: glm|multinom.sql_in|PASS|Time: 35888 milliseconds\nTEST CASE RESULT|Module: glm|inverse_gaussian.sql_in|PASS|Time: 35434 milliseconds\nTEST CASE RESULT|Module: glm|gaussian.sql_in|PASS|Time: 48369 milliseconds\nTEST CASE RESULT|Module: glm|gamma.sql_in|PASS|Time: 56914 milliseconds\nTEST CASE RESULT|Module: glm|binomial.sql_in|PASS|Time: 76544 milliseconds\nTEST CASE RESULT|Module: linear_systems|sparse_linear_sytems.sql_in|PASS|Time: 12537 milliseconds\nTEST CASE RESULT|Module: linear_systems|dense_linear_sytems.sql_in|PASS|Time: 11960 milliseconds\nTEST CASE RESULT|Module: recursive_partitioning|random_forest.sql_in|PASS|Time: 773923 milliseconds\nTEST CASE RESULT|Module: recursive_partitioning|decision_tree.sql_in|PASS|Time: 258150 milliseconds\nTEST CASE RESULT|Module: regress|robust.sql_in|PASS|Time: 186675 milliseconds\nTEST CASE RESULT|Module: regress|multilogistic.sql_in|PASS|Time: 71249 milliseconds\nTEST CASE RESULT|Module: regress|marginal.sql_in|PASS|Time: 271372 milliseconds\nTEST CASE RESULT|Module: regress|logistic.sql_in|PASS|Time: 128814 milliseconds\nTEST CASE RESULT|Module: regress|linear.sql_in|PASS|Time: 14019 milliseconds\nTEST CASE RESULT|Module: regress|clustered.sql_in|PASS|Time: 105627 milliseconds\nTEST CASE RESULT|Module: sample|sample.sql_in|PASS|Time: 353 milliseconds\nTEST CASE RESULT|Module: summary|summary.sql_in|PASS|Time: 26258 milliseconds\nTEST CASE RESULT|Module: kmeans|kmeans.sql_in|PASS|Time: 103760 milliseconds\nTEST CASE RESULT|Module: pca|pca_project.sql_in|PASS|Time: 220072 milliseconds\nTEST CASE RESULT|Module: pca|pca.sql_in|PASS|Time: 1157600 milliseconds\nTEST CASE RESULT|Module: validation|cross_validation.sql_in|PASS|Time: 106514 milliseconds\n\n\nMADlib\u52d5\u4f5c\u78ba\u8a8d\nUCI\u306e\u6a5f\u68b0\u5b66\u7fd2\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u3092HAWQ\u306b\u98df\u308f\u305b\u3066\u52d5\u4f5c\u78ba\u8a8d\u3092\u884c\u3044\u307e\u3059\u3002\u4eca\u56de\u306f\u3001\u300cAir Quality Data Set\u300d\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\u7d0410,000\u884c\u307b\u3069\u306e\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u3067\u5404\u5217\u306e\u8aac\u660e\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\n0 Date  (DD/MM/YYYY) \n1 Time  (HH.MM.SS) \n2 True hourly averaged concentration CO in mg/m^3 (reference analyzer) \n3 PT08.S1 (tin oxide) hourly averaged sensor response (nominally CO targeted)\n4 True hourly averaged overall Non Metanic HydroCarbons concentration in microg/m^3 (reference analyzer) \n5 True hourly averaged Benzene concentration in microg/m^3 (reference analyzer) \n6 PT08.S2 (titania) hourly averaged sensor response (nominally NMHC targeted)\n7 True hourly averaged NOx concentration in ppb (reference analyzer) \n8 PT08.S3 (tungsten oxide) hourly averaged sensor response (nominally NOx targeted) \n9 True hourly averaged NO2 concentration in microg/m^3 (reference analyzer) \n10 PT08.S4 (tungsten oxide) hourly averaged sensor response (nominally NO2 targeted)\n11 PT08.S5 (indium oxide) hourly averaged sensor response (nominally O3 targeted) \n12 Temperature in \u00c2\u00b0C \n13 Relative Humidity (%) \n14 AH Absolute Humidity \n\u307e\u305a\u306f\u3001\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3057\u3066\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u307e\u3059\u3002csv\u5f62\u5f0f\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u308a\u8fbc\u3093\u3067\u3044\u307e\u3059\u3002\nCREATE TABLE air (CO double precision,\n PT08_S1 double precision,\n NMHC double precision,\n C6H6 double precision,\n PT08_S2 double precision,\n NOx double precision,\n PT08_S3 double precision,\n NO2 double precision,\n PT08_S4 double precision,\n PT08_S5 double precision,\n T double precision,\n RH double precision,\n AH double precision);\nCREATE TABLE\n\nCOPY air FROM '/tmp/AirQualityUCI.csv' with CSV;\nCOPY 9357\n\nSELECT * FROM air LIMIT 1 OFFSET 0;\n co  | pt08_s1 | nmhc | c6h6 | pt08_s2 | nox | pt08_s3 | no2 | pt08_s4 | pt08_s5 | t  | rh |  ah\n-----+---------+------+------+---------+-----+---------+-----+---------+---------+----+----+------\n 2.2 |  1375.5 |   80 | 9.23 |  948.25 | 172 |    1092 | 122 | 1583.75 | 1203.25 | 11 | 60 | 0.79\n(1 row)\n\nLinear Regression\u3092\u7528\u3044\u308b\u3053\u3068\u304c\u6b63\u3057\u3044\u304b\u306f\u5225\u306b\u3057\u3066\u3001Linear Regression\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002t(\u6e29\u5ea6)\u306bco,nox,no2\u304c\u3069\u3046\u5f71\u97ff\u3059\u308b\u304b\u3068\u3044\u3046\u4eee\u5b9a\u3067\u884c\u3044\u307e\u3059\u3002Linear Regression\u306b\u306f\u3001madlib.linregr_train\u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\nair\u30fb\u30fb\u30fb\u30bd\u30fc\u30b9\u30c6\u30fc\u30d6\u30eb\nair_linregr\u30fb\u30fb\u30fb\u30a2\u30a6\u30c8\u30c6\u30fc\u30d6\u30eb\nt\u30fb\u30fb\u30fby=ax+b\u306b\u304a\u3051\u308by\u306b\u3042\u305f\u308b\u90e8\u5206(\u4f9d\u5b58\u3059\u308b\u5024)\nARRAY\u30fb\u30fb\u30fby=ax+b\u306ex\u306b\u3042\u305f\u308b\u90e8\u5206(\u4f9d\u5b58\u3057\u306a\u3044\u5024)\n'ARRAY[1, co, nox, no2]'\u306e\u300c1\u300d\u306fb\u306b\u3042\u305f\u308b\u90e8\u5206\u3067\u3059\u30021\u306b\u4fc2\u6570\u304c\u304b\u304b\u308b\u3053\u3068\u3067\u5207\u7247\u304c\u5c0e\u304b\u308c\u307e\u3059\u3002\nSELECT madlib.linregr_train( 'air', \n'air_linregr',\n't',\n'ARRAY[1, co, nox, no2]'\n)\n\n\\x ON\nExpanded display is on.\n\nSELECT * FROM air_linregr;\ncoef                     | {13.0016775320249,-0.0173860412316063,-0.0355744722295093,0.037472718672319}\nr2                       | 0.0222459268535918\nstd_err                  | {0.686781796848607,0.00768313997991878,0.0029807558139089,0.00693296719744697}\nt_stats                  | {18.9313077191109,-2.26288226910453,-11.9347153710178,5.40500446707986}\np_values                 | {1.82557330928406e-78,0.0236657782777995,1.34481072616316e-32,6.64011183810558e-08}\ncondition_no             | 515.362323749482\nnum_rows_processed       | 9357\nnum_missing_rows_skipped | 0\nvariance_covariance      | {{0.471669236482602,0.00334335525948873,-0.000573673035786418,-0.00112618871539455},{0.00334335525948873,5.90306399510263e-05,1.17703542489199e-06,-2.61889194380323e-05},{-0.000573673035786418,1.17703542489199e-06,8.88490522215174e-06,-1.5207399576609e-05},{-0.00112618871539455,-2.61889194380322e-05,-1.5207399576609e-05,4.80660341608757e-05}}\n\n\ncoef\u306e\u7d50\u679c\u3092\u898b\u308b\u3068co,nox,no2\u3092\u5909\u6570\u3068\u3059\u308c\u3070\u4e0b\u8a18\u306e\u30a4\u30e1\u30fc\u30b8\u304b\u3068\u3002\nt = 13 - 0.017*co - 0.035*nox + 0.037*no2\n\u7c21\u5358\u306a\u52d5\u4f5c\u78ba\u8a8d\u307e\u3067\u3067\u3059\u304c\u3001\u30b9\u30b1\u30fc\u30e9\u30d6\u30eb\u306a\u6a5f\u68b0\u5b66\u7fd2\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u306f\u3042\u308a\u307e\u3059\u304c\n\u4ed6\u306b\u3082\u6a5f\u68b0\u5b66\u7fd2\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3042\u308b\u4e2d\u3067\u3069\u3046\u3044\u3063\u305f\u7528\u9014\u304c\u5411\u3044\u3066\u3044\u308b\u304b\u8981\u6574\u7406\u3002\n\u304a\u8a73\u3057\u3044\u65b9\u6559\u3048\u3066\u9802\u3051\u308b\u3068\u52a9\u304b\u308a\u307e\u3059\u3002\n##\u306f\u3058\u3081\u306b##\nPivotal HDP + HAWQ\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3064\u3044\u3066\u306f\u3001\n[Pivotal HDP + HAWQ\u4e0a\u3067\u6a5f\u68b0\u5b66\u7fd2\u30e9\u30a4\u30d6\u30e9\u30eaMADlib\u3092\u8a66\u3057\u3066\u307f\u308b\uff08\uff11\uff09](http://qiita.com/K_wata/items/96e961a7a062a317bb99)\n\u3067\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002\u4eca\u56de\u306f\u3001Pivotal\u304cApache Madlib\u3068\u3057\u3066OSS\u5316\u3057\u305f\u6a5f\u68b0\u5b66\u7fd2\u30e9\u30a4\u30d6\u30e9\u30eaMADlib\u3092HAWQ\u4e0a\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\u4f7f\u7528\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nMadlib v1.9\u3067\u306f\u3001Pivotal HD\u6539\u3081HDP\u306b\u5bfe\u5fdc\u3057\u305fHAWQ 2.0\u306b\u5bfe\u5fdc\u3057\u307e\u3057\u305f\u3002\n\u8a73\u7d30\u306f[Release](https://cwiki.apache.org/confluence/display/MADLIB/MADlib+1.9)\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002\n\n##MADlib\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb##\n\u30d1\u30c3\u30b1\u30fc\u30b8\u306f[\u3053\u3053](https://network.pivotal.io/products/pivotal-hdb#/releases/1695/file_groups/389)\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u307e\u3059\u3002\u5c1a\u3001\u4eca\u56de\u306e\u74b0\u5883\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\n\nOS:CentOS 6.7\nAmbari:2.2.2\nHDP:2.4\nHAWQ:2.0.0\nMADlib:1.9\n\n5/9\u306bPivotal\u304b\u3089gp\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u63d0\u4f9b\u3055\u308c\u307e\u3057\u305f\u3002\n\u305d\u308c\u307e\u3067\u306f\u3001tar\u3067\u843d\u3068\u3057\u3066\u4e2d\u306b\u542b\u307e\u308c\u3066\u3044\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u8003\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u3063\u3066\u307f\u307e\u3057\u305f\u304c\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u4e0d\u9069\u5408\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u3002\n\u7121\u7406\u3084\u308a\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\u3092\u3044\u3058\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3067\u304d\u305f\u3082\u306e\u306e\u3046\u307e\u304f\u52d5\u304b\u305a\u3001\u3001\n\u6df1\u304f\u306f\u8ffd\u3063\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u4eca\u56de\u306fgp\u30d1\u30c3\u30b1\u30fc\u30b8\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\ngp\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u6700\u5f8c\u306bsuccessfully installed.\u3068\u51fa\u307e\u3059\u3002\n\n```\nmkdir /home/gpadmin/madlib\n\nls -l /tmp\n-rw-r--r--  1 root    root    2611033 May 19 11:24 madlib-ossv1.9_pv1.9.5_hawq2.0-rhel5-x86_64.solitairetheme8\n\ntar -zxvf /tmp/madlib-ossv1.9_pv1.9.5_hawq2.0-rhel5-x86_64.solitairetheme8 -C /home/gpadmin/madlib/\nmadlib-ossv1.9_pv1.9.5_hawq2.0-rhel5-x86_64.gppkg\n\nls -l /home/gpadmin/madlib/\ntotal 2680\n-rw-r--r-- 1 gpadmin gpadmin 2557445 Apr 16 10:39 madlib-ossv1.9_pv1.9.5_hawq2.0-rhel5-x86_64.gppkg\n-rw-r--r-- 1 gpadmin gpadmin  135534 Apr 15 02:28 open_source_license_MADlib_1.9_GA.txt\n-rw-r--r-- 1 gpadmin gpadmin   44051 Apr 15 02:34 ReleaseNotes.txt\n\ngppkg --install /home/gpadmin/madlib/madlib-ossv1.9_pv1.9.5_hawq2.0-rhel5-x86_64.gppkg\n...madlib-ossv1.9_pv1.9.5_hawq2.0-rhel5-x86_64.gppkg successfully installed.\n```\n\nDatabase\u3092\u4f5c\u6210\u3057\u3001madpack\u30b3\u30de\u30f3\u30c9\u3067MADlib\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nHAWQ 2.0\u3067\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068madpack\u306e\u30d1\u30b9\u304c\u5c11\u3057\u7570\u306a\u308a\u307e\u3059\u304c$GPHOME/madlib/bin/madpack\u3067\u3059\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u305f\u3089\u6700\u5f8c\u306bMADlib 1.9 installed successfully in MADLIB schema.\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n```\ncreatedb -h namenode-02 -p 5432 madlib-test\n\npsql madlib-test\npsql (8.2.15)\nType \"help\" for help.\n\n/usr/local/hawq/madlib/bin/madpack install -p hawq -c gpadmin@namenode-02:5432/madlib-test\n...MADlib 1.9 installed successfully in MADLIB schema.\n\n```\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306bMADlib\u306e\u52d5\u4f5c\u78ba\u8a8d\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u56de\u5e30\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u304c\u3001\u304b\u306a\u308a\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3057\u305f(\u6ce3)\n\u3069\u308c\u304f\u3089\u3044\u304b\u304b\u3063\u305f\u304b\u306f\u3001\u4e0b\u8a18\u306e\u5168\u30df\u30ea\u79d2\u3092\u8db3\u3057\u3066\u9802\u3051\u308c\u3070\u3068\u3002\u3002\n\n```\n/usr/local/hawq/madlib/bin/madpack install-check -s madlib -p hawq -c gpadmin@namenode-02:5432/madlib-test\nmadpack.py : INFO : Detected HAWQ version 2.0.\nTEST CASE RESULT|Module: array_ops|array_ops.sql_in|PASS|Time: 2887 milliseconds\nTEST CASE RESULT|Module: bayes|gaussian_naive_bayes.sql_in|PASS|Time: 27239 milliseconds\nTEST CASE RESULT|Module: bayes|bayes.sql_in|PASS|Time: 144832 milliseconds\nTEST CASE RESULT|Module: crf|crf_train_small.sql_in|PASS|Time: 66271 milliseconds\nTEST CASE RESULT|Module: crf|crf_train_large.sql_in|PASS|Time: 69897 milliseconds\nTEST CASE RESULT|Module: crf|crf_test_small.sql_in|PASS|Time: 75566 milliseconds\nTEST CASE RESULT|Module: crf|crf_test_large.sql_in|PASS|Time: 81538 milliseconds\nTEST CASE RESULT|Module: elastic_net|elastic_net_install_check.sql_in|PASS|Time: 141132 milliseconds\nTEST CASE RESULT|Module: linalg|svd.sql_in|PASS|Time: 246214 milliseconds\nTEST CASE RESULT|Module: linalg|matrix_ops.sql_in|PASS|Time: 144442 milliseconds\nTEST CASE RESULT|Module: linalg|linalg.sql_in|PASS|Time: 4292 milliseconds\nTEST CASE RESULT|Module: pmml|table_to_pmml.sql_in|PASS|Time: 67336 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_rf.sql_in|PASS|Time: 64269 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_ordinal.sql_in|PASS|Time: 23005 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_multinom.sql_in|PASS|Time: 15461 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_glm_poisson.sql_in|PASS|Time: 11261 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_glm_normal.sql_in|PASS|Time: 9513 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_glm_ig.sql_in|PASS|Time: 9905 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_glm_gamma.sql_in|PASS|Time: 34263 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_glm_binomial.sql_in|PASS|Time: 16366 milliseconds\nTEST CASE RESULT|Module: pmml|pmml_dt.sql_in|PASS|Time: 17647 milliseconds\nTEST CASE RESULT|Module: prob|prob.sql_in|PASS|Time: 856 milliseconds\nTEST CASE RESULT|Module: sketch|support.sql_in|PASS|Time: 87 milliseconds\nTEST CASE RESULT|Module: sketch|mfv.sql_in|PASS|Time: 167 milliseconds\nTEST CASE RESULT|Module: sketch|fm.sql_in|PASS|Time: 7668 milliseconds\nTEST CASE RESULT|Module: sketch|cm.sql_in|PASS|Time: 13737 milliseconds\nTEST CASE RESULT|Module: tsa|arima_train.sql_in|PASS|Time: 111843 milliseconds\nTEST CASE RESULT|Module: tsa|arima.sql_in|PASS|Time: 119091 milliseconds\nTEST CASE RESULT|Module: conjugate_gradient|conj_grad.sql_in|PASS|Time: 28276 milliseconds\nTEST CASE RESULT|Module: lda|lda.sql_in|PASS|Time: 110019 milliseconds\nTEST CASE RESULT|Module: stats|wsr_test.sql_in|PASS|Time: 6337 milliseconds\nTEST CASE RESULT|Module: stats|t_test.sql_in|PASS|Time: 7042 milliseconds\nTEST CASE RESULT|Module: stats|robust_and_clustered_variance_coxph.sql_in|PASS|Time: 52745 milliseconds\nTEST CASE RESULT|Module: stats|mw_test.sql_in|PASS|Time: 3351 milliseconds\nTEST CASE RESULT|Module: stats|ks_test.sql_in|PASS|Time: 4142 milliseconds\nTEST CASE RESULT|Module: stats|f_test.sql_in|PASS|Time: 3544 milliseconds\nTEST CASE RESULT|Module: stats|cox_prop_hazards.sql_in|PASS|Time: 140258 milliseconds\nTEST CASE RESULT|Module: stats|correlation.sql_in|PASS|Time: 43725 milliseconds\nTEST CASE RESULT|Module: stats|chi2_test.sql_in|PASS|Time: 6348 milliseconds\nTEST CASE RESULT|Module: stats|anova_test.sql_in|PASS|Time: 2638 milliseconds\nTEST CASE RESULT|Module: svec_util|svec_test.sql_in|PASS|Time: 21959 milliseconds\nTEST CASE RESULT|Module: svec_util|gp_sfv_sort_order.sql_in|PASS|Time: 5365 milliseconds\nTEST CASE RESULT|Module: utilities|text_utilities.sql_in|PASS|Time: 10388 milliseconds\nTEST CASE RESULT|Module: utilities|path.sql_in|PASS|Time: 22815 milliseconds\nTEST CASE RESULT|Module: utilities|drop_madlib_temp.sql_in|PASS|Time: 2299 milliseconds\nTEST CASE RESULT|Module: assoc_rules|assoc_rules.sql_in|PASS|Time: 106534 milliseconds\nTEST CASE RESULT|Module: convex|lmf.sql_in|PASS|Time: 38685 milliseconds\nTEST CASE RESULT|Module: glm|poisson.sql_in|PASS|Time: 49597 milliseconds\nTEST CASE RESULT|Module: glm|ordinal.sql_in|PASS|Time: 36686 milliseconds\nTEST CASE RESULT|Module: glm|multinom.sql_in|PASS|Time: 35888 milliseconds\nTEST CASE RESULT|Module: glm|inverse_gaussian.sql_in|PASS|Time: 35434 milliseconds\nTEST CASE RESULT|Module: glm|gaussian.sql_in|PASS|Time: 48369 milliseconds\nTEST CASE RESULT|Module: glm|gamma.sql_in|PASS|Time: 56914 milliseconds\nTEST CASE RESULT|Module: glm|binomial.sql_in|PASS|Time: 76544 milliseconds\nTEST CASE RESULT|Module: linear_systems|sparse_linear_sytems.sql_in|PASS|Time: 12537 milliseconds\nTEST CASE RESULT|Module: linear_systems|dense_linear_sytems.sql_in|PASS|Time: 11960 milliseconds\nTEST CASE RESULT|Module: recursive_partitioning|random_forest.sql_in|PASS|Time: 773923 milliseconds\nTEST CASE RESULT|Module: recursive_partitioning|decision_tree.sql_in|PASS|Time: 258150 milliseconds\nTEST CASE RESULT|Module: regress|robust.sql_in|PASS|Time: 186675 milliseconds\nTEST CASE RESULT|Module: regress|multilogistic.sql_in|PASS|Time: 71249 milliseconds\nTEST CASE RESULT|Module: regress|marginal.sql_in|PASS|Time: 271372 milliseconds\nTEST CASE RESULT|Module: regress|logistic.sql_in|PASS|Time: 128814 milliseconds\nTEST CASE RESULT|Module: regress|linear.sql_in|PASS|Time: 14019 milliseconds\nTEST CASE RESULT|Module: regress|clustered.sql_in|PASS|Time: 105627 milliseconds\nTEST CASE RESULT|Module: sample|sample.sql_in|PASS|Time: 353 milliseconds\nTEST CASE RESULT|Module: summary|summary.sql_in|PASS|Time: 26258 milliseconds\nTEST CASE RESULT|Module: kmeans|kmeans.sql_in|PASS|Time: 103760 milliseconds\nTEST CASE RESULT|Module: pca|pca_project.sql_in|PASS|Time: 220072 milliseconds\nTEST CASE RESULT|Module: pca|pca.sql_in|PASS|Time: 1157600 milliseconds\nTEST CASE RESULT|Module: validation|cross_validation.sql_in|PASS|Time: 106514 milliseconds\n```\n\n##MADlib\u52d5\u4f5c\u78ba\u8a8d##\n[UCI](http://archive.ics.uci.edu/ml/index.html)\u306e\u6a5f\u68b0\u5b66\u7fd2\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u3092HAWQ\u306b\u98df\u308f\u305b\u3066\u52d5\u4f5c\u78ba\u8a8d\u3092\u884c\u3044\u307e\u3059\u3002\u4eca\u56de\u306f\u3001\u300cAir Quality Data Set\u300d\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\u7d0410,000\u884c\u307b\u3069\u306e\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u3067\u5404\u5217\u306e\u8aac\u660e\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3067\u3059\u3002\n\n0 Date\t(DD/MM/YYYY) \n1 Time\t(HH.MM.SS) \n2 True hourly averaged concentration CO in mg/m^3 (reference analyzer) \n3 PT08.S1 (tin oxide) hourly averaged sensor response (nominally CO targeted)\n4 True hourly averaged overall Non Metanic HydroCarbons concentration in microg/m^3 (reference analyzer) \n5 True hourly averaged Benzene concentration in microg/m^3 (reference analyzer) \n6 PT08.S2 (titania) hourly averaged sensor response (nominally NMHC targeted)\n7 True hourly averaged NOx concentration in ppb (reference analyzer) \n8 PT08.S3 (tungsten oxide) hourly averaged sensor response (nominally NOx targeted) \n9 True hourly averaged NO2 concentration in microg/m^3 (reference analyzer)\t\n10 PT08.S4 (tungsten oxide) hourly averaged sensor response (nominally NO2 targeted)\n11 PT08.S5 (indium oxide) hourly averaged sensor response (nominally O3 targeted) \n12 Temperature in \u00c2\u00b0C\t\n13 Relative Humidity (%) \n14 AH Absolute Humidity \n\n\u307e\u305a\u306f\u3001\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3057\u3066\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u307e\u3059\u3002csv\u5f62\u5f0f\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u308a\u8fbc\u3093\u3067\u3044\u307e\u3059\u3002\n\n```\nCREATE TABLE air (CO double precision,\n PT08_S1 double precision,\n NMHC double precision,\n C6H6 double precision,\n PT08_S2 double precision,\n NOx double precision,\n PT08_S3 double precision,\n NO2 double precision,\n PT08_S4 double precision,\n PT08_S5 double precision,\n T double precision,\n RH double precision,\n AH double precision);\nCREATE TABLE\n\nCOPY air FROM '/tmp/AirQualityUCI.csv' with CSV;\nCOPY 9357\n\nSELECT * FROM air LIMIT 1 OFFSET 0;\n co  | pt08_s1 | nmhc | c6h6 | pt08_s2 | nox | pt08_s3 | no2 | pt08_s4 | pt08_s5 | t  | rh |  ah\n-----+---------+------+------+---------+-----+---------+-----+---------+---------+----+----+------\n 2.2 |  1375.5 |   80 | 9.23 |  948.25 | 172 |    1092 | 122 | 1583.75 | 1203.25 | 11 | 60 | 0.79\n(1 row)\n```\n\nLinear Regression\u3092\u7528\u3044\u308b\u3053\u3068\u304c\u6b63\u3057\u3044\u304b\u306f\u5225\u306b\u3057\u3066\u3001Linear Regression\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002t(\u6e29\u5ea6)\u306bco,nox,no2\u304c\u3069\u3046\u5f71\u97ff\u3059\u308b\u304b\u3068\u3044\u3046\u4eee\u5b9a\u3067\u884c\u3044\u307e\u3059\u3002Linear Regression\u306b\u306f\u3001madlib.linregr_train\u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\n\nair\u30fb\u30fb\u30fb\u30bd\u30fc\u30b9\u30c6\u30fc\u30d6\u30eb\nair_linregr\u30fb\u30fb\u30fb\u30a2\u30a6\u30c8\u30c6\u30fc\u30d6\u30eb\nt\u30fb\u30fb\u30fby=ax+b\u306b\u304a\u3051\u308by\u306b\u3042\u305f\u308b\u90e8\u5206(\u4f9d\u5b58\u3059\u308b\u5024)\nARRAY\u30fb\u30fb\u30fby=ax+b\u306ex\u306b\u3042\u305f\u308b\u90e8\u5206(\u4f9d\u5b58\u3057\u306a\u3044\u5024)\n'ARRAY[1, co, nox, no2]'\u306e\u300c1\u300d\u306fb\u306b\u3042\u305f\u308b\u90e8\u5206\u3067\u3059\u30021\u306b\u4fc2\u6570\u304c\u304b\u304b\u308b\u3053\u3068\u3067\u5207\u7247\u304c\u5c0e\u304b\u308c\u307e\u3059\u3002\n\n```\nSELECT madlib.linregr_train( 'air', \n'air_linregr',\n't',\n'ARRAY[1, co, nox, no2]'\n)\n\n\\x ON\nExpanded display is on.\n\nSELECT * FROM air_linregr;\ncoef                     | {13.0016775320249,-0.0173860412316063,-0.0355744722295093,0.037472718672319}\nr2                       | 0.0222459268535918\nstd_err                  | {0.686781796848607,0.00768313997991878,0.0029807558139089,0.00693296719744697}\nt_stats                  | {18.9313077191109,-2.26288226910453,-11.9347153710178,5.40500446707986}\np_values                 | {1.82557330928406e-78,0.0236657782777995,1.34481072616316e-32,6.64011183810558e-08}\ncondition_no             | 515.362323749482\nnum_rows_processed       | 9357\nnum_missing_rows_skipped | 0\nvariance_covariance      | {{0.471669236482602,0.00334335525948873,-0.000573673035786418,-0.00112618871539455},{0.00334335525948873,5.90306399510263e-05,1.17703542489199e-06,-2.61889194380323e-05},{-0.000573673035786418,1.17703542489199e-06,8.88490522215174e-06,-1.5207399576609e-05},{-0.00112618871539455,-2.61889194380322e-05,-1.5207399576609e-05,4.80660341608757e-05}}\n\n```\n\ncoef\u306e\u7d50\u679c\u3092\u898b\u308b\u3068co,nox,no2\u3092\u5909\u6570\u3068\u3059\u308c\u3070\u4e0b\u8a18\u306e\u30a4\u30e1\u30fc\u30b8\u304b\u3068\u3002\nt = 13 - 0.017*co - 0.035*nox + 0.037*no2\n\n\u7c21\u5358\u306a\u52d5\u4f5c\u78ba\u8a8d\u307e\u3067\u3067\u3059\u304c\u3001\u30b9\u30b1\u30fc\u30e9\u30d6\u30eb\u306a\u6a5f\u68b0\u5b66\u7fd2\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u306f\u3042\u308a\u307e\u3059\u304c\n\u4ed6\u306b\u3082\u6a5f\u68b0\u5b66\u7fd2\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3042\u308b\u4e2d\u3067\u3069\u3046\u3044\u3063\u305f\u7528\u9014\u304c\u5411\u3044\u3066\u3044\u308b\u304b\u8981\u6574\u7406\u3002\n\u304a\u8a73\u3057\u3044\u65b9\u6559\u3048\u3066\u9802\u3051\u308b\u3068\u52a9\u304b\u308a\u307e\u3059\u3002\n\n", "tags": ["HDP", "HAWQ", "Pivotal", "MADlib"]}