{"context": "RNNLM Toolkit\u3092\u4f7f\u3063\u3066\u307f\u305f\u3088\u30fc\u3063\u3066\u6295\u7a3f\u3092\u65e5\u672c\u8a9e\u3067\u306f\u898b\u304b\u3051\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u5099\u5fd8\u9332\u3082\u517c\u306d\u3066\n\nRecurrent Neural Network Language Model(RNNLM)\n\u30ea\u30ab\u30ec\u30f3\u30c8\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u5229\u7528\u3057\u305f\u8a00\u8a9e\u30e2\u30c7\u30eb\n\u8a73\u7d30\u306f\u30b0\u30b0\u3063\u3066\u4e0b\u3055\u3044(\u81ea\u5206\u3082\u52c9\u5f37\u4e2d)\n\nRNNLM Toolkit\nTomas Mikolov\u6c0f\u304c\u958b\u767a\u3057\u305f\u30c4\u30fc\u30eb\u30ad\u30c3\u30c8\nRNNLM Toolkit\n\u6700\u65b0\u7248\u306f http://rnnlm.org/ \u306b\u4e0a\u304c\u3063\u3066\u3044\u308b\u304c\u30da\u30fc\u30b8\u304b\u3089\u3057\u3087\u3063\u3061\u3085\u3046\u30a8\u30e9\u30fc\u8fd4\u3055\u308c\u308b\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\u74b0\u5883\uff1aCentOS7.2\n\u3068\u308a\u3042\u3048\u305a\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u30b5\u30a4\u30c8\u306b\u7f6e\u3044\u3066\u3042\u308b\u4e00\u756a\u65b0\u3057\u3044\u306e\u3092\u6301\u3063\u3066\u304f\u308b\n$ mkdir rnnlm\n$ cd rnnlm\n$ wget http://www.fit.vutbr.cz/~imikolov/rnnlm/rnnlm-0.3e.tgz\n$ tar zxvf rnnlm-0.3e.tgz\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nMakefile\u304c\u305d\u306e\u307e\u307e\u3060\u3068\u52d5\u304b\u306a\u304b\u3063\u305f\u306e\u3067\u66f8\u304d\u63db\u3048\n\nmakefile\n#CC = x86_64-linux-g++-4.6 #\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8                                                                                                                            \n#CFLAGS = -lm -O2 -Wall -funroll-loops -ffast-math #\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8                                                                                                    \n#CFLAGS = -lm -O2 -Wall                                                                                                                               \n\nCC = g++ #\u8ffd\u52a0\nCFLAGS = -lm -O2\u3000#\u8ffd\u52a0\n\nall: rnnlmlib.o rnnlm\n\nrnnlmlib.o : rnnlmlib.cpp\n        $(CC) $(CFLAGS) $(OPT_DEF) -c rnnlmlib.cpp\n\nrnnlm : rnnlm.cpp\n        $(CC) $(CFLAGS) $(OPT_DEF) rnnlm.cpp rnnlmlib.o -o rnnlm\n\nclean:\n        rm -rf *.o rnnlm\n\n\n\u305d\u306e\u5f8c\u3001Make\n$ make clean\n$ make\n\n\nRNNLM\u5b66\u7fd2\n\u5b66\u7fd2\u7528\u3001\u8abf\u6574\u7528\u3001\u30c6\u30b9\u30c8\u7528\u306e\u30b3\u30fc\u30d1\u30b9\u3092\u7528\u610f\u3059\u308b(1\u884c1\u6587\u3001\u5206\u304b\u3061\u66f8\u304d\u3055\u308c\u305f\u3082\u306e)\n\u4eca\u56de\u306fntcir10\u306e\u65e5\u672c\u8a9e\u7279\u8a31\u6587\u304b\u3089\u5b66\u7fd2\u752810\u4e07\u6587(train100k.txt)\u3001\u8abf\u6574\u75285\u5343\u6587(valid5k.txt)\u3001\u30c6\u30b9\u30c8\u752810\u4e07\u6587(test100k.txt)\u3092\u7528\u610f\n$ time ./rnnlm -train train100k.txt -valid valid5k.txt -rnnlm rnnlm.hidden25.class300.model -hidden 25 -rand-seed 1 -debug 2 -class 300 -bptt 6 -bptt-block 10\n\ndebug mode: 2\ntrain file: train100k.txt\nvalid file: valid5k.txt\nclass size: 300\nHidden layer size: 25\nBPTT: 6\nBPTT block: 10\nRand seed: 1\nrnnlm file: rnnlm.hidden25.class300.model\nStarting training using file train100k.txt\nVocab size: 74522\nWords in train file: 6244514\nIter:   0       Alpha: 0.100000    TRAIN entropy: 6.8871    VALID entropy: 6.7309\nIter:   1       Alpha: 0.100000    TRAIN entropy: 6.5655    VALID entropy: 6.6412\nIter:   2       Alpha: 0.100000    TRAIN entropy: 6.4743    VALID entropy: 6.6185\nIter:   3       Alpha: 0.100000    TRAIN entropy: 6.4212    VALID entropy: 6.5830\nIter:   4       Alpha: 0.100000    TRAIN entropy: 6.3844    VALID entropy: 6.5716\nIter:   5       Alpha: 0.050000    TRAIN entropy: 6.3150    VALID entropy: 6.4327\nIter:   6       Alpha: 0.025000    TRAIN entropy: 6.2540    VALID entropy: 6.3519\nIter:   7       Alpha: 0.012500    TRAIN entropy: 6.2201    VALID entropy: 6.3012\nIter:   8       Alpha: 0.006250    TRAIN entropy: 6.2016    VALID entropy: 6.2673\nIter:   9       Alpha: 0.003125    TRAIN entropy: 6.1918    VALID entropy: 6.2513\n\n\u51fa\u6765\u4e0a\u304c\u3063\u305f\u30e2\u30c7\u30eb\u306ePerplexity\u3092\u7b97\u51fa\n$ time ./rnnlm -rnnlm rnnlm.hidden25.class300.model -test test100k.txt\n\ntest file: test100k.txt\nrnnlm file: rnnlm.hidden25.class300.model\n\ntest log probability: -11721481.126285\n\nPPL net: 76.748383\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u8aac\u660e\n-rnnlm : \u4fdd\u5b58\u3059\u308b\u8a00\u8a9e\u30e2\u30c7\u30eb\u306e\u540d\u524d\n-hidden : \u96a0\u308c\u5c64\u306e\u30e6\u30cb\u30c3\u30c8\u6570\u3001\u591a\u3044\u307b\u3069\u6027\u80fd\u304c\u826f\u304f\u306a\u308b(\u305f\u3060\u3057\u5b66\u7fd2\u6642\u9593\u304c\u9045\u304f\u306a\u308b)\n-class : untruncated\u306a\u8a9e\u5f59\u6570\u3001\u6027\u80fd\u3092\u6c42\u3081\u308b\u5834\u54081\u306b\u8a2d\u5b9a\u3059\u308b\u304c\u3001\u3068\u3066\u3082\u9045\u3044(300~500\u63a8\u5968)\n-bptt : Back Propagation Through Time\u306e\u30b9\u30c6\u30c3\u30d7\u6570(\u5c11\u306a\u304f\u3068\u30826\u56de\u63a8\u5968)\n\n\u5b9f\u9a13\nclass\u3092300\u3001bptt\u30926\u306b\u56fa\u5b9a\u3057\u3001hidden\u306e\u307f\u5909\u5316\u3055\u305b\u3066RNNLM\u3092\u69cb\u7bc9\u3057\u3001Perplexity\u3092\u7b97\u51fa\n\n\n\nhidden\nPerplexity\ntime\n\n\n\n\n25\n76.7484\n63m49.649s\n\n\n50\n62.7530\n144m37.927s\n\n\n75\n57.3227\n216m2.546s\n\n\n100\n53.0952\n324m38.522s\n\n\n150\n49.8061\n473m19.125s\n\n\n200\n47.0688\n705m6.422s\n\n\n300\n44.6543\n1139m2.378s\n\n\n\n\u96a0\u308c\u5c64\u306e\u30e6\u30cb\u30c3\u30c8\u6570\u5897\u52a0\u306b\u5f93\u3063\u3066\u3001Perplexity\u304c\u6e1b\u5c11\u3059\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u308b\n\u305d\u306e\u5206\u8a00\u8a9e\u30e2\u30c7\u30eb\u306e\u4f5c\u6210\u306b\u6642\u9593\u304c\u304b\u304b\u308b(hidden=200\u306712\u6642\u9593\u5f31)\nRNNLM\u3068\u306e\u6bd4\u8f03\u306e\u305f\u3081\u3001KenLM\u306btrain100k.txt\u3068valid5k.txt\u3092\u5408\u308f\u305b\u305f\u30b3\u30fc\u30d1\u30b9\u3092\u5b66\u7fd2\u3055\u305b\u3001\u30c6\u30b9\u30c8\u30b3\u30fc\u30d1\u30b9\u3092\u7528\u3044\u3066Perplexity\u3092\u8a08\u6e2c(\u7d50\u679c\u3060\u3051\u63b2\u8f09)\n\n\n\nPerplexity\ntime\n\n\n\n\n61.2690\n28.1269s\n\n\n\nKenLM\u306f\u69cb\u7bc9\u6642\u9593\u304c\u65e9\u3044\n\n\u8003\u5bdf\nRNNLM\u306e\u96a0\u308c\u5c64\u30e6\u30cb\u30c3\u30c8\u6570\u304c75\u306e\u3068\u304d\u3001KenLM\u306ePerplexity\u3092\u4e0a\u56de\u3063\u305f\nDeep Learning\u6050\u308b\u3079\u3057\u2026\n\u305f\u3060\u3001\u69cb\u7bc9\u6642\u9593\u304cKenLM\u3068\u6bd4\u8f03\u3057\u3066\u304b\u306a\u308a\u639b\u304b\u308b\nRNNLM Toolkit\u3092\u4f7f\u3063\u3066\u307f\u305f\u3088\u30fc\u3063\u3066\u6295\u7a3f\u3092\u65e5\u672c\u8a9e\u3067\u306f\u898b\u304b\u3051\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u5099\u5fd8\u9332\u3082\u517c\u306d\u3066\n\n#Recurrent Neural Network Language Model(RNNLM)\n\n\u30ea\u30ab\u30ec\u30f3\u30c8\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u5229\u7528\u3057\u305f\u8a00\u8a9e\u30e2\u30c7\u30eb\n\u8a73\u7d30\u306f\u30b0\u30b0\u3063\u3066\u4e0b\u3055\u3044(\u81ea\u5206\u3082\u52c9\u5f37\u4e2d)\n\n\n#RNNLM Toolkit\nTomas Mikolov\u6c0f\u304c\u958b\u767a\u3057\u305f\u30c4\u30fc\u30eb\u30ad\u30c3\u30c8\n[RNNLM Toolkit](http://www.fit.vutbr.cz/~imikolov/rnnlm/)\n\u6700\u65b0\u7248\u306f http://rnnlm.org/ \u306b\u4e0a\u304c\u3063\u3066\u3044\u308b\u304c\u30da\u30fc\u30b8\u304b\u3089\u3057\u3087\u3063\u3061\u3085\u3046\u30a8\u30e9\u30fc\u8fd4\u3055\u308c\u308b\n\n\n#\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n\u74b0\u5883\uff1aCentOS7.2\n\u3068\u308a\u3042\u3048\u305a\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u30b5\u30a4\u30c8\u306b\u7f6e\u3044\u3066\u3042\u308b\u4e00\u756a\u65b0\u3057\u3044\u306e\u3092\u6301\u3063\u3066\u304f\u308b\n\n```\n$ mkdir rnnlm\n$ cd rnnlm\n$ wget http://www.fit.vutbr.cz/~imikolov/rnnlm/rnnlm-0.3e.tgz\n$ tar zxvf rnnlm-0.3e.tgz\n```\n\n#\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nMakefile\u304c\u305d\u306e\u307e\u307e\u3060\u3068\u52d5\u304b\u306a\u304b\u3063\u305f\u306e\u3067\u66f8\u304d\u63db\u3048\n\n```file:makefile\n#CC = x86_64-linux-g++-4.6 #\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8                                                                                                                            \n#CFLAGS = -lm -O2 -Wall -funroll-loops -ffast-math #\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8                                                                                                    \n#CFLAGS = -lm -O2 -Wall                                                                                                                               \n\nCC = g++ #\u8ffd\u52a0\nCFLAGS = -lm -O2\u3000#\u8ffd\u52a0\n\nall: rnnlmlib.o rnnlm\n\nrnnlmlib.o : rnnlmlib.cpp\n        $(CC) $(CFLAGS) $(OPT_DEF) -c rnnlmlib.cpp\n\nrnnlm : rnnlm.cpp\n        $(CC) $(CFLAGS) $(OPT_DEF) rnnlm.cpp rnnlmlib.o -o rnnlm\n\nclean:\n        rm -rf *.o rnnlm\n```\n\n\u305d\u306e\u5f8c\u3001Make\n\n```\n$ make clean\n$ make\n```\n\n\n#RNNLM\u5b66\u7fd2\n\n\u5b66\u7fd2\u7528\u3001\u8abf\u6574\u7528\u3001\u30c6\u30b9\u30c8\u7528\u306e\u30b3\u30fc\u30d1\u30b9\u3092\u7528\u610f\u3059\u308b(1\u884c1\u6587\u3001\u5206\u304b\u3061\u66f8\u304d\u3055\u308c\u305f\u3082\u306e)\n\u4eca\u56de\u306fntcir10\u306e\u65e5\u672c\u8a9e\u7279\u8a31\u6587\u304b\u3089\u5b66\u7fd2\u752810\u4e07\u6587(train100k.txt)\u3001\u8abf\u6574\u75285\u5343\u6587(valid5k.txt)\u3001\u30c6\u30b9\u30c8\u752810\u4e07\u6587(test100k.txt)\u3092\u7528\u610f\n\n```\n$ time ./rnnlm -train train100k.txt -valid valid5k.txt -rnnlm rnnlm.hidden25.class300.model -hidden 25 -rand-seed 1 -debug 2 -class 300 -bptt 6 -bptt-block 10\n\ndebug mode: 2\ntrain file: train100k.txt\nvalid file: valid5k.txt\nclass size: 300\nHidden layer size: 25\nBPTT: 6\nBPTT block: 10\nRand seed: 1\nrnnlm file: rnnlm.hidden25.class300.model\nStarting training using file train100k.txt\nVocab size: 74522\nWords in train file: 6244514\nIter:   0       Alpha: 0.100000    TRAIN entropy: 6.8871    VALID entropy: 6.7309\nIter:   1       Alpha: 0.100000    TRAIN entropy: 6.5655    VALID entropy: 6.6412\nIter:   2       Alpha: 0.100000    TRAIN entropy: 6.4743    VALID entropy: 6.6185\nIter:   3       Alpha: 0.100000    TRAIN entropy: 6.4212    VALID entropy: 6.5830\nIter:   4       Alpha: 0.100000    TRAIN entropy: 6.3844    VALID entropy: 6.5716\nIter:   5       Alpha: 0.050000    TRAIN entropy: 6.3150    VALID entropy: 6.4327\nIter:   6       Alpha: 0.025000    TRAIN entropy: 6.2540    VALID entropy: 6.3519\nIter:   7       Alpha: 0.012500    TRAIN entropy: 6.2201    VALID entropy: 6.3012\nIter:   8       Alpha: 0.006250    TRAIN entropy: 6.2016    VALID entropy: 6.2673\nIter:   9       Alpha: 0.003125    TRAIN entropy: 6.1918    VALID entropy: 6.2513\n```\n\n\u51fa\u6765\u4e0a\u304c\u3063\u305f\u30e2\u30c7\u30eb\u306ePerplexity\u3092\u7b97\u51fa\n\n```\n$ time ./rnnlm -rnnlm rnnlm.hidden25.class300.model -test test100k.txt\n\ntest file: test100k.txt\nrnnlm file: rnnlm.hidden25.class300.model\n\ntest log probability: -11721481.126285\n\nPPL net: 76.748383\n```\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u8aac\u660e\n\n-rnnlm : \u4fdd\u5b58\u3059\u308b\u8a00\u8a9e\u30e2\u30c7\u30eb\u306e\u540d\u524d\n-hidden : \u96a0\u308c\u5c64\u306e\u30e6\u30cb\u30c3\u30c8\u6570\u3001\u591a\u3044\u307b\u3069\u6027\u80fd\u304c\u826f\u304f\u306a\u308b(\u305f\u3060\u3057\u5b66\u7fd2\u6642\u9593\u304c\u9045\u304f\u306a\u308b)\n-class : untruncated\u306a\u8a9e\u5f59\u6570\u3001\u6027\u80fd\u3092\u6c42\u3081\u308b\u5834\u54081\u306b\u8a2d\u5b9a\u3059\u308b\u304c\u3001\u3068\u3066\u3082\u9045\u3044(300~500\u63a8\u5968)\n-bptt : Back Propagation Through Time\u306e\u30b9\u30c6\u30c3\u30d7\u6570(\u5c11\u306a\u304f\u3068\u30826\u56de\u63a8\u5968)\n\n\n#\u5b9f\u9a13\n\nclass\u3092300\u3001bptt\u30926\u306b\u56fa\u5b9a\u3057\u3001hidden\u306e\u307f\u5909\u5316\u3055\u305b\u3066RNNLM\u3092\u69cb\u7bc9\u3057\u3001Perplexity\u3092\u7b97\u51fa\n\n|hidden|Perplexity|time|\n|:-:|:-:|:-:|\n|25|76.7484|63m49.649s|\n|50|62.7530|144m37.927s|\n|75|57.3227|216m2.546s|\n|100|53.0952|324m38.522s|\n|150|49.8061|473m19.125s|\n|200|47.0688|705m6.422s|\n|300|44.6543|1139m2.378s|\n\n\u96a0\u308c\u5c64\u306e\u30e6\u30cb\u30c3\u30c8\u6570\u5897\u52a0\u306b\u5f93\u3063\u3066\u3001Perplexity\u304c\u6e1b\u5c11\u3059\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u308b\n\u305d\u306e\u5206\u8a00\u8a9e\u30e2\u30c7\u30eb\u306e\u4f5c\u6210\u306b\u6642\u9593\u304c\u304b\u304b\u308b(hidden=200\u306712\u6642\u9593\u5f31)\n\nRNNLM\u3068\u306e\u6bd4\u8f03\u306e\u305f\u3081\u3001KenLM\u306btrain100k.txt\u3068valid5k.txt\u3092\u5408\u308f\u305b\u305f\u30b3\u30fc\u30d1\u30b9\u3092\u5b66\u7fd2\u3055\u305b\u3001\u30c6\u30b9\u30c8\u30b3\u30fc\u30d1\u30b9\u3092\u7528\u3044\u3066Perplexity\u3092\u8a08\u6e2c(\u7d50\u679c\u3060\u3051\u63b2\u8f09)\n\n|Perplexity|time|\n|:-:|:-:|\n|61.2690|28.1269s|\n\nKenLM\u306f\u69cb\u7bc9\u6642\u9593\u304c\u65e9\u3044\n\n\n#\u8003\u5bdf\n\nRNNLM\u306e\u96a0\u308c\u5c64\u30e6\u30cb\u30c3\u30c8\u6570\u304c75\u306e\u3068\u304d\u3001KenLM\u306ePerplexity\u3092\u4e0a\u56de\u3063\u305f\nDeep Learning\u6050\u308b\u3079\u3057\u2026\n\u305f\u3060\u3001\u69cb\u7bc9\u6642\u9593\u304cKenLM\u3068\u6bd4\u8f03\u3057\u3066\u304b\u306a\u308a\u639b\u304b\u308b\n", "tags": ["DeepLearning", "\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af", "RNN", "\u8a00\u8a9e\u30e2\u30c7\u30eb", "\u6a5f\u68b0\u5b66\u7fd2"]}