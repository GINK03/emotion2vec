{"context": " More than 1 year has passed since last update.postgresql\u3092\u4f7f\u3063\u3066build\u3057\u3088\u3046\u3068\u3057\u305f\u3089\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u3002\n\n\u7d50\u8ad6\n\u7d50\u8ad6\u304b\u3089\u5148\u306b\u8a00\u3046\u3068\u3001\nbox: wercker/rvm\n\nRVM\u4f7f\u3048\u3063\u3066\u8a71\u3063\u307d\u3044\u3002\n\n\u8a73\u7d30\n\u3053\u3093\u306a\u611f\u3058\u306e wercker.yml \u3067\u3001\n\nwercker.yml\nbox: wercker/ubuntu12.04-ruby2.0.0\nservices:\n    - wercker/postgresql\nbuild:\n    steps:\n        - bundle-install\n        - rails-database-yml:\n            service: postgresql\n\n        - script:\n            name: echo ruby information\n            code: |\n                echo \"ruby version $(ruby --version) running\"\n                echo \"from location $(which ruby)\"\n                echo -p \"gem list: $(gem list)\"\n\n        - script:\n            name: Set up db\n            code: bundle exec rake db:schema:load RAILS_ENV=test\n\n        - script:\n            name: rspec\n            code: bundle exec rspec\n\n\nSet up db\u306e\u3068\u3053\u308d\u3067\u30a8\u30e9\u30fc\u3002\ncd $WERCKER_SOURCE_DIR\n$ export WERCKER_STEP_ROOT=\"/wercker/steps/wercker/script/0.0.0\"\n$ export WERCKER_STEP_ID=\"162fb6ee-500d-4ef8-8de7-47a3f945dcc2\"\n$ export WERCKER_STEP_NAME=\"script\"\n$ export WERCKER_REPORT_NUMBERS_FILE=\"$WERCKER_REPORT_DIR/$WERCKER_STEP_ID/numbers.ini\"\n$ export WERCKER_REPORT_MESSAGE_FILE=\"$WERCKER_REPORT_DIR/$WERCKER_STEP_ID/message.txt\"\n$ export WERCKER_REPORT_ARTIFACTS_DIR=\"$WERCKER_REPORT_DIR/$WERCKER_STEP_ID/artifacts\"\n$ mkdir -p $WERCKER_REPORT_ARTIFACTS_DIR\n$ export WERCKER_STEP_TEMP=\"/tmp/$WERCKER_STEP_ID\"\n$ source '/wercker/wercker-build-essentials/init.sh'\n$ mkdir -p $WERCKER_STEP_TEMP\n$ bundle exec rake db:schema:load RAILS_ENV=test\nrake aborted!\nLoadError: libruby.so.2.0: cannot open shared object file: No such file or directory - /cache/bundle-install/ruby/2.0.0/gems/pg-0.17.1/lib/pg_ext.so\n/cache/bundle-install/ruby/2.0.0/gems/pg-0.17.1/lib/pg.rb:4:in `require'\n/cache/bundle-install/ruby/2.0.0/gems/pg-0.17.1/lib/pg.rb:4:in `<top (required)>'\n/pipeline/build/config/application.rb:14:in `<top (required)>'\n/pipeline/build/Rakefile:4:in `require'\n/pipeline/build/Rakefile:4:in `<top (required)>'\n(See full trace by running task with --trace)\n\nrvm\u3092\u4f7f\u3046\u3053\u3068\u306b\u3057\u3066\u3001\nbox: wercker/rvm\n\n\u3063\u3066\u3084\u3063\u305f\u3089\u52d5\u3044\u305f\u3002\n\u3042\u3001\u3061\u3083\u3093\u3068\u30d0\u30fc\u30b8\u30e7\u30f3\u3082\u6307\u5b9a\u3057\u3088\u3046\u3002\n    steps:\n        - rvm-use:\n            version: 2.1.2\n        - bundle-install\n        - #\u4ee5\u4e0b\u540c\u69d8...\n\npostgresql\u3092\u4f7f\u3063\u3066build\u3057\u3088\u3046\u3068\u3057\u305f\u3089\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u3002\n\n##\u7d50\u8ad6\n\u7d50\u8ad6\u304b\u3089\u5148\u306b\u8a00\u3046\u3068\u3001\n\n```yaml\nbox: wercker/rvm\n```\n\nRVM\u4f7f\u3048\u3063\u3066\u8a71\u3063\u307d\u3044\u3002\n\n##\u8a73\u7d30\n\u3053\u3093\u306a\u611f\u3058\u306e wercker.yml \u3067\u3001\n\n```wercker.yml\nbox: wercker/ubuntu12.04-ruby2.0.0\nservices:\n    - wercker/postgresql\nbuild:\n    steps:\n        - bundle-install\n        - rails-database-yml:\n            service: postgresql\n\n        - script:\n            name: echo ruby information\n            code: |\n                echo \"ruby version $(ruby --version) running\"\n                echo \"from location $(which ruby)\"\n                echo -p \"gem list: $(gem list)\"\n\n        - script:\n            name: Set up db\n            code: bundle exec rake db:schema:load RAILS_ENV=test\n\n        - script:\n            name: rspec\n            code: bundle exec rspec\n```\n\nSet up db\u306e\u3068\u3053\u308d\u3067\u30a8\u30e9\u30fc\u3002\n\n```\ncd $WERCKER_SOURCE_DIR\n$ export WERCKER_STEP_ROOT=\"/wercker/steps/wercker/script/0.0.0\"\n$ export WERCKER_STEP_ID=\"162fb6ee-500d-4ef8-8de7-47a3f945dcc2\"\n$ export WERCKER_STEP_NAME=\"script\"\n$ export WERCKER_REPORT_NUMBERS_FILE=\"$WERCKER_REPORT_DIR/$WERCKER_STEP_ID/numbers.ini\"\n$ export WERCKER_REPORT_MESSAGE_FILE=\"$WERCKER_REPORT_DIR/$WERCKER_STEP_ID/message.txt\"\n$ export WERCKER_REPORT_ARTIFACTS_DIR=\"$WERCKER_REPORT_DIR/$WERCKER_STEP_ID/artifacts\"\n$ mkdir -p $WERCKER_REPORT_ARTIFACTS_DIR\n$ export WERCKER_STEP_TEMP=\"/tmp/$WERCKER_STEP_ID\"\n$ source '/wercker/wercker-build-essentials/init.sh'\n$ mkdir -p $WERCKER_STEP_TEMP\n$ bundle exec rake db:schema:load RAILS_ENV=test\nrake aborted!\nLoadError: libruby.so.2.0: cannot open shared object file: No such file or directory - /cache/bundle-install/ruby/2.0.0/gems/pg-0.17.1/lib/pg_ext.so\n/cache/bundle-install/ruby/2.0.0/gems/pg-0.17.1/lib/pg.rb:4:in `require'\n/cache/bundle-install/ruby/2.0.0/gems/pg-0.17.1/lib/pg.rb:4:in `<top (required)>'\n/pipeline/build/config/application.rb:14:in `<top (required)>'\n/pipeline/build/Rakefile:4:in `require'\n/pipeline/build/Rakefile:4:in `<top (required)>'\n(See full trace by running task with --trace)\n```\n\nrvm\u3092\u4f7f\u3046\u3053\u3068\u306b\u3057\u3066\u3001\n\n```\nbox: wercker/rvm\n```\n\n\u3063\u3066\u3084\u3063\u305f\u3089\u52d5\u3044\u305f\u3002\n\n\u3042\u3001\u3061\u3083\u3093\u3068\u30d0\u30fc\u30b8\u30e7\u30f3\u3082\u6307\u5b9a\u3057\u3088\u3046\u3002\n\n```\n    steps:\n        - rvm-use:\n            version: 2.1.2\n        - bundle-install\n        - #\u4ee5\u4e0b\u540c\u69d8...\n```\n", "tags": ["wercker", "Rails", "PostgreSQL"]}