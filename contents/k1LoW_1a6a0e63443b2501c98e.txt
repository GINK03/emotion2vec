{"context": "s-templates.json\u306b\n{\n  \"apiGatewayRequestTemplate\": {\n    \"application/json\": {\n      {\n        \"accountId\": \"$context.identity.accountId\",\n        \"apiId\": \"$context.apiId\",\n        \"apiKey\": \"$context.identity.apiKey\",\n        \"caller\": \"$context.identity.caller\",\n        \"headers\": {\n      #foreach( $key in $input.params().header.keySet() )\n          \"$key\": \"$input.params().header.get($key)\"#if( $foreach.hasNext ),#end\n      #end\n        },\n        \"httpMethod\": \"$context.httpMethod\",\n        \"path\": \"$context.resourcePath\",\n        \"pathParameters\": {\n      #foreach( $key in $input.params().path.keySet() )\n          \"$key\": \"$input.params().path.get($key)\"#if( $foreach.hasNext ),#end\n      #end\n        },\n        \"queryParameters\": {\n      #foreach( $key in $input.params().querystring.keySet() )\n          \"$key\": \"$input.params().querystring.get($key)\"#if( $foreach.hasNext ),#end\n      #end\n        },\n        \"requestId\": \"$context.requestId\",\n        \"requestParameters\": $input.json('$'),\n        \"resourceId\": \"$context.resourceId\",\n        \"sourceIp\": \"$context.identity.sourceIp\",\n        \"stage\": \"$context.stage\",\n        \"user\": \"$context.identity.user\",\n        \"userAgent\": \"$context.identity.userAgent\",\n        \"userArn\": \"$context.identity.userArn\"\n      }\n    }\n  }\n}\n\n\u307f\u305f\u3044\u306aVTL\u3092\u66f8\u304d\u305f\u304f\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306fJSON\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306b\u6e96\u62e0\u3057\u3066\u3044\u306a\u3044\u306e\u3067Serverless\u3067\u306f\u30d1\u30fc\u30b9\u30a8\u30e9\u30fc\u3067\u3059\u3002\nJSON\u3092\u5168\u90e8\u30a8\u30b9\u30b1\u30fc\u30d7\u3057\u3066\uff11\u884c\u306e\u6587\u5b57\u5217\u306b\u5909\u63db\u3057\u3066\u3057\u307e\u3048\u3070\u3044\u3044\u3089\u3057\u3044\u3067\u3059\u304c\u3001\u30d2\u30c8\u304c\u3055\u308f\u308c\u308b\u3082\u306e\u3067\u306f\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u3058\u3083\u3042\u3001\u3069\u3046\u3059\u308b\u304b\u3002\n\u300cYAML\u3067\u4e2d\u306b\u8907\u6570\u884c\u3067\u66f8\u3051\u3070\u3044\u3044\u3093\u3058\u3083\u306d\uff1f\u300d\u3068\u3044\u3046\u30b3\u30e1\u30f3\u30c8\u3092\u898b\u3064\u3051\u307e\u3057\u305f\u3002\napiGatewayRequestTemplate:\n  application/json: |\n    {\n      \"accountId\": \"$context.identity.accountId\",\n      \"apiId\": \"$context.apiId\",\n      \"apiKey\": \"$context.identity.apiKey\",\n      \"caller\": \"$context.identity.caller\",\n      \"headers\": {\n        #foreach( $key in $input.params().header.keySet() )\n          \"$key\": \"$input.params().header.get($key)\"#if( $foreach.hasNext ),#end\n        #end\n      },\n      \"httpMethod\": \"$context.httpMethod\",\n      \"path\": \"$context.resourcePath\",\n      \"pathParameters\": {\n        #foreach( $key in $input.params().path.keySet() )\n          \"$key\": \"$input.params().path.get($key)\"#if( $foreach.hasNext ),#end\n        #end\n      },\n      \"queryParameters\": {\n        #foreach( $key in $input.params().querystring.keySet() )\n          \"$key\": \"$input.params().querystring.get($key)\"#if( $foreach.hasNext ),#end\n        #end\n      },\n      \"requestId\": \"$context.requestId\",\n      \"requestParameters\": $input.json('$'),\n      \"resourceId\": \"$context.resourceId\",\n      \"sourceIp\": \"$context.identity.sourceIp\",\n      \"stage\": \"$context.stage\",\n      \"user\": \"$context.identity.user\",\n      \"userAgent\": \"$context.identity.userAgent\",\n      \"userArn\": \"$context.identity.userArn\"\n    }\n\n\n\u53c2\u8003URL\n\nhttps://github.com/serverless/serverless/issues/537#issuecomment-212635809\nhttp://qiita.com/mpppk/items/40badc30008a86928406\nhttp://qiita.com/r7kamura/items/6420538789da95cd2f47\n\ns-templates.json\u306b\n\n```json\n{\n  \"apiGatewayRequestTemplate\": {\n    \"application/json\": {\n      {\n        \"accountId\": \"$context.identity.accountId\",\n        \"apiId\": \"$context.apiId\",\n        \"apiKey\": \"$context.identity.apiKey\",\n        \"caller\": \"$context.identity.caller\",\n        \"headers\": {\n      #foreach( $key in $input.params().header.keySet() )\n          \"$key\": \"$input.params().header.get($key)\"#if( $foreach.hasNext ),#end\n      #end\n        },\n        \"httpMethod\": \"$context.httpMethod\",\n        \"path\": \"$context.resourcePath\",\n        \"pathParameters\": {\n      #foreach( $key in $input.params().path.keySet() )\n          \"$key\": \"$input.params().path.get($key)\"#if( $foreach.hasNext ),#end\n      #end\n        },\n        \"queryParameters\": {\n      #foreach( $key in $input.params().querystring.keySet() )\n          \"$key\": \"$input.params().querystring.get($key)\"#if( $foreach.hasNext ),#end\n      #end\n        },\n        \"requestId\": \"$context.requestId\",\n        \"requestParameters\": $input.json('$'),\n        \"resourceId\": \"$context.resourceId\",\n        \"sourceIp\": \"$context.identity.sourceIp\",\n        \"stage\": \"$context.stage\",\n        \"user\": \"$context.identity.user\",\n        \"userAgent\": \"$context.identity.userAgent\",\n        \"userArn\": \"$context.identity.userArn\"\n      }\n    }\n  }\n}\n```\n\n\u307f\u305f\u3044\u306aVTL\u3092\u66f8\u304d\u305f\u304f\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306fJSON\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306b\u6e96\u62e0\u3057\u3066\u3044\u306a\u3044\u306e\u3067Serverless\u3067\u306f\u30d1\u30fc\u30b9\u30a8\u30e9\u30fc\u3067\u3059\u3002\n\nJSON\u3092\u5168\u90e8\u30a8\u30b9\u30b1\u30fc\u30d7\u3057\u3066\uff11\u884c\u306e\u6587\u5b57\u5217\u306b\u5909\u63db\u3057\u3066\u3057\u307e\u3048\u3070\u3044\u3044\u3089\u3057\u3044\u3067\u3059\u304c\u3001\u30d2\u30c8\u304c\u3055\u308f\u308c\u308b\u3082\u306e\u3067\u306f\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u3058\u3083\u3042\u3001\u3069\u3046\u3059\u308b\u304b\u3002\n\n[\u300cYAML\u3067\u4e2d\u306b\u8907\u6570\u884c\u3067\u66f8\u3051\u3070\u3044\u3044\u3093\u3058\u3083\u306d\uff1f\u300d](https://github.com/serverless/serverless/issues/537#issuecomment-212635809)\u3068\u3044\u3046\u30b3\u30e1\u30f3\u30c8\u3092\u898b\u3064\u3051\u307e\u3057\u305f\u3002\n\n```yaml\napiGatewayRequestTemplate:\n  application/json: |\n    {\n      \"accountId\": \"$context.identity.accountId\",\n      \"apiId\": \"$context.apiId\",\n      \"apiKey\": \"$context.identity.apiKey\",\n      \"caller\": \"$context.identity.caller\",\n      \"headers\": {\n        #foreach( $key in $input.params().header.keySet() )\n          \"$key\": \"$input.params().header.get($key)\"#if( $foreach.hasNext ),#end\n        #end\n      },\n      \"httpMethod\": \"$context.httpMethod\",\n      \"path\": \"$context.resourcePath\",\n      \"pathParameters\": {\n        #foreach( $key in $input.params().path.keySet() )\n          \"$key\": \"$input.params().path.get($key)\"#if( $foreach.hasNext ),#end\n        #end\n      },\n      \"queryParameters\": {\n        #foreach( $key in $input.params().querystring.keySet() )\n          \"$key\": \"$input.params().querystring.get($key)\"#if( $foreach.hasNext ),#end\n        #end\n      },\n      \"requestId\": \"$context.requestId\",\n      \"requestParameters\": $input.json('$'),\n      \"resourceId\": \"$context.resourceId\",\n      \"sourceIp\": \"$context.identity.sourceIp\",\n      \"stage\": \"$context.stage\",\n      \"user\": \"$context.identity.user\",\n      \"userAgent\": \"$context.identity.userAgent\",\n      \"userArn\": \"$context.identity.userArn\"\n    }\n```\n\n\n## \u53c2\u8003URL\n\n- https://github.com/serverless/serverless/issues/537#issuecomment-212635809\n- http://qiita.com/mpppk/items/40badc30008a86928406\n- http://qiita.com/r7kamura/items/6420538789da95cd2f47\n", "tags": ["AWS", "serverless0.5.5"]}