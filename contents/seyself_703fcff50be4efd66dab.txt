{"context": " More than 1 year has passed since last update.\n.as\nfunction drawPie(g:Graphics, x:Number, y:Number,\n                            radius:Number, angle:Number, rotate:Number=0):void\n{\n    var seg:uint = 8;\n    var r:Number = angle / seg;\n    var sin:Number = Math.sin(r);\n    var cos:Number = Math.cos(r);\n    var tan:Number = Math.tan(r / 2);\n    var pi2:Number = Math.PI / 2;\n    var ax:Number = Math.cos(rotate) * radius;\n    var ay:Number = Math.sin(rotate) * radius;\n    g.moveTo(x, y);\n    g.lineTo(x + ax, y + ay);\n    for (var i:int = 0; i<seg; i++ ) \n    {\n        var nx:Number = cos * ax - sin * ay;\n        var ny:Number = cos * ay + sin * ax;\n        var t:Number = (i + 1) * r - pi2 + rotate;\n        var cx:Number = nx + radius * tan * Math.cos(t);\n        var cy:Number = ny + radius * tan * Math.sin(t);\n        g.curveTo(x + cx , y + cy, x + nx, y + ny);\n        ax = nx; ay = ny;\n    }\n}\n\n\nSVG + JavaScript\n\n.jade\nsvg(width=500, height=500)\n  path(d='', stroke=\"red\", stroke-width=\"20\", stroke-linecap=\"round\", fill=\"white\")\n\n\n\n.coffee\narc = (x, y, radius, angle, rotate=0)->\n  seg = 8\n  r = angle / seg\n  sin = Math.sin(r)\n  cos = Math.cos(r)\n  tan = Math.tan(r / 2)\n  pi2 = Math.PI / 2\n  ax = Math.cos(rotate) * radius\n  ay = Math.sin(rotate) * radius\n  path = ''\n  path += moveTo(x + ax, y + ay)\n  for i in [0...seg]\n    nx = cos * ax - sin * ay\n    ny = cos * ay + sin * ax\n    t = (i + 1) * r - pi2 + rotate\n    cx = nx + radius * tan * Math.cos(t)\n    cy = ny + radius * tan * Math.sin(t)\n    path += curveTo(x + cx , y + cy, x + nx, y + ny)\n    ax = nx\n    ay = ny\n  return path\n\nmoveTo = (x, y)->\n  return 'M' + x + ',' + y\n\nlineTo = (x, y)->\n  return 'L' + x + ',' + y\n\ncurveTo = (x, y, ax, ay)->\n  return 'Q' + x + ',' + y + ',' + ax + ',' + ay\n\ndrawPie = ($path, ratio)->\n  start = -Math.PI / 2\n  end = Math.PI * 2\n  pie = arc 250, 250, 230, end * ratio, start\n  $path.attr('d', pie)\n\n$pie = $('#pie')\ndrawPie($pie, 0.6)\n\n\n\n```.as:.as\nfunction drawPie(g:Graphics, x:Number, y:Number,\n\t\t\t\t\t\t\tradius:Number, angle:Number, rotate:Number=0):void\n{\n\tvar seg:uint = 8;\n\tvar r:Number = angle / seg;\n\tvar sin:Number = Math.sin(r);\n\tvar cos:Number = Math.cos(r);\n\tvar tan:Number = Math.tan(r / 2);\n\tvar pi2:Number = Math.PI / 2;\n\tvar ax:Number = Math.cos(rotate) * radius;\n\tvar ay:Number = Math.sin(rotate) * radius;\n\tg.moveTo(x, y);\n\tg.lineTo(x + ax, y + ay);\n\tfor (var i:int = 0; i<seg; i++ ) \n\t{\n\t\tvar nx:Number = cos * ax - sin * ay;\n\t\tvar ny:Number = cos * ay + sin * ax;\n\t\tvar t:Number = (i + 1) * r - pi2 + rotate;\n\t\tvar cx:Number = nx + radius * tan * Math.cos(t);\n\t\tvar cy:Number = ny + radius * tan * Math.sin(t);\n\t\tg.curveTo(x + cx , y + cy, x + nx, y + ny);\n\t\tax = nx; ay = ny;\n\t}\n}\n```\n\n\nSVG + JavaScript\n\n```jade:.jade\nsvg(width=500, height=500)\n  path(d='', stroke=\"red\", stroke-width=\"20\", stroke-linecap=\"round\", fill=\"white\")\n```\n\n```coffee:.coffee\narc = (x, y, radius, angle, rotate=0)->\n  seg = 8\n  r = angle / seg\n  sin = Math.sin(r)\n  cos = Math.cos(r)\n  tan = Math.tan(r / 2)\n  pi2 = Math.PI / 2\n  ax = Math.cos(rotate) * radius\n  ay = Math.sin(rotate) * radius\n  path = ''\n  path += moveTo(x + ax, y + ay)\n  for i in [0...seg]\n    nx = cos * ax - sin * ay\n    ny = cos * ay + sin * ax\n    t = (i + 1) * r - pi2 + rotate\n    cx = nx + radius * tan * Math.cos(t)\n    cy = ny + radius * tan * Math.sin(t)\n    path += curveTo(x + cx , y + cy, x + nx, y + ny)\n    ax = nx\n    ay = ny\n  return path\n\nmoveTo = (x, y)->\n  return 'M' + x + ',' + y\n\nlineTo = (x, y)->\n  return 'L' + x + ',' + y\n\ncurveTo = (x, y, ax, ay)->\n  return 'Q' + x + ',' + y + ',' + ax + ',' + ay\n\ndrawPie = ($path, ratio)->\n  start = -Math.PI / 2\n  end = Math.PI * 2\n  pie = arc 250, 250, 230, end * ratio, start\n  $path.attr('d', pie)\n\n$pie = $('#pie')\ndrawPie($pie, 0.6)\n```\n", "tags": ["ActionScript", "\u30b0\u30e9\u30d5", "JavaScript", "SVG"]}