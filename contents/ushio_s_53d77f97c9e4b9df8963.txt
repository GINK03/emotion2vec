{"context": " More than 1 year has passed since last update.\n\nSecurity::js_fetch_token()\n\u516c\u5f0f\u306b\u3088\u308b\u3068\u3001AJAX\u3067CSRF\u3059\u308b\u306a\u3089\u3053\u308c\u3060\u3063\u3066\u3060\u3044\u305f\u3044\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\n\n<?= Security::js_fetch_token(); ?>\n\n<script type=\"text/javascript\">\nfunction sendForm(submitButton){\n    var button = $(button);\n    var form = button.closest('form');\n\n    form.append($('<input type=\"hidden\" name=\"fuel_csrf_token\" value=\"' + fuel_csrf_token() + '\">'));\n\n    $.ajax({\n        url: form.attr('action'),\n        type: form.attr('method'),\n        data: form.serialize(),\n        timeout: 10000,\n        complete: function(xhr, textStatus){\n            // on complete\n        },\n        success: function(result, textStatus, xhr){\n            // on success\n        },\n        error: function(xhr, textStatus, error){\n            // on error\n        }\n    });\n}\n</script>\n\n<form>\n    <input type=\"text\" name=\"foo\" value=\"\" />\n    <input type=\"button\" value=\"\u5b9f\u884c\" onClick=\"sendForm(this)\" />\n</form>\n\n\u3053\u306e\u30b3\u30fc\u30c9\u81ea\u4f53\u3067\u306f\u52d5\u4f5c\u78ba\u8a8d\u3092\u3057\u3066\u3044\u307e\u305b\u3093\u304c\u3001fuel_csrf_token()\u3068\u3044\u3046javascript\u306e\u95a2\u6570\u304cPHP\u306eSecurity::js_fetch_token();\u306b\u3088\u3063\u3066\u767a\u884c\u3055\u308c\u308b\u306e\u3067\u3001\u305d\u308c\u3092input hidden\u306b\u5165\u308c\u3066\u3044\u307e\u3059\u3002\nSecurity::js_fetch_token()\n==========================\n\n[\u516c\u5f0f](http://fuelphp.jp/docs/1.5/classes/security.html#/method_js_fetch_token)\u306b\u3088\u308b\u3068\u3001AJAX\u3067CSRF\u3059\u308b\u306a\u3089\u3053\u308c\u3060\u3063\u3066\u3060\u3044\u305f\u3044\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\n\n```js+php\n\n<?= Security::js_fetch_token(); ?>\n\n<script type=\"text/javascript\">\nfunction sendForm(submitButton){\n    var button = $(button);\n    var form = button.closest('form');\n\n    form.append($('<input type=\"hidden\" name=\"fuel_csrf_token\" value=\"' + fuel_csrf_token() + '\">'));\n\n    $.ajax({\n        url: form.attr('action'),\n        type: form.attr('method'),\n        data: form.serialize(),\n        timeout: 10000,\n        complete: function(xhr, textStatus){\n            // on complete\n        },\n        success: function(result, textStatus, xhr){\n            // on success\n        },\n        error: function(xhr, textStatus, error){\n            // on error\n        }\n    });\n}\n</script>\n\n<form>\n    <input type=\"text\" name=\"foo\" value=\"\" />\n    <input type=\"button\" value=\"\u5b9f\u884c\" onClick=\"sendForm(this)\" />\n</form>\n```\n\n\u3053\u306e\u30b3\u30fc\u30c9\u81ea\u4f53\u3067\u306f\u52d5\u4f5c\u78ba\u8a8d\u3092\u3057\u3066\u3044\u307e\u305b\u3093\u304c\u3001`fuel_csrf_token()`\u3068\u3044\u3046javascript\u306e\u95a2\u6570\u304cPHP\u306e`Security::js_fetch_token();`\u306b\u3088\u3063\u3066\u767a\u884c\u3055\u308c\u308b\u306e\u3067\u3001\u305d\u308c\u3092input hidden\u306b\u5165\u308c\u3066\u3044\u307e\u3059\u3002\n", "tags": ["FuelPHP1.5", "JavaScript", "PHP"]}