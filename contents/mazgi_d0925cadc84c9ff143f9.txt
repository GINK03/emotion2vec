{"context": "\u3068\u308a\u3042\u3048\u305a\u5099\u5fd8\u9332\u7a0b\u5ea6\u306b\u3002\n\n\nHDFS\n\nactive\u306aNN\u306e hdfs-site.xml \u3092\u7de8\u96c6\n\n\n\ndfs.hosts => Decommission\u5bfe\u8c61\u30ce\u30fc\u30c9\u3082\u542b\u3081\u3066\u5168\u30ce\u30fc\u30c9\u30921\u884c1\u30ce\u30fc\u30c9\u540d\u3067\u66f8\u3044\u305f\u30d5\u30a1\u30a4\u30ebpath\u3092\u6307\u5b9a\u3059\u308b\n\ndfs.hosts.exclude => Decommission\u5bfe\u8c61\u30ce\u30fc\u30c9\u30921\u884c1\u30ce\u30fc\u30c9\u540d\u3067\u66f8\u3044\u305f\u30d5\u30a1\u30a4\u30ebpath\u3092\u6307\u5b9a\u3059\u308b\n\n\n\nhdfs dfsadmin -refreshNodes \u3059\u308b\n\n\nYARN\n\nRM\u306e yarn-site.xml \u3092\u7de8\u96c6\n\n\n\nyarn.resourcemanager.nodes.include-path => Decommission\u5bfe\u8c61\u30ce\u30fc\u30c9\u3082\u542b\u3081\u3066\u5168\u30ce\u30fc\u30c9\u30921\u884c1\u30ce\u30fc\u30c9\u540d\u3067\u66f8\u3044\u305f\u30d5\u30a1\u30a4\u30ebpath\u3092\u6307\u5b9a\u3059\u308b\n\nyarn.resourcemanager.nodes.exclude-path => Decommission\u5bfe\u8c61\u30ce\u30fc\u30c9\u30921\u884c1\u30ce\u30fc\u30c9\u540d\u3067\u66f8\u3044\u305f\u30d5\u30a1\u30a4\u30ebpath\u3092\u6307\u5b9a\u3059\u308b\n\n\n\nyarn rmadmin -refreshNodes \u3059\u308b\n\u203bDecommission\u3059\u308b\u3068nodemanager\u843d\u3061\u308b\u306e\u3067\u6ce8\u610f\n\n\n\nHBase\n/usr/lib/hbase/bin/hbase-jruby /usr/lib/hbase/bin/region_mover.rb -x exclude.txt unload host\nhbase shell \u3067 balance_switch false \u5fc5\u8981\uff1f\n\u3068\u308a\u3042\u3048\u305a\u5099\u5fd8\u9332\u7a0b\u5ea6\u306b\u3002\n\n----\n\n## HDFS\n\n1. active\u306aNN\u306e `hdfs-site.xml` \u3092\u7de8\u96c6\n    * `dfs.hosts` => Decommission\u5bfe\u8c61\u30ce\u30fc\u30c9\u3082\u542b\u3081\u3066\u5168\u30ce\u30fc\u30c9\u30921\u884c1\u30ce\u30fc\u30c9\u540d\u3067\u66f8\u3044\u305f\u30d5\u30a1\u30a4\u30ebpath\u3092\u6307\u5b9a\u3059\u308b\n    * `dfs.hosts.exclude` => Decommission\u5bfe\u8c61\u30ce\u30fc\u30c9\u30921\u884c1\u30ce\u30fc\u30c9\u540d\u3067\u66f8\u3044\u305f\u30d5\u30a1\u30a4\u30ebpath\u3092\u6307\u5b9a\u3059\u308b\n2. `hdfs dfsadmin -refreshNodes` \u3059\u308b\n\n## YARN\n\n1. RM\u306e `yarn-site.xml` \u3092\u7de8\u96c6\n    * `yarn.resourcemanager.nodes.include-path` => Decommission\u5bfe\u8c61\u30ce\u30fc\u30c9\u3082\u542b\u3081\u3066\u5168\u30ce\u30fc\u30c9\u30921\u884c1\u30ce\u30fc\u30c9\u540d\u3067\u66f8\u3044\u305f\u30d5\u30a1\u30a4\u30ebpath\u3092\u6307\u5b9a\u3059\u308b\n    * `yarn.resourcemanager.nodes.exclude-path` => Decommission\u5bfe\u8c61\u30ce\u30fc\u30c9\u30921\u884c1\u30ce\u30fc\u30c9\u540d\u3067\u66f8\u3044\u305f\u30d5\u30a1\u30a4\u30ebpath\u3092\u6307\u5b9a\u3059\u308b\n2. `yarn rmadmin -refreshNodes` \u3059\u308b\n_\u203bDecommission\u3059\u308b\u3068nodemanager\u843d\u3061\u308b\u306e\u3067\u6ce8\u610f_\n\n## HBase\n\n`/usr/lib/hbase/bin/hbase-jruby /usr/lib/hbase/bin/region_mover.rb -x exclude.txt unload host`\n\n`hbase shell` \u3067 `balance_switch false` \u5fc5\u8981\uff1f\n", "tags": ["hadoop", "CDH4.5", "HBase", "YARN"]}