{"context": " More than 1 year has passed since last update.JVM\u7cfb\u8a00\u8a9e\u3067Git\u30b5\u30fc\u30d0\u3092\u4f5c\u308d\u3046\u3068\u3057\u305f\u3089\u3001JGit\u306eGi\uff54Server\u3092\u4f7f\u3046\u3068\u7c21\u5358\u3067\u3059\u304c\u3001Clojure\u306e\u5834\u5408ring\u3067\u52d5\u304b\u3057\u305f\u3044\u306e\u3067\u3001Servlet\u3060\u3068\u3061\u3087\u3063\u3068\u6271\u3044\u3065\u3089\u3044\u3068\u3053\u308d\u304c\u3042\u308a\u307e\u3059\u3002\n\u305d\u3053\u3067\u3001GitServlet\u3092\u4f7f\u308f\u305a\u306bGit http \u30b5\u30fc\u30d0\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\nhttps://github.com/kawasima/gring\nGit\u306e\u5185\u5074 - \u30c8\u30e9\u30f3\u30b9\u30d5\u30a1\u30fc\u30d7\u30ed\u30c8\u30b3\u30eb \u306b\u3042\u308b\u3068\u304a\u308a\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u5b9f\u88c5\u3059\u308c\u3070\u3088\u3044\u308f\u3051\u3067\u3059\u304c\n\u3001JGit\u3092\u4f7f\u3048\u3070\u7c21\u5358\u3067\u3059\u3002\n\u4f8b\u3048\u3070\u3001git clone\u3092\u5b9f\u884c\u3057\u305f\u6642\u306b\u306f\u3001\u30b5\u30fc\u30d0\u3078\u306f\u4ee5\u4e0b\u306e\uff12\u56de\u306eHTTP\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u3068\u3073\u307e\u3059\u3002\nGET /hoge.git/info/refs?service=git-upload-pack\nPOST /hoge.git/git-upload-pack\n\n\u6700\u521d\u306e info/refs \u306f\u30d6\u30e9\u30f3\u30c1\u306e\u4e00\u89a7\u3092\u8fd4\u3057\u307e\u3059\u3002\n\u6614\u306egit\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306fservice=git-upload-pack\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u4ed8\u3044\u3066\u304d\u307e\u305b\u3093\u3002\u3053\u308c\u306fdumb\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u547c\u3070\u308c\u3066\u3044\u307e\u3059\u3002\u73fe\u5728\u306egit\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306fsmart\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u547c\u3070\u308c\u3066\u3044\u3066\u3001dumb\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u30ea\u30dd\u30b8\u30c8\u30ea\u4e0b\u306einfo/refs\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u3092\u305d\u306e\u307e\u307e\u9001\u4fe1\u3059\u308b\u306e\u306b\u5bfe\u3057\u3001\u591a\u5c11\u306e\u30d8\u30c3\u30c0\u60c5\u5831\u304c\u3064\u3044\u305f\u308a\u3057\u307e\u3059\u3002\n\u305d\u3093\u306a\u8abf\u5b50\u3067\u3001git\u30b3\u30de\u30f3\u30c9\u3067\u3084\u308a\u3068\u308a\u3055\u308c\u308bURL\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u57fa\u672c\u7684\u306b\u306fJGit\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3076\u3060\u3051\u3067\u3059\u3002\n(defroutes git-routes\n  (compojure/context [\"/:name.git\", :name #\"[0-9A-Za-z\\-\\.]+\"] {{repo-name :name} :params}\n    (GET \"/info/refs\" {:as request}\n      (get-info-refs (open-repo repo-name) request))\n    (POST \"/git-upload-pack\" {:as request}\n      (service-upload (open-repo repo-name) request))\n    (POST \"/git-receive-pack\" {:as request}\n      (service-receive (open-repo repo-name) request))\n    (GET \"/HEAD\" {params :params}\n      (get-text-file (open-repo repo-name) \"HEAD\"))\n    (GET \"/objects/info/alternates\" []\n      (get-text-file (open-repo repo-name) \"objects/info/alternates\"))\n    (GET \"/objects/info/http-alternates\" []\n      (get-text-file (open-repo repo-name) \"objects/info/http-alternates\"))\n    (GET \"/objects/info/packs\" []\n      (get-info-packs (open-repo repo-name)))\n    (GET \"/objects/info/*\" {params :params}\n      (get-text-file (open-repo repo-name) (str \"objects/info/\" (params :*))))\n    (GET [\"/objects/:hash2/:hash38\", :hash2 #\"[0-9a-f]{2}\" :hash38 #\"[0-9a-f]{38}\"] [hash2 hash38]\n      (get-loose-object (open-repo repo-name) (str \"objects/\" hash2 hash38)))\n    (GET [\"/objects/pack/:pack-file\", :pack-file #\"[0-9a-f]\\.(pack|idx)\"] [pack-file]\n      (cond\n        (. pack-file endsWith \".pack\")\n        (get-pack-file (open-repo repo-name) (str \"objects/pack/\" pack-file))\n        (. pack-file endsWith \".idx\")\n        (get-idx-file  (open-repo repo-name) (str \"objects/pack/\" pack-file))))))\n\n\u50c5\u304b171\u884c\u3067\u3001GitServer\u304c\u5b8c\u6210\u3057\u307e\u3057\u305f\u3002\nhttps://github.com/kawasima/gring/blob/master/src/gring/core.clj\n\u7c21\u5358\u3067\u3059\u306d\u3002\nJVM\u7cfb\u8a00\u8a9e\u3067Git\u30b5\u30fc\u30d0\u3092\u4f5c\u308d\u3046\u3068\u3057\u305f\u3089\u3001JGit\u306eGi\uff54Server\u3092\u4f7f\u3046\u3068\u7c21\u5358\u3067\u3059\u304c\u3001Clojure\u306e\u5834\u5408ring\u3067\u52d5\u304b\u3057\u305f\u3044\u306e\u3067\u3001Servlet\u3060\u3068\u3061\u3087\u3063\u3068\u6271\u3044\u3065\u3089\u3044\u3068\u3053\u308d\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u305d\u3053\u3067\u3001GitServlet\u3092\u4f7f\u308f\u305a\u306bGit http \u30b5\u30fc\u30d0\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\nhttps://github.com/kawasima/gring\n\n[Git\u306e\u5185\u5074 - \u30c8\u30e9\u30f3\u30b9\u30d5\u30a1\u30fc\u30d7\u30ed\u30c8\u30b3\u30eb](http://git-scm.com/book/ja/Git%E3%81%AE%E5%86%85%E5%81%B4-%E3%83%88%E3%83%A9%E3%83%B3%E3%82%B9%E3%83%95%E3%82%A1%E3%83%BC%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB) \u306b\u3042\u308b\u3068\u304a\u308a\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u5b9f\u88c5\u3059\u308c\u3070\u3088\u3044\u308f\u3051\u3067\u3059\u304c\n\u3001JGit\u3092\u4f7f\u3048\u3070\u7c21\u5358\u3067\u3059\u3002\n\n\u4f8b\u3048\u3070\u3001git clone\u3092\u5b9f\u884c\u3057\u305f\u6642\u306b\u306f\u3001\u30b5\u30fc\u30d0\u3078\u306f\u4ee5\u4e0b\u306e\uff12\u56de\u306eHTTP\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u3068\u3073\u307e\u3059\u3002\n\n    GET /hoge.git/info/refs?service=git-upload-pack\n    POST /hoge.git/git-upload-pack\n\n\u6700\u521d\u306e info/refs \u306f\u30d6\u30e9\u30f3\u30c1\u306e\u4e00\u89a7\u3092\u8fd4\u3057\u307e\u3059\u3002\n\u6614\u306egit\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306fservice=git-upload-pack\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u4ed8\u3044\u3066\u304d\u307e\u305b\u3093\u3002\u3053\u308c\u306fdumb\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u547c\u3070\u308c\u3066\u3044\u307e\u3059\u3002\u73fe\u5728\u306egit\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306fsmart\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u547c\u3070\u308c\u3066\u3044\u3066\u3001dumb\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u30ea\u30dd\u30b8\u30c8\u30ea\u4e0b\u306einfo/refs\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u3092\u305d\u306e\u307e\u307e\u9001\u4fe1\u3059\u308b\u306e\u306b\u5bfe\u3057\u3001\u591a\u5c11\u306e\u30d8\u30c3\u30c0\u60c5\u5831\u304c\u3064\u3044\u305f\u308a\u3057\u307e\u3059\u3002\n\n\u305d\u3093\u306a\u8abf\u5b50\u3067\u3001git\u30b3\u30de\u30f3\u30c9\u3067\u3084\u308a\u3068\u308a\u3055\u308c\u308bURL\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u57fa\u672c\u7684\u306b\u306fJGit\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3076\u3060\u3051\u3067\u3059\u3002\n\n```clj\n(defroutes git-routes\n  (compojure/context [\"/:name.git\", :name #\"[0-9A-Za-z\\-\\.]+\"] {{repo-name :name} :params}\n    (GET \"/info/refs\" {:as request}\n      (get-info-refs (open-repo repo-name) request))\n    (POST \"/git-upload-pack\" {:as request}\n      (service-upload (open-repo repo-name) request))\n    (POST \"/git-receive-pack\" {:as request}\n      (service-receive (open-repo repo-name) request))\n    (GET \"/HEAD\" {params :params}\n      (get-text-file (open-repo repo-name) \"HEAD\"))\n    (GET \"/objects/info/alternates\" []\n      (get-text-file (open-repo repo-name) \"objects/info/alternates\"))\n    (GET \"/objects/info/http-alternates\" []\n      (get-text-file (open-repo repo-name) \"objects/info/http-alternates\"))\n    (GET \"/objects/info/packs\" []\n      (get-info-packs (open-repo repo-name)))\n    (GET \"/objects/info/*\" {params :params}\n      (get-text-file (open-repo repo-name) (str \"objects/info/\" (params :*))))\n    (GET [\"/objects/:hash2/:hash38\", :hash2 #\"[0-9a-f]{2}\" :hash38 #\"[0-9a-f]{38}\"] [hash2 hash38]\n      (get-loose-object (open-repo repo-name) (str \"objects/\" hash2 hash38)))\n    (GET [\"/objects/pack/:pack-file\", :pack-file #\"[0-9a-f]\\.(pack|idx)\"] [pack-file]\n      (cond\n        (. pack-file endsWith \".pack\")\n        (get-pack-file (open-repo repo-name) (str \"objects/pack/\" pack-file))\n        (. pack-file endsWith \".idx\")\n        (get-idx-file  (open-repo repo-name) (str \"objects/pack/\" pack-file))))))\n```\n\n\u50c5\u304b171\u884c\u3067\u3001GitServer\u304c\u5b8c\u6210\u3057\u307e\u3057\u305f\u3002\nhttps://github.com/kawasima/gring/blob/master/src/gring/core.clj\n\n\u7c21\u5358\u3067\u3059\u306d\u3002\n", "tags": ["Clojure", "JGit", "Git"]}