{"context": " More than 1 year has passed since last update.\u306a\u306b\u304b\u3072\u3068\u304b\u305f\u307e\u308a\u306e\u624b\u7d9a\u304d\u3092\u5b9f\u88c5\u3057\u305f\u969b\u306b\u306f\u3001\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u3060\u3051\u3067\u306a\u304f\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3082\u3061\u3087\u3063\u3068\u898b\u3066\u304a\u304f\u306e\u306f\u826f\u3044\u7fd2\u6163\u3060\u3068\u601d\u3044\u307e\u3059\u3002\u65e9\u3059\u304e\u308b\u6700\u9069\u5316\u306f\u3088\u304f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3061\u3087\u3063\u3068\u3057\u305f\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u3092\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u554f\u984c\u304c\u9855\u5728\u5316\u3059\u308b\u524d\u306b\u8a8d\u8b58\u3060\u3051\u3057\u3066\u304a\u304f\u306e\u306f\u300c\u3044\u3064\u3067\u3082\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3067\u304d\u308b\u300d\u3068\u3044\u3046\u5fc3\u306e\u4f59\u88d5\u306b\u306a\u308a\u307e\u3059\u3002\n# coding:utf-8\n\nimport os\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"project.settings\")\n\nimport django\ndjango.setup()\n\n\nif __name__ == \"__main__\":\n    \"\"\"\n    $ cd /path/to/project\n    $ python -m project.profile\n    \"\"\"\n    import cProfile\n    import pstats\n\n    # \u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u304c\u898b\u305f\u3044\u95a2\u6570 \n    from app.models import func_to_profile\n\n    prf = cProfile.Profile()\n    prf.runcall(func_to_profile)\n    pstats.Stats(prf\n        ).sort_stats('time'  # \u5185\u90e8\u6642\u9593 \u91cd\u3044\u9806\u306bsort\n        ).print_stats(.03)   # \u4e0a\u4f4d3%\u3060\u3051\u8868\u793a\n\n\u7d50\u679c\u8868\u793a\u306f\u3053\u3093\u306a\u611f\u3058\n$ python -m project.profile\n         9109096 function calls (8991335 primitive calls) in 8.224 seconds\n\n   Ordered by: internal time\n   List reduced from 463 to 14 due to restriction <0.03>\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n   125620    0.723    0.000    0.723    0.000 /path/to/django/utils/dateparse.py:107(<dictcomp>)\n    62810    0.631    0.000    0.805    0.000 /path/to/django/db/models/base.py:388(__init__)\n   125620    0.435    0.000    1.702    0.000 /path/to/django/utils/dateparse.py:84(parse_datetime)\n   265490    0.395    0.000    0.640    0.000 /path/to/django/db/models/fields/related.py:1619(local_related_fields)\n      670    0.339    0.001    3.027    0.005 {method 'fetchmany' of 'sqlite3.Cursor' objects}\n   125620    0.292    0.000    2.242    0.000 /path/to/django/db/backends/sqlite3/utils.py:6(parse_datetime_with_timezone_support)\n   279460    0.291    0.000    0.474    0.000 /path/to/django/db/models/fields/related.py:1633(get_instance_value_for_fields)\n   265490    0.205    0.000    1.209    0.000 /path/to/django/db/models/fields/related.py:1627(get_local_related_value)\n   549522    0.199    0.000    0.199    0.000 {hasattr}\n   127330    0.198    0.000    0.198    0.000 {method 'match' of '_sre.SRE_Pattern' objects}\n672800/561660    0.194    0.000    0.423    0.000 {setattr}\n   127330    0.175    0.000    0.175    0.000 {method 'groupdict' of '_sre.SRE_Match' objects}\n    55570    0.157    0.000    0.263    0.000 /path/to/django/db/models/fields/related.py:615(__set__)\n   376960    0.154    0.000    0.254    0.000 /path/to/django/db/models/fields/related.py:1609(related_fields)(app)\n\n\n\n\u7d50\u679c\u3092\u898b\u305f\u3068\u3053\u308d\u3060\u3068sqlite\u306e\u30c7\u30fc\u30bf\u3092datetime\u306b\u30d1\u30fc\u30b9\u3059\u308b\u3068\u3053\u308d\u304c\u5927\u5909\u306a\u3088\u3046\u3067\u3059\u3002\n\u3044\u3056\u3068\u3044\u3046\u3068\u304d\u306b\u306f\u30d1\u30fc\u30b9\u3059\u308b\u30ab\u30e9\u30e0\u3092\u7d5e\u308b\u306a\u3069\u306e\u5bfe\u51e6\u304c\u53ef\u80fd\u306a\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u306a\u306b\u304b\u3072\u3068\u304b\u305f\u307e\u308a\u306e\u624b\u7d9a\u304d\u3092\u5b9f\u88c5\u3057\u305f\u969b\u306b\u306f\u3001\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u3060\u3051\u3067\u306a\u304f\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3082\u3061\u3087\u3063\u3068\u898b\u3066\u304a\u304f\u306e\u306f\u826f\u3044\u7fd2\u6163\u3060\u3068\u601d\u3044\u307e\u3059\u3002\u65e9\u3059\u304e\u308b\u6700\u9069\u5316\u306f\u3088\u304f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3061\u3087\u3063\u3068\u3057\u305f\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u3092\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u554f\u984c\u304c\u9855\u5728\u5316\u3059\u308b\u524d\u306b\u8a8d\u8b58\u3060\u3051\u3057\u3066\u304a\u304f\u306e\u306f\u300c\u3044\u3064\u3067\u3082\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3067\u304d\u308b\u300d\u3068\u3044\u3046\u5fc3\u306e\u4f59\u88d5\u306b\u306a\u308a\u307e\u3059\u3002\n\n```python\n# coding:utf-8\n\nimport os\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"project.settings\")\n\nimport django\ndjango.setup()\n\n\nif __name__ == \"__main__\":\n    \"\"\"\n    $ cd /path/to/project\n    $ python -m project.profile\n    \"\"\"\n    import cProfile\n    import pstats\n\n    # \u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u304c\u898b\u305f\u3044\u95a2\u6570 \n    from app.models import func_to_profile\n\n    prf = cProfile.Profile()\n    prf.runcall(func_to_profile)\n    pstats.Stats(prf\n        ).sort_stats('time'  # \u5185\u90e8\u6642\u9593 \u91cd\u3044\u9806\u306bsort\n        ).print_stats(.03)   # \u4e0a\u4f4d3%\u3060\u3051\u8868\u793a\n```\n\n\u7d50\u679c\u8868\u793a\u306f\u3053\u3093\u306a\u611f\u3058\n\n```python\n$ python -m project.profile\n         9109096 function calls (8991335 primitive calls) in 8.224 seconds\n\n   Ordered by: internal time\n   List reduced from 463 to 14 due to restriction <0.03>\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n   125620    0.723    0.000    0.723    0.000 /path/to/django/utils/dateparse.py:107(<dictcomp>)\n    62810    0.631    0.000    0.805    0.000 /path/to/django/db/models/base.py:388(__init__)\n   125620    0.435    0.000    1.702    0.000 /path/to/django/utils/dateparse.py:84(parse_datetime)\n   265490    0.395    0.000    0.640    0.000 /path/to/django/db/models/fields/related.py:1619(local_related_fields)\n      670    0.339    0.001    3.027    0.005 {method 'fetchmany' of 'sqlite3.Cursor' objects}\n   125620    0.292    0.000    2.242    0.000 /path/to/django/db/backends/sqlite3/utils.py:6(parse_datetime_with_timezone_support)\n   279460    0.291    0.000    0.474    0.000 /path/to/django/db/models/fields/related.py:1633(get_instance_value_for_fields)\n   265490    0.205    0.000    1.209    0.000 /path/to/django/db/models/fields/related.py:1627(get_local_related_value)\n   549522    0.199    0.000    0.199    0.000 {hasattr}\n   127330    0.198    0.000    0.198    0.000 {method 'match' of '_sre.SRE_Pattern' objects}\n672800/561660    0.194    0.000    0.423    0.000 {setattr}\n   127330    0.175    0.000    0.175    0.000 {method 'groupdict' of '_sre.SRE_Match' objects}\n    55570    0.157    0.000    0.263    0.000 /path/to/django/db/models/fields/related.py:615(__set__)\n   376960    0.154    0.000    0.254    0.000 /path/to/django/db/models/fields/related.py:1609(related_fields)(app)\n\n\n```\n\n\u7d50\u679c\u3092\u898b\u305f\u3068\u3053\u308d\u3060\u3068sqlite\u306e\u30c7\u30fc\u30bf\u3092`datetime`\u306b\u30d1\u30fc\u30b9\u3059\u308b\u3068\u3053\u308d\u304c\u5927\u5909\u306a\u3088\u3046\u3067\u3059\u3002\n\u3044\u3056\u3068\u3044\u3046\u3068\u304d\u306b\u306f\u30d1\u30fc\u30b9\u3059\u308b\u30ab\u30e9\u30e0\u3092\u7d5e\u308b\u306a\u3069\u306e\u5bfe\u51e6\u304c\u53ef\u80fd\u306a\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n", "tags": ["Python", "Django"]}