{"context": " More than 1 year has passed since last update.\n\nnode-webkit-v0.8.5\u7de8\nv0.9\u7cfb\u306fnode-ffi\u304c\u30d3\u30eb\u30c9\u304c\u30d5\u30c4\u30fc\u306enode.js\u306ev0.11\u7cfb\u3067NG\u306a\u306e\u3067\u3001\u30cf\u30fc\u30c9\u30eb\u9ad8\u3044\u305d\u3046\u3002\n\nnw-gyp\nnpm install -g nw-gyp\n\n\nNodObjC\u3092npm\u3067\u30d5\u30c4\u30fc\u306b\u5165\u308c\u308b\nNodeObjC\u306f\u30ab\u30ec\u30f3\u30c8\u306bnode_modules\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u7121\u3044\u3068\u3001\n\u5909\u306a\u5834\u6240\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3053\u3068\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u4e88\u3081node_modules\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\n\u4f5c\u3063\u3066\u304a\u304f\u3002\nmkdir node_modules\nnpm install NodObjC\n\n\nPostgres.app\u3092\u5165\u308c\u3066\u308b\u5834\u5408\nPATH\u306b\n/Applications/Postgres.app/Contents/MacOS/bin/\n\u3092\u52a0\u3048\u3066\u3044\u308b\u5834\u5408\u3001Postgres.app\u306exml2-config\n\u304c\u4f7f\u308f\u308c\u308b\u3068\u3001\u30d3\u30eb\u30c9\u306b\u5931\u6557\u3059\u308b\u306e\u3067\u3001\n/usr/bin/xml2-config\u304c\u4f7f\u308f\u308c\u308b\u3088\u3046\u306b\u3059\u308b\u3002\nwhich xml2-config\n\n\nnw-gyp\u3067configure\u3068build\n\nlibxmljs\u3092node-webkit\u5411\u3051\u306b\u30d3\u30eb\u30c9\nxml2-config\u3092/usb/bin\u306e\u3082\u306e\u3092\u4f7f\u3048\u3070\u554f\u984c\u306a\u304fnode-webkit\u5411\u3051\u306b\u30d3\u30eb\u30c9\u51fa\u6765\u305f\u3002\ncd node_modules/NodObjC/node_modules/libxmljs\nnw-gyp clean\nnw-gyp configure --target=0.8.5 --arch=ia32\nnw-gyp build\n\n\nnode-ffi\u3092node-webkit\u5411\u3051\u306b\u30d3\u30eb\u30c9\n\nlibffi-config.sh\u3092\u7de8\u96c6\u3057\u306632\u30d3\u30c3\u30c8\u7528\u306e\u30d0\u30a4\u30ca\u30ea\u3092\u751f\u6210\u3055\u305b\u308b\n\u5185\u90e8\u3067libffi.a\u3092\u9759\u7684\u306b\u30ea\u30f3\u30af\u3059\u308b\u306e\u3060\u304c\u3001\u3053\u308c\u304cgyp\u7ba1\u7406\u5916\u306e\u70ba\u3001nw-gyp config\u306e\u969b\u306e--arch=ia32\u306e\u6307\u5b9a\u304c\u52b9\u304b\u306a\u3044\u306e\u3067\u3001\u305d\u306e\u307e\u307e\u3060\u306864\u30d3\u30c3\u30c8\u7528\u306e\u30d0\u30a4\u30ca\u30ea\u304c\u4f5c\u3089\u308c\u3066\u3057\u307e\u3046\u3002\n\u305d\u306e\u70ba\u3001\u500b\u5225\u306b\u5bfe\u5fdc\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\ncd deps/libffi\nmake clean distclean >node_ffi_configure.out 2>&1\nexport CFLAGS=\"-arch i386\"\nsh configure --with-pic --enable-static --disable-shared --disable-builddir >>node_ffi_configure.out 2>&1\ncd ../..\n\ncd ../node-ffi\nnw-gyp clean\nnw-gyp configure --target=0.8.5 --arch=ia32\nnw-gyp build\n\nSOLINK_MODULE(target) Release/ffi_bindings.node\nld: warning: could not create compact unwind for .LFB3: non-standard register 5 being saved in prolog\n  SOLINK_MODULE(target) Release/ffi_bindings.node: Finished\n\ni386\u7528\u306elibffi.a\u304c\u3067\u304d\u3066\u3044\u306a\u3044\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u308b\u3002\nSOLINK_MODULE(target) Release/ffi_bindings.node\nld: warning: ignoring file /Users/nanashi/work/tmp/node_modules/NodObjC/node_modules/node-ffi/deps/libffi/.libs/libffi.a, file was built for archive which is not the architecture being linked (i386): /Users/nanashi/work/tmp/node_modules/NodObjC/node_modules/node-ffi/deps/libffi/.libs/libffi.a\n  SOLINK_MODULE(target) Release/ffi_bindings.node: Finished\n\n\n\u52d5\u304b\u3059\nNSAutoreleasePool\u7b49\u306f\u6307\u5b9a\u3059\u308b\u3068\u30c7\u30d0\u30c3\u30ac\u304c\u8d77\u52d5\u3067\u304d\u306a\u3044\u3002\nnode-webkit\u5074\u3067\u3053\u306e\u8fba\u308a\u3092\u51e6\u7406\u3057\u3066\u3044\u308b\u306e\u3060\u308d\u3046\u304b\u3089\u4f59\u8a08\u306a\u3053\u3068\u306f\u3057\u306a\u3044\uff57\u3002\ncd ../../../../\n~/Downloads/node-webkit-v0.8.5-osx-ia32/node-webkit.app/Contents/MacOS/node-webkit .\n\n\nindex.html\n<!DOCTYPE html>\n<html>\n    <title>Hello,Cocoa</title>\n    <h1>Hello NodObjC</h1>\n    We are using node.js <script>document.write(process.version)</script>.\n<div id=\"hello\"></div>\n    <script>\n      var $ = require('NodObjC');\n      $.framework('Foundation');\n      $.framework('Cocoa');\n\n      // NSString from a JS String when an Objective-C class method requires one.\n      var string = $.NSString('stringWithUTF8String', 'Hello Objective-C World!');\n\n      // Print out the contents (calling [string description])\n      console.log(string.toString());\n      console.log(string);\n      //   \u2192 Prints \"Hello Objective-C World!\"\n      document.getElementById(\"hello\").innerHTML=string;\n    </script>\n</html>\n\npackage.json\n{\n  \"name\": \"nw-demo\",\n  \"main\": \"index.html\"\n}\n\n## node-webkit-v0.8.5\u7de8\n\nv0.9\u7cfb\u306fnode-ffi\u304c\u30d3\u30eb\u30c9\u304c\u30d5\u30c4\u30fc\u306enode.js\u306ev0.11\u7cfb\u3067NG\u306a\u306e\u3067\u3001\u30cf\u30fc\u30c9\u30eb\u9ad8\u3044\u305d\u3046\u3002\n\n\n### nw-gyp\n\n```\nnpm install -g nw-gyp\n```\n\n### NodObjC\u3092npm\u3067\u30d5\u30c4\u30fc\u306b\u5165\u308c\u308b\n\nNodeObjC\u306f\u30ab\u30ec\u30f3\u30c8\u306bnode_modules\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u7121\u3044\u3068\u3001\n\u5909\u306a\u5834\u6240\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3053\u3068\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u4e88\u3081node_modules\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\n\u4f5c\u3063\u3066\u304a\u304f\u3002\n\n```\nmkdir node_modules\nnpm install NodObjC\n```\n\n#### Postgres.app\u3092\u5165\u308c\u3066\u308b\u5834\u5408\n\nPATH\u306b\n\n/Applications/Postgres.app/Contents/MacOS/bin/\n\n\u3092\u52a0\u3048\u3066\u3044\u308b\u5834\u5408\u3001Postgres.app\u306exml2-config\n\u304c\u4f7f\u308f\u308c\u308b\u3068\u3001\u30d3\u30eb\u30c9\u306b\u5931\u6557\u3059\u308b\u306e\u3067\u3001\n/usr/bin/xml2-config\u304c\u4f7f\u308f\u308c\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n```\nwhich xml2-config\n```\n\n### nw-gyp\u3067configure\u3068build\n\n#### libxmljs\u3092node-webkit\u5411\u3051\u306b\u30d3\u30eb\u30c9\n\nxml2-config\u3092/usb/bin\u306e\u3082\u306e\u3092\u4f7f\u3048\u3070\u554f\u984c\u306a\u304fnode-webkit\u5411\u3051\u306b\u30d3\u30eb\u30c9\u51fa\u6765\u305f\u3002\n\n```\ncd node_modules/NodObjC/node_modules/libxmljs\nnw-gyp clean\nnw-gyp configure --target=0.8.5 --arch=ia32\nnw-gyp build\n```\n\n#### node-ffi\u3092node-webkit\u5411\u3051\u306b\u30d3\u30eb\u30c9\n\n##### libffi-config.sh\u3092\u7de8\u96c6\u3057\u306632\u30d3\u30c3\u30c8\u7528\u306e\u30d0\u30a4\u30ca\u30ea\u3092\u751f\u6210\u3055\u305b\u308b\n\n\u5185\u90e8\u3067libffi.a\u3092\u9759\u7684\u306b\u30ea\u30f3\u30af\u3059\u308b\u306e\u3060\u304c\u3001\u3053\u308c\u304cgyp\u7ba1\u7406\u5916\u306e\u70ba\u3001nw-gyp config\u306e\u969b\u306e--arch=ia32\u306e\u6307\u5b9a\u304c\u52b9\u304b\u306a\u3044\u306e\u3067\u3001\u305d\u306e\u307e\u307e\u3060\u306864\u30d3\u30c3\u30c8\u7528\u306e\u30d0\u30a4\u30ca\u30ea\u304c\u4f5c\u3089\u308c\u3066\u3057\u307e\u3046\u3002\n\u305d\u306e\u70ba\u3001\u500b\u5225\u306b\u5bfe\u5fdc\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n```\ncd deps/libffi\nmake clean distclean >node_ffi_configure.out 2>&1\nexport CFLAGS=\"-arch i386\"\nsh configure --with-pic --enable-static --disable-shared --disable-builddir >>node_ffi_configure.out 2>&1\ncd ../..\n```\n\n```\ncd ../node-ffi\nnw-gyp clean\nnw-gyp configure --target=0.8.5 --arch=ia32\nnw-gyp build\n```\n\n```\nSOLINK_MODULE(target) Release/ffi_bindings.node\nld: warning: could not create compact unwind for .LFB3: non-standard register 5 being saved in prolog\n  SOLINK_MODULE(target) Release/ffi_bindings.node: Finished\n```\n\ni386\u7528\u306elibffi.a\u304c\u3067\u304d\u3066\u3044\u306a\u3044\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u308b\u3002\n\n```\nSOLINK_MODULE(target) Release/ffi_bindings.node\nld: warning: ignoring file /Users/nanashi/work/tmp/node_modules/NodObjC/node_modules/node-ffi/deps/libffi/.libs/libffi.a, file was built for archive which is not the architecture being linked (i386): /Users/nanashi/work/tmp/node_modules/NodObjC/node_modules/node-ffi/deps/libffi/.libs/libffi.a\n  SOLINK_MODULE(target) Release/ffi_bindings.node: Finished\n```\n\n\n### \u52d5\u304b\u3059\n\nNSAutoreleasePool\u7b49\u306f\u6307\u5b9a\u3059\u308b\u3068\u30c7\u30d0\u30c3\u30ac\u304c\u8d77\u52d5\u3067\u304d\u306a\u3044\u3002\nnode-webkit\u5074\u3067\u3053\u306e\u8fba\u308a\u3092\u51e6\u7406\u3057\u3066\u3044\u308b\u306e\u3060\u308d\u3046\u304b\u3089\u4f59\u8a08\u306a\u3053\u3068\u306f\u3057\u306a\u3044\uff57\u3002\n\n\n```\ncd ../../../../\n~/Downloads/node-webkit-v0.8.5-osx-ia32/node-webkit.app/Contents/MacOS/node-webkit .\n```\n\n#### index.html\n\n```\n<!DOCTYPE html>\n<html>\n    <title>Hello,Cocoa</title>\n    <h1>Hello NodObjC</h1>\n    We are using node.js <script>document.write(process.version)</script>.\n<div id=\"hello\"></div>\n    <script>\n      var $ = require('NodObjC');\n      $.framework('Foundation');\n      $.framework('Cocoa');\n      \n      // NSString from a JS String when an Objective-C class method requires one.\n      var string = $.NSString('stringWithUTF8String', 'Hello Objective-C World!');\n      \n      // Print out the contents (calling [string description])\n      console.log(string.toString());\n      console.log(string);\n      //   \u2192 Prints \"Hello Objective-C World!\"\n      document.getElementById(\"hello\").innerHTML=string;\n    </script>\n</html>\n```\n\npackage.json\n\n```\n{\n  \"name\": \"nw-demo\",\n  \"main\": \"index.html\"\n}\n```\n", "tags": ["MacOSX", "Node.js", "node-webkit", "Cocoa"]}