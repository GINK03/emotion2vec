{"context": " More than 1 year has passed since last update.Rails\u306e\u30c6\u30b9\u30c8\u3067\u3001\u30e6\u30fc\u30b6\u306e\u540c\u6642\u30ed\u30b0\u30a4\u30f3\u3068\u304b\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u30e6\u30fc\u30b6\u306e\u6319\u52d5\u3092\u30c6\u30b9\u30c8\u3057\u305f\u3044\u3063\u3066\u3068\u304d\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nCapybara\u306eusing_session\u3092\u4f7f\u3048\u3070\u3001\u30c6\u30b9\u30c8\u306e\u4e2d\u3067\u8907\u6570\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u6271\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nusing_session :user1 do\n  visit root_path\nend\n\nJavaScript\u3064\u304b\u3046\u3068\u304d\uff08js: true\u306e\u3068\u304d\uff09\u3001Selenium\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068Firefox\u304c\u8d77\u52d5\u3057\u307e\u3059\u3002\n\u914d\u5217\u3067\u56de\u3059\u3068\u3001\u7c21\u5358\u306b\u3044\u304f\u3064\u3067\u3082\u7acb\u3061\u4e0a\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nscenario '2\u4eba\u3067\u540c\u6642\u30ed\u30b0\u30a4\u30f3', js: true do\n  users = [\n    { symbol: :user1, name: 'user01', gender: 'male' },\n    { symbol: :user2, name: 'user02', gender: 'female' }\n  ]\n\n  users.each do |user|\n    using_session user[:symbol] do\n      visit root_path\n    end\n  end\n\n  users.each do |user|\n    using_session user[:symbol] do\n      expect{\n        fill_in 'user[name]', with: user[:name]\n        find(user[:gender]).click\n      }.to change(User, :count).by(1)\n    end\n  end\nend\n\n\u5f53\u7136\u3067\u3059\u304c\u3001\u3042\u307e\u308a\u591a\u304f\u306e\u30d6\u30e9\u30a6\u30b6\u3092\u540c\u6642\u306b\u958b\u304f\u3068\u91cd\u3044\u3067\u3059\u3002\n\u307e\u305f\u3001\u4eca\u56de\u8a66\u3057\u305f\u74b0\u5883\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\nrspec-rails 3.4.1\ncapybara 2.6.2\n\nRails\u306e\u30c6\u30b9\u30c8\u3067\u3001\u30e6\u30fc\u30b6\u306e\u540c\u6642\u30ed\u30b0\u30a4\u30f3\u3068\u304b\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u30e6\u30fc\u30b6\u306e\u6319\u52d5\u3092\u30c6\u30b9\u30c8\u3057\u305f\u3044\u3063\u3066\u3068\u304d\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nCapybara\u306e[using_session](http://www.rubydoc.info/github/jnicklas/capybara/Capybara.using_session)\u3092\u4f7f\u3048\u3070\u3001\u30c6\u30b9\u30c8\u306e\u4e2d\u3067\u8907\u6570\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u6271\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n``` ruby\nusing_session :user1 do\n  visit root_path\nend\n```\n\nJavaScript\u3064\u304b\u3046\u3068\u304d\uff08js: true\u306e\u3068\u304d\uff09\u3001Selenium\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068Firefox\u304c\u8d77\u52d5\u3057\u307e\u3059\u3002\n\u914d\u5217\u3067\u56de\u3059\u3068\u3001\u7c21\u5358\u306b\u3044\u304f\u3064\u3067\u3082\u7acb\u3061\u4e0a\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n``` ruby\nscenario '2\u4eba\u3067\u540c\u6642\u30ed\u30b0\u30a4\u30f3', js: true do\n  users = [\n    { symbol: :user1, name: 'user01', gender: 'male' },\n    { symbol: :user2, name: 'user02', gender: 'female' }\n  ]\n\n  users.each do |user|\n    using_session user[:symbol] do\n      visit root_path\n    end\n  end\n\n  users.each do |user|\n    using_session user[:symbol] do\n      expect{\n        fill_in 'user[name]', with: user[:name]\n        find(user[:gender]).click\n      }.to change(User, :count).by(1)\n    end\n  end\nend\n```\n\n\u5f53\u7136\u3067\u3059\u304c\u3001\u3042\u307e\u308a\u591a\u304f\u306e\u30d6\u30e9\u30a6\u30b6\u3092\u540c\u6642\u306b\u958b\u304f\u3068\u91cd\u3044\u3067\u3059\u3002\n\n\u307e\u305f\u3001\u4eca\u56de\u8a66\u3057\u305f\u74b0\u5883\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n* rspec-rails 3.4.1\n* capybara 2.6.2\n", "tags": ["Ruby", "Rails", "RSpec", "Capybara"]}