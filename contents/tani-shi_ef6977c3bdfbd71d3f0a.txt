{"tags": ["Android", "cocos2d-x", "AndroidStudio", "NDK"], "context": "\n\nEnv\n\nmacOS 10.11.3\ncocos2d-x 3.13\nAndroid Studio 2.2\nAndroid SDK Tools 25.2.2\nAndroid SDK Platform-tools 24.0.3\nAndroid SDK Build-tools 24.0.0\nAndroid NDK r10e\n404KC Android 4.4.4(\u5b9f\u6a5f)\n\n\u524d\u63d0\u6761\u4ef6\u3068\u3057\u3066\u3059\u3067\u306bcocos2d\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\u3053\u3068\n\u307e\u305f\u3001AndroidSDK\u3084NDK\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u3067\u3042\u308b\u3053\u3068\nSDK\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u904e\u53bb\u8a18\u4e8b\u53c2\u7167\n\u30b3\u30de\u30f3\u30c9\u306e\u307f\u3067Android SDK\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nNDK\u306f\u4e0b\u8a18URL\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u53ef\u80fd\nhttps://dl.google.com/android/repository/android-ndk-r10e-darwin-x86_64.zip\n\nStep\n\n1. Android Studio\u306bcocos\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u308a\u8fbc\u3080\n\n\n\u53d6\u308a\u8fbc\u3093\u3060\u5f8cgradle\u3092\u30d3\u30eb\u30c9\u4e2d\u306bcocos\u304c\u4f7f\u3063\u3066\u3044\u308b\ngradle\u304c\u304b\u306a\u308a\u53e4\u3044\u306e\u3067\u66f4\u65b0\u3057\u307e\u3059\u304b\uff1f\u3068\u805e\u3044\u3066\u304f\u308b\n\u3053\u308c\u306f\u3069\u3063\u3061\u3067\u3082\u3044\u3044\u3051\u3069\u3001\n\u4e00\u5fdc\u6700\u65b0\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u307f\u305f\n\n\u3061\u306a\u307f\u306b\u3053\u3093\u306a\u3053\u3068\u805e\u304b\u308c\u305f\u3089\u3001\n\nAndroidStudio\u3068\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u304c\u3001\n\u9023\u643a\u3057\u3066\u3044\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u306a\u306e\u3067\u3001\u9023\u643a\u3055\u305b\u308b\n\u30e1\u30cb\u30e5\u30fc\u306e\nVCS -> Enable Version Control Integration...\n\u304b\u3089\n\nGit\u3092\u9078\u629e(Git\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408)\n\n\n2. SDK\u3068NDK\u306e\u30d1\u30b9\u3092\u901a\u3059\n\nSDK\u306e\u30d1\u30b9\u3092\u901a\u3059\nPreferences(\u2318,) -> Appearance & Behavior -> System Settings -> Android SDK\n\n\nNDK\u306e\u30d1\u30b9\u3092\u901a\u3059\nProject Structure(\u2318;) -> SDK Location\n\n\n3. build.gradle\u3092\u7de8\u96c6\u3059\u308b\n\u73fe\u72b6\u306ebuild.gradle\u3067\u306fNDK\u306e\u30d3\u30eb\u30c9\u3092\u3084\u3063\u3066\u304f\u308c\u306a\u3044\u305f\u3081\u3001\nAPK\u3092\u30d3\u30eb\u30c9\u3057\u3066\u3082\u52d5\u304b\u306a\u3044\n\u305d\u306e\u305f\u3081\u3001build.gradle\u306a\u3044\u3067NDK\u30d3\u30eb\u30c9\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3059\u308b\n\u307e\u305f\u3001\u30ea\u30bd\u30fc\u30b9\u3082\u30b3\u30d4\u30fc\u3055\u308c\u306a\u3044\u305f\u3081\u3001\n\u30a2\u30bb\u30c3\u30c8\u30d5\u30a9\u30eb\u30c0\u306b\u30b3\u30d4\u30fc\u3059\u308b\u30bf\u30b9\u30af\u3082\u8ffd\u52a0\u3059\u308b\n\u3061\u306a\u307f\u306bNDK\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u30d1\u30b9\u3068\n\u30a2\u30bb\u30c3\u30c8\u306b\u30b3\u30d4\u30fc\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u30d1\u30b9\u306f\nbuild-cfg.json\u304b\u3089\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u305f\u3081\u3001\n\u5909\u66f4\u3059\u308b\u5834\u5408\u306f\u3001\u305d\u3061\u3089\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\nbuild-cfg.json\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u4f5c\u3089\u308c\u308b\n(\u304a\u305d\u3089\u304fcocos\u30b3\u30de\u30f3\u30c9\u3067\u4f7f\u7528\u3055\u308c\u308b\uff1f)\n\nbuild.gradle\napply plugin: 'com.android.application'\n\nimport org.apache.tools.ant.taskdefs.condition.Os\nimport groovy.json.JsonSlurper\n\nandroid {\n    compileSdkVersion 22\n    buildToolsVersion \"22.0.1\"\n\n    defaultConfig {\n        applicationId \"org.cocos2dx.GameBase\"\n        minSdkVersion 10\n        targetSdkVersion 22\n        versionCode 1\n        versionName \"1.0\"\n    }\n\n    sourceSets.main {\n        jni.srcDirs = []\n        java.srcDir \"src\"\n        res.srcDir \"res\"\n        jniLibs.srcDir \"libs\"\n        manifest.srcFile \"AndroidManifest.xml\"\n        assets.srcDir \"assets\"\n    }\n\n    signingConfigs {\n\n       release {\n            if (project.hasProperty(\"RELEASE_STORE_FILE\")) {\n                storeFile file(RELEASE_STORE_FILE)\n                storePassword RELEASE_STORE_PASSWORD\n                keyAlias RELEASE_KEY_ALIAS\n                keyPassword RELEASE_KEY_PASSWORD\n            }\n        }\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            if (project.hasProperty(\"RELEASE_STORE_FILE\")) {\n                signingConfig signingConfigs.release\n            }\n        }\n    }\n\n    task createAssets(type: Copy) {\n        def jsonSlurper = new JsonSlurper()\n        def text = new File('build-cfg.json')\n        def root = jsonSlurper.parseText(text.getText())\n\n        root.copy_resources.each { resource ->\n            from (\"$rootDir/\" + resource.from.toString()) {\n                into resource.to.toString()\n            }\n        }\n\n        root.must_copy_resources.each { resource ->\n            from (\"$rootDir/\" + resource.from.toString()) {\n                into resource.to.toString()\n            }\n        }\n\n        into 'assets'\n    }\n\n    task buildNative(type: Exec, dependsOn: createAssets, description: 'Compile JNI source via NDK') {\n        android.applicationVariants.all { variant ->\n            commandLine getNdkBuildCmd(),\n                    \"NDK_OUT=$buildDir/intermediates/ndk/${variant.dirName}/obj\",\n                    \"NDK_LIBS_OUT=$buildDir/intermediates/ndk/${variant.dirName}/lib\",\n                    \"NDK_MODULE_PATH=\" + getNdkModulePath()\n\n            copy {\n                from \"$buildDir/intermediates/ndk/${variant.dirName}/lib\"\n                into \"libs\"\n            }\n        }\n    }\n\n    task cleanNative(type: Exec, description: 'Clean JNI object files') {\n        android.applicationVariants.all { variant ->\n            commandLine getNdkBuildCmd(),\n                    \"NDK_OUT=$buildDir/intermediates/ndk/${variant.dirName}/obj\",\n                    \"NDK_LIBS_OUT=$buildDir/intermediates/ndk/${variant.dirName}/lib\",\n                    \"NDK_MODULE_PATH=\" + getNdkModulePath(),\n                    'clean'\n        }\n    }\n\n    clean.dependsOn 'cleanNative'\n\n    tasks.withType(JavaCompile) {\n        compileTask -> compileTask.dependsOn buildNative\n    }\n\n    lintOptions {\n        abortOnError false\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    compile project(':libcocos2dx')\n}\n\ndef getNdkBuildCmd() {\n    Properties properties = new Properties()\n    properties.load(project.rootProject.file('local.properties').newDataInputStream())\n    def ndkDir = properties.getProperty('ndk.dir', null)\n    if (ndkDir == null) {\n        throw new GradleException(\"NDK location not found. Define location with ndk.dir in local.properties.\")\n    }\n    def ndkBuildCmd = ndkDir + '/ndk-build'\n    if (Os.isFamily(Os.FAMILY_WINDOWS)) {\n        ndkBuildCmd += '.cmd'\n    }\n\n    return ndkBuildCmd\n}\n\ndef getNdkModulePath() {\n    def jsonSlurper = new JsonSlurper()\n    def text = new File('build-cfg.json')\n    def root = jsonSlurper.parseText(text.getText())\n    def ndkModulePath = '.'\n\n    root.ndk_module_path.each { module ->\n        ndkModulePath = \"$ndkModulePath:$rootDir/\" + module\n    }\n\n    return ndkModulePath\n}\n\n\ngradle\u3092\u7de8\u96c6\u3059\u308b\u3068\u540c\u671f\u3059\u308b\u304b\u805e\u304b\u308c\u308b\u306e\u3067\u3001\nSync Now\u3092\u9078\u629e\n\n\n4. Gradle\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u3053\u306e\u5de5\u7a0b\u304c\u3044\u308b\u304b\u3069\u3046\u304b\u308f\u304b\u3089\u306a\u3044\u3051\u3069\u3001\n\u4e00\u5fdc\u30bf\u30fc\u30df\u30ca\u30eb\u3067gradlew\u3092\u76f4\u63a5\u53e9\u3044\u3066Gradle\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n$ ./gradlew\n\n\n\n5. APK\u3092\u30d3\u30eb\u30c9\n\u30e1\u30cb\u30e5\u30fc\u306e\nBuild -> Build APK\n\u304b\u3089APK\u3092\u30d3\u30eb\u30c9\u3059\u308b\n\n\n6. APK\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nBuild Success\u3057\u305f\u3089\u3001\nadb\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u5b9f\u6a5f\u3082\u3057\u304f\u306f\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n$ adb install -r app/build/outputs/apk/<PROJ_NAME>-Debug.apk\n\n\n\n7. \u5b9f\u884c\n\u304a\u306a\u3058\u307f\u306e\u753b\u9762\u304c\u51fa\u305f\u3089\u6210\u529f\n\n\n\u6700\u5f8c\u306b\n\u904e\u53bb\u306e\u8a18\u4e8b\u3067AndroidStudio\u3092\u3081\u3061\u3083\u53e9\u3044\u305f\u3051\u3069\u3001\n\u5b9f\u969b\u3061\u3083\u3093\u3068\u4f7f\u3063\u3066\u307f\u305f\u3089\u5168\u7136Eclipse\u3068\u6841\u9055\u3044\u307b\u3069\u4f7f\u3044\u3084\u3059\u304b\u3063\u305f\u306e\u3067\u3001\n\u4eca\u307e\u3067\u3061\u3083\u3093\u3068\u89e6\u3089\u306a\u304b\u3063\u305f\u81ea\u5206\u304c\u6065\u305a\u304b\u3057\u3044\ncocos2d-x\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304cAndroid Studio\u30d3\u30eb\u30c9\u3067\u304d\u306a\u3044\u6642\u306e\u5bfe\u51e6\n\u3068\u3044\u3046\u304bcocos\u306f\u306a\u305ccocos\u30b3\u30de\u30f3\u30c9\u3067\u30d3\u30eb\u30c9\u3059\u308b\u524d\u63d0\u306b\u306a\u3063\u3066\u3044\u308b\u3093\u3060\uff1f\nproj.android-studio\u3063\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u3042\u308b\u306e\u306b\n\u305d\u308c\u3058\u3083\u610f\u5473\u306a\u304f\u306a\u3044\uff1f\n\u3068\u308a\u3042\u3048\u305a\u3084\u308a\u65b9\u3092\u3056\u3063\u3068\u66f8\u3044\u305f\u3051\u3069\u3001\n\u306a\u3093\u304b\u8db3\u308a\u306a\u3044\u611f\u3058\u304c\u3059\u308b\u306e\u3067\n\u52d5\u304b\u306a\u304b\u3063\u305f\u3089\u5831\u544a\u306a\u308a\u3001\u8cea\u554f\u3044\u305f\u3060\u3051\u308b\u3068\u52a9\u304b\u308a\u307e\u3059\n\n# Env\n\n- macOS 10.11.3\n- cocos2d-x 3.13\n- Android Studio 2.2\n- Android SDK Tools 25.2.2\n- Android SDK Platform-tools 24.0.3\n- Android SDK Build-tools 24.0.0\n- Android NDK r10e\n- 404KC Android 4.4.4(\u5b9f\u6a5f)\n\n\u524d\u63d0\u6761\u4ef6\u3068\u3057\u3066\u3059\u3067\u306bcocos2d\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\u3053\u3068\n\u307e\u305f\u3001AndroidSDK\u3084NDK\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u3067\u3042\u308b\u3053\u3068\n\nSDK\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u904e\u53bb\u8a18\u4e8b\u53c2\u7167\n\n[\u30b3\u30de\u30f3\u30c9\u306e\u307f\u3067Android SDK\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb](http://qiita.com/tani-shi/items/e855917eaa0387f2bc0c)\n\nNDK\u306f\u4e0b\u8a18URL\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u53ef\u80fd\n\nhttps://dl.google.com/android/repository/android-ndk-r10e-darwin-x86_64.zip\n\n# Step\n\n## 1. Android Studio\u306bcocos\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u308a\u8fbc\u3080\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-01 16.11.30.png](https://qiita-image-store.s3.amazonaws.com/0/132627/d4d43c8f-3a13-0163-34d9-2e4a95a0f8f4.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-01 16.11.30.png\")\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-01 16.17.33.png](https://qiita-image-store.s3.amazonaws.com/0/132627/443a074d-8fce-f8e4-e9ef-2cb30323f298.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-01 16.17.33.png\")\n\n\u53d6\u308a\u8fbc\u3093\u3060\u5f8cgradle\u3092\u30d3\u30eb\u30c9\u4e2d\u306bcocos\u304c\u4f7f\u3063\u3066\u3044\u308b\ngradle\u304c\u304b\u306a\u308a\u53e4\u3044\u306e\u3067\u66f4\u65b0\u3057\u307e\u3059\u304b\uff1f\u3068\u805e\u3044\u3066\u304f\u308b\n\n\u3053\u308c\u306f\u3069\u3063\u3061\u3067\u3082\u3044\u3044\u3051\u3069\u3001\n\u4e00\u5fdc\u6700\u65b0\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u307f\u305f\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-01 16.18.55.png](https://qiita-image-store.s3.amazonaws.com/0/132627/7c1e7870-4291-257f-0b89-8c7293f000f2.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-01 16.18.55.png\")\n\n\u3061\u306a\u307f\u306b\u3053\u3093\u306a\u3053\u3068\u805e\u304b\u308c\u305f\u3089\u3001\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-01 16.21.25.png](https://qiita-image-store.s3.amazonaws.com/0/132627/e2643a55-ac71-b660-27f7-75b50547dacb.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-01 16.21.25.png\")\n\nAndroidStudio\u3068\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u304c\u3001\n\u9023\u643a\u3057\u3066\u3044\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u306a\u306e\u3067\u3001\u9023\u643a\u3055\u305b\u308b\n\n\u30e1\u30cb\u30e5\u30fc\u306e\n`VCS -> Enable Version Control Integration...`\n\u304b\u3089\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-01 15.52.24.png](https://qiita-image-store.s3.amazonaws.com/0/132627/db507923-fdb6-05be-8d4b-355ca26e058b.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-01 15.52.24.png\")\n\nGit\u3092\u9078\u629e(Git\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408)\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-01 15.53.18.png](https://qiita-image-store.s3.amazonaws.com/0/132627/d772c28c-f01a-b33c-27a2-c2a2c73ae91d.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-01 15.53.18.png\")\n\n## 2. SDK\u3068NDK\u306e\u30d1\u30b9\u3092\u901a\u3059\n\n### SDK\u306e\u30d1\u30b9\u3092\u901a\u3059\n\n`Preferences(\u2318,) -> Appearance & Behavior -> System Settings -> Android SDK`\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-01 22.03.05.png](https://qiita-image-store.s3.amazonaws.com/0/132627/f873f1c8-b5c5-f152-0ba3-4f9a43e34580.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-01 22.03.05.png\")\n\n### NDK\u306e\u30d1\u30b9\u3092\u901a\u3059\n\n`Project Structure(\u2318;) -> SDK Location`\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-01 22.08.18.png](https://qiita-image-store.s3.amazonaws.com/0/132627/44b5a3e8-43b6-516a-71fb-355d1dd9af53.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-01 22.08.18.png\")\n\n## 3. build.gradle\u3092\u7de8\u96c6\u3059\u308b\n\n\u73fe\u72b6\u306ebuild.gradle\u3067\u306fNDK\u306e\u30d3\u30eb\u30c9\u3092\u3084\u3063\u3066\u304f\u308c\u306a\u3044\u305f\u3081\u3001\nAPK\u3092\u30d3\u30eb\u30c9\u3057\u3066\u3082\u52d5\u304b\u306a\u3044\n\n\u305d\u306e\u305f\u3081\u3001build.gradle\u306a\u3044\u3067NDK\u30d3\u30eb\u30c9\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3059\u308b\n\n\u307e\u305f\u3001\u30ea\u30bd\u30fc\u30b9\u3082\u30b3\u30d4\u30fc\u3055\u308c\u306a\u3044\u305f\u3081\u3001\n\u30a2\u30bb\u30c3\u30c8\u30d5\u30a9\u30eb\u30c0\u306b\u30b3\u30d4\u30fc\u3059\u308b\u30bf\u30b9\u30af\u3082\u8ffd\u52a0\u3059\u308b\n\n\u3061\u306a\u307f\u306bNDK\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u30d1\u30b9\u3068\n\u30a2\u30bb\u30c3\u30c8\u306b\u30b3\u30d4\u30fc\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u30d1\u30b9\u306f\n`build-cfg.json`\u304b\u3089\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u305f\u3081\u3001\n\u5909\u66f4\u3059\u308b\u5834\u5408\u306f\u3001\u305d\u3061\u3089\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\n\nbuild-cfg.json\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u4f5c\u3089\u308c\u308b\n(\u304a\u305d\u3089\u304fcocos\u30b3\u30de\u30f3\u30c9\u3067\u4f7f\u7528\u3055\u308c\u308b\uff1f)\n\n``` build.gradle\napply plugin: 'com.android.application'\n\nimport org.apache.tools.ant.taskdefs.condition.Os\nimport groovy.json.JsonSlurper\n\nandroid {\n    compileSdkVersion 22\n    buildToolsVersion \"22.0.1\"\n\n    defaultConfig {\n        applicationId \"org.cocos2dx.GameBase\"\n        minSdkVersion 10\n        targetSdkVersion 22\n        versionCode 1\n        versionName \"1.0\"\n    }\n\n    sourceSets.main {\n        jni.srcDirs = []\n        java.srcDir \"src\"\n        res.srcDir \"res\"\n        jniLibs.srcDir \"libs\"\n        manifest.srcFile \"AndroidManifest.xml\"\n        assets.srcDir \"assets\"\n    }\n\n    signingConfigs {\n\n       release {\n            if (project.hasProperty(\"RELEASE_STORE_FILE\")) {\n                storeFile file(RELEASE_STORE_FILE)\n                storePassword RELEASE_STORE_PASSWORD\n                keyAlias RELEASE_KEY_ALIAS\n                keyPassword RELEASE_KEY_PASSWORD\n            }\n        }\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            if (project.hasProperty(\"RELEASE_STORE_FILE\")) {\n                signingConfig signingConfigs.release\n            }\n        }\n    }\n\n    task createAssets(type: Copy) {\n        def jsonSlurper = new JsonSlurper()\n        def text = new File('build-cfg.json')\n        def root = jsonSlurper.parseText(text.getText())\n\n        root.copy_resources.each { resource ->\n            from (\"$rootDir/\" + resource.from.toString()) {\n                into resource.to.toString()\n            }\n        }\n\n        root.must_copy_resources.each { resource ->\n            from (\"$rootDir/\" + resource.from.toString()) {\n                into resource.to.toString()\n            }\n        }\n\n        into 'assets'\n    }\n\n    task buildNative(type: Exec, dependsOn: createAssets, description: 'Compile JNI source via NDK') {\n        android.applicationVariants.all { variant ->\n            commandLine getNdkBuildCmd(),\n                    \"NDK_OUT=$buildDir/intermediates/ndk/${variant.dirName}/obj\",\n                    \"NDK_LIBS_OUT=$buildDir/intermediates/ndk/${variant.dirName}/lib\",\n                    \"NDK_MODULE_PATH=\" + getNdkModulePath()\n\n            copy {\n                from \"$buildDir/intermediates/ndk/${variant.dirName}/lib\"\n                into \"libs\"\n            }\n        }\n    }\n\n    task cleanNative(type: Exec, description: 'Clean JNI object files') {\n        android.applicationVariants.all { variant ->\n            commandLine getNdkBuildCmd(),\n                    \"NDK_OUT=$buildDir/intermediates/ndk/${variant.dirName}/obj\",\n                    \"NDK_LIBS_OUT=$buildDir/intermediates/ndk/${variant.dirName}/lib\",\n                    \"NDK_MODULE_PATH=\" + getNdkModulePath(),\n                    'clean'\n        }\n    }\n\n    clean.dependsOn 'cleanNative'\n\n    tasks.withType(JavaCompile) {\n        compileTask -> compileTask.dependsOn buildNative\n    }\n\n    lintOptions {\n        abortOnError false\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    compile project(':libcocos2dx')\n}\n\ndef getNdkBuildCmd() {\n    Properties properties = new Properties()\n    properties.load(project.rootProject.file('local.properties').newDataInputStream())\n    def ndkDir = properties.getProperty('ndk.dir', null)\n    if (ndkDir == null) {\n        throw new GradleException(\"NDK location not found. Define location with ndk.dir in local.properties.\")\n    }\n    def ndkBuildCmd = ndkDir + '/ndk-build'\n    if (Os.isFamily(Os.FAMILY_WINDOWS)) {\n        ndkBuildCmd += '.cmd'\n    }\n\n    return ndkBuildCmd\n}\n\ndef getNdkModulePath() {\n    def jsonSlurper = new JsonSlurper()\n    def text = new File('build-cfg.json')\n    def root = jsonSlurper.parseText(text.getText())\n    def ndkModulePath = '.'\n\n    root.ndk_module_path.each { module ->\n        ndkModulePath = \"$ndkModulePath:$rootDir/\" + module\n    }\n\n    return ndkModulePath\n}\n```\n\ngradle\u3092\u7de8\u96c6\u3059\u308b\u3068\u540c\u671f\u3059\u308b\u304b\u805e\u304b\u308c\u308b\u306e\u3067\u3001\n`Sync Now`\u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-02 20.04.04.png](https://qiita-image-store.s3.amazonaws.com/0/132627/1f65b401-bb8c-212c-9677-3dc334cfce11.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-02 20.04.04.png\")\n\n\n## 4. Gradle\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u3053\u306e\u5de5\u7a0b\u304c\u3044\u308b\u304b\u3069\u3046\u304b\u308f\u304b\u3089\u306a\u3044\u3051\u3069\u3001\n\u4e00\u5fdc\u30bf\u30fc\u30df\u30ca\u30eb\u3067gradlew\u3092\u76f4\u63a5\u53e9\u3044\u3066Gradle\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n```\n$ ./gradlew\n```\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-02 19.37.47.png](https://qiita-image-store.s3.amazonaws.com/0/132627/492c936a-5e97-d20b-6f7b-d99f02ed845f.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-02 19.37.47.png\")\n\n## 5. APK\u3092\u30d3\u30eb\u30c9\n\n\u30e1\u30cb\u30e5\u30fc\u306e\n`Build -> Build APK`\n\u304b\u3089APK\u3092\u30d3\u30eb\u30c9\u3059\u308b\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-02 19.43.58.png](https://qiita-image-store.s3.amazonaws.com/0/132627/6d92c858-62ea-ad64-f943-c5859ba91fe5.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-02 19.43.58.png\")\n\n## 6. APK\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nBuild Success\u3057\u305f\u3089\u3001\nadb\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u5b9f\u6a5f\u3082\u3057\u304f\u306f\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n```\n$ adb install -r app/build/outputs/apk/<PROJ_NAME>-Debug.apk\n```\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-02 19.51.46.png](https://qiita-image-store.s3.amazonaws.com/0/132627/076c478e-6400-3c5f-0e0d-a2b3147f8edf.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-02 19.51.46.png\")\n\n## 7. \u5b9f\u884c\n\n\u304a\u306a\u3058\u307f\u306e\u753b\u9762\u304c\u51fa\u305f\u3089\u6210\u529f\n\n![Screenshot_2016-10-02-20-18-01.png](https://qiita-image-store.s3.amazonaws.com/0/132627/b610906d-e561-5b28-d42b-29f7fe5396ce.png \"Screenshot_2016-10-02-20-18-01.png\")\n\n\n# \u6700\u5f8c\u306b\n\n\u904e\u53bb\u306e\u8a18\u4e8b\u3067AndroidStudio\u3092\u3081\u3061\u3083\u53e9\u3044\u305f\u3051\u3069\u3001\n\u5b9f\u969b\u3061\u3083\u3093\u3068\u4f7f\u3063\u3066\u307f\u305f\u3089\u5168\u7136Eclipse\u3068\u6841\u9055\u3044\u307b\u3069\u4f7f\u3044\u3084\u3059\u304b\u3063\u305f\u306e\u3067\u3001\n\u4eca\u307e\u3067\u3061\u3083\u3093\u3068\u89e6\u3089\u306a\u304b\u3063\u305f\u81ea\u5206\u304c\u6065\u305a\u304b\u3057\u3044\n\n[cocos2d-x\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304cAndroid Studio\u30d3\u30eb\u30c9\u3067\u304d\u306a\u3044\u6642\u306e\u5bfe\u51e6](http://qiita.com/tani-shi/items/ef393b9d9911f5185401)\n\n\u3068\u3044\u3046\u304bcocos\u306f\u306a\u305ccocos\u30b3\u30de\u30f3\u30c9\u3067\u30d3\u30eb\u30c9\u3059\u308b\u524d\u63d0\u306b\u306a\u3063\u3066\u3044\u308b\u3093\u3060\uff1f\n\nproj.android-studio\u3063\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u3042\u308b\u306e\u306b\n\u305d\u308c\u3058\u3083\u610f\u5473\u306a\u304f\u306a\u3044\uff1f\n\n\u3068\u308a\u3042\u3048\u305a\u3084\u308a\u65b9\u3092\u3056\u3063\u3068\u66f8\u3044\u305f\u3051\u3069\u3001\n\u306a\u3093\u304b\u8db3\u308a\u306a\u3044\u611f\u3058\u304c\u3059\u308b\u306e\u3067\n\u52d5\u304b\u306a\u304b\u3063\u305f\u3089\u5831\u544a\u306a\u308a\u3001\u8cea\u554f\u3044\u305f\u3060\u3051\u308b\u3068\u52a9\u304b\u308a\u307e\u3059\n"}