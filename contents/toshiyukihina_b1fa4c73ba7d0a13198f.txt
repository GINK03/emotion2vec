{"context": " More than 1 year has passed since last update.\n\nRedis\u3092\u30af\u30e9\u30b9\u30bf\u69cb\u6210\u3067\u52d5\u304b\u3059\n\u69cb\u7bc9\u30e1\u30e2\u306b\u3066\u3002\n\n\u74b0\u5883\n\nUbuntu 14.04\n\n\n\u5b9f\u9a13\nredis-cli\u3067\u3044\u308d\u3044\u308d\u5b9f\u9a13\u3057\u3066\u307f\u308b\u3002\u306a\u304a\u3001redis-cli\u306b\u3001-c\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u306a\u3044\u3068\u3001\u5024\u306e\u8a2d\u5b9a\u3084\u53d6\u5f97\u3067\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002(-c\u306f\u30af\u30e9\u30b9\u30bf\u30e2\u30fc\u30c9\u3002)\n-c\u3092\u3064\u3051\u305a\u306b\u5024\u306e\u8a2d\u5b9a\u3084\u53d6\u5f97\u3092\u884c\u3046\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\n127.0.0.1:7000> set key1 100\n(error) MOVED 9189 127.0.0.1:7001\n127.0.0.1:7000> get key1\n(error) MOVED 9189 127.0.0.1:7001\n\n\nGET/SET\nkey1\u306b\u5024100\u3092\u8a2d\u5b9a\u3057\u3066\u307f\u305f\u3002\nkey1\u306f\u3001\u30cf\u30c3\u30b7\u30e5\u30b9\u30ed\u30c3\u30c89189\u306b\u4fdd\u5b58\u3055\u308c\u305f\u3088\u3046\u3060\u3002Redis\u304c\u81ea\u52d5\u7684\u306b\u632f\u308a\u5206\u3051\u30667001\u306e\u30ce\u30fc\u30c9\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u3066\u3044\u308b\u3002\n127.0.0.1:7000> set key1 100\n-> Redirected to slot [9189] located at 127.0.0.1:7001\nOK\n127.0.0.1:7001> get key1\n\"100\"\n\n\nMGET\n\u4eca\u5ea6\u306f\u3001MGET\u3067\u8907\u6570\u306e\u5024\u3092\u53d6\u5f97\u3057\u3066\u307f\u308b\u3002\n\u307e\u305a\u306f\u65b0\u305f\u306b\u5024key2:200\u3092\u8ffd\u52a0\u3059\u308b\u3002\u3059\u308b\u3068\u3001\u4eca\u5ea6\u306f7000\u306e\u30ce\u30fc\u30c9\u306b\u4fdd\u5b58\u3057\u305f\u3002\n127.0.0.1:7001> set key2 200\n-> Redirected to slot [4998] located at 127.0.0.1:7000\nOK\n127.0.0.1:7000> get key2\n\"200\"\n\n\u3053\u306e\u6642\u70b9\u3067\u3001key1\u306f7001\u306e\u30ce\u30fc\u30c9\u306b\u3001key2\u306e\u30ce\u30fc\u30c9\u306f7000\u306e\u30ce\u30fc\u30c9\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3002\u3053\u306e\u72b6\u614b\u3067\u3001MGET\u3092\u5b9f\u884c\u3057\u3066\u6b63\u5e38\u306b\u53d6\u5f97\u3067\u304d\u308b\u304b\uff1f\n\u5b9f\u884c\u3057\u3066\u307f\u308b\u3068\u3001\u30b9\u30ed\u30c3\u30c8\u3092\u8de8\u3044\u3067\u53d6\u5f97\u3059\u308b\u3053\u3068\u306f\u51fa\u6765\u306a\u3044\u3002\n127.0.0.1:7001> mget key1 key2\n(error) CROSSSLOT Keys in request don't hash to the same slot\n\n\u3067\u306f\u3001\u3069\u306e\u3088\u3046\u306b\u3059\u308c\u3070MGET\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308b\u304b\uff1f\u3053\u3053\u3067\u3001\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u306e\u51fa\u756a\u3002\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u3068\u306f\u3001\u30ad\u30fc\u306b{foo}\u306e\u3088\u3046\u306b\u30d6\u30e9\u30b1\u30c3\u30c8\u3067\u56f2\u3093\u3060\u6587\u5b57\u5217\u3092\u4ed8\u4e0e\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u540c\u3058\u30cf\u30c3\u30b7\u30e5\u30b9\u30ed\u30c3\u30c8\u306b\u5272\u308a\u5f53\u3066\u308b\u6a5f\u80fd\u3067\u3042\u308b\u3002\n\u3067\u306f\u5b9f\u969b\u306b\u3084\u3063\u3066\u307f\u308b\u3068\u3069\u3046\u306a\u308b\u304b\uff1f\u4ee5\u4e0b\u306f\u3001{tag}\u3068\u3044\u3046\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u3092\u3001key1/key2\u306b\u4ed8\u4e0e\u3057\u3066MGET\u3057\u3066\u307f\u308b\u3002\n\u6b63\u5e38\u306b\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3042\u308b\u3002\n127.0.0.1:7001> set {tag}key1 1000\nOK\n127.0.0.1:7001> get {tag}key1\n\"1000\"\n127.0.0.1:7001> set {tag}key2 2000\nOK\n127.0.0.1:7001> get {tag}key2\n\"2000\"\n127.0.0.1:7001> mget {tag}key1 {tag}key2\n1) \"1000\"\n2) \"2000\"\n\n\u3067\u306f\u3001\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0{tag}\u3092\u4ed8\u4e0e\u3057\u305f\u5024\u304c\u4fdd\u5b58\u3055\u308c\u305f\u30ce\u30fc\u30c9\u306f7001\u3067\u3042\u308b\u304c\u30017000\u306e\u30ce\u30fc\u30c9\u3067\u3001{tag}\u3092\u4ed8\u4e0e\u3057\u305f\u5024\u3092SET\u3059\u308b\u3068\u3069\u3046\u306a\u308b\u304b\uff1f\n7001\u306e\u30ce\u30fc\u30c9\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u305f\u5f8c\u3001SET\u3057\u3066\u304f\u308c\u3066\u3044\u308b\u3002\n127.0.0.1:7000> set {tag}key3 3000\n-> Redirected to slot [8338] located at 127.0.0.1:7001\nOK\n\n\u3053\u306e\u3088\u3046\u306b\u3001\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u3092\u4ed8\u4e0e\u3057\u305f\u5024\u306f\u3001\u540c\u3058\u30ce\u30fc\u30c9\u306b\u5bfe\u3057\u3066SET\u3057\u3066\u304f\u308c\u308b\u3053\u3068\u304c\u308f\u304b\u3063\u305f\u3002\nMGET\u306a\u3069\u306e\u3088\u3046\u306b\u3001\u8907\u6570\u306e\u30ad\u30fc\u306b\u5bfe\u3057\u3066\u4f55\u304b\u3092\u884c\u3046\u3088\u3046\u306a\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u5834\u5408\u306f\u3001\u4e88\u3081\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u3092\u8003\u616e\u3057\u3066\u8a2d\u8a08\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3060\u3002\n\nPub/Sub\n\n\u540c\u3058\u30ce\u30fc\u30c9\u3067Pub/Sub\n\u307e\u305a\u306f\u7c21\u5358\u306b\u3001\u540c\u4e00\u30ce\u30fc\u30c9\u306b\u63a5\u7d9a\u3057\u305fPublisher\u3068Subscriber\u3067\u6b63\u5e38\u306b\u52d5\u4f5c\u3059\u308b\u304b\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3002\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u30922\u3064\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u7acb\u3061\u4e0a\u3052\u5b9f\u884c\u3059\u308b\u3002\n\nSubscriber\n\n127.0.0.1:7000> SUBSCRIBE 'channel:7000'\nReading messages... (press Ctrl-C to quit)\n1) \"subscribe\"\n2) \"channel:7000\"\n3) (integer) 1\n\n\nPublisher\n\n127.0.0.1:7000> PUBLISH 'channel:7000' 'Hello from 7000'\n(integer) 1\n\n\u7d50\u679c\u3001Subscriber\u306b\u6b63\u5e38\u306b\u901a\u77e5\u3055\u308c\u305f\u3002\n127.0.0.1:7000> SUBSCRIBE 'channel:7000'\n    \u2026 (snip) \u2026\n1) \"message\"\n2) \"channel:7000\"\n3) \"Hello from 7000\"\n\n\n\u7570\u306a\u308b\u30ce\u30fc\u30c9\u3067Pub/Sub\n\u4eca\u5ea6\u306f\u3001Publisher\u3092\u7570\u306a\u308b\u30ce\u30fc\u30c9\u306b\u63a5\u7d9a\u3057\u3001Publish\u3057\u3066\u307f\u308b\u3002\n127.0.0.1:7001> PUBLISH 'channel:7000' 'Hello from 7001'\n(integer) 0\n127.0.0.1:7001>\n\n\u7d50\u679c\u3001Subscriber\u306b\u6b63\u5e38\u306b\u901a\u77e5\u3055\u308c\u305f\u3002\n127.0.0.1:7000> SUBSCRIBE 'channel:7000'\n    \u2026 (snip) \u2026\n1) \"message\"\n2) \"channel:7000\"\n3) \"Hello from 7001\"\n\n\nPub\u3092Slave\u306b\u63a5\u7d9a\u3057\u3066Pub/Sub\n\u4eca\u5ea6\u306f\u3001Publisher\u3092\u30b9\u30ec\u30fc\u30d6\u306b\u63a5\u7d9a\u3057\u3066Publish\u3057\u3066\u307f\u308b\u3002\n127.0.0.1:7004> PUBLISH 'channel:7000' 'Hello from 7004'\n(integer) 0\n\n\u7d50\u679c\u3001Subscriber\u306b\u6b63\u5e38\u306b\u901a\u77e5\u3055\u308c\u305f\u3002\n127.0.0.1:7000> SUBSCRIBE 'channel:7000'\n    \u2026 (snip) \u2026\n1) \"message\"\n2) \"channel:7000\"\n3) \"Hello from 7004\"\n\n\n\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30c1\u30e3\u30cd\u30eb\u4e00\u89a7\u306e\u53d6\u5f97\nPUBSUB CHANNELS [pattern]\u3067\u3001\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30c1\u30e3\u30cd\u30eb\u4e00\u89a7\u3092\u53d6\u5f97\u3067\u304d\u308b\u304c\u3001\u30af\u30e9\u30b9\u30bf\u74b0\u5883\u3067\u53d6\u5f97\u53ef\u80fd\u304b\u78ba\u304b\u3081\u308b\u3002\nSubscriber\u306f\u30017000\u3067\u30c1\u30e3\u30cd\u30ebchannel:7000\u3092Subscribe\u3057\u3066\u3044\u308b\u72b6\u614b\u3067\u3042\u308b\u3002\n127.0.0.1:7000> SUBSCRIBE 'channel:7000'\nReading messages... (press Ctrl-C to quit)\n1) \"subscribe\"\n2) \"channel:7000\"\n3) (integer) 1\n\n\u307e\u305a\u306f\u540c\u3058\u30ce\u30fc\u30c9\u304b\u3089\u3002\u6b63\u5e38\u306b\u53d6\u5f97\u3067\u304d\u305f\u3002\n127.0.0.1:7000> PUBSUB CHANNELS 'channel:7000'\n1) \"channel:7000\"\n\n\u6b21\u306b\u3001\u7570\u306a\u308b\u30ce\u30fc\u30c97001\u304b\u3089\u3002\u53d6\u5f97\u3067\u304d\u306a\u3044\u3002\n\u3069\u3046\u3084\u3089\u3001PUBSUB CHANNELS\u306f\u3001Pub\u3068Sub\u304c\u7570\u306a\u308b\u30ce\u30fc\u30c9\u306e\u5834\u5408\u3001\u671f\u5f85\u901a\u308a\u306b\u52d5\u4f5c\u3057\u306a\u3044\u3088\u3046\u3060\u3002\n127.0.0.1:7001> PUBSUB CHANNELS 'channel:7000'\n(empty list or set)\n\n\u3061\u306a\u307f\u306b\u3001\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u3092\u3064\u3051\u3066\u3082\u7121\u99c4\u3067\u3042\u308b\u3002\n\n\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30c1\u30e3\u30cd\u30eb\u6570\u306e\u53d6\u5f97\nPUBSUB NUMSUB [channel]\u3067\u3001\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30c1\u30e3\u30cd\u30eb\u6570\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u304c\u3001\u30af\u30e9\u30b9\u30bf\u74b0\u5883\u3067\u6b63\u5e38\u306b\u52d5\u4f5c\u3059\u308b\u304b\u8a66\u3059\u3002PUBSUB CHANNELS\u306e\u5834\u5408\u3068\u540c\u69d8\u30017000\u306e\u30ce\u30fc\u30c9\u3067SUB\u3057\u3066\u3044\u308b\u72b6\u614b\u3067\u8a66\u3057\u305f\u3002\n\u307e\u305a\u306f\u540c\u3058\u30ce\u30fc\u30c9\u304b\u3089\u3002\u6b63\u5e38\u306b\u53d6\u5f97\u3067\u304d\u305f\u3002\n127.0.0.1:7000> PUBSUB NUMSUB 'channel:7000'\n1) \"channel:7000\"\n2) (integer) 1\n\n\u6b21\u306b\u3001\u7570\u306a\u308b\u30ce\u30fc\u30c9\u304b\u3089\u3002\u53d6\u5f97\u3067\u304d\u306a\u3044\u3002\n127.0.0.1:7001> PUBSUB NUMSUB 'channel:7000'\n1) \"channel:7000\"\n2) (integer) 0\n\n\u3061\u306a\u307f\u306b\u3001\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u3092\u3064\u3051\u3066\u3082\u7121\u99c4\u3067\u3042\u308b\u3002\n\n## Redis\u3092\u30af\u30e9\u30b9\u30bf\u69cb\u6210\u3067\u52d5\u304b\u3059\n\n[\u69cb\u7bc9\u30e1\u30e2](http://qiita.com/toshiyukihina/private/3fc090912ba32f77ac0a)\u306b\u3066\u3002\n\n## \u74b0\u5883\n\n* Ubuntu 14.04\n\n## \u5b9f\u9a13\n\n`redis-cli`\u3067\u3044\u308d\u3044\u308d\u5b9f\u9a13\u3057\u3066\u307f\u308b\u3002\u306a\u304a\u3001`redis-cli`\u306b\u3001`-c`\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u306a\u3044\u3068\u3001\u5024\u306e\u8a2d\u5b9a\u3084\u53d6\u5f97\u3067\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002(`-c`\u306f\u30af\u30e9\u30b9\u30bf\u30e2\u30fc\u30c9\u3002)\n`-c`\u3092\u3064\u3051\u305a\u306b\u5024\u306e\u8a2d\u5b9a\u3084\u53d6\u5f97\u3092\u884c\u3046\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\n\n```bash\n127.0.0.1:7000> set key1 100\n(error) MOVED 9189 127.0.0.1:7001\n127.0.0.1:7000> get key1\n(error) MOVED 9189 127.0.0.1:7001\n```\n\n### GET/SET\n\n`key1`\u306b\u5024`100`\u3092\u8a2d\u5b9a\u3057\u3066\u307f\u305f\u3002\n`key1`\u306f\u3001\u30cf\u30c3\u30b7\u30e5\u30b9\u30ed\u30c3\u30c89189\u306b\u4fdd\u5b58\u3055\u308c\u305f\u3088\u3046\u3060\u3002Redis\u304c\u81ea\u52d5\u7684\u306b\u632f\u308a\u5206\u3051\u3066`7001`\u306e\u30ce\u30fc\u30c9\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u3066\u3044\u308b\u3002\n\n```bash\n127.0.0.1:7000> set key1 100\n-> Redirected to slot [9189] located at 127.0.0.1:7001\nOK\n127.0.0.1:7001> get key1\n\"100\"\n```\n\n### MGET\n\n\u4eca\u5ea6\u306f\u3001`MGET`\u3067\u8907\u6570\u306e\u5024\u3092\u53d6\u5f97\u3057\u3066\u307f\u308b\u3002\n\u307e\u305a\u306f\u65b0\u305f\u306b\u5024`key2:200`\u3092\u8ffd\u52a0\u3059\u308b\u3002\u3059\u308b\u3068\u3001\u4eca\u5ea6\u306f`7000`\u306e\u30ce\u30fc\u30c9\u306b\u4fdd\u5b58\u3057\u305f\u3002\n\n```bash\n127.0.0.1:7001> set key2 200\n-> Redirected to slot [4998] located at 127.0.0.1:7000\nOK\n127.0.0.1:7000> get key2\n\"200\"\n```\n\n\u3053\u306e\u6642\u70b9\u3067\u3001`key1`\u306f`7001`\u306e\u30ce\u30fc\u30c9\u306b\u3001`key2`\u306e\u30ce\u30fc\u30c9\u306f`7000`\u306e\u30ce\u30fc\u30c9\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3002\u3053\u306e\u72b6\u614b\u3067\u3001`MGET`\u3092\u5b9f\u884c\u3057\u3066\u6b63\u5e38\u306b\u53d6\u5f97\u3067\u304d\u308b\u304b\uff1f\n\u5b9f\u884c\u3057\u3066\u307f\u308b\u3068\u3001\u30b9\u30ed\u30c3\u30c8\u3092\u8de8\u3044\u3067\u53d6\u5f97\u3059\u308b\u3053\u3068\u306f\u51fa\u6765\u306a\u3044\u3002\n\n```bash\n127.0.0.1:7001> mget key1 key2\n(error) CROSSSLOT Keys in request don't hash to the same slot\n```\n\n\u3067\u306f\u3001\u3069\u306e\u3088\u3046\u306b\u3059\u308c\u3070MGET\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308b\u304b\uff1f\u3053\u3053\u3067\u3001`\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0`\u306e\u51fa\u756a\u3002`\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0`\u3068\u306f\u3001\u30ad\u30fc\u306b`{foo}`\u306e\u3088\u3046\u306b\u30d6\u30e9\u30b1\u30c3\u30c8\u3067\u56f2\u3093\u3060\u6587\u5b57\u5217\u3092\u4ed8\u4e0e\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u540c\u3058\u30cf\u30c3\u30b7\u30e5\u30b9\u30ed\u30c3\u30c8\u306b\u5272\u308a\u5f53\u3066\u308b\u6a5f\u80fd\u3067\u3042\u308b\u3002\n\n\u3067\u306f\u5b9f\u969b\u306b\u3084\u3063\u3066\u307f\u308b\u3068\u3069\u3046\u306a\u308b\u304b\uff1f\u4ee5\u4e0b\u306f\u3001`{tag}`\u3068\u3044\u3046\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u3092\u3001`key1`/`key2`\u306b\u4ed8\u4e0e\u3057\u3066`MGET`\u3057\u3066\u307f\u308b\u3002\n\u6b63\u5e38\u306b\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3042\u308b\u3002\n\n```bash\n127.0.0.1:7001> set {tag}key1 1000\nOK\n127.0.0.1:7001> get {tag}key1\n\"1000\"\n127.0.0.1:7001> set {tag}key2 2000\nOK\n127.0.0.1:7001> get {tag}key2\n\"2000\"\n127.0.0.1:7001> mget {tag}key1 {tag}key2\n1) \"1000\"\n2) \"2000\"\n```\n\n\u3067\u306f\u3001\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0`{tag}`\u3092\u4ed8\u4e0e\u3057\u305f\u5024\u304c\u4fdd\u5b58\u3055\u308c\u305f\u30ce\u30fc\u30c9\u306f`7001`\u3067\u3042\u308b\u304c\u3001`7000`\u306e\u30ce\u30fc\u30c9\u3067\u3001`{tag}`\u3092\u4ed8\u4e0e\u3057\u305f\u5024\u3092SET\u3059\u308b\u3068\u3069\u3046\u306a\u308b\u304b\uff1f\n`7001`\u306e\u30ce\u30fc\u30c9\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u305f\u5f8c\u3001SET\u3057\u3066\u304f\u308c\u3066\u3044\u308b\u3002\n\n```\n127.0.0.1:7000> set {tag}key3 3000\n-> Redirected to slot [8338] located at 127.0.0.1:7001\nOK\n```\n\n\u3053\u306e\u3088\u3046\u306b\u3001\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u3092\u4ed8\u4e0e\u3057\u305f\u5024\u306f\u3001\u540c\u3058\u30ce\u30fc\u30c9\u306b\u5bfe\u3057\u3066SET\u3057\u3066\u304f\u308c\u308b\u3053\u3068\u304c\u308f\u304b\u3063\u305f\u3002\n`MGET`\u306a\u3069\u306e\u3088\u3046\u306b\u3001\u8907\u6570\u306e\u30ad\u30fc\u306b\u5bfe\u3057\u3066\u4f55\u304b\u3092\u884c\u3046\u3088\u3046\u306a\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u5834\u5408\u306f\u3001\u4e88\u3081\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u3092\u8003\u616e\u3057\u3066\u8a2d\u8a08\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3060\u3002\n\n### Pub/Sub\n\n#### \u540c\u3058\u30ce\u30fc\u30c9\u3067Pub/Sub\n\n\u307e\u305a\u306f\u7c21\u5358\u306b\u3001\u540c\u4e00\u30ce\u30fc\u30c9\u306b\u63a5\u7d9a\u3057\u305fPublisher\u3068Subscriber\u3067\u6b63\u5e38\u306b\u52d5\u4f5c\u3059\u308b\u304b\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3002\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u30922\u3064\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u7acb\u3061\u4e0a\u3052\u5b9f\u884c\u3059\u308b\u3002\n\n* Subscriber\n\n```bash\n127.0.0.1:7000> SUBSCRIBE 'channel:7000'\nReading messages... (press Ctrl-C to quit)\n1) \"subscribe\"\n2) \"channel:7000\"\n3) (integer) 1\n```\n\n* Publisher\n\n```bash\n127.0.0.1:7000> PUBLISH 'channel:7000' 'Hello from 7000'\n(integer) 1\n```\n\n\u7d50\u679c\u3001Subscriber\u306b\u6b63\u5e38\u306b\u901a\u77e5\u3055\u308c\u305f\u3002\n\n```bash\n127.0.0.1:7000> SUBSCRIBE 'channel:7000'\n\t\u2026 (snip) \u2026\n1) \"message\"\n2) \"channel:7000\"\n3) \"Hello from 7000\"\n```\n\n#### \u7570\u306a\u308b\u30ce\u30fc\u30c9\u3067Pub/Sub\n\n\u4eca\u5ea6\u306f\u3001Publisher\u3092\u7570\u306a\u308b\u30ce\u30fc\u30c9\u306b\u63a5\u7d9a\u3057\u3001Publish\u3057\u3066\u307f\u308b\u3002\n\n```bash\n127.0.0.1:7001> PUBLISH 'channel:7000' 'Hello from 7001'\n(integer) 0\n127.0.0.1:7001>\n```\n\n\u7d50\u679c\u3001Subscriber\u306b\u6b63\u5e38\u306b\u901a\u77e5\u3055\u308c\u305f\u3002\n\n```bash\n127.0.0.1:7000> SUBSCRIBE 'channel:7000'\n\t\u2026 (snip) \u2026\n1) \"message\"\n2) \"channel:7000\"\n3) \"Hello from 7001\"\n```\n\n#### Pub\u3092Slave\u306b\u63a5\u7d9a\u3057\u3066Pub/Sub\n\n\u4eca\u5ea6\u306f\u3001Publisher\u3092\u30b9\u30ec\u30fc\u30d6\u306b\u63a5\u7d9a\u3057\u3066Publish\u3057\u3066\u307f\u308b\u3002\n\n```bash\n127.0.0.1:7004> PUBLISH 'channel:7000' 'Hello from 7004'\n(integer) 0\n```\n\n\u7d50\u679c\u3001Subscriber\u306b\u6b63\u5e38\u306b\u901a\u77e5\u3055\u308c\u305f\u3002\n\n```bash\n127.0.0.1:7000> SUBSCRIBE 'channel:7000'\n\t\u2026 (snip) \u2026\n1) \"message\"\n2) \"channel:7000\"\n3) \"Hello from 7004\"\n```\n\n#### \u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30c1\u30e3\u30cd\u30eb\u4e00\u89a7\u306e\u53d6\u5f97\n\n`PUBSUB CHANNELS [pattern]`\u3067\u3001\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30c1\u30e3\u30cd\u30eb\u4e00\u89a7\u3092\u53d6\u5f97\u3067\u304d\u308b\u304c\u3001\u30af\u30e9\u30b9\u30bf\u74b0\u5883\u3067\u53d6\u5f97\u53ef\u80fd\u304b\u78ba\u304b\u3081\u308b\u3002\nSubscriber\u306f\u3001`7000`\u3067\u30c1\u30e3\u30cd\u30eb`channel:7000`\u3092Subscribe\u3057\u3066\u3044\u308b\u72b6\u614b\u3067\u3042\u308b\u3002\n\n```bash\n127.0.0.1:7000> SUBSCRIBE 'channel:7000'\nReading messages... (press Ctrl-C to quit)\n1) \"subscribe\"\n2) \"channel:7000\"\n3) (integer) 1\n```\n\n\u307e\u305a\u306f\u540c\u3058\u30ce\u30fc\u30c9\u304b\u3089\u3002\u6b63\u5e38\u306b\u53d6\u5f97\u3067\u304d\u305f\u3002\n\n```bash\n127.0.0.1:7000> PUBSUB CHANNELS 'channel:7000'\n1) \"channel:7000\"\n```\n\n\u6b21\u306b\u3001\u7570\u306a\u308b\u30ce\u30fc\u30c9`7001`\u304b\u3089\u3002\u53d6\u5f97\u3067\u304d\u306a\u3044\u3002\n\u3069\u3046\u3084\u3089\u3001`PUBSUB CHANNELS`\u306f\u3001Pub\u3068Sub\u304c\u7570\u306a\u308b\u30ce\u30fc\u30c9\u306e\u5834\u5408\u3001\u671f\u5f85\u901a\u308a\u306b\u52d5\u4f5c\u3057\u306a\u3044\u3088\u3046\u3060\u3002\n\n```bash\n127.0.0.1:7001> PUBSUB CHANNELS 'channel:7000'\n(empty list or set)\n```\n\n\u3061\u306a\u307f\u306b\u3001\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u3092\u3064\u3051\u3066\u3082\u7121\u99c4\u3067\u3042\u308b\u3002\n\n#### \u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30c1\u30e3\u30cd\u30eb\u6570\u306e\u53d6\u5f97\n\n`PUBSUB NUMSUB [channel]`\u3067\u3001\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u30c1\u30e3\u30cd\u30eb\u6570\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u304c\u3001\u30af\u30e9\u30b9\u30bf\u74b0\u5883\u3067\u6b63\u5e38\u306b\u52d5\u4f5c\u3059\u308b\u304b\u8a66\u3059\u3002`PUBSUB CHANNELS`\u306e\u5834\u5408\u3068\u540c\u69d8\u3001`7000`\u306e\u30ce\u30fc\u30c9\u3067SUB\u3057\u3066\u3044\u308b\u72b6\u614b\u3067\u8a66\u3057\u305f\u3002\n\n\u307e\u305a\u306f\u540c\u3058\u30ce\u30fc\u30c9\u304b\u3089\u3002\u6b63\u5e38\u306b\u53d6\u5f97\u3067\u304d\u305f\u3002\n\n```bash\n127.0.0.1:7000> PUBSUB NUMSUB 'channel:7000'\n1) \"channel:7000\"\n2) (integer) 1\n```\n\n\u6b21\u306b\u3001\u7570\u306a\u308b\u30ce\u30fc\u30c9\u304b\u3089\u3002\u53d6\u5f97\u3067\u304d\u306a\u3044\u3002\n\n```bash\n127.0.0.1:7001> PUBSUB NUMSUB 'channel:7000'\n1) \"channel:7000\"\n2) (integer) 0\n```\n\n\u3061\u306a\u307f\u306b\u3001\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u3092\u3064\u3051\u3066\u3082\u7121\u99c4\u3067\u3042\u308b\u3002\n\n", "tags": ["Redis", "Cluster"]}