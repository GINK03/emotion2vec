{"context": "\n\n\u307e\u305a\u521d\u3081\u306b\n\u3053\u306e\u8a18\u4e8b\u306f\u3001\n\nminecraft\u5927\u597d\u304d\n\u5bb6\u3067\u30b5\u30fc\u30d0\u30fc\u3092\u52d5\u304b\u3057\u305f\u304f\u306a\u3044\n\u304b\u3068\u3044\u3063\u3066\u3001VPS\u3092\u6708\u6975\u3067\u501f\u308a\u308b\u306e\u306f\u9ad8\u3044\n\u305d\u3082\u305d\u308224\u6642\u9593\u904a\u3093\u3067\u308b\u308f\u3051\u3058\u3083\u306a\u3044\n\n\u306a\u3069\u306e\u7406\u7531\u3067\u3001\u6642\u9593\u501f\u308a\u3057\u305f\u3044\u4eba\u306b\u304a\u3059\u3059\u3081\u3067\u3059\u3002\n\u3057\u304b\u3057\u3001\u5927\u534a\u306eVPS\u306f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u524a\u9664\u3057\u306a\u3051\u308c\u3070\u8ab2\u91d1\u304c\u6b62\u307e\u308a\u307e\u305b\u3093\u3002\n\u3053\u308c\u3067\u306f\u3001\u8ab0\u3082\u63a5\u7d9a\u3057\u3066\u3044\u306a\u3044\u6642\u9593\u3082\u8ab2\u91d1\u3055\u308c\u3066\u3082\u3063\u305f\u3044\u306a\u3044\u3067\u3059\u3002\n\u305d\u3053\u3067\u3001\u4f7f\u3063\u3066\u306a\u3044\u3068\u304d\u306f\u524a\u9664\u3057\u3066\u3001\u904a\u3073\u305f\u3044\u3068\u304d\u306b\u7c21\u5358\u306b\u5fa9\u65e7\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\nVPS\u306e\u9078\u5b9a\n\nAWS\u306f\u30e1\u30e2\u30ea\u306e\u5927\u304d\u306a\u30d7\u30e9\u30f3\u306f\u9ad8\u3044\nGCP\u306f\u3082\u3063\u3068\u9ad8\u3044\nIDCF\u306f(ry\n\n\u306e\u3067\u3001\u5019\u88dc\u3068\u3057\u3066\n\nDigitalOcean\n\u3053\u306e\u306f\nvultr\n\n\u304c\u4e0a\u304c\u308a\u3001\n\n\u30e1\u30e2\u30ea\u306e\u5927\u304d\u306a\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u5b89\u3044\n\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u304c\u3042\u308b\n\u7121\u6599\u67a0\u304c\u3042\u308b\n\n\u3068\u3044\u3046\u70b9\u304b\u3089\u3001vultr\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u6d77\u5916VPS\u306eVULTR\u3067CoreOS\u3092\u52d5\u304b\u3057\u3066\u307f\u305f by @ta_kousuke http://qiita.com/koh-taka@github/items/36ffbbfd7d1145a80972\n\n\u4e0a\u8a18\u306e\u8a18\u4e8b\u306b\u5023\u3063\u3066\u3001\u79c1\u3082\u30ea\u30f3\u30af\u8cbc\u3063\u3066\u304a\u304d\u307e\u3059\u3002\nhttp://www.vultr.com/?ref=7109367-3B\n20\u30c9\u30eb\u306e\u7121\u6599\u67a0\u304c\u3082\u3089\u3048\u308b\u3089\u3057\u3044\u3067\u3059\u3088\uff01\n\u5f8c\u8ff0\u306e\u8a2d\u5b9a\u3060\u3068\u3001\u4e00\u6642\u95930.08\u30c9\u30eb\uff5e0.23\u30c9\u30eb\u306a\u306e\u3067\u5272\u3068\u904a\u3079\u3061\u3083\u3044\u307e\u3059\u3002\n\n\u524d\u63d0\u6761\u4ef6\n\u307e\u305a\u3001\u3044\u304f\u3064\u304b\u5fc5\u8981\u306a\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30ed\u30fc\u30ab\u30eb\u3067\u52d5\u3044\u3066\u308bMinecraft\u30b5\u30fc\u30d0\u30fc\nSSH\u3067rsync\u3067\u304d\u308b\u30b5\u30fc\u30d0\u30fc\u3068\u305d\u306e\u79d8\u5bc6\u9375\nhttp\u3067zip\u304c\u914d\u4fe1\u3067\u304d\u308b\u4e8b\n\n\u307e\u305a\u3001\u30ed\u30fc\u30ab\u30eb\u3067Minecraft\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3057\u3001\u30ef\u30fc\u30eb\u30c9\u3092\u751f\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u6b21\u306b\u3001ssh\u3067rsync\u3067\u304d\u308b\u30b5\u30fc\u30d0\u30fc\u3092\u7528\u610f\u3057\u3001\u79d8\u5bc6\u9375\u3092\u767b\u9332\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nhttp://yanor.net/wiki/?UNIX%2Frsync%2Frsync%E5%B0%82%E7%94%A8%E3%81%AE%E7%A7%98%E5%AF%86%E9%8D%B5%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%82%B5%E3%83%BC%E3%83%90%E9%96%93%E3%81%A7rsync%E3%81%99%E3%82%8B\n\u79c1\u306f\u3001\u3053\u3053\u3092\u53c2\u8003\u306bSSH\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\u307e\u305f\u3001/home/hoge/save-201702\u306a\u3069\u3092\u4f5c\u6210\u3057\u3066\u304a\u304d\u3001\u305d\u306e\u4e2d\u306b\u30b5\u30fc\u30d0\u30fc\u306e\u30ef\u30fc\u30eb\u30c9\u3092\u7a81\u3063\u8fbc\u3093\u3067\u304a\u304d\u307e\u3059\u3002\n\u6700\u5f8c\u306b\u3001\u30ed\u30fc\u30ab\u30eb\u3067\u52d5\u3044\u3066\u308b\u30b5\u30fc\u30d0\u30fc\u3092zip\u3067\u5727\u7e2e\u3057\u307e\u3059\u3002\n\u3053\u306e\u6642\u3001\u30ef\u30fc\u30eb\u30c9\u306e\u5165\u3063\u3066\u3044\u308b\u30d5\u30a9\u30eb\u30c0\uff08\u4eca\u56de\u306fsave\u30d5\u30a9\u30eb\u30c0)\u3092\u542b\u307e\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u305d\u3057\u3066\u305d\u306ezip\u3092http\u3067vultr\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u7bc4\u56f2\u306b\u7f6e\u3044\u3066\u304a\u304d\u307e\u3059\u3002\n\u79c1\u306f\u3001\u3055\u304f\u3089VPS\u306b\u7f6e\u3044\u3066\u3044\u307e\u3059\u304c\u3001vultr\u306e\u6700\u5c0f\u69cb\u6210(\u67085\u30c9\u30eb)\u306b\u7f6e\u304f\u306e\u3082\u3042\u308a\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\u30b9\u30bf\u30fc\u30c8\u30a2\u30c3\u30d7\u30b9\u30af\u30ea\u30d7\u30c8\nvultr\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3059\u308b\u969b\u306b\u6307\u5b9a\u3067\u304d\u308b\u3001\u30b9\u30bf\u30fc\u30c8\u30a2\u30c3\u30d7\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f7f\u3044\u3001\u8a2d\u5b9a\u304b\u3089\u8d77\u52d5\u307e\u3067\u3084\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\nUbuntu\u306e16.10 x64\u3092\u4f7f\u3046\u3053\u3068\u3092\u524d\u63d0\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u3042\u3068\u3001\u3081\u3093\u3069\u304f\u3055\u3044\u306e\u3067root\u3067\u52d5\u304b\u3057\u3066\u307e\u3059\u3002\u9069\u5b9c\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u6bce\u56de\u6d88\u3059\u304b\u3089\u3044\u3044\u3088\u306d\uff08\u3000\uff3e\u03c9\uff3e\uff09\u30fb\u30fb\u30fb\n\u624b\u9806\u306f\n\napt\u3067jdk\u3068unzip\u3092\u5c0e\u5165\n\u30b5\u30fc\u30d0\u30fc\u672c\u4f53\u3092wget\u3057\u3066\u914d\u7f6e\nramdisk\u3092\u7528\u610f\nrsync\u7528\u306e\u30ab\u30ae\u3092\u7528\u610f\nrsync\u3067\u6700\u65b0\u306e\u30ef\u30fc\u30eb\u30c9\u3092\u53d6\u5f97\n\u5b9a\u671f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u8a2d\u5b9a\n\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u767b\u9332\n\u8d77\u52d5\n\n\u3068\u306a\u308a\u307e\u3059\u3002\n\napt\u3067jdk\u3068unzip\u3092\u5c0e\u5165\napt update\napt install default-jre unzip -y\n\n\u8aac\u660e\u3059\u308b\u307e\u3067\u3082\u7121\u3044\u3067\u3057\u3087\u3046\n\n\u30b5\u30fc\u30d0\u30fc\u672c\u4f53\u3092wget\u3057\u3066\u914d\u7f6e\nwget https://hoge.net/minecraft/minecraft.zip -O /root/minecraft.zip\nunzip /root/minecraft.zip -d /root\n\n/root/minecraft/minecraft/\n\u3068\u306a\u3089\u306a\u3044\u3088\u3046\u3001\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nramdisk\u3092\u7528\u610f\nmkdir /mnt/ramdisk\nchmod 775 /mnt/ramdisk\nchown ${USER} /mnt/ramdisk\nmount -t tmpfs -o size=1g tmpfs /mnt/ramdisk\n\nramdisk\u30921GB\u7528\u610f\u3057\u3066\u3044\u307e\u3059\u3002\n\u8db3\u308a\u306a\u3051\u308c\u3070\u5897\u3084\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nrsync\u7528\u306e\u30ab\u30ae\u3092\u7528\u610f\nmkdir -p /root/.ssh\nchmod 600 /root/.ssh\n\n#\u53d6\u5f97\u7528\u79d8\u5bc6\u9375\necho \"-----BEGIN RSA PRIVATE KEY-----\nhoge\n-----END RSA PRIVATE KEY-----\" > /root/.ssh/id_rsa_for_restore\n\n#\u66f4\u65b0\u7528\u79d8\u5bc6\u9375\necho \"-----BEGIN RSA PRIVATE KEY-----\nfuga\n-----END RSA PRIVATE KEY-----\" > /root/.ssh/id_rsa_for_backup\n\nchmod 600 /root/.ssh/id*\n\nrsync\u3057\u304b\u8a31\u53ef\u3057\u306a\u3044ssh\u306e\u90fd\u5408\u4e0a\u3001\u30b3\u30de\u30f3\u30c9\u6bce\u306b\u9375\u304c\u5fc5\u8981\u3067\u3057\u305f\u3002\n\nrsync\u3067\u6700\u65b0\u306e\u30ef\u30fc\u30eb\u30c9\u3092\u53d6\u5f97\nrsync -azvv -e 'ssh -i /root/.ssh/id_rsa_for_restore -o \"StrictHostKeyChecking no\"' minesync@hoge.net:/home/minesync/save-201702 /mnt/ramdisk\nln -s /mnt/ramdisk/save-201702 /root/minecraft/save\n\n\u4eca\u56de\u306f\u30ef\u30fc\u30eb\u30c9\u3092\u4fdd\u7ba1\u3059\u308b\u30b5\u30fc\u30d0\u30fc\u5074\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3092minesync\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u5b9a\u671f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u8a2d\u5b9a\ncat <<EOS > /root/minecraft/save.sh\nservice minecraft command save-all\nsleep 10s\nrsync -azvv -e 'ssh -i /root/.ssh/id_rsa_for_backup -o \"StrictHostKeyChecking no\"' /mnt/ramdisk/save-201702 minesync@hoge.net:/home/minesync\nEOS\nchmod +x /root/minecraft/save.sh\n(crontab -l 2>/dev/null; echo \"*/5 * * * * /root/minecraft/save.sh > /dev/null 2>&1\") | crontab -\n\n5\u5206\u3054\u3068\u306b\u81ea\u52d5\u30bb\u30fc\u30d6\u3057\u3001rsync\u3067\u540c\u671f\u3057\u3066\u307e\u3059\u3002\n\n\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u767b\u9332\ncat <<'EOF' > /etc/init.d/minecraft\n#!/bin/bash\n# /etc/init.d/minecraft\n# version 0.4.2 2016-02-09 (YYYY-MM-DD)\n#\n### BEGIN INIT INFO\n# Provides:   minecraft\n# Required-Start: $local_fs $remote_fs screen-cleanup\n# Required-Stop:  $local_fs $remote_fs\n# Should-Start:   $network\n# Should-Stop:    $network\n# Default-Start:  2 3 4 5\n# Default-Stop:   0 1 6\n# Short-Description:    Minecraft server\n# Description:    Starts the minecraft server\n### END INIT INFO\n\n#Settings\nSERVICE='forge-1.7.10-10.13.4.1566-1.7.10-universal.jar'\nSCREENNAME='minecraft_server'\nOPTIONS='nogui'\nUSERNAME='root'\nWORLD='save'\nMCPATH='/root/minecraft'\nBACKUPPATH='/media/remote.share/minecraft.backup'\nMAXHEAP=7\nMINHEAP=6\nHISTORY=1024\nCPU_COUNT=2\n\n(\u7701\u7565)\nEOF\nchmod a+x /etc/init.d/minecraft\nupdate-rc.d minecraft defaults\n\nhttp://minecraft.gamepedia.com/Tutorials/Server_startup_script\n\u3053\u3053\u306e\u307e\u3093\u307e\u306a\u306e\u3067\u3001\u7701\u7565\u3057\u307e\u3057\u305f\u3002\nCPU_COUNT\u3084HEAP\u306f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u3088\u3063\u3066\u5909\u3048\u305f\u65b9\u304c\u3044\u3044\u304b\u3082\u3067\u3059\u3002\n\n\u8d77\u52d5\nservice minecraft start\n\n\u307e\u3068\u3081\u305f\u3082\u306e\u304c\u3001\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\nhttp://pastebin.com/PDhXCv96\n\n\u30b9\u30bf\u30fc\u30c8\u30a2\u30c3\u30d7\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u767b\u9332\nvultr\u306e\u30b3\u30f3\u30d1\u30cd\u304b\u3089\u3001Servers>Startup Scripts\u3068\u884c\u3063\u3066\u4f5c\u6210\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u767b\u9332\u3057\u540d\u524d\u3092\u4ed8\u3051\u307e\u3059\u3002\n\n\u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\n\u4eca\u56de\u306e\u30b5\u30fc\u30d0\u30fc\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u3082RAMDISK\u4e0a\u3067\u306a\u3051\u308c\u3070\u307e\u3068\u3082\u306b\u904a\u3079\u306a\u3044\u304f\u3089\u3044\u91cd\u3044\uff06\u30e1\u30e2\u30ea\u30926GB\u304f\u3089\u3044\u6d88\u8cbb\u3059\u308b\u306e\u3067\u3001\n\n150GB SSD \u30d7\u30e9\u30f3 \u6708\u984d80\u30c9\u30eb\u3000\u4e00\u6642\u95930.119\u30c9\u30eb\n\n\u306e\u30d7\u30e9\u30f3\u3092\u501f\u308a\u307e\u3059\u3002\n\u30b5\u30fc\u30d0\u30fc\u3092\u4f5c\u6210\u3059\u308b\u3068\u304d\u306b\u3001\u30b9\u30bf\u30fc\u30c8\u30a2\u30c3\u30d7\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u9078\u629e\u3057\u3066\u4f5c\u6210\u3059\u308c\u3070\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u6642\u306b\u5b9f\u884c\u3055\u308c\u3001minecraft\u30b5\u30fc\u30d0\u30fc\u304c\u7acb\u3061\u4e0a\u304c\u3063\u3066\u304f\u308b\u306f\u305a\u3067\u3059\u3002\n\u904a\u3073\u7d42\u308f\u3063\u305f\u3089\u30015\u5206\u304f\u3089\u3044\u5f85\u3063\u3066\u304b\u3089\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092destory\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u6b62\u3081\u308b\u3060\u3051\u3060\u3068\u3001\u8ab2\u91d1\u304c\u6b62\u307e\u308a\u307e\u305b\u3093\u3002\ncron\u3067\u81ea\u52d5\u7684\u306b\u30b5\u30fc\u30d0\u30fc\u306f\u540c\u671f\u3055\u308c\u3066\u3044\u308b\u306f\u305a\u306a\u306e\u3067\u3001\u6b21\u56de\u8d77\u52d5\u6642\u306b\u540c\u3058\u3088\u3046\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u6307\u5b9a\u3057\u3066\u8d77\u52d5\u3059\u308c\u3070\u3001\u3064\u3065\u304d\u304b\u3089\u3067\u304d\u308b\u306f\u305a\u3067\u3059\u3002\n\n\u4eca\u5f8c\u306e\u8ab2\u984c\n\n\u6bce\u56deIP\u5909\u308f\u3063\u3066\u30de\u30a4\u30af\u30e9\u306e\u8a2d\u5b9a\u3092\u66f8\u304d\u63db\u3048\u308b\u306e\u304c\u3081\u3093\u3069\u304f\u3055\u3044\n\u305d\u3082\u305d\u3082\u3001\u8d77\u52d5\u304c\u3081\u3093\u3069\u304f\u3055\u3044\u306e\u3067API\u3092\u4f7f\u3063\u3066\u3044\u3044\u611f\u3058\u306b\u3059\u308b\n\n# \u307e\u305a\u521d\u3081\u306b\n\u3053\u306e\u8a18\u4e8b\u306f\u3001\n\n* minecraft\u5927\u597d\u304d\n* \u5bb6\u3067\u30b5\u30fc\u30d0\u30fc\u3092\u52d5\u304b\u3057\u305f\u304f\u306a\u3044\n* \u304b\u3068\u3044\u3063\u3066\u3001VPS\u3092\u6708\u6975\u3067\u501f\u308a\u308b\u306e\u306f\u9ad8\u3044\n* \u305d\u3082\u305d\u308224\u6642\u9593\u904a\u3093\u3067\u308b\u308f\u3051\u3058\u3083\u306a\u3044\n\n\u306a\u3069\u306e\u7406\u7531\u3067\u3001\u6642\u9593\u501f\u308a\u3057\u305f\u3044\u4eba\u306b\u304a\u3059\u3059\u3081\u3067\u3059\u3002\n\u3057\u304b\u3057\u3001\u5927\u534a\u306eVPS\u306f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u524a\u9664\u3057\u306a\u3051\u308c\u3070\u8ab2\u91d1\u304c\u6b62\u307e\u308a\u307e\u305b\u3093\u3002\n\u3053\u308c\u3067\u306f\u3001\u8ab0\u3082\u63a5\u7d9a\u3057\u3066\u3044\u306a\u3044\u6642\u9593\u3082\u8ab2\u91d1\u3055\u308c\u3066\u3082\u3063\u305f\u3044\u306a\u3044\u3067\u3059\u3002\n\u305d\u3053\u3067\u3001\u4f7f\u3063\u3066\u306a\u3044\u3068\u304d\u306f\u524a\u9664\u3057\u3066\u3001\u904a\u3073\u305f\u3044\u3068\u304d\u306b\u7c21\u5358\u306b\u5fa9\u65e7\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n# VPS\u306e\u9078\u5b9a\n* AWS\u306f\u30e1\u30e2\u30ea\u306e\u5927\u304d\u306a\u30d7\u30e9\u30f3\u306f\u9ad8\u3044\n* GCP\u306f\u3082\u3063\u3068\u9ad8\u3044\n* IDCF\u306f(ry\n\n\u306e\u3067\u3001\u5019\u88dc\u3068\u3057\u3066\n\n* DigitalOcean\n* \u3053\u306e\u306f\n* vultr\n\n\u304c\u4e0a\u304c\u308a\u3001\n\n* \u30e1\u30e2\u30ea\u306e\u5927\u304d\u306a\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u5b89\u3044\n* \u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u304c\u3042\u308b\n* \u7121\u6599\u67a0\u304c\u3042\u308b\n\n\u3068\u3044\u3046\u70b9\u304b\u3089\u3001vultr\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n> \u6d77\u5916VPS\u306eVULTR\u3067CoreOS\u3092\u52d5\u304b\u3057\u3066\u307f\u305f by @ta_kousuke http://qiita.com/koh-taka@github/items/36ffbbfd7d1145a80972\n\n\u4e0a\u8a18\u306e\u8a18\u4e8b\u306b\u5023\u3063\u3066\u3001\u79c1\u3082\u30ea\u30f3\u30af\u8cbc\u3063\u3066\u304a\u304d\u307e\u3059\u3002\nhttp://www.vultr.com/?ref=7109367-3B\n20\u30c9\u30eb\u306e\u7121\u6599\u67a0\u304c\u3082\u3089\u3048\u308b\u3089\u3057\u3044\u3067\u3059\u3088\uff01\n\u5f8c\u8ff0\u306e\u8a2d\u5b9a\u3060\u3068\u3001\u4e00\u6642\u95930.08\u30c9\u30eb\uff5e0.23\u30c9\u30eb\u306a\u306e\u3067\u5272\u3068\u904a\u3079\u3061\u3083\u3044\u307e\u3059\u3002\n\n# \u524d\u63d0\u6761\u4ef6\n\u307e\u305a\u3001\u3044\u304f\u3064\u304b\u5fc5\u8981\u306a\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\n\n* \u30ed\u30fc\u30ab\u30eb\u3067\u52d5\u3044\u3066\u308bMinecraft\u30b5\u30fc\u30d0\u30fc\n* SSH\u3067rsync\u3067\u304d\u308b\u30b5\u30fc\u30d0\u30fc\u3068\u305d\u306e\u79d8\u5bc6\u9375\n* http\u3067zip\u304c\u914d\u4fe1\u3067\u304d\u308b\u4e8b\n\n\u307e\u305a\u3001\u30ed\u30fc\u30ab\u30eb\u3067Minecraft\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3057\u3001\u30ef\u30fc\u30eb\u30c9\u3092\u751f\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u6b21\u306b\u3001ssh\u3067rsync\u3067\u304d\u308b\u30b5\u30fc\u30d0\u30fc\u3092\u7528\u610f\u3057\u3001\u79d8\u5bc6\u9375\u3092\u767b\u9332\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nhttp://yanor.net/wiki/?UNIX%2Frsync%2Frsync%E5%B0%82%E7%94%A8%E3%81%AE%E7%A7%98%E5%AF%86%E9%8D%B5%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%82%B5%E3%83%BC%E3%83%90%E9%96%93%E3%81%A7rsync%E3%81%99%E3%82%8B\n\u79c1\u306f\u3001\u3053\u3053\u3092\u53c2\u8003\u306bSSH\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\u307e\u305f\u3001/home/hoge/save-201702\u306a\u3069\u3092\u4f5c\u6210\u3057\u3066\u304a\u304d\u3001\u305d\u306e\u4e2d\u306b\u30b5\u30fc\u30d0\u30fc\u306e\u30ef\u30fc\u30eb\u30c9\u3092\u7a81\u3063\u8fbc\u3093\u3067\u304a\u304d\u307e\u3059\u3002\n\n\u6700\u5f8c\u306b\u3001\u30ed\u30fc\u30ab\u30eb\u3067\u52d5\u3044\u3066\u308b\u30b5\u30fc\u30d0\u30fc\u3092zip\u3067\u5727\u7e2e\u3057\u307e\u3059\u3002\n\u3053\u306e\u6642\u3001\u30ef\u30fc\u30eb\u30c9\u306e\u5165\u3063\u3066\u3044\u308b\u30d5\u30a9\u30eb\u30c0\uff08\u4eca\u56de\u306fsave\u30d5\u30a9\u30eb\u30c0)\u3092\u542b\u307e\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u305d\u3057\u3066\u305d\u306ezip\u3092http\u3067vultr\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u7bc4\u56f2\u306b\u7f6e\u3044\u3066\u304a\u304d\u307e\u3059\u3002\n\u79c1\u306f\u3001\u3055\u304f\u3089VPS\u306b\u7f6e\u3044\u3066\u3044\u307e\u3059\u304c\u3001vultr\u306e\u6700\u5c0f\u69cb\u6210(\u67085\u30c9\u30eb)\u306b\u7f6e\u304f\u306e\u3082\u3042\u308a\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n# \u30b9\u30bf\u30fc\u30c8\u30a2\u30c3\u30d7\u30b9\u30af\u30ea\u30d7\u30c8\nvultr\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3059\u308b\u969b\u306b\u6307\u5b9a\u3067\u304d\u308b\u3001\u30b9\u30bf\u30fc\u30c8\u30a2\u30c3\u30d7\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f7f\u3044\u3001\u8a2d\u5b9a\u304b\u3089\u8d77\u52d5\u307e\u3067\u3084\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\nUbuntu\u306e16.10 x64\u3092\u4f7f\u3046\u3053\u3068\u3092\u524d\u63d0\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u3042\u3068\u3001\u3081\u3093\u3069\u304f\u3055\u3044\u306e\u3067root\u3067\u52d5\u304b\u3057\u3066\u307e\u3059\u3002\u9069\u5b9c\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u6bce\u56de\u6d88\u3059\u304b\u3089\u3044\u3044\u3088\u306d\uff08\u3000\uff3e\u03c9\uff3e\uff09\u30fb\u30fb\u30fb\n\u624b\u9806\u306f\n\n1. apt\u3067jdk\u3068unzip\u3092\u5c0e\u5165\n2. \u30b5\u30fc\u30d0\u30fc\u672c\u4f53\u3092wget\u3057\u3066\u914d\u7f6e\n3. ramdisk\u3092\u7528\u610f\n4. rsync\u7528\u306e\u30ab\u30ae\u3092\u7528\u610f\n5. rsync\u3067\u6700\u65b0\u306e\u30ef\u30fc\u30eb\u30c9\u3092\u53d6\u5f97\n6. \u5b9a\u671f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u8a2d\u5b9a\n7. \u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u767b\u9332\n8. \u8d77\u52d5\n\n\u3068\u306a\u308a\u307e\u3059\u3002\n\n## apt\u3067jdk\u3068unzip\u3092\u5c0e\u5165\n```bash\napt update\napt install default-jre unzip -y\n```\n\u8aac\u660e\u3059\u308b\u307e\u3067\u3082\u7121\u3044\u3067\u3057\u3087\u3046\n\n## \u30b5\u30fc\u30d0\u30fc\u672c\u4f53\u3092wget\u3057\u3066\u914d\u7f6e\n```bash\nwget https://hoge.net/minecraft/minecraft.zip -O /root/minecraft.zip\nunzip /root/minecraft.zip -d /root\n```\n/root/minecraft/minecraft/\n\u3068\u306a\u3089\u306a\u3044\u3088\u3046\u3001\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n## ramdisk\u3092\u7528\u610f\n```bash\nmkdir /mnt/ramdisk\nchmod 775 /mnt/ramdisk\nchown ${USER} /mnt/ramdisk\nmount -t tmpfs -o size=1g tmpfs /mnt/ramdisk\n```\nramdisk\u30921GB\u7528\u610f\u3057\u3066\u3044\u307e\u3059\u3002\n\u8db3\u308a\u306a\u3051\u308c\u3070\u5897\u3084\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n## rsync\u7528\u306e\u30ab\u30ae\u3092\u7528\u610f\n```bash\nmkdir -p /root/.ssh\nchmod 600 /root/.ssh\n\n#\u53d6\u5f97\u7528\u79d8\u5bc6\u9375\necho \"-----BEGIN RSA PRIVATE KEY-----\nhoge\n-----END RSA PRIVATE KEY-----\" > /root/.ssh/id_rsa_for_restore\n\n#\u66f4\u65b0\u7528\u79d8\u5bc6\u9375\necho \"-----BEGIN RSA PRIVATE KEY-----\nfuga\n-----END RSA PRIVATE KEY-----\" > /root/.ssh/id_rsa_for_backup\n\nchmod 600 /root/.ssh/id*\n```\nrsync\u3057\u304b\u8a31\u53ef\u3057\u306a\u3044ssh\u306e\u90fd\u5408\u4e0a\u3001\u30b3\u30de\u30f3\u30c9\u6bce\u306b\u9375\u304c\u5fc5\u8981\u3067\u3057\u305f\u3002\n\n## rsync\u3067\u6700\u65b0\u306e\u30ef\u30fc\u30eb\u30c9\u3092\u53d6\u5f97\n```bash\nrsync -azvv -e 'ssh -i /root/.ssh/id_rsa_for_restore -o \"StrictHostKeyChecking no\"' minesync@hoge.net:/home/minesync/save-201702 /mnt/ramdisk\nln -s /mnt/ramdisk/save-201702 /root/minecraft/save\n```\n\u4eca\u56de\u306f\u30ef\u30fc\u30eb\u30c9\u3092\u4fdd\u7ba1\u3059\u308b\u30b5\u30fc\u30d0\u30fc\u5074\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3092minesync\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n## \u5b9a\u671f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u8a2d\u5b9a\n```bash\ncat <<EOS > /root/minecraft/save.sh\nservice minecraft command save-all\nsleep 10s\nrsync -azvv -e 'ssh -i /root/.ssh/id_rsa_for_backup -o \"StrictHostKeyChecking no\"' /mnt/ramdisk/save-201702 minesync@hoge.net:/home/minesync\nEOS\nchmod +x /root/minecraft/save.sh\n(crontab -l 2>/dev/null; echo \"*/5 * * * * /root/minecraft/save.sh > /dev/null 2>&1\") | crontab -\n```\n5\u5206\u3054\u3068\u306b\u81ea\u52d5\u30bb\u30fc\u30d6\u3057\u3001rsync\u3067\u540c\u671f\u3057\u3066\u307e\u3059\u3002\n\n## \u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u767b\u9332\n```bash\ncat <<'EOF' > /etc/init.d/minecraft\n#!/bin/bash\n# /etc/init.d/minecraft\n# version 0.4.2 2016-02-09 (YYYY-MM-DD)\n#\n### BEGIN INIT INFO\n# Provides:   minecraft\n# Required-Start: $local_fs $remote_fs screen-cleanup\n# Required-Stop:  $local_fs $remote_fs\n# Should-Start:   $network\n# Should-Stop:    $network\n# Default-Start:  2 3 4 5\n# Default-Stop:   0 1 6\n# Short-Description:    Minecraft server\n# Description:    Starts the minecraft server\n### END INIT INFO\n\n#Settings\nSERVICE='forge-1.7.10-10.13.4.1566-1.7.10-universal.jar'\nSCREENNAME='minecraft_server'\nOPTIONS='nogui'\nUSERNAME='root'\nWORLD='save'\nMCPATH='/root/minecraft'\nBACKUPPATH='/media/remote.share/minecraft.backup'\nMAXHEAP=7\nMINHEAP=6\nHISTORY=1024\nCPU_COUNT=2\n\n(\u7701\u7565)\nEOF\nchmod a+x /etc/init.d/minecraft\nupdate-rc.d minecraft defaults\n```\nhttp://minecraft.gamepedia.com/Tutorials/Server_startup_script\n\u3053\u3053\u306e\u307e\u3093\u307e\u306a\u306e\u3067\u3001\u7701\u7565\u3057\u307e\u3057\u305f\u3002\nCPU_COUNT\u3084HEAP\u306f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u3088\u3063\u3066\u5909\u3048\u305f\u65b9\u304c\u3044\u3044\u304b\u3082\u3067\u3059\u3002\n\n## \u8d77\u52d5\n```bash\nservice minecraft start\n```\n\n\u307e\u3068\u3081\u305f\u3082\u306e\u304c\u3001\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\nhttp://pastebin.com/PDhXCv96\n\n\n## \u30b9\u30bf\u30fc\u30c8\u30a2\u30c3\u30d7\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u767b\u9332\nvultr\u306e\u30b3\u30f3\u30d1\u30cd\u304b\u3089\u3001Servers>Startup Scripts\u3068\u884c\u3063\u3066\u4f5c\u6210\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u767b\u9332\u3057\u540d\u524d\u3092\u4ed8\u3051\u307e\u3059\u3002\n\n# \u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\n\u4eca\u56de\u306e\u30b5\u30fc\u30d0\u30fc\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u3082RAMDISK\u4e0a\u3067\u306a\u3051\u308c\u3070\u307e\u3068\u3082\u306b\u904a\u3079\u306a\u3044\u304f\u3089\u3044\u91cd\u3044\uff06\u30e1\u30e2\u30ea\u30926GB\u304f\u3089\u3044\u6d88\u8cbb\u3059\u308b\u306e\u3067\u3001\n\n> 150GB SSD \u30d7\u30e9\u30f3 \u6708\u984d80\u30c9\u30eb\u3000\u4e00\u6642\u95930.119\u30c9\u30eb\n\n\u306e\u30d7\u30e9\u30f3\u3092\u501f\u308a\u307e\u3059\u3002\n\u30b5\u30fc\u30d0\u30fc\u3092\u4f5c\u6210\u3059\u308b\u3068\u304d\u306b\u3001\u30b9\u30bf\u30fc\u30c8\u30a2\u30c3\u30d7\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u9078\u629e\u3057\u3066\u4f5c\u6210\u3059\u308c\u3070\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u6642\u306b\u5b9f\u884c\u3055\u308c\u3001minecraft\u30b5\u30fc\u30d0\u30fc\u304c\u7acb\u3061\u4e0a\u304c\u3063\u3066\u304f\u308b\u306f\u305a\u3067\u3059\u3002\n\u904a\u3073\u7d42\u308f\u3063\u305f\u3089\u30015\u5206\u304f\u3089\u3044\u5f85\u3063\u3066\u304b\u3089\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092destory\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u6b62\u3081\u308b\u3060\u3051\u3060\u3068\u3001\u8ab2\u91d1\u304c\u6b62\u307e\u308a\u307e\u305b\u3093\u3002\ncron\u3067\u81ea\u52d5\u7684\u306b\u30b5\u30fc\u30d0\u30fc\u306f\u540c\u671f\u3055\u308c\u3066\u3044\u308b\u306f\u305a\u306a\u306e\u3067\u3001\u6b21\u56de\u8d77\u52d5\u6642\u306b\u540c\u3058\u3088\u3046\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u6307\u5b9a\u3057\u3066\u8d77\u52d5\u3059\u308c\u3070\u3001\u3064\u3065\u304d\u304b\u3089\u3067\u304d\u308b\u306f\u305a\u3067\u3059\u3002\n\n\n# \u4eca\u5f8c\u306e\u8ab2\u984c\n\n* \u6bce\u56deIP\u5909\u308f\u3063\u3066\u30de\u30a4\u30af\u30e9\u306e\u8a2d\u5b9a\u3092\u66f8\u304d\u63db\u3048\u308b\u306e\u304c\u3081\u3093\u3069\u304f\u3055\u3044\n* \u305d\u3082\u305d\u3082\u3001\u8d77\u52d5\u304c\u3081\u3093\u3069\u304f\u3055\u3044\u306e\u3067API\u3092\u4f7f\u3063\u3066\u3044\u3044\u611f\u3058\u306b\u3059\u308b\n", "tags": ["minecraft", "VULTR", "Ubuntu"]}