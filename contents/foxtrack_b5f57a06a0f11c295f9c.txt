{"context": "DynamoDB\u304c\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3067\u304d\u308b\u3089\u3057\u3044\u306e\u3067\u958b\u767a\u7528\u306b\u8a66\u3057\u3066\u307f\u305f\u3002\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30fb\u5c55\u958b\nwget http://dynamodb-local.s3-website-us-west-2.amazonaws.com/dynamodb_local_latest.zip #\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nunzip dynamodb_local_latest.zip #\u5c55\u958b\n\n\n\u8d77\u52d5\njava -Djava.library.path=./DynamoDBLocal_lib -jar DynamoDBLocal.jar -sharedDb #\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068Port8000\u3067\u8d77\u52d5\n\n\n\u63a5\u7d9a\n# aws cli\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308c\u3070\u3001endpoint\u3092\u6307\u5b9a\u3059\u308b\u3060\u3051\u3067\u4f7f\u3048\u308b\nlocal$ aws dynamodb list-tables --endpoint-url http://localhost:8000\n{\n    \"TableNames\": [\n        \"test\"\n    ]\n}\n\n\n\nRails\u304b\u3089\u4f7f\u3046\nrunner\u3067\u3084\u3063\u3066\u307f\u305f\u3002\n\u203bRails 4.2.6\n\nGemfile\n#SDK\u3092Gem\u3067\u8ffd\u52a0\ngem 'aws-sdk'\n\n\n\nlib/tasks/dynamo.rb\ngem 'aws-sdk-core'\n\nclass Tasks::Dynamo\n  def self.execute\n    dynamo = Aws::DynamoDB::Client.new(\n        endpoint: 'http://localhost:8000' #\u30ed\u30fc\u30ab\u30eb\u306b\u5bfe\u3057\u3066\n    )\n\n    options = {\n        table_name: \"products\",\n        attribute_definitions: [\n            {\n                attribute_name: \"product_code\",\n                attribute_type: \"S\"\n            }\n        ],\n        key_schema: [\n            {\n                attribute_name: \"product_code\",\n                key_type: \"HASH\"\n            }\n        ],\n        provisioned_throughput: {\n            read_capacity_units:  1,\n            write_capacity_units:  1\n        }\n    }\n\n    dynamo.create_table(options) #Table\u4f5c\u6210\n\n    p dynamo.describe_table({table_name: \"products\"}) #\u30c6\u30fc\u30d6\u30eb\u60c5\u5831\u53d6\u5f97\n  end\nend\n\n\nlocal$ rails runner \"Tasks::Dynamo.execute\"\nRunning via Spring preloader in process 6438\n#<struct Aws::DynamoDB::Types::DescribeTableOutput table=#<struct Aws::DynamoDB::Types::TableDescription attribute_definitions=[#<struct Aws::DynamoDB::Types::AttributeDefinition attribute_name=\"product_code\", attribute_type=\"S\">], table_name=\"products\", key_schema=[#<struct Aws::DynamoDB::Types::KeySchemaElement attribute_name=\"product_code\", key_type=\"HASH\">], table_status=\"ACTIVE\", creation_date_time=2016-10-31 08:20:37 +0000, provisioned_throughput=#<struct Aws::DynamoDB::Types::ProvisionedThroughputDescription last_increase_date_time=1970-01-01 00:00:00 +0000, last_decrease_date_time=1970-01-01 00:00:00 +0000, number_of_decreases_today=0, read_capacity_units=1, write_capacity_units=1>, table_size_bytes=0, item_count=0, table_arn=\"arn:aws:dynamodb:ddblocal:000000000000:table/products\", local_secondary_indexes=nil, global_secondary_indexes=nil, stream_specification=nil, latest_stream_label=nil, latest_stream_arn=nil>>\n\n\n\u7121\u4e8b\u8868\u793a\u3055\u308c\u305f\u3002\nDynamoDB\u304c\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3067\u304d\u308b\u3089\u3057\u3044\u306e\u3067\u958b\u767a\u7528\u306b\u8a66\u3057\u3066\u307f\u305f\u3002\n\n# \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30fb\u5c55\u958b\n```terminal\nwget http://dynamodb-local.s3-website-us-west-2.amazonaws.com/dynamodb_local_latest.zip #\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nunzip dynamodb_local_latest.zip #\u5c55\u958b\n```\n\n# \u8d77\u52d5\n```terminal\njava -Djava.library.path=./DynamoDBLocal_lib -jar DynamoDBLocal.jar -sharedDb #\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068Port8000\u3067\u8d77\u52d5\n```\n\n# \u63a5\u7d9a\n\n```terminal\n# aws cli\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308c\u3070\u3001endpoint\u3092\u6307\u5b9a\u3059\u308b\u3060\u3051\u3067\u4f7f\u3048\u308b\nlocal$ aws dynamodb list-tables --endpoint-url http://localhost:8000\n{\n    \"TableNames\": [\n        \"test\"\n    ]\n}\n\n```\n\n# Rails\u304b\u3089\u4f7f\u3046\nrunner\u3067\u3084\u3063\u3066\u307f\u305f\u3002\n\u203bRails 4.2.6\n\n```ruby:Gemfile\n#SDK\u3092Gem\u3067\u8ffd\u52a0\ngem 'aws-sdk'\n```\n\n```ruby:lib/tasks/dynamo.rb\ngem 'aws-sdk-core'\n\nclass Tasks::Dynamo\n  def self.execute\n    dynamo = Aws::DynamoDB::Client.new(\n        endpoint: 'http://localhost:8000' #\u30ed\u30fc\u30ab\u30eb\u306b\u5bfe\u3057\u3066\n    )\n\n    options = {\n        table_name: \"products\",\n        attribute_definitions: [\n            {\n                attribute_name: \"product_code\",\n                attribute_type: \"S\"\n            }\n        ],\n        key_schema: [\n            {\n                attribute_name: \"product_code\",\n                key_type: \"HASH\"\n            }\n        ],\n        provisioned_throughput: {\n            read_capacity_units:  1,\n            write_capacity_units:  1\n        }\n    }\n\n    dynamo.create_table(options) #Table\u4f5c\u6210\n\n    p dynamo.describe_table({table_name: \"products\"}) #\u30c6\u30fc\u30d6\u30eb\u60c5\u5831\u53d6\u5f97\n  end\nend\n```\n\n```terminal\nlocal$ rails runner \"Tasks::Dynamo.execute\"\nRunning via Spring preloader in process 6438\n#<struct Aws::DynamoDB::Types::DescribeTableOutput table=#<struct Aws::DynamoDB::Types::TableDescription attribute_definitions=[#<struct Aws::DynamoDB::Types::AttributeDefinition attribute_name=\"product_code\", attribute_type=\"S\">], table_name=\"products\", key_schema=[#<struct Aws::DynamoDB::Types::KeySchemaElement attribute_name=\"product_code\", key_type=\"HASH\">], table_status=\"ACTIVE\", creation_date_time=2016-10-31 08:20:37 +0000, provisioned_throughput=#<struct Aws::DynamoDB::Types::ProvisionedThroughputDescription last_increase_date_time=1970-01-01 00:00:00 +0000, last_decrease_date_time=1970-01-01 00:00:00 +0000, number_of_decreases_today=0, read_capacity_units=1, write_capacity_units=1>, table_size_bytes=0, item_count=0, table_arn=\"arn:aws:dynamodb:ddblocal:000000000000:table/products\", local_secondary_indexes=nil, global_secondary_indexes=nil, stream_specification=nil, latest_stream_label=nil, latest_stream_arn=nil>>\n\n```\n\u7121\u4e8b\u8868\u793a\u3055\u308c\u305f\u3002\n", "tags": ["AWS", "aws-cli", "DynamoDB", "Rails", "Ruby"]}