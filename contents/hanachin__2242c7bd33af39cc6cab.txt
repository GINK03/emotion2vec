{"context": "\n\n\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u30de\u30b7\u30f3\n\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30c9\u30b3\u72b6\u614b\u306b\u306a\u308b\u3068\u300c\u30ad\u30fb\u30e8\u30fb\u30b7\u2661\u300d\u3067\u30af\u30e9\u30c3\u30b7\u30e5\u3059\u308b\n\n\u56f3\n\nrequire 'gviz'\n\nGraph do\n  route :Silent       => [:Zun, :Doko]\n  route :Zun          => [:ZunZun, :Doko]\n  route :Doko         => [:Zun, :Doko]\n  route :ZunZun       => [:ZunZunZun, :Doko]\n  route :ZunZunZun    => [:ZunZunZunZun, :Doko]\n  route :ZunZunZunZun => [:ZunZunZunZun, :ZunZunZunZunDoko]\n\n  save(:zundoko, :png)\nend\n\n\n\u5b9f\u88c5\nclass Silent\n  def zun\n    Zun.new\n  end\n\n  def doko\n    Doko.new\n  end\nend\n\nclass Zun\n  def zun\n    ZunZun.new\n  end\n\n  def doko\n    Doko.new\n  end\nend\n\nclass Doko\n  def zun\n    Zun.new\n  end\n\n  def doko\n    Doko.new\n  end\nend\n\nclass ZunZun\n  def zun\n    ZunZunZun.new\n  end\n\n  def doko\n    Doko.new\n  end\nend\n\nclass ZunZunZun\n  def zun\n    ZunZunZunZun.new\n  end\n\n  def doko\n    Doko.new\n  end\nend\n\nclass ZunZunZunZun\n  def zun\n    ZunZunZunZun.new\n  end\n\n  def doko\n    ZunZunZunZunDoko.new\n  end\nend\n\nclass ZunZunZunZunDoko\n  def initialize\n    raise '\u30ad\u30fb\u30e8\u30fb\u30b7\u2661'\n  end\nend\n\nclass ZunOp\n  def call(state)\n    puts '\u30ba\u30f3'\n    state.send(:zun)\n  end\nend\n\nclass DokoOp\n  def call(state)\n    puts '\u30c9\u30b3'\n    state.send(:doko)\n  end\nend\n\nclass RandomZundokoProgram\n  include Enumerable\n\n  def each\n    loop { yield [ZunOp, DokoOp].sample.new }\n  end\nend\n\nclass ZunDokoMachine\n  def initialize\n    @state = Silent.new\n  end\n\n  def run(program)\n    program.each do |op|\n      @state = op.call(@state)\n    end\n  end\nend\n\nmachine = ZunDokoMachine.new\nprogram = RandomZundokoProgram.new.lazy\nmachine.run(program)\n\n\n\u5b9f\u884c\u4f8b\n    _\u2570\u2570,   /\uff8a\uff9e\uff7c\uff6e % ~/tmp\n  _/o \u014f\uff67  / \uff80\uff72\uff81\uff6e\uff70% \uff94\uff8a\uff9e\uff72\n\u2208\u30df;\uff89,\uff89   \uff3c\uff7a\uff8f\uff9d\uff84\uff9e% ruby zundoko.rb\n\u30c9\u30b3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30c9\u30b3\nzundoko.rb:63:in `initialize': \u30ad\u30fb\u30e8\u30fb\u30b7\u2661 (RuntimeError)\n    from zundoko.rb:57:in `new'\n    from zundoko.rb:57:in `doko'\n    from zundoko.rb:77:in `call'\n    from zundoko.rb:96:in `block in run'\n    from zundoko.rb:85:in `block in each'\n    from zundoko.rb:85:in `loop'\n    from zundoko.rb:85:in `each'\n    from zundoko.rb:95:in `each'\n    from zundoko.rb:95:in `run'\n    from zundoko.rb:103:in `<main>'\n    _\u2570\u2570,   /\uff8a\uff9e\uff7c\uff6e % ~/tmp\n  _/o\u0b87 \uff67  / \uff80\uff72\uff81\uff6e\uff70% \uff94\uff8a\uff9e\uff72\n\u2208\u30df;\uff89,\uff89   \uff3c\uff7a\uff8f\uff9d\uff84\uff9e%\n\n\n\u305d\u306e\u4ed6\u306e\u30ad\u30e8\u30b7\n\n\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7 Quine with Ruby\n\u6b4c\u3046\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7 with Ruby\n\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u30de\u30b7\u30fc\u30f3 with Ruby\n\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc with Ruby\n\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u7269\u8a9e with Ruby\n\n## \u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u30de\u30b7\u30f3\n\n\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30c9\u30b3\u72b6\u614b\u306b\u306a\u308b\u3068\u300c\u30ad\u30fb\u30e8\u30fb\u30b7\u2661\u300d\u3067\u30af\u30e9\u30c3\u30b7\u30e5\u3059\u308b\n\n## \u56f3\n\n![zundoko.png](https://qiita-image-store.s3.amazonaws.com/0/2074/0dc774f4-d1a8-eca7-ae4d-42b2ef770dd3.png)\n\n```rb\nrequire 'gviz'\n\nGraph do\n  route :Silent       => [:Zun, :Doko]\n  route :Zun          => [:ZunZun, :Doko]\n  route :Doko         => [:Zun, :Doko]\n  route :ZunZun       => [:ZunZunZun, :Doko]\n  route :ZunZunZun    => [:ZunZunZunZun, :Doko]\n  route :ZunZunZunZun => [:ZunZunZunZun, :ZunZunZunZunDoko]\n\n  save(:zundoko, :png)\nend\n```\n\n## \u5b9f\u88c5\n\n```rb\nclass Silent\n  def zun\n    Zun.new\n  end\n\n  def doko\n    Doko.new\n  end\nend\n\nclass Zun\n  def zun\n    ZunZun.new\n  end\n\n  def doko\n    Doko.new\n  end\nend\n\nclass Doko\n  def zun\n    Zun.new\n  end\n\n  def doko\n    Doko.new\n  end\nend\n\nclass ZunZun\n  def zun\n    ZunZunZun.new\n  end\n\n  def doko\n    Doko.new\n  end\nend\n\nclass ZunZunZun\n  def zun\n    ZunZunZunZun.new\n  end\n\n  def doko\n    Doko.new\n  end\nend\n\nclass ZunZunZunZun\n  def zun\n    ZunZunZunZun.new\n  end\n\n  def doko\n    ZunZunZunZunDoko.new\n  end\nend\n\nclass ZunZunZunZunDoko\n  def initialize\n    raise '\u30ad\u30fb\u30e8\u30fb\u30b7\u2661'\n  end\nend\n\nclass ZunOp\n  def call(state)\n    puts '\u30ba\u30f3'\n    state.send(:zun)\n  end\nend\n\nclass DokoOp\n  def call(state)\n    puts '\u30c9\u30b3'\n    state.send(:doko)\n  end\nend\n\nclass RandomZundokoProgram\n  include Enumerable\n\n  def each\n    loop { yield [ZunOp, DokoOp].sample.new }\n  end\nend\n\nclass ZunDokoMachine\n  def initialize\n    @state = Silent.new\n  end\n\n  def run(program)\n    program.each do |op|\n      @state = op.call(@state)\n    end\n  end\nend\n\nmachine = ZunDokoMachine.new\nprogram = RandomZundokoProgram.new.lazy\nmachine.run(program)\n```\n\n## \u5b9f\u884c\u4f8b\n\n```console\n    _\u2570\u2570,   /\uff8a\uff9e\uff7c\uff6e % ~/tmp\n  _/o \u014f\uff67  / \uff80\uff72\uff81\uff6e\uff70% \uff94\uff8a\uff9e\uff72\n\u2208\u30df;\uff89,\uff89   \uff3c\uff7a\uff8f\uff9d\uff84\uff9e% ruby zundoko.rb\n\u30c9\u30b3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30c9\u30b3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30ba\u30f3\n\u30c9\u30b3\nzundoko.rb:63:in `initialize': \u30ad\u30fb\u30e8\u30fb\u30b7\u2661 (RuntimeError)\n\tfrom zundoko.rb:57:in `new'\n\tfrom zundoko.rb:57:in `doko'\n\tfrom zundoko.rb:77:in `call'\n\tfrom zundoko.rb:96:in `block in run'\n\tfrom zundoko.rb:85:in `block in each'\n\tfrom zundoko.rb:85:in `loop'\n\tfrom zundoko.rb:85:in `each'\n\tfrom zundoko.rb:95:in `each'\n\tfrom zundoko.rb:95:in `run'\n\tfrom zundoko.rb:103:in `<main>'\n    _\u2570\u2570,   /\uff8a\uff9e\uff7c\uff6e % ~/tmp\n  _/o\u0b87 \uff67  / \uff80\uff72\uff81\uff6e\uff70% \uff94\uff8a\uff9e\uff72\n\u2208\u30df;\uff89,\uff89   \uff3c\uff7a\uff8f\uff9d\uff84\uff9e%\n```\n\n## \u305d\u306e\u4ed6\u306e\u30ad\u30e8\u30b7\n\n- [\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7 Quine with Ruby](http://qiita.com/hanachin_/items/856ecb53fe486c6d4a12)\n- [\u6b4c\u3046\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7 with Ruby](http://qiita.com/hanachin_/items/a4547d88e9008d390f58)\n- [\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u30de\u30b7\u30fc\u30f3 with Ruby](http://qiita.com/hanachin_/items/b037b2e602c0bdee6a89)\n- [\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc with Ruby](http://qiita.com/hanachin_/items/bad105e11ab707fbaf4c)\n- [\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u7269\u8a9e with Ruby](http://qiita.com/hanachin_/items/055881be542afceca9d9)\n", "tags": ["Ruby", "\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7"]}