{"context": " More than 1 year has passed since last update.\n\n\u3084\u308a\u305f\u3044\u3053\u3068\nmroonga\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fmysql\u306edocker image\u3092\u4f5c\u308b\u3002docker\u81ea\u4f53\u5168\u7136\u89e6\u3063\u305f\u3053\u3068\u306a\u3044\u72b6\u614b\u3067\u3084\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u3068\u308a\u3042\u3048\u305a\u52d5\u304f\u3068\u3053\u307e\u3067\u3092\u76ee\u6307\u3059\u3002root\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u3082\u8a2d\u5b9a\u305b\u305a\u3001\u3055\u3089\u306b\u3069\u3053\u304b\u3089\u3067\u3082\u30a2\u30af\u30bb\u30b9\u53ef\u80fd\u306a\u3069\u3001\u975e\u5e38\u306b\u958b\u653e\u611f\u306b\u3042\u3075\u308c\u305f\u8a2d\u5b9a\u306a\u306e\u306f\u3044\u3063\u305f\u3093\u76ee\u3092\u3064\u3076\u308b\u3002\u7121\u99c4\u306a\u3053\u3068\u3092\u3084\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u306f\u9ad8\u3081\u3002\n\n\u74b0\u5883\nmac\u4e0a\u306evagrant\u3067\u4eee\u60f3centos7\u3092\u52d5\u304b\u3057\u3001\u4eee\u60f3centos7\u4e0a\u3067mroonga\u30b3\u30f3\u30c6\u30ca\u3092\u7a3c\u50cd\u3055\u305b\u308b\u3002\n\nDockerfile\n\nDockerfile\nFROM centos:7\n\nMAINTAINER hokuma\n\nRUN yum install -y http://packages.groonga.org/centos/groonga-release-1.1.0-1.noarch.rpm\nRUN yum install -y http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm\nRUN yum makecache\nRUN yum install -y mysql-community-server\nRUN yum install -y mysql-community-mroonga\nRUN mysql_install_db --datadir=/var/lib/mysql --user=mysql\nRUN (/usr/bin/mysqld_safe &); sleep 10; echo \"grant all privileges on *.* to root@'%';\" | mysql -u root\nRUN (/usr/bin/mysqld_safe &); sleep 10; mysql -u root < /usr/share/mroonga/install.sql\n\nEXPOSE 3306\n\nCMD [\"/usr/bin/mysqld_safe\"]\n\n\n\n\u5404\u884c\u306b\u3064\u3044\u3066\n\u6700\u521d\u306e\u307b\u3046\u306f\u5272\u611b\u3002yum\u3067\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n\u5916\u90e8\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\nRUN (/usr/bin/mysqld_safe &); sleep 10; echo \"grant all privileges on *.* to root@'%';\" | mysql -u root\n\n\u306f\u3001mac\u304b\u3089docker\u4e0a\u306emysql\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3001\u5916\u90e8\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u3092\u3044\u3063\u305f\u3093\u8a31\u53ef\u3057\u3066\u3044\u308b\u3002sleep\u3055\u305b\u3066\u3044\u308b\u306e\u306f\u3001mysql\u30b5\u30fc\u30d0\u306e\u8d77\u52d5\u3092\u5f85\u3064\u305f\u3081\u3002\n\nmroonga\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nRUN (/usr/bin/mysqld_safe &); sleep 10; mysql -u root < /usr/share/mroonga/install.sql\n\n\u306fmroonga\u306einstall\u51e6\u7406\u3002mroonga\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u81ea\u52d5\u3067\u8d70\u308b\u306e\u3060\u3051\u3069\u3001\u305d\u306e\u6642\u70b9\u3067\u306fmysql\u30b5\u30fc\u30d0\u306f\u7acb\u3061\u4e0a\u304c\u3063\u3066\u306a\u3044\u3057\u3001\u5b9f\u969b\u306b\u767a\u884c\u3055\u308c\u308b\u30b3\u30de\u30f3\u30c9\u306f-p\u4ed8\u304d\u3067\u5b9f\u884c\u3055\u308c\u308b\u306e\u3067\u5bfe\u8a71\u7684\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u304b\u3063\u305f\u308a\u3068build\u6642\u306e\u5b9f\u884c\u306b\u4e0d\u5411\u304d\u3002\u306a\u306e\u3067\u3001-p\u6307\u5b9a\u306a\u3057\u3067\u6700\u5f8c\u306b\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\nmysql\u306e\u8d77\u52d5\nCMD [\"/usr/bin/mysqld_safe\"]\n\n\u6700\u521d\u3001/usr/bin/mysqld_safe &\u3068\u66f8\u3044\u3066\u3044\u305f\u3089\u3001\u305d\u3093\u306a\u30b3\u30de\u30f3\u30c9\u306f\u5b58\u5728\u3057\u306a\u3044\u3068\u8a00\u308f\u308c\u3066\u8f9b\u304b\u3063\u305f\u3002&\u307e\u3067\u542b\u3081\u3066\u4e00\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u898b\u306a\u3055\u308c\u3066\u3044\u305f\u3063\u307d\u304f\u3001\u5358\u7d14\u306b\u30d5\u30a1\u30a4\u30eb\u306e\u307f\u3092\u6307\u5b9a\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3089\u3061\u3083\u3093\u3068\u8d77\u52d5\u3057\u305f\u3002\n\n\u7d50\u679c\nvagrant\u4e0a\u3067\ndocker run -d --name=hokuma-mroonga -p 3306:3306 hokuma/mroonga:latest\n\nmac\u304b\u3089\nmysql -h \u4eee\u60f3\u30de\u30b7\u30f3\u306eIP -u root\nmysql> show engines;\n+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+\n| Engine             | Support | Comment                                                        | Transactions | XA   | Savepoints |\n+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+\n| FEDERATED          | NO      | Federated MySQL storage engine                                 | NULL         | NULL | NULL       |\n| CSV                | YES     | CSV storage engine                                             | NO           | NO   | NO         |\n| MyISAM             | YES     | MyISAM storage engine                                          | NO           | NO   | NO         |\n| BLACKHOLE          | YES     | /dev/null storage engine (anything you write to it disappears) | NO           | NO   | NO         |\n| MRG_MYISAM         | YES     | Collection of identical MyISAM tables                          | NO           | NO   | NO         |\n| MEMORY             | YES     | Hash based, stored in memory, useful for temporary tables      | NO           | NO   | NO         |\n| Mroonga            | YES     | CJK-ready fulltext search, column store                        | NO           | NO   | NO         |\n| PERFORMANCE_SCHEMA | YES     | Performance Schema                                             | NO           | NO   | NO         |\n| InnoDB             | DEFAULT | Supports transactions, row-level locking, and foreign keys     | YES          | YES  | YES        |\n| ARCHIVE            | YES     | Archive storage engine                                         | NO           | NO   | NO         |\n+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+\n10 rows in set (0.01 sec)\n\n\u78ba\u304b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3002\n| Mroonga            | YES     | CJK-ready fulltext search, column store                        | NO           | NO   | NO         |\n\n\n\u3082\u3063\u3068\u3084\u3093\u306a\u304d\u3083\u3044\u3051\u306a\u3044\u3053\u3068\nroot\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a\u3002\u5916\u90e8\u30a2\u30af\u30bb\u30b9\u7528\u306e\u30e6\u30fc\u30b6\u4f5c\u6210\u3001my.cnf\u306e\u8a2d\u5b9a\u306a\u3069\u306a\u3069\u3002\n# \u3084\u308a\u305f\u3044\u3053\u3068\nmroonga\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fmysql\u306edocker image\u3092\u4f5c\u308b\u3002docker\u81ea\u4f53\u5168\u7136\u89e6\u3063\u305f\u3053\u3068\u306a\u3044\u72b6\u614b\u3067\u3084\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u3068\u308a\u3042\u3048\u305a\u52d5\u304f\u3068\u3053\u307e\u3067\u3092\u76ee\u6307\u3059\u3002root\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u3082\u8a2d\u5b9a\u305b\u305a\u3001\u3055\u3089\u306b\u3069\u3053\u304b\u3089\u3067\u3082\u30a2\u30af\u30bb\u30b9\u53ef\u80fd\u306a\u3069\u3001\u975e\u5e38\u306b\u958b\u653e\u611f\u306b\u3042\u3075\u308c\u305f\u8a2d\u5b9a\u306a\u306e\u306f\u3044\u3063\u305f\u3093\u76ee\u3092\u3064\u3076\u308b\u3002\u7121\u99c4\u306a\u3053\u3068\u3092\u3084\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u306f\u9ad8\u3081\u3002\n\n# \u74b0\u5883\nmac\u4e0a\u306evagrant\u3067\u4eee\u60f3centos7\u3092\u52d5\u304b\u3057\u3001\u4eee\u60f3centos7\u4e0a\u3067mroonga\u30b3\u30f3\u30c6\u30ca\u3092\u7a3c\u50cd\u3055\u305b\u308b\u3002\n\n# Dockerfile\n\n```:Dockerfile\nFROM centos:7\n\nMAINTAINER hokuma\n\nRUN yum install -y http://packages.groonga.org/centos/groonga-release-1.1.0-1.noarch.rpm\nRUN yum install -y http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm\nRUN yum makecache\nRUN yum install -y mysql-community-server\nRUN yum install -y mysql-community-mroonga\nRUN mysql_install_db --datadir=/var/lib/mysql --user=mysql\nRUN (/usr/bin/mysqld_safe &); sleep 10; echo \"grant all privileges on *.* to root@'%';\" | mysql -u root\nRUN (/usr/bin/mysqld_safe &); sleep 10; mysql -u root < /usr/share/mroonga/install.sql\n\nEXPOSE 3306\n\nCMD [\"/usr/bin/mysqld_safe\"]\n```\n\n# \u5404\u884c\u306b\u3064\u3044\u3066\n\u6700\u521d\u306e\u307b\u3046\u306f\u5272\u611b\u3002yum\u3067\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n## \u5916\u90e8\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\n```\nRUN (/usr/bin/mysqld_safe &); sleep 10; echo \"grant all privileges on *.* to root@'%';\" | mysql -u root\n```\n\u306f\u3001mac\u304b\u3089docker\u4e0a\u306emysql\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3001\u5916\u90e8\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u3092\u3044\u3063\u305f\u3093\u8a31\u53ef\u3057\u3066\u3044\u308b\u3002sleep\u3055\u305b\u3066\u3044\u308b\u306e\u306f\u3001mysql\u30b5\u30fc\u30d0\u306e\u8d77\u52d5\u3092\u5f85\u3064\u305f\u3081\u3002\n\n## mroonga\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\nRUN (/usr/bin/mysqld_safe &); sleep 10; mysql -u root < /usr/share/mroonga/install.sql\n```\n\n\u306fmroonga\u306einstall\u51e6\u7406\u3002mroonga\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u81ea\u52d5\u3067\u8d70\u308b\u306e\u3060\u3051\u3069\u3001\u305d\u306e\u6642\u70b9\u3067\u306fmysql\u30b5\u30fc\u30d0\u306f\u7acb\u3061\u4e0a\u304c\u3063\u3066\u306a\u3044\u3057\u3001\u5b9f\u969b\u306b\u767a\u884c\u3055\u308c\u308b\u30b3\u30de\u30f3\u30c9\u306f`-p`\u4ed8\u304d\u3067\u5b9f\u884c\u3055\u308c\u308b\u306e\u3067\u5bfe\u8a71\u7684\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u304b\u3063\u305f\u308a\u3068build\u6642\u306e\u5b9f\u884c\u306b\u4e0d\u5411\u304d\u3002\u306a\u306e\u3067\u3001`-p`\u6307\u5b9a\u306a\u3057\u3067\u6700\u5f8c\u306b\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\n## mysql\u306e\u8d77\u52d5\n```\nCMD [\"/usr/bin/mysqld_safe\"]\n```\n\n\u6700\u521d\u3001`/usr/bin/mysqld_safe &`\u3068\u66f8\u3044\u3066\u3044\u305f\u3089\u3001\u305d\u3093\u306a\u30b3\u30de\u30f3\u30c9\u306f\u5b58\u5728\u3057\u306a\u3044\u3068\u8a00\u308f\u308c\u3066\u8f9b\u304b\u3063\u305f\u3002`&`\u307e\u3067\u542b\u3081\u3066\u4e00\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u898b\u306a\u3055\u308c\u3066\u3044\u305f\u3063\u307d\u304f\u3001\u5358\u7d14\u306b\u30d5\u30a1\u30a4\u30eb\u306e\u307f\u3092\u6307\u5b9a\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3089\u3061\u3083\u3093\u3068\u8d77\u52d5\u3057\u305f\u3002\n\n# \u7d50\u679c\nvagrant\u4e0a\u3067\n\n```\ndocker run -d --name=hokuma-mroonga -p 3306:3306 hokuma/mroonga:latest\n```\n\nmac\u304b\u3089\n\n```\nmysql -h \u4eee\u60f3\u30de\u30b7\u30f3\u306eIP -u root\nmysql> show engines;\n+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+\n| Engine             | Support | Comment                                                        | Transactions | XA   | Savepoints |\n+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+\n| FEDERATED          | NO      | Federated MySQL storage engine                                 | NULL         | NULL | NULL       |\n| CSV                | YES     | CSV storage engine                                             | NO           | NO   | NO         |\n| MyISAM             | YES     | MyISAM storage engine                                          | NO           | NO   | NO         |\n| BLACKHOLE          | YES     | /dev/null storage engine (anything you write to it disappears) | NO           | NO   | NO         |\n| MRG_MYISAM         | YES     | Collection of identical MyISAM tables                          | NO           | NO   | NO         |\n| MEMORY             | YES     | Hash based, stored in memory, useful for temporary tables      | NO           | NO   | NO         |\n| Mroonga            | YES     | CJK-ready fulltext search, column store                        | NO           | NO   | NO         |\n| PERFORMANCE_SCHEMA | YES     | Performance Schema                                             | NO           | NO   | NO         |\n| InnoDB             | DEFAULT | Supports transactions, row-level locking, and foreign keys     | YES          | YES  | YES        |\n| ARCHIVE            | YES     | Archive storage engine                                         | NO           | NO   | NO         |\n+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+\n10 rows in set (0.01 sec)\n```\n\n\u78ba\u304b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3002\n\n```\n| Mroonga            | YES     | CJK-ready fulltext search, column store                        | NO           | NO   | NO         |\n```\n\n# \u3082\u3063\u3068\u3084\u3093\u306a\u304d\u3083\u3044\u3051\u306a\u3044\u3053\u3068\nroot\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a\u3002\u5916\u90e8\u30a2\u30af\u30bb\u30b9\u7528\u306e\u30e6\u30fc\u30b6\u4f5c\u6210\u3001my.cnf\u306e\u8a2d\u5b9a\u306a\u3069\u306a\u3069\u3002\n", "tags": ["docker", "mroonga"]}