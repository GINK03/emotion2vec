{"context": "\n\nEagle Eye Networks API\u3067\u7c21\u5358\u30d3\u30c7\u30aa\u9023\u643a \u305d\u306e4 \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3078\u306e\u52d5\u753b\u306e\u4fdd\u5b58\nBOSCH\u88fd\u30ab\u30e1\u30e9\u306b\u3088\u308b\u4eba\u6570\u6e2c\u5b9a\u306e\u5dfb\u306f\u3001\u90fd\u5408\u306b\u3088\u308a\u6b21\u56de\u4ee5\u964d\u306b\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u671f\u5f85\u3055\u305b\u3066\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u3002\n\u524d\u3005\u56de\u306e\u52d5\u753b\u53d6\u5f97\u3067\u306f\u3001\u53d6\u5f97\u3057\u305f\u52d5\u753b\u306f\u305d\u306e\u307e\u307e\u518d\u751f\u3057\u3066\u3001\u30cf\u30a4\u7d42\u308f\u308a\u3068\u3044\u3046\u611f\u3058\u3060\u3063\u305f\u3068\u601d\u3044\u307e\u3059\u3002\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u3053\u308c\u3063\u3066\u5b9f\u306f\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u306f\u7121\u3044\u306e\u3067\u306f\u30fb\u30fb\u30fb\u3001\u3068\u5185\u5fc3\u601d\u3063\u3066\u304a\u308a\u307e\u3057\u305f\u306e\u3067\u3001\u3053\u3053\u3067\u306f\u30af\u30e9\u30a6\u30c9\u3089\u3057\u304f\u30af\u30e9\u30a6\u30c9\uff08Bluemix\uff09\u4e0a\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u52d5\u753b\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u304f\u3001\u3068\u3044\u3046\u3053\u3068\u3092\u3084\u3063\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3068\u306f\nBluemix\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306f\u3001\u7c21\u5358\u306b\u8a00\u3063\u3066\u3057\u307e\u3048\u3070IBM\u306e\u5225\u30af\u30e9\u30a6\u30c9\u3067\u3042\u308b\u3060\u3063\u305f\u300cSoftLayer\u300d\u4e0a\u306e\u300c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u300d\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\u3053\u308c\u306f\u3053\u3053\u306b\u8a73\u3057\u3044\u8aac\u660e\u304c\u3042\u308b\u3068\u304a\u308a\u3067\u3059\u304c\u3001\u307b\u307c\u305d\u306e\u307e\u307e\u300cOpenStack Swift\u300d\u3067\u3059\u3002OpenStack Swift\u306e\u8aac\u660e\u306f\u3053\u3053\u306b\u3042\u308a\u307e\u3059\u304c\u3001\u7279\u5fb4\u3092\u307e\u3068\u3081\u308b\u3068\u3001\n\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306f\u5927\u91cf\u30c7\u30fc\u30bf\u306e\u4fdd\u7ba1\u306b\u597d\u9069\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3067\u306f\u3001\u7121\u505c\u6b62\u3067\u30b9\u30c8\u30ec\u30fc\u30b8\u5bb9\u91cf\u3092\u5897\u8a2d\u53ef\u80fd\n\u4fdd\u5b58\u30c7\u30fc\u30bf\u306f\u3001\u5185\u90e8\u30673\u91cd\u306e\u30b3\u30d4\u30fc\u3092\u4fdd\u6301\n\u4e00\u8cab\u6027\u691c\u67fb\u306e\u30bf\u30b9\u30af\u304c\u5e38\u6642\u5b9f\u884c\n(\u7269\u7406\u969c\u5bb3\u306b\u5bfe\u3059\u308b\u3068\u3044\u3046\u610f\u5473\u3067)\u30c7\u30fc\u30bf\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306f\u4e0d\u8981\n\u4e00\u822c\u306e\u30c7\u30a3\u30b9\u30af\u306e\u3088\u3046\u306a\u30a2\u30af\u30bb\u30b9\u306f\u4e0d\u53ef\u3002HTTP\u53ca\u3073HTTPS\u3092\u4f7f\u7528\u3057\u305f\u30c7\u30fc\u30bf\u306e\u5165\u51fa\u529b\u306e\u307f\u53ef\u80fd\n\n\u3068\u3044\u3046\u611f\u3058\u3067\u3059\u3002EEN\u306b\u9650\u3063\u305f\u8a71\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3069\u3046\u3057\u3066\u3082\u5927\u5bb9\u91cf\u306b\u306a\u308a\u304c\u3061\u306a\u52d5\u753b\u30d5\u30a1\u30a4\u30eb\u306e\u4fdd\u5b58\u306b\u6700\u9069\u306a\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3068\u8a00\u3048\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u7279\u306b\u3053\u308c\u304b\u30894K, 8K\u306730, 60fps\u30683\uff5e16\u500d\u3068\u3044\u3046\u5358\u4f4d\u3067\u5bb9\u91cf\u304c\u5897\u52a0\u3059\u308b\u3053\u3068\u304c\u8003\u3048\u3089\u308c\u308b\u305f\u3081\u3001\u30af\u30e9\u30a6\u30c9\u3067\u52d5\u753b\u3092\u6271\u3046\u306b\u306f\u5fc5\u9808\u306e\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3068\u8a00\u3048\u307e\u3059\u3002\u307e\u305fSoftLayer, Bluemix\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306fCDN\u3068\u306e\u9023\u643a\u304c\u884c\u3048\u308b\u305f\u3081\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u914d\u4fe1\u306e\u9762\u304b\u3089\u898b\u3066\u3082\u975e\u5e38\u306b\u512a\u4f4d\u304c\u9ad8\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u74b0\u5883\u3001\u4e8b\u524d\u78ba\u8a8d\n\u5927\u5143\u306e\u74b0\u5883\u6761\u4ef6\u3084\u4e8b\u524d\u78ba\u8a8d\u9805\u76ee\u306f\u7b2c1\u56de\u3068\u540c\u69d8\u3067\u3059\u306e\u3067\u3001<-\u306e\u30ea\u30f3\u30af\u5148\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002\n\u4eca\u56de\u306f\u4e0a\u8a18\u74b0\u5883\u3068\u306f\u5225\u306b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\u30d0\u30a4\u30f3\u30c9\u306f\u3057\u3066\u3082\u3057\u306a\u304f\u3066\u3082\u554f\u984c\u306a\u304f\u3001\u307e\u305f\u7121\u6599\u30d7\u30e9\u30f3\u3067\u304a\u8a66\u3057\u9802\u3044\u3066\u3082\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u306e\u5834\u5408\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u4e0a\u9650\u304c5GB\u306b\u5236\u9650\u3055\u308c\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u4e0b\u3055\u3044\u3002\n\u307e\u305f\u4e0b\u8a18\u306e\u4f8b\u3092\u5b9f\u969b\u306b\u884c\u3046\u5834\u5408\u306b\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u3068\u3057\u3066\u300cEENStr001\u300d\u3068\u3044\u3046\u540d\u79f0\u3067\u4e8b\u524d\u306b\u4f5c\u6210\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\nnodered.org\u306b\u3042\u308b\u300cnode-red-contrib-objectstore\u300d\u306b\u3064\u3044\u3066\nNode-RED\u3067\u4f7f\u3048\u308b\u30ce\u30fc\u30c9\u3084\u30d5\u30ed\u30fc\u306a\u3069\u3001\u6709\u5fd7\u306b\u3088\u3063\u3066Contributes\u3055\u308c\u3066\u3044\u308b\u69d8\u3005\u306a\u4fbf\u5229\u30b3\u30fc\u30c9\u304cnodered.org\u306b\u7f6e\u304b\u308c\u3066\u3044\u307e\u3059\u3002\u5b9f\u306f\u3053\u306e\u4e2d\u306b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u7c21\u5358\u306b\u6271\u3046\u305f\u3081\u306e\u300cnode-red-contrib-objectstore\u300d\u3068\u3044\u3046\u30ce\u30fc\u30c9\u304c\u3042\u308a\u307e\u3059\u30022016\u5e7410\u6708\u9803\u306b\u4f5c\u6210\u3055\u308c\u305f\u3088\u3046\u3067\u3001\u79c1\u304c\u3053\u306e\u30d5\u30ed\u30fc\u3092\u4f5c\u6210\u3057\u305f\u6642\u70b9\u3067\u306f\u7121\u304b\u3063\u305f\u306e\u3067\u300c\u304a\u3001\u3044\u3044\u306d\u300d\u3068\u601d\u3063\u3066\u4f7f\u304a\u3046\u3068\u601d\u3063\u3066\u8aac\u660e\u3092\u8aad\u3080\u3068\u3001\u300cThis node helps to deliver images (up to 5MB) as a payload via the REST API Interface of Swift.\u300d\u3068\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u52d5\u753b\u3060\u3068\u6570\u5341M\u3001\u5834\u5408\u306b\u3088\u3063\u3066\u306fGB\u5358\u4f4d\u306b\u306a\u308b\u3053\u3068\u3082\u3042\u308b\u306e\u3067\u3001\u4eca\u56de\u306f\u4f7f\u7528\u3092\u898b\u5408\u308f\u305b\u307e\u3057\u305f\u3002\u7686\u69d8\u3082\u3054\u6ce8\u610f\u4e0b\u3055\u3044\u3002\n\nNode-RED\u3067\u30a4\u30f3\u30dd\u30fc\u30c8\n\u4e0b\u8a18\u306eJSON Doc\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u305fNode-RED\u4e0a\u306b\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\nEEN\u8a8d\u8a3c\u3001\u8a8d\u53ef\u7528\u30ce\u30fc\u30c9\n\n[{\"id\":\"48806d55.aa5ce4\",\"type\":\"inject\",\"z\":\"ba43e00b.410be\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"str\",\"repeat\":\"3600\",\"crontab\":\"\",\"once\":true,\"x\":110,\"y\":120,\"wires\":[[\"d8c2c88f.77af08\"]]},{\"id\":\"d8c2c88f.77af08\",\"type\":\"function\",\"z\":\"ba43e00b.410be\",\"name\":\"Get Auth Head\",\"func\":\"var user = \\\"<User ID>\\\";\\nvar password = \\\"<Password>\\\";\\nmsg.payload = 'username=' + user + '&password=' + password;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":340,\"y\":120,\"wires\":[[\"12ce9b05.337e65\"]]},{\"id\":\"12ce9b05.337e65\",\"type\":\"http request\",\"z\":\"ba43e00b.410be\",\"name\":\"\",\"method\":\"POST\",\"ret\":\"obj\",\"url\":\"https://login.eagleeyenetworks.com/g/aaa/authenticate\",\"x\":330,\"y\":180,\"wires\":[[\"3b5b7804.a42e28\"]]},{\"id\":\"3b5b7804.a42e28\",\"type\":\"http request\",\"z\":\"ba43e00b.410be\",\"name\":\"\",\"method\":\"POST\",\"ret\":\"obj\",\"url\":\"https://login.eagleeyenetworks.com/g/aaa/authorize\",\"x\":330,\"y\":240,\"wires\":[[\"f13c946.c2fa068\"]]},{\"id\":\"f13c946.c2fa068\",\"type\":\"contrib-json\",\"z\":\"ba43e00b.410be\",\"engine\":\"JSONPath\",\"command\":\"jq\",\"expr\":\"$.headers.set-cookie[1]\",\"complete\":\"complete\",\"prop\":\"payload\",\"name\":\"Put Cookie\",\"x\":570,\"y\":120,\"wires\":[[\"537bcaff.f5d6a4\"]]},{\"id\":\"537bcaff.f5d6a4\",\"type\":\"function\",\"z\":\"ba43e00b.410be\",\"name\":\"Form Auth Key\",\"func\":\"var cookies = msg.payload[0].split(\\\"; \\\");\\nfor (var i = 0; i < cookies.length; i++) {\\n\\tvar str = cookies[i].split(\\\"=\\\");\\n\\tif (str[0] === \\\"auth_key\\\") {\\n\\t\\tglobal.set(\\\"auth_key\\\", unescape(str[1]));\\n\\t\\tbreak;\\n\\t}\\n}\\nglobal.set(\\\"een_cookie\\\", msg.headers['set-cookie']);\\nmsg.payload = msg.statusCode;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":580,\"y\":180,\"wires\":[[\"d77b9c74.997fd\"]]},{\"id\":\"d77b9c74.997fd\",\"type\":\"http response\",\"z\":\"ba43e00b.410be\",\"name\":\"\",\"x\":550,\"y\":240,\"wires\":[]}]\n\n\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u8a8d\u8a3c\u7528\u30ce\u30fc\u30c9\n\n[{\"id\":\"1c16a99a.698436\",\"type\":\"function\",\"z\":\"ba43e00b.410be\",\"name\":\"Gen Auth Token\",\"func\":\"var vcapsvc = context.global.VCAP_SERVICES;\\n\\nvar objcred = [];\\n\\nobjcred.projectId = \\\"<Project ID>\\\";\\nobjcred.userId = \\\"<User ID>\\\";\\nobjcred.password = \\\"<Password>\\\";\\n\\nvar authbody = {\\n    \\\"auth\\\": {\\n        \\\"identity\\\": {\\n            \\\"methods\\\": [\\n                \\\"password\\\"\\n            ],\\n            \\\"password\\\": {\\n                \\\"user\\\": {\\n                    \\\"id\\\": objcred.userId,\\n                    \\\"password\\\": objcred.password\\n                }\\n            }\\n        },\\n        \\\"scope\\\": {\\n            \\\"project\\\": {\\n                \\\"id\\\": objcred.projectId\\n            }\\n        }\\n    }\\n};\\n\\nmsg.payload = JSON.stringify(authbody);\\n\\nreturn msg;\",\"outputs\":\"1\",\"noerr\":0,\"x\":340,\"y\":680,\"wires\":[[\"23e6a7cd.41ac58\"]]},{\"id\":\"23e6a7cd.41ac58\",\"type\":\"http request\",\"z\":\"ba43e00b.410be\",\"name\":\"\",\"method\":\"POST\",\"ret\":\"obj\",\"url\":\"https://identity.open.softlayer.com/v3/auth/tokens\",\"x\":330,\"y\":740,\"wires\":[[\"278b943a.d8b4bc\"]]},{\"id\":\"278b943a.d8b4bc\",\"type\":\"contrib-json\",\"z\":\"ba43e00b.410be\",\"engine\":\"JSONPath\",\"command\":\"jq\",\"expr\":\"$.token.catalog[?(@.type === \\\"object-store\\\")].endpoints[?(@.region_id === \\\"dallas\\\" && @.interface === \\\"public\\\")].url\",\"complete\":\"property\",\"prop\":\"payload\",\"name\":\"URL JSON Parse\",\"x\":600,\"y\":680,\"wires\":[[\"a40563b.6916ca\"]]},{\"id\":\"d6b98c59.cd2fa\",\"type\":\"comment\",\"z\":\"ba43e00b.410be\",\"name\":\"Generate Object Storage Auth Key loop\",\"info\":\"\",\"x\":220,\"y\":620,\"wires\":[]},{\"id\":\"dc0820.a855c7e\",\"type\":\"inject\",\"z\":\"ba43e00b.410be\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"str\",\"repeat\":\"3600\",\"crontab\":\"\",\"once\":true,\"x\":110,\"y\":680,\"wires\":[[\"1c16a99a.698436\"]]},{\"id\":\"a40563b.6916ca\",\"type\":\"function\",\"z\":\"ba43e00b.410be\",\"name\":\"Add_Auth_Header\",\"func\":\"global.set(\\\"obj_token\\\", msg.headers['x-subject-token']);\\nglobal.set(\\\"epurl\\\", msg.payload[0]);\\n\\nmsg.payload = global.get(\\\"obj_token\\\") + \\\" \\\" + global.get(\\\"epurl\\\");\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":592,\"y\":740,\"wires\":[[\"b32a942f.aa2c08\"]]},{\"id\":\"b32a942f.aa2c08\",\"type\":\"debug\",\"z\":\"ba43e00b.410be\",\"name\":\"\",\"active\":false,\"console\":\"false\",\"complete\":\"false\",\"x\":810,\"y\":740,\"wires\":[]}]\n\n\n\u52d5\u753b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u7528\u30ce\u30fc\u30c9\n\n[{\"id\":\"b0ca2077.42a85\",\"type\":\"subflow\",\"name\":\"P_ObjStor\",\"info\":\"\",\"in\":[{\"x\":90.00001525878906,\"y\":80.00000953674316,\"wires\":[{\"id\":\"4ecd6847.4c0198\"}]}],\"out\":[{\"x\":960,\"y\":80,\"wires\":[{\"id\":\"f5af6563.c06d68\",\"port\":0}]}]},{\"id\":\"b0a3895.39e6f78\",\"type\":\"http request\",\"z\":\"b0ca2077.42a85\",\"name\":\"Put the video to ObjStr\",\"method\":\"PUT\",\"ret\":\"txt\",\"url\":\"{{{epurl}}}/EENStr001/{{flvfilename}}\",\"tls\":\"\",\"x\":520,\"y\":80,\"wires\":[[\"f5af6563.c06d68\"]]},{\"id\":\"4ecd6847.4c0198\",\"type\":\"function\",\"z\":\"b0ca2077.42a85\",\"name\":\"Add_ObjStor_Header\",\"func\":\"msg.headers['X-Auth-Token'] = global.get(\\\"obj_token\\\");\\nmsg.headers['X-Object-Meta-camName'] = msg.camName;\\nmsg.headers['X-Object-Meta-camID'] = msg.camID;\\nmsg.headers['X-Object-Meta-stets'] = msg.vidStart;\\nmsg.headers['X-Object-Meta-etets'] = msg.vidEnd;\\n\\nmsg.flvfilename = msg.camID + \\\"_\\\" + msg.vidStart + \\\"_\\\" + msg.vidEnd + \\\".flv\\\";\\n\\nmsg.epurl = global.get(\\\"epurl\\\");\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":270.00001525878906,\"y\":80.00000953674316,\"wires\":[[\"b0a3895.39e6f78\"]]},{\"id\":\"f5af6563.c06d68\",\"type\":\"template\",\"z\":\"b0ca2077.42a85\",\"name\":\"Status Response\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"Status Code is returned : {{statusCode}}\",\"x\":790,\"y\":80,\"wires\":[[]]},{\"id\":\"be5d194f.8245c8\",\"type\":\"subflow\",\"name\":\"Q_ObjStor\",\"info\":\"\",\"in\":[{\"x\":160,\"y\":260,\"wires\":[{\"id\":\"7379857d.1c345c\"}]}],\"out\":[{\"x\":1000,\"y\":260,\"wires\":[{\"id\":\"8aa1db99.119098\",\"port\":0}]}]},{\"id\":\"7379857d.1c345c\",\"type\":\"function\",\"z\":\"be5d194f.8245c8\",\"name\":\"Add ObjStor Header\",\"func\":\"msg.headers = [];\\nmsg.headers['X-Auth-Token'] = global.get(\\\"obj_token\\\");\\nmsg.headers['X-Context'] = \\\"search\\\";\\nmsg.epurl = global.get(\\\"epurl\\\");\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":340,\"y\":260,\"wires\":[[\"253c99f3.bcb436\"]]},{\"id\":\"253c99f3.bcb436\",\"type\":\"http request\",\"z\":\"be5d194f.8245c8\",\"name\":\"\",\"method\":\"GET\",\"ret\":\"obj\",\"url\":\"{{{epurl}}}/EENStr001?format=json\",\"x\":590,\"y\":260,\"wires\":[[\"8aa1db99.119098\"]]},{\"id\":\"8aa1db99.119098\",\"type\":\"function\",\"z\":\"be5d194f.8245c8\",\"name\":\"Search the video\",\"func\":\"var nfyLength = msg.payload.length;\\n\\nfor (itr = 0; itr < nfyLength; itr++){\\n    if ( msg.payload[itr].meta.camid ) {\\n        if ( msg.camName == msg.payload[itr].meta.camname && msg.vidStart == msg.payload[itr].meta.stets && msg.vidEnd == msg.payload[itr].meta.etets) {\\n            msg.flvname = msg.payload[itr].name;\\n        }\\n    }\\n}\\n\\nmsg.payload = \\\"\\\";\\nmsg.payload = msg.flvname;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":830,\"y\":260,\"wires\":[[]]},{\"id\":\"8be8f396.9b7ee\",\"type\":\"comment\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Get EEN Video (Range)\",\"info\":\"### Usage\\nhttp://xxxxxx.mybluemix.net/eengetvideo?type=<queryType>&camName=<Camera Name>&st=<Start Time>&et=<End Time>\\n\\n- type\\n    - playvideo\\n    - getvideo\\n    - putvideo\\n    - listvideo\\n\\n- camName\\n    - Camera Display Name\\n\\n- st\\n  Start time of request type. It must be 'Date' and 'Time' format.\\n  ex) 2016/02/16 10:00:00\\n  note) Don't enter as EEN Timestump format\\n\\n- et\\n  Same above.\\n  If omit 'et' option, list video fuction is retrieve a video that nearest one from specified 'st'.\\n\\n### Example\\nhttp://xxxxx.mybluemix.net/eengetvideo?type=listvideo&camName=EN-CDUM-002a&st=2016/02/16%2010:00:00&et=2016/02/16%2011:00:00\",\"x\":170,\"y\":80,\"wires\":[]},{\"id\":\"14dbc351.82116d\",\"type\":\"function\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Get Auth & Set EENTS\",\"func\":\"msg.orgheaders=msg.req.headers;\\n\\nif (msg.payload.auth_key) {\\n    msg.auth_key = msg.payload.auth_key;\\n} else {\\n    msg.auth_key = global.get(\\\"auth_key\\\");\\n}\\n\\nif (msg.payload.type) {\\n    msg.type = msg.payload.type;\\n} else {\\n    msg.type = \\\"playvideo\\\";\\n}\\nif (msg.payload.camName) {\\n    msg.camName = msg.payload.camName;\\n} else {\\n    msg.camName = \\\"all\\\";\\n}\\nif (msg.payload.st) {\\n    var st_JST = msg.payload.st;\\n} else {\\n    var st_JST = \\\"2016/1/1 00:00:00\\\";\\n}\\nif (msg.payload.et) {\\n    var et_JST = msg.payload.et;\\n} else {\\n    var et_JST = \\\"2016/1/31 23:59:59\\\";\\n}\\nif (msg.payload.test) {\\n    msg.test = msg.payload.test;\\n}\\n\\nvar st_JST_do = new Date(st_JST);\\nmsg.st_JST = [st_JST_do.getFullYear(),\\n                ( '0' + (st_JST_do.getMonth() + 1)).slice(-2),\\n                ( '0' + st_JST_do.getDate() ).slice(-2),\\n                ( '0' + st_JST_do.getHours() ).slice( -2 ),\\n                ( '0' + st_JST_do.getMinutes() ).slice( -2 ),\\n                ( '0' + st_JST_do.getSeconds() ).slice( -2 )\\n                ].join(\\\"\\\");\\n\\nvar st_UTC_do = new Date(st_JST_do.getTime() - 32400000);\\nmsg.st_UTC = [st_UTC_do.getFullYear(),\\n                ( '0' + (st_UTC_do.getMonth() + 1)).slice(-2),\\n                ( '0' + st_UTC_do.getDate() ).slice(-2),\\n                ( '0' + st_UTC_do.getHours() ).slice( -2 ),\\n                ( '0' + st_UTC_do.getMinutes() ).slice( -2 ),\\n                ( '0' + st_UTC_do.getSeconds() ).slice( -2 )\\n                ].join(\\\"\\\");\\n\\nvar et_JST_do = new Date(et_JST);\\nmsg.et_JST = [et_JST_do.getFullYear(),\\n                ( '0' + (et_JST_do.getMonth() + 1)).slice(-2),\\n                ( '0' + et_JST_do.getDate() ).slice(-2),\\n                ( '0' + et_JST_do.getHours() ).slice( -2 ),\\n                ( '0' + et_JST_do.getMinutes() ).slice( -2 ),\\n                ( '0' + et_JST_do.getSeconds() ).slice( -2 )\\n                ].join(\\\"\\\");\\n\\nvar et_UTC_do = new Date(et_JST_do.getTime() - 32400000);\\nmsg.et_UTC = [et_UTC_do.getFullYear(),\\n                ( '0' + (et_UTC_do.getMonth() + 1)).slice(-2),\\n                ( '0' + et_UTC_do.getDate() ).slice(-2),\\n                ( '0' + et_UTC_do.getHours() ).slice( -2 ),\\n                ( '0' + et_UTC_do.getMinutes() ).slice( -2 ),\\n                ( '0' + et_UTC_do.getSeconds() ).slice( -2 )\\n                ].join(\\\"\\\");\\n\\nif (msg.payload.et) {\\n    msg.urltmp = \\\"https://login.eagleeyenetworks.com/asset/list/video?start_timestamp=\\\" + msg.st_UTC + \\\".000;end_timestamp=\\\" + msg.et_UTC + \\\".000;A=\\\" + msg.auth_key + \\\";options=coalesce\\\";\\n} else {\\n    msg.urltmp = \\\"https://login.eagleeyenetworks.com/asset/list/video?start_timestamp=\\\" + msg.st_UTC + \\\".000;count=1;A=\\\" + msg.auth_key + \\\";options=coalesce\\\";\\n}\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":390,\"y\":139,\"wires\":[[\"af451c94.ae188\"]]},{\"id\":\"d6ba669.513e998\",\"type\":\"http in\",\"z\":\"8f46ef33.15d9a\",\"name\":\"GetVideoRange\",\"url\":\"/eengetvideo\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":140,\"y\":140,\"wires\":[[\"14dbc351.82116d\",\"a20c873e.54a508\"]]},{\"id\":\"af451c94.ae188\",\"type\":\"http request\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Get Camera ID\",\"method\":\"GET\",\"ret\":\"obj\",\"url\":\"https://login.eagleeyenetworks.com/g/device/list?A={{auth_key}}&t=camera&s=ATTD\",\"tls\":\"\",\"x\":360,\"y\":200,\"wires\":[[\"c605696f.f533f8\",\"d797abe1.d260e8\"]]},{\"id\":\"c605696f.f533f8\",\"type\":\"function\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Pull CamID & Set URL\",\"func\":\"var camLength = msg.payload.length;\\n\\nfor (itr = 0; itr < camLength; itr++){\\n    var camIdx = msg.payload[itr].indexOf(msg.camName);\\n    if ( camIdx > 0 ) {\\n        msg.camID = msg.payload[itr][camIdx - 1];\\n    }\\n}\\n\\nmsg.url = msg.urltmp + \\\";id=\\\" + msg.camID;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":380,\"y\":260,\"wires\":[[\"11a23b6c.ac6455\",\"d797abe1.d260e8\"]]},{\"id\":\"11a23b6c.ac6455\",\"type\":\"http request\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Get Video List\",\"method\":\"GET\",\"ret\":\"obj\",\"url\":\"\",\"tls\":\"\",\"x\":360,\"y\":320,\"wires\":[[\"9ea25155.56689\"]]},{\"id\":\"9ea25155.56689\",\"type\":\"function\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Pull Video Range\",\"func\":\"delete msg.url;\\n\\nvar vidLength = msg.payload.length;\\n\\nif ( msg.payload[0] ) {\\n    msg.vidStart = msg.payload[0].s;\\n} else {\\n    msg.vidStart = null;\\n}\\n\\nif ( vidLength == 1 ) {\\n    msg.vidEnd = msg.payload[0].e;\\n}\\n\\nfor (itr = 0; itr < vidLength; itr++){\\n    if ( itr == (vidLength - 1) ) {\\n        msg.vidEnd = msg.payload[itr].e;\\n    }\\n}\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":370,\"y\":380,\"wires\":[[\"f78ee296.411cb\",\"3e96fd65.7e77e2\"]]},{\"id\":\"9b2135e6.1272a8\",\"type\":\"switch\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Switch Type\",\"property\":\"type\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"eq\",\"v\":\"listvideo\",\"vt\":\"str\"},{\"t\":\"else\"}],\"checkall\":\"true\",\"outputs\":2,\"x\":650,\"y\":200,\"wires\":[[\"d4de5871.260428\"],[\"cbe26ee9.31757\"]]},{\"id\":\"f6b32c92.a3d9e\",\"type\":\"switch\",\"z\":\"8f46ef33.15d9a\",\"name\":\"ObjStr Exist\",\"property\":\"payload\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"nnull\"},{\"t\":\"null\"}],\"checkall\":\"true\",\"outputs\":2,\"x\":650,\"y\":320,\"wires\":[[\"7b3e58d6.b54778\"],[\"ecbf32b6.3870d\"]]},{\"id\":\"cbe26ee9.31757\",\"type\":\"subflow:be5d194f.8245c8\",\"z\":\"8f46ef33.15d9a\",\"name\":\"\",\"x\":650,\"y\":260,\"wires\":[[\"f6b32c92.a3d9e\"]]},{\"id\":\"7b3e58d6.b54778\",\"type\":\"switch\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Switch Type\",\"property\":\"type\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"eq\",\"v\":\"putvideo\",\"vt\":\"str\"},{\"t\":\"eq\",\"v\":\"playvideo\",\"vt\":\"str\"},{\"t\":\"eq\",\"v\":\"getvideo\",\"vt\":\"str\"}],\"checkall\":\"true\",\"outputs\":3,\"x\":890,\"y\":320,\"wires\":[[\"d633f332.73b0b\"],[\"fde03821.8b5248\"],[\"f3a8e7a8.448c78\"]]},{\"id\":\"f78ee296.411cb\",\"type\":\"switch\",\"z\":\"8f46ef33.15d9a\",\"name\":\"No record\",\"property\":\"vidStart\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"null\"},{\"t\":\"else\"}],\"checkall\":\"true\",\"outputs\":2,\"x\":640,\"y\":140,\"wires\":[[\"ddaf5439.a3adc8\"],[\"9b2135e6.1272a8\"]]},{\"id\":\"ecbf32b6.3870d\",\"type\":\"change\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Delete Headers\",\"rules\":[{\"t\":\"delete\",\"p\":\"headers\",\"pt\":\"msg\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":660,\"y\":380,\"wires\":[[\"978c9649.08cce8\"]]},{\"id\":\"6333a38f.80234c\",\"type\":\"comment\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Fetch CamID, Vid List\",\"info\":\"\",\"x\":160,\"y\":400,\"wires\":[]},{\"id\":\"24616d0b.a2b882\",\"type\":\"comment\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Exist check on ObjStr\",\"info\":\"\",\"x\":680,\"y\":80,\"wires\":[]},{\"id\":\"3e96fd65.7e77e2\",\"type\":\"debug\",\"z\":\"8f46ef33.15d9a\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":350,\"y\":440,\"wires\":[]},{\"id\":\"d4de5871.260428\",\"type\":\"template\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Video List\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"<html>\\n    <head>\\n        <script src=\\\"https://code.jquery.com/jquery-2.2.0.min.js\\\"></script>\\n    </head>\\n    <body>\\n        {{vidStart}}\\n        {{vidEnd}}\\n    </body>\\n</html>\\n\",\"x\":1180,\"y\":200,\"wires\":[[\"ac42b9c4.9f6a38\"]]},{\"id\":\"a3169c03.d0ab\",\"type\":\"http request\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Get video from ObjStr\",\"method\":\"GET\",\"ret\":\"bin\",\"url\":\"{{{epurl}}}/EENStr001/{{payload}}\",\"x\":1460,\"y\":380,\"wires\":[[\"ac42b9c4.9f6a38\"]]},{\"id\":\"f3a8e7a8.448c78\",\"type\":\"function\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Set DL File Name\",\"func\":\"msg.headers = [];\\nmsg.headers['X-Auth-Token'] = global.get(\\\"obj_token\\\");\\nmsg.epurl = global.get(\\\"epurl\\\");\\n\\nmsg.flvfilename = msg.camID + \\\"_\\\" + msg.st_JST + \\\"_\\\" + msg.et_JST + \\\".flv\\\";\\nmsg.orgheaders['Content-Disposition'] = \\\"attachment; filename=\\\" + msg.flvfilename;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":1210,\"y\":380,\"wires\":[[\"a3169c03.d0ab\"]]},{\"id\":\"d633f332.73b0b\",\"type\":\"template\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Already putted\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"Video file {{camID}}_{{st_JST}}_{{et_JST}}.flv was already putted.\",\"x\":1200,\"y\":260,\"wires\":[[\"ac42b9c4.9f6a38\"]]},{\"id\":\"ddaf5439.a3adc8\",\"type\":\"template\",\"z\":\"8f46ef33.15d9a\",\"name\":\"null response\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"Requested video range is not recorded anything.\\n\",\"x\":1200,\"y\":140,\"wires\":[[\"ac42b9c4.9f6a38\"]]},{\"id\":\"a36d644f.5621f8\",\"type\":\"comment\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Exist and download\",\"info\":\"\",\"x\":910,\"y\":260,\"wires\":[]},{\"id\":\"17663ec6.7189b1\",\"type\":\"comment\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Exist and putted\",\"info\":\"\",\"x\":1660,\"y\":260,\"wires\":[]},{\"id\":\"22484b9b.a3e5b4\",\"type\":\"http response\",\"z\":\"8f46ef33.15d9a\",\"name\":\"\",\"x\":1950,\"y\":440,\"wires\":[]},{\"id\":\"ac42b9c4.9f6a38\",\"type\":\"change\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Restore Header\",\"rules\":[{\"t\":\"delete\",\"p\":\"headers\",\"pt\":\"msg\"},{\"t\":\"set\",\"p\":\"headers\",\"pt\":\"msg\",\"to\":\"orgheaders\",\"tot\":\"msg\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":1760,\"y\":380,\"wires\":[[\"22484b9b.a3e5b4\"]]},{\"id\":\"9bc458d.9c2b6a8\",\"type\":\"http request\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Download the video\",\"method\":\"GET\",\"ret\":\"bin\",\"url\":\"https://login.eagleeyenetworks.com/asset/play/video.flv?c={{camID}};t={{vidStart}};e={{vidEnd}};A={{auth_key}}\",\"tls\":\"\",\"x\":910,\"y\":500,\"wires\":[[\"8239e8ab.65ccd8\",\"de74c74f.6d93f8\"]]},{\"id\":\"8239e8ab.65ccd8\",\"type\":\"switch\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Switch Type\",\"property\":\"type\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"eq\",\"v\":\"getvideo\",\"vt\":\"str\"},{\"t\":\"eq\",\"v\":\"putvideo\",\"vt\":\"str\"},{\"t\":\"eq\",\"v\":\"playvideo\",\"vt\":\"str\"}],\"checkall\":\"true\",\"outputs\":3,\"x\":890,\"y\":620,\"wires\":[[\"1f2fed37.a67513\"],[\"9528f178.74e38\"],[\"4ea31a9e.13b114\"]]},{\"id\":\"1f2fed37.a67513\",\"type\":\"function\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Set DL File Name\",\"func\":\"msg.flvfilename = msg.camID + \\\"_\\\" + msg.st_JST + \\\".flv\\\";\\nmsg.orgheaders['Content-Disposition'] = \\\"attachment; filename=\\\" + msg.flvfilename;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":1210,\"y\":560,\"wires\":[[\"ac42b9c4.9f6a38\"]]},{\"id\":\"2774d3fc.5f769c\",\"type\":\"comment\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Get the video\",\"info\":\"\",\"x\":650,\"y\":500,\"wires\":[]},{\"id\":\"f4fdec90.8ae02\",\"type\":\"comment\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Put the video\",\"info\":\"\",\"x\":1430,\"y\":620,\"wires\":[]},{\"id\":\"a20c873e.54a508\",\"type\":\"debug\",\"z\":\"8f46ef33.15d9a\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":413.75,\"y\":83.75,\"wires\":[]},{\"id\":\"978c9649.08cce8\",\"type\":\"switch\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Test ?\",\"property\":\"test\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"eq\",\"v\":\"1\",\"vt\":\"num\"},{\"t\":\"else\"}],\"checkall\":\"true\",\"outputs\":2,\"x\":630,\"y\":440,\"wires\":[[\"16a09c5d.a8ab04\"],[\"9bc458d.9c2b6a8\"]]},{\"id\":\"9f43c15d.ea6f7\",\"type\":\"function\",\"z\":\"8f46ef33.15d9a\",\"name\":\"code to payload\",\"func\":\"msg.payload = msg.statusCode;\\n//msg.payload = msg.headers[3];\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":1200,\"y\":440,\"wires\":[[\"22484b9b.a3e5b4\"]]},{\"id\":\"16a09c5d.a8ab04\",\"type\":\"http request\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Download the video\",\"method\":\"GET\",\"ret\":\"txt\",\"url\":\"https://login.eagleeyenetworks.com/asset/play/video.flv?c={{camID}};t={{vidStart}};e={{vidEnd}};A={{auth_key}}\",\"tls\":\"\",\"x\":910,\"y\":440,\"wires\":[[\"9f43c15d.ea6f7\",\"de74c74f.6d93f8\",\"8b25b608.cf4988\"]]},{\"id\":\"de74c74f.6d93f8\",\"type\":\"debug\",\"z\":\"8f46ef33.15d9a\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"statusCode\",\"x\":1200,\"y\":500,\"wires\":[]},{\"id\":\"9528f178.74e38\",\"type\":\"subflow:b0ca2077.42a85\",\"z\":\"8f46ef33.15d9a\",\"name\":\"\",\"x\":1190,\"y\":620,\"wires\":[[\"ac42b9c4.9f6a38\"]]},{\"id\":\"5b4fd325.14de0c\",\"type\":\"template\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Gen Page Vid\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"html\",\"syntax\":\"mustache\",\"template\":\"<head>\\n  <link href=\\\"http://vjs.zencdn.net/5.9.2/video-js.css\\\" rel=\\\"stylesheet\\\">\\n\\n  <!-- If you'd like to support IE8 -->\\n  <script src=\\\"http://vjs.zencdn.net/ie8/1.1.2/videojs-ie8.min.js\\\"></script>\\n</head>\\n\\n<body>\\n    <h2>Start Time: {{vidStartHRJ}} <br> End Time: {{vidEndHRJ}}</h2>\\n    <a href=\\\"http://xxxxx.mybluemix.net/eengetflv?camName={{camName}}&st={{nextVideoJ}}&auth_key={{auth_key}}\\\">\u6b21\u306e\u30d3\u30c7\u30aa</a><br><br>\\n  <video id=\\\"my-video\\\" class=\\\"video-js vjs-default-skin\\\" controls preload=\\\"auto\\\" width=\\\"640\\\" height=\\\"480\\\"\\n  data-setup=\\\"{}\\\">\\n    <source src=\\\"{{{liveurl}}}\\\" type='video/x-flv'>\\n    <p class=\\\"vjs-no-js\\\">\\n      To view this video please enable JavaScript, and consider upgrading to a web browser that\\n      <a href=\\\"http://videojs.com/html5-video-support/\\\" target=\\\"_blank\\\">supports HTML5 video</a>\\n    </p>\\n  </video>\\n  <script src=\\\"http://vjs.zencdn.net/5.9.2/video.js\\\"></script>\\n</body>\",\"x\":1440,\"y\":320,\"wires\":[[\"ac42b9c4.9f6a38\"]]},{\"id\":\"fde03821.8b5248\",\"type\":\"function\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Set Play File\",\"func\":\"msg.headers = [];\\nmsg.headers['X-Auth-Token'] = global.get(\\\"obj_token\\\");\\nmsg.epurl = global.get(\\\"epurl\\\");\\nmsg.liveurl = msg.epurl + \\\"/EENStr001/\\\" + msg.payload;\\n\\nvar vidStartHR = msg.vidStart.substr(0,4) + \\\"/\\\" + msg.vidStart.substr(4,2) + \\\"/\\\" + msg.vidStart.substr(6,2) + \\\" \\\" + msg.vidStart.substr(8,2) + \\\":\\\" + msg.vidStart.substr(10,2) + \\\":\\\" + msg.vidStart.substr(12,2);\\nvar vidEndHR = msg.vidEnd.substr(0,4) + \\\"/\\\" + msg.vidEnd.substr(4,2) + \\\"/\\\" + msg.vidEnd.substr(6,2) + \\\" \\\" + msg.vidEnd.substr(8,2) + \\\":\\\" + msg.vidEnd.substr(10,2) + \\\":\\\" + msg.vidEnd.substr(12,2);\\nvar st_UTC_do = new Date(vidStartHR);\\nvar nv_UTC_do = new Date(vidEndHR);\\nvar st_JST_do = new Date(st_UTC_do.getTime() + 32400000);\\nvar nv_JST_do = new Date(nv_UTC_do.getTime() + 32400000);\\nvar vidStartJ = [st_JST_do.getFullYear() + '/',\\n            ( '0' + (st_JST_do.getMonth() + 1)).slice(-2) + '/',\\n            ( '0' + st_JST_do.getDate() ).slice(-2) + ' ',\\n            ( '0' + st_JST_do.getHours() ).slice( -2 ) + ':',\\n            ( '0' + st_JST_do.getMinutes() ).slice( -2 ) + ':',\\n            ( '0' + st_JST_do.getSeconds() ).slice( -2 )\\n            ].join(\\\"\\\");\\nmsg.nextVideoJ = [nv_JST_do.getFullYear() + '/',\\n            ( '0' + (nv_JST_do.getMonth() + 1)).slice(-2) + '/',\\n            ( '0' + nv_JST_do.getDate() ).slice(-2) + ' ',\\n            ( '0' + nv_JST_do.getHours() ).slice( -2 ) + ':',\\n            ( '0' + nv_JST_do.getMinutes() ).slice( -2 ) + ':',\\n            ( '0' + (nv_JST_do.getSeconds() + 1)).slice( -2 )\\n            ].join(\\\"\\\");\\nmsg.vidStartHRJ = st_JST_do.getFullYear() + \\\"\u5e74\\\" + (st_JST_do.getMonth() + 1) + \\\"\u6708\\\" + st_JST_do.getDate() + \\\"\u65e5 \\\" + st_JST_do.getHours() + \\\"\u6642\\\" + st_JST_do.getMinutes() + \\\"\u5206\\\" + st_JST_do.getSeconds() + \\\"\u79d2\\\";\\nmsg.vidEndHRJ = nv_JST_do.getFullYear() + \\\"\u5e74\\\" + (nv_JST_do.getMonth() + 1) + \\\"\u6708\\\" + nv_JST_do.getDate() + \\\"\u65e5 \\\" + nv_JST_do.getHours() + \\\"\u6642\\\" + nv_JST_do.getMinutes() + \\\"\u5206\\\" + nv_JST_do.getSeconds() + \\\"\u79d2\\\";\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":1190,\"y\":320,\"wires\":[[\"5b4fd325.14de0c\"]]},{\"id\":\"4ea31a9e.13b114\",\"type\":\"function\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Set Play File\",\"func\":\"msg.liveurl = \\\"https://login.eagleeyenetworks.com/asset/play/video.flv?c=\\\" + msg.camID + \\\";t=\\\" + msg.vidStart + \\\";e=\\\" + msg.vidEnd + \\\";A=\\\" + msg.auth_key;\\n\\nvar vidStartHR = msg.vidStart.substr(0,4) + \\\"/\\\" + msg.vidStart.substr(4,2) + \\\"/\\\" + msg.vidStart.substr(6,2) + \\\" \\\" + msg.vidStart.substr(8,2) + \\\":\\\" + msg.vidStart.substr(10,2) + \\\":\\\" + msg.vidStart.substr(12,2);\\nvar vidEndHR = msg.vidEnd.substr(0,4) + \\\"/\\\" + msg.vidEnd.substr(4,2) + \\\"/\\\" + msg.vidEnd.substr(6,2) + \\\" \\\" + msg.vidEnd.substr(8,2) + \\\":\\\" + msg.vidEnd.substr(10,2) + \\\":\\\" + msg.vidEnd.substr(12,2);\\nvar st_UTC_do = new Date(vidStartHR);\\nvar nv_UTC_do = new Date(vidEndHR);\\nvar st_JST_do = new Date(st_UTC_do.getTime() + 32400000);\\nvar nv_JST_do = new Date(nv_UTC_do.getTime() + 32400000);\\nvar vidStartJ = [st_JST_do.getFullYear() + '/',\\n            ( '0' + (st_JST_do.getMonth() + 1)).slice(-2) + '/',\\n            ( '0' + st_JST_do.getDate() ).slice(-2) + ' ',\\n            ( '0' + st_JST_do.getHours() ).slice( -2 ) + ':',\\n            ( '0' + st_JST_do.getMinutes() ).slice( -2 ) + ':',\\n            ( '0' + st_JST_do.getSeconds() ).slice( -2 )\\n            ].join(\\\"\\\");\\nmsg.nextVideoJ = [nv_JST_do.getFullYear() + '/',\\n            ( '0' + (nv_JST_do.getMonth() + 1)).slice(-2) + '/',\\n            ( '0' + nv_JST_do.getDate() ).slice(-2) + ' ',\\n            ( '0' + nv_JST_do.getHours() ).slice( -2 ) + ':',\\n            ( '0' + nv_JST_do.getMinutes() ).slice( -2 ) + ':',\\n            ( '0' + (nv_JST_do.getSeconds() + 1)).slice( -2 )\\n            ].join(\\\"\\\");\\nmsg.vidStartHRJ = st_JST_do.getFullYear() + \\\"\u5e74\\\" + (st_JST_do.getMonth() + 1) + \\\"\u6708\\\" + st_JST_do.getDate() + \\\"\u65e5 \\\" + st_JST_do.getHours() + \\\"\u6642\\\" + st_JST_do.getMinutes() + \\\"\u5206\\\" + st_JST_do.getSeconds() + \\\"\u79d2\\\";\\nmsg.vidEndHRJ = nv_JST_do.getFullYear() + \\\"\u5e74\\\" + (nv_JST_do.getMonth() + 1) + \\\"\u6708\\\" + nv_JST_do.getDate() + \\\"\u65e5 \\\" + nv_JST_do.getHours() + \\\"\u6642\\\" + nv_JST_do.getMinutes() + \\\"\u5206\\\" + nv_JST_do.getSeconds() + \\\"\u79d2\\\";\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":1190,\"y\":680,\"wires\":[[\"5d90401f.2ae83\"]]},{\"id\":\"5d90401f.2ae83\",\"type\":\"template\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Gen Page Vid\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"html\",\"syntax\":\"mustache\",\"template\":\"<head>\\n  <link href=\\\"http://vjs.zencdn.net/5.9.2/video-js.css\\\" rel=\\\"stylesheet\\\">\\n\\n  <!-- If you'd like to support IE8 -->\\n  <script src=\\\"http://vjs.zencdn.net/ie8/1.1.2/videojs-ie8.min.js\\\"></script>\\n</head>\\n\\n<body>\\n    <h2>Start Time: {{vidStartHRJ}} <br> End Time: {{vidEndHRJ}}</h2>\\n    <a href=\\\"http://xxxxx.mybluemix.net/eengetvideo?type=playvideo&camName={{camName}}&st={{nextVideoJ}}&auth_key={{auth_key}}\\\">\u6b21\u306e\u30d3\u30c7\u30aa</a><br><br>\\n  <video id=\\\"my-video\\\" class=\\\"video-js vjs-default-skin\\\" controls preload=\\\"auto\\\" width=\\\"640\\\" height=\\\"480\\\"\\n  data-setup=\\\"{}\\\">\\n    <source src=\\\"{{{liveurl}}}\\\" type='video/x-flv'>\\n    <p class=\\\"vjs-no-js\\\">\\n      To view this video please enable JavaScript, and consider upgrading to a web browser that\\n      <a href=\\\"http://videojs.com/html5-video-support/\\\" target=\\\"_blank\\\">supports HTML5 video</a>\\n    </p>\\n  </video>\\n  <script src=\\\"http://vjs.zencdn.net/5.9.2/video.js\\\"></script>\\n</body>\",\"x\":1440,\"y\":680,\"wires\":[[\"ac42b9c4.9f6a38\"]]},{\"id\":\"d797abe1.d260e8\",\"type\":\"debug\",\"z\":\"8f46ef33.15d9a\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"url\",\"x\":640,\"y\":40,\"wires\":[]},{\"id\":\"8b25b608.cf4988\",\"type\":\"debug\",\"z\":\"8f46ef33.15d9a\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"headers\",\"x\":890,\"y\":380,\"wires\":[]}]\n\n\u30a4\u30f3\u30dd\u30fc\u30c8\u304c\u5b8c\u4e86\u3059\u308b\u3068\u3001\u305d\u308c\u305e\u308c\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002\n\n\n\n\u4eca\u56de\u306f\u304b\u306a\u308a\u5927\u639b\u304b\u308a\u4ed5\u7d44\u307f\u306b\u898b\u3048\u307e\u3059\u304c\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u30c7\u30fc\u30bf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u969b\u306b\u8a8d\u8a3c\u304c\u5fc5\u8981\u306a\u3053\u3068\u3084\u3001\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9/\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6642\u306e\u65e2\u5b58\u30d5\u30a1\u30a4\u30eb\u30c1\u30a7\u30c3\u30af\u306a\u3069\u3001\u8272\u3005\u306a\u30ed\u30b8\u30c3\u30af\u304c\u5fc5\u8981\u306b\u306a\u308b\u305f\u3081\u3053\u306e\u3088\u3046\u306a\u5927\u304d\u3055\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u672c\u6765\u306f\u30b5\u30d6\u30d5\u30ed\u30fc\u3092\u5897\u3084\u3057\u305f\u308a\u30e9\u30a4\u30d6\u30e9\u30ea\u5316\u3059\u308b\u306a\u3069\u306e\u7701\u529b\u5316\u3092\u884c\u306a\u3046\u3079\u304d\u3067\u3059\u304c\u3001\u8aac\u660e\u7528\u306b\u5197\u9577\u306b\u3057\u3066\u3044\u308b\u90e8\u5206\u3082\u3042\u308a\u307e\u3059\u306e\u3067\u3054\u4e86\u627f\u4e0b\u3055\u3044\u3002\n\n\u7e4b\u3052\u3066\u307f\u3088\u3046\n\u3053\u308c\u3067\u6e96\u5099\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\u5b9f\u969b\u306bURL\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u63a5\u7d9a\u5148\u306eURL\u306f\u3001\nhttp://Bluemix\u30a2\u30d7\u30ea\u540d+myblemix.net\u7b49/eengetvideo\n\n\u3067\u3059\u3002\n\u3053\u306e\u4ed5\u7d44\u306f\u30ab\u30e1\u30e9\u540d\u3001\u30bf\u30a4\u30d7\uff08\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306a\u306e\u304b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306a\u306e\u304b\uff09\u3001\u958b\u59cb\u6642\u9593\u3001\u7d42\u4e86\u6642\u9593\u304c\u5fc5\u8981\u3067\u3059\u306e\u3067\u3001\n?type=\u30bf\u30a4\u30d7&camName=\u30ab\u30e1\u30e9\u540d&st=\u958b\u59cb\u6642\u9593&et=\u7d42\u4e86\u6642\u9593\n\n\u3068\u3044\u3046\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4e0a\u8a18\u306eURL\u306b\u4ed8\u52a0\u3057\u307e\u3059\u3002\u6700\u7d42\u7684\u306b\u306f\u3001\nhttp://Bluemix\u30a2\u30d7\u30ea\u540d+myblemix.net\u7b49/eengetvideo?type=\u30bf\u30a4\u30d7&camName=\u30ab\u30e1\u30e9\u540d&st=\u958b\u59cb\u6642\u9593&et=\u7d42\u4e86\u6642\u9593\n\n\u3068\u306a\u308a\u307e\u3059\u3002\u30bf\u30a4\u30d7\u306f\u3001\n\n\n\n\u30bf\u30a4\u30d7\u540d\n\u5b9f\u884c\u5185\u5bb9\n\n\n\n\ngetvideo\n\u52d5\u753b\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n\nputvideo\n\u52d5\u753b\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n\n\nlistvideo\n\u52d5\u753b\u306e\u30ea\u30b9\u30c8\u8868\u793a\n\n\nplayvideo\n\u52d5\u753b\u306e\u518d\u751f\u203b\n\n\n\n\u203bplayvideo\u306f\u672a\u5b9f\u88c5\n\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u52d5\u753b\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n\n\u52d5\u753b\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3092\u884c\u306a\u3046\u306b\u306f\u3001\u4f8b\u3048\u3070\u3001\nhttps://yyyyyyyy.mybluemix.net/eengetvideo?type=putvideo&camName=xxxxxxxxxxx&st=2017/01/26 10:00:00&et=2017/01/26 10:05:00\n\u3053\u3093\u306a\u611f\u3058\u306eURL\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30ab\u30e1\u30e9ID\u3068\u65e5\u6642\u306f\u3054\u81ea\u8eab\u3067\u7ba1\u7406\u3057\u3066\u3044\u308b\u30ab\u30e1\u30e9\u306eESN\u540d\u3001\u65e5\u6642\u306f\u300cYYYYMMDD \uff08\u30b9\u30da\u30fc\u30b9\uff09HH:MM:SS\u300d\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u3053\u306eURL\u3067\u30a2\u30af\u30bb\u30b9\u3092\u884c\u3046\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\nStatus Code is returned : 201\n\n\u4e0a\u8a18\u30e1\u30c3\u30bb\u30fc\u30b8\u306fopenstack\u306e\u300cObject Storage API\u300d\u306b\u3088\u308b\u3068\u3001\n\nThe Created (201) response code indicates a successful write.\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u306e\u3067\u3001\u7121\u4e8b\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u304c\u3067\u304d\u305f\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\u3067\u306f\u3053\u3053\u3067\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\u307e\u305a\u306fBluemix\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u958b\u304d\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u30b5\u30fc\u30d3\u30b9\u540d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u30b5\u30fc\u30d3\u30b9\u306e\u8a73\u7d30\u304c\u958b\u304d\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u52d5\u753b\u306f\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u5165\u308a\u307e\u3059\u306e\u3067\u30b3\u30f3\u30c6\u30ca\u540d\uff08\u3053\u3053\u3067\u306fEENStr001\uff09\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u30b3\u30f3\u30c6\u30ca\u306e\u5185\u5bb9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u8907\u6570\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u5834\u5408\u306b\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u30ab\u30e1\u30e9\u306eESN\u3068\u958b\u59cb\u3001\u7d42\u4e86\u6642\u9593\uff08\u5171\u306bUTC\uff09\u304c\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u305d\u308c\u3092\u983c\u308a\u306b\u63a2\u3057\u307e\u3059\u3002\n\n\u8a66\u3057\u306b\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u3092on\u306b\u3057\u3001\u300c\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u9078\u629e\u300d\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300c\u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u30d5\u30a1\u30a4\u30eb\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308c\u307e\u3057\u305f\u3089\u3001\u8a66\u3057\u306b\u518d\u751f\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nVLC\u306e\u3088\u3046\u306aFLV\u3092\u518d\u751f\u53ef\u80fd\u306a\u30d7\u30ec\u30a4\u30e4\u30fc\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u518d\u751f\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002\n\n\n\u52d5\u753b\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n\u305d\u308c\u3067\u306f\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u5148\u7a0b\u306eURL\u304b\u3089\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u5185\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u307e\u3057\u3087\u3046\u3002\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3092\u884c\u306a\u3046\u306b\u306f\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u4f7f\u7528\u3057\u305f\u300cputvideo\u300d\u306e\u4ee3\u308f\u308a\u306b\u300cgetvideo\u300d\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\nhttps://yyyyyyyy.mybluemix.net/eengetvideo?type=getvideo&camName=xxxxxxxxxxx&st=2017/01/26 10:00:00&et=2017/01/26 10:05:00\n\u30d6\u30e9\u30a6\u30b6\u3067\u5b9f\u884c\u3059\u308b\u3068\u3001\u5510\u7a81\u306b\u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u304c\u958b\u59cb\u3055\u308c\u307e\u3059\u306e\u3067\u3054\u6ce8\u610f\u4e0b\u3055\u3044\u3002\n\u3053\u308c\u3060\u3068\u300c\u76f4\u63a5Eagle Eye\u304b\u3089\u843d\u3068\u3057\u3066\u308b\u3093\u3058\u3083\u306a\u3044\u306e\uff1f\uff1f\u300d\u3068\u7a7f\u3063\u305f\u898b\u65b9\u3092\u3055\u308c\u308b\u306e\u3067\u3001\u3053\u3053\u3067Node-RED\u306e\u753b\u9762\u3092\u898b\u3066\u307e\u3057\u3087\u3046\u3002\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3068\u540c\u6642\u306bNode-RED\u306e\u753b\u9762\u3092\u898b\u308b\u3068\u3001\u300cGet video from ObjStr\u300d\u3068\u3044\u3046\u30ce\u30fc\u30c9\u3067\u300crequesting\u300d\u3068\u9752\u3044\u30dc\u30fc\u30eb\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u30d5\u30ed\u30fc\u3092\u898b\u3066\u9802\u3051\u308c\u3070\u308f\u304b\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3053\u306e\u30ce\u30fc\u30c9\u306b\u5230\u9054\u3059\u308b\u306b\u306f\u9014\u4e2d\u306e\u30ce\u30fc\u30c9\uff08Q_ObjStor\u3001ObjStr Exist\uff09\u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u5185\u306b\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306e\u307f\u3068\u3044\u3046\u6761\u4ef6\u306e\u30af\u30ea\u30a2\u304c\u5fc5\u9808\u306b\u306a\u308a\u307e\u3059\u3002\u305d\u306e\u70ba\u3001\u3053\u306e\u30ce\u30fc\u30c9\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3068\u3044\u3046\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u7d4c\u7531\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u304a\u308f\u304b\u308a\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\nNode-RED\u306b\u304a\u3051\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u4f7f\u3044\u65b9\n\u5192\u982d\u3067\u3082\u8a18\u8f09\u3057\u307e\u3057\u305f\u3068\u304a\u308a\u3001Node-RED\u306eContributes\u3055\u308c\u3066\u3044\u308b\u30ce\u30fc\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3068\u6271\u3048\u308b\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u304c5MB\u306b\u5236\u9650\u3055\u308c\u308b\u305f\u3081\u3001\u5730\u9053\u306b\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u5bfe\u5fdc\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u8a8d\u8a3c\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u8a8d\u8a3c\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID\n\u30e6\u30fc\u30b6\u30fcID\n\u30d1\u30b9\u30ef\u30fc\u30c9\n\n\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u308c\u3092\u4e0b\u8a18\u306e\u30b3\u30fc\u30c9\u306e\u305d\u308c\u305e\u308c\u306e\u5834\u6240\u306b\u8a18\u5165\u3057\u307e\u3059\u3002\nvar vcapsvc = context.global.VCAP_SERVICES;\n\nvar objcred = [];\n\nobjcred.projectId = \"<\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID>\";\nobjcred.userId = \"<\u30e6\u30fc\u30b6\u30fcID>\";\nobjcred.password = \"<\u30d1\u30b9\u30ef\u30fc\u30c9>\";\n\nvar authbody = {\n    \"auth\": {\n        \"identity\": {\n            \"methods\": [\n                \"password\"\n            ],\n            \"password\": {\n                \"user\": {\n                    \"id\": objcred.userId,\n                    \"password\": objcred.password\n                }\n            }\n        },\n        \"scope\": {\n            \"project\": {\n                \"id\": objcred.projectId\n            }\n        }\n    }\n};\n\nmsg.payload = JSON.stringify(authbody);\n\nreturn msg;\n\n\u3053\u308c\u3067\u8a8d\u8a3c\u306ebody\u304c\u3067\u304d\u3042\u304c\u3063\u305f\u306e\u3067\u3001\u3053\u308c\u3092\nhttps://identity.open.softlayer.com/v3/auth/tokens\n\u306bPOST\u3057\u307e\u3059\u3002\n\u3053\u3053\u304b\u3089\u51fa\u529b\u3055\u308c\u305fJSON response\u3092\u3001JSONPath\u306e\u30ce\u30fc\u30c9\u3067\u3001\n$.token.catalog[?(@.type === \"object-store\")].endpoints[?(@.region_id === \"dallas\" && @.interface === \"public\")].url\n\n\u3068\u30af\u30a8\u30ea\u3059\u308b\u3053\u3068\u3067\u3001\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8URL\u304c\u8fd4\u3055\u308c\u3001x-subject-token\u3068\u3044\u3046\u30c8\u30fc\u30af\u30f3\u3082Response headers\u306e\u4e2d\u3067\u8fd4\u3055\u308c\u307e\u3059\u3002\u3053\u3053\u3067\u306fregion\u304cdallas\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u30ed\u30f3\u30c9\u30f3\u306e\u65b9\u306flondon\u306b\u5909\u66f4\u3057\u3066\u4e0b\u3055\u3044\u3002\nglobal.set(\"obj_token\", msg.headers['x-subject-token']);\nglobal.set(\"epurl\", msg.payload[0]);\n\nmsg.payload = global.get(\"obj_token\") + \" \" + global.get(\"epurl\");\n\nreturn msg;\n\n\u3053\u3053\u3067\u3084\u3063\u3068\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u306b\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306eURL\u3068\u3001\u30a2\u30af\u30bb\u30b9\u7528\u306e\u30c8\u30fc\u30af\u30f3\u304c\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u3092\u4f7f\u3046\u3053\u3068\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u7b49\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\u3082\u3061\u308d\u3093\u30b3\u30f3\u30c6\u30ca\u306e\u4f5c\u6210\u306a\u3069\u3082\u53ef\u80fd\u3067\u3059\u3002\n\u4ee5\u4e0b\u306f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u5185\u5bb9\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u30b3\u30fc\u30c9\u3067\u3059\u3002\u3053\u3053\u3067\u306f\u5148\u7a0b\u53d6\u5f97\u3057\u305f\u30d8\u30c3\u30c0\u306e\u5185\u5bb9\u3092\u5b9f\u969b\u306eRequest headers\u306b\u683c\u7d0d\u3057\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30a4\u30ca\u30ea\u30d0\u30c3\u30d5\u30a1\u304b\u3089Attachment\u306b\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3092\u884c\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\nmsg.headers = [];\nmsg.headers['X-Auth-Token'] = global.get(\"obj_token\");\nmsg.epurl = global.get(\"epurl\");\n\nmsg.flvfilename = msg.camID + \"_\" + msg.st_JST + \"_\" + msg.et_JST + \".flv\";\nmsg.orgheaders['Content-Disposition'] = \"attachment; filename=\" + msg.flvfilename;\n\nreturn msg;\n\n\u6b21\u306b\u3053\u308c\u3092\u6b21\u306eURL\u306b\u5bfe\u3057\u3066GET\u3092\u884c\u3044\u307e\u3059\u3002\n{{{epurl}}}/EENStr001/{{payload}}\n\u3053\u3053\u3067\u6307\u5b9a\u3057\u3066\u3044\u308bpayload\u306f\u30b5\u30d6\u30d5\u30ed\u30fc\u5185\u306e\u300cSearch the video\u300d\u30ce\u30fc\u30c9\u3067\u751f\u6210\u3057\u3066\u3044\u307e\u3059\u3002\nvar nfyLength = msg.payload.length;\n\nfor (itr = 0; itr < nfyLength; itr++){\n    if ( msg.payload[itr].meta.camid ) {\n        if ( msg.camName == msg.payload[itr].meta.camname && msg.vidStart == msg.payload[itr].meta.stets && msg.vidEnd == msg.payload[itr].meta.etets) {\n            msg.flvname = msg.payload[itr].name;\n        }\n    }\n}\n\nmsg.payload = \"\";\nmsg.payload = msg.flvname;\n\nreturn msg;\n\n\u3053\u306e\u6d41\u308c\u3067\u52d5\u753b\u306e\u53d6\u5f97\u3092\u884c\u306a\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u6b21\u306b\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u65b9\u6cd5\u3092\u898b\u3066\u307e\u3057\u3087\u3046\u3002\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3092\u884c\u306a\u3046\u969b\u306b\u3082\u540c\u69d8\u306e\u65b9\u6cd5\u3067\u884c\u306a\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u304c\u3001\u3053\u3053\u3067\u306f\u305b\u3063\u304b\u304f\u3067\u3059\u306e\u3067\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u6a5f\u80fd\u306e\u4e00\u3064\u3067\u3042\u308b\u300c\u30e1\u30bf\u30c7\u30fc\u30bf\u300d\u306e\u683c\u7d0d\u3082\u884c\u3044\u307e\u3059\u3002\u30e1\u30bf\u30c7\u30fc\u30bf\u306f\u3042\u3063\u3066\u3082\u7121\u304f\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u4f7f\u3063\u305f\u5168\u6587\u691c\u7d22\u304c\u884c\u3048\u307e\u3059\u306e\u3067\u3001\u5927\u5909\u4fbf\u5229\u3067\u3059\u3002\u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u691c\u7d22\u306f\u300cMetadataSearchAPI\u300d\u306b\u8a73\u7d30\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\nmsg.headers['X-Auth-Token'] = global.get(\"obj_token\");\nmsg.headers['X-Object-Meta-camName'] = msg.camName;\nmsg.headers['X-Object-Meta-camID'] = msg.camID;\nmsg.headers['X-Object-Meta-stets'] = msg.vidStart;\nmsg.headers['X-Object-Meta-etets'] = msg.vidEnd;\n\nmsg.flvfilename = msg.camID + \"_\" + msg.vidStart + \"_\" + msg.vidEnd + \".flv\";\n\nmsg.epurl = global.get(\"epurl\");\nreturn msg;\n\n\u4e0a\u8a18\u306b\u3042\u308a\u307e\u3059\u3068\u304a\u308a\u3001\u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u683c\u7d0d\u306f\u3001\nmsg.headers['X-Object-Meta-camName'] = msg.camName;\n\n\u306e\u3088\u3046\u306bRequest Header\u306b['X-Object-Meta-xxxxxx']\u3068\u3059\u308b\u3053\u3068\u3067\u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u540d\u79f0\u3092\u6c7a\u5b9a\u3057\u3001\u3053\u306e\u5185\u5bb9\u3092\u300c = msg.camName\u300d\u3068\u4ee3\u5165\u3059\u308b\u3053\u3068\u3067\u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u5185\u5bb9\u3092\u683c\u7d0d\u3067\u304d\u307e\u3059\u3002\n\u3053\u306e\u5185\u5bb9\u3067\u4ee5\u4e0b\u306eURL\u306bPUT\u3057\u307e\u3059\u3002\n{{{epurl}}}/EENStr001/{{flvfilename}}\n\u3053\u306e\u5b9f\u884c\u7d50\u679c\u306fHTTP Response\u3067\u8fd4\u3063\u3066\u304d\u307e\u3059\u306e\u3067\u3001\u3053\u308c\u3092payload\u3068\u3057\u3066\u8fd4\u3057\u307e\u3059\u3002\n\n\u6700\u5f8c\u306b\n\u4eca\u56de\u306e\u3088\u3046\u306b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u3088\u3046\u306aNode-RED\u3067\u7528\u610f\u3055\u308c\u3066\u3044\u306a\u3044\uff08\u307e\u305f\u306f\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3051\u308c\u3069\u5236\u7d04\u304c\u3042\u308b\u306a\u3069\uff09\u5834\u5408\u306b\u306f\u3001\u30b3\u30fc\u30c9\u3067\u8868\u73fe\u3057\u3001\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u4e00\u898b\u9762\u5012\u3067\u3059\u304c\u3001\u65b0\u3057\u3044\u30b5\u30fc\u30d3\u30b9\u304c\u767a\u8868\u3055\u308c\u3066\u3082\u3059\u3050\u306b\u5bfe\u5fdc\u3067\u304d\u308b\u3053\u3068\u3092\u8003\u3048\u308b\u3068\u3001\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u307b\u3046\u304c\u5f8c\u3005\u697d\u3060\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306fBluemix\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067CDN\u304c\u6709\u52b9\u5316\u3055\u308c\u3066\u3044\u308b\u306e\u304b\uff08\u9593\u9055\u3063\u3066\u308b\uff1f\uff1f\uff09\u3001\u30b9\u30c8\u30ec\u30fc\u30b8\u304c\u30c0\u30e9\u30b9\u306b\u3042\u308b\u5272\u306b\u306f\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u901f\u5ea6\u304c\u975e\u5e38\u306b\u65e9\u304f\u611f\u3058\u307e\u3057\u305f\u3002\u307e\u305f\u7121\u6599\u30d7\u30e9\u30f3\u306e\u5834\u5408\u306f5GB\u3068\u3044\u3046\u5236\u9650\u306f\u3042\u308b\u3082\u306e\u306e\u3001\u67d0\u30af\u30e9\u30a6\u30c9\u30b5\u30fc\u30d3\u30b9\u3068\u7570\u306a\u308a\u6d41\u91cf\u3067\u306e\u8ab2\u91d1\u304c\u7121\u3044\u3053\u3068\u3082\u5927\u304d\u306a\u7279\u5fb4\u3067\u3059\u3002\u3053\u308c\u306f\u958b\u767a\u3001\u30c6\u30b9\u30c8\u3092\u884c\u306a\u3046\u6642\u306b\u306f\u8ab2\u91d1\u3055\u308c\u305f\u304f\u306a\u3044\u5834\u5408\u306a\u3069\u3001\u975e\u5e38\u306b\u6709\u7528\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306f\u7dcf\u3058\u3066\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u5171\u306b\u512a\u79c0\u3060\u3068\u8003\u3048\u3089\u308c\u307e\u3059\u3002\n\u3053\u306e\u6b21\u3053\u305d\u90fd\u5408\u304c\u5408\u3048\u3070\u3001BOSCH\u88fd\u30ab\u30e1\u30e9\u306b\u3088\u308b\u4eba\u6570\u30ab\u30a6\u30f3\u30c8\u3092\u66f8\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30e9\u30a4\u30bb\u30f3\u30b9\u3001\u8457\u4f5c\u6a29\u7b49\n\u672c\u30b9\u30af\u30ea\u30d7\u30c8\u3001\u30ce\u30fc\u30c9\u69cb\u6210\u3001\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u5185\u5bb9\u306b\u3064\u3044\u3066\u306fMIT License\u3092\u9069\u7528\u3057\u307e\u3059\u3002\nEagle Eye Networks\u306e\u5546\u6a19\u304a\u3088\u3073\u30ed\u30b4\u306b\u3064\u3044\u3066\u306fEagle Eye Networks, Inc.\u306b\u5e30\u5c5e\u3057\u307e\u3059\u3002\nIBM\u304a\u3088\u3073IBM Bluemix\u3001Node-Red\u306e\u5546\u6a19\u304a\u3088\u3073\u30ed\u30b4\u306b\u3064\u3044\u3066\u306fInternational Business Machines Corporation\u306b\u5e30\u5c5e\u3057\u307e\u3059\u3002\nnode.js\u306e\u5546\u6a19\u304a\u3088\u3073\u30ed\u30b4\u306b\u3064\u3044\u3066\u306fNode.js contributors\u306b\u5e30\u5c5e\u3057\u307e\u3059\u3002\n#Eagle Eye Networks API\u3067\u7c21\u5358\u30d3\u30c7\u30aa\u9023\u643a \u305d\u306e4 \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3078\u306e\u52d5\u753b\u306e\u4fdd\u5b58\n\nBOSCH\u88fd\u30ab\u30e1\u30e9\u306b\u3088\u308b\u4eba\u6570\u6e2c\u5b9a\u306e\u5dfb\u306f\u3001\u90fd\u5408\u306b\u3088\u308a\u6b21\u56de\u4ee5\u964d\u306b\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u671f\u5f85\u3055\u305b\u3066\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u3002\n[\u524d\u3005\u56de\u306e\u52d5\u753b\u53d6\u5f97](http://qiita.com/c-nova/items/16cff2e933be9ff9adbe)\u3067\u306f\u3001\u53d6\u5f97\u3057\u305f\u52d5\u753b\u306f\u305d\u306e\u307e\u307e\u518d\u751f\u3057\u3066\u3001\u30cf\u30a4\u7d42\u308f\u308a\u3068\u3044\u3046\u611f\u3058\u3060\u3063\u305f\u3068\u601d\u3044\u307e\u3059\u3002\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u3053\u308c\u3063\u3066\u5b9f\u306f\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u306f\u7121\u3044\u306e\u3067\u306f\u30fb\u30fb\u30fb\u3001\u3068\u5185\u5fc3\u601d\u3063\u3066\u304a\u308a\u307e\u3057\u305f\u306e\u3067\u3001\u3053\u3053\u3067\u306f\u30af\u30e9\u30a6\u30c9\u3089\u3057\u304f\u30af\u30e9\u30a6\u30c9\uff08Bluemix\uff09\u4e0a\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u52d5\u753b\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u304f\u3001\u3068\u3044\u3046\u3053\u3068\u3092\u3084\u3063\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n## \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3068\u306f\nBluemix\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306f\u3001\u7c21\u5358\u306b\u8a00\u3063\u3066\u3057\u307e\u3048\u3070IBM\u306e\u5225\u30af\u30e9\u30a6\u30c9~~\u3067\u3042\u308b~~\u3060\u3063\u305f**\u300cSoftLayer\u300d\u4e0a\u306e\u300c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u300d\u30b5\u30fc\u30d3\u30b9**\u3067\u3059\u3002\u3053\u308c\u306f[\u3053\u3053](https://www.change-makers.jp/docs/softlayer-config-guide/10354)\u306b\u8a73\u3057\u3044\u8aac\u660e\u304c\u3042\u308b\u3068\u304a\u308a\u3067\u3059\u304c\u3001\u307b\u307c\u305d\u306e\u307e\u307e\u300cOpenStack Swift\u300d\u3067\u3059\u3002OpenStack Swift\u306e\u8aac\u660e\u306f[\u3053\u3053](http://docs.openstack.org/developer/swift/overview_architecture.html )\u306b\u3042\u308a\u307e\u3059\u304c\u3001\u7279\u5fb4\u3092\u307e\u3068\u3081\u308b\u3068\u3001\n\n- \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306f\u5927\u91cf\u30c7\u30fc\u30bf\u306e\u4fdd\u7ba1\u306b\u597d\u9069\n- \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3067\u306f\u3001\u7121\u505c\u6b62\u3067\u30b9\u30c8\u30ec\u30fc\u30b8\u5bb9\u91cf\u3092\u5897\u8a2d\u53ef\u80fd\n- \u4fdd\u5b58\u30c7\u30fc\u30bf\u306f\u3001\u5185\u90e8\u30673\u91cd\u306e\u30b3\u30d4\u30fc\u3092\u4fdd\u6301\n- \u4e00\u8cab\u6027\u691c\u67fb\u306e\u30bf\u30b9\u30af\u304c\u5e38\u6642\u5b9f\u884c\n- (\u7269\u7406\u969c\u5bb3\u306b\u5bfe\u3059\u308b\u3068\u3044\u3046\u610f\u5473\u3067)\u30c7\u30fc\u30bf\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306f\u4e0d\u8981\n- \u4e00\u822c\u306e\u30c7\u30a3\u30b9\u30af\u306e\u3088\u3046\u306a\u30a2\u30af\u30bb\u30b9\u306f\u4e0d\u53ef\u3002HTTP\u53ca\u3073HTTPS\u3092\u4f7f\u7528\u3057\u305f\u30c7\u30fc\u30bf\u306e\u5165\u51fa\u529b\u306e\u307f\u53ef\u80fd\n\n\u3068\u3044\u3046\u611f\u3058\u3067\u3059\u3002EEN\u306b\u9650\u3063\u305f\u8a71\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3069\u3046\u3057\u3066\u3082\u5927\u5bb9\u91cf\u306b\u306a\u308a\u304c\u3061\u306a\u52d5\u753b\u30d5\u30a1\u30a4\u30eb\u306e\u4fdd\u5b58\u306b\u6700\u9069\u306a\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3068\u8a00\u3048\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u7279\u306b\u3053\u308c\u304b\u30894K, 8K\u306730, 60fps\u30683\uff5e16\u500d\u3068\u3044\u3046\u5358\u4f4d\u3067\u5bb9\u91cf\u304c\u5897\u52a0\u3059\u308b\u3053\u3068\u304c\u8003\u3048\u3089\u308c\u308b\u305f\u3081\u3001**\u30af\u30e9\u30a6\u30c9\u3067\u52d5\u753b\u3092\u6271\u3046\u306b\u306f\u5fc5\u9808\u306e\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3**\u3068\u8a00\u3048\u307e\u3059\u3002\u307e\u305fSoftLayer, Bluemix\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306fCDN\u3068\u306e\u9023\u643a\u304c\u884c\u3048\u308b\u305f\u3081\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u914d\u4fe1\u306e\u9762\u304b\u3089\u898b\u3066\u3082\u975e\u5e38\u306b\u512a\u4f4d\u304c\u9ad8\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n##\u74b0\u5883\u3001\u4e8b\u524d\u78ba\u8a8d\n\u5927\u5143\u306e\u74b0\u5883\u6761\u4ef6\u3084\u4e8b\u524d\u78ba\u8a8d\u9805\u76ee\u306f[\u7b2c1\u56de](http://qiita.com/c-nova/items/6da5482019b9ca7b7f62#%E7%92%B0%E5%A2%83)\u3068\u540c\u69d8\u3067\u3059\u306e\u3067\u3001<-\u306e\u30ea\u30f3\u30af\u5148\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n\u4eca\u56de\u306f\u4e0a\u8a18\u74b0\u5883\u3068\u306f\u5225\u306b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u30b5\u30fc\u30d3\u30b9\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\u30d0\u30a4\u30f3\u30c9\u306f\u3057\u3066\u3082\u3057\u306a\u304f\u3066\u3082\u554f\u984c\u306a\u304f\u3001\u307e\u305f\u7121\u6599\u30d7\u30e9\u30f3\u3067\u304a\u8a66\u3057\u9802\u3044\u3066\u3082\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u306e\u5834\u5408\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u4e0a\u9650\u304c5GB\u306b\u5236\u9650\u3055\u308c\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n\u307e\u305f\u4e0b\u8a18\u306e\u4f8b\u3092\u5b9f\u969b\u306b\u884c\u3046\u5834\u5408\u306b\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u3068\u3057\u3066\u300c**EENStr001**\u300d\u3068\u3044\u3046\u540d\u79f0\u3067\u4e8b\u524d\u306b\u4f5c\u6210\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\n###nodered.org\u306b\u3042\u308b\u300cnode-red-contrib-objectstore\u300d\u306b\u3064\u3044\u3066\n\nNode-RED\u3067\u4f7f\u3048\u308b\u30ce\u30fc\u30c9\u3084\u30d5\u30ed\u30fc\u306a\u3069\u3001\u6709\u5fd7\u306b\u3088\u3063\u3066Contributes\u3055\u308c\u3066\u3044\u308b\u69d8\u3005\u306a\u4fbf\u5229\u30b3\u30fc\u30c9\u304c[nodered.org](node-red-contrib-objectstore)\u306b\u7f6e\u304b\u308c\u3066\u3044\u307e\u3059\u3002\u5b9f\u306f\u3053\u306e\u4e2d\u306b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u7c21\u5358\u306b\u6271\u3046\u305f\u3081\u306e\u300c[node-red-contrib-objectstore](https://flows.nodered.org/node/node-red-contrib-objectstore)\u300d\u3068\u3044\u3046\u30ce\u30fc\u30c9\u304c\u3042\u308a\u307e\u3059\u30022016\u5e7410\u6708\u9803\u306b\u4f5c\u6210\u3055\u308c\u305f\u3088\u3046\u3067\u3001\u79c1\u304c\u3053\u306e\u30d5\u30ed\u30fc\u3092\u4f5c\u6210\u3057\u305f\u6642\u70b9\u3067\u306f\u7121\u304b\u3063\u305f\u306e\u3067\u300c\u304a\u3001\u3044\u3044\u306d\u300d\u3068\u601d\u3063\u3066\u4f7f\u304a\u3046\u3068\u601d\u3063\u3066\u8aac\u660e\u3092\u8aad\u3080\u3068\u3001\u300c**This node helps to deliver images (up to 5MB) as a payload via the REST API Interface of Swift.**\u300d\u3068\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u52d5\u753b\u3060\u3068\u6570\u5341M\u3001\u5834\u5408\u306b\u3088\u3063\u3066\u306fGB\u5358\u4f4d\u306b\u306a\u308b\u3053\u3068\u3082\u3042\u308b\u306e\u3067\u3001\u4eca\u56de\u306f\u4f7f\u7528\u3092\u898b\u5408\u308f\u305b\u307e\u3057\u305f\u3002\u7686\u69d8\u3082\u3054\u6ce8\u610f\u4e0b\u3055\u3044\u3002\n\n##Node-RED\u3067\u30a4\u30f3\u30dd\u30fc\u30c8\n\n\u4e0b\u8a18\u306eJSON Doc\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u305fNode-RED\u4e0a\u306b\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n- EEN\u8a8d\u8a3c\u3001\u8a8d\u53ef\u7528\u30ce\u30fc\u30c9\n\n```\n[{\"id\":\"48806d55.aa5ce4\",\"type\":\"inject\",\"z\":\"ba43e00b.410be\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"str\",\"repeat\":\"3600\",\"crontab\":\"\",\"once\":true,\"x\":110,\"y\":120,\"wires\":[[\"d8c2c88f.77af08\"]]},{\"id\":\"d8c2c88f.77af08\",\"type\":\"function\",\"z\":\"ba43e00b.410be\",\"name\":\"Get Auth Head\",\"func\":\"var user = \\\"<User ID>\\\";\\nvar password = \\\"<Password>\\\";\\nmsg.payload = 'username=' + user + '&password=' + password;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":340,\"y\":120,\"wires\":[[\"12ce9b05.337e65\"]]},{\"id\":\"12ce9b05.337e65\",\"type\":\"http request\",\"z\":\"ba43e00b.410be\",\"name\":\"\",\"method\":\"POST\",\"ret\":\"obj\",\"url\":\"https://login.eagleeyenetworks.com/g/aaa/authenticate\",\"x\":330,\"y\":180,\"wires\":[[\"3b5b7804.a42e28\"]]},{\"id\":\"3b5b7804.a42e28\",\"type\":\"http request\",\"z\":\"ba43e00b.410be\",\"name\":\"\",\"method\":\"POST\",\"ret\":\"obj\",\"url\":\"https://login.eagleeyenetworks.com/g/aaa/authorize\",\"x\":330,\"y\":240,\"wires\":[[\"f13c946.c2fa068\"]]},{\"id\":\"f13c946.c2fa068\",\"type\":\"contrib-json\",\"z\":\"ba43e00b.410be\",\"engine\":\"JSONPath\",\"command\":\"jq\",\"expr\":\"$.headers.set-cookie[1]\",\"complete\":\"complete\",\"prop\":\"payload\",\"name\":\"Put Cookie\",\"x\":570,\"y\":120,\"wires\":[[\"537bcaff.f5d6a4\"]]},{\"id\":\"537bcaff.f5d6a4\",\"type\":\"function\",\"z\":\"ba43e00b.410be\",\"name\":\"Form Auth Key\",\"func\":\"var cookies = msg.payload[0].split(\\\"; \\\");\\nfor (var i = 0; i < cookies.length; i++) {\\n\\tvar str = cookies[i].split(\\\"=\\\");\\n\\tif (str[0] === \\\"auth_key\\\") {\\n\\t\\tglobal.set(\\\"auth_key\\\", unescape(str[1]));\\n\\t\\tbreak;\\n\\t}\\n}\\nglobal.set(\\\"een_cookie\\\", msg.headers['set-cookie']);\\nmsg.payload = msg.statusCode;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":580,\"y\":180,\"wires\":[[\"d77b9c74.997fd\"]]},{\"id\":\"d77b9c74.997fd\",\"type\":\"http response\",\"z\":\"ba43e00b.410be\",\"name\":\"\",\"x\":550,\"y\":240,\"wires\":[]}]\n```\n\n- \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u8a8d\u8a3c\u7528\u30ce\u30fc\u30c9\n\n```\n[{\"id\":\"1c16a99a.698436\",\"type\":\"function\",\"z\":\"ba43e00b.410be\",\"name\":\"Gen Auth Token\",\"func\":\"var vcapsvc = context.global.VCAP_SERVICES;\\n\\nvar objcred = [];\\n\\nobjcred.projectId = \\\"<Project ID>\\\";\\nobjcred.userId = \\\"<User ID>\\\";\\nobjcred.password = \\\"<Password>\\\";\\n\\nvar authbody = {\\n    \\\"auth\\\": {\\n        \\\"identity\\\": {\\n            \\\"methods\\\": [\\n                \\\"password\\\"\\n            ],\\n            \\\"password\\\": {\\n                \\\"user\\\": {\\n                    \\\"id\\\": objcred.userId,\\n                    \\\"password\\\": objcred.password\\n                }\\n            }\\n        },\\n        \\\"scope\\\": {\\n            \\\"project\\\": {\\n                \\\"id\\\": objcred.projectId\\n            }\\n        }\\n    }\\n};\\n\\nmsg.payload = JSON.stringify(authbody);\\n\\nreturn msg;\",\"outputs\":\"1\",\"noerr\":0,\"x\":340,\"y\":680,\"wires\":[[\"23e6a7cd.41ac58\"]]},{\"id\":\"23e6a7cd.41ac58\",\"type\":\"http request\",\"z\":\"ba43e00b.410be\",\"name\":\"\",\"method\":\"POST\",\"ret\":\"obj\",\"url\":\"https://identity.open.softlayer.com/v3/auth/tokens\",\"x\":330,\"y\":740,\"wires\":[[\"278b943a.d8b4bc\"]]},{\"id\":\"278b943a.d8b4bc\",\"type\":\"contrib-json\",\"z\":\"ba43e00b.410be\",\"engine\":\"JSONPath\",\"command\":\"jq\",\"expr\":\"$.token.catalog[?(@.type === \\\"object-store\\\")].endpoints[?(@.region_id === \\\"dallas\\\" && @.interface === \\\"public\\\")].url\",\"complete\":\"property\",\"prop\":\"payload\",\"name\":\"URL JSON Parse\",\"x\":600,\"y\":680,\"wires\":[[\"a40563b.6916ca\"]]},{\"id\":\"d6b98c59.cd2fa\",\"type\":\"comment\",\"z\":\"ba43e00b.410be\",\"name\":\"Generate Object Storage Auth Key loop\",\"info\":\"\",\"x\":220,\"y\":620,\"wires\":[]},{\"id\":\"dc0820.a855c7e\",\"type\":\"inject\",\"z\":\"ba43e00b.410be\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"str\",\"repeat\":\"3600\",\"crontab\":\"\",\"once\":true,\"x\":110,\"y\":680,\"wires\":[[\"1c16a99a.698436\"]]},{\"id\":\"a40563b.6916ca\",\"type\":\"function\",\"z\":\"ba43e00b.410be\",\"name\":\"Add_Auth_Header\",\"func\":\"global.set(\\\"obj_token\\\", msg.headers['x-subject-token']);\\nglobal.set(\\\"epurl\\\", msg.payload[0]);\\n\\nmsg.payload = global.get(\\\"obj_token\\\") + \\\" \\\" + global.get(\\\"epurl\\\");\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":592,\"y\":740,\"wires\":[[\"b32a942f.aa2c08\"]]},{\"id\":\"b32a942f.aa2c08\",\"type\":\"debug\",\"z\":\"ba43e00b.410be\",\"name\":\"\",\"active\":false,\"console\":\"false\",\"complete\":\"false\",\"x\":810,\"y\":740,\"wires\":[]}]\n```\n\n- \u52d5\u753b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u7528\u30ce\u30fc\u30c9\n\n```\n[{\"id\":\"b0ca2077.42a85\",\"type\":\"subflow\",\"name\":\"P_ObjStor\",\"info\":\"\",\"in\":[{\"x\":90.00001525878906,\"y\":80.00000953674316,\"wires\":[{\"id\":\"4ecd6847.4c0198\"}]}],\"out\":[{\"x\":960,\"y\":80,\"wires\":[{\"id\":\"f5af6563.c06d68\",\"port\":0}]}]},{\"id\":\"b0a3895.39e6f78\",\"type\":\"http request\",\"z\":\"b0ca2077.42a85\",\"name\":\"Put the video to ObjStr\",\"method\":\"PUT\",\"ret\":\"txt\",\"url\":\"{{{epurl}}}/EENStr001/{{flvfilename}}\",\"tls\":\"\",\"x\":520,\"y\":80,\"wires\":[[\"f5af6563.c06d68\"]]},{\"id\":\"4ecd6847.4c0198\",\"type\":\"function\",\"z\":\"b0ca2077.42a85\",\"name\":\"Add_ObjStor_Header\",\"func\":\"msg.headers['X-Auth-Token'] = global.get(\\\"obj_token\\\");\\nmsg.headers['X-Object-Meta-camName'] = msg.camName;\\nmsg.headers['X-Object-Meta-camID'] = msg.camID;\\nmsg.headers['X-Object-Meta-stets'] = msg.vidStart;\\nmsg.headers['X-Object-Meta-etets'] = msg.vidEnd;\\n\\nmsg.flvfilename = msg.camID + \\\"_\\\" + msg.vidStart + \\\"_\\\" + msg.vidEnd + \\\".flv\\\";\\n\\nmsg.epurl = global.get(\\\"epurl\\\");\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":270.00001525878906,\"y\":80.00000953674316,\"wires\":[[\"b0a3895.39e6f78\"]]},{\"id\":\"f5af6563.c06d68\",\"type\":\"template\",\"z\":\"b0ca2077.42a85\",\"name\":\"Status Response\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"Status Code is returned : {{statusCode}}\",\"x\":790,\"y\":80,\"wires\":[[]]},{\"id\":\"be5d194f.8245c8\",\"type\":\"subflow\",\"name\":\"Q_ObjStor\",\"info\":\"\",\"in\":[{\"x\":160,\"y\":260,\"wires\":[{\"id\":\"7379857d.1c345c\"}]}],\"out\":[{\"x\":1000,\"y\":260,\"wires\":[{\"id\":\"8aa1db99.119098\",\"port\":0}]}]},{\"id\":\"7379857d.1c345c\",\"type\":\"function\",\"z\":\"be5d194f.8245c8\",\"name\":\"Add ObjStor Header\",\"func\":\"msg.headers = [];\\nmsg.headers['X-Auth-Token'] = global.get(\\\"obj_token\\\");\\nmsg.headers['X-Context'] = \\\"search\\\";\\nmsg.epurl = global.get(\\\"epurl\\\");\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":340,\"y\":260,\"wires\":[[\"253c99f3.bcb436\"]]},{\"id\":\"253c99f3.bcb436\",\"type\":\"http request\",\"z\":\"be5d194f.8245c8\",\"name\":\"\",\"method\":\"GET\",\"ret\":\"obj\",\"url\":\"{{{epurl}}}/EENStr001?format=json\",\"x\":590,\"y\":260,\"wires\":[[\"8aa1db99.119098\"]]},{\"id\":\"8aa1db99.119098\",\"type\":\"function\",\"z\":\"be5d194f.8245c8\",\"name\":\"Search the video\",\"func\":\"var nfyLength = msg.payload.length;\\n\\nfor (itr = 0; itr < nfyLength; itr++){\\n    if ( msg.payload[itr].meta.camid ) {\\n        if ( msg.camName == msg.payload[itr].meta.camname && msg.vidStart == msg.payload[itr].meta.stets && msg.vidEnd == msg.payload[itr].meta.etets) {\\n            msg.flvname = msg.payload[itr].name;\\n        }\\n    }\\n}\\n\\nmsg.payload = \\\"\\\";\\nmsg.payload = msg.flvname;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":830,\"y\":260,\"wires\":[[]]},{\"id\":\"8be8f396.9b7ee\",\"type\":\"comment\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Get EEN Video (Range)\",\"info\":\"### Usage\\nhttp://xxxxxx.mybluemix.net/eengetvideo?type=<queryType>&camName=<Camera Name>&st=<Start Time>&et=<End Time>\\n\\n- type\\n    - playvideo\\n    - getvideo\\n    - putvideo\\n    - listvideo\\n\\n- camName\\n    - Camera Display Name\\n\\n- st\\n  Start time of request type. It must be 'Date' and 'Time' format.\\n  ex) 2016/02/16 10:00:00\\n  note) Don't enter as EEN Timestump format\\n\\n- et\\n  Same above.\\n  If omit 'et' option, list video fuction is retrieve a video that nearest one from specified 'st'.\\n\\n### Example\\nhttp://xxxxx.mybluemix.net/eengetvideo?type=listvideo&camName=EN-CDUM-002a&st=2016/02/16%2010:00:00&et=2016/02/16%2011:00:00\",\"x\":170,\"y\":80,\"wires\":[]},{\"id\":\"14dbc351.82116d\",\"type\":\"function\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Get Auth & Set EENTS\",\"func\":\"msg.orgheaders=msg.req.headers;\\n\\nif (msg.payload.auth_key) {\\n    msg.auth_key = msg.payload.auth_key;\\n} else {\\n    msg.auth_key = global.get(\\\"auth_key\\\");\\n}\\n\\nif (msg.payload.type) {\\n    msg.type = msg.payload.type;\\n} else {\\n    msg.type = \\\"playvideo\\\";\\n}\\nif (msg.payload.camName) {\\n    msg.camName = msg.payload.camName;\\n} else {\\n    msg.camName = \\\"all\\\";\\n}\\nif (msg.payload.st) {\\n    var st_JST = msg.payload.st;\\n} else {\\n    var st_JST = \\\"2016/1/1 00:00:00\\\";\\n}\\nif (msg.payload.et) {\\n    var et_JST = msg.payload.et;\\n} else {\\n    var et_JST = \\\"2016/1/31 23:59:59\\\";\\n}\\nif (msg.payload.test) {\\n    msg.test = msg.payload.test;\\n}\\n\\nvar st_JST_do = new Date(st_JST);\\nmsg.st_JST = [st_JST_do.getFullYear(),\\n                ( '0' + (st_JST_do.getMonth() + 1)).slice(-2),\\n                ( '0' + st_JST_do.getDate() ).slice(-2),\\n                ( '0' + st_JST_do.getHours() ).slice( -2 ),\\n                ( '0' + st_JST_do.getMinutes() ).slice( -2 ),\\n                ( '0' + st_JST_do.getSeconds() ).slice( -2 )\\n                ].join(\\\"\\\");\\n\\nvar st_UTC_do = new Date(st_JST_do.getTime() - 32400000);\\nmsg.st_UTC = [st_UTC_do.getFullYear(),\\n                ( '0' + (st_UTC_do.getMonth() + 1)).slice(-2),\\n                ( '0' + st_UTC_do.getDate() ).slice(-2),\\n                ( '0' + st_UTC_do.getHours() ).slice( -2 ),\\n                ( '0' + st_UTC_do.getMinutes() ).slice( -2 ),\\n                ( '0' + st_UTC_do.getSeconds() ).slice( -2 )\\n                ].join(\\\"\\\");\\n\\nvar et_JST_do = new Date(et_JST);\\nmsg.et_JST = [et_JST_do.getFullYear(),\\n                ( '0' + (et_JST_do.getMonth() + 1)).slice(-2),\\n                ( '0' + et_JST_do.getDate() ).slice(-2),\\n                ( '0' + et_JST_do.getHours() ).slice( -2 ),\\n                ( '0' + et_JST_do.getMinutes() ).slice( -2 ),\\n                ( '0' + et_JST_do.getSeconds() ).slice( -2 )\\n                ].join(\\\"\\\");\\n\\nvar et_UTC_do = new Date(et_JST_do.getTime() - 32400000);\\nmsg.et_UTC = [et_UTC_do.getFullYear(),\\n                ( '0' + (et_UTC_do.getMonth() + 1)).slice(-2),\\n                ( '0' + et_UTC_do.getDate() ).slice(-2),\\n                ( '0' + et_UTC_do.getHours() ).slice( -2 ),\\n                ( '0' + et_UTC_do.getMinutes() ).slice( -2 ),\\n                ( '0' + et_UTC_do.getSeconds() ).slice( -2 )\\n                ].join(\\\"\\\");\\n\\nif (msg.payload.et) {\\n    msg.urltmp = \\\"https://login.eagleeyenetworks.com/asset/list/video?start_timestamp=\\\" + msg.st_UTC + \\\".000;end_timestamp=\\\" + msg.et_UTC + \\\".000;A=\\\" + msg.auth_key + \\\";options=coalesce\\\";\\n} else {\\n    msg.urltmp = \\\"https://login.eagleeyenetworks.com/asset/list/video?start_timestamp=\\\" + msg.st_UTC + \\\".000;count=1;A=\\\" + msg.auth_key + \\\";options=coalesce\\\";\\n}\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":390,\"y\":139,\"wires\":[[\"af451c94.ae188\"]]},{\"id\":\"d6ba669.513e998\",\"type\":\"http in\",\"z\":\"8f46ef33.15d9a\",\"name\":\"GetVideoRange\",\"url\":\"/eengetvideo\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":140,\"y\":140,\"wires\":[[\"14dbc351.82116d\",\"a20c873e.54a508\"]]},{\"id\":\"af451c94.ae188\",\"type\":\"http request\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Get Camera ID\",\"method\":\"GET\",\"ret\":\"obj\",\"url\":\"https://login.eagleeyenetworks.com/g/device/list?A={{auth_key}}&t=camera&s=ATTD\",\"tls\":\"\",\"x\":360,\"y\":200,\"wires\":[[\"c605696f.f533f8\",\"d797abe1.d260e8\"]]},{\"id\":\"c605696f.f533f8\",\"type\":\"function\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Pull CamID & Set URL\",\"func\":\"var camLength = msg.payload.length;\\n\\nfor (itr = 0; itr < camLength; itr++){\\n    var camIdx = msg.payload[itr].indexOf(msg.camName);\\n    if ( camIdx > 0 ) {\\n        msg.camID = msg.payload[itr][camIdx - 1];\\n    }\\n}\\n\\nmsg.url = msg.urltmp + \\\";id=\\\" + msg.camID;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":380,\"y\":260,\"wires\":[[\"11a23b6c.ac6455\",\"d797abe1.d260e8\"]]},{\"id\":\"11a23b6c.ac6455\",\"type\":\"http request\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Get Video List\",\"method\":\"GET\",\"ret\":\"obj\",\"url\":\"\",\"tls\":\"\",\"x\":360,\"y\":320,\"wires\":[[\"9ea25155.56689\"]]},{\"id\":\"9ea25155.56689\",\"type\":\"function\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Pull Video Range\",\"func\":\"delete msg.url;\\n\\nvar vidLength = msg.payload.length;\\n\\nif ( msg.payload[0] ) {\\n    msg.vidStart = msg.payload[0].s;\\n} else {\\n    msg.vidStart = null;\\n}\\n\\nif ( vidLength == 1 ) {\\n    msg.vidEnd = msg.payload[0].e;\\n}\\n\\nfor (itr = 0; itr < vidLength; itr++){\\n    if ( itr == (vidLength - 1) ) {\\n        msg.vidEnd = msg.payload[itr].e;\\n    }\\n}\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":370,\"y\":380,\"wires\":[[\"f78ee296.411cb\",\"3e96fd65.7e77e2\"]]},{\"id\":\"9b2135e6.1272a8\",\"type\":\"switch\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Switch Type\",\"property\":\"type\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"eq\",\"v\":\"listvideo\",\"vt\":\"str\"},{\"t\":\"else\"}],\"checkall\":\"true\",\"outputs\":2,\"x\":650,\"y\":200,\"wires\":[[\"d4de5871.260428\"],[\"cbe26ee9.31757\"]]},{\"id\":\"f6b32c92.a3d9e\",\"type\":\"switch\",\"z\":\"8f46ef33.15d9a\",\"name\":\"ObjStr Exist\",\"property\":\"payload\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"nnull\"},{\"t\":\"null\"}],\"checkall\":\"true\",\"outputs\":2,\"x\":650,\"y\":320,\"wires\":[[\"7b3e58d6.b54778\"],[\"ecbf32b6.3870d\"]]},{\"id\":\"cbe26ee9.31757\",\"type\":\"subflow:be5d194f.8245c8\",\"z\":\"8f46ef33.15d9a\",\"name\":\"\",\"x\":650,\"y\":260,\"wires\":[[\"f6b32c92.a3d9e\"]]},{\"id\":\"7b3e58d6.b54778\",\"type\":\"switch\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Switch Type\",\"property\":\"type\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"eq\",\"v\":\"putvideo\",\"vt\":\"str\"},{\"t\":\"eq\",\"v\":\"playvideo\",\"vt\":\"str\"},{\"t\":\"eq\",\"v\":\"getvideo\",\"vt\":\"str\"}],\"checkall\":\"true\",\"outputs\":3,\"x\":890,\"y\":320,\"wires\":[[\"d633f332.73b0b\"],[\"fde03821.8b5248\"],[\"f3a8e7a8.448c78\"]]},{\"id\":\"f78ee296.411cb\",\"type\":\"switch\",\"z\":\"8f46ef33.15d9a\",\"name\":\"No record\",\"property\":\"vidStart\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"null\"},{\"t\":\"else\"}],\"checkall\":\"true\",\"outputs\":2,\"x\":640,\"y\":140,\"wires\":[[\"ddaf5439.a3adc8\"],[\"9b2135e6.1272a8\"]]},{\"id\":\"ecbf32b6.3870d\",\"type\":\"change\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Delete Headers\",\"rules\":[{\"t\":\"delete\",\"p\":\"headers\",\"pt\":\"msg\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":660,\"y\":380,\"wires\":[[\"978c9649.08cce8\"]]},{\"id\":\"6333a38f.80234c\",\"type\":\"comment\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Fetch CamID, Vid List\",\"info\":\"\",\"x\":160,\"y\":400,\"wires\":[]},{\"id\":\"24616d0b.a2b882\",\"type\":\"comment\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Exist check on ObjStr\",\"info\":\"\",\"x\":680,\"y\":80,\"wires\":[]},{\"id\":\"3e96fd65.7e77e2\",\"type\":\"debug\",\"z\":\"8f46ef33.15d9a\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":350,\"y\":440,\"wires\":[]},{\"id\":\"d4de5871.260428\",\"type\":\"template\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Video List\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"<html>\\n    <head>\\n        <script src=\\\"https://code.jquery.com/jquery-2.2.0.min.js\\\"></script>\\n    </head>\\n    <body>\\n        {{vidStart}}\\n        {{vidEnd}}\\n    </body>\\n</html>\\n\",\"x\":1180,\"y\":200,\"wires\":[[\"ac42b9c4.9f6a38\"]]},{\"id\":\"a3169c03.d0ab\",\"type\":\"http request\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Get video from ObjStr\",\"method\":\"GET\",\"ret\":\"bin\",\"url\":\"{{{epurl}}}/EENStr001/{{payload}}\",\"x\":1460,\"y\":380,\"wires\":[[\"ac42b9c4.9f6a38\"]]},{\"id\":\"f3a8e7a8.448c78\",\"type\":\"function\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Set DL File Name\",\"func\":\"msg.headers = [];\\nmsg.headers['X-Auth-Token'] = global.get(\\\"obj_token\\\");\\nmsg.epurl = global.get(\\\"epurl\\\");\\n\\nmsg.flvfilename = msg.camID + \\\"_\\\" + msg.st_JST + \\\"_\\\" + msg.et_JST + \\\".flv\\\";\\nmsg.orgheaders['Content-Disposition'] = \\\"attachment; filename=\\\" + msg.flvfilename;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":1210,\"y\":380,\"wires\":[[\"a3169c03.d0ab\"]]},{\"id\":\"d633f332.73b0b\",\"type\":\"template\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Already putted\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"Video file {{camID}}_{{st_JST}}_{{et_JST}}.flv was already putted.\",\"x\":1200,\"y\":260,\"wires\":[[\"ac42b9c4.9f6a38\"]]},{\"id\":\"ddaf5439.a3adc8\",\"type\":\"template\",\"z\":\"8f46ef33.15d9a\",\"name\":\"null response\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"Requested video range is not recorded anything.\\n\",\"x\":1200,\"y\":140,\"wires\":[[\"ac42b9c4.9f6a38\"]]},{\"id\":\"a36d644f.5621f8\",\"type\":\"comment\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Exist and download\",\"info\":\"\",\"x\":910,\"y\":260,\"wires\":[]},{\"id\":\"17663ec6.7189b1\",\"type\":\"comment\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Exist and putted\",\"info\":\"\",\"x\":1660,\"y\":260,\"wires\":[]},{\"id\":\"22484b9b.a3e5b4\",\"type\":\"http response\",\"z\":\"8f46ef33.15d9a\",\"name\":\"\",\"x\":1950,\"y\":440,\"wires\":[]},{\"id\":\"ac42b9c4.9f6a38\",\"type\":\"change\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Restore Header\",\"rules\":[{\"t\":\"delete\",\"p\":\"headers\",\"pt\":\"msg\"},{\"t\":\"set\",\"p\":\"headers\",\"pt\":\"msg\",\"to\":\"orgheaders\",\"tot\":\"msg\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":1760,\"y\":380,\"wires\":[[\"22484b9b.a3e5b4\"]]},{\"id\":\"9bc458d.9c2b6a8\",\"type\":\"http request\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Download the video\",\"method\":\"GET\",\"ret\":\"bin\",\"url\":\"https://login.eagleeyenetworks.com/asset/play/video.flv?c={{camID}};t={{vidStart}};e={{vidEnd}};A={{auth_key}}\",\"tls\":\"\",\"x\":910,\"y\":500,\"wires\":[[\"8239e8ab.65ccd8\",\"de74c74f.6d93f8\"]]},{\"id\":\"8239e8ab.65ccd8\",\"type\":\"switch\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Switch Type\",\"property\":\"type\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"eq\",\"v\":\"getvideo\",\"vt\":\"str\"},{\"t\":\"eq\",\"v\":\"putvideo\",\"vt\":\"str\"},{\"t\":\"eq\",\"v\":\"playvideo\",\"vt\":\"str\"}],\"checkall\":\"true\",\"outputs\":3,\"x\":890,\"y\":620,\"wires\":[[\"1f2fed37.a67513\"],[\"9528f178.74e38\"],[\"4ea31a9e.13b114\"]]},{\"id\":\"1f2fed37.a67513\",\"type\":\"function\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Set DL File Name\",\"func\":\"msg.flvfilename = msg.camID + \\\"_\\\" + msg.st_JST + \\\".flv\\\";\\nmsg.orgheaders['Content-Disposition'] = \\\"attachment; filename=\\\" + msg.flvfilename;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":1210,\"y\":560,\"wires\":[[\"ac42b9c4.9f6a38\"]]},{\"id\":\"2774d3fc.5f769c\",\"type\":\"comment\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Get the video\",\"info\":\"\",\"x\":650,\"y\":500,\"wires\":[]},{\"id\":\"f4fdec90.8ae02\",\"type\":\"comment\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Put the video\",\"info\":\"\",\"x\":1430,\"y\":620,\"wires\":[]},{\"id\":\"a20c873e.54a508\",\"type\":\"debug\",\"z\":\"8f46ef33.15d9a\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":413.75,\"y\":83.75,\"wires\":[]},{\"id\":\"978c9649.08cce8\",\"type\":\"switch\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Test ?\",\"property\":\"test\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"eq\",\"v\":\"1\",\"vt\":\"num\"},{\"t\":\"else\"}],\"checkall\":\"true\",\"outputs\":2,\"x\":630,\"y\":440,\"wires\":[[\"16a09c5d.a8ab04\"],[\"9bc458d.9c2b6a8\"]]},{\"id\":\"9f43c15d.ea6f7\",\"type\":\"function\",\"z\":\"8f46ef33.15d9a\",\"name\":\"code to payload\",\"func\":\"msg.payload = msg.statusCode;\\n//msg.payload = msg.headers[3];\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":1200,\"y\":440,\"wires\":[[\"22484b9b.a3e5b4\"]]},{\"id\":\"16a09c5d.a8ab04\",\"type\":\"http request\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Download the video\",\"method\":\"GET\",\"ret\":\"txt\",\"url\":\"https://login.eagleeyenetworks.com/asset/play/video.flv?c={{camID}};t={{vidStart}};e={{vidEnd}};A={{auth_key}}\",\"tls\":\"\",\"x\":910,\"y\":440,\"wires\":[[\"9f43c15d.ea6f7\",\"de74c74f.6d93f8\",\"8b25b608.cf4988\"]]},{\"id\":\"de74c74f.6d93f8\",\"type\":\"debug\",\"z\":\"8f46ef33.15d9a\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"statusCode\",\"x\":1200,\"y\":500,\"wires\":[]},{\"id\":\"9528f178.74e38\",\"type\":\"subflow:b0ca2077.42a85\",\"z\":\"8f46ef33.15d9a\",\"name\":\"\",\"x\":1190,\"y\":620,\"wires\":[[\"ac42b9c4.9f6a38\"]]},{\"id\":\"5b4fd325.14de0c\",\"type\":\"template\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Gen Page Vid\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"html\",\"syntax\":\"mustache\",\"template\":\"<head>\\n  <link href=\\\"http://vjs.zencdn.net/5.9.2/video-js.css\\\" rel=\\\"stylesheet\\\">\\n\\n  <!-- If you'd like to support IE8 -->\\n  <script src=\\\"http://vjs.zencdn.net/ie8/1.1.2/videojs-ie8.min.js\\\"></script>\\n</head>\\n\\n<body>\\n    <h2>Start Time: {{vidStartHRJ}} <br> End Time: {{vidEndHRJ}}</h2>\\n    <a href=\\\"http://xxxxx.mybluemix.net/eengetflv?camName={{camName}}&st={{nextVideoJ}}&auth_key={{auth_key}}\\\">\u6b21\u306e\u30d3\u30c7\u30aa</a><br><br>\\n  <video id=\\\"my-video\\\" class=\\\"video-js vjs-default-skin\\\" controls preload=\\\"auto\\\" width=\\\"640\\\" height=\\\"480\\\"\\n  data-setup=\\\"{}\\\">\\n    <source src=\\\"{{{liveurl}}}\\\" type='video/x-flv'>\\n    <p class=\\\"vjs-no-js\\\">\\n      To view this video please enable JavaScript, and consider upgrading to a web browser that\\n      <a href=\\\"http://videojs.com/html5-video-support/\\\" target=\\\"_blank\\\">supports HTML5 video</a>\\n    </p>\\n  </video>\\n  <script src=\\\"http://vjs.zencdn.net/5.9.2/video.js\\\"></script>\\n</body>\",\"x\":1440,\"y\":320,\"wires\":[[\"ac42b9c4.9f6a38\"]]},{\"id\":\"fde03821.8b5248\",\"type\":\"function\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Set Play File\",\"func\":\"msg.headers = [];\\nmsg.headers['X-Auth-Token'] = global.get(\\\"obj_token\\\");\\nmsg.epurl = global.get(\\\"epurl\\\");\\nmsg.liveurl = msg.epurl + \\\"/EENStr001/\\\" + msg.payload;\\n\\nvar vidStartHR = msg.vidStart.substr(0,4) + \\\"/\\\" + msg.vidStart.substr(4,2) + \\\"/\\\" + msg.vidStart.substr(6,2) + \\\" \\\" + msg.vidStart.substr(8,2) + \\\":\\\" + msg.vidStart.substr(10,2) + \\\":\\\" + msg.vidStart.substr(12,2);\\nvar vidEndHR = msg.vidEnd.substr(0,4) + \\\"/\\\" + msg.vidEnd.substr(4,2) + \\\"/\\\" + msg.vidEnd.substr(6,2) + \\\" \\\" + msg.vidEnd.substr(8,2) + \\\":\\\" + msg.vidEnd.substr(10,2) + \\\":\\\" + msg.vidEnd.substr(12,2);\\nvar st_UTC_do = new Date(vidStartHR);\\nvar nv_UTC_do = new Date(vidEndHR);\\nvar st_JST_do = new Date(st_UTC_do.getTime() + 32400000);\\nvar nv_JST_do = new Date(nv_UTC_do.getTime() + 32400000);\\nvar vidStartJ = [st_JST_do.getFullYear() + '/',\\n            ( '0' + (st_JST_do.getMonth() + 1)).slice(-2) + '/',\\n            ( '0' + st_JST_do.getDate() ).slice(-2) + ' ',\\n            ( '0' + st_JST_do.getHours() ).slice( -2 ) + ':',\\n            ( '0' + st_JST_do.getMinutes() ).slice( -2 ) + ':',\\n            ( '0' + st_JST_do.getSeconds() ).slice( -2 )\\n            ].join(\\\"\\\");\\nmsg.nextVideoJ = [nv_JST_do.getFullYear() + '/',\\n            ( '0' + (nv_JST_do.getMonth() + 1)).slice(-2) + '/',\\n            ( '0' + nv_JST_do.getDate() ).slice(-2) + ' ',\\n            ( '0' + nv_JST_do.getHours() ).slice( -2 ) + ':',\\n            ( '0' + nv_JST_do.getMinutes() ).slice( -2 ) + ':',\\n            ( '0' + (nv_JST_do.getSeconds() + 1)).slice( -2 )\\n            ].join(\\\"\\\");\\nmsg.vidStartHRJ = st_JST_do.getFullYear() + \\\"\u5e74\\\" + (st_JST_do.getMonth() + 1) + \\\"\u6708\\\" + st_JST_do.getDate() + \\\"\u65e5 \\\" + st_JST_do.getHours() + \\\"\u6642\\\" + st_JST_do.getMinutes() + \\\"\u5206\\\" + st_JST_do.getSeconds() + \\\"\u79d2\\\";\\nmsg.vidEndHRJ = nv_JST_do.getFullYear() + \\\"\u5e74\\\" + (nv_JST_do.getMonth() + 1) + \\\"\u6708\\\" + nv_JST_do.getDate() + \\\"\u65e5 \\\" + nv_JST_do.getHours() + \\\"\u6642\\\" + nv_JST_do.getMinutes() + \\\"\u5206\\\" + nv_JST_do.getSeconds() + \\\"\u79d2\\\";\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":1190,\"y\":320,\"wires\":[[\"5b4fd325.14de0c\"]]},{\"id\":\"4ea31a9e.13b114\",\"type\":\"function\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Set Play File\",\"func\":\"msg.liveurl = \\\"https://login.eagleeyenetworks.com/asset/play/video.flv?c=\\\" + msg.camID + \\\";t=\\\" + msg.vidStart + \\\";e=\\\" + msg.vidEnd + \\\";A=\\\" + msg.auth_key;\\n\\nvar vidStartHR = msg.vidStart.substr(0,4) + \\\"/\\\" + msg.vidStart.substr(4,2) + \\\"/\\\" + msg.vidStart.substr(6,2) + \\\" \\\" + msg.vidStart.substr(8,2) + \\\":\\\" + msg.vidStart.substr(10,2) + \\\":\\\" + msg.vidStart.substr(12,2);\\nvar vidEndHR = msg.vidEnd.substr(0,4) + \\\"/\\\" + msg.vidEnd.substr(4,2) + \\\"/\\\" + msg.vidEnd.substr(6,2) + \\\" \\\" + msg.vidEnd.substr(8,2) + \\\":\\\" + msg.vidEnd.substr(10,2) + \\\":\\\" + msg.vidEnd.substr(12,2);\\nvar st_UTC_do = new Date(vidStartHR);\\nvar nv_UTC_do = new Date(vidEndHR);\\nvar st_JST_do = new Date(st_UTC_do.getTime() + 32400000);\\nvar nv_JST_do = new Date(nv_UTC_do.getTime() + 32400000);\\nvar vidStartJ = [st_JST_do.getFullYear() + '/',\\n            ( '0' + (st_JST_do.getMonth() + 1)).slice(-2) + '/',\\n            ( '0' + st_JST_do.getDate() ).slice(-2) + ' ',\\n            ( '0' + st_JST_do.getHours() ).slice( -2 ) + ':',\\n            ( '0' + st_JST_do.getMinutes() ).slice( -2 ) + ':',\\n            ( '0' + st_JST_do.getSeconds() ).slice( -2 )\\n            ].join(\\\"\\\");\\nmsg.nextVideoJ = [nv_JST_do.getFullYear() + '/',\\n            ( '0' + (nv_JST_do.getMonth() + 1)).slice(-2) + '/',\\n            ( '0' + nv_JST_do.getDate() ).slice(-2) + ' ',\\n            ( '0' + nv_JST_do.getHours() ).slice( -2 ) + ':',\\n            ( '0' + nv_JST_do.getMinutes() ).slice( -2 ) + ':',\\n            ( '0' + (nv_JST_do.getSeconds() + 1)).slice( -2 )\\n            ].join(\\\"\\\");\\nmsg.vidStartHRJ = st_JST_do.getFullYear() + \\\"\u5e74\\\" + (st_JST_do.getMonth() + 1) + \\\"\u6708\\\" + st_JST_do.getDate() + \\\"\u65e5 \\\" + st_JST_do.getHours() + \\\"\u6642\\\" + st_JST_do.getMinutes() + \\\"\u5206\\\" + st_JST_do.getSeconds() + \\\"\u79d2\\\";\\nmsg.vidEndHRJ = nv_JST_do.getFullYear() + \\\"\u5e74\\\" + (nv_JST_do.getMonth() + 1) + \\\"\u6708\\\" + nv_JST_do.getDate() + \\\"\u65e5 \\\" + nv_JST_do.getHours() + \\\"\u6642\\\" + nv_JST_do.getMinutes() + \\\"\u5206\\\" + nv_JST_do.getSeconds() + \\\"\u79d2\\\";\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":1190,\"y\":680,\"wires\":[[\"5d90401f.2ae83\"]]},{\"id\":\"5d90401f.2ae83\",\"type\":\"template\",\"z\":\"8f46ef33.15d9a\",\"name\":\"Gen Page Vid\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"html\",\"syntax\":\"mustache\",\"template\":\"<head>\\n  <link href=\\\"http://vjs.zencdn.net/5.9.2/video-js.css\\\" rel=\\\"stylesheet\\\">\\n\\n  <!-- If you'd like to support IE8 -->\\n  <script src=\\\"http://vjs.zencdn.net/ie8/1.1.2/videojs-ie8.min.js\\\"></script>\\n</head>\\n\\n<body>\\n    <h2>Start Time: {{vidStartHRJ}} <br> End Time: {{vidEndHRJ}}</h2>\\n    <a href=\\\"http://xxxxx.mybluemix.net/eengetvideo?type=playvideo&camName={{camName}}&st={{nextVideoJ}}&auth_key={{auth_key}}\\\">\u6b21\u306e\u30d3\u30c7\u30aa</a><br><br>\\n  <video id=\\\"my-video\\\" class=\\\"video-js vjs-default-skin\\\" controls preload=\\\"auto\\\" width=\\\"640\\\" height=\\\"480\\\"\\n  data-setup=\\\"{}\\\">\\n    <source src=\\\"{{{liveurl}}}\\\" type='video/x-flv'>\\n    <p class=\\\"vjs-no-js\\\">\\n      To view this video please enable JavaScript, and consider upgrading to a web browser that\\n      <a href=\\\"http://videojs.com/html5-video-support/\\\" target=\\\"_blank\\\">supports HTML5 video</a>\\n    </p>\\n  </video>\\n  <script src=\\\"http://vjs.zencdn.net/5.9.2/video.js\\\"></script>\\n</body>\",\"x\":1440,\"y\":680,\"wires\":[[\"ac42b9c4.9f6a38\"]]},{\"id\":\"d797abe1.d260e8\",\"type\":\"debug\",\"z\":\"8f46ef33.15d9a\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"url\",\"x\":640,\"y\":40,\"wires\":[]},{\"id\":\"8b25b608.cf4988\",\"type\":\"debug\",\"z\":\"8f46ef33.15d9a\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"headers\",\"x\":890,\"y\":380,\"wires\":[]}]\n```\n\n\u30a4\u30f3\u30dd\u30fc\u30c8\u304c\u5b8c\u4e86\u3059\u308b\u3068\u3001\u305d\u308c\u305e\u308c\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002\n![screenshot-een-api.mybluemix.net-2017-01-25-17-03-26.png](https://qiita-image-store.s3.amazonaws.com/0/106468/73b49a99-a144-3dbe-be84-a97232f018b2.png)\n![screenshot-een-api.mybluemix.net-2017-01-25-17-12-40.png](https://qiita-image-store.s3.amazonaws.com/0/106468/256fc671-6737-a852-f3fc-29835daa624d.png)\n![screenshot-een-api.mybluemix.net-2017-01-25-17-11-39.png](https://qiita-image-store.s3.amazonaws.com/0/106468/0534de8f-34b1-393d-ed4e-6ef4693b0806.png)\n\n\u4eca\u56de\u306f\u304b\u306a\u308a\u5927\u639b\u304b\u308a\u4ed5\u7d44\u307f\u306b\u898b\u3048\u307e\u3059\u304c\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u30c7\u30fc\u30bf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u969b\u306b\u8a8d\u8a3c\u304c\u5fc5\u8981\u306a\u3053\u3068\u3084\u3001\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9/\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6642\u306e\u65e2\u5b58\u30d5\u30a1\u30a4\u30eb\u30c1\u30a7\u30c3\u30af\u306a\u3069\u3001\u8272\u3005\u306a\u30ed\u30b8\u30c3\u30af\u304c\u5fc5\u8981\u306b\u306a\u308b\u305f\u3081\u3053\u306e\u3088\u3046\u306a\u5927\u304d\u3055\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u672c\u6765\u306f\u30b5\u30d6\u30d5\u30ed\u30fc\u3092\u5897\u3084\u3057\u305f\u308a\u30e9\u30a4\u30d6\u30e9\u30ea\u5316\u3059\u308b\u306a\u3069\u306e\u7701\u529b\u5316\u3092\u884c\u306a\u3046\u3079\u304d\u3067\u3059\u304c\u3001\u8aac\u660e\u7528\u306b\u5197\u9577\u306b\u3057\u3066\u3044\u308b\u90e8\u5206\u3082\u3042\u308a\u307e\u3059\u306e\u3067\u3054\u4e86\u627f\u4e0b\u3055\u3044\u3002\n\n##\u7e4b\u3052\u3066\u307f\u3088\u3046\n\u3053\u308c\u3067\u6e96\u5099\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\u5b9f\u969b\u306bURL\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u63a5\u7d9a\u5148\u306eURL\u306f\u3001\n\n```\nhttp://Bluemix\u30a2\u30d7\u30ea\u540d+myblemix.net\u7b49/eengetvideo\n```\n\u3067\u3059\u3002\n\n\u3053\u306e\u4ed5\u7d44\u306f\u30ab\u30e1\u30e9\u540d\u3001\u30bf\u30a4\u30d7\uff08\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306a\u306e\u304b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306a\u306e\u304b\uff09\u3001\u958b\u59cb\u6642\u9593\u3001\u7d42\u4e86\u6642\u9593\u304c\u5fc5\u8981\u3067\u3059\u306e\u3067\u3001\n\n```\n?type=\u30bf\u30a4\u30d7&camName=\u30ab\u30e1\u30e9\u540d&st=\u958b\u59cb\u6642\u9593&et=\u7d42\u4e86\u6642\u9593\n```\n\n\u3068\u3044\u3046\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4e0a\u8a18\u306eURL\u306b\u4ed8\u52a0\u3057\u307e\u3059\u3002\u6700\u7d42\u7684\u306b\u306f\u3001\n\n```\nhttp://Bluemix\u30a2\u30d7\u30ea\u540d+myblemix.net\u7b49/eengetvideo?type=\u30bf\u30a4\u30d7&camName=\u30ab\u30e1\u30e9\u540d&st=\u958b\u59cb\u6642\u9593&et=\u7d42\u4e86\u6642\u9593\n```\n\n\u3068\u306a\u308a\u307e\u3059\u3002\u30bf\u30a4\u30d7\u306f\u3001\n\n| \u30bf\u30a4\u30d7\u540d | \u5b9f\u884c\u5185\u5bb9 |\n|:-------:|:--------|\n|getvideo|\u52d5\u753b\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9|\n|putvideo|\u52d5\u753b\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9|\n|listvideo|\u52d5\u753b\u306e\u30ea\u30b9\u30c8\u8868\u793a|\n|playvideo|\u52d5\u753b\u306e\u518d\u751f\u203b|\n\n\u203bplayvideo\u306f\u672a\u5b9f\u88c5\n\n\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n###\u52d5\u753b\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n***\n\u52d5\u753b\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3092\u884c\u306a\u3046\u306b\u306f\u3001\u4f8b\u3048\u3070\u3001\n\nhttps://yyyyyyyy.mybluemix.net/eengetvideo?type=putvideo&camName=xxxxxxxxxxx&st=2017/01/26 10:00:00&et=2017/01/26 10:05:00\n\n\u3053\u3093\u306a\u611f\u3058\u306eURL\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30ab\u30e1\u30e9ID\u3068\u65e5\u6642\u306f\u3054\u81ea\u8eab\u3067\u7ba1\u7406\u3057\u3066\u3044\u308b**\u30ab\u30e1\u30e9\u306eESN\u540d**\u3001\u65e5\u6642\u306f\u300c**YYYYMMDD \uff08\u30b9\u30da\u30fc\u30b9\uff09HH:MM:SS**\u300d\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u3053\u306eURL\u3067\u30a2\u30af\u30bb\u30b9\u3092\u884c\u3046\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n> Status Code is returned : 201\n\n\u4e0a\u8a18\u30e1\u30c3\u30bb\u30fc\u30b8\u306fopenstack\u306e[\u300cObject Storage API\u300d](http://developer.openstack.org/api-ref/object-storage/?expanded=create-or-replace-object-detail#create-or-replace-object)\u306b\u3088\u308b\u3068\u3001\n\n> The Created (201) response code indicates a successful write.\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u306e\u3067\u3001\u7121\u4e8b\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u304c\u3067\u304d\u305f\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3067\u306f\u3053\u3053\u3067\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\u307e\u305a\u306fBluemix\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u958b\u304d\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u30b5\u30fc\u30d3\u30b9\u540d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n![bm_dashboard.png](https://qiita-image-store.s3.amazonaws.com/0/106468/47b4bd7c-ad9c-b776-e909-b367c23b2a78.png)\n\n\u30b5\u30fc\u30d3\u30b9\u306e\u8a73\u7d30\u304c\u958b\u304d\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u52d5\u753b\u306f\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u5165\u308a\u307e\u3059\u306e\u3067\u30b3\u30f3\u30c6\u30ca\u540d\uff08\u3053\u3053\u3067\u306f**EENStr001**\uff09\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n![bm_objectstorage.png](https://qiita-image-store.s3.amazonaws.com/0/106468/d388e8a3-2ee2-fd81-d677-54d96b6cd911.png)\n\n\u30b3\u30f3\u30c6\u30ca\u306e\u5185\u5bb9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u8907\u6570\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u5834\u5408\u306b\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u30ab\u30e1\u30e9\u306eESN\u3068\u958b\u59cb\u3001\u7d42\u4e86\u6642\u9593\uff08\u5171\u306bUTC\uff09\u304c\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u305d\u308c\u3092\u983c\u308a\u306b\u63a2\u3057\u307e\u3059\u3002\n\n![bm_container.png](https://qiita-image-store.s3.amazonaws.com/0/106468/cbce638c-041b-103c-414b-64f861a8c684.png)\n\n\u8a66\u3057\u306b\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u3092on\u306b\u3057\u3001\u300c\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u9078\u629e\u300d\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300c\u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n![bm_objdl.png](https://qiita-image-store.s3.amazonaws.com/0/106468/178165e8-7df7-c9cb-70f9-8ed078cb902b.png)\n\n\u30d5\u30a1\u30a4\u30eb\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308c\u307e\u3057\u305f\u3089\u3001\u8a66\u3057\u306b\u518d\u751f\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nVLC\u306e\u3088\u3046\u306aFLV\u3092\u518d\u751f\u53ef\u80fd\u306a\u30d7\u30ec\u30a4\u30e4\u30fc\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u518d\u751f\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002\n\n![bm_flv.png](https://qiita-image-store.s3.amazonaws.com/0/106468/48bf8eda-b2ad-5c6f-335f-dd69937cda63.png)\n\n###\u52d5\u753b\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n***\n\u305d\u308c\u3067\u306f\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u5148\u7a0b\u306eURL\u304b\u3089\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u5185\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u307e\u3057\u3087\u3046\u3002\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3092\u884c\u306a\u3046\u306b\u306f\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u4f7f\u7528\u3057\u305f\u300cputvideo\u300d\u306e\u4ee3\u308f\u308a\u306b\u300c**getvideo**\u300d\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\nhttps://yyyyyyyy.mybluemix.net/eengetvideo?type=getvideo&camName=xxxxxxxxxxx&st=2017/01/26 10:00:00&et=2017/01/26 10:05:00\n\n\u30d6\u30e9\u30a6\u30b6\u3067\u5b9f\u884c\u3059\u308b\u3068\u3001**\u5510\u7a81\u306b\u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u304c\u958b\u59cb\u3055\u308c\u307e\u3059**\u306e\u3067\u3054\u6ce8\u610f\u4e0b\u3055\u3044\u3002\n\u3053\u308c\u3060\u3068\u300c**\u76f4\u63a5Eagle Eye\u304b\u3089\u843d\u3068\u3057\u3066\u308b\u3093\u3058\u3083\u306a\u3044\u306e\uff1f\uff1f**\u300d\u3068\u7a7f\u3063\u305f\u898b\u65b9\u3092\u3055\u308c\u308b\u306e\u3067\u3001\u3053\u3053\u3067Node-RED\u306e\u753b\u9762\u3092\u898b\u3066\u307e\u3057\u3087\u3046\u3002\n\n![bm_objget.png](https://qiita-image-store.s3.amazonaws.com/0/106468/0061f050-15ac-a360-aa53-7a4e309ae937.png)\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3068\u540c\u6642\u306bNode-RED\u306e\u753b\u9762\u3092\u898b\u308b\u3068\u3001\u300c*Get video from ObjStr*\u300d\u3068\u3044\u3046\u30ce\u30fc\u30c9\u3067\u300crequesting\u300d\u3068\u9752\u3044\u30dc\u30fc\u30eb\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u30d5\u30ed\u30fc\u3092\u898b\u3066\u9802\u3051\u308c\u3070\u308f\u304b\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3053\u306e\u30ce\u30fc\u30c9\u306b\u5230\u9054\u3059\u308b\u306b\u306f\u9014\u4e2d\u306e\u30ce\u30fc\u30c9\uff08*Q_ObjStor\u3001ObjStr Exist*\uff09\u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u5185\u306b\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306e\u307f\u3068\u3044\u3046\u6761\u4ef6\u306e\u30af\u30ea\u30a2\u304c\u5fc5\u9808\u306b\u306a\u308a\u307e\u3059\u3002\u305d\u306e\u70ba\u3001\u3053\u306e\u30ce\u30fc\u30c9\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3068\u3044\u3046\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u7d4c\u7531\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u304a\u308f\u304b\u308a\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n##Node-RED\u306b\u304a\u3051\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u4f7f\u3044\u65b9\n\n\u5192\u982d\u3067\u3082\u8a18\u8f09\u3057\u307e\u3057\u305f\u3068\u304a\u308a\u3001Node-RED\u306eContributes\u3055\u308c\u3066\u3044\u308b\u30ce\u30fc\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3068\u6271\u3048\u308b\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u304c5MB\u306b\u5236\u9650\u3055\u308c\u308b\u305f\u3081\u3001\u5730\u9053\u306b\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u5bfe\u5fdc\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n###\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u8a8d\u8a3c\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u8a8d\u8a3c\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001\n\n- \u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID\n- \u30e6\u30fc\u30b6\u30fcID\n- \u30d1\u30b9\u30ef\u30fc\u30c9\n\n\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u308c\u3092\u4e0b\u8a18\u306e\u30b3\u30fc\u30c9\u306e\u305d\u308c\u305e\u308c\u306e\u5834\u6240\u306b\u8a18\u5165\u3057\u307e\u3059\u3002\n\n```\nvar vcapsvc = context.global.VCAP_SERVICES;\n\nvar objcred = [];\n\nobjcred.projectId = \"<\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID>\";\nobjcred.userId = \"<\u30e6\u30fc\u30b6\u30fcID>\";\nobjcred.password = \"<\u30d1\u30b9\u30ef\u30fc\u30c9>\";\n\nvar authbody = {\n    \"auth\": {\n        \"identity\": {\n            \"methods\": [\n                \"password\"\n            ],\n            \"password\": {\n                \"user\": {\n                    \"id\": objcred.userId,\n                    \"password\": objcred.password\n                }\n            }\n        },\n        \"scope\": {\n            \"project\": {\n                \"id\": objcred.projectId\n            }\n        }\n    }\n};\n\nmsg.payload = JSON.stringify(authbody);\n\nreturn msg;\n```\n\n\u3053\u308c\u3067\u8a8d\u8a3c\u306ebody\u304c\u3067\u304d\u3042\u304c\u3063\u305f\u306e\u3067\u3001\u3053\u308c\u3092\n\nhttps://identity.open.softlayer.com/v3/auth/tokens\n\n\u306bPOST\u3057\u307e\u3059\u3002\n\u3053\u3053\u304b\u3089\u51fa\u529b\u3055\u308c\u305fJSON response\u3092\u3001JSONPath\u306e\u30ce\u30fc\u30c9\u3067\u3001\n\n```\n$.token.catalog[?(@.type === \"object-store\")].endpoints[?(@.region_id === \"dallas\" && @.interface === \"public\")].url\n```\n\n\u3068\u30af\u30a8\u30ea\u3059\u308b\u3053\u3068\u3067\u3001\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8URL\u304c\u8fd4\u3055\u308c\u3001*x-subject-token*\u3068\u3044\u3046\u30c8\u30fc\u30af\u30f3\u3082Response headers\u306e\u4e2d\u3067\u8fd4\u3055\u308c\u307e\u3059\u3002\u3053\u3053\u3067\u306fregion\u304cdallas\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u30ed\u30f3\u30c9\u30f3\u306e\u65b9\u306f*london*\u306b\u5909\u66f4\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n```\nglobal.set(\"obj_token\", msg.headers['x-subject-token']);\nglobal.set(\"epurl\", msg.payload[0]);\n\nmsg.payload = global.get(\"obj_token\") + \" \" + global.get(\"epurl\");\n\nreturn msg;\n```\n\n\u3053\u3053\u3067\u3084\u3063\u3068\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u306b\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306eURL\u3068\u3001\u30a2\u30af\u30bb\u30b9\u7528\u306e\u30c8\u30fc\u30af\u30f3\u304c\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\u3053\u308c\u3092\u4f7f\u3046\u3053\u3068\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u7b49\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\u3082\u3061\u308d\u3093\u30b3\u30f3\u30c6\u30ca\u306e\u4f5c\u6210\u306a\u3069\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n\u4ee5\u4e0b\u306f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u5185\u5bb9\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u30b3\u30fc\u30c9\u3067\u3059\u3002\u3053\u3053\u3067\u306f\u5148\u7a0b\u53d6\u5f97\u3057\u305f\u30d8\u30c3\u30c0\u306e\u5185\u5bb9\u3092\u5b9f\u969b\u306eRequest headers\u306b\u683c\u7d0d\u3057\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30a4\u30ca\u30ea\u30d0\u30c3\u30d5\u30a1\u304b\u3089Attachment\u306b\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3092\u884c\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n```\nmsg.headers = [];\nmsg.headers['X-Auth-Token'] = global.get(\"obj_token\");\nmsg.epurl = global.get(\"epurl\");\n\nmsg.flvfilename = msg.camID + \"_\" + msg.st_JST + \"_\" + msg.et_JST + \".flv\";\nmsg.orgheaders['Content-Disposition'] = \"attachment; filename=\" + msg.flvfilename;\n\nreturn msg;\n```\n\n\u6b21\u306b\u3053\u308c\u3092\u6b21\u306eURL\u306b\u5bfe\u3057\u3066GET\u3092\u884c\u3044\u307e\u3059\u3002\n\n{{{epurl}}}/EENStr001/{{payload}}\n\n\u3053\u3053\u3067\u6307\u5b9a\u3057\u3066\u3044\u308bpayload\u306f\u30b5\u30d6\u30d5\u30ed\u30fc\u5185\u306e\u300c*Search the video*\u300d\u30ce\u30fc\u30c9\u3067\u751f\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n\n```\nvar nfyLength = msg.payload.length;\n\nfor (itr = 0; itr < nfyLength; itr++){\n    if ( msg.payload[itr].meta.camid ) {\n        if ( msg.camName == msg.payload[itr].meta.camname && msg.vidStart == msg.payload[itr].meta.stets && msg.vidEnd == msg.payload[itr].meta.etets) {\n            msg.flvname = msg.payload[itr].name;\n        }\n    }\n}\n\nmsg.payload = \"\";\nmsg.payload = msg.flvname;\n\nreturn msg;\n```\n\n\u3053\u306e\u6d41\u308c\u3067\u52d5\u753b\u306e\u53d6\u5f97\u3092\u884c\u306a\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u6b21\u306b\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u65b9\u6cd5\u3092\u898b\u3066\u307e\u3057\u3087\u3046\u3002\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3092\u884c\u306a\u3046\u969b\u306b\u3082\u540c\u69d8\u306e\u65b9\u6cd5\u3067\u884c\u306a\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u304c\u3001\u3053\u3053\u3067\u306f\u305b\u3063\u304b\u304f\u3067\u3059\u306e\u3067\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u6a5f\u80fd\u306e\u4e00\u3064\u3067\u3042\u308b\u300c[\u30e1\u30bf\u30c7\u30fc\u30bf](http://developer.openstack.org/api-ref/object-storage/?expanded=create-or-replace-object-detail#objects)\u300d\u306e\u683c\u7d0d\u3082\u884c\u3044\u307e\u3059\u3002\u30e1\u30bf\u30c7\u30fc\u30bf\u306f\u3042\u3063\u3066\u3082\u7121\u304f\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u4f7f\u3063\u305f\u5168\u6587\u691c\u7d22\u304c\u884c\u3048\u307e\u3059\u306e\u3067\u3001\u5927\u5909\u4fbf\u5229\u3067\u3059\u3002\u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u691c\u7d22\u306f\u300c[MetadataSearchAPI](https://wiki.openstack.org/wiki/MetadataSearchAPI)\u300d\u306b\u8a73\u7d30\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\n```\nmsg.headers['X-Auth-Token'] = global.get(\"obj_token\");\nmsg.headers['X-Object-Meta-camName'] = msg.camName;\nmsg.headers['X-Object-Meta-camID'] = msg.camID;\nmsg.headers['X-Object-Meta-stets'] = msg.vidStart;\nmsg.headers['X-Object-Meta-etets'] = msg.vidEnd;\n\nmsg.flvfilename = msg.camID + \"_\" + msg.vidStart + \"_\" + msg.vidEnd + \".flv\";\n\nmsg.epurl = global.get(\"epurl\");\nreturn msg;\n```\n\n\u4e0a\u8a18\u306b\u3042\u308a\u307e\u3059\u3068\u304a\u308a\u3001\u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u683c\u7d0d\u306f\u3001\n\n```\nmsg.headers['X-Object-Meta-camName'] = msg.camName;\n```\n\n\u306e\u3088\u3046\u306bRequest Header\u306b**['X-Object-Meta-xxxxxx']**\u3068\u3059\u308b\u3053\u3068\u3067\u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u540d\u79f0\u3092\u6c7a\u5b9a\u3057\u3001\u3053\u306e\u5185\u5bb9\u3092**\u300c = msg.camName\u300d**\u3068\u4ee3\u5165\u3059\u308b\u3053\u3068\u3067\u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u5185\u5bb9\u3092\u683c\u7d0d\u3067\u304d\u307e\u3059\u3002\n\n\u3053\u306e\u5185\u5bb9\u3067\u4ee5\u4e0b\u306eURL\u306bPUT\u3057\u307e\u3059\u3002\n\n{{{epurl}}}/EENStr001/{{flvfilename}}\n\n\u3053\u306e\u5b9f\u884c\u7d50\u679c\u306fHTTP Response\u3067\u8fd4\u3063\u3066\u304d\u307e\u3059\u306e\u3067\u3001\u3053\u308c\u3092payload\u3068\u3057\u3066\u8fd4\u3057\u307e\u3059\u3002\n\n##\u6700\u5f8c\u306b\n\n\u4eca\u56de\u306e\u3088\u3046\u306b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u3088\u3046\u306aNode-RED\u3067\u7528\u610f\u3055\u308c\u3066\u3044\u306a\u3044\uff08\u307e\u305f\u306f\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3051\u308c\u3069\u5236\u7d04\u304c\u3042\u308b\u306a\u3069\uff09\u5834\u5408\u306b\u306f\u3001\u30b3\u30fc\u30c9\u3067\u8868\u73fe\u3057\u3001\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u4e00\u898b\u9762\u5012\u3067\u3059\u304c\u3001\u65b0\u3057\u3044\u30b5\u30fc\u30d3\u30b9\u304c\u767a\u8868\u3055\u308c\u3066\u3082\u3059\u3050\u306b\u5bfe\u5fdc\u3067\u304d\u308b\u3053\u3068\u3092\u8003\u3048\u308b\u3068\u3001\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u307b\u3046\u304c\u5f8c\u3005\u697d\u3060\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306fBluemix\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067CDN\u304c\u6709\u52b9\u5316\u3055\u308c\u3066\u3044\u308b\u306e\u304b\uff08\u9593\u9055\u3063\u3066\u308b\uff1f\uff1f\uff09\u3001\u30b9\u30c8\u30ec\u30fc\u30b8\u304c\u30c0\u30e9\u30b9\u306b\u3042\u308b\u5272\u306b\u306f\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u901f\u5ea6\u304c\u975e\u5e38\u306b\u65e9\u304f\u611f\u3058\u307e\u3057\u305f\u3002\u307e\u305f\u7121\u6599\u30d7\u30e9\u30f3\u306e\u5834\u5408\u306f5GB\u3068\u3044\u3046\u5236\u9650\u306f\u3042\u308b\u3082\u306e\u306e\u3001\u67d0\u30af\u30e9\u30a6\u30c9\u30b5\u30fc\u30d3\u30b9\u3068\u7570\u306a\u308a\u6d41\u91cf\u3067\u306e\u8ab2\u91d1\u304c\u7121\u3044\u3053\u3068\u3082\u5927\u304d\u306a\u7279\u5fb4\u3067\u3059\u3002\u3053\u308c\u306f\u958b\u767a\u3001\u30c6\u30b9\u30c8\u3092\u884c\u306a\u3046\u6642\u306b\u306f\u8ab2\u91d1\u3055\u308c\u305f\u304f\u306a\u3044\u5834\u5408\u306a\u3069\u3001\u975e\u5e38\u306b\u6709\u7528\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306f\u7dcf\u3058\u3066\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u5171\u306b\u512a\u79c0\u3060\u3068\u8003\u3048\u3089\u308c\u307e\u3059\u3002\n\n\u3053\u306e\u6b21\u3053\u305d\u90fd\u5408\u304c\u5408\u3048\u3070\u3001BOSCH\u88fd\u30ab\u30e1\u30e9\u306b\u3088\u308b\u4eba\u6570\u30ab\u30a6\u30f3\u30c8\u3092\u66f8\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n##\u30e9\u30a4\u30bb\u30f3\u30b9\u3001\u8457\u4f5c\u6a29\u7b49\n\n\u672c\u30b9\u30af\u30ea\u30d7\u30c8\u3001\u30ce\u30fc\u30c9\u69cb\u6210\u3001\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u5185\u5bb9\u306b\u3064\u3044\u3066\u306fMIT License\u3092\u9069\u7528\u3057\u307e\u3059\u3002\nEagle Eye Networks\u306e\u5546\u6a19\u304a\u3088\u3073\u30ed\u30b4\u306b\u3064\u3044\u3066\u306fEagle Eye Networks, Inc.\u306b\u5e30\u5c5e\u3057\u307e\u3059\u3002\nIBM\u304a\u3088\u3073IBM Bluemix\u3001Node-Red\u306e\u5546\u6a19\u304a\u3088\u3073\u30ed\u30b4\u306b\u3064\u3044\u3066\u306fInternational Business Machines Corporation\u306b\u5e30\u5c5e\u3057\u307e\u3059\u3002\nnode.js\u306e\u5546\u6a19\u304a\u3088\u3073\u30ed\u30b4\u306b\u3064\u3044\u3066\u306fNode.js contributors\u306b\u5e30\u5c5e\u3057\u307e\u3059\u3002\n", "tags": ["Bluemix", "node-red", "Node.js", "\u52d5\u753b"]}