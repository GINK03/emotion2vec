{"context": "\n\n\u3010\u6982\u8981\uff1aOpenStack \u74b0\u5883\u69cb\u7bc9\u3011\n\nOpenStack \u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u4f5c\u696d\u624b\u9806\u3092\u8a18\u8f09\nRDO Packstack \u3092\u4f7f\u7528\u3002\n\u6700\u65b0\u306e liberty \u3067\u306f\u306a\u304f\u3001kilo \u3092\u4f7f\u3046\u3053\u3068\u3068\u3059\u308b(2016\u5e743\u6708\u6642\u70b9)\n\n\n\u2662 OpenStack \u3068\u306f\uff1f\n\nNASA\u4e3b\u5c0e\u306e\u30af\u30e9\u30a6\u30c9\u6280\u8853\u3002Nova \u3092\u59cb\u3081\u3068\u3059\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u7fa4\u3067\u69cb\u6210\u3055\u308c\u3066\u304a\u308a\u3001OpenStack \u3092\u4f7f\u3046\u3068\u4eee\u60f3\u30cd\u30c3\u30c8\u30ef\u30fc\u30af(SDN)\u3084\u69cb\u6210\u7ba1\u7406\u30c4\u30fc\u30eb(Ansible)\u7b49\u3092\u7c21\u5358\u306b\u5c0e\u5165\u51fa\u6765\u308b\u3002\nWikipedia: https://ja.wikipedia.org/wiki/OpenStack\n\n\n\n\u2662 OpenStack \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\n\nConceptual Architecture: http://docs.openstack.org/kilo/install-guide/install/apt/content/ch_overview.html\n\n\n\n\n\u2662 RDO Packstack \u3068\u306f\uff1f\n\nOpenStack \u306e\u30c7\u30d7\u30ed\u30a4\u30c4\u30fc\u30eb\u3002OpenStack \u74b0\u5883\u3092\u4f5c\u308b\u6642\u306b\u5fc5\u8981\u3068\u306a\u308b\u3002\nDocumentation for Liberty (October 2015): http://docs.openstack.org/\nRDO quickstart\uff1ahttps://www.rdoproject.org/install/quickstart/\n\n\n\n\u3010\u74b0\u5883\u3011\n\n\u2662 \u30b7\u30b9\u30c6\u30e0\u30ea\u30bd\u30fc\u30b9\n\nCPU: 3core\nMem: 3072GB\nRDO \u516c\u5f0f\u30b5\u30a4\u30c8\u306b\u306f\u5c11\u306a\u304f\u3068\u3082 4GB \u3068\u8a18\u8f09\u3042\u308b\u304c\u30ea\u30bd\u30fc\u30b9\u4f59\u88d5\u306a\u3057\u3002\u3002\u3002\n\n\nMachine with at least 4GB RAM, processors with hardware virtualization extensions, and at least one network adapter.\nhttps://www.rdoproject.org/install/quickstart/\n\n\nNIC: 2\u3064 (\u696d\u52d9LAN/\u7ba1\u7406LAN)\n\n\n\u2662 OS\n\nCentOS7.2\n\n\n\u3010\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u3011\n\n\u53c2\u8003\u30b5\u30a4\u30c8\uff1ahttps://www.rdoproject.org/install/quickstart/\n\n\n\n\u2662 1. RDO Packstack \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u767b\u9332\nyum install https://www.rdoproject.org/repos/rdo-release.rpm\n\n\n\u2662 2. OpenStack(Kilo)\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\na. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b9f\u884c (CentOS7)\n\n\u6a19\u6e96\u30ea\u30dd\u30b8\u30c8\u30ea\u306b kilo \u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u305f\u3002\u7d20\u6674\u3089\u3057\u3044\u3002\n\u9060\u616e\u306a\u304f\u4f7f\u308f\u305b\u3066\u9802\u304f\u3002\n\n\nyum search centos-release-openstack\n-----\n\u8aad\u307f\u8fbc\u3093\u3060\u30d7\u30e9\u30b0\u30a4\u30f3:fastestmirror\nLoading mirror speeds from cached hostfile\n * base: ftp.riken.jp\n * extras: ftp.riken.jp\n * updates: ftp.riken.jp\n===================================== N/S matched: centos-release-openstack ======================================\ncentos-release-openstack.noarch : OpenStack from the CentOS Cloud SIG repo configs\ncentos-release-openstack-kilo.noarch : OpenStack from the CentOS Cloud SIG repo configs\ncentos-release-openstack-liberty.noarch : OpenStack from the CentOS Cloud SIG repo configs\n\n  Name and summary matches only, use \"search all\" for everything.\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b9f\u884c\n\n\nyum install centos-release-openstack-kilo\n\n\nb. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b9f\u884c(RHEL7)\n\n\n\u53c2\u8003 \n\nRDO repositories: https://www.rdoproject.org/documentation/repositories/\n\n\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u8ffd\u52a0\n\nyum install http://rdoproject.org/repos/openstack-kilo/rdo-release-kilo.rpm\n\n\n\u30aa\u30d7\u30b7\u30e7\u30f3\u30ea\u30dd\u30b8\u30c8\u30ea\u6709\u52b9\u5316\n\nsubscription-manager repos --enable rhel-7-server-optional-rpms\nsubscription-manager repos --enable rhel-7-server-extras-rpms\nsubscription-manager repos --enable=rhel-7-server-rh-common-rpms\n\n\n\u2662 3. openstack-packstack \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum install epel-release openstack-packstack\n\n\nepel \u3082\u5fc5\u8981\u3068 Document \u306b\u66f8\u3044\u3066\u3042\u308b\u70ba\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\n\n\n\nOn RHEL and CentOS, enable the EPEL repository:\nhttp://docs.openstack.org/kilo/install-guide/install/yum/content/ch_basic_environment.html#basics-packages\n\n\n\n\n\u2662 4. \u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u5b9f\u884c\nyum update\n\n\n\u2662 5. \u30c7\u30d7\u30ed\u30a4\u5b9f\u884c\n\n10\u5206\u7a0b\u5b9f\u884c\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u3002\u74b0\u5883\u306b\u3088\u308a\u30a8\u30e9\u30fc\u5831\u544a\u3082\u3042\u308b\u3088\u3046\u3060\u304c\u7121\u4e8b\u7d42\u308f\u308b\u3053\u3068\u3092\u7948\u308b\u3002\n\npackstack --allinone --use-epel=y\n----\n\n **** Installation completed successfully ******\n\nAdditional information:\n * A new answerfile was created in: /root/packstack-answers-20160320-182839.txt\n * Time synchronization installation was skipped. Please note that unsynchronized time on server instances might be problem for some OpenStack components.\n * Warning: NetworkManager is active on 10.0.2.15. OpenStack networking currently does not work on systems that have the Network Manager service enabled.\n * File /root/keystonerc_admin has been created on OpenStack client host 10.0.2.15. To use the command line tools you need to source the file.\n * To access the OpenStack Dashboard browse to http://10.0.2.15/dashboard .\nPlease, find your login credentials stored in the keystonerc_admin in your home directory.\n * To use Nagios, browse to http://10.0.2.15/nagios username: nagiosadmin, password: 0156a1dda98a4ae9\n * The installation log file is available at: /var/tmp/packstack/20160320-182838-hvf94y/openstack-setup.log\n * The generated manifests are available at: /var/tmp/packstack/20160320-182838-hvf94y/manifests\n\n\n\u2662 6. NetworkManager \u7121\u52b9\u5316\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u901a\u308a\u3001 OpenStack \u3067 NetworkManager \u306e\u5229\u7528\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u306a\u3044\u70ba\u3001\u505c\u6b62\u3059\u308b\n\nsystemctl disable NetworkManager && systemctl enable network\nsystemctl stop NetworkManager && systemctl restart network\n\n\n\u2662 7. \u4eee\u60f3\u30b5\u30fc\u30d0\u8a2d\u5b9a\u306e\u6709\u52b9\u5316\n\n\u4eee\u60f3\u30b5\u30fc\u30d0\u3067\u69cb\u7bc9\u3059\u308b\u969b\u306b\u306f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092 KVM \u30e2\u30fc\u30c9\u3067\u8d77\u52d5\u3059\u308b\u8a2d\u5b9a\u3068\u3001vhost_net \u3092\u6709\u52b9\u5316\u3059\u308b\u3002\n\n\n1. nova \u8a2d\u5b9a\u5909\u66f4(KVM \u30e2\u30fc\u30c9\u6709\u52b9\u5316)\nsed -i s/virt_type=qemu/virt_type=kvm/g /etc/nova/nova.conf\ncat /etc/nova/nova.conf | grep ^virt_type=\n\n\n2. \u8a2d\u5b9a\u53cd\u6620\nsystemctl restart openstack-nova-compute.service\n\n\n3. vhost_net \u6709\u52b9\u5316\nmodprobe vhost_net\n\n\n4. vhost_net \u6709\u52b9\u5316\u78ba\u8a8d\nlsmod | grep vhost_net\n\n# \u3010\u6982\u8981\uff1aOpenStack \u74b0\u5883\u69cb\u7bc9\u3011\n* OpenStack \u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u4f5c\u696d\u624b\u9806\u3092\u8a18\u8f09\n* RDO Packstack \u3092\u4f7f\u7528\u3002\n* \u6700\u65b0\u306e liberty \u3067\u306f\u306a\u304f\u3001kilo \u3092\u4f7f\u3046\u3053\u3068\u3068\u3059\u308b(2016\u5e743\u6708\u6642\u70b9)\n\n## \u2662 OpenStack \u3068\u306f\uff1f\n* NASA\u4e3b\u5c0e\u306e\u30af\u30e9\u30a6\u30c9\u6280\u8853\u3002Nova \u3092\u59cb\u3081\u3068\u3059\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u7fa4\u3067\u69cb\u6210\u3055\u308c\u3066\u304a\u308a\u3001OpenStack \u3092\u4f7f\u3046\u3068\u4eee\u60f3\u30cd\u30c3\u30c8\u30ef\u30fc\u30af(SDN)\u3084\u69cb\u6210\u7ba1\u7406\u30c4\u30fc\u30eb(Ansible)\u7b49\u3092\u7c21\u5358\u306b\u5c0e\u5165\u51fa\u6765\u308b\u3002  \n  Wikipedia: https://ja.wikipedia.org/wiki/OpenStack\n\n## \u2662 OpenStack \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\n* Conceptual Architecture: http://docs.openstack.org/kilo/install-guide/install/apt/content/ch_overview.html\n![openstack_kilo_conceptual_arch.png](https://qiita-image-store.s3.amazonaws.com/0/118031/df9fbfc1-9666-d5b4-7c00-592654698e49.png)\n\n\n## \u2662 RDO Packstack \u3068\u306f\uff1f\n* OpenStack \u306e\u30c7\u30d7\u30ed\u30a4\u30c4\u30fc\u30eb\u3002OpenStack \u74b0\u5883\u3092\u4f5c\u308b\u6642\u306b\u5fc5\u8981\u3068\u306a\u308b\u3002  \n  Documentation for Liberty (October 2015): http://docs.openstack.org/  \n  RDO quickstart\uff1ahttps://www.rdoproject.org/install/quickstart/  \n\n# \u3010\u74b0\u5883\u3011\n## \u2662 \u30b7\u30b9\u30c6\u30e0\u30ea\u30bd\u30fc\u30b9\n* CPU: 3core\n* Mem: 3072GB  \n  RDO \u516c\u5f0f\u30b5\u30a4\u30c8\u306b\u306f\u5c11\u306a\u304f\u3068\u3082 4GB \u3068\u8a18\u8f09\u3042\u308b\u304c\u30ea\u30bd\u30fc\u30b9\u4f59\u88d5\u306a\u3057\u3002\u3002\u3002\n\n> Machine with at least 4GB RAM, processors with hardware virtualization extensions, and at least one network adapter.\n> https://www.rdoproject.org/install/quickstart/\n\n* NIC: 2\u3064 (\u696d\u52d9LAN/\u7ba1\u7406LAN)\n\n## \u2662 OS\n* CentOS7.2\n\n# \u3010\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u3011\n* \u53c2\u8003\u30b5\u30a4\u30c8\uff1ahttps://www.rdoproject.org/install/quickstart/\n\n## \u2662 1. RDO Packstack \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u767b\u9332\n```bash\nyum install https://www.rdoproject.org/repos/rdo-release.rpm\n```\n## \u2662 2. OpenStack(Kilo)\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n### a. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b9f\u884c (CentOS7)\n* \u6a19\u6e96\u30ea\u30dd\u30b8\u30c8\u30ea\u306b kilo \u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u305f\u3002\u7d20\u6674\u3089\u3057\u3044\u3002  \n  \u9060\u616e\u306a\u304f\u4f7f\u308f\u305b\u3066\u9802\u304f\u3002  \n\n```bash\nyum search centos-release-openstack\n-----\n\u8aad\u307f\u8fbc\u3093\u3060\u30d7\u30e9\u30b0\u30a4\u30f3:fastestmirror\nLoading mirror speeds from cached hostfile\n * base: ftp.riken.jp\n * extras: ftp.riken.jp\n * updates: ftp.riken.jp\n===================================== N/S matched: centos-release-openstack ======================================\ncentos-release-openstack.noarch : OpenStack from the CentOS Cloud SIG repo configs\ncentos-release-openstack-kilo.noarch : OpenStack from the CentOS Cloud SIG repo configs\ncentos-release-openstack-liberty.noarch : OpenStack from the CentOS Cloud SIG repo configs\n\n  Name and summary matches only, use \"search all\" for everything.\n```\n\n* \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b9f\u884c  \n\n```bash\nyum install centos-release-openstack-kilo\n```\n\n### b. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b9f\u884c(RHEL7)\n* \u53c2\u8003 \n * RDO repositories: https://www.rdoproject.org/documentation/repositories/  \n\n* \u30ea\u30dd\u30b8\u30c8\u30ea\u8ffd\u52a0\n\n```bash\nyum install http://rdoproject.org/repos/openstack-kilo/rdo-release-kilo.rpm\n```\n\n* \u30aa\u30d7\u30b7\u30e7\u30f3\u30ea\u30dd\u30b8\u30c8\u30ea\u6709\u52b9\u5316\n\n```bash\nsubscription-manager repos --enable rhel-7-server-optional-rpms\nsubscription-manager repos --enable rhel-7-server-extras-rpms\nsubscription-manager repos --enable=rhel-7-server-rh-common-rpms\n```\n\n\n## \u2662 3. openstack-packstack \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash\nyum install epel-release openstack-packstack\n```\n* epel \u3082\u5fc5\u8981\u3068 Document \u306b\u66f8\u3044\u3066\u3042\u308b\u70ba\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\n\n> 1. On RHEL and CentOS, enable the EPEL repository:  \n> http://docs.openstack.org/kilo/install-guide/install/yum/content/ch_basic_environment.html#basics-packages\n\n## \u2662 4. \u30b7\u30b9\u30c6\u30e0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u5b9f\u884c\n```bash\nyum update\n```\n\n## \u2662 5. \u30c7\u30d7\u30ed\u30a4\u5b9f\u884c\n* 10\u5206\u7a0b\u5b9f\u884c\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u3002\u74b0\u5883\u306b\u3088\u308a\u30a8\u30e9\u30fc\u5831\u544a\u3082\u3042\u308b\u3088\u3046\u3060\u304c\u7121\u4e8b\u7d42\u308f\u308b\u3053\u3068\u3092\u7948\u308b\u3002\n\n```bash\npackstack --allinone --use-epel=y\n----\n\n **** Installation completed successfully ******\n\nAdditional information:\n * A new answerfile was created in: /root/packstack-answers-20160320-182839.txt\n * Time synchronization installation was skipped. Please note that unsynchronized time on server instances might be problem for some OpenStack components.\n * Warning: NetworkManager is active on 10.0.2.15. OpenStack networking currently does not work on systems that have the Network Manager service enabled.\n * File /root/keystonerc_admin has been created on OpenStack client host 10.0.2.15. To use the command line tools you need to source the file.\n * To access the OpenStack Dashboard browse to http://10.0.2.15/dashboard .\nPlease, find your login credentials stored in the keystonerc_admin in your home directory.\n * To use Nagios, browse to http://10.0.2.15/nagios username: nagiosadmin, password: 0156a1dda98a4ae9\n * The installation log file is available at: /var/tmp/packstack/20160320-182838-hvf94y/openstack-setup.log\n * The generated manifests are available at: /var/tmp/packstack/20160320-182838-hvf94y/manifests\n```\n\n## \u2662 6. NetworkManager \u7121\u52b9\u5316\n* \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u901a\u308a\u3001 OpenStack \u3067 NetworkManager \u306e\u5229\u7528\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u306a\u3044\u70ba\u3001\u505c\u6b62\u3059\u308b\n\n```bash\nsystemctl disable NetworkManager && systemctl enable network\nsystemctl stop NetworkManager && systemctl restart network\n```\n\n## \u2662 7. \u4eee\u60f3\u30b5\u30fc\u30d0\u8a2d\u5b9a\u306e\u6709\u52b9\u5316\n* \u4eee\u60f3\u30b5\u30fc\u30d0\u3067\u69cb\u7bc9\u3059\u308b\u969b\u306b\u306f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092 KVM \u30e2\u30fc\u30c9\u3067\u8d77\u52d5\u3059\u308b\u8a2d\u5b9a\u3068\u3001vhost_net \u3092\u6709\u52b9\u5316\u3059\u308b\u3002\n\n### 1. nova \u8a2d\u5b9a\u5909\u66f4(KVM \u30e2\u30fc\u30c9\u6709\u52b9\u5316)\n```bash\nsed -i s/virt_type=qemu/virt_type=kvm/g /etc/nova/nova.conf\ncat /etc/nova/nova.conf | grep ^virt_type=\n```\n\n### 2. \u8a2d\u5b9a\u53cd\u6620\n```bash\nsystemctl restart openstack-nova-compute.service\n```\n\n### 3. vhost_net \u6709\u52b9\u5316\n```bash\nmodprobe vhost_net\n```\n\n### 4. vhost_net \u6709\u52b9\u5316\u78ba\u8a8d\n```bash\nlsmod | grep vhost_net\n```\n", "tags": ["openstack", "CentOS", "centos7", "Linux"]}