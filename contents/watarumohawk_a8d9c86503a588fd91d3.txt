{"context": " More than 1 year has passed since last update.\u524d\u56de\u3068\u524d\u3005\u56de\u3068\u57fa\u672c\u7684\u306b\u306f\u540c\u3058\u3067\u3001\u4eca\u56de\u306f\u78c1\u5834\u304c\u4e00\u69d8\u3067\u306a\u3044\u5834\u5408\u3092\u8003\u3048\u308b\u3002\n[\u53c2\u8003]\n\n[C\u8a00\u8a9e] \u96fb\u5834\u304c\u3042\u308b\u5834\u5408\u306e\u4e00\u69d8\u78c1\u5834\u4e2d\u306e\u8377\u96fb\u7c92\u5b50\u306e\u904b\u52d5\u3092\u30eb\u30f3\u30b2\u30af\u30c3\u30bf\u6cd5\u3067\u8a08\u7b97\n[C\u8a00\u8a9e] \u4e00\u69d8\u78c1\u5834\u4e2d\u306e\u8377\u96fb\u7c92\u5b50\u306e\u904b\u52d5\u3092\u30eb\u30f3\u30b2\u30af\u30c3\u30bf\u6cd5\u3067\u8a08\u7b97\n\n\n\u4e00\u69d8\u78c1\u5834\u4e2d\u306e\u8377\u96fb\u7c92\u5b50\u306e\u904b\u52d5\n\u904b\u52d5\u65b9\u7a0b\u5f0f\nm\\frac{d \\mathbf{v} }{dt} = q \\mathbf{v} \u00d7 \\mathbf{B}\nmdvdt=qv\u00d7B{m\\frac{d \\mathbf{v} }{dt} = q \\mathbf{v} \u00d7 \\mathbf{B}\n}\nB\\mathbf{B}\u306f\u4e00\u69d8\u3067zz\u65b9\u5411\u3001q>0\u3068\u3059\u308b\u3002\n\u521d\u671f\u6761\u4ef6\uff1at=0\u3067x=y=0,vx=v0,vy=0t = 0 \u3067 x = y = 0, v_x = v_0, v_y = 0\nxx\u6210\u5206\n\\frac{dv_x}{dt} = \\frac{qB}{m}v_y\ndvxdt=qBmvy{\\frac{dv_x}{dt} = \\frac{qB}{m}v_y\n}\ny\u6210\u5206y\u6210\u5206\n\\frac{dv_y}{dt} = -\\frac{qB}{m}v_x\ndvydt=\u2212qBmvx{\\frac{dv_y}{dt} = -\\frac{qB}{m}v_x\n}\n\u8a08\u7b97\u3057\u3084\u3059\u3044\u3088\u3046\u306b\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7f6e\u304d\u63db\u3048\u308b\u3002\nu_x = \\frac{v_x}{v_0}\n\\\\\nu_y = \\frac{v_y}{v_0}\n\\\\\n\u03c4 = \\frac{qBt}{m}\n\\\\\nX = \\frac{qBx}{mv_0}\n\\\\\nY = \\frac{qBy}{mv_0}\nux=vxv0uy=vyv0\u03c4=qBtmX=qBxmv0Y=qBymv0{u_x = \\frac{v_x}{v_0}\n\\\\\nu_y = \\frac{v_y}{v_0}\n\\\\\n\u03c4 = \\frac{qBt}{m}\n\\\\\nX = \\frac{qBx}{mv_0}\n\\\\\nY = \\frac{qBy}{mv_0}\n}\n\ngrad B\u30c9\u30ea\u30d5\u30c8\nB = B_0(1 + \u03b1(\\frac{y}{R_L})^2) = B_0(1 + \u03b1Y^2)\n\\\\\n( Y = \\frac{qB}{mv_0}y )\nB=B0(1+\u03b1(yRL)2)=B0(1+\u03b1Y2)(Y=qBmv0y){B = B_0(1 + \u03b1(\\frac{y}{R_L})^2) = B_0(1 + \u03b1Y^2)\n\\\\\n( Y = \\frac{qB}{mv_0}y )\n}\nRLR_L \u306f\u30e9\u30fc\u30e2\u30a2\u534a\u5f84\uff08Larmor radius\uff09\n\n\u30c9\u30ea\u30d5\u30c8\u3092\u8003\u616e\u3059\u308b\ny\u306e\u6b63\u65b9\u5411\u306b\u884c\u304f\u307b\u3069\u3001BB\u304c\u5f37\u304f\u306a\u308b\u5834\u5408\u3092\u8003\u3048\u308b\u3002\n\n\\frac{dv_x}{dt} = \\frac{qB}{m}v_y\n\\\\\n\\hspace{125px} = \\frac{q}{m}B_0(1 + \u03b1Y^2)v_y\n\\\\\n\u21d4 \\frac{d(v_0u_x)}{dt}= \\frac{q}{m}B_0(1 + \u03b1Y^2)v_y\n\\\\\n\u21d4 \\frac{du_x}{dt}= \\frac{q}{m}B_0(1 + \u03b1Y^2)\\frac{v_y}{v_0}\n\\\\\n\u21d4 \\frac{du_x}{dt}= \\frac{q}{m}B_0(1 + \u03b1Y^2)u_y \\ \u2026 \u2460\ndvxdt=qBmvy=qmB0(1+\u03b1Y2)vy\u21d4d(v0ux)dt=qmB0(1+\u03b1Y2)vy\u21d4duxdt=qmB0(1+\u03b1Y2)vyv0\u21d4duxdt=qmB0(1+\u03b1Y2)uy\u00a0\u2026\u2460{\n\\frac{dv_x}{dt} = \\frac{qB}{m}v_y\n\\\\\n\\hspace{125px} = \\frac{q}{m}B_0(1 + \u03b1Y^2)v_y\n\\\\\n\u21d4 \\frac{d(v_0u_x)}{dt}= \\frac{q}{m}B_0(1 + \u03b1Y^2)v_y\n\\\\\n\u21d4 \\frac{du_x}{dt}= \\frac{q}{m}B_0(1 + \u03b1Y^2)\\frac{v_y}{v_0}\n\\\\\n\u21d4 \\frac{du_x}{dt}= \\frac{q}{m}B_0(1 + \u03b1Y^2)u_y \\ \u2026 \u2460\n}\n\u3053\u3053\u3067\n\\frac{du_x}{dt} = \\frac{du_x}{d\u03c4}\\frac{d\u03c4}{dt} = \\frac{du_x}{d\u03c4}\\frac{qB_0}{m} \\ \u2026\u2461\nduxdt=duxd\u03c4d\u03c4dt=duxd\u03c4qB0m\u00a0\u2026\u2461{\\frac{du_x}{dt} = \\frac{du_x}{d\u03c4}\\frac{d\u03c4}{dt} = \\frac{du_x}{d\u03c4}\\frac{qB_0}{m} \\ \u2026\u2461\n}\n\u2460\u3068\u2461\u3088\u308a\n\\frac{du_x}{d\u03c4}\\frac{qB_0}{m} = \\frac{qB_0}{m}(1 + \u03b1Y^2)u_y\n\\\\\n\u2234 \\frac{du_x}{d\u03c4} = (1 + \u03b1Y^2)u_y\n{\\frac{du_x}{d\u03c4}\\frac{qB_0}{m} = \\frac{qB_0}{m}(1 + \u03b1Y^2)u_y\n\\\\\n\u2234 \\frac{du_x}{d\u03c4} = (1 + \u03b1Y^2)u_y\n}{\\frac{du_x}{d\u03c4}\\frac{qB_0}{m} = \\frac{qB_0}{m}(1 + \u03b1Y^2)u_y\n\\\\\n\u2234 \\frac{du_x}{d\u03c4} = (1 + \u03b1Y^2)u_y\n}\n\u540c\u69d8\u306b\u3057\u3066\n\\frac{du_y}{d\u03c4} = -(1 + \u03b1Y^2)u_x\n{\\frac{du_y}{d\u03c4} = -(1 + \u03b1Y^2)u_x\n}{\\frac{du_y}{d\u03c4} = -(1 + \u03b1Y^2)u_x\n}\n\u4eca\u306f\u6b63\u96fb\u8377\u306e\u5834\u5408\u3092\u8003\u3048\u3066\u3044\u308b\u306e\u3067\u3001\u8ca0\u96fb\u8377\u3060\u3068\u7b26\u53f7\u304c\u9006\u306b\u306a\u308b\u3002\n\n\u30b5\u30f3\u30d7\u30eb\n\u6b63\u96fb\u8377\u306e\u5834\u5408\n\nsample.c\n#include <stdio.h>\n#include <math.h>\n\nint main(void) {\n\n    FILE *fp;\n\n    double x1, x2, x, y1, y2, y, vx1, vx2, vy1, vy2, t, dt, kx1, kx2, kx3, kx4, kx;\n    double ky1, ky2, ky3, ky4, ky, ux1, ux2, ux3, ux4, ux, uy1, uy2, uy3, uy4, uy, al;\n\n    fp = fopen(\"data-sample.csv\", \"w\");\n\n    x1 = 0;\n    y1 = 0;\n    vx1 = 1;\n    vy1 = 0;\n    dt = 0.01;\n    al = 0.1;\n\n    for (int i=0; i<=5000; i++) {\n        t = i*dt;\n\n        kx1 = dt*vx1;\n        ky1 = dt*vy1;\n        ux1 = dt*(1 + al*y1*y1)*vy1;\n        uy1 = -dt*(1 + al*y1*y1)*vx1;\n\n        kx2 = dt*(vx1 + ux1/2.);\n        ky2 = dt*(vy1 + uy1/2.);\n        ux2 = dt*( (1 + al*y1*y1)*vy1 + uy1/2. );\n        uy2 = dt*( -( (1 + al*y1*y1)*vx1 + ux1/2. ) );\n\n        kx3 = dt*(vx1 + ux2/2.);\n        ky3 = dt*(vy1 + uy2/2.);\n        ux3 = dt*( (1 + al*y1*y1)*vy1 + uy2/2. );\n        uy3 = dt*( -( (1 + al*y1*y1)*vx1 + ux2/2. ) );\n\n        kx4 = dt*(vx1 + ux3);\n        ky4 = dt*(vy1 + uy3);\n        ux4 = dt*( (1 + al*y1*y1)*vy1 + uy3 );\n        uy4 = dt*( -( (1 + al*y1*y1)*vx1 + ux3 ) );\n\n        kx = (kx1 + 2*kx2 + 2*kx3 + kx4)/6.;\n        ky = (ky1 + 2*ky2 + 2*ky3 + ky4)/6.;\n\n        x2 = x1 + kx;\n        y2 = y1 + ky;\n\n        ux = (ux1 + 2*ux2 + 2*ux3 + ux4)/6.;\n        uy = (uy1 + 2*uy2 + 2*uy3 + uy4)/6.;\n        vx2 = vx1 + ux;\n        vy2 = vy1 + uy;\n\n        if (fmod(i, 10)<0.01) {\n            printf(\"t = %5.1f, \u8a08\u7b97\u5024 -> x=%f, y=%f\\n\", t, x1, y1);\n            fprintf(fp,\"%f, %f \\n\", x1, y1);\n        }\n\n        x1 = x2;\n        y1 = y2;\n        vx1 = vx2;\n        vy1 = vy2;\n\n    }\n    fclose(fp);\n\n    return 0;\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n\n\u3053\u3093\u306a\u611f\u3058\u306b\u30b0\u30eb\u30b0\u30eb\u56de\u308b\u3002\n\n\u8ca0\u96fb\u8377\u306e\u5834\u5408\u3082\u3084\u3063\u3066\u307f\u305f\u3051\u3069\u3001\u3044\u307e\u3044\u3061\u4e0a\u624b\u304f\u3044\u304b\u306a\u3044\u306e\u3067\u4fdd\u7559\u3002\n\u524d\u56de\u3068\u524d\u3005\u56de\u3068\u57fa\u672c\u7684\u306b\u306f\u540c\u3058\u3067\u3001\u4eca\u56de\u306f\u78c1\u5834\u304c\u4e00\u69d8\u3067\u306a\u3044\u5834\u5408\u3092\u8003\u3048\u308b\u3002\n\n[\u53c2\u8003]\n\n* [[C\u8a00\u8a9e] \u96fb\u5834\u304c\u3042\u308b\u5834\u5408\u306e\u4e00\u69d8\u78c1\u5834\u4e2d\u306e\u8377\u96fb\u7c92\u5b50\u306e\u904b\u52d5\u3092\u30eb\u30f3\u30b2\u30af\u30c3\u30bf\u6cd5\u3067\u8a08\u7b97](http://qiita.com/watarumohawk/items/cec2451386886eab39b1)\n* [[C\u8a00\u8a9e] \u4e00\u69d8\u78c1\u5834\u4e2d\u306e\u8377\u96fb\u7c92\u5b50\u306e\u904b\u52d5\u3092\u30eb\u30f3\u30b2\u30af\u30c3\u30bf\u6cd5\u3067\u8a08\u7b97](http://qiita.com/watarumohawk/items/89c64d6595172736c74e)\n\n#\u4e00\u69d8\u78c1\u5834\u4e2d\u306e\u8377\u96fb\u7c92\u5b50\u306e\u904b\u52d5\n\n\u904b\u52d5\u65b9\u7a0b\u5f0f\n\n```math\nm\\frac{d \\mathbf{v} }{dt} = q \\mathbf{v} \u00d7 \\mathbf{B}\n```\n$\\mathbf{B}$\u306f\u4e00\u69d8\u3067$z$\u65b9\u5411\u3001q>0\u3068\u3059\u308b\u3002\n\u521d\u671f\u6761\u4ef6\uff1a$t = 0 \u3067 x = y = 0, v_x = v_0, v_y = 0$\n\n$x$\u6210\u5206\n\n```math\n\\frac{dv_x}{dt} = \\frac{qB}{m}v_y\n```\n\n$y\u6210\u5206$\n\n```math\n\\frac{dv_y}{dt} = -\\frac{qB}{m}v_x\n```\n\n\u8a08\u7b97\u3057\u3084\u3059\u3044\u3088\u3046\u306b\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7f6e\u304d\u63db\u3048\u308b\u3002\n\n```math\nu_x = \\frac{v_x}{v_0}\n\\\\\nu_y = \\frac{v_y}{v_0}\n\\\\\n\u03c4 = \\frac{qBt}{m}\n\\\\\nX = \\frac{qBx}{mv_0}\n\\\\\nY = \\frac{qBy}{mv_0}\n```\n\n#grad B\u30c9\u30ea\u30d5\u30c8\n\n```math\nB = B_0(1 + \u03b1(\\frac{y}{R_L})^2) = B_0(1 + \u03b1Y^2)\n\\\\\n( Y = \\frac{qB}{mv_0}y )\n```\n\n$R_L$ \u306f\u30e9\u30fc\u30e2\u30a2\u534a\u5f84\uff08Larmor radius\uff09\n\n#\u30c9\u30ea\u30d5\u30c8\u3092\u8003\u616e\u3059\u308b\n\ny\u306e\u6b63\u65b9\u5411\u306b\u884c\u304f\u307b\u3069\u3001$B$\u304c\u5f37\u304f\u306a\u308b\u5834\u5408\u3092\u8003\u3048\u308b\u3002\n\n```math\n\n\\frac{dv_x}{dt} = \\frac{qB}{m}v_y\n\\\\\n\\hspace{125px} = \\frac{q}{m}B_0(1 + \u03b1Y^2)v_y\n\\\\\n\u21d4 \\frac{d(v_0u_x)}{dt}= \\frac{q}{m}B_0(1 + \u03b1Y^2)v_y\n\\\\\n\u21d4 \\frac{du_x}{dt}= \\frac{q}{m}B_0(1 + \u03b1Y^2)\\frac{v_y}{v_0}\n\\\\\n\u21d4 \\frac{du_x}{dt}= \\frac{q}{m}B_0(1 + \u03b1Y^2)u_y \\ \u2026 \u2460\n```\n\n\u3053\u3053\u3067\n\n```math\n\\frac{du_x}{dt} = \\frac{du_x}{d\u03c4}\\frac{d\u03c4}{dt} = \\frac{du_x}{d\u03c4}\\frac{qB_0}{m} \\ \u2026\u2461\n```\n\n\u2460\u3068\u2461\u3088\u308a\n\n```math\n\\frac{du_x}{d\u03c4}\\frac{qB_0}{m} = \\frac{qB_0}{m}(1 + \u03b1Y^2)u_y\n\\\\\n\u2234 \\frac{du_x}{d\u03c4} = (1 + \u03b1Y^2)u_y\n```\n\n\u540c\u69d8\u306b\u3057\u3066\n\n```math\n\\frac{du_y}{d\u03c4} = -(1 + \u03b1Y^2)u_x\n```\n\n\u4eca\u306f\u6b63\u96fb\u8377\u306e\u5834\u5408\u3092\u8003\u3048\u3066\u3044\u308b\u306e\u3067\u3001\u8ca0\u96fb\u8377\u3060\u3068\u7b26\u53f7\u304c\u9006\u306b\u306a\u308b\u3002\n\n#\u30b5\u30f3\u30d7\u30eb\n\n\u6b63\u96fb\u8377\u306e\u5834\u5408\n\n```C:sample.c\n#include <stdio.h>\n#include <math.h>\n\nint main(void) {\n\n\tFILE *fp;\n\n\tdouble x1, x2, x, y1, y2, y, vx1, vx2, vy1, vy2, t, dt, kx1, kx2, kx3, kx4, kx;\n\tdouble ky1, ky2, ky3, ky4, ky, ux1, ux2, ux3, ux4, ux, uy1, uy2, uy3, uy4, uy, al;\n\n\tfp = fopen(\"data-sample.csv\", \"w\");\n\n\tx1 = 0;\n\ty1 = 0;\n\tvx1 = 1;\n\tvy1 = 0;\n\tdt = 0.01;\n\tal = 0.1;\n\n\tfor (int i=0; i<=5000; i++) {\n        t = i*dt;\n\n        kx1 = dt*vx1;\n        ky1 = dt*vy1;\n        ux1 = dt*(1 + al*y1*y1)*vy1;\n        uy1 = -dt*(1 + al*y1*y1)*vx1;\n\n        kx2 = dt*(vx1 + ux1/2.);\n        ky2 = dt*(vy1 + uy1/2.);\n        ux2 = dt*( (1 + al*y1*y1)*vy1 + uy1/2. );\n        uy2 = dt*( -( (1 + al*y1*y1)*vx1 + ux1/2. ) );\n\n        kx3 = dt*(vx1 + ux2/2.);\n        ky3 = dt*(vy1 + uy2/2.);\n        ux3 = dt*( (1 + al*y1*y1)*vy1 + uy2/2. );\n        uy3 = dt*( -( (1 + al*y1*y1)*vx1 + ux2/2. ) );\n\n        kx4 = dt*(vx1 + ux3);\n        ky4 = dt*(vy1 + uy3);\n        ux4 = dt*( (1 + al*y1*y1)*vy1 + uy3 );\n        uy4 = dt*( -( (1 + al*y1*y1)*vx1 + ux3 ) );\n\n        kx = (kx1 + 2*kx2 + 2*kx3 + kx4)/6.;\n        ky = (ky1 + 2*ky2 + 2*ky3 + ky4)/6.;\n\n        x2 = x1 + kx;\n        y2 = y1 + ky;\n\n        ux = (ux1 + 2*ux2 + 2*ux3 + ux4)/6.;\n        uy = (uy1 + 2*uy2 + 2*uy3 + uy4)/6.;\n        vx2 = vx1 + ux;\n        vy2 = vy1 + uy;\n\n        if (fmod(i, 10)<0.01) {\n            printf(\"t = %5.1f, \u8a08\u7b97\u5024 -> x=%f, y=%f\\n\", t, x1, y1);\n            fprintf(fp,\"%f, %f \\n\", x1, y1);\n        }\n\n        x1 = x2;\n        y1 = y2;\n        vx1 = vx2;\n        vy1 = vy2;\n\n    }\n    fclose(fp);\n\n    return 0;\n}\n```\n\n##\u5b9f\u884c\u7d50\u679c\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-07-28 0.09.53.png](https://qiita-image-store.s3.amazonaws.com/0/44742/f828ea93-6fb8-54bd-2025-d13d6873d39c.png)\n\n\u3053\u3093\u306a\u611f\u3058\u306b\u30b0\u30eb\u30b0\u30eb\u56de\u308b\u3002\n\n---\n\n\u8ca0\u96fb\u8377\u306e\u5834\u5408\u3082\u3084\u3063\u3066\u307f\u305f\u3051\u3069\u3001\u3044\u307e\u3044\u3061\u4e0a\u624b\u304f\u3044\u304b\u306a\u3044\u306e\u3067\u4fdd\u7559\u3002\n", "tags": ["C", "\u6570\u5024\u8a08\u7b97", "\u96fb\u78c1\u6c17", "\u30d7\u30e9\u30ba\u30de\u7269\u7406", "\u7269\u7406"]}