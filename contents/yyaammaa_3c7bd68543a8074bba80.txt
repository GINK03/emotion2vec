{"context": " More than 1 year has passed since last update.\u30d1\u30d6\u30ea\u30c3\u30af\u306aGist\u3092\u30d6\u30ed\u30b0\u307f\u305f\u3044\u306b\u8868\u793a\u3059\u308b gistd \u3068\u3044\u3046Web\u30b5\u30fc\u30d3\u30b9\u3092\u3064\u304f\u308a\u307e\u3057\u305f (\u672c\u5f53\u306f /of \u3068\u3044\u3046\u30d1\u30b9\u306f\u4ed8\u3051\u305f\u304f\u306a\u304b\u3063\u305f\u304c\u7406\u7531\u306f\u5f8c\u8ff0)\nhttps://gistd.yyaammaa.com/of/\n\n\u3053\u3093\u306a\u611f\u3058\u3067Gist\u3092\u30d6\u30ed\u30b0\u3063\u307d\u304f\u8868\u793a\u3057\u307e\u3059\nhttps://gistd.yyaammaa.com/of/yyaammaa\n\n\n\u3064\u304f\u3063\u305f\u52d5\u6a5f\n\nAndroid\u30a2\u30d7\u30ea\u306f\u3088\u304f\u4f5c\u3063\u3066\u308b\u304c\u3001Web\u30b5\u30fc\u30d3\u30b9\u3092\u3064\u304f\u3063\u305f\u3053\u3068\u304c\u306a\u3044\u306e\u3067\u3064\u304f\u3063\u3066\u307f\u305f\u304b\u3063\u305f\nAWS API Gateway + Lambda (+ DynamoDB\u3068\u304b) \u306e\u69cb\u6210\u306a\u3089\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u77e5\u8b58\u3057\u304b\u306a\u304f\u3066\u3082\u3001\u30b5\u30fc\u30d0\u30ec\u30b9\u3067\u30aa\u30fc\u30c8\u30b9\u30b1\u30fc\u30eb\u3067\u30a2\u30b8\u30e3\u30a4\u30eb\u306aWeb\u30b5\u30fc\u30d3\u30b9\u306e\u958b\u767a\u30fb\u904b\u7528\u304c\u3067\u304d\u308b\u3093\u3058\u3083\u306a\u3044\u3060\u308d\u3046\u304b\u3001\u3068\u3044\u3046\u5922\u306e\u691c\u8a3c\n\n\u60c5\u5831\u6e90\u3068\u3057\u3066\u3001\u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u3055\u3093\u306e\u8a18\u4e8b \u3084 Qiita\u306e\u8a18\u4e8b \u3084 r7kamura\u3055\u3093\u306e\u30d6\u30ed\u30b0 \u304c\u3068\u3066\u3082\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\n\n\u69cb\u6210\n\n\nroot\n\nroot\u306fstatic\u306a\u30da\u30fc\u30b8\u306a\u306e\u3067\u3001S3\u306bindex.html\u3092\u7f6e\u3044\u3066\u3001HTTP Proxy\u3067\u53c2\u7167\u3002\n\n/{username}\n\n/{username} \u3067\u306f\u3001\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\nusername\u3092Lambda(Node.js) \u306b\u6e21\u3059\nLambda\u3067\u3001\n\n\n\nGitHub\u306eAPI \u3092\u53e9\u3044\u3066Gist\u3092\u53d6\u5f97\n\u53d6\u5f97\u3057\u305fGist\u304cMarkdown\u3060\u3063\u305f\u3089marked\u3067html\u306b\u5909\u63db\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3 (Jade) \u3067\u305d\u308c\u3063\u307d\u3044\u30da\u30fc\u30b8\u3092\u751f\u6210\n\n\n\u305f\u3060\u3057\u3001Lambda\u304b\u3089\u306ftext/html\u3067\u306f\u8fd4\u305b\u306a\u3044\u306e\u3067\u3001{'responseHtml':'<html...'} \u307f\u305f\u3044\u306a\u9069\u5f53\u306ajson\u3067\u8fd4\u3057\u3066\u3001Method/Integration Response \u3067html\u306b\u5909\u63db\n\n\n\u53c2\u8003: Amazon API Gateway \u2013 JSON\u5f62\u5f0f\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u3092HTML\u5f62\u5f0f\u306b\u52a0\u5de5\u3057\u3066\u8fd4\u3057\u3066\u307f\u308b\n\n\n\n\n\n\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3067\u306e\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\nUse a Custom Domain Name in API Gateway\nAmazon API Gateway \u3092\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3067\u5229\u7528\u3059\u308b\n\u4e0a\u8a18\u306eAWS\u516c\u5f0f\u3084\u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u3055\u3093\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3067\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\n\u304c\u3001\u672c\u5f53\u306fBase path\u3092/\u306b\u3057\u3066\u3001https://gistd.yyaammaa.com/ \u3092\u30eb\u30fc\u30c8\u306b\u3057\u305f\u304b\u3063\u305f\u306e\u3060\u304c\u3001\u4e0a\u8a18\u306e\u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u3055\u3093\u306e\u8a18\u4e8b\u306e\u3068\u304a\u308a\u3001Base path\u306b\u4f55\u304b\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u52d5\u304b\u306a\u3044\u306e\u3067\u3057\u3087\u3046\u304c\u306a\u3044\u306e\u3067 of \u3068\u304b\u9069\u5f53\u306a\u540d\u524d\u3092\u8a2d\u5b9a\u3057\u3066https://gistd.yyaammaa.com/of/ \u3092\u30eb\u30fc\u30c8\u306b\u305b\u3056\u308b\u3092\u5f97\u306a\u304b\u3063\u305f\u3002\nempty base path for custom domain does not work \nThanks for pointing this out. We are aware of the issue and we are rolling out a fix for it today. For the time being you can go ahead by specifying a base path and test your API, I will notify you on this thread as soon as the patch is out and you can simply edit your custom domain and remove the base path.\n\n\u5bfe\u5fdc\u3059\u308b\u3063\u307d\u3044\u3053\u3068\u306f\u8a00\u3063\u3066\u3044\u308b\u304c\u30012015/09/02\u73fe\u5728\u3067\u306f\u307e\u3060\u5bfe\u5fdc\u3055\u308c\u3066\u3044\u306a\u3044\u3002\n\u8ffd\u8a18: \u30b3\u30e1\u30f3\u30c8\u306e\u3068\u304a\u308a\u3001CloudFront\u3092\u901a\u305b\u3070 /of \u7121\u3057\u3067\u3044\u3051\u307e\u3057\u305f\uff08\u304c\u3001API Gateway\u306e\u5185\u90e8\u3067\u3082\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u5bfe\u5fdc\u6642\u306bCloudFront\u3092\u4f7f\u3063\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u30012\u91cdCloudFront\u306b\u306a\u3063\u3066\u3044\u308b\u6c17\u304c\u3059\u308b)\u3002\n\n\u611f\u60f3\n\nNode.js \u3067\u6c17\u8efd\u306b\u307b\u3044\u307b\u3044require\u3057\u3066\u9069\u5f53\u306b\u66f8\u3044\u3066zip\u3057\u3066\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3060\u3051\u3067\u52d5\u304f\u306e\u3067\u3001\u697d\u3057\u3044\n\n\n\u304c\u3001API Gateway\u306e\u8a2d\u5b9a\u3092\u307d\u3061\u307d\u3061\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u3084\u3063\u305f\u308a\u3001\u30b3\u30fc\u30c9\u3092\u4fee\u6b63\u3059\u308b\u305f\u3073\u306b\u30d6\u30e9\u30a6\u30b6\u304b\u3089zip\u3067\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u306e\u306f\u8f9b\u3044\u306e\u3067 @r7kamura \u3055\u3093\u306e Fluct \u3092\u5c0e\u5165\u3057\u3066\u3001\u3061\u3083\u3093\u3068\u3057\u305f\u30c6\u30b9\u30c8\u30fb\u30c7\u30d7\u30ed\u30a4\u74b0\u5883\u3092\u6574\u3048\u3088\u3046\u3068\u601d\u3063\u305f\n\n\n\u672c\u6c17\u3067\u4f7f\u3046\u306b\u306f\u307e\u3060\u65e9\u3044\u304b\u306a\u3068\u3044\u3046\u4e88\u611f\u304c\u3057\u305f\n\n\nLambda\u306etimeout\u8a2d\u5b9a\u3084API Gateway\u306eThrottling\u8a2d\u5b9a\u304c\u6642\u3005\u52dd\u624b\u306b\u521d\u671f\u5024\u306b\u623b\u308b\nAPI Gateway\u306f\u65e5\u672c\u8a9e\u306e\u6271\u3044\u306f\u307e\u3060\u602a\u3057\u3044\u3002Query param\u306b\u5165\u308c\u305f\u308a\u3059\u308b\u3068\u602a\u3057\u3044\u52d5\u4f5c\u3092\u3059\u308b\n\n\nLambda\u3063\u3066\u3001AWS\u306b\u3068\u3063\u3066\u307f\u308c\u3070\u904a\u3093\u3067\u3044\u308bEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u6709\u52b9\u6d3b\u7528\u306b\u3082\u306a\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u3068\u6c17\u4ed8\u3044\u3066Amazon\u3059\u3054\u3044\u306a\u3042\u3068\u601d\u3063\u305f\n\n\u30d1\u30d6\u30ea\u30c3\u30af\u306aGist\u3092\u30d6\u30ed\u30b0\u307f\u305f\u3044\u306b\u8868\u793a\u3059\u308b **gistd** \u3068\u3044\u3046Web\u30b5\u30fc\u30d3\u30b9\u3092\u3064\u304f\u308a\u307e\u3057\u305f (\u672c\u5f53\u306f `/of` \u3068\u3044\u3046\u30d1\u30b9\u306f\u4ed8\u3051\u305f\u304f\u306a\u304b\u3063\u305f\u304c\u7406\u7531\u306f\u5f8c\u8ff0)\n\nhttps://gistd.yyaammaa.com/of/\n\n![](https://qiita-image-store.s3.amazonaws.com/0/32959/b0d64dcd-4930-905c-3c1c-64592626bda8.png)\n\n\n\u3053\u3093\u306a\u611f\u3058\u3067Gist\u3092\u30d6\u30ed\u30b0\u3063\u307d\u304f\u8868\u793a\u3057\u307e\u3059\n\nhttps://gistd.yyaammaa.com/of/yyaammaa\n\n![](https://qiita-image-store.s3.amazonaws.com/0/32959/e3c62791-a8f9-d2b0-934d-677c99a13f45.png)\n\n\n## \u3064\u304f\u3063\u305f\u52d5\u6a5f\n\n- Android\u30a2\u30d7\u30ea\u306f\u3088\u304f\u4f5c\u3063\u3066\u308b\u304c\u3001Web\u30b5\u30fc\u30d3\u30b9\u3092\u3064\u304f\u3063\u305f\u3053\u3068\u304c\u306a\u3044\u306e\u3067\u3064\u304f\u3063\u3066\u307f\u305f\u304b\u3063\u305f\n- AWS API Gateway + Lambda (+ DynamoDB\u3068\u304b) \u306e\u69cb\u6210\u306a\u3089\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u77e5\u8b58\u3057\u304b\u306a\u304f\u3066\u3082\u3001\u30b5\u30fc\u30d0\u30ec\u30b9\u3067\u30aa\u30fc\u30c8\u30b9\u30b1\u30fc\u30eb\u3067\u30a2\u30b8\u30e3\u30a4\u30eb\u306aWeb\u30b5\u30fc\u30d3\u30b9\u306e\u958b\u767a\u30fb\u904b\u7528\u304c\u3067\u304d\u308b\u3093\u3058\u3083\u306a\u3044\u3060\u308d\u3046\u304b\u3001\u3068\u3044\u3046\u5922\u306e\u691c\u8a3c\n\n\u60c5\u5831\u6e90\u3068\u3057\u3066\u3001[\u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u3055\u3093\u306e\u8a18\u4e8b](http://dev.classmethod.jp/referencecat/api-gateway/) \u3084 [Qiita\u306e\u8a18\u4e8b](http://qiita.com/tags/apigateway) \u3084 [r7kamura\u3055\u3093\u306e\u30d6\u30ed\u30b0](http://r7kamura.hatenablog.com/) \u304c\u3068\u3066\u3082\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\n\n\n## \u69cb\u6210\n\n![](https://qiita-image-store.s3.amazonaws.com/0/32959/83cc37e7-17be-e897-360e-5a0dcff6c0a3.png)\n\n### root\n\n![](https://qiita-image-store.s3.amazonaws.com/0/32959/156e96d3-c9ce-6428-87ef-469928556794.png)\n\nroot\u306fstatic\u306a\u30da\u30fc\u30b8\u306a\u306e\u3067\u3001S3\u306bindex.html\u3092\u7f6e\u3044\u3066\u3001HTTP Proxy\u3067\u53c2\u7167\u3002\n\n\n### /{username}\n\n![](https://qiita-image-store.s3.amazonaws.com/0/32959/480cdd7b-f7b7-9c21-95bb-0885bf1e756b.png)\n\n\n`/{username}` \u3067\u306f\u3001\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\n- username\u3092Lambda(Node.js) \u306b\u6e21\u3059\n- Lambda\u3067\u3001\n    - [GitHub\u306eAPI](https://developer.github.com/v3/gists/) \u3092\u53e9\u3044\u3066Gist\u3092\u53d6\u5f97\n    - \u53d6\u5f97\u3057\u305fGist\u304cMarkdown\u3060\u3063\u305f\u3089[marked](https://github.com/chjj/marked)\u3067html\u306b\u5909\u63db\n    - \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3 ([Jade](http://jade-lang.com/)) \u3067\u305d\u308c\u3063\u307d\u3044\u30da\u30fc\u30b8\u3092\u751f\u6210\n- \u305f\u3060\u3057\u3001Lambda\u304b\u3089\u306ftext/html\u3067\u306f\u8fd4\u305b\u306a\u3044\u306e\u3067\u3001`{'responseHtml':'<html...'}` \u307f\u305f\u3044\u306a\u9069\u5f53\u306ajson\u3067\u8fd4\u3057\u3066\u3001Method/Integration Response \u3067html\u306b\u5909\u63db\n   - \u53c2\u8003: [Amazon API Gateway \u2013 JSON\u5f62\u5f0f\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u3092HTML\u5f62\u5f0f\u306b\u52a0\u5de5\u3057\u3066\u8fd4\u3057\u3066\u307f\u308b](http://dev.classmethod.jp/cloud/aws/api-gateway-2/)\n\n## \u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3067\u306e\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\n\n[Use a Custom Domain Name in API Gateway]\n(https://docs.aws.amazon.com/apigateway/latest/developerguide/how-to-custom-domains.html)\n[Amazon API Gateway \u3092\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3067\u5229\u7528\u3059\u308b](http://dev.classmethod.jp/cloud/aws/api-gateway-with-custom-domain/)\n\n\u4e0a\u8a18\u306eAWS\u516c\u5f0f\u3084\u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u3055\u3093\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3067\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\n![](https://qiita-image-store.s3.amazonaws.com/0/32959/7c9adbcd-7b37-80f0-347e-3d4d3f03100a.png)\n\n\u304c\u3001\u672c\u5f53\u306fBase path\u3092`/`\u306b\u3057\u3066\u3001`https://gistd.yyaammaa.com/` \u3092\u30eb\u30fc\u30c8\u306b\u3057\u305f\u304b\u3063\u305f\u306e\u3060\u304c\u3001\u4e0a\u8a18\u306e\u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u3055\u3093\u306e\u8a18\u4e8b\u306e\u3068\u304a\u308a\u3001Base path\u306b\u4f55\u304b\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u52d5\u304b\u306a\u3044\u306e\u3067\u3057\u3087\u3046\u304c\u306a\u3044\u306e\u3067 `of` \u3068\u304b\u9069\u5f53\u306a\u540d\u524d\u3092\u8a2d\u5b9a\u3057\u3066`https://gistd.yyaammaa.com/of/` \u3092\u30eb\u30fc\u30c8\u306b\u305b\u3056\u308b\u3092\u5f97\u306a\u304b\u3063\u305f\u3002\n\n[empty base path for custom domain does not work ](https://forums.aws.amazon.com/thread.jspa?threadID=192604&tstart=50)\n\n```\nThanks for pointing this out. We are aware of the issue and we are rolling out a fix for it today. For the time being you can go ahead by specifying a base path and test your API, I will notify you on this thread as soon as the patch is out and you can simply edit your custom domain and remove the base path.\n```\n\n\u5bfe\u5fdc\u3059\u308b\u3063\u307d\u3044\u3053\u3068\u306f\u8a00\u3063\u3066\u3044\u308b\u304c\u30012015/09/02\u73fe\u5728\u3067\u306f\u307e\u3060\u5bfe\u5fdc\u3055\u308c\u3066\u3044\u306a\u3044\u3002\n\n**\u8ffd\u8a18:** [\u30b3\u30e1\u30f3\u30c8](http://qiita.com/yyaammaa/items/3c7bd68543a8074bba80#comment-9902efd7020d00ca1eb3)\u306e\u3068\u304a\u308a\u3001CloudFront\u3092\u901a\u305b\u3070 `/of` \u7121\u3057\u3067\u3044\u3051\u307e\u3057\u305f\uff08\u304c\u3001API Gateway\u306e\u5185\u90e8\u3067\u3082\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u5bfe\u5fdc\u6642\u306bCloudFront\u3092\u4f7f\u3063\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u30012\u91cdCloudFront\u306b\u306a\u3063\u3066\u3044\u308b\u6c17\u304c\u3059\u308b)\u3002\n\n\n## \u611f\u60f3\n\n- Node.js \u3067\u6c17\u8efd\u306b\u307b\u3044\u307b\u3044require\u3057\u3066\u9069\u5f53\u306b\u66f8\u3044\u3066zip\u3057\u3066\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3060\u3051\u3067\u52d5\u304f\u306e\u3067\u3001\u697d\u3057\u3044\n    - \u304c\u3001API Gateway\u306e\u8a2d\u5b9a\u3092\u307d\u3061\u307d\u3061\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u3084\u3063\u305f\u308a\u3001\u30b3\u30fc\u30c9\u3092\u4fee\u6b63\u3059\u308b\u305f\u3073\u306b\u30d6\u30e9\u30a6\u30b6\u304b\u3089zip\u3067\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u306e\u306f\u8f9b\u3044\u306e\u3067 @r7kamura \u3055\u3093\u306e [Fluct](https://github.com/r7kamura/fluct) \u3092\u5c0e\u5165\u3057\u3066\u3001\u3061\u3083\u3093\u3068\u3057\u305f\u30c6\u30b9\u30c8\u30fb\u30c7\u30d7\u30ed\u30a4\u74b0\u5883\u3092\u6574\u3048\u3088\u3046\u3068\u601d\u3063\u305f\n- \u672c\u6c17\u3067\u4f7f\u3046\u306b\u306f\u307e\u3060\u65e9\u3044\u304b\u306a\u3068\u3044\u3046\u4e88\u611f\u304c\u3057\u305f\n  - Lambda\u306etimeout\u8a2d\u5b9a\u3084API Gateway\u306eThrottling\u8a2d\u5b9a\u304c\u6642\u3005\u52dd\u624b\u306b\u521d\u671f\u5024\u306b\u623b\u308b\n  - API Gateway\u306f\u65e5\u672c\u8a9e\u306e\u6271\u3044\u306f\u307e\u3060\u602a\u3057\u3044\u3002Query param\u306b\u5165\u308c\u305f\u308a\u3059\u308b\u3068\u602a\u3057\u3044\u52d5\u4f5c\u3092\u3059\u308b\n- Lambda\u3063\u3066\u3001AWS\u306b\u3068\u3063\u3066\u307f\u308c\u3070\u904a\u3093\u3067\u3044\u308bEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u6709\u52b9\u6d3b\u7528\u306b\u3082\u306a\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u3068\u6c17\u4ed8\u3044\u3066Amazon\u3059\u3054\u3044\u306a\u3042\u3068\u601d\u3063\u305f\n\n", "tags": ["AWS", "APIGateway", "lambda"]}