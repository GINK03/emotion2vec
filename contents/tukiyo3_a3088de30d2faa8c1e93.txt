{"context": " More than 1 year has passed since last update.\n\n\u53c2\u8003\n\n\nRaspberryPI(\u3068\u3044\u3046\u304bUbuntu)\u4e0a\u306bVPN\u30b5\u30fc\u30d0\u30fc\u69cb\u7bc9(PPTP) - Qiita @sumyapp \u3055\u3093\n\n\n\u6bd4\u8f03\u8868\n\nVPN Protocol Comparison List - PPTP vs L2TP vs OpenVPN \u2122 vs Chameleon \u2122 | VyprVPN\n\u7d20\u6674\u3089\u3057\u3044\u8868\u3060\u3063\u305f\u306e\u3067\u62dd\u501f\u3002\n\n\n\u901f\u5ea6\u9762\u3084CPU\u8ca0\u8377\u3001iPhone\u5bfe\u5fdc\u3068\u3044\u3046\u3053\u3068\u3067\u3001PPTP\u3067\u8a2d\u5b9a\u3092\u8a66\u307f\u308b\u3053\u3068\u306b\u3059\u308b\u3002\n\n\nPPTP\u306fgre+1723\u306b\u5bfe\u5fdc\u3002(pptpd)\n\ngre  IP\u30d7\u30ed\u30c8\u30b3\u30eb\u756a\u53f7     :\u300047 \nTCP\u30dd\u30fc\u30c8\u756a\u53f7   :\u30001723 \n\n\n\nIPSec\u306f\u8907\u6570\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u306b\u5bfe\u5fdc\u3002(strongswan)\n\nAH      IP\u30d7\u30ed\u30c8\u30b3\u30eb\u756a\u53f7\u3000  :\u300051\nESP     IP\u30d7\u30ed\u30c8\u30b3\u30eb\u756a\u53f7\u3000  :\u300050\nIKE     UDP\u30dd\u30fc\u30c8\u756a\u53f7\u3000   :\u3000500,4500\n\n\n\nl2tp(xl2tpd\n\nUDP\u30dd\u30fc\u30c8\u756a\u53f7\u3000   :\u30001701\n\n\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo apt-get install pptpd\n\n\nIP\u5272\u308a\u5f53\u3066\u8a2d\u5b9a\n\n/etc/pptpd.conf\n+ localip 10.0.1.2\n+ remoteip 10.0.1.234-238\n\n\n\nlocalip: pptpd\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3002\nremoteip: pptp\u63a5\u7d9a\u6642\uff0c10.0.1.234-.238\u306e\u7bc4\u56f2\u3067\u5272\u308a\u5f53\u3066\u3002\n\n\nDNS\u5272\u308a\u5f53\u3066\u8a2d\u5b9a\n\n/etc/ppp/pptpd-options\nms-dns 10.0.1.1\n\n\n\n\u63a5\u7d9a\u30e6\u30fc\u30b6\u30fb\u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a\n\n/etc/ppp/chap-secrets\n# User\u540d  \u30b5\u30fc\u30d0\u540d  \u30d1\u30b9\u30ef\u30fc\u30c9  \u5272\u308a\u5f53\u3066IP\n+ client    pptpd    Aegh6oiy    *\n+ client2   pptpd    Oojau3mo    10.0.1.130\n\n\n\n\n\u30b5\u30fc\u30d0\u540d\u306f pptpd \u56fa\u5b9a\u3002\nIP\u306fremoteip\u306e\u7bc4\u56f2\u3067\u81ea\u52d5\u5272\u308a\u5f53\u3066\u306e\u5834\u5408*\n\n\n\nMTU\u8a2d\u5b9a\n\n\u3053\u308c\u3092\u3057\u306a\u3044\u3068\u30e2\u30d0\u30a4\u30eb\u7aef\u672b\u306f\u901a\u4fe1\u304c\u3088\u304f\u9014\u5207\u308c\u308b\n\n\n/etc/ppp/options\n+ mtu 1280\n+ mru 1280\n\n\n\nport\u958b\u653e\n\nTCP1723\nGRE(47)\n\nAirMac\u306e\u5834\u5408\n\nAirMac \u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3 5.5.3 (Windows)\nPPTP on ubuntu 11.04 through AirMac Extreme | bibineko\n\n\n\n\n\nGRE\u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u8aad\u307f\u8fbc\u307f\n\nCTRL: PTY read or GRE write failed (pty,gre)=(6,7)\n\n\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u5834\u5408\u3001gre\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u8aad\u307f\u8fbc\u307e\u308c\u3066\u3044\u306a\u3044\u3002\n\n\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u5b58\u5728\u78ba\u8a8d\n$ find /lib/modules -name gre.ko\n/lib/modules/3.19.0-16-generic/kernel/net/ipv4/gre.ko\n\n\nsudo modprobe gre\n\n\n/etc/modules\n+ gre\n\n\n\nIP forwarding\n\n/etc/sysctl.conf\n+ net.ipv4.ip_forward=1\n\n\nsudo sysctl -p\n\n\n\u4e00\u5ea6OS\u518d\u8d77\u52d5\u3057\u3066\u304a\u304f\n\n\u3053\u308c\u91cd\u8981\u3002\n\n\n\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\nsudo systemctl start pptpd\n\n\n\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\niphone\u306b\u3066\n\n\u901a\u4fe1\u88c5\u7f6e\u306b\u3088\u3063\u3066\u63a5\u7d9a\u3092\u89e3\u9664\u3055\u308c\u307e\u3057\u305f\u3002\u63a5\u7d9a\u3057\u76f4\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\u305d\u308c\u3067\u3082\u554f\u984c\u304c\u89e3\u6c7a\u3057\u306a\u3044\u5834\u5408\u306f\u3001\u63a5\u7d9a\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n\u30de\u30a4IP\u3067\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u63a5\u7d9a\u3067\u304d\u307e\u305b\u3093\u3002\n\n\u8a70\u3093\u3060\u3002\u2028\u2028* [ubuntu] PPTP Server and PPTP Client\n\n## \u53c2\u8003\n\n* [RaspberryPI(\u3068\u3044\u3046\u304bUbuntu)\u4e0a\u306bVPN\u30b5\u30fc\u30d0\u30fc\u69cb\u7bc9(PPTP) - Qiita](http://qiita.com/sumyapp/items/b7300a9ffa316d676aa1) @sumyapp \u3055\u3093\n\n# \u6bd4\u8f03\u8868\n\n* [VPN Protocol Comparison List - PPTP vs L2TP vs OpenVPN \u2122 vs Chameleon \u2122 | VyprVPN](http://www.giganews.com/vyprvpn/compare-vpn-protocols.html)\n* \u7d20\u6674\u3089\u3057\u3044\u8868\u3060\u3063\u305f\u306e\u3067\u62dd\u501f\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-06-19 7.54.21.png](https://qiita-image-store.s3.amazonaws.com/0/25728/d482bb28-60f9-8062-791f-44a67b9d6fee.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-06-19 7.54.21.png\")\n\n\u901f\u5ea6\u9762\u3084CPU\u8ca0\u8377\u3001iPhone\u5bfe\u5fdc\u3068\u3044\u3046\u3053\u3068\u3067\u3001PPTP\u3067\u8a2d\u5b9a\u3092\u8a66\u307f\u308b\u3053\u3068\u306b\u3059\u308b\u3002\n\n* PPTP\u306fgre+1723\u306b\u5bfe\u5fdc\u3002(pptpd)\n  * gre\t IP\u30d7\u30ed\u30c8\u30b3\u30eb\u756a\u53f7\t :\u300047 \n  * TCP\u30dd\u30fc\u30c8\u756a\u53f7\t :\u30001723 \n\n* IPSec\u306f\u8907\u6570\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u306b\u5bfe\u5fdc\u3002(strongswan)\n  * AH\t \tIP\u30d7\u30ed\u30c8\u30b3\u30eb\u756a\u53f7\u3000\t:\u300051\n  * ESP\t \tIP\u30d7\u30ed\u30c8\u30b3\u30eb\u756a\u53f7\u3000\t:\u300050\n  * IKE\t \tUDP\u30dd\u30fc\u30c8\u756a\u53f7\u3000\t:\u3000500,4500\n* l2tp(xl2tpd\n  * UDP\u30dd\u30fc\u30c8\u756a\u53f7\u3000\t:\u30001701\n\n\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash:\nsudo apt-get install pptpd\n```\n\n## IP\u5272\u308a\u5f53\u3066\u8a2d\u5b9a\n\n```diff:/etc/pptpd.conf\n+ localip 10.0.1.2\n+ remoteip 10.0.1.234-238\n```\n\n* localip: pptpd\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3002\n* remoteip: pptp\u63a5\u7d9a\u6642\uff0c10.0.1.234-.238\u306e\u7bc4\u56f2\u3067\u5272\u308a\u5f53\u3066\u3002\n\n## DNS\u5272\u308a\u5f53\u3066\u8a2d\u5b9a\n\n```bash:/etc/ppp/pptpd-options\nms-dns 10.0.1.1\n```\n\n## \u63a5\u7d9a\u30e6\u30fc\u30b6\u30fb\u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a\n\n```diff:/etc/ppp/chap-secrets\n# User\u540d  \u30b5\u30fc\u30d0\u540d  \u30d1\u30b9\u30ef\u30fc\u30c9  \u5272\u308a\u5f53\u3066IP\n+ client    pptpd    Aegh6oiy    *\n+ client2   pptpd    Oojau3mo    10.0.1.130\n\n```\n\n* \u30b5\u30fc\u30d0\u540d\u306f `pptpd` \u56fa\u5b9a\u3002\n* IP\u306f`remoteip`\u306e\u7bc4\u56f2\u3067\u81ea\u52d5\u5272\u308a\u5f53\u3066\u306e\u5834\u5408`*`\n\n\n## MTU\u8a2d\u5b9a\n\n* \u3053\u308c\u3092\u3057\u306a\u3044\u3068\u30e2\u30d0\u30a4\u30eb\u7aef\u672b\u306f\u901a\u4fe1\u304c\u3088\u304f\u9014\u5207\u308c\u308b\n\n```diff:/etc/ppp/options\n+ mtu 1280\n+ mru 1280\n```\n\n## port\u958b\u653e\n\n* TCP1723\n* GRE(47)\n\n* AirMac\u306e\u5834\u5408\n  * [AirMac \u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3 5.5.3 (Windows)](https://support.apple.com/kb/DL1391?locale=ja_JP)\n  * [PPTP on ubuntu 11.04 through AirMac Extreme | bibineko](https://bibineko.wordpress.com/2011/05/26/pptp-on-ubuntu-11-04-through-airmac-extreme/)\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-06-19 8.04.28.png](https://qiita-image-store.s3.amazonaws.com/0/25728/74b1d51a-86f0-c3f7-04e0-b559ba207033.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-06-19 8.04.28.png\")\n\n\n## GRE\u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u8aad\u307f\u8fbc\u307f\n\n> CTRL: PTY read or GRE write failed (pty,gre)=(6,7)\n\n\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u5834\u5408\u3001gre\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u8aad\u307f\u8fbc\u307e\u308c\u3066\u3044\u306a\u3044\u3002\n\n```bash:\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u5b58\u5728\u78ba\u8a8d\n$ find /lib/modules -name gre.ko\n/lib/modules/3.19.0-16-generic/kernel/net/ipv4/gre.ko\n```\n\n```bash:\nsudo modprobe gre\n```\n\n```diff:/etc/modules\n+ gre\n```\n\n\n## IP forwarding\n\n```diff:/etc/sysctl.conf\n+ net.ipv4.ip_forward=1\n```\n\n```bash:\nsudo sysctl -p\n```\n\n## \u4e00\u5ea6OS\u518d\u8d77\u52d5\u3057\u3066\u304a\u304f\n\n* \u3053\u308c\u91cd\u8981\u3002\n\n## \u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n\n```bash:\nsudo systemctl start pptpd\n```\n\n# \u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\n\niphone\u306b\u3066\n\n> \u901a\u4fe1\u88c5\u7f6e\u306b\u3088\u3063\u3066\u63a5\u7d9a\u3092\u89e3\u9664\u3055\u308c\u307e\u3057\u305f\u3002\u63a5\u7d9a\u3057\u76f4\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\u305d\u308c\u3067\u3082\u554f\u984c\u304c\u89e3\u6c7a\u3057\u306a\u3044\u5834\u5408\u306f\u3001\u63a5\u7d9a\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n* [\u30de\u30a4IP\u3067\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u63a5\u7d9a\u3067\u304d\u307e\u305b\u3093\u3002](https://faq.interlink.or.jp/faq2/View/wcDisplayContent.aspx?id=179)\n\n\u8a70\u3093\u3060\u3002\u2028\u2028* [[ubuntu] PPTP Server and PPTP Client](http://ubuntuforums.org/showthread.php?t=1794838)\n", "tags": ["VPN", "PPTP"]}