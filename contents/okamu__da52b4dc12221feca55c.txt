{"context": "\n\nDocker\u3067\u672c\u683c\u7684\u306a\u30b5\u30fc\u30d0\u30fc\u3092\u69cb\u7bc9\u3059\u308b\n\n\nRancherOS\u3068\u306f\n\n\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u5229\u7528\u53ef\u80fd\u306aDocker\u5411\u3051\u30df\u30cb\u30de\u30ebOS\nDocker\u3068\u7af6\u5408\u3092\u5f15\u304d\u8d77\u3053\u3059\u304a\u305d\u308c\u306e\u3042\u308bsystemd\u306e\u3088\u3046\u306ainit\u30b7\u30b9\u30c6\u30e0\u3092\u4e0d\u8981\u306b\u3057\u3001\u6700\u5c0f\u9650\u306e\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9\u3068OS\u3067\u52d5\u4f5c\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u30b5\u30fc\u30d3\u30b9\u306b\u3088\u3063\u3066\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u9ad8\u3081\u3066\u3044\u308b\nKernel\u4e0a\u306b\u5373\u5ea7\u306bDocker\u30b3\u30f3\u30c6\u30ca\u3092\u5b9f\u884c\u3059\u308b\u3088\u3046\u8a2d\u8a08\u3055\u308c\u3066\u304a\u308a\u3001\u3053\u308c\u3089\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u30b3\u30a2\u3068\u306a\u308bLinux\u30b5\u30fc\u30d3\u30b9\u3092\u30e6\u30fc\u30b6\u306b\u63d0\u4f9b\u3059\u308b\n\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u8c4a\u5bcc\n\n\n\u69cb\u7bc9\u76ee\u6b21\n\nRancherOS\u3067\u672c\u683c\u7684\u306a\u81ea\u5b85\u30b5\u30fc\u30d0\u30fc\u3092\u69cb\u7bc9\u3057\u3088\u3046\u3000\u2190\u3000\u4eca\u3053\u3053\nRancherOS\u3067rancher-server\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3088\u3046\nRancherOS\u3067rancher-agent\u3092\u69cb\u7bc9\u3057\u3088\u3046\nRancherOS\u3067GlusterFS\u3092\u4f7f\u3063\u3066\u30c7\u30fc\u30bf\u3092\u6c38\u7d9a\u5316\u3057\u3088\u3046\nRancherOS\u3067private registory \u3067docker image\u3092\u7ba1\u7406\u3057\u3088\u3046\n\nRancher\u306eCATALOG\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc\u4e00\u89a7 \n\n\u8981\u4ef6\n\ndocker\u3067\u52d5\u304f\nOS\u306fRancherOS\u3092\u4f7f\u7528\n\u30a4\u30f3\u30d5\u30e9\u306e\u8a73\u3057\u3044\u77e5\u8b58\u304c\u306a\u3044\u4eba\u3067\u3082rancher\u306e\u7ba1\u7406\u753b\u9762\u304b\u3089\u30b5\u30fc\u30d3\u30b9\u3092\u5c55\u958b\u3057\u3001\u958b\u767a\u30fb\u516c\u958b\u304c\u3067\u304d\u308b\n\u30c7\u30fc\u30bf\u306e\u5fa9\u5143\u30fb\u5171\u6709\u304c\u53ef\u80fd\n\u4fdd\u5b88\u30fb\u7ba1\u7406\u304c\u5b89\u5168\u306b\u3067\u304d\u308b\n\n\n\u4ed5\u69d8\n\n\u7ba1\u7406\u753b\u9762top\n\n\n\u30b3\u30f3\u30c6\u30ca\u306e\u7ba1\u7406\n\n\u57fa\u672c\u7684\u306brancher/server\u3055\u3093(\u7ba1\u7406\u753b\u9762)\u304c\u3044\u3044\u611f\u3058\u306b\u3057\u3066\u304f\u308c\u308b\nrancher/server\u3055\u3093(\u7ba1\u7406\u753b\u9762)\u304cagent\u306b\u30b3\u30f3\u30c6\u30ca\u3092\u3064\u304f\u3063\u3066\u304f\u308c\u308b\n\u7ba1\u7406\u753b\u9762\u3067\u307d\u3061\u307d\u3061\u30b3\u30f3\u30c6\u30ca\u3092\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3068\u304bupgrade\u3068\u304b\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u308b\n\n\n\n\u30a2\u30af\u30bb\u30b9\n\nrancher-server\u306b{domain.com}443\u3082\u3057\u304f\u306f80\u756a\u3067\u30a2\u30af\u30bb\u30b9\u304c\u6765\u305f\u5834\u5408HAProxy\u3067agent\u306b\u632f\u308a\u5206\u3051\u308b\n\n\n\u30a4\u30e1\u30fc\u30b8\u56f3\n\n\u30b3\u30f3\u30c6\u30ca\u306e\u7ba1\u7406\u30fb\u69d8\u5b50\n\n\u57fa\u672c\u7684\u306b\u306fdocker-compose\u3092\u30b3\u30d4\u308b\u3068\u52dd\u624b\u306b\u4f5c\u3063\u3066\u308c\u308b\n\n\n\n\u524d\u63d0\u6761\u4ef6\n\n\n\u7269\u7406\u30de\u30b7\u30f3\u304c2\u53f0\u4ee5\u4e0a\u5fc5\u8981\u3068\u306a\u308b(rancher/server\u3068rancher/agent)\n\n\u4eca\u56de\u306e\u5834\u5408\u306fserver1\u53f0\u3001agent\u30922\u53f0\u3001\u8a08\uff13\u53f0\u7269\u7406\u30de\u30b7\u30f3\u3092\u8a2d\u7f6e\u3057\u305f\u3002\n\n\n\nrancher-server\n\nrancherOS\n443 - 443\n80 - 80\n22 - 22\n5000 - 5000(private registry\u7528)\npublicIP\n\n\n??.??.??.??\n\n\nprivateIP\n\n\n192.168.3.100\n\n\n\n\n\nrancher-agent01\n\nrancherOS\n80 - 80\n1022 - 22\nprivateIP\n\n\n192.168.3.101\n\n\n\n\n\nrancher-agent02\n\nrancherOS\n80 - 80\n2022 - 22\nprivateIP\n\n\n192.168.3.102\n\n\n\n\n\n\n\u5b9f\u88c5\u4e88\u5b9a\u6a5f\u80fd\n\n\n\u30b3\u30f3\u30c6\u30ca\u30fbagent\u9593\u3067\u306e\u30c7\u30fc\u30bf\u5171\u6709\n\nglusterFS\nConvoy Gluster\n\n\n\n\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8dockerhub\n\nregistory\n\n\n\n\u30c7\u30fc\u30bf\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n\nConvoy\n\n\n\n\u30c7\u30fc\u30bf\u306e\u5fa9\u5143\n\nConvoy\n\n\n\ngit\u30ea\u30dd\u30b8\u30c8\u30ea\n\ngitlab\n\n\n\nci\u30c4\u30fc\u30eb\n\ngitlab ci\n\n\n\nssl\n\nlets encrypt\u3082\u3057\u304f\u306fwosign\n\n\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30fc\n\nrancher-bench-security\n\n\n\n\u6b7b\u6d3b\u7ba1\u7406\u30c4\u30fc\u30eb\n\n DATADOG\n Prometheus\n\n\n\n\n\u4fbf\u5229\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u305f\u3061\n\nrancher\u3067\u306f\u3059\u3050\u52d5\u304b\u3059\u3053\u3068\u306e\u3067\u304d\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc\u304c\u591a\u304f\u3042\u308b\n\nRancher\u306eCATALOG\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc\u4e00\u89a7 \n\n\n\njenkins\u3068\u304bgitlab\u3001\u7121\u6599ssl\u306elets encrypt\u3082\u7528\u610f\u3055\u308c\u3066\u3044\u308b\n\u306a\u306e\u3067\u3053\u306e\u8fba\u3092\u3046\u307e\u304f\u4f7f\u3063\u3066\u3001\u3044\u308d\u3044\u308d\u3057\u305f\u3044\u3068\u601d\u3046\n\n# Docker\u3067\u672c\u683c\u7684\u306a\u30b5\u30fc\u30d0\u30fc\u3092\u69cb\u7bc9\u3059\u308b\n\n![rancher-docker.png](https://qiita-image-store.s3.amazonaws.com/0/62822/fc4e37d1-4d32-8b0e-f1f4-c6d588650fe1.png)\n\n## RancherOS\u3068\u306f\n+ **\u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u5229\u7528\u53ef\u80fd\u306aDocker\u5411\u3051\u30df\u30cb\u30de\u30ebOS**\n+ Docker\u3068\u7af6\u5408\u3092\u5f15\u304d\u8d77\u3053\u3059\u304a\u305d\u308c\u306e\u3042\u308bsystemd\u306e\u3088\u3046\u306ainit\u30b7\u30b9\u30c6\u30e0\u3092\u4e0d\u8981\u306b\u3057\u3001\u6700\u5c0f\u9650\u306e\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9\u3068OS\u3067\u52d5\u4f5c\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u30b5\u30fc\u30d3\u30b9\u306b\u3088\u3063\u3066\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u9ad8\u3081\u3066\u3044\u308b\n+ Kernel\u4e0a\u306b\u5373\u5ea7\u306bDocker\u30b3\u30f3\u30c6\u30ca\u3092\u5b9f\u884c\u3059\u308b\u3088\u3046\u8a2d\u8a08\u3055\u308c\u3066\u304a\u308a\u3001\u3053\u308c\u3089\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u30b3\u30a2\u3068\u306a\u308bLinux\u30b5\u30fc\u30d3\u30b9\u3092\u30e6\u30fc\u30b6\u306b\u63d0\u4f9b\u3059\u308b\n+ \u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u8c4a\u5bcc\n\n## \u69cb\u7bc9\u76ee\u6b21\n+ **[RancherOS\u3067\u672c\u683c\u7684\u306a\u81ea\u5b85\u30b5\u30fc\u30d0\u30fc\u3092\u69cb\u7bc9\u3057\u3088\u3046](http://qiita.com/okasho1010/items/da52b4dc12221feca55c)\u3000\u2190\u3000\u4eca\u3053\u3053**\n+ [RancherOS\u3067rancher-server\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3088\u3046](http://qiita.com/okasho1010/items/305e0af4545901d44a94)\n\n+ [RancherOS\u3067rancher-agent\u3092\u69cb\u7bc9\u3057\u3088\u3046](http://qiita.com/okasho1010/items/500c3705d2f4610cebe0)\n\n+ [RancherOS\u3067GlusterFS\u3092\u4f7f\u3063\u3066\u30c7\u30fc\u30bf\u3092\u6c38\u7d9a\u5316\u3057\u3088\u3046](http://qiita.com/okasho1010/items/2620da1b2e93437e8a74)\n\n+ [RancherOS\u3067private registory \u3067docker image\u3092\u7ba1\u7406\u3057\u3088\u3046](http://qiita.com/okasho1010/items/cf0a9569638d00a9e451)\n\n\n+ [Rancher\u306eCATALOG\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc\u4e00\u89a7](http://qiita.com/okasho1010/items/f6875d5bce2ac6752758) \n## \u8981\u4ef6\n+ docker\u3067\u52d5\u304f\n+ OS\u306fRancherOS\u3092\u4f7f\u7528\n+ \u30a4\u30f3\u30d5\u30e9\u306e\u8a73\u3057\u3044\u77e5\u8b58\u304c\u306a\u3044\u4eba\u3067\u3082rancher\u306e\u7ba1\u7406\u753b\u9762\u304b\u3089\u30b5\u30fc\u30d3\u30b9\u3092\u5c55\u958b\u3057\u3001\u958b\u767a\u30fb\u516c\u958b\u304c\u3067\u304d\u308b\n+ \u30c7\u30fc\u30bf\u306e\u5fa9\u5143\u30fb\u5171\u6709\u304c\u53ef\u80fd\n+ \u4fdd\u5b88\u30fb\u7ba1\u7406\u304c\u5b89\u5168\u306b\u3067\u304d\u308b\n\n## \u4ed5\u69d8\n+ \u7ba1\u7406\u753b\u9762top\n<img width=\"1680\" alt=\"Screen Shot 2016-06-07 at 00.02.59.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/62822/4af67130-4127-7d03-53a7-efef48a4f9fd.png\">\n\n+ \u30b3\u30f3\u30c6\u30ca\u306e\u7ba1\u7406\n \t- **\u57fa\u672c\u7684\u306brancher/server\u3055\u3093(\u7ba1\u7406\u753b\u9762)\u304c\u3044\u3044\u611f\u3058\u306b\u3057\u3066\u304f\u308c\u308b**\n \t- rancher/server\u3055\u3093(\u7ba1\u7406\u753b\u9762)\u304cagent\u306b\u30b3\u30f3\u30c6\u30ca\u3092\u3064\u304f\u3063\u3066\u304f\u308c\u308b\n\t- \u7ba1\u7406\u753b\u9762\u3067\u307d\u3061\u307d\u3061\u30b3\u30f3\u30c6\u30ca\u3092\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3068\u304bupgrade\u3068\u304b\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u308b\n\n\n+ \u30a2\u30af\u30bb\u30b9\n\t- rancher-server\u306b{domain.com}443\u3082\u3057\u304f\u306f80\u756a\u3067\u30a2\u30af\u30bb\u30b9\u304c\u6765\u305f\u5834\u5408HAProxy\u3067agent\u306b\u632f\u308a\u5206\u3051\u308b\n\n\n+ \u30a4\u30e1\u30fc\u30b8\u56f3\n![Screen Shot 2016-06-01 at 23.02.13.png](https://qiita-image-store.s3.amazonaws.com/0/62822/a68230af-5c2f-4848-14d5-55c073080bfe.png)\n\n+ \u30b3\u30f3\u30c6\u30ca\u306e\u7ba1\u7406\u30fb\u69d8\u5b50\n<img width=\"1680\" alt=\"Screen Shot 2016-06-07 at 00.03.37.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/62822/ff5a9587-dc0c-df51-2d66-7f02d1c3876d.png\">\n\n+ \u57fa\u672c\u7684\u306b\u306fdocker-compose\u3092\u30b3\u30d4\u308b\u3068\u52dd\u624b\u306b\u4f5c\u3063\u3066\u308c\u308b\n<img width=\"1680\" alt=\"Screen Shot 2016-06-07 at 00.13.18.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/62822/a55bf460-a148-4d74-69b5-1bfebfa64950.png\">\n\n\n## \u524d\u63d0\u6761\u4ef6\n+ \u7269\u7406\u30de\u30b7\u30f3\u304c2\u53f0\u4ee5\u4e0a\u5fc5\u8981\u3068\u306a\u308b(rancher/server\u3068rancher/agent)\n\t- \u4eca\u56de\u306e\u5834\u5408\u306fserver1\u53f0\u3001agent\u30922\u53f0\u3001\u8a08\uff13\u53f0\u7269\u7406\u30de\u30b7\u30f3\u3092\u8a2d\u7f6e\u3057\u305f\u3002\n\n+ rancher-server\n\t- rancherOS\n\t- 443 - 443\n\t- 80 - 80\n\t- 22 - 22\n\t- 5000 - 5000(private registry\u7528)\n\t- publicIP\n\t\t* ??.??.??.??\n\t- privateIP\n\t\t* 192.168.3.100\n\n+ rancher-agent01\n\t- rancherOS\n\t- 80 - 80\n\t- 1022 - 22\n\t- privateIP\n\t\t* 192.168.3.101\n\n+ rancher-agent02\n\t- rancherOS\n\t- 80 - 80\n\t- 2022 - 22\n\t- privateIP\n\t\t* 192.168.3.102\n\n## \u5b9f\u88c5\u4e88\u5b9a\u6a5f\u80fd\n+ \u30b3\u30f3\u30c6\u30ca\u30fbagent\u9593\u3067\u306e\u30c7\u30fc\u30bf\u5171\u6709\n\t* glusterFS\n\t* Convoy Gluster\n\n+ \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8dockerhub\n\t- registory\n\n+ \u30c7\u30fc\u30bf\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n\t- Convoy\n\n+ \u30c7\u30fc\u30bf\u306e\u5fa9\u5143\n\t- Convoy\n\n+ git\u30ea\u30dd\u30b8\u30c8\u30ea\n\t- gitlab\n\n+ ci\u30c4\u30fc\u30eb\n\t- gitlab ci\n\n+ ssl\n    + lets encrypt\u3082\u3057\u304f\u306fwosign\n\n+ \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30fc\n    + rancher-bench-security\n\n+ \u6b7b\u6d3b\u7ba1\u7406\u30c4\u30fc\u30eb\n    +  DATADOG\n    +  Prometheus\n\n## \u4fbf\u5229\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u305f\u3061\n+ rancher\u3067\u306f\u3059\u3050\u52d5\u304b\u3059\u3053\u3068\u306e\u3067\u304d\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc\u304c\u591a\u304f\u3042\u308b\n+ [Rancher\u306eCATALOG\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc\u4e00\u89a7](http://qiita.com/okasho1010/items/f6875d5bce2ac6752758) \n\n<img width=\"1680\" alt=\"Screen Shot 2016-06-07 at 00.04.08.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/62822/69750c97-582d-bdf2-b3b9-43f21ec7fb8d.png\">\n\n+ jenkins\u3068\u304bgitlab\u3001\u7121\u6599ssl\u306elets encrypt\u3082\u7528\u610f\u3055\u308c\u3066\u3044\u308b\n+ \u306a\u306e\u3067\u3053\u306e\u8fba\u3092\u3046\u307e\u304f\u4f7f\u3063\u3066\u3001\u3044\u308d\u3044\u308d\u3057\u305f\u3044\u3068\u601d\u3046\n", "tags": ["rancher", "docker", "docker-compose", "\u30c7\u30d7\u30ed\u30a4", "\u65b0\u4eba\u30d7\u30ed\u30b0\u30e9\u30de\u5fdc\u63f4"]}