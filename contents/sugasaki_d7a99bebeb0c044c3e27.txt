{"tags": ["ASP.NET", "dropzone"], "context": " More than 1 year has passed since last update.\u30d5\u30a1\u30a4\u30eb\u3092\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3067\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u53ef\u80fd\u306b\u3059\u308bDropzone\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\n\u3092ASP.NET MVC\u306b\u9069\u7528\u3059\u308b\nhttp://www.dropzonejs.com/\n\n \u3000\n\n  \u3000\nVisual Studio Nuget\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u7ba1\u7406\u753b\u9762\u304b\u3089\nDropzoneJS\u3067\u691c\u7d22\u3092\u304b\u3051\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3078\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n\nView\u306b\u30d5\u30a1\u30a4\u30eb\u9001\u4fe1\u9818\u57df\u3092\u4f5c\u6210\n\n<link href=\"~/Scripts/dropzone/dropzone.css\" rel=\"stylesheet\" />\n<script src=\"~/Scripts/dropzone/dropzone.js\"></script>\n\n\n<div class=\"jumbotron\">\n    <form action=\"~/Home/SaveUploadedFile\" method=\"post\" enctype=\"multipart/form-data\" class=\"dropzone\" id=\"dropzoneForm\">\n        <div class=\"fallback\">\n            <input name=\"file\" type=\"file\" multiple />\n            <input type=\"submit\" value=\"Upload\" />\n        </div>\n    </form>\n</div>\n\n\nDropzone\u306e\u521d\u671f\u8a2d\u5b9a\u3092\u884c\u3046\njs\n$(document).ready(function () {\n    Dropzone.options.dropzoneForm = {\n        init: function () {\n            this.on(\"complete\", function (data) {\n                var res = JSON.parse(data.xhr.responseText);\n            });\n        }\n    };\n});\n\n\n\n\u30b5\u30fc\u30d0\u30fc\u5074\uff1a\u30d5\u30a1\u30a4\u30eb\u3092\u53d7\u3051\u53d6\u308b\u51e6\u7406\u306e\u4f5c\u6210\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u4f5c\u6210\n\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing System.IO;\n\nnamespace Dropzone.Controllers\n{\n    public class FileUploadController : Controller\n    {\n\n\n        /// <summary>\n        /// \n        /// </summary>\n        /// <returns></returns>\n        public ActionResult SaveUploadedFile()\n        {\n            bool isSavedSuccessfully = true;\n            string fName = \"\";\n            foreach (string fileName in Request.Files)\n            {\n                HttpPostedFileBase file = Request.Files[fileName];\n                //Save file content goes here\n                fName = file.FileName;\n                if (file != null && file.ContentLength > 0)\n                {\n\n                    var originalDirectory = new DirectoryInfo(string.Format(\"{0}Images\\\\WallImages\", Server.MapPath(@\"\\\")));\n\n                    string pathString = System.IO.Path.Combine(originalDirectory.ToString(), \"imagepath\");\n\n                    var fileName1 = Path.GetFileName(file.FileName);\n\n\n                    bool isExists = System.IO.Directory.Exists(pathString);\n\n                    if (!isExists)\n                        System.IO.Directory.CreateDirectory(pathString);\n\n                    var path = string.Format(\"{0}\\\\{1}\", pathString, file.FileName);\n                    file.SaveAs(path);\n\n                }\n\n            }\n\n            if (isSavedSuccessfully)\n            {\n                return Json(new { Message = fName });\n            }\n            else\n            {\n                return Json(new { Message = \"Error in saving file\" });\n            }\n        }\n\n\n\n    }\n}\n\n\n\n\n\u8ee2\u9001\u5bb9\u91cf\u306e\u8a2d\u5b9a\u3092\u884c\u3046\nWeb.config\n<configuration>\n  <system.web>\n    <httpRuntime targetFramework=\"4.6.1\"  maxRequestLength=\"65535\" />    <!--\u8ee2\u9001\u5bb9\u91cf-->\n\n  <system.webServer>\n    <security>\n      <requestFiltering>\n        <requestLimits maxAllowedContentLength=\"5242880\" />\n      </requestFiltering>\n    </security>\n\n\n  </system.webServer>\n</configuration>\n\n\n\u3067\u304d\u3042\u304c\u308a\n\n\n\u53c2\u8003\u30b5\u30a4\u30c8\nhttps://github.com/venkatbaggu/dropzonefileupload\nhttp://venkatbaggu.com/file-upload-in-asp-net-mvc-using-dropzone-js-and-html5/\n\n\n\u30d5\u30a1\u30a4\u30eb\u3092\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3067\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u53ef\u80fd\u306b\u3059\u308bDropzone\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\n\u3092ASP.NET MVC\u306b\u9069\u7528\u3059\u308b\n\nhttp://www.dropzonejs.com/\n![Clipboard01.png](https://qiita-image-store.s3.amazonaws.com/0/49910/2a858224-1ed2-2863-26f5-88de41835dc1.png)\n \u3000\n  \u3000\n---\nVisual Studio Nuget\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u7ba1\u7406\u753b\u9762\u304b\u3089\nDropzoneJS\u3067\u691c\u7d22\u3092\u304b\u3051\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3078\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n![WS000011.JPG](https://qiita-image-store.s3.amazonaws.com/0/49910/49e8b71e-1b81-8be9-06db-866420c84922.jpeg)\n\n\n\n\n---\nView\u306b\u30d5\u30a1\u30a4\u30eb\u9001\u4fe1\u9818\u57df\u3092\u4f5c\u6210\n\n```http\n\n<link href=\"~/Scripts/dropzone/dropzone.css\" rel=\"stylesheet\" />\n<script src=\"~/Scripts/dropzone/dropzone.js\"></script>\n\n\n<div class=\"jumbotron\">\n    <form action=\"~/Home/SaveUploadedFile\" method=\"post\" enctype=\"multipart/form-data\" class=\"dropzone\" id=\"dropzoneForm\">\n        <div class=\"fallback\">\n            <input name=\"file\" type=\"file\" multiple />\n            <input type=\"submit\" value=\"Upload\" />\n        </div>\n    </form>\n</div>\n```\n\n---\n\nDropzone\u306e\u521d\u671f\u8a2d\u5b9a\u3092\u884c\u3046\n```js\n$(document).ready(function () {\n    Dropzone.options.dropzoneForm = {\n        init: function () {\n            this.on(\"complete\", function (data) {\n                var res = JSON.parse(data.xhr.responseText);\n            });\n        }\n    };\n});\n```\n\n---\n\n#\u30b5\u30fc\u30d0\u30fc\u5074\uff1a\u30d5\u30a1\u30a4\u30eb\u3092\u53d7\u3051\u53d6\u308b\u51e6\u7406\u306e\u4f5c\u6210\n\n##\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u4f5c\u6210\n\n```csharp\n\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Web;\nusing System.Web.Mvc;\nusing System.IO;\n\nnamespace Dropzone.Controllers\n{\n    public class FileUploadController : Controller\n    {\n\n\n        /// <summary>\n        /// \n        /// </summary>\n        /// <returns></returns>\n        public ActionResult SaveUploadedFile()\n        {\n            bool isSavedSuccessfully = true;\n            string fName = \"\";\n            foreach (string fileName in Request.Files)\n            {\n                HttpPostedFileBase file = Request.Files[fileName];\n                //Save file content goes here\n                fName = file.FileName;\n                if (file != null && file.ContentLength > 0)\n                {\n\n                    var originalDirectory = new DirectoryInfo(string.Format(\"{0}Images\\\\WallImages\", Server.MapPath(@\"\\\")));\n\n                    string pathString = System.IO.Path.Combine(originalDirectory.ToString(), \"imagepath\");\n\n                    var fileName1 = Path.GetFileName(file.FileName);\n\n\n                    bool isExists = System.IO.Directory.Exists(pathString);\n\n                    if (!isExists)\n                        System.IO.Directory.CreateDirectory(pathString);\n\n                    var path = string.Format(\"{0}\\\\{1}\", pathString, file.FileName);\n                    file.SaveAs(path);\n\n                }\n\n            }\n\n            if (isSavedSuccessfully)\n            {\n                return Json(new { Message = fName });\n            }\n            else\n            {\n                return Json(new { Message = \"Error in saving file\" });\n            }\n        }\n\n\n\n    }\n}\n\n```\n\n\n---\n\n##\u8ee2\u9001\u5bb9\u91cf\u306e\u8a2d\u5b9a\u3092\u884c\u3046\n\nWeb.config\n\n```aspx-cs\n<configuration>\n  <system.web>\n    <httpRuntime targetFramework=\"4.6.1\"  maxRequestLength=\"65535\" />    <!--\u8ee2\u9001\u5bb9\u91cf-->\n\n  <system.webServer>\n    <security>\n      <requestFiltering>\n        <requestLimits maxAllowedContentLength=\"5242880\" />\n      </requestFiltering>\n    </security>\n\n\n  </system.webServer>\n</configuration>\n```\n\n\n##\u3067\u304d\u3042\u304c\u308a\n\n![Clipboard01.png](https://qiita-image-store.s3.amazonaws.com/0/49910/a18205e3-2c88-d77d-4587-3f82a27dffe3.png)\n\n\n\n###\u53c2\u8003\u30b5\u30a4\u30c8\nhttps://github.com/venkatbaggu/dropzonefileupload\nhttp://venkatbaggu.com/file-upload-in-asp-net-mvc-using-dropzone-js-and-html5/\n"}