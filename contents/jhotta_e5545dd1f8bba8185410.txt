{"context": "Datadog\u306eco-founder\u3067\u3042\u308bAlexis\u304c\u4ee5\u524dblog\u3067\u516c\u958b\u3057\u305f\u76e3\u8996\u306b\u95a2\u3059\u308b\u8003\u3048\u65b9\u306e\u7ffb\u8a33\u3092\u30a2\u30c3\u30d7\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nMonitoring 101: Investigating performance issues\nThis post is part of a series on effective monitoring. Be sure to check out the rest of the series: Collecting the right data and Alerting on what matters.\n\nThe responsibilities of a monitoring system do not end with symptom detection. Once your monitoring system has notified you of a real symptom that requires attention, its next job is to help you diagnose the root cause. Often this is the least structured aspect of monitoring, driven largely by hunches and guess-and-check. This post describes a more directed approach that can help you to find and correct root causes more efficiently.\n\n\u76e3\u8996\u30b7\u30b9\u30c6\u30e0\u306e\u8cac\u4efb\u306f\u5146\u5019\u3092\u691c\u51fa\u3059\u308b\u3068\u3053\u308d\u3067\u7d42\u308f\u308a\u306b\u306f\u306a\u308a\u307e\u305b\u3093\u3002\u4f7f\u3063\u3066\u3044\u308b\u76e3\u8996\u30b7\u30b9\u30c6\u30e0\u304c\u3001\u5bfe\u51e6\u3092\u5fc5\u8981\u3068\u3059\u308b\u3088\u3046\u306a\u5177\u4f53\u7684\u306a\u5146\u5019\u306b\u3064\u3044\u3066\u3042\u306a\u305f\u306b\u901a\u77e5\u3057\u305f\u306a\u3089\u3001\u305d\u306e\u76e3\u8996\u30b7\u30b9\u30c6\u30e0\u3067\u6b21\u306b\u3057\u306a\u304f\u3066\u306f\u306a\u3089\u306a\u3044\u306e\u306f\u3001\u5146\u5019\u3092\u8d77\u3053\u3057\u3066\u3044\u308b\u539f\u56e0\u306e\u8a3a\u65ad\u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3059\u3002\u591a\u304f\u306e\u5834\u5408\u3001\u3053\u306e\u8a3a\u65ad\u3068\u3044\u3046\u5074\u9762\u306f\u3001\u307b\u3068\u3093\u3069\u6574\u7406\u304c\u3055\u308c\u3066\u304a\u3089\u305a\u3001\u7d4c\u9a13\u3084\u76f4\u611f\u306b\u983c\u308b\u3053\u3068\u304c\u591a\u3044\u9818\u57df\u3067\u3059\u3002\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001\u6839\u672c\u539f\u56e0\u306b\u305f\u3069\u308a\u7740\u304d\u3001\u4fee\u6b63\u3059\u308b\u305f\u3081\u306e\u8ad6\u7406\u7684\u306a\u30a2\u30d7\u30ed\u30fc\u30c1\u306b\u3064\u3044\u3066\u89e3\u8aac\u3092\u3057\u307e\u3059\u3002\n\nThis series of articles comes out of our experience monitoring large-scale infrastructure for our customers. It also draws on the work of Brendan Gregg, Rob Ewaschuk, and Baron Schwartz.\n\n\u3053\u306e\u30b7\u30ea\u30fc\u30ba\u306e\u5185\u5bb9\u306f\u3001Datadog\u304c\u304a\u5ba2\u69d8\u306e\u5927\u898f\u6a21\u30a4\u30f3\u30d5\u30e9\u3092\u76e3\u8996\u3057\u3066\u304d\u305f\u7d4c\u9a13\u3092\u57fa\u306b\u3001\u6b21\u306b\u7d39\u4ecb\u3059\u308b\u3088\u4eba\u305f\u3061\u306e\u30d6\u30ed\u30b0\u8a18\u4e8b\u3000Brendan Gregg\u3001 Rob\nEwaschuk\u3001 Baron\nSchwartz \u3092\u53c2\u7167\u3057\u3066\u69cb\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n\nA word about data\n\n\nThere are three main types of monitoring data that can help you investigate the root causes of problems in your infrastructure. Data types and best practices for their collection are discussed in-depth in a companion post, but in short:\n\n Work metrics indicate the top-level health of your system by measuring its useful output\n Resource metrics quantify the utilization, saturation, errors, or availability of a resource that your system depends on\n Events describe discrete, infrequent occurrences in your system such as code changes, internal alerts, and scaling events\n\n\n\u30a4\u30f3\u30d5\u30e9\u5185\u306e\u554f\u984c\u306e\u6839\u672c\u539f\u56e0\u3092\u8abf\u67fb\u3059\u308b\u969b\u306b\u3001\u53c2\u8003\u306b\u3067\u304d\u308b\u76e3\u8996\u30c7\u30fc\u30bf\u306b\u306f\u4e3b\u306b3\u3064\u306e\u4e3b\u8981\u30bf\u30a4\u30d7\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u3089\u306e\u30c7\u30fc\u30bf\u30bf\u30a4\u30d7\u3068\u305d\u308c\u3089\u306e\u53ce\u96c6\u3059\u308b\u305f\u3081\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u306e\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001\u95a2\u9023\u8a18\u4e8b\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002\n\u7c21\u5358\u306a\u307e\u3068\u3081:\n\n\nWork metrics\u3000\u904b\u7528\u3057\u3066\u3044\u308b\u30b7\u30b9\u30c6\u30e0\u4e0a\u3067\u52d5\u4f5c\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d3\u30b9\u306e\u30d1\u30d5\u30fc\u30de\u30f3\u30b9\u3092\u8868\u3057\u3066\u3044\u307e\u3059\u3002\n\nResource metrics \u904b\u7528\u3057\u3066\u3044\u308b\u30b7\u30b9\u30c6\u30e0\u304c\u4f9d\u5b58\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u4f7f\u7528\u7387\u3001\u98fd\u548c\u30ec\u30d9\u30eb\u3001\u30a8\u30e9\u30fc\u3001\u307e\u305f\u306f\u53ef\u7528\u6027\u306a\u3069\u3002\n\nEvents \u30b3\u30fc\u30c9\u306e\u5909\u66f4\u3001\u5185\u90e8\u30a2\u30e9\u30fc\u30c8\u3001\u53f0\u6570\u5909\u5316\u306b\u95a2\u3059\u308b\u30a4\u30d9\u30f3\u30c8\u306a\u3069\u3001\u30b7\u30b9\u30c6\u30e0\u5185\u3067\u767a\u751f\u3059\u308b\u975e\u9023\u7d9a\u7684\u3067\u4e0d\u5b9a\u671f\u306a\u51fa\u6765\u4e8b\n\n\nBy and large, work metrics will surface the most serious symptoms and should therefore generate the most serious alerts. But the other metric types are invaluable for investigating the causes of those symptoms.\n\n\u5927\u65b9\u306e\u5834\u5408\u3001work metrics \u306f\u3001\u91cd\u5927\u306a\u554f\u984c\u306e\u5146\u5019\u3092\u8868\u9762\u5316\u3055\u305b\u307e\u3059\u3002\u5f93\u3063\u3066\u3001work metrics \u306f\u3001\u6700\u3082\u91cd\u5927\u306a\u969c\u5bb3\u7528\u306e\u30a2\u30e9\u30fc\u30c8\u3092\u767a\u751f\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nIt\u2019s resources all the way down\n\n\nMost of the components of your infrastructure can be thought of as resources. At the highest levels, each of your systems that produces useful work likely relies on other systems. For instance, the Apache server in a LAMP stack relies on a MySQL database as a resource to support its work. One level down, within MySQL are database-specific resources that MySQL uses to do its work, such as the finite pool of client connections. At a lower level still are the physical resources of the server running MySQL, such as CPU, memory, and disks.\n\n\u30a4\u30f3\u30d5\u30e9\u306e\u69cb\u6210\u8981\u7d20\u306e\u307b\u3068\u3093\u3069\u306f\u3001\u30ea\u30bd\u30fc\u30b9\u3068\u3057\u3066\u8003\u3048\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\u4e00\u756a\u4e0a\u5c64\u304b\u3089\u898b\u305f\u5834\u5408\u3001\u3042\u306a\u305f\u306e\u30b7\u30b9\u30c6\u30e0\u306e\u4fa1\u5024\u306e\u3042\u308b\u4ed5\u4e8b\u306f\u3001\u4ed6\u306e\u30b7\u30b9\u30c6\u30e0\u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002\u4f8b\u3048\u3070\u3001LAMP\u30b9\u30bf\u30c3\u30af\u306e\u4e2d\u306eApache\u30b5\u30fc\u30d0\u30fc\u306f\u3001\u305d\u306e\u4ed5\u4e8b\u3092\u9032\u3081\u308b\u305f\u3081\u306b\u30ea\u30bd\u30fc\u30b9\u3068\u3057\u3066MySQL\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4f9d\u5b58\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u4e0b\u306e\u5c64\u306eMySQL\u306e\u4e2d\u3067\u306f\u3001\u9650\u3089\u308c\u305f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3068\u3044\u3046\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u7279\u6709\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u4f9d\u5b58\u3057MySQL\u306f\u6a5f\u80fd\u3057\u3066\u3044\u307e\u3059\u3002\u6700\u3082\u5e95\u306e\u5c64\u3067\u306f\u3001MySQL\u304c\u52d5\u4f5c\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d0\u30fc\u306e\u7269\u7406\u30ea\u30bd\u30fc\u30b9\u3067\u3042\u308bCPU\u3001\u30e1\u30e2\u30ea\u30fc\u3001\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u306a\u3069\u306b\u4f9d\u5b58\u3057\u3066\u3044\u307e\u3059\u3002\n\nThinking about which systems produce useful work, and which resources support that work, can help you to efficiently get to the root of any issues that surface. When an alert notifies you of a possible problem, the following process will help you to approach your investigation systematically.\n\n\u307e\u305a\u3001\u3069\u306e\u30b7\u30b9\u30c6\u30e0\u304c\u4fa1\u5024\u306e\u3042\u308b\u4ed5\u4e8b\u3092\u751f\u307f\u51fa\u3057\u3001\u3069\u306e\u30ea\u30bd\u30fc\u30b9\u304c\u305d\u306e\u4ed5\u4e8b\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u304b\u8003\u3048\u3066\u307f\u3066\u4e0b\u3055\u3044\u3002\u3053\u306e\u8003\u3048\u65b9\u306f\u3001\u8868\u9762\u5316\u3057\u3066\u3044\u308b\u554f\u984c\u306e\u6839\u672c\u539f\u56e0\u306b\u52b9\u7387\u7684\u306b\u305f\u3069\u308a\u7740\u304f\u624b\u52a9\u3051\u3092\u3057\u3066\u304f\u308c\u308b\u3067\u3057\u3087\u3046\u3002\u6b21\u306b\u7d39\u4ecb\u3059\u308b\u30d7\u30ed\u30bb\u30b9\u306f\u3001\u30a2\u30e9\u30fc\u30c8\u304c\u554f\u984c\u304b\u3082\u3057\u308c\u306a\u3044\u72b6\u6cc1\u3092\u901a\u77e5\u3057\u305f\u6642\u3001\u3042\u306a\u305f\u304c\u4f53\u7cfb\u7684\u306b\u8abf\u67fb\u3092\u9032\u3081\u308b\u4e0a\u3067\u3001\u624b\u52a9\u3051\u3068\u306a\u308b\u3067\u3057\u3087\u3046\u3002\n\n\n1. Start at the top with work metrics\n\nFirst ask yourself, \u201cIs there a problem? How can I characterize it?\u201d If you don\u2019t describe the issue clearly at the outset, it\u2019s easy to lose track as you dive deeper into your systems to diagnose the issue.\n\n\u307e\u305a\u81ea\u554f\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\u300c\u3053\u308c\u306f\u554f\u984c\u306a\u306e\u304b?\u300d\u3001\u300c\u3053\u306e\u554f\u984c\u306f\u3001\u3069\u306e\u3088\u3046\u306a\u7279\u5fb4\u3092\u6301\u3063\u3066\u3044\u308b\u306e\u304b?\u300d\u3053\u306e\u3088\u3046\u306b\u6700\u521d\u306b\u554f\u984c\u3092\u660e\u78ba\u306b\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u3001\u554f\u984c\u306e\u8a3a\u65ad\u306e\u305f\u3081\u306b\u30b7\u30b9\u30c6\u30e0\u306e\u8a73\u7d30\u3092\u8abf\u3079\u59cb\u3081\u305f\u969b\u306b\u3001\u3069\u306e\u3088\u3046\u306b\u8abf\u67fb\u3092\u9032\u3081\u308b\u3079\u3067\u304d\u3042\u3063\u305f\u306e\u304b\u306e\u9053\u7b4b\u3092\u898b\u5931\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\nNext examine the work metrics for the highest-level system that is exhibiting problems. These metrics will often point to the source of the problem, or at least set the direction for your investigation. For example, if the percentage of work that is successfully processed drops below a set threshold, diving into error metrics, and especially the types of errors being returned, will often help narrow the focus of your investigation. Alternatively, if latency is high, and the throughput of work being requested by outside systems is also very high, perhaps the system is simply overburdened.\n\n\u6b21\u306b\u3001\u554f\u984c\u3092\u901a\u77e5\u3057\u3066\u3044\u308b\u6700\u3082\u30e6\u30fc\u30b6\u30fc\u306b\u8fd1\u3044\u5c64\u306e\u30b7\u30b9\u30c6\u30e0\u306eWork\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u691c\u8a0e\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u306f\u3001\u591a\u304f\u306e\u5834\u5408\u306b\u554f\u984c\u306e\u539f\u56e0\u3092\u6307\u3057\u793a\u3057\u3066\u3044\u308b\u304b\u3001\u53c8\u306f\u3001\u5c11\u306a\u304f\u3068\u3082\u8abf\u67fb\u306e\u305f\u3081\u306e\u6307\u91dd\u3092\u793a\u3057\u3066\u304f\u308c\u3066\u3044\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u6b63\u5e38\u306b\u51e6\u7406\u3055\u308c\u305fWork\u306e\u5272\u5408\u304c\u3057\u304d\u3044\u5024\u3092\u4e0b\u56de\u308b\u5834\u5408\u3001\u30a8\u30e9\u30fc\u306b\u95a2\u3059\u308b\u30e1\u30c8\u30ea\u30af\u30b9(\u7279\u306b\u3001\u51e6\u7406\u306e\u7d50\u679c\u3068\u3057\u3066\u767a\u751f\u3057\u3066\u3044\u308b\u30a8\u30e9\u30fc\u30bf\u30a4\u30d7)\u3092\u691c\u8a0e\u3059\u308b\u3053\u3068\u304c\u3001\u8abf\u67fb\u306e\u7126\u70b9\u3092\u7d5e\u308a\u8fbc\u3080\u306e\u306b\u5f79\u7acb\u3061\u307e\u3059\u3002\u3042\u308b\u3044\u306f\u3001\u30ec\u30a4\u30c6\u30f3\u30b7\u306e\u5024\u304c\u9ad8\u304f\u3001\u5916\u90e8\u30b7\u30b9\u30c6\u30e0\u304b\u3089\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u3066\u3044\u308b\u4ed5\u4e8b\u306e\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u306e\u5024\u3082\u9ad8\u3044\u5834\u5408\u3001\u6050\u3089\u304f\u3001\u305d\u306e\u30b7\u30b9\u30c6\u30e0\u306f\u9ad8\u8ca0\u8377\u306b\u3042\u308b\u3060\u3051\u3067\u3057\u3087\u3046\u3002\n\n2. Dig into resources\n\nIf you haven\u2019t found the cause of the problem by inspecting top-level work metrics, next examine the resources that the system uses\u2014physical resources as well as software or external services that serve as resources to the system. If you\u2019ve already set up dashboards for each system as outlined below, you should be able to quickly find and peruse metrics for the relevant resources. Are those resources unavailable? Are they highly utilized or saturated? If so, recurse into those resources and begin investigating each of them at step 1.\n\n\u3082\u3057\u3082\u3001\u554f\u984c\u306e\u539f\u56e0\u3092\u3001\u6700\u3082\u30e6\u30fc\u30b6\u30fc\u306b\u8fd1\u3044\u5c64\u306eWork\u30e1\u30c8\u30ea\u30af\u30b9\u306e\u691c\u8a0e\u304b\u3089\u5c0e\u304d\u51fa\u305b\u306a\u304b\u3063\u305f\u5834\u5408\u3001\u6b21\u306f\u3001\u305d\u306e\u30b7\u30b9\u30c6\u30e0\u304c\u4f7f\u3063\u3066\u3044\u308b\u7269\u7406\u30ea\u30bd\u30fc\u30b9\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3001\u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u306a\u3069\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u691c\u8a0e\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\u4e0b\u8a18\u306b\u793a\u3057\u305f\u3088\u3046\u306b\u5404\u30b7\u30b9\u30c6\u30e0\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u65e2\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u8fc5\u901f\u306b\u95a2\u9023\u3057\u3066\u3044\u308b\u30ea\u30bd\u30fc\u30b9\u3092\u898b\u3064\u3051\u51fa\u3057\u3001\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u7cbe\u67fb\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u300c\u30a2\u30af\u30bb\u30b9\u3067\u304d\u3066\u3044\u308b\u306e\u3060\u308d\u3046\u304b?\u300d\u3001\u300c\u9ad8\u8ca0\u8377\u3067\u98fd\u548c\u3057\u3066\u3044\u306a\u3044\u3060\u308d\u3046\u304b?\u300d\u3092\u691c\u8a0e\u3057\u3066\u307f\u307e\u3059\u3002\u3082\u3057\u3082\u3053\u308c\u3089\u306e\u554f\u3044\u306e\u7b54\u3048\u304cYES\u306a\u3089\u3001\u518d\u3073\u3001\u305d\u308c\u3089\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u30b9\u30c6\u30c3\u30d71\u306e\u3088\u3046\u306b\u691c\u8a0e\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n3. Did something change?\n\nNext consider alerts and other events that may be correlated with your metrics. If a code release, internal alert, or other event was registered slightly before problems started occurring, investigate whether they may be connected to the problem.\n\n\u6b21\u306b\u3001\u30e1\u30c8\u30ea\u30af\u30b9\u306b\u95a2\u9023\u3057\u3066\u3044\u308b\u4ed6\u306e\u30a4\u30d9\u30f3\u30c8\u3084\u30a2\u30e9\u30fc\u30c8\u3092\u691c\u8a0e\u3057\u3066\u307f\u307e\u3059\u3002\u65b0\u3057\u3044\u30b3\u30fc\u30c9\u304c\u9069\u5fdc\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u3001\u30b7\u30b9\u30c6\u30e0\u5185\u3067\u30a2\u30e9\u30fc\u30c8\u304c\u8a18\u9332\u3055\u308c\u3066\u306a\u3044\u304b\u3001\u554f\u984c\u767a\u751f\u306e\u5c11\u3057\u524d\u306b\u305d\u306e\u4ed6\u306e\u30a4\u30d9\u30f3\u30c8\u306f\u8a18\u9332\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u3001\u306a\u3069\u304c\u554f\u984c\u3068\u95a2\u4fc2\u3057\u3066\u3044\u306a\u3044\u304b\u3092\u691c\u8a0e\u3057\u307e\u3059\u3002\n\n4. Fix it (and don\u2019t forget it)\n\nOnce you have determined what caused the issue, correct it. Your investigation is complete when symptoms disappear\u2014you can now think about how to change the system to avoid similar problems in the future.\n\n\u554f\u984c\u306e\u539f\u56e0\u3092\u7279\u5b9a\u3067\u304d\u305f\u3089\u3001\u305d\u308c\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\u554f\u984c\u3068\u306a\u3063\u3066\u3044\u308b\u5fb4\u5019\u304c\u89e3\u6d88\u3057\u305f\u3089\u3001\u7dca\u6025\u5bfe\u51e6\u306f\u7d42\u4e86\u3067\u3059\u3002\u3053\u3053\u304b\u3089\u306f\u3001\u4eca\u5f8c\u540c\u3058\u554f\u984c\u306b\u906d\u9047\u3057\u306a\u3044\u3088\u3046\u306b\u3001\u30b7\u30b9\u30c6\u30e0\u3092\u3069\u306e\u3088\u3046\u306b\u6539\u5584\u3059\u308b\u3079\u304d\u304b\u691c\u8a0e\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\nBuild dashboards before you need them\n\n\nIn an outage, every minute is crucial. To speed your investigation and keep your focus on the task at hand, set up dashboards in advance. You may want to set up one dashboard for your high-level application metrics, and one dashboard for each subsystem. Each system\u2019s dashboard should render the work metrics of that system, along with resource metrics of the system itself and key metrics of the subsystems it depends on. If event data is available, overlay relevant events on the\ngraphs for correlation analysis.\n\n\u969c\u5bb3\u304c\u767a\u751f\u3057\u305f\u6642\u306f\u30011\u79d2\u3082\u7121\u99c4\u306b\u3057\u305f\u304f\u306a\u3044\u3082\u306e\u3067\u3059\u3002\u8abf\u67fb\u3001\u691c\u8a0e\u3092\u5186\u6ed1\u306b\u9032\u3081\u3001\u4eca\u53d6\u308a\u7d44\u3080\u3079\u304d\u30bf\u30b9\u30af\u306b\u96c6\u4e2d\u3067\u304d\u308b\u3088\u3046\u306b\u3001\u4e88\u3081\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3053\u3068\u304a\u52e7\u3081\u3057\u307e\u3059\u3002\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306f\u3001\u6700\u3082\u30e6\u30fc\u30b6\u30fc\u306b\u8fd1\u3044\u5c64\u306e\u30a2\u30d7\u30ea\u30b1\u2212\u30b7\u30e7\u30f3\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u307e\u3068\u3081\u305f\u3082\u306e\u3068\u3001\u5404\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0\u306b\u3064\u3044\u3066\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u826f\u3044\u3067\u3057\u3087\u3046\u3002\u5404\u30b7\u30b9\u30c6\u30e0\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u306f\u3001\u305d\u306e\u30b7\u30b9\u30c6\u30e0\u306eWork\u30e1\u30c8\u30ea\u30af\u30b9\u3068\u3001\u305d\u306e\u30b7\u30b9\u30c6\u30e0\u306eResource\u30e1\u30c8\u30ea\u30af\u30b9\u3068\u4f9d\u5b58\u3057\u3066\u3044\u308b\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0\u306e\u30ad\u30fc\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u8868\u793a\u3057\u3066\u304a\u304f\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\u30a4\u30d9\u30f3\u30c8\u60c5\u5831\u304c\u53ce\u96c6\u3067\u304d\u3066\u3044\u308b\u5834\u5408\u3001\u76f8\u95a2\u5206\u6790\u306e\u305f\u3081\u306b\u305d\u308c\u3089\u306e\u30a4\u30d9\u30f3\u30c8\u60c5\u5831\u3092\u30b0\u30e9\u30d5\u306b\u91cd\u306d\u66f8\u304d\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\nConclusion: Follow the metrics\n\nAdhering to a standardized monitoring framework allows you to investigate problems more systematically:\n\n  For each system in your infrastructure, set up a dashboard ahead of time that displays all its key metrics, with relevant events overlaid.\n  Investigate causes of problems by starting with the highest-level system that is showing symptoms, reviewing its work and resource metrics and any associated events.\n  If problematic resources are detected, apply the same investigation pattern to the resource (and its constituent resources) until your root problem is discovered and corrected.\n\n\n\u6a19\u6e96\u5316\u3055\u308c\u305f\u76e3\u8996\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u53b3\u5b88\u3059\u308b\u3053\u3068\u3067\u3001\u4f53\u7cfb\u7684\u306b\u554f\u984c\u306e\u691c\u8a0e\u3092\u9032\u3081\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059:\n\n\u30a4\u30f3\u30d5\u30e9\u306e\u5404\u30b7\u30b9\u30c6\u30e0\u306b\u5bfe\u3057\u3001\u30ad\u30fc\u30e1\u30c8\u30ea\u30af\u30b9\u3068\u30b7\u30b9\u30c6\u30e0\u306b\u95a2\u9023\u3057\u305f\u30a4\u30d9\u30f3\u30c8\u3092\u91cd\u306d\u66f8\u304d\u3057\u305f\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u3001\u4e88\u3081\u6e96\u5099\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\u554f\u984c\u306e\u539f\u56e0\u306e\u8abf\u67fb\u3001\u691c\u8a0e\u306f\u3001\u6700\u3082\u30e6\u30fc\u30b6\u30fc\u306b\u8fd1\u3044\u5c64\u306e\u30b7\u30b9\u30c6\u30e0\u306e\u5fb4\u5019\u304b\u3089\u59cb\u3081\u3001work\u30e1\u30c8\u30ea\u30af\u30b9\u3068resource\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u691c\u8a0e\u3057\u3001\u305d\u308c\u3089\u306b\u95a2\u9023\u3057\u3066\u3044\u308b\u30a4\u30d9\u30f3\u30c8\u3092\u691c\u8a3c\u3057\u307e\u3057\u3087\u3046\u3002\n\u30ea\u30bd\u30fc\u30b9\u306b\u554f\u984c\u304c\u3042\u308b\u3053\u3068\u304c\u5206\u304b\u3063\u305f\u5834\u5408\u306f\u3001\u30ea\u30bd\u30fc\u30b9\u306b\u5bfe\u3057\u3053\u308c\u307e\u3067\u3068\u540c\u3058\u8abf\u67fb\u3001\u691c\u8a0e\u30d1\u30bf\u30fc\u30f3\u3092\u9069\u5fdc\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u305d\u306e\u4e0b\u306e\u30b5\u30d6\u30ea\u30bd\u30fc\u30b9\u306b\u3082\u540c\u69d8\u306b\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u3092\u9069\u7528\u3057\u3001\u6839\u672c\u539f\u56e0\u3092\u767a\u898b\u3057\u3001\u4fee\u6b63\u304c\u7d42\u308f\u308b\u307e\u3067\u7d9a\u3051\u307e\u3059\u3002\n\n\nWe would like to hear about your experiences as you apply this framework to your own monitoring practice. If it is working well, please let us know on Twitter! Questions, corrections, additions, complaints, etc? Please let us know on GitHub.\n\n\u72ec\u81ea\u306b\u5b9f\u8df5\u3057\u3066\u3044\u305f\u76e3\u8996\u4f53\u5236\u306b\u3053\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u5b66\u3093\u3060\u3053\u3068\u3092\u53d6\u308a\u5165\u308c\u3001\u65b0\u305f\u306a\u76e3\u8996\u4f53\u5236\u306b\u53d6\u308a\u7d44\u3093\u3060\u4f53\u9a13\u3092\u662f\u975e\u304a\u805e\u304b\u305b\u304f\u3060\u3055\u3044\u3002 \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u53d6\u308a\u5165\u308c\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u76e3\u8996\u304c\u6539\u5584\u3055\u308c\u305f\u5834\u5408\u306f\u3001Twitter\u3067@datadoghq\u4ed8\u304d\u3067\u3064\u3076\u3084\u3044\u3066\u3044\u305f\u3060\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002\u307e\u305f\u3001\u8cea\u554f\u3001\u4fee\u6b63\u3001\u8ffd\u52a0\u3001\u82e6\u60c5\u3001\u305d\u306e\u4ed6\u304c\u3042\u308b\u5834\u5408\u306f\u3001Github\u306eissue\u306b\u3066\u9023\u7d61\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n**Datadog\u306eco-founder\u3067\u3042\u308b[Alexis](https://www.youtube.com/watch?v=JYjwIXYxMJY)\u304c\u4ee5\u524dblog\u3067\u516c\u958b\u3057\u305f\u76e3\u8996\u306b\u95a2\u3059\u308b\u8003\u3048\u65b9\u306e\u7ffb\u8a33\u3092\u30a2\u30c3\u30d7\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002**\n\n# Monitoring 101: Investigating performance issues\n\n*This post is part of a series on effective monitoring. Be sure to check out the rest of the series: [Collecting the right data](/blog/monitoring-101-collecting-data/) and [Alerting on what matters](/blog/monitoring-101-alerting/).*\n\n> The responsibilities of a monitoring system do not end with symptom detection. Once your monitoring system has notified you of a real symptom that requires attention, its next job is to help you diagnose the root cause. Often this is the least structured aspect of monitoring, driven largely by hunches and guess-and-check. This post describes a more directed approach that can help you to find and correct root causes more efficiently.\n\n\u76e3\u8996\u30b7\u30b9\u30c6\u30e0\u306e\u8cac\u4efb\u306f\u5146\u5019\u3092\u691c\u51fa\u3059\u308b\u3068\u3053\u308d\u3067\u7d42\u308f\u308a\u306b\u306f\u306a\u308a\u307e\u305b\u3093\u3002\u4f7f\u3063\u3066\u3044\u308b\u76e3\u8996\u30b7\u30b9\u30c6\u30e0\u304c\u3001\u5bfe\u51e6\u3092\u5fc5\u8981\u3068\u3059\u308b\u3088\u3046\u306a\u5177\u4f53\u7684\u306a\u5146\u5019\u306b\u3064\u3044\u3066\u3042\u306a\u305f\u306b\u901a\u77e5\u3057\u305f\u306a\u3089\u3001\u305d\u306e\u76e3\u8996\u30b7\u30b9\u30c6\u30e0\u3067\u6b21\u306b\u3057\u306a\u304f\u3066\u306f\u306a\u3089\u306a\u3044\u306e\u306f\u3001\u5146\u5019\u3092\u8d77\u3053\u3057\u3066\u3044\u308b\u539f\u56e0\u306e\u8a3a\u65ad\u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3059\u3002\u591a\u304f\u306e\u5834\u5408\u3001\u3053\u306e\u8a3a\u65ad\u3068\u3044\u3046\u5074\u9762\u306f\u3001\u307b\u3068\u3093\u3069\u6574\u7406\u304c\u3055\u308c\u3066\u304a\u3089\u305a\u3001\u7d4c\u9a13\u3084\u76f4\u611f\u306b\u983c\u308b\u3053\u3068\u304c\u591a\u3044\u9818\u57df\u3067\u3059\u3002\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001\u6839\u672c\u539f\u56e0\u306b\u305f\u3069\u308a\u7740\u304d\u3001\u4fee\u6b63\u3059\u308b\u305f\u3081\u306e\u8ad6\u7406\u7684\u306a\u30a2\u30d7\u30ed\u30fc\u30c1\u306b\u3064\u3044\u3066\u89e3\u8aac\u3092\u3057\u307e\u3059\u3002\n\n> This series of articles comes out of our experience monitoring large-scale infrastructure for [our customers](https://www.datadoghq.com/customers/). It also draws on the work of [Brendan Gregg](http://dtdg.co/use-method), [Rob Ewaschuk](http://dtdg.co/philosophy-alerting), and [Baron Schwartz](http://dtdg.co/metrics-attention).\n\n\u3053\u306e\u30b7\u30ea\u30fc\u30ba\u306e\u5185\u5bb9\u306f\u3001Datadog\u304c[\u304a\u5ba2\u69d8](https://www.datadoghq.com/customers/)\u306e\u5927\u898f\u6a21\u30a4\u30f3\u30d5\u30e9\u3092\u76e3\u8996\u3057\u3066\u304d\u305f\u7d4c\u9a13\u3092\u57fa\u306b\u3001\u6b21\u306b\u7d39\u4ecb\u3059\u308b\u3088\u4eba\u305f\u3061\u306e\u30d6\u30ed\u30b0\u8a18\u4e8b\u3000[Brendan Gregg](http://dtdg.co/use-method)\u3001 [Rob\nEwaschuk](http://dtdg.co/philosophy-alerting)\u3001 [Baron\nSchwartz](http://dtdg.co/metrics-attention) \u3092\u53c2\u7167\u3057\u3066\u69cb\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n\n## A word about data\n\n![metric types](https://d33tyra1llx9zy.cloudfront.net/blog/images/2015-05-how-to-monitor/alerting101_chart_1.png)\n\n> There are three main types of monitoring data that can help you investigate the root causes of problems in your infrastructure. Data types and best practices for their collection are discussed in-depth [in a companion post](https://www.datadoghq.com/blog/2015/06/monitoring-101-collecting-data/), but in short:\n\n> -   **Work metrics** indicate the top-level health of your system by measuring its useful output\n> -   **Resource metrics** quantify the utilization, saturation, errors, or availability of a resource that your system depends on\n> -   **Events** describe discrete, infrequent occurrences in your system such as code changes, internal alerts, and scaling events\n\n\u30a4\u30f3\u30d5\u30e9\u5185\u306e\u554f\u984c\u306e\u6839\u672c\u539f\u56e0\u3092\u8abf\u67fb\u3059\u308b\u969b\u306b\u3001\u53c2\u8003\u306b\u3067\u304d\u308b\u76e3\u8996\u30c7\u30fc\u30bf\u306b\u306f\u4e3b\u306b3\u3064\u306e\u4e3b\u8981\u30bf\u30a4\u30d7\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u3089\u306e\u30c7\u30fc\u30bf\u30bf\u30a4\u30d7\u3068\u305d\u308c\u3089\u306e\u53ce\u96c6\u3059\u308b\u305f\u3081\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u306e\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001[\u95a2\u9023\u8a18\u4e8b](https://www.datadoghq.com/blog/2015/06/monitoring-101-collecting-data/)\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n\u7c21\u5358\u306a\u307e\u3068\u3081:\n\n- **Work metrics**\u3000\u904b\u7528\u3057\u3066\u3044\u308b\u30b7\u30b9\u30c6\u30e0\u4e0a\u3067\u52d5\u4f5c\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d3\u30b9\u306e\u30d1\u30d5\u30fc\u30de\u30f3\u30b9\u3092\u8868\u3057\u3066\u3044\u307e\u3059\u3002\n- **Resource metrics** \u904b\u7528\u3057\u3066\u3044\u308b\u30b7\u30b9\u30c6\u30e0\u304c\u4f9d\u5b58\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u306e\u4f7f\u7528\u7387\u3001\u98fd\u548c\u30ec\u30d9\u30eb\u3001\u30a8\u30e9\u30fc\u3001\u307e\u305f\u306f\u53ef\u7528\u6027\u306a\u3069\u3002\n- **Events** \u30b3\u30fc\u30c9\u306e\u5909\u66f4\u3001\u5185\u90e8\u30a2\u30e9\u30fc\u30c8\u3001\u53f0\u6570\u5909\u5316\u306b\u95a2\u3059\u308b\u30a4\u30d9\u30f3\u30c8\u306a\u3069\u3001\u30b7\u30b9\u30c6\u30e0\u5185\u3067\u767a\u751f\u3059\u308b\u975e\u9023\u7d9a\u7684\u3067\u4e0d\u5b9a\u671f\u306a\u51fa\u6765\u4e8b\n\n> By and large, work metrics will surface the most serious symptoms and should therefore generate [the most serious alerts](https://www.datadoghq.com/blog/2015/06/monitoring-101-alerting/#page-on-symptoms). But the other metric types are invaluable for investigating the *causes* of those symptoms.\n\n\u5927\u65b9\u306e\u5834\u5408\u3001**work metrics** \u306f\u3001\u91cd\u5927\u306a\u554f\u984c\u306e\u5146\u5019\u3092\u8868\u9762\u5316\u3055\u305b\u307e\u3059\u3002\u5f93\u3063\u3066\u3001**work metrics** \u306f\u3001[\u6700\u3082\u91cd\u5927\u306a\u969c\u5bb3\u7528\u306e\u30a2\u30e9\u30fc\u30c8](https://www.datadoghq.com/blog/2015/06/monitoring-101-alerting/#page-on-symptoms)\u3092\u767a\u751f\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n## It\u2019s resources all the way down\n\n![metric uses](https://d33tyra1llx9zy.cloudfront.net/blog/images/2015-05-how-to-monitor/alerting101_2_chart.png)\n\n> Most of the components of your infrastructure can be thought of as resources. At the highest levels, each of your systems that produces useful work likely relies on other systems. For instance, the Apache server in a LAMP stack relies on a MySQL database as a resource to support its work. One level down, within MySQL are database-specific resources that MySQL uses to do *its* work, such as the finite pool of client connections. At a lower level still are the physical resources of the server running MySQL, such as CPU, memory, and disks.\n\n\u30a4\u30f3\u30d5\u30e9\u306e\u69cb\u6210\u8981\u7d20\u306e\u307b\u3068\u3093\u3069\u306f\u3001\u30ea\u30bd\u30fc\u30b9\u3068\u3057\u3066\u8003\u3048\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\u4e00\u756a\u4e0a\u5c64\u304b\u3089\u898b\u305f\u5834\u5408\u3001\u3042\u306a\u305f\u306e\u30b7\u30b9\u30c6\u30e0\u306e\u4fa1\u5024\u306e\u3042\u308b\u4ed5\u4e8b\u306f\u3001\u4ed6\u306e\u30b7\u30b9\u30c6\u30e0\u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002\u4f8b\u3048\u3070\u3001LAMP\u30b9\u30bf\u30c3\u30af\u306e\u4e2d\u306eApache\u30b5\u30fc\u30d0\u30fc\u306f\u3001\u305d\u306e\u4ed5\u4e8b\u3092\u9032\u3081\u308b\u305f\u3081\u306b\u30ea\u30bd\u30fc\u30b9\u3068\u3057\u3066MySQL\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4f9d\u5b58\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u4e0b\u306e\u5c64\u306eMySQL\u306e\u4e2d\u3067\u306f\u3001\u9650\u3089\u308c\u305f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3068\u3044\u3046\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u7279\u6709\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u4f9d\u5b58\u3057MySQL\u306f\u6a5f\u80fd\u3057\u3066\u3044\u307e\u3059\u3002\u6700\u3082\u5e95\u306e\u5c64\u3067\u306f\u3001MySQL\u304c\u52d5\u4f5c\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d0\u30fc\u306e\u7269\u7406\u30ea\u30bd\u30fc\u30b9\u3067\u3042\u308bCPU\u3001\u30e1\u30e2\u30ea\u30fc\u3001\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u306a\u3069\u306b\u4f9d\u5b58\u3057\u3066\u3044\u307e\u3059\u3002\n\n> Thinking about which systems *produce* useful work, and which resources *support* that work, can help you to efficiently get to the root of any issues that surface. When an alert notifies you of a possible problem, the following process will help you to approach your investigation systematically.\n\n\u307e\u305a\u3001\u3069\u306e\u30b7\u30b9\u30c6\u30e0\u304c\u4fa1\u5024\u306e\u3042\u308b\u4ed5\u4e8b\u3092\u751f\u307f\u51fa\u3057\u3001\u3069\u306e\u30ea\u30bd\u30fc\u30b9\u304c\u305d\u306e\u4ed5\u4e8b\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u304b\u8003\u3048\u3066\u307f\u3066\u4e0b\u3055\u3044\u3002\u3053\u306e\u8003\u3048\u65b9\u306f\u3001\u8868\u9762\u5316\u3057\u3066\u3044\u308b\u554f\u984c\u306e\u6839\u672c\u539f\u56e0\u306b\u52b9\u7387\u7684\u306b\u305f\u3069\u308a\u7740\u304f\u624b\u52a9\u3051\u3092\u3057\u3066\u304f\u308c\u308b\u3067\u3057\u3087\u3046\u3002\u6b21\u306b\u7d39\u4ecb\u3059\u308b\u30d7\u30ed\u30bb\u30b9\u306f\u3001\u30a2\u30e9\u30fc\u30c8\u304c\u554f\u984c\u304b\u3082\u3057\u308c\u306a\u3044\u72b6\u6cc1\u3092\u901a\u77e5\u3057\u305f\u6642\u3001\u3042\u306a\u305f\u304c\u4f53\u7cfb\u7684\u306b\u8abf\u67fb\u3092\u9032\u3081\u308b\u4e0a\u3067\u3001\u624b\u52a9\u3051\u3068\u306a\u308b\u3067\u3057\u3087\u3046\u3002\n\n![recursive investigation](https://d33tyra1llx9zy.cloudfront.net/blog/images/2015-05-how-to-monitor/investigating_diagram_4.png)\n\n### 1. Start at the top with work metrics\n\n> First ask yourself, \u201cIs there a problem? How can I characterize it?\u201d If you don\u2019t describe the issue clearly at the outset, it\u2019s easy to lose track as you dive deeper into your systems to diagnose the issue.\n\n\u307e\u305a\u81ea\u554f\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\u300c\u3053\u308c\u306f\u554f\u984c\u306a\u306e\u304b?\u300d\u3001\u300c\u3053\u306e\u554f\u984c\u306f\u3001\u3069\u306e\u3088\u3046\u306a\u7279\u5fb4\u3092\u6301\u3063\u3066\u3044\u308b\u306e\u304b?\u300d\u3053\u306e\u3088\u3046\u306b\u6700\u521d\u306b\u554f\u984c\u3092\u660e\u78ba\u306b\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u3001\u554f\u984c\u306e\u8a3a\u65ad\u306e\u305f\u3081\u306b\u30b7\u30b9\u30c6\u30e0\u306e\u8a73\u7d30\u3092\u8abf\u3079\u59cb\u3081\u305f\u969b\u306b\u3001\u3069\u306e\u3088\u3046\u306b\u8abf\u67fb\u3092\u9032\u3081\u308b\u3079\u3067\u304d\u3042\u3063\u305f\u306e\u304b\u306e\u9053\u7b4b\u3092\u898b\u5931\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n>Next examine the work metrics for the highest-level system that is exhibiting problems. These metrics will often point to the source of the problem, or at least set the direction for your investigation. For example, if the percentage of work that is successfully processed drops below a set threshold, diving into error metrics, and especially the types of errors being returned, will often help narrow the focus of your investigation. Alternatively, if latency is high, and the throughput of work being requested by outside systems is also very high, perhaps the system is simply overburdened.\n\n\u6b21\u306b\u3001\u554f\u984c\u3092\u901a\u77e5\u3057\u3066\u3044\u308b\u6700\u3082\u30e6\u30fc\u30b6\u30fc\u306b\u8fd1\u3044\u5c64\u306e\u30b7\u30b9\u30c6\u30e0\u306eWork\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u691c\u8a0e\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u306f\u3001\u591a\u304f\u306e\u5834\u5408\u306b\u554f\u984c\u306e\u539f\u56e0\u3092\u6307\u3057\u793a\u3057\u3066\u3044\u308b\u304b\u3001\u53c8\u306f\u3001\u5c11\u306a\u304f\u3068\u3082\u8abf\u67fb\u306e\u305f\u3081\u306e\u6307\u91dd\u3092\u793a\u3057\u3066\u304f\u308c\u3066\u3044\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u6b63\u5e38\u306b\u51e6\u7406\u3055\u308c\u305fWork\u306e\u5272\u5408\u304c\u3057\u304d\u3044\u5024\u3092\u4e0b\u56de\u308b\u5834\u5408\u3001\u30a8\u30e9\u30fc\u306b\u95a2\u3059\u308b\u30e1\u30c8\u30ea\u30af\u30b9(\u7279\u306b\u3001\u51e6\u7406\u306e\u7d50\u679c\u3068\u3057\u3066\u767a\u751f\u3057\u3066\u3044\u308b\u30a8\u30e9\u30fc\u30bf\u30a4\u30d7)\u3092\u691c\u8a0e\u3059\u308b\u3053\u3068\u304c\u3001\u8abf\u67fb\u306e\u7126\u70b9\u3092\u7d5e\u308a\u8fbc\u3080\u306e\u306b\u5f79\u7acb\u3061\u307e\u3059\u3002\u3042\u308b\u3044\u306f\u3001\u30ec\u30a4\u30c6\u30f3\u30b7\u306e\u5024\u304c\u9ad8\u304f\u3001\u5916\u90e8\u30b7\u30b9\u30c6\u30e0\u304b\u3089\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u3066\u3044\u308b\u4ed5\u4e8b\u306e\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u306e\u5024\u3082\u9ad8\u3044\u5834\u5408\u3001\u6050\u3089\u304f\u3001\u305d\u306e\u30b7\u30b9\u30c6\u30e0\u306f\u9ad8\u8ca0\u8377\u306b\u3042\u308b\u3060\u3051\u3067\u3057\u3087\u3046\u3002\n\n### 2. Dig into resources\n\n> If you haven\u2019t found the cause of the problem by inspecting top-level work metrics, next examine the resources that the system uses\u2014physical resources as well as software or external services that serve as resources to the system. If you\u2019ve already set up dashboards for each system as outlined below, you should be able to quickly find and peruse metrics for the relevant resources. Are those resources unavailable? Are they highly utilized or saturated? If so, recurse into those resources and begin investigating each of them at step 1.\n\n\u3082\u3057\u3082\u3001\u554f\u984c\u306e\u539f\u56e0\u3092\u3001\u6700\u3082\u30e6\u30fc\u30b6\u30fc\u306b\u8fd1\u3044\u5c64\u306eWork\u30e1\u30c8\u30ea\u30af\u30b9\u306e\u691c\u8a0e\u304b\u3089\u5c0e\u304d\u51fa\u305b\u306a\u304b\u3063\u305f\u5834\u5408\u3001\u6b21\u306f\u3001\u305d\u306e\u30b7\u30b9\u30c6\u30e0\u304c\u4f7f\u3063\u3066\u3044\u308b\u7269\u7406\u30ea\u30bd\u30fc\u30b9\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3001\u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u306a\u3069\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u691c\u8a0e\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\u4e0b\u8a18\u306b\u793a\u3057\u305f\u3088\u3046\u306b\u5404\u30b7\u30b9\u30c6\u30e0\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u65e2\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u8fc5\u901f\u306b\u95a2\u9023\u3057\u3066\u3044\u308b\u30ea\u30bd\u30fc\u30b9\u3092\u898b\u3064\u3051\u51fa\u3057\u3001\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u7cbe\u67fb\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u300c\u30a2\u30af\u30bb\u30b9\u3067\u304d\u3066\u3044\u308b\u306e\u3060\u308d\u3046\u304b?\u300d\u3001\u300c\u9ad8\u8ca0\u8377\u3067\u98fd\u548c\u3057\u3066\u3044\u306a\u3044\u3060\u308d\u3046\u304b?\u300d\u3092\u691c\u8a0e\u3057\u3066\u307f\u307e\u3059\u3002\u3082\u3057\u3082\u3053\u308c\u3089\u306e\u554f\u3044\u306e\u7b54\u3048\u304cYES\u306a\u3089\u3001\u518d\u3073\u3001\u305d\u308c\u3089\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u30b9\u30c6\u30c3\u30d71\u306e\u3088\u3046\u306b\u691c\u8a0e\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n### 3. Did something change?\n\n> Next consider alerts and other events that may be correlated with your metrics. If a code release, [internal alert](https://www.datadoghq.com/blog/2015/06/monitoring-101-alerting/#levels-of-urgency), or other event was registered slightly before problems started occurring, investigate whether they may be connected to the problem.\n\n\u6b21\u306b\u3001\u30e1\u30c8\u30ea\u30af\u30b9\u306b\u95a2\u9023\u3057\u3066\u3044\u308b\u4ed6\u306e\u30a4\u30d9\u30f3\u30c8\u3084\u30a2\u30e9\u30fc\u30c8\u3092\u691c\u8a0e\u3057\u3066\u307f\u307e\u3059\u3002\u65b0\u3057\u3044\u30b3\u30fc\u30c9\u304c\u9069\u5fdc\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u3001[\u30b7\u30b9\u30c6\u30e0\u5185\u3067\u30a2\u30e9\u30fc\u30c8](https://www.datadoghq.com/blog/2015/06/monitoring-101-alerting/#levels-of-urgency)\u304c\u8a18\u9332\u3055\u308c\u3066\u306a\u3044\u304b\u3001\u554f\u984c\u767a\u751f\u306e\u5c11\u3057\u524d\u306b\u305d\u306e\u4ed6\u306e\u30a4\u30d9\u30f3\u30c8\u306f\u8a18\u9332\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u3001\u306a\u3069\u304c\u554f\u984c\u3068\u95a2\u4fc2\u3057\u3066\u3044\u306a\u3044\u304b\u3092\u691c\u8a0e\u3057\u307e\u3059\u3002\n\n### 4. Fix it (and don\u2019t forget it)\n\n> Once you have determined what caused the issue, correct it. Your investigation is complete when symptoms disappear\u2014you can now think about how to change the system to avoid similar problems in the future.\n\n\u554f\u984c\u306e\u539f\u56e0\u3092\u7279\u5b9a\u3067\u304d\u305f\u3089\u3001\u305d\u308c\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\u554f\u984c\u3068\u306a\u3063\u3066\u3044\u308b\u5fb4\u5019\u304c\u89e3\u6d88\u3057\u305f\u3089\u3001\u7dca\u6025\u5bfe\u51e6\u306f\u7d42\u4e86\u3067\u3059\u3002\u3053\u3053\u304b\u3089\u306f\u3001\u4eca\u5f8c\u540c\u3058\u554f\u984c\u306b\u906d\u9047\u3057\u306a\u3044\u3088\u3046\u306b\u3001\u30b7\u30b9\u30c6\u30e0\u3092\u3069\u306e\u3088\u3046\u306b\u6539\u5584\u3059\u308b\u3079\u304d\u304b\u691c\u8a0e\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n## Build dashboards before you need them\n\n[![dashboard](https://d33tyra1llx9zy.cloudfront.net/blog/images/2015-05-how-to-monitor/example-dashboard-2.png)](https://d33tyra1llx9zy.cloudfront.net/blog/images/2015-05-how-to-monitor/example-dashboard-2.png)\n\n> In an outage, every minute is crucial. To speed your investigation and keep your focus on the task at hand, set up dashboards in advance. You may want to set up one dashboard for your high-level application metrics, and one dashboard for each subsystem. Each system\u2019s dashboard should render the work metrics of that system, along with resource metrics of the system itself and key metrics of the subsystems it depends on. If event data is available, overlay relevant events on the\ngraphs for correlation analysis.\n\n\u969c\u5bb3\u304c\u767a\u751f\u3057\u305f\u6642\u306f\u30011\u79d2\u3082\u7121\u99c4\u306b\u3057\u305f\u304f\u306a\u3044\u3082\u306e\u3067\u3059\u3002\u8abf\u67fb\u3001\u691c\u8a0e\u3092\u5186\u6ed1\u306b\u9032\u3081\u3001\u4eca\u53d6\u308a\u7d44\u3080\u3079\u304d\u30bf\u30b9\u30af\u306b\u96c6\u4e2d\u3067\u304d\u308b\u3088\u3046\u306b\u3001\u4e88\u3081\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3053\u3068\u304a\u52e7\u3081\u3057\u307e\u3059\u3002\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306f\u3001\u6700\u3082\u30e6\u30fc\u30b6\u30fc\u306b\u8fd1\u3044\u5c64\u306e\u30a2\u30d7\u30ea\u30b1\u2212\u30b7\u30e7\u30f3\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u307e\u3068\u3081\u305f\u3082\u306e\u3068\u3001\u5404\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0\u306b\u3064\u3044\u3066\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u826f\u3044\u3067\u3057\u3087\u3046\u3002\u5404\u30b7\u30b9\u30c6\u30e0\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u306f\u3001\u305d\u306e\u30b7\u30b9\u30c6\u30e0\u306eWork\u30e1\u30c8\u30ea\u30af\u30b9\u3068\u3001\u305d\u306e\u30b7\u30b9\u30c6\u30e0\u306eResource\u30e1\u30c8\u30ea\u30af\u30b9\u3068\u4f9d\u5b58\u3057\u3066\u3044\u308b\u30b5\u30d6\u30b7\u30b9\u30c6\u30e0\u306e\u30ad\u30fc\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u8868\u793a\u3057\u3066\u304a\u304f\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\u30a4\u30d9\u30f3\u30c8\u60c5\u5831\u304c\u53ce\u96c6\u3067\u304d\u3066\u3044\u308b\u5834\u5408\u3001\u76f8\u95a2\u5206\u6790\u306e\u305f\u3081\u306b\u305d\u308c\u3089\u306e\u30a4\u30d9\u30f3\u30c8\u60c5\u5831\u3092\u30b0\u30e9\u30d5\u306b\u91cd\u306d\u66f8\u304d\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n## Conclusion: Follow the metrics\n\n> Adhering to a standardized monitoring framework allows you to investigate problems more systematically:\n\n> -   For each system in your infrastructure, set up a dashboard ahead of time that displays all its key metrics, with relevant events overlaid.\n> -   Investigate causes of problems by starting with the highest-level system that is showing symptoms, reviewing its [work and resource metrics](https://www.datadoghq.com/blog/2015/06/monitoring-101-collecting-data/#metrics) and any associated events.\n> -   If problematic resources are detected, apply the same investigation pattern to the resource (and its constituent resources) until your root problem is discovered and corrected.\n\n\u6a19\u6e96\u5316\u3055\u308c\u305f\u76e3\u8996\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u53b3\u5b88\u3059\u308b\u3053\u3068\u3067\u3001\u4f53\u7cfb\u7684\u306b\u554f\u984c\u306e\u691c\u8a0e\u3092\u9032\u3081\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059:\n\n- \u30a4\u30f3\u30d5\u30e9\u306e\u5404\u30b7\u30b9\u30c6\u30e0\u306b\u5bfe\u3057\u3001\u30ad\u30fc\u30e1\u30c8\u30ea\u30af\u30b9\u3068\u30b7\u30b9\u30c6\u30e0\u306b\u95a2\u9023\u3057\u305f\u30a4\u30d9\u30f3\u30c8\u3092\u91cd\u306d\u66f8\u304d\u3057\u305f\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u3001\u4e88\u3081\u6e96\u5099\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n- \u554f\u984c\u306e\u539f\u56e0\u306e\u8abf\u67fb\u3001\u691c\u8a0e\u306f\u3001\u6700\u3082\u30e6\u30fc\u30b6\u30fc\u306b\u8fd1\u3044\u5c64\u306e\u30b7\u30b9\u30c6\u30e0\u306e\u5fb4\u5019\u304b\u3089\u59cb\u3081\u3001[work\u30e1\u30c8\u30ea\u30af\u30b9\u3068resource\u30e1\u30c8\u30ea\u30af\u30b9](https://www.datadoghq.com/blog/2015/06/monitoring-101-collecting-data/#metrics)\u3092\u691c\u8a0e\u3057\u3001\u305d\u308c\u3089\u306b\u95a2\u9023\u3057\u3066\u3044\u308b\u30a4\u30d9\u30f3\u30c8\u3092\u691c\u8a3c\u3057\u307e\u3057\u3087\u3046\u3002\n- \u30ea\u30bd\u30fc\u30b9\u306b\u554f\u984c\u304c\u3042\u308b\u3053\u3068\u304c\u5206\u304b\u3063\u305f\u5834\u5408\u306f\u3001\u30ea\u30bd\u30fc\u30b9\u306b\u5bfe\u3057\u3053\u308c\u307e\u3067\u3068\u540c\u3058\u8abf\u67fb\u3001\u691c\u8a0e\u30d1\u30bf\u30fc\u30f3\u3092\u9069\u5fdc\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u305d\u306e\u4e0b\u306e\u30b5\u30d6\u30ea\u30bd\u30fc\u30b9\u306b\u3082\u540c\u69d8\u306b\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u3092\u9069\u7528\u3057\u3001\u6839\u672c\u539f\u56e0\u3092\u767a\u898b\u3057\u3001\u4fee\u6b63\u304c\u7d42\u308f\u308b\u307e\u3067\u7d9a\u3051\u307e\u3059\u3002\n\n> We would like to hear about your experiences as you apply this framework to your own monitoring practice. If it is working well, please [let us know on Twitter](https://twitter.com/datadoghq)! Questions, corrections, additions, complaints, etc? Please [let us know on GitHub](https://github.com/DataDog/the-monitor/blob/master/monitoring-101/monitoring_101_investigating_performance_issues.md).\n\n\u72ec\u81ea\u306b\u5b9f\u8df5\u3057\u3066\u3044\u305f\u76e3\u8996\u4f53\u5236\u306b\u3053\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u5b66\u3093\u3060\u3053\u3068\u3092\u53d6\u308a\u5165\u308c\u3001\u65b0\u305f\u306a\u76e3\u8996\u4f53\u5236\u306b\u53d6\u308a\u7d44\u3093\u3060\u4f53\u9a13\u3092\u662f\u975e\u304a\u805e\u304b\u305b\u304f\u3060\u3055\u3044\u3002 \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u53d6\u308a\u5165\u308c\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u76e3\u8996\u304c\u6539\u5584\u3055\u308c\u305f\u5834\u5408\u306f\u3001Twitter\u3067[@datadoghq](https://twitter.com/datadoghq)\u4ed8\u304d\u3067\u3064\u3076\u3084\u3044\u3066\u3044\u305f\u3060\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002\u307e\u305f\u3001\u8cea\u554f\u3001\u4fee\u6b63\u3001\u8ffd\u52a0\u3001\u82e6\u60c5\u3001\u305d\u306e\u4ed6\u304c\u3042\u308b\u5834\u5408\u306f\u3001[Github](https://github.com/DataDog/the-monitor)\u306eissue\u306b\u3066\u9023\u7d61\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n", "tags": ["Datadog", "\u521d\u5fc3\u8005\u5411\u3051"]}