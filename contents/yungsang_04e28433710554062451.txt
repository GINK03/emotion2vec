{"context": " More than 1 year has passed since last update.Attaching to a container with Docker 0.9 and libcontainer \u3092\u53c2\u8003\u306b CoreOS \u3067 nsinit \u3092\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u6d41\u308c\n1. Vagrant \u3067 CoreOS \u3092\u8d77\u52d5\u3059\u308b\u3002\n2. \u9069\u5f53\u306a\u30a4\u30e1\u30fc\u30b8\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u6210\u3059\u308b\u3002\n3. golang + gcc \u306e\u74b0\u5883\u304c\u5fc5\u8981\u306a\u306e\u3067\u3001toolbox \u3092\u4f7f\u3046\u3002\n4. nsinit \u3092\u30d3\u30eb\u30c9\u3059\u308b\u3002\n5. nsinit \u3092\u4f7f\u3063\u3066\u30b3\u30f3\u30c6\u30ca\u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\n$ vagrant init -m yungsang/coreos-alpha\n$ vagrant up\n$ vagrant ssh\n   ______                ____  _____\n  / ____/___  ________  / __ \\/ ___/\n / /   / __ \\/ ___/ _ \\/ / / /\\__ \\\n/ /___/ /_/ / /  /  __/ /_/ /___/ /\n\\____/\\____/_/   \\___/\\____//____/\n(alpha 349.0.0)\ncore@localhost ~ $ docker pull yungsang/busybox\ncore@localhost ~ $ docker run -d -p 8080:8080 yungsang/busybox nc -p 8080 -l -l -e echo hello world!\n851e2caaea566342ca2d32bfbd6542041a07af6c2ff54f5cd82f6d1be23953e8\ncore@localhost ~ $ docker ps\nCONTAINER ID        IMAGE                     COMMAND                CREATED             STATUS              PORTS                    NAMES\n851e2caaea56        yungsang/busybox:latest   nc -p 8080 -l -l -e    9 minutes ago       Up 9 minutes        0.0.0.0:8080->8080/tcp   clever_wright\ncore@localhost ~ $ toolbox\nPulling repository fedora\n3f2fed40e4b0: Download complete\n64fd7993bcaf: Download complete\n511136ea3c5a: Download complete\nfd241224e9cf: Download complete\ncore-fedora\nSpawning container core-fedora on /var/lib/toolbox/core-fedora. Press ^] three times within 1s to abort execution.\n/etc/localtime is not a symlink, not updating container timezone.\n[root@localhost ~]# curl -OL http://golang.org/dl/go1.2.2.linux-amd64.tar.gz\n[root@localhost ~]# tar zxvf go1.2.2.linux-amd64.tar.gz\n[root@localhost ~]# export GOROOT=$HOME/go\n[root@localhost ~]# export PATH=$PATH:$GOROOT/bin\n[root@localhost ~]# mkdir gocode\n[root@localhost ~]# export GOPATH=$HOME/gocode\n[root@localhost ~]# export PATH=$PATH:$GOPATH/bin\n[root@localhost ~]# yum install -y git gcc\n[root@localhost ~]# go get github.com/docker/libcontainer/nsinit\n[root@localhost ~]# ls -l $GOPATH/bin\ntotal 7904\n-rwxr-xr-x 1 root root 8093520 Jun 18 19:35 nsinit\n[root@localhost ~]# cd /media/root/var/lib/docker/execdriver/native/851e2caaea566342ca2d32bfbd6542041a07af6c2ff54f5cd82f6d1be23953e8\n[root@localhost 851e2caaea566342ca2d32bfbd6542041a07af6c2ff54f5cd82f6d1be23953e8]# nsinit exec sh\n/ # ps\nPID   USER     COMMAND\n    1 root     nc -p 8080 -l -l -e echo hello world!\n    7 root     sh\n   12 root     ps\n/ # \n\n[Attaching to a container with Docker 0.9 and libcontainer](http://jpetazzo.github.io/2014/03/23/lxc-attach-nsinit-nsenter-docker-0-9/) \u3092\u53c2\u8003\u306b CoreOS \u3067 nsinit \u3092\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u6d41\u308c\n1. Vagrant \u3067 CoreOS \u3092\u8d77\u52d5\u3059\u308b\u3002\n2. \u9069\u5f53\u306a\u30a4\u30e1\u30fc\u30b8\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u6210\u3059\u308b\u3002\n3. golang + `gcc` \u306e\u74b0\u5883\u304c\u5fc5\u8981\u306a\u306e\u3067\u3001`toolbox` \u3092\u4f7f\u3046\u3002\n4. `nsinit` \u3092\u30d3\u30eb\u30c9\u3059\u308b\u3002\n5. `nsinit` \u3092\u4f7f\u3063\u3066\u30b3\u30f3\u30c6\u30ca\u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\n\n```bash\n$ vagrant init -m yungsang/coreos-alpha\n$ vagrant up\n$ vagrant ssh\n   ______                ____  _____\n  / ____/___  ________  / __ \\/ ___/\n / /   / __ \\/ ___/ _ \\/ / / /\\__ \\\n/ /___/ /_/ / /  /  __/ /_/ /___/ /\n\\____/\\____/_/   \\___/\\____//____/\n(alpha 349.0.0)\ncore@localhost ~ $ docker pull yungsang/busybox\ncore@localhost ~ $ docker run -d -p 8080:8080 yungsang/busybox nc -p 8080 -l -l -e echo hello world!\n851e2caaea566342ca2d32bfbd6542041a07af6c2ff54f5cd82f6d1be23953e8\ncore@localhost ~ $ docker ps\nCONTAINER ID        IMAGE                     COMMAND                CREATED             STATUS              PORTS                    NAMES\n851e2caaea56        yungsang/busybox:latest   nc -p 8080 -l -l -e    9 minutes ago       Up 9 minutes        0.0.0.0:8080->8080/tcp   clever_wright\ncore@localhost ~ $ toolbox\nPulling repository fedora\n3f2fed40e4b0: Download complete\n64fd7993bcaf: Download complete\n511136ea3c5a: Download complete\nfd241224e9cf: Download complete\ncore-fedora\nSpawning container core-fedora on /var/lib/toolbox/core-fedora. Press ^] three times within 1s to abort execution.\n/etc/localtime is not a symlink, not updating container timezone.\n[root@localhost ~]# curl -OL http://golang.org/dl/go1.2.2.linux-amd64.tar.gz\n[root@localhost ~]# tar zxvf go1.2.2.linux-amd64.tar.gz\n[root@localhost ~]# export GOROOT=$HOME/go\n[root@localhost ~]# export PATH=$PATH:$GOROOT/bin\n[root@localhost ~]# mkdir gocode\n[root@localhost ~]# export GOPATH=$HOME/gocode\n[root@localhost ~]# export PATH=$PATH:$GOPATH/bin\n[root@localhost ~]# yum install -y git gcc\n[root@localhost ~]# go get github.com/docker/libcontainer/nsinit\n[root@localhost ~]# ls -l $GOPATH/bin\ntotal 7904\n-rwxr-xr-x 1 root root 8093520 Jun 18 19:35 nsinit\n[root@localhost ~]# cd /media/root/var/lib/docker/execdriver/native/851e2caaea566342ca2d32bfbd6542041a07af6c2ff54f5cd82f6d1be23953e8\n[root@localhost 851e2caaea566342ca2d32bfbd6542041a07af6c2ff54f5cd82f6d1be23953e8]# nsinit exec sh\n/ # ps\nPID   USER     COMMAND\n    1 root     nc -p 8080 -l -l -e echo hello world!\n    7 root     sh\n   12 root     ps\n/ # \n```\n", "tags": ["docker", "CoreOS", "vagrant"]}