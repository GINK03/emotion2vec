{"context": "Oracle Application Container \u7528\u306e Maven \u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u3059\u3002\u3053\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u4ee5\u524d\u4f5c\u6210\u3057\u3066\u3044\u305f Oracle Storage Cloud Service \u7528\u306e Maven \u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u4f7f\u7528\u3059\u308b\u4e8b\u306b\u3088\u308a\u3001Maven \u30b4\u30fc\u30eb\u306e\u307f\u3067\u958b\u767a\u304b\u3089\u30c7\u30d7\u30ed\u30a4\u307e\u3067\u5b9f\u65bd\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\nOracle Storage Cloud Service \u306e Maven \u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f5c\u3063\u3066\u307f\u305f\n\nscs-maven-plugin\n\n\n\n\n\n\u8aac\u660e\nOracle Application Container (\u7565\u79f0: ACCS)\u306f\u3001\u591a\u8a00\u8a9e\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u7c21\u5358\u306b\u7a3c\u50cd\u3055\u305b\u308b\u4e8b\u304c\u3067\u304d\u3001\u307e\u305f\u30b9\u30b1\u30fc\u30e9\u30d6\u30eb\u306e\u5b9f\u884c\u74b0\u5883\u3092\u63d0\u4f9b\u3059\u308b\u30af\u30e9\u30a6\u30c9\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u958b\u767a\u3057\u3066\u3001Zip\u306b\u30a2\u30fc\u30ab\u30a4\u30d6\u3057\u3066\u3001\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u306e\u307f\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5b9f\u884c\u74b0\u5883\u304c\u7528\u610f\u3055\u308c\u307e\u3059\u3002\n\u3053\u306e\u30af\u30e9\u30a6\u30c9\u30b5\u30fc\u30d3\u30b9\u306e\u57fa\u76e4\u306f\u3001Docker \u304c\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u5b9f\u884c\u74b0\u5883\u306e\u7acb\u3061\u4e0a\u3052\u3084\u3001\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u306f\u8efd\u91cf\u304b\u3064\u9ad8\u901f\u306b\u5b9f\u884c\u3059\u308b\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\n\u4e00\u65b9\u3067 Docker \u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306f ACCS \u306b\u3088\u308a\u30e9\u30c3\u30d7\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001ACCS \u306e\u5229\u7528\u8005\u306f Docker \u306e\u64cd\u4f5c\u3084\u7ba1\u7406\u3001\u69cb\u6210\u306a\u3069\u3092\u8003\u616e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u305d\u306e\u305f\u3081\u3001\u958b\u767a\u8005\u306f Dockerfile \u3084 docker-compose.yml \u306e\u69cb\u6210\u3092\u610f\u8b58\u3059\u308b\u4e8b\u306a\u304f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u306e\u307f\u306b\u6ce8\u529b\u3059\u308b\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\n\u3053\u306e\u3088\u3046\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u8005\u304c\u3001Docker \u306e\u5b66\u7fd2\u30b3\u30b9\u30c8\u3092\u304b\u3051\u308b\u4e8b\u306a\u304f\u8efd\u91cf\u30fb\u30b9\u30b1\u30fc\u30e9\u30d6\u30eb\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3067\u304d\u308b\u306e\u304c ACCS \u3067\u3059\u3002\n\u3053\u306e ACCS \u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u8005\u306b\u3068\u3063\u3066\u3088\u304f\u4f7f\u308f\u308c\u308b Maven \u304b\u3089\u76f4\u63a5 ACCS \u3092\u64cd\u4f5c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u306e\u304c\u3001\u3053\u306e accs-maven-plugin \u3067\u3059\u3002\n\n\u52d5\u4f5c\u30a4\u30e1\u30fc\u30b8\n\naccs-maven-plugin \u3092\u5229\u7528\u3057\u305f\u64cd\u4f5c\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d3\u30eb\u30c9\u304b\u3089 ACCS \u3078\u306e\u30c7\u30d7\u30ed\u30a4\u307e\u3067\u3092 Maven \u3092\u4f7f\u3063\u3066\u30b7\u30fc\u30e0\u30ec\u30b9\u306b\u5b9f\u65bd\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u52d5\u4f5c\u30a4\u30e1\u30fc\u30b8\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u6d41\u308c\u3067 Maven \u30b4\u30fc\u30eb\u3092\u5b9f\u65bd\u3057\u3066\u3044\u307e\u3059:\n- \u30b3\u30f3\u30d1\u30a4\u30eb\n- JAR \u306e\u30d1\u30c3\u30b1\u30fc\u30b8\n- ACCS \u7528\u306e\u30e1\u30bf\u30d5\u30a1\u30a4\u30eb\u306e\u751f\u6210\n- ACCS \u7528\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u751f\u6210\n- \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n- ACCS \u3078\u306e\u30c7\u30d7\u30ed\u30a4\n\n\u7279\u5fb4\n\u3053\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u306f\u3001\u73fe\u5728\u4ee5\u4e0b\u306e\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059 (2017/3/1\u6642\u70b9):\n\nACCS \u3078\u306e\u30c7\u30d7\u30ed\u30a4\n\u30c7\u30d7\u30ed\u30a4\u7528\u30e1\u30bf\u60c5\u5831\u30d5\u30a1\u30a4\u30eb\u306e\u751f\u6210\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7528\u30e1\u30bf\u60c5\u5831\u30d5\u30a1\u30a4\u30eb\u306e\u751f\u6210\nACCS \u7528\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u751f\u6210\nACCS \u30c7\u30d7\u30ed\u30a4\u6e08\u307f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u4e00\u89a7\u8868\u793a\n\n\n\u524d\u63d0\n\nMaven 3\nJava 1.8\n\n\n\u4f7f\u7528\u65b9\u6cd5\n\nACCS \u3078\u306e\u30c7\u30d7\u30ed\u30a4\n\n\u30b3\u30de\u30f3\u30c9: accs:create\n\n\n\npom.xml \u306e\u8a18\u8ff0\nACCS \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092 <configuration> \u306e\u914d\u4e0b\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n<configuration>\n    <region>emea</region>\n    <identitydomain>${opc.identitydomain}</identitydomain>>\n    <user>${opc.user}</user>\n    <password>${opc.password}</password>\n    <storage>${scs.container}</storage>\n    <appName>MY-APP</appName>\n    <runtime>java</runtime>\n    <subscription>Hourly</subscription>\n    <archiveURL>${scs.container}/${project.name}-${project.version}.zip</archiveURL>\n</configuration>\n\n\n\nregion: \u4f7f\u7528\u3057\u3066\u3044\u308b\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u30fc\u304c\u3042\u308b\u5730\u57df\n\n\n\nus \u53c8\u306f emea\n\n\n\n\nidentitydomain: \u4f7f\u7528\u3057\u3066\u3044\u308b\u30a2\u30a4\u30c7\u30f3\u30c6\u30a3\u30c6\u30a3\u30fb\u30c9\u30e1\u30a4\u30f3\u540d\n\nuser: \u30e6\u30fc\u30b6\u30fc\u540d\n\npassword: \u30d1\u30b9\u30ef\u30fc\u30c9\n\nstorage: \u30c7\u30d7\u30ed\u30a4\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30fb\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u3044\u308b Storage Cloud Service \u306e\u30b3\u30f3\u30c6\u30ca\u540d\n\nappName: ACCS \u306b\u767b\u9332\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\n\nruntime: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30e9\u30f3\u30bf\u30a4\u30e0\n\n\n\njava \u53c8\u306f node \u53c8\u306f php\n\n\n\n\n\n\u73fe\u6642\u70b9\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u306f\u3000java \u306e\u307f\u306e\u5bfe\u5fdc\u3067\u3059 (2017/3/1)\n\n\n\nsubscription: \u5951\u7d04\u30bf\u30a4\u30d7\n\n\n\nHourly \u53c8\u306f Monthly\n\n\n\n\narchiveURL: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30fb\u30d1\u30c3\u30b1\u30fc\u30b8\u540d (\u30b9\u30c8\u30ec\u30fc\u30b8\u30b3\u30f3\u30c6\u30ca\u540d\u3092\u542b\u3080)\n\n\n\u30c7\u30d7\u30ed\u30a4\u7528\u30e1\u30bf\u60c5\u5831\u30d5\u30a1\u30a4\u30eb\u306e\u751f\u6210 (deployment.json)\n\n\u30b3\u30de\u30f3\u30c9: accs:create-deployment\n\n\n\npom.xml \u306e\u8a18\u8ff0\n\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092 <configuration> \u306e\u914d\u4e0b\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n<configuration>\n    <metaJsonPath>${project.basedir}\\metafiles</metaJsonPath>\n    <memory>1G</memory>\n    <instances>1</instances>\n</configuration>\n\n\n\nmetaJsonPath: \u30c7\u30d7\u30ed\u30a4\u7528\u30e1\u30bf\u60c5\u5831\u30d5\u30a1\u30a4\u30eb (deployment.json) \u306e\u51fa\u529b\u5148\n\nmemory: ACCS \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u5272\u308a\u5f53\u3066\u308b\u30e1\u30e2\u30ea\u5bb9\u91cf\n\ninstances: \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6570\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7528\u30e1\u30bf\u60c5\u5831\u30d5\u30a1\u30a4\u30eb\u306e\u751f\u6210\n\n\u30b3\u30de\u30f3\u30c9: accs:create-manifest\n\n\n\npom.xml \u306e\u8a18\u8ff0\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092 <configuration> \u306e\u914d\u4e0b\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n<configuration>\n    <metaJsonPath>${project.basedir}\\metafiles</metaJsonPath>\n    <archiveName>${project.name}-${project.version}</archiveName>\n    <majorVersion>8</majorVersion>\n    <command>java -jar ${project.artifactId}-${project.version}.jar</command>\n    <version>${project.version}</version>\n</configuration>\n\n\n\nmetaJsonPath: \u30c7\u30d7\u30ed\u30a4\u7528\u30e1\u30bf\u60c5\u5831\u30d5\u30a1\u30a4\u30eb (manifest.json) \u306e\u51fa\u529b\u5148\n\narchiveName: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30fb\u30d1\u30c3\u30b1\u30fc\u30b8\u540d (\u62e1\u5f35\u5b50\u4e0d\u8981)\n\nmajorVersion: \u30e9\u30f3\u30bf\u30a4\u30e0\u30fb\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\nIn the case of java \u306e\u30d0\u30fc\u30b8\u30e7\u30f3 (\u73fe\u5728 Java\u306e\u307f\u306e\u5bfe\u5fdc)\n\n\n\n8 \u53c8\u306f 7\n\n\n\n\n\n\ncommand: \u8d77\u52d5\u30b3\u30de\u30f3\u30c9\n\nversion: \u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\n\n\nACCS \u7528\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u751f\u6210\n\n\u30b3\u30de\u30f3\u30c9: accs:package\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3068 manifest.json \u3092\u542b\u3093\u3060\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\nACCS \u30c7\u30d7\u30ed\u30a4\u6e08\u307f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u4e00\u89a7\u8868\u793a\n\n\u30b3\u30de\u30f3\u30c9: accs:list\n\n\nACCS \u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u3066\u3044\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4e00\u89a7\u60c5\u5831\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\n\u5c0e\u5165\u624b\u9806\naccs-maven-plugin \u3092\u5229\u7528\u3059\u308b\u306b\u306f\u3001pom.xml \u306b\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n\u305f\u3060\u3057\u3001ACCS \u306e\u30b3\u30f3\u30c6\u30ca\u306f\u52d5\u7684\u306b\u4f5c\u6210\u3055\u308c\u3001\u30db\u30b9\u30c8\u540d\u3084\u30dd\u30fc\u30c8\u756a\u53f7\u3068\u3044\u3063\u305f\u74b0\u5883\u60c5\u5831\u3082\u52d5\u7684\u306b\u751f\u6210\u3055\u308c\u307e\u3059\u3002\u305d\u3053\u3067 ACCS \u4e0a\u3067\u7a3c\u50cd\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u74b0\u5883\u60c5\u5831\u306f\u74b0\u5883\u5909\u6570\u304b\u3089\u8aad\u307f\u8fbc\u3080\u3088\u3046\u306b\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u307e\u305f\u3001Java \u306e\u5834\u5408\u306f\u5b9f\u884c\u53ef\u80fd\u306a Uber JAR (Fat JAR) \u306b\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u89b3\u70b9\u3068pom.xml\u306e\u89b3\u70b9\u3067\u306e\u5c0e\u5165\u65b9\u6cd5\u3092\u6b21\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\n\nACCS \u7528\u306e Java \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\n\u4f8b\u3068\u3057\u3066 Server Framework \u306e Grizzly \u3092\u7d44\u307f\u8fbc\u3093\u3060\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u7528\u3044\u307e\u3059\u3002\n\n1. Maven \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\nMaven \u306e archetype:generate \u30b4\u30fc\u30eb\u3092\u7528\u3044\u3066 Grizzly \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u9069\u5f53\u306a\u3082\u306e\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nGROUP_ID\nARTIFACT_ID\nPACKAGE\n\nmvn archetype:generate \\\n        -DarchetypeGroupId=org.glassfish.jersey.archetypes \\\n        -DarchetypeArtifactId=jersey-quickstart-grizzly2 \\\n        -DarchetypeVersion=2.25.1 \\\n        -DinteractiveMode=false \\\n        -DgroupId=${GROUP_ID} \\\n        -DartifactId=${ARTIFACT_ID} \\\n        -Dversion=1.0.0-SNAPSHOT \\\n        -Dpackage=${PACKAGE}\n\n\n2. Maven \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\narchetype:generate \u30b4\u30fc\u30eb\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001Main.java \u3068 MyResource.java \u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002Main.java \u3067 Grizzly \u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u3061\u3089\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u74b0\u5883\u5909\u6570\u304b\u3089\u30db\u30b9\u30c8\u540d\u3068\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n\u5909\u66f4\u524d\n\npublic class Main {\n    // Base URI the Grizzly HTTP server will listen on\n    public static final String BASE_URI = \"http://localhost:8080/myapp/\";\n\n\n\u5909\u66f4\u5f8c\n\npublic class Main {\n    // Base URI the Grizzly HTTP server will listen on\n    public static final String BASE_URI = \"http://\"\n            + Optional.ofNullable(System.getenv(\"HOSTNAME\")).orElseGet(() -> \"localhost\")\n            + \":\"\n            + Optional.ofNullable(System.getenv(\"PORT\")).orElseGet(() -> \"8080\")\n            + \"/myapp/\";\n\n\u4e00\u5fdc deprecated \u306b\u306a\u3063\u3066\u3044\u308b\u505c\u6b62\u51e6\u7406\u3082\u4fee\u6b63\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n- \u5909\u66f4\u524d\n  - server.stop();\n- \u5909\u66f4\u5f8c\n  - server.shutdownNow();\n\n3. Uber JAR \u306e\u69cb\u6210\nmaven-shade-plugin \u3092\u7528\u3044\u3066 Uber JAR \u3092\u69cb\u6210\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n<plugin>\n    <groupId>org.apache.maven.plugins</groupId>\n    <artifactId>maven-shade-plugin</artifactId>\n    <version>2.4.3</version>\n    <executions>\n        <execution>\n            <phase>package</phase>\n            <goals>\n                <goal>shade</goal>\n            </goals>\n            <configuration>\n                <transformers>\n                    <transformer\n                            implementation=\"org.apache.maven.plugins.shade.resource.ServicesResourceTransformer\"/>\n                    <transformer\n                            implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\">\n                        <manifestEntries>\n                            <Main-Class>com.oracle.jp.shinyay.grizzly.Main</Main-Class>\n                        </manifestEntries>\n                    </transformer>\n                </transformers>\n            </configuration>\n        </execution>\n    </executions>\n    <configuration>\n        <createDependencyReducedPom>true</createDependencyReducedPom>\n        <filters>\n            <filter>\n                <artifact>*:*</artifact>\n                <excludes>\n                    <exclude>META-INF/*.SF</exclude>\n                    <exclude>META-INF/*.DSA</exclude>\n                    <exclude>META-INF/*.RSA</exclude>\n                </excludes>\n            </filter>\n        </filters>\n    </configuration>\n</plugin>\n\n\naccs-maven-plugin \u306e\u4f9d\u5b58\u95a2\u4fc2\u8ffd\u52a0\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b accs-maven-plugin \u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u307e\u305f\u3042\u308f\u305b\u3066\u3001scs-maven-plugin \u3082\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\n<plugin>\n    <groupId>com.oracle.jp.shinyay</groupId>\n    <artifactId>accs-maven-plugin</artifactId>\n    <version>1.0-SNAPSHOT</version>\n    <configuration>\n        <region>emea</region>\n        <identitydomain>${opc.identitydomain}</identitydomain>>\n        <user>${opc.user}</user>\n        <password>${opc.password}</password>\n        <storage>${scs.container}</storage>\n        <appName>my-sample</appName>\n        <runtime>java</runtime>\n        <subscription>Hourly</subscription>\n        <archiveURL>${scs.container}/${project.name}-${project.version}.zip</archiveURL>\n        <metaJsonPath>${project.basedir}\\metafiles</metaJsonPath>\n        <archiveName>${project.name}-${project.version}</archiveName>\n        <majorVersion>8</majorVersion>\n        <command>java -jar ${project.artifactId}-${project.version}.jar</command>\n        <version>${project.version}</version>\n        <memory>1G</memory>\n        <instances>1</instances>\n    </configuration>\n</plugin>\n<plugin>\n    <groupId>com.oracle.jp.shinyay</groupId>\n    <artifactId>scs-maven-plugin</artifactId>\n    <version>1.0</version>\n    <configuration>\n        <identitydomain>${opc.identitydomain}</identitydomain>\n        <user>${opc.user}</user>\n        <password>${opc.password}</password>\n        <storage>${scs.container}</storage>\n        <object>${project.name}-${project.version}.zip</object>\n    </configuration>\n</plugin>\n\n\u4ee5\u4e0b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u3001\u5b9f\u969b\u306e\u5024\u306b\u7f6e\u304d\u63db\u3048\u308b\u304b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u4f7f\u7528\u3057\u3066\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\nopc.identitydomain: \u30a2\u30a4\u30c7\u30f3\u30c6\u30a3\u30c6\u30a3\u30c9\u30e1\u30a4\u30f3\u540d\nopc.user: \u30e6\u30fc\u30b6\u540d\nopc.password: \u30d1\u30b9\u30ef\u30fc\u30c9\nscs.container: Storage Cloud \u30b3\u30f3\u30c6\u30ca\u540d\n\n\n\u5b9f\u884c\n\u4ee5\u4e0b\u306e\u9806\u3067 Maven \u30b4\u30fc\u30eb\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\n\n\nmvn compile: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\n\nmvn package: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u5316(Uber JAR \u5316)\n\nmvn accs:create-manifest: manifest.json \u306e\u751f\u6210\n\nmvn accs:create-deployment: deployment.json \u306e\u751f\u6210\n\nmvn scs:upload: Storage Cloud \u30b3\u30f3\u30c6\u30ca\u3078\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n\nmvn accs:create: ACCS \u3078\u306e\u30c7\u30d7\u30ed\u30a4 \n\n\n\u307e\u3068\u3081\n\u3053\u306eMaven \u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u3046\u3068\u30d6\u30e9\u30a6\u30b6\u3092\u4f7f\u3063\u305f\u308a\u3001\u5225\u9014\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u306a\u304f\u3066\u3082\u64cd\u4f5c\u304c\u5b8c\u7d50\u3059\u308b\u306e\u3067\u3001ACCS \u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u304c\u968f\u5206\u6357\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u3068\u306f\u8a00\u3048\u3001ACCS \u306e\u64cd\u4f5c\u81ea\u4f53\u306f\u4e00\u89a7\u8868\u793a\u3068\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30c7\u30d7\u30ed\u30a4\u3057\u304b\u5b9f\u88c5\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u4ed6\u306b\u3082\u5b9f\u88c5\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\nGitHub\n\nhttps://github.com/shinyay/accs-maven-plugin/tree/1.0.0\n\n\n[Oracle Application Container](https://cloud.oracle.com/acc) \u7528\u306e Maven \u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u3059\u3002\u3053\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u4ee5\u524d\u4f5c\u6210\u3057\u3066\u3044\u305f Oracle Storage Cloud Service \u7528\u306e Maven \u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u4f7f\u7528\u3059\u308b\u4e8b\u306b\u3088\u308a\u3001Maven \u30b4\u30fc\u30eb\u306e\u307f\u3067\u958b\u767a\u304b\u3089\u30c7\u30d7\u30ed\u30a4\u307e\u3067\u5b9f\u65bd\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n- [Oracle Storage Cloud Service \u306e Maven \u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f5c\u3063\u3066\u307f\u305f](http://qiita.com/shinyay/items/69fab755212ab31f7319)\n  - [scs-maven-plugin\n](https://github.com/shinyay/scs-maven-plugin)\n\n## \u8aac\u660e\n\n[Oracle Application Container](https://cloud.oracle.com/acc) (\u7565\u79f0: ACCS)\u306f\u3001\u591a\u8a00\u8a9e\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u7c21\u5358\u306b\u7a3c\u50cd\u3055\u305b\u308b\u4e8b\u304c\u3067\u304d\u3001\u307e\u305f\u30b9\u30b1\u30fc\u30e9\u30d6\u30eb\u306e\u5b9f\u884c\u74b0\u5883\u3092\u63d0\u4f9b\u3059\u308b\u30af\u30e9\u30a6\u30c9\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u958b\u767a\u3057\u3066\u3001Zip\u306b\u30a2\u30fc\u30ab\u30a4\u30d6\u3057\u3066\u3001\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u306e\u307f\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5b9f\u884c\u74b0\u5883\u304c\u7528\u610f\u3055\u308c\u307e\u3059\u3002\n\n\u3053\u306e\u30af\u30e9\u30a6\u30c9\u30b5\u30fc\u30d3\u30b9\u306e\u57fa\u76e4\u306f\u3001Docker \u304c\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u5b9f\u884c\u74b0\u5883\u306e\u7acb\u3061\u4e0a\u3052\u3084\u3001\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u306f\u8efd\u91cf\u304b\u3064\u9ad8\u901f\u306b\u5b9f\u884c\u3059\u308b\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u4e00\u65b9\u3067 Docker \u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306f ACCS \u306b\u3088\u308a\u30e9\u30c3\u30d7\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001ACCS \u306e\u5229\u7528\u8005\u306f Docker \u306e\u64cd\u4f5c\u3084\u7ba1\u7406\u3001\u69cb\u6210\u306a\u3069\u3092\u8003\u616e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u305d\u306e\u305f\u3081\u3001\u958b\u767a\u8005\u306f `Dockerfile` \u3084 `docker-compose.yml` \u306e\u69cb\u6210\u3092\u610f\u8b58\u3059\u308b\u4e8b\u306a\u304f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u306e\u307f\u306b\u6ce8\u529b\u3059\u308b\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u3053\u306e\u3088\u3046\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u8005\u304c\u3001Docker \u306e\u5b66\u7fd2\u30b3\u30b9\u30c8\u3092\u304b\u3051\u308b\u4e8b\u306a\u304f\u8efd\u91cf\u30fb\u30b9\u30b1\u30fc\u30e9\u30d6\u30eb\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3067\u304d\u308b\u306e\u304c ACCS \u3067\u3059\u3002\n\n\u3053\u306e ACCS \u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u8005\u306b\u3068\u3063\u3066\u3088\u304f\u4f7f\u308f\u308c\u308b **Maven** \u304b\u3089\u76f4\u63a5 ACCS \u3092\u64cd\u4f5c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u306e\u304c\u3001\u3053\u306e **accs-maven-plugin** \u3067\u3059\u3002\n\n## \u52d5\u4f5c\u30a4\u30e1\u30fc\u30b8\n\n![accs-maven-plugin](https://raw.githubusercontent.com/shinyay/accs-maven-plugin/1.0.0/docs/images/accs-maven-plugin.gif)\n\naccs-maven-plugin \u3092\u5229\u7528\u3057\u305f\u64cd\u4f5c\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d3\u30eb\u30c9\u304b\u3089 ACCS \u3078\u306e\u30c7\u30d7\u30ed\u30a4\u307e\u3067\u3092 Maven \u3092\u4f7f\u3063\u3066\u30b7\u30fc\u30e0\u30ec\u30b9\u306b\u5b9f\u65bd\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u306e\u52d5\u4f5c\u30a4\u30e1\u30fc\u30b8\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u6d41\u308c\u3067 Maven \u30b4\u30fc\u30eb\u3092\u5b9f\u65bd\u3057\u3066\u3044\u307e\u3059:\n- \u30b3\u30f3\u30d1\u30a4\u30eb\n- JAR \u306e\u30d1\u30c3\u30b1\u30fc\u30b8\n- ACCS \u7528\u306e\u30e1\u30bf\u30d5\u30a1\u30a4\u30eb\u306e\u751f\u6210\n- ACCS \u7528\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u751f\u6210\n- \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n- ACCS \u3078\u306e\u30c7\u30d7\u30ed\u30a4\n\n## \u7279\u5fb4\n\n\u3053\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u306f\u3001\u73fe\u5728\u4ee5\u4e0b\u306e\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059 (2017/3/1\u6642\u70b9):\n\n- ACCS \u3078\u306e\u30c7\u30d7\u30ed\u30a4\n- \u30c7\u30d7\u30ed\u30a4\u7528\u30e1\u30bf\u60c5\u5831\u30d5\u30a1\u30a4\u30eb\u306e\u751f\u6210\n- \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7528\u30e1\u30bf\u60c5\u5831\u30d5\u30a1\u30a4\u30eb\u306e\u751f\u6210\n- ACCS \u7528\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u751f\u6210\n- ACCS \u30c7\u30d7\u30ed\u30a4\u6e08\u307f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u4e00\u89a7\u8868\u793a\n\n## \u524d\u63d0\n\n- Maven 3\n- Java 1.8\n\n## \u4f7f\u7528\u65b9\u6cd5\n\n### ACCS \u3078\u306e\u30c7\u30d7\u30ed\u30a4\n\n- \u30b3\u30de\u30f3\u30c9: `accs:create`\n\n#### pom.xml \u306e\u8a18\u8ff0\n\nACCS \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092 `<configuration>` \u306e\u914d\u4e0b\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```xml\n<configuration>\n    <region>emea</region>\n    <identitydomain>${opc.identitydomain}</identitydomain>>\n    <user>${opc.user}</user>\n    <password>${opc.password}</password>\n    <storage>${scs.container}</storage>\n    <appName>MY-APP</appName>\n    <runtime>java</runtime>\n    <subscription>Hourly</subscription>\n    <archiveURL>${scs.container}/${project.name}-${project.version}.zip</archiveURL>\n</configuration>\n```\n\n- **region**: \u4f7f\u7528\u3057\u3066\u3044\u308b\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u30fc\u304c\u3042\u308b\u5730\u57df\n  - `us` \u53c8\u306f `emea`\n- **identitydomain**: \u4f7f\u7528\u3057\u3066\u3044\u308b\u30a2\u30a4\u30c7\u30f3\u30c6\u30a3\u30c6\u30a3\u30fb\u30c9\u30e1\u30a4\u30f3\u540d\n- **user**: \u30e6\u30fc\u30b6\u30fc\u540d\n- **password**: \u30d1\u30b9\u30ef\u30fc\u30c9\n- **storage**: \u30c7\u30d7\u30ed\u30a4\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30fb\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u3044\u308b Storage Cloud Service \u306e\u30b3\u30f3\u30c6\u30ca\u540d\n- **appName**: ACCS \u306b\u767b\u9332\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\n- **runtime**: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30e9\u30f3\u30bf\u30a4\u30e0\n  - `java` \u53c8\u306f `node` \u53c8\u306f `php`\n\n  > \u73fe\u6642\u70b9\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u306f\u3000`java` \u306e\u307f\u306e\u5bfe\u5fdc\u3067\u3059 (2017/3/1)\n\n- **subscription**: \u5951\u7d04\u30bf\u30a4\u30d7\n  - `Hourly` \u53c8\u306f `Monthly`\n- **archiveURL**: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30fb\u30d1\u30c3\u30b1\u30fc\u30b8\u540d (\u30b9\u30c8\u30ec\u30fc\u30b8\u30b3\u30f3\u30c6\u30ca\u540d\u3092\u542b\u3080)\n\n### \u30c7\u30d7\u30ed\u30a4\u7528\u30e1\u30bf\u60c5\u5831\u30d5\u30a1\u30a4\u30eb\u306e\u751f\u6210 (deployment.json)\n\n- \u30b3\u30de\u30f3\u30c9: `accs:create-deployment`\n\n#### pom.xml \u306e\u8a18\u8ff0\n\n\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092 `<configuration>` \u306e\u914d\u4e0b\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```xml\n<configuration>\n    <metaJsonPath>${project.basedir}\\metafiles</metaJsonPath>\n    <memory>1G</memory>\n    <instances>1</instances>\n</configuration>\n```\n\n- **metaJsonPath**: \u30c7\u30d7\u30ed\u30a4\u7528\u30e1\u30bf\u60c5\u5831\u30d5\u30a1\u30a4\u30eb (deployment.json) \u306e\u51fa\u529b\u5148\n- **memory**: ACCS \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u5272\u308a\u5f53\u3066\u308b\u30e1\u30e2\u30ea\u5bb9\u91cf\n- **instances**: \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6570\n\n### \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7528\u30e1\u30bf\u60c5\u5831\u30d5\u30a1\u30a4\u30eb\u306e\u751f\u6210\n\n- \u30b3\u30de\u30f3\u30c9: `accs:create-manifest`\n\n#### pom.xml \u306e\u8a18\u8ff0\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u95a2\u3059\u308b\u60c5\u5831\u3092 `<configuration>` \u306e\u914d\u4e0b\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```xml\n<configuration>\n    <metaJsonPath>${project.basedir}\\metafiles</metaJsonPath>\n    <archiveName>${project.name}-${project.version}</archiveName>\n    <majorVersion>8</majorVersion>\n    <command>java -jar ${project.artifactId}-${project.version}.jar</command>\n    <version>${project.version}</version>\n</configuration>\n```\n\n- **metaJsonPath**: \u30c7\u30d7\u30ed\u30a4\u7528\u30e1\u30bf\u60c5\u5831\u30d5\u30a1\u30a4\u30eb (manifest.json) \u306e\u51fa\u529b\u5148\n- **archiveName**: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30fb\u30d1\u30c3\u30b1\u30fc\u30b8\u540d (\u62e1\u5f35\u5b50\u4e0d\u8981)\n- **majorVersion**: \u30e9\u30f3\u30bf\u30a4\u30e0\u30fb\u30d0\u30fc\u30b8\u30e7\u30f3\n    - In the case of `java` \u306e\u30d0\u30fc\u30b8\u30e7\u30f3 (\u73fe\u5728 Java\u306e\u307f\u306e\u5bfe\u5fdc)\n      - `8` \u53c8\u306f `7`\n- **command**: \u8d77\u52d5\u30b3\u30de\u30f3\u30c9\n- **version**: \u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\n\n### ACCS \u7528\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u751f\u6210\n\n- \u30b3\u30de\u30f3\u30c9: `accs:package`\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3068 manifest.json \u3092\u542b\u3093\u3060\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\n### ACCS \u30c7\u30d7\u30ed\u30a4\u6e08\u307f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u4e00\u89a7\u8868\u793a\n\n- \u30b3\u30de\u30f3\u30c9: `accs:list`\n\nACCS \u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u3066\u3044\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4e00\u89a7\u60c5\u5831\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\n## \u5c0e\u5165\u624b\u9806\n\n`accs-maven-plugin` \u3092\u5229\u7528\u3059\u308b\u306b\u306f\u3001`pom.xml` \u306b\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n\n\u305f\u3060\u3057\u3001ACCS \u306e\u30b3\u30f3\u30c6\u30ca\u306f\u52d5\u7684\u306b\u4f5c\u6210\u3055\u308c\u3001\u30db\u30b9\u30c8\u540d\u3084\u30dd\u30fc\u30c8\u756a\u53f7\u3068\u3044\u3063\u305f\u74b0\u5883\u60c5\u5831\u3082\u52d5\u7684\u306b\u751f\u6210\u3055\u308c\u307e\u3059\u3002\u305d\u3053\u3067 ACCS \u4e0a\u3067\u7a3c\u50cd\u3059\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u74b0\u5883\u60c5\u5831\u306f\u74b0\u5883\u5909\u6570\u304b\u3089\u8aad\u307f\u8fbc\u3080\u3088\u3046\u306b\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u307e\u305f\u3001Java \u306e\u5834\u5408\u306f\u5b9f\u884c\u53ef\u80fd\u306a Uber JAR (Fat JAR) \u306b\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u89b3\u70b9\u3068pom.xml\u306e\u89b3\u70b9\u3067\u306e\u5c0e\u5165\u65b9\u6cd5\u3092\u6b21\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\n\n### ACCS \u7528\u306e Java \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\n\n\u4f8b\u3068\u3057\u3066 Server Framework \u306e Grizzly \u3092\u7d44\u307f\u8fbc\u3093\u3060\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u7528\u3044\u307e\u3059\u3002\n\n#### 1. Maven \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\n\nMaven \u306e `archetype:generate` \u30b4\u30fc\u30eb\u3092\u7528\u3044\u3066 Grizzly \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u9069\u5f53\u306a\u3082\u306e\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n- GROUP_ID\n- ARTIFACT_ID\n- PACKAGE\n\n```\nmvn archetype:generate \\\n        -DarchetypeGroupId=org.glassfish.jersey.archetypes \\\n        -DarchetypeArtifactId=jersey-quickstart-grizzly2 \\\n        -DarchetypeVersion=2.25.1 \\\n        -DinteractiveMode=false \\\n        -DgroupId=${GROUP_ID} \\\n        -DartifactId=${ARTIFACT_ID} \\\n        -Dversion=1.0.0-SNAPSHOT \\\n        -Dpackage=${PACKAGE}\n```\n\n#### 2. Maven \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\n\n`archetype:generate` \u30b4\u30fc\u30eb\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001`Main.java` \u3068 `MyResource.java` \u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002`Main.java` \u3067 Grizzly \u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u3061\u3089\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u74b0\u5883\u5909\u6570\u304b\u3089\u30db\u30b9\u30c8\u540d\u3068\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n- \u5909\u66f4\u524d\n\n```java\npublic class Main {\n    // Base URI the Grizzly HTTP server will listen on\n    public static final String BASE_URI = \"http://localhost:8080/myapp/\";\n```\n\n- \u5909\u66f4\u5f8c\n\n```java\npublic class Main {\n    // Base URI the Grizzly HTTP server will listen on\n    public static final String BASE_URI = \"http://\"\n            + Optional.ofNullable(System.getenv(\"HOSTNAME\")).orElseGet(() -> \"localhost\")\n            + \":\"\n            + Optional.ofNullable(System.getenv(\"PORT\")).orElseGet(() -> \"8080\")\n            + \"/myapp/\";\n```\n\n\u4e00\u5fdc deprecated \u306b\u306a\u3063\u3066\u3044\u308b\u505c\u6b62\u51e6\u7406\u3082\u4fee\u6b63\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n- \u5909\u66f4\u524d\n  - `server.stop();`\n- \u5909\u66f4\u5f8c\n  - `server.shutdownNow();`\n\n#### 3. Uber JAR \u306e\u69cb\u6210\n\n`maven-shade-plugin` \u3092\u7528\u3044\u3066 **Uber JAR** \u3092\u69cb\u6210\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```xml\n<plugin>\n    <groupId>org.apache.maven.plugins</groupId>\n    <artifactId>maven-shade-plugin</artifactId>\n    <version>2.4.3</version>\n    <executions>\n        <execution>\n            <phase>package</phase>\n            <goals>\n                <goal>shade</goal>\n            </goals>\n            <configuration>\n                <transformers>\n                    <transformer\n                            implementation=\"org.apache.maven.plugins.shade.resource.ServicesResourceTransformer\"/>\n                    <transformer\n                            implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\">\n                        <manifestEntries>\n                            <Main-Class>com.oracle.jp.shinyay.grizzly.Main</Main-Class>\n                        </manifestEntries>\n                    </transformer>\n                </transformers>\n            </configuration>\n        </execution>\n    </executions>\n    <configuration>\n        <createDependencyReducedPom>true</createDependencyReducedPom>\n        <filters>\n            <filter>\n                <artifact>*:*</artifact>\n                <excludes>\n                    <exclude>META-INF/*.SF</exclude>\n                    <exclude>META-INF/*.DSA</exclude>\n                    <exclude>META-INF/*.RSA</exclude>\n                </excludes>\n            </filter>\n        </filters>\n    </configuration>\n</plugin>\n```\n\n### accs-maven-plugin \u306e\u4f9d\u5b58\u95a2\u4fc2\u8ffd\u52a0\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b **accs-maven-plugin** \u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u307e\u305f\u3042\u308f\u305b\u3066\u3001**scs-maven-plugin** \u3082\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\n\n```xml\n<plugin>\n    <groupId>com.oracle.jp.shinyay</groupId>\n    <artifactId>accs-maven-plugin</artifactId>\n    <version>1.0-SNAPSHOT</version>\n    <configuration>\n        <region>emea</region>\n        <identitydomain>${opc.identitydomain}</identitydomain>>\n        <user>${opc.user}</user>\n        <password>${opc.password}</password>\n        <storage>${scs.container}</storage>\n        <appName>my-sample</appName>\n        <runtime>java</runtime>\n        <subscription>Hourly</subscription>\n        <archiveURL>${scs.container}/${project.name}-${project.version}.zip</archiveURL>\n        <metaJsonPath>${project.basedir}\\metafiles</metaJsonPath>\n        <archiveName>${project.name}-${project.version}</archiveName>\n        <majorVersion>8</majorVersion>\n        <command>java -jar ${project.artifactId}-${project.version}.jar</command>\n        <version>${project.version}</version>\n        <memory>1G</memory>\n        <instances>1</instances>\n    </configuration>\n</plugin>\n<plugin>\n    <groupId>com.oracle.jp.shinyay</groupId>\n    <artifactId>scs-maven-plugin</artifactId>\n    <version>1.0</version>\n    <configuration>\n        <identitydomain>${opc.identitydomain}</identitydomain>\n        <user>${opc.user}</user>\n        <password>${opc.password}</password>\n        <storage>${scs.container}</storage>\n        <object>${project.name}-${project.version}.zip</object>\n    </configuration>\n</plugin>\n```\n\n\u4ee5\u4e0b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u3001\u5b9f\u969b\u306e\u5024\u306b\u7f6e\u304d\u63db\u3048\u308b\u304b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u4f7f\u7528\u3057\u3066\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n- opc.identitydomain: \u30a2\u30a4\u30c7\u30f3\u30c6\u30a3\u30c6\u30a3\u30c9\u30e1\u30a4\u30f3\u540d\n- opc.user: \u30e6\u30fc\u30b6\u540d\n- opc.password: \u30d1\u30b9\u30ef\u30fc\u30c9\n- scs.container: Storage Cloud \u30b3\u30f3\u30c6\u30ca\u540d\n\n### \u5b9f\u884c\n\n\u4ee5\u4e0b\u306e\u9806\u3067 Maven \u30b4\u30fc\u30eb\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\n\n- `mvn compile`: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\n- `mvn package`: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u5316(Uber JAR \u5316)\n- `mvn accs:create-manifest`: manifest.json \u306e\u751f\u6210\n- `mvn accs:create-deployment`: deployment.json \u306e\u751f\u6210\n- `mvn scs:upload`: Storage Cloud \u30b3\u30f3\u30c6\u30ca\u3078\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n- `mvn accs:create`: ACCS \u3078\u306e\u30c7\u30d7\u30ed\u30a4 \n\n\n## \u307e\u3068\u3081\n\n\u3053\u306eMaven \u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u3046\u3068\u30d6\u30e9\u30a6\u30b6\u3092\u4f7f\u3063\u305f\u308a\u3001\u5225\u9014\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u306a\u304f\u3066\u3082\u64cd\u4f5c\u304c\u5b8c\u7d50\u3059\u308b\u306e\u3067\u3001ACCS \u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u304c\u968f\u5206\u6357\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u3068\u306f\u8a00\u3048\u3001ACCS \u306e\u64cd\u4f5c\u81ea\u4f53\u306f\u4e00\u89a7\u8868\u793a\u3068\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30c7\u30d7\u30ed\u30a4\u3057\u304b\u5b9f\u88c5\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u4ed6\u306b\u3082\u5b9f\u88c5\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n### GitHub\n- https://github.com/shinyay/accs-maven-plugin/tree/1.0.0\n", "tags": ["Maven", "Cloud", "docker", "container", "oracle"]}