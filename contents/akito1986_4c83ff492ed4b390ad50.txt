{"context": " More than 1 year has passed since last update.treasuredata\u3092\u4f7f\u3063\u3066\u307f\u305f\u306e\u3067\u30e1\u30e2\u30e1\u30e2\u3002\n\n\u80cc\u666f\n\u4f7f\u3046\u5951\u6a5f\u3068\u306f\u76f4\u63a5\u95a2\u4fc2\u306f\u306a\u3044\u3051\u3069\u30ed\u30b0\u306b\u3064\u3044\u3066\u3001\u8272\u3005\u601d\u3046\u3068\u3053\u308d\u304c\u3042\u3063\u305f\u3002\n\u8272\u3005\u601d\u3046\u3068\u3053\u308d\u3068\u306f\u30fb\u30fb\u30fb\n\n\u30ed\u30b0\u306f\u91cd\u8981\n\u30ed\u30b0\u306f\u7ba1\u7406\u304c\u5927\u5909\n\u30ed\u30b0\u306f\u6d88\u3057\u305f\u304f\u306a\u3044\n\u30ed\u30b0\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306f\u5909\u66f4\u3055\u308c\u3084\u3059\u3044\n\n\u3067\u3042\u308b\u3002\n\u300c\u30ed\u30b0\u306f\u91cd\u8981\u300d\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30a8\u30f3\u30b8\u30cb\u30a2\u306e\u307f\u306a\u3089\u305a\u60c5\u5831\u7cfb\u306e\u30a8\u30f3\u30b8\u30cb\u30a2\u306a\u3089\u540c\u610f\u3057\u3066\u304f\u308c\u308b\u3068\u601d\u3046\u3002\n\u300c\u3048\u3063\u3053\u308c\u52d5\u304b\u306a\u3044\u3093\u3060\u3051\u3069\uff1f\u300d\u3063\u3066\u8a00\u308f\u308c\u305f\u3068\u304d\u306b\u307e\u305a\u898b\u308b\u306e\u304c\u30ed\u30b0\u3060\u3082\u306e\u3002\n\u300c\u30ed\u30b0\u306f\u7ba1\u7406\u304c\u5927\u5909\u300d\u306f\u300c\u30ed\u30b0\u306f\u91cd\u8981\u300d\u306e\u305f\u3081\u3082\u3042\u308b\u306e\u3060\u304c\u3001\u91cd\u8981\u3060\u304b\u3089\u3053\u305d\u6d88\u3057\u305f\u304f\u306a\u304f\u3001\u3069\u3093\u3069\u3093\u5897\u3048\u7d9a\u3051\u3066\u3057\u307e\u3044\u30c7\u30a3\u30b9\u30af\u304c\u3044\u3063\u3071\u3044\u306b\u306a\u3063\u3066\u3082\u3001\u6d88\u3057\u305f\u304f\u306a\u3044\u304b\u3089\u30c6\u30fc\u30d7\u306b\u66f8\u304d\u51fa\u3057\u4fdd\u5b58\u3059\u308b\u3063\u3066\u3053\u3068\u304c\u5f80\u3005\u306b\u3057\u3066\u3042\u308b\u3002\n\u300c\u30ed\u30b0\u306f\u6d88\u3057\u305f\u304f\u306a\u3044\u300d\u306f\u300c\u30ed\u30b0\u306f\u7ba1\u7406\u304c\u5927\u5909\u300d\u3067\u8a18\u8f09\u3057\u3066\u3057\u307e\u3063\u305f\u3002\u3002\u3002\n\u300c\u30ed\u30b0\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306f\u5909\u66f4\u3055\u308c\u3084\u3059\u3044\u300d\u306f\u3001\u307e\u3042\u30b7\u30b9\u30c6\u30e0\u3092\u30b9\u30c6\u30c3\u30d7\u958b\u767a\u3059\u308b\u5834\u5408\u306f\u5f80\u3005\u306b\u3057\u3066\u3042\u308b\u3002\u30b7\u30b9\u30c6\u30e0\u306b\u5bfe\u3059\u308b\u7fd2\u719f\u5ea6\u304c\u4e0a\u304c\u308b\u3068\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3082\u5909\u3048\u305f\u304f\u306a\u308b\u3002\nS3\u3068\u304b\u306e\u30af\u30e9\u30a6\u30c9\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u5165\u308c\u308c\u3070\u3048\u3048\u3084\u3093\uff1f\u3068\u304b\u3082\u601d\u3063\u305f\u3051\u3069\u3001\u554f\u984c\u767a\u751f\u6642\u306b\u306f\u30ed\u30b0\u3092\u624b\u5143\u306b\u3082\u3063\u3066\u304d\u3066\u3001\u30ed\u30b0\u89e3\u6790\u30fb\u30fb\u30fb\u5104\u52ab\u3068\u601d\u3063\u3066\u3057\u307e\u3046\u81ea\u5206\u304c\u3044\u305f\u3002\n\u307e\u3042\u305d\u3093\u306a\u4e2d\u3001\u771f\u5263\u306b\u4f55\u304b\u3092\u4f7f\u3044\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u305f\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3060\u3051\u3069\u7e01\u304c\u3042\u3063\u3066TreasureData\u3092\u4f7f\u3046\u6a5f\u4f1a\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u4e3b\u306b\u30ed\u30b0\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3068\u3057\u3066\u3069\u3046\u306a\u3093\u3060\u308d\u3046\u3068\u601d\u3063\u3066\u89e6\u3063\u3066\u307f\u305f\u306e\u3067\u3001\u5099\u5fd8\u306e\u305f\u3081\u306b\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002\n\u4eca\u56de\u306f\u74b0\u5883\u6e96\u5099\u307e\u3067\u3002\n\u4ee5\u4e0b\u74b0\u5883\u60c5\u5831\u3002\n\nubuntu: 12.04\nruby: 2.1.2p95\nrubygem: 2.2.2\n\n\nTreasureData\u3068\u306f\nwiki\u3068\u304b\u3042\u308c\u3070\u3044\u3044\u3093\u3060\u3051\u3069\u7121\u3055\u3052\u306a\u306e\u3067\u3001\u4e00\u8a00\u3067\u8a00\u3046\u3068\u30af\u30e9\u30a6\u30c9\u4e0a\u306b\u3042\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u601d\u3063\u3066\u3082\u3089\u3048\u308c\u3070\u3044\u3044\u6c17\u304c\u3059\u308b\u3002\u305f\u3060\u5927\u5bb9\u91cf\u30c7\u30fc\u30bf\u3092\u89e3\u6790\u3059\u308b\u305f\u3081\u306b\u30af\u30a8\u30ea\u306fHadoop\u4f7f\u3048\u307e\u3063\u305b\u3063\u3066\u611f\u3058\u3002\n\nSignUp\nAWS\u4e0a\u306b\u3042\u308bWebConsole\u3067\u7121\u6599\u3067\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7\u304c\u3067\u304d\u3001\u65e9\u901f\u4f7f\u3044\u59cb\u3081\u3089\u308c\u308b\u3002\n\n\nAPI\u30ad\u30fc\u306e\u53d6\u5f97\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306aAPI\u30ad\u30fc\u3092\u53d6\u3063\u3066\u304a\u304f\u3002\nWebConsole\u304b\u3089\u30ed\u30b0\u30a4\u30f3\u5f8c\u3001\n\n\u753b\u9762\u53f3\u4e0a\u306e\u30d7\u30eb\u30c0\u30a6\u30f3\u30e1\u30cb\u30e5\u304b\u3089My Profile\u3092\u9078\u629e\u3002\n\nMy Profile\u753b\u9762\u3067API Keys\u306e\u30c6\u30ad\u30b9\u30c8\u30dc\u30c3\u30af\u30b9\u306bmy_td_password\u3092\u5165\u529b\u5f8cShow Keys\u30bf\u30d6\u3092\u9078\u629e\u3059\u308b\u3002\n\u305d\u3046\u3059\u308b\u3068API\u30ad\u30fc\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002\n\nTreasureData Tool Belt\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nTool Belt\u3063\u3066\u4e00\u822c\u7684\u306a\u306e\u304b\u306a\uff1f\u307e\u3042RubyBase\u306eCLI\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30c4\u30fc\u30eb\u3067\u3042\u308b\u3002\nWebConsole\u3067\u3082\u30ed\u30b0\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3084\u30af\u30a8\u30ea\u3092\u6295\u3052\u3089\u308c\u308b\u3051\u3069\u3001\u57fa\u672c\u306f\u3053\u306eTool Belt\u3084JDBC\u3001RestAPI\u7d4c\u7531\u3067\u4f7f\u3046\u3068\u601d\u3046\u3002\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067TD Tool Belt\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\ninstall_td\n$ gem install td\n$ td --version\n0.11.3\n$ \n\n\n\n\u4f7f\u3063\u3066\u307f\u308b\n\n\u74b0\u5883\u5909\u6570\u8a2d\u5b9a\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067TreasureData\u306eAPI\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u6307\u5b9a\u3059\u308b\u3002\n\nset_env\n$ export TD_API_SERVER=https://api.treasuredata.com\n$ env | grep TD\nTD_API_SERVER=https://api.treasuredata.com\n\n\n\n\u30ed\u30b0\u30a4\u30f3\nTD Tool Belt\u7d4c\u7531\u3067TreasureData\u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\n\nlogin_td\n$ td account -f\nEnter your Treasure Data credentials.\nEmail: ${my_addr}\nPassword (typing will be hidden): ${my_passwd} \nAuthenticated successfully.\nUse 'td db:create <db_name>' to create a database.\n$\n\n\n\n\u30af\u30a8\u30ea\u5b9f\u884c\nTreasureData\u3067\u306f\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\ntd_db\n$ td db:list # DB\u4e00\u89a7\u8868\u793a\n+-------------+-------+\n| Name        | Count |\n+-------------+-------+\n| sample_db   | 5000  |\n+-------------+-------+\n1 rows in set\n$ td table:list sample_db # \u30c6\u30fc\u30d6\u30eb\u4e00\u89a7\u8868\u793a\n+-----------+------------+------+-------+--------+---------------------------+---------------------------+----------------------------------------------------------------------------------------------------------+\n| Database  | Table      | Type | Count | Size   | Last import               | Last log timestamp        | Schema                                                                                                   |\n+-----------+------------+------+-------+--------+---------------------------+---------------------------+----------------------------------------------------------------------------------------------------------+\n| sample_db | www_access | log  | 5,000 | 0.0 GB | 2014-03-14 01:12:32 +0900 | 2013-09-07 10:13:45 +0900 | host:string, path:string, method:string, referer:string, code:long, agent:string, user:string, size:long |\n+-----------+------------+------+-------+--------+---------------------------+---------------------------+----------------------------------------------------------------------------------------------------------+\n1 row in set\n$\n\n\nsample_db.www_access\u306e\u30ec\u30b3\u30fc\u30c9\u6570\u3092\u53d6\u5f97\u3059\u308b\u30af\u30a8\u30ea\u3092\u4ee5\u4e0b\u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\ntd_query\n$ td query -w -t hive -d sample_db \"SELECT COUNT(1) FROM www_access\"\nJob 13623610 is queued.\nUse 'td job:show 13623610' to show the status.\nqueued...\n  started at 2014-08-13T14:15:54Z\n  14/08/13 14:16:00 WARN conf.Configuration: org.apache.hadoop.hive.conf.LoopingByteArrayInputStream@5adeeabd:an attempt to override final parameter: mapreduce.input.fileinputformat.split.minsize;  Ignoring.\n  Hive history file=/mnt/hive/tmp/4115/hive_job_log_e8d443fc-5e93-4ff0-a53a-983786540afc_1000320679.txt\n  Total jobs = 1\n  Launching Job 1 out of 1\n  Number of reduce tasks determined at compile time: 1\n  In order to change the average load for a reducer (in bytes):\n    set hive.exec.reducers.bytes.per.reducer=<number>\n  In order to limit the maximum number of reducers:\n    set hive.exec.reducers.max=<number>\n  In order to set a constant number of reducers:\n    set mapreduce.job.reduces=<number>\n  **\n  ** WARNING: time index filtering is not set!\n  ** This query could be very slow as a result.\n  ** Please see http://docs.treasure-data.com/articles/performance-tuning#leveraging-time-based-partitioning\n  **\n  Starting Job = job_1407740893231_6027, Tracking URL = http://ip-10-145-145-114.ec2.internal:8088/proxy/application_1407740893231_6027/\n  Kill Command = /usr/lib/hadoop/bin/hadoop job  -kill job_1407740893231_6027\n  Hadoop job information for Stage-1: number of mappers: 1; number of reducers: 1\n  2014-08-13 14:16:13,982 Stage-1 map = 0%,  reduce = 0%\n  2014-08-13 14:16:21,301 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 12.64 sec\n  2014-08-13 14:16:27,550 Stage-1 map = 100%,  reduce = 100%, Cumulative CPU 14.66 sec\n  finished at 2014-08-13T14:16:31Z\n  MapReduce Total cumulative CPU time: 14 seconds 660 msec\n  Ended Job = job_1407740893231_6027\n  MapReduce Jobs Launched: \n  Job 0: Map: 1  Reduce: 1   Cumulative CPU: 14.66 sec   HDFS Read: 2574 HDFS Write: 104 SUCCESS\n  Total MapReduce CPU Time Spent: 14 seconds 660 msec\n  OK\n  MapReduce time taken: 24.295 seconds\n  Fetching results...\n  Total CPU Time: 14660\n  Time taken: 24.663 seconds\nStatus     : success\nResult     :\nWARNING: the job result is being downloaded...: 24 B / 100.0%                                                                                                   +------+                                          \n| _c0  |\n+------+\n| 5000 |\n+------+\n1 row in set\n$\n\n\n\u30c7\u30fc\u30bf\u4ef6\u6570\u304c5000\u4ef6\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\u305d\u3057\u3066\u88cf\u3067\u306fmap reduces\u51e6\u7406\u304c\u306f\u3057\u3063\u3066\u3044\u308b\u3063\u307d\u3044\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\u30c7\u30fc\u30bf\u30a4\u30f3\u30dd\u30fc\u30c8\u90e8\u5206\u306b\u3064\u3044\u3066\u306f\u6b21\u56de\uff01\uff01\ntreasuredata\u3092\u4f7f\u3063\u3066\u307f\u305f\u306e\u3067\u30e1\u30e2\u30e1\u30e2\u3002\n\n## \u80cc\u666f\n\u4f7f\u3046\u5951\u6a5f\u3068\u306f\u76f4\u63a5\u95a2\u4fc2\u306f\u306a\u3044\u3051\u3069\u30ed\u30b0\u306b\u3064\u3044\u3066\u3001\u8272\u3005\u601d\u3046\u3068\u3053\u308d\u304c\u3042\u3063\u305f\u3002\n\n\u8272\u3005\u601d\u3046\u3068\u3053\u308d\u3068\u306f\u30fb\u30fb\u30fb\n\n* \u30ed\u30b0\u306f\u91cd\u8981\n* \u30ed\u30b0\u306f\u7ba1\u7406\u304c\u5927\u5909\n* \u30ed\u30b0\u306f\u6d88\u3057\u305f\u304f\u306a\u3044\n* \u30ed\u30b0\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306f\u5909\u66f4\u3055\u308c\u3084\u3059\u3044\n\n\u3067\u3042\u308b\u3002\n\n\u300c\u30ed\u30b0\u306f\u91cd\u8981\u300d\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30a8\u30f3\u30b8\u30cb\u30a2\u306e\u307f\u306a\u3089\u305a\u60c5\u5831\u7cfb\u306e\u30a8\u30f3\u30b8\u30cb\u30a2\u306a\u3089\u540c\u610f\u3057\u3066\u304f\u308c\u308b\u3068\u601d\u3046\u3002\n\u300c\u3048\u3063\u3053\u308c\u52d5\u304b\u306a\u3044\u3093\u3060\u3051\u3069\uff1f\u300d\u3063\u3066\u8a00\u308f\u308c\u305f\u3068\u304d\u306b\u307e\u305a\u898b\u308b\u306e\u304c\u30ed\u30b0\u3060\u3082\u306e\u3002\n\n\u300c\u30ed\u30b0\u306f\u7ba1\u7406\u304c\u5927\u5909\u300d\u306f\u300c\u30ed\u30b0\u306f\u91cd\u8981\u300d\u306e\u305f\u3081\u3082\u3042\u308b\u306e\u3060\u304c\u3001\u91cd\u8981\u3060\u304b\u3089\u3053\u305d\u6d88\u3057\u305f\u304f\u306a\u304f\u3001\u3069\u3093\u3069\u3093\u5897\u3048\u7d9a\u3051\u3066\u3057\u307e\u3044\u30c7\u30a3\u30b9\u30af\u304c\u3044\u3063\u3071\u3044\u306b\u306a\u3063\u3066\u3082\u3001\u6d88\u3057\u305f\u304f\u306a\u3044\u304b\u3089\u30c6\u30fc\u30d7\u306b\u66f8\u304d\u51fa\u3057\u4fdd\u5b58\u3059\u308b\u3063\u3066\u3053\u3068\u304c\u5f80\u3005\u306b\u3057\u3066\u3042\u308b\u3002\n\n\u300c\u30ed\u30b0\u306f\u6d88\u3057\u305f\u304f\u306a\u3044\u300d\u306f\u300c\u30ed\u30b0\u306f\u7ba1\u7406\u304c\u5927\u5909\u300d\u3067\u8a18\u8f09\u3057\u3066\u3057\u307e\u3063\u305f\u3002\u3002\u3002\n\n\u300c\u30ed\u30b0\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306f\u5909\u66f4\u3055\u308c\u3084\u3059\u3044\u300d\u306f\u3001\u307e\u3042\u30b7\u30b9\u30c6\u30e0\u3092\u30b9\u30c6\u30c3\u30d7\u958b\u767a\u3059\u308b\u5834\u5408\u306f\u5f80\u3005\u306b\u3057\u3066\u3042\u308b\u3002\u30b7\u30b9\u30c6\u30e0\u306b\u5bfe\u3059\u308b\u7fd2\u719f\u5ea6\u304c\u4e0a\u304c\u308b\u3068\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3082\u5909\u3048\u305f\u304f\u306a\u308b\u3002\n\nS3\u3068\u304b\u306e\u30af\u30e9\u30a6\u30c9\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u5165\u308c\u308c\u3070\u3048\u3048\u3084\u3093\uff1f\u3068\u304b\u3082\u601d\u3063\u305f\u3051\u3069\u3001\u554f\u984c\u767a\u751f\u6642\u306b\u306f\u30ed\u30b0\u3092\u624b\u5143\u306b\u3082\u3063\u3066\u304d\u3066\u3001\u30ed\u30b0\u89e3\u6790\u30fb\u30fb\u30fb\u5104\u52ab\u3068\u601d\u3063\u3066\u3057\u307e\u3046\u81ea\u5206\u304c\u3044\u305f\u3002\n\n\u307e\u3042\u305d\u3093\u306a\u4e2d\u3001\u771f\u5263\u306b\u4f55\u304b\u3092\u4f7f\u3044\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u305f\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3060\u3051\u3069\u7e01\u304c\u3042\u3063\u3066TreasureData\u3092\u4f7f\u3046\u6a5f\u4f1a\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u4e3b\u306b\u30ed\u30b0\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3068\u3057\u3066\u3069\u3046\u306a\u3093\u3060\u308d\u3046\u3068\u601d\u3063\u3066\u89e6\u3063\u3066\u307f\u305f\u306e\u3067\u3001\u5099\u5fd8\u306e\u305f\u3081\u306b\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002\n\n\u4eca\u56de\u306f\u74b0\u5883\u6e96\u5099\u307e\u3067\u3002\n\n\u4ee5\u4e0b\u74b0\u5883\u60c5\u5831\u3002\n\n* ubuntu: 12.04\n* ruby: 2.1.2p95\n* rubygem: 2.2.2\n\n\n## TreasureData\u3068\u306f\nwiki\u3068\u304b\u3042\u308c\u3070\u3044\u3044\u3093\u3060\u3051\u3069\u7121\u3055\u3052\u306a\u306e\u3067\u3001\u4e00\u8a00\u3067\u8a00\u3046\u3068\u30af\u30e9\u30a6\u30c9\u4e0a\u306b\u3042\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u601d\u3063\u3066\u3082\u3089\u3048\u308c\u3070\u3044\u3044\u6c17\u304c\u3059\u308b\u3002\u305f\u3060\u5927\u5bb9\u91cf\u30c7\u30fc\u30bf\u3092\u89e3\u6790\u3059\u308b\u305f\u3081\u306b\u30af\u30a8\u30ea\u306fHadoop\u4f7f\u3048\u307e\u3063\u305b\u3063\u3066\u611f\u3058\u3002\n\n## SignUp\nAWS\u4e0a\u306b\u3042\u308b[WebConsole](https://console.treasuredata.com/users/sign_up)\u3067\u7121\u6599\u3067\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7\u304c\u3067\u304d\u3001\u65e9\u901f\u4f7f\u3044\u59cb\u3081\u3089\u308c\u308b\u3002\n\n![td_signup.png](https://qiita-image-store.s3.amazonaws.com/0/46472/cd86c3dc-ff0a-5dd2-b86f-cc5c2a550692.png \"td_signup.png\")\n\n## API\u30ad\u30fc\u306e\u53d6\u5f97\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306aAPI\u30ad\u30fc\u3092\u53d6\u3063\u3066\u304a\u304f\u3002\nWebConsole\u304b\u3089\u30ed\u30b0\u30a4\u30f3\u5f8c\u3001\n![td_signin.png](https://qiita-image-store.s3.amazonaws.com/0/46472/5cd69e77-1c32-c915-ec7d-be7c6561e591.png \"td_signin.png\")\n\n\u753b\u9762\u53f3\u4e0a\u306e\u30d7\u30eb\u30c0\u30a6\u30f3\u30e1\u30cb\u30e5\u304b\u3089`My Profile`\u3092\u9078\u629e\u3002\n\n![td_get_apikey.png](https://qiita-image-store.s3.amazonaws.com/0/46472/d8e02fee-8354-547c-01c4-b22c0ae7126c.png \"td_get_apikey.png\")\n\n`My Profile`\u753b\u9762\u3067`API Keys`\u306e\u30c6\u30ad\u30b9\u30c8\u30dc\u30c3\u30af\u30b9\u306b`my_td_password`\u3092\u5165\u529b\u5f8c`Show Keys`\u30bf\u30d6\u3092\u9078\u629e\u3059\u308b\u3002\n\n\u305d\u3046\u3059\u308b\u3068API\u30ad\u30fc\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002\n\n## TreasureData Tool Belt\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nTool Belt\u3063\u3066\u4e00\u822c\u7684\u306a\u306e\u304b\u306a\uff1f\u307e\u3042RubyBase\u306eCLI\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30c4\u30fc\u30eb\u3067\u3042\u308b\u3002\nWebConsole\u3067\u3082\u30ed\u30b0\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3084\u30af\u30a8\u30ea\u3092\u6295\u3052\u3089\u308c\u308b\u3051\u3069\u3001\u57fa\u672c\u306f\u3053\u306eTool Belt\u3084JDBC\u3001RestAPI\u7d4c\u7531\u3067\u4f7f\u3046\u3068\u601d\u3046\u3002\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067`TD Tool Belt`\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n```cmd:install_td\n$ gem install td\n$ td --version\n0.11.3\n$ \n```\n\n## \u4f7f\u3063\u3066\u307f\u308b\n### \u74b0\u5883\u5909\u6570\u8a2d\u5b9a\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067TreasureData\u306eAPI\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n```cmd:set_env\n$ export TD_API_SERVER=https://api.treasuredata.com\n$ env | grep TD\nTD_API_SERVER=https://api.treasuredata.com\n```\n\n### \u30ed\u30b0\u30a4\u30f3\n`TD Tool Belt`\u7d4c\u7531\u3067TreasureData\u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\n\n```cmd:login_td\n$ td account -f\nEnter your Treasure Data credentials.\nEmail: ${my_addr}\nPassword (typing will be hidden): ${my_passwd} \nAuthenticated successfully.\nUse 'td db:create <db_name>' to create a database.\n$\n````\n\n### \u30af\u30a8\u30ea\u5b9f\u884c\nTreasureData\u3067\u306f\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\n```cmd:td_db\n$ td db:list # DB\u4e00\u89a7\u8868\u793a\n+-------------+-------+\n| Name        | Count |\n+-------------+-------+\n| sample_db   | 5000  |\n+-------------+-------+\n1 rows in set\n$ td table:list sample_db # \u30c6\u30fc\u30d6\u30eb\u4e00\u89a7\u8868\u793a\n+-----------+------------+------+-------+--------+---------------------------+---------------------------+----------------------------------------------------------------------------------------------------------+\n| Database  | Table      | Type | Count | Size   | Last import               | Last log timestamp        | Schema                                                                                                   |\n+-----------+------------+------+-------+--------+---------------------------+---------------------------+----------------------------------------------------------------------------------------------------------+\n| sample_db | www_access | log  | 5,000 | 0.0 GB | 2014-03-14 01:12:32 +0900 | 2013-09-07 10:13:45 +0900 | host:string, path:string, method:string, referer:string, code:long, agent:string, user:string, size:long |\n+-----------+------------+------+-------+--------+---------------------------+---------------------------+----------------------------------------------------------------------------------------------------------+\n1 row in set\n$\n```\n\n`sample_db.www_access`\u306e\u30ec\u30b3\u30fc\u30c9\u6570\u3092\u53d6\u5f97\u3059\u308b\u30af\u30a8\u30ea\u3092\u4ee5\u4e0b\u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n```cmd:td_query\n$ td query -w -t hive -d sample_db \"SELECT COUNT(1) FROM www_access\"\nJob 13623610 is queued.\nUse 'td job:show 13623610' to show the status.\nqueued...\n  started at 2014-08-13T14:15:54Z\n  14/08/13 14:16:00 WARN conf.Configuration: org.apache.hadoop.hive.conf.LoopingByteArrayInputStream@5adeeabd:an attempt to override final parameter: mapreduce.input.fileinputformat.split.minsize;  Ignoring.\n  Hive history file=/mnt/hive/tmp/4115/hive_job_log_e8d443fc-5e93-4ff0-a53a-983786540afc_1000320679.txt\n  Total jobs = 1\n  Launching Job 1 out of 1\n  Number of reduce tasks determined at compile time: 1\n  In order to change the average load for a reducer (in bytes):\n    set hive.exec.reducers.bytes.per.reducer=<number>\n  In order to limit the maximum number of reducers:\n    set hive.exec.reducers.max=<number>\n  In order to set a constant number of reducers:\n    set mapreduce.job.reduces=<number>\n  **\n  ** WARNING: time index filtering is not set!\n  ** This query could be very slow as a result.\n  ** Please see http://docs.treasure-data.com/articles/performance-tuning#leveraging-time-based-partitioning\n  **\n  Starting Job = job_1407740893231_6027, Tracking URL = http://ip-10-145-145-114.ec2.internal:8088/proxy/application_1407740893231_6027/\n  Kill Command = /usr/lib/hadoop/bin/hadoop job  -kill job_1407740893231_6027\n  Hadoop job information for Stage-1: number of mappers: 1; number of reducers: 1\n  2014-08-13 14:16:13,982 Stage-1 map = 0%,  reduce = 0%\n  2014-08-13 14:16:21,301 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 12.64 sec\n  2014-08-13 14:16:27,550 Stage-1 map = 100%,  reduce = 100%, Cumulative CPU 14.66 sec\n  finished at 2014-08-13T14:16:31Z\n  MapReduce Total cumulative CPU time: 14 seconds 660 msec\n  Ended Job = job_1407740893231_6027\n  MapReduce Jobs Launched: \n  Job 0: Map: 1  Reduce: 1   Cumulative CPU: 14.66 sec   HDFS Read: 2574 HDFS Write: 104 SUCCESS\n  Total MapReduce CPU Time Spent: 14 seconds 660 msec\n  OK\n  MapReduce time taken: 24.295 seconds\n  Fetching results...\n  Total CPU Time: 14660\n  Time taken: 24.663 seconds\nStatus     : success\nResult     :\nWARNING: the job result is being downloaded...: 24 B / 100.0%                                                                                                   +------+                                          \n| _c0  |\n+------+\n| 5000 |\n+------+\n1 row in set\n$\n```\n\n\u30c7\u30fc\u30bf\u4ef6\u6570\u304c5000\u4ef6\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\u305d\u3057\u3066\u88cf\u3067\u306f`map reduces`\u51e6\u7406\u304c\u306f\u3057\u3063\u3066\u3044\u308b\u3063\u307d\u3044\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\n\u30c7\u30fc\u30bf\u30a4\u30f3\u30dd\u30fc\u30c8\u90e8\u5206\u306b\u3064\u3044\u3066\u306f\u6b21\u56de\uff01\uff01\n", "tags": ["TreasureData", "log"]}