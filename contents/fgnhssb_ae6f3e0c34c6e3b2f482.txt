{"context": "\n\nimgur\u3068\u306f\uff1f\n\u3088\u304f\uff12\u3061\u3083\u3093\u3067\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u6700\u5f37\u753b\u50cf\u30a2\u30c3\u30d7\u30ed\u30fc\u30c0\u30fc\u306eimgur\u3001\u3054\u5b58\u77e5\u3067\u3057\u3087\u3046\u304b\uff1f\n\u533f\u540d\u3067\u753b\u50cf\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u304d\u3066\u3001\u306a\u304a\u304b\u3064\u7121\u671f\u9650\u3067\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u4fbf\u5229\u3067\u3059\u3002\n\u3053\u308c\u3092\u4eca\u56de\u306fPHP\u304b\u3089\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\u7d50\u679c\u306fjson\u3067\u53d6\u308c\u307e\u3059\u3002\n\u3061\u306a\u307f\u306bRuby\u7de8\u306a\u3089\u65e2\u5b58\u3067\u3042\u308a\u307e\u3057\u305f\u3002\u3053\u3061\u3089\u3067\u3059\u3002\n\u6700\u5f37\u306e\u753b\u50cf\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u30b5\u30a4\u30c8\u300cImgur.com\u300d\u306eAPI\u3092\u5229\u7528\u3059\u308b\uff08\u533f\u540d\u753b\u50cf\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u7de8)\n\nImgurAPI\u3092PHP\u3067\u5229\u7528\nAPI\u53e9\u3044\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u74b0\u5883\n\u30fbPHP7\n\n\u4f1a\u54e1\u767b\u9332\n\u307e\u305a\u306fimgur\u3067\u4f1a\u54e1\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u767b\u9332\u5f8c\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u53d6\u5f97\n\u4f1a\u54e1\u767b\u9332\u3057\u30ed\u30b0\u30a4\u30f3\u3057\u305f\u3089\u3001\u307e\u305a\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\nRegister an Application\n\u3092\u57cb\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\nApplication name\u3068Authorization type\u3092\u57cb\u3081\u307e\u3057\u3087\u3046\u3002\n\u4eca\u56de\u306fAnonymous\u306b\u3057\u307e\u3059\u3002\ncallback URL\u306f\u9069\u5207\u306a\u3082\u306e\u3092\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\u3042\u3068\u30e1\u30a2\u30c9\u3082\u5165\u529b\u3057\u307e\u3059\u3002\n\u4ee5\u4e0a\u3067Submit!\n\u767b\u9332\u5f8c\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3092\u63a7\u3048\u307e\u3059\u3002\n\n\n\u3055\u3063\u305d\u304fPHP\u3067\u5229\u7528\u3057\u3066\u307f\u308b\u3002\njson\u3067\u8fd4\u3063\u3066\u304f\u308b\u3088\u3046\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\u9069\u5f53\u306b\u5229\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nindex.php\n<?\nif(isset($_FILES['img'])) $img = $_FILES['img'];\nif(isset($_POST['submit'])){ \n if($img['name']==''){  \n  echo \"\u753b\u50cf\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\";\n }else{\n  $filename = $img['tmp_name'];  \n  $client_id=\"abb66f6794xa77c\";//\u5404\u81ea\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3092\u5165\u529b\n  $handle = fopen($filename, \"r\");\n  $data = fread($handle, filesize($filename));\n  $pvars   = array('image' => base64_encode($data));\n  $timeout = 30;\n  $curl = curl_init();\n  curl_setopt($curl, CURLOPT_URL, 'https://api.imgur.com/3/image.json');\n  curl_setopt($curl, CURLOPT_TIMEOUT, $timeout);\n  curl_setopt($curl, CURLOPT_HTTPHEADER, array('Authorization: Client-ID ' . $client_id));\n  curl_setopt($curl, CURLOPT_POST, 1);\n  curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);\n  curl_setopt($curl, CURLOPT_POSTFIELDS, $pvars);\n  $out = curl_exec($curl);\n  curl_close ($curl);\n  $pms = json_decode($out,true);\n  var_dump($pms);\n }\n} else {\nprint<<<EOF\n  <form action=\"index.php\" enctype=\"multipart/form-data\" method=\"POST\">\n  <input name=\"img\" size=\"35\" type=\"file\"/><br/>\n  <input type=\"submit\" name=\"submit\" value=\"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\"/>\n  </form>\nEOF;\n}\n\n\n#imgur\u3068\u306f\uff1f\n\n\u3088\u304f\uff12\u3061\u3083\u3093\u3067\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u6700\u5f37\u753b\u50cf\u30a2\u30c3\u30d7\u30ed\u30fc\u30c0\u30fc\u306eimgur\u3001\u3054\u5b58\u77e5\u3067\u3057\u3087\u3046\u304b\uff1f\n\u533f\u540d\u3067\u753b\u50cf\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u304d\u3066\u3001\u306a\u304a\u304b\u3064\u7121\u671f\u9650\u3067\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u4fbf\u5229\u3067\u3059\u3002\n\u3053\u308c\u3092\u4eca\u56de\u306fPHP\u304b\u3089\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\u7d50\u679c\u306fjson\u3067\u53d6\u308c\u307e\u3059\u3002\n\n\u3061\u306a\u307f\u306bRuby\u7de8\u306a\u3089\u65e2\u5b58\u3067\u3042\u308a\u307e\u3057\u305f\u3002\u3053\u3061\u3089\u3067\u3059\u3002\n[\u6700\u5f37\u306e\u753b\u50cf\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u30b5\u30a4\u30c8\u300cImgur.com\u300d\u306eAPI\u3092\u5229\u7528\u3059\u308b\uff08\u533f\u540d\u753b\u50cf\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u7de8)](http://qiita.com/AKB428/items/a5f68a3288cc596975ae)\n\n#ImgurAPI\u3092PHP\u3067\u5229\u7528\nAPI\u53e9\u3044\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n##\u74b0\u5883\n\u30fbPHP7\n\n##\u4f1a\u54e1\u767b\u9332\n\u307e\u305a\u306f[imgur](http://imgur.com)\u3067\u4f1a\u54e1\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u767b\u9332\u5f8c\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\n##\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u53d6\u5f97\n\u4f1a\u54e1\u767b\u9332\u3057\u30ed\u30b0\u30a4\u30f3\u3057\u305f\u3089\u3001\u307e\u305a\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n[Register an Application](https://api.imgur.com/oauth2/addclient)\n\u3092\u57cb\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n<img width=\"752\" src=\"https://qiita-image-store.s3.amazonaws.com/0/110510/bae5da66-7151-f079-7a53-44ea0e5e0da7.png\">\n\n\n\nApplication name\u3068Authorization type\u3092\u57cb\u3081\u307e\u3057\u3087\u3046\u3002\n\u4eca\u56de\u306fAnonymous\u306b\u3057\u307e\u3059\u3002\ncallback URL\u306f\u9069\u5207\u306a\u3082\u306e\u3092\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\u3042\u3068\u30e1\u30a2\u30c9\u3082\u5165\u529b\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0a\u3067Submit!\n\n\u767b\u9332\u5f8c\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3092\u63a7\u3048\u307e\u3059\u3002\n<img width=\"352\" src=\"http://1.bp.blogspot.com/-VcTfGBwRRVM/Unu7eZ9KRSI/AAAAAAAADS0/G51gyDi2pl8/s1600/0067.png\">\n\n##\u3055\u3063\u305d\u304fPHP\u3067\u5229\u7528\u3057\u3066\u307f\u308b\u3002\njson\u3067\u8fd4\u3063\u3066\u304f\u308b\u3088\u3046\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\u9069\u5f53\u306b\u5229\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```php:index.php\n<?\nif(isset($_FILES['img'])) $img = $_FILES['img'];\nif(isset($_POST['submit'])){ \n if($img['name']==''){  \n  echo \"\u753b\u50cf\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\";\n }else{\n  $filename = $img['tmp_name'];  \n  $client_id=\"abb66f6794xa77c\";//\u5404\u81ea\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3092\u5165\u529b\n  $handle = fopen($filename, \"r\");\n  $data = fread($handle, filesize($filename));\n  $pvars   = array('image' => base64_encode($data));\n  $timeout = 30;\n  $curl = curl_init();\n  curl_setopt($curl, CURLOPT_URL, 'https://api.imgur.com/3/image.json');\n  curl_setopt($curl, CURLOPT_TIMEOUT, $timeout);\n  curl_setopt($curl, CURLOPT_HTTPHEADER, array('Authorization: Client-ID ' . $client_id));\n  curl_setopt($curl, CURLOPT_POST, 1);\n  curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);\n  curl_setopt($curl, CURLOPT_POSTFIELDS, $pvars);\n  $out = curl_exec($curl);\n  curl_close ($curl);\n  $pms = json_decode($out,true);\n  var_dump($pms);\n }\n} else {\nprint<<<EOF\n  <form action=\"index.php\" enctype=\"multipart/form-data\" method=\"POST\">\n  <input name=\"img\" size=\"35\" type=\"file\"/><br/>\n  <input type=\"submit\" name=\"submit\" value=\"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\"/>\n  </form>\nEOF;\n}\n```\n", "tags": ["imgur", "PHP", "WebAPI"]}