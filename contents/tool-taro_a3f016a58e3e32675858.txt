{"context": "\n\n\u306f\u3058\u3081\u306b\n\u4e8b\u524d\u306b\u4ee5\u4e0b\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\nJSch\n\n\nhttp://www.jcraft.com/jsch/\n\u203b\"jsch-0.1.54.jar\"\u306e\u30ea\u30f3\u30af\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n\n\n\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3044\u307e\u3059\u3002\n\nput.txt(UTF-8)\n\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3067\u3059\n\n\n\n\n\u5b9f\u88c5\u4f8b\n\u4eca\u56de\u306f\u3001\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u5185\u5bb9\u78ba\u8a8d\u3059\u308b\u3053\u3068\u3068\u3057\u307e\u3059\u3002\n\u30b5\u30f3\u30d7\u30eb\u3067\u306f\u3001\u52d5\u4f5c\u78ba\u8a8d\u3057\u3084\u3059\u3044\u3088\u3046\u306bmain\u30e1\u30bd\u30c3\u30c9\u3067\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\nSFTPTest.java\nimport com.jcraft.jsch.ChannelSftp;\nimport com.jcraft.jsch.JSch;\nimport com.jcraft.jsch.JSchException;\nimport com.jcraft.jsch.Session;\nimport com.jcraft.jsch.SftpException;\nimport java.io.BufferedInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.nio.charset.StandardCharsets;\n\n/**\n *\n * @author tool-taro.com\n */\npublic class SFTPTest {\n\n    public static void main(String[] args) throws JSchException, SftpException, FileNotFoundException, IOException {\n\n        //\u30b5\u30fc\u30d0\n        String host = \"\u30db\u30b9\u30c8\u540d\";\n        //\u30dd\u30fc\u30c8\n        int port = 22;\n        //\u30e6\u30fc\u30b6\n        String user = \"\u30e6\u30fc\u30b6\";\n        //\u30d1\u30b9\u30ef\u30fc\u30c9\n        String password = \"\u30d1\u30b9\u30ef\u30fc\u30c9\";\n        //\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n        String dir = \"/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\";\n        //\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u30fb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u540d\n        String fileName = \"put.txt\";\n\n        JSch jsch;\n        Session session = null;\n        ChannelSftp channel = null;\n        FileInputStream fin = null;\n        BufferedInputStream bin = null;\n\n        try {\n            //\u63a5\u7d9a\n            jsch = new JSch();\n            session = jsch.getSession(user, host, port);\n            //known_hosts\u306e\u30c1\u30a7\u30c3\u30af\u3092\u30b9\u30ad\u30c3\u30d7\n            session.setConfig(\"StrictHostKeyChecking\", \"no\");\n            session.setPassword(password);\n            session.connect();\n\n            channel = (ChannelSftp) session.openChannel(\"sftp\");\n            channel.connect();\n            //\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u79fb\u52d5\n            channel.cd(dir);\n\n            //\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n            fin = new FileInputStream(fileName);\n            channel.put(fin, fileName);\n\n            //\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n            bin = new BufferedInputStream(channel.get(fileName));\n            ByteArrayOutputStream bout = new ByteArrayOutputStream();\n            byte[] buf = new byte[1024];\n            int length;\n            while (true) {\n                length = bin.read(buf);\n                if (length == -1) {\n                    break;\n                }\n                bout.write(buf, 0, length);\n            }\n            //\u6a19\u6e96\u51fa\u529b\n            System.out.format(\"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a1\u30a4\u30eb=%1$s\", new String(bout.toByteArray(), StandardCharsets.UTF_8));\n        }\n        finally {\n            if (fin != null) {\n                try {\n                    fin.close();\n                }\n                catch (IOException e) {\n                }\n            }\n            if (bin != null) {\n                try {\n                    bin.close();\n                }\n                catch (IOException e) {\n                }\n            }\n            if (channel != null) {\n                try {\n                    channel.disconnect();\n                }\n                catch (Exception e) {\n                }\n            }\n            if (session != null) {\n                try {\n                    session.disconnect();\n                }\n                catch (Exception e) {\n                }\n            }\n        }\n    }\n}\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n$ javac SFTPTest.java\n$ java SFTPTest\n$ \u53d6\u5f97\u3057\u305f\u30d5\u30a1\u30a4\u30eb=\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3067\u3059\n\n\n\n\u74b0\u5883\n\n\n\u958b\u767a\n\nWindows 10 Pro\nJDK 1.8.0_112\nNetBeans IDE 8.2\n\n\n\n\u52d5\u4f5c\u691c\u8a3c\n\nCentOS Linux release 7.2\nJDK 1.8.0_112\n\n\n\nWeb\u30c4\u30fc\u30eb\u3082\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u3002\nWeb\u4fbf\u5229\u30c4\u30fc\u30eb@\u30c4\u30fc\u30eb\u30bf\u30ed\u30a6\n## \u306f\u3058\u3081\u306b\n\u4e8b\u524d\u306b\u4ee5\u4e0b\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\n- JSch\n    - http://www.jcraft.com/jsch/\n    - \u203b\"jsch-0.1.54.jar\"\u306e\u30ea\u30f3\u30af\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n```txt:put.txt(UTF-8)\n\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3067\u3059\n\n```\n## \u5b9f\u88c5\u4f8b\n\u4eca\u56de\u306f\u3001\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u5185\u5bb9\u78ba\u8a8d\u3059\u308b\u3053\u3068\u3068\u3057\u307e\u3059\u3002\n\u30b5\u30f3\u30d7\u30eb\u3067\u306f\u3001\u52d5\u4f5c\u78ba\u8a8d\u3057\u3084\u3059\u3044\u3088\u3046\u306bmain\u30e1\u30bd\u30c3\u30c9\u3067\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\n```java:SFTPTest.java\nimport com.jcraft.jsch.ChannelSftp;\nimport com.jcraft.jsch.JSch;\nimport com.jcraft.jsch.JSchException;\nimport com.jcraft.jsch.Session;\nimport com.jcraft.jsch.SftpException;\nimport java.io.BufferedInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.nio.charset.StandardCharsets;\n\n/**\n *\n * @author tool-taro.com\n */\npublic class SFTPTest {\n\n\tpublic static void main(String[] args) throws JSchException, SftpException, FileNotFoundException, IOException {\n\n\t\t//\u30b5\u30fc\u30d0\n\t\tString host = \"\u30db\u30b9\u30c8\u540d\";\n\t\t//\u30dd\u30fc\u30c8\n\t\tint port = 22;\n\t\t//\u30e6\u30fc\u30b6\n\t\tString user = \"\u30e6\u30fc\u30b6\";\n\t\t//\u30d1\u30b9\u30ef\u30fc\u30c9\n\t\tString password = \"\u30d1\u30b9\u30ef\u30fc\u30c9\";\n\t\t//\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n\t\tString dir = \"/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\";\n\t\t//\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u30fb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u540d\n\t\tString fileName = \"put.txt\";\n\n\t\tJSch jsch;\n\t\tSession session = null;\n\t\tChannelSftp channel = null;\n\t\tFileInputStream fin = null;\n\t\tBufferedInputStream bin = null;\n\n\t\ttry {\n\t\t\t//\u63a5\u7d9a\n\t\t\tjsch = new JSch();\n\t\t\tsession = jsch.getSession(user, host, port);\n\t\t\t//known_hosts\u306e\u30c1\u30a7\u30c3\u30af\u3092\u30b9\u30ad\u30c3\u30d7\n\t\t\tsession.setConfig(\"StrictHostKeyChecking\", \"no\");\n\t\t\tsession.setPassword(password);\n\t\t\tsession.connect();\n\n\t\t\tchannel = (ChannelSftp) session.openChannel(\"sftp\");\n\t\t\tchannel.connect();\n\t\t\t//\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u79fb\u52d5\n\t\t\tchannel.cd(dir);\n\n\t\t\t//\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n\t\t\tfin = new FileInputStream(fileName);\n\t\t\tchannel.put(fin, fileName);\n\n\t\t\t//\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\t\t\tbin = new BufferedInputStream(channel.get(fileName));\n\t\t\tByteArrayOutputStream bout = new ByteArrayOutputStream();\n\t\t\tbyte[] buf = new byte[1024];\n\t\t\tint length;\n\t\t\twhile (true) {\n\t\t\t\tlength = bin.read(buf);\n\t\t\t\tif (length == -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbout.write(buf, 0, length);\n\t\t\t}\n\t\t\t//\u6a19\u6e96\u51fa\u529b\n\t\t\tSystem.out.format(\"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a1\u30a4\u30eb=%1$s\", new String(bout.toByteArray(), StandardCharsets.UTF_8));\n\t\t}\n\t\tfinally {\n\t\t\tif (fin != null) {\n\t\t\t\ttry {\n\t\t\t\t\tfin.close();\n\t\t\t\t}\n\t\t\t\tcatch (IOException e) {\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (bin != null) {\n\t\t\t\ttry {\n\t\t\t\t\tbin.close();\n\t\t\t\t}\n\t\t\t\tcatch (IOException e) {\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (channel != null) {\n\t\t\t\ttry {\n\t\t\t\t\tchannel.disconnect();\n\t\t\t\t}\n\t\t\t\tcatch (Exception e) {\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (session != null) {\n\t\t\t\ttry {\n\t\t\t\t\tsession.disconnect();\n\t\t\t\t}\n\t\t\t\tcatch (Exception e) {\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n```\n## \u52d5\u4f5c\u78ba\u8a8d\n\n```\n$ javac SFTPTest.java\n$ java SFTPTest\n$ \u53d6\u5f97\u3057\u305f\u30d5\u30a1\u30a4\u30eb=\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3067\u3059\n\n```\n## \u74b0\u5883\n- \u958b\u767a\n\t- Windows 10 Pro\n\t- JDK 1.8.0_112\n\t- NetBeans IDE 8.2\n\n- \u52d5\u4f5c\u691c\u8a3c\n\t- CentOS Linux release 7.2\n\t- JDK 1.8.0_112\n\nWeb\u30c4\u30fc\u30eb\u3082\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u3002\n[Web\u4fbf\u5229\u30c4\u30fc\u30eb@\u30c4\u30fc\u30eb\u30bf\u30ed\u30a6](http://tool-taro.com/)\n", "tags": ["Java", "java8", "sftp", "JSch"]}