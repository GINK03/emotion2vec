{"context": " More than 1 year has passed since last update.\u4e45\u3005\u306e\u6295\u7a3f\uff01\n\u4eca\u65e5\u306fcentos6.5\u306evm(vagrant x virtualbox)\u306blinuxbrew\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bansible\u306eplaybook\u66f8\u3044\u305f\u306e\u3067\u3055\u3089\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\u8a66\u3057\u3066\u306a\u3044\u3067\u3059\u304cFedora\u3068\u304b\u3067\u3082\u3044\u3051\u308b\u306f\u305a\u3002\n\u203bcentos7,Ubuntu\u3067\u3082\u52d5\u4f5c\u78ba\u8a8d\u6e08\u307f\u3067\u3059\n\nlinuxbrew.yml\n---\n- hosts: \"{{ host }}\"\n  remote_user: \"{{ user }}\"\n  vars:\n    - host: 127.0.0.1\n    - user: vagrant\n    - user_home: /home/{{ user }}\n    - brew_home: \"{{ user_home }}/.linuxbrew\"\n  tasks:\n    - name: Install the dependency libraries \"Development tools\" of linuxbrew(Redhat)\n      yum: name=\"@Development Tools\" state=present\n      when: ansible_os_family == 'RedHat'\n      sudo: yes\n    - name: Install the dependency libraries \"with_items\" of linuxbrew(Redhat)\n      yum: name={{ item }} state=present\n      with_items:\n        - curl\n        - git\n        - m4\n        - ruby\n        - texinfo\n        - bzip2-devel\n        - curl-devel\n        - expat-devel\n        - ncurses-devel\n        - zlib-devel\n      when: ansible_os_family == 'RedHat'\n      sudo: yes\n    - name: Install the dependency libraries \"with_items\" of linuxbrew(Debian)\n      apt: name={{ item }} state=present\n      with_items:\n        - build-essential\n        - curl\n        - git\n        - m4\n        - ruby\n        - texinfo\n        - libbz2-dev\n        - libcurl4-openssl-dev\n        - libexpat-dev\n        - libncurses-dev\n        - zlib1g-dev\n      when: ansible_os_family == 'Debian'\n      sudo: yes\n    - name: Add configuration file loading of linuxbrew in bashrc\n      lineinfile: dest=\"{{ user_home }}/.bashrc\" state=present regexp=\"source .linuxbrewrc\" line=\"source .linuxbrewrc\"\n    - name: Copy .linuxbrewrc\n      template: src=linuxbrewrc.j2 dest={{ user_home }}/.linuxbrewrc mode=0644\n    - name: Install linuxbrew\n      shell: echo -ne '\\n' | ruby -e \"$(wget -O- https://raw.github.com/Homebrew/linuxbrew/go/install --no-check-certificate)\" creates={{ brew_home }}\n      register: linuxbrew\n    - name: link gcc\n      shell: ln -s `which gcc` {{ brew_home }}/bin/gcc-`gcc -dumpversion | cut -d. -f1,2`\n      when: linuxbrew.changed\n    - name: link g++\n      shell: ln -s `which g++` {{ brew_home }}/bin/g++-`g++ -dumpversion | cut -d. -f1,2`\n      when: linuxbrew.changed\n\n\n\nlinuxbrewrc.j2\nexport LINUXBREWHOME=\"$HOME/.linuxbrew\"\nexport PATH=\"$LINUXBREWHOME/bin:$PATH\"\nexport MANPATH=\"$LINUXBREWHOME/share/man:$MANPATH\"\nexport INFOPATH=\"$LINUXBREWHOME/share/info:$INFOPATH\"\nexport LD_LIBRARY_PATH=\"$LINUXBREWHOME/lib:$LD_LIBRARY_PATH\"\n\n\nyaml\u3068template\u306f\u3053\u3093\u306a\u611f\u3058\u3067\n$ ansible-playbook -i hosts linuxbrew.yml -k\n\n\u547c\u3073\u51fa\u3057\u306f\u3053\u3093\u306a\u611f\u3058\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067vagrant\u3067\u7acb\u3061\u4e0a\u3052\u305fvm\u3067extra-vars\u6307\u5b9a\u3057\u306a\u3044\u3067\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\n\u9055\u3046user\u3068\u304bhost\u306b\u5165\u308c\u308b\u5834\u5408\u306f--extra-vars \"host=x.x.x.x user=hoge\"\u3068\u3057\u3066\u304f\u3060\u3055\u3044\n\u3053\u308c\u3067\u6307\u5b9a\u30e6\u30fc\u30b6\u306e$HOME\u306blinuxbrew\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\ngcc\u306f\u30b7\u30b9\u30c6\u30e0\u306e\u3084\u3064\u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u53c2\u8003: http://log.saqihel.net/141018-linuxbrew/\n\u3053\u308c\u3067\u65b0\u898fvm\u7acb\u3061\u4e0a\u3052\u3066\u3082\u7c21\u5358\u306blinuxbrew\u74b0\u5883\u3092\u69cb\u7bc9\u3067\u304d\u307e\u3059\u306d\uff01\n\u8ffd\u8a18:\nlxc\u3067\u7acb\u3061\u4e0a\u3052\u305fcentos\u3068\u304b\u3060\u3068wget,tar,which,ruby\u304c\u306a\u304b\u3063\u305f\u308a\u3059\u308b\u306e\u3067\u5b9f\u884c\u524d\u306b\u9069\u5b9c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u4e45\u3005\u306e\u6295\u7a3f\uff01\n\n\u4eca\u65e5\u306fcentos6.5\u306evm(vagrant x virtualbox)\u306blinuxbrew\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bansible\u306eplaybook\u66f8\u3044\u305f\u306e\u3067\u3055\u3089\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\u8a66\u3057\u3066\u306a\u3044\u3067\u3059\u304cFedora\u3068\u304b\u3067\u3082\u3044\u3051\u308b\u306f\u305a\u3002\n\u203bcentos7,Ubuntu\u3067\u3082\u52d5\u4f5c\u78ba\u8a8d\u6e08\u307f\u3067\u3059\n\n```yaml:linuxbrew.yml\n---\n- hosts: \"{{ host }}\"\n  remote_user: \"{{ user }}\"\n  vars:\n    - host: 127.0.0.1\n    - user: vagrant\n    - user_home: /home/{{ user }}\n    - brew_home: \"{{ user_home }}/.linuxbrew\"\n  tasks:\n    - name: Install the dependency libraries \"Development tools\" of linuxbrew(Redhat)\n      yum: name=\"@Development Tools\" state=present\n      when: ansible_os_family == 'RedHat'\n      sudo: yes\n    - name: Install the dependency libraries \"with_items\" of linuxbrew(Redhat)\n      yum: name={{ item }} state=present\n      with_items:\n        - curl\n        - git\n        - m4\n        - ruby\n        - texinfo\n        - bzip2-devel\n        - curl-devel\n        - expat-devel\n        - ncurses-devel\n        - zlib-devel\n      when: ansible_os_family == 'RedHat'\n      sudo: yes\n    - name: Install the dependency libraries \"with_items\" of linuxbrew(Debian)\n      apt: name={{ item }} state=present\n      with_items:\n        - build-essential\n        - curl\n        - git\n        - m4\n        - ruby\n        - texinfo\n        - libbz2-dev\n        - libcurl4-openssl-dev\n        - libexpat-dev\n        - libncurses-dev\n        - zlib1g-dev\n      when: ansible_os_family == 'Debian'\n      sudo: yes\n    - name: Add configuration file loading of linuxbrew in bashrc\n      lineinfile: dest=\"{{ user_home }}/.bashrc\" state=present regexp=\"source .linuxbrewrc\" line=\"source .linuxbrewrc\"\n    - name: Copy .linuxbrewrc\n      template: src=linuxbrewrc.j2 dest={{ user_home }}/.linuxbrewrc mode=0644\n    - name: Install linuxbrew\n      shell: echo -ne '\\n' | ruby -e \"$(wget -O- https://raw.github.com/Homebrew/linuxbrew/go/install --no-check-certificate)\" creates={{ brew_home }}\n      register: linuxbrew\n    - name: link gcc\n      shell: ln -s `which gcc` {{ brew_home }}/bin/gcc-`gcc -dumpversion | cut -d. -f1,2`\n      when: linuxbrew.changed\n    - name: link g++\n      shell: ln -s `which g++` {{ brew_home }}/bin/g++-`g++ -dumpversion | cut -d. -f1,2`\n      when: linuxbrew.changed\n```\n\n```bash:linuxbrewrc.j2\nexport LINUXBREWHOME=\"$HOME/.linuxbrew\"\nexport PATH=\"$LINUXBREWHOME/bin:$PATH\"\nexport MANPATH=\"$LINUXBREWHOME/share/man:$MANPATH\"\nexport INFOPATH=\"$LINUXBREWHOME/share/info:$INFOPATH\"\nexport LD_LIBRARY_PATH=\"$LINUXBREWHOME/lib:$LD_LIBRARY_PATH\"\n```\n\nyaml\u3068template\u306f\u3053\u3093\u306a\u611f\u3058\u3067\n\n```shell-session\n$ ansible-playbook -i hosts linuxbrew.yml -k\n```\n\n\u547c\u3073\u51fa\u3057\u306f\u3053\u3093\u306a\u611f\u3058\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067vagrant\u3067\u7acb\u3061\u4e0a\u3052\u305fvm\u3067extra-vars\u6307\u5b9a\u3057\u306a\u3044\u3067\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\n\u9055\u3046user\u3068\u304bhost\u306b\u5165\u308c\u308b\u5834\u5408\u306f`--extra-vars \"host=x.x.x.x user=hoge\"`\u3068\u3057\u3066\u304f\u3060\u3055\u3044\n\n\u3053\u308c\u3067\u6307\u5b9a\u30e6\u30fc\u30b6\u306e$HOME\u306blinuxbrew\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\ngcc\u306f\u30b7\u30b9\u30c6\u30e0\u306e\u3084\u3064\u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u53c2\u8003: http://log.saqihel.net/141018-linuxbrew/\n\n\u3053\u308c\u3067\u65b0\u898fvm\u7acb\u3061\u4e0a\u3052\u3066\u3082\u7c21\u5358\u306blinuxbrew\u74b0\u5883\u3092\u69cb\u7bc9\u3067\u304d\u307e\u3059\u306d\uff01\n\n\u8ffd\u8a18:\n\nlxc\u3067\u7acb\u3061\u4e0a\u3052\u305fcentos\u3068\u304b\u3060\u3068wget,tar,which,ruby\u304c\u306a\u304b\u3063\u305f\u308a\u3059\u308b\u306e\u3067\u5b9f\u884c\u524d\u306b\u9069\u5b9c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n", "tags": ["Ansible1.7.2", "linuxbrew0.9.5", "CentOS6.5", "Ubuntu14.04"]}