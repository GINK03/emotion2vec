{"context": "\u30ec\u30b3\u30fc\u30c9\u306e\u65b0\u65e7\u5c65\u6b74\u3092\u3001\u300c\u524d\u30ec\u30b3\u30fc\u30c9\u300d\u306a\u30ab\u30e9\u30e0\u3067\n\u540c\u3058\u30c6\u30fc\u30d6\u30eb\u306e\u4e3b\u30ad\u30fc\u3092\u683c\u7d0d\u3059\u308b\u3053\u3068\u3067\u8868\u73fe\u3059\u308b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u30c6\u30fc\u30d6\u30eb\u304c\u6709\u308a\u3001\n\u305d\u3093\u306a\u30c6\u30fc\u30d6\u30eb\u3067\u968e\u5c64\u554f\u3044\u5408\u308f\u305b\u3092\u4f7f\u3046\u6a5f\u4f1a\u304c\u5408\u3063\u305f\u306e\u3067\u899a\u66f8\u3002\n\n\u524d\u63d0\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30c6\u30fc\u30d6\u30eb\u304c\u3042\u308a\u307e\u3059\nWITH t_place(place_id,place_name,pre_place) AS(\n SELECT '1'  , '\u6b66\u8535' ,null FROM dual UNION ALL\n SELECT '2'  , '\u96e3\u6ce2' ,null FROM dual UNION ALL \n SELECT '18' , '\u6c5f\u6238' ,'1'  FROM dual UNION ALL\n SELECT '19' , '\u5927\u5742' ,'2'  FROM dual UNION ALL\n SELECT '20' , '\u5927\u962a' ,'19' FROM dual UNION ALL\n SELECT '0'  , '\u5927\u548c' ,null FROM dual UNION ALL\n SELECT '21' , '\u65e5\u672c' ,'0'  FROM dual UNION ALL\n SELECT '22' , '\u5317\u671d' ,'21' FROM dual UNION ALL\n SELECT '23' , '\u5357\u671d' ,'21' FROM dual UNION ALL\n SELECT '89' , '\u6771\u4eac' ,'18' FROM dual \n)\n\n\u30ab\u30e9\u30e0\u306e\u610f\u5473\u306f\u5de6\u304b\u3089\u3001\nplace_id:\u5834\u6240\u30b3\u30fc\u30c9\nplace_name:\u5834\u6240\u540d\npre_place:\u524d\u6642\u4ee3\u306e\u5834\u6240\u60c5\u5831\n\u3068\u3057\u307e\u3059\u3002\n\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306f\u5358\u65b9\u5411\u30ea\u30b9\u30c8Like\u306a\u69cb\u9020\u306b\u306a\u3063\u3066\u304a\u308a\u3001\n\u30ec\u30b3\u30fc\u30c9\u306epre_place\u304b\u3089\u904e\u53bb\u306e\u5834\u6240\u60c5\u5831\u306e\u307f\u8fbf\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u6771\u4eac\u301c\u6b66\u8535\u306e\u4f8b\nNO.89 \u6771\u4eac \u524d:18\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u2193\n          NO:18 \u6c5f\u6238 \u524d:1\n                       \u2193\n                    NO:1 \u6b66\u8535 \u524d:\u306a\u3057\n\n\n\u4e00\u756a\u53e4\u3044\u30ec\u30b3\u30fc\u30c9\u306fpre_place\u304cnull\u304b\u3069\u3046\u304b\u3067\u7c21\u5358\u306b\u5224\u5225\u51fa\u6765\u307e\u3059\u3002\n\u6700\u65b0\u304b\u3069\u3046\u304b\u306f\u81ea\u5206\u306eplace_id\u3092\u4ed6\u306e\u30ec\u30b3\u30fc\u30c9\u304cpre_place\u3068\u3057\u3066\u6301\u3063\u3066\u3044\u308b\u304b\uff1f\u3068\u3044\u3046\u30c1\u30a7\u30c3\u30af\u3092\u3057\u306a\u3044\u3068\u308f\u304b\u308a\u307e\u305b\u3093\u3002\n\u3053\u306e\u305f\u3081\u3001\u305d\u306e\u30ec\u30b3\u30fc\u30c9\u304c\u6700\u65b0\u304b\u3069\u3046\u304b\u3001\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u30ec\u30b3\u30fc\u30c9\u81ea\u8eab\u306e\u6301\u3064\u60c5\u5831\u3060\u3051\u3067\u306f\u4e0d\u660e\u3067\u3059\u3002\n\u305d\u3093\u306a\u69cb\u9020\u306e\u30c6\u30fc\u30d6\u30eb\u3067\u3059\u304c\u73fe\u5728\u306e\u571f\u5730\u30ec\u30b3\u30fc\u30c9\u306e\u6700\u65b0\u306e\u571f\u5730\u540d\u3092\u5168\u30ec\u30b3\u30fc\u30c9\u3092\u5bfe\u8c61\u306b\u8abf\u3079\u3066\u308b\u5fc5\u8981\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n\n\u6700\u53e4\u301c\u6700\u65b0\u306e\u4e00\u89a7\u3092\u518d\u5e30\u30af\u30a8\u30ea\u3067\u8868\u793a\nSELECT place_id,place_name,pre_place,\n       LEVEL,                         --\u968e\u5c64(\u6728\u306e\u6df1\u3055)\n       CONNECT_BY_ISLEAF leaf         --\u672b\u7aef\u304b\u3069\u3046\u304b\nFROM\n       t_place\nSTART WITH\n       pre_place is null              --\u6728\u306e\u6839\u3068\u306a\u308b\u6761\u4ef6\nCONNECT BY PRIOR place_id = pre_place --\u89aa\u5b50\u95a2\u4fc2\u306e\u6761\u4ef6(\u89aa->\u5b50)\n\n\u7d50\u679c\n\n\n\nPLACE_ID\nPLACE_NAME\nPRE_PLACE\nLEVEL\nLEAF\n\n\n\n\n0\n\u5927\u548c\n\n1\n0\n\n\n21\n\u65e5\u672c\n0\n2\n0\n\n\n22\n\u5317\u671d\n21\n3\n1\n\n\n23\n\u5357\u671d\n21\n3\n1\n\n\n1\n\u6b66\u8535\n\n1\n0\n\n\n18\n\u6c5f\u6238\n1\n2\n0\n\n\n89\n\u6771\u4eac\n18\n3\n1\n\n\n2\n\u96e3\u6ce2\n\n1\n0\n\n\n19\n\u5927\u5742\n2\n2\n0\n\n\n20\n\u5927\u962a\n19\n3\n1\n\n\n\n\u3067\u306f\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u6a5f\u80fd\u306b\u3064\u3044\u3066\u7c21\u5358\u306b\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u6839\u306e\u6761\u4ef6\u3092\u6307\u5b9a\u3059\u308b (START WITH)\nFROM\u53e5\u306e\u76f4\u5f8c\u306b\u7d9a\u3051\u3066\u66f8\u304d\u307e\u3059\u3002\nSTART WITH\u3067\u6728\u306e\u6839\u3068\u306a\u308b\u6761\u4ef6\u3092\u8a18\u8ff0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u7701\u7565\u3057\u305f\u5834\u5408\u3001\u5168\u3066\u306e\u30ab\u30e9\u30e0\u304c\u6839\u3068\u306a\u308b\u554f\u3044\u5408\u308f\u305b\u7d50\u679c\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u89aa\u5b50\u95a2\u4fc2\u3092\u6307\u5b9a\u3059\u308b(CONNECT BY PRIOR )\nCONNECT BY PRIOR \u89aa\u25cb\u25cb = \u5b50\u00d7\u00d7 \u3067\u89aa\u5b50\u95a2\u4fc2\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\nPRIOR(\u8a33:\u524d\u306e)\u304c\u3064\u3044\u3066\u3044\u308b\u65b9\u306b\u89aa\u306e\u30ab\u30e9\u30e0\u3092\u66f8\u304f\u3068\u899a\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u6728\u306e\u6df1\u3055\u3092\u8868\u3059(LEVEL)\nSELECT\u53e5\u3084CONNECT BY\u53e5\u306e\u4e2d\u306b\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nLEVEL\u306f\u6728\u306e\u6df1\u3055\u3092\u8868\u3057\u307e\u3059\u3002\u6839\u306e\u5834\u5408LEVEL=1\u3001\n\u4ee5\u5f8c\u3001\u5f8c\u4e16\u306e\u4ee3\u306b\u884c\u304f\u306b\u3064\u308c\u30662,3,4\u3068\u5897\u3048\u3066\u3044\u304d\u307e\u3059\u3002\nCONNECT BY\u53e5\u306e\u4e2d\u306b\u66f8\u304f\u3053\u3068\u3067\u3001\u554f\u3044\u5408\u308f\u305b\u306e\u6df1\u3055\u3092\u5236\u9650\u3057\u305f\u308a\u3067\u304d\u307e\u3059\u3002\n\n\u7d4c\u8def\u3092\u8868\u793a\u3059\u308b(SYS_CONNECT_BY_PATH)\nSELECT\u53e5\u306b\u542b\u3081\u308b\u3053\u3068\u3067\u6839\u304b\u3089\u306e\u7d4c\u8def\u3092\u8868\u793a\u3067\u304d\u307e\u3059\u3002\n\nSYS_CONNECT_BY_PATH\u30b5\u30f3\u30d7\u30eb\nSELECT place_id,place_name,pre_place,\n       LEVEL,                         --\u968e\u5c64(\u6728\u306e\u6df1\u3055)\n       CONNECT_BY_ISLEAF leaf,         --\u672b\u7aef\u304b\u3069\u3046\u304b\n       SYS_CONNECT_BY_PATH(TO_CHAR(place_name),',') AS path\nFROM\n       t_place\nSTART WITH\n       pre_place is null              --\u6728\u306e\u6839\u3068\u306a\u308b\u6761\u4ef6\nCONNECT BY PRIOR place_id = pre_place --\u89aa\u5b50\u95a2\u4fc2\u306e\u6761\u4ef6(\u89aa->\u5b50)\n\n\n\u7d50\u679c\n\n\n\nPLACE_ID\nPLACE_NAME\nPRE_PLACE\nLEVEL\nLEAF\nPATH\n\n\n\n\n0\n\u5927\u548c\n\n1\n0\n,\u5927\u548c\n\n\n21\n\u65e5\u672c\n0\n2\n0\n,\u5927\u548c,\u65e5\u672c\n\n\n22\n\u5317\u671d\n21\n3\n1\n,\u5927\u548c,\u65e5\u672c,\u5317\u671d\n\n\n23\n\u5357\u671d\n21\n3\n1\n,\u5927\u548c,\u65e5\u672c,\u5357\u671d\n\n\n1\n\u6b66\u8535\n\n1\n0\n,\u6b66\u8535\n\n\n18\n\u6c5f\u6238\n1\n2\n0\n,\u6b66\u8535,\u6c5f\u6238\n\n\n89\n\u6771\u4eac\n18\n3\n1\n,\u6b66\u8535,\u6c5f\u6238,\u6771\u4eac\n\n\n2\n\u96e3\u6ce2\n\n1\n0\n,\u96e3\u6ce2\n\n\n19\n\u5927\u5742\n2\n2\n0\n,\u96e3\u6ce2,\u5927\u5742\n\n\n20\n\u5927\u962a\n19\n3\n1\n,\u96e3\u6ce2,\u5927\u5742,\u5927\u962a\n\n\n\n\n\u6839\u307e\u305f\u306f\u8449\u3092\u5224\u5b9a\u3059\u308b(CONNECT_BY_ROOT\u3001CONNECT_BY_LEAF)\nSELECT\u53e5\u306b\u66f8\u304f\u3053\u3068\u3067\u6728\u69cb\u9020\u306e\u8449\u3084\u6839\u3068\u306a\u308b\u30ec\u30b3\u30fc\u30c9\u306e\u5224\u5225\u306b\u4f7f\u3048\u307e\u3059\u3002\n\nCONNECT_BY_ROOT   = \u6839\u3067\u3042\u308b\u6642:1 \u305d\u308c\u4ee5\u5916:0\nCONNECT_BY_ISLEAF = \u8449\u3067\u3042\u308b\u6642:1 \u305d\u308c\u4ee5\u5916:0\n\n\n\u89aa\u306e\u60c5\u5831\u3092\u6271\u3046(PRIOR)\nCONNECT BY \u53e5\u3067\u4f7f\u3046\u306e\u304c\u4e3b\u306a\u7528\u9014\u3067\u3059\u304c\nSELECT\u53e5\u3067\u4f7f\u3063\u305f\u5834\u5408\u306f\u89aa\u30ec\u30b3\u30fc\u30c9\u306e\u30ab\u30e9\u30e0\u3092\u53c2\u7167\u3067\u304d\u307e\u3059\u3002\n\n\u5faa\u74b0\u3092\u9632\u3050\u3001\u5faa\u74b0\u306e\u60c5\u5831\u3092\u8868\u793a\u3059\u308b(CONNECT BY NOCYCLE,CONNECT_BY_ISCYCLE)\n\u968e\u5c64\u554f\u3044\u5408\u308f\u305b\u3067\u306f\u30ec\u30b3\u30fc\u30c9\u304c\u6728\u3084\u30ea\u30b9\u30c8\u3067\u306f\u306a\u304f\u30b0\u30e9\u30d5\u69cb\u9020\u306b\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u3001\n\u7121\u9650\u30eb\u30fc\u30d7\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\nCONNECT BY\u53e5\u306b NOCYCLE\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u3053\u308c\u3092\u9632\u3052\u307e\u3059\u3002\n\u307e\u305f\u8a2a\u554f\u6e08\u307f\u30ce\u30fc\u30c9\u3078\u306e\u518d\u8a2a\u554f\u304c\u8d77\u3053\u3063\u305f\u3068\u304d(\u305d\u308c\u3092\u9632\u3044\u3060\u3068\u304d)\nSELECT\u53e5\u4e2d\u306b\u66f8\u3044\u305fCONNECT_BY_ISCYCLE\u306e\u5024\u304c1\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u554f\u3044\u5408\u308f\u305b\u7d50\u679c\u3092\u7d5e\u308a\u8fbc\u3080(WHERE)\n\u4eca\u66f4\u4f55\u3092WHERE\u53e5\u306e\u89e3\u8aac\u3092\u3057\u3066\u308b\u3093\u3060\u3001\u3068\u601d\u308f\u308c\u305f\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\n\u968e\u5c64\u554f\u3044\u5408\u308f\u305b\u306e\u5834\u5408\u3001WHERE\u306e\u5b9f\u884c\u9806\u5e8f\u306f\nSTART \uff5e CONNECT\u306e\u4e00\u9023\u306e\u51e6\u7406\u304c\u7d42\u308f\u3063\u305f\u5f8c\u306b\u306a\u308a\u307e\u3059\u3002\n\u3064\u307e\u308a\u3001\u968e\u5c64\u554f\u3044\u5408\u308f\u305b\u306e\u7d50\u679c\u51fa\u6765\u4e0a\u304c\u3063\u305f\u6728\u69cb\u9020\u3084\u30b0\u30e9\u30d5\u306e\u69cb\u9020\u306b\u5bfe\u3057\u3066WHERE\u3067\u6761\u4ef6\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u4f8b)\u8449\u3060\u3051\u8868\u793a\u3057\u305f\u3044\nSELECT place_id,place_name,pre_place,\n       LEVEL,                         --\u968e\u5c64(\u6728\u306e\u6df1\u3055)\n       CONNECT_BY_ISLEAF leaf,         --\u672b\u7aef\u304b\u3069\u3046\u304b\n       SYS_CONNECT_BY_PATH(TO_CHAR(place_name),',') AS path\nFROM\n       t_place\nWHERE  CONNECT_BY_ISLEAF = 1 --\u6ce8\u610f)SELECT\u53e5\u3067\u4ed8\u3051\u305f\u5225\u540d\u306f\u4f7f\u3048\u307e\u305b\u3093\u3002\nSTART WITH\n       pre_place is null              --\u6728\u306e\u6839\u3068\u306a\u308b\u6761\u4ef6\nCONNECT BY PRIOR place_id = pre_place --\u89aa\u5b50\u95a2\u4fc2\u306e\u6761\u4ef6(\u89aa->\u5b50)\n\n\n\u7d50\u679c\n\n\n\nPLACE_ID\nPLACE_NAME\nPRE_PLACE\nLEVEL\nLEAF\nPATH\n\n\n\n\n22\n\u5317\u671d\n21\n3\n1\n,\u5927\u548c,\u65e5\u672c,\u5317\u671d\n\n\n23\n\u5357\u671d\n21\n3\n1\n,\u5927\u548c,\u65e5\u672c,\u5357\u671d\n\n\n89\n\u6771\u4eac\n18\n3\n1\n,\u6b66\u8535,\u6c5f\u6238,\u6771\u4eac\n\n\n20\n\u5927\u962a\n19\n3\n1\n,\u96e3\u6ce2,\u5927\u5742,\u5927\u962a\n\n\n\n\n\u53c2\u8003\n\u7b2c6\u56de \u968e\u5c64\u554f\u3044\u5408\u308f\u305b\n\u30ec\u30b3\u30fc\u30c9\u306e\u65b0\u65e7\u5c65\u6b74\u3092\u3001\u300c\u524d\u30ec\u30b3\u30fc\u30c9\u300d\u306a\u30ab\u30e9\u30e0\u3067\n\u540c\u3058\u30c6\u30fc\u30d6\u30eb\u306e\u4e3b\u30ad\u30fc\u3092\u683c\u7d0d\u3059\u308b\u3053\u3068\u3067\u8868\u73fe\u3059\u308b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u30c6\u30fc\u30d6\u30eb\u304c\u6709\u308a\u3001\n\u305d\u3093\u306a\u30c6\u30fc\u30d6\u30eb\u3067\u968e\u5c64\u554f\u3044\u5408\u308f\u305b\u3092\u4f7f\u3046\u6a5f\u4f1a\u304c\u5408\u3063\u305f\u306e\u3067\u899a\u66f8\u3002\n\n\n# \u524d\u63d0\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30c6\u30fc\u30d6\u30eb\u304c\u3042\u308a\u307e\u3059\n\n```sql:\nWITH t_place(place_id,place_name,pre_place) AS(\n SELECT '1'  , '\u6b66\u8535' ,null FROM dual UNION ALL\n SELECT '2'  , '\u96e3\u6ce2' ,null FROM dual UNION ALL \n SELECT '18' , '\u6c5f\u6238' ,'1'  FROM dual UNION ALL\n SELECT '19' , '\u5927\u5742' ,'2'  FROM dual UNION ALL\n SELECT '20' , '\u5927\u962a' ,'19' FROM dual UNION ALL\n SELECT '0'  , '\u5927\u548c' ,null FROM dual UNION ALL\n SELECT '21' , '\u65e5\u672c' ,'0'  FROM dual UNION ALL\n SELECT '22' , '\u5317\u671d' ,'21' FROM dual UNION ALL\n SELECT '23' , '\u5357\u671d' ,'21' FROM dual UNION ALL\n SELECT '89' , '\u6771\u4eac' ,'18' FROM dual \n)\n```\n\n\n\u30ab\u30e9\u30e0\u306e\u610f\u5473\u306f\u5de6\u304b\u3089\u3001\nplace_id:\u5834\u6240\u30b3\u30fc\u30c9\nplace_name:\u5834\u6240\u540d\npre_place:\u524d\u6642\u4ee3\u306e\u5834\u6240\u60c5\u5831\n\n\u3068\u3057\u307e\u3059\u3002\n\n\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306f\u5358\u65b9\u5411\u30ea\u30b9\u30c8Like\u306a\u69cb\u9020\u306b\u306a\u3063\u3066\u304a\u308a\u3001\n\u30ec\u30b3\u30fc\u30c9\u306epre_place\u304b\u3089\u904e\u53bb\u306e\u5834\u6240\u60c5\u5831\u306e\u307f\u8fbf\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n```:\u6771\u4eac\u301c\u6b66\u8535\u306e\u4f8b\nNO.89 \u6771\u4eac \u524d:18\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u2193\n          NO:18 \u6c5f\u6238 \u524d:1\n                       \u2193\n                    NO:1 \u6b66\u8535 \u524d:\u306a\u3057\n```\n\n\u4e00\u756a\u53e4\u3044\u30ec\u30b3\u30fc\u30c9\u306fpre_place\u304cnull\u304b\u3069\u3046\u304b\u3067\u7c21\u5358\u306b\u5224\u5225\u51fa\u6765\u307e\u3059\u3002\n\u6700\u65b0\u304b\u3069\u3046\u304b\u306f\u81ea\u5206\u306eplace_id\u3092\u4ed6\u306e\u30ec\u30b3\u30fc\u30c9\u304cpre_place\u3068\u3057\u3066\u6301\u3063\u3066\u3044\u308b\u304b\uff1f\u3068\u3044\u3046\u30c1\u30a7\u30c3\u30af\u3092\u3057\u306a\u3044\u3068\u308f\u304b\u308a\u307e\u305b\u3093\u3002\n\n\u3053\u306e\u305f\u3081\u3001\u305d\u306e\u30ec\u30b3\u30fc\u30c9\u304c\u6700\u65b0\u304b\u3069\u3046\u304b\u3001\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u30ec\u30b3\u30fc\u30c9\u81ea\u8eab\u306e\u6301\u3064\u60c5\u5831\u3060\u3051\u3067\u306f\u4e0d\u660e\u3067\u3059\u3002\n\n\u305d\u3093\u306a\u69cb\u9020\u306e\u30c6\u30fc\u30d6\u30eb\u3067\u3059\u304c\u73fe\u5728\u306e\u571f\u5730\u30ec\u30b3\u30fc\u30c9\u306e\u6700\u65b0\u306e\u571f\u5730\u540d\u3092\u5168\u30ec\u30b3\u30fc\u30c9\u3092\u5bfe\u8c61\u306b\u8abf\u3079\u3066\u308b\u5fc5\u8981\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n\n# \u6700\u53e4\u301c\u6700\u65b0\u306e\u4e00\u89a7\u3092\u518d\u5e30\u30af\u30a8\u30ea\u3067\u8868\u793a\n\n```sql:\nSELECT place_id,place_name,pre_place,\n       LEVEL,                         --\u968e\u5c64(\u6728\u306e\u6df1\u3055)\n       CONNECT_BY_ISLEAF leaf         --\u672b\u7aef\u304b\u3069\u3046\u304b\nFROM\n       t_place\nSTART WITH\n       pre_place is null              --\u6728\u306e\u6839\u3068\u306a\u308b\u6761\u4ef6\nCONNECT BY PRIOR place_id = pre_place --\u89aa\u5b50\u95a2\u4fc2\u306e\u6761\u4ef6(\u89aa->\u5b50)\n```\n\n\u7d50\u679c\n\n|PLACE_ID|PLACE_NAME|PRE_PLACE|LEVEL|LEAF|\n|:-:|:-:|:-:|:-:|:-:|\n|0|\u5927\u548c||1|0|\n|21|\u65e5\u672c|0|2|0|\n|22|\u5317\u671d|21|3|1|\n|23|\u5357\u671d|21|3|1|\n|1|\u6b66\u8535||1|0|\n|18|\u6c5f\u6238|1|2|0|\n|89|\u6771\u4eac|18|3|1|\n|2|\u96e3\u6ce2||1|0|\n|19|\u5927\u5742|2|2|0|\n|20|\u5927\u962a|19|3|1|\n\n\u3067\u306f\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u6a5f\u80fd\u306b\u3064\u3044\u3066\u7c21\u5358\u306b\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n# \u6839\u306e\u6761\u4ef6\u3092\u6307\u5b9a\u3059\u308b (START WITH)\n\nFROM\u53e5\u306e\u76f4\u5f8c\u306b\u7d9a\u3051\u3066\u66f8\u304d\u307e\u3059\u3002\nSTART WITH\u3067\u6728\u306e\u6839\u3068\u306a\u308b\u6761\u4ef6\u3092\u8a18\u8ff0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u7701\u7565\u3057\u305f\u5834\u5408\u3001\u5168\u3066\u306e\u30ab\u30e9\u30e0\u304c\u6839\u3068\u306a\u308b\u554f\u3044\u5408\u308f\u305b\u7d50\u679c\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n# \u89aa\u5b50\u95a2\u4fc2\u3092\u6307\u5b9a\u3059\u308b(CONNECT BY PRIOR )\n\nCONNECT BY PRIOR \u89aa\u25cb\u25cb = \u5b50\u00d7\u00d7 \u3067\u89aa\u5b50\u95a2\u4fc2\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\nPRIOR(\u8a33:\u524d\u306e)\u304c\u3064\u3044\u3066\u3044\u308b\u65b9\u306b\u89aa\u306e\u30ab\u30e9\u30e0\u3092\u66f8\u304f\u3068\u899a\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n# \u6728\u306e\u6df1\u3055\u3092\u8868\u3059(LEVEL)\n\nSELECT\u53e5\u3084CONNECT BY\u53e5\u306e\u4e2d\u306b\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nLEVEL\u306f\u6728\u306e\u6df1\u3055\u3092\u8868\u3057\u307e\u3059\u3002\u6839\u306e\u5834\u5408LEVEL=1\u3001\n\u4ee5\u5f8c\u3001\u5f8c\u4e16\u306e\u4ee3\u306b\u884c\u304f\u306b\u3064\u308c\u30662,3,4\u3068\u5897\u3048\u3066\u3044\u304d\u307e\u3059\u3002\n\nCONNECT BY\u53e5\u306e\u4e2d\u306b\u66f8\u304f\u3053\u3068\u3067\u3001\u554f\u3044\u5408\u308f\u305b\u306e\u6df1\u3055\u3092\u5236\u9650\u3057\u305f\u308a\u3067\u304d\u307e\u3059\u3002\n\n\n# \u7d4c\u8def\u3092\u8868\u793a\u3059\u308b(SYS_CONNECT_BY_PATH)\n\nSELECT\u53e5\u306b\u542b\u3081\u308b\u3053\u3068\u3067\u6839\u304b\u3089\u306e\u7d4c\u8def\u3092\u8868\u793a\u3067\u304d\u307e\u3059\u3002\n\n```sql:SYS_CONNECT_BY_PATH\u30b5\u30f3\u30d7\u30eb\nSELECT place_id,place_name,pre_place,\n       LEVEL,                         --\u968e\u5c64(\u6728\u306e\u6df1\u3055)\n       CONNECT_BY_ISLEAF leaf,         --\u672b\u7aef\u304b\u3069\u3046\u304b\n       SYS_CONNECT_BY_PATH(TO_CHAR(place_name),',') AS path\nFROM\n       t_place\nSTART WITH\n       pre_place is null              --\u6728\u306e\u6839\u3068\u306a\u308b\u6761\u4ef6\nCONNECT BY PRIOR place_id = pre_place --\u89aa\u5b50\u95a2\u4fc2\u306e\u6761\u4ef6(\u89aa->\u5b50)\n```\n\n\u7d50\u679c\n\n|PLACE_ID|PLACE_NAME|PRE_PLACE|LEVEL|LEAF|PATH|\n|:--:|:--:|:--:|:--:|:--:|:--|\n|0|\u5927\u548c||1|0|,\u5927\u548c|\n|21|\u65e5\u672c|0|2|0|,\u5927\u548c,\u65e5\u672c|\n|22|\u5317\u671d|21|3|1|,\u5927\u548c,\u65e5\u672c,\u5317\u671d|\n|23|\u5357\u671d|21|3|1|,\u5927\u548c,\u65e5\u672c,\u5357\u671d|\n|1|\u6b66\u8535||1|0|,\u6b66\u8535|\n|18|\u6c5f\u6238|1|2|0|,\u6b66\u8535,\u6c5f\u6238|\n|89|\u6771\u4eac|18|3|1|,\u6b66\u8535,\u6c5f\u6238,\u6771\u4eac|\n|2|\u96e3\u6ce2||1|0|,\u96e3\u6ce2|\n|19|\u5927\u5742|2|2|0|,\u96e3\u6ce2,\u5927\u5742|\n|20|\u5927\u962a|19|3|1|,\u96e3\u6ce2,\u5927\u5742,\u5927\u962a|\n\n\n# \u6839\u307e\u305f\u306f\u8449\u3092\u5224\u5b9a\u3059\u308b(CONNECT_BY_ROOT\u3001CONNECT_BY_LEAF)\n\nSELECT\u53e5\u306b\u66f8\u304f\u3053\u3068\u3067\u6728\u69cb\u9020\u306e\u8449\u3084\u6839\u3068\u306a\u308b\u30ec\u30b3\u30fc\u30c9\u306e\u5224\u5225\u306b\u4f7f\u3048\u307e\u3059\u3002\n\n - CONNECT_BY_ROOT   = \u6839\u3067\u3042\u308b\u6642:1 \u305d\u308c\u4ee5\u5916:0\n - CONNECT_BY_ISLEAF = \u8449\u3067\u3042\u308b\u6642:1 \u305d\u308c\u4ee5\u5916:0\n\n\n# \u89aa\u306e\u60c5\u5831\u3092\u6271\u3046(PRIOR)\n\nCONNECT BY \u53e5\u3067\u4f7f\u3046\u306e\u304c\u4e3b\u306a\u7528\u9014\u3067\u3059\u304c\nSELECT\u53e5\u3067\u4f7f\u3063\u305f\u5834\u5408\u306f\u89aa\u30ec\u30b3\u30fc\u30c9\u306e\u30ab\u30e9\u30e0\u3092\u53c2\u7167\u3067\u304d\u307e\u3059\u3002\n\n\n# \u5faa\u74b0\u3092\u9632\u3050\u3001\u5faa\u74b0\u306e\u60c5\u5831\u3092\u8868\u793a\u3059\u308b(CONNECT BY NOCYCLE,CONNECT_BY_ISCYCLE)\n\n\u968e\u5c64\u554f\u3044\u5408\u308f\u305b\u3067\u306f\u30ec\u30b3\u30fc\u30c9\u304c\u6728\u3084\u30ea\u30b9\u30c8\u3067\u306f\u306a\u304f\u30b0\u30e9\u30d5\u69cb\u9020\u306b\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u3001\n\u7121\u9650\u30eb\u30fc\u30d7\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\nCONNECT BY\u53e5\u306b NOCYCLE\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u3053\u308c\u3092\u9632\u3052\u307e\u3059\u3002\n\n\u307e\u305f\u8a2a\u554f\u6e08\u307f\u30ce\u30fc\u30c9\u3078\u306e\u518d\u8a2a\u554f\u304c\u8d77\u3053\u3063\u305f\u3068\u304d(\u305d\u308c\u3092\u9632\u3044\u3060\u3068\u304d)\nSELECT\u53e5\u4e2d\u306b\u66f8\u3044\u305fCONNECT_BY_ISCYCLE\u306e\u5024\u304c1\u306b\u306a\u308a\u307e\u3059\u3002\n\n# \u554f\u3044\u5408\u308f\u305b\u7d50\u679c\u3092\u7d5e\u308a\u8fbc\u3080(WHERE)\n\n\u4eca\u66f4\u4f55\u3092WHERE\u53e5\u306e\u89e3\u8aac\u3092\u3057\u3066\u308b\u3093\u3060\u3001\u3068\u601d\u308f\u308c\u305f\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\n\u968e\u5c64\u554f\u3044\u5408\u308f\u305b\u306e\u5834\u5408\u3001WHERE\u306e\u5b9f\u884c\u9806\u5e8f\u306f\nSTART \uff5e CONNECT\u306e\u4e00\u9023\u306e\u51e6\u7406\u304c\u7d42\u308f\u3063\u305f\u5f8c\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3064\u307e\u308a\u3001\u968e\u5c64\u554f\u3044\u5408\u308f\u305b\u306e\u7d50\u679c\u51fa\u6765\u4e0a\u304c\u3063\u305f\u6728\u69cb\u9020\u3084\u30b0\u30e9\u30d5\u306e\u69cb\u9020\u306b\u5bfe\u3057\u3066WHERE\u3067\u6761\u4ef6\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```sql:\u4f8b)\u8449\u3060\u3051\u8868\u793a\u3057\u305f\u3044\nSELECT place_id,place_name,pre_place,\n       LEVEL,                         --\u968e\u5c64(\u6728\u306e\u6df1\u3055)\n       CONNECT_BY_ISLEAF leaf,         --\u672b\u7aef\u304b\u3069\u3046\u304b\n       SYS_CONNECT_BY_PATH(TO_CHAR(place_name),',') AS path\nFROM\n       t_place\nWHERE  CONNECT_BY_ISLEAF = 1 --\u6ce8\u610f)SELECT\u53e5\u3067\u4ed8\u3051\u305f\u5225\u540d\u306f\u4f7f\u3048\u307e\u305b\u3093\u3002\nSTART WITH\n       pre_place is null              --\u6728\u306e\u6839\u3068\u306a\u308b\u6761\u4ef6\nCONNECT BY PRIOR place_id = pre_place --\u89aa\u5b50\u95a2\u4fc2\u306e\u6761\u4ef6(\u89aa->\u5b50)\n```\n\n\u7d50\u679c\n\n|PLACE_ID|PLACE_NAME|PRE_PLACE|LEVEL|LEAF|PATH|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|22|\u5317\u671d|21|3|1|,\u5927\u548c,\u65e5\u672c,\u5317\u671d|\n|23|\u5357\u671d|21|3|1|,\u5927\u548c,\u65e5\u672c,\u5357\u671d|\n|89|\u6771\u4eac|18|3|1|,\u6b66\u8535,\u6c5f\u6238,\u6771\u4eac|\n|20|\u5927\u962a|19|3|1|,\u96e3\u6ce2,\u5927\u5742,\u5927\u962a|\n\n\n\n\n# \u53c2\u8003\n[\u7b2c6\u56de \u968e\u5c64\u554f\u3044\u5408\u308f\u305b](http://www.oracle.com/technetwork/jp/articles/otnj-sql-image6-1352143-ja.html)\n", "tags": ["SQL", "oracle"]}