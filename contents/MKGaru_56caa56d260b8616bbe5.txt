{"context": " More than 1 year has passed since last update.\u3053\u306e\u8a18\u4e8b\u306f\u3001knockout.js Advent Calendar 2015\u306e\uff17\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002 \u5148\u306b\uff16\u65e5\u76ee\u306b\u76ee\u3092\u901a\u3059\u3053\u3068\u3092\u63a8\u5968\u3057\u3066\u3044\u307e\u3059\u3002\nknockout , knockout-es5 , knockout.punches\u74b0\u5883\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\nknockout\u3067\u3082\u3001\u3042\u308bproperty\u306b\u4f9d\u5b58\u3057\u305f\u5225\u306eproperty\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001\u5546\u54c1\u306e\u5c0f\u8a08\u3092\u8003\u3048\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u3053\u3053\u3067\u306e\u5c0f\u8a08\u306f\u5358\u4fa1\u3000\u00d7\u3000\u6570\u91cf\u3068\u3057\u307e\u3059\u3002\n\u3064\u307e\u308a\u3001\u5c0f\u8a08\u306f\u5358\u4fa1\u3068\u6570\u91cf\u306b\u4f9d\u5b58\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u3092\u30d0\u30cb\u30e9\u306ejavascript\u3067\u66f8\u304f\u3068\u3001\n\njavascript\nfunction Order(){\n  this.unitPrice=150;\n  this.quantity=3;\n  Object.defineProperty(this,'price',{\n    get:function(){\n      return this.unitPrice * this.quantity;\n    }\n  });\n}\n\n\n\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u308c\u306b\u3064\u3044\u3066\u306e\u8aac\u660e\u306f\u3001MDN\u306a\u3069\u3092\u53c2\u7167\u3059\u308b\u3068\u3044\u3044\u3067\u3059\u3002\n\u3067\u306f\u3001knockout\u3067\u306f\u3069\u3046\u66f8\u3051\u3070\u3044\u3044\u3093\u3067\u3057\u3087\u3046\u304b\uff1f\nknockout\u3082\u307e\u3063\u305f\u304f\u540c\u3058\u3067\u3082OK\u3067\u3059\u3002\n\u3082\u3061\u308d\u3093\u3001\u3053\u306eproperty\u306b\u3055\u3089\u306b\u4f9d\u5b58\u3057\u305fproperty\u3082\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002  \n\n\u306a\u304a\u3001knockout es5\u3067\u306f\u3001knockout\u7528\u306b\u30ab\u30b9\u30bf\u30e0\u3057\u305fko.defineProperty\u3068\u3044\u3046\u6a5f\u69cb\u3082\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\nObject.defineProperty\u3067\u306f\u306a\u304f\u3001\u3042\u3048\u3066ko.defineProperty\u3092\u63a1\u7528\u3059\u308b\u5229\u70b9\u306f\u3001\nObject.defineProperty\u306e\u5834\u5408\u306f\u3001property\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5ea6\u306b\u5024\u304c\u518d\u8a08\u7b97\u3055\u308c\u308b\u306e\u306b\u5bfe\u3057\u3066\u3001\nko.defineProperty\u306f\u3001\u4f9d\u5b58\u5148\u306e\u5024\u304c\u5909\u5316\u3059\u308b\u307e\u3067\u306f\u3001\u8a08\u7b97\u3055\u308c\u305f\u5024\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3068\u3057\u3066\u4fdd\u6301\u3059\u308b\u3053\u3068\u3067\u3001\u4f59\u8a08\u306a\u518d\u8a08\u7b97\u3092\u9632\u3050\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u8907\u96d1\u306a\u8a08\u7b97\u3084\u3001\u81a8\u5927\u306a\u8a08\u7b97\u91cf\u304c\u3042\u308b\u5834\u5408\u306b\u306f\u3001ko.defineProperty\u3092\u4f7f\u3046\u3079\u304d\u3067\u3057\u3087\u3046\u3002\n\n\n\u3067\u306f\u3001\u3053\u308c\u307e\u3067\u306e\u5fa9\u7fd2\u3068\u3088\u308a\u5b9f\u8df5\u7684\u306a\u4f8b\u3068\u3057\u3066\u3001\u6b21\u306e\u3088\u3046\u306a\u3082\u306e\u3092\u8003\u3048\u3066\u307f\u307e\u3059\u3002\n\u3068\u3042\u308bFruitShop\u306e\u5546\u54c1\u6ce8\u6587\u3092\u60f3\u5b9a\u3057\u307e\u3059\u3002\u3053\u306eShop\u3067\u306f\u3001\u4e0b\u8a18\u306e\u8981\u4ef6\u3092\u30af\u30ea\u30a2\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nShop\u3067\u306f\u8907\u6570\u306eItem\uff08\u5546\u54c1\uff09\u3092\u6271\u3063\u3066\u3044\u308b\u3002\nItem\u306f\u3001name\uff08\u5546\u54c1\u540d\uff09\u3068price\uff08\u5358\u4fa1\uff09\u306e\u60c5\u5831\u3092\u6301\u3063\u3066\u3044\u308b\u3002\nShop\u3067\u306f\u3001\uff11\u3064\u306eOrder\uff08\u6ce8\u6587\uff09\u3092\u53d7\u3051\u4ed8\u3051\u3066\u3044\u308b\u3002\nOrder\u306f\u3001\u8907\u6570\u306eOrderDetail\uff08\u6ce8\u6587\u5185\u8a33\uff09\u3092\u6301\u3063\u3066\u3044\u3066\u3001\u305d\u306etotalPrice\uff08\u5408\u8a08\u4fa1\u683c\uff09\u306e\u60c5\u5831\u3092\u6301\u3063\u3066\u3044\u308b\u3002\nOrderDetail\u306f Item\u3068quantity\uff08\u500b\u6570\uff09\u3068price\uff08\u5c0f\u8a08\uff09\u306e\u60c5\u5831\u3092\u6301\u3063\u3066\u3044\u308b\u3002\n\n\u3053\u308c\u3089\u3092\u5b9f\u73fe\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u304c\u3053\u3061\u3089\u3067\u3059\u3002\n\nindex.html\n<h1>Fruit Shopping Order</h1>\n<div>\u5546\u54c1\u30ea\u30b9\u30c8\uff1a\n    <table>\n        <thead>\n            <tr>\n                <th>\u5546\u54c1\u540d</th>\n                <th>\u5358\u4fa1</th>\n                <th>\u6ce8\u6587</th>\n            </tr>\n        </thead>\n        <tbody data-bind=\"foreach:items\">\n            <tr>\n                <td>{{name}}</td>\n                <td>{{price}}</td>\n                <td>\n                    <button type=\"button\" data-bind=\"click:$parent.order.add\">\u6ce8\u6587</button>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n</div>\n<br>\n<div>\u6ce8\u6587\u7968\uff1a\n    <table data-bind=\"with:order\">\n        <thead>\n            <tr>\n                <th>\u5546\u54c1\u540d</th>\n                <th>\u5358\u4fa1</th>\n                <th>\u6570\u91cf</th>\n                <th>\u5c0f\u8a08</th>\n                <th></th>\n            </tr>\n        </thead>\n        <tbody data-bind=\"foreach:details\">\n            <tr>\n                <td>{{item.name}}</td>\n                <td>{{item.price}}</td>\n                <td><input type=\"number\" data-bind=\"value:quantity\" min=\"1\" style=\"width:3em;\" /></td>\n                <td>{{price}}</td>\n                <td><button type=\"button\" data-bind=\"on.click:$parent.details.splice($index(),1)\">\u30ad\u30e3\u30f3\u30bb\u30eb</button></td>\n            </tr>\n        </tbody>\n        <tbody data-bind=\"if:!details.length\">\n            <tr>\n                <td colspan=\"5\" style=\"text-align:center\">Empty</td>\n            </tr>\n        </tbody>\n        <tfooter>\n            <tr>\n                <td colspan=\"3\">\u5408\u8a08</td>\n                <td>{{totalPrice}}</td>\n            </tr>\n        </tfooter>\n    </table>\n</div>\n\n\n\nscript.js\nfunction Item(name,price){\n    this.name = name;\n    this.price = price;\n    ko.track(this);\n}\nfunction Shop(){\n    this.items = [\n        new Item(\"apple\",60),\n        new Item(\"banana\",25),\n        new Item(\"cinnamon\",80),\n        new Item(\"dragonfruit\",120)\n    ];\n    this.order = new Order();\n    ko.track(this);\n}\nfunction OrderDetail(item,quantity){\n    this.item=item;\n    this.quantity=quantity;\n    ko.track(this);\n    Object.defineProperty(this,'price',{get:function(){\n        return this.item.price * this.quantity\n    }});\n}\nfunction Order(){\n    this.details = [];\n    ko.track(this);\n    Object.defineProperty(this,'totalPrice',{get:function(){\n        var total = 0;\n        this.details.forEach(function(detail){\n            total += detail.price;\n        });\n        return total;\n    }});\n}\nOrder.prototype.add=function(item,event){\n    var quantity = 1;\n    this.details.push(new OrderDetail(item,quantity));\n}\n\nvar vm = new Shop();\n\nko.punches.enableAll();\nko.applyBindings(vm);\n\n\n\n\u86c7\u8db3\u3067\u3059\u304c\u3001\u305d\u308d\u305d\u308d\u578b\u30c1\u30a7\u30c3\u30af\u304c\u604b\u3057\u304f\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\u3000\u305c\u3072TypeScript\u3067\u66f8\u304d\u307e\u3057\u3087\u3046\u3002\n\nscript.ts\nclass Item{\n    constructor(\n        public name:string,\n        public price:number\n    ){\n        ko.track(this);\n    }\n}\nclass Shop{\n    public items:Item[]=[];\n    public order=new Order();\n    constructor(){\n        this.items = [\n            new Item(\"apple\",60),\n            new Item(\"banana\",25),\n            new Item(\"cinnamon\",80),\n            new Item(\"dragonfruit\",120)\n        ];\n        ko.track(this);\n    }\n}\nclass OrderDetail{\n    public price:number;\n    constructor(\n        public item:Item,\n        public quantity:number\n    ){\n        ko.track(this);\n    }\n    public get price():number{\n        return this.item.price * this.quantity\n    }\n}\nclass Order{\n    public totalPrice:number;\n    public details:OrderDetail[] = [];\n    constructor(){\n        ko.track(this);\n    }\n    public get totalPrice():number{\n        var total = 0;\n        this.details.forEach((detail)=>{\n            total += detail.price;\n        });\n        return total;\n    }\n    public add(item:Item,event){\n        var quantity = 1;\n        this.details.push(new OrderDetail(item,quantity));\n    }\n}\n\nvar vm = new Shop();\n\nko.punches.enableAll();\nko.applyBindings(vm);\n\n\n    \u3053\u306e\u8a18\u4e8b\u306f\u3001knockout.js Advent Calendar 2015\u306e\uff17\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002 \u5148\u306b\uff16\u65e5\u76ee\u306b\u76ee\u3092\u901a\u3059\u3053\u3068\u3092\u63a8\u5968\u3057\u3066\u3044\u307e\u3059\u3002\n    knockout , knockout-es5 , knockout.punches\u74b0\u5883\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\nknockout\u3067\u3082\u3001\u3042\u308bproperty\u306b\u4f9d\u5b58\u3057\u305f\u5225\u306eproperty\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001\u5546\u54c1\u306e\u5c0f\u8a08\u3092\u8003\u3048\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u3053\u3053\u3067\u306e\u5c0f\u8a08\u306f``\u5358\u4fa1\u3000\u00d7\u3000\u6570\u91cf``\u3068\u3057\u307e\u3059\u3002\n\u3064\u307e\u308a\u3001``\u5c0f\u8a08``\u306f``\u5358\u4fa1``\u3068``\u6570\u91cf``\u306b\u4f9d\u5b58\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u308c\u3092**\u30d0\u30cb\u30e9**\u306ejavascript\u3067\u66f8\u304f\u3068\u3001\n\n```js:javascript\nfunction Order(){\n  this.unitPrice=150;\n  this.quantity=3;\n  Object.defineProperty(this,'price',{\n    get:function(){\n      return this.unitPrice * this.quantity;\n    }\n  });\n}\n```\n\n\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u308c\u306b\u3064\u3044\u3066\u306e\u8aac\u660e\u306f\u3001[MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty)\u306a\u3069\u3092\u53c2\u7167\u3059\u308b\u3068\u3044\u3044\u3067\u3059\u3002\n\n\u3067\u306f\u3001knockout\u3067\u306f\u3069\u3046\u66f8\u3051\u3070\u3044\u3044\u3093\u3067\u3057\u3087\u3046\u304b\uff1f\n\nknockout\u3082**\u307e\u3063\u305f\u304f\u540c\u3058\u3067**\u3082**OK**\u3067\u3059\u3002\n\n\u3082\u3061\u308d\u3093\u3001\u3053\u306eproperty\u306b\u3055\u3089\u306b\u4f9d\u5b58\u3057\u305fproperty\u3082\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002  \n\n>\u306a\u304a\u3001knockout es5\u3067\u306f\u3001knockout\u7528\u306b\u30ab\u30b9\u30bf\u30e0\u3057\u305fko.defineProperty\u3068\u3044\u3046\u6a5f\u69cb\u3082\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\n`Object.defineProperty`\u3067\u306f\u306a\u304f\u3001\u3042\u3048\u3066`ko.defineProperty`\u3092\u63a1\u7528\u3059\u308b\u5229\u70b9\u306f\u3001\n`Object.defineProperty`\u306e\u5834\u5408\u306f\u3001property\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5ea6\u306b\u5024\u304c\u518d\u8a08\u7b97\u3055\u308c\u308b\u306e\u306b\u5bfe\u3057\u3066\u3001\n`ko.defineProperty`\u306f\u3001\u4f9d\u5b58\u5148\u306e\u5024\u304c\u5909\u5316\u3059\u308b\u307e\u3067\u306f\u3001\u8a08\u7b97\u3055\u308c\u305f\u5024\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3068\u3057\u3066\u4fdd\u6301\u3059\u308b\u3053\u3068\u3067\u3001\u4f59\u8a08\u306a\u518d\u8a08\u7b97\u3092\u9632\u3050\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u8907\u96d1\u306a\u8a08\u7b97\u3084\u3001\u81a8\u5927\u306a\u8a08\u7b97\u91cf\u304c\u3042\u308b\u5834\u5408\u306b\u306f\u3001ko.defineProperty\u3092\u4f7f\u3046\u3079\u304d\u3067\u3057\u3087\u3046\u3002\n\n----------------------------------------------------------------------------------\n\n\u3067\u306f\u3001\u3053\u308c\u307e\u3067\u306e\u5fa9\u7fd2\u3068\u3088\u308a\u5b9f\u8df5\u7684\u306a\u4f8b\u3068\u3057\u3066\u3001\u6b21\u306e\u3088\u3046\u306a\u3082\u306e\u3092\u8003\u3048\u3066\u307f\u307e\u3059\u3002\n\n\u3068\u3042\u308bFruitShop\u306e\u5546\u54c1\u6ce8\u6587\u3092\u60f3\u5b9a\u3057\u307e\u3059\u3002\u3053\u306eShop\u3067\u306f\u3001\u4e0b\u8a18\u306e\u8981\u4ef6\u3092\u30af\u30ea\u30a2\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n* Shop\u3067\u306f\u8907\u6570\u306eItem\uff08\u5546\u54c1\uff09\u3092\u6271\u3063\u3066\u3044\u308b\u3002\n* Item\u306f\u3001name\uff08\u5546\u54c1\u540d\uff09\u3068price\uff08\u5358\u4fa1\uff09\u306e\u60c5\u5831\u3092\u6301\u3063\u3066\u3044\u308b\u3002\n* Shop\u3067\u306f\u3001\uff11\u3064\u306eOrder\uff08\u6ce8\u6587\uff09\u3092\u53d7\u3051\u4ed8\u3051\u3066\u3044\u308b\u3002\n* Order\u306f\u3001\u8907\u6570\u306eOrderDetail\uff08\u6ce8\u6587\u5185\u8a33\uff09\u3092\u6301\u3063\u3066\u3044\u3066\u3001\u305d\u306etotalPrice\uff08\u5408\u8a08\u4fa1\u683c\uff09\u306e\u60c5\u5831\u3092\u6301\u3063\u3066\u3044\u308b\u3002\n* OrderDetail\u306f Item\u3068quantity\uff08\u500b\u6570\uff09\u3068price\uff08\u5c0f\u8a08\uff09\u306e\u60c5\u5831\u3092\u6301\u3063\u3066\u3044\u308b\u3002\n\n\u3053\u308c\u3089\u3092\u5b9f\u73fe\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u304c[**\u3053\u3061\u3089**](http://jsfiddle.net/MKGaru/dkod52bw/)\u3067\u3059\u3002\n\n```html:index.html\n<h1>Fruit Shopping Order</h1>\n<div>\u5546\u54c1\u30ea\u30b9\u30c8\uff1a\n    <table>\n        <thead>\n            <tr>\n                <th>\u5546\u54c1\u540d</th>\n                <th>\u5358\u4fa1</th>\n                <th>\u6ce8\u6587</th>\n            </tr>\n        </thead>\n        <tbody data-bind=\"foreach:items\">\n            <tr>\n                <td>{{name}}</td>\n                <td>{{price}}</td>\n                <td>\n                    <button type=\"button\" data-bind=\"click:$parent.order.add\">\u6ce8\u6587</button>\n                </td>\n            </tr>\n        </tbody>\n    </table>\n</div>\n<br>\n<div>\u6ce8\u6587\u7968\uff1a\n    <table data-bind=\"with:order\">\n        <thead>\n            <tr>\n                <th>\u5546\u54c1\u540d</th>\n                <th>\u5358\u4fa1</th>\n                <th>\u6570\u91cf</th>\n                <th>\u5c0f\u8a08</th>\n                <th></th>\n            </tr>\n        </thead>\n        <tbody data-bind=\"foreach:details\">\n            <tr>\n                <td>{{item.name}}</td>\n                <td>{{item.price}}</td>\n                <td><input type=\"number\" data-bind=\"value:quantity\" min=\"1\" style=\"width:3em;\" /></td>\n                <td>{{price}}</td>\n                <td><button type=\"button\" data-bind=\"on.click:$parent.details.splice($index(),1)\">\u30ad\u30e3\u30f3\u30bb\u30eb</button></td>\n            </tr>\n        </tbody>\n        <tbody data-bind=\"if:!details.length\">\n            <tr>\n                <td colspan=\"5\" style=\"text-align:center\">Empty</td>\n            </tr>\n        </tbody>\n        <tfooter>\n            <tr>\n                <td colspan=\"3\">\u5408\u8a08</td>\n                <td>{{totalPrice}}</td>\n            </tr>\n        </tfooter>\n    </table>\n</div>\n```\n\n```js:script.js\nfunction Item(name,price){\n    this.name = name;\n    this.price = price;\n    ko.track(this);\n}\nfunction Shop(){\n    this.items = [\n        new Item(\"apple\",60),\n        new Item(\"banana\",25),\n        new Item(\"cinnamon\",80),\n        new Item(\"dragonfruit\",120)\n    ];\n    this.order = new Order();\n    ko.track(this);\n}\nfunction OrderDetail(item,quantity){\n    this.item=item;\n    this.quantity=quantity;\n    ko.track(this);\n    Object.defineProperty(this,'price',{get:function(){\n        return this.item.price * this.quantity\n    }});\n}\nfunction Order(){\n    this.details = [];\n    ko.track(this);\n    Object.defineProperty(this,'totalPrice',{get:function(){\n        var total = 0;\n        this.details.forEach(function(detail){\n            total += detail.price;\n        });\n        return total;\n    }});\n}\nOrder.prototype.add=function(item,event){\n    var quantity = 1;\n    this.details.push(new OrderDetail(item,quantity));\n}\n\nvar vm = new Shop();\n\nko.punches.enableAll();\nko.applyBindings(vm);\n```\n\n--------------------------------------------------------\n\n\u86c7\u8db3\u3067\u3059\u304c\u3001\u305d\u308d\u305d\u308d\u578b\u30c1\u30a7\u30c3\u30af\u304c\u604b\u3057\u304f\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\u3000\u305c\u3072TypeScript\u3067\u66f8\u304d\u307e\u3057\u3087\u3046\u3002\n\n```ts:script.ts\nclass Item{\n    constructor(\n        public name:string,\n        public price:number\n    ){\n        ko.track(this);\n    }\n}\nclass Shop{\n    public items:Item[]=[];\n    public order=new Order();\n    constructor(){\n        this.items = [\n            new Item(\"apple\",60),\n            new Item(\"banana\",25),\n            new Item(\"cinnamon\",80),\n            new Item(\"dragonfruit\",120)\n        ];\n        ko.track(this);\n    }\n}\nclass OrderDetail{\n    public price:number;\n    constructor(\n        public item:Item,\n        public quantity:number\n    ){\n        ko.track(this);\n    }\n    public get price():number{\n        return this.item.price * this.quantity\n    }\n}\nclass Order{\n    public totalPrice:number;\n    public details:OrderDetail[] = [];\n    constructor(){\n        ko.track(this);\n    }\n    public get totalPrice():number{\n        var total = 0;\n        this.details.forEach((detail)=>{\n            total += detail.price;\n        });\n        return total;\n    }\n    public add(item:Item,event){\n        var quantity = 1;\n        this.details.push(new OrderDetail(item,quantity));\n    }\n}\n\nvar vm = new Shop();\n\nko.punches.enableAll();\nko.applyBindings(vm);\n```\n", "tags": ["knockoutjs"]}