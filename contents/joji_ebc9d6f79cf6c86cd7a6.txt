{"tags": ["Android", "Java", "OkHttp"], "context": "\u4e8b\u524d\u306b\u3001\u30ed\u30fc\u30ab\u30eb\u306b\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3066\u3066\u7f6e\u3044\u3066\u4e0b\u3055\u3044\u3002\n\nMainActivity.java\npackage com.example.test.testokhttp;\n\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\n\nimport java.io.IOException;\n\nimport okhttp3.Call;\nimport okhttp3.Callback;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.Response;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        OkHttpClient client = new OkHttpClient();\n\n        Request request = new Request.Builder()\n                .url(\"http://192.168.43.201:3000/users\")\n                .build();\n\n        Call call = client.newCall(request);\n        call.enqueue(new Callback() {\n            @Override\n            public void onFailure(Call call, IOException e) {\n\n            }\n\n            @Override\n            public void onResponse(Call call, Response response) throws IOException {\n                System.out.println(\"response: \" + response.body().string());\n            }\n        });\n\n    }\n}\n\n\n\nbuild.gradle\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    testCompile 'junit:junit:4.12'\n    compile 'com.android.support:appcompat-v7:24.1.1'\n    compile 'com.squareup.okhttp3:okhttp:3.3.1'\n}\n\n\n\nheader\u3092\u8a2d\u5b9a\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u3053\u3046\u3044\u3046\u66f8\u304d\u65b9\u3067\u3082\u3044\u3044\n\nMainActivity.java\npackage com.example.test.testokhttp;\n\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\n\nimport java.io.IOException;\n\nimport okhttp3.Call;\nimport okhttp3.Callback;\nimport okhttp3.Interceptor;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.Response;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        OkHttpClient.Builder httpClient = new OkHttpClient.Builder();\n        httpClient.addInterceptor(new Interceptor() {\n            @Override\n            public Response intercept(Chain chain) throws IOException {\n                Request original = chain.request();\n\n                //header\u8a2d\u5b9a\n                Request request = original.newBuilder()\n                        .header(\"Accept\", \"application/json\")\n                        .method(original.method(), original.body())\n                        .build();\n\n                Response response = chain.proceed(request);\n\n                return response;\n            }\n        });\n\n        OkHttpClient client = httpClient.build();\n\n        Request request = new Request.Builder()\n                .url(\"http://192.168.43.201:3000/users\")\n                .build();\n\n        Call call = client.newCall(request);\n        call.enqueue(new Callback() {\n            @Override\n            public void onFailure(Call call, IOException e) {\n\n            }\n\n            @Override\n            public void onResponse(Call call, Response response) throws IOException {\n                System.out.println(\"response: \" + response.body().string());\n            }\n        });\n\n    }\n}\n\n\n\n\u4e8b\u524d\u306b\u3001\u30ed\u30fc\u30ab\u30eb\u306b\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3066\u3066\u7f6e\u3044\u3066\u4e0b\u3055\u3044\u3002\n\n```MainActivity.java\npackage com.example.test.testokhttp;\n\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\n\nimport java.io.IOException;\n\nimport okhttp3.Call;\nimport okhttp3.Callback;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.Response;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        OkHttpClient client = new OkHttpClient();\n\n        Request request = new Request.Builder()\n                .url(\"http://192.168.43.201:3000/users\")\n                .build();\n\n        Call call = client.newCall(request);\n        call.enqueue(new Callback() {\n            @Override\n            public void onFailure(Call call, IOException e) {\n\n            }\n\n            @Override\n            public void onResponse(Call call, Response response) throws IOException {\n                System.out.println(\"response: \" + response.body().string());\n            }\n        });\n\n    }\n}\n```\n\n```build.gradle\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    testCompile 'junit:junit:4.12'\n    compile 'com.android.support:appcompat-v7:24.1.1'\n    compile 'com.squareup.okhttp3:okhttp:3.3.1'\n}\n```\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-08-26 16.05.05.png](https://qiita-image-store.s3.amazonaws.com/0/39073/d2786789-0829-5722-bc54-0996d5456159.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-08-26 16.05.05.png\")\n\nheader\u3092\u8a2d\u5b9a\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u3053\u3046\u3044\u3046\u66f8\u304d\u65b9\u3067\u3082\u3044\u3044\n\n```MainActivity.java\npackage com.example.test.testokhttp;\n\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\n\nimport java.io.IOException;\n\nimport okhttp3.Call;\nimport okhttp3.Callback;\nimport okhttp3.Interceptor;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.Response;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        OkHttpClient.Builder httpClient = new OkHttpClient.Builder();\n        httpClient.addInterceptor(new Interceptor() {\n            @Override\n            public Response intercept(Chain chain) throws IOException {\n                Request original = chain.request();\n\n                //header\u8a2d\u5b9a\n                Request request = original.newBuilder()\n                        .header(\"Accept\", \"application/json\")\n                        .method(original.method(), original.body())\n                        .build();\n\n                Response response = chain.proceed(request);\n\n                return response;\n            }\n        });\n\n        OkHttpClient client = httpClient.build();\n\n        Request request = new Request.Builder()\n                .url(\"http://192.168.43.201:3000/users\")\n                .build();\n\n        Call call = client.newCall(request);\n        call.enqueue(new Callback() {\n            @Override\n            public void onFailure(Call call, IOException e) {\n\n            }\n\n            @Override\n            public void onResponse(Call call, Response response) throws IOException {\n                System.out.println(\"response: \" + response.body().string());\n            }\n        });\n\n    }\n}\n```\n\n"}