{"tags": ["SendGrid", "Heroku", "Rails5.0.1"], "context": "SendGrid\u3092Heroku\u3067\u7a3c\u50cd\u3057\u3066\u3044\u308bRuby on Rails\u306e\u30a2\u30d7\u30ea\u304b\u3089\u5229\u7528\u3059\u308b\u305f\u3081\u306e\u4f5c\u696d\u30e1\u30e2\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\nSendGrid\u30a2\u30c9\u30aa\u30f3\u306e\u8ffd\u52a0\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067SendGrid\u30a2\u30c9\u30aa\u30f3\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002Starter\u30d7\u30e9\u30f3\u306f\u7121\u6599\u3067\u3001\u6708\u959312,000\u901a\u307e\u3067\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n$ heroku addons:create sendgrid:starter\n\n\nSMTP\u306e\u8a2d\u5b9a\nSMTP\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002SendGrid\u306e\u30e6\u30fc\u30b6\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u74b0\u5883\u5909\u6570\u304b\u3089\u53d6\u5f97\u3057\u307e\u3059\u3002\n\nconfig/environments/production.rb\nconfig.action_mailer.default_url_options = { host: 'appname.herokuapp.com' }\nconfig.action_mailer.smtp_settings = {\n  user_name: ENV['SENDGRID_USERNAME'],\n  password: ENV['SENDGRID_PASSWORD'],\n  domain: 'herokuapp.com',\n  address: 'smtp.sendgrid.net',\n  port: 587,\n  authentication: :plain,\n  enable_starttls_auto: true\n}\n\n\n\nActionMailer\u306e\u4f5c\u6210\n$ rails g mailer DailyNotifier\n\n\napp/mailers/daily_notifier.rb\nclass DailyNotifier < ApplicationMailer\n  default from: 'kaoru.mori@gmail.com'\n\n  def notify\n    mail(to: 'kaoru.mori@gmail.com', subject: 'Daily Report') do |format|\n      format.text\n    end\n  end\nend\n\n\n\napp/views/daily_notifier/notify.text.erb\n\u3053\u3053\u306b\u30e1\u30fc\u30eb\u672c\u6587\u306e\u30c6\u30ad\u30b9\u30c8\u3092\u66f8\u304f\n\n\n\n\u30e1\u30fc\u30eb\u9001\u4fe1\nDailyNotifier.notify.deliver\n\nSendGrid\u3092Heroku\u3067\u7a3c\u50cd\u3057\u3066\u3044\u308bRuby on Rails\u306e\u30a2\u30d7\u30ea\u304b\u3089\u5229\u7528\u3059\u308b\u305f\u3081\u306e\u4f5c\u696d\u30e1\u30e2\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\n# SendGrid\u30a2\u30c9\u30aa\u30f3\u306e\u8ffd\u52a0\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067SendGrid\u30a2\u30c9\u30aa\u30f3\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002Starter\u30d7\u30e9\u30f3\u306f\u7121\u6599\u3067\u3001\u6708\u959312,000\u901a\u307e\u3067\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```bash\n$ heroku addons:create sendgrid:starter\n```\n\n# SMTP\u306e\u8a2d\u5b9a\n\nSMTP\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002SendGrid\u306e\u30e6\u30fc\u30b6\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u74b0\u5883\u5909\u6570\u304b\u3089\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```rb:config/environments/production.rb\nconfig.action_mailer.default_url_options = { host: 'appname.herokuapp.com' }\nconfig.action_mailer.smtp_settings = {\n  user_name: ENV['SENDGRID_USERNAME'],\n  password: ENV['SENDGRID_PASSWORD'],\n  domain: 'herokuapp.com',\n  address: 'smtp.sendgrid.net',\n  port: 587,\n  authentication: :plain,\n  enable_starttls_auto: true\n}\n```\n\n# ActionMailer\u306e\u4f5c\u6210\n\n```bash\n$ rails g mailer DailyNotifier\n```\n\n```rb:app/mailers/daily_notifier.rb\nclass DailyNotifier < ApplicationMailer\n  default from: 'kaoru.mori@gmail.com'\n\n  def notify\n    mail(to: 'kaoru.mori@gmail.com', subject: 'Daily Report') do |format|\n      format.text\n    end\n  end\nend\n```\n\n```text:app/views/daily_notifier/notify.text.erb\n\u3053\u3053\u306b\u30e1\u30fc\u30eb\u672c\u6587\u306e\u30c6\u30ad\u30b9\u30c8\u3092\u66f8\u304f\n```\n\n# \u30e1\u30fc\u30eb\u9001\u4fe1\n\n```rb\nDailyNotifier.notify.deliver\n```\n\n\n\n\n\n"}