{"context": "\n\n\u8ab0\uff1f\n\nMasahito Zembutsu\n\n\n\n@zembutsu (\u500b\u4eba\u7528)\n\u3068\u3042\u308b\u4f1a\u793e\u306e Technology Evangelist (\u4ed5\u4e8b)\n\n\nHashiCorp \u3084 Docker \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u7ffb\u8a33\u3084\u6280\u8853\u691c\u8a3c\n\n\n\nhttps://pocketstudio.net \nhttp://docs.docker.jp\n\n\n\u904e\u53bb\u306e\u767a\u8868\u30b9\u30e9\u30a4\u30c9\n\n\n\nhttp://www.slideshare.net/zembutsu \n\n\n\n\n\nTopics\n\nHashiCorp\nConsul \u6982\u8981\n\u958b\u767a\u80cc\u666f\n\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\nConsul \u3067\u30b5\u30fc\u30d3\u30b9\u767b\u9332\nConsul Template\n\n\n\nHashiCorp\n\n\u4f1a\u793e\u8a2d\u7acb\u306f 2012 \u5e74\n\n\nMitchell Hashimoto \u6c0f\u3068 Armon Dadger\n\n\n\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u7ba1\u7406\u306b\u9769\u547d\u3092\u3082\u305f\u3089\u3059\u3053\u3068\n\u8a2d\u8a08\u601d\u60f3\u306f The tao of HashiCorp\uff08Workflows, not Technologies \u3084\u30a4\u30f3\u30d5\u30e9\u306e\u30b3\u30fc\u30c9\u5316\uff09\n\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u57fa\u672c\u6280\u8853\u3092\u5143\u306b\u3001\u30aa\u30fc\u30d7\u30f3\u306a\u958b\u767a\u4f53\u5236\uff082010\u5e74\u304b\u3089\uff09\n\n\n\n\n\nConsul\n\n\nConsul \u3068\u306f\n\nhttps://www.consul.io/\n\n\u30a4\u30f3\u30d5\u30e9\u4e0a\u306e\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\u3068\u30b5\u30fc\u30d3\u30b9\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u306e\u305f\u3081\u306e\u30c4\u30fc\u30eb\n\nConsul has multiple components, but as a whole, it is a tool for discovering and configuring services in your infrastructure. \n\n\n\n\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u3068\u3057\u3066\u958b\u767a\u30fb\u516c\u958b\n\n\nhttps://github.com/hashicorp/consul \nMozilla Public License, version 2.0\n\n\n\n\n\nConsul \u306e\u6a5f\u80fd\n\n\u30b5\u30fc\u30d3\u30b9\u30fb\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u3068\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\n\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\n\u30ad\u30fc\u30d0\u30ea\u30e5\u30fc\u30fb\u30b9\u30c8\u30a2\n\u8010\u969c\u5bb3\u6027\n\n\n\n\u30b5\u30fc\u30d3\u30b9\u30fb\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\n\nConsul \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u300capi\u300d\u3084\u300cmysql\u300d\u306e\u3088\u3046\u306a\u30b5\u30fc\u30d3\u30b9\u3092\u5b9a\u7fa9\n\u4ed6\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306f Consul \u3067\u7279\u5b9a\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u767a\u898b\uff08discover\uff09\u3067\u304d\u308b\u3002\n\u30b5\u30fc\u30d3\u30b9\u306e\u60c5\u5831\u3092 DNS \u3001HTTP\u3001API \u7d4c\u7531\u3067\u628a\u63e1\u3067\u304d\u308b\nSerf \u306e\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u6a5f\u80fd\u7fa4\n\n\n\n\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306f\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\uff08\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3084 Nagios \u30d7\u30e9\u30b0\u30a4\u30f3\uff09\u3067\u30b5\u30fc\u30d3\u30b9\u3092\u76e3\u8996\n\u30b5\u30fc\u30d3\u30b9\u30fb\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u3068\u9023\u52d5\u3057\u3066\u304a\u308a\u3001\u76e3\u8996\u72b6\u614b\u304c\u76f4\u3061\u306b\uff08\u30b5\u30fc\u30d3\u30b9\u30fb\u30ab\u30bf\u30ed\u30b0\u306b\uff09\u53cd\u6620\u3059\u308b\n\n\u305f\u3060\u3057\u3001\u4e00\u822c\u7684\u306a\u76e3\u8996\u30b7\u30b9\u30c6\u30e0\u3068\u306f\u7570\u306a\u308b\n\n\u30ce\u30fc\u30c9(\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8)\u304c\u72b6\u614b\u3092\u30b5\u30fc\u30d0\u306b\u4f1d\u3048\u308b\n\u30b5\u30fc\u30d0\u306f\u3042\u304f\u307e\u3067\u30c7\u30fc\u30bf\u3092\u4fdd\u6301\u3059\u308b\u3060\u3051\n\n\n\n\u30ad\u30fc\u30d0\u30ea\u30e5\u30fc\u30fb\u30b9\u30c8\u30a2\n\nConsul \u306e\u5185\u90e8\u30c7\u30fc\u30bf\u3092\u4fdd\u7ba1\u3059\u308b\u305f\u3081\u306e\u3001\u968e\u5c64\u7684\u306a\u30ad\u30fc\u30d0\u30ea\u30e5\u30fc\u30fb\u30b9\u30c8\u30a2\n\u52d5\u7684\u306a\u8a2d\u5b9a\u5909\u66f4\u3084\u3001\u30ea\u30fc\u30c0\u30fc\u30a8\u30ec\u30af\u30b7\u30e7\u30f3\u6a5f\u80fd\u3092\u5099\u3048\u308b\nHTTP \u3084 API \u3092\u901a\u3057\u3066\u7c21\u5358\u306b\u30a2\u30af\u30bb\u30b9\n\n\n\n\u8010\u969c\u5bb3\u6027\n\nRaft \u30d7\u30ed\u30c8\u30b3\u30eb\uff08\u5206\u6563\u5408\u610f\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\uff09\u3092\u4f7f\u3063\u305f\u30c7\u30fc\u30bf\u53ef\u7528\u6027\u3092\u9ad8\u3081\u308b\u4ed5\u7d44\u307f\n\n\n\u30ea\u30fc\u30c0\u30fc\u9078\u51fa\n\u30ed\u30b0\u306e\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3 \n\n\nGossip \u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u4f7f\u3063\u305f\u4ed5\u7d44\u307f\n\n\n\u30a4\u30d9\u30f3\u30c8\u9001\u4fe1\n\u969c\u5bb3\u691c\u51fa\n\n\n\u7c21\u5358\u306b\u8907\u6570\u306e\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\uff08\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\uff09\u3092\u6a2a\u65ad\u3057\u3066\u5229\u7528\u53ef\u80fd\uff08\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u3068\u3044\u3046\u6982\u5ff5\uff09\n\n\n\n\n\n\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30fb\u30b5\u30fc\u30d0\u578b\u306e\u5206\u6563\u30fb\u9ad8\u53ef\u7528\u6027\u30b7\u30b9\u30c6\u30e0\n\u5404\u30ce\u30fc\u30c9\u3067\u306f Consul \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u5b9f\u884c\n\n\nConsul \u306f\u5358\u4e00\u306e\u30d0\u30a4\u30ca\u30ea\uff08\u8ffd\u52a0\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306f\u4e0d\u8981\uff09\n\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306f Consul \u30b5\u30fc\u30d0\u3068\u901a\u4fe1\nConsul \u30b5\u30fc\u30d0\u306f\u30c7\u30fc\u30bf\u3092\u4fdd\u7ba1\u30fb\u8907\u88fd\u3059\u308b\u5834\u6240\n\u30b5\u30fc\u30d0\u81ea\u8eab\u3067\u30ea\u30fc\u30c0\u30fc\u3092\u9078\u51fa\n\u901a\u5e38\u306f\u30c7\u30fc\u30bf\u640d\u5931\u3092\u907f\u3051\u308b\u305f\u3081\uff13\u3001\uff15\u53f0\u306e\u30b5\u30fc\u30d0\u63a8\u5968\n\n\n\n\n\n\n\n\n\n\u4ed6\u306e\u30c4\u30fc\u30eb\u3068\u306e\u6bd4\u8f03\n\nGo \u8a00\u8a9e\u3067\u66f8\u304b\u308c\u3066\u3044\u308b\n\n\n \u30d0\u30a4\u30ca\u30ea\uff11\u3064\u3067\u52d5\u4f5c \n\n\n\u8a2d\u5b9a\u3084\u7ba1\u7406\u304c\u30b7\u30f3\u30d7\u30eb\n\u6a5f\u80fd\u306f\u30b5\u30fc\u30d3\u30b9\u30fb\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u306b\u7279\u5316\n\n\n\nConsul \u3092\u4f7f\u3046\n\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\nConsul \u306e\u30b5\u30a4\u30c8\u304b\u3089\u3001\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3054\u3068\u306e\u30d0\u30a4\u30ca\u30ea\u3092\u53d6\u5f97\n\n\nhttps://www.consul.io/downloads.html\n\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f ZIP \u3092\u5c55\u958b\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u78ba\u8a8d\n\u30d1\u30b9\u304c\u901a\u3063\u305f\u5834\u6240\u306b\u7f6e\u304f\n\nconsul \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u5b9f\u884c \n\n\n\nLinux \u306e\u4f8b\n$ wget -O conzul.zip https://releases.hashicorp.com/consul/0.6.4/consul_0.6.4_linux_amd64.zip\n$ unzip consul.zip\n$ ./consul version\nConsul v0.6.4\nConsul Protocol: 3 (Understands back to: 1)\n$ nohup consul agent -server \\\n    -data-dir=\"/tmp/consul\" \\\n    -bootstrap-expect 1 \\\n    -node=consul1 \\\n    -config-dir=/etc/consul.d &\n$ ./consul members\nNode  Address          Status  Type    Build  Protocol  DC\nweb   172.17.0.1:8301  alive   server  0.6.4  2         dc1\n$ consul join <\u30ce\u30fc\u30c9> <\u30ce\u30fc\u30c9>\n\n\n\nAPI\n$ consul members\nNode            Address               Status  Type    Build  Protocol  DC\nweb.zem.jp      128.199.84.221:8301   alive   server  0.5.2  2         dc1\nnode1.zem.jp    128.199.130.243:8301  alive   client  0.5.2  2         dc1\nnode2.zem.jp    128.199.137.114:8301  alive   client  0.5.2  2         dc1\n\n\n\n\n\u30b5\u30fc\u30d3\u30b9\u767b\u9332\u4f8b\n\nweb.json\n{\n  \"service\": {\n    \"name\": \"web\",\n    \"tags\": [ \"httpd\" ],\n    \"port\": 80,\n    \"check\": {\n      \"script\": \"curl localhost:80 >/dev/null 2>&1\",\n      \"interval\": \"10s\"\n    }\n  },\n  \"key\": \"web\",\n  \"handler\": \"/opt/consul/consul-handler.sh\"\n}\n\n\n\n\n\n\nHTTP\n$ curl http://127.0.0.1:8500/v1/catalog/nodes\n[{\"Node\":\"web.zem.jp\",\"Address\":\"128.199.84.221\"}]\n\n\n\n\nDNS\n$ dig @127.0.0.1 -p 8600 web.zem.jp.node.consul\n\n;; QUESTION SECTION:\n;web.zem.jp.node.consul.    IN      A\n\n;; ANSWER SECTION:\nweb.zem.jp.node.consul. 0   IN      A       128.199.84.221\n\n\n\nDNS \u306e\u60c5\u5831\uff08\u30b5\u30fc\u30d3\u30b9\u30fb\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\uff09\u306f\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u3068\u9023\u52d5\n\n\n\nDNS\n$ dig @127.0.0.1 -p 8600 web.service.consul\n\n;; QUESTION SECTION:\n;web.service.consul.            IN      A\n\n;; ANSWER SECTION:\nweb.service.consul.     0       IN      A       128.199.137.114\nweb.service.consul.     0       IN      A       128.199.130.243\n\n\n\n\nDNS\n$ dig @127.0.0.1 -p 8600 web.service.consul\n\n;; QUESTION SECTION:\n;web.service.consul.            IN      A\n\n;; ANSWER SECTION:\nweb.service.consul.     0       IN      A       128.199.137.114\nweb.service.consul.     0       IN      A       128.199.130.243\n\n\n\n\u3067\u3082\u3053\u308c\u3001\u898b\u3066\u308b\u3060\u3051\u30fb\u30fb\u30fb\uff1f\n\n\n\nconsul watch\n\n\u30a4\u30d9\u30f3\u30c8\u306e status \u5909\u5316\u3092\u30c8\u30ea\u30ac\u3068\u3057\u3001\u4efb\u610f\u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\n\n$ consul watch \u2013http-addr=127.0.0.1:8500 \\\n    -type=service \\\n    \u2013service=mysql \\\n    /opt/action.sh\n\n\n\u30bf\u30a4\u30d7 service\n\n\u30b5\u30fc\u30d3\u30b9\u540d mysql \n\u30a4\u30d9\u30f3\u30c8\u767a\u751f\u6642\u306b /opt/action.sh \u3092\u5b9f\u884c\n\n\n\nconsul watch\n\n\u30a4\u30d9\u30f3\u30c8\u306e status \u5909\u5316\u3092\u30c8\u30ea\u30ac\u3068\u3057\u3001\u4efb\u610f\u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\n\n$ consul watch \u2013http-addr=127.0.0.1:8500 \\\n    -type=service \\\n    \u2013service=mysql \\\n    /opt/action.sh\n\n\n\u30bf\u30a4\u30d7 service\n\n\u30b5\u30fc\u30d3\u30b9\u540d mysql \n\u30a4\u30d9\u30f3\u30c8\u767a\u751f\u6642\u306b /opt/action.sh \u3092\u5b9f\u884c\n\u9762\u5012\u305d\u3046\u30fb\u30fb\u30fb\n\n\n\n\n\n\n\n\n\nConsul Template\n\nhttps://github.com/hashicorp/consul-template\nconsul \u306e\u30a4\u30d9\u30f3\u30c8\u3092\u76e3\u8996\u3059\u308b\u30c7\u30fc\u30e2\u30f3\n\u72b6\u6cc1\u5909\u5316\u304c\u767a\u751f\u3059\u308b\u3068\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8aad\u307f\u8fbc\u3080 \n\u30b5\u30fc\u30d3\u30b9\u30fb\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u306e\u72b6\u614b\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u53cd\u6620\n\u4efb\u610f\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09 \n\n\n\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f8b\n\nhost-node.tmpl\n# consul nodes{{range nodes}}\n{{.Address}}    {{.Node}}{{end}}\n\n\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f8b\n\nhost-node.tmpl\n# consul nodes{{range nodes}}\n{{.Address}}    {{.Node}}{{end}}\n\n\n$ consul-template -consul <Consul\u30b5\u30fc\u30d0>:<HTTP port> \\\n    -template \"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30d5\u30a1\u30a4\u30eb\u540d:\u51fa\u529b\u5148:\u30b3\u30de\u30f3\u30c9(\u30aa\u30d7\u30b7\u30e7\u30f3)\" \\\n    -template \"\u540c\u4e0a\" (\u30aa\u30d7\u30b7\u30e7\u30f3) \\\n    -dry (\u30aa\u30d7\u30b7\u30e7\u30f3)\n\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f8b\n\nhost-node.tmpl\n# consul nodes{{range nodes}}\n{{.Address}}    {{.Node}}{{end}}\n\n\n$ consul-template -consul <Consul\u30b5\u30fc\u30d0>:<HTTP port> \\\n    -template \"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30d5\u30a1\u30a4\u30eb\u540d:\u51fa\u529b\u5148:\u30b3\u30de\u30f3\u30c9(\u30aa\u30d7\u30b7\u30e7\u30f3)\" \\\n    -template \"\u540c\u4e0a\" (\u30aa\u30d7\u30b7\u30e7\u30f3) \\\n    -dry (\u30aa\u30d7\u30b7\u30e7\u30f3)\n\n\n/etc/hosts\n# consul nodes\n192.168.39.3    sion.pocketstudio.net\n192.168.39.11    web1\n192.168.39.12    web2\n\n\n\n\nnginx \u306b\u6d3b\u7528\u3059\u308b\u4f8b\nupstream frontend { {{range service \"web\"}}\n    server {{.Address}}:{{.Port}};{{end}}\n}\n\nserver {\n    listen 80 default_server;\n    location / {\n        proxy_pass http://frontend;\n    }\n}\n\n\n\nnginx \u306b\u6d3b\u7528\u3059\u308b\u4f8b\nupstream frontend { {{range service \"web\"}}\n    server {{.Address}}:{{.Port}};{{end}}\n}\n\nserver {\n    listen 80 default_server;\n    location / {\n        proxy_pass http://frontend;\n    }\n}\n\n\n\u7b2c8\u56de\uff08\u6700\u7d42\u56de\uff09\u3000\u5b9a\u578b\u4f5c\u696d\u3092\u81ea\u52d5\u5316\u3059\u308bConsul Template\uff1aSerf\uff0fConsul\u3067\u7ba1\u7406\u3092\u81ea\u52d5\u5316\uff01\u3000\uff5e\u5b9f\u8df5\u7684\u306a\u624b\u6cd5\u3092\u7d39\u4ecb\uff5e\uff5cgihyo.jp \u2026 \u6280\u8853\u8a55\u8ad6\u793e\n\n\n\nconsul-template \u3092\u4f7f\u3046\u306b\u306f\n$ sudo yum -y install git golang\n$ export GOPATH=/usr/local/src/go\n$ git clone https://github.com/hashicorp/consul-template.git\n$ cd consul-templae\n$ make\n$ sudo cp ./bin/consul-template /usr/bin/\n$ consul-template --version\nconsul-template v0.7.1.dev\n\n\u2026\u3068\u601d\u3063\u3066\u3044\u305f\u3089\u3001\u4eca\u306f\u30d0\u30a4\u30ca\u30ea\u304c\u3042\u308b\u306e\u3067\u7c21\u5358\u306b\u4f7f\u3048\u307e\u3059\u3088\uff01\nhttps://releases.hashicorp.com/consul-template/0.15.0/\n\uff08\u4f1a\u5834\u304b\u3089\u306e\u3054\u6307\u6458\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\uff01\uff09\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n\n\nhttps://github.com/hashicorp/consul-template/blob/master/README.md\n\n\n\n\n\n\u3075\u308a\u304b\u3048\u308a\n\n\n\u3075\u308a\u304b\u3048\u308a\n\n\nConsul \u3068\u306f\n\n\n\u30a4\u30f3\u30d5\u30e9\u4e0a\u306e\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\u3068\u30b5\u30fc\u30d3\u30b9\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u306e\u305f\u3081\u306e\u30c4\u30fc\u30eb\n\n\n\u6a5f\u80fd\n\n\n\u30b5\u30fc\u30d3\u30b9\u30fb\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u3068\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\n\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\n\u30ad\u30fc\u30d0\u30ea\u30e5\u30fc\u30fb\u30b9\u30c8\u30a2\n\u8010\u969c\u5bb3\u6027\n\n\nConsul Template \u3067\u5b9a\u578b\u51e6\u7406\u306e\u7c21\u6613\u5316\n\n\n\n\u4f55\u304b\u6c17\u306b\u306a\u308b\u3068\u3053\u308d\u306f\u3042\u308a\u307e\u3059\u304b\uff1f\n\n\nreferences\n\nhttps://www.consul.io/\n\nSerf / Consul \u5165\u9580 \uff5e\u4ed5\u4e8b\u3092\u697d\u3057\u304f\u3057\u3088\u3046\uff5e\n\nhttp://www.slideshare.net/zembutsu/introduce-orchestration-serf-and-consul-presentation\n\n\n\nSerf\uff0fConsul\u3067\u7ba1\u7406\u3092\u81ea\u52d5\u5316\uff01\u3000\uff5e\u5b9f\u8df5\u7684\u306a\u624b\u6cd5\u3092\u7d39\u4ecb\uff5e\uff1a\u7279\u96c6\uff5cgihyo.jp \u2026 \u6280\u8853\u8a55\u8ad6\u793e\n\nhttp://gihyo.jp/admin/feature/01/serf-consul\n\n\n\n\u523a\u8eab\u30bf\u30f3\u30dd\u30dd\u3092\u6bb2\u6ec5\u3059\u308b Consul Template\n\nhttp://www.slideshare.net/zembutsu/consul-template-beat-tanpopo-on-sashimi\n\n\n\nSerf2Excel - Serf \u3092\u5b9f\u904b\u7528\u306b\u6d3b\u304b\u3059\u8a71 + Consul \u3082\u3042\u308b\u3088\n\nhttp://www.slideshare.net/zembutsu/serf-to-excel-and-consul-qpstudy\n\n\n\nHashicorp\u306e\u30c4\u30fc\u30eb\u7fa4\u3068\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\n\nhttp://www.slideshare.net/zembutsu/hashicorp-orchestration-tools-introduction\n\n\n\n# \u8ab0\uff1f\n\n* Masahito Zembutsu\n * [@zembutsu](https://twitter.com/zembutsu) (\u500b\u4eba\u7528)\n * \u3068\u3042\u308b\u4f1a\u793e\u306e Technology Evangelist ([\u4ed5\u4e8b](https://twitter.com/zembutsu_works))\n* HashiCorp \u3084 Docker \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u7ffb\u8a33\u3084\u6280\u8853\u691c\u8a3c\n * https://pocketstudio.net \n * http://docs.docker.jp\n* \u904e\u53bb\u306e\u767a\u8868\u30b9\u30e9\u30a4\u30c9\n * http://www.slideshare.net/zembutsu \n\n----\n# Topics\n\n* HashiCorp\n* Consul \u6982\u8981\n* \u958b\u767a\u80cc\u666f\n* \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\n* Consul \u3067\u30b5\u30fc\u30d3\u30b9\u767b\u9332\n* Consul Template\n\n----\n\n# HashiCorp\n\n* \u4f1a\u793e\u8a2d\u7acb\u306f 2012 \u5e74\n * Mitchell Hashimoto \u6c0f\u3068 Armon Dadger\n* \u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u7ba1\u7406\u306b\u9769\u547d\u3092\u3082\u305f\u3089\u3059\u3053\u3068\n* \u8a2d\u8a08\u601d\u60f3\u306f The tao of HashiCorp\uff08Workflows, not Technologies \u3084\u30a4\u30f3\u30d5\u30e9\u306e\u30b3\u30fc\u30c9\u5316\uff09\n* \u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u57fa\u672c\u6280\u8853\u3092\u5143\u306b\u3001\u30aa\u30fc\u30d7\u30f3\u306a\u958b\u767a\u4f53\u5236\uff082010\u5e74\u304b\u3089\uff09\n\n----\n![hashicorp.png](https://qiita-image-store.s3.amazonaws.com/0/13002/b6e84fe4-d996-c048-765e-6c9ab36c604c.png)\n\n\n----\n\n# Consul \n\n----\n\n# Consul \u3068\u306f\n\n* https://www.consul.io/\n* \u30a4\u30f3\u30d5\u30e9\u4e0a\u306e\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\u3068\u30b5\u30fc\u30d3\u30b9\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u306e\u305f\u3081\u306e\u30c4\u30fc\u30eb\n * Consul has multiple components, but as a whole, it is a tool for discovering and configuring services in your infrastructure. \n\n* \u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u3068\u3057\u3066\u958b\u767a\u30fb\u516c\u958b\n * https://github.com/hashicorp/consul \n * Mozilla Public License, version 2.0\n\n----\n\n# Consul \u306e\u6a5f\u80fd\n\n* \u30b5\u30fc\u30d3\u30b9\u30fb\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u3068\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\n* \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\n* \u30ad\u30fc\u30d0\u30ea\u30e5\u30fc\u30fb\u30b9\u30c8\u30a2\n* \u8010\u969c\u5bb3\u6027\n\n----\n\n# \u30b5\u30fc\u30d3\u30b9\u30fb\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\n\n* Consul \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u300capi\u300d\u3084\u300cmysql\u300d\u306e\u3088\u3046\u306a\u30b5\u30fc\u30d3\u30b9\u3092\u5b9a\u7fa9\n* \u4ed6\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306f Consul \u3067\u7279\u5b9a\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u767a\u898b\uff08discover\uff09\u3067\u304d\u308b\u3002\n* \u30b5\u30fc\u30d3\u30b9\u306e\u60c5\u5831\u3092 DNS \u3001HTTP\u3001API \u7d4c\u7531\u3067\u628a\u63e1\u3067\u304d\u308b\n* Serf \u306e\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u6a5f\u80fd\u7fa4\n\n----\n\n# \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\n\n* \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306f\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\uff08\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3084 Nagios \u30d7\u30e9\u30b0\u30a4\u30f3\uff09\u3067\u30b5\u30fc\u30d3\u30b9\u3092\u76e3\u8996\n* \u30b5\u30fc\u30d3\u30b9\u30fb\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u3068\u9023\u52d5\u3057\u3066\u304a\u308a\u3001\u76e3\u8996\u72b6\u614b\u304c\u76f4\u3061\u306b\uff08\u30b5\u30fc\u30d3\u30b9\u30fb\u30ab\u30bf\u30ed\u30b0\u306b\uff09\u53cd\u6620\u3059\u308b\n\n\u305f\u3060\u3057\u3001\u4e00\u822c\u7684\u306a\u76e3\u8996\u30b7\u30b9\u30c6\u30e0\u3068\u306f\u7570\u306a\u308b\n\n* \u30ce\u30fc\u30c9(\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8)\u304c\u72b6\u614b\u3092\u30b5\u30fc\u30d0\u306b\u4f1d\u3048\u308b\n* \u30b5\u30fc\u30d0\u306f\u3042\u304f\u307e\u3067\u30c7\u30fc\u30bf\u3092\u4fdd\u6301\u3059\u308b\u3060\u3051\n\n----\n\n# \u30ad\u30fc\u30d0\u30ea\u30e5\u30fc\u30fb\u30b9\u30c8\u30a2\n\n* Consul \u306e\u5185\u90e8\u30c7\u30fc\u30bf\u3092\u4fdd\u7ba1\u3059\u308b\u305f\u3081\u306e\u3001\u968e\u5c64\u7684\u306a\u30ad\u30fc\u30d0\u30ea\u30e5\u30fc\u30fb\u30b9\u30c8\u30a2\n* \u52d5\u7684\u306a\u8a2d\u5b9a\u5909\u66f4\u3084\u3001\u30ea\u30fc\u30c0\u30fc\u30a8\u30ec\u30af\u30b7\u30e7\u30f3\u6a5f\u80fd\u3092\u5099\u3048\u308b\n* HTTP \u3084 API \u3092\u901a\u3057\u3066\u7c21\u5358\u306b\u30a2\u30af\u30bb\u30b9\n\n----\n\n# \u8010\u969c\u5bb3\u6027\n\n* Raft \u30d7\u30ed\u30c8\u30b3\u30eb\uff08\u5206\u6563\u5408\u610f\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\uff09\u3092\u4f7f\u3063\u305f\u30c7\u30fc\u30bf\u53ef\u7528\u6027\u3092\u9ad8\u3081\u308b\u4ed5\u7d44\u307f\n * \u30ea\u30fc\u30c0\u30fc\u9078\u51fa\n * \u30ed\u30b0\u306e\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3 \n* Gossip \u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u4f7f\u3063\u305f\u4ed5\u7d44\u307f\n * \u30a4\u30d9\u30f3\u30c8\u9001\u4fe1\n * \u969c\u5bb3\u691c\u51fa\n* \u7c21\u5358\u306b\u8907\u6570\u306e\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\uff08\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\uff09\u3092\u6a2a\u65ad\u3057\u3066\u5229\u7528\u53ef\u80fd\uff08\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u3068\u3044\u3046\u6982\u5ff5\uff09\n\n----\n![consul-service.png](https://qiita-image-store.s3.amazonaws.com/0/13002/b60bc6f2-28e0-eb8e-568c-c5558da9e0bf.png)\n\n\n----\n\n# \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\n\n* \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30fb\u30b5\u30fc\u30d0\u578b\u306e\u5206\u6563\u30fb\u9ad8\u53ef\u7528\u6027\u30b7\u30b9\u30c6\u30e0\n* \u5404\u30ce\u30fc\u30c9\u3067\u306f Consul \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u5b9f\u884c\n  * Consul \u306f\u5358\u4e00\u306e\u30d0\u30a4\u30ca\u30ea\uff08\u8ffd\u52a0\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306f\u4e0d\u8981\uff09\n\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306f Consul \u30b5\u30fc\u30d0\u3068\u901a\u4fe1\n  * Consul \u30b5\u30fc\u30d0\u306f\u30c7\u30fc\u30bf\u3092\u4fdd\u7ba1\u30fb\u8907\u88fd\u3059\u308b\u5834\u6240\n  * \u30b5\u30fc\u30d0\u81ea\u8eab\u3067\u30ea\u30fc\u30c0\u30fc\u3092\u9078\u51fa\n  * \u901a\u5e38\u306f\u30c7\u30fc\u30bf\u640d\u5931\u3092\u907f\u3051\u308b\u305f\u3081\uff13\u3001\uff15\u53f0\u306e\u30b5\u30fc\u30d0\u63a8\u5968\n\n----\n![consul-arch2.png](https://qiita-image-store.s3.amazonaws.com/0/13002/3f19a6bb-6ff2-81c0-361b-b19b676a0b1a.png)\n\n----\n![consul-arch1.png](https://qiita-image-store.s3.amazonaws.com/0/13002/1d24e82b-7a4c-5e46-a853-1f964ba3e1a6.png)\n\n----\n\n\n# \u4ed6\u306e\u30c4\u30fc\u30eb\u3068\u306e\u6bd4\u8f03\n\n* Go \u8a00\u8a9e\u3067\u66f8\u304b\u308c\u3066\u3044\u308b\n *  \u30d0\u30a4\u30ca\u30ea\uff11\u3064\u3067\u52d5\u4f5c \n* \u8a2d\u5b9a\u3084\u7ba1\u7406\u304c\u30b7\u30f3\u30d7\u30eb\n* \u6a5f\u80fd\u306f\u30b5\u30fc\u30d3\u30b9\u30fb\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u306b\u7279\u5316\n\n----\n\n# Consul \u3092\u4f7f\u3046\n\n----\n\n# \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n* Consul \u306e\u30b5\u30a4\u30c8\u304b\u3089\u3001\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3054\u3068\u306e\u30d0\u30a4\u30ca\u30ea\u3092\u53d6\u5f97\n * https://www.consul.io/downloads.html\n* \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f ZIP \u3092\u5c55\u958b\n* \u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u78ba\u8a8d\n* \u30d1\u30b9\u304c\u901a\u3063\u305f\u5834\u6240\u306b\u7f6e\u304f\n* `consul` \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u5b9f\u884c \n\n----\n\n# Linux \u306e\u4f8b\n\n```\n$ wget -O conzul.zip https://releases.hashicorp.com/consul/0.6.4/consul_0.6.4_linux_amd64.zip\n$ unzip consul.zip\n$ ./consul version\nConsul v0.6.4\nConsul Protocol: 3 (Understands back to: 1)\n$ nohup consul agent -server \\\n    -data-dir=\"/tmp/consul\" \\\n    -bootstrap-expect 1 \\\n    -node=consul1 \\\n    -config-dir=/etc/consul.d &\n$ ./consul members\nNode  Address          Status  Type    Build  Protocol  DC\nweb   172.17.0.1:8301  alive   server  0.6.4  2         dc1\n$ consul join <\u30ce\u30fc\u30c9> <\u30ce\u30fc\u30c9>\n```\n----\n\n```bash:API\n$ consul members\nNode            Address               Status  Type    Build  Protocol  DC\nweb.zem.jp      128.199.84.221:8301   alive   server  0.5.2  2         dc1\nnode1.zem.jp    128.199.130.243:8301  alive   client  0.5.2  2         dc1\nnode2.zem.jp    128.199.137.114:8301  alive   client  0.5.2  2         dc1\n```\n\n----\n# \u30b5\u30fc\u30d3\u30b9\u767b\u9332\u4f8b\n\n```web.json\n{\n  \"service\": {\n    \"name\": \"web\",\n    \"tags\": [ \"httpd\" ],\n    \"port\": 80,\n    \"check\": {\n      \"script\": \"curl localhost:80 >/dev/null 2>&1\",\n      \"interval\": \"10s\"\n    }\n  },\n  \"key\": \"web\",\n  \"handler\": \"/opt/consul/consul-handler.sh\"\n}\n```\n\n----\n\n![webui.png](https://qiita-image-store.s3.amazonaws.com/0/13002/f370ac8a-3a9b-e39e-78ed-ecfa6e8252e4.png)\n\n----\n\n```bash:HTTP\n$ curl http://127.0.0.1:8500/v1/catalog/nodes\n[{\"Node\":\"web.zem.jp\",\"Address\":\"128.199.84.221\"}]\n```\n\n----\n\n```bash:DNS\n$ dig @127.0.0.1 -p 8600 web.zem.jp.node.consul\n\n;; QUESTION SECTION:\n;web.zem.jp.node.consul.    IN      A\n\n;; ANSWER SECTION:\nweb.zem.jp.node.consul. 0   IN      A       128.199.84.221\n```\n* DNS \u306e\u60c5\u5831\uff08\u30b5\u30fc\u30d3\u30b9\u30fb\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\uff09\u306f\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u3068\u9023\u52d5\n\n----\n\n```bash:DNS\n$ dig @127.0.0.1 -p 8600 web.service.consul\n\n;; QUESTION SECTION:\n;web.service.consul.            IN      A\n\n;; ANSWER SECTION:\nweb.service.consul.     0       IN      A       128.199.137.114\nweb.service.consul.     0       IN      A       128.199.130.243\n```\n\n\n----\n\n```bash:DNS\n$ dig @127.0.0.1 -p 8600 web.service.consul\n\n;; QUESTION SECTION:\n;web.service.consul.            IN      A\n\n;; ANSWER SECTION:\nweb.service.consul.     0       IN      A       128.199.137.114\nweb.service.consul.     0       IN      A       128.199.130.243\n```\n\n* \u3067\u3082\u3053\u308c\u3001\u898b\u3066\u308b\u3060\u3051\u30fb\u30fb\u30fb\uff1f\n\n----\n# consul watch\n\n* \u30a4\u30d9\u30f3\u30c8\u306e status \u5909\u5316\u3092\u30c8\u30ea\u30ac\u3068\u3057\u3001\u4efb\u610f\u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\n\n```bash\n$ consul watch \u2013http-addr=127.0.0.1:8500 \\\n    -type=service \\\n    \u2013service=mysql \\\n    /opt/action.sh\n```\n\n* \u30bf\u30a4\u30d7 `service`\n* \u30b5\u30fc\u30d3\u30b9\u540d `mysql` \n* \u30a4\u30d9\u30f3\u30c8\u767a\u751f\u6642\u306b `/opt/action.sh` \u3092\u5b9f\u884c\n\n----\n# consul watch\n\n* \u30a4\u30d9\u30f3\u30c8\u306e status \u5909\u5316\u3092\u30c8\u30ea\u30ac\u3068\u3057\u3001\u4efb\u610f\u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\n\n```bash\n$ consul watch \u2013http-addr=127.0.0.1:8500 \\\n    -type=service \\\n    \u2013service=mysql \\\n    /opt/action.sh\n```\n\n* \u30bf\u30a4\u30d7 `service`\n* \u30b5\u30fc\u30d3\u30b9\u540d `mysql` \n* \u30a4\u30d9\u30f3\u30c8\u767a\u751f\u6642\u306b `/opt/action.sh` \u3092\u5b9f\u884c\n* \u9762\u5012\u305d\u3046\u30fb\u30fb\u30fb\n\n\n----\n\n![tmpl1.png](https://qiita-image-store.s3.amazonaws.com/0/13002/af45b903-7578-b9cc-75ff-7a0300a8309c.png)\n\n----\n\n![tmpl2.png](https://qiita-image-store.s3.amazonaws.com/0/13002/c7dcbced-6358-66aa-131b-1224b3aa696c.png)\n\n\n----\n\n![tmpl3.png](https://qiita-image-store.s3.amazonaws.com/0/13002/03325867-cbc0-7d43-98d3-d88e9e8f391d.png)\n\n----\n# Consul Template\n\n* https://github.com/hashicorp/consul-template\n* consul \u306e\u30a4\u30d9\u30f3\u30c8\u3092\u76e3\u8996\u3059\u308b\u30c7\u30fc\u30e2\u30f3\n* \u72b6\u6cc1\u5909\u5316\u304c\u767a\u751f\u3059\u308b\u3068\n * \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8aad\u307f\u8fbc\u3080 \n * \u30b5\u30fc\u30d3\u30b9\u30fb\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u306e\u72b6\u614b\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u53cd\u6620\n * \u4efb\u610f\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09 \n\n\n\n----\n\n# \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f8b\n\n```host-node.tmpl\n# consul nodes{{range nodes}}\n{{.Address}}    {{.Node}}{{end}}\n```\n\n----\n\n# \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f8b\n\n```host-node.tmpl\n# consul nodes{{range nodes}}\n{{.Address}}    {{.Node}}{{end}}\n````\n\n```bash\n$ consul-template -consul <Consul\u30b5\u30fc\u30d0>:<HTTP port> \\\n    -template \"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30d5\u30a1\u30a4\u30eb\u540d:\u51fa\u529b\u5148:\u30b3\u30de\u30f3\u30c9(\u30aa\u30d7\u30b7\u30e7\u30f3)\" \\\n    -template \"\u540c\u4e0a\" (\u30aa\u30d7\u30b7\u30e7\u30f3) \\\n    -dry (\u30aa\u30d7\u30b7\u30e7\u30f3)\n```\n----\n\n# \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f8b\n\n```host-node.tmpl\n# consul nodes{{range nodes}}\n{{.Address}}    {{.Node}}{{end}}\n````\n\n```bash\n$ consul-template -consul <Consul\u30b5\u30fc\u30d0>:<HTTP port> \\\n    -template \"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30d5\u30a1\u30a4\u30eb\u540d:\u51fa\u529b\u5148:\u30b3\u30de\u30f3\u30c9(\u30aa\u30d7\u30b7\u30e7\u30f3)\" \\\n    -template \"\u540c\u4e0a\" (\u30aa\u30d7\u30b7\u30e7\u30f3) \\\n    -dry (\u30aa\u30d7\u30b7\u30e7\u30f3)\n```\n\n```txt:/etc/hosts\n# consul nodes\n192.168.39.3    sion.pocketstudio.net\n192.168.39.11    web1\n192.168.39.12    web2\n```\n\n----\n\n\n# nginx \u306b\u6d3b\u7528\u3059\u308b\u4f8b\n\n```\nupstream frontend { {{range service \"web\"}}\n    server {{.Address}}:{{.Port}};{{end}}\n}\n\nserver {\n    listen 80 default_server;\n    location / {\n        proxy_pass http://frontend;\n    }\n}\n```\n\n\n----\n\n# nginx \u306b\u6d3b\u7528\u3059\u308b\u4f8b\n\n```\nupstream frontend { {{range service \"web\"}}\n    server {{.Address}}:{{.Port}};{{end}}\n}\n\nserver {\n    listen 80 default_server;\n    location / {\n        proxy_pass http://frontend;\n    }\n}\n```\n\n* [\u7b2c8\u56de\uff08\u6700\u7d42\u56de\uff09\u3000\u5b9a\u578b\u4f5c\u696d\u3092\u81ea\u52d5\u5316\u3059\u308bConsul Template\uff1aSerf\uff0fConsul\u3067\u7ba1\u7406\u3092\u81ea\u52d5\u5316\uff01\u3000\uff5e\u5b9f\u8df5\u7684\u306a\u624b\u6cd5\u3092\u7d39\u4ecb\uff5e\uff5cgihyo.jp \u2026 \u6280\u8853\u8a55\u8ad6\u793e](http://gihyo.jp/admin/feature/01/serf-consul/0008?page=1)\n \n----\n\n# consul-template \u3092\u4f7f\u3046\u306b\u306f\n\n```\n$ sudo yum -y install git golang\n$ export GOPATH=/usr/local/src/go\n$ git clone https://github.com/hashicorp/consul-template.git\n$ cd consul-templae\n$ make\n$ sudo cp ./bin/consul-template /usr/bin/\n$ consul-template --version\nconsul-template v0.7.1.dev\n```\n\n\n\u2026\u3068\u601d\u3063\u3066\u3044\u305f\u3089\u3001\u4eca\u306f\u30d0\u30a4\u30ca\u30ea\u304c\u3042\u308b\u306e\u3067\u7c21\u5358\u306b\u4f7f\u3048\u307e\u3059\u3088\uff01\nhttps://releases.hashicorp.com/consul-template/0.15.0/\n\uff08\u4f1a\u5834\u304b\u3089\u306e\u3054\u6307\u6458\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\uff01\uff09\n\n* \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n * https://github.com/hashicorp/consul-template/blob/master/README.md\n\n----\n# \u3075\u308a\u304b\u3048\u308a\n\n----\n# \u3075\u308a\u304b\u3048\u308a\n\n* [Consul](https://www.consul.io/) \u3068\u306f\n * \u30a4\u30f3\u30d5\u30e9\u4e0a\u306e\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\u3068\u30b5\u30fc\u30d3\u30b9\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u306e\u305f\u3081\u306e\u30c4\u30fc\u30eb\n* \u6a5f\u80fd\n * \u30b5\u30fc\u30d3\u30b9\u30fb\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u3068\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\n * \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\n * \u30ad\u30fc\u30d0\u30ea\u30e5\u30fc\u30fb\u30b9\u30c8\u30a2\n * \u8010\u969c\u5bb3\u6027\n* Consul Template \u3067\u5b9a\u578b\u51e6\u7406\u306e\u7c21\u6613\u5316\n\n----\n# \u4f55\u304b\u6c17\u306b\u306a\u308b\u3068\u3053\u308d\u306f\u3042\u308a\u307e\u3059\u304b\uff1f\n----\n# references\n\n* https://www.consul.io/\n\n* Serf / Consul \u5165\u9580 \uff5e\u4ed5\u4e8b\u3092\u697d\u3057\u304f\u3057\u3088\u3046\uff5e\n * http://www.slideshare.net/zembutsu/introduce-orchestration-serf-and-consul-presentation\n* Serf\uff0fConsul\u3067\u7ba1\u7406\u3092\u81ea\u52d5\u5316\uff01\u3000\uff5e\u5b9f\u8df5\u7684\u306a\u624b\u6cd5\u3092\u7d39\u4ecb\uff5e\uff1a\u7279\u96c6\uff5cgihyo.jp \u2026 \u6280\u8853\u8a55\u8ad6\u793e\n * http://gihyo.jp/admin/feature/01/serf-consul\n* \u523a\u8eab\u30bf\u30f3\u30dd\u30dd\u3092\u6bb2\u6ec5\u3059\u308b Consul Template\n * http://www.slideshare.net/zembutsu/consul-template-beat-tanpopo-on-sashimi\n* Serf2Excel - Serf \u3092\u5b9f\u904b\u7528\u306b\u6d3b\u304b\u3059\u8a71 + Consul \u3082\u3042\u308b\u3088\n * http://www.slideshare.net/zembutsu/serf-to-excel-and-consul-qpstudy\n* Hashicorp\u306e\u30c4\u30fc\u30eb\u7fa4\u3068\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\n * http://www.slideshare.net/zembutsu/hashicorp-orchestration-tools-introduction\n\n\n\n", "tags": ["consul"]}