{"context": " More than 1 year has passed since last update.\n\nRuboty | Ruboty \u3068 Logger #ruboty\n\n \u6982\u8981\nRuboty \u3068 Logger \u306b\u3064\u3044\u3066\n\n Ruboty \u306e Logging\nRuboty \u3067\u306f ruby \u6a19\u6e96\u306e Logger \u3092\u62e1\u5f35\u3057\u3001 Ruboty.logger \u7d4c\u7531\u3067\u547c\u3073\u51fa\u3057\u53ef\u80fd\u3067\u3059\u3002\n\nruboty logger.rb\n\nrequire \"logger\"\n\nmodule Ruboty\n  class Logger < Logger\n    def initialize(*)\n      super\n      @formatter = ->(severity, time, name, message) { \"#{message}\\n\" }\n    end\n  end\nend\n\n\nruboty ruboty.rb\n\nmodule Ruboty\n  class << self\n    include Mem\n\n    def logger\n      @logger ||= Ruboty::Logger.new($stdout)\n    end\n# \u7565\n\n\n \u8a66\u7528\nRuboty \u306b\u6a19\u6e96\u3067\u4ed8\u5c5e\u3057\u3066\u3044\u308b ping action \u3092\u7de8\u96c6\u3057\u3066\u52d5\u4f5c\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\n\n \u7de8\u96c6\u5185\u5bb9\nmodule Ruboty\n  module Actions\n    class Ping < Base\n      def call\n        message.reply(pong)\n      end\n\n      private\n\n      def ping\n        # \u3053\u306e\u884c\u3092\u8ffd\u52a0\n        Ruboty.logger.info '@@@@@@@@@@@@@ Use Ruboty.logger @@@@@@@@@@@@@@@'\n        message.body[-4..-1]\n      end\n\n      def pong\n        ping.gsub(/i/i, \"i\" => \"o\", \"I\" => \"O\")\n      end\n    end\n  end\nend\n\n\n \u7de8\u96c6\u524d\u5b9f\u884c\u7d50\u679c\n> ruboty ping\npong\n\n\n \u7de8\u96c6\u5f8c\u5b9f\u884c\u7d50\u679c\n> ruboty ping\n@@@@@@@@@@@@@ Use Ruboty.logger @@@@@@@@@@@@@@@\npong\n\n\n \u304a\u307e\u3051\n\u304a\u307e\u3051\u8981\u7d20\u3068\u3057\u3066 Ruby \u306e Logger \u57fa\u790e\n\n Log \u306e\u51fa\u529b\u5148\nLogger.new \u306b\u4efb\u610f\u306e\u5f15\u6570\u3092\u4e0e\u3048\u308b\u3053\u3068\u3067\u3001\u51fa\u529b\u5148\u3092\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002\n\n\n \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\nrequire 'logger'\nstdout_logger = Logger.new(STDOUT)\nstdout_logger.info \"sample output to STDOUT\"\nfile_logger = Logger.new('hoge.log')\nfile_logger.info \"sample output to hoge.log\"\nstdout_logger.info File.read('hoge.log')\n\n\n\n \u30b5\u30f3\u30d7\u30eb\u51fa\u529b\n\nI, [2014-12-09T22:40:35.895133 #5664]  INFO -- : sample output to STDOUT\nI, [2014-12-09T22:40:35.897640 #5664]  INFO -- : # Logfile created on 2014-12-09 22:40:35 +0900 by logger.rb/44203\nI, [2014-12-09T22:40:35.896637 #5664]  INFO -- : sample output to hoge.log\n\n\n Log Level\nLogger \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306f\u30ed\u30b0\u30ec\u30d9\u30eb\u3092\u8a2d\u5b9a\u53ef\u80fd\u3067\u3042\u308a\u3001\n\u8a2d\u5b9a\u3057\u305f\u30ec\u30d9\u30eb\u3088\u308a\u3082\u4f4e\u3044\u30ed\u30b0\u306f\u7121\u8996\u3055\u308c\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e5\u6bb5\u968e\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\n\nLevel\nDescription\n\n\n\n\nFATAL\n\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30af\u30e9\u30c3\u30b7\u30e5\u3055\u305b\u308b\u3088\u3046\u306a\u5236\u5fa1\u4e0d\u53ef\u80fd\u306a\u30a8\u30e9\u30fc\n\n\nERROR\n\u30a8\u30e9\u30fc\n\n\nWARN\n\u8b66\u544a\n\n\nINFO\n\u4e00\u822c\u7684\u306a\u60c5\u5831\n\n\nDEBUG\n\u4f4e\u30ec\u30d9\u30eb\u306e\u60c5\u5831\n\n\n\n\n\n \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\nrequire 'logger'\n\ndef output_logs(logger)\n  logger.info(\"info\")\n  logger.debug(\"debug\")\nend\n\nlogger = Logger.new(STDOUT)\nlogger.level = Logger::INFO\n\noutput_logs(logger)\nputs \"--------------------------------\"\n\nlogger.level = Logger::DEBUG\n\noutput_logs(logger)\n\n\n\n \u30b5\u30f3\u30d7\u30eb\u51fa\u529b\n\nI, [2014-12-09T22:22:17.029072 #7436]  INFO -- : info\n--------------------------------\nI, [2014-12-09T22:22:17.029072 #7436]  INFO -- : info\nD, [2014-12-09T22:22:17.029072 #7436] DEBUG -- : debug\n\n\n \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\nLogger#formatter=(formatter) \u3092\u5229\u7528\u3057\u3066\u3001\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092\u5909\u66f4\u53ef\u80fd\n\n\n \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\nrequire 'logger'\nlogger = Logger.new(STDOUT)\nlogger.formatter = proc { |severity, datetime, progname, msg|\n  [\n    \"severity:#{severity}\",\n    \"datetime:#{datetime.strftime('%Y/%m/%d %H:%m:%S.%L')}\",\n    \"msg:#{msg}\"\n  ].join(\"\\t\") + \"\\n\"\n}\nlogger.info 'formatter test1'\nsleep 1\nlogger.info 'formatter test2'\n\n\n\n \u30b5\u30f3\u30d7\u30eb\u51fa\u529b\n\nseverity:INFO   datetime:2014/12/09 22:12:35.565        msg:formatter test1\nseverity:INFO   datetime:2014/12/09 22:12:36.568        msg:formatter test2\n\n\n\u305d\u306e\u4ed6\n\u305d\u306e\u4ed6\u306e\u6a5f\u80fd\u306b\u3064\u3044\u3066\u306f \u308b\u308a\u307e \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u53c2\u7167\n http://docs.ruby-lang.org/ja/2.1.0/class/Logger.html\n\n \u53c2\u7167\n\n\n ruboty GitHub\n\n\n \u308b\u308a\u307e | Logger\n\n\n# Ruboty | Ruboty \u3068 Logger #ruboty\n\n## <i class=\"fa fa-cubes\" style=\"font-size:1em;\"></i> \u6982\u8981\nRuboty \u3068 Logger \u306b\u3064\u3044\u3066\n\n## <i class=\"fa fa-file-text-o\" style=\"font-size:1em;\"></i> Ruboty \u306e Logging\nRuboty \u3067\u306f ruby \u6a19\u6e96\u306e Logger \u3092\u62e1\u5f35\u3057\u3001 Ruboty.logger \u7d4c\u7531\u3067\u547c\u3073\u51fa\u3057\u53ef\u80fd\u3067\u3059\u3002\n\n* [ruboty logger.rb](https://github.com/r7kamura/ruboty/blob/51336efc18a5603a9a5ba6eedf19474454bfc20f/lib/ruboty/logger.rb)\n\n~~~ruby\nrequire \"logger\"\n\nmodule Ruboty\n  class Logger < Logger\n    def initialize(*)\n      super\n      @formatter = ->(severity, time, name, message) { \"#{message}\\n\" }\n    end\n  end\nend\n~~~\n\n* [ruboty ruboty.rb](https://github.com/r7kamura/ruboty/blob/51336efc18a5603a9a5ba6eedf19474454bfc20f/lib/ruboty.rb)\n\n~~~ruby\nmodule Ruboty\n  class << self\n    include Mem\n\n    def logger\n      @logger ||= Ruboty::Logger.new($stdout)\n    end\n# \u7565\n~~~\n\n## <i class=\"fa fa-flask\" style=\"font-size:1em;\"></i> \u8a66\u7528\nRuboty \u306b\u6a19\u6e96\u3067\u4ed8\u5c5e\u3057\u3066\u3044\u308b ping action \u3092\u7de8\u96c6\u3057\u3066\u52d5\u4f5c\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\n\n### <i class=\"fa fa-code\" style=\"font-size:1em;\"></i> \u7de8\u96c6\u5185\u5bb9\n\n~~~ruby\nmodule Ruboty\n  module Actions\n    class Ping < Base\n      def call\n        message.reply(pong)\n      end\n\n      private\n\n      def ping\n        # \u3053\u306e\u884c\u3092\u8ffd\u52a0\n        Ruboty.logger.info '@@@@@@@@@@@@@ Use Ruboty.logger @@@@@@@@@@@@@@@'\n        message.body[-4..-1]\n      end\n\n      def pong\n        ping.gsub(/i/i, \"i\" => \"o\", \"I\" => \"O\")\n      end\n    end\n  end\nend\n~~~\n\n### <i class=\"fa fa-frown-o\" style=\"font-size:1em;\"></i> \u7de8\u96c6\u524d\u5b9f\u884c\u7d50\u679c\n\n~~~\n> ruboty ping\npong\n~~~\n\n### <i class=\"fa fa-smile-o\" style=\"font-size:1em;\"></i> \u7de8\u96c6\u5f8c\u5b9f\u884c\u7d50\u679c\n\n~~~\n> ruboty ping\n@@@@@@@@@@@@@ Use Ruboty.logger @@@@@@@@@@@@@@@\npong\n~~~\n\n## <i class=\"fa fa-graduation-cap\" style=\"font-size:1em;\"></i> \u304a\u307e\u3051\n\u304a\u307e\u3051\u8981\u7d20\u3068\u3057\u3066 Ruby \u306e Logger \u57fa\u790e\n\n### <i class=\"fa fa-file-text-o\" style=\"font-size:1em;\"></i> Log \u306e\u51fa\u529b\u5148\n\nLogger.new \u306b\u4efb\u610f\u306e\u5f15\u6570\u3092\u4e0e\u3048\u308b\u3053\u3068\u3067\u3001\u51fa\u529b\u5148\u3092\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002\n\n* <i class=\"fa fa-code\" style=\"font-size:1em;\"></i> \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\n~~~ruby\nrequire 'logger'\nstdout_logger = Logger.new(STDOUT)\nstdout_logger.info \"sample output to STDOUT\"\nfile_logger = Logger.new('hoge.log')\nfile_logger.info \"sample output to hoge.log\"\nstdout_logger.info File.read('hoge.log')\n~~~\n\n* <i class=\"fa fa-file-o\" style=\"font-size:1em;\"></i> \u30b5\u30f3\u30d7\u30eb\u51fa\u529b\n\n~~~ruby\nI, [2014-12-09T22:40:35.895133 #5664]  INFO -- : sample output to STDOUT\nI, [2014-12-09T22:40:35.897640 #5664]  INFO -- : # Logfile created on 2014-12-09 22:40:35 +0900 by logger.rb/44203\nI, [2014-12-09T22:40:35.896637 #5664]  INFO -- : sample output to hoge.log\n~~~\n\n### <i class=\"fa fa-list-ol\" style=\"font-size:1em;\"></i> Log Level\nLogger \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306f\u30ed\u30b0\u30ec\u30d9\u30eb\u3092\u8a2d\u5b9a\u53ef\u80fd\u3067\u3042\u308a\u3001\n\u8a2d\u5b9a\u3057\u305f\u30ec\u30d9\u30eb\u3088\u308a\u3082\u4f4e\u3044\u30ed\u30b0\u306f\u7121\u8996\u3055\u308c\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e5\u6bb5\u968e\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n|Level|Description|\n|:--|:--|\n|FATAL|\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30af\u30e9\u30c3\u30b7\u30e5\u3055\u305b\u308b\u3088\u3046\u306a\u5236\u5fa1\u4e0d\u53ef\u80fd\u306a\u30a8\u30e9\u30fc|\n|ERROR|\u30a8\u30e9\u30fc|\n|WARN|\u8b66\u544a|\n|INFO|\u4e00\u822c\u7684\u306a\u60c5\u5831|\n|DEBUG|\u4f4e\u30ec\u30d9\u30eb\u306e\u60c5\u5831|\n\n* <i class=\"fa fa-code\" style=\"font-size:1em;\"></i> \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\n~~~ruby\nrequire 'logger'\n\ndef output_logs(logger)\n  logger.info(\"info\")\n  logger.debug(\"debug\")\nend\n\nlogger = Logger.new(STDOUT)\nlogger.level = Logger::INFO\n\noutput_logs(logger)\nputs \"--------------------------------\"\n\nlogger.level = Logger::DEBUG\n\noutput_logs(logger)\n~~~\n\n* <i class=\"fa fa-file-o\" style=\"font-size:1em;\"></i> \u30b5\u30f3\u30d7\u30eb\u51fa\u529b\n\n~~~ruby\nI, [2014-12-09T22:22:17.029072 #7436]  INFO -- : info\n--------------------------------\nI, [2014-12-09T22:22:17.029072 #7436]  INFO -- : info\nD, [2014-12-09T22:22:17.029072 #7436] DEBUG -- : debug\n~~~\n\n### <i class=\"fa fa-file\" style=\"font-size:1em;\"></i> \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\nLogger#formatter=(formatter) \u3092\u5229\u7528\u3057\u3066\u3001\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092\u5909\u66f4\u53ef\u80fd\n\n* <i class=\"fa fa-code\" style=\"font-size:1em;\"></i> \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\n~~~ruby\nrequire 'logger'\nlogger = Logger.new(STDOUT)\nlogger.formatter = proc { |severity, datetime, progname, msg|\n  [\n    \"severity:#{severity}\",\n    \"datetime:#{datetime.strftime('%Y/%m/%d %H:%m:%S.%L')}\",\n    \"msg:#{msg}\"\n  ].join(\"\\t\") + \"\\n\"\n}\nlogger.info 'formatter test1'\nsleep 1\nlogger.info 'formatter test2'\n~~~\n\n* <i class=\"fa fa-file-o\" style=\"font-size:1em;\"></i> \u30b5\u30f3\u30d7\u30eb\u51fa\u529b\n\n~~~ruby\nseverity:INFO   datetime:2014/12/09 22:12:35.565        msg:formatter test1\nseverity:INFO   datetime:2014/12/09 22:12:36.568        msg:formatter test2\n~~~\n\n### \u305d\u306e\u4ed6\n\u305d\u306e\u4ed6\u306e\u6a5f\u80fd\u306b\u3064\u3044\u3066\u306f \u308b\u308a\u307e \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u53c2\u7167\n<i class=\"fa fa-external-link-square\" style=\"font-size:1em;\"></i> http://docs.ruby-lang.org/ja/2.1.0/class/Logger.html\n\n## <i class=\"fa fa-arrow-circle-right\" style=\"font-size:1em;\"></i> \u53c2\u7167\n* <i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [ruboty GitHub](https://github.com/r7kamura/ruboty)\n* <i class=\"fa fa-external-link-square\" style=\"font-size:1em;\"></i> [\u308b\u308a\u307e | Logger](http://docs.ruby-lang.org/ja/2.1.0/class/Logger.html)\n", "tags": ["Ruboty"]}