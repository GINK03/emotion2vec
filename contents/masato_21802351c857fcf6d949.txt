{"context": " More than 1 year has passed since last update.React\u306e\u30ea\u30a2\u30af\u30c6\u30a3\u30d6\u3068\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u6307\u5411\u306e\u8003\u3048\u306f\u3059\u3054\u304f\u826f\u3044\u306e\u3067\u3059\u304c\u3001\u3069\u3046\u3082\u66f8\u304d\u65b9\u306b\u99b4\u67d3\u3081\u307e\u305b\u3093\u3002Isomorphic\u3082JavaScript\u3067\u66f8\u304f\u3088\u308aClojure\u3067\u66f8\u304f\u65b9\u304c\u697d\u3057\u3044\u306e\u3067Reagent\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002Node.js\u306eES6\u6642\u4ee3\u306b\u5411\u3051\u305fKoa\u306eIsomorphic\u3092\u8abf\u3079\u3066\u3044\u308b\u3068\u3001horse\u3084Deku\u3068\u3044\u3063\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3042\u308a\u307e\u3057\u305f\u3002\u4eca\u56de\u306fDeku\u306e\u65b9\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\nDeku\nDeku\u306fReact\u306ealternative\u3068\u3057\u3066UI\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u4f5c\u6210\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002\n\nNIH\u3067\u306f\u306a\u3044\n\u306a\u305cDeku\u3092\u958b\u767a\u3057\u59cb\u3081\u305f\u304b\u306fDeku: How we built our functional alternative to React\u306b\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\u982d\u304c\u75db\u3044\u3059\u3050\u5185\u88fd\u3067\u3084\u308a\u305f\u304c\u308bNIH\u3067\u306f\u306a\u3044\u3068\u8a00\u3063\u3066\u3044\u307e\u3059\u3002\u5f7c\u3089\u306f\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30de\u30cd\u30fc\u30b8\u30e3\u3068\u3057\u3066Duo\u3092\u4f7f\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002React\u306e\u3088\u3046\u306a\u5927\u304d\u306a\u30d6\u30e9\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u4e2d\u3067\u305f\u304f\u3055\u3093\u306e\u6a5f\u80fd\u3092\u5b9f\u88c5\u3059\u308b\u3088\u308a\u3082\u3001\u5c0f\u3055\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u69cb\u6210\u3057\u305f\u65b9\u304c\u898b\u901a\u3057\u3082\u3088\u304f\u3001\u30c7\u30d0\u30c3\u30b0\u3057\u3084\u3059\u3044\u3068\u3044\u3063\u305f\u8003\u3048\u65b9\u304c\u80cc\u666f\u306b\u3042\u308a\u307e\u3059\u3002\u898b\u901a\u3057\u304c\u3088\u304f\u4f55\u304b\u554f\u984c\u304c\u3042\u3063\u305f\u3068\u304d\u306b\u539f\u56e0\u3092\u7279\u5b9a\u3057\u3084\u3059\u3044\u3068\u3044\u3046\u306e\u306f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u9078\u3076\u4e0a\u3067\u3068\u3066\u3082\u91cd\u8981\u306a\u3053\u3068\u3067\u3059\u3002\n\nIsomorphic\u304bAPI\u30b5\u30fc\u30d0\u30fc\u304b\n\u4ee5\u524dReagent\u5165\u9580 - Part3: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u30b5\u30fc\u30d0\u30fc\u306e\u901a\u4fe1\u30d1\u30bf\u30fc\u30f3\u3084Reagent\u5165\u9580 - Part4: SPA\u3068\u30d5\u30a9\u30fc\u30e0\u306e\u8981\u4ef6\u3067\u8003\u5bdf\u3057\u307e\u3057\u305f\u3002\u4eca\u306e\u3068\u3053\u308dSPA\u306fIsomorphic\u3067\u306a\u304fAPI\u30b5\u30fc\u30d0\u30fc\u306b\u3057\u3066\u3001\u6bce\u56de\u9762\u5012\u3067\u3059\u304c\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3084\u30e2\u30c7\u30eb\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3082\u30b5\u30fc\u30d0\u30fc\u30822\u56de\u66f8\u304f\u306e\u304c\u3088\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\nIsomorphic\u521d\u5fc3\u8005\u306a\u306e\u3067\u3001Clojure/ClojureScript\u3067\u66f8\u3044\u3066\u3044\u3066\u3082\u30b5\u30fc\u30d0\u30fc\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u3044\u308b\u306e\u304b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306a\u306e\u304b\u6642\u3005\u308f\u304b\u3089\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u66f8\u3044\u3066\u3044\u308b\u3068\u304d\u306a\u3069\u307b\u3068\u3093\u3069\u540c\u3058\u30b3\u30fc\u30c9\u306a\u306e\u3067\u6df7\u4e71\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\n\u4eca\u56de\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u4ee5\u4e0b\u306e\u69cb\u6210\u3067\u3059\u3002Deku\u3068\u30b5\u30f3\u30d7\u30eb\u306etodomvc\u3092\u8aad\u307f\u306a\u304c\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068Koa\u3092\u4f7f\u3063\u305f\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\nDeku\u306e\u30d3\u30eb\u30c9\u65b9\u6cd5\nDeku\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002ES6\u3067\u66f8\u304f\u306e\u3067\u3044\u305a\u308c\u306b\u3044\u3066\u3082Babel\u306f\u5fc5\u8981\u3067\u3059\u3002\n\nBrowserfify\nBrowserfify\u3092\u4f7f\u3046\u306e\u304c\u3001\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u306e\u3069\u3061\u3089\u306e\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3092\u4f7f\u3046\u5834\u5408\u3067\u3082\u4e00\u756a\u7c21\u5358\u306a\u3088\u3046\u3067\u3059\u3002babelify\u3092\u4f7f\u3046\u3068JSX\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u3082\u7c21\u5358\u306b\u3067\u304d\u307e\u3059\u3002\n$ browserify -t babelify main.js > build.js\n\n\nDuo\nDuo\u306f\u6b21\u4e16\u4ee3\u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30de\u30cd\u30fc\u30b8\u30e3\u3067\u3059\u3002Duo\u304b\u3089Babel\u3092\u4f7f\u3046\u3068\u304d\u306b\u306fduo-babel\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002Deku\u306fDuo\u3092\u63a8\u3057\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u4f7f\u3063\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\nDuo\u306e\u8003\u3048\u65b9\u306f1\u3064\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u306f1\u3064\u306e\u6a5f\u80fd\u3092\u63d0\u4f9b\u3059\u308b\u3053\u3068\u3067\u3059\u3002\u30b3\u30fc\u30c9\u4e0a\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u306f\u76f4\u63a5GitHub\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u6307\u5b9a\u3057\u3066\u307e\u3059\u3002\nimport {element,tree,render} from 'segmentio/deku@0.2.1'\n\nES6\u3067\u66f8\u3044\u3066Babel\u304c\u5fc5\u8981\u306b\u306a\u308b\u306e\u3067\u3001duo\u30b3\u30de\u30f3\u30c9\u306b\u306f--use duo-babel\u30d5\u30e9\u30b0\u3092\u4ed8\u3051\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u4f7f\u3044\u307e\u3059\u3002\n$ duo --use duo-babel main.js > build.js\n\n\nbabel/register\n\u5358\u7d14\u306aHello World\u306a\u306e\u3067\u3001\u4eca\u56de\u306findex.js\u3067babel/register\u306e\u30d5\u30c3\u30af\u304b\u3089require\u3057\u305fapp.es6\u3092\u81ea\u52d5\u7684\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u307e\u3059\u3002\u672c\u6765\u306eIsomorphic\u306a\u3089\u3070\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306eES6\u30b3\u30fc\u30c9\u306fbrowserify\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u3001ES5\n\u306b\u30d3\u30eb\u30c9\u6e08\u307f\u306ejs\u30d5\u30a1\u30a4\u30eb\u3092index.html\u306a\u3069\u304b\u3089<script src=\"/build/index.js\"></script>\u3068\u3057\u3066\u6700\u521d\u306b\u30ed\u30fc\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u6b21\u56de\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306ebrowserify\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\n\u9069\u5f53\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u3053\u3061\u3089\u3067\u3059\u3002\n$ cd ~/node_apps/docker-deku-koa\n$ tree\n.\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 client\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 helloworld.es6\n\u251c\u2500\u2500 docker-compose.yml\n\u251c\u2500\u2500 node_modules -> /dist/node_modules\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 server\n    \u251c\u2500\u2500 app.es6\n    \u2514\u2500\u2500 index.js\n\n\nDockerfile\u3068docker-compose.yml\nDockerfile\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306fiojs\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n~/node_apps/docker-deku-koa/Dockerfile\nFROM iojs:2.3\nMAINTAINER Masato Shimizu <ma6ato@gmail.com>\n\nRUN mkdir -p /app\nWORKDIR /app\n\nCOPY package.json /app/\nRUN mkdir -p /dist/node_modules && \\\n    ln -s /dist/node_modules /app/node_modules && \\\n    npm install\n\nEXPOSE 3000\nCOPY . /app\nENTRYPOINT [\"npm\", \"start\"]\nCMD []\n\n\ndocker-compose.yml\u3067\u306fDocker\u30db\u30b9\u30c8\u306e\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3054\u3068\u3001\u30b3\u30f3\u30c6\u30ca\u306eWORKDIR\u3067\u3042\u308b/app\u306b\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\n\n~/node_apps/docker-deku-koa/docker-compose.yml\ndeku:\n  build: .\n  volumes:\n    - .:/app\n    - /etc/localtime:/etc/localtime:ro\n  ports:\n    - \"3030:3000\"\n\n\n\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3057\u305f\u3068\u304d\u306bnode_modules\u304c\u96a0\u308c\u306a\u3044\u3088\u3046\u306b\u3001\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4e88\u3081\u30b7\u30e0\u30ea\u30f3\u30af\u3092\u4f5c\u3063\u3066\u304a\u304d\u307e\u3059\u3002\n$ ln -s /dist/node_modules .\n\n\npackage.json\npackage.json\u306b\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092dependencies\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n~/node_apps/docker-deku-koa/package.json\n{\n    \"name\": \"deku-koa-example\",\n    \"description\": \"deku-koa-example\",\n    \"version\": \"0.0.1\",\n    \"private\": true,\n    \"dependencies\": {\n        \"deku\": \"^0.4.5\",\n        \"koa\": \"^0.21.0\",\n        \"babel\": \"^5.6.7\"\n    },\n    \"scripts\": {\n        \"start\": \"node server/index.js\"\n    }\n}\n\n\n\n\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\nbabel/register\u306e\u30d5\u30c3\u30af\u3067app.es6\u3092require\u3057\u305f\u3068\u304d\u306b\u81ea\u52d5\u7684\u306bES5\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u307e\u3059\u3002jsxPragma\u30aa\u30d7\u30b7\u30e7\u30f3\u306belement\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3046\u3059\u308b\u3068JSX\u306e\u5909\u63db\u306bBabel\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306eReact.createElement\u306e\u4ee3\u308f\u308a\u306b\u3001import {element} from 'deku'\u306eelement\u3092\u4f7f\u3046\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n~/node_apps/docker-deku-koa/server/index.js\n'use strict';\n\n// ES6 support\nrequire('babel/register')({ jsxPragma: 'element' });\nrequire('./app');\n\n\napp.es6\u306fES6\u3067\u66f8\u3044\u305fKoa\u306e\u30b3\u30fc\u30c9\u3067\u3059\u3002Isomorphic\u306aKoa\u306e\u30c6\u30b9\u30c8\u306a\u306e\u3067\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u306e\u30b3\u30fc\u30c9\u3092import\u3057\u3066\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3057\u3066\u3044\u307e\u3059\u3002\n\n~/node_apps/docker-deku-koa/server/app.es6\n'use strict'\n\nimport koa from 'koa'\nimport HelloWorld from '../client/helloworld'\nimport {element, tree, renderString} from 'deku'\n\nconst app = koa()\n\napp.use(function *() {\n  this.body = renderString(tree(<HelloWorld text=\"Hello World!\" />))\n})\n\napp.listen(3000)\n\n\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\nclient/helloworld.es6\u3067\u3001\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u306eserver/app.es6\u3067\u3082\u4f7f\u3046HelloWorld\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\n~/node_apps/docker-deku-koa/client/helloworld.es6\n'use strict'\n\nimport {element, render} from 'deku'\n\nvar HelloWorld = {\n  render(component) {\n    let {props,state} = component\n    return (\n      <div>\n        {props.text}\n      </div>\n    )\n  }\n}\n\nexport default HelloWorld\n\n\n\nDocker\u30a4\u30e1\u30fc\u30b8\u306e\u30d3\u30eb\u30c9\u3068\u8d77\u52d5Docker\n$ cd ~/node_apps/docker-deku-koa\n$ docker-compose build\n$ docker-compose up\nRecreating dockerdekukoa_deku_1...\nAttaching to dockerdekukoa_deku_1\ndeku_1 | npm info it worked if it ends with ok\ndeku_1 | npm info using npm@2.11.1\ndeku_1 | npm info using node@v2.3.0\ndeku_1 | npm info prestart deku-koa-example@0.0.1\ndeku_1 | npm info start deku-koa-example@0.0.1\ndeku_1 |\ndeku_1 | > deku-koa-example@0.0.1 start /app\ndeku_1 | > node server/index.js\ndeku_1 |\n\nDocker\u30db\u30b9\u30c8\u306e3030\u30dd\u30fc\u30c8\u306b\u30de\u30c3\u30d7\u3055\u308c\u3066\u3044\u307e\u3059\u3002curl\u30b3\u30de\u30f3\u30c9\u3067\u30c6\u30b9\u30c8\u3059\u308b\u3068Hello World!\u306ediv\u8981\u7d20\u304c\u8fd4\u308a\u307e\u3057\u305f\u3002\n$ curl localhost:3030\n<div>Hello World!</div>\n\n[React](http://facebook.github.io/react/)\u306e\u30ea\u30a2\u30af\u30c6\u30a3\u30d6\u3068\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u6307\u5411\u306e\u8003\u3048\u306f\u3059\u3054\u304f\u826f\u3044\u306e\u3067\u3059\u304c\u3001\u3069\u3046\u3082\u66f8\u304d\u65b9\u306b\u99b4\u67d3\u3081\u307e\u305b\u3093\u3002Isomorphic\u3082JavaScript\u3067\u66f8\u304f\u3088\u308aClojure\u3067\u66f8\u304f\u65b9\u304c\u697d\u3057\u3044\u306e\u3067[Reagent](http://holmsand.github.io/reagent/)\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002Node.js\u306eES6\u6642\u4ee3\u306b\u5411\u3051\u305f[Koa](http://koajs.com/)\u306eIsomorphic\u3092\u8abf\u3079\u3066\u3044\u308b\u3068\u3001[horse](https://github.com/reddit/horse)\u3084[Deku](https://github.com/dekujs/deku)\u3068\u3044\u3063\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3042\u308a\u307e\u3057\u305f\u3002\u4eca\u56de\u306fDeku\u306e\u65b9\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\n## Deku\n\n[Deku](https://github.com/dekujs/deku)\u306fReact\u306ealternative\u3068\u3057\u3066UI\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u4f5c\u6210\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002\n\n### NIH\u3067\u306f\u306a\u3044\n\n\u306a\u305cDeku\u3092\u958b\u767a\u3057\u59cb\u3081\u305f\u304b\u306f[Deku: How we built our functional alternative to React](https://segment.com/blog/deku-our-functional-alternative-to-react/)\u306b\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\u982d\u304c\u75db\u3044\u3059\u3050\u5185\u88fd\u3067\u3084\u308a\u305f\u304c\u308b[NIH](https://ja.wikipedia.org/wiki/NIH%E7%97%87%E5%80%99%E7%BE%A4)\u3067\u306f\u306a\u3044\u3068\u8a00\u3063\u3066\u3044\u307e\u3059\u3002\u5f7c\u3089\u306f\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30de\u30cd\u30fc\u30b8\u30e3\u3068\u3057\u3066[Duo](http://duojs.org/)\u3092\u4f7f\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002React\u306e\u3088\u3046\u306a\u5927\u304d\u306a\u30d6\u30e9\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u4e2d\u3067\u305f\u304f\u3055\u3093\u306e\u6a5f\u80fd\u3092\u5b9f\u88c5\u3059\u308b\u3088\u308a\u3082\u3001\u5c0f\u3055\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u69cb\u6210\u3057\u305f\u65b9\u304c\u898b\u901a\u3057\u3082\u3088\u304f\u3001\u30c7\u30d0\u30c3\u30b0\u3057\u3084\u3059\u3044\u3068\u3044\u3063\u305f\u8003\u3048\u65b9\u304c\u80cc\u666f\u306b\u3042\u308a\u307e\u3059\u3002\u898b\u901a\u3057\u304c\u3088\u304f\u4f55\u304b\u554f\u984c\u304c\u3042\u3063\u305f\u3068\u304d\u306b\u539f\u56e0\u3092\u7279\u5b9a\u3057\u3084\u3059\u3044\u3068\u3044\u3046\u306e\u306f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u9078\u3076\u4e0a\u3067\u3068\u3066\u3082\u91cd\u8981\u306a\u3053\u3068\u3067\u3059\u3002\n\n### Isomorphic\u304bAPI\u30b5\u30fc\u30d0\u30fc\u304b\n\n\u4ee5\u524d[Reagent\u5165\u9580 - Part3: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u30b5\u30fc\u30d0\u30fc\u306e\u901a\u4fe1\u30d1\u30bf\u30fc\u30f3](http://qiita.com/masato/items/ec0333fe21a093a5248c)\u3084[Reagent\u5165\u9580 - Part4: SPA\u3068\u30d5\u30a9\u30fc\u30e0\u306e\u8981\u4ef6](http://qiita.com/masato/items/0398a16d297d67855756)\u3067\u8003\u5bdf\u3057\u307e\u3057\u305f\u3002\u4eca\u306e\u3068\u3053\u308dSPA\u306fIsomorphic\u3067\u306a\u304fAPI\u30b5\u30fc\u30d0\u30fc\u306b\u3057\u3066\u3001\u6bce\u56de\u9762\u5012\u3067\u3059\u304c\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3084\u30e2\u30c7\u30eb\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3082\u30b5\u30fc\u30d0\u30fc\u30822\u56de\u66f8\u304f\u306e\u304c\u3088\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\n\nIsomorphic\u521d\u5fc3\u8005\u306a\u306e\u3067\u3001Clojure/ClojureScript\u3067\u66f8\u3044\u3066\u3044\u3066\u3082\u30b5\u30fc\u30d0\u30fc\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u3044\u308b\u306e\u304b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306a\u306e\u304b\u6642\u3005\u308f\u304b\u3089\u306a\u304f\u306a\u308a\u307e\u3059\u3002\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u66f8\u3044\u3066\u3044\u308b\u3068\u304d\u306a\u3069\u307b\u3068\u3093\u3069\u540c\u3058\u30b3\u30fc\u30c9\u306a\u306e\u3067\u6df7\u4e71\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n## \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\n\n\u4eca\u56de\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u4ee5\u4e0b\u306e\u69cb\u6210\u3067\u3059\u3002[Deku](https://github.com/dekujs/deku)\u3068\u30b5\u30f3\u30d7\u30eb\u306e[todomvc](https://github.com/dekujs/todomvc)\u3092\u8aad\u307f\u306a\u304c\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068Koa\u3092\u4f7f\u3063\u305f\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\n## Deku\u306e\u30d3\u30eb\u30c9\u65b9\u6cd5\n\n[Deku](https://github.com/dekujs/deku)\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002ES6\u3067\u66f8\u304f\u306e\u3067\u3044\u305a\u308c\u306b\u3044\u3066\u3082[Babel](https://babeljs.io/)\u306f\u5fc5\u8981\u3067\u3059\u3002\n\n### Browserfify\n\n[Browserfify](http://browserify.org/)\u3092\u4f7f\u3046\u306e\u304c\u3001\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u306e\u3069\u3061\u3089\u306e\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3092\u4f7f\u3046\u5834\u5408\u3067\u3082\u4e00\u756a\u7c21\u5358\u306a\u3088\u3046\u3067\u3059\u3002babelify\u3092\u4f7f\u3046\u3068JSX\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u3082\u7c21\u5358\u306b\u3067\u304d\u307e\u3059\u3002\n\n```basg\n$ browserify -t babelify main.js > build.js\n```\n\n### Duo\n\n[Duo](http://duojs.org/)\u306f\u6b21\u4e16\u4ee3\u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30de\u30cd\u30fc\u30b8\u30e3\u3067\u3059\u3002Duo\u304b\u3089Babel\u3092\u4f7f\u3046\u3068\u304d\u306b\u306f[duo-babel](https://github.com/babel/duo-babel)\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002Deku\u306f[Duo](http://duojs.org/)\u3092\u63a8\u3057\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u4f7f\u3063\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\nDuo\u306e\u8003\u3048\u65b9\u306f1\u3064\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u306f1\u3064\u306e\u6a5f\u80fd\u3092\u63d0\u4f9b\u3059\u308b\u3053\u3068\u3067\u3059\u3002\u30b3\u30fc\u30c9\u4e0a\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u306f\u76f4\u63a5GitHub\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u6307\u5b9a\u3057\u3066\u307e\u3059\u3002\n\n\n```js\nimport {element,tree,render} from 'segmentio/deku@0.2.1'\n```\n\nES6\u3067\u66f8\u3044\u3066Babel\u304c\u5fc5\u8981\u306b\u306a\u308b\u306e\u3067\u3001duo\u30b3\u30de\u30f3\u30c9\u306b\u306f`--use duo-babel`\u30d5\u30e9\u30b0\u3092\u4ed8\u3051\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u4f7f\u3044\u307e\u3059\u3002\n\n```js\n$ duo --use duo-babel main.js > build.js\n```\n\n### babel/register\n\n\u5358\u7d14\u306aHello World\u306a\u306e\u3067\u3001\u4eca\u56de\u306findex.js\u3067`babel/register`\u306e\u30d5\u30c3\u30af\u304b\u3089require\u3057\u305fapp.es6\u3092\u81ea\u52d5\u7684\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u307e\u3059\u3002\u672c\u6765\u306eIsomorphic\u306a\u3089\u3070\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306eES6\u30b3\u30fc\u30c9\u306f`browserify`\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u3001ES5\n\u306b\u30d3\u30eb\u30c9\u6e08\u307f\u306ejs\u30d5\u30a1\u30a4\u30eb\u3092index.html\u306a\u3069\u304b\u3089`<script src=\"/build/index.js\"></script>`\u3068\u3057\u3066\u6700\u521d\u306b\u30ed\u30fc\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u6b21\u56de\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306e`browserify`\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\n## \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\n\n\u9069\u5f53\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30ea\u30dd\u30b8\u30c8\u30ea\u306f[\u3053\u3061\u3089](https://github.com/masato/docker-deku-koa)\u3067\u3059\u3002\n\n```bash\n$ cd ~/node_apps/docker-deku-koa\n$ tree\n.\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 client\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 helloworld.es6\n\u251c\u2500\u2500 docker-compose.yml\n\u251c\u2500\u2500 node_modules -> /dist/node_modules\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 server\n    \u251c\u2500\u2500 app.es6\n    \u2514\u2500\u2500 index.js\n```\n\n### Dockerfile\u3068docker-compose.yml\n\nDockerfile\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306f[iojs](https://registry.hub.docker.com/_/iojs/)\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n```bash:~/node_apps/docker-deku-koa/Dockerfile\nFROM iojs:2.3\nMAINTAINER Masato Shimizu <ma6ato@gmail.com>\n\nRUN mkdir -p /app\nWORKDIR /app\n\nCOPY package.json /app/\nRUN mkdir -p /dist/node_modules && \\\n    ln -s /dist/node_modules /app/node_modules && \\\n    npm install\n\nEXPOSE 3000\nCOPY . /app\nENTRYPOINT [\"npm\", \"start\"]\nCMD []\n```\n\ndocker-compose.yml\u3067\u306fDocker\u30db\u30b9\u30c8\u306e\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3054\u3068\u3001\u30b3\u30f3\u30c6\u30ca\u306e`WORKDIR`\u3067\u3042\u308b`/app`\u306b\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\n\n```yaml:~/node_apps/docker-deku-koa/docker-compose.yml\ndeku:\n  build: .\n  volumes:\n    - .:/app\n    - /etc/localtime:/etc/localtime:ro\n  ports:\n    - \"3030:3000\"\n```\n\n\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3057\u305f\u3068\u304d\u306b`node_modules`\u304c\u96a0\u308c\u306a\u3044\u3088\u3046\u306b\u3001\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4e88\u3081\u30b7\u30e0\u30ea\u30f3\u30af\u3092\u4f5c\u3063\u3066\u304a\u304d\u307e\u3059\u3002\n\n```bash\n$ ln -s /dist/node_modules .\n```\n\n### package.json\n\npackage.json\u306b\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092dependencies\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```json:~/node_apps/docker-deku-koa/package.json\n{\n    \"name\": \"deku-koa-example\",\n    \"description\": \"deku-koa-example\",\n    \"version\": \"0.0.1\",\n    \"private\": true,\n    \"dependencies\": {\n        \"deku\": \"^0.4.5\",\n        \"koa\": \"^0.21.0\",\n        \"babel\": \"^5.6.7\"\n    },\n    \"scripts\": {\n        \"start\": \"node server/index.js\"\n    }\n}\n```\n\n## \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\n\n`babel/register`\u306e\u30d5\u30c3\u30af\u3067`app.es6`\u3092require\u3057\u305f\u3068\u304d\u306b\u81ea\u52d5\u7684\u306bES5\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u307e\u3059\u3002`jsxPragma`\u30aa\u30d7\u30b7\u30e7\u30f3\u306b`element`\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3046\u3059\u308b\u3068JSX\u306e\u5909\u63db\u306bBabel\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306eReact.createElement\u306e\u4ee3\u308f\u308a\u306b\u3001`import {element} from 'deku'`\u306eelement\u3092\u4f7f\u3046\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n```js:~/node_apps/docker-deku-koa/server/index.js\n'use strict';\n\n// ES6 support\nrequire('babel/register')({ jsxPragma: 'element' });\nrequire('./app');\n```\n\napp.es6\u306fES6\u3067\u66f8\u3044\u305fKoa\u306e\u30b3\u30fc\u30c9\u3067\u3059\u3002Isomorphic\u306aKoa\u306e\u30c6\u30b9\u30c8\u306a\u306e\u3067\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u306e\u30b3\u30fc\u30c9\u3092import\u3057\u3066\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3057\u3066\u3044\u307e\u3059\u3002\n\n```js:~/node_apps/docker-deku-koa/server/app.es6\n'use strict'\n\nimport koa from 'koa'\nimport HelloWorld from '../client/helloworld'\nimport {element, tree, renderString} from 'deku'\n\nconst app = koa()\n\napp.use(function *() {\n  this.body = renderString(tree(<HelloWorld text=\"Hello World!\" />))\n})\n\napp.listen(3000)\n```\n\n## \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\n\n`client/helloworld.es6`\u3067\u3001\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u306e`server/app.es6`\u3067\u3082\u4f7f\u3046`HelloWorld`\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\n```js:~/node_apps/docker-deku-koa/client/helloworld.es6\n'use strict'\n\nimport {element, render} from 'deku'\n\nvar HelloWorld = {\n  render(component) {\n    let {props,state} = component\n    return (\n      <div>\n        {props.text}\n      </div>\n    )\n  }\n}\n\nexport default HelloWorld\n```\n\n## Docker\u30a4\u30e1\u30fc\u30b8\u306e\u30d3\u30eb\u30c9\u3068\u8d77\u52d5Docker\n\n```bash\n$ cd ~/node_apps/docker-deku-koa\n$ docker-compose build\n$ docker-compose up\nRecreating dockerdekukoa_deku_1...\nAttaching to dockerdekukoa_deku_1\ndeku_1 | npm info it worked if it ends with ok\ndeku_1 | npm info using npm@2.11.1\ndeku_1 | npm info using node@v2.3.0\ndeku_1 | npm info prestart deku-koa-example@0.0.1\ndeku_1 | npm info start deku-koa-example@0.0.1\ndeku_1 |\ndeku_1 | > deku-koa-example@0.0.1 start /app\ndeku_1 | > node server/index.js\ndeku_1 |\n```\n\nDocker\u30db\u30b9\u30c8\u306e3030\u30dd\u30fc\u30c8\u306b\u30de\u30c3\u30d7\u3055\u308c\u3066\u3044\u307e\u3059\u3002curl\u30b3\u30de\u30f3\u30c9\u3067\u30c6\u30b9\u30c8\u3059\u308b\u3068Hello World!\u306ediv\u8981\u7d20\u304c\u8fd4\u308a\u307e\u3057\u305f\u3002\n\n```bash\n$ curl localhost:3030\n<div>Hello World!</div>\n```\n", "tags": ["Koa0.21.0", "io.js2.3.0", "es6", "deku0.4.5", "isomorphic"]}