{"context": " More than 1 year has passed since last update.http://aws.typepad.com/aws_japan/2015/10/amazon-elasticsearch-service.html \u3092\u53c2\u8003\u306bAWS CLI\u3067ES\u30c9\u30e1\u30a4\u30f3\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u3068\u308a\u3042\u3048\u305a\u306e\u52d5\u4f5c\u78ba\u8a8d\u3060\u3051\u306a\u306e\u3067\u3001\u671f\u9593\u9650\u5b9a\u516c\u958b\u3067\u3059\u3002\n(\u3061\u3083\u3093\u3068\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u4f5c\u6210\u3057\u305f\u3089\u6d88\u3057\u307e\u3059\u3002)\n\n\u30c9\u30e1\u30a4\u30f3\u306e\u4f5c\u6210\n\n\u30c9\u30e1\u30a4\u30f3\u540d\u306e\u6307\u5b9a\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nES_DOMAIN_NAME='my-es-cluster'\n\n\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30bf\u30a4\u30d7\u306e\u6307\u5b9a\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nES_INSTANCE_TYPE='t2.micro.elasticsearch'\n\n\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6570\u306e\u6307\u5b9a\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nES_INSTANCE_COUNT='1'\n\n\n\ndedicated master\u306e\u8a2d\u5b9a\u5024\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nES_DEDICATED_MASTER_ENABLED='false'\n\n\n\nzone awareness\u306e\u8a2d\u5b9a\u5024\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nES_ZONE_AWARENESS_ENABLED='false'\n\n\n\n\u8a2d\u5b9a\u5024\u306e\u96c6\u7d04\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nES_CLUSTER_CONFIG=\"InstanceType=${ES_INSTANCE_TYPE},InstanceCount=${ES_INSTANCE_COUNT},DedicatedMasterEnabled=${ES_DEDICATED_MASTER_ENABLED},ZoneAwarenessEnabled=${ES_ZONE_AWARENESS_ENABLED}\" \\\n        && echo \"${ES_CLUSTER_CONFIG}\"\n\n\n\nEBS\u306e\u8a2d\u5b9a\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nEBS_ENABLED='true'\nEBS_TYPE='gp2'\nEBS_SIZE='10'\n\n\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nES_EBS_OPTIONS=\"EBSEnabled=${EBS_ENABLED},VolumeType=${EBS_TYPE},VolumeSize=${EBS_SIZE}\" \\\n        && echo ${ES_EBS_OPTIONS}\n\n\n\n\u30a2\u30af\u30bb\u30b9\u30dd\u30ea\u30b7\u30fc\u306e\u8a2d\u5b9a\u5024\n(\u7701\u7565)\n\n\u30c9\u30e1\u30a4\u30f3\u306e\u4f5c\u6210\n\n\u30b3\u30de\u30f3\u30c9\naws es create-elasticsearch-domain \\\n        --domain-name ${ES_DOMAIN_NAME} \\\n        --elasticsearch-cluster-config ${ES_CLUSTER_CONFIG} \\\n        --ebs-options ${ES_EBS_OPTIONS}\n\n\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n  ES_DOMAIN_NAME:    ${ES_DOMAIN_NAME}\n  ES_CLUSTER_CONFIG: ${ES_CLUSTER_CONFIG}\n  ES_EBS_OPTIONS:    ${ES_EBS_OPTIONS}\n\nETX\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"DomainStatus\": {\n            \"ElasticsearchClusterConfig\": {\n                \"DedicatedMasterEnabled\": false,\n                \"InstanceCount\": 1,\n                \"ZoneAwarenessEnabled\": false,\n                \"InstanceType\": \"t2.micro.elasticsearch\"\n            },\n            \"DomainId\": \"XXXXXXXXXXXX/my-es-cluster\",\n            \"Created\": true,\n            \"Deleted\": false,\n            \"EBSOptions\": {\n                \"VolumeSize\": 10,\n                \"VolumeType\": \"gp2\",\n                \"EBSEnabled\": true\n            },\n            \"Processing\": true,\n            \"DomainName\": \"my-es-cluster\",\n            \"SnapshotOptions\": {\n                \"AutomatedSnapshotStartHour\": 0\n            },\n            \"AccessPolicies\": \"\",\n            \"AdvancedOptions\": {\n                \"rest.action.multi.allow_explicit_index\": \"true\"\n            },\n            \"ARN\": \"arn:aws:es:us-west-2:XXXXXXXXXXXX:domain/my-es-cluster\"\n        }\n      }\n\n\n\n\u30c9\u30e1\u30a4\u30f3\u306e\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\naws es describe-elasticsearch-domain \\\n        --domain-name ${ES_DOMAIN_NAME}\n\n\n\n\u7d50\u679c(\u4f8b)\n\n      {\n        \"DomainStatus\": {\n            \"ElasticsearchClusterConfig\": {\n                \"DedicatedMasterEnabled\": false,\n                \"InstanceCount\": 1,\n                \"ZoneAwarenessEnabled\": false,\n                \"InstanceType\": \"t2.micro.elasticsearch\"\n            },\n            \"DomainId\": \"XXXXXXXXXXXX/my-es-cluster\",\n            \"Created\": true,\n            \"Deleted\": false,\n            \"EBSOptions\": {\n                \"VolumeSize\": 10,\n                \"VolumeType\": \"gp2\",\n                \"EBSEnabled\": true\n            },\n            \"Processing\": true,\n            \"DomainName\": \"my-es-cluster\",\n            \"SnapshotOptions\": {\n                \"AutomatedSnapshotStartHour\": 0\n            },\n            \"AccessPolicies\": \"\",\n            \"AdvancedOptions\": {\n                \"rest.action.multi.allow_explicit_index\": \"true\"\n            },\n            \"ARN\": \"arn:aws:es:us-west-2:XXXXXXXXXXXX:domain/my-es-cluster\"\n        }\n      }\n\n\n\n\u8a2d\u5b9a\u306e\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\naws es describe-elasticsearch-domain-config \\\n        --domain-name ${ES_DOMAIN_NAME}\n\n\n\n\u7d50\u679c(\u4f8b)\n\n      {\n        \"DomainConfig\": {\n            \"ElasticsearchClusterConfig\": {\n                \"Status\": {\n                    \"PendingDeletion\": false,\n                    \"State\": \"Processing\",\n                    \"CreationDate\": 1444168220.598,\n                    \"UpdateVersion\": 2,\n                    \"UpdateDate\": 1444168220.598\n                },\n                \"Options\": {\n                    \"DedicatedMasterEnabled\": false,\n                    \"InstanceCount\": 1,\n                    \"ZoneAwarenessEnabled\": false,\n                    \"InstanceType\": \"t2.micro.elasticsearch\"\n                }\n            },\n            \"AdvancedOptions\": {\n                \"Status\": {\n                    \"PendingDeletion\": false,\n                    \"State\": \"Active\",\n                    \"CreationDate\": 1444168326.565,\n                    \"UpdateVersion\": 4,\n                    \"UpdateDate\": 1444168326.565\n                },\n                \"Options\": {\n                    \"rest.action.multi.allow_explicit_index\": \"true\"\n                }\n            },\n            \"EBSOptions\": {\n                \"Status\": {\n                    \"PendingDeletion\": false,\n                    \"State\": \"Processing\",\n                    \"CreationDate\": 1444168220.598,\n                    \"UpdateVersion\": 2,\n                    \"UpdateDate\": 1444168220.598\n                },\n                \"Options\": {\n                    \"VolumeSize\": 10,\n                    \"VolumeType\": \"gp2\",\n                    \"EBSEnabled\": true\n                }\n            },\n            \"AccessPolicies\": {\n                \"Status\": {\n                    \"PendingDeletion\": false,\n                    \"State\": \"Active\",\n                    \"CreationDate\": 1444168326.565,\n                    \"UpdateVersion\": 4,\n                    \"UpdateDate\": 1444168326.565\n                },\n                \"Options\": \"\"\n            },\n            \"SnapshotOptions\": {\n                \"Status\": {\n                    \"PendingDeletion\": false,\n                    \"State\": \"Processing\",\n                    \"CreationDate\": 1444168220.598,\n                    \"UpdateVersion\": 2,\n                    \"UpdateDate\": 1444168220.598\n                },\n                \"Options\": {\n                    \"AutomatedSnapshotStartHour\": 0\n                }\n            }\n        }\n      }\n\n\n\n\u5b8c\u4e86\n\nhttp://aws.typepad.com/aws_japan/2015/10/amazon-elasticsearch-service.html \u3092\u53c2\u8003\u306bAWS CLI\u3067ES\u30c9\u30e1\u30a4\u30f3\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u3068\u308a\u3042\u3048\u305a\u306e\u52d5\u4f5c\u78ba\u8a8d\u3060\u3051\u306a\u306e\u3067\u3001\u671f\u9593\u9650\u5b9a\u516c\u958b\u3067\u3059\u3002\n(\u3061\u3083\u3093\u3068\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u4f5c\u6210\u3057\u305f\u3089\u6d88\u3057\u307e\u3059\u3002)\n\n\n\u30c9\u30e1\u30a4\u30f3\u306e\u4f5c\u6210\n==============\n\n\u30c9\u30e1\u30a4\u30f3\u540d\u306e\u6307\u5b9a\n----------------\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nES_DOMAIN_NAME='my-es-cluster'\n```\n\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30bf\u30a4\u30d7\u306e\u6307\u5b9a\n------------------------\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nES_INSTANCE_TYPE='t2.micro.elasticsearch'\n```\n\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6570\u306e\u6307\u5b9a\n--------------------\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nES_INSTANCE_COUNT='1'\n```\n\n\ndedicated master\u306e\u8a2d\u5b9a\u5024\n------------------------\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nES_DEDICATED_MASTER_ENABLED='false'\n```\n\n\nzone awareness\u306e\u8a2d\u5b9a\u5024\n----------------------\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nES_ZONE_AWARENESS_ENABLED='false'\n```\n\n\n\u8a2d\u5b9a\u5024\u306e\u96c6\u7d04\n------------\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nES_CLUSTER_CONFIG=\"InstanceType=${ES_INSTANCE_TYPE},InstanceCount=${ES_INSTANCE_COUNT},DedicatedMasterEnabled=${ES_DEDICATED_MASTER_ENABLED},ZoneAwarenessEnabled=${ES_ZONE_AWARENESS_ENABLED}\" \\\n        && echo \"${ES_CLUSTER_CONFIG}\"\n```\n\n\nEBS\u306e\u8a2d\u5b9a\n-----------\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nEBS_ENABLED='true'\nEBS_TYPE='gp2'\nEBS_SIZE='10'\n```\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nES_EBS_OPTIONS=\"EBSEnabled=${EBS_ENABLED},VolumeType=${EBS_TYPE},VolumeSize=${EBS_SIZE}\" \\\n        && echo ${ES_EBS_OPTIONS}\n```\n\n\n\u30a2\u30af\u30bb\u30b9\u30dd\u30ea\u30b7\u30fc\u306e\u8a2d\u5b9a\u5024\n------------------------\n\n(\u7701\u7565)\n\n\n\u30c9\u30e1\u30a4\u30f3\u306e\u4f5c\u6210\n--------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws es create-elasticsearch-domain \\\n        --domain-name ${ES_DOMAIN_NAME} \\\n        --elasticsearch-cluster-config ${ES_CLUSTER_CONFIG} \\\n        --ebs-options ${ES_EBS_OPTIONS}\n```\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n  ES_DOMAIN_NAME:    ${ES_DOMAIN_NAME}\n  ES_CLUSTER_CONFIG: ${ES_CLUSTER_CONFIG}\n  ES_EBS_OPTIONS:    ${ES_EBS_OPTIONS}\n\nETX\n```\n\n```json:\u7d50\u679c(\u4f8b)\n      {\n        \"DomainStatus\": {\n            \"ElasticsearchClusterConfig\": {\n                \"DedicatedMasterEnabled\": false,\n                \"InstanceCount\": 1,\n                \"ZoneAwarenessEnabled\": false,\n                \"InstanceType\": \"t2.micro.elasticsearch\"\n            },\n            \"DomainId\": \"XXXXXXXXXXXX/my-es-cluster\",\n            \"Created\": true,\n            \"Deleted\": false,\n            \"EBSOptions\": {\n                \"VolumeSize\": 10,\n                \"VolumeType\": \"gp2\",\n                \"EBSEnabled\": true\n            },\n            \"Processing\": true,\n            \"DomainName\": \"my-es-cluster\",\n            \"SnapshotOptions\": {\n                \"AutomatedSnapshotStartHour\": 0\n            },\n            \"AccessPolicies\": \"\",\n            \"AdvancedOptions\": {\n                \"rest.action.multi.allow_explicit_index\": \"true\"\n            },\n            \"ARN\": \"arn:aws:es:us-west-2:XXXXXXXXXXXX:domain/my-es-cluster\"\n        }\n      }\n```\n\n\n\u30c9\u30e1\u30a4\u30f3\u306e\u78ba\u8a8d\n----------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws es describe-elasticsearch-domain \\\n        --domain-name ${ES_DOMAIN_NAME}\n```\n\n```json:\u7d50\u679c(\u4f8b)\n\n      {\n        \"DomainStatus\": {\n            \"ElasticsearchClusterConfig\": {\n                \"DedicatedMasterEnabled\": false,\n                \"InstanceCount\": 1,\n                \"ZoneAwarenessEnabled\": false,\n                \"InstanceType\": \"t2.micro.elasticsearch\"\n            },\n            \"DomainId\": \"XXXXXXXXXXXX/my-es-cluster\",\n            \"Created\": true,\n            \"Deleted\": false,\n            \"EBSOptions\": {\n                \"VolumeSize\": 10,\n                \"VolumeType\": \"gp2\",\n                \"EBSEnabled\": true\n            },\n            \"Processing\": true,\n            \"DomainName\": \"my-es-cluster\",\n            \"SnapshotOptions\": {\n                \"AutomatedSnapshotStartHour\": 0\n            },\n            \"AccessPolicies\": \"\",\n            \"AdvancedOptions\": {\n                \"rest.action.multi.allow_explicit_index\": \"true\"\n            },\n            \"ARN\": \"arn:aws:es:us-west-2:XXXXXXXXXXXX:domain/my-es-cluster\"\n        }\n      }\n```\n\n\u8a2d\u5b9a\u306e\u78ba\u8a8d\n----------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws es describe-elasticsearch-domain-config \\\n        --domain-name ${ES_DOMAIN_NAME}\n```\n\n```json:\u7d50\u679c(\u4f8b)\n\n      {\n        \"DomainConfig\": {\n            \"ElasticsearchClusterConfig\": {\n                \"Status\": {\n                    \"PendingDeletion\": false,\n                    \"State\": \"Processing\",\n                    \"CreationDate\": 1444168220.598,\n                    \"UpdateVersion\": 2,\n                    \"UpdateDate\": 1444168220.598\n                },\n                \"Options\": {\n                    \"DedicatedMasterEnabled\": false,\n                    \"InstanceCount\": 1,\n                    \"ZoneAwarenessEnabled\": false,\n                    \"InstanceType\": \"t2.micro.elasticsearch\"\n                }\n            },\n            \"AdvancedOptions\": {\n                \"Status\": {\n                    \"PendingDeletion\": false,\n                    \"State\": \"Active\",\n                    \"CreationDate\": 1444168326.565,\n                    \"UpdateVersion\": 4,\n                    \"UpdateDate\": 1444168326.565\n                },\n                \"Options\": {\n                    \"rest.action.multi.allow_explicit_index\": \"true\"\n                }\n            },\n            \"EBSOptions\": {\n                \"Status\": {\n                    \"PendingDeletion\": false,\n                    \"State\": \"Processing\",\n                    \"CreationDate\": 1444168220.598,\n                    \"UpdateVersion\": 2,\n                    \"UpdateDate\": 1444168220.598\n                },\n                \"Options\": {\n                    \"VolumeSize\": 10,\n                    \"VolumeType\": \"gp2\",\n                    \"EBSEnabled\": true\n                }\n            },\n            \"AccessPolicies\": {\n                \"Status\": {\n                    \"PendingDeletion\": false,\n                    \"State\": \"Active\",\n                    \"CreationDate\": 1444168326.565,\n                    \"UpdateVersion\": 4,\n                    \"UpdateDate\": 1444168326.565\n                },\n                \"Options\": \"\"\n            },\n            \"SnapshotOptions\": {\n                \"Status\": {\n                    \"PendingDeletion\": false,\n                    \"State\": \"Processing\",\n                    \"CreationDate\": 1444168220.598,\n                    \"UpdateVersion\": 2,\n                    \"UpdateDate\": 1444168220.598\n                },\n                \"Options\": {\n                    \"AutomatedSnapshotStartHour\": 0\n                }\n            }\n        }\n      }\n```\n\n\n\n\n\n\n\u5b8c\u4e86\n------\n", "tags": ["aws-", "aws-cli", "aws-es"]}