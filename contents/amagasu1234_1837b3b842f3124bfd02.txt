{"tags": ["CakePHP", "PHP", "\u65b0\u4eba\u30d7\u30ed\u30b0\u30e9\u30de\u5fdc\u63f4", "DatePicker"], "context": "\n\n\u65e5\u4ed8\u7bc4\u56f2\u691c\u7d22\n\u5c11\u3057\u30cf\u30de\u3063\u305f\u306e\u3067\u6574\u7406\u3057\u3066\u304a\u304f\u3002\nModel\u306b\u300ccreated\u300d\u65e5\u4ed8\u304c\u3042\u308b\u3068\u3057\u307e\u3059\u3002\u305d\u308c\u3092\u691c\u7d22\u753b\u9762\u304b\u3089from~to\u306e\u7bc4\u56f2\u691c\u7d22\u304c\u5fc5\u8981\u306a\u5834\u5408\u3001\nSearch\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u3063\u3066\u3044\u308b\u306a\u3089Model\u304b\u3089\u7c21\u5358\u306b\u8a2d\u5b9a\u3067\u5b9f\u88c5\u53ef\u80fd\u306b\u306a\u308b\u3002\n\u4ee5\u4e0b\u3092\u53c2\u8003\u306b\u3057\u3066datepicker\u3092\u4f7f\u3063\u3066\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u53c2\u8003\uff1ahttp://kamakurasoft.net/blog/?p=1479\ndatepicker\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u53ca\u3073\u4f7f\u3044\u65b9\u306f\u3053\u3061\u3089\nhttps://jqueryui.com/datepicker/\n\nView\n\u65e5\u4ed8\u691c\u7d22\u306e\u30b3\u30fc\u30c9\u3060\u3051\u3092\u66f8\u304d\u307e\u3059\u3002\ndatepicker\u95a2\u9023js\u3084css\u306a\u3069\u306f\u4e0a\u8a18\u306edatepicker\u30b5\u30a4\u30c8\u53c2\u7167\n\nView\n<script type=\"text/javascript\">\n$(function(){\n\u3000\u3000//\u3053\u3061\u3089\u306f\u81ea\u5206\u306bdatepicker\u8a2d\u5b9a\u3002\n    $('#PostDateFrom').datepicker({'prevText':'<','nextText':'>'});\n    //\u30ab\u30ec\u30f3\u30c0\u304b\u3089\u9078\u629e\u3057\u305f\u65e5\u4ed8\u3092yyyy-mm-dd\u306b\u8868\u793a\n\u3000\u3000$('#PostDateFrom').datepicker(\"option\", {\n        \"dateFormat\": \"yy-mm-dd\"\n    });\n\u3000\u3000//\u691c\u7d22\u5f8c\u3082\u65e5\u4ed8\u3092\u8868\u793a\u3055\u305b\u308b\u305f\u3081\n    $('#PostDateFrom').val('<?= $date_from?>');\u3000//\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u304b\u3089\u8a2d\u5b9a\n\n    $('#PostDateTo').datepicker({'prevText':'<','nextText':'>'});\n    $('#PostDateTo').datepicker(\"option\", {\n        \"dateFormat\": \"yy-mm-dd\"\n    });\n    $('#InvoiceDateTo').val('<?= $date_to?>');\u3000\u3000//\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u304b\u3089\u8a2d\u5b9a\n\n});\n</script>\n<h2>\u691c\u7d22</h2>\n<?= $this->Form->input('date_from', ['type' => 'text']) ?>\n<span> - </span>\n<?= $this->Form->input('date_to' ,['type' => 'text']) ?>\n\n\n\nController\n\nController\n<?php\n\n    class PostsController extends AppController{\n\n        public $uses = array('Post','Comment');\n\n        public $helpers = array('Html','Form');\n\n        public $components = array('Search.Prg');\n\n        public $presetVars = true;\n\n        public function index(){\n\n            $this->Prg->commonProcess();\n\n            $conditions = $this->Post->parseCriteria($this->passedArgs);\n\n            $this->paginate = array(\n                'limit'=>10,\n                //'order'=>array('id'=>'desc'),\n                'conditions'=>$conditions,\n            );\n            $this->set('posts',$this->paginate());\n\n            //posts\u306b\u306ffrom_date,to_date\u304c\u306a\u3044\u305f\u3081\u3001\u3053\u3061\u3089\u3092\u8ffd\u52a0\u3057\u3066View\u3067\u8868\u793a\n            if (!empty($this->request->data['Post']['date_from'])) {\n               $this->set('date_from', $this->request->data['Post']['date_from']);\n            } else {\n               $this->set('date_from', '');\n            }\n\n            if (!empty($this->request->data['Post']['date_to'])) {\n               $this->set('date_to', $this->request->data['Post']['date_to']);\n            } else {\n               $this->set('date_to', '');\n            }\n\n        }\n    }\n\n\n\nModel\nModel\u3067\u8ffd\u52a0\u304c\u5fc5\u8981\u5185\u5bb9\u306ffilterArgs\u306b\u65e5\u4ed8\u6761\u4ef6\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\u5b9f\u969bPost\u30c6\u30fc\u30d6\u30eb\u306b\u306f\u300cfrom_date\u300d\u300cto_date\u300d\u304c\u5b58\u5728\u3057\u306a\u3044\u305f\u3081\u3001conditions\u306b\u5b9f\u969b\u30c6\u30fc\u30d6\u30eb\u540d\u3067condition\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\nModel\n<?php\n\n    class Post extends AppModel{\n\n        ....\n\n        public $actsAs = array('Search.Searchable');\n\n        public $filterArgs = array(\n            'date_from'=>array('type'=>'query','method'=>'_dateFromConditions'),\n            'date_to'=>array('type'=>'query','method'=>'_dateToConditions'),\n        );\n\n        //from_date\n        public function _dateFromConditions($data = array()){\n            $from_date = $data['from_date'];\n            $conditions = array('DATE(Post.created) >= DATE(?)'=>array($from_date));\n            return $conditions;\n        }\n\n        //to_date\n        public function _dateToConditions($data = array()){\n\n            $to_date = $data['to_date'];\n            $conditions = array('DATE(Post.created) <= DATE(?)'=>array($to_date));\n            return $conditions;\n        }\n\n    }\n\n?>\n\n\n\u3053\u308c\u3067\u5b8c\u4e86\u3067\u3059\u3002\nSerach\u30d7\u30e9\u30b0\u30a4\u30f3\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u53c2\u8003\nhttp://mawatari.jp/archives/introduction-of-cakedc-search-plugin-for-cakephp\n\u305d\u306e\u4ed6CakePHP\u52c9\u5f37\u3092\u59cb\u3081\u308b\u65b9\u306f\u4ee5\u4e0b\u306e\u60c5\u5831\u3082\u307f\u3066\u304f\u3060\u3055\u3044\u3002\nhttp://qiita.com/amagasu1234/items/ba160f9e6264f7c90486\n#\u65e5\u4ed8\u7bc4\u56f2\u691c\u7d22\n\u5c11\u3057\u30cf\u30de\u3063\u305f\u306e\u3067\u6574\u7406\u3057\u3066\u304a\u304f\u3002\nModel\u306b\u300ccreated\u300d\u65e5\u4ed8\u304c\u3042\u308b\u3068\u3057\u307e\u3059\u3002\u305d\u308c\u3092\u691c\u7d22\u753b\u9762\u304b\u3089from~to\u306e\u7bc4\u56f2\u691c\u7d22\u304c\u5fc5\u8981\u306a\u5834\u5408\u3001\nSearch\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u3063\u3066\u3044\u308b\u306a\u3089Model\u304b\u3089\u7c21\u5358\u306b\u8a2d\u5b9a\u3067\u5b9f\u88c5\u53ef\u80fd\u306b\u306a\u308b\u3002\n\n\u4ee5\u4e0b\u3092\u53c2\u8003\u306b\u3057\u3066datepicker\u3092\u4f7f\u3063\u3066\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u53c2\u8003\uff1ahttp://kamakurasoft.net/blog/?p=1479\n\ndatepicker\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u53ca\u3073\u4f7f\u3044\u65b9\u306f\u3053\u3061\u3089\nhttps://jqueryui.com/datepicker/\n\n#View\n\u65e5\u4ed8\u691c\u7d22\u306e\u30b3\u30fc\u30c9\u3060\u3051\u3092\u66f8\u304d\u307e\u3059\u3002\ndatepicker\u95a2\u9023js\u3084css\u306a\u3069\u306f\u4e0a\u8a18\u306edatepicker\u30b5\u30a4\u30c8\u53c2\u7167\n\n```lang:View\n<script type=\"text/javascript\">\n$(function(){\n\u3000\u3000//\u3053\u3061\u3089\u306f\u81ea\u5206\u306bdatepicker\u8a2d\u5b9a\u3002\n    $('#PostDateFrom').datepicker({'prevText':'<','nextText':'>'});\n    //\u30ab\u30ec\u30f3\u30c0\u304b\u3089\u9078\u629e\u3057\u305f\u65e5\u4ed8\u3092yyyy-mm-dd\u306b\u8868\u793a\n\u3000\u3000$('#PostDateFrom').datepicker(\"option\", {\n        \"dateFormat\": \"yy-mm-dd\"\n    });\n\u3000\u3000//\u691c\u7d22\u5f8c\u3082\u65e5\u4ed8\u3092\u8868\u793a\u3055\u305b\u308b\u305f\u3081\n    $('#PostDateFrom').val('<?= $date_from?>');\u3000//\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u304b\u3089\u8a2d\u5b9a\n\n    $('#PostDateTo').datepicker({'prevText':'<','nextText':'>'});\n    $('#PostDateTo').datepicker(\"option\", {\n        \"dateFormat\": \"yy-mm-dd\"\n    });\n    $('#InvoiceDateTo').val('<?= $date_to?>');\u3000\u3000//\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u304b\u3089\u8a2d\u5b9a\n\n});\n</script>\n<h2>\u691c\u7d22</h2>\n<?= $this->Form->input('date_from', ['type' => 'text']) ?>\n<span> - </span>\n<?= $this->Form->input('date_to' ,['type' => 'text']) ?>\n```\n\n#Controller\n\n```lang:Controller\n<?php\n \n    class PostsController extends AppController{\n \n        public $uses = array('Post','Comment');\n \n        public $helpers = array('Html','Form');\n \n        public $components = array('Search.Prg');\n \n        public $presetVars = true;\n \n        public function index(){\n \n            $this->Prg->commonProcess();\n \n            $conditions = $this->Post->parseCriteria($this->passedArgs);\n \n            $this->paginate = array(\n                'limit'=>10,\n                //'order'=>array('id'=>'desc'),\n                'conditions'=>$conditions,\n            );\n            $this->set('posts',$this->paginate());\n\n            //posts\u306b\u306ffrom_date,to_date\u304c\u306a\u3044\u305f\u3081\u3001\u3053\u3061\u3089\u3092\u8ffd\u52a0\u3057\u3066View\u3067\u8868\u793a\n            if (!empty($this->request->data['Post']['date_from'])) {\n               $this->set('date_from', $this->request->data['Post']['date_from']);\n            } else {\n               $this->set('date_from', '');\n            }\n\n            if (!empty($this->request->data['Post']['date_to'])) {\n               $this->set('date_to', $this->request->data['Post']['date_to']);\n            } else {\n               $this->set('date_to', '');\n            }\n\n        }\n    }\n```\n\n#Model\nModel\u3067\u8ffd\u52a0\u304c\u5fc5\u8981\u5185\u5bb9\u306ffilterArgs\u306b\u65e5\u4ed8\u6761\u4ef6\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\u5b9f\u969bPost\u30c6\u30fc\u30d6\u30eb\u306b\u306f\u300cfrom_date\u300d\u300cto_date\u300d\u304c\u5b58\u5728\u3057\u306a\u3044\u305f\u3081\u3001conditions\u306b\u5b9f\u969b\u30c6\u30fc\u30d6\u30eb\u540d\u3067condition\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n```lang:Model\n<?php\n \n    class Post extends AppModel{\n \n        ....\n \n        public $actsAs = array('Search.Searchable');\n \n        public $filterArgs = array(\n            'date_from'=>array('type'=>'query','method'=>'_dateFromConditions'),\n            'date_to'=>array('type'=>'query','method'=>'_dateToConditions'),\n        );\n \n        //from_date\n        public function _dateFromConditions($data = array()){\n            $from_date = $data['from_date'];\n            $conditions = array('DATE(Post.created) >= DATE(?)'=>array($from_date));\n            return $conditions;\n        }\n \n        //to_date\n        public function _dateToConditions($data = array()){\n \n            $to_date = $data['to_date'];\n            $conditions = array('DATE(Post.created) <= DATE(?)'=>array($to_date));\n            return $conditions;\n        }\n \n    }\n \n?>\n```\n\n\u3053\u308c\u3067\u5b8c\u4e86\u3067\u3059\u3002\n\nSerach\u30d7\u30e9\u30b0\u30a4\u30f3\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u53c2\u8003\nhttp://mawatari.jp/archives/introduction-of-cakedc-search-plugin-for-cakephp\n\n\n\u305d\u306e\u4ed6CakePHP\u52c9\u5f37\u3092\u59cb\u3081\u308b\u65b9\u306f\u4ee5\u4e0b\u306e\u60c5\u5831\u3082\u307f\u3066\u304f\u3060\u3055\u3044\u3002\nhttp://qiita.com/amagasu1234/items/ba160f9e6264f7c90486\n\n\n\n"}