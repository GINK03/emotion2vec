{"tags": ["Java", "session", "scope"], "context": " More than 1 year has passed since last update.\u6559\u79d1\u66f8\u306b\u8f09\u3063\u3066\u3044\u308b\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u305f\n\n\u25aa\ufe0fRegisterUser.java C\n//\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u306b\u95a2\u3059\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51e6\u7406\u3059\u308b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\npackage servlet;\n\nimport java.io.IOException;\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.servlet.RequestDispatcher;\nimport javax.servlet.http.HttpSession;\nimport model.RegisterUserLogic;\nimport model.User;\n\n@WebServlet(\"/RegisterUser\")\npublic class RegisterUser extends HttpServlet {\n    private static final long serialVersionUID = 1L;\n\n    protected void doGet(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n\n        // \u30d5\u30a9\u30ef\u30fc\u30c9\u5148\n        String forwardPath = null;\n\n        // \u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u30af\u30e9\u30b9\u306e\u52d5\u4f5c\u3092\u6c7a\u5b9a\u3059\u308b\u300caction\u300d\u306e\u5024\u3092\n        // \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u304b\u3089\u53d6\u5f97(P142)\n        String action = request.getParameter(\"action\");\n\n        // \u300c\u767b\u9332\u306e\u958b\u59cb\u300d\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3055\u308c\u305f\u6642\u306e\u51e6\u7406\n        if (action == null) {\n            // \u30d5\u30a9\u30ef\u30fc\u30c9\u5148\u3092\u6307\u5b9a\n            forwardPath = \"/registerForm.jsp\";\n        }\n\n        // \u767b\u9332\u78ba\u8a8d\u753b\u9762\u304b\u3089\u300c\u767b\u9332\u5b9f\u884c\u300d\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3055\u308c\u305f\u6642\u306e\u51e6\u7406\n        else if (action.equals(\"done\")) {\n            // \u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30b3\u30fc\u30d7\u306b\u4fdd\u5b58\u3055\u308c\u305f\u767b\u9332\u30e6\u30fc\u30b6\u30fc\u3092\u53d6\u5f97\n            HttpSession session = request.getSession();\n            User registerUser = (User) session.getAttribute(\"registerUser\");\n\n            // \u767b\u9332\u51e6\u7406\u306e\u547c\u3073\u51fa\u3057\n            RegisterUserLogic logic = new RegisterUserLogic();\n            logic.execute(registerUser);\n\n            // \u4e0d\u8981\u3068\u306a\u3063\u305f\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30b3\u30fc\u30d7\u5185\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u524a\u9664\n            session.removeAttribute(\"registerUser\");\n\n            // \u767b\u9332\u5f8c\u306e\u30d5\u30a9\u30ef\u30fc\u30c9\u5148\u3092\u8a2d\u5b9a\n            forwardPath = \"/registerDone.jsp\";\n        }\n\n        // \u8a2d\u5b9a\u3055\u308c\u305f\u30d5\u30a9\u30ef\u30fc\u30c9\u5148\u306b\u30d5\u30a9\u30ef\u30fc\u30c9\n        RequestDispatcher dispatcher = request.getRequestDispatcher(forwardPath);\n        dispatcher.forward(request, response);\n    }\n\n    protected void doPost(HttpServletRequest request, HttpServletResponse response)\n            throws ServletException, IOException {\n\n        // \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306e\u53d6\u5f97\n        request.setCharacterEncoding(\"UTF-8\");\n        String id = request.getParameter(\"id\");\n        String name = request.getParameter(\"name\");\n        String pass = request.getParameter(\"pass\");\n\n        // \u767b\u9332\u3059\u308b\u30e6\u30fc\u30b6\u30fc\u306e\u60c5\u5831\u3092\u8a2d\u5b9a\n        User registerUser = new User(id, name, pass);\n\n        // \u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30b3\u30fc\u30d7\u306b\u767b\u9332\u30e6\u30fc\u30b6\u30fc\u3092\u4fdd\u5b58\n        HttpSession session = request.getSession();\n        session.setAttribute(\"registerUser\", registerUser);\n\n        // \u30d5\u30a9\u30ef\u30fc\u30c9\n        RequestDispatcher dispatcher = request.getRequestDispatcher(\"/registerConfirm.jsp\");\n        dispatcher.forward(request, response);\n\n    }\n\n}\n\n\u25aa\ufe0fUser.java M\npackage model;\n\npublic class User implements java.io.Serializable {\n    private String id;\n    private String name;\n    private String pass;\n\n    public User() {\n\n    }\n\n    public User(String id, String name, String pass) {\n        this.id = id;\n        this.name = name;\n        this.pass = pass;\n    }\n\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getPass() {\n        return pass;\n    }\n\n    public void setPass(String pass) {\n        this.pass = pass;\n    }\n\n}\n\n\u25aa\ufe0fRegisterUserLogic.java M\n//\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u3092\u884c\u3046\u30e2\u30c7\u30eb(\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3078\u306e\u767b\u9332\u306f\u884c\u308f\u306a\u3044)\npackage model;\n\npublic class RegisterUserLogic {\n    public boolean execute(User user) {\n        // \u767b\u9332\u51e6\u7406\n        return true;\n    }\n}\n\n\u25aa\ufe0fregisterForm.jsp V\n<!--\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u5165\u529b\u753b\u9762 -->\n<%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n    pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title>\u30e6\u30fc\u30b6\u30fc\u767b\u9332</title>\n</head>\n<body>\n    <form action=\"/UserRegistration/RegisterUser\" method=\"post\">\n        \u30ed\u30b0\u30a4\u30f3ID:<input type=\"text\" name=\"id\"><br> \u30d1\u30b9\u30ef\u30fc\u30c9:<input\n            type=\"password\" name=\"pass\"><br> \u540d\u524d:<input type=\"text\"\n            name=\"name\"><br> <input type=\"submit\" value=\"\u78ba\u8a8d\">\n    </form>\n</body>\n</html>\n\n\u25aa\ufe0fregisterConfirm.jsp V\n<!-- \u30e6\u30fc\u30b6\u30fc\u767b\u9332\u78ba\u8a8d\u753b\u9762 -->\n<%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n    pageEncoding=\"UTF-8\"%>\n<%@ page import=\"model.User\"%>\n<%\n    User registerUser = (User) session.getAttribute(\"registerUser\");\n%>\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title>\u30e6\u30fc\u30b6\u30fc\u767b\u9332</title>\n</head>\n<body>\n    <p>\u4e0b\u8a18\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u767b\u9332\u3057\u307e\u3059</p>\n    <p>\n        \u30ed\u30b0\u30a4\u30f3ID:<%=registerUser.getId()%><br> \u540d\u524d:<%=registerUser.getName()%><br>\n    </p>\n    <a href=\"/UserRegistration/RegisterUser\">\u623b\u308b</a>\n    <a href=\"/UserRegistration/RegisterUser?action=done\">\u767b\u9332</a>\n</body>\n</html>\n\n\u25aa\ufe0fregisterDone.jsp V\n<!--\u300c\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u5b8c\u4e86\u753b\u9762\u300d\u3092\u51fa\u529b\u3059\u308b\u30d3\u30e5\u30fc-->\n<%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n    pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title>\u30e6\u30fc\u30b6\u30fc\u767b\u9332</title>\n</head>\n<body>\n    <p>\u767b\u9332\u5b8c\u4e86\u3057\u307e\u3057\u305f</p>\n    <a href=\"/UserRegistration/RegisterUser\">\u623b\u308b</a>\n</body>\n</html>\n\n\u25aa\ufe0fRegisterUser.java C \u5b9f\u884c\u7d50\u679c\n\n\n\n\n\u6559\u79d1\u66f8\u306b\u8f09\u3063\u3066\u3044\u308b\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u305f\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-02-29 13.12.08.png](https://qiita-image-store.s3.amazonaws.com/0/95187/9d1fadaa-a0ee-473a-8b52-3d3dc4d126b2.png)\n\n\u25aa\ufe0fRegisterUser.java <font color=\"ff0000\">C</font>\n\n```java\n//\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u306b\u95a2\u3059\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51e6\u7406\u3059\u308b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\npackage servlet;\n\nimport java.io.IOException;\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.servlet.RequestDispatcher;\nimport javax.servlet.http.HttpSession;\nimport model.RegisterUserLogic;\nimport model.User;\n\n@WebServlet(\"/RegisterUser\")\npublic class RegisterUser extends HttpServlet {\n\tprivate static final long serialVersionUID = 1L;\n\n\tprotected void doGet(HttpServletRequest request, HttpServletResponse response)\n\t\t\tthrows ServletException, IOException {\n\n\t\t// \u30d5\u30a9\u30ef\u30fc\u30c9\u5148\n\t\tString forwardPath = null;\n\n\t\t// \u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u30af\u30e9\u30b9\u306e\u52d5\u4f5c\u3092\u6c7a\u5b9a\u3059\u308b\u300caction\u300d\u306e\u5024\u3092\n\t\t// \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u304b\u3089\u53d6\u5f97(P142)\n\t\tString action = request.getParameter(\"action\");\n\n\t\t// \u300c\u767b\u9332\u306e\u958b\u59cb\u300d\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3055\u308c\u305f\u6642\u306e\u51e6\u7406\n\t\tif (action == null) {\n\t\t\t// \u30d5\u30a9\u30ef\u30fc\u30c9\u5148\u3092\u6307\u5b9a\n\t\t\tforwardPath = \"/registerForm.jsp\";\n\t\t}\n\n\t\t// \u767b\u9332\u78ba\u8a8d\u753b\u9762\u304b\u3089\u300c\u767b\u9332\u5b9f\u884c\u300d\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3055\u308c\u305f\u6642\u306e\u51e6\u7406\n\t\telse if (action.equals(\"done\")) {\n\t\t\t// \u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30b3\u30fc\u30d7\u306b\u4fdd\u5b58\u3055\u308c\u305f\u767b\u9332\u30e6\u30fc\u30b6\u30fc\u3092\u53d6\u5f97\n\t\t\tHttpSession session = request.getSession();\n\t\t\tUser registerUser = (User) session.getAttribute(\"registerUser\");\n\n\t\t\t// \u767b\u9332\u51e6\u7406\u306e\u547c\u3073\u51fa\u3057\n\t\t\tRegisterUserLogic logic = new RegisterUserLogic();\n\t\t\tlogic.execute(registerUser);\n\n\t\t\t// \u4e0d\u8981\u3068\u306a\u3063\u305f\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30b3\u30fc\u30d7\u5185\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u524a\u9664\n\t\t\tsession.removeAttribute(\"registerUser\");\n\n\t\t\t// \u767b\u9332\u5f8c\u306e\u30d5\u30a9\u30ef\u30fc\u30c9\u5148\u3092\u8a2d\u5b9a\n\t\t\tforwardPath = \"/registerDone.jsp\";\n\t\t}\n\n\t\t// \u8a2d\u5b9a\u3055\u308c\u305f\u30d5\u30a9\u30ef\u30fc\u30c9\u5148\u306b\u30d5\u30a9\u30ef\u30fc\u30c9\n\t\tRequestDispatcher dispatcher = request.getRequestDispatcher(forwardPath);\n\t\tdispatcher.forward(request, response);\n\t}\n\n\tprotected void doPost(HttpServletRequest request, HttpServletResponse response)\n\t\t\tthrows ServletException, IOException {\n\n\t\t// \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306e\u53d6\u5f97\n\t\trequest.setCharacterEncoding(\"UTF-8\");\n\t\tString id = request.getParameter(\"id\");\n\t\tString name = request.getParameter(\"name\");\n\t\tString pass = request.getParameter(\"pass\");\n\n\t\t// \u767b\u9332\u3059\u308b\u30e6\u30fc\u30b6\u30fc\u306e\u60c5\u5831\u3092\u8a2d\u5b9a\n\t\tUser registerUser = new User(id, name, pass);\n\n\t\t// \u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30b3\u30fc\u30d7\u306b\u767b\u9332\u30e6\u30fc\u30b6\u30fc\u3092\u4fdd\u5b58\n\t\tHttpSession session = request.getSession();\n\t\tsession.setAttribute(\"registerUser\", registerUser);\n\n\t\t// \u30d5\u30a9\u30ef\u30fc\u30c9\n\t\tRequestDispatcher dispatcher = request.getRequestDispatcher(\"/registerConfirm.jsp\");\n\t\tdispatcher.forward(request, response);\n\n\t}\n\n}\n```\n\n\u25aa\ufe0fUser.java <font color=\"ff0000\">M</font>\n\n```java\npackage model;\n\npublic class User implements java.io.Serializable {\n\tprivate String id;\n\tprivate String name;\n\tprivate String pass;\n\n\tpublic User() {\n\n\t}\n\n\tpublic User(String id, String name, String pass) {\n\t\tthis.id = id;\n\t\tthis.name = name;\n\t\tthis.pass = pass;\n\t}\n\n\tpublic String getId() {\n\t\treturn id;\n\t}\n\n\tpublic void setId(String id) {\n\t\tthis.id = id;\n\t}\n\n\tpublic String getName() {\n\t\treturn name;\n\t}\n\n\tpublic void setName(String name) {\n\t\tthis.name = name;\n\t}\n\n\tpublic String getPass() {\n\t\treturn pass;\n\t}\n\n\tpublic void setPass(String pass) {\n\t\tthis.pass = pass;\n\t}\n\n}\n```\n\n\u25aa\ufe0fRegisterUserLogic.java <font color=\"ff0000\">M</font>\n\n```java\n//\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u3092\u884c\u3046\u30e2\u30c7\u30eb(\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3078\u306e\u767b\u9332\u306f\u884c\u308f\u306a\u3044)\npackage model;\n\npublic class RegisterUserLogic {\n\tpublic boolean execute(User user) {\n\t\t// \u767b\u9332\u51e6\u7406\n\t\treturn true;\n\t}\n}\n```\n\n\u25aa\ufe0fregisterForm.jsp <font color=\"ff0000\">V</font>\n\n```jsp\n<!--\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u5165\u529b\u753b\u9762 -->\n<%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n\tpageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title>\u30e6\u30fc\u30b6\u30fc\u767b\u9332</title>\n</head>\n<body>\n\t<form action=\"/UserRegistration/RegisterUser\" method=\"post\">\n\t\t\u30ed\u30b0\u30a4\u30f3ID:<input type=\"text\" name=\"id\"><br> \u30d1\u30b9\u30ef\u30fc\u30c9:<input\n\t\t\ttype=\"password\" name=\"pass\"><br> \u540d\u524d:<input type=\"text\"\n\t\t\tname=\"name\"><br> <input type=\"submit\" value=\"\u78ba\u8a8d\">\n\t</form>\n</body>\n</html>\n```\n\n\u25aa\ufe0fregisterConfirm.jsp <font color=\"ff0000\">V</font>\n\n```jsp\n<!-- \u30e6\u30fc\u30b6\u30fc\u767b\u9332\u78ba\u8a8d\u753b\u9762 -->\n<%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n\tpageEncoding=\"UTF-8\"%>\n<%@ page import=\"model.User\"%>\n<%\n\tUser registerUser = (User) session.getAttribute(\"registerUser\");\n%>\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title>\u30e6\u30fc\u30b6\u30fc\u767b\u9332</title>\n</head>\n<body>\n\t<p>\u4e0b\u8a18\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u767b\u9332\u3057\u307e\u3059</p>\n\t<p>\n\t\t\u30ed\u30b0\u30a4\u30f3ID:<%=registerUser.getId()%><br> \u540d\u524d:<%=registerUser.getName()%><br>\n\t</p>\n\t<a href=\"/UserRegistration/RegisterUser\">\u623b\u308b</a>\n\t<a href=\"/UserRegistration/RegisterUser?action=done\">\u767b\u9332</a>\n</body>\n</html>\n```\n\n\u25aa\ufe0fregisterDone.jsp <font color=\"ff0000\">V</font>\n\n```jsp\n<!--\u300c\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u5b8c\u4e86\u753b\u9762\u300d\u3092\u51fa\u529b\u3059\u308b\u30d3\u30e5\u30fc-->\n<%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n\tpageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title>\u30e6\u30fc\u30b6\u30fc\u767b\u9332</title>\n</head>\n<body>\n\t<p>\u767b\u9332\u5b8c\u4e86\u3057\u307e\u3057\u305f</p>\n\t<a href=\"/UserRegistration/RegisterUser\">\u623b\u308b</a>\n</body>\n</html>\n```\n\n\u25aa\ufe0fRegisterUser.java <font color=\"ff0000\">C</font> \u5b9f\u884c\u7d50\u679c\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-02-29 13.12.08.png](https://qiita-image-store.s3.amazonaws.com/0/95187/2b06e631-8245-16df-4eec-fac3e66faf7e.png)\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-02-29 13.14.19.png](https://qiita-image-store.s3.amazonaws.com/0/95187/1144e8fb-afeb-d82e-9592-915386523f0b.png)\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-02-29 13.15.37.png](https://qiita-image-store.s3.amazonaws.com/0/95187/9c5c1ce1-a956-8160-efbd-a7dd0b05c237.png)\n\n\n\n![IMG_4605.JPG](https://qiita-image-store.s3.amazonaws.com/0/95187/a3166ce0-65f5-87a7-6d83-db3214709e04.jpeg)\n"}