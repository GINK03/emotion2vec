{"context": "Docker-machine\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30e1\u30e2\n\u30ed\u30fc\u30ab\u30ebPC\uff08Mac\u7248\uff09\u306eVirtualBox\u3067Docker-machine\u3092\u52d5\u304b\u3059\u305f\u3081\u306b\u8272\u3005\u8abf\u3079\u307e\u3057\u305f\u3002\n\u904e\u53bb\u306eQIITA\u306e\u8a18\u4e8b\u306e\u6700\u65b0\u7248\u3068\u3057\u3066\u306e\u610f\u5473\u3082\u3042\u308a\u307e\u3059\u3002\nDocker Machine \u3092\u4f7f\u3063\u3066 VirtualBox \u306b Docker\u30db\u30b9\u30c8\u3092\u7acb\u3066\u308b\n\n0.\u524d\u63d0\n\u30ed\u30fc\u30ab\u30ebPC\uff08MAC\u7248\uff09\u306b\u306f\u3001\u4e8b\u524d\u306bDocker\u3092\u5165\u308c\u3066\u304a\u304d\u307e\u3059\u3002\n\u53c2\u7167\u5148\uff1a\nhttps://www.docker.com/products/docker-toolbox\n\n1.Docker-Machine\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u540c\u30ed\u30fc\u30ab\u30ebPC\u306b\u3001Docker-Machine\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nVirtualBox\u4e0a\u306e\u30b2\u30b9\u30c8OS\u306b\u5165\u308c\u307e\u305b\u3093\u3002\n\u53c2\u7167\u5148\uff1a\n\u30fb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306e\u8aac\u660e\u7b87\u6240\nhttps://docs.docker.com/machine/#osx-and-linux\n\u30fbDocker-Machine\u306e\u30d5\u30a1\u30a4\u30eb\u7f6e\u304d\u5834\u6240\uff08\u6700\u65b0\u5834\u6240\u306e\u78ba\u8a8d\uff09\nhttps://github.com/docker/machine/releases/\n\uff08\u57f7\u7b46\u6642\u306f\u6700\u65b0\u304c\uff10\uff0e\uff17\u7248\uff09\n$ curl -L https://github.com/docker/machine/releases/download/v0.7.0/docker-machine-`uname -s`-`uname -m` >/usr/local/bin/docker-machine  \n$ chmod +x /usr/local/bin/docker-machine\n\n$ docker-machine --version\ndocker-machine version 0.7.0, build a650a40\n$ \n\n\n2.VirtualBox\u4e0a\u306bDocker\u30db\u30b9\u30c8\u3092\u7acb\u3066\u3066\u3001\u8d77\u52d5\n$ docker-machine create --driver virtualbox dev-test\nRunning pre-create checks...\n(dev-test) Image cache directory does not exist, creating it at /Users/qiita/.docker/machine/cache...\n(dev-test) No default Boot2Docker ISO found locally, downloading the latest release...\n(dev-test) Latest release for github.com/boot2docker/boot2docker is v1.11.1\n(dev-test) Downloading /Users/qiita/.docker/machine/cache/boot2docker.iso from https://github.com/boot2docker/boot2docker/releases/download/v1.11.1/boot2docker.iso...\n(dev-test) 0%....10%....20%....30%....40%....50%....60%....70%....80%....90%....100%\nCreating machine...\n(dev-test) Copying /Users/qiita/.docker/machine/cache/boot2docker.iso to /Users/qiita/.docker/machine/machines/dev-test/boot2docker.iso...\n(dev-test) Creating VirtualBox VM...\n(dev-test) Creating SSH key...\n(dev-test) Starting the VM...\n(dev-test) Check network to re-create if needed...\n(dev-test) Found a new host-only adapter: \"vboxnet2\"\n(dev-test) Waiting for an IP...\nWaiting for machine to be running, this may take a few minutes...\nDetecting operating system of created instance...\nWaiting for SSH to be available...\nDetecting the provisioner...\nProvisioning with boot2docker...\nCopying certs to the local machine directory...\nCopying certs to the remote machine...\nSetting Docker configuration on the remote daemon...\nChecking connection to Docker...\nDocker is up and running!\nTo see how to connect your Docker Client to the Docker Engine running on this virtual machine, run: docker-machine env dev-test\n$ \n\n$ docker-machine ls\nNAME       ACTIVE   DRIVER         STATE     URL                         SWARM   DOCKER    ERRORS\ndev-test   -        virtualbox     Running   tcp://192.168.99.100:2376           v1.11.1   \n$ \n\n\n3.VirtualBox\u306eDocker\u30db\u30b9\u30c8\u3068Docker\u30b3\u30f3\u30c6\u30ca\u306e\u78ba\u8a8d\n\u8d77\u52d5\u306e\u524d\u306b\u3001\u74b0\u5883\u5909\u6570\u307e\u308f\u308a\u3092\u78ba\u8a8d\n$ docker-machine env dev-test\nexport DOCKER_TLS_VERIFY=\"1\"\nexport DOCKER_HOST=\"tcp://192.168.99.100:2376\"\nexport DOCKER_CERT_PATH=\"/Users/qiita/.docker/machine/machines/dev-test\"\nexport DOCKER_MACHINE_NAME=\"dev-test\"\n# Run this command to configure your shell: \n# eval $(docker-machine env dev-test)\n$ \n\n\u30aa\u30d7\u30b7\u30e7\u30f3\u5f62\u5f0f\u3082\u3042\u308a\u307e\u3059\n$ docker-machine config dev-test\n--tlsverify\n--tlscacert=\"/Users/qiita/.docker/machine/certs/ca.pem\"\n--tlscert=\"/Users/qiita/.docker/machine/certs/cert.pem\"\n--tlskey=\"/Users/qiita/.docker/machine/certs/key.pem\"\n-H=tcp://192.168.99.100:2376\n$ \n\n\u3053\u306e\u5f62\u5f0f\u3092\u5229\u7528\u3057\u3066\n$ docker $(docker-machine config dev-test) ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n$ \n\nVirtualBox\u4e0a\u3067\u7a3c\u50cd\u3057\u305fVM\uff08dev-test\uff09\u4e0a\u306eDocker\u30b3\u30f3\u30c6\u30ca\u306e\u7a3c\u50cd\u72b6\u6cc1\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\u305d\u3053\u3067\u3001VirtualBox\u4e0a\u306e\u30b3\u30f3\u30c6\u30ca\u306bHelloWorld\u3092\u8d77\u52d5\u3055\u305b\u307e\u3059\u3002\n$ docker $(docker-machine config dev-test) run busybox echo hello world\nUnable to find image 'busybox:latest' locally\nlatest: Pulling from library/busybox\n385e281300cc: Pull complete \na3ed95caeb02: Pull complete \nDigest: sha256:4a887a2326ec9e0fa90cce7b4764b0e627b5d6afcb81a3f73c85dc29cea00048\nStatus: Downloaded newer image for busybox:latest\nhello world\n$\n\n\u8d77\u52d5\u3057\u305f\u7d50\u679c\u3092\u78ba\u8a8d\u3057\u307e\u3059\n$ docker $(docker-machine config dev-test) ps -a\nCONTAINER ID        IMAGE               COMMAND              CREATED             STATUS                      PORTS               NAMES\n2d06e005e871        busybox             \"echo hello world\"   14 seconds ago      Exited (0) 14 seconds ago                       kickass_easley\n$ \n\nDocker-machine\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30e1\u30e2\n\n\u30ed\u30fc\u30ab\u30ebPC\uff08Mac\u7248\uff09\u306eVirtualBox\u3067Docker-machine\u3092\u52d5\u304b\u3059\u305f\u3081\u306b\u8272\u3005\u8abf\u3079\u307e\u3057\u305f\u3002\n\u904e\u53bb\u306eQIITA\u306e\u8a18\u4e8b\u306e\u6700\u65b0\u7248\u3068\u3057\u3066\u306e\u610f\u5473\u3082\u3042\u308a\u307e\u3059\u3002\n\n[Docker Machine \u3092\u4f7f\u3063\u3066 VirtualBox \u306b Docker\u30db\u30b9\u30c8\u3092\u7acb\u3066\u308b](http://qiita.com/spesnova/items/038af6a8a4e401e3d2aa)\n\n#0.\u524d\u63d0\n\u30ed\u30fc\u30ab\u30ebPC\uff08MAC\u7248\uff09\u306b\u306f\u3001\u4e8b\u524d\u306bDocker\u3092\u5165\u308c\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u53c2\u7167\u5148\uff1a\nhttps://www.docker.com/products/docker-toolbox\n\n#1.Docker-Machine\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u540c\u30ed\u30fc\u30ab\u30ebPC\u306b\u3001Docker-Machine\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nVirtualBox\u4e0a\u306e\u30b2\u30b9\u30c8OS\u306b\u5165\u308c\u307e\u305b\u3093\u3002\n\n\u53c2\u7167\u5148\uff1a\n\u30fb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306e\u8aac\u660e\u7b87\u6240\nhttps://docs.docker.com/machine/#osx-and-linux\n\u30fbDocker-Machine\u306e\u30d5\u30a1\u30a4\u30eb\u7f6e\u304d\u5834\u6240\uff08\u6700\u65b0\u5834\u6240\u306e\u78ba\u8a8d\uff09\nhttps://github.com/docker/machine/releases/\n\uff08\u57f7\u7b46\u6642\u306f\u6700\u65b0\u304c\uff10\uff0e\uff17\u7248\uff09\n\n```\n$ curl -L https://github.com/docker/machine/releases/download/v0.7.0/docker-machine-`uname -s`-`uname -m` >/usr/local/bin/docker-machine  \n$ chmod +x /usr/local/bin/docker-machine\n\n$ docker-machine --version\ndocker-machine version 0.7.0, build a650a40\n$ \n```\n\n#2.VirtualBox\u4e0a\u306bDocker\u30db\u30b9\u30c8\u3092\u7acb\u3066\u3066\u3001\u8d77\u52d5\n\n```\n$ docker-machine create --driver virtualbox dev-test\nRunning pre-create checks...\n(dev-test) Image cache directory does not exist, creating it at /Users/qiita/.docker/machine/cache...\n(dev-test) No default Boot2Docker ISO found locally, downloading the latest release...\n(dev-test) Latest release for github.com/boot2docker/boot2docker is v1.11.1\n(dev-test) Downloading /Users/qiita/.docker/machine/cache/boot2docker.iso from https://github.com/boot2docker/boot2docker/releases/download/v1.11.1/boot2docker.iso...\n(dev-test) 0%....10%....20%....30%....40%....50%....60%....70%....80%....90%....100%\nCreating machine...\n(dev-test) Copying /Users/qiita/.docker/machine/cache/boot2docker.iso to /Users/qiita/.docker/machine/machines/dev-test/boot2docker.iso...\n(dev-test) Creating VirtualBox VM...\n(dev-test) Creating SSH key...\n(dev-test) Starting the VM...\n(dev-test) Check network to re-create if needed...\n(dev-test) Found a new host-only adapter: \"vboxnet2\"\n(dev-test) Waiting for an IP...\nWaiting for machine to be running, this may take a few minutes...\nDetecting operating system of created instance...\nWaiting for SSH to be available...\nDetecting the provisioner...\nProvisioning with boot2docker...\nCopying certs to the local machine directory...\nCopying certs to the remote machine...\nSetting Docker configuration on the remote daemon...\nChecking connection to Docker...\nDocker is up and running!\nTo see how to connect your Docker Client to the Docker Engine running on this virtual machine, run: docker-machine env dev-test\n$ \n```\n\n```\n$ docker-machine ls\nNAME       ACTIVE   DRIVER         STATE     URL                         SWARM   DOCKER    ERRORS\ndev-test   -        virtualbox     Running   tcp://192.168.99.100:2376           v1.11.1   \n$ \n```\n\n#3.VirtualBox\u306eDocker\u30db\u30b9\u30c8\u3068Docker\u30b3\u30f3\u30c6\u30ca\u306e\u78ba\u8a8d\n\n\u8d77\u52d5\u306e\u524d\u306b\u3001\u74b0\u5883\u5909\u6570\u307e\u308f\u308a\u3092\u78ba\u8a8d\n\n```\n$ docker-machine env dev-test\nexport DOCKER_TLS_VERIFY=\"1\"\nexport DOCKER_HOST=\"tcp://192.168.99.100:2376\"\nexport DOCKER_CERT_PATH=\"/Users/qiita/.docker/machine/machines/dev-test\"\nexport DOCKER_MACHINE_NAME=\"dev-test\"\n# Run this command to configure your shell: \n# eval $(docker-machine env dev-test)\n$ \n```\n\n\u30aa\u30d7\u30b7\u30e7\u30f3\u5f62\u5f0f\u3082\u3042\u308a\u307e\u3059\n\n```\n$ docker-machine config dev-test\n--tlsverify\n--tlscacert=\"/Users/qiita/.docker/machine/certs/ca.pem\"\n--tlscert=\"/Users/qiita/.docker/machine/certs/cert.pem\"\n--tlskey=\"/Users/qiita/.docker/machine/certs/key.pem\"\n-H=tcp://192.168.99.100:2376\n$ \n```\n\n\u3053\u306e\u5f62\u5f0f\u3092\u5229\u7528\u3057\u3066\n\n```\n$ docker $(docker-machine config dev-test) ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n$ \n```\n\nVirtualBox\u4e0a\u3067\u7a3c\u50cd\u3057\u305fVM\uff08dev-test\uff09\u4e0a\u306eDocker\u30b3\u30f3\u30c6\u30ca\u306e\u7a3c\u50cd\u72b6\u6cc1\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\u305d\u3053\u3067\u3001VirtualBox\u4e0a\u306e\u30b3\u30f3\u30c6\u30ca\u306bHelloWorld\u3092\u8d77\u52d5\u3055\u305b\u307e\u3059\u3002\n\n```\n$ docker $(docker-machine config dev-test) run busybox echo hello world\nUnable to find image 'busybox:latest' locally\nlatest: Pulling from library/busybox\n385e281300cc: Pull complete \na3ed95caeb02: Pull complete \nDigest: sha256:4a887a2326ec9e0fa90cce7b4764b0e627b5d6afcb81a3f73c85dc29cea00048\nStatus: Downloaded newer image for busybox:latest\nhello world\n$\n```\n\n\u8d77\u52d5\u3057\u305f\u7d50\u679c\u3092\u78ba\u8a8d\u3057\u307e\u3059\n\n```\n$ docker $(docker-machine config dev-test) ps -a\nCONTAINER ID        IMAGE               COMMAND              CREATED             STATUS                      PORTS               NAMES\n2d06e005e871        busybox             \"echo hello world\"   14 seconds ago      Exited (0) 14 seconds ago                       kickass_easley\n$ \n```\n\n", "tags": ["docker", "docker-machine", "VirtualBox"]}