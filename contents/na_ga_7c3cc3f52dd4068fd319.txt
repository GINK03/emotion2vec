{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nKubernetes \u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u89e3\u6790 UI \u3068\u3057\u3066 kubedash \u304c\u3042\u308a\u307e\u3059\u3002kubedash \u306f\u3001\u76f4\u8fd1 1 \u6642\u9593\u306e\u30ea\u30bd\u30fc\u30b9\u5229\u7528\u7387\u306a\u3069\u3092\u95b2\u89a7\u3067\u304d\u307e\u3059\u3002\u4eca\u56de\u306f kubedash \u3092 GKE \u4e0a\u3067\u4f7f\u7528\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n\n\u74b0\u5883\n\u73fe\u6642\u70b9\u3067\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f GKE (Kubernetes) v1.1 \u304a\u3088\u3073 kubedash 0.2.1 \u3067\u3059\u3002\n\nkubedash\nkubedash \u306f Kubernetes Organization \u3067\u958b\u767a\u3055\u308c\u3066\u3044\u307e\u3059\u3002https://github.com/kubernetes/kubedash\n\nHow to install\nkubedash \u306e Docker Image \u306f GCR \u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u307e\u305f RC \u3068 Service \u306e Spec \u30d5\u30a1\u30a4\u30eb\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u307e\u305a\u306f Spec \u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002https://github.com/kubernetes/kubedash/blob/master/deploy/kube-config.yaml \n$ curl -O https://raw.githubusercontent.com/kubernetes/kubedash/master/deploy/kube-config.yaml\n$ cat ./kube-config.yaml\n---\n  apiVersion: \"v1\"\n  kind: \"ReplicationController\"\n  metadata:\n    labels:\n      name: \"kubedash\"\n    name: \"kubedash\"\n    namespace: \"kube-system\"\n  spec:\n    replicas: 1\n    selector:\n      name: \"kubedash\"\n    template:\n      metadata:\n        labels:\n          name: \"kubedash\"\n      spec:\n        containers:\n          -\n            image: \"gcr.io/google_containers/kubedash:v0.2.1\"\n            name: \"kubedash\"\n            command:\n              - \"/kubedash\"\n            resources:\n              limits:\n                cpu: 50m\n                memory: 100Mi\n            volumeMounts:\n              -\n                name: \"ssl-certs\"\n                mountPath: \"/etc/ssl/certs\"\n                readOnly: true\n        volumes:\n          -\n            name: \"ssl-certs\"\n            hostPath:\n              path: \"/etc/ssl/certs\"\n\n---\n  apiVersion: \"v1\"\n  kind: \"Service\"\n  metadata:\n    labels:\n      name: \"kubedash\"\n    name: \"kubedash\"\n    namespace: \"kube-system\"\n  spec:\n    type: \"LoadBalancer\"\n    ports:\n      -\n        port: 80\n        targetPort: 8289\n    selector:\n      name: \"kubedash\"\n\n\u5b9f\u969b\u306b kubectl \u3067 Spec \u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u3066 RC \u3068 Service \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ kubectl create -f ./kube-config.yaml\nreplicationcontroller \"kubedash\" created\nservice \"kubedash\" created\n\n\u4f5c\u6210\u3055\u308c\u305f RC \u3068 Service \u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002kubedash \u306f kube-system \u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u4f5c\u6210\u3055\u308c\u308b\u305f\u3081 --namespace=kube-system \u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\n$ kubectl --namespace=kube-system get rc\nCONTROLLER         CONTAINER(S)           IMAGE(S)                                             SELECTOR                       REPLICAS   AGE\nheapster-v10       heapster               gcr.io/google_containers/heapster:v0.18.2            k8s-app=heapster,version=v10   1          4d\nkube-dns-v9        etcd                   gcr.io/google_containers/etcd:2.0.9                  k8s-app=kube-dns,version=v9    1          4d\n                   kube2sky               gcr.io/google_containers/kube2sky:1.11\n                   skydns                 gcr.io/google_containers/skydns:2015-10-13-8c72f8c\n                   healthz                gcr.io/google_containers/exechealthz:1.0\nkube-ui-v4         kube-ui                gcr.io/google_containers/kube-ui:v4                  k8s-app=kube-ui,version=v4     1         4d\nkubedash           kubedash               gcr.io/google_containers/kubedash:v0.2.1             name=kubedash                  1         28s\nl7-lb-controller   default-http-backend   gcr.io/google_containers/defaultbackend:1.0          k8s-app=glbc,version=v0.5.1    1         4d\n                   l7-lb-controller       gcr.io/google_containers/glbc:0.5.1\n\n$ kubectl --namespace=kube-system get service\nNAME                   CLUSTER_IP       EXTERNAL_IP       PORT(S)         SELECTOR           AGE\ndefault-http-backend   10.107.241.11    nodes             80/TCP          k8s-app=glbc       4d\nheapster               10.107.245.65    <none>            80/TCP          k8s-app=heapster   4d\nkube-dns               10.107.240.10    <none>            53/UDP,53/TCP   k8s-app=kube-dns   4d\nkube-ui                10.107.249.194   <none>            80/TCP          k8s-app=kube-ui    4d\nkubedash               10.107.254.5     yyy.yyy.yyy.yyy   80/TCP          name=kubedash      4m\n\n\nHow to use\nkubedash \u306f Kubernetes Dashboard (kube-ui) \u3068\u540c\u7b49\u306b Basic \u8a8d\u8a3c\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\u307e\u305a\u306f GKE Cluster \u306e\u60c5\u5831 (\u4e0b\u8a18\u306f\u4e00\u90e8\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u60c5\u5831\u3092\u4f0f\u5b57\u306b\u3057\u3066\u3044\u307e\u3059) \u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n$ gcloud container clusters describe ennis-as-nginx-a\nclusterIpv4Cidr: 10.104.0.0/14\ncreateTime: '2016-01-20T16:20:56+00:00'\ncurrentMasterVersion: 1.1.4\ncurrentNodeCount: 3\ncurrentNodeVersion: 1.1.4\nendpoint: xxx.xxx.xxx.xxx\ninitialClusterVersion: 1.1.4\ninitialNodeCount: 3\ninstanceGroupUrls:\n- https://www.googleapis.com/replicapool/v1beta2/projects/xxxxx/zones/asia-east1-b/instanceGroupManagers/gke-ennis-as-nginx-a-f7387859-group\nloggingService: logging.googleapis.com\nmasterAuth:\n  clientCertificate: xxxxx\n  clientKey: xxxxx\n  clusterCaCertificate: xxxxx\n  password: boh7eeTh2eeM8phe\n  username: admin\nmonitoringService: monitoring.googleapis.com\nname: ennis-as-nginx-a\nnetwork: default\nnodeConfig:\n  diskSizeGb: 100\n  machineType: n1-highcpu-2\n  oauthScopes:\n  - https://www.googleapis.com/auth/bigquery\n  - https://www.googleapis.com/auth/compute\n  - https://www.googleapis.com/auth/devstorage.read_only\n  - https://www.googleapis.com/auth/logging.write\n  - https://www.googleapis.com/auth/monitoring\nnodeIpv4CidrSize: 24\nselfLink: https://container.googleapis.com/v1/projects/xxxxx/zones/asia-east1-b/clusters/ennis-as-nginx-a\nservicesIpv4Cidr: 10.107.240.0/20\nstatus: RUNNING\nzone: asia-east1-b\n\n\u4e0a\u8a18\u304b\u3089 endpoint \u306f xxx.xxx.xxx.xxx \u3067 Basic \u8a8d\u8a3c\u306f admin/boh7eeTh2eeM8phe \u3068\u308f\u304b\u308a\u307e\u3059\u3002Kubernetes Dashboard (kube-ui) \u306f https://admin:boh7eeTh2eeM8phe@xxx.xxx.xxx.xxx/api/v1/proxy/namespaces/kube-system/services/kube-ui/ \u3067\u63a5\u7d9a\u3067\u304d\u307e\u3059\u3002\u540c\u3058\u3088\u3046\u306b kubedash \u306f https://admin:boh7eeTh2eeM8phe@xxx.xxx.xxx.xxx/api/v1/proxy/namespaces/kube-system/services/kubedash/ \u3067\u63a5\u7d9a\u3067\u304d\u307e\u3059\u3002\n\nFeatures\nKubernetes Dashboard (kube-ui) \u306f GKE Cluster \u3092\u69cb\u6210\u3059\u308b\u5404 Node \u306e CPU, Memory, Filesystem \u30ea\u30bd\u30fc\u30b9\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001Cluster \u4e0a\u3067\u3001\u3069\u306e\u3088\u3046\u306a Pod, RC, Service \u304c \u7a3c\u50cd\u3057\u3066\u3044\u308b\u304b\u3092\u95b2\u89a7\u3067\u304d\u307e\u3059\u3002kubedash \u306f Cluster \u5168\u4f53\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3084\u3001\u7d30\u304b\u3044\u5358\u4f4d\u3067\u306e\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\nCluster\nCluster \u30bf\u30d6\u3067\u306f Cluster \u5168\u4f53\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u76f4\u8fd1 1 \u65e5\u307e\u3067\u306e CPU \u304a\u3088\u3073 Memory \u306e\u5229\u7528\u7387\u30b5\u30de\u30ea\u30fc\u3068\u3001\u76f4\u8fd1 1 \u6642\u9593\u307e\u3067\u306e\u5229\u7528\u7387\u30b0\u30e9\u30d5\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\nNodes\nNodes \u30bf\u30d6\u3067\u306f Cluster \u3092\u69cb\u6210\u3059\u308b Node \u6bce\u306e\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\nNode \u3092\u9078\u629e\u3059\u308b\u3068\u3001\u76f4\u8fd1 1 \u65e5\u307e\u3067\u306e CPU \u304a\u3088\u3073 Memory \u306e\u5229\u7528\u7387\u30b5\u30de\u30ea\u30fc\u3068\u3001\u76f4\u8fd1 1 \u6642\u9593\u307e\u3067\u306e\u5229\u7528\u7387\u30b0\u30e9\u30d5\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u307e\u305f\u3001\u9078\u629e\u3057\u305f Node \u4e0a\u3067\u300c\u3069\u306e Pod \u304c\u52d5\u4f5c\u3057\u3066\u3044\u308b\u304b\u300d\u3084\u300c\u9078\u629e\u3057\u305f Pod \u306e\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u300d\u3092\u8ffd\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\nNamespaces\nNamespaces \u30bf\u30d6\u3067\u306f Cluster \u306b\u5b58\u5728\u3059\u308b Namespace \u6bce\u306e\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\nNamespace \u3092\u9078\u629e\u3059\u308b\u3068\u3001\u76f4\u8fd1 1 \u65e5\u307e\u3067\u306e CPU \u304a\u3088\u3073 Memory \u306e\u5229\u7528\u7387\u30b5\u30de\u30ea\u30fc\u3068\u3001\u76f4\u8fd1 1 \u6642\u9593\u307e\u3067\u306e\u5229\u7528\u7387\u30b0\u30e9\u30d5\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u307e\u305f\u3001\u9078\u629e\u3057\u305f Namespace \u4e0a\u3067\u300c\u3069\u306e Pod \u304c\u52d5\u4f5c\u3057\u3066\u3044\u308b\u304b\u300d\u3084\u300c\u9078\u629e\u3057\u305f Pod \u306e\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u300d\u3092\u8ffd\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\nSecurity\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f Spec \u30d5\u30a1\u30a4\u30eb\u306e Service \u5b9a\u7fa9\u3092\u898b\u308b\u3068 type: \"LoadBalancer\" \u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3064\u307e\u308a GKE \u4e0a\u3067\u3053\u306e Service \u3092\u4f5c\u6210\u3059\u308b\u3068\u3001\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b Firewall \u304c\u4f5c\u6210\u3055\u308c External IP (Global IP) \u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u307e\u3059\u3002\u307e\u305f External IP \u7d4c\u7531\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306f\u8a8d\u8a3c\u306a\u3057\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n\u624b\u9806\u901a\u308a\u306b\u9032\u3081\u3066\u3044\u308b\u5834\u5408\u306f kubedash Service \u306e External IP \u3092\u78ba\u8a8d\u3057\u3066 http://yyy.yyy.yyy.yyy:80/ \u3067\u958b\u3051\u308b\u72b6\u6cc1\u306b\u306a\u3063\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u7121\u7dda\u30ab\u30e1\u30e9\u3092 admin/admin \u3067\u516c\u958b\u3057\u3066\u3044\u308b\u72b6\u6cc1\u3068\u540c\u3058\u3067\u3059\u306d\u3002 ... \u3055\u3059\u304c\u306b\u5185\u90e8\u60c5\u5831\u5168\u516c\u958b\u306f\u826f\u304f\u306a\u3044\u305f\u3081\u5bfe\u7b56\u3057\u307e\u3057\u3087\u3046\u3002\u307e\u305a\u306f\u4ee5\u524d\u4f5c\u6210\u3057\u305f kubedash \u306e RC \u3068 Service \u3092\u524a\u9664\u3057\u307e\u3059\u3002\n$ kubectl --namespace=kube-system delete rc kubedash\nreplicationcontroller \"kubedash\" deleted\n\n$ kubectl --namespace=kube-system delete service kubedash\nservice \"kubedash\" deleted\n\n\u6b21\u306b kubedash \u306e Spec \u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\u5177\u4f53\u7684\u306b\u306f Service \u306e type \u3092 ClusterIP \u306b\u5909\u66f4\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u3063\u3066\u3001kubedash \u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092 Kubernetes API \u7d4c\u7531\u306b\u9650\u5b9a\u3067\u304d\u308b\u305f\u3081 Kubernetes Dashboard (kube-ui) \u3068\u540c\u7b49\u306b Basic \u8a8d\u8a3c\u3092\u304b\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n$ cp ./kube-config.yaml ./kube-config-fixed.yaml\n$ gsed -i 's/LoadBalancer/ClusterIP/g' ./kube-config-fixed.yaml\n$ diff ./kube-config.yaml ./kube-config-fixed.yaml\n48c48\n<     type: \"LoadBalancer\"\n---\n>     type: \"ClusterIP\"\n\n$ kubectl create -f ./kube-config-fixed.yaml\nreplicationcontroller \"kubedash\" created\nservice \"kubedash\" created\n\n\u4f5c\u6210\u3055\u308c\u305f RC \u3068 Service \u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002kubedash Service \u306e External IP \u304c <none> \u3068\u306a\u3063\u3066\u3044\u308c\u3070 OK \u3067\u3059\u3002\n$ kubectl --namespace=kube-system get rc\nCONTROLLER         CONTAINER(S)           IMAGE(S)                                             SELECTOR                       REPLICAS   AGE\nheapster-v10       heapster               gcr.io/google_containers/heapster:v0.18.2            k8s-app=heapster,version=v10   1          4d\nkube-dns-v9        etcd                   gcr.io/google_containers/etcd:2.0.9                  k8s-app=kube-dns,version=v9    1          4d\n                   kube2sky               gcr.io/google_containers/kube2sky:1.11\n                   skydns                 gcr.io/google_containers/skydns:2015-10-13-8c72f8c\n                   healthz                gcr.io/google_containers/exechealthz:1.0\nkube-ui-v4         kube-ui                gcr.io/google_containers/kube-ui:v4                  k8s-app=kube-ui,version=v4     1         4d\nkubedash           kubedash               gcr.io/google_containers/kubedash:v0.2.1             name=kubedash                  1         3m\nl7-lb-controller   default-http-backend   gcr.io/google_containers/defaultbackend:1.0          k8s-app=glbc,version=v0.5.1    1         4d\n                   l7-lb-controller       gcr.io/google_containers/glbc:0.5.1\n\n$ kubectl --namespace=kube-system get service\nNAME                   CLUSTER_IP       EXTERNAL_IP   PORT(S)         SELECTOR           AGE\ndefault-http-backend   10.107.241.11    nodes         80/TCP          k8s-app=glbc       4d\nheapster               10.107.245.65    <none>        80/TCP          k8s-app=heapster   4d\nkube-dns               10.107.240.10    <none>        53/UDP,53/TCP   k8s-app=kube-dns   4d\nkube-ui                10.107.249.194   <none>        80/TCP          k8s-app=kube-ui    4d\nkubedash               10.107.249.68    <none>        80/TCP          name=kubedash      3m\n\n\n\u307e\u3068\u3081\n\u4eca\u56de\u306f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u89e3\u6790 UI \u306e kubedash \u3092 GKE \u4e0a\u3067\u4f7f\u7528\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\nGKE \u306e\u30ea\u30bd\u30fc\u30b9\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u30c4\u30fc\u30eb\u3068\u3057\u3066\u306f Kubernetes Dashboard \u3042\u308b\u3044\u306f Google Cloud Monitoring (StackDriver) \u3092\u4f7f\u3046\u3053\u3068\u304c\u591a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u3057\u304b\u3057\u306a\u304c\u3089 Kubernetes Dashboard \u306f\u6a5f\u80fd\u7684\u306b\u4e0d\u8db3\u3057\u3066\u3044\u3066\u3001Cloud Monitoring \u306f\u9ad8\u6a5f\u80fd\u3067\u3059\u304c\u52d5\u4f5c\u304c\u91cd\u305f\u3044\u3068\u611f\u3058\u3066\u3044\u307e\u3059\u3002\nkubedash \u306f\u305d\u306e\u4e2d\u9593\u306b\u5f53\u305f\u308b\u3088\u3046\u306a\u30c4\u30fc\u30eb\u3068\u3057\u3066\u6d3b\u7528\u3057\u3066\u304a\u308a\u3001\u76f4\u8fd1 1 \u6642\u9593\u306b\u9650\u3089\u308c\u307e\u3059\u304c\u3001\u5404 Pod \u306e\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u3082\u8ffd\u3046\u3053\u3068\u304c\u3067\u304d\u3066\u3001\u3068\u3066\u3082\u8efd\u3044\u306e\u3067\u624b\u653e\u305b\u306a\u3044\u30c4\u30fc\u30eb\u306b\u306a\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n\n\u304a\u308f\u308a\u306b\n\u3053\u306e\u5185\u5bb9\u3092 gcp ja night #31 \u3067\u8efd\u304f\u89e6\u308c\u307e\u3057\u305f\u304c\u3001\u88dc\u8db3\u7248\u3068\u3057\u3066 GKE \u4e0a\u3067\u4f7f\u7528\u3059\u308b\u65b9\u6cd5\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\u767a\u8868\u8cc7\u6599\u3082\u4f75\u305b\u3066\u3054\u89a7\u304f\u3060\u3055\u3044\uff01\nhttp://gcpja.connpass.com/event/23874/\nhttp://www.slideshare.net/katsutoshinagaoka/gke-57322091\n# \u306f\u3058\u3081\u306b\n\nKubernetes \u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u89e3\u6790 UI \u3068\u3057\u3066 kubedash \u304c\u3042\u308a\u307e\u3059\u3002kubedash \u306f\u3001\u76f4\u8fd1 1 \u6642\u9593\u306e\u30ea\u30bd\u30fc\u30b9\u5229\u7528\u7387\u306a\u3069\u3092\u95b2\u89a7\u3067\u304d\u307e\u3059\u3002\u4eca\u56de\u306f kubedash \u3092 GKE \u4e0a\u3067\u4f7f\u7528\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n![cluster](https://qiita-image-store.s3.amazonaws.com/0/19335/72b2c5da-a8ce-f2b0-2cc7-6b9c8721286b.png)\n\n# \u74b0\u5883\n\n\u73fe\u6642\u70b9\u3067\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f GKE (Kubernetes) v1.1 \u304a\u3088\u3073 kubedash 0.2.1 \u3067\u3059\u3002\n\n# kubedash\n\nkubedash \u306f Kubernetes Organization \u3067\u958b\u767a\u3055\u308c\u3066\u3044\u307e\u3059\u3002https://github.com/kubernetes/kubedash\n\n## How to install\n\nkubedash \u306e Docker Image \u306f GCR \u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u307e\u305f RC \u3068 Service \u306e Spec \u30d5\u30a1\u30a4\u30eb\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u307e\u305a\u306f Spec \u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002https://github.com/kubernetes/kubedash/blob/master/deploy/kube-config.yaml \n\n```shell-session\n$ curl -O https://raw.githubusercontent.com/kubernetes/kubedash/master/deploy/kube-config.yaml\n$ cat ./kube-config.yaml\n---\n  apiVersion: \"v1\"\n  kind: \"ReplicationController\"\n  metadata:\n    labels:\n      name: \"kubedash\"\n    name: \"kubedash\"\n    namespace: \"kube-system\"\n  spec:\n    replicas: 1\n    selector:\n      name: \"kubedash\"\n    template:\n      metadata:\n        labels:\n          name: \"kubedash\"\n      spec:\n        containers:\n          -\n            image: \"gcr.io/google_containers/kubedash:v0.2.1\"\n            name: \"kubedash\"\n            command:\n              - \"/kubedash\"\n            resources:\n              limits:\n                cpu: 50m\n                memory: 100Mi\n            volumeMounts:\n              -\n                name: \"ssl-certs\"\n                mountPath: \"/etc/ssl/certs\"\n                readOnly: true\n        volumes:\n          -\n            name: \"ssl-certs\"\n            hostPath:\n              path: \"/etc/ssl/certs\"\n\n---\n  apiVersion: \"v1\"\n  kind: \"Service\"\n  metadata:\n    labels:\n      name: \"kubedash\"\n    name: \"kubedash\"\n    namespace: \"kube-system\"\n  spec:\n    type: \"LoadBalancer\"\n    ports:\n      -\n        port: 80\n        targetPort: 8289\n    selector:\n      name: \"kubedash\"\n```\n\n\u5b9f\u969b\u306b `kubectl` \u3067 Spec \u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u3066 RC \u3068 Service \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```shell-session\n$ kubectl create -f ./kube-config.yaml\nreplicationcontroller \"kubedash\" created\nservice \"kubedash\" created\n```\n\n\u4f5c\u6210\u3055\u308c\u305f RC \u3068 Service \u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002kubedash \u306f `kube-system` \u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u4f5c\u6210\u3055\u308c\u308b\u305f\u3081 `--namespace=kube-system` \u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\n\n```shell-session\n$ kubectl --namespace=kube-system get rc\nCONTROLLER         CONTAINER(S)           IMAGE(S)                                             SELECTOR                       REPLICAS   AGE\nheapster-v10       heapster               gcr.io/google_containers/heapster:v0.18.2            k8s-app=heapster,version=v10   1          4d\nkube-dns-v9        etcd                   gcr.io/google_containers/etcd:2.0.9                  k8s-app=kube-dns,version=v9    1          4d\n                   kube2sky               gcr.io/google_containers/kube2sky:1.11\n                   skydns                 gcr.io/google_containers/skydns:2015-10-13-8c72f8c\n                   healthz                gcr.io/google_containers/exechealthz:1.0\nkube-ui-v4         kube-ui                gcr.io/google_containers/kube-ui:v4                  k8s-app=kube-ui,version=v4     1         4d\nkubedash           kubedash               gcr.io/google_containers/kubedash:v0.2.1             name=kubedash                  1         28s\nl7-lb-controller   default-http-backend   gcr.io/google_containers/defaultbackend:1.0          k8s-app=glbc,version=v0.5.1    1         4d\n                   l7-lb-controller       gcr.io/google_containers/glbc:0.5.1\n\n$ kubectl --namespace=kube-system get service\nNAME                   CLUSTER_IP       EXTERNAL_IP       PORT(S)         SELECTOR           AGE\ndefault-http-backend   10.107.241.11    nodes             80/TCP          k8s-app=glbc       4d\nheapster               10.107.245.65    <none>            80/TCP          k8s-app=heapster   4d\nkube-dns               10.107.240.10    <none>            53/UDP,53/TCP   k8s-app=kube-dns   4d\nkube-ui                10.107.249.194   <none>            80/TCP          k8s-app=kube-ui    4d\nkubedash               10.107.254.5     yyy.yyy.yyy.yyy   80/TCP          name=kubedash      4m\n```\n\n## How to use\n\nkubedash \u306f Kubernetes Dashboard (kube-ui) \u3068\u540c\u7b49\u306b Basic \u8a8d\u8a3c\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\u307e\u305a\u306f GKE Cluster \u306e\u60c5\u5831 (\u4e0b\u8a18\u306f\u4e00\u90e8\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u60c5\u5831\u3092\u4f0f\u5b57\u306b\u3057\u3066\u3044\u307e\u3059) \u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```shell-session\n$ gcloud container clusters describe ennis-as-nginx-a\nclusterIpv4Cidr: 10.104.0.0/14\ncreateTime: '2016-01-20T16:20:56+00:00'\ncurrentMasterVersion: 1.1.4\ncurrentNodeCount: 3\ncurrentNodeVersion: 1.1.4\nendpoint: xxx.xxx.xxx.xxx\ninitialClusterVersion: 1.1.4\ninitialNodeCount: 3\ninstanceGroupUrls:\n- https://www.googleapis.com/replicapool/v1beta2/projects/xxxxx/zones/asia-east1-b/instanceGroupManagers/gke-ennis-as-nginx-a-f7387859-group\nloggingService: logging.googleapis.com\nmasterAuth:\n  clientCertificate: xxxxx\n  clientKey: xxxxx\n  clusterCaCertificate: xxxxx\n  password: boh7eeTh2eeM8phe\n  username: admin\nmonitoringService: monitoring.googleapis.com\nname: ennis-as-nginx-a\nnetwork: default\nnodeConfig:\n  diskSizeGb: 100\n  machineType: n1-highcpu-2\n  oauthScopes:\n  - https://www.googleapis.com/auth/bigquery\n  - https://www.googleapis.com/auth/compute\n  - https://www.googleapis.com/auth/devstorage.read_only\n  - https://www.googleapis.com/auth/logging.write\n  - https://www.googleapis.com/auth/monitoring\nnodeIpv4CidrSize: 24\nselfLink: https://container.googleapis.com/v1/projects/xxxxx/zones/asia-east1-b/clusters/ennis-as-nginx-a\nservicesIpv4Cidr: 10.107.240.0/20\nstatus: RUNNING\nzone: asia-east1-b\n```\n\n\u4e0a\u8a18\u304b\u3089 endpoint \u306f `xxx.xxx.xxx.xxx` \u3067 Basic \u8a8d\u8a3c\u306f `admin/boh7eeTh2eeM8phe` \u3068\u308f\u304b\u308a\u307e\u3059\u3002Kubernetes Dashboard (kube-ui) \u306f https://admin:boh7eeTh2eeM8phe@xxx.xxx.xxx.xxx/api/v1/proxy/namespaces/kube-system/services/kube-ui/ \u3067\u63a5\u7d9a\u3067\u304d\u307e\u3059\u3002\u540c\u3058\u3088\u3046\u306b kubedash \u306f https://admin:boh7eeTh2eeM8phe@xxx.xxx.xxx.xxx/api/v1/proxy/namespaces/kube-system/services/kubedash/ \u3067\u63a5\u7d9a\u3067\u304d\u307e\u3059\u3002\n\n## Features\n\nKubernetes Dashboard (kube-ui) \u306f GKE Cluster \u3092\u69cb\u6210\u3059\u308b\u5404 Node \u306e CPU, Memory, Filesystem \u30ea\u30bd\u30fc\u30b9\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001Cluster \u4e0a\u3067\u3001\u3069\u306e\u3088\u3046\u306a Pod, RC, Service \u304c \u7a3c\u50cd\u3057\u3066\u3044\u308b\u304b\u3092\u95b2\u89a7\u3067\u304d\u307e\u3059\u3002kubedash \u306f Cluster \u5168\u4f53\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3084\u3001\u7d30\u304b\u3044\u5358\u4f4d\u3067\u306e\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n### Cluster \n\nCluster \u30bf\u30d6\u3067\u306f Cluster \u5168\u4f53\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u76f4\u8fd1 1 \u65e5\u307e\u3067\u306e CPU \u304a\u3088\u3073 Memory \u306e\u5229\u7528\u7387\u30b5\u30de\u30ea\u30fc\u3068\u3001\u76f4\u8fd1 1 \u6642\u9593\u307e\u3067\u306e\u5229\u7528\u7387\u30b0\u30e9\u30d5\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n![cluster](https://qiita-image-store.s3.amazonaws.com/0/19335/72b2c5da-a8ce-f2b0-2cc7-6b9c8721286b.png)\n\n### Nodes\n\nNodes \u30bf\u30d6\u3067\u306f Cluster \u3092\u69cb\u6210\u3059\u308b Node \u6bce\u306e\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n![node list](https://qiita-image-store.s3.amazonaws.com/0/19335/c4dd1615-c757-31a8-83fe-a7610d4a789e.png)\n\nNode \u3092\u9078\u629e\u3059\u308b\u3068\u3001\u76f4\u8fd1 1 \u65e5\u307e\u3067\u306e CPU \u304a\u3088\u3073 Memory \u306e\u5229\u7528\u7387\u30b5\u30de\u30ea\u30fc\u3068\u3001\u76f4\u8fd1 1 \u6642\u9593\u307e\u3067\u306e\u5229\u7528\u7387\u30b0\u30e9\u30d5\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u307e\u305f\u3001\u9078\u629e\u3057\u305f Node \u4e0a\u3067\u300c\u3069\u306e Pod \u304c\u52d5\u4f5c\u3057\u3066\u3044\u308b\u304b\u300d\u3084\u300c\u9078\u629e\u3057\u305f Pod \u306e\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u300d\u3092\u8ffd\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n![node detail](https://qiita-image-store.s3.amazonaws.com/0/19335/49fc75c3-045f-b62e-eac6-70590df1ad1b.png)\n\n### Namespaces\n\nNamespaces \u30bf\u30d6\u3067\u306f Cluster \u306b\u5b58\u5728\u3059\u308b Namespace \u6bce\u306e\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n![namespace list](https://qiita-image-store.s3.amazonaws.com/0/19335/cea760cb-c597-1c6b-3f2f-382498a1a134.png)\n\nNamespace \u3092\u9078\u629e\u3059\u308b\u3068\u3001\u76f4\u8fd1 1 \u65e5\u307e\u3067\u306e CPU \u304a\u3088\u3073 Memory \u306e\u5229\u7528\u7387\u30b5\u30de\u30ea\u30fc\u3068\u3001\u76f4\u8fd1 1 \u6642\u9593\u307e\u3067\u306e\u5229\u7528\u7387\u30b0\u30e9\u30d5\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u307e\u305f\u3001\u9078\u629e\u3057\u305f Namespace \u4e0a\u3067\u300c\u3069\u306e Pod \u304c\u52d5\u4f5c\u3057\u3066\u3044\u308b\u304b\u300d\u3084\u300c\u9078\u629e\u3057\u305f Pod \u306e\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u300d\u3092\u8ffd\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n![namespace detail](https://qiita-image-store.s3.amazonaws.com/0/19335/189a468d-68b6-ccc2-4267-40227b82f474.png)\n\n## Security\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f Spec \u30d5\u30a1\u30a4\u30eb\u306e Service \u5b9a\u7fa9\u3092\u898b\u308b\u3068 `type: \"LoadBalancer\"` \u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3064\u307e\u308a GKE \u4e0a\u3067\u3053\u306e Service \u3092\u4f5c\u6210\u3059\u308b\u3068\u3001\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b Firewall \u304c\u4f5c\u6210\u3055\u308c External IP (Global IP) \u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u307e\u3059\u3002\u307e\u305f External IP \u7d4c\u7531\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306f\u8a8d\u8a3c\u306a\u3057\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n\n\u624b\u9806\u901a\u308a\u306b\u9032\u3081\u3066\u3044\u308b\u5834\u5408\u306f kubedash Service \u306e External IP \u3092\u78ba\u8a8d\u3057\u3066 http://yyy.yyy.yyy.yyy:80/ \u3067\u958b\u3051\u308b\u72b6\u6cc1\u306b\u306a\u3063\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u3002~~\u7121\u7dda\u30ab\u30e1\u30e9\u3092 `admin/admin` \u3067\u516c\u958b\u3057\u3066\u3044\u308b\u72b6\u6cc1\u3068\u540c\u3058\u3067\u3059\u306d\u3002~~ ... \u3055\u3059\u304c\u306b\u5185\u90e8\u60c5\u5831\u5168\u516c\u958b\u306f\u826f\u304f\u306a\u3044\u305f\u3081\u5bfe\u7b56\u3057\u307e\u3057\u3087\u3046\u3002\u307e\u305a\u306f\u4ee5\u524d\u4f5c\u6210\u3057\u305f kubedash \u306e RC \u3068 Service \u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\n```\n$ kubectl --namespace=kube-system delete rc kubedash\nreplicationcontroller \"kubedash\" deleted\n\n$ kubectl --namespace=kube-system delete service kubedash\nservice \"kubedash\" deleted\n```\n\n\u6b21\u306b kubedash \u306e Spec \u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\u5177\u4f53\u7684\u306b\u306f Service \u306e type \u3092 `ClusterIP` \u306b\u5909\u66f4\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u3063\u3066\u3001kubedash \u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092 Kubernetes API \u7d4c\u7531\u306b\u9650\u5b9a\u3067\u304d\u308b\u305f\u3081 Kubernetes Dashboard (kube-ui) \u3068\u540c\u7b49\u306b Basic \u8a8d\u8a3c\u3092\u304b\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```\n$ cp ./kube-config.yaml ./kube-config-fixed.yaml\n$ gsed -i 's/LoadBalancer/ClusterIP/g' ./kube-config-fixed.yaml\n$ diff ./kube-config.yaml ./kube-config-fixed.yaml\n48c48\n<     type: \"LoadBalancer\"\n---\n>     type: \"ClusterIP\"\n\n$ kubectl create -f ./kube-config-fixed.yaml\nreplicationcontroller \"kubedash\" created\nservice \"kubedash\" created\n```\n\n\u4f5c\u6210\u3055\u308c\u305f RC \u3068 Service \u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002kubedash Service \u306e External IP \u304c `<none>` \u3068\u306a\u3063\u3066\u3044\u308c\u3070 OK \u3067\u3059\u3002\n\n```\n$ kubectl --namespace=kube-system get rc\nCONTROLLER         CONTAINER(S)           IMAGE(S)                                             SELECTOR                       REPLICAS   AGE\nheapster-v10       heapster               gcr.io/google_containers/heapster:v0.18.2            k8s-app=heapster,version=v10   1          4d\nkube-dns-v9        etcd                   gcr.io/google_containers/etcd:2.0.9                  k8s-app=kube-dns,version=v9    1          4d\n                   kube2sky               gcr.io/google_containers/kube2sky:1.11\n                   skydns                 gcr.io/google_containers/skydns:2015-10-13-8c72f8c\n                   healthz                gcr.io/google_containers/exechealthz:1.0\nkube-ui-v4         kube-ui                gcr.io/google_containers/kube-ui:v4                  k8s-app=kube-ui,version=v4     1         4d\nkubedash           kubedash               gcr.io/google_containers/kubedash:v0.2.1             name=kubedash                  1         3m\nl7-lb-controller   default-http-backend   gcr.io/google_containers/defaultbackend:1.0          k8s-app=glbc,version=v0.5.1    1         4d\n                   l7-lb-controller       gcr.io/google_containers/glbc:0.5.1\n\n$ kubectl --namespace=kube-system get service\nNAME                   CLUSTER_IP       EXTERNAL_IP   PORT(S)         SELECTOR           AGE\ndefault-http-backend   10.107.241.11    nodes         80/TCP          k8s-app=glbc       4d\nheapster               10.107.245.65    <none>        80/TCP          k8s-app=heapster   4d\nkube-dns               10.107.240.10    <none>        53/UDP,53/TCP   k8s-app=kube-dns   4d\nkube-ui                10.107.249.194   <none>        80/TCP          k8s-app=kube-ui    4d\nkubedash               10.107.249.68    <none>        80/TCP          name=kubedash      3m\n```\n\n# \u307e\u3068\u3081\n\n\u4eca\u56de\u306f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u89e3\u6790 UI \u306e kubedash \u3092 GKE \u4e0a\u3067\u4f7f\u7528\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\n\nGKE \u306e\u30ea\u30bd\u30fc\u30b9\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u30c4\u30fc\u30eb\u3068\u3057\u3066\u306f Kubernetes Dashboard \u3042\u308b\u3044\u306f Google Cloud Monitoring (StackDriver) \u3092\u4f7f\u3046\u3053\u3068\u304c\u591a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u3057\u304b\u3057\u306a\u304c\u3089 Kubernetes Dashboard \u306f\u6a5f\u80fd\u7684\u306b\u4e0d\u8db3\u3057\u3066\u3044\u3066\u3001Cloud Monitoring \u306f\u9ad8\u6a5f\u80fd\u3067\u3059\u304c\u52d5\u4f5c\u304c\u91cd\u305f\u3044\u3068\u611f\u3058\u3066\u3044\u307e\u3059\u3002\n\nkubedash \u306f\u305d\u306e\u4e2d\u9593\u306b\u5f53\u305f\u308b\u3088\u3046\u306a\u30c4\u30fc\u30eb\u3068\u3057\u3066\u6d3b\u7528\u3057\u3066\u304a\u308a\u3001\u76f4\u8fd1 1 \u6642\u9593\u306b\u9650\u3089\u308c\u307e\u3059\u304c\u3001\u5404 Pod \u306e\u30ea\u30bd\u30fc\u30b9\u4f7f\u7528\u7387\u3082\u8ffd\u3046\u3053\u3068\u304c\u3067\u304d\u3066\u3001\u3068\u3066\u3082\u8efd\u3044\u306e\u3067\u624b\u653e\u305b\u306a\u3044\u30c4\u30fc\u30eb\u306b\u306a\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n\n# \u304a\u308f\u308a\u306b\n\n\n\u3053\u306e\u5185\u5bb9\u3092 gcp ja night #31 \u3067\u8efd\u304f\u89e6\u308c\u307e\u3057\u305f\u304c\u3001\u88dc\u8db3\u7248\u3068\u3057\u3066 GKE \u4e0a\u3067\u4f7f\u7528\u3059\u308b\u65b9\u6cd5\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\u767a\u8868\u8cc7\u6599\u3082\u4f75\u305b\u3066\u3054\u89a7\u304f\u3060\u3055\u3044\uff01\n\nhttp://gcpja.connpass.com/event/23874/\nhttp://www.slideshare.net/katsutoshinagaoka/gke-57322091\n", "tags": ["kubernetes", "GoogleContainerEngine", "GoogleCloudPlatform", "gcpja", "kubedash"]}