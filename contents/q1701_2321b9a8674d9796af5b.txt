{"context": " More than 1 year has passed since last update.\n\n\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\nSELECT *\nFROM sample_data\nORDER BY key1, key2, key3, key4\n\n\n\n\nKEY1\nKEY2\nKEY3\nKEY4\nVAL\n\n\n\n\nAAAA\nAAA\nAA\nA\n100\n\n\nAAAA\nAAA\nAA\nB\n110\n\n\nAAAA\nAAA\nBB\nA\n120\n\n\nAAAA\nAAA\nBB\nB\n130\n\n\nAAAA\nBBB\nAA\nA\n140\n\n\nAAAA\nBBB\nAA\nB\n150\n\n\nAAAA\nBBB\nBB\nA\n160\n\n\nAAAA\nBBB\nBB\nB\n170\n\n\nBBBB\nAAA\nAA\nA\n180\n\n\nBBBB\nAAA\nAA\nB\n190\n\n\nBBBB\nAAA\nBB\nA\n200\n\n\nBBBB\nAAA\nBB\nB\n210\n\n\nBBBB\nBBB\nAA\nA\n220\n\n\nBBBB\nBBB\nAA\nB\n230\n\n\nBBBB\nBBB\nBB\nA\n240\n\n\nBBBB\nBBB\nBB\nB\n250\n\n\n\n/* \u30c7\u30fc\u30bf\u578b\u306b\u7279\u306b\u610f\u5473\u306f\u306a\u3044 */\nCREATE TABLE sample_data\n(\n  key1 CHAR(4),\n  key2 CHAR(3),\n  key3 CHAR(2),\n  key4 CHAR(1),\n  val INTEGER\n);\n\nINSERT INTO sample_data VALUES('AAAA','AAA','AA','A',100);\nINSERT INTO sample_data VALUES('AAAA','AAA','AA','B',110);\nINSERT INTO sample_data VALUES('AAAA','AAA','BB','A',120);\nINSERT INTO sample_data VALUES('AAAA','AAA','BB','B',130);\nINSERT INTO sample_data VALUES('AAAA','BBB','AA','A',140);\nINSERT INTO sample_data VALUES('AAAA','BBB','AA','B',150);\nINSERT INTO sample_data VALUES('AAAA','BBB','BB','A',160);\nINSERT INTO sample_data VALUES('AAAA','BBB','BB','B',170);\nINSERT INTO sample_data VALUES('BBBB','AAA','AA','A',180);\nINSERT INTO sample_data VALUES('BBBB','AAA','AA','B',190);\nINSERT INTO sample_data VALUES('BBBB','AAA','BB','A',200);\nINSERT INTO sample_data VALUES('BBBB','AAA','BB','B',210);\nINSERT INTO sample_data VALUES('BBBB','BBB','AA','A',220);\nINSERT INTO sample_data VALUES('BBBB','BBB','AA','B',230);\nINSERT INTO sample_data VALUES('BBBB','BBB','BB','A',240);\nINSERT INTO sample_data VALUES('BBBB','BBB','BB','B',250);\n\n\n\nKEY1, KEY2 \u3067\u96c6\u8a08\u3059\u308b\nSELECT key1, key2, COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY key1, key2\nORDER BY key1, key2\n\n\n\n\nKEY1\nKEY2\nCOUNT(*)\nSUM(VAL)\n\n\n\n\nAAAA\nAAA\n4\n460\n\n\nAAAA\nBBB\n4\n620\n\n\nBBBB\nAAA\n4\n780\n\n\nBBBB\nBBB\n4\n940\n\n\n\n\n\nKEY1, KEY2 \u3067\u96c6\u8a08\u3057\u3064\u3064 KEY2 \u306e\u5c0f\u8a08\u3092\u3068\u308b\n\u5c0f\u8a08\u3092\u53d6\u308a\u305f\u3044\u5217\u3092 ROLLUP() \u6f14\u7b97\u5b50\u306b\u6307\u5b9a\u3059\u308b\u3002\nSELECT key1, key2, COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY key1, ROLLUP(key2)\nORDER BY key1, key2\n\nKEY2\u304cNULL\u306e\u884c\u304c\u3001KEY2\u306e\u5c0f\u8a08\u884c\u3067\u3042\u308b\u3002\n\n\n\nKEY1\nKEY2\nCOUNT(*)\nSUM(VAL)\n\n\n\n\nAAAA\nAAA\n4\n460\n\n\nAAAA\nBBB\n4\n620\n\n\nAAAA\n\n8\n1080\n\n\nBBBB\nAAA\n4\n780\n\n\nBBBB\nBBB\n4\n940\n\n\nBBBB\n\n8\n1720\n\n\n\n\n\n\u8907\u6570\u5217\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u5c0f\u8a08\uff08\uff11\uff09\nKEY1\u3054\u3068\u306eKEY2, KEY3\u306e\u5c0f\u8a08\u3092\u3068\u308b\u3002KEY2, KEY3\u306e\u5c0f\u8a08\u306b\u3064\u3044\u3066\u306f\u66f4\u306bKEY2\u3054\u3068\u306eKEY3\u306e\u5c0f\u8a08\u3092\u3068\u308b\u3002\nSELECT key1, key2, key3, COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY key1, ROLLUP(key2, key3)\nORDER BY key1, key2, key3\n\n\n\n\nKEY1\nKEY2\nKEY3\nCOUNT(*)\nSUM(VAL)\n\n\n\n\nAAAA\nAAA\nAA\n2\n210\n\n\nAAAA\nAAA\nBB\n2\n250\n\n\nAAAA\nAAA\n\n4\n460\n\n\nAAAA\nBBB\nAA\n2\n290\n\n\nAAAA\nBBB\nBB\n2\n330\n\n\nAAAA\nBBB\n\n4\n620\n\n\nAAAA\n\n\n8\n1080\n\n\nBBBB\nAAA\nAA\n2\n370\n\n\nBBBB\nAAA\nBB\n2\n410\n\n\nBBBB\nAAA\n\n4\n780\n\n\nBBBB\nBBB\nAA\n2\n450\n\n\nBBBB\nBBB\nBB\n2\n490\n\n\nBBBB\nBBB\n\n4\n940\n\n\nBBBB\n\n\n8\n1720\n\n\n\n\u3053\u3053\u3067 ROLLUP() \u306b\u6307\u5b9a\u3059\u308b\u9806\u5e8f\u306b\u306f\u610f\u5473\u304c\u3042\u308b\u3002\nKEY2\u3068KEY3\u3092\u5165\u308c\u66ff\u3048\u308b\u3068\u4ee5\u4e0b\u306e\u901a\u308a\u3002\nSELECT key1, key2, key3, COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY key1, ROLLUP(key3, key2)\nORDER BY key1, key3, key2\n\n\n\n\nKEY1\nKEY2\nKEY3\nCOUNT(*)\nSUM(VAL)\n\n\n\n\nAAAA\nAAA\nAA\n2\n210\n\n\nAAAA\nBBB\nAA\n2\n290\n\n\nAAAA\n\nAA\n4\n500\n\n\nAAAA\nAAA\nBB\n2\n250\n\n\nAAAA\nBBB\nBB\n2\n330\n\n\nAAAA\n\nBB\n4\n580\n\n\nAAAA\n\n\n8\n1080\n\n\nBBBB\nAAA\nAA\n2\n370\n\n\nBBBB\nBBB\nAA\n2\n450\n\n\nBBBB\n\nAA\n4\n820\n\n\nBBBB\nAAA\nBB\n2\n410\n\n\nBBBB\nBBB\nBB\n2\n490\n\n\nBBBB\n\nBB\n4\n900\n\n\nBBBB\n\n\n8\n1720\n\n\n\n\n\n\u8907\u6570\u5217\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u5c0f\u8a08\uff08\uff12\uff09\nKEY1, KEY2\u3054\u3068\u306b\u3001KEY3, KEY4\u306e\u5c0f\u8a08\u3092\u3068\u308b\u3002\nSELECT key1, key2, key3, key4,\n       COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY key1, key2, ROLLUP( (key3, key4) )\nORDER BY key1, key2, key3, key4\n\n\n\n\nKEY1\nKEY2\nKEY3\nKEY4\nCOUNT(*)\nSUM(VAL)\n\n\n\n\nAAAA\nAAA\nAA\nA\n1\n100\n\n\nAAAA\nAAA\nAA\nB\n1\n110\n\n\nAAAA\nAAA\nBB\nA\n1\n120\n\n\nAAAA\nAAA\nBB\nB\n1\n130\n\n\nAAAA\nAAA\n\n\n4\n460\n\n\nAAAA\nBBB\nAA\nA\n1\n140\n\n\nAAAA\nBBB\nAA\nB\n1\n150\n\n\nAAAA\nBBB\nBB\nA\n1\n160\n\n\nAAAA\nBBB\nBB\nB\n1\n170\n\n\nAAAA\nBBB\n\n\n4\n620\n\n\nBBBB\nAAA\nAA\nA\n1\n180\n\n\nBBBB\nAAA\nAA\nB\n1\n190\n\n\nBBBB\nAAA\nBB\nA\n1\n200\n\n\nBBBB\nAAA\nBB\nB\n1\n210\n\n\nBBBB\nAAA\n\n\n4\n780\n\n\nBBBB\nBBB\nAA\nA\n1\n220\n\n\nBBBB\nBBB\nAA\nB\n1\n230\n\n\nBBBB\nBBB\nBB\nA\n1\n240\n\n\nBBBB\nBBB\nBB\nB\n1\n250\n\n\nBBBB\nBBB\n\n\n4\n940\n\n\n\n\n\nGROUPING, GROUPING_ID\n\u30ab\u30e9\u30e0\u306bNULL\u304c\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001ROLLUP\u3055\u308c\u305f\u300c\u8d85\u96c6\u5408\u884c\u300d\u3092\u5224\u5225\u3059\u308b\u306b\u306f GROUPING \u307e\u305f\u306f GROUPING_ID \u95a2\u6570\u3092\u4f7f\u7528\u3059\u308b\u3002\n\n\n\n\u95a2\u6570\n\u4ed5\u69d8\n\n\n\n\nGROUPING(\u5217)\n1: \u6307\u5b9a\u3057\u305f\u5217\u306e\u8d85\u96c6\u5408\u884c / 0: \u305d\u308c\u4ee5\u5916\n\n\nGROUPING_ID(\u52171, \u52172, ...)\n\u4e0a\u8a18\u306e\u7d44\u307f\u5408\u308f\u305b(2\u9032\u6570\u306b\u898b\u7acb\u3066\u308b)\n\n\n\nSELECT GROUPING(key1)                AS grp_1,\n       GROUPING(key2)                AS grp_2,\n       GROUPING(key3)                AS grp_3,\n       GROUPING_ID(key1, key2, key3) AS grpid_1x2x3,\n       key1, key2, key3,\n       COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY key1, ROLLUP(key2, key3)\nORDER BY key1, key2, key3\n\n\uff08\u305f\u3060\u3057\u4eca\u56de\u306e\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u306b\u306fNULL\u304c\u542b\u307e\u308c\u306a\u3044\u3002\uff09\n\n\n\nGRP_1\nGRP_2\nGRP_3\nGRPID_1X2X3\nKEY1\nKEY2\nKEY3\nCOUNT(*)\nSUM(VAL)\n\n\n\n\n0\n0\n0\n0\nAAAA\nAAA\nAA\n2\n210\n\n\n0\n0\n0\n0\nAAAA\nAAA\nBB\n2\n250\n\n\n0\n0\n1\n1\nAAAA\nAAA\n\n4\n460\n\n\n0\n0\n0\n0\nAAAA\nBBB\nAA\n2\n290\n\n\n0\n0\n0\n0\nAAAA\nBBB\nBB\n2\n330\n\n\n0\n0\n1\n1\nAAAA\nBBB\n\n4\n620\n\n\n0\n1\n1\n3\nAAAA\n\n\n8\n1080\n\n\n0\n0\n0\n0\nBBBB\nAAA\nAA\n2\n370\n\n\n0\n0\n0\n0\nBBBB\nAAA\nBB\n2\n410\n\n\n0\n0\n1\n1\nBBBB\nAAA\n\n4\n780\n\n\n0\n0\n0\n0\nBBBB\nBBB\nAA\n2\n450\n\n\n0\n0\n0\n0\nBBBB\nBBB\nBB\n2\n490\n\n\n0\n0\n1\n1\nBBBB\nBBB\n\n4\n940\n\n\n0\n1\n1\n3\nBBBB\n\n\n8\n1720\n\n\n\n\n\n\u30af\u30ed\u30b9\u96c6\u8a08\nROLLUP\u3068\u7570\u306a\u308a\u3001\u5024\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u5c0f\u8a08\u304c\u8a08\u7b97\u3055\u308c\u308b\u3002\n\n(1) CUBE(KEY1, KEY2, KEY3)\n\u4ee5\u4e0b\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u3068\u308b\u3002\n(KEY1), (KEY2), (KEY3), (KEY1, KEY2), (KEY1, KEY3), (KEY2, KEY3), (KEY1, KEY2, KEY3)\nSELECT GROUPING(key1)                AS grp_1,\n       GROUPING(key2)                AS grp_2,\n       GROUPING(key3)                AS grp_3,\n       GROUPING_ID(key1, key2, key3) AS grpid_1x2x3,\n       key1, key2, key3,\n       COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY CUBE(key1, key2, key3)\nORDER BY key1, key2, key3\n\n\n\n\nGRP_1\nGRP_2\nGRP_3\nGRPID_1X2X3\nKEY1\nKEY2\nKEY3\nCOUNT(*)\nSUM(VAL)\n\n\n\n\n0\n0\n0\n0\nAAAA\nAAA\nAA\n2\n210\n\n\n0\n0\n0\n0\nAAAA\nAAA\nBB\n2\n250\n\n\n0\n0\n1\n1\nAAAA\nAAA\n\n4\n460\n\n\n0\n0\n0\n0\nAAAA\nBBB\nAA\n2\n290\n\n\n0\n0\n0\n0\nAAAA\nBBB\nBB\n2\n330\n\n\n0\n0\n1\n1\nAAAA\nBBB\n\n4\n620\n\n\n0\n1\n0\n2\nAAAA\n\nAA\n4\n500\n\n\n0\n1\n0\n2\nAAAA\n\nBB\n4\n580\n\n\n0\n1\n1\n3\nAAAA\n\n\n8\n1080\n\n\n0\n0\n0\n0\nBBBB\nAAA\nAA\n2\n370\n\n\n0\n0\n0\n0\nBBBB\nAAA\nBB\n2\n410\n\n\n0\n0\n1\n1\nBBBB\nAAA\n\n4\n780\n\n\n0\n0\n0\n0\nBBBB\nBBB\nAA\n2\n450\n\n\n0\n0\n0\n0\nBBBB\nBBB\nBB\n2\n490\n\n\n0\n0\n1\n1\nBBBB\nBBB\n\n4\n940\n\n\n0\n1\n0\n2\nBBBB\n\nAA\n4\n820\n\n\n0\n1\n0\n2\nBBBB\n\nBB\n4\n900\n\n\n0\n1\n1\n3\nBBBB\n\n\n8\n1720\n\n\n1\n0\n0\n4\n\nAAA\nAA\n4\n580\n\n\n1\n0\n0\n4\n\nAAA\nBB\n4\n660\n\n\n1\n0\n1\n5\n\nAAA\n\n8\n1240\n\n\n1\n0\n0\n4\n\nBBB\nAA\n4\n740\n\n\n1\n0\n0\n4\n\nBBB\nBB\n4\n820\n\n\n1\n0\n1\n5\n\nBBB\n\n8\n1560\n\n\n1\n1\n0\n6\n\n\nAA\n8\n1320\n\n\n1\n1\n0\n6\n\n\nBB\n8\n1480\n\n\n1\n1\n1\n7\n\n\n\n16\n2800\n\n\n\n\n\n(2) KEY1, CUBE(KEY2, KEY3)\nSELECT GROUPING(key1)                AS grp_1,\n       GROUPING(key2)                AS grp_2,\n       GROUPING(key3)                AS grp_3,\n       GROUPING_ID(key1, key2, key3) AS grpid_1x2x3,\n       key1, key2, key3,\n       COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY key1, CUBE(key2, key3)\nORDER BY key1, key2, key3\n\n\n\n\nGRP_1\nGRP_2\nGRP_3\nGRPID_1X2X3\nKEY1\nKEY2\nKEY3\nCOUNT(*)\nSUM(VAL)\n\n\n\n\n0\n0\n0\n0\nAAAA\nAAA\nAA\n2\n210\n\n\n0\n0\n0\n0\nAAAA\nAAA\nBB\n2\n250\n\n\n0\n0\n1\n1\nAAAA\nAAA\n\n4\n460\n\n\n0\n0\n0\n0\nAAAA\nBBB\nAA\n2\n290\n\n\n0\n0\n0\n0\nAAAA\nBBB\nBB\n2\n330\n\n\n0\n0\n1\n1\nAAAA\nBBB\n\n4\n620\n\n\n0\n1\n0\n2\nAAAA\n\nAA\n4\n500\n\n\n0\n1\n0\n2\nAAAA\n\nBB\n4\n580\n\n\n0\n1\n1\n3\nAAAA\n\n\n8\n1080\n\n\n0\n0\n0\n0\nBBBB\nAAA\nAA\n2\n370\n\n\n0\n0\n0\n0\nBBBB\nAAA\nBB\n2\n410\n\n\n0\n0\n1\n1\nBBBB\nAAA\n\n4\n780\n\n\n0\n0\n0\n0\nBBBB\nBBB\nAA\n2\n450\n\n\n0\n0\n0\n0\nBBBB\nBBB\nBB\n2\n490\n\n\n0\n0\n1\n1\nBBBB\nBBB\n\n4\n940\n\n\n0\n1\n0\n2\nBBBB\n\nAA\n4\n820\n\n\n0\n1\n0\n2\nBBBB\n\nBB\n4\n900\n\n\n0\n1\n1\n3\nBBBB\n\n\n8\n1720\n\n\n\n\n\n(3) KEY1, CUBE((KEY2, KEY3))\nSELECT GROUPING(key1)                AS grp_1,\n       GROUPING(key2)                AS grp_2,\n       GROUPING(key3)                AS grp_3,\n       GROUPING_ID(key1, key2, key3) AS grpid_1x2x3,\n       key1, key2, key3,\n       COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY CUBE(key1, (key2, key3))\nORDER BY key1, key2, key3\n\n\n\n\nGRP_1\nGRP_2\nGRP_3\nGRPID_1X2X3\nKEY1\nKEY2\nKEY3\nCOUNT(*)\nSUM(VAL)\n\n\n\n\n0\n0\n0\n0\nAAAA\nAAA\nAA\n2\n210\n\n\n0\n0\n0\n0\nAAAA\nAAA\nBB\n2\n250\n\n\n0\n0\n0\n0\nAAAA\nBBB\nAA\n2\n290\n\n\n0\n0\n0\n0\nAAAA\nBBB\nBB\n2\n330\n\n\n0\n1\n1\n3\nAAAA\n\n\n8\n1080\n\n\n0\n0\n0\n0\nBBBB\nAAA\nAA\n2\n370\n\n\n0\n0\n0\n0\nBBBB\nAAA\nBB\n2\n410\n\n\n0\n0\n0\n0\nBBBB\nBBB\nAA\n2\n450\n\n\n0\n0\n0\n0\nBBBB\nBBB\nBB\n2\n490\n\n\n0\n1\n1\n3\nBBBB\n\n\n8\n1720\n\n\n1\n0\n0\n4\n\nAAA\nAA\n4\n580\n\n\n1\n0\n0\n4\n\nAAA\nBB\n4\n660\n\n\n1\n0\n0\n4\n\nBBB\nAA\n4\n740\n\n\n1\n0\n0\n4\n\nBBB\nBB\n4\n820\n\n\n1\n1\n1\n7\n\n\n\n16\n2800\n\n\n\n\n\nGROUPING SETS\n\u5c0f\u8a08\u3092\u3068\u308b\u5217\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u76f4\u63a5\u6307\u5b9a\u3059\u308b\u3002\n\nkey2, (key1, key3), \u5168\u4f53\nSELECT GROUPING(key1)                AS grp_1,\n       GROUPING(key2)                AS grp_3,\n       GROUPING(key3)                AS grp_4,\n       GROUPING_ID(key1, key2, key3) AS grpid_1x2x3,\n       key1, key2, key3,\n       COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY GROUPING SETS(key2, (key1, key3), ())\nORDER BY key1, key2, key3\n\n\n\n\nGRP_1\nGRP_3\nGRP_4\nGRPID_1X2X3\nKEY1\nKEY2\nKEY3\nCOUNT(*)\nSUM(VAL)\n\n\n\n\n0\n1\n0\n2\nAAAA\n\nAA\n4\n500\n\n\n0\n1\n0\n2\nAAAA\n\nBB\n4\n580\n\n\n0\n1\n0\n2\nBBBB\n\nAA\n4\n820\n\n\n0\n1\n0\n2\nBBBB\n\nBB\n4\n900\n\n\n1\n0\n1\n5\n\nAAA\n\n8\n1240\n\n\n1\n0\n1\n5\n\nBBB\n\n8\n1560\n\n\n1\n1\n1\n7\n\n\n\n16\n2800\n\n\n\n\n\n\u53c2\u8003URL\n\n\u56f3\u3067\u30a4\u30e1\u30fc\u30b8\u3059\u308bOracle Database\u306eSQL\u5168\u96c6 (\u7b2c5\u56de RollUp\u96c6\u8a08\u306a\u3069)\nMarkdown Tables Generator\n\n# \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\n\n```sql\nSELECT *\nFROM sample_data\nORDER BY key1, key2, key3, key4\n```\n\n| KEY1 | KEY2 | KEY3 | KEY4 | VAL |\n|------|------|------|------|----:|\n| AAAA | AAA  | AA   | A    | 100 |\n| AAAA | AAA  | AA   | B    | 110 |\n| AAAA | AAA  | BB   | A    | 120 |\n| AAAA | AAA  | BB   | B    | 130 |\n| AAAA | BBB  | AA   | A    | 140 |\n| AAAA | BBB  | AA   | B    | 150 |\n| AAAA | BBB  | BB   | A    | 160 |\n| AAAA | BBB  | BB   | B    | 170 |\n| BBBB | AAA  | AA   | A    | 180 |\n| BBBB | AAA  | AA   | B    | 190 |\n| BBBB | AAA  | BB   | A    | 200 |\n| BBBB | AAA  | BB   | B    | 210 |\n| BBBB | BBB  | AA   | A    | 220 |\n| BBBB | BBB  | AA   | B    | 230 |\n| BBBB | BBB  | BB   | A    | 240 |\n| BBBB | BBB  | BB   | B    | 250 |\n\n```sql\n/* \u30c7\u30fc\u30bf\u578b\u306b\u7279\u306b\u610f\u5473\u306f\u306a\u3044 */\nCREATE TABLE sample_data\n(\n  key1 CHAR(4),\n  key2 CHAR(3),\n  key3 CHAR(2),\n  key4 CHAR(1),\n  val INTEGER\n);\n```\n\n```sql\nINSERT INTO sample_data VALUES('AAAA','AAA','AA','A',100);\nINSERT INTO sample_data VALUES('AAAA','AAA','AA','B',110);\nINSERT INTO sample_data VALUES('AAAA','AAA','BB','A',120);\nINSERT INTO sample_data VALUES('AAAA','AAA','BB','B',130);\nINSERT INTO sample_data VALUES('AAAA','BBB','AA','A',140);\nINSERT INTO sample_data VALUES('AAAA','BBB','AA','B',150);\nINSERT INTO sample_data VALUES('AAAA','BBB','BB','A',160);\nINSERT INTO sample_data VALUES('AAAA','BBB','BB','B',170);\nINSERT INTO sample_data VALUES('BBBB','AAA','AA','A',180);\nINSERT INTO sample_data VALUES('BBBB','AAA','AA','B',190);\nINSERT INTO sample_data VALUES('BBBB','AAA','BB','A',200);\nINSERT INTO sample_data VALUES('BBBB','AAA','BB','B',210);\nINSERT INTO sample_data VALUES('BBBB','BBB','AA','A',220);\nINSERT INTO sample_data VALUES('BBBB','BBB','AA','B',230);\nINSERT INTO sample_data VALUES('BBBB','BBB','BB','A',240);\nINSERT INTO sample_data VALUES('BBBB','BBB','BB','B',250);\n```\n\n---\n\n# KEY1, KEY2 \u3067\u96c6\u8a08\u3059\u308b\n\n```sql\nSELECT key1, key2, COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY key1, key2\nORDER BY key1, key2\n```\n\n| KEY1 | KEY2 | COUNT(*) | SUM(VAL) |\n|------|------|---------:|---------:|\n| AAAA | AAA  |        4 |      460 |\n| AAAA | BBB  |        4 |      620 |\n| BBBB | AAA  |        4 |      780 |\n| BBBB | BBB  |        4 |      940 |\n\n---\n\n# KEY1, KEY2 \u3067\u96c6\u8a08\u3057\u3064\u3064 KEY2 \u306e\u5c0f\u8a08\u3092\u3068\u308b\n\n\u5c0f\u8a08\u3092\u53d6\u308a\u305f\u3044\u5217\u3092 `ROLLUP()` \u6f14\u7b97\u5b50\u306b\u6307\u5b9a\u3059\u308b\u3002\n\n```sql\nSELECT key1, key2, COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY key1, ROLLUP(key2)\nORDER BY key1, key2\n```\n\nKEY2\u304cNULL\u306e\u884c\u304c\u3001KEY2\u306e\u5c0f\u8a08\u884c\u3067\u3042\u308b\u3002\n\n| KEY1 | KEY2 | COUNT(*) | SUM(VAL) |\n|------|------|---------:|---------:|\n| AAAA | AAA  |        4 |      460 |\n| AAAA | BBB  |        4 |      620 |\n| AAAA |      |        8 |     1080 |\n| BBBB | AAA  |        4 |      780 |\n| BBBB | BBB  |        4 |      940 |\n| BBBB |      |        8 |     1720 |\n\n---\n\n# \u8907\u6570\u5217\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u5c0f\u8a08\uff08\uff11\uff09\n\nKEY1\u3054\u3068\u306eKEY2, KEY3\u306e\u5c0f\u8a08\u3092\u3068\u308b\u3002KEY2, KEY3\u306e\u5c0f\u8a08\u306b\u3064\u3044\u3066\u306f\u66f4\u306bKEY2\u3054\u3068\u306eKEY3\u306e\u5c0f\u8a08\u3092\u3068\u308b\u3002\n\n```sql\nSELECT key1, key2, key3, COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY key1, ROLLUP(key2, key3)\nORDER BY key1, key2, key3\n```\n\n| KEY1 | KEY2 | KEY3 | COUNT(*) | SUM(VAL) |\n|------|------|------|---------:|---------:|\n| AAAA | AAA  | AA   |        2 |      210 |\n| AAAA | AAA  | BB   |        2 |      250 |\n| AAAA | AAA  |      |        4 |      460 |\n| AAAA | BBB  | AA   |        2 |      290 |\n| AAAA | BBB  | BB   |        2 |      330 |\n| AAAA | BBB  |      |        4 |      620 |\n| AAAA |      |      |        8 |     1080 |\n| BBBB | AAA  | AA   |        2 |      370 |\n| BBBB | AAA  | BB   |        2 |      410 |\n| BBBB | AAA  |      |        4 |      780 |\n| BBBB | BBB  | AA   |        2 |      450 |\n| BBBB | BBB  | BB   |        2 |      490 |\n| BBBB | BBB  |      |        4 |      940 |\n| BBBB |      |      |        8 |     1720 |\n\n\u3053\u3053\u3067 ROLLUP() \u306b\u6307\u5b9a\u3059\u308b\u9806\u5e8f\u306b\u306f\u610f\u5473\u304c\u3042\u308b\u3002\n\nKEY2\u3068KEY3\u3092\u5165\u308c\u66ff\u3048\u308b\u3068\u4ee5\u4e0b\u306e\u901a\u308a\u3002\n\n```sql\nSELECT key1, key2, key3, COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY key1, ROLLUP(key3, key2)\nORDER BY key1, key3, key2\n```\n\n| KEY1 | KEY2 | KEY3 | COUNT(*) | SUM(VAL) |\n|------|------|------|---------:|---------:|\n| AAAA | AAA  | AA   |        2 |      210 |\n| AAAA | BBB  | AA   |        2 |      290 |\n| AAAA |      | AA   |        4 |      500 |\n| AAAA | AAA  | BB   |        2 |      250 |\n| AAAA | BBB  | BB   |        2 |      330 |\n| AAAA |      | BB   |        4 |      580 |\n| AAAA |      |      |        8 |     1080 |\n| BBBB | AAA  | AA   |        2 |      370 |\n| BBBB | BBB  | AA   |        2 |      450 |\n| BBBB |      | AA   |        4 |      820 |\n| BBBB | AAA  | BB   |        2 |      410 |\n| BBBB | BBB  | BB   |        2 |      490 |\n| BBBB |      | BB   |        4 |      900 |\n| BBBB |      |      |        8 |     1720 |\n\n---\n\n# \u8907\u6570\u5217\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u5c0f\u8a08\uff08\uff12\uff09\n\nKEY1, KEY2\u3054\u3068\u306b\u3001KEY3, KEY4\u306e\u5c0f\u8a08\u3092\u3068\u308b\u3002\n\n```sql\nSELECT key1, key2, key3, key4,\n       COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY key1, key2, ROLLUP( (key3, key4) )\nORDER BY key1, key2, key3, key4\n```\n\n| KEY1 | KEY2 | KEY3 | KEY4 | COUNT(*) | SUM(VAL) |\n|------|------|------|------|---------:|---------:|\n| AAAA | AAA  | AA   | A    |        1 |      100 |\n| AAAA | AAA  | AA   | B    |        1 |      110 |\n| AAAA | AAA  | BB   | A    |        1 |      120 |\n| AAAA | AAA  | BB   | B    |        1 |      130 |\n| AAAA | AAA  |      |      |        4 |      460 |\n| AAAA | BBB  | AA   | A    |        1 |      140 |\n| AAAA | BBB  | AA   | B    |        1 |      150 |\n| AAAA | BBB  | BB   | A    |        1 |      160 |\n| AAAA | BBB  | BB   | B    |        1 |      170 |\n| AAAA | BBB  |      |      |        4 |      620 |\n| BBBB | AAA  | AA   | A    |        1 |      180 |\n| BBBB | AAA  | AA   | B    |        1 |      190 |\n| BBBB | AAA  | BB   | A    |        1 |      200 |\n| BBBB | AAA  | BB   | B    |        1 |      210 |\n| BBBB | AAA  |      |      |        4 |      780 |\n| BBBB | BBB  | AA   | A    |        1 |      220 |\n| BBBB | BBB  | AA   | B    |        1 |      230 |\n| BBBB | BBB  | BB   | A    |        1 |      240 |\n| BBBB | BBB  | BB   | B    |        1 |      250 |\n| BBBB | BBB  |      |      |        4 |      940 |\n\n---\n\n# GROUPING, GROUPING_ID\n\n\u30ab\u30e9\u30e0\u306bNULL\u304c\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001ROLLUP\u3055\u308c\u305f\u300c\u8d85\u96c6\u5408\u884c\u300d\u3092\u5224\u5225\u3059\u308b\u306b\u306f `GROUPING` \u307e\u305f\u306f `GROUPING_ID` \u95a2\u6570\u3092\u4f7f\u7528\u3059\u308b\u3002\n\n|\u95a2\u6570|\u4ed5\u69d8|\n|---|---|\n|GROUPING(\u5217)|1: \u6307\u5b9a\u3057\u305f\u5217\u306e\u8d85\u96c6\u5408\u884c / 0: \u305d\u308c\u4ee5\u5916|\n|GROUPING_ID(\u52171, \u52172, ...)|\u4e0a\u8a18\u306e\u7d44\u307f\u5408\u308f\u305b(2\u9032\u6570\u306b\u898b\u7acb\u3066\u308b)|\n\n```sql\nSELECT GROUPING(key1)                AS grp_1,\n       GROUPING(key2)                AS grp_2,\n       GROUPING(key3)                AS grp_3,\n       GROUPING_ID(key1, key2, key3) AS grpid_1x2x3,\n       key1, key2, key3,\n       COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY key1, ROLLUP(key2, key3)\nORDER BY key1, key2, key3\n```\n\n\uff08\u305f\u3060\u3057\u4eca\u56de\u306e\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u306b\u306fNULL\u304c\u542b\u307e\u308c\u306a\u3044\u3002\uff09\n\n| GRP_1 | GRP_2 | GRP_3 | GRPID_1X2X3 | KEY1 | KEY2 | KEY3 | COUNT(*) | SUM(VAL) |\n|------:|------:|------:|------------:|------|------|------|---------:|---------:|\n|     0 |     0 |     0 |           0 | AAAA | AAA  | AA   |        2 |      210 |\n|     0 |     0 |     0 |           0 | AAAA | AAA  | BB   |        2 |      250 |\n|     0 |     0 |     1 |           1 | AAAA | AAA  |      |        4 |      460 |\n|     0 |     0 |     0 |           0 | AAAA | BBB  | AA   |        2 |      290 |\n|     0 |     0 |     0 |           0 | AAAA | BBB  | BB   |        2 |      330 |\n|     0 |     0 |     1 |           1 | AAAA | BBB  |      |        4 |      620 |\n|     0 |     1 |     1 |           3 | AAAA |      |      |        8 |     1080 |\n|     0 |     0 |     0 |           0 | BBBB | AAA  | AA   |        2 |      370 |\n|     0 |     0 |     0 |           0 | BBBB | AAA  | BB   |        2 |      410 |\n|     0 |     0 |     1 |           1 | BBBB | AAA  |      |        4 |      780 |\n|     0 |     0 |     0 |           0 | BBBB | BBB  | AA   |        2 |      450 |\n|     0 |     0 |     0 |           0 | BBBB | BBB  | BB   |        2 |      490 |\n|     0 |     0 |     1 |           1 | BBBB | BBB  |      |        4 |      940 |\n|     0 |     1 |     1 |           3 | BBBB |      |      |        8 |     1720 |\n\n---\n\n# \u30af\u30ed\u30b9\u96c6\u8a08\n\nROLLUP\u3068\u7570\u306a\u308a\u3001\u5024\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u5c0f\u8a08\u304c\u8a08\u7b97\u3055\u308c\u308b\u3002\n\n## (1) CUBE(KEY1, KEY2, KEY3)\n\n\u4ee5\u4e0b\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u3068\u308b\u3002\n\n(KEY1), (KEY2), (KEY3), (KEY1, KEY2), (KEY1, KEY3), (KEY2, KEY3), (KEY1, KEY2, KEY3)\n\n```sql\nSELECT GROUPING(key1)                AS grp_1,\n       GROUPING(key2)                AS grp_2,\n       GROUPING(key3)                AS grp_3,\n       GROUPING_ID(key1, key2, key3) AS grpid_1x2x3,\n       key1, key2, key3,\n       COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY CUBE(key1, key2, key3)\nORDER BY key1, key2, key3\n```\n\n| GRP_1 | GRP_2 | GRP_3 | GRPID_1X2X3 | KEY1 | KEY2 | KEY3 | COUNT(*) | SUM(VAL) |\n|------:|------:|------:|------------:|------|------|------|---------:|---------:|\n|     0 |     0 |     0 |           0 | AAAA | AAA  | AA   |        2 |      210 |\n|     0 |     0 |     0 |           0 | AAAA | AAA  | BB   |        2 |      250 |\n|     0 |     0 |     1 |           1 | AAAA | AAA  |      |        4 |      460 |\n|     0 |     0 |     0 |           0 | AAAA | BBB  | AA   |        2 |      290 |\n|     0 |     0 |     0 |           0 | AAAA | BBB  | BB   |        2 |      330 |\n|     0 |     0 |     1 |           1 | AAAA | BBB  |      |        4 |      620 |\n|     0 |     1 |     0 |           2 | AAAA |      | AA   |        4 |      500 |\n|     0 |     1 |     0 |           2 | AAAA |      | BB   |        4 |      580 |\n|     0 |     1 |     1 |           3 | AAAA |      |      |        8 |     1080 |\n|     0 |     0 |     0 |           0 | BBBB | AAA  | AA   |        2 |      370 |\n|     0 |     0 |     0 |           0 | BBBB | AAA  | BB   |        2 |      410 |\n|     0 |     0 |     1 |           1 | BBBB | AAA  |      |        4 |      780 |\n|     0 |     0 |     0 |           0 | BBBB | BBB  | AA   |        2 |      450 |\n|     0 |     0 |     0 |           0 | BBBB | BBB  | BB   |        2 |      490 |\n|     0 |     0 |     1 |           1 | BBBB | BBB  |      |        4 |      940 |\n|     0 |     1 |     0 |           2 | BBBB |      | AA   |        4 |      820 |\n|     0 |     1 |     0 |           2 | BBBB |      | BB   |        4 |      900 |\n|     0 |     1 |     1 |           3 | BBBB |      |      |        8 |     1720 |\n|     1 |     0 |     0 |           4 |      | AAA  | AA   |        4 |      580 |\n|     1 |     0 |     0 |           4 |      | AAA  | BB   |        4 |      660 |\n|     1 |     0 |     1 |           5 |      | AAA  |      |        8 |     1240 |\n|     1 |     0 |     0 |           4 |      | BBB  | AA   |        4 |      740 |\n|     1 |     0 |     0 |           4 |      | BBB  | BB   |        4 |      820 |\n|     1 |     0 |     1 |           5 |      | BBB  |      |        8 |     1560 |\n|     1 |     1 |     0 |           6 |      |      | AA   |        8 |     1320 |\n|     1 |     1 |     0 |           6 |      |      | BB   |        8 |     1480 |\n|     1 |     1 |     1 |           7 |      |      |      |       16 |     2800 |\n\n---\n\n## (2) KEY1, CUBE(KEY2, KEY3)\n\n```sql\nSELECT GROUPING(key1)                AS grp_1,\n       GROUPING(key2)                AS grp_2,\n       GROUPING(key3)                AS grp_3,\n       GROUPING_ID(key1, key2, key3) AS grpid_1x2x3,\n       key1, key2, key3,\n       COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY key1, CUBE(key2, key3)\nORDER BY key1, key2, key3\n```\n\n| GRP_1 | GRP_2 | GRP_3 | GRPID_1X2X3 | KEY1 | KEY2 | KEY3 | COUNT(*) | SUM(VAL) |\n|------:|------:|------:|------------:|------|------|------|---------:|---------:|\n|     0 |     0 |     0 |           0 | AAAA | AAA  | AA   |        2 |      210 |\n|     0 |     0 |     0 |           0 | AAAA | AAA  | BB   |        2 |      250 |\n|     0 |     0 |     1 |           1 | AAAA | AAA  |      |        4 |      460 |\n|     0 |     0 |     0 |           0 | AAAA | BBB  | AA   |        2 |      290 |\n|     0 |     0 |     0 |           0 | AAAA | BBB  | BB   |        2 |      330 |\n|     0 |     0 |     1 |           1 | AAAA | BBB  |      |        4 |      620 |\n|     0 |     1 |     0 |           2 | AAAA |      | AA   |        4 |      500 |\n|     0 |     1 |     0 |           2 | AAAA |      | BB   |        4 |      580 |\n|     0 |     1 |     1 |           3 | AAAA |      |      |        8 |     1080 |\n|     0 |     0 |     0 |           0 | BBBB | AAA  | AA   |        2 |      370 |\n|     0 |     0 |     0 |           0 | BBBB | AAA  | BB   |        2 |      410 |\n|     0 |     0 |     1 |           1 | BBBB | AAA  |      |        4 |      780 |\n|     0 |     0 |     0 |           0 | BBBB | BBB  | AA   |        2 |      450 |\n|     0 |     0 |     0 |           0 | BBBB | BBB  | BB   |        2 |      490 |\n|     0 |     0 |     1 |           1 | BBBB | BBB  |      |        4 |      940 |\n|     0 |     1 |     0 |           2 | BBBB |      | AA   |        4 |      820 |\n|     0 |     1 |     0 |           2 | BBBB |      | BB   |        4 |      900 |\n|     0 |     1 |     1 |           3 | BBBB |      |      |        8 |     1720 |\n\n---\n\n## (3) KEY1, CUBE((KEY2, KEY3))\n\n```sql\nSELECT GROUPING(key1)                AS grp_1,\n       GROUPING(key2)                AS grp_2,\n       GROUPING(key3)                AS grp_3,\n       GROUPING_ID(key1, key2, key3) AS grpid_1x2x3,\n       key1, key2, key3,\n       COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY CUBE(key1, (key2, key3))\nORDER BY key1, key2, key3\n```\n\n| GRP_1 | GRP_2 | GRP_3 | GRPID_1X2X3 | KEY1 | KEY2 | KEY3 | COUNT(*) | SUM(VAL) |\n|------:|------:|------:|------------:|------|------|------|---------:|---------:|\n|     0 |     0 |     0 |           0 | AAAA | AAA  | AA   |        2 |      210 |\n|     0 |     0 |     0 |           0 | AAAA | AAA  | BB   |        2 |      250 |\n|     0 |     0 |     0 |           0 | AAAA | BBB  | AA   |        2 |      290 |\n|     0 |     0 |     0 |           0 | AAAA | BBB  | BB   |        2 |      330 |\n|     0 |     1 |     1 |           3 | AAAA |      |      |        8 |     1080 |\n|     0 |     0 |     0 |           0 | BBBB | AAA  | AA   |        2 |      370 |\n|     0 |     0 |     0 |           0 | BBBB | AAA  | BB   |        2 |      410 |\n|     0 |     0 |     0 |           0 | BBBB | BBB  | AA   |        2 |      450 |\n|     0 |     0 |     0 |           0 | BBBB | BBB  | BB   |        2 |      490 |\n|     0 |     1 |     1 |           3 | BBBB |      |      |        8 |     1720 |\n|     1 |     0 |     0 |           4 |      | AAA  | AA   |        4 |      580 |\n|     1 |     0 |     0 |           4 |      | AAA  | BB   |        4 |      660 |\n|     1 |     0 |     0 |           4 |      | BBB  | AA   |        4 |      740 |\n|     1 |     0 |     0 |           4 |      | BBB  | BB   |        4 |      820 |\n|     1 |     1 |     1 |           7 |      |      |      |       16 |     2800 |\n\n---\n\n# GROUPING SETS\n\n\u5c0f\u8a08\u3092\u3068\u308b\u5217\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u76f4\u63a5\u6307\u5b9a\u3059\u308b\u3002\n\n## key2, (key1, key3), \u5168\u4f53\n\n```sql\nSELECT GROUPING(key1)                AS grp_1,\n       GROUPING(key2)                AS grp_3,\n       GROUPING(key3)                AS grp_4,\n       GROUPING_ID(key1, key2, key3) AS grpid_1x2x3,\n       key1, key2, key3,\n       COUNT(*), SUM(val)\nFROM sample_data\nGROUP BY GROUPING SETS(key2, (key1, key3), ())\nORDER BY key1, key2, key3\n```\n\n| GRP_1 | GRP_3 | GRP_4 | GRPID_1X2X3 | KEY1 | KEY2 | KEY3 | COUNT(*) | SUM(VAL) |\n|------:|------:|------:|------------:|------|------|------|---------:|---------:|\n|     0 |     1 |     0 |           2 | AAAA |      | AA   |        4 |      500 |\n|     0 |     1 |     0 |           2 | AAAA |      | BB   |        4 |      580 |\n|     0 |     1 |     0 |           2 | BBBB |      | AA   |        4 |      820 |\n|     0 |     1 |     0 |           2 | BBBB |      | BB   |        4 |      900 |\n|     1 |     0 |     1 |           5 |      | AAA  |      |        8 |     1240 |\n|     1 |     0 |     1 |           5 |      | BBB  |      |        8 |     1560 |\n|     1 |     1 |     1 |           7 |      |      |      |       16 |     2800 |\n\n---\n\n# \u53c2\u8003URL\n\n- [\u56f3\u3067\u30a4\u30e1\u30fc\u30b8\u3059\u308bOracle Database\u306eSQL\u5168\u96c6 (\u7b2c5\u56de RollUp\u96c6\u8a08\u306a\u3069)](http://www.oracle.com/technetwork/jp/articles/otnj-sql-image5-444376-ja.html)\n\n- [Markdown Tables Generator](http://www.tablesgenerator.com/markdown_tables)\n", "tags": ["oracle", "SQL"]}