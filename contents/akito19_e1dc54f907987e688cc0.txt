{"tags": ["Rails", "MySQL", "openssl"], "context": "\n\n\u74b0\u5883 && \u8d77\u3053\u3063\u305f\u3053\u3068\nOS: macOS Sierra\nRuby: 2.3.1\nRails: 5.0.0.1\nbundle install \u3057\u305f\u3068\u304d\u306b mysql2 \u306e\u3068\u3053\u308d\u3067\u3053\u3051\u305f\u3002\n$ bundle install\n(\u8af8\u3005\u306egem\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u30ed\u30b0\u306f\u7701\u7565\uff09\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    current directory: /Users/akito/git/media/vendor/bundle/gems/mysql2-0.4.4/ext/mysql2\n/Users/akito/.rbenv/versions/2.3.1/bin/ruby -r ./siteconf20160929-55293-192vx35.rb extconf.rb\nchecking for ruby/thread.h... yes\nchecking for rb_thread_call_without_gvl() in ruby/thread.h... yes\nchecking for rb_thread_blocking_region()... no\nchecking for rb_wait_for_single_fd()... yes\nchecking for rb_hash_dup()... yes\nchecking for rb_intern3()... yes\n-----\nUsing mysql_config at /usr/local/bin/mysql_config\n-----\nchecking for mysql.h... yes\nchecking for errmsg.h... yes\nchecking for mysqld_error.h... yes\n-----\nDon't know how to set rpath on your system, if MySQL libraries are not in path mysql2 may not load\n-----\n-----\nSetting libpath to /usr/local/Cellar/mysql/5.7.14/lib\n-----\ncreating Makefile\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /Users/akito/git/media/vendor/bundle/extensions/x86_64-darwin-15/2.3.0-static/mysql2-0.4.4/mkmf.log\n\ncurrent directory: /Users/akito/git/media/vendor/bundle/gems/mysql2-0.4.4/ext/mysql2\nmake \"DESTDIR=\" clean\n\ncurrent directory: /Users/akito/git/media/vendor/bundle/gems/mysql2-0.4.4/ext/mysql2\nmake \"DESTDIR=\"\ncompiling client.c\ncompiling infile.c\ncompiling mysql2_ext.c\ncompiling result.c\ncompiling statement.c\nlinking shared-object mysql2/mysql2.bundle\nld: library not found for -lssl\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [mysql2.bundle] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /Users/akito/git/media/vendor/bundle/gems/mysql2-0.4.4 for inspection.\nResults logged to\n/Users/akito/git/media/vendor/bundle/extensions/x86_64-darwin-15/2.3.0-static/mysql2-0.4.4/gem_make.out\n\nAn error occurred while installing mysql2 (0.4.4), and Bundler cannot continue.\nMake sure that `gem install mysql2 -v '0.4.4'` succeeds before bundling.\n\ncapybara-webkit\u3068\u304b\u3067\u306f\u3053\u3093\u306a\u611f\u3058\u306e\u3053\u3068\u304c\u7a00\u306b\u3088\u304f\u8d77\u3053\u308b\u306e\u3067\u306a\u3093\u304b\u3082\u3046\u3044\u3044\u3084\u3063\u3066\u306a\u3063\u3066\u308b\u3051\u3069\u3001mysql2\u306f\u521d\u3081\u3066\u898b\u305f\u3002\n\u30ed\u30b0\u306e\u4e2d\u3067ld: library not found for -lssl\u3068\u304b\u8a00\u308f\u308c\u305f\u3051\u3069\u5225\u306bOpenSSL\u5165\u3063\u3066\u308b\u3057\u306a\u30fc\u3068\u304b\u601d\u3044\u306a\u304c\u3089\u30b0\u30b0\u3063\u3066\u308b\u3068\u3001\u3053\u3093\u306a\u306e\u3092StackOverflow\u3067\u307f\u3064\u3051\u305f\u3002\n\nApple has deprecated use of OpenSSL in favor of its own TLS and crypto libraries\nGenerally there are no consequences of this for you. If you build your own software and it requires this formula, you'll need to add to your build variables:\nLDFLAGS: -L/usr/local/opt/openssl/lib\nCPPFLAGS: -I/usr/local/opt/openssl/include\nPKG_CONFIG_PATH: /usr/local/opt/openssl/lib/pkgconfig\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\uff08\u96d1\u306a\u89e3\u91c8\u3060\u3051\u3069\uff09\u30d3\u30eb\u30c9\u306e\u3068\u304d\u306bLDFLAGS\u3068\u304bCPPFLAGS\u3068\u304b\u306e\u30d1\u30b9\u3092\u8ffd\u52a0\u3057\u308d\u3063\u3066\u8a00\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u56de\u7b54\u306b\u3082\u3042\u3063\u305f\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30d1\u30b9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n$ bundle config --local build.mysql2 \"--with-ldflags=-L/usr/local/opt/openssl/lib --with-cppflags=-I/usr/local/opt/openssl/include\"\n\n\u3053\u306e\u3042\u3068 bundle install \u3057\u305f\u3089\u3001\u7121\u4e8b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3057\u305f\u3002\n# \u74b0\u5883 && \u8d77\u3053\u3063\u305f\u3053\u3068\nOS: macOS Sierra\nRuby: 2.3.1\nRails: 5.0.0.1\n\n`bundle install` \u3057\u305f\u3068\u304d\u306b mysql2 \u306e\u3068\u3053\u308d\u3067\u3053\u3051\u305f\u3002\n\n```\n$ bundle install\n(\u8af8\u3005\u306egem\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u30ed\u30b0\u306f\u7701\u7565\uff09\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    current directory: /Users/akito/git/media/vendor/bundle/gems/mysql2-0.4.4/ext/mysql2\n/Users/akito/.rbenv/versions/2.3.1/bin/ruby -r ./siteconf20160929-55293-192vx35.rb extconf.rb\nchecking for ruby/thread.h... yes\nchecking for rb_thread_call_without_gvl() in ruby/thread.h... yes\nchecking for rb_thread_blocking_region()... no\nchecking for rb_wait_for_single_fd()... yes\nchecking for rb_hash_dup()... yes\nchecking for rb_intern3()... yes\n-----\nUsing mysql_config at /usr/local/bin/mysql_config\n-----\nchecking for mysql.h... yes\nchecking for errmsg.h... yes\nchecking for mysqld_error.h... yes\n-----\nDon't know how to set rpath on your system, if MySQL libraries are not in path mysql2 may not load\n-----\n-----\nSetting libpath to /usr/local/Cellar/mysql/5.7.14/lib\n-----\ncreating Makefile\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /Users/akito/git/media/vendor/bundle/extensions/x86_64-darwin-15/2.3.0-static/mysql2-0.4.4/mkmf.log\n\ncurrent directory: /Users/akito/git/media/vendor/bundle/gems/mysql2-0.4.4/ext/mysql2\nmake \"DESTDIR=\" clean\n\ncurrent directory: /Users/akito/git/media/vendor/bundle/gems/mysql2-0.4.4/ext/mysql2\nmake \"DESTDIR=\"\ncompiling client.c\ncompiling infile.c\ncompiling mysql2_ext.c\ncompiling result.c\ncompiling statement.c\nlinking shared-object mysql2/mysql2.bundle\nld: library not found for -lssl\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [mysql2.bundle] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /Users/akito/git/media/vendor/bundle/gems/mysql2-0.4.4 for inspection.\nResults logged to\n/Users/akito/git/media/vendor/bundle/extensions/x86_64-darwin-15/2.3.0-static/mysql2-0.4.4/gem_make.out\n\nAn error occurred while installing mysql2 (0.4.4), and Bundler cannot continue.\nMake sure that `gem install mysql2 -v '0.4.4'` succeeds before bundling.\n```\n\n`capybara-webkit`\u3068\u304b\u3067\u306f\u3053\u3093\u306a\u611f\u3058\u306e\u3053\u3068\u304c\u7a00\u306b\u3088\u304f\u8d77\u3053\u308b\u306e\u3067\u306a\u3093\u304b\u3082\u3046\u3044\u3044\u3084\u3063\u3066\u306a\u3063\u3066\u308b\u3051\u3069\u3001mysql2\u306f\u521d\u3081\u3066\u898b\u305f\u3002\n\u30ed\u30b0\u306e\u4e2d\u3067`ld: library not found for -lssl`\u3068\u304b\u8a00\u308f\u308c\u305f\u3051\u3069\u5225\u306bOpenSSL\u5165\u3063\u3066\u308b\u3057\u306a\u30fc\u3068\u304b\u601d\u3044\u306a\u304c\u3089\u30b0\u30b0\u3063\u3066\u308b\u3068\u3001\u3053\u3093\u306a\u306e\u3092[StackOverflow](http://stackoverflow.com/questions/30834421/error-when-trying-to-install-app-with-mysql2-gem)\u3067\u307f\u3064\u3051\u305f\u3002\n\n> Apple has deprecated use of OpenSSL in favor of its own TLS and crypto libraries\n\n> Generally there are no consequences of this for you. If you build your own software and it requires this formula, you'll need to add to your build variables:\n\n> LDFLAGS: -L/usr/local/opt/openssl/lib\n> CPPFLAGS: -I/usr/local/opt/openssl/include\n> PKG_CONFIG_PATH: /usr/local/opt/openssl/lib/pkgconfig\n\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\uff08\u96d1\u306a\u89e3\u91c8\u3060\u3051\u3069\uff09\u30d3\u30eb\u30c9\u306e\u3068\u304d\u306bLDFLAGS\u3068\u304bCPPFLAGS\u3068\u304b\u306e\u30d1\u30b9\u3092\u8ffd\u52a0\u3057\u308d\u3063\u3066\u8a00\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u56de\u7b54\u306b\u3082\u3042\u3063\u305f\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30d1\u30b9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```\n$ bundle config --local build.mysql2 \"--with-ldflags=-L/usr/local/opt/openssl/lib --with-cppflags=-I/usr/local/opt/openssl/include\"\n```\n\n\u3053\u306e\u3042\u3068 `bundle install` \u3057\u305f\u3089\u3001\u7121\u4e8b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3057\u305f\u3002\n"}