{"context": " More than 1 year has passed since last update.\u521d\u6295\u7a3f\u3067\u3059. Qiita \u306e\u4f7f\u3044\u65b9\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3067\u3059.\nTwitter \u306e OAuth \u30ed\u30b0\u30a4\u30f3\u3092\u30d6\u30e9\u30a6\u30b6\u3092\u4f7f\u308f\u305a\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u6a5f\u4f1a\u304c\u3042\u3063\u305f\u306e\u3067\u6c4e\u7528\u5316\u3067\u304d\u308b\u3068\u3053\u308d\u3060\u3051\u53d6\u308a\u51fa\u3057\u3066\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059. \n\u305f\u3060 Twitter API \u306e\u30a8\u30e9\u30fc\u306a\u306e\u304b\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u6a5f\u80fd\u306e\u30a8\u30e9\u30fc\u306a\u306e\u304b\u5224\u5225\u3067\u304d\u306a\u3044\u306e\u304c\u554f\u984c\u306a\u306e\u3067\u8003\u3048\u4e2d\u3067\u3059.\n\ntwitteroauth.py\n# -*- coding: utf-8 -*-\n\nimport mechanize\nimport cookielib\n\n\nclass TwitterWebOAuth(object):\n    \"\"\"Twitter Web OAuth\"\"\"\n\n    def __init__(self, username, password, is_cookie=False):\n        self._is_cookie = is_cookie\n        self._username = username\n        self._password = password\n\n    def oauth(self, oauth_url, callback_proc):\n        \"\"\"OAuth with twitter account\"\"\"\n        br = self._browser()\n        br.open(oauth_url)\n        self._login_with_twitter(br)\n        url = br.geturl()\n        return callback_proc(url, br)\n\n    def patch(self, proc):\n        \"\"\"patch script using Browser\"\"\"\n        self._browser()\n        return proc()\n\n    def _browser(self):\n        br = mechanize.Browser()\n        br.set_handle_equiv(True)\n        br.set_handle_redirect(True)\n        br.set_handle_referer(True)\n        br.set_handle_robots(False)\n        if self._is_cookie:\n            cj = cookielib.CookieJar()\n            br.set_cookiejar(cj)\n        return br\n\n    def _login_with_twitter(self, br):\n        url = br.geturl()\n        br.open(url)\n        br.select_form(nr=0)\n        br.form['session[username_or_email]'] = self._username\n        br.form['session[password]'] = self._password\n        br.submit()\n\n\n\n\u4f8b\nQiita \u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u81ea\u5206\u306e\u8a2d\u5b9a\u753b\u9762\u3092\u958b\u3044\u3066\u307f\u307e\u3057\u3087\u3046.\npip install mechanize \u3092\u5fd8\u308c\u305a\u306b.\n\ntest.py\n# -*- coding: utf-8 -*-\n\nfrom twitteroauth import TwitterWebOAuth\n\n\ndef callback(url, br):\n    br.open('https://qiita.com/settings/profile')\n    url = br.geturl()\n    print url\n    # \u8a2d\u5b9a\u753b\u9762\u3067\u306a\u3093\u304b\u3057\u3088\u3046\u3068\u304a\u3082\u3063\u305f\u3051\u3069\u3081\u3093\u3069\u304f\u306a\u3063\u3066\u304d\u305f\n\n\nif __name__ == '__main__':\n    to = TwitterWebOAuth('naoiwata', 'xxxxxx', True)\n    to.oauth(\n        'https://qiita.com/auth/twitter',\n        callback\n    )\n\n\n\u30d5\u30a1\u30a4\u30eb\u3092\u5b9f\u884c\u3059\u308b\u3068 https://qiita.com/settings/profile \u3068\u51fa\u529b\u3055\u308c\u308b\u306e\u3067, \u30ed\u30b0\u30a4\u30f3\u3057\u3066\u81ea\u5206\u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u8a2d\u5b9a\u753b\u9762\u304c\u958b\u3044\u305f\u3088\u3046\u3067\u3059. \n\u521d\u6295\u7a3f\u3067\u3059. Qiita \u306e\u4f7f\u3044\u65b9\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3067\u3059.\n\nTwitter \u306e OAuth \u30ed\u30b0\u30a4\u30f3\u3092\u30d6\u30e9\u30a6\u30b6\u3092\u4f7f\u308f\u305a\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u6a5f\u4f1a\u304c\u3042\u3063\u305f\u306e\u3067\u6c4e\u7528\u5316\u3067\u304d\u308b\u3068\u3053\u308d\u3060\u3051\u53d6\u308a\u51fa\u3057\u3066\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059. \n\u305f\u3060 Twitter API \u306e\u30a8\u30e9\u30fc\u306a\u306e\u304b\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u6a5f\u80fd\u306e\u30a8\u30e9\u30fc\u306a\u306e\u304b\u5224\u5225\u3067\u304d\u306a\u3044\u306e\u304c\u554f\u984c\u306a\u306e\u3067\u8003\u3048\u4e2d\u3067\u3059.\n\n```twitteroauth.py\n# -*- coding: utf-8 -*-\n \nimport mechanize\nimport cookielib\n \n \nclass TwitterWebOAuth(object):\n    \"\"\"Twitter Web OAuth\"\"\"\n \n    def __init__(self, username, password, is_cookie=False):\n        self._is_cookie = is_cookie\n        self._username = username\n        self._password = password\n \n    def oauth(self, oauth_url, callback_proc):\n        \"\"\"OAuth with twitter account\"\"\"\n        br = self._browser()\n        br.open(oauth_url)\n        self._login_with_twitter(br)\n        url = br.geturl()\n        return callback_proc(url, br)\n \n    def patch(self, proc):\n        \"\"\"patch script using Browser\"\"\"\n        self._browser()\n        return proc()\n \n    def _browser(self):\n        br = mechanize.Browser()\n        br.set_handle_equiv(True)\n        br.set_handle_redirect(True)\n        br.set_handle_referer(True)\n        br.set_handle_robots(False)\n        if self._is_cookie:\n            cj = cookielib.CookieJar()\n            br.set_cookiejar(cj)\n        return br\n \n    def _login_with_twitter(self, br):\n        url = br.geturl()\n        br.open(url)\n        br.select_form(nr=0)\n        br.form['session[username_or_email]'] = self._username\n        br.form['session[password]'] = self._password\n        br.submit()\n```\n\n## \u4f8b\n\nQiita \u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u81ea\u5206\u306e\u8a2d\u5b9a\u753b\u9762\u3092\u958b\u3044\u3066\u307f\u307e\u3057\u3087\u3046.\n`pip install mechanize` \u3092\u5fd8\u308c\u305a\u306b.\n\n```test.py\n# -*- coding: utf-8 -*-\n\nfrom twitteroauth import TwitterWebOAuth\n\n\ndef callback(url, br):\n    br.open('https://qiita.com/settings/profile')\n    url = br.geturl()\n    print url\n    # \u8a2d\u5b9a\u753b\u9762\u3067\u306a\u3093\u304b\u3057\u3088\u3046\u3068\u304a\u3082\u3063\u305f\u3051\u3069\u3081\u3093\u3069\u304f\u306a\u3063\u3066\u304d\u305f\n\n\nif __name__ == '__main__':\n    to = TwitterWebOAuth('naoiwata', 'xxxxxx', True)\n    to.oauth(\n        'https://qiita.com/auth/twitter',\n        callback\n    )\n```\n\n\u30d5\u30a1\u30a4\u30eb\u3092\u5b9f\u884c\u3059\u308b\u3068 `https://qiita.com/settings/profile` \u3068\u51fa\u529b\u3055\u308c\u308b\u306e\u3067, \u30ed\u30b0\u30a4\u30f3\u3057\u3066\u81ea\u5206\u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u8a2d\u5b9a\u753b\u9762\u304c\u958b\u3044\u305f\u3088\u3046\u3067\u3059. ", "tags": ["Python2.7.5", "TwitterAPI"]}