{"context": " More than 1 year has passed since last update.\n\nPagerDuty\u306eAPI\u3092\u53e9\u3044\u3066Slack\u3078\u4eca\u65e5\u306eDevOpsMan\u3092\u304a\u77e5\u3089\u305b\u3059\u308b\n\u5168\u54e1\u3067\u30c7\u30d6\u30aa\u30c3\u30d7\u30b9\uff01\u3092\u5408\u8a00\u8449\u306b\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u4eca\u65e5\u306e\u30c7\u30d6\u30aa\u30c3\u30d7\u30b9\u30de\u30f3\u304c\u5b58\u5728\u3059\u308b\u3002\n\u4eca\u65e5\u306e\u30c7\u30d6\u30aa\u30c3\u30d7\u30b9\u30de\u30f3\u306fPagerDuty\u3067\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u6307\u5b9a\u3057\u3066\u3044\u308b\u306e\u3067\u3001API\u3092\u53e9\u3044\u3066\n\u4eca\u65e5\u306e\u30c7\u30d6\u30aa\u30c3\u30d7\u30b9\u30de\u30f3\u304c\u8ab0\u304b\u3092Slack\u3067\u901a\u77e5\u3059\u308b\u3002\n\n\u4f8b: 10:30 ~ 10:30 \u306e\u9593\u3067\u62c5\u5f53\u304c\u5909\u308f\u308b\u5834\u5408\n#!/usr/bin/env ruby\n\nrequire 'time'\n\nt = Time.now\n\nsince_date = Time.new(t.year, t.month, t.day, 10, 31)\nuntil_date = Time.new(t.year, t.month, (t.day + 1), 10, 29)\n\n# PagerDuty\u306eAPI\u3092\u53e9\u3044\u3066\u62c5\u5f53\u306e\u4eba\u3092\u898b\u3064\u3051\u308b\nmember = `curl -s -H \"Content-type: application/json\" \\\n                  -H \"Authorization: Token token=TOKEN\" \\\n                  -X GET -G \\\n                  --data-urlencode \"since=#{since_date}\" \\\n                  --data-urlencode \"until=#{until_date}\" \\\n                  \"https://classi.pagerduty.com/api/v1/schedules/SCHEDULE_ID/entries\" \\\n                  | jq '.entries[].user.name' -r\n         `.chomp\n\n# DevOpsMan\u306b\u4f1d\u3048\u308b\n`curl -s https://slack.com/api/chat.postMessage -X POST \\\n  -d 'channel=#CHANNEL' \\\n  -d 'text=\u672c\u65e5\u306eDevOpsMan\u306f \\`#{member} \\`\u3055\u3093\u3067\u3059\u3002\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3044\u305f\u3057\u307e\u3059 :bow:' \\\n  -d 'username=USERNAME' \\\n  -d 'icon_emoji=:ICON:' \\\n  -d 'token=xoxp-0000000000-0000000000-00000000000000000'`\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u96d1\u306bcron\u3067\u901a\u77e5\u3055\u305b\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n# PagerDuty\u306eAPI\u3092\u53e9\u3044\u3066Slack\u3078\u4eca\u65e5\u306eDevOpsMan\u3092\u304a\u77e5\u3089\u305b\u3059\u308b\n\n`\u5168\u54e1\u3067\u30c7\u30d6\u30aa\u30c3\u30d7\u30b9\uff01`\u3092\u5408\u8a00\u8449\u306b\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u4eca\u65e5\u306e\u30c7\u30d6\u30aa\u30c3\u30d7\u30b9\u30de\u30f3\u304c\u5b58\u5728\u3059\u308b\u3002\n\u4eca\u65e5\u306e\u30c7\u30d6\u30aa\u30c3\u30d7\u30b9\u30de\u30f3\u306fPagerDuty\u3067\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u6307\u5b9a\u3057\u3066\u3044\u308b\u306e\u3067\u3001API\u3092\u53e9\u3044\u3066\n\u4eca\u65e5\u306e\u30c7\u30d6\u30aa\u30c3\u30d7\u30b9\u30de\u30f3\u304c\u8ab0\u304b\u3092Slack\u3067\u901a\u77e5\u3059\u308b\u3002\n\n### \u4f8b: 10:30 ~ 10:30 \u306e\u9593\u3067\u62c5\u5f53\u304c\u5909\u308f\u308b\u5834\u5408\n\n```rb\n#!/usr/bin/env ruby\n\nrequire 'time'\n\nt = Time.now\n\nsince_date = Time.new(t.year, t.month, t.day, 10, 31)\nuntil_date = Time.new(t.year, t.month, (t.day + 1), 10, 29)\n\n# PagerDuty\u306eAPI\u3092\u53e9\u3044\u3066\u62c5\u5f53\u306e\u4eba\u3092\u898b\u3064\u3051\u308b\nmember = `curl -s -H \"Content-type: application/json\" \\\n                  -H \"Authorization: Token token=TOKEN\" \\\n                  -X GET -G \\\n                  --data-urlencode \"since=#{since_date}\" \\\n                  --data-urlencode \"until=#{until_date}\" \\\n                  \"https://classi.pagerduty.com/api/v1/schedules/SCHEDULE_ID/entries\" \\\n                  | jq '.entries[].user.name' -r\n         `.chomp\n\n# DevOpsMan\u306b\u4f1d\u3048\u308b\n`curl -s https://slack.com/api/chat.postMessage -X POST \\\n  -d 'channel=#CHANNEL' \\\n  -d 'text=\u672c\u65e5\u306eDevOpsMan\u306f \\`#{member} \\`\u3055\u3093\u3067\u3059\u3002\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3044\u305f\u3057\u307e\u3059 :bow:' \\\n  -d 'username=USERNAME' \\\n  -d 'icon_emoji=:ICON:' \\\n  -d 'token=xoxp-0000000000-0000000000-00000000000000000'`\n```\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u96d1\u306bcron\u3067\u901a\u77e5\u3055\u305b\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n", "tags": ["Slack", "PageDuty", "bot"]}