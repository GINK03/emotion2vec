{"context": " More than 1 year has passed since last update.\n\n\u74b0\u5883\n\nUbuntu 14.04\nFuelPHP 1.7.3\n\u958b\u767a\u74b0\u5883\u306e redis \u306e\u30db\u30b9\u30c8 localhost\n\u88fd\u54c1\u74b0\u5883\u306e redis \u306e\u30db\u30b9\u30c8 Amazon ElastiCache\n\n\nRedis \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo apt-get install redis-server\n\n$ sudo service redis-server start\n\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u78ba\u8a8d\n$ redis-server --version\n\n\n\u63a5\u7d9a\u306e\u78ba\u8a8d\n\nlocalhost\n$ redis-cli -h localhost\n\n\nElastiCache\nElasticCache - AWS ElastiCache\u3067redis - Qiita \u3092\u53c2\u8003\u306b ElastiCache \u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\u3002\n$ redis-cli -h xxxxxx.yyyyyy.nnnn.apne1.cache.amazonaws.com\n\n\nSession \u306e\u8a2d\u5b9a\nfuel/core/config/session.php \u3092 fuel/app/config/session.php \u306b\u30b3\u30d4\u30fc\u3057\u3001Session \u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\nfuel/app/config/session.php\n\u2026\n-   'driver' = 'cookie', \n+   'driver' = 'redis',\n\u2026\n    'redis'         => array(\n        'cookie_name'       => 'fuelrid',   // \u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u683c\u7d0d\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u308b\u30af\u30c3\u30ad\u30fc\u540d\n        'database'          => 'default',   // fuel/app/config/db.php \u306e redis \u30bb\u30af\u30b7\u30e7\u30f3\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u540d\u524d\n                        ),\n\u2026\n\n\n\nDB \u306e\u8a2d\u5b9a\nfuel/core/config/db.php \u3092 fuel/app/config/<environment>/db.php \u306b\u30b3\u30d4\u30fc\u3057\u3001Redis \u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n\u958b\u767a\u74b0\u5883\n\nfuel/app/config/develpment/db.php\n    return array(\n        'default' => array(\n            'connection'  => array(\n                'dsn'        => 'mysql:host=localhost;dbname=db',\n                'username'   => 'username',\n                'password'   => 'password',\n            ),\n        ),\n+       'redis' => array(\n+           'default' => array(\n+               'hostname' => '127.0.0.1',\n+               'port' => 6379,\n+               'timeout' => null,\n+           ),\n+       ),\n  );\n\n\n\n\u88fd\u54c1\u74b0\u5883\n\nfuel/app/config/production/db.php\n    return array(\n        'default' => array(\n            'connection'  => array(\n                'dsn'        => 'mysql:host=localhost;dbname=db',\n                'username'   => 'username',\n                'password'   => 'password',\n            ),\n        ),\n+       'redis' => array(\n+           'default' => array(\n+               'hostname' => 'xxxxxx.yyyyyy.nnnn.apne1.cache.amazonaws.com',\n+               'port' => 6379,\n+               'timeout' => null,\n+           ),\n+       ),\n  );\n\n\n\n\u6697\u53f7\u30ad\u30fc\u306e\u8a2d\u5b9a\nFuelPHP\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u5171\u6709\u6642\u306e\u6ce8\u610f\u70b9 - Qiita \u306e\u8a18\u8f09\u901a\u308a\u3001 FuelPHP \u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u3092 ElastiCache \u3092\u4f7f\u3063\u3066\u8907\u6570\u30ce\u30fc\u30c9\u3067\u5171\u6709\u3059\u308b\u5834\u5408\u306b\u306f\u3001 fuel/app/config/crypt.php \u3092\u8907\u6570\u30ce\u30fc\u30c9\u3067\u540c\u3058\u5024\u3068\u306a\u308b\u3088\u3046\u306b\u6697\u53f7\u30ad\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b \u3089\u3057\u3044\u2026\u3002\nFuelPHP \u3067\u306f SessionID \u3092 Cookie \u540d\u306b\u8a2d\u5b9a\u3059\u308b\u6642\u306b\u6697\u53f7\u5316\u3092\u884c\u3063\u3066\u304a\u308a\u3001\u3053\u306e\u6642\u306b\u4f7f\u7528\u3059\u308b\u6697\u53f7\u30ad\u30fc\u304c\u30ce\u30fc\u30c9\u6bce\u306b\u7570\u306a\u308b\u3068\u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u306e\u5171\u6709\u304c\u3067\u304d\u306a\u3044\u30021 \u5ea6 Session \u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b crypt.php \u306b\u6697\u53f7\u30ad\u30fc\u304c\u8a2d\u5b9a\u3055\u308c\u81ea\u52d5\u7684\u306b\u751f\u6210\u3055\u308c\u308b\u3002\n\nfuel/app/config/crypt.php\n<?php\nreturn array(\n    'crypto_key' => 'XXXXXXXXXXXXXXXXXXXXXXXX',\n    'crypto_iv' => 'XXXXXXXXXXXXXXXXXXXXXXXX',\n    'crypto_hmac' => 'XXXXXXXXXXXXXXXXXXXXXXXX',\n);\n\n\ncrypt.php \u306b\u304a\u3044\u3066 'crypto_key' 'crypto_iv' 'crypto_hmac' \u306e 3 \u3064\u306e\u6697\u53f7\u30ad\u30fc\u304c\u5fc5\u8981\u3068\u306a\u308a\u3001 base64decode \u53ef\u80fd\u306a\u6587\u5b57\u5217 \u3067\u4e14\u3064 \u6587\u5b57\u5217\u306e\u9577\u3055\u306f 4 \u306e\u500d\u6570 \u3068\u3044\u3046\u6761\u4ef6\u3092\u6e80\u305f\u3059\u5fc5\u8981\u304c\u3042\u308b\u3002\u6761\u4ef6\u3092\u6e80\u305f\u3055\u306a\u3044\u5834\u5408\u306f\u3001 crypt.php \u304c\u518d\u4f5c\u6210\u3055\u308c\u30ce\u30fc\u30c9\u6bce\u306b\u7570\u306a\u3063\u3066\u3057\u307e\u3046\u3002\n\n\u53c2\u8003\u6587\u732e\n\n\u3010fuelphp\u3011\u30bb\u30c3\u30b7\u30e7\u30f3\u4fdd\u5b58\u5148\u3092redis\u306b\u3059\u308b\u65b9\u6cd5\u30e1\u30e2 - \u3068\u308a\u3042\u3048\u305aphp\u3068\u304b\nElasticCache - AWS ElastiCache\u3067redis - Qiita\nFuelPHP\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u5171\u6709\u6642\u306e\u6ce8\u610f\u70b9 - Qiita\nSession \u8a2d\u5b9a - \u30af\u30e9\u30b9 - FuelPHP \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n\n\n## \u74b0\u5883\n\n* Ubuntu 14.04\n* FuelPHP 1.7.3\n* \u958b\u767a\u74b0\u5883\u306e redis \u306e\u30db\u30b9\u30c8 localhost\n* \u88fd\u54c1\u74b0\u5883\u306e redis \u306e\u30db\u30b9\u30c8 Amazon ElastiCache\n\n## Redis \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n### \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ sudo apt-get install redis-server\n```\n\n```bash\n$ sudo service redis-server start\n```\n\n### \u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u78ba\u8a8d\n\n```bash\n$ redis-server --version\n```\n\n### \u63a5\u7d9a\u306e\u78ba\u8a8d\n\n#### localhost\n\n```bash\n$ redis-cli -h localhost\n```\n\n#### ElastiCache\n\n[ElasticCache - AWS ElastiCache\u3067redis - Qiita](http://qiita.com/supertaihei02/items/f3ef9148fd5235ee2816 \"ElasticCache - AWS ElastiCache\u3067redis - Qiita\") \u3092\u53c2\u8003\u306b ElastiCache \u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\u3002\n\n```bash\n$ redis-cli -h xxxxxx.yyyyyy.nnnn.apne1.cache.amazonaws.com\n```\n\n## Session \u306e\u8a2d\u5b9a\n\n`fuel/core/config/session.php` \u3092 `fuel/app/config/session.php` \u306b\u30b3\u30d4\u30fc\u3057\u3001Session \u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n```diff:fuel/app/config/session.php\n\u2026\n-\t'driver' = 'cookie', \n+\t'driver' = 'redis',\n\u2026\n\t'redis'\t\t\t=> array(\n\t\t'cookie_name'\t\t=> 'fuelrid',\t// \u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u683c\u7d0d\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u308b\u30af\u30c3\u30ad\u30fc\u540d\n\t\t'database'\t\t\t=> 'default',\t// fuel/app/config/db.php \u306e redis \u30bb\u30af\u30b7\u30e7\u30f3\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u540d\u524d\n\t\t\t\t\t\t),\n\u2026\n```\n\n## DB \u306e\u8a2d\u5b9a\n\n`fuel/core/config/db.php` \u3092 `fuel/app/config/<environment>/db.php` \u306b\u30b3\u30d4\u30fc\u3057\u3001Redis \u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n### \u958b\u767a\u74b0\u5883\n\n```diff:fuel/app/config/develpment/db.php\n\treturn array(\n\t\t'default' => array(\n\t\t\t'connection'  => array(\n\t\t\t\t'dsn'        => 'mysql:host=localhost;dbname=db',\n\t\t\t\t'username'   => 'username',\n\t\t\t\t'password'   => 'password',\n\t\t\t),\n\t\t),\n+\t\t'redis' => array(\n+\t\t\t'default' => array(\n+\t\t\t\t'hostname' => '127.0.0.1',\n+\t\t\t\t'port' => 6379,\n+\t\t\t\t'timeout' => null,\n+\t\t\t),\n+\t\t),\n  );\n```\n\n### \u88fd\u54c1\u74b0\u5883\n\n\n```diff:fuel/app/config/production/db.php\n\treturn array(\n\t\t'default' => array(\n\t\t\t'connection'  => array(\n\t\t\t\t'dsn'        => 'mysql:host=localhost;dbname=db',\n\t\t\t\t'username'   => 'username',\n\t\t\t\t'password'   => 'password',\n\t\t\t),\n\t\t),\n+\t\t'redis' => array(\n+\t\t\t'default' => array(\n+\t\t\t\t'hostname' => 'xxxxxx.yyyyyy.nnnn.apne1.cache.amazonaws.com',\n+\t\t\t\t'port' => 6379,\n+\t\t\t\t'timeout' => null,\n+\t\t\t),\n+\t\t),\n  );\n```\n\n## \u6697\u53f7\u30ad\u30fc\u306e\u8a2d\u5b9a\n\n\n\n[FuelPHP\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u5171\u6709\u6642\u306e\u6ce8\u610f\u70b9 - Qiita](http://qiita.com/takakiku/items/c6f508330070b06f8e81 \"FuelPHP\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u5171\u6709\u6642\u306e\u6ce8\u610f\u70b9 - Qiita\") \u306e\u8a18\u8f09\u901a\u308a\u3001 **FuelPHP \u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u3092 ElastiCache \u3092\u4f7f\u3063\u3066\u8907\u6570\u30ce\u30fc\u30c9\u3067\u5171\u6709\u3059\u308b\u5834\u5408\u306b\u306f\u3001 `fuel/app/config/crypt.php` \u3092\u8907\u6570\u30ce\u30fc\u30c9\u3067\u540c\u3058\u5024\u3068\u306a\u308b\u3088\u3046\u306b\u6697\u53f7\u30ad\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b** \u3089\u3057\u3044\u2026\u3002\n\nFuelPHP \u3067\u306f SessionID \u3092 Cookie \u540d\u306b\u8a2d\u5b9a\u3059\u308b\u6642\u306b\u6697\u53f7\u5316\u3092\u884c\u3063\u3066\u304a\u308a\u3001\u3053\u306e\u6642\u306b\u4f7f\u7528\u3059\u308b\u6697\u53f7\u30ad\u30fc\u304c\u30ce\u30fc\u30c9\u6bce\u306b\u7570\u306a\u308b\u3068\u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u306e\u5171\u6709\u304c\u3067\u304d\u306a\u3044\u30021 \u5ea6 Session \u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b `crypt.php` \u306b\u6697\u53f7\u30ad\u30fc\u304c\u8a2d\u5b9a\u3055\u308c\u81ea\u52d5\u7684\u306b\u751f\u6210\u3055\u308c\u308b\u3002\n\n```php:fuel/app/config/crypt.php\n<?php\nreturn array(\n\t'crypto_key' => 'XXXXXXXXXXXXXXXXXXXXXXXX',\n\t'crypto_iv' => 'XXXXXXXXXXXXXXXXXXXXXXXX',\n\t'crypto_hmac' => 'XXXXXXXXXXXXXXXXXXXXXXXX',\n);\n```\n\n`crypt.php` \u306b\u304a\u3044\u3066 `'crypto_key'` `'crypto_iv'` `'crypto_hmac'` \u306e 3 \u3064\u306e\u6697\u53f7\u30ad\u30fc\u304c\u5fc5\u8981\u3068\u306a\u308a\u3001 **base64decode \u53ef\u80fd\u306a\u6587\u5b57\u5217** \u3067\u4e14\u3064 **\u6587\u5b57\u5217\u306e\u9577\u3055\u306f 4 \u306e\u500d\u6570** \u3068\u3044\u3046\u6761\u4ef6\u3092\u6e80\u305f\u3059\u5fc5\u8981\u304c\u3042\u308b\u3002\u6761\u4ef6\u3092\u6e80\u305f\u3055\u306a\u3044\u5834\u5408\u306f\u3001 `crypt.php` \u304c\u518d\u4f5c\u6210\u3055\u308c\u30ce\u30fc\u30c9\u6bce\u306b\u7570\u306a\u3063\u3066\u3057\u307e\u3046\u3002\n\n\n\n## \u53c2\u8003\u6587\u732e\n\n* [\u3010fuelphp\u3011\u30bb\u30c3\u30b7\u30e7\u30f3\u4fdd\u5b58\u5148\u3092redis\u306b\u3059\u308b\u65b9\u6cd5\u30e1\u30e2 - \u3068\u308a\u3042\u3048\u305aphp\u3068\u304b](http://kimagureneet.hatenablog.com/entry/2016/01/05/135147 \"\u3010fuelphp\u3011\u30bb\u30c3\u30b7\u30e7\u30f3\u4fdd\u5b58\u5148\u3092redis\u306b\u3059\u308b\u65b9\u6cd5\u30e1\u30e2 - \u3068\u308a\u3042\u3048\u305aphp\u3068\u304b\")\n* [ElasticCache - AWS ElastiCache\u3067redis - Qiita](http://qiita.com/supertaihei02/items/f3ef9148fd5235ee2816 \"ElasticCache - AWS ElastiCache\u3067redis - Qiita\")\n* [FuelPHP\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u5171\u6709\u6642\u306e\u6ce8\u610f\u70b9 - Qiita](http://qiita.com/takakiku/items/c6f508330070b06f8e81 \"FuelPHP\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u5171\u6709\u6642\u306e\u6ce8\u610f\u70b9 - Qiita\")\n* [Session \u8a2d\u5b9a - \u30af\u30e9\u30b9 - FuelPHP \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://fuelphp.jp/docs/1.8/classes/session/config.html \"Session \u8a2d\u5b9a - \u30af\u30e9\u30b9 - FuelPHP \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\")\n", "tags": ["elasticache", "FuelPHP", "Redis"]}