{"tags": ["systemd", "archLinux", "systemd-nspawn", "lxc", "Emacs"], "context": "\u8ab0\u304c\u5f97\u3092\u3059\u308b\u306e\u304b\u3068\u3044\u3046\u5185\u5bb9\u3067\u3059\u304c\u3001\u305d\u308c\u306a\u308a\u306b\u82e6\u52b4\u3057\u305f\u306e\u3067\u8a18\u4e8b\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\u95a2\u9023\u8a18\u4e8b\uff1a\nArch Linux\u3067Systemd-nspawn\u3092\u4f7f\u3063\u3066Spacemacs\u3092GUI\u3067\u8d77\u52d5\u3057\u3001Emacs-mozc\u3092\u4f7f\u3046\n\n\u52d5\u6a5f\nArch Linux\u3067\u306ffcitx-mozc\u3068emacs-mozc\u304c\u7af6\u5408\u3057\u3066\u304a\u308a\u3001\u53cc\u65b9\u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3002\n\u305d\u3053\u3067\u3001Systemd-nspawn\u306b\u3088\u308a\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u308a\u3001\u305d\u3053\u3067\u6700\u4f4e\u9650\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001emacs-mozc\u3092\u5229\u7528\u3059\u308b\u3002\n\n\u624b\u9806\n\u30b4\u30fc\u30eb\u306f\u3001\u30db\u30b9\u30c8\u5074\u306eEmacs\u304c\u3001\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305fmozc_emacs_helper\u3092\u547c\u3073\u51fa\u305b\u308b\u3088\u3046\u306b\u3059\u308b\u3053\u3068\n\nArch Linux\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u6210\nSystemd-nspawn\u3092\u4f7f\u3046\nmkdir -p $HOME/var/container/arch\nsudo pacstrap -i -c -d $HOME/var/container/arch base\u3000base-devel\n\n\n\u30b3\u30f3\u30c6\u30ca\u5185\u306bemacs-mozc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ncat << 'EOF' >> /etc/pacman.conf\n[pnsft-pur]\nSigLevel = Optional TrustAll\nServer = http://downloads.sourceforge.net/project/pnsft-aur/pur/$arch\nEOF\n\npacman -Syy\npacman -S emacs emacs-mozc\n\nuseradd --create-home arch-container-user\n\n\n\u52d5\u4f5c\u78ba\u8a8d\necho -e '(0 CreateSession)\\n(1 SendKey 1 97)' |\nsudo systemd-nspawn --quiet -D $HOME/var/container/arch -u arch-container-user mozc_emacs_helper\n\n\u30a8\u30e9\u30fc\u304c\u5e30\u3063\u3066\u3053\u306a\u3051\u308c\u3070OK\n\n\u30db\u30b9\u30c8\u306eEmacs\u306bmozc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nM-x package-install mozc\n\n\u3067\u5165\u308c\u305f\u5f8c\u3001\n\ninit.el\n(require 'mozc)\n\n\n\u3092\u8ffd\u52a0\u3059\u308b\n\n\u30db\u30b9\u30c8\u306bmozc_emacs_helper\u30b3\u30de\u30f3\u30c9\u3092\u8ffd\u52a0\n\n$HOME/bin/mozc_emacs_helper\n#!/bin/bash\n\nsudo systemd-nspawn --quiet -D $HOME/var/container/mozc_emacs_helper -u arch mozc_emacs_helper\n\n\n\u6ce8\n\n\n--quiet\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5165\u308c\u308b\u306e\u304c\u30dd\u30a4\u30f3\u30c8\u3067\u3001\u5165\u308c\u306a\u3044\u3068Systemd-nspawn\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u5165\u308a\u3001mozc.el\u304c\u52d5\u4f5c\u3057\u306a\u3044\n\u30b3\u30f3\u30c6\u30ca\u5074\u306e\u30e6\u30fc\u30b6\u30fc\u304croot\u3060\u3068\u3001mozc_emacs_helper\u304c\u3046\u307e\u304f\u52d5\u4f5c\u3057\u306a\u3044\u306e\u3067\u3001arch\u30e6\u30fc\u30b6\u30fc\u3092\u6307\u5b9a\u3059\u308b\n\u30b3\u30f3\u30c6\u30ca\u306b\u5165\u308b\u6642\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u7121\u3057\u3067sudo\u3067\u304d\u308b\u3088\u3046\u3001\u30db\u30b9\u30c8\u5074\u306evisudo\u3067\u8a2d\u5b9a\u3057\u3066\u304a\u304f\n\n\n\u3084\u3063\u3066\u307f\u308b\nEmacs\u3092\u8d77\u52d5\u3057\u3066\u3001M-x mozc-mode\u3057\u307e\u3059\u3002\n\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\n\u611f\u60f3\n\u6700\u8fd1\u306fEmacs\u3092GUI\u3067\u8d77\u52d5\u3057\u306a\u3044\u306e\u3067\u3001\u6b63\u76f4\u3042\u307e\u308a\u4f7f\u3044\u9053\u306f\u7121\u3055\u305d\u3046\u3067\u3059\u3002\n\u304c\u3001GUI/CUI\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u95a2\u308f\u3089\u305a\u3001\u3044\u3056\u3068\u306a\u3063\u305f\u3089\u30b3\u30f3\u30c6\u30ca\u3068\u9023\u643a\u3067\u304d\u308b\u3068\u3044\u3046\u306e\u306f\u5b89\u5fc3\u3067\u304d\u307e\u3059\u306d\u3002\n\u4eee\u60f3\u5316\u6700\u9ad8\u3002\n\n\u53c2\u8003\nhttp://qiita.com/scalper/items/a1ab77ae7b2b06fb3f49\n\u8ab0\u304c\u5f97\u3092\u3059\u308b\u306e\u304b\u3068\u3044\u3046\u5185\u5bb9\u3067\u3059\u304c\u3001\u305d\u308c\u306a\u308a\u306b\u82e6\u52b4\u3057\u305f\u306e\u3067\u8a18\u4e8b\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u95a2\u9023\u8a18\u4e8b\uff1a\n[Arch Linux\u3067Systemd-nspawn\u3092\u4f7f\u3063\u3066Spacemacs\u3092GUI\u3067\u8d77\u52d5\u3057\u3001Emacs-mozc\u3092\u4f7f\u3046](http://qiita.com/acro5piano/items/5edbb8f21d9e8de1f0ff)\n\n# \u52d5\u6a5f\n\nArch Linux\u3067\u306ffcitx-mozc\u3068emacs-mozc\u304c\u7af6\u5408\u3057\u3066\u304a\u308a\u3001\u53cc\u65b9\u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3002\n\u305d\u3053\u3067\u3001Systemd-nspawn\u306b\u3088\u308a\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u308a\u3001\u305d\u3053\u3067\u6700\u4f4e\u9650\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001emacs-mozc\u3092\u5229\u7528\u3059\u308b\u3002\n\n# \u624b\u9806\n\n\u30b4\u30fc\u30eb\u306f\u3001\u30db\u30b9\u30c8\u5074\u306eEmacs\u304c\u3001\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f`mozc_emacs_helper`\u3092\u547c\u3073\u51fa\u305b\u308b\u3088\u3046\u306b\u3059\u308b\u3053\u3068\n\n## Arch Linux\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u6210\n\nSystemd-nspawn\u3092\u4f7f\u3046\n\n```bash\nmkdir -p $HOME/var/container/arch\nsudo pacstrap -i -c -d $HOME/var/container/arch base\u3000base-devel\n```\n\n## \u30b3\u30f3\u30c6\u30ca\u5185\u306bemacs-mozc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\ncat << 'EOF' >> /etc/pacman.conf\n[pnsft-pur]\nSigLevel = Optional TrustAll\nServer = http://downloads.sourceforge.net/project/pnsft-aur/pur/$arch\nEOF\n\npacman -Syy\npacman -S emacs emacs-mozc\n\nuseradd --create-home arch-container-user\n```\n\n## \u52d5\u4f5c\u78ba\u8a8d\n\n```bash\necho -e '(0 CreateSession)\\n(1 SendKey 1 97)' |\nsudo systemd-nspawn --quiet -D $HOME/var/container/arch -u arch-container-user mozc_emacs_helper\n```\n\n\u30a8\u30e9\u30fc\u304c\u5e30\u3063\u3066\u3053\u306a\u3051\u308c\u3070OK\n\n## \u30db\u30b9\u30c8\u306eEmacs\u306bmozc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```lisp\nM-x package-install mozc\n```\n\n\u3067\u5165\u308c\u305f\u5f8c\u3001\n\n```lisp:init.el\n(require 'mozc)\n```\n\n\u3092\u8ffd\u52a0\u3059\u308b\n\n## \u30db\u30b9\u30c8\u306bmozc_emacs_helper\u30b3\u30de\u30f3\u30c9\u3092\u8ffd\u52a0\n\n\n```bash:$HOME/bin/mozc_emacs_helper\n#!/bin/bash\n\nsudo systemd-nspawn --quiet -D $HOME/var/container/mozc_emacs_helper -u arch mozc_emacs_helper\n```\n\n\u6ce8\n\n- `--quiet`\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5165\u308c\u308b\u306e\u304c\u30dd\u30a4\u30f3\u30c8\u3067\u3001\u5165\u308c\u306a\u3044\u3068Systemd-nspawn\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u5165\u308a\u3001mozc.el\u304c\u52d5\u4f5c\u3057\u306a\u3044\n- \u30b3\u30f3\u30c6\u30ca\u5074\u306e\u30e6\u30fc\u30b6\u30fc\u304croot\u3060\u3068\u3001mozc_emacs_helper\u304c\u3046\u307e\u304f\u52d5\u4f5c\u3057\u306a\u3044\u306e\u3067\u3001`arch`\u30e6\u30fc\u30b6\u30fc\u3092\u6307\u5b9a\u3059\u308b\n- \u30b3\u30f3\u30c6\u30ca\u306b\u5165\u308b\u6642\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u7121\u3057\u3067`sudo`\u3067\u304d\u308b\u3088\u3046\u3001\u30db\u30b9\u30c8\u5074\u306e`visudo`\u3067\u8a2d\u5b9a\u3057\u3066\u304a\u304f\n\n# \u3084\u3063\u3066\u307f\u308b\n\nEmacs\u3092\u8d77\u52d5\u3057\u3066\u3001`M-x mozc-mode`\u3057\u307e\u3059\u3002\n\n\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n![Screenshot_2016-10-17_12-37-10.png](https://qiita-image-store.s3.amazonaws.com/0/103885/89d1703f-8b6d-0711-cb01-ac40f06a101a.png)\n\n\n# \u611f\u60f3\n\n\u6700\u8fd1\u306fEmacs\u3092GUI\u3067\u8d77\u52d5\u3057\u306a\u3044\u306e\u3067\u3001\u6b63\u76f4\u3042\u307e\u308a\u4f7f\u3044\u9053\u306f\u7121\u3055\u305d\u3046\u3067\u3059\u3002\n\n\u304c\u3001GUI/CUI\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u95a2\u308f\u3089\u305a\u3001\u3044\u3056\u3068\u306a\u3063\u305f\u3089\u30b3\u30f3\u30c6\u30ca\u3068\u9023\u643a\u3067\u304d\u308b\u3068\u3044\u3046\u306e\u306f\u5b89\u5fc3\u3067\u304d\u307e\u3059\u306d\u3002\n\u4eee\u60f3\u5316\u6700\u9ad8\u3002\n\n# \u53c2\u8003\n\nhttp://qiita.com/scalper/items/a1ab77ae7b2b06fb3f49\n"}