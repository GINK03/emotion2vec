{"context": " More than 1 year has passed since last update.d3.js\u3092\u30b5\u30fc\u30d0\u3067\u52d5\u304b\u3057\u305f\u6642\u306e\u30b5\u30f3\u30d7\u30eb\uff0e\njsdom\u3067DOM\u3092\u751f\u6210\u3057\u3066\uff0cHTML\u30bf\u30b0\u8981\u7d20\u306b\u5909\u63db\u3057\u3066\u3044\u308b\uff0e\n\n\u74b0\u5883\n\nLinux\nNode.js v0.10.3x\nNode.js package\n\n\njsdom\nd3.js\n\n\n\n\n\u30b3\u30fc\u30c9\n\u51e6\u7406\u306e\u6d41\u308c\u306f\u4ee5\u4e0b\uff0e\n- DOM\u3092\u751f\u6210\uff0eglobal.document\u306b\u6e21\u3059\uff0e\n- d3\u3092\u30ed\u30fc\u30c9\u3057\u3066\uff0cDOM\u3092\u53c2\u7167\u3059\u308b\uff0e\n- d3.js\u3067DOM\u306b\u30c7\u30fc\u30bf\u3092\u8ffd\u52a0\u3057\u3066\uff0cHTML\u306b\u51fa\u529b\u3059\u308b\uff0e\n- SVG\u3092\u524a\u9664\n\nserversideJS\n// \u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u8aad\u307f\u8fbc\u307f\ntry {\n  var jsdom        = require('jsdom').jsdom; // d3\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u524d\u306bjsdom\u3092\u30ed\u30fc\u30c9\u3057\u3066\u304a\u304f\u3053\u3068\n\n  global.document  = jsdom('<html><body><div id=\"container\"></div></body></html>'); // DOM\u3092\u751f\u6210\u3059\u308b\n  var d3           = require('d3');\n\n} catch(error) {\n  ...\n}\n\n// SVG\u3092\u751f\u6210\u3059\u308b\nfunction createSvg() {\n  d3.select('#container')\n    .append('svg') // SVG\u3092\u8ffd\u52a0\n    .attr('id', 'hoge') // SVG\u306eID\n    .attr('xmlns', 'http://www.w3.org/2000/svg')\n    .attr('version',  '1.1')\n    // \u4ee5\u4e0b\uff0cSVG\u306b\u8ffd\u52a0\u3059\u308b\u8981\u7d20\u3092\u8a18\u8ff0\n\n  // SVG\u30c7\u30fc\u30bf\u3092HTML\u5f62\u5f0f\u306b\u5909\u63db\u3059\u308b\uff0e\n  var svgHtmlTag = d3.select('#container').node().innerHTML;\n  // => <svg id='hoge' xmlns='http://www.w3.org/2000/svg' version=''1.1''>...</svg>\n\n  output(); // \u3069\u3053\u304b\u306b\u51fa\u529b\n\n  d3.select('#hoge').remove(); // hoge\u3092\u524a\u9664\uff0e\n}\n\n(function () {\n  createSvg();\n})();\n\n\n\n\u56f0\u3063\u305f\u6240\nd3.select\u3067\u8981\u7d20\u306e\u6307\u5b9a\u65b9\u6cd5\u3068\u7bc4\u56f2\u304c\u826f\u304f\u7406\u89e3\u3067\u304d\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\uff0c\u30cf\u30de\u308a\u307e\u3057\u305f\uff0e\nDOM\u69cb\u9020\u3092\u7406\u89e3\u3057\u3066\u3044\u306a\u3044\u3068\uff0c\u201d\u3069\u3053\u201d\u306e\u30c4\u30ea\u30fc\u3092\u6307\u3057\u3066\u3044\u308b\u306e\u304b\u5206\u304b\u3089\u305a\uff0c\u601d\u3046\u3088\u3046\u306b\u30c7\u30fc\u30bf\u304c\u6d88\u3048\u307e\u305b\u3093\u3067\u3057\u305f\uff0e\n\nd3.js\u3092\u30b5\u30fc\u30d0\u3067\u52d5\u304b\u3057\u305f\u6642\u306e\u30b5\u30f3\u30d7\u30eb\uff0e\njsdom\u3067DOM\u3092\u751f\u6210\u3057\u3066\uff0cHTML\u30bf\u30b0\u8981\u7d20\u306b\u5909\u63db\u3057\u3066\u3044\u308b\uff0e\n\n\n# \u74b0\u5883\n- Linux\n- Node.js v0.10.3x\n- Node.js package\n\t- jsdom\n\t- d3.js\n\n# \u30b3\u30fc\u30c9\n\n\u51e6\u7406\u306e\u6d41\u308c\u306f\u4ee5\u4e0b\uff0e\n- DOM\u3092\u751f\u6210\uff0e`global.document`\u306b\u6e21\u3059\uff0e\n- d3\u3092\u30ed\u30fc\u30c9\u3057\u3066\uff0cDOM\u3092\u53c2\u7167\u3059\u308b\uff0e\n- d3.js\u3067DOM\u306b\u30c7\u30fc\u30bf\u3092\u8ffd\u52a0\u3057\u3066\uff0cHTML\u306b\u51fa\u529b\u3059\u308b\uff0e\n- SVG\u3092\u524a\u9664\n\n```javascript:serversideJS\n// \u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u8aad\u307f\u8fbc\u307f\ntry {\n  var jsdom        = require('jsdom').jsdom; // d3\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u524d\u306bjsdom\u3092\u30ed\u30fc\u30c9\u3057\u3066\u304a\u304f\u3053\u3068\n  \n  global.document  = jsdom('<html><body><div id=\"container\"></div></body></html>'); // DOM\u3092\u751f\u6210\u3059\u308b\n  var d3           = require('d3');\n\n} catch(error) {\n  ...\n}\n\n// SVG\u3092\u751f\u6210\u3059\u308b\nfunction createSvg() {\n  d3.select('#container')\n    .append('svg') // SVG\u3092\u8ffd\u52a0\n    .attr('id', 'hoge') // SVG\u306eID\n    .attr('xmlns', 'http://www.w3.org/2000/svg')\n    .attr('version',  '1.1')\n    // \u4ee5\u4e0b\uff0cSVG\u306b\u8ffd\u52a0\u3059\u308b\u8981\u7d20\u3092\u8a18\u8ff0\n\n  // SVG\u30c7\u30fc\u30bf\u3092HTML\u5f62\u5f0f\u306b\u5909\u63db\u3059\u308b\uff0e\n  var svgHtmlTag = d3.select('#container').node().innerHTML;\n  // => <svg id='hoge' xmlns='http://www.w3.org/2000/svg' version=''1.1''>...</svg>\n  \n  output(); // \u3069\u3053\u304b\u306b\u51fa\u529b\n  \n  d3.select('#hoge').remove(); // hoge\u3092\u524a\u9664\uff0e\n}\n\n(function () {\n  createSvg();\n})();\n```\n\n# \u56f0\u3063\u305f\u6240\n\nd3.select\u3067\u8981\u7d20\u306e\u6307\u5b9a\u65b9\u6cd5\u3068\u7bc4\u56f2\u304c\u826f\u304f\u7406\u89e3\u3067\u304d\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\uff0c\u30cf\u30de\u308a\u307e\u3057\u305f\uff0e\nDOM\u69cb\u9020\u3092\u7406\u89e3\u3057\u3066\u3044\u306a\u3044\u3068\uff0c\u201d\u3069\u3053\u201d\u306e\u30c4\u30ea\u30fc\u3092\u6307\u3057\u3066\u3044\u308b\u306e\u304b\u5206\u304b\u3089\u305a\uff0c\u601d\u3046\u3088\u3046\u306b\u30c7\u30fc\u30bf\u304c\u6d88\u3048\u307e\u305b\u3093\u3067\u3057\u305f\uff0e\n", "tags": ["d3.js", "jsdom"]}