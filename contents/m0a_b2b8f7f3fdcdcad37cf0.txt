{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u300cMeteor\u300d\u3068\u3044\u3046\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3063\u3066\u3054\u5b58\u77e5\u3067\u3057\u3087\u3046\u304b\uff1f\n\u3053\u3061\u3089\u306b\u3066\u7d39\u4ecb\u3055\u305b\u3066\u3044\u305f\u3060\u3044\u3066\u3044\u307e\u3059\u3002\n\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0WEB\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3042\u308a\u3001\u30ea\u30a2\u30af\u30c6\u30a4\u30d6\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3059\u3002\n\u500b\u4eba\u7684\u306b\u4e0a\u8a18\uff12\u70b9\u304c\u81ea\u5206\u306e\u60f9\u304b\u308c\u308b\u30dd\u30a4\u30f3\u30c8\u306a\u308f\u3051\u3067\u3059\u304c\u3001\n\u554f\u984c\u306f\u57fa\u672c\u7684\u306bWebsocket\u306b\u3088\u308b\u53cc\u65b9\u5411\u901a\u4fe1\u3092\u884c\u306a\u3063\u3066\u304a\u308a\u3001\nWebAPI\u306f\u7528\u610f\u3055\u308c\u3066\u3044\u306a\u3044\u70b9\u304c\u30cd\u30a4\u30c6\u30a3\u30d6\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u3068\u306e\u63a5\u7d9a\u306b\u554f\u984c\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u3002\n\u3057\u304b\u3057\u3001Meteor\u306f\u72ec\u81ea\u306bWebScoket\u4e0a\u306bDDP\u3068\u3044\u3046\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\u3057\u304b\u3082iOS\u7528\u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u958b\u767a\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3057\u305f\u306e\u3067\u4f7f\u3063\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\u3067\u3059\u304c\u3001\u307e\u305a\u306fDDP\u3063\u3066\u3069\u3093\u306a\u901a\u4fe1\u3092\u3057\u3066\u3044\u308b\u304b\u898b\u3066\u307f\u307e\u3057\u3087\u3046\n\nDDP\u306e\u901a\u4fe1\u3092\u307f\u308b\nMeteor\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u5b8c\u4e86\u3057\u3066\u3044\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002\n\u3059\u3054\u304f\u7c21\u5358\u3067\u3059\u306e\u3067\u3001\u662f\u975e\u3053\u3053\u304b\u3089\u8a66\u3057\u3066\u307f\u3066\u307b\u3057\u3044\u3067\u3059\u3002\n\nDDP\u3092\u76e3\u8996\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3092\u3044\u308c\u3066\u52d5\u4f5c\u3092\u898b\u3066\u307f\u308b\nMeteor DDP Analyzer\u3092\u5c0e\u5165\u3057\u307e\u3059\u3002\n\ninstall\nnpm install -g ddp-analyzer\n\n\nnpm\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u524d\u63d0\u3067\u3059\u3002(brew install npm\u3068\u304b\u3067\u5165\u308c\u307e\u3057\u3087\u3046)\n\u9069\u5f53\u306a\u30a2\u30d7\u30ea\u3068\u3057\u3066example\u304b\u3089leaderboard\u3092\u5c0e\u5165\u3057\u3066\u307f\u307e\u3059\u3002\n\nexampleinstall\nmeteor create --example leaderboard\ncd leaderboard\n\n\n\u3053\u3053\u3067meteor\u3068\u5165\u308c\u308c\u3070\u30a2\u30d7\u30ea\u304c\u8d77\u52d5\u3057\u307e\u3059\u304c\u3001DDP proxy\u3092\u9593\u306b\u631f\u3080\u305f\u3081\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5165\u529b\u3057\u307e\u3059\u3002\nexport DDP_DEFAULT_CONNECTION_URL=http://localhost:3030\nmeteor\n\n\u3053\u308c\u3067\u3001\u30a2\u30d7\u30ea\u304c\u8d77\u52d5\u3057\u305f\u3068\u601d\u3044\u307e\u3059\u304c\u3001ddp-analyzer\u3092\u5225\u30bf\u30d6\u3067terminal\u3092\u958b\u304d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n\u5225\u30bf\u30d6\u306eTerminal\u304b\u3089\u8d77\u52d5\nddp-analyzer-proxy\n\n\n\u4e0a\u8a18Terminal\u304b\u3089DDP\u5165\u51fa\u529b\u306e\u30ed\u30b0\u304c\u898b\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089http://localhost:3000\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\n\n\u8907\u6570\u753b\u9762\u304b\u3089\u307f\u308b\u3068\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u3068\u9023\u52d5\u3057\u3066\u308b\u306e\u304c\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30ed\u30b0\n 2  IN   0  {\"server_id\":\"0\"}\n 2  OUT  194  {\"msg\":\"connect\",\"version\":\"1\",\"support\":[\"1\",\"pre2\",\"pre1\"]}\n 2  IN   55  {\"msg\":\"connected\",\"session\":\"SiGpwuWFvxHbBfoKT\"}\n 2  IN   5  {\"msg\":\"added\",\"collection\":\"players\",\"id\":\"e2iqRNh7WuHH2q7dv\",\"fields\":{\"name\":\"Ada Lovelace\",\"score\":30}}\n 2  IN   6  {\"msg\":\"added\",\"collection\":\"players\",\"id\":\"4XbrBYFfGhdmkne6S\",\"fields\":{\"name\":\"Grace Hopper\",\"score\":50}}\n 2  IN   11  {\"msg\":\"added\",\"collection\":\"players\",\"id\":\"KoLMxcq8cotTNMAia\",\"fields\":{\"name\":\"Marie Curie\",\"score\":40}}\n 2  IN   0  {\"msg\":\"added\",\"collection\":\"players\",\"id\":\"drmtfDKhPFZzdoKcH\",\"fields\":{\"name\":\"Carl Friedrich Gauss\",\"score\":20}}\n 2  IN   1  {\"msg\":\"added\",\"collection\":\"players\",\"id\":\"6FNTfH4yniGQyC45Q\",\"fields\":{\"name\":\"Nikola Tesla\",\"score\":55}}\n 2  IN   0  {\"msg\":\"added\",\"collection\":\"players\",\"id\":\"7NDd96fhJKgoke7Qq\",\"fields\":{\"name\":\"Claude Shannon\",\"score\":30}}\n 2  OUT  11  {\"msg\":\"sub\",\"id\":\"WSoxxLbKaxBiTBEDc\",\"name\":\"meteor_autoupdate_clientVersions\",\"params\":[]}\n 2  IN   10  {\"msg\":\"added\",\"collection\":\"meteor_autoupdate_clientVersions\",\"id\":\"P66dYxYKmH8ud6Y7i\",\"fields\":{\"current\":true}}\n 2  IN   2  {\"msg\":\"added\",\"collection\":\"meteor_autoupdate_clientVersions\",\"id\":\"version\",\"fields\":{\"version\":\"9c9878112ad755389718cb18711718b4bf0cb5e0\"}}\n 2  IN   2  {\"msg\":\"added\",\"collection\":\"meteor_autoupdate_clientVersions\",\"id\":\"version-cordova\",\"fields\":{\"version\":\"51af6ca65d12bb7019f8483d5a4f44eaaadf2ac8\",\"refreshable\":false}}\n 2  IN   4  {\"msg\":\"added\",\"collection\":\"meteor_autoupdate_clientVersions\",\"id\":\"version-refreshable\",\"fields\":{\"version\":\"96a1d99467ffa8e9f508b65850bebaf9f8396957\",\"assets\":{\"allCss\":[{\"url\":\"/de4f33c8b52b307376a0d274d7bc1dfeddede1ed.css\"}]}}}\n 2  IN   2  {\"msg\":\"ready\",\"subs\":[\"WSoxxLbKaxBiTBEDc\"]}\n 1  IN   29860  {\"msg\":\"ping\"}\n 2  OUT  19184  {\"msg\":\"method\",\"method\":\"/players/update\",\"params\":[{\"_id\":\"e2iqRNh7WuHH2q7dv\"},{\"$inc\":{\"score\":5}},{}],\"id\":\"1\"}\n 2  IN   40  {\"msg\":\"result\",\"id\":\"1\",\"result\":1}\n 1  IN   121  {\"msg\":\"changed\",\"collection\":\"players\",\"id\":\"e2iqRNh7WuHH2q7dv\",\"fields\":{\"score\":35}}\n 2  IN   44  {\"msg\":\"changed\",\"collection\":\"players\",\"id\":\"e2iqRNh7WuHH2q7dv\",\"fields\":{\"score\":35}}\n 2  IN   4  {\"msg\":\"updated\",\"methods\":[\"1\"]}\n 2  IN   10677  {\"msg\":\"ping\"}\n 2  OUT  12  {\"msg\":\"pong\"}\n\n\n\u5b9f\u969b\u306e\u64cd\u4f5c\u3068\u7167\u3089\u3057\u308f\u305b\u308b\u3068\u5927\u4f53\u306e\u52d5\u304d\u304c\u308f\u304b\u3063\u3066\u9762\u767d\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u30ed\u30b0\u304b\u3089\u5bdf\u3059\u308b\u306bplayers\u3068\u3044\u3046\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u304c\u3042\u308a\u3001\u30d5\u30a3\u30fc\u30eb\u30c9\u306f\nname,score\u306e\u3088\u3046\u3067\u3059\u3002\n/players/update\u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u304b\u3089\u5024\u306e\u66f4\u65b0\u3092\u884c\u3063\u3066\u3044\u308b\u307f\u305f\u3044\u3067\u3059\u306d\u3002\n\u3053\u308c\u3092iOS\u7248\u3068\u3057\u3066\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3059\u3002\n\nObjectiveDDP\u3092\u8a66\u3059\u3002\nDDP\u306e\u4ed5\u69d8\u306f\u516c\u958b\u3055\u308c\u3066\u304a\u308a\u5404\u8a00\u8a9e\u5b9f\u88c5\u304c\u3042\u308a\u307e\u3059\u3002\n\u53c2\u8003:http://meteorpedia.com/read/DDP_Clients\n\u3053\u306e\u3046\u3061iOS\u7248\u5b9f\u88c5\u3092\u884c\u3063\u3066\u3044\u308bObjectiveDDP\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\n\u5b9f\u969b\u306b\u5148\u307b\u3069\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u3042\u308bleaderboard\u3092ios\u30cd\u30a4\u30c6\u30a3\u30d6\u3068\u3057\u3066\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\nhttps://github.com/m0a-ios/leaderboard_ios\n\u7d50\u8ad6\u304b\u3089\u8a00\u3048\u3070\u3001Meteor\u304c\u81ea\u52d5\u7684\u306b\u3084\u3063\u3066\u304f\u308c\u308b\u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3092\u624b\u52d5\u3067\u884c\u3046\u30a4\u30e1\u30fc\u30b8\u3067\u3057\u305f\u3002\n\u307e\u305a\u306f\u30c7\u30ea\u30b2\u30fc\u30c8\u5074\u3067DDP\u3078\u306e\u30a2\u30af\u30bb\u30b9URL\u306e\u8a2d\u5b9a\u3068\u3001\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306fplayers\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u5168\u516c\u958b\u3057\u3066\u3044\u308b\u3060\u3051\u306a\u306e\u3067\u3001\u305d\u308c\u3092\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u8a2d\u5b9a\u3057\u3066\u53d6\u308a\u8fbc\u3080\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nAppDelegate.swift\n//\u7701\u7565\n@UIApplicationMain\nclass AppDelegate: UIResponder, UIApplicationDelegate {\n\n    var window: UIWindow?\n    //\u63a5\u7d9a\u5148URL\u306b\u306f\u4e8b\u524d\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u74b0\u5883\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\n    var meteorClient = initialiseMeteor(\"pre2\", \"wss://m0a_test.meteor.com/websocket\");\n\n    func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {\n    //players\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u540c\u671f\u5bfe\u8c61\u306b\u8a2d\u5b9a\n    meteorClient.addSubscription(\"players\");    return true\n    }\n\n//\u7701\u7565\n\n\n\u30c7\u30ea\u30b2\u30fc\u30c8\u306b\u8a2d\u5b9a\u3057\u305fMeteor\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u540c\u671f\u3055\u308c\u305fCollection\u3092\u53d6\u308a\u51fa\u3057\u3001\n\u76e3\u8996\u5bfe\u8c61\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nTableViewController.swift\n\n//\u7701\u7565\n\nclass TableViewController: UITableViewController {\n    var players:M13OrderedDictionary!; //\u9806\u5e8f\u6027\u3092\u4fdd\u6301\u3059\u308bDictinary\n    var meteor:MeteorClient!; \n    var selectedIndex = -1\n    @IBOutlet weak var plusButton: UIBarButtonItem!\n\n\n    required init(coder aDecoder: NSCoder) {\n        self.meteor = (UIApplication.sharedApplication().delegate as AppDelegate).meteorClient\n        super.init(coder: aDecoder)\n    }\n\n    override func viewDidLoad() {\n        super.viewDidLoad()        \n        //\u76e3\u8996\u5bfe\u8c61\u306b\u8ffd\u52a0\n        NSNotificationCenter.defaultCenter().addObserver(self, selector: \"didReceiveUpdate:\", name: \"added\", object: nil)\n        NSNotificationCenter.defaultCenter().addObserver(self, selector: \"didReceiveUpdate:\", name: \"changed\", object: nil)\n        NSNotificationCenter.defaultCenter().addObserver(self, selector: \"didReceiveUpdate:\", name: \"removed\", object: nil)\n        // Do any additional setup after loading the view, typically from a nib.\n    }\n\n\n    //\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u304b\u3089\u306e\u5909\u66f4\u3092\u542b\u3081\u5024\u306e\u5909\u66f4\u3092\u691c\u77e5\u3059\u308b\u3068\u5b9f\u884c\u3055\u308c\u307e\u3059\n    func didReceiveUpdate(notification:NSNotification){\n        if (self.meteor.collections.objectForKey(\"players\") != nil){\n\n            self.players = self.meteor.collections[\"players\"]  as M13OrderedDictionary\n\n            //\u4e26\u3073\u66ff\u3048\n            self.players = self.players.sortedByObjectsUsingComparator({ (objA, objB) -> NSComparisonResult in\n                var scoreA = objA[\"score\"] as Int\n                var scoreB = objB[\"score\"] as Int\n                if (scoreA > scoreB ) {\n                    return NSComparisonResult.OrderedAscending\n                }\n                if (scoreA < scoreB) {\n                    return NSComparisonResult.OrderedDescending\n                }\n                return NSComparisonResult.OrderedSame\n\n            })\n\n            //Table\u3078\u53cd\u6620\n            self.tableView.reloadData()\n            self.tableView.selectRowAtIndexPath(NSIndexPath(forRow: self.selectedIndex, inSection: 0), animated: true, scrollPosition: UITableViewScrollPosition.Middle)\n        }\n\n    }\n\n\n\n    @IBAction func clickPlusButton(sender: AnyObject) {\n\n        if (self.selectedIndex < 0 || self.players == nil) {\n            return\n        }\n        let obj: NSMutableDictionary = self.players[UInt(self.selectedIndex)] as NSMutableDictionary\n        var _id = obj[\"_id\"] as String\n\n        //Meteor\u30e1\u30bd\u30c3\u30c9\u30b3\u30fc\u30eb(Meteor\u306b\u304a\u3051\u308bRPC\u3067\u3059)\n        meteor.callMethodName(\"/players/update\", parameters: [[\"_id\" : _id ],[\"$inc\":[\"score\":5]]],\n            responseCallback:\n            { (NSDictionary response, NSErrorPointer error) in\n                println(response)\n                println(error)\n\n            }\n        )\n    }\n\n\n    //Table\u3078\u306e\u8868\u793a\u51e6\u7406\n    override func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -> UITableViewCell {\n\n        var cell = tableView.dequeueReusableCellWithIdentifier(\"testCell\", forIndexPath: indexPath) as UITableViewCell\n\n        let obj = self.players[UInt(indexPath.row)] as NSMutableDictionary?;\n        var name = obj?[\"name\"] as String\n        var score = obj?[\"score\"] as Int\n        cell.textLabel?.text = \"\\(name) point: \\(score)\"\n        return cell\n    }\n\n    override func tableView( tableView: UITableView, numberOfRowsInSection section: Int) -> Int {\n        if (self.players == nil) {\n            return 0\n        }\n\n        return Int(self.players.count())\n    }\n\n\n    override func tableView(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath) {\n        selectedIndex = indexPath.row\n    }\n\n}\n\n\n\n\u3068\u308a\u3042\u3048\u305a\u3001\u3084\u3063\u3066\u307f\u305f\u3068\u3044\u3046\u3060\u3051\u3067\u3057\u305f\u3002\n\n![lb.gif](https://qiita-image-store.s3.amazonaws.com/0/3844/de94d81b-0644-e6a6-5041-4d7b162beec4.gif \"lb.gif\")\n\n\n#\u306f\u3058\u3081\u306b\n\n\u300cMeteor\u300d\u3068\u3044\u3046\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3063\u3066\u3054\u5b58\u77e5\u3067\u3057\u3087\u3046\u304b\uff1f\n[\u3053\u3061\u3089\u306b\u3066\u7d39\u4ecb\u3055\u305b\u3066\u3044\u305f\u3060\u3044\u3066\u3044\u307e\u3059\u3002](http://qiita.com/abe00makoto/items/cf7a57face7a0e264881)\n\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0WEB\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3042\u308a\u3001\u30ea\u30a2\u30af\u30c6\u30a4\u30d6\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3059\u3002\n\n\u500b\u4eba\u7684\u306b\u4e0a\u8a18\uff12\u70b9\u304c\u81ea\u5206\u306e\u60f9\u304b\u308c\u308b\u30dd\u30a4\u30f3\u30c8\u306a\u308f\u3051\u3067\u3059\u304c\u3001\n\u554f\u984c\u306f\u57fa\u672c\u7684\u306bWebsocket\u306b\u3088\u308b\u53cc\u65b9\u5411\u901a\u4fe1\u3092\u884c\u306a\u3063\u3066\u304a\u308a\u3001\nWebAPI\u306f\u7528\u610f\u3055\u308c\u3066\u3044\u306a\u3044\u70b9\u304c\u30cd\u30a4\u30c6\u30a3\u30d6\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a2\u30d7\u30ea\u3068\u306e\u63a5\u7d9a\u306b\u554f\u984c\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u3002\n\n\u3057\u304b\u3057\u3001Meteor\u306f\u72ec\u81ea\u306bWebScoket\u4e0a\u306b[DDP](https://github.com/meteor/meteor/blob/devel/packages/ddp/DDP.md)\u3068\u3044\u3046\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3057\u304b\u3082iOS\u7528\u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u958b\u767a\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3057\u305f\u306e\u3067\u4f7f\u3063\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u3067\u3059\u304c\u3001\u307e\u305a\u306fDDP\u3063\u3066\u3069\u3093\u306a\u901a\u4fe1\u3092\u3057\u3066\u3044\u308b\u304b\u898b\u3066\u307f\u307e\u3057\u3087\u3046\n\n\n# DDP\u306e\u901a\u4fe1\u3092\u307f\u308b\n\nMeteor\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u5b8c\u4e86\u3057\u3066\u3044\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002\n\u3059\u3054\u304f\u7c21\u5358\u3067\u3059\u306e\u3067\u3001\u662f\u975e[\u3053\u3053](http://ja.discovermeteor.com/chapters/getting-started/)\u304b\u3089\u8a66\u3057\u3066\u307f\u3066\u307b\u3057\u3044\u3067\u3059\u3002\n\n\n## DDP\u3092\u76e3\u8996\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3092\u3044\u308c\u3066\u52d5\u4f5c\u3092\u898b\u3066\u307f\u308b\n[Meteor DDP Analyzer](https://github.com/arunoda/meteor-ddp-analyzer)\u3092\u5c0e\u5165\u3057\u307e\u3059\u3002\n\n```sh:install\nnpm install -g ddp-analyzer\n```\n\nnpm\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u524d\u63d0\u3067\u3059\u3002(``brew install npm``\u3068\u304b\u3067\u5165\u308c\u307e\u3057\u3087\u3046)\n\n\u9069\u5f53\u306a\u30a2\u30d7\u30ea\u3068\u3057\u3066example\u304b\u3089``leaderboard``\u3092\u5c0e\u5165\u3057\u3066\u307f\u307e\u3059\u3002\n\n\n```sh:exampleinstall\nmeteor create --example leaderboard\ncd leaderboard\n```\n\n\n\u3053\u3053\u3067meteor\u3068\u5165\u308c\u308c\u3070\u30a2\u30d7\u30ea\u304c\u8d77\u52d5\u3057\u307e\u3059\u304c\u3001DDP proxy\u3092\u9593\u306b\u631f\u3080\u305f\u3081\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5165\u529b\u3057\u307e\u3059\u3002\n\n```sh:\nexport DDP_DEFAULT_CONNECTION_URL=http://localhost:3030\nmeteor\n```\n\u3053\u308c\u3067\u3001\u30a2\u30d7\u30ea\u304c\u8d77\u52d5\u3057\u305f\u3068\u601d\u3044\u307e\u3059\u304c\u3001ddp-analyzer\u3092\u5225\u30bf\u30d6\u3067terminal\u3092\u958b\u304d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```sh:\u5225\u30bf\u30d6\u306eTerminal\u304b\u3089\u8d77\u52d5\nddp-analyzer-proxy\n```\n\u4e0a\u8a18Terminal\u304b\u3089DDP\u5165\u51fa\u529b\u306e\u30ed\u30b0\u304c\u898b\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089[http://localhost:3000](http://localhost:3000)\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\n\n![Leaderboard.png](https://qiita-image-store.s3.amazonaws.com/0/3844/67e6a6ff-c501-201b-1491-5ad3500f204a.png \"Leaderboard.png\")\n\n\u8907\u6570\u753b\u9762\u304b\u3089\u307f\u308b\u3068\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u3068\u9023\u52d5\u3057\u3066\u308b\u306e\u304c\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n```json:\u30ed\u30b0\n 2  IN   0  {\"server_id\":\"0\"}\n 2  OUT  194  {\"msg\":\"connect\",\"version\":\"1\",\"support\":[\"1\",\"pre2\",\"pre1\"]}\n 2  IN   55  {\"msg\":\"connected\",\"session\":\"SiGpwuWFvxHbBfoKT\"}\n 2  IN   5  {\"msg\":\"added\",\"collection\":\"players\",\"id\":\"e2iqRNh7WuHH2q7dv\",\"fields\":{\"name\":\"Ada Lovelace\",\"score\":30}}\n 2  IN   6  {\"msg\":\"added\",\"collection\":\"players\",\"id\":\"4XbrBYFfGhdmkne6S\",\"fields\":{\"name\":\"Grace Hopper\",\"score\":50}}\n 2  IN   11  {\"msg\":\"added\",\"collection\":\"players\",\"id\":\"KoLMxcq8cotTNMAia\",\"fields\":{\"name\":\"Marie Curie\",\"score\":40}}\n 2  IN   0  {\"msg\":\"added\",\"collection\":\"players\",\"id\":\"drmtfDKhPFZzdoKcH\",\"fields\":{\"name\":\"Carl Friedrich Gauss\",\"score\":20}}\n 2  IN   1  {\"msg\":\"added\",\"collection\":\"players\",\"id\":\"6FNTfH4yniGQyC45Q\",\"fields\":{\"name\":\"Nikola Tesla\",\"score\":55}}\n 2  IN   0  {\"msg\":\"added\",\"collection\":\"players\",\"id\":\"7NDd96fhJKgoke7Qq\",\"fields\":{\"name\":\"Claude Shannon\",\"score\":30}}\n 2  OUT  11  {\"msg\":\"sub\",\"id\":\"WSoxxLbKaxBiTBEDc\",\"name\":\"meteor_autoupdate_clientVersions\",\"params\":[]}\n 2  IN   10  {\"msg\":\"added\",\"collection\":\"meteor_autoupdate_clientVersions\",\"id\":\"P66dYxYKmH8ud6Y7i\",\"fields\":{\"current\":true}}\n 2  IN   2  {\"msg\":\"added\",\"collection\":\"meteor_autoupdate_clientVersions\",\"id\":\"version\",\"fields\":{\"version\":\"9c9878112ad755389718cb18711718b4bf0cb5e0\"}}\n 2  IN   2  {\"msg\":\"added\",\"collection\":\"meteor_autoupdate_clientVersions\",\"id\":\"version-cordova\",\"fields\":{\"version\":\"51af6ca65d12bb7019f8483d5a4f44eaaadf2ac8\",\"refreshable\":false}}\n 2  IN   4  {\"msg\":\"added\",\"collection\":\"meteor_autoupdate_clientVersions\",\"id\":\"version-refreshable\",\"fields\":{\"version\":\"96a1d99467ffa8e9f508b65850bebaf9f8396957\",\"assets\":{\"allCss\":[{\"url\":\"/de4f33c8b52b307376a0d274d7bc1dfeddede1ed.css\"}]}}}\n 2  IN   2  {\"msg\":\"ready\",\"subs\":[\"WSoxxLbKaxBiTBEDc\"]}\n 1  IN   29860  {\"msg\":\"ping\"}\n 2  OUT  19184  {\"msg\":\"method\",\"method\":\"/players/update\",\"params\":[{\"_id\":\"e2iqRNh7WuHH2q7dv\"},{\"$inc\":{\"score\":5}},{}],\"id\":\"1\"}\n 2  IN   40  {\"msg\":\"result\",\"id\":\"1\",\"result\":1}\n 1  IN   121  {\"msg\":\"changed\",\"collection\":\"players\",\"id\":\"e2iqRNh7WuHH2q7dv\",\"fields\":{\"score\":35}}\n 2  IN   44  {\"msg\":\"changed\",\"collection\":\"players\",\"id\":\"e2iqRNh7WuHH2q7dv\",\"fields\":{\"score\":35}}\n 2  IN   4  {\"msg\":\"updated\",\"methods\":[\"1\"]}\n 2  IN   10677  {\"msg\":\"ping\"}\n 2  OUT  12  {\"msg\":\"pong\"}\n ```\n \n \u5b9f\u969b\u306e\u64cd\u4f5c\u3068\u7167\u3089\u3057\u308f\u305b\u308b\u3068\u5927\u4f53\u306e\u52d5\u304d\u304c\u308f\u304b\u3063\u3066\u9762\u767d\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n \n \u30ed\u30b0\u304b\u3089\u5bdf\u3059\u308b\u306b``players``\u3068\u3044\u3046\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u304c\u3042\u308a\u3001\u30d5\u30a3\u30fc\u30eb\u30c9\u306f\n ``name``,``score``\u306e\u3088\u3046\u3067\u3059\u3002\n ``/players/update``\u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u304b\u3089\u5024\u306e\u66f4\u65b0\u3092\u884c\u3063\u3066\u3044\u308b\u307f\u305f\u3044\u3067\u3059\u306d\u3002\n \n \n \u3053\u308c\u3092iOS\u7248\u3068\u3057\u3066\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3059\u3002\n \n# ObjectiveDDP\u3092\u8a66\u3059\u3002\n\nDDP\u306e\u4ed5\u69d8\u306f\u516c\u958b\u3055\u308c\u3066\u304a\u308a\u5404\u8a00\u8a9e\u5b9f\u88c5\u304c\u3042\u308a\u307e\u3059\u3002\n\u53c2\u8003:http://meteorpedia.com/read/DDP_Clients\n\n\u3053\u306e\u3046\u3061iOS\u7248\u5b9f\u88c5\u3092\u884c\u3063\u3066\u3044\u308b[`ObjectiveDDP`](https://github.com/boundsj/ObjectiveDDP)\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\n\n \n\u5b9f\u969b\u306b\u5148\u307b\u3069\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u3042\u308b`leaderboard`\u3092ios\u30cd\u30a4\u30c6\u30a3\u30d6\u3068\u3057\u3066\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n![lb.gif](https://qiita-image-store.s3.amazonaws.com/0/3844/de94d81b-0644-e6a6-5041-4d7b162beec4.gif \"lb.gif\")\n\nhttps://github.com/m0a-ios/leaderboard_ios\n\n\u7d50\u8ad6\u304b\u3089\u8a00\u3048\u3070\u3001Meteor\u304c\u81ea\u52d5\u7684\u306b\u3084\u3063\u3066\u304f\u308c\u308b\u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3092\u624b\u52d5\u3067\u884c\u3046\u30a4\u30e1\u30fc\u30b8\u3067\u3057\u305f\u3002\n\n\u307e\u305a\u306f\u30c7\u30ea\u30b2\u30fc\u30c8\u5074\u3067DDP\u3078\u306e\u30a2\u30af\u30bb\u30b9URL\u306e\u8a2d\u5b9a\u3068\u3001\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u4eca\u56de\u306f`players`\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u5168\u516c\u958b\u3057\u3066\u3044\u308b\u3060\u3051\u306a\u306e\u3067\u3001\u305d\u308c\u3092\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u8a2d\u5b9a\u3057\u3066\u53d6\u308a\u8fbc\u3080\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\n```swift:AppDelegate.swift\n//\u7701\u7565\n@UIApplicationMain\nclass AppDelegate: UIResponder, UIApplicationDelegate {\n\n    var window: UIWindow?\n    //\u63a5\u7d9a\u5148URL\u306b\u306f\u4e8b\u524d\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u74b0\u5883\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\n    var meteorClient = initialiseMeteor(\"pre2\", \"wss://m0a_test.meteor.com/websocket\");\n\n    func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {\n    //players\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u540c\u671f\u5bfe\u8c61\u306b\u8a2d\u5b9a\n\tmeteorClient.addSubscription(\"players\");\treturn true\n    }\n    \n//\u7701\u7565\n```\n\n\u30c7\u30ea\u30b2\u30fc\u30c8\u306b\u8a2d\u5b9a\u3057\u305fMeteor\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u540c\u671f\u3055\u308c\u305fCollection\u3092\u53d6\u308a\u51fa\u3057\u3001\n\u76e3\u8996\u5bfe\u8c61\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```swift:TableViewController.swift\n\n//\u7701\u7565\n\nclass TableViewController: UITableViewController {\n    var players:M13OrderedDictionary!; //\u9806\u5e8f\u6027\u3092\u4fdd\u6301\u3059\u308bDictinary\n    var meteor:MeteorClient!; \n    var selectedIndex = -1\n    @IBOutlet weak var plusButton: UIBarButtonItem!\n    \n    \n    required init(coder aDecoder: NSCoder) {\n        self.meteor = (UIApplication.sharedApplication().delegate as AppDelegate).meteorClient\n        super.init(coder: aDecoder)\n    }\n    \n    override func viewDidLoad() {\n        super.viewDidLoad()        \n        //\u76e3\u8996\u5bfe\u8c61\u306b\u8ffd\u52a0\n        NSNotificationCenter.defaultCenter().addObserver(self, selector: \"didReceiveUpdate:\", name: \"added\", object: nil)\n        NSNotificationCenter.defaultCenter().addObserver(self, selector: \"didReceiveUpdate:\", name: \"changed\", object: nil)\n        NSNotificationCenter.defaultCenter().addObserver(self, selector: \"didReceiveUpdate:\", name: \"removed\", object: nil)\n        // Do any additional setup after loading the view, typically from a nib.\n    }\n    \n    \n    //\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u304b\u3089\u306e\u5909\u66f4\u3092\u542b\u3081\u5024\u306e\u5909\u66f4\u3092\u691c\u77e5\u3059\u308b\u3068\u5b9f\u884c\u3055\u308c\u307e\u3059\n    func didReceiveUpdate(notification:NSNotification){\n        if (self.meteor.collections.objectForKey(\"players\") != nil){\n            \n            self.players = self.meteor.collections[\"players\"]  as M13OrderedDictionary\n            \n            //\u4e26\u3073\u66ff\u3048\n            self.players = self.players.sortedByObjectsUsingComparator({ (objA, objB) -> NSComparisonResult in\n                var scoreA = objA[\"score\"] as Int\n                var scoreB = objB[\"score\"] as Int\n                if (scoreA > scoreB ) {\n                    return NSComparisonResult.OrderedAscending\n                }\n                if (scoreA < scoreB) {\n                    return NSComparisonResult.OrderedDescending\n                }\n                return NSComparisonResult.OrderedSame\n                \n            })\n\n            //Table\u3078\u53cd\u6620\n            self.tableView.reloadData()\n            self.tableView.selectRowAtIndexPath(NSIndexPath(forRow: self.selectedIndex, inSection: 0), animated: true, scrollPosition: UITableViewScrollPosition.Middle)\n        }\n        \n    }\n\n\n\n    @IBAction func clickPlusButton(sender: AnyObject) {\n    \n        if (self.selectedIndex < 0 || self.players == nil) {\n            return\n        }\n        let obj: NSMutableDictionary = self.players[UInt(self.selectedIndex)] as NSMutableDictionary\n        var _id = obj[\"_id\"] as String\n        \n        //Meteor\u30e1\u30bd\u30c3\u30c9\u30b3\u30fc\u30eb(Meteor\u306b\u304a\u3051\u308bRPC\u3067\u3059)\n        meteor.callMethodName(\"/players/update\", parameters: [[\"_id\" : _id ],[\"$inc\":[\"score\":5]]],\n            responseCallback:\n            { (NSDictionary response, NSErrorPointer error) in\n                println(response)\n                println(error)\n\n            }\n        )\n    }\n    \n    \n    //Table\u3078\u306e\u8868\u793a\u51e6\u7406\n    override func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -> UITableViewCell {\n        \n        var cell = tableView.dequeueReusableCellWithIdentifier(\"testCell\", forIndexPath: indexPath) as UITableViewCell\n        \n        let obj = self.players[UInt(indexPath.row)] as NSMutableDictionary?;\n        var name = obj?[\"name\"] as String\n        var score = obj?[\"score\"] as Int\n        cell.textLabel?.text = \"\\(name) point: \\(score)\"\n        return cell\n    }\n    \n    override func tableView( tableView: UITableView, numberOfRowsInSection section: Int) -> Int {\n        if (self.players == nil) {\n            return 0\n        }\n        \n        return Int(self.players.count())\n    }\n    \n    \n    override func tableView(tableView: UITableView, didSelectRowAtIndexPath indexPath: NSIndexPath) {\n        selectedIndex = indexPath.row\n    }\n    \n}\n\n```\n\n\u3068\u308a\u3042\u3048\u305a\u3001\u3084\u3063\u3066\u307f\u305f\u3068\u3044\u3046\u3060\u3051\u3067\u3057\u305f\u3002\n\n\n\n\n\n\n  \n \n \n", "tags": ["JavaScript", "Meteor", "Swift"]}