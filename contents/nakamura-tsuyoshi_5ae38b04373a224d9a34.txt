{"context": "\n\n\u306f\u3058\u3081\u306b\u524d\u63d0\u7684\u306a\u3053\u3068\n\n\u697d\u5929\u306e\u3088\u3046\u306a\u5e97\u5b50\u3092\u305f\u304f\u3055\u3093\u6301\u3064\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30de\u30fc\u306e\u7acb\u5834\u3067\u8003\u3048\u307e\u3059\n\n\u524d\u56de\u3001\u524d\u3005\u56de\u304b\u3089\u5f15\u304d\u7d9a\u304d\u3067\u3059\n\n\n\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u306e\u7528\u610f\n\n\u30c7\u30fc\u30bf\u69cb\u9020\n\n\nCSV\u306b\u3059\u308b\u3068\n\ncategory.csv\ncategory_id:ID,name,:LABEL\ncate1,\u30ab\u30c6\u30b4\u30ea1,category\n\n\n\nshops.csv\nshop_id:ID,name,category_id,:LABEL\nshop1,\u30b7\u30e7\u30c3\u30d7A,cate1,shop\nshop2,\u30b7\u30e7\u30c3\u30d7B,cate1,shop\n\n\n\nitems.csv\ntem_id:ID,name,shop_id,:LABEL\nitem1,\u5546\u54c1A,shop1,item\nitem2,\u5546\u54c1B,shop1,item\nitem3,\u5546\u54c1C,shop2,item\nitem4,\u5546\u54c1D,shop2,item\nitem5,\u5546\u54c1E,shop2,item\n\n\n\norders.csv\norder_id:ID,date,user_id,shop_id,category_id,price,item_id,:LABEL\norder1,2016-04-02,user1,shop1,cate1,9500,item1,order\norder2,2016-04-03,user2,shop1,cate1,1000,item1,order\norder3,2016-04-04,user3,shop1,cate1,1200,item2,order\norder4,2016-04-05,user4,shop2,cate1,15000,item3,order\n\n\n\nusers.csv\nuser_id:ID,name,email,age:int,industry,gender,:LABEL\nuser1,user_name1,1@example.com,37,\u30b5\u30fc\u30d3\u30b9\u696d,male,user\nuser2,user_name2,2@example.com,17,\u30cd\u30c3\u30c8\u30b5\u30fc\u30d3\u30b9,male,user\nuser3,user_name3,3@example.com,27,\u516c\u52d9\u54e1,female,user\nuser4,user_name4,4@example.com,44,\u516c\u52d9\u54e1,male,user\nuser5,user_name5,4@example.com,55,\u516c\u52d9\u54e1,male,user\n\n\n\nowner.csv\nowner_id:ID,name,:LABEL\nowner1,owner1,owner\nowner2,owner2,owner\n\n\n\n\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u306e\u6295\u5165\n\u279c  neo4j neo4j-import --into /usr/local/Cellar/neo4j/2.3.2/libexec/data/graph9.db --nodes category.csv --nodes items.csv --nodes orders.csv --nodes shops.csv --nodes users.csv --nodes owner.csv\nUnable to find any JVMs matching version \"1.7\".\nImporting the contents of these files into /usr/local/Cellar/neo4j/2.3.2/libexec/data/graph9.db:\nNodes:\n  /Users/a12091/neo4j/category.csv\n\n  /Users/a12091/neo4j/items.csv\n\n  /Users/a12091/neo4j/orders.csv\n\n  /Users/a12091/neo4j/shops.csv\n\n  /Users/a12091/neo4j/users.csv\n\n  /Users/a12091/neo4j/owner.csv\n\nAvailable memory:\n  Free machine memory: 18.05 MB\n  Max heap memory : 1.78 GB\n\nNodes\n[*>:??-------------------------------------------------------------------------------------|P||] 10k\nDone in 594ms\nPrepare node index\n[*DETECT:7.63 MB-------------------------------------------------------------------------------]   0\nDone in 24ms\nCalculate dense nodes\n[*>:??-----------------------------------------------------------------------------------------]   0\nDone in 12ms\nRelationships\n[*>:??-----------------------------------------------------------------------------------------]   0\nDone in 10ms\nNode --> Relationship\n[*>:??------------------------------------------|LINK-------------------|v:??------------------] 10k\nDone in 11ms\nRelationship --> Relationship\n[*>:??-----------------------------------------------------------------------------------------]   0\nDone in 12ms\nNode counts\n[*COUNT:76.29 MB-------------------------------------------------------------------------------] 10k\nDone in 133ms\nRelationship counts\n[*>:??-----------------------------------------------------------------------------------------]   0\nDone in 1ms\n\nIMPORT DONE in 2s 345ms. Imported:\n  19 nodes\n  0 relationships\n  85 properties\n\n\n\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u306f\u308b\n\nbuy\n\n\u6ce8\u6587\u3068user\u3092\u7d10\u4ed8\u3051\u308b\n\nMATCH (o:order),(u:user) \nWHERE o.user_id = u.user_id \nCREATE (u)-[:BUY]->(o);\n\n\norder\n\n\u6ce8\u6587\u30c7\u30fc\u30bf\u3068\u5546\u54c1\u3092\u7d10\u4ed8\u3051\u308b\n\nMATCH (o:order),(i:item) \nWHERE o.item_id = i.item_id \nCREATE (o)-[:ORDER]->(i);\n\n\npart of\n\n\u5546\u54c1\u3068\u30b7\u30e7\u30c3\u30d7\u3092\u7d10\u4ed8\u3051\u308b\n\nMATCH (s:shop),(i:item)\nWHERE s.shop_id = i.shop_id\nCREATE (i)-[:PART]->(s);\n\n\ncategorize\n\n\u30b7\u30e7\u30c3\u30d7\u3068\u30ab\u30c6\u30b4\u30ea\u30fc\u3092\u7d10\u4ed8\u3051\u308b\n\nMATCH (c:category),(s:shop)\nWHERE c.category_id = s.category_id\nCREATE (s)-[:CATE]->(c);\n\n\nfrend\n\n\u30b7\u30e7\u30c3\u30d7\u30aa\u30fc\u30ca\u30fc\u3068\u53cb\u4eba\u30e6\u30fc\u30b6\u3092\u7d10\u4ed8\u3051\u308b\n\nMATCH (ow:owner),(u:user)\nWHERE ow.owner_id = \"owner1\" AND u.user_id = \"user1\"\nCREATE (ow)-[:FREND]->(u);\n\nMATCH (ow:owner),(u:user)\nWHERE ow.owner_id = \"owner1\" AND u.user_id = \"user2\"\nCREATE (ow)-[:FREND]->(u);\n\n\nrecommend\n\n\u30b7\u30e7\u30c3\u30d7\u30aa\u30fc\u30ca\u30fc\u306e\u304a\u3059\u3059\u3081\u5546\u54c1\u3092\u7d10\u4ed8\u3051\n\nMATCH (ow:owner),(i:item)\nWHERE ow.owner_id = \"owner1\" AND i.item_id = \"item1\"\nCREATE (ow)-[:RECCOMEND]->(i);\n\n\nfavorite\n\n\u30e6\u30fc\u30b6\u3068\u304a\u6c17\u306b\u5165\u308a\u5546\u54c1\u3092\u7d10\u4ed8\u3051\u308b\n\nMATCH (u:user),(i:item)\nWHERE u.user_id = \"user3\" AND i.item_id = \"item2\"\nCREATE (u)-[:FAVORITE]->(i);\n\nMATCH (u:user),(i:item)\nWHERE u.user_id = \"user3\" AND i.item_id = \"item3\"\nCREATE (u)-[:FAVORITE]->(i);\n\nMATCH (u:user),(i:item)\nWHERE u.user_id = \"user4\" AND i.item_id = \"item2\"\nCREATE (u)-[:FAVORITE]->(i);\n\nMATCH (u:user),(i:item)\nWHERE u.user_id = \"user4\" AND i.item_id = \"item4\"\nCREATE (u)-[:FAVORITE]->(i);\n\nMATCH (u:user),(i:item)\nWHERE u.user_id = \"user5\" AND i.item_id = \"item5\"\nCREATE (u)-[:FAVORITE]->(i);\n\n\nowner\n\n\u30b7\u30e7\u30c3\u30d7\u30aa\u30fc\u30ca\u30fc\u3068\u30b7\u30e7\u30c3\u30d7\u3092\u7d10\u4ed8\u3051\u308b\n\nMATCH (ow:owner),(s:shop)\nWHERE ow.owner_id = \"owner1\" AND s.shop_id = \"shop1\"\nCREATE (ow)-[:OWMER]->(s);\n\n\nMATCH (ow:owner),(s:shop)\nWHERE ow.owner_id = \"owner2\" AND s.shop_id = \"shop2\"\nCREATE (ow)-[:OWMER]->(s);\n\n\n\n\u62bd\u51fa\u3057\u305f\u3044\u30c7\u30fc\u30bf\uff08\u3053\u3053\u304b\u3089\u304c\u30e1\u30a4\u30f3\uff09\n\n1:\u5185\u8a33\u3068\u3057\u3066\u30b7\u30e7\u30c3\u30d7A\u306e\u8cfc\u5165\u8005\u3067\u30aa\u30fc\u30ca\u30fc\u306e\u77e5\u4eba\u3068\u305d\u3046\u3067\u306a\u3044\u4eba\u306f\u3069\u306e\u304f\u3089\u3044\u306e\u304b\n\n\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u304b\u3089\u81ea\u5206\u3067\u30c7\u30fc\u30bf\u3092\u8ffd\u3046\u3068\n\nuser1\u3068user2\u306e\uff12\u540d\u304c\u77e5\u4eba\u3067user3\u306f\u77e5\u4eba\u3067\u306f\u306a\u3044\u4eba\u304b\u3089\u306e\u8cfc\u5165\n\n:FREND\u3068\u3044\u3046\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u8cbc\u3089\u308c\u3066\u308b\u306e\u306fuser1\u3068user3\u306e\u307f\n\u306a\u306e\u3067\u77e5\u4eba\u304c\uff12\u3067\u305d\u306e\u4ed6\u306f1\u3068\u306a\u308b\n\n\nCypher\u3067\u66f8\u3044\u3066\u307f\u308b\nneo4j-sh (?)$ MATCH (u:user)-->(o:order)-->(i:item)-->(shop {name:\"\u30b7\u30e7\u30c3\u30d7A\"})<--(ow:owner)-[:FREND]->(user)\n> RETURN count(DISTINCT user) as frend_of_owner , count(DISTINCT u) - count(DISTINCT user) as other\n> ;\n+------------------------+\n| frend_of_owner | other |\n+------------------------+\n| 2              | 1     |\n+------------------------+\n\n\n\u77e5\u4eba\u304c\uff12\u3067\u305d\u306e\u4ed6\u306f1\u3068\u306a\u308a\u4e00\u81f4\n\n\n2:favorite\uff08\u304a\u6c17\u306b\u5165\u308a\uff09\u304c\u591a\u3044\u5546\u54c1\u306f\n\n\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u304b\u3089\u8868\u306b\u307e\u3068\u3081\u3066\u307f\u308b\u3068\n\n\n\nuser\nfavorite item\n\n\n\n\nuser3\n\u5546\u54c1B\n\n\nuser3\n\u5546\u54c1C\n\n\nuser4\n\u5546\u54c1B\n\n\nuser4\n\u5546\u54c1D\n\n\nuser5\n\u5546\u54c1E\n\n\n\n\n\u5546\u54c1B\u304cuser3\u3068user4\u304b\u3089\u304a\u6c17\u306b\u5165\u308a\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u306e\u30672\u30e6\u30fc\u30b6\u304cfavorite\n\u5546\u54c1C\u304cuser3\u304b\u3089\u304a\u6c17\u306b\u5165\u308a\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u306e\u30671\u30e6\u30fc\u30b6\u304cfavorite\n\u5546\u54c1D\u304cuser4\u304b\u3089\u304a\u6c17\u306b\u5165\u308a\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u306e\u30671\u30e6\u30fc\u30b6\u304cfavorite\n\u5546\u54c1E\u304cuser5\u304b\u3089\u304a\u6c17\u306b\u5165\u308a\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u306e\u30671\u30e6\u30fc\u30b6\u304cfavorite\n\n\u304c\u7b54\u3048\n\nCypher\u3067\u66f8\u3044\u3066\u307f\u308b\nneo4j-sh (?)$ MATCH (u:user)-[:FAVORITE]->(i:item)\n> RETURN i.name,count(*)\n> ;\n+-------------------+\n| i.name | count(*) |\n+-------------------+\n| \"\u5546\u54c1E\"  | 1        |\n| \"\u5546\u54c1B\"  | 2        |\n| \"\u5546\u54c1D\"  | 1        |\n| \"\u5546\u54c1C\"  | 1        |\n+-------------------+\n4 rows\n37 ms\n\n\n\ncount(*)\u306f\u30e6\u30fc\u30b6\u6570\u3092\u8868\u3059\n\u305d\u308c\u305e\u308c\u4e00\u81f4\n\n\n3:\u5546\u54c1\u3092favorite(\u304a\u6c17\u306b\u5165\u308a)\u3092\u3057\u3066\u8a72\u5f53\u306e\u5546\u54c1\u3092\u8cfc\u5165\u3057\u305f\u30e6\u30fc\u30b6\u6570\u306f\uff1f\n\n\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u304b\u3089\u8868\u306b\u307e\u3068\u3081\u3066\u307f\u308b\u3068\n\n\n\n\u5546\u54c1\nfavorite\n\u8cfc\u5165\u3057\u305f\u304b\n\u8cfc\u5165user\n\n\n\n\n\u5546\u54c1A\nx\n\u25cb\nuser1\n\n\n\u5546\u54c1A\nx\n\u25cb\nuser2\n\n\n\u5546\u54c1B\n\u25cb\n\u25cb\nuser3\n\n\n\u5546\u54c1B\n\u25cb\nx\nuser4\n\n\n\u5546\u54c1C\n\u25cb\nx\nuser3\n\n\n\u5546\u54c1C\nx\n\u25cb\nuser4\n\n\n\u5546\u54c1D\n\u25cb\nx\nuser4\n\n\n\u5546\u54c1E\n\u25cb\nx\nuser5\n\n\n\n\n\nfavorite=\u25cb\u3067\u4e14\u3064\u8cfc\u5165\u3057\u305f\u304b=\u25cb\u3092\u63a2\u3059\nuser\uff13\u3060\u3051\u304c\u5546\u54c1B\u3092favorite\u3057\u3066\u8cfc\u5165\u3057\u3066\u3044\u308b\u306e\u30671\u30e6\u30fc\u30b6\u304c\u7b54\u3048\n\n\n\u30d3\u30b8\u30e5\u30a2\u30e9\u30a4\u30ba\u3057\u3066\u307f\u308b\n\n\nCypher\u3067\u66f8\u3044\u3066\u307f\u308b \u30d1\u30bf\u30fc\u30f31\nneo4j-sh (?)$ MATCH (u:user)-[:FAVORITE]->(i:item)<--(o:order)<--(u:user)\n> RETURN count(*);\n+----------+\n| count(*) |\n+----------+\n| 1        |\n+----------+\n\n\nCypher\u3067\u66f8\u3044\u3066\u307f\u308b \u30d1\u30bf\u30fc\u30f32\nneo4j-sh (?)$ MATCH (u:user)-[:FAVORITE]->(i:item),(u:user)-->(o:order)-->(i:item)\n> RETURN COUNT(*);\n+----------+\n| COUNT(*) |\n+----------+\n| 1        |\n+----------+\n1 row\n82 ms\n\n\nCypher\u3067\u66f8\u3044\u3066\u307f\u308b \u30d1\u30bf\u30fc\u30f33\nneo4j-sh (?)$ MATCH (u:user)-->(o:order)-->(i:item)\n> WHERE u-[:FAVORITE]->i\n> RETURN count(*);\n+----------+\n| count(*) |\n+----------+\n| 1        |\n+----------+\n1 row\n109 ms\n\n\n\ncount(*)\u306f\u30e6\u30fc\u30b6\u6570\u3092\u8868\u3059\n1\u30e6\u30fc\u30b6\u3068\u306a\u308a\u4e00\u81f4\u3002\u8272\u3005\u3068\u66f8\u304d\u65b9\u304c\u3042\u308b\n\n\n4:\u5546\u54c1\u3092favoite(\u304a\u6c17\u306b\u5165\u308a)\u3092\u3057\u3066\u306a\u3044\u3051\u3069\u8cfc\u5165\u3057\u305f\u30e6\u30fc\u30b6\u6570\u306f\uff1f\n\n\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u304b\u3089\u8868\u306b\u307e\u3068\u3081\u3066\u307f\u308b\u3068\n\n\n\n\u5546\u54c1\nfavorite\n\u8cfc\u5165\u3057\u305f\u304b\n\u8cfc\u5165user\n\n\n\n\n\u5546\u54c1A\nx\n\u25cb\nuser1\n\n\n\u5546\u54c1A\nx\n\u25cb\nuser2\n\n\n\u5546\u54c1B\n\u25cb\n\u25cb\nuser3\n\n\n\u5546\u54c1B\n\u25cb\nx\nuser4\n\n\n\u5546\u54c1C\n\u25cb\nx\nuser3\n\n\n\u5546\u54c1C\nx\n\u25cb\nuser4\n\n\n\u5546\u54c1D\n\u25cb\nx\nuser4\n\n\n\u5546\u54c1E\n\u25cb\nx\nuser5\n\n\n\n\n\n\u8cfc\u5165\u3057\u305f\u304b=\u25cb\u3067\u4e14\u3064favorite=x\u3092\u63a2\u3059\n\u30e6\u30fc\u30b6\u306fuser1,user2,user4\u306ffavorite\u3057\u3066\u3044\u306a\u304c\u8cfc\u5165\u3057\u3066\u3044\u308b\u306e\u30673\u30e6\u30fc\u30b6\u304c\u7b54\u3048\n\n\n\u30d3\u30b8\u30e5\u30a2\u30e9\u30a4\u30ba\u3057\u3066\u307f\u308b\n\n\nCypher\u3067\u66f8\u3044\u3066\u307f\u308b\nneo4j-sh (?)$ MATCH (u:user)-->(o:order)-->(i:item)\n> WHERE NOT u-[:FAVORITE]->i\n> RETURN count(*)\n> ;\n+----------+\n| count(*) |\n+----------+\n| 3        |\n+----------+\n1 row\n81 ms\n\n\n\ncount(*)\u306f\u30e6\u30fc\u30b6\u6570\u3092\u8868\u3059\n3\u30e6\u30fc\u30b6\u3068\u306a\u308a\u4e00\u81f4\n\n\n5:\u5546\u54c1\u3092favorite\uff08\u304a\u6c17\u306b\u5165\u308a\uff09\u3092\u3057\u305f\u304c\u8a72\u5f53\u306e\u5546\u54c1\u3092\u8cb7\u308f\u306a\u304b\u3063\u305f\u30e6\u30fc\u30b6\u6570\u306f\uff1f\n\n\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u304b\u3089\u8868\u306b\u307e\u3068\u3081\u3066\u307f\u308b\u3068\n\n\n\n\u5546\u54c1\nfavorite\n\u8cfc\u5165\u3057\u305f\u304b\n\u8cfc\u5165user\n\n\n\n\n\u5546\u54c1A\nx\n\u25cb\nuser1\n\n\n\u5546\u54c1A\nx\n\u25cb\nuser2\n\n\n\u5546\u54c1B\n\u25cb\n\u25cb\nuser3\n\n\n\u5546\u54c1B\n\u25cb\nx\nuser4\n\n\n\u5546\u54c1C\n\u25cb\nx\nuser3\n\n\n\u5546\u54c1C\nx\n\u25cb\nuser4\n\n\n\u5546\u54c1D\n\u25cb\nx\nuser4\n\n\n\u5546\u54c1E\n\u25cb\nx\nuser5\n\n\n\n\n\nfavorite=\u25cb\u3067\u4e14\u3064\u8cfc\u5165\u3057\u305f\u304b=x\u3092\u63a2\u3059\nfavorite(\u304a\u6c17\u306b\u5165\u308a)\u3092\u3057\u305f\u304c\u3001\u8cfc\u5165\u3057\u3066\u3044\u306a\u3044\u30e6\u30cb\u30fc\u30af\u30e6\u30fc\u30b6\u306fuser3,user4,user5\u30673\u30e6\u30fc\u30b6\u304c\u7b54\u3048\n\n\n\u30d3\u30b8\u30e5\u30a2\u30e9\u30a4\u30ba\u3057\u3066\u307f\u308b\n\n\n\u6ce8\u610f\uff09\u5546\u54c1B\u306fuser3\u304b\u3089favorite\u3055\u308c\u3001\u8cfc\u5165\u3057\u3066\u3044\u308b\u304c\u3001user4\u304b\u3089favorite\u3055\u308c\u3066\u8cfc\u5165\u3055\u308c\u3066\u3044\u306a\u3044\n\n\nCypher\u3067\u66f8\u3044\u3066\u307f\u308b\nneo4j-sh (?)$ MATCH (u:user)-[:FAVORITE]->(i:item),(o:order)\n> WHERE NOT o<--u\n> RETURN count(DISTINCT u);\n+-------------------+\n| count(DISTINCT u) |\n+-------------------+\n| 3                 |\n+-------------------+\n1 row\n89 ms\n\n\n\ncount(*)\u306f\u30e6\u30fc\u30b6\u6570\u3092\u8868\u3059\n3\u30e6\u30fc\u30b6\u3068\u306a\u308a\u4e00\u81f4\n\n\n\u307e\u3068\u3081\u3001\u96d1\u611f\u7684\u306a\u3082\u306e\n\n\u3061\u3087\u3063\u3068\u8907\u96d1\u3081\u306b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5f35\u3063\u3066\u8272\u3005\u306a\u6761\u4ef6\u3067\u62bd\u51fa\u3057\u3066\u307f\u305f\u304c\u3001\u307e\u3041\u306a\u3093\u3068\u306a\u304f\u3067\u304d\u305f\nWeb\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u304c\u3042\u3063\u305f\u304a\u304b\u3052\u3067\u7406\u89e3\u304c\u30b9\u30e0\u30fc\u30ba\u3060\u3063\u305f\n\n\n\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3082\u308f\u304b\u308a\u3084\u3059\u304b\u3063\u305f\n\n\n\u30b0\u30e9\u30d5DB\u3092\u4f7f\u3046\u3053\u3068\u3067\u5272\u3068\u6b32\u3057\u3044\u96c6\u8a08\u30c7\u30fc\u30bf\u304c\u7c21\u5358\u306b\u62bd\u51fa\u3067\u304d\u308b\u3068\u308f\u304b\u3063\u305f\n\u30d7\u30ed\u30c0\u30af\u30b8\u30e7\u30f3\u3067\u306fmysql\u3092\u4f7f\u3063\u3066\u3066\u3001\u3069\u3046\u3044\u3046\u65b9\u6cd5\u3001\u30bf\u30a4\u30df\u30f3\u30b0\u3067neo4j\u3078\u9023\u643a\u3059\u308b\u90e8\u5206\u3067\u307e\u3060\u8003\u3048\u306a\u304d\u3083\u3044\u3051\u306a\u3044\u306a\u3041\u3068\u611f\u3058\u305f\n\n\n\u591c\u9593\u30d0\u30c3\u30c1\u304b\u306a\u3041\u3002\u3002\u3002\u6bce\u6669\u591c\u9593\u30d0\u30c3\u30c1\u3067slave\u306emysql\u306e\u30c7\u30fc\u30bf\u3092neo4j\u3078\u7a81\u3063\u8fbc\u3080\u7684\u306a\n\n\nCypher\u3067\u30b5\u30d6\u30af\u30a8\u30ea\u7684\u306a\u3082\u306e\u304c\u4f7f\u3048\u306a\u3044\u3063\u307d\u3044\u306e\u3067\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u91cd\u8981\u3060\u3068\u611f\u3058\u305f\nCypher\u306b\u306fEXPLAIN,PROFILE\u304c\u3042\u308b\u306e\u3067\u81ea\u5206\u306eQL\u306e\u8a08\u6e2c\u304c\u51fa\u6765\u308b\u3002\u30d7\u30ed\u30c0\u30af\u30b8\u30e7\u30f3\u3068\u304b\u306e\u5927\u91cf\u306e\u30c7\u30fc\u30bf\u3092\u6271\u3046\u969b\u306b\u5fc5\u8981\u306b\u306a\u3063\u3066\u304f\u308b\u3060\u308d\u3046\u306a\n\u30b9\u30b1\u30fc\u30eb\u306b\u95a2\u3059\u308b\u3082\u306e\u3082\u4e00\u901a\u308a\u3042\u308b\u3063\u307d\u3044\u306a\u3041\u3000http://neo4j.com/docs/stable/ha.html\n\n\u53ef\u80fd\u6027\u306f\u3044\u308d\u3044\u308d\u3042\u308b\u306d\n\n\n\u305f\u3060\u8ca0\u8377\u306b\u5bfe\u3059\u308b\u30ce\u30a6\u30cf\u30a6\u7b49\u304c\u5c11\u306a\u3044\u306e\u3067\u3044\u304d\u306a\u308a\u30e6\u30fc\u30b6\u304c\u4f7f\u3046\u30b5\u30fc\u30d3\u30b9\u306b\u306f\u4f7f\u3046\u306e\u306f\u6016\u3044\u304b\u306a\n\u793e\u5185\u7684\u306a\u5206\u6790\u306b\u307e\u305a\u306f\u4f7f\u3063\u3066\u307f\u308b\u304c\u826f\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3068\n\n\n\n# \u306f\u3058\u3081\u306b\u524d\u63d0\u7684\u306a\u3053\u3068\n* \u697d\u5929\u306e\u3088\u3046\u306a\u5e97\u5b50\u3092\u305f\u304f\u3055\u3093\u6301\u3064\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30de\u30fc\u306e\u7acb\u5834\u3067\u8003\u3048\u307e\u3059\n* [\u524d\u56de](http://qiita.com/nakamura-tsuyoshi/items/4a0cbf20ce9ba4c934b9)\u3001[\u524d\u3005\u56de](http://qiita.com/nakamura-tsuyoshi/items/d284ad1eb7ca848d5d79)\u304b\u3089\u5f15\u304d\u7d9a\u304d\u3067\u3059\n\n\n# \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u306e\u7528\u610f\n## \u30c7\u30fc\u30bf\u69cb\u9020\n![ccc.png](https://qiita-image-store.s3.amazonaws.com/0/106937/e7252d07-0509-835e-68b3-2ffd07330d64.png)\n\n\n\n## CSV\u306b\u3059\u308b\u3068\n\n```category.csv\ncategory_id:ID,name,:LABEL\ncate1,\u30ab\u30c6\u30b4\u30ea1,category\n```\n\n```shops.csv\nshop_id:ID,name,category_id,:LABEL\nshop1,\u30b7\u30e7\u30c3\u30d7A,cate1,shop\nshop2,\u30b7\u30e7\u30c3\u30d7B,cate1,shop\n```\n\n```items.csv\ntem_id:ID,name,shop_id,:LABEL\nitem1,\u5546\u54c1A,shop1,item\nitem2,\u5546\u54c1B,shop1,item\nitem3,\u5546\u54c1C,shop2,item\nitem4,\u5546\u54c1D,shop2,item\nitem5,\u5546\u54c1E,shop2,item\n```\n\n```orders.csv\norder_id:ID,date,user_id,shop_id,category_id,price,item_id,:LABEL\norder1,2016-04-02,user1,shop1,cate1,9500,item1,order\norder2,2016-04-03,user2,shop1,cate1,1000,item1,order\norder3,2016-04-04,user3,shop1,cate1,1200,item2,order\norder4,2016-04-05,user4,shop2,cate1,15000,item3,order\n```\n\n```users.csv\nuser_id:ID,name,email,age:int,industry,gender,:LABEL\nuser1,user_name1,1@example.com,37,\u30b5\u30fc\u30d3\u30b9\u696d,male,user\nuser2,user_name2,2@example.com,17,\u30cd\u30c3\u30c8\u30b5\u30fc\u30d3\u30b9,male,user\nuser3,user_name3,3@example.com,27,\u516c\u52d9\u54e1,female,user\nuser4,user_name4,4@example.com,44,\u516c\u52d9\u54e1,male,user\nuser5,user_name5,4@example.com,55,\u516c\u52d9\u54e1,male,user\n```\n\n```owner.csv\nowner_id:ID,name,:LABEL\nowner1,owner1,owner\nowner2,owner2,owner\n```\n\n\n## \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u306e\u6295\u5165\n```\n\u279c  neo4j neo4j-import --into /usr/local/Cellar/neo4j/2.3.2/libexec/data/graph9.db --nodes category.csv --nodes items.csv --nodes orders.csv --nodes shops.csv --nodes users.csv --nodes owner.csv\nUnable to find any JVMs matching version \"1.7\".\nImporting the contents of these files into /usr/local/Cellar/neo4j/2.3.2/libexec/data/graph9.db:\nNodes:\n  /Users/a12091/neo4j/category.csv\n\n  /Users/a12091/neo4j/items.csv\n\n  /Users/a12091/neo4j/orders.csv\n\n  /Users/a12091/neo4j/shops.csv\n\n  /Users/a12091/neo4j/users.csv\n\n  /Users/a12091/neo4j/owner.csv\n\nAvailable memory:\n  Free machine memory: 18.05 MB\n  Max heap memory : 1.78 GB\n\nNodes\n[*>:??-------------------------------------------------------------------------------------|P||] 10k\nDone in 594ms\nPrepare node index\n[*DETECT:7.63 MB-------------------------------------------------------------------------------]   0\nDone in 24ms\nCalculate dense nodes\n[*>:??-----------------------------------------------------------------------------------------]   0\nDone in 12ms\nRelationships\n[*>:??-----------------------------------------------------------------------------------------]   0\nDone in 10ms\nNode --> Relationship\n[*>:??------------------------------------------|LINK-------------------|v:??------------------] 10k\nDone in 11ms\nRelationship --> Relationship\n[*>:??-----------------------------------------------------------------------------------------]   0\nDone in 12ms\nNode counts\n[*COUNT:76.29 MB-------------------------------------------------------------------------------] 10k\nDone in 133ms\nRelationship counts\n[*>:??-----------------------------------------------------------------------------------------]   0\nDone in 1ms\n\nIMPORT DONE in 2s 345ms. Imported:\n  19 nodes\n  0 relationships\n  85 properties\n```\n\n## \u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u306f\u308b\n### buy\n* \u6ce8\u6587\u3068user\u3092\u7d10\u4ed8\u3051\u308b\n\n```\nMATCH (o:order),(u:user) \nWHERE o.user_id = u.user_id \nCREATE (u)-[:BUY]->(o);\n```\n\n### order\n* \u6ce8\u6587\u30c7\u30fc\u30bf\u3068\u5546\u54c1\u3092\u7d10\u4ed8\u3051\u308b\n\n```\nMATCH (o:order),(i:item) \nWHERE o.item_id = i.item_id \nCREATE (o)-[:ORDER]->(i);\n```\n\n### part of\n* \u5546\u54c1\u3068\u30b7\u30e7\u30c3\u30d7\u3092\u7d10\u4ed8\u3051\u308b\n\n```\nMATCH (s:shop),(i:item)\nWHERE s.shop_id = i.shop_id\nCREATE (i)-[:PART]->(s);\n```\n\n### categorize\n* \u30b7\u30e7\u30c3\u30d7\u3068\u30ab\u30c6\u30b4\u30ea\u30fc\u3092\u7d10\u4ed8\u3051\u308b\n\n```\nMATCH (c:category),(s:shop)\nWHERE c.category_id = s.category_id\nCREATE (s)-[:CATE]->(c);\n```\n\n### frend\n* \u30b7\u30e7\u30c3\u30d7\u30aa\u30fc\u30ca\u30fc\u3068\u53cb\u4eba\u30e6\u30fc\u30b6\u3092\u7d10\u4ed8\u3051\u308b\n\n```\nMATCH (ow:owner),(u:user)\nWHERE ow.owner_id = \"owner1\" AND u.user_id = \"user1\"\nCREATE (ow)-[:FREND]->(u);\n\nMATCH (ow:owner),(u:user)\nWHERE ow.owner_id = \"owner1\" AND u.user_id = \"user2\"\nCREATE (ow)-[:FREND]->(u);\n```\n\n### recommend\n* \u30b7\u30e7\u30c3\u30d7\u30aa\u30fc\u30ca\u30fc\u306e\u304a\u3059\u3059\u3081\u5546\u54c1\u3092\u7d10\u4ed8\u3051\n\n```\nMATCH (ow:owner),(i:item)\nWHERE ow.owner_id = \"owner1\" AND i.item_id = \"item1\"\nCREATE (ow)-[:RECCOMEND]->(i);\n```\n\n### favorite\n* \u30e6\u30fc\u30b6\u3068\u304a\u6c17\u306b\u5165\u308a\u5546\u54c1\u3092\u7d10\u4ed8\u3051\u308b\n\n```\nMATCH (u:user),(i:item)\nWHERE u.user_id = \"user3\" AND i.item_id = \"item2\"\nCREATE (u)-[:FAVORITE]->(i);\n\nMATCH (u:user),(i:item)\nWHERE u.user_id = \"user3\" AND i.item_id = \"item3\"\nCREATE (u)-[:FAVORITE]->(i);\n\nMATCH (u:user),(i:item)\nWHERE u.user_id = \"user4\" AND i.item_id = \"item2\"\nCREATE (u)-[:FAVORITE]->(i);\n\nMATCH (u:user),(i:item)\nWHERE u.user_id = \"user4\" AND i.item_id = \"item4\"\nCREATE (u)-[:FAVORITE]->(i);\n\nMATCH (u:user),(i:item)\nWHERE u.user_id = \"user5\" AND i.item_id = \"item5\"\nCREATE (u)-[:FAVORITE]->(i);\n```\n\n### owner\n* \u30b7\u30e7\u30c3\u30d7\u30aa\u30fc\u30ca\u30fc\u3068\u30b7\u30e7\u30c3\u30d7\u3092\u7d10\u4ed8\u3051\u308b\n\n```\nMATCH (ow:owner),(s:shop)\nWHERE ow.owner_id = \"owner1\" AND s.shop_id = \"shop1\"\nCREATE (ow)-[:OWMER]->(s);\n\n\nMATCH (ow:owner),(s:shop)\nWHERE ow.owner_id = \"owner2\" AND s.shop_id = \"shop2\"\nCREATE (ow)-[:OWMER]->(s);\n\n```\n\n# \u62bd\u51fa\u3057\u305f\u3044\u30c7\u30fc\u30bf\uff08\u3053\u3053\u304b\u3089\u304c\u30e1\u30a4\u30f3\uff09\n## 1:\u5185\u8a33\u3068\u3057\u3066\u30b7\u30e7\u30c3\u30d7A\u306e\u8cfc\u5165\u8005\u3067\u30aa\u30fc\u30ca\u30fc\u306e\u77e5\u4eba\u3068\u305d\u3046\u3067\u306a\u3044\u4eba\u306f\u3069\u306e\u304f\u3089\u3044\u306e\u304b\n### \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u304b\u3089\u81ea\u5206\u3067\u30c7\u30fc\u30bf\u3092\u8ffd\u3046\u3068\n* user1\u3068user2\u306e\uff12\u540d\u304c\u77e5\u4eba\u3067user3\u306f\u77e5\u4eba\u3067\u306f\u306a\u3044\u4eba\u304b\u3089\u306e\u8cfc\u5165\n* `:FREND`\u3068\u3044\u3046\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u8cbc\u3089\u308c\u3066\u308b\u306e\u306fuser1\u3068user3\u306e\u307f\n* \u306a\u306e\u3067\u77e5\u4eba\u304c\uff12\u3067\u305d\u306e\u4ed6\u306f1\u3068\u306a\u308b\n\n### Cypher\u3067\u66f8\u3044\u3066\u307f\u308b\n```\nneo4j-sh (?)$ MATCH (u:user)-->(o:order)-->(i:item)-->(shop {name:\"\u30b7\u30e7\u30c3\u30d7A\"})<--(ow:owner)-[:FREND]->(user)\n> RETURN count(DISTINCT user) as frend_of_owner , count(DISTINCT u) - count(DISTINCT user) as other\n> ;\n+------------------------+\n| frend_of_owner | other |\n+------------------------+\n| 2              | 1     |\n+------------------------+\n```\n* \u77e5\u4eba\u304c\uff12\u3067\u305d\u306e\u4ed6\u306f1\u3068\u306a\u308a\u4e00\u81f4\n\n## 2:favorite\uff08\u304a\u6c17\u306b\u5165\u308a\uff09\u304c\u591a\u3044\u5546\u54c1\u306f\n### \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u304b\u3089\u8868\u306b\u307e\u3068\u3081\u3066\u307f\u308b\u3068\n|user|favorite item|\n|:---|:---:|\n|user3|\u5546\u54c1B|\n|user3|\u5546\u54c1C|\n|user4|\u5546\u54c1B|\n|user4|\u5546\u54c1D|\n|user5|\u5546\u54c1E|\n\n* \u5546\u54c1B\u304cuser3\u3068user4\u304b\u3089\u304a\u6c17\u306b\u5165\u308a\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u306e\u30672\u30e6\u30fc\u30b6\u304cfavorite\n* \u5546\u54c1C\u304cuser3\u304b\u3089\u304a\u6c17\u306b\u5165\u308a\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u306e\u30671\u30e6\u30fc\u30b6\u304cfavorite\n* \u5546\u54c1D\u304cuser4\u304b\u3089\u304a\u6c17\u306b\u5165\u308a\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u306e\u30671\u30e6\u30fc\u30b6\u304cfavorite\n* \u5546\u54c1E\u304cuser5\u304b\u3089\u304a\u6c17\u306b\u5165\u308a\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u306e\u30671\u30e6\u30fc\u30b6\u304cfavorite\n\n\u304c\u7b54\u3048\n\n### Cypher\u3067\u66f8\u3044\u3066\u307f\u308b\n```\nneo4j-sh (?)$ MATCH (u:user)-[:FAVORITE]->(i:item)\n> RETURN i.name,count(*)\n> ;\n+-------------------+\n| i.name | count(*) |\n+-------------------+\n| \"\u5546\u54c1E\"  | 1        |\n| \"\u5546\u54c1B\"  | 2        |\n| \"\u5546\u54c1D\"  | 1        |\n| \"\u5546\u54c1C\"  | 1        |\n+-------------------+\n4 rows\n37 ms\n```\n* `count(*)`\u306f\u30e6\u30fc\u30b6\u6570\u3092\u8868\u3059\n* \u305d\u308c\u305e\u308c\u4e00\u81f4\n\n## 3:\u5546\u54c1\u3092favorite(\u304a\u6c17\u306b\u5165\u308a)\u3092\u3057\u3066\u8a72\u5f53\u306e\u5546\u54c1\u3092\u8cfc\u5165\u3057\u305f\u30e6\u30fc\u30b6\u6570\u306f\uff1f\n### \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u304b\u3089\u8868\u306b\u307e\u3068\u3081\u3066\u307f\u308b\u3068\n|\u5546\u54c1|favorite|\u8cfc\u5165\u3057\u305f\u304b|\u8cfc\u5165user|\n|:---|:---:|:---:|:---:|\n|\u5546\u54c1A|x|\u25cb|user1|\n|\u5546\u54c1A|x|\u25cb|user2|\n|\u5546\u54c1B|\u25cb|\u25cb|user3|\n|\u5546\u54c1B|\u25cb|x|user4|\n|\u5546\u54c1C|\u25cb|x|user3|\n|\u5546\u54c1C|x|\u25cb|user4|\n|\u5546\u54c1D|\u25cb|x|user4|\n|\u5546\u54c1E|\u25cb|x|user5|\n\n* `favorite=\u25cb`\u3067\u4e14\u3064`\u8cfc\u5165\u3057\u305f\u304b=\u25cb`\u3092\u63a2\u3059\n* user\uff13\u3060\u3051\u304c\u5546\u54c1B\u3092favorite\u3057\u3066\u8cfc\u5165\u3057\u3066\u3044\u308b\u306e\u30671\u30e6\u30fc\u30b6\u304c\u7b54\u3048\n\n### \u30d3\u30b8\u30e5\u30a2\u30e9\u30a4\u30ba\u3057\u3066\u307f\u308b\n![Neo4j-111.png](https://qiita-image-store.s3.amazonaws.com/0/106937/dc3802e9-2e84-788c-784a-d2a3424adef7.png)\n\n\n### Cypher\u3067\u66f8\u3044\u3066\u307f\u308b \u30d1\u30bf\u30fc\u30f31\n```\nneo4j-sh (?)$ MATCH (u:user)-[:FAVORITE]->(i:item)<--(o:order)<--(u:user)\n> RETURN count(*);\n+----------+\n| count(*) |\n+----------+\n| 1        |\n+----------+\n```\n\n### Cypher\u3067\u66f8\u3044\u3066\u307f\u308b \u30d1\u30bf\u30fc\u30f32\n```\nneo4j-sh (?)$ MATCH (u:user)-[:FAVORITE]->(i:item),(u:user)-->(o:order)-->(i:item)\n> RETURN COUNT(*);\n+----------+\n| COUNT(*) |\n+----------+\n| 1        |\n+----------+\n1 row\n82 ms\n```\n\n### Cypher\u3067\u66f8\u3044\u3066\u307f\u308b \u30d1\u30bf\u30fc\u30f33\n```\nneo4j-sh (?)$ MATCH (u:user)-->(o:order)-->(i:item)\n> WHERE u-[:FAVORITE]->i\n> RETURN count(*);\n+----------+\n| count(*) |\n+----------+\n| 1        |\n+----------+\n1 row\n109 ms\n```\n* `count(*)`\u306f\u30e6\u30fc\u30b6\u6570\u3092\u8868\u3059\n* 1\u30e6\u30fc\u30b6\u3068\u306a\u308a\u4e00\u81f4\u3002\u8272\u3005\u3068\u66f8\u304d\u65b9\u304c\u3042\u308b\n\n\n\n## 4:\u5546\u54c1\u3092favoite(\u304a\u6c17\u306b\u5165\u308a)\u3092\u3057\u3066\u306a\u3044\u3051\u3069\u8cfc\u5165\u3057\u305f\u30e6\u30fc\u30b6\u6570\u306f\uff1f\n### \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u304b\u3089\u8868\u306b\u307e\u3068\u3081\u3066\u307f\u308b\u3068\n|\u5546\u54c1|favorite|\u8cfc\u5165\u3057\u305f\u304b|\u8cfc\u5165user|\n|:---|:---:|:---:|:---:|\n|\u5546\u54c1A|x|\u25cb|user1|\n|\u5546\u54c1A|x|\u25cb|user2|\n|\u5546\u54c1B|\u25cb|\u25cb|user3|\n|\u5546\u54c1B|\u25cb|x|user4|\n|\u5546\u54c1C|\u25cb|x|user3|\n|\u5546\u54c1C|x|\u25cb|user4|\n|\u5546\u54c1D|\u25cb|x|user4|\n|\u5546\u54c1E|\u25cb|x|user5|\n\n* `\u8cfc\u5165\u3057\u305f\u304b=\u25cb`\u3067\u4e14\u3064`favorite=x`\u3092\u63a2\u3059\n* \u30e6\u30fc\u30b6\u306fuser1,user2,user4\u306ffavorite\u3057\u3066\u3044\u306a\u304c\u8cfc\u5165\u3057\u3066\u3044\u308b\u306e\u30673\u30e6\u30fc\u30b6\u304c\u7b54\u3048\n\n### \u30d3\u30b8\u30e5\u30a2\u30e9\u30a4\u30ba\u3057\u3066\u307f\u308b\n![Neo4j.png](https://qiita-image-store.s3.amazonaws.com/0/106937/540a5501-6b14-cd29-e2f1-1bc998b2d714.png)\n\n\n### Cypher\u3067\u66f8\u3044\u3066\u307f\u308b\n```\nneo4j-sh (?)$ MATCH (u:user)-->(o:order)-->(i:item)\n> WHERE NOT u-[:FAVORITE]->i\n> RETURN count(*)\n> ;\n+----------+\n| count(*) |\n+----------+\n| 3        |\n+----------+\n1 row\n81 ms\n```\n* `count(*)`\u306f\u30e6\u30fc\u30b6\u6570\u3092\u8868\u3059\n* 3\u30e6\u30fc\u30b6\u3068\u306a\u308a\u4e00\u81f4\n\n\n\n## 5:\u5546\u54c1\u3092favorite\uff08\u304a\u6c17\u306b\u5165\u308a\uff09\u3092\u3057\u305f\u304c\u8a72\u5f53\u306e\u5546\u54c1\u3092\u8cb7\u308f\u306a\u304b\u3063\u305f\u30e6\u30fc\u30b6\u6570\u306f\uff1f\n### \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u304b\u3089\u8868\u306b\u307e\u3068\u3081\u3066\u307f\u308b\u3068\n|\u5546\u54c1|favorite|\u8cfc\u5165\u3057\u305f\u304b|\u8cfc\u5165user|\n|:---|:---:|:---:|:---:|\n|\u5546\u54c1A|x|\u25cb|user1|\n|\u5546\u54c1A|x|\u25cb|user2|\n|\u5546\u54c1B|\u25cb|\u25cb|user3|\n|\u5546\u54c1B|\u25cb|x|user4|\n|\u5546\u54c1C|\u25cb|x|user3|\n|\u5546\u54c1C|x|\u25cb|user4|\n|\u5546\u54c1D|\u25cb|x|user4|\n|\u5546\u54c1E|\u25cb|x|user5|\n\n* `favorite=\u25cb`\u3067\u4e14\u3064`\u8cfc\u5165\u3057\u305f\u304b=x`\u3092\u63a2\u3059\n* favorite(\u304a\u6c17\u306b\u5165\u308a)\u3092\u3057\u305f\u304c\u3001\u8cfc\u5165\u3057\u3066\u3044\u306a\u3044\u30e6\u30cb\u30fc\u30af\u30e6\u30fc\u30b6\u306fuser3,user4,user5\u30673\u30e6\u30fc\u30b6\u304c\u7b54\u3048\n\n### \u30d3\u30b8\u30e5\u30a2\u30e9\u30a4\u30ba\u3057\u3066\u307f\u308b\n![Neo4j-1.png](https://qiita-image-store.s3.amazonaws.com/0/106937/80dd7565-d17d-cd6b-b36e-c4a167cf9f4e.png)\n\n* \u6ce8\u610f\uff09\u5546\u54c1B\u306fuser3\u304b\u3089favorite\u3055\u308c\u3001\u8cfc\u5165\u3057\u3066\u3044\u308b\u304c\u3001user4\u304b\u3089favorite\u3055\u308c\u3066\u8cfc\u5165\u3055\u308c\u3066\u3044\u306a\u3044\n\n### Cypher\u3067\u66f8\u3044\u3066\u307f\u308b\n```\nneo4j-sh (?)$ MATCH (u:user)-[:FAVORITE]->(i:item),(o:order)\n> WHERE NOT o<--u\n> RETURN count(DISTINCT u);\n+-------------------+\n| count(DISTINCT u) |\n+-------------------+\n| 3                 |\n+-------------------+\n1 row\n89 ms\n```\n* `count(*)`\u306f\u30e6\u30fc\u30b6\u6570\u3092\u8868\u3059\n* 3\u30e6\u30fc\u30b6\u3068\u306a\u308a\u4e00\u81f4\n\n# \u307e\u3068\u3081\u3001\u96d1\u611f\u7684\u306a\u3082\u306e\n* \u3061\u3087\u3063\u3068\u8907\u96d1\u3081\u306b\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5f35\u3063\u3066\u8272\u3005\u306a\u6761\u4ef6\u3067\u62bd\u51fa\u3057\u3066\u307f\u305f\u304c\u3001\u307e\u3041\u306a\u3093\u3068\u306a\u304f\u3067\u304d\u305f\n* Web\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u304c\u3042\u3063\u305f\u304a\u304b\u3052\u3067\u7406\u89e3\u304c\u30b9\u30e0\u30fc\u30ba\u3060\u3063\u305f\n * \u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3082\u308f\u304b\u308a\u3084\u3059\u304b\u3063\u305f\n* \u30b0\u30e9\u30d5DB\u3092\u4f7f\u3046\u3053\u3068\u3067\u5272\u3068\u6b32\u3057\u3044\u96c6\u8a08\u30c7\u30fc\u30bf\u304c\u7c21\u5358\u306b\u62bd\u51fa\u3067\u304d\u308b\u3068\u308f\u304b\u3063\u305f\n* \u30d7\u30ed\u30c0\u30af\u30b8\u30e7\u30f3\u3067\u306fmysql\u3092\u4f7f\u3063\u3066\u3066\u3001\u3069\u3046\u3044\u3046\u65b9\u6cd5\u3001\u30bf\u30a4\u30df\u30f3\u30b0\u3067neo4j\u3078\u9023\u643a\u3059\u308b\u90e8\u5206\u3067\u307e\u3060\u8003\u3048\u306a\u304d\u3083\u3044\u3051\u306a\u3044\u306a\u3041\u3068\u611f\u3058\u305f\n * \u591c\u9593\u30d0\u30c3\u30c1\u304b\u306a\u3041\u3002\u3002\u3002\u6bce\u6669\u591c\u9593\u30d0\u30c3\u30c1\u3067slave\u306emysql\u306e\u30c7\u30fc\u30bf\u3092neo4j\u3078\u7a81\u3063\u8fbc\u3080\u7684\u306a\n* Cypher\u3067\u30b5\u30d6\u30af\u30a8\u30ea\u7684\u306a\u3082\u306e\u304c\u4f7f\u3048\u306a\u3044\u3063\u307d\u3044\u306e\u3067\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u91cd\u8981\u3060\u3068\u611f\u3058\u305f\n* Cypher\u306b\u306f`EXPLAIN`,`PROFILE`\u304c\u3042\u308b\u306e\u3067\u81ea\u5206\u306eQL\u306e\u8a08\u6e2c\u304c\u51fa\u6765\u308b\u3002\u30d7\u30ed\u30c0\u30af\u30b8\u30e7\u30f3\u3068\u304b\u306e\u5927\u91cf\u306e\u30c7\u30fc\u30bf\u3092\u6271\u3046\u969b\u306b\u5fc5\u8981\u306b\u306a\u3063\u3066\u304f\u308b\u3060\u308d\u3046\u306a\n* \u30b9\u30b1\u30fc\u30eb\u306b\u95a2\u3059\u308b\u3082\u306e\u3082\u4e00\u901a\u308a\u3042\u308b\u3063\u307d\u3044\u306a\u3041\u3000http://neo4j.com/docs/stable/ha.html\n* \u53ef\u80fd\u6027\u306f\u3044\u308d\u3044\u308d\u3042\u308b\u306d\n * \u305f\u3060\u8ca0\u8377\u306b\u5bfe\u3059\u308b\u30ce\u30a6\u30cf\u30a6\u7b49\u304c\u5c11\u306a\u3044\u306e\u3067\u3044\u304d\u306a\u308a\u30e6\u30fc\u30b6\u304c\u4f7f\u3046\u30b5\u30fc\u30d3\u30b9\u306b\u306f\u4f7f\u3046\u306e\u306f\u6016\u3044\u304b\u306a\n * \u793e\u5185\u7684\u306a\u5206\u6790\u306b\u307e\u305a\u306f\u4f7f\u3063\u3066\u307f\u308b\u304c\u826f\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3068\n", "tags": ["neo4j", "Cypher"]}