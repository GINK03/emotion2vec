{"tags": ["CentOS", "ImageMagick", "Yum"], "context": "\n\n\u3054\u6ce8\u610f\nCentOS6\u3067\u304b\u3064ImageMagick6\u7cfb\u306e\u5bfe\u5fdc\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u8106\u5f31\u6027\nhttp://internet.watch.impress.co.jp/docs/news/20160509_756408.html\nImageMagick\uff08\u753b\u50cf\u306e\u30d5\u30a1\u30a4\u30eb\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u4f7f\u7528\uff09\u3067\u8106\u5f31\u6027\u304c\u767a\u898b\u3055\u308c\u3066\u304a\u308a\u307e\u3059\u3002\n\u305d\u306e\u5bfe\u5fdc\u3092\u3084\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u5bfe\u5fdc\u65b9\u6cd5\n\u63a8\u5968\u3055\u308c\u3066\u3044\u308b\u3068\u304a\u308a\u5bfe\u5fdc\u65b9\u6cd5\u3068\u3057\u3066\u4e0b\u8a18\uff12\u70b9\u884c\u3044\u307e\u3059\u3002\n\nImageMagick\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092 6.9.3.10\u306b\u3042\u3052\u308b\npolicy.xml\u306b\u8106\u5f31\u6027\u3092\u7121\u52b9\u5316\u3059\u308b\u8a18\u8ff0\u3092\u8ffd\u52a0\u3059\u308b\n\n\n1\u306b\u3064\u3044\u3066\n$ sudo yum remove ImageMagick\n$ sudo yum install --enablerepo=remi ImageMagick-last\n\n\n2\u306b\u3064\u3044\u3066\n\n\u78ba\u8a8d\n$ git clone https://github.com/ImageTragick/PoCs.git\n$ cd PoCs\n$ ./test.sh\n\nUNSAFE\u304c\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\npolicy.xml\u306b\u4fee\u6b63\u3092\u8ffd\u52a0\nsudo vi /etc/ImageMagick-last/ImageMagick-6/policy.xml\n\n<policy domain=\"coder\" rights=\"none\" pattern=\"EPHEMERAL\" />\n<policy domain=\"coder\" rights=\"none\" pattern=\"URL\" />\n<policy domain=\"coder\" rights=\"none\" pattern=\"HTTPS\" />\n<policy domain=\"coder\" rights=\"none\" pattern=\"MVG\" />\n<policy domain=\"coder\" rights=\"none\" pattern=\"MSL\" />\n<policy domain=\"coder\" rights=\"none\" pattern=\"TEXT\" />\n<policy domain=\"coder\" rights=\"none\" pattern=\"SHOW\" />\n<policy domain=\"coder\" rights=\"none\" pattern=\"WIN\" />\n<policy domain=\"coder\" rights=\"none\" pattern=\"PLT\" />\n\n\n\u4fee\u6b63\u78ba\u8a8d\n$ ./test.sh\n\n\u5168\u3066SAFE\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n# \u3054\u6ce8\u610f\n\nCentOS6\u3067\u304b\u3064ImageMagick6\u7cfb\u306e\u5bfe\u5fdc\u306b\u306a\u308a\u307e\u3059\u3002\n\n# \u8106\u5f31\u6027\n\nhttp://internet.watch.impress.co.jp/docs/news/20160509_756408.html\n\nImageMagick\uff08\u753b\u50cf\u306e\u30d5\u30a1\u30a4\u30eb\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u4f7f\u7528\uff09\u3067\u8106\u5f31\u6027\u304c\u767a\u898b\u3055\u308c\u3066\u304a\u308a\u307e\u3059\u3002\n\u305d\u306e\u5bfe\u5fdc\u3092\u3084\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n# \u5bfe\u5fdc\u65b9\u6cd5\n\n\u63a8\u5968\u3055\u308c\u3066\u3044\u308b\u3068\u304a\u308a\u5bfe\u5fdc\u65b9\u6cd5\u3068\u3057\u3066\u4e0b\u8a18\uff12\u70b9\u884c\u3044\u307e\u3059\u3002\n\n1. ImageMagick\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092 6.9.3.10\u306b\u3042\u3052\u308b\n2. policy.xml\u306b\u8106\u5f31\u6027\u3092\u7121\u52b9\u5316\u3059\u308b\u8a18\u8ff0\u3092\u8ffd\u52a0\u3059\u308b\n\n## 1\u306b\u3064\u3044\u3066\n\n```\n$ sudo yum remove ImageMagick\n$ sudo yum install --enablerepo=remi ImageMagick-last\n```\n\n## 2\u306b\u3064\u3044\u3066\n\n### \u78ba\u8a8d\n\n```\n$ git clone https://github.com/ImageTragick/PoCs.git\n$ cd PoCs\n$ ./test.sh\n```\n\nUNSAFE\u304c\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\n### policy.xml\u306b\u4fee\u6b63\u3092\u8ffd\u52a0\n\n```\nsudo vi /etc/ImageMagick-last/ImageMagick-6/policy.xml\n\n<policy domain=\"coder\" rights=\"none\" pattern=\"EPHEMERAL\" />\n<policy domain=\"coder\" rights=\"none\" pattern=\"URL\" />\n<policy domain=\"coder\" rights=\"none\" pattern=\"HTTPS\" />\n<policy domain=\"coder\" rights=\"none\" pattern=\"MVG\" />\n<policy domain=\"coder\" rights=\"none\" pattern=\"MSL\" />\n<policy domain=\"coder\" rights=\"none\" pattern=\"TEXT\" />\n<policy domain=\"coder\" rights=\"none\" pattern=\"SHOW\" />\n<policy domain=\"coder\" rights=\"none\" pattern=\"WIN\" />\n<policy domain=\"coder\" rights=\"none\" pattern=\"PLT\" />\n```\n\n### \u4fee\u6b63\u78ba\u8a8d\n\n```\n$ ./test.sh\n```\n\n\u5168\u3066SAFE\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n"}