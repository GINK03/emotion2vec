{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\naws\u306ecloudformation\u3092\u4f7f\u3063\u3066\u8272\u3005\u7ba1\u7406\u3057\u3066\u3066\u3001\u30bf\u30a4\u30c8\u30eb\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u56f0\u3063\u305f\u3068\u304d\u306e\u8a71\u3067\u3059\u3002\n\u518d\u73fe\u3067\u304d\u305f\u306e\u3067\u3001\u89e3\u6c7a\u65b9\u6cd5\u3068\u304b\u66f8\u3044\u3066\u304a\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\ncloudformation\u306eevents\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3057\u305f\u3002\n20:41:25 UTC+0900   UPDATE_ROLLBACK_IN_PROGRESS AWS::CloudFormation::Stack  test-stack  The following resource(s) failed to update: [WebGroup, PublicRoute, AttachGateway, SSHGroup, PublicSubnetA].\n20:41:24 UTC+0900   UPDATE_FAILED   AWS::EC2::SecurityGroup WebGroup    Resource creation cancelled\n20:41:24 UTC+0900   UPDATE_FAILED   AWS::EC2::SecurityGroup SSHGroup    Resource creation cancelled\n20:41:18 UTC+0900   UPDATE_FAILED   AWS::EC2::VPCGatewayAttachment  AttachGateway   Resource update cancelled\n20:41:18 UTC+0900   UPDATE_FAILED   AWS::EC2::Subnet    PublicSubnetA   Resource creation cancelled\n20:41:17 UTC+0900   UPDATE_FAILED   AWS::EC2::Route PublicRoute route table rtb-xxxxx and network gateway igw-xxxxx belong to different networks\n20:41:16 UTC+0900   UPDATE_IN_PROGRESS  AWS::EC2::Route PublicRoute Requested update requires the creation of a new physical resource; hence creating one.\n20:41:10 UTC+0900   UPDATE_COMPLETE AWS::EC2::RouteTable    PublicRouteTable    \n20:41:08 UTC+0900   UPDATE_IN_PROGRESS  AWS::EC2::RouteTable    PublicRouteTable    Resource creation Initiated\n20:41:08 UTC+0900   UPDATE_IN_PROGRESS  AWS::EC2::Subnet    PublicSubnetA   Resource creation Initiated\n20:41:08 UTC+0900   UPDATE_IN_PROGRESS  AWS::EC2::RouteTable    PublicRouteTable    Requested update requires the creation of a new physical resource; hence creating one.\n20:41:08 UTC+0900   UPDATE_IN_PROGRESS  AWS::EC2::SecurityGroup WebGroup    Requested update requires the creation of a new physical resource; hence creating one.\n20:41:08 UTC+0900   UPDATE_IN_PROGRESS  AWS::EC2::Subnet    PublicSubnetA   Requested update requires the creation of a new physical resource; hence creating one.\n20:41:08 UTC+0900   UPDATE_IN_PROGRESS  AWS::EC2::SecurityGroup SSHGroup    Requested update requires the creation of a new physical resource; hence creating one.\n20:41:05 UTC+0900   UPDATE_IN_PROGRESS  AWS::EC2::VPCGatewayAttachment  AttachGateway   \n20:41:01 UTC+0900   UPDATE_COMPLETE AWS::EC2::VPC   VPC \n20:40:44 UTC+0900   UPDATE_IN_PROGRESS  AWS::EC2::VPC   VPC Resource creation Initiated\n20:40:43 UTC+0900   UPDATE_IN_PROGRESS  AWS::EC2::VPC   VPC Requested update requires the creation of a new physical resource; hence creating one.\n20:40:29 UTC+0900   UPDATE_IN_PROGRESS  AWS::CloudFormation::Stack  test-stack  User Initiated\n\n\n\u5b9f\u969b\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c81(\u5909\u66f4\u524d)\nhttps://gist.github.com/ara-ta3/27b47ec058710b419a28#file-cloudformation-template-for-error-before-json\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c82(\u5909\u66f4\u5f8c)\nhttps://gist.github.com/ara-ta3/27b47ec058710b419a28#file-cloudformation-template-for-error-after-json\n\u5909\u66f4\u524d\u5f8c\u3067VPC\u3068PublicSubnet\u306eCIDR\u3092\u5909\u66f4\u3057\u3066\u307e\u3059\u3002\n\u9593\u9055\u3048\u3066\u4f5c\u3063\u3061\u3083\u3063\u305f\u3093\u3067\u5909\u66f4\u3057\u3066update\u3059\u308b\u304b\u307f\u305f\u3044\u306a\u30b7\u30ca\u30ea\u30aa\u3067\u3059\u3002\n\n\u539f\u56e0\nVPC\u3092\u5909\u66f4\u3057\u305f\u305f\u3081RouteTable\u304c\u4f5c\u308a\u76f4\u3057\u306b\u306a\u308a\u3001\nInternetGateway\u3092\u53c2\u7167\u3057\u3066\u3044\u308bRoute\u8a2d\u5b9a\u304c\u4f5c\u308a\u76f4\u3057\u306b\u306a\u308a\u307e\u3059\u3002\n\u3055\u3089\u306b\u3001VPC\u306e\u5909\u66f4\u306b\u3088\u308aInternetGateway\u3092Attach\u3059\u308bVPCGatewayAttachment\u3082\u4f5c\u308a\u76f4\u3057\u306b\u306a\u308b\u306e\u3067\u3059\u304c\u3001\nRoute\u304cVPCGatewayAttachment\u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u3053\u3053\u3067\u306f\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\nAttach\u3055\u308c\u308b\u524d\u306eInternetGateway\u3092\u53c2\u7167\u3057\u3066\u3057\u307e\u3046\u3053\u3068\u3067\u8d77\u304d\u3066\u3044\u307e\u3059\u3002\n\u306a\u306e\u3067\u3001DependsOn\u5c5e\u6027\u3092\u3064\u3051\u308c\u3070\u89e3\u6c7a\u3055\u308c\u307e\u3059\u3002\nDependsOn\u3092\u3064\u3051\u3066\u6cbb\u3057\u305f\u3082\u306e\u304c\u3053\u308c\u3067\u3059\u3002\nhttps://gist.github.com/ara-ta3/27b47ec058710b419a28#file-cloudformation-template-for-error-fixed-json\n\u3053\u308c\u3067update-stack\u3059\u308b\u3068\u6210\u529f\u3057\u3066\u3044\u307e\u3059\u3002\nhttps://gist.github.com/ara-ta3/27b47ec058710b419a28#file-cloudformation-events-tsv\n\n\u53c2\u8003\n\nDependsOn\u306e\u30d8\u30eb\u30d7\n\n\nhttps://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html\n\n\n\u30a8\u30e9\u30fc\u306b\u95a2\u3057\u3066\u53c2\u8003\u306b\u3057\u305f\u30da\u30fc\u30b8\n\n\nhttps://forums.aws.amazon.com/thread.jspa?threadID=100750\nhttps://github.com/hashicorp/terraform/issues/2185\n\n\n\n# \u6982\u8981\n\naws\u306ecloudformation\u3092\u4f7f\u3063\u3066\u8272\u3005\u7ba1\u7406\u3057\u3066\u3066\u3001\u30bf\u30a4\u30c8\u30eb\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u56f0\u3063\u305f\u3068\u304d\u306e\u8a71\u3067\u3059\u3002\n\u518d\u73fe\u3067\u304d\u305f\u306e\u3067\u3001\u89e3\u6c7a\u65b9\u6cd5\u3068\u304b\u66f8\u3044\u3066\u304a\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\ncloudformation\u306eevents\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3057\u305f\u3002\n\n```text\n20:41:25 UTC+0900\tUPDATE_ROLLBACK_IN_PROGRESS\tAWS::CloudFormation::Stack\ttest-stack\tThe following resource(s) failed to update: [WebGroup, PublicRoute, AttachGateway, SSHGroup, PublicSubnetA].\n20:41:24 UTC+0900\tUPDATE_FAILED\tAWS::EC2::SecurityGroup\tWebGroup\tResource creation cancelled\n20:41:24 UTC+0900\tUPDATE_FAILED\tAWS::EC2::SecurityGroup\tSSHGroup\tResource creation cancelled\n20:41:18 UTC+0900\tUPDATE_FAILED\tAWS::EC2::VPCGatewayAttachment\tAttachGateway\tResource update cancelled\n20:41:18 UTC+0900\tUPDATE_FAILED\tAWS::EC2::Subnet\tPublicSubnetA\tResource creation cancelled\n20:41:17 UTC+0900\tUPDATE_FAILED\tAWS::EC2::Route\tPublicRoute\troute table rtb-xxxxx and network gateway igw-xxxxx belong to different networks\n20:41:16 UTC+0900\tUPDATE_IN_PROGRESS\tAWS::EC2::Route\tPublicRoute\tRequested update requires the creation of a new physical resource; hence creating one.\n20:41:10 UTC+0900\tUPDATE_COMPLETE\tAWS::EC2::RouteTable\tPublicRouteTable\t\n20:41:08 UTC+0900\tUPDATE_IN_PROGRESS\tAWS::EC2::RouteTable\tPublicRouteTable\tResource creation Initiated\n20:41:08 UTC+0900\tUPDATE_IN_PROGRESS\tAWS::EC2::Subnet\tPublicSubnetA\tResource creation Initiated\n20:41:08 UTC+0900\tUPDATE_IN_PROGRESS\tAWS::EC2::RouteTable\tPublicRouteTable\tRequested update requires the creation of a new physical resource; hence creating one.\n20:41:08 UTC+0900\tUPDATE_IN_PROGRESS\tAWS::EC2::SecurityGroup\tWebGroup\tRequested update requires the creation of a new physical resource; hence creating one.\n20:41:08 UTC+0900\tUPDATE_IN_PROGRESS\tAWS::EC2::Subnet\tPublicSubnetA\tRequested update requires the creation of a new physical resource; hence creating one.\n20:41:08 UTC+0900\tUPDATE_IN_PROGRESS\tAWS::EC2::SecurityGroup\tSSHGroup\tRequested update requires the creation of a new physical resource; hence creating one.\n20:41:05 UTC+0900\tUPDATE_IN_PROGRESS\tAWS::EC2::VPCGatewayAttachment\tAttachGateway\t\n20:41:01 UTC+0900\tUPDATE_COMPLETE\tAWS::EC2::VPC\tVPC\t\n20:40:44 UTC+0900\tUPDATE_IN_PROGRESS\tAWS::EC2::VPC\tVPC\tResource creation Initiated\n20:40:43 UTC+0900\tUPDATE_IN_PROGRESS\tAWS::EC2::VPC\tVPC\tRequested update requires the creation of a new physical resource; hence creating one.\n20:40:29 UTC+0900\tUPDATE_IN_PROGRESS\tAWS::CloudFormation::Stack\ttest-stack\tUser Initiated\n```\n\n# \u5b9f\u969b\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c81(\u5909\u66f4\u524d)\nhttps://gist.github.com/ara-ta3/27b47ec058710b419a28#file-cloudformation-template-for-error-before-json\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c82(\u5909\u66f4\u5f8c)\nhttps://gist.github.com/ara-ta3/27b47ec058710b419a28#file-cloudformation-template-for-error-after-json\n\n\u5909\u66f4\u524d\u5f8c\u3067VPC\u3068PublicSubnet\u306eCIDR\u3092\u5909\u66f4\u3057\u3066\u307e\u3059\u3002\n\u9593\u9055\u3048\u3066\u4f5c\u3063\u3061\u3083\u3063\u305f\u3093\u3067\u5909\u66f4\u3057\u3066update\u3059\u308b\u304b\u307f\u305f\u3044\u306a\u30b7\u30ca\u30ea\u30aa\u3067\u3059\u3002\n\n# \u539f\u56e0\n\nVPC\u3092\u5909\u66f4\u3057\u305f\u305f\u3081RouteTable\u304c\u4f5c\u308a\u76f4\u3057\u306b\u306a\u308a\u3001\nInternetGateway\u3092\u53c2\u7167\u3057\u3066\u3044\u308bRoute\u8a2d\u5b9a\u304c\u4f5c\u308a\u76f4\u3057\u306b\u306a\u308a\u307e\u3059\u3002\n\u3055\u3089\u306b\u3001VPC\u306e\u5909\u66f4\u306b\u3088\u308aInternetGateway\u3092Attach\u3059\u308bVPCGatewayAttachment\u3082\u4f5c\u308a\u76f4\u3057\u306b\u306a\u308b\u306e\u3067\u3059\u304c\u3001\nRoute\u304cVPCGatewayAttachment\u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u3053\u3053\u3067\u306f\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\nAttach\u3055\u308c\u308b\u524d\u306eInternetGateway\u3092\u53c2\u7167\u3057\u3066\u3057\u307e\u3046\u3053\u3068\u3067\u8d77\u304d\u3066\u3044\u307e\u3059\u3002\n\u306a\u306e\u3067\u3001DependsOn\u5c5e\u6027\u3092\u3064\u3051\u308c\u3070\u89e3\u6c7a\u3055\u308c\u307e\u3059\u3002\n\nDependsOn\u3092\u3064\u3051\u3066\u6cbb\u3057\u305f\u3082\u306e\u304c\u3053\u308c\u3067\u3059\u3002\nhttps://gist.github.com/ara-ta3/27b47ec058710b419a28#file-cloudformation-template-for-error-fixed-json\n\n\u3053\u308c\u3067update-stack\u3059\u308b\u3068\u6210\u529f\u3057\u3066\u3044\u307e\u3059\u3002\nhttps://gist.github.com/ara-ta3/27b47ec058710b419a28#file-cloudformation-events-tsv\n\n## \u53c2\u8003\n* DependsOn\u306e\u30d8\u30eb\u30d7\n  * https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-attribute-dependson.html\n* \u30a8\u30e9\u30fc\u306b\u95a2\u3057\u3066\u53c2\u8003\u306b\u3057\u305f\u30da\u30fc\u30b8\n  * https://forums.aws.amazon.com/thread.jspa?threadID=100750\n  * https://github.com/hashicorp/terraform/issues/2185\n\n\n", "tags": ["AWS", "CloudFormation"]}