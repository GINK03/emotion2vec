{"context": "Maker Faire Tokyo 2016 \u68ee\u306e\u30bf\u30af\u30c8\u306b\u3064\u3044\u3066\u306e\u8a73\u7d30\u8a18\u4e8b\u3067\u3059\u3002\n\n\u6982\u8981\n\u624b\u5143\u306e\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u3001\u305d\u308c\u306b\u5bfe\u5fdc\u3057\u305f\u30b9\u30d4\u30fc\u30ab\u30fc\u3092\u30df\u30e5\u30fc\u30c8\u306b\u3057\u305f\u308a\u3001\u518d\u3073\u30df\u30e5\u30fc\u30c8\u3092\u89e3\u9664\u3057\u305f\u308a\u3068\u3044\u3046\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u3053\u3067\u306f\u3053\u306e\u6a5f\u80fd\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\u4eca\u56de\uff15\u3064\u306e\u30dc\u30bf\u30f3\u3092\u7528\u610f\u3057\u307e\u3057\u305f\u3002\n\n\n\u8a73\u7d30\n\nLED\u4ed8\u304d\u30dc\u30bf\u30f3\u56de\u8def\u306e\u4f5c\u6210\n\u305f\u3060\u306e\u3001\u30bf\u30af\u30c8\u30b9\u30a4\u30c3\u30c1\u3092\u4f7f\u7528\u3057\u3066\u3082\u3088\u3044\u306e\u3067\u3059\u304c\u305d\u308c\u3060\u3068\u4ecaMute\u306a\u306e\u304b\u3001Mute\u89e3\u9664\u306a\u306e\u304b\u304c\u8996\u899a\u7684\u306b\u308f\u304b\u308a\u306b\u304f\u3044\u306e\u3067LED\u4ed8\u304d\u30dc\u30bf\u30f3\u3092\u4f7f\u3046\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\u56de\u8def\u56f3\u304c\uff12\u679a\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u306f\u3001\uff11\u679a\u76ee\u306e\u57fa\u677f\u306f\u6975\u529b\u30dc\u30bf\u30f3\u4ee5\u5916\u306e\u90e8\u54c1\u306f\u8f09\u305b\u305a\u3001\uff12\u679a\u76ee\u306e\u57fa\u677f\u306f\u305d\u308c\u4ee5\u5916\u306e\u90e8\u54c1\u3092\u8f09\u305b\u3001\uff12\u679a\u3092\u7a4d\u307f\u91cd\u306d\u308b\u69cb\u6210\u306b\u3057\u3066\u3044\u308b\u305f\u3081\u3067\u3059\u3002\n\u56de\u8def\u306f\u3001\u30ed\u30fc\u30d1\u30b9\u30d5\u30a3\u30eb\u30bf\u3068\u30b7\u30e5\u30df\u30c3\u30c8\u30c8\u30ea\u30ac\u3067\u30c1\u30e3\u30bf\u30ea\u30f3\u30b0\u56de\u907f\u3001\u30d5\u30ea\u30c3\u30d7\u30d5\u30ed\u30c3\u30d7\u3067\u72b6\u614b\u306e\u4fdd\u6301\u306a\u3069\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\u30d5\u30ea\u30c3\u30d7\u30d5\u30ed\u30c3\u30d7\u306e\u51fa\u529b\u306f\u306f\u5916\u306b\u5f15\u304d\u51fa\u3057\u3066\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\uff08RaspberryPi\uff09\u3078\u306e\u5165\u529b\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u56de\u8def\u305d\u306e\uff11\n\n\n\u56de\u8def\u305d\u306e\uff12\nSWx_A\u3068SW\uff58_B\u3068\u3044\u3046\u4fe1\u53f7\u306f\u5b9f\u969b\u306f\u30b7\u30e7\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\n\u30dc\u30bf\u30f3\u304b\u3089\u306e\u5165\u529b\u306b\u5fdc\u3058\u3066\u97f3\u3092Mute\u306b\u3059\u308b\n\u4e0a\u8a18\u56de\u8def\u304b\u3089\u306e5\u3064\u306eInput\u306b\u5bfe\u3057\u3066\u5272\u308a\u8fbc\u307f\u3092\u8a2d\u5b9a\u3068\u30cf\u30f3\u30c9\u30e9\u30fc\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u3042\u3068\u306f\u3001GPIO\u306e\u72b6\u614b\u3092slave_en_flag\u3068\u3057\u3066\u4fdd\u6301\u3057\u3001note_on\u30a4\u30d9\u30f3\u30c8\u306evelocity\u306b\u304b\u3051\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u305d\u3046\u3059\u308b\u3068\u3082\u3057\u30a4\u30f3\u30d7\u30c3\u30c8\u304cLow\u306e\u5834\u5408\u306fflag\u304c0\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001velocity\u30820\u306b\u306a\u308aMute\u306b\u306a\u308a\u307e\u3059\u3002\n\nunsigned char slave_en_flags[6] = {1, 1, 1, 1, 1, 1};\n\nvoid sw1_event(){\n    slave_en_flags[0] = digitalRead(BCM_SW1);\n    printf(\"Detect SW1 Event: %d\");\n}\n\nvoid sw2_event(){\n    slave_en_flags[1] = digitalRead(BCM_SW2);\n    printf(\"Detect SW2 Event: %d\");\n}\n\nvoid sw3_event(){\n    slave_en_flags[2] = digitalRead(BCM_SW3);\n    printf(\"Detect SW3 Event: %d\");\n}\n\nvoid sw4_event(){\n    slave_en_flags[3] = digitalRead(BCM_SW4);\n    printf(\"Detect SW4 Event: %d\");\n}\n\nvoid sw5_event(){\n    slave_en_flags[4] = digitalRead(BCM_SW5);\n    printf(\"Detect SW5 Event: %d\");\n}\n\nint main(){\n    //\u7701\u7565\n\n    wiringPiISR(BCM_SW1, INT_EDGE_BOTH, sw1_event);\n    wiringPiISR(BCM_SW2, INT_EDGE_BOTH, sw2_event);\n    wiringPiISR(BCM_SW3, INT_EDGE_BOTH, sw3_event);\n    wiringPiISR(BCM_SW4, INT_EDGE_BOTH, sw4_event);\n    wiringPiISR(BCM_SW5, INT_EDGE_BOTH, sw5_event);\n\n    //\u7701\u7565\n\n    //\u518d\u751f\n    for(p = datahead->next; p != NULL; p = p->next){\n\n        switch(0xf0 & p->sendbuf[0]){\n            case 0xc0:\n                //program Change\n                pgm_change(slave_num, 0x0f & p->sendbuf[0], p->sendbuf[1]);\n\n                break;\n            case 0x80:\n                //note off\n                note_off(slave_num, 0x0f & p->sendbuf[0], p->sendbuf[1], p->sendbuf[2]);\n\n                break;\n            case 0x90:\n                //note on\n                note_on(slave_num, 0x0f & p->sendbuf[0], p->sendbuf[1], p->sendbuf[2]*slave_en_flags[slave_num]);\n\n                break;\n            default:\n                //printf(\"Other events\\n\");\n                break;\n        }\n\n        usleep(p->wait_time * coeff);\n\n    }\n}\n\n[Maker Faire Tokyo 2016 \u68ee\u306e\u30bf\u30af\u30c8\u306b\u3064\u3044\u3066](http://qiita.com/shozaburo/private/43561a396cdc0ed2facd)\u306e\u8a73\u7d30\u8a18\u4e8b\u3067\u3059\u3002\n\n#\u6982\u8981\n\u624b\u5143\u306e\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u3001\u305d\u308c\u306b\u5bfe\u5fdc\u3057\u305f\u30b9\u30d4\u30fc\u30ab\u30fc\u3092\u30df\u30e5\u30fc\u30c8\u306b\u3057\u305f\u308a\u3001\u518d\u3073\u30df\u30e5\u30fc\u30c8\u3092\u89e3\u9664\u3057\u305f\u308a\u3068\u3044\u3046\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u3053\u3067\u306f\u3053\u306e\u6a5f\u80fd\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\u4eca\u56de\uff15\u3064\u306e\u30dc\u30bf\u30f3\u3092\u7528\u610f\u3057\u307e\u3057\u305f\u3002\n\n![IMG_9060.jpg](https://qiita-image-store.s3.amazonaws.com/0/95321/9ce294f3-446a-079b-740e-8e8eefe8e1ee.jpeg)\n\n#\u8a73\u7d30\n## LED\u4ed8\u304d\u30dc\u30bf\u30f3\u56de\u8def\u306e\u4f5c\u6210\n\u305f\u3060\u306e\u3001\u30bf\u30af\u30c8\u30b9\u30a4\u30c3\u30c1\u3092\u4f7f\u7528\u3057\u3066\u3082\u3088\u3044\u306e\u3067\u3059\u304c\u305d\u308c\u3060\u3068\u4ecaMute\u306a\u306e\u304b\u3001Mute\u89e3\u9664\u306a\u306e\u304b\u304c\u8996\u899a\u7684\u306b\u308f\u304b\u308a\u306b\u304f\u3044\u306e\u3067[LED\u4ed8\u304d\u30dc\u30bf\u30f3](http://akizukidenshi.com/catalog/g/gP-02010/)\u3092\u4f7f\u3046\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\u56de\u8def\u56f3\u304c\uff12\u679a\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u306f\u3001\uff11\u679a\u76ee\u306e\u57fa\u677f\u306f\u6975\u529b\u30dc\u30bf\u30f3\u4ee5\u5916\u306e\u90e8\u54c1\u306f\u8f09\u305b\u305a\u3001\uff12\u679a\u76ee\u306e\u57fa\u677f\u306f\u305d\u308c\u4ee5\u5916\u306e\u90e8\u54c1\u3092\u8f09\u305b\u3001\uff12\u679a\u3092\u7a4d\u307f\u91cd\u306d\u308b\u69cb\u6210\u306b\u3057\u3066\u3044\u308b\u305f\u3081\u3067\u3059\u3002\n\n\u56de\u8def\u306f\u3001\u30ed\u30fc\u30d1\u30b9\u30d5\u30a3\u30eb\u30bf\u3068\u30b7\u30e5\u30df\u30c3\u30c8\u30c8\u30ea\u30ac\u3067\u30c1\u30e3\u30bf\u30ea\u30f3\u30b0\u56de\u907f\u3001\u30d5\u30ea\u30c3\u30d7\u30d5\u30ed\u30c3\u30d7\u3067\u72b6\u614b\u306e\u4fdd\u6301\u306a\u3069\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\u30d5\u30ea\u30c3\u30d7\u30d5\u30ed\u30c3\u30d7\u306e\u51fa\u529b\u306f\u306f\u5916\u306b\u5f15\u304d\u51fa\u3057\u3066\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\uff08RaspberryPi\uff09\u3078\u306e\u5165\u529b\u306b\u306a\u308a\u307e\u3059\u3002\n\n### \u56de\u8def\u305d\u306e\uff11\n<img width=\"1285\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-08-05 11.20.47.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/95321/5db1844d-bca4-45e0-859e-a3b61745bf02.png\">\n### \u56de\u8def\u305d\u306e\uff12\nSWx_A\u3068SW\uff58_B\u3068\u3044\u3046\u4fe1\u53f7\u306f\u5b9f\u969b\u306f\u30b7\u30e7\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n<img width=\"1182\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-08-05 11.17.34.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/95321/bd277eba-b101-696a-9caf-6d83c8137c81.png\">\n\n## \u30dc\u30bf\u30f3\u304b\u3089\u306e\u5165\u529b\u306b\u5fdc\u3058\u3066\u97f3\u3092Mute\u306b\u3059\u308b\n\u4e0a\u8a18\u56de\u8def\u304b\u3089\u306e5\u3064\u306eInput\u306b\u5bfe\u3057\u3066\u5272\u308a\u8fbc\u307f\u3092\u8a2d\u5b9a\u3068\u30cf\u30f3\u30c9\u30e9\u30fc\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u3042\u3068\u306f\u3001GPIO\u306e\u72b6\u614b\u3092slave_en_flag\u3068\u3057\u3066\u4fdd\u6301\u3057\u3001note_on\u30a4\u30d9\u30f3\u30c8\u306evelocity\u306b\u304b\u3051\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u305d\u3046\u3059\u308b\u3068\u3082\u3057\u30a4\u30f3\u30d7\u30c3\u30c8\u304cLow\u306e\u5834\u5408\u306fflag\u304c0\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001velocity\u30820\u306b\u306a\u308aMute\u306b\u306a\u308a\u307e\u3059\u3002\n\n```c\n\nunsigned char slave_en_flags[6] = {1, 1, 1, 1, 1, 1};\n\nvoid sw1_event(){\n    slave_en_flags[0] = digitalRead(BCM_SW1);\n    printf(\"Detect SW1 Event: %d\");\n}\n\nvoid sw2_event(){\n    slave_en_flags[1] = digitalRead(BCM_SW2);\n    printf(\"Detect SW2 Event: %d\");\n}\n\nvoid sw3_event(){\n    slave_en_flags[2] = digitalRead(BCM_SW3);\n    printf(\"Detect SW3 Event: %d\");\n}\n\nvoid sw4_event(){\n    slave_en_flags[3] = digitalRead(BCM_SW4);\n    printf(\"Detect SW4 Event: %d\");\n}\n\nvoid sw5_event(){\n    slave_en_flags[4] = digitalRead(BCM_SW5);\n    printf(\"Detect SW5 Event: %d\");\n}\n\nint main(){\n    //\u7701\u7565\n\n    wiringPiISR(BCM_SW1, INT_EDGE_BOTH, sw1_event);\n    wiringPiISR(BCM_SW2, INT_EDGE_BOTH, sw2_event);\n    wiringPiISR(BCM_SW3, INT_EDGE_BOTH, sw3_event);\n    wiringPiISR(BCM_SW4, INT_EDGE_BOTH, sw4_event);\n    wiringPiISR(BCM_SW5, INT_EDGE_BOTH, sw5_event);\n\n    //\u7701\u7565\n\n    //\u518d\u751f\n    for(p = datahead->next; p != NULL; p = p->next){\n\n        switch(0xf0 & p->sendbuf[0]){\n            case 0xc0:\n                //program Change\n                pgm_change(slave_num, 0x0f & p->sendbuf[0], p->sendbuf[1]);\n \n                break;\n            case 0x80:\n                //note off\n                note_off(slave_num, 0x0f & p->sendbuf[0], p->sendbuf[1], p->sendbuf[2]);\n\n                break;\n            case 0x90:\n                //note on\n                note_on(slave_num, 0x0f & p->sendbuf[0], p->sendbuf[1], p->sendbuf[2]*slave_en_flags[slave_num]);\n\n                break;\n            default:\n                //printf(\"Other events\\n\");\n                break;\n        }\n\n        usleep(p->wait_time * coeff);\n\n    }\n}\n```\n\n", "tags": ["hardware", "RaspberryPi", "MIDI", "C"]}