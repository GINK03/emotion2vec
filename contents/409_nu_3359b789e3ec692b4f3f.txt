{"context": "\u53c2\u8003\u306b\u3057\u305f\u3082\u306e:Red Hat Enterprise Linux 6 \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u306e\u7ba1\u7406(pdf)\n\n0.\u524d\u7f6e\u304d\u3068\u304b\n\u203b GRUB Legacy\u306fLVM\u672a\u30b5\u30dd\u30fc\u30c8.\n\u2192LVM\u306e\u4e2d\u306b/boot\u306f\u304a\u3051\u306a\u3044.(GRUB2\u306e\u5834\u5408\u306f\u53ef.)\nGRUB Legacy\u3067LVM\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f/boot\u3092\u5206\u5272\u3057\u3066\u4f5c\u6210\u3057\u76f4\u63a5\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3059\u308b\u3053\u3068.\n\n\u5229\u70b9\n\uff65\u5bb9\u91cf\u306e\u67d4\u8edf\u6027:\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u8907\u6570\u306e\u30c7\u30a3\u30b9\u30af\u306b\u307e\u305f\u304c\u3063\u3066\u62e1\u5f35\u53ef\u80fd\n\uff65\u518d\u5909\u66f4\u53ef\u80fd\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u30d7\u30fc\u30eb\n\uff65\u30c7\u30a3\u30b9\u30af\u306e\u30b9\u30c8\u30e9\u30a4\u30d4\u30f3\u30b0:2\u3064\u4ee5\u4e0a\u306e\u30c7\u30a3\u30b9\u30af\u306b\u307e\u305f\u304c\u3063\u3066\u30c7\u30fc\u30bf\u3092\u30b9\u30c8\u30e9\u30a4\u30d7\u3059\u308b\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u4f5c\u6210\u304c\u53ef\u80fd\n\uff65\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\n\u3068\u304b\u3044\u308d\u3044\u308d\n\n\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0(PV):\n\uff65LVM\u8ad6\u7406\u30dc\u30fc\u30ea\u30e5\u30fc\u30e0\u3088\u3046\u306b\u7269\u7406\u30c7\u30d0\u30a4\u30b9\u3092\u4f7f\u7528\u3059\u308b\u306b\u306fPV\u3068\u3057\u3066\u521d\u671f\u5316\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b.\n\uff65\u521d\u671f\u5316\u3059\u308b\u3068\u5148\u982d\u306b\u30e9\u30d9\u30eb\u304c\u4ed8\u52a0\u3055\u308c\u308b.\u3053\u306e\u30e9\u30d9\u30eb\u306f2\u756a\u76ee\u306e512\u30d0\u30a4\u30c8\u30bb\u30af\u30bf\u306b\u306b\u914d\u7f6e\u3055\u308c\u308b(\u30c7\u30d5\u30a9\u30eb\u30c8)\n\u2192\u5148\u982d\u304b\u30894\u30bb\u30af\u30bf\u4ee5\u5185\u306a\u3089\u3044\u3044\u307f\u305f\u3044\n\uff65\u30e9\u30d9\u30eb\u306f\u30c7\u30d0\u30a4\u30b9\u3092PV\u3068\u3057\u3066\u8b58\u5225\u3059\u308b\u3082\u3067\u3042\u308a,\u3053\u308c\u306b\u306f\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u7528\u306eUUID\u304c\u542b\u307e\u308c\u308c\u308b.\n\uff65LVM\u30e1\u30bf\u30c7\u30fc\u30bf\u306b\u306f\u30b7\u30b9\u30c6\u30e0\u4e0a\u306eLVM\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u306e\u8a73\u7d30\u8a2d\u5b9a\u304c\u542b\u307e\u308c\u308b.\n\u2192\u3053\u308c\u3089\u306f\u540c\u4e00\u306e\u30b3\u30d4\u30fc\u304c\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u5185\u306e\u3059\u3079\u3066\u306ePV\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u9818\u57df\u3067\u4fdd\u6301\u3055\u308c\u308b.\n\nLVM\u30dc\u30ea\u30e5\u30fc\u30e0\u30ec\u30a4\u30a2\u30a6\u30c8\n\uff65PV\u306e\u7269\u7406\u30ec\u30a4\u30a2\u30a6\u30c8\u306e\u3053\u3068.\n\uff65LVM\u30e9\u30d9\u30eb\u306f2\u30bb\u30af\u30bf\u76ee\u306b\u3042\u308a,\u6b21\u306b\u30e1\u30bf\u30c7\u30fc\u30bf\u9818\u57df,\u30c7\u30d0\u30a4\u30b9\u306e\u4f7f\u7528\u53ef\u80fd\u9818\u57df\u306e\u9806\u306b\u7d9a\u304f.\n\n\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7(VG)\n\uff65PV\u306fVG\u306b\u7d71\u5408\u3055\u308c\u308b.\u2192\u8ad6\u7406\u30dc\u30fc\u30ea\u30e5\u30fc\u30e0\u306b\u5272\u308a\u5f53\u3066\u308b\u305f\u3081\u306e\u30c7\u30a3\u30b9\u30af\u9818\u57df\u30d7\u30fc\u30eb\u304c\u3067\u304d\u308b.\n\uff65\u5272\u5f53\u53ef\u80fd\u306a\u30c7\u30a3\u30b9\u30af\u9818\u57df\u306f\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u3068\u547c\u3070\u308c\u308b\u56fa\u5b9a\u30b5\u30a4\u30ba\u306e\u5358\u4f4d\u306b\u5206\u5272\u3055\u308c\u308b.\n\u21921\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u304c\u5272\u5f53\u53ef\u80fd\u306a\u6700\u5c0f\u5358\u4f4d.(\u30c7\u30d5\u30a9\u30eb\u30c84MB)\n\u2192\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u5185\u3067\u306f\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u306f\u7269\u7406\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u3068\u3068\u547c\u3070\u308c\u308b.\n\uff65\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u7269\u7406\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u3068\u540c\u3058\u30b5\u30a4\u30ba\u306e\u8ad6\u7406\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u3092\u5272\u308a\u5f53\u3066\u53ef\u80fd.\n\u3068\u308a\u3042\u3048\u305a\u3056\u3063\u304f\u308a\u307e\u3068\u307e\u308b\u306a\u3089PV>VG>LV\u306e3\u3064\u306e\u95a2\u4fc2\u3092\u306a\u3093\u3068\u306a\u304f\u7406\u89e3\u3059\u308c\u3070\u4f5c\u6210\u304f\u3089\u3044\u307e\u3067\u306f\n\u5927\u4e08\u592b\u3058\u3083\u306a\u3044\u304b\u306a\uff64\u3068\n\n1.\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0(PV)\u306e\u7ba1\u7406\n\n1.1 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30bf\u30a4\u30d7\u306e\u4f5c\u6210\n\uff65\u9069\u5b9cparted\u3084fdisk\u3092\u7528\u3044\u3066\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u2190\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u4f5c\u6210\u3059\u308b\u5834\u5408\n\u203bdos\u306e\u5834\u5408\u306f\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3ID\u30920x8e\u3068\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\n\n1.2.PV\u306e\u4f5c\u6210\n\uff65\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u521d\u671f\u5316\u3059\u308b\u5834\u5408\n# pvcreate /dev/sdb1\nPhysical Volume \u201c/dev/sdb1\u201d successfully created\n\n\uff65\u8907\u6570\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u521d\u671f\u5316\u3059\u308b\u5834\u5408\n# pvcreate /dev/sdb /dev/sdc /dev/sdd\n\n\n1.3.\u30d6\u30ed\u30c3\u30af\u30c7\u30d0\u30a4\u30b9\u306e\u8868\u793a\n\uff65PV\u3068\u3057\u3066\u4f7f\u7528\u53ef\u80fd\u306a\u30d6\u30ed\u30c3\u30af\u30c7\u30d0\u30a4\u30b9\u306e\u8868\u793a\n# lvmdiskscan\n\n\n1.4.PV\u306e\u8868\u793a\nLVM\u306e\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u60c5\u5831\u3092\u8868\u793a\u3059\u308b\u306b\u306fpvs, pvdisplay, pvscan\u304c\u3042\u308b.\n\uff65pvs:1PV\u6bce\u306b1\u884c\u305a\u3064\u8868\u793a\u3059\u308b\n# pvs\n  PV         VG         Fmt  Attr PSize  PFree\n  /dev/sdb1  VolGroup00 lvm2 a--  20.00g 20.00g\n\n\uff65pvdisplay:\u5404PV\u306e\u8a73\u7d30\u60c5\u5831\u3092\u8868\u793a\n# pvdisplay\n  --- Physical volume ---\n  PV Name               /dev/sdb1\n  VG Name               VolGroup00\n  PV Size               20.00 GiB / not usable 3.00 MiB\n  Allocatable           yes\n  PE Size               4.00 MiB\n  Total PE              5119\n  Free PE               5119\n  Allocated PE          0\n  PV UUID               85SJvt-2VGL-MoZq-KsOV-ACAV-U8zC-cwbITn\n\n\uff65pvscan:\u691c\u51fa\u3055\u308c\u308b\u5168\u3066\u306eLVm\u30d6\u30ed\u30c3\u30af\u30c7\u30d0\u30a4\u30b9\u306e\u8868\u793a\n# pvscan\n  PV /dev/sdb1   VG VolGroup00   lvm2 [20.00 GiB / 20.00 GiB free]\n  Total: 1 [20.00 GiB] / in use: 1 [20.00 GiB] / in no VG: 0 [0   ]\n\n\n\u203b \u7279\u5b9a\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30b9\u30ad\u30e3\u30f3\u3057\u306a\u3044\u3088\u3046lvm.conf\u306b\u30d5\u30a3\u30eb\u30bf\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\n  \u2192pvchange\u30b3\u30de\u30f3\u30c9\u3067\u7a7a\u304d\u9818\u57df\u306b\u7269\u7406\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u3092\u5272\u308a\u5f53\u3066\u3089\u308c\u306a\u3044\u3088\u3046\u306b\u3067\u304d\u308b\u307f\u305f\u3044\n\n1.5.PV\u30b5\u30a4\u30ba\u306e\u5909\u66f4\n\uff65pvrisize\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u53ef\u80fd.LVM\u304c\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f7f\u7528\u4e2d\u3067\u3082\u5b9f\u884c\u53ef\u80fd.\n\n1.6.PV\u306e\u524a\u9664\n\u203b \u524a\u9664\u3059\u308bPV\u304cVG\u3067\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306fvgreduce\u30b3\u30de\u30f3\u30c9\u3067VG\u304b\u3089PV\u3092\u53d6\u9664\u304f\u3053\u3068\n# pvdisplay\n  \"/dev/sdb1\" is a new physical volume of \"20.00 GiB\"\n  --- NEW Physical volume ---\n  PV Name               /dev/sdb1\n  VG Name\n  PV Size               20.00 GiB\n  Allocatable           NO\n  PE Size               0\n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               85SJvt-2VGL-MoZq-KsOV-ACAV-U8zC-cwbITn\n\n# pvremove /dev/sdb1\n  Labels on physical volume \"/dev/sdb1\" successfully wiped\n\n\n2.\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7(VG)\u306e\u7ba1\u7406\n\n2.1.VG\u306e\u4f5c\u6210\n# pvs \u2190 PV\u60c5\u5831\u3092\u8868\u793a\n  PV         VG   Fmt  Attr PSize  PFree\n  /dev/sdb1       lvm2 ---  20.00g 20.00g\n\n# vgcreate VG01 /dev/sdb1 \u2190 VG01\u3068\u3044\u3046\u540d\u524d\u306eVG\u3092\u4f5c\u6210(\u30c7\u30d0\u30a4\u30b9\u306f\u8907\u6570\u9078\u629e\u53ef)\n  Volume group \"VG01\" successfully created\n\n\uff65vgcreate\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u30674MB\u306e\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u306b\u5206\u5272\u3055\u308c\u308b.\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u30b5\u30a4\u30ba\u306e\u6307\u5b9a\u3084VG\u306b\u8ffd\u52a0\u3067\u304d\u308bPV\u306e\u6570\u3092\u5236\u9650\u3059\u308b\u3053\u3068\u306a\u3069\u304c\u53ef\u80fd.\u307e\u305f,\u5272\u5f53\u30dd\u30ea\u30b7\u30fc\u306b\u95a2\u3057\u3066\u3082\u30aa\u30d7\u30b7\u30e7\u30f3\u6307\u5b9a\u304c\u3067\u304d\u308b.\n\uff65LVM\u306eVG\u3068\u305d\u306e\u914d\u4e0b\u306ePV\u306f/dev/vg/lv/\u306b\u914d\u7f6e\u3055\u308c\u308b.\n/dev///\u2190\u306a\u66f8\u5f0f\n\u203b \u5bfe\u5fdc\u3059\u308bPV\u304c\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u5834\u5408\u8868\u793a\u3055\u308c\u308b.\n\n2.2.VG\u306e\u8868\u793a\n\uff65VG\u3067\u306fvgs\u3068vgdisplay\u30b3\u30de\u30f3\u30c9\u304c\u3042\u308b.\n\uff65vgs:1\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u4ed8\u304d1\u884c\u3067\u8868\u793a\n# vgs\n  VG   #PV #LV #SN Attr   VSize  VFree\n  VG01   1   0   0 wz--n- 20.00g 20.00g\n\n\uff65vgdisplay:VG\u306e\u30b5\u30a4\u30ba,\u30a8\u30af\u30b9\u30c6\u30f3\u30c8,PV\u306e\u6570\u306a\u3069\u3092\u8868\u793a\n# vgdisplay \u2190 VG\u540d\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\n  --- Volume group ---\n  VG Name               VG01\n  System ID\n  Format                lvm2\n  Metadata Areas        1\n  Metadata Sequence No  1\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                0\n  Cur LV                0\n  Open LV               0\n  Max PV                0\n  Cur PV                1\n  Act PV                1\n  VG Size               20.00 GiB\n  PE Size               4.00 MiB\n  Total PE              5119\n  Alloc PE / Size       0 / 0\n  Free  PE / Size       5119 / 20.00 GiB\n  VG UUID               ot0rzm-1yCy-Yz3b-D7Df-2DFW-0dDB-7bA21I\n\n\n2.3.\u30ad\u30e3\u30c3\u30b7\u30e5\u30d5\u30a1\u30a4\u30eb\u306e\u69cb\u7bc9\n\uff65/etc/lvm/cache/.cache\u30d5\u30a1\u30a4\u30eb\u5185\u306eLVM\u30ad\u30e3\u30c3\u30b7\u30e5\u30d5\u30a1\u30a4\u30eb\u304c\u66f4\u65b0\u3055\u308c\u308b.\n \u30b7\u30b9\u30c6\u30e0\u8d77\u52d5\u6642\u3084vgcreate\u5b9f\u884c\u6642\u306a\u3069\u306b\u81ea\u52d5\u5b9f\u884c\u3055\u308c\u308b\u304c,\u624b\u52d5\u3067\u5b9f\u884c\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u5834\u5408\u304c\u3042\u308b.\n \u2192SAN\u306b\u30c7\u30a3\u30b9\u30af\u3092\u8ffd\u52a0\u3057\u305f\u5834\u5408\u3084PV\u3068\u3057\u3066\u30e9\u30d9\u30eb\u4ed8\u3055\u308c\u305f\u65b0\u3057\u3044\u30c7\u30a3\u30b9\u30af\u3092\u30db\u30c3\u30c8\u30d7\u30e9\u30b0\u3059\u308b\u5834\u5408\u306a\u3069\u306b\u5fc5\u8981\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u307f\u305f\u3044.\n# vgscan\n  Reading all physical volumes.  This may take a while...\n  Found volume group \"VG01\" using metadata type lvm2\n\n\n2.4.VG\u304b\u3089PV\u306e\u524a\u9664\n\uff65VG\u304b\u3089\u672a\u4f7f\u7528\u306ePV\u3092\u524a\u9664\u3059\u308b\u306b\u306fvgreduce\u3092\u4f7f\u7528\u3059\u308b.\n\u2192\u8a72\u5f53\u306ePV\u304cLV\u306b\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3059\u308b\u306b\u306fpvdisplay\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\n# pvdisplay /dev/sdb1\n  --- Physical volume ---\n  PV Name               /dev/sdb1\n  VG Name               VG01\n  PV Size               20.00 GiB / not usable 3.00 MiB\n  Allocatable           yes\n  PE Size               4.00 MiB\n  Total PE              5119\n  Free PE               5119\n  Allocated PE          0\n  PV UUID               1UVxod-Mhi0-AU3R-0SvL-nAks-FnWD-YocaTr\n\n# vgreduce <VG\u540d> <\u30c7\u30d0\u30a4\u30b9\u540d> \u2190\u8907\u6570\u6307\u5b9a\u53ef\n\n\u203b PV\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u5834\u5408pvmove\u30b3\u30de\u30f3\u30c9\u3067\u30c7\u30fc\u30bf\u3092\u5225\u306ePV\u3078\u79fb\u884c\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308b.\n\u30e1\u30e2:VG\u306bPV\u304c1\u3064\u306e\u6642\u306bvgreduce\u3092\u3057\u305f\u3089\u6012\u3089\u308c\u305f,\u7d20\u76f4\u306bvgremove\u3057\u305f\u65b9\u304c\u3044\u3044?\n# vgreduce VG01 /dev/sdb1\n  Can't remove final physical volume \"/dev/sdb1\" from volume group \"VG01\"\n\n\n2.5.VG\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u5909\u66f4\n\uff65VG\u306b\u8ffd\u52a0\u3067\u304d\u308bPV\u306e\u6700\u5927\u6570\u306e\u6307\u5b9a\u3084,VG\u306e\u30a2\u30af\u30c6\u30a3\u30d6\u5316/\u975e\u30a2\u30af\u30c6\u30a3\u30d6\u5316\u306a\u3069\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u5909\u66f4\u306fvgchange\u30b3\u30de\u30f3\u30c9\u3067\u5909\u66f4\u3067\u304d\u308b.\n\n2.6.VG\u306e\u524a\u9664\n# vgremove VG01 \u2190 VG\u540d\u3092\u6307\u5b9a\n  Volume group \"VG01\" successfully removed\n# vgs\n# \n\n\n2.6.\u305d\u306e\u4ed6\u3067\u304d\u308b\u3053\u3068\n\u305d\u306e\u4ed6VG\u306e\u5206\u5272(vgsplit)\u3084\u7d50\u5408(vgmerge),VG\u540d\u306e\u5909\u66f4(vgrename)\u306a\u3069\u304c\u53ef\u80fd\u3060\u3051\u3069\u8a73\u7d30\u306f\u5272\u611b\n\n3.\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0(LV)\u306e\u7ba1\u7406\n\n3.1.LV\u306e\u4f5c\u6210\n\uff65VG01\u3068\u3044\u3046VG\u306b2G\u30683G\u306eLV\u3092\u4f5c\u6210\u3059\u308b\n\u2192\u540d\u524d\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u81ea\u52d5\u7684\u306b\uff62lvol+\u30dc\u30ea\u30e5\u30fc\u30e0\u756a\u53f7\uff63\u3067\u4f5c\u6210\u3055\u308c\u308b.\n\u2192\u307e\u305f,\u30b5\u30a4\u30ba\u306fb(byte), K(kilobyte), M(MG), G(GB)\u3068\u304b\u6307\u5b9a\u3067\u304d\u308b(\u30c7\u30d5\u30a9\u30eb\u30c8\u306fMB) \n# lvcreate -L 2G VG01\n  Logical volume \"lvol0\" created.\n# lvcreate -L 3000 VG01 \n  Logical volume \"lvol1\" created.\n# lvcreate -L 3000 -n hoge VG01 \u2190 VG(VG0)\u306b3000MB\u306ehoge\u3068\u3044\u3046LV\u3092\u4f5c\u6210\n  Logical volume \"hoge\" created.\n# lvs\n  LV    VG   Attr       LSize Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert\n  hoge  VG01 -wi-a----- 2.93g \u21903000=3GB\u3067\u306f\u306a\u3044\u307f\u305f\u3044\n  lvol0 VG01 -wi-a----- 2.00g\n  lvol1 VG01 -wi-a----- 3.00g\n\n\uff65\u7a7a\u304d\u9818\u57df\u5168\u3066\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\n# lvcreate -l 100%FREE VG01\n  Logical volume \"lvol3\" created.\n\u203b -l\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u305d\u306e\u4ed6\u306b\u3082VG\u30b5\u30a4\u30ba\u3092%\u6307\u5b9a\u3057\u3066LV\u30b5\u30a4\u30ba\u3068\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd.\n\n\n3.2.LV\u306e\u8868\u793a\n\uff65lvs,lvdisplay,lvscan\u306e3\u3064.\n# lvs\n  LV    VG   Attr       LSize Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert\n  hoge  VG01 -wi-a----- 2.93g                                                   \n  lvol0 VG01 -wi-a----- 2.00g                                                   \n  lvol1 VG01 -wi-a----- 3.00g\n\n\uff65lvdisplay:\u30b5\u30a4\u30ba,\u30ec\u30a4\u30a2\u30a6\u30c8,\u30de\u30c3\u30d4\u30f3\u30b0\u306a\u3069\u3092\u8868\u793a\n# lvdisplay\n  --- Logical volume ---\n  LV Path                /dev/VG01/lvol0\n  LV Name                lvol0\n  VG Name                VG01\n  LV UUID                afVtJj-cUaZ-5Tl1-PNZy-6W5t-iA3s-hLSLGy\n  LV Write Access        read/write\n  LV Creation host, time nekousa-cent6, 2016-01-27 10:57:54 -0500\n  LV Status              available\n  # open                 0\n  LV Size                2.00 GiB\n  Current LE             512\n  Segments               1\n  Allocation             inherit\n  Read ahead sectors     auto\n  - currently set to     256\n  Block device           253:0\n(\u7701\u7565)\n\n\uff65lvscan:\u30b7\u30b9\u30c6\u30e0\u5185\u5168\u3066\u306eLV\u3092\u4e00\u89a7\u8868\u793a\u3059\u308b.\n# lvscan\n  ACTIVE            '/dev/VG01/lvol0' [2.00 GiB] inherit\n  ACTIVE            '/dev/VG01/lvol1' [3.00 GiB] inherit\n  ACTIVE            '/dev/VG02/hoge' [2.93 GiB] inherit\n\n\n3.3.LV\u306e\u524a\u9664\n\uff65LV\u3092\u524a\u9664\u3059\u308b\u5834\u5408\u306fLV\u3092\u30a2\u30f3\u30de\u30a6\u30f3\u30c8\u5f8c\u306b\u4e0b\u8a18\u306e\u3088\u3046\u306b\u3059\u308b.\n#lvremove /dev/VG01/lvol2\nDo you really want to remove active logical volume lvol2? [y/n]: y\n  Logical volume \"lvol2\" successfully removed\n# lvscan\n  ACTIVE            '/dev/VG01/lvol0' [2.00 GiB] inherit\n  ACTIVE            '/dev/VG01/lvol3' [12.07 GiB] inherit\n# lvremove /dev/VG01/lvol3\nDo you really want to remove active logical volume lvol3? [y/n]: y\n  Logical volume \"lvol3\" successfully removed\n# lvscan\n  ACTIVE            '/dev/VG01/lvol0' [2.00 GiB] inherit\n# lvs\n  LV    VG   Attr       LSize Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert\n  lvol0 VG01 -wi-a----- 2.00g\n\n\n3.4.\u305d\u306e\u4ed6\n\uff65\u305d\u306e\u4ed6,\u30dc\u30ea\u30e5\u30fc\u30e0\u62e1\u5f35,\u30b9\u30c8\u30e9\u30a4\u30d7\u5316\u30dc\u30ea\u30e5\u30fc\u30e0\u3084,\u30df\u30e9\u30fc\u5316LV,\u30b7\u30f3\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u306a\u3069\u3044\u308d\u3044\u308d\u3067\u304d\u308b\u3051\u3069\u5272\u611b\n\n\n\u53c2\u8003\u306b\u3057\u305f\u3082\u306e:[Red Hat Enterprise Linux 6 \u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u306e\u7ba1\u7406(pdf)](https://goo.gl/bMSSOl \"\")\n\n\n## 0.\u524d\u7f6e\u304d\u3068\u304b\n\u203b GRUB Legacy\u306fLVM\u672a\u30b5\u30dd\u30fc\u30c8.\n\u2192LVM\u306e\u4e2d\u306b/boot\u306f\u304a\u3051\u306a\u3044.(GRUB2\u306e\u5834\u5408\u306f\u53ef.)\nGRUB Legacy\u3067LVM\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f/boot\u3092\u5206\u5272\u3057\u3066\u4f5c\u6210\u3057\u76f4\u63a5\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3059\u308b\u3053\u3068.\n\n#####\u5229\u70b9\n\uff65\u5bb9\u91cf\u306e\u67d4\u8edf\u6027:\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u8907\u6570\u306e\u30c7\u30a3\u30b9\u30af\u306b\u307e\u305f\u304c\u3063\u3066\u62e1\u5f35\u53ef\u80fd\n\uff65\u518d\u5909\u66f4\u53ef\u80fd\u306a\u30b9\u30c8\u30ec\u30fc\u30b8\u30d7\u30fc\u30eb\n\uff65\u30c7\u30a3\u30b9\u30af\u306e\u30b9\u30c8\u30e9\u30a4\u30d4\u30f3\u30b0:2\u3064\u4ee5\u4e0a\u306e\u30c7\u30a3\u30b9\u30af\u306b\u307e\u305f\u304c\u3063\u3066\u30c7\u30fc\u30bf\u3092\u30b9\u30c8\u30e9\u30a4\u30d7\u3059\u308b\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u4f5c\u6210\u304c\u53ef\u80fd\n\uff65\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\n\u3068\u304b\u3044\u308d\u3044\u308d\n\n#####\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0(PV):\n\uff65LVM\u8ad6\u7406\u30dc\u30fc\u30ea\u30e5\u30fc\u30e0\u3088\u3046\u306b\u7269\u7406\u30c7\u30d0\u30a4\u30b9\u3092\u4f7f\u7528\u3059\u308b\u306b\u306fPV\u3068\u3057\u3066\u521d\u671f\u5316\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b.\n\uff65\u521d\u671f\u5316\u3059\u308b\u3068\u5148\u982d\u306b\u30e9\u30d9\u30eb\u304c\u4ed8\u52a0\u3055\u308c\u308b.\u3053\u306e\u30e9\u30d9\u30eb\u306f2\u756a\u76ee\u306e512\u30d0\u30a4\u30c8\u30bb\u30af\u30bf\u306b\u306b\u914d\u7f6e\u3055\u308c\u308b(\u30c7\u30d5\u30a9\u30eb\u30c8)\n\u2192\u5148\u982d\u304b\u30894\u30bb\u30af\u30bf\u4ee5\u5185\u306a\u3089\u3044\u3044\u307f\u305f\u3044\n\uff65\u30e9\u30d9\u30eb\u306f\u30c7\u30d0\u30a4\u30b9\u3092PV\u3068\u3057\u3066\u8b58\u5225\u3059\u308b\u3082\u3067\u3042\u308a,\u3053\u308c\u306b\u306f\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u7528\u306eUUID\u304c\u542b\u307e\u308c\u308c\u308b.\n\uff65LVM\u30e1\u30bf\u30c7\u30fc\u30bf\u306b\u306f\u30b7\u30b9\u30c6\u30e0\u4e0a\u306eLVM\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u306e\u8a73\u7d30\u8a2d\u5b9a\u304c\u542b\u307e\u308c\u308b.\n\u2192\u3053\u308c\u3089\u306f\u540c\u4e00\u306e\u30b3\u30d4\u30fc\u304c\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u5185\u306e\u3059\u3079\u3066\u306ePV\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u9818\u57df\u3067\u4fdd\u6301\u3055\u308c\u308b.\n\n#####LVM\u30dc\u30ea\u30e5\u30fc\u30e0\u30ec\u30a4\u30a2\u30a6\u30c8\n\uff65PV\u306e\u7269\u7406\u30ec\u30a4\u30a2\u30a6\u30c8\u306e\u3053\u3068.\n\uff65LVM\u30e9\u30d9\u30eb\u306f2\u30bb\u30af\u30bf\u76ee\u306b\u3042\u308a,\u6b21\u306b\u30e1\u30bf\u30c7\u30fc\u30bf\u9818\u57df,\u30c7\u30d0\u30a4\u30b9\u306e\u4f7f\u7528\u53ef\u80fd\u9818\u57df\u306e\u9806\u306b\u7d9a\u304f.\n\n#####\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7(VG)\n\uff65PV\u306fVG\u306b\u7d71\u5408\u3055\u308c\u308b.\u2192\u8ad6\u7406\u30dc\u30fc\u30ea\u30e5\u30fc\u30e0\u306b\u5272\u308a\u5f53\u3066\u308b\u305f\u3081\u306e\u30c7\u30a3\u30b9\u30af\u9818\u57df\u30d7\u30fc\u30eb\u304c\u3067\u304d\u308b.\n\uff65\u5272\u5f53\u53ef\u80fd\u306a\u30c7\u30a3\u30b9\u30af\u9818\u57df\u306f\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u3068\u547c\u3070\u308c\u308b\u56fa\u5b9a\u30b5\u30a4\u30ba\u306e\u5358\u4f4d\u306b\u5206\u5272\u3055\u308c\u308b.\n\u21921\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u304c\u5272\u5f53\u53ef\u80fd\u306a\u6700\u5c0f\u5358\u4f4d.(\u30c7\u30d5\u30a9\u30eb\u30c84MB)\n\u2192\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u5185\u3067\u306f\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u306f\u7269\u7406\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u3068\u3068\u547c\u3070\u308c\u308b.\n\uff65\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u7269\u7406\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u3068\u540c\u3058\u30b5\u30a4\u30ba\u306e\u8ad6\u7406\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u3092\u5272\u308a\u5f53\u3066\u53ef\u80fd.\n\n\n\u3068\u308a\u3042\u3048\u305a\u3056\u3063\u304f\u308a\u307e\u3068\u307e\u308b\u306a\u3089PV>VG>LV\u306e3\u3064\u306e\u95a2\u4fc2\u3092\u306a\u3093\u3068\u306a\u304f\u7406\u89e3\u3059\u308c\u3070\u4f5c\u6210\u304f\u3089\u3044\u307e\u3067\u306f\n\u5927\u4e08\u592b\u3058\u3083\u306a\u3044\u304b\u306a\uff64\u3068\n\n## 1.\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0(PV)\u306e\u7ba1\u7406\n#####1.1 \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30bf\u30a4\u30d7\u306e\u4f5c\u6210\n\uff65\u9069\u5b9cparted\u3084fdisk\u3092\u7528\u3044\u3066\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u2190\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u4f5c\u6210\u3059\u308b\u5834\u5408\n\u203bdos\u306e\u5834\u5408\u306f\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3ID\u30920x8e\u3068\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\n\n##### 1.2.PV\u306e\u4f5c\u6210\n```shell-session\n\uff65\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u521d\u671f\u5316\u3059\u308b\u5834\u5408\n# pvcreate /dev/sdb1\nPhysical Volume \u201c/dev/sdb1\u201d successfully created\n\n\uff65\u8907\u6570\u306e\u30c7\u30d0\u30a4\u30b9\u3092\u521d\u671f\u5316\u3059\u308b\u5834\u5408\n# pvcreate /dev/sdb /dev/sdc /dev/sdd\n```\n\n##### 1.3.\u30d6\u30ed\u30c3\u30af\u30c7\u30d0\u30a4\u30b9\u306e\u8868\u793a\n\n```shell-session\n\uff65PV\u3068\u3057\u3066\u4f7f\u7528\u53ef\u80fd\u306a\u30d6\u30ed\u30c3\u30af\u30c7\u30d0\u30a4\u30b9\u306e\u8868\u793a\n# lvmdiskscan\n```\n\n##### 1.4.PV\u306e\u8868\u793a\nLVM\u306e\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u60c5\u5831\u3092\u8868\u793a\u3059\u308b\u306b\u306fpvs, pvdisplay, pvscan\u304c\u3042\u308b.\n\n```shell-session\n\uff65pvs:1PV\u6bce\u306b1\u884c\u305a\u3064\u8868\u793a\u3059\u308b\n# pvs\n  PV         VG         Fmt  Attr PSize  PFree\n  /dev/sdb1  VolGroup00 lvm2 a--  20.00g 20.00g\n\n\uff65pvdisplay:\u5404PV\u306e\u8a73\u7d30\u60c5\u5831\u3092\u8868\u793a\n# pvdisplay\n  --- Physical volume ---\n  PV Name               /dev/sdb1\n  VG Name               VolGroup00\n  PV Size               20.00 GiB / not usable 3.00 MiB\n  Allocatable           yes\n  PE Size               4.00 MiB\n  Total PE              5119\n  Free PE               5119\n  Allocated PE          0\n  PV UUID               85SJvt-2VGL-MoZq-KsOV-ACAV-U8zC-cwbITn\n\n\uff65pvscan:\u691c\u51fa\u3055\u308c\u308b\u5168\u3066\u306eLVm\u30d6\u30ed\u30c3\u30af\u30c7\u30d0\u30a4\u30b9\u306e\u8868\u793a\n# pvscan\n  PV /dev/sdb1   VG VolGroup00   lvm2 [20.00 GiB / 20.00 GiB free]\n  Total: 1 [20.00 GiB] / in use: 1 [20.00 GiB] / in no VG: 0 [0   ]\n\n```\n\n\u203b \u7279\u5b9a\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u30b9\u30ad\u30e3\u30f3\u3057\u306a\u3044\u3088\u3046lvm.conf\u306b\u30d5\u30a3\u30eb\u30bf\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\n  \u2192pvchange\u30b3\u30de\u30f3\u30c9\u3067\u7a7a\u304d\u9818\u57df\u306b\u7269\u7406\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u3092\u5272\u308a\u5f53\u3066\u3089\u308c\u306a\u3044\u3088\u3046\u306b\u3067\u304d\u308b\u307f\u305f\u3044\n\n##### 1.5.PV\u30b5\u30a4\u30ba\u306e\u5909\u66f4\n\uff65pvrisize\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u53ef\u80fd.LVM\u304c\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u4f7f\u7528\u4e2d\u3067\u3082\u5b9f\u884c\u53ef\u80fd.\n\n##### 1.6.PV\u306e\u524a\u9664\n\u203b \u524a\u9664\u3059\u308bPV\u304cVG\u3067\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306fvgreduce\u30b3\u30de\u30f3\u30c9\u3067VG\u304b\u3089PV\u3092\u53d6\u9664\u304f\u3053\u3068\n\n```shell-session\n# pvdisplay\n  \"/dev/sdb1\" is a new physical volume of \"20.00 GiB\"\n  --- NEW Physical volume ---\n  PV Name               /dev/sdb1\n  VG Name\n  PV Size               20.00 GiB\n  Allocatable           NO\n  PE Size               0\n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               85SJvt-2VGL-MoZq-KsOV-ACAV-U8zC-cwbITn\n\n# pvremove /dev/sdb1\n  Labels on physical volume \"/dev/sdb1\" successfully wiped\n```\n\n## 2.\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7(VG)\u306e\u7ba1\u7406\n##### 2.1.VG\u306e\u4f5c\u6210\n```shell-session\n# pvs \u2190 PV\u60c5\u5831\u3092\u8868\u793a\n  PV         VG   Fmt  Attr PSize  PFree\n  /dev/sdb1       lvm2 ---  20.00g 20.00g\n\n# vgcreate VG01 /dev/sdb1 \u2190 VG01\u3068\u3044\u3046\u540d\u524d\u306eVG\u3092\u4f5c\u6210(\u30c7\u30d0\u30a4\u30b9\u306f\u8907\u6570\u9078\u629e\u53ef)\n  Volume group \"VG01\" successfully created\n```\n\uff65vgcreate\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u30674MB\u306e\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u306b\u5206\u5272\u3055\u308c\u308b.\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u30a8\u30af\u30b9\u30c6\u30f3\u30c8\u30b5\u30a4\u30ba\u306e\u6307\u5b9a\u3084VG\u306b\u8ffd\u52a0\u3067\u304d\u308bPV\u306e\u6570\u3092\u5236\u9650\u3059\u308b\u3053\u3068\u306a\u3069\u304c\u53ef\u80fd.\u307e\u305f,\u5272\u5f53\u30dd\u30ea\u30b7\u30fc\u306b\u95a2\u3057\u3066\u3082\u30aa\u30d7\u30b7\u30e7\u30f3\u6307\u5b9a\u304c\u3067\u304d\u308b.\n\n\uff65LVM\u306eVG\u3068\u305d\u306e\u914d\u4e0b\u306ePV\u306f/dev/vg/lv/\u306b\u914d\u7f6e\u3055\u308c\u308b.\n/dev/<VG\u540d>/<PV\u540d>/\u2190\u306a\u66f8\u5f0f\n\u203b \u5bfe\u5fdc\u3059\u308bPV\u304c\u30a2\u30af\u30c6\u30a3\u30d6\u306a\u5834\u5408\u8868\u793a\u3055\u308c\u308b.\n\n##### 2.2.VG\u306e\u8868\u793a\n\uff65VG\u3067\u306fvgs\u3068vgdisplay\u30b3\u30de\u30f3\u30c9\u304c\u3042\u308b.\n\n```shell-session\n\uff65vgs:1\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u4ed8\u304d1\u884c\u3067\u8868\u793a\n# vgs\n  VG   #PV #LV #SN Attr   VSize  VFree\n  VG01   1   0   0 wz--n- 20.00g 20.00g\n\n\uff65vgdisplay:VG\u306e\u30b5\u30a4\u30ba,\u30a8\u30af\u30b9\u30c6\u30f3\u30c8,PV\u306e\u6570\u306a\u3069\u3092\u8868\u793a\n# vgdisplay \u2190 VG\u540d\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\n  --- Volume group ---\n  VG Name               VG01\n  System ID\n  Format                lvm2\n  Metadata Areas        1\n  Metadata Sequence No  1\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                0\n  Cur LV                0\n  Open LV               0\n  Max PV                0\n  Cur PV                1\n  Act PV                1\n  VG Size               20.00 GiB\n  PE Size               4.00 MiB\n  Total PE              5119\n  Alloc PE / Size       0 / 0\n  Free  PE / Size       5119 / 20.00 GiB\n  VG UUID               ot0rzm-1yCy-Yz3b-D7Df-2DFW-0dDB-7bA21I\n```\n##### 2.3.\u30ad\u30e3\u30c3\u30b7\u30e5\u30d5\u30a1\u30a4\u30eb\u306e\u69cb\u7bc9\n\uff65/etc/lvm/cache/.cache\u30d5\u30a1\u30a4\u30eb\u5185\u306eLVM\u30ad\u30e3\u30c3\u30b7\u30e5\u30d5\u30a1\u30a4\u30eb\u304c\u66f4\u65b0\u3055\u308c\u308b.\n \u30b7\u30b9\u30c6\u30e0\u8d77\u52d5\u6642\u3084vgcreate\u5b9f\u884c\u6642\u306a\u3069\u306b\u81ea\u52d5\u5b9f\u884c\u3055\u308c\u308b\u304c,\u624b\u52d5\u3067\u5b9f\u884c\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u5834\u5408\u304c\u3042\u308b.\n \u2192SAN\u306b\u30c7\u30a3\u30b9\u30af\u3092\u8ffd\u52a0\u3057\u305f\u5834\u5408\u3084PV\u3068\u3057\u3066\u30e9\u30d9\u30eb\u4ed8\u3055\u308c\u305f\u65b0\u3057\u3044\u30c7\u30a3\u30b9\u30af\u3092\u30db\u30c3\u30c8\u30d7\u30e9\u30b0\u3059\u308b\u5834\u5408\u306a\u3069\u306b\u5fc5\u8981\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u307f\u305f\u3044.\n\n```shell-session\n# vgscan\n  Reading all physical volumes.  This may take a while...\n  Found volume group \"VG01\" using metadata type lvm2\n```\n\n##### 2.4.VG\u304b\u3089PV\u306e\u524a\u9664\n```shell-session\n\uff65VG\u304b\u3089\u672a\u4f7f\u7528\u306ePV\u3092\u524a\u9664\u3059\u308b\u306b\u306fvgreduce\u3092\u4f7f\u7528\u3059\u308b.\n\u2192\u8a72\u5f53\u306ePV\u304cLV\u306b\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3059\u308b\u306b\u306fpvdisplay\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\n# pvdisplay /dev/sdb1\n  --- Physical volume ---\n  PV Name               /dev/sdb1\n  VG Name               VG01\n  PV Size               20.00 GiB / not usable 3.00 MiB\n  Allocatable           yes\n  PE Size               4.00 MiB\n  Total PE              5119\n  Free PE               5119\n  Allocated PE          0\n  PV UUID               1UVxod-Mhi0-AU3R-0SvL-nAks-FnWD-YocaTr\n\n# vgreduce <VG\u540d> <\u30c7\u30d0\u30a4\u30b9\u540d> \u2190\u8907\u6570\u6307\u5b9a\u53ef\n```\n\u203b PV\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u5834\u5408pvmove\u30b3\u30de\u30f3\u30c9\u3067\u30c7\u30fc\u30bf\u3092\u5225\u306ePV\u3078\u79fb\u884c\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308b.\n\n\u30e1\u30e2:VG\u306bPV\u304c1\u3064\u306e\u6642\u306bvgreduce\u3092\u3057\u305f\u3089\u6012\u3089\u308c\u305f,\u7d20\u76f4\u306bvgremove\u3057\u305f\u65b9\u304c\u3044\u3044?\n\n```shell-session\n# vgreduce VG01 /dev/sdb1\n  Can't remove final physical volume \"/dev/sdb1\" from volume group \"VG01\"\n```\n##### 2.5.VG\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u5909\u66f4\n\uff65VG\u306b\u8ffd\u52a0\u3067\u304d\u308bPV\u306e\u6700\u5927\u6570\u306e\u6307\u5b9a\u3084,VG\u306e\u30a2\u30af\u30c6\u30a3\u30d6\u5316/\u975e\u30a2\u30af\u30c6\u30a3\u30d6\u5316\u306a\u3069\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u5909\u66f4\u306fvgchange\u30b3\u30de\u30f3\u30c9\u3067\u5909\u66f4\u3067\u304d\u308b.\n\n##### 2.6.VG\u306e\u524a\u9664\n\n```shell-session\n# vgremove VG01 \u2190 VG\u540d\u3092\u6307\u5b9a\n  Volume group \"VG01\" successfully removed\n# vgs\n# \n```\n##### 2.6.\u305d\u306e\u4ed6\u3067\u304d\u308b\u3053\u3068\n\u305d\u306e\u4ed6VG\u306e\u5206\u5272(vgsplit)\u3084\u7d50\u5408(vgmerge),VG\u540d\u306e\u5909\u66f4(vgrename)\u306a\u3069\u304c\u53ef\u80fd\u3060\u3051\u3069\u8a73\u7d30\u306f\u5272\u611b\n\n## 3.\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0(LV)\u306e\u7ba1\u7406\n##### 3.1.LV\u306e\u4f5c\u6210\n\n```shell-session\n\uff65VG01\u3068\u3044\u3046VG\u306b2G\u30683G\u306eLV\u3092\u4f5c\u6210\u3059\u308b\n\u2192\u540d\u524d\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u81ea\u52d5\u7684\u306b\uff62lvol+\u30dc\u30ea\u30e5\u30fc\u30e0\u756a\u53f7\uff63\u3067\u4f5c\u6210\u3055\u308c\u308b.\n\u2192\u307e\u305f,\u30b5\u30a4\u30ba\u306fb(byte), K(kilobyte), M(MG), G(GB)\u3068\u304b\u6307\u5b9a\u3067\u304d\u308b(\u30c7\u30d5\u30a9\u30eb\u30c8\u306fMB) \n# lvcreate -L 2G VG01\n  Logical volume \"lvol0\" created.\n# lvcreate -L 3000 VG01 \n  Logical volume \"lvol1\" created.\n# lvcreate -L 3000 -n hoge VG01 \u2190 VG(VG0)\u306b3000MB\u306ehoge\u3068\u3044\u3046LV\u3092\u4f5c\u6210\n  Logical volume \"hoge\" created.\n# lvs\n  LV    VG   Attr       LSize Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert\n  hoge  VG01 -wi-a----- 2.93g \u21903000=3GB\u3067\u306f\u306a\u3044\u307f\u305f\u3044\n  lvol0 VG01 -wi-a----- 2.00g\n  lvol1 VG01 -wi-a----- 3.00g\n  \n\uff65\u7a7a\u304d\u9818\u57df\u5168\u3066\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\n# lvcreate -l 100%FREE VG01\n  Logical volume \"lvol3\" created.\n\u203b -l\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u305d\u306e\u4ed6\u306b\u3082VG\u30b5\u30a4\u30ba\u3092%\u6307\u5b9a\u3057\u3066LV\u30b5\u30a4\u30ba\u3068\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd.\n```\n##### 3.2.LV\u306e\u8868\u793a\n\uff65lvs,lvdisplay,lvscan\u306e3\u3064.\n\n```shell-session\n# lvs\n  LV    VG   Attr       LSize Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert\n  hoge  VG01 -wi-a----- 2.93g                                                   \n  lvol0 VG01 -wi-a----- 2.00g                                                   \n  lvol1 VG01 -wi-a----- 3.00g\n\n\uff65lvdisplay:\u30b5\u30a4\u30ba,\u30ec\u30a4\u30a2\u30a6\u30c8,\u30de\u30c3\u30d4\u30f3\u30b0\u306a\u3069\u3092\u8868\u793a\n# lvdisplay\n  --- Logical volume ---\n  LV Path                /dev/VG01/lvol0\n  LV Name                lvol0\n  VG Name                VG01\n  LV UUID                afVtJj-cUaZ-5Tl1-PNZy-6W5t-iA3s-hLSLGy\n  LV Write Access        read/write\n  LV Creation host, time nekousa-cent6, 2016-01-27 10:57:54 -0500\n  LV Status              available\n  # open                 0\n  LV Size                2.00 GiB\n  Current LE             512\n  Segments               1\n  Allocation             inherit\n  Read ahead sectors     auto\n  - currently set to     256\n  Block device           253:0\n(\u7701\u7565)\n\n\uff65lvscan:\u30b7\u30b9\u30c6\u30e0\u5185\u5168\u3066\u306eLV\u3092\u4e00\u89a7\u8868\u793a\u3059\u308b.\n# lvscan\n  ACTIVE            '/dev/VG01/lvol0' [2.00 GiB] inherit\n  ACTIVE            '/dev/VG01/lvol1' [3.00 GiB] inherit\n  ACTIVE            '/dev/VG02/hoge' [2.93 GiB] inherit\n```\n###3.3.LV\u306e\u524a\u9664\n\n```shell-session\n\uff65LV\u3092\u524a\u9664\u3059\u308b\u5834\u5408\u306fLV\u3092\u30a2\u30f3\u30de\u30a6\u30f3\u30c8\u5f8c\u306b\u4e0b\u8a18\u306e\u3088\u3046\u306b\u3059\u308b.\n#lvremove /dev/VG01/lvol2\nDo you really want to remove active logical volume lvol2? [y/n]: y\n  Logical volume \"lvol2\" successfully removed\n# lvscan\n  ACTIVE            '/dev/VG01/lvol0' [2.00 GiB] inherit\n  ACTIVE            '/dev/VG01/lvol3' [12.07 GiB] inherit\n# lvremove /dev/VG01/lvol3\nDo you really want to remove active logical volume lvol3? [y/n]: y\n  Logical volume \"lvol3\" successfully removed\n# lvscan\n  ACTIVE            '/dev/VG01/lvol0' [2.00 GiB] inherit\n# lvs\n  LV    VG   Attr       LSize Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert\n  lvol0 VG01 -wi-a----- 2.00g\n```  \n### 3.4.\u305d\u306e\u4ed6\n\uff65\u305d\u306e\u4ed6,\u30dc\u30ea\u30e5\u30fc\u30e0\u62e1\u5f35,\u30b9\u30c8\u30e9\u30a4\u30d7\u5316\u30dc\u30ea\u30e5\u30fc\u30e0\u3084,\u30df\u30e9\u30fc\u5316LV,\u30b7\u30f3\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u306a\u3069\u3044\u308d\u3044\u308d\u3067\u304d\u308b\u3051\u3069\u5272\u611b\n\n", "tags": ["Linux", "Linux\u30b3\u30de\u30f3\u30c9", "lvm"]}