{"context": " More than 1 year has passed since last update.\n\n\u6d41\u308c\n\npcre_compile() \u3067\u6761\u4ef6\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\npcre_exec() \u3067\u6bd4\u8f03\u3059\u308b\npcre_free() \u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u6761\u4ef6\u3092\u89e3\u653e\n\n\u540c\u3058\u6761\u4ef6\u3067\u6bd4\u8f03\u3092\u7e70\u308a\u8fd4\u3059\u306a\u3089\u3070\u3001pcre_cpmile\u3092\u4e00\u56de\u3060\u3051\u884c\u3044pcre\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5171\u6709\u3059\u308c\u3070\u5b9f\u884c\u52b9\u7387\u304c\u826f\u3044\n\u30d1\u30bf\u30fc\u30f3\u304c\u6b63\u3057\u304f\u306a\u3044\u6642\u306fpcre_compile()\u306fNULL\u3092\u8fd4\u3059\nerrStr\u306b\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u5165\u308b\n\u4f7f\u7528\u6e08\u306b\u306a\u3063\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306fpcre_free\u3067\u5fc5\u305a\u89e3\u653e\u3059\u308b\u3053\u3068\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\npcre_match.c\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <pcre.h>\n\nint\npcre_match(const char *subj, char *pattern)\n{\n    int matched;\n    pcre *re;\n    const char* errStr;\n    int errOffset;\n    int ovector = 0;\n\n    re = pcre_compile(pattern, PCRE_EXTENDED, &errStr, &errOffset, NULL);\n    if(re == NULL) {\n        fprintf(stderr, \"pcre pattern matching compile error: message[%s]\\n\", errStr);\n        return -1;\n    }\n\n    matched = pcre_exec(re, NULL, subj, (int)strlen(subj), 0, 0, &ovector, 1);\n    pcre_free(re);\n\n    if (matched < 0) {\n        return 0;\n    }\n\n    return 1;\n}\n\nint\nmain(int argc, char *argv[])\n{\n    if (pcre_match(\"http://foobar.example.com/\", \"(^http|^https)://\") == 1) {\n        printf(\"matched\\n\");\n    } else {\n        printf(\"unmatched\\n\");\n    }\n\n    return 0;\n}\n\n\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\n$  gcc -o pcre_match pcre_match.c -lpcre\n\n\n\u8a73\u3057\u3044\u4f7f\u7528\u65b9\u6cd5\n\u30aa\u30f3\u30e9\u30a4\u30f3\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u53c2\u7167\n$ man pcre_exec\n\npcre\u304c\u6301\u3063\u3066\u3044\u308b\u95a2\u6570\u306e\u4e00\u89a7\n$ man -k pcre\n\n## \u6d41\u308c\n\n1. pcre_compile() \u3067\u6761\u4ef6\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\n2. pcre_exec() \u3067\u6bd4\u8f03\u3059\u308b\n3. pcre_free() \u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u6761\u4ef6\u3092\u89e3\u653e\n\n\u540c\u3058\u6761\u4ef6\u3067\u6bd4\u8f03\u3092\u7e70\u308a\u8fd4\u3059\u306a\u3089\u3070\u3001pcre_cpmile\u3092\u4e00\u56de\u3060\u3051\u884c\u3044pcre\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5171\u6709\u3059\u308c\u3070\u5b9f\u884c\u52b9\u7387\u304c\u826f\u3044\n\n\u30d1\u30bf\u30fc\u30f3\u304c\u6b63\u3057\u304f\u306a\u3044\u6642\u306fpcre_compile()\u306fNULL\u3092\u8fd4\u3059\nerrStr\u306b\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u5165\u308b\n\n\u4f7f\u7528\u6e08\u306b\u306a\u3063\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306fpcre_free\u3067\u5fc5\u305a\u89e3\u653e\u3059\u308b\u3053\u3068\n\n## \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\n```c:pcre_match.c\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <pcre.h>\n\nint\npcre_match(const char *subj, char *pattern)\n{\n    int matched;\n    pcre *re;\n    const char* errStr;\n    int errOffset;\n    int ovector = 0;\n\n    re = pcre_compile(pattern, PCRE_EXTENDED, &errStr, &errOffset, NULL);\n    if(re == NULL) {\n        fprintf(stderr, \"pcre pattern matching compile error: message[%s]\\n\", errStr);\n        return -1;\n    }\n\n    matched = pcre_exec(re, NULL, subj, (int)strlen(subj), 0, 0, &ovector, 1);\n    pcre_free(re);\n\n    if (matched < 0) {\n        return 0;\n    }\n\n    return 1;\n}\n\nint\nmain(int argc, char *argv[])\n{\n    if (pcre_match(\"http://foobar.example.com/\", \"(^http|^https)://\") == 1) {\n        printf(\"matched\\n\");\n    } else {\n        printf(\"unmatched\\n\");\n    }\n\n    return 0;\n}\n```\n\n## \u30b3\u30f3\u30d1\u30a4\u30eb\n\n<pre>\n$  gcc -o pcre_match pcre_match.c -lpcre\n</pre>\n\n## \u8a73\u3057\u3044\u4f7f\u7528\u65b9\u6cd5\n\n\u30aa\u30f3\u30e9\u30a4\u30f3\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u53c2\u7167\n\n<pre>\n$ man pcre_exec\n</pre>\n\npcre\u304c\u6301\u3063\u3066\u3044\u308b\u95a2\u6570\u306e\u4e00\u89a7\n\n<pre>\n$ man -k pcre\n</pre>\n", "tags": ["C\u8a00\u8a9e", "pcre", "\u6b63\u898f\u8868\u73fe"]}