{"context": " More than 1 year has passed since last update.\u53c2\u8003: Getting started with logstash\n\u307b\u3068\u3093\u3069\u4e0a\u8a18\u30b5\u30a4\u30c8\u306e\u5185\u5bb9\u305d\u306e\u307e\u307e\u3067\u3059\u3002\n\n\u6e96\u5099\njava \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n$ java -version\nPicked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8\njava version \"1.6.0_65\"\nJava(TM) SE Runtime Environment (build 1.6.0_65-b14-462-11M4609)\nJava HotSpot(TM) 64-Bit Server VM (build 20.65-b04-462, mixed mode)\n\n\u3068\u308a\u3042\u3048\u305a\u30011.6 \u3067\u3057\u305f\u304c\u52d5\u3044\u305f\u3063\u307d\u3044\u3067\u3059\u3002\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 & \u89e3\u51cd\ncurl -O https://download.elasticsearch.org/logstash/logstash/logstash-1.4.0.tar.gz\ntar zxvf logstash-1.4.0.tar.gz\ncd logstash-1.4.0\n\n\n\u3068\u308a\u3042\u3048\u305a\u8d77\u52d5\nbin/logstash -e 'input { stdin { } } output { stdout {} }'\n\n\u4e0a\u8a18\u306f\u6a19\u6e96\u5165\u529b\u304b\u3089\u53ce\u96c6\u3057\u305f\u30ed\u30b0\u3092\u6a19\u6e96\u51fa\u529b\u306b\u66f8\u304d\u3060\u3059\u3060\u3051\u306e\u8a2d\u5b9a\u3067\u3059\u3002\n\u305f\u3081\u3057\u306bhello\u3068\u304b\u6253\u3064\u3068\nhoge  <- \u5165\u529b\u3057\u305f\u5185\u5bb9\n2014-04-12T12:05:53.958+0000 nakamatsu.local hoge <- \u51fa\u529b\u3055\u308c\u305f\u5185\u5bb9\n\n\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\nlogstash \u3067\u306f\u51fa\u529b\u7d50\u679c\u3092\u69d8\u3005\u306a\u5f62\u5f0f\u306b\u52a0\u5de5\u3059\u308b'codec'\u3092\u6301\u3063\u3066\u3044\u308b\u3002\n\u4f8b\u3048\u3070'rubydebug'\u3092\u4f7f\u3046\u3068\u3001Ruby\u306e\u30cf\u30c3\u30b7\u30e5\u5f62\u5f0f\u306e\u6587\u5b57\u5217\u3068\u3057\u3066\u51fa\u529b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\nhello\n{\n       \"message\" => \"hello\",\n      \"@version\" => \"1\",\n    \"@timestamp\" => \"2014-04-12T12:11:57.424Z\",\n          \"host\" => \"hogehoge\"\n}\n\n\n\u51fa\u529b\u3092Elasticsearch\u306b\u683c\u7d0d\u3059\u308b\n\nElasticsearch \u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3068\u8d77\u52d5\n\u9069\u5f53\u306a\u5834\u6240\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u3001Elasticserch \u3092\u8d77\u52d5\u3059\u308b\ncurl -O https://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-1.0.1.tar.gz\ntar zxvf elasticsearch-1.0.1.tar.gz\ncd elasticsearch-1.0.1/\n./bin/elasticsearch\n\n\n\u51fa\u529b\u5148\u3092 Elasticsearch \u306b\u3059\u308b\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b logstash \u3092\u8d77\u52d5\u3059\u308b\u3068\u51fa\u529b\u5148\u304c Elasticsearch \u306b\u306a\u308b\nbin/logstash -e 'input { stdin { } } output { elasticsearch { host => localhost } }'\n\n\u8a66\u3057\u306b\u6a19\u6e96\u5165\u529b\u304b\u3089\u9069\u5f53\u306a\u6587\u5b57\u3092\u5165\u308c\u3066\u3001Elasticsearch \u306b\u5165\u3063\u305f\u304b\u3069\u3046\u304b\u78ba\u8a8d\u3059\u308b\ncurl 'http://localhost:9200/_search?pretty'\n\nElasticsearch \u306fHTTP\u306aAPI\u304b\u3089\u30a2\u30af\u30bb\u30b9\u53ef\u80fd\u3067\u4e0a\u8a18\u306eURL\u3092\u53e9\u304f\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306aJSON\u6587\u5b57\u5217\u304c\u5e30\u3063\u3066\u304f\u308b\u3002\n{\n  \"took\" : 1,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 10,\n    \"successful\" : 10,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 3,\n    \"max_score\" : 1.0,\n    \"hits\" : [ {\n      \"_index\" : \"logstash-2014.04.12\",\n      \"_type\" : \"logs\",\n      \"_id\" : \"H7dSnW_TSTOVno_V25JYlQ\",\n      \"_score\" : 1.0, \"_source\" : {\"message\":\"hello\",\"@version\":\"1\",\"@timestamp\":\"2014-04-12T12:17:51.216Z\",\"host\":\"nakamatsu.local\"}\n    }, {\n      \"_index\" : \"logstash-2014.04.07\",\n      \"_type\" : \"logs\",\n      \"_id\" : \"_sisyTEvSRaqXt6TR3pXwg\",\n      \"_score\" : 1.0, \"_source\" : {\"message\":\"hoge\",\"@version\":\"1\",\"@timestamp\":\"2014-04-07T04:00:34.590Z\",\"host\":\"nakamatsu.local\"}\n    }, {\n      \"_index\" : \"logstash-2014.04.07\",\n      \"_type\" : \"logs\",\n      \"_id\" : \"_K48GJWeTLSUZzgrNXD7fg\",\n      \"_score\" : 1.0, \"_source\" : {\"message\":\"you know, for logs\",\"@version\":\"1\",\"@timestamp\":\"2014-04-07T03:54:50.355Z\",\"host\":\"nakamatsu.local\"}\n    } ]\n  }\n}\n\n\n\n\u3068\u308a\u3042\u3048\u305a\u3053\u3053\u307e\u3067\u3002\n\n\u53c2\u8003: [Getting started with logstash](http://logstash.net/docs/1.4.0/tutorials/getting-started-with-logstash)\n\n\u307b\u3068\u3093\u3069\u4e0a\u8a18\u30b5\u30a4\u30c8\u306e\u5185\u5bb9\u305d\u306e\u307e\u307e\u3067\u3059\u3002\n\n# \u6e96\u5099\n\njava \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n\n```\n$ java -version\nPicked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8\njava version \"1.6.0_65\"\nJava(TM) SE Runtime Environment (build 1.6.0_65-b14-462-11M4609)\nJava HotSpot(TM) 64-Bit Server VM (build 20.65-b04-462, mixed mode)\n```\n\n\u3068\u308a\u3042\u3048\u305a\u30011.6 \u3067\u3057\u305f\u304c\u52d5\u3044\u305f\u3063\u307d\u3044\u3067\u3059\u3002\n\n# \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 & \u89e3\u51cd\n\n```\ncurl -O https://download.elasticsearch.org/logstash/logstash/logstash-1.4.0.tar.gz\ntar zxvf logstash-1.4.0.tar.gz\ncd logstash-1.4.0\n```\n\n\n# \u3068\u308a\u3042\u3048\u305a\u8d77\u52d5\n\n\n```\nbin/logstash -e 'input { stdin { } } output { stdout {} }'\n```\n\n\u4e0a\u8a18\u306f\u6a19\u6e96\u5165\u529b\u304b\u3089\u53ce\u96c6\u3057\u305f\u30ed\u30b0\u3092\u6a19\u6e96\u51fa\u529b\u306b\u66f8\u304d\u3060\u3059\u3060\u3051\u306e\u8a2d\u5b9a\u3067\u3059\u3002\n\u305f\u3081\u3057\u306b`hello`\u3068\u304b\u6253\u3064\u3068\n\n```\nhoge  <- \u5165\u529b\u3057\u305f\u5185\u5bb9\n2014-04-12T12:05:53.958+0000 nakamatsu.local hoge <- \u51fa\u529b\u3055\u308c\u305f\u5185\u5bb9\n```\n\n\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nlogstash \u3067\u306f\u51fa\u529b\u7d50\u679c\u3092\u69d8\u3005\u306a\u5f62\u5f0f\u306b\u52a0\u5de5\u3059\u308b'codec'\u3092\u6301\u3063\u3066\u3044\u308b\u3002\n\u4f8b\u3048\u3070'rubydebug'\u3092\u4f7f\u3046\u3068\u3001Ruby\u306e\u30cf\u30c3\u30b7\u30e5\u5f62\u5f0f\u306e\u6587\u5b57\u5217\u3068\u3057\u3066\u51fa\u529b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n```\nhello\n{\n       \"message\" => \"hello\",\n      \"@version\" => \"1\",\n    \"@timestamp\" => \"2014-04-12T12:11:57.424Z\",\n          \"host\" => \"hogehoge\"\n}\n```\n\n# \u51fa\u529b\u3092Elasticsearch\u306b\u683c\u7d0d\u3059\u308b\n\n## Elasticsearch \u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3068\u8d77\u52d5\n\n\u9069\u5f53\u306a\u5834\u6240\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u3001Elasticserch \u3092\u8d77\u52d5\u3059\u308b\n\n```\ncurl -O https://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-1.0.1.tar.gz\ntar zxvf elasticsearch-1.0.1.tar.gz\ncd elasticsearch-1.0.1/\n./bin/elasticsearch\n```\n\n## \u51fa\u529b\u5148\u3092 Elasticsearch \u306b\u3059\u308b\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b logstash \u3092\u8d77\u52d5\u3059\u308b\u3068\u51fa\u529b\u5148\u304c Elasticsearch \u306b\u306a\u308b\n\n```\nbin/logstash -e 'input { stdin { } } output { elasticsearch { host => localhost } }'\n```\n\n\u8a66\u3057\u306b\u6a19\u6e96\u5165\u529b\u304b\u3089\u9069\u5f53\u306a\u6587\u5b57\u3092\u5165\u308c\u3066\u3001Elasticsearch \u306b\u5165\u3063\u305f\u304b\u3069\u3046\u304b\u78ba\u8a8d\u3059\u308b\n\n```\ncurl 'http://localhost:9200/_search?pretty'\n```\n\nElasticsearch \u306fHTTP\u306aAPI\u304b\u3089\u30a2\u30af\u30bb\u30b9\u53ef\u80fd\u3067\u4e0a\u8a18\u306eURL\u3092\u53e9\u304f\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306aJSON\u6587\u5b57\u5217\u304c\u5e30\u3063\u3066\u304f\u308b\u3002\n\n```\n{\n  \"took\" : 1,\n  \"timed_out\" : false,\n  \"_shards\" : {\n    \"total\" : 10,\n    \"successful\" : 10,\n    \"failed\" : 0\n  },\n  \"hits\" : {\n    \"total\" : 3,\n    \"max_score\" : 1.0,\n    \"hits\" : [ {\n      \"_index\" : \"logstash-2014.04.12\",\n      \"_type\" : \"logs\",\n      \"_id\" : \"H7dSnW_TSTOVno_V25JYlQ\",\n      \"_score\" : 1.0, \"_source\" : {\"message\":\"hello\",\"@version\":\"1\",\"@timestamp\":\"2014-04-12T12:17:51.216Z\",\"host\":\"nakamatsu.local\"}\n    }, {\n      \"_index\" : \"logstash-2014.04.07\",\n      \"_type\" : \"logs\",\n      \"_id\" : \"_sisyTEvSRaqXt6TR3pXwg\",\n      \"_score\" : 1.0, \"_source\" : {\"message\":\"hoge\",\"@version\":\"1\",\"@timestamp\":\"2014-04-07T04:00:34.590Z\",\"host\":\"nakamatsu.local\"}\n    }, {\n      \"_index\" : \"logstash-2014.04.07\",\n      \"_type\" : \"logs\",\n      \"_id\" : \"_K48GJWeTLSUZzgrNXD7fg\",\n      \"_score\" : 1.0, \"_source\" : {\"message\":\"you know, for logs\",\"@version\":\"1\",\"@timestamp\":\"2014-04-07T03:54:50.355Z\",\"host\":\"nakamatsu.local\"}\n    } ]\n  }\n}\n\n\n```\n\n\u3068\u308a\u3042\u3048\u305a\u3053\u3053\u307e\u3067\u3002\n", "tags": ["Logstash"]}