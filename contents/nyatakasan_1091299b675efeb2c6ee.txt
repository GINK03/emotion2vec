{"tags": ["letsencrypt", "nginx"], "context": "\n\nLet's encrypt\u306eWeb\u8a8d\u8a3c\u304c\u901a\u3089\u306a\u3044\u30b1\u30fc\u30b9\nLet's encryt \u3067\u65e2\u306b\u52d5\u4f5c\u3057\u3066\u3044\u308bWeb\u30b5\u30fc\u30d0\u3092\u8a8d\u8a3c\u3059\u308b\u5834\u5408\u3001\n\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3084WordPress\u3001Drupal\u306a\u3069\u306e\u30a2\u30d7\u30ea\u304c\u3001\n\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u30ad\u30e3\u30c3\u30c1\u3059\u308b\u8a2d\u5b9a\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3067\u3001Web\u8a8d\u8a3c\u306b\u5931\u6557\u3059\u308b\u5834\u5408\u304c\u3042\u308b\u3002\n\nFailed authorization procedure. <<\u8a8d\u8a3c\u3057\u305f\u3044Web\u30b5\u30fc\u30d0\u306e\u30c9\u30e1\u30a4\u30f3>> (http-01): urn:acme:error:unauthorized :: The client lacks suffijp/.well-known/acme-challenge/tpRITlAFEtuJgZvhQwF_eRDRKu8XoLkkrwlLpp6AFTw: \"<html>\n<head><title>403 Forbidden</title></head>\n<body bgcolor=\"white\">\n<center><h1>403 Forbidden</h1></center>\n<hr><center>\"\n\nIMPORTANT NOTES:\n - The following errors were reported by the server:\n\n   Domain: <<\u8a8d\u8a3c\u3057\u305f\u3044Web\u30b5\u30fc\u30d0\u306e\u30c9\u30e1\u30a4\u30f3>>\n   Type:   unauthorized\n   Detail: Invalid response from\n   http://<<\u8a8d\u8a3c\u3057\u305f\u3044Web\u30b5\u30fc\u30d0\u306e\u30c9\u30e1\u30a4\u30f3>>/.well-known/acme-challenge/tpRITlAFEtuJgZvhQwF_eRDRKu8XoLkkrwlLpp6AFTw:\n   \"<html>\n   <head><title>403 Forbidden</title></head>\n   <body bgcolor=\"white\">\n   <center><h1>403 Forbidden</h1></center>\n   <hr><center>\"\n\n   To fix these errors, please make sure that your domain name was\n   entered correctly and the DNS A record(s) for that domain\n   contain(s) the right IP address.\n\n\n\u89e3\u6c7a\u65b9\u6cd5\n\u305d\u306e\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u901a\u308a\n\u5225\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u8a8d\u8a3c\u3092\u9003\u304c\u3059\u3053\u3068\u3067\u3001\n\u8a8d\u8a3c\u8a31\u53ef\u3092\u51fa\u3057\u3066\u3082\u3089\u3046\u3053\u3068\u304c\u51fa\u6765\u308b\u3002\n\u30c1\u30e3\u30ec\u30f3\u30b8\u65b9\u5f0f\u306e\u8a8d\u8a3c\u3067\u3042\u308a\n\u4e0d\u6b63\u306b\u8a8d\u8a3c\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u3082\u306a\u3044\u306e\u3067\u3001\u8a8d\u8a3c\u81ea\u4f53\u3082\u554f\u984c\u306a\u3057\u3002\n\u8907\u6570\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u5834\u5408\u306f\u3001\nnginx:/etc/nginx/global/letsencypt.conf\n\u3068\u304b\u306b\u307e\u3068\u3081\u3066Include\u3057\u3066\u304a\u3051\u3070\u826f\u3044\u3068\u601d\u3046\u3002\n\nNginx\u306e\u5834\u5408\n\n/etc/nginx/conf.d/virtual.conf\nserver {\n    listen 80 default_server;\n    server_name <<\u8a8d\u8a3c\u3057\u305f\u3044Web\u30b5\u30fc\u30d0\u306e\u30c9\u30e1\u30a4\u30f3>>;\n\n    #\u4ee5\u4e0b\u306e2\u884c\u3092\u8ffd\u52a0\u3057\u3066\u3001\u5225\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u8a8d\u8a3c\u3059\u308b\u3002\n    location ^~ /.well-known/acme-challenge/ {\n      root /usr/share/nginx/html;\n    }\n    ...\n}\n\n\n\nletsencrypt\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n./letsencrypt-auto certonly --webroot --webroot-path /usr/share/nginx/html -d <<\u8a8d\u8a3c\u3057\u305f\u3044Web\u30b5\u30fc\u30d0\u306e\u30c9\u30e1\u30a4\u30f3>>\n\n\n\n\nletsencrypt\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\nIMPORTANT NOTES:\n - Congratulations! Your certificate and chain have been saved at\n   /etc/letsencrypt/live/<<\u8a8d\u8a3c\u3057\u305f\u3044Web\u30b5\u30fc\u30d0\u306e\u30c9\u30e1\u30a4\u30f3>>/fullchain.pem. Your\n   cert will expire on 2017-01-06. To obtain a new or tweaked version\n   of this certificate in the future, simply run letsencrypt-auto\n   again. To non-interactively renew *all* of your certificates, run\n   \"letsencrypt-auto renew\"\n - If you like Certbot, please consider supporting our work by:\n\n   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate\n   Donating to EFF:                    https://eff.org/donate-le\n\n\n\n\u53c2\u8003\nLet's encrypt\u904b\u7528\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\nhttp://qiita.com/tkyk@github/items/9b6ba55bb2a6a5d90963\nFree SSL/TLS Certificates with Let's Encrypt and NGINX\nhttps://www.nginx.com/blog/free-certificates-lets-encrypt-and-nginx/\n#Let's encrypt\u306eWeb\u8a8d\u8a3c\u304c\u901a\u3089\u306a\u3044\u30b1\u30fc\u30b9\nLet's encryt \u3067\u65e2\u306b\u52d5\u4f5c\u3057\u3066\u3044\u308bWeb\u30b5\u30fc\u30d0\u3092\u8a8d\u8a3c\u3059\u308b\u5834\u5408\u3001\n\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3084WordPress\u3001Drupal\u306a\u3069\u306e\u30a2\u30d7\u30ea\u304c\u3001\n\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u30ad\u30e3\u30c3\u30c1\u3059\u308b\u8a2d\u5b9a\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3067\u3001Web\u8a8d\u8a3c\u306b\u5931\u6557\u3059\u308b\u5834\u5408\u304c\u3042\u308b\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/19439/e7e23d94-ee69-fe8c-9cee-f0f45147682a.png)\n\n```shell-session:\nFailed authorization procedure. <<\u8a8d\u8a3c\u3057\u305f\u3044Web\u30b5\u30fc\u30d0\u306e\u30c9\u30e1\u30a4\u30f3>> (http-01): urn:acme:error:unauthorized :: The client lacks suffijp/.well-known/acme-challenge/tpRITlAFEtuJgZvhQwF_eRDRKu8XoLkkrwlLpp6AFTw: \"<html>\n<head><title>403 Forbidden</title></head>\n<body bgcolor=\"white\">\n<center><h1>403 Forbidden</h1></center>\n<hr><center>\"\n\nIMPORTANT NOTES:\n - The following errors were reported by the server:\n\n   Domain: <<\u8a8d\u8a3c\u3057\u305f\u3044Web\u30b5\u30fc\u30d0\u306e\u30c9\u30e1\u30a4\u30f3>>\n   Type:   unauthorized\n   Detail: Invalid response from\n   http://<<\u8a8d\u8a3c\u3057\u305f\u3044Web\u30b5\u30fc\u30d0\u306e\u30c9\u30e1\u30a4\u30f3>>/.well-known/acme-challenge/tpRITlAFEtuJgZvhQwF_eRDRKu8XoLkkrwlLpp6AFTw:\n   \"<html>\n   <head><title>403 Forbidden</title></head>\n   <body bgcolor=\"white\">\n   <center><h1>403 Forbidden</h1></center>\n   <hr><center>\"\n\n   To fix these errors, please make sure that your domain name was\n   entered correctly and the DNS A record(s) for that domain\n   contain(s) the right IP address.\n```\n\n#\u89e3\u6c7a\u65b9\u6cd5\n\u305d\u306e\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u901a\u308a\n\u5225\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u8a8d\u8a3c\u3092\u9003\u304c\u3059\u3053\u3068\u3067\u3001\n\u8a8d\u8a3c\u8a31\u53ef\u3092\u51fa\u3057\u3066\u3082\u3089\u3046\u3053\u3068\u304c\u51fa\u6765\u308b\u3002\n\n\u30c1\u30e3\u30ec\u30f3\u30b8\u65b9\u5f0f\u306e\u8a8d\u8a3c\u3067\u3042\u308a\n\u4e0d\u6b63\u306b\u8a8d\u8a3c\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u3082\u306a\u3044\u306e\u3067\u3001\u8a8d\u8a3c\u81ea\u4f53\u3082\u554f\u984c\u306a\u3057\u3002\n\n\u8907\u6570\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u5834\u5408\u306f\u3001\nnginx:/etc/nginx/global/letsencypt.conf\n\u3068\u304b\u306b\u307e\u3068\u3081\u3066Include\u3057\u3066\u304a\u3051\u3070\u826f\u3044\u3068\u601d\u3046\u3002\n\n##Nginx\u306e\u5834\u5408\n\n```nginx:/etc/nginx/conf.d/virtual.conf\nserver {\n    listen 80 default_server;\n    server_name <<\u8a8d\u8a3c\u3057\u305f\u3044Web\u30b5\u30fc\u30d0\u306e\u30c9\u30e1\u30a4\u30f3>>;\n\n    #\u4ee5\u4e0b\u306e2\u884c\u3092\u8ffd\u52a0\u3057\u3066\u3001\u5225\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u8a8d\u8a3c\u3059\u308b\u3002\n    location ^~ /.well-known/acme-challenge/ {\n      root /usr/share/nginx/html;\n    }\n    ...\n}\n```\n\n```shell-session:letsencrypt\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n./letsencrypt-auto certonly --webroot --webroot-path /usr/share/nginx/html -d <<\u8a8d\u8a3c\u3057\u305f\u3044Web\u30b5\u30fc\u30d0\u306e\u30c9\u30e1\u30a4\u30f3>>\n```\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/19439/4c58e067-8acd-9db9-6f66-164b2e2d2649.png)\n\n```shell-session:letsencrypt\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\nIMPORTANT NOTES:\n - Congratulations! Your certificate and chain have been saved at\n   /etc/letsencrypt/live/<<\u8a8d\u8a3c\u3057\u305f\u3044Web\u30b5\u30fc\u30d0\u306e\u30c9\u30e1\u30a4\u30f3>>/fullchain.pem. Your\n   cert will expire on 2017-01-06. To obtain a new or tweaked version\n   of this certificate in the future, simply run letsencrypt-auto\n   again. To non-interactively renew *all* of your certificates, run\n   \"letsencrypt-auto renew\"\n - If you like Certbot, please consider supporting our work by:\n\n   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate\n   Donating to EFF:                    https://eff.org/donate-le\n```\n\n#\u53c2\u8003\nLet's encrypt\u904b\u7528\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\nhttp://qiita.com/tkyk@github/items/9b6ba55bb2a6a5d90963\nFree SSL/TLS Certificates with Let's Encrypt and NGINX\nhttps://www.nginx.com/blog/free-certificates-lets-encrypt-and-nginx/\n"}