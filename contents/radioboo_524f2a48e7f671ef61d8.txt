{"context": "\u30df\u30af\u30b7\u30a3\u30b0\u30eb\u30fc\u30d7 Advent Calender 2016\u300117\u65e5\u76ee\u3067\u3059\u3002\n\u300c\u5bb6\u65cf\u30a2\u30eb\u30d0\u30e0 \u307f\u3066\u306d\u300d\u3068\u3044\u3046\u5bb6\u65cf\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u30a2\u30d7\u30ea\u306e\u958b\u767a\u30c1\u30fc\u30e0\u30ea\u30fc\u30c0\u30fc\u3092\u62c5\u5f53\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n2015\u5e74\u3054\u308d\u304b\u3089\u793e\u5185\u306eiOS\u30a8\u30f3\u30b8\u30cb\u30a2\u304c\u30e9\u30f3\u30c1\u30bf\u30a4\u30e0\u3092\u5229\u7528\u3057\u3066\u96c6\u307e\u308a\u3001\u3055\u307e\u3056\u307e\u306a\u30ab\u30f3\u30d5\u30a1\u30ec\u30f3\u30b9\u306a\u3069\u306e\u30d7\u30ec\u30bc\u30f3\u52d5\u753b\u3092\u898b\u308b\u52c9\u5f37\u4f1a\u3092\u90311\u56de\u884c\u3063\u3066\u3044\u307e\u3059\u30022016\u5e74\u3082\u305f\u304f\u3055\u3093\u306e\u52d5\u753b\u3092\u898b\u305f\u306e\u3067\u3001\u305d\u306e\u4e2d\u304b\u3089\u3042\u307e\u308a\u56fd\u5185\u3067\u7d39\u4ecb\u3055\u308c\u3066\u3044\u306a\u3044\u5185\u5bb9\u3067\u3001\u5370\u8c61\u306b\u6b8b\u3063\u305f\u3082\u306e\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\nIGListKit\u306e\u7d39\u4ecb\nIGListKit\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\nhttps://github.com/instagram/IGListKit\nIGListKit\u306fInstagram\u88fd\u306eUICollectionView\u306eframework\u3067\u3059\u3002\nframework\u306b\u6e96\u62e0\u3057\u305f\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u3068\u3001\u8868\u793a\u3057\u305f\u3044\u30c7\u30fc\u30bf\u69cb\u9020\u3092\u3082\u3068\u306bUICollectionView\u304cList\u7cfb\u306e\u8868\u793a\u3092\u7d44\u307f\u4e0a\u3052\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u7279\u5fb4\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30dd\u30a4\u30f3\u30c8\u304c\u6319\u3052\u3089\u308c\u307e\u3059\u3002\n\n\u69d8\u3005\u306a\u578b\u306e\u30c7\u30fc\u30bf\u304c\u542b\u307e\u308c\u308bCollection\u3082\u5358\u7d14\u306a\u30b3\u30fc\u30c9\u3067\u30ea\u30b9\u30c8\u8868\u793a\u3067\u304d\u308b\nCollection\u306e\u5dee\u5206\u3092\u6c17\u306b\u3057\u306a\u304c\u3089performBatchUpdates(_:completion:)\u3084reloadData()\u3092\u7e4a\u7d30\u306b\u53e9\u304d\u308f\u3051\u308b\u3053\u3068\u3092\u3057\u306a\u304f\u3066\u3082\u3088\u3044\nSwift3\u3067\u3082\u554f\u984c\u306a\u304f\u30d7\u30ed\u30b0\u30e9\u30e0\u53ef\u80fd\n\n\u5c11\u3057\u524d\u306b\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u5316\u3055\u308c\u3001\u3064\u3044\u5148\u65e5v2.0.0\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u3088\u3046\u3067\u3059\u3002\n\n\u7d39\u4ecb\u52d5\u753b\n\u3053\u3061\u3089\u306eRealm\u306b\u3088\u308bTry!Swift\u306e\u52d5\u753b\u3067\u77e5\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\nhttps://realm.io/news/tryswift-ryan-nystrom-refactoring-at-scale-lessons-learned-rewriting-instagram-feed/\n\n\u3069\u3046\u3044\u3046\u5834\u9762\u3067\u52b9\u679c\u7684\uff1f\n\n\u30d5\u30a3\u30fc\u30c9\u30fb\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3\u7cfbUI\u306b\u6700\u9069\nInstagram\u3067\u306f\u3001\u30c8\u30c3\u30d7\u306e\u30d5\u30a3\u30fc\u30c9\u3092\u306f\u3058\u3081\u3001\u30a2\u30d7\u30ea\u5185\u306e\u5404\u6240\u3067\u3059\u3067\u306b\u5c0e\u5165\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u52d5\u753b\u306e\u306a\u304b\u3067\u3082\u8a71\u304c\u51fa\u3066\u3044\u307e\u3059\u304c\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u983b\u7e41\u306b\u76ee\u306b\u3059\u308b\u300c\u30d5\u30a3\u30fc\u30c9\u300d\u3084\u300c\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3\u300d\u306e\u3088\u3046\u306a\u8868\u793a\u306f\u3001\u69d8\u3005\u306a\u578b\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u7d44\u307f\u66ff\u3048\u305f\u308a\u30fb\u8db3\u3057\u305f\u308a\u30fb\u5f15\u3044\u305f\u308a\u306a\u3069\u3001\u30d3\u30b8\u30cd\u30b9\u306e\u8981\u6c42\u306b\u3088\u3063\u3066\u6a5f\u80fd\u8981\u4ef6\u304c\u67d4\u8edf\u306b\u5909\u66f4\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u3001\u307e\u305f\u30a8\u30f3\u30b8\u30cb\u30a2\u3068\u3057\u3066\u306f\u305d\u308c\u3089\u306b\u7b54\u3048\u3066\u3044\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u300c\u5bb6\u65cf\u30a2\u30eb\u30d0\u30e0 \u307f\u3066\u306d\u300d\u306b\u304a\u3044\u3066\u3082\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u300c\u8fd1\u6cc1\u300d\u3068\u3044\u3046\u6a5f\u80fd\u3067\u5bb6\u65cf\u306e\u5404\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u3084\u300c\u307f\u305f\u3088\u5c65\u6b74\u300d\u3068\u3044\u3046\u5bb6\u65cf\u306e\u30ed\u30b0\u30a4\u30f3\u5c65\u6b74\u304c\u3072\u3068\u3064\u306e\u30d5\u30a3\u30fc\u30c9\u753b\u9762\u306b\u8868\u793a\u3055\u308c\u308b\u5834\u9762\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3053\u3046\u3044\u3046\u753b\u9762\u306e\u69cb\u7bc9\u306b\u304a\u3044\u3066IGListKit\u304c\u52b9\u679c\u3092\u767a\u63ee\u3057\u307e\u3059\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u5b9f\u88c5\n\u307f\u3066\u306d\u306e\u300c\u8fd1\u6cc1\u300d\u306b\u4f3c\u305f\u753b\u9762\u3092IGListKit\u3067\u958b\u767a\u3057\u305f\u3044\u601d\u3044\u307e\u3059\u3002\n\nFeed\u306e\u8868\u793a\n\nModel\n\u307e\u305a\u3001\u30d5\u30a3\u30fc\u30c9\u306e\u5404\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8868\u73fe\u3059\u308bFeed\u3068\u3044\u3046Model\u3092\u4f5c\u308a\u307e\u3059\u3002\nhttps://github.com/radioboo/ListKitDemo/blob/master/ListKitDemo/Models/Feed.swift\nclass Feed {\n    let id: String\n    let user: User\n    let comment: String\n    let image: UIImage\n\n    init(id: String, user: User, comment: String, image: UIImage) {\n        self.id = id\n        self.user = user\n        self.comment = comment\n        self.image = image\n    }\n}\n\nIGListKit\u3067\u6271\u3046\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306fIGListDiffable\u306b\u6e96\u62e0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nimport IGListKit\n\nextension Feed: IGListDiffable {\n    // Entity\u3092\u30e6\u30cb\u30fc\u30af\u306b\u793a\u3059Identifier\u3068\u306a\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\n    func diffIdentifier() -> NSObjectProtocol {\n        return id as NSObjectProtocol\n    }\n\n    // Entity\u540c\u58eb\u304c\u540c\u4e00\u3067\u3042\u308b\u3053\u3068\u3092\u793a\u3059\u30ed\u30b8\u30c3\u30af\u3092\u5b9f\u88c5\n    func isEqual(toDiffableObject object: IGListDiffable?) -> Bool {\n        if let feed = object as? Feed {\n            return id == feed.id\n        }\n        return false\n    }\n}\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u5b9f\u88c5\u3057\u305fFeed\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306eid\u304c\u540c\u3058\u5834\u5408\u306f\u3001\u540c\u4e00\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u307f\u306a\u3055\u308c\u3001Feed\u578b\u3092\u542b\u3080Collection\u306eupdate\u6642\u306bUI\u306e\u66f4\u65b0\u304c\u30b9\u30ad\u30c3\u30d7\u3055\u308c\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u6319\u52d5\u306fIGListDiff\u3068\u3044\u3046\u5dee\u5206\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u5b9f\u88c5\u306b\u3088\u308a\u5b9f\u73fe\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\nIGListDiff\nIGListDiff\u306f\u3001\u4ee5\u4e0b\u306e\u30d6\u30ed\u30b0\u306b\u3082\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u901a\u308a\u30011978\u5e74\u306ePaul Heckel\u306e\u8ad6\u6587\u3092\u57fa\u306b\u5b9f\u88c5\u3055\u308c\u305f\u3082\u306e\u3068\u306e\u3053\u3068\u3067\u3059\u3002\u975e\u5e38\u306b\u9ad8\u901f\u306a\u306e\u3067\u3001IGListKit\u306f\u3053\u308c\u5358\u4f53\u306e\u5229\u7528\u76ee\u7684\u3067\u3082\u5341\u5206\u4fa1\u5024\u304c\u3042\u308b\u3082\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\uff08\u9ad8\u901f\u3001\u3068\u3044\u3044\u3064\u3064\u3001\u81ea\u5206\u81ea\u8eab\u306f\u307e\u3060\u5927\u898f\u6a21\u306a\u30c7\u30fc\u30bf\u69cb\u9020\u3067\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u691c\u8a3c\u3057\u3066\u306f\u3044\u306a\u3044\u3067\u3059\u2026\uff09\nhttps://engineering.instagram.com/open-sourcing-iglistkit-3d66f1e4e9aa#.6lls1kmdh\nHeader\u3092\u898b\u308b\u3068\u3001\u5dee\u5206\u306e\u6709\u7121\u304b\u3089\u3001inserts/deletes/updates/moves\u306a\u3069\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308bindex\u3092\u7d50\u679c\u3068\u3057\u3066\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\nhttps://github.com/Instagram/IGListKit/blob/master/Source/IGListIndexSetResult.h\n\nSectionController\nSectionController\u3068\u306f\u3001Adapter\u3088\u308a\u30a2\u30b5\u30a4\u30f3\u3055\u308c\u308b\u5358\u4e00\u306eFeed\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u518d\u5229\u7528\u3055\u308c\u308bView(UICollectionViewCell)\u306b\u914d\u7f6e\u3057\u3066\u3044\u304f\u305f\u3081\u306e\u5c0f\u3055\u306aController\u306e\u5b9f\u88c5\u3068\u306a\u308a\u307e\u3059\u3002Cell\u306fXIB\u3067\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3001\u305d\u308c\u3092\u518d\u5229\u7528\u53ef\u80fd\u306a\u5f62\u3067\u521d\u671f\u5316\u3059\u308b\u305f\u3081\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3082\u3042\u308a\u307e\u3059\u3002\nhttps://github.com/radioboo/ListKitDemo/blob/master/ListKitDemo/SectionControllers/FeedSectionController.swift\nfinal class FeedSectionController: IGListSectionController, IGListSectionType {\n\n    var feed: Feed?\n\n    func numberOfItems() -> Int {\n        return 1\n    }\n\n    func sizeForItem(at index: Int) -> CGSize {\n        return CGSize(width: collectionContext!.containerSize.width, height: 100)\n    }\n\n    func cellForItem(at index: Int) -> UICollectionViewCell {\n        guard let feed = feed else {\n            fatalError(\"feed is nil.\")\n        }\n        let cell = collectionContext?.dequeueReusableCell(withNibName: \"FeedCell\", bundle: nil, for: self, at: index) as! FeedCell\n        cell.commentLabel?.text = \"\\(feed.user.nickname)\u3055\u3093\u304c\u300c\\(feed.comment)\u300d\u3068\u30b3\u30e1\u30f3\u30c8\u3057\u307e\u3057\u305f\u3002\"\n        cell.imageView?.image = feed.image\n        return cell\n    }\n\n    func didUpdate(to object: Any) {\n        self.feed = object as? Feed\n    }\n\n    func didSelectItem(at index: Int) {}\n}\n\n\nViewController\n\u3053\u3053\u307e\u3067\u5b9f\u88c5\u3057\u305f\u3089\u3001\u6b21\u306bViewController\u5074\u3067UICollectionView\u3092\u521d\u671f\u5316\u3057\u3001IGListAdapter\u5411\u3051\u306b\u8868\u793a\u3057\u305f\u3044\u30c7\u30fc\u30bf\u3092\u63d0\u4f9b\u3059\u308b\u305f\u3081\u306eDataSource\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3059\u3002\nhttps://github.com/radioboo/ListKitDemo/blob/master/ListKitDemo/Scenes/ViewController.swift\n// Adapter\u3068UICollectionView\u306e\u521d\u671f\u5316\nlazy var adapter: IGListAdapter = {\n    return IGListAdapter(updater: IGListAdapterUpdater(), viewController: self, workingRangeSize: 0)\n}()\n\nlet collectionView = IGListCollectionView(frame: .zero, collectionViewLayout: UICollectionViewFlowLayout())\n\n// IGListAdapterDataSource\u306e\u5b9f\u88c5\nextension ViewController: IGListAdapterDataSource {\n\n    func objects(for listAdapter: IGListAdapter) -> [IGListDiffable] {\n        return [\n            Feed(id: UUID().uuidString, user: allUsers()[0], comment: \"\u306f\u3044\u2026\", image: UIImage(named: \"IMG_005.jpg\")!),\n            Feed(id: UUID().uuidString, user: allUsers()[4], comment: \"\u304a\u3063\u3055\u3093\u305d\u3070\u98df\u3048\u3084\", image: UIImage(named: \"IMG_005.jpg\")!),\n            ...\n        ] as! [IGListDiffable]\n    }\n\n    func listAdapter(_ listAdapter: IGListAdapter, sectionControllerFor object: Any) -> IGListSectionController {\n        return FeedSectionController()\n    }\n\n    func emptyView(for listAdapter: IGListAdapter) -> UIView? {\n        return nil\n    }\n}\n\n\n\u8868\u793a\u78ba\u8a8d\n\u3053\u3053\u307e\u3067\u306e\u5b9f\u88c5\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306bFeed\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u30ba\u30e9\u30c3\u3068\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\u307f\u305f\u3088\u5c65\u6b74\u3092\u30d5\u30a3\u30fc\u30c9\u306b\u8ffd\u52a0\n\u3055\u3089\u306b\u3001\u300c\u307f\u305f\u3088\u5c65\u6b74\u300d\u306e\u90e8\u5206\u3092\u753b\u9762\u4e0a\u90e8\u306b\u8ffd\u52a0\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u57fa\u672c\u7684\u306b\u306f\u4e0a\u8a18\u307e\u3067\u306e\u30b9\u30c6\u30c3\u30d7\u3068\u540c\u69d8\u3001\u5fc5\u8981\u306a\u30af\u30e9\u30b9\u3084\u30d7\u30ed\u30c8\u30b3\u30eb\u306e\u5b9f\u88c5\u3092\u8ffd\u52a0\u3057\u3066\u3044\u304d\u3001DataSource\u306b\u300c\u307f\u305f\u3088\u5c65\u6b74\u300d\u7528\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u3092\u7a81\u3063\u8fbc\u3080\u3068\u3042\u3063\u3055\u308a\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u3067\u3059\u304c\u3001\u3053\u3053\u3067\u306f\u3001\u30d5\u30a3\u30fc\u30c9\u306eCell\u306e\u4e2d\u306b\u3055\u3089\u306bUICollectionView\u3092\u30cd\u30b9\u30c8\u3055\u305b\u305f\u5f62\u3067\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3059\u3002\n\nModel\u30922\u7a2e\u985e\u8ffd\u52a0\n\u5c65\u6b74\u5168\u4f53\u3092\u7ba1\u7406\u3059\u308bUserHistory\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0\u3057\u3001\u305d\u306e\u4e2d\u306b\u30ed\u30b0\u30a4\u30f3\u9806\u306bUser\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6301\u3064\u3088\u3046\u306aModel\u3068\u3057\u3066\u8a2d\u8a08\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306f\u4e21\u65b9\u3068\u3082 IGListDiffable\u306b\u6e96\u62e0\u3057\u3066\u3044\u307e\u3059\u3002\u30b3\u30fc\u30c9\u306f\u30ea\u30f3\u30af\u5148\u3067\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\nUser\n\n\u5c65\u6b74\u306b\u8868\u793a\u3059\u308b\u30e6\u30fc\u30b6\u30fc\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n\n\nUserHistory\n\nUser\u306e\u30ea\u30b9\u30c8\u3092\u62b1\u3048\u305f\u5c65\u6b74\u5168\u4f53\u3092\u8868\u73fe\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n\n\n\nSectionController\u30922\u7a2e\u985e\u8ffd\u52a0\nUICollectionView\u3092\u30cd\u30b9\u30c8\u3055\u305b\u308b\u5834\u5408\u3001\u30cd\u30b9\u30c8\u3055\u305b\u308bUICollectionView\u3092\u8868\u793a\u3059\u308b\u305f\u3081\u306eCell\u3092\u63cf\u753b\u3059\u308bSectionController\u3068\u3001\u30cd\u30b9\u30c8\u3055\u308c\u305fUICollectionView\u5185\u90e8\u3067\u3055\u3089\u306b\u63cf\u753b\u3092\u884c\u3046SectionController\u30922\u7a2e\u985e\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nUserHistorySectionController\nhttps://github.com/radioboo/ListKitDemo/blob/master/ListKitDemo/SectionControllers/UserHistorySectionController.swift\n\u3053\u306eSectionController\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306bCell(EmbeddedCollectionViewCell)\u3092\u8fd4\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u306eCell\u306e\u5b9f\u614b\u306f\u3001Cell\u5185\u90e8\u306bUICollectionView\u3092\u3055\u3089\u306b\u6301\u3063\u305f\u3082\u306e\u3068\u306a\u308a\u307e\u3059\u3002\nfunc cellForItem(at index: Int) -> UICollectionViewCell {\n    let cell = collectionContext!.dequeueReusableCell(of: EmbeddedCollectionViewCell.self, for: self, at: index) as! EmbeddedCollectionViewCell\n    adapter.collectionView = cell.collectionView\n    return cell\n}\n\n\u3055\u3089\u306b\u3001\u3053\u306eSectionController\u306fIGListAdapterDataSource\u306b\u6e96\u62e0\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u5225\u306eSectionContrller\u3092\u8fd4\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u3053\u3067\u8fd4\u3055\u308c\u308bSectionController\u304c\u5b9f\u969b\u306bUser\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e26\u3079\u308bCell\u3092\u63cf\u753b\u3059\u308b\u3082\u306e\u3068\u306a\u308a\u307e\u3059\u3002\nextension UserHistorySectionController: IGListAdapterDataSource {\n\n    func objects(for listAdapter: IGListAdapter) -> [IGListDiffable] {\n        return (userHistory?.users)!\n    }\n\n    func listAdapter(_ listAdapter: IGListAdapter, sectionControllerFor object: Any) -> IGListSectionController {\n        return EmbeddedSectionController()\n    }\n\n    func emptyView(for listAdapter: IGListAdapter) -> UIView? {\n        return nil\n    }\n}\n\n\nEmbeddedSectionController\nhttps://github.com/radioboo/ListKitDemo/blob/master/ListKitDemo/SectionControllers/EmbeddedSectionController.swift\n\u3053\u306eSectionController\u306f\u3001\u5c65\u6b74\u306b\u542b\u307e\u308c\u308bUser\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092UICollectionViewCell\u306b\u63cf\u753b\u3059\u308b\u30b7\u30f3\u30d7\u30eb\u306a\u30af\u30e9\u30b9\u306b\u306a\u308a\u307e\u3059\u3002\n\nViewController\u306e\u4fee\u6b63\nViewController\u306b\u304a\u3044\u3066\u306f\u3001\u8868\u793a\u3059\u308b\u30c7\u30fc\u30bf\u69cb\u9020\u306e\u5148\u982d\u306b\u300c\u307f\u305f\u3088\u5c65\u6b74\u300d\u7528\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u3092\u7a81\u3063\u8fbc\u3093\u3067\u304a\u304d\u307e\u3059\u3002\n\u305d\u3057\u3066\u3001DataSource\u306b\u304a\u3044\u3066\u578b\u3054\u3068\u306b\u8fd4\u3059SectionController\u3092\u5909\u3048\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3092\u3059\u308b\u3068\u3001\u578b\u306b\u5fdc\u3058\u305fCell\u306e\u63cf\u753b\u304c\u884c\u308f\u308c\u307e\u3059\u3002\nfunc objects(for listAdapter: IGListAdapter) -> [IGListDiffable] {\n    return [\n        UserHistory(users: [\n            User(id: UUID().uuidString, nickname: \"radioboo\"), \n            User(id: UUID().uuidString, nickname: \"ainame\"),\n            ...\n        ]),\n        Feed(id: UUID().uuidString, user: allUsers()[0], comment: \"\u306f\u3044\u2026\", image: UIImage(named: \"IMG_005.jpg\")!),\n        Feed(id: UUID().uuidString, user: allUsers()[4], comment: \"\u304a\u3063\u3055\u3093\u305d\u3070\u98df\u3048\u3084\", image: UIImage(named: \"IMG_005.jpg\")!),\n        ...\n    ] as! [IGListDiffable]\n}\n\nfunc listAdapter(_ listAdapter: IGListAdapter, sectionControllerFor object: Any) -> IGListSectionController {\n    if object is UserHistory {\n        return UserHistorySectionController()\n    } else {\n        return FeedSectionController()\n    }\n}\n\n\n\u8868\u793a\u78ba\u8a8d\n\u3053\u3053\u307e\u3067\u306e\u5b9f\u88c5\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u753b\u9762\u4e0a\u90e8\u306b\u300c\u307f\u305f\u3088\u5c65\u6b74\u300d\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\n\u8981\u4ef6\u306e\u5909\u66f4\u3067\u3055\u3089\u306b\u5225\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0\n\u3068\u3042\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u7a81\u5982\u3001\u30d7\u30ed\u30c0\u30af\u30c8\u30aa\u30fc\u30ca\u30fc\u304b\u3089\u3053\u3046\u3044\u3046\u8981\u6c42\u304c\u3042\u3063\u305f\u3068\u3057\u307e\u3057\u3087\u3046\u3002\n\u3042\u305f\u3089\u3057\u3044\u6a5f\u80fd\u3092\u3082\u3063\u3068\u4f7f\u3063\u3066\u3082\u3089\u3044\u305f\u3044\u304b\u3089\u3001\u8fd1\u6cc1\u30d5\u30a3\u30fc\u30c9\u306e3\u884c\u76ee\u306b\u5fc5\u305a\u8a98\u5c0e\u3059\u308b\u305f\u3081\u306e\u30d5\u30a3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u3066\u6b32\u3057\u3044\n\n\u65e2\u5b58\u306e\u30b3\u30fc\u30c9\u3067\u30b3\u30fc\u30c9\u306e\u5909\u66f4\u3092\u6df7\u4e71\u306a\u304f\u4e0a\u8a18\u306e\u8981\u4ef6\u3092\u5b9f\u73fe\u3059\u308b\u3053\u3068\u304c\u6c17\u697d\u306b\u3067\u304d\u308b\u3067\u3057\u3087\u3046\u304b\uff1f\n\u96e3\u3057\u304f\u306f\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001// NOTE: \u6b74\u53f2\u7684\u7d4c\u7def\u307f\u305f\u3044\u306a\u30b3\u30e1\u30f3\u30c8\u304c\u591a\u767a\u3059\u308b\u696d\u306e\u6df1\u3044\u30b3\u30fc\u30c9\u304c\u751f\u307f\u51fa\u3055\u308c\u308b\u5371\u967a\u6027\u304c\u3042\u308a\u307e\u3059\u3002\nIGListKit\u3092\u5229\u7528\u3057\u3066\u3044\u308c\u3070\u3001\n\nIGListDiffable\u306b\u6e96\u62e0\u3057\u305fModel\u3092\u5b9f\u88c5\n\u8868\u793a\u3055\u308c\u308bView(UICollectionViewCell)\u3092\u5b9f\u88c5\nSectionController\u3092\u5b9f\u88c5\nIGListAdapterDataSource\u306e\u5b9f\u88c5\u3067\u8868\u793a\u3057\u305f\u3044\u578b\u306eSectionController\u3092\u8fd4\u3059\n\u65e2\u5b58\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u306b\u3044\u5909\u66f4\u3092\u52a0\u3048\u308b\n\n\u3068\u3044\u3046\u624b\u9806\u3092\u8e0f\u3081\u3070\u6df7\u4e71\u306e\u306a\u3044\u3001\u898b\u901a\u3057\u306e\u826f\u3044\u30b3\u30fc\u30c9\u304c\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u5b9f\u88c5\u5dee\u5206\u306f\u3001\u4ee5\u4e0b\u306ePull Request\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nhttps://github.com/radioboo/ListKitDemo/pull/3/files\n\n\n\u30b5\u30f3\u30d7\u30eb\n\u5b9f\u88c5\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u306e\u30b3\u30fc\u30c9\u306e\u5168\u3066\u306fGitHub\u306bpush\u3057\u3066\u3042\u308b\u306e\u3067\u3001\u8208\u5473\u306e\u3042\u308b\u65b9\u306f\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nhttps://github.com/radioboo/ListKitDemo\n\n\u307e\u3068\u3081\n\n\u30e6\u30fc\u30b6\u30fc\u304c\u9ad8\u983b\u5ea6\u306b\u5229\u7528\u3059\u308b\u30d5\u30a3\u30fc\u30c9UI\u306e\u5b9f\u88c5\u306f\u3001\u8907\u96d1\u306a\u8981\u4ef6\u304c\u91cd\u308a\u304c\u3061\u306a\u4e0a\u306b\u3001\u305d\u306e\u8981\u4ef6\u81ea\u4f53\u3082\u30d3\u30b8\u30cd\u30b9\u306e\u72b6\u6cc1\u306b\u5fdc\u3058\u3066\u5e38\u306b\u67d4\u8edf\u306b\u5909\u308f\u3063\u3066\u3044\u304f\u5fc5\u8981\u304c\u3042\u308b\n\u30b9\u30de\u30db\u30a2\u30d7\u30ea\u3067\u306f\u30d5\u30a3\u30fc\u30c9\u7cfb\u306e\u8868\u793a\u306f\u7121\u9650\u306b\u5b9f\u88c5\u3057\u306a\u304f\u3066\u306f\u3044\u3051\u306a\u3044\n\u3057\u304b\u3057\u3001\u4e0b\u624b\u306b\u5b9f\u88c5\u3059\u308b\u3068\u5e38\u306b\u30ea\u30d5\u30a1\u30af\u30bf\u3068\u306e\u6226\u3044\u3068\u306a\u308b\n\nIGListKit\u3092\u7528\u3044\u3066\u3001\u30ea\u30d5\u30a1\u30af\u30bf\u3057\u3088\u3046!!!!!!!!\n[\u30df\u30af\u30b7\u30a3\u30b0\u30eb\u30fc\u30d7 Advent Calender 2016](http://qiita.com/advent-calendar/2016/mixi)\u300117\u65e5\u76ee\u3067\u3059\u3002\n\n\u300c[\u5bb6\u65cf\u30a2\u30eb\u30d0\u30e0 \u307f\u3066\u306d](https://mitene.us)\u300d\u3068\u3044\u3046\u5bb6\u65cf\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u30a2\u30d7\u30ea\u306e\u958b\u767a\u30c1\u30fc\u30e0\u30ea\u30fc\u30c0\u30fc\u3092\u62c5\u5f53\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\n2015\u5e74\u3054\u308d\u304b\u3089\u793e\u5185\u306eiOS\u30a8\u30f3\u30b8\u30cb\u30a2\u304c\u30e9\u30f3\u30c1\u30bf\u30a4\u30e0\u3092\u5229\u7528\u3057\u3066\u96c6\u307e\u308a\u3001\u3055\u307e\u3056\u307e\u306a\u30ab\u30f3\u30d5\u30a1\u30ec\u30f3\u30b9\u306a\u3069\u306e\u30d7\u30ec\u30bc\u30f3\u52d5\u753b\u3092\u898b\u308b\u52c9\u5f37\u4f1a\u3092\u90311\u56de\u884c\u3063\u3066\u3044\u307e\u3059\u30022016\u5e74\u3082\u305f\u304f\u3055\u3093\u306e\u52d5\u753b\u3092\u898b\u305f\u306e\u3067\u3001\u305d\u306e\u4e2d\u304b\u3089\u3042\u307e\u308a\u56fd\u5185\u3067\u7d39\u4ecb\u3055\u308c\u3066\u3044\u306a\u3044\u5185\u5bb9\u3067\u3001\u5370\u8c61\u306b\u6b8b\u3063\u305f\u3082\u306e\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n# IGListKit\u306e\u7d39\u4ecb\n\nIGListKit\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\nhttps://github.com/instagram/IGListKit\n\nIGListKit\u306fInstagram\u88fd\u306eUICollectionView\u306eframework\u3067\u3059\u3002\nframework\u306b\u6e96\u62e0\u3057\u305f\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u3068\u3001\u8868\u793a\u3057\u305f\u3044\u30c7\u30fc\u30bf\u69cb\u9020\u3092\u3082\u3068\u306bUICollectionView\u304cList\u7cfb\u306e\u8868\u793a\u3092\u7d44\u307f\u4e0a\u3052\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u7279\u5fb4\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30dd\u30a4\u30f3\u30c8\u304c\u6319\u3052\u3089\u308c\u307e\u3059\u3002\n\n* \u69d8\u3005\u306a\u578b\u306e\u30c7\u30fc\u30bf\u304c\u542b\u307e\u308c\u308bCollection\u3082\u5358\u7d14\u306a\u30b3\u30fc\u30c9\u3067\u30ea\u30b9\u30c8\u8868\u793a\u3067\u304d\u308b\n* Collection\u306e\u5dee\u5206\u3092\u6c17\u306b\u3057\u306a\u304c\u3089`performBatchUpdates(_:completion:)`\u3084`reloadData()`\u3092\u7e4a\u7d30\u306b\u53e9\u304d\u308f\u3051\u308b\u3053\u3068\u3092\u3057\u306a\u304f\u3066\u3082\u3088\u3044\n* Swift3\u3067\u3082\u554f\u984c\u306a\u304f\u30d7\u30ed\u30b0\u30e9\u30e0\u53ef\u80fd\n\n\u5c11\u3057\u524d\u306b\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u5316\u3055\u308c\u3001\u3064\u3044\u5148\u65e5v2.0.0\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u3088\u3046\u3067\u3059\u3002\n\n## \u7d39\u4ecb\u52d5\u753b\n\u3053\u3061\u3089\u306eRealm\u306b\u3088\u308bTry!Swift\u306e\u52d5\u753b\u3067\u77e5\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\nhttps://realm.io/news/tryswift-ryan-nystrom-refactoring-at-scale-lessons-learned-rewriting-instagram-feed/\n\n## \u3069\u3046\u3044\u3046\u5834\u9762\u3067\u52b9\u679c\u7684\uff1f\n\n### \u30d5\u30a3\u30fc\u30c9\u30fb\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3\u7cfbUI\u306b\u6700\u9069\n\nInstagram\u3067\u306f\u3001\u30c8\u30c3\u30d7\u306e\u30d5\u30a3\u30fc\u30c9\u3092\u306f\u3058\u3081\u3001\u30a2\u30d7\u30ea\u5185\u306e\u5404\u6240\u3067\u3059\u3067\u306b\u5c0e\u5165\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u52d5\u753b\u306e\u306a\u304b\u3067\u3082\u8a71\u304c\u51fa\u3066\u3044\u307e\u3059\u304c\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u983b\u7e41\u306b\u76ee\u306b\u3059\u308b\u300c\u30d5\u30a3\u30fc\u30c9\u300d\u3084\u300c\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3\u300d\u306e\u3088\u3046\u306a\u8868\u793a\u306f\u3001\u69d8\u3005\u306a\u578b\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u7d44\u307f\u66ff\u3048\u305f\u308a\u30fb\u8db3\u3057\u305f\u308a\u30fb\u5f15\u3044\u305f\u308a\u306a\u3069\u3001\u30d3\u30b8\u30cd\u30b9\u306e\u8981\u6c42\u306b\u3088\u3063\u3066\u6a5f\u80fd\u8981\u4ef6\u304c\u67d4\u8edf\u306b\u5909\u66f4\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u3001\u307e\u305f\u30a8\u30f3\u30b8\u30cb\u30a2\u3068\u3057\u3066\u306f\u305d\u308c\u3089\u306b\u7b54\u3048\u3066\u3044\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u300c\u5bb6\u65cf\u30a2\u30eb\u30d0\u30e0 \u307f\u3066\u306d\u300d\u306b\u304a\u3044\u3066\u3082\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u300c\u8fd1\u6cc1\u300d\u3068\u3044\u3046\u6a5f\u80fd\u3067\u5bb6\u65cf\u306e\u5404\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u3084\u300c\u307f\u305f\u3088\u5c65\u6b74\u300d\u3068\u3044\u3046\u5bb6\u65cf\u306e\u30ed\u30b0\u30a4\u30f3\u5c65\u6b74\u304c\u3072\u3068\u3064\u306e\u30d5\u30a3\u30fc\u30c9\u753b\u9762\u306b\u8868\u793a\u3055\u308c\u308b\u5834\u9762\u304c\u3042\u308a\u307e\u3059\u3002\n\n<img width=\"250\" alt=\"IMG_1731.PNG\" src=\"https://qiita-image-store.s3.amazonaws.com/0/30355/08191b50-ad32-d9af-f072-f6ae57dc51e9.png\">\n\n\u3053\u3046\u3044\u3046\u753b\u9762\u306e\u69cb\u7bc9\u306b\u304a\u3044\u3066IGListKit\u304c\u52b9\u679c\u3092\u767a\u63ee\u3057\u307e\u3059\u3002\n\n# \u30b5\u30f3\u30d7\u30eb\u5b9f\u88c5\n\n\u307f\u3066\u306d\u306e\u300c\u8fd1\u6cc1\u300d\u306b\u4f3c\u305f\u753b\u9762\u3092IGListKit\u3067\u958b\u767a\u3057\u305f\u3044\u601d\u3044\u307e\u3059\u3002\n\n## Feed\u306e\u8868\u793a\n\n### Model\n\n\u307e\u305a\u3001\u30d5\u30a3\u30fc\u30c9\u306e\u5404\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8868\u73fe\u3059\u308b`Feed`\u3068\u3044\u3046Model\u3092\u4f5c\u308a\u307e\u3059\u3002\n\nhttps://github.com/radioboo/ListKitDemo/blob/master/ListKitDemo/Models/Feed.swift\n\n```Swift\nclass Feed {\n    let id: String\n    let user: User\n    let comment: String\n    let image: UIImage\n    \n    init(id: String, user: User, comment: String, image: UIImage) {\n        self.id = id\n        self.user = user\n        self.comment = comment\n        self.image = image\n    }\n}\n```\n\nIGListKit\u3067\u6271\u3046\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306fIGListDiffable\u306b\u6e96\u62e0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```Swift\nimport IGListKit\n\nextension Feed: IGListDiffable {\n    // Entity\u3092\u30e6\u30cb\u30fc\u30af\u306b\u793a\u3059Identifier\u3068\u306a\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\n    func diffIdentifier() -> NSObjectProtocol {\n        return id as NSObjectProtocol\n    }\n    \n    // Entity\u540c\u58eb\u304c\u540c\u4e00\u3067\u3042\u308b\u3053\u3068\u3092\u793a\u3059\u30ed\u30b8\u30c3\u30af\u3092\u5b9f\u88c5\n    func isEqual(toDiffableObject object: IGListDiffable?) -> Bool {\n        if let feed = object as? Feed {\n            return id == feed.id\n        }\n        return false\n    }\n}\n```\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u5b9f\u88c5\u3057\u305fFeed\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306eid\u304c\u540c\u3058\u5834\u5408\u306f\u3001\u540c\u4e00\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u307f\u306a\u3055\u308c\u3001Feed\u578b\u3092\u542b\u3080Collection\u306eupdate\u6642\u306bUI\u306e\u66f4\u65b0\u304c\u30b9\u30ad\u30c3\u30d7\u3055\u308c\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u6319\u52d5\u306fIGListDiff\u3068\u3044\u3046\u5dee\u5206\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u5b9f\u88c5\u306b\u3088\u308a\u5b9f\u73fe\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n#### IGListDiff\n\nIGListDiff\u306f\u3001\u4ee5\u4e0b\u306e\u30d6\u30ed\u30b0\u306b\u3082\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u901a\u308a\u30011978\u5e74\u306ePaul Heckel\u306e\u8ad6\u6587\u3092\u57fa\u306b\u5b9f\u88c5\u3055\u308c\u305f\u3082\u306e\u3068\u306e\u3053\u3068\u3067\u3059\u3002\u975e\u5e38\u306b\u9ad8\u901f\u306a\u306e\u3067\u3001IGListKit\u306f\u3053\u308c\u5358\u4f53\u306e\u5229\u7528\u76ee\u7684\u3067\u3082\u5341\u5206\u4fa1\u5024\u304c\u3042\u308b\u3082\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\uff08\u9ad8\u901f\u3001\u3068\u3044\u3044\u3064\u3064\u3001\u81ea\u5206\u81ea\u8eab\u306f\u307e\u3060\u5927\u898f\u6a21\u306a\u30c7\u30fc\u30bf\u69cb\u9020\u3067\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u691c\u8a3c\u3057\u3066\u306f\u3044\u306a\u3044\u3067\u3059\u2026\uff09\n\nhttps://engineering.instagram.com/open-sourcing-iglistkit-3d66f1e4e9aa#.6lls1kmdh\n\nHeader\u3092\u898b\u308b\u3068\u3001\u5dee\u5206\u306e\u6709\u7121\u304b\u3089\u3001inserts/deletes/updates/moves\u306a\u3069\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308bindex\u3092\u7d50\u679c\u3068\u3057\u3066\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\nhttps://github.com/Instagram/IGListKit/blob/master/Source/IGListIndexSetResult.h\n\n### SectionController\n\nSectionController\u3068\u306f\u3001Adapter\u3088\u308a\u30a2\u30b5\u30a4\u30f3\u3055\u308c\u308b\u5358\u4e00\u306eFeed\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u518d\u5229\u7528\u3055\u308c\u308bView(UICollectionViewCell)\u306b\u914d\u7f6e\u3057\u3066\u3044\u304f\u305f\u3081\u306e\u5c0f\u3055\u306aController\u306e\u5b9f\u88c5\u3068\u306a\u308a\u307e\u3059\u3002Cell\u306fXIB\u3067\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3001\u305d\u308c\u3092\u518d\u5229\u7528\u53ef\u80fd\u306a\u5f62\u3067\u521d\u671f\u5316\u3059\u308b\u305f\u3081\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3082\u3042\u308a\u307e\u3059\u3002\n\nhttps://github.com/radioboo/ListKitDemo/blob/master/ListKitDemo/SectionControllers/FeedSectionController.swift\n\n```Swift\nfinal class FeedSectionController: IGListSectionController, IGListSectionType {\n    \n    var feed: Feed?\n    \n    func numberOfItems() -> Int {\n        return 1\n    }\n    \n    func sizeForItem(at index: Int) -> CGSize {\n        return CGSize(width: collectionContext!.containerSize.width, height: 100)\n    }\n    \n    func cellForItem(at index: Int) -> UICollectionViewCell {\n        guard let feed = feed else {\n            fatalError(\"feed is nil.\")\n        }\n        let cell = collectionContext?.dequeueReusableCell(withNibName: \"FeedCell\", bundle: nil, for: self, at: index) as! FeedCell\n        cell.commentLabel?.text = \"\\(feed.user.nickname)\u3055\u3093\u304c\u300c\\(feed.comment)\u300d\u3068\u30b3\u30e1\u30f3\u30c8\u3057\u307e\u3057\u305f\u3002\"\n        cell.imageView?.image = feed.image\n        return cell\n    }\n    \n    func didUpdate(to object: Any) {\n        self.feed = object as? Feed\n    }\n    \n    func didSelectItem(at index: Int) {}\n}\n```\n\n### ViewController\n\n\u3053\u3053\u307e\u3067\u5b9f\u88c5\u3057\u305f\u3089\u3001\u6b21\u306bViewController\u5074\u3067UICollectionView\u3092\u521d\u671f\u5316\u3057\u3001IGListAdapter\u5411\u3051\u306b\u8868\u793a\u3057\u305f\u3044\u30c7\u30fc\u30bf\u3092\u63d0\u4f9b\u3059\u308b\u305f\u3081\u306eDataSource\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3059\u3002\n\nhttps://github.com/radioboo/ListKitDemo/blob/master/ListKitDemo/Scenes/ViewController.swift\n\n```Swift\n// Adapter\u3068UICollectionView\u306e\u521d\u671f\u5316\nlazy var adapter: IGListAdapter = {\n    return IGListAdapter(updater: IGListAdapterUpdater(), viewController: self, workingRangeSize: 0)\n}()\n    \nlet collectionView = IGListCollectionView(frame: .zero, collectionViewLayout: UICollectionViewFlowLayout())\n\n// IGListAdapterDataSource\u306e\u5b9f\u88c5\nextension ViewController: IGListAdapterDataSource {\n    \n    func objects(for listAdapter: IGListAdapter) -> [IGListDiffable] {\n        return [\n            Feed(id: UUID().uuidString, user: allUsers()[0], comment: \"\u306f\u3044\u2026\", image: UIImage(named: \"IMG_005.jpg\")!),\n            Feed(id: UUID().uuidString, user: allUsers()[4], comment: \"\u304a\u3063\u3055\u3093\u305d\u3070\u98df\u3048\u3084\", image: UIImage(named: \"IMG_005.jpg\")!),\n            ...\n        ] as! [IGListDiffable]\n    }\n    \n    func listAdapter(_ listAdapter: IGListAdapter, sectionControllerFor object: Any) -> IGListSectionController {\n        return FeedSectionController()\n    }\n    \n    func emptyView(for listAdapter: IGListAdapter) -> UIView? {\n        return nil\n    }\n}\n```\n\n### \u8868\u793a\u78ba\u8a8d\n\n\u3053\u3053\u307e\u3067\u306e\u5b9f\u88c5\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306bFeed\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u30ba\u30e9\u30c3\u3068\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n<img width=\"250\" alt=\"Simulator Screen Shot 2016.12.19 12.44.03.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/30355/cff85e92-a2be-18b1-9478-81fb5414cb93.png\">\n\n\n\n## \u307f\u305f\u3088\u5c65\u6b74\u3092\u30d5\u30a3\u30fc\u30c9\u306b\u8ffd\u52a0\n\n\u3055\u3089\u306b\u3001\u300c\u307f\u305f\u3088\u5c65\u6b74\u300d\u306e\u90e8\u5206\u3092\u753b\u9762\u4e0a\u90e8\u306b\u8ffd\u52a0\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u57fa\u672c\u7684\u306b\u306f\u4e0a\u8a18\u307e\u3067\u306e\u30b9\u30c6\u30c3\u30d7\u3068\u540c\u69d8\u3001\u5fc5\u8981\u306a\u30af\u30e9\u30b9\u3084\u30d7\u30ed\u30c8\u30b3\u30eb\u306e\u5b9f\u88c5\u3092\u8ffd\u52a0\u3057\u3066\u3044\u304d\u3001DataSource\u306b\u300c\u307f\u305f\u3088\u5c65\u6b74\u300d\u7528\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u3092\u7a81\u3063\u8fbc\u3080\u3068\u3042\u3063\u3055\u308a\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u3067\u3059\u304c\u3001\u3053\u3053\u3067\u306f\u3001\u30d5\u30a3\u30fc\u30c9\u306eCell\u306e\u4e2d\u306b\u3055\u3089\u306bUICollectionView\u3092\u30cd\u30b9\u30c8\u3055\u305b\u305f\u5f62\u3067\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3059\u3002\n\n### Model\u30922\u7a2e\u985e\u8ffd\u52a0\n\n\u5c65\u6b74\u5168\u4f53\u3092\u7ba1\u7406\u3059\u308bUserHistory\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0\u3057\u3001\u305d\u306e\u4e2d\u306b\u30ed\u30b0\u30a4\u30f3\u9806\u306bUser\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6301\u3064\u3088\u3046\u306aModel\u3068\u3057\u3066\u8a2d\u8a08\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306f\u4e21\u65b9\u3068\u3082 IGListDiffable\u306b\u6e96\u62e0\u3057\u3066\u3044\u307e\u3059\u3002\u30b3\u30fc\u30c9\u306f\u30ea\u30f3\u30af\u5148\u3067\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n* [User](https://github.com/radioboo/ListKitDemo/blob/master/ListKitDemo/Models/User.swift)\n    * \u5c65\u6b74\u306b\u8868\u793a\u3059\u308b\u30e6\u30fc\u30b6\u30fc\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n* [UserHistory](https://github.com/radioboo/ListKitDemo/blob/master/ListKitDemo/Models/UserHistory.swift)\n    * User\u306e\u30ea\u30b9\u30c8\u3092\u62b1\u3048\u305f\u5c65\u6b74\u5168\u4f53\u3092\u8868\u73fe\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n### SectionController\u30922\u7a2e\u985e\u8ffd\u52a0\n\nUICollectionView\u3092\u30cd\u30b9\u30c8\u3055\u305b\u308b\u5834\u5408\u3001\u30cd\u30b9\u30c8\u3055\u305b\u308bUICollectionView\u3092\u8868\u793a\u3059\u308b\u305f\u3081\u306eCell\u3092\u63cf\u753b\u3059\u308bSectionController\u3068\u3001\u30cd\u30b9\u30c8\u3055\u308c\u305fUICollectionView\u5185\u90e8\u3067\u3055\u3089\u306b\u63cf\u753b\u3092\u884c\u3046SectionController\u30922\u7a2e\u985e\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n#### UserHistorySectionController\n\nhttps://github.com/radioboo/ListKitDemo/blob/master/ListKitDemo/SectionControllers/UserHistorySectionController.swift\n\n\u3053\u306eSectionController\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306bCell(EmbeddedCollectionViewCell)\u3092\u8fd4\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u306eCell\u306e\u5b9f\u614b\u306f\u3001Cell\u5185\u90e8\u306bUICollectionView\u3092\u3055\u3089\u306b\u6301\u3063\u305f\u3082\u306e\u3068\u306a\u308a\u307e\u3059\u3002\n\n```Swift\nfunc cellForItem(at index: Int) -> UICollectionViewCell {\n    let cell = collectionContext!.dequeueReusableCell(of: EmbeddedCollectionViewCell.self, for: self, at: index) as! EmbeddedCollectionViewCell\n    adapter.collectionView = cell.collectionView\n    return cell\n}\n```\n\n\u3055\u3089\u306b\u3001\u3053\u306eSectionController\u306fIGListAdapterDataSource\u306b\u6e96\u62e0\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u5225\u306eSectionContrller\u3092\u8fd4\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u3053\u3067\u8fd4\u3055\u308c\u308bSectionController\u304c\u5b9f\u969b\u306bUser\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e26\u3079\u308bCell\u3092\u63cf\u753b\u3059\u308b\u3082\u306e\u3068\u306a\u308a\u307e\u3059\u3002\n\n```Swift\nextension UserHistorySectionController: IGListAdapterDataSource {\n    \n    func objects(for listAdapter: IGListAdapter) -> [IGListDiffable] {\n        return (userHistory?.users)!\n    }\n    \n    func listAdapter(_ listAdapter: IGListAdapter, sectionControllerFor object: Any) -> IGListSectionController {\n        return EmbeddedSectionController()\n    }\n    \n    func emptyView(for listAdapter: IGListAdapter) -> UIView? {\n        return nil\n    }\n}\n```\n\n#### EmbeddedSectionController\n\nhttps://github.com/radioboo/ListKitDemo/blob/master/ListKitDemo/SectionControllers/EmbeddedSectionController.swift\n\n\u3053\u306eSectionController\u306f\u3001\u5c65\u6b74\u306b\u542b\u307e\u308c\u308bUser\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092UICollectionViewCell\u306b\u63cf\u753b\u3059\u308b\u30b7\u30f3\u30d7\u30eb\u306a\u30af\u30e9\u30b9\u306b\u306a\u308a\u307e\u3059\u3002\n\n#### ViewController\u306e\u4fee\u6b63\n\nViewController\u306b\u304a\u3044\u3066\u306f\u3001\u8868\u793a\u3059\u308b\u30c7\u30fc\u30bf\u69cb\u9020\u306e\u5148\u982d\u306b\u300c\u307f\u305f\u3088\u5c65\u6b74\u300d\u7528\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u3092\u7a81\u3063\u8fbc\u3093\u3067\u304a\u304d\u307e\u3059\u3002\n\u305d\u3057\u3066\u3001DataSource\u306b\u304a\u3044\u3066\u578b\u3054\u3068\u306b\u8fd4\u3059SectionController\u3092\u5909\u3048\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3092\u3059\u308b\u3068\u3001\u578b\u306b\u5fdc\u3058\u305fCell\u306e\u63cf\u753b\u304c\u884c\u308f\u308c\u307e\u3059\u3002\n\n```Swift\nfunc objects(for listAdapter: IGListAdapter) -> [IGListDiffable] {\n    return [\n        UserHistory(users: [\n            User(id: UUID().uuidString, nickname: \"radioboo\"), \n            User(id: UUID().uuidString, nickname: \"ainame\"),\n            ...\n        ]),\n        Feed(id: UUID().uuidString, user: allUsers()[0], comment: \"\u306f\u3044\u2026\", image: UIImage(named: \"IMG_005.jpg\")!),\n        Feed(id: UUID().uuidString, user: allUsers()[4], comment: \"\u304a\u3063\u3055\u3093\u305d\u3070\u98df\u3048\u3084\", image: UIImage(named: \"IMG_005.jpg\")!),\n        ...\n    ] as! [IGListDiffable]\n}\n    \nfunc listAdapter(_ listAdapter: IGListAdapter, sectionControllerFor object: Any) -> IGListSectionController {\n    if object is UserHistory {\n        return UserHistorySectionController()\n    } else {\n        return FeedSectionController()\n    }\n}\n```\n\n### \u8868\u793a\u78ba\u8a8d\n\n\u3053\u3053\u307e\u3067\u306e\u5b9f\u88c5\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u753b\u9762\u4e0a\u90e8\u306b\u300c\u307f\u305f\u3088\u5c65\u6b74\u300d\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n<img width=\"250\" alt=\"Simulator Screen Shot 2016.12.19 12.44.20.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/30355/0ed1859e-fd07-d902-db44-e473ee8a7d28.png\">\n\n## \u8981\u4ef6\u306e\u5909\u66f4\u3067\u3055\u3089\u306b\u5225\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0\n\n\u3068\u3042\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u7a81\u5982\u3001\u30d7\u30ed\u30c0\u30af\u30c8\u30aa\u30fc\u30ca\u30fc\u304b\u3089\u3053\u3046\u3044\u3046\u8981\u6c42\u304c\u3042\u3063\u305f\u3068\u3057\u307e\u3057\u3087\u3046\u3002\n\n```\n\u3042\u305f\u3089\u3057\u3044\u6a5f\u80fd\u3092\u3082\u3063\u3068\u4f7f\u3063\u3066\u3082\u3089\u3044\u305f\u3044\u304b\u3089\u3001\u8fd1\u6cc1\u30d5\u30a3\u30fc\u30c9\u306e3\u884c\u76ee\u306b\u5fc5\u305a\u8a98\u5c0e\u3059\u308b\u305f\u3081\u306e\u30d5\u30a3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u3066\u6b32\u3057\u3044\n```\n\u65e2\u5b58\u306e\u30b3\u30fc\u30c9\u3067\u30b3\u30fc\u30c9\u306e\u5909\u66f4\u3092\u6df7\u4e71\u306a\u304f\u4e0a\u8a18\u306e\u8981\u4ef6\u3092\u5b9f\u73fe\u3059\u308b\u3053\u3068\u304c\u6c17\u697d\u306b\u3067\u304d\u308b\u3067\u3057\u3087\u3046\u304b\uff1f\n\u96e3\u3057\u304f\u306f\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001`// NOTE: \u6b74\u53f2\u7684\u7d4c\u7def`\u307f\u305f\u3044\u306a\u30b3\u30e1\u30f3\u30c8\u304c\u591a\u767a\u3059\u308b\u696d\u306e\u6df1\u3044\u30b3\u30fc\u30c9\u304c\u751f\u307f\u51fa\u3055\u308c\u308b\u5371\u967a\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\nIGListKit\u3092\u5229\u7528\u3057\u3066\u3044\u308c\u3070\u3001\n\n* IGListDiffable\u306b\u6e96\u62e0\u3057\u305fModel\u3092\u5b9f\u88c5\n* \u8868\u793a\u3055\u308c\u308bView(UICollectionViewCell)\u3092\u5b9f\u88c5\n* SectionController\u3092\u5b9f\u88c5\n* IGListAdapterDataSource\u306e\u5b9f\u88c5\u3067\u8868\u793a\u3057\u305f\u3044\u578b\u306eSectionController\u3092\u8fd4\u3059\n* \u65e2\u5b58\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u306b\u3044\u5909\u66f4\u3092\u52a0\u3048\u308b\n\n\u3068\u3044\u3046\u624b\u9806\u3092\u8e0f\u3081\u3070\u6df7\u4e71\u306e\u306a\u3044\u3001\u898b\u901a\u3057\u306e\u826f\u3044\u30b3\u30fc\u30c9\u304c\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u5b9f\u88c5\u5dee\u5206\u306f\u3001\u4ee5\u4e0b\u306ePull Request\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nhttps://github.com/radioboo/ListKitDemo/pull/3/files\n\n<img width=\"250\" alt=\"Simulator Screen Shot 2016.12.19 12.44.47.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/30355/de676dc8-0d41-c48b-5fa8-9ae720e2cd8f.png\">\n\n# \u30b5\u30f3\u30d7\u30eb\n\n\u5b9f\u88c5\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u306e\u30b3\u30fc\u30c9\u306e\u5168\u3066\u306fGitHub\u306bpush\u3057\u3066\u3042\u308b\u306e\u3067\u3001\u8208\u5473\u306e\u3042\u308b\u65b9\u306f\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nhttps://github.com/radioboo/ListKitDemo\n\n# \u307e\u3068\u3081\n\n* \u30e6\u30fc\u30b6\u30fc\u304c\u9ad8\u983b\u5ea6\u306b\u5229\u7528\u3059\u308b\u30d5\u30a3\u30fc\u30c9UI\u306e\u5b9f\u88c5\u306f\u3001\u8907\u96d1\u306a\u8981\u4ef6\u304c\u91cd\u308a\u304c\u3061\u306a\u4e0a\u306b\u3001\u305d\u306e\u8981\u4ef6\u81ea\u4f53\u3082\u30d3\u30b8\u30cd\u30b9\u306e\u72b6\u6cc1\u306b\u5fdc\u3058\u3066\u5e38\u306b\u67d4\u8edf\u306b\u5909\u308f\u3063\u3066\u3044\u304f\u5fc5\u8981\u304c\u3042\u308b\n* \u30b9\u30de\u30db\u30a2\u30d7\u30ea\u3067\u306f\u30d5\u30a3\u30fc\u30c9\u7cfb\u306e\u8868\u793a\u306f\u7121\u9650\u306b\u5b9f\u88c5\u3057\u306a\u304f\u3066\u306f\u3044\u3051\u306a\u3044\n* \u3057\u304b\u3057\u3001\u4e0b\u624b\u306b\u5b9f\u88c5\u3059\u308b\u3068\u5e38\u306b\u30ea\u30d5\u30a1\u30af\u30bf\u3068\u306e\u6226\u3044\u3068\u306a\u308b\n\nIGListKit\u3092\u7528\u3044\u3066\u3001\u30ea\u30d5\u30a1\u30af\u30bf\u3057\u3088\u3046!!!!!!!!\n", "tags": ["iOS", "Swift", "Objective-C", "UICollectionView", "Realm"]}