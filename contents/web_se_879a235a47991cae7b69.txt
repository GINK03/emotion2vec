{"context": "\u672c\u6a5f\u80fd\u306f\u3001AWS CLI 1.6.0\u4ee5\u4e0a\u3067\u4f7f\u3048\u308b\u3002\u203b1.6.0\u3088\u308a\u524d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306f\u4f7f\u3048\u306a\u3044\u306e\u3067\u6ce8\u610f\u304c\u5fc5\u8981\u3002\n\u30a2\u30af\u30bb\u30b9\u300c\u3055\u308c\u308b\u5074\u300d\u306eAWS\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u3001Cross-Account Access Role\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u30a2\u30af\u30bb\u30b9\u300c\u3059\u308b\u5074\u300d\u3000\u306eAWS\u30a2\u30ab\u30a6\u30f3\u30c8ID\u3092Account ID\u306b\u5165\u529b\u3057\u307e\u3059\u3002\n\n\u30a2\u30af\u30bb\u30b9\u3059\u308b\u6a29\u9650\u3092\u8a2d\u5b9a\n\n\n\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5074\u3067\u3001.aws/credentials\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30dd\u30a4\u30f3\u30c81\u306f\u3001source_profile\u30d5\u30a3\u30fc\u30eb\u30c9\u5fc5\u9808\n\u3000\u2192IAM User\u306e\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u60c5\u5831\u3092\u5165\u529b\u3057\u307e\u3059\u3002sts:AssumeRole\u306fAllow\u304c\u5fc5\u8981\n\u30dd\u30a4\u30f3\u30c82\u306f\u3001foo profile\u306e\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u3001\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u306f\u7a7a\u306b\u3067\u304d\u306a\u3044\u3002\n(IAM Role\u306f\u4f7f\u3048\u306a\u3044\u3002)\n[foo]\naws_access_key_id = XXXXXXXXXXXXXXXXXX\naws_secret_access_key = YYYYYYYYYYYYYYYYYYYYYYYYYYYYYY\n\n\n[target2]\nrole_arn = arn:aws:iam::111112222233:role/RoleAccessAccount\nsource_profile = foo\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001\u4e00\u6642\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u306a\u304f\u3001\n\naws sts assume-role --role-arn arn:aws:iam::111112222233:role/RoleAccessAccount --role-session-name cross\n\n\u5225AWS\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u60c5\u5831\u3092\u53d6\u5f97\u7b49\u304c\u884c\u3048\u307e\u3059\u3002\naws --profile target2 rds describe-db-instances --region ap-northeast-1\n\nManagement Console\u3067\u5b9f\u88c5\u3055\u308c\u305fSwitch Role\u306eCLI\u7248\u3066\u3068\u3053\u308d\u306b\u306a\u308a\u307e\u3059\u3002\n\u672c\u6a5f\u80fd\u306f\u3001AWS CLI 1.6.0\u4ee5\u4e0a\u3067\u4f7f\u3048\u308b\u3002\u203b1.6.0\u3088\u308a\u524d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306f\u4f7f\u3048\u306a\u3044\u306e\u3067\u6ce8\u610f\u304c\u5fc5\u8981\u3002\n\n\u30a2\u30af\u30bb\u30b9\u300c\u3055\u308c\u308b\u5074\u300d\u306eAWS\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u3001Cross-Account Access Role\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n![1-1.png](https://qiita-image-store.s3.amazonaws.com/0/32140/e3b8dfb6-3de6-7a31-88b5-9be0bc74e796.png)\n\n\u30a2\u30af\u30bb\u30b9\u300c\u3059\u308b\u5074\u300d\u3000\u306eAWS\u30a2\u30ab\u30a6\u30f3\u30c8ID\u3092Account ID\u306b\u5165\u529b\u3057\u307e\u3059\u3002\n![1-2.png](https://qiita-image-store.s3.amazonaws.com/0/32140/eee68b33-9053-ad62-c083-4049c8c594dd.png)\n\n\u30a2\u30af\u30bb\u30b9\u3059\u308b\u6a29\u9650\u3092\u8a2d\u5b9a\n![1-3.png](https://qiita-image-store.s3.amazonaws.com/0/32140/8071b816-6a1b-cf08-18b5-60611b7d61e2.png)\n\n![1-4.png](https://qiita-image-store.s3.amazonaws.com/0/32140/bb74db8b-48df-8b1a-ea6a-c1f4642e7c60.png)\n\n\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5074\u3067\u3001.aws/credentials\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30dd\u30a4\u30f3\u30c81\u306f\u3001source_profile\u30d5\u30a3\u30fc\u30eb\u30c9\u5fc5\u9808\n\u3000\u2192IAM User\u306e\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u60c5\u5831\u3092\u5165\u529b\u3057\u307e\u3059\u3002sts:AssumeRole\u306fAllow\u304c\u5fc5\u8981\n\u30dd\u30a4\u30f3\u30c82\u306f\u3001foo profile\u306e\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u3001\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u306f\u7a7a\u306b\u3067\u304d\u306a\u3044\u3002\n(IAM Role\u306f\u4f7f\u3048\u306a\u3044\u3002)\n\n```\n[foo]\naws_access_key_id = XXXXXXXXXXXXXXXXXX\naws_secret_access_key = YYYYYYYYYYYYYYYYYYYYYYYYYYYYYY\n\n\n[target2]\nrole_arn = arn:aws:iam::111112222233:role/RoleAccessAccount\nsource_profile = foo\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001\u4e00\u6642\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u306a\u304f\u3001\n```\naws sts assume-role --role-arn arn:aws:iam::111112222233:role/RoleAccessAccount --role-session-name cross\n```\n\n\u5225AWS\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u60c5\u5831\u3092\u53d6\u5f97\u7b49\u304c\u884c\u3048\u307e\u3059\u3002\n\n```\naws --profile target2 rds describe-db-instances --region ap-northeast-1\n```\n\nManagement Console\u3067\u5b9f\u88c5\u3055\u308c\u305fSwitch Role\u306eCLI\u7248\u3066\u3068\u3053\u308d\u306b\u306a\u308a\u307e\u3059\u3002\n", "tags": ["aws-cli", "AWS"]}