{"context": "\n\u52d5\u4f5c\u78ba\u8a8d\nC++ Builder XE4\n\n\n\u95a2\u9023\nhttp://qiita.com/7of9/items/db882fbaa4e610f7c910\nm_encSJIS = IndyTextEncoding( TEncoding::GetEncoding(932) );\u3068\u3057\u305f\u6642\u306b\u306fTEncoding::GetEncoding()\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u958b\u653e\u3055\u308c\u306a\u3044\u3053\u3068\u306b\u3088\u308b\u30e1\u30e2\u30ea\u30ea\u30fc\u30af\u304c\u767a\u751f\u3059\u308b\u3001\u3068\u3044\u3046\u60c5\u5831\u306b\u3064\u3044\u3066\u3002\n\n\u518d\u73fe\u30b3\u30fc\u30c9\n\nUnit1.h\n//---------------------------------------------------------------------------\n\n#ifndef Unit1H\n#define Unit1H\n//---------------------------------------------------------------------------\n#include <System.Classes.hpp>\n#include <Vcl.Controls.hpp>\n#include <Vcl.StdCtrls.hpp>\n#include <Vcl.Forms.hpp>\n#include <IdBaseComponent.hpp>\n#include <IdComponent.hpp>\n#include <IdUDPBase.hpp>\n#include <IdUDPClient.hpp>\n//---------------------------------------------------------------------------\nclass TForm1 : public TForm\n{\n__published:    // IDE \u3067\u7ba1\u7406\u3055\u308c\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n    TIdUDPClient *IdUDPClient1;\nprivate:    // \u30e6\u30fc\u30b6\u30fc\u5ba3\u8a00\n    Idglobal::_di_IIdTextEncoding m_encSJIS;\npublic:     // \u30e6\u30fc\u30b6\u30fc\u5ba3\u8a00\n    __fastcall TForm1(TComponent* Owner);\n};\n//---------------------------------------------------------------------------\nextern PACKAGE TForm1 *Form1;\n//---------------------------------------------------------------------------\n#endif\n\n\n\nUnit1.cpp\n//---------------------------------------------------------------------------\n\n#include <vcl.h>\n#pragma hdrstop\n\n#include \"Unit1.h\"\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm1 *Form1;\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner)\n    : TForm(Owner)\n{\n\n#if 0 // leak\n    m_encSJIS = IndyTextEncoding( 932 );\n#else\n    m_encSJIS = IndyTextEncoding( TEncoding::GetEncoding(932) );\n#endif\n}\n//---------------------------------------------------------------------------\n\n\nFastMM\u3092\u8a2d\u5b9a\u3057\u3066#if\u3067\u5207\u308a\u66ff\u3048\u305f\u5834\u5408\u306e\u6bd4\u8f03\u3092\u3057\u305f\u3002\n\n\u7d50\u679c\n\nIndyTextEncoding( 932 )\u306e\u6642\n\n\nIndyTextEncoding( TEncoding::GetEncoding(932) )\u306e\u6642\n\n\n\u6bd4\u8f03\u7d50\u679c\nIndyTextEncoding( TEncoding::GetEncoding(932) )\u306e\u6642\u306f\u300cTMBCSEncoding\u300d\u95a2\u9023\u306e\u30ea\u30fc\u30af\u304c\u3042\u308a\u3001IndyTextEncoding( 932 )\u306e\u6642\u306f\u306a\u3044\u3002\nIndyTextEncoding( 932 )\u3092\u4f7f\u3046\u65b9\u304c\u3044\u3044\u3088\u3046\u3060\u3002\n\u4ed6\u306e\u30e1\u30e2\u30ea\u30ea\u30fc\u30af\u306b\u3064\u3044\u3066\u306f\u8981\u8abf\u67fb\u3002\n\nTIdCriticalSection \u95a2\u9023\nTIdCriticalSection\u30ec\u30dd\u30fc\u30c8\u306b\u95a2\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u60c5\u5831\u304c\u3042\u308b\u3002\nhttp://stackoverflow.com/questions/5260680/why-are-memory-leaks-reported-for-indy-10\n```txt:\u52d5\u4f5c\u78ba\u8a8d\nC++ Builder XE4\n```\n\n\u95a2\u9023\nhttp://qiita.com/7of9/items/db882fbaa4e610f7c910\n\n`m_encSJIS = IndyTextEncoding( TEncoding::GetEncoding(932) );`\u3068\u3057\u305f\u6642\u306b\u306fTEncoding::GetEncoding()\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u958b\u653e\u3055\u308c\u306a\u3044\u3053\u3068\u306b\u3088\u308b\u30e1\u30e2\u30ea\u30ea\u30fc\u30af\u304c\u767a\u751f\u3059\u308b\u3001\u3068\u3044\u3046\u60c5\u5831\u306b\u3064\u3044\u3066\u3002\n\n## \u518d\u73fe\u30b3\u30fc\u30c9\n\n```Unit1.h\n//---------------------------------------------------------------------------\n\n#ifndef Unit1H\n#define Unit1H\n//---------------------------------------------------------------------------\n#include <System.Classes.hpp>\n#include <Vcl.Controls.hpp>\n#include <Vcl.StdCtrls.hpp>\n#include <Vcl.Forms.hpp>\n#include <IdBaseComponent.hpp>\n#include <IdComponent.hpp>\n#include <IdUDPBase.hpp>\n#include <IdUDPClient.hpp>\n//---------------------------------------------------------------------------\nclass TForm1 : public TForm\n{\n__published:\t// IDE \u3067\u7ba1\u7406\u3055\u308c\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\tTIdUDPClient *IdUDPClient1;\nprivate:\t// \u30e6\u30fc\u30b6\u30fc\u5ba3\u8a00\n\tIdglobal::_di_IIdTextEncoding m_encSJIS;\npublic:\t\t// \u30e6\u30fc\u30b6\u30fc\u5ba3\u8a00\n\t__fastcall TForm1(TComponent* Owner);\n};\n//---------------------------------------------------------------------------\nextern PACKAGE TForm1 *Form1;\n//---------------------------------------------------------------------------\n#endif\n```\n\n```Unit1.cpp\n//---------------------------------------------------------------------------\n\n#include <vcl.h>\n#pragma hdrstop\n\n#include \"Unit1.h\"\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm1 *Form1;\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner)\n\t: TForm(Owner)\n{\n\n#if 0 // leak\n\tm_encSJIS = IndyTextEncoding( 932 );\n#else\n\tm_encSJIS = IndyTextEncoding( TEncoding::GetEncoding(932) );\n#endif\n}\n//---------------------------------------------------------------------------\n```\n\nFastMM\u3092\u8a2d\u5b9a\u3057\u3066#if\u3067\u5207\u308a\u66ff\u3048\u305f\u5834\u5408\u306e\u6bd4\u8f03\u3092\u3057\u305f\u3002\n\n## \u7d50\u679c\n\n### IndyTextEncoding( 932 )\u306e\u6642\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/bae66ad6-abda-71f7-7e09-71a5da022cdd.png)\n\n### IndyTextEncoding( TEncoding::GetEncoding(932) )\u306e\u6642\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/91c4e36f-0ca7-6c12-b7ce-3cdd8a489063.png)\n\n### \u6bd4\u8f03\u7d50\u679c\n\nIndyTextEncoding( TEncoding::GetEncoding(932) )\u306e\u6642\u306f\u300cTMBCSEncoding\u300d\u95a2\u9023\u306e\u30ea\u30fc\u30af\u304c\u3042\u308a\u3001IndyTextEncoding( 932 )\u306e\u6642\u306f\u306a\u3044\u3002\n\nIndyTextEncoding( 932 )\u3092\u4f7f\u3046\u65b9\u304c\u3044\u3044\u3088\u3046\u3060\u3002\n\n\n\u4ed6\u306e\u30e1\u30e2\u30ea\u30ea\u30fc\u30af\u306b\u3064\u3044\u3066\u306f\u8981\u8abf\u67fb\u3002\n\n### TIdCriticalSection \u95a2\u9023\n\nTIdCriticalSection\u30ec\u30dd\u30fc\u30c8\u306b\u95a2\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u60c5\u5831\u304c\u3042\u308b\u3002\n\nhttp://stackoverflow.com/questions/5260680/why-are-memory-leaks-reported-for-indy-10\n\n\n", "tags": ["cppBuilder", "indy", "memoryLeak", "difference"]}