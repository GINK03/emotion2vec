{"context": "\u5148\u65e5Realm\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c1.0\u306b\u306a\u308a\u307e\u3057\u305f\u304c\u3001\u4eca\u56de\u306fAndoid\u3067sqlite\u3092\u4f7f\u7528\u3059\u308b\u3068\u304d\u306b\u5fc5\u8981\u306a\u30a8\u30b9\u30b1\u30fc\u30d7\u51e6\u7406\u3092\u8a18\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u6e96\u5099\n\u4eca\u56de\u4f7f\u7528\u3059\u308bSQLiteOpenHelper\u3092\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\n\nMySQLiteHelper.java\nimport android.content.Context;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\n\npublic class MySQLiteHelper extends SQLiteOpenHelper {\n\n    MoneyDB(Context context) {\n        super(context, \"memoDB\", null, 1);\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        db.execSQL(\"create table memo(id integer primary key,value text not null);\");\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n    }\n}\n\n\n\n\ninsert\u6642\u306e\u30a8\u30b9\u30b1\u30fc\u30d7\ninsert\u6642\u306f ' \u306e\u6587\u5b57\u304c\u5165\u3063\u3066\u3044\u308b\u6587\u5b57\u5217\u3092\u5165\u308c\u308b\u3068\u30a8\u30e9\u30fc\u3092\u8d77\u3053\u3059\u305f\u3081\u30a8\u30b9\u30b1\u30fc\u30d7\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\npublic void insertDB(Context context, String value){\n    SQLiteDatabase db = new MySQLiteHelper(context).getReadableDatabase();\n    value = value.replaceAll(\"'\", \"''\");\n    db.execSQL(\"insert into memo(value) values('\" + value + \"');\");\n    db.close();\n    value = value.replaceAll(\"''\", \"'\");\n}\n\n\n\u691c\u7d22\u6642\u306e\u30a8\u30b9\u30b1\u30fc\u30d7\n\u691c\u7d22\u6642\u306f % , _ \u3092like\u6587\u306b\u5165\u308c\u308b\u3068\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u30f3\u30b0\u306b\u306a\u308b\u306e\u3067 % , _ \u306e\u524d\u306b$\u3092\u8ffd\u52a0\u3057\u3001escape\u6587\u3067$\u3092\u5916\u3057\u3066\u691c\u7d22\u3092\u304b\u3051\u307e\u3059\u3002\n\u4ee5\u4e0b\u306f\u5909\u6570target\u306e\u6587\u5b57\u5217\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u30b3\u30fc\u30c9\u3067\u3059\u3002\nprivate void searchDB(Context context, String target) {\n    target = target.replaceAll(\"%\", \"\\\\$%\");\n    target = target.replaceAll(\"_\", \"\\\\$_\");\n    SQLiteDatabase db = new MySQLiteHelper(context).getReadableDatabase();\n    Cursor cursor = db.query(\"memoDB\", new String[]{\"id\", \"value\"}, \"value like ? escape ?\", new String[]{\"%\" + target + \"%\", \"$\"}, null, null, null, null);\n    boolean isEOF = cursor.moveToFirst();\n    while (isEOF) {\n        //do something\n        isEOF = cursor.moveToNext();\n    }\n    cursor.close();\n    db.close();\n}\n\n% \u3084 _ \u304c\u542b\u307e\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u3067\u691c\u7d22\u3059\u308b\u3053\u3068\u306f\u3042\u307e\u308a\u306a\u3044\u3068\u306f\u601d\u3044\u307e\u3059\u304c\u3001\u305f\u307e\u306b\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u30a2\u30d7\u30ea\u3067\u30a8\u30b9\u30b1\u30fc\u30d7\u3055\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u308a\u3059\u308b\u306e\u3067\u30a8\u30b9\u30b1\u30fc\u30d7\u51e6\u7406\u306f\u4e00\u5fdc\u3057\u3066\u304a\u3044\u305f\u307b\u3046\u304c\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u5148\u65e5Realm\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c1.0\u306b\u306a\u308a\u307e\u3057\u305f\u304c\u3001\u4eca\u56de\u306fAndoid\u3067sqlite\u3092\u4f7f\u7528\u3059\u308b\u3068\u304d\u306b\u5fc5\u8981\u306a\u30a8\u30b9\u30b1\u30fc\u30d7\u51e6\u7406\u3092\u8a18\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n##\u6e96\u5099\n\u4eca\u56de\u4f7f\u7528\u3059\u308bSQLiteOpenHelper\u3092\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\n\n```java:MySQLiteHelper.java\nimport android.content.Context;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\n\npublic class MySQLiteHelper extends SQLiteOpenHelper {\n\n    MoneyDB(Context context) {\n        super(context, \"memoDB\", null, 1);\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        db.execSQL(\"create table memo(id integer primary key,value text not null);\");\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n    }\n}\n\n```\n\n##insert\u6642\u306e\u30a8\u30b9\u30b1\u30fc\u30d7\ninsert\u6642\u306f ' \u306e\u6587\u5b57\u304c\u5165\u3063\u3066\u3044\u308b\u6587\u5b57\u5217\u3092\u5165\u308c\u308b\u3068\u30a8\u30e9\u30fc\u3092\u8d77\u3053\u3059\u305f\u3081\u30a8\u30b9\u30b1\u30fc\u30d7\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```java\npublic void insertDB(Context context, String value){\n    SQLiteDatabase db = new MySQLiteHelper(context).getReadableDatabase();\n    value = value.replaceAll(\"'\", \"''\");\n    db.execSQL(\"insert into memo(value) values('\" + value + \"');\");\n    db.close();\n    value = value.replaceAll(\"''\", \"'\");\n}\n```\n\n##\u691c\u7d22\u6642\u306e\u30a8\u30b9\u30b1\u30fc\u30d7\n\u691c\u7d22\u6642\u306f % , _ \u3092like\u6587\u306b\u5165\u308c\u308b\u3068\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u30f3\u30b0\u306b\u306a\u308b\u306e\u3067 % , _ \u306e\u524d\u306b$\u3092\u8ffd\u52a0\u3057\u3001escape\u6587\u3067$\u3092\u5916\u3057\u3066\u691c\u7d22\u3092\u304b\u3051\u307e\u3059\u3002\n\u4ee5\u4e0b\u306f\u5909\u6570target\u306e\u6587\u5b57\u5217\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u30b3\u30fc\u30c9\u3067\u3059\u3002\n\n```java\nprivate void searchDB(Context context, String target) {\n    target = target.replaceAll(\"%\", \"\\\\$%\");\n    target = target.replaceAll(\"_\", \"\\\\$_\");\n    SQLiteDatabase db = new MySQLiteHelper(context).getReadableDatabase();\n    Cursor cursor = db.query(\"memoDB\", new String[]{\"id\", \"value\"}, \"value like ? escape ?\", new String[]{\"%\" + target + \"%\", \"$\"}, null, null, null, null);\n    boolean isEOF = cursor.moveToFirst();\n    while (isEOF) {\n        //do something\n        isEOF = cursor.moveToNext();\n    }\n    cursor.close();\n    db.close();\n}\n```\n\n% \u3084 _ \u304c\u542b\u307e\u308c\u3066\u3044\u308b\u6587\u5b57\u5217\u3067\u691c\u7d22\u3059\u308b\u3053\u3068\u306f\u3042\u307e\u308a\u306a\u3044\u3068\u306f\u601d\u3044\u307e\u3059\u304c\u3001\u305f\u307e\u306b\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u30a2\u30d7\u30ea\u3067\u30a8\u30b9\u30b1\u30fc\u30d7\u3055\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u308a\u3059\u308b\u306e\u3067\u30a8\u30b9\u30b1\u30fc\u30d7\u51e6\u7406\u306f\u4e00\u5fdc\u3057\u3066\u304a\u3044\u305f\u307b\u3046\u304c\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n", "tags": ["sqlite", "Android"]}