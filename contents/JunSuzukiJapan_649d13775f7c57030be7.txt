{"context": " More than 1 year has passed since last update.\n\n\u524d\u7f6e\u304d\nTitanium Mobile + Alloy \u3067\u306f\u3001Model\u3092Backbone.js\u3092\u4f7f\u3063\u3066\u66f8\u304d\u307e\u3059\u3002\n\u306a\u3069\u3068\u8a00\u308f\u308c\u3066\u3044\u308b\u3088\u3046\u3060\u304c\u3001\u5b9f\u969b\u306b\u306fBackbone.js\u305d\u306e\u307e\u307e\u3068\u3044\u3046\u308f\u3051\u3067\u306f\u306a\u3044\u3088\u3046\u3060\u3002\n\u305d\u3093\u306a\u308f\u3051\u3067\u3001\u3061\u3087\u3063\u3068\u8abf\u3079\u3066\u307f\u305f\u3002\n\u3061\u306a\u307f\u306b\u3053\u3053\u3067\u306f\u3001Todo\u30ea\u30b9\u30c8\u30a2\u30d7\u30ea\u3063\u307d\u3044\u3082\u306e\u3092\u66f8\u3044\u3066\u3044\u308b\u3068\u601d\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u30e2\u30c7\u30eb\u306e\u66f8\u304d\u65b9\nTitanium Mobile + Alloy \u306e\u65b0\u3057\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3068\u3001app\u30d5\u30a9\u30eb\u30c0\u4ee5\u4e0b\u306b\u3001controllers, models, views \u306a\u3069\u3001\u3044\u304b\u306b\u3082MVC\u306a\u3093\u3067\u3059\u7684\u306a\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n\u3053\u306e\u4e2d\u306e\u3001models\u30d5\u30a9\u30eb\u30c0\u306b\u300c\u306a\u3093\u3061\u3083\u3089.js\u300d\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u540d\u3067\u30e2\u30c7\u30eb\u3092\u66f8\u3044\u3066\u3084\u308b\u3068\u3001\nTitanium Mobile\u304c\u81ea\u52d5\u7684\u306bBackbone.js\u3092\u4f7f\u3063\u3066\u304f\u308c\u308b\u3002\n\u5f37\u5236\u3067\u3042\u308b\u3002\n\u4f7f\u308f\u306a\u3044\u3068\u3044\u3046\u9078\u629e\u80a2\u306f\uff08\u304a\u305d\u3089\u304f\uff09\u5b58\u5728\u3057\u306a\u3044\u3002\n\u305f\u3081\u3057\u306b\u3001\u30cd\u30c3\u30c8\u3067\u30b5\u30f3\u30d7\u30eb\u3092\u8aad\u307f\u3064\u3064\u3001Todo\u30ea\u30b9\u30c8\u3092\u6271\u3046\u30e2\u30c7\u30eb\u3092\u66f8\u3044\u3066\u307f\u305f\u3002\n\napp/models/todo.js\nexports.definition = {\n    config: {\n        \"columns\": {\n            \"description\": \"TEXT\",\n            \"limitTime\": \"TEXT\",\n            \"done\": \"INTEGER\"\n        },\n        \"defaults\": {\n            \"description\": \"-\",\n            \"limitTime\": \"\",\n            \"done\": \"false\"\n        },\n        \"adapter\": {\n            \"type\": \"sql\",\n            \"collection_name\": \"todos\",\n            \"idAttribute\": \"id\"\n        }\n    },\n    extendModel: function(Model) {      \n        _.extend(Model.prototype, {\n            // Extend Backbone.Model\n        });\n        return Model;\n    },\n    extendCollection: function(Collection) {        \n        _.extend(Collection.prototype, {\n            // extended functions and properties go here\n        });\n        return Collection;\n    }\n}\n\n\n\u3068\u308a\u3042\u3048\u305a\u3001Backbone.js\u3068Underscore.js\u306f\u3001\u3068\u304f\u306brequire()\u3068\u304b\u3057\u306a\u304f\u3066\u3082\u81ea\u52d5\u7684\u306b\u8aad\u307f\u8fbc\u3093\u3067\u304f\u308c\u308b\u3002\n\n\u30e2\u30c7\u30eb\u306f\u3069\u306e\u3088\u3046\u306b\u5909\u63db\u3055\u308c\u3066\u3044\u308b\u306e\u304b\uff1f\n\u3053\u3053\u3067\u7591\u554f\u3002\nexports.definition \u3063\u3066\u4f55\uff1f\nBackbone.js\u306b\u306f\u306a\u3044\u3088\u306d\uff1f\n\u6c17\u306b\u306a\u3063\u305f\u306e\u3067\u3001\u3069\u3093\u306a\u98a8\u306b\u5909\u63db\u3055\u308c\u308b\u306e\u304b\u8ffd\u3063\u3066\u307f\u305f\u3002\niPhone\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u7528\u306b\"Debug\"\u3042\u308b\u3044\u306f\"Run\"\u3059\u308b\u3068\u3001\n\uff08\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff09/Library/Application Support/iPhone Simulator/\uff08\u30d0\u30fc\u30b8\u30e7\u30f3\uff09/Applications/\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306b\u3001\u6570\u5b57\u3068\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u304c\u7f85\u5217\u3055\u308c\u305f\u540d\u524d\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u51fa\u6765\u308b\u3002\n\n\u305d\u306e\u4e2d\u306e\u3069\u3053\u304b\u306e\u30d5\u30a9\u30eb\u30c0\u306b\uff08\u3053\u306e\u5834\u5408\u306f\uff09Todo.app\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u304c\u898b\u3064\u304b\u308b\u3002\n\u3067\u3001Todo.app\u3092\u53f3\u30af\u30ea\u30c3\u30af->\u300c\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u5185\u5bb9\u3092\u8868\u793a\u300d\u3067\u3001\u4e2d\u8eab\u3092\u898b\u3066\u307f\u308b\u3002\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u4e2d\u3067\u91cd\u8981\u306a\u306e\u306f\u3001alloy\u30d5\u30a9\u30eb\u30c0\u3063\u307d\u3044\u3002\nalloy\u30d5\u30a9\u30eb\u30c0\u4ee5\u4e0b\u306b\u306f\u3001controllers, models \u30d5\u30a9\u30eb\u30c0\u304c\u3042\u308b\u3002\n\n\u3069\u3046\u3084\u3089\u3001alloy/models\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308bTodo.js\u3068\u3044\u3046\u306e\u304c\u3001\u4e0a\u3067\u66f8\u3044\u305ftodo.js\u304c\u5909\u63db\u3055\u308c\u305f\u3082\u306e\u306e\u3088\u3046\u3060\u3002\n\u305d\u306e\u4e2d\u8eab\u306f\u4ee5\u4e0b\u3002\n\nalloy/models/Todo.js\nexports.definition = {\n    config: {\n        columns: {\n            description: \"TEXT\",\n            limitTime: \"TEXT\",\n            done: \"INTEGER\"\n        },\n        defaults: {\n            description: \"-\",\n            limitTime: \"-\",\n            done: \"false\"\n        },\n        adapter: {\n            type: \"sql\",\n            collection_name: \"todos\",\n            idAttribute: \"id\"\n        }\n    },\n    extendModel: function(Model) {\n        _.extend(Model.prototype, {});\n        return Model;\n    },\n    extendCollection: function(Collection) {\n        _.extend(Collection.prototype, {});\n        return Collection;\n    }\n};\n\nvar Alloy = require(\"alloy\"), _ = require(\"alloy/underscore\")._, model, collection;\nmodel = Alloy.M(\"todo\", exports.definition, []);\ncollection = Alloy.C(\"todo\", exports.definition, model);\nexports.Model = model;\nexports.Collection = collection;\n\n\n\u6700\u5f8c\u306e\uff15\u884c\u4ee5\u5916\u306f\u66f8\u3044\u305f\u307e\u307e\u306a\u306e\u3067\u3001\u6700\u5f8c\u3060\u3051\u898b\u3066\u3044\u304f\u3002\n\nalloy/models/Todo.js\nvar Alloy = require(\"alloy\"), _ = require(\"alloy/underscore\")._, model, collection;\nmodel = Alloy.M(\"todo\", exports.definition, []);\ncollection = Alloy.C(\"todo\", exports.definition, model);\nexports.Model = model;\nexports.Collection = collection;\n\n\n\uff11\u884c\u76ee\u306f\u3001alloy\u3084underscore\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u308b\u3060\u3051\u306a\u306e\u3067\u7121\u8996\u3002\n\uff14\u301c\uff15\u884c\u76ee\u306f\u3001exports\u3057\u3066\u308b\u3060\u3051\u306a\u306e\u3067\u7121\u8996\u3002\n\uff12\u301c\uff13\u884c\u76ee\u3067\u3001exports.definition\u3067\u5b9a\u7fa9\u3057\u305f\u3082\u306e\u3092\u3001Alloy.M()\u3084\u3089Alloy.C()\u3068\u3044\u3046\u540d\u524d\u306e\u95a2\u6570\u306b\u6e21\u3057\u3066\u3044\u308b\u306e\u304c\u602a\u3057\u3044\u3002\nAlloy\u306a\u3093\u3061\u3083\u3089\u306f\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u958b\u3044\u305f\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3042\u308balloy.js\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002\nM()\u3068C()\u306e\u5b9a\u7fa9\u3060\u3051\u629c\u304d\u51fa\u3057\u3066\u307f\u308b\u3002\n\n\u3069\u3046\u3067\u3082\u3044\u3044\u304c\u3001M\u306fModel\u3001C\u306fCollection\u306e\u982d\u6587\u5b57\u3068\u601d\u308f\u308c\u308b\u3002\n\n\nalloy.js\nexports.M = function(name, modelDesc, migrations) {\n    var config = modelDesc.config;\n    var type = (config.adapter ? config.adapter.type : null) || \"localDefault\";\n    \"localDefault\" === type && (type = \"sql\");\n    var adapter = require(\"alloy/sync/\" + type);\n    var extendObj = {\n        defaults: config.defaults,\n        sync: function(method, model, opts) {\n            var config = model.config || {};\n            var type = (config.adapter ? config.adapter.type : null) || \"localDefault\";\n            \"localDefault\" === type && (type = \"sql\");\n            require(\"alloy/sync/\" + type).sync(method, model, opts);\n        }\n    };\n    var extendClass = {};\n    migrations && (extendClass.migrations = migrations);\n    _.isFunction(adapter.beforeModelCreate) && (config = adapter.beforeModelCreate(config, name) || config);\n    var Model = Backbone.Model.extend(extendObj, extendClass);\n    Model.prototype.config = config;\n    _.isFunction(modelDesc.extendModel) && (Model = modelDesc.extendModel(Model) || Model);\n    _.isFunction(adapter.afterModelCreate) && adapter.afterModelCreate(Model, name);\n    return Model;\n};\n\nexports.C = function(name, modelDesc, model) {\n    var extendObj = {\n        model: model,\n        sync: function(method, model, opts) {\n            var config = model.config || {};\n            var type = (config.adapter ? config.adapter.type : null) || \"localDefault\";\n            \"localDefault\" === type && (type = \"sql\");\n            require(\"alloy/sync/\" + type).sync(method, model, opts);\n        }\n    };\n    var Collection = Backbone.Collection.extend(extendObj);\n    var config = Collection.prototype.config = model.prototype.config;\n    var type = (config.adapter ? config.adapter.type : null) || \"localDefault\";\n    var adapter = require(\"alloy/sync/\" + type);\n    _.isFunction(adapter.afterCollectionCreate) && adapter.afterCollectionCreate(Collection);\n    _.isFunction(modelDesc.extendCollection) && (Collection = modelDesc.extendCollection(Collection) || Collection);\n    return Collection;\n};\n\n\n\u3055\u304d\u306b\u3001M()\u306e\u307b\u3046\u3092\u898b\u3066\u3044\u304f\u3002\n\uff12\u756a\u76ee\u306e\u5f15\u6570modelDesc\u306b\u3001exports.definition\u304c\u5165\u3063\u3066\u3044\u308b\u306e\u3092\u982d\u306b\u5165\u308c\u3066\u304a\u304f\u3002\n\u305d\u3046\u3059\u308b\u3068\u3001\uff12\u301c\uff13\u884c\u76ee\u306e\n    var config = modelDesc.config;\n    var type = (config.adapter ? config.adapter.type : null) || \"localDefault\";\n\n\u306f\u3001\u5909\u6570config\u306bexports.definition.config\u3092\u4ee3\u5165\u3057\u3001\n\u5909\u6570type\u306bexports.definition.adapter\u3092\u5143\u306b\u6c42\u3081\u305f\u5024\u3092\u4ee3\u5165\u3057\u3066\u3044\u308b\u3053\u3068\u306b\u306a\u308b\u3002\n\u6b21\u3002\nalloy.js\u306e\uff17\u884c\u76ee\u3042\u305f\u308a\u3002\n    var extendObj = {\n        defaults: config.defaults,\n\n\u3068\u3057\u3066\u3001extendObj.defaults\u306bconfig.defaults(=exports.definition.config.defaults)\u3092\u4ee3\u5165\u3057\u3066\u3044\u308b\u3002\n\u7d50\u69cb\u30d0\u30e9\u30d0\u30e9\u306b\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3000\uff1c\u3000exports.definition\n\u305d\u306e\u5f8c\u3082\u7d06\u4f59\u66f2\u6298\u3092\u7d4c\u306a\u304c\u3089\u6700\u7d42\u7684\u306b\u3001\uff11\uff18\u301c\uff11\uff19\u884c\u76ee\n    var Model = Backbone.Model.extend(extendObj, extendClass);\n    Model.prototype.config = config;\n\n\u3067\u3001Backbone.Model\u306b\u7d50\u3073\u3064\u3051\u3089\u308c\u3066\u3044\u308b\u3002\n\u7d50\u5c40\u3001extendObj.defautls\u306b\u7d50\u3073\u3064\u3051\u3089\u308c\u305fexports.definition.defaults\u304c\nBackbone.Model.extend()\u306b\u6e21\u3055\u308c\u3001\u307e\u305f\u3001\nexports.definition.config\u304c\u3001Model.prototype.config\u306b\u4ee3\u5165\u3055\u308c\u3066\u3044\u308b\u3002\n\u3055\u3089\u306b\u3001extendObj.sync()\u306e\u4e2d\u3067\u306f\u3001config.adapter\u304b\u3089\u6c42\u3081\u305ftype\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\uff08type\u306f\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u306e\u3068\u304d\"sql\"\u3092\u4f7f\u3046\u306e\u304b\u3001\"localStorage\"\u3092\u4f7f\u3046\u306e\u304b\u3001\u307f\u305f\u3044\u306a\u3053\u3068\u3092\u8868\u3057\u3066\u3044\u308b\uff09\u3002\n\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308b\u3002\n\u3067\u3053\u308c\u304b\u3089\u4f55\u304c\u308f\u304b\u308b\u304b\u3068\u3044\u3046\u3068\u2026Backbone.js\u3092\u52c9\u5f37\u3059\u308b\u3079\u304d\u3001\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308b\uff08\uff1f\uff09\nC()\u306e\u307b\u3046\u306f\u4ee5\u4e0b\u540c\u69d8\u3067\u7565\u3002\n\n\u304a\u307e\u3051\n\u305d\u308c\u3060\u3051\u3067\u306f\u4f55\u306a\u306e\u3067\u3001\u3061\u3087\u3063\u3068\u3060\u3051\u3002\n\nconfig.defaults\nexports.definition\u3067\u5b9a\u7fa9\u3055\u308c\u305fconfig.defaults\u304c\u3001Backbone.Model.Extend()\u306b\u6e21\u3055\u308c\u308b\u306e\u3067\u3001\nexports.definition = {\n    config: {\n        \"defaults\": {\n            \"description\": \"-\",\n            \"limitTime\": \"\",\n            \"done\": \"false\"\n        }\n    }\n}\n\n\u3068\u66f8\u3044\u3066\u304a\u3051\u3070\u3001\nvar Model = Backbone.Model.extend({\n    \"defaults\": {\n        \"description\": \"-\",\n        \"limitTime\": \"\",\n        \"done\": \"false\"\n    }\n});\n\n\u3068\u66f8\u3044\u305f\u306e\u3068\u540c\u3058\u3053\u3068\u306b\u306a\u308b\u3002\n\nextendModel\nextendModel\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8a18\u8ff0\u3092\u3059\u308b\u3053\u3068\u3067\u30e2\u30c7\u30eb\u3092\u62e1\u5f35\u51fa\u6765\u308b\u3002\nexports.definition = {\n    extendModel: function(Model) {      \n        _.extend(Model.prototype, {\n            // Implement the validate method\n            validate: function (attrs) {\n                for (var key in attrs) {\n                    var value = attrs[key];\n                    if (key === \"description\") {\n                        if (value.length <= 0) {\n                            return \"Error: No description!\";\n                        }   \n                    }   \n                }\n            }\n        });\n        return Model;\n    }\n}\n\n\nextendCollection\nBackbone.js\u3092\u4f7f\u3046\u5834\u5408\u3001Backbone.Model\u3092\u62e1\u5f35\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u3001Backbone.Collection\u3092\u62e1\u5f35\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u3044\u304f\u3064\u3082\u3044\u308c\u3066\u304a\u304f\u3053\u3068\u304c\u3042\u308b\uff08\u3088\u3046\u3060\uff09\u304c\u3001\nexports.definition\u306b\u3001extendModel\u3068extendCollection\u3092\u540c\u6642\u306b\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u3001\nModel\u3068Collection\u3092\u4e00\u5ea6\u306b\u8a18\u8ff0\u3067\u304d\u308b\uff08\u3088\u3046\u306a\u6c17\u304c\u3059\u308b\u2026\uff09\u3002\n\n\u3059\u307f\u307e\u305b\u3093\u3002Backbone.js\u306f\u52c9\u5f37\u4e0d\u8db3\u306a\u306e\u3067\u2026\u3002\n\nexports.definition = {\n    extendModel: function(Model) {      \n        _.extend(Model.prototype, {\n            // \u3053\u3063\u3061\u306fBackbone.Model\u95a2\u4fc2\n        });\n    },\n    extendCollection: function(Collection) {        \n        _.extend(Collection.prototype, {\n            // \u3053\u3063\u3061\u306fBackbone.Collection\u95a2\u4fc2\n        });\n        return Collection;\n    }\n}\n\n\n# \u524d\u7f6e\u304d\n\nTitanium Mobile + Alloy \u3067\u306f\u3001Model\u3092Backbone.js\u3092\u4f7f\u3063\u3066\u66f8\u304d\u307e\u3059\u3002\n\u306a\u3069\u3068\u8a00\u308f\u308c\u3066\u3044\u308b\u3088\u3046\u3060\u304c\u3001\u5b9f\u969b\u306b\u306fBackbone.js\u305d\u306e\u307e\u307e\u3068\u3044\u3046\u308f\u3051\u3067\u306f\u306a\u3044\u3088\u3046\u3060\u3002\n\u305d\u3093\u306a\u308f\u3051\u3067\u3001\u3061\u3087\u3063\u3068\u8abf\u3079\u3066\u307f\u305f\u3002\n\n\u3061\u306a\u307f\u306b\u3053\u3053\u3067\u306f\u3001Todo\u30ea\u30b9\u30c8\u30a2\u30d7\u30ea\u3063\u307d\u3044\u3082\u306e\u3092\u66f8\u3044\u3066\u3044\u308b\u3068\u601d\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n# \u30e2\u30c7\u30eb\u306e\u66f8\u304d\u65b9\n\nTitanium Mobile + Alloy \u306e\u65b0\u3057\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3068\u3001app\u30d5\u30a9\u30eb\u30c0\u4ee5\u4e0b\u306b\u3001controllers, models, views \u306a\u3069\u3001\u3044\u304b\u306b\u3082MVC\u306a\u3093\u3067\u3059\u7684\u306a\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 0025-07-30 22.58.24.png](https://qiita-image-store.s3.amazonaws.com/0/20722/93e25cb6-e8e6-bb69-f604-480d92fa4d5b.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 0025-07-30 22.58.24.png\")\n\n\n\u3053\u306e\u4e2d\u306e\u3001models\u30d5\u30a9\u30eb\u30c0\u306b\u300c\u306a\u3093\u3061\u3083\u3089.js\u300d\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u540d\u3067\u30e2\u30c7\u30eb\u3092\u66f8\u3044\u3066\u3084\u308b\u3068\u3001\nTitanium Mobile\u304c\u81ea\u52d5\u7684\u306bBackbone.js\u3092\u4f7f\u3063\u3066\u304f\u308c\u308b\u3002\n**\u5f37\u5236\u3067\u3042\u308b\u3002**\n\u4f7f\u308f\u306a\u3044\u3068\u3044\u3046\u9078\u629e\u80a2\u306f\uff08\u304a\u305d\u3089\u304f\uff09\u5b58\u5728\u3057\u306a\u3044\u3002\n\n\u305f\u3081\u3057\u306b\u3001\u30cd\u30c3\u30c8\u3067\u30b5\u30f3\u30d7\u30eb\u3092\u8aad\u307f\u3064\u3064\u3001Todo\u30ea\u30b9\u30c8\u3092\u6271\u3046\u30e2\u30c7\u30eb\u3092\u66f8\u3044\u3066\u307f\u305f\u3002\n\n```javascript:app/models/todo.js\nexports.definition = {\n    config: {\n        \"columns\": {\n            \"description\": \"TEXT\",\n            \"limitTime\": \"TEXT\",\n            \"done\": \"INTEGER\"\n        },\n        \"defaults\": {\n            \"description\": \"-\",\n            \"limitTime\": \"\",\n            \"done\": \"false\"\n        },\n        \"adapter\": {\n            \"type\": \"sql\",\n            \"collection_name\": \"todos\",\n            \"idAttribute\": \"id\"\n        }\n    },\n    extendModel: function(Model) {\t\t\n        _.extend(Model.prototype, {\n            // Extend Backbone.Model\n        });\n        return Model;\n    },\n    extendCollection: function(Collection) {        \n        _.extend(Collection.prototype, {\n            // extended functions and properties go here\n        });\n        return Collection;\n    }\n}\n```\n\n\u3068\u308a\u3042\u3048\u305a\u3001Backbone.js\u3068Underscore.js\u306f\u3001\u3068\u304f\u306brequire()\u3068\u304b\u3057\u306a\u304f\u3066\u3082\u81ea\u52d5\u7684\u306b\u8aad\u307f\u8fbc\u3093\u3067\u304f\u308c\u308b\u3002\n\n# \u30e2\u30c7\u30eb\u306f\u3069\u306e\u3088\u3046\u306b\u5909\u63db\u3055\u308c\u3066\u3044\u308b\u306e\u304b\uff1f\n\n\u3053\u3053\u3067\u7591\u554f\u3002\nexports.definition \u3063\u3066\u4f55\uff1f\nBackbone.js\u306b\u306f\u306a\u3044\u3088\u306d\uff1f\n\n\u6c17\u306b\u306a\u3063\u305f\u306e\u3067\u3001\u3069\u3093\u306a\u98a8\u306b\u5909\u63db\u3055\u308c\u308b\u306e\u304b\u8ffd\u3063\u3066\u307f\u305f\u3002\niPhone\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u7528\u306b\"Debug\"\u3042\u308b\u3044\u306f\"Run\"\u3059\u308b\u3068\u3001\n\n\uff08\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff09/Library/Application Support/iPhone Simulator/\uff08\u30d0\u30fc\u30b8\u30e7\u30f3\uff09/Applications/\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306b\u3001\u6570\u5b57\u3068\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u304c\u7f85\u5217\u3055\u308c\u305f\u540d\u524d\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u51fa\u6765\u308b\u3002\n\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 0025-07-30 23.13.01.png](https://qiita-image-store.s3.amazonaws.com/0/20722/a995fdb4-f33f-fe73-1566-58a8caeea249.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 0025-07-30 23.13.01.png\")\n\n\n\u305d\u306e\u4e2d\u306e\u3069\u3053\u304b\u306e\u30d5\u30a9\u30eb\u30c0\u306b\uff08\u3053\u306e\u5834\u5408\u306f\uff09Todo.app\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u304c\u898b\u3064\u304b\u308b\u3002\n\u3067\u3001Todo.app\u3092\u53f3\u30af\u30ea\u30c3\u30af->\u300c\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u5185\u5bb9\u3092\u8868\u793a\u300d\u3067\u3001\u4e2d\u8eab\u3092\u898b\u3066\u307f\u308b\u3002\n\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 0025-07-30 23.16.48.png](https://qiita-image-store.s3.amazonaws.com/0/20722/1a8a36e2-c738-504e-15f1-66dde641f92f.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 0025-07-30 23.16.48.png\")\n\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u4e2d\u3067\u91cd\u8981\u306a\u306e\u306f\u3001alloy\u30d5\u30a9\u30eb\u30c0\u3063\u307d\u3044\u3002\nalloy\u30d5\u30a9\u30eb\u30c0\u4ee5\u4e0b\u306b\u306f\u3001controllers, models \u30d5\u30a9\u30eb\u30c0\u304c\u3042\u308b\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 0025-07-30 23.20.56.png](https://qiita-image-store.s3.amazonaws.com/0/20722/1ab08e6c-bcf2-a837-785f-7a326452579f.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 0025-07-30 23.20.56.png\")\n\n\n\u3069\u3046\u3084\u3089\u3001alloy/models\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308bTodo.js\u3068\u3044\u3046\u306e\u304c\u3001\u4e0a\u3067\u66f8\u3044\u305ftodo.js\u304c\u5909\u63db\u3055\u308c\u305f\u3082\u306e\u306e\u3088\u3046\u3060\u3002\n\n\u305d\u306e\u4e2d\u8eab\u306f\u4ee5\u4e0b\u3002\n\n```javascript:alloy/models/Todo.js\nexports.definition = {\n    config: {\n        columns: {\n            description: \"TEXT\",\n            limitTime: \"TEXT\",\n            done: \"INTEGER\"\n        },\n        defaults: {\n            description: \"-\",\n            limitTime: \"-\",\n            done: \"false\"\n        },\n        adapter: {\n            type: \"sql\",\n            collection_name: \"todos\",\n            idAttribute: \"id\"\n        }\n    },\n    extendModel: function(Model) {\n        _.extend(Model.prototype, {});\n        return Model;\n    },\n    extendCollection: function(Collection) {\n        _.extend(Collection.prototype, {});\n        return Collection;\n    }\n};\n\nvar Alloy = require(\"alloy\"), _ = require(\"alloy/underscore\")._, model, collection;\nmodel = Alloy.M(\"todo\", exports.definition, []);\ncollection = Alloy.C(\"todo\", exports.definition, model);\nexports.Model = model;\nexports.Collection = collection;\n```\n\n\u6700\u5f8c\u306e\uff15\u884c\u4ee5\u5916\u306f\u66f8\u3044\u305f\u307e\u307e\u306a\u306e\u3067\u3001\u6700\u5f8c\u3060\u3051\u898b\u3066\u3044\u304f\u3002\n\n```javascript:alloy/models/Todo.js\nvar Alloy = require(\"alloy\"), _ = require(\"alloy/underscore\")._, model, collection;\nmodel = Alloy.M(\"todo\", exports.definition, []);\ncollection = Alloy.C(\"todo\", exports.definition, model);\nexports.Model = model;\nexports.Collection = collection;\n```\n\n\uff11\u884c\u76ee\u306f\u3001alloy\u3084underscore\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u308b\u3060\u3051\u306a\u306e\u3067\u7121\u8996\u3002\n\uff14\u301c\uff15\u884c\u76ee\u306f\u3001exports\u3057\u3066\u308b\u3060\u3051\u306a\u306e\u3067\u7121\u8996\u3002\n\uff12\u301c\uff13\u884c\u76ee\u3067\u3001exports.definition\u3067\u5b9a\u7fa9\u3057\u305f\u3082\u306e\u3092\u3001Alloy.M()\u3084\u3089Alloy.C()\u3068\u3044\u3046\u540d\u524d\u306e\u95a2\u6570\u306b\u6e21\u3057\u3066\u3044\u308b\u306e\u304c\u602a\u3057\u3044\u3002\n\nAlloy\u306a\u3093\u3061\u3083\u3089\u306f\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u958b\u3044\u305f\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3042\u308balloy.js\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002\nM()\u3068C()\u306e\u5b9a\u7fa9\u3060\u3051\u629c\u304d\u51fa\u3057\u3066\u307f\u308b\u3002\n\n>\u3069\u3046\u3067\u3082\u3044\u3044\u304c\u3001M\u306fModel\u3001C\u306fCollection\u306e\u982d\u6587\u5b57\u3068\u601d\u308f\u308c\u308b\u3002\n\n```javascript:alloy.js\nexports.M = function(name, modelDesc, migrations) {\n    var config = modelDesc.config;\n    var type = (config.adapter ? config.adapter.type : null) || \"localDefault\";\n    \"localDefault\" === type && (type = \"sql\");\n    var adapter = require(\"alloy/sync/\" + type);\n    var extendObj = {\n        defaults: config.defaults,\n        sync: function(method, model, opts) {\n            var config = model.config || {};\n            var type = (config.adapter ? config.adapter.type : null) || \"localDefault\";\n            \"localDefault\" === type && (type = \"sql\");\n            require(\"alloy/sync/\" + type).sync(method, model, opts);\n        }\n    };\n    var extendClass = {};\n    migrations && (extendClass.migrations = migrations);\n    _.isFunction(adapter.beforeModelCreate) && (config = adapter.beforeModelCreate(config, name) || config);\n    var Model = Backbone.Model.extend(extendObj, extendClass);\n    Model.prototype.config = config;\n    _.isFunction(modelDesc.extendModel) && (Model = modelDesc.extendModel(Model) || Model);\n    _.isFunction(adapter.afterModelCreate) && adapter.afterModelCreate(Model, name);\n    return Model;\n};\n\nexports.C = function(name, modelDesc, model) {\n    var extendObj = {\n        model: model,\n        sync: function(method, model, opts) {\n            var config = model.config || {};\n            var type = (config.adapter ? config.adapter.type : null) || \"localDefault\";\n            \"localDefault\" === type && (type = \"sql\");\n            require(\"alloy/sync/\" + type).sync(method, model, opts);\n        }\n    };\n    var Collection = Backbone.Collection.extend(extendObj);\n    var config = Collection.prototype.config = model.prototype.config;\n    var type = (config.adapter ? config.adapter.type : null) || \"localDefault\";\n    var adapter = require(\"alloy/sync/\" + type);\n    _.isFunction(adapter.afterCollectionCreate) && adapter.afterCollectionCreate(Collection);\n    _.isFunction(modelDesc.extendCollection) && (Collection = modelDesc.extendCollection(Collection) || Collection);\n    return Collection;\n};\n```\n\n\u3055\u304d\u306b\u3001M()\u306e\u307b\u3046\u3092\u898b\u3066\u3044\u304f\u3002\n\uff12\u756a\u76ee\u306e\u5f15\u6570modelDesc\u306b\u3001exports.definition\u304c\u5165\u3063\u3066\u3044\u308b\u306e\u3092\u982d\u306b\u5165\u308c\u3066\u304a\u304f\u3002\n\u305d\u3046\u3059\u308b\u3068\u3001\uff12\u301c\uff13\u884c\u76ee\u306e\n\n```javascript:\n    var config = modelDesc.config;\n    var type = (config.adapter ? config.adapter.type : null) || \"localDefault\";\n```\n\n\u306f\u3001\u5909\u6570config\u306bexports.definition.config\u3092\u4ee3\u5165\u3057\u3001\n\u5909\u6570type\u306bexports.definition.adapter\u3092\u5143\u306b\u6c42\u3081\u305f\u5024\u3092\u4ee3\u5165\u3057\u3066\u3044\u308b\u3053\u3068\u306b\u306a\u308b\u3002\n\n\u6b21\u3002\nalloy.js\u306e\uff17\u884c\u76ee\u3042\u305f\u308a\u3002\n\n```javascript:\n    var extendObj = {\n        defaults: config.defaults,\n```\n\n\u3068\u3057\u3066\u3001extendObj.defaults\u306bconfig.defaults(=exports.definition.config.defaults)\u3092\u4ee3\u5165\u3057\u3066\u3044\u308b\u3002\n\u7d50\u69cb\u30d0\u30e9\u30d0\u30e9\u306b\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3000\uff1c\u3000exports.definition\n\n\u305d\u306e\u5f8c\u3082\u7d06\u4f59\u66f2\u6298\u3092\u7d4c\u306a\u304c\u3089\u6700\u7d42\u7684\u306b\u3001\uff11\uff18\u301c\uff11\uff19\u884c\u76ee\n\n```javascript:\n    var Model = Backbone.Model.extend(extendObj, extendClass);\n    Model.prototype.config = config;\n```\n\n\u3067\u3001Backbone.Model\u306b\u7d50\u3073\u3064\u3051\u3089\u308c\u3066\u3044\u308b\u3002\n\u7d50\u5c40\u3001extendObj.defautls\u306b\u7d50\u3073\u3064\u3051\u3089\u308c\u305fexports.definition.defaults\u304c\nBackbone.Model.extend()\u306b\u6e21\u3055\u308c\u3001\u307e\u305f\u3001\nexports.definition.config\u304c\u3001Model.prototype.config\u306b\u4ee3\u5165\u3055\u308c\u3066\u3044\u308b\u3002\n\u3055\u3089\u306b\u3001extendObj.sync()\u306e\u4e2d\u3067\u306f\u3001config.adapter\u304b\u3089\u6c42\u3081\u305ftype\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\uff08type\u306f\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u306e\u3068\u304d\"sql\"\u3092\u4f7f\u3046\u306e\u304b\u3001\"localStorage\"\u3092\u4f7f\u3046\u306e\u304b\u3001\u307f\u305f\u3044\u306a\u3053\u3068\u3092\u8868\u3057\u3066\u3044\u308b\uff09\u3002\n\n\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308b\u3002\n\n\u3067\u3053\u308c\u304b\u3089\u4f55\u304c\u308f\u304b\u308b\u304b\u3068\u3044\u3046\u3068\u2026Backbone.js\u3092\u52c9\u5f37\u3059\u308b\u3079\u304d\u3001\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308b\uff08\uff1f\uff09\n\nC()\u306e\u307b\u3046\u306f\u4ee5\u4e0b\u540c\u69d8\u3067\u7565\u3002\n\n# \u304a\u307e\u3051\n\n\u305d\u308c\u3060\u3051\u3067\u306f\u4f55\u306a\u306e\u3067\u3001\u3061\u3087\u3063\u3068\u3060\u3051\u3002\n\n## config.defaults\n\nexports.definition\u3067\u5b9a\u7fa9\u3055\u308c\u305fconfig.defaults\u304c\u3001Backbone.Model.Extend()\u306b\u6e21\u3055\u308c\u308b\u306e\u3067\u3001\n\n```javascript:\nexports.definition = {\n    config: {\n        \"defaults\": {\n            \"description\": \"-\",\n            \"limitTime\": \"\",\n            \"done\": \"false\"\n        }\n    }\n}\n```\n\n\u3068\u66f8\u3044\u3066\u304a\u3051\u3070\u3001\n\n```javascript:\nvar Model = Backbone.Model.extend({\n    \"defaults\": {\n        \"description\": \"-\",\n        \"limitTime\": \"\",\n        \"done\": \"false\"\n    }\n});\n```\n\n\u3068\u66f8\u3044\u305f\u306e\u3068\u540c\u3058\u3053\u3068\u306b\u306a\u308b\u3002\n\n## extendModel\n\nextendModel\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8a18\u8ff0\u3092\u3059\u308b\u3053\u3068\u3067\u30e2\u30c7\u30eb\u3092\u62e1\u5f35\u51fa\u6765\u308b\u3002\n\n```javascript:\nexports.definition = {\n    extendModel: function(Model) {      \n        _.extend(Model.prototype, {\n            // Implement the validate method\n            validate: function (attrs) {\n    \t        for (var key in attrs) {\n                    var value = attrs[key];\n                    if (key === \"description\") {\n                        if (value.length <= 0) {\n                            return \"Error: No description!\";\n                        }\t\n                    }\t\n                }\n            }\n        });\n        return Model;\n    }\n}\n```\n\n## extendCollection\n\nBackbone.js\u3092\u4f7f\u3046\u5834\u5408\u3001Backbone.Model\u3092\u62e1\u5f35\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u3001Backbone.Collection\u3092\u62e1\u5f35\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u3044\u304f\u3064\u3082\u3044\u308c\u3066\u304a\u304f\u3053\u3068\u304c\u3042\u308b\uff08\u3088\u3046\u3060\uff09\u304c\u3001\nexports.definition\u306b\u3001extendModel\u3068extendCollection\u3092\u540c\u6642\u306b\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u3001\nModel\u3068Collection\u3092\u4e00\u5ea6\u306b\u8a18\u8ff0\u3067\u304d\u308b\uff08\u3088\u3046\u306a\u6c17\u304c\u3059\u308b\u2026\uff09\u3002\n\n>\u3059\u307f\u307e\u305b\u3093\u3002Backbone.js\u306f\u52c9\u5f37\u4e0d\u8db3\u306a\u306e\u3067\u2026\u3002\n\n```javascript:\nexports.definition = {\n    extendModel: function(Model) {      \n        _.extend(Model.prototype, {\n            // \u3053\u3063\u3061\u306fBackbone.Model\u95a2\u4fc2\n        });\n    },\n    extendCollection: function(Collection) {        \n        _.extend(Collection.prototype, {\n            // \u3053\u3063\u3061\u306fBackbone.Collection\u95a2\u4fc2\n        });\n        return Collection;\n    }\n}\n```\n\n\n\n", "tags": ["JavaScript", "Backbone.js", "Alloy", "Titanium"]}