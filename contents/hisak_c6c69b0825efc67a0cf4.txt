{"context": "docker-machine\u3092\u4f7f\u308f\u305a\u306b\u6c17\u8efd\u306bSwarm cluster\u3092\u4f5c\u308a\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u305f\u3089\u3001\u7d20\u6674\u3089\u3057\u3044video tutorial\u304c\u3042\u3063\u305f\u306e\u3067\u3084\u3063\u3066\u307f\u305f\u3002Video 2\u306eHigh Availability Configuration\u306e\u3068\u3053\u308d\u307e\u3067\u3092\u4ee5\u4e0b\u30e1\u30e2\u3057\u3066\u307f\u308b\u3002\n\n\u74b0\u5883\n\nUbuntu 14.04 (on VMware Workstation)\u30014 VM (manager x2, node x2)\u3092\u5229\u7528\nDocker Engine 1.11.0 \u3053\u306e\u901a\u308a\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nSwarm 1.2.0\n\u5229\u7528\u3057\u305fIP\u30a2\u30c9\u30ec\u30b9\n\n\nswarm manager1: 192.168.209.138\nswarm manager2: 192.168.209.168\nswarm node1: 192.168.209.166\nswarm node2: 192.168.209.167\n\n\n\n\n\u6e96\u5099\n\nRemote API\u306e\u8a2d\u5b9a\n\n\n/etc/default/docker\nDOCKER_OPTS=\"-H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock\"\n\n\n\nDocker Engine\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u72b6\u614b\u306eVM\u3092\u30af\u30ed\u30fc\u30f3\u3057\u3066\u4f7f\u3044\u307e\u308f\u305d\u3046\u3068\u3059\u308b\u3068\u3001ID\u304c\u91cd\u8907\u3059\u308b\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u3042\u3068\u3042\u3068\u767a\u751f\u3059\u308b\u306e\u3067\u3001/etc/docker/key.json\u3092\u524a\u9664\u3057\u3066service docker restart\u3057\u3066\u304a\u304f\u3002\n\n\n\u8a2d\u5b9a\nservice discovery\u7528\u306e\u5206\u6563KVS\u306b\u306fConsul\u3092\u5229\u7528\u3002\n\nmanager1(192.168.209.138)\n(consul setup)\n$ docker run --restart=unless-stopped -d -p 8500:8500 -h consul1 progrium/consul -server -bootstrap\n(swarm setup)\n$ docker run --restart=unless-stopped -d -p 3375:2375 swarm manage --replication --advertise 192.168.209.138:3375 consul://192.168.209.138:8500\n$ docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                                                            NAMES\na2cb67a7618d        swarm               \"/swarm manage --repl\"   5 hours ago         Up 5 hours          0.0.0.0:3375->2375/tcp                                                           tender_bassi\n9558a4ef7b35        progrium/consul     \"/bin/start -server -\"   25 hours ago        Up 25 hours         53/tcp, 53/udp, 8300-8302/tcp, 8400/tcp, 8301-8302/udp, 0.0.0.0:8500->8500/tcp   high_visvesvaraya\n\n\nnode1\u3068node2\u3092Cluster\u306bjoin\u3055\u305b\u308b\u3002\n\nmanager1(192.168.209.138)\n$ docker -H=tcp://192.168.209.166:2375 run -d swarm join --advertise=192.168.209.166:2375 consul://192.168.209.138:8500\n$ docker -H=tcp://192.168.209.167:2375 run -d swarm join --advertise=192.168.209.167:2375 consul://192.168.209.138:8500\n$ DOCKER_HOST=192.168.209.138:3375 docker info\nContainers: 24\n Running: 2\n Paused: 0\n Stopped: 22\nImages: 14\nServer Version: swarm/1.2.0\nRole: primary\nStrategy: spread\nFilters: health, port, dependency, affinity, constraint\nNodes: 2\n ubu-swarm-node1: 192.168.209.166:2375\n  \u2514 Status: Healthy\n  \u2514 Containers: 13\n  \u2514 Reserved CPUs: 0 / 2\n  \u2514 Reserved Memory: 1 GiB / 4.047 GiB\n  \u2514 Labels: executiondriver=, kernelversion=3.13.0-85-generic, operatingsystem=Ubuntu 14.04.4 LTS, storagedriver=aufs\n  \u2514 Error: (none)\n  \u2514 UpdatedAt: 2016-04-23T10:44:58Z\n  \u2514 ServerVersion: 1.11.0\n ubu-swarm-node2: 192.168.209.167:2375\n  \u2514 Status: Healthy\n  \u2514 Containers: 11\n  \u2514 Reserved CPUs: 0 / 2\n  \u2514 Reserved Memory: 1 GiB / 4.047 GiB\n  \u2514 Labels: executiondriver=, kernelversion=3.13.0-85-generic, operatingsystem=Ubuntu 14.04.4 LTS, storagedriver=aufs\n  \u2514 Error: (none)\n  \u2514 UpdatedAt: 2016-04-23T10:44:39Z\n  \u2514 ServerVersion: 1.11.0\nPlugins:\n Volume:\n Network:\nKernel Version: 3.13.0-85-generic\nOperating System: linux\nArchitecture: amd64\nCPUs: 4\nTotal Memory: 8.094 GiB\nName: a2cb67a7618d\nDocker Root Dir:\nDebug mode (client): false\nDebug mode (server): false\nWARNING: No kernel memory limit support\n\n\nHA\u306e\u305f\u3081manager2\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\nmanager2(192.168.209.168)\n$ docker run --restart=unless-stopped -d -p 3375:2375 swarm manage --replication --advertise 192.168.209.168:3375 consul://192.168.209.138:8500\n$ docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES\n3fa053141c84        swarm               \"/swarm manage --repl\"   4 seconds ago       Up 4 seconds        0.0.0.0:3375->2375/tcp   evil_darwin\n$ docker logs 3fa0\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Initializing discovery without TLS\"\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Listening for HTTP\" addr=\":2375\" proto=tcp\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Leader Election: Cluster leadership lost\"\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"New leader elected: 192.168.209.138:3375\"\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Registered Engine ubu-swarm-node2 at 192.168.209.167:2375\"\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Registered Engine ubu-swarm-node1 at 192.168.209.166:2375\"\n$ DOCKER_HOST=192.168.209.168:3375 docker info\nContainers: 24\n Running: 2\n Paused: 0\n Stopped: 22\nImages: 14\nServer Version: swarm/1.2.0\nRole: replica\nPrimary: 192.168.209.138:3375\nStrategy: spread\nFilters: health, port, dependency, affinity, constraint\nNodes: 2\n ubu-swarm-node1: 192.168.209.166:2375\n  \u2514 Status: Healthy\n  \u2514 Containers: 13\n  \u2514 Reserved CPUs: 0 / 2\n  \u2514 Reserved Memory: 1 GiB / 4.047 GiB\n  \u2514 Labels: executiondriver=, kernelversion=3.13.0-85-generic, operatingsystem=Ubuntu 14.04.4 LTS, storagedriver=aufs\n  \u2514 Error: (none)\n  \u2514 UpdatedAt: 2016-04-23T10:56:25Z\n  \u2514 ServerVersion: 1.11.0\n ubu-swarm-node2: 192.168.209.167:2375\n  \u2514 Status: Healthy\n  \u2514 Containers: 11\n  \u2514 Reserved CPUs: 0 / 2\n  \u2514 Reserved Memory: 1 GiB / 4.047 GiB\n  \u2514 Labels: executiondriver=, kernelversion=3.13.0-85-generic, operatingsystem=Ubuntu 14.04.4 LTS, storagedriver=aufs\n  \u2514 Error: (none)\n  \u2514 UpdatedAt: 2016-04-23T10:56:05Z\n  \u2514 ServerVersion: 1.11.0\nPlugins:\n Volume:\n Network:\nKernel Version: 3.13.0-85-generic\nOperating System: linux\nArchitecture: amd64\nCPUs: 4\nTotal Memory: 8.094 GiB\nName: 3fa053141c84\nDocker Root Dir:\nDebug mode (client): false\nDebug mode (server): false\nWARNING: No kernel memory limit support\n\n\n\u3055\u3063\u305d\u304f\u30b3\u30f3\u30c6\u30ca\u3092\u7acb\u3061\u4e0a\u3052\u3066\u307f\u308b\u3002\n\nmanager1(192.168.209.138)\n$ export DOCKER_HOST=192.168.209.138:3375\n$ docker run -dit ubuntu /bin/bash\n9291d5a7c57edb577ec828f4b24a990a1472734e3d45a75936dc806c7691a53e\n$ docker run -dit ubuntu /bin/bash\nf6ea8aa3b746f25fc76c28a56c19f003a8fae35d034bee017aecfae4aecaa424\n$ docker run -dit ubuntu /bin/bash\n099c3ee9cbfb9f54b9db7c237e6e655cadbda38ecb8e452e7fa5718718c75b58\n$ docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED                  STATUS                  PORTS               NAMES\nf6ea8aa3b746        ubuntu              \"/bin/bash\"         Less than a second ago   Up Less than a second                       ubu-swarm-node2/backstabbing_knuth\n099c3ee9cbfb        ubuntu              \"/bin/bash\"         2 seconds ago            Up 2 seconds                                ubu-swarm-node1/elated_poincare\n9291d5a7c57e        ubuntu              \"/bin/bash\"         7 minutes ago            Up 7 minutes                                ubu-swarm-node2/romantic_pare\n\n\nHA\u306e\u78ba\u8a8d\u3067primary\u3068\u306a\u3063\u3066\u3044\u308bmanager1\u3092\u843d\u3068\u3057\u3066\u307f\u308b\u3002\n\nmanager1(192.168.209.138)\n$ docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                                                            NAMES\na2cb67a7618d        swarm               \"/swarm manage --repl\"   22 hours ago        Up 22 hours         0.0.0.0:3375->2375/tcp                                                           tender_bassi\n9558a4ef7b35        progrium/consul     \"/bin/start -server -\"   42 hours ago        Up 42 hours         53/tcp, 53/udp, 8300-8302/tcp, 8400/tcp, 8301-8302/udp, 0.0.0.0:8500->8500/tcp   high_visvesvaraya\n$ docker stop a2cb\na2cb\n$ docker rm a2cb\na2cb\n\n\nmanager2\u304cprimary\u3068\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\nmanager2(192.168.209.168)\n$ DOCKER_HOST=192.168.209.168:3375 docker info\nContainers: 28\n Running: 5\n Paused: 0\n Stopped: 23\nImages: 14\nServer Version: swarm/1.2.0\nRole: primary\n(\u7701\u7565)\n$ docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES\n3fa053141c84        swarm               \"/swarm manage --repl\"   4 seconds ago       Up 4 seconds        0.0.0.0:3375->2375/tcp   evil_darwin\n$ docker logs 3fa0\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Initializing discovery without TLS\"\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Listening for HTTP\" addr=\":2375\" proto=tcp\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Leader Election: Cluster leadership lost\"\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"New leader elected: 192.168.209.138:3375\"\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Registered Engine ubu-swarm-node2 at 192.168.209.167:2375\"\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Registered Engine ubu-swarm-node1 at 192.168.209.166:2375\"\ntime=\"2016-04-23T11:12:36Z\" level=info msg=\"Leader Election: Cluster leadership acquired\"\n\n\n\n\u304a\u3057\u307e\u3044\n\nReferences\n\nVideo Tutorials to Join Your First Docker Swarm Cluster\nDocker swarm \u306e\u30af\u30e9\u30b9\u30bf\u3092\u624b\u3067\u69cb\u7bc9\u3057\u3066\u307f\u308b\nDocker Swarm\n\ndocker-machine\u3092\u4f7f\u308f\u305a\u306b\u6c17\u8efd\u306bSwarm cluster\u3092\u4f5c\u308a\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u305f\u3089\u3001\u7d20\u6674\u3089\u3057\u3044[video tutorial](https://blog.docker.com/2016/03/swarmweek-join-your-first-swarm/)\u304c\u3042\u3063\u305f\u306e\u3067\u3084\u3063\u3066\u307f\u305f\u3002Video 2\u306eHigh Availability Configuration\u306e\u3068\u3053\u308d\u307e\u3067\u3092\u4ee5\u4e0b\u30e1\u30e2\u3057\u3066\u307f\u308b\u3002\n\n## \u74b0\u5883\n- Ubuntu 14.04 (on VMware Workstation)\u30014 VM (manager x2, node x2)\u3092\u5229\u7528\n- Docker Engine 1.11.0 [\u3053\u306e\u901a\u308a\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb](https://docs.docker.com/engine/installation/linux/ubuntulinux/)\n- Swarm 1.2.0\n- \u5229\u7528\u3057\u305fIP\u30a2\u30c9\u30ec\u30b9\n    - swarm manager1: 192.168.209.138\n    - swarm manager2: 192.168.209.168\n    - swarm node1: 192.168.209.166\n    - swarm node2: 192.168.209.167\n\n## \u6e96\u5099\n- Remote API\u306e\u8a2d\u5b9a\n\n```bash:/etc/default/docker\nDOCKER_OPTS=\"-H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock\"\n```\n- Docker Engine\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u72b6\u614b\u306eVM\u3092\u30af\u30ed\u30fc\u30f3\u3057\u3066\u4f7f\u3044\u307e\u308f\u305d\u3046\u3068\u3059\u308b\u3068\u3001ID\u304c\u91cd\u8907\u3059\u308b\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u3042\u3068\u3042\u3068\u767a\u751f\u3059\u308b\u306e\u3067\u3001`/etc/docker/key.json`\u3092\u524a\u9664\u3057\u3066`service docker restart`\u3057\u3066\u304a\u304f\u3002\n\n## \u8a2d\u5b9a\nservice discovery\u7528\u306e\u5206\u6563KVS\u306b\u306f[Consul](https://www.consul.io/)\u3092\u5229\u7528\u3002\n\n```shell-session:manager1(192.168.209.138)\n(consul setup)\n$ docker run --restart=unless-stopped -d -p 8500:8500 -h consul1 progrium/consul -server -bootstrap\n(swarm setup)\n$ docker run --restart=unless-stopped -d -p 3375:2375 swarm manage --replication --advertise 192.168.209.138:3375 consul://192.168.209.138:8500\n$ docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                                                            NAMES\na2cb67a7618d        swarm               \"/swarm manage --repl\"   5 hours ago         Up 5 hours          0.0.0.0:3375->2375/tcp                                                           tender_bassi\n9558a4ef7b35        progrium/consul     \"/bin/start -server -\"   25 hours ago        Up 25 hours         53/tcp, 53/udp, 8300-8302/tcp, 8400/tcp, 8301-8302/udp, 0.0.0.0:8500->8500/tcp   high_visvesvaraya\n```\nnode1\u3068node2\u3092Cluster\u306bjoin\u3055\u305b\u308b\u3002\n\n```shell-session:manager1(192.168.209.138)\n$ docker -H=tcp://192.168.209.166:2375 run -d swarm join --advertise=192.168.209.166:2375 consul://192.168.209.138:8500\n$ docker -H=tcp://192.168.209.167:2375 run -d swarm join --advertise=192.168.209.167:2375 consul://192.168.209.138:8500\n$ DOCKER_HOST=192.168.209.138:3375 docker info\nContainers: 24\n Running: 2\n Paused: 0\n Stopped: 22\nImages: 14\nServer Version: swarm/1.2.0\nRole: primary\nStrategy: spread\nFilters: health, port, dependency, affinity, constraint\nNodes: 2\n ubu-swarm-node1: 192.168.209.166:2375\n  \u2514 Status: Healthy\n  \u2514 Containers: 13\n  \u2514 Reserved CPUs: 0 / 2\n  \u2514 Reserved Memory: 1 GiB / 4.047 GiB\n  \u2514 Labels: executiondriver=, kernelversion=3.13.0-85-generic, operatingsystem=Ubuntu 14.04.4 LTS, storagedriver=aufs\n  \u2514 Error: (none)\n  \u2514 UpdatedAt: 2016-04-23T10:44:58Z\n  \u2514 ServerVersion: 1.11.0\n ubu-swarm-node2: 192.168.209.167:2375\n  \u2514 Status: Healthy\n  \u2514 Containers: 11\n  \u2514 Reserved CPUs: 0 / 2\n  \u2514 Reserved Memory: 1 GiB / 4.047 GiB\n  \u2514 Labels: executiondriver=, kernelversion=3.13.0-85-generic, operatingsystem=Ubuntu 14.04.4 LTS, storagedriver=aufs\n  \u2514 Error: (none)\n  \u2514 UpdatedAt: 2016-04-23T10:44:39Z\n  \u2514 ServerVersion: 1.11.0\nPlugins:\n Volume:\n Network:\nKernel Version: 3.13.0-85-generic\nOperating System: linux\nArchitecture: amd64\nCPUs: 4\nTotal Memory: 8.094 GiB\nName: a2cb67a7618d\nDocker Root Dir:\nDebug mode (client): false\nDebug mode (server): false\nWARNING: No kernel memory limit support\n```\n\nHA\u306e\u305f\u3081manager2\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n```shell-session:manager2(192.168.209.168)\n$ docker run --restart=unless-stopped -d -p 3375:2375 swarm manage --replication --advertise 192.168.209.168:3375 consul://192.168.209.138:8500\n$ docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES\n3fa053141c84        swarm               \"/swarm manage --repl\"   4 seconds ago       Up 4 seconds        0.0.0.0:3375->2375/tcp   evil_darwin\n$ docker logs 3fa0\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Initializing discovery without TLS\"\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Listening for HTTP\" addr=\":2375\" proto=tcp\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Leader Election: Cluster leadership lost\"\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"New leader elected: 192.168.209.138:3375\"\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Registered Engine ubu-swarm-node2 at 192.168.209.167:2375\"\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Registered Engine ubu-swarm-node1 at 192.168.209.166:2375\"\n$ DOCKER_HOST=192.168.209.168:3375 docker info\nContainers: 24\n Running: 2\n Paused: 0\n Stopped: 22\nImages: 14\nServer Version: swarm/1.2.0\nRole: replica\nPrimary: 192.168.209.138:3375\nStrategy: spread\nFilters: health, port, dependency, affinity, constraint\nNodes: 2\n ubu-swarm-node1: 192.168.209.166:2375\n  \u2514 Status: Healthy\n  \u2514 Containers: 13\n  \u2514 Reserved CPUs: 0 / 2\n  \u2514 Reserved Memory: 1 GiB / 4.047 GiB\n  \u2514 Labels: executiondriver=, kernelversion=3.13.0-85-generic, operatingsystem=Ubuntu 14.04.4 LTS, storagedriver=aufs\n  \u2514 Error: (none)\n  \u2514 UpdatedAt: 2016-04-23T10:56:25Z\n  \u2514 ServerVersion: 1.11.0\n ubu-swarm-node2: 192.168.209.167:2375\n  \u2514 Status: Healthy\n  \u2514 Containers: 11\n  \u2514 Reserved CPUs: 0 / 2\n  \u2514 Reserved Memory: 1 GiB / 4.047 GiB\n  \u2514 Labels: executiondriver=, kernelversion=3.13.0-85-generic, operatingsystem=Ubuntu 14.04.4 LTS, storagedriver=aufs\n  \u2514 Error: (none)\n  \u2514 UpdatedAt: 2016-04-23T10:56:05Z\n  \u2514 ServerVersion: 1.11.0\nPlugins:\n Volume:\n Network:\nKernel Version: 3.13.0-85-generic\nOperating System: linux\nArchitecture: amd64\nCPUs: 4\nTotal Memory: 8.094 GiB\nName: 3fa053141c84\nDocker Root Dir:\nDebug mode (client): false\nDebug mode (server): false\nWARNING: No kernel memory limit support\n```\n\n\u3055\u3063\u305d\u304f\u30b3\u30f3\u30c6\u30ca\u3092\u7acb\u3061\u4e0a\u3052\u3066\u307f\u308b\u3002\n\n```shell-session:manager1(192.168.209.138)\n$ export DOCKER_HOST=192.168.209.138:3375\n$ docker run -dit ubuntu /bin/bash\n9291d5a7c57edb577ec828f4b24a990a1472734e3d45a75936dc806c7691a53e\n$ docker run -dit ubuntu /bin/bash\nf6ea8aa3b746f25fc76c28a56c19f003a8fae35d034bee017aecfae4aecaa424\n$ docker run -dit ubuntu /bin/bash\n099c3ee9cbfb9f54b9db7c237e6e655cadbda38ecb8e452e7fa5718718c75b58\n$ docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED                  STATUS                  PORTS               NAMES\nf6ea8aa3b746        ubuntu              \"/bin/bash\"         Less than a second ago   Up Less than a second                       ubu-swarm-node2/backstabbing_knuth\n099c3ee9cbfb        ubuntu              \"/bin/bash\"         2 seconds ago            Up 2 seconds                                ubu-swarm-node1/elated_poincare\n9291d5a7c57e        ubuntu              \"/bin/bash\"         7 minutes ago            Up 7 minutes                                ubu-swarm-node2/romantic_pare\n```\n\nHA\u306e\u78ba\u8a8d\u3067primary\u3068\u306a\u3063\u3066\u3044\u308bmanager1\u3092\u843d\u3068\u3057\u3066\u307f\u308b\u3002\n\n```shell-session:manager1(192.168.209.138)\n$ docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                                                            NAMES\na2cb67a7618d        swarm               \"/swarm manage --repl\"   22 hours ago        Up 22 hours         0.0.0.0:3375->2375/tcp                                                           tender_bassi\n9558a4ef7b35        progrium/consul     \"/bin/start -server -\"   42 hours ago        Up 42 hours         53/tcp, 53/udp, 8300-8302/tcp, 8400/tcp, 8301-8302/udp, 0.0.0.0:8500->8500/tcp   high_visvesvaraya\n$ docker stop a2cb\na2cb\n$ docker rm a2cb\na2cb\n```\n\nmanager2\u304cprimary\u3068\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n```shell-session:manager2(192.168.209.168)\n$ DOCKER_HOST=192.168.209.168:3375 docker info\nContainers: 28\n Running: 5\n Paused: 0\n Stopped: 23\nImages: 14\nServer Version: swarm/1.2.0\nRole: primary\n(\u7701\u7565)\n$ docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES\n3fa053141c84        swarm               \"/swarm manage --repl\"   4 seconds ago       Up 4 seconds        0.0.0.0:3375->2375/tcp   evil_darwin\n$ docker logs 3fa0\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Initializing discovery without TLS\"\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Listening for HTTP\" addr=\":2375\" proto=tcp\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Leader Election: Cluster leadership lost\"\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"New leader elected: 192.168.209.138:3375\"\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Registered Engine ubu-swarm-node2 at 192.168.209.167:2375\"\ntime=\"2016-04-23T10:54:26Z\" level=info msg=\"Registered Engine ubu-swarm-node1 at 192.168.209.166:2375\"\ntime=\"2016-04-23T11:12:36Z\" level=info msg=\"Leader Election: Cluster leadership acquired\"\n\n```\n\n\u304a\u3057\u307e\u3044\n\n## References\n- [Video Tutorials to Join Your First Docker Swarm Cluster](https://blog.docker.com/2016/03/swarmweek-join-your-first-swarm/)\n- [Docker swarm \u306e\u30af\u30e9\u30b9\u30bf\u3092\u624b\u3067\u69cb\u7bc9\u3057\u3066\u307f\u308b](http://qiita.com/rerofumi/items/32ad59f4fa4a553055aa)\n- [Docker Swarm](https://docs.docker.com/swarm/)\n", "tags": ["docker", "DockerSwarm"]}