{"context": "threejs\u3067ShaderMaterial\u3068\u304b\u3092\u4f7f\u3046\u3068\u3001\u81ea\u5206\u3067\u76f4\u63a5GLSL\u3092\u3044\u3058\u308c\u308b\u3002\n\u305d\u306e\u305f\u3081\u306e\u30e1\u30e2\u3002\n\n\u5165\u51fa\u529b\n\nVertexShader\n\n\u5165\u529b \u306a\u3057\n\u51fa\u529b gl_Position (vec4) _ \uff12\u6b21\u5143\u5e73\u9762\u4e0a\u306e\u9802\u70b9\u5ea7\u6a19\n\u51fa\u529b gl_PointSize (float) _ \u70b9\u306e\u30b5\u30a4\u30ba\n\n\nFragmentShader\n\n\u5165\u529b gl_FrontFacing (bool) \u30dd\u30ea\u30b4\u30f3\u306e\u8868\u88cf\u306e\u30d6\u30fc\u30eb\u5024\n\u5165\u529b gl_FragCoord (vec4) \u30a6\u30a3\u30f3\u30c9\u30a6\u5ea7\u6a19=canvas\u4e0a\u306e\u5ea7\u6a19 (x,y,z, 1/w)\n\u5165\u529b gl_PointCoord (vec2) \u30dd\u30a4\u30f3\u30c8\u30b9\u30d7\u30e9\u30a4\u30c8\u6642\u306e\uff12\u6b21\u5143\u5ea7\u6a19\n\u51fa\u529b gl_FragColor (vec4) \u30d4\u30af\u30bb\u30eb\u306e\u63cf\u753b\u8272\n\u51fa\u529b gl_FragData glDrawBuffers\u3068\u304b\u3067\u4f7f\u3046\u914d\u5217\u30c7\u30fc\u30bf\n\n\nGLSL ES\u4e0a\u3067\u6271\u308f\u308c\u308b\u578b\n\nint (\u6574\u6570)\nivec2,ivec3,ivec4 (int\u306e\u30d9\u30af\u30c8\u30eb)\nbool (\u30d6\u30fc\u30eb)\nbvec2,bvec3,bvec4 (bool\u306e\u30d9\u30af\u30c8\u30eb)\nfloat\nvec2,vec3,vec4 (float\u306e\u30d9\u30af\u30c8\u30eb)\nmat2,mat3,mat4 (\u884c\u5217)\nsampler2D (2\u6b21\u5143\u30c6\u30af\u30b9\u30c1\u30e3)\nsamplerCube (3\u6b21\u5143\u30c6\u30af\u30b9\u30c1\u30e3)\n\n\nthreejs\u306b\u3088\u3063\u3066\u65e2\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u5909\u6570\n\n\n\n\u5909\u6570\u540d\n\u8aac\u660e\n\n\n\n\nmodelMatrix\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5ea7\u6a19\u304b\u3089\u30ef\u30fc\u30eb\u30c9\u5ea7\u6a19\u3078\u5909\u63db\u3059\u308b\n\n\nviewMatrix\n\u30ef\u30fc\u30eb\u30c9\u5ea7\u6a19\u304b\u3089\u8996\u70b9\u5ea7\u6a19\u3078\u5909\u63db\n\n\nmodelViewMatrix\nmodelMatrix\u3068viewMatrix\u306e\u7a4d\u7b97\n\n\nprojectionMatrix\n\u30ab\u30e1\u30e9\u306e\u5404\u7a2e\u30d1\u30e9\u30e1\u30fc\u30bf\u304b\u3089\uff13\u6b21\u5143\u3092\uff12\u6b21\u5143\u306b\u5c04\u5f71\u3057\u3001\u30af\u30ea\u30c3\u30d7\u5ea7\u6a19\u7cfb\u306b\u5909\u63db\u3059\u308b\u884c\u5217\n\n\ncameraPosition\n\u30ab\u30e1\u30e9\u306e\u4f4d\u7f6e\n\n\nnormalMatrix\n\u9802\u70b9\u6cd5\u7dda\u30d9\u30af\u30c8\u30eb\u3092\u8996\u70b9\u5ea7\u6a19\u7cfb\u306b\u5909\u63db\u3059\u308b\u884c\u5217\n\n\nposition\n\u9802\u70b9\u5ea7\u6a19\n\n\nnormal\n\u9802\u70b9\u6cd5\u7dda\u30d9\u30af\u30c8\u30eb\n\n\nuv\n\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u8cbc\u308b\u305f\u3081\u306eUV\u5ea7\u6a19\n\n\n\n\u30d0\u30fc\u30c6\u30c3\u30af\u30b9\u30b7\u30a7\u30fc\u30c0\u30fc\u3067\u306f\u5168\u90e8\u4f7f\u3048\u308b\u3002\n\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u30b7\u30a7\u30fc\u30c0\u30fc\u3067\u306f,viewMatrix\u3068cameraPosition\u306e\u307f\u4f7f\u3048\u308b\u3002\n\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u30b7\u30a7\u30fc\u30c0\u30fc\u5074\u3067\u4f7f\u3046\u3068\u304d\u306f\u30d0\u30fc\u30c6\u30c3\u30af\u30b9\u30b7\u30a7\u30fc\u30c0\u5185\u3067varying\u5909\u6570\u306b\u4e00\u65e6\u3044\u308c\u305f\u308a\u3059\u308b\u3002vUv=vu; \u307f\u305f\u3044\u306a\u611f\u3058\u3067\u3002\n\nthreejs\u304b\u3089uniform/attribute\u3092\u6e21\u3059\u3068\u304d\u6307\u5b9a\u3059\u308b\u6587\u5b57\u5217(type)\n\u3088\u304f\u3064\u304b\u3044\u305d\u3046\u306a\u306e\u306f\n\ni (\u6574\u6570)\nf (float)\nv2 (THREE.Vector2)\nv3 (THREE.Vector3)\nv4 (THREE.Vector4)\nc (THREE.Color)\nm4 (THREE.Matrix4)\nt (THREE.Texture)\n\n\nuniform_type.js\nvar uniformsExample = {\n\n\"uInt\" :  { type: \"i\", value: 1 },     // single integer\n\"uFloat\" : { type: \"f\", value: 3.14 }, // single float\n\n\"uVec2\" : { type: \"v2\", value: new THREE.Vector2( 0, 1 ) },       // single Vector2\n\"uVec3\" : { type: \"v3\", value: new THREE.Vector3( 0, 1, 2 ) },    // single Vector3\n\"uVec4\" : { type: \"v4\", value: new THREE.Vector4( 0, 1, 2, 3 ) }, // single Vector4\n\n\"uCol\" : { type: \"c\", value: new THREE.Color( 0xffaa00 ) }, // single Color\n\n\"uMat4\" : { type: \"m4\", value: new THREE.Matrix4() }, // single Matrix4\n\n\n\"uTex\" :     { type: \"t\", value: THREE.ImageUtils.loadTexture( \"texture.jpg\" ) }, // regular texture\n\"uTexCube\" : { type: \"t\", value: THREE.ImageUtils.loadTextureCube( [ \"px.jpg\", \"nx.jpg\", // cube texture\n                                                                     \"py.jpg\", \"ny.jpg\", \n                                                                     \"pz.jpg\", \"nz.jpg\" ] ) },\n\n\"uIntArray\"  : { type: \"iv1\", value: [ 1, 2, 3, 4, 5 ] },    // integer array (plain)\n\"uIntArray3\" : { type: \"iv\", value: [ 1, 2, 3, 4, 5, 6 ] },   // integer array (ivec3)\n\n\"uFloatArray\"  : { type: \"fv1\", value: [ 0.1, 0.2, 0.3, 0.4, 0.5 ] },    // float array (plain)\n\"uFloatArray3\" : { type: \"fv\",  value: [ 0.1, 0.2, 0.3, 0.4, 0.5, 0.6 ] }, // float array (vec3)\n\n\"uVec2Array\" : { type: \"v2v\", value: [ new THREE.Vector2( 0.1, 0.2 ), \n                                       new THREE.Vector2( 0.4, 0.5 ) ] }, // Vector2 array\n\n\"uVec3Array\" : { type: \"v3v\", value: [ new THREE.Vector3( 0.1, 0.2, 0.3 ), \n                                       new THREE.Vector3( 0.4, 0.5, 0.6 ) ] }, // Vector3 array\n\n\"uVec4Array\" : { type: \"v4v\", value: [ new THREE.Vector4( 0.1, 0.2, 0.3, 0.4 ), \n                                       new THREE.Vector4( 0.4, 0.5, 0.6, 0.7 ) ] }, // Vector4 array\n\n\"uMat4Array\" : { type: \"m4v\", value: [ new THREE.Matrix4(), new THREE.Matrix4() ] }, // Matrix4 array\n\n\"uTexArray\" : { type: \"tv\", value: [ new THREE.Texture(), new THREE.Texture() ] } // texture array (regular)\n                                                                                              // texture units start from value\n\n};\n\n\n\u5f15\u7528\u5143: https://github.com/mrdoob/three.js/wiki/Uniforms-types\n\n\u5ea7\u6a19\u5909\u63db\u3068\u884c\u5217\u306e\u95a2\u4fc2\u6027\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5ea7\u6a19\u7cfb\uff08\u30ed\u30fc\u30ab\u30eb\u5ea7\u6a19\u7cfb\uff09\n\u3000\u2193\n\uff0amodelMatrix\n\u3000\u2193\n\u30ef\u30fc\u30eb\u30c9\u5ea7\u6a19\u7cfb\n\u3000\u2193\n\uff0aviewMatrix\n\u3000\u2193\n\u8996\u70b9\u5ea7\u6a19\u7cfb\uff08\u30ab\u30e1\u30e9\u304b\u3089\u898b\u305f\u5ea7\u6a19\uff09\n\u3000\u2193\n\uff0aprojectionMatrix\n\u3000\u2193\n\u30af\u30ea\u30c3\u30d7\u5ea7\u6a19\u7cfb \uff1d xyz\u3092-1\u301c+1\u3067\u8868\u3059\u5ea7\u6a19\u7cfb\n\u3000\u2193\n\u30a6\u30a3\u30f3\u30c9\u30a6\u5ea7\u6a19\u7cfb \uff1d canvas\u4e0a\u306e\u5ea7\u6a19\u7cfb\n\n\u57fa\u672c\u7684\u306afragmentShader/vertexShader\n\nvertexshader\nvarying vec2 vUv;// fragmentShader\u306b\u6e21\u3059\u305f\u3081\u306evarying\u5909\u6570\nvoid main()\n{\n  // \u51e6\u7406\u3059\u308b\u9802\u70b9\u3054\u3068\u306euv(\u30c6\u30af\u30b9\u30c1\u30e3)\u5ea7\u6a19\u3092\u305d\u306e\u307e\u307efragmentShader\u306b\u6a2a\u6d41\u3057\u3059\u308b\n  vUv = uv;\n  // \u5909\u63db\uff1a\u30ed\u30fc\u30ab\u30eb\u5ea7\u6a19 \u2192 \u914d\u7f6e \u2192 \u30ab\u30e1\u30e9\u5ea7\u6a19\n  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);    \n  // \u5909\u63db\uff1a\u30ab\u30e1\u30e9\u5ea7\u6a19 \u2192 \u753b\u9762\u5ea7\u6a19\n  gl_Position = projectionMatrix * mvPosition;\n}\n\n\n\n\nfragmentShader\n//uniform \u5909\u6570\u3068\u3057\u3066\u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30c7\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u308b\nuniform sampler2D texture;\n// vertexShader\u3067\u51e6\u7406\u3055\u308c\u3066\u6e21\u3055\u308c\u308b\u30c6\u30af\u30b9\u30c1\u30e3\u5ea7\u6a19\nvarying vec2 vUv;                                             \n\nvoid main()\n{\n  // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u8272\u60c5\u5831\u3092\u305d\u306e\u307e\u307e\u30d4\u30af\u30bb\u30eb\u306b\u5857\u308b\n  gl_FragColor = texture2D(texture, vUv);\n}\n</script>\n\n\n\njs\nvar materialShaderSimple = new THREE.ShaderMaterial({            \n  vertexShader: vartexShaderString\n  fragmentShader: fragmentShaderString,\n  uniforms: {\n    texture: { type: 't', value: ImageUtils.loadTexture(\"**.png\")}                                   }\n});\n\n\n\u203b\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002 http://izmiz.hateblo.jp/entry/2014/09/27/235743\n\nGLSL ES\u7d44\u307f\u8fbc\u307f\u95a2\u6570\n\u899a\u3048\u306b\u304f\u3044\u3082\u306e\u3092\u629c\u7c8b\n\n\n\n\u95a2\u6570\u540d\n\u8aac\u660e\n\n\n\n\nsign(x)\n\u7b26\u53f7\u5224\u5225\u3001\u8ca0:-1,\u30bc\u30ed:0,\u6b63:1\n\n\nfract(x)\n\u5c0f\u6570\u306e\u90e8\u5206\u3060\u3051\u8fd4\u3059\n\n\nmod(x,y)\nx/y\u306e\u3042\u307e\u308a\n\n\nclamp(x,y,a)\n\u30af\u30e9\u30f3\u30d7\u51e6\u7406min(max(x,y),a)\n\n\nmix(x,y,a)\n\u7dda\u5f62\u88dc\u9593\n\n\nsmoothstep(edge0,edge1,x)\nx\u306e\u8981\u7d20\u306e\u3046\u3061\u3001edge0\u4ee5\u4e0b\u306e\u3082\u306e\u306f0.0\u3001edge1\u4ee5\u4e0a\u306e\u3082\u306e\u306f1.0\u306b\u3059\u308b\u3002x\u304cedge0\u3068edge1\u306e\u9593\u306b\u3042\u308b\u3068\u304d\u306b\u306f\u30013\u6b21\u30a8\u30eb\u30df\u30fc\u30c8\u88dc\u9593\u3092\u8fd4\u3059\u3002\n\n\nstep(a,x)\nx<a\u306e\u3068\u304d0, x\u2267a\u306e\u3068\u304d1\n\n\nsqrt(x),inverssqrt(x)\ninvers\u306f1/sqrt(x)\n\n\nnormalize(x)\n\u6b63\u898f\u5316\n\n\nfaceforward(N,I,Nref)\n\u6cd5\u7dda\u30d9\u30af\u30c8\u30ebN\u3092\u6761\u4ef6\u306b\u3088\u308a\u53cd\u8ee2\n\n\nreflect(I,N)\n\u6cd5\u7dda\u30d9\u30af\u30c8\u30ebN\u306e\u9762\u306b\u5bfe\u3057\u3066\u5165\u5c04\u30d9\u30af\u30c8\u30ebI\u306e\u53cd\u5c04\u30d9\u30af\u30c8\u30eb\u3092\u8fd4\u3059\n\n\nrefract(I,N,eta)\n\u5c48\u6298\u7387eta\u306e\u6cd5\u7dda\u30d9\u30af\u30c8\u30ebN\u306e\u9762\u306b\u5bfe\u3057\u3001\n\n\nlength(x)\n\u30d9\u30af\u30c8\u30eb\u306e\u9577\u3055\uff1d\u7d76\u5bfe\u5024\n\n\ndistance(x,y)\nx,y\u306e\u8ddd\u96e2\n\n\ndot(x,y)\n\u5185\u7a4d\n\n\ncross(x,y)\n\u5916\u7a4d\n\n\ntexture2D(uTexture, texCoords)\nuTexture\u306etexCoords\u5ea7\u6a19\u306e\u8272(vec4)\u3092\u8fd4\u3059\n\n\n\n\u53c2\u8003\uff1aglsl\u8f9e\u5178\nhttp://ec.nikkeibp.co.jp/nsp/dl/08513/HTML5GAMES_AppC.pdf\n\nthreejs\u5185\u3067shader\u304c\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u5834\u6240\nhttps://github.com/mrdoob/three.js/tree/master/src/renderers/shaders\n* THREE.ShaderChunk =   \u5171\u901a\u3067\u4f7f\u308f\u308c\u308bGLSL\u306e\u30b3\u30fc\u30c9\u7247\n* THREE.UniformsUtils = uniforms\u306e\u5b9a\u7fa9\u3092\u64cd\u4f5c\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\u7fa4\n* THREE.UniformsLib =   \u5171\u901a\u3067\u4f7f\u308f\u308c\u308buniforms\u5b9a\u7fa9\n* THREE.ShaderLib = \u5404\u30de\u30c6\u30ea\u30a2\u30eb\u3067\u4f7f\u7528\u3059\u308b\u30b7\u30a7\u30fc\u30c0\u30fc\u5b9a\u7fa9\n\nthreejs\u3067ShaderMaterial\u3068\u304b\u3092\u4f7f\u3046\u3068\u3001\u81ea\u5206\u3067\u76f4\u63a5GLSL\u3092\u3044\u3058\u308c\u308b\u3002\n\u305d\u306e\u305f\u3081\u306e\u30e1\u30e2\u3002\n\n##\u5165\u51fa\u529b\n###VertexShader\n* \u5165\u529b \u306a\u3057\n* \u51fa\u529b gl_Position (vec4) _ \uff12\u6b21\u5143\u5e73\u9762\u4e0a\u306e\u9802\u70b9\u5ea7\u6a19\n* \u51fa\u529b gl_PointSize (float) _ \u70b9\u306e\u30b5\u30a4\u30ba\n\n###FragmentShader\n* \u5165\u529b gl_FrontFacing (bool) \u30dd\u30ea\u30b4\u30f3\u306e\u8868\u88cf\u306e\u30d6\u30fc\u30eb\u5024\n* \u5165\u529b gl_FragCoord (vec4) \u30a6\u30a3\u30f3\u30c9\u30a6\u5ea7\u6a19=canvas\u4e0a\u306e\u5ea7\u6a19 (x,y,z, 1/w)\n* \u5165\u529b gl_PointCoord (vec2) \u30dd\u30a4\u30f3\u30c8\u30b9\u30d7\u30e9\u30a4\u30c8\u6642\u306e\uff12\u6b21\u5143\u5ea7\u6a19\n* \u51fa\u529b gl_FragColor (vec4) \u30d4\u30af\u30bb\u30eb\u306e\u63cf\u753b\u8272\n* \u51fa\u529b gl_FragData[] ([]) glDrawBuffers\u3068\u304b\u3067\u4f7f\u3046\u914d\u5217\u30c7\u30fc\u30bf\n\n##GLSL ES\u4e0a\u3067\u6271\u308f\u308c\u308b\u578b\n\n* int (\u6574\u6570)\n* ivec2,ivec3,ivec4 (int\u306e\u30d9\u30af\u30c8\u30eb)\n* bool (\u30d6\u30fc\u30eb)\n* bvec2,bvec3,bvec4 (bool\u306e\u30d9\u30af\u30c8\u30eb)\n* float\n* vec2,vec3,vec4 (float\u306e\u30d9\u30af\u30c8\u30eb)\n* mat2,mat3,mat4 (\u884c\u5217)\n* sampler2D (2\u6b21\u5143\u30c6\u30af\u30b9\u30c1\u30e3)\n* samplerCube (3\u6b21\u5143\u30c6\u30af\u30b9\u30c1\u30e3)\n\n##threejs\u306b\u3088\u3063\u3066\u65e2\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u5909\u6570\n\n| \u5909\u6570\u540d | \u8aac\u660e |\n|:-----------|:------------|\n| modelMatrix |\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5ea7\u6a19\u304b\u3089\u30ef\u30fc\u30eb\u30c9\u5ea7\u6a19\u3078\u5909\u63db\u3059\u308b|\n| viewMatrix |\u30ef\u30fc\u30eb\u30c9\u5ea7\u6a19\u304b\u3089\u8996\u70b9\u5ea7\u6a19\u3078\u5909\u63db|\n| modelViewMatrix |modelMatrix\u3068viewMatrix\u306e\u7a4d\u7b97|\n| projectionMatrix |\u30ab\u30e1\u30e9\u306e\u5404\u7a2e\u30d1\u30e9\u30e1\u30fc\u30bf\u304b\u3089\uff13\u6b21\u5143\u3092\uff12\u6b21\u5143\u306b\u5c04\u5f71\u3057\u3001\u30af\u30ea\u30c3\u30d7\u5ea7\u6a19\u7cfb\u306b\u5909\u63db\u3059\u308b\u884c\u5217 |\n| cameraPosition |\u30ab\u30e1\u30e9\u306e\u4f4d\u7f6e |\n| normalMatrix |\u9802\u70b9\u6cd5\u7dda\u30d9\u30af\u30c8\u30eb\u3092\u8996\u70b9\u5ea7\u6a19\u7cfb\u306b\u5909\u63db\u3059\u308b\u884c\u5217|\n| position |\u9802\u70b9\u5ea7\u6a19|\n| normal |\u9802\u70b9\u6cd5\u7dda\u30d9\u30af\u30c8\u30eb|\n| uv |\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u8cbc\u308b\u305f\u3081\u306eUV\u5ea7\u6a19|\n \n\u30d0\u30fc\u30c6\u30c3\u30af\u30b9\u30b7\u30a7\u30fc\u30c0\u30fc\u3067\u306f\u5168\u90e8\u4f7f\u3048\u308b\u3002\n\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u30b7\u30a7\u30fc\u30c0\u30fc\u3067\u306f,viewMatrix\u3068cameraPosition\u306e\u307f\u4f7f\u3048\u308b\u3002\n\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u30b7\u30a7\u30fc\u30c0\u30fc\u5074\u3067\u4f7f\u3046\u3068\u304d\u306f\u30d0\u30fc\u30c6\u30c3\u30af\u30b9\u30b7\u30a7\u30fc\u30c0\u5185\u3067varying\u5909\u6570\u306b\u4e00\u65e6\u3044\u308c\u305f\u308a\u3059\u308b\u3002vUv=vu; \u307f\u305f\u3044\u306a\u611f\u3058\u3067\u3002\n\n##threejs\u304b\u3089uniform/attribute\u3092\u6e21\u3059\u3068\u304d\u6307\u5b9a\u3059\u308b\u6587\u5b57\u5217(type)\n\u3088\u304f\u3064\u304b\u3044\u305d\u3046\u306a\u306e\u306f\n\n* i (\u6574\u6570)\n* f (float)\n* v2 (THREE.Vector2)\n* v3 (THREE.Vector3)\n* v4 (THREE.Vector4)\n* c (THREE.Color)\n* m4 (THREE.Matrix4)\n* t (THREE.Texture)\n\n\n```js:uniform_type.js\nvar uniformsExample = {\n\n\"uInt\" :  { type: \"i\", value: 1 },     // single integer\n\"uFloat\" : { type: \"f\", value: 3.14 }, // single float\n\n\"uVec2\" : { type: \"v2\", value: new THREE.Vector2( 0, 1 ) },       // single Vector2\n\"uVec3\" : { type: \"v3\", value: new THREE.Vector3( 0, 1, 2 ) },    // single Vector3\n\"uVec4\" : { type: \"v4\", value: new THREE.Vector4( 0, 1, 2, 3 ) }, // single Vector4\n\n\"uCol\" : { type: \"c\", value: new THREE.Color( 0xffaa00 ) }, // single Color\n\n\"uMat4\" : { type: \"m4\", value: new THREE.Matrix4() }, // single Matrix4\n\n\n\"uTex\" :     { type: \"t\", value: THREE.ImageUtils.loadTexture( \"texture.jpg\" ) }, // regular texture\n\"uTexCube\" : { type: \"t\", value: THREE.ImageUtils.loadTextureCube( [ \"px.jpg\", \"nx.jpg\", // cube texture\n                                                                     \"py.jpg\", \"ny.jpg\", \n                                                                     \"pz.jpg\", \"nz.jpg\" ] ) },\n\n\"uIntArray\"  : { type: \"iv1\", value: [ 1, 2, 3, 4, 5 ] },    // integer array (plain)\n\"uIntArray3\" : { type: \"iv\", value: [ 1, 2, 3, 4, 5, 6 ] },   // integer array (ivec3)\n\n\"uFloatArray\"  : { type: \"fv1\", value: [ 0.1, 0.2, 0.3, 0.4, 0.5 ] },    // float array (plain)\n\"uFloatArray3\" : { type: \"fv\",  value: [ 0.1, 0.2, 0.3, 0.4, 0.5, 0.6 ] }, // float array (vec3)\n\n\"uVec2Array\" : { type: \"v2v\", value: [ new THREE.Vector2( 0.1, 0.2 ), \n                                       new THREE.Vector2( 0.4, 0.5 ) ] }, // Vector2 array\n\n\"uVec3Array\" : { type: \"v3v\", value: [ new THREE.Vector3( 0.1, 0.2, 0.3 ), \n                                       new THREE.Vector3( 0.4, 0.5, 0.6 ) ] }, // Vector3 array\n\n\"uVec4Array\" : { type: \"v4v\", value: [ new THREE.Vector4( 0.1, 0.2, 0.3, 0.4 ), \n                                       new THREE.Vector4( 0.4, 0.5, 0.6, 0.7 ) ] }, // Vector4 array\n\n\"uMat4Array\" : { type: \"m4v\", value: [ new THREE.Matrix4(), new THREE.Matrix4() ] }, // Matrix4 array\n\n\"uTexArray\" : { type: \"tv\", value: [ new THREE.Texture(), new THREE.Texture() ] } // texture array (regular)\n                                                                                              // texture units start from value\n\n};\n```\n\n\u5f15\u7528\u5143: https://github.com/mrdoob/three.js/wiki/Uniforms-types\n\n\n\n\n\n##\u5ea7\u6a19\u5909\u63db\u3068\u884c\u5217\u306e\u95a2\u4fc2\u6027\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5ea7\u6a19\u7cfb\uff08\u30ed\u30fc\u30ab\u30eb\u5ea7\u6a19\u7cfb\uff09\n\u3000\u2193\n **\uff0amodelMatrix**\n\u3000\u2193\n\u30ef\u30fc\u30eb\u30c9\u5ea7\u6a19\u7cfb\n\u3000\u2193\n**\uff0aviewMatrix**\n\u3000\u2193\n\u8996\u70b9\u5ea7\u6a19\u7cfb\uff08\u30ab\u30e1\u30e9\u304b\u3089\u898b\u305f\u5ea7\u6a19\uff09\n\u3000\u2193\n**\uff0aprojectionMatrix**\n\u3000\u2193\n\u30af\u30ea\u30c3\u30d7\u5ea7\u6a19\u7cfb \uff1d xyz\u3092-1\u301c+1\u3067\u8868\u3059\u5ea7\u6a19\u7cfb\n\u3000\u2193\n\u30a6\u30a3\u30f3\u30c9\u30a6\u5ea7\u6a19\u7cfb \uff1d canvas\u4e0a\u306e\u5ea7\u6a19\u7cfb\n\n##\u57fa\u672c\u7684\u306afragmentShader/vertexShader\n\n```glsl:vertexshader\nvarying vec2 vUv;// fragmentShader\u306b\u6e21\u3059\u305f\u3081\u306evarying\u5909\u6570\nvoid main()\n{\n  // \u51e6\u7406\u3059\u308b\u9802\u70b9\u3054\u3068\u306euv(\u30c6\u30af\u30b9\u30c1\u30e3)\u5ea7\u6a19\u3092\u305d\u306e\u307e\u307efragmentShader\u306b\u6a2a\u6d41\u3057\u3059\u308b\n  vUv = uv;\n  // \u5909\u63db\uff1a\u30ed\u30fc\u30ab\u30eb\u5ea7\u6a19 \u2192 \u914d\u7f6e \u2192 \u30ab\u30e1\u30e9\u5ea7\u6a19\n  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);    \n  // \u5909\u63db\uff1a\u30ab\u30e1\u30e9\u5ea7\u6a19 \u2192 \u753b\u9762\u5ea7\u6a19\n  gl_Position = projectionMatrix * mvPosition;\n}\n\n```\n\n```glsl:fragmentShader\n//uniform \u5909\u6570\u3068\u3057\u3066\u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30c7\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u308b\nuniform sampler2D texture;\n// vertexShader\u3067\u51e6\u7406\u3055\u308c\u3066\u6e21\u3055\u308c\u308b\u30c6\u30af\u30b9\u30c1\u30e3\u5ea7\u6a19\nvarying vec2 vUv;                                             \n\nvoid main()\n{\n  // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u8272\u60c5\u5831\u3092\u305d\u306e\u307e\u307e\u30d4\u30af\u30bb\u30eb\u306b\u5857\u308b\n  gl_FragColor = texture2D(texture, vUv);\n}\n</script>\n```\n\n```js:js\nvar materialShaderSimple = new THREE.ShaderMaterial({            \n  vertexShader: vartexShaderString\n  fragmentShader: fragmentShaderString,\n  uniforms: {\n    texture: { type: 't', value: ImageUtils.loadTexture(\"**.png\")}                                   }\n});\n```\n\n\u203b\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002 http://izmiz.hateblo.jp/entry/2014/09/27/235743\n\n##GLSL ES\u7d44\u307f\u8fbc\u307f\u95a2\u6570\n\u899a\u3048\u306b\u304f\u3044\u3082\u306e\u3092\u629c\u7c8b\n\n| \u95a2\u6570\u540d | \u8aac\u660e |\n|:-----------|:------------|\n| sign(x)|\u7b26\u53f7\u5224\u5225\u3001\u8ca0:-1,\u30bc\u30ed:0,\u6b63:1|\n| fract(x)|\u5c0f\u6570\u306e\u90e8\u5206\u3060\u3051\u8fd4\u3059|\n| mod(x,y)|x/y\u306e\u3042\u307e\u308a|\n| clamp(x,y,a)| \u30af\u30e9\u30f3\u30d7\u51e6\u7406min(max(x,y),a) |\n| mix(x,y,a) | \u7dda\u5f62\u88dc\u9593 |\n| smoothstep(edge0,edge1,x) | x\u306e\u8981\u7d20\u306e\u3046\u3061\u3001edge0\u4ee5\u4e0b\u306e\u3082\u306e\u306f0.0\u3001edge1\u4ee5\u4e0a\u306e\u3082\u306e\u306f1.0\u306b\u3059\u308b\u3002x\u304cedge0\u3068edge1\u306e\u9593\u306b\u3042\u308b\u3068\u304d\u306b\u306f\u30013\u6b21\u30a8\u30eb\u30df\u30fc\u30c8\u88dc\u9593\u3092\u8fd4\u3059\u3002 |\n| step(a,x) | x<a\u306e\u3068\u304d0, x\u2267a\u306e\u3068\u304d1  |\n| sqrt(x),inverssqrt(x) | invers\u306f1/sqrt(x) | \n| normalize(x) | \u6b63\u898f\u5316 | \n| faceforward(N,I,Nref) | \u6cd5\u7dda\u30d9\u30af\u30c8\u30ebN\u3092\u6761\u4ef6\u306b\u3088\u308a\u53cd\u8ee2 | \n| reflect(I,N) | \u6cd5\u7dda\u30d9\u30af\u30c8\u30ebN\u306e\u9762\u306b\u5bfe\u3057\u3066\u5165\u5c04\u30d9\u30af\u30c8\u30ebI\u306e\u53cd\u5c04\u30d9\u30af\u30c8\u30eb\u3092\u8fd4\u3059 | \n| refract(I,N,eta) | \u5c48\u6298\u7387eta\u306e\u6cd5\u7dda\u30d9\u30af\u30c8\u30ebN\u306e\u9762\u306b\u5bfe\u3057\u3001 | \n| length(x) | \u30d9\u30af\u30c8\u30eb\u306e\u9577\u3055\uff1d\u7d76\u5bfe\u5024 | \n| distance(x,y) | x,y\u306e\u8ddd\u96e2 | \n| dot(x,y) | \u5185\u7a4d | \n| cross(x,y) | \u5916\u7a4d | \n|  texture2D(uTexture, texCoords) | uTexture\u306etexCoords\u5ea7\u6a19\u306e\u8272(vec4)\u3092\u8fd4\u3059|\n\n\u53c2\u8003\uff1aglsl\u8f9e\u5178\nhttp://ec.nikkeibp.co.jp/nsp/dl/08513/HTML5GAMES_AppC.pdf\n\n##threejs\u5185\u3067shader\u304c\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u5834\u6240\n\nhttps://github.com/mrdoob/three.js/tree/master/src/renderers/shaders\n* THREE.ShaderChunk =\t\u5171\u901a\u3067\u4f7f\u308f\u308c\u308bGLSL\u306e\u30b3\u30fc\u30c9\u7247\n* THREE.UniformsUtils =\tuniforms\u306e\u5b9a\u7fa9\u3092\u64cd\u4f5c\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\u7fa4\n* THREE.UniformsLib =\t\u5171\u901a\u3067\u4f7f\u308f\u308c\u308buniforms\u5b9a\u7fa9\n* THREE.ShaderLib = \u5404\u30de\u30c6\u30ea\u30a2\u30eb\u3067\u4f7f\u7528\u3059\u308b\u30b7\u30a7\u30fc\u30c0\u30fc\u5b9a\u7fa9\n", "tags": ["three.js"]}