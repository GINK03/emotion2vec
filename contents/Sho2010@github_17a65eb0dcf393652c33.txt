{"context": "\u4e8c\u70b9\u307b\u3069\u306f\u307e\u3063\u305f\n\npod\u8d77\u52d5\u5f8c\u306bContainerCreating\u304b\u3089\u9032\u307e\u306a\u3044\nRoot\u4ee5\u5916\u306e\u30e6\u30fc\u30b6\u30fc\u304c\u5229\u7528\u3059\u308b\u5834\u5408 permission\u304c\u306a\u3044\n\n\u4ed6\u306b\u306fGKE cluster\u4f5c\u308b\u3068\u304d\u306bdisk read/write scope\u304c\u306a\u3044\u3068\u30c0\u30e1\u304b\u3082\uff1f(\u81ea\u5206\u306f\u6700\u521d\u3063\u304b\u3089RW\u3067\u4f5c\u3063\u305f)\n\npod\u8d77\u52d5\u5f8c\u306bContainerCreating\u304b\u3089\u9032\u307e\u306a\u3044\n\u3053\u308c\u3092\u30b3\u30d4\u30da\u3057\u3066\u306f\u307e\u3063\u305f\npartition: 1\u3092\u6307\u5b9a\u3059\u308b\u3068pod status\u304cContainerCreating\u304b\u3089\u9032\u307e\u306a\u3044\u3002\n\u304d\u3063\u3061\u308a\u3068\u8abf\u3079\u305a\u306b\u304a\u307e\u3058\u306a\u3044\u7684\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u306f\u3042\u3093\u307e\u308a\u3088\u304f\u306a\u3044\u3051\u3069 \u52d5\u3044\u305f\u304b\u3089\u3088\u3057\u3068\u3059\u308b\u3002\ndeployment.yml\nvolumes:\n- name: pd-test\n  gcePersistentDisk:\n    pdName: \"pd-test\"\n    fsType: ext4\n    # partition: 1 # \u30b5\u30f3\u30d7\u30eb\u306b\u306f\u7d50\u69cb\u66f8\u304b\u308c\u3066\u308b\u3051\u3069\u3053\u308c\u304c\u3042\u308b\u3068\u6b62\u307e\u308b\u304b\u3089\u6d88\u3059\n\n\nRoot\u4ee5\u5916\u306e\u30e6\u30fc\u30b6\u30fc\u304c\u5229\u7528\u3059\u308b\u5834\u5408\n\u57fa\u672croot\u306b\u306a\u3063\u3066\u308b\u305f\u3081\u3001mount\u3055\u308c\u305f\u3042\u3068\u306edisk\u306bpermission\u304c\u306a\u3044\u3002\n\u3053\u308c\u306fpod.Spec.SecurityContext\u306blinux group id\u3092\u66f8\u304f\u3053\u3068\u306b\u3088\u3063\u3066\u89e3\u6c7a\u3059\u308b\u3002\u3000\nhttp://kubernetes.io/docs/user-guide/security-context/\nkubernetes\u95a2\u9023\u6df1\u3044\u9805\u76ee\u3067\u3082document\u304c\u7d50\u69cb\u308f\u304b\u308a\u3065\u3089\u3044\u4f4d\u7f6e\u306b\u3042\u3063\u305f\u308a\u3059\u308b\u3002\n\u63a2\u3057\u65b9\u304c\u60aa\u3044\n\u3327\ndeployment.yml\n#\u5bfe\u8c61\u306econtainer\u306e\u4e2d\u306b\u5165\u3063\u3066 `id`\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884cuser\u306egid\u3092\u8abf\u3079\u3066\u304a\u304f\u3002\nspec:\n  securityContext:                                             \n    fsGroup: 1000 # container user gid  \n  containers: \n    # do_something...\n\n\n\u6700\u5f8c\u306bGKE\u4e0a\u306bjenkins cluster\u3092\u4f5c\u3063\u305f\u6642\u306bgcePersistentDisk\u3092\u4f7f\u3063\u305f\u4f8b\u3067\u3059\u3002\nhttps://github.com/Sho2010/k8s-jenkins/blob/master/k8s/jenkins-deploy.yml\nGKE\u4e0a\u3067\u5168\u3066\u306ejenkins\u3092Container\u5316\u3059\u308b\u306e\u6975\u3081\u3066\u5feb\u9069\u3060\u304b\u3089\u3053\u306e\u8a71\u3082\u3044\u3064\u304b\u3057\u305f\u3044\n\u4e8c\u70b9\u307b\u3069\u306f\u307e\u3063\u305f\n\n1. pod\u8d77\u52d5\u5f8c\u306bContainerCreating\u304b\u3089\u9032\u307e\u306a\u3044\n1. Root\u4ee5\u5916\u306e\u30e6\u30fc\u30b6\u30fc\u304c\u5229\u7528\u3059\u308b\u5834\u5408 permission\u304c\u306a\u3044\n\n\u4ed6\u306b\u306fGKE cluster\u4f5c\u308b\u3068\u304d\u306bdisk read/write scope\u304c\u306a\u3044\u3068\u30c0\u30e1\u304b\u3082\uff1f(\u81ea\u5206\u306f\u6700\u521d\u3063\u304b\u3089RW\u3067\u4f5c\u3063\u305f)\n\n# pod\u8d77\u52d5\u5f8c\u306bContainerCreating\u304b\u3089\u9032\u307e\u306a\u3044\n\n[\u3053\u308c\u3092\u30b3\u30d4\u30da\u3057\u3066\u306f\u307e\u3063\u305f](https://github.com/GoogleCloudPlatform/continuous-deployment-on-kubernetes/blob/master/jenkins/k8s/jenkins.yaml#L54)\n`partition: 1`\u3092\u6307\u5b9a\u3059\u308b\u3068pod status\u304cContainerCreating\u304b\u3089\u9032\u307e\u306a\u3044\u3002\n\u304d\u3063\u3061\u308a\u3068\u8abf\u3079\u305a\u306b\u304a\u307e\u3058\u306a\u3044\u7684\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u306f\u3042\u3093\u307e\u308a\u3088\u304f\u306a\u3044\u3051\u3069 \u52d5\u3044\u305f\u304b\u3089\u3088\u3057\u3068\u3059\u308b\u3002\n\ndeployment.yml\n\n~~~yaml\nvolumes:\n- name: pd-test\n  gcePersistentDisk:\n    pdName: \"pd-test\"\n    fsType: ext4\n    # partition: 1 # \u30b5\u30f3\u30d7\u30eb\u306b\u306f\u7d50\u69cb\u66f8\u304b\u308c\u3066\u308b\u3051\u3069\u3053\u308c\u304c\u3042\u308b\u3068\u6b62\u307e\u308b\u304b\u3089\u6d88\u3059\n~~~\n\n# Root\u4ee5\u5916\u306e\u30e6\u30fc\u30b6\u30fc\u304c\u5229\u7528\u3059\u308b\u5834\u5408\n\n\u57fa\u672c`root`\u306b\u306a\u3063\u3066\u308b\u305f\u3081\u3001mount\u3055\u308c\u305f\u3042\u3068\u306edisk\u306bpermission\u304c\u306a\u3044\u3002\n\u3053\u308c\u306f`pod.Spec.SecurityContext`\u306blinux group id\u3092\u66f8\u304f\u3053\u3068\u306b\u3088\u3063\u3066\u89e3\u6c7a\u3059\u308b\u3002\u3000\nhttp://kubernetes.io/docs/user-guide/security-context/\n\nkubernetes\u95a2\u9023\u6df1\u3044\u9805\u76ee\u3067\u3082document\u304c\u7d50\u69cb\u308f\u304b\u308a\u3065\u3089\u3044\u4f4d\u7f6e\u306b\u3042\u3063\u305f\u308a\u3059\u308b\u3002\n\u63a2\u3057\u65b9\u304c\u60aa\u3044\n\u3327\n\ndeployment.yml\n\n~~~yaml\n#\u5bfe\u8c61\u306econtainer\u306e\u4e2d\u306b\u5165\u3063\u3066 `id`\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884cuser\u306egid\u3092\u8abf\u3079\u3066\u304a\u304f\u3002\nspec:\n  securityContext:                                             \n    fsGroup: 1000 # container user gid  \n  containers: \n    # do_something...\n~~~\n\n- - -\n\n\u6700\u5f8c\u306bGKE\u4e0a\u306bjenkins cluster\u3092\u4f5c\u3063\u305f\u6642\u306bgcePersistentDisk\u3092\u4f7f\u3063\u305f\u4f8b\u3067\u3059\u3002\nhttps://github.com/Sho2010/k8s-jenkins/blob/master/k8s/jenkins-deploy.yml\n\nGKE\u4e0a\u3067\u5168\u3066\u306ejenkins\u3092Container\u5316\u3059\u308b\u306e\u6975\u3081\u3066\u5feb\u9069\u3060\u304b\u3089\u3053\u306e\u8a71\u3082\u3044\u3064\u304b\u3057\u305f\u3044\n\n", "tags": ["kubernetes", "GoogleContainerEngine"]}