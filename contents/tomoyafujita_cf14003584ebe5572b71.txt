{"context": "package\u3092\u8aa4\u3063\u3066\u524a\u9664\u3057\u3066\u3057\u307e\u3044\u3001Window Manager\u304c\u307b\u3068\u3093\u3069\u52d5\u304b\u306a\u3044\u72b6\u614b\u306b\u306a\u3063\u3066\u7126\u3063\u305f\u306e\u3067rollback\u65b9\u6cd5\u3092\u30e1\u30e2\u3002(autoremove\u3067\u78ba\u8a8d\u305b\u305a\u306b\u5b9f\u884c\u3057\u3066\u3057\u307e\u3063\u305f\u3053\u3068\u3092\u5f8c\u6094)\n\u307e\u305a\u3001apt-get\u306e\u30ed\u30b0\u3092\u78ba\u8a8d\u3059\u308b\u3002\n>cat /var/log/apt/history.log\n\nStart-Date: 2016-07-05  22:03:54\nCommandline: aptdaemon role='role-commit-packages' sender=':1.105'\n<snip>\nStart-Date: 2016-07-25  22:06:36\nCommandline: aptdaemon role='role-commit-packages' sender=':1.101'\nUpgrade: jenkins:i386 (2.14, 2.15)\nEnd-Date: 2016-07-25  22:06:54\n\n\u4e0a\u8a18\u306f\u6b63\u5e38\u306aubuntu\u74b0\u5883\u306a\u306e\u3067\u3001\u30ed\u30b0\u306e\u5834\u6240\u3060\u3051\u304c\u91cd\u8981\u3067\u3059\u3002\n\u5b9f\u65bd\u3059\u308b\u3053\u3068\u3068\u3057\u3066\u306f\u3001\u4e0a\u8a18\u306e\u30ed\u30b0\u304b\u3089\u524a\u9664\u3057\u3066\u3057\u307e\u3063\u305fpackage\u3092\u62bd\u51fa\u3057\u3066\u3001install\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001\u30ed\u30b0\u306e\u65e5\u4ed8\u3068\u6642\u9593\u304b\u3089\u3001\u524a\u9664\u3055\u308c\u305fpackage\u306e\u30ea\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u3066intall\u3057\u307e\u3059\u3002\n> grep -A 2 'Start-Date: XXXX-XX-XX  XX:XX:XX' /var/log/apt/history.log | tail -1 >/tmp/packages.txt\n> tr ',' '\\n' < /tmp/packages.txt | sed '/automatic)/d' | awk '{ print $1}' > /tmp/final.packages.txt\n> p=\"$(</tmp/final.packages.txt)\"\n> apt-get --purge install $p\n\n\u4e0a\u8a18\u30b3\u30de\u30f3\u30c9\u3067install\u5bfe\u8c61package\u306e\u30ea\u30b9\u30c8\u4f5c\u6210\u3057\u3066\u3001apt-get install\u3057\u3066\u3044\u308b\u3002\n\u5c11\u306a\u304f\u3068\u3082\u81ea\u5206\u306e\u74b0\u5883\u306f\u3001\u4e0a\u306e\u624b\u9806\u3067\u5fa9\u65e7\u51fa\u6765\u307e\u3057\u305f\u3002\npackage\u3092\u8aa4\u3063\u3066\u524a\u9664\u3057\u3066\u3057\u307e\u3044\u3001Window Manager\u304c\u307b\u3068\u3093\u3069\u52d5\u304b\u306a\u3044\u72b6\u614b\u306b\u306a\u3063\u3066\u7126\u3063\u305f\u306e\u3067rollback\u65b9\u6cd5\u3092\u30e1\u30e2\u3002(autoremove\u3067\u78ba\u8a8d\u305b\u305a\u306b\u5b9f\u884c\u3057\u3066\u3057\u307e\u3063\u305f\u3053\u3068\u3092\u5f8c\u6094)\n\n\u307e\u305a\u3001apt-get\u306e\u30ed\u30b0\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n```bash\n>cat /var/log/apt/history.log\n\nStart-Date: 2016-07-05  22:03:54\nCommandline: aptdaemon role='role-commit-packages' sender=':1.105'\n<snip>\nStart-Date: 2016-07-25  22:06:36\nCommandline: aptdaemon role='role-commit-packages' sender=':1.101'\nUpgrade: jenkins:i386 (2.14, 2.15)\nEnd-Date: 2016-07-25  22:06:54\n```\n\n\u4e0a\u8a18\u306f\u6b63\u5e38\u306aubuntu\u74b0\u5883\u306a\u306e\u3067\u3001\u30ed\u30b0\u306e\u5834\u6240\u3060\u3051\u304c\u91cd\u8981\u3067\u3059\u3002\n\n\u5b9f\u65bd\u3059\u308b\u3053\u3068\u3068\u3057\u3066\u306f\u3001\u4e0a\u8a18\u306e\u30ed\u30b0\u304b\u3089\u524a\u9664\u3057\u3066\u3057\u307e\u3063\u305fpackage\u3092\u62bd\u51fa\u3057\u3066\u3001install\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001\u30ed\u30b0\u306e\u65e5\u4ed8\u3068\u6642\u9593\u304b\u3089\u3001\u524a\u9664\u3055\u308c\u305fpackage\u306e\u30ea\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u3066intall\u3057\u307e\u3059\u3002\n\n```bash\n> grep -A 2 'Start-Date: XXXX-XX-XX  XX:XX:XX' /var/log/apt/history.log | tail -1 >/tmp/packages.txt\n> tr ',' '\\n' < /tmp/packages.txt | sed '/automatic)/d' | awk '{ print $1}' > /tmp/final.packages.txt\n> p=\"$(</tmp/final.packages.txt)\"\n> apt-get --purge install $p\n```\n\n\u4e0a\u8a18\u30b3\u30de\u30f3\u30c9\u3067install\u5bfe\u8c61package\u306e\u30ea\u30b9\u30c8\u4f5c\u6210\u3057\u3066\u3001apt-get install\u3057\u3066\u3044\u308b\u3002\n\n\u5c11\u306a\u304f\u3068\u3082\u81ea\u5206\u306e\u74b0\u5883\u306f\u3001\u4e0a\u306e\u624b\u9806\u3067\u5fa9\u65e7\u51fa\u6765\u307e\u3057\u305f\u3002\n", "tags": ["Ubuntu", "Linux", "apt-get"]}