{"context": "\n\nRust 1.0\n\u9577\u304b\u3063\u305f\n\u521d\u306e\u30e1\u30b8\u30e3\u30fc\u30ea\u30ea\u30fc\u30b9\uff06\u5b89\u5b9a\u7248\n\n\u30108/2/2016 \u8ffd\u8a18\u3011\n\u591a\u5206cargo-lipo\u4f7f\u3046\u306e\u304c\u4e00\u756a\u65e9\u3044\u3068\u601d\u3044\u307e\u3059\n\niOS\u7528\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u66f8\u304f\u305e\n\u30d0\u30a4\u30ca\u30ea\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068ARM\u5411\u3051\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u81ea\u524d\u3067\u30d3\u30eb\u30c9\u3057\u307e\u3057\u3087\u3046\n\nRust \u306e\u30d3\u30eb\u30c9\n$ git clone https://github.com/rust-lang/rust.git\n$ cd rust\n$ mkdir ios && cd ios\n$ ../configure --target=x86_64-apple-darwin,x86_64-apple-ios,i386-apple-ios,armv7-apple-ios,armv7s-apple-ios,aarch64-apple-ios --prefix=/usr/local\n$ make -j8 && make install\n\n\u30fb\u305f\u3076\u3093\u4eca\uff082015/5/16\uff09\u30d3\u30eb\u30c9\u3055\u308c\u308b\u306e\u306f1.1.0-dev\u3067\u3059\n\nRust \u306e\u30b3\u30fc\u30c9\n\ngreet.rs\n\n#[no_mangle]\npub extern fn greeting(name: *const i8) {\n\n    use std::ffi::CStr;\n    use std::str;\n\n    unsafe {\n\n        println!(\"hello, {}!\", str::from_utf8(CStr::from_ptr(name).to_bytes()).unwrap());\n\n    }\n\n}\n\n\n\n\u9759\u7684\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u3057\u3066\u30d3\u30eb\u30c9\n# 64bit\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\n$ mkdir x86_64_ios && rustc greet.rs -o x86_64_ios/libgreet.a --crate-type staticlib --target x86_64-apple-ios\n\n# 32bit \u30b7\u30df\u30e5\u30ec\u30fc\u30bf\n$ mkdir i386_ios && rustc greet.rs -o i386_ios/libgreet.a --crate-type staticlib --target i386-apple-ios\n\n# armv7\n$ mkdir armv7_ios && rustc greet.rs -o armv7_ios/libgreet.a --crate-type staticlib --target armv7-apple-ios\n\n# armv7s\n$ mkdir armv7s_ios && rustc greet.rs -o armv7s_ios/libgreet.a --crate-type staticlib --target armv7s-apple-ios\n\n# arm64\n$ mkdir arm64_ios && rustc greet.rs -o arm64_ios/libgreet.a --crate-type staticlib --target aarch64-apple-ios\n\n# universal\u5316\n$ lipo -create x86_64_ios/libgreet.a i386_ios/libgreet.a armv7_ios/libgreet.a armv7s_ios/libgreet.a arm64_ios/libgreet.a -output ./libgreet.a\n\n\n\u30fb\u30c0\u30b5\u3044\u306e\u3067\u9069\u5f53\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u5316\u3059\u308b\u304b\u3001makefile\u5316\u3057\u3066\u304f\u3060\u3055\u3044\n\nC\u306e\u30d8\u30c3\u30c0\n\ngreet.h\n\n#ifndef libgreet_greet_h\n#define libgreet_greet_h\n\nextern void greeting(const char* name);\n\n#endif\n\n\n\nSwift\u304b\u3089\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3046\n\u30fb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306blibgreet.a\u3092\u30b3\u30d4\u30fc&\u30ea\u30f3\u30af\u8a2d\u5b9a\n\u30fb\u30d6\u30ea\u30c3\u30b8\u30f3\u30b0\u30d8\u30c3\u30c0\u306bgreet.h\u3092\u8ffd\u52a0\n\nViewController.swift\nimport UIKit\n\nclass ViewController: UIViewController {\n\n    override func viewDidLoad() {\n\n        super.viewDidLoad() \n\n        greeting(\"moriturus\") // swift\u306fC\u306e\u95a2\u6570\u3092\u76f4\u63a5\u4f7f\u3048\u308b\n\n\n    }\n\n}\n\n\n# Rust 1.0\n\n\u9577\u304b\u3063\u305f\n\u521d\u306e\u30e1\u30b8\u30e3\u30fc\u30ea\u30ea\u30fc\u30b9\uff06\u5b89\u5b9a\u7248\n\n## \u30108/2/2016 \u8ffd\u8a18\u3011\n\n\u591a\u5206[cargo-lipo](https://github.com/TimNN/cargo-lipo)\u4f7f\u3046\u306e\u304c\u4e00\u756a\u65e9\u3044\u3068\u601d\u3044\u307e\u3059\n\n## iOS\u7528\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u66f8\u304f\u305e\n\n\u30d0\u30a4\u30ca\u30ea\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068ARM\u5411\u3051\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u81ea\u524d\u3067\u30d3\u30eb\u30c9\u3057\u307e\u3057\u3087\u3046\n\n### Rust \u306e\u30d3\u30eb\u30c9\n\n```bash\n$ git clone https://github.com/rust-lang/rust.git\n$ cd rust\n$ mkdir ios && cd ios\n$ ../configure --target=x86_64-apple-darwin,x86_64-apple-ios,i386-apple-ios,armv7-apple-ios,armv7s-apple-ios,aarch64-apple-ios --prefix=/usr/local\n$ make -j8 && make install\n```\n\n\u30fb\u305f\u3076\u3093\u4eca\uff082015/5/16\uff09\u30d3\u30eb\u30c9\u3055\u308c\u308b\u306e\u306f```1.1.0-dev```\u3067\u3059\n\n### Rust \u306e\u30b3\u30fc\u30c9\n\n```rust:greet.rs\n\n#[no_mangle]\npub extern fn greeting(name: *const i8) {\n\n    use std::ffi::CStr;\n    use std::str;\n\n    unsafe {\n\n        println!(\"hello, {}!\", str::from_utf8(CStr::from_ptr(name).to_bytes()).unwrap());\n\n    }\n\n}\n```\n\n#### \u9759\u7684\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u3057\u3066\u30d3\u30eb\u30c9\n\n```bash\n# 64bit\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\n$ mkdir x86_64_ios && rustc greet.rs -o x86_64_ios/libgreet.a --crate-type staticlib --target x86_64-apple-ios\n\n# 32bit \u30b7\u30df\u30e5\u30ec\u30fc\u30bf\n$ mkdir i386_ios && rustc greet.rs -o i386_ios/libgreet.a --crate-type staticlib --target i386-apple-ios\n\n# armv7\n$ mkdir armv7_ios && rustc greet.rs -o armv7_ios/libgreet.a --crate-type staticlib --target armv7-apple-ios\n\n# armv7s\n$ mkdir armv7s_ios && rustc greet.rs -o armv7s_ios/libgreet.a --crate-type staticlib --target armv7s-apple-ios\n\n# arm64\n$ mkdir arm64_ios && rustc greet.rs -o arm64_ios/libgreet.a --crate-type staticlib --target aarch64-apple-ios\n\n# universal\u5316\n$ lipo -create x86_64_ios/libgreet.a i386_ios/libgreet.a armv7_ios/libgreet.a armv7s_ios/libgreet.a arm64_ios/libgreet.a -output ./libgreet.a\n\n```\n\n\u30fb\u30c0\u30b5\u3044\u306e\u3067\u9069\u5f53\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u5316\u3059\u308b\u304b\u3001makefile\u5316\u3057\u3066\u304f\u3060\u3055\u3044\n\n### C\u306e\u30d8\u30c3\u30c0\n\n```C:greet.h\n\n#ifndef libgreet_greet_h\n#define libgreet_greet_h\n\nextern void greeting(const char* name);\n\n#endif\n```\n\n### Swift\u304b\u3089\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3046\n\n\u30fb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b```libgreet.a```\u3092\u30b3\u30d4\u30fc&\u30ea\u30f3\u30af\u8a2d\u5b9a\n\u30fb\u30d6\u30ea\u30c3\u30b8\u30f3\u30b0\u30d8\u30c3\u30c0\u306b```greet.h```\u3092\u8ffd\u52a0\n\n```swift:ViewController.swift\nimport UIKit\n\nclass ViewController: UIViewController {\n\n    override func viewDidLoad() {\n\n        super.viewDidLoad() \n\n        greeting(\"moriturus\") // swift\u306fC\u306e\u95a2\u6570\u3092\u76f4\u63a5\u4f7f\u3048\u308b\n\n        \n    }\n\n}\n", "tags": ["rust", "iOS", "C"]}