{"context": " More than 1 year has passed since last update.\u3042\u304f\u307e\u3067\u500b\u4eba\u7684\u306b\u7c21\u6613\u691c\u67fb\u306b\u3066\u8a66\u3057\u305f\u3082\u306e\u306a\u306e\u3067\u53c2\u8003\u5024\u3068\u3057\u3066\u8003\u3048\u3066\u4e0b\u3055\u3044\u3002\n\u5168\u3066\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u3064\u3044\u3066\u8abf\u67fb\u3067\u304d\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u8a08\u6e2c\u3057\u3066\u3044\u308b\u4e2d\u3067\u7591\u554f\u306b\u601d\u3048\u308b\u6570\u5b57\u304c\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u3002\u968f\u6642\u66f4\u65b0\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u5148\u4eba\u306e\u77e5\u6075\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30bf\u30a4\u30d7\u306b\u3088\u3063\u3066 SSD \u306e\u6027\u80fd\u304c\u5909\u308f\u308b\u306e\u304b\u8abf\u3079\u3066\u307f\u305f\nfio\u306b\u3088\u308bEBS\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u6027\u80fd\u6e2c\u5b9a(RHEL6.5\u7de8)\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6027\u80fd\u5225\u30b0\u30eb\u30fc\u30d7\n\u52dd\u624b\u306b\u5206\u985e\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\n\n\u7a2e\u5225\n\u5e2f\u57df\u76ee\u5b89\nPPS\u76ee\u5b89(TCP)\n\n\n\n\nLow(low)\n64Mbps\n4Kpps\n\n\nLow(med)\n128Mbps\n8Kpps\n\n\nLow(high)\n256Mbps\n16Kpps\n\n\nModerate(low)\n512Mbps\n32Kpps\n\n\nModerate(high)\n768Mbps\n64Kpps\n\n\nHigh(low)\n1Gbps\n128Kpps\n\n\nHigh(med)\n2Gbps\n256Kpps\n\n\nHigh(high)\n4.25Gbps\n512Kpps\n\n\n10G\n9.5Gbps\n1Mpps\n\n\n\n\n\u8a08\u6e2c\u65b9\u6cd5\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5e2f\u57df\n\niperf\u306b\u3088\u308b\u8a08\u6e2c\niperf -c %LOCAL_IP_ADDRESS% -t 60\n\n\nVPC\u5185\u540c\u4e00subnet\u3067\u306e\u8a08\u6e2c\u3092\u5b9f\u65bd\u3057\u307e\u3057\u305f\u3002(ap-northeast-1)\nPlacement Group\u304c\u5229\u7528\u3067\u304d\u308b\u5834\u5408\u306f\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\nIOPS\n\nbenchmark.sh\n#!/bin/sh\nINSTANCE_TYPE=$(curl -s http://169.254.169.254/2014-11-05/meta-data/instance-type)\nyum install fio -y\numount /media/ephemeral0\ntime dd if=/dev/zero of=/dev/xvdb bs=1M\nsudo mkfs.ext4 /dev/xvdb\nmount /media/ephemeral0\nfor i in `seq 0 3`;do \n  time fio -name=random-write \\\n      --output=/home/ec2-user/${INSTANCE_TYPE}-${i}.txt \\\n      -ioengine=libaio \\\n      -rw=randrw \\\n      -rwmixread=0 \\\n      -bs=16k \\\n      -numjobs=16 \\\n      -iodepth=16 \\\n      -size=100m \\\n      -direct=1 \\\n      -directory=/media/ephemeral0 \\\n      -group_reporting\n  cat /home/ec2-user/${INSTANCE_TYPE}-${i}.txt\ndone\npoweroff\n\n\n\nHVM w/ SRIOV\nRegion: us-west-2c(Oregon)\nclient: c4.8xlarge\nSRIOV: yes\n\nm4\n\n\n\nInstance Type\nBandwidth\nType\n\n\n\n\nm4.large\n467 Mbits/sec\nModerate(low)\n\n\nm4.xlarge\n791 Mbits/sec\nModerate(high)\n\n\nm4.2xlarge\n1.01 Gbits/sec\nHigh(low)\n\n\nm4.4xlarge\n2.02 Gbits/sec\nHigh(med)\n\n\nm4.10xlarge\n9.60 Gbits/sec\n10G\n\n\n\n\nc4\n\n\n\nInstance Type\nBandwidth\nType\n\n\n\n\nc4.large\n516 Mbits/sec\nModerate(low)\n\n\nc4.xlarge\n792 Mbits/sec\nModerate(high)\n\n\nc4.2xlarge\n1.01 Gbits/sec\nHigh(low)\n\n\nc4.4xlarge\n4.27 Gbits/sec\nHigh(high)\n\n\nc4.8xlarge\n9.60 Gbits/sec\n10G\n\n\n\n\nc3\n\n\n\nInstance Type\nBandwidth\nType\nIOPS\n\n\n\n\nc3.large\n512 Mbits/sec\nModerate(low)\n10727\n\n\nc3.xlarge\n702 Mbits/sec\nModerate(high)\n12893\n\n\nc3.2xlarge\n1.00 Gbits/sec\nHigh(low)\n12679\n\n\nc3.4xlarge\n2.01 Gbits/sec\nHigh(med)\n16007\n\n\nc3.8xlarge\n9.00 Gbits/sec\n10G\n6910\n\n\n\n\nr3\n\n\n\nInstance Type\nBandwidth\nType\n\n\n\n\nr3.large\n499 Mbits/sec\nModerate(low)\n\n\nr3.xlarge\n702 Mbits/sec\nModerate(high)\n\n\nr3.2xlarge\n1.01 Gbits/sec\nHigh(low)\n\n\nr3.4xlarge\n2.01 Gbits/sec\nHigh(med)\n\n\nr3.8xlarge\n9.23 Gbits/sec\n10G\n\n\n\n\ni2\n\n\n\nInstance Type\nBandwidth\nType\nIOPS\n\n\n\n\ni2.xlarge\n702 Mbits/sec\nModerate(high)\n22289\n\n\ni2.2xlarge\n1.01 Gbits/sec\nHigh(low)\n22456\n\n\ni2.4xlarge\n2.02 Gbits/sec\nHigh(med)\n21936\n\n\ni2.8xlarge\n8.60 Gbits/sec\n10G\n21508\n\n\n\n\nd2\n\n\n\nInstance Type\nBandwidth\nType\n\n\n\n\nd2.xlarge\n756 Mbits/sec\nModerate(high)\n\n\nd2.2xlarge\n1.01 Gbits/sec\nHigh(low)\n\n\nd2.4xlarge\n2.02 Gbits/sec\nHigh(med)\n\n\nd2.8xlarge\n\n\n\n\n\n\nHVM w/o SRIOV\nRegion: us-west-2c(Oregon)\nclient: c4.8xlarge\nSRIOV: N/A\n\nt2\n\n\n\nInstance Type\nBandwidth\nType\n\n\n\n\nt2.micro\n62.8 Mbits/sec\nLow(low)\n\n\nt2.small\n127 Mbits/sec\nLow(med)\n\n\nt2.medium\n254 Mbits/sec\nLow(high)\n\n\nt2.large\n737 Mbits/sec\nModerate(high)\n\n\n\n\nm3\n\n\n\nInstance Type\nBandwidth\nType\nIOPS\n\n\n\n\nm3.medium\n303 Mbits/sec\nLow(high)\n3531\n\n\nm3.large\n700 Mbits/sec\nModerate(high)\n14056\n\n\nm3.xlarge\n1.01 Gbits/sec\nHigh(low)\n12096\n\n\nm3.2xlarge\n1.01 Gbits/sec\nHigh(low)\n15092\n\n\n\n\n\u3042\u304f\u307e\u3067\u500b\u4eba\u7684\u306b\u7c21\u6613\u691c\u67fb\u306b\u3066\u8a66\u3057\u305f\u3082\u306e\u306a\u306e\u3067\u53c2\u8003\u5024\u3068\u3057\u3066\u8003\u3048\u3066\u4e0b\u3055\u3044\u3002\n\u5168\u3066\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u3064\u3044\u3066\u8abf\u67fb\u3067\u304d\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u8a08\u6e2c\u3057\u3066\u3044\u308b\u4e2d\u3067\u7591\u554f\u306b\u601d\u3048\u308b\u6570\u5b57\u304c\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u3002\u968f\u6642\u66f4\u65b0\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n# \u5148\u4eba\u306e\u77e5\u6075\n\n[\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30bf\u30a4\u30d7\u306b\u3088\u3063\u3066 SSD \u306e\u6027\u80fd\u304c\u5909\u308f\u308b\u306e\u304b\u8abf\u3079\u3066\u307f\u305f](http://blog.manabusakai.com/2015/06/instance-store-benchmark/)\n[fio\u306b\u3088\u308bEBS\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u6027\u80fd\u6e2c\u5b9a(RHEL6.5\u7de8)](http://qiita.com/ryuzee/items/4355f9a59d59f876bf31)\n\n# \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6027\u80fd\u5225\u30b0\u30eb\u30fc\u30d7\n\n\u52dd\u624b\u306b\u5206\u985e\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n|\u7a2e\u5225|\u5e2f\u57df\u76ee\u5b89|PPS\u76ee\u5b89(TCP)|\n|---|---|---|\n|Low(low)|64Mbps|4Kpps|\n|Low(med)|128Mbps|8Kpps|\n|Low(high)|256Mbps|16Kpps|\n|Moderate(low)|512Mbps|32Kpps|\n|Moderate(high)|768Mbps|64Kpps|\n|High(low)|1Gbps|128Kpps|\n|High(med)|2Gbps|256Kpps|\n|High(high)|4.25Gbps|512Kpps|\n|10G|9.5Gbps|1Mpps|\n\n# \u8a08\u6e2c\u65b9\u6cd5\n## \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5e2f\u57df\n```shell-session:iperf\u306b\u3088\u308b\u8a08\u6e2c\niperf -c %LOCAL_IP_ADDRESS% -t 60\n```\nVPC\u5185\u540c\u4e00subnet\u3067\u306e\u8a08\u6e2c\u3092\u5b9f\u65bd\u3057\u307e\u3057\u305f\u3002(ap-northeast-1)\nPlacement Group\u304c\u5229\u7528\u3067\u304d\u308b\u5834\u5408\u306f\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n## IOPS\n\n```shell-session:benchmark.sh\n#!/bin/sh\nINSTANCE_TYPE=$(curl -s http://169.254.169.254/2014-11-05/meta-data/instance-type)\nyum install fio -y\numount /media/ephemeral0\ntime dd if=/dev/zero of=/dev/xvdb bs=1M\nsudo mkfs.ext4 /dev/xvdb\nmount /media/ephemeral0\nfor i in `seq 0 3`;do \n  time fio -name=random-write \\\n      --output=/home/ec2-user/${INSTANCE_TYPE}-${i}.txt \\\n      -ioengine=libaio \\\n      -rw=randrw \\\n      -rwmixread=0 \\\n      -bs=16k \\\n      -numjobs=16 \\\n      -iodepth=16 \\\n      -size=100m \\\n      -direct=1 \\\n      -directory=/media/ephemeral0 \\\n      -group_reporting\n  cat /home/ec2-user/${INSTANCE_TYPE}-${i}.txt\ndone\npoweroff\n```\n\n# HVM w/ SRIOV\n\nRegion: us-west-2c(Oregon)\nclient: c4.8xlarge\nSRIOV: yes\n\n## m4\n\n|Instance Type|Bandwidth|Type|\n|---|---|---|\n|m4.large|467 Mbits/sec|Moderate(low)|\n|m4.xlarge|791 Mbits/sec|Moderate(high)|\n|m4.2xlarge|1.01 Gbits/sec|High(low)|\n|m4.4xlarge|2.02 Gbits/sec|High(med)|\n|m4.10xlarge|9.60 Gbits/sec|10G|\n\n## c4\n\n|Instance Type|Bandwidth|Type|\n|---|---|---|\n|c4.large|516 Mbits/sec|Moderate(low)|\n|c4.xlarge|792 Mbits/sec|Moderate(high)|\n|c4.2xlarge|1.01 Gbits/sec|High(low)|\n|c4.4xlarge|4.27 Gbits/sec|High(high)|\n|c4.8xlarge|9.60 Gbits/sec|10G|\n\n## c3\n\n|Instance Type|Bandwidth|Type|IOPS|\n|---|---|---|---|\n|c3.large|512 Mbits/sec|Moderate(low)|10727|\n|c3.xlarge|702 Mbits/sec|Moderate(high)|12893|\n|c3.2xlarge|1.00 Gbits/sec|High(low)|12679|\n|c3.4xlarge|2.01 Gbits/sec|High(med)|16007|\n|c3.8xlarge|9.00 Gbits/sec|10G|6910|\n\n## r3\n\n|Instance Type|Bandwidth|Type|\n|---|---|---|\n|r3.large|499 Mbits/sec|Moderate(low)|\n|r3.xlarge|702 Mbits/sec|Moderate(high)|\n|r3.2xlarge|1.01 Gbits/sec|High(low)|\n|r3.4xlarge|2.01 Gbits/sec|High(med)|\n|r3.8xlarge|9.23 Gbits/sec|10G|\n\n## i2\n\n|Instance Type|Bandwidth|Type|IOPS|\n|---|---|---|---|\n|i2.xlarge|702 Mbits/sec|Moderate(high)|22289|\n|i2.2xlarge|1.01 Gbits/sec|High(low)|22456|\n|i2.4xlarge|2.02 Gbits/sec|High(med)|21936|\n|i2.8xlarge|8.60 Gbits/sec|10G|21508|\n\n## d2\n\n|Instance Type|Bandwidth|Type|\n|---|---|---|\n|d2.xlarge|756 Mbits/sec|Moderate(high)|\n|d2.2xlarge|1.01 Gbits/sec|High(low)|\n|d2.4xlarge|2.02 Gbits/sec|High(med)|\n|d2.8xlarge|||\n\n\n# HVM w/o SRIOV\n\nRegion: us-west-2c(Oregon)\nclient: c4.8xlarge\nSRIOV: N/A\n\n## t2\n\n|Instance Type|Bandwidth|Type|\n|---|---|---|\n|t2.micro|62.8 Mbits/sec|Low(low)|\n|t2.small|127 Mbits/sec|Low(med)|\n|t2.medium|254 Mbits/sec|Low(high)|\n|t2.large|737 Mbits/sec|Moderate(high)|\n\n## m3\n\n|Instance Type|Bandwidth|Type|IOPS|\n|---|---|---|---|\n|m3.medium|303 Mbits/sec|Low(high)|3531|\n|m3.large|700 Mbits/sec|Moderate(high)|14056|\n|m3.xlarge|1.01 Gbits/sec|High(low)|12096|\n|m3.2xlarge|1.01 Gbits/sec|High(low)|15092|\n", "tags": ["AWS", "EC2", "Network"]}