{"tags": ["reactjs", "JavaScript", "flux"], "context": " More than 1 year has passed since last update.\n\n\u76ee\u7684\nWeb+DB Press Vol.87 \u306e Flux \u306e\u8a18\u4e8b \u304c\u7d20\u6674\u3089\u3057\u304b\u3063\u305f\u3051\u3069\u3001\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u304c fluxxor\u3060\u3063\u305f\u306e\u3067\u3001 ES6 \u306e class \u306a\u3069\u4f7f\u3063\u3066\u66f8\u3051\u308b alt \u3067\u66f8\u304d\u63db\u3048\u3066\u307f\u305f\u3002\n\uff08fluxxor \u306f ES6 \u672a\u5bfe\u5fdc\uff09\n\u3061\u306a\u307f\u306b\u96d1\u8a8c\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f \u3053\u3061\u3089\u306e\u300cEmerging Web Technology\u7814\u7a76\u5ba4\u300d\n\n\u30d5\u30a1\u30a4\u30eb\u69cb\u6210\n.\n\u251c\u2500\u2500 dest\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 app.js\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 actions\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 counter_actions.js\n    \u251c\u2500\u2500 alt.js\n    \u251c\u2500\u2500 app.jsx\n    \u251c\u2500\u2500 components\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 counter.jsx\n    \u2514\u2500\u2500 stores\n        \u2514\u2500\u2500 counter_store.js\n\n\npackage\nreactify \u3067\u306f\u306a\u304f babelify \u3092\u4f7f\u3046\n\npacage.json\n{\n  \"devDependencies\": {\n    \"alt\": \"^0.16.10\",\n    \"babelify\": \"^6.1.2\",\n    \"browserify\": \"^10.2.4\",\n    \"react\": \"^0.13.3\",\n    \"watchify\": \"^3.2.3\"\n  },\n  \"scripts\": {\n    \"watch\": \"watchify -t babelify src/app.jsx -o dest/app.js -v\"\n  }\n}\n\n\n\n$ npm run watch\n\n\ncode\n\napp.jsx\nimport React from 'react';\n\nimport CounterAppView from './components/counter.jsx';\n\n\nReact.render(\n    <CounterAppView />,\n    document.getElementById('app-container')\n);\n\n\n\nalt.js\nimport Alt from 'alt';\nvar alt = new Alt();\n\nexport default alt;\n\n\n\nindex.html\n<!doctype html>\n<html lang=\"ja\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Flux</title>\n    </head>\n    <body>\n        <div id=\"app-container\"></div>\n\n        <script src=\"dest/app.js\"></script>\n    </body>\n</html>\n\n\n\nsrc/actions/counter_actions.js\nimport alt from '../alt';\n\nclass CounterActions {\n    constructor() {\n        this.generateActions(\n            'plusCounter',\n            'minusCounter'\n        );\n    }\n}\n\nexport default alt.createActions(CounterActions);\n\n\nconstructor \u306b generateActions \u66f8\u304f\u3084\u308a\u65b9\u3068 this.dispatch \u3092\u4f7f\u3046\u3084\u308a\u65b9\u306a\u3069\u304c\u3042\u308b\u307f\u305f\u3044\u3002\u30b3\u30fc\u30c9\u898b\u3066\u304a\u3044\u305f\u65b9\u304c\u3044\u3044\u304b\u3082\u3002\n\nsrc/components/counter.jsx\nimport React from 'react';\nvar AltContainer = require('alt/AltContainer');\n\nimport CounterActions from '../actions/counter_actions';\nimport CounterStore from '../stores/counter_store';\n\n\nclass CounterView extends React.Component {\n    render() {\n        return (\n            <div>\n                <span>count: {this.props.counter}</span>\n                <div>\n                    <button onClick={CounterActions.plusCounter}>+1</button>\n                    <button onClick={CounterActions.minusCounter}>-1</button>\n                </div>\n            </div>\n        );\n    }\n}\n\n\nclass CounterAppView extends React.Component {\n    render() {\n        return (\n            <div>\n                <AltContainer store={CounterStore}>\n                    <CounterView />\n                </AltContainer>\n            </div>\n        );\n    }\n}\n\n export default CounterAppView;\n\n\n\nsrc/stores/counter_store.js\nimport alt from '../alt';\nimport CounterActions from '../actions/counter_actions';\n\nclass CounterStore {\n    constructor() {\n        this.counter = 0;\n\n        this.bindListeners({\n            handlePlusCounter: CounterActions.PLUS_COUNTER,\n            handleMinusCounter: CounterActions.MINUS_COUNTER\n        });\n    }\n\n    handlePlusCounter() {\n        this.counter += 1;\n    }\n    handleMinusCounter() {\n        this.counter -= 1;\n    }\n}\n\nexport default alt.createStore(CounterStore, 'CounterStore');\n\n\nCounterActions.PLUS_COUNTER \u306e PLUS_COUNTER \u3092 actions \u306b\u66f8\u3044\u305f\u30ad\u30e3\u30e1\u30eb\u30b1\u30fc\u30b9\u306b\u3057\u3066\u3082\u52d5\u3044\u305f\u3002\u5c0f\u6587\u5b57\u306e\u30b9\u30cd\u30fc\u30af\u30b1\u30fc\u30b9\u306b\u3057\u305f\u3089\u52d5\u304b\u306a\u304b\u3063\u305f\u3002\u3069\u3046\u306a\u3063\u3066\u308b\u306e\u304b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u898b\u305f\u65b9\u304c\u3044\u3044\u304b\u3082\u3002\n\n\u8868\u793a\n$ python -m SimpleHTTPServer 8000\n\n\nhttp://localhost:8000\n\n\n\n\u611f\u60f3\n\n\u30b5\u30f3\u30d7\u30eb\u306a\u306e\u3067 JS \u30921\u30d5\u30a1\u30a4\u30eb\u3067\u307e\u3068\u3081\u3088\u3046\u304b\u3068\u601d\u3063\u305f\u3051\u3069\u3001 alt.createStore \u3068\u304b\u3042\u308b\u306e\u3067alt \u306f\u57fa\u672c\u7684\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u3051\u3066\u66f8\u304f\u306e\u304c\u3088\u3055\u305d\u3046\u3002\u3069\u306e\u307f\u3061\u5b9f\u969b\u30a2\u30d7\u30ea\u4f5c\u308b\u6642\u306f\u305d\u3046\u306a\u308b\u3068\u601d\u3046\u3051\u3069\u3002\n\n\n\u53c2\u8003\n\nhttp://gihyo.jp/magazine/wdpress/archive/2015/vol87\nhttp://acdlite.github.io/flummox\n\n\n## \u76ee\u7684\n[Web+DB Press Vol.87 \u306e Flux \u306e\u8a18\u4e8b](http://gihyo.jp/magazine/wdpress/archive/2015/vol87) \u304c\u7d20\u6674\u3089\u3057\u304b\u3063\u305f\u3051\u3069\u3001\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u304c [fluxxor](http://fluxxor.com/)\u3060\u3063\u305f\u306e\u3067\u3001 ES6 \u306e class \u306a\u3069\u4f7f\u3063\u3066\u66f8\u3051\u308b [alt](https://github.com/goatslacker/alt) \u3067\u66f8\u304d\u63db\u3048\u3066\u307f\u305f\u3002\n\uff08fluxxor \u306f ES6 \u672a\u5bfe\u5fdc\uff09\n\n\u3061\u306a\u307f\u306b\u96d1\u8a8c\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f [\u3053\u3061\u3089\u306e\u300cEmerging Web Technology\u7814\u7a76\u5ba4\u300d](http://gihyo.jp/magazine/wdpress/archive/2015/vol87/support)\n\n## \u30d5\u30a1\u30a4\u30eb\u69cb\u6210\n\n```\n.\n\u251c\u2500\u2500 dest\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 app.js\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 actions\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 counter_actions.js\n    \u251c\u2500\u2500 alt.js\n    \u251c\u2500\u2500 app.jsx\n    \u251c\u2500\u2500 components\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 counter.jsx\n    \u2514\u2500\u2500 stores\n        \u2514\u2500\u2500 counter_store.js\n```\n\n## package\n\nreactify \u3067\u306f\u306a\u304f babelify \u3092\u4f7f\u3046\n\n```pacage.json\n{\n  \"devDependencies\": {\n    \"alt\": \"^0.16.10\",\n    \"babelify\": \"^6.1.2\",\n    \"browserify\": \"^10.2.4\",\n    \"react\": \"^0.13.3\",\n    \"watchify\": \"^3.2.3\"\n  },\n  \"scripts\": {\n    \"watch\": \"watchify -t babelify src/app.jsx -o dest/app.js -v\"\n  }\n}\n\n```\n\n```\n$ npm run watch\n```\n\n## code\n\n```app.jsx\nimport React from 'react';\n\nimport CounterAppView from './components/counter.jsx';\n\n\nReact.render(\n    <CounterAppView />,\n    document.getElementById('app-container')\n);\n```\n\n```alt.js\nimport Alt from 'alt';\nvar alt = new Alt();\n\nexport default alt;\n```\n\n```index.html\n<!doctype html>\n<html lang=\"ja\">\n    <head>\n        <meta charset=\"utf-8\">\n        <title>Flux</title>\n    </head>\n    <body>\n        <div id=\"app-container\"></div>\n\n        <script src=\"dest/app.js\"></script>\n    </body>\n</html>\n```\n\n```src/actions/counter_actions.js\nimport alt from '../alt';\n\nclass CounterActions {\n    constructor() {\n        this.generateActions(\n            'plusCounter',\n            'minusCounter'\n        );\n    }\n}\n\nexport default alt.createActions(CounterActions);\n```\n`constructor` \u306b `generateActions` \u66f8\u304f\u3084\u308a\u65b9\u3068 `this.dispatch` \u3092\u4f7f\u3046\u3084\u308a\u65b9\u306a\u3069\u304c\u3042\u308b\u307f\u305f\u3044\u3002\u30b3\u30fc\u30c9\u898b\u3066\u304a\u3044\u305f\u65b9\u304c\u3044\u3044\u304b\u3082\u3002\n\n```src/components/counter.jsx\nimport React from 'react';\nvar AltContainer = require('alt/AltContainer');\n\nimport CounterActions from '../actions/counter_actions';\nimport CounterStore from '../stores/counter_store';\n\n\nclass CounterView extends React.Component {\n    render() {\n        return (\n            <div>\n                <span>count: {this.props.counter}</span>\n                <div>\n                    <button onClick={CounterActions.plusCounter}>+1</button>\n                    <button onClick={CounterActions.minusCounter}>-1</button>\n                </div>\n            </div>\n        );\n    }\n}\n\n\nclass CounterAppView extends React.Component {\n    render() {\n        return (\n            <div>\n                <AltContainer store={CounterStore}>\n                    <CounterView />\n                </AltContainer>\n            </div>\n        );\n    }\n}\n\n export default CounterAppView;\n```\n\n```src/stores/counter_store.js\nimport alt from '../alt';\nimport CounterActions from '../actions/counter_actions';\n\nclass CounterStore {\n    constructor() {\n        this.counter = 0;\n\n        this.bindListeners({\n            handlePlusCounter: CounterActions.PLUS_COUNTER,\n            handleMinusCounter: CounterActions.MINUS_COUNTER\n        });\n    }\n\n    handlePlusCounter() {\n        this.counter += 1;\n    }\n    handleMinusCounter() {\n        this.counter -= 1;\n    }\n}\n\nexport default alt.createStore(CounterStore, 'CounterStore');\n```\n\n`CounterActions.PLUS_COUNTER` \u306e `PLUS_COUNTER` \u3092 actions \u306b\u66f8\u3044\u305f\u30ad\u30e3\u30e1\u30eb\u30b1\u30fc\u30b9\u306b\u3057\u3066\u3082\u52d5\u3044\u305f\u3002\u5c0f\u6587\u5b57\u306e\u30b9\u30cd\u30fc\u30af\u30b1\u30fc\u30b9\u306b\u3057\u305f\u3089\u52d5\u304b\u306a\u304b\u3063\u305f\u3002\u3069\u3046\u306a\u3063\u3066\u308b\u306e\u304b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u898b\u305f\u65b9\u304c\u3044\u3044\u304b\u3082\u3002\n\n## \u8868\u793a\n\n```\n$ python -m SimpleHTTPServer 8000\n```\n\n- http://localhost:8000\n\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-07-03 0.20.12.png](https://qiita-image-store.s3.amazonaws.com/0/41656/3fb3784f-2d3e-965e-eff8-33d1bc7e8d04.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-07-03 0.20.12.png\")\n\n\n## \u611f\u60f3\n\n- \u30b5\u30f3\u30d7\u30eb\u306a\u306e\u3067 JS \u30921\u30d5\u30a1\u30a4\u30eb\u3067\u307e\u3068\u3081\u3088\u3046\u304b\u3068\u601d\u3063\u305f\u3051\u3069\u3001 `alt.createStore` \u3068\u304b\u3042\u308b\u306e\u3067alt \u306f\u57fa\u672c\u7684\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u3051\u3066\u66f8\u304f\u306e\u304c\u3088\u3055\u305d\u3046\u3002\u3069\u306e\u307f\u3061\u5b9f\u969b\u30a2\u30d7\u30ea\u4f5c\u308b\u6642\u306f\u305d\u3046\u306a\u308b\u3068\u601d\u3046\u3051\u3069\u3002\n\n\n## \u53c2\u8003\n\n- http://gihyo.jp/magazine/wdpress/archive/2015/vol87\n- http://acdlite.github.io/flummox\n"}