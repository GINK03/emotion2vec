{"context": " More than 1 year has passed since last update.\n\nNova Migration Type\nhttp://docs.openstack.org/admin-guide-cloud/compute-configuring-migrations.html\n\nThe migration types are:\n\nNon-live migration (sometimes referred to simply as \u2018migration\u2019)\nThe instance is shut down for a period of time to be moved to another hypervisor. In this case, the instance recognizes that it was rebooted.\n\nLive migration (or \u2018true live migration\u2019)\nAlmost no instance downtime. Useful when the instances must be kept running during the migration.\nThe different types of live migration are:\n\n2-1. Shared storage-based live migration. \n   Both hypervisors have access to shared storage.\n2-2. Block live migration \n   No shared storage is required. Incompatible with read-only devices such as CD-ROMs and Configuration Drive (config_drive).\n2-3. Volume-backed live migration \n   Instances are backed by volumes rather than ephemeral disk, no shared storage is required, and migration is supported (currently only available for libvirt-based hypervisors).\n\n\n\n\n\nWhat's this?\n1. Non-live migration \nNova instance (shutoff \u72b6\u614b) \u3092\u5225\u306e Hypervisor (Compute node) \u3078\u79fb\u52d5\n[Case]\n\nCinder volume \u3092\u63a5\u7d9a\u3057\u3066\u3044\u306a\u3044\u5834\u5408\nCinder volume \u3092\u63a5\u7d9a\u3057\u3066\u3044\u308b\u5834\u5408\n\n[\u6761\u4ef6]\n\nNova instance \u306f shutoff \u72b6\u614b\nShared Storage \u7121\u3057\n\u79fb\u52d5\u3059\u308b\u969b\u306b Target Hypervisor (Compute node) \u306f\u6307\u5b9a\u51fa\u6765\u306a\u3044 (\u79fb\u52d5\u5148\u306f Nova scheduler \u3057\u3060\u3044)\n\n\n[Case1] Migrate Nova instance (w/o Cinder volume)\n\nInitial state\n\nHypervisor (Compute node)\n# nova hypervisor-list\n+----+-----------------------+\n| ID | Hypervisor hostname   |\n+----+-----------------------+\n| 6  | node-27               |\n| 9  | node-28               |\n| 12 | node-29               |\n+----+-----------------------+\n\n\nAZ\n# nova availability-zone-list | egrep -A 10 \"^\\| nova\"\n| nova                     | available                              |\n| |- node-27               |                                        |\n| | |- nova-compute        | enabled :-) 2015-02-13T02:24:11.000000 |\n| |- node-28               |                                        |\n| | |- nova-compute        | enabled :-) 2015-02-13T02:24:09.000000 |\n| nova2                    | available                              |\n| |- node-29               |                                        |\n| | |- nova-compute        | enabled :-) 2015-02-13T02:24:10.000000 |\n+--------------------------+----------------------------------------+\n\n\nNova instance is on node-28\n# nova list --field name,status,,OS-EXT-STS:vm_state,OS-EXT-AZ:availability_zone,OS-EXT-SRV-ATTR:hypervisor_hostname\n+--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n| ID                                   | Name       | Status  |  | OS-EXT-STS: Vm State | OS-EXT-AZ: Availability Zone | OS-EXT-SRV-ATTR: Hypervisor Hostname |\n+--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n| 6235d670-a5f0-4658-aef5-1b9549613c38 | admin_vm01 | SHUTOFF |  | stopped              | nova                         | node-28                              |\n+--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n\n\nMigrate Nova instance\n\nMigration\n# nova migrate --poll admin_vm01\nServer migrating... 100% complete\nFinished\n\n\nCheck the migration result\nNova instance is moved from node-28 to node-27\n# nova list --field name,status,,OS-EXT-STS:vm_state,OS-EXT-AZ:availability_zone,OS-EXT-SRV-ATTR:hypervisor_hostname\n+--------------------------------------+------------+---------------+--+----------------------+------------------------------+--------------------------------------+\n| ID                                   | Name       | Status        |  | OS-EXT-STS: Vm State | OS-EXT-AZ: Availability Zone | OS-EXT-SRV-ATTR: Hypervisor Hostname |\n+--------------------------------------+------------+---------------+--+----------------------+------------------------------+--------------------------------------+\n| 6235d670-a5f0-4658-aef5-1b9549613c38 | admin_vm01 | VERIFY_RESIZE |  | resized              | nova                         | node-27                              |\n+--------------------------------------+------------+---------------+--+----------------------+------------------------------+--------------------------------------+\n\n\nConfirm previous size\n\nResize confirm\n# nova resize-confirm admin_vm01\n\n\nCheck\nThe status is changed from VERIFY_RESIZE to SHUTOFF\n# nova list --field name,status,,OS-EXT-STS:vm_state,OS-EXT-AZ:availability_zone,OS-EXT-SRV-ATTR:hypervisor_hostname\n+--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n| ID                                   | Name       | Status  |  | OS-EXT-STS: Vm State | OS-EXT-AZ: Availability Zone | OS-EXT-SRV-ATTR: Hypervisor Hostname |\n+--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n| 6235d670-a5f0-4658-aef5-1b9549613c38 | admin_vm01 | SHUTOFF |  | stopped              | nova                         | node-27                              |\n+--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n\n\nBoot Nova instance on new hypervisor (Compute node)\n\nBoot\n# nova start admin_vm01\n\n\nCheck\n# nova list --field name,status,,OS-EXT-STS:vm_state,OS-EXT-AZ:availability_zone,OS-EXT-SRV-ATTR:hypervisor_hostname\n+--------------------------------------+------------+--------+--+----------------------+------------------------------+--------------------------------------+\n| ID                                   | Name       | Status |  | OS-EXT-STS: Vm State | OS-EXT-AZ: Availability Zone | OS-EXT-SRV-ATTR: Hypervisor Hostname |\n+--------------------------------------+------------+--------+--+----------------------+------------------------------+--------------------------------------+\n| 34eb51cd-0585-4098-8b01-97f9c0ab8ea9 | admin_vm01 | ACTIVE |  | active               | nova                         | node-27                              |\n+--------------------------------------+------------+--------+--+----------------------+------------------------------+--------------------------------------+\n\n\n[Case2] Migrate Nova instance (w/ Cinder volume)\n\nInitial State\n\nHypervisor (Compute node)\n# nova hypervisor-list\n+----+-----------------------+\n| ID | Hypervisor hostname   |\n+----+-----------------------+\n| 6  | node-27               |\n| 9  | node-28               |\n| 12 | node-29               |\n+----+-----------------------+\n\n\nAZ\n# nova availability-zone-list | egrep -A 10 \"^\\| nova\"\n| nova                     | available                              |\n| |- node-27               |                                        |\n| | |- nova-compute        | enabled :-) 2015-02-13T02:24:11.000000 |\n| |- node-28               |                                        |\n| | |- nova-compute        | enabled :-) 2015-02-13T02:24:09.000000 |\n| nova2                    | available                              |\n| |- node-29               |                                        |\n| | |- nova-compute        | enabled :-) 2015-02-13T02:24:10.000000 |\n+--------------------------+----------------------------------------+\n\n\nNova instance is on node-27\n# nova list --field name,status,,OS-EXT-STS:vm_state,OS-EXT-AZ:availability_zone,OS-EXT-SRV-ATTR:hypervisor_hostname\n+--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n| ID                                   | Name       | Status  |  | OS-EXT-STS: Vm State | OS-EXT-AZ: Availability Zone | OS-EXT-SRV-ATTR: Hypervisor Hostname |\n+--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n| 6235d670-a5f0-4658-aef5-1b9549613c38 | admin_vm01 | SHUTOFF |  | stopped              | nova                         | node-27                              |\n+--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n\n\nWith Cinder volume\n# cinder list\n+--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n|                  ID                  |   Status  | Display Name | Size | Volume Type | Bootable | Attached to |\n+--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n| 0fd7299f-2862-493c-a795-fa7788985960 | available | admin_vol01  |  1   |     None    |  false   |             |\n+--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n\n# nova show admin_vm01 | egrep \"Property|volumes_attached\"\n| Property                             | Value                                                    |\n| os-extended-volumes:volumes_attached | [{\"id\": \"0fd7299f-2862-493c-a795-fa7788985960\"}]         |\n\n\nMigrate Nova instance\n\nMigration\n# nova migrate --poll admin_vm01\nServer migrating... 100% complete\nFinished\n\n\nCheck the migration result\nNova instance is moved from node-27 to node-28\n# nova list --field name,status,,OS-EXT-STS:vm_state,OS-EXT-AZ:availability_zone,OS-EXT-SRV-ATTR:hypervisor_hostname\n+--------------------------------------+------------+---------------+--+----------------------+------------------------------+--------------------------------------+\n| ID                                   | Name       | Status        |  | OS-EXT-STS: Vm State | OS-EXT-AZ: Availability Zone | OS-EXT-SRV-ATTR: Hypervisor Hostname |\n+--------------------------------------+------------+---------------+--+----------------------+------------------------------+--------------------------------------+\n| 6235d670-a5f0-4658-aef5-1b9549613c38 | admin_vm01 | VERIFY_RESIZE |  | resized              | nova                         | node-28                              |\n+--------------------------------------+------------+---------------+--+----------------------+------------------------------+--------------------------------------+\n\n\nConfirm previous size\n\nResize confirm\n# nova resize-confirm admin_vm01\n\n\nCheck\nThe status is changed from VERIFY_RESIZE to SHUTOFF\n# nova list --field name,status,,OS-EXT-STS:vm_state,OS-EXT-AZ:availability_zone,OS-EXT-SRV-ATTR:hypervisor_hostname\n+--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n| ID                                   | Name       | Status  |  | OS-EXT-STS: Vm State | OS-EXT-AZ: Availability Zone | OS-EXT-SRV-ATTR: Hypervisor Hostname |\n+--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n| 6235d670-a5f0-4658-aef5-1b9549613c38 | admin_vm01 | SHUTOFF |  | stopped              | nova                         | node-28                              |\n+--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n\n\nBoot Nova instance on new hypervisor (Compute node)\n\nBoot\n# nova start admin_vm01\n\n\nCheck\n\nNova\n\n    # nova list --field name,status,,OS-EXT-STS:vm_state,OS-EXT-AZ:availability_zone,OS-EXT-SRV-ATTR:hypervisor_hostname\n    +--------------------------------------+------------+--------+--+----------------------+------------------------------+--------------------------------------+\n    | ID                                   | Name       | Status |  | OS-EXT-STS: Vm State | OS-EXT-AZ: Availability Zone | OS-EXT-SRV-ATTR: Hypervisor Hostname |\n    +--------------------------------------+------------+--------+--+----------------------+------------------------------+--------------------------------------+\n    | 6235d670-a5f0-4658-aef5-1b9549613c38 | admin_vm01 | ACTIVE |  | active               | nova                         | node-28                              |\n    +--------------------------------------+------------+--------+--+----------------------+------------------------------+--------------------------------------+\n\n    # nova show admin_vm01 | egrep \"Property|volumes_attached\"\n    | Property                             | Value                                                    |\n    | os-extended-volumes:volumes_attached | [{\"id\": \"0fd7299f-2862-493c-a795-fa7788985960\"}]         |\n\n\nCinder\n\n    # cinder list\n    +--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n    |                  ID                  |   Status  | Display Name | Size | Volume Type | Bootable | Attached to |\n    +--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n    | 0fd7299f-2862-493c-a795-fa7788985960 | available | admin_vol01  |  1   |     None    |  false   |             |\n    +--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n\n\nInstance\n\n    # ssh cirros@{INSTANCE} lsblk\n    NAME   MAJ:MIN RM    SIZE RO TYPE MOUNTPOINT\n    vda    253:0    0      1G  0 disk\n    `-vda1 253:1    0 1011.9M  0 part /\n    vdb    253:16   0      1G  0 disk\n\n\nEnvironment\n\nOpenstack : Juno\nCeph : Firefly\n\n\nReference\nNova Migration (non live migration) to Different Hypervisor\nNova Migration (non live migration) to Different Hypervisor between AZ\nNova Migration (true live migration) to Different Hypervisor\nNova Migration (true live migration) to Different Hypervisor between AZ\nNova Migration (Manually) between AZ\nNova Migration (Manually) between Region\nNova Migration (true live migration) to Different Hypervisor - Volume-backend live migration (instance)\nNova Migration (true live migration) to Different Hypervisor - Volume-backend live migration (instance) between AZ\n## Nova Migration Type\n\nhttp://docs.openstack.org/admin-guide-cloud/compute-configuring-migrations.html\n\n> **The migration types are:**\n>\n> 1. **Non-live migration** (sometimes referred to simply as \u2018migration\u2019)\n> The instance is shut down for a period of time to be moved to another hypervisor. In this case, the instance recognizes that it was rebooted.\n>\n> 2. **Live migration** (or \u2018true live migration\u2019)\n> Almost no instance downtime. Useful when the instances must be kept running during the migration.\n> The different types of live migration are:\n>     - 2-1. **Shared storage-based live migration.** <br>\n>            Both hypervisors have access to shared storage.\n>     - 2-2. **Block live migration** <br>\n>            No shared storage is required. Incompatible with read-only devices such as CD-ROMs and Configuration Drive (config_drive).\n>     - 2-3. **Volume-backed live migration** <br>\n>            Instances are backed by volumes rather than ephemeral disk, no shared storage is required, and migration is supported (currently only available for libvirt-based hypervisors).\n\n## What's this?\n\n**1. Non-live migration** \n\nNova instance (shutoff \u72b6\u614b) \u3092\u5225\u306e Hypervisor (Compute node) \u3078\u79fb\u52d5\n\n[Case]\n\n1. Cinder volume \u3092\u63a5\u7d9a\u3057\u3066\u3044\u306a\u3044\u5834\u5408\n2. Cinder volume \u3092\u63a5\u7d9a\u3057\u3066\u3044\u308b\u5834\u5408\n\n[\u6761\u4ef6]\n\n* Nova instance \u306f shutoff \u72b6\u614b\n* Shared Storage \u7121\u3057\n* \u79fb\u52d5\u3059\u308b\u969b\u306b Target Hypervisor (Compute node) \u306f\u6307\u5b9a\u51fa\u6765\u306a\u3044 (\u79fb\u52d5\u5148\u306f Nova scheduler \u3057\u3060\u3044)\n\n## [Case1] Migrate Nova instance (w/o Cinder volume)\n\n### Initial state\n\n#### Hypervisor (Compute node)\n\n    # nova hypervisor-list\n    +----+-----------------------+\n    | ID | Hypervisor hostname   |\n    +----+-----------------------+\n    | 6  | node-27               |\n    | 9  | node-28               |\n    | 12 | node-29               |\n    +----+-----------------------+\n\n#### AZ\n\n    # nova availability-zone-list | egrep -A 10 \"^\\| nova\"\n    | nova                     | available                              |\n    | |- node-27               |                                        |\n    | | |- nova-compute        | enabled :-) 2015-02-13T02:24:11.000000 |\n    | |- node-28               |                                        |\n    | | |- nova-compute        | enabled :-) 2015-02-13T02:24:09.000000 |\n    | nova2                    | available                              |\n    | |- node-29               |                                        |\n    | | |- nova-compute        | enabled :-) 2015-02-13T02:24:10.000000 |\n    +--------------------------+----------------------------------------+\n\n#### Nova instance is on node-28\n\n    # nova list --field name,status,,OS-EXT-STS:vm_state,OS-EXT-AZ:availability_zone,OS-EXT-SRV-ATTR:hypervisor_hostname\n    +--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n    | ID                                   | Name       | Status  |  | OS-EXT-STS: Vm State | OS-EXT-AZ: Availability Zone | OS-EXT-SRV-ATTR: Hypervisor Hostname |\n    +--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n    | 6235d670-a5f0-4658-aef5-1b9549613c38 | admin_vm01 | SHUTOFF |  | stopped              | nova                         | node-28                              |\n    +--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n\n\n\n### Migrate Nova instance\n\n#### Migration\n\n    # nova migrate --poll admin_vm01\n    Server migrating... 100% complete\n    Finished\n\n#### Check the migration result\n\nNova instance is moved from node-28 to node-27\n\n    # nova list --field name,status,,OS-EXT-STS:vm_state,OS-EXT-AZ:availability_zone,OS-EXT-SRV-ATTR:hypervisor_hostname\n    +--------------------------------------+------------+---------------+--+----------------------+------------------------------+--------------------------------------+\n    | ID                                   | Name       | Status        |  | OS-EXT-STS: Vm State | OS-EXT-AZ: Availability Zone | OS-EXT-SRV-ATTR: Hypervisor Hostname |\n    +--------------------------------------+------------+---------------+--+----------------------+------------------------------+--------------------------------------+\n    | 6235d670-a5f0-4658-aef5-1b9549613c38 | admin_vm01 | VERIFY_RESIZE |  | resized              | nova                         | node-27                              |\n    +--------------------------------------+------------+---------------+--+----------------------+------------------------------+--------------------------------------+\n\n### Confirm previous size\n\n#### Resize confirm\n\n    # nova resize-confirm admin_vm01\n\n#### Check\n\nThe status is changed from VERIFY_RESIZE to SHUTOFF\n\n    # nova list --field name,status,,OS-EXT-STS:vm_state,OS-EXT-AZ:availability_zone,OS-EXT-SRV-ATTR:hypervisor_hostname\n    +--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n    | ID                                   | Name       | Status  |  | OS-EXT-STS: Vm State | OS-EXT-AZ: Availability Zone | OS-EXT-SRV-ATTR: Hypervisor Hostname |\n    +--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n    | 6235d670-a5f0-4658-aef5-1b9549613c38 | admin_vm01 | SHUTOFF |  | stopped              | nova                         | node-27                              |\n    +--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n\n\n### Boot Nova instance on new hypervisor (Compute node)\n\n#### Boot\n\n    # nova start admin_vm01\n\n#### Check\n\n    # nova list --field name,status,,OS-EXT-STS:vm_state,OS-EXT-AZ:availability_zone,OS-EXT-SRV-ATTR:hypervisor_hostname\n    +--------------------------------------+------------+--------+--+----------------------+------------------------------+--------------------------------------+\n    | ID                                   | Name       | Status |  | OS-EXT-STS: Vm State | OS-EXT-AZ: Availability Zone | OS-EXT-SRV-ATTR: Hypervisor Hostname |\n    +--------------------------------------+------------+--------+--+----------------------+------------------------------+--------------------------------------+\n    | 34eb51cd-0585-4098-8b01-97f9c0ab8ea9 | admin_vm01 | ACTIVE |  | active               | nova                         | node-27                              |\n    +--------------------------------------+------------+--------+--+----------------------+------------------------------+--------------------------------------+\n\n\n\n\n\n## [Case2] Migrate Nova instance (w/ Cinder volume)\n\n### Initial State\n\n#### Hypervisor (Compute node)\n\n    # nova hypervisor-list\n    +----+-----------------------+\n    | ID | Hypervisor hostname   |\n    +----+-----------------------+\n    | 6  | node-27               |\n    | 9  | node-28               |\n    | 12 | node-29               |\n    +----+-----------------------+\n\n#### AZ\n\n    # nova availability-zone-list | egrep -A 10 \"^\\| nova\"\n    | nova                     | available                              |\n    | |- node-27               |                                        |\n    | | |- nova-compute        | enabled :-) 2015-02-13T02:24:11.000000 |\n    | |- node-28               |                                        |\n    | | |- nova-compute        | enabled :-) 2015-02-13T02:24:09.000000 |\n    | nova2                    | available                              |\n    | |- node-29               |                                        |\n    | | |- nova-compute        | enabled :-) 2015-02-13T02:24:10.000000 |\n    +--------------------------+----------------------------------------+\n\n#### Nova instance is on node-27\n\n    # nova list --field name,status,,OS-EXT-STS:vm_state,OS-EXT-AZ:availability_zone,OS-EXT-SRV-ATTR:hypervisor_hostname\n    +--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n    | ID                                   | Name       | Status  |  | OS-EXT-STS: Vm State | OS-EXT-AZ: Availability Zone | OS-EXT-SRV-ATTR: Hypervisor Hostname |\n    +--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n    | 6235d670-a5f0-4658-aef5-1b9549613c38 | admin_vm01 | SHUTOFF |  | stopped              | nova                         | node-27                              |\n    +--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n\n#### With Cinder volume\n\n    # cinder list\n    +--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n    |                  ID                  |   Status  | Display Name | Size | Volume Type | Bootable | Attached to |\n    +--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n    | 0fd7299f-2862-493c-a795-fa7788985960 | available | admin_vol01  |  1   |     None    |  false   |             |\n    +--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n\n    # nova show admin_vm01 | egrep \"Property|volumes_attached\"\n    | Property                             | Value                                                    |\n    | os-extended-volumes:volumes_attached | [{\"id\": \"0fd7299f-2862-493c-a795-fa7788985960\"}]         |\n\n\n\n### Migrate Nova instance\n\n#### Migration\n\n    # nova migrate --poll admin_vm01\n    Server migrating... 100% complete\n    Finished\n\n#### Check the migration result\n\nNova instance is moved from node-27 to node-28\n\n    # nova list --field name,status,,OS-EXT-STS:vm_state,OS-EXT-AZ:availability_zone,OS-EXT-SRV-ATTR:hypervisor_hostname\n    +--------------------------------------+------------+---------------+--+----------------------+------------------------------+--------------------------------------+\n    | ID                                   | Name       | Status        |  | OS-EXT-STS: Vm State | OS-EXT-AZ: Availability Zone | OS-EXT-SRV-ATTR: Hypervisor Hostname |\n    +--------------------------------------+------------+---------------+--+----------------------+------------------------------+--------------------------------------+\n    | 6235d670-a5f0-4658-aef5-1b9549613c38 | admin_vm01 | VERIFY_RESIZE |  | resized              | nova                         | node-28                              |\n    +--------------------------------------+------------+---------------+--+----------------------+------------------------------+--------------------------------------+\n\n\n### Confirm previous size\n\n#### Resize confirm\n\n    # nova resize-confirm admin_vm01\n\n#### Check\n\nThe status is changed from VERIFY_RESIZE to SHUTOFF\n\n    # nova list --field name,status,,OS-EXT-STS:vm_state,OS-EXT-AZ:availability_zone,OS-EXT-SRV-ATTR:hypervisor_hostname\n    +--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n    | ID                                   | Name       | Status  |  | OS-EXT-STS: Vm State | OS-EXT-AZ: Availability Zone | OS-EXT-SRV-ATTR: Hypervisor Hostname |\n    +--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n    | 6235d670-a5f0-4658-aef5-1b9549613c38 | admin_vm01 | SHUTOFF |  | stopped              | nova                         | node-28                              |\n    +--------------------------------------+------------+---------+--+----------------------+------------------------------+--------------------------------------+\n\n### Boot Nova instance on new hypervisor (Compute node)\n\n#### Boot\n\n    # nova start admin_vm01\n\n#### Check\n\n* Nova\n\n````\n    # nova list --field name,status,,OS-EXT-STS:vm_state,OS-EXT-AZ:availability_zone,OS-EXT-SRV-ATTR:hypervisor_hostname\n    +--------------------------------------+------------+--------+--+----------------------+------------------------------+--------------------------------------+\n    | ID                                   | Name       | Status |  | OS-EXT-STS: Vm State | OS-EXT-AZ: Availability Zone | OS-EXT-SRV-ATTR: Hypervisor Hostname |\n    +--------------------------------------+------------+--------+--+----------------------+------------------------------+--------------------------------------+\n    | 6235d670-a5f0-4658-aef5-1b9549613c38 | admin_vm01 | ACTIVE |  | active               | nova                         | node-28                              |\n    +--------------------------------------+------------+--------+--+----------------------+------------------------------+--------------------------------------+\n\n    # nova show admin_vm01 | egrep \"Property|volumes_attached\"\n    | Property                             | Value                                                    |\n    | os-extended-volumes:volumes_attached | [{\"id\": \"0fd7299f-2862-493c-a795-fa7788985960\"}]         |\n````\n\n* Cinder\n\n````\n    # cinder list\n    +--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n    |                  ID                  |   Status  | Display Name | Size | Volume Type | Bootable | Attached to |\n    +--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n    | 0fd7299f-2862-493c-a795-fa7788985960 | available | admin_vol01  |  1   |     None    |  false   |             |\n    +--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n````\n\n* Instance\n\n````\n    # ssh cirros@{INSTANCE} lsblk\n    NAME   MAJ:MIN RM    SIZE RO TYPE MOUNTPOINT\n    vda    253:0    0      1G  0 disk\n    `-vda1 253:1    0 1011.9M  0 part /\n    vdb    253:16   0      1G  0 disk\n````\n\n## Environment\n\n* Openstack : Juno\n* Ceph : Firefly\n\n## Reference\n\n[Nova Migration (non live migration) to Different Hypervisor][link-01]\n[Nova Migration (non live migration) to Different Hypervisor between AZ][link-02]\n[Nova Migration (true live migration) to Different Hypervisor][link-03]\n[Nova Migration (true live migration) to Different Hypervisor between AZ][link-04]\n[Nova Migration (Manually) between AZ][link-05]\n[Nova Migration (Manually) between Region][link-06]\n[Nova Migration (true live migration) to Different Hypervisor - Volume-backend live migration (instance)][link-07]\n[Nova Migration (true live migration) to Different Hypervisor - Volume-backend live migration (instance) between AZ][link-08]\n\n[link-01]:http://qiita.com/idzzy/items/a3032dce3110f959e11b\n[link-02]:http://qiita.com/idzzy/items/3d67b3cedd42d39a8e2a\n[link-03]:http://qiita.com/idzzy/items/a03b19e0c0289a63e491\n[link-04]:http://qiita.com/idzzy/items/ed45aaa3cc6ecc144f90\n[link-05]:http://qiita.com/idzzy/items/98967887a0d3771a7795\n[link-06]:http://qiita.com/idzzy/items/01b32f52e7cf0e4c5f55\n[link-07]:http://qiita.com/idzzy/items/515776f1461bb5c96eea\n[link-08]:http://qiita.com/idzzy/items/5c54443c0d36f0a14e72\n", "tags": ["openstack", "nova"]}