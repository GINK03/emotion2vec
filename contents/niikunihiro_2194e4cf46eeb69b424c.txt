{"context": "\u300c\u30b5\u30f3\u30af\u30b9\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3059\u308b\u3068\u304b\u306e\u51e6\u7406\u306f\u5373\u6642\u3058\u3083\u306a\u304f\u3066\u3082\u3044\u3044\u304b\u3089\u3001\u30b5\u30a4\u30c8\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306f\u3068\u306b\u304b\u304f\u901f\u304f\u300d\u3068\u3044\u3046\u96f0\u56f2\u6c17\u306b\u306a\u3063\u305f\u6642\u306fLaravel/Lumen\u306e\u30ad\u30e5\u30fc\u3092\u4f7f\u3046\u6a5f\u4f1a\u304c\u6765\u305f\u3068\u3044\u3046\u3053\u3068\u3058\u3083\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u3061\u3087\u3063\u3068\u3084\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u524d\u63d0\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306fLumen5.1\u3067\u3059\uff08Laravel5.1~5.3\u3067\u3082\u78ba\u8a8d\u6e08\u3067\u3059\uff09\n\u30ad\u30e5\u30fc\u30c9\u30e9\u30a4\u30d0\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c9\u30e9\u30a4\u30d0\u3092\u4f7f\u3044\u307e\u3059\u3002\n\u8a2d\u5b9a\u306f\u3053\u306e\u8a18\u4e8b\u306e\u4e0b\u306e\u65b9\u306b\u3042\u308b\u300c\u88dc\u8db3\u300d\u306e\u901a\u308a\u3067\u3059\u3002\n\n\nLaravel/Lumen\u306e\u30ad\u30e5\u30fc\u306b\u5bfe\u3059\u308b\u81ea\u5206\u306e\u4e2d\u306e\u7406\u89e3\n\u30b8\u30e7\u30d6\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092jobs\u30c6\u30fc\u30d6\u30eb\u306b\u767b\u9332\u3059\u308b\u3068\u3001Laravel/Lumen\u304c\u30b8\u30e7\u30d6\u3092\u30ad\u30e5\u30fc\u3068\u3057\u3066\u5b9f\u884c\u3057\u3066\u3044\u3063\u3066\u304f\u308c\u308b\u3002\n\n\u3084\u308b\u4e8b\n\njobs\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3059\u308b\n\u30b8\u30e7\u30d6\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3059\u308b\n\u30ad\u30e5\u30fc\u30ea\u30b9\u30ca\u30fc\u3092\u5b9f\u884c\u3059\u308b\n\n\n1.jobs\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3059\u308b\n\u3053\u308c\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3042\u308b\u901a\u308a\u3001\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3057\u3066\u3001\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\nphp artisan queue:table\nphp artisan migrate\n\n\n2.\u30b8\u30e7\u30d6\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3059\u308b\n\u3053\u308c\u3082\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3042\u308b\u901a\u308a\u3067\u3059\u304c\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u4f7f\u3046\u5834\u5408\u306f\u5fc5\u305a\u6307\u5b9a\u3057\u3068\u304b\u306a\u3044\u3068\u3001\u30ad\u30e5\u30fc\u306e\u5b9f\u884c\u6642\u306b\u4f8b\u5916\u3092\u6295\u3052\u3088\u308a\u307e\u3059\u3002\n\napp/Jobs/SendEmail.php\n<?php\n\nnamespace App\\Jobs;\n\nuse Illuminate\\Contracts\\Bus\\SelfHandling;\nuse Illuminate\\Contracts\\Mail\\Mailer;\nuse Illuminate\\Contracts\\Queue\\ShouldQueue;\n\nclass SendEmail extends Job implements SelfHandling, ShouldQueue {\n\n    /** @var string view name */\n    protected $view;\n    /** @var array \u30d3\u30e5\u30fc\u306b\u5272\u308a\u5f53\u3066\u308b\u30c7\u30fc\u30bf */\n    protected $data;\n    /** @var array \u30e1\u30fc\u30eb\u306e\u9001\u4fe1\u5148\u7b49\u306e\u5c5e\u6027 */\n    protected $mail;\n\n    public function __construct($view, $data, $mail)\n    {\n        $this->view = $view;\n        $this->data = $data;\n        $this->mail = $mail;\n    }\n\n    /**\n     * @param Mailer $mailer\n     */\n    public function handle(Mailer $mailer)\n    {\n        $mail = $this->mail;\n        $mailer->send($this->view, $this->data, function ($message) use ($mail)\n        {\n            $message->subject($mail['subject'])\n                    ->from($mail['from'], $mail['f_name'])\n                    ->to($mail['to'], $mail['to_name']);\n        });\n    }\n\n}\n\n\nLaravel5.3\u3067\u306f\u30af\u30e9\u30b9\u306e\u7d99\u627f\u306a\u3069\u304c\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\napp/Jobs/SendEmail.php\n<?php\n\nnamespace App\\Jobs;\n\nuse Illuminate\\Bus\\Queueable;\nuse Illuminate\\Queue\\SerializesModels;\nuse Illuminate\\Queue\\InteractsWithQueue;\nuse Illuminate\\Contracts\\Mail\\Mailer;\nuse Illuminate\\Contracts\\Queue\\ShouldQueue;\n\nclass SendEmail implements ShouldQueue {\n\n    use InteractsWithQueue, Queueable, SerializesModels;\n\n    /** @var string view name */\n    protected $view;\n    /** @var array \u30d3\u30e5\u30fc\u306b\u5272\u308a\u5f53\u3066\u308b\u30c7\u30fc\u30bf */\n    protected $data;\n    /** @var array \u30e1\u30fc\u30eb\u306e\u9001\u4fe1\u5148\u7b49\u306e\u5c5e\u6027 */\n    protected $mail;\n\n    public function __construct($view, $data, $mail)\n    {\n        $this->view = $view;\n        $this->data = $data;\n        $this->mail = $mail;\n    }\n\n    /**\n     * @param Mailer $mailer\n     */\n    public function handle(Mailer $mailer)\n    {\n        $mail = $this->mail;\n        $mailer->send($this->view, $this->data, function ($message) use ($mail)\n        {\n            $message->subject($mail['subject'])\n                    ->from($mail['from'], $mail['f_name'])\n                    ->to($mail['to'], $mail['to_name']);\n        });\n    }\n\n}\n\n\n\n3.\u30ad\u30e5\u30fc\u30ea\u30b9\u30ca\u30fc\u3092\u5b9f\u884c\u3059\u308b\n\u3053\u308c\u3082\u307e\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3042\u308b\u901a\u308a\u3067\u3059\u3002\nphp artisan queue:listen\n\n\n\u30b8\u30e7\u30d6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092jobs\u30c6\u30fc\u30d6\u30eb\u306b\u767b\u9332\u3059\u308b\n\u4eca\u56de\u306f\u3001\u30d6\u30e9\u30a6\u30b6\u7d4c\u7531\u3067\u30b8\u30e7\u30d6\u3092\u767b\u9332\u3059\u308b\u306e\u3067\u3001\u30e9\u30a6\u30c6\u30a3\u30f3\u30b0\u3068\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30e1\u30fc\u30eb\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u30d3\u30e5\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3059\u308b\u306e\u3067\u3064\u3044\u3067\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002\n\uff08laravel5.3\u3067\u306f\u30e9\u30a6\u30c6\u30a3\u30f3\u30b0\u30d5\u30a1\u30a4\u30eb\u306broutes/web.php\u3092\u4f7f\u3044\u307e\u3059\uff09\n\napp/Http/routes.php\n<?php\n// for Lumen 5.1\n$app->get('reserve', 'ReserveController@store');\n// for Laravel 5.1(LTS) ~ 5.3\nRoute::get('reserve', 'ReserveController@store');\n\n\n\napp/Http/Controllers/ReserveController.php\n<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Http\\Controllers\\Controller;\nuse App\\Jobs\\SendEmail;\n\nclass ReserveController extends Controller {\n\n    public function store()\n    {\n        $mail = [\n            'from'    => 'nielsen@test.com',\n            'f_name'  => 'Nelsen',\n            'to'      => 'poulsen@test.com',\n            'to_name' => 'Poulsen',\n            'subject' => 'Thanks for your reservation.'\n        ];\n        // \u30b8\u30e7\u30d6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\n        $job = new SendEmail(\n            'emails.reservation',\n            ['name' => ucfirst('niikunihiro')],\n            $mail\n            );\n        // jobs \u30c6\u30fc\u30d6\u30eb\u306b\u767b\u9332\n        $this->dispatch($job);\n        echo 'finished!';\n    }\n\n}\n\n\n\nresources/views/emails/reservation.blade.php\nHi! {{$name}}.\n\nLorem ipsum dolor sit amet, consectetur adipisicing elit. Ab dolor eius eos hic magnam minus, nihil odio omnis quae quas velit, veritatis. Assumenda earum porro, quisquam repellendus sed tempora voluptatibus.\n\n\n\u30d6\u30e9\u30a6\u30b6\u3067\u78ba\u8a8d\u3059\u308b\u306e\u3067\u3001\u30d3\u30eb\u30c8\u30a4\u30f3\u30b5\u30fc\u30d0\u3092\u7acb\u3061\u4e0a\u3052\u307e\u3059\u3002\nphp artisan serve\n\n\u300chttp://localhost:8000/reserve\u300d\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u306b\u30e1\u30fc\u30eb\u306e\u5185\u5bb9\u304c\u66f8\u8fbc\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u78ba\u8a8d\u3057\u3066\u7d42\u308f\u308a\u3067\u3059\u3002\n\nstorage/logs/lumen.log\n[2015-07-11 07:14:46] lumen.DEBUG: Message-ID: <84c77b0b510235de0e6a54621294c3ef@swift.generated>\nDate: Sat, 11 Jul 2015 07:14:46 +0000\nSubject: Thanks for your reservation.\nFrom: Nelsen <nielsen@test.com>\nTo: Poulsen <poulsen@test.com>\nMIME-Version: 1.0\nContent-Type: text/html; charset=utf-8\nContent-Transfer-Encoding: quoted-printable\n\nHi! Niikunihiro.\n\nLorem ipsum dolor sit amet, consectetur adipisicing elit. Ab dolor eius eos hic magnam minus, nihil odio omnis quae quas velit, veritatis. Assumenda earum porro, quisquam repellendus sed tempora voluptatibus.  \n\n\n\n\u88dc\u8db3\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n# APP_KEY \u306b 32 \u6587\u5b57\u306e\u4e71\u6570\uff08\u3058\u3083\u306a\u304f\u3066\u3082\u3044\u3044\u3051\u3069\uff09\u3092\u8a2d\u5b9a\u3059\u308b\n# APP_KEY \u304c\u6b63\u3057\u304f\u8a2d\u5b9a\u3055\u308c\u3066\u306a\u3044\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\nAPP_KEY=Dwwf1OGD9vriSvpWIZhDubkPKWdnNgSi\n\n# \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c9\u30e9\u30a4\u30d0\u3092\u4f7f\u7528\nQUEUE_DRIVER=database\n\n# \u9001\u4fe1\u5185\u5bb9\u3092\u30ed\u30b0\u3067\u898b\u305f\u3044\u306e\u3067\nMAIL_DRIVER=log\n\nLumen\u306e\u5834\u5408\u306f\u3001illuminate/mail\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u8ffd\u52a0\u3059\u308b\n\ncomposer.json\n{\n    \"require\": {\n        \"laravel/lumen-framework\": \"5.1.*\",\n        \"vlucas/phpdotenv\": \"~1.0\",\n        \"illuminate/mail\": \"5.1.*\"\n    },\n}\n\n\ncomposer update illuminate/mail\n\n\n\u300c\u30b5\u30f3\u30af\u30b9\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3059\u308b\u3068\u304b\u306e\u51e6\u7406\u306f\u5373\u6642\u3058\u3083\u306a\u304f\u3066\u3082\u3044\u3044\u304b\u3089\u3001\u30b5\u30a4\u30c8\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306f\u3068\u306b\u304b\u304f\u901f\u304f\u300d\u3068\u3044\u3046\u96f0\u56f2\u6c17\u306b\u306a\u3063\u305f\u6642\u306fLaravel/Lumen\u306e\u30ad\u30e5\u30fc\u3092\u4f7f\u3046\u6a5f\u4f1a\u304c\u6765\u305f\u3068\u3044\u3046\u3053\u3068\u3058\u3083\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u3061\u3087\u3063\u3068\u3084\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n\n## \u524d\u63d0\n\n* \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306fLumen5.1\u3067\u3059\uff08Laravel5.1~5.3\u3067\u3082\u78ba\u8a8d\u6e08\u3067\u3059\uff09\n* \u30ad\u30e5\u30fc\u30c9\u30e9\u30a4\u30d0\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c9\u30e9\u30a4\u30d0\u3092\u4f7f\u3044\u307e\u3059\u3002\n* \u8a2d\u5b9a\u306f\u3053\u306e\u8a18\u4e8b\u306e\u4e0b\u306e\u65b9\u306b\u3042\u308b\u300c\u88dc\u8db3\u300d\u306e\u901a\u308a\u3067\u3059\u3002\n\n\n## Laravel/Lumen\u306e\u30ad\u30e5\u30fc\u306b\u5bfe\u3059\u308b\u81ea\u5206\u306e\u4e2d\u306e\u7406\u89e3\n\n\n\u30b8\u30e7\u30d6\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092jobs\u30c6\u30fc\u30d6\u30eb\u306b\u767b\u9332\u3059\u308b\u3068\u3001Laravel/Lumen\u304c\u30b8\u30e7\u30d6\u3092\u30ad\u30e5\u30fc\u3068\u3057\u3066\u5b9f\u884c\u3057\u3066\u3044\u3063\u3066\u304f\u308c\u308b\u3002\n\n\n## \u3084\u308b\u4e8b\n\n1. jobs\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3059\u308b\n* \u30b8\u30e7\u30d6\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3059\u308b\n* \u30ad\u30e5\u30fc\u30ea\u30b9\u30ca\u30fc\u3092\u5b9f\u884c\u3059\u308b\n\n\n### 1.jobs\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3059\u308b\n\n\u3053\u308c\u306f[\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://lumen.laravel.com/docs/5.1/queues#introduction)\u306b\u3042\u308b\u901a\u308a\u3001\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3057\u3066\u3001\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```artisan\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\nphp artisan queue:table\nphp artisan migrate\n```\n\n\n### 2.\u30b8\u30e7\u30d6\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3059\u308b\n\n\u3053\u308c\u3082[\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://lumen.laravel.com/docs/5.1/queues#writing-job-classes)\u306b\u3042\u308b\u901a\u308a\u3067\u3059\u304c\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u4f7f\u3046\u5834\u5408\u306f\u5fc5\u305a\u6307\u5b9a\u3057\u3068\u304b\u306a\u3044\u3068\u3001\u30ad\u30e5\u30fc\u306e\u5b9f\u884c\u6642\u306b\u4f8b\u5916\u3092\u6295\u3052\u3088\u308a\u307e\u3059\u3002\n\n\n```app/Jobs/SendEmail.php\n<?php\n\nnamespace App\\Jobs;\n\nuse Illuminate\\Contracts\\Bus\\SelfHandling;\nuse Illuminate\\Contracts\\Mail\\Mailer;\nuse Illuminate\\Contracts\\Queue\\ShouldQueue;\n\nclass SendEmail extends Job implements SelfHandling, ShouldQueue {\n\n    /** @var string view name */\n    protected $view;\n    /** @var array \u30d3\u30e5\u30fc\u306b\u5272\u308a\u5f53\u3066\u308b\u30c7\u30fc\u30bf */\n    protected $data;\n    /** @var array \u30e1\u30fc\u30eb\u306e\u9001\u4fe1\u5148\u7b49\u306e\u5c5e\u6027 */\n    protected $mail;\n\n    public function __construct($view, $data, $mail)\n    {\n        $this->view = $view;\n        $this->data = $data;\n        $this->mail = $mail;\n    }\n\n    /**\n     * @param Mailer $mailer\n     */\n    public function handle(Mailer $mailer)\n    {\n        $mail = $this->mail;\n        $mailer->send($this->view, $this->data, function ($message) use ($mail)\n        {\n            $message->subject($mail['subject'])\n                    ->from($mail['from'], $mail['f_name'])\n                    ->to($mail['to'], $mail['to_name']);\n        });\n    }\n\n}\n```\n\nLaravel5.3\u3067\u306f\u30af\u30e9\u30b9\u306e\u7d99\u627f\u306a\u3069\u304c\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```app/Jobs/SendEmail.php\n<?php\n\nnamespace App\\Jobs;\n\nuse Illuminate\\Bus\\Queueable;\nuse Illuminate\\Queue\\SerializesModels;\nuse Illuminate\\Queue\\InteractsWithQueue;\nuse Illuminate\\Contracts\\Mail\\Mailer;\nuse Illuminate\\Contracts\\Queue\\ShouldQueue;\n\nclass SendEmail implements ShouldQueue {\n\n    use InteractsWithQueue, Queueable, SerializesModels;\n\n    /** @var string view name */\n    protected $view;\n    /** @var array \u30d3\u30e5\u30fc\u306b\u5272\u308a\u5f53\u3066\u308b\u30c7\u30fc\u30bf */\n    protected $data;\n    /** @var array \u30e1\u30fc\u30eb\u306e\u9001\u4fe1\u5148\u7b49\u306e\u5c5e\u6027 */\n    protected $mail;\n\n    public function __construct($view, $data, $mail)\n    {\n        $this->view = $view;\n        $this->data = $data;\n        $this->mail = $mail;\n    }\n\n    /**\n     * @param Mailer $mailer\n     */\n    public function handle(Mailer $mailer)\n    {\n        $mail = $this->mail;\n        $mailer->send($this->view, $this->data, function ($message) use ($mail)\n        {\n            $message->subject($mail['subject'])\n                    ->from($mail['from'], $mail['f_name'])\n                    ->to($mail['to'], $mail['to_name']);\n        });\n    }\n\n}\n```\n\n### 3.\u30ad\u30e5\u30fc\u30ea\u30b9\u30ca\u30fc\u3092\u5b9f\u884c\u3059\u308b\n\n\u3053\u308c\u3082\u307e\u305f[\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://lumen.laravel.com/docs/5.1/queues#running-the-queue-listener)\u306b\u3042\u308b\u901a\u308a\u3067\u3059\u3002\n\n```artisan\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\nphp artisan queue:listen\n```\n\n## \u30b8\u30e7\u30d6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092jobs\u30c6\u30fc\u30d6\u30eb\u306b\u767b\u9332\u3059\u308b\n\n\u4eca\u56de\u306f\u3001\u30d6\u30e9\u30a6\u30b6\u7d4c\u7531\u3067\u30b8\u30e7\u30d6\u3092\u767b\u9332\u3059\u308b\u306e\u3067\u3001\u30e9\u30a6\u30c6\u30a3\u30f3\u30b0\u3068\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30e1\u30fc\u30eb\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u30d3\u30e5\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3059\u308b\u306e\u3067\u3064\u3044\u3067\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002\n\uff08laravel5.3\u3067\u306f\u30e9\u30a6\u30c6\u30a3\u30f3\u30b0\u30d5\u30a1\u30a4\u30eb\u306b`routes/web.php`\u3092\u4f7f\u3044\u307e\u3059\uff09\n\n```app/Http/routes.php\n<?php\n// for Lumen 5.1\n$app->get('reserve', 'ReserveController@store');\n// for Laravel 5.1(LTS) ~ 5.3\nRoute::get('reserve', 'ReserveController@store');\n```\n\n```app/Http/Controllers/ReserveController.php\n<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Http\\Controllers\\Controller;\nuse App\\Jobs\\SendEmail;\n\nclass ReserveController extends Controller {\n\n    public function store()\n    {\n        $mail = [\n            'from'    => 'nielsen@test.com',\n            'f_name'  => 'Nelsen',\n            'to'      => 'poulsen@test.com',\n            'to_name' => 'Poulsen',\n            'subject' => 'Thanks for your reservation.'\n        ];\n        // \u30b8\u30e7\u30d6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\n        $job = new SendEmail(\n            'emails.reservation',\n            ['name' => ucfirst('niikunihiro')],\n            $mail\n            );\n        // jobs \u30c6\u30fc\u30d6\u30eb\u306b\u767b\u9332\n        $this->dispatch($job);\n        echo 'finished!';\n    }\n\n}\n```\n\n```resources/views/emails/reservation.blade.php\nHi! {{$name}}.\n\nLorem ipsum dolor sit amet, consectetur adipisicing elit. Ab dolor eius eos hic magnam minus, nihil odio omnis quae quas velit, veritatis. Assumenda earum porro, quisquam repellendus sed tempora voluptatibus.\n```\n\n\n\u30d6\u30e9\u30a6\u30b6\u3067\u78ba\u8a8d\u3059\u308b\u306e\u3067\u3001\u30d3\u30eb\u30c8\u30a4\u30f3\u30b5\u30fc\u30d0\u3092\u7acb\u3061\u4e0a\u3052\u307e\u3059\u3002\n\n```artisan\u30b3\u30de\u30f3\u30c9\nphp artisan serve\n```\n\n\u300c[http://localhost:8000/reserve](http://localhost:8000/reserve)\u300d\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u306b\u30e1\u30fc\u30eb\u306e\u5185\u5bb9\u304c\u66f8\u8fbc\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u78ba\u8a8d\u3057\u3066\u7d42\u308f\u308a\u3067\u3059\u3002\n\n```storage/logs/lumen.log\n[2015-07-11 07:14:46] lumen.DEBUG: Message-ID: <84c77b0b510235de0e6a54621294c3ef@swift.generated>\nDate: Sat, 11 Jul 2015 07:14:46 +0000\nSubject: Thanks for your reservation.\nFrom: Nelsen <nielsen@test.com>\nTo: Poulsen <poulsen@test.com>\nMIME-Version: 1.0\nContent-Type: text/html; charset=utf-8\nContent-Transfer-Encoding: quoted-printable\n\nHi! Niikunihiro.\n\nLorem ipsum dolor sit amet, consectetur adipisicing elit. Ab dolor eius eos hic magnam minus, nihil odio omnis quae quas velit, veritatis. Assumenda earum porro, quisquam repellendus sed tempora voluptatibus.  \n```\n\n\n## \u88dc\u8db3\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n\n```.env\n# APP_KEY \u306b 32 \u6587\u5b57\u306e\u4e71\u6570\uff08\u3058\u3083\u306a\u304f\u3066\u3082\u3044\u3044\u3051\u3069\uff09\u3092\u8a2d\u5b9a\u3059\u308b\n# APP_KEY \u304c\u6b63\u3057\u304f\u8a2d\u5b9a\u3055\u308c\u3066\u306a\u3044\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\nAPP_KEY=Dwwf1OGD9vriSvpWIZhDubkPKWdnNgSi\n\n# \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30c9\u30e9\u30a4\u30d0\u3092\u4f7f\u7528\nQUEUE_DRIVER=database\n\n# \u9001\u4fe1\u5185\u5bb9\u3092\u30ed\u30b0\u3067\u898b\u305f\u3044\u306e\u3067\nMAIL_DRIVER=log\n```\n\nLumen\u306e\u5834\u5408\u306f\u3001`illuminate/mail`\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u8ffd\u52a0\u3059\u308b\n\n```composer.json\n{\n    \"require\": {\n        \"laravel/lumen-framework\": \"5.1.*\",\n        \"vlucas/phpdotenv\": \"~1.0\",\n        \"illuminate/mail\": \"5.1.*\"\n    },\n}\n```\n\n```composer\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\ncomposer update illuminate/mail\n```\n", "tags": ["laravel", "PHP", "lumen"]}