{"context": " More than 1 year has passed since last update.\n\n\u80cc\u666f\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u5229\u7528\u3057\u306a\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u308f\u3056\u308f\u3056Rails\u3067\u5b9f\u88c5\u3057\u305f\u304f\u306a\u308b\u6642\u3082\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u50d5\u306e\u5834\u5408\u306f\u3001\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306b\u306fAPI\u7528\u306e\u5225\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u3066\u3001react-rails\u3092\u7528\u3044\u305f\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u307f\u306eRails\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5fc5\u8981\u304c\u51fa\u305f\u306e\u3067\u3001\u305d\u306e\u3068\u304d\u306e\u4f5c\u696d\u3092\u8a18\u9332\u3057\u307e\u3059\u3002\n\n\u74b0\u5883\n\nRails = 4.2.5\ncapistrano ~> 3.1\n\n\n\u624b\u9806\n\nGemfile\u304b\u3089DB\u30a2\u30c0\u30d7\u30bfgem\u306e\u524a\u9664\nconfig/application.rb\u306erequire\u8a2d\u5b9a\u306e\u5909\u66f4\nconfig\u4ee5\u4e0b\u306eactive_record\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u8a2d\u5b9a\u306e\u524a\u9664\ntest_helper\u306eactive_record\u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u51e6\u7406\u306e\u524a\u9664\ncapistrano\u30bf\u30b9\u30af\u304b\u3089migration\u51e6\u7406\u306e\u524a\u9664\n\n\n1. Gemfile\u304b\u3089DB\u30a2\u30c0\u30d7\u30bfgem\u306e\u524a\u9664\n\nGemfile\n\ngem 'mysql2' # Remove this line\ngem 'sqlite3' # Remove this line\ngem 'pg' # Remove this line\n\n\n\n\n2. config/application.rb\u306erequire\u8a2d\u5b9a\u306e\u5909\u66f4\nrails/all\u3092require\u3059\u308b\u884c\u304c\u3042\u308b\u306e\u3067\u3053\u308c\u3092\u524a\u9664\u3057\u3066\u3001\u4ee3\u308f\u308a\u306b\u4ee5\u4e0b\u306e\u884c\u3092\u8db3\u3059\u3002\n\nconfig/application.rb\n\n# require 'rails/all' # Remove this line\n\n# Add below\n%w(\n  action_controller\n  action_view\n  action_mailer\n  active_job\n  rails/test_unit\n  sprockets\n).each do |framework|\n  begin\n    require \"#{framework}/railtie\"\n  rescue LoadError\n  end\nend\n\n\n\n\u88dc\u8db3\nrequire 'rails/all'\u3067\u306f railties/lib/rails/all.rb\u306e\u4ee5\u4e0b\u306e\u884c\u304c\u5b9f\u884c\u3055\u308c\u308b\n\nrails/all.rb\nrequire \"rails\"\n\n%w(\n  active_record\n  action_controller\n  action_view\n  action_mailer\n  active_job\n  rails/test_unit\n  sprockets\n).each do |framework|\n  begin\n    require \"#{framework}/railtie\"\n  rescue LoadError\n  end\nend\n\n\n\u3053\u306eactive_record\u3092require\u3059\u308b\u51e6\u7406\u3092\u9664\u3044\u305f\u306e\u304c\u4e0a\u3067\u884c\u3063\u305f\u3053\u3068\u3002\n\n3. config\u4ee5\u4e0b\u306eactive_record\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u8a2d\u5b9a\u306e\u89e3\u9664\n\nconfig/application.rb\n\nconfig/application.rb\nmodule YourApp\n  class Application < Rails::Application\n    config.active_record.raise_in_transactional_callbacks = true # <= Remove this line\n  end\nend\n\n\n\nconfig/environments/{environment}.rb\n\nconfig/environments/{environment}.rb\nRails.application.configure do\n  config.active_record.dump_schema_after_migration = false # <= Remove this line\nend\n\n\n\n4. test_helper\u306eactive_record\u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u51e6\u7406\u306e\u524a\u9664\n\ntest/test_helper.rb\n\nclass ActiveSupport::TestCase\n  fixtures :all # <= Remove this line\nend\n\n\n\n5. capistrano\u30bf\u30b9\u30af\u304b\u3089migration\u51e6\u7406\u306e\u524a\u9664\n\nconfig/deploy.rb\n\nRake::Task['deploy:migrate'].clear # Add this line\n\n\n\n\n\u4ee5\u4e0a\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u63a5\u7d9a\u3057\u306a\u3044Rails\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n## \u80cc\u666f\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u5229\u7528\u3057\u306a\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u308f\u3056\u308f\u3056Rails\u3067\u5b9f\u88c5\u3057\u305f\u304f\u306a\u308b\u6642\u3082\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u50d5\u306e\u5834\u5408\u306f\u3001\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306b\u306fAPI\u7528\u306e\u5225\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u3066\u3001react-rails\u3092\u7528\u3044\u305f\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u307f\u306eRails\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5fc5\u8981\u304c\u51fa\u305f\u306e\u3067\u3001\u305d\u306e\u3068\u304d\u306e\u4f5c\u696d\u3092\u8a18\u9332\u3057\u307e\u3059\u3002\n\n## \u74b0\u5883\n\n* Rails = 4.2.5\n* capistrano ~> 3.1\n\n## \u624b\u9806\n\n1. Gemfile\u304b\u3089DB\u30a2\u30c0\u30d7\u30bfgem\u306e\u524a\u9664\n2. config/application.rb\u306erequire\u8a2d\u5b9a\u306e\u5909\u66f4\n3. config\u4ee5\u4e0b\u306eactive_record\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u8a2d\u5b9a\u306e\u524a\u9664\n4. test_helper\u306eactive_record\u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u51e6\u7406\u306e\u524a\u9664\n5. capistrano\u30bf\u30b9\u30af\u304b\u3089migration\u51e6\u7406\u306e\u524a\u9664\n\n### 1. Gemfile\u304b\u3089DB\u30a2\u30c0\u30d7\u30bfgem\u306e\u524a\u9664\n\n```ruby:Gemfile\n\ngem 'mysql2' # Remove this line\ngem 'sqlite3' # Remove this line\ngem 'pg' # Remove this line\n\n```\n\n### 2. config/application.rb\u306erequire\u8a2d\u5b9a\u306e\u5909\u66f4\n\n`rails/all`\u3092require\u3059\u308b\u884c\u304c\u3042\u308b\u306e\u3067\u3053\u308c\u3092\u524a\u9664\u3057\u3066\u3001\u4ee3\u308f\u308a\u306b\u4ee5\u4e0b\u306e\u884c\u3092\u8db3\u3059\u3002\n\n```ruby:config/application.rb\n\n# require 'rails/all' # Remove this line\n\n# Add below\n%w(\n  action_controller\n  action_view\n  action_mailer\n  active_job\n  rails/test_unit\n  sprockets\n).each do |framework|\n  begin\n    require \"#{framework}/railtie\"\n  rescue LoadError\n  end\nend\n```\n\n#### \u88dc\u8db3\n\n`require 'rails/all'`\u3067\u306f railties/lib/rails/all.rb\u306e\u4ee5\u4e0b\u306e\u884c\u304c\u5b9f\u884c\u3055\u308c\u308b\n\n```ruby:rails/all.rb\nrequire \"rails\"\n\n%w(\n  active_record\n  action_controller\n  action_view\n  action_mailer\n  active_job\n  rails/test_unit\n  sprockets\n).each do |framework|\n  begin\n    require \"#{framework}/railtie\"\n  rescue LoadError\n  end\nend\n```\n\n\u3053\u306eactive_record\u3092require\u3059\u308b\u51e6\u7406\u3092\u9664\u3044\u305f\u306e\u304c\u4e0a\u3067\u884c\u3063\u305f\u3053\u3068\u3002\n\n### 3. config\u4ee5\u4e0b\u306eactive_record\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u8a2d\u5b9a\u306e\u89e3\u9664\n\n#### config/application.rb\n\n```ruby:config/application.rb\nmodule YourApp\n  class Application < Rails::Application\n    config.active_record.raise_in_transactional_callbacks = true # <= Remove this line\n  end\nend\n```\n\n#### config/environments/{environment}.rb\n\n```ruby:config/environments/{environment}.rb\nRails.application.configure do\n  config.active_record.dump_schema_after_migration = false # <= Remove this line\nend\n```\n\n### 4. test_helper\u306eactive_record\u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u51e6\u7406\u306e\u524a\u9664\n\n```ruby:test/test_helper.rb\n\nclass ActiveSupport::TestCase\n  fixtures :all # <= Remove this line\nend\n```\n\n### 5. capistrano\u30bf\u30b9\u30af\u304b\u3089migration\u51e6\u7406\u306e\u524a\u9664\n\n```ruby:config/deploy.rb\n\nRake::Task['deploy:migrate'].clear # Add this line\n\n\n```\n\n\u4ee5\u4e0a\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u63a5\u7d9a\u3057\u306a\u3044Rails\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n", "tags": ["active_record", "capistrano", "Ruby", "Rails"]}