{"tags": ["castor", "spring", "Java"], "context": " More than 1 year has passed since last update.\u4e0b\u8a18\u306e\u30b5\u30a4\u30c8\u3067Spring\u3068Castor\u3067O/X\u30de\u30c3\u30d1\u30fc\u306b\u3064\u3044\u3066\u52c9\u5f37\u3057\u307e\u3057\u305f\u3002\n\nhttp://www.ibm.com/developerworks/jp/xml/library/x-springXOM/\n\n\u3057\u304b\u3057\u3001\u4e0a\u8a18\u306e\u30b5\u30a4\u30c8\u306e\u30bd\u30fc\u30b9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u8db3\u308a\u306a\u3044jar\u3092\u63c3\u3048\u3066\u3084\u3063\u3066\u307f\u307e\u3057\u305f\u304c\u3001\n\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u304d\u3066\u306a\u304b\u306a\u304b\u3046\u307e\u304f\u52d5\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n\u63c3\u3048\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u4e00\u5f0f\u306f\u4e0b\u8a18\u306e\u6240\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u307e\u3059\u3002\nhttp://dl.dropbox.com/u/25436822/Spring_Castor/OXMTest.zip\n\u81ea\u5206\u304c\u8272\u3005\u8a66\u3057\u3066\u898b\u305f\u7d50\u679c\u3001\u4e0b\u8a18\u306exml\u30d5\u30a1\u30a4\u30eb\u306e\n<property name=\"mappingLocation\" value=\"classpath:mapping.xml\" />\n\u306e\u90e8\u5206\u306emapping.xml\u30d5\u30a1\u30a4\u30eb\u304c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u751f\u6210\u6642\u306b\u30d1\u30b9\u306e\u6307\u5b9a\u306e\u554f\u984c\u3067PG\u304c\u63a2\u305b\u306a\u304b\u3063\u305f\u3053\u3068\u3068\u8003\u3048\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u307e\u3067\u898b\u3066\u3082\u3057\u4f55\u304b\u5206\u304b\u3063\u305f\u3089\u3001\u6559\u3048\u3066\u304f\u3060\u3055\u3044\u3002\u3061\u306a\u307f\u306b\u3001\u7d76\u5bfe\u30d1\u30b9\u3067\u8a2d\u5b9a\u3057\u3066\u307f\u305f\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002\n<property name=\"mappingLocation\" value=\"C:\\\\workspace\\\\OXMTest\\\\bin\\\\mapping.xml\" />\n\n\n\\workspace\\OXMTest\\config\\applicationContext.xml\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\">\n\n    <bean id=\"oxmExample\" class=\"com.xyz.OXMExample\">\n        <property name=\"marshaller\" ref=\"castorMarshaller\" />\n        <property name=\"unmarshaller\" ref=\"castorMarshaller\" />\n    </bean>\n    <bean id=\"castorMarshaller\" class=\"org.springframework.oxm.castor.CastorMarshaller\">\n       <!--- \u203b\u3053\u3053\u306e\u6307\u5b9a\u304c\u6b63\u3057\u304f\u306a\u3044\u306e\u304b\uff1f\uff1fPG\u304cmapping.xml\u3092\u8aad\u3081\u306a\u3044\u3067\u3059\u3002\u203b --->\n        <property name=\"mappingLocation\" value=\"classpath:mapping.xml\" />\n    </bean>\n</beans>\n\n\n\n\u7406\u7531\uff1a<property name=\"mappingLocation\" value=\"classpath:mapping.xml\" />\n\u306e\u90e8\u5206\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u524d\u306b\u4e0b\u8a18\u306e\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u3001\u305d\u308c\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3059\u308b\u3068\u305d\u306e\u6b21\u306e\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\n\u2460\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u524d\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\nlog4j:WARN No appenders could be found for logger (org.springframework.context.support.ClassPathXmlApplicationContext).\nlog4j:WARN Please initialize the log4j system properly.\nException in thread \"main\" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'oxmExample' defined in class path resource [applicationContext.xml]: Cannot resolve reference to bean 'castorMarshaller' while setting bean property 'marshaller'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'castorMarshaller' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: javax/xml/stream/XMLEventWriter\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:315)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1298)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1060)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:510)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:449)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:289)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:286)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:188)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:528)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:716)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:383)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)\n    at com.xyz.OXMExample.main(OXMExample.java:54)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'castorMarshaller' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: javax/xml/stream/XMLEventWriter\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:518)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:449)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:289)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:286)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:188)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:309)\n    ... 15 more\nCaused by: java.lang.NoClassDefFoundError: javax/xml/stream/XMLEventWriter\n    at java.lang.Class.getDeclaredMethods0(Native Method)\n    at java.lang.Class.privateGetDeclaredMethods(Class.java:2395)\n    at java.lang.Class.getDeclaredMethods(Class.java:1763)\n    at java.beans.Introspector$1.run(Introspector.java:1265)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.beans.Introspector.getPublicDeclaredMethods(Introspector.java:1263)\n    at java.beans.Introspector.getTargetMethodInfo(Introspector.java:1129)\n    at java.beans.Introspector.getBeanInfo(Introspector.java:387)\n    at java.beans.Introspector.getBeanInfo(Introspector.java:159)\n    at java.beans.Introspector.getBeanInfo(Introspector.java:220)\n    at java.beans.Introspector.<init>(Introspector.java:368)\n    at java.beans.Introspector.getBeanInfo(Introspector.java:159)\n    at org.springframework.beans.CachedIntrospectionResults.<init>(CachedIntrospectionResults.java:222)\n    at org.springframework.beans.CachedIntrospectionResults.forClass(CachedIntrospectionResults.java:143)\n    at org.springframework.beans.BeanWrapperImpl.getCachedIntrospectionResults(BeanWrapperImpl.java:269)\n    at org.springframework.beans.BeanWrapperImpl.getPropertyDescriptorInternal(BeanWrapperImpl.java:299)\n    at org.springframework.beans.BeanWrapperImpl.isWritableProperty(BeanWrapperImpl.java:351)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1300)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1060)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:510)\n    ... 21 more\n\n\n\n\n\u2461\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u5f8c\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\nlog4j:WARN No appenders could be found for logger (org.springframework.context.support.ClassPathXmlApplicationContext).\nlog4j:WARN Please initialize the log4j system properly.\nException in thread \"main\" java.lang.NoClassDefFoundError: javax/xml/stream/XMLStreamReader\n    at org.springframework.oxm.support.AbstractMarshaller.marshal(AbstractMarshaller.java:95)\n    at com.xyz.OXMExample.saveSimpleBean(OXMExample.java:33)\n    at com.xyz.OXMExample.go(OXMExample.java:62)\n    at com.xyz.OXMExample.main(OXMExample.java:56)\n\n\n\n\u5b9f\u65bd\u74b0\u5883\u306fWindowsXP\u3067\u3057\u305f\u3002\n\n\u5b9f\u884c\u5f53\u6642\u306eclasspath\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a\u5185\u5bb9\n\n.classpath\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<classpath>\n    <classpathentry kind=\"src\" path=\"src\"/>\n    <classpathentry excluding=\"**/*.java\" kind=\"src\" path=\"config\"/>\n    <classpathentry kind=\"con\" path=\"org.eclipse.jdt.launching.JRE_CONTAINER\"/>\n    <classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/org.springframework.oxm-3.0.0.M4.jar\"/>\n    <classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/castor-1.3.jar\"/>\n    <classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/castor-1.3-core.jar\"/>\n    <classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/castor-1.3-xml.jar\"/>\n    <classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/commons-logging-1.1.1.jar\"/>\n    <classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/log4j-1.2.15.jar\"/>\n    <classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/org.springframework.asm-3.0.0.M4.jar\"/>\n    <classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/org.springframework.beans-3.0.0.M4.jar\"/>\n    <classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/org.springframework.context-3.0.0.M4.jar\"/>\n    <classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/org.springframework.core-3.0.0.M4.jar\"/>\n    <classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/org.springframework.expression-3.0.0.M4.jar\"/>\n    <classpathentry kind=\"output\" path=\"bin\"/>\n</classpath>\n\n\n\n\n\nhttp://dl.dropbox.com/u/25436822/Spring_Castor/OXMTest.zip\u306e\u306a\u304b\u306e\u30bd\u30fc\u30b9\u629c\u7c8b\u3002\n\n\n\\workspace\\OXMTest\\src\\com\\xyz\\OXMExample.java\npackage com.xyz;\n\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport javax.xml.transform.stream.StreamResult;\nimport javax.xml.transform.stream.StreamSource;\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport org.springframework.oxm.Marshaller;\nimport org.springframework.oxm.Unmarshaller;\n\npublic class OXMExample {\n    private static final String FILE_NAME = \"simplebean.xml\";\n    private SimpleBean simpleBean;\n\n    private Marshaller marshaller;\n    private Unmarshaller unmarshaller;\n\n    public void setMarshaller(Marshaller marshaller) {\n        this.marshaller = marshaller;\n    }\n\n    public void setUnmarshaller(Unmarshaller unmarshaller) {\n        this.unmarshaller = unmarshaller;\n    }\n\n    public void saveSimpleBean() throws IOException {\n        FileOutputStream os = null;\n        try {\n            os = new FileOutputStream(FILE_NAME);\n            this.marshaller.marshal(simpleBean, new StreamResult(os));\n        } finally {\n            if (os != null) {\n                os.close();\n            }\n        }\n    }\n\n    public void loadSimpleBean() throws IOException {\n        FileInputStream is = null;\n        try {\n            is = new FileInputStream(FILE_NAME);\n            this.simpleBean = (SimpleBean) this.unmarshaller.unmarshal(new StreamSource(is));\n        } finally {\n            if (is != null) {\n                is.close();\n            }\n        }\n    }\n\n    public static void main(String[] args) throws IOException {\n        ApplicationContext appContext = new ClassPathXmlApplicationContext(\"applicationContext.xml\");\n        OXMExample ex = (OXMExample) appContext.getBean(\"oxmExample\");\n        ex.go();\n    }\n\n    private void go() throws IOException {\n        simpleBean = getSimpleBean();\n\n        saveSimpleBean();\n        loadSimpleBean();\n\n        System.out.println(\"name: \" + simpleBean.getName());\n        System.out.println(\"job descritpion: \" + simpleBean.getJobDescription());\n        System.out.println(\"age: \" + simpleBean.getAge());\n        System.out.println(\"executive: \" + simpleBean.isExecutive());\n\n    }\n\n\n    private SimpleBean getSimpleBean() {\n        SimpleBean simpleBean = new SimpleBean();\n        simpleBean.setAge(35);\n        simpleBean.setExecutive(false);\n        simpleBean.setJobDescription(\"Janitor\");\n        simpleBean.setName(\"Mister Jones\");\n\n        return simpleBean;\n\n    }\n}\n\n\n\n\\workspace\\OXMTest\\src\\com\\xyz\\SimpleBean.java\npackage com.xyz;\n\npublic class SimpleBean {\n\n    private String name;\n    private Integer age;\n    private String jobDescription;\n    private boolean executive;\n\n\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public Integer getAge() {\n        return age;\n    }\n    public void setAge(Integer age) {\n        this.age = age;\n    }\n    public String getJobDescription() {\n        return jobDescription;\n    }\n    public void setJobDescription(String jobDescription) {\n        this.jobDescription = jobDescription;\n    }\n    public boolean isExecutive() {\n        return executive;\n    }\n    public void setExecutive(boolean executive) {\n        this.executive = executive;\n    }\n\n\n}\n\n\n\n\n\\workspace\\OXMTest\\config\\applicationContext.xml\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\">\n\n    <bean id=\"oxmExample\" class=\"com.xyz.OXMExample\">\n        <property name=\"marshaller\" ref=\"castorMarshaller\" />\n        <property name=\"unmarshaller\" ref=\"castorMarshaller\" />\n    </bean>\n    <bean id=\"castorMarshaller\" class=\"org.springframework.oxm.castor.CastorMarshaller\">\n        <property name=\"mappingLocation\" value=\"classpath:mapping.xml\" />\n    </bean>\n</beans>\n\n\n\n\\workspace\\OXMTest\\config\\mapping.xml\n<?xml version=\"1.0\"?>\n\n<mapping>\n    <class name=\"com.xyz.SimpleBean\">\n\n       <map-to xml=\"simplebean\"/>\n\n       <field name=\"age\" type=\"integer\">\n          <bind-xml name=\"age\" node=\"element\"/>\n       </field>\n\n       <field name=\"executive\" type=\"boolean\">\n          <bind-xml name=\"is-executive\" node=\"element\"/>\n       </field>\n\n       <field name=\"jobDescription\" type=\"string\">\n          <bind-xml name=\"job\" node=\"element\"/>\n       </field>\n\n       <field name=\"name\" type=\"string\">\n          <bind-xml name=\"name\" node=\"element\"/>\n       </field>\n    </class>\n</mapping>\n\n\n\n\\workspace\\OXMTest\\settings\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<settings>\n    <fooEnabled>false</fooEnabled>\n</settings>\n\n\n\n\u4e0b\u8a18\u306e\u30b5\u30a4\u30c8\u3067Spring\u3068Castor\u3067O/X\u30de\u30c3\u30d1\u30fc\u306b\u3064\u3044\u3066\u52c9\u5f37\u3057\u307e\u3057\u305f\u3002\n\n* http://www.ibm.com/developerworks/jp/xml/library/x-springXOM/\n\n\u3057\u304b\u3057\u3001\u4e0a\u8a18\u306e\u30b5\u30a4\u30c8\u306e\u30bd\u30fc\u30b9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u8db3\u308a\u306a\u3044jar\u3092\u63c3\u3048\u3066\u3084\u3063\u3066\u307f\u307e\u3057\u305f\u304c\u3001\n\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u304d\u3066\u306a\u304b\u306a\u304b\u3046\u307e\u304f\u52d5\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n* \u63c3\u3048\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u4e00\u5f0f\u306f\u4e0b\u8a18\u306e\u6240\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u307e\u3059\u3002\nhttp://dl.dropbox.com/u/25436822/Spring_Castor/OXMTest.zip\n\n* \u81ea\u5206\u304c\u8272\u3005\u8a66\u3057\u3066\u898b\u305f\u7d50\u679c\u3001\u4e0b\u8a18\u306exml\u30d5\u30a1\u30a4\u30eb\u306e\n```<property name=\"mappingLocation\" value=\"classpath:mapping.xml\" />```\n\u306e\u90e8\u5206\u306emapping.xml\u30d5\u30a1\u30a4\u30eb\u304c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u751f\u6210\u6642\u306b\u30d1\u30b9\u306e\u6307\u5b9a\u306e\u554f\u984c\u3067PG\u304c\u63a2\u305b\u306a\u304b\u3063\u305f\u3053\u3068\u3068\u8003\u3048\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u307e\u3067\u898b\u3066\u3082\u3057\u4f55\u304b\u5206\u304b\u3063\u305f\u3089\u3001\u6559\u3048\u3066\u304f\u3060\u3055\u3044\u3002\u3061\u306a\u307f\u306b\u3001\u7d76\u5bfe\u30d1\u30b9\u3067\u8a2d\u5b9a\u3057\u3066\u307f\u305f\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002\n ```<property name=\"mappingLocation\" value=\"C:\\\\workspace\\\\OXMTest\\\\bin\\\\mapping.xml\" />```\n\n   \t\n \n```xml:\\workspace\\OXMTest\\config\\applicationContext.xml\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\">\n\n    <bean id=\"oxmExample\" class=\"com.xyz.OXMExample\">\n        <property name=\"marshaller\" ref=\"castorMarshaller\" />\n        <property name=\"unmarshaller\" ref=\"castorMarshaller\" />\n    </bean>\n    <bean id=\"castorMarshaller\" class=\"org.springframework.oxm.castor.CastorMarshaller\">\n       <!--- \u203b\u3053\u3053\u306e\u6307\u5b9a\u304c\u6b63\u3057\u304f\u306a\u3044\u306e\u304b\uff1f\uff1fPG\u304cmapping.xml\u3092\u8aad\u3081\u306a\u3044\u3067\u3059\u3002\u203b --->\n    \t<property name=\"mappingLocation\" value=\"classpath:mapping.xml\" />\n    </bean>\n</beans>\n```\n\n* \u7406\u7531\uff1a```<property name=\"mappingLocation\" value=\"classpath:mapping.xml\" />```\n\u306e\u90e8\u5206\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u524d\u306b\u4e0b\u8a18\u306e\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u3001\u305d\u308c\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3059\u308b\u3068\u305d\u306e\u6b21\u306e\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n```txt:\u2460\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u524d\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\nlog4j:WARN No appenders could be found for logger (org.springframework.context.support.ClassPathXmlApplicationContext).\nlog4j:WARN Please initialize the log4j system properly.\nException in thread \"main\" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'oxmExample' defined in class path resource [applicationContext.xml]: Cannot resolve reference to bean 'castorMarshaller' while setting bean property 'marshaller'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'castorMarshaller' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: javax/xml/stream/XMLEventWriter\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:315)\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1298)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1060)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:510)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:449)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:289)\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:286)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:188)\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:528)\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:716)\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:383)\n\tat org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)\n\tat org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)\n\tat com.xyz.OXMExample.main(OXMExample.java:54)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'castorMarshaller' defined in class path resource [applicationContext.xml]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: javax/xml/stream/XMLEventWriter\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:518)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:449)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:289)\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:286)\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:188)\n\tat org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:309)\n\t... 15 more\nCaused by: java.lang.NoClassDefFoundError: javax/xml/stream/XMLEventWriter\n\tat java.lang.Class.getDeclaredMethods0(Native Method)\n\tat java.lang.Class.privateGetDeclaredMethods(Class.java:2395)\n\tat java.lang.Class.getDeclaredMethods(Class.java:1763)\n\tat java.beans.Introspector$1.run(Introspector.java:1265)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.beans.Introspector.getPublicDeclaredMethods(Introspector.java:1263)\n\tat java.beans.Introspector.getTargetMethodInfo(Introspector.java:1129)\n\tat java.beans.Introspector.getBeanInfo(Introspector.java:387)\n\tat java.beans.Introspector.getBeanInfo(Introspector.java:159)\n\tat java.beans.Introspector.getBeanInfo(Introspector.java:220)\n\tat java.beans.Introspector.<init>(Introspector.java:368)\n\tat java.beans.Introspector.getBeanInfo(Introspector.java:159)\n\tat org.springframework.beans.CachedIntrospectionResults.<init>(CachedIntrospectionResults.java:222)\n\tat org.springframework.beans.CachedIntrospectionResults.forClass(CachedIntrospectionResults.java:143)\n\tat org.springframework.beans.BeanWrapperImpl.getCachedIntrospectionResults(BeanWrapperImpl.java:269)\n\tat org.springframework.beans.BeanWrapperImpl.getPropertyDescriptorInternal(BeanWrapperImpl.java:299)\n\tat org.springframework.beans.BeanWrapperImpl.isWritableProperty(BeanWrapperImpl.java:351)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1300)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1060)\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:510)\n\t... 21 more\n\n```\n\n\n```txt:\u2461\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u5f8c\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\nlog4j:WARN No appenders could be found for logger (org.springframework.context.support.ClassPathXmlApplicationContext).\nlog4j:WARN Please initialize the log4j system properly.\nException in thread \"main\" java.lang.NoClassDefFoundError: javax/xml/stream/XMLStreamReader\n\tat org.springframework.oxm.support.AbstractMarshaller.marshal(AbstractMarshaller.java:95)\n\tat com.xyz.OXMExample.saveSimpleBean(OXMExample.java:33)\n\tat com.xyz.OXMExample.go(OXMExample.java:62)\n\tat com.xyz.OXMExample.main(OXMExample.java:56)\n```\n\n###\u5b9f\u65bd\u74b0\u5883\u306fWindowsXP\u3067\u3057\u305f\u3002\n\n###\u5b9f\u884c\u5f53\u6642\u306eclasspath\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a\u5185\u5bb9\n```:.classpath\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<classpath>\n\t<classpathentry kind=\"src\" path=\"src\"/>\n\t<classpathentry excluding=\"**/*.java\" kind=\"src\" path=\"config\"/>\n\t<classpathentry kind=\"con\" path=\"org.eclipse.jdt.launching.JRE_CONTAINER\"/>\n\t<classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/org.springframework.oxm-3.0.0.M4.jar\"/>\n\t<classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/castor-1.3.jar\"/>\n\t<classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/castor-1.3-core.jar\"/>\n\t<classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/castor-1.3-xml.jar\"/>\n\t<classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/commons-logging-1.1.1.jar\"/>\n\t<classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/log4j-1.2.15.jar\"/>\n\t<classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/org.springframework.asm-3.0.0.M4.jar\"/>\n\t<classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/org.springframework.beans-3.0.0.M4.jar\"/>\n\t<classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/org.springframework.context-3.0.0.M4.jar\"/>\n\t<classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/org.springframework.core-3.0.0.M4.jar\"/>\n\t<classpathentry kind=\"lib\" path=\"C:/workspace/OXMTest/lib/org.springframework.expression-3.0.0.M4.jar\"/>\n\t<classpathentry kind=\"output\" path=\"bin\"/>\n</classpath>\n\n\n```\n\n###http://dl.dropbox.com/u/25436822/Spring_Castor/OXMTest.zip\u306e\u306a\u304b\u306e\u30bd\u30fc\u30b9\u629c\u7c8b\u3002\n\n```java:\\workspace\\OXMTest\\src\\com\\xyz\\OXMExample.java\npackage com.xyz;\n\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport javax.xml.transform.stream.StreamResult;\nimport javax.xml.transform.stream.StreamSource;\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport org.springframework.oxm.Marshaller;\nimport org.springframework.oxm.Unmarshaller;\n\npublic class OXMExample {\n    private static final String FILE_NAME = \"simplebean.xml\";\n    private SimpleBean simpleBean;\n    \n    private Marshaller marshaller;\n    private Unmarshaller unmarshaller;\n\n    public void setMarshaller(Marshaller marshaller) {\n        this.marshaller = marshaller;\n    }\n\n    public void setUnmarshaller(Unmarshaller unmarshaller) {\n        this.unmarshaller = unmarshaller;\n    }\n\n    public void saveSimpleBean() throws IOException {\n        FileOutputStream os = null;\n        try {\n            os = new FileOutputStream(FILE_NAME);\n            this.marshaller.marshal(simpleBean, new StreamResult(os));\n        } finally {\n            if (os != null) {\n                os.close();\n            }\n        }\n    }\n\n    public void loadSimpleBean() throws IOException {\n        FileInputStream is = null;\n        try {\n            is = new FileInputStream(FILE_NAME);\n            this.simpleBean = (SimpleBean) this.unmarshaller.unmarshal(new StreamSource(is));\n        } finally {\n            if (is != null) {\n                is.close();\n            }\n        }\n    }\n\n    public static void main(String[] args) throws IOException {\n        ApplicationContext appContext = new ClassPathXmlApplicationContext(\"applicationContext.xml\");\n        OXMExample ex = (OXMExample) appContext.getBean(\"oxmExample\");\n        ex.go();\n    }\n    \n    private void go() throws IOException {\n    \tsimpleBean = getSimpleBean();\n    \t\n        saveSimpleBean();\n        loadSimpleBean();\n        \n        System.out.println(\"name: \" + simpleBean.getName());\n        System.out.println(\"job descritpion: \" + simpleBean.getJobDescription());\n        System.out.println(\"age: \" + simpleBean.getAge());\n        System.out.println(\"executive: \" + simpleBean.isExecutive());\n        \n    }\n    \n    \n    private SimpleBean getSimpleBean() {\n    \tSimpleBean simpleBean = new SimpleBean();\n    \tsimpleBean.setAge(35);\n    \tsimpleBean.setExecutive(false);\n    \tsimpleBean.setJobDescription(\"Janitor\");\n    \tsimpleBean.setName(\"Mister Jones\");\n    \t\n    \treturn simpleBean;\n    \t\n    }\n}\n```\n\n```java:\\workspace\\OXMTest\\src\\com\\xyz\\SimpleBean.java\npackage com.xyz;\n\npublic class SimpleBean {\n\n\tprivate String name;\n\tprivate Integer age;\n\tprivate String jobDescription;\n\tprivate boolean executive;\n\t\n\t\n\tpublic String getName() {\n\t\treturn name;\n\t}\n\tpublic void setName(String name) {\n\t\tthis.name = name;\n\t}\n\tpublic Integer getAge() {\n\t\treturn age;\n\t}\n\tpublic void setAge(Integer age) {\n\t\tthis.age = age;\n\t}\n\tpublic String getJobDescription() {\n\t\treturn jobDescription;\n\t}\n\tpublic void setJobDescription(String jobDescription) {\n\t\tthis.jobDescription = jobDescription;\n\t}\n\tpublic boolean isExecutive() {\n\t\treturn executive;\n\t}\n\tpublic void setExecutive(boolean executive) {\n\t\tthis.executive = executive;\n\t}\n\t\n\t\n}\n\n```\n\n```xml:\\workspace\\OXMTest\\config\\applicationContext.xml\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans\n           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\">\n\n    <bean id=\"oxmExample\" class=\"com.xyz.OXMExample\">\n        <property name=\"marshaller\" ref=\"castorMarshaller\" />\n        <property name=\"unmarshaller\" ref=\"castorMarshaller\" />\n    </bean>\n    <bean id=\"castorMarshaller\" class=\"org.springframework.oxm.castor.CastorMarshaller\">\n    \t<property name=\"mappingLocation\" value=\"classpath:mapping.xml\" />\n    </bean>\n</beans>\n```\n\n```xml:\\workspace\\OXMTest\\config\\mapping.xml\n<?xml version=\"1.0\"?>\n\n<mapping>\n\t<class name=\"com.xyz.SimpleBean\">\n\t           \n\t   <map-to xml=\"simplebean\"/>\n\t\n\t   <field name=\"age\" type=\"integer\">\n\t      <bind-xml name=\"age\" node=\"element\"/>\n\t   </field>\n\t   \n\t   <field name=\"executive\" type=\"boolean\">\n\t      <bind-xml name=\"is-executive\" node=\"element\"/>\n\t   </field>\n\t   \n\t   <field name=\"jobDescription\" type=\"string\">\n\t      <bind-xml name=\"job\" node=\"element\"/>\n\t   </field>\n\t\n\t   <field name=\"name\" type=\"string\">\n\t      <bind-xml name=\"name\" node=\"element\"/>\n\t   </field>\n\t</class>\n</mapping>\n```\n\n```xml:\\workspace\\OXMTest\\settings\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<settings>\n\t<fooEnabled>false</fooEnabled>\n</settings>\n```\n\n\n\n"}