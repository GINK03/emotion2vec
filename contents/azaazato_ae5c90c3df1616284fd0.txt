{"context": "\n\nEMR\u3067\u306epython3\u7cfb\u306e\u4f7f\u3044\u65b9\nEMR\u3067pyspark\u3092\u4f7f\u304a\u3046\u3068\u3059\u308b\u3068\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f2\u7cfb\u304c\u4f7f\u308f\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u30023\u7cfb\u3092\u3069\u3046\u305b\u306a\u3089\u4f7f\u3044\u305f\u3044\u306e\u3067\u4f7f\u3044\u65b9\u3092\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u3002\n\u73fe\u6642\u70b9\u3067\u6700\u65b0\u306eEMR\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f 5.0.0\u3067Spark\u306f2.0.0\u304c\u5165\u3063\u3066\u3044\u307e\u3059\u3002\u307e\u305fPython\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f2.7.10\u304c\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059\u3002\n$ pyspark\nPython 2.7.10 (default, Jul 20 2016, 20:53:27)\n[GCC 4.8.3 20140911 (Red Hat 4.8.3-9)] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\nSetting default log level to \"WARN\".\nTo adjust logging level use sc.setLogLevel(newLevel).\n16/09/15 02:15:05 WARN Client: Neither spark.yarn.jars nor spark.yarn.archive is set, falling back to uploading libraries under SPARK_HOME.\nWelcome to\n      ____              __\n     / __/__  ___ _____/ /__\n    _\\ \\/ _ \\/ _ `/ __/  '_/\n   /__ / .__/\\_,_/_/ /_/\\_\\   version 2.0.0\n      /_/\n\nUsing Python version 2.7.10 (default, Jul 20 2016 20:53:27)\nSparkSession available as 'spark'.\n\nPython3\u7cfb\u3092\u4f7f\u3046\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u308f\u305f\u3057\u3066EMR\u3092\u8d77\u52d5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n[\n    {\n        \"Classification\": \"spark-env\",\n        \"Properties\": {},\n        \"Configurations\": [\n            {\n                \"Classification\": \"export\",\n                \"Properties\": {\n                    \"PYSPARK_PYTHON\": \"python34\"\n                },\n                \"Configurations\": []\n            }\n        ]\n    }\n]\n\n$ pyspark\nPython 3.4.3 (default, Jul 20 2016, 21:31:36)\n[GCC 4.8.3 20140911 (Red Hat 4.8.3-9)] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\nSetting default log level to \"WARN\".\nTo adjust logging level use sc.setLogLevel(newLevel).\n16/09/15 02:19:11 WARN Client: Neither spark.yarn.jars nor spark.yarn.archive is set, falling back to uploading libraries under SPARK_HOME.\nWelcome to\n      ____              __\n     / __/__  ___ _____/ /__\n    _\\ \\/ _ \\/ _ `/ __/  '_/\n   /__ / .__/\\_,_/_/ /_/\\_\\   version 2.0.0\n      /_/\n\nUsing Python version 3.4.3 (default, Jul 20 2016 21:31:36)\nSparkSession available as 'spark'.\n\n\u3053\u308c\u3067Python3.4\u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\nPYTHONHASHESEED\u306e\u8a2d\u5b9a\nPython2\u7cfb\u3092\u4f7f\u3063\u3066\u3044\u308b\u6642\u306b\u306f\u554f\u984c\u306a\u3044\u306e\u3067\u3059\u304c3\u7cfb\u3067groupby\u3092\u884c\u304a\u3046\u3068\u3057\u305f\u3068\u3053\u308d\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\nhttp://stackoverflow.com/questions/36798833/what-does-exception-randomness-of-hash-of-string-should-be-disabled-via-pythonh\n\u3053\u308c\u3092\u56de\u907f\u3059\u308b\u306b\u306fPYTHONHASHSEED\u306e\u74b0\u5883\u5909\u6570\u3092\u30bb\u30c3\u30c8\u3057\u3066\u3042\u3052\u308c\u3070\u826f\u3044\u306e\u3067\u3059\u304c\u3001EMR\u306e\u5834\u5408\u306f/usr/lib/spark/conf/spark-defaults.conf\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8ffd\u8a18\u3059\u308b\u3053\u3068\u3067\u30bb\u30c3\u30c8\u3067\u304d\u307e\u3059\u3002\nspark.executorEnv.PYTHONHASHSEED  0\n\n\n\u53c2\u8003\nhttps://blogs.aws.amazon.com/bigdata/post/Tx2SEE3WKIQ8GNX/Using-Python-3-4-on-EMR-Spark-Applications\n\n# EMR\u3067\u306epython3\u7cfb\u306e\u4f7f\u3044\u65b9\n\nEMR\u3067pyspark\u3092\u4f7f\u304a\u3046\u3068\u3059\u308b\u3068\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f2\u7cfb\u304c\u4f7f\u308f\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u30023\u7cfb\u3092\u3069\u3046\u305b\u306a\u3089\u4f7f\u3044\u305f\u3044\u306e\u3067\u4f7f\u3044\u65b9\u3092\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u73fe\u6642\u70b9\u3067\u6700\u65b0\u306eEMR\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f 5.0.0\u3067Spark\u306f2.0.0\u304c\u5165\u3063\u3066\u3044\u307e\u3059\u3002\u307e\u305fPython\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f2.7.10\u304c\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\n$ pyspark\nPython 2.7.10 (default, Jul 20 2016, 20:53:27)\n[GCC 4.8.3 20140911 (Red Hat 4.8.3-9)] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\nSetting default log level to \"WARN\".\nTo adjust logging level use sc.setLogLevel(newLevel).\n16/09/15 02:15:05 WARN Client: Neither spark.yarn.jars nor spark.yarn.archive is set, falling back to uploading libraries under SPARK_HOME.\nWelcome to\n      ____              __\n     / __/__  ___ _____/ /__\n    _\\ \\/ _ \\/ _ `/ __/  '_/\n   /__ / .__/\\_,_/_/ /_/\\_\\   version 2.0.0\n      /_/\n\nUsing Python version 2.7.10 (default, Jul 20 2016 20:53:27)\nSparkSession available as 'spark'.\n```\n\nPython3\u7cfb\u3092\u4f7f\u3046\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u308f\u305f\u3057\u3066EMR\u3092\u8d77\u52d5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-15 11.14.26.png](https://qiita-image-store.s3.amazonaws.com/0/10236/d3e03a77-0e33-02f9-443c-a681955586cf.png)\n\n\n\n```\n[\n    {\n        \"Classification\": \"spark-env\",\n        \"Properties\": {},\n        \"Configurations\": [\n            {\n                \"Classification\": \"export\",\n                \"Properties\": {\n                    \"PYSPARK_PYTHON\": \"python34\"\n                },\n                \"Configurations\": []\n            }\n        ]\n    }\n]\n```\n\n```\n$ pyspark\nPython 3.4.3 (default, Jul 20 2016, 21:31:36)\n[GCC 4.8.3 20140911 (Red Hat 4.8.3-9)] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\nSetting default log level to \"WARN\".\nTo adjust logging level use sc.setLogLevel(newLevel).\n16/09/15 02:19:11 WARN Client: Neither spark.yarn.jars nor spark.yarn.archive is set, falling back to uploading libraries under SPARK_HOME.\nWelcome to\n      ____              __\n     / __/__  ___ _____/ /__\n    _\\ \\/ _ \\/ _ `/ __/  '_/\n   /__ / .__/\\_,_/_/ /_/\\_\\   version 2.0.0\n      /_/\n\nUsing Python version 3.4.3 (default, Jul 20 2016 21:31:36)\nSparkSession available as 'spark'.\n```\n\n\u3053\u308c\u3067Python3.4\u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n## PYTHONHASHESEED\u306e\u8a2d\u5b9a\n\nPython2\u7cfb\u3092\u4f7f\u3063\u3066\u3044\u308b\u6642\u306b\u306f\u554f\u984c\u306a\u3044\u306e\u3067\u3059\u304c3\u7cfb\u3067groupby\u3092\u884c\u304a\u3046\u3068\u3057\u305f\u3068\u3053\u308d\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\nhttp://stackoverflow.com/questions/36798833/what-does-exception-randomness-of-hash-of-string-should-be-disabled-via-pythonh\n\n\u3053\u308c\u3092\u56de\u907f\u3059\u308b\u306b\u306fPYTHONHASHSEED\u306e\u74b0\u5883\u5909\u6570\u3092\u30bb\u30c3\u30c8\u3057\u3066\u3042\u3052\u308c\u3070\u826f\u3044\u306e\u3067\u3059\u304c\u3001EMR\u306e\u5834\u5408\u306f`/usr/lib/spark/conf/spark-defaults.conf`\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8ffd\u8a18\u3059\u308b\u3053\u3068\u3067\u30bb\u30c3\u30c8\u3067\u304d\u307e\u3059\u3002\n\n```\nspark.executorEnv.PYTHONHASHSEED  0\n```\n\n# \u53c2\u8003\n\nhttps://blogs.aws.amazon.com/bigdata/post/Tx2SEE3WKIQ8GNX/Using-Python-3-4-on-EMR-Spark-Applications\n", "tags": ["EMR", "Spark"]}