{"context": " More than 1 year has passed since last update.\n\nPlugin \u30af\u30e9\u30b9\nPlugin \u306f EventManager \u306a\u3069\u306b attach() \u3055\u305b\u3066\u51e6\u7406\u3092\u57cb\u3081\u8fbc\u3080\u611f\u3058\u3067\u4f7f\u3046\u3089\u3057\u3044\uff0e\n\u4e0b\u8a18\u306e\u3082\u306e\u306f\u4f8b\uff0e\u5b9f\u9a13\u3057\u305f\u9650\u308a\u3060\u3068 attach() \u3057\u305f\u9806\u756a\u3067\u547c\u3070\u308c\u308b\u306e\u3067\uff0c\u30a2\u30af\u30b7\u30e7\u30f3\u304c\u5b9f\u884c\u3055\u308c\u308b\u524d\uff0c\u3042\u308b\u3044\u306f\u3055\u308c\u305f\u5f8c\u306e\u30d5\u30a3\u30eb\u30bf\u3068\u3057\u3066\u4f7f\u3048\u308b\uff1f\uff08javax.servlet.Filter \u3084  Play2 \u306e play.mvc.api.Filter\uff0c Rails \u306e\u30d5\u30a3\u30eb\u30bf \u306e\u3088\u3046\u306a\uff09\n\u30b5\u30f3\u30d7\u30eb\u304b\u3089\u3053\u3046\u4f7f\u3046\u3093\u3060\u308d\u3046\u306a\u3041\u3068\u3044\u3046\u63a8\u6e2c\u3067\u3084\u3063\u305f\u3088\u3046\u306a\u611f\u3058\uff0e\n<?php\n\nnamespace Timeline\\Frontend;\n\nuse Phalcon\\Loader;\nuse Phalcon\\Mvc\\Dispatcher;\nuse Phalcon\\Mvc\\ModuleDefinitionInterface;\nuse Timeline\\Frontend\\Plugins\\Header;\n\nclass Module implements ModuleDefinitionInterface\n{\n    public function registerAutoloaders()\n    {\n        $loader = new Loader();\n        $loader->registerNamespaces(array(\n            'Timeline\\Frontend\\Plugins' => __DIR__.'/plugins/',\n        ));\n        $loader->register();\n    }\n\n    public function registerServices($di)\n        $di['dispatcher'] = function() use ($di) {\n            $eventsManager = $di->getShared('eventsManager');\n            $eventsManager->attach('dispatch', new Header($di));\n\n            $dispatcher =  new Dispatcher();\n            $dispatcher->setEventsManager($eventsManager);\n\n            return $dispatcher;\n        };\n    }\n}\n\n<?php\n\nnamespace Timeline\\Frontend\\Plugins;\n\nuse Phalcon\\Events\\Event;\nuse Phalcon\\Mvc\\Dispatcher;\nuse Phalcon\\Mvc\\User\\Plugin;\n\nclass Header extends Plugin\n{\n    public function beforeDispatch(Event $event, Dispatcher $dispatcher)\n    {\n        $this->response->setHeader('X-Frame-Options', 'SAMEORIGIN');\n        $this->response->setHeader('X-Content-Type-Options', 'nosniff');\n    }\n\n}\n\nHeader \u304c\u3061\u3083\u3093\u3068\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u308b\u304b\u306e\u78ba\u8a8d\uff0e\n$ curl -s -I http://localhost/ | egrep \"X-Frame-Options|X-Content-Type-Options\"\nX-Frame-Options: SAMEORIGIN\nX-Content-Type-Options: nosniff\n\n\n\u53c2\u8003\u6587\u732e\nPlugin \u3068 Component \u306f\u3069\u3046\u9055\u3046\u306e\uff1f\n\nPlugin vs Component: what's the difference? - Discussion - Phalcon Framework\nhttp://forum.phalconphp.com/discussion/383/plugin-vs-component-what-s-the-difference-\n\n\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u3063\u305f\u4f8b\n\n\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb 2: INVO\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059 \u2014 Phalcon 1.3.1 documentation\nhttp://docs.phalconphp.com/ja/latest/reference/tutorial-invo.html\n\n\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u3057\u3066\u5b9f\u88c5\u3059\u308b\u5834\u5408\u306e\u4f8b\uff08ACL \u3092\u4f7f\u3046\uff09\n\nPHP - Implementing an API ACL in Phalcon\nhttp://www.rogerethomas.com/blog/php-implementing-an-api-acl-in-phalcon\n\n\u7d1b\u3089\u308f\u3057\u3044\u8a18\u8ff0\u3060\u3051\u3069\u6614\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b \"should not\" \u3068\u66f8\u304b\u308c\u3066\u3044\u305f\u3089\u3057\u3044\uff0e\u4eca\u306f\u6c17\u306b\u3057\u306a\u304f\u3066\u826f\u3044\u69d8\u5b50\uff0e\n\nWHY Plugins should not extend the class Phalcon\\Mvc\\User\\Plugin? - Discussion - Phalcon Framework\nhttp://forum.phalconphp.com/discussion/49/why-plugins-should-not-extend-the-class-phalcon-mvc-user-plugin-\n\n\u4e0a\u8a18\u306e\u4fee\u6b63\u306b\u5bfe\u3059\u308b\u30b3\u30df\u30c3\u30c8\u3060\u3068\u601d\u3046\uff0e\n\nRe-adding 1.0.0 \u00b7 94eb834 \u00b7 phalcon/docs\nhttps://github.com/phalcon/docs/commit/94eb8342acfa895224754dc3f9d746a9fc36beb0#diff-13\n\n# Plugin \u30af\u30e9\u30b9\n\nPlugin \u306f EventManager \u306a\u3069\u306b `attach()` \u3055\u305b\u3066\u51e6\u7406\u3092\u57cb\u3081\u8fbc\u3080\u611f\u3058\u3067\u4f7f\u3046\u3089\u3057\u3044\uff0e\n\n\u4e0b\u8a18\u306e\u3082\u306e\u306f\u4f8b\uff0e\u5b9f\u9a13\u3057\u305f\u9650\u308a\u3060\u3068 `attach()` \u3057\u305f\u9806\u756a\u3067\u547c\u3070\u308c\u308b\u306e\u3067\uff0c\u30a2\u30af\u30b7\u30e7\u30f3\u304c\u5b9f\u884c\u3055\u308c\u308b\u524d\uff0c\u3042\u308b\u3044\u306f\u3055\u308c\u305f\u5f8c\u306e\u30d5\u30a3\u30eb\u30bf\u3068\u3057\u3066\u4f7f\u3048\u308b\uff1f\uff08[javax.servlet.Filter](http://docs.oracle.com/javaee/7/api/javax/servlet/Filter.html) \u3084  [Play2 \u306e play.mvc.api.Filter](http://www.playframework.com/documentation/2.1.4/api/scala/index.html#play.api.mvc.Filter)\uff0c [Rails \u306e\u30d5\u30a3\u30eb\u30bf](http://railsdoc.com/references/filter) \u306e\u3088\u3046\u306a\uff09\n\u30b5\u30f3\u30d7\u30eb\u304b\u3089\u3053\u3046\u4f7f\u3046\u3093\u3060\u308d\u3046\u306a\u3041\u3068\u3044\u3046\u63a8\u6e2c\u3067\u3084\u3063\u305f\u3088\u3046\u306a\u611f\u3058\uff0e\n\n```php\n<?php\n\nnamespace Timeline\\Frontend;\n\nuse Phalcon\\Loader;\nuse Phalcon\\Mvc\\Dispatcher;\nuse Phalcon\\Mvc\\ModuleDefinitionInterface;\nuse Timeline\\Frontend\\Plugins\\Header;\n\nclass Module implements ModuleDefinitionInterface\n{\n    public function registerAutoloaders()\n    {\n        $loader = new Loader();\n        $loader->registerNamespaces(array(\n            'Timeline\\Frontend\\Plugins' => __DIR__.'/plugins/',\n        ));\n        $loader->register();\n    }\n\n    public function registerServices($di)\n        $di['dispatcher'] = function() use ($di) {\n            $eventsManager = $di->getShared('eventsManager');\n            $eventsManager->attach('dispatch', new Header($di));\n\n            $dispatcher =  new Dispatcher();\n            $dispatcher->setEventsManager($eventsManager);\n\n            return $dispatcher;\n        };\n    }\n}\n```\n\n```php\n<?php\n\nnamespace Timeline\\Frontend\\Plugins;\n\nuse Phalcon\\Events\\Event;\nuse Phalcon\\Mvc\\Dispatcher;\nuse Phalcon\\Mvc\\User\\Plugin;\n\nclass Header extends Plugin\n{\n    public function beforeDispatch(Event $event, Dispatcher $dispatcher)\n    {\n        $this->response->setHeader('X-Frame-Options', 'SAMEORIGIN');\n        $this->response->setHeader('X-Content-Type-Options', 'nosniff');\n    }\n\n}\n```\n\nHeader \u304c\u3061\u3083\u3093\u3068\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u308b\u304b\u306e\u78ba\u8a8d\uff0e\n\n```bash\n$ curl -s -I http://localhost/ | egrep \"X-Frame-Options|X-Content-Type-Options\"\nX-Frame-Options: SAMEORIGIN\nX-Content-Type-Options: nosniff\n```\n\n# \u53c2\u8003\u6587\u732e\n\nPlugin \u3068 Component \u306f\u3069\u3046\u9055\u3046\u306e\uff1f\n\n> Plugin vs Component: what's the difference? - Discussion - Phalcon Framework\n>\n> http://forum.phalconphp.com/discussion/383/plugin-vs-component-what-s-the-difference-\n\n\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u3063\u305f\u4f8b\n\n> \u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb 2: INVO\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059 \u2014 Phalcon 1.3.1 documentation\n>\n> http://docs.phalconphp.com/ja/latest/reference/tutorial-invo.html\n\n\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u3057\u3066\u5b9f\u88c5\u3059\u308b\u5834\u5408\u306e\u4f8b\uff08ACL \u3092\u4f7f\u3046\uff09\n\n> PHP - Implementing an API ACL in Phalcon\n>\n> http://www.rogerethomas.com/blog/php-implementing-an-api-acl-in-phalcon\n\n\u7d1b\u3089\u308f\u3057\u3044\u8a18\u8ff0\u3060\u3051\u3069\u6614\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b \"should not\" \u3068\u66f8\u304b\u308c\u3066\u3044\u305f\u3089\u3057\u3044\uff0e\u4eca\u306f\u6c17\u306b\u3057\u306a\u304f\u3066\u826f\u3044\u69d8\u5b50\uff0e\n\n> WHY Plugins should not extend the class Phalcon\\Mvc\\User\\Plugin? - Discussion - Phalcon Framework\n>\n> http://forum.phalconphp.com/discussion/49/why-plugins-should-not-extend-the-class-phalcon-mvc-user-plugin-\n\n\u4e0a\u8a18\u306e\u4fee\u6b63\u306b\u5bfe\u3059\u308b\u30b3\u30df\u30c3\u30c8\u3060\u3068\u601d\u3046\uff0e\n\n> Re-adding 1.0.0 \u00b7 94eb834 \u00b7 phalcon/docs\n>\n> https://github.com/phalcon/docs/commit/94eb8342acfa895224754dc3f9d746a9fc36beb0#diff-13\n", "tags": ["Phalcon1.3.1"]}