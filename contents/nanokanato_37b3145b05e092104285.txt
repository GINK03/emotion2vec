{"tags": ["Unity", "OpenCVforUnity", "OpenCV", "C#"], "context": "\u3053\u306e\u30da\u30fc\u30b8\u3067\u306fOpenCV\u3092Unity\u3067\u6271\u3046\u305f\u3081\u306eAsset\u300cOpenCV for Unity\u300d\u3092\u5229\u7528\u3057\u305fOpenCV\u306e\u6a5f\u80fd\u3067\u30ed\u30fc\u30ab\u30eb\u753b\u50cf\u3092\u8aad\u307f\u8fbc\u307f\u3001\u753b\u9762\u306b\u51fa\u529b\u3059\u308b\u307e\u3067\u306e\u624b\u9806\u3092\u30e1\u30e2\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u3061\u3089\u306fUnity5.4.1\u3067\u4f5c\u696d\u3057\u307e\u3057\u305f\u3002\n\u203b\u4fee\u6b63\u70b9\u3001\u6539\u5584\u70b9\u3042\u308a\u307e\u3057\u305f\u3089\u30b3\u30e1\u30f3\u30c8\u307e\u305f\u306f\u7de8\u96c6\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n\u958b\u767a\u6e96\u5099\n\n\u8aad\u307f\u8fbc\u3080\u305f\u3081\u306e\u753b\u50cf\u3092\u7528\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n\u7528\u610f\u3057\u305f\u753b\u50cf\u306f Assets/Resources/LoadImage/\u306b\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u4eca\u56de\u306fcat.jpg\u3068\u3044\u3046\u540d\u524d\u3067\u53ef\u611b\u3044\u732b\u306e\u753b\u50cf\u3092\u7528\u610f\u3057\u307e\u3057\u305f\u3002\n\n\n\u958b\u767a\u3092\u884c\u3046\u305f\u3081\u306bAsset\u3092Import\u3057\u3066\u304f\u3060\u3055\u3044\u3002OpenCVForUnity\u3092Import\u3059\u308b\u307e\u3067\n\n\n\nScript\u306e\u8ffd\u52a0\n\u753b\u50cf\u8aad\u307f\u8fbc\u307f\u306b\u306fImgcodecs.imread(\"\");\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306f\u305d\u306eScript\u3067\u3059\u3002\n\nLoadImageScript.cs\nusing UnityEngine;\nusing System.Collections;\nusing UnityEngine.UI;\nusing OpenCVForUnity;\n\npublic class LoadImageScript : MonoBehaviour {\n\n    public RawImage rawImage;\n\n    private Mat originMat;\n    private Texture2D texture;\n    private Color32[] color;\n\n    // Use this for initialization\n    void Start () {\n        if (rawImage) {\n            //Mat\u753b\u50cf\u3092Path\u304b\u3089\u8aad\u307f\u8fbc\u307f\n            originMat = Imgcodecs.imread (Application.dataPath + \"/Resources/LoadImage/cat.jpg\");\n            if (originMat != null) {\n                if (!originMat.empty ()) {\n                    //Color32\u306e\u4f5c\u6210\n                    color = new Color32[originMat.cols () * originMat.rows ()];\n                    if (color != null) {\n                        //Texture2D\u3092\u4f5c\u6210\n                        texture = new Texture2D (originMat.cols (), originMat.rows ());\n                        //\u63cf\u753b\u3059\u308bRawImage\u306bTexture2D\u3092\u8a2d\u5b9a\n                        rawImage.texture = texture;\n                    }\n                }\n            }\n        } else {\n            Debug.LogError(\"NotFound:rawImage\");\n        }\n    }\n\n    // Update is called once per frame\n    void Update () {\n        if (originMat != null) {\n            if (!originMat.empty ()) {\n                if (color != null) {\n                    if (texture != null) {\n\n                        /* \u753b\u50cf\u52a0\u5de5\u958b\u59cb */\n\n\n\n                        /* \u753b\u50cf\u52a0\u5de5\u7d42\u4e86 */\n\n                        //Mat\u306e\u7de8\u96c6\u5185\u5bb9\u3092Texture2D\u306b\u53cd\u6620\n                        Utils.matToTexture2D (originMat, texture, color);\n                    }\n                }\n            }\n        }\n    }\n}\n\n\n\nGameObject\u306e\u8a2d\u5b9a\nLoadImageScript.cs\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\nHierarchy\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\nUI.RawImage\u3092\u8ffd\u52a0\u3057\u3066\u30ab\u30e1\u30e9\u306a\u3069\u3092\u8abf\u7bc0\u3057\u305f\u3060\u3051\u3067\u3059\u3002\n\n\u4f5c\u6210\u3057\u305fRawImage\u306bLoadImageScript.cs\u306eComponent\u3092\u8ffd\u52a0\u3057\u3066\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u306eRawImage\u306b\u81ea\u8eab\u3092\u767b\u9332\u3002\n\n\n\u5b9f\u884c\u3057\u3066\u307f\u308b\n\u5185\u90e8\u3067Texture \u2192 Mat \u2192 Texture2D\u306b\u5909\u63db\u3055\u308c\u3066\u3044\u308b\u306e\u3067Mat\u306e\u90e8\u5206\u3067OpenCV\u3067\u306e\u52a0\u5de5\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\n\u4e00\u5fdc\u3001\u53ef\u611b\u3044\u732b\u304c\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n\u3051\u3069\u306a\u3093\u304b\u9752\u3063\u307d\u3044\u6c17\u304c...\n\n\u3084\u306f\u308a\u3001\u5143\u753b\u50cf\u3088\u308a\u9752\u3063\u307d\u304f\u306a\u308a\u5bd2\u305d\u3046\u306a\u732b\u306b...\uff08\u5de6\uff1a\u5143\u753b\u50cf\uff09\n \n\u753b\u50cf\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u308bTexture2D\u306b\u5909\u3048\u3066\u3044\u308bmatToTexture2D(Mat, Texture2D, Color32);\u30e1\u30bd\u30c3\u30c9\u306e\u5225\u306e\u65b9\u6cd5\u3001matToTexture2D(Mat, Texture2D);\u306b\u3057\u3066\u3082\u540c\u3058\u9752\u3063\u307d\u3044\u3082\u306e\u304c\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n\u8aad\u307f\u8fbc\u307f\u90e8\u5206\u306eImgcodecs.imread(\"\");\u306e\u6642\u70b9\u3067\u9752\u304f\u306a\u3063\u3066\u3044\u308b\u3082\u306e\u3068\u601d\u3044\u307e\u3059\u3002\nJpeg\u304c\u975e\u5bfe\u5fdc\u306a\u308f\u3051\u306a\u3044\u3088\u306a\u3041\u3068\u601d\u3044\u306a\u304c\u3089png\u306e\u732b\u3092\u8ffd\u52a0\u3057\u305f\u3002\n\u5de6\u304c\u5143\u753b\u50cf\u306e\u3059\u3084\u3059\u3084\u732b.png\u3067\u53f3\u304cMat\u3067\u51fa\u529b\u3057\u305f\u51cd\u3048\u308b\u732b.png\n \nimread(string,int)\u306e\u7b2c\u4e8c\u5f15\u6570\u3092\u4f7f\u3063\u3066IMREAD_GRAYSCALE1\u3092\u5165\u308c\u3066\u307f\u308b\u3068\u767d\u9ed2\u306b\u306a\u3063\u3066\u60b2\u3057\u305d\u3046\u306a\u732b\u306b...\u305d\u3046\u3058\u3083\u306a\u3044\u3002\n\u3053\u3053\u306b\u7b54\u3048\u304c\u3042\u308b\u3068\u3044\u3046\u5e0c\u671b\u3092\u6301\u3061\u305f\u3044\u3002\n < \u52a9\u3051\u3066\n\u8272\u304c\u304a\u304b\u3057\u3044\uff01\uff01\nQiita\u306b\u306f\u77e5\u8b58\u4eba\u3084\u8ce2\u8005\u304c\u591a\u3044\u3067\u3059\u306e\u3067\u304a\u52a9\u3051\u3044\u305f\u3060\u304d\u305f\u3044\u3067\u3059\u3002\uff08\u5909\u8272\u3059\u308b\u4ef6\u306b\u95a2\u3057\u3066\u306f\u73fe\u5728\u79c1\u306e\u307b\u3046\u3067\u691c\u8a3c\u4e2d\u3067\u3059\u3002\uff09\n\n\n\n\n\n\u4ed6\u306b\u3082\u5f15\u6570\u306f\u4ee5\u4e0b\u304c\u3042\u308b\u3002IMREAD_UNCHANGED\uff1a\u4e0d\u660eIMREAD_GRAYSCALE\uff1a\u30b0\u30ec\u30fc\u30b9\u30b1\u30fc\u30ebIMREAD_COLOR\uff1a\u30c7\u30d5\u30a9\u30eb\u30c8\uff08\u9752\u3063\u307d\u3044\u3084\u3064\uff09IMREAD_ANYDEPTH\uff1a\u4e0d\u660eIMREAD_ANYCOLOR\uff1a\u4e0d\u660eIMREAD_LOAD_GDAL\uff1a\u4e0d\u660eIMREAD_REDUCED_GRAYSCALE_2\uff1a\u4e0d\u660eIMREAD_REDUCED_COLOR_2\uff1a\u4e0d\u660eIMREAD_REDUCED_GRAYSCALE_4\uff1a\u4e0d\u660eIMREAD_REDUCED_COLOR_4\uff1a\u4e0d\u660eIMREAD_REDUCED_GRAYSCALE_8\uff1a\u4e0d\u660eIMREAD_REDUCED_COLOR_8\uff1a\u4e0d\u660e\u00a0\u21a9\n\n\n\n\u3053\u306e\u30da\u30fc\u30b8\u3067\u306fOpenCV\u3092Unity\u3067\u6271\u3046\u305f\u3081\u306eAsset\u300c[OpenCV for Unity](http://u3d.as/915)\u300d\u3092\u5229\u7528\u3057\u305fOpenCV\u306e\u6a5f\u80fd\u3067\u30ed\u30fc\u30ab\u30eb\u753b\u50cf\u3092\u8aad\u307f\u8fbc\u307f\u3001\u753b\u9762\u306b\u51fa\u529b\u3059\u308b\u307e\u3067\u306e\u624b\u9806\u3092\u30e1\u30e2\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u3061\u3089\u306fUnity5.4.1\u3067\u4f5c\u696d\u3057\u307e\u3057\u305f\u3002\n\n\u203b\u4fee\u6b63\u70b9\u3001\u6539\u5584\u70b9\u3042\u308a\u307e\u3057\u305f\u3089\u30b3\u30e1\u30f3\u30c8\u307e\u305f\u306f\u7de8\u96c6\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n#\u958b\u767a\u6e96\u5099\n- \u8aad\u307f\u8fbc\u3080\u305f\u3081\u306e\u753b\u50cf\u3092\u7528\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n    - \u7528\u610f\u3057\u305f\u753b\u50cf\u306f `Assets/Resources/LoadImage/`\u306b\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002<br>\u4eca\u56de\u306fcat.jpg\u3068\u3044\u3046\u540d\u524d\u3067\u53ef\u611b\u3044\u732b\u306e\u753b\u50cf\u3092\u7528\u610f\u3057\u307e\u3057\u305f\u3002\n- \u958b\u767a\u3092\u884c\u3046\u305f\u3081\u306bAsset\u3092Import\u3057\u3066\u304f\u3060\u3055\u3044\u3002<br>[OpenCVForUnity\u3092Import\u3059\u308b\u307e\u3067](http://qiita.com/nanokanato/items/acc7fa6927b5a71755c1)\n\n#Script\u306e\u8ffd\u52a0\n\u753b\u50cf\u8aad\u307f\u8fbc\u307f\u306b\u306f`Imgcodecs.imread(\"\");`\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306f\u305d\u306eScript\u3067\u3059\u3002\n\n```csharp:LoadImageScript.cs\nusing UnityEngine;\nusing System.Collections;\nusing UnityEngine.UI;\nusing OpenCVForUnity;\n\npublic class LoadImageScript : MonoBehaviour {\n\n\tpublic RawImage rawImage;\n\n\tprivate Mat originMat;\n\tprivate Texture2D texture;\n\tprivate Color32[] color;\n\n\t// Use this for initialization\n\tvoid Start () {\n\t\tif (rawImage) {\n\t\t\t//Mat\u753b\u50cf\u3092Path\u304b\u3089\u8aad\u307f\u8fbc\u307f\n\t\t\toriginMat = Imgcodecs.imread (Application.dataPath + \"/Resources/LoadImage/cat.jpg\");\n\t\t\tif (originMat != null) {\n\t\t\t\tif (!originMat.empty ()) {\n\t\t\t\t\t//Color32\u306e\u4f5c\u6210\n\t\t\t\t\tcolor = new Color32[originMat.cols () * originMat.rows ()];\n\t\t\t\t\tif (color != null) {\n\t\t\t\t\t\t//Texture2D\u3092\u4f5c\u6210\n\t\t\t\t\t\ttexture = new Texture2D (originMat.cols (), originMat.rows ());\n\t\t\t\t\t\t//\u63cf\u753b\u3059\u308bRawImage\u306bTexture2D\u3092\u8a2d\u5b9a\n\t\t\t\t\t\trawImage.texture = texture;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tDebug.LogError(\"NotFound:rawImage\");\n\t\t}\n\t}\n\t\n\t// Update is called once per frame\n\tvoid Update () {\n\t\tif (originMat != null) {\n\t\t\tif (!originMat.empty ()) {\n\t\t\t\tif (color != null) {\n\t\t\t\t\tif (texture != null) {\n\n\t\t\t\t\t\t/* \u753b\u50cf\u52a0\u5de5\u958b\u59cb */\n\n\n\n\t\t\t\t\t\t/* \u753b\u50cf\u52a0\u5de5\u7d42\u4e86 */\n\n\t\t\t\t\t\t//Mat\u306e\u7de8\u96c6\u5185\u5bb9\u3092Texture2D\u306b\u53cd\u6620\n\t\t\t\t\t\tUtils.matToTexture2D (originMat, texture, color);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n#GameObject\u306e\u8a2d\u5b9a\nLoadImageScript.cs\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nHierarchy\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\nUI.RawImage\u3092\u8ffd\u52a0\u3057\u3066\u30ab\u30e1\u30e9\u306a\u3069\u3092\u8abf\u7bc0\u3057\u305f\u3060\u3051\u3067\u3059\u3002\n<img width=\"235\" alt=\"Hierarchy\" src=\"https://qiita-image-store.s3.amazonaws.com/0/82938/2665ef14-288c-ec09-ca00-b71ed1b5f3b3.png\">\n\n\u4f5c\u6210\u3057\u305fRawImage\u306bLoadImageScript.cs\u306eComponent\u3092\u8ffd\u52a0\u3057\u3066\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u306eRawImage\u306b\u81ea\u8eab\u3092\u767b\u9332\u3002\n<img width=\"340\" alt=\"Inspector\" src=\"https://qiita-image-store.s3.amazonaws.com/0/82938/d195eec9-2062-9cdd-c3a3-b210120afe35.png\">\n\n#\u5b9f\u884c\u3057\u3066\u307f\u308b\n\u5185\u90e8\u3067Texture \u2192 Mat \u2192 Texture2D\u306b\u5909\u63db\u3055\u308c\u3066\u3044\u308b\u306e\u3067Mat\u306e\u90e8\u5206\u3067OpenCV\u3067\u306e\u52a0\u5de5\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u4e00\u5fdc\u3001\u53ef\u611b\u3044\u732b\u304c\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n\u3051\u3069\u306a\u3093\u304b\u9752\u3063\u307d\u3044\u6c17\u304c...\n<img width=\"230\" alt=\"Game\" src=\"https://qiita-image-store.s3.amazonaws.com/0/82938/96b99ab2-7c92-9a66-d167-f1f830737982.png\">\n\n\u3084\u306f\u308a\u3001\u5143\u753b\u50cf\u3088\u308a\u9752\u3063\u307d\u304f\u306a\u308a\u5bd2\u305d\u3046\u306a\u732b\u306b...\uff08\u5de6\uff1a\u5143\u753b\u50cf\uff09\n<img width=\"160\" alt=\"\u5143\u753b\u50cf\" src=\"https://qiita-image-store.s3.amazonaws.com/0/82938/74e80d77-dbce-e3aa-02e2-7c1fd04bf886.jpeg\"> <img width=\"160\" alt=\"Mat\u51fa\u529b\" src=\"https://qiita-image-store.s3.amazonaws.com/0/82938/481879f5-1998-b786-b490-fc05eb72c76a.png\">\n\n\u753b\u50cf\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u308bTexture2D\u306b\u5909\u3048\u3066\u3044\u308b`matToTexture2D(Mat, Texture2D, Color32);`\u30e1\u30bd\u30c3\u30c9\u306e\u5225\u306e\u65b9\u6cd5\u3001`matToTexture2D(Mat, Texture2D);`\u306b\u3057\u3066\u3082\u540c\u3058\u9752\u3063\u307d\u3044\u3082\u306e\u304c\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n\u8aad\u307f\u8fbc\u307f\u90e8\u5206\u306e`Imgcodecs.imread(\"\");`\u306e\u6642\u70b9\u3067\u9752\u304f\u306a\u3063\u3066\u3044\u308b\u3082\u306e\u3068\u601d\u3044\u307e\u3059\u3002\n\nJpeg\u304c\u975e\u5bfe\u5fdc\u306a\u308f\u3051\u306a\u3044\u3088\u306a\u3041\u3068\u601d\u3044\u306a\u304c\u3089png\u306e\u732b\u3092\u8ffd\u52a0\u3057\u305f\u3002\n\u5de6\u304c\u5143\u753b\u50cf\u306e\u3059\u3084\u3059\u3084\u732b.png\u3067\u53f3\u304cMat\u3067\u51fa\u529b\u3057\u305f\u51cd\u3048\u308b\u732b.png\n<img width=\"160\" alt=\"\u5143\u753b\u50cf\" src=\"https://qiita-image-store.s3.amazonaws.com/0/82938/3c660368-695a-b5e6-f217-add1beb674f0.png\"> <img width=\"160\" alt=\"Mat\u51fa\u529b\" src=\"https://qiita-image-store.s3.amazonaws.com/0/82938/7c3a7c79-e847-f5f5-958f-307299c56eaa.png\">\n\n`imread(string,int)`\u306e\u7b2c\u4e8c\u5f15\u6570\u3092\u4f7f\u3063\u3066**IMREAD_GRAYSCALE**[^100]\u3092\u5165\u308c\u3066\u307f\u308b\u3068\u767d\u9ed2\u306b\u306a\u3063\u3066\u60b2\u3057\u305d\u3046\u306a\u732b\u306b...\u305d\u3046\u3058\u3083\u306a\u3044\u3002\n\u3053\u3053\u306b\u7b54\u3048\u304c\u3042\u308b\u3068\u3044\u3046\u5e0c\u671b\u3092\u6301\u3061\u305f\u3044\u3002\n<img width=\"160\" alt=\"\u767d\u9ed2\" src=\"https://qiita-image-store.s3.amazonaws.com/0/82938/16119d38-72c9-f06a-4680-3bfe957507ef.png\"> < \u52a9\u3051\u3066\n\n**\u8272\u304c\u304a\u304b\u3057\u3044\uff01\uff01**\nQiita\u306b\u306f\u77e5\u8b58\u4eba\u3084\u8ce2\u8005\u304c\u591a\u3044\u3067\u3059\u306e\u3067\u304a\u52a9\u3051\u3044\u305f\u3060\u304d\u305f\u3044\u3067\u3059\u3002\uff08\u5909\u8272\u3059\u308b\u4ef6\u306b\u95a2\u3057\u3066\u306f\u73fe\u5728\u79c1\u306e\u307b\u3046\u3067\u691c\u8a3c\u4e2d\u3067\u3059\u3002\uff09\n\n---\n\n[^100]: \u4ed6\u306b\u3082\u5f15\u6570\u306f\u4ee5\u4e0b\u304c\u3042\u308b\u3002<br>IMREAD_UNCHANGED\uff1a\u4e0d\u660e<br>IMREAD_GRAYSCALE\uff1a\u30b0\u30ec\u30fc\u30b9\u30b1\u30fc\u30eb<br>IMREAD_COLOR\uff1a\u30c7\u30d5\u30a9\u30eb\u30c8\uff08\u9752\u3063\u307d\u3044\u3084\u3064\uff09<br>IMREAD_ANYDEPTH\uff1a\u4e0d\u660e<br>IMREAD_ANYCOLOR\uff1a\u4e0d\u660e<br>IMREAD_LOAD_GDAL\uff1a\u4e0d\u660e<br>IMREAD_REDUCED_GRAYSCALE_2\uff1a\u4e0d\u660e<br>IMREAD_REDUCED_COLOR_2\uff1a\u4e0d\u660e<br>IMREAD_REDUCED_GRAYSCALE_4\uff1a\u4e0d\u660e<br>IMREAD_REDUCED_COLOR_4\uff1a\u4e0d\u660e<br>IMREAD_REDUCED_GRAYSCALE_8\uff1a\u4e0d\u660e<br>IMREAD_REDUCED_COLOR_8\uff1a\u4e0d\u660e\n"}