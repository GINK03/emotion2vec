{"context": "\n\n\u6982\u8981\n1\u65e5 Redux \u3092\u89e6\u3063\u3066\u65e2\u5b58\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u66f8\u304d\u63db\u3048\u3066\u3044\u304d\u307e\u3057\u305f\u3002\u30b5\u30f3\u30d7\u30eb\u3084\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3044\u304d\u306a\u308a\u5b8c\u6210\u5f62\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306b\u3064\u3044\u3066\u8aac\u660e\u3059\u308b\u3082\u306e\u304c\u591a\u304f\u5206\u304b\u308a\u3065\u3089\u304b\u3063\u305f\u306e\u3067\u3001\u5fd8\u5099\u9332\u3068\u3057\u3066\u3053\u3053\u306b\u307e\u3068\u3081\u307e\u3059\u3002\n\u30b9\u30c6\u30c3\u30d7\u30d0\u30a4\u30b9\u30c6\u30c3\u30d7\u3067\u5358\u7d14\u306a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304b\u3089 Redux \u3067\u975e\u540c\u671f\u51e6\u7406\u3092\u884c\u3046\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\nRedux \u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3084 store \u306e\u4f5c\u308a\u65b9\u306a\u3069\u306f\u89e6\u308c\u307e\u305b\u3093\u3002\n\n1. Stateless Component \u3092\u4f5c\u308b\n\u56fa\u5b9a\u306e\u60c5\u5831\u3092\u8868\u793a\u3059\u308b\u3060\u3051\u306e\u3082\u306e\u3092\u4f5c\u308a\u307e\u3059\n\nHelloComponent.js\nexport default function HelloComponent(props) {\n  return <p>Hello, {props.name}!</p>\n}\n\nHelloComponent.propTypes = {\n  PropTypes.string.isRequired\n}\n\n\n\n2. Redux \u3068\u63a5\u7d9a\u3059\u308b\n\u4e00\u679a\u5ca9 state \u304b\u3089\u5fc5\u8981\u306a\u60c5\u5831\u3092\u52a0\u5de5\u3057\u3066 props \u306b\u5909\u63db\u3059\u308b mapStateToProps \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nconnect() \u306b\u6e21\u3057\u3066 Redux \u3068\u63a5\u7d9a\u3055\u308c\u305f\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u4f5c\u308a\u307e\u3059\u3002\n\nHelloComponent.js\nfunction HelloComponent(props) {\n  return <p>Hello, {props.name}!</p>\n}\n\nHelloComponent.propTypes = {\n  PropTypes.string.isRequired\n}\n\n// \u30ed\u30b0\u30a4\u30f3\u6e08\u307f\u30e6\u30fc\u30b6\u30fc\u306e\u60c5\u5831 state.user \u304b\u3089\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u53d6\u308a\u51fa\u3057\u3066 props.name \u306b\u5909\u63db\u3059\u308b\nfunction mapStateToProps(state) {\n  return {\n    name: state.user && state.user.name\n  }\n}\n\nexport default connect(mapStateToProps)(HelloComponent)\n\n\n\n3. \u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\n\u62bc\u3057\u305f\u6642\u306b\u30ed\u30b0\u30a2\u30a6\u30c8\u3092\u884c\u3046\u30dc\u30bf\u30f3\u3092\u8ffd\u52a0\u3057\u307e\u3059\n\nAction \u3092\u4f5c\u6210\u3059\u308b\n\u30ed\u30b0\u30a2\u30a6\u30c8\u3059\u308b Action Creator \u3092\u4f5c\u308a\u307e\u3059\u3002\n\n\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u8b58\u5225\u3059\u308b type \u306e\u6587\u5b57\u5217\n\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u751f\u6210\u3059\u308b\u95a2\u6570 (Action Creator)\n\n\nactions.js\nexport const SET_USER = \"SET_USER\"\n\n// Action Creator\nexport function setUser(user) {\n  return {\n    type: SET_USER,\n    user: user\n  }\n}\n\n\nAction \u306f\u3053\u306e Action Creator \u304c\u8fd4\u3059\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u3053\u3068\u3067\u3059\n\nReducer \u3092\u4f5c\u6210\u3059\u308b\nSET_USER \u306b\u5bfe\u5fdc\u3059\u308b state \u306e\u9077\u79fb\u3092\u5b9f\u88c5\u3057\u307e\u3059\n\nreducers.js\nimport { combineReducers } from \"redux\"\nimport { SET_USER } from \"./actions\"\n\nfunction user(state = null, action) {\n  switch(action.type) {\n    case SET_USER:\n      return action.user\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({\n  user\n})\n\n\n\nComponent \u5074\u306e\u5909\u66f4\n\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u6642\u306b state.user \u3092 null \u306b\u3057\u3066\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u305f\u3053\u3068\u306b\u3057\u307e\u3059\u3002\nonClick \u306e\u3088\u3046\u306a\u30a4\u30d9\u30f3\u30c8\u304b\u3089\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u751f\u6210\u3059\u308b mapDispatchToProps \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nHelloComponent.js\nimport { setUser } from \"./actions\"\n\nfunction HelloComponent(props) {\n  return <div>\n    <p>Hello, {prop.name}!</p>\n    <button onClick={props.onClickLogout}>Logout</button>\n  </div>\n}\n\nHelloComponent.propTypes = {\n  PropTypes.string.isRequired\n}\n\nfunction mapStateToProps(state) {\n  return {\n    name: state.user && state.user.name\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    onClickLogout: () => { dispatch(setUser(null)) }\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HelloComponent)\n\n\n\n4. \u975e\u540c\u671f\u51e6\u7406\n\u4e00\u756a\u7c21\u5358\u3060\u3068\u601d\u3063\u305f redux-thunk \u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u306b\u3088\u308b\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\nAction \u306e\u5909\u66f4\n\u30ed\u30b0\u30a2\u30a6\u30c8 API \u3092\u53e9\u304d\u3001\u6210\u529f\u6642\u306b setUser() \u3067 null \u3092\u30bb\u30c3\u30c8\u3059\u308b\u975e\u540c\u671f Action \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u975e\u540c\u671f Action \u306f dispatch \u3092\u5f15\u6570\u306b\u3068\u308b\u95a2\u6570\u3092\u8fd4\u3059\u95a2\u6570\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002\n\u3053\u306e\u95a2\u6570\u306f redux-thunk \u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u304c\u5c0e\u5165\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\n\nactions.js\nexport const SET_USER = \"SET_USER\"\n\n// Action Creator\nexport function setUser(user) {\n  return {\n    type: SET_USER,\n    user: user\n  }\n}\n\nexport const logout = () = dispatch => {\n  exampleApi.logout(error => {\n    if (!error) {\n      dispatch(setUser(null))\n    }\n  })\n}\n\n\n\n\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u5909\u66f4\nsetUser(null) \u3092 logout() \u306b\u5909\u3048\u307e\u3059\u3002\n\nHelloComponent.js\nimport { logout } from \"./actions\"\n\nfunction HelloComponent(props) {\n  return <div>\n    <p>Hello, {prop.name}!</p>\n    <button onClick={props.onClickLogout}>Logout</button>\n  </div>\n}\n\nHelloComponent.propTypes = {\n  PropTypes.string.isRequired\n}\n\nfunction mapStateToProps(state) {\n  return {\n    name: state.user && state.user.name\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    onClickLogout: () => { dispatch(logout()) }\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HelloComponent)\n\n\n\n\u6240\u611f\nRedux \u3092\u59cb\u3081\u305f\u3070\u304b\u308a\u3067\u3059\u304c\u3001\u601d\u3063\u305f\u3088\u308a\u5730\u9053\u306b\u66f8\u304d\u63db\u3048\u308b\u4e8b\u304c\u3067\u304d\u3066\u3088\u304b\u3063\u305f\u3067\u3059\u3002\u975e\u540c\u671f\u51e6\u7406\u307e\u308f\u308a\u306f\u3044\u308d\u3093\u306a\u65b9\u6cd5\u304c\u3042\u308b\u305d\u3046\u306a\u306e\u3067\u3001\u898f\u6a21\u306b\u5408\u308f\u305b\u3066\u3044\u3044\u611f\u3058\u306e\u66f8\u304d\u65b9\u3092\u5b66\u3093\u3067\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n## \u6982\u8981\n\n1\u65e5 Redux \u3092\u89e6\u3063\u3066\u65e2\u5b58\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u66f8\u304d\u63db\u3048\u3066\u3044\u304d\u307e\u3057\u305f\u3002\u30b5\u30f3\u30d7\u30eb\u3084\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3044\u304d\u306a\u308a\u5b8c\u6210\u5f62\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306b\u3064\u3044\u3066\u8aac\u660e\u3059\u308b\u3082\u306e\u304c\u591a\u304f\u5206\u304b\u308a\u3065\u3089\u304b\u3063\u305f\u306e\u3067\u3001\u5fd8\u5099\u9332\u3068\u3057\u3066\u3053\u3053\u306b\u307e\u3068\u3081\u307e\u3059\u3002\n\n\u30b9\u30c6\u30c3\u30d7\u30d0\u30a4\u30b9\u30c6\u30c3\u30d7\u3067\u5358\u7d14\u306a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304b\u3089 Redux \u3067\u975e\u540c\u671f\u51e6\u7406\u3092\u884c\u3046\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\nRedux \u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3084 store \u306e\u4f5c\u308a\u65b9\u306a\u3069\u306f\u89e6\u308c\u307e\u305b\u3093\u3002\n\n## 1. Stateless Component \u3092\u4f5c\u308b\n\n\u56fa\u5b9a\u306e\u60c5\u5831\u3092\u8868\u793a\u3059\u308b\u3060\u3051\u306e\u3082\u306e\u3092\u4f5c\u308a\u307e\u3059\n\n```js:HelloComponent.js\nexport default function HelloComponent(props) {\n  return <p>Hello, {props.name}!</p>\n}\n\nHelloComponent.propTypes = {\n  PropTypes.string.isRequired\n}\n```\n\n## 2. Redux \u3068\u63a5\u7d9a\u3059\u308b\n\n\u4e00\u679a\u5ca9 state \u304b\u3089\u5fc5\u8981\u306a\u60c5\u5831\u3092\u52a0\u5de5\u3057\u3066 props \u306b\u5909\u63db\u3059\u308b `mapStateToProps` \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n`connect()` \u306b\u6e21\u3057\u3066 Redux \u3068\u63a5\u7d9a\u3055\u308c\u305f\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n```js:HelloComponent.js\nfunction HelloComponent(props) {\n  return <p>Hello, {props.name}!</p>\n}\n\nHelloComponent.propTypes = {\n  PropTypes.string.isRequired\n}\n\n// \u30ed\u30b0\u30a4\u30f3\u6e08\u307f\u30e6\u30fc\u30b6\u30fc\u306e\u60c5\u5831 state.user \u304b\u3089\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u53d6\u308a\u51fa\u3057\u3066 props.name \u306b\u5909\u63db\u3059\u308b\nfunction mapStateToProps(state) {\n  return {\n    name: state.user && state.user.name\n  }\n}\n\nexport default connect(mapStateToProps)(HelloComponent)\n```\n\n## 3. \u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\n\n\u62bc\u3057\u305f\u6642\u306b\u30ed\u30b0\u30a2\u30a6\u30c8\u3092\u884c\u3046\u30dc\u30bf\u30f3\u3092\u8ffd\u52a0\u3057\u307e\u3059\n\n### Action \u3092\u4f5c\u6210\u3059\u308b\n\n\u30ed\u30b0\u30a2\u30a6\u30c8\u3059\u308b Action Creator \u3092\u4f5c\u308a\u307e\u3059\u3002\n\n- \u30a2\u30af\u30b7\u30e7\u30f3\u3092\u8b58\u5225\u3059\u308b type \u306e\u6587\u5b57\u5217\n- \u30a2\u30af\u30b7\u30e7\u30f3\u3092\u751f\u6210\u3059\u308b\u95a2\u6570 (Action Creator)\n\n```js:actions.js\nexport const SET_USER = \"SET_USER\"\n\n// Action Creator\nexport function setUser(user) {\n  return {\n    type: SET_USER,\n    user: user\n  }\n}\n```\n\nAction \u306f\u3053\u306e Action Creator \u304c\u8fd4\u3059\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u3053\u3068\u3067\u3059\n\n### Reducer \u3092\u4f5c\u6210\u3059\u308b\n\nSET_USER \u306b\u5bfe\u5fdc\u3059\u308b state \u306e\u9077\u79fb\u3092\u5b9f\u88c5\u3057\u307e\u3059\n\n```js:reducers.js\nimport { combineReducers } from \"redux\"\nimport { SET_USER } from \"./actions\"\n\nfunction user(state = null, action) {\n  switch(action.type) {\n    case SET_USER:\n      return action.user\n    default:\n      return state\n  }\n}\n\nexport default combineReducers({\n  user\n})\n```\n\n### Component \u5074\u306e\u5909\u66f4\n\n\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u6642\u306b state.user \u3092 null \u306b\u3057\u3066\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u305f\u3053\u3068\u306b\u3057\u307e\u3059\u3002\nonClick \u306e\u3088\u3046\u306a\u30a4\u30d9\u30f3\u30c8\u304b\u3089\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u751f\u6210\u3059\u308b `mapDispatchToProps` \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```js:HelloComponent.js\nimport { setUser } from \"./actions\"\n\nfunction HelloComponent(props) {\n  return <div>\n    <p>Hello, {prop.name}!</p>\n    <button onClick={props.onClickLogout}>Logout</button>\n  </div>\n}\n\nHelloComponent.propTypes = {\n  PropTypes.string.isRequired\n}\n\nfunction mapStateToProps(state) {\n  return {\n    name: state.user && state.user.name\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    onClickLogout: () => { dispatch(setUser(null)) }\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HelloComponent)\n```\n\n## 4. \u975e\u540c\u671f\u51e6\u7406\n\n\u4e00\u756a\u7c21\u5358\u3060\u3068\u601d\u3063\u305f `redux-thunk` \u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u306b\u3088\u308b\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n### Action \u306e\u5909\u66f4\n\n\u30ed\u30b0\u30a2\u30a6\u30c8 API \u3092\u53e9\u304d\u3001\u6210\u529f\u6642\u306b setUser() \u3067 null \u3092\u30bb\u30c3\u30c8\u3059\u308b\u975e\u540c\u671f Action \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u975e\u540c\u671f Action \u306f dispatch \u3092\u5f15\u6570\u306b\u3068\u308b\u95a2\u6570\u3092\u8fd4\u3059\u95a2\u6570\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002\n\n\u3053\u306e\u95a2\u6570\u306f `redux-thunk` \u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u304c\u5c0e\u5165\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\n\n```js:actions.js\nexport const SET_USER = \"SET_USER\"\n\n// Action Creator\nexport function setUser(user) {\n  return {\n    type: SET_USER,\n    user: user\n  }\n}\n\nexport const logout = () = dispatch => {\n  exampleApi.logout(error => {\n    if (!error) {\n      dispatch(setUser(null))\n    }\n  })\n}\n```\n\n### \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u5909\u66f4\n\nsetUser(null) \u3092 logout() \u306b\u5909\u3048\u307e\u3059\u3002\n\n```js:HelloComponent.js\nimport { logout } from \"./actions\"\n\nfunction HelloComponent(props) {\n  return <div>\n    <p>Hello, {prop.name}!</p>\n    <button onClick={props.onClickLogout}>Logout</button>\n  </div>\n}\n\nHelloComponent.propTypes = {\n  PropTypes.string.isRequired\n}\n\nfunction mapStateToProps(state) {\n  return {\n    name: state.user && state.user.name\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    onClickLogout: () => { dispatch(logout()) }\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HelloComponent)\n```\n\n## \u6240\u611f\n\nRedux \u3092\u59cb\u3081\u305f\u3070\u304b\u308a\u3067\u3059\u304c\u3001\u601d\u3063\u305f\u3088\u308a\u5730\u9053\u306b\u66f8\u304d\u63db\u3048\u308b\u4e8b\u304c\u3067\u304d\u3066\u3088\u304b\u3063\u305f\u3067\u3059\u3002\u975e\u540c\u671f\u51e6\u7406\u307e\u308f\u308a\u306f\u3044\u308d\u3093\u306a\u65b9\u6cd5\u304c\u3042\u308b\u305d\u3046\u306a\u306e\u3067\u3001\u898f\u6a21\u306b\u5408\u308f\u305b\u3066\u3044\u3044\u611f\u3058\u306e\u66f8\u304d\u65b9\u3092\u5b66\u3093\u3067\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n", "tags": ["reactjs", "redux", "redux-thunk", "react-redux"]}