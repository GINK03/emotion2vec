{"tags": ["ReVIEW", "docker"], "context": " More than 1 year has passed since last update.\u300cReVIEW\u300d\u306e\u6b63\u5f0f\u540d\u79f0\u304c\u300cRe:VIEW\u300d\u306b\u306a\u3063\u305f\u8a18\u5ff5\u3067\u3001Re:VIEW\u7528DOckerfile\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\nRe:VIEW\u3068\u4e00\u7dd2\u306bRuby 2.1.1\u3001TeX Live 2012\u306a\u3069\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059(TeX Live 2013\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u3088\u304f\u5206\u304b\u3089\u305a\u2026)\u3002\nFROM ubuntu:12.04\n\nMAINTAINER takahashim \n\nRUN apt-get update\nRUN apt-get install -y build-essential wget curl git\nRUN apt-get install -y zlib1g-dev libssl-dev libreadline-dev libyaml-dev libxml2-dev libxslt-dev\nRUN apt-get install -y sqlite3 libsqlite3-dev\nRUN apt-get install -y zip unzip\nRUN apt-get clean\n\n# Install ruby-build\nRUN git clone https://github.com/sstephenson/ruby-build.git .ruby-build\nRUN .ruby-build/install.sh\nRUN rm -fr .ruby-build\n\n# Install ruby-2.1.1\nRUN ruby-build 2.1.1 /usr/local\n\n# Install bundler and rake\nRUN gem update --system\nRUN gem install bundler --no-rdoc --no-ri\n\n# Install TeXLive\nRUN apt-get install -y python-software-properties\nRUN apt-get install -y software-properties-common\nRUN apt-add-repository ppa:texlive-backports/ppa\nRUN apt-get update\nRUN apt-get install -y texlive\nRUN apt-get install -y texlive-lang-cjk\n\n# Install Re:VIEW\nRUN gem install review --no-rdoc --no-ri\n\n# \"src\" is your Re:VIEW document directory with Rakefile to build\nADD src /review\nRUN cd /review && rake\n\n\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u306fRe:VIEW\u306e\u30d3\u30eb\u30c9\u307e\u3067\u4e00\u6c17\u306b\u884c\u3044\u307e\u3059\uff08\u305d\u3053\u307e\u3067\u3057\u306a\u304f\u3066\u3082\u826f\u3044\u5834\u5408\u306f\u4e00\u756a\u4e0b\u306e3\u884c\u3092\u6d88\u3057\u3066\u4e0b\u3055\u3044\uff09\u3002\n\u3053\u306e\u5834\u5408\u3001Dockerfile\u304c\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bsrc/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u3042\u3063\u3066\u3001\u305d\u3053\u306bRakefile\u3082\u5165\u3063\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002Rakefile\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u3092\u4f5c\u3063\u3066\u304a\u304d\u307e\u3059\u3002\nrequire 'rake/clean'\nrequire 'fileutils'\n\n## Variables\n\nBOOKNAME = \"book\"\nCONFIG_FILE = \"config.yml\"\nOTHER_FILES =  %w{CHAPS PREDEF POSTDEF} << CONFIG_FILE\n\nPDF_FILE = \"#{BOOKNAME}.pdf\"\nEPUB_FILE = \"#{BOOKNAME}.epub\"\n\nSRC = FileList['*.re'] + OTHER_FILES\nCLEAN.include([\"#{BOOKNAME}\", \"#{BOOKNAME}-pdf\", \"#{BOOKNAME}.pdf\", \"#{BOOKNAME}-epub\", \"#{BOOKNAME}.epub\"])\n\n\n## Tasks\n\n##task :default => :pdf\ntask :default => :all\n\ndesc \"generate PDF and EPUB file\"\ntask :all => [:pdf, :epub]\n\ndesc \"generate PDF file\"\ntask :pdf => PDF_FILE\n\ndesc \"generate EPUB file\"\ntask :epub => EPUB_FILE\n\n\n## File Tasks\n\nfile PDF_FILE => SRC do\n  FileUtils.rm_f PDF_FILE\n  FileUtils.rm_rf \"#{BOOKNAME}-pdf\"\n  sh \"review-pdfmaker #{CONFIG_FILE}\"\nend\n\nfile EPUB_FILE => SRC do\n  FileUtils.rm_f EPUB_FILE\n  FileUtils.rm_rf \"#{BOOKNAME}-epub\"\n  sh \"review-epubmaker #{CONFIG_FILE}\"\nend\n\n\u3053\u3046\u3059\u308b\u3068\u3001Re:VIEW\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092/review\u306b\u4f5c\u3063\u3066\u3001review-pdfmaekr\u3068review-epubmaker\u3092\u5b9f\u884c\u3057\u3066\u7d42\u308f\u308a\u307e\u3059\u3002\n\u30d5\u30a1\u30a4\u30eb\u306fDocker\u306e\u30a4\u30e1\u30fc\u30b8\u306e\u4e2d\u306b\u5165\u3063\u305f\u307e\u307e\u306a\u306e\u3067\u3001\u306a\u3093\u3068\u304b\u3057\u3066\u53d6\u308a\u51fa\u3057\u3066\u4e0b\u3055\u3044\uff08docker cp\u306fOS X\u3060\u3068\u7c21\u5358\u306b\u306f\u4f7f\u3048\u306a\u3044\u3088\u3046\u3060\u3063\u305f\u306e\u3067\u65ad\u5ff5\u2026\u3002\u4f55\u304b\u3057\u3089\u30b5\u30fc\u30d0\u3067\u3082\u52d5\u304b\u3059\u3079\u304d\uff1f\uff09\u3002\n\u300cReVIEW\u300d\u306e\u6b63\u5f0f\u540d\u79f0\u304c\u300cRe:VIEW\u300d\u306b\u306a\u3063\u305f\u8a18\u5ff5\u3067\u3001Re:VIEW\u7528DOckerfile\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\nRe:VIEW\u3068\u4e00\u7dd2\u306bRuby 2.1.1\u3001TeX Live 2012\u306a\u3069\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059(TeX Live 2013\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u3088\u304f\u5206\u304b\u3089\u305a\u2026)\u3002\n\n```Dockerfile\nFROM ubuntu:12.04\n\nMAINTAINER takahashim \n\nRUN apt-get update\nRUN apt-get install -y build-essential wget curl git\nRUN apt-get install -y zlib1g-dev libssl-dev libreadline-dev libyaml-dev libxml2-dev libxslt-dev\nRUN apt-get install -y sqlite3 libsqlite3-dev\nRUN apt-get install -y zip unzip\nRUN apt-get clean\n\n# Install ruby-build\nRUN git clone https://github.com/sstephenson/ruby-build.git .ruby-build\nRUN .ruby-build/install.sh\nRUN rm -fr .ruby-build\n\n# Install ruby-2.1.1\nRUN ruby-build 2.1.1 /usr/local\n\n# Install bundler and rake\nRUN gem update --system\nRUN gem install bundler --no-rdoc --no-ri\n\n# Install TeXLive\nRUN apt-get install -y python-software-properties\nRUN apt-get install -y software-properties-common\nRUN apt-add-repository ppa:texlive-backports/ppa\nRUN apt-get update\nRUN apt-get install -y texlive\nRUN apt-get install -y texlive-lang-cjk\n\n# Install Re:VIEW\nRUN gem install review --no-rdoc --no-ri\n\n# \"src\" is your Re:VIEW document directory with Rakefile to build\nADD src /review\nRUN cd /review && rake\n```\n\n\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u306fRe:VIEW\u306e\u30d3\u30eb\u30c9\u307e\u3067\u4e00\u6c17\u306b\u884c\u3044\u307e\u3059\uff08\u305d\u3053\u307e\u3067\u3057\u306a\u304f\u3066\u3082\u826f\u3044\u5834\u5408\u306f\u4e00\u756a\u4e0b\u306e3\u884c\u3092\u6d88\u3057\u3066\u4e0b\u3055\u3044\uff09\u3002\n\u3053\u306e\u5834\u5408\u3001Dockerfile\u304c\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bsrc/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u3042\u3063\u3066\u3001\u305d\u3053\u306bRakefile\u3082\u5165\u3063\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002Rakefile\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u3092\u4f5c\u3063\u3066\u304a\u304d\u307e\u3059\u3002\n\n```Rakefile\nrequire 'rake/clean'\nrequire 'fileutils'\n\n## Variables\n\nBOOKNAME = \"book\"\nCONFIG_FILE = \"config.yml\"\nOTHER_FILES =  %w{CHAPS PREDEF POSTDEF} << CONFIG_FILE\n\nPDF_FILE = \"#{BOOKNAME}.pdf\"\nEPUB_FILE = \"#{BOOKNAME}.epub\"\n\nSRC = FileList['*.re'] + OTHER_FILES\nCLEAN.include([\"#{BOOKNAME}\", \"#{BOOKNAME}-pdf\", \"#{BOOKNAME}.pdf\", \"#{BOOKNAME}-epub\", \"#{BOOKNAME}.epub\"])\n\n\n## Tasks\n\n##task :default => :pdf\ntask :default => :all\n\ndesc \"generate PDF and EPUB file\"\ntask :all => [:pdf, :epub]\n\ndesc \"generate PDF file\"\ntask :pdf => PDF_FILE\n\ndesc \"generate EPUB file\"\ntask :epub => EPUB_FILE\n\n\n## File Tasks\n\nfile PDF_FILE => SRC do\n  FileUtils.rm_f PDF_FILE\n  FileUtils.rm_rf \"#{BOOKNAME}-pdf\"\n  sh \"review-pdfmaker #{CONFIG_FILE}\"\nend\n\nfile EPUB_FILE => SRC do\n  FileUtils.rm_f EPUB_FILE\n  FileUtils.rm_rf \"#{BOOKNAME}-epub\"\n  sh \"review-epubmaker #{CONFIG_FILE}\"\nend\n```\n\n\u3053\u3046\u3059\u308b\u3068\u3001Re:VIEW\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092/review\u306b\u4f5c\u3063\u3066\u3001review-pdfmaekr\u3068review-epubmaker\u3092\u5b9f\u884c\u3057\u3066\u7d42\u308f\u308a\u307e\u3059\u3002\n\n\u30d5\u30a1\u30a4\u30eb\u306fDocker\u306e\u30a4\u30e1\u30fc\u30b8\u306e\u4e2d\u306b\u5165\u3063\u305f\u307e\u307e\u306a\u306e\u3067\u3001\u306a\u3093\u3068\u304b\u3057\u3066\u53d6\u308a\u51fa\u3057\u3066\u4e0b\u3055\u3044\uff08docker cp\u306fOS X\u3060\u3068\u7c21\u5358\u306b\u306f\u4f7f\u3048\u306a\u3044\u3088\u3046\u3060\u3063\u305f\u306e\u3067\u65ad\u5ff5\u2026\u3002\u4f55\u304b\u3057\u3089\u30b5\u30fc\u30d0\u3067\u3082\u52d5\u304b\u3059\u3079\u304d\uff1f\uff09\u3002"}