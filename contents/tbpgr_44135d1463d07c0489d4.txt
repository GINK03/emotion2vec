{"context": " More than 1 year has passed since last update.\n\nVagrant | Vagrant + Itamae \u3067 middleman \u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3001 Vagrant Share \u3067 Vagrant Could \u306b\u516c\u958b\u3059\u308b #vagrant #itamae #middleman\n\n\u6982\u8981\nVagrant + Itamae \u3067 middleman \u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3001 Vagrant Share \u3067 Vagrant Could \u306b\u516c\u958b\u3057\u307e\u3059\u3002\n\nItamae: \u56fd\u7523\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u30c4\u30fc\u30eb\u3002Chef \u306e\u8efd\u91cf\u7248\u306e\u3088\u3046\u306a\u7acb\u3061\u4f4d\u7f6e\u3002\nmiddleman: Ruby \u306e \u9759\u7684\u30b5\u30a4\u30c8\u69cb\u7bc9\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n\n\n\u524d\u63d0\n\nVagrant Cloud \u306b\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u3057\u3066\u304a\u304d\u307e\u3059\nVagrant / Itamae \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\n\n\n\u624b\u9806\n\n\u4f5c\u696d\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea \uff0b Vagrantfile \u3072\u306a\u578b\u751f\u6210\n$ mkdir middleman\n$ cd middleman\n$ vagrant init -m\n$ vi Vagrantfile\n\n\nVagrantfile \u7de8\u96c6\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\n# Vagrantfile API/syntax version. Don't touch unless you know what you're doing!\nVAGRANTFILE_API_VERSION = \"2\"\n\nVagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n  config.vm.define \"middleman\" do |web|\n    web.vm.provider :virtualbox do |vb|\n      vb.name = \"middleman\"\n    end\n    web.vm.hostname = \"middleman\"\n    web.vm.box = \"hashicorp/precise64\"\n    # middleman \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30dd\u30fc\u30c8\u306f 4567\n    config.vm.network :forwarded_port, guest: 4567, host: 4567\n  end\nend\n\n\nGemfile \u7de8\u96c6\n\nrutan \u3055\u3093\u306e itamae-plugin-recipe-rtn_rbenv \u3067 rbenv + ruby \u74b0\u5883\u3092\u69cb\u7bc9\n\nsource \"https://rubygems.org\"\n\ngem 'itamae-plugin-recipe-rtn_rbenv'\n\n\nnode.js \u306e\u4f5c\u6210\u30fb\u7de8\u96c6\n{\n    \"rtn_rbenv\": {\n        \"user\": \"vagrant\",\n        \"versions\": {\n            \"2.1.2\": [\n                {\n                    \"name\": \"bundler\",\n                    \"version\": \"1.7.3\",\n                    \"force\": true\n                },\n                \"middleman\"\n            ]\n        },\n        \"global\": \"2.1.2\"\n    }\n}\n\n\nmiddleman.rb\nItamae \u306e\u30ec\u30b7\u30d4\u3092\u4f5c\u6210\nexecute \"apt-get update\" do\n  command \"sudo apt-get update\"\nend\npackage \"make\" do\n  action :install\nend\ninclude_recipe 'rtn_rbenv::user'\n\n\n\u4eee\u60f3\u74b0\u5883\u8d77\u52d5\n$ vagrant up\n\n\nItamae \u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\n$ vagrant ssh-config --host middleman\n$ bundle exec itamae ssh --vagrant -h middleman --node-json node.json middleman.rb\n# \u5404\u7a2e\u30ed\u30b0\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5185\u5bb9\u306e\u78ba\u8a8d\n$ vagrant ssh\nvagrant@middleman:~$ ruby -v\nruby 2.1.2p95 (2014-05-08 revision 45877) [x86_64-linux]\nvagrant@middleman:~$ middleman v\nMiddleman 3.3.7\n\n\nmiddleman \u3067\u30b5\u30a4\u30c8\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u751f\u6210\n$ middleman init itamae_middleman\n\n\nmiddleman \u8d77\u52d5\n$ cd itamae_middleman\n\n$ vi Gemfile\n# middleman-livereload \u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n$ bundle installs\n\n# \u3053\u3053\u304b\u3089\n$ sudo apt-get install build-essential gcc g++ -y\n$ gem install ejs\n$ gem install eco\n$ sudo apt-get install nodejs\n# \u3053\u3053\u307e\u3067\u8a66\u884c\u932f\u8aa4\u3057\u306a\u304c\u3089\u3060\u3063\u305f\u306e\u3067\u4e0d\u8981\u306a\u3082\u306e\u304c\u3042\u308b\u304b\u3082\n\n$ middleman server\n\n\nmiddleman \u30ed\u30fc\u30ab\u30eb\u78ba\u8a8d\n\n\nvagrant share\n$ vagrant login\n# user, pass \u3092\u5165\u529b\n$ vagrant share\n$ vagrant login --logout\n\nshare \u5b9f\u884c\u6642\u306b\u8868\u793a\u3055\u308c\u305f URL \u306b\u30a2\u30af\u30bb\u30b9\n\n\n\u88dc\u8db3\n\nFirewall \u306e\u8a2d\u5b9a\u306b\u3088\u3063\u3066\u3001 vagrant share \u304c\u5931\u6557\u3059\u308b\u30b1\u30fc\u30b9\u304c\u3042\u308b\n\n\n\u53c2\u7167\n\nitamae-plugin-recipe-rtn_rbenv | GitHub\n\n# Vagrant | Vagrant + Itamae \u3067 middleman \u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3001 Vagrant Share \u3067 Vagrant Could \u306b\u516c\u958b\u3059\u308b #vagrant #itamae #middleman\n## \u6982\u8981\nVagrant + Itamae \u3067 middleman \u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3001 Vagrant Share \u3067 Vagrant Could \u306b\u516c\u958b\u3057\u307e\u3059\u3002\n\n* Itamae: \u56fd\u7523\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u30c4\u30fc\u30eb\u3002Chef \u306e\u8efd\u91cf\u7248\u306e\u3088\u3046\u306a\u7acb\u3061\u4f4d\u7f6e\u3002\n* middleman: Ruby \u306e \u9759\u7684\u30b5\u30a4\u30c8\u69cb\u7bc9\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n\n## \u524d\u63d0\n* Vagrant Cloud \u306b\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u3057\u3066\u304a\u304d\u307e\u3059\n* Vagrant / Itamae \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\n\n## \u624b\u9806\n### \u4f5c\u696d\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea \uff0b Vagrantfile \u3072\u306a\u578b\u751f\u6210\n~~~bash\n$ mkdir middleman\n$ cd middleman\n$ vagrant init -m\n$ vi Vagrantfile\n~~~\n\n### Vagrantfile \u7de8\u96c6\n\n~~~ruby\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\n# Vagrantfile API/syntax version. Don't touch unless you know what you're doing!\nVAGRANTFILE_API_VERSION = \"2\"\n\nVagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n  config.vm.define \"middleman\" do |web|\n    web.vm.provider :virtualbox do |vb|\n      vb.name = \"middleman\"\n    end\n    web.vm.hostname = \"middleman\"\n    web.vm.box = \"hashicorp/precise64\"\n    # middleman \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30dd\u30fc\u30c8\u306f 4567\n    config.vm.network :forwarded_port, guest: 4567, host: 4567\n  end\nend\n~~~\n\n### Gemfile \u7de8\u96c6\n\n* rutan \u3055\u3093\u306e `itamae-plugin-recipe-rtn_rbenv` \u3067 rbenv + ruby \u74b0\u5883\u3092\u69cb\u7bc9\n\n~~~ruby\nsource \"https://rubygems.org\"\n\ngem 'itamae-plugin-recipe-rtn_rbenv'\n~~~\n\n### node.js \u306e\u4f5c\u6210\u30fb\u7de8\u96c6\n\n~~~json\n{\n    \"rtn_rbenv\": {\n        \"user\": \"vagrant\",\n        \"versions\": {\n            \"2.1.2\": [\n                {\n                    \"name\": \"bundler\",\n                    \"version\": \"1.7.3\",\n                    \"force\": true\n                },\n                \"middleman\"\n            ]\n        },\n        \"global\": \"2.1.2\"\n    }\n}\n~~~\n\n### middleman.rb\nItamae \u306e\u30ec\u30b7\u30d4\u3092\u4f5c\u6210\n\n~~~ruby\nexecute \"apt-get update\" do\n  command \"sudo apt-get update\"\nend\npackage \"make\" do\n  action :install\nend\ninclude_recipe 'rtn_rbenv::user'\n~~~\n\n### \u4eee\u60f3\u74b0\u5883\u8d77\u52d5\n\n~~~bash\n$ vagrant up\n~~~\n\n### Itamae \u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\n\n~~~bash\n$ vagrant ssh-config --host middleman\n$ bundle exec itamae ssh --vagrant -h middleman --node-json node.json middleman.rb\n# \u5404\u7a2e\u30ed\u30b0\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5185\u5bb9\u306e\u78ba\u8a8d\n$ vagrant ssh\nvagrant@middleman:~$ ruby -v\nruby 2.1.2p95 (2014-05-08 revision 45877) [x86_64-linux]\nvagrant@middleman:~$ middleman v\nMiddleman 3.3.7\n~~~\n\n### middleman \u3067\u30b5\u30a4\u30c8\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u751f\u6210\n\n~~~\n$ middleman init itamae_middleman\n~~~\n\n### middleman \u8d77\u52d5\n\n~~~bash\n$ cd itamae_middleman\n\n$ vi Gemfile\n# middleman-livereload \u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n$ bundle installs\n\n# \u3053\u3053\u304b\u3089\n$ sudo apt-get install build-essential gcc g++ -y\n$ gem install ejs\n$ gem install eco\n$ sudo apt-get install nodejs\n# \u3053\u3053\u307e\u3067\u8a66\u884c\u932f\u8aa4\u3057\u306a\u304c\u3089\u3060\u3063\u305f\u306e\u3067\u4e0d\u8981\u306a\u3082\u306e\u304c\u3042\u308b\u304b\u3082\n\n$ middleman server\n~~~\n\n### middleman \u30ed\u30fc\u30ab\u30eb\u78ba\u8a8d\n\n![middleman.png](https://qiita-image-store.s3.amazonaws.com/0/43480/e23468f2-13c3-c8ae-df52-f3e47d22d9a3.png)\n\n## vagrant share\n\n~~~bash\n$ vagrant login\n# user, pass \u3092\u5165\u529b\n$ vagrant share\n$ vagrant login --logout\n~~~\n\nshare \u5b9f\u884c\u6642\u306b\u8868\u793a\u3055\u308c\u305f URL \u306b\u30a2\u30af\u30bb\u30b9\n\n![middleman.png](https://qiita-image-store.s3.amazonaws.com/0/43480/e23468f2-13c3-c8ae-df52-f3e47d22d9a3.png)\n\n## \u88dc\u8db3\n* Firewall \u306e\u8a2d\u5b9a\u306b\u3088\u3063\u3066\u3001 `vagrant share` \u304c\u5931\u6557\u3059\u308b\u30b1\u30fc\u30b9\u304c\u3042\u308b\n\n## \u53c2\u7167\n* [itamae-plugin-recipe-rtn_rbenv | GitHub](https://github.com/rutan/itamae-plugin-recipe-rtn_rbenv)\n", "tags": ["vagrant1.6.5", "itamae1.0.9", "middleman"]}