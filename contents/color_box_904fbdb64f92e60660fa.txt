{"tags": ["Swift", "CoreData", "iOS"], "context": "\n\n\u6982\u8981\nCoreData\u306e\u8efd\u91cf\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u884c\u308f\u308c\u308b\u304b\u3069\u3046\u304b\u3092\u691c\u51fa\u3059\u308b\u30b9\u30cb\u30da\u30c3\u30c8\u3092\u3053\u3053\u306b\u8a18\u8f09\u3059\u308b\u3002\nCoreData\u306e\u8efd\u91cf\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306f\u3001\u9069\u5207\u306a\u6e96\u5099\u304c\u884c\u308f\u308c\u3066\u3044\u308c\u3070\nNSPersistentStoreCoordinator\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30e1\u30bd\u30c3\u30c9\naddPersistentStoreWithType\u304c\u547c\u3070\u308c\u308b\u969b\u306b\u81ea\u52d5\u7684\u306b\u884c\u308f\u308c\u308b\u3002\n\u591a\u304f\u306e\u30a2\u30d7\u30ea\u306f\u30a2\u30d7\u30ea\u306e\u8d77\u52d5\u6642\u306b\u4e0a\u8a18\u30e1\u30bd\u30c3\u30c9\u306e\u547c\u3073\u51fa\u3057\u3092\u884c\u3063\u3066\u3044\u308b\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u77ed\u6642\u9593\u3067\u7d42\u4e86\u3059\u308b\u5834\u5408\u306f\u554f\u984c\u306a\u3044\u304c\u300120\u79d2\u4ee5\u4e0a\u306e\u6642\u9593\u304c\u304b\u304b\u308b\u3068\u3001\u30a2\u30d7\u30ea\u306e\u5f37\u5236\u7d42\u4e86\u306b\u5dfb\u304d\u8fbc\u307e\u308c\u3066\u3057\u307e\u3046\u3002\n\u305d\u308c\u3092\u9632\u3050\u305f\u3081\u306b\u3001\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u884c\u308f\u308c\u308b\u524d\u306b\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u884c\u308f\u308c\u308b\u304b\u3069\u3046\u304b\u3092\u691c\u51fa\u3059\u308b\u3002\n\nwillMigrate\n\n    func willMigrate() -> Bool{\n        // momd\u30d5\u30a1\u30a4\u30eb\u306eURL\n        let modelURL = NSBundle.mainBundle().URLForResource(\"MigrateTrial\", withExtension: \"momd\")!\n        let managedObjectModel = NSManagedObjectModel(contentsOfURL: modelURL)!\n        //\u3000\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2\u306eURL\n        let sqliteURL =\n        self.applicationDocumentsDirectory.URLByAppendingPathComponent(\"SingleViewCoreData.sqlite\")\n\n        // addPersistentStoreWithType\u306b\u6e21\u3059\u3082\u306e\u3068\u540c\u3058\u3082\u306e\u3092\u6e21\u3059\n        let options = [NSMigratePersistentStoresAutomaticallyOption: true,\n            NSInferMappingModelAutomaticallyOption: true]\n\n        // \u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\n        let metadata = try! NSPersistentStoreCoordinator.metadataForPersistentStoreOfType(NSSQLiteStoreType,\n            URL: sqliteURL,\n            options:options\n        )\n\n        // \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u884c\u308f\u308c\u308b\u304b\u3069\u3046\u304b\u3092\u53d6\u5f97\n        return managedObjectModel.isConfiguration(nil,compatibleWithStoreMetadata:metadata)\n\n    }\n\n\n\n\u4eca\u5f8c\u4f7f\u7528\u3055\u308c\u308bmomd\u30d5\u30a1\u30a4\u30eb(\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u5f8c\u306e\u72b6\u614b)\u3068\u3001\u65e2\u306b\u5b58\u5728\u3059\u308bsqlite\u30d5\u30a1\u30a4\u30eb(\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u524d\u306e\u72b6\u614b)\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u6bd4\u8f03\u3057\u3066\u3044\u308b\u306e\u304c\u30dd\u30a4\u30f3\u30c8\n\u53c2\u8003\u60c5\u5831\n[iOS][Mac] CoreData - \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3[4] \u30e2\u30c7\u30eb\u30d5\u30a1\u30a4\u30eb\u306e\u69cb\u6210\n[iOS][Mac] CoreData - \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\u304b\u3069\u3046\u304b\u3092\u77e5\u308b\nCoreData - \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u8003\u616e\u3057\u305f CoreDataManager \u30d1\u30bf\u30fc\u30f3\nCustomizing the Migration Process\nDetecting a Lightweight Core Data Migration\nmetadataForPersistentStoreOfType\n### \u6982\u8981\n\nCoreData\u306e\u8efd\u91cf\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u884c\u308f\u308c\u308b\u304b\u3069\u3046\u304b\u3092\u691c\u51fa\u3059\u308b\u30b9\u30cb\u30da\u30c3\u30c8\u3092\u3053\u3053\u306b\u8a18\u8f09\u3059\u308b\u3002\n\n\n\nCoreData\u306e\u8efd\u91cf\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306f\u3001\u9069\u5207\u306a\u6e96\u5099\u304c\u884c\u308f\u308c\u3066\u3044\u308c\u3070\n`NSPersistentStoreCoordinator`\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30e1\u30bd\u30c3\u30c9\n`addPersistentStoreWithType`\u304c\u547c\u3070\u308c\u308b\u969b\u306b\u81ea\u52d5\u7684\u306b\u884c\u308f\u308c\u308b\u3002\n\n\u591a\u304f\u306e\u30a2\u30d7\u30ea\u306f\u30a2\u30d7\u30ea\u306e\u8d77\u52d5\u6642\u306b\u4e0a\u8a18\u30e1\u30bd\u30c3\u30c9\u306e\u547c\u3073\u51fa\u3057\u3092\u884c\u3063\u3066\u3044\u308b\n\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u77ed\u6642\u9593\u3067\u7d42\u4e86\u3059\u308b\u5834\u5408\u306f\u554f\u984c\u306a\u3044\u304c\u300120\u79d2\u4ee5\u4e0a\u306e\u6642\u9593\u304c\u304b\u304b\u308b\u3068\u3001\u30a2\u30d7\u30ea\u306e\u5f37\u5236\u7d42\u4e86\u306b\u5dfb\u304d\u8fbc\u307e\u308c\u3066\u3057\u307e\u3046\u3002\n\u305d\u308c\u3092\u9632\u3050\u305f\u3081\u306b\u3001\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u884c\u308f\u308c\u308b\u524d\u306b\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u884c\u308f\u308c\u308b\u304b\u3069\u3046\u304b\u3092\u691c\u51fa\u3059\u308b\u3002\n\n\n```swift:willMigrate\n\n    func willMigrate() -> Bool{\n        // momd\u30d5\u30a1\u30a4\u30eb\u306eURL\n        let modelURL = NSBundle.mainBundle().URLForResource(\"MigrateTrial\", withExtension: \"momd\")!\n        let managedObjectModel = NSManagedObjectModel(contentsOfURL: modelURL)!\n        //\u3000\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2\u306eURL\n        let sqliteURL =\n        self.applicationDocumentsDirectory.URLByAppendingPathComponent(\"SingleViewCoreData.sqlite\")\n        \n        // addPersistentStoreWithType\u306b\u6e21\u3059\u3082\u306e\u3068\u540c\u3058\u3082\u306e\u3092\u6e21\u3059\n        let options = [NSMigratePersistentStoresAutomaticallyOption: true,\n            NSInferMappingModelAutomaticallyOption: true]\n        \n        // \u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\n        let metadata = try! NSPersistentStoreCoordinator.metadataForPersistentStoreOfType(NSSQLiteStoreType,\n            URL: sqliteURL,\n            options:options\n        )\n        \n        // \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u884c\u308f\u308c\u308b\u304b\u3069\u3046\u304b\u3092\u53d6\u5f97\n        return managedObjectModel.isConfiguration(nil,compatibleWithStoreMetadata:metadata)\n\n    }\n\n```\n\n\n\u4eca\u5f8c\u4f7f\u7528\u3055\u308c\u308bmomd\u30d5\u30a1\u30a4\u30eb(\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u5f8c\u306e\u72b6\u614b)\u3068\u3001\u65e2\u306b\u5b58\u5728\u3059\u308bsqlite\u30d5\u30a1\u30a4\u30eb(\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u524d\u306e\u72b6\u614b)\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u6bd4\u8f03\u3057\u3066\u3044\u308b\u306e\u304c\u30dd\u30a4\u30f3\u30c8\n\n\u53c2\u8003\u60c5\u5831\n[[iOS][Mac] CoreData - \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3[4] \u30e2\u30c7\u30eb\u30d5\u30a1\u30a4\u30eb\u306e\u69cb\u6210](http://cocoadays.blogspot.jp/2010/12/iosmac-coredata-%E3%83%9E%E3%82%A4%E3%82%B0%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B34-%E3%83%A2%E3%83%87%E3%83%AB%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E6%A7%8B%E6%88%90.html)\n[[iOS][Mac] CoreData - \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\u304b\u3069\u3046\u304b\u3092\u77e5\u308b](http://cocoadays.blogspot.jp/2011/02/iosmac-coredata.html)\n[CoreData - \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u8003\u616e\u3057\u305f CoreDataManager \u30d1\u30bf\u30fc\u30f3](http://cocoadays.blogspot.jp/2011/02/coredata-coredatamanager.html)\n[Customizing the Migration Process](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmCustomizing.html#//apple_ref/doc/uid/TP40004399-CH8-SW2)\n[Detecting a Lightweight Core Data Migration](http://stackoverflow.com/questions/3025742/detecting-a-lightweight-core-data-migration)\n[metadataForPersistentStoreOfType](https://forums.developer.apple.com/thread/7555)\n\n\n\n"}