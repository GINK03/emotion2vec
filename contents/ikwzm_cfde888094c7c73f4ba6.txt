{"context": "\n\n\u306f\u3058\u3081\u306b\n\u5c11\u3057\u9593\u304c\u7a7a\u304d\u307e\u3057\u305f\u304c\u3001\u300eSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u7de8)\u300f\u306e\u7d9a\u7de8\u3067\u3059\u3002\n\u4eca\u56de\u306f \n\nsocat \u3092\u4f7f\u3063\u3066 Zynq/DE0-Nano-SoC \u4e0a\u306b MessagePack-RPC \u30b5\u30fc\u30d0\u30fc\u3092\u4f5c\u3063\u3066\nJava \u3067\u8a18\u8ff0\u3057\u3066 Synthesijer \u3067\u5408\u6210\u3057\u3066 FPGA \u4e0a\u306b\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7d4c\u7531\u3067\npython \u3067\u4f5c\u3063\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u5236\u5fa1\n\n\u3057\u307e\u3059\u3002\n\nsocat\n\nsocat \u3068\u306f\nsocat \u306f\u3001\u7c21\u5358\u306b\u30bd\u30b1\u30c3\u30c8\u901a\u4fe1\u3092\u30b5\u30fc\u30d0\u30fc\u5074\u3068\u3057\u3066\u3082\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3068\u3057\u3066\u3082 \u4f7f\u3048\u308b\u4fbf\u5229\u306a\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\nLinux \u306e\u30e6\u30fc\u30b6\u30fc\u7a7a\u9593\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068 FPGA \u4e0a\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u306f TTY \u30c9\u30e9\u30a4\u30d0\u3092\u7d4c\u7531\u3057\u3066\u901a\u4fe1\u3057\u3066\u3044\u307e\u3059\u3002\u8a73\u7d30\u306f\u300eSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(TTY\u30c9\u30e9\u30a4\u30d0\u7de8)\u300f\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nsocat \u306f\u3001\u3053\u306e TTY \u30c9\u30e9\u30a4\u30d0\u3068\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u4ef2\u7acb\u3061\u3092\u3057\u307e\u3059\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nDebian \u7cfb\u306eLinux \u304c\u8f09\u3063\u3066\u3044\u308b Zynq \u3084 DE0-Nano-Soc \u306a\u3069\u3067\u306f\u3001apt-get \u3092\u4f7f\u3063\u3066\u7c21\u5358\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\nshell% sudo apt-get install socat\n\n\n\u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066\u8d77\u52d5\n\u6b21\u306e\u3088\u3046\u306b\u8d77\u52d5\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002\nshell% sudo socat -d -d tcp-listen:54321,fork /dev/zptty0,raw,nonblock &\n\n\n\ntcp-listen:<port> \u3067\u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066\u5f85\u3064\u30dd\u30fc\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u4e0a\u306e\u4f8b\u3067\u306f<port>\u306b54321\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n/dev/zptty0,raw,nonblock \u3067 \u300eSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(TTY\u30c9\u30e9\u30a4\u30d0\u7de8)\u300f\u3067\u8aac\u660e\u3057\u305f TTY \u30c9\u30e9\u30a4\u30d0\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u5236\u5fa1\u3059\u308b\u4f8b\n\n\u30e2\u30b8\u30e5\u30fc\u30eb\u4f8b\n\u4eca\u56de\u5b9f\u88c5\u3057\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u306f Java \u3067\u6b21\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u305f\u3082\u306e\u3092\u3001Synthesijer \u3067\u8ad6\u7406\u5408\u6210\u3057\u307e\u3057\u305f\u3002\u8a73\u7d30\u306f\u300eSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u7de8)\u300f\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nAccumulator.java\npublic class Accumulator {\n    public int reg;\n    public int add(int x) {\n        reg = reg + x;\n        return reg;\n    }\n}\n\n\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306e\u5236\u5fa1\nmsgpack-rpc-python \u3092\u4f7f\u3063\u3066\u3001\u5225\u306e\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u304b\u3089 Zynq/DE0-Nano-SoC \u4e0a\u306e MessagePack-RPC \u30b5\u30fc\u30d0\u30fc\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\n\"???.???.???.???\" \u306b\u306f Zynq/DE0-Nano-SoC \u306e IP\u30a2\u30c9\u30ec\u30b9\u3092\u300154321 \u306f socat \u3092\u8d77\u52d5\u3057\u305f\u3068\u304d\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\nshell% python\nPython 2.7.10 (default, Oct 14 2015, 16:09:02) \n[GCC 5.2.1 20151010] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import msgpackrpc\n>>> cli = msgpackrpc.Client(msgpackrpc.Address(\"???.???.???.???\", 54321))\n>>> result = cli.call('$SET', {\"reg\":1})\n>>> result = cli.call('$GET', {\"reg\":None})\n>>> print result\n[{'reg': 1}]\n>>> print cli.call('add', 10)\n11\n>>> result = cli.call('$GET', {\"reg\":1})\n>>> print result\n[{'reg': 11}]\n>>> exit()\n\n$SET \u3067 \"reg\" \u5909\u6570\u306b 1 \u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\u5f15\u6570\u306b\u306f{\u5909\u6570\u540d:\u5024}\u306e\u8f9e\u66f8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n$GET \u3067 \"reg\" \u5909\u6570\u306e\u5024\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u5f15\u6570\u306b\u306f{\u5909\u6570\u540d:None}\u306e\u8f9e\u66f8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u623b\u308a\u5024\u306f{\u5909\u6570\u540d:\u5024}\u3067\u3059\u3002\nadd \u3067 \"reg\" \u5909\u6570\u306e\u5024\u306b\u5f15\u6570\u306e\u5024\u3092\u52a0\u7b97\u3057\u307e\u3059\u3002\u5f15\u6570\u306b\u306f\u6574\u6570\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u623b\u308a\u5024\u306f\u52a0\u7b97\u3057\u305f\u5024\u3067\u3059\u3002\n\n\u53c2\u7167\nMessagePack for VHDL (https://github.com/ikwzm/msgpack-vhdl)\nMessagePack for VHDL Examples (https://github.com/ikwzm/msgpack-vhdl-examples)\nMessagePack-RPC\u3092\u4f7f\u3063\u3066FPGA\u3092\u5236\u5fa1\nSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u7de8)\nSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(IP-Package\u7de8)\nSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(ZYNQ\u8ad6\u7406\u5408\u6210\u7de8)\nSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(TTY\u30c9\u30e9\u30a4\u30d0\u7de8)\n## \u306f\u3058\u3081\u306b\n\n\u5c11\u3057\u9593\u304c\u7a7a\u304d\u307e\u3057\u305f\u304c\u3001[\u300eSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u7de8)\u300f](http://qiita.com/ikwzm/items/6cb623b057a687ff4a8e)\u306e\u7d9a\u7de8\u3067\u3059\u3002\n\u4eca\u56de\u306f \n\n- socat \u3092\u4f7f\u3063\u3066 Zynq/DE0-Nano-SoC \u4e0a\u306b MessagePack-RPC \u30b5\u30fc\u30d0\u30fc\u3092\u4f5c\u3063\u3066\n- Java \u3067\u8a18\u8ff0\u3057\u3066 Synthesijer \u3067\u5408\u6210\u3057\u3066 FPGA \u4e0a\u306b\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\n- \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7d4c\u7531\u3067\n- python \u3067\u4f5c\u3063\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u5236\u5fa1\n\n\u3057\u307e\u3059\u3002\n\n## socat \n\n### socat \u3068\u306f\n\n[socat](http://www.dest-unreach.org/socat) \u306f\u3001\u7c21\u5358\u306b\u30bd\u30b1\u30c3\u30c8\u901a\u4fe1\u3092\u30b5\u30fc\u30d0\u30fc\u5074\u3068\u3057\u3066\u3082\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3068\u3057\u3066\u3082 \u4f7f\u3048\u308b\u4fbf\u5229\u306a\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\n\nLinux \u306e\u30e6\u30fc\u30b6\u30fc\u7a7a\u9593\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068 FPGA \u4e0a\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u306f TTY \u30c9\u30e9\u30a4\u30d0\u3092\u7d4c\u7531\u3057\u3066\u901a\u4fe1\u3057\u3066\u3044\u307e\u3059\u3002\u8a73\u7d30\u306f[\u300eSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(TTY\u30c9\u30e9\u30a4\u30d0\u7de8)\u300f](http://qiita.com/drafts/533b905f7d1eb2e6c4d5)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nsocat \u306f\u3001\u3053\u306e TTY \u30c9\u30e9\u30a4\u30d0\u3068\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u4ef2\u7acb\u3061\u3092\u3057\u307e\u3059\u3002\n\n### \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nDebian \u7cfb\u306eLinux \u304c\u8f09\u3063\u3066\u3044\u308b Zynq \u3084 DE0-Nano-Soc \u306a\u3069\u3067\u306f\u3001apt-get \u3092\u4f7f\u3063\u3066\u7c21\u5358\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\n```\nshell% sudo apt-get install socat\n```\n\n### \u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066\u8d77\u52d5\n\n\u6b21\u306e\u3088\u3046\u306b\u8d77\u52d5\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\nshell% sudo socat -d -d tcp-listen:54321,fork /dev/zptty0,raw,nonblock &\n```\n\n- `tcp-listen:<port>` \u3067\u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066\u5f85\u3064\u30dd\u30fc\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u4e0a\u306e\u4f8b\u3067\u306f`<port>`\u306b54321\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n- `/dev/zptty0,raw,nonblock` \u3067 [\u300eSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(TTY\u30c9\u30e9\u30a4\u30d0\u7de8)\u300f](http://qiita.com/drafts/533b905f7d1eb2e6c4d5)\u3067\u8aac\u660e\u3057\u305f TTY \u30c9\u30e9\u30a4\u30d0\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n## \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u5236\u5fa1\u3059\u308b\u4f8b\n\n### \u30e2\u30b8\u30e5\u30fc\u30eb\u4f8b\n\n\u4eca\u56de\u5b9f\u88c5\u3057\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u306f Java \u3067\u6b21\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u305f\u3082\u306e\u3092\u3001Synthesijer \u3067\u8ad6\u7406\u5408\u6210\u3057\u307e\u3057\u305f\u3002\u8a73\u7d30\u306f[\u300eSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u7de8)\u300f](http://qiita.com/ikwzm/items/6cb623b057a687ff4a8e)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n````Java:Accumulator.java\npublic class Accumulator {\n    public int reg;\n    public int add(int x) {\n        reg = reg + x;\n        return reg;\n    }\n}\n````\n\n### \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306e\u5236\u5fa1\n\nmsgpack-rpc-python \u3092\u4f7f\u3063\u3066\u3001\u5225\u306e\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u304b\u3089 Zynq/DE0-Nano-SoC \u4e0a\u306e MessagePack-RPC \u30b5\u30fc\u30d0\u30fc\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\n\"???.???.???.???\" \u306b\u306f Zynq/DE0-Nano-SoC \u306e IP\u30a2\u30c9\u30ec\u30b9\u3092\u300154321 \u306f socat \u3092\u8d77\u52d5\u3057\u305f\u3068\u304d\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```\nshell% python\nPython 2.7.10 (default, Oct 14 2015, 16:09:02) \n[GCC 5.2.1 20151010] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import msgpackrpc\n>>> cli = msgpackrpc.Client(msgpackrpc.Address(\"???.???.???.???\", 54321))\n>>> result = cli.call('$SET', {\"reg\":1})\n>>> result = cli.call('$GET', {\"reg\":None})\n>>> print result\n[{'reg': 1}]\n>>> print cli.call('add', 10)\n11\n>>> result = cli.call('$GET', {\"reg\":1})\n>>> print result\n[{'reg': 11}]\n>>> exit()\n```\n\n`$SET` \u3067 \"reg\" \u5909\u6570\u306b 1 \u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\u5f15\u6570\u306b\u306f`{\u5909\u6570\u540d:\u5024}`\u306e\u8f9e\u66f8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n`$GET` \u3067 \"reg\" \u5909\u6570\u306e\u5024\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u5f15\u6570\u306b\u306f`{\u5909\u6570\u540d:None}`\u306e\u8f9e\u66f8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u623b\u308a\u5024\u306f`{\u5909\u6570\u540d:\u5024}`\u3067\u3059\u3002\n`add` \u3067 \"reg\" \u5909\u6570\u306e\u5024\u306b\u5f15\u6570\u306e\u5024\u3092\u52a0\u7b97\u3057\u307e\u3059\u3002\u5f15\u6570\u306b\u306f\u6574\u6570\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u623b\u308a\u5024\u306f\u52a0\u7b97\u3057\u305f\u5024\u3067\u3059\u3002\n\n\n##\u53c2\u7167\n\n[MessagePack for VHDL (https://github.com/ikwzm/msgpack-vhdl)](https://github.com/ikwzm/msgpack-vhdl)\n[MessagePack for VHDL Examples (https://github.com/ikwzm/msgpack-vhdl-examples)](https://github.com/ikwzm/msgpack-vhdl-examples)\n[MessagePack-RPC\u3092\u4f7f\u3063\u3066FPGA\u3092\u5236\u5fa1](http://qiita.com/ikwzm/items/2644c6e50a7049c75d49)\n[Synthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u7de8)](http://qiita.com/ikwzm/items/6cb623b057a687ff4a8e)\n[Synthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(IP-Package\u7de8)](http://qiita.com/ikwzm/items/924fc3fd59bdf7da55a2)\n[Synthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(ZYNQ\u8ad6\u7406\u5408\u6210\u7de8)](http://qiita.com/ikwzm/items/0254f1d49602095b5cde)\n[Synthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(TTY\u30c9\u30e9\u30a4\u30d0\u7de8)](http://qiita.com/ikwzm/items/533b905f7d1eb2e6c4d5)\n", "tags": ["FPGA", "zynq", "Linux", "MessagePack", "Synthesijer"]}