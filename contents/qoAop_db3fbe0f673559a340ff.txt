{"context": "\u6614\u3005\u66f8\u3044\u3066\u3044\u305f\u30d6\u30ed\u30b0\u306b\u306f\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u6a5f\u80fd\u304c\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u753b\u50cf\u306eURL\u4e00\u89a7\u306fcurl\u3084grep\u3067\u4f5c\u3063\u305f\u3093\u3067\u3059\u304cURL\u304c/Img?hogehoge\u307f\u305f\u3044\u306a\u5f62\u5f0f\u306a\u306e\u3067wget -i \u3067\u4fdd\u5b58\u3057\u3066\u3082Img0.1\u3068\u304bImg0.2\u3068\u304b\u306b\u306a\u3063\u3061\u3083\u3044\u307e\u3057\u305f\u3002\n\u3088\u304f\u3088\u304f\u63a2\u305b\u3070curl\u3084\u3089wget\u3067\u3046\u307e\u3044\u3053\u3068\u3084\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308b\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u63a2\u3059\u306e\u3082\u9762\u5012\u306a\u306e\u3067\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\u30d5\u30a1\u30a4\u30eb\u540d\u306fLast-Modified\u304b\u3089\u66f4\u65b0\u5e74\u6708\u65e5\u3001context-type\u304b\u3089\u62e1\u5f35\u5b50\u3092\u53d6\u3063\u3066\u3044\u307e\u3059\u3002\n\u540c\u3058\u66f4\u65b0\u5e74\u6708\u65e5\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u3063\u305f\u306e\u3067\u901a\u3057\u756a\u53f7\u3082\u3064\u3051\u3066\u307e\u3059\u3002\n\n\u4f7f\u3044\u65b9\ncat url_list.txt | python get-contents.py\n\n\n\u30b9\u30af\u30ea\u30d7\u30c8\n\nget-contents.py\n# -*- coding: utf-8 -*-\n\nimport sys\nimport requests\nimport datetime\nimport struct\n\ncnt = 0\nfor line in sys.stdin.readlines():\n    r = requests.get(line.strip())\n    # print(r.headers)\n    ext = (r.headers['Content-Type'].split('/'))[1]\n    lm = datetime.datetime.strptime(\n        r.headers['Last-Modified'], '%a, %d %b %Y %H:%M:%S GMT')\n    fname = lm.strftime('%Y%m%d-%H%M%S') + ('-%03d.' % cnt) + ext\n    print(fname)\n    with open(fname, \"wb\") as fout:\n        for x in r.content:\n            fout.write(struct.pack(\"B\", x))\n    cnt = cnt + 1\n\n\n\n\n\u6614\u3005\u66f8\u3044\u3066\u3044\u305f\u30d6\u30ed\u30b0\u306b\u306f\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u6a5f\u80fd\u304c\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u753b\u50cf\u306eURL\u4e00\u89a7\u306fcurl\u3084grep\u3067\u4f5c\u3063\u305f\u3093\u3067\u3059\u304cURL\u304c/Img?hogehoge\u307f\u305f\u3044\u306a\u5f62\u5f0f\u306a\u306e\u3067wget -i \u3067\u4fdd\u5b58\u3057\u3066\u3082Img0.1\u3068\u304bImg0.2\u3068\u304b\u306b\u306a\u3063\u3061\u3083\u3044\u307e\u3057\u305f\u3002\n\n\u3088\u304f\u3088\u304f\u63a2\u305b\u3070curl\u3084\u3089wget\u3067\u3046\u307e\u3044\u3053\u3068\u3084\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308b\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u63a2\u3059\u306e\u3082\u9762\u5012\u306a\u306e\u3067\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30d5\u30a1\u30a4\u30eb\u540d\u306fLast-Modified\u304b\u3089\u66f4\u65b0\u5e74\u6708\u65e5\u3001context-type\u304b\u3089\u62e1\u5f35\u5b50\u3092\u53d6\u3063\u3066\u3044\u307e\u3059\u3002\n\u540c\u3058\u66f4\u65b0\u5e74\u6708\u65e5\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u3063\u305f\u306e\u3067\u901a\u3057\u756a\u53f7\u3082\u3064\u3051\u3066\u307e\u3059\u3002\n\n## \u4f7f\u3044\u65b9\n```\ncat url_list.txt | python get-contents.py\n```\n\n## \u30b9\u30af\u30ea\u30d7\u30c8\n\n```python:get-contents.py\n# -*- coding: utf-8 -*-\n\nimport sys\nimport requests\nimport datetime\nimport struct\n\ncnt = 0\nfor line in sys.stdin.readlines():\n    r = requests.get(line.strip())\n    # print(r.headers)\n    ext = (r.headers['Content-Type'].split('/'))[1]\n    lm = datetime.datetime.strptime(\n        r.headers['Last-Modified'], '%a, %d %b %Y %H:%M:%S GMT')\n    fname = lm.strftime('%Y%m%d-%H%M%S') + ('-%03d.' % cnt) + ext\n    print(fname)\n    with open(fname, \"wb\") as fout:\n        for x in r.content:\n            fout.write(struct.pack(\"B\", x))\n    cnt = cnt + 1\n\n``` \n", "tags": ["wget", "Python"]}