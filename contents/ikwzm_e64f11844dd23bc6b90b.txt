{"context": "\n\n\u306f\u3058\u3081\u306b\nXilinx \u793e\u306eFPGA\u958b\u767a\u74b0\u5883\u306e Vivado SDK\u3001\u3044\u3061\u3044\u3061 GUI \u3067\u30de\u30a6\u30b9\u30dc\u30bf\u30f3\u3092\u30dd\u30c1\u30dd\u30c1\u3059\u308b\u306e\u306f\u9762\u5012\u3067\u3059\u3002\nVivado SDK \u306f Tcl \u30b9\u30af\u30ea\u30d7\u30c8\u3067\u30d0\u30c3\u30c1\u51e6\u7406\u304c\u51fa\u6765\u308b\u306e\u3067\u3001\u6c7a\u307e\u308a\u5207\u3063\u305f\u4ed5\u4e8b\u306a\u3089 Tcl \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u3066\u51e6\u7406\u3055\u305b\u305f\u307b\u3046\u304c\u697d\u3067\u3059\u3002\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001Vivado SDK \u3067 Zynq \u306e FSBL(First Stage Boot Loader)\u3092\u81ea\u52d5\u7684\u306b\u751f\u6210\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n\u74b0\u5883\n\nXilinx Vivado SDK 2015.4\nXilinx Vivado SDK 2016.4\n\n\n\u624b\u9806\n\n\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30b9\u30da\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u3066\u304a\u304f\n\u3053\u306e Tcl \u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306f\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9(\u5f8c\u8ff0)\u306e\u4e0b\u306b\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30b9\u30da\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u901a\u5e38\u306f Vivado \u3067\u30a4\u30f3\u30d7\u30ea\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3057\u305f\u5f8c\u3001Export > Export Hardware... \u3067\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30b9\u30da\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u307e\u305f\u3001\u3053\u3061\u3089\u306e\u8a18\u4e8b(Vivado\u3067\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u60c5\u5831\u3092\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308bTcl\u30b9\u30af\u30ea\u30d7\u30c8)\u3082\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nTcl\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u7528\u610f\u3059\u308b\n\u307e\u305a\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u5168\u4f53\u3092\u793a\u3057\u307e\u3059\u3002\n\nbuild_fsbl.tcl\n#!/usr/bin/tclsh\n\nset app_name            \"fsbl\"\nset app_type            {Zynq FSBL}\nset bsp_name            \"fsbl_bsp\"\nset hw_name             \"design_1_wrapper_hw_platform_0\"\nset hwspec_file         \"design_1_wrapper.hdf\"\nset proc_name           \"ps7_cortexa9_0\"\nset project_directory   [file dirname [info script]]\nset workspace           [file join $project_directory \"project.sdk\"]\n\nif {[info commands sdk::setws] ne \"\"} {\n    sdk setws         $sdk_workspace\n} else {\n    sdk set_workspace $sdk_workspace\n}\n\nif {[info commands sdk::createhw] ne \"\"} {\n    sdk createhw          -name $hw_name -hwspec [file join $sdk_workspace $hwspec_file]\n} else {\n    sdk create_hw_project -name $hw_name -hwspec [file join $sdk_workspace $hwspec_file]\n}\n\nhsi::open_hw_design  [file join $workspace $hw_name \"system.hdf\"]\nhsi::create_sw_design $bsp_name -proc $proc_name -os standalone\nhsi::add_library xilffs\nhsi::generate_bsp -sw $bsp_name -dir [file join $workspace $bsp_name] -compile\nhsi::close_sw_design  $bsp_name\n\nif {[info commands sdk::createapp] ne \"\"} {\n    sdk createapp          -name $app_name -hwproject $hw_name -proc $proc_name -os standalone -lang C -app $app_type -bsp $bsp_name\n} else {\n    sdk create_app_project -name $app_name -hwproject $hw_name -proc $proc_name -os standalone -lang C -app $app_type -bsp $bsp_name\n}\n\nif {[info commands sdk::projects] ne \"\"} {\n    sdk projects -build\n} else {\n    sdk build_project $app_name\n}\n\nexit\n\n\n\nVivado SDK \u3092\u5b9f\u884c\u3059\u308b\nVivado SDK \u306e\u30d0\u30c3\u30c1\u30e2\u30fc\u30c9\u3067\u524d\u7bc0\u306e Tcl\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u3053\u308c\u3067\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9(\u5f8c\u8ff0)\u306e\u4e0b\u306e fsbl/Release \u306b fsbl.elf \u304c\u51fa\u6765\u3066\u3044\u308c\u3070\u6210\u529f\u3067\u3059\u3002\nVivado% xsdk -batch -source build_fsbl.tcl\n\n\nTcl\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8aac\u660e\n\n\u5404\u7a2e\u5b9a\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u304f\n\u307e\u305a\u306f\u69d8\u3005\u306a\u5b9a\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u3053\u306e\u4f8b\u3067\u306f\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30b9\u30da\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u306e\u540d\u524d\u3092 design_1_wrapper.hdf \u3068\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u5b9f\u969b\u306b\u306f Vivado \u3067 Export \u3057\u305f\u6642\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\nbuild_fsbl.tcl\n\nset app_name            \"fsbl\"\nset app_type            {Zynq FSBL}\nset bsp_name            \"fsbl_bsp\"\nset hw_name             \"design_1_wrapper_hw_platform_0\"\nset hwspec_file         \"design_1_wrapper.hdf\"\nset proc_name           \"ps7_cortexa9_0\"\n\n\n\n\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\nVivado SDK \u306f\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f Tcl\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e0b\u306e project.sdk \u3068\u3044\u3046\u540d\u524d\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3068\u3057\u3066\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nSDK 2016.1 \u3042\u305f\u308a\u304b\u3089 set_workspace \u30b3\u30de\u30f3\u30c9\u3067\u306f\u306a\u304f setws \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u3053\u3068\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001setws \u30b3\u30de\u30f3\u30c9\u304c\u5b58\u5728\u3059\u308b\u306a\u3089\u3070\u305d\u3061\u3089\u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\nbuild_fsbl.tcl\nset project_directory   [file dirname [info script]]\nset workspace           [file join $project_directory \"project.sdk\"]\nif {[info commands sdk::setws] ne \"\"} {\n    sdk setws         $sdk_workspace\n} else {\n    sdk set_workspace $sdk_workspace\n}\n\n\n\n\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\n\u3053\u3053\u3067\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u306e\u4e0b\u306b\u4e8b\u524d\u306b\u7528\u610f\u3057\u3066\u304a\u3044\u305f\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30b9\u30da\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\nSDK 2016.1 \u3042\u305f\u308a\u304b\u3089 create_hw_project \u30b3\u30de\u30f3\u30c9\u3067\u306f\u306a\u304f createhw \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u3053\u3068\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001createhw \u30b3\u30de\u30f3\u30c9\u304c\u5b58\u5728\u3059\u308b\u306a\u3089\u3070\u305d\u3061\u3089\u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\nbuild_fsbl.tcl\nif {[info commands sdk::createhw] ne \"\"} {\n    sdk createhw          -name $hw_name -hwspec [file join $sdk_workspace $hwspec_file]\n} else {\n    sdk create_hw_project -name $hw_name -hwspec [file join $sdk_workspace $hwspec_file]\n}\n\n\n\nBSP(Board Support Package)\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\nBSP\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\u306b\u306f\u3061\u3087\u3063\u3068\u3057\u305f\u30b3\u30c4(\u3068\u3044\u3046\u304bVivado SDK \u306e\u30d0\u30b0\u56de\u907f\uff1f)\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u672c\u6765\u306a\u3089\u3001\u6b21\u306e\u3088\u3046\u306b create_bsp_project \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\u306e\u304c\u30b9\u30b8\u306a\u306e\u3067\u3059\u304c\u3001\n\nbuild_fsbl.tcl\nsdk create_bsp_project -name $bsp_name -hwproject $hw_name -proc $proc_name -os standalone\n\n\n\u4f55\u6545\u304b Vivado SDK 2015.4(\u4ee5\u524d)\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306f\u3001\u6b21\u306e\u30d5\u30a7\u30fc\u30ba\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u751f\u6210\u6642\u306b\u6b21\u306e\u3088\u3046\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u3066\u5931\u6557\u3057\u307e\u3059\u3002\nBSP project 'fsbl_bsp' created successfully.\nSpecified template name 'Zynq FSBL' is not valid for configuration. Reason: This\n application requires xilffs and xilrsa libraries in the Board Support Package..\n List of valid names are Empty Application, Zynq DRAM tests, Peripheral Tests, H\nello World, Memory Tests, Dhrystone.\nFailed to create Application project 'fsbl'.\nFailed to create Application project fsbl.\n    while executing\n\"error [dict get $msg err]\"\n    (procedure \"xsdk_eval\" line 15)\n    invoked from within\n\"xsdk_eval $chan createProject \"o{$fmt}\" e [list $data]\"\n    (procedure \"::xsdb::sdk::create_app_project\" line 43)\n    invoked from within\n\"sdk create_app_project -name $app_name -hwproject $hw_name -proc $proc_name -os\n standalone -lang C -app $app_type -bsp $bsp_name\"\n\n\u3069\u3046\u3084\u3089\u3001xilffs \u3068 xilrsa \u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u7121\u3044\u3068\u8a00\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u3053\u3053\u3067\u8e93\u304d\u307e\u3057\u305f\u304c\u3001\u3053\u3061\u3089(AR# 63384)\u306b\u89e3\u6c7a\u7b56\u304c\u8f09\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n\u6b21\u306e\u3088\u3046\u306b BSP(Board Support Package)\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b xilffs \u30e9\u30a4\u30d6\u30e9\u30ea\u3092(\u5f37\u5f15\u306b\uff1f)\u8ffd\u52a0\u3057\u3066\u3084\u308c\u3070\u3001\u4e0a\u624b\u304f\u3044\u304f\u3088\u3046\u3067\u3059\u3002\n\nbuild_fsbl.tcl\nhsi::open_hw_design  [file join $workspace $hw_name \"system.hdf\"]\nhsi::create_sw_design $bsp_name -proc $proc_name -os standalone\nhsi::add_library xilffs\nhsi::generate_bsp -sw $bsp_name -dir [file join $workspace $bsp_name] -compile\nhsi::close_sw_design  $bsp_name\n\n\ncreate_bsp_project \u3092\u4f7f\u308f\u305a\u306b\u3001\u307e\u305a\u306f create_sw_design \u3067\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u3063\u3066 xilffs \u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8ffd\u52a0\u3057\u3066\u304b\u3089 generate_bsp \u3067 BSP(Board Support Package)\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\ncreate_app_project \u3092\u4f7f\u3063\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3(Zynq FSBL)\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308a\u307e\u3059\u3002\nSDK 2016.1 \u3042\u305f\u308a\u304b\u3089 create_app_project \u30b3\u30de\u30f3\u30c9\u3067\u306f\u306a\u304f createapp \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u3053\u3068\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001createapp \u30b3\u30de\u30f3\u30c9\u304c\u5b58\u5728\u3059\u308b\u306a\u3089\u3070\u305d\u3061\u3089\u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\nbuild_fsbl.tcl\nif {[info commands sdk::createapp] ne \"\"} {\n    sdk createapp          -name $app_name -hwproject $hw_name -proc $proc_name -os standalone -lang C -app $app_type -bsp $bsp_name\n} else {\n    sdk create_app_project -name $app_name -hwproject $hw_name -proc $proc_name -os standalone -lang C -app $app_type -bsp $bsp_name\n}\n\n\n\nFSBL\u3092\u30d3\u30eb\u30c9\u3059\u308b\nbuild_project \u3092\u4f7f\u3063\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3(Zynq FSBL)\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\nSDK 2016.1 \u4ee5\u964d\u3001build_project \u30b3\u30de\u30f3\u30c9\u3067\u306f\u306a\u304f projects -build \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\n\nbuild_fsbl.tcl\nif {[info commands sdk::projects] ne \"\"} {\n    sdk projects -build\n} else {\n    sdk build_project $app_name\n}\n\n\n\n\u53c2\u8003\n\nGenerating Basic Software Platforms Reference Guide UG1138(v2014.4) November 19,2014\nUsing SDK Batch Mode\nAR# 63384 2014.4 - SDK - \u30d0\u30c3\u30c1 \u30e2\u30fc\u30c9\u3067 SDK \u3092\u4f7f\u7528\u3059\u308b SDK \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\u65b9\u6cd5\nVivado\u3092GUI\u3092\u4f7f\u308f\u305a\u306b\u5b9f\u884c\u3059\u308b\u305f\u3081\u306eTcl\u30b9\u30af\u30ea\u30d7\u30c8\u9054\n\n#\u306f\u3058\u3081\u306b\n\nXilinx \u793e\u306eFPGA\u958b\u767a\u74b0\u5883\u306e Vivado SDK\u3001\u3044\u3061\u3044\u3061 GUI \u3067\u30de\u30a6\u30b9\u30dc\u30bf\u30f3\u3092\u30dd\u30c1\u30dd\u30c1\u3059\u308b\u306e\u306f\u9762\u5012\u3067\u3059\u3002\nVivado SDK \u306f Tcl \u30b9\u30af\u30ea\u30d7\u30c8\u3067\u30d0\u30c3\u30c1\u51e6\u7406\u304c\u51fa\u6765\u308b\u306e\u3067\u3001\u6c7a\u307e\u308a\u5207\u3063\u305f\u4ed5\u4e8b\u306a\u3089 Tcl \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u3066\u51e6\u7406\u3055\u305b\u305f\u307b\u3046\u304c\u697d\u3067\u3059\u3002\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001Vivado SDK \u3067 Zynq \u306e FSBL(First Stage Boot Loader)\u3092\u81ea\u52d5\u7684\u306b\u751f\u6210\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n#\u74b0\u5883\n\n - Xilinx Vivado SDK 2015.4\n - Xilinx Vivado SDK 2016.4\n\n#\u624b\u9806\n\n##\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30b9\u30da\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u3066\u304a\u304f\n\n\u3053\u306e Tcl \u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306f\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9(\u5f8c\u8ff0)\u306e\u4e0b\u306b\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30b9\u30da\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u901a\u5e38\u306f Vivado \u3067\u30a4\u30f3\u30d7\u30ea\u30e1\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3\u3057\u305f\u5f8c\u3001Export > Export Hardware... \u3067\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30b9\u30da\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u307e\u305f\u3001\u3053\u3061\u3089\u306e\u8a18\u4e8b([Vivado\u3067\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u60c5\u5831\u3092\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308bTcl\u30b9\u30af\u30ea\u30d7\u30c8](http://qiita.com/ikwzm/items/057d67d4a9e0828663cf))\u3082\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n##Tcl\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u7528\u610f\u3059\u308b\n\n\u307e\u305a\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u5168\u4f53\u3092\u793a\u3057\u307e\u3059\u3002\n\n````Tcl:build_fsbl.tcl\n#!/usr/bin/tclsh\n\nset app_name            \"fsbl\"\nset app_type            {Zynq FSBL}\nset bsp_name            \"fsbl_bsp\"\nset hw_name             \"design_1_wrapper_hw_platform_0\"\nset hwspec_file         \"design_1_wrapper.hdf\"\nset proc_name           \"ps7_cortexa9_0\"\nset project_directory   [file dirname [info script]]\nset workspace           [file join $project_directory \"project.sdk\"]\n\nif {[info commands sdk::setws] ne \"\"} {\n    sdk setws         $sdk_workspace\n} else {\n    sdk set_workspace $sdk_workspace\n}\n\nif {[info commands sdk::createhw] ne \"\"} {\n    sdk createhw          -name $hw_name -hwspec [file join $sdk_workspace $hwspec_file]\n} else {\n    sdk create_hw_project -name $hw_name -hwspec [file join $sdk_workspace $hwspec_file]\n}\n\nhsi::open_hw_design  [file join $workspace $hw_name \"system.hdf\"]\nhsi::create_sw_design $bsp_name -proc $proc_name -os standalone\nhsi::add_library xilffs\nhsi::generate_bsp -sw $bsp_name -dir [file join $workspace $bsp_name] -compile\nhsi::close_sw_design  $bsp_name\n\nif {[info commands sdk::createapp] ne \"\"} {\n    sdk createapp          -name $app_name -hwproject $hw_name -proc $proc_name -os standalone -lang C -app $app_type -bsp $bsp_name\n} else {\n    sdk create_app_project -name $app_name -hwproject $hw_name -proc $proc_name -os standalone -lang C -app $app_type -bsp $bsp_name\n}\n\nif {[info commands sdk::projects] ne \"\"} {\n    sdk projects -build\n} else {\n    sdk build_project $app_name\n}\n\nexit\n````\n\n##Vivado SDK \u3092\u5b9f\u884c\u3059\u308b\n\nVivado SDK \u306e\u30d0\u30c3\u30c1\u30e2\u30fc\u30c9\u3067\u524d\u7bc0\u306e Tcl\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u3053\u308c\u3067\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9(\u5f8c\u8ff0)\u306e\u4e0b\u306e fsbl/Release \u306b fsbl.elf \u304c\u51fa\u6765\u3066\u3044\u308c\u3070\u6210\u529f\u3067\u3059\u3002\n\n````shell\nVivado% xsdk -batch -source build_fsbl.tcl\n````\n\n#Tcl\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8aac\u660e\n\n##\u5404\u7a2e\u5b9a\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u304f\n\n\u307e\u305a\u306f\u69d8\u3005\u306a\u5b9a\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u3053\u306e\u4f8b\u3067\u306f\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30b9\u30da\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u306e\u540d\u524d\u3092 design_1_wrapper.hdf \u3068\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u5b9f\u969b\u306b\u306f Vivado \u3067 Export \u3057\u305f\u6642\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n````Tcl:build_fsbl.tcl\n\nset app_name            \"fsbl\"\nset app_type            {Zynq FSBL}\nset bsp_name            \"fsbl_bsp\"\nset hw_name             \"design_1_wrapper_hw_platform_0\"\nset hwspec_file         \"design_1_wrapper.hdf\"\nset proc_name           \"ps7_cortexa9_0\"\n````\n\n##\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\n\nVivado SDK \u306f\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f Tcl\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e0b\u306e project.sdk \u3068\u3044\u3046\u540d\u524d\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3068\u3057\u3066\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nSDK 2016.1 \u3042\u305f\u308a\u304b\u3089 set_workspace \u30b3\u30de\u30f3\u30c9\u3067\u306f\u306a\u304f setws \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u3053\u3068\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001setws \u30b3\u30de\u30f3\u30c9\u304c\u5b58\u5728\u3059\u308b\u306a\u3089\u3070\u305d\u3061\u3089\u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n````Tcl:build_fsbl.tcl\nset project_directory   [file dirname [info script]]\nset workspace           [file join $project_directory \"project.sdk\"]\nif {[info commands sdk::setws] ne \"\"} {\n    sdk setws         $sdk_workspace\n} else {\n    sdk set_workspace $sdk_workspace\n}\n````\n\n##\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\n\n\u3053\u3053\u3067\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u306e\u4e0b\u306b\u4e8b\u524d\u306b\u7528\u610f\u3057\u3066\u304a\u3044\u305f\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30b9\u30da\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\nSDK 2016.1 \u3042\u305f\u308a\u304b\u3089 create_hw_project \u30b3\u30de\u30f3\u30c9\u3067\u306f\u306a\u304f createhw \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u3053\u3068\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001createhw \u30b3\u30de\u30f3\u30c9\u304c\u5b58\u5728\u3059\u308b\u306a\u3089\u3070\u305d\u3061\u3089\u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n````Tcl:build_fsbl.tcl\nif {[info commands sdk::createhw] ne \"\"} {\n    sdk createhw          -name $hw_name -hwspec [file join $sdk_workspace $hwspec_file]\n} else {\n    sdk create_hw_project -name $hw_name -hwspec [file join $sdk_workspace $hwspec_file]\n}\n````\n\n##BSP(Board Support Package)\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\n\nBSP\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\u306b\u306f\u3061\u3087\u3063\u3068\u3057\u305f\u30b3\u30c4~~(\u3068\u3044\u3046\u304bVivado SDK \u306e\u30d0\u30b0\u56de\u907f\uff1f)~~\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u672c\u6765\u306a\u3089\u3001\u6b21\u306e\u3088\u3046\u306b create_bsp_project \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\u306e\u304c\u30b9\u30b8\u306a\u306e\u3067\u3059\u304c\u3001\n\n````Tcl:build_fsbl.tcl\nsdk create_bsp_project -name $bsp_name -hwproject $hw_name -proc $proc_name -os standalone\n````\n\n\u4f55\u6545\u304b Vivado SDK 2015.4(\u4ee5\u524d)\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306f\u3001\u6b21\u306e\u30d5\u30a7\u30fc\u30ba\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u751f\u6210\u6642\u306b\u6b21\u306e\u3088\u3046\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u3066\u5931\u6557\u3057\u307e\u3059\u3002\n\n````shell\nBSP project 'fsbl_bsp' created successfully.\nSpecified template name 'Zynq FSBL' is not valid for configuration. Reason: This\n application requires xilffs and xilrsa libraries in the Board Support Package..\n List of valid names are Empty Application, Zynq DRAM tests, Peripheral Tests, H\nello World, Memory Tests, Dhrystone.\nFailed to create Application project 'fsbl'.\nFailed to create Application project fsbl.\n    while executing\n\"error [dict get $msg err]\"\n    (procedure \"xsdk_eval\" line 15)\n    invoked from within\n\"xsdk_eval $chan createProject \"o{$fmt}\" e [list $data]\"\n    (procedure \"::xsdb::sdk::create_app_project\" line 43)\n    invoked from within\n\"sdk create_app_project -name $app_name -hwproject $hw_name -proc $proc_name -os\n standalone -lang C -app $app_type -bsp $bsp_name\"\n````\n\n\u3069\u3046\u3084\u3089\u3001xilffs \u3068 xilrsa \u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u7121\u3044\u3068\u8a00\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u3053\u3053\u3067\u8e93\u304d\u307e\u3057\u305f\u304c\u3001[\u3053\u3061\u3089(AR# 63384)](http://japan.xilinx.com/support/answers/63384.html)\u306b\u89e3\u6c7a\u7b56\u304c\u8f09\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n\u6b21\u306e\u3088\u3046\u306b BSP(Board Support Package)\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b xilffs \u30e9\u30a4\u30d6\u30e9\u30ea\u3092~~(\u5f37\u5f15\u306b\uff1f)~~\u8ffd\u52a0\u3057\u3066\u3084\u308c\u3070\u3001\u4e0a\u624b\u304f\u3044\u304f\u3088\u3046\u3067\u3059\u3002\n\n````Tcl:build_fsbl.tcl\nhsi::open_hw_design  [file join $workspace $hw_name \"system.hdf\"]\nhsi::create_sw_design $bsp_name -proc $proc_name -os standalone\nhsi::add_library xilffs\nhsi::generate_bsp -sw $bsp_name -dir [file join $workspace $bsp_name] -compile\nhsi::close_sw_design  $bsp_name\n````\ncreate_bsp_project \u3092\u4f7f\u308f\u305a\u306b\u3001\u307e\u305a\u306f create_sw_design \u3067\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u3063\u3066 xilffs \u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8ffd\u52a0\u3057\u3066\u304b\u3089 generate_bsp \u3067 BSP(Board Support Package)\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\u3088\u3046\u3067\u3059\u3002\n\n##\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\n\ncreate_app_project \u3092\u4f7f\u3063\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3(Zynq FSBL)\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308a\u307e\u3059\u3002\nSDK 2016.1 \u3042\u305f\u308a\u304b\u3089 create_app_project \u30b3\u30de\u30f3\u30c9\u3067\u306f\u306a\u304f createapp \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u3053\u3068\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001createapp \u30b3\u30de\u30f3\u30c9\u304c\u5b58\u5728\u3059\u308b\u306a\u3089\u3070\u305d\u3061\u3089\u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n````Tcl:build_fsbl.tcl\nif {[info commands sdk::createapp] ne \"\"} {\n    sdk createapp          -name $app_name -hwproject $hw_name -proc $proc_name -os standalone -lang C -app $app_type -bsp $bsp_name\n} else {\n    sdk create_app_project -name $app_name -hwproject $hw_name -proc $proc_name -os standalone -lang C -app $app_type -bsp $bsp_name\n}\n````\n\n##FSBL\u3092\u30d3\u30eb\u30c9\u3059\u308b\n\nbuild_project \u3092\u4f7f\u3063\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3(Zynq FSBL)\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\nSDK 2016.1 \u4ee5\u964d\u3001build_project \u30b3\u30de\u30f3\u30c9\u3067\u306f\u306a\u304f projects -build \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\n\n````Tcl:build_fsbl.tcl\nif {[info commands sdk::projects] ne \"\"} {\n    sdk projects -build\n} else {\n    sdk build_project $app_name\n}\n````\n\n#\u53c2\u8003\n\n- [Generating Basic Software Platforms Reference Guide UG1138(v2014.4) November 19,2014](http://www.xilinx.com/support/documentation/sw_manuals_j/xilinx2014_4/ug1138-generating-basic-software-platforms.pdf)\n- [Using SDK Batch Mode](http://www.xilinx.com/support/documentation/sw_manuals/xilinx2014_3/SDK_Doc/concepts/sdk_c_batch_mode.htm)\n- [AR# 63384 2014.4 - SDK - \u30d0\u30c3\u30c1 \u30e2\u30fc\u30c9\u3067 SDK \u3092\u4f7f\u7528\u3059\u308b SDK \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\u65b9\u6cd5](http://japan.xilinx.com/support/answers/63384.html)\n- [Vivado\u3092GUI\u3092\u4f7f\u308f\u305a\u306b\u5b9f\u884c\u3059\u308b\u305f\u3081\u306eTcl\u30b9\u30af\u30ea\u30d7\u30c8\u9054](http://qiita.com/ikwzm/items/a0120079d2f7f86a5904)\n\n\n\n", "tags": ["Vivado", "zynq", "FPGA", "Tcl"]}