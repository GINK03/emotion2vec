{"context": " More than 1 year has passed since last update.Kotlin\u3067ROS\u3092\u66f8\u3044\u3066\u307f\u305f\u304f\u306a\u3063\u305f\u306e\u3067\u9811\u5f35\u3063\u3066\u307f\u305f\nROS\u3082kotlin\u3082gradle\u3082\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u9593\u9055\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u3082\u3042\u308b\u306e\u3067\u3001\u5206\u304b\u308b\u65b9\u6307\u6458\u304f\u3060\u3055\u3044\u3002\ngithub\n\n\u624b\u9806\n\nRosJava\u3092\u5165\u308c\u308b\nRosJava\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\nbuild.gradle\u306bkotlin\u95a2\u4fc2\u306e\u30b3\u30fc\u30c9\u3092\u8ffd\u8a18\u3059\u308b\nkotlin\u3067\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\u30d3\u30eb\u30c9\n\n\u624b\u98062\u307e\u3067\u306f \u524d\u306e\u8a18\u4e8b \u3092\u53c2\u8003\u306b\n\nbuild.gradle\u306ekotlin\u95a2\u4fc2\u306e\u30b3\u30fc\u30c9\u3092\u8ffd\u8a18\u3059\u308b\nkotlin\u306egithub\u3092\u53c2\u8003\u306b\u4ee5\u4e0b\u306e\u69d8\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306ebuild.gradle\u3092\u66f8\u304d\u63db\u3048\u308b\u3002\u6c17\u3092\u3064\u3051\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u304c\u3001gradlew\u3068\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3082build.gradle\u304c\u3042\u308b\u3053\u3068\u3002\u305d\u3063\u3061\u306f\u3044\u3058\u3089\u306a\u3044\u3002\n\nroskotlin/src/iwatan/sample/build.gradle\n/* This plugin is necessary for creating installApp tasks (i.e. executables) */\napply plugin: 'application'\nmainClassName = 'org.ros.RosRun'\n\n/* \n Dependencies can be on external maven artifacts (such as rosjava_core\n here) or on sibling subprojects. Fpr external maven artifact dependencies\n it's convenient to use an open ranged dependency, but restrict it to\n cover the patch version only to avoid breakages due to api changes\n which usually occur on minor and major version numbers.\n*/\n\ndependencies {\n  /* An external maven artifact dependency */\n  compile 'org.ros.rosjava_core:rosjava:[0.2,0.3)'\n  /* Example of a local subproject dependency */ \n  /* compile project(':sibling_gradle_project') */\n}\n\n/* \u3053\u3053\u304b\u3089\u8ffd\u8a18 */\nbuildscript {\n    repositories {\n        mavenCentral()\n        maven {\n            url 'http://oss.sonatype.org/content/repositories/snapshots'\n        }\n    }\n    dependencies {\n        classpath 'org.jetbrains.kotlin:kotlin-gradle-plugin:0.1-SNAPSHOT'\n    }\n}\n\napply plugin: \"kotlin\"\n\nsourceSets {\n    deploy\n}\n\nrepositories {\n    mavenCentral()\n    maven {\n        url 'http://oss.sonatype.org/content/repositories/snapshots'\n    }\n}\n\ndependencies {\n    compile 'com.google.guava:guava:12.0'\n    compile 'org.jetbrains.kotlin:kotlin-stdlib:0.1-SNAPSHOT'\n    deployCompile 'com.google.guava:guava:12.0'\n    testCompile  'org.testng:testng:6.8'\n}\n\ntest.testClassesDir = project.tasks.compileTestKotlin.destinationDir\n\n\n\nkotlin\u3067\u30b3\u30fc\u30c9\u3092\u66f8\u304f\nIntelliJ\u306eKotlin\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u3063\u3066rosjava\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u30b3\u30f3\u30d0\u30fc\u30c8\u3057\u3066\u307f\u305f\u3089\u3001\u305d\u306e\u307e\u307e\u3067\u306f\u52d5\u304b\u306a\u304b\u3063\u305f\u3002\noverride\u304c\u5927\u6587\u5b57\u59cb\u307e\u308a\u306b\u306a\u3063\u305f\u308a\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u7121\u3044\u3068\u8a00\u308f\u308c\u305f\u308a\u3001\u578b\u63a8\u8ad6\u304c\u51fa\u6765\u306a\u3044\u3068\u6012\u3089\u308c\u305f\u3002\n\u8272\u3005\u8a66\u884c\u932f\u8aa4\u3057\u3066\u307f\u305f\u7d50\u679c\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u52d5\u3044\u305f\n\nroskotlin/src/iwatan/sample/src/main/kotlin/main.kt\npackage iwatan.kotlin.sample\n\nimport org.ros.message.MessageListener\nimport org.ros.namespace.GraphName\nimport org.ros.node.AbstractNodeMain\nimport org.ros.node.ConnectedNode\nimport org.ros.node.NodeMain\nimport org.ros.node.topic.Subscriber\n\npublic class Listener() : AbstractNodeMain() {\n\n    override\n    public fun getDefaultNodeName(): GraphName {\n        return GraphName.of(\"roskotlin/listener\")\n    }\n\n    override\n    public fun onStart(connectedNode: ConnectedNode) {\n        val log = connectedNode.getLog()\n        val subscriber = connectedNode.newSubscriber<std_msgs.String>(\"chatter\", std_msgs.String._TYPE)\n        subscriber.addMessageListener { message ->\n            log.info(\"Kotlin heard: \\\"\" + message.getData() + \"\\\"\")\n        }\n    }\n}\n\n\njava\u3088\u308a\u3082subscriber.addMessageListener\u306e\u90e8\u5206\u304c\u95a2\u6570\u30ea\u30c6\u30e9\u30eb\u3067\u3082\u3046\u30c1\u30e7\u30c3\u30c8\u7c21\u5358\u306b\u304b\u3051\u308b\u304b\u3068\u601d\u3063\u305f\u3089\u306a\u3093\u304b\u4e0a\u624b\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u3053\u306e\u5f62\u306b\u843d\u3061\u7740\u3044\u305f\u3002\u306a\u3093\u3067\u304b\u3088\u304f\u5206\u304b\u3089\u3093\u3002\n\n\u30d3\u30eb\u30c9\nrosjava\u3068\u540c\u3058\u304f\u3001gradlew\u3092\u4f7f\u3063\u3066\u30d3\u30eb\u30c9\u3059\u308b\n./gradlew installApp\n\n\u305d\u3046\u3059\u308b\u3068\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u3066\u304f\u308b\u3002\u591a\u5206\u521d\u3081\u306f\u4f9d\u5b58\u95a2\u4fc2\u306e\u89e3\u6c7a\u3067\u6642\u9593\u304c\u304b\u304b\u308b\u3068\u601d\u3046\u3002\n:sample:compileKotlin\n:sample:compileJava UP-TO-DATE\n:sample:processResources UP-TO-DATE\n:sample:classes UP-TO-DATE\n:sample:jar\n:sample:startScripts\n:sample:installApp\n\nBUILD SUCCESSFUL\n\nTotal time: 11.639 secs\n\n\u3053\u3093\u306a\u611f\u3058\u3067compileKotlin\u304c\u51fa\u3066\u6765\u3066\u308b\uff01\n\n\u5b9f\u884c\n\u5b9f\u884c\u306frosjava\u3068\u540c\u3058\u304f\u3001src/build/install/bin\u306b\u30d0\u30a4\u30ca\u30ea\u304c\u3042\u308b\u306e\u3067\u3001\u4ee5\u4e0b\u3067\u5b9f\u884c\u3059\u308b\u3002\ncd src/iwatan/sample/build/install/sample/bin\n./sample iwatan.kotlin.sample.Listener\n\n\u5225\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3067rosjava\u306e\u30b5\u30f3\u30d7\u30eb\u306eTalker\u3092\u8d77\u52d5\u3057\u3066\u304a\u304f\u3068\u3001\u4ee5\u4e0b\u306e\u611f\u3058\u306b\u30c8\u30d4\u30c3\u30af\u304c\u8cfc\u8aad\u3055\u308c\u3066\u308b\u306e\u304c\u898b\u308c\u308b\n\n\nKotlin\u3067ROS\u3092\u66f8\u3044\u3066\u307f\u305f\u304f\u306a\u3063\u305f\u306e\u3067\u9811\u5f35\u3063\u3066\u307f\u305f\nROS\u3082kotlin\u3082gradle\u3082\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u9593\u9055\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u3082\u3042\u308b\u306e\u3067\u3001\u5206\u304b\u308b\u65b9\u6307\u6458\u304f\u3060\u3055\u3044\u3002\n\n[github](https://github.com/iwata-n/roskotlin)\n\n## \u624b\u9806\n\n1. RosJava\u3092\u5165\u308c\u308b\n2. RosJava\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\n3. build.gradle\u306bkotlin\u95a2\u4fc2\u306e\u30b3\u30fc\u30c9\u3092\u8ffd\u8a18\u3059\u308b\n4. kotlin\u3067\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n5. \u30d3\u30eb\u30c9\n\n\u624b\u98062\u307e\u3067\u306f [\u524d\u306e\u8a18\u4e8b](http://qiita.com/iwata-n@github/items/989bed3acc21ffb28521) \u3092\u53c2\u8003\u306b\n\n## build.gradle\u306ekotlin\u95a2\u4fc2\u306e\u30b3\u30fc\u30c9\u3092\u8ffd\u8a18\u3059\u308b\n\n[kotlin\u306egithub](https://github.com/JetBrains/kotlin-examples/blob/master/gradle/hello-world/build.gradle)\u3092\u53c2\u8003\u306b\u4ee5\u4e0b\u306e\u69d8\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306ebuild.gradle\u3092\u66f8\u304d\u63db\u3048\u308b\u3002\u6c17\u3092\u3064\u3051\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u304c\u3001gradlew\u3068\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3082build.gradle\u304c\u3042\u308b\u3053\u3068\u3002\u305d\u3063\u3061\u306f\u3044\u3058\u3089\u306a\u3044\u3002\n\n``` roskotlin/src/iwatan/sample/build.gradle\n/* This plugin is necessary for creating installApp tasks (i.e. executables) */\napply plugin: 'application'\nmainClassName = 'org.ros.RosRun'\n\n/* \n Dependencies can be on external maven artifacts (such as rosjava_core\n here) or on sibling subprojects. Fpr external maven artifact dependencies\n it's convenient to use an open ranged dependency, but restrict it to\n cover the patch version only to avoid breakages due to api changes\n which usually occur on minor and major version numbers.\n*/\n\ndependencies {\n  /* An external maven artifact dependency */\n  compile 'org.ros.rosjava_core:rosjava:[0.2,0.3)'\n  /* Example of a local subproject dependency */ \n  /* compile project(':sibling_gradle_project') */\n}\n\n/* \u3053\u3053\u304b\u3089\u8ffd\u8a18 */\nbuildscript {\n    repositories {\n        mavenCentral()\n        maven {\n            url 'http://oss.sonatype.org/content/repositories/snapshots'\n        }\n    }\n    dependencies {\n        classpath 'org.jetbrains.kotlin:kotlin-gradle-plugin:0.1-SNAPSHOT'\n    }\n}\n\napply plugin: \"kotlin\"\n\nsourceSets {\n    deploy\n}\n\nrepositories {\n    mavenCentral()\n    maven {\n        url 'http://oss.sonatype.org/content/repositories/snapshots'\n    }\n}\n\ndependencies {\n    compile 'com.google.guava:guava:12.0'\n    compile 'org.jetbrains.kotlin:kotlin-stdlib:0.1-SNAPSHOT'\n    deployCompile 'com.google.guava:guava:12.0'\n    testCompile  'org.testng:testng:6.8'\n}\n\ntest.testClassesDir = project.tasks.compileTestKotlin.destinationDir\n```\n\n## kotlin\u3067\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\nIntelliJ\u306eKotlin\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u3063\u3066rosjava\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u30b3\u30f3\u30d0\u30fc\u30c8\u3057\u3066\u307f\u305f\u3089\u3001\u305d\u306e\u307e\u307e\u3067\u306f\u52d5\u304b\u306a\u304b\u3063\u305f\u3002\noverride\u304c\u5927\u6587\u5b57\u59cb\u307e\u308a\u306b\u306a\u3063\u305f\u308a\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u7121\u3044\u3068\u8a00\u308f\u308c\u305f\u308a\u3001\u578b\u63a8\u8ad6\u304c\u51fa\u6765\u306a\u3044\u3068\u6012\u3089\u308c\u305f\u3002\n\u8272\u3005\u8a66\u884c\u932f\u8aa4\u3057\u3066\u307f\u305f\u7d50\u679c\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u52d5\u3044\u305f\n\n```roskotlin/src/iwatan/sample/src/main/kotlin/main.kt\npackage iwatan.kotlin.sample\n\nimport org.ros.message.MessageListener\nimport org.ros.namespace.GraphName\nimport org.ros.node.AbstractNodeMain\nimport org.ros.node.ConnectedNode\nimport org.ros.node.NodeMain\nimport org.ros.node.topic.Subscriber\n\npublic class Listener() : AbstractNodeMain() {\n\n    override\n    public fun getDefaultNodeName(): GraphName {\n        return GraphName.of(\"roskotlin/listener\")\n    }\n\n    override\n    public fun onStart(connectedNode: ConnectedNode) {\n        val log = connectedNode.getLog()\n        val subscriber = connectedNode.newSubscriber<std_msgs.String>(\"chatter\", std_msgs.String._TYPE)\n        subscriber.addMessageListener { message ->\n            log.info(\"Kotlin heard: \\\"\" + message.getData() + \"\\\"\")\n        }\n    }\n}\n```\n\njava\u3088\u308a\u3082subscriber.addMessageListener\u306e\u90e8\u5206\u304c\u95a2\u6570\u30ea\u30c6\u30e9\u30eb\u3067\u3082\u3046\u30c1\u30e7\u30c3\u30c8\u7c21\u5358\u306b\u304b\u3051\u308b\u304b\u3068\u601d\u3063\u305f\u3089\u306a\u3093\u304b\u4e0a\u624b\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u3053\u306e\u5f62\u306b\u843d\u3061\u7740\u3044\u305f\u3002\u306a\u3093\u3067\u304b\u3088\u304f\u5206\u304b\u3089\u3093\u3002\n\n## \u30d3\u30eb\u30c9\n\nrosjava\u3068\u540c\u3058\u304f\u3001gradlew\u3092\u4f7f\u3063\u3066\u30d3\u30eb\u30c9\u3059\u308b\n\n\n```bash\n./gradlew installApp\n```\n\n\u305d\u3046\u3059\u308b\u3068\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u3066\u304f\u308b\u3002\u591a\u5206\u521d\u3081\u306f\u4f9d\u5b58\u95a2\u4fc2\u306e\u89e3\u6c7a\u3067\u6642\u9593\u304c\u304b\u304b\u308b\u3068\u601d\u3046\u3002\n\n```\n:sample:compileKotlin\n:sample:compileJava UP-TO-DATE\n:sample:processResources UP-TO-DATE\n:sample:classes UP-TO-DATE\n:sample:jar\n:sample:startScripts\n:sample:installApp\n\nBUILD SUCCESSFUL\n\nTotal time: 11.639 secs\n```\n\n\u3053\u3093\u306a\u611f\u3058\u3067compileKotlin\u304c\u51fa\u3066\u6765\u3066\u308b\uff01\n\n## \u5b9f\u884c\n\n\u5b9f\u884c\u306frosjava\u3068\u540c\u3058\u304f\u3001src/build/install/bin\u306b\u30d0\u30a4\u30ca\u30ea\u304c\u3042\u308b\u306e\u3067\u3001\u4ee5\u4e0b\u3067\u5b9f\u884c\u3059\u308b\u3002\n\n```\ncd src/iwatan/sample/build/install/sample/bin\n./sample iwatan.kotlin.sample.Listener\n```\n\n\u5225\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3067rosjava\u306e\u30b5\u30f3\u30d7\u30eb\u306eTalker\u3092\u8d77\u52d5\u3057\u3066\u304a\u304f\u3068\u3001\u4ee5\u4e0b\u306e\u611f\u3058\u306b\u30c8\u30d4\u30c3\u30af\u304c\u8cfc\u8aad\u3055\u308c\u3066\u308b\u306e\u304c\u898b\u308c\u308b\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-08-09 20.34.12.png](https://qiita-image-store.s3.amazonaws.com/0/16612/fa688930-de3b-3485-20f4-2e5ea977c927.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-08-09 20.34.12.png\")\n", "tags": ["ROS", "Kotlin"]}