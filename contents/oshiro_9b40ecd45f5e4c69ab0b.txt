{"context": "GUI\u3067\u30dd\u30c1\u30dd\u30c1\u3059\u308b\u306e\u304c\u624b\u9593\u3060\u3063\u305f\u306e\u3067\u4f5c\u6210\u3002\nwercker ci\u304c\u4f7f\u7528\u3059\u308bIP\u30a2\u30c9\u30ec\u30b9\u306f\u4ee5\u4e0b\u304b\u3089\u53c2\u7167\u3002\nhttp://devcenter.wercker.com/docs/faq/what-ip-to-whitelist.html\n\u3053\u3053\u306ejson\u304c\u6700\u65b0\u3060\u305d\u3046\u3067\u3059\u306e\u3067\u3001\u3053\u306eIP\u306e\u30ea\u30b9\u30c8\u3092\u767b\u9332\u3059\u308b\u3002\nhttps://s3.amazonaws.com/status.wercker.com/worker_ips/production/public.json\n\nregister_whitelist.py\n#coding:utf-8\nimport json, commands\n\n# \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30fc\u30b0\u30eb\u30fc\u30d7\u306eID\nsg_id=\"sg-xxxxx\"\n\n# \u6a19\u6e96\u5165\u529b\u304b\u3089white list ip\u306e\u53d6\u5f97\nip_json = raw_input()\nprint \"input json: \" + ip_json\n\nfor ip in json.loads(ip_json):\n    cmd=\"aws ec2 authorize-security-group-ingress --group-id \"+ sg_id +\" --cidr \" + ip + \"/32 --port 22 --protocol tcp\"\n    print commands.getstatusoutput(cmd)\n\n\n\u5b9f\u884c\uff01\n$ curl https://s3.amazonaws.com/status.wercker.com/worker_ips/production/public.json | python register_whitelist.py\n\nGUI\u3067\u30dd\u30c1\u30dd\u30c1\u3059\u308b\u306e\u304c\u624b\u9593\u3060\u3063\u305f\u306e\u3067\u4f5c\u6210\u3002\n\nwercker ci\u304c\u4f7f\u7528\u3059\u308bIP\u30a2\u30c9\u30ec\u30b9\u306f\u4ee5\u4e0b\u304b\u3089\u53c2\u7167\u3002\nhttp://devcenter.wercker.com/docs/faq/what-ip-to-whitelist.html\n\n\u3053\u3053\u306ejson\u304c\u6700\u65b0\u3060\u305d\u3046\u3067\u3059\u306e\u3067\u3001\u3053\u306eIP\u306e\u30ea\u30b9\u30c8\u3092\u767b\u9332\u3059\u308b\u3002\nhttps://s3.amazonaws.com/status.wercker.com/worker_ips/production/public.json\n\n```python:register_whitelist.py\n#coding:utf-8\nimport json, commands\n\n# \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30fc\u30b0\u30eb\u30fc\u30d7\u306eID\nsg_id=\"sg-xxxxx\"\n\n# \u6a19\u6e96\u5165\u529b\u304b\u3089white list ip\u306e\u53d6\u5f97\nip_json = raw_input()\nprint \"input json: \" + ip_json\n\nfor ip in json.loads(ip_json):\n    cmd=\"aws ec2 authorize-security-group-ingress --group-id \"+ sg_id +\" --cidr \" + ip + \"/32 --port 22 --protocol tcp\"\n    print commands.getstatusoutput(cmd)\n```\n\n\u5b9f\u884c\uff01\n\n```\n$ curl https://s3.amazonaws.com/status.wercker.com/worker_ips/production/public.json | python register_whitelist.py\n```\n", "tags": ["Python", "wercker", "AWS"]}