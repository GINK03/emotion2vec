{"context": " More than 1 year has passed since last update.\n\nWhat's this?\nCinder volume \u306e snapshot \u4f5c\u6210\u3001\u305d\u306e snapshot \u304b\u3089\u65b0\u898f Cinder volume \u4f5c\u6210\n\nInitial state\n\nCinder volume\n# cinder list\n+--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n|                  ID                  |   Status  | Display Name | Size | Volume Type | Bootable | Attached to |\n+--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n| 5175d6be-735c-411e-be21-85015c332d99 | available | admin_vol01  |  1   |     None    |  false   |             |\n+--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n\n\nTake a snapshot of Cinder\n\nTake a snapshot of Cinder\n\nCinder command\n\n    # cinder snapshot-create --display-name admin_vol01_ss admin_vol01\n    +---------------------+--------------------------------------+\n    |       Property      |                Value                 |\n    +---------------------+--------------------------------------+\n    |      created_at     |      2015-02-17T03:35:45.077828      |\n    | display_description |                 None                 |\n    |     display_name    |            admin_vol01_ss            |\n    |          id         | 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 |\n    |       metadata      |                  {}                  |\n    |         size        |                  1                   |\n    |        status       |               creating               |\n    |      volume_id      | 5175d6be-735c-411e-be21-85015c332d99 |\n    +---------------------+--------------------------------------+\n\n\nNova command\n\n    # nova volume-snapshot-create --display-name admin_vol01_ss admin_vol01\n    +---------------------+--------------------------------------+\n    |       Property      |                Value                 |\n    +---------------------+--------------------------------------+\n    |      created_at     |      2015-02-17T03:35:45.077828      |\n    | display_description |                 None                 |\n    |     display_name    |            admin_vol01_ss            |\n    |          id         | 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 |\n    |       metadata      |                  {}                  |\n    |         size        |                  1                   |\n    |        status       |               creating               |\n    |      volume_id      | 5175d6be-735c-411e-be21-85015c332d99 |\n    +---------------------+--------------------------------------+\n\n\nCheck the snapshot of Cinder\n\nCinder command\n\n    # cinder snapshot-list\n    +--------------------------------------+--------------------------------------+-----------+----------------+------+\n    |                  ID                  |              Volume ID               |   Status  |  Display Name  | Size |\n    +--------------------------------------+--------------------------------------+-----------+----------------+------+\n    | 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 | 5175d6be-735c-411e-be21-85015c332d99 | available | admin_vol01_ss |  1   |\n    +--------------------------------------+--------------------------------------+-----------+----------------+------+\n\n    # cinder snapshot-show admin_vol01_ss\n    +--------------------------------------------+--------------------------------------+\n    |                  Property                  |                Value                 |\n    +--------------------------------------------+--------------------------------------+\n    |                 created_at                 |      2015-02-17T03:35:45.000000      |\n    |            display_description             |                 None                 |\n    |                display_name                |            admin_vol01_ss            |\n    |                     id                     | 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 |\n    |                  metadata                  |                  {}                  |\n    |  os-extended-snapshot-attributes:progress  |                 100%                 |\n    | os-extended-snapshot-attributes:project_id |   a8085d1871f847bdb906ef4a28d1bd48   |\n    |                    size                    |                  1                   |\n    |                   status                   |              available               |\n    |                 volume_id                  | 5175d6be-735c-411e-be21-85015c332d99 |\n    +--------------------------------------------+--------------------------------------+\n\n\nNova command\n\n    # nova volume-snapshot-list\n    +--------------------------------------+--------------------------------------+-----------+----------------+------+\n    | ID                                   | Volume ID                            | Status    | Display Name   | Size |\n    +--------------------------------------+--------------------------------------+-----------+----------------+------+\n    | 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 | 5175d6be-735c-411e-be21-85015c332d99 | available | admin_vol01_ss | 1    |\n    +--------------------------------------+--------------------------------------+-----------+----------------+------+\n\n    # nova volume-snapshot-show admin_vol01_ss\n    +--------------------------------------------+--------------------------------------+\n    | Property                                   | Value                                |\n    +--------------------------------------------+--------------------------------------+\n    | created_at                                 | 2015-02-17T03:35:45.000000           |\n    | display_description                        | -                                    |\n    | display_name                               | admin_vol01_ss                       |\n    | id                                         | 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 |\n    | metadata                                   | {}                                   |\n    | os-extended-snapshot-attributes:progress   | 100%                                 |\n    | os-extended-snapshot-attributes:project_id | a8085d1871f847bdb906ef4a28d1bd48     |\n    | size                                       | 1                                    |\n    | status                                     | available                            |\n    | volume_id                                  | 5175d6be-735c-411e-be21-85015c332d99 |\n    +--------------------------------------------+--------------------------------------+\n\n\nRestore from a snapshot of Cinder (= Clone from the snapshot)\n\nInitial state\n\nCinder volume\n# cinder list\n+--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n|                  ID                  |   Status  | Display Name | Size | Volume Type | Bootable | Attached to |\n+--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n| 5175d6be-735c-411e-be21-85015c332d99 | available | admin_vol01  |  1   |     None    |  false   |             |\n+--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n\n\nCinder snapshot\n# cinder snapshot-list\n+--------------------------------------+--------------------------------------+-----------+----------------+------+\n|                  ID                  |              Volume ID               |   Status  |  Display Name  | Size |\n+--------------------------------------+--------------------------------------+-----------+----------------+------+\n| 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 | 5175d6be-735c-411e-be21-85015c332d99 | available | admin_vol01_ss |  1   |\n+--------------------------------------+--------------------------------------+-----------+----------------+------+\n\n\nRestore from a snapshot of cinder\n\nRestore from a snapshot of cinder\n# cinder create --display-name admin_vol02_from_ss --snapshot-id 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 1\n+---------------------+--------------------------------------+\n|       Property      |                Value                 |\n+---------------------+--------------------------------------+\n|     attachments     |                  []                  |\n|  availability_zone  |                 nova                 |\n|       bootable      |                false                 |\n|      created_at     |      2015-02-17T03:44:26.871112      |\n| display_description |                 None                 |\n|     display_name    |         admin_vol02_from_ss          |\n|      encrypted      |                False                 |\n|          id         | 3559c032-6d8c-44fb-98e5-0f08d735b537 |\n|       metadata      |                  {}                  |\n|         size        |                  1                   |\n|     snapshot_id     | 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 |\n|     source_volid    |                 None                 |\n|        status       |               creating               |\n|     volume_type     |                 None                 |\n+---------------------+--------------------------------------+\n\n\nCheck the cinder volume\n# cinder list\n+--------------------------------------+-----------+---------------------+------+-------------+----------+-------------+\n|                  ID                  |   Status  |     Display Name    | Size | Volume Type | Bootable | Attached to |\n+--------------------------------------+-----------+---------------------+------+-------------+----------+-------------+\n| 3559c032-6d8c-44fb-98e5-0f08d735b537 | available | admin_vol02_from_ss |  1   |     None    |  false   |             |\n| 5175d6be-735c-411e-be21-85015c332d99 | available |     admin_vol01     |  1   |     None    |  false   |             |\n+--------------------------------------+-----------+---------------------+------+-------------+----------+-------------+\n\n# cinder show admin_vol02_from_ss\n+--------------------------------+--------------------------------------+\n|            Property            |                Value                 |\n+--------------------------------+--------------------------------------+\n|          attachments           |                  []                  |\n|       availability_zone        |                 nova                 |\n|            bootable            |                false                 |\n|           created_at           |      2015-02-17T03:44:27.000000      |\n|      display_description       |                 None                 |\n|          display_name          |         admin_vol02_from_ss          |\n|           encrypted            |                False                 |\n|               id               | 3559c032-6d8c-44fb-98e5-0f08d735b537 |\n|            metadata            |                  {}                  |\n|     os-vol-host-attr:host      |                node-17               |\n| os-vol-mig-status-attr:migstat |                 None                 |\n| os-vol-mig-status-attr:name_id |                 None                 |\n|  os-vol-tenant-attr:tenant_id  |   a8085d1871f847bdb906ef4a28d1bd48   |\n|              size              |                  1                   |\n|          snapshot_id           | 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 |\n|          source_volid          |                 None                 |\n|             status             |              available               |\n|          volume_type           |                 None                 |\n+--------------------------------+--------------------------------------+\n\n\nEnvironment\n\nOpenstack : Juno\nCeph : Firefly\n\n\nReference\nCinder Backup/Restore\nCinder Backup/Restore between AZ\nCinder Backup/Restore between Region\nCinder Snapshot/Restore\n## What's this?\n\nCinder volume \u306e snapshot \u4f5c\u6210\u3001\u305d\u306e snapshot \u304b\u3089\u65b0\u898f Cinder volume \u4f5c\u6210\n\n## Initial state\n\n#### Cinder volume\n\n    # cinder list\n    +--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n    |                  ID                  |   Status  | Display Name | Size | Volume Type | Bootable | Attached to |\n    +--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n    | 5175d6be-735c-411e-be21-85015c332d99 | available | admin_vol01  |  1   |     None    |  false   |             |\n    +--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n\n## Take a snapshot of Cinder\n\n#### Take a snapshot of Cinder\n\n* Cinder command\n\n````\n    # cinder snapshot-create --display-name admin_vol01_ss admin_vol01\n    +---------------------+--------------------------------------+\n    |       Property      |                Value                 |\n    +---------------------+--------------------------------------+\n    |      created_at     |      2015-02-17T03:35:45.077828      |\n    | display_description |                 None                 |\n    |     display_name    |            admin_vol01_ss            |\n    |          id         | 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 |\n    |       metadata      |                  {}                  |\n    |         size        |                  1                   |\n    |        status       |               creating               |\n    |      volume_id      | 5175d6be-735c-411e-be21-85015c332d99 |\n    +---------------------+--------------------------------------+\n````\n\n* Nova command\n\n````\n    # nova volume-snapshot-create --display-name admin_vol01_ss admin_vol01\n    +---------------------+--------------------------------------+\n    |       Property      |                Value                 |\n    +---------------------+--------------------------------------+\n    |      created_at     |      2015-02-17T03:35:45.077828      |\n    | display_description |                 None                 |\n    |     display_name    |            admin_vol01_ss            |\n    |          id         | 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 |\n    |       metadata      |                  {}                  |\n    |         size        |                  1                   |\n    |        status       |               creating               |\n    |      volume_id      | 5175d6be-735c-411e-be21-85015c332d99 |\n    +---------------------+--------------------------------------+\n````\n\n#### Check the snapshot of Cinder\n\n* Cinder command\n\n````\n    # cinder snapshot-list\n    +--------------------------------------+--------------------------------------+-----------+----------------+------+\n    |                  ID                  |              Volume ID               |   Status  |  Display Name  | Size |\n    +--------------------------------------+--------------------------------------+-----------+----------------+------+\n    | 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 | 5175d6be-735c-411e-be21-85015c332d99 | available | admin_vol01_ss |  1   |\n    +--------------------------------------+--------------------------------------+-----------+----------------+------+\n\n    # cinder snapshot-show admin_vol01_ss\n    +--------------------------------------------+--------------------------------------+\n    |                  Property                  |                Value                 |\n    +--------------------------------------------+--------------------------------------+\n    |                 created_at                 |      2015-02-17T03:35:45.000000      |\n    |            display_description             |                 None                 |\n    |                display_name                |            admin_vol01_ss            |\n    |                     id                     | 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 |\n    |                  metadata                  |                  {}                  |\n    |  os-extended-snapshot-attributes:progress  |                 100%                 |\n    | os-extended-snapshot-attributes:project_id |   a8085d1871f847bdb906ef4a28d1bd48   |\n    |                    size                    |                  1                   |\n    |                   status                   |              available               |\n    |                 volume_id                  | 5175d6be-735c-411e-be21-85015c332d99 |\n    +--------------------------------------------+--------------------------------------+\n````\n\n* Nova command\n\n````\n    # nova volume-snapshot-list\n    +--------------------------------------+--------------------------------------+-----------+----------------+------+\n    | ID                                   | Volume ID                            | Status    | Display Name   | Size |\n    +--------------------------------------+--------------------------------------+-----------+----------------+------+\n    | 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 | 5175d6be-735c-411e-be21-85015c332d99 | available | admin_vol01_ss | 1    |\n    +--------------------------------------+--------------------------------------+-----------+----------------+------+\n\n    # nova volume-snapshot-show admin_vol01_ss\n    +--------------------------------------------+--------------------------------------+\n    | Property                                   | Value                                |\n    +--------------------------------------------+--------------------------------------+\n    | created_at                                 | 2015-02-17T03:35:45.000000           |\n    | display_description                        | -                                    |\n    | display_name                               | admin_vol01_ss                       |\n    | id                                         | 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 |\n    | metadata                                   | {}                                   |\n    | os-extended-snapshot-attributes:progress   | 100%                                 |\n    | os-extended-snapshot-attributes:project_id | a8085d1871f847bdb906ef4a28d1bd48     |\n    | size                                       | 1                                    |\n    | status                                     | available                            |\n    | volume_id                                  | 5175d6be-735c-411e-be21-85015c332d99 |\n    +--------------------------------------------+--------------------------------------+\n````\n\n\n\n# Restore from a snapshot of Cinder (= Clone from the snapshot)\n\n## Initial state\n\n#### Cinder volume\n\n    # cinder list\n    +--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n    |                  ID                  |   Status  | Display Name | Size | Volume Type | Bootable | Attached to |\n    +--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n    | 5175d6be-735c-411e-be21-85015c332d99 | available | admin_vol01  |  1   |     None    |  false   |             |\n    +--------------------------------------+-----------+--------------+------+-------------+----------+-------------+\n\n#### Cinder snapshot\n\n\n    # cinder snapshot-list\n    +--------------------------------------+--------------------------------------+-----------+----------------+------+\n    |                  ID                  |              Volume ID               |   Status  |  Display Name  | Size |\n    +--------------------------------------+--------------------------------------+-----------+----------------+------+\n    | 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 | 5175d6be-735c-411e-be21-85015c332d99 | available | admin_vol01_ss |  1   |\n    +--------------------------------------+--------------------------------------+-----------+----------------+------+\n\n## Restore from a snapshot of cinder\n\n#### Restore from a snapshot of cinder\n\n    # cinder create --display-name admin_vol02_from_ss --snapshot-id 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 1\n    +---------------------+--------------------------------------+\n    |       Property      |                Value                 |\n    +---------------------+--------------------------------------+\n    |     attachments     |                  []                  |\n    |  availability_zone  |                 nova                 |\n    |       bootable      |                false                 |\n    |      created_at     |      2015-02-17T03:44:26.871112      |\n    | display_description |                 None                 |\n    |     display_name    |         admin_vol02_from_ss          |\n    |      encrypted      |                False                 |\n    |          id         | 3559c032-6d8c-44fb-98e5-0f08d735b537 |\n    |       metadata      |                  {}                  |\n    |         size        |                  1                   |\n    |     snapshot_id     | 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 |\n    |     source_volid    |                 None                 |\n    |        status       |               creating               |\n    |     volume_type     |                 None                 |\n    +---------------------+--------------------------------------+\n\n#### Check the cinder volume\n\n    # cinder list\n    +--------------------------------------+-----------+---------------------+------+-------------+----------+-------------+\n    |                  ID                  |   Status  |     Display Name    | Size | Volume Type | Bootable | Attached to |\n    +--------------------------------------+-----------+---------------------+------+-------------+----------+-------------+\n    | 3559c032-6d8c-44fb-98e5-0f08d735b537 | available | admin_vol02_from_ss |  1   |     None    |  false   |             |\n    | 5175d6be-735c-411e-be21-85015c332d99 | available |     admin_vol01     |  1   |     None    |  false   |             |\n    +--------------------------------------+-----------+---------------------+------+-------------+----------+-------------+\n\n    # cinder show admin_vol02_from_ss\n    +--------------------------------+--------------------------------------+\n    |            Property            |                Value                 |\n    +--------------------------------+--------------------------------------+\n    |          attachments           |                  []                  |\n    |       availability_zone        |                 nova                 |\n    |            bootable            |                false                 |\n    |           created_at           |      2015-02-17T03:44:27.000000      |\n    |      display_description       |                 None                 |\n    |          display_name          |         admin_vol02_from_ss          |\n    |           encrypted            |                False                 |\n    |               id               | 3559c032-6d8c-44fb-98e5-0f08d735b537 |\n    |            metadata            |                  {}                  |\n    |     os-vol-host-attr:host      |                node-17               |\n    | os-vol-mig-status-attr:migstat |                 None                 |\n    | os-vol-mig-status-attr:name_id |                 None                 |\n    |  os-vol-tenant-attr:tenant_id  |   a8085d1871f847bdb906ef4a28d1bd48   |\n    |              size              |                  1                   |\n    |          snapshot_id           | 375528d8-7d5e-40a4-a8d6-d4b5e9fad274 |\n    |          source_volid          |                 None                 |\n    |             status             |              available               |\n    |          volume_type           |                 None                 |\n    +--------------------------------+--------------------------------------+\n\n## Environment\n\n* Openstack : Juno\n* Ceph : Firefly\n\n## Reference\n\n[Cinder Backup/Restore][link-01]\n[Cinder Backup/Restore between AZ][link-02]\n[Cinder Backup/Restore between Region][link-03]\n[Cinder Snapshot/Restore][link-04]\n\n[link-01]:http://qiita.com/idzzy/items/ac163d0ce7cc9f036031\n[link-02]:http://qiita.com/idzzy/items/caaa83de00abe78095e2\n[link-03]:http://qiita.com/idzzy/items/fef77c7853eb6f6b1479\n[link-04]:http://qiita.com/idzzy/items/cfb568e83e2645e3f32e\n", "tags": ["openstack", "Cinder"]}