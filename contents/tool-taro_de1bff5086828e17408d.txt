{"context": "\n\n\u306f\u3058\u3081\u306b\n\u666e\u6bb5\u3001\u8907\u6570\u306e\u7a2e\u985e\u306eDB\u3067\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u3001\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d0(\u5f53\u65b9\u306e\u74b0\u5883\u3067\u306fTomcat8.5.11)\u306econtext.xml\u306b\u306f\n\u63a5\u7d9a\u3059\u308b\u53ef\u80fd\u6027\u306e\u3042\u308b\u3059\u3079\u3066\u306eDB\u306e\u8a18\u8ff0\u3092\u305a\u3089\u3063\u3068\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\n\n\u5b9f\u88c5\u4f8b\n\u74b0\u5883\u4f9d\u5b58\u306b\u3088\u308b\u9055\u3044\u306f\u5927\u3044\u306b\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3054\u53c2\u8003\u306b\u306a\u308c\u3070...\u3002\nDB2\u306f\u307b\u3068\u3093\u3069\u4f7f\u308f\u306a\u3044\u306e\u3067\u3001\u5b9f\u7528\u306b\u582a\u3048\u3046\u308b\u304b\u306f?\u3067\u3059\u3002\n\ncontext.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Context path=\"/\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30d1\u30b9\">\n    <!-- MySQL -->\n    <Resource name=\"jdbc/MySQL\" auth=\"Container\" type=\"javax.sql.DataSource\" maxActive=\"100\" maxIdle=\"20\" maxWait=\"-1\" username=\"\u30e6\u30fc\u30b6\u540d\" password=\"\u30d1\u30b9\u30ef\u30fc\u30c9\" driverClassName=\"com.mysql.jdbc.Driver\" url=\"jdbc:mysql://\u30db\u30b9\u30c8\u540d:3306/\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d?zeroDateTimeBehavior=convertToNull\" validationQuery=\"SELECT 0\" />\n\n    <!-- Oracle -->\n    <Resource name=\"jdbc/Oracle\" auth=\"Container\" type=\"javax.sql.DataSource\" maxActive=\"100\" maxIdle=\"20\" maxWait=\"-1\" username=\"\u30e6\u30fc\u30b6\u540d\" password=\"\u30d1\u30b9\u30ef\u30fc\u30c9\" driverClassName=\"oracle.jdbc.driver.OracleDriver\" url=\"jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=\u30db\u30b9\u30c8\u540d)(PORT=1521))(LOAD_BALANCE=YES)(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=\u30b5\u30fc\u30d3\u30b9\u540d)))\" validationQuery=\"SELECT 0 FROM DUAL\" />\n\n    <!-- PostgreSQL -->\n    <Resource name=\"jdbc/PostgreSQL\" auth=\"Container\" type=\"javax.sql.DataSource\" maxActive=\"100\" maxIdle=\"20\" maxWait=\"-1\" username=\"\u30e6\u30fc\u30b6\u540d\" password=\"\u30d1\u30b9\u30ef\u30fc\u30c9\" driverClassName=\"org.postgresql.Driver\" url=\"jdbc:postgresql://\u30db\u30b9\u30c8\u540d:5432/\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\" validationQuery=\"SELECT 0\" />\n\n    <!-- SQLServer -->\n    <Resource name=\"jdbc/SQLServer\" auth=\"Container\" type=\"javax.sql.DataSource\" maxActive=\"100\" maxIdle=\"20\" maxWait=\"-1\" username=\"\u30e6\u30fc\u30b6\u540d\" password=\"\u30d1\u30b9\u30ef\u30fc\u30c9\" driverClassName=\"com.microsoft.sqlserver.jdbc.SQLServerDriver\" url=\"jdbc:sqlserver://\u30db\u30b9\u30c8\u540d:1433;databaseName=\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\" validationQuery=\"SELECT 0\" />\n\n    <!-- DB2 -->\n    <Resource name=\"jdbc/DB2\" auth=\"Container\" type=\"javax.sql.DataSource\" maxActive=\"100\" maxIdle=\"20\" maxWait=\"-1\" username=\"\u30e6\u30fc\u30b6\u540d\" password=\"\u30d1\u30b9\u30ef\u30fc\u30c9\" driverClassName=\"com.ibm.db2.jcc.DB2Driver\" url=\"jdbc:db2://\u30db\u30b9\u30c8\u540d:50000/\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d:currentSchema=\u30b9\u30ad\u30fc\u30de\u540d(\u4f8b: db2admin);\" validationQuery=\"SELECT 0 FROM SYSIBM.DUAL\" />\n</Context>\n\n\n\u30b5\u30f3\u30d7\u30eb\u3067\u306f\u3001\u52d5\u4f5c\u78ba\u8a8d\u3057\u3084\u3059\u3044\u3088\u3046\u306bjsp\u3067\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002\n\nconnection_test.jsp\n<%-- \n    Author     : tool-taro.com\n--%>\n\n<%@page import=\"javax.sql.DataSource\"%>\n<%@page import=\"java.sql.Connection\"%>\n<%@page import=\"javax.naming.InitialContext\"%>\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\" session=\"false\" %>\n<%\n        //\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u53d6\u5f97\u3059\u308bjndi\n        String jndi = \"java:comp/env/jdbc/MySQL\";\n        //String jndi = \"java:comp/env/jdbc/Oracle\"; //\u2190Oracle\u306e\u5834\u5408\n\n        InitialContext context = null;\n        Connection connection = null;\n\n        //\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u53d6\u5f97\u51e6\u7406\n        String result = null;\n        try {\n                context = new InitialContext();\n                DataSource dataSource = (DataSource) context.lookup(jndi);\n\n                connection = dataSource.getConnection();\n                //\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5206\u96e2\u30ec\u30d9\u30eb\u304cDB\u306b\u3088\u3063\u3066\u7570\u306a\u308b\u306e\u3067\u8a2d\u5b9a\u3092\u7d71\u4e00\n                connection.setTransactionIsolation(Connection.TRANSACTION_READ_COMMITTED);\n                connection.setAutoCommit(false);\n                result = connection.getMetaData().getDatabaseProductName();\n        }\n        finally {\n                if (context != null) {\n                        try {\n                                context.close();\n                        }\n                        catch (Exception e) {\n                        }\n                }\n                if (connection != null) {\n                        try {\n                                connection.close();\n                        }\n                        catch (Exception e) {\n                        }\n                }\n        }\n%>\n<!DOCTYPE html>\n<html>\n    <head>\n        <title>tool-taro.com</title>\n    </head>\n    <body>\n        \u63a5\u7d9a\u3057\u305fDB=\"<%= result%>\"\n    </body>\n</html>\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\nconnection_test.jsp\u306e\u5b9f\u884c\u7d50\u679c\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u63a5\u7d9a\u3057\u305fDB=\"MySQL\" \n\n\n\u74b0\u5883\n\n\n\u958b\u767a\n\nWindows 10 Pro\nJDK 1.8.0_121\nNetBeans IDE 8.2\n\n\n\n\u52d5\u4f5c\u691c\u8a3c\n\nCentOS Linux release 7.3\nJDK 1.8.0_121\n\n\n\nWeb\u30c4\u30fc\u30eb\u3082\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u3002\nWeb\u4fbf\u5229\u30c4\u30fc\u30eb@\u30c4\u30fc\u30eb\u30bf\u30ed\u30a6\n## \u306f\u3058\u3081\u306b\n\u666e\u6bb5\u3001\u8907\u6570\u306e\u7a2e\u985e\u306eDB\u3067\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u3001\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d0(\u5f53\u65b9\u306e\u74b0\u5883\u3067\u306fTomcat8.5.11)\u306econtext.xml\u306b\u306f\n\u63a5\u7d9a\u3059\u308b\u53ef\u80fd\u6027\u306e\u3042\u308b\u3059\u3079\u3066\u306eDB\u306e\u8a18\u8ff0\u3092\u305a\u3089\u3063\u3068\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\n\n## \u5b9f\u88c5\u4f8b\n\u74b0\u5883\u4f9d\u5b58\u306b\u3088\u308b\u9055\u3044\u306f\u5927\u3044\u306b\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3054\u53c2\u8003\u306b\u306a\u308c\u3070...\u3002\nDB2\u306f\u307b\u3068\u3093\u3069\u4f7f\u308f\u306a\u3044\u306e\u3067\u3001\u5b9f\u7528\u306b\u582a\u3048\u3046\u308b\u304b\u306f?\u3067\u3059\u3002\n\n```xml:context.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Context path=\"/\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30d1\u30b9\">\n\t<!-- MySQL -->\n\t<Resource name=\"jdbc/MySQL\" auth=\"Container\" type=\"javax.sql.DataSource\" maxActive=\"100\" maxIdle=\"20\" maxWait=\"-1\" username=\"\u30e6\u30fc\u30b6\u540d\" password=\"\u30d1\u30b9\u30ef\u30fc\u30c9\" driverClassName=\"com.mysql.jdbc.Driver\" url=\"jdbc:mysql://\u30db\u30b9\u30c8\u540d:3306/\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d?zeroDateTimeBehavior=convertToNull\" validationQuery=\"SELECT 0\" />\n\n\t<!-- Oracle -->\n\t<Resource name=\"jdbc/Oracle\" auth=\"Container\" type=\"javax.sql.DataSource\" maxActive=\"100\" maxIdle=\"20\" maxWait=\"-1\" username=\"\u30e6\u30fc\u30b6\u540d\" password=\"\u30d1\u30b9\u30ef\u30fc\u30c9\" driverClassName=\"oracle.jdbc.driver.OracleDriver\" url=\"jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=\u30db\u30b9\u30c8\u540d)(PORT=1521))(LOAD_BALANCE=YES)(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=\u30b5\u30fc\u30d3\u30b9\u540d)))\" validationQuery=\"SELECT 0 FROM DUAL\" />\n\n\t<!-- PostgreSQL -->\n\t<Resource name=\"jdbc/PostgreSQL\" auth=\"Container\" type=\"javax.sql.DataSource\" maxActive=\"100\" maxIdle=\"20\" maxWait=\"-1\" username=\"\u30e6\u30fc\u30b6\u540d\" password=\"\u30d1\u30b9\u30ef\u30fc\u30c9\" driverClassName=\"org.postgresql.Driver\" url=\"jdbc:postgresql://\u30db\u30b9\u30c8\u540d:5432/\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\" validationQuery=\"SELECT 0\" />\n\n\t<!-- SQLServer -->\n\t<Resource name=\"jdbc/SQLServer\" auth=\"Container\" type=\"javax.sql.DataSource\" maxActive=\"100\" maxIdle=\"20\" maxWait=\"-1\" username=\"\u30e6\u30fc\u30b6\u540d\" password=\"\u30d1\u30b9\u30ef\u30fc\u30c9\" driverClassName=\"com.microsoft.sqlserver.jdbc.SQLServerDriver\" url=\"jdbc:sqlserver://\u30db\u30b9\u30c8\u540d:1433;databaseName=\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\" validationQuery=\"SELECT 0\" />\n\n\t<!-- DB2 -->\n\t<Resource name=\"jdbc/DB2\" auth=\"Container\" type=\"javax.sql.DataSource\" maxActive=\"100\" maxIdle=\"20\" maxWait=\"-1\" username=\"\u30e6\u30fc\u30b6\u540d\" password=\"\u30d1\u30b9\u30ef\u30fc\u30c9\" driverClassName=\"com.ibm.db2.jcc.DB2Driver\" url=\"jdbc:db2://\u30db\u30b9\u30c8\u540d:50000/\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d:currentSchema=\u30b9\u30ad\u30fc\u30de\u540d(\u4f8b: db2admin);\" validationQuery=\"SELECT 0 FROM SYSIBM.DUAL\" />\n</Context>\n```\n\u30b5\u30f3\u30d7\u30eb\u3067\u306f\u3001\u52d5\u4f5c\u78ba\u8a8d\u3057\u3084\u3059\u3044\u3088\u3046\u306bjsp\u3067\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002\n\n```jsp:connection_test.jsp\n<%-- \n    Author     : tool-taro.com\n--%>\n\n<%@page import=\"javax.sql.DataSource\"%>\n<%@page import=\"java.sql.Connection\"%>\n<%@page import=\"javax.naming.InitialContext\"%>\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\" session=\"false\" %>\n<%\n        //\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u53d6\u5f97\u3059\u308bjndi\n        String jndi = \"java:comp/env/jdbc/MySQL\";\n        //String jndi = \"java:comp/env/jdbc/Oracle\"; //\u2190Oracle\u306e\u5834\u5408\n\n        InitialContext context = null;\n        Connection connection = null;\n\n        //\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u53d6\u5f97\u51e6\u7406\n        String result = null;\n        try {\n                context = new InitialContext();\n                DataSource dataSource = (DataSource) context.lookup(jndi);\n\n                connection = dataSource.getConnection();\n                //\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5206\u96e2\u30ec\u30d9\u30eb\u304cDB\u306b\u3088\u3063\u3066\u7570\u306a\u308b\u306e\u3067\u8a2d\u5b9a\u3092\u7d71\u4e00\n                connection.setTransactionIsolation(Connection.TRANSACTION_READ_COMMITTED);\n                connection.setAutoCommit(false);\n                result = connection.getMetaData().getDatabaseProductName();\n        }\n        finally {\n                if (context != null) {\n                        try {\n                                context.close();\n                        }\n                        catch (Exception e) {\n                        }\n                }\n                if (connection != null) {\n                        try {\n                                connection.close();\n                        }\n                        catch (Exception e) {\n                        }\n                }\n        }\n%>\n<!DOCTYPE html>\n<html>\n    <head>\n        <title>tool-taro.com</title>\n    </head>\n    <body>\n        \u63a5\u7d9a\u3057\u305fDB=\"<%= result%>\"\n    </body>\n</html>\n```\n\n## \u52d5\u4f5c\u78ba\u8a8d\nconnection_test.jsp\u306e\u5b9f\u884c\u7d50\u679c\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```\n\u63a5\u7d9a\u3057\u305fDB=\"MySQL\" \n```\n## \u74b0\u5883\n- \u958b\u767a\n\t- Windows 10 Pro\n\t- JDK 1.8.0_121\n\t- NetBeans IDE 8.2\n\n- \u52d5\u4f5c\u691c\u8a3c\n\t- CentOS Linux release 7.3\n\t- JDK 1.8.0_121\n\nWeb\u30c4\u30fc\u30eb\u3082\u516c\u958b\u3057\u3066\u3044\u307e\u3059\u3002\n[Web\u4fbf\u5229\u30c4\u30fc\u30eb@\u30c4\u30fc\u30eb\u30bf\u30ed\u30a6](http://tool-taro.com/)\n", "tags": ["Java", "oracle", "MySQL", "PostgreSQL", "Tomcat"]}