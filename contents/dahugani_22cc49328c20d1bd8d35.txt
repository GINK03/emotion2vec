{"tags": ["Mercurial", "capistrano", "Rails"], "context": " More than 1 year has passed since last update.EC2+Mercurial+Rails\u3068\u3044\u3046\u5c11\u3057\u9650\u5b9a\u7684\u306a\u74b0\u5883\u3067\u306e\u30c7\u30d7\u30ed\u30a4\u8a2d\u5b9a\u65b9\u6cd5\u3002\n[\u524d\u63d0\u6761\u4ef6]\n\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u5b58\u5728\u3059\u308b\u3002\n\u30c7\u30d7\u30ed\u30a4\u30b5\u30fc\u30d0\u30fc\u304c\u5b58\u5728\u3059\u308b\u3002\n\u30c7\u30d7\u30ed\u30a4\u5148\u306e\u30b5\u30fc\u30d0\u30fc\u304c\u5b58\u5728\u3059\u308b\u3002\n\u30c7\u30d7\u30ed\u30a4\u30b5\u30fc\u30d0\u30fc\u306bmercurial\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3002\n(mercurial\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f1.7\u4ee5\u4e0a)\n\n\u30c7\u30d7\u30ed\u30a4\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\nSSH\u3067\u63a5\u7d9a\u53ef\u80fd\u306adeploy\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3059\u308b\u3002\nhttp://qiita.com/dahugani/items/e1fc5c212bf6a7365f8f\n\ncapistrano\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ngem\u304b\u3089capistrano\u3059\u308b\u3002\n\u3064\u3044\u3067\u306b\u8272\u3092\u5909\u3048\u305f\u308a\u3001\u74b0\u5883\u5148\u3092\u5909\u3048\u305f\u308a\u3001rails\u30a2\u30d7\u30ea\u4ee5\u5916\u3092\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u308b\u306a\u3069\u8a2d\u5b9a\u304c\u3067\u304d\u308bgem\u3082\u5165\u308c\u308b\u3002\ngem 'capistrano'\ngem 'capistrano-ext'\n\ncapistrano\u306f\u30b3\u30e1\u30f3\u30c8\u30a4\u30f3\u3067\u3082\u3044\u3044\u3002\n\nAWS-SDK\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nGemfile\u306baws-sdk\u3092\u8ffd\u52a0\ngem 'aws-sdk'\n\nbundle install\n\n\ncapistrano\u306e\u8a2d\u5b9a\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\ncapify .\n\nEC2+bitbucket+rails\u7528\u306b\u66f8\u304d\u63db\u3048\u308b(\u5168\u3066\u3092\u66f8\u304d\u63db\u3048\u308b)\u3002\n\ndeploy.rb\nrequire 'rubygems'\n\n#AWSdefine\nset :aws_access_key_id,     ENV['\u30a2\u30af\u30bb\u30b9\u30ad\u30fc']\nset :aws_secret_access_key, ENV['\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc']\n\nset :application, \"linknet\"\nset :deploy_to, \"/var/www/apps/#{application}\"\nset :repository,  \"\u30ea\u30dd\u30b8\u30c8\u30ea\u306eURL\"\n# set :scm, :git # You can set :scm explicitly or Capistrano will make an intelligent guess based on known version control directory names\n# Or: `accurev`, `bzr`, `cvs`, `darcs`, `git`, `mercurial`, `perforce`, `subversion` or `none`\nset :scm ,:mercurial\nset :deploy_via, :copy\n\n# The address of the remote host on EC2 (the Public DNS address)\nset :location, \"EC2\u306e\u30db\u30b9\u30c8\u540d\"\n\nset :user, \"\u30c7\u30d7\u30ed\u30a4\u7528\u30e6\u30fc\u30b6\u30fc\u540d\"\nset :use_sudo, false\nssh_options[:forward_agent] = true\nssh_options[:keys] = [\"\u30c7\u30d7\u30ed\u30a4\u7528\u30e6\u30fc\u30b6\u30fc\u306e\u79d8\u5bc6\u9375\"]\ndefault_run_options[:pty] = true\n\n# setup some Capistrano roles\nrole :app, location\nrole :web, location\nrole :db,  location, :primary => true\n\n\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\ncap deploy:setup\n\n\nEC2+Mercurial+Rails\u3068\u3044\u3046\u5c11\u3057\u9650\u5b9a\u7684\u306a\u74b0\u5883\u3067\u306e\u30c7\u30d7\u30ed\u30a4\u8a2d\u5b9a\u65b9\u6cd5\u3002\n\n[\u524d\u63d0\u6761\u4ef6]\n\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u5b58\u5728\u3059\u308b\u3002\n\u30c7\u30d7\u30ed\u30a4\u30b5\u30fc\u30d0\u30fc\u304c\u5b58\u5728\u3059\u308b\u3002\n\u30c7\u30d7\u30ed\u30a4\u5148\u306e\u30b5\u30fc\u30d0\u30fc\u304c\u5b58\u5728\u3059\u308b\u3002\n\u30c7\u30d7\u30ed\u30a4\u30b5\u30fc\u30d0\u30fc\u306bmercurial\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3002\n(mercurial\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f1.7\u4ee5\u4e0a)\n\n\n##\u30c7\u30d7\u30ed\u30a4\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\nSSH\u3067\u63a5\u7d9a\u53ef\u80fd\u306adeploy\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3059\u308b\u3002\nhttp://qiita.com/dahugani/items/e1fc5c212bf6a7365f8f\n\n##capistrano\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ngem\u304b\u3089capistrano\u3059\u308b\u3002\n\u3064\u3044\u3067\u306b\u8272\u3092\u5909\u3048\u305f\u308a\u3001\u74b0\u5883\u5148\u3092\u5909\u3048\u305f\u308a\u3001rails\u30a2\u30d7\u30ea\u4ee5\u5916\u3092\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u308b\u306a\u3069\u8a2d\u5b9a\u304c\u3067\u304d\u308bgem\u3082\u5165\u308c\u308b\u3002\n\n```Gemfile\ngem 'capistrano'\ngem 'capistrano-ext'\n```\ncapistrano\u306f\u30b3\u30e1\u30f3\u30c8\u30a4\u30f3\u3067\u3082\u3044\u3044\u3002\n\n##AWS-SDK\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nGemfile\u306baws-sdk\u3092\u8ffd\u52a0\n\n```Gemfile\ngem 'aws-sdk'\n```\n```\nbundle install\n```\n\n##capistrano\u306e\u8a2d\u5b9a\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n\n```\ncapify .\n```\nEC2+bitbucket+rails\u7528\u306b\u66f8\u304d\u63db\u3048\u308b(\u5168\u3066\u3092\u66f8\u304d\u63db\u3048\u308b)\u3002\n\n```deploy.rb\nrequire 'rubygems'\n\n#AWSdefine\nset :aws_access_key_id,     ENV['\u30a2\u30af\u30bb\u30b9\u30ad\u30fc']\nset :aws_secret_access_key, ENV['\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc']\n\nset :application, \"linknet\"\nset :deploy_to, \"/var/www/apps/#{application}\"\nset :repository,  \"\u30ea\u30dd\u30b8\u30c8\u30ea\u306eURL\"\n# set :scm, :git # You can set :scm explicitly or Capistrano will make an intelligent guess based on known version control directory names\n# Or: `accurev`, `bzr`, `cvs`, `darcs`, `git`, `mercurial`, `perforce`, `subversion` or `none`\nset :scm ,:mercurial\nset :deploy_via, :copy\n\n# The address of the remote host on EC2 (the Public DNS address)\nset :location, \"EC2\u306e\u30db\u30b9\u30c8\u540d\"\n\nset :user, \"\u30c7\u30d7\u30ed\u30a4\u7528\u30e6\u30fc\u30b6\u30fc\u540d\"\nset :use_sudo, false\nssh_options[:forward_agent] = true\nssh_options[:keys] = [\"\u30c7\u30d7\u30ed\u30a4\u7528\u30e6\u30fc\u30b6\u30fc\u306e\u79d8\u5bc6\u9375\"]\ndefault_run_options[:pty] = true\n\n# setup some Capistrano roles\nrole :app, location\nrole :web, location\nrole :db,  location, :primary => true\n```\n\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n\n```\ncap deploy:setup\n```\n"}