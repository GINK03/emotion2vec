{"context": " More than 1 year has passed since last update.\u524d\u56de\u306e\u7d9a\u304d\u3002\u4eca\u56de\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306eWebSocket\u306e\u8a18\u8ff0\u3092\u4e2d\u5fc3\u306b\u898b\u3066\u3044\u307e\u3059\u3002\n\nchatRoom.scala.html\n\nchatRoom.scala.html\n@(username: String)\n\n@main(username) {\n\n    <div class=\"page-header\">\n        <h1>Welcome to the chat room \n            <small>You are chatting as @username</small></h1>\n    </div>\n\n    <div id=\"onError\" class=\"alert-message error\">\n        <p>\n            <strong>Oops!</strong> <span></span>\n        </p>\n    </div>\n\n    <div id=\"onChat\" class=\"row\">\n        <div class=\"span10\" id=\"main\">\n            <div id=\"messages\">\n            </div>\n            <textarea id=\"talk\"></textarea>\n        </div>\n        <div class=\"span4\">\n            <h2>Members</h2>\n            <ul id=\"members\">\n            </ul>\n        </div>\n    </div>\n\n    <script type=\"text/javascript\" charset=\"utf-8\"\n        src=\"@routes.Application.chatRoomJs(username)\"></script>\n\n}\n\n\nmain\u306eView\u306b\u306f\u3081\u8fbc\u3093\u3067\u8868\u793a\u3057\u3066\u3044\u308b\u3002\n#onError\u306ediv\u306b\u30a8\u30e9\u30fc\u8868\u793a\u3001#onChat\u306ediv\u306e\u5de6\u306e\u5217\u306b\u30c1\u30e3\u30c3\u30c8\u306e\u5185\u5bb9\u3001\u53f3\u306e\u5217\u306b\u30eb\u30fc\u30e0\u5185\u306e\u4eba\u4e00\u89a7(Members)\u3092\u8868\u793a\u3057\u3066\u3044\u308b\u3002\u4e00\u756a\u4e0b\u3067javascript\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u308b\u304c\u3001\u6307\u5b9a\u306e\u4ed5\u65b9\u304c\u72ec\u7279\u3067\u3042\u308b\u3002routes\u30d5\u30a1\u30a4\u30eb\u3092\u898b\u3066\u307f\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\nroutes\nGET    /assets/javascripts/chatroom.js\n    controllers.Application.chatRoomJs(username)\n\n\nJS\u306esrc\u6307\u5b9a\u306e\u90e8\u5206\u306f\u3001\u5b9f\u884c\u6642\u306b\u306f\nsrc=\"/assets/javascripts/chatroom.js?username=a\"\n\n\u3068\u5909\u63db\u3055\u308c\u308b\u305f\u3081\u3001\u30af\u30a8\u30ea\u6587\u5b57\u5217\u3092\u6e21\u3057\u306a\u304c\u3089JS\u3092\u53d6\u5f97\u3057\u306b\u3044\u304f\u3053\u3068\u306b\u306a\u308b\u3002routes\u30d5\u30a1\u30a4\u30eb\u306e\u5b9a\u7fa9\u306b\u3088\u308a\u3001/assets/javascripts/chatroom.js\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u5834\u5408\u306fApplication.java\u306echatRoomJs\u30a2\u30af\u30b7\u30e7\u30f3\u304c\u547c\u3070\u308c\u308b\u3053\u3068\u306b\u306a\u3063\u3066\u3044\u308b\u3002\u3053\u3053\u3067JS\u3092\u751f\u6210\u3057\u3001\u30d6\u30e9\u30a6\u30b6\u5074\u306b\u8fd4\u3057\u3066\u3044\u308b\u3002\n\nApplication.java\npublic static Result chatRoomJs(String username) {\n    return ok(views.js.chatRoom.render(username));\n}\n\n\n\u3061\u306a\u307f\u306bviews\u30d1\u30c3\u30b1\u30fc\u30b8\u5185\u306bchatRoom.scala.js\u3068\u3044\u3046\u540d\u524d\u3067\u914d\u7f6e\u3057\u305fJS\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u308b\u3068views.js\u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u914d\u7f6e\u3055\u308c\u3001views.js.chatRoom\u3068\u3044\u3046\u540d\u524d\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u6a21\u69d8\u3002\n\nchatRoom.scala.js\n\nchatRoom.scala.js\n@(username: String)\n\n$(function() {\n    var WS = window['MozWebSocket'] ? MozWebSocket : WebSocket\n    var chatSocket = \n        new WS(\"@routes.Application.chat(username).webSocketURL(request)\")\n\n    var sendMessage = function() {\n        chatSocket.send(JSON.stringify(\n            {text: $(\"#talk\").val()}\n        ))\n        $(\"#talk\").val('')\n    }\n\n    var receiveEvent = function(event) {\n        var data = JSON.parse(event.data)\n\n        // Handle errors\n        if(data.error) {\n            chatSocket.close()\n            $(\"#onError span\").text(data.error)\n            $(\"#onError\").show()\n            return\n        } else {\n            $(\"#onChat\").show()\n        }\n\n        // Create the message element\n        var el = $('<div class=\"message\"><span></span><p></p></div>')\n        $(\"span\", el).text(data.user)\n        $(\"p\", el).text(data.message)\n        $(el).addClass(data.kind)\n        if(data.user == '@username') $(el).addClass('me')\n        $('#messages').append(el)\n\n        // Update the members list\n        $(\"#members\").html('')\n        $(data.members).each(function() {\n            var li = document.createElement('li');\n            li.textContent = this;\n            $(\"#members\").append(li);\n        })\n    }\n\n    var handleReturnKey = function(e) {\n        if(e.charCode == 13 || e.keyCode == 13) {\n            e.preventDefault()\n            sendMessage()\n        }\n    }\n\n    $(\"#talk\").keypress(handleReturnKey)\n\n    chatSocket.onmessage = receiveEvent\n\n})\n\n\n\u3053\u3053\u304c\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306eWebSocket\u3092\u62c5\u3063\u3066\u3044\u308b\u8981\u3068\u306a\u3063\u3066\u3044\u308b\u6a21\u69d8\u3002\nMozWebSocket\u304c\u5b9a\u7fa9\u3057\u3066\u3042\u308b\u5834\u5408\u306f\u305d\u3063\u3061\u3092\u4f7f\u3046\u3088\u3046FireFox\u5bfe\u5fdc\u304c\u3057\u3066\u3042\u308b\u304c\u3001FF11\u304b\u3089\u306fWebSocket\u306b\u7d71\u4e00\u3055\u308c\u305f\u6a21\u69d8\u3002\nvar chatSocket = \n    new WS(\"@routes.Application.chat(username).webSocketURL(request)\")\n\n\u3068\u3044\u3046\u8a18\u8ff0\u3092\u3057\u3066\u304a\u304f\u3068\u3001\u5b9f\u884c\u6642\u306b\nvar chatSocket = new WS(\"ws:\\/\\/localhost:9000\\/room\\/chat?username=a\")\n\n\u3068\u3044\u3046WebSocket\u7528\u30d7\u30ed\u30c8\u30b3\u30eb\u306eURL\u306b\u5909\u63db\u3057\u3066\u304f\u308c\u308b\u3002\u3053\u3053\u3067\u306f\u305d\u306eURL\u3092\u7528\u3044\u3066WebSocket\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\u3002\u540c\u6642\u306b\u3001\u975e\u540c\u671f\u3067\u3001\u30b5\u30fc\u30d0\u3068\u306eWebSocket\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u306e\u78ba\u7acb\u3082\u884c\u308f\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3042\u308b(The WebSocket API \uff08\u65e5\u672c\u8a9e\u8a33\uff09)\u3002\nroutes\u30d5\u30a1\u30a4\u30eb\u3092\u898b\u3066\u307f\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u304a\u308a\u3001\u3053\u306e\u6642Application.java\u306echat\u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3070\u308c\u308b\u306e\u304c\u308f\u304b\u308b\u3002\n\nroutes\nGET    /room/chat    controllers.Application.chat(username)\n\n\n\u3053\u306e\u6642\u3001\u30b5\u30fc\u30d0\u5074\u3067\u3082WebSocket\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u30d6\u30e9\u30a6\u30b6\u5074\u306b\u8fd4\u3057\u3066\u3044\u308b\u3002\u3053\u308c\u3067\u30b5\u30fc\u30d0\u3068\u306eWebSocket\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u304c\u78ba\u7acb\u3059\u308b\u3002\n\nApplication.java\npublic static WebSocket<JsonNode> chat(final String username) {\n    return new WebSocket<JsonNode>() {\n\n        // Called when the Websocket Handshake is done.\n        public void onReady(WebSocket.In<JsonNode> in, WebSocket.Out<JsonNode> out){\n\n            // Join the chat room.\n            try { \n                ChatRoom.join(username, in, out);\n            } catch (Exception ex) {\n                ex.printStackTrace();\n            }\n        }\n    };\n}\n\n\nchatRoom.scala.js\u3067\u306fWebSocket\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u306e\u78ba\u7acb\u306e\u4ed6\u3001\n\nsendMessage \nreceiveEvent \nhandleReturnKey \n\n\u306e3\u3064\u306e\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u3002\nsendMessage\u306f\u3001WebSocket\u3078\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u9001\u4fe1\u3092\u884c\u3063\u3066\u304a\u308a\u3001\u30c6\u30ad\u30b9\u30c8\u30a8\u30ea\u30a2\u306e\u6587\u5b57\u5217\u3092JSON\u5316\u3057\u305f\u5f8c\u3001WebSocket\u306e.send()\u30e1\u30bd\u30c3\u30c9\u3067\u30b5\u30fc\u30d0\u306b\u9001\u4fe1\u3057\u3066\u3044\u308b\u3002\u9001\u4fe1\u304c\u7d42\u308f\u3063\u305f\u3089\u30c6\u30ad\u30b9\u30c8\u30a8\u30ea\u30a2\u3092\u30af\u30ea\u30a2\u3057\u3066\u3044\u308b\u3002\nreceiveEvent\u306f\u3001chatSocket.onmessage\u3068\u7d10\u4ed8\u3051\u3089\u308c\u3066\u304a\u308a\u3001WebSocket\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u3051\u3068\u3063\u305f\u969b\u306b\u884c\u3046\u51e6\u7406\u304c\u66f8\u3044\u3066\u3042\u308b\u3002\nonmessage\u306e\u5f15\u6570\u306b\u306fWebSocket\u306e\u623b\u308a\u5024\u3068\u3057\u3066JSON\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u5e30\u3063\u3066\u304f\u308b\u306e\u3067\u3001\u307e\u305a\u305d\u308c\u3092\u30d1\u30fc\u30b9\u3057\u3066\u3044\u308b\u3002JSON\u306b\u30a8\u30e9\u30fc\u304c\u5165\u3063\u3066\u3044\u305f\u5834\u5408\u306f\u30a8\u30e9\u30fc\u3092\u8868\u793a\u3059\u308b\u3002\n\u30a8\u30e9\u30fc\u304c\u306a\u3044\u5834\u5408\u306f\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u7528\u306ediv\u3092\u8ffd\u52a0\u3057\u3066\u30c1\u30e3\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u7528\u306ediv\u306e\u4e00\u756a\u4e0b\u306b\u8ffd\u52a0\u3001\u30eb\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u4e00\u89a7\u3082ul\u3092\u6bce\u56de\u30af\u30ea\u30a2\u3057\u3066\u65b0\u305f\u306bli\u3092\u7d44\u307f\u76f4\u3057\u3066\u3044\u308b\u3002\u81ea\u5206\u306e\u767a\u8a00\u306b\u306f\u305d\u308c\u3068\u308f\u304b\u308b\u3088\u3046CSS\u306e\u30af\u30e9\u30b9\u3092\u8ffd\u52a0\u3057\u305f\u308a\u3057\u3066\u3044\u308b\u3002\nhandleReturnKey\u306f\u3001\u30c6\u30ad\u30b9\u30c8\u30a8\u30ea\u30a2\u3067\u306eEnter\u30ad\u30fc\u306e\u6319\u52d5\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u3002\n\n\u9577\u304f\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u3053\u3053\u307e\u3067\u3002\u6b21\u56de\u306f\u30b5\u30fc\u30d0\u5074\u306e\u6319\u52d5\u306b\u3064\u3044\u3066\u898b\u3066\u3044\u304f\u3002\n\nPlayframework\u4ed8\u5c5e\u306e\u30b5\u30f3\u30d7\u30eb'websocket-chat'\u3092\u898b\u3066\u307f\u308b(1/4)\nPlayframework\u4ed8\u5c5e\u306e\u30b5\u30f3\u30d7\u30eb'websocket-chat'\u3092\u898b\u3066\u307f\u308b(3/4)\nPlayframework\u4ed8\u5c5e\u306e\u30b5\u30f3\u30d7\u30eb'websocket-chat'\u3092\u898b\u3066\u307f\u308b(4/4)\n[\u524d\u56de](http://qiita.com/yyyske/items/d9e3cf69f7a6f5fb732b)\u306e\u7d9a\u304d\u3002\u4eca\u56de\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306eWebSocket\u306e\u8a18\u8ff0\u3092\u4e2d\u5fc3\u306b\u898b\u3066\u3044\u307e\u3059\u3002\n\n\n\n##chatRoom.scala.html\n```scala:chatRoom.scala.html\n@(username: String)\n\n@main(username) {\n    \n    <div class=\"page-header\">\n        <h1>Welcome to the chat room \n            <small>You are chatting as @username</small></h1>\n    </div>\n    \n    <div id=\"onError\" class=\"alert-message error\">\n        <p>\n            <strong>Oops!</strong> <span></span>\n        </p>\n    </div>\n    \n    <div id=\"onChat\" class=\"row\">\n        <div class=\"span10\" id=\"main\">\n            <div id=\"messages\">\n            </div>\n            <textarea id=\"talk\"></textarea>\n        </div>\n        <div class=\"span4\">\n            <h2>Members</h2>\n            <ul id=\"members\">\n            </ul>\n        </div>\n    </div>\n    \n    <script type=\"text/javascript\" charset=\"utf-8\"\n        src=\"@routes.Application.chatRoomJs(username)\"></script>\n    \n}\n```\n`main`\u306eView\u306b\u306f\u3081\u8fbc\u3093\u3067\u8868\u793a\u3057\u3066\u3044\u308b\u3002\n`#onError`\u306e`div`\u306b\u30a8\u30e9\u30fc\u8868\u793a\u3001`#onChat`\u306e`div`\u306e\u5de6\u306e\u5217\u306b\u30c1\u30e3\u30c3\u30c8\u306e\u5185\u5bb9\u3001\u53f3\u306e\u5217\u306b\u30eb\u30fc\u30e0\u5185\u306e\u4eba\u4e00\u89a7(Members)\u3092\u8868\u793a\u3057\u3066\u3044\u308b\u3002\u4e00\u756a\u4e0b\u3067javascript\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u308b\u304c\u3001\u6307\u5b9a\u306e\u4ed5\u65b9\u304c\u72ec\u7279\u3067\u3042\u308b\u3002`routes`\u30d5\u30a1\u30a4\u30eb\u3092\u898b\u3066\u307f\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n```text:routes\nGET    /assets/javascripts/chatroom.js\n    controllers.Application.chatRoomJs(username)\n```\nJS\u306esrc\u6307\u5b9a\u306e\u90e8\u5206\u306f\u3001\u5b9f\u884c\u6642\u306b\u306f\n\n```html\nsrc=\"/assets/javascripts/chatroom.js?username=a\"\n```\n\u3068\u5909\u63db\u3055\u308c\u308b\u305f\u3081\u3001\u30af\u30a8\u30ea\u6587\u5b57\u5217\u3092\u6e21\u3057\u306a\u304c\u3089JS\u3092\u53d6\u5f97\u3057\u306b\u3044\u304f\u3053\u3068\u306b\u306a\u308b\u3002routes\u30d5\u30a1\u30a4\u30eb\u306e\u5b9a\u7fa9\u306b\u3088\u308a\u3001`/assets/javascripts/chatroom.js`\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u5834\u5408\u306f`Application.java`\u306e`chatRoomJs`\u30a2\u30af\u30b7\u30e7\u30f3\u304c\u547c\u3070\u308c\u308b\u3053\u3068\u306b\u306a\u3063\u3066\u3044\u308b\u3002\u3053\u3053\u3067JS\u3092\u751f\u6210\u3057\u3001\u30d6\u30e9\u30a6\u30b6\u5074\u306b\u8fd4\u3057\u3066\u3044\u308b\u3002\n\n```java:Application.java\npublic static Result chatRoomJs(String username) {\n    return ok(views.js.chatRoom.render(username));\n}\n```\n\u3061\u306a\u307f\u306b`views`\u30d1\u30c3\u30b1\u30fc\u30b8\u5185\u306b`chatRoom.scala.js`\u3068\u3044\u3046\u540d\u524d\u3067\u914d\u7f6e\u3057\u305fJS\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u308b\u3068`views.js`\u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u914d\u7f6e\u3055\u308c\u3001`views.js.chatRoom`\u3068\u3044\u3046\u540d\u524d\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u6a21\u69d8\u3002\n\n##chatRoom.scala.js\n```java:chatRoom.scala.js\n@(username: String)\n\n$(function() {\n    var WS = window['MozWebSocket'] ? MozWebSocket : WebSocket\n    var chatSocket = \n        new WS(\"@routes.Application.chat(username).webSocketURL(request)\")\n\n    var sendMessage = function() {\n        chatSocket.send(JSON.stringify(\n            {text: $(\"#talk\").val()}\n        ))\n        $(\"#talk\").val('')\n    }\n\n    var receiveEvent = function(event) {\n        var data = JSON.parse(event.data)\n\n        // Handle errors\n        if(data.error) {\n            chatSocket.close()\n            $(\"#onError span\").text(data.error)\n            $(\"#onError\").show()\n            return\n        } else {\n            $(\"#onChat\").show()\n        }\n\n        // Create the message element\n        var el = $('<div class=\"message\"><span></span><p></p></div>')\n        $(\"span\", el).text(data.user)\n        $(\"p\", el).text(data.message)\n        $(el).addClass(data.kind)\n        if(data.user == '@username') $(el).addClass('me')\n        $('#messages').append(el)\n\n        // Update the members list\n        $(\"#members\").html('')\n        $(data.members).each(function() {\n            var li = document.createElement('li');\n            li.textContent = this;\n            $(\"#members\").append(li);\n        })\n    }\n\n    var handleReturnKey = function(e) {\n        if(e.charCode == 13 || e.keyCode == 13) {\n            e.preventDefault()\n            sendMessage()\n        }\n    }\n\n    $(\"#talk\").keypress(handleReturnKey)\n\n    chatSocket.onmessage = receiveEvent\n\n})\n```\n\u3053\u3053\u304c\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306eWebSocket\u3092\u62c5\u3063\u3066\u3044\u308b\u8981\u3068\u306a\u3063\u3066\u3044\u308b\u6a21\u69d8\u3002\n\n`MozWebSocket`\u304c\u5b9a\u7fa9\u3057\u3066\u3042\u308b\u5834\u5408\u306f\u305d\u3063\u3061\u3092\u4f7f\u3046\u3088\u3046FireFox\u5bfe\u5fdc\u304c\u3057\u3066\u3042\u308b\u304c\u3001FF11\u304b\u3089\u306f`WebSocket`\u306b\u7d71\u4e00\u3055\u308c\u305f\u6a21\u69d8\u3002\n\n```js\nvar chatSocket = \n    new WS(\"@routes.Application.chat(username).webSocketURL(request)\")\n```\n\u3068\u3044\u3046\u8a18\u8ff0\u3092\u3057\u3066\u304a\u304f\u3068\u3001\u5b9f\u884c\u6642\u306b\n\n```js\nvar chatSocket = new WS(\"ws:\\/\\/localhost:9000\\/room\\/chat?username=a\")\n```\n\u3068\u3044\u3046WebSocket\u7528\u30d7\u30ed\u30c8\u30b3\u30eb\u306eURL\u306b\u5909\u63db\u3057\u3066\u304f\u308c\u308b\u3002\u3053\u3053\u3067\u306f\u305d\u306eURL\u3092\u7528\u3044\u3066WebSocket\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\u3002\u540c\u6642\u306b\u3001\u975e\u540c\u671f\u3067\u3001\u30b5\u30fc\u30d0\u3068\u306eWebSocket\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u306e\u78ba\u7acb\u3082\u884c\u308f\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3042\u308b([The WebSocket API \uff08\u65e5\u672c\u8a9e\u8a33\uff09](http://www.hcn.zaq.ne.jp/___/WEB/WebSocket-ja.html))\u3002\n\nroutes\u30d5\u30a1\u30a4\u30eb\u3092\u898b\u3066\u307f\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u304a\u308a\u3001\u3053\u306e\u6642`Application.java`\u306e`chat`\u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3070\u308c\u308b\u306e\u304c\u308f\u304b\u308b\u3002\n\n```text:routes\nGET    /room/chat    controllers.Application.chat(username)\n```\n\u3053\u306e\u6642\u3001\u30b5\u30fc\u30d0\u5074\u3067\u3082WebSocket\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u30d6\u30e9\u30a6\u30b6\u5074\u306b\u8fd4\u3057\u3066\u3044\u308b\u3002\u3053\u308c\u3067\u30b5\u30fc\u30d0\u3068\u306eWebSocket\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u304c\u78ba\u7acb\u3059\u308b\u3002\n\n```java:Application.java\npublic static WebSocket<JsonNode> chat(final String username) {\n    return new WebSocket<JsonNode>() {\n        \n        // Called when the Websocket Handshake is done.\n        public void onReady(WebSocket.In<JsonNode> in, WebSocket.Out<JsonNode> out){\n            \n            // Join the chat room.\n            try { \n                ChatRoom.join(username, in, out);\n            } catch (Exception ex) {\n                ex.printStackTrace();\n            }\n        }\n    };\n}\n```\n\n`chatRoom.scala.js`\u3067\u306fWebSocket\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u306e\u78ba\u7acb\u306e\u4ed6\u3001\n\n* sendMessage \n* receiveEvent \n* handleReturnKey \n\n\u306e3\u3064\u306e\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u3002\n\n`sendMessage`\u306f\u3001WebSocket\u3078\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u9001\u4fe1\u3092\u884c\u3063\u3066\u304a\u308a\u3001\u30c6\u30ad\u30b9\u30c8\u30a8\u30ea\u30a2\u306e\u6587\u5b57\u5217\u3092JSON\u5316\u3057\u305f\u5f8c\u3001WebSocket\u306e`.send()`\u30e1\u30bd\u30c3\u30c9\u3067\u30b5\u30fc\u30d0\u306b\u9001\u4fe1\u3057\u3066\u3044\u308b\u3002\u9001\u4fe1\u304c\u7d42\u308f\u3063\u305f\u3089\u30c6\u30ad\u30b9\u30c8\u30a8\u30ea\u30a2\u3092\u30af\u30ea\u30a2\u3057\u3066\u3044\u308b\u3002\n\n`receiveEvent`\u306f\u3001`chatSocket.onmessage`\u3068\u7d10\u4ed8\u3051\u3089\u308c\u3066\u304a\u308a\u3001WebSocket\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u3051\u3068\u3063\u305f\u969b\u306b\u884c\u3046\u51e6\u7406\u304c\u66f8\u3044\u3066\u3042\u308b\u3002\n`onmessage`\u306e\u5f15\u6570\u306b\u306fWebSocket\u306e\u623b\u308a\u5024\u3068\u3057\u3066JSON\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u5e30\u3063\u3066\u304f\u308b\u306e\u3067\u3001\u307e\u305a\u305d\u308c\u3092\u30d1\u30fc\u30b9\u3057\u3066\u3044\u308b\u3002JSON\u306b\u30a8\u30e9\u30fc\u304c\u5165\u3063\u3066\u3044\u305f\u5834\u5408\u306f\u30a8\u30e9\u30fc\u3092\u8868\u793a\u3059\u308b\u3002\n\u30a8\u30e9\u30fc\u304c\u306a\u3044\u5834\u5408\u306f\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u7528\u306e`div`\u3092\u8ffd\u52a0\u3057\u3066\u30c1\u30e3\u30c3\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u7528\u306e`div`\u306e\u4e00\u756a\u4e0b\u306b\u8ffd\u52a0\u3001\u30eb\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u4e00\u89a7\u3082`ul`\u3092\u6bce\u56de\u30af\u30ea\u30a2\u3057\u3066\u65b0\u305f\u306b`li`\u3092\u7d44\u307f\u76f4\u3057\u3066\u3044\u308b\u3002\u81ea\u5206\u306e\u767a\u8a00\u306b\u306f\u305d\u308c\u3068\u308f\u304b\u308b\u3088\u3046CSS\u306e\u30af\u30e9\u30b9\u3092\u8ffd\u52a0\u3057\u305f\u308a\u3057\u3066\u3044\u308b\u3002\n\n`handleReturnKey`\u306f\u3001\u30c6\u30ad\u30b9\u30c8\u30a8\u30ea\u30a2\u3067\u306eEnter\u30ad\u30fc\u306e\u6319\u52d5\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u3002\n\n-----\n\n\u9577\u304f\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u3053\u3053\u307e\u3067\u3002[\u6b21\u56de](http://qiita.com/yyyske/items/87c49e925237a208373e)\u306f\u30b5\u30fc\u30d0\u5074\u306e\u6319\u52d5\u306b\u3064\u3044\u3066\u898b\u3066\u3044\u304f\u3002\n\n---\n[Playframework\u4ed8\u5c5e\u306e\u30b5\u30f3\u30d7\u30eb'websocket-chat'\u3092\u898b\u3066\u307f\u308b(1/4)](http://qiita.com/yyyske/items/d9e3cf69f7a6f5fb732b)\n[Playframework\u4ed8\u5c5e\u306e\u30b5\u30f3\u30d7\u30eb'websocket-chat'\u3092\u898b\u3066\u307f\u308b(3/4)](http://qiita.com/yyyske/items/87c49e925237a208373e)\n[Playframework\u4ed8\u5c5e\u306e\u30b5\u30f3\u30d7\u30eb'websocket-chat'\u3092\u898b\u3066\u307f\u308b(4/4)](http://qiita.com/yyyske/items/a6f5090f555038d6ff01)\n", "tags": ["PlayFramework2.2.3", "Java", "websocket"]}