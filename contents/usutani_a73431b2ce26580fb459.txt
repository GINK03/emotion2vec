{"context": " More than 1 year has passed since last update.\u74b0\u5883\n\nOracle Database XE 11.2\n\n\u53c2\u7167\nOS X \u3067 Vagrant \u306a Ubuntu \u306b Oracle XE \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nOS X Mavericks \u306b Oracle Client \u3068 ruby-oci8 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u8868\u9818\u57df\n\u78ba\u8a8d\nSELECT TABLESPACE_NAME, STATUS, BIGFILE FROM DBA_TABLESPACES;\nSELECT FILE_NAME FROM DBA_DATA_FILES;\n\n-- \u8868\u9818\u57df\u306e\u4f7f\u7528\u91cf\nSELECT\n  D.TABLESPACE_NAME,\n  MB, \n  AVAIL,\n  ROUND((1 - (AVAIL / MB)) * 100) \"USE%\"\nFROM\n  (SELECT TABLESPACE_NAME, ROUND(SUM(BYTES) / (1024 * 1024)) MB\nFROM DBA_DATA_FILES GROUP BY TABLESPACE_NAME) D,\n  (SELECT TABLESPACE_NAME, ROUND(SUM(BYTES) / (1024 * 1024)) AVAIL\nFROM DBA_FREE_SPACE GROUP BY TABLESPACE_NAME) F\nWHERE D.TABLESPACE_NAME=F.TABLESPACE_NAME;\n\n\u4f5c\u6210\n\u30b9\u30e2\u30fc\u30eb\u30fb\u30d5\u30a1\u30a4\u30eb\u8868\u9818\u57df'FOO'\u3092100M\u3067\u4f5c\u6210\u3059\u308b\u3002\nCREATE TABLESPACE FOO \n  DATAFILE '/u01/app/oracle/oradata/XE/foo.dbf' SIZE 100M\n  SEGMENT SPACE MANAGEMENT AUTO;\n\n\u524a\u9664\nDROP TABLESPACE FOO\nINCLUDING CONTENTS AND DATAFILES;\n\n\n\u30e6\u30fc\u30b6\u30fc\n\u78ba\u8a8d\nSELECT * FROM ALL_USERS;\nSELECT USERNAME FROM DBA_USERS;\n-- \u30c7\u30d5\u30a9\u30eb\u30c8\u8868\u9818\u57df\nSELECT USERNAME, DEFAULT_TABLESPACE FROM USER_USERS;\n-- \u30e6\u30fc\u30b6\u30fc'FOO_USER'\u306e\u8868\u9818\u57df\u3092\u78ba\u8a8d\u3059\u308b\nSELECT USERNAME, DEFAULT_TABLESPACE FROM DBA_USERS WHERE USERNAME='FOO_USER';\n\n\u4f5c\u6210\n\u8868\u9818\u57df'FOO'\u306b\u30e6\u30fc\u30b6\u30fc'FOO_UESR'\u3092\u30d1\u30b9\u30ef\u30fc\u30c9'FOO_PASS'\u3067\u4f5c\u6210\u3059\u308b\u3002\nCREATE USER FOO_USER IDENTIFIED BY FOO_PASS\nDEFAULT TABLESPACE FOO;\n\n-- DBA\u30ed\u30fc\u30eb\u3092\u5272\u308a\u5f53\u3066\u308b\nGRANT DBA TO FOO_USER;\n-- \u30b5\u30a4\u30ba\u7121\u5236\u9650\u306e\u6a29\u9650\u3092\u4ed8\u4e0e\u3059\u308b\nGRANT UNLIMITED TABLESPACE TO FOO_USER;\n-- \u63a5\u7d9a\u6a29\u9650\u3092\u4ed8\u4e0e\u3059\u308b\nGRANT CONNECT TO FOO_USER;\nexit\n\nsqlplus FOO_USER/FOO_PASS@xe\n\n**\u74b0\u5883**\n\n- Oracle Database XE 11.2\n\n\u53c2\u7167\n[OS X \u3067 Vagrant \u306a Ubuntu \u306b Oracle XE \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb](http://qiita.com/usutani/items/549533825065ae9ca043)\n[OS X Mavericks \u306b Oracle Client \u3068 ruby-oci8 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb](http://qiita.com/usutani/items/e9a55051c61457989ddd)\n\n# \u8868\u9818\u57df\n\u78ba\u8a8d\n\n```sql\nSELECT TABLESPACE_NAME, STATUS, BIGFILE FROM DBA_TABLESPACES;\nSELECT FILE_NAME FROM DBA_DATA_FILES;\n\n-- \u8868\u9818\u57df\u306e\u4f7f\u7528\u91cf\nSELECT\n  D.TABLESPACE_NAME,\n  MB, \n  AVAIL,\n  ROUND((1 - (AVAIL / MB)) * 100) \"USE%\"\nFROM\n  (SELECT TABLESPACE_NAME, ROUND(SUM(BYTES) / (1024 * 1024)) MB\nFROM DBA_DATA_FILES GROUP BY TABLESPACE_NAME) D,\n  (SELECT TABLESPACE_NAME, ROUND(SUM(BYTES) / (1024 * 1024)) AVAIL\nFROM DBA_FREE_SPACE GROUP BY TABLESPACE_NAME) F\nWHERE D.TABLESPACE_NAME=F.TABLESPACE_NAME;\n```\n\n\u4f5c\u6210\n\u30b9\u30e2\u30fc\u30eb\u30fb\u30d5\u30a1\u30a4\u30eb\u8868\u9818\u57df'FOO'\u3092100M\u3067\u4f5c\u6210\u3059\u308b\u3002\n\n```sql\nCREATE TABLESPACE FOO \n  DATAFILE '/u01/app/oracle/oradata/XE/foo.dbf' SIZE 100M\n  SEGMENT SPACE MANAGEMENT AUTO;\n```\n\n\u524a\u9664\n\n```sql\nDROP TABLESPACE FOO\nINCLUDING CONTENTS AND DATAFILES;\n```\n\n# \u30e6\u30fc\u30b6\u30fc\n\n\u78ba\u8a8d\n\n```sql\nSELECT * FROM ALL_USERS;\nSELECT USERNAME FROM DBA_USERS;\n-- \u30c7\u30d5\u30a9\u30eb\u30c8\u8868\u9818\u57df\nSELECT USERNAME, DEFAULT_TABLESPACE FROM USER_USERS;\n-- \u30e6\u30fc\u30b6\u30fc'FOO_USER'\u306e\u8868\u9818\u57df\u3092\u78ba\u8a8d\u3059\u308b\nSELECT USERNAME, DEFAULT_TABLESPACE FROM DBA_USERS WHERE USERNAME='FOO_USER';\n```\n\n\u4f5c\u6210\n\u8868\u9818\u57df'FOO'\u306b\u30e6\u30fc\u30b6\u30fc'FOO_UESR'\u3092\u30d1\u30b9\u30ef\u30fc\u30c9'FOO_PASS'\u3067\u4f5c\u6210\u3059\u308b\u3002\n\n```sql\nCREATE USER FOO_USER IDENTIFIED BY FOO_PASS\nDEFAULT TABLESPACE FOO;\n\n-- DBA\u30ed\u30fc\u30eb\u3092\u5272\u308a\u5f53\u3066\u308b\nGRANT DBA TO FOO_USER;\n-- \u30b5\u30a4\u30ba\u7121\u5236\u9650\u306e\u6a29\u9650\u3092\u4ed8\u4e0e\u3059\u308b\nGRANT UNLIMITED TABLESPACE TO FOO_USER;\n-- \u63a5\u7d9a\u6a29\u9650\u3092\u4ed8\u4e0e\u3059\u308b\nGRANT CONNECT TO FOO_USER;\nexit\n\nsqlplus FOO_USER/FOO_PASS@xe\n```\n", "tags": ["oracle"]}