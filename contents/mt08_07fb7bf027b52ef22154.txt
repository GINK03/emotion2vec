{"tags": ["VisualStudio2015", "VisualStudio2015", "serialport", "C"], "context": "\n\n\u6982\u8981\n\n\nSerial library for C++\u3092\u4f7f\u3063\u3066\u3001\u30b7\u30ea\u30a2\u30eb\u30dd\u30fc\u30c8\u901a\u4fe1\n\u30e9\u30a4\u30d6\u30e9\u30ea\u306f LGPL\u3001\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306fGPL\n\nSerial.lib\u306f Static Lib\u3067\u751f\u6210\u3055\u308c\u308b => DLL\u306b\u3059\u308c\u3070\u3001\u81ea\u5206\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u3001\u30d0\u30a4\u30ca\u30ea\u914d\u5e03\u53ef\u80fd(\u3060\u3088\u306d??)\u3002(\u81ea\u5206\u306e\u304d\u305f\u306a\u3044\u30b3\u30fc\u30c9\u3092\u4e16\u306b\u51fa\u3055\u306a\u304f\u3066\u3082\u3088\u3044!?)\n\n\n\u74b0\u5883\n\nVisual Studio 2015u3\nSerial library for C++\n\n\n\u624b\u9806\n\nDLL\u751f\u6210\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9(Serial_demo.zip)\u3001\u89e3\u51cd(Serial\u30d5\u30a9\u30eb\u30c0)\n\nSerial/Serial.sln \u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3002=> VC\u8d77\u52d5\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9=>[OK]\n\n\n\u306a\u3093\u304b\u805e\u304b\u308c\u308b\u304b\u3089\u3001\u30c1\u30a7\u30c3\u30af\u3092\u306f\u305a\u3057\u3066\u3001[OK]\n\n\n\nSerial/Serial.h\u3092\u7de8\u96c6\n\nSerial/Serial.h\u3053\u3093\u306a\u611f\u3058\n// Copyright (C) 1999-2003 Ramon de Klein\n//                         (Ramon.de.Klein@ict.nl)\n\n#if DLLEXPORT_SERIAL\n#define DllExport   __declspec( dllexport )\n#else\n#define DllExport\n#endif\n\nclass DllExport CSerial\n{\n// Class enumerations\npublic:\n...\n\n\n\nSolution\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u304b\u3089\u3001Serial\u3067\u53f3\u30af\u30ea=>\u30d7\u30ed\u30d1\u30c6\u30a3\nStatic library(.lib) \u304b\u3089 Dynamic Library(.dll)\u306b\u5909\u66f4\n\nC/C++ > \u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u3067\u3001DLLEXPORT_SERIAL\u3092\u5b9a\u7fa9\n\n\nSolution\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u304b\u3089\u3001Serial\u3067\u53f3\u30af\u30ea=>\u30d3\u30eb\u30c9\n\n\u3053\u3093\u306a\u611f\u3058\n$ tree ./_Output/\n./_Output/\n\u2514\u2500\u2500 Release\n    \u251c\u2500\u2500 Serial.dll\n    \u251c\u2500\u2500 Serial.exp\n    \u251c\u2500\u2500 Serial.iobj\n    \u251c\u2500\u2500 Serial.ipdb\n    \u251c\u2500\u2500 Serial.lib\n    \u2514\u2500\u2500 Serial.pdb\n\n1 directory, 6 files\n\n\n\n\n\nHelloWold\u304b\u3089\u4f7f\u3063\u3066\u307f\u308b\n\nSolution\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u304b\u3089 HelloWold\u4ee5\u5916\u3092\u524a\u9664\n\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u3072\u3089\u3044\u3066\u3001Include(C:\\VS2015\\Serial\\Serial)\u3068Library(C:\\VS2015\\Serial_Output\\Release)\u306e\u30d1\u30b9\u3092\u8ffd\u52a0\n\n\n\u30ea\u30f3\u30ab\u30fc\u306e\u5165\u529b\u306b\u3001Serial.lib\u3092\u8ffd\u52a0\n\n\n\u30d3\u30eb\u30c9\u3001\u5b9f\u884c\n(Serial.dllL\u3068\u304b\u3001exe\u3068\u304a\u306a\u3058\u3068\u3053\u304a\u304b\u306a\u3044\u3068\u3060\u3081\u304b\u3082)\n\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f7f\u3044\u65b9\n\n\u3053\u3093\u306a\u611f\u3058\u3002\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u306f\u3046\u307e\u304f\u3084\u308c\u3088\uff01\n//\u30d8\u30c3\u30c0\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\n#include \"Serial.h\"\n\n//\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\nCSerial serial;\n\n//COM\u30dd\u30fc\u30c8\u30aa\u30fc\u30d7\u30f3\n// \"\\\\\\\\.\\\\COMxx\"\u3060\u3068\u3001COM10\u4ee5\u4e0a\u4f7f\u3048\u308b\nserial.Open(_T(\"\\\\\\\\.\\\\COM11\"), 0, 0, false);\n\n//\u30b7\u30ea\u30a2\u30eb\u306e\u8a2d\u5b9a\nserial.Setup(CSerial::EBaud38400, CSerial::EData8, CSerial::EParNone, CSerial::EStop1);\n\n//\u30cf\u30f3\u30c9\u30b7\u30a7\u30a4\u30af\u306e\u8a2d\u5b9a\n//    EHandshakeUnknown         = -1,   // Unknown\n//    EHandshakeOff             =  0,   // No handshaking\n//    EHandshakeHardware        =  1,   // Hardware handshaking (RTS/CTS)\n//    EHandshakeSoftware        =  2    // Software handshaking (XON/XOFF)\nserial.SetupHandshaking(CSerial::EHandshakeOff);\n\n//\u66f8\u304d\u8fbc\u307f\n//LONG CSerial::Write (const void* pData, size_t iLen, DWORD* pdwWritten, LPOVERLAPPED lpOverlapped, DWORD dwTimeout);\nserial.Write(&send_buf[0], 16, &len_sent);\n\n//\u8aad\u307f\u51fa\u3057\n//LONG CSerial::Read (void* pData, size_t iLen, DWORD* pdwRead, LPOVERLAPPED lpOverlapped, DWORD dwTimeout)\nserial.Read(&recv_buf[0], 1, &len_received);\n\n\n//COM\u30dd\u30fc\u30c8\u30af\u30ed\u30fc\u30ba\nserial.Close();\n\n\n\n## \u6982\u8981\n- [Serial library for C++](http://www.codeproject.com/Articles/992/Serial-library-for-C)\u3092\u4f7f\u3063\u3066\u3001\u30b7\u30ea\u30a2\u30eb\u30dd\u30fc\u30c8\u901a\u4fe1\n- \u30e9\u30a4\u30d6\u30e9\u30ea\u306f <font color='red'>LGPL</font>\u3001\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306fGPL\n- `Serial.lib`\u306f Static Lib\u3067\u751f\u6210\u3055\u308c\u308b => <font color='blue'>DLL</font>\u306b\u3059\u308c\u3070\u3001\u81ea\u5206\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u3001\u30d0\u30a4\u30ca\u30ea\u914d\u5e03\u53ef\u80fd(\u3060\u3088\u306d??)\u3002(\u81ea\u5206\u306e\u304d\u305f\u306a\u3044\u30b3\u30fc\u30c9\u3092\u4e16\u306b\u51fa\u3055\u306a\u304f\u3066\u3082\u3088\u3044!?)\n\n## \u74b0\u5883\n- Visual Studio 2015u3\n- [Serial library for C++](http://www.codeproject.com/Articles/992/Serial-library-for-C)\n\n## \u624b\u9806\n\n### DLL\u751f\u6210\n1. \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9(`Serial_demo.zip`)\u3001\u89e3\u51cd(`Serial`\u30d5\u30a9\u30eb\u30c0)\n2. `Serial/Serial.sln` \u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3002=> VC\u8d77\u52d5\n3. \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9=>[OK]\n![VC-Serial01.png](https://qiita-image-store.s3.amazonaws.com/0/75594/d843eb44-402e-b9f4-46d6-37e5eb649d56.png)\n4. \u306a\u3093\u304b\u805e\u304b\u308c\u308b\u304b\u3089\u3001\u30c1\u30a7\u30c3\u30af\u3092\u306f\u305a\u3057\u3066\u3001[OK]\n![VC-Serial02.png](https://qiita-image-store.s3.amazonaws.com/0/75594/17b9b448-c0f3-c087-d0ed-5e0e25e70b55.png)\n5. `Serial/Serial.h`\u3092\u7de8\u96c6\n\n    ```cpp:Serial/Serial.h\u3053\u3093\u306a\u611f\u3058\n// Copyright (C) 1999-2003 Ramon de Klein\n//                         (Ramon.de.Klein@ict.nl)\n    \n    #if DLLEXPORT_SERIAL\n#define DllExport   __declspec( dllexport )\n#else\n#define DllExport\n#endif\n    \n    class DllExport CSerial\n{\n// Class enumerations\npublic:\n...\n```\n\n6. Solution\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u304b\u3089\u3001`Serial`\u3067\u53f3\u30af\u30ea=>\u30d7\u30ed\u30d1\u30c6\u30a3\n- `Static library(.lib)` \u304b\u3089 `Dynamic Library(.dll)`\u306b\u5909\u66f4\n![VC-Serial03.png](https://qiita-image-store.s3.amazonaws.com/0/75594/e0fa6919-0463-21a3-82c5-3b5575063a33.png)\n\n7. C/C++ > \u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u3067\u3001`DLLEXPORT_SERIAL`\u3092\u5b9a\u7fa9\n![VC-Serial04.png](https://qiita-image-store.s3.amazonaws.com/0/75594/a0ad2460-4719-b9a2-5bfd-e6bd9de2d36e.png)\n\n8. Solution\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u304b\u3089\u3001`Serial`\u3067\u53f3\u30af\u30ea=>\u30d3\u30eb\u30c9\n\n    ```shell-session:\u3053\u3093\u306a\u611f\u3058\n    $ tree ./_Output/\n    ./_Output/\n    \u2514\u2500\u2500 Release\n        \u251c\u2500\u2500 Serial.dll\n        \u251c\u2500\u2500 Serial.exp\n        \u251c\u2500\u2500 Serial.iobj\n        \u251c\u2500\u2500 Serial.ipdb\n        \u251c\u2500\u2500 Serial.lib\n        \u2514\u2500\u2500 Serial.pdb\n    \n    1 directory, 6 files\n```\n\n\n### `HelloWold`\u304b\u3089\u4f7f\u3063\u3066\u307f\u308b\n1. Solution\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u304b\u3089 `HelloWold`**\u4ee5\u5916**\u3092\u524a\u9664\n2. \u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u3072\u3089\u3044\u3066\u3001`Include`(C:\\VS2015\\Serial\\Serial)\u3068`Library`(C:\\VS2015\\Serial\\_Output\\Release)\u306e\u30d1\u30b9\u3092\u8ffd\u52a0\n![VC-Serial05.png](https://qiita-image-store.s3.amazonaws.com/0/75594/c821702d-2c54-7f75-93c1-f5f951726a5f.png)\n3. \u30ea\u30f3\u30ab\u30fc\u306e\u5165\u529b\u306b\u3001Serial.lib\u3092\u8ffd\u52a0\n![VC-Serial06.png](https://qiita-image-store.s3.amazonaws.com/0/75594/8aa4ad17-18d4-2914-bc6b-41d265ca8625.png)\n4. \u30d3\u30eb\u30c9\u3001\u5b9f\u884c\n(Serial.dllL\u3068\u304b\u3001exe\u3068\u304a\u306a\u3058\u3068\u3053\u304a\u304b\u306a\u3044\u3068\u3060\u3081\u304b\u3082)\n\n### \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f7f\u3044\u65b9\n\n```cpp:\u3053\u3093\u306a\u611f\u3058\u3002\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u306f\u3046\u307e\u304f\u3084\u308c\u3088\uff01\n//\u30d8\u30c3\u30c0\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\n#include \"Serial.h\"\n\n//\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\nCSerial serial;\n\n//COM\u30dd\u30fc\u30c8\u30aa\u30fc\u30d7\u30f3\n// \"\\\\\\\\.\\\\COMxx\"\u3060\u3068\u3001COM10\u4ee5\u4e0a\u4f7f\u3048\u308b\nserial.Open(_T(\"\\\\\\\\.\\\\COM11\"), 0, 0, false);\n\n//\u30b7\u30ea\u30a2\u30eb\u306e\u8a2d\u5b9a\nserial.Setup(CSerial::EBaud38400, CSerial::EData8, CSerial::EParNone, CSerial::EStop1);\n\n//\u30cf\u30f3\u30c9\u30b7\u30a7\u30a4\u30af\u306e\u8a2d\u5b9a\n//    EHandshakeUnknown\t\t\t= -1,\t// Unknown\n//    EHandshakeOff\t\t\t\t=  0,\t// No handshaking\n//    EHandshakeHardware\t\t=  1,\t// Hardware handshaking (RTS/CTS)\n//    EHandshakeSoftware\t\t=  2\t// Software handshaking (XON/XOFF)\nserial.SetupHandshaking(CSerial::EHandshakeOff);\n\n//\u66f8\u304d\u8fbc\u307f\n//LONG CSerial::Write (const void* pData, size_t iLen, DWORD* pdwWritten, LPOVERLAPPED lpOverlapped, DWORD dwTimeout);\nserial.Write(&send_buf[0], 16, &len_sent);\n\n//\u8aad\u307f\u51fa\u3057\n//LONG CSerial::Read (void* pData, size_t iLen, DWORD* pdwRead, LPOVERLAPPED lpOverlapped, DWORD dwTimeout)\nserial.Read(&recv_buf[0], 1, &len_received);\n\n\n//COM\u30dd\u30fc\u30c8\u30af\u30ed\u30fc\u30ba\nserial.Close();\n\n```\n\n"}