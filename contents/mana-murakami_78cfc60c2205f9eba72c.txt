{"context": "\n\n\u306f\u3058\u3081\u306b\nubuntu14.04\u306bnvidia-docker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306e\u7d9a\u304d\nnvidia-docker\u3067\u30a4\u30e1\u30fc\u30b8\u3092\u52d5\u4f5c\u3055\u305b\u3066\u307f\u308b\n\n\u30a8\u30cc\u30d3\u30c7\u30a3\u30a2\u306edocker hub\n\u30a8\u30cc\u30d3\u30c7\u30a3\u30a2\u306fdocker hub\u306b\u69d8\u3005\u306edocker\u30a4\u30e1\u30fc\u30b8\u3092\u516c\u958b\u3057\u3066\u3044\u308b\u3002\u3053\u308c\u3092\u4f7f\u3046\u3068\u4fbf\u5229\n\u30a8\u30cc\u30d3\u30c7\u30a3\u30a2\u306edocker hub\u306f\u3053\u3061\u3089\n\n\u73fe\u5728\u3001\u30a8\u30cc\u30d3\u30c7\u30a3\u30a2\u304c\u516c\u958b\u3057\u3066\u3044\u308b\u30a4\u30e1\u30fc\u30b8\u306f\u5927\u304d\u304f\u5206\u3051\u3066\u4ee5\u4e0b\u306e\uff13\u3064\n1. CUDA+cuDNN\u306e\u958b\u767a\u74b0\u5883\u304a\u3088\u3073\u5b9f\u884c\u74b0\u5883\n2. nvcaffe\u74b0\u5883\n3. DIGITS\u74b0\u5883 \n\nnvidia-docker\u3092\u4f7f\u3063\u3066caffe\u3092\u52d5\u304b\u3059\n\nnvidia/caffe\u306e\u6982\u8981\ncaffe\u306e\u30d3\u30eb\u30c9\u306f\u5927\u5909\u3002CUDA\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u5909\u308f\u308b\u5ea6\u3001cuDNN\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u308b\u5ea6\u3001\u30d3\u30eb\u30c9\u3057\u76f4\u3059\u306e\u306f\u5927\u5909\u3002\u305d\u3046\u3044\u3046\u6642\u306f\u3001nvcaffe\u306edocker\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3046\u3068\u4fbf\u5229\nnvidia/caffe\u30a4\u30e1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\nlatest\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\u73fe\u5728\u306elatest\u3060\u3068\u4f7f\u7528\u3057\u3066\u3044\u308bCUDA\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3068cuDNN\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306fCUDA7.5\u3068cuDNN5\u3002\u81ea\u5206\u3067\u30d3\u30eb\u30c9\u3057\u306a\u304f\u3066\u3082\u6700\u65b0\u304c\u624b\u306b\u5165\u3063\u3066\u4fbf\u5229\u3002(\u3082\u3046\u3059\u3050CUDA8\u3082\u51fa\u308b)\n\nnvidia/caffe\u306b\u30ea\u30f3\u30af\u3055\u308c\u3066\u308bCUDA\u95a2\u9023\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u78ba\u8a8d\n$ sudo nvidia-docker run --rm nvidia/caffe ldd /usr/bin/caffe |grep libcu\n#CUDA 7.5 & cuDNN 5\n    libcudart.so.7.5 => /usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart.so.7.5 (0x00007f843bbcf000)\n    libcurand.so.7.5 => /usr/local/cuda-7.5/targets/x86_64-linux/lib/libcurand.so.7.5 (0x00007f8435e72000)\n    libcublas.so.7.5 => /usr/local/cuda-7.5/targets/x86_64-linux/lib/libcublas.so.7.5 (0x00007f8434593000)\n    libcudnn.so.5 => /usr/lib/x86_64-linux-gnu/libcudnn.so.5 (0x00007f8430a48000)\n\n\n\u4f7f\u3044\u65b9\u306f\u7c21\u5358\n\nnvidia/caffe\u306e\u5b9f\u884c\n$sudo nvidia-docker run --rm nvidia/caffe [caffe\u306e\u30b3\u30de\u30f3\u30c9]\n\n\n\u3068\u3044\u3046\u611f\u3058\u3067\u4f7f\u7528\u3059\u308b\u3002\n\nnvidia/caffe\u3067\u5b66\u7fd2\n\u4f8b\u3048\u3070\u3001\u30db\u30b9\u30c8\u306bcaffe\u306e\u624b\u66f8\u304d\u6587\u5b57\u8a8d\u8b58\u7528\u5b66\u7fd2\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u3068\u5b66\u7fd2\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b/home/mmurakami/caffe/mnist_test\u306b\u7528\u610f\u3057\u305f\u5834\u5408\n#\u30db\u30b9\u30c8\u5074\u306b\u5b66\u7fd2\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u3068\u5b66\u7fd2\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\n#DIGITS\u3092\u4f7f\u3063\u3066\u3044\u308b\u306a\u3089DIGITS\u306eJOB\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3059\u308c\u3070OK\n$tree /home/mmurakami/caffe/mnist_test \n/home/mmurakami/caffe/mnist_test\n\u251c\u2500\u2500 lenet_solver.prototxt\n\u251c\u2500\u2500 lenet_train_test.prototxt\n\u251c\u2500\u2500 mnist_test_lmdb\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 data.mdb\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 lock.mdb\n\u2514\u2500\u2500 mnist_train_lmdb\n    \u251c\u2500\u2500 data.mdb\n    \u2514\u2500\u2500 lock.mdb\n\n\n\u30db\u30b9\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30de\u30a6\u30f3\u30c8\u3057\u3066\u3057\u307e\u3048\u3070\u3001\u3059\u3050\u306b\u5b66\u7fd2\u3092\u958b\u59cb\u3067\u304d\u308b\u3002\u3053\u3093\u306a\u611f\u3058\n#/mnist_test\u306b\u30db\u30b9\u30c8\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30de\u30a6\u30f3\u30c8\n$sudo nvidia-docker run -v /home/mmurakami/caffe/mnist_test:/mnist_test --rm nvidia/caffe caffe train --solver /mnist_test/lenet_solver.prototxt\n\n\u5b66\u7fd2\u958b\u59cb\n\n#\u306f\u3058\u3081\u306b\n[ubuntu14.04\u306bnvidia-docker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b](http://qiita.com/mana-murakami/items/2ff0c3b3ecd4ce85c2cd)\u306e\u7d9a\u304d\nnvidia-docker\u3067\u30a4\u30e1\u30fc\u30b8\u3092\u52d5\u4f5c\u3055\u305b\u3066\u307f\u308b\n\n#\u30a8\u30cc\u30d3\u30c7\u30a3\u30a2\u306edocker hub\n\u30a8\u30cc\u30d3\u30c7\u30a3\u30a2\u306fdocker hub\u306b\u69d8\u3005\u306edocker\u30a4\u30e1\u30fc\u30b8\u3092\u516c\u958b\u3057\u3066\u3044\u308b\u3002\u3053\u308c\u3092\u4f7f\u3046\u3068\u4fbf\u5229\n\u30a8\u30cc\u30d3\u30c7\u30a3\u30a2\u306edocker hub\u306f[\u3053\u3061\u3089](https://hub.docker.com/u/nvidia/)\n![image](https://qiita-image-store.s3.amazonaws.com/0/125731/87ef5c51-9288-38d9-5f75-8726a5582eea.png)\n\n\u73fe\u5728\u3001\u30a8\u30cc\u30d3\u30c7\u30a3\u30a2\u304c\u516c\u958b\u3057\u3066\u3044\u308b\u30a4\u30e1\u30fc\u30b8\u306f\u5927\u304d\u304f\u5206\u3051\u3066\u4ee5\u4e0b\u306e\uff13\u3064\n1. CUDA+cuDNN\u306e\u958b\u767a\u74b0\u5883\u304a\u3088\u3073\u5b9f\u884c\u74b0\u5883\n2. nvcaffe\u74b0\u5883\n3. DIGITS\u74b0\u5883 \n\n#nvidia-docker\u3092\u4f7f\u3063\u3066caffe\u3092\u52d5\u304b\u3059\n\n##nvidia/caffe\u306e\u6982\u8981\ncaffe\u306e\u30d3\u30eb\u30c9\u306f\u5927\u5909\u3002CUDA\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u5909\u308f\u308b\u5ea6\u3001cuDNN\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u308b\u5ea6\u3001\u30d3\u30eb\u30c9\u3057\u76f4\u3059\u306e\u306f\u5927\u5909\u3002\u305d\u3046\u3044\u3046\u6642\u306f\u3001nvcaffe\u306edocker\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3046\u3068\u4fbf\u5229\n\nnvidia/caffe\u30a4\u30e1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n![snapshot1.png](https://qiita-image-store.s3.amazonaws.com/0/125731/3b72c0b7-deb5-e32f-22cc-f28f0ac08649.png)\n\nlatest\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\u73fe\u5728\u306elatest\u3060\u3068\u4f7f\u7528\u3057\u3066\u3044\u308bCUDA\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3068cuDNN\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306fCUDA7.5\u3068cuDNN5\u3002\u81ea\u5206\u3067\u30d3\u30eb\u30c9\u3057\u306a\u304f\u3066\u3082\u6700\u65b0\u304c\u624b\u306b\u5165\u3063\u3066\u4fbf\u5229\u3002(\u3082\u3046\u3059\u3050CUDA8\u3082\u51fa\u308b)\n\n```bash:nvidia/caffe\u306b\u30ea\u30f3\u30af\u3055\u308c\u3066\u308bCUDA\u95a2\u9023\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u78ba\u8a8d\n$ sudo nvidia-docker run --rm nvidia/caffe ldd /usr/bin/caffe |grep libcu\n#CUDA 7.5 & cuDNN 5\n\tlibcudart.so.7.5 => /usr/local/cuda-7.5/targets/x86_64-linux/lib/libcudart.so.7.5 (0x00007f843bbcf000)\n\tlibcurand.so.7.5 => /usr/local/cuda-7.5/targets/x86_64-linux/lib/libcurand.so.7.5 (0x00007f8435e72000)\n\tlibcublas.so.7.5 => /usr/local/cuda-7.5/targets/x86_64-linux/lib/libcublas.so.7.5 (0x00007f8434593000)\n\tlibcudnn.so.5 => /usr/lib/x86_64-linux-gnu/libcudnn.so.5 (0x00007f8430a48000)\n```\n\n\u4f7f\u3044\u65b9\u306f\u7c21\u5358\n\n```bash:nvidia/caffe\u306e\u5b9f\u884c\n$sudo nvidia-docker run --rm nvidia/caffe [caffe\u306e\u30b3\u30de\u30f3\u30c9]\n```\n\u3068\u3044\u3046\u611f\u3058\u3067\u4f7f\u7528\u3059\u308b\u3002\n##nvidia/caffe\u3067\u5b66\u7fd2\n\n\u4f8b\u3048\u3070\u3001\u30db\u30b9\u30c8\u306bcaffe\u306e\u624b\u66f8\u304d\u6587\u5b57\u8a8d\u8b58\u7528\u5b66\u7fd2\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u3068\u5b66\u7fd2\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b/home/mmurakami/caffe/mnist_test\u306b\u7528\u610f\u3057\u305f\u5834\u5408\n\n```bash:\n#\u30db\u30b9\u30c8\u5074\u306b\u5b66\u7fd2\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u3068\u5b66\u7fd2\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\n#DIGITS\u3092\u4f7f\u3063\u3066\u3044\u308b\u306a\u3089DIGITS\u306eJOB\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3059\u308c\u3070OK\n$tree /home/mmurakami/caffe/mnist_test \n/home/mmurakami/caffe/mnist_test\n\u251c\u2500\u2500 lenet_solver.prototxt\n\u251c\u2500\u2500 lenet_train_test.prototxt\n\u251c\u2500\u2500 mnist_test_lmdb\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 data.mdb\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 lock.mdb\n\u2514\u2500\u2500 mnist_train_lmdb\n    \u251c\u2500\u2500 data.mdb\n    \u2514\u2500\u2500 lock.mdb\n\n```\n\n\u30db\u30b9\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30de\u30a6\u30f3\u30c8\u3057\u3066\u3057\u307e\u3048\u3070\u3001\u3059\u3050\u306b\u5b66\u7fd2\u3092\u958b\u59cb\u3067\u304d\u308b\u3002\u3053\u3093\u306a\u611f\u3058\n\n```bash:\n#/mnist_test\u306b\u30db\u30b9\u30c8\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30de\u30a6\u30f3\u30c8\n$sudo nvidia-docker run -v /home/mmurakami/caffe/mnist_test:/mnist_test --rm nvidia/caffe caffe train --solver /mnist_test/lenet_solver.prototxt\n```\n\u5b66\u7fd2\u958b\u59cb\n![snapshot1.png](https://qiita-image-store.s3.amazonaws.com/0/125731/d27d1f2e-4ecd-a318-75af-4c86a73246ef.png)\n\n\n\n\n\n\n", "tags": ["docker", "nvidia-docker", "CUDA", "Ubuntu", "DeepLearning"]}