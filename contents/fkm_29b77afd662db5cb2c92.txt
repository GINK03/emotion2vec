{"tags": ["KiiCloud"], "context": " More than 1 year has passed since last update.\u3053\u306e\u8a18\u4e8b\u306f\u3001\u3072\u3068\u308aKii Cloud Advent Calendar\u306e\uff17\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n\uff17\u65e5\u76ee\u300c\u30ed\u30b0\u30a4\u30f3\u3092\u5b9f\u88c5\u3057\u3066\u307f\u308b\u300d\n\uff16\u65e5\u76ee\u3067\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u6a5f\u80fd\u304c\u5b9f\u88c5\u3067\u304d\u305f\u306e\u3067\u3001\u6b21\u306f\u30ed\u30b0\u30a4\u30f3\u6a5f\u80fd\u3002\u3068\u3044\u3063\u3066\u3082KiiVolleyAPI#loginAsUser()\u3092\u547c\u3076\u3060\u3051\u3002\n@OnClick(R.id.button_login)\nvoid loginClicked(View v) {\n    String username = mUsernameEdit.getText().toString();\n    String password = mPasswordEdit.getText().toString();\n\n    mKiiAPI.loginAsUser(username, password, new AppAPI.LoginCallback<KiiUser>() {\n        @Override\n        public void onSuccess(String token, KiiUser kiiUser) {\n            Toast.makeText(getActivity(), R.string.login_done, Toast.LENGTH_SHORT).show();\n            // \u30e1\u30a4\u30f3\u753b\u9762\u306b\u9077\u79fb\n            // \u30ed\u30b0\u30a4\u30f3\u6642\u306b\u53d6\u5f97\u3067\u304d\u308b\u30c8\u30fc\u30af\u30f3\u3092\u6e21\u3059\n            FragmentUtils.toNextFragment(getFragmentManager(), R.id.container, MainFragment.newInstance(token), false);\n        }\n\n        @Override\n        public void onError(Exception e) {\n            Toast.makeText(getActivity(), R.string.login_failed, Toast.LENGTH_SHORT).show();\n        }\n    });\n}\n\n\n\u81ea\u52d5\u30ed\u30b0\u30a4\u30f3\u3082\u3084\u308a\u305f\u3044\n\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3055\u3048\u3042\u308c\u3070\u30ed\u30b0\u30a4\u30f3\u6e08\u307f\u306b\u306a\u308c\u308b\u306e\u3067\u3001\u30ed\u30b0\u30a4\u30f3\u5f8c\u306btoken\u3092SharedPreference\u306b\u4fdd\u5b58\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u81ea\u52d5\u30ed\u30b0\u30a4\u30f3\u3092\u5b9f\u73fe\u3059\u308b\u3002\nmKiiAPI.loginAsUser(username, password, new AppAPI.LoginCallback<KiiUser>() {\n    @Override\n    public void onSuccess(String token, KiiUser kiiUser) {\n        Toast.makeText(getActivity(), R.string.login_done, Toast.LENGTH_SHORT).show();\n\n        // Save access token\n        SharedPreferences pref = getActivity().getSharedPreferences(Constants.PREF_NAME, Context.MODE_PRIVATE);\n        pref.edit().putString(Constants.PREF_KEY_TOKEN, token).apply();\n\n        FragmentUtils.toNextFragment(getFragmentManager(), R.id.container, MainFragment.newInstance(token), false);\n    }\n\n    @Override\n    public void onError(Exception e) {\n        Toast.makeText(getActivity(), R.string.login_failed, Toast.LENGTH_SHORT).show();\n    }\n});\n\nMainActivity\u306e\u5148\u982d\u3067\u3001token\u304c\u4fdd\u5b58\u6e08\u307f\u304b\u30c1\u30a7\u30c3\u30af\u3002\n// login check\nSharedPreferences pref = getSharedPreferences(Constants.PREF_NAME, Context.MODE_PRIVATE);\nString token = pref.getString(Constants.PREF_KEY_TOKEN, null);\nif (token == null) {                \n    FragmentUtils.toNextFragment(getSupportFragmentManager(), R.id.container, LoginFragment.newInstance(), false);\n} else {\n    FragmentUtils.toNextFragment(getSupportFragmentManager(), R.id.container, MainFragment.newInstance(token), false);\n}\n\n\u3053\u306e\u8a18\u4e8b\u306f\u3001[\u3072\u3068\u308aKii Cloud Advent Calendar](http://qiita.com/fkm/items/89f054916641eb14cd0d)\u306e\uff17\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n# \uff17\u65e5\u76ee\u300c\u30ed\u30b0\u30a4\u30f3\u3092\u5b9f\u88c5\u3057\u3066\u307f\u308b\u300d\n\n[\uff16\u65e5\u76ee](http://qiita.com/fkm/items/12cc5fa35bd0765d0e21)\u3067\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u6a5f\u80fd\u304c\u5b9f\u88c5\u3067\u304d\u305f\u306e\u3067\u3001\u6b21\u306f\u30ed\u30b0\u30a4\u30f3\u6a5f\u80fd\u3002\u3068\u3044\u3063\u3066\u3082KiiVolleyAPI#loginAsUser()\u3092\u547c\u3076\u3060\u3051\u3002\n\n```\n@OnClick(R.id.button_login)\nvoid loginClicked(View v) {\n    String username = mUsernameEdit.getText().toString();\n    String password = mPasswordEdit.getText().toString();\n\n    mKiiAPI.loginAsUser(username, password, new AppAPI.LoginCallback<KiiUser>() {\n        @Override\n        public void onSuccess(String token, KiiUser kiiUser) {\n            Toast.makeText(getActivity(), R.string.login_done, Toast.LENGTH_SHORT).show();\n            // \u30e1\u30a4\u30f3\u753b\u9762\u306b\u9077\u79fb\n            // \u30ed\u30b0\u30a4\u30f3\u6642\u306b\u53d6\u5f97\u3067\u304d\u308b\u30c8\u30fc\u30af\u30f3\u3092\u6e21\u3059\n            FragmentUtils.toNextFragment(getFragmentManager(), R.id.container, MainFragment.newInstance(token), false);\n        }\n\n        @Override\n        public void onError(Exception e) {\n            Toast.makeText(getActivity(), R.string.login_failed, Toast.LENGTH_SHORT).show();\n        }\n    });\n}\n```\n\n## \u81ea\u52d5\u30ed\u30b0\u30a4\u30f3\u3082\u3084\u308a\u305f\u3044\n\n\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3055\u3048\u3042\u308c\u3070\u30ed\u30b0\u30a4\u30f3\u6e08\u307f\u306b\u306a\u308c\u308b\u306e\u3067\u3001\u30ed\u30b0\u30a4\u30f3\u5f8c\u306btoken\u3092SharedPreference\u306b\u4fdd\u5b58\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u81ea\u52d5\u30ed\u30b0\u30a4\u30f3\u3092\u5b9f\u73fe\u3059\u308b\u3002\n\n```\nmKiiAPI.loginAsUser(username, password, new AppAPI.LoginCallback<KiiUser>() {\n    @Override\n    public void onSuccess(String token, KiiUser kiiUser) {\n        Toast.makeText(getActivity(), R.string.login_done, Toast.LENGTH_SHORT).show();\n\n        // Save access token\n        SharedPreferences pref = getActivity().getSharedPreferences(Constants.PREF_NAME, Context.MODE_PRIVATE);\n        pref.edit().putString(Constants.PREF_KEY_TOKEN, token).apply();\n\n        FragmentUtils.toNextFragment(getFragmentManager(), R.id.container, MainFragment.newInstance(token), false);\n    }\n\n    @Override\n    public void onError(Exception e) {\n        Toast.makeText(getActivity(), R.string.login_failed, Toast.LENGTH_SHORT).show();\n    }\n});\n```\n\nMainActivity\u306e\u5148\u982d\u3067\u3001token\u304c\u4fdd\u5b58\u6e08\u307f\u304b\u30c1\u30a7\u30c3\u30af\u3002\n\n```\n// login check\nSharedPreferences pref = getSharedPreferences(Constants.PREF_NAME, Context.MODE_PRIVATE);\nString token = pref.getString(Constants.PREF_KEY_TOKEN, null);\nif (token == null) {                \n    FragmentUtils.toNextFragment(getSupportFragmentManager(), R.id.container, LoginFragment.newInstance(), false);\n} else {\n    FragmentUtils.toNextFragment(getSupportFragmentManager(), R.id.container, MainFragment.newInstance(token), false);\n}\n```\n\n"}