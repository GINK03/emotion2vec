{"context": " More than 1 year has passed since last update.\u547c\u3073\u51fa\u3057\u5143\n\ntest.tpl\n{ssi file=\"../design/ssi/head.html\" ssi_enc=\"SJIS\"}\n\n\nsmarty function\n\nfunction.ssi.php\n<?php\n\n/**\n * ssi\n */\nfunction smarty_function_ssi($params, &$smarty)\n{\n\n    if (empty($params['file'])) return '';\n    if (empty($params['ssi_enc'])) return '';\n    if (!file_exists($params['file'])) return '<!-- no file -->';\n\n    $ssi = file_get_contents($params['file']);\n    if (false === $ssi) return '';\n\n    /*\n    echo \"<!--\", PHP_EOL;\n    echo \"******************************\", PHP_EOL;\n    echo $ssi, PHP_EOL;\n    echo \"******************************\", PHP_EOL;\n    echo \"-->\", PHP_EOL;\n    */\n\n    $ret = mb_convert_encoding($ssi, mb_internal_encoding(), $params['ssi_enc']);\n\n    /*\n    echo \"<!--\", PHP_EOL;\n    echo \"******************************\", PHP_EOL;\n    echo $ret, PHP_EOL;\n    echo \"******************************\", PHP_EOL;\n    echo \"-->\", PHP_EOL;\n    */\n\n    return $ret;\n}\n\n\n\u547c\u3073\u51fa\u3057\u5143\n\n```lan:test.tpl\n{ssi file=\"../design/ssi/head.html\" ssi_enc=\"SJIS\"}\n```\n\nsmarty function\n\n```lang:function.ssi.php\n<?php\n\n/**\n * ssi\n */\nfunction smarty_function_ssi($params, &$smarty)\n{\n\n    if (empty($params['file'])) return '';\n    if (empty($params['ssi_enc'])) return '';\n    if (!file_exists($params['file'])) return '<!-- no file -->';\n\n    $ssi = file_get_contents($params['file']);\n    if (false === $ssi) return '';\n\n    /*\n    echo \"<!--\", PHP_EOL;\n    echo \"******************************\", PHP_EOL;\n    echo $ssi, PHP_EOL;\n    echo \"******************************\", PHP_EOL;\n    echo \"-->\", PHP_EOL;\n    */\n\n    $ret = mb_convert_encoding($ssi, mb_internal_encoding(), $params['ssi_enc']);\n\n    /*\n    echo \"<!--\", PHP_EOL;\n    echo \"******************************\", PHP_EOL;\n    echo $ret, PHP_EOL;\n    echo \"******************************\", PHP_EOL;\n    echo \"-->\", PHP_EOL;\n    */\n\n    return $ret;\n}\n```\n", "tags": ["PHP", "Smarty"]}