{"context": " More than 1 year has passed since last update.\n\n\u304d\u3063\u304b\u3051\n\u5bb6\u306b\u8a2d\u7f6e\u3057\u305fRTX1200\u3067L2TP/IPsec\u63a5\u7d9a\u6642\u306e\u30ed\u30b0\u3092\u898b\u3066\u3044\u305f\u3089\u3001PP[ANONYMOUS01] PPP/IPV6CP up\u3068\u3044\u3046\u30ed\u30b0\u3092\u898b\u305f\u2026\u6c17\u304c\u3059\u308b\u3002\u3053\u308c\u306f\u3001\u3061\u3083\u3093\u3068\u8a2d\u5b9a\u3059\u308c\u3070\u3001\u5bb6\u306b\u30c7\u30e5\u30a2\u30eb\u30b9\u30bf\u30c3\u30af\u3067\u30c8\u30f3\u30cd\u30eb\u884c\u3051\u308b\u306e\u3067\u306f\u2026?\n\n\u8a2d\u5b9a\n\nRTX1200\u5074\n\nL2TP/IPsec\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\u3053\u308c\u306frtpro\u4ed6\u3001\u5404\u7a2e\u8a18\u4e8b\u53c2\u7167\u306e\u3053\u3068\u3002\n\npp anonymous\u306bIPv6\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\u3002\u8ffd\u52a0\u5dee\u5206\u306f\u3053\u308c\u3060\u3051\u3002\n\nipv6 prefix 4 dhcp-prefix@pp2:2::/64\npp select anonymous\n ppp ipv6cp use on\n ipv6 pp address dhcp-prefix@pp2:2::1/64\n ipv6 pp rtadv send 4 o_flag=on\n ipv6 pp mtu 1280\n ipv6 pp dhcp service server\n ipv6 pp tcp mss limit auto\n\n\u6211\u304c\u5bb6\u306fPPPoE\u3067/48\u306a\u306e\u3067\u3001\u30c8\u30f3\u30cd\u30eb\u5c02\u7528\u306eprefix\u3068\u3057\u3066\u3001pp2\u306eprefix\u306b2::\u3092\u8db3\u3057\u3066\u3044\u308b\u3002MTU\u306f\u9069\u5f53\u3002\n\nOSX\u5074\nOSX\u306eppp\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067RA\u306b\u3088\u308b\u30a2\u30c9\u30ec\u30b9\u81ea\u52d5\u8a2d\u5b9a\u304c\u52d5\u4f5c\u3057\u306a\u3044\u3002\u305d\u3053\u3067\u3001ppp0\u304cup/down\u3057\u305f\u6642\u306b\u3001ipconfig\u30b3\u30de\u30f3\u30c9(ifconfig\u3067\u306f\u306a\u3044)\u3067\u81ea\u52d5\u8a2d\u5b9a\u304c\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n/etc/ppp/ipv6-up\n#!/bin/sh\n/usr/sbin/ipconfig set $1 AUTOMATIC-V6\n/sbin/route add -inet6 default -interface $1\n\n\n\n/etc/ppp/ipv6-down\n#!/bin/sh\n/sbin/route delete -inet6 default -interface $1\n/usr/sbin/ipconfig set $1 NONE-V6\n\n\nsudo chmod +x /etc/ppp/ipv6-*\u3092\u5fd8\u308c\u305a\u306b\u3002\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5f15\u6570\u306fPPPD(8)\u53c2\u7167\u306e\u3053\u3068\u3002$1\u306f\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u540d(ppp0\u7b49)\u3002\n\n\u3061\u306a\u307f\u306bWindows10\nWindows\u306fL2TP/IPsec\u3082RA\u3067\u8a2d\u5b9a\u3055\u308c\u308b\u6a21\u69d8\u3067\u3001\u8ffd\u52a0\u8a2d\u5b9a\u7121\u3057\u3067IPv6\u63a5\u7d9a\u53ef\u80fd\u3068\u306a\u3063\u305f\u3002\u305f\u3060\u3001\u305d\u3082\u305d\u3082NAT Traversal\u304c\u6709\u52b9\u3067\u306a\u3044\u305f\u3081\u3001LTE\u306eCGN\u304c\u901a\u3089\u306a\u304b\u3063\u305f\u3002\u3053\u3061\u3089\u306e\u65b9\u6cd5\u3067\u30ec\u30b8\u30b9\u30c8\u30ea\u5909\u66f4\u3067\u5bfe\u51e6\u3002\n\n\u78ba\u8a8d\n$ ifconfig ppp0\nppp0: flags=8051<UP,POINTOPOINT,RUNNING,MULTICAST> mtu 1280\n    inet6 fe80::yyyy:yyff:feyy:yyyy%ppp0 prefixlen 64 scopeid 0xa\n    inet 192.168.101.100 --> 192.168.100.1 netmask 0xffffff00\n    inet6 2001:xxx:xxxx:2:yyyy:yyff:feyy:yyyy prefixlen 64 autoconf\n    inet6 2001:xxx:xxxx:2:zzzz:zzzz:zzzz:zzzz prefixlen 64 autoconf temporary\n$ sudo ipconfig getv6packet ppp0\nDHCPv6 REPLY (7) Transaction ID 0x0e75e1 Length 56\nOptions[3] = {\n  SERVERID (2) Length 10 DUID LL HW 1 Addr yy:yy:yy:yy:yy:yy\n  CLIENTID (1) Length 14 DUID LLT HW 1 Time 505569110 Addr zz:zz:zz:zz:zz:zz\n  DNS_SERVERS (23) Length 16 2001:xxx:xxxx:2::1\n}\n\n\u308f\u30fc\u3044\u3002\n\n\u8ab2\u984c\nDNS\u304c\u5909\u304b\u3082? \u30d6\u30e9\u30a6\u30b6\u3067AAAA\u304c\u5f15\u304b\u308c\u306a\u3044?\nEl Capitan\u3067Happy Eyeballs\u304c\u5909\u66f4\u306b\u306a\u3063\u305f\u3068\u306e\u8a71\u3060\u304c\u3001\u3053\u306e\u65b9\u6cd5\u3060\u3068AAAA\u3092\u5f15\u3053\u3046\u3068\u3057\u306a\u3044\u2026\u306e\u304b?\n# \u304d\u3063\u304b\u3051\n\u5bb6\u306b\u8a2d\u7f6e\u3057\u305fRTX1200\u3067L2TP/IPsec\u63a5\u7d9a\u6642\u306e\u30ed\u30b0\u3092\u898b\u3066\u3044\u305f\u3089\u3001`PP[ANONYMOUS01] PPP/IPV6CP up`\u3068\u3044\u3046\u30ed\u30b0\u3092\u898b\u305f\u2026\u6c17\u304c\u3059\u308b\u3002\u3053\u308c\u306f\u3001\u3061\u3083\u3093\u3068\u8a2d\u5b9a\u3059\u308c\u3070\u3001\u5bb6\u306b\u30c7\u30e5\u30a2\u30eb\u30b9\u30bf\u30c3\u30af\u3067\u30c8\u30f3\u30cd\u30eb\u884c\u3051\u308b\u306e\u3067\u306f\u2026?\n\n# \u8a2d\u5b9a\n## RTX1200\u5074\n1. L2TP/IPsec\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\u3053\u308c\u306frtpro\u4ed6\u3001\u5404\u7a2e\u8a18\u4e8b\u53c2\u7167\u306e\u3053\u3068\u3002\n2. `pp anonymous`\u306bIPv6\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\u3002\u8ffd\u52a0\u5dee\u5206\u306f\u3053\u308c\u3060\u3051\u3002\n\n```\nipv6 prefix 4 dhcp-prefix@pp2:2::/64\npp select anonymous\n ppp ipv6cp use on\n ipv6 pp address dhcp-prefix@pp2:2::1/64\n ipv6 pp rtadv send 4 o_flag=on\n ipv6 pp mtu 1280\n ipv6 pp dhcp service server\n ipv6 pp tcp mss limit auto\n```\n\n\u6211\u304c\u5bb6\u306fPPPoE\u3067/48\u306a\u306e\u3067\u3001\u30c8\u30f3\u30cd\u30eb\u5c02\u7528\u306eprefix\u3068\u3057\u3066\u3001pp2\u306eprefix\u306b2::\u3092\u8db3\u3057\u3066\u3044\u308b\u3002MTU\u306f\u9069\u5f53\u3002\n\n## OSX\u5074\nOSX\u306eppp\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067RA\u306b\u3088\u308b\u30a2\u30c9\u30ec\u30b9\u81ea\u52d5\u8a2d\u5b9a\u304c\u52d5\u4f5c\u3057\u306a\u3044\u3002\u305d\u3053\u3067\u3001ppp0\u304cup/down\u3057\u305f\u6642\u306b\u3001`ipconfig`\u30b3\u30de\u30f3\u30c9(`ifconfig`\u3067\u306f\u306a\u3044)\u3067\u81ea\u52d5\u8a2d\u5b9a\u304c\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n```shell-session:/etc/ppp/ipv6-up\n#!/bin/sh\n/usr/sbin/ipconfig set $1 AUTOMATIC-V6\n/sbin/route add -inet6 default -interface $1\n```\n\n```shell-session:/etc/ppp/ipv6-down\n#!/bin/sh\n/sbin/route delete -inet6 default -interface $1\n/usr/sbin/ipconfig set $1 NONE-V6\n```\n\n`sudo chmod +x /etc/ppp/ipv6-*`\u3092\u5fd8\u308c\u305a\u306b\u3002\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5f15\u6570\u306f`PPPD(8)`\u53c2\u7167\u306e\u3053\u3068\u3002$1\u306f\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u540d(ppp0\u7b49)\u3002\n\n## \u3061\u306a\u307f\u306bWindows10\nWindows\u306fL2TP/IPsec\u3082RA\u3067\u8a2d\u5b9a\u3055\u308c\u308b\u6a21\u69d8\u3067\u3001\u8ffd\u52a0\u8a2d\u5b9a\u7121\u3057\u3067IPv6\u63a5\u7d9a\u53ef\u80fd\u3068\u306a\u3063\u305f\u3002\u305f\u3060\u3001\u305d\u3082\u305d\u3082NAT Traversal\u304c\u6709\u52b9\u3067\u306a\u3044\u305f\u3081\u3001LTE\u306eCGN\u304c\u901a\u3089\u306a\u304b\u3063\u305f\u3002[\u3053\u3061\u3089](https://support.microsoft.com/ja-jp/kb/926179)\u306e\u65b9\u6cd5\u3067\u30ec\u30b8\u30b9\u30c8\u30ea\u5909\u66f4\u3067\u5bfe\u51e6\u3002\n\n# \u78ba\u8a8d\n```shell-session\n$ ifconfig ppp0\nppp0: flags=8051<UP,POINTOPOINT,RUNNING,MULTICAST> mtu 1280\n\tinet6 fe80::yyyy:yyff:feyy:yyyy%ppp0 prefixlen 64 scopeid 0xa\n\tinet 192.168.101.100 --> 192.168.100.1 netmask 0xffffff00\n\tinet6 2001:xxx:xxxx:2:yyyy:yyff:feyy:yyyy prefixlen 64 autoconf\n\tinet6 2001:xxx:xxxx:2:zzzz:zzzz:zzzz:zzzz prefixlen 64 autoconf temporary\n$ sudo ipconfig getv6packet ppp0\nDHCPv6 REPLY (7) Transaction ID 0x0e75e1 Length 56\nOptions[3] = {\n  SERVERID (2) Length 10 DUID LL HW 1 Addr yy:yy:yy:yy:yy:yy\n  CLIENTID (1) Length 14 DUID LLT HW 1 Time 505569110 Addr zz:zz:zz:zz:zz:zz\n  DNS_SERVERS (23) Length 16 2001:xxx:xxxx:2::1\n}\n```\n\n\u308f\u30fc\u3044\u3002\n\n# \u8ab2\u984c\nDNS\u304c\u5909\u304b\u3082? \u30d6\u30e9\u30a6\u30b6\u3067AAAA\u304c\u5f15\u304b\u308c\u306a\u3044?\nEl Capitan\u3067Happy Eyeballs\u304c\u5909\u66f4\u306b\u306a\u3063\u305f\u3068\u306e\u8a71\u3060\u304c\u3001\u3053\u306e\u65b9\u6cd5\u3060\u3068AAAA\u3092\u5f15\u3053\u3046\u3068\u3057\u306a\u3044\u2026\u306e\u304b?\n", "tags": ["yamaha", "IPv6", "OSX"]}