{"context": "\u3053\u306e\u8a18\u4e8b\u306f Akatsuki Advent Calendar 2016 \u306e 2 \u65e5\u76ee\u3001\u304a\u3088\u3073 Vim Advent Calendar 2016 (\u305d\u306e2) \u306e 2 \u65e5\u76ee\u3001\u304a\u3088\u3073 Docker2 Advent Calendar 2016 \u306e 2 \u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\nDockerfile \u66f8\u3044\u3066\u307e\u3059\u304b? \u79c1\u306f\u3044\u3064\u3082 Vim \u3067\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\n\u3055\u3066\u3001Dockerfile \u306e INSTRUCTION\u3001\u3044\u308f\u3086\u308b FROM \u3068\u304b RUN \u3068\u304b\u306e\u30a2\u30ec\u3067\u3059\u304c\u3001\u5927\u6587\u5b57\u5c0f\u6587\u5b57\u306f\u533a\u5225\u3057\u306a\u3044\u3068\u3057\u3064\u3064\u3082\u3001\u5927\u6587\u5b57\u3067\u66f8\u304f\u3053\u3068\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nhttps://docs.docker.com/engine/reference/builder/#/format\n\nThe instruction is not case-sensitive. However, convention is for them to be UPPERCASE to distinguish them from arguments more easily.\n\n\u3057\u304b\u3057\u3001\u6bce\u56de\u5927\u6587\u5b57\u3067\u5165\u529b\u3059\u308b\u306e\u306f\u9762\u5012\u3067\u3059\u306d\u3002\u3068\u3044\u3046\u308f\u3051\u3067\u81ea\u52d5\u3067\u5927\u6587\u5b57\u306b\u306a\u308b\u3088\u3046\u306a\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n\n\u81ea\u52d5\u3067\u5927\u6587\u5b57\u306b\u3059\u308b\u8a2d\u5b9a\n\u6700\u65b0\u306e Vim (\u5c11\u306a\u304f\u3068\u3082 Vim 8.0 \u4ee5\u964d) \u3067\u306f\u3001Dockerfile \u306f\u81ea\u52d5\u3067 filetype dockefile \u3068\u3057\u3066\u8a8d\u8b58\u3055\u308c\u307e\u3059\u3002\u305d\u3053\u3067\u3001dockerfile \u5411\u3051\u306e ftplugin \u306e\u8a2d\u5b9a\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u3001Vim \u306e runtimepath \u4ee5\u4e0b\u306b\u7f6e\u304d\u307e\u3059\u3002Windows \u306e\u5834\u5408\u306f ~/vimfiles/ftplugin/dockerfile.vim\u3001\u305d\u308c\u4ee5\u5916\u306e\u74b0\u5883\u306e\u5834\u5408\u306f ~/.vim/ftplugin/dockerfile.vim \u3067\u3059\u3002\n\nftplugin/dockerfile.vim\nfunction! s:head(str)\n  let col = col('.')\n  let head = matchstr(getline('.'), '\\c^\\s*\\%(ONBUILD\\s\\+\\)\\?')\n  let col -= len(head)\n  if col - 2 < len(a:str)\n    return toupper(a:str)\n  endif\n  return a:str\nendfunction\n\nfor s:instruction in [\n\\   'from',\n\\   'maintainer',\n\\   'run',\n\\   'cmd',\n\\   'label',\n\\   'expose',\n\\   'env',\n\\   'add',\n\\   'copy',\n\\   'entrypoint',\n\\   'volume',\n\\   'user',\n\\   'workdir',\n\\   'arg',\n\\   'onbuild',\n\\   'stopsignal',\n\\   'healthcheck',\n\\   'shell',\n\\ ]\n  execute 'inoreabbrev <buffer> <expr>'\n  \\ s:instruction\n  \\ printf('<SID>head(%s)', string(s:instruction))\nendfor\n\n\nVim \u306b\u306f\u77ed\u7e2e\u5165\u529b(:help abbreviations)\u3068\u3044\u3046\u6a5f\u80fd\u304c\u3042\u308a\u3001\u4e00\u5b9a\u306e\u30eb\u30fc\u30eb\u5185\u3067\u5165\u529b\u3092\u77ef\u6b63\u3059\u308b\u8a2d\u5b9a\u3092\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3053\u306e\u8a2d\u5b9a\u3067\u306f\u3001\u5404\u884c\u306e\u884c\u982d\u3067\u5165\u529b\u3057\u305f\u3082\u306e\u304c\u5c0f\u6587\u5b57\u306e INSTRUCTION \u3060\u3063\u305f\u5834\u5408\u306b\u3001\u305d\u308c\u3092\u81ea\u52d5\u3067\u5927\u6587\u5b57\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u3064\u3044\u3067\u306b ONBUILD \u306e\u5f8c\u306e INSTRUCTION \u306b\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\n\nHappy Vim and Docker Life!\n\u3053\u306e\u8a18\u4e8b\u306f [Akatsuki Advent Calendar 2016](http://qiita.com/advent-calendar/2016/aktsk) \u306e 2 \u65e5\u76ee\u3001\u304a\u3088\u3073 [Vim Advent Calendar 2016 (\u305d\u306e2)](http://qiita.com/advent-calendar/2016/vim2) \u306e 2 \u65e5\u76ee\u3001\u304a\u3088\u3073 [Docker2 Advent Calendar 2016](http://qiita.com/advent-calendar/2016/docker2) \u306e 2 \u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\nDockerfile \u66f8\u3044\u3066\u307e\u3059\u304b? \u79c1\u306f\u3044\u3064\u3082 Vim \u3067\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\n\n\u3055\u3066\u3001Dockerfile \u306e INSTRUCTION\u3001\u3044\u308f\u3086\u308b `FROM` \u3068\u304b `RUN` \u3068\u304b\u306e\u30a2\u30ec\u3067\u3059\u304c\u3001\u5927\u6587\u5b57\u5c0f\u6587\u5b57\u306f\u533a\u5225\u3057\u306a\u3044\u3068\u3057\u3064\u3064\u3082\u3001\u5927\u6587\u5b57\u3067\u66f8\u304f\u3053\u3068\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\nhttps://docs.docker.com/engine/reference/builder/#/format\n\n> The instruction is not case-sensitive. However, convention is for them to be UPPERCASE to distinguish them from arguments more easily.\n\n\u3057\u304b\u3057\u3001\u6bce\u56de\u5927\u6587\u5b57\u3067\u5165\u529b\u3059\u308b\u306e\u306f\u9762\u5012\u3067\u3059\u306d\u3002\u3068\u3044\u3046\u308f\u3051\u3067\u81ea\u52d5\u3067\u5927\u6587\u5b57\u306b\u306a\u308b\u3088\u3046\u306a\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n\n## \u81ea\u52d5\u3067\u5927\u6587\u5b57\u306b\u3059\u308b\u8a2d\u5b9a\n\n\u6700\u65b0\u306e Vim (\u5c11\u306a\u304f\u3068\u3082 Vim 8.0 \u4ee5\u964d) \u3067\u306f\u3001`Dockerfile` \u306f\u81ea\u52d5\u3067 filetype dockefile \u3068\u3057\u3066\u8a8d\u8b58\u3055\u308c\u307e\u3059\u3002\u305d\u3053\u3067\u3001dockerfile \u5411\u3051\u306e ftplugin \u306e\u8a2d\u5b9a\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\n\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u3001Vim \u306e runtimepath \u4ee5\u4e0b\u306b\u7f6e\u304d\u307e\u3059\u3002Windows \u306e\u5834\u5408\u306f `~/vimfiles/ftplugin/dockerfile.vim`\u3001\u305d\u308c\u4ee5\u5916\u306e\u74b0\u5883\u306e\u5834\u5408\u306f `~/.vim/ftplugin/dockerfile.vim` \u3067\u3059\u3002\n\n```vim:ftplugin/dockerfile.vim\nfunction! s:head(str)\n  let col = col('.')\n  let head = matchstr(getline('.'), '\\c^\\s*\\%(ONBUILD\\s\\+\\)\\?')\n  let col -= len(head)\n  if col - 2 < len(a:str)\n    return toupper(a:str)\n  endif\n  return a:str\nendfunction\n\nfor s:instruction in [\n\\   'from',\n\\   'maintainer',\n\\   'run',\n\\   'cmd',\n\\   'label',\n\\   'expose',\n\\   'env',\n\\   'add',\n\\   'copy',\n\\   'entrypoint',\n\\   'volume',\n\\   'user',\n\\   'workdir',\n\\   'arg',\n\\   'onbuild',\n\\   'stopsignal',\n\\   'healthcheck',\n\\   'shell',\n\\ ]\n  execute 'inoreabbrev <buffer> <expr>'\n  \\ s:instruction\n  \\ printf('<SID>head(%s)', string(s:instruction))\nendfor\n```\n\nVim \u306b\u306f\u77ed\u7e2e\u5165\u529b([:help abbreviations](http://vim-jp.org/vimdoc-ja/map.html#abbreviations))\u3068\u3044\u3046\u6a5f\u80fd\u304c\u3042\u308a\u3001\u4e00\u5b9a\u306e\u30eb\u30fc\u30eb\u5185\u3067\u5165\u529b\u3092\u77ef\u6b63\u3059\u308b\u8a2d\u5b9a\u3092\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3053\u306e\u8a2d\u5b9a\u3067\u306f\u3001\u5404\u884c\u306e\u884c\u982d\u3067\u5165\u529b\u3057\u305f\u3082\u306e\u304c\u5c0f\u6587\u5b57\u306e INSTRUCTION \u3060\u3063\u305f\u5834\u5408\u306b\u3001\u305d\u308c\u3092\u81ea\u52d5\u3067\u5927\u6587\u5b57\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u3064\u3044\u3067\u306b `ONBUILD` \u306e\u5f8c\u306e INSTRUCTION \u306b\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\n\n![dockerfile.gif](https://qiita-image-store.s3.amazonaws.com/0/551/71ba6cc5-4b03-56db-c2f4-38f601040104.gif)\n\nHappy Vim and Docker Life!\n", "tags": ["Vim", "docker", "dockerfile"]}