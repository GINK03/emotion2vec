{"context": " More than 1 year has passed since last update.Flux\u306fReact Native\u306b\u9650\u3063\u305f\u8a71\u3067\u306f\u306a\u304fReact\u3067\u4f7f\u308f\u308c\u308b\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3067\u3059\u304c\u3001React Native\u306e\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u306e\u306b\u3082\u4f7f\u3044\u307e\u3059\u30022015\u5e7412\u6708\u6642\u70b9\u3067\u6700\u6709\u529b\u306eFlux\u7cfb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306fRedux\u3067\u3059\u304c\u3001\u4eca\u56de\u306fFacebook\u306e\u5b9f\u88c5\u3067\u3042\u308bfacebook/flux\u3092\u8aac\u660e\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002(Redux\u306f\u5f8c\u307b\u3069\uff09\n\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u30021\u65b9\u5411\u306b\u30c7\u30fc\u30bf\u304c\u6d41\u308c\u3066\u304f\u304c\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u3002\u3053\u308c\u306fReact\u306e\u54f2\u5b66\u306b\u3082\u4e00\u81f4\u3057\u307e\u3059\u3002\n\nFlux\u306b\u306f\u4e0b\u8a18\u306e\u5f79\u5272\u304c\u3042\u308a\u3001\u305d\u308c\u305e\u308c\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\nDispatcher\nAction\nStore\n(Constant Action-Store\u9593\u3067\u4f7f\u3046\u5408\u8a00\u8449\u3092\u53ce\u7d0d\uff09\n\n\nInstall\nfacebook/flux\u3067\u4f7f\u308f\u308c\u3066\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002React Native\u3067\u3082\u554f\u984c\u306a\u304f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\n$ npm install flux --save\n$ npm install events --save\n$ npm install keymirror --save\n$ npm install object-assign --save \n\n\nDirectory structure\nExample\u3068\u540c\u3058Todo\u30a2\u30d7\u30ea\u3092React Native\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u540c\u3058\u3088\u3046\u306b\u4f5c\u308c\u307e\u3059\u3002\nindex.ios.js\napp/\n\u251c\u2500\u2500 actions\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 TodoActions.js\n\u251c\u2500\u2500 app.js\n\u251c\u2500\u2500 components\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Footer.js\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Header.js\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 MainSection.js\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 TodoApp.js\n\u251c\u2500\u2500 constants\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 TodoConstants.js\n\u251c\u2500\u2500 dispatcher\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 Dispatcher.js\n\u2514\u2500\u2500 stores\n    \u2514\u2500\u2500 TodoStore.js\n\n\n\u30b3\u30fc\u30c9\u306e\u89e3\u8aac\n\nindex.ios.js\u3067Register\n// index.ios.js\n'use strict';\n\nimport React, { AppRegistry } from 'react-native';\nimport App from './app/app';\n\nvar ReactNativeAdvent2015 = React.createClass({\n  render() {\n    return (\n      <App />\n    );\n  }\n});\n\nAppRegistry.registerComponent('ReactNativeAdvent2015', () => ReactNativeAdvent2015);\n\napp.js\u306f\u30c8\u30c3\u30d7\u3067\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u547c\u3073\u307e\u3059\u3002\u3053\u306e\u30c8\u30c3\u30d7\u306e\u4f7f\u3044\u9053\u306flogin\u3057\u3066\u308b\u3001\u3057\u3066\u306a\u3044\u306a\u3069\u306e\u5207\u308a\u5206\u3051\u3092\u3053\u3053\u306b\u8a18\u8ff0\u3057\u305f\u308a\u3067\u304d\u307e\u3059\u3002\n// app/app.js\nimport React from 'react-native';\nimport TodoApp from './components/TodoApp';\n\nvar App  = React.createClass({\n  render() {\n    return (\n      <TodoApp />\n    );\n  }\n});\n\nexport default App;\n\nTodo\u30a2\u30d7\u30ea\u3067\u306f\u30e1\u30a4\u30f3\u753b\u9762\u3067\u3059\u3002TodoStore\u3092\u7528\u3044\u3066\u30a4\u30d9\u30f3\u30c8\u3092\u8ffd\u52a0\u3057\u3001TodoStore\u3078\u306eGetter\u3092\u6301\u3063\u3066\u307e\u3059\u3002\uff11\u65b9\u5411\u306a\u306e\u3067TodoStore\u3078\u306eSetter\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n// compoents/TodoApp.js\nimport React, { StyleSheet, Text, View} from 'react-native';\nimport Header from './Header';\nimport Footer from './Footer';\nimport MainSection from './MainSection';\nimport TodoStore from '../stores/TodoStore';\n\n\nvar TodoApp  = React.createClass({\n\n  getInitialState: function() {\n    return {\n      allTodos: TodoStore.getAll(),\n      areAllComplete: TodoStore.areAllComplete()\n    }\n  },\n\n  componentDidMount: function() {\n     TodoStore.addChangeListener(this._onChange);\n   },\n\n   componentWillUnmount: function() {\n     TodoStore.removeChangeListener(this._onChange);\n   },\n\n  render(){\n    return(\n      <View style={styles.container}>\n        <Header/>\n        <MainSection\n          allTodos={this.state.allTodos}\n          areAllComplete={this.state.areAllComplete}\n        />\n        <Footer/>\n      </View>\n    )\n  },\n\n  _onChange: function() {\n    this.setState({\n      allTodos: TodoStore.getAll(),\n      areAllComplete: TodoStore.areAllComplete()\n    });\n  }\n});\n\nHeader\u3067input\u3092\u53d7\u3051\u5165\u308c\u307e\u3059\u3002\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\u3089Actions.create\u3067\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n// components/Header.js\n\nimport React, {View, Text, TextInput} from 'react-native';\nimport Button from 'react-native-button';\nimport TodoActions from '../actions/TodoActions';\n\n\nvar Header  = React.createClass({\n\n  getInitialState(){\n    return {\n      text: \"\"\n    }\n  },\n  _handlePress(){\n    TodoActions.create(this.state.text);\n    this.setState({text: \"\"});\n  },\n\n  render(){\n    return(\n      <View style={{flexDirection: 'row'}}>\n      <TextInput\n        style={{width:100, height: 25, borderColor: 'gray', borderWidth: 1}}\n        onChangeText={(text) => this.setState({text})}\n        value={this.state.text}\n      />\n      <Button onPress={this._handlePress}>Add</Button>\n      </View>\n    )\n  }\n});\n\nexport default Header;\n\n\u57fa\u672c\u7684\u306bAction/Store/Dispatcher\u306ffacebook/flux\u306eexample\u305d\u306e\u307e\u307e\u3067\u3059\u3002\u8a72\u5f53\u7b87\u6240\u3060\u3051\u898b\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002Action\u3067\u306fType\u3068Text\u3092\u6307\u5b9a\u3057\u3066\u3001dispatcher\u306b\u6e21\u3057\u307e\u3059\u3002\n// TodoAction\u629c\u7c8b\nvar AppDispatcher = require('../dispatcher/Dispatcher');\nvar TodoConstants = require('../constants/TodoConstants');\n\nvar TodoActions = {\n\n  create: function(text) {\n    AppDispatcher.dispatch({\n      actionType: TodoConstants.TODO_CREATE,\n      text: text\n    });\n  },\n\n\u5b9f\u306fDispatcher\u306f\uff12\u884c\u3067\u304a\u307e\u3058\u306a\u3044\u3067\u3059\u3002Store\u3078\u6295\u3052\u308b\u305f\u3081\u306e\u9053\u5177\u3060\u3068\u601d\u3048\u3070\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n// Dispatcher.js\nvar Dispatcher = require('flux').Dispatcher;\nmodule.exports = new Dispatcher();\n\nTodoConst\u306f\u30ad\u30fc\u3060\u3051\u683c\u7d0d\u3057\u3066\u307e\u3059\u3002TODO_CREATE\u3068\u3044\u3046\u6587\u5b57\u5217\u3060\u3051\u304cStore\u3068\u306e\u5408\u8a00\u8449\u3068\u3057\u3066\u4f7f\u308f\u308c\u307e\u3059\u3002\n// TodoConstant\u629c\u7c8b\nvar keyMirror = require('keymirror');\n\nmodule.exports = keyMirror({\n  TODO_CREATE: null,\n  ...\n\n\u3057\u305f\u304c\u3063\u3066\u3001Action\u306f\u5408\u8a00\u8449\u3092\u6301\u3063\u3066\u3001Text\u3092\u6295\u3052\u3066\u308b\u30a4\u30e1\u30fc\u30b8\u306b\u306a\u308a\u307e\u3059\u3002\u305d\u3057\u3066\u3001Store\u3067\u305d\u306e\u5408\u8a00\u8449\u3092\u6301\u3063\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002\n// todoStore\u629c\u7c8b\nvar _todos = {};\n\nfunction create(text) {\n  var id = (+new Date() + Math.floor(Math.random() * 999999)).toString(36);\n  _todos[id] = {\n    id: id,\n    complete: false,\n    text: text\n  };\n}\n\nDispatcher.register(function(action) {\n  var text;\n\n  switch(action.actionType) {\n    case TodoConstants.TODO_CREATE:\n      text = action.text.trim();\n      if (text !== '') {\n        create(text);\n        TodoStore.emitChange();\n      }\n      break;\n\u3000...\n\n\u4fdd\u5b58\u5f8c\u306bTodoStore.emitChange\u3067\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u706b\u3055\u305b\u5909\u66f4\u3092Component\u306b\u901a\u77e5\u3057\u307e\u3059\u3002TodoApp.js\u306e_onChange\u304c\u901a\u77e5\u3092\u53d7\u3051\u53d6\u308a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u72b6\u614b(state)\u3092\u5909\u5316\u3055\u305b\u307e\u3059\u3002\u5909\u66f4\u304c\u76f4\u306b\u5b50\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3078\u3068props\u3092\u901a\u3058\u3066\u6e21\u308a\u3001MainSection\u306b\u5909\u5316\u304c\u4f1d\u64ad\u3057\u307e\u3059\u3002\nimport React, {View, Text} from 'react-native';\n\nvar MainSection  = React.createClass({\n  render(){\n    const {allTodos, areAllComplete} = this.props;\n    let todos = Object.keys(allTodos).map((id) => {\n       return (\n        <View>\n          <Text>{allTodos[id].text}</Text>\n        </View>\n      )\n    });\n    return(\n      <View>{todos}</View>\n    )\n  }\n});\n\n\u57fa\u672c\u7684\u306b\u3053\u306e\u3088\u3046\u306a\u6d41\u308c\u3067Flux\u306f\u30c7\u30fc\u30bf\u304c\u66f4\u65b0\u3055\u308c\u3066\u3044\u304d\u307e\u3059\u3002\u5fc5\u305a\u30011\u65b9\u5411\u304b\u3089\u30c7\u30fc\u30bf\u306e\u6d41\u308c\u3066\u304f\u308b\u305f\u3081\u3001\u30c7\u30fc\u30bf\u306e\u6d41\u308c\u304c\u306f\u3063\u304d\u308a\u3057\u3066\u898b\u901a\u3057\u306e\u826f\u3044\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u660e\u65e5\u306ffacebook/flux\u306e\u4e9c\u7a2eReflux\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nFlux\u306fReact Native\u306b\u9650\u3063\u305f\u8a71\u3067\u306f\u306a\u304fReact\u3067\u4f7f\u308f\u308c\u308b\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3067\u3059\u304c\u3001React Native\u306e\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u306e\u306b\u3082\u4f7f\u3044\u307e\u3059\u30022015\u5e7412\u6708\u6642\u70b9\u3067\u6700\u6709\u529b\u306eFlux\u7cfb\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306f[Redux](http://rackt.org/redux/index.html)\u3067\u3059\u304c\u3001\u4eca\u56de\u306fFacebook\u306e\u5b9f\u88c5\u3067\u3042\u308b[facebook/flux](https://github.com/facebook/flux)\u3092\u8aac\u660e\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002(Redux\u306f\u5f8c\u307b\u3069\uff09\n\n\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u30021\u65b9\u5411\u306b\u30c7\u30fc\u30bf\u304c\u6d41\u308c\u3066\u304f\u304c\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u3002\u3053\u308c\u306fReact\u306e\u54f2\u5b66\u306b\u3082\u4e00\u81f4\u3057\u307e\u3059\u3002\n\n\n<img width=\"1116\" alt=\"flux-diagram-white-background.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/13663/c133babd-9292-024b-9765-d2867dd1eb84.png\">\n\nFlux\u306b\u306f\u4e0b\u8a18\u306e\u5f79\u5272\u304c\u3042\u308a\u3001\u305d\u308c\u305e\u308c\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n* Dispatcher\n* Action\n* Store\n* (Constant Action-Store\u9593\u3067\u4f7f\u3046\u5408\u8a00\u8449\u3092\u53ce\u7d0d\uff09\n\n## Install\n\nfacebook/flux\u3067\u4f7f\u308f\u308c\u3066\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002React Native\u3067\u3082\u554f\u984c\u306a\u304f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\n\n```\n$ npm install flux --save\n$ npm install events --save\n$ npm install keymirror --save\n$ npm install object-assign --save \n```\n\n## Directory structure\n\nExample\u3068\u540c\u3058Todo\u30a2\u30d7\u30ea\u3092React Native\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u540c\u3058\u3088\u3046\u306b\u4f5c\u308c\u307e\u3059\u3002\n\n```\nindex.ios.js\napp/\n\u251c\u2500\u2500 actions\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 TodoActions.js\n\u251c\u2500\u2500 app.js\n\u251c\u2500\u2500 components\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Footer.js\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 Header.js\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 MainSection.js\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 TodoApp.js\n\u251c\u2500\u2500 constants\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 TodoConstants.js\n\u251c\u2500\u2500 dispatcher\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 Dispatcher.js\n\u2514\u2500\u2500 stores\n    \u2514\u2500\u2500 TodoStore.js\n```\n\n## \u30b3\u30fc\u30c9\u306e\u89e3\u8aac\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-12-06 22.06.42.png](https://qiita-image-store.s3.amazonaws.com/0/13663/e226f587-575d-0b13-f40e-11c6042fa2a8.png)\n\nindex.ios.js\u3067Register\n\n```\n// index.ios.js\n'use strict';\n\nimport React, { AppRegistry } from 'react-native';\nimport App from './app/app';\n\nvar ReactNativeAdvent2015 = React.createClass({\n  render() {\n    return (\n      <App />\n    );\n  }\n});\n\nAppRegistry.registerComponent('ReactNativeAdvent2015', () => ReactNativeAdvent2015);\n```\n\napp.js\u306f\u30c8\u30c3\u30d7\u3067\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u547c\u3073\u307e\u3059\u3002\u3053\u306e\u30c8\u30c3\u30d7\u306e\u4f7f\u3044\u9053\u306flogin\u3057\u3066\u308b\u3001\u3057\u3066\u306a\u3044\u306a\u3069\u306e\u5207\u308a\u5206\u3051\u3092\u3053\u3053\u306b\u8a18\u8ff0\u3057\u305f\u308a\u3067\u304d\u307e\u3059\u3002\n\n```\n// app/app.js\nimport React from 'react-native';\nimport TodoApp from './components/TodoApp';\n\nvar App  = React.createClass({\n  render() {\n    return (\n      <TodoApp />\n    );\n  }\n});\n\nexport default App;\n```\n\nTodo\u30a2\u30d7\u30ea\u3067\u306f\u30e1\u30a4\u30f3\u753b\u9762\u3067\u3059\u3002TodoStore\u3092\u7528\u3044\u3066\u30a4\u30d9\u30f3\u30c8\u3092\u8ffd\u52a0\u3057\u3001TodoStore\u3078\u306eGetter\u3092\u6301\u3063\u3066\u307e\u3059\u3002\uff11\u65b9\u5411\u306a\u306e\u3067TodoStore\u3078\u306eSetter\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n```\n// compoents/TodoApp.js\nimport React, { StyleSheet, Text, View} from 'react-native';\nimport Header from './Header';\nimport Footer from './Footer';\nimport MainSection from './MainSection';\nimport TodoStore from '../stores/TodoStore';\n\n\nvar TodoApp  = React.createClass({\n\n  getInitialState: function() {\n    return {\n      allTodos: TodoStore.getAll(),\n      areAllComplete: TodoStore.areAllComplete()\n    }\n  },\n\n  componentDidMount: function() {\n     TodoStore.addChangeListener(this._onChange);\n   },\n\n   componentWillUnmount: function() {\n     TodoStore.removeChangeListener(this._onChange);\n   },\n\n  render(){\n    return(\n      <View style={styles.container}>\n        <Header/>\n        <MainSection\n          allTodos={this.state.allTodos}\n          areAllComplete={this.state.areAllComplete}\n        />\n        <Footer/>\n      </View>\n    )\n  },\n\n  _onChange: function() {\n    this.setState({\n      allTodos: TodoStore.getAll(),\n      areAllComplete: TodoStore.areAllComplete()\n    });\n  }\n});\n```\n\nHeader\u3067input\u3092\u53d7\u3051\u5165\u308c\u307e\u3059\u3002\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\u3089`Actions.create`\u3067\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n// components/Header.js\n\nimport React, {View, Text, TextInput} from 'react-native';\nimport Button from 'react-native-button';\nimport TodoActions from '../actions/TodoActions';\n\n\nvar Header  = React.createClass({\n\n  getInitialState(){\n    return {\n      text: \"\"\n    }\n  },\n  _handlePress(){\n    TodoActions.create(this.state.text);\n    this.setState({text: \"\"});\n  },\n\n  render(){\n    return(\n      <View style={{flexDirection: 'row'}}>\n      <TextInput\n        style={{width:100, height: 25, borderColor: 'gray', borderWidth: 1}}\n        onChangeText={(text) => this.setState({text})}\n        value={this.state.text}\n      />\n      <Button onPress={this._handlePress}>Add</Button>\n      </View>\n    )\n  }\n});\n\nexport default Header;\n```\n\n\u57fa\u672c\u7684\u306bAction/Store/Dispatcher\u306ffacebook/flux\u306eexample\u305d\u306e\u307e\u307e\u3067\u3059\u3002\u8a72\u5f53\u7b87\u6240\u3060\u3051\u898b\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002Action\u3067\u306fType\u3068Text\u3092\u6307\u5b9a\u3057\u3066\u3001dispatcher\u306b\u6e21\u3057\u307e\u3059\u3002\n\n```\n// TodoAction\u629c\u7c8b\nvar AppDispatcher = require('../dispatcher/Dispatcher');\nvar TodoConstants = require('../constants/TodoConstants');\n\nvar TodoActions = {\n\n  create: function(text) {\n    AppDispatcher.dispatch({\n      actionType: TodoConstants.TODO_CREATE,\n      text: text\n    });\n  },\n```\n\n\u5b9f\u306fDispatcher\u306f\uff12\u884c\u3067\u304a\u307e\u3058\u306a\u3044\u3067\u3059\u3002Store\u3078\u6295\u3052\u308b\u305f\u3081\u306e\u9053\u5177\u3060\u3068\u601d\u3048\u3070\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\n```\n// Dispatcher.js\nvar Dispatcher = require('flux').Dispatcher;\nmodule.exports = new Dispatcher();\n```\n\nTodoConst\u306f\u30ad\u30fc\u3060\u3051\u683c\u7d0d\u3057\u3066\u307e\u3059\u3002TODO_CREATE\u3068\u3044\u3046\u6587\u5b57\u5217\u3060\u3051\u304cStore\u3068\u306e\u5408\u8a00\u8449\u3068\u3057\u3066\u4f7f\u308f\u308c\u307e\u3059\u3002\n\n```\n// TodoConstant\u629c\u7c8b\nvar keyMirror = require('keymirror');\n\nmodule.exports = keyMirror({\n  TODO_CREATE: null,\n  ...\n```\n\n\u3057\u305f\u304c\u3063\u3066\u3001Action\u306f\u5408\u8a00\u8449\u3092\u6301\u3063\u3066\u3001Text\u3092\u6295\u3052\u3066\u308b\u30a4\u30e1\u30fc\u30b8\u306b\u306a\u308a\u307e\u3059\u3002\u305d\u3057\u3066\u3001Store\u3067\u305d\u306e\u5408\u8a00\u8449\u3092\u6301\u3063\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\n```\n// todoStore\u629c\u7c8b\nvar _todos = {};\n\nfunction create(text) {\n  var id = (+new Date() + Math.floor(Math.random() * 999999)).toString(36);\n  _todos[id] = {\n    id: id,\n    complete: false,\n    text: text\n  };\n}\n\nDispatcher.register(function(action) {\n  var text;\n\n  switch(action.actionType) {\n    case TodoConstants.TODO_CREATE:\n      text = action.text.trim();\n      if (text !== '') {\n        create(text);\n        TodoStore.emitChange();\n      }\n      break;\n\u3000...\n```\n\n\u4fdd\u5b58\u5f8c\u306b`TodoStore.emitChange`\u3067\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u706b\u3055\u305b\u5909\u66f4\u3092Component\u306b\u901a\u77e5\u3057\u307e\u3059\u3002TodoApp.js\u306e`_onChange`\u304c\u901a\u77e5\u3092\u53d7\u3051\u53d6\u308a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u72b6\u614b(state)\u3092\u5909\u5316\u3055\u305b\u307e\u3059\u3002\u5909\u66f4\u304c\u76f4\u306b\u5b50\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3078\u3068props\u3092\u901a\u3058\u3066\u6e21\u308a\u3001MainSection\u306b\u5909\u5316\u304c\u4f1d\u64ad\u3057\u307e\u3059\u3002\n\n```\nimport React, {View, Text} from 'react-native';\n\nvar MainSection  = React.createClass({\n  render(){\n    const {allTodos, areAllComplete} = this.props;\n    let todos = Object.keys(allTodos).map((id) => {\n       return (\n        <View>\n          <Text>{allTodos[id].text}</Text>\n        </View>\n      )\n    });\n    return(\n      <View>{todos}</View>\n    )\n  }\n});\n```\n\n\u57fa\u672c\u7684\u306b\u3053\u306e\u3088\u3046\u306a\u6d41\u308c\u3067Flux\u306f\u30c7\u30fc\u30bf\u304c\u66f4\u65b0\u3055\u308c\u3066\u3044\u304d\u307e\u3059\u3002\u5fc5\u305a\u30011\u65b9\u5411\u304b\u3089\u30c7\u30fc\u30bf\u306e\u6d41\u308c\u3066\u304f\u308b\u305f\u3081\u3001\u30c7\u30fc\u30bf\u306e\u6d41\u308c\u304c\u306f\u3063\u304d\u308a\u3057\u3066\u898b\u901a\u3057\u306e\u826f\u3044\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u660e\u65e5\u306ffacebook/flux\u306e\u4e9c\u7a2eReflux\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n", "tags": ["reactnative", "react-native", "flux"]}