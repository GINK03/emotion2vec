{"context": " More than 1 year has passed since last update.React Router\u3067\u8a8d\u8a3c\u3092\u5236\u5fa1\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\u8a66\u884c\u932f\u8aa4\u3057\u3066\u826f\u3055\u305d\u3046\u306a\u5b9f\u88c5\u65b9\u6cd5\u3092\u767a\u898b\u3057\u305f\u306e\u3067\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\u30a2\u30d7\u30ea\u306b\u8a8d\u8a3c\u304c\u3042\u308b\u3068\u3001\u753b\u9762\u3054\u3068\u306b\u3001\n\n\u8a8d\u8a3c\u6e08\u307f\u30e6\u30fc\u30b6\u306e\u307f\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3057\u305f\u3044\u30da\u30fc\u30b8\n\n\n\u30a2\u30ab\u30a6\u30f3\u30c8\u8a2d\u5b9a\u306a\u3069\n\n\n\u8a8d\u8a3c\u3057\u3066\u3044\u306a\u3044\u30e6\u30fc\u30b6\u306e\u307f\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3057\u305f\u3044\u30da\u30fc\u30b8\n\n\n\u30ed\u30b0\u30a4\u30f3\u30fb\u65b0\u898f\u767b\u9332\u306a\u3069\n\n\n\u8a8d\u8a3c\u306b\u95a2\u4fc2\u306a\u304f\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3057\u305f\u3044\u30da\u30fc\u30b8\n\n\nQiita\u6295\u7a3f\u306e\u3088\u3046\u306a\u30d1\u30d6\u30ea\u30c3\u30af\u306a\u30b3\u30f3\u30c6\u30f3\u30c4\u306a\u3069\n\n\n\n\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u306b\u306a\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\nReact Router\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u3044\u304f\u3064\u304b\u898b\u305f\u3068\u3053\u308d\u5e7e\u3064\u304b\u8a8d\u8a3c\u3092\u5236\u5fa1\u3059\u308b\u65b9\u6cd5\u304c\u793a\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\n\nonEnter\u3092\u4f7f\u3046\u65b9\u6cd5\n AuthenticatedComponent\n\n\nonEnter\u3092\u4f7f\u3046\u65b9\u6cd5\n\u672c\u5bb6\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u4f8b\u793a\u3055\u308c\u305f\u5b9f\u88c5\u3067\u3059\u3002\u73fe\u5728\u03b2\u306ereact-router 1.0.0\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\nfunction requireAuth(nextState, transition) {\n  if (!auth.loggedIn())\n    transition.to('/login', null, { nextPathname: nextState.location.pathname });\n}\n\nReact.render((\n  <Router history={history}>\n    <Route path=\"/\" component={App}>\n      <Route path=\"login\" component={Login}/>\n      <Route path=\"logout\" component={Logout}/>\n      <Route path=\"about\" component={About}/>\n      <Route path=\"dashboard\" component={Dashboard} onEnter={requireAuth}/>\n    </Route>\n  </Router>\n), document.getElementById('example'));\n\n\u50d5\u304c\u8a66\u3057\u305f\u3068\u3053\u308d\u3001Flux\u5b9f\u88c5\u306b\u3088\u3063\u3066\u306frequireAuth\u95a2\u6570\u3068\u30b9\u30c8\u30a2\u3092\u3046\u307e\u304f\u30ea\u30f3\u30af\u3067\u304d\u306a\u3044\u3068\u3044\u3046\u8ab2\u984c\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\nAuthenticatedComponent\nAuthenticatedComponent\u306f\u8a8d\u8a3c\u5236\u5fa1\u3092\u3059\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u4f5c\u308a\u3001\u8a8d\u8a3c\u304c\u5fc5\u8981\u306a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092wrap\u3059\u308b\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\nAutenticatedComponent.jsx\nimport React from 'react';\nimport LoginStore from '../stores/LoginStore';\n\nexport default (ComposedComponent) => {\n  return class AuthenticatedComponent extends React.Component {\n\n    static willTransitionTo(transition) {\n      if (!LoginStore.isLoggedIn()) {\n        transition.replaceWith('/login');\n      }\n    }\n\n    ...\n\n    render() {\n      return (\n      <ComposedComponent {...this.props} />\n      );\n    }\n  }\n};\n\n\n\u30af\u30e9\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u3068\u304d\u306b\u3001\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u30af\u30e9\u30b9\u3092AuthenticatedComponent\u3067\u56f2\u3080\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nAccountSetting.jsx\nimport React from 'react';\nimport AuthenticatedComponent from './AuthenticatedComponent';\n\nexport default AuthenticatedComponent(class AccountSetting extends React.Component {\n  render() {\n    return <div>...</div>;\n  }\n});\n\n\nAuthenticatedComponent\u306f\u3054\u89a7\u306e\u3068\u304a\u308a\u3001\u8a8d\u8a3c\u304c\u5fc5\u8981\u306a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3059\u3079\u3066\u306b\u8a8d\u8a3c\u30b3\u30fc\u30c9\u3092\u8a18\u8ff0\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u305f\u3081\u3001\u65b0\u3057\u3044\u30da\u30fc\u30b8\u3092\u4f5c\u3063\u305f\u5834\u5408\u3001\u8a8d\u8a3c\u30b3\u30fc\u30c9\u3092\u8a18\u8ff0\u3057\u5fd8\u308c\u308b\u30ea\u30b9\u30af\u304c\u3042\u308a\u307e\u3059\u3002\n\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u306e\u8a73\u7d30\u306fAdding authentication to your React Flux app\u3092\u5fa1\u89a7\u304f\u3060\u3055\u3044\u3002\n\n\u8a8d\u8a3c\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u7d44\u307f\u8fbc\u3080\u65b9\u6cd5\n\u4ee5\u4e0a\u3067\u898b\u305f\u3068\u304a\u308a\u3001onEnter\u306fFlux\u5b9f\u88c5\u3092\u9078\u3076\u3057\u3001AuthenticatedComponenent\u306f\u8a18\u8ff0\u5fd8\u308c\u304c\u3042\u308a\u305d\u3046\u3067\u3057\u305f\u3002\u5927\u62b5\u306eFlux\u5b9f\u88c5\u3068\u30a4\u30f3\u30c6\u30b0\u3067\u304d\u3066\u3001\u8a18\u8ff0\u5fd8\u308c\u3082\u5c11\u306a\u3044\u65b9\u6cd5\u304c\u5fc5\u8981\u307b\u3057\u304f\u306a\u308a\u307e\u3059\u3002\n\u3067\u304d\u308c\u3070\u3001\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u3067\u8a8d\u8a3c\u306e\u5236\u5fa1\u3092\u5ba3\u8a00\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3057\u305f\u3002\u8a8d\u8a3c\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u7d44\u307f\u8fbc\u3080\u65b9\u6cd5\u3067\u3059\u3002\u4f8b\u3048\u3070\u4e0b\u306e\u3088\u3046\u306b\u3067\u3059\u3002\n<Route component={App}>\n  <Route component={UserOnly}>\n    <Route path=\"/\" component={Dashboard}/>\n    <Route path=\"/settings\" component={Settings}/>\n  </Route>\n  <Route component={GuestOnly}>\n    <Route path=\"/signup\" component={SignUp}/>\n    <Route path=\"/login\" component={Login}/>\n  </Route>\n</Route>\n\n\u3053\u3046\u3057\u3066\u304a\u3051\u3070\u3001\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u3092\u898b\u308c\u3070\u8a8d\u8a3c\u5236\u5fa1\u304c\u4e00\u76ee\u77ad\u7136\u3067\u3001\u8a8d\u8a3c\u307e\u308f\u308a\u306e\u30b3\u30fc\u30c9\u3092\u5197\u9577\u7684\u306b\u66f8\u304f\u5fc5\u8981\u3082\u3042\u308a\u307e\u305b\u3093\u3002\n\u4e0a\u306e\u30b3\u30fc\u30c9\u3067\u793a\u3057\u305fUserOnly\u3084GuestOnly\u306f\u4f8b\u306b\u3088\u3063\u3066React Component\u306e\u4e00\u7a2e\u3067\u3059\u3002UserOnly\u306e\u5b9f\u88c5\u30b5\u30f3\u30d7\u30eb\u304c\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002Flux\u5b9f\u88c5\u306e\u3072\u3068\u3064\u306eRedux\u3092\u4f7f\u3063\u305f\u3082\u306e\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002@connect\u306e\u90e8\u5206\u306fRedux\u3067\u30b9\u30c8\u30a2\u3068\u7e4b\u304e\u3053\u3080\u5ba3\u8a00\u306a\u306e\u3067\u3001\u304a\u4f7f\u3044\u306eFlux\u5b9f\u88c5\u306b\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\nUserOnly.jsx\nimport React from \"react\";\n\nimport { connect } from \"redux/react\";\n\n@connect(state => ({\n  session: state.session\n}))\nexport default class UserOnly {\n  static contextTypes = {\n    router: React.PropTypes.object.isRequired\n  }\n\n  componentWillMount() {\n    this.guestWillTransfer(this.props, this.context.router);\n  }\n\n  componentWillUpdate(nextProps) {\n    this.guestWillTransfer(nextProps, this.context.router);\n  }\n\n  guestWillTransfer(props, router) {\n    const { loggedIn } = props.session;\n    if (loggedIn === false) {\n      router.replaceWith(\"/login\");\n    }\n  }\n\n  render() {\n    return (\n      <div>{this.props.children}</div>\n    );\n  }\n}\n\n\nUserOnly\u306a\u3069\u306f\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306a\u306e\u3067\u30b9\u30c8\u30a2\u306e\u72b6\u614b(\u3064\u307e\u308a\u30ed\u30b0\u30a4\u30f3\u72b6\u614b)\u304c\u5909\u5316\u3059\u308b\u3068\u3001componentWillMount\u3084componentWillUpdate\u304c\u547c\u3070\u308c\u307e\u3059\u3002\u3053\u3053\u3067\u30d5\u30c3\u30af\u3057\u3066\u3001\u8a8d\u8a3c\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408\u3001\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u3059\u3002\n\u3064\u3044\u3067\u306bGuestOnly\u306e\u5b9f\u88c5\u3067\u3059\u3002\n\nGuestOnly.jsx\nimport React from \"react\";\n\nimport { connect } from \"redux/react\";\n\n@connect(state => ({\n  session: state.session\n}))\nexport default class GuestOnly {\n  static contextTypes = {\n    router: React.PropTypes.object.isRequired\n  }\n\n  componentWillMount() {\n    this.userWillTransfer(this.props, this.context.router);\n  }\n\n  componentWillUpdate(nextProps) {\n    this.userWillTransfer(nextProps, this.context.router);\n  }\n\n  userWillTransfer(props, router) {\n    const { loggedIn } = props.session;\n    if (loggedIn === true) {\n      router.replaceWith(\"/\");\n    }\n  }\n\n  render() {\n    return (\n      <div>{this.props.children}</div>\n    );\n  }\n}\n\n\n\u4ee5\u4e0a\u304c\u3001\u8a8d\u8a3c\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u7d44\u307f\u8fbc\u3093\u3067\u3001\u8a8d\u8a3c\u3092\u5236\u5fa1\u3059\u308b\u65b9\u6cd5\u3067\u3057\u305f\u3002\nReact Router\u3067\u8a8d\u8a3c\u3092\u5236\u5fa1\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\u8a66\u884c\u932f\u8aa4\u3057\u3066\u826f\u3055\u305d\u3046\u306a\u5b9f\u88c5\u65b9\u6cd5\u3092\u767a\u898b\u3057\u305f\u306e\u3067\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n\u30a2\u30d7\u30ea\u306b\u8a8d\u8a3c\u304c\u3042\u308b\u3068\u3001\u753b\u9762\u3054\u3068\u306b\u3001\n\n1. \u8a8d\u8a3c\u6e08\u307f\u30e6\u30fc\u30b6\u306e\u307f\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3057\u305f\u3044\u30da\u30fc\u30b8\n    * \u30a2\u30ab\u30a6\u30f3\u30c8\u8a2d\u5b9a\u306a\u3069\n2. \u8a8d\u8a3c\u3057\u3066\u3044\u306a\u3044\u30e6\u30fc\u30b6\u306e\u307f\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3057\u305f\u3044\u30da\u30fc\u30b8\n    * \u30ed\u30b0\u30a4\u30f3\u30fb\u65b0\u898f\u767b\u9332\u306a\u3069\n3. \u8a8d\u8a3c\u306b\u95a2\u4fc2\u306a\u304f\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3057\u305f\u3044\u30da\u30fc\u30b8\n    * Qiita\u6295\u7a3f\u306e\u3088\u3046\u306a\u30d1\u30d6\u30ea\u30c3\u30af\u306a\u30b3\u30f3\u30c6\u30f3\u30c4\u306a\u3069\n\n\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u306b\u306a\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n\nReact Router\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u3044\u304f\u3064\u304b\u898b\u305f\u3068\u3053\u308d\u5e7e\u3064\u304b\u8a8d\u8a3c\u3092\u5236\u5fa1\u3059\u308b\u65b9\u6cd5\u304c\u793a\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\n1. `onEnter`\u3092\u4f7f\u3046\u65b9\u6cd5\n*  AuthenticatedComponent\n\n## `onEnter`\u3092\u4f7f\u3046\u65b9\u6cd5\n\n[\u672c\u5bb6\u306e\u30b5\u30f3\u30d7\u30eb](https://github.com/rackt/react-router/blob/master/examples/auth-flow/app.js#L118-L132)\u3067\u4f8b\u793a\u3055\u308c\u305f\u5b9f\u88c5\u3067\u3059\u3002\u73fe\u5728\u03b2\u306ereact-router 1.0.0\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\n```xml\nfunction requireAuth(nextState, transition) {\n  if (!auth.loggedIn())\n    transition.to('/login', null, { nextPathname: nextState.location.pathname });\n}\n\nReact.render((\n  <Router history={history}>\n    <Route path=\"/\" component={App}>\n      <Route path=\"login\" component={Login}/>\n      <Route path=\"logout\" component={Logout}/>\n      <Route path=\"about\" component={About}/>\n      <Route path=\"dashboard\" component={Dashboard} onEnter={requireAuth}/>\n    </Route>\n  </Router>\n), document.getElementById('example'));\n```\n\n\u50d5\u304c\u8a66\u3057\u305f\u3068\u3053\u308d\u3001Flux\u5b9f\u88c5\u306b\u3088\u3063\u3066\u306f`requireAuth`\u95a2\u6570\u3068\u30b9\u30c8\u30a2\u3092\u3046\u307e\u304f\u30ea\u30f3\u30af\u3067\u304d\u306a\u3044\u3068\u3044\u3046\u8ab2\u984c\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\n\n## AuthenticatedComponent\n\nAuthenticatedComponent\u306f\u8a8d\u8a3c\u5236\u5fa1\u3092\u3059\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u4f5c\u308a\u3001\u8a8d\u8a3c\u304c\u5fc5\u8981\u306a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092wrap\u3059\u308b\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\n```js:AutenticatedComponent.jsx\nimport React from 'react';\nimport LoginStore from '../stores/LoginStore';\n\nexport default (ComposedComponent) => {\n  return class AuthenticatedComponent extends React.Component {\n\n    static willTransitionTo(transition) {\n      if (!LoginStore.isLoggedIn()) {\n        transition.replaceWith('/login');\n      }\n    }\n\n    ...\n\n    render() {\n      return (\n      <ComposedComponent {...this.props} />\n      );\n    }\n  }\n};\n```\n\n\u30af\u30e9\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u3068\u304d\u306b\u3001\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u30af\u30e9\u30b9\u3092`AuthenticatedComponent`\u3067\u56f2\u3080\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```js:AccountSetting.jsx\nimport React from 'react';\nimport AuthenticatedComponent from './AuthenticatedComponent';\n\nexport default AuthenticatedComponent(class AccountSetting extends React.Component {\n  render() {\n    return <div>...</div>;\n  }\n});\n```\n\n`AuthenticatedComponent`\u306f\u3054\u89a7\u306e\u3068\u304a\u308a\u3001\u8a8d\u8a3c\u304c\u5fc5\u8981\u306a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3059\u3079\u3066\u306b\u8a8d\u8a3c\u30b3\u30fc\u30c9\u3092\u8a18\u8ff0\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u305f\u3081\u3001\u65b0\u3057\u3044\u30da\u30fc\u30b8\u3092\u4f5c\u3063\u305f\u5834\u5408\u3001\u8a8d\u8a3c\u30b3\u30fc\u30c9\u3092\u8a18\u8ff0\u3057\u5fd8\u308c\u308b\u30ea\u30b9\u30af\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u306e\u8a73\u7d30\u306f[Adding authentication to your React Flux app](https://auth0.com/blog/2015/04/09/adding-authentication-to-your-react-flux-app/)\u3092\u5fa1\u89a7\u304f\u3060\u3055\u3044\u3002\n\n\n## \u8a8d\u8a3c\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u7d44\u307f\u8fbc\u3080\u65b9\u6cd5\n\n\u4ee5\u4e0a\u3067\u898b\u305f\u3068\u304a\u308a\u3001`onEnter`\u306fFlux\u5b9f\u88c5\u3092\u9078\u3076\u3057\u3001AuthenticatedComponenent\u306f\u8a18\u8ff0\u5fd8\u308c\u304c\u3042\u308a\u305d\u3046\u3067\u3057\u305f\u3002\u5927\u62b5\u306eFlux\u5b9f\u88c5\u3068\u30a4\u30f3\u30c6\u30b0\u3067\u304d\u3066\u3001\u8a18\u8ff0\u5fd8\u308c\u3082\u5c11\u306a\u3044\u65b9\u6cd5\u304c\u5fc5\u8981\u307b\u3057\u304f\u306a\u308a\u307e\u3059\u3002\n\n\u3067\u304d\u308c\u3070\u3001\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u3067\u8a8d\u8a3c\u306e\u5236\u5fa1\u3092\u5ba3\u8a00\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3057\u305f\u3002\u8a8d\u8a3c\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u7d44\u307f\u8fbc\u3080\u65b9\u6cd5\u3067\u3059\u3002\u4f8b\u3048\u3070\u4e0b\u306e\u3088\u3046\u306b\u3067\u3059\u3002\n\n```xml\n<Route component={App}>\n  <Route component={UserOnly}>\n    <Route path=\"/\" component={Dashboard}/>\n    <Route path=\"/settings\" component={Settings}/>\n  </Route>\n  <Route component={GuestOnly}>\n    <Route path=\"/signup\" component={SignUp}/>\n    <Route path=\"/login\" component={Login}/>\n  </Route>\n</Route>\n```\n\n\u3053\u3046\u3057\u3066\u304a\u3051\u3070\u3001\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u3092\u898b\u308c\u3070\u8a8d\u8a3c\u5236\u5fa1\u304c\u4e00\u76ee\u77ad\u7136\u3067\u3001\u8a8d\u8a3c\u307e\u308f\u308a\u306e\u30b3\u30fc\u30c9\u3092\u5197\u9577\u7684\u306b\u66f8\u304f\u5fc5\u8981\u3082\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u4e0a\u306e\u30b3\u30fc\u30c9\u3067\u793a\u3057\u305f`UserOnly`\u3084`GuestOnly`\u306f\u4f8b\u306b\u3088\u3063\u3066React Component\u306e\u4e00\u7a2e\u3067\u3059\u3002`UserOnly`\u306e\u5b9f\u88c5\u30b5\u30f3\u30d7\u30eb\u304c\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002Flux\u5b9f\u88c5\u306e\u3072\u3068\u3064\u306e[Redux](https://github.com/gaearon/redux)\u3092\u4f7f\u3063\u305f\u3082\u306e\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002`@connect`\u306e\u90e8\u5206\u306fRedux\u3067\u30b9\u30c8\u30a2\u3068\u7e4b\u304e\u3053\u3080\u5ba3\u8a00\u306a\u306e\u3067\u3001\u304a\u4f7f\u3044\u306eFlux\u5b9f\u88c5\u306b\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n```js:UserOnly.jsx\nimport React from \"react\";\n\nimport { connect } from \"redux/react\";\n\n@connect(state => ({\n  session: state.session\n}))\nexport default class UserOnly {\n  static contextTypes = {\n    router: React.PropTypes.object.isRequired\n  }\n\n  componentWillMount() {\n    this.guestWillTransfer(this.props, this.context.router);\n  }\n\n  componentWillUpdate(nextProps) {\n    this.guestWillTransfer(nextProps, this.context.router);\n  }\n\n  guestWillTransfer(props, router) {\n    const { loggedIn } = props.session;\n    if (loggedIn === false) {\n      router.replaceWith(\"/login\");\n    }\n  }\n\n  render() {\n    return (\n      <div>{this.props.children}</div>\n    );\n  }\n}\n```\n\n\nUserOnly\u306a\u3069\u306f\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306a\u306e\u3067\u30b9\u30c8\u30a2\u306e\u72b6\u614b(\u3064\u307e\u308a\u30ed\u30b0\u30a4\u30f3\u72b6\u614b)\u304c\u5909\u5316\u3059\u308b\u3068\u3001`componentWillMount`\u3084`componentWillUpdate`\u304c\u547c\u3070\u308c\u307e\u3059\u3002\u3053\u3053\u3067\u30d5\u30c3\u30af\u3057\u3066\u3001\u8a8d\u8a3c\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408\u3001\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u3059\u3002\n\n\u3064\u3044\u3067\u306bGuestOnly\u306e\u5b9f\u88c5\u3067\u3059\u3002\n\n```js:GuestOnly.jsx\nimport React from \"react\";\n\nimport { connect } from \"redux/react\";\n\n@connect(state => ({\n  session: state.session\n}))\nexport default class GuestOnly {\n  static contextTypes = {\n    router: React.PropTypes.object.isRequired\n  }\n\n  componentWillMount() {\n    this.userWillTransfer(this.props, this.context.router);\n  }\n\n  componentWillUpdate(nextProps) {\n    this.userWillTransfer(nextProps, this.context.router);\n  }\n\n  userWillTransfer(props, router) {\n    const { loggedIn } = props.session;\n    if (loggedIn === true) {\n      router.replaceWith(\"/\");\n    }\n  }\n\n  render() {\n    return (\n      <div>{this.props.children}</div>\n    );\n  }\n}\n```\n\n\u4ee5\u4e0a\u304c\u3001\u8a8d\u8a3c\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u7d44\u307f\u8fbc\u3093\u3067\u3001\u8a8d\u8a3c\u3092\u5236\u5fa1\u3059\u308b\u65b9\u6cd5\u3067\u3057\u305f\u3002\n\n\n", "tags": ["React", "reactjs", "react-router", "babel"]}