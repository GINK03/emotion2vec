{"context": " More than 1 year has passed since last update.\n\u52d5\u4f5c\u78ba\u8a8d\nUDP\u53d7\u4fe1\u5074: RaspberryPi2 + raspbian\nUDP\u9001\u4fe1\u5074: MacOS X 10.8.5\n\n\nRPi\u5074\u306epython\u3067\u306eUDP\u53d7\u4fe1\u304c\u6210\u529f\u3057\u305f\u3088\u3046\u3060\u3002\n\u6557\u56e0\u306f\u3001\u300cCentOS\u3067\u3084\u308c\u3070\u697d\u300d\u3068\u601d\u3044\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092ON\u306e\u307e\u307e\u5b9f\u884c\u3057\u3066\u5931\u6557\u3057\u3066\u3044\u305f\u3002\nRPi\u306f\u521d\u671f\u72b6\u614b\u3067\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u306b\u3088\u308b\u30af\u30ed\u30fc\u30ba\u304c\u306a\u3044\u3088\u3046\u3067\u3001\u4ee5\u4e0b\u306e\u51e6\u7406\u304c\u3059\u3093\u306a\u308a\u5b9f\u884c\u3067\u304d\u305f\u3002\n\ntry1 (\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u53d7\u4fe1)\n\u4ee5\u4e0b\u306fRPi\u5074\u306e\u30b3\u30fc\u30c9\u3002\n\n151111d.py\nimport socket\n\nUDP_IP = \"\"\nUDP_PORT = 6000\n\nsock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\nsock.bind((UDP_IP, UDP_PORT))\n\nwhile True:\n    data, addr = sock.recvfrom(1024)\n    print \"rcvd:\", data\n\n\nRPi2\u5074\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u3066\u304a\u304f\u3002\npi@raspberrypi ~/lineMonitor $ python 151111d.py \n\n\nMacOSX\u5074\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3059\u308b\u3002-w 1\u3092\u3064\u3051\u308b\u3053\u3068\u3067\u30011\u79d2\u5f8c\u306b\u30bf\u30fc\u30df\u30ca\u30eb\u306b\u51e6\u7406\u304c\u623b\u3063\u3066\u304f\u308b\u3002\n$ echo \"test\" | nc -w 1 -u 192.168.10.5 6000\n$ echo \"test\" | nc -w 1 -u 192.168.10.5 6000\n$ echo \"test\" | nc -w 1 -u 192.168.10.5 6000\n\nRPi2\u5074\u306e\u7d50\u679c\u3002\npi@raspberrypi ~/lineMonitor $ python 151111d.py \nrcvd: test\n\nrcvd: test\n\nrcvd: test\n\nCentOS\u3067UDP\u901a\u4fe1\u306e\u5b9f\u88c5\u3092\u3059\u308b\u5834\u5408\u306f\u3001\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3067\u4f7f\u3046\u30dd\u30fc\u30c8\u3092\u958b\u3051\u307e\u3057\u3087\u3046\u3002\n\ntry2 (\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u53d7\u4fe1)\n\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u53d7\u4fe1\u304c\u3084\u308a\u305f\u304b\u3063\u305f\u3002\n\u53c2\u8003\u3000SO\n\u4ee5\u4e0b\u3067\u3067\u304d\u305f\u3002\n\n151111e.py\nimport socket\ns = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\ns.bind(('',6000))\ns.setblocking(0)\ndata=''\naddress=''\nwhile True:\n    try:\n        data,address = s.recvfrom(120)\n    except socket.error:\n        pass\n    else:\n        print \"rcvd:\", data\n\n\n\n```txt:\u52d5\u4f5c\u78ba\u8a8d\nUDP\u53d7\u4fe1\u5074: RaspberryPi2 + raspbian\nUDP\u9001\u4fe1\u5074: MacOS X 10.8.5\n```\n\nRPi\u5074\u306epython\u3067\u306eUDP\u53d7\u4fe1\u304c\u6210\u529f\u3057\u305f\u3088\u3046\u3060\u3002\n\n\u6557\u56e0\u306f\u3001\u300cCentOS\u3067\u3084\u308c\u3070\u697d\u300d\u3068\u601d\u3044\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092ON\u306e\u307e\u307e\u5b9f\u884c\u3057\u3066\u5931\u6557\u3057\u3066\u3044\u305f\u3002\nRPi\u306f\u521d\u671f\u72b6\u614b\u3067\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u306b\u3088\u308b\u30af\u30ed\u30fc\u30ba\u304c\u306a\u3044\u3088\u3046\u3067\u3001\u4ee5\u4e0b\u306e\u51e6\u7406\u304c\u3059\u3093\u306a\u308a\u5b9f\u884c\u3067\u304d\u305f\u3002\n\n## try1 (\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u53d7\u4fe1)\n\n\u4ee5\u4e0b\u306fRPi\u5074\u306e\u30b3\u30fc\u30c9\u3002\n\n```151111d.py\nimport socket\n\nUDP_IP = \"\"\nUDP_PORT = 6000\n\nsock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\nsock.bind((UDP_IP, UDP_PORT))\n\nwhile True:\n\tdata, addr = sock.recvfrom(1024)\n\tprint \"rcvd:\", data\n```\n\nRPi2\u5074\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u3066\u304a\u304f\u3002\n\n```\npi@raspberrypi ~/lineMonitor $ python 151111d.py \n\n```\n\nMacOSX\u5074\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3059\u308b\u3002`-w 1`\u3092\u3064\u3051\u308b\u3053\u3068\u3067\u30011\u79d2\u5f8c\u306b\u30bf\u30fc\u30df\u30ca\u30eb\u306b\u51e6\u7406\u304c\u623b\u3063\u3066\u304f\u308b\u3002\n\n```\n$ echo \"test\" | nc -w 1 -u 192.168.10.5 6000\n$ echo \"test\" | nc -w 1 -u 192.168.10.5 6000\n$ echo \"test\" | nc -w 1 -u 192.168.10.5 6000\n```\n\nRPi2\u5074\u306e\u7d50\u679c\u3002\n\n```\npi@raspberrypi ~/lineMonitor $ python 151111d.py \nrcvd: test\n\nrcvd: test\n\nrcvd: test\n```\n\n\nCentOS\u3067UDP\u901a\u4fe1\u306e\u5b9f\u88c5\u3092\u3059\u308b\u5834\u5408\u306f\u3001\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3067\u4f7f\u3046\u30dd\u30fc\u30c8\u3092\u958b\u3051\u307e\u3057\u3087\u3046\u3002\n\n## try2 (\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u53d7\u4fe1)\n\n\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u53d7\u4fe1\u304c\u3084\u308a\u305f\u304b\u3063\u305f\u3002\n\n\u53c2\u8003\u3000[SO](http://stackoverflow.com/questions/3960680/missing-messages-when-reading-with-non-blocking-udp)\n\n\u4ee5\u4e0b\u3067\u3067\u304d\u305f\u3002\n\n```151111e.py\nimport socket\ns = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\ns.bind(('',6000))\ns.setblocking(0)\ndata=''\naddress=''\nwhile True:\n\ttry:\n\t\tdata,address = s.recvfrom(120)\n\texcept socket.error:\n\t\tpass\n\telse:\n\t\tprint \"rcvd:\", data\n\n```\n", "tags": ["myLineMonitor"]}