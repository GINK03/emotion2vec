{"context": " More than 1 year has passed since last update.OS\u306fubuntu:14.04\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\u6e96\u5099\n\u307e\u305a\u306fbridge-utils\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\napt-get install bridge-utils\n\n\u3042\u3068\u306f\u3001FW\u306e\u8a2d\u5b9a\u30678472/udp\u3092\u958b\u3051\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\nnode1(EC2)\n\nglobal ip: 123.10.20.34 (\u4f8b)\nlocal ip: 10.1.2.3\n\nip li add vxlan0 type vxlan id 10 dev eth0\nip a add 192.168.1.1/24 broadcast 192.168.1.255 dev vxlan0\nip li set vxlan0 up\nbridge fdb append 00:00:00:00:00:00 dev vxlan0 dst 210.12.34.56\n\nnode2(GCE)\n\nglobal ip: 210.12.34.56 (\u4f8b)\nlocal ip: 10.200.100.5\n\nip li add vxlan0 type vxlan id 10 dev eth0\nip a add 192.168.1.2/24 broadcast 192.168.1.255 dev vxlan0\nip li set vxlan0 up\nbridge fdb append 00:00:00:00:00:00 dev vxlan0 dst 123.10.20.34\n\n\u3053\u308c\u3067 ec2\u3068gce\u306b\u307e\u305f\u304c\u308b\u4eee\u60f3\u30cd\u30c3\u30c8\u30ef\u30fc\u30afifvxlan0\u306e\u6e96\u5099\u304c\u3067\u304d\u307e\u3057\u305f\u3002\u76f8\u4e92\u306bping\u3082\u901a\u308a\u307e\u3059\u3057\u3001nc\u30b3\u30de\u30f3\u30c9\u3067\u30c1\u30e3\u30c3\u30c8\u3092\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nnode1\nnc -l 192.168.1.1 -p 1234\nhello\n\nnode2\nnc 192.168.1.1 1234\nhello\n\nip li add\u3067\u6307\u5b9a\u3057\u305fid\u306f VNI(VXLAN Network Identifier)\u3067\u3059\u3002\u540c\u3058\u6570\u5b57\u3092\u6307\u5b9a\u3059\u308c\u3070ok\u3002\nOS\u306fubuntu:14.04\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\n**\u6e96\u5099**\n\n\u307e\u305a\u306f`bridge-utils`\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```shell-session\napt-get install bridge-utils\n```\n\n\u3042\u3068\u306f\u3001FW\u306e\u8a2d\u5b9a\u3067`8472/udp`\u3092\u958b\u3051\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n**node1(EC2)**\n\n* global ip: 123.10.20.34 (\u4f8b)\n* local ip: 10.1.2.3\n\n```shell-session\nip li add vxlan0 type vxlan id 10 dev eth0\nip a add 192.168.1.1/24 broadcast 192.168.1.255 dev vxlan0\nip li set vxlan0 up\nbridge fdb append 00:00:00:00:00:00 dev vxlan0 dst 210.12.34.56\n```\n\n**node2(GCE)**\n\n* global ip: 210.12.34.56 (\u4f8b)\n* local ip: 10.200.100.5\n\n```shell-session\nip li add vxlan0 type vxlan id 10 dev eth0\nip a add 192.168.1.2/24 broadcast 192.168.1.255 dev vxlan0\nip li set vxlan0 up\nbridge fdb append 00:00:00:00:00:00 dev vxlan0 dst 123.10.20.34\n```\n\n\u3053\u308c\u3067 ec2\u3068gce\u306b\u307e\u305f\u304c\u308b\u4eee\u60f3\u30cd\u30c3\u30c8\u30ef\u30fc\u30afif`vxlan0`\u306e\u6e96\u5099\u304c\u3067\u304d\u307e\u3057\u305f\u3002\u76f8\u4e92\u306b`ping`\u3082\u901a\u308a\u307e\u3059\u3057\u3001`nc`\u30b3\u30de\u30f3\u30c9\u3067\u30c1\u30e3\u30c3\u30c8\u3092\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n**node1**\n\n```shell-session\nnc -l 192.168.1.1 -p 1234\nhello\n```\n\n**node2**\n\n```shell-session\nnc 192.168.1.1 1234\nhello\n```\n\n`ip li add`\u3067\u6307\u5b9a\u3057\u305f`id`\u306f VNI(VXLAN Network Identifier)\u3067\u3059\u3002\u540c\u3058\u6570\u5b57\u3092\u6307\u5b9a\u3059\u308c\u3070ok\u3002\n", "tags": ["vxlan", "gce", "EC2"]}