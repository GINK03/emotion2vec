{"context": "\u63a5\u7740\u8bf4, \u521a\u624d\u6211\u4eec\u8bf4\u5230\u4e86\u521b\u5efa\u52a8\u4f5c\u548c\u52a8\u4f5c\u521b\u5efa\u8005\u4ee5\u53ca\u5982\u4f55\u7ed1\u5b9a\u548c\u5206\u53d1\u52a8\u4f5c.\n\u63a5\u4e0b\u6765\u6211\u4eec\u770b\u770breducer.\n\nReducer\n\u73b0\u5728\u6211\u4eec\u8003\u8651\u7684\u95ee\u9898\u5c31\u662f, \u52a8\u4f5c\u5206\u53d1\u4e86\u4e4b\u540e\u5462, \u5230\u54ea\u513f\u53bb,\u5e72\u4e86\u4ec0\u4e48!?\n\u5173\u4e8e\u52a8\u4f5c, \u5b83\u662f\u5b9e\u5b9e\u5728\u5728\u5b9a\u4e49\u4e86\u5e72\u4ec0\u4e48. \u4f46\u662f\u5b83\u5e72\u4ec0\u4e48\u600e\u4e48\u624d\u80fd\u591f\u5f71\u54cd\u5230 app \u7684\u72b6\u6001\u5462, \u8ba9 app \u505a\u51fa\u5bf9\u5e94\u7684\u54cd\u5e94\u5462, \u8fd9\u5c31\u662freducer \u7684\u8981\u505a\u7684.\n\n\u8bbe\u8ba1\u72b6\u6001\u7ed3\u6784\n\u5148\u6765\u8bf4\u8bf4state,\u5728 redux \u91cc\u6240\u6709\u7684\u72b6\u6001\u90fd\u662f\u4fdd\u6301\u5728\u4e00\u4e2a\u5355\u4e2a\u7684\u5bf9\u8c61\u91cc,\u73b0\u5728\u6211\u4eec\u6765\u60f3\u60f3\u4e00\u4e0b\u5979\u7684\u6837\u5b50.\n\u62fftodo app\u6765\u8bf4,\u6211\u4eec\u8981\u5b58\u50a82\u6837\u4e1c\u897f:\n\ntodo \u7684 list\n\n\n\u8fd9\u4e2a\u662f\u6700\u4e3b\u8981\u7684,\u65f6\u523b\u90fd\u80fd\u591f\u53d6\u5230\u5b8c\u6574\u7684 todo \u6570\u636e.\n\n\n\u5f53\u524d\u88ab\u9009\u4e2d\u7684\u663e\u793a\u8fc7\u6ee4\u5668(\u8981\u663e\u793a\u4ec0\u4e48\u72b6\u6001\u7684 todo)\n\n\n\u8fd9\u91cc\u6211\u4eec\u53ea\u9700\u8981\u4fdd\u5b58\u5f53\u524d\u7528\u6237\u9009\u4e2d\u9700\u8981\u663e\u5f0f\u90a3\u4e2a\u7c7b\u578b\u7684 todo \u5c31\u597d,(\u5982\u5f53\u524d\u8fdb\u884c\u7684\u6216\u8005\u5df2\u7ecf\u5b8c\u6210\u7684.)\n\n\n\n\u53ef\u80fd\u5bf9\u4e8e\u4e00\u4e2a app \u6765\u8bf4,\u6211\u4eec\u901a\u5e38\u4e0b\u610f\u8bc6\u4f1a\u8ba4\u4e3a\u6709\u5f88\u591a\u4e8b\u60c5,\u6570\u636e\u9700\u8981\u5904\u7406. \u6709\u5f88\u591a\u7684 case. \u4f46\u662f\u5bf9\u4e8e\u8fd9\u91cc\u6240\u8bb2\u7684\u72b6\u6001\u6765\u8bf4, \u6211\u4eec\u9700\u8981\u62bd\u8c61,\u53d6\u51fa\u6700\u4e3b\u8981\u7684\u4e1c\u897f. \n\u6bd4\u5982\u8bf4, \u6211\u4eec\u53ea\u9700\u8981 care \u8fd9\u4e9b\u6570\u636e\u5c31\u53ef\u4ee5, \u5229\u7528\u8fd9\u4e9b\u6570\u636e\u6211\u4eec\u5c31\u80fd\u591f\u6b63\u5e38\u8fd0\u8f6c app\n{\n  visibilityFilter: 'SHOW_ALL',\n  todos: [\n    {\n      text: 'Consider using Redux',\n      completed: true,\n    },\n    {\n      text: 'Keep all state in a single tree',\n      completed: false\n    }\n  ]\n}\n\n\n\u5728\u4e00\u4e2a\u8f83\u590d\u6742\u7684 app \u4e2d,\u53ef\u80fd\u5b9e\u4f53\u4e4b\u95f4\u4f1a\u76f8\u4e92\u5f15\u7528.\u6211\u4eec\u5efa\u8bae\u5c3d\u91cf\u628a\u72b6\u6001\u4fdd\u6301\u8d8a\u7b80\u5355\u8d8a\u597d. \u4e0d\u8981\u6709\u5d4c\u5957\u7684\u5173\u7cfb\u5b58\u5728. \n\u5c3d\u91cf\u7136\u540e\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u6709\u4e00\u4e2a id \u80fd\u591f\u8bc6\u522b. \u901a\u8fc7 id \u6765\u5f15\u7528.\u60f3\u8c61 app \u7684\u72b6\u6001\u5c31\u548c database \u91cc\u7684\u72b6\u6001\u7c7b\u4f3c. \u8fd9\u4e2a\u53ef\u4ee5\u67e5\u770b normalizr \u7684\u8be6\u7ec6\u6587\u6863\u6765\u770b.\n\n\n\u5904\u7406\u52a8\u4f5c\n\u4e0a\u9762\u6211\u4eec\u5927\u6982\u77e5\u9053\u4e86\u627e\u4e2a todo app \u91cc\u72b6\u6001\u5bf9\u8c61\u6837\u5b50, \u63a5\u4e0b\u6765\u6211\u4eec\u5199reducer. \n\n\u91cd\u8981\u4e8b\u60c5\u8bf4\u4e09\u904d\n\nreducer \u5c31\u662f\u4e00\u4e2a\u7eaf\u51fd\u6570,\u63a5\u53d72\u4e2a\u53c2\u6570, \u7b2c\u4e00\u4e2a\u7684\u5f53\u524d\u7684\u72b6\u6001,\u7b2c\u4e8c\u4e2a\u662f\u52a8\u4f5c, \u7136\u540e\u8fd4\u56de\u6700\u65b0\u7684\u72b6\u6001.\nreducer \u5c31\u662f\u4e00\u4e2a\u7eaf\u51fd\u6570,\u63a5\u53d72\u4e2a\u53c2\u6570, \u7b2c\u4e00\u4e2a\u7684\u5f53\u524d\u7684\u72b6\u6001,\u7b2c\u4e8c\u4e2a\u662f\u52a8\u4f5c, \u7136\u540e\u8fd4\u56de\u6700\u65b0\u7684\u72b6\u6001.\nreducer \u5c31\u662f\u4e00\u4e2a\u7eaf\u51fd\u6570,\u63a5\u53d72\u4e2a\u53c2\u6570, \u7b2c\u4e00\u4e2a\u7684\u5f53\u524d\u7684\u72b6\u6001,\u7b2c\u4e8c\u4e2a\u662f\u52a8\u4f5c, \u7136\u540e\u8fd4\u56de\u6700\u65b0\u7684\u72b6\u6001.\n(previousState, action) => newState\n\n\u8fd9\u4e2a\u6211\u5c31\u79f0\u4e4b\u4e3areducer, \u56e0\u4e3a\u5b83\u5176\u5b9e\u662f\u8fd9\u6837\u4e00\u4e2a\u5b9e\u73b0:\nArray.prototype.reduce(reducer, ?initialValue)\n\n\u5bf9\u4e8ereducer \u6765\u8bf4\u4fdd\u8bc1\u5b83\u7684\u7eaf\u6d01\u6027\u662f\u975e\u5e38\u91cd\u8981\u7684.\u5728 reducer \u91cc\u4fdd\u8bc1\u4e0d\u80fd\u591f\u53d1\u751f\u5982\u4e0b\u7684\u4e8b\u60c5:\n\n\u6539\u53d8\u53c2\u6570\n\u4e0d\u80fd\u591f\u505a\u5176\u4ed6\u4e8b\u60c5\u5982\u8c03\u7528 API \u6216\u8005\u4fee\u6539 route\n\u8c03\u7528\u4e0d pure \u7684\u51fd\u6570\u5982 Date.now() \u6216\u8005 Math.random()\n\n\n\u8fd9\u91cc\u5148\u4e0d\u8ba8\u8bba\u526f\u4f5c\u7528\u7684\u4e1c\u897f\u4e4b\u540e\u9ad8\u9636\u65f6\u5019\u4f1a\u8bf4. \u73b0\u5728\u6211\u4eec\u53ea\u8bb0\u4f4f\u5bf9\u4e8e reducer \u7684 function \u5fc5\u987b\u662f pure \u7684. \u7ed9\u4e00\u6837\u7684\u53c2\u6570,\u603b\u662f\u8fd4\u56de\u540c\u6837\u7684\u7ed3\u679c,\u6ca1\u6709\u526f\u4f5c\u7528,\u6ca1\u6709 api \u8c03\u7528,\u6ca1\u6709\u7a81\u53d8,\u53ea\u662f\u4e00\u4e2a\u8ba1\u7b97.\n\u63a5\u4e0b\u6765\u6211\u4eec\u4e00\u6b65\u6b65\u7684\u6765\u7406\u89e3\u4e4b\u524d\u5b9a\u4e49\u7684action. \u9996\u9009\u6211\u4eec\u521d\u59cb\u5316\u72b6\u6001. redux \u4f1a\u8c03\u7528\u4e00\u4e2a reducer \u800c\u5f53\u524d\u662fundefined \u72b6\u6001. \u6b64\u65f6\u5c31\u662f\u4e00\u4e2a\u673a\u4f1a\u6765\u521d\u59cb\u5316 app \u7684\u72b6\u6001.\n\nimport { VisibilityFilters } from './actions'\n\nconst initialState = {\n  visibilityFilter = VisibilityFilters.SHOW_ALL,\n  todos: []\n}\n\nfunction todoAPP(state, action) {\n  if (typeof state === 'undefined'){\n    return initialState\n  }\n  // For now, don't handle any actions\n  // and just return the state given to us\n  return state\n}\n\n\u4e0a\u9762\u4ee3\u7801\u91cc\u7684\u5173\u4e8estate \u53ef\u4ee5\u7528es6\u7684\u53c2\u6570\u9ed8\u8ba4\u503c\u8bed\u6cd5\u6765\u5199\u5c31\u662f:\nfunction todoAPP(state = initialState, action){\n return state\n}\n\n\u8ba9\u6211\u4eec\u6765\u5904\u7406SET_VISIBILITY_FILTER, \u6211\u4eec\u53ea\u9700\u8981\u6765\u4fee\u6539\u8fd9\u4e2avisibilityFilter \u7684\u503c:\nfunction todoApp(state = initialState, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return Object.assign({}, state, {\n        visibilityFilter: action.filter\n      })\n    default:\n      return state\n  }\n}\n\n\n\u6ce8\u610f\n\n\n\u6211\u4eec\u8fd9\u91cc\u4e0d\u4f1a\u4fee\u6539state,\u800c\u662f\u901a\u8fc7object.assign() \u51fd\u6570\u6765\u62f7\u8d1d\u8fd9\u4e2a\u5bf9\u8c61. \n\n\n\u800cObject.assgin(state, {visibilityFilyer: action.filter})\u540c\u6837\u662f\u9519\u8bef\u7684. \u56e0\u4e3astate \u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f20\u9012, \u5b83\u5c06\u8981\u88ab\u4fee\u6539. \u4f60\u5fc5\u987b\u4f20\u9012\u4e00\u4e2a\u7a7a\u7684\u5bf9\u8c61\u7ed9\u7b2c\u4e00\u4e2a\u53c2\u6570. \u770b\u8fd9\u91cc\n\n\n\n\u6211\u4eec\u540c\u65f6\u628a\u9ed8\u8ba4\u7684\u521d\u59cb\u72b6\u6001\u4f5c\u4e3a\u9ed8\u8ba4\u8fd4\u56de\u503c. \u8fd9\u4e2a\u5f88\u91cd\u8981\u4e00\u65e6\u9047\u5230\u672a\u77e5\u7684 action\u7684\u60c5\u51b5\u4e0b\u8fd8\u662f\u8981\u8fd4\u56de\u72b6\u6001.\n\n\u6ce8\u610f:\n\nObject.assign()\u662f es6\u7684\u4e00\u90e8\u5206,\u76ee\u524d\u8fd8\u6ca1\u6709\u5927\u90e8\u5206\u5b9e\u73b0\u652f\u6301.\u9700\u8981\u4e00\u4e2a polyfill \u6765\u652f\u6301.\u6211\u4eec\u7528 Babel \u7684\u4e00\u4e2a\u63d2\u4ef6.\n\n\n\u5904\u7406\u66f4\u591a\u52a8\u4f5c\nfunction todoApp(state = initialState, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return Object.assign({}, state, {\n        visibilityFilter: action.filter\n      })\n    case ADD_TODO:\n      return Object.assign({}, state, {\n        todos: [\n          ...state.todos,\n          {\n            text: action.text,\n            completed: false\n          }\n        ]\n      })    \n    default:\n      return state\n  }\n}\n\n\u4e0a\u9762\u5f88\u660e\u663e\u6211\u4eec\u90fd\u4e0d\u662f\u76f4\u63a5\u5728\u4fee\u6539state, \u800c\u662f\u53d6\u800c\u4ee3\u4e4b\u7528\u4e00\u4e2a\u65b0\u7684 object \u6765\u63a5\u4f4f\u4e4b\u524d\u7684 state, \u7136\u540e\u518d merge \u6700\u540e\u7684 todo, \u8fd9\u6837\u505a\u5230\u4e0d\u4fee\u6539\u539f\u6709\u7684\u72b6\u6001.\n\u6700\u540eTOGGLE_TODO \u7684\u52a8\u4f5c\u4e5f\u5c31\u5f88\u5bb9\u6613\u4e86:\ncase TOGGLE_TODO:\n  return Object.assign({}, state, {\n    todos: state.todos.map((todo, index) => {\n      if (index === action.index) {\n        return Object.assign({}, todo, {\n          completed: !todo.completed\n        })\n      }\n      return todo\n    })\n  })\n\n\u6211\u4eec\u5e0c\u671b\u8981\u4fee\u6539\u4e00\u4e2aarray \u91cc\u7279\u5b9a\u7684 ite m \u800c\u4e0d\u7a81\u53d8.\u6211\u4eec\u9700\u8981\u5229\u7528\u5f53\u524d\u7684 array\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 array, \u800c\u9664\u4e86\u90a3\u4e2a\u5373\u5c06\u8981\u88ab\u4fee\u6539\u7684. \u800c\u8fd9\u6837\u7684\u52a8\u4f5c\u4f3c\u4e4e\u7ecf\u5e38\u53d1\u751f. \u6211\u4eec\u5c31\u53ef\u4ee5\u63a5\u4f4f\u5e2e\u52a9\u7c7b\u5982react--addons-update,updeep \u6765\u5b8c\u6210. \u751a\u81f3\u6709\u4e00\u4e2a\u5e93\u53ef\u4ee5\u5e72\u8fd9\u6837\u7684\u4e8b\u60c5, [Immutable(http://facebook.github.io/immutable-js/), \u8bb0\u4f4f\u522b\u53bb\u52a8 state.\n\n\u5206\u9694Reducers\nfunction todoApp(state = initialState, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return Object.assign({}, state, {\n        visibilityFilter: action.filter\n      })\n    case ADD_TODO:\n      return Object.assign({}, state, {\n        todos: [\n          ...state.todos,\n          {\n            text: action.text,\n            completed: false\n          }\n        ]\n      })\n    case TOGGLE_TODO:\n      return Object.assign({}, state, {\n        todos: state.todos.map((todo, index) => {\n          if(index === action.index) {\n            return Object.assign({}, todo, {\n              completed: !todo.completed\n            })\n          }\n          return todo\n        })\n      })\n    default:\n      return state\n  }\n}\n\n\n\u76ee\u524d\u770b\u4e0a\u53bb\u6211\u4eec\u7684\u4ee3\u7801\u7c7b\u4f3c\u8fd9\u6837\u7684. \u770b\u4e0a\u53bbtodos \u548cvisibilityFilter \u4ed6\u4eec\u662f\u5355\u72ec\u66f4\u65b0\u7684.\u6709\u65f6\u5019state \u662f\u9700\u8981\u66f4\u52a0\u7684\u72ec\u7acb\u7684.\u4f46\u662f\u8fd9\u91cc\u53ef\u4ee5\u5427 todo \u7684\u66f4\u65b0\u5148\u5355\u72ec\u5230\u4e00\u4e2a\u51fd\u6570\u91cc:\nfunction todos(state = [], action) {\n  switch (action.type) {\n    case ADD_TODO:\n      return [\n        ...state,\n        {\n          text: action.text,\n          completed: false\n        }\n      ]\n    case TOGGLE_TODO:\n      return state.map((todo, index) => {\n        if (index === action.index) {\n          return Object.assign({}, todo, {\n            completed: !todo.completed\n          })\n        }\n        return todo\n      })\n    default:\n      return state\n  }\n}\n\nfunction todoApp(state = initialState, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return Object.assign({}, state, {\n        visibilityFilter: action.filter\n      })\n    case ADD_TODO:\n    case TOGGLE_TODO:\n      return Object.assign({}, state, {\n        todos: todos(state.todos, action)\n      })\n    default:\n      return state\n  }\n}\n\n\u6ce8\u610f, \u8fd9\u91cc\u7684todos \u5b9a\u4e49\u4e5f\u662f\u63a5\u6536\u4e00\u4e2astate, \u800c\u5b83\u662f\u4e00\u4e2a array. \u73b0\u5728todoAPP \u7ed9\u4e86\u5b83\u4e00\u6bb5 state \u8ba9\u4ed6\u6765\u7ba1\u7406(\u4e5f\u5c31\u662ftodo list). \u800c todos \u77e5\u9053\u5982\u4f55\u6765\u66f4\u65b0\u8fd9\u4e2a\u7247\u6bb5(\u600e\u4e48\u77e5\u9053\u7684?). \u8fd9\u4e2a\u79f0\u4f5c \u590d\u5408reducer,\u800c\u4e14\u5b83\u662f\u6784\u5efaredux app \u7684\u57fa\u7840\u6a21\u5f0f.\n\u8ba9\u6211\u4eec\u6765\u770b\u770b\u8fd9\u4e2a\u590d\u5408\u7684 reducer, \u6211\u4eec\u662f\u5426\u53ef\u4ee5\u628a\u5bf9\u4e8e visibilityFilter \u7684\u7ba1\u7406\u4e5f\u62bd\u51fa\u6765\u4f5c\u4e3a reducer manager \u5462, \u53ef\u4ee5\u7684:\n\nfunction visibilityFilter(state = SHOW_ALL, action){\n  switch (action.type){\n    case SET_VISIBILITY_FILTER:\n      return action.filer\n\n    default:\n      reuturn state\n  }\n}\n\n\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u91cd\u5199\u4e3b reducer \u6765\u8c03\u7528\u6bcf\u4e00\u4e2a\u5355\u72ec\u7684reducer manager. \u7136\u540e\u628a\u4ed6\u4eec\u5408\u5e76\u5230\u4e00\u4e2a\u5355\u4e2a\u7684\u5bf9\u8c61\u91cc. \u4ece\u6b64\u5b83\u4e0d\u9700\u8981\u518d\u53bb\u77e5\u9053\u5b8c\u6574\u7684\u521d\u59cb\u72b6\u6001\u4e86. \u53ea\u9700\u8981\u8ba9\u5b50 reducer \u6765\u8fd4\u56de\u4e00\u4e2aundefined \u7684\u521d\u59cb\u72b6\u6001.\nfunction todos(state = [], action) {\n  switch (action.type) {\n    case ADD_TODO:\n      return [\n        ...state,\n        {\n          text: action.text,\n          completed: false\n        }\n      ]\n    case TOGGLE_TODO:\n      return state.map((todo, index) => {\n        if (index === action.index) {\n          return Object.assign({}, todo, {\n            completed: !todo.completed\n          })\n        }\n        return todo\n      })\n    default:\n      return state\n  }\n}\n\nfunction visibilityFilter(state = SHOW_ALL, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return action.filter\n    default:\n      return state\n  }\n}\n\nfunction todoApp(state = {}, action) {\n  return {\n    visibilityFilter: visibilityFilter(state.visibilityFilter, action),\n    todos: todos(state.todos, action)\n  }\n}\n\n\u6ce8\u610f\n\n\u8fd9\u91cc\u6bcf\u4e00\u4e2a reducer \u4ed6\u4eec\u624b\u91cc\u9762\u7684state \u5e76\u4e0d\u662f\u4e00\u6837\u7684,\u4ed6\u4eec\u53ea\u8d1f\u8d23\u4ed6\u4eec\u5404\u81ea\u5bf9\u5e94\u7684 state\u7247\u6bb5.\n\n\u5230\u8fd9\u91cc\u770b\u4e0a\u53bb\u5c31\u4e0d\u9519\u4e86. \u5f53\u968f\u7740 app \u4e0d\u65ad\u590d\u6742,\u6211\u4eec\u53ef\u4ee5\u628a reducer \u5206\u5272\u5230\u4e0d\u540c\u7684\u6587\u4ef6\u91cc,\u6700\u540e\u5728\u4e3b reducer \u91cc\u7ec4\u5408\u5c31\u597d. \u800c\u4e14 redux \u63d0\u4f9b\u4e00\u4e2a\u5de5\u5177 -- combineReducers() \u901a\u8fc7\u8fd9\u4e2a\u53ef\u4ee5\u66f4\u52a0\u65b9\u4fbf\u7684\u628a\u96f6\u6563\u7684 reducer \u7ec4\u5408\u8d77\u6765,\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u91cd\u6784\u4e4b\u524d\u7684 todoAPP \u5982\u4e0b:\nimport { combineReducers } from 'redux'\n\nconst todoApp = combineReducers({\n  visibilityFilter,\n  todos\n})\n\nexport default todoApp\n\n\u8fd8\u6709\u8fd9\u6837\u7684\u5199\u6cd5:\nexport default function todoApp(state = {}, action) {\n  return {\n    visibilityFilter: visibilityFilter(state.visibilityFilter, action),\n    todos: todos(state.todos, action)\n  }\n}\n\n\u751a\u81f3\u53ef\u4ee5\u7ed9\u6bcf\u4e00\u4e2a reducer \u6307\u6d3e\u4e0d\u540c\u7684\u952e, \u7136\u540e\u8fd9\u6837\u7528:\nconst reducer = combineReducers({\n  a: doSomethingWithA,\n  b: processB,\n  c: c\n})\nfunction reducer(state = {}, action) {\n  return {\n    a: doSomethingWithA(state.a, action),\n    b: processB(state.b, action),\n    c: c(state.c, action)\n  }\n}\n\n\u6240\u6709\u7684combineReducers() \u5176\u5b9e\u5c31\u505a\u4e00\u4ef6\u4e8b\u60c5,\u751f\u6210\u4e00\u4e2a\u51fd\u6570,\u7136\u540e\u8ba9\u6bcf\u4e00\u4e2a reducer \u6765\u901a\u8fc7\u4e0d\u540c\u5bf9\u5e94\u7684\u952e\u5229\u7528\u81ea\u5df1\u7684\u4e00\u6bb5 state.\u6700\u540e\u628a\u7ed3\u679c\u5408\u5e76\u8d77\u6765\u8d5b\u9053\u4e00\u4e2a\u5355\u4e2a\u5bf9\u8c61.\n\u90fd\u80fd\u5199\u6210\u8fd9\u6837:\n\nNote for ES6 Savvy Users\nBecause combineReducers expects an object, we can put all top-level reducers into a separate file, export each reducer function, and use import * as reducers to get them as an object with their names as the keys:\n\nimport { combineReducers } from 'redux'\nimport * as reducers from './reducers'\n\nconst todoApp = combineReducers(reducers)\n\n\nBecause import * is still new syntax, we don't use it anymore in the documentation to avoid confusion, but you may encounter it in some community examples.\n\n\u6700\u7ec8\u7684\u4ee3\u7801\u5982\u4e0b:\nimport { combineReducers } from 'redux'\nimport { ADD_TODO, TOGGLE_TODO, SET_VISIBILITY_FILTER, VisibilityFilters } from './actions'\nconst { SHOW_ALL } = VisibilityFilters\n\nfunction visibilityFilter(state = SHOW_ALL, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return action.filter\n    default:\n      return state\n  }\n}\n\nfunction todos(state = [], action) {\n  switch (action.type) {\n    case ADD_TODO:\n      return [\n        ...state,\n        {\n          text: action.text,\n          completed: false\n        }\n      ]\n    case TOGGLE_TODO:\n      return state.map((todo, index) => {\n        if (index === action.index) {\n          return Object.assign({}, todo, {\n            completed: !todo.completed\n          })\n        }\n        return todo\n      })\n    default:\n      return state\n  }\n}\n\nconst todoApp = combineReducers({\n  visibilityFilter,\n  todos\n})\n\nexport default todoApp\n\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u770b\u5982\u4f55\u521b\u5efa\u4e00\u4e2a redux \u7684 store, \u5b83\u662f\u5982\u4f55\u5904\u7406state \u8fd8\u6709\u5982\u4f55 \u5728\u6307\u6d3e\u4e00\u4e2a action \u4e4b\u540e\u5982\u4f55\u8c03\u7528 reducer.\n\nindex\nlearning Redux from todo\n\nlearning Redux from todo[1]\nlearning Redux from todo[2]\nlearning Redux from todo[3]\nlearning Redux from todo[4]\nlearning Redux from todo[5]\n\n\n\u63a5\u7740\u8bf4, \u521a\u624d\u6211\u4eec\u8bf4\u5230\u4e86`\u521b\u5efa\u52a8\u4f5c`\u548c`\u52a8\u4f5c\u521b\u5efa\u8005`\u4ee5\u53ca\u5982\u4f55\u7ed1\u5b9a\u548c\u5206\u53d1\u52a8\u4f5c.\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u770b\u770b` reducer`.\n\n### Reducer\n\n\u73b0\u5728\u6211\u4eec\u8003\u8651\u7684\u95ee\u9898\u5c31\u662f, \u52a8\u4f5c\u5206\u53d1\u4e86\u4e4b\u540e\u5462, \u5230\u54ea\u513f\u53bb,\u5e72\u4e86\u4ec0\u4e48!?\n\n\u5173\u4e8e`\u52a8\u4f5c`, \u5b83\u662f\u5b9e\u5b9e\u5728\u5728\u5b9a\u4e49\u4e86\u5e72\u4ec0\u4e48. \u4f46\u662f\u5b83\u5e72\u4ec0\u4e48\u600e\u4e48\u624d\u80fd\u591f\u5f71\u54cd\u5230 app \u7684\u72b6\u6001\u5462, \u8ba9 app \u505a\u51fa\u5bf9\u5e94\u7684\u54cd\u5e94\u5462, **\u8fd9\u5c31\u662f` reducer` \u7684\u8981\u505a\u7684.**\n\n####\u8bbe\u8ba1\u72b6\u6001\u7ed3\u6784\n\n\u5148\u6765\u8bf4\u8bf4` state`,\u5728 redux \u91cc\u6240\u6709\u7684\u72b6\u6001\u90fd\u662f\u4fdd\u6301\u5728\u4e00\u4e2a\u5355\u4e2a\u7684\u5bf9\u8c61\u91cc,\u73b0\u5728\u6211\u4eec\u6765\u60f3\u60f3\u4e00\u4e0b\u5979\u7684\u6837\u5b50.\n\n\u62ff` todo app `\u6765\u8bf4,\u6211\u4eec\u8981\u5b58\u50a82\u6837\u4e1c\u897f:\n\n- todo \u7684 list\n\t- \u8fd9\u4e2a\u662f\u6700\u4e3b\u8981\u7684,\u65f6\u523b\u90fd\u80fd\u591f\u53d6\u5230\u5b8c\u6574\u7684 todo \u6570\u636e.\n- \u5f53\u524d\u88ab\u9009\u4e2d\u7684\u663e\u793a\u8fc7\u6ee4\u5668(\u8981\u663e\u793a\u4ec0\u4e48\u72b6\u6001\u7684 todo)\n\t- \u8fd9\u91cc\u6211\u4eec\u53ea\u9700\u8981\u4fdd\u5b58\u5f53\u524d\u7528\u6237\u9009\u4e2d\u9700\u8981\u663e\u5f0f\u90a3\u4e2a\u7c7b\u578b\u7684 todo \u5c31\u597d,(\u5982\u5f53\u524d\u8fdb\u884c\u7684\u6216\u8005\u5df2\u7ecf\u5b8c\u6210\u7684.)\n\n\u53ef\u80fd\u5bf9\u4e8e\u4e00\u4e2a app \u6765\u8bf4,\u6211\u4eec\u901a\u5e38\u4e0b\u610f\u8bc6\u4f1a\u8ba4\u4e3a\u6709\u5f88\u591a\u4e8b\u60c5,\u6570\u636e\u9700\u8981\u5904\u7406. \u6709\u5f88\u591a\u7684 case. \u4f46\u662f\u5bf9\u4e8e\u8fd9\u91cc\u6240\u8bb2\u7684`\u72b6\u6001`\u6765\u8bf4, \u6211\u4eec\u9700\u8981\u62bd\u8c61,\u53d6\u51fa\u6700\u4e3b\u8981\u7684\u4e1c\u897f. \n\n\u6bd4\u5982\u8bf4, \u6211\u4eec\u53ea\u9700\u8981 care \u8fd9\u4e9b\u6570\u636e\u5c31\u53ef\u4ee5, \u5229\u7528\u8fd9\u4e9b\u6570\u636e\u6211\u4eec\u5c31\u80fd\u591f\u6b63\u5e38\u8fd0\u8f6c app\n\n\n```\n{\n  visibilityFilter: 'SHOW_ALL',\n  todos: [\n    {\n      text: 'Consider using Redux',\n      completed: true,\n    },\n    {\n      text: 'Keep all state in a single tree',\n      completed: false\n    }\n  ]\n}\n```\n\n> \u5728\u4e00\u4e2a\u8f83\u590d\u6742\u7684 app \u4e2d,\u53ef\u80fd\u5b9e\u4f53\u4e4b\u95f4\u4f1a\u76f8\u4e92\u5f15\u7528.\u6211\u4eec\u5efa\u8bae\u5c3d\u91cf\u628a\u72b6\u6001\u4fdd\u6301\u8d8a\u7b80\u5355\u8d8a\u597d. \u4e0d\u8981\u6709\u5d4c\u5957\u7684\u5173\u7cfb\u5b58\u5728. \n> \u5c3d\u91cf\u7136\u540e\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u6709\u4e00\u4e2a id \u80fd\u591f\u8bc6\u522b. \u901a\u8fc7 id \u6765\u5f15\u7528.\u60f3\u8c61 app \u7684\u72b6\u6001\u5c31\u548c database \u91cc\u7684\u72b6\u6001\u7c7b\u4f3c. \u8fd9\u4e2a\u53ef\u4ee5\u67e5\u770b [normalizr](https://github.com/gaearon/normalizr) \u7684\u8be6\u7ec6\u6587\u6863\u6765\u770b.\n\n#### \u5904\u7406\u52a8\u4f5c\n\n\u4e0a\u9762\u6211\u4eec\u5927\u6982\u77e5\u9053\u4e86\u627e\u4e2a todo app \u91cc`\u72b6\u6001`\u5bf9\u8c61\u6837\u5b50, \u63a5\u4e0b\u6765\u6211\u4eec\u5199` reducer`. \n\n> \u91cd\u8981\u4e8b\u60c5\u8bf4\u4e09\u904d\n\n**`reducer` \u5c31\u662f\u4e00\u4e2a`\u7eaf\u51fd\u6570`,\u63a5\u53d72\u4e2a\u53c2\u6570, \u7b2c\u4e00\u4e2a\u7684\u5f53\u524d\u7684\u72b6\u6001,\u7b2c\u4e8c\u4e2a\u662f\u52a8\u4f5c, \u7136\u540e\u8fd4\u56de\u6700\u65b0\u7684\u72b6\u6001.**\n**`reducer` \u5c31\u662f\u4e00\u4e2a`\u7eaf\u51fd\u6570`,\u63a5\u53d72\u4e2a\u53c2\u6570, \u7b2c\u4e00\u4e2a\u7684\u5f53\u524d\u7684\u72b6\u6001,\u7b2c\u4e8c\u4e2a\u662f\u52a8\u4f5c, \u7136\u540e\u8fd4\u56de\u6700\u65b0\u7684\u72b6\u6001.**\n**`reducer` \u5c31\u662f\u4e00\u4e2a`\u7eaf\u51fd\u6570`,\u63a5\u53d72\u4e2a\u53c2\u6570, \u7b2c\u4e00\u4e2a\u7684\u5f53\u524d\u7684\u72b6\u6001,\u7b2c\u4e8c\u4e2a\u662f\u52a8\u4f5c, \u7136\u540e\u8fd4\u56de\u6700\u65b0\u7684\u72b6\u6001.**\n\n\n\n```\n(previousState, action) => newState\n```\n\n\u8fd9\u4e2a\u6211\u5c31\u79f0\u4e4b\u4e3a` reducer`, \u56e0\u4e3a\u5b83\u5176\u5b9e\u662f\u8fd9\u6837\u4e00\u4e2a\u5b9e\u73b0:\n\n```\nArray.prototype.reduce(reducer, ?initialValue)\n```\n\n\u5bf9\u4e8e` reducer` \u6765\u8bf4\u4fdd\u8bc1\u5b83\u7684[`\u7eaf\u6d01\u6027`](https://en.wikipedia.org/wiki/Pure_function)\u662f\u975e\u5e38\u91cd\u8981\u7684.\u5728 reducer \u91cc\u4fdd\u8bc1\u4e0d\u80fd\u591f\u53d1\u751f\u5982\u4e0b\u7684\u4e8b\u60c5:\n\n- \u6539\u53d8\u53c2\u6570\n- \u4e0d\u80fd\u591f\u505a\u5176\u4ed6\u4e8b\u60c5\u5982\u8c03\u7528 API \u6216\u8005\u4fee\u6539 route\n- \u8c03\u7528\u4e0d `pure` \u7684\u51fd\u6570\u5982 `Date.now()` \u6216\u8005 `Math.random()`\n\n\u8fd9\u91cc\u5148\u4e0d\u8ba8\u8bba\u526f\u4f5c\u7528\u7684\u4e1c\u897f\u4e4b\u540e\u9ad8\u9636\u65f6\u5019\u4f1a\u8bf4. \u73b0\u5728\u6211\u4eec\u53ea\u8bb0\u4f4f\u5bf9\u4e8e reducer \u7684 function \u5fc5\u987b\u662f pure \u7684. `\u7ed9\u4e00\u6837\u7684\u53c2\u6570,\u603b\u662f\u8fd4\u56de\u540c\u6837\u7684\u7ed3\u679c,\u6ca1\u6709\u526f\u4f5c\u7528,\u6ca1\u6709 api \u8c03\u7528,\u6ca1\u6709\u7a81\u53d8,\u53ea\u662f\u4e00\u4e2a\u8ba1\u7b97`.\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u4e00\u6b65\u6b65\u7684\u6765\u7406\u89e3\u4e4b\u524d\u5b9a\u4e49\u7684` action`. \u9996\u9009\u6211\u4eec\u521d\u59cb\u5316`\u72b6\u6001`. redux \u4f1a\u8c03\u7528\u4e00\u4e2a reducer \u800c\u5f53\u524d\u662f` undefined` \u72b6\u6001. \u6b64\u65f6\u5c31\u662f\u4e00\u4e2a\u673a\u4f1a\u6765\u521d\u59cb\u5316 app \u7684\u72b6\u6001.\n\n```\n\nimport { VisibilityFilters } from './actions'\n\nconst initialState = {\n  visibilityFilter = VisibilityFilters.SHOW_ALL,\n  todos: []\n}\n\nfunction todoAPP(state, action) {\n  if (typeof state === 'undefined'){\n    return initialState\n  }\n  // For now, don't handle any actions\n  // and just return the state given to us\n  return state\n}\n```\n\n\u4e0a\u9762\u4ee3\u7801\u91cc\u7684\u5173\u4e8e` state` \u53ef\u4ee5\u7528` es6`\u7684`\u53c2\u6570\u9ed8\u8ba4\u503c`\u8bed\u6cd5\u6765\u5199\u5c31\u662f:\n\n```\nfunction todoAPP(state = initialState, action){\n return state\n}\n```\n\n\u8ba9\u6211\u4eec\u6765\u5904\u7406` SET_VISIBILITY_FILTER`, \u6211\u4eec\u53ea\u9700\u8981\u6765\u4fee\u6539\u8fd9\u4e2a` visibilityFilter` \u7684\u503c:\n\n```\nfunction todoApp(state = initialState, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return Object.assign({}, state, {\n        visibilityFilter: action.filter\n      })\n    default:\n      return state\n  }\n}\n```\n\n>\u6ce8\u610f\n\n1. \u6211\u4eec\u8fd9\u91cc\u4e0d\u4f1a\u4fee\u6539` state`,\u800c\u662f\u901a\u8fc7` object.assign()` \u51fd\u6570\u6765\u62f7\u8d1d\u8fd9\u4e2a\u5bf9\u8c61. \n\t2. \u800c` Object.assgin(state, {visibilityFilyer: action.filter})`\u540c\u6837\u662f\u9519\u8bef\u7684. \u56e0\u4e3a` state` \u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f20\u9012, \u5b83\u5c06\u8981\u88ab\u4fee\u6539. \u4f60\u5fc5\u987b\u4f20\u9012\u4e00\u4e2a\u7a7a\u7684\u5bf9\u8c61\u7ed9\u7b2c\u4e00\u4e2a\u53c2\u6570. \u770b[\u8fd9\u91cc](http://redux.js.org/docs/recipes/UsingObjectSpreadOperator.html)\n2. \u6211\u4eec\u540c\u65f6\u628a\u9ed8\u8ba4\u7684\u521d\u59cb\u72b6\u6001\u4f5c\u4e3a\u9ed8\u8ba4\u8fd4\u56de\u503c. \u8fd9\u4e2a\u5f88\u91cd\u8981\u4e00\u65e6\u9047\u5230\u672a\u77e5\u7684 action\u7684\u60c5\u51b5\u4e0b\u8fd8\u662f\u8981\u8fd4\u56de\u72b6\u6001.\n\n\u6ce8\u610f:\n\n> Object.assign()\u662f es6\u7684\u4e00\u90e8\u5206,\u76ee\u524d\u8fd8\u6ca1\u6709\u5927\u90e8\u5206\u5b9e\u73b0\u652f\u6301.\u9700\u8981\u4e00\u4e2a polyfill \u6765\u652f\u6301.\u6211\u4eec\u7528 Babel \u7684\u4e00\u4e2a\u63d2\u4ef6.\n\n#### \u5904\u7406\u66f4\u591a\u52a8\u4f5c\n\n```\nfunction todoApp(state = initialState, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return Object.assign({}, state, {\n        visibilityFilter: action.filter\n      })\n    case ADD_TODO:\n      return Object.assign({}, state, {\n        todos: [\n          ...state.todos,\n          {\n            text: action.text,\n            completed: false\n          }\n        ]\n      })    \n    default:\n      return state\n  }\n}\n```\n\n\u4e0a\u9762\u5f88\u660e\u663e\u6211\u4eec\u90fd\u4e0d\u662f\u76f4\u63a5\u5728\u4fee\u6539` state`, \u800c\u662f\u53d6\u800c\u4ee3\u4e4b\u7528\u4e00\u4e2a\u65b0\u7684 object \u6765\u63a5\u4f4f\u4e4b\u524d\u7684 state, \u7136\u540e\u518d merge \u6700\u540e\u7684 todo, \u8fd9\u6837\u505a\u5230\u4e0d\u4fee\u6539\u539f\u6709\u7684\u72b6\u6001.\n\n\u6700\u540e` TOGGLE_TODO` \u7684\u52a8\u4f5c\u4e5f\u5c31\u5f88\u5bb9\u6613\u4e86:\n\n\n```\ncase TOGGLE_TODO:\n  return Object.assign({}, state, {\n    todos: state.todos.map((todo, index) => {\n      if (index === action.index) {\n        return Object.assign({}, todo, {\n          completed: !todo.completed\n        })\n      }\n      return todo\n    })\n  })\n```\n\n\u6211\u4eec\u5e0c\u671b\u8981\u4fee\u6539\u4e00\u4e2aarray \u91cc\u7279\u5b9a\u7684 ite m \u800c\u4e0d\u7a81\u53d8.\u6211\u4eec\u9700\u8981\u5229\u7528\u5f53\u524d\u7684 array\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 array, \u800c\u9664\u4e86\u90a3\u4e2a\u5373\u5c06\u8981\u88ab\u4fee\u6539\u7684. \u800c\u8fd9\u6837\u7684\u52a8\u4f5c\u4f3c\u4e4e\u7ecf\u5e38\u53d1\u751f. \u6211\u4eec\u5c31\u53ef\u4ee5\u63a5\u4f4f\u5e2e\u52a9\u7c7b\u5982` react--addons-update`,`updeep` \u6765\u5b8c\u6210. \u751a\u81f3\u6709\u4e00\u4e2a\u5e93\u53ef\u4ee5\u5e72\u8fd9\u6837\u7684\u4e8b\u60c5, [Immutable(http://facebook.github.io/immutable-js/), \u8bb0\u4f4f\u522b\u53bb\u52a8 state.\n\n### \u5206\u9694Reducers\n\n```\nfunction todoApp(state = initialState, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return Object.assign({}, state, {\n        visibilityFilter: action.filter\n      })\n    case ADD_TODO:\n      return Object.assign({}, state, {\n        todos: [\n          ...state.todos,\n          {\n            text: action.text,\n            completed: false\n          }\n        ]\n      })\n    case TOGGLE_TODO:\n      return Object.assign({}, state, {\n        todos: state.todos.map((todo, index) => {\n          if(index === action.index) {\n            return Object.assign({}, todo, {\n              completed: !todo.completed\n            })\n          }\n          return todo\n        })\n      })\n    default:\n      return state\n  }\n}\n\n```\n\n\u76ee\u524d\u770b\u4e0a\u53bb\u6211\u4eec\u7684\u4ee3\u7801\u7c7b\u4f3c\u8fd9\u6837\u7684. \u770b\u4e0a\u53bb` todos` \u548c` visibilityFilter` \u4ed6\u4eec\u662f\u5355\u72ec\u66f4\u65b0\u7684.\u6709\u65f6\u5019` state` \u662f\u9700\u8981\u66f4\u52a0\u7684\u72ec\u7acb\u7684.\u4f46\u662f\u8fd9\u91cc\u53ef\u4ee5\u5427 todo \u7684\u66f4\u65b0\u5148\u5355\u72ec\u5230\u4e00\u4e2a\u51fd\u6570\u91cc:\n\n```\nfunction todos(state = [], action) {\n  switch (action.type) {\n    case ADD_TODO:\n      return [\n        ...state,\n        {\n          text: action.text,\n          completed: false\n        }\n      ]\n    case TOGGLE_TODO:\n      return state.map((todo, index) => {\n        if (index === action.index) {\n          return Object.assign({}, todo, {\n            completed: !todo.completed\n          })\n        }\n        return todo\n      })\n    default:\n      return state\n  }\n}\n\nfunction todoApp(state = initialState, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return Object.assign({}, state, {\n        visibilityFilter: action.filter\n      })\n    case ADD_TODO:\n    case TOGGLE_TODO:\n      return Object.assign({}, state, {\n        todos: todos(state.todos, action)\n      })\n    default:\n      return state\n  }\n}\n```\n\n\n\u6ce8\u610f, \u8fd9\u91cc\u7684` todos` \u5b9a\u4e49\u4e5f\u662f\u63a5\u6536\u4e00\u4e2a` state`, \u800c\u5b83\u662f\u4e00\u4e2a array. \u73b0\u5728` todoAPP` \u7ed9\u4e86\u5b83\u4e00\u6bb5 state \u8ba9\u4ed6\u6765\u7ba1\u7406(\u4e5f\u5c31\u662ftodo list). \u800c `todos` **\u77e5\u9053\u5982\u4f55\u6765\u66f4\u65b0\u8fd9\u4e2a\u7247\u6bb5**(\u600e\u4e48\u77e5\u9053\u7684?). **\u8fd9\u4e2a\u79f0\u4f5c \u590d\u5408reducer,\u800c\u4e14\u5b83\u662f\u6784\u5efaredux app \u7684\u57fa\u7840\u6a21\u5f0f**.\n\n\u8ba9\u6211\u4eec\u6765\u770b\u770b\u8fd9\u4e2a**\u590d\u5408\u7684 reducer**, \u6211\u4eec\u662f\u5426\u53ef\u4ee5\u628a\u5bf9\u4e8e visibilityFilter \u7684\u7ba1\u7406\u4e5f\u62bd\u51fa\u6765\u4f5c\u4e3a reducer manager \u5462, \u53ef\u4ee5\u7684:\n\n\n```\n\nfunction visibilityFilter(state = SHOW_ALL, action){\n  switch (action.type){\n    case SET_VISIBILITY_FILTER:\n      return action.filer\n      \n    default:\n      reuturn state\n  }\n}\n```\n\n\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u91cd\u5199\u4e3b reducer \u6765\u8c03\u7528**\u6bcf\u4e00\u4e2a\u5355\u72ec\u7684reducer manager**. \u7136\u540e\u628a\u4ed6\u4eec\u5408\u5e76\u5230\u4e00\u4e2a\u5355\u4e2a\u7684\u5bf9\u8c61\u91cc. \u4ece\u6b64\u5b83\u4e0d\u9700\u8981\u518d\u53bb\u77e5\u9053\u5b8c\u6574\u7684\u521d\u59cb\u72b6\u6001\u4e86. \u53ea\u9700\u8981\u8ba9\u5b50 reducer \u6765\u8fd4\u56de\u4e00\u4e2a` undefined` \u7684\u521d\u59cb\u72b6\u6001.\n\n\n```\nfunction todos(state = [], action) {\n  switch (action.type) {\n    case ADD_TODO:\n      return [\n        ...state,\n        {\n          text: action.text,\n          completed: false\n        }\n      ]\n    case TOGGLE_TODO:\n      return state.map((todo, index) => {\n        if (index === action.index) {\n          return Object.assign({}, todo, {\n            completed: !todo.completed\n          })\n        }\n        return todo\n      })\n    default:\n      return state\n  }\n}\n\nfunction visibilityFilter(state = SHOW_ALL, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return action.filter\n    default:\n      return state\n  }\n}\n\nfunction todoApp(state = {}, action) {\n  return {\n    visibilityFilter: visibilityFilter(state.visibilityFilter, action),\n    todos: todos(state.todos, action)\n  }\n}\n```\n\n**\u6ce8\u610f**\n\n> \u8fd9\u91cc\u6bcf\u4e00\u4e2a reducer \u4ed6\u4eec\u624b\u91cc\u9762\u7684` state` \u5e76\u4e0d\u662f\u4e00\u6837\u7684,\u4ed6\u4eec\u53ea\u8d1f\u8d23\u4ed6\u4eec\u5404\u81ea\u5bf9\u5e94\u7684 **state\u7247\u6bb5**.\n\n\u5230\u8fd9\u91cc\u770b\u4e0a\u53bb\u5c31\u4e0d\u9519\u4e86. \u5f53\u968f\u7740 app \u4e0d\u65ad\u590d\u6742,\u6211\u4eec\u53ef\u4ee5\u628a reducer \u5206\u5272\u5230\u4e0d\u540c\u7684\u6587\u4ef6\u91cc,\u6700\u540e\u5728\u4e3b reducer \u91cc\u7ec4\u5408\u5c31\u597d. \u800c\u4e14 redux \u63d0\u4f9b\u4e00\u4e2a\u5de5\u5177 -- `combineReducers()` \u901a\u8fc7\u8fd9\u4e2a\u53ef\u4ee5\u66f4\u52a0\u65b9\u4fbf\u7684\u628a\u96f6\u6563\u7684 reducer \u7ec4\u5408\u8d77\u6765,\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u91cd\u6784\u4e4b\u524d\u7684 todoAPP \u5982\u4e0b:\n\n```\nimport { combineReducers } from 'redux'\n\nconst todoApp = combineReducers({\n  visibilityFilter,\n  todos\n})\n\nexport default todoApp\n```\n\n\u8fd8\u6709\u8fd9\u6837\u7684\u5199\u6cd5:\n\n```\nexport default function todoApp(state = {}, action) {\n  return {\n    visibilityFilter: visibilityFilter(state.visibilityFilter, action),\n    todos: todos(state.todos, action)\n  }\n}\n```\n\n\u751a\u81f3\u53ef\u4ee5\u7ed9\u6bcf\u4e00\u4e2a reducer \u6307\u6d3e\u4e0d\u540c\u7684`\u952e`, \u7136\u540e\u8fd9\u6837\u7528:\n\n\n```\nconst reducer = combineReducers({\n  a: doSomethingWithA,\n  b: processB,\n  c: c\n})\nfunction reducer(state = {}, action) {\n  return {\n    a: doSomethingWithA(state.a, action),\n    b: processB(state.b, action),\n    c: c(state.c, action)\n  }\n}\n```\n\n\n\u6240\u6709\u7684` combineReducers()` \u5176\u5b9e\u5c31\u505a\u4e00\u4ef6\u4e8b\u60c5,\u751f\u6210\u4e00\u4e2a\u51fd\u6570,\u7136\u540e\u8ba9\u6bcf\u4e00\u4e2a reducer \u6765\u901a\u8fc7\u4e0d\u540c\u5bf9\u5e94\u7684\u952e\u5229\u7528\u81ea\u5df1\u7684\u4e00\u6bb5 state.\u6700\u540e\u628a\u7ed3\u679c\u5408\u5e76\u8d77\u6765\u8d5b\u9053\u4e00\u4e2a\u5355\u4e2a\u5bf9\u8c61.\n\n\u90fd\u80fd\u5199\u6210\u8fd9\u6837:\n\n>Note for ES6 Savvy Users\n\n>Because combineReducers expects an object, we can put all top-level reducers into a separate file, export each reducer function, and use import * as reducers to get them as an object with their names as the keys:\n\n\n```\nimport { combineReducers } from 'redux'\nimport * as reducers from './reducers'\n\nconst todoApp = combineReducers(reducers)\n```\n\n>Because import * is still new syntax, we don't use it anymore in the documentation to avoid confusion, but you may encounter it in some community examples.\n\n\n\u6700\u7ec8\u7684\u4ee3\u7801\u5982\u4e0b:\n\n```\nimport { combineReducers } from 'redux'\nimport { ADD_TODO, TOGGLE_TODO, SET_VISIBILITY_FILTER, VisibilityFilters } from './actions'\nconst { SHOW_ALL } = VisibilityFilters\n\nfunction visibilityFilter(state = SHOW_ALL, action) {\n  switch (action.type) {\n    case SET_VISIBILITY_FILTER:\n      return action.filter\n    default:\n      return state\n  }\n}\n\nfunction todos(state = [], action) {\n  switch (action.type) {\n    case ADD_TODO:\n      return [\n        ...state,\n        {\n          text: action.text,\n          completed: false\n        }\n      ]\n    case TOGGLE_TODO:\n      return state.map((todo, index) => {\n        if (index === action.index) {\n          return Object.assign({}, todo, {\n            completed: !todo.completed\n          })\n        }\n        return todo\n      })\n    default:\n      return state\n  }\n}\n\nconst todoApp = combineReducers({\n  visibilityFilter,\n  todos\n})\n\nexport default todoApp\n\n```\n\n\u63a5\u4e0b\u6765\u6211\u4eec\u770b\u5982\u4f55\u521b\u5efa\u4e00\u4e2a redux \u7684 `store`, \u5b83\u662f\u5982\u4f55\u5904\u7406` state` \u8fd8\u6709\u5982\u4f55 \u5728\u6307\u6d3e\u4e00\u4e2a action \u4e4b\u540e\u5982\u4f55\u8c03\u7528 reducer.\n\n\n---\n\nindex\n\nlearning Redux from todo\n\n- [learning Redux from todo[1]](http://qiita.com/xiangzhuyuan/items/a26e97c6cac476369e37)\n- [learning Redux from todo[2]](http://qiita.com/xiangzhuyuan/items/86c5c6508e8481c2dd3a)\n- [learning Redux from todo[3]](http://qiita.com/xiangzhuyuan/items/9ce23a8c9f3b26c48838)\n- [learning Redux from todo[4]](http://qiita.com/xiangzhuyuan/items/c082e97c3b863602fccf)\n- [learning Redux from todo[5]](http://qiita.com/xiangzhuyuan/items/4e6f61a27c068b4f33e7)\n", "tags": ["React", "redux"]}