{"tags": ["C#", "JSON", ".NETFramework", "WebAPI"], "context": "\u203bC#\u521d\u5fc3\u8005\u306a\u306e\u3067\u30e1\u30e2\u3067\u3059\n\n\u74b0\u5883\n\n.NET Framework 3.5\n\n4.0 \u304b\u3089\u306fDynamicJSON\u304c\u4f7f\u3048\u308b\u3089\u3057\u3044\n\nusing\u8ffd\u52a0\nusing System.IO;\nusing System.Net;\nusing System.Runtime.Serialization;\nusing System.Runtime.Serialization.Json;\nusing System.Web.Script.Serialization\n\n\n\u30c7\u30fc\u30bf\u30b3\u30f3\u30c8\u30e9\u30af\u30c8\u5b9a\u7fa9\n[DataContract]\npublic class RequestResult\n{\n    [DataMember]\n    public string data1 { get; set; }\n    [DataMember]\n    public string data2 { get; set; }\n    [DataMember]\n    public string data3 { get; set; }\n    [DataMember]\n    public string data4 { get; set; }\n}\n\n\n\u5b9f\u51e6\u7406\n    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(\"http://example.com/api/hoge\");\n    req.ContentType = \"application/json\";\n    req.Method = \"POST\";\n\n    using (var streamWriter = new StreamWriter(req.GetRequestStream()))\n    {\n        string jsonPayload = new JavaScriptSerializer().Serialize(new\n        {\n            hoge = \"API\u3092\",\n            piyo = \"\u53e9\u304f\u969b\u306b\u6e21\u3059\",\n            foo = \"\u30d1\u30e9\u30e1\u30fc\u30bf\"\n        });\n        streamWriter.Write(jsonPayload);\n    }\n\n    HttpWebResponse res = (HttpWebResponse)req.GetResponse();\n    RequestResult result;\n    using (res)\n    {\n        using (var resStream = res.GetResponseStream())\n        {\n            var serializer = new DataContractJsonSerializer(typeof(RequestResult));\n            result = (RequestResult)serializer.ReadObject(resStream);\n        }\n    }\n\n\n\u53c2\u8003\n\nhttp://stackoverflow.com/questions/9145667/how-to-post-json-to-the-server\nhttps://msdn.microsoft.com/ja-jp/library/bb412179(v=vs.90).aspx\nhttps://msdn.microsoft.com/ja-jp/library/cc668800(v=vs.90).aspx\nhttps://msdn.microsoft.com/ja-jp/library/system.io.streamwriter(v=vs.110).aspx\nhttps://msdn.microsoft.com/ja-jp/library/system.net.httpwebresponse.getresponsestream(v=vs.110).aspx\nhttp://posnum.hatenablog.com/entry/2014/09/19/233255\nhttp://www.sonnagaya.com/entry/20140704/1404434783\nhttp://argius.hatenablog.jp/entry/20131113/1384352397\n\n\u203bC#\u521d\u5fc3\u8005\u306a\u306e\u3067\u30e1\u30e2\u3067\u3059\n\n### \u74b0\u5883\n\n- .NET Framework 3.5\n\n4.0 \u304b\u3089\u306fDynamicJSON\u304c\u4f7f\u3048\u308b\u3089\u3057\u3044\n\n\nusing\u8ffd\u52a0\n----------------------------\n\n```csharp\nusing System.IO;\nusing System.Net;\nusing System.Runtime.Serialization;\nusing System.Runtime.Serialization.Json;\nusing System.Web.Script.Serialization\n```\n\n\n\u30c7\u30fc\u30bf\u30b3\u30f3\u30c8\u30e9\u30af\u30c8\u5b9a\u7fa9\n----------------------------\n\n```csharp\n[DataContract]\npublic class RequestResult\n{\n    [DataMember]\n    public string data1 { get; set; }\n    [DataMember]\n    public string data2 { get; set; }\n    [DataMember]\n    public string data3 { get; set; }\n    [DataMember]\n    public string data4 { get; set; }\n}\n``` \n\n\n\u5b9f\u51e6\u7406\n-------------------------------\n\n```cs\n    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(\"http://example.com/api/hoge\");\n    req.ContentType = \"application/json\";\n    req.Method = \"POST\";\n\n    using (var streamWriter = new StreamWriter(req.GetRequestStream()))\n    {\n        string jsonPayload = new JavaScriptSerializer().Serialize(new\n        {\n            hoge = \"API\u3092\",\n            piyo = \"\u53e9\u304f\u969b\u306b\u6e21\u3059\",\n            foo = \"\u30d1\u30e9\u30e1\u30fc\u30bf\"\n        });\n        streamWriter.Write(jsonPayload);\n    }\n\n    HttpWebResponse res = (HttpWebResponse)req.GetResponse();\n    RequestResult result;\n    using (res)\n    {\n        using (var resStream = res.GetResponseStream())\n        {\n            var serializer = new DataContractJsonSerializer(typeof(RequestResult));\n            result = (RequestResult)serializer.ReadObject(resStream);\n        }\n    }\n```\n\n\u53c2\u8003\n-------------------------------------------------\n\n- http://stackoverflow.com/questions/9145667/how-to-post-json-to-the-server\n- https://msdn.microsoft.com/ja-jp/library/bb412179(v=vs.90).aspx\n- https://msdn.microsoft.com/ja-jp/library/cc668800(v=vs.90).aspx\n- https://msdn.microsoft.com/ja-jp/library/system.io.streamwriter(v=vs.110).aspx\n- https://msdn.microsoft.com/ja-jp/library/system.net.httpwebresponse.getresponsestream(v=vs.110).aspx\n- http://posnum.hatenablog.com/entry/2014/09/19/233255\n- http://www.sonnagaya.com/entry/20140704/1404434783\n- http://argius.hatenablog.jp/entry/20131113/1384352397\n"}