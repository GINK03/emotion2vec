{"context": " More than 1 year has passed since last update.\n\nservices.cfg\n\nevent_handler\u3067misccommands\u306ecommand_name\u3092\u6307\u5b9a\n define service{\n     use                     generic-service\n     hostgroup_name          www_servers\n     service_description     CPU Load Average\n     contact_groups          admin_all\n     check_command           check_nrpe!check_load\n+    event_handler           sample-mail\n     }\n\n\n\nmisccommands.cfg\n\ncommand_line\u306b\u30b3\u30de\u30f3\u30c9\u3092\u6307\u5b9a\u3059\u308b\ndefine command{\n    command_name    sample-mail\n    command_line    sh -c '[ \"$SERVICESTATE$\" == \"CRITICAL\" -a \"$SERVICESTATETYPE$\" == \"HARD\" ] && ssh -i /etc/nagios/id_dsa nagios@$HOSTNAME$'\n    }\n\n\n\nwww01:/home/nagios/.ssh/authorized_keys\u306b\u8ffd\u8a18\ncommand=\"\u8272\u3005\u30b3\u30de\u30f3\u30c9 | mail -s '\u4ef6\u540d' \u9001\u4fe1\u5148\",from=\"192.168.2.90,192.168.2.91\",no-agent-forwarding,no-port-forwarding,no-pty,no-X11-forwarding ssh-dss <id_dsa.pub\u306e\u5185\u5bb9> nagios@nagios01.server\n\n## services.cfg\n\n```diff:event_handler\u3067misccommands\u306ecommand_name\u3092\u6307\u5b9a\n define service{\n     use                     generic-service\n     hostgroup_name          www_servers\n     service_description     CPU Load Average\n     contact_groups          admin_all\n     check_command           check_nrpe!check_load\n+    event_handler           sample-mail\n     }\n```\n\n## misccommands.cfg\n\n```bash:command_line\u306b\u30b3\u30de\u30f3\u30c9\u3092\u6307\u5b9a\u3059\u308b\ndefine command{\n    command_name    sample-mail\n    command_line    sh -c '[ \"$SERVICESTATE$\" == \"CRITICAL\" -a \"$SERVICESTATETYPE$\" == \"HARD\" ] && ssh -i /etc/nagios/id_dsa nagios@$HOSTNAME$'\n    }\n```\n\n## www01:/home/nagios/.ssh/authorized_keys\u306b\u8ffd\u8a18\n\n```bash:\ncommand=\"\u8272\u3005\u30b3\u30de\u30f3\u30c9 | mail -s '\u4ef6\u540d' \u9001\u4fe1\u5148\",from=\"192.168.2.90,192.168.2.91\",no-agent-forwarding,no-port-forwarding,no-pty,no-X11-forwarding ssh-dss <id_dsa.pub\u306e\u5185\u5bb9> nagios@nagios01.server\n```\n", "tags": ["Nagios"]}