{"tags": ["anyenv", "phpenv", "PHP", "\u74b0\u5883\u69cb\u7bc9"], "context": "\n\n\u6982\u8981\nSierra\u3092\u30af\u30ea\u30fc\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u304b\u3089\u74b0\u5883\u6574\u3048\u3088\u3046\u3068\u601d\u3063\u305f\u3002\n\u666e\u901a\u306bphpenv\u3067\u3084\u308d\u3046\u3068\u601d\u3063\u305f\u3051\u3069\u8abf\u3079\u3066\u305f\u3089anyenv\u3068\u3044\u3046\u3082\u306e\u304c\u3042\u308b\u3089\u3057\u3044\u306e\u3067\u4f7f\u3063\u3066\u307f\u308b\u3002\nanyenv\u307e\u308f\u308a\u306f\u57fa\u672c\u306f\u516c\u5f0f\u30b5\u30a4\u30c8\u898b\u3066\u308c\u3070OK\u306a\u306e\u3067\u30e1\u30e2\u4ee3\u308f\u308a\u3002\nphp\u306e\u30d3\u30eb\u30c9/\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u95a2\u4fc2\u306f\u3061\u3087\u3044\u3061\u3087\u3044\u30a8\u30e9\u30fc\u3063\u3066\u5927\u5909\u3060\u3063\u305f\u3002\n\n\u74b0\u5883\n\nmacOS Sierra 10.12.2\n\n$ which php\n/usr/bin/php\n$ php -v\nPHP 5.6.27 (cli) (built: Oct 23 2016 11:47:58)\nCopyright (c) 1997-2016 The PHP Group\nZend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies\n\n\nanyenv\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u57fa\u672c\u7684\u306b\u306fanyenv\u306eREADME\u306e\u901a\u308a\n$ git clone https://github.com/riywo/anyenv ~/.anyenv\n$ echo 'export PATH=\"$HOME/.anyenv/bin:$PATH\"' >> ~/.bash_profile\n$ echo 'eval \"$(anyenv init -)\"' >> ~/.bash_profile\n$ exec $SHELL -l\n\n\nanyenv-update\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nanyenv\u914d\u4e0b\u306e**env\u3001\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u66f4\u65b0\u3092\u884c\u3063\u3066\u304f\u308c\u308b\n\u57fa\u672c\u7684\u306b\u306fanyenv-update\u306eREADME\u306e\u901a\u308a\n$ mkdir -p $(anyenv root)/plugins\n$ git clone https://github.com/znz/anyenv-update.git $(anyenv root)/plugins/anyenv-update\n\n\nphpenv\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u3068\u3066\u3082\u7c21\u5358\n$ anyenv install phpenv\n$ exec $SHELL -l\n\n\nPHP7.1\u306e\u30d3\u30eb\u30c9/\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ phpenv install 7.1.0\n\n\u4f55\u3082\u8003\u3048\u305a\u306b\u3084\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\n-----------------\n|  BUILD ERROR  |\n-----------------\n\nHere are the last 10 lines from the log:\n\n-----------------------------------------\nconfigure: WARNING: unrecognized options: --with-mysql\nconfigure: WARNING: This bison version is not supported for regeneration of the Zend/PHP parsers (found: 2.3, min: 204, excluded: ).\nconfigure: WARNING: You will need re2c 0.13.4 or later if you want to regenerate PHP parsers.\nconfigure: error: Cannot find OpenSSL's <evp.h>\n-----------------------------------------\n\nThe full Log is available at '/tmp/php-build.7.1.0.20170103124237.log'.\n[Warn]: Aborting build.\n\n\n\u72ec\u81ea\u306e\u5b9a\u7fa9\u3092\u4f5c\u6210\u3057\u3001\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b\n$ cp ~/.anyenv/envs/phpenv/plugins/php-build/share/php-build/definitions/7.1.0 ~/.anyenv/envs/phpenv/plugins/php-build/share/php-build/definitions/my_7.1.0\n$ vim ~/.anyenv/envs/phpenv/plugins/php-build/share/php-build/definitions/my_7.1.0\n\n\nmy_7.1.0\n+ configure_option -D \"--with-mysql\"\n+ configure_option -R \"--with-openssl=/usr/local/opt/openssl\"\ninstall_package \"https://secure.php.net/distributions/php-7.1.0.tar.bz2\"\ninstall_xdebug \"2.5.0\"\nenable_builtin_opcache\n\n\n\u3092\u30d5\u30a1\u30a4\u30eb\u306e\u5148\u982d\u306b\u8ffd\u52a0\n\u4e0b\u8a18\u306e\u69d8\u306b\u6700\u5f8c\u306b\u8ffd\u52a0\u3057\u3066\u3082\u8a8d\u8b58\u3055\u308c\u306a\u304b\u3063\u305f\n$ echo configure_option -D \"--with-mysql\" >> ~/.anyenv/envs/phpenv/plugins/php-build/share/php-build/definitions/my_7.1.0\n\n\n\u8db3\u308a\u306a\u3044\u3082\u306e\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nlibjpeg\u301clibmcrypt\u306fre2c\u89e3\u6c7a\u3057\u305f\u5f8c\u306b\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\nautoconf,automake\u306f\u305d\u306e\u5f8c\u306b\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\n$ brew install bison\n$ brew link bison --force\n$ brew install re2c\n$ brew install libjpeg\n$ brew install libpng\n$ brew install libmcrypt\n$ brew install autoconf\n$ brew install automake\n\n\n\u518d\u5ea6\u3001\u72ec\u81ea\u5b9a\u7fa9\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\u3081\u3063\u3061\u3083\u6642\u9593\u304b\u304b\u308b\u306e\u3067\u6687\u3064\u3076\u3057\u3057\u306a\u304c\u3089\n$ phpenv install my_7.1.0\n[Info]: Loaded extension plugin\n[Info]: Loaded apc Plugin.\n[Info]: Loaded composer Plugin.\n[Info]: Loaded github Plugin.\n[Info]: Loaded uprofiler Plugin.\n[Info]: Loaded xdebug Plugin.\n[Info]: Loaded xhprof Plugin.\n[Info]: Loaded zendopcache Plugin.\n[Info]: php.ini-production gets used as php.ini\n[Info]: Building my_7.1.0 into /Users/hrs/.anyenv/envs/phpenv/versions/my_7.1.0\n[Skipping]: Already downloaded and extracted https://secure.php.net/distributions/php-7.1.0.tar.bz2\n\n\n[xdebug]: Installing version 2.5.0\n[xdebug]: Compiling xdebug in /var/tmp/php-build/source/xdebug-2.5.0\n[xdebug]: Installing xdebug configuration in /Users/hrs/.anyenv/envs/phpenv/versions/my_7.1.0/etc/conf.d/xdebug.ini\n[xdebug]: Cleaning up.\n[Info]: Enabling Opcache...\n\n[Info]: The Log File is not empty, but the Build did not fail. Maybe just warnings got logged. You can review the log in /tmp/php-build.my_7.1.0.20170103152042.log\n[Success]: Built my_7.1.0 successfully.\n$ phpenv rehash\n$ phpenv versions\n* system (set by /Users/hrs/.anyenv/envs/phpenv/version)\n  my_7.1.0\n\n\n\u4f7f\u7528\u3059\u308bPHP\u306e\u5207\u308a\u66ff\u3048\n$ phpenv global my_7.1.0\nmy_7.1.0\n$ php -v\nPHP 7.1.0 (cli) (built: Jan  3 2017 15:32:50) ( NTS )\nCopyright (c) 1997-2016 The PHP Group\nZend Engine v3.1.0-dev, Copyright (c) 1998-2016 Zend Technologies\n    with Zend OPcache v7.1.0, Copyright (c) 1999-2016, by Zend Technologies\n    with Xdebug v2.5.0, Copyright (c) 2002-2016, by Derick Rethans\n\n\n\u53c2\u8003\n\nanyenv + phpenv + php-build \u304c\u4fbf\u5229\u3059\u304e\u308b\u4ef6\nubuntu\u306bphp-build\u3067php5.5\u3092\u5165\u308c\u308b\u305f\u3081\u306b\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3068\u683c\u95d8\u3057\u305f\u8a18\u9332\n\n## \u6982\u8981\n\nSierra\u3092\u30af\u30ea\u30fc\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u304b\u3089\u74b0\u5883\u6574\u3048\u3088\u3046\u3068\u601d\u3063\u305f\u3002\n\u666e\u901a\u306bphpenv\u3067\u3084\u308d\u3046\u3068\u601d\u3063\u305f\u3051\u3069\u8abf\u3079\u3066\u305f\u3089anyenv\u3068\u3044\u3046\u3082\u306e\u304c\u3042\u308b\u3089\u3057\u3044\u306e\u3067\u4f7f\u3063\u3066\u307f\u308b\u3002\nanyenv\u307e\u308f\u308a\u306f\u57fa\u672c\u306f\u516c\u5f0f\u30b5\u30a4\u30c8\u898b\u3066\u308c\u3070OK\u306a\u306e\u3067\u30e1\u30e2\u4ee3\u308f\u308a\u3002\n\nphp\u306e\u30d3\u30eb\u30c9/\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u95a2\u4fc2\u306f\u3061\u3087\u3044\u3061\u3087\u3044\u30a8\u30e9\u30fc\u3063\u3066\u5927\u5909\u3060\u3063\u305f\u3002\n\n## \u74b0\u5883\n\n* macOS Sierra 10.12.2\n\n```bash\n$ which php\n/usr/bin/php\n$ php -v\nPHP 5.6.27 (cli) (built: Oct 23 2016 11:47:58)\nCopyright (c) 1997-2016 The PHP Group\nZend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies\n```\n\n## anyenv\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u57fa\u672c\u7684\u306b\u306f[anyenv](https://github.com/riywo/anyenv)\u306eREADME\u306e\u901a\u308a\n\n```bash\n$ git clone https://github.com/riywo/anyenv ~/.anyenv\n$ echo 'export PATH=\"$HOME/.anyenv/bin:$PATH\"' >> ~/.bash_profile\n$ echo 'eval \"$(anyenv init -)\"' >> ~/.bash_profile\n$ exec $SHELL -l\n````\n\n### anyenv-update\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nanyenv\u914d\u4e0b\u306e**env\u3001\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u66f4\u65b0\u3092\u884c\u3063\u3066\u304f\u308c\u308b\n\n\u57fa\u672c\u7684\u306b\u306f[anyenv-update](https://github.com/znz/anyenv-update)\u306eREADME\u306e\u901a\u308a\n\n```bash\n$ mkdir -p $(anyenv root)/plugins\n$ git clone https://github.com/znz/anyenv-update.git $(anyenv root)/plugins/anyenv-update\n```\n\n## phpenv\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u3068\u3066\u3082\u7c21\u5358\n\n```bash\n$ anyenv install phpenv\n$ exec $SHELL -l\n```\n\n## PHP7.1\u306e\u30d3\u30eb\u30c9/\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ phpenv install 7.1.0\n```\n\n\u4f55\u3082\u8003\u3048\u305a\u306b\u3084\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\n\n```\n-----------------\n|  BUILD ERROR  |\n-----------------\n\nHere are the last 10 lines from the log:\n\n-----------------------------------------\nconfigure: WARNING: unrecognized options: --with-mysql\nconfigure: WARNING: This bison version is not supported for regeneration of the Zend/PHP parsers (found: 2.3, min: 204, excluded: ).\nconfigure: WARNING: You will need re2c 0.13.4 or later if you want to regenerate PHP parsers.\nconfigure: error: Cannot find OpenSSL's <evp.h>\n-----------------------------------------\n\nThe full Log is available at '/tmp/php-build.7.1.0.20170103124237.log'.\n[Warn]: Aborting build.\n```\n\n### \u72ec\u81ea\u306e\u5b9a\u7fa9\u3092\u4f5c\u6210\u3057\u3001\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b\n\n```bash\n$ cp ~/.anyenv/envs/phpenv/plugins/php-build/share/php-build/definitions/7.1.0 ~/.anyenv/envs/phpenv/plugins/php-build/share/php-build/definitions/my_7.1.0\n$ vim ~/.anyenv/envs/phpenv/plugins/php-build/share/php-build/definitions/my_7.1.0\n```\n\n\n```diff:my_7.1.0\n+ configure_option -D \"--with-mysql\"\n+ configure_option -R \"--with-openssl=/usr/local/opt/openssl\"\ninstall_package \"https://secure.php.net/distributions/php-7.1.0.tar.bz2\"\ninstall_xdebug \"2.5.0\"\nenable_builtin_opcache\n```\n\n\u3092\u30d5\u30a1\u30a4\u30eb\u306e\u5148\u982d\u306b\u8ffd\u52a0\n\u4e0b\u8a18\u306e\u69d8\u306b\u6700\u5f8c\u306b\u8ffd\u52a0\u3057\u3066\u3082\u8a8d\u8b58\u3055\u308c\u306a\u304b\u3063\u305f\n\n```bash\n$ echo configure_option -D \"--with-mysql\" >> ~/.anyenv/envs/phpenv/plugins/php-build/share/php-build/definitions/my_7.1.0\n```\n\n### \u8db3\u308a\u306a\u3044\u3082\u306e\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nlibjpeg\u301clibmcrypt\u306fre2c\u89e3\u6c7a\u3057\u305f\u5f8c\u306b\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\nautoconf,automake\u306f\u305d\u306e\u5f8c\u306b\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\n\n```bash\n$ brew install bison\n$ brew link bison --force\n$ brew install re2c\n$ brew install libjpeg\n$ brew install libpng\n$ brew install libmcrypt\n$ brew install autoconf\n$ brew install automake\n```\n\n### \u518d\u5ea6\u3001\u72ec\u81ea\u5b9a\u7fa9\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n\u3081\u3063\u3061\u3083\u6642\u9593\u304b\u304b\u308b\u306e\u3067\u6687\u3064\u3076\u3057\u3057\u306a\u304c\u3089\n\n```bash\n$ phpenv install my_7.1.0\n[Info]: Loaded extension plugin\n[Info]: Loaded apc Plugin.\n[Info]: Loaded composer Plugin.\n[Info]: Loaded github Plugin.\n[Info]: Loaded uprofiler Plugin.\n[Info]: Loaded xdebug Plugin.\n[Info]: Loaded xhprof Plugin.\n[Info]: Loaded zendopcache Plugin.\n[Info]: php.ini-production gets used as php.ini\n[Info]: Building my_7.1.0 into /Users/hrs/.anyenv/envs/phpenv/versions/my_7.1.0\n[Skipping]: Already downloaded and extracted https://secure.php.net/distributions/php-7.1.0.tar.bz2\n[Preparing]: /var/tmp/php-build/source/my_7.1.0\n[Compiling]: /var/tmp/php-build/source/my_7.1.0\n[xdebug]: Installing version 2.5.0\n[xdebug]: Compiling xdebug in /var/tmp/php-build/source/xdebug-2.5.0\n[xdebug]: Installing xdebug configuration in /Users/hrs/.anyenv/envs/phpenv/versions/my_7.1.0/etc/conf.d/xdebug.ini\n[xdebug]: Cleaning up.\n[Info]: Enabling Opcache...\n[Info]: Done\n[Info]: The Log File is not empty, but the Build did not fail. Maybe just warnings got logged. You can review the log in /tmp/php-build.my_7.1.0.20170103152042.log\n[Success]: Built my_7.1.0 successfully.\n$ phpenv rehash\n$ phpenv versions\n* system (set by /Users/hrs/.anyenv/envs/phpenv/version)\n  my_7.1.0\n```\n\n### \u4f7f\u7528\u3059\u308bPHP\u306e\u5207\u308a\u66ff\u3048\n\n```bash\n$ phpenv global my_7.1.0\nmy_7.1.0\n$ php -v\nPHP 7.1.0 (cli) (built: Jan  3 2017 15:32:50) ( NTS )\nCopyright (c) 1997-2016 The PHP Group\nZend Engine v3.1.0-dev, Copyright (c) 1998-2016 Zend Technologies\n    with Zend OPcache v7.1.0, Copyright (c) 1999-2016, by Zend Technologies\n    with Xdebug v2.5.0, Copyright (c) 2002-2016, by Derick Rethans\n```\n\n## \u53c2\u8003\n\n* [anyenv + phpenv + php-build \u304c\u4fbf\u5229\u3059\u304e\u308b\u4ef6](http://www.slideshare.net/y-uti/anyenv-phpenv-phpbuild)\n* [ubuntu\u306bphp-build\u3067php5.5\u3092\u5165\u308c\u308b\u305f\u3081\u306b\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3068\u683c\u95d8\u3057\u305f\u8a18\u9332](http://hirobanex.net/article/2013/09/1379231000)\n"}