{"tags": ["chrome-extension", "JavaScript"], "context": " More than 1 year has passed since last update.\u4f1a\u793e\u3067\u4f7f\u3063\u3066\u308b\u30c4\u30fc\u30eb\u3067select\u306e\u4e2d\u8eab(dropdown)\u304c\u5927\u91cf\u306b\u51fa\u3066\u304f\u308b\u30da\u30fc\u30b8\u304c\u3042\u3063\u3066\u3001\n\u6bce\u5ea6\u63a2\u3059\u306e\u304c\u8f9b\u3044\u306e\u3067\u8abf\u3079\u307e\u3057\u305f\u3002\nhttps://chrome.google.com/webstore/detail/select-filter/pakilipafnfgghkpekpnkbfgjdmodmai?hl=ja\n\u3067\u300cCHROME\u306b\u8ffd\u52a0\u300d\u3059\u308c\u3070\u5404\u30da\u30fc\u30b8\u5185\u306eselect\u304c\u30d5\u30a3\u30eb\u30bf\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u305f\u3060\u3001\u3069\u306e\u30da\u30fc\u30b8\u3067\u3082\u4f7f\u3048\u308b\u304b\u3069\u3046\u304b\u306f\u602a\u3057\u3044\u3067\u3059\u306d\u3002\n\u5358\u7d14\u306boption\u3092\u7d5e\u308a\u8fbc\u3093\u3067\u308b\u306e\u3067selectedIndex\u3067\u7ba1\u7406\u3059\u308b\u3088\u3046\u306bjavascript\u7d44\u307e\u308c\u3066\u305f\u3089NG\u3060\u3057\u3001\n\u52d5\u7684\u306b\u751f\u6210\u3055\u308c\u305fselect\u306b\u306f\u9069\u7528\u3067\u304d\u306a\u3044\u52d5\u4f5c\u3057\u3066\u3044\u308b\u6c17\u304c\u3057\u307e\u3059\u3002\n\u3042\u3068\u3001\u591a\u304fselect\u304c\u914d\u7f6e\u3055\u308c\u3066\u3044\u308b\u30da\u30fc\u30b8\u3067\u306e\u5229\u7528\u306f\u5c11\u3057\u8f9b\u3044\u3067\u3059\u3002\n\u306a\u306e\u3067\u8a66\u3057\u306b\u904a\u3073\u3067\u81ea\u4f5c\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u81ea\u4f5c\u3059\u308b\u306e\u306b\u53c2\u8003\u306b\u3057\u305f\u30da\u30fc\u30b8\u306f\u4e0b\u8a18\u3067\u3059\u3002\nhttp://qiita.com/suin/items/5e1aa942e654bce442f7\n\n\u30d5\u30a1\u30a4\u30eb\u69cb\u6210\n\u251cicons\n\u2502\u251cicon16.png\n\u2502\u251cicon48.png\n\u2502\u2514icon128.png\n\u251cmanifest.json\n\u2514selectbox-filter.js\n\nicon\u306f\u3044\u3044\u611f\u3058\u306b\u4f5c\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\nmanifest.json\n\nmanifest.json\n{\n  \"name\": \"Select options filter\",\n  \"version\": \"0.0.1\",\n  \"manifest_version\": 2,\n  \"description\": \"select\u3092Ctrl+Click\u3059\u308b\u3068\u30d5\u30a3\u30eb\u30bf\u30e2\u30fc\u30c9\u306b\u306a\u308a\u307e\u3059\",\n  \"icons\": {\n    \"16\": \"icons/icon16.png\",\n    \"48\": \"icons/icon48.png\",\n    \"128\": \"icons/icon128.png\"\n  },\n  \"content_scripts\": [\n    {\n      \"matches\": [\n        \"<all_urls>\"\n      ],\n      \"js\": [\n        \"selectbox-filter.js\"\n      ]\n    }\n  ],\n  \"web_accessible_resources\": [\n    \"icons/icon16.png\"\n  ],\n  \"permissions\": [\n    \"<all_urls>\"\n  ]\n}\n\n\ncontent_scripts\u306b\u66f8\u304f\u3068\u30da\u30fc\u30b8\u64cd\u4f5c\u3067\u304d\u308b\u307f\u305f\u3044\u3067\u3059\u3002\nweb_accessible_resources\u306b\u8a18\u8f09\u3059\u308b\u3068\u3001chrome.extension.getURL()\u3067\u306eURL\u304c\u4f7f\u3048\u308b\u69d8\u5b50\u3067\u3059\u3002\n\nselectbox-filter.js\n\nselectbox-filter.js\n(function() {\n  'use strict';\n  let input = document.createElement('input');\n  input.setAttribute('placeholder', 'enter filter keyword');\n  input.style.backgroundImage = 'url(\"' + chrome.extension.getURL('/icons/icon16.png') + '\")';\n  input.style.backgroundRepeat = 'no-repeat';\n  input.style.backgroundPosition = 'right';\n  let select;\n  //document\u306eclick\u306b\u30a4\u30d9\u30f3\u30c8\u767b\u9332\n  document.addEventListener('click', function(e) {\n    if (e.ctrlKey && e.target.tagName.toLowerCase() === 'select') {//Ctrl+Click\u3000\u304b\u3064\u3000select\u304cClick\u3055\u308c\u305f\u5834\u5408\u30d5\u30a3\u30eb\u30bf\u30e2\u30fc\u30c9\u958b\u59cb\n      select = e.target;\n      input.value = '';\n      select.parentElement.insertBefore(input, select);\n      input.focus();\n    }\n  });\n  input.addEventListener('keyup', function() {\n    let value = input.value;\n    let options = select.getElementsByTagName('option');\n    let match = value ? function(option) {\n      return option.textContent.indexOf(value) > -1;\n    } : function(option) {\n      return true;\n    };\n    let dispOpt = [];\n    for (var i = 0; i < options.length; i++) {\n      if (match(options[i])) {\n        options[i].style.display = '';//display\u3067\u30d5\u30a3\u30eb\u30bf\u5236\u5fa1\n        dispOpt.push(i);\n      } else {\n        options[i].style.display = 'none';//display\u3067\u30d5\u30a3\u30eb\u30bf\u5236\u5fa1\n      }\n      if (options[i].textContent === value) {//\u5b8c\u5168\u4e00\u81f4\u304c\u3042\u3063\u305f\u306a\u3089\u9078\u629e\u3055\u305b\u308b\n        select.selectedIndex = i;\n      }\n    }\n    if (dispOpt.length === 1) {//\u30d5\u30a3\u30eb\u30bf\u3057\u305f\u7d50\u679c\u304c1\u4ef6\u306a\u3089\u9078\u629e\u3055\u305b\u308b\n      select.selectedIndex = dispOpt[0];\n    }\n  });\n})();\n\n\n\n\n\u52d5\u4f5c\nselect\u3092Ctrl\u62bc\u3057\u306a\u304c\u3089Click\u3059\u308b\u3068\u30d5\u30a3\u30eb\u30bf\u7528\u306einput\u304c\u6a2a\u306b\u51fa\u3066\u304d\u3066\u3001\u5165\u529b\u3059\u308b\u3068\u3001select\u306e\u4e2d\u8eab\u304c\u7d5e\u3089\u308c\u307e\u3059\u3002\n\u5de6\u304b\u3089\u3001\u901a\u5e38\u2192Ctrl+Click\u3057\u305f\u3042\u3068\u2192\u5165\u529b\u3057\u305f\u5f8c\u306eselect\u306e\u72b6\u614b\n\n\n\u3084\u308a\u305f\u304b\u3063\u305f\u3053\u3068\n\ndisplay\u3067\u30d5\u30a3\u30eb\u30bf\u3059\u308b\u306e\u3067selectedIndex\u3092\u6c5a\u3055\u306a\u3044\uff08\u306f\u305a\uff09\n\u4e00\u3064\u306eselect\u306b\u5bfe\u3057\u3066\u3060\u3051input\u3092\u8868\u793a\u3059\u308b\u306e\u3067\u30da\u30fc\u30b8\u304c\u5927\u304d\u304f\u5d29\u308c\u306a\u3044\u3002\ndocument\u306e\u30af\u30ea\u30c3\u30af\u30a4\u30d9\u30f3\u30c8\u3067\u5236\u5fa1\u3059\u308b\u306e\u3067\u8ffd\u52a0\u3067\u914d\u7f6e\u3055\u308c\u305fselect\u3067\u3082\u52d5\u4f5c\u3059\u308b\u3002\n\n\n\u5165\u624b\n\u4f5c\u6210\u3057\u305f\u3082\u306e\u3092webstore\u306b\u516c\u958b\u3057\u307e\u3057\u305f\u3002\nhttps://chrome.google.com/webstore/detail/select-box-filter/ohgdgoglcbcfofphmmnkkdbpffklhjgh\n\u30bd\u30fc\u30b9\u306fgithub\u306b\u3042\u3052\u3066\u3044\u307e\u3059\u3002\nhttps://github.com/ota-meshi/chromeextension_selectbox_filter\n\u4f1a\u793e\u3067\u4f7f\u3063\u3066\u308b\u30c4\u30fc\u30eb\u3067select\u306e\u4e2d\u8eab(dropdown)\u304c\u5927\u91cf\u306b\u51fa\u3066\u304f\u308b\u30da\u30fc\u30b8\u304c\u3042\u3063\u3066\u3001\n\u6bce\u5ea6\u63a2\u3059\u306e\u304c\u8f9b\u3044\u306e\u3067\u8abf\u3079\u307e\u3057\u305f\u3002\n\nhttps://chrome.google.com/webstore/detail/select-filter/pakilipafnfgghkpekpnkbfgjdmodmai?hl=ja\n\n\u3067\u300cCHROME\u306b\u8ffd\u52a0\u300d\u3059\u308c\u3070\u5404\u30da\u30fc\u30b8\u5185\u306eselect\u304c\u30d5\u30a3\u30eb\u30bf\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u305f\u3060\u3001\u3069\u306e\u30da\u30fc\u30b8\u3067\u3082\u4f7f\u3048\u308b\u304b\u3069\u3046\u304b\u306f\u602a\u3057\u3044\u3067\u3059\u306d\u3002\n\u5358\u7d14\u306boption\u3092\u7d5e\u308a\u8fbc\u3093\u3067\u308b\u306e\u3067selectedIndex\u3067\u7ba1\u7406\u3059\u308b\u3088\u3046\u306bjavascript\u7d44\u307e\u308c\u3066\u305f\u3089NG\u3060\u3057\u3001\n\u52d5\u7684\u306b\u751f\u6210\u3055\u308c\u305fselect\u306b\u306f\u9069\u7528\u3067\u304d\u306a\u3044\u52d5\u4f5c\u3057\u3066\u3044\u308b\u6c17\u304c\u3057\u307e\u3059\u3002\n\u3042\u3068\u3001\u591a\u304fselect\u304c\u914d\u7f6e\u3055\u308c\u3066\u3044\u308b\u30da\u30fc\u30b8\u3067\u306e\u5229\u7528\u306f\u5c11\u3057\u8f9b\u3044\u3067\u3059\u3002\n\n\u306a\u306e\u3067\u8a66\u3057\u306b\u904a\u3073\u3067\u81ea\u4f5c\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u81ea\u4f5c\u3059\u308b\u306e\u306b\u53c2\u8003\u306b\u3057\u305f\u30da\u30fc\u30b8\u306f\u4e0b\u8a18\u3067\u3059\u3002\nhttp://qiita.com/suin/items/5e1aa942e654bce442f7\n\n# \u30d5\u30a1\u30a4\u30eb\u69cb\u6210\n```\n\u251cicons\n\u2502\u251cicon16.png\n\u2502\u251cicon48.png\n\u2502\u2514icon128.png\n\u251cmanifest.json\n\u2514selectbox-filter.js\n```\n\nicon\u306f\u3044\u3044\u611f\u3058\u306b\u4f5c\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n# manifest.json\n```json:manifest.json\n{\n  \"name\": \"Select options filter\",\n  \"version\": \"0.0.1\",\n  \"manifest_version\": 2,\n  \"description\": \"select\u3092Ctrl+Click\u3059\u308b\u3068\u30d5\u30a3\u30eb\u30bf\u30e2\u30fc\u30c9\u306b\u306a\u308a\u307e\u3059\",\n  \"icons\": {\n    \"16\": \"icons/icon16.png\",\n    \"48\": \"icons/icon48.png\",\n    \"128\": \"icons/icon128.png\"\n  },\n  \"content_scripts\": [\n    {\n      \"matches\": [\n        \"<all_urls>\"\n      ],\n      \"js\": [\n        \"selectbox-filter.js\"\n      ]\n    }\n  ],\n  \"web_accessible_resources\": [\n    \"icons/icon16.png\"\n  ],\n  \"permissions\": [\n    \"<all_urls>\"\n  ]\n}\n```\ncontent_scripts\u306b\u66f8\u304f\u3068\u30da\u30fc\u30b8\u64cd\u4f5c\u3067\u304d\u308b\u307f\u305f\u3044\u3067\u3059\u3002\nweb_accessible_resources\u306b\u8a18\u8f09\u3059\u308b\u3068\u3001chrome.extension.getURL()\u3067\u306eURL\u304c\u4f7f\u3048\u308b\u69d8\u5b50\u3067\u3059\u3002\n\n# selectbox-filter.js\n```js:selectbox-filter.js\n(function() {\n  'use strict';\n  let input = document.createElement('input');\n  input.setAttribute('placeholder', 'enter filter keyword');\n  input.style.backgroundImage = 'url(\"' + chrome.extension.getURL('/icons/icon16.png') + '\")';\n  input.style.backgroundRepeat = 'no-repeat';\n  input.style.backgroundPosition = 'right';\n  let select;\n  //document\u306eclick\u306b\u30a4\u30d9\u30f3\u30c8\u767b\u9332\n  document.addEventListener('click', function(e) {\n    if (e.ctrlKey && e.target.tagName.toLowerCase() === 'select') {//Ctrl+Click\u3000\u304b\u3064\u3000select\u304cClick\u3055\u308c\u305f\u5834\u5408\u30d5\u30a3\u30eb\u30bf\u30e2\u30fc\u30c9\u958b\u59cb\n      select = e.target;\n      input.value = '';\n      select.parentElement.insertBefore(input, select);\n      input.focus();\n    }\n  });\n  input.addEventListener('keyup', function() {\n    let value = input.value;\n    let options = select.getElementsByTagName('option');\n    let match = value ? function(option) {\n      return option.textContent.indexOf(value) > -1;\n    } : function(option) {\n      return true;\n    };\n    let dispOpt = [];\n    for (var i = 0; i < options.length; i++) {\n      if (match(options[i])) {\n        options[i].style.display = '';//display\u3067\u30d5\u30a3\u30eb\u30bf\u5236\u5fa1\n        dispOpt.push(i);\n      } else {\n        options[i].style.display = 'none';//display\u3067\u30d5\u30a3\u30eb\u30bf\u5236\u5fa1\n      }\n      if (options[i].textContent === value) {//\u5b8c\u5168\u4e00\u81f4\u304c\u3042\u3063\u305f\u306a\u3089\u9078\u629e\u3055\u305b\u308b\n        select.selectedIndex = i;\n      }\n    }\n    if (dispOpt.length === 1) {//\u30d5\u30a3\u30eb\u30bf\u3057\u305f\u7d50\u679c\u304c1\u4ef6\u306a\u3089\u9078\u629e\u3055\u305b\u308b\n      select.selectedIndex = dispOpt[0];\n    }\n  });\n})();\n\n```\n\n# \u52d5\u4f5c\nselect\u3092Ctrl\u62bc\u3057\u306a\u304c\u3089Click\u3059\u308b\u3068\u30d5\u30a3\u30eb\u30bf\u7528\u306einput\u304c\u6a2a\u306b\u51fa\u3066\u304d\u3066\u3001\u5165\u529b\u3059\u308b\u3068\u3001select\u306e\u4e2d\u8eab\u304c\u7d5e\u3089\u308c\u307e\u3059\u3002\n\n\u5de6\u304b\u3089\u3001\u901a\u5e38\u2192Ctrl+Click\u3057\u305f\u3042\u3068\u2192\u5165\u529b\u3057\u305f\u5f8c\u306eselect\u306e\u72b6\u614b\n![\u30b9\u30af\u30b7\u30e7.jpg](https://qiita-image-store.s3.amazonaws.com/0/84259/425c650e-59de-173e-7757-300df1d75685.jpeg)\n\n# \u3084\u308a\u305f\u304b\u3063\u305f\u3053\u3068\n* display\u3067\u30d5\u30a3\u30eb\u30bf\u3059\u308b\u306e\u3067selectedIndex\u3092\u6c5a\u3055\u306a\u3044\uff08\u306f\u305a\uff09\n* \u4e00\u3064\u306eselect\u306b\u5bfe\u3057\u3066\u3060\u3051input\u3092\u8868\u793a\u3059\u308b\u306e\u3067\u30da\u30fc\u30b8\u304c\u5927\u304d\u304f\u5d29\u308c\u306a\u3044\u3002\n* document\u306e\u30af\u30ea\u30c3\u30af\u30a4\u30d9\u30f3\u30c8\u3067\u5236\u5fa1\u3059\u308b\u306e\u3067\u8ffd\u52a0\u3067\u914d\u7f6e\u3055\u308c\u305fselect\u3067\u3082\u52d5\u4f5c\u3059\u308b\u3002\n\n\n# \u5165\u624b\n\u4f5c\u6210\u3057\u305f\u3082\u306e\u3092webstore\u306b\u516c\u958b\u3057\u307e\u3057\u305f\u3002\nhttps://chrome.google.com/webstore/detail/select-box-filter/ohgdgoglcbcfofphmmnkkdbpffklhjgh\n\n\u30bd\u30fc\u30b9\u306fgithub\u306b\u3042\u3052\u3066\u3044\u307e\u3059\u3002\nhttps://github.com/ota-meshi/chromeextension_selectbox_filter\n"}