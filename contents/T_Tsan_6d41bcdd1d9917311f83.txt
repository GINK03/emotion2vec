{"context": " More than 1 year has passed since last update.\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum -y install openldap-servers openldap-clients\n\n\nOpenLDAP\u30b5\u30fc\u30d0\u30fc\u306b\u30c7\u30fc\u30bf\u3092\u767b\u9332\u3059\u308b\u969b\u306e\u300cldapadd\u300d\u30b3\u30de\u30f3\u30c9\u3084\u691c\u7d22\u7528\u306e\u300cldapsearch\u300d\u30b3\u30de\u30f3\u30c9\u306f\u300copenldap-clients\u300d\u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u5165\u3063\u3066\u3044\u308b\n\u305d\u306e\u305f\u3081\u3001OpenLDAP\u30b5\u30fc\u30d0\u30fc\u306e\u307f\u3067\u3042\u3063\u3066\u3082\u3001\u300copenldap-clients\u300d\u30d1\u30c3\u30b1\u30fc\u30b8\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u3053\u3068\n\n\n\u521d\u671f\u8a2d\u5b9a\u524a\u9664\nrm -rf /etc/openldap/slapd.d/*\nrm -rf /var/lib/ldap/*\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30b3\u30d4\u30fc\ncp -a /usr/share/openldap-servers/DB_CONFIG.example /var/lib/ldap/DB_CONFIG\nchown ldap. /var/lib/ldap/DB_CONFIG\ncp -a /usr/share/openldap-servers/slapd.conf.obsolete /etc/openldap/slapd.conf\n\n\n\u30de\u30b9\u30bf\u30fc\u30d1\u30b9\u30ef\u30fc\u30c9\u4f5c\u6210\nslappasswd -s pass\n\n\n{SSHA}fCkF7qPmO1cnQsPun1fixcrhCNP+Kerd\n\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7de8\u96c6\n\n/etc/openldap/slapd.conf\n# \u30b9\u30ad\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u8a2d\u5b9a\ninclude /etc/openldap/schema/corba.schema\ninclude /etc/openldap/schema/core.schema\ninclude /etc/openldap/schema/cosine.schema\ninclude /etc/openldap/schema/duaconf.schema\ninclude /etc/openldap/schema/dyngroup.schema\ninclude /etc/openldap/schema/inetorgperson.schema\ninclude /etc/openldap/schema/java.schema\ninclude /etc/openldap/schema/misc.schema\ninclude /etc/openldap/schema/nis.schema\ninclude /etc/openldap/schema/openldap.schema\ninclude /etc/openldap/schema/ppolicy.schema\ninclude /etc/openldap/schema/collective.schema\n\n# \u63a5\u7d9a\u30d7\u30ed\u30c8\u30b3\u30eb\nallow bind_v2\n\n# \u7ba1\u7406\u30d5\u30a1\u30a4\u30eb\npidfile     /var/run/openldap/slapd.pid\nargsfile    /var/run/openldap/slapd.args\n\n# TLS\u8a2d\u5b9a\n#TLSCACertificatePath  /etc/openldap/ssl/cacert.pem\n#TLSCertificateFile    /etc/openldap/ssl/server.crt\n#TLSCertificateKeyFile /etc/openldap/ssl/server.key\n\n# userPassword\u306b\u95a2\u3059\u308b\u30a2\u30af\u30bb\u30b9\u6a29\naccess to attrs=userPassword\n    by self write\n    by dn=\"cn=Manager,dc=example,dc=com\" write\n    by anonymous auth\n    by * none\n\n# \u305d\u306e\u4ed6\u306e\u5c5e\u6027\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u6a29\naccess to *\n    by self write\n    by dn=\"cn=Manager,dc=example,dc=com\" write\n    by * read\n\n# monitor\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u6a29\ndatabase monitor\naccess to *\n    by dn.exact=\"cn=Manager,dc=example,dc=com\" read\n    by * none\n\n# \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u5b9a\ndatabase    bdb\nsuffix      \"dc=example,dc=com\"\ncheckpoint  1024 15\nrootdn      \"cn=Manager,dc=example,dc=com\"\nrootpw      {SSHA}fCkF7qPmO1cnQsPun1fixcrhCNP+Kerd\ndirectory   /var/lib/ldap\n\n# index\u306e\u8a2d\u5b9a\nindex objectClass                       eq,pres\nindex ou,cn,mail,surname,givenname      eq,pres,sub\nindex uidNumber,gidNumber,loginShell    eq,pres\nindex uid,memberUid                     eq,pres,sub\nindex nisMapName,nisMapEntry            eq,pres,sub\n\n\n\n\u8a2d\u5b9a\u306e\u30c6\u30b9\u30c8\nsudo -u ldap slaptest -u -v -f /etc/openldap/slapd.conf\n\n\nconfig file testing succeeded\n\n\n\n/etc/openldap/slapd.d/ \u306e\u66f4\u65b0\nsudo -u ldap slaptest -f /etc/openldap/slapd.conf -F /etc/openldap/slapd.d\n\n\n\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u304c\u7121\u8996\u3059\u308b\nbdb_db_open: database \"dc=example,dc=com\": db_open(/var/lib/ldap/id2entry.bdb) failed: No such file or directory (2).\nbackend_startup_one (type=bdb, suffix=\"dc=example,dc=com\"): bi_db_open failed! (2)\nslap_startup failed (test would succeed using the -u switch)\n\n\n\nLDAP\u8d77\u52d5\n/etc/init.d/slapd start\nchkconfig slapd on\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```shell-session\nyum -y install openldap-servers openldap-clients\n```\n> OpenLDAP\u30b5\u30fc\u30d0\u30fc\u306b\u30c7\u30fc\u30bf\u3092\u767b\u9332\u3059\u308b\u969b\u306e\u300cldapadd\u300d\u30b3\u30de\u30f3\u30c9\u3084\u691c\u7d22\u7528\u306e\u300cldapsearch\u300d\u30b3\u30de\u30f3\u30c9\u306f\u300copenldap-clients\u300d\u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u5165\u3063\u3066\u3044\u308b\n> \u305d\u306e\u305f\u3081\u3001OpenLDAP\u30b5\u30fc\u30d0\u30fc\u306e\u307f\u3067\u3042\u3063\u3066\u3082\u3001\u300copenldap-clients\u300d\u30d1\u30c3\u30b1\u30fc\u30b8\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u3053\u3068\n\n## \u521d\u671f\u8a2d\u5b9a\u524a\u9664\n```shell-session\nrm -rf /etc/openldap/slapd.d/*\nrm -rf /var/lib/ldap/*\n```\n\n## \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30b3\u30d4\u30fc\n```shell-session\ncp -a /usr/share/openldap-servers/DB_CONFIG.example /var/lib/ldap/DB_CONFIG\nchown ldap. /var/lib/ldap/DB_CONFIG\ncp -a /usr/share/openldap-servers/slapd.conf.obsolete /etc/openldap/slapd.conf\n```\n\n## \u30de\u30b9\u30bf\u30fc\u30d1\u30b9\u30ef\u30fc\u30c9\u4f5c\u6210\n```shell-session\nslappasswd -s pass\n```\n>\n```shell-session\n{SSHA}fCkF7qPmO1cnQsPun1fixcrhCNP+Kerd\n```\n\n## \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7de8\u96c6\n```shell-session:/etc/openldap/slapd.conf\n# \u30b9\u30ad\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u8a2d\u5b9a\ninclude /etc/openldap/schema/corba.schema\ninclude /etc/openldap/schema/core.schema\ninclude /etc/openldap/schema/cosine.schema\ninclude /etc/openldap/schema/duaconf.schema\ninclude /etc/openldap/schema/dyngroup.schema\ninclude /etc/openldap/schema/inetorgperson.schema\ninclude /etc/openldap/schema/java.schema\ninclude /etc/openldap/schema/misc.schema\ninclude /etc/openldap/schema/nis.schema\ninclude /etc/openldap/schema/openldap.schema\ninclude /etc/openldap/schema/ppolicy.schema\ninclude /etc/openldap/schema/collective.schema\n\n# \u63a5\u7d9a\u30d7\u30ed\u30c8\u30b3\u30eb\nallow bind_v2\n\n# \u7ba1\u7406\u30d5\u30a1\u30a4\u30eb\npidfile     /var/run/openldap/slapd.pid\nargsfile    /var/run/openldap/slapd.args\n\n# TLS\u8a2d\u5b9a\n#TLSCACertificatePath  /etc/openldap/ssl/cacert.pem\n#TLSCertificateFile    /etc/openldap/ssl/server.crt\n#TLSCertificateKeyFile /etc/openldap/ssl/server.key\n\n# userPassword\u306b\u95a2\u3059\u308b\u30a2\u30af\u30bb\u30b9\u6a29\naccess to attrs=userPassword\n    by self write\n    by dn=\"cn=Manager,dc=example,dc=com\" write\n    by anonymous auth\n    by * none\n\n# \u305d\u306e\u4ed6\u306e\u5c5e\u6027\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u6a29\naccess to *\n    by self write\n    by dn=\"cn=Manager,dc=example,dc=com\" write\n    by * read\n\n# monitor\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u6a29\ndatabase monitor\naccess to *\n    by dn.exact=\"cn=Manager,dc=example,dc=com\" read\n    by * none\n\n# \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u5b9a\ndatabase    bdb\nsuffix      \"dc=example,dc=com\"\ncheckpoint  1024 15\nrootdn      \"cn=Manager,dc=example,dc=com\"\nrootpw      {SSHA}fCkF7qPmO1cnQsPun1fixcrhCNP+Kerd\ndirectory   /var/lib/ldap\n\n# index\u306e\u8a2d\u5b9a\nindex objectClass                       eq,pres\nindex ou,cn,mail,surname,givenname      eq,pres,sub\nindex uidNumber,gidNumber,loginShell    eq,pres\nindex uid,memberUid                     eq,pres,sub\nindex nisMapName,nisMapEntry            eq,pres,sub\n```\n\n## \u8a2d\u5b9a\u306e\u30c6\u30b9\u30c8\n```shell-session\nsudo -u ldap slaptest -u -v -f /etc/openldap/slapd.conf\n```\n>\n```shell-session\nconfig file testing succeeded\n```\n\n## /etc/openldap/slapd.d/ \u306e\u66f4\u65b0\n```shell-session:\nsudo -u ldap slaptest -f /etc/openldap/slapd.conf -F /etc/openldap/slapd.d\n```\n> \u30a8\u30e9\u30fc\u304c\u51fa\u308b\u304c\u7121\u8996\u3059\u308b\n>\n```shell-session\nbdb_db_open: database \"dc=example,dc=com\": db_open(/var/lib/ldap/id2entry.bdb) failed: No such file or directory (2).\nbackend_startup_one (type=bdb, suffix=\"dc=example,dc=com\"): bi_db_open failed! (2)\nslap_startup failed (test would succeed using the -u switch)\n```\n\n## LDAP\u8d77\u52d5\n```shell-session\n/etc/init.d/slapd start\nchkconfig slapd on\n```", "tags": ["CentOS6.5", "openldap2.4.23-34", "openssl1.0.1e-16", "OpenSSH5.3p1-94"]}