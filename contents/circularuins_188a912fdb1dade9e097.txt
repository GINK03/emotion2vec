{"context": "\n\n\u306f\u3058\u3081\u306b\n\u307f\u3093\u306a\u5927\u597d\u304d\u3001Clojure\u3067Web\u30a2\u30d7\u30ea\u306e\u304a\u8a71\u3067\u3059\u3002\nClojrue\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3068\u304b\u3088\u304f\u308f\u304b\u3089\u306a\u304f\u3066\u3082\u3001HTML\u3058\u3083\u306a\u304f\u3066JSON\u3092\u8fd4\u3059\u3088\u3046\u306b\u3059\u308c\u3070\u3001JS\u3068\u7d44\u307f\u5408\u308f\u305b\u3066\u30ab\u30c3\u30b3\u30a4\u30a4\u30b5\u30a4\u30c8\u304c\u7c21\u5358\u306b\u3067\u304d\u3061\u3083\u3044\u307e\u3059\u306d\uff01\n\u4eca\u56de\u306f\u3001\u306f\u3084\u308a\u306ed3.js\u3092\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\u6ce8\uff1aLeiningen\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\u3068\u304bd3.js\u306e\u8a2d\u7f6e\u3068\u3044\u3063\u305f\u57fa\u672c\u7684\u306a\u8aac\u660e\u306f\u7701\u304d\u307e\u3059m(_ _)m\n\n\u74b0\u5883\n\nclojure 1.6.0\nLeiningen 2.4.2\nJava 1.8.0\n\n\n\u57fa\u672c\u69cb\u6210\nhoge-app\n\u251c\u2500\u2500 project.clj \u2460\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\n\u251c\u2500\u2500 resources \u2463\u9759\u7684\u30ea\u30bd\u30fc\u30b9\u3092\u914d\u7f6e\n   \u2514\u2500\u2500 public\n       \u2514\u2500\u2500 assets\n     \u00a0   \u00a0 \u2514\u2500\u2500 css\n     \u00a0\u00a0     \u00a0\u00a0 \u2514\u2500\u2500 hogehoge.css\n       \u251c\u2500\u2500 demo\n       \u2502\u00a0\u00a0 \u2514\u2500\u2500 hogehoge.html \u2464JSON\u3092\u53d7\u3051\u53d6\u308bd3\n       \u2514\u2500\u2500 index.html\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 hoge_app\n        \u251c\u2500\u2500 core.clj \u2461\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3068\u304b\n        \u2514\u2500\u2500 hogehoge.clj \u2462\u30de\u30c3\u30d7\u3092\u8fd4\u3059\u30af\u30e9\u30b9\n\n\n\u89e3\u8aac\n\n\u2460\u4f7f\u7528\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u3069\n\nproject.clj\n :dependencies [[org.clojure/clojure \"1.6.0\"]\n                 [ring/ring-core \"1.3.0\"]\n                 [ring/ring-jetty-adapter \"1.3.0\"]\n                 [compojure \"1.1.8\"]\n                 [cheshire \"5.3.1\"]]\n :dev-dependencies [[ring/ring-devel \"1.3.0\"]]\n :plugins [[lein-ring \"0.8.11\"]]\n :main hoge-app.core\n :ring {:handler hoge-app.core/app}\n\n\n\nring\nRuby\u306eRack\u306b\u76f8\u5f53\u3059\u308bWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30e9\u30a4\u30d6\u30e9\u30ea\u30bb\u30c3\u30c8\nring-jetty-adapter\nlein\u30b3\u30de\u30f3\u30c9\u304b\u3089ring\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3067\u304d\u308b\ncompojure\nring\u5bfe\u5fdc\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30e9\u30a4\u30d6\u30e9\u30ea\ncheshire\nJSON\u30a8\u30f3\u30b3\u30fc\u30c0\u30fc\n\n\n\u2461\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3001JSON\u5909\u63db\u3001\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u306a\u3069\n\ncore.clj\n(ns hoge-app.core\n  (:use [compojure.core]\n        [ring.util.response]\n        [ring.middleware.content-type]\n        [ring.middleware.params])\n  (:require [ring.adapter.jetty :as jetty]\n            [cheshire.core :as json]\n            [compojure.route :as route]\n            [compojure.handler :as handler]\n            [hoge-app.hogehoge :as hogehoge]))\n\n(defn json-response [data & [status]]\n  {:status (or status 200)\n   :headers {\"Content-Type\" \"application/json\"}\n   :body (json/generate-string data)})\n\n(defroutes api-routes\n  (GET \"/demo/d3/hogehoge\" []\n       (json-response (hogehoge/return-map))) ;---\u2460\n  (route/resources \"/\") ;---\u2461\n  (route/files \"/demo/\" {:root \"demo\"}) ;---\u2462\n  (route/not-found \"Page not found\"))\n\n(defn wrap-dir-index\n  [handler]\n  (fn [req]\n    (handler (update-in req [:uri] #(if (= \"/\" %) \"/index.html\" %)))))\n\n(def app (-> api-routes\n             wrap-params\n             wrap-content-type\n             wrap-dir-index\n             handler/site))\n\n(defn -main\n  [& args]\n  (let [port (or (first *command-line-args*) 8080)]\n    (jetty/run-jetty app {:port port})))\n\n\n\njson-response\nclojure\u306e\u30de\u30c3\u30d7\u3092\u53d7\u3051\u53d6\u3063\u3066\u3001JSON\u5f62\u5f0f\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3059\u95a2\u6570cheshire\u306egenerate-string\u30e1\u30bd\u30c3\u30c9\u3067\u3001\u30de\u30c3\u30d7\u3092JSON\u306b\u5909\u63db\u3059\u308b\n\napi-routes\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u8a2d\u5b9a\u3002\u2460\u306fJSON\u3092\u5f97\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u8a2d\u5b9a\u3002hogehoge\u30af\u30e9\u30b9\u306ereturn-map\u30e1\u30bd\u30c3\u30c9\u3092\"/demo/d3/hogehoge\"\u306b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\uff08\u30e1\u30bd\u30c3\u30c9\u306e\u623b\u308a\u5024\u306f\u4e0a\u8a18\u306ejson-response\u3067JSON\u5316\uff09\u3002\u2461\u306f\u9759\u7684\u30ea\u30bd\u30fc\u30b9\u306e\u30eb\u30fc\u30c8\u3002\u2462\u3067/demo/\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u30a2\u30af\u30bb\u30b9\u3092\u53ef\u80fd\u306b\u3059\u308b\nwrap-dir-index\n\"/\"\u3067index.html\u3092\u8868\u793a\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\uff08\u4eca\u56de\u306e\u4e3b\u984c\u3068\u306f\u3042\u307e\u308a\u95a2\u4fc2\u306a\u3044\u2026\uff09\napp\nthread\u30de\u30af\u30ed\u3067\u4e0a\u8a18\u95a2\u6570\u7fa4\u3092\u307e\u3068\u3081\u308b\n-main\n\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\n\n\n\u2462\u30de\u30c3\u30d7\u3092\u8fd4\u3059hogehoge\u30af\u30e9\u30b9\n\nhogehoge.clj\n(ns hoge-app.hogehoge)\n\n(def sample-data [[\"hoge\" [[\"1/1/1\" 10 ]\n                           [\"2/2/2\" 20 ]]\n                  [\"piyo\" [[\"3/3/3\" 30]\n                           [\"4/4/4\" 40 ]]])\n\n(defn make-map-seq [data]\n  (map #(array-map :age (get % 0) :power (get % 1)) data))\n\n(defn merge-to-map [data]\n  (apply merge (map #(array-map (keyword (get % 0)) (make-map-seq (get % 1))) data)))\n\n(def hogehoge-map (merge-to-map sample-data))\n\n(defn return-map []\n  hogehoge-map)\n\n\n\u3053\u3053\u306f\u305f\u3060\u306e\u4f8b\u3067\u3059\u3002\u672c\u984c\u304b\u3089\u3061\u3087\u3063\u3068\u8131\u7dda\u3057\u307e\u3059\uff01\uff01\n\u6700\u7d42\u7684\u306b\u30de\u30c3\u30d7\u3092\u8fd4\u305b\u3070\u826f\u3044\u3002\n\u3053\u3053\u3067\u306f\u3001\n1. \u591a\u6b21\u5143\u914d\u5217\u306esample-data\u3092\u3001\n2. make-map-seq\u3067\u30de\u30c3\u30d7\u914d\u5217\u306b\u5909\u63db\u3057\u3066\u3001\n3. merge-to-map\u3067\u6700\u7d42\u7684\u306a\u5f62\u5f0f\u306e\u30de\u30c3\u30d7\u306b\u7d71\u5408\u3057\u3066\u3044\u308b\n\uff08\u3053\u306e\u8fba\u3001\u3082\u3063\u3068\u30b9\u30de\u30fc\u30c8\u306a\u30b3\u30fc\u30c9\u306b\u3057\u305f\u3044\u306e\u3067\u3001\u89aa\u5207\u306a\u65b9\u30a2\u30c9\u30d0\u30a4\u30b9\u3044\u305f\u3060\u3051\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u2026\uff09\n\u6700\u7d42\u7684\u306b\u306f\u3001\n{ :hoge [{:age \"1/1/1\" :power 10} {:age \"2/2/2\" :power 20}]\n  :piyo [{:age \"3/3/3\" :power 30} {:age \"4/4/4\" :power 40}]\n}\n\n\u3068\u3044\u3063\u305f\u5f62\u306e\u30de\u30c3\u30d7\u306b\u306a\u308b\n\n\u2463\u9759\u7684\u30ea\u30bd\u30fc\u30b9\u306e\u8a2d\u7f6e\n\u2461\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u5f93\u3063\u3066\u3001resources/public\u4e0b\u306bhtml,js,css\u7b49\u3092\u8a2d\u7f6e\u3059\u308b\nd3\u30c7\u30fc\u30bf\u8868\u793a\u7528\u306eHTML\u306f\u3001resources/public/demo\u4e0b\u306b\u8a2d\u7f6e\u3059\u308b\n\n\u2464d3\u306bJSON\u3092\u6e21\u3057\u3001\u30b0\u30e9\u30d5\u3092\u63cf\u753b\u3059\u308b\n\u30b0\u30e9\u30d5\u3092\u63cf\u753b\u2026\u3068\u8a00\u3063\u3066\u3082\u3001d3\u306e\u89e3\u8aac\u307e\u3067\u884c\u3046\u306e\u306f\u9762\u5012\u306a\u306e\u3067\u3001d3\u306b\u3088\u308b\u30b0\u30e9\u30d5\u63cf\u753b\u306e\u8a73\u7d30\u306f\u30bd\u30fc\u30b9\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\nhttps://github.com/circularuins/circularuins/blob/master/resources/public/demo/sentou_d3.html\n\u3053\u3053\u3067\u306f\u3001\u809d\u5fc3\u306ed3\u306b\u30ec\u30b9\u30dd\u30f3\u30b9\u306eJSON\u3092\u6e21\u3059\u3068\u3053\u308d\u3060\u3051\u89e3\u8aac\u3057\u307e\u3059\u3002\n\u2026\u3068\u3044\u3063\u3066\u3082\u8d85\u7c21\u5358\u3067\u3059\u3002\n\u4ee5\u4e0b\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3067\u8a2d\u5b9a\u3057\u305f\u3001JSON\u3092\u53d6\u5f97\u3059\u308b\u30af\u30a8\u30ea\u3001\n\ncore.clj\n(defroutes api-routes\n  (GET \"/demo/d3/hogehoge\" []\n       (json-response (hogehoge/return-map)))\n\n\n\u3053\u306e\"/demo/d3/hogehoge\"\u3092\u3001d3.json\u30e1\u30bd\u30c3\u30c9\u306b\u6e21\u3057\u3066\u3084\u308b\u3060\u3051\u3067\u3059\u3002\n\nhogehoge.html\n<head>\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"../assets/css/hogehoge.css\">\n  <script src=\"http://d3js.org/d3.v3.min.js\" charset=\"utf-8\"></script>\n</head>\n<body>\n\n  <script type=\"text/javascript\">\n\n    d3.json(\"/demo/d3/hogehoge\", function(error, data) {\n      // \u4ee5\u4e0b\u3067data\u3092\u51e6\u7406\n    }\n\n  </script>\n\n</body>\n\n\n\u6e21\u3055\u308c\u305fJSON\u30c7\u30fc\u30bf\u306fd3\u5074\u3067data\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u3057\u3066\u5229\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u304a\u3057\u307e\u3044\n\u4ee5\u4e0a\u3067\u304a\u3057\u307e\u3044\u3067\u3059\u3002\n\u308f\u3056\u308f\u3056clojure\u3067\u3084\u308b\u610f\u5473\u3042\u308b\u306e\uff1f\u3063\u3066\u805e\u304b\u308c\u305f\u3089\u2026\u2026\u3067\u3059\u304c\u3001ruby\u3068\u304b\u3068\u905c\u8272\u306a\u3044\u624b\u8efd\u3055\u3067Web\u30a2\u30d7\u30ea\u66f8\u3051\u307e\u3059\u3088\u3001\u3063\u3066\u3053\u3068\u3068\u3001\u8868\u793a\u306e\u90e8\u5206\u306fJS\u306b\u4efb\u305b\u3061\u3083\u3048\u3070\u3044\u3044\u3088\u306d\u3001\u3063\u3066\u8a71\u3067\u3057\u305f\u3002\n\u30b0\u30e9\u30d5\u306e\u30c7\u30e2\u306f\u3001\nhttp://warm-fortress-5777.herokuapp.com/demo/show\n\u3053\u3061\u3089\u306b\u306a\u308a\u307e\u3059\u3002\n\u53c2\u8003\nhttp://stefan.arentz.ca/clojure-angularjs-recipes-demo.html\n## \u306f\u3058\u3081\u306b\n\u307f\u3093\u306a\u5927\u597d\u304d\u3001Clojure\u3067Web\u30a2\u30d7\u30ea\u306e\u304a\u8a71\u3067\u3059\u3002\nClojrue\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3068\u304b\u3088\u304f\u308f\u304b\u3089\u306a\u304f\u3066\u3082\u3001HTML\u3058\u3083\u306a\u304f\u3066JSON\u3092\u8fd4\u3059\u3088\u3046\u306b\u3059\u308c\u3070\u3001JS\u3068\u7d44\u307f\u5408\u308f\u305b\u3066\u30ab\u30c3\u30b3\u30a4\u30a4\u30b5\u30a4\u30c8\u304c\u7c21\u5358\u306b\u3067\u304d\u3061\u3083\u3044\u307e\u3059\u306d\uff01\n\u4eca\u56de\u306f\u3001\u306f\u3084\u308a\u306ed3.js\u3092\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n**\u6ce8\uff1aLeiningen\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\u3068\u304bd3.js\u306e\u8a2d\u7f6e\u3068\u3044\u3063\u305f\u57fa\u672c\u7684\u306a\u8aac\u660e\u306f\u7701\u304d\u307e\u3059m(_ _)m**\n\n## \u74b0\u5883\n* clojure 1.6.0\n* Leiningen 2.4.2\n* Java 1.8.0\n\n## \u57fa\u672c\u69cb\u6210\n```\nhoge-app\n\u251c\u2500\u2500 project.clj \u2460\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\n\u251c\u2500\u2500 resources \u2463\u9759\u7684\u30ea\u30bd\u30fc\u30b9\u3092\u914d\u7f6e\n   \u2514\u2500\u2500 public\n       \u2514\u2500\u2500 assets\n     \u00a0   \u00a0 \u2514\u2500\u2500 css\n     \u00a0\u00a0     \u00a0\u00a0 \u2514\u2500\u2500 hogehoge.css\n       \u251c\u2500\u2500 demo\n       \u2502\u00a0\u00a0 \u2514\u2500\u2500 hogehoge.html \u2464JSON\u3092\u53d7\u3051\u53d6\u308bd3\n       \u2514\u2500\u2500 index.html\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 hoge_app\n        \u251c\u2500\u2500 core.clj \u2461\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3068\u304b\n        \u2514\u2500\u2500 hogehoge.clj \u2462\u30de\u30c3\u30d7\u3092\u8fd4\u3059\u30af\u30e9\u30b9\n```\n\n## \u89e3\u8aac\n### \u2460\u4f7f\u7528\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u3069\n```clj:project.clj\n :dependencies [[org.clojure/clojure \"1.6.0\"]\n                 [ring/ring-core \"1.3.0\"]\n                 [ring/ring-jetty-adapter \"1.3.0\"]\n                 [compojure \"1.1.8\"]\n                 [cheshire \"5.3.1\"]]\n :dev-dependencies [[ring/ring-devel \"1.3.0\"]]\n :plugins [[lein-ring \"0.8.11\"]]\n :main hoge-app.core\n :ring {:handler hoge-app.core/app}\n```\n<dl>\n<dt>ring</dt>\n<dd>Ruby\u306eRack\u306b\u76f8\u5f53\u3059\u308bWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30e9\u30a4\u30d6\u30e9\u30ea\u30bb\u30c3\u30c8</dd>\n<dt>ring-jetty-adapter</dt>\n<dd>lein\u30b3\u30de\u30f3\u30c9\u304b\u3089ring\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3067\u304d\u308b</dd>\n<dt>compojure</dt>\n<dd>ring\u5bfe\u5fdc\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30e9\u30a4\u30d6\u30e9\u30ea</dd>\n<dt>cheshire</dt>\n<dd>JSON\u30a8\u30f3\u30b3\u30fc\u30c0\u30fc</dd>\n</dl>\n\n### \u2461\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3001JSON\u5909\u63db\u3001\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u306a\u3069\n``` clj:core.clj\n(ns hoge-app.core\n  (:use [compojure.core]\n        [ring.util.response]\n        [ring.middleware.content-type]\n        [ring.middleware.params])\n  (:require [ring.adapter.jetty :as jetty]\n            [cheshire.core :as json]\n            [compojure.route :as route]\n            [compojure.handler :as handler]\n            [hoge-app.hogehoge :as hogehoge]))\n\n(defn json-response [data & [status]]\n  {:status (or status 200)\n   :headers {\"Content-Type\" \"application/json\"}\n   :body (json/generate-string data)})\n\n(defroutes api-routes\n  (GET \"/demo/d3/hogehoge\" []\n       (json-response (hogehoge/return-map))) ;---\u2460\n  (route/resources \"/\") ;---\u2461\n  (route/files \"/demo/\" {:root \"demo\"}) ;---\u2462\n  (route/not-found \"Page not found\"))\n\n(defn wrap-dir-index\n  [handler]\n  (fn [req]\n    (handler (update-in req [:uri] #(if (= \"/\" %) \"/index.html\" %)))))\n\n(def app (-> api-routes\n             wrap-params\n             wrap-content-type\n             wrap-dir-index\n             handler/site))\n\n(defn -main\n  [& args]\n  (let [port (or (first *command-line-args*) 8080)]\n    (jetty/run-jetty app {:port port})))\n```\n<dl>\n<dt>json-response</dt>\n<dd>clojure\u306e\u30de\u30c3\u30d7\u3092\u53d7\u3051\u53d6\u3063\u3066\u3001JSON\u5f62\u5f0f\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3059\u95a2\u6570<br>cheshire\u306egenerate-string\u30e1\u30bd\u30c3\u30c9\u3067\u3001\u30de\u30c3\u30d7\u3092JSON\u306b\u5909\u63db\u3059\u308b\n<dt>api-routes</dt>\n<dd>\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u8a2d\u5b9a\u3002<br>\u2460\u306fJSON\u3092\u5f97\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u8a2d\u5b9a\u3002hogehoge\u30af\u30e9\u30b9\u306ereturn-map\u30e1\u30bd\u30c3\u30c9\u3092\"/demo/d3/hogehoge\"\u306b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\uff08\u30e1\u30bd\u30c3\u30c9\u306e\u623b\u308a\u5024\u306f\u4e0a\u8a18\u306ejson-response\u3067JSON\u5316\uff09\u3002<br>\u2461\u306f\u9759\u7684\u30ea\u30bd\u30fc\u30b9\u306e\u30eb\u30fc\u30c8\u3002<br>\u2462\u3067/demo/\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u30a2\u30af\u30bb\u30b9\u3092\u53ef\u80fd\u306b\u3059\u308b</dd>\n<dt>wrap-dir-index</dt>\n<dd>\"/\"\u3067index.html\u3092\u8868\u793a\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\uff08\u4eca\u56de\u306e\u4e3b\u984c\u3068\u306f\u3042\u307e\u308a\u95a2\u4fc2\u306a\u3044\u2026\uff09</dd>\n<dt>app</dt>\n<dd>thread\u30de\u30af\u30ed\u3067\u4e0a\u8a18\u95a2\u6570\u7fa4\u3092\u307e\u3068\u3081\u308b</dd>\n<dt>-main</dt>\n<dd>\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8</dd>\n</dl>\n\n### \u2462\u30de\u30c3\u30d7\u3092\u8fd4\u3059hogehoge\u30af\u30e9\u30b9\n```clj:hogehoge.clj\n(ns hoge-app.hogehoge)\n\n(def sample-data [[\"hoge\" [[\"1/1/1\" 10 ]\n                           [\"2/2/2\" 20 ]]\n                  [\"piyo\" [[\"3/3/3\" 30]\n                           [\"4/4/4\" 40 ]]])\n\n(defn make-map-seq [data]\n  (map #(array-map :age (get % 0) :power (get % 1)) data))\n\n(defn merge-to-map [data]\n  (apply merge (map #(array-map (keyword (get % 0)) (make-map-seq (get % 1))) data)))\n\n(def hogehoge-map (merge-to-map sample-data))\n\n(defn return-map []\n  hogehoge-map)\n```\n**\u3053\u3053\u306f\u305f\u3060\u306e\u4f8b\u3067\u3059\u3002\u672c\u984c\u304b\u3089\u3061\u3087\u3063\u3068\u8131\u7dda\u3057\u307e\u3059\uff01\uff01**\n\u6700\u7d42\u7684\u306b\u30de\u30c3\u30d7\u3092\u8fd4\u305b\u3070\u826f\u3044\u3002\n\u3053\u3053\u3067\u306f\u3001\n1. \u591a\u6b21\u5143\u914d\u5217\u306esample-data\u3092\u3001\n2. make-map-seq\u3067\u30de\u30c3\u30d7\u914d\u5217\u306b\u5909\u63db\u3057\u3066\u3001\n3. merge-to-map\u3067\u6700\u7d42\u7684\u306a\u5f62\u5f0f\u306e\u30de\u30c3\u30d7\u306b\u7d71\u5408\u3057\u3066\u3044\u308b\n\uff08\u3053\u306e\u8fba\u3001\u3082\u3063\u3068\u30b9\u30de\u30fc\u30c8\u306a\u30b3\u30fc\u30c9\u306b\u3057\u305f\u3044\u306e\u3067\u3001\u89aa\u5207\u306a\u65b9\u30a2\u30c9\u30d0\u30a4\u30b9\u3044\u305f\u3060\u3051\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u2026\uff09\n\u6700\u7d42\u7684\u306b\u306f\u3001\n\n```clj\n{ :hoge [{:age \"1/1/1\" :power 10} {:age \"2/2/2\" :power 20}]\n  :piyo [{:age \"3/3/3\" :power 30} {:age \"4/4/4\" :power 40}]\n}\n```\n\u3068\u3044\u3063\u305f\u5f62\u306e\u30de\u30c3\u30d7\u306b\u306a\u308b\n\n### \u2463\u9759\u7684\u30ea\u30bd\u30fc\u30b9\u306e\u8a2d\u7f6e\n\u2461\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u5f93\u3063\u3066\u3001resources/public\u4e0b\u306bhtml,js,css\u7b49\u3092\u8a2d\u7f6e\u3059\u308b\nd3\u30c7\u30fc\u30bf\u8868\u793a\u7528\u306eHTML\u306f\u3001resources/public/demo\u4e0b\u306b\u8a2d\u7f6e\u3059\u308b\n\n### \u2464d3\u306bJSON\u3092\u6e21\u3057\u3001\u30b0\u30e9\u30d5\u3092\u63cf\u753b\u3059\u308b\n\u30b0\u30e9\u30d5\u3092\u63cf\u753b\u2026\u3068\u8a00\u3063\u3066\u3082\u3001d3\u306e\u89e3\u8aac\u307e\u3067\u884c\u3046\u306e\u306f\u9762\u5012\u306a\u306e\u3067\u3001d3\u306b\u3088\u308b\u30b0\u30e9\u30d5\u63cf\u753b\u306e\u8a73\u7d30\u306f\u30bd\u30fc\u30b9\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\nhttps://github.com/circularuins/circularuins/blob/master/resources/public/demo/sentou_d3.html\n\u3053\u3053\u3067\u306f\u3001\u809d\u5fc3\u306ed3\u306b\u30ec\u30b9\u30dd\u30f3\u30b9\u306eJSON\u3092\u6e21\u3059\u3068\u3053\u308d\u3060\u3051\u89e3\u8aac\u3057\u307e\u3059\u3002\n\u2026\u3068\u3044\u3063\u3066\u3082\u8d85\u7c21\u5358\u3067\u3059\u3002\n\u4ee5\u4e0b\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3067\u8a2d\u5b9a\u3057\u305f\u3001JSON\u3092\u53d6\u5f97\u3059\u308b\u30af\u30a8\u30ea\u3001\n\n```clj:core.clj\n(defroutes api-routes\n  (GET \"/demo/d3/hogehoge\" []\n       (json-response (hogehoge/return-map)))\n```\n\u3053\u306e\"/demo/d3/hogehoge\"\u3092\u3001d3.json\u30e1\u30bd\u30c3\u30c9\u306b\u6e21\u3057\u3066\u3084\u308b\u3060\u3051\u3067\u3059\u3002\n\n```js:hogehoge.html\n<head>\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"../assets/css/hogehoge.css\">\n  <script src=\"http://d3js.org/d3.v3.min.js\" charset=\"utf-8\"></script>\n</head>\n<body>\n\n  <script type=\"text/javascript\">\n\n    d3.json(\"/demo/d3/hogehoge\", function(error, data) {\n      // \u4ee5\u4e0b\u3067data\u3092\u51e6\u7406\n    }\n\n  </script>\n\n</body>\n```\n\u6e21\u3055\u308c\u305fJSON\u30c7\u30fc\u30bf\u306fd3\u5074\u3067data\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u3057\u3066\u5229\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\n## \u304a\u3057\u307e\u3044\n\u4ee5\u4e0a\u3067\u304a\u3057\u307e\u3044\u3067\u3059\u3002\n\u308f\u3056\u308f\u3056clojure\u3067\u3084\u308b\u610f\u5473\u3042\u308b\u306e\uff1f\u3063\u3066\u805e\u304b\u308c\u305f\u3089\u2026\u2026\u3067\u3059\u304c\u3001ruby\u3068\u304b\u3068\u905c\u8272\u306a\u3044\u624b\u8efd\u3055\u3067Web\u30a2\u30d7\u30ea\u66f8\u3051\u307e\u3059\u3088\u3001\u3063\u3066\u3053\u3068\u3068\u3001\u8868\u793a\u306e\u90e8\u5206\u306fJS\u306b\u4efb\u305b\u3061\u3083\u3048\u3070\u3044\u3044\u3088\u306d\u3001\u3063\u3066\u8a71\u3067\u3057\u305f\u3002\n\n\u30b0\u30e9\u30d5\u306e\u30c7\u30e2\u306f\u3001\nhttp://warm-fortress-5777.herokuapp.com/demo/show\n\u3053\u3061\u3089\u306b\u306a\u308a\u307e\u3059\u3002\n\n**\u53c2\u8003**\nhttp://stefan.arentz.ca/clojure-angularjs-recipes-demo.html\n", "tags": ["Clojure", "d3.js", "\u65b0\u4eba\u30d7\u30ed\u30b0\u30e9\u30de\u5fdc\u63f4"]}