{"context": " More than 1 year has passed since last update.SQL Server\u306b\u306fsys.tables\u3084sys.objects\u3068\u3044\u3063\u305f\u30ab\u30bf\u30ed\u30b0 \u30d3\u30e5\u30fc (Transact-SQL)\u3068\u3044\u3046\u3082\u306e\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\n\n\u30ab\u30bf\u30ed\u30b0 \u30d3\u30e5\u30fc\u306f\u3001SQL Server \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 \u30a8\u30f3\u30b8\u30f3\u306b\u3088\u3063\u3066\u4f7f\u7528\u3055\u308c\u308b\u60c5\u5831\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n\u3068\u3042\u308b\u3088\u3046\u306b\u3001\u30ab\u30bf\u30ed\u30b0\u30d3\u30e5\u30fc\u3092\u4f7f\u3046\u4e8b\u3067\u3001\u30c6\u30fc\u30d6\u30eb\u3001\u5217\u3092\u59cb\u3081\u3068\u3059\u308bSQL Server\u304c\u7ba1\u7406\u3059\u308b\u5404\u7a2e\u60c5\u5831\u3092\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\n\u3053\u306e\u30ab\u30bf\u30ed\u30b0\u30d3\u30e5\u30fc\u3092\u4f7f\u3063\u3066\u3001\u30c6\u30fc\u30d6\u30eb\u4e00\u89a7\u3084\u3001\u5217\u306e\u60c5\u5831\u3092SQL\u306b\u3088\u3063\u3066\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\n\u203b\u4ee5\u4e0bSQL\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u306e\u306f\u3001Microsoft\u304b\u3089\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b Northwind \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u3059\n\u3000\u4f5c\u6210\u65b9\u6cd5\u306f\u3001\u6700\u5f8c\u306b\u8a18\u8f09\u3057\u3066\u304a\u304d\u307e\u3059\n\n\u30c6\u30fc\u30d6\u30eb\u306e\u4e00\u89a7\n\nsummary.sql\n--\u30c6\u30fc\u30d6\u30eb\u4e00\u89a7\u3092\u8868\u793a\u3057\u307e\u3059\n--ClusteredIndex\u3001PK\u306e\u6709\u7121\u3001PK\u3068CI\u304c\u540c\u3058\u304b\u3001NonClusteredIndex\u3001InsertTrigger\u306e\u6570\u3001UpdateTrigger\u306e\u6570\u3001\u30ec\u30b3\u30fc\u30c9\u6570\u3092\u8868\u793a\u3057\u307e\u3059\n--@table_name\u306b\u691c\u7d22\u3059\u308b\u5bfe\u8c61\u306e\u30c6\u30fc\u30d6\u30eb\u540d\u3092\u90e8\u5206\u4e00\u81f4\u306e\u5f62\u5f0f\u3067\u6307\u5b9a\u53ef\u80fd\u3067\u3059\n\n--summary\n--\u3053\u3053\u306b\u30c6\u30fc\u30d6\u30eb\u540d\u306e\u691c\u7d22\u6761\u4ef6\u3092\u6307\u5b9a\u3057\u307e\u3059\ndeclare @table_name nvarchar(128) = '%Customer%';\n\n\nselect tables.name\n     , MAX(CASE WHEN OBJECTPROPERTY(tables.object_id, 'TableHasClustIndex') = 1 THEN '\u25cb' ELSE '' END) [CI\u6709\u7121]\n     , MAX(CASE WHEN OBJECTPROPERTY(tables.object_id, 'TableHasPrimaryKey') = 1 THEN '\u25cb' ELSE '' END) [PK\u6709\u7121]\n     , MAX(CASE WHEN constraints.object_id is null then 'PK\u306a\u3057'\n        WHEN constraints.unique_index_id = 1 then 'true'\n        ELSE 'false'\n        END) [PK is CI]\n     --, OBJECTPROPERTY(tables.object_id, 'TableHasNonclustIndex') TableHasNonclustIndex\n     , (select count(DISTINCT index_id) from sys.indexes indexes where indexes.object_id = tables.object_id and index_id <> 1) [NCI\u306e\u6570]\n     , MAX(OBJECTPROPERTY(tables.object_id, 'TableInsertTriggerCount')) [InsertTrigger\u306e\u6570]\n     , MAX(OBJECTPROPERTY(tables.object_id, 'TableUpdateTriggerCount')) [UpdateTrigger\u306e\u6570]\n     , SUM(CASE WHEN tables.is_ms_shipped = 0 AND pa.index_id IN (1,0) THEN pa.rows ELSE 0 END) [\u884c\u6570]\n  from sys.tables tables\n  left join\n       (select *\n          from sys.key_constraints\n         where type = 'PK') AS constraints\n         ON constraints.parent_object_id = tables.object_id\n inner join sys.partitions pa ON pa.object_id = tables.object_id\n where tables.name like @table_name\n group by tables.object_id, tables.name\n order by tables.name;\n\n\n\n\n\u5217\u60c5\u5831\u306e\u4e00\u89a7\n\ndetail.sql\n--\u30c6\u30fc\u30d6\u30eb\u306e\u5217\u3054\u3068\u306e\u8a73\u7d30\u3092\u8868\u793a\u3057\u307e\u3059\n--\u578b\u540d\u3001NULL\u8a31\u53ef\u3001IDENTITY\u5217\u3001\u8a08\u7b97\u5217\u3001PK\u306b\u4f7f\u308f\u308c\u3066\u3044\u308b\u5217\u3001ClusterdIndex\u306b\u4f7f\u308f\u308c\u3066\u3044\u308b\u5217\u3001NonClusterdIndex(key\u304c\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30ad\u30fc\u3067\u3001inc\u304c\u4ed8\u52a0\u5217)\u306e\u60c5\u5831\u3092\u4e00\u89a7\u3067\u8868\u793a\u3057\u307e\u3059\n--\u30c6\u30fc\u30d6\u30eb\u540d\u3001\u5217\u540d\u3001\u578b\u540d\u306e\u90e8\u5206\u4e00\u81f4\u691c\u7d22\u304c\u53ef\u80fd\u3067\u3059\n--NCI\u306e\u8868\u793a\u6570\u306f\u3001\u9014\u4e2d\u306b\u3042\u308bMAX(CASE WHEN index_col_info.ordered_index_id = 2\u306e\u7b87\u6240\u3092\u5897\u3084\u3057\u3066\u3044\u3051\u3070\u53ef\u80fd\u3067\u3059\u304c\u3001\u304d\u308c\u3044\u306a\u3084\u308a\u65b9\u3067\u306f\u306a\u3044\u3067\u3059\n\n--detail\n--\u3053\u3053\u306b\u30c6\u30fc\u30d6\u30eb\u540d\u3001\u5217\u540d\u306e\u691c\u7d22\u6761\u4ef6\u3092\u6307\u5b9a\u3057\u307e\u3059\ndeclare @table_name nvarchar(128) = '%Customer%';\ndeclare @col_name   nvarchar(128) = '%';\ndeclare @type_name  nvarchar(128) = '%';\n\n\nWITH table_info(object_id, table_name, cols_name, column_id, is_nullable, is_identity, is_computed, type_name)\nAS\n(\nselect tables.object_id, tables.name table_name\n     , cols.name cols_name, cols.column_id, cols.is_nullable, cols.is_identity, cols.is_computed\n     , types.name type_name\n  from (select * from sys.tables where name like @table_name) tables\n inner join\n       (select * from sys.columns where name like @col_name) cols\n       ON cols.object_id = tables.object_id\n inner join\n       (select * from sys.types where name like @type_name) types\n       ON types.user_type_id = cols.user_type_id\n)\n--\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u95a2\u9023\u60c5\u5831\u3002\u81ea\u8eab\u3068\u526f\u554f\u3044\u5408\u308f\u305b\u3067\u7d50\u5408\u3057\u3066\u3044\u308b\u306e\u306f\u3001index_id\u3092\u9023\u756a\u3067\u4e26\u3079\u305f\u3044\u305f\u3081\n--index_id=1\u304cCI\u3068\u306a\u308b\u304c\u3001\u5358\u7d14\u306bRANK\u3067\u4e26\u3079\u66ff\u3048\u308b\u3068\u3001CI\u304c\u306a\u3044\u3082\u306e\u307e\u3067ordered_index_id\u306e\u6700\u5c0f\u5024\u304c[1]\u306b\u306a\u3063\u3066\u3057\u307e\u3046\n--\u6700\u5c0f\u306eindex_id\u3092object_id\u6bce\u306b\u53d6\u5f97\u3057\u3066\u3001index_id=1\u4ee5\u5916\u3092+1\u3057\u3066\u3001\u9806\u5e8f\u3092\u7dad\u6301\u3059\u308b\u3068\u3044\u3046\u611a\u884c\u3092\u5b9f\u65bd\uff08\u8868\u793a\u6642\u306b\u8272\u3005\u9762\u5012\u306b\u306a\u308b\u306e\u3067\u3001\u3053\u3053\u3067\u7d42\u308f\u3089\u305b\u305f\u3044\uff09\n, index_col_info(object_id, index_id, column_id, is_included_column, ordered_index_id)\nAS\n(\nselect a.object_id, a.index_id, a.column_id, a.is_included_column\n     , (CASE WHEN b.min_index_id = 1 THEN 0 ELSE 1 END) + b.ordered_index_id as ordered_index_id\n  from sys.index_columns a\n inner join\n       (select object_id\n             , index_id\n             , RANK() OVER (PARTITION BY object_id ORDER BY index_id) ordered_index_id\n             , (select MIN(index_id) from sys.index_columns c where c.object_id = d.object_id) min_index_id\n          from sys.index_columns d\n         group by object_id, index_id) AS b\n         on b.object_id = a.object_id and b.index_id = a.index_id\n)\nselect MAX(tables.table_name) [\u30c6\u30fc\u30d6\u30eb\u540d]\n     , MAX(tables.cols_name)  [\u5217\u540d]\n     , MAX(tables.type_name)  [\u578b\u540d]\n     , MAX(CASE WHEN tables.is_nullable = 1 THEN '\u25cb' ELSE '' END) [NULL\u8a31\u53ef]\n     , MAX(CASE WHEN tables.is_identity = 1 THEN '\u25cb' ELSE '' END) [\u81ea\u52d5\u63a1\u756a]\n     , MAX(CASE WHEN tables.is_computed = 1 THEN '\u25cb' ELSE '' END) [\u8a08\u7b97\u5217]\n     , MAX(CASE WHEN index_col_info_for_pk.object_id IS NOT NULL and tables.column_id = index_col_info_for_pk.column_id THEN '\u25cb' ELSE '' END) PK\n     , MAX(CASE WHEN index_col_info.ordered_index_id = 1 THEN '\u25cb'\n                ELSE '' END) CI\n     --\u3053\u306e\u4e0b\u3092\u5897\u3084\u3057\u3066\u3044\u3051\u3070\u4f55\u500b\u3067\u3082\u8868\u793a\u53ef\u80fd\u3060\u304c\u3001\u30db\u30f3\u30c8\u306f\u691c\u7d22\u5bfe\u8c61\u306b\u5f15\u3063\u304b\u304b\u3063\u305fNCI\u306e\u6570\u3060\u3051\u306b\u7d5e\u3063\u305f\u307b\u3046\u304c\u898b\u3084\u3059\u3044\u3068\u601d\u3046\n     , MAX(CASE WHEN index_col_info.ordered_index_id = 2 AND index_col_info.is_included_column = 0 THEN 'key'\n                WHEN index_col_info.ordered_index_id = 2 AND index_col_info.is_included_column = 1 THEN 'inc'\n                ELSE '' END) NCI1\n     , MAX(CASE WHEN index_col_info.ordered_index_id = 3 AND index_col_info.is_included_column = 0 THEN 'key'\n                WHEN index_col_info.ordered_index_id = 3 AND index_col_info.is_included_column = 1 THEN 'inc'\n                ELSE '' END) NCI2\n     , MAX(CASE WHEN index_col_info.ordered_index_id = 4 AND index_col_info.is_included_column = 0 THEN 'key'\n                WHEN index_col_info.ordered_index_id = 4 AND index_col_info.is_included_column = 1 THEN 'inc'\n                ELSE '' END) NCI3\n     , MAX(CASE WHEN index_col_info.ordered_index_id = 5 AND index_col_info.is_included_column = 0 THEN 'key'\n                WHEN index_col_info.ordered_index_id = 5 AND index_col_info.is_included_column = 1 THEN 'inc'\n                ELSE '' END) NCI4\n  from table_info tables\n  left join index_col_info ON index_col_info.object_id = tables.object_id and index_col_info.column_id = tables.column_id\n  left join\n       (select *\n          from sys.key_constraints\n         where type = 'PK') AS constraints\n         ON constraints.parent_object_id = tables.object_id\n  left join index_col_info index_col_info_for_pk\n         ON index_col_info_for_pk.object_id = tables.object_id\n        and index_col_info_for_pk.index_id = constraints.unique_index_id\n group by tables.table_name, tables.column_id\n order by tables.table_name, tables.column_id;\n\n\n\n\n\u6539\u3081\u3066\u30ab\u30bf\u30ed\u30b0\u30d3\u30e5\u30fc\n\u4e0a\u8a18\u306e\u30c7\u30fc\u30bf\u3092\u8868\u793a\u3059\u308b\u305f\u3081\u306b\u3001sys.objects\u3092\u59cb\u3081\u3068\u3059\u308b\u30ab\u30bf\u30ed\u30b0\u30d3\u30e5\u30fc\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\n\u4eca\u56de\u4f7f\u7528\u3057\u305f\u30ab\u30bf\u30ed\u30b0\u30d3\u30e5\u30fc\u3068\u95a2\u9023\u60c5\u5831\u306b\u3064\u3044\u3066\u7c21\u5358\u306b\u8aac\u660e\u3057\u307e\u3059\n\n\u6982\u8981\nsys.objects\u306bsqlserver\u304c\u7ba1\u7406\u3057\u3066\u3044\u308b\u3060\u3044\u305f\u3044\u306e\u3082\u306e\u304c\u5165\u3063\u3066\u3044\u308b\u611f\u3058\u3067\u3059\n\u3053\u306e\u30ad\u30fc\u304c[object_id]\u3067\u3001\u4ed6\u306esys.XXX\u306f\u3053\u306e[object_id]\u3067\u53c2\u7167\u3057\u307e\u3059\nsys.XXX\u306b\u3088\u3063\u3066\u306f\u3001\u5217\u306e\u5b9a\u7fa9\u304c[sys.objects]\u3092\u7d99\u627f\u3057\u3066\u3044\u308b\u3082\u306e\u3082\u3042\u308a\u307e\u3059\n\u306a\u306e\u3067\u307e\u305a\u306f\u3001[sys.objects]\u3092\u3056\u3063\u304f\u308a\u773a\u3081\u3066\u3001\u3084\u308a\u305f\u3044\u3053\u3068\u306b\u95a2\u9023\u3042\u308a\u305d\u3046\u306asys.XXX\u3092\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u30ab\u30bf\u30ed\u30b0 \u30d3\u30e5\u30fc (Transact-SQL)\n\u304b\u3089\u63a2\u3059\u3068\u3001\u610f\u5916\u3068\u7c21\u5358\u306b\u76ee\u7684\u9054\u6210\u3067\u304d\u305d\u3046\u3067\u3059\n\nsys.objects (Transact-SQL)\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5185\u3067\u4f5c\u6210\u3055\u308c\u308b\u30e6\u30fc\u30b6\u30fc\u5b9a\u7fa9\u306e\u30b9\u30ad\u30fc\u30de \u30b9\u30b3\u30fc\u30d7 \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3054\u3068\u306b 1 \u884c\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3057\u307e\u3059\u3002\nDDL \u30c8\u30ea\u30ac\u30fc\u306f\u30b9\u30ad\u30fc\u30de \u30b9\u30b3\u30fc\u30d7\u3067\u306f\u306a\u3044\u305f\u3081\u3001sys.objects \u3067\u306f\u8868\u793a\u3055\u308c\u307e\u305b\u3093\u3002 DML \u3068 DDL \u306e\u4e21\u65b9\u3092\u542b\u3080\u3059\u3079\u3066\u306e\u30c8\u30ea\u30ac\u30fc\u306f\u3001sys.triggers \u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002 sys.triggers \u306b\u306f\u3001\u3055\u307e\u3056\u307e\u306a\u7a2e\u985e\u306e\u30c8\u30ea\u30ac\u30fc\u306e\u540d\u524d\u30b9\u30b3\u30fc\u30d7 \u30eb\u30fc\u30eb\u3092\u6df7\u5728\u3055\u305b\u3066\u683c\u7d0d\u3067\u304d\u307e\u3059\u3002\n\nsys.tables (Transact-SQL)\n\nsys.objects \u304b\u3089\u7d99\u627f\u3057\u305f\u5217\u3092\u542b\u3080\nSQL Server \u5185\u306e\u30e6\u30fc\u30b6\u30fc \u30c6\u30fc\u30d6\u30eb\u3054\u3068\u306b 1 \u884c\u306e\u30c7\u30fc\u30bf\u3092\u8fd4\u3057\u307e\u3059\u3002\n\nsys.columns (Transact-SQL)\n\n\u30d3\u30e5\u30fc\u3084\u30c6\u30fc\u30d6\u30eb\u306a\u3069\u3001\u5217\u3092\u6301\u3064\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5217\u3054\u3068\u306b 1 \u884c\u306e\u30c7\u30fc\u30bf\u3092\u8fd4\u3057\u307e\u3059\u3002 \u4ee5\u4e0b\u306b\u3001\u5217\u3092\u6301\u3064\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u7a2e\u985e\u306e\u4e00\u89a7\u3092\u793a\u3057\u307e\u3059\u3002\n\n\u30c6\u30fc\u30d6\u30eb\u5024\u30a2\u30bb\u30f3\u30d6\u30ea\u95a2\u6570 (FT)\n\u30a4\u30f3\u30e9\u30a4\u30f3 \u30c6\u30fc\u30d6\u30eb\u5024 SQL \u95a2\u6570 (IF)\n\u5185\u90e8\u30c6\u30fc\u30d6\u30eb (IT)\n\u30b7\u30b9\u30c6\u30e0 \u30c6\u30fc\u30d6\u30eb (S)\n\u30c6\u30fc\u30d6\u30eb\u5024 SQL \u95a2\u6570 (TF)\n\u30e6\u30fc\u30b6\u30fc \u30c6\u30fc\u30d6\u30eb (U)\n\u30d3\u30e5\u30fc (V)\n\n\u4eca\u56de\u4f7f\u3063\u305f\u5217\nobject_id\uff1a\u3053\u306e\u5217\u304c\u5c5e\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306eID(sys.objects\u3092\u53c2\u7167\u3059\u308b)\ncolumn_id\uff1a\u5217\u306eID\u3002\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5185\u3067\u4e00\u610f\u3002\u5217ID\u306f\u9023\u7d9a\u3057\u305f\u5024\u306b\u306a\u3089\u306a\u3044\u3053\u3068\u304c\u3042\u308b\nsystem_type_id\uff1a\u5217\u306e\u30b7\u30b9\u30c6\u30e0\u578b\u306eID\nuser_type_id\uff1a\u30e6\u30fc\u30b6\u30fc\u304c\u5b9a\u7fa9\u3057\u305f\u5217\u306e\u578b\u306eID\uff08\u57fa\u672c\u7684\u306b\u306f\u3001system_type_id\u3068\u540c\u3058\u3082\u306e\u304c\u306f\u3044\u308b\uff1f\uff09\u578b\u306e\u540d\u524d\u3092\u53d6\u5f97\u3059\u308b\u306b\u306f\u3001sys.types (Transact-SQL)\u30ab\u30bf\u30ed\u30b0\u30d3\u30e5\u30fc\u3068\u7d50\u5408\u3059\u308b\nis_nullable\nis_identity\nis_computed\n\nsys.types (Transact-SQL)\n\n\u30b7\u30b9\u30c6\u30e0\u578b\u3068\u30e6\u30fc\u30b6\u30fc\u5b9a\u7fa9\u306e\u578b\u3054\u3068\u306b 1 \u884c\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3057\u307e\u3059\u3002\nsystem_type_id:243\u304c\u30e6\u30fc\u30b6\u5b9a\u7fa9\u578b(\u3068\u601d\u308f\u308c\u308b)\nuser_type_id\uff1a\u30c7\u30fc\u30bf\u30fc\u30d9\u30fc\u30b9\u5185\u3067\u4e00\u610f\u3002\u30b7\u30b9\u30c6\u30e0\u30c7\u30fc\u30bf\u578b\u306e\u5834\u5408\u306f\u3001user_type_id = system_type_id\u3068\u306a\u308b\n\nsys.indexes (Transact-SQL)\n\n\u30c6\u30fc\u30d6\u30eb\u3001\u30d3\u30e5\u30fc\u3001\u30c6\u30fc\u30d6\u30eb\u5024\u95a2\u6570\u306a\u3069\u3001\u30c6\u30fc\u30d6\u30eb \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u307e\u305f\u306f\u30d2\u30fc\u30d7\u3054\u3068\u306b 1 \u884c\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3057\u307e\u3059\u3002\n\nsys.index_columns (Transact-SQL)\n\nsys.indexes \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u307e\u305f\u306f\u9806\u5e8f\u4ed8\u3051\u3089\u308c\u3066\u3044\u306a\u3044\u30c6\u30fc\u30d6\u30eb (\u30d2\u30fc\u30d7) \u306e\u4e00\u90e8\u3067\u3042\u308b\u5217\u3054\u3068\u306b 1 \u3064\u306e\u884c\u3092\u542b\u307f\u307e\u3059\u3002\nindex_id\uff1a\u5217\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306eID\nindex_column_id\uff1a\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u5217\u306e ID \u3067\u3059\u3002 index_column_id \u306f\u3001index_id \u5185\u3067\u306e\u307f\u4e00\u610f\u3067\u3059\u3002(index_id\u5185\u3067\u306e\u307f\u4e00\u610f)\ncolumn_id\uff1aobject_id \u5185\u306e\u5217\u306e ID \u3067\u3059\u3002column_id \u306f\u3001object_id \u5185\u3067\u306e\u307f\u4e00\u610f\u3067\u3059\u3002\uff08sys.columns\u3068\u4e00\u81f4\u3059\u308b\uff09\nis_descending_key\uff1a1:\u964d\u9806\nis_included_column\uff1a1\uff1a\u4ed8\u52a0\u5217\n\nOBJECTPROPERTY (Transact-SQL)\n\n\u6307\u5b9a\u3057\u305f\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u5bfe\u3059\u308b\u5024\u3092\u8fd4\u3057\u3066\u304f\u308c\u308b\n\u3088\u304f\u308f\u3089\u304b\u306a\u3044\u306e\u3067\u30b5\u30f3\u30d7\u30eb\u3092\u8a18\u8f09\u3057\u3066\u304a\u304d\u307e\u3059\nselect tables.name\n     , CASE OBJECTPROPERTY(tables.object_id, 'TableHasClustIndex') = 1 THEN '\u25cb' ELSE '' END [CI\u6709\u7121]]\n  from sys.tables tables\n order by tables.name;\n\n[TableHasClustIndex]\u306a\u3069\u3001\u6307\u5b9a\u3059\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u5909\u66f4\u3059\u308c\u3070\u3001\u305d\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u5024\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\n\u8272\u3093\u306a\u30d7\u30ed\u30d1\u30c6\u30a3\u304c\u3042\u308a\u307e\u3059\u304c\u3001OBJECTPROPERTY (Transact-SQL)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\n\nsys.key_constraints (Transact-SQL)\n\n\u4e3b\u30ad\u30fc\u5236\u7d04\u307e\u305f\u306f\u4e00\u610f\u5236\u7d04\u3067\u3042\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3054\u3068\u306b 1 \u884c\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3057\u307e\u3059\u3002 sys.objects.type \u304c PK \u3068 UQ \u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u542b\u307e\u308c\u307e\u3059\u3002\nunique_index_id\uff1a\u3053\u306e\u5236\u7d04\u3092\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306b\u4f5c\u6210\u3055\u308c\u305f\u3001\u89aa\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u5fdc\u3059\u308b\u4e00\u610f\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e ID\u3002\nparent_object_id\uff1asys.objects\u306b\u542b\u307e\u308c\u3066\u3044\u308b \u89aa\u306eID\n\n\u5171\u901a\u30c6\u30fc\u30d6\u30eb\u5f0f(CTE)\n\n\n\u5404\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u306e\u5b9f\u884c\u30b9\u30b3\u30fc\u30d7\u5185\u3067\u5b9a\u7fa9\u3055\u308c\u308b\u4e00\u6642\u7d50\u679c\u30bb\u30c3\u30c8\u3068\u8003\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\n\n\u8aa4\u89e3\u3092\u4e0e\u3048\u304b\u306d\u306a\u3044\u3067\u3059\u304c\u3001\u7c21\u5358\u306b\u8a18\u8f09\u3059\u308b\u3068\u3001\u305d\u306eSQL\u5185\u3067\u53c2\u7167\u53ef\u80fd\u306aView\u3092\u5b9a\u7fa9\u3059\u308b\u3088\u3046\u306a\u3082\u306e\u3067\u3059\n\u30b1\u30fc\u30b9\u5225\u306b\u3088\u308b\u4f7f\u3044\u65b9\u3082\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\nWITH common_table_expression (Transact-SQL)\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n\nMicrosoft SQL Server Compact \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3001\u3044\u304f\u3064\u304b\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u6700\u5927\u30b5\u30a4\u30ba\u5236\u9650\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30c6\u30fc\u30d6\u30eb\u306e\u30ec\u30b3\u30fc\u30c9\u6570\u3068\u304b\u7c21\u5358\u306b\u307f\u305f\u3044\u306a\u3068\u601d\u3046\u4e8b\u306f\u3088\u304f\u3042\u3063\u3066\u3001\u6bce\u56de\u8abf\u3079\u305f\u308a\u3057\u3066\u307e\u3057\u305f(sys.XXX\u3063\u3066\u306a\u3093\u3060\u304b\u9762\u5012\u306a\u611f\u3058\u304c\u3057\u3066\u3044\u305f\u306e\u3067)\n\u3067\u3082\u898b\u3066\u307f\u308b\u3068\u305d\u3053\u307e\u3067\u9762\u5012\u3067\u306f\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u3053\u3053\u3092\u53c2\u8003\u306b\u3044\u308d\u3044\u308d\u8a66\u3057\u3066\u8cb0\u3048\u308c\u3070\u3068\u601d\u3044\u307e\u3059\n\n\u53c2\u8003\uff1a\u65b9\u6cd5 : \u30b5\u30f3\u30d7\u30eb \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n\u3053\u3061\u3089\u306e\u624b\u9806\u306b\u5f93\u3048\u3070\u57fa\u672cOK\u3067\u3059\u304c\u3001SQL Server 2012\u4ee5\u4e0a\u306b\u5165\u308c\u308b\u5834\u5408\u306e\u6ce8\u610f\u4e8b\u9805(sp_dboption\u304c\u4f7f\u3048\u306a\u3044\u306e\u3067\u3001ALTER DATABASE\u306b\u3059\u308b\u3060\u3051\u3067\u3059\u304c)\u3064\u3044\u3066\u624b\u9806\u3068\u3068\u3082\u306b\u7c21\u5358\u306b\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059\n\n\nNorthwind and pubs Sample Databases for SQL Server 2000\u306e Web \u30b5\u30a4\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u5b9f\u884c\u3059\u308b\u3068\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u306e\u30eb\u30fc\u30c8 \u30d5\u30a9\u30eb\u30c0\u30fc\u306b\u3001SQL Server 2000 Sample Databases \u30d5\u30a9\u30eb\u30c0\u30fc\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3059 (C:\\SQL Server 2000 Sample Databases \u306a\u3069)\nSSMS\u3092\u958b\u304d\u3001DB\u3092\u4f5c\u6210\u3057\u305f\u3044SQL Server\u306b\u63a5\u7d9a\n\u30d5\u30a9\u30eb\u30c0\u30fc\u5185\u306e\u3001instnwnd.sql\u3068\u3001instpubs.sql\u3092SSMS\u3067\u958b\u304f\n\u305d\u308c\u305e\u308c\u306eSQL\u5185\u306bsp_dboption\u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u304c\u3042\u308a\u307e\u3059\u304c\u30012008\u307e\u3067\u3057\u304b\u4f7f\u3048\u306a\u3044\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\n\n\ninstnwnd.sql\n/* \nexec sp_dboption 'Northwind','trunc. log on chkpt.','true'\nexec sp_dboption 'Northwind','select into/bulkcopy','true'\n*/\nalter database Northwind set recovery simple\n\n\n\ninstpubs.sql\n/*\nexecute sp_dboption 'pubs' ,'trunc. log on chkpt.' ,'true'\n*/\nalter database pubs  set recovery simple\n\n\n\u203b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u30b3\u30de\u30f3\u30c9\u306e\u610f\u5473\n'trunc. log on chkpt.','true'\n\nSQL Server 2000 \u3067\u8d77\u52d5\u3057\u3001trunc. log on chkpt. \u30aa\u30d7\u30b7\u30e7\u30f3\u306b true \u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u5fa9\u65e7\u30e2\u30c7\u30eb\u306f SIMPLE \u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\u30aa\u30d7\u30b7\u30e7\u30f3\u306b false \u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u5fa9\u65e7\u30e2\u30c7\u30eb\u306f FULL \u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\n\n'select into/bulkcopy','true'\n\nMicrosoft SQL Server 2000 \u304b\u3089\u4f7f\u7528\u3092\u958b\u59cb\u3057\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u73fe\u5728\u306e\u5fa9\u65e7\u30e2\u30c7\u30eb\u304c FULL \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001select into/bulkcopy option \u3092\u4f7f\u7528\u3059\u308b\u3068\u5fa9\u65e7\u30e2\u30c7\u30eb\u304c BULK_LOGGED \u306b\u518d\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\u5fa9\u65e7\u30e2\u30c7\u30eb\u3092\u9069\u5207\u306a\u65b9\u6cd5\u3067\u5909\u66f4\u3059\u308b\u306b\u306f\u3001ALTER DATABASE \u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u306e SET RECOVERY \u53e5\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\u4fee\u6b63\u3057\u305fSQL\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\nSQL Server\u306b\u306fsys.tables\u3084sys.objects\u3068\u3044\u3063\u305f[\u30ab\u30bf\u30ed\u30b0 \u30d3\u30e5\u30fc (Transact-SQL)](https://msdn.microsoft.com/ja-jp/library/ms174365.aspx)\u3068\u3044\u3046\u3082\u306e\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\n\n> \u30ab\u30bf\u30ed\u30b0 \u30d3\u30e5\u30fc\u306f\u3001SQL Server \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 \u30a8\u30f3\u30b8\u30f3\u306b\u3088\u3063\u3066\u4f7f\u7528\u3055\u308c\u308b\u60c5\u5831\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n\u3068\u3042\u308b\u3088\u3046\u306b\u3001\u30ab\u30bf\u30ed\u30b0\u30d3\u30e5\u30fc\u3092\u4f7f\u3046\u4e8b\u3067\u3001\u30c6\u30fc\u30d6\u30eb\u3001\u5217\u3092\u59cb\u3081\u3068\u3059\u308bSQL Server\u304c\u7ba1\u7406\u3059\u308b\u5404\u7a2e\u60c5\u5831\u3092\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\n\n\u3053\u306e\u30ab\u30bf\u30ed\u30b0\u30d3\u30e5\u30fc\u3092\u4f7f\u3063\u3066\u3001\u30c6\u30fc\u30d6\u30eb\u4e00\u89a7\u3084\u3001\u5217\u306e\u60c5\u5831\u3092SQL\u306b\u3088\u3063\u3066\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\n\u203b\u4ee5\u4e0bSQL\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u306e\u306f\u3001Microsoft\u304b\u3089\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b Northwind \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u3059\n\u3000\u4f5c\u6210\u65b9\u6cd5\u306f\u3001\u6700\u5f8c\u306b\u8a18\u8f09\u3057\u3066\u304a\u304d\u307e\u3059\n\n#\u30c6\u30fc\u30d6\u30eb\u306e\u4e00\u89a7\n\n```sql:summary.sql\n--\u30c6\u30fc\u30d6\u30eb\u4e00\u89a7\u3092\u8868\u793a\u3057\u307e\u3059\n--ClusteredIndex\u3001PK\u306e\u6709\u7121\u3001PK\u3068CI\u304c\u540c\u3058\u304b\u3001NonClusteredIndex\u3001InsertTrigger\u306e\u6570\u3001UpdateTrigger\u306e\u6570\u3001\u30ec\u30b3\u30fc\u30c9\u6570\u3092\u8868\u793a\u3057\u307e\u3059\n--@table_name\u306b\u691c\u7d22\u3059\u308b\u5bfe\u8c61\u306e\u30c6\u30fc\u30d6\u30eb\u540d\u3092\u90e8\u5206\u4e00\u81f4\u306e\u5f62\u5f0f\u3067\u6307\u5b9a\u53ef\u80fd\u3067\u3059\n\n--summary\n--\u3053\u3053\u306b\u30c6\u30fc\u30d6\u30eb\u540d\u306e\u691c\u7d22\u6761\u4ef6\u3092\u6307\u5b9a\u3057\u307e\u3059\ndeclare @table_name nvarchar(128) = '%Customer%';\n\n\nselect tables.name\n\t , MAX(CASE WHEN OBJECTPROPERTY(tables.object_id, 'TableHasClustIndex') = 1 THEN '\u25cb' ELSE '' END) [CI\u6709\u7121]\n\t , MAX(CASE WHEN OBJECTPROPERTY(tables.object_id, 'TableHasPrimaryKey') = 1 THEN '\u25cb' ELSE '' END) [PK\u6709\u7121]\n\t , MAX(CASE WHEN constraints.object_id is null then 'PK\u306a\u3057'\n\t\tWHEN constraints.unique_index_id = 1 then 'true'\n\t\tELSE 'false'\n\t\tEND) [PK is CI]\n\t --, OBJECTPROPERTY(tables.object_id, 'TableHasNonclustIndex') TableHasNonclustIndex\n\t , (select count(DISTINCT index_id) from sys.indexes indexes where indexes.object_id = tables.object_id and index_id <> 1) [NCI\u306e\u6570]\n\t , MAX(OBJECTPROPERTY(tables.object_id, 'TableInsertTriggerCount')) [InsertTrigger\u306e\u6570]\n\t , MAX(OBJECTPROPERTY(tables.object_id, 'TableUpdateTriggerCount')) [UpdateTrigger\u306e\u6570]\n\t , SUM(CASE WHEN tables.is_ms_shipped = 0 AND pa.index_id IN (1,0) THEN pa.rows ELSE 0 END) [\u884c\u6570]\n  from sys.tables tables\n  left join\n       (select *\n          from sys.key_constraints\n\t\t where type = 'PK') AS constraints\n\t\t ON constraints.parent_object_id = tables.object_id\n inner join sys.partitions pa ON pa.object_id = tables.object_id\n where tables.name like @table_name\n group by tables.object_id, tables.name\n order by tables.name;\n```\n\n![summary.sql\u5b9f\u884c\u7d50\u679c](https://qiita-image-store.s3.amazonaws.com/0/51655/2619a7c3-b547-0a2d-56ef-f2a32096973c.png)\n\n\n#\u5217\u60c5\u5831\u306e\u4e00\u89a7\n\n```sql:detail.sql\n--\u30c6\u30fc\u30d6\u30eb\u306e\u5217\u3054\u3068\u306e\u8a73\u7d30\u3092\u8868\u793a\u3057\u307e\u3059\n--\u578b\u540d\u3001NULL\u8a31\u53ef\u3001IDENTITY\u5217\u3001\u8a08\u7b97\u5217\u3001PK\u306b\u4f7f\u308f\u308c\u3066\u3044\u308b\u5217\u3001ClusterdIndex\u306b\u4f7f\u308f\u308c\u3066\u3044\u308b\u5217\u3001NonClusterdIndex(key\u304c\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30ad\u30fc\u3067\u3001inc\u304c\u4ed8\u52a0\u5217)\u306e\u60c5\u5831\u3092\u4e00\u89a7\u3067\u8868\u793a\u3057\u307e\u3059\n--\u30c6\u30fc\u30d6\u30eb\u540d\u3001\u5217\u540d\u3001\u578b\u540d\u306e\u90e8\u5206\u4e00\u81f4\u691c\u7d22\u304c\u53ef\u80fd\u3067\u3059\n--NCI\u306e\u8868\u793a\u6570\u306f\u3001\u9014\u4e2d\u306b\u3042\u308bMAX(CASE WHEN index_col_info.ordered_index_id = 2\u306e\u7b87\u6240\u3092\u5897\u3084\u3057\u3066\u3044\u3051\u3070\u53ef\u80fd\u3067\u3059\u304c\u3001\u304d\u308c\u3044\u306a\u3084\u308a\u65b9\u3067\u306f\u306a\u3044\u3067\u3059\n\n--detail\n--\u3053\u3053\u306b\u30c6\u30fc\u30d6\u30eb\u540d\u3001\u5217\u540d\u306e\u691c\u7d22\u6761\u4ef6\u3092\u6307\u5b9a\u3057\u307e\u3059\ndeclare @table_name nvarchar(128) = '%Customer%';\ndeclare @col_name   nvarchar(128) = '%';\ndeclare @type_name  nvarchar(128) = '%';\n\n\nWITH table_info(object_id, table_name, cols_name, column_id, is_nullable, is_identity, is_computed, type_name)\nAS\n(\nselect tables.object_id, tables.name table_name\n     , cols.name cols_name, cols.column_id, cols.is_nullable, cols.is_identity, cols.is_computed\n\t , types.name type_name\n  from (select * from sys.tables where name like @table_name) tables\n inner join\n       (select * from sys.columns where name like @col_name) cols\n\t   ON cols.object_id = tables.object_id\n inner join\n       (select * from sys.types where name like @type_name) types\n       ON types.user_type_id = cols.user_type_id\n)\n--\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u95a2\u9023\u60c5\u5831\u3002\u81ea\u8eab\u3068\u526f\u554f\u3044\u5408\u308f\u305b\u3067\u7d50\u5408\u3057\u3066\u3044\u308b\u306e\u306f\u3001index_id\u3092\u9023\u756a\u3067\u4e26\u3079\u305f\u3044\u305f\u3081\n--index_id=1\u304cCI\u3068\u306a\u308b\u304c\u3001\u5358\u7d14\u306bRANK\u3067\u4e26\u3079\u66ff\u3048\u308b\u3068\u3001CI\u304c\u306a\u3044\u3082\u306e\u307e\u3067ordered_index_id\u306e\u6700\u5c0f\u5024\u304c[1]\u306b\u306a\u3063\u3066\u3057\u307e\u3046\n--\u6700\u5c0f\u306eindex_id\u3092object_id\u6bce\u306b\u53d6\u5f97\u3057\u3066\u3001index_id=1\u4ee5\u5916\u3092+1\u3057\u3066\u3001\u9806\u5e8f\u3092\u7dad\u6301\u3059\u308b\u3068\u3044\u3046\u611a\u884c\u3092\u5b9f\u65bd\uff08\u8868\u793a\u6642\u306b\u8272\u3005\u9762\u5012\u306b\u306a\u308b\u306e\u3067\u3001\u3053\u3053\u3067\u7d42\u308f\u3089\u305b\u305f\u3044\uff09\n, index_col_info(object_id, index_id, column_id, is_included_column, ordered_index_id)\nAS\n(\nselect a.object_id, a.index_id, a.column_id, a.is_included_column\n     , (CASE WHEN b.min_index_id = 1 THEN 0 ELSE 1 END) + b.ordered_index_id as ordered_index_id\n  from sys.index_columns a\n inner join\n       (select object_id\n\t         , index_id\n\t         , RANK() OVER (PARTITION BY object_id ORDER BY index_id) ordered_index_id\n\t\t\t , (select MIN(index_id) from sys.index_columns c where c.object_id = d.object_id) min_index_id\n\t\t  from sys.index_columns d\n\t\t group by object_id, index_id) AS b\n\t\t on b.object_id = a.object_id and b.index_id = a.index_id\n)\nselect MAX(tables.table_name) [\u30c6\u30fc\u30d6\u30eb\u540d]\n\t , MAX(tables.cols_name)  [\u5217\u540d]\n\t , MAX(tables.type_name)  [\u578b\u540d]\n\t , MAX(CASE WHEN tables.is_nullable = 1 THEN '\u25cb' ELSE '' END) [NULL\u8a31\u53ef]\n\t , MAX(CASE WHEN tables.is_identity = 1 THEN '\u25cb' ELSE '' END) [\u81ea\u52d5\u63a1\u756a]\n\t , MAX(CASE WHEN tables.is_computed = 1 THEN '\u25cb' ELSE '' END) [\u8a08\u7b97\u5217]\n\t , MAX(CASE WHEN index_col_info_for_pk.object_id IS NOT NULL and tables.column_id = index_col_info_for_pk.column_id THEN '\u25cb' ELSE '' END) PK\n\t , MAX(CASE WHEN index_col_info.ordered_index_id = 1 THEN '\u25cb'\n\t\t\t\tELSE '' END) CI\n     --\u3053\u306e\u4e0b\u3092\u5897\u3084\u3057\u3066\u3044\u3051\u3070\u4f55\u500b\u3067\u3082\u8868\u793a\u53ef\u80fd\u3060\u304c\u3001\u30db\u30f3\u30c8\u306f\u691c\u7d22\u5bfe\u8c61\u306b\u5f15\u3063\u304b\u304b\u3063\u305fNCI\u306e\u6570\u3060\u3051\u306b\u7d5e\u3063\u305f\u307b\u3046\u304c\u898b\u3084\u3059\u3044\u3068\u601d\u3046\n\t , MAX(CASE WHEN index_col_info.ordered_index_id = 2 AND index_col_info.is_included_column = 0 THEN 'key'\n\t            WHEN index_col_info.ordered_index_id = 2 AND index_col_info.is_included_column = 1 THEN 'inc'\n\t\t\t\tELSE '' END) NCI1\n\t , MAX(CASE WHEN index_col_info.ordered_index_id = 3 AND index_col_info.is_included_column = 0 THEN 'key'\n\t            WHEN index_col_info.ordered_index_id = 3 AND index_col_info.is_included_column = 1 THEN 'inc'\n\t\t\t\tELSE '' END) NCI2\n\t , MAX(CASE WHEN index_col_info.ordered_index_id = 4 AND index_col_info.is_included_column = 0 THEN 'key'\n\t            WHEN index_col_info.ordered_index_id = 4 AND index_col_info.is_included_column = 1 THEN 'inc'\n\t\t\t\tELSE '' END) NCI3\n\t , MAX(CASE WHEN index_col_info.ordered_index_id = 5 AND index_col_info.is_included_column = 0 THEN 'key'\n\t            WHEN index_col_info.ordered_index_id = 5 AND index_col_info.is_included_column = 1 THEN 'inc'\n\t\t\t\tELSE '' END) NCI4\n  from table_info tables\n  left join index_col_info ON index_col_info.object_id = tables.object_id and index_col_info.column_id = tables.column_id\n  left join\n       (select *\n          from sys.key_constraints\n\t\t where type = 'PK') AS constraints\n\t\t ON constraints.parent_object_id = tables.object_id\n  left join index_col_info index_col_info_for_pk\n         ON index_col_info_for_pk.object_id = tables.object_id\n\t\tand index_col_info_for_pk.index_id = constraints.unique_index_id\n group by tables.table_name, tables.column_id\n order by tables.table_name, tables.column_id;\n```\n\n![detail.sql\u5b9f\u884c\u7d50\u679c](https://qiita-image-store.s3.amazonaws.com/0/51655/d3f35f8b-13b3-a99b-52a4-44db70f722cc.png)\n\n\n#\u6539\u3081\u3066\u30ab\u30bf\u30ed\u30b0\u30d3\u30e5\u30fc\n\u4e0a\u8a18\u306e\u30c7\u30fc\u30bf\u3092\u8868\u793a\u3059\u308b\u305f\u3081\u306b\u3001sys.objects\u3092\u59cb\u3081\u3068\u3059\u308b\u30ab\u30bf\u30ed\u30b0\u30d3\u30e5\u30fc\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\n\n\u4eca\u56de\u4f7f\u7528\u3057\u305f\u30ab\u30bf\u30ed\u30b0\u30d3\u30e5\u30fc\u3068\u95a2\u9023\u60c5\u5831\u306b\u3064\u3044\u3066\u7c21\u5358\u306b\u8aac\u660e\u3057\u307e\u3059\n\n##\u6982\u8981\nsys.objects\u306bsqlserver\u304c\u7ba1\u7406\u3057\u3066\u3044\u308b\u3060\u3044\u305f\u3044\u306e\u3082\u306e\u304c\u5165\u3063\u3066\u3044\u308b\u611f\u3058\u3067\u3059\n\u3053\u306e\u30ad\u30fc\u304c[object_id]\u3067\u3001\u4ed6\u306esys.XXX\u306f\u3053\u306e[object_id]\u3067\u53c2\u7167\u3057\u307e\u3059\n\nsys.XXX\u306b\u3088\u3063\u3066\u306f\u3001\u5217\u306e\u5b9a\u7fa9\u304c[sys.objects]\u3092\u7d99\u627f\u3057\u3066\u3044\u308b\u3082\u306e\u3082\u3042\u308a\u307e\u3059\n\u306a\u306e\u3067\u307e\u305a\u306f\u3001[sys.objects]\u3092\u3056\u3063\u304f\u308a\u773a\u3081\u3066\u3001\u3084\u308a\u305f\u3044\u3053\u3068\u306b\u95a2\u9023\u3042\u308a\u305d\u3046\u306asys.XXX\u3092\n[\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 \u30ab\u30bf\u30ed\u30b0 \u30d3\u30e5\u30fc (Transact-SQL)](http://msdn.microsoft.com/ja-jp/library/ms189783.aspx)\n\u304b\u3089\u63a2\u3059\u3068\u3001\u610f\u5916\u3068\u7c21\u5358\u306b\u76ee\u7684\u9054\u6210\u3067\u304d\u305d\u3046\u3067\u3059\n\n##[sys.objects (Transact-SQL)](http://msdn.microsoft.com/ja-jp/library/ms190324.aspx)\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5185\u3067\u4f5c\u6210\u3055\u308c\u308b\u30e6\u30fc\u30b6\u30fc\u5b9a\u7fa9\u306e\u30b9\u30ad\u30fc\u30de \u30b9\u30b3\u30fc\u30d7 \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3054\u3068\u306b 1 \u884c\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3057\u307e\u3059\u3002\nDDL \u30c8\u30ea\u30ac\u30fc\u306f\u30b9\u30ad\u30fc\u30de \u30b9\u30b3\u30fc\u30d7\u3067\u306f\u306a\u3044\u305f\u3081\u3001sys.objects \u3067\u306f\u8868\u793a\u3055\u308c\u307e\u305b\u3093\u3002 DML \u3068 DDL \u306e\u4e21\u65b9\u3092\u542b\u3080\u3059\u3079\u3066\u306e\u30c8\u30ea\u30ac\u30fc\u306f\u3001sys.triggers \u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002 sys.triggers \u306b\u306f\u3001\u3055\u307e\u3056\u307e\u306a\u7a2e\u985e\u306e\u30c8\u30ea\u30ac\u30fc\u306e\u540d\u524d\u30b9\u30b3\u30fc\u30d7 \u30eb\u30fc\u30eb\u3092\u6df7\u5728\u3055\u305b\u3066\u683c\u7d0d\u3067\u304d\u307e\u3059\u3002\n\n##[sys.tables (Transact-SQL)](http://msdn.microsoft.com/ja-jp/library/ms187406.aspx)\nsys.objects \u304b\u3089\u7d99\u627f\u3057\u305f\u5217\u3092\u542b\u3080\nSQL Server \u5185\u306e\u30e6\u30fc\u30b6\u30fc \u30c6\u30fc\u30d6\u30eb\u3054\u3068\u306b 1 \u884c\u306e\u30c7\u30fc\u30bf\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n##[sys.columns (Transact-SQL)](http://msdn.microsoft.com/ja-jp/library/ms176106.aspx)\n\u30d3\u30e5\u30fc\u3084\u30c6\u30fc\u30d6\u30eb\u306a\u3069\u3001\u5217\u3092\u6301\u3064\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5217\u3054\u3068\u306b 1 \u884c\u306e\u30c7\u30fc\u30bf\u3092\u8fd4\u3057\u307e\u3059\u3002 \u4ee5\u4e0b\u306b\u3001\u5217\u3092\u6301\u3064\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u7a2e\u985e\u306e\u4e00\u89a7\u3092\u793a\u3057\u307e\u3059\u3002\n\n* \u30c6\u30fc\u30d6\u30eb\u5024\u30a2\u30bb\u30f3\u30d6\u30ea\u95a2\u6570 (FT)\n* \u30a4\u30f3\u30e9\u30a4\u30f3 \u30c6\u30fc\u30d6\u30eb\u5024 SQL \u95a2\u6570 (IF)\n* \u5185\u90e8\u30c6\u30fc\u30d6\u30eb (IT)\n* \u30b7\u30b9\u30c6\u30e0 \u30c6\u30fc\u30d6\u30eb (S)\n* \u30c6\u30fc\u30d6\u30eb\u5024 SQL \u95a2\u6570 (TF)\n* \u30e6\u30fc\u30b6\u30fc \u30c6\u30fc\u30d6\u30eb (U)\n* \u30d3\u30e5\u30fc (V)\n\n\u4eca\u56de\u4f7f\u3063\u305f\u5217\nobject_id\uff1a\u3053\u306e\u5217\u304c\u5c5e\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306eID(sys.objects\u3092\u53c2\u7167\u3059\u308b)\ncolumn_id\uff1a\u5217\u306eID\u3002\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5185\u3067\u4e00\u610f\u3002\u5217ID\u306f\u9023\u7d9a\u3057\u305f\u5024\u306b\u306a\u3089\u306a\u3044\u3053\u3068\u304c\u3042\u308b\nsystem_type_id\uff1a\u5217\u306e\u30b7\u30b9\u30c6\u30e0\u578b\u306eID\nuser_type_id\uff1a\u30e6\u30fc\u30b6\u30fc\u304c\u5b9a\u7fa9\u3057\u305f\u5217\u306e\u578b\u306eID\uff08\u57fa\u672c\u7684\u306b\u306f\u3001system_type_id\u3068\u540c\u3058\u3082\u306e\u304c\u306f\u3044\u308b\uff1f\uff09\u578b\u306e\u540d\u524d\u3092\u53d6\u5f97\u3059\u308b\u306b\u306f\u3001[sys.types (Transact-SQL)](http://msdn.microsoft.com/ja-jp/library/ms188021.aspx)\u30ab\u30bf\u30ed\u30b0\u30d3\u30e5\u30fc\u3068\u7d50\u5408\u3059\u308b\nis_nullable\nis_identity\nis_computed\n\n\n##[sys.types (Transact-SQL)](http://msdn.microsoft.com/ja-jp/library/ms188021.aspx)\n\u30b7\u30b9\u30c6\u30e0\u578b\u3068\u30e6\u30fc\u30b6\u30fc\u5b9a\u7fa9\u306e\u578b\u3054\u3068\u306b 1 \u884c\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3057\u307e\u3059\u3002\nsystem_type_id:243\u304c\u30e6\u30fc\u30b6\u5b9a\u7fa9\u578b(\u3068\u601d\u308f\u308c\u308b)\nuser_type_id\uff1a\u30c7\u30fc\u30bf\u30fc\u30d9\u30fc\u30b9\u5185\u3067\u4e00\u610f\u3002\u30b7\u30b9\u30c6\u30e0\u30c7\u30fc\u30bf\u578b\u306e\u5834\u5408\u306f\u3001user_type_id = system_type_id\u3068\u306a\u308b\n\n##[sys.indexes (Transact-SQL)](http://msdn.microsoft.com/ja-jp/library/ms173760.aspx)\n\u30c6\u30fc\u30d6\u30eb\u3001\u30d3\u30e5\u30fc\u3001\u30c6\u30fc\u30d6\u30eb\u5024\u95a2\u6570\u306a\u3069\u3001\u30c6\u30fc\u30d6\u30eb \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u307e\u305f\u306f\u30d2\u30fc\u30d7\u3054\u3068\u306b 1 \u884c\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3057\u307e\u3059\u3002\n\n##[sys.index_columns (Transact-SQL)](http://msdn.microsoft.com/ja-jp/library/ms175105.aspx)\nsys.indexes \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u307e\u305f\u306f\u9806\u5e8f\u4ed8\u3051\u3089\u308c\u3066\u3044\u306a\u3044\u30c6\u30fc\u30d6\u30eb (\u30d2\u30fc\u30d7) \u306e\u4e00\u90e8\u3067\u3042\u308b\u5217\u3054\u3068\u306b 1 \u3064\u306e\u884c\u3092\u542b\u307f\u307e\u3059\u3002\nindex_id\uff1a\u5217\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306eID\nindex_column_id\uff1a\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u5217\u306e ID \u3067\u3059\u3002 index_column_id \u306f\u3001index_id \u5185\u3067\u306e\u307f\u4e00\u610f\u3067\u3059\u3002(index_id\u5185\u3067\u306e\u307f\u4e00\u610f)\ncolumn_id\uff1aobject_id \u5185\u306e\u5217\u306e ID \u3067\u3059\u3002column_id \u306f\u3001object_id \u5185\u3067\u306e\u307f\u4e00\u610f\u3067\u3059\u3002\uff08sys.columns\u3068\u4e00\u81f4\u3059\u308b\uff09\nis_descending_key\uff1a1:\u964d\u9806\nis_included_column\uff1a1\uff1a\u4ed8\u52a0\u5217\n\n##[OBJECTPROPERTY (Transact-SQL)](http://msdn.microsoft.com/ja-jp/library/ms176105.aspx)\n\u6307\u5b9a\u3057\u305f\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u5bfe\u3059\u308b\u5024\u3092\u8fd4\u3057\u3066\u304f\u308c\u308b\n\u3088\u304f\u308f\u3089\u304b\u306a\u3044\u306e\u3067\u30b5\u30f3\u30d7\u30eb\u3092\u8a18\u8f09\u3057\u3066\u304a\u304d\u307e\u3059\n\n```sql\nselect tables.name\n     , CASE OBJECTPROPERTY(tables.object_id, 'TableHasClustIndex') = 1 THEN '\u25cb' ELSE '' END [CI\u6709\u7121]]\n  from sys.tables tables\n order by tables.name;\n```\n\n[TableHasClustIndex]\u306a\u3069\u3001\u6307\u5b9a\u3059\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u5909\u66f4\u3059\u308c\u3070\u3001\u305d\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u5024\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\n\u8272\u3093\u306a\u30d7\u30ed\u30d1\u30c6\u30a3\u304c\u3042\u308a\u307e\u3059\u304c\u3001[OBJECTPROPERTY (Transact-SQL)](http://msdn.microsoft.com/ja-jp/library/ms176105.aspx)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\n\n##[sys.key_constraints (Transact-SQL)](http://msdn.microsoft.com/ja-jp/library/ms174321.aspx)\t\n\u4e3b\u30ad\u30fc\u5236\u7d04\u307e\u305f\u306f\u4e00\u610f\u5236\u7d04\u3067\u3042\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3054\u3068\u306b 1 \u884c\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3057\u307e\u3059\u3002 sys.objects.type \u304c PK \u3068 UQ \u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u542b\u307e\u308c\u307e\u3059\u3002\nunique_index_id\uff1a\u3053\u306e\u5236\u7d04\u3092\u8a2d\u5b9a\u3059\u308b\u305f\u3081\u306b\u4f5c\u6210\u3055\u308c\u305f\u3001\u89aa\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u5fdc\u3059\u308b\u4e00\u610f\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e ID\u3002\nparent_object_id\uff1asys.objects\u306b\u542b\u307e\u308c\u3066\u3044\u308b \u89aa\u306eID\n\n##[\u5171\u901a\u30c6\u30fc\u30d6\u30eb\u5f0f(CTE)](http://technet.microsoft.com/ja-jp/library/ms190766(v=sql.105).aspx)\n\n> \u5404\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u306e\u5b9f\u884c\u30b9\u30b3\u30fc\u30d7\u5185\u3067\u5b9a\u7fa9\u3055\u308c\u308b\u4e00\u6642\u7d50\u679c\u30bb\u30c3\u30c8\u3068\u8003\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\n\n\u8aa4\u89e3\u3092\u4e0e\u3048\u304b\u306d\u306a\u3044\u3067\u3059\u304c\u3001\u7c21\u5358\u306b\u8a18\u8f09\u3059\u308b\u3068\u3001\u305d\u306eSQL\u5185\u3067\u53c2\u7167\u53ef\u80fd\u306aView\u3092\u5b9a\u7fa9\u3059\u308b\u3088\u3046\u306a\u3082\u306e\u3067\u3059\n\n\u30b1\u30fc\u30b9\u5225\u306b\u3088\u308b\u4f7f\u3044\u65b9\u3082\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\n[WITH common_table_expression (Transact-SQL)](http://msdn.microsoft.com/ja-jp/library/ms175972.aspx)\n\n##[\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 \u30aa\u30d6\u30b8\u30a7\u30af\u30c8](http://technet.microsoft.com/ja-jp/library/ms172451(v=sql.110).aspx)\n\n> Microsoft SQL Server Compact \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3001\u3044\u304f\u3064\u304b\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u6700\u5927\u30b5\u30a4\u30ba\u5236\u9650\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n\n\n\u30c6\u30fc\u30d6\u30eb\u306e\u30ec\u30b3\u30fc\u30c9\u6570\u3068\u304b\u7c21\u5358\u306b\u307f\u305f\u3044\u306a\u3068\u601d\u3046\u4e8b\u306f\u3088\u304f\u3042\u3063\u3066\u3001\u6bce\u56de\u8abf\u3079\u305f\u308a\u3057\u3066\u307e\u3057\u305f(sys.XXX\u3063\u3066\u306a\u3093\u3060\u304b\u9762\u5012\u306a\u611f\u3058\u304c\u3057\u3066\u3044\u305f\u306e\u3067)\n\u3067\u3082\u898b\u3066\u307f\u308b\u3068\u305d\u3053\u307e\u3067\u9762\u5012\u3067\u306f\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u3053\u3053\u3092\u53c2\u8003\u306b\u3044\u308d\u3044\u308d\u8a66\u3057\u3066\u8cb0\u3048\u308c\u3070\u3068\u601d\u3044\u307e\u3059\n\n\n#\u53c2\u8003\uff1a[\u65b9\u6cd5 : \u30b5\u30f3\u30d7\u30eb \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b](https://msdn.microsoft.com/ja-jp/library/8b6y4c7s.aspx)\n\n\u3053\u3061\u3089\u306e\u624b\u9806\u306b\u5f93\u3048\u3070\u57fa\u672cOK\u3067\u3059\u304c\u3001SQL Server 2012\u4ee5\u4e0a\u306b\u5165\u308c\u308b\u5834\u5408\u306e\u6ce8\u610f\u4e8b\u9805(sp_dboption\u304c\u4f7f\u3048\u306a\u3044\u306e\u3067\u3001ALTER DATABASE\u306b\u3059\u308b\u3060\u3051\u3067\u3059\u304c)\u3064\u3044\u3066\u624b\u9806\u3068\u3068\u3082\u306b\u7c21\u5358\u306b\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059\n\n1. [Northwind and pubs Sample Databases for SQL Server 2000](http://www.microsoft.com/en-us/download/details.aspx?id=23654)\u306e Web \u30b5\u30a4\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n2. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u5b9f\u884c\u3059\u308b\u3068\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u306e\u30eb\u30fc\u30c8 \u30d5\u30a9\u30eb\u30c0\u30fc\u306b\u3001SQL Server 2000 Sample Databases \u30d5\u30a9\u30eb\u30c0\u30fc\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3059 (C:\\SQL Server 2000 Sample Databases \u306a\u3069)\n3. SSMS\u3092\u958b\u304d\u3001DB\u3092\u4f5c\u6210\u3057\u305f\u3044SQL Server\u306b\u63a5\u7d9a\n4. \u30d5\u30a9\u30eb\u30c0\u30fc\u5185\u306e\u3001instnwnd.sql\u3068\u3001instpubs.sql\u3092SSMS\u3067\u958b\u304f\n5. \u305d\u308c\u305e\u308c\u306eSQL\u5185\u306b[sp_dboption](https://technet.microsoft.com/ja-jp/library/ms187310%28v=sql.105%29.aspx)\u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u304c\u3042\u308a\u307e\u3059\u304c\u30012008\u307e\u3067\u3057\u304b\u4f7f\u3048\u306a\u3044\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\n\n```sql:instnwnd.sql\n/* \nexec sp_dboption 'Northwind','trunc. log on chkpt.','true'\nexec sp_dboption 'Northwind','select into/bulkcopy','true'\n*/\nalter database Northwind set recovery simple\n```\n\n```sql:instpubs.sql\n/*\nexecute sp_dboption 'pubs' ,'trunc. log on chkpt.' ,'true'\n*/\nalter database pubs  set recovery simple\n```\n\n\u203b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u30b3\u30de\u30f3\u30c9\u306e\u610f\u5473\n'trunc. log on chkpt.','true'\n> SQL Server 2000 \u3067\u8d77\u52d5\u3057\u3001trunc. log on chkpt. \u30aa\u30d7\u30b7\u30e7\u30f3\u306b true \u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u5fa9\u65e7\u30e2\u30c7\u30eb\u306f SIMPLE \u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\u30aa\u30d7\u30b7\u30e7\u30f3\u306b false \u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u5fa9\u65e7\u30e2\u30c7\u30eb\u306f FULL \u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\n\n'select into/bulkcopy','true'\n> Microsoft SQL Server 2000 \u304b\u3089\u4f7f\u7528\u3092\u958b\u59cb\u3057\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u73fe\u5728\u306e\u5fa9\u65e7\u30e2\u30c7\u30eb\u304c FULL \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001select into/bulkcopy option \u3092\u4f7f\u7528\u3059\u308b\u3068\u5fa9\u65e7\u30e2\u30c7\u30eb\u304c BULK_LOGGED \u306b\u518d\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\u5fa9\u65e7\u30e2\u30c7\u30eb\u3092\u9069\u5207\u306a\u65b9\u6cd5\u3067\u5909\u66f4\u3059\u308b\u306b\u306f\u3001ALTER DATABASE \u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u306e SET RECOVERY \u53e5\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\u4fee\u6b63\u3057\u305fSQL\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\n", "tags": ["Transact-SQL", "SQLServer"]}