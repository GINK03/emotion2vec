{"context": "SQLite\u3067\u306f\u6570\u5b66\u95a2\u6570\u3084\u7d71\u8a08\u95a2\u6570\u306a\u3069\u3092\u4f7f\u3046\u306b\u306f\u62e1\u5f35\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3046\u5fc5\u8981\u304c\u3042\u308b\u304cPyramid\u304b\u3089\u4f7f\u3046\u306b\u306f\u3061\u3087\u3063\u3068\u5de5\u592b\u304c\u3044\u3063\u305f\u3002\n\n\u62e1\u5f35\u306e\u5c0e\u5165\n\u4ee5\u4e0b\u306eURL\u304b\u3089 extension-functions.c \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n* https://www.sqlite.org/contrib\n\u6b21\u306b\u5171\u6709\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f5c\u6210\u3092\u3059\u308b\u3002\ngcc -fPIC -shared /home/takaki/Desktop/extension-functions.c -o libsqlitefunctions.so\n\nsqlite\u3092\u8d77\u52d5\u3057\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3067\u304d\u308c\u3070\u62e1\u5f35\u30e9\u30a4\u30d6\u30e9\u30ea\u306fOK\u3002\n$ sqlite3 \nSQLite version 3.13.0 2016-05-18 10:57:30\nEnter \".help\" for usage hints.\nConnected to a transient in-memory database.\nUse \".open FILENAME\" to reopen on a persistent database.\nsqlite> select load_extension('./libsqlitefunctions.so');\n\nsqlite> select sin(3.14/2);\n0.999999682931835\nsqlite> \n\n\nPyramid\u304b\u3089\u306e\u547c\u51fa\n\u901a\u5e38\u306e\u96db\u5f62\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5909\u66f4\u3092\u3059\u308b\u3002\n\nmodel/__init__.py\ndef get_session_factory(engine):\n    @event.listens_for(engine, \"connect\")\n    def connect(dbapi_connection, connection_rec):\n        dbapi_connection.enable_load_extension(True)\n        dbapi_connection.execute(\"SELECT load_extension('{0}');\".format(FULL_PATH_OF_LIB))\n    factory = sessionmaker()\n    factory.configure(bind=engine)\n    return factory\n\n\n\nhttp://abrightersun.de/blog/spatialite-and-sqlalchemy.html\nhttps://code.ffdn.org/FFDN/ffdn-db/src/master/ffdnispdb/__init__.py\n\nSQLite\u3067\u306f\u6570\u5b66\u95a2\u6570\u3084\u7d71\u8a08\u95a2\u6570\u306a\u3069\u3092\u4f7f\u3046\u306b\u306f\u62e1\u5f35\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3046\u5fc5\u8981\u304c\u3042\u308b\u304cPyramid\u304b\u3089\u4f7f\u3046\u306b\u306f\u3061\u3087\u3063\u3068\u5de5\u592b\u304c\u3044\u3063\u305f\u3002\n\n# \u62e1\u5f35\u306e\u5c0e\u5165\n\u4ee5\u4e0b\u306eURL\u304b\u3089 extension-functions.c \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n* https://www.sqlite.org/contrib\n\u6b21\u306b\u5171\u6709\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f5c\u6210\u3092\u3059\u308b\u3002\n\n```\ngcc -fPIC -shared /home/takaki/Desktop/extension-functions.c -o libsqlitefunctions.so\n```\n\nsqlite\u3092\u8d77\u52d5\u3057\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3067\u304d\u308c\u3070\u62e1\u5f35\u30e9\u30a4\u30d6\u30e9\u30ea\u306fOK\u3002\n\n```\n$ sqlite3 \nSQLite version 3.13.0 2016-05-18 10:57:30\nEnter \".help\" for usage hints.\nConnected to a transient in-memory database.\nUse \".open FILENAME\" to reopen on a persistent database.\nsqlite> select load_extension('./libsqlitefunctions.so');\n\nsqlite> select sin(3.14/2);\n0.999999682931835\nsqlite> \n```\n\n# Pyramid\u304b\u3089\u306e\u547c\u51fa\n\u901a\u5e38\u306e\u96db\u5f62\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5909\u66f4\u3092\u3059\u308b\u3002\n\n```python:model/__init__.py\ndef get_session_factory(engine):\n    @event.listens_for(engine, \"connect\")\n    def connect(dbapi_connection, connection_rec):\n        dbapi_connection.enable_load_extension(True)\n        dbapi_connection.execute(\"SELECT load_extension('{0}');\".format(FULL_PATH_OF_LIB))\n    factory = sessionmaker()\n    factory.configure(bind=engine)\n    return factory\n```\n\n* http://abrightersun.de/blog/spatialite-and-sqlalchemy.html\n* https://code.ffdn.org/FFDN/ffdn-db/src/master/ffdnispdb/__init__.py\n", "tags": ["pyramid", "Python", "sqlite", "sqlalchemy"]}