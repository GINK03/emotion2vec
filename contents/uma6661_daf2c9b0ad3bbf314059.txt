{"context": " More than 1 year has passed since last update.\u53c2\u8003webglorg;\n\u539f\u5247\u3068\u3057\u3066\u4e0a\u8a18\u30da\u30fc\u30b8\u3092\u898b\u306a\u304c\u3089\u5b66\u7fd2\u3057\u305f\u8a18\u9332\u3067\u3059\u3002\n\n\u8907\u96d1\u5316\u3059\u308b\u30e2\u30c7\u30eb\u306b\u5bfe\u5fdc\u3059\u308b\u305f\u3081\u306b\n\u9802\u70b9\u30c7\u30fc\u30bf\u3092\u306e\u80a5\u5927\u5316\u3092\u3042\u308b\u7a0b\u5ea6\u6291\u3048\u308b\u305f\u3081\u306e\u624b\u6bb5\u304c\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d0\u30c3\u30d5\u30a1\u3002\n\u901a\u79f0IBO\u3002\n\n\u9802\u70b9\u3092\u4f7f\u3044\u56de\u3059\n\u30dd\u30ea\u30b4\u30f3\u306f\u57fa\u672c\u7684\u306b\u4e09\u89d2\u5f62\u306a\u306e\u3067\u3001\u4f8b\u3048\u3070\u56db\u89d2\u5f62\u3092\u8868\u73fe\u3057\u305f\u3044\u6642\u306f\u4e09\u89d2\u5f62\u304c\u4e8c\u3064\u5fc5\u8981\u306b\u306a\u308b\u3002\n\u5358\u7d14\u306b\u8a08\u7b97\u3059\u308b\u3068\u9802\u70b9\u304c\uff16\u3064\u5fc5\u8981\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308b\u3002\n\u3057\u304b\u3057\u91cd\u306a\u308b\u90e8\u5206\u304c\u51fa\u3066\u3057\u307e\u3046\u3002\n\u3053\u308c\u306f\u7121\u99c4\u306a\u306e\u3067\u3001\u91cd\u306a\u3063\u3066\u3057\u307e\u3046\u9802\u70b9\u3092\u518d\u5229\u7528\u3057\u305f\u3044\u3002\u305d\u3093\u306a\u6642\u306eIBO\u3002\n\u30dd\u30ea\u30b4\u30f3\u3092\u63cf\u5199\u3059\u308b\u969b\u306b\u3001\u3069\u306e\u9802\u70b9\u3092\u4f7f\u3048\u3070\u3044\u3044\u306e\u304b\u3092\u6559\u3048\u3066\u304f\u308c\u308b\u306e\u304cIBO\u3067\u3059\u3002\n\u307e\u305f\u3001IBO\u3092\u7528\u3044\u308b\u3068\u3001GPU\u4e0a\u306e\u30e1\u30e2\u30ea\u9818\u57df\u306b\u30c7\u30fc\u30bf\u3068\u3057\u3066\u4fdd\u5b58\u3055\u308c\u308b\u306e\u3067\u3001\u3044\u3061\u3044\u3061GPU\u306b\u8ee2\u9001\u3059\u308b\u3053\u3068\u3082\u7121\u304f\u306a\u308b\u306e\u3067\u3001\u7701\u30ea\u30bd\u30fc\u30b9\u3067\u3059\u3002\n\nIBO\u306e\u751f\u6210\nfunction create_ibo(data){\n    // \u30d0\u30c3\u30d5\u30a1\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u751f\u6210\n    var ibo = gl.createBuffer();\n\n    // \u30d0\u30c3\u30d5\u30a1\u3092\u30d0\u30a4\u30f3\u30c9\u3059\u308b\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n\n    // \u30d0\u30c3\u30d5\u30a1\u306b\u30c7\u30fc\u30bf\u3092\u30bb\u30c3\u30c8\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Int16Array(data), gl.STATIC_DRAW);\n\n    // \u30d0\u30c3\u30d5\u30a1\u306e\u30d0\u30a4\u30f3\u30c9\u3092\u7121\u52b9\u5316\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n\n    // \u751f\u6210\u3057\u305fIBO\u3092\u8fd4\u3057\u3066\u7d42\u4e86\n    return ibo;\n}\n\nIBO \u7528\u306e\u914d\u5217\u30c7\u30fc\u30bf\u306f VBO \u7528\u306e\u914d\u5217\u30c7\u30fc\u30bf\u3068\u540c\u3058\u3088\u3046\u306b\u3042\u3089\u304b\u3058\u3081\u5b9a\u7fa9\u3057\u3066\u304a\u304f\u3002\nvar index = [\n    0, 1, 2,\n    1, 2, 3\n];\n\n\nIBO\u3092\u7528\u3044\u305f\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\n\u4e8b\u524d\u306b\u30d0\u30a4\u30f3\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\ngl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n\n\u307e\u305f\u3001\u3053\u308c\u307e\u3067\u7528\u3044\u3066\u3044\u305fdrawArrays\u30e1\u30bd\u30c3\u30c9\u3067\u306f\u306a\u304f\ndrawElement\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3046\u3002\ngl.drawElements(gl.TRIANGLES, index.length, gl.UNSIGNED_SHORT, 0);\n\n\n\u5168\u6587\nonload = function(){\n    // canvas\u30a8\u30ec\u30e1\u30f3\u30c8\u3092\u53d6\u5f97\n    var c = document.getElementById('canvas');\n    c.width = 500;\n    c.height = 300;\n\n    // webgl\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\n    var gl = c.getContext('webgl') || c.getContext('experimental-webgl');\n\n    // \u9802\u70b9\u30b7\u30a7\u30fc\u30c0\u3068\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u30b7\u30a7\u30fc\u30c0\u306e\u751f\u6210\n    var v_shader = create_shader('vs');\n    var f_shader = create_shader('fs');\n\n    // \u30d7\u30ed\u30b0\u30e9\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u751f\u6210\u3068\u30ea\u30f3\u30af\n    var prg = create_program(v_shader, f_shader);\n\n    // attributeLocation\u3092\u914d\u5217\u306b\u53d6\u5f97\n    var attLocation = new Array(2);\n    attLocation[0] = gl.getAttribLocation(prg, 'position');\n    attLocation[1] = gl.getAttribLocation(prg, 'color');\n\n    // attribute\u306e\u8981\u7d20\u6570\u3092\u914d\u5217\u306b\u683c\u7d0d\n    var attStride = new Array(2);\n    attStride[0] = 3;\n    attStride[1] = 4;\n\n    // \u9802\u70b9\u5c5e\u6027\u3092\u683c\u7d0d\u3059\u308b\u914d\u5217\n    var position = [\n         0.0,  1.0,  0.0,\n         1.0,  0.0,  0.0,\n        -1.0,  0.0,  0.0,\n         0.0, -1.0,  0.0\n    ];\n    var color = [\n        1.0, 0.0, 0.0, 1.0,\n        0.0, 1.0, 0.0, 1.0,\n        0.0, 0.0, 1.0, 1.0,\n        1.0, 1.0, 1.0, 1.0\n    ];\n\n    // \u9802\u70b9\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u683c\u7d0d\u3059\u308b\u914d\u5217\n    var index = [\n        0, 1, 2,\n        1, 2, 3\n    ];\n\n    // VBO\u306e\u751f\u6210\n    var pos_vbo = create_vbo(position);\n    var col_vbo = create_vbo(color);\n\n    // VBO \u3092\u767b\u9332\u3059\u308b\n    set_attribute([pos_vbo, col_vbo], attLocation, attStride);\n\n    // IBO\u306e\u751f\u6210\n    var ibo = create_ibo(index);\n\n    // IBO\u3092\u30d0\u30a4\u30f3\u30c9\u3057\u3066\u767b\u9332\u3059\u308b\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n\n    // uniformLocation\u306e\u53d6\u5f97\n    var uniLocation = gl.getUniformLocation(prg, 'mvpMatrix');\n\n    // minMatrix.js \u3092\u7528\u3044\u305f\u884c\u5217\u95a2\u9023\u51e6\u7406\n    // matIV\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\n    var m = new matIV();\n\n    // \u5404\u7a2e\u884c\u5217\u306e\u751f\u6210\u3068\u521d\u671f\u5316\n    var mMatrix = m.identity(m.create());\n    var vMatrix = m.identity(m.create());\n    var pMatrix = m.identity(m.create());\n    var tmpMatrix = m.identity(m.create());\n    var mvpMatrix = m.identity(m.create());\n\n    // \u30d3\u30e5\u30fc\u00d7\u30d7\u30ed\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5ea7\u6a19\u5909\u63db\u884c\u5217\n    m.lookAt([0.0, 0.0, 5.0], [0, 0, 0], [0, 1, 0], vMatrix);\n    m.perspective(45, c.width / c.height, 0.1, 100, pMatrix);\n    m.multiply(pMatrix, vMatrix, tmpMatrix);\n\n    // \u30ab\u30a6\u30f3\u30bf\u306e\u5ba3\u8a00\n    var count = 0;\n\n    // \u6052\u5e38\u30eb\u30fc\u30d7\n    (function(){\n        // canvas\u3092\u521d\u671f\u5316\n        gl.clearColor(0.0, 0.0, 0.0, 1.0);\n        gl.clearDepth(1.0);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n        // \u30ab\u30a6\u30f3\u30bf\u3092\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3059\u308b\n        count++;\n\n        // \u30ab\u30a6\u30f3\u30bf\u3092\u5143\u306b\u30e9\u30b8\u30a2\u30f3\u3092\u7b97\u51fa\n        var rad = (count % 360) * Math.PI / 180;\n\n        // \u30e2\u30c7\u30eb\u5ea7\u6a19\u5909\u63db\u884c\u5217\u306e\u751f\u6210(Y\u8ef8\u306b\u3088\u308b\u56de\u8ee2)\n        m.identity(mMatrix);\n        m.rotate(mMatrix, rad, [0, 1, 0], mMatrix);\n        m.multiply(tmpMatrix, mMatrix, mvpMatrix);\n        gl.uniformMatrix4fv(uniLocation, false, mvpMatrix);\n\n        // \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u7528\u3044\u305f\u63cf\u753b\u547d\u4ee4\n        gl.drawElements(gl.TRIANGLES, index.length, gl.UNSIGNED_SHORT, 0);\n\n        // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306e\u518d\u63cf\u753b\n        gl.flush();\n\n        // \u30eb\u30fc\u30d7\u306e\u305f\u3081\u306b\u518d\u5e30\u547c\u3073\u51fa\u3057\n        setTimeout(arguments.callee, 1000 / 30);\n    })();\n\n    // \u30b7\u30a7\u30fc\u30c0\u3092\u751f\u6210\u3059\u308b\u95a2\u6570\n    function create_shader(id){\n        // \u30b7\u30a7\u30fc\u30c0\u3092\u683c\u7d0d\u3059\u308b\u5909\u6570\n        var shader;\n\n        // HTML\u304b\u3089script\u30bf\u30b0\u3078\u306e\u53c2\u7167\u3092\u53d6\u5f97\n        var scriptElement = document.getElementById(id);\n\n        // script\u30bf\u30b0\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306f\u629c\u3051\u308b\n        if(!scriptElement){return;}\n\n        // script\u30bf\u30b0\u306etype\u5c5e\u6027\u3092\u30c1\u30a7\u30c3\u30af\n        switch(scriptElement.type){\n\n            // \u9802\u70b9\u30b7\u30a7\u30fc\u30c0\u306e\u5834\u5408\n            case 'x-shader/x-vertex':\n                shader = gl.createShader(gl.VERTEX_SHADER);\n                break;\n\n            // \u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u30b7\u30a7\u30fc\u30c0\u306e\u5834\u5408\n            case 'x-shader/x-fragment':\n                shader = gl.createShader(gl.FRAGMENT_SHADER);\n                break;\n            default :\n                return;\n        }\n\n        // \u751f\u6210\u3055\u308c\u305f\u30b7\u30a7\u30fc\u30c0\u306b\u30bd\u30fc\u30b9\u3092\u5272\u308a\u5f53\u3066\u308b\n        gl.shaderSource(shader, scriptElement.text);\n\n        // \u30b7\u30a7\u30fc\u30c0\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\n        gl.compileShader(shader);\n\n        // \u30b7\u30a7\u30fc\u30c0\u304c\u6b63\u3057\u304f\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u305f\u304b\u30c1\u30a7\u30c3\u30af\n        if(gl.getShaderParameter(shader, gl.COMPILE_STATUS)){\n\n            // \u6210\u529f\u3057\u3066\u3044\u305f\u3089\u30b7\u30a7\u30fc\u30c0\u3092\u8fd4\u3057\u3066\u7d42\u4e86\n            return shader;\n        }else{\n\n            // \u5931\u6557\u3057\u3066\u3044\u305f\u3089\u30a8\u30e9\u30fc\u30ed\u30b0\u3092\u30a2\u30e9\u30fc\u30c8\u3059\u308b\n            alert(gl.getShaderInfoLog(shader));\n        }\n    }\n\n    // \u30d7\u30ed\u30b0\u30e9\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\u3057\u30b7\u30a7\u30fc\u30c0\u3092\u30ea\u30f3\u30af\u3059\u308b\u95a2\u6570\n    function create_program(vs, fs){\n        // \u30d7\u30ed\u30b0\u30e9\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u751f\u6210\n        var program = gl.createProgram();\n\n        // \u30d7\u30ed\u30b0\u30e9\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30b7\u30a7\u30fc\u30c0\u3092\u5272\u308a\u5f53\u3066\u308b\n        gl.attachShader(program, vs);\n        gl.attachShader(program, fs);\n\n        // \u30b7\u30a7\u30fc\u30c0\u3092\u30ea\u30f3\u30af\n        gl.linkProgram(program);\n\n        // \u30b7\u30a7\u30fc\u30c0\u306e\u30ea\u30f3\u30af\u304c\u6b63\u3057\u304f\u884c\u306a\u308f\u308c\u305f\u304b\u30c1\u30a7\u30c3\u30af\n        if(gl.getProgramParameter(program, gl.LINK_STATUS)){\n\n            // \u6210\u529f\u3057\u3066\u3044\u305f\u3089\u30d7\u30ed\u30b0\u30e9\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6709\u52b9\u306b\u3059\u308b\n            gl.useProgram(program);\n\n            // \u30d7\u30ed\u30b0\u30e9\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u3066\u7d42\u4e86\n            return program;\n        }else{\n\n            // \u5931\u6557\u3057\u3066\u3044\u305f\u3089\u30a8\u30e9\u30fc\u30ed\u30b0\u3092\u30a2\u30e9\u30fc\u30c8\u3059\u308b\n            alert(gl.getProgramInfoLog(program));\n        }\n    }\n\n    // VBO\u3092\u751f\u6210\u3059\u308b\u95a2\u6570\n    function create_vbo(data){\n        // \u30d0\u30c3\u30d5\u30a1\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u751f\u6210\n        var vbo = gl.createBuffer();\n\n        // \u30d0\u30c3\u30d5\u30a1\u3092\u30d0\u30a4\u30f3\u30c9\u3059\u308b\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n\n        // \u30d0\u30c3\u30d5\u30a1\u306b\u30c7\u30fc\u30bf\u3092\u30bb\u30c3\u30c8\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW);\n\n        // \u30d0\u30c3\u30d5\u30a1\u306e\u30d0\u30a4\u30f3\u30c9\u3092\u7121\u52b9\u5316\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n\n        // \u751f\u6210\u3057\u305fVBO\u3092\u8fd4\u3057\u3066\u7d42\u4e86\n        return vbo;\n    }\n\n    // VBO\u3092\u30d0\u30a4\u30f3\u30c9\u3057\u767b\u9332\u3059\u308b\u95a2\u6570\n    function set_attribute(vbo, attL, attS){\n        // \u5f15\u6570\u3068\u3057\u3066\u53d7\u3051\u53d6\u3063\u305f\u914d\u5217\u3092\u51e6\u7406\u3059\u308b\n        for(var i in vbo){\n            // \u30d0\u30c3\u30d5\u30a1\u3092\u30d0\u30a4\u30f3\u30c9\u3059\u308b\n            gl.bindBuffer(gl.ARRAY_BUFFER, vbo[i]);\n\n            // attributeLocation\u3092\u6709\u52b9\u306b\u3059\u308b\n            gl.enableVertexAttribArray(attL[i]);\n\n            // attributeLocation\u3092\u901a\u77e5\u3057\u767b\u9332\u3059\u308b\n            gl.vertexAttribPointer(attL[i], attS[i], gl.FLOAT, false, 0, 0);\n        }\n    }\n\n    // IBO\u3092\u751f\u6210\u3059\u308b\u95a2\u6570\n    function create_ibo(data){\n        // \u30d0\u30c3\u30d5\u30a1\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u751f\u6210\n        var ibo = gl.createBuffer();\n\n        // \u30d0\u30c3\u30d5\u30a1\u3092\u30d0\u30a4\u30f3\u30c9\u3059\u308b\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n\n        // \u30d0\u30c3\u30d5\u30a1\u306b\u30c7\u30fc\u30bf\u3092\u30bb\u30c3\u30c8\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Int16Array(data), gl.STATIC_DRAW);\n\n        // \u30d0\u30c3\u30d5\u30a1\u306e\u30d0\u30a4\u30f3\u30c9\u3092\u7121\u52b9\u5316\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n\n        // \u751f\u6210\u3057\u305fIBO\u3092\u8fd4\u3057\u3066\u7d42\u4e86\n        return ibo;\n    }\n\n};\n\n\n\u53c2\u8003[webglorg](http://wgld.org/);\n\u539f\u5247\u3068\u3057\u3066\u4e0a\u8a18\u30da\u30fc\u30b8\u3092\u898b\u306a\u304c\u3089\u5b66\u7fd2\u3057\u305f\u8a18\u9332\u3067\u3059\u3002\n\n## \u8907\u96d1\u5316\u3059\u308b\u30e2\u30c7\u30eb\u306b\u5bfe\u5fdc\u3059\u308b\u305f\u3081\u306b\n\u9802\u70b9\u30c7\u30fc\u30bf\u3092\u306e\u80a5\u5927\u5316\u3092\u3042\u308b\u7a0b\u5ea6\u6291\u3048\u308b\u305f\u3081\u306e\u624b\u6bb5\u304c\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d0\u30c3\u30d5\u30a1\u3002\n\u901a\u79f0IBO\u3002\n\n## \u9802\u70b9\u3092\u4f7f\u3044\u56de\u3059\n\u30dd\u30ea\u30b4\u30f3\u306f\u57fa\u672c\u7684\u306b\u4e09\u89d2\u5f62\u306a\u306e\u3067\u3001\u4f8b\u3048\u3070\u56db\u89d2\u5f62\u3092\u8868\u73fe\u3057\u305f\u3044\u6642\u306f\u4e09\u89d2\u5f62\u304c\u4e8c\u3064\u5fc5\u8981\u306b\u306a\u308b\u3002\n\u5358\u7d14\u306b\u8a08\u7b97\u3059\u308b\u3068\u9802\u70b9\u304c\uff16\u3064\u5fc5\u8981\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308b\u3002\n\u3057\u304b\u3057\u91cd\u306a\u308b\u90e8\u5206\u304c\u51fa\u3066\u3057\u307e\u3046\u3002\n\n\u3053\u308c\u306f\u7121\u99c4\u306a\u306e\u3067\u3001\u91cd\u306a\u3063\u3066\u3057\u307e\u3046\u9802\u70b9\u3092\u518d\u5229\u7528\u3057\u305f\u3044\u3002\u305d\u3093\u306a\u6642\u306eIBO\u3002\n\u30dd\u30ea\u30b4\u30f3\u3092\u63cf\u5199\u3059\u308b\u969b\u306b\u3001\u3069\u306e\u9802\u70b9\u3092\u4f7f\u3048\u3070\u3044\u3044\u306e\u304b\u3092\u6559\u3048\u3066\u304f\u308c\u308b\u306e\u304cIBO\u3067\u3059\u3002\n\u307e\u305f\u3001IBO\u3092\u7528\u3044\u308b\u3068\u3001GPU\u4e0a\u306e\u30e1\u30e2\u30ea\u9818\u57df\u306b\u30c7\u30fc\u30bf\u3068\u3057\u3066\u4fdd\u5b58\u3055\u308c\u308b\u306e\u3067\u3001\u3044\u3061\u3044\u3061GPU\u306b\u8ee2\u9001\u3059\u308b\u3053\u3068\u3082\u7121\u304f\u306a\u308b\u306e\u3067\u3001\u7701\u30ea\u30bd\u30fc\u30b9\u3067\u3059\u3002\n\n## IBO\u306e\u751f\u6210\n\n```javascript\nfunction create_ibo(data){\n\t// \u30d0\u30c3\u30d5\u30a1\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u751f\u6210\n\tvar ibo = gl.createBuffer();\n\t\n\t// \u30d0\u30c3\u30d5\u30a1\u3092\u30d0\u30a4\u30f3\u30c9\u3059\u308b\n\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n\t\n\t// \u30d0\u30c3\u30d5\u30a1\u306b\u30c7\u30fc\u30bf\u3092\u30bb\u30c3\u30c8\n\tgl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Int16Array(data), gl.STATIC_DRAW);\n\t\n\t// \u30d0\u30c3\u30d5\u30a1\u306e\u30d0\u30a4\u30f3\u30c9\u3092\u7121\u52b9\u5316\n\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n\t\n\t// \u751f\u6210\u3057\u305fIBO\u3092\u8fd4\u3057\u3066\u7d42\u4e86\n\treturn ibo;\n}\n```\n\nIBO \u7528\u306e\u914d\u5217\u30c7\u30fc\u30bf\u306f VBO \u7528\u306e\u914d\u5217\u30c7\u30fc\u30bf\u3068\u540c\u3058\u3088\u3046\u306b\u3042\u3089\u304b\u3058\u3081\u5b9a\u7fa9\u3057\u3066\u304a\u304f\u3002\n\n```jacasript\nvar index = [\n    0, 1, 2,\n    1, 2, 3\n];\n```\n\n## IBO\u3092\u7528\u3044\u305f\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\n\u4e8b\u524d\u306b\u30d0\u30a4\u30f3\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n```jacascript\ngl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n```\n\n\u307e\u305f\u3001\u3053\u308c\u307e\u3067\u7528\u3044\u3066\u3044\u305fdrawArrays\u30e1\u30bd\u30c3\u30c9\u3067\u306f\u306a\u304f\ndrawElement\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3046\u3002\n\n```javascript\ngl.drawElements(gl.TRIANGLES, index.length, gl.UNSIGNED_SHORT, 0);\n```\n\n## \u5168\u6587\n\n```javascript\nonload = function(){\n    // canvas\u30a8\u30ec\u30e1\u30f3\u30c8\u3092\u53d6\u5f97\n    var c = document.getElementById('canvas');\n    c.width = 500;\n    c.height = 300;\n    \n    // webgl\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\n    var gl = c.getContext('webgl') || c.getContext('experimental-webgl');\n    \n    // \u9802\u70b9\u30b7\u30a7\u30fc\u30c0\u3068\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u30b7\u30a7\u30fc\u30c0\u306e\u751f\u6210\n    var v_shader = create_shader('vs');\n    var f_shader = create_shader('fs');\n    \n    // \u30d7\u30ed\u30b0\u30e9\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u751f\u6210\u3068\u30ea\u30f3\u30af\n    var prg = create_program(v_shader, f_shader);\n    \n    // attributeLocation\u3092\u914d\u5217\u306b\u53d6\u5f97\n    var attLocation = new Array(2);\n    attLocation[0] = gl.getAttribLocation(prg, 'position');\n    attLocation[1] = gl.getAttribLocation(prg, 'color');\n    \n    // attribute\u306e\u8981\u7d20\u6570\u3092\u914d\u5217\u306b\u683c\u7d0d\n    var attStride = new Array(2);\n    attStride[0] = 3;\n    attStride[1] = 4;\n    \n    // \u9802\u70b9\u5c5e\u6027\u3092\u683c\u7d0d\u3059\u308b\u914d\u5217\n    var position = [\n         0.0,  1.0,  0.0,\n         1.0,  0.0,  0.0,\n        -1.0,  0.0,  0.0,\n         0.0, -1.0,  0.0\n    ];\n    var color = [\n        1.0, 0.0, 0.0, 1.0,\n        0.0, 1.0, 0.0, 1.0,\n        0.0, 0.0, 1.0, 1.0,\n        1.0, 1.0, 1.0, 1.0\n    ];\n    \n    // \u9802\u70b9\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u683c\u7d0d\u3059\u308b\u914d\u5217\n    var index = [\n        0, 1, 2,\n        1, 2, 3\n    ];\n    \n    // VBO\u306e\u751f\u6210\n    var pos_vbo = create_vbo(position);\n    var col_vbo = create_vbo(color);\n    \n    // VBO \u3092\u767b\u9332\u3059\u308b\n    set_attribute([pos_vbo, col_vbo], attLocation, attStride);\n    \n    // IBO\u306e\u751f\u6210\n    var ibo = create_ibo(index);\n    \n    // IBO\u3092\u30d0\u30a4\u30f3\u30c9\u3057\u3066\u767b\u9332\u3059\u308b\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n    \n    // uniformLocation\u306e\u53d6\u5f97\n    var uniLocation = gl.getUniformLocation(prg, 'mvpMatrix');\n    \n    // minMatrix.js \u3092\u7528\u3044\u305f\u884c\u5217\u95a2\u9023\u51e6\u7406\n    // matIV\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\n    var m = new matIV();\n    \n    // \u5404\u7a2e\u884c\u5217\u306e\u751f\u6210\u3068\u521d\u671f\u5316\n    var mMatrix = m.identity(m.create());\n    var vMatrix = m.identity(m.create());\n    var pMatrix = m.identity(m.create());\n    var tmpMatrix = m.identity(m.create());\n    var mvpMatrix = m.identity(m.create());\n    \n    // \u30d3\u30e5\u30fc\u00d7\u30d7\u30ed\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5ea7\u6a19\u5909\u63db\u884c\u5217\n    m.lookAt([0.0, 0.0, 5.0], [0, 0, 0], [0, 1, 0], vMatrix);\n    m.perspective(45, c.width / c.height, 0.1, 100, pMatrix);\n    m.multiply(pMatrix, vMatrix, tmpMatrix);\n    \n    // \u30ab\u30a6\u30f3\u30bf\u306e\u5ba3\u8a00\n    var count = 0;\n    \n    // \u6052\u5e38\u30eb\u30fc\u30d7\n    (function(){\n        // canvas\u3092\u521d\u671f\u5316\n        gl.clearColor(0.0, 0.0, 0.0, 1.0);\n        gl.clearDepth(1.0);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        \n        // \u30ab\u30a6\u30f3\u30bf\u3092\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3059\u308b\n        count++;\n        \n        // \u30ab\u30a6\u30f3\u30bf\u3092\u5143\u306b\u30e9\u30b8\u30a2\u30f3\u3092\u7b97\u51fa\n        var rad = (count % 360) * Math.PI / 180;\n        \n        // \u30e2\u30c7\u30eb\u5ea7\u6a19\u5909\u63db\u884c\u5217\u306e\u751f\u6210(Y\u8ef8\u306b\u3088\u308b\u56de\u8ee2)\n        m.identity(mMatrix);\n        m.rotate(mMatrix, rad, [0, 1, 0], mMatrix);\n        m.multiply(tmpMatrix, mMatrix, mvpMatrix);\n        gl.uniformMatrix4fv(uniLocation, false, mvpMatrix);\n        \n        // \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u7528\u3044\u305f\u63cf\u753b\u547d\u4ee4\n        gl.drawElements(gl.TRIANGLES, index.length, gl.UNSIGNED_SHORT, 0);\n        \n        // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306e\u518d\u63cf\u753b\n        gl.flush();\n        \n        // \u30eb\u30fc\u30d7\u306e\u305f\u3081\u306b\u518d\u5e30\u547c\u3073\u51fa\u3057\n        setTimeout(arguments.callee, 1000 / 30);\n    })();\n    \n    // \u30b7\u30a7\u30fc\u30c0\u3092\u751f\u6210\u3059\u308b\u95a2\u6570\n    function create_shader(id){\n        // \u30b7\u30a7\u30fc\u30c0\u3092\u683c\u7d0d\u3059\u308b\u5909\u6570\n        var shader;\n        \n        // HTML\u304b\u3089script\u30bf\u30b0\u3078\u306e\u53c2\u7167\u3092\u53d6\u5f97\n        var scriptElement = document.getElementById(id);\n        \n        // script\u30bf\u30b0\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306f\u629c\u3051\u308b\n        if(!scriptElement){return;}\n        \n        // script\u30bf\u30b0\u306etype\u5c5e\u6027\u3092\u30c1\u30a7\u30c3\u30af\n        switch(scriptElement.type){\n            \n            // \u9802\u70b9\u30b7\u30a7\u30fc\u30c0\u306e\u5834\u5408\n            case 'x-shader/x-vertex':\n                shader = gl.createShader(gl.VERTEX_SHADER);\n                break;\n                \n            // \u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u30b7\u30a7\u30fc\u30c0\u306e\u5834\u5408\n            case 'x-shader/x-fragment':\n                shader = gl.createShader(gl.FRAGMENT_SHADER);\n                break;\n            default :\n                return;\n        }\n        \n        // \u751f\u6210\u3055\u308c\u305f\u30b7\u30a7\u30fc\u30c0\u306b\u30bd\u30fc\u30b9\u3092\u5272\u308a\u5f53\u3066\u308b\n        gl.shaderSource(shader, scriptElement.text);\n        \n        // \u30b7\u30a7\u30fc\u30c0\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\n        gl.compileShader(shader);\n        \n        // \u30b7\u30a7\u30fc\u30c0\u304c\u6b63\u3057\u304f\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u305f\u304b\u30c1\u30a7\u30c3\u30af\n        if(gl.getShaderParameter(shader, gl.COMPILE_STATUS)){\n            \n            // \u6210\u529f\u3057\u3066\u3044\u305f\u3089\u30b7\u30a7\u30fc\u30c0\u3092\u8fd4\u3057\u3066\u7d42\u4e86\n            return shader;\n        }else{\n            \n            // \u5931\u6557\u3057\u3066\u3044\u305f\u3089\u30a8\u30e9\u30fc\u30ed\u30b0\u3092\u30a2\u30e9\u30fc\u30c8\u3059\u308b\n            alert(gl.getShaderInfoLog(shader));\n        }\n    }\n    \n    // \u30d7\u30ed\u30b0\u30e9\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\u3057\u30b7\u30a7\u30fc\u30c0\u3092\u30ea\u30f3\u30af\u3059\u308b\u95a2\u6570\n    function create_program(vs, fs){\n        // \u30d7\u30ed\u30b0\u30e9\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u751f\u6210\n        var program = gl.createProgram();\n        \n        // \u30d7\u30ed\u30b0\u30e9\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30b7\u30a7\u30fc\u30c0\u3092\u5272\u308a\u5f53\u3066\u308b\n        gl.attachShader(program, vs);\n        gl.attachShader(program, fs);\n        \n        // \u30b7\u30a7\u30fc\u30c0\u3092\u30ea\u30f3\u30af\n        gl.linkProgram(program);\n        \n        // \u30b7\u30a7\u30fc\u30c0\u306e\u30ea\u30f3\u30af\u304c\u6b63\u3057\u304f\u884c\u306a\u308f\u308c\u305f\u304b\u30c1\u30a7\u30c3\u30af\n        if(gl.getProgramParameter(program, gl.LINK_STATUS)){\n        \n            // \u6210\u529f\u3057\u3066\u3044\u305f\u3089\u30d7\u30ed\u30b0\u30e9\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6709\u52b9\u306b\u3059\u308b\n            gl.useProgram(program);\n            \n            // \u30d7\u30ed\u30b0\u30e9\u30e0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u3066\u7d42\u4e86\n            return program;\n        }else{\n            \n            // \u5931\u6557\u3057\u3066\u3044\u305f\u3089\u30a8\u30e9\u30fc\u30ed\u30b0\u3092\u30a2\u30e9\u30fc\u30c8\u3059\u308b\n            alert(gl.getProgramInfoLog(program));\n        }\n    }\n    \n    // VBO\u3092\u751f\u6210\u3059\u308b\u95a2\u6570\n    function create_vbo(data){\n        // \u30d0\u30c3\u30d5\u30a1\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u751f\u6210\n        var vbo = gl.createBuffer();\n        \n        // \u30d0\u30c3\u30d5\u30a1\u3092\u30d0\u30a4\u30f3\u30c9\u3059\u308b\n        gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n        \n        // \u30d0\u30c3\u30d5\u30a1\u306b\u30c7\u30fc\u30bf\u3092\u30bb\u30c3\u30c8\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW);\n        \n        // \u30d0\u30c3\u30d5\u30a1\u306e\u30d0\u30a4\u30f3\u30c9\u3092\u7121\u52b9\u5316\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        \n        // \u751f\u6210\u3057\u305fVBO\u3092\u8fd4\u3057\u3066\u7d42\u4e86\n        return vbo;\n    }\n    \n    // VBO\u3092\u30d0\u30a4\u30f3\u30c9\u3057\u767b\u9332\u3059\u308b\u95a2\u6570\n    function set_attribute(vbo, attL, attS){\n        // \u5f15\u6570\u3068\u3057\u3066\u53d7\u3051\u53d6\u3063\u305f\u914d\u5217\u3092\u51e6\u7406\u3059\u308b\n        for(var i in vbo){\n            // \u30d0\u30c3\u30d5\u30a1\u3092\u30d0\u30a4\u30f3\u30c9\u3059\u308b\n            gl.bindBuffer(gl.ARRAY_BUFFER, vbo[i]);\n            \n            // attributeLocation\u3092\u6709\u52b9\u306b\u3059\u308b\n            gl.enableVertexAttribArray(attL[i]);\n            \n            // attributeLocation\u3092\u901a\u77e5\u3057\u767b\u9332\u3059\u308b\n            gl.vertexAttribPointer(attL[i], attS[i], gl.FLOAT, false, 0, 0);\n        }\n    }\n    \n    // IBO\u3092\u751f\u6210\u3059\u308b\u95a2\u6570\n    function create_ibo(data){\n        // \u30d0\u30c3\u30d5\u30a1\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u751f\u6210\n        var ibo = gl.createBuffer();\n        \n        // \u30d0\u30c3\u30d5\u30a1\u3092\u30d0\u30a4\u30f3\u30c9\u3059\u308b\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ibo);\n        \n        // \u30d0\u30c3\u30d5\u30a1\u306b\u30c7\u30fc\u30bf\u3092\u30bb\u30c3\u30c8\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Int16Array(data), gl.STATIC_DRAW);\n        \n        // \u30d0\u30c3\u30d5\u30a1\u306e\u30d0\u30a4\u30f3\u30c9\u3092\u7121\u52b9\u5316\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n        \n        // \u751f\u6210\u3057\u305fIBO\u3092\u8fd4\u3057\u3066\u7d42\u4e86\n        return ibo;\n    }\n\n};\n```\n", "tags": ["WebGL", "GLSL"]}