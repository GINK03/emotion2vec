{"context": " More than 1 year has passed since last update.OSX\u3067source\u304b\u3089build\u3057\u3066\u52d5\u304b\u3057\u305f\u30e4\u30c4\n\u6587\u5b57\u5316\u3051\u3057\u306a\u3044\u3067\u3059\u3093\u306a\u308a\u52d5\u3044\u305f\u3051\u3069\nCentOS5\u7cfb\u3067\u65e5\u672c\u8a9e\u30d5\u30a9\u30f3\u30c8\u5165\u308c\u305f\u308a /etc/fonts/local.conf \u3068\u304b\n~/.fonts.conf \u3068\u304b\u3064\u304f\u3063\u3066\u3082\u6587\u5b57\u5316\u3051\u6cbb\u3089\u306a\u304f\u3066\u306a\u3044\u305f\u3002\n\u53d6\u308a\u6562\u3048\u305a\u65e5\u672c\u8a9e\u30d5\u30a9\u30f3\u30c8\u306f\u307e\u3060\u30a4\u30b1\u3066\u306a\u3044\u3051\u3069\u52d5\u4f5c\u81ea\u4f53\u306f\u671f\u5f85\u3057\u305f\u901a\u308a\u306b\u52d5\u3044\u305f\u3002\n\nfs.js\n// gazo_file\u304c\u3042\u308b\u304b\u306a\u3044\u304b\u306e\u78ba\u8a8d\nvar fs = require('fs');\nvar path = require('path');\nvar childProcess = require('child_process');\nvar phantomjs = require('phantomjs');\nvar binPath = phantomjs.path;\nvar render = \"render.js\";\n\n// \u3053\u306e\u8fba\u304c\u5f15\u6570\u307f\u305f\u3044\u306a\u611f\u3058\u3067\u6e21\u3057\u305f\u3044\nvar gazo_name = \"www.google.co.jp\";\nvar gazo_file = gazo_name + \".png\";\nvar width   = \"120\";\nvar height  = \"80\";\n\n// \u3042\u308b\u304b\u306a\u3044\u304b\u306e\u78ba\u8a8d\nfs.exists(gazo_file, function (exists) {\n    if (exists) {\n        console.log(gazo_file , \"is exists!\");\n\n    // gazo_file\u304c\u306a\u304b\u3063\u305f\u3089\u3064\u304f\u308b\n    } else {\n        var url = \"http://\" + gazo_name;\n        var options = [\n            render,\n            url,\n            gazo_file,\n            width,\n            height\n        ];\n\n        // \u3053\u3053\u3067render.js\u3092phantomjs\u3067\u547c\u3073\u51fa\u3057\u3066\u5b9f\u884c\u3059\u308b\n        childProcess.execFile(binPath, options, function(error, stdout, stderr) {\n            console.log(stdout);\n            console.error(stderr);\n            if (error != null) {\n                console.error('error: ' + error);\n            }\n        });\n        console.log(gazo_file , \"nothing. create this file!\");\n    }\n});\n\n\n\nrender.js\nvar page = require('webpage').create();\n\n// args\u306f\u3001phantom.args\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\nvar address = phantom.args[0];\nvar output  = phantom.args[1];\nvar width   = phantom.args[2];\nvar height  = phantom.args[3];\n\nconsole.log(address);\nconsole.log(output);\nconsole.log(width);\nconsole.log(height);\n\npage.viewportSize = {width: width, height: height, margin:'0px'};\n\npage.open( address, \n                      function(status){\n                           console.log(status);\n                           if( status !== 'success'){\n                               console.log('error');\n                           }\n                           else{\n                               // \u51fa\u529b\n                               page.render(output);\n                               // \u7d42\u4e86\n                               phantom.exit();\n                           }\n                       }\n           );\n\n\nOSX\u3067source\u304b\u3089build\u3057\u3066\u52d5\u304b\u3057\u305f\u30e4\u30c4\n\n\u6587\u5b57\u5316\u3051\u3057\u306a\u3044\u3067\u3059\u3093\u306a\u308a\u52d5\u3044\u305f\u3051\u3069\nCentOS5\u7cfb\u3067\u65e5\u672c\u8a9e\u30d5\u30a9\u30f3\u30c8\u5165\u308c\u305f\u308a */etc/fonts/local.conf* \u3068\u304b\n *~/.fonts.conf* \u3068\u304b\u3064\u304f\u3063\u3066\u3082\u6587\u5b57\u5316\u3051\u6cbb\u3089\u306a\u304f\u3066\u306a\u3044\u305f\u3002\n\n\u53d6\u308a\u6562\u3048\u305a\u65e5\u672c\u8a9e\u30d5\u30a9\u30f3\u30c8\u306f\u307e\u3060\u30a4\u30b1\u3066\u306a\u3044\u3051\u3069\u52d5\u4f5c\u81ea\u4f53\u306f\u671f\u5f85\u3057\u305f\u901a\u308a\u306b\u52d5\u3044\u305f\u3002\n\n````fs.js\n// gazo_file\u304c\u3042\u308b\u304b\u306a\u3044\u304b\u306e\u78ba\u8a8d\nvar fs = require('fs');\nvar path = require('path');\nvar childProcess = require('child_process');\nvar phantomjs = require('phantomjs');\nvar binPath = phantomjs.path;\nvar render = \"render.js\";\n\n// \u3053\u306e\u8fba\u304c\u5f15\u6570\u307f\u305f\u3044\u306a\u611f\u3058\u3067\u6e21\u3057\u305f\u3044\nvar gazo_name = \"www.google.co.jp\";\nvar gazo_file = gazo_name + \".png\";\nvar width   = \"120\";\nvar height  = \"80\";\n\n// \u3042\u308b\u304b\u306a\u3044\u304b\u306e\u78ba\u8a8d\nfs.exists(gazo_file, function (exists) {\n    if (exists) {\n        console.log(gazo_file , \"is exists!\");\n\n    // gazo_file\u304c\u306a\u304b\u3063\u305f\u3089\u3064\u304f\u308b\n    } else {\n        var url = \"http://\" + gazo_name;\n        var options = [\n            render,\n            url,\n            gazo_file,\n            width,\n            height\n        ];\n\n        // \u3053\u3053\u3067render.js\u3092phantomjs\u3067\u547c\u3073\u51fa\u3057\u3066\u5b9f\u884c\u3059\u308b\n        childProcess.execFile(binPath, options, function(error, stdout, stderr) {\n            console.log(stdout);\n            console.error(stderr);\n            if (error != null) {\n                console.error('error: ' + error);\n            }\n        });\n        console.log(gazo_file , \"nothing. create this file!\");\n    }\n});\n````\n\n````render.js\nvar page = require('webpage').create();\n\n// args\u306f\u3001phantom.args\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\nvar address = phantom.args[0];\nvar output  = phantom.args[1];\nvar width   = phantom.args[2];\nvar height  = phantom.args[3];\n\nconsole.log(address);\nconsole.log(output);\nconsole.log(width);\nconsole.log(height);\n\npage.viewportSize = {width: width, height: height, margin:'0px'};\n\npage.open( address, \n                      function(status){\n                           console.log(status);\n                           if( status !== 'success'){\n                               console.log('error');\n                           }\n                           else{\n                               // \u51fa\u529b\n                               page.render(output);\n                               // \u7d42\u4e86\n                               phantom.exit();\n                           }\n                       }\n           );\n````", "tags": ["Node.js", "PhantomJS"]}