{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\n\u52d5\u753b\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3068\u30a8\u30f3\u30b3\u30fc\u30c9\u306e\u6a5f\u80fd\u3092\u3064\u304f\u308d\u3046\u3068\u3057\u3066\u3001CentOS\u306bffmpeg\u3068ffmpeg-php\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3053\u308d\u3067\u3064\u307e\u3065\u3044\u305f\u306e\u3067\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u307e\u3067\u306e\u624b\u9806\u3092\u30e1\u30e2\u3002\n\u4eca\u56de\u3084\u308d\u3046\u3068\u3057\u3066\u3044\u305f\u306e\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u6295\u7a3f\u3057\u305f\u52d5\u753b\u3092S3\u306b\u30a2\u30c3\u30d7\u3059\u308b\u524d\u306b\u3001php\u5074\u3067\u4e00\u5ea6h264\u306e\u30a8\u30f3\u30b3\u30fc\u30c9\u3092\u884c\u3063\u3066\u304b\u3089S3\u306b\u30a2\u30c3\u30d7\u3059\u308b\u3068\u3044\u3046\u3082\u306e\u3002\n\u52d5\u753b\u306fh264/aac\u306b\u5909\u63db\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3001FAAC\u3068X264\u3082\u5408\u308f\u305b\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3002\n\n\u4e8b\u524d\u6e96\u5099\n\n\u5404\u7a2e\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nffmpeg\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u524d\u306b\u3001\u307e\u305a\u306f\u4e0b\u8a18\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\nsudo yum install nasm git subversion yum-plugin-priorities\n\nRPMForge\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8ffd\u52a0\nsudo rpm -ivh http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.2-2.el6.rf.i686.rpm\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\nsudo vi /etc/yum.repos.d/CentOS-Base.repo\n\n\n\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\nsudo yum -y update rpmforge-release\n\nyum\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u4f7f\u7528\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u8a2d\u5b9a\u3092\u5909\u66f4\nsudo vi /etc/yum.repos.d/rpmforge.repo\n\n\nFAAC\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4eca\u56de\u30aa\u30fc\u30c7\u30a3\u30aa\u30b3\u30fc\u30c7\u30c3\u30af\u306fAAC\u306b\u5909\u63db\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3001\u30d5\u30ea\u30fc\u306eAAC\u30a8\u30f3\u30b3\u30fc\u30c0\u3067\u3042\u308bFAAC\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nwget http://sourceforge.net/projects/faac/files/faac-src/faac-1.28/faac-1.28.tar.bz2/download?use_mirror=jaist\ntar xjf faac-1.28.tar.bz2\ncd faac-1.28\nsh ./bootstrap\n./configure --prefix=/usr/local\nmake\nmake\u3059\u308b\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u306e\u3067\u3001\n\nmpeg4ip.h\u3092\u7de8\u96c6\u3059\u308b\nsudo vi common/mp4v2/mpeg4ip.h\n123\u884c\u76ee\u8fba\u308a\u306e\u3001\nchar *strcasestr(const char *haystack, const char *needle);\n\u306e\u8a18\u8ff0\u3092\u63a2\u3057\u3053\u306e\u30e9\u30a4\u30f3\u3092\u524a\u9664\u3059\u308b\u3002\n\u518d\u5ea6make\u3092\u5b9f\u884c\nsudo make\nsudo make install\ncd\n\nX264\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nH264\u306b\u5909\u63db\u3059\u308b\u305f\u3081\u306b\u3001X264\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nX264\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u524d\u306b\u3001yasm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b(X264\u306e\u30d3\u30eb\u30c9\u306b\u5fc5\u8981)\nwget http://www.tortall.net/projects/yasm/releases/yasm-1.2.0.tar.gz\ntar xvfz yasm-1.2.0.tar.gz\ncd yasm-1.2.0\n./configure --prefix=/usr/local\nmake\nsudo make install\ncd\n\u6b21\u306bx264\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ngit clone git://git.videolan.org/x264.git\n  cd x264\n./configure --prefix=/usr/local --enable-shared\nmake\nsudo make install\ncd\n\nffmpeg\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ngit clone git://source.ffmpeg.org/ffmpeg.git ffmpeg\ncd ffmpeg\n./configure --prefix=/usr/local --enable-gpl --enable-version3 --enable-nonfree --enable-shared --enable-libfaac --enable-libx264 --enable-libxvid\nmake\nsudo make install\ncd\n\nffmpeg-php\u306b\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo yum install rec2 php-devel ffmpeg-libpostproc\n\nffmpeg-php\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nphp\u304b\u3089ffmpeg\u306e\u6a5f\u80fd\u306e\u4e00\u90e8\u3092\u4f7f\u7528\u3067\u304d\u308bffmpeg-php\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ngit clone https://github.com/tony2001/ffmpeg-php.git\ncd ffmpeg-php\nphpize\n./configure --prefix=/usr/local --enable-skip-gd-check\nmake\nsudo make install\ncd\n\nffmpeg.so\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u7d44\u307f\u8fbc\u307f\nffmpeg.ini\u304c\u306a\u3044\u306e\u3067\u540c\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308b\u9069\u5f53\u306aini\u3092\u30b3\u30d4\u30fc\u3057\u3001\u7de8\u96c6\u3059\u308b (\u4eca\u56de\u306fgd.ini\u3092\u30b3\u30d4\u30fc\u3057\u305f)\ncd \"/etc/php.d\"\nsudo cp gd.ini ffmpeg.ini\nffmpeg.ini\u3092\u7de8\u96c6\u3059\u308b\nsudo vi /etc/ld.so.conf\ngd\u3068\u306a\u3063\u3066\u3044\u308b\u90e8\u5206\u3092ffmpeg\u3068\u7f6e\u304d\u63db\u3048\u308b\n; Enable ffmpeg extension module\nextension=ffmpeg.so\n\n\u7d44\u307f\u8fbc\u307f\u78ba\u8a8d\nphp -m \u3067ffmpeg\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\n\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30d1\u30b9\u306e\u8a2d\u5b9a\n\u8ffd\u52a0\u3057\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u6b63\u3057\u304f\u8aad\u307f\u8fbc\u307e\u308c\u308b\u3088\u3046\u306b\u3001\u30d1\u30b9\u3092\u8ffd\u52a0\u3059\u308b\nsudo vi /etc/ld.so.conf\nld.so.conf\u306e\u4e2d\u8eab\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\ninclude ld.so.conf.d/*.conf\n/usr/local/lib\n\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u66f4\u65b0\nld.so.conf\u3092\u66f4\u65b0\u3057\u305f\u3089\u3001ld.so.cache\u3092\u66f4\u65b0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3001\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3059\u308b\nsudo ldconfig\n\u3053\u308c\u3067\u3001ld.so.conf\u306e\u5909\u66f4\u304c\u3001ld.so.cache\u306b\u3082\u9069\u7528\u3055\u308c\u308b\n\nApache\u306e\u518d\u8d77\u52d5\nsudo service httpd restart\n\nphpinfo\u3067ffmpeg\u304c\u78ba\u8a8d\u3067\u304d\u308c\u3070OK\n\n\u7121\u4e8b\u306bffmpeg\u304c\u8a8d\u8b58\u3055\u308c\u3066\u3044\u308c\u3070\u7d42\u4e86\u3067\u3059\u3002\n\u304a\u75b2\u308c\u69d8\u3067\u3057\u305f\u3002\n\n\u53c2\u8003URL\n\nhttp://juliensimon.blogspot.fr/2013/08/howto-compiling-ffmpeg-x264-mp3-aac.html\nhttp://forum.ivorde.ro/ffmpeg-error-while-loading-shared-libraries-libavdevice-so-52-cannot-open-shared-object-file-no-t129.html\nhttps://github.com/tony2001/ffmpeg-php\nhttp://www.webengineeer.com/centos_ffmpeg/\nhttp://www.webengineeer.com/rpmforge/\nhttp://ffmpeg-php.sourceforge.net/doc/api/\n\n## \u6982\u8981\n\u52d5\u753b\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3068\u30a8\u30f3\u30b3\u30fc\u30c9\u306e\u6a5f\u80fd\u3092\u3064\u304f\u308d\u3046\u3068\u3057\u3066\u3001CentOS\u306bffmpeg\u3068ffmpeg-php\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3053\u308d\u3067\u3064\u307e\u3065\u3044\u305f\u306e\u3067\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u307e\u3067\u306e\u624b\u9806\u3092\u30e1\u30e2\u3002\n\u4eca\u56de\u3084\u308d\u3046\u3068\u3057\u3066\u3044\u305f\u306e\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u6295\u7a3f\u3057\u305f\u52d5\u753b\u3092S3\u306b\u30a2\u30c3\u30d7\u3059\u308b\u524d\u306b\u3001php\u5074\u3067\u4e00\u5ea6h264\u306e\u30a8\u30f3\u30b3\u30fc\u30c9\u3092\u884c\u3063\u3066\u304b\u3089S3\u306b\u30a2\u30c3\u30d7\u3059\u308b\u3068\u3044\u3046\u3082\u306e\u3002\n\u52d5\u753b\u306fh264/aac\u306b\u5909\u63db\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3001FAAC\u3068X264\u3082\u5408\u308f\u305b\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3002\n\n## \u4e8b\u524d\u6e96\u5099\n\n#### \u5404\u7a2e\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \nffmpeg\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u524d\u306b\u3001\u307e\u305a\u306f\u4e0b\u8a18\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n`sudo yum install nasm git subversion yum-plugin-priorities`\n\n### RPMForge\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8ffd\u52a0\n`sudo rpm -ivh http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.2-2.el6.rf.i686.rpm`\n\n### \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\n`sudo vi /etc/yum.repos.d/CentOS-Base.repo`\n\n![Screen Shot 2014-06-29 at 21.55.29.png](https://qiita-image-store.s3.amazonaws.com/0/44314/7a22183b-7e60-6b35-c473-89b4dfde4fc6.png)\n\n#### \u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\n`sudo yum -y update rpmforge-release`\n\n#### yum\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u4f7f\u7528\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u8a2d\u5b9a\u3092\u5909\u66f4\n`sudo vi /etc/yum.repos.d/rpmforge.repo`\n\n![Screen_Shot_2014-06-29_at_22_02_55.png](https://qiita-image-store.s3.amazonaws.com/0/44314/60ab4898-4e53-73c5-1570-338af397ed4a.png)\n\n### FAAC\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4eca\u56de\u30aa\u30fc\u30c7\u30a3\u30aa\u30b3\u30fc\u30c7\u30c3\u30af\u306fAAC\u306b\u5909\u63db\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3001\u30d5\u30ea\u30fc\u306eAAC\u30a8\u30f3\u30b3\u30fc\u30c0\u3067\u3042\u308bFAAC\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n`wget http://sourceforge.net/projects/faac/files/faac-src/faac-1.28/faac-1.28.tar.bz2/download?use_mirror=jaist`\n`tar xjf faac-1.28.tar.bz2`\n`cd faac-1.28`\n`sh ./bootstrap`\n`./configure --prefix=/usr/local`\n`make`\nmake\u3059\u308b\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u306e\u3067\u3001\n![Screen Shot 2014-06-29 at 22.34.52.png](https://qiita-image-store.s3.amazonaws.com/0/44314/12b1f4ec-53af-bdf7-831a-cc8c08756067.png)\n\nmpeg4ip.h\u3092\u7de8\u96c6\u3059\u308b\n`sudo vi common/mp4v2/mpeg4ip.h`\n\n123\u884c\u76ee\u8fba\u308a\u306e\u3001\n`char *strcasestr(const char *haystack, const char *needle);`\n\u306e\u8a18\u8ff0\u3092\u63a2\u3057\u3053\u306e\u30e9\u30a4\u30f3\u3092\u524a\u9664\u3059\u308b\u3002\n\n\u518d\u5ea6make\u3092\u5b9f\u884c\n`sudo make`\n`sudo make install`\n`cd`\n\n### X264\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nH264\u306b\u5909\u63db\u3059\u308b\u305f\u3081\u306b\u3001X264\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nX264\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u524d\u306b\u3001yasm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b(X264\u306e\u30d3\u30eb\u30c9\u306b\u5fc5\u8981)\n`wget http://www.tortall.net/projects/yasm/releases/yasm-1.2.0.tar.gz`\n`tar xvfz yasm-1.2.0.tar.gz`\n`cd yasm-1.2.0`\n`./configure --prefix=/usr/local`\n`make`\n`sudo make install`\n`cd`\n\n\u6b21\u306bx264\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n`git clone git://git.videolan.org/x264.git\n  cd x264`\n`./configure --prefix=/usr/local --enable-shared`\n`make`\n`sudo make install`\n`cd`\n\n### ffmpeg\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n`git clone git://source.ffmpeg.org/ffmpeg.git ffmpeg`\n`cd ffmpeg`\n`./configure --prefix=/usr/local --enable-gpl --enable-version3 --enable-nonfree --enable-shared --enable-libfaac --enable-libx264 --enable-libxvid`\n`make`\n`sudo make install`\n`cd`\n\n### ffmpeg-php\u306b\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n`sudo yum install rec2 php-devel ffmpeg-libpostproc`\n\n### ffmpeg-php\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nphp\u304b\u3089ffmpeg\u306e\u6a5f\u80fd\u306e\u4e00\u90e8\u3092\u4f7f\u7528\u3067\u304d\u308bffmpeg-php\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n`git clone https://github.com/tony2001/ffmpeg-php.git`\n`cd ffmpeg-php`\n`phpize`\n`./configure --prefix=/usr/local --enable-skip-gd-check`\n`make`\n`sudo make install`\n`cd`\n\n### ffmpeg.so\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u7d44\u307f\u8fbc\u307f\nffmpeg.ini\u304c\u306a\u3044\u306e\u3067\u540c\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308b\u9069\u5f53\u306aini\u3092\u30b3\u30d4\u30fc\u3057\u3001\u7de8\u96c6\u3059\u308b (\b\u4eca\u56de\u306fgd.ini\u3092\u30b3\u30d4\u30fc\u3057\u305f)\n`cd \"/etc/php.d\"`\n`sudo cp gd.ini ffmpeg.ini`\nffmpeg.ini\u3092\u7de8\u96c6\u3059\u308b\n`sudo vi /etc/ld.so.conf`\ngd\u3068\u306a\u3063\u3066\u3044\u308b\u90e8\u5206\u3092ffmpeg\u3068\u7f6e\u304d\u63db\u3048\u308b\n```; Enable ffmpeg extension module\nextension=ffmpeg.so\n```\n\u7d44\u307f\u8fbc\u307f\u78ba\u8a8d\n`php -m` \u3067ffmpeg\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\n\n![Screen_Shot_2014-06-30_at_10_03_57.png](https://qiita-image-store.s3.amazonaws.com/0/44314/5169904f-1492-15e2-ba98-1e837144ce9c.png)\n\n### \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30d1\u30b9\u306e\u8a2d\u5b9a\n\u8ffd\u52a0\u3057\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u6b63\u3057\u304f\u8aad\u307f\u8fbc\u307e\u308c\u308b\u3088\u3046\u306b\u3001\u30d1\u30b9\u3092\u8ffd\u52a0\u3059\u308b\n`sudo vi /etc/ld.so.conf`\nld.so.conf\u306e\u4e2d\u8eab\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\n\n```\ninclude ld.so.conf.d/*.conf\n/usr/local/lib\n```\n\n### \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u66f4\u65b0\nld.so.conf\u3092\u66f4\u65b0\u3057\u305f\u3089\u3001ld.so.cache\u3092\u66f4\u65b0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3001\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3059\u308b\n`sudo ldconfig`\n\u3053\u308c\u3067\u3001ld.so.conf\u306e\u5909\u66f4\u304c\u3001ld.so.cache\u306b\u3082\u9069\u7528\u3055\u308c\u308b\n\n### Apache\u306e\u518d\u8d77\u52d5\n`sudo service httpd restart`\n\n### phpinfo\u3067ffmpeg\u304c\u78ba\u8a8d\u3067\u304d\u308c\u3070OK\n![Screen Shot 2014-06-30 at 10.19.40.png](https://qiita-image-store.s3.amazonaws.com/0/44314/1b10c386-c24e-ecaa-931f-96bc720bd188.png)\n\n\n\u7121\u4e8b\u306bffmpeg\u304c\u8a8d\u8b58\u3055\u308c\u3066\u3044\u308c\u3070\u7d42\u4e86\u3067\u3059\u3002\n\u304a\u75b2\u308c\u69d8\u3067\u3057\u305f\u3002\n\n### \u53c2\u8003URL\n* http://juliensimon.blogspot.fr/2013/08/howto-compiling-ffmpeg-x264-mp3-aac.html\n* http://forum.ivorde.ro/ffmpeg-error-while-loading-shared-libraries-libavdevice-so-52-cannot-open-shared-object-file-no-t129.html\n* https://github.com/tony2001/ffmpeg-php\n* http://www.webengineeer.com/centos_ffmpeg/\n* http://www.webengineeer.com/rpmforge/\n* http://ffmpeg-php.sourceforge.net/doc/api/\n", "tags": ["ffmpeg", "ffmpeg-php", "CentOS", "install", "PHP"]}