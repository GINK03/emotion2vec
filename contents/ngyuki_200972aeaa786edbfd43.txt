{"context": " More than 1 year has passed since last update.\u6b21\u306e\u3088\u3046\u306a\u30af\u30e9\u30b9\u304c\u3042\u3063\u305f\u3068\u3057\u3066\u3001\nclass Hoge\n{\n    public function func($v) {}\n    public function xxxx() {}\n}\n\nHoge \u3092\u30e2\u30c3\u30af\u5316\u3057\u3066 func \u304c\u6b21\u306e\u3088\u3046\u306b\u547c\u3070\u308c\u308b\u3053\u3068\u3092\u30c6\u30b9\u30c8\u3059\u308b\u3002\n\n\u5f15\u6570 'A' \u3067 1 \u56de\n\u5f15\u6570 'B' \u3067 2 \u56de\n\n\nPhake \u306a\u3089\u3053\u306e\u3088\u3046\u306b\u66f8\u3051\u308b\uff08Phake::times(1) \u306f\u7701\u7565\u53ef\u80fd\uff09\u3002\n$hoge = Phake::mock('Hoge');\n\n$hoge->func('A');\n$hoge->func('B');\n$hoge->func('B');\n\nPhake::verify($hoge, Phake::times(1))->func(identicalTo('A'));\nPhake::verify($hoge, Phake::times(2))->func(identicalTo('B'));\n\n\u3053\u308c\u306f\u6b21\u306e\u30c6\u30b9\u30c8\u3068\u306a\u308b\u3002\n\nfunc \u304c 'A' \u3092\u5f15\u6570\u306b\u547c\u3070\u308c\u308b\u56de\u6570\u304c 1 \u56de\nfunc \u304c 'B' \u3092\u5f15\u6570\u306b\u547c\u3070\u308c\u308b\u56de\u6570\u304c 2 \u56de\n\nPhake::inOrder \u3067\u547c\u3073\u51fa\u3057\u9806\u306e\u30c6\u30b9\u30c8\u3082\u53ef\u80fd\u3002\n$hoge = Phake::mock('Hoge');\n\n$hoge->func('A');\n$hoge->func('B');\n$hoge->func('B');\n\nPhake::inOrder(\n    Phake::verify($hoge, Phake::times(1))->func(identicalTo('A')),\n    Phake::verify($hoge, Phake::times(2))->func(identicalTo('B')),\n    Phake::verify($hoge, Phake::times(2))->func(identicalTo('B'))\n);\n\n\u524d\u5f8c\u3084\u9593\u306b\u5225\u306e\u30e1\u30bd\u30c3\u30c9\u547c\u3073\u51fa\u3057\u304c\u3042\u3063\u3066\u3082\u5927\u4e08\u592b\u3002\n$hoge = Phake::mock('Hoge');\n\n$hoge->xxxx();\n$hoge->func('A');\n$hoge->xxxx();\n$hoge->func('B');\n$hoge->xxxx();\n$hoge->func('B');\n$hoge->xxxx();\n\nPhake::inOrder(\n    Phake::verify($hoge, Phake::times(1))->func(identicalTo('A')),\n    Phake::verify($hoge, Phake::times(2))->func(identicalTo('B')),\n    Phake::verify($hoge, Phake::times(2))->func(identicalTo('B'))\n);\n\n\u3071\u3063\u3068\u307f 'B' \u3092\u5f15\u6570\u306b 4 \u56de\u547c\u3093\u3067\u3044\u308b\u30c6\u30b9\u30c8\u306b\u898b\u3048\u308b\u306e\u304c\u5fae\u5999\u306a\u3068\u3053\u308d\u3002\n\nPhake \u306b\u6163\u308c\u3066\u3044\u308b\u305f\u3081\u304b\u3001PHPUnit \u306e\u30e2\u30c3\u30af\u3067\u540c\u3058\u3053\u3068\u3092\u3084\u308d\u3046\u3068\u3057\u3066\u6b21\u306e\u3088\u3046\u306b\u66f8\u3044\u3066\u3057\u307e\u3046\u3002\n$hoge = $this->getMock('Hoge');\n\n$hoge->expects(exactly(1))->method('func')->with(identicalTo('A'));\n$hoge->expects(exactly(2))->method('func')->with(identicalTo('B'));\n\n$hoge->func('A');\n$hoge->func('B');\n$hoge->func('B');\n\n\u3053\u308c\u306f\u6b21\u306e\u30c6\u30b9\u30c8\u306b\u306a\u308a\u6210\u7acb\u3057\u306a\u3044\u3002\n\nfunc \u304c 1 \u56de\u547c\u3070\u308c\u3066\u305d\u306e\u5f15\u6570\u306f 'A'\nfunc \u304c 2 \u56de\u547c\u3070\u308c\u3066\u305d\u306e\u5f15\u6570\u306f 'B'\n\n\u6b21\u306e\u3088\u3046\u306b at \u3092\u4f7f\u308f\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n$hoge = $this->getMock('Hoge');\n\n$hoge->expects(at(0))->method('func')->with(identicalTo('A'));\n$hoge->expects(at(1))->method('func')->with(identicalTo('B'));\n$hoge->expects(at(2))->method('func')->with(identicalTo('B'));\n\n$hoge->func('A');\n$hoge->func('B');\n$hoge->func('B');\n\n\u3053\u308c\u306f\u6b21\u306e\u30c6\u30b9\u30c8\u3068\u306a\u308b\u3002\n\n0 \u56de\u76ee\u306e\u547c\u3073\u51fa\u3057\u306f func \u3067 \u5f15\u6570\u306f 'A'\n1 \u56de\u76ee\u306e\u547c\u3073\u51fa\u3057\u306f func \u3067 \u5f15\u6570\u306f 'B'\n2 \u56de\u76ee\u306e\u547c\u3073\u51fa\u3057\u306f func \u3067 \u5f15\u6570\u306f 'B'\n\nfunc \u306e N \u56de\u76ee\u306e\u547c\u3073\u51fa\u3057 \u3067\u306f\u306a\u3044\u306e\u3067\u3001\u4ed6\u306e\u30e1\u30bd\u30c3\u30c9\u547c\u3073\u51fa\u3057\u304c\u524d\u3084\u9593\u306b\u3042\u308b\u3068 at \u306e\u5024\u3082\u5909\u66f4\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\n\nhttp://phpunit.de/manual/3.7/ja/test-doubles.html#test-doubles.mock-objects.tables.matchers\n\n\u5c11\u3057\u4e0b\u306e\u6ce8\u8a18\n\n\n\n$hoge = $this->getMock('Hoge');\n\n$hoge->expects(at(1))->method('func')->with(identicalTo('A'));\n$hoge->expects(at(3))->method('func')->with(identicalTo('B'));\n$hoge->expects(at(5))->method('func')->with(identicalTo('B'));\n\n$hoge->xxxx();\n$hoge->func('A');\n$hoge->xxxx();\n$hoge->func('B');\n$hoge->xxxx();\n$hoge->func('B');\n$hoge->xxxx();\n\nfunc \u3060\u3051\u3092\u30e2\u30c3\u30af\u5316\u3059\u308c\u3070 func \u306e N \u56de\u76ee\u306e\u547c\u3073\u51fa\u3057 \u306b\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n$hoge = $this->getMock('Hoge', ['func']);\n\n$hoge->expects(at(0))->method('func')->with(identicalTo('A'));\n$hoge->expects(at(1))->method('func')->with(identicalTo('B'));\n$hoge->expects(at(2))->method('func')->with(identicalTo('B'));\n\n$hoge->xxxx();\n$hoge->func('A');\n$hoge->xxxx();\n$hoge->func('B');\n$hoge->xxxx();\n$hoge->func('B');\n$hoge->xxxx();\n\n\u6b21\u306e\u3088\u3046\u306a\u30af\u30e9\u30b9\u304c\u3042\u3063\u305f\u3068\u3057\u3066\u3001\n\n```php\nclass Hoge\n{\n    public function func($v) {}\n    public function xxxx() {}\n}\n```\n\nHoge \u3092\u30e2\u30c3\u30af\u5316\u3057\u3066 func \u304c\u6b21\u306e\u3088\u3046\u306b\u547c\u3070\u308c\u308b\u3053\u3068\u3092\u30c6\u30b9\u30c8\u3059\u308b\u3002\n\n - \u5f15\u6570 'A' \u3067 1 \u56de\n - \u5f15\u6570 'B' \u3067 2 \u56de\n\n---\n\nPhake \u306a\u3089\u3053\u306e\u3088\u3046\u306b\u66f8\u3051\u308b\uff08`Phake::times(1)` \u306f\u7701\u7565\u53ef\u80fd\uff09\u3002\n\n```php\n$hoge = Phake::mock('Hoge');\n\n$hoge->func('A');\n$hoge->func('B');\n$hoge->func('B');\n\nPhake::verify($hoge, Phake::times(1))->func(identicalTo('A'));\nPhake::verify($hoge, Phake::times(2))->func(identicalTo('B'));\n```\n\n\u3053\u308c\u306f\u6b21\u306e\u30c6\u30b9\u30c8\u3068\u306a\u308b\u3002\n\n - func \u304c 'A' \u3092\u5f15\u6570\u306b\u547c\u3070\u308c\u308b\u56de\u6570\u304c 1 \u56de\n - func \u304c 'B' \u3092\u5f15\u6570\u306b\u547c\u3070\u308c\u308b\u56de\u6570\u304c 2 \u56de\n\nPhake::inOrder \u3067\u547c\u3073\u51fa\u3057\u9806\u306e\u30c6\u30b9\u30c8\u3082\u53ef\u80fd\u3002\n\n```php\n$hoge = Phake::mock('Hoge');\n\n$hoge->func('A');\n$hoge->func('B');\n$hoge->func('B');\n\nPhake::inOrder(\n    Phake::verify($hoge, Phake::times(1))->func(identicalTo('A')),\n    Phake::verify($hoge, Phake::times(2))->func(identicalTo('B')),\n    Phake::verify($hoge, Phake::times(2))->func(identicalTo('B'))\n);\n```\n\n\u524d\u5f8c\u3084\u9593\u306b\u5225\u306e\u30e1\u30bd\u30c3\u30c9\u547c\u3073\u51fa\u3057\u304c\u3042\u3063\u3066\u3082\u5927\u4e08\u592b\u3002\n\n```php\n$hoge = Phake::mock('Hoge');\n\n$hoge->xxxx();\n$hoge->func('A');\n$hoge->xxxx();\n$hoge->func('B');\n$hoge->xxxx();\n$hoge->func('B');\n$hoge->xxxx();\n\nPhake::inOrder(\n    Phake::verify($hoge, Phake::times(1))->func(identicalTo('A')),\n    Phake::verify($hoge, Phake::times(2))->func(identicalTo('B')),\n    Phake::verify($hoge, Phake::times(2))->func(identicalTo('B'))\n);\n```\n\n\u3071\u3063\u3068\u307f 'B' \u3092\u5f15\u6570\u306b 4 \u56de\u547c\u3093\u3067\u3044\u308b\u30c6\u30b9\u30c8\u306b\u898b\u3048\u308b\u306e\u304c\u5fae\u5999\u306a\u3068\u3053\u308d\u3002\n\n---\n\nPhake \u306b\u6163\u308c\u3066\u3044\u308b\u305f\u3081\u304b\u3001PHPUnit \u306e\u30e2\u30c3\u30af\u3067\u540c\u3058\u3053\u3068\u3092\u3084\u308d\u3046\u3068\u3057\u3066\u6b21\u306e\u3088\u3046\u306b\u66f8\u3044\u3066\u3057\u307e\u3046\u3002\n\n```php\n$hoge = $this->getMock('Hoge');\n\n$hoge->expects(exactly(1))->method('func')->with(identicalTo('A'));\n$hoge->expects(exactly(2))->method('func')->with(identicalTo('B'));\n\n$hoge->func('A');\n$hoge->func('B');\n$hoge->func('B');\n```\n\n\u3053\u308c\u306f\u6b21\u306e\u30c6\u30b9\u30c8\u306b\u306a\u308a\u6210\u7acb\u3057\u306a\u3044\u3002\n\n - func \u304c 1 \u56de\u547c\u3070\u308c\u3066\u305d\u306e\u5f15\u6570\u306f 'A'\n - func \u304c 2 \u56de\u547c\u3070\u308c\u3066\u305d\u306e\u5f15\u6570\u306f 'B'\n\n\u6b21\u306e\u3088\u3046\u306b at \u3092\u4f7f\u308f\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\n```php\n$hoge = $this->getMock('Hoge');\n\n$hoge->expects(at(0))->method('func')->with(identicalTo('A'));\n$hoge->expects(at(1))->method('func')->with(identicalTo('B'));\n$hoge->expects(at(2))->method('func')->with(identicalTo('B'));\n\n$hoge->func('A');\n$hoge->func('B');\n$hoge->func('B');\n```\n\n\u3053\u308c\u306f\u6b21\u306e\u30c6\u30b9\u30c8\u3068\u306a\u308b\u3002\n\n - 0 \u56de\u76ee\u306e\u547c\u3073\u51fa\u3057\u306f func \u3067 \u5f15\u6570\u306f 'A'\n - 1 \u56de\u76ee\u306e\u547c\u3073\u51fa\u3057\u306f func \u3067 \u5f15\u6570\u306f 'B'\n - 2 \u56de\u76ee\u306e\u547c\u3073\u51fa\u3057\u306f func \u3067 \u5f15\u6570\u306f 'B'\n\n**func \u306e N \u56de\u76ee\u306e\u547c\u3073\u51fa\u3057** \u3067\u306f\u306a\u3044\u306e\u3067\u3001\u4ed6\u306e\u30e1\u30bd\u30c3\u30c9\u547c\u3073\u51fa\u3057\u304c\u524d\u3084\u9593\u306b\u3042\u308b\u3068 at \u306e\u5024\u3082\u5909\u66f4\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\n - http://phpunit.de/manual/3.7/ja/test-doubles.html#test-doubles.mock-objects.tables.matchers\n    - \u5c11\u3057\u4e0b\u306e\u6ce8\u8a18\n\n```php\n$hoge = $this->getMock('Hoge');\n\n$hoge->expects(at(1))->method('func')->with(identicalTo('A'));\n$hoge->expects(at(3))->method('func')->with(identicalTo('B'));\n$hoge->expects(at(5))->method('func')->with(identicalTo('B'));\n\n$hoge->xxxx();\n$hoge->func('A');\n$hoge->xxxx();\n$hoge->func('B');\n$hoge->xxxx();\n$hoge->func('B');\n$hoge->xxxx();\n```\n\nfunc \u3060\u3051\u3092\u30e2\u30c3\u30af\u5316\u3059\u308c\u3070 **func \u306e N \u56de\u76ee\u306e\u547c\u3073\u51fa\u3057** \u306b\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\n```php\n$hoge = $this->getMock('Hoge', ['func']);\n\n$hoge->expects(at(0))->method('func')->with(identicalTo('A'));\n$hoge->expects(at(1))->method('func')->with(identicalTo('B'));\n$hoge->expects(at(2))->method('func')->with(identicalTo('B'));\n\n$hoge->xxxx();\n$hoge->func('A');\n$hoge->xxxx();\n$hoge->func('B');\n$hoge->xxxx();\n$hoge->func('B');\n$hoge->xxxx();\n```\n", "tags": ["PHP", "PHPUnit3.7"]}