{"context": " More than 1 year has passed since last update.\u30a2\u30c9\u30d9\u30f3\u30c8\u30ab\u30ec\u30f3\u30c0\u30fc8\u65e5\u76ee\u3067\u3059\u3002\n\u4eca\u65e5\u306fPhotonRealTime\u3068\u306e\u9023\u643a\u306b\u3064\u3044\u3066\u66f8\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nQiita\u521d\u6295\u7a3f\u306a\u306e\u3067\u898b\u3065\u3089\u3044\u90e8\u5206\u3082\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u304a\u5f79\u306b\u7acb\u3066\u308c\u3070\u5e78\u3044\u3067\u3059\u3002\n\u4eca\u56de\u7528\u306b\u4f5c\u6210\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u3053\u3061\u3089\u3067\u3059\u3002\n\nPhotonRealTime\u3068\u306f\n\u6240\u8b02\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u901a\u4fe1\u30a8\u30f3\u30b8\u30f3\u3067\u3059\u3002\nphoton\u306b\u306f\u3056\u3063\u304f\u308a\u8a00\u3046\u3068\u30af\u30e9\u30a6\u30c9\u30b5\u30fc\u30d3\u30b9\u306ePhotonRealTime\u3068\u30aa\u30f3\u30d7\u30ec\u30df\u30b9\u306ePhotonServer\u304c\u3042\u308a\u307e\u3059\u3002\n(PhotonRealTime\u306fPhotonCloud\u306e\u540d\u79f0\u304c\u5909\u308f\u3063\u305f\u3082\u306e\u306e\u3088\u3046\u3067\u3059)\nPhotonRealTime\u3067\u306f\u30b5\u30fc\u30d0\u30fc\u5074\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u304c\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3084\u30eb\u30fc\u30e0\u306e\u4f5c\u6210\u3001\u63a5\u7d9a\u304c\u7c21\u5358\u306b\u3067\u304d\u308b\u306e\u3067\u4eca\u56de\u306f\u3053\u3061\u3089\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n1.\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u7d44\u307f\u8fbc\u3080\n\u307e\u305a\u3053\u3061\u3089\u304b\u3089cocos2d-x\u306eiOS SDK\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u307e\u3057\u3087\u3046\u3002\n\u767b\u9332\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u7121\u6599\u30d7\u30e9\u30f3\u304c\u3042\u308b\u306e\u3067\u3001\u3072\u3068\u307e\u305a\u305d\u308c\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u4e2d\u8eab\u304c\u3044\u308d\u3044\u308d\u3042\u308a\u307e\u3059\u304c\u5fc5\u8981\u306a\u306e\u306fCommon-cpp,LoadBalancing-cpp,Photon-cpp\u30d5\u30a9\u30eb\u30c0\u5185\u306einc,lib\u30d5\u30a9\u30eb\u30c0\u306e\u307f\u3067\u3059\u3002\n\u4eca\u56de\u3053\u308c\u3089\u3092\u675f\u306d\u305fPhoton-iOS-SDK\u30d5\u30a9\u30eb\u30c0\u3092proj.ios_mac\u4e0b\u306b\u5165\u308c\u307e\u3057\u305f\u3002\n\n2.\u30d1\u30b9\u3092\u901a\u3059\n\u300cLinking\u300d\uff1e\u300cOther Linker Flags\u300d\u306b\u4e0b\u8a18\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n-lCommon-cpp_$(CONFIGURATION)_$(PLATFORM_NAME)\n-lPhoton-cpp_$(CONFIGURATION)_$(PLATFORM_NAME)\n-lLoadBalancing-cpp_$(CONFIGURATION)_$(PLATFORM_NAME)\n\u300cSearch Paths\u300d\uff1e\u300cHeader Search Paths\u300d\u306b\u4e0b\u8a18\u3092\u8ffd\u52a0\u3057\u307e\u3059\n$(SRCROOT)/Photon-iOS_SDK\n\u300cLibrary Paths\u300d\uff1e\u300cLibrary Search Paths\u300d\u306b\u4e0b\u8a18\u3092\u8ffd\u52a0\u3057\u307e\u3059\n$(SRCROOT)/Photon-iOS_SDK/Common-cpp/lib\n$(SRCROOT)/Photon-iOS_SDK/Photon-cpp/lib\n$(SRCROOT)/Photon-iOS_SDK/LoadBalancing-cpp/lib\n\u3053\u308c\u3067PhotonRealTime\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u306f\u305a\u3002\n(JString\u3067\u6012\u3089\u308c\u308b\u5834\u5408#define EG_NOSTDLIB\u3092\u5b9a\u7fa9\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u66ab\u5b9a\u7684\u3067\u3059\u304c\u2026)\n3.Clinet\u306e\u4f5c\u6210\n\u4eca\u56de\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u306fDemo\u3092\u53c2\u8003\u306bNetworkLogic\u3068\u3044\u3046\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\u3053\u306e\u30af\u30e9\u30b9\u306fExitGames::LoadBalancing::Listener\u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u3066\u304a\u308a\u3001\u30e1\u30f3\u30d0\u5909\u6570\u306bExitGames::LoadBalancing::Client\u30af\u30e9\u30b9\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\n\u7d99\u627f\u5143\u306e\u30ea\u30b9\u30ca\u30fc\u306b\u5f93\u3063\u3066\u30e1\u30bd\u30c3\u30c9\u3092\u7528\u610f\u3057Client\u306e\u521d\u671f\u5316\u306bthis*\u3092\u6e21\u3059\u3068\u3044\u3046\u5f62\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\u3053\u306e\u6642\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u767b\u9332\u3067\u53d6\u5f97\u3057\u305fAppId\u3092\u5f15\u6570\u3067\u6e21\u3057\u307e\u3059\u3002\n\u30b5\u30f3\u30d7\u30eb\u3092\u52d5\u304b\u3057\u305f\u3044\u5834\u5408,\u3053\u306e\u5b9a\u6570\u306e\u5024\u3092\u3054\u5229\u7528\u306e\u3082\u306e\u306b\u5909\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\nNetworkLogic.cpp\nstatic const ExitGames::Common::JString appId = L\"<your appId>\"; // set your app id here\n\n\n// \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\nNetworkLogic::NetworkLogic():\nclient(*this, appId, appVersion, PLAYER_NAME+GETTIMEMS(), ExitGames::Photon::ConnectionProtocol::UDP, ExitGames::LoadBalancing::AuthenticationValues(), true, false)\n{  }\n\n\n\nNetworkLogic.h\n    virtual void connectReturn(int errorCode, const ExitGames::Common::JString& errorString);\n    virtual void disconnectReturn(void);\n    virtual void createRoomReturn(int localPlayerNr, const ExitGames::Common::Hashtable& gameProperties, const ExitGames::Common::Hashtable& playerProperties, int errorCode, const ExitGames::Common::JString& errorString);\n    virtual void joinRoomReturn(int localPlayerNr, const ExitGames::Common::Hashtable& gameProperties, const ExitGames::Common::Hashtable& playerProperties, int errorCode, const ExitGames::Common::JString& errorString);\n    virtual void joinRandomRoomReturn(int localPlayerNr, const ExitGames::Common::Hashtable& gameProperties, const ExitGames::Common::Hashtable& playerProperties, int errorCode, const ExitGames::Common::JString& errorString);\n    virtual void leaveRoomReturn(int errorCode, const ExitGames::Common::JString& errorString);\n\n\n\u3053\u308c\u3089\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3063\u3066\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u8cbc\u308a\u30eb\u30fc\u30e0\u3092\u4f5c\u3063\u305f\u308a\u3001\u30eb\u30fc\u30e0\u306b\u5165\u308b\u306e\u3067\u3059\u304c\u305d\u306e\u3042\u305f\u308a\u306f\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53c2\u8003\u306b\u3057\u3066\u3044\u305f\u3060\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002\n4.Event\u306e\u9001\u4fe1\n\u4eca\u56de\u306f\u30bf\u30c3\u30c1\u3057\u305f\u3068\u3053\u308d\u306b\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u8868\u793a\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3092\u3084\u308a\u307e\u3059\u3002\n\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u7a2e\u985e\u306fplayerId\u306b\u57fa\u3065\u304f\u3088\u3046\u306b\u3059\u308b\u306e\u3067\u30dd\u30b8\u30b7\u30e7\u30f3\u3060\u3051\u9001\u308c\u3070\u826f\u3044\u308f\u3051\u3067\u3059\u3002\nnByte\u306funsigned char\u3067\u3042\u308a\u5f15\u6570\u306ecode\u306f\u8907\u6570\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u533a\u5225\u3059\u308b\u305f\u3081\u306e\u3082\u306e\u3067\u3059\u3002\n\nHelloWorldScene.cpp\nbool HelloWorld::onTouchBegan(cocos2d::Touch* touch, cocos2d::Event* event)\n{\n    if (networkLogic->getPlayerId())\n    {\n        this->addParticle(networkLogic->getPlayerId(), touch->getLocation().x, touch->getLocation().y);\n\n        // \u30a4\u30d9\u30f3\u30c8\uff08\u30bf\u30c3\u30c1\u5ea7\u6a19\uff09\u3092\u9001\u4fe1\n        ExitGames::Common::Hashtable* eventContent = new ExitGames::Common::Hashtable();\n        eventContent->put<int, float>(1, touch->getLocation().x);\n        eventContent->put<int, float>(2, touch->getLocation().y);\n        networkLogic->sendEvent(1, eventContent);\n    }\n\n    return true;\n}\n\n\n\nNetworkLogic.cpp\nvoid NetworkLogic::sendEvent(nByte code, ExitGames::Common::Hashtable* eventContent)\n{\n    this->client.opRaiseEvent(true, eventContent, 1, code);\n}\n\n\n5.Event\u306e\u9001\u4fe1\n\u4eca\u5ea6\u306f\u9001\u3089\u308c\u3066\u304d\u305f\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\u30a4\u30d9\u30f3\u30c8\u306fcustomEventAction\u30e1\u30bd\u30c3\u30c9\u304c\u53d7\u3051\u53d6\u308b\u306e\u3067\u5024\u3092\u53d6\u5f97\u3057\u3066queue\u306b\u8a70\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\u4e00\u65b9Scene\u5074\u3067update\u30e1\u30bd\u30c3\u30c9\u3092\u6bce\u30d5\u30ec\u30fc\u30e0\u547c\u3073,queue\u306e\u4e2d\u8eab\u5206\u3060\u3051\u53d6\u308a\u51fa\u3057\u3066\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u63cf\u753b\u3057\u307e\u3059\u3002\n\nNetworkLogic.cpp\nvoid NetworkLogic::customEventAction(int playerNr, nByte eventCode, const ExitGames::Common::Object& eventContent)\n{\n    switch (eventCode)\n    {\n        case 1:\n            ExitGames::Common::Hashtable* event { ExitGames::Common::ValueObject<ExitGames::Common::Hashtable*>(eventContent).getDataCopy() };\n            float x { ExitGames::Common::ValueObject<float>(event->getValue(1)).getDataCopy() };\n            float y { ExitGames::Common::ValueObject<float>(event->getValue(2)).getDataCopy() };\n            eventQueue.push({static_cast<float>(playerNr), x, y});\n            break;\n    }\n}\n\n\n\nHelloWorld.cpp\n    // HelloWorld::update(float dealt)\u5185\n    while (!networkLogic->eventQueue.empty())\n    {\n        std::array<float, 3> arr = networkLogic->eventQueue.front();\n        networkLogic->eventQueue.pop();\n\n        int playerNr = static_cast<int>(arr[0]);\n        float x = arr[1];\n        float y = arr[2];\n        this->addParticle(playerNr, x, y);\n    }\n}\n\n\n6.\u52d5\u304b\u3057\u3066\u307f\u305f\niPad\u3068iPhone\u3067\u901a\u4fe1\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u3001\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u4e21\u65b9\u306e\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u304c\u51fa\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\n\u7d42\u308f\u308a\u306b\n\u7701\u7565\u3057\u305f\u90e8\u5206\u306f\u3042\u308a\u307e\u3059\u304c\u7c21\u5358\u306b\u901a\u4fe1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\nEvent\u306e\u30bf\u30a4\u30d7\u3068\u30c7\u30fc\u30bf\u304c\u5225\u306b\u5206\u304b\u308c\u3066\u3044\u308b\u306e\u3067\u3001void*\u578b\u306b\u5168\u90e8\u6295\u3052\u30661byte\u76ee\u306e\u6570\u5024\u3067\u5206\u5c90\u3059\u308b\u2026\u306a\u3093\u3066\u3044\u3046\u51e6\u7406\u304c\u3044\u3089\u306a\u3044\u306e\u304c\u9b45\u529b\u7684\u3060\u3068\u601d\u3044\u307e\u3059\u3002\nPhotonRealTIme\u3067\u306f\u3053\u306e\u300c\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u5f35\u3063\u3066\u30eb\u30fc\u30e0\u63a5\u7d9a\u3057\u3066\u30a4\u30d9\u30f3\u30c8\u9001\u4fe1\u300d\u3068\u3044\u3046\u3053\u3068\u306b\u7279\u5316\u3057\u3066\u3044\u3066\u3001\u30eb\u30fc\u30e0\u306b\u4f55\u4eba\u5165\u3063\u3066\u3044\u308b\u304b\u306a\u3069\u306f\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3002\n\u3053\u308c\u3089\u3092\u4f7f\u3044\u305f\u3044\u5834\u5408\u306f\u4e0a\u8a18\u306ePhotonServer\u3092\u4f7f\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\u3068\u306f\u3044\u3048PhotonRealTime\u3067\u3082\u5145\u5206\u5bfe\u6226\u30b2\u30fc\u30e0\u3092\u4f5c\u308b\u3053\u3068\u306f\u3067\u304d\u308b\u3068\u601d\u3046\u306e\u3067\u3001\u3053\u308c\u3092\u6a5f\u306b\u8a66\u3057\u3066\u307f\u3066\u306f\u3044\u304b\u304c\u3067\u3057\u3087\u3046\u304b\uff1f\n\u30a2\u30c9\u30d9\u30f3\u30c8\u30ab\u30ec\u30f3\u30c0\u30fc8\u65e5\u76ee\u3067\u3059\u3002\n\u4eca\u65e5\u306fPhotonRealTime\u3068\u306e\u9023\u643a\u306b\u3064\u3044\u3066\u66f8\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nQiita\u521d\u6295\u7a3f\u306a\u306e\u3067\u898b\u3065\u3089\u3044\u90e8\u5206\u3082\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u304a\u5f79\u306b\u7acb\u3066\u308c\u3070\u5e78\u3044\u3067\u3059\u3002\n\u4eca\u56de\u7528\u306b\u4f5c\u6210\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f[\u3053\u3061\u3089](https://github.com/AiharaKohei/PhotonRealTimeSample)\u3067\u3059\u3002\n#[PhotonRealTime](https://www.photonengine.com/ja/Realtime)\u3068\u306f\n\u6240\u8b02\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u901a\u4fe1\u30a8\u30f3\u30b8\u30f3\u3067\u3059\u3002\nphoton\u306b\u306f\u3056\u3063\u304f\u308a\u8a00\u3046\u3068\u30af\u30e9\u30a6\u30c9\u30b5\u30fc\u30d3\u30b9\u306ePhotonRealTime\u3068\u30aa\u30f3\u30d7\u30ec\u30df\u30b9\u306ePhotonServer\u304c\u3042\u308a\u307e\u3059\u3002\n(PhotonRealTime\u306fPhotonCloud\u306e\u540d\u79f0\u304c\u5909\u308f\u3063\u305f\u3082\u306e\u306e\u3088\u3046\u3067\u3059)\nPhotonRealTime\u3067\u306f\u30b5\u30fc\u30d0\u30fc\u5074\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u304c\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3084\u30eb\u30fc\u30e0\u306e\u4f5c\u6210\u3001\u63a5\u7d9a\u304c\u7c21\u5358\u306b\u3067\u304d\u308b\u306e\u3067\u4eca\u56de\u306f\u3053\u3061\u3089\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n**1.\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u7d44\u307f\u8fbc\u3080**\n\u307e\u305a[\u3053\u3061\u3089](https://www.photonengine.com/ja/Realtime/Download)\u304b\u3089cocos2d-x\u306eiOS SDK\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u307e\u3057\u3087\u3046\u3002\n\u767b\u9332\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u7121\u6599\u30d7\u30e9\u30f3\u304c\u3042\u308b\u306e\u3067\u3001\u3072\u3068\u307e\u305a\u305d\u308c\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u4e2d\u8eab\u304c\u3044\u308d\u3044\u308d\u3042\u308a\u307e\u3059\u304c\u5fc5\u8981\u306a\u306e\u306fCommon-cpp,LoadBalancing-cpp,Photon-cpp\u30d5\u30a9\u30eb\u30c0\u5185\u306einc,lib\u30d5\u30a9\u30eb\u30c0\u306e\u307f\u3067\u3059\u3002\n\u4eca\u56de\u3053\u308c\u3089\u3092\u675f\u306d\u305fPhoton-iOS-SDK\u30d5\u30a9\u30eb\u30c0\u3092proj.ios_mac\u4e0b\u306b\u5165\u308c\u307e\u3057\u305f\u3002\n<img width=\"611\" alt=\"screenshot.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/80950/8b97be7b-fbb1-c9ac-ef71-e79957328c6e.png\">\n\n**2.\u30d1\u30b9\u3092\u901a\u3059**\n\u300cLinking\u300d\uff1e\u300cOther Linker Flags\u300d\u306b\u4e0b\u8a18\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n`-lCommon-cpp_$(CONFIGURATION)_$(PLATFORM_NAME)\n-lPhoton-cpp_$(CONFIGURATION)_$(PLATFORM_NAME)\n-lLoadBalancing-cpp_$(CONFIGURATION)_$(PLATFORM_NAME)`\n\u300cSearch Paths\u300d\uff1e\u300cHeader Search Paths\u300d\u306b\u4e0b\u8a18\u3092\u8ffd\u52a0\u3057\u307e\u3059\n`$(SRCROOT)/Photon-iOS_SDK`\n\u300cLibrary Paths\u300d\uff1e\u300cLibrary Search Paths\u300d\u306b\u4e0b\u8a18\u3092\u8ffd\u52a0\u3057\u307e\u3059\n`$(SRCROOT)/Photon-iOS_SDK/Common-cpp/lib\n$(SRCROOT)/Photon-iOS_SDK/Photon-cpp/lib\n$(SRCROOT)/Photon-iOS_SDK/LoadBalancing-cpp/lib`\n\u3053\u308c\u3067PhotonRealTime\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u306f\u305a\u3002\n(JString\u3067\u6012\u3089\u308c\u308b\u5834\u5408`#define EG_NOSTDLIB`\u3092\u5b9a\u7fa9\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u66ab\u5b9a\u7684\u3067\u3059\u304c\u2026)\n\n**3.Clinet\u306e\u4f5c\u6210**\n\u4eca\u56de\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u306fDemo\u3092\u53c2\u8003\u306b`NetworkLogic`\u3068\u3044\u3046\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\u3053\u306e\u30af\u30e9\u30b9\u306f`ExitGames::LoadBalancing::Listener`\u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u3066\u304a\u308a\u3001\u30e1\u30f3\u30d0\u5909\u6570\u306b`ExitGames::LoadBalancing::Client`\u30af\u30e9\u30b9\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\n\u7d99\u627f\u5143\u306e\u30ea\u30b9\u30ca\u30fc\u306b\u5f93\u3063\u3066\u30e1\u30bd\u30c3\u30c9\u3092\u7528\u610f\u3057Client\u306e\u521d\u671f\u5316\u306bthis*\u3092\u6e21\u3059\u3068\u3044\u3046\u5f62\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\u3053\u306e\u6642\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u767b\u9332\u3067\u53d6\u5f97\u3057\u305fAppId\u3092\u5f15\u6570\u3067\u6e21\u3057\u307e\u3059\u3002\n***\u30b5\u30f3\u30d7\u30eb\u3092\u52d5\u304b\u3057\u305f\u3044\u5834\u5408,\u3053\u306e\u5b9a\u6570\u306e\u5024\u3092\u3054\u5229\u7528\u306e\u3082\u306e\u306b\u5909\u3048\u3066\u304f\u3060\u3055\u3044\u3002***\n\n```cpp:NetworkLogic.cpp\nstatic const ExitGames::Common::JString appId = L\"<your appId>\"; // set your app id here\n\n\n// \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\nNetworkLogic::NetworkLogic():\nclient(*this, appId, appVersion, PLAYER_NAME+GETTIMEMS(), ExitGames::Photon::ConnectionProtocol::UDP, ExitGames::LoadBalancing::AuthenticationValues(), true, false)\n{  }\n```\n\n```cpp:NetworkLogic.h\n    virtual void connectReturn(int errorCode, const ExitGames::Common::JString& errorString);\n    virtual void disconnectReturn(void);\n    virtual void createRoomReturn(int localPlayerNr, const ExitGames::Common::Hashtable& gameProperties, const ExitGames::Common::Hashtable& playerProperties, int errorCode, const ExitGames::Common::JString& errorString);\n    virtual void joinRoomReturn(int localPlayerNr, const ExitGames::Common::Hashtable& gameProperties, const ExitGames::Common::Hashtable& playerProperties, int errorCode, const ExitGames::Common::JString& errorString);\n    virtual void joinRandomRoomReturn(int localPlayerNr, const ExitGames::Common::Hashtable& gameProperties, const ExitGames::Common::Hashtable& playerProperties, int errorCode, const ExitGames::Common::JString& errorString);\n    virtual void leaveRoomReturn(int errorCode, const ExitGames::Common::JString& errorString);\n```\n\u3053\u308c\u3089\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3063\u3066\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u8cbc\u308a\u30eb\u30fc\u30e0\u3092\u4f5c\u3063\u305f\u308a\u3001\u30eb\u30fc\u30e0\u306b\u5165\u308b\u306e\u3067\u3059\u304c\u305d\u306e\u3042\u305f\u308a\u306f\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53c2\u8003\u306b\u3057\u3066\u3044\u305f\u3060\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002\n\n**4.Event\u306e\u9001\u4fe1**\n\u4eca\u56de\u306f\u30bf\u30c3\u30c1\u3057\u305f\u3068\u3053\u308d\u306b\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u8868\u793a\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3092\u3084\u308a\u307e\u3059\u3002\n\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u7a2e\u985e\u306fplayerId\u306b\u57fa\u3065\u304f\u3088\u3046\u306b\u3059\u308b\u306e\u3067\u30dd\u30b8\u30b7\u30e7\u30f3\u3060\u3051\u9001\u308c\u3070\u826f\u3044\u308f\u3051\u3067\u3059\u3002\n`nByte`\u306f`unsigned char`\u3067\u3042\u308a\u5f15\u6570\u306ecode\u306f\u8907\u6570\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u533a\u5225\u3059\u308b\u305f\u3081\u306e\u3082\u306e\u3067\u3059\u3002\n\n```cpp:HelloWorldScene.cpp\nbool HelloWorld::onTouchBegan(cocos2d::Touch* touch, cocos2d::Event* event)\n{\n    if (networkLogic->getPlayerId())\n    {\n        this->addParticle(networkLogic->getPlayerId(), touch->getLocation().x, touch->getLocation().y);\n        \n        // \u30a4\u30d9\u30f3\u30c8\uff08\u30bf\u30c3\u30c1\u5ea7\u6a19\uff09\u3092\u9001\u4fe1\n        ExitGames::Common::Hashtable* eventContent = new ExitGames::Common::Hashtable();\n        eventContent->put<int, float>(1, touch->getLocation().x);\n        eventContent->put<int, float>(2, touch->getLocation().y);\n        networkLogic->sendEvent(1, eventContent);\n    }\n    \n    return true;\n}\n```\n\n```cpp:NetworkLogic.cpp\nvoid NetworkLogic::sendEvent(nByte code, ExitGames::Common::Hashtable* eventContent)\n{\n    this->client.opRaiseEvent(true, eventContent, 1, code);\n}\n```\n\n**5.Event\u306e\u9001\u4fe1**\n\u4eca\u5ea6\u306f\u9001\u3089\u308c\u3066\u304d\u305f\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\u30a4\u30d9\u30f3\u30c8\u306fcustomEventAction\u30e1\u30bd\u30c3\u30c9\u304c\u53d7\u3051\u53d6\u308b\u306e\u3067\u5024\u3092\u53d6\u5f97\u3057\u3066queue\u306b\u8a70\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\u4e00\u65b9Scene\u5074\u3067update\u30e1\u30bd\u30c3\u30c9\u3092\u6bce\u30d5\u30ec\u30fc\u30e0\u547c\u3073,queue\u306e\u4e2d\u8eab\u5206\u3060\u3051\u53d6\u308a\u51fa\u3057\u3066\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u63cf\u753b\u3057\u307e\u3059\u3002\n\n```cpp:NetworkLogic.cpp\nvoid NetworkLogic::customEventAction(int playerNr, nByte eventCode, const ExitGames::Common::Object& eventContent)\n{\n    switch (eventCode)\n    {\n        case 1:\n            ExitGames::Common::Hashtable* event { ExitGames::Common::ValueObject<ExitGames::Common::Hashtable*>(eventContent).getDataCopy() };\n            float x { ExitGames::Common::ValueObject<float>(event->getValue(1)).getDataCopy() };\n            float y { ExitGames::Common::ValueObject<float>(event->getValue(2)).getDataCopy() };\n            eventQueue.push({static_cast<float>(playerNr), x, y});\n            break;\n    }\n}\n```\n\n```cpp:HelloWorld.cpp\n    // HelloWorld::update(float dealt)\u5185\n    while (!networkLogic->eventQueue.empty())\n    {\n        std::array<float, 3> arr = networkLogic->eventQueue.front();\n        networkLogic->eventQueue.pop();\n        \n        int playerNr = static_cast<int>(arr[0]);\n        float x = arr[1];\n        float y = arr[2];\n        this->addParticle(playerNr, x, y);\n    }\n}\n```\n\n**6.\u52d5\u304b\u3057\u3066\u307f\u305f**\niPad\u3068iPhone\u3067\u901a\u4fe1\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u3001\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u4e21\u65b9\u306e\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u304c\u51fa\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n![Screen-Shot-2015-12-08-at-19.03.49.png](https://qiita-image-store.s3.amazonaws.com/0/80950/ec850050-240d-dd64-8bb9-4a1d40846f35.png)\n\n#\u7d42\u308f\u308a\u306b\n\u7701\u7565\u3057\u305f\u90e8\u5206\u306f\u3042\u308a\u307e\u3059\u304c\u7c21\u5358\u306b\u901a\u4fe1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\nEvent\u306e\u30bf\u30a4\u30d7\u3068\u30c7\u30fc\u30bf\u304c\u5225\u306b\u5206\u304b\u308c\u3066\u3044\u308b\u306e\u3067\u3001void*\u578b\u306b\u5168\u90e8\u6295\u3052\u30661byte\u76ee\u306e\u6570\u5024\u3067\u5206\u5c90\u3059\u308b\u2026\u306a\u3093\u3066\u3044\u3046\u51e6\u7406\u304c\u3044\u3089\u306a\u3044\u306e\u304c\u9b45\u529b\u7684\u3060\u3068\u601d\u3044\u307e\u3059\u3002\nPhotonRealTIme\u3067\u306f\u3053\u306e\u300c\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u5f35\u3063\u3066\u30eb\u30fc\u30e0\u63a5\u7d9a\u3057\u3066\u30a4\u30d9\u30f3\u30c8\u9001\u4fe1\u300d\u3068\u3044\u3046\u3053\u3068\u306b\u7279\u5316\u3057\u3066\u3044\u3066\u3001\u30eb\u30fc\u30e0\u306b\u4f55\u4eba\u5165\u3063\u3066\u3044\u308b\u304b\u306a\u3069\u306f\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3002\n\u3053\u308c\u3089\u3092\u4f7f\u3044\u305f\u3044\u5834\u5408\u306f\u4e0a\u8a18\u306ePhotonServer\u3092\u4f7f\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\u3068\u306f\u3044\u3048PhotonRealTime\u3067\u3082\u5145\u5206\u5bfe\u6226\u30b2\u30fc\u30e0\u3092\u4f5c\u308b\u3053\u3068\u306f\u3067\u304d\u308b\u3068\u601d\u3046\u306e\u3067\u3001\u3053\u308c\u3092\u6a5f\u306b\u8a66\u3057\u3066\u307f\u3066\u306f\u3044\u304b\u304c\u3067\u3057\u3087\u3046\u304b\uff1f\n\n\n\n\n\n\n\n", "tags": ["cocos2d-x", "C++", "PhotonRealtime"]}