{"context": "Qiita\u306b\u3064\u306a\u3052\u3066\u307f\u305f\u3002\u30ec\u30f3\u30c0\u30e9\u304b\u3089\u4f7f\u3046\u5834\u5408\nvar remote = require('remote');\nvar request = require('request');\nvar BrowserWindow = remote.require('browser-window');\n\nvar qiitaUrl = \"https://qiita.com/api/v2/oauth/authorize?client_id=[\u81ea\u5206\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID]&scope=write_qiita\";\nvar authWindow = new BrowserWindow({width: 800, height: 600});\nauthWindow.webContents.on('did-get-redirect-request', (event, oldUrl, newUrl) => {\n  var matched;\n  if(matched = newUrl.match(/\\?code=([^&]*)/)) {\n    var params = {\n      'client_id': \"xxxx\",\n      'client_secret': \"xxxx\",\n      'code': matched[1],\n    };\n\n    var options = {\n      url: 'https://qiita.com/api/v2/access_tokens',\n      json: params\n    };\n\n    request.post(options, (error, response, body) => {\n      /* body.token \u306b\u5165\u3063\u3066\u308b */\n    });\n    setTimeout(() => {\n      authWindow.close();\n    }, 0);\n  }\n});\n\nauthWindow.on('closed', () => {\n  /* \u30e6\u30fc\u30b6\u30fc\u306b\u30a6\u30a4\u30f3\u30c9\u30a6\u3092\u30af\u30ed\u30fc\u30ba\u3055\u308c\u305f */\n});\nauthWindow.loadURL(qiitaUrl)\n\nQiita\u306b\u3064\u306a\u3052\u3066\u307f\u305f\u3002\u30ec\u30f3\u30c0\u30e9\u304b\u3089\u4f7f\u3046\u5834\u5408\n\n``` javascript\nvar remote = require('remote');\nvar request = require('request');\nvar BrowserWindow = remote.require('browser-window');\n\nvar qiitaUrl = \"https://qiita.com/api/v2/oauth/authorize?client_id=[\u81ea\u5206\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID]&scope=write_qiita\";\nvar authWindow = new BrowserWindow({width: 800, height: 600});\nauthWindow.webContents.on('did-get-redirect-request', (event, oldUrl, newUrl) => {\n  var matched;\n  if(matched = newUrl.match(/\\?code=([^&]*)/)) {\n    var params = {\n      'client_id': \"xxxx\",\n      'client_secret': \"xxxx\",\n      'code': matched[1],\n    };\n    \n    var options = {\n      url: 'https://qiita.com/api/v2/access_tokens',\n      json: params\n    };\n    \n    request.post(options, (error, response, body) => {\n      /* body.token \u306b\u5165\u3063\u3066\u308b */\n    });\n    setTimeout(() => {\n      authWindow.close();\n    }, 0);\n  }\n});\n\nauthWindow.on('closed', () => {\n  /* \u30e6\u30fc\u30b6\u30fc\u306b\u30a6\u30a4\u30f3\u30c9\u30a6\u3092\u30af\u30ed\u30fc\u30ba\u3055\u308c\u305f */\n});\nauthWindow.loadURL(qiitaUrl)\n```\n\n", "tags": ["MdNote", "Electron", "OAuth", "oauth2", "Node.js"]}