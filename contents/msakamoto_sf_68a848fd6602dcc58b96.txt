{"context": "2017-01-15 \u6642\u70b9\u3067\u3001\u4ee5\u4e0b\u306e\u74b0\u5883\u3067 Qualys SSL Labs \u306e SSL Server Test \u3067 A+ \u8a55\u4fa1\u3092\u53d6\u5f97\u3067\u304d\u307e\u3057\u305f\u306e\u3067\u3001\u8a2d\u5b9a\u4f8b\u3068\u3057\u3066\u516c\u958b\u3057\u307e\u3059\u3002\nOS:\n$ cat /etc/centos-release\nCentOS Linux release 7.3.1611 (Core)\n\nApache HTTPD, mod_ssl, OpenSSL\u306fCentOS7\u63d0\u4f9b\u306eRPM\u3092\u5229\u7528:\nhttpd-2.4.6-45.el7.centos.x86_64\nopenssl-1.0.1e-60.el7.x86_64\nopenssl-libs-1.0.1e-60.el7.x86_64\nmod_ssl-2.4.6-45.el7.centos.x86_64\n\n\u8a3c\u660e\u66f8 : Let's Encrypt \u3067\u53d6\u5f97\u3057\u305fRSA 2048bit \u306e\u8a3c\u660e\u66f8\u3092\u4f7f\u7528\n\n\u5bfe\u8c61\u30c9\u30e1\u30a4\u30f3 : www.glamenv-septzen.net\n\n\"SSL Server Test\" \u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5c02\u9580\u4f1a\u793e\u306eQualys\u304c\u7121\u511f\u3067\u63d0\u4f9b\u3057\u3066\u3044\u308b\u3001\u8a3c\u660e\u66f8\u3068SSL/TLS\u306e\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u30bb\u30ad\u30e5\u30a2\u306a\u8a2d\u5b9a\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3001\u4ee3\u8868\u7684\u306a\u65e2\u77e5\u306e\u8106\u5f31\u6027\u304c\u7121\u3044\u304b\u306a\u3069\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304f\u308c\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\u30c1\u30a7\u30c3\u30af\u5bfe\u8c61\u306e\u30c9\u30e1\u30a4\u30f3\u306b\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u304b\u3089\u63a5\u7d9a\u3067\u304d\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u3053\u306erating\u304c\u9ad8\u304f\u306a\u308b\u307b\u3069\u3001\u305d\u306e\u30b5\u30a4\u30c8\u306e\u8a3c\u660e\u66f8\u3068SSL,TLS\u8a2d\u5b9a\u306f\u3088\u308a\u30bb\u30ad\u30e5\u30a2\u306a\u72b6\u614b\u3067\u3042\u308b\u3068\u8003\u3048\u3089\u308c\u307e\u3059\u3002\n\n\nSSL Server Test (Powered by Qualys SSL Labs)\n\nhttps://www.ssllabs.com/ssltest/index.html\n\n\n\nLet's Encrypt \u3067\u8a3c\u660e\u66f8\u3092\u53d6\u5f97\u3057\u305f\u6d41\u308c\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u53c2\u7167\uff1a\n\n\nCentOS7 + RPM\u7248 Apache HTTPD 2.4.6 \u3067 Let's Encrypt \u5c0e\u5165\u30e1\u30e2 : certbot, 2017\u5e741\u6708\u6642\u70b9 - Qiita\n\nhttp://qiita.com/msakamoto_sf/items/c699dd0e769733d42087\n\n\n\n\u6ce8\u610f\uff1a\u4eca\u5f8c\u306eSSL/TLS\u95a2\u9023\u306e\u767a\u5c55\u3084\u8106\u5f31\u6027\u52d5\u5411\u306b\u3088\u308a\u8a55\u4fa1\u304c\u5909\u5316\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u3042\u304f\u307e\u3067\u3082 2017-01-15 \u6642\u70b9\u3067\u306f\u3053\u3046\u3060\u3063\u305f\u3001\u3068\u3044\u3046\u53c2\u8003\u3068\u3057\u3066\u672c\u8a18\u4e8b\u3092\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044\u3002\n\n\u65b9\u91dd\nWeb\u3092\u4e2d\u5fc3\u3068\u3057\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u6280\u8853\u60c5\u5831\u304c\u30e1\u30a4\u30f3\u306e\u500b\u4ebablog\u30b5\u30a4\u30c8\u3067\u3059\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u65b9\u91dd\u3068\u3057\u307e\u3057\u305f\u3002\n\n\u60f3\u5b9a\u8aad\u8005\u5c64\u304b\u3089\u3001\u53e4\u3044\u30d6\u30e9\u30a6\u30b6/\u30b9\u30de\u30db\u7aef\u672b/\u30ac\u30e9\u30b1\u30fc\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3066\u304f\u308b\u4eba\u306f\u6b86\u3069\u5c45\u306a\u3044\u3068\u60f3\u5b9a\u3057\u3001\u30d7\u30ed\u30c8\u30b3\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\u3092TLSv1.2\u306e\u307f\u306b\u7d5e\u308b\u3002\nIE10\u4ee5\u524d, Android 4.x\u7cfb\u4ee5\u524d, JDK 1.7\u4ee5\u524d \u306a\u3069\u30b5\u30dd\u30fc\u30c8\u5207\u308c\u542b\u3080\u53e4\u3081\u306e\u30d6\u30e9\u30a6\u30b6\u30fb\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u306f\u5bfe\u5fdc\u3057\u306a\u3044\u3002\nFS(Forward Secrecy)\u306e\u307f\u306b\u7d5e\u308a\u3001\u3055\u3089\u306b Apache HTTPD 2.4.6 \u3060\u3068DHE\u9375\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u3066\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001DHE\u7cfb\u306eCipherSuite\u306f\u4f7f\u308f\u306a\u3044\u3002\n\n\n=> \u9375\u4ea4\u63db\u306fECDHE\u7cfb\u306e\u307f\u306b\u7d5e\u308b\u3002\u60f3\u5b9a\u8aad\u8005\u5c64\u3068\u3057\u3066\u3082ECDHE\u7cfb\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\u30d6\u30e9\u30a6\u30b6/\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u306f\u6b86\u3069\u7121\u3044\u3068\u60f3\u5b9a\u3002\n=> \u3053\u308c\u3092\u4ee5\u3066 Logjam \u5bfe\u7b56\u3068\u3059\u308b\u3002\n\u306a\u304a\u3001RHEL(\u3072\u3044\u3066\u306fCentOS\u5074)\u3067\u72ec\u81ea\u306bDHE\u9375\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306a\u30d1\u30c3\u30c1\u304c\u5f53\u305f\u3063\u3066\u3044\u306a\u3044\u304b\u8abf\u3079\u3066\u307f\u305f\u304c\u30012017-01-15\u6642\u70b9\u3067\u306f\u30d1\u30c3\u30c1\u6709\u7121\u304c\u4e0d\u660e\u306b\u7d42\u308f\u3063\u305f\u3002\n\n\nHTTP Strict Transport Security (HSTS) \u306f\u6709\u52b9\u5316\u3059\u308b\u3002\n\n\n\u5bfe\u8c61\u30c9\u30e1\u30a4\u30f3\u306e\u4e0b\u306b\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3092\u4f5c\u308b\u4e88\u5b9a\u304c\u7121\u3044\u306e\u3067\u3001\u7279\u306b\u526f\u4f5c\u7528\u306f\u8003\u3048\u305a\u3001 includeSubDomains \u3092\u6307\u5b9a\u3002\n\n\n\n\u203b\u4ee5\u4e0b\u306b\u3064\u3044\u3066\u306f\u3001\u3076\u3063\u3061\u3083\u3051\u30012017-01-15\u6642\u70b9\u3067\u3053\u308c\u3089\u7121\u3057\u3067 A+ \u8a55\u4fa1\u53d6\u308c\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u6642\u9593\u306e\u90fd\u5408 + \u5bfe\u5fdc\u3059\u308b\u52d5\u6a5f\u304c\u7121\u304f\u306a\u3063\u305f\u305f\u3081\u3001\u898b\u9001\u3063\u3066\u307e\u3059\u3002\n\nHSTS Preload\nCertificate Transparency\nPublic Key Pinning (HPKP)\nDNS Certification Authority Authorization (CAA)\n\n\n(DNS CAA\u306e\u53c2\u8003\u8cc7\u6599\u306f\u5f8c\u8ff0)\n\u4eca\u56de\u306e\u5bfe\u8c61\u30c9\u30e1\u30a4\u30f3\u306f\u304a\u540d\u524d.com\u306eDNS\u30ec\u30b3\u30fc\u30c9\u8a2d\u5b9a\u6a5f\u80fd\u3067DNS\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u308b\u304c\u30012017-01-15\u6642\u70b9\u3067\u306fCAA\u30ec\u30b3\u30fc\u30c9\u30bf\u30a4\u30d7\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u305f\u3081\u3001\u8ae6\u3081\u305f\u3002\n(\u30c9\u30e1\u30a4\u30f3Navi ->\u300c\u30c9\u30e1\u30a4\u30f3\u8a2d\u5b9a\u300d->\u300c\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\u300d->\u300cDNS\u95a2\u9023\u6a5f\u80fd\u306e\u8a2d\u5b9a\u300d->\u300cDNS\u30ec\u30b3\u30fc\u30c9\u8a2d\u5b9a\u300d\u3067\u3001\u767b\u9332\u3067\u304d\u308b\u30ec\u30b3\u30fc\u30c9\u8a2d\u5b9a\u306b\"CAA\"\u304c\u7121\u304b\u3063\u305f\u3002)\n\n\n\n\n\u8a2d\u5b9a\u4f8b\n\n/etc/httpd/conf.d/ssl.conf\nListen 443 https\nSSLPassPhraseDialog exec:/usr/libexec/httpd-ssl-pass-dialog\nSSLSessionCache         shmcb:/run/httpd/sslcache(512000)\n# ...\n\n# OCSP Stapling \u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30a4\u30ba\u6307\u5b9a\n# \u30c7\u30d5\u30a9\u30eb\u30c8\u3067 SSLSessionCache         shmcb:/run/httpd/sslcache(512000)\n# \u3068\u306a\u3063\u3066\u3044\u305f\u306e\u3067\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u305d\u3053\u306b\u63c3\u3048\u305f\u3002\nSSLStaplingCache shmcb:/run/httpd/stapling_cache(128000)\n\n<VirtualHost *:443>\n# ...\n<Directory \"(...)\">\n    # ...\n    Header always set Strict-Transport-Security \"max-age=31536000; includeSubDomains\"\n</Directory>\n\nSSLEngine on\n\n# \u30d7\u30ed\u30c8\u30b3\u30eb\u306e\u660e\u793a\u7684\u306a\u6307\u5b9a\u306b\u3088\u308a\u3001TLSv1.1/TLSv1.0/SSL3/SSL2 \u3092\u7121\u52b9\u5316\n# (Android 4.x \u7cfb, IE10\u4ee5\u524d\u306f\u5207\u308a\u6368\u3066\u308b)\nSSLProtocol TLSv1.2\n\n# CipherSuite\u3092 ECDHE + AES \u7cfb\u306e\u307f\u306b\u7d5e\u308b\u3002\n# (from https://mozilla.github.io/server-side-tls/ssl-config-generator/)\n# -> IPA SSL/TLS\u6697\u53f7\u8a2d\u5b9a\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3, C.2.2. OpenSSL \u7cfb\u3067\u306e\u6697\u53f7\u30b9\u30a4\u30fc\u30c8\u306e\u8a2d\u5b9a\u4f8b \u304b\u3089DHE\u7cfb\u3092\u5916\u3057\u3066\u3044\u308b\u3002\n# Apache HTTPD 2.4.6 \u306e\u305f\u3081DHE\u9375\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3067\u304d\u306a\u304b\u3063\u305f\u3053\u3068\u3082\u3042\u308a\u3001\n# DHE\u7cfb\u3092\u5916\u3059\u3053\u3068\u3067Logjam\u5bfe\u7b56\u3082\u5b8c\u4e86\u3057\u305f\u3053\u3068\u306b\u3059\u308b\u3002\nSSLCipherSuite ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256\n\n# \u6697\u53f7\u30b9\u30a4\u30fc\u30c8\u9806\u5e8f\u306f\u30b5\u30fc\u30d0\u5074\u306e\u9806\u5e8f\u3092\u512a\u5148\u3059\u308b\u8a2d\u5b9a\u3092\u6709\u52b9\u5316\nSSLHonorCipherOrder on\n\n# \u660e\u793a\u7684\u306bSSL\u5727\u7e2e\u3092OFF\n# (from https://mozilla.github.io/server-side-tls/ssl-config-generator/)\nSSLCompression off\n\n# OCSP Stapling \u6709\u52b9\u5316\nSSLUseStapling on\n# (from https://mozilla.github.io/server-side-tls/ssl-config-generator/)\nSSLStaplingResponderTimeout 5\nSSLStaplingReturnResponderErrors off\n\nSSLCertificateKeyFile   /etc/letsencrypt/live/www.glamenv-septzen.net/privkey.pem\nSSLCertificateFile      /etc/letsencrypt/live/www.glamenv-septzen.net/cert.pem\nSSLCertificateChainFile /etc/letsencrypt/live/www.glamenv-septzen.net/chain.pem\n\n# ...\n</VirtualHost>\n\n\n\nhttps -> https \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u8a2d\u5b9a:\n<IfModule mod_rewrite.c>\nRewriteEngine On\n#...\nRewriteCond %{HTTPS} off\nRewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,redirect=301]\n#...\n</IfModule>\n\n\n\u30c6\u30b9\u30c8\u7d50\u679c\n\n\n\u8a2d\u5b9a\u524d\u306eRating : C\n\nhttps://www.glamenv-septzen.net/images/20170115_https_rating/www.glamenv-septzen.net-ssllabs-20170115-01before.png\n\n\n\n\u8a2d\u5b9a\u5f8c\u306eRating : A+\n\n\nhttps://www.glamenv-septzen.net/images/20170115_https_rating/www.glamenv-septzen.net-ssllabs-20170115-02after.png\n\n(\u8a3c\u660e\u66f8\u304c2\u3064\u3042\u308a\u307e\u3059\u304c\u3001 Certificate #2 \u306b\u3064\u3044\u3066\u306f\u5b9f\u9a13\u7528\u306e\u5225\u306evirtual host\u7528\u306a\u306e\u3067\u30b9\u30eb\u30fc\u3057\u3066\u304f\u3060\u3055\u3044\u3002)\n\n\n\u6570\u30f6\u6708\u524d\u306b\u5225\u306e\u30b5\u30a4\u30c8\u3067\u30c1\u30a7\u30c3\u30af\u3057\u305f\u3068\u304d\u306f\u6c17\u3065\u304b\u306a\u304b\u3063\u305f\u304c\u3001Certificate #1 \u3067 DNS CAA No \u3068\u8868\u793a\u3055\u308c\u3066\u308b\u3002\u73fe\u6642\u70b9\u3067\u306f A+ \u306e\u8a55\u4fa1\u306b\u5f71\u97ff\u3057\u3066\u3044\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001\u898b\u9001\u308a\u3002\n\n\n\n\n\u53c2\u8003\u8cc7\u6599\n\n\nSSL/TLS\u6697\u53f7\u8a2d\u5b9a\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\uff5e\u5b89\u5168\u306a\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306e\u305f\u3081\u306b\uff08\u6697\u53f7\u8a2d\u5b9a\u5bfe\u7b56\u7de8\uff09\uff5e\uff1aIPA \u72ec\u7acb\u884c\u653f\u6cd5\u4eba \u60c5\u5831\u51e6\u7406\u63a8\u9032\u6a5f\u69cb\n\nhttps://www.ipa.go.jp/security/vuln/ssl_crypt_config.html\nApache HTTPD, nginx, IIS\u306a\u3069\u4e3b\u8981\u306aWeb\u30b5\u30fc\u30d0\u306eSSL/TLS\u8a2d\u5b9a\u304c\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308b\u3002\n\u300c\u9ad8\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u578b\u300d\u300c\u63a8\u5968\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u578b\u300d\u300c\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4f8b\u5916\u578b\u300d\u3068\u3057\u3066\u3001\u5178\u578b\u7684\u306a\u8a2d\u5b9a\u30d1\u30bf\u30fc\u30f3\u306b\u5206\u985e\u3057\u3066\u89e3\u8aac\u3057\u3066\u304f\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u5b9f\u7528\u6027\u304c\u9ad8\u3044\u3002\n\n\n\nGenerate Mozilla Security Recommended Web Server Configuration Files\n\nhttps://mozilla.github.io/server-side-tls/ssl-config-generator/\nMozilla \u306b\u3088\u308bSSL\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u3002\n\u4eca\u56de\u306f\u3053\u308c\u3092\u4f7f\u3063\u3066 Apache - Modern, Server Version 2.4.6, OpenSSL Version 1.0.1.e, HSTS Enabled (\u30c1\u30a7\u30c3\u30afON) \u3067\u751f\u6210\u3057\u305f\u8a2d\u5b9a\u3082\u53c2\u8003\u306b\u3057\u3066\u3044\u308b\u3002\n\n\n\nLet's Encrypt\u306eSSL\u8a3c\u660e\u66f8\u3067\u3001Qualys SSLTest\u3067A+\u8a55\u4fa1\u3092\u7372\u5f97\u3059\u308b\u306b\u306f - Qiita\n\nhttp://qiita.com/dseg/items/bab80f6f14349fcd9c22\nnginx\u3092\u4f7f\u3063\u305f\u8a18\u4e8b\u3067\u3059\u304c\u3001\u5927\u5909\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\n\n\nOCSP Stapling\n\n\nOCSP Stapling on Apache 14.04 using Lets Encrypt - DavidEndersby.me\n\nhttps://www.davidendersby.me/2016/03/ocsp-stapling-apache-14-lets-encrypt/\n\n\n\nHow to Configure OCSP Stapling in Apache and nginx - SSLMate Blog\n\nhttps://sslmate.com/blog/post/ocsp_stapling_in_apache_and_nginx\n\n\n\n\nLogjam \u5bfe\u7b56\n\n\nLogjam: PFS Deployment Guide\n\nhttps://weakdh.org/sysadmin.html\n\u3053\u3053\u306b Apache HTTPD \u7528\u306e\u5bfe\u7b56\u30ac\u30a4\u30c9\u304c\u3042\u308b\u306e\u3060\u304c\u3001\u4ee5\u4e0b\u306e2\u30d1\u30bf\u30fc\u30f3\u306e\u307f\u3067\u30012.4.6 \u4ee5\u524d\u306e\u5834\u5408\u3069\u3046\u306a\u3063\u3066\u308b\u306e\u304b\u8a18\u8ff0\u3055\u308c\u3066\u306a\u3044\uff1f\n\n\nApache (2.4.8 and newer) and OpenSSL 1.0.2 or later => SSLOpenSSLConfCmd DHParameters \"{path to dhparams.pem}\"\n\nApache with LibreSSL, or Apache 2.4.7 and OpenSSL 0.9.8a or later => \u8a3c\u660e\u66f8\u306ePEM\u306e\u5f8c\u308d\u306bDHE\u9375\u30d1\u30e9\u30e1\u30fc\u30bf\u306ePEM\u3092\u8ffd\u8a18\n\n\n\n\n\nLogjam Attack \u5bfe\u7b56\u3092\u884c\u3046 : \u30a2\u30b8\u30e3\u30a4\u30eb\u682a\u5f0f\u4f1a\u793e\n\nhttps://www.agilegroup.co.jp/technote/logjam-attack.html\n\n\n\nLogjam: TLS \u8106\u5f31\u6027 (CVE-2015-4000) - Red Hat Customer Portal\n\nhttps://access.redhat.com/ja/node/1475253\n\n\n\nssl - How to fix 'logjam' vulnerability in Apache (httpd) - Server Fault\n\nhttp://serverfault.com/questions/693241/how-to-fix-logjam-vulnerability-in-apache-httpd\n\n\n\n\nHSTS\n\n\nHTTP Strict Transport Security - Web \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 | MDN\n\nhttps://developer.mozilla.org/ja/docs/Web/Security/HTTP_Strict_Transport_Security\n\n\n\nHSTS (HTTP Strict Transport Security) \u306e\u5c0e\u5165 - Qiita\n\nhttp://qiita.com/takoratta/items/fb6b3486257eb7b9f12e\n\n\n\nHTTP Strict Transport Security(HSTS) \u5bfe\u5fdc | blog.jxck.io\n\nhttps://blog.jxck.io/entries/2016-04-11/strict-transport-security.html\n\n\n\n\u5e38\u6642SSL\u3001\u6280\u8853\u8005\u304c\u6ce8\u610f\u3059\u3079\u304d\u8a2d\u5b9a | \u30b7\u30de\u30f3\u30c6\u30c3\u30af\n\nhttps://www.symantec.com/ja/jp/page.jsp?id=always-on-ssl-setting\n\n\n\ncybozu.com \u3092\u771f\u306b\u5e38\u6642 SSL \u306b\u3059\u308b\u8a71 - Cybozu Inside Out | \u30b5\u30a4\u30dc\u30a6\u30ba\u30a8\u30f3\u30b8\u30cb\u30a2\u306e\u30d6\u30ed\u30b0\n\nhttp://blog.cybozu.io/entry/6096\n\n\n\nGoogle \u306e\u900f\u660e\u6027\u30ec\u30dd\u30fc\u30c8\u3068 HSTS\uff08HTTP Strict Transport Security\uff09\uff5cCybertrust.ne.jp\n\nhttps://www.cybertrust.ne.jp/journal/google-hsts.html\n\n\n\n\nhttp -> https \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u8a2d\u5b9a\n\n\n\u3010Apache\u3011HTTP/HTTPS\u5171\u5b58\u3000\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u8a2d\u5b9a\u3000Rewrite\u3010SSL\u8a2d\u5b9a\u3011 - Qiita\n\nhttp://qiita.com/Yuki_BB3/items/f6979fae4a4816823057\n\n\n\nhttp \u304b\u3089 https \u3078\u306e\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3092\u884c\u3046 httpd.conf (mod_rewrite)\n\nhttps://snap.textfile.org/20160204220325/\n\n\n\napache\u3067http\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092https\u3078\u81ea\u52d5\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b - Qiita\n\nhttp://qiita.com/sue71/items/100004b704b9ff129b09\n\n\n\n\nDNS Certification Authority Authorization (CAA)\n\n\nDNS Certification Authority Authorization (CAA) | GMO\u30b0\u30ed\u30fc\u30d0\u30eb\u30b5\u30a4\u30f3\u30d6\u30ed\u30b0\n\nhttps://jp.globalsign.com/blog/2013/caa.html\n\n\n\nCAA Record Generator\n\nhttps://sslmate.com/labs/caa/\n\u3053\u3061\u3089\u306e\u89e3\u8aac\u306b\u3088\u308b\u3068\u3001\u73fe\u5728CAA\u30ec\u30b3\u30fc\u30c9\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308bDNS\u30b5\u30fc\u30d0\u306f BIND , NSD, PowerDNS (>= 4.0.0), Knot DNS (>= 2.2.0), Google Cloud DNS\nRFC3597 \u3092\u4f7f\u3046\u3068Unknown\u306aDNS\u30ec\u30b3\u30fc\u30c9\u30bf\u30a4\u30d7\u3082\u4f7f\u3048\u308b\u3088\u3046\u3060\u304c\u3001\u8abf\u3079\u304d\u308c\u305a\u3001\u4eca\u56de\u306f\u30ae\u30d6\u30a2\u30c3\u30d7\u3002\n\n\n\nssl - Let's Encrypt -- \"DNS ... query timed out looking up CAA for ...\" - Server Fault\n\nhttp://serverfault.com/questions/749427/lets-encrypt-dns-query-timed-out-looking-up-caa-for?rq=1\n\n\n\nDomain with active CAA record in DNS - Issuance Policy - Let's Encrypt Community Support\n\nhttps://community.letsencrypt.org/t/domain-with-active-caa-record-in-dns/8878/5\n\n\n\nWhat is a CAA record? - DNSimple Help\n\nhttps://support.dnsimple.com/articles/caa-record/\n\n\n\n\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u308b DNS \u30ea\u30bd\u30fc\u30b9\u30ec\u30b3\u30fc\u30c9\u30bf\u30a4\u30d7 - Amazon Route\u00a053\n\nhttp://docs.aws.amazon.com/ja_jp/Route53/latest/DeveloperGuide/ResourceRecordTypes.html\n2017-01-15\u6642\u70b9\u3067\u3001 Amazon Rote53 \u3067\u3082CAA\u30ec\u30b3\u30fc\u30c9\u306f\u672a\u30b5\u30dd\u30fc\u30c8\n\n\n\n2017-01-15 \u6642\u70b9\u3067\u3001\u4ee5\u4e0b\u306e\u74b0\u5883\u3067 Qualys SSL Labs \u306e SSL Server Test \u3067 A+ \u8a55\u4fa1\u3092\u53d6\u5f97\u3067\u304d\u307e\u3057\u305f\u306e\u3067\u3001\u8a2d\u5b9a\u4f8b\u3068\u3057\u3066\u516c\u958b\u3057\u307e\u3059\u3002\n\n```\nOS:\n$ cat /etc/centos-release\nCentOS Linux release 7.3.1611 (Core)\n\nApache HTTPD, mod_ssl, OpenSSL\u306fCentOS7\u63d0\u4f9b\u306eRPM\u3092\u5229\u7528:\nhttpd-2.4.6-45.el7.centos.x86_64\nopenssl-1.0.1e-60.el7.x86_64\nopenssl-libs-1.0.1e-60.el7.x86_64\nmod_ssl-2.4.6-45.el7.centos.x86_64\n\n\u8a3c\u660e\u66f8 : Let's Encrypt \u3067\u53d6\u5f97\u3057\u305fRSA 2048bit \u306e\u8a3c\u660e\u66f8\u3092\u4f7f\u7528\n\n\u5bfe\u8c61\u30c9\u30e1\u30a4\u30f3 : www.glamenv-septzen.net\n```\n\n\"SSL Server Test\" \u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5c02\u9580\u4f1a\u793e\u306eQualys\u304c\u7121\u511f\u3067\u63d0\u4f9b\u3057\u3066\u3044\u308b\u3001\u8a3c\u660e\u66f8\u3068SSL/TLS\u306e\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u30bb\u30ad\u30e5\u30a2\u306a\u8a2d\u5b9a\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3001\u4ee3\u8868\u7684\u306a\u65e2\u77e5\u306e\u8106\u5f31\u6027\u304c\u7121\u3044\u304b\u306a\u3069\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304f\u308c\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\u30c1\u30a7\u30c3\u30af\u5bfe\u8c61\u306e\u30c9\u30e1\u30a4\u30f3\u306b\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u304b\u3089\u63a5\u7d9a\u3067\u304d\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u3053\u306erating\u304c\u9ad8\u304f\u306a\u308b\u307b\u3069\u3001\u305d\u306e\u30b5\u30a4\u30c8\u306e\u8a3c\u660e\u66f8\u3068SSL,TLS\u8a2d\u5b9a\u306f\u3088\u308a\u30bb\u30ad\u30e5\u30a2\u306a\u72b6\u614b\u3067\u3042\u308b\u3068\u8003\u3048\u3089\u308c\u307e\u3059\u3002\n\n- [SSL Server Test (Powered by Qualys SSL Labs)](https://www.ssllabs.com/ssltest/index.html)\n  - https://www.ssllabs.com/ssltest/index.html\n\nLet's Encrypt \u3067\u8a3c\u660e\u66f8\u3092\u53d6\u5f97\u3057\u305f\u6d41\u308c\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u53c2\u7167\uff1a\n\n- [CentOS7 + RPM\u7248 Apache HTTPD 2.4.6 \u3067 Let's Encrypt \u5c0e\u5165\u30e1\u30e2 : certbot, 2017\u5e741\u6708\u6642\u70b9 - Qiita](http://qiita.com/msakamoto_sf/items/c699dd0e769733d42087)\n  - http://qiita.com/msakamoto_sf/items/c699dd0e769733d42087\n\n**\u6ce8\u610f\uff1a\u4eca\u5f8c\u306eSSL/TLS\u95a2\u9023\u306e\u767a\u5c55\u3084\u8106\u5f31\u6027\u52d5\u5411\u306b\u3088\u308a\u8a55\u4fa1\u304c\u5909\u5316\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u3042\u304f\u307e\u3067\u3082 2017-01-15 \u6642\u70b9\u3067\u306f\u3053\u3046\u3060\u3063\u305f\u3001\u3068\u3044\u3046\u53c2\u8003\u3068\u3057\u3066\u672c\u8a18\u4e8b\u3092\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044\u3002**\n\n# \u65b9\u91dd\n\nWeb\u3092\u4e2d\u5fc3\u3068\u3057\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u6280\u8853\u60c5\u5831\u304c\u30e1\u30a4\u30f3\u306e\u500b\u4ebablog\u30b5\u30a4\u30c8\u3067\u3059\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u65b9\u91dd\u3068\u3057\u307e\u3057\u305f\u3002\n\n* \u60f3\u5b9a\u8aad\u8005\u5c64\u304b\u3089\u3001\u53e4\u3044\u30d6\u30e9\u30a6\u30b6/\u30b9\u30de\u30db\u7aef\u672b/\u30ac\u30e9\u30b1\u30fc\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3066\u304f\u308b\u4eba\u306f\u6b86\u3069\u5c45\u306a\u3044\u3068\u60f3\u5b9a\u3057\u3001\u30d7\u30ed\u30c8\u30b3\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\u3092TLSv1.2\u306e\u307f\u306b\u7d5e\u308b\u3002\n* IE10\u4ee5\u524d, Android 4.x\u7cfb\u4ee5\u524d, JDK 1.7\u4ee5\u524d \u306a\u3069\u30b5\u30dd\u30fc\u30c8\u5207\u308c\u542b\u3080\u53e4\u3081\u306e\u30d6\u30e9\u30a6\u30b6\u30fb\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u306f\u5bfe\u5fdc\u3057\u306a\u3044\u3002\n* FS(Forward Secrecy)\u306e\u307f\u306b\u7d5e\u308a\u3001\u3055\u3089\u306b Apache HTTPD 2.4.6 \u3060\u3068DHE\u9375\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u3066\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001DHE\u7cfb\u306eCipherSuite\u306f\u4f7f\u308f\u306a\u3044\u3002\n  * => \u9375\u4ea4\u63db\u306fECDHE\u7cfb\u306e\u307f\u306b\u7d5e\u308b\u3002\u60f3\u5b9a\u8aad\u8005\u5c64\u3068\u3057\u3066\u3082ECDHE\u7cfb\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\u30d6\u30e9\u30a6\u30b6/\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u306f\u6b86\u3069\u7121\u3044\u3068\u60f3\u5b9a\u3002\n  * => \u3053\u308c\u3092\u4ee5\u3066 Logjam \u5bfe\u7b56\u3068\u3059\u308b\u3002\n  * \u306a\u304a\u3001RHEL(\u3072\u3044\u3066\u306fCentOS\u5074)\u3067\u72ec\u81ea\u306bDHE\u9375\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306a\u30d1\u30c3\u30c1\u304c\u5f53\u305f\u3063\u3066\u3044\u306a\u3044\u304b\u8abf\u3079\u3066\u307f\u305f\u304c\u30012017-01-15\u6642\u70b9\u3067\u306f\u30d1\u30c3\u30c1\u6709\u7121\u304c\u4e0d\u660e\u306b\u7d42\u308f\u3063\u305f\u3002\n* HTTP Strict Transport Security (HSTS) \u306f\u6709\u52b9\u5316\u3059\u308b\u3002\n  * \u5bfe\u8c61\u30c9\u30e1\u30a4\u30f3\u306e\u4e0b\u306b\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3092\u4f5c\u308b\u4e88\u5b9a\u304c\u7121\u3044\u306e\u3067\u3001\u7279\u306b\u526f\u4f5c\u7528\u306f\u8003\u3048\u305a\u3001 includeSubDomains \u3092\u6307\u5b9a\u3002\n\n\u203b\u4ee5\u4e0b\u306b\u3064\u3044\u3066\u306f\u3001\u3076\u3063\u3061\u3083\u3051\u30012017-01-15\u6642\u70b9\u3067\u3053\u308c\u3089\u7121\u3057\u3067 A+ \u8a55\u4fa1\u53d6\u308c\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u6642\u9593\u306e\u90fd\u5408 + \u5bfe\u5fdc\u3059\u308b\u52d5\u6a5f\u304c\u7121\u304f\u306a\u3063\u305f\u305f\u3081\u3001\u898b\u9001\u3063\u3066\u307e\u3059\u3002\n\n* HSTS Preload\n* Certificate Transparency\n* Public Key Pinning (HPKP)\n* DNS Certification Authority Authorization (CAA)\n  * (DNS CAA\u306e\u53c2\u8003\u8cc7\u6599\u306f\u5f8c\u8ff0)\n  * \u4eca\u56de\u306e\u5bfe\u8c61\u30c9\u30e1\u30a4\u30f3\u306f\u304a\u540d\u524d.com\u306eDNS\u30ec\u30b3\u30fc\u30c9\u8a2d\u5b9a\u6a5f\u80fd\u3067DNS\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u308b\u304c\u30012017-01-15\u6642\u70b9\u3067\u306fCAA\u30ec\u30b3\u30fc\u30c9\u30bf\u30a4\u30d7\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u305f\u3081\u3001\u8ae6\u3081\u305f\u3002\n  * (\u30c9\u30e1\u30a4\u30f3Navi ->\u300c\u30c9\u30e1\u30a4\u30f3\u8a2d\u5b9a\u300d->\u300c\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\u300d->\u300cDNS\u95a2\u9023\u6a5f\u80fd\u306e\u8a2d\u5b9a\u300d->\u300cDNS\u30ec\u30b3\u30fc\u30c9\u8a2d\u5b9a\u300d\u3067\u3001\u767b\u9332\u3067\u304d\u308b\u30ec\u30b3\u30fc\u30c9\u8a2d\u5b9a\u306b\"CAA\"\u304c\u7121\u304b\u3063\u305f\u3002)\n\n# \u8a2d\u5b9a\u4f8b\n\n```/etc/httpd/conf.d/ssl.conf\nListen 443 https\nSSLPassPhraseDialog exec:/usr/libexec/httpd-ssl-pass-dialog\nSSLSessionCache         shmcb:/run/httpd/sslcache(512000)\n# ...\n\n# OCSP Stapling \u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u30ad\u30e3\u30c3\u30b7\u30e5\u30b5\u30a4\u30ba\u6307\u5b9a\n# \u30c7\u30d5\u30a9\u30eb\u30c8\u3067 SSLSessionCache         shmcb:/run/httpd/sslcache(512000)\n# \u3068\u306a\u3063\u3066\u3044\u305f\u306e\u3067\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u305d\u3053\u306b\u63c3\u3048\u305f\u3002\nSSLStaplingCache shmcb:/run/httpd/stapling_cache(128000)\n\n<VirtualHost *:443>\n# ...\n<Directory \"(...)\">\n    # ...\n    Header always set Strict-Transport-Security \"max-age=31536000; includeSubDomains\"\n</Directory>\n\nSSLEngine on\n\n# \u30d7\u30ed\u30c8\u30b3\u30eb\u306e\u660e\u793a\u7684\u306a\u6307\u5b9a\u306b\u3088\u308a\u3001TLSv1.1/TLSv1.0/SSL3/SSL2 \u3092\u7121\u52b9\u5316\n# (Android 4.x \u7cfb, IE10\u4ee5\u524d\u306f\u5207\u308a\u6368\u3066\u308b)\nSSLProtocol TLSv1.2\n\n# CipherSuite\u3092 ECDHE + AES \u7cfb\u306e\u307f\u306b\u7d5e\u308b\u3002\n# (from https://mozilla.github.io/server-side-tls/ssl-config-generator/)\n# -> IPA SSL/TLS\u6697\u53f7\u8a2d\u5b9a\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3, C.2.2. OpenSSL \u7cfb\u3067\u306e\u6697\u53f7\u30b9\u30a4\u30fc\u30c8\u306e\u8a2d\u5b9a\u4f8b \u304b\u3089DHE\u7cfb\u3092\u5916\u3057\u3066\u3044\u308b\u3002\n# Apache HTTPD 2.4.6 \u306e\u305f\u3081DHE\u9375\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3067\u304d\u306a\u304b\u3063\u305f\u3053\u3068\u3082\u3042\u308a\u3001\n# DHE\u7cfb\u3092\u5916\u3059\u3053\u3068\u3067Logjam\u5bfe\u7b56\u3082\u5b8c\u4e86\u3057\u305f\u3053\u3068\u306b\u3059\u308b\u3002\nSSLCipherSuite ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256\n\n# \u6697\u53f7\u30b9\u30a4\u30fc\u30c8\u9806\u5e8f\u306f\u30b5\u30fc\u30d0\u5074\u306e\u9806\u5e8f\u3092\u512a\u5148\u3059\u308b\u8a2d\u5b9a\u3092\u6709\u52b9\u5316\nSSLHonorCipherOrder on\n\n# \u660e\u793a\u7684\u306bSSL\u5727\u7e2e\u3092OFF\n# (from https://mozilla.github.io/server-side-tls/ssl-config-generator/)\nSSLCompression off\n\n# OCSP Stapling \u6709\u52b9\u5316\nSSLUseStapling on\n# (from https://mozilla.github.io/server-side-tls/ssl-config-generator/)\nSSLStaplingResponderTimeout 5\nSSLStaplingReturnResponderErrors off\n\nSSLCertificateKeyFile   /etc/letsencrypt/live/www.glamenv-septzen.net/privkey.pem\nSSLCertificateFile      /etc/letsencrypt/live/www.glamenv-septzen.net/cert.pem\nSSLCertificateChainFile /etc/letsencrypt/live/www.glamenv-septzen.net/chain.pem\n\n# ...\n</VirtualHost>\n\n```\n\nhttps -> https \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u8a2d\u5b9a:\n\n```\n<IfModule mod_rewrite.c>\nRewriteEngine On\n#...\nRewriteCond %{HTTPS} off\nRewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,redirect=301]\n#...\n</IfModule>\n```\n\n# \u30c6\u30b9\u30c8\u7d50\u679c\n\n* \u8a2d\u5b9a\u524d\u306eRating : C\n  * https://www.glamenv-septzen.net/images/20170115_https_rating/www.glamenv-septzen.net-ssllabs-20170115-01before.png\n\n* **\u8a2d\u5b9a\u5f8c\u306eRating : A+**\n  * https://www.glamenv-septzen.net/images/20170115_https_rating/www.glamenv-septzen.net-ssllabs-20170115-02after.png\n     * (\u8a3c\u660e\u66f8\u304c2\u3064\u3042\u308a\u307e\u3059\u304c\u3001 `Certificate #2` \u306b\u3064\u3044\u3066\u306f\u5b9f\u9a13\u7528\u306e\u5225\u306evirtual host\u7528\u306a\u306e\u3067\u30b9\u30eb\u30fc\u3057\u3066\u304f\u3060\u3055\u3044\u3002)\n  * \u6570\u30f6\u6708\u524d\u306b\u5225\u306e\u30b5\u30a4\u30c8\u3067\u30c1\u30a7\u30c3\u30af\u3057\u305f\u3068\u304d\u306f\u6c17\u3065\u304b\u306a\u304b\u3063\u305f\u304c\u3001`Certificate #1` \u3067 `DNS CAA No` \u3068\u8868\u793a\u3055\u308c\u3066\u308b\u3002\u73fe\u6642\u70b9\u3067\u306f A+ \u306e\u8a55\u4fa1\u306b\u5f71\u97ff\u3057\u3066\u3044\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001\u898b\u9001\u308a\u3002\n\n# \u53c2\u8003\u8cc7\u6599\n\n- [SSL/TLS\u6697\u53f7\u8a2d\u5b9a\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3\uff5e\u5b89\u5168\u306a\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306e\u305f\u3081\u306b\uff08\u6697\u53f7\u8a2d\u5b9a\u5bfe\u7b56\u7de8\uff09\uff5e\uff1aIPA \u72ec\u7acb\u884c\u653f\u6cd5\u4eba \u60c5\u5831\u51e6\u7406\u63a8\u9032\u6a5f\u69cb](https://www.ipa.go.jp/security/vuln/ssl_crypt_config.html)\n  - https://www.ipa.go.jp/security/vuln/ssl_crypt_config.html\n  - Apache HTTPD, nginx, IIS\u306a\u3069\u4e3b\u8981\u306aWeb\u30b5\u30fc\u30d0\u306eSSL/TLS\u8a2d\u5b9a\u304c\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308b\u3002\n  - \u300c\u9ad8\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u578b\u300d\u300c\u63a8\u5968\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u578b\u300d\u300c\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4f8b\u5916\u578b\u300d\u3068\u3057\u3066\u3001\u5178\u578b\u7684\u306a\u8a2d\u5b9a\u30d1\u30bf\u30fc\u30f3\u306b\u5206\u985e\u3057\u3066\u89e3\u8aac\u3057\u3066\u304f\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u5b9f\u7528\u6027\u304c\u9ad8\u3044\u3002\n\n- [Generate Mozilla Security Recommended Web Server Configuration Files](https://mozilla.github.io/server-side-tls/ssl-config-generator/)\n  - https://mozilla.github.io/server-side-tls/ssl-config-generator/\n  - Mozilla \u306b\u3088\u308bSSL\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u3002\n  - \u4eca\u56de\u306f\u3053\u308c\u3092\u4f7f\u3063\u3066 `Apache - Modern`, `Server Version 2.4.6`, `OpenSSL Version 1.0.1.e`, `HSTS Enabled (\u30c1\u30a7\u30c3\u30afON)` \u3067\u751f\u6210\u3057\u305f\u8a2d\u5b9a\u3082\u53c2\u8003\u306b\u3057\u3066\u3044\u308b\u3002\n\n- [Let's Encrypt\u306eSSL\u8a3c\u660e\u66f8\u3067\u3001Qualys SSLTest\u3067A+\u8a55\u4fa1\u3092\u7372\u5f97\u3059\u308b\u306b\u306f - Qiita](http://qiita.com/dseg/items/bab80f6f14349fcd9c22)\n  - http://qiita.com/dseg/items/bab80f6f14349fcd9c22\n  - nginx\u3092\u4f7f\u3063\u305f\u8a18\u4e8b\u3067\u3059\u304c\u3001\u5927\u5909\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n## OCSP Stapling\n\n- [OCSP Stapling on Apache 14.04 using Lets Encrypt - DavidEndersby.me](https://www.davidendersby.me/2016/03/ocsp-stapling-apache-14-lets-encrypt/)\n  - https://www.davidendersby.me/2016/03/ocsp-stapling-apache-14-lets-encrypt/\n- [How to Configure OCSP Stapling in Apache and nginx - SSLMate Blog](https://sslmate.com/blog/post/ocsp_stapling_in_apache_and_nginx)\n  - https://sslmate.com/blog/post/ocsp_stapling_in_apache_and_nginx\n\n## Logjam \u5bfe\u7b56\n\n- [Logjam: PFS Deployment Guide](https://weakdh.org/sysadmin.html)\n  - https://weakdh.org/sysadmin.html\n  - \u3053\u3053\u306b Apache HTTPD \u7528\u306e\u5bfe\u7b56\u30ac\u30a4\u30c9\u304c\u3042\u308b\u306e\u3060\u304c\u3001\u4ee5\u4e0b\u306e2\u30d1\u30bf\u30fc\u30f3\u306e\u307f\u3067\u30012.4.6 \u4ee5\u524d\u306e\u5834\u5408\u3069\u3046\u306a\u3063\u3066\u308b\u306e\u304b\u8a18\u8ff0\u3055\u308c\u3066\u306a\u3044\uff1f\n      - Apache (2.4.8 and newer) and OpenSSL 1.0.2 or later => `SSLOpenSSLConfCmd DHParameters \"{path to dhparams.pem}\"`\n      - Apache with LibreSSL, or Apache 2.4.7 and OpenSSL 0.9.8a or later => \u8a3c\u660e\u66f8\u306ePEM\u306e\u5f8c\u308d\u306bDHE\u9375\u30d1\u30e9\u30e1\u30fc\u30bf\u306ePEM\u3092\u8ffd\u8a18\n- [Logjam Attack \u5bfe\u7b56\u3092\u884c\u3046 : \u30a2\u30b8\u30e3\u30a4\u30eb\u682a\u5f0f\u4f1a\u793e](https://www.agilegroup.co.jp/technote/logjam-attack.html)\n  - https://www.agilegroup.co.jp/technote/logjam-attack.html\n- [Logjam: TLS \u8106\u5f31\u6027 (CVE-2015-4000) - Red Hat Customer Portal](https://access.redhat.com/ja/node/1475253)\n  - https://access.redhat.com/ja/node/1475253\n- [ssl - How to fix 'logjam' vulnerability in Apache (httpd) - Server Fault](http://serverfault.com/questions/693241/how-to-fix-logjam-vulnerability-in-apache-httpd)\n  - http://serverfault.com/questions/693241/how-to-fix-logjam-vulnerability-in-apache-httpd\n\n## HSTS\n\n- [HTTP Strict Transport Security - Web \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 | MDN](https://developer.mozilla.org/ja/docs/Web/Security/HTTP_Strict_Transport_Security)\n  - https://developer.mozilla.org/ja/docs/Web/Security/HTTP_Strict_Transport_Security\n- [HSTS (HTTP Strict Transport Security) \u306e\u5c0e\u5165 - Qiita](http://qiita.com/takoratta/items/fb6b3486257eb7b9f12e)\n  - http://qiita.com/takoratta/items/fb6b3486257eb7b9f12e\n- [HTTP Strict Transport Security(HSTS) \u5bfe\u5fdc | blog.jxck.io](https://blog.jxck.io/entries/2016-04-11/strict-transport-security.html)\n  - https://blog.jxck.io/entries/2016-04-11/strict-transport-security.html\n- [\u5e38\u6642SSL\u3001\u6280\u8853\u8005\u304c\u6ce8\u610f\u3059\u3079\u304d\u8a2d\u5b9a | \u30b7\u30de\u30f3\u30c6\u30c3\u30af](https://www.symantec.com/ja/jp/page.jsp?id=always-on-ssl-setting)\n  - https://www.symantec.com/ja/jp/page.jsp?id=always-on-ssl-setting\n- [cybozu.com \u3092\u771f\u306b\u5e38\u6642 SSL \u306b\u3059\u308b\u8a71 - Cybozu Inside Out | \u30b5\u30a4\u30dc\u30a6\u30ba\u30a8\u30f3\u30b8\u30cb\u30a2\u306e\u30d6\u30ed\u30b0](http://blog.cybozu.io/entry/6096)\n  - http://blog.cybozu.io/entry/6096\n- [Google \u306e\u900f\u660e\u6027\u30ec\u30dd\u30fc\u30c8\u3068 HSTS\uff08HTTP Strict Transport Security\uff09\uff5cCybertrust.ne.jp](https://www.cybertrust.ne.jp/journal/google-hsts.html)\n  - https://www.cybertrust.ne.jp/journal/google-hsts.html\n\n## http -> https \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u8a2d\u5b9a\n\n- [\u3010Apache\u3011HTTP/HTTPS\u5171\u5b58\u3000\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u8a2d\u5b9a\u3000Rewrite\u3010SSL\u8a2d\u5b9a\u3011 - Qiita](http://qiita.com/Yuki_BB3/items/f6979fae4a4816823057)\n  - http://qiita.com/Yuki_BB3/items/f6979fae4a4816823057\n- [http \u304b\u3089 https \u3078\u306e\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3092\u884c\u3046 httpd.conf (mod_rewrite)](https://snap.textfile.org/20160204220325/)\n  - https://snap.textfile.org/20160204220325/\n- [apache\u3067http\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092https\u3078\u81ea\u52d5\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b - Qiita](http://qiita.com/sue71/items/100004b704b9ff129b09)\n  - http://qiita.com/sue71/items/100004b704b9ff129b09\n\n## DNS Certification Authority Authorization (CAA)\n\n- [DNS Certification Authority Authorization (CAA) | GMO\u30b0\u30ed\u30fc\u30d0\u30eb\u30b5\u30a4\u30f3\u30d6\u30ed\u30b0](https://jp.globalsign.com/blog/2013/caa.html)\n  - https://jp.globalsign.com/blog/2013/caa.html\n- [CAA Record Generator](https://sslmate.com/labs/caa/)\n  - https://sslmate.com/labs/caa/\n  - \u3053\u3061\u3089\u306e\u89e3\u8aac\u306b\u3088\u308b\u3068\u3001\u73fe\u5728CAA\u30ec\u30b3\u30fc\u30c9\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308bDNS\u30b5\u30fc\u30d0\u306f BIND , NSD, PowerDNS (>= 4.0.0), Knot DNS (>= 2.2.0), Google Cloud DNS\n  - RFC3597 \u3092\u4f7f\u3046\u3068Unknown\u306aDNS\u30ec\u30b3\u30fc\u30c9\u30bf\u30a4\u30d7\u3082\u4f7f\u3048\u308b\u3088\u3046\u3060\u304c\u3001\u8abf\u3079\u304d\u308c\u305a\u3001\u4eca\u56de\u306f\u30ae\u30d6\u30a2\u30c3\u30d7\u3002\n- [ssl - Let's Encrypt -- \"DNS ... query timed out looking up CAA for ...\" - Server Fault](http://serverfault.com/questions/749427/lets-encrypt-dns-query-timed-out-looking-up-caa-for?rq=1)\n  - http://serverfault.com/questions/749427/lets-encrypt-dns-query-timed-out-looking-up-caa-for?rq=1\n- [Domain with active CAA record in DNS - Issuance Policy - Let's Encrypt Community Support](https://community.letsencrypt.org/t/domain-with-active-caa-record-in-dns/8878/5)\n  - https://community.letsencrypt.org/t/domain-with-active-caa-record-in-dns/8878/5\n- [What is a CAA record? - DNSimple Help](https://support.dnsimple.com/articles/caa-record/)\n  - https://support.dnsimple.com/articles/caa-record/\n- [\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u308b DNS \u30ea\u30bd\u30fc\u30b9\u30ec\u30b3\u30fc\u30c9\u30bf\u30a4\u30d7 - Amazon Route\u00a053](http://docs.aws.amazon.com/ja_jp/Route53/latest/DeveloperGuide/ResourceRecordTypes.html)\n  - http://docs.aws.amazon.com/ja_jp/Route53/latest/DeveloperGuide/ResourceRecordTypes.html\n  - 2017-01-15\u6642\u70b9\u3067\u3001 Amazon Rote53 \u3067\u3082CAA\u30ec\u30b3\u30fc\u30c9\u306f\u672a\u30b5\u30dd\u30fc\u30c8\n\n\n", "tags": ["centos7", "Apache", "HTTPS", "letsencrypt", "SSL"]}