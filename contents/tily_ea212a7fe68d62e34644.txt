{"context": "docker-compose \u3067 Kafka \u306e\u52d5\u4f5c\u78ba\u8a8d\u3092\u3057\u3088\u3046\u3068\u3057\u3066\u3001\u3044\u3064\u3082\u30cf\u30de\u308b\u306e\u3067\u57fa\u672c\u7684\u306a\u3084\u308a\u65b9\u3092\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002\n\n\u6e96\u5099\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u3063\u3066 docker-compose.yml \u3092\u66f8\u304d\u8fbc\u3080\u3002\n$ mkdir kafka-test/\n$ cd kafka-test/\n$ vi docker-compose.yml\n\ndocker-compose.yml \u306f\u3053\u3093\u306a\u611f\u3058\u3002(KAFKA_ADVERTISED_HOST_NAME \u3068\u3044\u3046\u74b0\u5883\u5909\u6570\u306e\u6319\u52d5\u304c\u3088\u304f\u5206\u304b\u3063\u3066\u306a\u304f\u3066\u3044\u3064\u3082\u30cf\u30de\u308b\u3002\u3061\u3083\u3093\u3068\u8abf\u3079\u3066\u7406\u89e3\u3057\u306a\u304d\u3083\u306a\u2026\u3002)\nversion: '2'\nservices:\n  zookeeper:\n    image: wurstmeister/zookeeper\n    ports:\n      - \"2181:2181\"\n  kafka:\n    image: wurstmeister/kafka\n    ports:\n      - \"9092\"\n    environment:\n      KAFKA_ADVERTISED_HOST_NAME: 172.17.0.1\n      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n\n\nKafka/Zookeeper \u8d77\u52d5\ndocker-compose up \u3059\u308b\u3002\n$ docker-compose up -d\nCreating network \"kafkatest_default\" with the default driver\nCreating kafkatest_zookeeper_1\nCreating kafkatest_kafka_1\n\nps \u3067\u3061\u3083\u3093\u3068\u7acb\u3061\u4e0a\u304c\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n$ docker-compose ps\n        Name                       Command               State                         Ports                        \n-------------------------------------------------------------------------------------------------------------------\nkafkatest_kafka_1       start-kafka.sh                   Up      0.0.0.0:32778->9092/tcp                            \nkafkatest_zookeeper_1   /bin/sh -c /usr/sbin/sshd  ...   Up      0.0.0.0:2181->2181/tcp, 22/tcp, 2888/tcp, 3888/tcp\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\u3053\u3053\u3067\u306f\u516c\u5f0f\u306e\u30af\u30a4\u30c3\u30af\u30b9\u30bf\u30fc\u30c8\u3092\u53c2\u8003\u306b\u3001\u57fa\u672c\u7684\u306a\u64cd\u4f5c\u3092\u5b9f\u884c\u3057\u3066\u307f\u308b\u3002\n\u30c8\u30d4\u30c3\u30af\u4f5c\u6210\u3002\n$ docker-compose exec kafka /opt/kafka/bin/kafka-topics.sh --create --zookeeper zookeeper:2181 --replication-factor 1 --partitions 1 --topic test\nCreated topic \"test\".\n\n\u30c8\u30d4\u30c3\u30af\u4e00\u89a7\u3002\n$ docker-compose exec kafka /opt/kafka/bin/kafka-topics.sh --list --zookeeper zookeeper:2181\ntest\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u9001\u4fe1\u3002\n$ docker-compose exec kafka /opt/kafka/bin/kafka-console-producer.sh --broker-list kafka:9092 --topic test\ntest\ntest\ntest\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u53d7\u4fe1\u3002\n$ docker-compose exec kafka /opt/kafka/bin/kafka-console-consumer.sh --bootstrap-server kafka:9092 --tic test --from-beginning\ntest\ntest\ntest\n\n\u4ee5\u4e0a\u3067\u3059\u3002\n\n\u53c2\u8003\u8cc7\u6599\n\nApache Kafka\n\ndocker-compose \u3067 Kafka \u306e\u52d5\u4f5c\u78ba\u8a8d\u3092\u3057\u3088\u3046\u3068\u3057\u3066\u3001\u3044\u3064\u3082\u30cf\u30de\u308b\u306e\u3067\u57fa\u672c\u7684\u306a\u3084\u308a\u65b9\u3092\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002\n\n## \u6e96\u5099\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u3063\u3066 docker-compose.yml \u3092\u66f8\u304d\u8fbc\u3080\u3002\n\n```\n$ mkdir kafka-test/\n$ cd kafka-test/\n$ vi docker-compose.yml\n```\n\ndocker-compose.yml \u306f\u3053\u3093\u306a\u611f\u3058\u3002(`KAFKA_ADVERTISED_HOST_NAME` \u3068\u3044\u3046\u74b0\u5883\u5909\u6570\u306e\u6319\u52d5\u304c\u3088\u304f\u5206\u304b\u3063\u3066\u306a\u304f\u3066\u3044\u3064\u3082\u30cf\u30de\u308b\u3002\u3061\u3083\u3093\u3068\u8abf\u3079\u3066\u7406\u89e3\u3057\u306a\u304d\u3083\u306a\u2026\u3002)\n\n```\nversion: '2'\nservices:\n  zookeeper:\n    image: wurstmeister/zookeeper\n    ports:\n      - \"2181:2181\"\n  kafka:\n    image: wurstmeister/kafka\n    ports:\n      - \"9092\"\n    environment:\n      KAFKA_ADVERTISED_HOST_NAME: 172.17.0.1\n      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n```\n\n## Kafka/Zookeeper \u8d77\u52d5\n\ndocker-compose up \u3059\u308b\u3002\n\n```\n$ docker-compose up -d\nCreating network \"kafkatest_default\" with the default driver\nCreating kafkatest_zookeeper_1\nCreating kafkatest_kafka_1\n```\n\nps \u3067\u3061\u3083\u3093\u3068\u7acb\u3061\u4e0a\u304c\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\n```\n$ docker-compose ps\n        Name                       Command               State                         Ports                        \n-------------------------------------------------------------------------------------------------------------------\nkafkatest_kafka_1       start-kafka.sh                   Up      0.0.0.0:32778->9092/tcp                            \nkafkatest_zookeeper_1   /bin/sh -c /usr/sbin/sshd  ...   Up      0.0.0.0:2181->2181/tcp, 22/tcp, 2888/tcp, 3888/tcp\n```\n\n## \u52d5\u4f5c\u78ba\u8a8d\n\n\u3053\u3053\u3067\u306f\u516c\u5f0f\u306e\u30af\u30a4\u30c3\u30af\u30b9\u30bf\u30fc\u30c8\u3092\u53c2\u8003\u306b\u3001\u57fa\u672c\u7684\u306a\u64cd\u4f5c\u3092\u5b9f\u884c\u3057\u3066\u307f\u308b\u3002\n\n\u30c8\u30d4\u30c3\u30af\u4f5c\u6210\u3002\n\n```\n$ docker-compose exec kafka /opt/kafka/bin/kafka-topics.sh --create --zookeeper zookeeper:2181 --replication-factor 1 --partitions 1 --topic test\nCreated topic \"test\".\n```\n\n\u30c8\u30d4\u30c3\u30af\u4e00\u89a7\u3002\n\n```\n$ docker-compose exec kafka /opt/kafka/bin/kafka-topics.sh --list --zookeeper zookeeper:2181\ntest\n```\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u9001\u4fe1\u3002\n\n```\n$ docker-compose exec kafka /opt/kafka/bin/kafka-console-producer.sh --broker-list kafka:9092 --topic test\ntest\ntest\ntest\n```\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u53d7\u4fe1\u3002\n\n```\n$ docker-compose exec kafka /opt/kafka/bin/kafka-console-consumer.sh --bootstrap-server kafka:9092 --tic test --from-beginning\ntest\ntest\ntest\n```\n\n\u4ee5\u4e0a\u3067\u3059\u3002\n\n## \u53c2\u8003\u8cc7\u6599\n\n* [Apache Kafka](https://kafka.apache.org/quickstart)\n", "tags": ["docker", "docker-compose", "Kafka"]}