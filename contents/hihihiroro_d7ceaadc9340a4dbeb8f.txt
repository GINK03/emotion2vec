{"context": " More than 1 year has passed since last update.\u672c\u8a18\u4e8b\u306f\u3001Docker Advent Calendar 2015 \u306e12\u67086\u65e5\u306e\u8a18\u4e8b\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u6982\u8981\nDockerfile \u306bCMD \u3068ENTRYPOINT \u3063\u3066\u3042\u308b\u3051\u3069\u306a\u306b\u304c\u9055\u3046\u306e\u304b\u8abf\u67fb\u3068\u305d\u306e\u30e1\u30e2\n\n\u74b0\u5883\n\nOS : cent7.1\n\ncat /etc/redhat-release\n  # CentOS Linux release 7.1.1503 (Core)\n\n\ndocker : 1.9.0\n\n[root@docker-engine /]# docker version\n  # Client:\n  #  Version:      1.9.0\n  #  API version:  1.21\n  #  Go version:   go1.4.2\n  #  Git commit:   76d6bc9\n  #  Built:        Tue Nov  3 18:00:05 UTC 2015\n  #  OS/Arch:      linux/amd64\n\n  # Server:\n  #  Version:      1.9.0\n  #  API version:  1.21\n  #  Go version:   go1.4.2\n  #  Git commit:   76d6bc9\n  #  Built:        Tue Nov  3 18:00:05 UTC 2015\n  #  OS/Arch:      linux/amd64\n\n\u203b install \u306f\u3053\u3061\u3089\u3092\u53c2\u7167\n\nDockerfile\n\n\u4eca\u56de\u306e\u4e3b\u306aDockerfile \u306f\u3053\u3061\u3089\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u308c\u306bCMD \u3084ENTRYPOINT \u3092\u8ffd\u8a18\u3057\u3066\u8a66\u3057\u307e\u3059\u3002\n\n\nDockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\n\n\nCMD \u3068ENTRYPOINT\n\n\ndocker image \u304b\u3089docker container \u3092\u5b9f\u884c\u3059\u308b\u3068\u304d\u306bCMD \u3084ENTRYPOINT \u306e\u8a18\u8ff0\u5185\u5bb9\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n1\u3064\u306eDockerfile \u306bCMD\u3001ENTRYPOINT \u306f1\u5ea6\u306e\u307f\u3002\n\u203b \u8907\u6570\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u6700\u5f8c\u306e1\u500b\u304c\u5b9f\u884c\u3055\u308c\u308b\u3002\n\n\nagenda\n\nCMD \u306b\u3064\u3044\u3066\n\n\nCMD [\"command\"]\nCMD command\nCMD \u4e0a\u66f8\u304d\n\n\nENTRYPOINT \u306b\u3064\u3044\u3066\n\n\nENTRYPOINT [\"command\"]\nENTRYPOINT command\nENTRYPOINT \u4e0a\u66f8\u304d?\n\n\nCMD \u3068ENTRYPOINT \u306e\u4f75\u7528\u306b\u3064\u3044\u3066\n\n\nCMD\n\nCMD [\"command\"]\n\nDockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nCMD [\"ping\",\"127.0.0.1\",\"-c\",\"100\"]\n\n\nbuild\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 37.89 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Using cache\n  #  ---> 5b349e87daf9\n  # Step 3 : CMD ping 127.0.0.1 -c 100\n  #  ---> Running in 401e07b7dca7\n  #  ---> 0ac2c0ea0e28\n  # Removing intermediate container 401e07b7dca7\n  # Successfully built 0ac2c0ea0e28\n\nrun\n[root@localhost ~]# docker run test\n  # PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\n  # 64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.033 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.040 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.034 ms\n  # ...\n\n\u30d7\u30ed\u30bb\u30b9\u78ba\u8a8d\nroot@0b2a435c091b:/# ps auxf\n  # USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n  # root         6  0.6  0.0  18136  1864 ?        Ss   06:00   0:00 /bin/bash\n  # root        19  0.0  0.0  15560  1104 ?        R+   06:00   0:00  \\_ ps auxf\n  # root         1  0.2  0.0   6500   612 ?        Ss   06:00   0:00 ping 127.0.0.1 -c 100\n\nping \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\u30b7\u30a7\u30eb\u3092\u4ecb\u3055\u305a\u306b\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\nCMD command\n\nDockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nCMD ping 127.0.0.1 -c 100\n\n\nbuild\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 37.89 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Running in 7d6a1adc76ee\n  #  ---> 03615a451ecf\n  # Removing intermediate container 7d6a1adc76ee\n  # Step 3 : CMD ping 127.0.0.1 -c 100\n  #  ---> Running in c304f24111ab\n  #  ---> dea31bd0fe0f\n  # Removing intermediate container c304f24111ab\n  # Successfully built dea31bd0fe0f\n\nrun\n[root@localhost ~]# docker run test\n  # PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\n  # 64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.033 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.040 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.034 ms\n  # ...\n\n\u30d7\u30ed\u30bb\u30b9\u78ba\u8a8d\nroot@b86ea4cdcd54:/# ps auxf\n  # USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n  # root         7  0.4  0.0  18136  1860 ?        Ss   06:04   0:00 /bin/bash\n  # root        20  0.0  0.0  15560  1100 ?        R+   06:04   0:00  \\_ ps auxf\n  # root         1  0.2  0.0   4440   628 ?        Ss   06:04   0:00 /bin/sh -c ping 127.0.0.1 -c 100\n  # root         6  0.0  0.0   6500   624 ?        S    06:04   0:00 ping 127.0.0.1 -c 100\n\nping \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n/bin/sh -c \u306e\u5f15\u6570\u3068\u3057\u3066\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\nCMD \u4e0a\u66f8\u304d\n\nDockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nCMD ping 127.0.0.1 -c 100\n\n\nbuild\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 37.89 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Running in 7d6a1adc76ee\n  #  ---> 03615a451ecf\n  # Removing intermediate container 7d6a1adc76ee\n  # Step 3 : CMD ping 127.0.0.1 -c 100\n  #  ---> Running in c304f24111ab\n  #  ---> dea31bd0fe0f\n  # Removing intermediate container c304f24111ab\n  # Successfully built dea31bd0fe0f\n\nrun\n[root@localhost ~]# docker run test cat /etc/lsb-release\n  # DISTRIB_ID=Ubuntu\n  # DISTRIB_RELEASE=14.04\n  # DISTRIB_CODENAME=trusty\n  # DISTRIB_DESCRIPTION=\"Ubuntu 14.04.3 LTS\"\n\nping \u3067\u306f\u306a\u304f\u3001docker run \u6642\u306b\u3064\u3051\u305f\u5f15\u6570\u306ecat /etc/lsb-release \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\nCMD \u306f\u3053\u306e\u3088\u3046\u306b\u3001docker run \u6642\u306b\u30b3\u30de\u30f3\u30c9\u306e\u4e0a\u66f8\u304d\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\nENTRYPOINT\n\nENTRYPOINT [\"command\"]\n\nDockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nENTRYPOINT [\"ping\",\"127.0.0.1\",\"-c\",\"100\"]\n\n\nbuild\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 37.89 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Running in 4bd4f60f6a50\n  #  ---> 2ffc6e2fdd8a\n  # Removing intermediate container 4bd4f60f6a50\n  # Step 3 : ENTRYPOINT ping 127.0.0.1 -c 100\n  #  ---> Running in 173206d72cb6\n  #  ---> e5b47e6740cd\n  # Removing intermediate container 173206d72cb6\n  # Successfully built e5b47e6740cd\n\nrun\n[root@localhost ~]# docker run test\n  # PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\n  # 64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.025 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.034 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.029 ms\n  # ...\n\n\u30d7\u30ed\u30bb\u30b9\u78ba\u8a8d\nroot@124425f5edd0:/# ps auxf\n  # USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n  # root         6  0.4  0.0  18136  1864 ?        Ss   06:33   0:00 /bin/bash\n  # root        19  0.0  0.0  15560  1104 ?        R+   06:33   0:00  \\_ ps auxf\n  # root         1  0.1  0.0   6500   604 ?        Ss   06:33   0:00 ping 127.0.0.1 -c 100\n\nping \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\u30b7\u30a7\u30eb\u3092\u4ecb\u3055\u305a\u306b\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\nENTRYPOINT command\n\nDockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nENTRYPOINT ping 127.0.0.1 -c 100\n\n\nbuild\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 37.89 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Running in 8679d9b8120c\n  #  ---> bdc1d6d8e004\n  # Removing intermediate container 8679d9b8120c\n  # Step 3 : ENTRYPOINT ping 127.0.0.1 -c 100\n  #  ---> Running in ec29024e6074\n  #  ---> 3963c62c7464\n  # Removing intermediate container ec29024e6074\n  # Successfully built 3963c62c7464\n\nrun\n[root@localhost ~]# docker run test\n  # PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\n  # 64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.030 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.031 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.028 ms\n  # ...\n\n\u30d7\u30ed\u30bb\u30b9\u78ba\u8a8d\nroot@7d8390b4e1f4:/# ps auxf\n  # USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n  # root         7  1.0  0.0  18136  1856 ?        Ss   06:37   0:00 /bin/bash\n  # root        20  0.0  0.0  15560  1104 ?        R+   06:37   0:00  \\_ ps auxf\n  # root         1  0.2  0.0   4440   632 ?        Ss   06:37   0:00 /bin/sh -c ping 127.0.0.1 -c 100\n  # root         6  0.0  0.0   6500   632 ?        S    06:37   0:00 ping 127.0.0.1 -c 100\n\nping \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n/bin/sh -c \u306e\u5f15\u6570\u3068\u3057\u3066\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\nENTRYPOINT \u4e0a\u66f8\u304d\uff1f\n\nDockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nENTRYPOINT ping 127.0.0.1 -c 100\n\n\nbuild\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 37.89 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Running in 2f72cd03c162\n  #  ---> dd99c6e04b1a\n  # Removing intermediate container 2f72cd03c162\n  # Step 3 : ENTRYPOINT ping 127.0.0.1 -c 100\n  #  ---> Running in 449d1f1b2280\n  #  ---> 61277c329249\n  # Removing intermediate container 449d1f1b2280\n  # Successfully built 61277c329249\n\nrun\n[root@localhost ~]# docker run test cat /etc/lsb-release\n  # PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\n  # 64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.028 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.053 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.032 ms\n  #  ...\n\nCMD \u3068\u306f\u9055\u3044\u3001docker run \u6642\u306b\u3064\u3051\u305f\u5f15\u6570\u306ecat /etc/lsb-release \u3067\u306f\u306a\u304f\u3001ENTRYPOINT \u3067\u6307\u5b9a\u3055\u308c\u3066\u3044\u308bping \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\nENTRYPOINT \u306fCMD \u3068\u9055\u3044\u3001docker run \u6642\u306b\u30b3\u30de\u30f3\u30c9\u306e\u4e0a\u66f8\u304d\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n\u203b docker run --entrypoint=\"\" \u3067\u4e0a\u66f8\u304d\u306f\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\nCMD \u3068ENTRYPOINT \u306e\u4f75\u7528\u306b\u3064\u3044\u3066\n\n\u5f15\u6570\u306a\u3057\n\nDockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nENTRYPOINT [\"ping\"]\nCMD [\"127.0.0.1\", \"-c\", \"50\"]\n\n\nbuild\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 39.42 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Running in 33a067cc7f3e\n  #  ---> 57ff677a0cca\n  # Removing intermediate container 33a067cc7f3e\n  # Step 3 : ENTRYPOINT ping\n  #  ---> Running in 2957c1b4f09e\n  #  ---> 3c30112fe595\n  # Removing intermediate container 2957c1b4f09e\n  # Step 4 : CMD 127.0.0.1 -c 50\n  #  ---> Running in 09f1cff264bd\n  #  ---> c7160151ed57\n  # Removing intermediate container 09f1cff264bd\n  # Successfully built c7160151ed57\n\nrun\n[root@localhost ~]# docker run test\n  # PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\n  # 64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.024 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.033 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.031 ms\n  # ...\n\n\u30d7\u30ed\u30bb\u30b9\u78ba\u8a8d\nroot@23a769d5c382:/# ps auxf\n  # USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n  # root         6  1.0  0.0  18136  1860 ?        Ss   07:16   0:00 /bin/bash\n  # root        19  0.0  0.0  15560  1100 ?        R+   07:16   0:00  \\_ ps auxf\n  # root         1  0.2  0.0   6500   632 ?        Ss   07:16   0:00 ping 127.0.0.1 -c 50\n\nENTRYPOINT \u3067\u6307\u5b9a\u3057\u305fping \u306bCMD \u3067\u6307\u5b9a\u3057\u305f127.0.0.1 -c 50 \u304c\u5f15\u6570\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u5f15\u6570\u3042\u308a\n\nDockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nENTRYPOINT [\"ping\"]\nCMD [\"127.0.0.1\", \"-c\", \"50\"]\n\n\nbuild\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 39.42 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Running in 33a067cc7f3e\n  #  ---> 57ff677a0cca\n  # Removing intermediate container 33a067cc7f3e\n  # Step 3 : ENTRYPOINT ping\n  #  ---> Running in 2957c1b4f09e\n  #  ---> 3c30112fe595\n  # Removing intermediate container 2957c1b4f09e\n  # Step 4 : CMD 127.0.0.1 -c 50\n  #  ---> Running in 09f1cff264bd\n  #  ---> c7160151ed57\n  # Removing intermediate container 09f1cff264bd\n  # Successfully built c7160151ed57\n\nrun\n[root@localhost ~]# docker run test localhost\n  # PING localhost (127.0.0.1) 56(84) bytes of data.\n  # 64 bytes from localhost (127.0.0.1): icmp_seq=1 ttl=64 time=0.027 ms\n  # 64 bytes from localhost (127.0.0.1): icmp_seq=2 ttl=64 time=0.037 ms\n  # 64 bytes from localhost (127.0.0.1): icmp_seq=3 ttl=64 time=0.029 ms\n  # ...\n\n\u30d7\u30ed\u30bb\u30b9\u78ba\u8a8d\nroot@947cf9dfb3c1:/# ps auxf\n  # USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n  # root         6  1.3  0.0  18136  1864 ?        Ss   07:26   0:00 /bin/bash\n  # root        19  0.0  0.0  15560  1104 ?        R+   07:26   0:00  \\_ ps auxf\n  # root         1  0.3  0.0   8596   832 ?        Ss   07:26   0:00 ping localhost\n\nENTRYPOINT \u3067\u6307\u5b9a\u3057\u305fping \u306b\u5f15\u6570\u306elocalhost \u304cCMD \u3067\u6307\u5b9a\u3057\u305f127.0.0.1 -c 50  \u3092\u4e0a\u66f8\u304d\u3057\u3066\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u307e\u3068\u3081\n\n\u5171\u901a\u70b9\n\n\ndocker run \u6642\u306b\u5b9f\u884c\u3055\u308c\u308b\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\n\ndocker run \u6642\u306b\u5f15\u6570\u3092\u6e21\u3059\u3068\u30b3\u30de\u30f3\u30c9\u3092\u4e0a\u66f8\u304d\u3067\u304d\u307e\u3059\u3002\n\u203bENTRYPOINT \u306f--entrypoint \u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n\n\u5dee\u5206\n\n\nCMD \u306fdocker run \u6642\u306e\u5f15\u6570\u3067CMD command\u3001CMD [\"command\"] \u306ecommand \u5206\u3092\u307e\u308b\u3063\u3068\u4e0a\u66f8\u304d\u3057\u3066\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\nENTRYPOINT \u306fdocker run \u6642\u306e\u5f15\u6570\u304cENTRYPOINT [\"command\"] \u306ecommand \u306e\u5f15\u6570\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\n\n\u4f75\u7528\n\n\nENTRYPOINT \u3068CMD \u306e\u4e21\u65b9\u304c\u66f8\u3044\u3066\u3042\u308b\u5834\u5408\u306b\u306f\u3001CMD \u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u5185\u5bb9\u304c\u3001ENTRYPOINT \u306b\u66f8\u3044\u3066\u3042\u308bcommand \u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\ndocker run \u6642\u306b\u5f15\u6570\u3092\u3064\u3051\u305f\u5834\u5408\u3001CMD \u306e\u5185\u5bb9\u304c\u4e0a\u66f8\u304d\u3055\u308cENTRYPOINT \u306b\u66f8\u3044\u3066\u3042\u308bcommand \u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\n\n\u6b8b\u4f5c\u696d\n\nDockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nENTRYPOINT ping -c 50\n\n\nbuild\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 39.42 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Running in 403dff6b0a29\n  #  ---> a3be8411fe60\n  # Removing intermediate container 403dff6b0a29\n  # Step 3 : ENTRYPOINT ping -c 50\n  #  ---> Running in 98beb40ba98d\n  #  ---> f7d65704e8bc\n  # Removing intermediate container 98beb40ba98d\n  # Successfully built f7d65704e8bc\n\nrun\n[root@localhost ~]# docker run test 127.0.0.1\n  # Usage: ping [-aAbBdDfhLnOqrRUvV] [-c count] [-i interval] [-I interface]\n  #             [-m mark] [-M pmtudisc_option] [-l preload] [-p pattern] [-Q tos]\n  #             [-s packetsize] [-S sndbuf] [-t ttl] [-T timestamp_option]\n  #             [-w deadline] [-W timeout] [hop1 ...] destination\n\n\n\nENTRYPOINT [\"command\"] \u306e\u969b\u306b\u306fdocker run \u6642\u306e\u5f15\u6570\u3092command \u306e\u5f15\u6570\u306b\u4ed8\u3051\u3066\u5b9f\u884c\u3057\u3066\u304f\u308c\u308b\u304c\u3001ENTRYPOINT command \u306e\u969b\u306b\u306f\u5f15\u6570\u3092\u4ed8\u3051\u3066\u304f\u308c\u306a\u3044\u3002\n\n\n\u53c2\u8003\nDocker\nDocker run reference\nDockerfile reference\n\u672c\u8a18\u4e8b\u306f\u3001[Docker Advent Calendar 2015](http://qiita.com/advent-calendar/2015/docker) \u306e12\u67086\u65e5\u306e\u8a18\u4e8b\u306b\u306a\u308a\u307e\u3059\u3002\n\n# \u6982\u8981\nDockerfile \u306b`CMD` \u3068`ENTRYPOINT` \u3063\u3066\u3042\u308b\u3051\u3069\u306a\u306b\u304c\u9055\u3046\u306e\u304b\u8abf\u67fb\u3068\u305d\u306e\u30e1\u30e2\n\n# \u74b0\u5883\n* OS : cent7.1\n\n```bash\ncat /etc/redhat-release\n  # CentOS Linux release 7.1.1503 (Core)\n```\n* docker : 1.9.0\n\n```bash\n[root@docker-engine /]# docker version\n  # Client:\n  #  Version:      1.9.0\n  #  API version:  1.21\n  #  Go version:   go1.4.2\n  #  Git commit:   76d6bc9\n  #  Built:        Tue Nov  3 18:00:05 UTC 2015\n  #  OS/Arch:      linux/amd64\n\n  # Server:\n  #  Version:      1.9.0\n  #  API version:  1.21\n  #  Go version:   go1.4.2\n  #  Git commit:   76d6bc9\n  #  Built:        Tue Nov  3 18:00:05 UTC 2015\n  #  OS/Arch:      linux/amd64\n```\n\u203b install \u306f[\u3053\u3061\u3089](https://docs.docker.com/installation/centos/)\u3092\u53c2\u7167\n\n# Dockerfile\n* \u4eca\u56de\u306e\u4e3b\u306aDockerfile \u306f\u3053\u3061\u3089\u306b\u306a\u308a\u307e\u3059\u3002\n  \u3053\u308c\u306b`CMD` \u3084`ENTRYPOINT` \u3092\u8ffd\u8a18\u3057\u3066\u8a66\u3057\u307e\u3059\u3002\n\n``` bash:Dockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n```\n\n# `CMD` \u3068`ENTRYPOINT`\n* docker image \u304b\u3089docker container \u3092\u5b9f\u884c\u3059\u308b\u3068\u304d\u306b`CMD` \u3084`ENTRYPOINT` \u306e\u8a18\u8ff0\u5185\u5bb9\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n* 1\u3064\u306eDockerfile \u306b`CMD`\u3001`ENTRYPOINT` \u306f1\u5ea6\u306e\u307f\u3002<br>\n  \u203b \u8907\u6570\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001\u6700\u5f8c\u306e1\u500b\u304c\u5b9f\u884c\u3055\u308c\u308b\u3002\n\n# agenda\n* CMD \u306b\u3064\u3044\u3066\n * CMD [\"command\"]\n * CMD command\n * CMD \u4e0a\u66f8\u304d\n* ENTRYPOINT \u306b\u3064\u3044\u3066\n * ENTRYPOINT [\"command\"]\n * ENTRYPOINT command\n * ENTRYPOINT \u4e0a\u66f8\u304d?\n* CMD \u3068ENTRYPOINT \u306e\u4f75\u7528\u306b\u3064\u3044\u3066\n\n# CMD\n## CMD [\"command\"]\n``` bash:Dockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nCMD [\"ping\",\"127.0.0.1\",\"-c\",\"100\"]\n```\n\nbuild\n\n```bash\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 37.89 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Using cache\n  #  ---> 5b349e87daf9\n  # Step 3 : CMD ping 127.0.0.1 -c 100\n  #  ---> Running in 401e07b7dca7\n  #  ---> 0ac2c0ea0e28\n  # Removing intermediate container 401e07b7dca7\n  # Successfully built 0ac2c0ea0e28\n```\n\nrun\n\n```\n[root@localhost ~]# docker run test\n  # PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\n  # 64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.033 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.040 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.034 ms\n  # ...\n```\n\n\u30d7\u30ed\u30bb\u30b9\u78ba\u8a8d\n\n```\nroot@0b2a435c091b:/# ps auxf\n  # USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n  # root         6  0.6  0.0  18136  1864 ?        Ss   06:00   0:00 /bin/bash\n  # root        19  0.0  0.0  15560  1104 ?        R+   06:00   0:00  \\_ ps auxf\n  # root         1  0.2  0.0   6500   612 ?        Ss   06:00   0:00 ping 127.0.0.1 -c 100\n```\n`ping` \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\u30b7\u30a7\u30eb\u3092\u4ecb\u3055\u305a\u306b\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\n## CMD command\n``` bash:Dockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nCMD ping 127.0.0.1 -c 100\n```\n\nbuild\n\n```bash\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 37.89 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Running in 7d6a1adc76ee\n  #  ---> 03615a451ecf\n  # Removing intermediate container 7d6a1adc76ee\n  # Step 3 : CMD ping 127.0.0.1 -c 100\n  #  ---> Running in c304f24111ab\n  #  ---> dea31bd0fe0f\n  # Removing intermediate container c304f24111ab\n  # Successfully built dea31bd0fe0f\n```\n\nrun\n\n```\n[root@localhost ~]# docker run test\n  # PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\n  # 64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.033 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.040 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.034 ms\n  # ...\n```\n\n\u30d7\u30ed\u30bb\u30b9\u78ba\u8a8d\n\n```\nroot@b86ea4cdcd54:/# ps auxf\n  # USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n  # root         7  0.4  0.0  18136  1860 ?        Ss   06:04   0:00 /bin/bash\n  # root        20  0.0  0.0  15560  1100 ?        R+   06:04   0:00  \\_ ps auxf\n  # root         1  0.2  0.0   4440   628 ?        Ss   06:04   0:00 /bin/sh -c ping 127.0.0.1 -c 100\n  # root         6  0.0  0.0   6500   624 ?        S    06:04   0:00 ping 127.0.0.1 -c 100\n```\n`ping` \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n`/bin/sh -c` \u306e\u5f15\u6570\u3068\u3057\u3066\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\n## CMD \u4e0a\u66f8\u304d\n``` bash:Dockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nCMD ping 127.0.0.1 -c 100\n```\n\nbuild\n\n```bash\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 37.89 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Running in 7d6a1adc76ee\n  #  ---> 03615a451ecf\n  # Removing intermediate container 7d6a1adc76ee\n  # Step 3 : CMD ping 127.0.0.1 -c 100\n  #  ---> Running in c304f24111ab\n  #  ---> dea31bd0fe0f\n  # Removing intermediate container c304f24111ab\n  # Successfully built dea31bd0fe0f\n```\n\nrun\n\n```\n[root@localhost ~]# docker run test cat /etc/lsb-release\n  # DISTRIB_ID=Ubuntu\n  # DISTRIB_RELEASE=14.04\n  # DISTRIB_CODENAME=trusty\n  # DISTRIB_DESCRIPTION=\"Ubuntu 14.04.3 LTS\"\n```\n\n`ping` \u3067\u306f\u306a\u304f\u3001`docker run` \u6642\u306b\u3064\u3051\u305f\u5f15\u6570\u306e`cat /etc/lsb-release` \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n`CMD` \u306f\u3053\u306e\u3088\u3046\u306b\u3001`docker run` \u6642\u306b\u30b3\u30de\u30f3\u30c9\u306e\u4e0a\u66f8\u304d\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\n# ENTRYPOINT\n## ENTRYPOINT [\"command\"]\n``` bash:Dockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nENTRYPOINT [\"ping\",\"127.0.0.1\",\"-c\",\"100\"]\n```\n\nbuild\n\n```bash\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 37.89 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Running in 4bd4f60f6a50\n  #  ---> 2ffc6e2fdd8a\n  # Removing intermediate container 4bd4f60f6a50\n  # Step 3 : ENTRYPOINT ping 127.0.0.1 -c 100\n  #  ---> Running in 173206d72cb6\n  #  ---> e5b47e6740cd\n  # Removing intermediate container 173206d72cb6\n  # Successfully built e5b47e6740cd\n```\n\nrun\n\n```\n[root@localhost ~]# docker run test\n  # PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\n  # 64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.025 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.034 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.029 ms\n  # ...\n```\n\n\u30d7\u30ed\u30bb\u30b9\u78ba\u8a8d\n\n```\nroot@124425f5edd0:/# ps auxf\n  # USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n  # root         6  0.4  0.0  18136  1864 ?        Ss   06:33   0:00 /bin/bash\n  # root        19  0.0  0.0  15560  1104 ?        R+   06:33   0:00  \\_ ps auxf\n  # root         1  0.1  0.0   6500   604 ?        Ss   06:33   0:00 ping 127.0.0.1 -c 100\n```\n`ping` \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\u30b7\u30a7\u30eb\u3092\u4ecb\u3055\u305a\u306b\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\n## ENTRYPOINT command\n``` bash:Dockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nENTRYPOINT ping 127.0.0.1 -c 100\n```\n\nbuild\n\n```bash\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 37.89 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Running in 8679d9b8120c\n  #  ---> bdc1d6d8e004\n  # Removing intermediate container 8679d9b8120c\n  # Step 3 : ENTRYPOINT ping 127.0.0.1 -c 100\n  #  ---> Running in ec29024e6074\n  #  ---> 3963c62c7464\n  # Removing intermediate container ec29024e6074\n  # Successfully built 3963c62c7464\n```\n\nrun\n\n```\n[root@localhost ~]# docker run test\n  # PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\n  # 64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.030 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.031 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.028 ms\n  # ...\n```\n\n\u30d7\u30ed\u30bb\u30b9\u78ba\u8a8d\n\n```\nroot@7d8390b4e1f4:/# ps auxf\n  # USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n  # root         7  1.0  0.0  18136  1856 ?        Ss   06:37   0:00 /bin/bash\n  # root        20  0.0  0.0  15560  1104 ?        R+   06:37   0:00  \\_ ps auxf\n  # root         1  0.2  0.0   4440   632 ?        Ss   06:37   0:00 /bin/sh -c ping 127.0.0.1 -c 100\n  # root         6  0.0  0.0   6500   632 ?        S    06:37   0:00 ping 127.0.0.1 -c 100\n```\n`ping` \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n`/bin/sh -c` \u306e\u5f15\u6570\u3068\u3057\u3066\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\n## ENTRYPOINT \u4e0a\u66f8\u304d\uff1f\n``` bash:Dockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nENTRYPOINT ping 127.0.0.1 -c 100\n```\n\nbuild\n\n```bash\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 37.89 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Running in 2f72cd03c162\n  #  ---> dd99c6e04b1a\n  # Removing intermediate container 2f72cd03c162\n  # Step 3 : ENTRYPOINT ping 127.0.0.1 -c 100\n  #  ---> Running in 449d1f1b2280\n  #  ---> 61277c329249\n  # Removing intermediate container 449d1f1b2280\n  # Successfully built 61277c329249\n```\n\nrun\n\n```\n[root@localhost ~]# docker run test cat /etc/lsb-release\n  # PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\n  # 64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.028 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.053 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.032 ms\n  #  ...\n```\n\n`CMD` \u3068\u306f\u9055\u3044\u3001`docker run` \u6642\u306b\u3064\u3051\u305f\u5f15\u6570\u306e`cat /etc/lsb-release` \u3067\u306f\u306a\u304f\u3001`ENTRYPOINT` \u3067\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b`ping` \u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n`ENTRYPOINT` \u306f`CMD` \u3068\u9055\u3044\u3001`docker run` \u6642\u306b\u30b3\u30de\u30f3\u30c9\u306e\u4e0a\u66f8\u304d\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n\u203b `docker run --entrypoint=\"\"` \u3067\u4e0a\u66f8\u304d\u306f\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n# CMD \u3068ENTRYPOINT \u306e\u4f75\u7528\u306b\u3064\u3044\u3066\n## \u5f15\u6570\u306a\u3057\n``` bash:Dockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nENTRYPOINT [\"ping\"]\nCMD [\"127.0.0.1\", \"-c\", \"50\"]\n```\n\nbuild\n\n```bash\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 39.42 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Running in 33a067cc7f3e\n  #  ---> 57ff677a0cca\n  # Removing intermediate container 33a067cc7f3e\n  # Step 3 : ENTRYPOINT ping\n  #  ---> Running in 2957c1b4f09e\n  #  ---> 3c30112fe595\n  # Removing intermediate container 2957c1b4f09e\n  # Step 4 : CMD 127.0.0.1 -c 50\n  #  ---> Running in 09f1cff264bd\n  #  ---> c7160151ed57\n  # Removing intermediate container 09f1cff264bd\n  # Successfully built c7160151ed57\n```\n\nrun\n\n```bash\n[root@localhost ~]# docker run test\n  # PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\n  # 64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.024 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.033 ms\n  # 64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.031 ms\n  # ...\n```\n\n\u30d7\u30ed\u30bb\u30b9\u78ba\u8a8d\n\n```bash\nroot@23a769d5c382:/# ps auxf\n  # USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n  # root         6  1.0  0.0  18136  1860 ?        Ss   07:16   0:00 /bin/bash\n  # root        19  0.0  0.0  15560  1100 ?        R+   07:16   0:00  \\_ ps auxf\n  # root         1  0.2  0.0   6500   632 ?        Ss   07:16   0:00 ping 127.0.0.1 -c 50\n```\n\n`ENTRYPOINT` \u3067\u6307\u5b9a\u3057\u305f`ping` \u306b`CMD` \u3067\u6307\u5b9a\u3057\u305f`127.0.0.1 -c 50` \u304c\u5f15\u6570\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n## \u5f15\u6570\u3042\u308a\n``` bash:Dockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nENTRYPOINT [\"ping\"]\nCMD [\"127.0.0.1\", \"-c\", \"50\"]\n```\n\nbuild\n\n```bash\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 39.42 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Running in 33a067cc7f3e\n  #  ---> 57ff677a0cca\n  # Removing intermediate container 33a067cc7f3e\n  # Step 3 : ENTRYPOINT ping\n  #  ---> Running in 2957c1b4f09e\n  #  ---> 3c30112fe595\n  # Removing intermediate container 2957c1b4f09e\n  # Step 4 : CMD 127.0.0.1 -c 50\n  #  ---> Running in 09f1cff264bd\n  #  ---> c7160151ed57\n  # Removing intermediate container 09f1cff264bd\n  # Successfully built c7160151ed57\n```\n\nrun\n\n```bash\n[root@localhost ~]# docker run test localhost\n  # PING localhost (127.0.0.1) 56(84) bytes of data.\n  # 64 bytes from localhost (127.0.0.1): icmp_seq=1 ttl=64 time=0.027 ms\n  # 64 bytes from localhost (127.0.0.1): icmp_seq=2 ttl=64 time=0.037 ms\n  # 64 bytes from localhost (127.0.0.1): icmp_seq=3 ttl=64 time=0.029 ms\n  # ...\n```\n\n\u30d7\u30ed\u30bb\u30b9\u78ba\u8a8d\n\n```bash\nroot@947cf9dfb3c1:/# ps auxf\n  # USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n  # root         6  1.3  0.0  18136  1864 ?        Ss   07:26   0:00 /bin/bash\n  # root        19  0.0  0.0  15560  1104 ?        R+   07:26   0:00  \\_ ps auxf\n  # root         1  0.3  0.0   8596   832 ?        Ss   07:26   0:00 ping localhost\n```\n\n`ENTRYPOINT` \u3067\u6307\u5b9a\u3057\u305f`ping` \u306b\u5f15\u6570\u306e`localhost` \u304c`CMD` \u3067\u6307\u5b9a\u3057\u305f`127.0.0.1 -c 50`  \u3092\u4e0a\u66f8\u304d\u3057\u3066\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002\n\n# \u307e\u3068\u3081\n## \u5171\u901a\u70b9\n* `docker run` \u6642\u306b\u5b9f\u884c\u3055\u308c\u308b\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\n* `docker run` \u6642\u306b\u5f15\u6570\u3092\u6e21\u3059\u3068\u30b3\u30de\u30f3\u30c9\u3092\u4e0a\u66f8\u304d\u3067\u304d\u307e\u3059\u3002\n  \u203b`ENTRYPOINT` \u306f`--entrypoint` \u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n## \u5dee\u5206\n* `CMD` \u306f`docker run` \u6642\u306e\u5f15\u6570\u3067`CMD command`\u3001`CMD [\"command\"]` \u306e`command` \u5206\u3092\u307e\u308b\u3063\u3068\u4e0a\u66f8\u304d\u3057\u3066\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n* `ENTRYPOINT` \u306f`docker run` \u6642\u306e\u5f15\u6570\u304c`ENTRYPOINT [\"command\"]` \u306e`command` \u306e\u5f15\u6570\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\n## \u4f75\u7528\n* `ENTRYPOINT` \u3068`CMD` \u306e\u4e21\u65b9\u304c\u66f8\u3044\u3066\u3042\u308b\u5834\u5408\u306b\u306f\u3001`CMD` \u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u5185\u5bb9\u304c\u3001`ENTRYPOINT` \u306b\u66f8\u3044\u3066\u3042\u308b`command` \u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n* `docker run` \u6642\u306b\u5f15\u6570\u3092\u3064\u3051\u305f\u5834\u5408\u3001`CMD` \u306e\u5185\u5bb9\u304c\u4e0a\u66f8\u304d\u3055\u308c`ENTRYPOINT` \u306b\u66f8\u3044\u3066\u3042\u308b`command` \u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\n# \u6b8b\u4f5c\u696d\n``` bash:Dockerfile\nFROM ubuntu\n\nMAINTAINER hihihiroro\n\nENTRYPOINT ping -c 50\n```\n\nbuild\n\n```\n[root@localhost ~]# docker build -t test .\n  # Sending build context to Docker daemon 39.42 kB\n  # Step 1 : FROM ubuntu\n  #  ---> e9ae3c220b23\n  # Step 2 : MAINTAINER hihihiroro\n  #  ---> Running in 403dff6b0a29\n  #  ---> a3be8411fe60\n  # Removing intermediate container 403dff6b0a29\n  # Step 3 : ENTRYPOINT ping -c 50\n  #  ---> Running in 98beb40ba98d\n  #  ---> f7d65704e8bc\n  # Removing intermediate container 98beb40ba98d\n  # Successfully built f7d65704e8bc\n```\n\nrun\n\n```\n[root@localhost ~]# docker run test 127.0.0.1\n  # Usage: ping [-aAbBdDfhLnOqrRUvV] [-c count] [-i interval] [-I interface]\n  #             [-m mark] [-M pmtudisc_option] [-l preload] [-p pattern] [-Q tos]\n  #             [-s packetsize] [-S sndbuf] [-t ttl] [-T timestamp_option]\n  #             [-w deadline] [-W timeout] [hop1 ...] destination\n```\n\n* `ENTRYPOINT [\"command\"]` \u306e\u969b\u306b\u306f`docker run` \u6642\u306e\u5f15\u6570\u3092`command` \u306e\u5f15\u6570\u306b\u4ed8\u3051\u3066\u5b9f\u884c\u3057\u3066\u304f\u308c\u308b\u304c\u3001`ENTRYPOINT command` \u306e\u969b\u306b\u306f\u5f15\u6570\u3092\u4ed8\u3051\u3066\u304f\u308c\u306a\u3044\u3002\n\n# \u53c2\u8003\n[Docker](http://docs.docker.com/)\n[Docker run reference](https://docs.docker.com/engine/reference/run/)\n[Dockerfile reference](http://docs.docker.com/engine/reference/builder/)\n", "tags": ["docker", "dockerfile"]}