{"context": " More than 1 year has passed since last update.\u30b7\u30f3\u30d7\u30eb\u306a\u30c9\u30e9\u30c3\u30b0\u30c9\u30ed\u30c3\u30d7\u3092\u52c9\u5f37\u304c\u3066\u3089\n\n\n\u30c9\u30e9\u30c3\u30b0\u306eScript\nusing UnityEngine;\nusing UnityEngine.UI;\nusing UnityEngine.EventSystems;\n\n[RequireComponent(typeof(Image))]\npublic class DragObject : MonoBehaviour, IBeginDragHandler, IDragHandler, IEndDragHandler\n{\n    private Transform canvasTran;\n    private GameObject draggingObject;\n\n    void Awake()\n    {\n        canvasTran = transform.parent.parent;\n    }   \n\n    public void OnBeginDrag(PointerEventData pointerEventData)\n    {\n        CreateDragObject();\n        draggingObject.transform.position = pointerEventData.position;\n    }\n\n    public void OnDrag(PointerEventData pointerEventData)\n    {\n        draggingObject.transform.position = pointerEventData.position;\n    }\n\n    public void OnEndDrag(PointerEventData pointerEventData)\n    {\n        gameObject.GetComponent<Image>().color = Vector4.one;\n        Destroy(draggingObject);\n    }\n\n    // \u30c9\u30e9\u30c3\u30b0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n    private void CreateDragObject()\n    {\n        draggingObject = new GameObject(\"Dragging Object\");\n        draggingObject.transform.SetParent(canvasTran);\n        draggingObject.transform.SetAsLastSibling();\n        draggingObject.transform.localScale = Vector3.one;\n\n        // \u30ec\u30a4\u30ad\u30e3\u30b9\u30c8\u304c\u30d6\u30ed\u30c3\u30af\u3055\u308c\u306a\u3044\u3088\u3046\u306b\n        CanvasGroup canvasGroup = draggingObject.AddComponent<CanvasGroup>();\n        canvasGroup.blocksRaycasts = false;\n\n        Image draggingImage = draggingObject.AddComponent<Image>();\n        Image sourceImage = GetComponent<Image>();\n\n        draggingImage.sprite = sourceImage.sprite;\n        draggingImage.rectTransform.sizeDelta = sourceImage.rectTransform.sizeDelta;\n        draggingImage.color = sourceImage.color;\n        draggingImage.material = sourceImage.material;\n\n        gameObject.GetComponent<Image>().color = Vector4.one * 0.6f;\n    }\n}\n\n\n\n\u30c9\u30ed\u30c3\u30d7\u306e\u307b\u3046\u306eScript\nusing UnityEngine;\nusing UnityEngine.UI;\nusing UnityEngine.EventSystems;\n\npublic class DropObject : MonoBehaviour, IDropHandler, IPointerEnterHandler, IPointerExitHandler\n{\n    public Image iconImage;\n    private Sprite nowSprite;\n\n    void Start()\n    {\n        nowSprite = null;\n    }\n\n    public void OnPointerEnter(PointerEventData pointerEventData)\n    {\n        if(pointerEventData.pointerDrag == null) return;\n        Image droppedImage = pointerEventData.pointerDrag.GetComponent<Image>();\n        iconImage.sprite = droppedImage.sprite;\n        iconImage.color = Vector4.one * 0.6f;\n    }\n\n    public void OnPointerExit(PointerEventData pointerEventData)\n    {\n        if(pointerEventData.pointerDrag == null) return;\n        iconImage.sprite = nowSprite;\n        if(nowSprite == null)\n            iconImage.color = Vector4.zero;\n        else\n            iconImage.color = Vector4.one;\n    }\n    public void OnDrop(PointerEventData pointerEventData)\n    {\n        Image droppedImage = pointerEventData.pointerDrag.GetComponent<Image>();\n        iconImage.sprite = droppedImage.sprite;\n        nowSprite = droppedImage.sprite;\n        iconImage.color = Vector4.one;\n    }\n}\n\n\nDrag\u3059\u308bImage\u306e\u3064\u3044\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306bDragObject.cs\u3092\u30a2\u30bf\u30c3\u30c1\n\u30c9\u30e9\u30c3\u30b0\u3055\u308c\u308b\u307b\u3046\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306bDropObject.cs\u3092\u30a2\u30bf\u30c3\u30c1\u3067\u5b8c\u4e86\n\u30b7\u30f3\u30d7\u30eb\u306a\u30c9\u30e9\u30c3\u30b0\u30c9\u30ed\u30c3\u30d7\u3092\u52c9\u5f37\u304c\u3066\u3089\n<img src=\"https://qiita-image-store.s3.amazonaws.com/0/46444/69a31ad0-c1de-bd26-bbb2-07da39e743ce.gif\" width=\"400px\">\n\n###\u30c9\u30e9\u30c3\u30b0\u306eScript\n\n```csharp \nusing UnityEngine;\nusing UnityEngine.UI;\nusing UnityEngine.EventSystems;\n\t\n[RequireComponent(typeof(Image))]\npublic class DragObject : MonoBehaviour, IBeginDragHandler, IDragHandler, IEndDragHandler\n{\n\tprivate Transform canvasTran;\n\tprivate GameObject draggingObject;\n\n\tvoid Awake()\n\t{\n\t\tcanvasTran = transform.parent.parent;\n\t}\t\n\n\tpublic void OnBeginDrag(PointerEventData pointerEventData)\n\t{\n\t\tCreateDragObject();\n\t\tdraggingObject.transform.position = pointerEventData.position;\n\t}\n\n\tpublic void OnDrag(PointerEventData pointerEventData)\n\t{\n\t\tdraggingObject.transform.position = pointerEventData.position;\n\t}\n\n\tpublic void OnEndDrag(PointerEventData pointerEventData)\n\t{\n\t\tgameObject.GetComponent<Image>().color = Vector4.one;\n\t\tDestroy(draggingObject);\n\t}\n\n\t// \u30c9\u30e9\u30c3\u30b0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n\tprivate void CreateDragObject()\n\t{\n\t\tdraggingObject = new GameObject(\"Dragging Object\");\n\t\tdraggingObject.transform.SetParent(canvasTran);\n\t\tdraggingObject.transform.SetAsLastSibling();\n\t\tdraggingObject.transform.localScale = Vector3.one;\n\t\t\n\t\t// \u30ec\u30a4\u30ad\u30e3\u30b9\u30c8\u304c\u30d6\u30ed\u30c3\u30af\u3055\u308c\u306a\u3044\u3088\u3046\u306b\n\t\tCanvasGroup canvasGroup = draggingObject.AddComponent<CanvasGroup>();\n\t\tcanvasGroup.blocksRaycasts = false;\n\t\t\n\t\tImage draggingImage = draggingObject.AddComponent<Image>();\n\t\tImage sourceImage = GetComponent<Image>();\n\t\t\n\t\tdraggingImage.sprite = sourceImage.sprite;\n\t\tdraggingImage.rectTransform.sizeDelta = sourceImage.rectTransform.sizeDelta;\n\t\tdraggingImage.color = sourceImage.color;\n\t\tdraggingImage.material = sourceImage.material;\n\t\t\n\t\tgameObject.GetComponent<Image>().color = Vector4.one * 0.6f;\n\t}\n}\n\n```\n\n###\u30c9\u30ed\u30c3\u30d7\u306e\u307b\u3046\u306eScript\n\n```csharp\nusing UnityEngine;\nusing UnityEngine.UI;\nusing UnityEngine.EventSystems;\n\npublic class DropObject : MonoBehaviour, IDropHandler, IPointerEnterHandler, IPointerExitHandler\n{\n\tpublic Image iconImage;\n\tprivate Sprite nowSprite;\n\t\n\tvoid Start()\n\t{\n\t\tnowSprite = null;\n\t}\n\n\tpublic void OnPointerEnter(PointerEventData pointerEventData)\n\t{\n\t\tif(pointerEventData.pointerDrag == null) return;\n\t\tImage droppedImage = pointerEventData.pointerDrag.GetComponent<Image>();\n\t\ticonImage.sprite = droppedImage.sprite;\n\t\ticonImage.color = Vector4.one * 0.6f;\n\t}\n\n\tpublic void OnPointerExit(PointerEventData pointerEventData)\n\t{\n\t\tif(pointerEventData.pointerDrag == null) return;\n\t\ticonImage.sprite = nowSprite;\n\t\tif(nowSprite == null)\n\t\t\ticonImage.color = Vector4.zero;\n\t\telse\n\t\t\ticonImage.color = Vector4.one;\n\t}\n\tpublic void OnDrop(PointerEventData pointerEventData)\n\t{\n\t\tImage droppedImage = pointerEventData.pointerDrag.GetComponent<Image>();\n\t\ticonImage.sprite = droppedImage.sprite;\n\t\tnowSprite = droppedImage.sprite;\n\t\ticonImage.color = Vector4.one;\n\t}\n}\n\n```\n\nDrag\u3059\u308bImage\u306e\u3064\u3044\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306bDragObject.cs\u3092\u30a2\u30bf\u30c3\u30c1\n\u30c9\u30e9\u30c3\u30b0\u3055\u308c\u308b\u307b\u3046\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306bDropObject.cs\u3092\u30a2\u30bf\u30c3\u30c1\u3067\u5b8c\u4e86\n", "tags": ["Unity", "uGUI"]}