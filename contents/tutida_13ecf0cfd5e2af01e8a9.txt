{"tags": ["PHP", "GoogleAnalytics"], "context": " More than 1 year has passed since last update.\n\n[PHP]GoogleAnalytics\u304b\u3089PV\u6570\u3092\u53d6\u5f97\u3059\u308b\u307e\u3067\n\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u306e\u89e3\u6790\u306b\u5229\u7528\u3055\u308c\u308bGoogleAnalytics\u304b\u3089PV\u6570\u3092\u53d6\u5f97\u3059\u308b\u307e\u3067\u306e\u5099\u5fd8\u9332\n1. GoogleDeveloers\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\n2. GoogleAnalytics\u306e\u8a2d\u5b9a\n3. PHP\u3067\u53d6\u5f97\u3059\u308b\u969b\u306e\u30b5\u30f3\u30d7\u30eb\n\n1.GoogleDeveloers\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\n\n\u65b0\u898f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\nhttps://console.developers.google.com/start \u3078\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001GoogleAnalyticsAPI\u3092\u6271\u3046\u305f\u3081\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\n\u540d\u524d\u306f\u3054\u81ea\u7531\u306b\n\n\nAnalytics API\u306e\u6709\u52b9\u5316\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u5229\u7528\u3059\u308bAPI\u3092\u9078\u629e\u3057\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u306e\u3067\u3001\u5de6\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089API\u3092\u691c\u7d22\u3057\u3066  AnalyticsAPI\u3092\u6709\u52b9\u5316\u3059\u308b\n\n\n\u8a8d\u8a3c\u60c5\u5831\u306e\u8ffd\u52a0\n\u5404Google\u306eAPI\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u5404\u30b5\u30fc\u30d3\u30b9\u306b\u5fdc\u3058\u305f\u8a8d\u8a3c\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\n\u4eca\u56de\u306f\u30b5\u30fc\u30d0\u304b\u3089API\u3092\u53e9\u304d\u306b\u884c\u304f\u306e\u3067\u3001\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u30ad\u30fc\u306e\u30bf\u30a4\u30d7\u306f\u300c.p12\u300d\u3067OK\u3067\u3059\u3002\n\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u4f5c\u6210\u3055\u308c\u308b\u3068\u540c\u6642\u306b\u300c.p12\u300d\u5f62\u5f0f\u306e\u79d8\u5bc6\u9375\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308c\u307e\u3059\u3002\n\u5f8c\u307b\u3069\u4f7f\u3046\u306e\u3067\u4fdd\u7ba1\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\u4f5c\u6210\u3055\u308c\u305f\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u306f\u3053\u3093\u306a\u611f\u3058\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3068\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306f\u5f8c\u307b\u3069\u6271\u3044\u307e\u3059\u3002\n\u65b0\u898f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\u306f\u4ee5\u4e0a\u3067\u3059\u3002\n\nGoogleAnalytics\u306e\u8a2d\u5b9a\n\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u3001GoogleAnalytics\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u8ffd\u52a0\nPV\u6570\u3092\u53d6\u5f97\u3057\u305f\u3044\u30ec\u30dd\u30fc\u30c8\u3092\u898b\u3066\u3044\u308b\u72b6\u614b\u3067\u3001\u4e0a\u90e8\u30e1\u30cb\u30e5\u30fc\u306e\u300c\u30a2\u30ca\u30ea\u30c6\u30a3\u30af\u30b9\u8a2d\u5b9a\u300d\u3092\u30af\u30ea\u30c3\u30af\n\n\u8a2d\u5b9a\u753b\u9762\u3067\u30d3\u30e5\u30fc\u9805\u76ee\u306e\u300c\u30e6\u30fc\u30b6\u7ba1\u7406\u300d\u3078\n\n\u30e6\u30fc\u30b6\u306e\u8ffd\u52a0\u3092\u3057\u307e\u3059\u3002\n\u300c\u6a29\u5229\u3092\u4ed8\u4e0e\u3059\u308b\u30e6\u30fc\u30b6\u30fc\u300d\u306b\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u30b3\u30d4\u30da\n\u6a29\u9650\u306b\u8868\u793a\u3068\u5206\u6790\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\n\n\n\u30d3\u30e5\u30fcID\u306e\u78ba\u8a8d\n\u540c\u3058\u8a2d\u5b9a\u306e\u30d3\u30e5\u30fc\u9805\u76ee\u3067\u300c\u30d3\u30e5\u30fc\u8a2d\u5b9a\u300d\u3092\u9078\u629e\n\u8a2d\u5b9a\u5185\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u300c\u30d3\u30e5\u30fcID\u300d\u3092\u30e1\u30e2\u30e1\u30e2\n\u3053\u306e\u30d3\u30e5\u30fcID\u3092\u7528\u3044\u3066\u3001API\u306f\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308bAnalytics\u3092\u4e00\u610f\u306b\u8b58\u5225\u3057\u307e\u3059\n\n\nPHP\u3067\u53d6\u5f97\u3059\u308b\u969b\u306e\u30b5\u30f3\u30d7\u30eb\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\nAPI\u7528\u306ePHP\u30e9\u30a4\u30d6\u30e9\u30ea\u3092Google\u3055\u3093\u304c\u63d0\u4f9b\u3057\u3066\u304f\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u3061\u3089\u3092\u4f7f\u3044\u307e\u3059\u3002\ngoogle/apiclient\nGitHub\uff1ahttps://github.com/google/google-api-php-client\npackagist\uff1ahttps://packagist.org/packages/google/apiclient\n\n\u30b3\u30fc\u30c9\ncomposer\u4f7f\u3063\u3066\u308b\u306a\u3089\u3044\u308a\u307e\u305b\u3093\u304c\u3001\u4f7f\u3063\u3066\u306a\u3044\u4eba\u306f\u30e9\u30a4\u30d6\u30e9\u30ea\u4e0b\u306e\u300cautoload.php\u300d\u3092require_once\u3057\u3066\u3042\u3052\u307e\u3057\u3087\u3046\u3002\npublic function getPageView()\n{\n\n    //\u30d3\u30e5\u30fcID\n    $viewId = CORPORATE;\n\n    //GoogleAPI \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\n    $client_email = GAADD;\n\n    //.p12\u30d5\u30a1\u30a4\u30eb(\u79d8\u5bc6\u9375)\n    $private_key = file_get_contents(P12KEY);\n\n    //\u30e1\u30c8\u30ea\u30af\u30b9\uff1a\u53d6\u5f97\u3059\u308b\u30c7\u30fc\u30bf ga:pageviews\u306fPV\u6570\n    $metrics = \"ga:pageviews\";\n\n    //\u53d6\u5f97\u671f\u9593(Y-m-d\u5f62\u5f0f)\n    $from = '2015-08-10';\n    $to = '2015-08-12';\n\n    //\u30aa\u30d7\u30b7\u30e7\u30f3\n    $option = [\n        \"dimensions\" => 'ga:date', //\u30c7\u30a3\u30e1\u30f3\u30b7\u30e7\u30f3\uff1a\u533a\u5207\u308a \u65e5\u4ed8\u3054\u3068\u306b\n        \"max-results\" => 10000, //\u6700\u5927\u53d6\u5f97\u4ef6\u6570 10000\u304cAPI\u306e\u4e0a\u9650\n        \"sort\" => \"ga:date\", //\u30bd\u30fc\u30c8 \u65e5\u4ed8\u9806\n    ];\n\n\n    //\u30b9\u30b3\u30fc\u30d7\u306e\u30bb\u30c3\u30c8\n    $scopes = [\"https://www.googleapis.com/auth/analytics.readonly\"];\n\n    //\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u306e\u4f5c\u6210\n    $credentials = new Google_Auth_AssertionCredentials($client_email, $scopes, $private_key);\n\n    //Google\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\n    $client = new Google_Client();\n    $client->setAssertionCredentials($credentials);\n\n    //\u30c8\u30fc\u30af\u30f3\u306e\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\n    if ($client->getAuth()->isAccessTokenExpired()) {\n        $client->getAuth()->refreshTokenWithAssertion($credentials);\n    }\n    $_SESSION[\"service_token\"] = $client->getAccessToken();\n\n    //Analytics\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\n    $analytics = new Google_Service_Analytics($client);\n\n    //\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\n    $obj = $analytics->data_ga->get(\n        \"ga:{$viewId}\",\n        $from,\n        $to,\n        $metrics,\n        $option\n    );\n\n    echo '<pre>';\n    var_dump($obj->rows);\n    echo '</pre>';\n}\n\n\u53d6\u5f97\u7d50\u679c  \narray(3) {\n  [0]=>\n  array(2) {\n    [0]=>\n    string(8) \"20150810\"\n    [1]=>\n    string(3) \"891\"\n  }\n  [1]=>\n  array(2) {\n    [0]=>\n    string(8) \"20150811\"\n    [1]=>\n    string(3) \"983\"\n  }\n  [2]=>\n  array(2) {\n    [0]=>\n    string(8) \"20150812\"\n    [1]=>\n    string(4) \"1003\"\n  }\n}\n\n\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308b\uff08\uff8a\uff7d\uff9e\uff09\n\nPV\u6570\u4ee5\u5916\u3082\u6708\u3054\u3068\u3068\u304b\u3082\n\u4e0a\u8a18\u30b5\u30f3\u30d7\u30eb\u306e\n    //\u30e1\u30c8\u30ea\u30af\u30b9\uff1a\u53d6\u5f97\u3059\u308b\u30c7\u30fc\u30bf ga:pageviews\u306fPV\u6570\n    $metrics = \"ga:pageviews\";\n\n    $option = [\n        \"dimensions\" => 'ga:date', //\u30c7\u30a3\u30e1\u30f3\u30b7\u30e7\u30f3\uff1a\u533a\u5207\u308a \u65e5\u4ed8\u3054\u3068\u306b\n        \"max-results\" => 10000, //\u6700\u5927\u53d6\u5f97\u4ef6\u6570 10000\u304cAPI\u306e\u4e0a\u9650\n        \"sort\" => \"ga:date\", //\u30bd\u30fc\u30c8 \u65e5\u4ed8\u9806\n    ];\n\n\n\u3053\u306e\u3078\u3093\u3044\u3058\u308b\u3068\u3001Session\u6570\u3068\u304b\u60c5\u5831\u306e\u7c92\u5ea6\u3068\u304b\u3044\u3058\u308c\u308b\u3002\n# [PHP]GoogleAnalytics\u304b\u3089PV\u6570\u3092\u53d6\u5f97\u3059\u308b\u307e\u3067\n\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u306e\u89e3\u6790\u306b\u5229\u7528\u3055\u308c\u308bGoogleAnalytics\u304b\u3089PV\u6570\u3092\u53d6\u5f97\u3059\u308b\u307e\u3067\u306e\u5099\u5fd8\u9332\n1. GoogleDeveloers\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\n2. GoogleAnalytics\u306e\u8a2d\u5b9a\n3. PHP\u3067\u53d6\u5f97\u3059\u308b\u969b\u306e\u30b5\u30f3\u30d7\u30eb\n\n## 1.GoogleDeveloers\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\n### \u65b0\u898f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\nhttps://console.developers.google.com/start \u3078\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001GoogleAnalyticsAPI\u3092\u6271\u3046\u305f\u3081\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\n\u540d\u524d\u306f\u3054\u81ea\u7531\u306b\n![2015-08-31_14h49_15.png](https://qiita-image-store.s3.amazonaws.com/0/74129/97fa49a0-c2a2-7da0-40ae-5eb21dad58c4.png)\n\n### Analytics API\u306e\u6709\u52b9\u5316\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u5229\u7528\u3059\u308bAPI\u3092\u9078\u629e\u3057\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u306e\u3067\u3001\u5de6\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089API\u3092\u691c\u7d22\u3057\u3066  AnalyticsAPI\u3092\u6709\u52b9\u5316\u3059\u308b\n![2015-08-31_14h55_30.png](https://qiita-image-store.s3.amazonaws.com/0/74129/8b89e4df-cfc8-0a5f-b3da-8862c5382a32.png)\n\n### \u8a8d\u8a3c\u60c5\u5831\u306e\u8ffd\u52a0\n\u5404Google\u306eAPI\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u5404\u30b5\u30fc\u30d3\u30b9\u306b\u5fdc\u3058\u305f\u8a8d\u8a3c\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\n\u4eca\u56de\u306f\u30b5\u30fc\u30d0\u304b\u3089API\u3092\u53e9\u304d\u306b\u884c\u304f\u306e\u3067\u3001\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n![2015-08-31_14h57_29.png](https://qiita-image-store.s3.amazonaws.com/0/74129/f34a0fc1-a928-75fd-39f1-390e3145038f.png)\n\u30ad\u30fc\u306e\u30bf\u30a4\u30d7\u306f\u300c.p12\u300d\u3067OK\u3067\u3059\u3002\n\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u4f5c\u6210\u3055\u308c\u308b\u3068\u540c\u6642\u306b\u300c.p12\u300d\u5f62\u5f0f\u306e\u79d8\u5bc6\u9375\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308c\u307e\u3059\u3002\n\u5f8c\u307b\u3069\u4f7f\u3046\u306e\u3067\u4fdd\u7ba1\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n\u4f5c\u6210\u3055\u308c\u305f\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u306f\u3053\u3093\u306a\u611f\u3058\n![2015-08-31_15h01_21.png](https://qiita-image-store.s3.amazonaws.com/0/74129/d0626c6c-b55b-f8bc-22ae-94e13851bacb.png)\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3068\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306f\u5f8c\u307b\u3069\u6271\u3044\u307e\u3059\u3002\n\n\u65b0\u898f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\u306f\u4ee5\u4e0a\u3067\u3059\u3002\n\n## GoogleAnalytics\u306e\u8a2d\u5b9a\n\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u3001GoogleAnalytics\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3057\u307e\u3057\u3087\u3046\u3002\n\n### \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u8ffd\u52a0\nPV\u6570\u3092\u53d6\u5f97\u3057\u305f\u3044\u30ec\u30dd\u30fc\u30c8\u3092\u898b\u3066\u3044\u308b\u72b6\u614b\u3067\u3001\u4e0a\u90e8\u30e1\u30cb\u30e5\u30fc\u306e\u300c\u30a2\u30ca\u30ea\u30c6\u30a3\u30af\u30b9\u8a2d\u5b9a\u300d\u3092\u30af\u30ea\u30c3\u30af\n![2015-08-31_15h17_27.png](https://qiita-image-store.s3.amazonaws.com/0/74129/f2f28fc3-f153-ff64-2ccd-a983f54ea362.png)\n\n\u8a2d\u5b9a\u753b\u9762\u3067\u30d3\u30e5\u30fc\u9805\u76ee\u306e\u300c\u30e6\u30fc\u30b6\u7ba1\u7406\u300d\u3078\n![2015-08-31_15h18_25.png](https://qiita-image-store.s3.amazonaws.com/0/74129/dbd89213-66e6-a09b-1825-ddac88eaf04a.png)\n\n\u30e6\u30fc\u30b6\u306e\u8ffd\u52a0\u3092\u3057\u307e\u3059\u3002\n\u300c\u6a29\u5229\u3092\u4ed8\u4e0e\u3059\u308b\u30e6\u30fc\u30b6\u30fc\u300d\u306b\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u306e**\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9**\u3092\u30b3\u30d4\u30da\n\u6a29\u9650\u306b\u8868\u793a\u3068\u5206\u6790\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\n![2015-08-31_15h20_30.png](https://qiita-image-store.s3.amazonaws.com/0/74129/a474339a-8f9b-214b-7874-f649bc173775.png)\n\n### \u30d3\u30e5\u30fcID\u306e\u78ba\u8a8d\n\u540c\u3058\u8a2d\u5b9a\u306e\u30d3\u30e5\u30fc\u9805\u76ee\u3067\u300c\u30d3\u30e5\u30fc\u8a2d\u5b9a\u300d\u3092\u9078\u629e\n\u8a2d\u5b9a\u5185\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u300c\u30d3\u30e5\u30fcID\u300d\u3092\u30e1\u30e2\u30e1\u30e2\n\u3053\u306e\u30d3\u30e5\u30fcID\u3092\u7528\u3044\u3066\u3001API\u306f\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308bAnalytics\u3092\u4e00\u610f\u306b\u8b58\u5225\u3057\u307e\u3059\n![2015-08-31_15h22_24.png](https://qiita-image-store.s3.amazonaws.com/0/74129/9b225bb1-a51d-8c59-3c47-79d042831097.png)\n\n##  PHP\u3067\u53d6\u5f97\u3059\u308b\u969b\u306e\u30b5\u30f3\u30d7\u30eb\n### \u30e9\u30a4\u30d6\u30e9\u30ea\nAPI\u7528\u306ePHP\u30e9\u30a4\u30d6\u30e9\u30ea\u3092Google\u3055\u3093\u304c\u63d0\u4f9b\u3057\u3066\u304f\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u3061\u3089\u3092\u4f7f\u3044\u307e\u3059\u3002\n**google/apiclient**\nGitHub\uff1ahttps://github.com/google/google-api-php-client\npackagist\uff1ahttps://packagist.org/packages/google/apiclient\n\n### \u30b3\u30fc\u30c9\ncomposer\u4f7f\u3063\u3066\u308b\u306a\u3089\u3044\u308a\u307e\u305b\u3093\u304c\u3001\u4f7f\u3063\u3066\u306a\u3044\u4eba\u306f\u30e9\u30a4\u30d6\u30e9\u30ea\u4e0b\u306e\u300cautoload.php\u300d\u3092require_once\u3057\u3066\u3042\u3052\u307e\u3057\u3087\u3046\u3002\n\n```php\npublic function getPageView()\n{\n\n    //\u30d3\u30e5\u30fcID\n    $viewId = CORPORATE;\n\n    //GoogleAPI \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\n    $client_email = GAADD;\n\n    //.p12\u30d5\u30a1\u30a4\u30eb(\u79d8\u5bc6\u9375)\n    $private_key = file_get_contents(P12KEY);\n\n    //\u30e1\u30c8\u30ea\u30af\u30b9\uff1a\u53d6\u5f97\u3059\u308b\u30c7\u30fc\u30bf ga:pageviews\u306fPV\u6570\n    $metrics = \"ga:pageviews\";\n\n    //\u53d6\u5f97\u671f\u9593(Y-m-d\u5f62\u5f0f)\n    $from = '2015-08-10';\n    $to = '2015-08-12';\n\n    //\u30aa\u30d7\u30b7\u30e7\u30f3\n    $option = [\n        \"dimensions\" => 'ga:date', //\u30c7\u30a3\u30e1\u30f3\u30b7\u30e7\u30f3\uff1a\u533a\u5207\u308a \u65e5\u4ed8\u3054\u3068\u306b\n        \"max-results\" => 10000, //\u6700\u5927\u53d6\u5f97\u4ef6\u6570 10000\u304cAPI\u306e\u4e0a\u9650\n        \"sort\" => \"ga:date\", //\u30bd\u30fc\u30c8 \u65e5\u4ed8\u9806\n    ];\n\n\n    //\u30b9\u30b3\u30fc\u30d7\u306e\u30bb\u30c3\u30c8\n    $scopes = [\"https://www.googleapis.com/auth/analytics.readonly\"];\n\n    //\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u306e\u4f5c\u6210\n    $credentials = new Google_Auth_AssertionCredentials($client_email, $scopes, $private_key);\n\n    //Google\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\n    $client = new Google_Client();\n    $client->setAssertionCredentials($credentials);\n\n    //\u30c8\u30fc\u30af\u30f3\u306e\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\n    if ($client->getAuth()->isAccessTokenExpired()) {\n        $client->getAuth()->refreshTokenWithAssertion($credentials);\n    }\n    $_SESSION[\"service_token\"] = $client->getAccessToken();\n\n    //Analytics\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\n    $analytics = new Google_Service_Analytics($client);\n\n    //\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\n    $obj = $analytics->data_ga->get(\n        \"ga:{$viewId}\",\n        $from,\n        $to,\n        $metrics,\n        $option\n    );\n\n    echo '<pre>';\n    var_dump($obj->rows);\n    echo '</pre>';\n}\n```\n \n\u53d6\u5f97\u7d50\u679c  \n\n```php\narray(3) {\n  [0]=>\n  array(2) {\n    [0]=>\n    string(8) \"20150810\"\n    [1]=>\n    string(3) \"891\"\n  }\n  [1]=>\n  array(2) {\n    [0]=>\n    string(8) \"20150811\"\n    [1]=>\n    string(3) \"983\"\n  }\n  [2]=>\n  array(2) {\n    [0]=>\n    string(8) \"20150812\"\n    [1]=>\n    string(4) \"1003\"\n  }\n}\n```  \n\n\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308b\uff08\uff8a\uff7d\uff9e\uff09\n\n### PV\u6570\u4ee5\u5916\u3082\u6708\u3054\u3068\u3068\u304b\u3082\n\u4e0a\u8a18\u30b5\u30f3\u30d7\u30eb\u306e\n\n```php\n    //\u30e1\u30c8\u30ea\u30af\u30b9\uff1a\u53d6\u5f97\u3059\u308b\u30c7\u30fc\u30bf ga:pageviews\u306fPV\u6570\n    $metrics = \"ga:pageviews\";\n\n    $option = [\n        \"dimensions\" => 'ga:date', //\u30c7\u30a3\u30e1\u30f3\u30b7\u30e7\u30f3\uff1a\u533a\u5207\u308a \u65e5\u4ed8\u3054\u3068\u306b\n        \"max-results\" => 10000, //\u6700\u5927\u53d6\u5f97\u4ef6\u6570 10000\u304cAPI\u306e\u4e0a\u9650\n        \"sort\" => \"ga:date\", //\u30bd\u30fc\u30c8 \u65e5\u4ed8\u9806\n    ];\n\n```\n\n\u3053\u306e\u3078\u3093\u3044\u3058\u308b\u3068\u3001Session\u6570\u3068\u304b\u60c5\u5831\u306e\u7c92\u5ea6\u3068\u304b\u3044\u3058\u308c\u308b\u3002\n"}