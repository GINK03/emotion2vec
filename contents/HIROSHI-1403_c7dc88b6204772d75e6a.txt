{"context": " More than 1 year has passed since last update.\n\n\u524d\u63d0\n\nXAMPP\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30005.6.15\n\u4f7f\u7528PC\u3000MAC\n\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u306e\u307f\u691c\u8a3c\n\nXAMPP\u3067Google Analytics API\u3092PHP\u304b\u3089\u53e9\u3053\u3046\u3068\u601d\u3063\u305f\u3089\u3001\u3044\u304d\u306a\u308a\u3064\u307e\u305a\u3044\u305f\u306e\u3067\u3001\u5099\u5fd8\u9332\u3068\u3057\u3066\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u3064\u307e\u305a\u3044\u305f\u5185\u5bb9\n\n\u305d\u3082\u305d\u3082Composer\u3092\u5c0e\u5165\u3057\u3066\u3044\u306a\u3044\uff08Google\u516c\u5f0f\u30da\u30fc\u30b8\u3067\u306fComposer\u306e\u5229\u7528\u304c\u524d\u63d0\u8aac\u660e\uff09\n\n\nGoogle\u516c\u5f0f\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\n\u4eca\u56de\u306fComposer\u3092\u5229\u7528\u3057\u307e\u305b\u3093\u3002\uff08\u3042\u3093\u307e\u308a\u8a18\u4e8b\u304c\u306a\u304b\u3063\u305f\u3067\u3059\u3002\uff09\n\n\nComposer\u3067\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u306a\u3044\u305f\u3081\u3001vender\u3068\u3044\u3046\u30d5\u30a9\u30eb\u30c0\u304c\u5b58\u5728\u3057\u306a\u3044\u3002\ngoogle-api-php-client\u3092GitHub\u304b\u3089DL\u3057\u3066\u3082\u76f4\u4e0b\u306bautoload.php\u304c\u7121\u3044\nXAMPP\u5185\uff08\u7279\u306bhtdocs\uff09\u306ePermission\u8a2d\u5b9a\u304c\u5909\nXAMPP\u5185\u3067\u5b8c\u7d50\u3059\u308b\u304b\u3068\u304a\u3082\u3044\u304d\u3084Mac\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30be\u30fc\u30f3\uff08\u96a0\u3057\u30d5\u30a9\u30eb\u30c0\uff09\u306b\u52dd\u624b\u306bmkdir\uff08PHP\u304b\u3089\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u751f\u6210\uff09\u3059\u308b\u306e\u3067\u3001\u3053\u308c\u307e\u305fPermission\u554f\u984c\nautoload.php\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u79fb\u52d5\u4e88\u544a\u306b\u3088\u308bPHP\u304b\u3089\u306ewarning\u304c\u51fa\u308b\u3002\n\n\u3056\u3063\u3068\u3053\u308c\u3060\u3051\u306e\u305f\u3081\u306b\u7d50\u69cb\u306a\u6642\u9593\u3092\u8cbb\u3084\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\u304a\u304a\u3088\u305d\u3001AWS\u30fbGD\u306a\u3069\u306eIaaS\u74b0\u5883\u3084\u30eb\u30fc\u30c8\u6a29\u9650\u3092\u30d0\u30ea\u30d0\u30ea\u5f04\u304f\u308c\u308b\u74b0\u5883\u3068\u4eba\u306a\u3089\u3001\n\u30a8\u30e9\u30fc\u51fa\u308b\u305f\u3073\u306b\u3059\u3050\u5bfe\u51e6\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u6c17\u3092\u3064\u3051\u3066\u3044\u305f\u3060\u304d\u305f\u3044\u5185\u5bb9\nComposer\u3092\u4f7f\u7528\u3057\u307e\u305b\u3093\u3002\u3059\u308b\u5834\u5408\u306fGoogle\u516c\u5f0f\u30da\u30fc\u30b8\u306e\u307b\u3046\u304c\u65e9\u3044\u3067\u3057\u3087\u3046\u3002Qitta\u53c2\u8003\u30da\u30fc\u30b8\n\u5f8c\u534a\u3067MAC\u81ea\u4f53\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30be\u30fc\u30f3\u30d5\u30a9\u30eb\u30c0\u306ePermission\uff08\u6a29\u9650\uff09\u3092\u958b\u653e\u3057\u307e\u3059\u3002\n\u3053\u306e\u30d5\u30a9\u30eb\u30c0\u306b\u306f\u3001Mac OS\u81ea\u4f53\u306e\u91cd\u8981\u306a\u30d5\u30a9\u30eb\u30c0\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u9593\u9055\u3063\u3066\u524a\u9664\u3057\u3066\u3057\u307e\u308f\u306a\u3044\u3088\u3046\u306b\u6c17\u3092\u3064\u3051\u3066\u304f\u3060\u3055\u3044\u3002\nbackup\uff08TimeMachine\u7b49\uff09\u306f\u4e8b\u524d\u306b\u304a\u3053\u306a\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u624b\u9806\n\u7565Google Developer\uff1aGD\n\n\nGoogle\u516c\u5f0f or Qitta\u53c2\u8003\u30da\u30fc\u30b8\u3088\u308a\u3001\u4e0b\u8a18\u3092\u5b9f\u884c\u3059\u308b\n\n\nGD\u30b3\u30f3\u30bd\u30fc\u30eb\u3088\u308a\u3001API\u6709\u52b9\u5316\n\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u30ad\u30fc\u751f\u6210\uff08\u79d8\u5bc6\u9375P12\u30bf\u30a4\u30d7\uff09\n\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\uff08GD\uff09\u306e\u53d6\u5f97\nGoogleAnalytics\u30b3\u30f3\u30bd\u30fc\u30eb\u753b\u9762\u3088\u308a\u3001\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\uff08GD\uff09\u306e\u767b\u9332\nGoogleAnalytics\u30b3\u30f3\u30bd\u30fc\u30eb\u753b\u9762\u3088\u308a\u3001\u30d3\u30e5\u30fcID\u3092\u53d6\u5f97\n\u4ed6\u30fb\u30fb\u30fb\n\n\n\n\nXAMPP\u306ehtdocs\u306e\u6a29\u9650\u3092\u3059\u3079\u3066\u958b\u653e\u3057\u307e\u3059\u3002\uff08\u4eca\u56de\u306f\u3059\u3079\u3066\u6a29\u96500777\uff09\u306b\u3057\u307e\u3057\u305f\u3002(~$ chmod -R 777 /Applications/XAMPP/htdocs)\nTerminal\u304b\u3089\u3001/var/folder\u307e\u3067\u30c1\u30a7\u30f3\u30b8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30b3\u30de\u30f3\u30c9\uff08~$ cd /var/folders\uff09\u307e\u3067\u884c\u304d\u3001nd\u30d5\u30a9\u30eb\u30c0\u2192md5\u5f62\u5f0f\u540d\u306e\u96a0\u3057\u30d5\u30a9\u30eb\u30c0\uff08\u4f8b\uff1aa1q2sw3ed4rf5tg6yh7uj8ik9\u7684\u306aSomething\uff09\u2192\u53f3\u30af\u30ea\u30c3\u30af\u2192\u60c5\u5831\u60c5\u5831\u3092\u898b\u308b\u2192\u4e0b\u6bb5\u306e\u300c\u5171\u6709\u3068\u30a2\u30af\u30bb\u30b9\u6a29\u300d\u306eEVERYONE\u306e\u6a29\u9650\u3092\u8aad\u307f/\u66f8\u304d\u306b\u5909\u66f4\ngoogle-api-php-client\u306ev1-master\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\u4efb\u610f\u306eXAMPPDirectory\u306b\uff13\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u89e3\u51cd\u3057\u305f\u3082\u306e\u3068\u3001P12\u30ad\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\u305d\u3057\u3066\u9069\u5f53\u306a\uff08ga.php\u306a\u3069\uff09.php\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u4e0b\u8a18\u3092\u8a2d\u5b9a\u3057\u3066php\u30d5\u30a1\u30a4\u30eb\u306b\u30d6\u30e9\u30a6\u30b6\u3088\u308a\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068API\u304c\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\n\n\nga.php\n<?php\nfunction getService()\n{\n  // Creates and returns the Analytics service object.\n  // Load the Google API PHP Client Library.\n  require_once 'google-api-php-client/src/Google/autoload.php';\n  // Use the developers console and replace the values with your\n  // service account email, and relative location of your key file.\n  $service_account_email = '<Replace with your service account email address.>';\n  $key_file_location = '<Replace with /path/to/generated/client_secrets.p12>';\n  // Create and configure a new client object.\n  $client = new Google_Client();\n  $client->setApplicationName(\"HelloAnalytics\");\n  $analytics = new Google_Service_Analytics($client);\n  // Read the generated client_secrets.p12 key.\n  $key = file_get_contents($key_file_location);\n  $cred = new Google_Auth_AssertionCredentials(\n      $service_account_email,\n      array(Google_Service_Analytics::ANALYTICS_READONLY),\n      $key\n  );\n  $client->setAssertionCredentials($cred);\n  if($client->getAuth()->isAccessTokenExpired()) {\n    $client->getAuth()->refreshTokenWithAssertion($cred);\n  }\n  return $analytics;\n}\nfunction getFirstprofileId(&$analytics) {\n  // Get the user's first view (profile) ID.\n  // Get the list of accounts for the authorized user.\n  $accounts = $analytics->management_accounts->listManagementAccounts();\n  if (count($accounts->getItems()) > 0) {\n    $items = $accounts->getItems();\n    $firstAccountId = $items[0]->getId();\n    // Get the list of properties for the authorized user.\n    $properties = $analytics->management_webproperties\n        ->listManagementWebproperties($firstAccountId);\n    if (count($properties->getItems()) > 0) {\n      $items = $properties->getItems();\n      $firstPropertyId = $items[0]->getId();\n      // Get the list of views (profiles) for the authorized user.\n      $profiles = $analytics->management_profiles\n          ->listManagementProfiles($firstAccountId, $firstPropertyId);\n      if (count($profiles->getItems()) > 0) {\n        $items = $profiles->getItems();\n        // Return the first view (profile) ID.\n        return $items[0]->getId();\n      } else {\n        throw new Exception('No views (profiles) found for this user.');\n      }\n    } else {\n      throw new Exception('No properties found for this user.');\n    }\n  } else {\n    throw new Exception('No accounts found for this user.');\n  }\n}\nfunction getResults(&$analytics, $profileId) {\n  // Calls the Core Reporting API and queries for the number of sessions\n  // for the last seven days.\n   return $analytics->data_ga->get(\n       'ga:' . $profileId,\n       '7daysAgo',\n       'today',\n       'ga:sessions');\n}\nfunction printResults(&$results) {\n  // Parses the response from the Core Reporting API and prints\n  // the profile name and total sessions.\n  if (count($results->getRows()) > 0) {\n    // Get the profile name.\n    $profileName = $results->getProfileInfo()->getProfileName();\n    // Get the entry for the first entry in the first row.\n    $rows = $results->getRows();\n    $sessions = $rows[0][0];\n    // Print the results.\n    print \"First view (profile) found: $profileName\\n\";\n    print \"Total sessions: $sessions\\n\";\n  } else {\n    print \"No results found.\\n\";\n  }\n}\n$analytics = getService();\n$profile = getFirstProfileId($analytics);\n$results = getResults($analytics, $profile);\nprintResults($results);\n?>\n\n\nGoogle\u516c\u5f0f\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3088\u308a\u5f15\u7528\n\n#\u524d\u63d0\n\n- XAMPP\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30005.6.15\n- \u4f7f\u7528PC\u3000MAC\n- \u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u306e\u307f\u691c\u8a3c\n\nXAMPP\u3067Google Analytics API\u3092PHP\u304b\u3089\u53e9\u3053\u3046\u3068\u601d\u3063\u305f\u3089\u3001\u3044\u304d\u306a\u308a\u3064\u307e\u305a\u3044\u305f\u306e\u3067\u3001\u5099\u5fd8\u9332\u3068\u3057\u3066\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n# \u3064\u307e\u305a\u3044\u305f\u5185\u5bb9\n\n- \u305d\u3082\u305d\u3082Composer\u3092\u5c0e\u5165\u3057\u3066\u3044\u306a\u3044\uff08Google\u516c\u5f0f\u30da\u30fc\u30b8\u3067\u306fComposer\u306e\u5229\u7528\u304c\u524d\u63d0\u8aac\u660e\uff09\n    - [Google\u516c\u5f0f\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb](https://developers.google.com/analytics/devguides/reporting/core/v3/quickstart/service-php?hl=ja)\n    - \u4eca\u56de\u306fComposer\u3092\u5229\u7528\u3057\u307e\u305b\u3093\u3002\uff08\u3042\u3093\u307e\u308a\u8a18\u4e8b\u304c\u306a\u304b\u3063\u305f\u3067\u3059\u3002\uff09\n- Composer\u3067\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u306a\u3044\u305f\u3081\u3001`vender`\u3068\u3044\u3046\u30d5\u30a9\u30eb\u30c0\u304c\u5b58\u5728\u3057\u306a\u3044\u3002\n- google-api-php-client\u3092GitHub\u304b\u3089DL\u3057\u3066\u3082\u76f4\u4e0b\u306bautoload.php\u304c\u7121\u3044\n- XAMPP\u5185\uff08\u7279\u306bhtdocs\uff09\u306ePermission\u8a2d\u5b9a\u304c\u5909\n- XAMPP\u5185\u3067\u5b8c\u7d50\u3059\u308b\u304b\u3068\u304a\u3082\u3044\u304d\u3084Mac\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30be\u30fc\u30f3\uff08\u96a0\u3057\u30d5\u30a9\u30eb\u30c0\uff09\u306b\u52dd\u624b\u306bmkdir\uff08PHP\u304b\u3089\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u751f\u6210\uff09\u3059\u308b\u306e\u3067\u3001\u3053\u308c\u307e\u305fPermission\u554f\u984c\n- autoload.php\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u79fb\u52d5\u4e88\u544a\u306b\u3088\u308bPHP\u304b\u3089\u306ewarning\u304c\u51fa\u308b\u3002\n\n\u3056\u3063\u3068\u3053\u308c\u3060\u3051\u306e\u305f\u3081\u306b\u7d50\u69cb\u306a\u6642\u9593\u3092\u8cbb\u3084\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\n\u304a\u304a\u3088\u305d\u3001AWS\u30fbGD\u306a\u3069\u306eIaaS\u74b0\u5883\u3084\u30eb\u30fc\u30c8\u6a29\u9650\u3092\u30d0\u30ea\u30d0\u30ea\u5f04\u304f\u308c\u308b\u74b0\u5883\u3068\u4eba\u306a\u3089\u3001\n\u30a8\u30e9\u30fc\u51fa\u308b\u305f\u3073\u306b\u3059\u3050\u5bfe\u51e6\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n# \u6c17\u3092\u3064\u3051\u3066\u3044\u305f\u3060\u304d\u305f\u3044\u5185\u5bb9\n**Composer\u3092\u4f7f\u7528\u3057\u307e\u305b\u3093\u3002\u3059\u308b\u5834\u5408\u306fGoogle\u516c\u5f0f\u30da\u30fc\u30b8\u306e\u307b\u3046\u304c\u65e9\u3044\u3067\u3057\u3087\u3046\u3002[Qitta\u53c2\u8003\u30da\u30fc\u30b8](http://qiita.com/zayarwinttun/items/90ef6979c644f262d0c4)**\n\n**\u5f8c\u534a\u3067MAC\u81ea\u4f53\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30be\u30fc\u30f3\u30d5\u30a9\u30eb\u30c0\u306ePermission\uff08\u6a29\u9650\uff09\u3092\u958b\u653e\u3057\u307e\u3059\u3002**\n**\u3053\u306e\u30d5\u30a9\u30eb\u30c0\u306b\u306f\u3001Mac OS\u81ea\u4f53\u306e\u91cd\u8981\u306a\u30d5\u30a9\u30eb\u30c0\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u9593\u9055\u3063\u3066\u524a\u9664\u3057\u3066\u3057\u307e\u308f\u306a\u3044\u3088\u3046\u306b\u6c17\u3092\u3064\u3051\u3066\u304f\u3060\u3055\u3044\u3002**\n**backup\uff08TimeMachine\u7b49\uff09\u306f\u4e8b\u524d\u306b\u304a\u3053\u306a\u3063\u3066\u304f\u3060\u3055\u3044\u3002**\n\n#\u624b\u9806\n\n*\u7565Google Developer\uff1aGD*\n\n- [Google\u516c\u5f0f](https://developers.google.com/analytics/devguides/reporting/core/v3/quickstart/service-php?hl=ja) or [Qitta\u53c2\u8003\u30da\u30fc\u30b8](http://qiita.com/zayarwinttun/items/90ef6979c644f262d0c4)\u3088\u308a\u3001\u4e0b\u8a18\u3092\u5b9f\u884c\u3059\u308b\n    - GD\u30b3\u30f3\u30bd\u30fc\u30eb\u3088\u308a\u3001API\u6709\u52b9\u5316\n    - \u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u30ad\u30fc\u751f\u6210\uff08\u79d8\u5bc6\u9375P12\u30bf\u30a4\u30d7\uff09\n    - \u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\uff08GD\uff09\u306e\u53d6\u5f97\n    - GoogleAnalytics\u30b3\u30f3\u30bd\u30fc\u30eb\u753b\u9762\u3088\u308a\u3001\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\uff08GD\uff09\u306e\u767b\u9332\n    - GoogleAnalytics\u30b3\u30f3\u30bd\u30fc\u30eb\u753b\u9762\u3088\u308a\u3001\u30d3\u30e5\u30fcID\u3092\u53d6\u5f97\n    - \u4ed6\u30fb\u30fb\u30fb\n\n1. XAMPP\u306ehtdocs\u306e\u6a29\u9650\u3092\u3059\u3079\u3066\u958b\u653e\u3057\u307e\u3059\u3002\uff08\u4eca\u56de\u306f\u3059\u3079\u3066\u6a29\u96500777\uff09\u306b\u3057\u307e\u3057\u305f\u3002(`~$ chmod -R 777 /Applications/XAMPP/htdocs`)\n2. Terminal\u304b\u3089\u3001/var/folder\u307e\u3067\u30c1\u30a7\u30f3\u30b8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30b3\u30de\u30f3\u30c9\uff08~$ cd /var/folders\uff09\u307e\u3067\u884c\u304d\u3001`nd\u30d5\u30a9\u30eb\u30c0`\u2192`md5\u5f62\u5f0f\u540d\u306e\u96a0\u3057\u30d5\u30a9\u30eb\u30c0\uff08\u4f8b\uff1aa1q2sw3ed4rf5tg6yh7uj8ik9\u7684\u306aSomething\uff09`\u2192`\u53f3\u30af\u30ea\u30c3\u30af`\u2192`\u60c5\u5831\u60c5\u5831\u3092\u898b\u308b`\u2192\u4e0b\u6bb5\u306e\u300c\u5171\u6709\u3068\u30a2\u30af\u30bb\u30b9\u6a29\u300d\u306eEVERYONE\u306e\u6a29\u9650\u3092`\u8aad\u307f/\u66f8\u304d`\u306b\u5909\u66f4\n3. [google-api-php-client\u306ev1-master\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9](https://github.com/google/google-api-php-client/tree/v1-master)\n4. \u4efb\u610f\u306eXAMPPDirectory\u306b\uff13\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u89e3\u51cd\u3057\u305f\u3082\u306e\u3068\u3001P12\u30ad\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\u305d\u3057\u3066\u9069\u5f53\u306a\uff08`ga.php`\u306a\u3069\uff09.php\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n5. \u4e0b\u8a18\u3092\u8a2d\u5b9a\u3057\u3066php\u30d5\u30a1\u30a4\u30eb\u306b\u30d6\u30e9\u30a6\u30b6\u3088\u308a\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068API\u304c\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\n> ```lang:ga.php\n<?php\nfunction getService()\n{\n  // Creates and returns the Analytics service object.\n  // Load the Google API PHP Client Library.\n  require_once 'google-api-php-client/src/Google/autoload.php';\n  // Use the developers console and replace the values with your\n  // service account email, and relative location of your key file.\n  $service_account_email = '<Replace with your service account email address.>';\n  $key_file_location = '<Replace with /path/to/generated/client_secrets.p12>';\n  // Create and configure a new client object.\n  $client = new Google_Client();\n  $client->setApplicationName(\"HelloAnalytics\");\n  $analytics = new Google_Service_Analytics($client);\n  // Read the generated client_secrets.p12 key.\n  $key = file_get_contents($key_file_location);\n  $cred = new Google_Auth_AssertionCredentials(\n      $service_account_email,\n      array(Google_Service_Analytics::ANALYTICS_READONLY),\n      $key\n  );\n  $client->setAssertionCredentials($cred);\n  if($client->getAuth()->isAccessTokenExpired()) {\n    $client->getAuth()->refreshTokenWithAssertion($cred);\n  }\n  return $analytics;\n}\nfunction getFirstprofileId(&$analytics) {\n  // Get the user's first view (profile) ID.\n  // Get the list of accounts for the authorized user.\n  $accounts = $analytics->management_accounts->listManagementAccounts();\n  if (count($accounts->getItems()) > 0) {\n    $items = $accounts->getItems();\n    $firstAccountId = $items[0]->getId();\n    // Get the list of properties for the authorized user.\n    $properties = $analytics->management_webproperties\n        ->listManagementWebproperties($firstAccountId);\n    if (count($properties->getItems()) > 0) {\n      $items = $properties->getItems();\n      $firstPropertyId = $items[0]->getId();\n      // Get the list of views (profiles) for the authorized user.\n      $profiles = $analytics->management_profiles\n          ->listManagementProfiles($firstAccountId, $firstPropertyId);\n      if (count($profiles->getItems()) > 0) {\n        $items = $profiles->getItems();\n        // Return the first view (profile) ID.\n        return $items[0]->getId();\n      } else {\n        throw new Exception('No views (profiles) found for this user.');\n      }\n    } else {\n      throw new Exception('No properties found for this user.');\n    }\n  } else {\n    throw new Exception('No accounts found for this user.');\n  }\n}\nfunction getResults(&$analytics, $profileId) {\n  // Calls the Core Reporting API and queries for the number of sessions\n  // for the last seven days.\n   return $analytics->data_ga->get(\n       'ga:' . $profileId,\n       '7daysAgo',\n       'today',\n       'ga:sessions');\n}\nfunction printResults(&$results) {\n  // Parses the response from the Core Reporting API and prints\n  // the profile name and total sessions.\n  if (count($results->getRows()) > 0) {\n    // Get the profile name.\n    $profileName = $results->getProfileInfo()->getProfileName();\n    // Get the entry for the first entry in the first row.\n    $rows = $results->getRows();\n    $sessions = $rows[0][0];\n    // Print the results.\n    print \"First view (profile) found: $profileName\\n\";\n    print \"Total sessions: $sessions\\n\";\n  } else {\n    print \"No results found.\\n\";\n  }\n}\n$analytics = getService();\n$profile = getFirstProfileId($analytics);\n$results = getResults($analytics, $profile);\nprintResults($results);\n?>\n```\nGoogle\u516c\u5f0f\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3088\u308a\u5f15\u7528\n\n", "tags": ["xampp", "PHP", "api", "GoogleAnalytics", "Composer"]}