{"context": "\u4ee5\u4e0b\u306e\u30c6\u30fc\u30d6\u30eb\u69cb\u9020\u304b\u3089\u3001ASIN\u3067\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001count\u3092\u53d6\u308b\u3002\n\n\n\nid\nASIN\n\n\n\n\n1\n1111111111\n\n\n2\n2222222222\n\n\n3\n3333333333\n\n\n4\n2222222222\n\n\n\n Model.group(:asin).count(:id)\n\n\u4e0a\u8a18\u306e\u5b9f\u884c\u7d50\u679c\n{\"1111111111\" => 1,\n\"2222222222\" => 2,\n\"3333333333\" => 1,\n}\n\n\u3053\u308c\u3092\u3001count\u7d50\u679c\u306e\u964d\u9806\u306b\u4e26\u3079\u308b\u3002\nModel.group(:asin).order('count_id desc').count(:id)\n\n{\"2222222222\" => 2,\n\"1111111111\" => 1,\n\"3333333333\" => 1,\n}\n\n\u3053\u308c\u3067\u6c42\u3081\u308b\u7d50\u679c\u304c\u53d6\u308c\u305f\u3002\n\u30dd\u30a4\u30f3\u30c8\u306f\u3001\u6700\u521d\u306e\u5b9f\u884c\u7d50\u679c\u306e\u30ed\u30b0\u304b\u3089\u3001count_id\u3068\u3044\u3046\u5225\u540d\u304c\u3064\u3051\u3089\u308c\u308b\u306e\u3067\u3001\n\u305d\u308c\u3092order\u306b\u6307\u5b9a\u3059\u308b\u3002\n\u307e\u305f\u3001\u6307\u5b9a\u306e\u969b\u306b\u306f\u6587\u5b57\u5217\u3067\u6e21\u3057\u3066\u3042\u3052\u308b\u3053\u3068\u3002\nModel.group(:asin).order(count_id: :desc).count(:id)\n\n\u3053\u308c\u3060\u3068\u3001\u5b9f\u884c\u3055\u308c\u308bSQL\u306f\nSELECT \n\u3000\u3000COUNT(Table.`id`) AS count_id, asin AS asin \nFROM Table \nWHERE Table.`deleted_at` IS NULL \nGROUP BY Table.`asin` \nORDER BY Table.`count_id` DESC`\n\n\u3068\u306a\u308a\u3001Table.count_id \u304c\u306a\u304f\u3066\u6012\u3089\u308c\u308b\u3002\n\u7d50\u69cb\u4f7f\u3046\u5834\u9762\u306f\u591a\u305d\u3046\u306a\u306e\u3067\u3001\u6b8b\u3057\u3066\u304a\u304f\u3002\n\u4ee5\u4e0b\u306e\u30c6\u30fc\u30d6\u30eb\u69cb\u9020\u304b\u3089\u3001ASIN\u3067\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001count\u3092\u53d6\u308b\u3002\n\n| id | ASIN |\n|:-:|:-:|\n| 1  | 1111111111  |\n| 2  | 2222222222  |\n| 3  | 3333333333  |\n| 4  | 2222222222  |\n\n```\n Model.group(:asin).count(:id)\n```\n\u4e0a\u8a18\u306e\u5b9f\u884c\u7d50\u679c\n\n```\n{\u0010\"1111111111\" => 1,\n\"2222222222\" => 2,\n\"3333333333\" => 1,\n}\n```\n\n\u3053\u308c\u3092\u3001count\u7d50\u679c\u306e\u964d\u9806\u306b\u4e26\u3079\u308b\u3002\n\n```\nModel.group(:asin).order('count_id desc').count(:id)\n```\n```\n{\u0010\"2222222222\" => 2,\n\"1111111111\" => 1,\n\"3333333333\" => 1,\n}\n```\n\u3053\u308c\u3067\u6c42\u3081\u308b\u7d50\u679c\u304c\u53d6\u308c\u305f\u3002\n\n\u30dd\u30a4\u30f3\u30c8\u306f\u3001\u6700\u521d\u306e\u5b9f\u884c\u7d50\u679c\u306e\u30ed\u30b0\u304b\u3089\u3001count_id\u3068\u3044\u3046\u5225\u540d\u304c\u3064\u3051\u3089\u308c\u308b\u306e\u3067\u3001\n\u305d\u308c\u3092order\u306b\u6307\u5b9a\u3059\u308b\u3002\n\u307e\u305f\u3001\u6307\u5b9a\u306e\u969b\u306b\u306f\u6587\u5b57\u5217\u3067\u6e21\u3057\u3066\u3042\u3052\u308b\u3053\u3068\u3002\n\n```\nModel.group(:asin).order(count_id: :desc).count(:id)\n```\n\n\u3053\u308c\u3060\u3068\u3001\u5b9f\u884c\u3055\u308c\u308bSQL\u306f\n\n```\nSELECT \n\u3000\u3000COUNT(Table.`id`) AS count_id, asin AS asin \nFROM Table \nWHERE Table.`deleted_at` IS NULL \nGROUP BY Table.`asin` \nORDER BY Table.`count_id` DESC`\n```\n\n\u3068\u306a\u308a\u3001Table.`count_id` \u304c\u306a\u304f\u3066\u6012\u3089\u308c\u308b\u3002\n\n\u7d50\u69cb\u4f7f\u3046\u5834\u9762\u306f\u591a\u305d\u3046\u306a\u306e\u3067\u3001\u6b8b\u3057\u3066\u304a\u304f\u3002\n", "tags": ["RubyOnRails", "ActiveRecord"]}