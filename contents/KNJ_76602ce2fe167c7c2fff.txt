{"tags": ["Goutte3.1", "PHP7.0.5"], "context": "FriendsOfPHP/Goutte: Goutte, a simple PHP Web Scraper\n\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u30c4\u30fc\u30eb\u3068\u3057\u3066\u6709\u540d\u306aGoutte\u3067\u30c6\u30b9\u30c8\u7528\u30af\u30ed\u30fc\u30e9\u30fc\u4f5c\u3063\u3066\u3044\u3066\u5c11\u3057\u5f15\u3063\u304b\u304b\u3063\u305f\u3053\u3068\u3067\u3059\u3002\n\nPHP 7.0.5\nGoutte 3.1\n\n\n\u554f\u984c\u70b9\n\u3082\u3057\u304b\u3057\u305f\u3089\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3088\u3063\u3066\u7570\u306a\u308b\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u30cd\u30c3\u30c8\u3067\u62fe\u3063\u305f\u60c5\u5831\u3067\u4e0b\u8a18\u306e\u3088\u3046\u306b\u3057\u3066UA\u306e\u5909\u66f4\u3092\u8a66\u307f\u305f\u3068\u3053\u308d\u3001\u3061\u3087\u3063\u3068\u3057\u305f\u4e0d\u5177\u5408\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n$client = new Client();\n$client->setHeader('User-Agent', 'MyUserAgent')->request('GET', 'http://localhost');\n\n\u3053\u308c\u3060\u3068\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5074\u3067\u306f\u5909\u66f4\u3057\u305fUA\u3067\u3042\u308bMyUserAgent\u304c\u53d6\u308c\u307e\u3059\u304c\u3001Web\u30b5\u30fc\u30d0\u30fc\uff08nginx\uff09\u5074\u306e\u30ed\u30b0\u304cSymfony2 BrowserKit\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u691c\u8a3c\nSymfony2 BrowserKit\u3067\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u691c\u7d22\u3059\u308b\u3068\u3001\u8a72\u5f53\u7b87\u6240\u304c\u898b\u5f53\u305f\u308a\u307e\u3059\u3002\nsymfony/Client.php at 3.0 \u00b7 symfony/symfony\n\nsymfony/src/Symfony/Component/BrowserKit/Client.php\n/**\n * Sets server parameters.\n *\n * @param array $server An array of server parameters\n */\npublic function setServerParameters(array $server)\n{\n    $this->server = array_merge(array(\n        'HTTP_USER_AGENT' => 'Symfony2 BrowserKit',\n    ), $server);\n}\n\n\nClient\u751f\u6210\u6642\u306b\u3053\u308c\u306b\u3088\u3063\u3066\u521d\u671f\u5024\u304c\u30bb\u30c3\u30c8\u3055\u308c\u3001\u3069\u3046\u3084\u3089setHeader\u3067\u306f\u4e0a\u66f8\u304d\u3055\u308c\u306a\u3044\u6a21\u69d8\u3067\u3059\u3002\n\n\u89e3\u6c7a\u7b56\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u5f15\u6570\u306b\u6e21\u3059\u65b9\u6cd5\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u79c1\u306f\u983b\u7e41\u306bUA\u3092\u5207\u308a\u63db\u3048\u3066\u4f7f\u3046\u306e\u3067\u3001UA\u30ea\u30b9\u30c8\u3092\u7528\u610f\u3057setUserAgent\u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u3092\u751f\u3084\u3057\u3066\u6271\u3044\u3084\u3059\u304f\u3057\u307e\u3057\u305f\u3002\n\nMyClient.php\n<?php\n\n/**\n * Class MyClient\n *\n * HTTP\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\n */\nclass MyClient extends \\Goutte\\Client\n{\n    /**\n     * @var array $ua  \u30e6\u30fc\u30b6\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u30ea\u30b9\u30c8\n     */\n    protected $ua = [\n        'pc.chrome' => 'Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.110 Safari/537.36',\n        'sp.safari' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1',\n        'bot.google' => 'Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)',\n    ];\n\n    /**\n     * \u30e6\u30fc\u30b6\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u5207\u308a\u66ff\u3048\u308b\n     *\n     * @param  string  $platform\n     * @return MyClient\n     */\n    public function setUserAgent(string $platform)\n    {\n        $this->setServerParameters(['HTTP_USER_AGENT' => $this->ua[$platform]]);\n\n        return $this;\n    }\n}\n\n\n\u4f7f\u3044\u65b9:\n$client = new MyClient();\n$client->setUserAgent('pc.chrome')->request('GET', 'http://localhost');\n\n\u3053\u308c\u3067\u554f\u984c\u306a\u304f\u3067\u304d\u307e\u3057\u305f\u3002\n[FriendsOfPHP/Goutte: Goutte, a simple PHP Web Scraper](https://github.com/FriendsOfPHP/Goutte)\n\n\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u30c4\u30fc\u30eb\u3068\u3057\u3066\u6709\u540d\u306aGoutte\u3067\u30c6\u30b9\u30c8\u7528\u30af\u30ed\u30fc\u30e9\u30fc\u4f5c\u3063\u3066\u3044\u3066\u5c11\u3057\u5f15\u3063\u304b\u304b\u3063\u305f\u3053\u3068\u3067\u3059\u3002\n\n- PHP 7.0.5\n- Goutte 3.1\n\n## \u554f\u984c\u70b9\n\n\u3082\u3057\u304b\u3057\u305f\u3089\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3088\u3063\u3066\u7570\u306a\u308b\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u30cd\u30c3\u30c8\u3067\u62fe\u3063\u305f\u60c5\u5831\u3067\u4e0b\u8a18\u306e\u3088\u3046\u306b\u3057\u3066UA\u306e\u5909\u66f4\u3092\u8a66\u307f\u305f\u3068\u3053\u308d\u3001\u3061\u3087\u3063\u3068\u3057\u305f\u4e0d\u5177\u5408\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\n```php\n$client = new Client();\n$client->setHeader('User-Agent', 'MyUserAgent')->request('GET', 'http://localhost');\n```\n\n\u3053\u308c\u3060\u3068\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5074\u3067\u306f\u5909\u66f4\u3057\u305fUA\u3067\u3042\u308b`MyUserAgent`\u304c\u53d6\u308c\u307e\u3059\u304c\u3001Web\u30b5\u30fc\u30d0\u30fc\uff08nginx\uff09\u5074\u306e\u30ed\u30b0\u304c`Symfony2 BrowserKit`\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n## \u691c\u8a3c\n\n`Symfony2 BrowserKit`\u3067\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u691c\u7d22\u3059\u308b\u3068\u3001\u8a72\u5f53\u7b87\u6240\u304c\u898b\u5f53\u305f\u308a\u307e\u3059\u3002\n\n[symfony/Client.php at 3.0 \u00b7 symfony/symfony](https://github.com/symfony/symfony/blob/3.0/src/Symfony/Component/BrowserKit/Client.php)\n\n```php:symfony/src/Symfony/Component/BrowserKit/Client.php \n/**\n * Sets server parameters.\n *\n * @param array $server An array of server parameters\n */\npublic function setServerParameters(array $server)\n{\n    $this->server = array_merge(array(\n        'HTTP_USER_AGENT' => 'Symfony2 BrowserKit',\n    ), $server);\n}\n```\n\n`Client`\u751f\u6210\u6642\u306b\u3053\u308c\u306b\u3088\u3063\u3066\u521d\u671f\u5024\u304c\u30bb\u30c3\u30c8\u3055\u308c\u3001\u3069\u3046\u3084\u3089`setHeader`\u3067\u306f\u4e0a\u66f8\u304d\u3055\u308c\u306a\u3044\u6a21\u69d8\u3067\u3059\u3002\n\n## \u89e3\u6c7a\u7b56\n\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u5f15\u6570\u306b\u6e21\u3059\u65b9\u6cd5\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u79c1\u306f\u983b\u7e41\u306bUA\u3092\u5207\u308a\u63db\u3048\u3066\u4f7f\u3046\u306e\u3067\u3001UA\u30ea\u30b9\u30c8\u3092\u7528\u610f\u3057`setUserAgent`\u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u3092\u751f\u3084\u3057\u3066\u6271\u3044\u3084\u3059\u304f\u3057\u307e\u3057\u305f\u3002\n\n```php:MyClient.php\n<?php\n\n/**\n * Class MyClient\n *\n * HTTP\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\n */\nclass MyClient extends \\Goutte\\Client\n{\n    /**\n     * @var array $ua  \u30e6\u30fc\u30b6\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u30ea\u30b9\u30c8\n     */\n    protected $ua = [\n        'pc.chrome' => 'Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.110 Safari/537.36',\n        'sp.safari' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1',\n        'bot.google' => 'Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)',\n    ];\n\n    /**\n     * \u30e6\u30fc\u30b6\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u5207\u308a\u66ff\u3048\u308b\n     *\n     * @param  string  $platform\n     * @return MyClient\n     */\n    public function setUserAgent(string $platform)\n    {\n        $this->setServerParameters(['HTTP_USER_AGENT' => $this->ua[$platform]]);\n\n        return $this;\n    }\n}\n```\n\n\u4f7f\u3044\u65b9:\n\n```php\n$client = new MyClient();\n$client->setUserAgent('pc.chrome')->request('GET', 'http://localhost');\n```\n\n\u3053\u308c\u3067\u554f\u984c\u306a\u304f\u3067\u304d\u307e\u3057\u305f\u3002\n"}