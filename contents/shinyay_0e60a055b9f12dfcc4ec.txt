{"context": "\n\n\u6982\u8981\nDatabase Cloud Service\u3084Java Cloud Service\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30fb\u30d9\u30fc\u30b9(PSM CLI)\u3067\u4f5c\u6210\u3092\u884c\u3044\u307e\u3057\u305f\u3002\n\nOracle Cloud\u306e\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30fb\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9(CLI)\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u305f\nDatabase Cloud Service\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092PSM CLI\u3067\u4f5c\u6210\u3057\u3066\u307f\u305f\nJava Cloud Service\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092PSM CLI\u3067\u4f5c\u6210\u3057\u3066\u307f\u305f\nJava Cloud Service\u306bWebLogic \u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u30fb\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092PSM CLI\u3067\u4f5c\u6210\u3057\u3066\u307f\u305f\n\n\u305d\u308c\u305e\u308c\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3059\u308b\u6642\u306b\u306f\u3001\u305d\u308c\u305e\u308c\u306ePSM CLI\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3057\u3066\u3001\u305d\u308c\u305e\u308c\u306eJSON\u30d5\u30a1\u30a4\u30eb\u3092\u5229\u7528\u3057\u307e\u3057\u305f\u3002\n\n\n\npsm dbcs\u30b3\u30de\u30f3\u30c9\u3067Database Cloud Service\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3068\u305d\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u7528\u306eStorage Cloud Service\u4e0a\u306b\u30b3\u30f3\u30c6\u30ca\u306e\u4f5c\u6210\n\npsm jcs\u30b3\u30de\u30f3\u30c9\u3067Java Cloud Service\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3068\u305d\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u7528\u306eStorage Cloud Service\u4e0a\u306b\u30b3\u30f3\u30c6\u30ca\u306e\u4f5c\u6210\u3001\u305d\u3057\u3066Database Cloud Service\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3078\u306e\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u4f5c\u6210\n\n\u3053\u306e\u3088\u3046\u306b\u305d\u308c\u305e\u308c\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u751f\u6210\u30b3\u30de\u30f3\u30c9\u3067\u305d\u308c\u305e\u308c\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u69cb\u6210\u30da\u30a4\u30ed\u30fc\u30c9(JSON\u30d5\u30a1\u30a4\u30eb)\u3092\u4f5c\u6210\u3057\u3066\u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\n\u307e\u305f\u3001psm jcs\u3067Java Cloud Service \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3059\u308b\u524d\u63d0\u3068\u3057\u3066\u3001\u5fc5\u305aDatabase Cloud Service\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4e8b\u524d\u306b\u4f5c\u6210\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u305d\u306e\u305f\u3081\u3001psm dbcs\u3084\u3001\u30d6\u30e9\u30a6\u30b6\u30d9\u30fc\u30b9GUI\u306b\u3088\u308a\u5225\u9014\u4f5c\u6210\u64cd\u4f5c\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\u65e2\u306bDB\u74b0\u5883\u3092\u69cb\u6210\u6e08\u307f\u306e\u5834\u5408\u306f\u3001\u69cb\u6210\u6e08\u307fDB\u3092\u5229\u7528\u3067\u304d\u308b\u306e\u3067psm jcs\u306e\u307f\u3067\u6e08\u307f\u307e\u3059\u3002\u4e00\u65b9\u3067\u3001\u521d\u3081\u3066Java Cloud Service\u74b0\u5883\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u306f\u300cStorage Cloud Service\u300d\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u7528\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u6210\u3057\u305f\u5f8c\u3001\u300cDatabase Cloud Service\u300d\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u3001\u300cJava Cloud Serive\u300d\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3059\u308b\u3068\u3044\u3046\u624b\u9806\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u306e\u3088\u3046\u306b\u3001Oracle Cloud Service\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u3088\u3063\u3066\u306f\u3001\u4f9d\u5b58\u95a2\u4fc2\u304c\u3042\u308a\u524d\u63d0\u3068\u306a\u308bOracle Cloud Serivice\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u306a\u3044\u3068\u4f5c\u6210\u3067\u304d\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3053\u306e\u3088\u3046\u306a\u4f9d\u5b58\u95a2\u4fc2\u3082\u8003\u616e\u3057\u3066Orace Cloud Service\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u69cb\u6210\u30d1\u30bf\u30fc\u30f3\u3068\u3057\u3066\u74b0\u5883\u3092\u4f5c\u6210\u3059\u308b\u65b9\u6cd5\u304cOracle Cloud Stack Manager\u3067\u3059\u3002\n\nOracle Cloud Stack Manager\nOracle Cloud Sack Manager\u3068\u306f\u3001\u8907\u6570\u306eOracle Cloud Service\u3092Cloud Stack\u3068\u3044\u3046\u5358\u4f4d\u306b\u307e\u3068\u3081\u3066\u7ba1\u7406\u3059\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002\n\u4f8b\u3048\u3070\u3001JCS\u30a4\u30f3\u30b9\u30bf\u30f3\u30b91\u3064\u306b\u5bfe\u3057\u3066\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u4f7f\u7528\u3059\u308bDB\u3092\u5206\u96e2\u3059\u308b\u3088\u3046\u306bDBCS\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30922\u3064\u69cb\u6210\u3059\u308b\u3001\u3068\u3044\u3046\u3088\u3046\u306a\u30d1\u30bf\u30fc\u30f3\u304c\u3042\u308b\u3068\u3057\u307e\u3059\u3002\n\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u3001\u7d71\u5408\u3057\u305f\u8907\u6570\u306eOracle Cloud Service\u30921\u3064\u306eCloud Stack\u3068\u3057\u3066\u53d6\u308a\u6271\u3044\u307e\u3059\u3002\n\n\u3053\u306eCloud Sack\u306fTemplate\u304b\u3089\u751f\u6210\u3057\u307e\u3059\u3002\nTemplate\u306fYAML\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nCloud Srack Template\nTemplate\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u5185\u5bb9\u304c\u542b\u307e\u308c\u307e\u3059\u3002\n\n\n\n\u69cb\u6210\u8981\u7d20\n\u5185\u5bb9\n\n\n\n\nResource\nOracle Cloud Service\u304c\u63d0\u4f9b\u3059\u308b\u30af\u30e9\u30a6\u30c9\u30fb\u30b5\u30fc\u30d3\u30b9\n\n\nParameter\nResource\u3092\u69cb\u6210\u3059\u308b\u8981\u7d20(\u30e6\u30fc\u30b6\u304c\u9759\u7684\u306b\u8a2d\u5b9a)\n\n\nAttribute\nResource\u3092\u69cb\u6210\u3059\u308b\u8981\u7d20(\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u4f5c\u6210\u6642\u306b\u52d5\u7684\u306b\u8a2d\u5b9a)\n\n\n\nYAML\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u4f5c\u6210\u3057\u307e\u3059\u304c\u3001\u4e0a\u8a18\u5185\u5bb9\u3092\u8e0f\u307e\u3048\u305f\u8a18\u8f09\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n---\n  Template\u5b9a\u7fa9\n    Template Parameters (Optional)\n    Resources\n    Resource\u5b9a\u7fa9\n      Resource Parameters\n    Resource\u5b9a\u7fa9\n      Resource Parameters\n    Template Attributes (Optional)\n\nYAML\u306e\u524d\u534a\u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u5909\u6570\u306e\u5c5e\u6027\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u5b9a\u7fa9\u3057\u305f\u5909\u6570\u3092\u5b9f\u884c\u6642\u306b\u30b3\u30de\u30f3\u30c9\u5f15\u6570\u3068\u3057\u3066\u5272\u308a\u5f53\u3066\u307e\u3059\u3002\nYAML\u306e\u5f8c\u534a\u3067\u306f\u30ea\u30bd\u30fc\u30b9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\u30ea\u30bd\u30fc\u30b9\u3068\u306f\u3001\u4f8b\u3048\u3070Java Clous Service\u306e\u3088\u3046\u306aOracle Cloud Service\u306e\u63d0\u4f9b\u3059\u308b\u30af\u30e9\u30a6\u30c9\u30fb\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\nPSM CLI\u3092\u4f7f\u7528\u3057\u305f\u969b\u306b\u5b9a\u7fa9\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u69cb\u6210\u30da\u30a4\u30ed\u30fc\u30c9JSON\u30d5\u30a1\u30a4\u30eb\u306e\u3088\u3046\u306b\u5909\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u5c5e\u6027\u5024\u306f\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u5185\u5bb9\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\ndepends_on\u3067\u5b9a\u7fa9\u3059\u308b\u5c5e\u6027\u304c\u3001Resource\u306b\u5bfe\u3059\u308b\u4f9d\u5b58\u95a2\u4fc2\u3067\u3059\u3002\n\u3053\u306e\u4f9d\u5b58\u95a2\u4fc2\u3067\u6307\u5b9a\u3055\u308c\u3066\u3044\u308bResource\u304c\u5148\u306b\u4f5c\u6210\u3055\u308c\u308b\u3088\u3046\u306b\u52d5\u4f5c\u3057\u307e\u3059\u3002\n\nCloud Stack Manager \u4f7f\u7528\u65b9\u6cd5\u6982\u8981\nCloud Stack Manager\u306f\u3001\u5927\u304d\u304f\u5206\u3051\u3066\uff12\u3064\u306e\u64cd\u4f5c\u304c\u3042\u308a\u307e\u3059\u3001\n\nCloud Template\u306e\u7ba1\u7406\nCloud Stack\u306e\u7ba1\u7406\n\n\nCloud Template\u306e\u7ba1\u7406\nPSM CLI\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\n\nPSM CLI\u30b3\u30de\u30f3\u30c9\n\u5185\u5bb9\n\n\n\n\npsm stack validate-template\nCloud Template YAML\u30d5\u30a1\u30a4\u30eb\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u4e8b\u524d\u59a5\u5f53\u6027\u30c1\u30a7\u30c3\u30af\n\n\npsm stack import-template\nCloud Template\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\n\n\npsm stack list-templates\n\u30a4\u30f3\u30dd\u30fc\u30c8\u6e08\u307f\u306eCloud Template\u4e00\u89a7\u8868\u793a\n\n\npsm stack describe-template\n\u30a4\u30f3\u30dd\u30fc\u30c8\u6e08\u307f\u306eCloud Template\u8a73\u7d30\u8868\u793a\n\n\npsm stack export-template\nCloud Template\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\n\n\npsm stack delete-template\n\u30a4\u30f3\u30dd\u30fc\u30c8\u6e08\u307fCloud Template\u306e\u524a\u9664\n\n\n\n\n1. \u59a5\u5f53\u6027\u30c1\u30a7\u30c3\u30af\nCloud Templatet\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u306b\u306f\u3001\u4e8b\u524d\u306b\u59a5\u5f53\u6027\u78ba\u8a8d\u3092\u884c\u3046\u5fc5\u7528\u304c\u3042\u308a\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u30fb\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\npsm stack validate-template -f filePath -p param1:value1 param2:value2 ... paramN:valueN\n\n\n\n-f: Stack Template YAML\u30d5\u30a1\u30a4\u30eb\u3078\u306e\u30d1\u30b9\n\n\n2. \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\nCloud Template\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u30fb\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\npsm stack import-template -f filePath \n\n\n3. \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u78ba\u8a8d\n\u30a4\u30f3\u30dd\u30fc\u30c8\u3067\u304d\u305f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002\npsm stack list-templates\n\n\nCloud Stack\u306e\u7ba1\u7406\nPSM CLI\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\n\nPSM CLI\u30b3\u30de\u30f3\u30c9\n\u5185\u5bb9\n\n\n\n\npsm stack create\nCloud Stack\u3092\u4f5c\u6210\n\n\npsm stack list\nCloud Stack\u306e\u4e00\u89a7\u8868\u793a\n\n\npsm stack describe\nCloud Stack\u306e\u8a73\u7d30\u8868\u793a\n\n\npsm stack delete\nCloud Stack\u306e\u524a\u9664\n\n\npsm stack operation-status\n\u4f5c\u6210\u4e2d\u306e\u72b6\u6cc1\u8868\u793a\n\n\n\n\nCloud Stack\u306e\u4f5c\u6210\n\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u305fCloud Template\u3092\u6307\u5b9a\u3057\u3066\u3001Cloud Template\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\npsm stack create -n name -d description -t template -f RETAIN|ROLLBACK -p param1:value1 param2:value2 ... paramN:valueN\n\n\n\n-n: Cloud Stack\u540d\n\n-t: Clout Template\u540d\n\n-f: \u5931\u6557\u6642\u306e\u6319\u52d5\n\n\nRETAIN: \u7dad\u6301\nROLLBACK: \u30ed\u30fc\u30eb\u30d0\u30c3\u30af\n\n\n\n\nCloud Stack\u4f5c\u6210\u4f8b\nCloud Stack\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\n\u69cb\u6210\u306f\u30b7\u30f3\u30d7\u30eb\u306bJCS\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3068DBCS\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30921\u3064\u305a\u3064\u7528\u610f\u3057\u3001\u305d\u308c\u305e\u308c\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u7528\u30b3\u30f3\u30c6\u30ca\u3092\u69cb\u6210\u3059\u308bCloud Stack\u3068\u3057\u307e\u3059\u3002\n\n\nStack Template \u4f5c\u6210\u4f8b\n\u4ee5\u4e0b\u306e\u3088\u3046\u306aStack Template\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\nJCSandDBCS.yaml\n\n---\n  template: \n    templateName: JCSandDBCS\n    templateVersion: 1.0.1\n    templateDescription: Stack template for a Weblogic 12.2 installation against an Oracle database 12.1 with cloud backup.\n    parameters: \n      wlAdminUser: \n        label: Weblogic Admin username\n        description: Weblogic Admin username\n        type: String\n        default: weblogic\n      wlAdminPwd: \n        label: Weblogic Admin password\n        description: Weblogic Admin console password\n        type: String\n        mandatory: true\n        sensitive: true\n      dbPwd: \n        label: Database access password\n        description: Database access password\n        type: String\n        mandatory: true\n        sensitive: true\n      publicKeyText: \n        label: Public key text\n        description: Public key text for accessing the provisioned vms\n        type: String\n        mandatory: true\n        sensitive: true\n      backupStorageContainer: \n        label: Backup container\n        description: Eg., Storage-IDDomain/Container_Stack\n        type: String\n        mandatory: true\n      cloudStorageUser: \n        label: Cloud Storage user name\n        description: Storage account username\n        type: String\n        mandatory: true\n      cloudStoragePassword: \n        label: Cloud Storage password\n        description: Storage account password\n        type: String\n        mandatory: true\n        sensitive: true\n      subscriptionType: \n        label: Subscription type\n        description: The subscription type\n        type: String\n        default: HOURLY\n      computeShape: \n        label: Default compute shape\n        description: compute shape for each of the resource nodes\n        type: String\n        default: oc3\n    resources: \n      backupContainer: \n        type: OSS.Container\n        parameters: \n          cloudStorageContainer: \n            Fn::GetParam: backupStorageContainer\n          cloudStorageUser: \n            Fn::GetParam: cloudStorageUser\n          cloudStoragePassword: \n            Fn::GetParam: cloudStoragePassword\n      JCS: \n        type: jaas\n        parameters: \n          serviceName: \n            Fn::Join: \n              - \"-\"\n              - \n                - \n                  Fn::GetParam: serviceName\n                - JAAS\n          cloudStorageContainer: \n            Fn::GetParam: backupStorageContainer\n          cloudStorageUser: \n            Fn::GetParam: cloudStorageUser\n          cloudStoragePassword: \n            Fn::GetParam: cloudStoragePassword\n          trial: false\n          parameters: \n            - \n              VMsPublicKey: \n                Fn::GetParam: publicKeyText\n              adminUserName: \n                Fn::GetParam: wlAdminUser\n              adminPassword: \n                Fn::GetParam: wlAdminPwd\n              dbServiceName: \n                Fn::GetAtt: \n                  - DBCS\n                  - serviceName\n              dbaName: sys\n              dbaPassword: \n                Fn::GetParam: dbPwd\n              shape: \n                Fn::GetParam: computeShape\n              type: weblogic\n              version: 12.2.1.0.1\n            - \n              VMsPublicKey: \n                Fn::GetParam: publicKeyText\n              haEnabled: true\n              keepAlive: true\n              shape: \n                Fn::GetParam: computeShape\n              type: OTD\n        depends_on: \n          - backupContainer\n      DBCS: \n        type: dbaas\n        parameters: \n          serviceName: \n            Fn::Join: \n              - \"-\"\n              - \n                - \n                  Fn::GetParam: serviceName\n                - DBAAS\n          version: 12.1.0.2\n          level: PAAS\n          edition: EE\n          subscriptionType: \n            Fn::GetParam: subscriptionType\n          description: DB Service\n          shape: \n            Fn::GetParam: computeShape\n          vmPublicKeyText: \n            Fn::GetParam: publicKeyText\n          parameters: \n            - \n              type: db\n              usableStorage: 15\n              adminPassword: \n                Fn::GetParam: dbPwd\n              sid: ORCL\n              failoverDatabase: no\n              backupDestination: BOTH\n              cloudStorageContainer: \n                Fn::GetParam: backupStorageContainer\n              cloudStorageUser: \n                Fn::GetParam: cloudStorageUser\n              cloudStoragePwd: \n                Fn::GetParam: cloudStoragePassword\n        depends_on: \n          - backupContainer\n\n\n\u59a5\u5f53\u6027\u30c1\u30a7\u30c3\u30af\n$ psm stack validate-template -f ./JCSandDBCS.yaml -p ...\n\n{\n    \"details\":{\n        \"message\":\"Validation completed. No errors found\"\n    }\n}\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\n$ psm stack import-template -f ./JCSandDBCS.yaml\n\n{\n    \"templateName\":\"JCSandDBCS\",\n    \"latestVersion\":\"1.0.1\",\n    \"description\":\"Stack template for a Weblogic 12.2 installation against an Oracle database 12.1 with cloud backup.\",\n    \"createdOn\":\"2016-09-20T06:36:16.006+0000\",\n    \"createdBy\":\"shinyay\",\n    \"links\":[\n        {\n            \"rel\":\"canonical\",\n            \"href\":\"https://psm.europe.oraclecloud.com:443/paas/api/v1.1/instancemgmt/plprivatee/templates/cst/instances/JCSandDBCS\"\n        },\n        {\n            \"rel\":\"self\",\n            \"href\":\"https://psm.europe.oraclecloud.com:443/paas/api/v1.1/instancemgmt/plprivatee/templates/cst/instances\"\n        }\n    ]\n}\n\n\nCloud Stack\u306e\u4f5c\u6210\nAppDev\u3068\u3044\u3046\u540d\u524d\u3067Cloud Stack\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ psm stack create -n AppDev -t JCSandDBCS -p ...\n\n{\n    \"details\":{\n        \"message\":\"Submitted job to create stack [AppDev] in domain [plprivatee].\",\n        \"jobId\":\"2218634\"\n    }\n}\n\n\nCloud Stack\u4f5c\u6210\u78ba\u8a8d\n$ psm stack operation-status -j 2218634\n\n{\n    \"activityLogId\":1120673,\n    \"serviceName\":\"AppDev\",\n    \"serviceType\":\"cloudstack\",\n    \"identityDomain\":\"IDDOMAIN\",\n    \"serviceId\":59390,\n    \"jobId\":2218634,\n    \"startDate\":\"2016-09-20T06:54:11.974+0000\",\n    \"endDate\":\"2016-09-20T07:39:56.394+0000\",\n    \"status\":\"SUCCEED\",\n    \"operationId\":59390,\n    \"operationType\":\"CREATE_SERVICE\",\n    \"summaryMessage\":\"CREATE_SERVICE\",\n    \"authDomain\":\"IDDOMAIN\",\n    \"authUser\":\"shinyay\",\n    \"initiatedBy\":\"USER\",\n    \"messages\":[\n        {\n            \"activityDate\":\"2016-09-20T06:54:11.974+0000\",\n            \"message\":\"Stack creation request accepted\"\n        },\n        {\n            \"activityDate\":\"2016-09-20T06:54:11.981+0000\",\n            \"message\":\"Initializing stack AppDev\"\n        },\n        {\n            \"activityDate\":\"2016-09-20T06:54:12.820+0000\",\n            \"message\":\"Preparing to create service AppDev-DBAAS\"\n        },\n        {\n            \"activityDate\":\"2016-09-20T06:54:18.521+0000\",\n            \"message\":\"Request submitted to create service AppDev-DBAAS\"\n        },\n        {\n            \"activityDate\":\"2016-09-20T07:20:19.399+0000\",\n            \"message\":\"Successfully created service AppDev-DBAAS\"\n        },\n        {\n            \"activityDate\":\"2016-09-20T07:20:19.560+0000\",\n            \"message\":\"Preparing to create service AppDev-JAAS\"\n        },\n        {\n            \"activityDate\":\"2016-09-20T07:20:29.534+0000\",\n            \"message\":\"Request submitted to create service AppDev-JAAS\"\n        },\n        {\n            \"activityDate\":\"2016-09-20T07:39:55.837+0000\",\n            \"message\":\"Successfully created service AppDev-JAAS\"\n        },\n        {\n            \"activityDate\":\"2016-09-20T07:39:56.394+0000\",\n            \"message\":\"Stack AppDev configured\"\n        }\n    ]\n}\n\n\n\u307e\u3068\u3081\nOracle Cloud Stack Manager\u3092\u5229\u7528\u3059\u308b\u3068\u30af\u30e9\u30a6\u30c9\u30fb\u30b5\u30fc\u30d3\u30b9\u5358\u4f4d\u3067\u306f\u306a\u304f\u3001\u30af\u30e9\u30a6\u30c9\u30fb\u30b7\u30b9\u30c6\u30e0\u69cb\u6210\u5358\u4f4d\u3068\u3057\u3066\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u3055\u308c\u305f\u74b0\u5883\u304c\u51fa\u6765\u4e0a\u304c\u308a\u307e\u3059\u3002\u307e\u305f\u3001Stack Template\u306f\u4e00\u5ea6\u4f5c\u6210\u3059\u308b\u3068\u3001\u5225\u306e\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u30fc\u3067\u3082\u518d\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\u3053\u306e\u6a5f\u80fd\u306b\u3088\u308a\u3001Oracle Cloud Service\u4e0a\u3067 Immutable Infrastructure\u3068\u3057\u3066\u3001\u3044\u3064\u3067\u3082\u3001\u3069\u3053\u3067\u3082\u540c\u3058\u74b0\u5883\u3092\u624b\u8efd\u306b\u69cb\u6210\u3059\u308b\u4e8b\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\n# \u6982\u8981\nDatabase Cloud Service\u3084Java Cloud Service\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30fb\u30d9\u30fc\u30b9(PSM CLI)\u3067\u4f5c\u6210\u3092\u884c\u3044\u307e\u3057\u305f\u3002\n\n- [Oracle Cloud\u306e\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30fb\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9(CLI)\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u305f](http://qiita.com/shinyay/items/a3773b37fdbb677e52b1)\n- [Database Cloud Service\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092PSM CLI\u3067\u4f5c\u6210\u3057\u3066\u307f\u305f](http://qiita.com/shinyay/items/e6e0c038090039dabb18)\n- [Java Cloud Service\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092PSM CLI\u3067\u4f5c\u6210\u3057\u3066\u307f\u305f](http://qiita.com/shinyay/items/f106463d656401ced368)\n- [Java Cloud Service\u306bWebLogic \u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u30fb\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092PSM CLI\u3067\u4f5c\u6210\u3057\u3066\u307f\u305f](http://qiita.com/shinyay/items/e20d87de881128d8ecd8)\n\n\u305d\u308c\u305e\u308c\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3059\u308b\u6642\u306b\u306f\u3001\u305d\u308c\u305e\u308c\u306ePSM CLI\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3057\u3066\u3001\u305d\u308c\u305e\u308c\u306eJSON\u30d5\u30a1\u30a4\u30eb\u3092\u5229\u7528\u3057\u307e\u3057\u305f\u3002\n\n![psm-stack_01.png](https://qiita-image-store.s3.amazonaws.com/0/127983/58bc9062-dc1f-c22b-9a0d-5faf538adc4c.png)\n\n1. **psm dbcs**\u30b3\u30de\u30f3\u30c9\u3067Database Cloud Service\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3068\u305d\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u7528\u306eStorage Cloud Service\u4e0a\u306b\u30b3\u30f3\u30c6\u30ca\u306e\u4f5c\u6210\n2. **psm jcs**\u30b3\u30de\u30f3\u30c9\u3067Java Cloud Service\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3068\u305d\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u7528\u306eStorage Cloud Service\u4e0a\u306b\u30b3\u30f3\u30c6\u30ca\u306e\u4f5c\u6210\u3001\u305d\u3057\u3066Database Cloud Service\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3078\u306e\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u4f5c\u6210\n\n\u3053\u306e\u3088\u3046\u306b\u305d\u308c\u305e\u308c\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u751f\u6210\u30b3\u30de\u30f3\u30c9\u3067\u305d\u308c\u305e\u308c\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u69cb\u6210\u30da\u30a4\u30ed\u30fc\u30c9(JSON\u30d5\u30a1\u30a4\u30eb)\u3092\u4f5c\u6210\u3057\u3066\u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\n\n\u307e\u305f\u3001**psm jcs**\u3067Java Cloud Service \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3059\u308b\u524d\u63d0\u3068\u3057\u3066\u3001\u5fc5\u305aDatabase Cloud Service\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4e8b\u524d\u306b\u4f5c\u6210\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u305d\u306e\u305f\u3081\u3001**psm dbcs**\u3084\u3001\u30d6\u30e9\u30a6\u30b6\u30d9\u30fc\u30b9GUI\u306b\u3088\u308a\u5225\u9014\u4f5c\u6210\u64cd\u4f5c\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\u65e2\u306bDB\u74b0\u5883\u3092\u69cb\u6210\u6e08\u307f\u306e\u5834\u5408\u306f\u3001\u69cb\u6210\u6e08\u307fDB\u3092\u5229\u7528\u3067\u304d\u308b\u306e\u3067**psm jcs**\u306e\u307f\u3067\u6e08\u307f\u307e\u3059\u3002\u4e00\u65b9\u3067\u3001\u521d\u3081\u3066Java Cloud Service\u74b0\u5883\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u306f\u300cStorage Cloud Service\u300d\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u7528\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u6210\u3057\u305f\u5f8c\u3001\u300cDatabase Cloud Service\u300d\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u3001\u300cJava Cloud Serive\u300d\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3059\u308b\u3068\u3044\u3046\u624b\u9806\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3053\u306e\u3088\u3046\u306b\u3001Oracle Cloud Service\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u3088\u3063\u3066\u306f\u3001\u4f9d\u5b58\u95a2\u4fc2\u304c\u3042\u308a\u524d\u63d0\u3068\u306a\u308bOracle Cloud Serivice\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u306a\u3044\u3068\u4f5c\u6210\u3067\u304d\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n\n![psm-stack_02.png](https://qiita-image-store.s3.amazonaws.com/0/127983/b0756d42-11e8-7cbe-68f3-cc15ae2992de.png)\n\n\u3053\u306e\u3088\u3046\u306a\u4f9d\u5b58\u95a2\u4fc2\u3082\u8003\u616e\u3057\u3066Orace Cloud Service\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u69cb\u6210\u30d1\u30bf\u30fc\u30f3\u3068\u3057\u3066\u74b0\u5883\u3092\u4f5c\u6210\u3059\u308b\u65b9\u6cd5\u304c**Oracle Cloud Stack Manager**\u3067\u3059\u3002\n\n# Oracle Cloud Stack Manager\nOracle Cloud Sack Manager\u3068\u306f\u3001\u8907\u6570\u306eOracle Cloud Service\u3092**Cloud Stack**\u3068\u3044\u3046\u5358\u4f4d\u306b\u307e\u3068\u3081\u3066\u7ba1\u7406\u3059\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002\n\u4f8b\u3048\u3070\u3001JCS\u30a4\u30f3\u30b9\u30bf\u30f3\u30b91\u3064\u306b\u5bfe\u3057\u3066\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u4f7f\u7528\u3059\u308bDB\u3092\u5206\u96e2\u3059\u308b\u3088\u3046\u306bDBCS\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30922\u3064\u69cb\u6210\u3059\u308b\u3001\u3068\u3044\u3046\u3088\u3046\u306a\u30d1\u30bf\u30fc\u30f3\u304c\u3042\u308b\u3068\u3057\u307e\u3059\u3002\n\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u3001\u7d71\u5408\u3057\u305f\u8907\u6570\u306eOracle Cloud Service\u30921\u3064\u306e**Cloud Stack**\u3068\u3057\u3066\u53d6\u308a\u6271\u3044\u307e\u3059\u3002\n\n![psm-stack_03.png](https://qiita-image-store.s3.amazonaws.com/0/127983/3368cb06-ec2a-b550-1f87-e0625c76f490.png)\n\n\u3053\u306eCloud Sack\u306f**Template**\u304b\u3089\u751f\u6210\u3057\u307e\u3059\u3002\nTemplate\u306fYAML\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n## Cloud Srack Template\nTemplate\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u5185\u5bb9\u304c\u542b\u307e\u308c\u307e\u3059\u3002\n\n|\u69cb\u6210\u8981\u7d20|\u5185\u5bb9|\n|---|---|\n|Resource|Oracle Cloud Service\u304c\u63d0\u4f9b\u3059\u308b\u30af\u30e9\u30a6\u30c9\u30fb\u30b5\u30fc\u30d3\u30b9|\n|Parameter|Resource\u3092\u69cb\u6210\u3059\u308b\u8981\u7d20(\u30e6\u30fc\u30b6\u304c\u9759\u7684\u306b\u8a2d\u5b9a)|\n|Attribute|Resource\u3092\u69cb\u6210\u3059\u308b\u8981\u7d20(\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u4f5c\u6210\u6642\u306b\u52d5\u7684\u306b\u8a2d\u5b9a)|\n\nYAML\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u4f5c\u6210\u3057\u307e\u3059\u304c\u3001\u4e0a\u8a18\u5185\u5bb9\u3092\u8e0f\u307e\u3048\u305f\u8a18\u8f09\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```yaml\n---\n  Template\u5b9a\u7fa9\n    Template Parameters (Optional)\n    Resources\n    Resource\u5b9a\u7fa9\n      Resource Parameters\n    Resource\u5b9a\u7fa9\n      Resource Parameters\n    Template Attributes (Optional)\n```\nYAML\u306e\u524d\u534a\u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u5909\u6570\u306e\u5c5e\u6027\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u5b9a\u7fa9\u3057\u305f\u5909\u6570\u3092\u5b9f\u884c\u6642\u306b\u30b3\u30de\u30f3\u30c9\u5f15\u6570\u3068\u3057\u3066\u5272\u308a\u5f53\u3066\u307e\u3059\u3002\n\nYAML\u306e\u5f8c\u534a\u3067\u306f\u30ea\u30bd\u30fc\u30b9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\u30ea\u30bd\u30fc\u30b9\u3068\u306f\u3001\u4f8b\u3048\u3070Java Clous Service\u306e\u3088\u3046\u306aOracle Cloud Service\u306e\u63d0\u4f9b\u3059\u308b\u30af\u30e9\u30a6\u30c9\u30fb\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\nPSM CLI\u3092\u4f7f\u7528\u3057\u305f\u969b\u306b\u5b9a\u7fa9\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u69cb\u6210\u30da\u30a4\u30ed\u30fc\u30c9JSON\u30d5\u30a1\u30a4\u30eb\u306e\u3088\u3046\u306b\u5909\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u5c5e\u6027\u5024\u306f\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u5185\u5bb9\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n**depends_on**\u3067\u5b9a\u7fa9\u3059\u308b\u5c5e\u6027\u304c\u3001Resource\u306b\u5bfe\u3059\u308b\u4f9d\u5b58\u95a2\u4fc2\u3067\u3059\u3002\n\u3053\u306e\u4f9d\u5b58\u95a2\u4fc2\u3067\u6307\u5b9a\u3055\u308c\u3066\u3044\u308bResource\u304c\u5148\u306b\u4f5c\u6210\u3055\u308c\u308b\u3088\u3046\u306b\u52d5\u4f5c\u3057\u307e\u3059\u3002\n\n## Cloud Stack Manager \u4f7f\u7528\u65b9\u6cd5\u6982\u8981\nCloud Stack Manager\u306f\u3001\u5927\u304d\u304f\u5206\u3051\u3066\uff12\u3064\u306e\u64cd\u4f5c\u304c\u3042\u308a\u307e\u3059\u3001\n\n- Cloud Template\u306e\u7ba1\u7406\n- Cloud Stack\u306e\u7ba1\u7406\n\n### Cloud Template\u306e\u7ba1\u7406\nPSM CLI\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n|PSM CLI\u30b3\u30de\u30f3\u30c9|\u5185\u5bb9|\n|---|---|\n|psm stack validate-template|Cloud Template YAML\u30d5\u30a1\u30a4\u30eb\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u4e8b\u524d\u59a5\u5f53\u6027\u30c1\u30a7\u30c3\u30af|\n|psm stack import-template|Cloud Template\u306e\u30a4\u30f3\u30dd\u30fc\u30c8|\n|psm stack list-templates|\u30a4\u30f3\u30dd\u30fc\u30c8\u6e08\u307f\u306eCloud Template\u4e00\u89a7\u8868\u793a|\n|psm stack describe-template|\u30a4\u30f3\u30dd\u30fc\u30c8\u6e08\u307f\u306eCloud Template\u8a73\u7d30\u8868\u793a|\n|psm stack export-template|Cloud Template\u306e\u30a8\u30af\u30b9\u30dd\u30fc\u30c8|\n|psm stack delete-template|\u30a4\u30f3\u30dd\u30fc\u30c8\u6e08\u307fCloud Template\u306e\u524a\u9664|\n\n#### 1. \u59a5\u5f53\u6027\u30c1\u30a7\u30c3\u30af\nCloud Templatet\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u306b\u306f\u3001\u4e8b\u524d\u306b\u59a5\u5f53\u6027\u78ba\u8a8d\u3092\u884c\u3046\u5fc5\u7528\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\u30fb\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```bash\npsm stack validate-template -f filePath -p param1:value1 param2:value2 ... paramN:valueN\n```\n- **-f**: Stack Template YAML\u30d5\u30a1\u30a4\u30eb\u3078\u306e\u30d1\u30b9\n\n#### 2. \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\nCloud Template\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\u30fb\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```bash\npsm stack import-template -f filePath \n```\n\n#### 3. \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u78ba\u8a8d\n\u30a4\u30f3\u30dd\u30fc\u30c8\u3067\u304d\u305f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash\npsm stack list-templates\n```\n\n### Cloud Stack\u306e\u7ba1\u7406\nPSM CLI\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n|PSM CLI\u30b3\u30de\u30f3\u30c9|\u5185\u5bb9|\n|---|---|\n|psm stack create|Cloud Stack\u3092\u4f5c\u6210|\n|psm stack list|Cloud Stack\u306e\u4e00\u89a7\u8868\u793a|\n|psm stack describe|Cloud Stack\u306e\u8a73\u7d30\u8868\u793a|\n|psm stack delete|Cloud Stack\u306e\u524a\u9664|\n|psm stack operation-status|\u4f5c\u6210\u4e2d\u306e\u72b6\u6cc1\u8868\u793a\n\n#### Cloud Stack\u306e\u4f5c\u6210\n\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u305fCloud Template\u3092\u6307\u5b9a\u3057\u3066\u3001Cloud Template\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bash\npsm stack create -n name -d description -t template -f RETAIN|ROLLBACK -p param1:value1 param2:value2 ... paramN:valueN\n```\n\n- **-n**: Cloud Stack\u540d\n- **-t**: Clout Template\u540d\n- **-f**: \u5931\u6557\u6642\u306e\u6319\u52d5\n    - RETAIN: \u7dad\u6301\n    - ROLLBACK: \u30ed\u30fc\u30eb\u30d0\u30c3\u30af\n\n## Cloud Stack\u4f5c\u6210\u4f8b\nCloud Stack\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\n\u69cb\u6210\u306f\u30b7\u30f3\u30d7\u30eb\u306bJCS\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3068DBCS\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30921\u3064\u305a\u3064\u7528\u610f\u3057\u3001\u305d\u308c\u305e\u308c\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u7528\u30b3\u30f3\u30c6\u30ca\u3092\u69cb\u6210\u3059\u308bCloud Stack\u3068\u3057\u307e\u3059\u3002\n\n![psm-stack_04.png](https://qiita-image-store.s3.amazonaws.com/0/127983/b01e40f7-7d92-0ce5-d582-4dd18412fa48.png)\n\n### Stack Template \u4f5c\u6210\u4f8b\n\u4ee5\u4e0b\u306e\u3088\u3046\u306aStack Template\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\n- JCSandDBCS.yaml\n\n```yaml\n---\n  template: \n    templateName: JCSandDBCS\n    templateVersion: 1.0.1\n    templateDescription: Stack template for a Weblogic 12.2 installation against an Oracle database 12.1 with cloud backup.\n    parameters: \n      wlAdminUser: \n        label: Weblogic Admin username\n        description: Weblogic Admin username\n        type: String\n        default: weblogic\n      wlAdminPwd: \n        label: Weblogic Admin password\n        description: Weblogic Admin console password\n        type: String\n        mandatory: true\n        sensitive: true\n      dbPwd: \n        label: Database access password\n        description: Database access password\n        type: String\n        mandatory: true\n        sensitive: true\n      publicKeyText: \n        label: Public key text\n        description: Public key text for accessing the provisioned vms\n        type: String\n        mandatory: true\n        sensitive: true\n      backupStorageContainer: \n        label: Backup container\n        description: Eg., Storage-IDDomain/Container_Stack\n        type: String\n        mandatory: true\n      cloudStorageUser: \n        label: Cloud Storage user name\n        description: Storage account username\n        type: String\n        mandatory: true\n      cloudStoragePassword: \n        label: Cloud Storage password\n        description: Storage account password\n        type: String\n        mandatory: true\n        sensitive: true\n      subscriptionType: \n        label: Subscription type\n        description: The subscription type\n        type: String\n        default: HOURLY\n      computeShape: \n        label: Default compute shape\n        description: compute shape for each of the resource nodes\n        type: String\n        default: oc3\n    resources: \n      backupContainer: \n        type: OSS.Container\n        parameters: \n          cloudStorageContainer: \n            Fn::GetParam: backupStorageContainer\n          cloudStorageUser: \n            Fn::GetParam: cloudStorageUser\n          cloudStoragePassword: \n            Fn::GetParam: cloudStoragePassword\n      JCS: \n        type: jaas\n        parameters: \n          serviceName: \n            Fn::Join: \n              - \"-\"\n              - \n                - \n                  Fn::GetParam: serviceName\n                - JAAS\n          cloudStorageContainer: \n            Fn::GetParam: backupStorageContainer\n          cloudStorageUser: \n            Fn::GetParam: cloudStorageUser\n          cloudStoragePassword: \n            Fn::GetParam: cloudStoragePassword\n          trial: false\n          parameters: \n            - \n              VMsPublicKey: \n                Fn::GetParam: publicKeyText\n              adminUserName: \n                Fn::GetParam: wlAdminUser\n              adminPassword: \n                Fn::GetParam: wlAdminPwd\n              dbServiceName: \n                Fn::GetAtt: \n                  - DBCS\n                  - serviceName\n              dbaName: sys\n              dbaPassword: \n                Fn::GetParam: dbPwd\n              shape: \n                Fn::GetParam: computeShape\n              type: weblogic\n              version: 12.2.1.0.1\n            - \n              VMsPublicKey: \n                Fn::GetParam: publicKeyText\n              haEnabled: true\n              keepAlive: true\n              shape: \n                Fn::GetParam: computeShape\n              type: OTD\n        depends_on: \n          - backupContainer\n      DBCS: \n        type: dbaas\n        parameters: \n          serviceName: \n            Fn::Join: \n              - \"-\"\n              - \n                - \n                  Fn::GetParam: serviceName\n                - DBAAS\n          version: 12.1.0.2\n          level: PAAS\n          edition: EE\n          subscriptionType: \n            Fn::GetParam: subscriptionType\n          description: DB Service\n          shape: \n            Fn::GetParam: computeShape\n          vmPublicKeyText: \n            Fn::GetParam: publicKeyText\n          parameters: \n            - \n              type: db\n              usableStorage: 15\n              adminPassword: \n                Fn::GetParam: dbPwd\n              sid: ORCL\n              failoverDatabase: no\n              backupDestination: BOTH\n              cloudStorageContainer: \n                Fn::GetParam: backupStorageContainer\n              cloudStorageUser: \n                Fn::GetParam: cloudStorageUser\n              cloudStoragePwd: \n                Fn::GetParam: cloudStoragePassword\n        depends_on: \n          - backupContainer\n```\n\n### \u59a5\u5f53\u6027\u30c1\u30a7\u30c3\u30af\n\n```bash\n$ psm stack validate-template -f ./JCSandDBCS.yaml -p ...\n```\n\n```json\n{\n    \"details\":{\n        \"message\":\"Validation completed. No errors found\"\n    }\n}\n```\n\n### \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\n\n```bash\n$ psm stack import-template -f ./JCSandDBCS.yaml\n```\n\n```json\n{\n    \"templateName\":\"JCSandDBCS\",\n    \"latestVersion\":\"1.0.1\",\n    \"description\":\"Stack template for a Weblogic 12.2 installation against an Oracle database 12.1 with cloud backup.\",\n    \"createdOn\":\"2016-09-20T06:36:16.006+0000\",\n    \"createdBy\":\"shinyay\",\n    \"links\":[\n        {\n            \"rel\":\"canonical\",\n            \"href\":\"https://psm.europe.oraclecloud.com:443/paas/api/v1.1/instancemgmt/plprivatee/templates/cst/instances/JCSandDBCS\"\n        },\n        {\n            \"rel\":\"self\",\n            \"href\":\"https://psm.europe.oraclecloud.com:443/paas/api/v1.1/instancemgmt/plprivatee/templates/cst/instances\"\n        }\n    ]\n}\n```\n\n### Cloud Stack\u306e\u4f5c\u6210\nAppDev\u3068\u3044\u3046\u540d\u524d\u3067Cloud Stack\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bash\n$ psm stack create -n AppDev -t JCSandDBCS -p ...\n```\n\n```yaml\n{\n    \"details\":{\n        \"message\":\"Submitted job to create stack [AppDev] in domain [plprivatee].\",\n        \"jobId\":\"2218634\"\n    }\n}\n```\n\n### Cloud Stack\u4f5c\u6210\u78ba\u8a8d\n```bash\n$ psm stack operation-status -j 2218634\n```\n\n```json\n{\n    \"activityLogId\":1120673,\n    \"serviceName\":\"AppDev\",\n    \"serviceType\":\"cloudstack\",\n    \"identityDomain\":\"IDDOMAIN\",\n    \"serviceId\":59390,\n    \"jobId\":2218634,\n    \"startDate\":\"2016-09-20T06:54:11.974+0000\",\n    \"endDate\":\"2016-09-20T07:39:56.394+0000\",\n    \"status\":\"SUCCEED\",\n    \"operationId\":59390,\n    \"operationType\":\"CREATE_SERVICE\",\n    \"summaryMessage\":\"CREATE_SERVICE\",\n    \"authDomain\":\"IDDOMAIN\",\n    \"authUser\":\"shinyay\",\n    \"initiatedBy\":\"USER\",\n    \"messages\":[\n        {\n            \"activityDate\":\"2016-09-20T06:54:11.974+0000\",\n            \"message\":\"Stack creation request accepted\"\n        },\n        {\n            \"activityDate\":\"2016-09-20T06:54:11.981+0000\",\n            \"message\":\"Initializing stack AppDev\"\n        },\n        {\n            \"activityDate\":\"2016-09-20T06:54:12.820+0000\",\n            \"message\":\"Preparing to create service AppDev-DBAAS\"\n        },\n        {\n            \"activityDate\":\"2016-09-20T06:54:18.521+0000\",\n            \"message\":\"Request submitted to create service AppDev-DBAAS\"\n        },\n        {\n            \"activityDate\":\"2016-09-20T07:20:19.399+0000\",\n            \"message\":\"Successfully created service AppDev-DBAAS\"\n        },\n        {\n            \"activityDate\":\"2016-09-20T07:20:19.560+0000\",\n            \"message\":\"Preparing to create service AppDev-JAAS\"\n        },\n        {\n            \"activityDate\":\"2016-09-20T07:20:29.534+0000\",\n            \"message\":\"Request submitted to create service AppDev-JAAS\"\n        },\n        {\n            \"activityDate\":\"2016-09-20T07:39:55.837+0000\",\n            \"message\":\"Successfully created service AppDev-JAAS\"\n        },\n        {\n            \"activityDate\":\"2016-09-20T07:39:56.394+0000\",\n            \"message\":\"Stack AppDev configured\"\n        }\n    ]\n}\n```\n\n# \u307e\u3068\u3081\nOracle Cloud Stack Manager\u3092\u5229\u7528\u3059\u308b\u3068\u30af\u30e9\u30a6\u30c9\u30fb\u30b5\u30fc\u30d3\u30b9\u5358\u4f4d\u3067\u306f\u306a\u304f\u3001\u30af\u30e9\u30a6\u30c9\u30fb\u30b7\u30b9\u30c6\u30e0\u69cb\u6210\u5358\u4f4d\u3068\u3057\u3066\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u3055\u308c\u305f\u74b0\u5883\u304c\u51fa\u6765\u4e0a\u304c\u308a\u307e\u3059\u3002\u307e\u305f\u3001Stack Template\u306f\u4e00\u5ea6\u4f5c\u6210\u3059\u308b\u3068\u3001\u5225\u306e\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u30fc\u3067\u3082\u518d\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\u3053\u306e\u6a5f\u80fd\u306b\u3088\u308a\u3001Oracle Cloud Service\u4e0a\u3067 Immutable Infrastructure\u3068\u3057\u3066\u3001\u3044\u3064\u3067\u3082\u3001\u3069\u3053\u3067\u3082\u540c\u3058\u74b0\u5883\u3092\u624b\u8efd\u306b\u69cb\u6210\u3059\u308b\u4e8b\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n", "tags": ["oracle", "Cloud", "cli", "Weblogic", "Database"]}