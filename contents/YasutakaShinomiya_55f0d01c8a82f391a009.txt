{"context": "\u7686\u3055\u3093\u3053\u3093\u306b\u3061\u306f\uff01\n\u5f0a\u793e\u306fkintone\u5c02\u696d\u306eSIer\u3068\u3057\u3066\u6d3b\u52d5\u3057\u3001\u79c1\u3082\u300cMr.kintone\u300d\u306a\u3069\u3068\u547c\u3093\u3067\u9802\u3044\u3066\u304a\u308a\u307e\u3059\u304c\u3001\u4eca\u65e5\u306f\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306e\u8a71\u3092\u3057\u307e\u3059w\n\u3068\u3044\u3063\u3066\u3082\u3053\u3053\u306fkintone Advent Calendar\u3067\u3059\u306e\u3067\u3001kintone\u306e\u8a71\u3082\u5165\u308c\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u3067\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3068kintone\u306e\u9023\u643a\u306b\u3064\u3044\u3066\u3061\u3087\u3063\u3068\u66f8\u3044\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u305d\u3082\u305d\u3082\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3063\u3066\u4f55\uff1f\n\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3063\u3066\u3054\u5b58\u77e5\u3067\u3059\u304b\uff1f\n\u7c21\u5358\u306b\u3044\u3046\u3068\u30e1\u30fc\u30eb\u3092\u5171\u6709\u3067\u7ba1\u7406\u3067\u304d\u308b\u30b7\u30b9\u30c6\u30e0\u3067\u3001\u4f8b\u3048\u3070\u4f1a\u793e\u306e\u304a\u554f\u3044\u5408\u308f\u305b\u30da\u30fc\u30b8\u304b\u3089\u98db\u3093\u3067\u304f\u308b\u30e1\u30fc\u30eb\u3067\u3042\u3063\u305f\u308a\u3001\u88fd\u54c1\u306e\u554f\u5408\u305b\u30e1\u30fc\u30eb\u306a\u3069\u3092\u5171\u6709\u30e1\u30fc\u30eb\u3092\u8907\u6570\u306e\u62c5\u5f53\u8005\u3067\u7c21\u5358\u306b\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nhttps://mailwise.cybozu.com/\n\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u53d7\u4fe1\u3057\u305f\u30e1\u30fc\u30eb\u306b\u5bfe\u3059\u308b\u5bfe\u5fdc\u6f0f\u308c\u3067\u3042\u3063\u305f\u308a\u4e8c\u91cd\u5bfe\u5fdc\u3068\u3044\u3063\u305f\u3053\u3068\u304c\u9632\u3050\u3053\u3068\u304c\u3067\u304d\u3001\u307e\u305f\u9867\u5ba2\u7ba1\u7406\u3082\u3067\u304d\u308b\u306e\u3067\u540c\u3058\u4eba\u304b\u3089\u9001\u3089\u308c\u3066\u304d\u305f\u30e1\u30fc\u30eb\u3068\u305d\u306e\u5bfe\u5fdc\u3092\u5c65\u6b74\u3068\u3057\u3066\u7c21\u5358\u306b\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u305d\u308c\u4ee5\u5916\u306b\u3082\u96fb\u8a71\u5c65\u6b74\u3067\u3042\u3063\u305f\u308a\u8a2a\u554f\u5c65\u6b74\u3067\u3042\u3063\u305f\u308a\u3068\u3044\u3063\u305f\u30e1\u30fc\u30eb\u5bfe\u5fdc\u4ee5\u5916\u306e\u30b3\u30f3\u30bf\u30af\u30c8\u5c65\u6b74\u3082\u7ba1\u7406\u3067\u304d\u308b\u305f\u3081\u3061\u3087\u3063\u3068\u3057\u305fCRM\u3068\u3057\u3066\u3082\u6d3b\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3053\u306e\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306fkintone\u3068\u540c\u3058cybozu.com\u3068\u3057\u3066\u30af\u30e9\u30a6\u30c9\u7248\u3067\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001kintone\u3068\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u4e21\u65b9\u3092\u5c0e\u5165\u3057\u3066\u3082\u30e6\u30fc\u30b6\u30fc\u7ba1\u7406\u306f\u4e00\u5143\u5316\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u5229\u7528\u8005\u3082\u4e00\u5ea6\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3057\u307e\u3048\u3070\u3001\u30dc\u30bf\u30f3\u4e00\u3064\u3067kintone\u3084\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3092\u884c\u304d\u6765\u3067\u304d\u3061\u3083\u3044\u307e\u3059\u3002\n\n\u3061\u306a\u307f\u306b\u30aa\u30f3\u30d7\u30ec\u7248\u3082\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u30af\u30e9\u30a6\u30c9\u5c0e\u5165\u304cNG\u306e\u4f1a\u793e\u3055\u3093\u3067\u3082\u5c0e\u5165\u3067\u304d\u307e\u3059\uff01\n\u3068\u3001\u3053\u306e\u307e\u307e\u3067\u306f\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306e\u7d39\u4ecb\u3060\u3051\u3067\u8a18\u4e8b\u304c\u7d42\u308f\u3063\u3066\u3057\u307e\u3044\u3001\u300cMr.\u30e1\u30eb\u30ef\u30a4\u300d\u3092\u540d\u4e57\u3089\u306a\u3044\u3068\u3044\u3051\u306a\u304f\u306a\u308a\u305d\u3046\u306a\u306e\u3067\u3001\u305d\u308d\u305d\u308dkintone\u9023\u643a\u306e\u304a\u8a71\u3092\u30fb\u30fb\u30fb\n\nkintone\u3068\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3092\u9023\u643a\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\n\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3068kintone\u9023\u643a\u3067\u3059\u304c\u3001kintone\u304b\u3089\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3078\u306e\u9023\u643a\u306b\u3064\u3044\u3066\u306fkintone\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u3057\u3066\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067kintone\u306e\u30ec\u30b3\u30fc\u30c9\u8a73\u7d30\u753b\u9762\u304b\u3089\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3092\u7acb\u3061\u4e0a\u3052\u3066\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u305f\u308a\u3001kintone\u304b\u3089\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306e\u4e00\u62ec\u9001\u4fe1\u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u4e00\u62ec\u9001\u4fe1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u8a73\u3057\u304f\u306f\u5f0a\u793e\u306e\u30d6\u30ed\u30b0\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\u8208\u5473\u304c\u3042\u308b\u65b9\u306f\u5f0a\u793e\u306e\u30d6\u30ed\u30b0\u306b\u8a73\u3057\u304f\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u306e\u3067\u3053\u3061\u3089\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\nkintone\uff08\u30ad\u30f3\u30c8\u30fc\u30f3\uff09\u3068\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306e\u9023\u643a\u6d3b\u7528\u65b9\u6cd5\n\n\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u304b\u3089kintone\u3078\u306e\u9023\u643a\n\u30d7\u30e9\u30b0\u30a4\u30f3\u306fkintone\u304b\u3089\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3078\u306e\u9023\u643a\u3067\u3059\u304c\u3001\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3067\u53d7\u4fe1\u3057\u305f\u30e1\u30fc\u30eb\u5185\u5bb9\u3092kintone\u306e\u30a2\u30d7\u30ea\u306b\u767b\u9332\u3057\u3001\u30c7\u30fc\u30bf\u3068\u3057\u3066\u84c4\u7a4d\u3055\u305b\u305f\u3044\u3068\u3044\u3046\u5229\u7528\u30cb\u30fc\u30ba\u3082\u3042\u308a\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001\u88fd\u54c1\u306e\u554f\u5408\u305b\u30e1\u30fc\u30eb\u304c\u304d\u3066\u3001\u305d\u308c\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u7ba1\u7406\u3092kintone\u4e0a\u3067\u884c\u3046\u3068\u3044\u3063\u305f\u5834\u5408\u306b\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u304b\u3089\u30dc\u30bf\u30f3\u4e00\u3064\u3067kintone\u306b\u767b\u9332\u3067\u304d\u305f\u3089\u4fbf\u5229\u3067\u3059\u3088\u306d\uff1f\n\u3053\u308c\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306b\u306f\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306b\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3092\u884c\u3046\u5f62\u306b\u306a\u308a\u307e\u3059\u304c\u5e78\u3044\u306a\u3053\u3068\u306b\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3082kintone\u540c\u69d8\u3001JavaScript\u306b\u3088\u308b\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u304c\u3067\u304d\u308b\u306e\u3067\u3059\uff01\n\u3000\u203b\u3061\u306a\u307f\u306bJavaScript\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u304c\u3067\u304d\u308b\u306e\u306f\u30af\u30e9\u30a6\u30c9\u7248\u306e\u307f\u3067\u30aa\u30f3\u30d7\u30ec\u7248\u306f\u3067\u304d\u307e\u305b\u3093\u306e\u3067\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002\n\u305d\u3053\u3067\u4eca\u56de\u306f\u3001\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306eJavaScript\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3092\u4f7f\u3063\u3066\u30e1\u30fc\u30eb\u672c\u6587\u3092kintone\u306e\u30a2\u30d7\u30ea\u306b\u767b\u9332\u3059\u308b\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u4f8b\u3092\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u3000\u3000\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u306f\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u5074\u306a\u306e\u3067\u300c\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba Advent Calendar\u3084\u3093\u3051\uff01\u300d\u3068\u306f\u8a00\u308f\u306a\u3044\u3067\u3002\u3002\n\n\uff11\uff0e\u53d7\u3051\u76bf\u3068\u306a\u308bkintone\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3059\u308b\n\u30b7\u30f3\u30d7\u30eb\u306b\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3067\u53d7\u4fe1\u3057\u305f\u30e1\u30fc\u30eb\u672c\u6587\u3068\u30e1\u30fc\u30eb\u306eURL\u3092\u767b\u9332\u3059\u308b\u30a2\u30d7\u30ea\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u30d5\u30a3\u30fc\u30eb\u30c9\u306f\u4ee5\u4e0b\u306e\uff12\u3064\u3060\u3051\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\n\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\n\u30d5\u30a9\u30fc\u30eb\u30c9\u30bf\u30a4\u30d7\n\u30d5\u30a3\u30fc\u30eb\u30c9\u30b3\u30fc\u30c9\n\n\n\n\n\u304a\u554f\u3044\u5408\u308f\u305b\u5185\u5bb9\n\u30ea\u30c3\u30c1\u30a8\u30c7\u30a3\u30bf\u30fc\nbody\n\n\n\u30e1\u30fc\u30eb\u30ef\u30a4\u30baURL\n\u6587\u5b57\u5217\uff081\u884c\uff09\u3000\nmw_url\n\n\n\n\n\u3081\u3063\u3061\u3083\u30b7\u30f3\u30d7\u30eb\u3067\u3059\u3002\n\n\uff12\uff0e\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u7528\u306b\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\n\u6b21\u306b\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u7528\u306bJavaScript\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u6ce8\u610f\u70b9\u306f\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306fkintone\u306e\u7528\u306b\u8981\u7d20\u3092\u53d6\u5f97\u3057\u305f\u308a\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306aAPI\u304c\u4e00\u5207\u306a\u304f\u3001jQuery\u306a\u3069\u3092\u4f7f\u3063\u3066DOM\u64cd\u4f5c\u3092\u3057\u306a\u3051\u308c\u3070\u3044\u3051\u307e\u305b\u3093\u3002\n\u3067\u3059\u306e\u3067\u3001\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306eDOM\u69cb\u6210\u304c\u5909\u308f\u3063\u305f\u5834\u5408\u306b\u306f\u52d5\u304b\u306a\u304f\u306a\u308b\u30ea\u30b9\u30af\u304c\u3042\u308a\u307e\u3059\u3002\n\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n\nmw_kintone.js\n'use strict';\nvar coop_kintone = {\n  usePage : ['MailView'], \n  init : function(){\n    this.param = this.getQuery();\n    if($.inArray(this.param.page,this.usePage)<0) return;  //\u30e1\u30fc\u30eb\u8a73\u7d30\u753b\u9762\u306e\u3068\u304d\u3060\u3051\u8868\u793a\n\n    this.initDom();  //kintone\u767b\u9332\u30dc\u30bf\u30f3\u306e\u8a2d\u7f6e\n  },\n  initDom : function(){\n    var btnCheckMail = $('<button>').addClass('post_kintone').css({\n      width:'auto',\n      color:'#000000',\n    }).text('kintone\u3078\u767b\u9332').css({\n      display:'inline-block',\n      verticalAlign:'middle',\n      fontSize:'1em',\n      lineHeight:'1em',\n      padding:'10px 10px 10px 10px',\n    });\n\n    var btn_div = $('<div>').css({\n      margin:'5px 5px 5px 5px',\n    });\n\n    btnCheckMail.on('click',function(){\n      coop_kintone.post_kintone();\n    });\n    btn_div.append(btnCheckMail);\n\n    $('div.mailBody').before(btn_div);  //\u672c\u6587\u306e\u4e0a\u90e8\u306b\u30dc\u30bf\u30f3\u3092\u8a2d\u7f6e\n    return;\n  },\n  post_kintone : function(){\n    var app_id = 1234;  //kintone\u306e\u767b\u9332\u5148\u30a2\u30d7\u30eaID\n    var hostname = window.location.hostname;\n\n    var mail_body = \"\";\n\n    var tt_el = $('div.mailBody tt:first'); \n\n    if(tt_el){  //\u30d7\u30ec\u30fc\u30f3\u30c6\u30ad\u30b9\u30c8\u30e1\u30fc\u30eb\u306e\u5834\u5408\n      mail_body = tt_el.html();\n    }\n\n    //POST\u7528JSON\n    var post_body = {\n      app : app_id,\n      record : {\n          body : { value : mail_body },\n          mw_url : { value : location.href }\n      }\n    };\n\n    var url = 'https://' + hostname + '/k/v1/record.json';\n    var xhr = new XMLHttpRequest();\n    xhr.open('POST', url);\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    xhr.setRequestHeader('X-Cybozu-Authorization', 'xxxxxxx');\n    xhr.setRequestHeader('Content-Type', 'application/json');\n    xhr.onload = function() {\n      if (xhr.status === 200) {\n        alert('kintone\u306b\u767b\u9332\u3057\u307e\u3057\u305f');\n      } else {\n        // error\n        alert('kintone\u3078\u306e\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f');\n        console.log(JSON.parse(xhr.responseText));\n      }\n    };\n    xhr.send(JSON.stringify(post_body));\n  },\n  getQuery : function(){\n    var param = {};\n    var _param = $(location).attr('search').substr(1).split('&');\n    for(var i=0; i<_param.length; i++){\n      var v = _param[i].split('=');\n      param[v[0]]=v[1];\n    }\n    return param;\n  }\n};\n$(function(){coop_kintone.init()});\n\n\n\u767b\u9332\u30dc\u30bf\u30f3\u306f\u30e1\u30fc\u30eb\u8a73\u7d30\u753b\u9762\u306b\u3060\u3051\u8868\u793a\u3055\u305b\u305f\u307b\u3046\u304c\u826f\u3044\u3067\u3059\u3088\u306d\u3002\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306fURL\u306epage\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u753b\u9762\u60c5\u5831\u304c\u5fc5\u305a\u3064\u3044\u3066\u304f\u308b\u306e\u3067\u8a73\u7d30\u753b\u9762\u3092\u8868\u3059\u300cMailView\u300d\u304cpage\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3042\u308c\u3070\u8868\u793a\u3055\u305b\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nusePage : ['MailView'], \ninit : function(){\n  this.param = this.getQuery();\n  if($.inArray(this.param.page,this.usePage)<0) return;  //\u30e1\u30fc\u30eb\u8a73\u7d30\u753b\u9762\u306e\u3068\u304d\u3060\u3051\u8868\u793a\n\n  this.initDom();  //kintone\u767b\u9332\u30dc\u30bf\u30f3\u306e\u8a2d\u7f6e\n\n\n\u4eca\u56de\u306f\u30dc\u30bf\u30f3\u306f\u30e1\u30fc\u30eb\u672c\u6587\u306e\u4e0a\u306b\u914d\u7f6e\u3055\u305b\u307e\u3059\u3002\u672c\u6587\u306ediv\u306fmailBody\u3068\u3044\u3046ID\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067initDom\u95a2\u6570\u306e\u4e2d\u3067div\u8981\u7d20\u3092\u53d6\u5f97\u3057\u3066\u3001\u305d\u306e\u4e0a\u306b\u30dc\u30bf\u30f3\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\nvar btn_div = $('<div>').css({\n      margin:'5px 5px 5px 5px',\n});\n\nbtnCheckMail.on('click',function(){\n coop_kintone.post_kintone();\n});\n\nbtn_div.append(btnCheckMail);\n\n$('div.mailBody').before(btn_div);  //\u672c\u6587\u306e\u4e0a\u90e8\u306b\u30dc\u30bf\u30f3\u3092\u8a2d\u7f6e\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u30dc\u30bf\u30f3\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u5f8c\u306f\u3001\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u305f\u3068\u304d\u306b\u30e1\u30fc\u30eb\u672c\u6587\u3068URL\u3092kintone\u306e\u30a2\u30d7\u30ea\u306bPOST\u3059\u308b\u90e8\u5206\u3067\u3059\u3002\nkintone\u3078\u306e\u767b\u9332\u306fpost_kintone\u95a2\u6570\u306e\u4e2d\u306b\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002\n\u30e1\u30fc\u30eb\u672c\u6587\u306f\u30d7\u30ec\u30fc\u30f3\u30c6\u30ad\u30b9\u30c8\u306e\u5834\u5408\u306f\u3001mailBody\u306eID\u304c\u8ffd\u52a0div\u30bf\u30b0\u306e\u3042\u3068\u306b\u304f\u308btt\u30bf\u30b0\u5185\u306b\u8a18\u8ff0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u3061\u306a\u307f\u306bHTML\u30e1\u30fc\u30eb\u306e\u5834\u5408\u306fmail-body-area\u3068\u3044\u3046ID\u304c\u3064\u3044\u305fdiv\u30bf\u30b0\u5185\u306b\u8a18\u8ff0\u3055\u308c\u307e\u3059\u306e\u3067\u30e1\u30fc\u30eb\u672c\u6587\u3092\u53d6\u5f97\u3059\u308b\u3068\u304d\u306b\u306f\u30d7\u30ec\u30fc\u30f3\u30c6\u30ad\u30b9\u30c8\u304bHTML\u304b\u3092\u5224\u65ad\u3059\u308b\u5206\u5c90\u51e6\u7406\u304c\u5fc5\u8981\u306b\u306a\u3063\u3066\u304d\u307e\u3059\u3002\n\u53d6\u5f97\u3057\u305f\u3089\u3001POST\u7528\u306eJSON\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u672c\u6587\u3068URL\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\n\u4f8b\u3067\u306fbody\u30d5\u30a3\u30fc\u30eb\u30c9\u3068mw_url\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u305d\u308c\u305e\u308c\u30bb\u30c3\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\nvar tt_el = $('div.mailBody tt:first'); \n\nif(tt_el){  //\u30d7\u30ec\u30fc\u30f3\u30c6\u30ad\u30b9\u30c8\u30e1\u30fc\u30eb\u306e\u5834\u5408\n mail_body = tt_el.html();\n}\n\n//POST\u7528JSON\nvar post_body = {\n app : app_id,\n record : {\n  body : { value : mail_body },\n  mw_url : { value : location.href }\n }\n};\n\nJSON\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u3067\u304d\u305f\u3089\u3001\u3042\u3068\u306fkintone\u306eREST API\u3092\u4f7f\u3063\u3066\u30ec\u30b3\u30fc\u30c9\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u304b\u3089\u306e\u30b3\u30fc\u30eb\u306a\u306e\u3067\u3082\u3061\u308d\u3093kintone JavaScript API\u306f\u4f7f\u3048\u306a\u3044\u306e\u3067\u3053\u3053\u3067\u306fXMLHttpRequest\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\u540c\u4e00\u30c9\u30e1\u30a4\u30f3\u3067\u3042\u308c\u3070\u8a8d\u8a3c\u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u8a8d\u8a3c\u3092\u4f7f\u3048\u308b\u306e\u3067\u3059\u304c\u3001GET\u4ee5\u5916\u306fCSRF\u30c8\u30fc\u30af\u30f3\u304c\u5fc5\u8981\u3068\u306a\u3063\u3066\u4f7f\u3048\u306a\u3044\u305f\u3081\u3001\u4eca\u56de\u306f\u767b\u9332\u5148\u30a2\u30d7\u30ea\u306eAPI\u30c8\u30fc\u30af\u30f3\u5229\u7528\u3057\u307e\u3059\u3002\n\u3082\u3061\u308d\u3093\u3001\u30ed\u30b0\u30a4\u30f3ID\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u30cf\u30c3\u30b7\u30e5\u5316\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u3067\u3082OK\u3067\u3059\u3002\nvar url = 'https://' + hostname + '/k/v1/record.json';\nvar xhr = new XMLHttpRequest();\nxhr.open('POST', url);\nxhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\nxhr.setRequestHeader('X-Cybozu-Authorization', 'xxxxxxx');\nxhr.setRequestHeader('Content-Type', 'application/json');\nxhr.onload = function() {\n if (xhr.status === 200) {\n  alert('kintone\u306b\u767b\u9332\u3057\u307e\u3057\u305f');\n } else {\n   // error\n  alert('kintone\u3078\u306e\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f');\n  console.log(JSON.parse(xhr.responseText));\n }\n};\nxhr.send(JSON.stringify(post_body));\n\nkintone\u306eREST API\u306e\u6ce8\u610f\u70b9\u306b\u3064\u3044\u3066\u306f\nhttps://cybozudev.zendesk.com/hc/ja/articles/201941754\n\u3053\u3061\u3089\u304c\u53c2\u8003\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\nJavaScript\u30d5\u30a1\u30a4\u30eb\u304c\u3067\u304d\u305f\u3089\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306b\u767b\u9332\u3057\u307e\u3059\u3002\n\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306e\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\u753b\u9762\u306b\u3042\u308b\u300cJavaScript\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a\u300d\u304b\u3089\u30d5\u30a1\u30a4\u30eb\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\n\nkintone\u540c\u69d8\u306b\u300c\u3059\u3079\u3066\u306e\u30e6\u30fc\u30b6\u30fc\u300d\u304b\u300c\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\u8005\u306e\u307f\u300d\u304b\u300c\u30d5\u30a1\u30a4\u30eb\u3092\u7121\u52b9\u300d\u3092\u9078\u629e\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u306e\u3067\u3001\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\u8005\u3060\u3051\u3067\u52d5\u4f5c\u78ba\u8a8d\u3092\u884c\u3046\u3068\u8a00\u3063\u305f\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\nkintone\u3068\u306f\u9055\u3063\u3066URL\u6307\u5b9a\u304c\u3067\u304d\u306a\u3044\u306e\u3067\u30c7\u30d0\u30c3\u30b0\u306f\u5c11\u3005\u9762\u5012\u3067\u3059\uff08\u7b11\uff09\n\u30d5\u30a1\u30a4\u30eb\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u30e1\u30fc\u30eb\u8a73\u7d30\u753b\u9762\u3092\u958b\u304f\u3068\u3001\u30e1\u30fc\u30eb\u672c\u6587\u306b\u300ckintone\u3078\u767b\u9332\u300d\u30dc\u30bf\u30f3\u304c\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u306e\u3067\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u30af\u30ea\u30c3\u30af\u5f8c\u3001\u9023\u643a\u5148\u306ekintone\u30a2\u30d7\u30ea\u3092\u898b\u308b\u3068\u3001\u30e1\u30fc\u30eb\u672c\u6587\u3068\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306eURL\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\u9001\u4fe1\u8005\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3067\u3042\u3063\u305f\u308a\u3001\u53d7\u4fe1\u65e5\u6642\u306a\u3069\u306e\u60c5\u5831\u3082\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u304b\u3089\u53d6\u5f97\u3057\u3066kintone\u306b\u9023\u643a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u306e\u3067\u3001\u4e00\u5ea6\u30c1\u30e3\u30ec\u30f3\u30b8\u3055\u308c\u3066\u307f\u3066\u306f\u3044\u304b\u304c\u3067\u3057\u3087\u3046\u304b\uff1f\n\u7686\u3055\u3093\u3053\u3093\u306b\u3061\u306f\uff01\n\u5f0a\u793e\u306fkintone\u5c02\u696d\u306eSIer\u3068\u3057\u3066\u6d3b\u52d5\u3057\u3001\u79c1\u3082\u300cMr.kintone\u300d\u306a\u3069\u3068\u547c\u3093\u3067\u9802\u3044\u3066\u304a\u308a\u307e\u3059\u304c\u3001\u4eca\u65e5\u306f\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306e\u8a71\u3092\u3057\u307e\u3059w\n\u3068\u3044\u3063\u3066\u3082\u3053\u3053\u306fkintone Advent Calendar\u3067\u3059\u306e\u3067\u3001kintone\u306e\u8a71\u3082\u5165\u308c\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u3067\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3068kintone\u306e\u9023\u643a\u306b\u3064\u3044\u3066\u3061\u3087\u3063\u3068\u66f8\u3044\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n#\u305d\u3082\u305d\u3082\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3063\u3066\u4f55\uff1f\n\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3063\u3066\u3054\u5b58\u77e5\u3067\u3059\u304b\uff1f\n\u7c21\u5358\u306b\u3044\u3046\u3068\u30e1\u30fc\u30eb\u3092\u5171\u6709\u3067\u7ba1\u7406\u3067\u304d\u308b\u30b7\u30b9\u30c6\u30e0\u3067\u3001\u4f8b\u3048\u3070\u4f1a\u793e\u306e\u304a\u554f\u3044\u5408\u308f\u305b\u30da\u30fc\u30b8\u304b\u3089\u98db\u3093\u3067\u304f\u308b\u30e1\u30fc\u30eb\u3067\u3042\u3063\u305f\u308a\u3001\u88fd\u54c1\u306e\u554f\u5408\u305b\u30e1\u30fc\u30eb\u306a\u3069\u3092\u5171\u6709\u30e1\u30fc\u30eb\u3092\u8907\u6570\u306e\u62c5\u5f53\u8005\u3067\u7c21\u5358\u306b\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nhttps://mailwise.cybozu.com/\n\n\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u53d7\u4fe1\u3057\u305f\u30e1\u30fc\u30eb\u306b\u5bfe\u3059\u308b\u5bfe\u5fdc\u6f0f\u308c\u3067\u3042\u3063\u305f\u308a\u4e8c\u91cd\u5bfe\u5fdc\u3068\u3044\u3063\u305f\u3053\u3068\u304c\u9632\u3050\u3053\u3068\u304c\u3067\u304d\u3001\u307e\u305f\u9867\u5ba2\u7ba1\u7406\u3082\u3067\u304d\u308b\u306e\u3067\u540c\u3058\u4eba\u304b\u3089\u9001\u3089\u308c\u3066\u304d\u305f\u30e1\u30fc\u30eb\u3068\u305d\u306e\u5bfe\u5fdc\u3092\u5c65\u6b74\u3068\u3057\u3066\u7c21\u5358\u306b\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u305d\u308c\u4ee5\u5916\u306b\u3082\u96fb\u8a71\u5c65\u6b74\u3067\u3042\u3063\u305f\u308a\u8a2a\u554f\u5c65\u6b74\u3067\u3042\u3063\u305f\u308a\u3068\u3044\u3063\u305f\u30e1\u30fc\u30eb\u5bfe\u5fdc\u4ee5\u5916\u306e\u30b3\u30f3\u30bf\u30af\u30c8\u5c65\u6b74\u3082\u7ba1\u7406\u3067\u304d\u308b\u305f\u3081\u3061\u3087\u3063\u3068\u3057\u305fCRM\u3068\u3057\u3066\u3082\u6d3b\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u3053\u306e\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306fkintone\u3068\u540c\u3058cybozu.com\u3068\u3057\u3066\u30af\u30e9\u30a6\u30c9\u7248\u3067\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001kintone\u3068\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u4e21\u65b9\u3092\u5c0e\u5165\u3057\u3066\u3082\u30e6\u30fc\u30b6\u30fc\u7ba1\u7406\u306f\u4e00\u5143\u5316\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u5229\u7528\u8005\u3082\u4e00\u5ea6\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3057\u307e\u3048\u3070\u3001\u30dc\u30bf\u30f3\u4e00\u3064\u3067kintone\u3084\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3092\u884c\u304d\u6765\u3067\u304d\u3061\u3083\u3044\u307e\u3059\u3002\n\n![image01.png](https://qiita-image-store.s3.amazonaws.com/0/100592/225e09bf-25e3-c129-2b17-7cbeaa6d2067.png)\n\n\n\u3061\u306a\u307f\u306b\u30aa\u30f3\u30d7\u30ec\u7248\u3082\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u30af\u30e9\u30a6\u30c9\u5c0e\u5165\u304cNG\u306e\u4f1a\u793e\u3055\u3093\u3067\u3082\u5c0e\u5165\u3067\u304d\u307e\u3059\uff01\n\n\u3068\u3001\u3053\u306e\u307e\u307e\u3067\u306f\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306e\u7d39\u4ecb\u3060\u3051\u3067\u8a18\u4e8b\u304c\u7d42\u308f\u3063\u3066\u3057\u307e\u3044\u3001\u300cMr.\u30e1\u30eb\u30ef\u30a4\u300d\u3092\u540d\u4e57\u3089\u306a\u3044\u3068\u3044\u3051\u306a\u304f\u306a\u308a\u305d\u3046\u306a\u306e\u3067\u3001\u305d\u308d\u305d\u308dkintone\u9023\u643a\u306e\u304a\u8a71\u3092\u30fb\u30fb\u30fb\n\n#kintone\u3068\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3092\u9023\u643a\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\n\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3068kintone\u9023\u643a\u3067\u3059\u304c\u3001kintone\u304b\u3089\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3078\u306e\u9023\u643a\u306b\u3064\u3044\u3066\u306fkintone\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u3057\u3066\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067kintone\u306e\u30ec\u30b3\u30fc\u30c9\u8a73\u7d30\u753b\u9762\u304b\u3089\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3092\u7acb\u3061\u4e0a\u3052\u3066\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u305f\u308a\u3001kintone\u304b\u3089\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306e\u4e00\u62ec\u9001\u4fe1\u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u4e00\u62ec\u9001\u4fe1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u8a73\u3057\u304f\u306f\u5f0a\u793e\u306e\u30d6\u30ed\u30b0\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\n\u8208\u5473\u304c\u3042\u308b\u65b9\u306f\u5f0a\u793e\u306e\u30d6\u30ed\u30b0\u306b\u8a73\u3057\u304f\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u306e\u3067\u3053\u3061\u3089\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\n[kintone\uff08\u30ad\u30f3\u30c8\u30fc\u30f3\uff09\u3068\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306e\u9023\u643a\u6d3b\u7528\u65b9\u6cd5](https://www.joyzo.co.jp/blog/2153)\n\n#\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u304b\u3089kintone\u3078\u306e\u9023\u643a\n\u30d7\u30e9\u30b0\u30a4\u30f3\u306fkintone\u304b\u3089\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3078\u306e\u9023\u643a\u3067\u3059\u304c\u3001\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3067\u53d7\u4fe1\u3057\u305f\u30e1\u30fc\u30eb\u5185\u5bb9\u3092kintone\u306e\u30a2\u30d7\u30ea\u306b\u767b\u9332\u3057\u3001\u30c7\u30fc\u30bf\u3068\u3057\u3066\u84c4\u7a4d\u3055\u305b\u305f\u3044\u3068\u3044\u3046\u5229\u7528\u30cb\u30fc\u30ba\u3082\u3042\u308a\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001\u88fd\u54c1\u306e\u554f\u5408\u305b\u30e1\u30fc\u30eb\u304c\u304d\u3066\u3001\u305d\u308c\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u7ba1\u7406\u3092kintone\u4e0a\u3067\u884c\u3046\u3068\u3044\u3063\u305f\u5834\u5408\u306b\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u304b\u3089\u30dc\u30bf\u30f3\u4e00\u3064\u3067kintone\u306b\u767b\u9332\u3067\u304d\u305f\u3089\u4fbf\u5229\u3067\u3059\u3088\u306d\uff1f\n\n\u3053\u308c\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306b\u306f\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306b\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3092\u884c\u3046\u5f62\u306b\u306a\u308a\u307e\u3059\u304c\u5e78\u3044\u306a\u3053\u3068\u306b\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3082kintone\u540c\u69d8\u3001JavaScript\u306b\u3088\u308b\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u304c\u3067\u304d\u308b\u306e\u3067\u3059\uff01\n\u3000\u203b\u3061\u306a\u307f\u306bJavaScript\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u304c\u3067\u304d\u308b\u306e\u306f\u30af\u30e9\u30a6\u30c9\u7248\u306e\u307f\u3067\u30aa\u30f3\u30d7\u30ec\u7248\u306f\u3067\u304d\u307e\u305b\u3093\u306e\u3067\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002\n\n**\u305d\u3053\u3067\u4eca\u56de\u306f\u3001\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306eJavaScript\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3092\u4f7f\u3063\u3066\u30e1\u30fc\u30eb\u672c\u6587\u3092kintone\u306e\u30a2\u30d7\u30ea\u306b\u767b\u9332\u3059\u308b\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u4f8b\u3092\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002**\n\u3000\u3000\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u306f\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u5074\u306a\u306e\u3067\u300c\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba Advent Calendar\u3084\u3093\u3051\uff01\u300d\u3068\u306f\u8a00\u308f\u306a\u3044\u3067\u3002\u3002\n\n##\uff11\uff0e\u53d7\u3051\u76bf\u3068\u306a\u308bkintone\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3059\u308b\n\u30b7\u30f3\u30d7\u30eb\u306b\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u3067\u53d7\u4fe1\u3057\u305f\u30e1\u30fc\u30eb\u672c\u6587\u3068\u30e1\u30fc\u30eb\u306eURL\u3092\u767b\u9332\u3059\u308b\u30a2\u30d7\u30ea\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u30d5\u30a3\u30fc\u30eb\u30c9\u306f\u4ee5\u4e0b\u306e\uff12\u3064\u3060\u3051\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n|\u30d5\u30a3\u30fc\u30eb\u30c9\u540d|\u30d5\u30a9\u30fc\u30eb\u30c9\u30bf\u30a4\u30d7|\u30d5\u30a3\u30fc\u30eb\u30c9\u30b3\u30fc\u30c9|\n|:--------|------------------:|------------------:|\n|\u304a\u554f\u3044\u5408\u308f\u305b\u5185\u5bb9|\u30ea\u30c3\u30c1\u30a8\u30c7\u30a3\u30bf\u30fc|body|\n|\u30e1\u30fc\u30eb\u30ef\u30a4\u30baURL|\u6587\u5b57\u5217\uff081\u884c\uff09\u3000|mw_url|\n\n![image02.png](https://qiita-image-store.s3.amazonaws.com/0/100592/e009fed9-6db6-f308-e87b-7803c8344eb7.png)\n\n\n\u3081\u3063\u3061\u3083\u30b7\u30f3\u30d7\u30eb\u3067\u3059\u3002\n\n##\uff12\uff0e\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u7528\u306b\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\n\n\u6b21\u306b\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u7528\u306bJavaScript\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u6ce8\u610f\u70b9\u306f\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306fkintone\u306e\u7528\u306b\u8981\u7d20\u3092\u53d6\u5f97\u3057\u305f\u308a\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306aAPI\u304c\u4e00\u5207\u306a\u304f\u3001jQuery\u306a\u3069\u3092\u4f7f\u3063\u3066DOM\u64cd\u4f5c\u3092\u3057\u306a\u3051\u308c\u3070\u3044\u3051\u307e\u305b\u3093\u3002\n\u3067\u3059\u306e\u3067\u3001\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306eDOM\u69cb\u6210\u304c\u5909\u308f\u3063\u305f\u5834\u5408\u306b\u306f\u52d5\u304b\u306a\u304f\u306a\u308b\u30ea\u30b9\u30af\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n\n``` mw_kintone.js\n'use strict';\nvar coop_kintone = {\n  usePage : ['MailView'], \n  init : function(){\n    this.param = this.getQuery();\n    if($.inArray(this.param.page,this.usePage)<0) return;  //\u30e1\u30fc\u30eb\u8a73\u7d30\u753b\u9762\u306e\u3068\u304d\u3060\u3051\u8868\u793a\n\n    this.initDom();  //kintone\u767b\u9332\u30dc\u30bf\u30f3\u306e\u8a2d\u7f6e\n  },\n  initDom : function(){\n    var btnCheckMail = $('<button>').addClass('post_kintone').css({\n      width:'auto',\n      color:'#000000',\n    }).text('kintone\u3078\u767b\u9332').css({\n      display:'inline-block',\n      verticalAlign:'middle',\n      fontSize:'1em',\n      lineHeight:'1em',\n      padding:'10px 10px 10px 10px',\n    });\n\n    var btn_div = $('<div>').css({\n      margin:'5px 5px 5px 5px',\n    });\n\n    btnCheckMail.on('click',function(){\n      coop_kintone.post_kintone();\n    });\n    btn_div.append(btnCheckMail);\n\n    $('div.mailBody').before(btn_div);  //\u672c\u6587\u306e\u4e0a\u90e8\u306b\u30dc\u30bf\u30f3\u3092\u8a2d\u7f6e\n    return;\n  },\n  post_kintone : function(){\n    var app_id = 1234;  //kintone\u306e\u767b\u9332\u5148\u30a2\u30d7\u30eaID\n    var hostname = window.location.hostname;\n\n    var mail_body = \"\";\n\n    var tt_el = $('div.mailBody tt:first'); \n\n    if(tt_el){  //\u30d7\u30ec\u30fc\u30f3\u30c6\u30ad\u30b9\u30c8\u30e1\u30fc\u30eb\u306e\u5834\u5408\n      mail_body = tt_el.html();\n    }\n\n    //POST\u7528JSON\n    var post_body = {\n      app : app_id,\n      record : {\n          body : { value : mail_body },\n          mw_url : { value : location.href }\n      }\n    };\n\n    var url = 'https://' + hostname + '/k/v1/record.json';\n    var xhr = new XMLHttpRequest();\n    xhr.open('POST', url);\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    xhr.setRequestHeader('X-Cybozu-Authorization', 'xxxxxxx');\n    xhr.setRequestHeader('Content-Type', 'application/json');\n    xhr.onload = function() {\n      if (xhr.status === 200) {\n        alert('kintone\u306b\u767b\u9332\u3057\u307e\u3057\u305f');\n      } else {\n        // error\n        alert('kintone\u3078\u306e\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f');\n        console.log(JSON.parse(xhr.responseText));\n      }\n    };\n    xhr.send(JSON.stringify(post_body));\n  },\n  getQuery : function(){\n    var param = {};\n    var _param = $(location).attr('search').substr(1).split('&');\n    for(var i=0; i<_param.length; i++){\n      var v = _param[i].split('=');\n      param[v[0]]=v[1];\n    }\n    return param;\n  }\n};\n$(function(){coop_kintone.init()});\n```\n\n\n\u767b\u9332\u30dc\u30bf\u30f3\u306f\u30e1\u30fc\u30eb\u8a73\u7d30\u753b\u9762\u306b\u3060\u3051\u8868\u793a\u3055\u305b\u305f\u307b\u3046\u304c\u826f\u3044\u3067\u3059\u3088\u306d\u3002\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306fURL\u306epage\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u753b\u9762\u60c5\u5831\u304c\u5fc5\u305a\u3064\u3044\u3066\u304f\u308b\u306e\u3067\u8a73\u7d30\u753b\u9762\u3092\u8868\u3059\u300cMailView\u300d\u304cpage\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3042\u308c\u3070\u8868\u793a\u3055\u305b\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```Javascript\n\nusePage : ['MailView'], \ninit : function(){\n  this.param = this.getQuery();\n  if($.inArray(this.param.page,this.usePage)<0) return;  //\u30e1\u30fc\u30eb\u8a73\u7d30\u753b\u9762\u306e\u3068\u304d\u3060\u3051\u8868\u793a\n\n  this.initDom();  //kintone\u767b\u9332\u30dc\u30bf\u30f3\u306e\u8a2d\u7f6e\n\n```\n\n\u4eca\u56de\u306f\u30dc\u30bf\u30f3\u306f\u30e1\u30fc\u30eb\u672c\u6587\u306e\u4e0a\u306b\u914d\u7f6e\u3055\u305b\u307e\u3059\u3002\u672c\u6587\u306ediv\u306fmailBody\u3068\u3044\u3046ID\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067initDom\u95a2\u6570\u306e\u4e2d\u3067div\u8981\u7d20\u3092\u53d6\u5f97\u3057\u3066\u3001\u305d\u306e\u4e0a\u306b\u30dc\u30bf\u30f3\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\n\n```Javascript\nvar btn_div = $('<div>').css({\n      margin:'5px 5px 5px 5px',\n});\n\nbtnCheckMail.on('click',function(){\n coop_kintone.post_kintone();\n});\n\nbtn_div.append(btnCheckMail);\n\n$('div.mailBody').before(btn_div);  //\u672c\u6587\u306e\u4e0a\u90e8\u306b\u30dc\u30bf\u30f3\u3092\u8a2d\u7f6e\n```\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u30dc\u30bf\u30f3\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n<img width=\"929\" alt=\"image03.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/100592/5d899999-a642-a2cd-c46a-de04cd7c242b.png\">\n\n\u5f8c\u306f\u3001\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u305f\u3068\u304d\u306b\u30e1\u30fc\u30eb\u672c\u6587\u3068URL\u3092kintone\u306e\u30a2\u30d7\u30ea\u306bPOST\u3059\u308b\u90e8\u5206\u3067\u3059\u3002\n\nkintone\u3078\u306e\u767b\u9332\u306fpost_kintone\u95a2\u6570\u306e\u4e2d\u306b\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30e1\u30fc\u30eb\u672c\u6587\u306f\u30d7\u30ec\u30fc\u30f3\u30c6\u30ad\u30b9\u30c8\u306e\u5834\u5408\u306f\u3001mailBody\u306eID\u304c\u8ffd\u52a0div\u30bf\u30b0\u306e\u3042\u3068\u306b\u304f\u308btt\u30bf\u30b0\u5185\u306b\u8a18\u8ff0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u3061\u306a\u307f\u306bHTML\u30e1\u30fc\u30eb\u306e\u5834\u5408\u306fmail-body-area\u3068\u3044\u3046ID\u304c\u3064\u3044\u305fdiv\u30bf\u30b0\u5185\u306b\u8a18\u8ff0\u3055\u308c\u307e\u3059\u306e\u3067\u30e1\u30fc\u30eb\u672c\u6587\u3092\u53d6\u5f97\u3059\u308b\u3068\u304d\u306b\u306f\u30d7\u30ec\u30fc\u30f3\u30c6\u30ad\u30b9\u30c8\u304bHTML\u304b\u3092\u5224\u65ad\u3059\u308b\u5206\u5c90\u51e6\u7406\u304c\u5fc5\u8981\u306b\u306a\u3063\u3066\u304d\u307e\u3059\u3002\n\n\u53d6\u5f97\u3057\u305f\u3089\u3001POST\u7528\u306eJSON\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u672c\u6587\u3068URL\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\n\u4f8b\u3067\u306fbody\u30d5\u30a3\u30fc\u30eb\u30c9\u3068mw_url\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u305d\u308c\u305e\u308c\u30bb\u30c3\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\n\n```JavaScript\nvar tt_el = $('div.mailBody tt:first'); \n\nif(tt_el){  //\u30d7\u30ec\u30fc\u30f3\u30c6\u30ad\u30b9\u30c8\u30e1\u30fc\u30eb\u306e\u5834\u5408\n mail_body = tt_el.html();\n}\n\n//POST\u7528JSON\nvar post_body = {\n app : app_id,\n record : {\n  body : { value : mail_body },\n  mw_url : { value : location.href }\n }\n};\n```\n\nJSON\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u3067\u304d\u305f\u3089\u3001\u3042\u3068\u306fkintone\u306eREST API\u3092\u4f7f\u3063\u3066\u30ec\u30b3\u30fc\u30c9\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u304b\u3089\u306e\u30b3\u30fc\u30eb\u306a\u306e\u3067\u3082\u3061\u308d\u3093kintone JavaScript API\u306f\u4f7f\u3048\u306a\u3044\u306e\u3067\u3053\u3053\u3067\u306fXMLHttpRequest\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n\u540c\u4e00\u30c9\u30e1\u30a4\u30f3\u3067\u3042\u308c\u3070\u8a8d\u8a3c\u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u8a8d\u8a3c\u3092\u4f7f\u3048\u308b\u306e\u3067\u3059\u304c\u3001GET\u4ee5\u5916\u306fCSRF\u30c8\u30fc\u30af\u30f3\u304c\u5fc5\u8981\u3068\u306a\u3063\u3066\u4f7f\u3048\u306a\u3044\u305f\u3081\u3001\u4eca\u56de\u306f\u767b\u9332\u5148\u30a2\u30d7\u30ea\u306eAPI\u30c8\u30fc\u30af\u30f3\u5229\u7528\u3057\u307e\u3059\u3002\n\u3082\u3061\u308d\u3093\u3001\u30ed\u30b0\u30a4\u30f3ID\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u30cf\u30c3\u30b7\u30e5\u5316\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u3067\u3082OK\u3067\u3059\u3002\n\n```JavaScript\nvar url = 'https://' + hostname + '/k/v1/record.json';\nvar xhr = new XMLHttpRequest();\nxhr.open('POST', url);\nxhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\nxhr.setRequestHeader('X-Cybozu-Authorization', 'xxxxxxx');\nxhr.setRequestHeader('Content-Type', 'application/json');\nxhr.onload = function() {\n if (xhr.status === 200) {\n  alert('kintone\u306b\u767b\u9332\u3057\u307e\u3057\u305f');\n } else {\n   // error\n  alert('kintone\u3078\u306e\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f');\n  console.log(JSON.parse(xhr.responseText));\n }\n};\nxhr.send(JSON.stringify(post_body));\n```\n\nkintone\u306eREST API\u306e\u6ce8\u610f\u70b9\u306b\u3064\u3044\u3066\u306f\nhttps://cybozudev.zendesk.com/hc/ja/articles/201941754\n\u3053\u3061\u3089\u304c\u53c2\u8003\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\nJavaScript\u30d5\u30a1\u30a4\u30eb\u304c\u3067\u304d\u305f\u3089\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306b\u767b\u9332\u3057\u307e\u3059\u3002\n\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306e\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\u753b\u9762\u306b\u3042\u308b\u300cJavaScript\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a\u300d\u304b\u3089\u30d5\u30a1\u30a4\u30eb\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\n<img width=\"981\" alt=\"image04.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/100592/0416e965-9a0e-4095-6c2c-f3af22bb28c0.png\">\n\n<img width=\"639\" alt=\"image05.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/100592/d99577a5-666c-0719-8569-f2dcc32c5394.png\">\n\nkintone\u540c\u69d8\u306b\u300c\u3059\u3079\u3066\u306e\u30e6\u30fc\u30b6\u30fc\u300d\u304b\u300c\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\u8005\u306e\u307f\u300d\u304b\u300c\u30d5\u30a1\u30a4\u30eb\u3092\u7121\u52b9\u300d\u3092\u9078\u629e\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u306e\u3067\u3001\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\u8005\u3060\u3051\u3067\u52d5\u4f5c\u78ba\u8a8d\u3092\u884c\u3046\u3068\u8a00\u3063\u305f\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\nkintone\u3068\u306f\u9055\u3063\u3066URL\u6307\u5b9a\u304c\u3067\u304d\u306a\u3044\u306e\u3067\u30c7\u30d0\u30c3\u30b0\u306f\u5c11\u3005\u9762\u5012\u3067\u3059\uff08\u7b11\uff09\n\n\u30d5\u30a1\u30a4\u30eb\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u30e1\u30fc\u30eb\u8a73\u7d30\u753b\u9762\u3092\u958b\u304f\u3068\u3001\u30e1\u30fc\u30eb\u672c\u6587\u306b\u300ckintone\u3078\u767b\u9332\u300d\u30dc\u30bf\u30f3\u304c\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u306e\u3067\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n<img width=\"929\" alt=\"image03.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/100592/5d899999-a642-a2cd-c46a-de04cd7c242b.png\">\n\n\u30af\u30ea\u30c3\u30af\u5f8c\u3001\u9023\u643a\u5148\u306ekintone\u30a2\u30d7\u30ea\u3092\u898b\u308b\u3068\u3001\u30e1\u30fc\u30eb\u672c\u6587\u3068\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u306eURL\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n<img width=\"662\" alt=\"image06.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/100592/9646cc72-b10f-8d27-1eeb-68b556f540cc.png\">\n\n\u9001\u4fe1\u8005\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3067\u3042\u3063\u305f\u308a\u3001\u53d7\u4fe1\u65e5\u6642\u306a\u3069\u306e\u60c5\u5831\u3082\u30e1\u30fc\u30eb\u30ef\u30a4\u30ba\u304b\u3089\u53d6\u5f97\u3057\u3066kintone\u306b\u9023\u643a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u306e\u3067\u3001\u4e00\u5ea6\u30c1\u30e3\u30ec\u30f3\u30b8\u3055\u308c\u3066\u307f\u3066\u306f\u3044\u304b\u304c\u3067\u3057\u3087\u3046\u304b\uff1f\n\n\n", "tags": ["kintone"]}