{"tags": ["centos7", "Ansible", "Django"], "context": "\n\nOverview\n\u3000Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u308b\u5fc5\u8981\u304c\u51fa\u3066\u304d\u305f\u306e\u3067Django\u3068\u3044\u3046\u306e\u3092\u4f7f\u3063\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u305f\u3002\n\u69cb\u7bc9\u74b0\u5883\u3068\u3057\u3066\u6307\u5b9a\u3055\u308c\u305f\u7269\u306f\u4ee5\u4e0b\u306e\u901a\u308a\n\nCentOS7\npython 3.x\ndjango 1.10\nmysql\n\n\n\u57fa\u672c\u65b9\u91dd\n\n\u53ef\u80fd\u306a\u9650\u308ayum install (\u6a19\u6e96\u30d1\u30c3\u30b1\u30fc\u30b8)\u3092\u4f7f\u3046\n\u53ef\u80fd\u306a\u9650\u308aOS\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u6319\u52d5\u3092\u5909\u3048\u306a\u3044\n\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u52d5\u4f5c\u304c\u5909\u308f\u308b\u3068\u4ed6\u306e\u30b3\u30de\u30f3\u30c9\u306b\u5f71\u97ff\u304c\u51fa\u3066\u57fa\u76e4\u7ba1\u7406\u304c\u9762\u5012\u304f\u3055\u304f\u306a\u308b\n\n\n\u53ef\u80fd\u306a\u9650\u308a\u81ea\u52d5\u5316\u3059\u308b\n\n\n\u30c0\u30eb\u3044\u304b\u3089\n\n\n\n\n\u65b9\u91dd\u306b\u95a2\u3059\u308b\u30e1\u30e2\nCentOS7\u306epython\u306f2.7\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306a\u306e\u3067python3.x\u306f\u5225\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u8a00\u3046\u3053\u3068\u306b\u306a\u308b\u3002\n\u307e\u305f\u3001django\u3082yum\u30d1\u30c3\u30b1\u30fc\u30b8\u306f1.4\u3060\u304b1.6\u3068\u3044\u3046\u5316\u77f3\u306e\u3088\u3046\u306a\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u6a19\u6e96\u306a\u306e\u3067\n\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\u3055\u3048\u540c\u3058\u3067\u3042\u308c\u3070\u3044\u3044\u3067\u3057\u3087\u3001\u3068\u306f\u3044\u304b\u306a\u3044\u306e\u3067\u632b\u6298\u3057\u3066pip\u3082\u4f7f\u3063\u305f\n\nHow to Install packages\n\nInstall git/ansible packages\n\u3000\u57fa\u672c\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306fAnsible\u5316\u3057\u3066\u3044\u308b\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306fAnsible\u3068\u3057\u3066\u8aac\u660e\u3059\u308b\u304c\nAnsible\u81ea\u4f53\u304c\u5165\u3063\u3066\u3044\u306a\u3044\u3068\u8a71\u306b\u306a\u3089\u306a\u3044\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u4f5c\u696d\u306f\u5fc5\u9808\u3002\n # yum -y install epel-release\n # yum -y install ansible git\n\n\nInstall by Ansible\n\nPython3.4\n- name: install packages from repo\n  yum:\n    name: \"{{ item }}\"\n    state: latest\n  with_items:\n    - python34\n    - python34-devel\n    - python34-setuptools\n    - python34-pip\n    - gcc\n\n\nApache\n- name: yum install httpd\n  yum: \n    name: \"{{ item }}\"\n    state: latest\n  with_items:\n    - httpd\n    - httpd-devel\n    - mod_ssl\n    - mod_wsgi\n  tags:\n    - prod\n  become: yes\n\n\nmariadb\n- name: yum install mariadb\n  yum: \n    name: \"{{ item }}\"\n    state: latest\n  with_items:\n    - mariadb-server\n    - mariadb-devel\n  tags:\n    - prod\n  become: yes\n\n\nDjango\n- name: install packages from pip3\n  easy_install:\n    name: \"{{ item }}\"\n    state: latest\n  executable: /usr/bin/pip3\n  with_items:\n    - django\n    - pymysql\n    - pip\n  tags:\n    - prod\n  become: yes\n\n\nSettings\n\nhttpd.conf\npython3.4\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u30d1\u30b9\u3092\u8a18\u8f09\u3057\u3066\u3084\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\nWSGIScriptAlias / /var/www/django/project/mysite/mysite/wsgi.py\nWSGIPythonPath /var/www/django/project/mysite:/usr/lib64/python3.4/site-packages\nWSGIDaemonProcess mysite python-path=/var/www/django/project/mysite:/usr/lib64/python3.4/site-packages\nWSGIProcessGroup mysite\n\n\ndjango\nsetting.py, wsgi.py, manage.py \u306b\u7d30\u5de5\u304c\u5fc5\u8981\u306a\u3068\u3053\u308d\u3060\u3051\u8a18\u8f09\n\nmanage.py\n#!/usr/bin/env python3\nimport os\nimport sys\nimport pymysql\npymysql.install_as_MySQLdb()\n\n\nsetting.py\nimport os\nimport pymysql\npymysql.install_as_MySQLdb()\n\n\nwsgi.py\nimport os\nimport pymysql\npymysql.install_as_MySQLdb()\n\n# Overview\n\u3000Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u308b\u5fc5\u8981\u304c\u51fa\u3066\u304d\u305f\u306e\u3067Django\u3068\u3044\u3046\u306e\u3092\u4f7f\u3063\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u305f\u3002\n\u69cb\u7bc9\u74b0\u5883\u3068\u3057\u3066\u6307\u5b9a\u3055\u308c\u305f\u7269\u306f\u4ee5\u4e0b\u306e\u901a\u308a\n\n* CentOS7\n* python 3.x\n* django 1.10\n* mysql\n\n# \u57fa\u672c\u65b9\u91dd\n* \u53ef\u80fd\u306a\u9650\u308ayum install (\u6a19\u6e96\u30d1\u30c3\u30b1\u30fc\u30b8)\u3092\u4f7f\u3046\n* \u53ef\u80fd\u306a\u9650\u308aOS\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u6319\u52d5\u3092\u5909\u3048\u306a\u3044\n    * \u30c7\u30d5\u30a9\u30eb\u30c8\u52d5\u4f5c\u304c\u5909\u308f\u308b\u3068\u4ed6\u306e\u30b3\u30de\u30f3\u30c9\u306b\u5f71\u97ff\u304c\u51fa\u3066\u57fa\u76e4\u7ba1\u7406\u304c\u9762\u5012\u304f\u3055\u304f\u306a\u308b\n* \u53ef\u80fd\u306a\u9650\u308a\u81ea\u52d5\u5316\u3059\u308b\n    * \u30c0\u30eb\u3044\u304b\u3089\n\n## \u65b9\u91dd\u306b\u95a2\u3059\u308b\u30e1\u30e2\nCentOS7\u306epython\u306f2.7\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306a\u306e\u3067python3.x\u306f\u5225\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u8a00\u3046\u3053\u3068\u306b\u306a\u308b\u3002\n\u307e\u305f\u3001django\u3082yum\u30d1\u30c3\u30b1\u30fc\u30b8\u306f1.4\u3060\u304b1.6\u3068\u3044\u3046\u5316\u77f3\u306e\u3088\u3046\u306a\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u6a19\u6e96\u306a\u306e\u3067\n\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\u3055\u3048\u540c\u3058\u3067\u3042\u308c\u3070\u3044\u3044\u3067\u3057\u3087\u3001\u3068\u306f\u3044\u304b\u306a\u3044\u306e\u3067\u632b\u6298\u3057\u3066pip\u3082\u4f7f\u3063\u305f\n\n# How to Install packages\n\n## Install git/ansible packages\n\u3000\u57fa\u672c\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306fAnsible\u5316\u3057\u3066\u3044\u308b\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306fAnsible\u3068\u3057\u3066\u8aac\u660e\u3059\u308b\u304c\nAnsible\u81ea\u4f53\u304c\u5165\u3063\u3066\u3044\u306a\u3044\u3068\u8a71\u306b\u306a\u3089\u306a\u3044\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u4f5c\u696d\u306f\u5fc5\u9808\u3002\n\n<pre>\n # yum -y install epel-release\n # yum -y install ansible git\n</pre>\n\n## Install by Ansible\n\n### Python3.4\n<pre>\n- name: install packages from repo\n  yum:\n    name: \"{{ item }}\"\n    state: latest\n  with_items:\n    - python34\n    - python34-devel\n    - python34-setuptools\n    - python34-pip\n    - gcc\n</pre>\n\n### Apache\n<pre>\n- name: yum install httpd\n  yum: \n    name: \"{{ item }}\"\n    state: latest\n  with_items:\n    - httpd\n    - httpd-devel\n    - mod_ssl\n    - mod_wsgi\n  tags:\n    - prod\n  become: yes\n</pre>\n\n### mariadb\n<pre>\n- name: yum install mariadb\n  yum: \n    name: \"{{ item }}\"\n    state: latest\n  with_items:\n    - mariadb-server\n    - mariadb-devel\n  tags:\n    - prod\n  become: yes\n</pre>\n\n### Django\n<pre>\n- name: install packages from pip3\n  easy_install:\n    name: \"{{ item }}\"\n    state: latest\n  executable: /usr/bin/pip3\n  with_items:\n    - django\n    - pymysql\n    - pip\n  tags:\n    - prod\n  become: yes\n</pre>\n\n## Settings\n\n### httpd.conf\npython3.4\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u30d1\u30b9\u3092\u8a18\u8f09\u3057\u3066\u3084\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n<pre>\nWSGIScriptAlias / /var/www/django/project/mysite/mysite/wsgi.py\nWSGIPythonPath /var/www/django/project/mysite:/usr/lib64/python3.4/site-packages\nWSGIDaemonProcess mysite python-path=/var/www/django/project/mysite:/usr/lib64/python3.4/site-packages\nWSGIProcessGroup mysite\n</pre>\n\n### django\nsetting.py, wsgi.py, manage.py \u306b\u7d30\u5de5\u304c\u5fc5\u8981\u306a\u3068\u3053\u308d\u3060\u3051\u8a18\u8f09\n\n#### manage.py\n<pre>\n#!/usr/bin/env python3\nimport os\nimport sys\nimport pymysql\npymysql.install_as_MySQLdb()\n</pre>\n\n#### setting.py\n<pre>\nimport os\nimport pymysql\npymysql.install_as_MySQLdb()\n</pre>\n\n#### wsgi.py\n<pre>\nimport os\nimport pymysql\npymysql.install_as_MySQLdb()\n</pre>\n"}