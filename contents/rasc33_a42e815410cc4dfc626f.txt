{"context": " More than 1 year has passed since last update.Zenphoto\u3092Arch Linux\u306b\u5165\u308c\u3066\u4f7f\u3044\u59cb\u3081\u307e\u3057\u305f\u3002\n\n\u5fc5\u8981\u306aPackage\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\npacman -S imagemagick php-cgi php-apache php-pear\npecl install imagick\n\n\nPHP\u306emysql\u7528\u306eextention\u3092\u6709\u52b9\u306b\u3059\u308b\n\n/etc/php/php.ini\u3092\u4fee\u6b63\n\nvi /etc/php/php.ini\n\n\n\u4ee5\u4e0b\u306e\u884c\u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u89e3\u9664\n\n\nphp.ini\nextension=mysqli.so\nextension=mysql.so\nextension=pdo_mysql.so\nextension=gd.so\n\n\n\n\u4ee5\u4e0b\u306e\u884c\u3092\u8ffd\u52a0\n\n\nphp.ini\nextension=imagick.so\n\n\n\nPackage\u3092Download\ncd /usr/local/src\nwget https://github.com/zenphoto/zenphoto/archive/zenphoto-1.4.5.7.tar.gz\ntar xvfz zenphoto-1.4.5.7.tar.gz\nmv zenphoto-zenphoto-1.4.5.7 /srv/http/zenphoto\nchown -R http:http /srv/http/zenphoto/\n\n\nDB\u3092\u4f5c\u6210\nmysql -u root -p\nEnter password: ******\n\nMariaDB [(none)]> CREATE DATABASE zenphoto CHARACTER SET utf8;\nQuery OK, 1 row affected (0.12 sec)\n\nMariaDB [(none)]> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| ghost              |\n| ghost_dev          |\n| mysql              |\n| performance_schema |\n| test               |\n| zenphoto           |\n+--------------------+\n7 rows in set (0.00 sec)\n\nMariaDB [(none)]> GRANT ALL ON zenphoto.* to zenphoto@localhost;\nQuery OK, 0 rows affected (0.09 sec)\n\nMariaDB [(none)]> FLUSH PRIVILEGES;\nQuery OK, 0 rows affected (0.05 sec)\n\nMariaDB [(none)]> SET PASSWORD FOR zenphoto@localhost=password('YOUR PASSWORD');\nQuery OK, 0 rows affected (0.01 sec)\n\nMariaDB [(none)]> exit\nBye\n\n\nApache\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\nPHP Module\u3092\u4f7f\u3048\u308b\u3088\u3046\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\nvi /etc/httpd/conf/httpd.conf\n\n\nhttpd.conf\n# PHP Module\nLoadModule php5_module modules/libphp5.so\nAddHandler php5-script php\nInclude conf/extra/php5_module.conf \n\n\n\nVirtualHost\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\nvi /etc/httpd/conf/extra/httpd-vhosts.conf\n\n\n\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\n\nhttpd-vhosts.conf\n### zenphoto\n<VirtualHost *:80>\n    ServerAdmin root@example.com\n    DocumentRoot \"/srv/http/zenphoto/\"\n    ServerName zenphoto.example.com\n    AddDefaultCharset Off\n    ErrorLog \"/var/log/httpd/zenphoto.example.com/error_log\"\n    CustomLog \"/var/log/httpd/zenphoto.example.com/access_log\" common\n    <Directory /srv/http/zenphoto/>\n        AllowOverride All\n    </Directory>\n</VirtualHost>\n\n\n\nLog Directory\u3092\u4f5c\u6210\n\nmkdir /var/log/httpd/zenphoto.example.com/\n\n\nApache\u306e\u8a2d\u5b9a\u306b\u554f\u984c\u304c\u7121\u3044\u3053\u3068\u3092\u78ba\u8a8d\u5f8c\u3001\u518d\u8d77\u52d5\n\nhttpd -t\nSyntax OK\nsystemctl restart httpd\nsystemctl status httpd\n\n\nzenphoto\u306e\u8a2d\u5b9a\n\nzp-data\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306epermission\u3092600\u306b\u5909\u66f4\n\ncd /srv/httpd/zenphoto\nchmod 600 zp-data\n\n\nDB\u7528\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\n\nDatabase engine : MySQL\nDatabase admin user : zenphoto\nDatabase admin password : YOUR PASSWORD\nDatabase host : localhost\nDatabase name : zenphoto\nDatabase table prefix : (Blank) \n\n\u305d\u306e\u4ed6\u5168\u3066OK\u306a\u3089[GO]\u3068\u3044\u3046\u30dc\u30bf\u30f3\u304c\u51fa\u308b\u306e\u3067\u9032\u3080\u3002\n\n\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\nUsername, Password\u7b49\u5165\u529b\u3057\u3066\u5b8c\u4e86\u3002\n[Zenphoto](http://www.zenphoto.org/)\u3092Arch Linux\u306b\u5165\u308c\u3066\u4f7f\u3044\u59cb\u3081\u307e\u3057\u305f\u3002\n\n## \u5fc5\u8981\u306aPackage\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash\npacman -S imagemagick php-cgi php-apache php-pear\npecl install imagick\n```\n## PHP\u306emysql\u7528\u306eextention\u3092\u6709\u52b9\u306b\u3059\u308b\n\n- /etc/php/php.ini\u3092\u4fee\u6b63\n\n```bash\nvi /etc/php/php.ini\n```\n\n- \u4ee5\u4e0b\u306e\u884c\u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u89e3\u9664\n\n```vim:php.ini\nextension=mysqli.so\nextension=mysql.so\nextension=pdo_mysql.so\nextension=gd.so\n```\n\n- \u4ee5\u4e0b\u306e\u884c\u3092\u8ffd\u52a0\n\n```vim:php.ini\nextension=imagick.so\n```\n\n## Package\u3092Download\n```bash\ncd /usr/local/src\nwget https://github.com/zenphoto/zenphoto/archive/zenphoto-1.4.5.7.tar.gz\ntar xvfz zenphoto-1.4.5.7.tar.gz\nmv zenphoto-zenphoto-1.4.5.7 /srv/http/zenphoto\nchown -R http:http /srv/http/zenphoto/\n```\n\n## DB\u3092\u4f5c\u6210\n```bash\nmysql -u root -p\nEnter password: ******\n```\n```mysql\nMariaDB [(none)]> CREATE DATABASE zenphoto CHARACTER SET utf8;\nQuery OK, 1 row affected (0.12 sec)\n\nMariaDB [(none)]> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| ghost              |\n| ghost_dev          |\n| mysql              |\n| performance_schema |\n| test               |\n| zenphoto           |\n+--------------------+\n7 rows in set (0.00 sec)\n\nMariaDB [(none)]> GRANT ALL ON zenphoto.* to zenphoto@localhost;\nQuery OK, 0 rows affected (0.09 sec)\n\nMariaDB [(none)]> FLUSH PRIVILEGES;\nQuery OK, 0 rows affected (0.05 sec)\n\nMariaDB [(none)]> SET PASSWORD FOR zenphoto@localhost=password('YOUR PASSWORD');\nQuery OK, 0 rows affected (0.01 sec)\n\nMariaDB [(none)]> exit\nBye\n```\n\n## Apache\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\n- PHP Module\u3092\u4f7f\u3048\u308b\u3088\u3046\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\n```bash\nvi /etc/httpd/conf/httpd.conf\n```\n\n```vim:httpd.conf\n# PHP Module\nLoadModule php5_module modules/libphp5.so\nAddHandler php5-script php\nInclude conf/extra/php5_module.conf \n```\n- VirtualHost\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\n```bash\nvi /etc/httpd/conf/extra/httpd-vhosts.conf\n```\n\n- \u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\n```vim:httpd-vhosts.conf\n### zenphoto\n<VirtualHost *:80>\n    ServerAdmin root@example.com\n    DocumentRoot \"/srv/http/zenphoto/\"\n    ServerName zenphoto.example.com\n    AddDefaultCharset Off\n    ErrorLog \"/var/log/httpd/zenphoto.example.com/error_log\"\n    CustomLog \"/var/log/httpd/zenphoto.example.com/access_log\" common\n    <Directory /srv/http/zenphoto/>\n        AllowOverride All\n    </Directory>\n</VirtualHost>\n```\n\n- Log Directory\u3092\u4f5c\u6210\n\n```bash\nmkdir /var/log/httpd/zenphoto.example.com/\n```\n\n- Apache\u306e\u8a2d\u5b9a\u306b\u554f\u984c\u304c\u7121\u3044\u3053\u3068\u3092\u78ba\u8a8d\u5f8c\u3001\u518d\u8d77\u52d5\n\n```bash\nhttpd -t\nSyntax OK\nsystemctl restart httpd\nsystemctl status httpd\n```\n\n## zenphoto\u306e\u8a2d\u5b9a\n\n- zp-data\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306epermission\u3092600\u306b\u5909\u66f4\n\n```bash\ncd /srv/httpd/zenphoto\nchmod 600 zp-data\n```\n\n- DB\u7528\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\n\n```text\nDatabase engine : MySQL\nDatabase admin user : zenphoto\nDatabase admin password : YOUR PASSWORD\nDatabase host : localhost\nDatabase name : zenphoto\nDatabase table prefix : (Blank) \n```\n\n\u305d\u306e\u4ed6\u5168\u3066OK\u306a\u3089[GO]\u3068\u3044\u3046\u30dc\u30bf\u30f3\u304c\u51fa\u308b\u306e\u3067\u9032\u3080\u3002\n\n## \u30e6\u30fc\u30b6\u3092\u4f5c\u6210\nUsername, Password\u7b49\u5165\u529b\u3057\u3066\u5b8c\u4e86\u3002\n\n", "tags": ["ZenPhoto", "mariadb", "Arch_Linux", "Apache", "systemd"]}