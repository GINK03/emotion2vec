{"context": " More than 1 year has passed since last update.MySQL\u3068\u304b\u305d\u306e\u8fba\u306f\u5165\u3063\u3066\u3044\u308b\u306e\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u4eca\u56de\u8a66\u3057\u3066\u307f\u305f\u74b0\u5883\u306eMySQL\u306f5.6\u7cfb\u3067\u3059\u3002\n\n\u307e\u305a\u306fJava\u3092\u5165\u308c\u308b\n\nopenjdk\u3067\u5927\u4e08\u592b\u307f\u305f\u3044\u306a\u306e\u3067\u666e\u901a\u306byum\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n$ sudo yum install java-1.6.0-openjdk.x86_64\n\n\u203b\u666e\u901a\u306byum install java\u3068\u304b\u3084\u3063\u3066\u3057\u307e\u3046\u3068jre1.5\u7cfb\u304c\u5165\u3063\u3066\u3057\u307e\u3044\u52d5\u304d\u307e\u305b\u3093\u3002\u3002\u3002\n\u3000\n2. plugin\u3092\u53d6\u5f97\u3059\u308b\nhttps://rpm.newrelic.com/accounts/421449/plugins/directory/52\n\u3053\u306e\u30da\u30fc\u30b8\u306e\u4e00\u756a\u4e0b\u306eDonwload\u30dc\u30bf\u30f3\u3088\u308a\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n\u3067\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u5c55\u958b\u3057\u3066\u3001/usr/local/newrelic-mysql\u306b\u7f6e\u304f\n$ tar zxvf newrelic_mysql_plugin-1.0.7.tar.gz\n$ mv ./newrelic_mysql_plugin-1.0.7 /usr/local/newrelic-mysql\n$ cd /usr/local/newrelic-mysql\n\n\u3000\n3. MySQL\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3059\u308b\n\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u90e8\u5206\u306f\u9069\u5f53\u306b\u66f8\u304d\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n$ vim mysql_user.sql\n\nCREATE USER newrelic@localhost IDENTIFIED BY PASSWORD '\u30d1\u30b9\u30ef\u30fc\u30c9';\nGRANT PROCESS,REPLICATION CLIENT ON *.* TO newrelic@localhost;\nCREATE USER newrelic@127.0.0.1 IDENTIFIED BY PASSWORD '\u30d1\u30b9\u30ef\u30fc\u30c9';\nGRANT PROCESS,REPLICATION CLIENT ON *.* TO newrelic@127.0.0.1;\n\n\u305d\u3057\u3066\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\n$  mysql -uroot -p < mysql_user.sql\n\n\u3053\u308c\u3067\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\u306f\u5b8c\u4e86\u3002\n\u3000\n4. \u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u306e\u7528\u610f\n\u307e\u305a\u306f\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b\n$ cp config/template_newrelic.properties config/newrelic.properties\n$ cp config/template_mysql.instance.json config/mysql.instance.json\n$ cp config/example_logging.properties config/logging.properties\n\n\u3067\u3001newrelic.properties\u306b\u306f\u81ea\u5206\u306eLicense key\u3092\u5165\u308c\u307e\u3057\u3087\u3046\u3002\n$ vim config/newrelic.properties\nLlicenseKey=\u81ea\u5206\u306e\u30e9\u30a4\u30bb\u30f3\u30b9\u30ad\u30fc\n\n\u6b21\u306b\u3001MySQL\u306e\u63a5\u7d9a\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n$ vim config/mysql.instance.json\n\n[\n    {\n        \"name\" : \"Localhost\",\n        \"host\" : \"localhost\",\n        \"metrics\" : \"status,newrelic\",\n        \"user\" : \"newrelic\",\n        \"passwd\" : \"\u30d1\u30b9\u30ef\u30fc\u30c9\",\n    },\n]\n\n\u3000\n5. \u8a66\u3057\u306b\u8d77\u52d5\u3067\u304d\u308b\u304b\u30c6\u30b9\u30c8\u3057\u3066\u307f\u308b\n$ java -jar newrelic_mysql_plugin-1.0.7.jar\nINFO: New Relic monitor started\n\n\u3053\u308c\u3067\u300cINFO: New Relic monitor started\u300d\u3063\u3066\u3067\u308c\u3070\u3001\u554f\u984c\u306a\u3044\u3067\u3059\u3002\n\u3000\n6. \u81ea\u52d5\u8d77\u52d5\u306e\u8a2d\u5b9a\u3068\u304b\u3068\u304b\n$ cp etc/init.d/newrelic-mysql-plugin.rh /etc/init.d/newrelic-mysql\n$ chmod +x /etc/init.d/newrelic-mysql\n$ chkconfig newrelic-mysql on\n\n\u3053\u308c\u3067\u3042\u3068\u306f\u30ea\u30ed\u30fc\u30c9\u3059\u308c\u3070\u7ba1\u7406\u753b\u9762\u5074\u306bMySQL\u306e\u9805\u76ee\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nNew Relic\u304c\u308f\u3067\u3053\u3093\u306a\u611f\u3058\u3067\u898b\u308c\u307e\u3059\u3088\u30fc\u3002\n\n\u53c2\u8003\nhttp://youtu.be/wp260UT-GkM\nhttps://github.com/newrelic-platform/newrelic_mysql_java_plugin\nMySQL\u3068\u304b\u305d\u306e\u8fba\u306f\u5165\u3063\u3066\u3044\u308b\u306e\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u4eca\u56de\u8a66\u3057\u3066\u307f\u305f\u74b0\u5883\u306eMySQL\u306f5.6\u7cfb\u3067\u3059\u3002\n\n1. \u307e\u305a\u306fJava\u3092\u5165\u308c\u308b\n\nopenjdk\u3067\u5927\u4e08\u592b\u307f\u305f\u3044\u306a\u306e\u3067\u666e\u901a\u306byum\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n```\n$ sudo yum install java-1.6.0-openjdk.x86_64\n```\n\u203b\u666e\u901a\u306byum install java\u3068\u304b\u3084\u3063\u3066\u3057\u307e\u3046\u3068jre1.5\u7cfb\u304c\u5165\u3063\u3066\u3057\u307e\u3044\u52d5\u304d\u307e\u305b\u3093\u3002\u3002\u3002\n\u3000\n2. plugin\u3092\u53d6\u5f97\u3059\u308b\nhttps://rpm.newrelic.com/accounts/421449/plugins/directory/52\n\u3053\u306e\u30da\u30fc\u30b8\u306e\u4e00\u756a\u4e0b\u306eDonwload\u30dc\u30bf\u30f3\u3088\u308a\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n\n\u3067\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u5c55\u958b\u3057\u3066\u3001/usr/local/newrelic-mysql\u306b\u7f6e\u304f\n\n```\n$ tar zxvf newrelic_mysql_plugin-1.0.7.tar.gz\n$ mv ./newrelic_mysql_plugin-1.0.7 /usr/local/newrelic-mysql\n$ cd /usr/local/newrelic-mysql\n```\n\u3000\n3. MySQL\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3059\u308b\n\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u90e8\u5206\u306f\u9069\u5f53\u306b\u66f8\u304d\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\n$ vim mysql_user.sql\n\nCREATE USER newrelic@localhost IDENTIFIED BY PASSWORD '\u30d1\u30b9\u30ef\u30fc\u30c9';\nGRANT PROCESS,REPLICATION CLIENT ON *.* TO newrelic@localhost;\nCREATE USER newrelic@127.0.0.1 IDENTIFIED BY PASSWORD '\u30d1\u30b9\u30ef\u30fc\u30c9';\nGRANT PROCESS,REPLICATION CLIENT ON *.* TO newrelic@127.0.0.1;\n```\n\n\u305d\u3057\u3066\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\n\n```\n$  mysql -uroot -p < mysql_user.sql\n```\n\u3053\u308c\u3067\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\u306f\u5b8c\u4e86\u3002\n\u3000\n4. \u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u306e\u7528\u610f\n\u307e\u305a\u306f\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b\n\n```\n$ cp config/template_newrelic.properties config/newrelic.properties\n$ cp config/template_mysql.instance.json config/mysql.instance.json\n$ cp config/example_logging.properties config/logging.properties\n```\n\n\u3067\u3001newrelic.properties\u306b\u306f\u81ea\u5206\u306eLicense key\u3092\u5165\u308c\u307e\u3057\u3087\u3046\u3002\n\n```\n$ vim config/newrelic.properties\nLlicenseKey=\u81ea\u5206\u306e\u30e9\u30a4\u30bb\u30f3\u30b9\u30ad\u30fc\n```\n\u6b21\u306b\u3001MySQL\u306e\u63a5\u7d9a\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n```\n$ vim config/mysql.instance.json\n```\n```json\n[\n    {\n        \"name\" : \"Localhost\",\n        \"host\" : \"localhost\",\n        \"metrics\" : \"status,newrelic\",\n        \"user\" : \"newrelic\",\n        \"passwd\" : \"\u30d1\u30b9\u30ef\u30fc\u30c9\",\n    },\n]\n```\n\u3000\n5. \u8a66\u3057\u306b\u8d77\u52d5\u3067\u304d\u308b\u304b\u30c6\u30b9\u30c8\u3057\u3066\u307f\u308b\n\n```\n$ java -jar newrelic_mysql_plugin-1.0.7.jar\nINFO: New Relic monitor started\n```\n\n\u3053\u308c\u3067\u300cINFO: New Relic monitor started\u300d\u3063\u3066\u3067\u308c\u3070\u3001\u554f\u984c\u306a\u3044\u3067\u3059\u3002\n\u3000\n6. \u81ea\u52d5\u8d77\u52d5\u306e\u8a2d\u5b9a\u3068\u304b\u3068\u304b\n\n```\n$ cp etc/init.d/newrelic-mysql-plugin.rh /etc/init.d/newrelic-mysql\n$ chmod +x /etc/init.d/newrelic-mysql\n$ chkconfig newrelic-mysql on\n```\n\u3053\u308c\u3067\u3042\u3068\u306f\u30ea\u30ed\u30fc\u30c9\u3059\u308c\u3070\u7ba1\u7406\u753b\u9762\u5074\u306bMySQL\u306e\u9805\u76ee\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nNew Relic\u304c\u308f\u3067\u3053\u3093\u306a\u611f\u3058\u3067\u898b\u308c\u307e\u3059\u3088\u30fc\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2013-09-16 16.06.43.png](https://qiita-image-store.s3.amazonaws.com/0/2095/f011b4db-2258-435f-02ce-a31231b6b560.png)\n\n\n**\u53c2\u8003**\nhttp://youtu.be/wp260UT-GkM\nhttps://github.com/newrelic-platform/newrelic_mysql_java_plugin\n\n\n\n\n", "tags": ["newrelic", "MySQL"]}