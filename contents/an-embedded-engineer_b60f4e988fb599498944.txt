{"context": " More than 1 year has passed since last update.\n\n\u80cc\u666f\n\nMac\u3067C\u30bd\u30fc\u30b9\u306e\u69cb\u6587\u89e3\u6790\u3092\u884c\u3044\u305f\u304f\u3066\u3001libclang\u3067\u89e3\u6790\u3059\u308b\u3053\u3068\u306b\nlibclang(C\u8a00\u8a9e)\u3067\u89e3\u6790\u7528\u30bd\u30fc\u30b9\u3092\u66f8\u304f\u306e\u306f\u5927\u5909\u305d\u3046\nC#\u3067libclang\u3092\u4f7f\u7528\u3067\u304d\u308bClangSharp\u304cNuGet\u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u306e\u3092\u767a\u898b\n\n\u516c\u5f0f\u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u30d3\u30eb\u30c9\u6e08\u307f\u306elibclang.dylib\u3060\u3068DllNotFoundException\u304c\u767a\u751f\u3057\u3066\u4f7f\u3048\u306a\u3044\n\n\n\u539f\u56e0\u3068\u89e3\u6c7a\u7b56\n\u539f\u56e0\u306flibclang.dylib\u304cx86_64(64bit)\u5411\u3051\u306b\u30d3\u30eb\u30c9\u3055\u308c\u3066\u3044\u308b\u306e\u306b\u5bfe\u3057\u3066\u3001Xamarin Studio\u3067\u30d3\u30eb\u30c9\u3057\u3066\u751f\u6210\u3055\u308c\u308b\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u304ci386(32bit)\u5411\u3051\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u304c\u7570\u306a\u308b\u3068\u6012\u3089\u308c\u308b\nXamarin Studio \u306f\u73fe\u72b6x86_64\u5411\u3051\u306e\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u306f\u751f\u6210\u3067\u304d\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001clang\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u30d3\u30eb\u30c9\u3057\u3066i386\u5411\u3051\u306elibclang.dylib\u3092\u751f\u6210\u3059\u308b\u3002\n\u307e\u305f\u30bd\u30fc\u30b9\u306b\u6a19\u6e96\u3067\u4ed8\u3044\u3066\u3044\u308bmake\u74b0\u5883\u3067i386\u5411\u3051\u306e\u30d0\u30a4\u30ca\u30ea\u3092\u30d3\u30eb\u30c9\u3057\u3088\u3046\u3068\u3057\u305f\u3068\u3053\u308d\u9014\u4e2d\u3067\u30d3\u30eb\u30c9\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u305f\u3081\u3001Cmake + ninja1\u3067\u30d3\u30eb\u30c9\u3059\u308b\u3002\n\n\u74b0\u5883\n\nMac OSX 10.10 Yosemite\nXamarin Studio 5.7.1\nclang 3.6\n\n\nclang\u30d3\u30eb\u30c9\n\nLLVM\u306eSVN\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u6700\u65b0\u7248\u30bd\u30fc\u30b9\u3092\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\n\n$ svn co http://llvm.org/svn/llvm-project/llvm/trunk llvm\n$ cd llvm/tools\n$ svn co http://llvm.org/svn/llvm-project/cfe/trunk clang\n$ cd ../../\n$ cd llvm/tools/clang/tools\n$ svn co http://llvm.org/svn/llvm-project/clang-tools-extra/trunk extra\n$ cd ../../../../\n$ cd llvm/projects\n$ svn co http://llvm.org/svn/llvm-project/compiler-rt/trunk compiler-rt\n$ cd ../../\n\n\n\nCmake\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n$ cd llvm\n$ git clone git://cmake.org/stage/cmake.git\n$ cd cmake\n$ git checkout next\n$ ./bootstrap\n$ make\n$ sudo make install\n\n\n\nninja\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n$ cd llvm\n$ git clone https://github.com/martine/ninja.git\n$ cd ninja\n$ git checkout release\n$ ./bootstrap.py\n$ sudo cp ninja /usr/bin/\n\n\n\nCmake\u3067ninja\u7528\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3057\u30d3\u30eb\u30c923\n\n\n$ mkdir llvm/build\n$ cd llvm/build\n$ cmake -G Ninja ../llvm -DCMAKE_BUILD_TYPE=Release -DCMAKE_C_FLAGS=\"-arch i386\" -DCMAKE_CXX_FLAGS=\"-arch i386\"\n$ ninja\n\n\n\nllvm/build/lib\u4ee5\u4e0b\u306blibclang.3.6.dylib\u304c\u751f\u6210\u3055\u308c\u308b\n\n\n\u4f7f\u3044\u65b9\n\nXamarin Studio\u3092\u8d77\u52d5\u3057\u3066\u3001\u65b0\u898fC# \u30b3\u30f3\u30bd\u30fc\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\n\u30e1\u30cb\u30e5\u30fc\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8->Add NuGet Packages...\u3092\u958b\u304f\n\nclang.sharp\u3067\u691c\u7d22\u3057\u3001Add Package\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u5b9f\u884c\u30d5\u30a9\u30eb\u30c0\u3068\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306blibclang.3.6.dylib\u3092\u30b3\u30d4\u30fc\n\nlibclang.dylib\u306b\u30ea\u30cd\u30fc\u30e0\n\u89e3\u6790\u7528\u306e\u30bd\u30fc\u30b9\u3092\u8a18\u8ff0\u3059\u308b\n\n\nmain.c\n#include <stdio.h>\n\nint main(void)\n{\n    printf(\"Hello, World!\");\n}\n\n\n\nProgram.cs\nusing System;\nusing ClangSharp;\n\nnamespace ClangNet\n{\n    class MainClass\n    {\n        /// <summary>\n        /// Main Method\n        /// </summary>\n        /// <param name=\"args\">The command-line arguments.</param>\n        public static void Main(string[] args)\n        {\n            /* Create Index */\n            var index = new Index(true, true);\n\n            /* Clang Arguments */\n            var arg = new string[1]{ \"\" };\n\n            /* Create Translation Units */\n            var tu = index.CreateTranslationUnit(\"src/main.c\", arg, null, TranslationUnitFlags.DetailedPreprocessingRecord);\n\n            /* Creation Success */\n            if(tu != null)\n            {\n                /* Get Translation Unit Cursor */\n                var cursor = tu.Cursor;\n\n                /* Visit Children */\n                cursor.VisitChildren(VisitChildrenCallback);\n\n                /* Dispose Translation Unit */\n                tu.Dispose();\n            }\n\n            /* Dispose Index */\n            index.Dispose();\n        }\n\n        /// <summary>\n        /// Visit Children\n        /// </summary>\n        /// <returns>Child Visit Result</returns>\n        /// <param name=\"cursor\">Cursor</param>\n        /// <param name=\"parent\">Parent</param>\n        public static Cursor.ChildVisitResult VisitChildrenCallback(Cursor cursor, Cursor parent)\n        {\n            /* Dump Cursor Kind & Cursor Spelling */\n            Console.WriteLine(\"{0} : {1}\", cursor.Kind, cursor.Spelling);\n\n            /* Visit Recursively */\n            return Cursor.ChildVisitResult.Recurse;\n        }\n    }\n}\n\n\n\n\n\u5b9f\u884c\u7d50\u679c\nMacroDefinition : __llvm__\nMacroDefinition : __clang__\nMacroDefinition : __clang_major__\n\n~ \u7701\u7565 ~\n\nFunctionDecl : main\nCompoundStmt : \nCallExpr : printf\nUnexposedExpr : printf\nDeclRefExpr : printf\nUnexposedExpr : \nUnexposedExpr : \nStringLiteral : \"Hello, World!\"\n\n\n\n\n\n\nninja : make\u3088\u308a\u9ad8\u901f\u306a\u30d3\u30eb\u30c9\u30b7\u30b9\u30c6\u30e0\u00a0\u21a9\n\n\n-DCMAKE_BUILD_TYPE=Release : Release\u30d3\u30eb\u30c9\u00a0\u21a9\n\n\n-DCMAKE_C_FLAGS=\"-arch i386\" -DCMAKE_CXX_FLAGS=\"-arch i386\" : i386\u5411\u3051\u306e\u30d0\u30a4\u30ca\u30ea\u3092\u751f\u6210\u00a0\u21a9\n\n\n\n\n## \u80cc\u666f\n+ Mac\u3067C\u30bd\u30fc\u30b9\u306e\u69cb\u6587\u89e3\u6790\u3092\u884c\u3044\u305f\u304f\u3066\u3001libclang\u3067\u89e3\u6790\u3059\u308b\u3053\u3068\u306b\n+ libclang(C\u8a00\u8a9e)\u3067\u89e3\u6790\u7528\u30bd\u30fc\u30b9\u3092\u66f8\u304f\u306e\u306f\u5927\u5909\u305d\u3046\n+ C#\u3067libclang\u3092\u4f7f\u7528\u3067\u304d\u308b[ClangSharp](\"https://github.com/SimonRichards/clang-sharp\")\u304cNuGet\u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u306e\u3092\u767a\u898b\n+ [\u516c\u5f0f](\"http://llvm.org/releases/3.6.0/clang+llvm-3.6.0-x86_64-apple-darwin.tar.xz\")\u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u30d3\u30eb\u30c9\u6e08\u307f\u306e`libclang.dylib`\u3060\u3068`DllNotFoundException`\u304c\u767a\u751f\u3057\u3066\u4f7f\u3048\u306a\u3044\n\n## \u539f\u56e0\u3068\u89e3\u6c7a\u7b56\n\u539f\u56e0\u306f`libclang.dylib`\u304c`x86_64(64bit)`\u5411\u3051\u306b\u30d3\u30eb\u30c9\u3055\u308c\u3066\u3044\u308b\u306e\u306b\u5bfe\u3057\u3066\u3001Xamarin Studio\u3067\u30d3\u30eb\u30c9\u3057\u3066\u751f\u6210\u3055\u308c\u308b\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u304c`i386(32bit)`\u5411\u3051\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u304c\u7570\u306a\u308b\u3068\u6012\u3089\u308c\u308b\n\nXamarin Studio \u306f\u73fe\u72b6`x86_64`\u5411\u3051\u306e\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u306f\u751f\u6210\u3067\u304d\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001clang\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u30d3\u30eb\u30c9\u3057\u3066`i386`\u5411\u3051\u306e`libclang.dylib`\u3092\u751f\u6210\u3059\u308b\u3002\n\n\u307e\u305f\u30bd\u30fc\u30b9\u306b\u6a19\u6e96\u3067\u4ed8\u3044\u3066\u3044\u308b`make`\u74b0\u5883\u3067`i386`\u5411\u3051\u306e\u30d0\u30a4\u30ca\u30ea\u3092\u30d3\u30eb\u30c9\u3057\u3088\u3046\u3068\u3057\u305f\u3068\u3053\u308d\u9014\u4e2d\u3067\u30d3\u30eb\u30c9\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u305f\u3081\u3001`Cmake` + `ninja`[^1]\u3067\u30d3\u30eb\u30c9\u3059\u308b\u3002\n\n[^1]: `ninja` : `make`\u3088\u308a\u9ad8\u901f\u306a\u30d3\u30eb\u30c9\u30b7\u30b9\u30c6\u30e0\n\n## \u74b0\u5883\n+ Mac OSX 10.10 Yosemite\n+ Xamarin Studio 5.7.1\n+ clang 3.6\n\n## clang\u30d3\u30eb\u30c9\n\n+ LLVM\u306eSVN\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u6700\u65b0\u7248\u30bd\u30fc\u30b9\u3092\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\n\n```bash\n$ svn co http://llvm.org/svn/llvm-project/llvm/trunk llvm\n$ cd llvm/tools\n$ svn co http://llvm.org/svn/llvm-project/cfe/trunk clang\n$ cd ../../\n$ cd llvm/tools/clang/tools\n$ svn co http://llvm.org/svn/llvm-project/clang-tools-extra/trunk extra\n$ cd ../../../../\n$ cd llvm/projects\n$ svn co http://llvm.org/svn/llvm-project/compiler-rt/trunk compiler-rt\n$ cd ../../\n```\n\n+ `Cmake`\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ cd llvm\n$ git clone git://cmake.org/stage/cmake.git\n$ cd cmake\n$ git checkout next\n$ ./bootstrap\n$ make\n$ sudo make install\n```\n\n+ `ninja`\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ cd llvm\n$ git clone https://github.com/martine/ninja.git\n$ cd ninja\n$ git checkout release\n$ ./bootstrap.py\n$ sudo cp ninja /usr/bin/\n```\n\n+ `Cmake`\u3067`ninja`\u7528\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3057\u30d3\u30eb\u30c9[^2][^3]\n\n[^2]: `-DCMAKE_BUILD_TYPE=Release` : Release\u30d3\u30eb\u30c9\n[^3]: `-DCMAKE_C_FLAGS=\"-arch i386\" -DCMAKE_CXX_FLAGS=\"-arch i386\"` : i386\u5411\u3051\u306e\u30d0\u30a4\u30ca\u30ea\u3092\u751f\u6210\n\n```bash\n$ mkdir llvm/build\n$ cd llvm/build\n$ cmake -G Ninja ../llvm -DCMAKE_BUILD_TYPE=Release -DCMAKE_C_FLAGS=\"-arch i386\" -DCMAKE_CXX_FLAGS=\"-arch i386\"\n$ ninja\n```\n\n+ `llvm/build/lib`\u4ee5\u4e0b\u306b`libclang.3.6.dylib`\u304c\u751f\u6210\u3055\u308c\u308b\n\n## \u4f7f\u3044\u65b9\n\n1. Xamarin Studio\u3092\u8d77\u52d5\u3057\u3066\u3001\u65b0\u898fC# \u30b3\u30f3\u30bd\u30fc\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\n2. \u30e1\u30cb\u30e5\u30fc\u306e`\u30d7\u30ed\u30b8\u30a7\u30af\u30c8`->`Add NuGet Packages...`\u3092\u958b\u304f\n3. `clang.sharp`\u3067\u691c\u7d22\u3057\u3001`Add Package`\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n4. \u5b9f\u884c\u30d5\u30a9\u30eb\u30c0\u3068\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b`libclang.3.6.dylib`\u3092\u30b3\u30d4\u30fc\n5. `libclang.dylib`\u306b\u30ea\u30cd\u30fc\u30e0\n5. \u89e3\u6790\u7528\u306e\u30bd\u30fc\u30b9\u3092\u8a18\u8ff0\u3059\u308b\n\n```c:main.c\n#include <stdio.h>\n\nint main(void)\n{\n\tprintf(\"Hello, World!\");\n}\n```\n\n```c#:Program.cs\nusing System;\nusing ClangSharp;\n\nnamespace ClangNet\n{\n\tclass MainClass\n\t{\n\t\t/// <summary>\n\t\t/// Main Method\n\t\t/// </summary>\n\t\t/// <param name=\"args\">The command-line arguments.</param>\n\t\tpublic static void Main(string[] args)\n\t\t{\n\t\t\t/* Create Index */\n\t\t\tvar index = new Index(true, true);\n\n\t\t\t/* Clang Arguments */\n\t\t\tvar arg = new string[1]{ \"\" };\n\n\t\t\t/* Create Translation Units */\n\t\t\tvar tu = index.CreateTranslationUnit(\"src/main.c\", arg, null, TranslationUnitFlags.DetailedPreprocessingRecord);\n\n\t\t\t/* Creation Success */\n\t\t\tif(tu != null)\n\t\t\t{\n\t\t\t\t/* Get Translation Unit Cursor */\n\t\t\t\tvar cursor = tu.Cursor;\n\n\t\t\t\t/* Visit Children */\n\t\t\t\tcursor.VisitChildren(VisitChildrenCallback);\n\n\t\t\t\t/* Dispose Translation Unit */\n\t\t\t\ttu.Dispose();\n\t\t\t}\n\n\t\t\t/* Dispose Index */\n\t\t\tindex.Dispose();\n\t\t}\n\n\t\t/// <summary>\n\t\t/// Visit Children\n\t\t/// </summary>\n\t\t/// <returns>Child Visit Result</returns>\n\t\t/// <param name=\"cursor\">Cursor</param>\n\t\t/// <param name=\"parent\">Parent</param>\n\t\tpublic static Cursor.ChildVisitResult VisitChildrenCallback(Cursor cursor, Cursor parent)\n\t\t{\n\t\t\t/* Dump Cursor Kind & Cursor Spelling */\n\t\t\tConsole.WriteLine(\"{0} : {1}\", cursor.Kind, cursor.Spelling);\n\n\t\t\t/* Visit Recursively */\n\t\t\treturn Cursor.ChildVisitResult.Recurse;\n\t\t}\n\t}\n}\n\n```\n\n```bash:\u5b9f\u884c\u7d50\u679c\nMacroDefinition : __llvm__\nMacroDefinition : __clang__\nMacroDefinition : __clang_major__\n\n~ \u7701\u7565 ~\n\nFunctionDecl : main\nCompoundStmt : \nCallExpr : printf\nUnexposedExpr : printf\nDeclRefExpr : printf\nUnexposedExpr : \nUnexposedExpr : \nStringLiteral : \"Hello, World!\"\n```\n", "tags": ["C#", "clang", "mono", "Mac"]}