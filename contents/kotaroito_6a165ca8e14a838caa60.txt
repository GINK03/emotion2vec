{"context": " More than 1 year has passed since last update.\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u904b\u7528\u3057\u3066\u3044\u308b\u3068\u3001\u5b9f\u884c\u4e2d\u306eruby\u30d7\u30ed\u30bb\u30b9\u3067\u4f55\u304c\u8d77\u3053\u3063\u3066\u3044\u308b\u306e\u304b\u77e5\u308a\u305f\u304f\u306a\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001\u300c\u306a\u3093\u304bbug\u304c\u3042\u3063\u3066\u7121\u9650\u30eb\u30fc\u30d7\u306b\u9665\u3063\u3066\u308b\u3063\u307d\u3044\u304c\u3001\u3069\u306e\u90e8\u5206\u304b\u7279\u5b9a\u3067\u304d\u3066\u306a\u3044\u300d\u3068\u304b\u300c\u6642\u9593\u304c\u639b\u304b\u3063\u3066\u308b\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308b\u306f\u305a\u306a\u3093\u3060\u3051\u3069\u3001\u3069\u3053\u304b\u5206\u304b\u3089\u306a\u3044\u300d\u3068\u304b\u3002\nrbtrace \u306f\u305d\u306e\u3088\u3046\u306a\u72b6\u6cc1\u3067\u4f7f\u3048\u308b\u9053\u5177\u306e\u4e00\u3064\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\nrbtrace\nhttps://github.com/tmm1/rbtrace\n\nrbtrace shows you method calls happening inside another ruby process in real time.\nrbtrace works on ruby 1.8 through 2.2 (and beyond), running on linux or mac osx.\nrbtrace is designed to have minimal overhead, and should be safe to run in production.\n\nGithub \u304b\u3089\u305d\u306e\u307e\u307e\u5f15\u7528\u3067\u3059\u304c\u3001ruby \u30d7\u30ed\u30bb\u30b9\u4e2d\u306e\u30e1\u30bd\u30c3\u30c9\u30b3\u30fc\u30eb\u3092\u8868\u793a\u3059\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\n\n\u4f7f\u3063\u3066\u307f\u305f\n\u4f7f\u3044\u65b9\u3082 README \u306e\u901a\u308a\u306a\u3093\u3067\u3059\u304c\u3001Rails \u3067\u3042\u308c\u3070 Gemfile \u306b\ngem 'rbtrace'\n\n\u3068\u66f8\u3044\u3066\u304a\u3051\u3070 ok \u3067\u3059\u3002\n\n--firehose \u30aa\u30d7\u30b7\u30e7\u30f3\nfirehose \u306f \u5168\u3066\u306e\u30e1\u30bd\u30c3\u30c9\u30b3\u30fc\u30eb\u3092\u51fa\u529b\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001\u4e0b\u8a18\u4f8b\u306f unicorn \u306e worker \u30d7\u30ed\u30bb\u30b9\uff08\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u5f85\u3063\u3066\u3044\u308b\u72b6\u614b\uff09\u306b\u30a2\u30bf\u30c3\u30c1\u3057\u305f\u3082\u306e\u3067\u3059\u3002\n$ bundle exec rbtrace --pid 123456 --firehose\n\n** attached to process 123456\nThread.current <0.000012>\nThread#[] <0.000009>\nKernel#sleep <10.000179>\nThread.current <0.000011>\nThread#[] <0.000010>\nKernel#sleep <1.467024>\nTime.now\n  Time#initialize\n    Fixnum#+ <0.000009>\n  Time#initialize <0.000043>\nTime.now <0.000071>\n\nTime#to_i\n  Fixnum#divmod <0.000012>\nTime#to_i <0.000085>\n\nUnicorn::Worker#tick=\n  Raindrops#[]= <0.000011>\nUnicorn::Worker#tick= <0.000139>\n\n\n--methods \u30aa\u30d7\u30b7\u30e7\u30f3\n\u5b9f\u969b\u306b worker \u30d7\u30ed\u30bb\u30b9\u304c\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u308b\u3068\u3001\u3059\u3054\u3044\u52e2\u3044\u3067\u51fa\u529b\u3055\u308c\u308b\u306e\u3067\u9069\u5b9c\u7d5e\u3063\u3066\u3042\u3052\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001SQL \u306e\u5b9f\u884c\u3060\u3051\u306b\u7d5e\u308a\u305f\u3044\u6642\u306f --methods \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u3068\u3088\u3044\u3067\u3059\u3002\n$ bundle exec rbtrace --pid 123456 -m 'ActiveRecord::ConnectionAdapters::Mysql2Adapter#execute(sql)'\n\n*** attached to process 123456\nActiveRecord::ConnectionAdapters::Mysql2Adapter#execute(sql=\"SELECT  `users`.* FROM `users` WHERE `users`.`id` = 123 LIMIT 1\") <0.001091>\nActiveRecord::ConnectionAdapters::Mysql2Adapter#execute(sql=\"SHOW FULL FIELDS FROM `users`\") <0.012188>\nActiveRecord::ConnectionAdapters::Mysql2Adapter#execute(sql=\"SHOW TABLES \") <0.000827>\nActiveRecord::ConnectionAdapters::Mysql2Adapter#execute(sql=\"SELECT `resources`.* FROM `resources` WHERE `resources`.`id` = 456 <0.001423>\n\n\u203b mysql2 \u30a2\u30c0\u30d7\u30bf\u306e\u4f8b\u306a\u306e\u3067\u3001\u5229\u7528\u3057\u3066\u3044\u308b\u30a2\u30c0\u30d7\u30bf\u306b\u5fdc\u3058\u3066\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\nslow \u30aa\u30d7\u30b7\u30e7\u30f3\n\u6307\u5b9a\u306e\u6642\u9593\uff08\u30df\u30ea\u30bb\u30ab\u30f3\u30c9\u5358\u4f4d\uff09\u3092\u8981\u3057\u305f\u30e1\u30bd\u30c3\u30c9\u30b3\u30fc\u30eb\u306b\u7d5e\u308a\u8fbc\u3080\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\u4ee5\u4e0b\u306f 100ms \u306e\u4f8b\u3002\n$ bundle exec rbtrace --pid 123456 --slow=100\n\nActiveRecord::ConnectionAdapters::Mysql2Adapter#execute(sql=\"SELECT  `users`.* FROM `users` WHERE `users`.`id` = 123 LIMIT 1\") <0.001091>\nActiveRecord::ConnectionAdapters::Mysql2Adapter#execute(sql=\"SHOW FULL FIELDS FROM `users`\") <0.012188>\n\n\u305f\u3060\u3057\u3001\u30c8\u30ec\u30fc\u30b9\u306b\u8868\u793a\u3055\u308c\u308b\u6642\u9593\uff08\u4f8b\uff1a<0.012188> \uff09\u306f\u79d2\u5358\u4f4d\u3067\u3042\u308b\u3053\u3068\u306b\u6ce8\u610f\u3002\n\n--eval \u30aa\u30d7\u30b7\u30e7\u30f3\neval \u3082\u3067\u304d\u307e\u3059\u3002\n$ bundle exec rbtrace --pid 123456 -e 'p Rails.env'\n\n*** attached to process 123456\n>> p Rails.env\n=> \"sandbox\"\n\n\nProduction \u3067\u4f7f\u3063\u3066 ok \uff1f\n\nrbtrace is designed to have minimal overhead, and should be safe to run in production.\n\nREADME \u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u901a\u308a\u3001production \u3067\u306e\u5229\u7528\u304c\u60f3\u5b9a\u3055\u308c\u3066\u307e\u3059\u3002\nAuthor \u306e Aman Gupta \u6c0f \u306f GitHub, Inc \u52e4\u52d9\u3067\u3001Ruby\u30b3\u30df\u30c3\u30bf \u3067\u3082\u3042\u308b\u306e\u3067\u3001safe to run in production \u306f\u984d\u9762\u901a\u308a\u306b\u53d7\u3051\u53d6\u3063\u3066\u5927\u4e08\u592b\u3067\u3057\u3087\u3046\u3002\nAman Gupta, GitHub\u3067\u306eRuby\u306e\u4f7f\u308f\u308c\u65b9\u3068\u9ad8\u901f\u5316\u306e\u30c6\u30af\u30cb\u30c3\u30af\u3092\u7d39\u4ecb \uff5e RubyKaigi 2014 \u57fa\u8abf\u8b1b\u6f14 3\u65e5\u76ee\n\nAs a newcomer to a large codebase, I often found myself wondering what was happening inside various ruby processes running in production. \nOut of this curiosity was born rbtrace, one of first tools I wrote at github that we continue to use to this day. If you haven\u2019t used retrace I highly highly recommend checking it out. It has a number of features that allow live introspection of running ruby processes.\n\n\u5f15\u7528\u5143\uff1a Ruby 2.1 in Production, Ruby Kaigi 2014 \u767a\u8868\u8cc7\u6599\n\n\u307e\u3068\u3081\n\u7d20\u6674\u3089\u3057\u3044\u30c4\u30fc\u30eb\u306a\u306e\u306b\u3001\u610f\u5916\u3068\u65e5\u672c\u8a9e\u8a18\u4e8b\u304c\u306a\u3044\u306e\u3067\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u904b\u7528\u3057\u3066\u3044\u308b\u3068\u3001\u5b9f\u884c\u4e2d\u306eruby\u30d7\u30ed\u30bb\u30b9\u3067\u4f55\u304c\u8d77\u3053\u3063\u3066\u3044\u308b\u306e\u304b\u77e5\u308a\u305f\u304f\u306a\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u4f8b\u3048\u3070\u3001\u300c\u306a\u3093\u304bbug\u304c\u3042\u3063\u3066\u7121\u9650\u30eb\u30fc\u30d7\u306b\u9665\u3063\u3066\u308b\u3063\u307d\u3044\u304c\u3001\u3069\u306e\u90e8\u5206\u304b\u7279\u5b9a\u3067\u304d\u3066\u306a\u3044\u300d\u3068\u304b\u300c\u6642\u9593\u304c\u639b\u304b\u3063\u3066\u308b\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308b\u306f\u305a\u306a\u3093\u3060\u3051\u3069\u3001\u3069\u3053\u304b\u5206\u304b\u3089\u306a\u3044\u300d\u3068\u304b\u3002\n\nrbtrace \u306f\u305d\u306e\u3088\u3046\u306a\u72b6\u6cc1\u3067\u4f7f\u3048\u308b\u9053\u5177\u306e\u4e00\u3064\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n## rbtrace\n\nhttps://github.com/tmm1/rbtrace\n\n> rbtrace shows you method calls happening inside another ruby process in real time.\n> \n> rbtrace works on ruby 1.8 through 2.2 (and beyond), running on linux or mac osx.\n> \n> rbtrace is designed to have minimal overhead, and should be safe to run in production.\n\nGithub \u304b\u3089\u305d\u306e\u307e\u307e\u5f15\u7528\u3067\u3059\u304c\u3001ruby \u30d7\u30ed\u30bb\u30b9\u4e2d\u306e\u30e1\u30bd\u30c3\u30c9\u30b3\u30fc\u30eb\u3092\u8868\u793a\u3059\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\n\n\n\n\n## \u4f7f\u3063\u3066\u307f\u305f\n\n\u4f7f\u3044\u65b9\u3082 README \u306e\u901a\u308a\u306a\u3093\u3067\u3059\u304c\u3001Rails \u3067\u3042\u308c\u3070 Gemfile \u306b\n\n    gem 'rbtrace'\n\n\u3068\u66f8\u3044\u3066\u304a\u3051\u3070 ok \u3067\u3059\u3002\n\n#### --firehose \u30aa\u30d7\u30b7\u30e7\u30f3\n\nfirehose \u306f \u5168\u3066\u306e\u30e1\u30bd\u30c3\u30c9\u30b3\u30fc\u30eb\u3092\u51fa\u529b\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001\u4e0b\u8a18\u4f8b\u306f unicorn \u306e worker \u30d7\u30ed\u30bb\u30b9\uff08\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u5f85\u3063\u3066\u3044\u308b\u72b6\u614b\uff09\u306b\u30a2\u30bf\u30c3\u30c1\u3057\u305f\u3082\u306e\u3067\u3059\u3002\n\n```bash\n$ bundle exec rbtrace --pid 123456 --firehose\n\n** attached to process 123456\nThread.current <0.000012>\nThread#[] <0.000009>\nKernel#sleep <10.000179>\nThread.current <0.000011>\nThread#[] <0.000010>\nKernel#sleep <1.467024>\nTime.now\n  Time#initialize\n    Fixnum#+ <0.000009>\n  Time#initialize <0.000043>\nTime.now <0.000071>\n\nTime#to_i\n  Fixnum#divmod <0.000012>\nTime#to_i <0.000085>\n\nUnicorn::Worker#tick=\n  Raindrops#[]= <0.000011>\nUnicorn::Worker#tick= <0.000139>\n```\n\n#### --methods \u30aa\u30d7\u30b7\u30e7\u30f3\n\n\u5b9f\u969b\u306b worker \u30d7\u30ed\u30bb\u30b9\u304c\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u308b\u3068\u3001\u3059\u3054\u3044\u52e2\u3044\u3067\u51fa\u529b\u3055\u308c\u308b\u306e\u3067\u9069\u5b9c\u7d5e\u3063\u3066\u3042\u3052\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001SQL \u306e\u5b9f\u884c\u3060\u3051\u306b\u7d5e\u308a\u305f\u3044\u6642\u306f --methods \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u3068\u3088\u3044\u3067\u3059\u3002\n\n```bash\n$ bundle exec rbtrace --pid 123456 -m 'ActiveRecord::ConnectionAdapters::Mysql2Adapter#execute(sql)'\n\n*** attached to process 123456\nActiveRecord::ConnectionAdapters::Mysql2Adapter#execute(sql=\"SELECT  `users`.* FROM `users` WHERE `users`.`id` = 123 LIMIT 1\") <0.001091>\nActiveRecord::ConnectionAdapters::Mysql2Adapter#execute(sql=\"SHOW FULL FIELDS FROM `users`\") <0.012188>\nActiveRecord::ConnectionAdapters::Mysql2Adapter#execute(sql=\"SHOW TABLES \") <0.000827>\nActiveRecord::ConnectionAdapters::Mysql2Adapter#execute(sql=\"SELECT `resources`.* FROM `resources` WHERE `resources`.`id` = 456 <0.001423>\n```\n\n\u203b mysql2 \u30a2\u30c0\u30d7\u30bf\u306e\u4f8b\u306a\u306e\u3067\u3001\u5229\u7528\u3057\u3066\u3044\u308b\u30a2\u30c0\u30d7\u30bf\u306b\u5fdc\u3058\u3066\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n#### slow \u30aa\u30d7\u30b7\u30e7\u30f3\n\n\u6307\u5b9a\u306e\u6642\u9593\uff08\u30df\u30ea\u30bb\u30ab\u30f3\u30c9\u5358\u4f4d\uff09\u3092\u8981\u3057\u305f\u30e1\u30bd\u30c3\u30c9\u30b3\u30fc\u30eb\u306b\u7d5e\u308a\u8fbc\u3080\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\u4ee5\u4e0b\u306f 100ms \u306e\u4f8b\u3002\n\n```bash\n$ bundle exec rbtrace --pid 123456 --slow=100\n\nActiveRecord::ConnectionAdapters::Mysql2Adapter#execute(sql=\"SELECT  `users`.* FROM `users` WHERE `users`.`id` = 123 LIMIT 1\") <0.001091>\nActiveRecord::ConnectionAdapters::Mysql2Adapter#execute(sql=\"SHOW FULL FIELDS FROM `users`\") <0.012188>\n```\n\n\u305f\u3060\u3057\u3001\u30c8\u30ec\u30fc\u30b9\u306b\u8868\u793a\u3055\u308c\u308b\u6642\u9593\uff08\u4f8b\uff1a<0.012188> \uff09\u306f\u79d2\u5358\u4f4d\u3067\u3042\u308b\u3053\u3068\u306b\u6ce8\u610f\u3002\n\n#### --eval \u30aa\u30d7\u30b7\u30e7\u30f3\n\neval \u3082\u3067\u304d\u307e\u3059\u3002\n\n```\n$ bundle exec rbtrace --pid 123456 -e 'p Rails.env'\n\n*** attached to process 123456\n>> p Rails.env\n=> \"sandbox\"\n```\n\n## Production \u3067\u4f7f\u3063\u3066 ok \uff1f\n\n> rbtrace is designed to have minimal overhead, and should be safe to run in production.\n\nREADME \u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u901a\u308a\u3001production \u3067\u306e\u5229\u7528\u304c\u60f3\u5b9a\u3055\u308c\u3066\u307e\u3059\u3002\nAuthor \u306e Aman Gupta \u6c0f \u306f GitHub, Inc \u52e4\u52d9\u3067\u3001Ruby\u30b3\u30df\u30c3\u30bf \u3067\u3082\u3042\u308b\u306e\u3067\u3001safe to run in production \u306f\u984d\u9762\u901a\u308a\u306b\u53d7\u3051\u53d6\u3063\u3066\u5927\u4e08\u592b\u3067\u3057\u3087\u3046\u3002\n\n[Aman Gupta, GitHub\u3067\u306eRuby\u306e\u4f7f\u308f\u308c\u65b9\u3068\u9ad8\u901f\u5316\u306e\u30c6\u30af\u30cb\u30c3\u30af\u3092\u7d39\u4ecb \uff5e RubyKaigi 2014 \u57fa\u8abf\u8b1b\u6f14 3\u65e5\u76ee](http://gihyo.jp/news/report/01/rubykaigi2014/0003)\n\n> As a newcomer to a large codebase, I often found myself wondering what was happening inside various ruby processes running in production. \n> Out of this curiosity was born rbtrace, one of first tools I wrote at github that we continue to use to this day. If you haven\u2019t used retrace I highly highly recommend checking it out. It has a number of features that allow live introspection of running ruby processes.\n\n\u5f15\u7528\u5143\uff1a [Ruby 2.1 in Production](http://bit.ly/ruby21-in-production), Ruby Kaigi 2014 \u767a\u8868\u8cc7\u6599\n\n\n## \u307e\u3068\u3081\n\n\u7d20\u6674\u3089\u3057\u3044\u30c4\u30fc\u30eb\u306a\u306e\u306b\u3001\u610f\u5916\u3068\u65e5\u672c\u8a9e\u8a18\u4e8b\u304c\u306a\u3044\u306e\u3067\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n", "tags": ["Ruby", "Rails", "Gem"]}