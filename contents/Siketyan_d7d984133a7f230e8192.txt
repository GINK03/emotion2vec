{"tags": ["HTML5", "JavaScript", "mp4", "WebM"], "context": "\u3000https://siketyan.sikeserver.com/tools/burn/?u=knh0015 \u306e\u307e\u3068\u3081\u3002\n\n\u3000\u306a\u305c\u4f5c\u3063\u305f\u3057\n\u3000Twitter\u3067\u713c\u304b\u308c\u3066\u308b\u4eba\u304c\u3044\u3066\u3001\u52d5\u753b\u306b\u3057\u3066\u307f\u305f\u304b\u3063\u305f\u306e\u3067\u3002\n\n\u3000\u713c\u304b\u308c\u3066\u308b\u4eba\n\u3000\n\u3000KNH\uff08\u3053\u306e\u306f\uff09\u3055\u3093\n\u3000\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0 #KNH\u713c\u304d \u3067\u6709\u540d\u3002\n\u3000\u3061\u307e\u305f\u3067\u3088\u304f\u713c\u304b\u308c\u3066\u3044\u308b\u3002\n\u3000https://twitter.com/knh0015\n\n\u3000\u52d5\u753b\u306e\u7528\u610f\n\u3000\u708e\u4e0a\u7d20\u6750\u306e\u5236\u4f5c\u306f\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u7d20\u6750\u3092\u304a\u501f\u308a\u3057\u305f\u3002\n\u3000http://commons.nicovideo.jp/material/nc75275\n\u3000\u305f\u3060\u3001\u3053\u308c\u306fRGB\u30c1\u30e3\u30f3\u30cd\u30eb\u3068\u30a2\u30eb\u30d5\u30a1\u30c1\u30e3\u30f3\u30cd\u30eb\u306e\u52d5\u753b\u304c\u5206\u304b\u308c\u3066\u3044\u308b\u306e\u3067\u3001\n\u3000\u52d5\u753b\u7de8\u96c6\u30bd\u30d5\u30c8\u3067\u4e0a\u4e0b\u306b\u4e26\u3079\u30661280\u00d71440px\uff08\u5143\u52d5\u753b\u306f1280\u00d7720px\uff09\u306e\u52d5\u753b\u306b\u66f8\u304d\u51fa\u3057\u305f\u3002\n\u3000\u307e\u305f\u3001Firefox\u3067\u306fMP4\u306e\u518d\u751f\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001WebM\u3078\u306e\u5909\u63db\u3082\u3057\u305f\u3002\n\n\u3000HTML/JS/CSS\u304b\u304d\u304b\u304d\n<!DOCTYPE html>\n<html>\n  <head>\n    <style>\n      body {\n        background-color: black;\n      }\n\n      #output {\n        width: 1280px;\n        height: 720px;\n        margin-top: 128px;\n      }\n\n      #buffer {\n        display: none;\n      }\n\n      #back {\n        width: 1280px;\n        height: 600px;\n        background-image: url(\"<?= $_GET['image'] ?>\");\n        background-size: auto 100%;\n        background-repeat: no-repeat;\n        background-position: center;\n      }\n    </style>\n  </head>\n  <body>\n    <div id=\"back\">\n      <video id=\"video\" style=\"display:none\" autoplay>\n        <source src=\"fire.mp4\" type='video/mp4; codecs=\"h.264\"' />\n        <source src=\"fire.webm\" type='video/webm; codecs=\"vp8\"' />\n      </video>\n      <canvas id=\"output\" width=\"1280\" height=\"720\"></canvas>\n      <canvas id=\"buffer\" width=\"1280\" height=\"1440\"></canvas>\n    </div>\n\n    <script>\n      (function(){\n        var outputCanvas = document.getElementById('output'),\n          output = outputCanvas.getContext('2d'),\n          bufferCanvas = document.getElementById('buffer'),\n          buffer = bufferCanvas.getContext('2d'),\n          video = document.getElementById('video'),\n          width = outputCanvas.width,\n          height = outputCanvas.height,\n          interval;\n\n        function processFrame() {\n          buffer.drawImage(video, 0, 0);\n\n          var image = buffer.getImageData(0, 0, width, height),\n            imageData = image.data,\n            alphaData = buffer.getImageData(0, height, width, height).data;\n\n          for (var i = 3, len = imageData.length; i < len; i = i + 4) {\n            imageData[i] = alphaData[i-1];\n          }\n\n          output.putImageData(image, 0, 0, 0, 0, width, height);\n        }\n\n        video.addEventListener('play', function() {\n          clearInterval(interval);\n          interval = setInterval(processFrame, 40)\n        }, false);\n\n        video.addEventListener('ended', function() {\n          video.play();\n        }, false);\n      })();\n    </script>\n  </body>\n</html>\n\n\n\u300012\u884c\u76ee\uff1abackground-image\u306e\u6307\u5b9a\u306b\u3064\u3044\u3066\n\u3000\u3053\u3053\u3067\u306fPHP\u3092\u4f7f\u7528\u3057\u3066$_GET['image']\u306e\u5185\u5bb9\uff08?image=\u3067\u6307\u5b9a\u3057\u305fURL\uff09\u3092\u51fa\u529b\u3057\u305f\u3002\n\u3000\uff08JavaScript\u3067\u306e\u66f8\u304d\u65b9\u5206\u304b\u3089\u306a\u304b\u3063\u305f\u306a\u3093\u3066\u8a00\u3048\u306a\u3044\uff09\n\u3000\u306a\u304a\u3001\u4eca\u56de\u5236\u4f5c\u3057\u305f\u30da\u30fc\u30b8\u3067\u306fTwitter\u304b\u3089\u306e\u30a2\u30a4\u30b3\u30f3\u53d6\u5f97\u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u304c\u3001\u3053\u3053\u3067\u306f\u7701\u7565\u3059\u308b\u3002\n\n\u3000\u307e\u3068\u3081\n\u3000HTML5\u306f\u3044\u3044\u305e\n\n\u3000\u53c2\u8003\u306b\u3057\u305f\u3082\u306e\n\u3000HTML5 Video with alpha transparency - https://jakearchibald.com/scratch/alphavid/\n\u3000https://siketyan.sikeserver.com/tools/burn/?u=knh0015 \u306e\u307e\u3068\u3081\u3002\n\n##\u3000\u306a\u305c\u4f5c\u3063\u305f\u3057\n\u3000Twitter\u3067\u713c\u304b\u308c\u3066\u308b\u4eba\u304c\u3044\u3066\u3001\u52d5\u753b\u306b\u3057\u3066\u307f\u305f\u304b\u3063\u305f\u306e\u3067\u3002\n\n##\u3000\u713c\u304b\u308c\u3066\u308b\u4eba\n\u3000![KNH\u3055\u3093\u306e\u30a2\u30a4\u30b3\u30f3](https://pbs.twimg.com/profile_images/828221369858920448/l9UnC7ac_normal.jpg)\n\u3000**KNH\uff08\u3053\u306e\u306f\uff09\u3055\u3093**\n\u3000\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0 [#KNH\u713c\u304d](https://twitter.com/search?q=%23KNH\u713c\u304d) \u3067\u6709\u540d\u3002\n\u3000\u3061\u307e\u305f\u3067\u3088\u304f\u713c\u304b\u308c\u3066\u3044\u308b\u3002\n\u3000https://twitter.com/knh0015\n\n##\u3000\u52d5\u753b\u306e\u7528\u610f\n\u3000\u708e\u4e0a\u7d20\u6750\u306e\u5236\u4f5c\u306f\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u7d20\u6750\u3092\u304a\u501f\u308a\u3057\u305f\u3002\n\u3000http://commons.nicovideo.jp/material/nc75275\n\n\u3000\u305f\u3060\u3001\u3053\u308c\u306fRGB\u30c1\u30e3\u30f3\u30cd\u30eb\u3068\u30a2\u30eb\u30d5\u30a1\u30c1\u30e3\u30f3\u30cd\u30eb\u306e\u52d5\u753b\u304c\u5206\u304b\u308c\u3066\u3044\u308b\u306e\u3067\u3001\n\u3000\u52d5\u753b\u7de8\u96c6\u30bd\u30d5\u30c8\u3067\u4e0a\u4e0b\u306b\u4e26\u3079\u30661280\u00d71440px\uff08\u5143\u52d5\u753b\u306f1280\u00d7720px\uff09\u306e\u52d5\u753b\u306b\u66f8\u304d\u51fa\u3057\u305f\u3002\n\u3000\u307e\u305f\u3001Firefox\u3067\u306fMP4\u306e\u518d\u751f\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001WebM\u3078\u306e\u5909\u63db\u3082\u3057\u305f\u3002\n\n##\u3000HTML/JS/CSS\u304b\u304d\u304b\u304d\n```HTML\n<!DOCTYPE html>\n<html>\n  <head>\n    <style>\n      body {\n        background-color: black;\n      }\n\n      #output {\n        width: 1280px;\n        height: 720px;\n        margin-top: 128px;\n      }\n\n      #buffer {\n        display: none;\n      }\n\n      #back {\n        width: 1280px;\n        height: 600px;\n        background-image: url(\"<?= $_GET['image'] ?>\");\n        background-size: auto 100%;\n        background-repeat: no-repeat;\n        background-position: center;\n      }\n    </style>\n  </head>\n  <body>\n    <div id=\"back\">\n      <video id=\"video\" style=\"display:none\" autoplay>\n        <source src=\"fire.mp4\" type='video/mp4; codecs=\"h.264\"' />\n        <source src=\"fire.webm\" type='video/webm; codecs=\"vp8\"' />\n      </video>\n      <canvas id=\"output\" width=\"1280\" height=\"720\"></canvas>\n      <canvas id=\"buffer\" width=\"1280\" height=\"1440\"></canvas>\n    </div>\n\n    <script>\n      (function(){\n        var outputCanvas = document.getElementById('output'),\n          output = outputCanvas.getContext('2d'),\n          bufferCanvas = document.getElementById('buffer'),\n          buffer = bufferCanvas.getContext('2d'),\n          video = document.getElementById('video'),\n          width = outputCanvas.width,\n          height = outputCanvas.height,\n          interval;\n          \n        function processFrame() {\n          buffer.drawImage(video, 0, 0);\n\n          var image = buffer.getImageData(0, 0, width, height),\n            imageData = image.data,\n            alphaData = buffer.getImageData(0, height, width, height).data;\n          \n          for (var i = 3, len = imageData.length; i < len; i = i + 4) {\n            imageData[i] = alphaData[i-1];\n          }\n          \n          output.putImageData(image, 0, 0, 0, 0, width, height);\n        }\n\n        video.addEventListener('play', function() {\n          clearInterval(interval);\n          interval = setInterval(processFrame, 40)\n        }, false);\n        \n        video.addEventListener('ended', function() {\n          video.play();\n        }, false);\n      })();\n    </script>\n  </body>\n</html>\n```\n\n##\u300012\u884c\u76ee\uff1abackground-image\u306e\u6307\u5b9a\u306b\u3064\u3044\u3066\n\u3000\u3053\u3053\u3067\u306fPHP\u3092\u4f7f\u7528\u3057\u3066$_GET['image']\u306e\u5185\u5bb9\uff08?image=\u3067\u6307\u5b9a\u3057\u305fURL\uff09\u3092\u51fa\u529b\u3057\u305f\u3002\n\u3000\uff08JavaScript\u3067\u306e\u66f8\u304d\u65b9\u5206\u304b\u3089\u306a\u304b\u3063\u305f\u306a\u3093\u3066\u8a00\u3048\u306a\u3044\uff09\n\u3000\u306a\u304a\u3001\u4eca\u56de\u5236\u4f5c\u3057\u305f\u30da\u30fc\u30b8\u3067\u306fTwitter\u304b\u3089\u306e\u30a2\u30a4\u30b3\u30f3\u53d6\u5f97\u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u304c\u3001\u3053\u3053\u3067\u306f\u7701\u7565\u3059\u308b\u3002\n\n##\u3000\u307e\u3068\u3081\n\u3000HTML5\u306f\u3044\u3044\u305e\n\n##\u3000\u53c2\u8003\u306b\u3057\u305f\u3082\u306e\n\u3000HTML5 Video with alpha transparency - https://jakearchibald.com/scratch/alphavid/\n"}