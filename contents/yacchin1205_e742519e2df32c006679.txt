{"context": " More than 1 year has passed since last update.TDD is dead. Long live testing.\u3042\u305f\u308a\u306b\u3059\u3054\u304f\u8003\u3048\u3055\u305b\u3089\u308c\u305f\u308a\u3057\u3064\u3064\u3001Java+Selenium\u306aWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u81ea\u52d5\u30c6\u30b9\u30c8\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u7bc9 \u3092\u66f8\u3044\u305f\u308f\u3051\u306a\u3093\u3067\u3059\u304c\u3001\u3053\u308c\u3060\u3051\u3060\u3068\u30c6\u30b9\u30c8\u306f\u81ea\u5206\u304c\u624b\u3067\u3084\u3089\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u304f\u3066\u3001\u5bdd\u3066\u3044\u308b\u6642\u9593\u306b\u969c\u5bb3\u767a\u751f\u3057\u305f\u3089\u3069\u3046\u3059\u308b\u3093\u3060\u3068\u304b\u305d\u3093\u306a\u3053\u3068\u3092\u601d\u3063\u3066\u3057\u307e\u3044\u3084\u3063\u3071\u308a\u7761\u7720\u306e\u8cea\u304c\u3042\u3093\u307e\u308a\u4e0a\u304c\u3089\u306a\u3044\u308f\u3051\u3067\u3059\u3002\u671d\u8d77\u304d\u3066\u3001\u304a\u305d\u308b\u304a\u305d\u308b\u30c6\u30b9\u30c8\u3092\u8d70\u3089\u305b\u3066\u3001\u304f\u305a\u304a\u308c\u308b\u307f\u305f\u3044\u306a\u5c55\u958b\u306f\u5065\u5eb7\u306b\u3088\u304f\u3042\u308a\u307e\u305b\u3093\u3002\n\u305d\u3093\u306a\u3068\u304d\u306fJenkins\u3055\u3093\u306e\u51fa\u756a\u3067\u3059\u3002\u983c\u308c\u308b\u57f7\u4e8b\u306b\u5b9a\u671f\u7684\u306b\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u3066\u304a\u3044\u3066\u3082\u3089\u3048\u308c\u3070\u3001\u969c\u5bb3\u306e\u8d77\u304d\u59cb\u3081\u305f\u6642\u9593\u304c\u660e\u78ba\u306b\u7279\u5b9a\u3067\u304d\u3001\u3054\u3081\u3093\u306a\u3055\u3044\u306e\u5831\u544a\u3084\u554f\u984c\u89e3\u6c7a\u306e\u305f\u3081\u306e\u30ed\u30b0\u89e3\u6790\u306a\u3069\u8272\u3005\u306a\u3082\u306e\u306e\u7cbe\u5ea6\u304c\u4e0a\u304c\u3063\u3066\u6357\u308a\u307e\u3059\u3002\n\n\u3084\u308a\u305f\u3044\u3053\u3068\n\nJenkins\u304b\u3089Selenium\u306e\u30c6\u30b9\u30c8\u3092\u542b\u3080\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u81ea\u52d5\u7684\u306b\u5b9f\u884c\u3057\u305f\u3044\n\n\n\u5bfe\u8c61WebDriver\u306fFirefoxDriver\u3068ChromeDriver\n\n\n\n\n\u74b0\u5883\n\nUbuntu 12.04 LTS\nJenkins ver. 1.560\n\n\n\u624b\u9806\n\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u5fc5\u8981\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092apt-get\u3067\u304b\u304d\u96c6\u3081\u3066\u304f\u308b\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3082\u306e\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002\n\nXvfb\nFirefox\nGoogle Chrome (+chromedriver)\n\n\u307e\u305a\u4eee\u60f3\u7684\u306a\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3092Xvfb\u3067\u4f5c\u3063\u3066\u3001\u305d\u306e\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u4e0a\u3067Firefox\u3084Google Chrome\u3092\u52d5\u304b\u3059\u3001\u3068\u3044\u3063\u305f\u6d41\u308c\u3002\n$ sudo apt-get update\n$ sudo apt-get install xvfb firefox\n\n\u3053\u308c\u3067Xvfb\u3068Firefox\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3002\u3067\u3001\u7d9a\u3044\u3066Chrome\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n$ wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | sudo apt-key add -\n$ sudo sh -c 'echo \"deb http://dl.google.com/linux/chrome/deb/ stable main\" >> /etc/apt/sources.list.d/google.list'\n$ sudo apt-get update\n$ sudo apt-get install google-chrome-stable\n\n\u5148\u306e\u8a18\u4e8b\u3067\u3082\u66f8\u3044\u305f\u3088\u3046\u306b\u3001Firefox\u306f\u30d1\u30b9\u304c\u901a\u3063\u305f\u3060\u3051\u3067Selenium(\u306eFirefoxDriver)\u304b\u3089\u5b9f\u884c\u53ef\u80fd\u306a\u4e00\u65b9\u3001Google Chrome\u306fSelenium(\u306eChromeDriver)\u3068\u306e\u6a4b\u6e21\u3057\u3092\u3059\u308bchromedriver\u3068\u3044\u3046\u5b9f\u884c\u53ef\u80fd\u30d5\u30a1\u30a4\u30eb\u304c\u5225\u306b\u5fc5\u8981\u306b\u306a\u308b\u3002\n\u305d\u306e\u305f\u3081\u3001\u4eca\u56de\u306f\u9069\u5f53\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea/opt/chromedriver/\u3092\u4f5c\u3063\u3066\u3001\u305d\u3053\u306bchromedriver\u3092\u7f6e\u3044\u3066\u304a\u304f\u3053\u3068\u306b\u3059\u308b\u3002\n$ sudo mkdir /opt/chromedriver\n$ cd /opt/chromedriver\n$ sudo wget http://chromedriver.storage.googleapis.com/2.9/chromedriver_linux64.zip\n$ sudo unzip chromedriver_linux64.zip\n$ sudo chmod +x chromedriver\n\n\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306eURL\u306fhttp://chromedriver.storage.googleapis.com/index.html\u3067\u53c2\u7167\u53ef\u80fd\u3002\n\nJenkins\u306e\u8a2d\u5b9a\nJenkins\u306e\u30b8\u30e7\u30d6\u5b9f\u884c\u6642\u306b\u4eee\u60f3\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3092\u4ed5\u8fbc\u3080\u306b\u306f\u3001Xvfb\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u3046\u306e\u304c\u4fbf\u5229\u3002\u4ee5\u4e0b\u306e\u624b\u9806\u3067Jenkins\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u304f\u3002\n\nJenkins\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u304b\u3089\u3001[Jenkins\u306e\u7ba1\u7406]\u30e1\u30cb\u30e5\u30fc\u3092\u9078\u629e\u3057\u3001[\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u7ba1\u7406]\u3092\u9078\u629e\u3001[\u5229\u7528\u53ef\u80fd]\u30bf\u30d6\u306e\u3046\u3061[Xvfb Plugin]\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3001[\u518d\u8d77\u52d5\u305b\u305a\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb]\u3092\u62bc\u3059\u3002\n\n[\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb/\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9]\u753b\u9762\u306b\u5207\u308a\u66ff\u308f\u308b\u306e\u3067\u3001[\u6210\u529f]\u304c\u8868\u793a\u3055\u308c\u308b\u307e\u3067\u5f85\u3064\n[Jenkins\u306e\u7ba1\u7406]\u306b\u623b\u308a\u3001[\u30b7\u30b9\u30c6\u30e0\u306e\u8a2d\u5b9a]\u3092\u9078\u629e\u3059\u308b\n[Xvfb installation]\u9805\u76ee\u4e2d\u306e[Xvfb installation\u8ffd\u52a0]\u30dc\u30bf\u30f3\u3092\u62bc\u3059\n\u3044\u304f\u3064\u304b\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u73fe\u308c\u308b\u306e\u3067\u3001[Name]\u306b DefaultXvfb \u306a\u3069\u3068\u3060\u3051\u5165\u529b\u3057(\u81ea\u7531)\u3001[Directory in which to find Xvfb executable]\u306b\u306f\u4f55\u3082\u5165\u529b\u305b\u305a(\u3053\u308c\u3067Xvfb\u304c\u30d1\u30b9\u304b\u3089\u691c\u7d22\u3055\u308c\u308b)\u3001[\u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb]\u306e\u30c1\u30a7\u30c3\u30af\u3092\u306f\u305a\u3057\u305f\u72b6\u614b\u306b\u3057\u3066\u3001[\u4fdd\u5b58]\u3092\u62bc\u3059\u3002\n\n\n\u3053\u308c\u3067Jenkins\u306e\u30b8\u30e7\u30d6\u3067Xvfb\u306b\u3088\u308b\u4eee\u60f3\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u304c\u5229\u7528\u3067\u304d\u308b\u72b6\u614b\u306b\u306a\u308b\u3002\n\nJenkins\u30b8\u30e7\u30d6\u306e\u8a2d\u5b9a\nJenkins\u4e2d\u306bMaven\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5b9f\u884c\u7528\u306e\u30b8\u30e7\u30d6\u3092\u4f5c\u6210\u3001\u8a2d\u5b9a\u3057\u3066\u3044\u304f\u3002\n\n[\u65b0\u898f\u30b8\u30e7\u30d6\u4f5c\u6210]\u3092\u9078\u629e\u3057\u3001[\u30b8\u30e7\u30d6\u540d]\u306b\u9069\u5f53\u306a\u540d\u524d\u3092\u8a2d\u5b9a\u3057\u3001[Maven2/3\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30d3\u30eb\u30c9]\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066[OK]\u30dc\u30bf\u30f3\u3092\u62bc\u3059\n[\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u7ba1\u7406]\u306bMaven\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u3092\u884c\u3046\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304cSubversion\u306b\u3042\u308c\u3070[Subversion]\u3092\u30c1\u30a7\u30c3\u30af\u3057[\u30ea\u30dd\u30b8\u30c8\u30eaURL]\u306b\u9069\u5f53\u306aURL\u3092\u8a2d\u5b9a\u3059\u308b\u3001\u306a\u3069\n[\u30d3\u30eb\u30c9\u74b0\u5883]\u306e[Start Xvfb before the build, and shut it down after.]\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\n\u540c\u9805\u76ee\u306e[\u9ad8\u5ea6\u306a\u8a2d\u5b9a...]\u3092\u62bc\u3057\u3001\u4ee5\u4e0b\u306e\u5024\u3092\u8a2d\u5b9a\u3059\u308b\n\n\nTimeout in seconds: 0\nXvfb screen: 1024x768x24\nXvfb display name offset: 1\n\n\n[\u30d3\u30eb\u30c9]\u306e[\u9ad8\u5ea6\u306a\u8a2d\u5b9a...]\u3092\u62bc\u3057\u3001MAVEN_OPTS\u5165\u529b\u306e\u305f\u3081\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8868\u793a\u3059\u308b\n\n\nMAVEN_OPTS: -DargLine=\"-Dwebdriver.chrome.driver=/opt/chromedriver/chromedriver\"\n\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308c\u3070Jenkins\u3067Selenium\u3092\u4f7f\u3063\u305f\u30c6\u30b9\u30c8\u304c\u52d5\u304f(\u306f\u305a)\n\n[\u4fdd\u5b58]\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u8a2d\u5b9a\u3092\u4fdd\u5b58\u3057\u3066\u7d42\u308f\u308a\u3002\n\n\u30c6\u30b9\u30c8\u306e\u5b9f\u884c\n\u306a\u304a\u3001\u4eca\u56de\u306f\u3053\u3093\u306a\u611f\u3058\u306e\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\u3002Firefox\u3068Chrome\u305d\u308c\u305e\u308c\u306b\u3064\u3044\u3066\u30d6\u30e9\u30a6\u30b6\u3092\u958b\u304d\u3001\u30da\u30fc\u30b8www.google.co.jp\u3092\u958b\u3044\u3066\u30df\u30af\u3055\u3093\u306e\u753b\u50cf\u3092\u691c\u7d22\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u306e\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3092\u64ae\u3063\u3066\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u306b\u4fdd\u5b58\u3059\u308b\u3002\n\nsrc/test/net/yzwlab/test/ImageSearchTest.java\npackage net.yzwlab.test;\n\nimport java.io.File;\nimport java.util.ArrayList;\n\nimport junit.framework.TestCase;\n\nimport org.apache.commons.io.FileUtils;\nimport org.junit.Test;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.Keys;\nimport org.openqa.selenium.OutputType;\nimport org.openqa.selenium.TakesScreenshot;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.firefox.FirefoxDriver;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.Wait;\nimport org.openqa.selenium.support.ui.WebDriverWait;\n\npublic class ImageSearchTest extends TestCase {\n    public interface WebDriverFactory {\n\n        public WebDriver create();\n\n    }\n\n    public static Iterable<WebDriverFactory> getDriverFactories() {\n        ArrayList<WebDriverFactory> factories = new ArrayList<WebDriverFactory>();\n        factories.add(new WebDriverFactory() {\n            @Override\n            public WebDriver create() {\n                return new FirefoxDriver();\n            }\n        });\n        factories.add(new WebDriverFactory() {\n            @Override\n            public WebDriver create() {\n                return new ChromeDriver();\n            }\n        });\n        return factories;\n    }\n\n    @Test\n    public void testImage() throws Exception {\n        for (WebDriverFactory factory : getDriverFactories()) {\n            WebDriver driver = factory.create();\n            try {\n                driver.get(\"http://www.google.co.jp\");\n                Wait<WebDriver> wait = new WebDriverWait(driver, 30);\n\n                WebElement inputField = wait.until(ExpectedConditions\n                        .visibilityOfElementLocated(By\n                                .xpath(\"//input[@type='text']\")));\n                assertEquals(driver.getTitle(), \"Google\");\n                inputField.sendKeys(\"\u521d\u97f3\u30df\u30af\");\n                inputField.sendKeys(Keys.ENTER);\n                wait.until(ExpectedConditions.titleContains(\"\u521d\u97f3\u30df\u30af\"));\n\n                WebElement imageButton = wait.until(ExpectedConditions\n                        .visibilityOfElementLocated(By\n                                .xpath(\"//a[contains(@href,'tbm=isch')]\")));\n                imageButton.sendKeys(Keys.ENTER);\n                Thread.sleep(10000);\n\n                FileUtils.copyFile(((TakesScreenshot) driver)\n                        .getScreenshotAs(OutputType.FILE), new File(driver\n                        .getClass().getName() + \"-miku-search.png\"));\n            } finally {\n                driver.quit();\n            }\n        }\n    }\n}\n\n\n\u30b8\u30e7\u30d6\u306e[\u30d3\u30eb\u30c9\u5b9f\u884c]\u3092\u9078\u629e\u3057\u3001\u30b3\u30fc\u30c9\u306e\u5b9f\u884c\u304c\u6210\u529f\u3057\u305f\u3089\u3001[\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9]\u3092\u958b\u304f\u3002\n\u3046\u307e\u304f\u52d5\u4f5c\u3092\u3057\u3066\u3044\u308c\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u753b\u50cf\u304c\u3067\u304d\u3066\u3044\u308b\u306f\u305a\u3002\n\norg.openqa.selenium.chrome.ChromeDriver-miku-search.png\norg.openqa.selenium.firefox.FirefoxDriver-miku-search.png\n\nChromeDriver\u306e\u307b\u3046\u306f\u3053\u3093\u306a\u611f\u3058\u3002\n\n\u5929\u4f7f\u3067\u3059\u306d\u3002\n\u3053\u308c\u3067Jenkins\u3055\u3093\u306e\u624b\u306b\u3088\u3063\u3066\u3001\u300cChrome, Firefox\u306e\u4e21\u65b9\u3067\u3001\u30df\u30af\u3055\u3093\u306e\u753b\u50cf\u3092\u691c\u7d22\u3059\u308b\u300d\u3068\u3044\u3046\u3053\u3068\u304c\u53ef\u80fd\u3067\u3042\u308b\u304b\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u305f\u3068\u3048\u3070\u3001Jenkins\u306e[\u5b9a\u671f\u7684\u306b\u5b9f\u884c]\u6a5f\u80fd\u3092\u4f7f\u3048\u3070\u3001Google\u306e\u691c\u7d22\u30da\u30fc\u30b8\u304cChrome\u3068Firefox\u3067\u8868\u793a\u3067\u304d\u3066\u3001\u30df\u30af\u3055\u3093\u306e\u540d\u3067\u691c\u7d22\u3067\u304d\u308b\u304b\u3001\u3059\u306a\u308f\u3061Firefox\u30e6\u30fc\u30b6\u3068Chrome\u30e6\u30fc\u30b6\u306e\u5e73\u548c\u304c\u5b9a\u671f\u7684\u306b\u78ba\u8a8d\u3067\u304d\u308b\u308f\u3051\u3067\u3059\u3002\nIE\u306f\u77e5\u3089\u306a\u3044\u3002\n\u3042\u3063\u3001\u4eba\u306e\u30b5\u30a4\u30c8\u3092\u3080\u3084\u307f\u306b\u30c6\u30b9\u30c8\u3059\u308b\u306e\u306f\u3084\u3081\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3001\u3068\u3001\u5ff5\u306e\u305f\u3081\u3002\n[TDD is dead. Long live testing.](http://david.heinemeierhansson.com/2014/tdd-is-dead-long-live-testing.html)\u3042\u305f\u308a\u306b\u3059\u3054\u304f\u8003\u3048\u3055\u305b\u3089\u308c\u305f\u308a\u3057\u3064\u3064\u3001[Java+Selenium\u306aWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u81ea\u52d5\u30c6\u30b9\u30c8\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u7bc9](http://qiita.com/yacchin1205/items/cadc2a724d433511f0a6) \u3092\u66f8\u3044\u305f\u308f\u3051\u306a\u3093\u3067\u3059\u304c\u3001\u3053\u308c\u3060\u3051\u3060\u3068\u30c6\u30b9\u30c8\u306f\u81ea\u5206\u304c\u624b\u3067\u3084\u3089\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u304f\u3066\u3001\u5bdd\u3066\u3044\u308b\u6642\u9593\u306b\u969c\u5bb3\u767a\u751f\u3057\u305f\u3089\u3069\u3046\u3059\u308b\u3093\u3060\u3068\u304b\u305d\u3093\u306a\u3053\u3068\u3092\u601d\u3063\u3066\u3057\u307e\u3044\u3084\u3063\u3071\u308a\u7761\u7720\u306e\u8cea\u304c\u3042\u3093\u307e\u308a\u4e0a\u304c\u3089\u306a\u3044\u308f\u3051\u3067\u3059\u3002\u671d\u8d77\u304d\u3066\u3001\u304a\u305d\u308b\u304a\u305d\u308b\u30c6\u30b9\u30c8\u3092\u8d70\u3089\u305b\u3066\u3001\u304f\u305a\u304a\u308c\u308b\u307f\u305f\u3044\u306a\u5c55\u958b\u306f\u5065\u5eb7\u306b\u3088\u304f\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u305d\u3093\u306a\u3068\u304d\u306fJenkins\u3055\u3093\u306e\u51fa\u756a\u3067\u3059\u3002\u983c\u308c\u308b\u57f7\u4e8b\u306b\u5b9a\u671f\u7684\u306b\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u3066\u304a\u3044\u3066\u3082\u3089\u3048\u308c\u3070\u3001\u969c\u5bb3\u306e\u8d77\u304d\u59cb\u3081\u305f\u6642\u9593\u304c\u660e\u78ba\u306b\u7279\u5b9a\u3067\u304d\u3001\u3054\u3081\u3093\u306a\u3055\u3044\u306e\u5831\u544a\u3084\u554f\u984c\u89e3\u6c7a\u306e\u305f\u3081\u306e\u30ed\u30b0\u89e3\u6790\u306a\u3069\u8272\u3005\u306a\u3082\u306e\u306e\u7cbe\u5ea6\u304c\u4e0a\u304c\u3063\u3066\u6357\u308a\u307e\u3059\u3002\n\n# \u3084\u308a\u305f\u3044\u3053\u3068\n\n- Jenkins\u304b\u3089Selenium\u306e\u30c6\u30b9\u30c8\u3092\u542b\u3080\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u81ea\u52d5\u7684\u306b\u5b9f\u884c\u3057\u305f\u3044\n    - \u5bfe\u8c61WebDriver\u306fFirefoxDriver\u3068ChromeDriver\n\n# \u74b0\u5883\n\n- Ubuntu 12.04 LTS\n- Jenkins ver. 1.560\n\n# \u624b\u9806\n## \u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u5fc5\u8981\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092apt-get\u3067\u304b\u304d\u96c6\u3081\u3066\u304f\u308b\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3082\u306e\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002\n\n- Xvfb\n- Firefox\n- Google Chrome (+chromedriver)\n\n\u307e\u305a\u4eee\u60f3\u7684\u306a\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3092Xvfb\u3067\u4f5c\u3063\u3066\u3001\u305d\u306e\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u4e0a\u3067Firefox\u3084Google Chrome\u3092\u52d5\u304b\u3059\u3001\u3068\u3044\u3063\u305f\u6d41\u308c\u3002\n\n```\n$ sudo apt-get update\n$ sudo apt-get install xvfb firefox\n```\n\n\u3053\u308c\u3067Xvfb\u3068Firefox\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3002\u3067\u3001\u7d9a\u3044\u3066Chrome\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```\n$ wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | sudo apt-key add -\n$ sudo sh -c 'echo \"deb http://dl.google.com/linux/chrome/deb/ stable main\" >> /etc/apt/sources.list.d/google.list'\n$ sudo apt-get update\n$ sudo apt-get install google-chrome-stable\n```\n\n\u5148\u306e\u8a18\u4e8b\u3067\u3082\u66f8\u3044\u305f\u3088\u3046\u306b\u3001Firefox\u306f\u30d1\u30b9\u304c\u901a\u3063\u305f\u3060\u3051\u3067Selenium(\u306eFirefoxDriver)\u304b\u3089\u5b9f\u884c\u53ef\u80fd\u306a\u4e00\u65b9\u3001Google Chrome\u306fSelenium(\u306eChromeDriver)\u3068\u306e\u6a4b\u6e21\u3057\u3092\u3059\u308bchromedriver\u3068\u3044\u3046\u5b9f\u884c\u53ef\u80fd\u30d5\u30a1\u30a4\u30eb\u304c\u5225\u306b\u5fc5\u8981\u306b\u306a\u308b\u3002\n\u305d\u306e\u305f\u3081\u3001\u4eca\u56de\u306f\u9069\u5f53\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea/opt/chromedriver/\u3092\u4f5c\u3063\u3066\u3001\u305d\u3053\u306bchromedriver\u3092\u7f6e\u3044\u3066\u304a\u304f\u3053\u3068\u306b\u3059\u308b\u3002\n\n```\n$ sudo mkdir /opt/chromedriver\n$ cd /opt/chromedriver\n$ sudo wget http://chromedriver.storage.googleapis.com/2.9/chromedriver_linux64.zip\n$ sudo unzip chromedriver_linux64.zip\n$ sudo chmod +x chromedriver\n```\n\n\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306eURL\u306f[http://chromedriver.storage.googleapis.com/index.html](http://chromedriver.storage.googleapis.com/index.html)\u3067\u53c2\u7167\u53ef\u80fd\u3002\n\n## Jenkins\u306e\u8a2d\u5b9a\n\nJenkins\u306e\u30b8\u30e7\u30d6\u5b9f\u884c\u6642\u306b\u4eee\u60f3\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3092\u4ed5\u8fbc\u3080\u306b\u306f\u3001Xvfb\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u3046\u306e\u304c\u4fbf\u5229\u3002\u4ee5\u4e0b\u306e\u624b\u9806\u3067Jenkins\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u304f\u3002\n\n1. Jenkins\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u304b\u3089\u3001[Jenkins\u306e\u7ba1\u7406]\u30e1\u30cb\u30e5\u30fc\u3092\u9078\u629e\u3057\u3001[\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u7ba1\u7406]\u3092\u9078\u629e\u3001[\u5229\u7528\u53ef\u80fd]\u30bf\u30d6\u306e\u3046\u3061[Xvfb Plugin]\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3001[\u518d\u8d77\u52d5\u305b\u305a\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb]\u3092\u62bc\u3059\u3002\n      ![xvfbinstall.png](https://qiita-image-store.s3.amazonaws.com/0/28770/d41cb2a6-3446-6a07-9f82-8578b028816e.png)\n\n2. [\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb/\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9]\u753b\u9762\u306b\u5207\u308a\u66ff\u308f\u308b\u306e\u3067\u3001[\u6210\u529f]\u304c\u8868\u793a\u3055\u308c\u308b\u307e\u3067\u5f85\u3064\n3. [Jenkins\u306e\u7ba1\u7406]\u306b\u623b\u308a\u3001[\u30b7\u30b9\u30c6\u30e0\u306e\u8a2d\u5b9a]\u3092\u9078\u629e\u3059\u308b\n4. [Xvfb installation]\u9805\u76ee\u4e2d\u306e[Xvfb installation\u8ffd\u52a0]\u30dc\u30bf\u30f3\u3092\u62bc\u3059\n5. \u3044\u304f\u3064\u304b\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u73fe\u308c\u308b\u306e\u3067\u3001[Name]\u306b DefaultXvfb \u306a\u3069\u3068\u3060\u3051\u5165\u529b\u3057(\u81ea\u7531)\u3001[Directory in which to find Xvfb executable]\u306b\u306f\u4f55\u3082\u5165\u529b\u305b\u305a(\u3053\u308c\u3067Xvfb\u304c\u30d1\u30b9\u304b\u3089\u691c\u7d22\u3055\u308c\u308b)\u3001[\u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb]\u306e\u30c1\u30a7\u30c3\u30af\u3092\u306f\u305a\u3057\u305f\u72b6\u614b\u306b\u3057\u3066\u3001[\u4fdd\u5b58]\u3092\u62bc\u3059\u3002\n   ![defaultxvfb.png](https://qiita-image-store.s3.amazonaws.com/0/28770/5e77358e-affd-540f-8a7a-6935ed31a567.png)\n\n\u3053\u308c\u3067Jenkins\u306e\u30b8\u30e7\u30d6\u3067Xvfb\u306b\u3088\u308b\u4eee\u60f3\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u304c\u5229\u7528\u3067\u304d\u308b\u72b6\u614b\u306b\u306a\u308b\u3002\n\n## Jenkins\u30b8\u30e7\u30d6\u306e\u8a2d\u5b9a\n\nJenkins\u4e2d\u306bMaven\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5b9f\u884c\u7528\u306e\u30b8\u30e7\u30d6\u3092\u4f5c\u6210\u3001\u8a2d\u5b9a\u3057\u3066\u3044\u304f\u3002\n\n1. [\u65b0\u898f\u30b8\u30e7\u30d6\u4f5c\u6210]\u3092\u9078\u629e\u3057\u3001[\u30b8\u30e7\u30d6\u540d]\u306b\u9069\u5f53\u306a\u540d\u524d\u3092\u8a2d\u5b9a\u3057\u3001[Maven2/3\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30d3\u30eb\u30c9]\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066[OK]\u30dc\u30bf\u30f3\u3092\u62bc\u3059\n2. [\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u7ba1\u7406]\u306bMaven\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u3092\u884c\u3046\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304cSubversion\u306b\u3042\u308c\u3070[Subversion]\u3092\u30c1\u30a7\u30c3\u30af\u3057[\u30ea\u30dd\u30b8\u30c8\u30eaURL]\u306b\u9069\u5f53\u306aURL\u3092\u8a2d\u5b9a\u3059\u308b\u3001\u306a\u3069\n3. [\u30d3\u30eb\u30c9\u74b0\u5883]\u306e[Start Xvfb before the build, and shut it down after.]\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\n4. \u540c\u9805\u76ee\u306e[\u9ad8\u5ea6\u306a\u8a2d\u5b9a...]\u3092\u62bc\u3057\u3001\u4ee5\u4e0b\u306e\u5024\u3092\u8a2d\u5b9a\u3059\u308b\n    - Timeout in seconds: 0\n    - Xvfb screen: 1024x768x24\n    - Xvfb display name offset: 1\n5. [\u30d3\u30eb\u30c9]\u306e[\u9ad8\u5ea6\u306a\u8a2d\u5b9a...]\u3092\u62bc\u3057\u3001MAVEN_OPTS\u5165\u529b\u306e\u305f\u3081\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8868\u793a\u3059\u308b\n    - MAVEN_OPTS: -DargLine=\"-Dwebdriver.chrome.driver=/opt/chromedriver/chromedriver\"\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308c\u3070Jenkins\u3067Selenium\u3092\u4f7f\u3063\u305f\u30c6\u30b9\u30c8\u304c\u52d5\u304f(\u306f\u305a)\n![jobsettings.png](https://qiita-image-store.s3.amazonaws.com/0/28770/9c24d696-1a86-90b3-6f0b-5bdfcc304780.png)\n\n[\u4fdd\u5b58]\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u8a2d\u5b9a\u3092\u4fdd\u5b58\u3057\u3066\u7d42\u308f\u308a\u3002\n\n## \u30c6\u30b9\u30c8\u306e\u5b9f\u884c\n\n\u306a\u304a\u3001\u4eca\u56de\u306f\u3053\u3093\u306a\u611f\u3058\u306e\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\u3002Firefox\u3068Chrome\u305d\u308c\u305e\u308c\u306b\u3064\u3044\u3066\u30d6\u30e9\u30a6\u30b6\u3092\u958b\u304d\u3001\u30da\u30fc\u30b8www.google.co.jp\u3092\u958b\u3044\u3066\u30df\u30af\u3055\u3093\u306e\u753b\u50cf\u3092\u691c\u7d22\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u306e\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3092\u64ae\u3063\u3066\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u306b\u4fdd\u5b58\u3059\u308b\u3002\n\n```java:src/test/net/yzwlab/test/ImageSearchTest.java\npackage net.yzwlab.test;\n\nimport java.io.File;\nimport java.util.ArrayList;\n\nimport junit.framework.TestCase;\n\nimport org.apache.commons.io.FileUtils;\nimport org.junit.Test;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.Keys;\nimport org.openqa.selenium.OutputType;\nimport org.openqa.selenium.TakesScreenshot;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.firefox.FirefoxDriver;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.Wait;\nimport org.openqa.selenium.support.ui.WebDriverWait;\n\npublic class ImageSearchTest extends TestCase {\n\tpublic interface WebDriverFactory {\n\n\t\tpublic WebDriver create();\n\n\t}\n\n\tpublic static Iterable<WebDriverFactory> getDriverFactories() {\n\t\tArrayList<WebDriverFactory> factories = new ArrayList<WebDriverFactory>();\n\t\tfactories.add(new WebDriverFactory() {\n\t\t\t@Override\n\t\t\tpublic WebDriver create() {\n\t\t\t\treturn new FirefoxDriver();\n\t\t\t}\n\t\t});\n\t\tfactories.add(new WebDriverFactory() {\n\t\t\t@Override\n\t\t\tpublic WebDriver create() {\n\t\t\t\treturn new ChromeDriver();\n\t\t\t}\n\t\t});\n\t\treturn factories;\n\t}\n\n\t@Test\n\tpublic void testImage() throws Exception {\n\t\tfor (WebDriverFactory factory : getDriverFactories()) {\n\t\t\tWebDriver driver = factory.create();\n\t\t\ttry {\n\t\t\t\tdriver.get(\"http://www.google.co.jp\");\n\t\t\t\tWait<WebDriver> wait = new WebDriverWait(driver, 30);\n\n\t\t\t\tWebElement inputField = wait.until(ExpectedConditions\n\t\t\t\t\t\t.visibilityOfElementLocated(By\n\t\t\t\t\t\t\t\t.xpath(\"//input[@type='text']\")));\n\t\t\t\tassertEquals(driver.getTitle(), \"Google\");\n\t\t\t\tinputField.sendKeys(\"\u521d\u97f3\u30df\u30af\");\n\t\t\t\tinputField.sendKeys(Keys.ENTER);\n\t\t\t\twait.until(ExpectedConditions.titleContains(\"\u521d\u97f3\u30df\u30af\"));\n\n\t\t\t\tWebElement imageButton = wait.until(ExpectedConditions\n\t\t\t\t\t\t.visibilityOfElementLocated(By\n\t\t\t\t\t\t\t\t.xpath(\"//a[contains(@href,'tbm=isch')]\")));\n\t\t\t\timageButton.sendKeys(Keys.ENTER);\n\t\t\t\tThread.sleep(10000);\n\n\t\t\t\tFileUtils.copyFile(((TakesScreenshot) driver)\n\t\t\t\t\t\t.getScreenshotAs(OutputType.FILE), new File(driver\n\t\t\t\t\t\t.getClass().getName() + \"-miku-search.png\"));\n\t\t\t} finally {\n\t\t\t\tdriver.quit();\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n\u30b8\u30e7\u30d6\u306e[\u30d3\u30eb\u30c9\u5b9f\u884c]\u3092\u9078\u629e\u3057\u3001\u30b3\u30fc\u30c9\u306e\u5b9f\u884c\u304c\u6210\u529f\u3057\u305f\u3089\u3001[\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9]\u3092\u958b\u304f\u3002\n\u3046\u307e\u304f\u52d5\u4f5c\u3092\u3057\u3066\u3044\u308c\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u753b\u50cf\u304c\u3067\u304d\u3066\u3044\u308b\u306f\u305a\u3002\n\n- org.openqa.selenium.chrome.ChromeDriver-miku-search.png\n- org.openqa.selenium.firefox.FirefoxDriver-miku-search.png\n\nChromeDriver\u306e\u307b\u3046\u306f\u3053\u3093\u306a\u611f\u3058\u3002\n![org.openqa.selenium.chrome.ChromeDriver-miku-search.png](https://qiita-image-store.s3.amazonaws.com/0/28770/a6a7399c-88e9-87d1-6921-e6cda3a37e24.png)\n\n\n\u5929\u4f7f\u3067\u3059\u306d\u3002\n\n\u3053\u308c\u3067Jenkins\u3055\u3093\u306e\u624b\u306b\u3088\u3063\u3066\u3001\u300cChrome, Firefox\u306e\u4e21\u65b9\u3067\u3001\u30df\u30af\u3055\u3093\u306e\u753b\u50cf\u3092\u691c\u7d22\u3059\u308b\u300d\u3068\u3044\u3046\u3053\u3068\u304c\u53ef\u80fd\u3067\u3042\u308b\u304b\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u305f\u3068\u3048\u3070\u3001Jenkins\u306e[\u5b9a\u671f\u7684\u306b\u5b9f\u884c]\u6a5f\u80fd\u3092\u4f7f\u3048\u3070\u3001Google\u306e\u691c\u7d22\u30da\u30fc\u30b8\u304cChrome\u3068Firefox\u3067\u8868\u793a\u3067\u304d\u3066\u3001\u30df\u30af\u3055\u3093\u306e\u540d\u3067\u691c\u7d22\u3067\u304d\u308b\u304b\u3001\u3059\u306a\u308f\u3061Firefox\u30e6\u30fc\u30b6\u3068Chrome\u30e6\u30fc\u30b6\u306e\u5e73\u548c\u304c\u5b9a\u671f\u7684\u306b\u78ba\u8a8d\u3067\u304d\u308b\u308f\u3051\u3067\u3059\u3002\nIE\u306f\u77e5\u3089\u306a\u3044\u3002\n\n\u3042\u3063\u3001\u4eba\u306e\u30b5\u30a4\u30c8\u3092\u3080\u3084\u307f\u306b\u30c6\u30b9\u30c8\u3059\u308b\u306e\u306f\u3084\u3081\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3001\u3068\u3001\u5ff5\u306e\u305f\u3081\u3002\n", "tags": ["Java", "Jenkins", "Selenium2"]}