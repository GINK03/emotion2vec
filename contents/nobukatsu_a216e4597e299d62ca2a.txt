{"context": "\n\n\u6982\u8981\nUserLocal\u306e\u4eba\u5de5\u77e5\u80fd\u30dc\u30c3\u30c8API\u3068\u3044\u3046\u306e\u3092\u4f7f\u3063\u3066\u3001Slack\u306eBot\u3068\u65e5\u672c\u8a9e\u3067\u4f1a\u8a71\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\nSlack\u3067\u53d7\u3051\u53d6\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u4eba\u5de5\u77e5\u80fd\u30dc\u30c3\u30c8API\u306b\u6295\u3052\u3066\u3001\u53d7\u3051\u53d6\u3063\u305f\u3082\u306e\u3092\u307e\u305fSlack\u306b\u6d41\u3057\u3066\u308b\u3060\u3051\u3067\u3059\u3002\n\u4eba\u5de5\u77e5\u80fd\u30dc\u30c3\u30c8API\uff1ahttp://ai.userlocal.jp\n\n\u30b3\u30fc\u30c9\u5168\u4f53\nconst Botkit = require('botkit');\nconst request = require('request');\n\nconst chatBotToken= 'your-chat-bot-api-key';\n\nconst controller = Botkit.slackbot({\n    debug: false\n});\n\ncontroller.spawn({\n    token: 'your-api-token'\n}).startRTM()\n\ncontroller.hears('(.*)',['direct_message','direct_mention','mention'],function(bot,message) {\n    const options = {\n        url: ' https://chatbot-api.userlocal.jp/api/chat',\n        method: 'POST',\n        json: true,\n        form: {\n            'key': chatBotToken,\n            'message': message.match[0]\n        }\n    }\n\n    request(options, function(err, res, body){\n        if (!err && res.statusCode == 200 && body.status == 'success') {\n            bot.replyWithTyping(message, body.result);\n        } else {\n            console.log(err);\n            bot.replyWithTyping(message, '\u4eca\u306f\u8a71\u3059\u6c17\u5206\u3067\u306f\u3042\u308a\u307e\u305b\u3093:zipper_mouth_face:');\n        }\n    });\n\n});\n\n\n\u89e3\u8aac\n\u4eba\u5de5\u77e5\u80fd\u30dc\u30c3\u30c8API\u306b\u767b\u9332\u3057\u3066\u767a\u884c\u3057\u3066\u3082\u3089\u3063\u305fAPI\u30ad\u30fc\u3002\nsample\u3092\u6307\u5b9a\u3059\u308b\u30681\u6642\u9593\u306b10\u56de\u307e\u3067\u8a66\u7528\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3060\u305d\u3046\u3067\u3059\u3002\uff08\u767b\u9332\u3057\u3066\u3042\u308c\u30701\u6642\u9593\u306b500\u56de\u307e\u3067\u30b3\u30fc\u30eb\u53ef\u80fd\uff09\nconst chatBotToken= 'your-chat-bot-api-key';\n\nSlack\u306eBot\u5b9b\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5168\u3066\u88dc\u8db3\u3057\u3066\u3044\u307e\u3059\u3002\ncontroller.hears('(.*)',['direct_message','direct_mention','mention'],function(bot,message) {\n\n\u4eba\u5de5\u77e5\u80fd\u30dc\u30c3\u30c8API\u306b\u6e21\u3059\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u7d44\u307f\u7acb\u3066\u3066\u3044\u307e\u3059\u3002\nmessage.match[0]\u306b\u53d7\u3051\u53d6\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n    const options = {\n        url: ' https://chatbot-api.userlocal.jp/api/chat',\n        method: 'POST',\n        json: true,\n        form: {\n            'key': chatBotToken,\n            'message': message.match[0]\n        }\n    }\n\n\u4eba\u5de5\u77e5\u80fd\u30dc\u30c3\u30c8API\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u308a\u3001\u6210\u529f\u3067\u3042\u308c\u3070body.result\u306b\u5165\u3063\u3066\u3044\u308b\u8fd4\u7b54\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u305d\u306e\u307e\u307e\u8fd4\u3057\u307e\u3059\u3002\n    request(options, function(err, res, body){\n        if (!err && res.statusCode == 200 && body.status == 'success') {\n            bot.replyWithTyping(message, body.result);\n        } else {\n            console.log(err);\n            bot.replyWithTyping(message, '\u4eca\u306f\u8a71\u3059\u6c17\u5206\u3067\u306f\u3042\u308a\u307e\u305b\u3093:zipper_mouth_face:');\n        }\n    });\n\n\n\u4f1a\u8a71\u3057\u3066\u307f\u305f\u7d50\u679c\n\nHP\u306b\u306f\u300c\u5358\u7d14\u306a\u8fd4\u7b54\u3060\u3051\u3067\u306f\u306a\u304f\u3001\u904e\u53bb\u306e\u5bfe\u8a71\u5185\u5bb9\u306b\u3042\u308f\u305b\u305f\u30c6\u30fc\u30de\u3067\u4f1a\u8a71\u3055\u305b\u308b\u3001\u3068\u3044\u3063\u305f\u6307\u5b9a\u3082\u53ef\u80fd\u3067\u3059\u3002\u300d\u3068\u3042\u308a\u307e\u3059\u304c\u3001\u65b9\u6cd5\u306f\u5206\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u30de\u30cb\u30e5\u30a2\u30eb\u306b\u3082\u307e\u3060\u6a5f\u68b0\u5b66\u7fd2\u306e\u9014\u4e2d\u3067\u8ce2\u304f\u306a\u3044\u3068\u3044\u3046\u65e8\u306e\u8a18\u8f09\u304c\u3042\u308b\u306e\u3067\u3001\u4eca\u5f8c\u306f\u3082\u3063\u3068\u9ad8\u5ea6\u306a\u4f1a\u8a71\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n# \u6982\u8981\n\nUserLocal\u306e\u4eba\u5de5\u77e5\u80fd\u30dc\u30c3\u30c8API\u3068\u3044\u3046\u306e\u3092\u4f7f\u3063\u3066\u3001Slack\u306eBot\u3068\u65e5\u672c\u8a9e\u3067\u4f1a\u8a71\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\nSlack\u3067\u53d7\u3051\u53d6\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u4eba\u5de5\u77e5\u80fd\u30dc\u30c3\u30c8API\u306b\u6295\u3052\u3066\u3001\u53d7\u3051\u53d6\u3063\u305f\u3082\u306e\u3092\u307e\u305fSlack\u306b\u6d41\u3057\u3066\u308b\u3060\u3051\u3067\u3059\u3002\n\n\u4eba\u5de5\u77e5\u80fd\u30dc\u30c3\u30c8API\uff1ahttp://ai.userlocal.jp\n\n# \u30b3\u30fc\u30c9\u5168\u4f53\n\n```js\nconst Botkit = require('botkit');\nconst request = require('request');\n\nconst chatBotToken= 'your-chat-bot-api-key';\n\nconst controller = Botkit.slackbot({\n\tdebug: false\n});\n\ncontroller.spawn({\n\ttoken: 'your-api-token'\n}).startRTM()\n\ncontroller.hears('(.*)',['direct_message','direct_mention','mention'],function(bot,message) {\n\tconst options = {\n\t\turl: ' https://chatbot-api.userlocal.jp/api/chat',\n\t\tmethod: 'POST',\n\t\tjson: true,\n\t\tform: {\n\t\t\t'key': chatBotToken,\n\t\t\t'message': message.match[0]\n\t\t}\n\t}\n\n\trequest(options, function(err, res, body){\n\t\tif (!err && res.statusCode == 200 && body.status == 'success') {\n\t\t\tbot.replyWithTyping(message, body.result);\n\t\t} else {\n\t\t\tconsole.log(err);\n\t\t\tbot.replyWithTyping(message, '\u4eca\u306f\u8a71\u3059\u6c17\u5206\u3067\u306f\u3042\u308a\u307e\u305b\u3093:zipper_mouth_face:');\n\t\t}\n\t});\n\n});\n```\n\n# \u89e3\u8aac\n\n\u4eba\u5de5\u77e5\u80fd\u30dc\u30c3\u30c8API\u306b\u767b\u9332\u3057\u3066\u767a\u884c\u3057\u3066\u3082\u3089\u3063\u305fAPI\u30ad\u30fc\u3002\n`sample`\u3092\u6307\u5b9a\u3059\u308b\u30681\u6642\u9593\u306b10\u56de\u307e\u3067\u8a66\u7528\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3060\u305d\u3046\u3067\u3059\u3002\uff08\u767b\u9332\u3057\u3066\u3042\u308c\u30701\u6642\u9593\u306b500\u56de\u307e\u3067\u30b3\u30fc\u30eb\u53ef\u80fd\uff09\n\n```js\nconst chatBotToken= 'your-chat-bot-api-key';\n```\n\nSlack\u306eBot\u5b9b\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5168\u3066\u88dc\u8db3\u3057\u3066\u3044\u307e\u3059\u3002\n\n```js\ncontroller.hears('(.*)',['direct_message','direct_mention','mention'],function(bot,message) {\n```\n\n\u4eba\u5de5\u77e5\u80fd\u30dc\u30c3\u30c8API\u306b\u6e21\u3059\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u7d44\u307f\u7acb\u3066\u3066\u3044\u307e\u3059\u3002\n`message.match[0]`\u306b\u53d7\u3051\u53d6\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\n```js\n    const options = {\n        url: ' https://chatbot-api.userlocal.jp/api/chat',\n        method: 'POST',\n        json: true,\n        form: {\n            'key': chatBotToken,\n            'message': message.match[0]\n        }\n    }\n```\n\n\u4eba\u5de5\u77e5\u80fd\u30dc\u30c3\u30c8API\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u308a\u3001\u6210\u529f\u3067\u3042\u308c\u3070`body.result`\u306b\u5165\u3063\u3066\u3044\u308b\u8fd4\u7b54\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u305d\u306e\u307e\u307e\u8fd4\u3057\u307e\u3059\u3002\n\n```js\n    request(options, function(err, res, body){\n        if (!err && res.statusCode == 200 && body.status == 'success') {\n            bot.replyWithTyping(message, body.result);\n        } else {\n            console.log(err);\n            bot.replyWithTyping(message, '\u4eca\u306f\u8a71\u3059\u6c17\u5206\u3067\u306f\u3042\u308a\u307e\u305b\u3093:zipper_mouth_face:');\n        }\n    });\n```\n\n# \u4f1a\u8a71\u3057\u3066\u307f\u305f\u7d50\u679c\n\n<img width=\"358\" alt=\"chat-bot.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/30447/94658a8a-e3f4-40ca-8996-e63ec536dac6.png\">\n\nHP\u306b\u306f\u300c\u5358\u7d14\u306a\u8fd4\u7b54\u3060\u3051\u3067\u306f\u306a\u304f\u3001\u904e\u53bb\u306e\u5bfe\u8a71\u5185\u5bb9\u306b\u3042\u308f\u305b\u305f\u30c6\u30fc\u30de\u3067\u4f1a\u8a71\u3055\u305b\u308b\u3001\u3068\u3044\u3063\u305f\u6307\u5b9a\u3082\u53ef\u80fd\u3067\u3059\u3002\u300d\u3068\u3042\u308a\u307e\u3059\u304c\u3001\u65b9\u6cd5\u306f\u5206\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n\u30de\u30cb\u30e5\u30a2\u30eb\u306b\u3082\u307e\u3060\u6a5f\u68b0\u5b66\u7fd2\u306e\u9014\u4e2d\u3067\u8ce2\u304f\u306a\u3044\u3068\u3044\u3046\u65e8\u306e\u8a18\u8f09\u304c\u3042\u308b\u306e\u3067\u3001\u4eca\u5f8c\u306f\u3082\u3063\u3068\u9ad8\u5ea6\u306a\u4f1a\u8a71\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n", "tags": ["Slack", "Botkit"]}