{"tags": ["\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7", "Cisco", "Network"], "context": "\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u3092\u30eb\u30fc\u30bf\u3067\u5b9f\u73fe\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n@webdevjp\u3055\u3093\u306e\u4e0b\u8a18\u306e\u30c4\u30a4\u30fc\u30c8\u306b\u89e6\u767a\u3055\u308c\u3001Cisco\u30eb\u30fc\u30bf\u3067\u5b9f\u73fe\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u306b\u3064\u3044\u3066\u306f\u3001\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u307e\u3068\u3081\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u30ba\u30f3\u30c9\u30b3\u30eb\u30fc\u30bf\n\u300c\u30ba\u30f3\u300d\u30eb\u30fc\u30bf\u3068\u300c\u30c9\u30b3\u300d\u30eb\u30fc\u30bf\u3067\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u69cb\u7bc9\u3057\u3001\u7d4c\u7531\u3059\u308b\u30eb\u30fc\u30bf\u306b\u3088\u3063\u3066\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002\u5b9f\u73fe\u306b\u306f\u30eb\u30fc\u30bf\u304c\u5927\u91cf\u306b\u5fc5\u8981\u306a\u305f\u3081\u3001Cisco\u306e\u4eee\u60f3\u30eb\u30fc\u30bf\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308bCisco VIRL\u3092\u7528\u3044\u3066\u3001\u5408\u8a0814\u53f0\u306e\u4eee\u60f3\u30eb\u30fc\u30bf\u3068\u691c\u8a3c\u7528\u30db\u30b9\u30c8\u3092\u69cb\u7bc9\u3057\u307e\u3057\u305f\u3002\n\u69cb\u7bc9\u3057\u305f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306f\u4e0b\u56f3\u306b\u306a\u308a\u307e\u3059\u3002\u6700\u521d\u306bstart\u30eb\u30fc\u30bf\u3068\u6700\u5f8c\u306bfinish\u30eb\u30fc\u30bf\u304c\u3042\u308a\u3001\u305d\u306e\u9593\u306b\u30ba\u30f3\u30c9\u30b3\u30eb\u30fc\u30bf\u3068\u30ad\u30e8\u30b7\u30eb\u30fc\u30bf\u3068failed\u30eb\u30fc\u30bf\u3067\u69cb\u6210\u3057\u3066\u3044\u307e\u3059\u3002\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3057\u305f\u6642\u306b\u306f\u30ad\u30e8\u30b7\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3057\u3001\u305d\u308c\u4ee5\u5916\u306ffailed\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3057\u307e\u3059\u3002\n\u56f3. VIRL\u306b\u3088\u308bCisco\u4eee\u60f3\u30eb\u30fc\u30bf\u306e\u69cb\u6210\u56f3\n\n\n\u65b9\u6cd5\n\u30eb\u30fc\u30bf\u3067\u5b9b\u5148\u306b\u8907\u6570\u306e\u7d4c\u8def\u304c\u3042\u308a\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30d7\u30ed\u30c8\u30b3\u30eb\u306eOSFP\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001ECMP\u306b\u3088\u308a\u5206\u6563\u3057\u3066\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u304c\u6d41\u308c\u307e\u3059\u3002\u3053\u306e\u307e\u307e\u69cb\u7bc9\u3059\u308b\u3068\u3001\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3057\u306a\u304f\u3066\u3082\u3001\u30ad\u30e8\u30b7\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u30bd\u30fc\u30b9\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u3088\u308a\u4e88\u3081\u7d4c\u7531\u3059\u308b\u30eb\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u30bd\u30fc\u30b9\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306fOSPF\u3068MPLS-TE\u3067\u5b9f\u73fe\u3057\u307e\u3059\u3002\n5\u6bb5\u306e\u30ba\u30f3\u30c9\u30b3\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3059\u308b\u30d1\u30b9\u306f32\u30d1\u30b9\uff082\u306e5\u4e57\uff09\u3042\u308b\u305f\u3081\u3001\u516832\u30d1\u30b9\u3092start\u30eb\u30fc\u30bf\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u300232\u30d1\u30b9\u4e2d\u3001\u300czun1 - zun2 - zun3 - zun4 - doko5\u300d\u3092\u7d4c\u7531\u3059\u308b\u30d1\u30b9\u306e\u307f\u30ad\u30e8\u30b7\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3057\u3001\u305d\u308c\u4ee5\u5916\u306ffailed\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3059\u308b\u3088\u3046\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30d1\u30b1\u30c3\u30c8\u304cstart\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3059\u308b\u5834\u5408\u3001ECMP\u306b\u3088\u308a32\u30d1\u30b9\u304b\u30891\u30d1\u30b9\u304c\u7d4c\u8def\u3068\u3057\u3066\u9078\u5b9a\u3055\u308c\u3001\u6307\u5b9a\u3057\u305f\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3057\u3066finish\u307e\u3067\u5230\u9054\u3057\u307e\u3059\u3002\n\n\u7d50\u679c\n\u4e0b\u8a18\u306e\u901a\u308ahost\u304b\u3089traceroute\u3059\u308b\u3053\u3068\u3067\u3001\u7279\u5b9a\u30d1\u30b1\u30c3\u30c8\u306e\u307f\u30ad\u30e8\u30b7\u30eb\u30fc\u30bf\u3092\u901a\u308a\u3001\u305d\u308c\u4ee5\u5916\u306ffailed\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3057\u307e\u3059\u3002\n\ntraceroute\u306e\u5b9f\u884c\u7d50\u679c\u306b\u30eb\u30fc\u30bf\u540d\u3092\u8868\u793a\u3059\u308b\u305f\u3081\u3001host\u306e/etc/hosts\u306bIP\u30a2\u30c9\u30ec\u30b9\u3068\u30db\u30b9\u30c8\u540d\u3092\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002\ntraceroute\u306e\u5b9f\u884c\u6642\u306b\u30db\u30c3\u30d7\u3054\u3068\u306b\u7570\u306a\u308b\u30d1\u30b9\u3092\u7d4c\u7531\u3059\u308b\u3053\u3068\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u3001traceroute\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001TCP\u306e\u6307\u5b9a\u3068\u5b9b\u5148\u30dd\u30fc\u30c8\u3092\u6307\u5b9a\u3057\u3066\u3001\u30d7\u30ed\u30fc\u30d6\u30d1\u30b1\u30c3\u30c8\u306e\u5b9b\u5148\u60c5\u5831\u304c\u5909\u5316\u3057\u306a\u3044\u3088\u3046\u56fa\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u300c-T\u300d\u3067TCP\u30d7\u30ed\u30c8\u30b3\u30eb\u3001\u300c-p\u300d\u3067\u5b9b\u5148\u30dd\u30fc\u30c8\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001traceroute\u306e\u30d7\u30ed\u30fc\u30d6\u30d1\u30b1\u30c3\u30c8\u306e\u5b9b\u5148\u60c5\u5831\u304c\u30d7\u30ed\u30fc\u30d6\u30d1\u30b1\u30c3\u30c8\u3054\u3068\u306b\u5909\u5316\u3057\u306a\u3044\u305f\u3081\u3001\u540c\u3058\u30d1\u30b9\u3092\u7d4c\u7531\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u8a2d\u5b9a\nCisco\u30eb\u30fc\u30bf\u306eMPLS-TE\u8a2d\u5b9a\u3092\u629c\u7c8b\u3057\u307e\u3057\u305f\u30021\u30eb\u30fc\u30bf\u307e\u308b\u3054\u3068\u306e\u30b3\u30f3\u30d5\u30a3\u30b0\u306f\u4ed8\u9332\u306b\u3042\u308a\u307e\u3059\u3002\nstart\u30eb\u30fc\u30bf\u306e\u307f\u3001\u30bd\u30fc\u30b9\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u305f\u3081\u306b\u3001\u7279\u5225\u306a\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\nstart\u30eb\u30fc\u30bf\u306e\u8a2d\u5b9a\n! \u30d7\u30ed\u30fc\u30d6\u30d1\u30b1\u30c3\u30c8\u306bTCP\u3092\u5229\u7528\u3057\u305ftraceroute\u6642\u306b\u5b9b\u5148\u30dd\u30fc\u30c8\u756a\u53f7\u3054\u3068\u306b\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b9\u3059\u308b\u3088\u3046\u8a2d\u5b9a\nip cef load-sharing algorithm include-ports destination\n!\n! \u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u304c32\u30d1\u30b9\u306b\u5206\u6563\u3055\u308c\u308b\u3088\u3046\u8a2d\u5b9a\nrouter ospf 1\n maximum-paths 32\n!\n! \u30bd\u30fc\u30b9\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u7528\u306b32\u30d1\u30b9\u5206\u306eMPLS-TE\u306e\u5b9a\u7fa9\u3092\u5b9f\u65bd\n! ip explicit-path\u3068\u30c8\u30f3\u30cd\u30eb\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u30d1\u30b9\u3054\u3068\u306b\u8a2d\u5b9a\n!\n! \u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3057\u306a\u3044\u30d1\u30b9\nip explicit-path name Tunnel100 enable\n next-address 192.168.0.11   ! zun1\u30eb\u30fc\u30bf\n next-address 192.168.0.12   ! zun2\u30eb\u30fc\u30bf\n next-address 192.168.0.13   ! zun3\u30eb\u30fc\u30bf\n next-address 192.168.0.14   ! zun4\u30eb\u30fc\u30bf\n next-address 192.168.0.15   ! zun5\u30eb\u30fc\u30bf\n next-address 192.168.0.31   ! failed\u30eb\u30fc\u30bf\ninterface Tunnel100\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2  ! finish\u30eb\u30fc\u30bf\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel100\n tunnel mpls traffic-eng record-route\n!\n! \u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u30d1\u30b9\nip explicit-path name Tunnel101 enable\n next-address 192.168.0.11  ! zun1\u30eb\u30fc\u30bf\n next-address 192.168.0.12  ! zun2\u30eb\u30fc\u30bf\n next-address 192.168.0.13  ! zun3\u30eb\u30fc\u30bf\n next-address 192.168.0.14  ! zun4\u30eb\u30fc\u30bf\n next-address 192.168.0.25  ! doko5\u30eb\u30fc\u30bf\n next-address 192.168.0.32  ! kiyoshi\u30eb\u30fc\u30bf\ninterface Tunnel101\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2  ! finish\u30eb\u30fc\u30bf\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel101\n tunnel mpls traffic-eng record-route\n\n\n\n\u72b6\u614b\nstart\u30eb\u30fc\u30bf\u3067show ip route\u306e\u5b9f\u884c\u7d50\u679c\u3067\u3059\u300232\u30d1\u30b9\u3067ECMP\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\nstart#show ip route 192.168.0.2\nRouting entry for 192.168.0.2/32\n  Known via \"ospf 1\", distance 110, metric 8, type intra area\n  Last update from 192.168.0.2 on Tunnel122, 02:23:58 ago\n  Routing Descriptor Blocks:\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel122\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel123\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel124\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel125\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel126\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel127\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel128\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel129\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel130\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel131\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel113\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel114\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel115\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel116\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel117\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel118\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel119\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel120\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel121\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:18 ago, via Tunnel108\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:18 ago, via Tunnel109\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:18 ago, via Tunnel110\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:18 ago, via Tunnel111\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:18 ago, via Tunnel112\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:28 ago, via Tunnel100\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:28 ago, via Tunnel101\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:28 ago, via Tunnel102\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:28 ago, via Tunnel103\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:28 ago, via Tunnel104\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:28 ago, via Tunnel105\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:28 ago, via Tunnel106\n      Route metric is 8, traffic share count is 1\n  * 192.168.0.2, from 192.168.0.2, 02:24:28 ago, via Tunnel107\n      Route metric is 8, traffic share count is 1\nstart# \n\nMPLS-TE\u3067\u751f\u6210\u3057\u305f\u30c8\u30f3\u30cd\u30eb\u306e\u7d50\u679c\u3067\u3059\u3002ip explicit-paths\u3067\u7d4c\u7531\u3059\u308b\u30eb\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u3001MPLS-TE Tunnel\u306b\u305d\u306e\u30d1\u30b9\u60c5\u5831\u3092\u4f7f\u3046\u3088\u3046\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\nstart#show ip explicit-paths name Tunnel101\nPATH Tunnel101 (strict source route, path complete, generation 16)\n    1: next-address 192.168.0.11\n    2: next-address 192.168.0.12\n    3: next-address 192.168.0.13\n    4: next-address 192.168.0.14\n    5: next-address 192.168.0.25\n    6: next-address 192.168.0.32\nstart#show mpls traffic-eng tunnels Tunnel101\n\nName: start_t101                          (Tunnel101) Destination: 192.168.0.2\n  Status:\n    Admin: up         Oper: up     Path: valid       Signalling: connected\n    path option 1, type explicit Tunnel101 (Basis for Setup, path weight 7)\n\n  Config Parameters:\n    Bandwidth: 0        kbps (Global)  Priority: 7  7   Affinity: 0x0/0xFFFF\n    Metric Type: TE (default)\n    AutoRoute:  enabled   LockDown: disabled  Loadshare: 0        bw-based\n    auto-bw: disabled\n  Active Path Option Parameters:\n    State: explicit path option 1 is active\n    BandwidthOverride: disabled  LockDown: disabled  Verbatim: disabled\n\n\n  InLabel  :  - \n  OutLabel : GigabitEthernet0/1, 51\n  RSVP Signalling Info:\n       Src 192.168.0.1, Dst 192.168.0.2, Tun_Id 101, Tun_Instance 1\n    RSVP Path Info:\n      My Address: 10.0.0.17   \n      Explicit Route: 10.0.0.18 10.0.0.49 10.0.0.50 10.0.0.65 \n                      10.0.0.66 10.0.0.73 10.0.0.74 10.0.0.90 \n                      10.0.0.89 10.0.0.25 10.0.0.26 10.0.0.10 \n                      10.0.0.9 192.168.0.2 \n      Record   Route: \n      Tspec: ave rate=0 kbits, burst=1000 bytes, peak rate=0 kbits\n    RSVP Resv Info:\n      Record   Route:  10.0.0.49 10.0.0.65 10.0.0.73 10.0.0.90\n                       10.0.0.25 10.0.0.10 10.0.0.9\n      Fspec: ave rate=0 kbits, burst=1000 bytes, peak rate=0 kbits\n  Shortest Unconstrained Path Info:\n    Path Weight: 7 (TE)\n    Explicit Route: 10.0.0.22 10.0.0.21 10.0.0.41 10.0.0.42 \n                    10.0.0.54 10.0.0.53 10.0.0.69 10.0.0.70 \n                    10.0.0.93 10.0.0.94 10.0.0.25 10.0.0.26 \n                    10.0.0.10 10.0.0.9 192.168.0.2 \n  History:\n    Tunnel:\n      Time since created: 2 hours, 27 minutes\n      Time since path change: 2 hours, 27 minutes\n      Number of LSP IDs (Tun_Instances) used: 1\n    Current LSP:\n      Uptime: 2 hours, 27 minutes\nstart#\n\n\n\u4ed8\u9332\n\n\u30d1\u30b9\u751f\u6210\u30b9\u30af\u30ea\u30d7\u30c8\nstart\u30eb\u30fc\u30bf\u306732\u30d1\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u305f\u3081\u3001Ruby\u3067\u30b9\u30af\u30ea\u30d7\u30c8\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\u4e0b\u8a18\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067MPLS-TE\u306e\u5b9a\u7fa9\u7528\u306e\u30b3\u30f3\u30d5\u30a3\u30b0\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\ncreate_path.rb\n# IP\u30a2\u30c9\u30ec\u30b9\u306e4\u30aa\u30af\u30c6\u30c3\u30c8\u76ee\nzun_row  = [11, 12, 13, 14, 15, 31]\ndoko_row = [21, 22, 23, 24, 25, 32]\nrow      = zun_row.zip(doko_row)\n# => [[11, 21], [12, 22], [13, 23], [14, 24], [15, 25], [31, 32]]\n\n# 2\u9032\u6570\u306732\u30d1\u30bf\u30fc\u30f3\u3092\u5b9a\u7fa9\n# 0\u306f\u30ba\u30f3\u5217\u30011\u306f\u30c9\u30b3\u5217\u3092\u7d4c\u7531\u3059\u308b\u3088\u3046\u8a2d\u5b9a\nkiyoshi_path = '00001'\npaths = []\n32.times do |i|\n  path = '%05b' % i\n  # 00001(zun1 zun2 zun3 zun4 dok5)\u306e\u5834\u5408\u3001kiyoshi\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\n  path += kiyoshi_path == path ? '1' : '0'\n  paths << path\nend\n\n# 32\u30d1\u30bf\u30fc\u30f3\u306eMPLS-TE\u30c8\u30f3\u30cd\u30eb\u3092\u751f\u6210\npaths.each_with_index do |path, i|\n  iface = 'Tunnel%d' % (100 + i)\n  puts 'ip explicit-path name %s' % iface\n  # \u4e2d\u7d99\u3059\u308b\u30eb\u30fc\u30bf\u3092\u5b9a\u7fa9\n  path.chars.each_with_index do |c, j|\n    puts ' next-address 192.168.0.%d ' % row[j][c.to_i]\n  end\n  puts 'interface %s' % iface\n  puts ' ip unnumbered Loopback0'\n  puts ' tunnel destination 192.168.0.2'\n  puts ' tunnel mode mpls traffic-eng'\n  puts ' tunnel mpls traffic-eng path-option 1 explicit name %s' % iface\n  puts ' tunnel mpls traffic-eng record-route'\n  puts ' tunnel mpls traffic-eng autoroute announce'\n  puts\nend\n\n\n$ ruby create_path.rb \nip explicit-path name Tunnel100\n next-address 192.168.0.11 \n next-address 192.168.0.12 \n next-address 192.168.0.13 \n next-address 192.168.0.14 \n next-address 192.168.0.15 \n next-address 192.168.0.31 \ninterface Tunnel100\n ip unnumbered Loopback0\n tunnel destination 192.168.0.2\n tunnel mode mpls traffic-eng\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel100\n tunnel mpls traffic-eng record-route\n tunnel mpls traffic-eng autoroute announce\n\nip explicit-path name Tunnel101\n next-address 192.168.0.11 \n next-address 192.168.0.12 \n next-address 192.168.0.13 \n next-address 192.168.0.14 \n next-address 192.168.0.25 \n next-address 192.168.0.32 \ninterface Tunnel101\n ip unnumbered Loopback0\n tunnel destination 192.168.0.2\n tunnel mode mpls traffic-eng\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel101\n tunnel mpls traffic-eng record-route\n tunnel mpls traffic-eng autoroute announce\n\u301c\u7565\u301c\n\n\n\u30b3\u30f3\u30d5\u30a3\u30b0\nVIRL\u306b\u4ed8\u5c5e\u306e\u30c4\u30fc\u30eb\u300cAutoNetkit\u300d\u3067\u751f\u6210\u3057\u305f\u30b3\u30f3\u30d5\u30a3\u30b0\u306b\u5fc5\u8981\u306a\u30b3\u30f3\u30d5\u30a3\u30b0\u3092\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\u30b3\u30f3\u30d5\u30a3\u30b0\u304c\u9577\u3044\u305f\u3081\u3001start\u30eb\u30fc\u30bf\u3068zun1\u30eb\u30fc\u30bf\u306e\u307f\u63b2\u8f09\u3057\u307e\u3059\u3002\n\nstart\u30eb\u30fc\u30bf\nstart#show run\nBuilding configuration...\n\nCurrent configuration : 19542 bytes\n!\n! Last configuration change at 11:33:50 UTC Fri Mar 25 2016\n!\nversion 15.6\nservice timestamps debug datetime msec\nservice timestamps log datetime msec\nno service password-encryption\n!\nhostname start\n!\nboot-start-marker\nboot-end-marker\n!\n!\nvrf definition Mgmt-intf\n !\n address-family ipv4\n exit-address-family\n !\n address-family ipv6\n exit-address-family\n!\nenable password cisco\n!\nno aaa new-model\nethernet lmi ce\n!\n!\n!\nmmi polling-interval 60\nno mmi auto-configure\nno mmi pvc\nmmi snmp-timeout 180\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\nno ip domain lookup\nip domain name virl.info\nip cef\nip cef load-sharing algorithm include-ports destination\nipv6 unicast-routing\nipv6 cef\n!\nmultilink bundle-name authenticated\nmpls traffic-eng tunnels\n!\n!\n!\n!\nusername cisco privilege 15 secret 5 $1$m4LM$omj4gj9dA2PFBXyGxz.Og1\n!\nredundancy\n!\nno cdp run\n!\n! \n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\ninterface Loopback0\n description Loopback\n ip address 192.168.0.1 255.255.255.255\n!\ninterface Tunnel100\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel100\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel101\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel101\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel102\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel102\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel103\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel103\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel104\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel104\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel105\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel105\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel106\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel106\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel107\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel107\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel108\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel108\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel109\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel109\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel110\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel110\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel111\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel111\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel112\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel112\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel113\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel113\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel114\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel114\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel115\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel115\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel116\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel116\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel117\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel117\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel118\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel118\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel119\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel119\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel120\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel120\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel121\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel121\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel122\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel122\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel123\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel123\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel124\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel124\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel125\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel125\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel126\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel126\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel127\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel127\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel128\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel128\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel129\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel129\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel130\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel130\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel131\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel131\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface GigabitEthernet0/0\n description OOB Management\n vrf forwarding Mgmt-intf\n ip address 10.255.0.212 255.255.0.0\n duplex full\n speed auto\n media-type rj45\n!\ninterface GigabitEthernet0/1\n description to zun1\n ip address 10.0.0.17 255.255.255.252\n ip ospf cost 1\n duplex full\n speed auto\n media-type rj45\n mpls traffic-eng tunnels\n mpls ip\n ip rsvp bandwidth percent 100\n!\ninterface GigabitEthernet0/2\n description to doko1\n ip address 10.0.0.22 255.255.255.252\n ip ospf cost 1\n duplex full\n speed auto\n media-type rj45\n mpls traffic-eng tunnels\n mpls ip\n ip rsvp bandwidth percent 100\n!\ninterface GigabitEthernet0/3\n description to host\n ip address 10.0.0.5 255.255.255.252\n ip ospf cost 1\n duplex full\n speed auto\n media-type rj45\n!\nrouter ospf 1\n mpls traffic-eng router-id Loopback0\n mpls traffic-eng area 0\n passive-interface Loopback0\n network 10.0.0.4 0.0.0.3 area 0\n network 10.0.0.16 0.0.0.3 area 0\n network 10.0.0.20 0.0.0.3 area 0\n network 192.168.0.1 0.0.0.0 area 0\n maximum-paths 32\n!\nrouter bgp 1\n bgp router-id 192.168.0.1\n bgp log-neighbor-changes\n !\n address-family ipv4\n  network 192.168.0.1 mask 255.255.255.255\n exit-address-family\n!\nip forward-protocol nd\n!\n!\nno ip http server\nno ip http secure-server\n!\nip explicit-path name Tunnel100 enable\n next-address 192.168.0.11\n next-address 192.168.0.12\n next-address 192.168.0.13\n next-address 192.168.0.14\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel101 enable\n next-address 192.168.0.11\n next-address 192.168.0.12\n next-address 192.168.0.13\n next-address 192.168.0.14\n next-address 192.168.0.25\n next-address 192.168.0.32\n!\nip explicit-path name Tunnel102 enable\n next-address 192.168.0.11\n next-address 192.168.0.12\n next-address 192.168.0.13\n next-address 192.168.0.24\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel103 enable\n next-address 192.168.0.11\n next-address 192.168.0.12\n next-address 192.168.0.13\n next-address 192.168.0.24\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel104 enable\n next-address 192.168.0.11\n next-address 192.168.0.12\n next-address 192.168.0.23\n next-address 192.168.0.14\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel105 enable\n next-address 192.168.0.11\n next-address 192.168.0.12\n next-address 192.168.0.23\n next-address 192.168.0.14\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel106 enable\n next-address 192.168.0.11\n next-address 192.168.0.12\n next-address 192.168.0.23\n next-address 192.168.0.24\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel107 enable\n next-address 192.168.0.11\n next-address 192.168.0.12\n next-address 192.168.0.23\n next-address 192.168.0.24\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel108 enable\n next-address 192.168.0.11\n next-address 192.168.0.22\n next-address 192.168.0.13\n next-address 192.168.0.14\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel109 enable\n next-address 192.168.0.11\n next-address 192.168.0.22\n next-address 192.168.0.13\n next-address 192.168.0.14\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel110 enable\n next-address 192.168.0.11\n next-address 192.168.0.22\n next-address 192.168.0.13\n next-address 192.168.0.24\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel111 enable\n next-address 192.168.0.11\n next-address 192.168.0.22\n next-address 192.168.0.13\n next-address 192.168.0.24\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel112 enable\n next-address 192.168.0.11\n next-address 192.168.0.22\n next-address 192.168.0.23\n next-address 192.168.0.14\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel113 enable\n next-address 192.168.0.11\n next-address 192.168.0.22\n next-address 192.168.0.23\n next-address 192.168.0.14\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel114 enable\n next-address 192.168.0.11\n next-address 192.168.0.22\n next-address 192.168.0.23\n next-address 192.168.0.24\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel115 enable\n next-address 192.168.0.11\n next-address 192.168.0.22\n next-address 192.168.0.23\n next-address 192.168.0.24\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel116 enable\n next-address 192.168.0.21\n next-address 192.168.0.12\n next-address 192.168.0.13\n next-address 192.168.0.14\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel117 enable\n next-address 192.168.0.21\n next-address 192.168.0.12\n next-address 192.168.0.13\n next-address 192.168.0.14\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel118 enable\n next-address 192.168.0.21\n next-address 192.168.0.12\n next-address 192.168.0.13\n next-address 192.168.0.24\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel119 enable\n next-address 192.168.0.21\n next-address 192.168.0.12\n next-address 192.168.0.13\n next-address 192.168.0.24\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel120 enable\n next-address 192.168.0.21\n next-address 192.168.0.12\n next-address 192.168.0.23\n next-address 192.168.0.14\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel121 enable\n next-address 192.168.0.21\n next-address 192.168.0.12\n next-address 192.168.0.23\n next-address 192.168.0.14\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel122 enable\n next-address 192.168.0.21\n next-address 192.168.0.12\n next-address 192.168.0.23\n next-address 192.168.0.24\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel123 enable\n next-address 192.168.0.21\n next-address 192.168.0.12\n next-address 192.168.0.23\n next-address 192.168.0.24\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel124 enable\n next-address 192.168.0.21\n next-address 192.168.0.22\n next-address 192.168.0.13\n next-address 192.168.0.14\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel125 enable\n next-address 192.168.0.21\n next-address 192.168.0.22\n next-address 192.168.0.13\n next-address 192.168.0.14\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel126 enable\n next-address 192.168.0.21\n next-address 192.168.0.22\n next-address 192.168.0.13\n next-address 192.168.0.24\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel127 enable\n next-address 192.168.0.21\n next-address 192.168.0.22\n next-address 192.168.0.13\n next-address 192.168.0.24\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel128 enable\n next-address 192.168.0.21\n next-address 192.168.0.22\n next-address 192.168.0.23\n next-address 192.168.0.14\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel129 enable\n next-address 192.168.0.21\n next-address 192.168.0.22\n next-address 192.168.0.23\n next-address 192.168.0.14\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel130 enable\n next-address 192.168.0.21\n next-address 192.168.0.22\n next-address 192.168.0.23\n next-address 192.168.0.24\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel131 enable\n next-address 192.168.0.21\n next-address 192.168.0.22\n next-address 192.168.0.23\n next-address 192.168.0.24\n next-address 192.168.0.25\n next-address 192.168.0.31\nip ssh server algorithm authentication password\n!\n!\n!\nmpls ldp router-id Loopback0\n!\ncontrol-plane\n!\nbanner exec ^C\n**************************************************************************\n* IOSv is strictly limited to use for evaluation, demonstration and IOS  *\n* education. IOSv is provided as-is and is not supported by Cisco's      *\n* Technical Advisory Center. Any use or disclosure, in whole or in part, *\n* of the IOSv Software or Documentation to any third party for any       *\n* purposes is expressly prohibited except as otherwise authorized by     *\n* Cisco in writing.                                                      *\n**************************************************************************^C\nbanner incoming ^C\n**************************************************************************\n* IOSv is strictly limited to use for evaluation, demonstration and IOS  *\n* education. IOSv is provided as-is and is not supported by Cisco's      *\n* Technical Advisory Center. Any use or disclosure, in whole or in part, *\n* of the IOSv Software or Documentation to any third party for any       *\n* purposes is expressly prohibited except as otherwise authorized by     *\n* Cisco in writing.                                                      *\n**************************************************************************^C\nbanner login ^C\n**************************************************************************\n* IOSv is strictly limited to use for evaluation, demonstration and IOS  *\n* education. IOSv is provided as-is and is not supported by Cisco's      *\n* Technical Advisory Center. Any use or disclosure, in whole or in part, *\n* of the IOSv Software or Documentation to any third party for any       *\n* purposes is expressly prohibited except as otherwise authorized by     *\n* Cisco in writing.                                                      *\n**************************************************************************^C\n!\nline con 0\n password cisco\nline aux 0\nline vty 0 4\n exec-timeout 720 0\n password cisco\n login local\n transport input telnet ssh\n!\nno scheduler allocate\n!\nend\n\n\nzun1\u30eb\u30fc\u30bf\nzun1#show run\nBuilding configuration...\n\nCurrent configuration : 4276 bytes\n!\n! Last configuration change at 10:18:31 UTC Fri Mar 25 2016\n!\nversion 15.6\nservice timestamps debug datetime msec\nservice timestamps log datetime msec\nno service password-encryption\n!\nhostname zun1\n!\nboot-start-marker\nboot-end-marker\n!\n!\nvrf definition Mgmt-intf\n !\n address-family ipv4\n exit-address-family\n !\n address-family ipv6\n exit-address-family\n!\nenable password cisco\n!\nno aaa new-model\nethernet lmi ce\n!\n!\n!\nmmi polling-interval 60\nno mmi auto-configure\nno mmi pvc\nmmi snmp-timeout 180\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\nno ip domain lookup\nip domain name virl.info\nip cef\nipv6 unicast-routing\nipv6 cef\n!\nmultilink bundle-name authenticated\nmpls traffic-eng tunnels\n!\n!\n!\n!\nusername cisco privilege 15 secret 5 $1$7E6E$AiBjxgKJELyQo8PUZU1X10\n!\nredundancy\n!\nno cdp run\n!\n! \n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\ninterface Loopback0\n description Loopback\n ip address 192.168.0.11 255.255.255.255\n!\ninterface GigabitEthernet0/0\n description OOB Management\n vrf forwarding Mgmt-intf\n ip address 10.255.0.219 255.255.0.0\n duplex full\n speed auto\n media-type rj45\n!\ninterface GigabitEthernet0/1\n description to zun2\n ip address 10.0.0.49 255.255.255.252\n ip ospf cost 1\n duplex full\n speed auto\n media-type rj45\n mpls traffic-eng tunnels\n mpls ip\n ip rsvp bandwidth percent 100\n!\ninterface GigabitEthernet0/2\n description to doko2\n ip address 10.0.0.46 255.255.255.252\n ip ospf cost 1\n duplex full\n speed auto\n media-type rj45\n mpls traffic-eng tunnels\n mpls ip\n ip rsvp bandwidth percent 100\n!\ninterface GigabitEthernet0/3\n description to start\n ip address 10.0.0.18 255.255.255.252\n ip ospf cost 1\n duplex full\n speed auto\n media-type rj45\n mpls traffic-eng tunnels\n mpls ip\n ip rsvp bandwidth percent 100\n!\nrouter ospf 1\n mpls traffic-eng router-id Loopback0\n mpls traffic-eng area 0\n passive-interface Loopback0\n network 10.0.0.16 0.0.0.3 area 0\n network 10.0.0.44 0.0.0.3 area 0\n network 10.0.0.48 0.0.0.3 area 0\n network 192.168.0.11 0.0.0.0 area 0\n!\nrouter bgp 1\n bgp router-id 192.168.0.11\n bgp log-neighbor-changes\n !\n address-family ipv4\n  network 192.168.0.11 mask 255.255.255.255\n exit-address-family\n!\nip forward-protocol nd\n!\n!\nno ip http server\nno ip http secure-server\nip ssh server algorithm authentication password\n!\n!\n!\nmpls ldp router-id Loopback0\n!\ncontrol-plane\n!\nbanner exec ^C\n**************************************************************************\n* IOSv is strictly limited to use for evaluation, demonstration and IOS  *\n* education. IOSv is provided as-is and is not supported by Cisco's      *\n* Technical Advisory Center. Any use or disclosure, in whole or in part, *\n* of the IOSv Software or Documentation to any third party for any       *\n* purposes is expressly prohibited except as otherwise authorized by     *\n* Cisco in writing.                                                      *\n**************************************************************************^C\nbanner incoming ^C\n**************************************************************************\n* IOSv is strictly limited to use for evaluation, demonstration and IOS  *\n* education. IOSv is provided as-is and is not supported by Cisco's      *\n* Technical Advisory Center. Any use or disclosure, in whole or in part, *\n* of the IOSv Software or Documentation to any third party for any       *\n* purposes is expressly prohibited except as otherwise authorized by     *\n* Cisco in writing.                                                      *\n**************************************************************************^C\nbanner login ^C\n**************************************************************************\n* IOSv is strictly limited to use for evaluation, demonstration and IOS  *\n* education. IOSv is provided as-is and is not supported by Cisco's      *\n* Technical Advisory Center. Any use or disclosure, in whole or in part, *\n* of the IOSv Software or Documentation to any third party for any       *\n* purposes is expressly prohibited except as otherwise authorized by     *\n* Cisco in writing.                                                      *\n**************************************************************************^C\n!\nline con 0\n password cisco\nline aux 0\nline vty 0 4\n exec-timeout 720 0\n password cisco\n login local\n transport input telnet ssh\n!\nno scheduler allocate\n!\nend\n\n\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u3092\u30eb\u30fc\u30bf\u3067\u5b9f\u73fe\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n@webdevjp\u3055\u3093\u306e\u4e0b\u8a18\u306e\u30c4\u30a4\u30fc\u30c8\u306b\u89e6\u767a\u3055\u308c\u3001Cisco\u30eb\u30fc\u30bf\u3067\u5b9f\u73fe\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n<blockquote class=\"twitter-tweet\" data-lang=\"ja\"><p lang=\"ja\" dir=\"ltr\">\u30ba\u30f3\u30c9\u30b3\u3092traceroute\u3067\u8868\u73fe\u3057\u307e\u3057\u305f(\u30e1\u30c7\u30a3\u30a2\u30a2\u30fc\u30c8) <a href=\"https://t.co/1Bc7DDfGXi\">pic.twitter.com/1Bc7DDfGXi</a></p>&mdash; Web\u732b (@webdevjp) <a href=\"https://twitter.com/webdevjp/status/712252677736902656\">2016\u5e743\u670822\u65e5</a></blockquote>\n\n\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u306b\u3064\u3044\u3066\u306f\u3001[\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u307e\u3068\u3081](http://qiita.com/shunsugai@github/items/971a15461de29563bf90)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n# \u30ba\u30f3\u30c9\u30b3\u30eb\u30fc\u30bf\n\u300c\u30ba\u30f3\u300d\u30eb\u30fc\u30bf\u3068\u300c\u30c9\u30b3\u300d\u30eb\u30fc\u30bf\u3067\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u69cb\u7bc9\u3057\u3001\u7d4c\u7531\u3059\u308b\u30eb\u30fc\u30bf\u306b\u3088\u3063\u3066\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002\u5b9f\u73fe\u306b\u306f\u30eb\u30fc\u30bf\u304c\u5927\u91cf\u306b\u5fc5\u8981\u306a\u305f\u3081\u3001Cisco\u306e\u4eee\u60f3\u30eb\u30fc\u30bf\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b[Cisco VIRL](http://virl.cisco.com/)\u3092\u7528\u3044\u3066\u3001\u5408\u8a0814\u53f0\u306e\u4eee\u60f3\u30eb\u30fc\u30bf\u3068\u691c\u8a3c\u7528\u30db\u30b9\u30c8\u3092\u69cb\u7bc9\u3057\u307e\u3057\u305f\u3002\n\u69cb\u7bc9\u3057\u305f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306f\u4e0b\u56f3\u306b\u306a\u308a\u307e\u3059\u3002\u6700\u521d\u306bstart\u30eb\u30fc\u30bf\u3068\u6700\u5f8c\u306bfinish\u30eb\u30fc\u30bf\u304c\u3042\u308a\u3001\u305d\u306e\u9593\u306b\u30ba\u30f3\u30c9\u30b3\u30eb\u30fc\u30bf\u3068\u30ad\u30e8\u30b7\u30eb\u30fc\u30bf\u3068failed\u30eb\u30fc\u30bf\u3067\u69cb\u6210\u3057\u3066\u3044\u307e\u3059\u3002\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3057\u305f\u6642\u306b\u306f\u30ad\u30e8\u30b7\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3057\u3001\u305d\u308c\u4ee5\u5916\u306ffailed\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3057\u307e\u3059\u3002\n\n\u56f3. VIRL\u306b\u3088\u308bCisco\u4eee\u60f3\u30eb\u30fc\u30bf\u306e\u69cb\u6210\u56f3\n![\u69cb\u6210\u56f3.png](https://qiita-image-store.s3.amazonaws.com/0/12026/6519facb-b02f-405f-d4db-75590fc1232e.png)\n\n## \u65b9\u6cd5\n\u30eb\u30fc\u30bf\u3067\u5b9b\u5148\u306b\u8907\u6570\u306e\u7d4c\u8def\u304c\u3042\u308a\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30d7\u30ed\u30c8\u30b3\u30eb\u306eOSFP\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001ECMP\u306b\u3088\u308a\u5206\u6563\u3057\u3066\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u304c\u6d41\u308c\u307e\u3059\u3002\u3053\u306e\u307e\u307e\u69cb\u7bc9\u3059\u308b\u3068\u3001\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3057\u306a\u304f\u3066\u3082\u3001\u30ad\u30e8\u30b7\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u30bd\u30fc\u30b9\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u3088\u308a\u4e88\u3081\u7d4c\u7531\u3059\u308b\u30eb\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u30bd\u30fc\u30b9\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306fOSPF\u3068MPLS-TE\u3067\u5b9f\u73fe\u3057\u307e\u3059\u3002\n5\u6bb5\u306e\u30ba\u30f3\u30c9\u30b3\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3059\u308b\u30d1\u30b9\u306f32\u30d1\u30b9\uff082\u306e5\u4e57\uff09\u3042\u308b\u305f\u3081\u3001\u516832\u30d1\u30b9\u3092start\u30eb\u30fc\u30bf\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u300232\u30d1\u30b9\u4e2d\u3001\u300czun1 - zun2 - zun3 - zun4 - doko5\u300d\u3092\u7d4c\u7531\u3059\u308b\u30d1\u30b9\u306e\u307f\u30ad\u30e8\u30b7\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3057\u3001\u305d\u308c\u4ee5\u5916\u306ffailed\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3059\u308b\u3088\u3046\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30d1\u30b1\u30c3\u30c8\u304cstart\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3059\u308b\u5834\u5408\u3001ECMP\u306b\u3088\u308a32\u30d1\u30b9\u304b\u30891\u30d1\u30b9\u304c\u7d4c\u8def\u3068\u3057\u3066\u9078\u5b9a\u3055\u308c\u3001\u6307\u5b9a\u3057\u305f\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3057\u3066finish\u307e\u3067\u5230\u9054\u3057\u307e\u3059\u3002\n\n## \u7d50\u679c\n\u4e0b\u8a18\u306e\u901a\u308ahost\u304b\u3089traceroute\u3059\u308b\u3053\u3068\u3067\u3001\u7279\u5b9a\u30d1\u30b1\u30c3\u30c8\u306e\u307f\u30ad\u30e8\u30b7\u30eb\u30fc\u30bf\u3092\u901a\u308a\u3001\u305d\u308c\u4ee5\u5916\u306ffailed\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\u3057\u307e\u3059\u3002\n![\u5b9f\u884c\u7d50\u679c.png](https://qiita-image-store.s3.amazonaws.com/0/12026/b27b8475-6b60-a0ef-5c94-1868e5f51f6b.png)\n\ntraceroute\u306e\u5b9f\u884c\u7d50\u679c\u306b\u30eb\u30fc\u30bf\u540d\u3092\u8868\u793a\u3059\u308b\u305f\u3081\u3001host\u306e/etc/hosts\u306bIP\u30a2\u30c9\u30ec\u30b9\u3068\u30db\u30b9\u30c8\u540d\u3092\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002\n\ntraceroute\u306e\u5b9f\u884c\u6642\u306b\u30db\u30c3\u30d7\u3054\u3068\u306b\u7570\u306a\u308b\u30d1\u30b9\u3092\u7d4c\u7531\u3059\u308b\u3053\u3068\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u3001traceroute\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001TCP\u306e\u6307\u5b9a\u3068\u5b9b\u5148\u30dd\u30fc\u30c8\u3092\u6307\u5b9a\u3057\u3066\u3001\u30d7\u30ed\u30fc\u30d6\u30d1\u30b1\u30c3\u30c8\u306e\u5b9b\u5148\u60c5\u5831\u304c\u5909\u5316\u3057\u306a\u3044\u3088\u3046\u56fa\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u300c-T\u300d\u3067TCP\u30d7\u30ed\u30c8\u30b3\u30eb\u3001\u300c-p\u300d\u3067\u5b9b\u5148\u30dd\u30fc\u30c8\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001traceroute\u306e\u30d7\u30ed\u30fc\u30d6\u30d1\u30b1\u30c3\u30c8\u306e\u5b9b\u5148\u60c5\u5831\u304c\u30d7\u30ed\u30fc\u30d6\u30d1\u30b1\u30c3\u30c8\u3054\u3068\u306b\u5909\u5316\u3057\u306a\u3044\u305f\u3081\u3001\u540c\u3058\u30d1\u30b9\u3092\u7d4c\u7531\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n## \u8a2d\u5b9a\nCisco\u30eb\u30fc\u30bf\u306eMPLS-TE\u8a2d\u5b9a\u3092\u629c\u7c8b\u3057\u307e\u3057\u305f\u30021\u30eb\u30fc\u30bf\u307e\u308b\u3054\u3068\u306e\u30b3\u30f3\u30d5\u30a3\u30b0\u306f\u4ed8\u9332\u306b\u3042\u308a\u307e\u3059\u3002\nstart\u30eb\u30fc\u30bf\u306e\u307f\u3001\u30bd\u30fc\u30b9\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u305f\u3081\u306b\u3001\u7279\u5225\u306a\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\n```txt:start\u30eb\u30fc\u30bf\u306e\u8a2d\u5b9a\n! \u30d7\u30ed\u30fc\u30d6\u30d1\u30b1\u30c3\u30c8\u306bTCP\u3092\u5229\u7528\u3057\u305ftraceroute\u6642\u306b\u5b9b\u5148\u30dd\u30fc\u30c8\u756a\u53f7\u3054\u3068\u306b\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b9\u3059\u308b\u3088\u3046\u8a2d\u5b9a\nip cef load-sharing algorithm include-ports destination\n!\n! \u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u304c32\u30d1\u30b9\u306b\u5206\u6563\u3055\u308c\u308b\u3088\u3046\u8a2d\u5b9a\nrouter ospf 1\n maximum-paths 32\n!\n! \u30bd\u30fc\u30b9\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u7528\u306b32\u30d1\u30b9\u5206\u306eMPLS-TE\u306e\u5b9a\u7fa9\u3092\u5b9f\u65bd\n! ip explicit-path\u3068\u30c8\u30f3\u30cd\u30eb\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u30d1\u30b9\u3054\u3068\u306b\u8a2d\u5b9a\n!\n! \u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3057\u306a\u3044\u30d1\u30b9\nip explicit-path name Tunnel100 enable\n next-address 192.168.0.11   ! zun1\u30eb\u30fc\u30bf\n next-address 192.168.0.12   ! zun2\u30eb\u30fc\u30bf\n next-address 192.168.0.13   ! zun3\u30eb\u30fc\u30bf\n next-address 192.168.0.14   ! zun4\u30eb\u30fc\u30bf\n next-address 192.168.0.15   ! zun5\u30eb\u30fc\u30bf\n next-address 192.168.0.31   ! failed\u30eb\u30fc\u30bf\ninterface Tunnel100\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2  ! finish\u30eb\u30fc\u30bf\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel100\n tunnel mpls traffic-eng record-route\n!\n! \u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7\u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u30d1\u30b9\nip explicit-path name Tunnel101 enable\n next-address 192.168.0.11  ! zun1\u30eb\u30fc\u30bf\n next-address 192.168.0.12  ! zun2\u30eb\u30fc\u30bf\n next-address 192.168.0.13  ! zun3\u30eb\u30fc\u30bf\n next-address 192.168.0.14  ! zun4\u30eb\u30fc\u30bf\n next-address 192.168.0.25  ! doko5\u30eb\u30fc\u30bf\n next-address 192.168.0.32  ! kiyoshi\u30eb\u30fc\u30bf\ninterface Tunnel101\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2  ! finish\u30eb\u30fc\u30bf\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel101\n tunnel mpls traffic-eng record-route\n```\n## \u72b6\u614b\nstart\u30eb\u30fc\u30bf\u3067show ip route\u306e\u5b9f\u884c\u7d50\u679c\u3067\u3059\u300232\u30d1\u30b9\u3067ECMP\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n```txt\nstart#show ip route 192.168.0.2\nRouting entry for 192.168.0.2/32\n  Known via \"ospf 1\", distance 110, metric 8, type intra area\n  Last update from 192.168.0.2 on Tunnel122, 02:23:58 ago\n  Routing Descriptor Blocks:\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel122\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel123\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel124\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel125\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel126\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel127\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel128\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel129\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel130\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:23:58 ago, via Tunnel131\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel113\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel114\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel115\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel116\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel117\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel118\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel119\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel120\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:08 ago, via Tunnel121\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:18 ago, via Tunnel108\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:18 ago, via Tunnel109\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:18 ago, via Tunnel110\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:18 ago, via Tunnel111\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:18 ago, via Tunnel112\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:28 ago, via Tunnel100\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:28 ago, via Tunnel101\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:28 ago, via Tunnel102\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:28 ago, via Tunnel103\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:28 ago, via Tunnel104\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:28 ago, via Tunnel105\n      Route metric is 8, traffic share count is 1\n    192.168.0.2, from 192.168.0.2, 02:24:28 ago, via Tunnel106\n      Route metric is 8, traffic share count is 1\n  * 192.168.0.2, from 192.168.0.2, 02:24:28 ago, via Tunnel107\n      Route metric is 8, traffic share count is 1\nstart# \n```\n\nMPLS-TE\u3067\u751f\u6210\u3057\u305f\u30c8\u30f3\u30cd\u30eb\u306e\u7d50\u679c\u3067\u3059\u3002ip explicit-paths\u3067\u7d4c\u7531\u3059\u308b\u30eb\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u3001MPLS-TE Tunnel\u306b\u305d\u306e\u30d1\u30b9\u60c5\u5831\u3092\u4f7f\u3046\u3088\u3046\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n```txt\nstart#show ip explicit-paths name Tunnel101\nPATH Tunnel101 (strict source route, path complete, generation 16)\n    1: next-address 192.168.0.11\n    2: next-address 192.168.0.12\n    3: next-address 192.168.0.13\n    4: next-address 192.168.0.14\n    5: next-address 192.168.0.25\n    6: next-address 192.168.0.32\nstart#show mpls traffic-eng tunnels Tunnel101\n\nName: start_t101                          (Tunnel101) Destination: 192.168.0.2\n  Status:\n    Admin: up         Oper: up     Path: valid       Signalling: connected\n    path option 1, type explicit Tunnel101 (Basis for Setup, path weight 7)\n\n  Config Parameters:\n    Bandwidth: 0        kbps (Global)  Priority: 7  7   Affinity: 0x0/0xFFFF\n    Metric Type: TE (default)\n    AutoRoute:  enabled   LockDown: disabled  Loadshare: 0        bw-based\n    auto-bw: disabled\n  Active Path Option Parameters:\n    State: explicit path option 1 is active\n    BandwidthOverride: disabled  LockDown: disabled  Verbatim: disabled\n\n\n  InLabel  :  - \n  OutLabel : GigabitEthernet0/1, 51\n  RSVP Signalling Info:\n       Src 192.168.0.1, Dst 192.168.0.2, Tun_Id 101, Tun_Instance 1\n    RSVP Path Info:\n      My Address: 10.0.0.17   \n      Explicit Route: 10.0.0.18 10.0.0.49 10.0.0.50 10.0.0.65 \n                      10.0.0.66 10.0.0.73 10.0.0.74 10.0.0.90 \n                      10.0.0.89 10.0.0.25 10.0.0.26 10.0.0.10 \n                      10.0.0.9 192.168.0.2 \n      Record   Route: \n      Tspec: ave rate=0 kbits, burst=1000 bytes, peak rate=0 kbits\n    RSVP Resv Info:\n      Record   Route:  10.0.0.49 10.0.0.65 10.0.0.73 10.0.0.90\n                       10.0.0.25 10.0.0.10 10.0.0.9\n      Fspec: ave rate=0 kbits, burst=1000 bytes, peak rate=0 kbits\n  Shortest Unconstrained Path Info:\n    Path Weight: 7 (TE)\n    Explicit Route: 10.0.0.22 10.0.0.21 10.0.0.41 10.0.0.42 \n                    10.0.0.54 10.0.0.53 10.0.0.69 10.0.0.70 \n                    10.0.0.93 10.0.0.94 10.0.0.25 10.0.0.26 \n                    10.0.0.10 10.0.0.9 192.168.0.2 \n  History:\n    Tunnel:\n      Time since created: 2 hours, 27 minutes\n      Time since path change: 2 hours, 27 minutes\n      Number of LSP IDs (Tun_Instances) used: 1\n    Current LSP:\n      Uptime: 2 hours, 27 minutes\nstart#\n```\n\n# \u4ed8\u9332\n\n## \u30d1\u30b9\u751f\u6210\u30b9\u30af\u30ea\u30d7\u30c8\nstart\u30eb\u30fc\u30bf\u306732\u30d1\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u305f\u3081\u3001Ruby\u3067\u30b9\u30af\u30ea\u30d7\u30c8\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\u4e0b\u8a18\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067MPLS-TE\u306e\u5b9a\u7fa9\u7528\u306e\u30b3\u30f3\u30d5\u30a3\u30b0\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n```rb:create_path.rb\n# IP\u30a2\u30c9\u30ec\u30b9\u306e4\u30aa\u30af\u30c6\u30c3\u30c8\u76ee\nzun_row  = [11, 12, 13, 14, 15, 31]\ndoko_row = [21, 22, 23, 24, 25, 32]\nrow      = zun_row.zip(doko_row)\n# => [[11, 21], [12, 22], [13, 23], [14, 24], [15, 25], [31, 32]]\n\n# 2\u9032\u6570\u306732\u30d1\u30bf\u30fc\u30f3\u3092\u5b9a\u7fa9\n# 0\u306f\u30ba\u30f3\u5217\u30011\u306f\u30c9\u30b3\u5217\u3092\u7d4c\u7531\u3059\u308b\u3088\u3046\u8a2d\u5b9a\nkiyoshi_path = '00001'\npaths = []\n32.times do |i|\n  path = '%05b' % i\n  # 00001(zun1 zun2 zun3 zun4 dok5)\u306e\u5834\u5408\u3001kiyoshi\u30eb\u30fc\u30bf\u3092\u7d4c\u7531\n  path += kiyoshi_path == path ? '1' : '0'\n  paths << path\nend\n\n# 32\u30d1\u30bf\u30fc\u30f3\u306eMPLS-TE\u30c8\u30f3\u30cd\u30eb\u3092\u751f\u6210\npaths.each_with_index do |path, i|\n  iface = 'Tunnel%d' % (100 + i)\n  puts 'ip explicit-path name %s' % iface\n  # \u4e2d\u7d99\u3059\u308b\u30eb\u30fc\u30bf\u3092\u5b9a\u7fa9\n  path.chars.each_with_index do |c, j|\n    puts ' next-address 192.168.0.%d ' % row[j][c.to_i]\n  end\n  puts 'interface %s' % iface\n  puts ' ip unnumbered Loopback0'\n  puts ' tunnel destination 192.168.0.2'\n  puts ' tunnel mode mpls traffic-eng'\n  puts ' tunnel mpls traffic-eng path-option 1 explicit name %s' % iface\n  puts ' tunnel mpls traffic-eng record-route'\n  puts ' tunnel mpls traffic-eng autoroute announce'\n  puts\nend\n```\n\n```bash:\n$ ruby create_path.rb \nip explicit-path name Tunnel100\n next-address 192.168.0.11 \n next-address 192.168.0.12 \n next-address 192.168.0.13 \n next-address 192.168.0.14 \n next-address 192.168.0.15 \n next-address 192.168.0.31 \ninterface Tunnel100\n ip unnumbered Loopback0\n tunnel destination 192.168.0.2\n tunnel mode mpls traffic-eng\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel100\n tunnel mpls traffic-eng record-route\n tunnel mpls traffic-eng autoroute announce\n\nip explicit-path name Tunnel101\n next-address 192.168.0.11 \n next-address 192.168.0.12 \n next-address 192.168.0.13 \n next-address 192.168.0.14 \n next-address 192.168.0.25 \n next-address 192.168.0.32 \ninterface Tunnel101\n ip unnumbered Loopback0\n tunnel destination 192.168.0.2\n tunnel mode mpls traffic-eng\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel101\n tunnel mpls traffic-eng record-route\n tunnel mpls traffic-eng autoroute announce\n\u301c\u7565\u301c\n```\n\n## \u30b3\u30f3\u30d5\u30a3\u30b0\nVIRL\u306b\u4ed8\u5c5e\u306e\u30c4\u30fc\u30eb\u300cAutoNetkit\u300d\u3067\u751f\u6210\u3057\u305f\u30b3\u30f3\u30d5\u30a3\u30b0\u306b\u5fc5\u8981\u306a\u30b3\u30f3\u30d5\u30a3\u30b0\u3092\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\u30b3\u30f3\u30d5\u30a3\u30b0\u304c\u9577\u3044\u305f\u3081\u3001start\u30eb\u30fc\u30bf\u3068zun1\u30eb\u30fc\u30bf\u306e\u307f\u63b2\u8f09\u3057\u307e\u3059\u3002\n\n## start\u30eb\u30fc\u30bf\n```txt\nstart#show run\nBuilding configuration...\n\nCurrent configuration : 19542 bytes\n!\n! Last configuration change at 11:33:50 UTC Fri Mar 25 2016\n!\nversion 15.6\nservice timestamps debug datetime msec\nservice timestamps log datetime msec\nno service password-encryption\n!\nhostname start\n!\nboot-start-marker\nboot-end-marker\n!\n!\nvrf definition Mgmt-intf\n !\n address-family ipv4\n exit-address-family\n !\n address-family ipv6\n exit-address-family\n!\nenable password cisco\n!\nno aaa new-model\nethernet lmi ce\n!\n!\n!\nmmi polling-interval 60\nno mmi auto-configure\nno mmi pvc\nmmi snmp-timeout 180\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\nno ip domain lookup\nip domain name virl.info\nip cef\nip cef load-sharing algorithm include-ports destination\nipv6 unicast-routing\nipv6 cef\n!\nmultilink bundle-name authenticated\nmpls traffic-eng tunnels\n!\n!\n!\n!\nusername cisco privilege 15 secret 5 $1$m4LM$omj4gj9dA2PFBXyGxz.Og1\n!\nredundancy\n!\nno cdp run\n!\n! \n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\ninterface Loopback0\n description Loopback\n ip address 192.168.0.1 255.255.255.255\n!\ninterface Tunnel100\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel100\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel101\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel101\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel102\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel102\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel103\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel103\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel104\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel104\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel105\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel105\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel106\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel106\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel107\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel107\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel108\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel108\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel109\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel109\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel110\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel110\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel111\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel111\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel112\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel112\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel113\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel113\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel114\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel114\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel115\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel115\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel116\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel116\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel117\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel117\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel118\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel118\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel119\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel119\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel120\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel120\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel121\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel121\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel122\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel122\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel123\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel123\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel124\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel124\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel125\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel125\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel126\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel126\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel127\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel127\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel128\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel128\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel129\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel129\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel130\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel130\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface Tunnel131\n ip unnumbered Loopback0\n tunnel mode mpls traffic-eng\n tunnel destination 192.168.0.2\n tunnel mpls traffic-eng autoroute announce\n tunnel mpls traffic-eng path-option 1 explicit name Tunnel131\n tunnel mpls traffic-eng record-route\n no routing dynamic\n!\ninterface GigabitEthernet0/0\n description OOB Management\n vrf forwarding Mgmt-intf\n ip address 10.255.0.212 255.255.0.0\n duplex full\n speed auto\n media-type rj45\n!\ninterface GigabitEthernet0/1\n description to zun1\n ip address 10.0.0.17 255.255.255.252\n ip ospf cost 1\n duplex full\n speed auto\n media-type rj45\n mpls traffic-eng tunnels\n mpls ip\n ip rsvp bandwidth percent 100\n!\ninterface GigabitEthernet0/2\n description to doko1\n ip address 10.0.0.22 255.255.255.252\n ip ospf cost 1\n duplex full\n speed auto\n media-type rj45\n mpls traffic-eng tunnels\n mpls ip\n ip rsvp bandwidth percent 100\n!\ninterface GigabitEthernet0/3\n description to host\n ip address 10.0.0.5 255.255.255.252\n ip ospf cost 1\n duplex full\n speed auto\n media-type rj45\n!\nrouter ospf 1\n mpls traffic-eng router-id Loopback0\n mpls traffic-eng area 0\n passive-interface Loopback0\n network 10.0.0.4 0.0.0.3 area 0\n network 10.0.0.16 0.0.0.3 area 0\n network 10.0.0.20 0.0.0.3 area 0\n network 192.168.0.1 0.0.0.0 area 0\n maximum-paths 32\n!\nrouter bgp 1\n bgp router-id 192.168.0.1\n bgp log-neighbor-changes\n !\n address-family ipv4\n  network 192.168.0.1 mask 255.255.255.255\n exit-address-family\n!\nip forward-protocol nd\n!\n!\nno ip http server\nno ip http secure-server\n!\nip explicit-path name Tunnel100 enable\n next-address 192.168.0.11\n next-address 192.168.0.12\n next-address 192.168.0.13\n next-address 192.168.0.14\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel101 enable\n next-address 192.168.0.11\n next-address 192.168.0.12\n next-address 192.168.0.13\n next-address 192.168.0.14\n next-address 192.168.0.25\n next-address 192.168.0.32\n!\nip explicit-path name Tunnel102 enable\n next-address 192.168.0.11\n next-address 192.168.0.12\n next-address 192.168.0.13\n next-address 192.168.0.24\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel103 enable\n next-address 192.168.0.11\n next-address 192.168.0.12\n next-address 192.168.0.13\n next-address 192.168.0.24\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel104 enable\n next-address 192.168.0.11\n next-address 192.168.0.12\n next-address 192.168.0.23\n next-address 192.168.0.14\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel105 enable\n next-address 192.168.0.11\n next-address 192.168.0.12\n next-address 192.168.0.23\n next-address 192.168.0.14\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel106 enable\n next-address 192.168.0.11\n next-address 192.168.0.12\n next-address 192.168.0.23\n next-address 192.168.0.24\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel107 enable\n next-address 192.168.0.11\n next-address 192.168.0.12\n next-address 192.168.0.23\n next-address 192.168.0.24\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel108 enable\n next-address 192.168.0.11\n next-address 192.168.0.22\n next-address 192.168.0.13\n next-address 192.168.0.14\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel109 enable\n next-address 192.168.0.11\n next-address 192.168.0.22\n next-address 192.168.0.13\n next-address 192.168.0.14\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel110 enable\n next-address 192.168.0.11\n next-address 192.168.0.22\n next-address 192.168.0.13\n next-address 192.168.0.24\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel111 enable\n next-address 192.168.0.11\n next-address 192.168.0.22\n next-address 192.168.0.13\n next-address 192.168.0.24\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel112 enable\n next-address 192.168.0.11\n next-address 192.168.0.22\n next-address 192.168.0.23\n next-address 192.168.0.14\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel113 enable\n next-address 192.168.0.11\n next-address 192.168.0.22\n next-address 192.168.0.23\n next-address 192.168.0.14\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel114 enable\n next-address 192.168.0.11\n next-address 192.168.0.22\n next-address 192.168.0.23\n next-address 192.168.0.24\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel115 enable\n next-address 192.168.0.11\n next-address 192.168.0.22\n next-address 192.168.0.23\n next-address 192.168.0.24\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel116 enable\n next-address 192.168.0.21\n next-address 192.168.0.12\n next-address 192.168.0.13\n next-address 192.168.0.14\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel117 enable\n next-address 192.168.0.21\n next-address 192.168.0.12\n next-address 192.168.0.13\n next-address 192.168.0.14\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel118 enable\n next-address 192.168.0.21\n next-address 192.168.0.12\n next-address 192.168.0.13\n next-address 192.168.0.24\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel119 enable\n next-address 192.168.0.21\n next-address 192.168.0.12\n next-address 192.168.0.13\n next-address 192.168.0.24\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel120 enable\n next-address 192.168.0.21\n next-address 192.168.0.12\n next-address 192.168.0.23\n next-address 192.168.0.14\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel121 enable\n next-address 192.168.0.21\n next-address 192.168.0.12\n next-address 192.168.0.23\n next-address 192.168.0.14\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel122 enable\n next-address 192.168.0.21\n next-address 192.168.0.12\n next-address 192.168.0.23\n next-address 192.168.0.24\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel123 enable\n next-address 192.168.0.21\n next-address 192.168.0.12\n next-address 192.168.0.23\n next-address 192.168.0.24\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel124 enable\n next-address 192.168.0.21\n next-address 192.168.0.22\n next-address 192.168.0.13\n next-address 192.168.0.14\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel125 enable\n next-address 192.168.0.21\n next-address 192.168.0.22\n next-address 192.168.0.13\n next-address 192.168.0.14\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel126 enable\n next-address 192.168.0.21\n next-address 192.168.0.22\n next-address 192.168.0.13\n next-address 192.168.0.24\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel127 enable\n next-address 192.168.0.21\n next-address 192.168.0.22\n next-address 192.168.0.13\n next-address 192.168.0.24\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel128 enable\n next-address 192.168.0.21\n next-address 192.168.0.22\n next-address 192.168.0.23\n next-address 192.168.0.14\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel129 enable\n next-address 192.168.0.21\n next-address 192.168.0.22\n next-address 192.168.0.23\n next-address 192.168.0.14\n next-address 192.168.0.25\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel130 enable\n next-address 192.168.0.21\n next-address 192.168.0.22\n next-address 192.168.0.23\n next-address 192.168.0.24\n next-address 192.168.0.15\n next-address 192.168.0.31\n!\nip explicit-path name Tunnel131 enable\n next-address 192.168.0.21\n next-address 192.168.0.22\n next-address 192.168.0.23\n next-address 192.168.0.24\n next-address 192.168.0.25\n next-address 192.168.0.31\nip ssh server algorithm authentication password\n!\n!\n!\nmpls ldp router-id Loopback0\n!\ncontrol-plane\n!\nbanner exec ^C\n**************************************************************************\n* IOSv is strictly limited to use for evaluation, demonstration and IOS  *\n* education. IOSv is provided as-is and is not supported by Cisco's      *\n* Technical Advisory Center. Any use or disclosure, in whole or in part, *\n* of the IOSv Software or Documentation to any third party for any       *\n* purposes is expressly prohibited except as otherwise authorized by     *\n* Cisco in writing.                                                      *\n**************************************************************************^C\nbanner incoming ^C\n**************************************************************************\n* IOSv is strictly limited to use for evaluation, demonstration and IOS  *\n* education. IOSv is provided as-is and is not supported by Cisco's      *\n* Technical Advisory Center. Any use or disclosure, in whole or in part, *\n* of the IOSv Software or Documentation to any third party for any       *\n* purposes is expressly prohibited except as otherwise authorized by     *\n* Cisco in writing.                                                      *\n**************************************************************************^C\nbanner login ^C\n**************************************************************************\n* IOSv is strictly limited to use for evaluation, demonstration and IOS  *\n* education. IOSv is provided as-is and is not supported by Cisco's      *\n* Technical Advisory Center. Any use or disclosure, in whole or in part, *\n* of the IOSv Software or Documentation to any third party for any       *\n* purposes is expressly prohibited except as otherwise authorized by     *\n* Cisco in writing.                                                      *\n**************************************************************************^C\n!\nline con 0\n password cisco\nline aux 0\nline vty 0 4\n exec-timeout 720 0\n password cisco\n login local\n transport input telnet ssh\n!\nno scheduler allocate\n!\nend\n```\n\n### zun1\u30eb\u30fc\u30bf\n```txt\nzun1#show run\nBuilding configuration...\n\nCurrent configuration : 4276 bytes\n!\n! Last configuration change at 10:18:31 UTC Fri Mar 25 2016\n!\nversion 15.6\nservice timestamps debug datetime msec\nservice timestamps log datetime msec\nno service password-encryption\n!\nhostname zun1\n!\nboot-start-marker\nboot-end-marker\n!\n!\nvrf definition Mgmt-intf\n !\n address-family ipv4\n exit-address-family\n !\n address-family ipv6\n exit-address-family\n!\nenable password cisco\n!\nno aaa new-model\nethernet lmi ce\n!\n!\n!\nmmi polling-interval 60\nno mmi auto-configure\nno mmi pvc\nmmi snmp-timeout 180\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\nno ip domain lookup\nip domain name virl.info\nip cef\nipv6 unicast-routing\nipv6 cef\n!\nmultilink bundle-name authenticated\nmpls traffic-eng tunnels\n!\n!\n!\n!\nusername cisco privilege 15 secret 5 $1$7E6E$AiBjxgKJELyQo8PUZU1X10\n!\nredundancy\n!\nno cdp run\n!\n! \n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\n!\ninterface Loopback0\n description Loopback\n ip address 192.168.0.11 255.255.255.255\n!\ninterface GigabitEthernet0/0\n description OOB Management\n vrf forwarding Mgmt-intf\n ip address 10.255.0.219 255.255.0.0\n duplex full\n speed auto\n media-type rj45\n!\ninterface GigabitEthernet0/1\n description to zun2\n ip address 10.0.0.49 255.255.255.252\n ip ospf cost 1\n duplex full\n speed auto\n media-type rj45\n mpls traffic-eng tunnels\n mpls ip\n ip rsvp bandwidth percent 100\n!\ninterface GigabitEthernet0/2\n description to doko2\n ip address 10.0.0.46 255.255.255.252\n ip ospf cost 1\n duplex full\n speed auto\n media-type rj45\n mpls traffic-eng tunnels\n mpls ip\n ip rsvp bandwidth percent 100\n!\ninterface GigabitEthernet0/3\n description to start\n ip address 10.0.0.18 255.255.255.252\n ip ospf cost 1\n duplex full\n speed auto\n media-type rj45\n mpls traffic-eng tunnels\n mpls ip\n ip rsvp bandwidth percent 100\n!\nrouter ospf 1\n mpls traffic-eng router-id Loopback0\n mpls traffic-eng area 0\n passive-interface Loopback0\n network 10.0.0.16 0.0.0.3 area 0\n network 10.0.0.44 0.0.0.3 area 0\n network 10.0.0.48 0.0.0.3 area 0\n network 192.168.0.11 0.0.0.0 area 0\n!\nrouter bgp 1\n bgp router-id 192.168.0.11\n bgp log-neighbor-changes\n !\n address-family ipv4\n  network 192.168.0.11 mask 255.255.255.255\n exit-address-family\n!\nip forward-protocol nd\n!\n!\nno ip http server\nno ip http secure-server\nip ssh server algorithm authentication password\n!\n!\n!\nmpls ldp router-id Loopback0\n!\ncontrol-plane\n!\nbanner exec ^C\n**************************************************************************\n* IOSv is strictly limited to use for evaluation, demonstration and IOS  *\n* education. IOSv is provided as-is and is not supported by Cisco's      *\n* Technical Advisory Center. Any use or disclosure, in whole or in part, *\n* of the IOSv Software or Documentation to any third party for any       *\n* purposes is expressly prohibited except as otherwise authorized by     *\n* Cisco in writing.                                                      *\n**************************************************************************^C\nbanner incoming ^C\n**************************************************************************\n* IOSv is strictly limited to use for evaluation, demonstration and IOS  *\n* education. IOSv is provided as-is and is not supported by Cisco's      *\n* Technical Advisory Center. Any use or disclosure, in whole or in part, *\n* of the IOSv Software or Documentation to any third party for any       *\n* purposes is expressly prohibited except as otherwise authorized by     *\n* Cisco in writing.                                                      *\n**************************************************************************^C\nbanner login ^C\n**************************************************************************\n* IOSv is strictly limited to use for evaluation, demonstration and IOS  *\n* education. IOSv is provided as-is and is not supported by Cisco's      *\n* Technical Advisory Center. Any use or disclosure, in whole or in part, *\n* of the IOSv Software or Documentation to any third party for any       *\n* purposes is expressly prohibited except as otherwise authorized by     *\n* Cisco in writing.                                                      *\n**************************************************************************^C\n!\nline con 0\n password cisco\nline aux 0\nline vty 0 4\n exec-timeout 720 0\n password cisco\n login local\n transport input telnet ssh\n!\nno scheduler allocate\n!\nend\n```\n"}