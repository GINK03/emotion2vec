{"context": "\n\n\u5143\u30cd\u30bf\nRFC3986\u5b9a\u7fa9\u306e\u53b3\u5bc6\u306aHTTP URI\u306e\u6b63\u898f\u8868\u73fe\n\n\u4f55\u3092\u3057\u305f\u304b\nPHP\u5411\u3051\u306b\u4ee5\u4e0b\u306e\u7de8\u96c6\u3092\u884c\u3044\u307e\u3057\u305f\u3002\n\n\u9069\u5f53\u306a\u6587\u5b57\u6570\u6bce\u306b\u5206\u5272\u3057\u305f\u6587\u5b57\u5217\u30ea\u30c6\u30e9\u30eb\u306b(Atom\u306a\u3069\u306e\u30a8\u30c7\u30a3\u30bf\u306f\u4e00\u884c\u304c\u9577\u3059\u304e\u308b\u3068\u91cd\u304f\u306a\u308b)\n\u30c7\u30ea\u30df\u30bf ` \u3092\u4ed8\u52a0\n\ni \u4fee\u98fe\u5b50\u3092\u4ed8\u52a0\n\u30b0\u30eb\u30fc\u30d7\u306b\u95a2\u3057\u3066\u3001\u5168\u3066\u30ad\u30e3\u30d7\u30c1\u30e3\u7121\u3057\u306b\n\u7e70\u308a\u8fd4\u3057\u30d1\u30bf\u30fc\u30f3\u306b\u95a2\u3057\u3066\u3001\u5168\u3066\u30d0\u30c3\u30af\u30c8\u30e9\u30c3\u30af\u3092\u884c\u308f\u306a\u3044\u3088\u3046\u72ec\u5360\u7684\u306b\naaahttp://\u306a\u3069\u306b\u306f\u30de\u30c3\u30c1\u3057\u306a\u3044\u3088\u3046\u306b\uff0c\u5148\u982d\u306b\u5358\u8a9e\u5883\u754c\u306e\u5224\u5b9a\u3092\u4ed8\u52a0\n\n\n\u30b3\u30fc\u30c9\n\n\u6b63\u898f\u8868\u73fe\n$regex = \n    '`\\bhttps?+:(?://(?:(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]' .\n    '|[!$&-,:;=])*+@)?+(?:\\[(?:(?:[0-9a-f]{1,4}:){6}(?:' .\n    '[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2' .\n    '[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n    '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n    ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|::(?:[0-9a-f' .\n    ']{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1' .\n    '-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{' .\n    '2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\\\' .\n    'd|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])' .\n    ')|(?:[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:){4}(?:[0-' .\n    '9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2[0-' .\n    '4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-' .\n    '5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d' .\n    '|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-f]{' .\n    '1,4}:)?+[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:){3}(?:' .\n    '[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2' .\n    '[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n    '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n    ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-' .\n    'f]{1,4}:){0,2}[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:)' .\n    '{2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\\\' .\n    'd{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4' .\n    ']\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5' .\n    '])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:' .\n    '[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?+::[0-9a-f]{1,4' .\n    '}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d' .\n    '{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]' .\n    '\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]' .\n    ')\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[' .\n    '0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?+::(?:[0-9a-f]{1' .\n    ',4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n    '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n    ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\\\' .\n    'd|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-f]{1,4}:){' .\n    '0,5}[0-9a-f]{1,4})?+::[0-9a-f]{1,4}|(?:(?:[0-9a-f]' .\n    '{1,4}:){0,6}[0-9a-f]{1,4})?+::|v[0-9a-f]++\\.[!$&-.' .\n    '0-;=_a-z~]++)\\]|(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0' .\n    '-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\\\' .\n    'd|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|' .\n    '1\\d{2}|2[0-4]\\d|25[0-5])|(?:[-.0-9_a-z~]|%[0-9a-f]' .\n    '[0-9a-f]|[!$&-,;=])*+)(?::\\d*+)?+(?:/(?:[-.0-9_a-z' .\n    '~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+)*+|/(?:(?:[-.0' .\n    '-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])++(?:/(?:[-' .\n    '.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+)*+)?+|' .\n    '(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])++(?' .\n    ':/(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+' .\n    ')*+)?+(?:\\?+(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&' .\n    '-,/:;=?+@])*+)?+(?:#(?:[-.0-9_a-z~]|%[0-9a-f][0-9a' .\n    '-f]|[!$&-,/:;=?+@])*+)?+`i'\n;\n\n\n\u57fa\u672c\u5b9f\u88c5\u4f8b\nHTML\u7279\u6b8a\u6587\u5b57\u306e\u7f6e\u63db\u3068URL\u306b\u5bfe\u3059\u308b\u81ea\u52d5\u30ea\u30f3\u30af\u3092\u540c\u6642\u306b\u884c\u3044\u307e\u3059\u3002\nfunction escape_and_linkify($str) {\n    $regex = \n        '`\\bhttps?+:(?://(?:(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]' .\n        '|[!$&-,:;=])*+@)?+(?:\\[(?:(?:[0-9a-f]{1,4}:){6}(?:' .\n        '[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2' .\n        '[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n        '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n        ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|::(?:[0-9a-f' .\n        ']{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1' .\n        '-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{' .\n        '2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\\\' .\n        'd|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])' .\n        ')|(?:[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:){4}(?:[0-' .\n        '9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2[0-' .\n        '4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-' .\n        '5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d' .\n        '|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-f]{' .\n        '1,4}:)?+[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:){3}(?:' .\n        '[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2' .\n        '[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n        '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n        ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-' .\n        'f]{1,4}:){0,2}[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:)' .\n        '{2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\\\' .\n        'd{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4' .\n        ']\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5' .\n        '])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:' .\n        '[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?+::[0-9a-f]{1,4' .\n        '}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d' .\n        '{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]' .\n        '\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]' .\n        ')\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[' .\n        '0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?+::(?:[0-9a-f]{1' .\n        ',4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n        '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n        ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\\\' .\n        'd|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-f]{1,4}:){' .\n        '0,5}[0-9a-f]{1,4})?+::[0-9a-f]{1,4}|(?:(?:[0-9a-f]' .\n        '{1,4}:){0,6}[0-9a-f]{1,4})?+::|v[0-9a-f]++\\.[!$&-.' .\n        '0-;=_a-z~]++)\\]|(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0' .\n        '-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\\\' .\n        'd|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|' .\n        '1\\d{2}|2[0-4]\\d|25[0-5])|(?:[-.0-9_a-z~]|%[0-9a-f]' .\n        '[0-9a-f]|[!$&-,;=])*+)(?::\\d*+)?+(?:/(?:[-.0-9_a-z' .\n        '~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+)*+|/(?:(?:[-.0' .\n        '-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])++(?:/(?:[-' .\n        '.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+)*+)?+|' .\n        '(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])++(?' .\n        ':/(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+' .\n        ')*+)?+(?:\\?+(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&' .\n        '-,/:;=?+@])*+)?+(?:#(?:[-.0-9_a-z~]|%[0-9a-f][0-9a' .\n        '-f]|[!$&-,/:;=?+@])*+)?+`i'\n    ;\n    $replacement = '<a href=\"$0\">$0</a>';\n    $str = htmlspecialchars($str, ENT_QUOTES, 'UTF-8');\n    return preg_replace($regex, $replacement, $str);\n}\n\n$str = '>>10 Qiita\u3063\u3066\u4f55\u3058\u3083\u306d\u30fc\u3088ggrks https://www.google.co.jp/search?q=qiita';\necho escape_and_linkify($str);\n\n\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n&gt;&gt;10 Qiita\u3063\u3066\u4f55\u3058\u3083\u306d\u30fc\u3088ggrks <a href=\"https://www.google.co.jp/search?q=qiita\">https://www.google.co.jp/search?q=qiita</a>\n\n\n\u5fdc\u7528\u5b9f\u88c5\u4f8b\n\u63b2\u793a\u677f\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3001\u4e00\u822c\u7684\u306aURL\u3092\u30ea\u30f3\u30af\u3059\u308b\u306e\u3068\u540c\u6642\u306b >>10 \u3068\u3044\u3063\u305f\u30a2\u30f3\u30ab\u30fc\u3082\u30ea\u30f3\u30af\u3059\u308b\u5834\u5408\n$regex \u306e\u5148\u982d\u3068\u672b\u5c3e\u3092\u5c11\u3057\u66f8\u304d\u63db\u3048\u3066\u3044\u307e\u3059\u3002\nfunction escape_and_linkify($str) {\n    $regex = \n        '`(?:\\bhttps?+:(?://(?:(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]' .\n        '|[!$&-,:;=])*+@)?+(?:\\[(?:(?:[0-9a-f]{1,4}:){6}(?:' .\n        '[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2' .\n        '[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n        '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n        ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|::(?:[0-9a-f' .\n        ']{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1' .\n        '-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{' .\n        '2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\\\' .\n        'd|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])' .\n        ')|(?:[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:){4}(?:[0-' .\n        '9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2[0-' .\n        '4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-' .\n        '5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d' .\n        '|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-f]{' .\n        '1,4}:)?+[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:){3}(?:' .\n        '[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2' .\n        '[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n        '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n        ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-' .\n        'f]{1,4}:){0,2}[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:)' .\n        '{2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\\\' .\n        'd{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4' .\n        ']\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5' .\n        '])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:' .\n        '[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?+::[0-9a-f]{1,4' .\n        '}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d' .\n        '{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]' .\n        '\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]' .\n        ')\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[' .\n        '0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?+::(?:[0-9a-f]{1' .\n        ',4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n        '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n        ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\\\' .\n        'd|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-f]{1,4}:){' .\n        '0,5}[0-9a-f]{1,4})?+::[0-9a-f]{1,4}|(?:(?:[0-9a-f]' .\n        '{1,4}:){0,6}[0-9a-f]{1,4})?+::|v[0-9a-f]++\\.[!$&-.' .\n        '0-;=_a-z~]++)\\]|(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0' .\n        '-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\\\' .\n        'd|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|' .\n        '1\\d{2}|2[0-4]\\d|25[0-5])|(?:[-.0-9_a-z~]|%[0-9a-f]' .\n        '[0-9a-f]|[!$&-,;=])*+)(?::\\d*+)?+(?:/(?:[-.0-9_a-z' .\n        '~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+)*+|/(?:(?:[-.0' .\n        '-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])++(?:/(?:[-' .\n        '.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+)*+)?+|' .\n        '(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])++(?' .\n        ':/(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+' .\n        ')*+)?+(?:\\?+(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&' .\n        '-,/:;=?+@])*+)?+(?:#(?:[-.0-9_a-z~]|%[0-9a-f][0-9a' .\n        '-f]|[!$&-,/:;=?+@])*+)?+)|(?:&gt;){2}(\\d++)`i'\n    ;\n    $callback = function ($m) {\n        return isset($m[1]) ?\n            sprintf('<a href=\"bbs.php?id=%s\">%s</a>', $m[1], $m[0]) :\n            sprintf('<a href=\"%1$s\" target=\"_blank\">%1$s</a>', $m[0])\n        ;\n    };\n    $str = htmlspecialchars($str, ENT_QUOTES, 'UTF-8');\n    return preg_replace_callback($regex, $callback, $str);\n}\n\n$str = '>>10 Qiita\u3063\u3066\u4f55\u3058\u3083\u306d\u30fc\u3088ggrks https://www.google.co.jp/search?q=qiita';\necho escape_and_linkify($str);\n\n\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n<a href=\"bbs.php?id=10\">&gt;&gt;10</a> Qiita\u3063\u3066\u4f55\u3058\u3083\u306d\u30fc\u3088ggrks <a href=\"https://www.google.co.jp/search?q=qiita\" target=\"_blank\">https://www.google.co.jp/search?q=qiita</a>\n\n\n\u3053\u306e\u51e6\u7406\u91cd\u3044\u3093\u3058\u3083\u306a\u3044\u306e\uff1f\uff1f\uff1f\uff1f\n\u3068\u8a00\u308f\u308c\u305f\u306e\u3067\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u3068\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30c6\u30b9\u30c8\u74b0\u5883\n\n\n\nCPU\nIntel Core i7-2600K 3.40GHz\n\n\n\n\nOS\nWindows 7 Ultimate 64bit\n\n\nRAM\n16GB\n\n\nPHP\nPHP 5.4.16\n\n\nServer\nApache 2.4.4\n\n\n\n$time = 0.0;\n$max = 999999;\nfor ($i = 0; $i < $max; $i++) {\n    $t1 = microtime(true);\n    $tmp = escape_and_linkify($str);\n    $t2 = microtime(true);\n    $time += $t2 - $t1;\n    unset($t1, $tmp, $t2);\n}\nprintf('%d\u56de%f\u79d2(\u5e73\u5747%f\u79d2)',\n    $max,\n    $time,\n    $time / $max\n);\n\n\u7d50\u679c\u306f\u30fb\u30fb\u30fb\n999999\u56de26.648554\u79d2(\u5e73\u57470.000027\u79d2)\n\n\u307e\u3041\u8a31\u5bb9\u7bc4\u56f2\u3067\u3057\u3087\u3053\u308c\u306f\uff01\uff08\u52d5\u4f5c\u901f\u5ea6\u6c17\u306b\u3059\u308b\u3093\u3060\u3063\u305f\u3089\u6b63\u898f\u8868\u73fe\u6587\u5b57\u5217\u3068\u30af\u30ed\u30fc\u30b8\u30e3\u3092 static \u3067\u66f8\u304f\u3088\u3046\u306b\u3059\u308b\u3068\u3082\u3046\u3061\u3087\u3063\u3068\u901f\u304f\u306a\u308b\u304b\u3082\uff09\n# \u5143\u30cd\u30bf\n\n[RFC3986\u5b9a\u7fa9\u306e\u53b3\u5bc6\u306aHTTP URI\u306e\u6b63\u898f\u8868\u73fe](http://sinya8282.sakura.ne.jp/?p=1064)\n\n# \u4f55\u3092\u3057\u305f\u304b\n\nPHP\u5411\u3051\u306b\u4ee5\u4e0b\u306e\u7de8\u96c6\u3092\u884c\u3044\u307e\u3057\u305f\u3002\n\n- \u9069\u5f53\u306a\u6587\u5b57\u6570\u6bce\u306b\u5206\u5272\u3057\u305f\u6587\u5b57\u5217\u30ea\u30c6\u30e9\u30eb\u306b<br />(Atom\u306a\u3069\u306e\u30a8\u30c7\u30a3\u30bf\u306f\u4e00\u884c\u304c\u9577\u3059\u304e\u308b\u3068\u91cd\u304f\u306a\u308b)\n- \u30c7\u30ea\u30df\u30bf **\\`** \u3092\u4ed8\u52a0\n- `i` \u4fee\u98fe\u5b50\u3092\u4ed8\u52a0\n- \u30b0\u30eb\u30fc\u30d7\u306b\u95a2\u3057\u3066\u3001\u5168\u3066<ins>\u30ad\u30e3\u30d7\u30c1\u30e3\u7121\u3057</ins>\u306b\n- \u7e70\u308a\u8fd4\u3057\u30d1\u30bf\u30fc\u30f3\u306b\u95a2\u3057\u3066\u3001\u5168\u3066<ins>\u30d0\u30c3\u30af\u30c8\u30e9\u30c3\u30af\u3092\u884c\u308f\u306a\u3044</ins>\u3088\u3046\u72ec\u5360\u7684\u306b\n- **`aaahttp://`\u306a\u3069\u306b\u306f\u30de\u30c3\u30c1\u3057\u306a\u3044\u3088\u3046\u306b\uff0c\u5148\u982d\u306b\u5358\u8a9e\u5883\u754c\u306e\u5224\u5b9a\u3092\u4ed8\u52a0**\n\n# \u30b3\u30fc\u30c9\n\n## \u6b63\u898f\u8868\u73fe\n\n```php\n$regex = \n    '`\\bhttps?+:(?://(?:(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]' .\n    '|[!$&-,:;=])*+@)?+(?:\\[(?:(?:[0-9a-f]{1,4}:){6}(?:' .\n    '[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2' .\n    '[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n    '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n    ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|::(?:[0-9a-f' .\n    ']{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1' .\n    '-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{' .\n    '2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\\\' .\n    'd|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])' .\n    ')|(?:[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:){4}(?:[0-' .\n    '9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2[0-' .\n    '4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-' .\n    '5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d' .\n    '|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-f]{' .\n    '1,4}:)?+[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:){3}(?:' .\n    '[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2' .\n    '[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n    '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n    ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-' .\n    'f]{1,4}:){0,2}[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:)' .\n    '{2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\\\' .\n    'd{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4' .\n    ']\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5' .\n    '])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:' .\n    '[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?+::[0-9a-f]{1,4' .\n    '}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d' .\n    '{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]' .\n    '\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]' .\n    ')\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[' .\n    '0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?+::(?:[0-9a-f]{1' .\n    ',4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n    '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n    ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\\\' .\n    'd|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-f]{1,4}:){' .\n    '0,5}[0-9a-f]{1,4})?+::[0-9a-f]{1,4}|(?:(?:[0-9a-f]' .\n    '{1,4}:){0,6}[0-9a-f]{1,4})?+::|v[0-9a-f]++\\.[!$&-.' .\n    '0-;=_a-z~]++)\\]|(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0' .\n    '-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\\\' .\n    'd|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|' .\n    '1\\d{2}|2[0-4]\\d|25[0-5])|(?:[-.0-9_a-z~]|%[0-9a-f]' .\n    '[0-9a-f]|[!$&-,;=])*+)(?::\\d*+)?+(?:/(?:[-.0-9_a-z' .\n    '~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+)*+|/(?:(?:[-.0' .\n    '-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])++(?:/(?:[-' .\n    '.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+)*+)?+|' .\n    '(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])++(?' .\n    ':/(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+' .\n    ')*+)?+(?:\\?+(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&' .\n    '-,/:;=?+@])*+)?+(?:#(?:[-.0-9_a-z~]|%[0-9a-f][0-9a' .\n    '-f]|[!$&-,/:;=?+@])*+)?+`i'\n;\n```\n\n## \u57fa\u672c\u5b9f\u88c5\u4f8b\n\nHTML\u7279\u6b8a\u6587\u5b57\u306e\u7f6e\u63db\u3068URL\u306b\u5bfe\u3059\u308b\u81ea\u52d5\u30ea\u30f3\u30af\u3092\u540c\u6642\u306b\u884c\u3044\u307e\u3059\u3002\n\n```php\nfunction escape_and_linkify($str) {\n    $regex = \n        '`\\bhttps?+:(?://(?:(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]' .\n        '|[!$&-,:;=])*+@)?+(?:\\[(?:(?:[0-9a-f]{1,4}:){6}(?:' .\n        '[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2' .\n        '[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n        '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n        ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|::(?:[0-9a-f' .\n        ']{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1' .\n        '-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{' .\n        '2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\\\' .\n        'd|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])' .\n        ')|(?:[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:){4}(?:[0-' .\n        '9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2[0-' .\n        '4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-' .\n        '5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d' .\n        '|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-f]{' .\n        '1,4}:)?+[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:){3}(?:' .\n        '[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2' .\n        '[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n        '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n        ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-' .\n        'f]{1,4}:){0,2}[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:)' .\n        '{2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\\\' .\n        'd{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4' .\n        ']\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5' .\n        '])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:' .\n        '[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?+::[0-9a-f]{1,4' .\n        '}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d' .\n        '{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]' .\n        '\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]' .\n        ')\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[' .\n        '0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?+::(?:[0-9a-f]{1' .\n        ',4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n        '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n        ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\\\' .\n        'd|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-f]{1,4}:){' .\n        '0,5}[0-9a-f]{1,4})?+::[0-9a-f]{1,4}|(?:(?:[0-9a-f]' .\n        '{1,4}:){0,6}[0-9a-f]{1,4})?+::|v[0-9a-f]++\\.[!$&-.' .\n        '0-;=_a-z~]++)\\]|(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0' .\n        '-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\\\' .\n        'd|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|' .\n        '1\\d{2}|2[0-4]\\d|25[0-5])|(?:[-.0-9_a-z~]|%[0-9a-f]' .\n        '[0-9a-f]|[!$&-,;=])*+)(?::\\d*+)?+(?:/(?:[-.0-9_a-z' .\n        '~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+)*+|/(?:(?:[-.0' .\n        '-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])++(?:/(?:[-' .\n        '.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+)*+)?+|' .\n        '(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])++(?' .\n        ':/(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+' .\n        ')*+)?+(?:\\?+(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&' .\n        '-,/:;=?+@])*+)?+(?:#(?:[-.0-9_a-z~]|%[0-9a-f][0-9a' .\n        '-f]|[!$&-,/:;=?+@])*+)?+`i'\n    ;\n    $replacement = '<a href=\"$0\">$0</a>';\n    $str = htmlspecialchars($str, ENT_QUOTES, 'UTF-8');\n    return preg_replace($regex, $replacement, $str);\n}\n\n$str = '>>10 Qiita\u3063\u3066\u4f55\u3058\u3083\u306d\u30fc\u3088ggrks https://www.google.co.jp/search?q=qiita';\necho escape_and_linkify($str);\n```\n\n\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n```html\n&gt;&gt;10 Qiita\u3063\u3066\u4f55\u3058\u3083\u306d\u30fc\u3088ggrks <a href=\"https://www.google.co.jp/search?q=qiita\">https://www.google.co.jp/search?q=qiita</a>\n```\n\n## \u5fdc\u7528\u5b9f\u88c5\u4f8b\n\n\u63b2\u793a\u677f\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3001\u4e00\u822c\u7684\u306aURL\u3092\u30ea\u30f3\u30af\u3059\u308b\u306e\u3068\u540c\u6642\u306b `>>10` \u3068\u3044\u3063\u305f\u30a2\u30f3\u30ab\u30fc\u3082\u30ea\u30f3\u30af\u3059\u308b\u5834\u5408\n`$regex` \u306e\u5148\u982d\u3068\u672b\u5c3e\u3092\u5c11\u3057\u66f8\u304d\u63db\u3048\u3066\u3044\u307e\u3059\u3002\n\n```php\nfunction escape_and_linkify($str) {\n    $regex = \n        '`(?:\\bhttps?+:(?://(?:(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]' .\n        '|[!$&-,:;=])*+@)?+(?:\\[(?:(?:[0-9a-f]{1,4}:){6}(?:' .\n        '[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2' .\n        '[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n        '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n        ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|::(?:[0-9a-f' .\n        ']{1,4}:){5}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1' .\n        '-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{' .\n        '2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\\\' .\n        'd|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])' .\n        ')|(?:[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:){4}(?:[0-' .\n        '9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2[0-' .\n        '4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-' .\n        '5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d' .\n        '|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-f]{' .\n        '1,4}:)?+[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:){3}(?:' .\n        '[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2' .\n        '[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n        '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n        ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-' .\n        'f]{1,4}:){0,2}[0-9a-f]{1,4})?+::(?:[0-9a-f]{1,4}:)' .\n        '{2}(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\\\' .\n        'd{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4' .\n        ']\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5' .\n        '])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:' .\n        '[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?+::[0-9a-f]{1,4' .\n        '}:(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d' .\n        '{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]' .\n        '\\d|25[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]' .\n        ')\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[' .\n        '0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?+::(?:[0-9a-f]{1' .\n        ',4}:[0-9a-f]{1,4}|(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25' .\n        '[0-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?' .\n        ':\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\\\' .\n        'd|1\\d{2}|2[0-4]\\d|25[0-5]))|(?:(?:[0-9a-f]{1,4}:){' .\n        '0,5}[0-9a-f]{1,4})?+::[0-9a-f]{1,4}|(?:(?:[0-9a-f]' .\n        '{1,4}:){0,6}[0-9a-f]{1,4})?+::|v[0-9a-f]++\\.[!$&-.' .\n        '0-;=_a-z~]++)\\]|(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0' .\n        '-5])\\.(?:\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\\\' .\n        'd|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.(?:\\d|[1-9]\\d|' .\n        '1\\d{2}|2[0-4]\\d|25[0-5])|(?:[-.0-9_a-z~]|%[0-9a-f]' .\n        '[0-9a-f]|[!$&-,;=])*+)(?::\\d*+)?+(?:/(?:[-.0-9_a-z' .\n        '~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+)*+|/(?:(?:[-.0' .\n        '-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])++(?:/(?:[-' .\n        '.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+)*+)?+|' .\n        '(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])++(?' .\n        ':/(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&-,:;=@])*+' .\n        ')*+)?+(?:\\?+(?:[-.0-9_a-z~]|%[0-9a-f][0-9a-f]|[!$&' .\n        '-,/:;=?+@])*+)?+(?:#(?:[-.0-9_a-z~]|%[0-9a-f][0-9a' .\n        '-f]|[!$&-,/:;=?+@])*+)?+)|(?:&gt;){2}(\\d++)`i'\n    ;\n    $callback = function ($m) {\n        return isset($m[1]) ?\n            sprintf('<a href=\"bbs.php?id=%s\">%s</a>', $m[1], $m[0]) :\n            sprintf('<a href=\"%1$s\" target=\"_blank\">%1$s</a>', $m[0])\n        ;\n    };\n    $str = htmlspecialchars($str, ENT_QUOTES, 'UTF-8');\n    return preg_replace_callback($regex, $callback, $str);\n}\n\n$str = '>>10 Qiita\u3063\u3066\u4f55\u3058\u3083\u306d\u30fc\u3088ggrks https://www.google.co.jp/search?q=qiita';\necho escape_and_linkify($str);\n```\n\n\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n```html\n<a href=\"bbs.php?id=10\">&gt;&gt;10</a> Qiita\u3063\u3066\u4f55\u3058\u3083\u306d\u30fc\u3088ggrks <a href=\"https://www.google.co.jp/search?q=qiita\" target=\"_blank\">https://www.google.co.jp/search?q=qiita</a>\n```\n\n# \u3053\u306e\u51e6\u7406\u91cd\u3044\u3093\u3058\u3083\u306a\u3044\u306e\uff1f\uff1f\uff1f\uff1f\n\n\u3068\u8a00\u308f\u308c\u305f\u306e\u3067\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u3068\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n#### \u30c6\u30b9\u30c8\u74b0\u5883\n\n| CPU | Intel Core i7-2600K 3.40GHz |\n|:-----|:-----|\n| OS | Windows 7 Ultimate 64bit |\n| RAM | 16GB |\n| PHP | PHP 5.4.16 |\n| Server | Apache 2.4.4 |\n\n```php\n$time = 0.0;\n$max = 999999;\nfor ($i = 0; $i < $max; $i++) {\n    $t1 = microtime(true);\n    $tmp = escape_and_linkify($str);\n    $t2 = microtime(true);\n    $time += $t2 - $t1;\n    unset($t1, $tmp, $t2);\n}\nprintf('%d\u56de%f\u79d2(\u5e73\u5747%f\u79d2)',\n    $max,\n    $time,\n    $time / $max\n);\n```\n\n\u7d50\u679c\u306f\u30fb\u30fb\u30fb\n\n```\n999999\u56de26.648554\u79d2(\u5e73\u57470.000027\u79d2)\n```\n\n\u307e\u3041\u8a31\u5bb9\u7bc4\u56f2\u3067\u3057\u3087\u3053\u308c\u306f\uff01\uff08\u52d5\u4f5c\u901f\u5ea6\u6c17\u306b\u3059\u308b\u3093\u3060\u3063\u305f\u3089\u6b63\u898f\u8868\u73fe\u6587\u5b57\u5217\u3068\u30af\u30ed\u30fc\u30b8\u30e3\u3092 `static` \u3067\u66f8\u304f\u3088\u3046\u306b\u3059\u308b\u3068\u3082\u3046\u3061\u3087\u3063\u3068\u901f\u304f\u306a\u308b\u304b\u3082\uff09\n", "tags": ["PHP", "\u6b63\u898f\u8868\u73fe"]}