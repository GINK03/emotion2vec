{"context": "\u4ee5\u4e0b\u306e\u30d6\u30ed\u30b0\u3067\u3084\u3063\u3066\u308b\u3053\u3068\u3092\u5b9f\u884c\u3057\u305f\u304f\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3002\nGet-VM\u30fbGet-VMguest\u3067\u53d6\u5f97\u3067\u304d\u308b\u4eee\u60f3\u30de\u30b7\u30f3\u30fb\u30b2\u30b9\u30c8OS\u60c5\u5831\u3068\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u4e00\u89a7\u3002VMware PowerCLI\nhttp://blog.putise.com/get-vm%E3%83%BBget-vmguest%E3%81%A7%E5%8F%96%E5%BE%97%E3%81%A7%E3%81%8D%E3%82%8B%E4%BB%AE%E6%83%B3%E3%83%9E%E3%82%B7%E3%83%B3%E3%83%BB%E3%82%B2%E3%82%B9%E3%83%88os%E6%83%85%E5%A0%B1%E3%81%A8%E3%83%97/\n\n\u6e96\u5099\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nvSphere PowerCLI 5.5\nhttps://my.vmware.com/jp/web/vmware/details?downloadGroup=PCLI550&productId=352\n\n\u4f7f\u3046\nPowerShell \u3092\u8d77\u52d5\u3057\u3066\u30dd\u30ea\u30b7\u30fc\u3092\u5909\u66f4\u3059\u308b\n\nSet-ExecutionPolicy -ExecutionPolicy RemoteSigned\n\n\u3053\u308c\u3092\u3057\u306a\u3044\u3068\u3001PowerCLI\u8d77\u52d5\u3057\u3066\u3082\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\n\u4ee5\u4e0b\u306ePS\u30d5\u30a1\u30a4\u30eb\u3092 \u307b\u3052\u307b\u3052.ps1 \u3068\u3057\u3066\u4fdd\u5b58\u3057\u3066\u5b9f\u884c\u3059\u308b\u3002\n$_USER=\"root\"        #\u30e6\u30fc\u30b6\u30fc\u540d\n$_PASS=\"\u30d1\u30b9\u30fc\u30ef\u30fc\u30c9\" #\u30d1\u30b9\u30ef\u30fc\u30c9\n$_SERV=\"192.168.XXX.XXX\" #\u30b5\u30fc\u30d0\u30fc\u306eIP\n\n$_HOME=\"c:\\temp\"\n$_DATE = Get-Date -Format \"yyyyMMdd_HHmmss\"\n$_OUTP_VM=\"get-vm_$_DATE.csv\"\n$_OUTP_VMGUEST=\"get-vmguest_$_DATE.csv\"\n$_OUTP_VMDISK=\"get-disk_$_DATE.csv\"\n\nAdd-PSSnapin VMware.VimAutomation.Core\n\ncd $_HOME\n\nConnect-VIServer -Server $_SERV -User $_USER -Password $_PASS\n\nGet-VM | select Name,Version,Guest,Folder,ProvisionedSpaceGB,UsedSpaceGB |Export-csv $_OUTP_VM\n\n$VMLIST = Get-VM \nForeach($VM in $VMLIST ){\n    $VM.Name\n    $VM.Guest | select VmName,OSFullName,IPAddress,State,Disks,HostName,Nics,ScreenDimensions,VmId,VM,VmUid,GuestId,ExtensionData,Client,GuesetFamily | Export-csv  $_OUTP_VMGUEST -Append\n    $VMGuest = Get-VMGuest $VM.Name \n    $VMGuest.Disks |select @{ Name = \"Name\" ; Expression= {$VM.Name}},CapacityGB,FreeSpaceGB,Path | Export-Csv $_OUTP_VMDISK -Append\n}\n\nDisconnect-VIServer -Server $_SERV -Confirm:$False\n\n\u4ee5\u4e0b\u306e\u30d6\u30ed\u30b0\u3067\u3084\u3063\u3066\u308b\u3053\u3068\u3092\u5b9f\u884c\u3057\u305f\u304f\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3002\n\nGet-VM\u30fbGet-VMguest\u3067\u53d6\u5f97\u3067\u304d\u308b\u4eee\u60f3\u30de\u30b7\u30f3\u30fb\u30b2\u30b9\u30c8OS\u60c5\u5831\u3068\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u4e00\u89a7\u3002VMware PowerCLI\nhttp://blog.putise.com/get-vm%E3%83%BBget-vmguest%E3%81%A7%E5%8F%96%E5%BE%97%E3%81%A7%E3%81%8D%E3%82%8B%E4%BB%AE%E6%83%B3%E3%83%9E%E3%82%B7%E3%83%B3%E3%83%BB%E3%82%B2%E3%82%B9%E3%83%88os%E6%83%85%E5%A0%B1%E3%81%A8%E3%83%97/\n\n## \u6e96\u5099\n#### \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nvSphere PowerCLI 5.5\nhttps://my.vmware.com/jp/web/vmware/details?downloadGroup=PCLI550&productId=352\n\n## \u4f7f\u3046\nPowerShell \u3092\u8d77\u52d5\u3057\u3066\u30dd\u30ea\u30b7\u30fc\u3092\u5909\u66f4\u3059\u308b\n```\nSet-ExecutionPolicy -ExecutionPolicy RemoteSigned\n```\n\u3053\u308c\u3092\u3057\u306a\u3044\u3068\u3001PowerCLI\u8d77\u52d5\u3057\u3066\u3082\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\n\n\u4ee5\u4e0b\u306ePS\u30d5\u30a1\u30a4\u30eb\u3092 \u307b\u3052\u307b\u3052.ps1 \u3068\u3057\u3066\u4fdd\u5b58\u3057\u3066\u5b9f\u884c\u3059\u308b\u3002\n\n```\n$_USER=\"root\"        #\u30e6\u30fc\u30b6\u30fc\u540d\n$_PASS=\"\u30d1\u30b9\u30fc\u30ef\u30fc\u30c9\" #\u30d1\u30b9\u30ef\u30fc\u30c9\n$_SERV=\"192.168.XXX.XXX\" #\u30b5\u30fc\u30d0\u30fc\u306eIP\n\n$_HOME=\"c:\\temp\"\n$_DATE = Get-Date -Format \"yyyyMMdd_HHmmss\"\n$_OUTP_VM=\"get-vm_$_DATE.csv\"\n$_OUTP_VMGUEST=\"get-vmguest_$_DATE.csv\"\n$_OUTP_VMDISK=\"get-disk_$_DATE.csv\"\n\nAdd-PSSnapin VMware.VimAutomation.Core\n\ncd $_HOME\n\nConnect-VIServer -Server $_SERV -User $_USER -Password $_PASS\n\nGet-VM | select Name,Version,Guest,Folder,ProvisionedSpaceGB,UsedSpaceGB |Export-csv $_OUTP_VM\n\n$VMLIST = Get-VM \nForeach($VM in $VMLIST ){\n    $VM.Name\n    $VM.Guest | select VmName,OSFullName,IPAddress,State,Disks,HostName,Nics,ScreenDimensions,VmId,VM,VmUid,GuestId,ExtensionData,Client,GuesetFamily | Export-csv  $_OUTP_VMGUEST -Append\n    $VMGuest = Get-VMGuest $VM.Name \n    $VMGuest.Disks |select @{ Name = \"Name\" ; Expression= {$VM.Name}},CapacityGB,FreeSpaceGB,Path | Export-Csv $_OUTP_VMDISK -Append\n}\n\nDisconnect-VIServer -Server $_SERV -Confirm:$False\n```\n", "tags": ["VMware_vSphere"]}