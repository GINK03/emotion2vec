{"context": " More than 1 year has passed since last update.lsof\u3092\u4f7f\u3063\u3066\u30d7\u30ed\u30bb\u30b9\u304c\u5229\u7528\u3057\u3066\u3044\u308b\u30dd\u30fc\u30c8\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\u5229\u7528\u30b7\u30fc\u30f3\u3068\u3057\u3066\u3001\u81ea\u5206\u306fzabbix\u306a\u3069\u3067\u30dd\u30fc\u30c8\u3084\u30d7\u30ed\u30bb\u30b9\u306e\u76e3\u8996\u8a2d\u5b9a\u3092\u3059\u308b\u3068\u304d\u306e\u78ba\u8a8d\u3067\u4f7f\u3063\u305f\u308a\u3057\u307e\u3059\u3002\n\n\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u30dd\u30fc\u30c8\u3092\u8868\u793a\u3059\u308b\n\u307e\u305a\u306f\u3001\u73fe\u5728\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u30dd\u30fc\u30c8\u306e\u4e00\u89a7\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\n\u30aa\u30d7\u30b7\u30e7\u30f3-i\n# lsof -i\nCOMMAND    PID     USER   FD   TYPE  DEVICE SIZE/OFF NODE NAME\ndhclient  1254     root    5u  IPv4    6837      0t0  UDP *:bootpc\nsshd      1440     root    3u  IPv4    7378      0t0  TCP *:ssh (LISTEN)\nsshd      1440     root    4u  IPv6    7380      0t0  TCP *:ssh (LISTEN)\nmysqld    2055    mysql   17u  IPv4    8001      0t0  TCP *:mysql (LISTEN)\n\n\n\u3053\u306e\u30b3\u30de\u30f3\u30c9\u306b\u30d1\u30a4\u30d7( | )\u3067grep LISTEN\u306a\u3069\u3092\u4ed8\u3051\u52a0\u3048\u3066\u3042\u3052\u308b\u3068\nLISTEN\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u306e\u307f\u304c\u8868\u793a\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u3042\u308b\u30dd\u30fc\u30c8\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u3092\u8abf\u3079\u308b\n\u30aa\u30d7\u30b7\u30e7\u30f3-i:\u30dd\u30fc\u30c8\u756a\u53f7\u3067\u305d\u306e\u30dd\u30fc\u30c8\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u3092\u8abf\u3079\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30aa\u30d7\u30b7\u30e7\u30f3-i\n# lsof -i:80\nCOMMAND   PID  USER   FD   TYPE  DEVICE SIZE/OFF NODE NAME\nnginx   27576  root   10u  IPv4 3025923      0t0  TCP *:http (LISTEN)\nnginx   27578 nginx   10u  IPv4 3025923      0t0  TCP *:http (LISTEN)\n\n\n\u3053\u3053\u3067\u306f80\u756a\u30dd\u30fc\u30c8\u306fnginx\u304c\u5229\u7528\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\u756a\u53f7\u3092\u3057\u3066\u3044\u308b\u3068\u3001\u8907\u6570\u30dd\u30fc\u30c8\u3092\u540c\u6642\u306b\u8abf\u3079\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n\u30aa\u30d7\u30b7\u30e7\u30f3-i\n# lsof -i:22,80\nCOMMAND   PID     USER   FD   TYPE  DEVICE SIZE/OFF NODE NAME\nsshd     1440     root    3u  IPv4    7378      0t0  TCP *:ssh (LISTEN)\nsshd     1440     root    4u  IPv6    7380      0t0  TCP *:ssh (LISTEN)\nsshd    27402     root    3u  IPv4 3024720      0t0  TCP 10.0.0.229:ssh->s225.HtokyoFL3.vectant.ne.jp:50596 (ESTABLISHED)\nsshd    27404 ec2-user    3u  IPv4 3024720      0t0  TCP 10.0.0.229:ssh->s225.HtokyoFL3.vectant.ne.jp:50596 (ESTABLISHED)\nnginx   27576     root   10u  IPv4 3025923      0t0  TCP *:http (LISTEN)\nnginx   27578    nginx   10u  IPv4 3025923      0t0  TCP *:http (LISTEN)\nnginx   27578    nginx   15u  IPv4 3058872      0t0  TCP 10.0.0.229:http->s225.HtokyoFL3.vectant.ne.jp:54589 (ESTABLISHED)\n\n\n\u3055\u3089\u306b-iTCP\u3084-iUDP\u3067TCP\u3084UDP\u306e\u6307\u5b9a\u3092\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n\u30aa\u30d7\u30b7\u30e7\u30f3-iTCP\n# lsof -iTCP:22\nCOMMAND   PID     USER   FD   TYPE  DEVICE SIZE/OFF NODE NAME\nsshd     1440     root    3u  IPv4    7378      0t0  TCP *:ssh (LISTEN)\nsshd     1440     root    4u  IPv6    7380      0t0  TCP *:ssh (LISTEN)\nsshd    27402     root    3u  IPv4 3024720      0t0  TCP 10.0.0.229:ssh->s225.HtokyoFL3.vectant.ne.jp:50596 (ESTABLISHED)\nsshd    27404 ec2-user    3u  IPv4 3024720      0t0  TCP 10.0.0.229:ssh->s225.HtokyoFL3.vectant.ne.jp:50596 (ESTABLISHED)\n\n\n\u3010\u9805\u76ee\u306b\u3064\u3044\u3066\u3011\nCOMMAND : \u5b9f\u884c\u30d7\u30ed\u30b0\u30e9\u30e0\nPID : \u30d7\u30ed\u30bb\u30b9ID\nUSER : \u5b9f\u884c\u30e6\u30fc\u30b6\nNODE : \u30d7\u30ed\u30c8\u30b3\u30eb\nNAME : \u30dd\u30fc\u30c8\n(LISTEN) : \u5f85\u3061\u53d7\u3051\u72b6\u614b\n\u4eca\u56de\u306f\u30dd\u30fc\u30c8\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u306e\u8868\u793a\u3067\u3059\u304c\u3001\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u4ed6\u306e\u7528\u9014\u3082\u8f09\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u7279\u5b9a\u306ePID\u3092\u6301\u3064\u30d7\u30ed\u30bb\u30b9\u304c\u958b\u3044\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u8868\u793a\n-p\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u30d7\u30ed\u30bb\u30b9ID\u3092\u5143\u306b\u3001\u305d\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u5229\u7528\u3057\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\n\u30aa\u30d7\u30b7\u30e7\u30f3-p\n# lsof -p 1440\nCOMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME\nsshd    1440 root  cwd    DIR  202,1     4096    2 /\nsshd    1440 root  rtd    DIR  202,1     4096    2 /\nsshd    1440 root  txt    REG  202,1   617128 7432 /usr/sbin/sshd\nsshd    1440 root  mem    REG  202,1    62864 3764 /lib64/libnss_files-2.17.so\nsshd    1440 root  mem    REG  202,1    44224 3776 /lib64/librt-2.17.so\n\n\n\n\u7279\u5b9a\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u958b\u3044\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u8868\u793a\n-c\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u7279\u5b9a\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u5229\u7528\u3057\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\n\u30aa\u30d7\u30b7\u30e7\u30f3-c\n# lsof -c nginx\nCOMMAND   PID  USER   FD   TYPE             DEVICE SIZE/OFF    NODE NAME\nnginx   27576  root  cwd    DIR              202,1     4096  272412 /etc/nginx/conf.d\nnginx   27576  root  rtd    DIR              202,1     4096       2 /\nnginx   27576  root  txt    REG              202,1   964976   18099 /usr/sbin/nginx\nnginx   27576  root  DEL    REG                0,4          3025922 /dev/zero\nnginx   27576  root  mem    REG              202,1    22096  272808\u3000/usr/lib64/perl5/vendor_perl/auto/nginx/nginx.so\nnginx   27576  root  mem    REG              202,1    62864    3764 /lib64/libnss_files-2.17.so\nnginx   27576  root  mem    REG              202,1    10856    6562 /usr/lib64/libXau.so.6.0.0\nnginx   27576  root  mem    REG              202,1   126288    3886 /usr/lib64/libselinux.so.1\nnginx   27576  root  mem    REG              202,1   165264    4092 /lib64/libexpat.so.1.5.2\nnginx   27576  root  mem    REG              202,1   122312    6606 /usr/lib64/libxcb.so.1.1.0\n\n\n\u4ee5\u4e0a\u3002\n``lsof``\u3092\u4f7f\u3063\u3066\u30d7\u30ed\u30bb\u30b9\u304c\u5229\u7528\u3057\u3066\u3044\u308b\u30dd\u30fc\u30c8\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u5229\u7528\u30b7\u30fc\u30f3\u3068\u3057\u3066\u3001\u81ea\u5206\u306fzabbix\u306a\u3069\u3067\u30dd\u30fc\u30c8\u3084\u30d7\u30ed\u30bb\u30b9\u306e\u76e3\u8996\u8a2d\u5b9a\u3092\u3059\u308b\u3068\u304d\u306e\u78ba\u8a8d\u3067\u4f7f\u3063\u305f\u308a\u3057\u307e\u3059\u3002\n\n## \u5229\u7528\u3055\u308c\u3066\u3044\u308b\u30dd\u30fc\u30c8\u3092\u8868\u793a\u3059\u308b\n\u307e\u305a\u306f\u3001\u73fe\u5728\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u30dd\u30fc\u30c8\u306e\u4e00\u89a7\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30aa\u30d7\u30b7\u30e7\u30f3-i\n# lsof -i\nCOMMAND    PID     USER   FD   TYPE  DEVICE SIZE/OFF NODE NAME\ndhclient  1254     root    5u  IPv4    6837      0t0  UDP *:bootpc\nsshd      1440     root    3u  IPv4    7378      0t0  TCP *:ssh (LISTEN)\nsshd      1440     root    4u  IPv6    7380      0t0  TCP *:ssh (LISTEN)\nmysqld    2055    mysql   17u  IPv4    8001      0t0  TCP *:mysql (LISTEN)\n```\n\n\u3053\u306e\u30b3\u30de\u30f3\u30c9\u306b\u30d1\u30a4\u30d7( | )\u3067grep LISTEN\u306a\u3069\u3092\u4ed8\u3051\u52a0\u3048\u3066\u3042\u3052\u308b\u3068\nLISTEN\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u306e\u307f\u304c\u8868\u793a\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\n## \u3042\u308b\u30dd\u30fc\u30c8\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u3092\u8abf\u3079\u308b\n\u30aa\u30d7\u30b7\u30e7\u30f3``-i:\u30dd\u30fc\u30c8\u756a\u53f7``\u3067\u305d\u306e\u30dd\u30fc\u30c8\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u3092\u8abf\u3079\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30aa\u30d7\u30b7\u30e7\u30f3-i\n# lsof -i:80\nCOMMAND   PID  USER   FD   TYPE  DEVICE SIZE/OFF NODE NAME\nnginx   27576  root   10u  IPv4 3025923      0t0  TCP *:http (LISTEN)\nnginx   27578 nginx   10u  IPv4 3025923      0t0  TCP *:http (LISTEN)\n```\n\u3053\u3053\u3067\u306f_80_\u756a\u30dd\u30fc\u30c8\u306fnginx\u304c\u5229\u7528\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\u756a\u53f7\u3092\u3057\u3066\u3044\u308b\u3068\u3001\u8907\u6570\u30dd\u30fc\u30c8\u3092\u540c\u6642\u306b\u8abf\u3079\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30aa\u30d7\u30b7\u30e7\u30f3-i\n# lsof -i:22,80\nCOMMAND   PID     USER   FD   TYPE  DEVICE SIZE/OFF NODE NAME\nsshd     1440     root    3u  IPv4    7378      0t0  TCP *:ssh (LISTEN)\nsshd     1440     root    4u  IPv6    7380      0t0  TCP *:ssh (LISTEN)\nsshd    27402     root    3u  IPv4 3024720      0t0  TCP 10.0.0.229:ssh->s225.HtokyoFL3.vectant.ne.jp:50596 (ESTABLISHED)\nsshd    27404 ec2-user    3u  IPv4 3024720      0t0  TCP 10.0.0.229:ssh->s225.HtokyoFL3.vectant.ne.jp:50596 (ESTABLISHED)\nnginx   27576     root   10u  IPv4 3025923      0t0  TCP *:http (LISTEN)\nnginx   27578    nginx   10u  IPv4 3025923      0t0  TCP *:http (LISTEN)\nnginx   27578    nginx   15u  IPv4 3058872      0t0  TCP 10.0.0.229:http->s225.HtokyoFL3.vectant.ne.jp:54589 (ESTABLISHED)\n```\n\u3055\u3089\u306b``-iTCP``\u3084``-iUDP``\u3067TCP\u3084UDP\u306e\u6307\u5b9a\u3092\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30aa\u30d7\u30b7\u30e7\u30f3-iTCP\n# lsof -iTCP:22\nCOMMAND   PID     USER   FD   TYPE  DEVICE SIZE/OFF NODE NAME\nsshd     1440     root    3u  IPv4    7378      0t0  TCP *:ssh (LISTEN)\nsshd     1440     root    4u  IPv6    7380      0t0  TCP *:ssh (LISTEN)\nsshd    27402     root    3u  IPv4 3024720      0t0  TCP 10.0.0.229:ssh->s225.HtokyoFL3.vectant.ne.jp:50596 (ESTABLISHED)\nsshd    27404 ec2-user    3u  IPv4 3024720      0t0  TCP 10.0.0.229:ssh->s225.HtokyoFL3.vectant.ne.jp:50596 (ESTABLISHED)\n```\n\n\u3010\u9805\u76ee\u306b\u3064\u3044\u3066\u3011\nCOMMAND : \u5b9f\u884c\u30d7\u30ed\u30b0\u30e9\u30e0\nPID : \u30d7\u30ed\u30bb\u30b9ID\nUSER : \u5b9f\u884c\u30e6\u30fc\u30b6\nNODE : \u30d7\u30ed\u30c8\u30b3\u30eb\nNAME : \u30dd\u30fc\u30c8\n(LISTEN) : \u5f85\u3061\u53d7\u3051\u72b6\u614b\n\n\u4eca\u56de\u306f\u30dd\u30fc\u30c8\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u306e\u8868\u793a\u3067\u3059\u304c\u3001\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u4ed6\u306e\u7528\u9014\u3082\u8f09\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n\n## \u7279\u5b9a\u306ePID\u3092\u6301\u3064\u30d7\u30ed\u30bb\u30b9\u304c\u958b\u3044\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u8868\u793a\n``-p``\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u30d7\u30ed\u30bb\u30b9ID\u3092\u5143\u306b\u3001\u305d\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u5229\u7528\u3057\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30aa\u30d7\u30b7\u30e7\u30f3-p\n# lsof -p 1440\nCOMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME\nsshd    1440 root  cwd    DIR  202,1     4096    2 /\nsshd    1440 root  rtd    DIR  202,1     4096    2 /\nsshd    1440 root  txt    REG  202,1   617128 7432 /usr/sbin/sshd\nsshd    1440 root  mem    REG  202,1    62864 3764 /lib64/libnss_files-2.17.so\nsshd    1440 root  mem    REG  202,1    44224 3776 /lib64/librt-2.17.so\n```\n\n## \u7279\u5b9a\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u958b\u3044\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u8868\u793a\n``-c``\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u7279\u5b9a\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u5229\u7528\u3057\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30aa\u30d7\u30b7\u30e7\u30f3-c\n# lsof -c nginx\nCOMMAND   PID  USER   FD   TYPE             DEVICE SIZE/OFF    NODE NAME\nnginx   27576  root  cwd    DIR              202,1     4096  272412 /etc/nginx/conf.d\nnginx   27576  root  rtd    DIR              202,1     4096       2 /\nnginx   27576  root  txt    REG              202,1   964976   18099 /usr/sbin/nginx\nnginx   27576  root  DEL    REG                0,4          3025922 /dev/zero\nnginx   27576  root  mem    REG              202,1    22096  272808\u3000/usr/lib64/perl5/vendor_perl/auto/nginx/nginx.so\nnginx   27576  root  mem    REG              202,1    62864    3764 /lib64/libnss_files-2.17.so\nnginx   27576  root  mem    REG              202,1    10856    6562 /usr/lib64/libXau.so.6.0.0\nnginx   27576  root  mem    REG              202,1   126288    3886 /usr/lib64/libselinux.so.1\nnginx   27576  root  mem    REG              202,1   165264    4092 /lib64/libexpat.so.1.5.2\nnginx   27576  root  mem    REG              202,1   122312    6606 /usr/lib64/libxcb.so.1.1.0\n```\n\n\u4ee5\u4e0a\u3002\n", "tags": ["Linux", "lsof", "Linux\u30b3\u30de\u30f3\u30c9"]}