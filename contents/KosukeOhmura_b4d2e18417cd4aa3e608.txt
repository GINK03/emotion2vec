{"context": "\n\n\u74b0\u5883\nSwift 2.3, Xcode 8.2\n\n\u3075\u3064\u3046\u306bNSNotificationCenter\u3092\u4f7f\u3046\u3068\n\u3053\u3093\u306a\u304b\u3093\u3058\u306b\u306a\u308b\u3002\n// \u901a\u77e5\nNSNotificationCenter.defaultCenter().postNotificationName(\"NotifName\", object: nil)\n\n// \u8cfc\u8aad\nNSNotificationCenter.defaultCenter().addObserver(\n    self,\n    selector: #selector(MyViewController.onRecievedNotif),\n    name: \"NotifName\",\n    object: nil\n)\n\n// \u8cfc\u8aad\u89e3\u9664\nNSNotificationCenter.defaultCenter().removeObserver(self)\n\n// \u901a\u77e5\u3092\u53d7\u3051\u305f\u3068\u304d\u306e\u51e6\u7406\nfunc onRecievedNotif() {\n    // do something\n}\n\n\n\u4e0d\u6e80\n\n\u8cfc\u8aad\u89e3\u9664\u3092\u5fd8\u308c\u305d\u3046\n\u30b3\u30fc\u30c9\u304c\u9577\u3044\nnotificationName\u306e\u30bf\u30a4\u30dd\u304c\u3053\u308f\u3044\n\n\nRxSwift\u3092\u4f7f\u3063\u3066\u30b7\u30f3\u30d7\u30eb\u306b\u66f8\u3051\u308b\u3088\u3046\u306b\u3057\u305f\nprivate let bag = DisposeBag()\n// \u901a\u77e5\nNSNotifConstants.webViewClosed.post()\n\n// \u8cfc\u8aad & \u901a\u77e5\u3092\u53d7\u3051\u305f\u3068\u304d\u306e\u51e6\u7406 & \u81ea\u8eab\u304c\u7834\u68c4\u3055\u308c\u305f\u3068\u304d\u306b\u8cfc\u8aad\u89e3\u9664\nNSNotifConstants.webViewClosed.asObservable()\n    .subscribeNext { [unowned self] notif in\n        // do something\n    }\n    .addDisposableTo(self.bag)\n\n\n\u5b9f\u88c5\nRxCocoa \u306b\u3088\u308b NSNotificationCenter\u306e\u62e1\u5f35\u30e1\u30bd\u30c3\u30c9rx_notification\u3092\u4f7f\u7528\u3059\u308b\u3002\n\nNSNotifConstants.swift\n\nimport Foundation\nimport RxSwift\n// NSNotificationCenter\u306b\u4f7f\u3046\nenum NSNotifConstants {\n\n    // \u30e1\u30a4\u30f3\u306e\u30bf\u30d6\u3092\u5909\u66f4\u3057\u305f\n    case mainTab\n    // \u30a2\u30d7\u30ea\u304c\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u304b\u3089\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u306b\u5fa9\u5e30\u3057\u305f\n    case appDidBecomeActive\n    // \u304a\u77e5\u3089\u305b\u4e00\u89a7\u3092\u53d6\u5f97\u3057\u305f\n    case latestNotificationAtUpdated\n    // \u304a\u77e5\u3089\u305b\u4e00\u89a7\u3092\u78ba\u8a8d\u3057\u305f\n    case notificationsChecked\n    // \u81ea\u5206\u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u304c\u66f4\u65b0\u3055\u308c\u305f\n    case myProfileUpdated\n    // WebView\u304c\u9589\u3058\u305f\n    case webViewClosed\n\n    var name: String {\n        // \u4ed6\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u7b49\u3068notification\u306e\u540d\u524d\u304c\u304b\u3076\u308b\u306e\u3092\u9632\u3050\u305f\u3081\u306bprefix\u3092\u3064\u3051\u308b\n        return \"myapp\" + String(self.hashValue)\n    }\n\n    // \u901a\u77e5\u3092\u9001\u308b\n    func post(object: AnyObject? = nil, userInfo: [NSObject: AnyObject]? = nil) {\n        NSNotificationCenter.defaultCenter().postNotificationName(\n            self.name,\n            object: object,\n            userInfo: userInfo\n        )\n    }\n\n    // \u901a\u77e5\u3092\u8cfc\u8aad\u3059\u308b\n    func asObservable() -> Observable<NSNotification> {\n        return NSNotificationCenter.defaultCenter()\n            .rx_notification(self.name)\n            .observeOn(MainScheduler.instance)\n    }\n}\n\n\n\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u9001\u308b\u5834\u5408\n\u3068\u304d\u306b\u306f\u901a\u77e5\u3068\u4e00\u7dd2\u306bobject\u3092\u9001\u308a\u305f\u3044\u3002\n\u3042\u307e\u308a\u7dba\u9e97\u3067\u306f\u306a\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u3053\u3046\u66f8\u304f\u3053\u3068\u306b\u3057\u305f\n// \u901a\u77e5\nNSNotifConstants.myProfileUpdated.post(\n    NSNotificationData.MyProfileUpdated(\n        oldProfileData: oldData,\n        newProfileData: newModel.toData()\n    )\n)\n\n// \u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u5909\u66f4\u3092\u76e3\u8996\nNSNotifConstants.myProfileUpdated.asObservable()\n    .map { $0.object as! NSNotificationData.MyProfileUpdated }\n    .subscribeNext( [unowned self] profiles in\n        // do something\n    )\n    .addDisposableTo(self.bag)\n\n\n\u5b9f\u88c5\n\nNSNotifData\n\n// NSNotificationCenter\u306b\u4f7f\u3046\n// object\u306b\u6307\u5b9a\u3059\u308b\u305f\u3081\u306bNSObject\u3092\u7d99\u627f\u3059\u308b\nfinal class NSNotifData: NSObject {\n\n    final class MyProfileUpdated {\n        // \u81ea\u5206\u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u304c\u66f4\u65b0\u3055\u308c\u305f\n        let oldProfileData: MyProfileData?\n        let newProfileData: MyProfileData\n        init(oldProfileData: MyProfileData?, newProfileData: MyProfileData) {\n            self.oldProfileData = oldProfileData\n            self.newProfileData = newProfileData\n        }\n    }\n\n}\n\n\n\n\n\u3055\u3044\u3054\u306b\n\u3082\u3063\u3068\u3044\u3044\u611f\u3058\u306e\u5b9f\u88c5\u304c\u3042\u308c\u3070\u6559\u3048\u3066\u304f\u3060\u3055\u3044:)\n### \u74b0\u5883\nSwift 2.3, Xcode 8.2\n\n## \u3075\u3064\u3046\u306bNSNotificationCenter\u3092\u4f7f\u3046\u3068\n\u3053\u3093\u306a\u304b\u3093\u3058\u306b\u306a\u308b\u3002\n\n```swift\n// \u901a\u77e5\nNSNotificationCenter.defaultCenter().postNotificationName(\"NotifName\", object: nil)\n\n// \u8cfc\u8aad\nNSNotificationCenter.defaultCenter().addObserver(\n    self,\n    selector: #selector(MyViewController.onRecievedNotif),\n    name: \"NotifName\",\n    object: nil\n)\n\n// \u8cfc\u8aad\u89e3\u9664\nNSNotificationCenter.defaultCenter().removeObserver(self)\n\n// \u901a\u77e5\u3092\u53d7\u3051\u305f\u3068\u304d\u306e\u51e6\u7406\nfunc onRecievedNotif() {\n    // do something\n}\n```\n\n## \u4e0d\u6e80\n* \u8cfc\u8aad\u89e3\u9664\u3092\u5fd8\u308c\u305d\u3046\n* \u30b3\u30fc\u30c9\u304c\u9577\u3044\n* notificationName\u306e\u30bf\u30a4\u30dd\u304c\u3053\u308f\u3044\n\n## RxSwift\u3092\u4f7f\u3063\u3066\u30b7\u30f3\u30d7\u30eb\u306b\u66f8\u3051\u308b\u3088\u3046\u306b\u3057\u305f\n```swift\nprivate let bag = DisposeBag()\n// \u901a\u77e5\nNSNotifConstants.webViewClosed.post()\n\n// \u8cfc\u8aad & \u901a\u77e5\u3092\u53d7\u3051\u305f\u3068\u304d\u306e\u51e6\u7406 & \u81ea\u8eab\u304c\u7834\u68c4\u3055\u308c\u305f\u3068\u304d\u306b\u8cfc\u8aad\u89e3\u9664\nNSNotifConstants.webViewClosed.asObservable()\n    .subscribeNext { [unowned self] notif in\n        // do something\n    }\n    .addDisposableTo(self.bag)\n```\n\n## \u5b9f\u88c5\n\nRxCocoa \u306b\u3088\u308b `NSNotificationCenter`\u306e\u62e1\u5f35\u30e1\u30bd\u30c3\u30c9`rx_notification`\u3092\u4f7f\u7528\u3059\u308b\u3002\n\n```swift:NSNotifConstants.swift\n\nimport Foundation\nimport RxSwift\n// NSNotificationCenter\u306b\u4f7f\u3046\nenum NSNotifConstants {\n    \n    // \u30e1\u30a4\u30f3\u306e\u30bf\u30d6\u3092\u5909\u66f4\u3057\u305f\n    case mainTab\n    // \u30a2\u30d7\u30ea\u304c\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u304b\u3089\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u306b\u5fa9\u5e30\u3057\u305f\n    case appDidBecomeActive\n    // \u304a\u77e5\u3089\u305b\u4e00\u89a7\u3092\u53d6\u5f97\u3057\u305f\n    case latestNotificationAtUpdated\n    // \u304a\u77e5\u3089\u305b\u4e00\u89a7\u3092\u78ba\u8a8d\u3057\u305f\n    case notificationsChecked\n    // \u81ea\u5206\u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u304c\u66f4\u65b0\u3055\u308c\u305f\n    case myProfileUpdated\n    // WebView\u304c\u9589\u3058\u305f\n    case webViewClosed\n    \n    var name: String {\n        // \u4ed6\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u7b49\u3068notification\u306e\u540d\u524d\u304c\u304b\u3076\u308b\u306e\u3092\u9632\u3050\u305f\u3081\u306bprefix\u3092\u3064\u3051\u308b\n        return \"myapp\" + String(self.hashValue)\n    }\n    \n    // \u901a\u77e5\u3092\u9001\u308b\n    func post(object: AnyObject? = nil, userInfo: [NSObject: AnyObject]? = nil) {\n        NSNotificationCenter.defaultCenter().postNotificationName(\n            self.name,\n            object: object,\n            userInfo: userInfo\n        )\n    }\n    \n    // \u901a\u77e5\u3092\u8cfc\u8aad\u3059\u308b\n    func asObservable() -> Observable<NSNotification> {\n        return NSNotificationCenter.defaultCenter()\n            .rx_notification(self.name)\n            .observeOn(MainScheduler.instance)\n    }\n}\n```\n\n## \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u9001\u308b\u5834\u5408\n\u3068\u304d\u306b\u306f\u901a\u77e5\u3068\u4e00\u7dd2\u306b`object`\u3092\u9001\u308a\u305f\u3044\u3002\n\u3042\u307e\u308a\u7dba\u9e97\u3067\u306f\u306a\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u3053\u3046\u66f8\u304f\u3053\u3068\u306b\u3057\u305f\n\n```swift\n// \u901a\u77e5\nNSNotifConstants.myProfileUpdated.post(\n    NSNotificationData.MyProfileUpdated(\n        oldProfileData: oldData,\n        newProfileData: newModel.toData()\n    )\n)\n\n// \u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u5909\u66f4\u3092\u76e3\u8996\nNSNotifConstants.myProfileUpdated.asObservable()\n    .map { $0.object as! NSNotificationData.MyProfileUpdated }\n    .subscribeNext( [unowned self] profiles in\n        // do something\n    )\n    .addDisposableTo(self.bag)\n```\n\n## \u5b9f\u88c5\n```swift:NSNotifData\n\n// NSNotificationCenter\u306b\u4f7f\u3046\n// object\u306b\u6307\u5b9a\u3059\u308b\u305f\u3081\u306bNSObject\u3092\u7d99\u627f\u3059\u308b\nfinal class NSNotifData: NSObject {\n    \n    final class MyProfileUpdated {\n        // \u81ea\u5206\u306e\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u304c\u66f4\u65b0\u3055\u308c\u305f\n        let oldProfileData: MyProfileData?\n        let newProfileData: MyProfileData\n        init(oldProfileData: MyProfileData?, newProfileData: MyProfileData) {\n            self.oldProfileData = oldProfileData\n            self.newProfileData = newProfileData\n        }\n    }\n\n}\n\n```\n\n## \u3055\u3044\u3054\u306b\n\u3082\u3063\u3068\u3044\u3044\u611f\u3058\u306e\u5b9f\u88c5\u304c\u3042\u308c\u3070\u6559\u3048\u3066\u304f\u3060\u3055\u3044:)\n", "tags": ["RxSwift", "Swift", "iOS", "NSNotificationCenter"]}