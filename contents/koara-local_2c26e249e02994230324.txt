{"context": "Linux\u3067\u30d0\u30a4\u30ca\u30ea\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308bRPATH\u3092\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\u307e\u3068\u3081\n\n\u4e8b\u524d\u6e96\u5099\n\u9069\u5f53\u306a\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3059\u308b\u3002\n\nmain.cpp\n#include <iostream>\n\nint main(int argc, char const* argv[])\n{\n        std::cout << \"aaa\" << std::endl;\n        return 0;\n}\n\n\n\nRPATH\u4ed8\u304d\u3067\u30d3\u30eb\u30c9\n$ g++ -Wl,-rpath=/tmp main.cpp \n\n\n\n\u78ba\u8a8d\u65b9\u6cd5\n\nreadelf \u3067\u78ba\u8a8d\nreadelf \u306e Dynamic section \u306b\u3042\u308b (RPATH) \u3092\u53c2\u7167\u3059\u308b\n\nreadelf\u306eDynamicSection\u3092\u78ba\u8a8d\n$ readelf -d -w ./a.out\nDynamic section at offset 0xa98 contains 28 entries:\n  Tag        Type                         Name/Value\n 0x0000000000000001 (NEEDED)             Shared library: [libstdc++.so.6]\n 0x0000000000000001 (NEEDED)             Shared library: [libm.so.6]\n 0x0000000000000001 (NEEDED)             Shared library: [libgcc_s.so.1]\n 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]\n 0x000000000000000f (RPATH)              Library rpath: [/tmp]\n<~ \u5f8c\u7565 ~>\n\n$ readelf -a -w ./a.out | grep RPATH\n 0x000000000000000f (RPATH)              Library rpath: [/tmp]\n\n\n\nobjdump \u3067\u78ba\u8a8d\nobjdump \u3067\u3082\u540c\u69d8\u306b\u78ba\u8a8d\u3067\u304d\u308b\n\nobjdump\u3067\u78ba\u8a8d\n$ objdump -x ./a.out | grep RPATH\n  RPATH                /tmp\n\n\n\n\u53c2\u8003\n\u3068\u3042\u308b\u30a8\u30f3\u30b8\u30cb\u30a2\u306e\u5099\u5fd8log: Shared Object \u5165\u9580\nld-linux.so\u306e--inhibit-rpath\u30aa\u30d7\u30b7\u30e7\u30f3: RivIs's blog\nIs there a way to inspect the current rpath on Linux? - Stack Overflow\nLinux\u3067\u30d0\u30a4\u30ca\u30ea\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308bRPATH\u3092\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\u307e\u3068\u3081\n\n# \u4e8b\u524d\u6e96\u5099\n\u9069\u5f53\u306a\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3059\u308b\u3002\n\n```cpp:main.cpp\n#include <iostream>\n\nint main(int argc, char const* argv[])\n{\n        std::cout << \"aaa\" << std::endl;\n        return 0;\n}\n```\n\n```bash:RPATH\u4ed8\u304d\u3067\u30d3\u30eb\u30c9\n$ g++ -Wl,-rpath=/tmp main.cpp \n```\n\n# \u78ba\u8a8d\u65b9\u6cd5\n## `readelf` \u3067\u78ba\u8a8d\n`readelf` \u306e Dynamic section \u306b\u3042\u308b `(RPATH)` \u3092\u53c2\u7167\u3059\u308b\n\n```bash:readelf\u306eDynamicSection\u3092\u78ba\u8a8d\n$ readelf -d -w ./a.out\nDynamic section at offset 0xa98 contains 28 entries:\n  Tag        Type                         Name/Value\n 0x0000000000000001 (NEEDED)             Shared library: [libstdc++.so.6]\n 0x0000000000000001 (NEEDED)             Shared library: [libm.so.6]\n 0x0000000000000001 (NEEDED)             Shared library: [libgcc_s.so.1]\n 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]\n 0x000000000000000f (RPATH)              Library rpath: [/tmp]\n<~ \u5f8c\u7565 ~>\n\n$ readelf -a -w ./a.out | grep RPATH\n 0x000000000000000f (RPATH)              Library rpath: [/tmp]\n```\n\n## `objdump` \u3067\u78ba\u8a8d\nobjdump \u3067\u3082\u540c\u69d8\u306b\u78ba\u8a8d\u3067\u304d\u308b\n\n```bash:objdump\u3067\u78ba\u8a8d\n$ objdump -x ./a.out | grep RPATH\n  RPATH                /tmp\n```\n\n# \u53c2\u8003\n[\u3068\u3042\u308b\u30a8\u30f3\u30b8\u30cb\u30a2\u306e\u5099\u5fd8log: Shared Object \u5165\u9580](http://masahir0y.blogspot.jp/2013/01/shared-object.html)\n[ld-linux.so\u306e--inhibit-rpath\u30aa\u30d7\u30b7\u30e7\u30f3: RivIs's blog](http://rivis.air-nifty.com/blog/2014/12/ld-linuxso--inh.html)\n[Is there a way to inspect the current rpath on Linux? - Stack Overflow](http://stackoverflow.com/questions/2836330/is-there-a-way-to-inspect-the-current-rpath-on-linux)\n", "tags": ["Linux", "GCC", "rpath", "ELF"]}