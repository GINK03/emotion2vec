{"context": "\n\n\u30bd\u30fc\u30b9\u5143\nhttps://akira-watson.com/iphone/camera.html\nhttps://sites.google.com/a/gclue.jp/swift-docs/ni-yinki100-ios/3-avfoundation/002-kamerano-qi-dongto-hua-xiangno-bao-cun\n\u3053\u306e2\u3064\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\n\u30b3\u30fc\u30c9\n\nViewController\n\nimport UIKit\nimport AVFoundation\n\nclass ViewController: UIViewController {\n\n    //\u30ab\u30e1\u30e9\u30bb\u30c3\u30b7\u30e7\u30f3\n    var captureSession: AVCaptureSession!\n    //\u30c7\u30d0\u30a4\u30b9\n    var cameraDevices: AVCaptureDevice!\n    //\u753b\u50cf\u306e\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\n    var imageOutput: AVCaptureStillImageOutput!\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n        // Do any additional setup after loading the view, typically from a nib.\n        //\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u4f5c\u6210\n        captureSession = AVCaptureSession()\n\n        //\u30c7\u30d0\u30a4\u30b9\u4e00\u89a7\u306e\u53d6\u5f97\n        let devices = AVCaptureDevice.devices()\n\n        //\u30d0\u30c3\u30af\u30ab\u30e1\u30e9\u3092cameraDevices\u306b\u683c\u7d0d\n        for device in devices {\n            if device.position == AVCaptureDevicePosition.Back {\n                cameraDevices = device as! AVCaptureDevice\n            }\n        }\n\n        //\u30d0\u30c3\u30af\u30ab\u30e1\u30e9\u304b\u3089VideoInput\u3092\u53d6\u5f97\n        let videoInput: AVCaptureInput!\n        do {\n            videoInput = try AVCaptureDeviceInput.init(device: cameraDevices)\n        } catch {\n            videoInput = nil\n        }\n\n        //\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u8ffd\u52a0\n        captureSession.addInput(videoInput)\n\n        //\u51fa\u529b\u5148\u3092\u751f\u6210\n        imageOutput = AVCaptureStillImageOutput()\n\n        //\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u8ffd\u52a0\n        captureSession.addOutput(imageOutput)\n\n        //\u753b\u50cf\u3092\u8868\u793a\u3059\u308b\u30ec\u30a4\u30e4\u30fc\u3092\u751f\u6210\n        let captureVideoLayer: AVCaptureVideoPreviewLayer = AVCaptureVideoPreviewLayer.init(session: captureSession)\n        captureVideoLayer.frame = self.view.bounds\n        captureVideoLayer.videoGravity = AVLayerVideoGravityResizeAspectFill\n\n        //View\u306b\u8ffd\u52a0\n        self.view.layer.addSublayer(captureVideoLayer)\n\n        //\u30bb\u30c3\u30b7\u30e7\u30f3\u958b\u59cb\n        captureSession.startRunning()\n\n    }\n\n    override func didReceiveMemoryWarning() {\n        super.didReceiveMemoryWarning()\n        // Dispose of any resources that can be recreated.\n    }\n\n    @IBAction func cameraStart(sender: AnyObject) {\n        //\u30d3\u30c7\u30aa\u51fa\u529b\u306b\u63a5\u7d9a\n        let captureVideoConnection = imageOutput.connectionWithMediaType(AVMediaTypeVideo)\n\n        //\u63a5\u7d9a\u304b\u3089\u753b\u50cf\u3092\u53d6\u5f97\n        self.imageOutput.captureStillImageAsynchronouslyFromConnection(captureVideoConnection) { (imageDataBuffer, error) -> Void in\n            //\u53d6\u5f97\u3057\u305fImage\u306eDataBuffer\u3092JPEG\u3092\u5909\u63db\n            let capturedImageData: NSData = AVCaptureStillImageOutput.jpegStillImageNSDataRepresentation(imageDataBuffer)\n            //JPEG\u304b\u3089UIImage\u3092\u4f5c\u6210\n            let Image: UIImage = UIImage(data: capturedImageData)!\n            //\u30a2\u30eb\u30d0\u30e0\u306b\u8ffd\u52a0\n            UIImageWriteToSavedPhotosAlbum(Image, self, nil, nil)\n        }\n    }\n\n\n}\n\n\n\nGitHub\nhttps://github.com/ShinokiRyosei/SampleCamera\n\n#\u30bd\u30fc\u30b9\u5143\nhttps://akira-watson.com/iphone/camera.html\nhttps://sites.google.com/a/gclue.jp/swift-docs/ni-yinki100-ios/3-avfoundation/002-kamerano-qi-dongto-hua-xiangno-bao-cun\n\n\u3053\u306e2\u3064\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\n#\u30b3\u30fc\u30c9\n\n\n```Swift:ViewController\n\nimport UIKit\nimport AVFoundation\n\nclass ViewController: UIViewController {\n    \n    //\u30ab\u30e1\u30e9\u30bb\u30c3\u30b7\u30e7\u30f3\n    var captureSession: AVCaptureSession!\n    //\u30c7\u30d0\u30a4\u30b9\n    var cameraDevices: AVCaptureDevice!\n    //\u753b\u50cf\u306e\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\n    var imageOutput: AVCaptureStillImageOutput!\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n        // Do any additional setup after loading the view, typically from a nib.\n        //\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u4f5c\u6210\n        captureSession = AVCaptureSession()\n        \n        //\u30c7\u30d0\u30a4\u30b9\u4e00\u89a7\u306e\u53d6\u5f97\n        let devices = AVCaptureDevice.devices()\n        \n        //\u30d0\u30c3\u30af\u30ab\u30e1\u30e9\u3092cameraDevices\u306b\u683c\u7d0d\n        for device in devices {\n            if device.position == AVCaptureDevicePosition.Back {\n                cameraDevices = device as! AVCaptureDevice\n            }\n        }\n        \n        //\u30d0\u30c3\u30af\u30ab\u30e1\u30e9\u304b\u3089VideoInput\u3092\u53d6\u5f97\n        let videoInput: AVCaptureInput!\n        do {\n            videoInput = try AVCaptureDeviceInput.init(device: cameraDevices)\n        } catch {\n            videoInput = nil\n        }\n        \n        //\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u8ffd\u52a0\n        captureSession.addInput(videoInput)\n        \n        //\u51fa\u529b\u5148\u3092\u751f\u6210\n        imageOutput = AVCaptureStillImageOutput()\n        \n        //\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u8ffd\u52a0\n        captureSession.addOutput(imageOutput)\n        \n        //\u753b\u50cf\u3092\u8868\u793a\u3059\u308b\u30ec\u30a4\u30e4\u30fc\u3092\u751f\u6210\n        let captureVideoLayer: AVCaptureVideoPreviewLayer = AVCaptureVideoPreviewLayer.init(session: captureSession)\n        captureVideoLayer.frame = self.view.bounds\n        captureVideoLayer.videoGravity = AVLayerVideoGravityResizeAspectFill\n        \n        //View\u306b\u8ffd\u52a0\n        self.view.layer.addSublayer(captureVideoLayer)\n        \n        //\u30bb\u30c3\u30b7\u30e7\u30f3\u958b\u59cb\n        captureSession.startRunning()\n        \n    }\n\n    override func didReceiveMemoryWarning() {\n        super.didReceiveMemoryWarning()\n        // Dispose of any resources that can be recreated.\n    }\n    \n    @IBAction func cameraStart(sender: AnyObject) {\n        //\u30d3\u30c7\u30aa\u51fa\u529b\u306b\u63a5\u7d9a\n        let captureVideoConnection = imageOutput.connectionWithMediaType(AVMediaTypeVideo)\n        \n        //\u63a5\u7d9a\u304b\u3089\u753b\u50cf\u3092\u53d6\u5f97\n        self.imageOutput.captureStillImageAsynchronouslyFromConnection(captureVideoConnection) { (imageDataBuffer, error) -> Void in\n            //\u53d6\u5f97\u3057\u305fImage\u306eDataBuffer\u3092JPEG\u3092\u5909\u63db\n            let capturedImageData: NSData = AVCaptureStillImageOutput.jpegStillImageNSDataRepresentation(imageDataBuffer)\n            //JPEG\u304b\u3089UIImage\u3092\u4f5c\u6210\n            let Image: UIImage = UIImage(data: capturedImageData)!\n            //\u30a2\u30eb\u30d0\u30e0\u306b\u8ffd\u52a0\n            UIImageWriteToSavedPhotosAlbum(Image, self, nil, nil)\n        }\n    }\n\n\n}\n```\n\n#GitHub\nhttps://github.com/ShinokiRyosei/SampleCamera\n", "tags": ["iOS", "Xcode", "Swift2"]}