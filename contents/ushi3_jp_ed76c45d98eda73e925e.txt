{"tags": ["Android", "Dagger2", "Retrofit"], "context": " More than 1 year has passed since last update.Retrofit 2.0-beta4\u3092\u4f7f\u7528\u3002\nmain\u306b\u5b9a\u7fa9\n\nAppComponent.java\n@Singleton\n@Component(modules = {\n    AppModule.class,\n    NetworkModule.class\n})\npublic interface AppComponent {\n\n}\n\n\n\nAppModule.java\n@Module\npublic class AppModule {\n\n    @Singleton\n    @Provides\n    public Retrofit.Builder provideRetrofitBuilder(Call.Factory callFactory, Converter.Factory converterFactory) {\n        return new Retrofit.Builder()\n                .baseUrl(context.getString(R.string.host))\n                .callFactory(callFactory)\n                .addConverterFactory(converterFactory)\n                .addCallAdapterFactory(RxJavaCallAdapterFactory.create());\n    }\n\n    @Singleton\n    @Provides\n    public Converter.Factory provideConverterFactory() {\n        return GsonConverterFactory.create();\n    }\n}\n\n\nmock\n\nNetworkModule.java\n@Module\npublic class NetworkModule {\n\n    @Singleton\n    @Provides\n    public Call.Factory provideCallFactory(Context context) {\n        return new MockCallFactory(context);\n    }\n}\n\n\n\u203b MockCallFactory\u306fokhttp3.Call\u53ca\u3073okhttp3.Call.Factory\u3092\u81ea\u524d\u3067\u5b9f\u88c5\u3002\nstaging\n\nNetworkModule.java\n@Module\npublic class NetworkModule {\n\n    @Singleton\n    @Provides\n    public Call.Factory provideCallFactory() {\n        return new OkHttpClient.Builder()\n                .addInterceptor(LoggingInterceptor.create())\n                .build();\n    }\n}\n\n\nproduction\n\nNetworkModule.java\n@Module\npublic class NetworkModule {\n\n    @Singleton\n    @Provides\n    public Call.Factory provideCallFactory() {\n        return new OkHttpClient.Builder()\n                .build();\n    }\n}\n\n\n\n\u53c2\u8003\nLeveraging product flavors in Android Studio for hermetic testing\n\u9694\u96e2\u3055\u308c\u305f\u74b0\u5883\u3067\u30c6\u30b9\u30c8\u3092\u884c\u3046\u305f\u3081\u306b Android Studio \u3067\u30d7\u30ed\u30c0\u30af\u30c8 \u30d5\u30ec\u30fc\u30d0\u30fc\u3092\u6d3b\u7528\u3059\u308b\nRetrofit 2.0-beta4\u3092\u4f7f\u7528\u3002\n\n\nmain\u306b\u5b9a\u7fa9\n\n```java:AppComponent.java\n@Singleton\n@Component(modules = {\n    AppModule.class,\n    NetworkModule.class\n})\npublic interface AppComponent {\n\n}\n```\n\n```java:AppModule.java\n@Module\npublic class AppModule {\n\n    @Singleton\n    @Provides\n    public Retrofit.Builder provideRetrofitBuilder(Call.Factory callFactory, Converter.Factory converterFactory) {\n        return new Retrofit.Builder()\n                .baseUrl(context.getString(R.string.host))\n                .callFactory(callFactory)\n                .addConverterFactory(converterFactory)\n                .addCallAdapterFactory(RxJavaCallAdapterFactory.create());\n    }\n\n    @Singleton\n    @Provides\n    public Converter.Factory provideConverterFactory() {\n        return GsonConverterFactory.create();\n    }\n}\n```\n\nmock\n\n```java:NetworkModule.java\n@Module\npublic class NetworkModule {\n\n    @Singleton\n    @Provides\n    public Call.Factory provideCallFactory(Context context) {\n        return new MockCallFactory(context);\n    }\n}\n```\n\n\u203b MockCallFactory\u306fokhttp3.Call\u53ca\u3073okhttp3.Call.Factory\u3092\u81ea\u524d\u3067\u5b9f\u88c5\u3002\n\n\nstaging\n\n```java:NetworkModule.java\n@Module\npublic class NetworkModule {\n\n    @Singleton\n    @Provides\n    public Call.Factory provideCallFactory() {\n        return new OkHttpClient.Builder()\n                .addInterceptor(LoggingInterceptor.create())\n                .build();\n    }\n}\n```\n\nproduction\n\n```java:NetworkModule.java\n@Module\npublic class NetworkModule {\n\n    @Singleton\n    @Provides\n    public Call.Factory provideCallFactory() {\n        return new OkHttpClient.Builder()\n                .build();\n    }\n}\n```\n\n\n# \u53c2\u8003\n\n[Leveraging product flavors in Android Studio for hermetic testing](http://android-developers.blogspot.jp/2015/12/leveraging-product-flavors-in-android.html)\n[\u9694\u96e2\u3055\u308c\u305f\u74b0\u5883\u3067\u30c6\u30b9\u30c8\u3092\u884c\u3046\u305f\u3081\u306b Android Studio \u3067\u30d7\u30ed\u30c0\u30af\u30c8 \u30d5\u30ec\u30fc\u30d0\u30fc\u3092\u6d3b\u7528\u3059\u308b](http://googledevjp.blogspot.jp/2016/01/android-studio.html)\n"}