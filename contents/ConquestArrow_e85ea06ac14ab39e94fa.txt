{"context": " More than 1 year has passed since last update.TypeScript\u3092\u66f8\u3044\u3066\u3044\u308b\u3068\u30af\u30e9\u30b9\u540d\u306e\u6587\u5b57\u5217\u3067\u30af\u30e9\u30b9\u3092\u53d6\u5f97\u3057\u305f\u304f\u306a\u308b\u4e8b\u304c\u3042\u308b\u3002Java\u306eClass.forClass(\"ClassName\")\u3084C#\u306eType.GetType(\"ClassName\")\u306b\u76f8\u5f53\u3059\u308b\u3053\u3068\u3092\u3059\u308b\u306b\u306f\u3069\u3046\u3057\u305f\u3089\u3044\u3044\u306e\u3060\u308d\u3046\u304b\u3002\n\n\u7279\u5b9a\u72b6\u6cc1\u4e0b\u306a\u3089\u6709\u52b9\u306a\u65b9\u6cd5\n\u7279\u5b9a\u72b6\u6cc1\u4e0b\u306a\u3089\u51c4\u304f\u7c21\u5358\u306a\u65b9\u6cd5\u304c\u4e00\u3064\u3042\u308b\u3002\nvar cls:typeof \u3010\u30af\u30e9\u30b9\u540d\u3011 = window[\"\u3010\u30af\u30e9\u30b9\u540d\u3011\"];\n\n\u554f\u984c\u306f\u3053\u308c\u306f\u3069\u3053\u3067\u3082\u4f7f\u3048\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3002\n\n\u30d6\u30e9\u30a6\u30b6\u3067\u3057\u304b\u52d5\u304b\u306a\u3044\n\n\n\nwindows\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u3057\u3066\u5b58\u5728\u3059\u308b\u74b0\u5883\u3067\u3057\u304b\u52d5\u304b\u306a\u3044\u306e\u3067node.js\u306a\u3069\u3067\u306f\u4f7f\u3048\u306a\u3044\n\n\nES3/ES5\u306b\u5909\u63db\u3057\u305f\u6642\u306e\u307f\u53c2\u7167\u53ef\u80fd\n\n\n\u7406\u7531\uff1aES6(ES2015)\u3067\u30b0\u30ed\u30fc\u30d0\u30eb\u306b\u5b9a\u7fa9\u3057\u305flet,const,class\u306f\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u306a\u3089\u306a\u3044 \n\n\n\u30b0\u30ed\u30fc\u30d0\u30eb\u306a\u30b9\u30b3\u30fc\u30d7\u3067\u5b9a\u7fa9\u3057\u305f\u6642\u306e\u307f\n\n\n\nnamespace\u3067\u30b9\u30b3\u30fc\u30d7\u3092\u533a\u5207\u308b\u3068\u3064\u304b\u3048\u306a\u3044\u3002\n\n\n\n\u4f7f\u3048\u308b\u6761\u4ef6\u304c\u9650\u3089\u308c\u308b\u306e\u3067\u6b63\u76f4\u3042\u307e\u308a\u5b9f\u7528\u7684\u3067\u306a\u3044\u3002\n\n\u6587\u5b57\u5217\u304b\u3089\u30af\u30e9\u30b9\u3092\u53d6\u5f97\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570ClassUtil.getClass\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u4f5c\u3063\u3066\u307f\u305f\u306e\u304c\u4ee5\u4e0b\u3002\u7121\u540d\u30af\u30e9\u30b9\u3084\u30b9\u30b3\u30fc\u30d7\u306e\u6df1\u3044\u30af\u30e9\u30b9\u3001Date\u306a\u3069\u306e\u30cd\u30a4\u30c6\u30a3\u30d6\u306a\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u5fdc\u3055\u305b\u305f\u306e\u3067\u5c11\u3057\u9577\u3044\u3002\n\n\u6587\u5b57\u5217\u304b\u3089\u30af\u30e9\u30b9\u3092\u53d6\u5f97\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\n\"use strict\";\n\nnamespace ClassUtil {\n    export interface ClassType<T> {\n        prototype?: T;\n        name?: string;\n        [property: string]: any;\n\n        new (...args:any[]): T;\n    }\n}\n\nexport class ClassUtil {\n\n    static getClass<T>(className: string): ClassUtil.ClassType<T> {\n        if (!className) {\n            throw Error(`Cannot get a anonymous class. A class you want to get must be named.`);\n        }\n\n        const g = this.getGlobal();\n        //get scope reference\n        const p = className.split(\".\");\n        let c = g;\n        if(p.length >= 0){\n            for (let i of p) {\n                if (typeof c[i] === \"undefined\") {\n                    if(typeof (<any>global)[i] === \"undefined\"){\n                        throw ReferenceError(`No such a reachable reference scope \"${i}\". `);\n                    }else{\n                        //global objects\n                        c = (<any>global)[i];\n                    }\n                }else{\n                    c = c[i];\n                }\n            }\n        }\n\n        if (this.isClassLike<T>(c, className)) {\n            return <typeof c>c;\n        } else {\n            throw TypeError(`${className} is not a Class.`)\n        }\n    }\n\n\n    /**\n     * @return the global object or node.js exports\n     */\n    private static getGlobal(): any {\n        if (typeof self !== \"undefined\") { return self; }\n        else if (typeof window !== \"undefined\") { return window; }\n        else if (typeof global !== \"undefined\" && typeof exports !== 'undefined') { return exports; }\n        else { throw new Error(`Cannot get the global object or exports object (nodejs).`); }\n    }\n\n    private static isClassLike<T>(classLike: any, className: string): classLike is T {\n        const cnl = className.split(\".\");\n        return (typeof classLike === \"function\")\n            && (typeof classLike.prototype !== \"undefined\")\n            && (classLike.name === cnl[cnl.length - 1]);\n    }\n}\n\n\n\n\u4f7f\u3044\u65b9\n\u547c\u3073\u51fa\u3057\u305f\u3044\u30af\u30e9\u30b9\u306fexport\u3067\u4fee\u98fe\u30571\u3001-m commonjs\u3068\u3057\u3066\u304a\u304f2\u3002\n\n\u6587\u5b57\u5217\u304b\u3089\u547c\u3073\u51fa\u3057\u305f\u3044\u30af\u30e9\u30b9\u306e\u5b9a\u7fa9\nclass TestBase{constructor(){return Object.getPrototypeOf(this).name}}\nexport class Test1 extends TestBase{}\nexport class Test2 extends TestBase{}\nexport class Test3 extends TestBase{}\n\n\nTest1,Test2,Test3\u304b\u3089\u30e9\u30f3\u30c0\u30e0\u306b\u9078\u3093\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u4f8b\u3092\u8003\u3048\u3066\u307f\u308b\u3002\n\n`Test1,Test2,Test3`\u304b\u3089\u30e9\u30f3\u30c0\u30e0\u306b\u9078\u3093\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u4f8b\ntype TestN = Test1|Test2|Test3;\nconst cName = `Test${1+Math.round(Math.random()*2)}`;\nvar tx = ClassUtil.getClass<TestN>(cName);\nvar itx = new tx();\nconsole.log(`itx:${tx.name}`); //Test1 or Test2 or Test3\n\n\nClassUtil.getClass\u304c\u8fd4\u3059\u306e\u306f\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u306f\u306a\u304f\u3001\u30af\u30e9\u30b9\u305d\u306e\u3082\u306e\u3060\u3002\u306a\u306e\u3067 getClass<T>()=>T \u3067\u306f\u306a\u304f\u3001getClass<T>()=>ClassType<T>\u3068\u4e00\u65e6ClassType<T>\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u7d4c\u75313\u3057\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u751f\u6210\u6642\u306bT\u306e\u578b\u306b\u306a\u308b\u3088\u3046\u578b\u60c5\u5831\u3092\u5f15\u304d\u7d99\u3044\u3067\u3044\u308b\u3002\n\u4eca\u56de\u306e\u3088\u3046\u306b\u3001\u9078\u629e\u80a2\u304c\u4e8b\u524d\u306b\u6c7a\u307e\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u3001TypeAlias\u3068\u7d44\u307f\u5408\u308f\u305b\u308b\u4e8b\u3067new\u3057\u305f\u3042\u3068\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304cTest1/Test2/Test3\u306e\u3069\u308c\u304b\u306b\u306a\u308b\u3001\u3068\u3044\u3046\u306e\u304c\u5b9f\u73fe\u3067\u304d\u308b\u3002\n\n\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u4ed8\u304d\u30af\u30e9\u30b9\u3092\u53d6\u5f97\n\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u304c\u533a\u5207\u3089\u308c\u305f\u6df1\u3044\u3068\u3053\u308d\u306b\u3044\u308b\u30af\u30e9\u30b9\u306e\u53d6\u5f97\u306b\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3002\nexport namespace ns {\n    export class InnerClass {\n        prop = \"inner\";\n    }\n}\n\nnamespace, class\u3068\u3082\u306bexport\u304c\u5fc5\u8981\u3002\n//namespaced class test\nvar it = ClassUtil.getClass<ns.InnerClass>(\"ns.InnerClass\");\nvar iit = new it();\nconsole.log(`iit.prop:${iit.prop}`); //iit.prop:inner\n\n\n\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\n\u30af\u30e9\u30b9\u3067\u306f\u306a\u3044\u304c\u3001\u4e00\u90e8\u306e\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08Date\u3068\u304bNumber\u3068\u304b\uff09\u306e\u6587\u5b57\u5217\u306b\u3088\u308b\u53d6\u5f97\u306b\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3002\n\nClassLike\u306a\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\nvar date = ClassUtil.getClass<Date>(\"Date\");\nvar idata = new date();\nconsole.log(`idata:${idata.getFullYear()}`);\n\n\n\u5bfe\u5fdc\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff1a\n\n\ntypeof \u3010\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u540d\u3011 === \"function\"\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\u30b0\u30ed\u30fc\u30d0\u30eb\u306a\u30b9\u30b3\u30fc\u30d7\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\n\nprototype,name\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u6301\u3064\n\n\u3053\u308c\u306f\u526f\u7523\u7269\u3067\u3001\u30af\u30e9\u30b9\u3067\u3042\u308b\u304b\u3069\u3046\u304b\u53b3\u5bc6\u306b\u306f\u5224\u5b9a\u3067\u304d\u306a\u3044\u304c\u6545\u306e\u7279\u5225\u5bfe\u5fdc\u3002\n\n\u5236\u9650\n\n\u533f\u540d\u30af\u30e9\u30b9\n\u30af\u30e9\u30b9\u5f0f\u3067\u8868\u73fe\u3055\u308c\u308b\u3088\u3046\u306a\u533f\u540d\u30af\u30e9\u30b9\uff08\u7121\u540d\u30af\u30e9\u30b9\uff09\u306b\u306f\u540d\u524d\u304c\u306a\u3044\u3002\u305d\u306e\u305f\u3081\u5f53\u7136\u306a\u304c\u3089\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u3002\n\n\u533f\u540d\u30af\u30e9\u30b9\u306b\u306f\u5bfe\u5fdc\u3057\u306a\u3044\nexport var cls = class {\n    constructor(){return `this is anonymous class!`}\n}\n\n//get anonymous class with exported var\nvar ac = ClassUtil.getClass(\"cls\");\nvar iac = new ac(); //TypeError: cls is not a Class.\n\n\n\n\u53d6\u5f97\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u578b\u30af\u30a8\u30ea\u3067\u578b\u6307\u5b9a\n\nstatic\u306a\u30e1\u30bd\u30c3\u30c9\u3092\u6301\u3064\u30af\u30e9\u30b9\u306e\u5834\u5408\u3001\u578b\u30af\u30a8\u30ea\u3067\u578b\u6307\u5b9a\u4e0d\u53ef\nexport class Test{\n    static hoge() { return 0 };\n}\nvar t: typeof Test = ClassUtil.getClass<Test>(\"Test\"); //Property 'hoge' is missing in type 'ClassType<Test>'.\n\n\n\u53d6\u5f97\u3057\u305f\u30af\u30e9\u30b9\u305d\u306e\u3082\u306e\u306f\u3001TypeScript\u3060\u3068\u578b\u30af\u30a8\u30ea\u3067\u578b\u6307\u5b9a\u3067\u304d\u308b\u306e\u3060\u304c\u3001\u4eca\u56de\u306f\u9014\u4e2d\u306b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u7d4c\u7531\u3059\u308b\u95a2\u4fc2\u3067\u3001\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3053\u3068\u304c\u3042\u308b\u3002\u5177\u4f53\u7684\u306b\u306f\u547c\u3073\u51fa\u305d\u3046\u3068\u3059\u308b\u30af\u30e9\u30b9\u304cstatic\u306a\u30e1\u30bd\u30c3\u30c9\u3092\u6301\u3064\u5834\u5408\u3002\ngetClass<T>()=> typeof T\u306e\u3088\u3046\u306b\u95a2\u6570\u306e\u8fd4\u308a\u5024\u306b\u578b\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u578b\u30af\u30a8\u30ea\u3092\u7d44\u307f\u5408\u308f\u305b\u3089\u308c\u308c\u3070\u3053\u306e\u3088\u3046\u306a\u5236\u9650\u306f\u306a\u304b\u3063\u305f\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u73fe\u72b6\u306eTypeScript\u3060\u3068\u8868\u73fe\u4e0d\u53ef\u3002\n\n\u307e\u3068\u3081\n\nTypeScript(JavaScript\u3082)\u3067\u6587\u5b57\u5217\u304b\u3089\u30af\u30e9\u30b9\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u308b\u3051\u3069\u5384\u4ecb\n\u578b\u30af\u30a8\u30ea\u3092\u306e\u305e\u3051\u3070\u4e0a\u8a18\u306e\u3084\u308a\u65b9\u3067\u53d6\u5f97\u3067\u304d\u308b\u2026\u306f\u305a\n\u3082\u3057\u3001\u30af\u30e9\u30b9\u305d\u306e\u3082\u306e\u3092\u8fd4\u3059\u95a2\u6570\u306bfunc<T>() => typeof T\u3063\u3066\u8868\u73fe\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3068\u30e1\u30bf\u30d7\u30ed\u304c\u6357\u308b\n\n\n\n\n\nexport\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u5916\u90e8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u305f\u3081\u3002\u6587\u5b57\u5217\u3067\u53d6\u5f97\u3059\u308b\u306e\u3082\u5916\u90e8\u304b\u3089\u53c2\u7167\u3057\u3066\u3044\u308b\u306e\u3068\u540c\u3058\u6271\u3044\u306b\u306a\u308b\u3002\u00a0\u21a9\n\n\n\u73fe\u6642\u70b9\u306enodejs\u74b0\u5883\u3092\u8003\u3048\u308b\u3068CommonJS\u306b\u5909\u63db\u3057\u3066\u304a\u304f\u306e\u304c\u7121\u96e3\u306a\u305f\u3081\u3002\u00a0\u21a9\n\n\n\u3053\u306e\u6b20\u70b9\u306f:typeof \u3010\u30af\u30e9\u30b9\u540d\u3011\u306e\u3088\u3046\u306b\u578b\u30af\u30a8\u30ea\u3067\u6307\u5b9a\u3067\u304d\u306a\u3044\u3053\u3068\u3002\u00a0\u21a9\n\n\n\nTypeScript\u3092\u66f8\u3044\u3066\u3044\u308b\u3068\u30af\u30e9\u30b9\u540d\u306e\u6587\u5b57\u5217\u3067\u30af\u30e9\u30b9\u3092\u53d6\u5f97\u3057\u305f\u304f\u306a\u308b\u4e8b\u304c\u3042\u308b\u3002Java\u306e`Class.forClass(\"ClassName\")`\u3084C#\u306e`Type.GetType(\"ClassName\")`\u306b\u76f8\u5f53\u3059\u308b\u3053\u3068\u3092\u3059\u308b\u306b\u306f\u3069\u3046\u3057\u305f\u3089\u3044\u3044\u306e\u3060\u308d\u3046\u304b\u3002\n\n## \u7279\u5b9a\u72b6\u6cc1\u4e0b\u306a\u3089\u6709\u52b9\u306a\u65b9\u6cd5\n\n**\u7279\u5b9a\u72b6\u6cc1\u4e0b\u306a\u3089**\u51c4\u304f\u7c21\u5358\u306a\u65b9\u6cd5\u304c\u4e00\u3064\u3042\u308b\u3002\n\n```ts\nvar cls:typeof \u3010\u30af\u30e9\u30b9\u540d\u3011 = window[\"\u3010\u30af\u30e9\u30b9\u540d\u3011\"];\n```\n\n\u554f\u984c\u306f\u3053\u308c\u306f**\u3069\u3053\u3067\u3082\u4f7f\u3048\u308b\u308f\u3051\u3067\u306f\u306a\u3044**\u3068\u3044\u3046\u3053\u3068\u3002\n\n 1. \u30d6\u30e9\u30a6\u30b6\u3067\u3057\u304b\u52d5\u304b\u306a\u3044\n  * `windows`\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u3057\u3066\u5b58\u5728\u3059\u308b\u74b0\u5883\u3067\u3057\u304b\u52d5\u304b\u306a\u3044\u306e\u3067node.js\u306a\u3069\u3067\u306f\u4f7f\u3048\u306a\u3044\n 2. ES3/ES5\u306b\u5909\u63db\u3057\u305f\u6642\u306e\u307f\u53c2\u7167\u53ef\u80fd\n  * \u7406\u7531\uff1a[ES6(ES2015)\u3067\u30b0\u30ed\u30fc\u30d0\u30eb\u306b\u5b9a\u7fa9\u3057\u305flet,const,class\u306f\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u306a\u3089\u306a\u3044](http://qiita.com/ConquestArrow/items/8cb01744af15afff33c0) \n 3. \u30b0\u30ed\u30fc\u30d0\u30eb\u306a\u30b9\u30b3\u30fc\u30d7\u3067\u5b9a\u7fa9\u3057\u305f\u6642\u306e\u307f\n  * `namespace`\u3067\u30b9\u30b3\u30fc\u30d7\u3092\u533a\u5207\u308b\u3068\u3064\u304b\u3048\u306a\u3044\u3002\n\n\u4f7f\u3048\u308b\u6761\u4ef6\u304c\u9650\u3089\u308c\u308b\u306e\u3067\u6b63\u76f4\u3042\u307e\u308a\u5b9f\u7528\u7684\u3067\u306a\u3044\u3002\n\n## \u6587\u5b57\u5217\u304b\u3089\u30af\u30e9\u30b9\u3092\u53d6\u5f97\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570`ClassUtil.getClass`\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u4f5c\u3063\u3066\u307f\u305f\u306e\u304c\u4ee5\u4e0b\u3002\u7121\u540d\u30af\u30e9\u30b9\u3084\u30b9\u30b3\u30fc\u30d7\u306e\u6df1\u3044\u30af\u30e9\u30b9\u3001`Date`\u306a\u3069\u306e\u30cd\u30a4\u30c6\u30a3\u30d6\u306a\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u5fdc\u3055\u305b\u305f\u306e\u3067\u5c11\u3057\u9577\u3044\u3002\n\n```ts:\u6587\u5b57\u5217\u304b\u3089\u30af\u30e9\u30b9\u3092\u53d6\u5f97\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\n\"use strict\";\n\nnamespace ClassUtil {\n\texport interface ClassType<T> {\n\t\tprototype?: T;\n\t\tname?: string;\n\t\t[property: string]: any;\n\n\t\tnew (...args:any[]): T;\n\t}\n}\n\nexport class ClassUtil {\n\n\tstatic getClass<T>(className: string): ClassUtil.ClassType<T> {\n\t\tif (!className) {\n\t\t\tthrow Error(`Cannot get a anonymous class. A class you want to get must be named.`);\n\t\t}\n\n\t\tconst g = this.getGlobal();\n\t\t//get scope reference\n\t\tconst p = className.split(\".\");\n\t\tlet c = g;\n\t\tif(p.length >= 0){\n\t\t\tfor (let i of p) {\n\t\t\t\tif (typeof c[i] === \"undefined\") {\n\t\t\t\t\tif(typeof (<any>global)[i] === \"undefined\"){\n\t\t\t\t\t\tthrow ReferenceError(`No such a reachable reference scope \"${i}\". `);\n\t\t\t\t\t}else{\n\t\t\t\t\t\t//global objects\n\t\t\t\t\t\tc = (<any>global)[i];\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tc = c[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (this.isClassLike<T>(c, className)) {\n\t\t\treturn <typeof c>c;\n\t\t} else {\n\t\t\tthrow TypeError(`${className} is not a Class.`)\n\t\t}\n\t}\n\t\n\t\n\t/**\n\t * @return the global object or node.js exports\n\t */\n\tprivate static getGlobal(): any {\n\t\tif (typeof self !== \"undefined\") { return self; }\n\t\telse if (typeof window !== \"undefined\") { return window; }\n\t\telse if (typeof global !== \"undefined\" && typeof exports !== 'undefined') { return exports; }\n\t\telse { throw new Error(`Cannot get the global object or exports object (nodejs).`); }\n\t}\n\n\tprivate static isClassLike<T>(classLike: any, className: string): classLike is T {\n\t\tconst cnl = className.split(\".\");\n\t\treturn (typeof classLike === \"function\")\n\t\t\t&& (typeof classLike.prototype !== \"undefined\")\n\t\t\t&& (classLike.name === cnl[cnl.length - 1]);\n\t}\n}\n```\n\n### \u4f7f\u3044\u65b9\n\n\u547c\u3073\u51fa\u3057\u305f\u3044\u30af\u30e9\u30b9\u306f`export`\u3067\u4fee\u98fe\u3057[^1]\u3001`-m commonjs`\u3068\u3057\u3066\u304a\u304f[^2]\u3002\n\n```ts:\u6587\u5b57\u5217\u304b\u3089\u547c\u3073\u51fa\u3057\u305f\u3044\u30af\u30e9\u30b9\u306e\u5b9a\u7fa9\nclass TestBase{constructor(){return Object.getPrototypeOf(this).name}}\nexport class Test1 extends TestBase{}\nexport class Test2 extends TestBase{}\nexport class Test3 extends TestBase{}\n```\n\n`Test1,Test2,Test3`\u304b\u3089\u30e9\u30f3\u30c0\u30e0\u306b\u9078\u3093\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u4f8b\u3092\u8003\u3048\u3066\u307f\u308b\u3002\n\n```ts:`Test1,Test2,Test3`\u304b\u3089\u30e9\u30f3\u30c0\u30e0\u306b\u9078\u3093\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u4f8b\ntype TestN = Test1|Test2|Test3;\nconst cName = `Test${1+Math.round(Math.random()*2)}`;\nvar tx = ClassUtil.getClass<TestN>(cName);\nvar itx = new tx();\nconsole.log(`itx:${tx.name}`); //Test1 or Test2 or Test3\n```\n\n`ClassUtil.getClass`\u304c\u8fd4\u3059\u306e\u306f\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u306f\u306a\u304f\u3001**\u30af\u30e9\u30b9\u305d\u306e\u3082\u306e**\u3060\u3002\u306a\u306e\u3067 `getClass<T>()=>T` \u3067\u306f\u306a\u304f\u3001`getClass<T>()=>ClassType<T>`\u3068\u4e00\u65e6`ClassType<T>`\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u7d4c\u7531[^3]\u3057\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u751f\u6210\u6642\u306b`T`\u306e\u578b\u306b\u306a\u308b\u3088\u3046\u578b\u60c5\u5831\u3092\u5f15\u304d\u7d99\u3044\u3067\u3044\u308b\u3002\n\n\u4eca\u56de\u306e\u3088\u3046\u306b\u3001\u9078\u629e\u80a2\u304c\u4e8b\u524d\u306b\u6c7a\u307e\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u3001TypeAlias\u3068\u7d44\u307f\u5408\u308f\u305b\u308b\u4e8b\u3067new\u3057\u305f\u3042\u3068\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c`Test1/Test2/Test3`\u306e\u3069\u308c\u304b\u306b\u306a\u308b\u3001\u3068\u3044\u3046\u306e\u304c\u5b9f\u73fe\u3067\u304d\u308b\u3002\n\n## \u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u4ed8\u304d\u30af\u30e9\u30b9\u3092\u53d6\u5f97\n\n\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u304c\u533a\u5207\u3089\u308c\u305f\u6df1\u3044\u3068\u3053\u308d\u306b\u3044\u308b\u30af\u30e9\u30b9\u306e\u53d6\u5f97\u306b\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3002\n\n```ts\nexport namespace ns {\n\texport class InnerClass {\n\t\tprop = \"inner\";\n\t}\n}\n```\nnamespace, class\u3068\u3082\u306bexport\u304c\u5fc5\u8981\u3002\n\n```ts\n//namespaced class test\nvar it = ClassUtil.getClass<ns.InnerClass>(\"ns.InnerClass\");\nvar iit = new it();\nconsole.log(`iit.prop:${iit.prop}`); //iit.prop:inner\n```\n\n### \u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\n\n\u30af\u30e9\u30b9\u3067\u306f\u306a\u3044\u304c\u3001\u4e00\u90e8\u306e\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08`Date`\u3068\u304b`Number`\u3068\u304b\uff09\u306e\u6587\u5b57\u5217\u306b\u3088\u308b\u53d6\u5f97\u306b\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3002\n\n```ts:ClassLike\u306a\u30b0\u30ed\u30fc\u30d0\u30eb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\nvar date = ClassUtil.getClass<Date>(\"Date\");\nvar idata = new date();\nconsole.log(`idata:${idata.getFullYear()}`);\n```\n\n\u5bfe\u5fdc\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff1a\n\n - `typeof \u3010\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u540d\u3011 === \"function\"`\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n - \u30b0\u30ed\u30fc\u30d0\u30eb\u306a\u30b9\u30b3\u30fc\u30d7\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\n - `prototype`,`name`\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u6301\u3064\n\n\u3053\u308c\u306f\u526f\u7523\u7269\u3067\u3001\u30af\u30e9\u30b9\u3067\u3042\u308b\u304b\u3069\u3046\u304b\u53b3\u5bc6\u306b\u306f\u5224\u5b9a\u3067\u304d\u306a\u3044\u304c\u6545\u306e\u7279\u5225\u5bfe\u5fdc\u3002\n\n## \u5236\u9650\n\n### \u533f\u540d\u30af\u30e9\u30b9\n\n\u30af\u30e9\u30b9\u5f0f\u3067\u8868\u73fe\u3055\u308c\u308b\u3088\u3046\u306a\u533f\u540d\u30af\u30e9\u30b9\uff08\u7121\u540d\u30af\u30e9\u30b9\uff09\u306b\u306f\u540d\u524d\u304c\u306a\u3044\u3002\u305d\u306e\u305f\u3081\u5f53\u7136\u306a\u304c\u3089\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u3002\n\n```ts:\u533f\u540d\u30af\u30e9\u30b9\u306b\u306f\u5bfe\u5fdc\u3057\u306a\u3044\nexport var cls = class {\n\tconstructor(){return `this is anonymous class!`}\n}\n\n//get anonymous class with exported var\nvar ac = ClassUtil.getClass(\"cls\");\nvar iac = new ac(); //TypeError: cls is not a Class.\n```\n\n\n### \u53d6\u5f97\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u578b\u30af\u30a8\u30ea\u3067\u578b\u6307\u5b9a\n\n```ts:static\u306a\u30e1\u30bd\u30c3\u30c9\u3092\u6301\u3064\u30af\u30e9\u30b9\u306e\u5834\u5408\u3001\u578b\u30af\u30a8\u30ea\u3067\u578b\u6307\u5b9a\u4e0d\u53ef\nexport class Test{\n\tstatic hoge() { return 0 };\n}\nvar t: typeof Test = ClassUtil.getClass<Test>(\"Test\"); //Property 'hoge' is missing in type 'ClassType<Test>'.\n```\n\n\u53d6\u5f97\u3057\u305f\u30af\u30e9\u30b9\u305d\u306e\u3082\u306e\u306f\u3001TypeScript\u3060\u3068\u578b\u30af\u30a8\u30ea\u3067\u578b\u6307\u5b9a\u3067\u304d\u308b\u306e\u3060\u304c\u3001\u4eca\u56de\u306f\u9014\u4e2d\u306b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u7d4c\u7531\u3059\u308b\u95a2\u4fc2\u3067\u3001\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3053\u3068\u304c\u3042\u308b\u3002\u5177\u4f53\u7684\u306b\u306f\u547c\u3073\u51fa\u305d\u3046\u3068\u3059\u308b\u30af\u30e9\u30b9\u304c`static`\u306a\u30e1\u30bd\u30c3\u30c9\u3092\u6301\u3064\u5834\u5408\u3002\n\n`getClass<T>()=> typeof T`\u306e\u3088\u3046\u306b\u95a2\u6570\u306e\u8fd4\u308a\u5024\u306b\u578b\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u578b\u30af\u30a8\u30ea\u3092\u7d44\u307f\u5408\u308f\u305b\u3089\u308c\u308c\u3070\u3053\u306e\u3088\u3046\u306a\u5236\u9650\u306f\u306a\u304b\u3063\u305f\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u73fe\u72b6\u306eTypeScript\u3060\u3068\u8868\u73fe\u4e0d\u53ef\u3002\n\n## \u307e\u3068\u3081\n\n * TypeScript(JavaScript\u3082)\u3067\u6587\u5b57\u5217\u304b\u3089\u30af\u30e9\u30b9\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u308b\u3051\u3069\u5384\u4ecb\n * \u578b\u30af\u30a8\u30ea\u3092\u306e\u305e\u3051\u3070[\u4e0a\u8a18\u306e\u3084\u308a\u65b9](#\u6587\u5b57\u5217\u304b\u3089\u30af\u30e9\u30b9\u3092\u53d6\u5f97\u3059\u308b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570`ClassUtil.getClass`)\u3067\u53d6\u5f97\u3067\u304d\u308b\u2026\u306f\u305a\n * \u3082\u3057\u3001\u30af\u30e9\u30b9\u305d\u306e\u3082\u306e\u3092\u8fd4\u3059\u95a2\u6570\u306b`func<T>() => typeof T`\u3063\u3066\u8868\u73fe\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3068\u30e1\u30bf\u30d7\u30ed\u304c\u6357\u308b\n\n\n\n[^1]: export\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u5916\u90e8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u305f\u3081\u3002\u6587\u5b57\u5217\u3067\u53d6\u5f97\u3059\u308b\u306e\u3082\u5916\u90e8\u304b\u3089\u53c2\u7167\u3057\u3066\u3044\u308b\u306e\u3068\u540c\u3058\u6271\u3044\u306b\u306a\u308b\u3002\n[^2]: \u73fe\u6642\u70b9\u306enodejs\u74b0\u5883\u3092\u8003\u3048\u308b\u3068CommonJS\u306b\u5909\u63db\u3057\u3066\u304a\u304f\u306e\u304c\u7121\u96e3\u306a\u305f\u3081\u3002\n[^3]: \u3053\u306e\u6b20\u70b9\u306f`:typeof \u3010\u30af\u30e9\u30b9\u540d\u3011`\u306e\u3088\u3046\u306b\u578b\u30af\u30a8\u30ea\u3067\u6307\u5b9a\u3067\u304d\u306a\u3044\u3053\u3068\u3002\n", "tags": ["JavaScript", "ECMAScript2015, 6", "TypeScript1.7.3"]}