{"context": " More than 1 year has passed since last update.CS-Cart\u3067\u30a2\u30c9\u30aa\u30f3\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u3068\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u30af\u30ea\u30a2\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u306a\u305c\u304b\u30ad\u30e3\u30c3\u30b7\u30e5\u304c\u30af\u30ea\u30a2\u3067\u304d\u306a\u3044\u554f\u984c\u306b\u906d\u9047\u3057\u307e\u3057\u305f\u3002\nCS-Cart\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30af\u30ea\u30a2\u6a5f\u80fd\u306f\u6700\u7d42\u7684\u306bfn.fs.php\u306efn_rm\u95a2\u6570\u3092\u547c\u3093\u3067\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u5b9f\u88c5\u304c\u300c\u3072\u3068\u3064\u3067\u3082\u30d5\u30a1\u30a4\u30eb\u524a\u9664\u5931\u6557\u3057\u305f\u3089\u4e2d\u65ad\u3059\u308b\u300d\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u4e2d\u65ad\u3055\u308c\u3066\u3082\u3001\u753b\u9762\u306b\u306f\u300c\u304a\u77e5\u3089\u305b \u30ad\u30e3\u30c3\u30b7\u30e5\u304c\u30af\u30ea\u30a2\u3055\u308c\u307e\u3057\u305f\u300d\u3068\u3042\u305f\u304b\u3082\u3046\u307e\u304f\u3044\u3063\u3066\u3044\u308b\u3088\u3046\u306a\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u5618\u3063\u3071\u3061\u3067\u3059(\u82e6\u7b11)\u3002\nfn_rm\u95a2\u6570\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u30d5\u30a1\u30a4\u30eb\u3067\u3060\u3063\u305f\u3089unlink\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3060\u3063\u305f\u3089\u5b50\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u5e30\u547c\u3073\u51fa\u3057\u3067unlink\u3057\u3066\u304b\u3089\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092rmdir\u3059\u308b\u3068\u3044\u3063\u305f\u3001PHP\u3042\u308b\u3042\u308b\u306a\u30b3\u30fc\u30c9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u3088\u304f\u898b\u3066\u307f\u308b\u3068\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306e\u30d5\u30a1\u30a4\u30eb\u524a\u9664\u304c\u3072\u3068\u3064\u3067\u3082\u5931\u6557\u3057\u305f\u3089return false\u3057\u3066\u51e6\u7406\u3092\u4e2d\u65ad\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n/**\n * Recursively remove directory (or just a file)\n *\n * @param string $source\n * @param bool $delete_root\n * @param string $pattern\n * @return bool\n */\nfunction fn_rm($source, $delete_root = true, $pattern = '')\n{\n    // Simple copy for a file\n    if (is_file($source)) {\n        $res = true;\n        if (empty($pattern) || (!empty($pattern) && preg_match('/' . $pattern . '/', fn_basename($source)))) {\n            $res = @unlink($source);\n        }\n\n        return $res;\n    }\n\n    // Loop through the folder\n    if (is_dir($source) && $dir = dir($source)) {\n        while (false !== $entry = $dir->read()) {\n            // Skip pointers\n            if ($entry == '.' || $entry == '..') {\n                continue;\n            }\n             if (fn_rm($source . '/' . $entry, true, $pattern) == false) {\n                return false; /* \u3053\u3053\u3067\u8ae6\u3081\u3061\u3083\u3046\u2026 */\n            }\n        }\n        // Clean up\n        $dir->close();\n\n        return ($delete_root == true && empty($pattern)) ? @rmdir($source) : true;\n    } else {\n        return false;\n    }\n}\n\n\n\u3053\u3046\u306a\u3063\u3066\u3057\u307e\u3063\u3066\u306f\u753b\u9762\u304b\u3089\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30af\u30ea\u30a2\u306f\u3067\u304d\u307e\u305b\u3093\u306e\u3067\u3001\u30b3\u30de\u30f3\u30c9\u3067\u3055\u304f\u3063\u3068\u524a\u9664\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u3087\u3046\u3002\nrm -rf var/cache/registry/*\n\nCS-Cart\u3067\u30a2\u30c9\u30aa\u30f3\u3092\u958b\u767a\u3057\u3066\u3044\u308b\u3068\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u30af\u30ea\u30a2\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u306a\u305c\u304b\u30ad\u30e3\u30c3\u30b7\u30e5\u304c\u30af\u30ea\u30a2\u3067\u304d\u306a\u3044\u554f\u984c\u306b\u906d\u9047\u3057\u307e\u3057\u305f\u3002\n\nCS-Cart\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30af\u30ea\u30a2\u6a5f\u80fd\u306f\u6700\u7d42\u7684\u306bfn.fs.php\u306e`fn_rm`\u95a2\u6570\u3092\u547c\u3093\u3067\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u5b9f\u88c5\u304c\u300c\u3072\u3068\u3064\u3067\u3082\u30d5\u30a1\u30a4\u30eb\u524a\u9664\u5931\u6557\u3057\u305f\u3089\u4e2d\u65ad\u3059\u308b\u300d\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u4e2d\u65ad\u3055\u308c\u3066\u3082\u3001\u753b\u9762\u306b\u306f\u300c\u304a\u77e5\u3089\u305b \u30ad\u30e3\u30c3\u30b7\u30e5\u304c\u30af\u30ea\u30a2\u3055\u308c\u307e\u3057\u305f\u300d\u3068\u3042\u305f\u304b\u3082\u3046\u307e\u304f\u3044\u3063\u3066\u3044\u308b\u3088\u3046\u306a\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u5618\u3063\u3071\u3061\u3067\u3059(\u82e6\u7b11)\u3002\n\n`fn_rm`\u95a2\u6570\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u30d5\u30a1\u30a4\u30eb\u3067\u3060\u3063\u305f\u3089`unlink`\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3060\u3063\u305f\u3089\u5b50\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u5e30\u547c\u3073\u51fa\u3057\u3067`unlink`\u3057\u3066\u304b\u3089\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092`rmdir`\u3059\u308b\u3068\u3044\u3063\u305f\u3001PHP\u3042\u308b\u3042\u308b\u306a\u30b3\u30fc\u30c9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u3088\u304f\u898b\u3066\u307f\u308b\u3068\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306e\u30d5\u30a1\u30a4\u30eb\u524a\u9664\u304c\u3072\u3068\u3064\u3067\u3082\u5931\u6557\u3057\u305f\u3089`return false`\u3057\u3066\u51e6\u7406\u3092\u4e2d\u65ad\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n```php\n/**\n * Recursively remove directory (or just a file)\n *\n * @param string $source\n * @param bool $delete_root\n * @param string $pattern\n * @return bool\n */\nfunction fn_rm($source, $delete_root = true, $pattern = '')\n{\n    // Simple copy for a file\n    if (is_file($source)) {\n        $res = true;\n        if (empty($pattern) || (!empty($pattern) && preg_match('/' . $pattern . '/', fn_basename($source)))) {\n            $res = @unlink($source);\n        }\n\n        return $res;\n    }\n\n    // Loop through the folder\n    if (is_dir($source) && $dir = dir($source)) {\n        while (false !== $entry = $dir->read()) {\n            // Skip pointers\n            if ($entry == '.' || $entry == '..') {\n                continue;\n            }\n             if (fn_rm($source . '/' . $entry, true, $pattern) == false) {\n                return false; /* \u3053\u3053\u3067\u8ae6\u3081\u3061\u3083\u3046\u2026 */\n            }\n        }\n        // Clean up\n        $dir->close();\n\n        return ($delete_root == true && empty($pattern)) ? @rmdir($source) : true;\n    } else {\n        return false;\n    }\n}\n\n```\n\n\u3053\u3046\u306a\u3063\u3066\u3057\u307e\u3063\u3066\u306f\u753b\u9762\u304b\u3089\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u30af\u30ea\u30a2\u306f\u3067\u304d\u307e\u305b\u3093\u306e\u3067\u3001\u30b3\u30de\u30f3\u30c9\u3067\u3055\u304f\u3063\u3068\u524a\u9664\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u3087\u3046\u3002\n\n```\nrm -rf var/cache/registry/*\n```\n", "tags": ["cs-cart"]}