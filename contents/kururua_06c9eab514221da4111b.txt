{"tags": ["JavaScript", "Chrome", "chrome-extension", "es7"], "context": "Chrome 53\u4ee5\u4e0a\u306e\u74b0\u5883\u3067\u3001\u8d77\u52d5\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u4e0b\u8a18\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u3001async/await\u304c\u4f7f\u7528\u53ef\u80fd\u3068\u306a\u308a\u307e\u3059\u3002(2016/07/06\u73fe\u5728)\n--js-flags=\"--harmony-async-await\"\n\n\u4ee5\u4e0b\u3001\u30b7\u30f3\u30d7\u30eb\u306a\u5b9f\u88c5\u4f8b\u3002\n(async() => {\n    await setLocalStorage({ aaa: 1, bbb: 2 });\n\n    let aaa = await getLocalStorage(\"aaa\");\n    let bbb = await getLocalStorage(\"bbb\");\n    let all = await getLocalStorage();\n\n    console.log(aaa);// 1\n    console.log(bbb);// 2\n    console.log(all);// {aaa: 1, bbb: 2}\n})();\n\nfunction setLocalStorage(obj) {\n    return new Promise( (resolve) => {\n        chrome.storage.local.set( obj, () => resolve() );\n    });\n}\n\nfunction getLocalStorage(key = null) {\n    return new Promise( (resolve) => {\n        chrome.storage.local.get(key, (item) => {\n            key ? resolve(item[key]) : resolve(item);\n        });\n    });\n}\n\nChrome 53\u4ee5\u4e0a\u306e\u74b0\u5883\u3067\u3001\u8d77\u52d5\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u4e0b\u8a18\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u3001async/await\u304c\u4f7f\u7528\u53ef\u80fd\u3068\u306a\u308a\u307e\u3059\u3002(2016/07/06\u73fe\u5728)\n\n```\n--js-flags=\"--harmony-async-await\"\n```\n\n\u4ee5\u4e0b\u3001\u30b7\u30f3\u30d7\u30eb\u306a\u5b9f\u88c5\u4f8b\u3002\n\n```JavaScript:\n(async() => {\n    await setLocalStorage({ aaa: 1, bbb: 2 });\n\n    let aaa = await getLocalStorage(\"aaa\");\n    let bbb = await getLocalStorage(\"bbb\");\n    let all = await getLocalStorage();\n\n    console.log(aaa);// 1\n    console.log(bbb);// 2\n    console.log(all);// {aaa: 1, bbb: 2}\n})();\n\nfunction setLocalStorage(obj) {\n    return new Promise( (resolve) => {\n        chrome.storage.local.set( obj, () => resolve() );\n    });\n}\n\nfunction getLocalStorage(key = null) {\n    return new Promise( (resolve) => {\n        chrome.storage.local.get(key, (item) => {\n            key ? resolve(item[key]) : resolve(item);\n        });\n    });\n}\n```\n\n"}