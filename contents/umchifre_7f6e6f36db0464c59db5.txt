{"context": " More than 1 year has passed since last update.Proxmox ve (proxmox)\u306e\u30af\u30e9\u30b9\u30bf\u74b0\u5883\u69cb\u7bc9\u306b\u3064\u3044\u3066\u8a18\u8f09\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u3092\u53c2\u7167\nhttps://pve.proxmox.com/wiki/Proxmox_VE_2.0_Cluster\n\u307e\u305a\u3001Proxmox ve (proxmox)\u306e\u30af\u30e9\u30b9\u30bf\u74b0\u5883\u306b\u306f\u6700\u4f4e3\u53f0\u306eProxmox ve (proxmox)\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\uff082\u53f0\u306e\u69cb\u7bc9\u624b\u9806\u3082\u3042\u308a\u307e\u3059\u304c\u63a8\u59683\u53f0\uff09\n\u901a\u5e38\u306e\u624b\u9806\u30672\u53f0\u306e\u30af\u30e9\u30b9\u30bf\u69cb\u6210\u3092\u3057\u305f\u5834\u5408\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u306eHA\u304c\u6709\u52b9\u306b\u306a\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n2\u53f0\u3067\u306e\u30af\u30e9\u30b9\u30bf\u69cb\u6210\u306f\u304a\u3044\u304a\u3044\u3084\u3063\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u307e\u305a\u306f\u57fa\u672c\u306e3\u53f0\u3067\u30af\u30e9\u30b9\u30bf\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\n\u30db\u30b9\u30c8\u540d\u3068IP\u30a2\u30c9\u30ec\u30b9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\n\u2460proxmox.local 192.168.222.128\n\u2461proxmox2.local 192.168.222.129\n\u2462proxmox3.local 192.168.222.130\n\u5404\u30ce\u30fc\u30c9\u306bTeraterm\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\nvi /etc/hosts\u3000\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u30ce\u30fc\u30c9\u9593\u3067\u540d\u524d\u89e3\u6c7a\u3067\u304d\u308b\u3088\u3046hosts\u306b\u8ffd\u8a18\u3057\u307e\u3059\u3002\n\u2460\n192.168.222.128 proxmox.local proxmox pvelocalhost\n192.168.222.129 proxmox2.local proxmox2\n192.168.222.130 proxmox3.local proxmox3\n\u2461\n192.168.222.129 proxmox2.local proxmox2 pvelocalhost\n192.168.222.128 proxmox.local proxmox\n192.168.222.130 proxmox3.local proxmox3\n\u2462\n192.168.222.130 proxmox3.local proxmox3 pvelocalhost\n192.168.222.128 proxmox.local proxmox\n192.168.222.129 proxmox2.local proxmox2\n\u2460\u306bTeraterm\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30af\u30e9\u30b9\u30bf[PROCLUSTER]\u3092\u4f5c\u6210\u3057\u307e\u3059\npvecm create PROCLUSTER\nroot@proxmox:~# pvecm create PROCLUSTER\nRestarting pve cluster filesystem: pve-cluster[dcdb] notice: wrote new cluster config '/etc/cluster/cluster.conf'\n.\nStarting cluster:\n   Checking if cluster has been disabled at boot... [  OK  ]\n   Checking Network Manager... [  OK  ]\n   Global setup... [  OK  ]\n   Loading kernel modules... [  OK  ]\n   Mounting configfs... [  OK  ]\n   Starting cman... [  OK  ]\n   Waiting for quorum... [  OK  ]\n   Starting fenced... [  OK  ]\n   Starting dlm_controld... [  OK  ]\n   Tuning DLM kernel config... [  OK  ]\n   Unfencing self... [  OK  ]\n\u2461\u2462\u306bTeraterm\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u2460\u306e\u30af\u30e9\u30b9\u30bf\u306b\u53c2\u52a0\u3057\u307e\u3059\u3002\npvecm add 192.168.222.128\n\u30d5\u30a3\u30f3\u30ac\u30fc\u30d7\u30ea\u30f3\u30c8\u306e\u78ba\u8a8d\u306fyes\n\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u2460\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u307e\u3059\u3002\nThe authenticity of host '192.168.222.128 (192.168.222.128)' can't be established.\nECDSA key fingerprint is\nAre you sure you want to continue connecting (yes/no)? y\nPlease type 'yes' or 'no': yes\nroot@192.168.222.128's password:\ncopy corosync auth key\nstopping pve-cluster service\nStopping pve cluster filesystem: pve-cluster.\nbackup old database\nStarting pve cluster filesystem : pve-cluster.\nStarting cluster:\n   Checking if cluster has been disabled at boot... [  OK  ]\n   Checking Network Manager... [  OK  ]\n   Global setup... [  OK  ]\n   Loading kernel modules... [  OK  ]\n   Mounting configfs... [  OK  ]\n   Starting cman... [  OK  ]\n   Waiting for quorum... [  OK  ]\n   Starting fenced... [  OK  ]\n   Starting dlm_controld... [  OK  ]\n   Tuning DLM kernel config... [  OK  ]\n   Unfencing self... [  OK  ]\ngenerating node certificates\nmerge known_hosts file\nrestart services\nRestarting PVE Daemon: pvedaemon.\nRestarting PVE API Proxy Server: pveproxy.\nsuccessfully added node 'proxmox2' to cluster.\n\u2460\u306eTeraterm\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30ce\u30fc\u30c9\u304c\u8ffd\u52a0\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\npvecm nodes\n1   M      4   2014-00-00 00:00:00  proxmox\n   2   M      8   2014-00-00 00:00:00  proxmox2\n   3   M     12   2014-00-00 00:00:00  proxmox3\n\u2460\u306bProxmox ve (proxmox)\u306eWeb\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u30fc\u914d\u4e0b\u306bPROXMOX2\u3068PROXMOX3\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u3002\n\u30b9\u30c8\u30ec\u30fc\u30b8\u8a2d\u5b9a\u3067\u5171\u6709\u3092\u300c\u306f\u3044\u300d\u306b\u3057\u3066\u3044\u308b\u3068\u4ed6\u306e\u30ce\u30fc\u30c9\u306b\u3082\u30b9\u30c8\u30ec\u30fc\u30b8\u30a2\u30af\u30bb\u30b9\u304c\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u30fc - HA\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068Cluster\u306e\u8a2d\u5b9a\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\nNFS\u30d5\u30a9\u30eb\u30c0\u306bCT\u3092\u4f5c\u6210\u3057\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002\n\u53f3\u4e0a\u306e\u30de\u30a4\u30b0\u30ec\u30fc\u30c8\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u4ed6\u306e\u30ce\u30fc\u30c9\u306b\u30aa\u30f3\u30e9\u30a4\u30f3\u3067\u79fb\u884c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\u30af\u30e9\u30b9\u30bf\u306e\u69cb\u6210\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u4e0b\u306b\u3042\u308a\u307e\u3059\u3002\n/etc/pve\n\u30af\u30e9\u30b9\u30bf\u89e3\u9664\u3057\u305f\u3044\u5834\u5408\u306f\u30af\u30e9\u30b9\u30bf\u3092\u4f5c\u6210\u3057\u305f\u30ce\u30fc\u30c9\u2460\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30ce\u30fc\u30c9\u3092\u89e3\u9664\u3057\u307e\u3059\u3002\npvecm delnode proxmox2\npvecm delnode proxmox3\nProxmox ve (proxmox)\u306e\u30af\u30e9\u30b9\u30bf\u74b0\u5883\u69cb\u7bc9\u306b\u3064\u3044\u3066\u8a18\u8f09\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u3092\u53c2\u7167\n\nhttps://pve.proxmox.com/wiki/Proxmox_VE_2.0_Cluster\n\n\n\u307e\u305a\u3001Proxmox ve (proxmox)\u306e\u30af\u30e9\u30b9\u30bf\u74b0\u5883\u306b\u306f\u6700\u4f4e3\u53f0\u306eProxmox ve (proxmox)\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\uff082\u53f0\u306e\u69cb\u7bc9\u624b\u9806\u3082\u3042\u308a\u307e\u3059\u304c\u63a8\u59683\u53f0\uff09\n\n\u901a\u5e38\u306e\u624b\u9806\u30672\u53f0\u306e\u30af\u30e9\u30b9\u30bf\u69cb\u6210\u3092\u3057\u305f\u5834\u5408\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u306eHA\u304c\u6709\u52b9\u306b\u306a\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n2\u53f0\u3067\u306e\u30af\u30e9\u30b9\u30bf\u69cb\u6210\u306f\u304a\u3044\u304a\u3044\u3084\u3063\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u307e\u305a\u306f\u57fa\u672c\u306e3\u53f0\u3067\u30af\u30e9\u30b9\u30bf\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\n\n\u30db\u30b9\u30c8\u540d\u3068IP\u30a2\u30c9\u30ec\u30b9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\n\u2460proxmox.local 192.168.222.128\n\u2461proxmox2.local 192.168.222.129\n\u2462proxmox3.local 192.168.222.130\n\n\u5404\u30ce\u30fc\u30c9\u306bTeraterm\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\nvi /etc/hosts\u3000\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n\u30ce\u30fc\u30c9\u9593\u3067\u540d\u524d\u89e3\u6c7a\u3067\u304d\u308b\u3088\u3046hosts\u306b\u8ffd\u8a18\u3057\u307e\u3059\u3002\n\u2460\n192.168.222.128 proxmox.local proxmox pvelocalhost\n192.168.222.129 proxmox2.local proxmox2\n192.168.222.130 proxmox3.local proxmox3\n\n\u2461\n192.168.222.129 proxmox2.local proxmox2 pvelocalhost\n192.168.222.128 proxmox.local proxmox\n192.168.222.130 proxmox3.local proxmox3\n\n\u2462\n192.168.222.130 proxmox3.local proxmox3 pvelocalhost\n192.168.222.128 proxmox.local proxmox\n192.168.222.129 proxmox2.local proxmox2\n\n\u2460\u306bTeraterm\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30af\u30e9\u30b9\u30bf[PROCLUSTER]\u3092\u4f5c\u6210\u3057\u307e\u3059\n\npvecm create PROCLUSTER\n\nroot@proxmox:~# pvecm create PROCLUSTER\nRestarting pve cluster filesystem: pve-cluster[dcdb] notice: wrote new cluster config '/etc/cluster/cluster.conf'\n.\nStarting cluster:\n   Checking if cluster has been disabled at boot... [  OK  ]\n   Checking Network Manager... [  OK  ]\n   Global setup... [  OK  ]\n   Loading kernel modules... [  OK  ]\n   Mounting configfs... [  OK  ]\n   Starting cman... [  OK  ]\n   Waiting for quorum... [  OK  ]\n   Starting fenced... [  OK  ]\n   Starting dlm_controld... [  OK  ]\n   Tuning DLM kernel config... [  OK  ]\n   Unfencing self... [  OK  ]\n\n\u2461\u2462\u306bTeraterm\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u2460\u306e\u30af\u30e9\u30b9\u30bf\u306b\u53c2\u52a0\u3057\u307e\u3059\u3002\n\npvecm add 192.168.222.128\n\n\u30d5\u30a3\u30f3\u30ac\u30fc\u30d7\u30ea\u30f3\u30c8\u306e\u78ba\u8a8d\u306fyes\n\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u2460\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\nThe authenticity of host '192.168.222.128 (192.168.222.128)' can't be established.\nECDSA key fingerprint is\nAre you sure you want to continue connecting (yes/no)? y\nPlease type 'yes' or 'no': yes\nroot@192.168.222.128's password:\ncopy corosync auth key\nstopping pve-cluster service\nStopping pve cluster filesystem: pve-cluster.\nbackup old database\nStarting pve cluster filesystem : pve-cluster.\nStarting cluster:\n   Checking if cluster has been disabled at boot... [  OK  ]\n   Checking Network Manager... [  OK  ]\n   Global setup... [  OK  ]\n   Loading kernel modules... [  OK  ]\n   Mounting configfs... [  OK  ]\n   Starting cman... [  OK  ]\n   Waiting for quorum... [  OK  ]\n   Starting fenced... [  OK  ]\n   Starting dlm_controld... [  OK  ]\n   Tuning DLM kernel config... [  OK  ]\n   Unfencing self... [  OK  ]\ngenerating node certificates\nmerge known_hosts file\nrestart services\nRestarting PVE Daemon: pvedaemon.\nRestarting PVE API Proxy Server: pveproxy.\nsuccessfully added node 'proxmox2' to cluster.\n\n\u2460\u306eTeraterm\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30ce\u30fc\u30c9\u304c\u8ffd\u52a0\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n pvecm nodes\n\n   1   M      4   2014-00-00 00:00:00  proxmox\n   2   M      8   2014-00-00 00:00:00  proxmox2\n   3   M     12   2014-00-00 00:00:00  proxmox3\n\n\n\u2460\u306bProxmox ve (proxmox)\u306eWeb\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\n\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u30fc\u914d\u4e0b\u306bPROXMOX2\u3068PROXMOX3\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u3002\n\n\n\n\u30b9\u30c8\u30ec\u30fc\u30b8\u8a2d\u5b9a\u3067\u5171\u6709\u3092\u300c\u306f\u3044\u300d\u306b\u3057\u3066\u3044\u308b\u3068\u4ed6\u306e\u30ce\u30fc\u30c9\u306b\u3082\u30b9\u30c8\u30ec\u30fc\u30b8\u30a2\u30af\u30bb\u30b9\u304c\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u30fc - HA\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068Cluster\u306e\u8a2d\u5b9a\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\nNFS\u30d5\u30a9\u30eb\u30c0\u306bCT\u3092\u4f5c\u6210\u3057\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002\n\u53f3\u4e0a\u306e\u30de\u30a4\u30b0\u30ec\u30fc\u30c8\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u4ed6\u306e\u30ce\u30fc\u30c9\u306b\u30aa\u30f3\u30e9\u30a4\u30f3\u3067\u79fb\u884c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30af\u30e9\u30b9\u30bf\u306e\u69cb\u6210\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u4e0b\u306b\u3042\u308a\u307e\u3059\u3002\n\n/etc/pve\n\n\n\u30af\u30e9\u30b9\u30bf\u89e3\u9664\u3057\u305f\u3044\u5834\u5408\u306f\u30af\u30e9\u30b9\u30bf\u3092\u4f5c\u6210\u3057\u305f\u30ce\u30fc\u30c9\u2460\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30ce\u30fc\u30c9\u3092\u89e3\u9664\u3057\u307e\u3059\u3002\n\npvecm delnode proxmox2\npvecm delnode proxmox3\n", "tags": ["proxmox"]}