{"tags": ["aws-cli", "AWS"], "context": " More than 1 year has passed since last update.AWS CLI\u52c9\u5f37\u4e2d\u306e\u5185\u5bb9\u3092\u307e\u3068\u3081\u3066\u3044\u304d\u307e\u3059\u3002\nPREV\uff1a0.5\u304b\u3089\u59cb\u3081\u308bAWS CLI\u5165\u9580 - \u2462VPC\u306e\u69cb\u7bc9\n\nhiroshik1985\u3055\u3093\u306e0\u304b\u3089\u59cb\u3081\u308bAWS\u5165\u9580\u2461\uff1aEC2\u7de8\u306e\u5185\u5bb9\u3092AWS CLI\u3067\u884c\u3044\u307e\u3059\uff08\u82e5\u5e72\u9055\u3046\u3068\u3053\u3082\u3042\u308a\u307e\u3059\uff09\u3002\n\n\u4e8b\u524d\u6e96\u5099\n\u30ad\u30fc\u30da\u30a2\u306e\u4f5c\u6210\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u306e\u4f5c\u6210\n\n\u30ad\u30fc\u30da\u30a2\u306e\u4f5c\u6210\n~/.ssh/\u306b\u30ad\u30fc\u30da\u30a2\u4f5c\u6210\n$ aws ec2 create-key-pair --key-name Test-key --query 'KeyMaterial' --output text > ~/.ssh/Test-key.pem\n\n\u305d\u306e\u307e\u307e\u3060\u3068\u4f7f\u7528\u3059\u308b\u3068\u304d\u306b\u6012\u3089\u308c\u308b\u306e\u3067\u6a29\u9650\u306e\u5909\u66f4\n$ chmod 400 ~/.ssh/Test-key.pem\n\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u306e\u4f5c\u6210\nvpc-id\u306f\u524d\u56de\u4f5c\u6210\u3057\u305fVPC\u3092\u4f7f\u7528\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u306e\u4f5c\u6210\n$ aws ec2 create-security-group --group-name Test-SG --description \"Test-SG\" --vpc-id vpc-@@@@@@@@\n{\n   \"GroupId\": \"sg-GGGGGGGG\"\n}\n\n\u30cd\u30fc\u30e0\u30bf\u30b0\u3092\u3064\u3051\u308b\n$ aws ec2 create-tags --resources sg-GGGGGGGG --tags Key=Name,Value=Test-SG\n\n\u3053\u306e\u307e\u307e\u3060\u3068\u30a4\u30f3\u30d0\u30a6\u30f3\u30c9\u306e\u901a\u4fe1\u304c\u5168\u3066\u62d2\u5426\u3055\u308c\u3066\u3044\u308b\u3002\n\u81ea\u8eab\u306eIP\u306e\u78ba\u8a8d\u3068\u3001\u81ea\u8eab\u304b\u3089\u306eSSH\u3068VPC\u5185\u306eHTTP(HTTPS)\u901a\u4fe1\u306e\u307f\u8a31\u53ef\u3059\u308b\u3002\nIP\u306e\u78ba\u8a8d\n$ curl http://checkip.amazonaws.com/\n***.***.***.***\n\n\u30db\u30ef\u30a4\u30c8\u30ea\u30b9\u30c8\u767b\u9332\n$ aws ec2 authorize-security-group-ingress --group-id sg-GGGGGGGG --protocol tcp --port 22 --cidr ***.***.***.***/32\n\n$ aws ec2 authorize-security-group-ingress --group-id sg-GGGGGGGG --protocol tcp --port 80 --cidr 10.0.0.0/16\n\n$ aws ec2 authorize-security-group-ingress --group-id sg-GGGGGGGG --protocol tcp --port 443 --cidr 10.0.0.0/16\n\n\nEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u4f5c\u6210\u30fb\u63a5\u7d9a\n\u3044\u3088\u3044\u3088\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u4f5c\u6210\n\nEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u4f5c\u6210\n\u4eca\u56de\u4f7f\u3046\u306e\u306fAmazon Linux AMI 2015.09.2 (HVM), SSD Volume Type\nimage-id\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304f\n\nsubnet-id\u306f\u524d\u56de\u4f5c\u6210\u3057\u305fsubnet\u3092\u4f7f\u7528\n$ aws ec2 run-instances --image-id ami-59bdb937 --count 1 --instance-type t2.micro --key-name Test-key --security-group-ids sg-GGGGGGGG --subnet-id subnet-AAAAAAAA --associate-public-ip-address\n\n################\u51fa\u529b\u7565################\n\n           \"VpcId\": \"vpc-@@@@@@@@\",\n           \"StateTransitionReason\": \"\",\n           \"InstanceId\": \"i-HHHHHHHH\",\n\n######################################\n\n\u30cd\u30fc\u30e0\u30bf\u30b0\u3092\u3064\u3051\u308b\n$ aws ec2 create-tags --resources i-HHHHHHHH --tags Key=Name,Value=Test-Server01\n\n\nEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u63a5\u7d9a\n\u524d\u3005\u56de\u3067\u89e6\u308c\u305f--query\u3092\u4f7f\u3063\u3066\u30d1\u30d6\u30ea\u30c3\u30afIP\u30a2\u30c9\u30ec\u30b9\u3092\u8abf\u3079\u3066\u307f\u307e\u3059\u3002\n$ aws ec2 describe-instances --instance-id i-HHHHHHHH --query 'Reservations[].Instances[].PublicIpAddress'\n[\n   \"***.***.***.***\"\n]\n\n\u4e0a\u8a18\u306eIP\u3067\u63a5\u7d9a\nssh -i ~/.ssh/Test-key.pem ec2-user@***.***.***.***\n\n\n\u9593\u9055\u3044\u3001\u6539\u5584\u70b9\u7b49\u3042\u308a\u307e\u3057\u305f\u3089\u3054\u6307\u6458\u304a\u9858\u3044\u3057\u307e\u3059\u3002\nNext\uff1a0.5\u304b\u3089\u59cb\u3081\u308bAWS CLI\u5165\u9580 - \u2464ELB\nAWS CLI\u52c9\u5f37\u4e2d\u306e\u5185\u5bb9\u3092\u307e\u3068\u3081\u3066\u3044\u304d\u307e\u3059\u3002\nPREV\uff1a**[0.5\u304b\u3089\u59cb\u3081\u308bAWS CLI\u5165\u9580 - \u2462VPC\u306e\u69cb\u7bc9](http://qiita.com/yarakaki/items/39c035d3d66918726c61)**\n* * *\n\n[hiroshik1985](http://qiita.com/hiroshik1985)\u3055\u3093\u306e[0\u304b\u3089\u59cb\u3081\u308bAWS\u5165\u9580\u2461\uff1aEC2\u7de8](http://qiita.com/hiroshik1985/items/f078a6a017d092a541cf)\u306e\u5185\u5bb9\u3092AWS CLI\u3067\u884c\u3044\u307e\u3059\uff08\u82e5\u5e72\u9055\u3046\u3068\u3053\u3082\u3042\u308a\u307e\u3059\uff09\u3002\n#\u4e8b\u524d\u6e96\u5099\n\u30ad\u30fc\u30da\u30a2\u306e\u4f5c\u6210\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u306e\u4f5c\u6210\n##\u30ad\u30fc\u30da\u30a2\u306e\u4f5c\u6210\n~/.ssh/\u306b\u30ad\u30fc\u30da\u30a2\u4f5c\u6210\n\n```:\n$ aws ec2 create-key-pair --key-name Test-key --query 'KeyMaterial' --output text > ~/.ssh/Test-key.pem\n```\n\n\u305d\u306e\u307e\u307e\u3060\u3068\u4f7f\u7528\u3059\u308b\u3068\u304d\u306b\u6012\u3089\u308c\u308b\u306e\u3067\u6a29\u9650\u306e\u5909\u66f4\n\n```:\n$ chmod 400 ~/.ssh/Test-key.pem\n```\n\n##\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u306e\u4f5c\u6210\nvpc-id\u306f[\u524d\u56de](http://qiita.com/yarakaki/items/39c035d3d66918726c61)\u4f5c\u6210\u3057\u305fVPC\u3092\u4f7f\u7528\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u306e\u4f5c\u6210\n\n```\n$ aws ec2 create-security-group --group-name Test-SG --description \"Test-SG\" --vpc-id vpc-@@@@@@@@\n{\n   \"GroupId\": \"sg-GGGGGGGG\"\n}\n```\n\n\u30cd\u30fc\u30e0\u30bf\u30b0\u3092\u3064\u3051\u308b\n\n```:\n$ aws ec2 create-tags --resources sg-GGGGGGGG --tags Key=Name,Value=Test-SG\n```\n\n\u3053\u306e\u307e\u307e\u3060\u3068\u30a4\u30f3\u30d0\u30a6\u30f3\u30c9\u306e\u901a\u4fe1\u304c\u5168\u3066\u62d2\u5426\u3055\u308c\u3066\u3044\u308b\u3002\n\u81ea\u8eab\u306eIP\u306e\u78ba\u8a8d\u3068\u3001\u81ea\u8eab\u304b\u3089\u306eSSH\u3068VPC\u5185\u306eHTTP(HTTPS)\u901a\u4fe1\u306e\u307f\u8a31\u53ef\u3059\u308b\u3002\n\nIP\u306e\u78ba\u8a8d\n\n```:\n$ curl http://checkip.amazonaws.com/\n***.***.***.***\n```\n\n\u30db\u30ef\u30a4\u30c8\u30ea\u30b9\u30c8\u767b\u9332\n\n```:\n$ aws ec2 authorize-security-group-ingress --group-id sg-GGGGGGGG --protocol tcp --port 22 --cidr ***.***.***.***/32\n\n$ aws ec2 authorize-security-group-ingress --group-id sg-GGGGGGGG --protocol tcp --port 80 --cidr 10.0.0.0/16\n\n$ aws ec2 authorize-security-group-ingress --group-id sg-GGGGGGGG --protocol tcp --port 443 --cidr 10.0.0.0/16\n```\n\n#EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u4f5c\u6210\u30fb\u63a5\u7d9a\n\n\u3044\u3088\u3044\u3088\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u4f5c\u6210\n\n##EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u4f5c\u6210\n\n\u4eca\u56de\u4f7f\u3046\u306e\u306fAmazon Linux AMI 2015.09.2 (HVM), SSD Volume Type\nimage-id\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304f\n![ami-id.png](https://qiita-image-store.s3.amazonaws.com/0/113901/33462a2e-18fa-bec0-4916-d6bcfded36a2.png)\n\n\nsubnet-id\u306f[\u524d\u56de](http://qiita.com/yarakaki/items/39c035d3d66918726c61)\u4f5c\u6210\u3057\u305fsubnet\u3092\u4f7f\u7528\n\n```:\n$ aws ec2 run-instances --image-id ami-59bdb937 --count 1 --instance-type t2.micro --key-name Test-key --security-group-ids sg-GGGGGGGG --subnet-id subnet-AAAAAAAA --associate-public-ip-address\n\n################\u51fa\u529b\u7565################\n\n           \"VpcId\": \"vpc-@@@@@@@@\",\n           \"StateTransitionReason\": \"\",\n           \"InstanceId\": \"i-HHHHHHHH\",\n\n######################################\n```\n\n\u30cd\u30fc\u30e0\u30bf\u30b0\u3092\u3064\u3051\u308b\n\n```:\n$ aws ec2 create-tags --resources i-HHHHHHHH --tags Key=Name,Value=Test-Server01\n```\n\n##EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u63a5\u7d9a\n\n[\u524d\u3005\u56de](http://qiita.com/yarakaki/items/dbd1c8a4feed2936107e)\u3067\u89e6\u308c\u305f--query\u3092\u4f7f\u3063\u3066\u30d1\u30d6\u30ea\u30c3\u30afIP\u30a2\u30c9\u30ec\u30b9\u3092\u8abf\u3079\u3066\u307f\u307e\u3059\u3002\n\n```:\n$ aws ec2 describe-instances --instance-id i-HHHHHHHH --query 'Reservations[].Instances[].PublicIpAddress'\n[\n   \"***.***.***.***\"\n]\n```\n\n\u4e0a\u8a18\u306eIP\u3067\u63a5\u7d9a\n\n```:\nssh -i ~/.ssh/Test-key.pem ec2-user@***.***.***.***\n```\n\n***\n\n\u9593\u9055\u3044\u3001\u6539\u5584\u70b9\u7b49\u3042\u308a\u307e\u3057\u305f\u3089\u3054\u6307\u6458\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\nNext\uff1a**[0.5\u304b\u3089\u59cb\u3081\u308bAWS CLI\u5165\u9580 - \u2464ELB](http://qiita.com/yarakaki/items/912de594faf5cdbe0946)**\n"}