{"context": " More than 1 year has passed since last update.Berkshelf\u3067cookbook\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001knife solo cook ${node}\u3067\u30ea\u30e2\u30fc\u30c8\u3067\nchef-solo\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u74b0\u5883\u3092Mac\u4e0a\u3067\u69cb\u7bc9\u3059\u308b\u624b\u9806\u3067\u3059\u3002\n\n\u524d\u63d0\n\nrbenv\u3092\u4f7f\u3046\u5834\u5408\nHomebrew\u306erbenv\u3067ruby 2.0.0-p0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u3068\u3044\u3046\u524d\u63d0\u3067\u3059\u30021.9.x\u3067\u3082\u5927\u4e08\u592b\u3067\u3059\u3002\n\nOmnibus Chef\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u3067ruby\u3068chef\u3092\u4e00\u62ec\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5834\u5408\nruby\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067ruby\u3068chef\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3044\u3046\u624b\u3082\u3042\u308a\u307e\u3059\u3002\ncurl -L http://www.opscode.com/chef/install.sh | sudo bash\n\n\u4e0a\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3067/opt/chef/embedded\u4ee5\u4e0b\u306bruby 1.9.3-p286\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u4f5c\u696d\u3067gem\u30b3\u30de\u30f3\u30c9\u306a\u3069\u3092\u4f7f\u3046\u305f\u3081\u306bPATH\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nexport PATH=/opt/chef/embedded/bin:$PATH\n\n\nchef\u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\nsudo mkdir /etc/chef\nsudo chown `whoami` /etc/chef\ncd /etc/chef\n\nrbenv\u3092\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408\u306f/etc/chef\u4ee5\u4e0b\u3067\u4f7f\u3046\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nrbenv local 2.0.0-p0\n\n\nbundler\u3067gem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nbundler\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\ngem install bundler\n\nGemfile\u3092\u4f5c\u3063\u3066bundler\u3067gem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\ncat <<'EOF' > Gemfile\nsource 'https://rubygems.org'\ngem 'chef'\ngem 'knife-solo', :github => 'matschaffer/knife-solo'\ngem 'berkshelf'\nEOF\n\nbundle --path vendor/bundle\n\n\u00bb \u3081\u3093\u3069\u304f\u3055\u3044 bundle exec \u3092\u7701\u7565\u3059\u308b\u65b9\u6cd5 TECHSCORE BLOG\u3092\u53c2\u8003\u306b\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\nbundle install --binstubs\n\nPATH\u306b./bin\u3092\u8ffd\u52a0\u3059\u308b\u306e\u306f\u6c17\u304c\u5f15\u3051\u305f\u306e\u3067\u3001/etc/chef\u306b\u3066./bin/knife\u306e\u3088\u3046\u306b\u5b9f\u884c\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\nknife\u306e\u8a2d\u5b9a\n./bin/knife configure\n\n\u6700\u5f8c\u306ePlease enter the path to a chef repository (or leave blank):\u306e\u307f /etc/chef\u3068\u5165\u529b\u3057\u3066\u4ed6\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306e\u307e\u307e\u306b\u3057\u307e\u3059\u3002\nknife solo cook ${node}\u3067\u306e\u8ee2\u9001\u5148\u306fknife-solo\u306egit (0.3.x)\u3060\u3068solo_path\u306e\u8a2d\u5b9a\u5024\u306b\u306a\u308a\u307e\u3059\u304c\u30010.2\u3060\u3068file_cache_path\u306e\u8a2d\u5b9a\u5024\u306b\u306a\u308a\u307e\u3059\u3002\n~/.chef/knife.rb\u306bsolo_path\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\ncat <<'EOF' >> ~/.chef/knife.rb\nknife[:solo_path] = '/etc/chef'\nEOF\n\n\nchef\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u521d\u671f\u5316\n\u4e00\u65e6/etc/chef/repo/\u306b\u4f5c\u3063\u3066/etc/chef/\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n./bin/knife solo init /etc/chef/repo\nmv /etc/chef/repo/* .\nrmdir repo\n\ncat <<'EOF' > /etc/chef/solo.rb\nfile_cache_path           \"/var/chef\"\ndata_bag_path             \"/etc/chef/data_bags\"\nencrypted_data_bag_secret \"/etc/chef/data_bag_key\"\ncookbook_path             [ \"/etc/chef/site-cookbooks\",\n                            \"/etc/chef/vendor/cookbooks\" ]\nrole_path                 \"/etc/chef/roles\"\nEOF\n\n\ngit\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066\u521d\u56de\u30b3\u30df\u30c3\u30c8\ncat <<'EOF' > .gitignore\n/bin\n/.bundle\n/.ruby-version\n/vendor\nEOF\n\ngit init\ngit add .\ngit commit -m 'first commit'\n\n\u4ee5\u964d\u3001\u9069\u5b9c\u533a\u5207\u308a\u306e\u826f\u3044\u6240\u3067git\u306b\u30d5\u30a1\u30a4\u30eb\u3092add\u3057\u3066commit\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nBerkshelf\u3067cookbook\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ncat <<'EOF' > Berksfile\nsite :opscode\n\ncookbook 'yum'\ncookbook 'nginx'\nEOF\n\nbundle exec berks install --path vendor/cookbooks\n\n\n\u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u306bchef-solo\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nBerkshelf\u306eVagrant\u9023\u643a\u306f\u4f7f\u308f\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002Vagrant\u306eVM\u3068\u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u3067\n\u540c\u3058\u624b\u9806\u3067chef-solo\u3092\u5b9f\u884c\u3057\u305f\u3044\u304b\u3089\u3067\u3059\u3002\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u306bchef-solo\u74b0\u5883\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u307e\u3059\u3002${node}\u306e\u90e8\u5206\u306f\u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u306e\u30db\u30b9\u30c8\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u4e88\u3081~/.ssh/config\u3067\u30db\u30b9\u30c8\u540d\u306b\u5bfe\u5fdc\u3059\u308b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u3066root\u30e6\u30fc\u30b6\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n./bin/knife solo prepare ${node}\n\n\n\u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u3067chef-solo\u3092\u5b9f\u884c\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067chef\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u306b\u540c\u671f\u3057\u3001chef-solo\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n./bin/knife solo cook ${node}\n\nBerkshelf\u3067cookbook\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001knife solo cook ${node}\u3067\u30ea\u30e2\u30fc\u30c8\u3067\nchef-solo\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u74b0\u5883\u3092Mac\u4e0a\u3067\u69cb\u7bc9\u3059\u308b\u624b\u9806\u3067\u3059\u3002\n\n## \u524d\u63d0\n\n### rbenv\u3092\u4f7f\u3046\u5834\u5408\n\nHomebrew\u306erbenv\u3067ruby 2.0.0-p0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u3068\u3044\u3046\u524d\u63d0\u3067\u3059\u30021.9.x\u3067\u3082\u5927\u4e08\u592b\u3067\u3059\u3002\n\n### Omnibus Chef\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u3067ruby\u3068chef\u3092\u4e00\u62ec\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5834\u5408\n\nruby\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067ruby\u3068chef\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3044\u3046\u624b\u3082\u3042\u308a\u307e\u3059\u3002\n\n```\ncurl -L http://www.opscode.com/chef/install.sh | sudo bash\n```\n\n\u4e0a\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3067/opt/chef/embedded\u4ee5\u4e0b\u306bruby 1.9.3-p286\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u4f5c\u696d\u3067gem\u30b3\u30de\u30f3\u30c9\u306a\u3069\u3092\u4f7f\u3046\u305f\u3081\u306bPATH\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\nexport PATH=/opt/chef/embedded/bin:$PATH\n```\n\n## chef\u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\n\n```\nsudo mkdir /etc/chef\nsudo chown `whoami` /etc/chef\ncd /etc/chef\n```\n\nrbenv\u3092\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408\u306f/etc/chef\u4ee5\u4e0b\u3067\u4f7f\u3046\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\nrbenv local 2.0.0-p0\n```\n\n## bundler\u3067gem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nbundler\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\ngem install bundler\n```\n\nGemfile\u3092\u4f5c\u3063\u3066bundler\u3067gem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\ncat <<'EOF' > Gemfile\nsource 'https://rubygems.org'\ngem 'chef'\ngem 'knife-solo', :github => 'matschaffer/knife-solo'\ngem 'berkshelf'\nEOF\n```\n\n```\nbundle --path vendor/bundle\n```\n\n[\u00bb \u3081\u3093\u3069\u304f\u3055\u3044 bundle exec \u3092\u7701\u7565\u3059\u308b\u65b9\u6cd5 TECHSCORE BLOG](http://www.techscore.com/blog/2012/10/22/%E3%82%81%E3%82%93%E3%81%A9%E3%81%8F%E3%81%95%E3%81%84-bundle-exec-%E3%82%92%E7%9C%81%E7%95%A5%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95/)\u3092\u53c2\u8003\u306b\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\nbundle install --binstubs\n```\n\nPATH\u306b./bin\u3092\u8ffd\u52a0\u3059\u308b\u306e\u306f\u6c17\u304c\u5f15\u3051\u305f\u306e\u3067\u3001/etc/chef\u306b\u3066./bin/knife\u306e\u3088\u3046\u306b\u5b9f\u884c\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n## knife\u306e\u8a2d\u5b9a\n\n```\n./bin/knife configure\n```\n\n\u6700\u5f8c\u306e```Please enter the path to a chef repository (or leave blank):```\u306e\u307f ```/etc/chef```\u3068\u5165\u529b\u3057\u3066\u4ed6\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306e\u307e\u307e\u306b\u3057\u307e\u3059\u3002\n\nknife solo cook ${node}\u3067\u306e\u8ee2\u9001\u5148\u306fknife-solo\u306egit (0.3.x)\u3060\u3068solo_path\u306e\u8a2d\u5b9a\u5024\u306b\u306a\u308a\u307e\u3059\u304c\u30010.2\u3060\u3068file_cache_path\u306e\u8a2d\u5b9a\u5024\u306b\u306a\u308a\u307e\u3059\u3002\n\n~/.chef/knife.rb\u306bsolo_path\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```\ncat <<'EOF' >> ~/.chef/knife.rb\nknife[:solo_path] = '/etc/chef'\nEOF\n```\n\n\n## chef\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u521d\u671f\u5316\n\n\u4e00\u65e6/etc/chef/repo/\u306b\u4f5c\u3063\u3066/etc/chef/\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n\n```\n./bin/knife solo init /etc/chef/repo\nmv /etc/chef/repo/* .\nrmdir repo\n\ncat <<'EOF' > /etc/chef/solo.rb\nfile_cache_path           \"/var/chef\"\ndata_bag_path             \"/etc/chef/data_bags\"\nencrypted_data_bag_secret \"/etc/chef/data_bag_key\"\ncookbook_path             [ \"/etc/chef/site-cookbooks\",\n                            \"/etc/chef/vendor/cookbooks\" ]\nrole_path                 \"/etc/chef/roles\"\nEOF\n```\n\n## git\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066\u521d\u56de\u30b3\u30df\u30c3\u30c8\n\n```\ncat <<'EOF' > .gitignore\n/bin\n/.bundle\n/.ruby-version\n/vendor\nEOF\n\ngit init\ngit add .\ngit commit -m 'first commit'\n```\n\n\u4ee5\u964d\u3001\u9069\u5b9c\u533a\u5207\u308a\u306e\u826f\u3044\u6240\u3067git\u306b\u30d5\u30a1\u30a4\u30eb\u3092add\u3057\u3066commit\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n## Berkshelf\u3067cookbook\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\ncat <<'EOF' > Berksfile\nsite :opscode\n\ncookbook 'yum'\ncookbook 'nginx'\nEOF\n\nbundle exec berks install --path vendor/cookbooks\n```\n\n## \u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u306bchef-solo\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\nBerkshelf\u306eVagrant\u9023\u643a\u306f\u4f7f\u308f\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002Vagrant\u306eVM\u3068\u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u3067\n\u540c\u3058\u624b\u9806\u3067chef-solo\u3092\u5b9f\u884c\u3057\u305f\u3044\u304b\u3089\u3067\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u306bchef-solo\u74b0\u5883\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u307e\u3059\u3002${node}\u306e\u90e8\u5206\u306f\u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u306e\u30db\u30b9\u30c8\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u4e88\u3081~/.ssh/config\u3067\u30db\u30b9\u30c8\u540d\u306b\u5bfe\u5fdc\u3059\u308b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u3066root\u30e6\u30fc\u30b6\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n./bin/knife solo prepare ${node}\n```\n\n## \u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u3067chef-solo\u3092\u5b9f\u884c\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067chef\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u306b\u540c\u671f\u3057\u3001chef-solo\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n./bin/knife solo cook ${node}\n```\n", "tags": ["OSX", "chef-solo", "Berkshelf"]}