{"tags": ["Java6", "Redis", "tomcat6"], "context": "Session\u306e\u5916\u90e8\u6c38\u7d9a\u5316\uff08Not Sticky Session\uff09\u306e\u305f\u3081\u306b\u3069\u3046\u3057\u305f\u3089\u826f\u3044\u304b\uff1f\u3000\u3068\u3044\u3046\u306e\u304c\u3053\u306e\u30dd\u30b9\u30c8\u3067\u3059\u3002\n\n\u74b0\u5883\n\nJava 1.6.0_45\nApache Tomcat 6.0.48\nRedis 3.2.7\n\n$ java -version\njava version \"1.6.0_45\"\nJava(TM) SE Runtime Environment (build 1.6.0_45-b06)\nJava HotSpot(TM) 64-Bit Server VM (build 20.45-b01, mixed mode)\n\n$ sh version.sh\nUsing CATALINA_BASE:   /opt/apache-tomcat-6.0.48\nUsing CATALINA_HOME:   /opt/apache-tomcat-6.0.48\nUsing CATALINA_TMPDIR: /opt/apache-tomcat-6.0.48/temp\nUsing JRE_HOME:        /usr\nUsing CLASSPATH:       /opt/apache-tomcat-6.0.48/bin/bootstrap.jar\nServer version: Apache Tomcat/6.0.48\nServer built:   Nov 7 2016 20:05:27 UTC\nServer number:  6.0.48.0\nOS Name:        Linux\nOS Version:     4.9.12-moby\nArchitecture:   amd64\nJVM Version:    1.6.0_45-b06\nJVM Vendor:     Sun Microsystems Inc.\n\n$ redis-server --version\nRedis server v=3.2.7 sha=00000000:0 malloc=jemalloc-4.4.0 bits=64 build=4b4d638eb6ec5175\n\n\n\u5bfe\u5fdc\njcoleman/tomcat-redis-session-manager: Redis-backed non-sticky session store for Apache Tomcat\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\nJar\u53d6\u5f97\n\ntomcat-redis-session-manager-1.2-tomcat-6.jar\n\n\n\n\u3053\u3053\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n\ncommons-pool-1.6.jar\n\n\n\n\u3053\u3053\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n\njedis-2.0.0.jar\n\n\n\n\u3053\u3053\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n\n\n\nJar\u914d\u7f6e\n${CATALINA_HOME}/bin\u914d\u4e0b\u306b\u53d6\u5f97\u3057\u305fJar\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\n\nConfig\u5909\u66f4\n${CATALINA_HOME}/conf\u914d\u4e0b\u306b\u3042\u308bcontext.xml\u306b\u4ee5\u4e0b\u3092\u8ffd\u8a18\u3057\u307e\u3059\u3002\n    <Valve className=\"com.radiadesign.catalina.session.RedisSessionHandlerValve\" />\n    <Manager className=\"com.radiadesign.catalina.session.RedisSessionManager\"\n         host=\"${redis host}\"\n         port=\"${redis port}\"\n    />\n\n${redis host}: Redis\u306eHost\n${redis port}: Redis\u306ePort\n\u3053\u308c\u3067Session\u3092Redis\u306b\u6c38\u7d9a\u5316\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\nSession\u306e\u5916\u90e8\u6c38\u7d9a\u5316\uff08Not Sticky Session\uff09\u306e\u305f\u3081\u306b\u3069\u3046\u3057\u305f\u3089\u826f\u3044\u304b\uff1f\u3000\u3068\u3044\u3046\u306e\u304c\u3053\u306e\u30dd\u30b9\u30c8\u3067\u3059\u3002\n\n## \u74b0\u5883\n\n* Java 1.6.0_45\n* Apache Tomcat 6.0.48\n* Redis 3.2.7\n\n```\n$ java -version\njava version \"1.6.0_45\"\nJava(TM) SE Runtime Environment (build 1.6.0_45-b06)\nJava HotSpot(TM) 64-Bit Server VM (build 20.45-b01, mixed mode)\n\n$ sh version.sh\nUsing CATALINA_BASE:   /opt/apache-tomcat-6.0.48\nUsing CATALINA_HOME:   /opt/apache-tomcat-6.0.48\nUsing CATALINA_TMPDIR: /opt/apache-tomcat-6.0.48/temp\nUsing JRE_HOME:        /usr\nUsing CLASSPATH:       /opt/apache-tomcat-6.0.48/bin/bootstrap.jar\nServer version: Apache Tomcat/6.0.48\nServer built:   Nov 7 2016 20:05:27 UTC\nServer number:  6.0.48.0\nOS Name:        Linux\nOS Version:     4.9.12-moby\nArchitecture:   amd64\nJVM Version:    1.6.0_45-b06\nJVM Vendor:     Sun Microsystems Inc.\n\n$ redis-server --version\nRedis server v=3.2.7 sha=00000000:0 malloc=jemalloc-4.4.0 bits=64 build=4b4d638eb6ec5175\n```\n\n## \u5bfe\u5fdc\n\n[jcoleman/tomcat-redis-session-manager: Redis-backed non-sticky session store for Apache Tomcat](https://github.com/jcoleman/tomcat-redis-session-manager)\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n### Jar\u53d6\u5f97\n\n* tomcat-redis-session-manager-1.2-tomcat-6.jar\n    * [\u3053\u3053](https://github.com/jcoleman/tomcat-redis-session-manager/downloads)\u304b\u3089[\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9](https://github.com/downloads/jcoleman/tomcat-redis-session-manager/tomcat-redis-session-manager-1.2-tomcat-6.jar)\u3057\u307e\u3059\u3002\n* commons-pool-1.6.jar\n    * [\u3053\u3053](https://mvnrepository.com/artifact/commons-pool/commons-pool/1.6)\u304b\u3089[\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9](http://central.maven.org/maven2/commons-pool/commons-pool/1.6/commons-pool-1.6.jar)\u3057\u307e\u3059\u3002\n* jedis-2.0.0.jar\n    * [\u3053\u3053](https://mvnrepository.com/artifact/redis.clients/jedis/2.0.0)\u304b\u3089[\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9](http://central.maven.org/maven2/redis/clients/jedis/2.0.0/jedis-2.0.0.jar)\u3057\u307e\u3059\u3002\n\n### Jar\u914d\u7f6e\n\n`${CATALINA_HOME}/bin`\u914d\u4e0b\u306b\u53d6\u5f97\u3057\u305fJar\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\n\n### Config\u5909\u66f4\n\n`${CATALINA_HOME}/conf`\u914d\u4e0b\u306b\u3042\u308b`context.xml`\u306b\u4ee5\u4e0b\u3092\u8ffd\u8a18\u3057\u307e\u3059\u3002\n\n```\n    <Valve className=\"com.radiadesign.catalina.session.RedisSessionHandlerValve\" />\n    <Manager className=\"com.radiadesign.catalina.session.RedisSessionManager\"\n         host=\"${redis host}\"\n         port=\"${redis port}\"\n    />\n```\n\n`${redis host}`: Redis\u306eHost\n`${redis port}`: Redis\u306ePort\n\n\u3053\u308c\u3067Session\u3092Redis\u306b\u6c38\u7d9a\u5316\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n"}