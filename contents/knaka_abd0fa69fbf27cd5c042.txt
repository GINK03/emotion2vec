{"context": " More than 1 year has passed since last update.Kobito \u3067\u66f8\u3044\u3066\u3044\u308b\u5185\u5bb9\u3092\u3001\u30ea\u30c3\u30c1\u30c6\u30ad\u30b9\u30c8\u306e\u307e\u307e\u4ed6\u3078\u30b3\u30d4\u30fc\u3057\u305f\u304f\u306a\u308b\u3053\u3068\u304c\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u3069\u3046\u3082 Kobito \u306e\u30d7\u30ec\u30d3\u30e5\u30fc\u306f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u60c5\u5831\u307e\u3067\u306f\u30b3\u30d4\u30fc\u3057\u3066\u304f\u308c\u306a\u3044\u3088\u3046\u3067\u3059\u306e\u3067\u3001\u30d6\u30e9\u30a6\u30b6\u3067\u8868\u793a\u3057\u3088\u3046\u3068\u601d\u3044\u3001Kobito \u30c7\u30fc\u30bf\u3092 HTML \u30d5\u30a1\u30a4\u30eb\u7fa4\u3078\u30c0\u30f3\u30d7\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001~/kobito/ \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e0b\u304b\u3089\u30bf\u30b0\u3067\u8fbf\u3063\u3066\u884c\u304f\u3088\u3046\u306a\u69cb\u9020\u3067\u30c0\u30f3\u30d7\u3057\u307e\u3059\u3002\n\n~/kobito/\n\n\n.stamp \u2026 \u524d\u56de\u5b9f\u884c\u6642\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\n.md/ \u2026 Markdown \u5f62\u5f0f\u306e\u30c7\u30fc\u30bf\n\n\n{zitem.zkey}.md\n\n\n.html/ \u2026 HTML \u5f62\u5f0f\u306e\u30c7\u30fc\u30bf\n\n\n{zitem.zkey}.html\n\u305d\u308c\u3068\u3001Kobito \u306e JS \u3084 CSS\n\n\n_all/\n\n\n\u5168 HTML \u3078\u306e\u30ea\u30f3\u30af\n\n\n{ztag.zname}/ \u2026 \u30bf\u30b0\u306b\u5c5e\u3059\u308b HTML \u3078\u306e\u30ea\u30f3\u30af\n...\n\n\n\n\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3092\u8a18\u9332\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u3001.html \u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u95a2\u3057\u3066\u306f\u3001\u66f4\u65b0\u304c\u3042\u3063\u305f\u3082\u306e\u3060\u3051\u3092\u518d\u751f\u6210\u3057\u307e\u3059\u3002\n\u30bf\u30b0\u4ee5\u4e0b\u306f\u3001\u5dee\u5206\u3092\u8003\u3048\u308b\u306e\u304c\u9762\u5012\u3060\u3063\u305f\u306e\u3067\u3001\u30c6\u30f3\u30dd\u30e9\u30ea\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u5168\u751f\u6210\u3057\u3066\u304b\u3089\u3001rsync(1) \u3067\u5dee\u5206\u3092\u30b3\u30d4\u30fc\u30fb\u524a\u9664\u3057\u3066\u3044\u307e\u3059\u3002\n\u6700\u521d\u306f\u30bf\u30b0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4e0b\u306e\u30ea\u30f3\u30af\u306b\u306f\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u7528\u3044\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u305d\u308c\u3060\u3068 ~/kobito/.html/ \u3078\u30b3\u30d4\u30fc\u3057\u305f Kobito \u306e CSS \u304c\u898b\u3048\u306a\u3044\u306e\u3068\u3001Dropbox \u304c\u5b9f\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u540c\u671f\u3057\u3084\u304c\u308b\u306e\u3067\u3001\u5b9f HTML \u30d5\u30a1\u30a4\u30eb\u306b\u3057\u3066\u3001meta \u30bf\u30b0\u306e Refresh \u304b JavaScript \u306e location.replace() \u3067\u98db\u3070\u3059\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\nkobito_dump \uff5e GitHub Gist\n\nkobito_dump\n#!/bin/bash\n# -*- coding: utf-8 -*-\n\n# db=~/Library/Kobito/Kobito.db # DB path for older version of Kobito\ndb=~/Library/Containers/com.qiita.Kobito//Data/Library/Kobito/Kobito.db\ndir=~/kobito/\n\nencode_filename() {\n  name=\"$@\"\n  name=\"${name//%/%37}\"\n  name=\"${name//\\//%47}\"\n  echo -n \"$name\"\n}\n\n# link_html() {\n#   target=\"$1\"\n#   link=\"$2\"\n#   ln -sf \"$target\" \"$link\"\n# }\n\nlink_html() {\n  target=\"$1\"\n  link=\"$2\"\n  title=\"$3\"\n  cat <<EOF > \"$link\"\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\"\n\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"ja\" lang=\"ja\">\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n<meta http-equiv=\"Content-Script-Type\" content=\"text/javascript\" />\n<title>Link to \"$title\"</title>\n<script type=\"text/javascript\">\nlocation.replace('$target');\n</script>\n<meta http-equiv=\"Refresh\" content=\"0; URL=$target\" />\n</head>\n<body>\n<noscript>\n<p><a href=\"$target\">$title</a></p>\n</noscript>\n</body>\n</html>\nEOF\n}\n\nIFS=$'\\t'\n\nmddir=\"$dir\"/.md\nhtmldir=\"$dir\"/.html\nmkdir -p $dir $mddir $htmldir\nrsync -azr /Applications/Kobito.app/Contents/Resources/ \"$htmldir\"/\nif test -r \"$dir\"/.stamp\nthen\n  stamp=$(cat $dir/.stamp)\nelse\n  stamp=0\nfi\ndate -u \"+%s\" > \"$dir\"/.stamp.new\n\necho Generating MD and HTML files.\necho \"SELECT zkey, zin_trash IS NOT NULL FROM zitem WHERE \n strftime('%s', '2001-01-01') + zupdated_at > $stamp;\" |\n  sqlite3 -separator $'\\t' $db |\n  while read -r key in_trash\n  do\n    if test \"$in_trash\" = \"1\"\n    then\n      rm -f $mddir/$key.md $htmldir/$key.html\n    else\n      echo \"SELECT zraw_body FROM zitem WHERE zkey = '$key';\" |\n        sqlite3 $db > $mddir/$key.md\n      echo \"SELECT zbody FROM zitem WHERE zkey = '$key';\" |\n        sqlite3 $db > $htmldir/$key.html\n    fi\n  done\necho Done.\n\necho Generating links to HTML files.\ntmpdir=$(mktemp -d /tmp/XXXXXX)\nmkdir -p $tmpdir/_all/\necho \"SELECT ztag.zname, zitem.zkey, zitem.ztitle FROM zitem, z_1tags, ztag\n WHERE zitem.zin_trash IS NULL AND ztag.z_pk = z_1tags.z_2tags AND\n zitem.z_pk = z_1tags.z_1items;\" |\n  sqlite3 -separator $'\\t' $db |\n  while read -r tag key title\n  do\n    path_title=$(encode_filename \"$title\")\n    link_html ../.html/$key.html \"$tmpdir\"/_all/\"$path_title.html\" \"$title\"\n    path_tag=$(encode_filename \"$tag\")\n    mkdir -p $tmpdir/\"$path_tag\"\n    link_html ../.html/$key.html \"$tmpdir\"/\"$path_tag\"/\"$path_title.html\" \"$title\"\n  done\necho Done.\necho Copying temporary files to target directory.\nrsync -azr --delete --exclude '.*' $tmpdir/ \"$dir\"/\nrm -fr $tmpdir\necho Done.\n\nmv \"$dir\"/.stamp.new \"$dir\"/.stamp\n\n\n\nKobito \u3067\u66f8\u3044\u3066\u3044\u308b\u5185\u5bb9\u3092\u3001\u30ea\u30c3\u30c1\u30c6\u30ad\u30b9\u30c8\u306e\u307e\u307e\u4ed6\u3078\u30b3\u30d4\u30fc\u3057\u305f\u304f\u306a\u308b\u3053\u3068\u304c\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u3069\u3046\u3082 Kobito \u306e\u30d7\u30ec\u30d3\u30e5\u30fc\u306f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u60c5\u5831\u307e\u3067\u306f\u30b3\u30d4\u30fc\u3057\u3066\u304f\u308c\u306a\u3044\u3088\u3046\u3067\u3059\u306e\u3067\u3001\u30d6\u30e9\u30a6\u30b6\u3067\u8868\u793a\u3057\u3088\u3046\u3068\u601d\u3044\u3001Kobito \u30c7\u30fc\u30bf\u3092 HTML \u30d5\u30a1\u30a4\u30eb\u7fa4\u3078\u30c0\u30f3\u30d7\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001~/kobito/ \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e0b\u304b\u3089\u30bf\u30b0\u3067\u8fbf\u3063\u3066\u884c\u304f\u3088\u3046\u306a\u69cb\u9020\u3067\u30c0\u30f3\u30d7\u3057\u307e\u3059\u3002\n\n* ~/kobito/\n\t* .stamp \u2026 \u524d\u56de\u5b9f\u884c\u6642\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\n\t* .md/ \u2026 Markdown \u5f62\u5f0f\u306e\u30c7\u30fc\u30bf\n\t\t* {zitem.zkey}.md\n\t* .html/ \u2026 HTML \u5f62\u5f0f\u306e\u30c7\u30fc\u30bf\n\t\t* {zitem.zkey}.html\n\t\t* \u305d\u308c\u3068\u3001Kobito \u306e JS \u3084 CSS\n\t* _all/\n\t\t* \u5168 HTML \u3078\u306e\u30ea\u30f3\u30af\n\t* {ztag.zname}/ \u2026 \u30bf\u30b0\u306b\u5c5e\u3059\u308b HTML \u3078\u306e\u30ea\u30f3\u30af\n\t* ...\n\n\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3092\u8a18\u9332\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u3001`.html` \u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u95a2\u3057\u3066\u306f\u3001\u66f4\u65b0\u304c\u3042\u3063\u305f\u3082\u306e\u3060\u3051\u3092\u518d\u751f\u6210\u3057\u307e\u3059\u3002\n\n\u30bf\u30b0\u4ee5\u4e0b\u306f\u3001\u5dee\u5206\u3092\u8003\u3048\u308b\u306e\u304c\u9762\u5012\u3060\u3063\u305f\u306e\u3067\u3001\u30c6\u30f3\u30dd\u30e9\u30ea\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u5168\u751f\u6210\u3057\u3066\u304b\u3089\u3001rsync(1) \u3067\u5dee\u5206\u3092\u30b3\u30d4\u30fc\u30fb\u524a\u9664\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u6700\u521d\u306f\u30bf\u30b0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4e0b\u306e\u30ea\u30f3\u30af\u306b\u306f\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u7528\u3044\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u305d\u308c\u3060\u3068 ~/kobito/.html/ \u3078\u30b3\u30d4\u30fc\u3057\u305f Kobito \u306e CSS \u304c\u898b\u3048\u306a\u3044\u306e\u3068\u3001Dropbox \u304c\u5b9f\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u540c\u671f\u3057\u3084\u304c\u308b\u306e\u3067\u3001\u5b9f HTML \u30d5\u30a1\u30a4\u30eb\u306b\u3057\u3066\u3001`meta` \u30bf\u30b0\u306e `Refresh` \u304b JavaScript \u306e `location.replace()` \u3067\u98db\u3070\u3059\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n[kobito_dump \uff5e GitHub Gist](https://gist.github.com/knaka/a35243302ca657a9331b)\n\n~~~~bash:kobito_dump\n#!/bin/bash\n# -*- coding: utf-8 -*-\n\n# db=~/Library/Kobito/Kobito.db # DB path for older version of Kobito\ndb=~/Library/Containers/com.qiita.Kobito//Data/Library/Kobito/Kobito.db\ndir=~/kobito/\n\nencode_filename() {\n  name=\"$@\"\n  name=\"${name//%/%37}\"\n  name=\"${name//\\//%47}\"\n  echo -n \"$name\"\n}\n\n# link_html() {\n#   target=\"$1\"\n#   link=\"$2\"\n#   ln -sf \"$target\" \"$link\"\n# }\n\nlink_html() {\n  target=\"$1\"\n  link=\"$2\"\n  title=\"$3\"\n  cat <<EOF > \"$link\"\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\"\n\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"ja\" lang=\"ja\">\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n<meta http-equiv=\"Content-Script-Type\" content=\"text/javascript\" />\n<title>Link to \"$title\"</title>\n<script type=\"text/javascript\">\nlocation.replace('$target');\n</script>\n<meta http-equiv=\"Refresh\" content=\"0; URL=$target\" />\n</head>\n<body>\n<noscript>\n<p><a href=\"$target\">$title</a></p>\n</noscript>\n</body>\n</html>\nEOF\n}\n\nIFS=$'\\t'\n\nmddir=\"$dir\"/.md\nhtmldir=\"$dir\"/.html\nmkdir -p $dir $mddir $htmldir\nrsync -azr /Applications/Kobito.app/Contents/Resources/ \"$htmldir\"/\nif test -r \"$dir\"/.stamp\nthen\n  stamp=$(cat $dir/.stamp)\nelse\n  stamp=0\nfi\ndate -u \"+%s\" > \"$dir\"/.stamp.new\n\necho Generating MD and HTML files.\necho \"SELECT zkey, zin_trash IS NOT NULL FROM zitem WHERE \n strftime('%s', '2001-01-01') + zupdated_at > $stamp;\" |\n  sqlite3 -separator $'\\t' $db |\n  while read -r key in_trash\n  do\n    if test \"$in_trash\" = \"1\"\n    then\n      rm -f $mddir/$key.md $htmldir/$key.html\n    else\n      echo \"SELECT zraw_body FROM zitem WHERE zkey = '$key';\" |\n        sqlite3 $db > $mddir/$key.md\n      echo \"SELECT zbody FROM zitem WHERE zkey = '$key';\" |\n        sqlite3 $db > $htmldir/$key.html\n    fi\n  done\necho Done.\n\necho Generating links to HTML files.\ntmpdir=$(mktemp -d /tmp/XXXXXX)\nmkdir -p $tmpdir/_all/\necho \"SELECT ztag.zname, zitem.zkey, zitem.ztitle FROM zitem, z_1tags, ztag\n WHERE zitem.zin_trash IS NULL AND ztag.z_pk = z_1tags.z_2tags AND\n zitem.z_pk = z_1tags.z_1items;\" |\n  sqlite3 -separator $'\\t' $db |\n  while read -r tag key title\n  do\n    path_title=$(encode_filename \"$title\")\n    link_html ../.html/$key.html \"$tmpdir\"/_all/\"$path_title.html\" \"$title\"\n    path_tag=$(encode_filename \"$tag\")\n    mkdir -p $tmpdir/\"$path_tag\"\n    link_html ../.html/$key.html \"$tmpdir\"/\"$path_tag\"/\"$path_title.html\" \"$title\"\n  done\necho Done.\necho Copying temporary files to target directory.\nrsync -azr --delete --exclude '.*' $tmpdir/ \"$dir\"/\nrm -fr $tmpdir\necho Done.\n\nmv \"$dir\"/.stamp.new \"$dir\"/.stamp\n~~~~\n", "tags": ["Qiita", "Kobito"]}