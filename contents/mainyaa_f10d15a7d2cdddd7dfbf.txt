{"context": "\n\nRaspberryPi\u3092\u6bcd\u8266\u306b\nRaspberryPi\u304c\u3069\u3093\u306a\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u3044\u3088\u3046\u3068\u3001raspi\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u8abf\u3079\u308b\u3053\u3068\u306a\u304fmacbook\u304b\u3089ssh\u63a5\u7d9a\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\u3053\u308c\u3067\u3001\u5916\u51fa\u5148\u3067\u30ce\u30de\u30c9\u3057\u3066\u3066\u3082\u5bb6\u306b\u3042\u308braspi\u306e\u72b6\u614b\u304c\u898b\u308c\u308b\u3057\u3001\u958b\u767a\u3082\u3067\u304d\u3061\u3083\u3046\u305e\nGithub\uff1ahttps://github.com/mainyaa/RaspberryPi-Mothership\n\n\u5fc5\u8981\u306a\u3082\u306e\nAWS/GCE\u306bmicro\u3084nano\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3002\u6708\u984d300\u5186\u3050\u3089\u3044\n\n\u7c21\u5358\u306a\u8aac\u660e\nraspi\u304b\u3089ssh-tunnel\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u5e38\u306bssh Portforward\u3057\u3066\u3044\u308b\u72b6\u614b\u306b\u3057\u307e\u3059\u3002\u3044\u308f\u3086\u308bSSH Tunnel\u3067\u3059\u3002\n\n[macbook] <-> [(port:22)ssh-tunnel(port:20022)] <-> [raspi]\n\n\u74b0\u5883\u69cb\u7bc9\n\nraspi\n\n\nssh-keygen\n\ncat ~/.ssh/id_rsa.pub\n\nssh\u516c\u958b\u9375\u3092\u30b3\u30d4\u30fc\n\n\n\n\nssh-tunnel\n\n\nssh-tunnel\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u7acb\u3061\u4e0a\u3052\u3001\u30bf\u30a4\u30d7\u306fmicro\u3084nano\nssh\u63a5\u7d9a\u3057\u3001pi\u30e6\u30fc\u30b6\u30fc\u8ffd\u52a0\u3001ssh\u516c\u958b\u9375\u3092\u8cbc\u308a\u4ed8\u3051\n\n\nssh ssh-tunnel\nuseradd -s /bin/zsh -u 10000 -m -d /home/users/pi pi\nsudo su - pi\nmkdir .ssh\n\nvim .ssh/authorized_keys\n\nssh\u516c\u958b\u9375\u3092\u5f35\u308a\u4ed8\u3051\n\n\n\n\n\n\nmacbook\n\n\n~/.ssh/config\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3002[]\u306e\u90e8\u5206\u306f\u9069\u5b9c\u66f8\u304d\u63db\u3048\n\n\n~/.ssh/config\nHost ssh-tunnel\n  StrictHostKeyChecking no\n  UserKnownHostsFile /dev/null\n  User pi\n  Hostname [SSH-TUNNEL IP]\n  LogLevel QUIET\n  IdentityFile ~/.ssh/google_compute_engine\n\n\n\n\u7e4b\u304c\u308b\u304b\u78ba\u8a8d\n\n\nssh ssh-tunnel\n\n\n\n\nraspi\n\n\n~/.ssh/config\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3002[]\u306e\u90e8\u5206\u306f\u9069\u5b9c\u66f8\u304d\u63db\u3048\n\n\n~/.ssh/config\nHost ssh-tunnel\n  StrictHostKeyChecking no\n  UserKnownHostsFile /dev/null\n  User [USERNAME]\n  Hostname [SSH-TUNNEL IP]\n  LogLevel QUIET\n  IdentityFile ~/.ssh/google_compute_engine\n\n\n\n\u7e4b\u304c\u308b\u304b\u78ba\u8a8d\n\n\nssh ssh-tunnel\n\n\n \u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8ffd\u52a0\u3002Debian\u306e\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u7528\u610f\u3059\u308b\u306e\u306f\u9762\u5012\u304f\u3055\u3044\u304b\u3089Github\u306b\u3042\u3052\u3066\u304a\u304d\u307e\u3057\u305f\n\n\nsudo apt-get install -y autossh\ngit clone https://github.com/mainyaa/RaspberryPi-Mothership.git\nsudo cp ./RaspberryPi-Mothership/init.d/ssh_tunnel /etc/init.d/\nsudo cp ./RaspberryPi-Mothership/sbin/ssh_tunnel /usr/sbin/\nsudo insserv ssh_tunnel\nsudo reboot\n\n\n\n\nmacbook\uff08\u5b9f\u969b\u306b\u7e4b\u3044\u3067\u898b\u308b\uff09\n\n1\u5ea6ssh-tunnel\u306b\u63a5\u7d9a\u3002\uff08ssh-tunnel\u304cGCE\u306e\u5834\u5408\u306e\u307f)\n\n\ngcloud compute --project \"[PROJECT_ID]\" ssh --zone \"asia-east1-b\" \"ssh-tunnel\"\n\n\n\n\nmacbook\u304b\u3089raspi\u306b\u63a5\u7d9a\n\nssh -o 'ProxyCommand ssh ssh-tunnel nc %h %p' -p 20022 pi@localhost\n\n\n\u3053\u308c\u3067RaspberryPi\u304c\u6bcd\u8266\u306b\u306a\u308a\u307e\u3057\u305f\uff01\u3069\u3053\u304b\u3089\u3067\u3082ssh-tunnel\u3054\u3057\u306b\u7e4b\u304c\u308b!\n\n\n\u3064\u3063\u3053\u307f\u5927\u6b53\u8fce\n\u9593\u9055\u3063\u3066\u305f\u308a\u3001\u3082\u3063\u3068\u4fbf\u5229\u306a\u65b9\u6cd5\u304c\u3042\u3063\u305f\u3089\u6559\u3048\u3066\u4e0b\u3055\u3044\uff01PullReq\u3082\u6b53\u8fce\u3067\u3059\uff01\n\n\u52c9\u5f37\u4f1a&\u3082\u304f\u3082\u304f\u4f1a\u3084\u308a\u307e\u3059\n5/15\u306bRaspberry Pi\u52c9\u5f37\u4f1a\uff06\u3082\u304f\u3082\u304f\u4f1a\u3092\u958b\u50ac\u3057\u307e\u3059\u3002\n\u521d\u5fc3\u8005\u3082\u305d\u3046\u3058\u3083\u306a\u3044\u65b9\u3082Raspberry Pi\u3067\u5b66\u3093\u3067\u904a\u307c\u3046\u3068\u3044\u3046\u3086\u308b\u3044\u4f1a\u3067\u3059\u3002\u767a\u8868\u8005\u52df\u96c6\u4e2d\n\u52c9\u5f37\u4f1a\u3059\u308b\u3068Raspberry Pi\u3067\u904a\u3073\u305f\u304f\u306a\u308b\u3088\u306d\u3002\u3058\u3083\u3042\u3001\u52c9\u5f37\u4f1a\u306e\u3042\u3068\u306b\u3082\u304f\u3082\u304f\u3057\u305f\u3089\u3044\u3044\u3058\u3083\u306a\u3044\uff01\u3068\u3044\u3046\u3053\u3068\u3067\u3001\uff12\u90e8\u69cb\u6210\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n# RaspberryPi\u3092\u6bcd\u8266\u306b\n\nRaspberryPi\u304c\u3069\u3093\u306a\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u3044\u3088\u3046\u3068\u3001raspi\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u8abf\u3079\u308b\u3053\u3068\u306a\u304fmacbook\u304b\u3089ssh\u63a5\u7d9a\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\u3053\u308c\u3067\u3001\u5916\u51fa\u5148\u3067\u30ce\u30de\u30c9\u3057\u3066\u3066\u3082\u5bb6\u306b\u3042\u308braspi\u306e\u72b6\u614b\u304c\u898b\u308c\u308b\u3057\u3001\u958b\u767a\u3082\u3067\u304d\u3061\u3083\u3046\u305e\nGithub\uff1ahttps://github.com/mainyaa/RaspberryPi-Mothership\n\n## \u5fc5\u8981\u306a\u3082\u306e\n\nAWS/GCE\u306bmicro\u3084nano\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3002\u6708\u984d300\u5186\u3050\u3089\u3044\n\n## \u7c21\u5358\u306a\u8aac\u660e\n\nraspi\u304b\u3089ssh-tunnel\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u5e38\u306bssh Portforward\u3057\u3066\u3044\u308b\u72b6\u614b\u306b\u3057\u307e\u3059\u3002\u3044\u308f\u3086\u308bSSH Tunnel\u3067\u3059\u3002\n\n### [macbook] <-> [(port:22)ssh-tunnel(port:20022)] <-> [raspi]\n\n\n## \u74b0\u5883\u69cb\u7bc9\n\n### **raspi**\n  - `ssh-keygen`\n  - `cat ~/.ssh/id_rsa.pub`\n    - ssh\u516c\u958b\u9375\u3092\u30b3\u30d4\u30fc\n\n### **ssh-tunnel**\n\n  - ssh-tunnel\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u7acb\u3061\u4e0a\u3052\u3001\u30bf\u30a4\u30d7\u306fmicro\u3084nano\n  - ssh\u63a5\u7d9a\u3057\u3001**pi**\u30e6\u30fc\u30b6\u30fc\u8ffd\u52a0\u3001ssh\u516c\u958b\u9375\u3092\u8cbc\u308a\u4ed8\u3051\n    - `ssh ssh-tunnel`\n    - `useradd -s /bin/zsh -u 10000 -m -d /home/users/pi pi`\n    - `sudo su - pi`\n    - `mkdir .ssh`\n    - `vim .ssh/authorized_keys`\n      - ssh\u516c\u958b\u9375\u3092\u5f35\u308a\u4ed8\u3051\n\n### **macbook**\n  - ~/.ssh/config\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3002[]\u306e\u90e8\u5206\u306f\u9069\u5b9c\u66f8\u304d\u63db\u3048\n\n```lang:~/.ssh/config\nHost ssh-tunnel\n  StrictHostKeyChecking no\n  UserKnownHostsFile /dev/null\n  User pi\n  Hostname [SSH-TUNNEL IP]\n  LogLevel QUIET\n  IdentityFile ~/.ssh/google_compute_engine\n```\n\n  - \u7e4b\u304c\u308b\u304b\u78ba\u8a8d\n    - `ssh ssh-tunnel`\n\n### **raspi**\n\n  - ~/.ssh/config\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3002[]\u306e\u90e8\u5206\u306f\u9069\u5b9c\u66f8\u304d\u63db\u3048\n\n```lang:~/.ssh/config\nHost ssh-tunnel\n  StrictHostKeyChecking no\n  UserKnownHostsFile /dev/null\n  User [USERNAME]\n  Hostname [SSH-TUNNEL IP]\n  LogLevel QUIET\n  IdentityFile ~/.ssh/google_compute_engine\n```\n\n  - \u7e4b\u304c\u308b\u304b\u78ba\u8a8d\n    - `ssh ssh-tunnel`\n  -  \u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8ffd\u52a0\u3002Debian\u306e\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u7528\u610f\u3059\u308b\u306e\u306f\u9762\u5012\u304f\u3055\u3044\u304b\u3089Github\u306b\u3042\u3052\u3066\u304a\u304d\u307e\u3057\u305f\n    - `sudo apt-get install -y autossh`\n    - `git clone https://github.com/mainyaa/RaspberryPi-Mothership.git`\n    - `sudo cp ./RaspberryPi-Mothership/init.d/ssh_tunnel /etc/init.d/`\n    - `sudo cp ./RaspberryPi-Mothership/sbin/ssh_tunnel /usr/sbin/`\n    - `sudo insserv ssh_tunnel`\n    - `sudo reboot`\n\n### **macbook**\uff08\u5b9f\u969b\u306b\u7e4b\u3044\u3067\u898b\u308b\uff09\n  - 1\u5ea6ssh-tunnel\u306b\u63a5\u7d9a\u3002\uff08ssh-tunnel\u304cGCE\u306e\u5834\u5408\u306e\u307f)\n      - `gcloud compute --project \"[PROJECT_ID]\" ssh --zone \"asia-east1-b\" \"ssh-tunnel\"`\n\n## macbook\u304b\u3089raspi\u306b\u63a5\u7d9a\n\n### **`ssh -o 'ProxyCommand ssh ssh-tunnel nc %h %p' -p 20022 pi@localhost`**\n  - \u3053\u308c\u3067RaspberryPi\u304c\u6bcd\u8266\u306b\u306a\u308a\u307e\u3057\u305f\uff01\u3069\u3053\u304b\u3089\u3067\u3082ssh-tunnel\u3054\u3057\u306b\u7e4b\u304c\u308b!\n\n## \u3064\u3063\u3053\u307f\u5927\u6b53\u8fce\n\n\u9593\u9055\u3063\u3066\u305f\u308a\u3001\u3082\u3063\u3068\u4fbf\u5229\u306a\u65b9\u6cd5\u304c\u3042\u3063\u305f\u3089\u6559\u3048\u3066\u4e0b\u3055\u3044\uff01PullReq\u3082\u6b53\u8fce\u3067\u3059\uff01\n\n# \u52c9\u5f37\u4f1a&\u3082\u304f\u3082\u304f\u4f1a\u3084\u308a\u307e\u3059\n\n5/15\u306b[Raspberry Pi\u52c9\u5f37\u4f1a\uff06\u3082\u304f\u3082\u304f\u4f1a](http://connpass.com/event/30585/)\u3092\u958b\u50ac\u3057\u307e\u3059\u3002\n\u521d\u5fc3\u8005\u3082\u305d\u3046\u3058\u3083\u306a\u3044\u65b9\u3082Raspberry Pi\u3067\u5b66\u3093\u3067\u904a\u307c\u3046\u3068\u3044\u3046\u3086\u308b\u3044\u4f1a\u3067\u3059\u3002**\u767a\u8868\u8005\u52df\u96c6\u4e2d**\n\n\u52c9\u5f37\u4f1a\u3059\u308b\u3068Raspberry Pi\u3067\u904a\u3073\u305f\u304f\u306a\u308b\u3088\u306d\u3002\u3058\u3083\u3042\u3001\u52c9\u5f37\u4f1a\u306e\u3042\u3068\u306b\u3082\u304f\u3082\u304f\u3057\u305f\u3089\u3044\u3044\u3058\u3083\u306a\u3044\uff01\u3068\u3044\u3046\u3053\u3068\u3067\u3001\uff12\u90e8\u69cb\u6210\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n", "tags": ["RaspberryPi", "Network", "Linux"]}