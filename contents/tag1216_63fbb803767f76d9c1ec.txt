{"tags": ["JavaScript", "knockoutjs", "\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7"], "context": "\u3053\u3053\u4e00\u30f6\u6708\u307b\u3069\u306e\u9593\u306b\u305f\u304f\u3055\u3093\u306e\u30ba\u30f3\u30c9\u30b3\u30b7\u30b9\u30c6\u30e0\u304c\u4e16\u306b\u51fa\u3066\u304d\u307e\u3057\u305f\u304c\u3001\u304a\u5ba2\u69d8\u304b\u3089\u306e\u300c\u30c9\u30b3\u30e2\u5149\u306b\u5bfe\u5fdc\u3057\u3066\u307b\u3057\u3044\u300d\u3068\u3044\u3046\u3054\u8981\u671b\u306b\u5bfe\u5fdc\u3067\u304d\u308b\u30ba\u30f3\u30c9\u30b3\u304c\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u81ea\u5206\u3067\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\nhttps://jsfiddle.net/tag1216/e7m9ugwk/\n\n\u30c6\u30ad\u30b9\u30c8\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u6587\u8a00\u3092\u5909\u66f4\u3059\u308b\u3068\u3001\u5b9f\u884c\u4e2d\u3067\u3082\u30ad\u30e8\u30b7\u767a\u52d5\u5f8c\u3067\u3082\u5909\u66f4\u304c\u5373\u53cd\u6620\u3055\u308c\u307e\u3059\u3002\n\nhtml\n<div>\n  <input type=\"text\" data-bind=\"textInput: zun\"/>\n  <input type=\"text\" data-bind=\"textInput: doko\"/>\n  <input type=\"text\" data-bind=\"textInput: kiyoshi\"/>\n</div>\n<div>\n  interval(ms):<input type=\"text\" data-bind=\"value: interval\"/>\n</div>\n<div>\n  <button data-bind=\"click: start\">start</button>\n</div>\n\n<div data-bind=\"foreach: results\">\n  <span data-bind=\"text: $data\"></span>\n</div>\n\n<div class=\"completed\">\n  <span data-bind=\"text: kiyoshi, visible: isCompleted\"></span>\n</div>\n\n\n\nJavaScript\nvar ZundokoViewModel = function() {\n  this.zun = ko.observable(\"\u30ba\u30f3\");\n  this.doko = ko.observable(\"\u30c9\u30b3\");\n  this.kiyoshi = ko.observable(\"\u30ad\u30e8\u30b7!\");\n  this.pattern = [this.zun, this.zun, this.zun, this.zun, this.doko];\n  this.interval = ko.observable(500);\n  this.results = ko.observableArray();\n\n  this.start = function() {\n    this.results.removeAll();\n    this.next();\n  };\n  this.next = function() {\n    this.results.push(Math.random() < 0.5 ? this.zun : this.doko);\n    if (!this.isCompleted()) {\n      setTimeout(this.next.bind(this), this.interval());\n    }\n  };\n  this.isCompleted = ko.computed(function() {\n    var len = this.results().length;\n    if (len < this.pattern.length) return false;\n    var tails = this.results().slice(len - this.pattern.length);\n    for (i = 0; i < this.pattern.length; i++) {\n      if (tails[i] != this.pattern[i]) return false;\n    }\n    return true;\n  }, this);\n};\n\nvar viewModel = new ZundokoViewModel();\n\nko.applyBindings(viewModel);\n\n\n\nknockout.js\u306e\u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30c6\u30ad\u30b9\u30c8\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u306b\u306f'textInput'\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u5165\u529b\u3092\u5373\u53cd\u6620\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\uff08value\u3060\u3068Enter\u3092\u62bc\u3057\u305f\u6642\u3001\u30d5\u30a9\u30fc\u30ab\u30b9\u304c\u5916\u308c\u305f\u6642\u306b\u3057\u304b\u53cd\u6620\u3055\u308c\u307e\u305b\u3093\uff09  \n<input type=\"text\" data-bind=\"textInput: zun\"/>\n\n\n\n\u30e9\u30f3\u30c0\u30e0\u306b\u9078\u629e\u3057\u305f\u30ba\u30f3\u30c9\u30b3\u306fobservableArray(results\u30d7\u30ed\u30d1\u30c6\u30a3)\u306b\u683c\u7d0d\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u969b\u3001\u30d0\u30a4\u30f3\u30c9\u3055\u308c\u305f\u5024(this.zun())\u3067\u306f\u306a\u304fobservable\u30aa\u30d6\u30b8\u30a7\u30af\u30c8(this.zun)\u3092\u76f4\u63a5\u683c\u7d0d\u3059\u308b\u3053\u3068\u3067\u3001\u5024\u306e\u5909\u66f4\u304c\u5373\u53cd\u6620\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002  \nthis.results.push(Math.random() < 0.5 ? this.zun : this.doko);\n\n\n\n\u3053\u3053\u4e00\u30f6\u6708\u307b\u3069\u306e\u9593\u306b\u305f\u304f\u3055\u3093\u306e\u30ba\u30f3\u30c9\u30b3\u30b7\u30b9\u30c6\u30e0\u304c\u4e16\u306b\u51fa\u3066\u304d\u307e\u3057\u305f\u304c\u3001\u304a\u5ba2\u69d8\u304b\u3089\u306e\u300c\u30c9\u30b3\u30e2\u5149\u306b\u5bfe\u5fdc\u3057\u3066\u307b\u3057\u3044\u300d\u3068\u3044\u3046\u3054\u8981\u671b\u306b\u5bfe\u5fdc\u3067\u304d\u308b\u30ba\u30f3\u30c9\u30b3\u304c\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u81ea\u5206\u3067\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\nhttps://jsfiddle.net/tag1216/e7m9ugwk/\n\n<img width=\"548\" alt=\"knockout_js\u3066\u3099\u30b9\u3099\u30f3\u30c8\u3099\u30b3\u30ad\u30e8\u30b7_-_JSFiddle.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/35192/e33e21c7-bbc3-bd87-f25b-75390903f713.png\">\n\n\u30c6\u30ad\u30b9\u30c8\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u6587\u8a00\u3092\u5909\u66f4\u3059\u308b\u3068\u3001\u5b9f\u884c\u4e2d\u3067\u3082\u30ad\u30e8\u30b7\u767a\u52d5\u5f8c\u3067\u3082\u5909\u66f4\u304c\u5373\u53cd\u6620\u3055\u308c\u307e\u3059\u3002\n\n```html:html\n<div>\n  <input type=\"text\" data-bind=\"textInput: zun\"/>\n  <input type=\"text\" data-bind=\"textInput: doko\"/>\n  <input type=\"text\" data-bind=\"textInput: kiyoshi\"/>\n</div>\n<div>\n  interval(ms):<input type=\"text\" data-bind=\"value: interval\"/>\n</div>\n<div>\n  <button data-bind=\"click: start\">start</button>\n</div>\n\n<div data-bind=\"foreach: results\">\n  <span data-bind=\"text: $data\"></span>\n</div>\n\n<div class=\"completed\">\n  <span data-bind=\"text: kiyoshi, visible: isCompleted\"></span>\n</div>\n```\n\n```js:JavaScript\nvar ZundokoViewModel = function() {\n  this.zun = ko.observable(\"\u30ba\u30f3\");\n  this.doko = ko.observable(\"\u30c9\u30b3\");\n  this.kiyoshi = ko.observable(\"\u30ad\u30e8\u30b7!\");\n  this.pattern = [this.zun, this.zun, this.zun, this.zun, this.doko];\n  this.interval = ko.observable(500);\n  this.results = ko.observableArray();\n\n  this.start = function() {\n    this.results.removeAll();\n    this.next();\n  };\n  this.next = function() {\n    this.results.push(Math.random() < 0.5 ? this.zun : this.doko);\n    if (!this.isCompleted()) {\n      setTimeout(this.next.bind(this), this.interval());\n    }\n  };\n  this.isCompleted = ko.computed(function() {\n    var len = this.results().length;\n    if (len < this.pattern.length) return false;\n    var tails = this.results().slice(len - this.pattern.length);\n    for (i = 0; i < this.pattern.length; i++) {\n      if (tails[i] != this.pattern[i]) return false;\n    }\n    return true;\n  }, this);\n};\n\nvar viewModel = new ZundokoViewModel();\n\nko.applyBindings(viewModel);\n```\n\n- knockout.js\u306e\u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n- \u30c6\u30ad\u30b9\u30c8\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u306b\u306f'textInput'\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u5165\u529b\u3092\u5373\u53cd\u6620\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\uff08`value`\u3060\u3068Enter\u3092\u62bc\u3057\u305f\u6642\u3001\u30d5\u30a9\u30fc\u30ab\u30b9\u304c\u5916\u308c\u305f\u6642\u306b\u3057\u304b\u53cd\u6620\u3055\u308c\u307e\u305b\u3093\uff09  \n\n    ```html:\n    <input type=\"text\" data-bind=\"textInput: zun\"/>\n    ```\n- \u30e9\u30f3\u30c0\u30e0\u306b\u9078\u629e\u3057\u305f\u30ba\u30f3\u30c9\u30b3\u306f`observableArray`(`results`\u30d7\u30ed\u30d1\u30c6\u30a3)\u306b\u683c\u7d0d\u3057\u3066\u3044\u307e\u3059\u3002\n  \u3053\u306e\u969b\u3001\u30d0\u30a4\u30f3\u30c9\u3055\u308c\u305f\u5024(`this.zun()`)\u3067\u306f\u306a\u304fobservable\u30aa\u30d6\u30b8\u30a7\u30af\u30c8(`this.zun`)\u3092\u76f4\u63a5\u683c\u7d0d\u3059\u308b\u3053\u3068\u3067\u3001\u5024\u306e\u5909\u66f4\u304c\u5373\u53cd\u6620\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002  \n\n    ```js:\n    this.results.push(Math.random() < 0.5 ? this.zun : this.doko);\n    ```\n"}