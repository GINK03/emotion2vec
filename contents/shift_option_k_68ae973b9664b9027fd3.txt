{"tags": ["Realm", "Swift", "Xcode"], "context": "Reaalm\u306eObject(RLMObject)\u3092\u30b3\u30d4\u30fc\u3059\u308b\u306e\u306b\u624b\u3053\u305a\u3063\u305f\u306e\u3067\u307e\u3068\u3081\u307e\u3057\u305f\u3002\u30b3\u30d4\u30fc\u3059\u308c\u3070\u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30f3\u306b\u623b\u308b\u306e\u3067\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u64cd\u4f5c\u3067\u304d\u307e\u3059\u3002\n\u65b9\u6cd5\u306f\u7c21\u5358\u3067NSCopying\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u306b\u5bfe\u5fdc\u3059\u308b\u3060\u3051\u3067\u3059\u3002copyWithZone\u5185\u3067Object\u3092\u4f5c\u6210\u3057\u305d\u308c\u3092\u8fd4\u3057\u307e\u3059\u3002String, Bool\u306fStruct\u306a\u306e\u3067\u305d\u306e\u307e\u307e\u4ee3\u5165\u3059\u308c\u3070OK\u3067\u3059\u3002NSDate\u306fclass\u306a\u306e\u3067\u53c2\u7167\u3092\u5916\u3059\u305f\u3081\u306bcopy()\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3044\u307e\u3059\u3002List\u3067\u914d\u5217\u3092\u4f5c\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u4e2d\u8eab\u3092\u53d6\u308a\u51fa\u3057\u3066\u518d\u5ea6List\u3092\u4f5c\u308a\u307e\u3059\u3002\n\nRLMObject\nclass CategoryWrapper:Object{\n    dynamic var category:String = \"\"\n}\n\nclass HogeObject:Object, NSCopying {\n    dynamic var entryID:String = \"\"\n    dynamic var title:String = \"\"\n    dynamic var updated:NSDate? = nil\n    dynamic var content:String = \"\"\n    let categories = List<CategoryWrapper>()\n    dynamic var isDrafts:Bool = false\n\n    override static func primaryKey()-> String? {\n        return \"entryID\"\n    }\n\n    func copyWithZone(zone: NSZone) -> AnyObject {\n        let copy = HogeObject()\n        copy.entryID = entryID \n        copy.title = title\n        copy.updated = updated?.copy() as? NSDate\n        copy.content = content\n        let categoriesRow = categories.map{ $0.category }\n        let categoryWrappers = categoriesRow.map{\n            category -> CategoryWrapper in\n            let wrapper = CategoryWrapper()\n            wrapper.category = category\n            return wrapper\n        }\n        categoryWrappers.forEach{ copy.categories.append($0) }\n        copy.isDrafts = isDrafts\n\n        return copy\n    }\n\n}\n\n\n\u53d6\u308a\u51fa\u3059\u969b\u306fcopy()\u3092\u4f7f\u3044\u307e\u3059\u3002\n\nCopy\n\nrealm.write{\n    realm.add(object, update: true)\n    //standalone == false\n}\n\nobject.title = \"hoge\" //standlone\u306a\u306e\u3067\u4f8b\u5916\u767a\u751f\n\nlet copy = object.copy as! HogeObject\n\ncopy.title = \"hoge\" //standalone\u306a\u306e\u3067\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u5909\u66f4\u3067\u304d\u308b\u3002\n\n\n\n\n\u88dc\u8db3\ncopy()\u3060\u3068AnyObject\u304c\u8fd4\u308b\u306e\u3067\u72ec\u81ea\u306b\u30e1\u30bd\u30c3\u30c9\u3092\u4f5c\u3063\u305f\u307b\u3046\u304c\u578b\u30bb\u30fc\u30d5\u306b\u306a\u3063\u3066\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\nReaalm\u306eObject(RLMObject)\u3092\u30b3\u30d4\u30fc\u3059\u308b\u306e\u306b\u624b\u3053\u305a\u3063\u305f\u306e\u3067\u307e\u3068\u3081\u307e\u3057\u305f\u3002\u30b3\u30d4\u30fc\u3059\u308c\u3070\u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30f3\u306b\u623b\u308b\u306e\u3067\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u64cd\u4f5c\u3067\u304d\u307e\u3059\u3002\n\n\u65b9\u6cd5\u306f\u7c21\u5358\u3067`NSCopying`\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u306b\u5bfe\u5fdc\u3059\u308b\u3060\u3051\u3067\u3059\u3002`copyWithZone`\u5185\u3067Object\u3092\u4f5c\u6210\u3057\u305d\u308c\u3092\u8fd4\u3057\u307e\u3059\u3002String, Bool\u306fStruct\u306a\u306e\u3067\u305d\u306e\u307e\u307e\u4ee3\u5165\u3059\u308c\u3070OK\u3067\u3059\u3002NSDate\u306fclass\u306a\u306e\u3067\u53c2\u7167\u3092\u5916\u3059\u305f\u3081\u306b`copy()`\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3044\u307e\u3059\u3002`List`\u3067\u914d\u5217\u3092\u4f5c\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u4e2d\u8eab\u3092\u53d6\u308a\u51fa\u3057\u3066\u518d\u5ea6`List`\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n```swift:RLMObject\nclass CategoryWrapper:Object{\n    dynamic var category:String = \"\"\n}\n\nclass HogeObject:Object, NSCopying {\n    dynamic var entryID:String = \"\"\n    dynamic var title:String = \"\"\n    dynamic var updated:NSDate? = nil\n    dynamic var content:String = \"\"\n    let categories = List<CategoryWrapper>()\n    dynamic var isDrafts:Bool = false\n    \n    override static func primaryKey()-> String? {\n        return \"entryID\"\n    }\n    \n    func copyWithZone(zone: NSZone) -> AnyObject {\n        let copy = HogeObject()\n        copy.entryID = entryID \n        copy.title = title\n        copy.updated = updated?.copy() as? NSDate\n        copy.content = content\n        let categoriesRow = categories.map{ $0.category }\n        let categoryWrappers = categoriesRow.map{\n            category -> CategoryWrapper in\n            let wrapper = CategoryWrapper()\n            wrapper.category = category\n            return wrapper\n        }\n        categoryWrappers.forEach{ copy.categories.append($0) }\n        copy.isDrafts = isDrafts\n        \n        return copy\n    }\n    \n}\n```\n\n\u53d6\u308a\u51fa\u3059\u969b\u306f`copy()`\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n\n```swift:Copy\n\nrealm.write{\n\trealm.add(object, update: true)\n\t//standalone == false\n}\n\nobject.title = \"hoge\" //standlone\u306a\u306e\u3067\u4f8b\u5916\u767a\u751f\n\nlet copy = object.copy as! HogeObject\n\ncopy.title = \"hoge\" //standalone\u306a\u306e\u3067\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u5909\u66f4\u3067\u304d\u308b\u3002\n\n```\n\n\n### \u88dc\u8db3\n`copy()`\u3060\u3068`AnyObject`\u304c\u8fd4\u308b\u306e\u3067\u72ec\u81ea\u306b\u30e1\u30bd\u30c3\u30c9\u3092\u4f5c\u3063\u305f\u307b\u3046\u304c\u578b\u30bb\u30fc\u30d5\u306b\u306a\u3063\u3066\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n"}