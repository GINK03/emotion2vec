{"context": " More than 1 year has passed since last update.\nRaspberryPi(DietPi:Jessie), ubuntu14.04, linuxmint17.2 \u306b\u3066\u78ba\u8a8d\u3002\n\n\n\u53c2\u8003\n\nInstalling Fluentd Using Ruby Gem | Fluentd\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(deb\u7cfb)\nsudo apt-get install -y ruby-dev build-essential\nsudo gem install fluentd --no-ri --no-rdoc\n\n\n\n/usr/local/bin/fluentd \u304c\u5165\u308b\u3002\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(centos5\u7cfb)\n\n/etc/yum.repos.d/td.repo\n[treasuredata]\nname=TreasureData\nbaseurl=http://packages.treasure-data.com/redhat/$basearch\ngpgcheck=0\n\n\ngpgcheck=0\u304c\u5fc5\u8981\u3002\nsudo yum install -y td-agent\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\n\u5f85\u3061\u53d7\u3051\nfluentd --setup ~/fluent\nfluentd -c ~/fluent/fluent.conf\n\n\n\n\u9001\u4fe1\necho '{\"json\":\"message\"}' | fluent-cat debug.test\n\n\nfluentd\u306fCtrl-C\u3067\u7d42\u4e86\n\nhttp 8888\u30dd\u30fc\u30c8\u3067\u5f85\u3061\u53d7\u3051\u3001\u30ed\u30b0\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\n\n~/fluent/fluent.conf\n <source>\n   @type http\n   @id http_input\n   port 8888\n </source>\n+<match host1>\n+  type file\n+  path /mnt/usb_1/fluent/host1\n+</match>\n\n\n\nfluentd \u3092\u518d\u7acb\u3061\u4e0a\u3052\u3057\u4ee5\u4e0b\u5b9f\u65bd\n\n\n\u30ed\u30b0\u306e\u9001\u4fe1\ncurl http://myserver:8888/host1 -F 'json={\"log\":\"test_dayo\"}'\n\n\n\n\n/mnt/usb_1/fluent/host1.20150821.b51dc6d7e2ba239e2 \u306b\u4ee5\u4e0b\u30ed\u30b0\u304c\u4fdd\u5b58\u3055\u308c\u308b\u3002\n\n2015-08-21T08:52:26+09:00       host1   {\"log\":\"test_dayo\"}\n\n\napache\u306eproxypass\u6a5f\u80fd\u30678888\u30dd\u30fc\u30c8\u3092\u958b\u653e\u305b\u305a\u306b\u4fdd\u5b58\n <VirtualHost *:80>\n ...\n+   ProxyPass /host1 http://localhost:8888/host1\n </VirtualHost>\n\nsudo a2enmod proxy_http\nsudo /etc/init.d/apache2 restart\n\n\n\u30ed\u30b0\u306e\u9001\u4fe1\ncurl http://myserver/host1 -F 'json={\"log\":\"test_dayo\"}'\n\n\n\u30ed\u30b0\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\nmongodb\u306b\u4fdd\u5b58\n\nFluentd\u5165\u9580 - Qiita\nMongoDB - mongo shell\u306e\u64cd\u4f5c\u307e\u3068\u3081 - Qiita\n\nsudo apt-get install -y mongodb\n\n\n/etc/mongodb.conf\n- dbpath=/var/lib/mongodb\n+ dbpath=/mnt/usb_1/fluent/mongodb\n- logpath=/var/log/mongodb/mongodb.log\n+ logpath=/mnt/usb_1/fluent/mongodb/mongodb.log\n\n\n\nmongod -f /etc/mongodb.conf\n\n\n\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo gem i fluent-plugin-mongo --no-ri --no-rdoc\nsudo gem i bson_ext --no-ri --no-rdoc\n\n\n\n~/fluent/fluent.conf\n <match host1>\n-  type file\n-  path /mnt/usb_1/fluent/host1\n+  type mongo\n+  host localhost\n+  database fluent\n+  collection host1\n </match>\n\n\n\n\u30ec\u30b3\u30fc\u30c9\u306e\u78ba\u8a8d\nmongo fluent\n> show collections\n> db.host1.find()\n\n\n\n\u30ec\u30b3\u30fc\u30c9\n{ \"_id\" : ObjectId(\"55d6738290c3222278000001\"), \"log\" : \"test_dayo\", \"time\" : ISODate(\"2015-08-21T00:40:12Z\") }\n{ \"_id\" : ObjectId(\"55d6738290c3222278000002\"), \"log\" : \"test_dayo\", \"time\" : ISODate(\"2015-08-21T00:40:33Z\") }\n{ \"_id\" : ObjectId(\"55d673cb90c32222a0000001\"), \"log\" : \"test_dayo\", \"time\" : ISODate(\"2015-08-21T00:40:53Z\") }\n{ \"_id\" : ObjectId(\"55d6744490c32222a0000002\"), \"log\" : \"test_dayo\", \"time\" : ISODate(\"2015-08-21T00:43:42Z\") }\n\n\nmongod\u306fsudo killall mongod\u3067\u7d42\u4e86\u3059\u308b\u304b\nManage mongod Processes \u2014 MongoDB Manual 3.0\u3092\u53c2\u7167\u3002\n\nmongodb3.0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5834\u5408\n\n\nInstall MongoDB on Debian \u2014 MongoDB Manual 3.0\n\njessie\u306emongodb\u306f2.4\u300245\u6b73\u4ee5\u4e0a\u306fMongoDB\u3092\u4f7f\u3063\u305f\u30b7\u30b9\u30c6\u30e0\u304c\u4f7f\u3048\u306a\u304f\u306a\u308b\u4ef6 - Qiita\u3068\u3044\u3046\u554f\u984c\u3082\u3042\u308b\u3088\u3046\u306a\u306e\u3067\u30013.0\u3092\u5165\u308c\u308b\u306e\u3082\u826f\u3044\u3067\u3057\u3087\u3046\u3002\nRaspberryPi\u7528\u306f3.0\u304c\u5b58\u5728\u3057\u306a\u3044\u3002\n\n\n\n\nmongodb3.0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10\necho \"deb http://repo.mongodb.org/apt/debian wheezy/mongodb-org/3.0 main\" | sudo tee /etc/apt/sources.list.d/mongodb-org-3.0.list\nsudo apt-get update\nsudo apt-get install -y mongodb-org\n\n\n* RaspberryPi(DietPi:Jessie), ubuntu14.04, linuxmint17.2 \u306b\u3066\u78ba\u8a8d\u3002\n\n## \u53c2\u8003\n\n* [Installing Fluentd Using Ruby Gem | Fluentd](http://docs.fluentd.org/articles/install-by-gem)\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(deb\u7cfb)\n\n```bash:\nsudo apt-get install -y ruby-dev build-essential\nsudo gem install fluentd --no-ri --no-rdoc\n```\n\n* `/usr/local/bin/fluentd` \u304c\u5165\u308b\u3002\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(centos5\u7cfb)\n\n```bash:/etc/yum.repos.d/td.repo\n[treasuredata]\nname=TreasureData\nbaseurl=http://packages.treasure-data.com/redhat/$basearch\ngpgcheck=0\n```\n\n`gpgcheck=0`\u304c\u5fc5\u8981\u3002\n\n```bash:\nsudo yum install -y td-agent\n```\n\n## \u52d5\u4f5c\u78ba\u8a8d\n\n```bash:\u5f85\u3061\u53d7\u3051\nfluentd --setup ~/fluent\nfluentd -c ~/fluent/fluent.conf\n```\n\n```bash:\u9001\u4fe1\necho '{\"json\":\"message\"}' | fluent-cat debug.test\n```\n\nfluentd\u306f`Ctrl-C`\u3067\u7d42\u4e86\n\n\n## http 8888\u30dd\u30fc\u30c8\u3067\u5f85\u3061\u53d7\u3051\u3001\u30ed\u30b0\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\n\n```diff:~/fluent/fluent.conf\n <source>\n   @type http\n   @id http_input\n   port 8888\n </source>\n+<match host1>\n+  type file\n+  path /mnt/usb_1/fluent/host1\n+</match>\n```\n\n* fluentd \u3092\u518d\u7acb\u3061\u4e0a\u3052\u3057\u4ee5\u4e0b\u5b9f\u65bd\n\n```bash:\u30ed\u30b0\u306e\u9001\u4fe1\ncurl http://myserver:8888/host1 -F 'json={\"log\":\"test_dayo\"}'\n```\n\n* `/mnt/usb_1/fluent/host1.20150821.b51dc6d7e2ba239e2` \u306b\u4ee5\u4e0b\u30ed\u30b0\u304c\u4fdd\u5b58\u3055\u308c\u308b\u3002\n\n```text:\n2015-08-21T08:52:26+09:00       host1   {\"log\":\"test_dayo\"}\n```\n\n## apache\u306eproxypass\u6a5f\u80fd\u30678888\u30dd\u30fc\u30c8\u3092\u958b\u653e\u305b\u305a\u306b\u4fdd\u5b58\n\n```diff:\n <VirtualHost *:80>\n ...\n+   ProxyPass /host1 http://localhost:8888/host1\n </VirtualHost>\n```\n\n```bash:\nsudo a2enmod proxy_http\nsudo /etc/init.d/apache2 restart\n```\n\n\n```bash:\u30ed\u30b0\u306e\u9001\u4fe1\ncurl http://myserver/host1 -F 'json={\"log\":\"test_dayo\"}'\n```\n\n\u30ed\u30b0\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\n\n# mongodb\u306b\u4fdd\u5b58\n\n* [Fluentd\u5165\u9580 - Qiita](http://qiita.com/ysk_1031/items/bcbf74150a8ee9f979d7)\n* [MongoDB - mongo shell\u306e\u64cd\u4f5c\u307e\u3068\u3081 - Qiita](http://qiita.com/rubytomato@github/items/390cdead677a851550e8)\n\n```bash:\nsudo apt-get install -y mongodb\n```\n\n```diff:/etc/mongodb.conf\n- dbpath=/var/lib/mongodb\n+ dbpath=/mnt/usb_1/fluent/mongodb\n- logpath=/var/log/mongodb/mongodb.log\n+ logpath=/mnt/usb_1/fluent/mongodb/mongodb.log\n\n```\n\n```bash:\nmongod -f /etc/mongodb.conf\n```\n\n\n```bash:\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo gem i fluent-plugin-mongo --no-ri --no-rdoc\nsudo gem i bson_ext --no-ri --no-rdoc\n```\n\n```diff:~/fluent/fluent.conf\n <match host1>\n-  type file\n-  path /mnt/usb_1/fluent/host1\n+  type mongo\n+  host localhost\n+  database fluent\n+  collection host1\n </match>\n```\n\n```bash:\u30ec\u30b3\u30fc\u30c9\u306e\u78ba\u8a8d\nmongo fluent\n> show collections\n> db.host1.find()\n```\n\n```json:\u30ec\u30b3\u30fc\u30c9\n{ \"_id\" : ObjectId(\"55d6738290c3222278000001\"), \"log\" : \"test_dayo\", \"time\" : ISODate(\"2015-08-21T00:40:12Z\") }\n{ \"_id\" : ObjectId(\"55d6738290c3222278000002\"), \"log\" : \"test_dayo\", \"time\" : ISODate(\"2015-08-21T00:40:33Z\") }\n{ \"_id\" : ObjectId(\"55d673cb90c32222a0000001\"), \"log\" : \"test_dayo\", \"time\" : ISODate(\"2015-08-21T00:40:53Z\") }\n{ \"_id\" : ObjectId(\"55d6744490c32222a0000002\"), \"log\" : \"test_dayo\", \"time\" : ISODate(\"2015-08-21T00:43:42Z\") }\n```\n\nmongod\u306f[`sudo killall mongod`\u3067\u7d42\u4e86](http://superuser.com/questions/875533/mongodb-not-shutting-down-via-shutdown-command)\u3059\u308b\u304b\n[Manage mongod Processes \u2014 MongoDB Manual 3.0](http://docs.mongodb.org/manual/tutorial/manage-mongodb-processes/)\u3092\u53c2\u7167\u3002\n\n\n## mongodb3.0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5834\u5408\n\n* [Install MongoDB on Debian \u2014 MongoDB Manual 3.0](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-debian/)\n    * jessie\u306emongodb\u306f2.4\u3002[45\u6b73\u4ee5\u4e0a\u306fMongoDB\u3092\u4f7f\u3063\u305f\u30b7\u30b9\u30c6\u30e0\u304c\u4f7f\u3048\u306a\u304f\u306a\u308b\u4ef6 - Qiita](http://qiita.com/exabugs/items/653ee0bffdc96c0b97cd)\u3068\u3044\u3046\u554f\u984c\u3082\u3042\u308b\u3088\u3046\u306a\u306e\u3067\u30013.0\u3092\u5165\u308c\u308b\u306e\u3082\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n    * RaspberryPi\u7528\u306f3.0\u304c\u5b58\u5728\u3057\u306a\u3044\u3002\n\n```bash:mongodb3.0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10\necho \"deb http://repo.mongodb.org/apt/debian wheezy/mongodb-org/3.0 main\" | sudo tee /etc/apt/sources.list.d/mongodb-org-3.0.list\nsudo apt-get update\nsudo apt-get install -y mongodb-org\n", "tags": ["fluentd"]}