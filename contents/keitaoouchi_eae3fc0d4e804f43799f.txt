{"tags": ["bower", "RequireJS", "mocha", "gulp", "Backbone.js"], "context": " More than 1 year has passed since last update.\n\n\u4ed8\u5e2f\u76ee\u6a19\n\nCoffeeScript\u3067\u66f8\u304d\u305f\u3044\u306e\u3067*.cofee\u3092\u30a6\u30a9\u30c3\u30c1\u3057\u3066\u81ea\u52d5\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u305b\u305f\u3044\nSass\u3068\u304b\u3082\u4f7f\u3044\u305f\u3044\nmocha\u3092\u30d6\u30e9\u30a6\u30b6\u3067\u8d70\u3089\u305b\u305f\u3044\u306e\u3067\u30c6\u30b9\u30c8\u7528\u306e\u30b5\u30fc\u30d0\u30fc\u3092express\u3067\u69cb\u7bc9\u3059\u308b\nLiveReload\u3067\u30c6\u30b9\u30c8\u7528\u306e\u30da\u30fc\u30b8\u3092\u66f4\u65b0\u3055\u305b\u308b\n\u4ee5\u4e0a\u306e\u30bf\u30b9\u30af\u3092grunt\u30b3\u30de\u30f3\u30c9\u4e00\u767a\u3067\u7acb\u3061\u4e0a\u3052\u305f\u3044\n\u305d\u306e\u74b0\u5883\u69cb\u7bc9\u3092npm install\u3092\u542b\u3080\u6700\u4f4e\u9650\u306e\u6e96\u5099\u3067\u6e08\u307e\u305b\u305f\u3044\n\n\n\u69cb\u6210\u65b9\u91dd\n.\n\u251c\u2500\u2500 devel\n\u2502   \u251c\u2500\u2500 coffee\n\u2502   \u251c\u2500\u2500 node_modules\n\u2502   \u251c\u2500\u2500 sass\n\u2502   \u2514\u2500\u2500 test\n\u2502       \u251c\u2500\u2500 coffee\n\u2502       \u2514\u2500\u2500 js\n\u2514\u2500\u2500 static\n    \u251c\u2500\u2500 css\n    \u251c\u2500\u2500 img\n    \u251c\u2500\u2500 js\n    \u2514\u2500\u2500 vendors\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u3068\ndevel/cofee -> static/js\ndevel/sass -> static/css\ntest/coffee -> test/js\n\u306b\u81ea\u52d5\u7684\u306b\u914d\u7f6e\u3055\u308c\u308b\u3088\u3046\u306b\u3059\u308b\u3002\ndevel/node_moduls\u306fgulp\u3067\u4f7f\u3046\u30e2\u30b8\u30e5\u30fc\u30eb\u3001static/vendors\u306b\u306fbower\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b3rd\u30d1\u30fc\u30c6\u30a3\u30fc\u306e\u30d5\u30a1\u30a4\u30eb\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\nhttps://github.com/keitaoouchi/gulp-tdd-sample\n\n\u8a66\u3059\n\u4e8b\u524d\u306bbunlder\u3001bower\u306e\u5c0e\u5165\u304c\u5fc5\u8981\u3002\nnpm install -g bower gulp\n\ngem install bundler\n\ngit clone https://github.com/keitaoouchi/gulp-tdd-sample\ncd gulp-tdd-sample/devel\nnpm install\ngulp setup\ngulp\n\n\u305d\u3057\u3066\nhttp://localhost:8080/hoge/fuga\n\u3078\u3002\n\ngulp\u306e\u74b0\u5883\u3092\u4f5c\u308b\u305f\u3081\u306epackage.json\ndevel\u4ee5\u4e0b\u306b\u914d\u7f6e\u3057\u3066npm install\n\npackage.json\n{\n  \"name\": \"static\",\n  \"version\": \"0.0.1\",\n  \"description\": \"static files\",\n  \"main\": \"index.js\",\n  \"dependencies\": {},\n  \"devDependencies\": {\n    \"gulp\": \"3.8.8\",\n    \"gulp-coffee\": \"2.2.0\",\n    \"gulp-watch\": \"1.1.0\",\n    \"gulp-compass\": \"2.0.0\",\n    \"gulp-nodemon\": \"1.0.4\",\n    \"gulp-notify\": \"2.0.0\",\n    \"gulp-exec\": \"2.1.1\",\n    \"gulp-livereload\": \"2.1.1\",\n    \"gulp-plumber\": \"0.6.6\",\n    \"express\": \"4.9.8\",\n    \"jade\": \"1.7.0\",\n    \"coffee-script\": \"1.8.0\"\n  }\n}\n\n\n\ncompass/sass\u3092\u5c0e\u5165\u3059\u308b\u305f\u3081\u306eGemfile\n\u5c0e\u5165\u306fgulp\u306b\u3084\u3089\u305b\u308b\u306e\u3067Gemfile\u3092devel\u76f4\u4e0b\u306b\u8cbc\u308b\u3060\u3051\n\nGemfile\nsource 'http://rubygems.org'\n\ngem 'sass'\ngem 'compass'\n\n\n\nbower\u3067\u5c0e\u5165\u3059\u308b3rd\u30d1\u30fc\u30c6\u30fc\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092static/vendors\u306b\u914d\u7f6e\u3059\u308b.bowerrc\ndevel\u76f4\u4e0b\u306b\u914d\u7f6e\n\n.bowerrc\n{\n  \"directory\": \"./../static/vendors\"\n}\n\n\n\nbower\u3067\u5c0e\u5165\u3059\u308b\u305f\u3081\u306ebower.json\u306e\u4e00\u4f8b\ndevel\u76f4\u4e0b\u306b\u914d\u7f6e\u3059\u308b\n\nbower.json\n{\n  \"name\": \"static\",\n  \"version\": \"0.0.1\",\n  \"ignore\": [\n    \"**/.*\",\n    \"node_modules\",\n    \"components\"\n  ],\n  \"dependencies\": {\n    \"jquery\": \"2.1.1\",\n    \"backbone\": \"1.1.2\",\n    \"requirejs-domready\": \"2.0.1\",\n    \"requirejs\": \"2.1.14\",\n    \"underscore\": \"1.6.0\"\n  },\n  \"devDependencies\": {\n    \"mocha\": \"2.0.0\",\n    \"chai\": \"1.9.2\",\n    \"sinon\": \"http://sinonjs.org/releases/sinon-1.10.3.js\"\n  }\n}\n\n\n\ngulpfile.coffee\n\u3084\u306f\u308adevel\u76f4\u4e0b\u306b\u914d\u7f6e\n\ngulpfile.coffee\ngulp = require 'gulp'\ncoffee = require 'gulp-coffee'\ncompass = require 'gulp-compass'\nnodemon = require 'gulp-nodemon'\nnotify = require 'gulp-notify'\nexec = require('child_process').exec\nlivereload = require 'gulp-livereload'\nplumber = require 'gulp-plumber'\nwatch = require 'gulp-watch'\n\nprintout = (callback) ->\n  (err, stdout, stderr) ->\n    console.log stdout\n    console.log stderr\n    callback err\n\ngulp.task 'setupGems', (cb) ->\n  exec 'bundle install', printout(cb)\n\ngulp.task 'setupBower', (cb) ->\n  exec 'rm -rf ./../static/vendors && bower install', printout(cb)\n\ngulp.task 'express', ->\n  nodemon\n    script: './test/server.js'\n\ngulp.task 'coffee', ->\n  src = './coffee/**/*.coffee'\n  testSrc = './test/coffee/**/*.coffee'\n  gulp.src(src)\n      .pipe watch(src)\n      .pipe plumber\n        errorHandler: notify.onError(\"Error: <%= error.message %>\")\n      .pipe coffee\n        bare: true\n      .pipe gulp.dest('./../static/js')\n      .pipe livereload()\n  gulp.src(testSrc)\n      .pipe watch(testSrc)\n      .pipe plumber\n        errorHandler: notify.onError(\"Error: <%= error.message %>\")\n      .pipe coffee\n        bare:true\n      .pipe gulp.dest('./test/js')\n      .pipe livereload()\n\ngulp.task 'compass', ->\n  src = './sass/**/*.sass'\n  testSrc = './test/sass/**/*.sass'\n  gulp.src(src)\n      .pipe watch(src)\n      .pipe plumber\n        errorHandler: notify.onError(\"Error: <%= error.message %>\")\n      .pipe compass\n        bundle_exec:true,\n        css: './../static/css'\n        sass: './sass'\n      .pipe livereload()\n  gulp.src(testSrc)\n      .pipe watch(testSrc)\n      .pipe plumber\n        errorHandler: notify.onError(\"Error: <%= error.message %>\")\n      .pipe compass\n        bundle_exec:true\n        css: './test/css'\n        sass: './test/sass'\n      .pipe livereload()\n\ngulp.task 'default', ['compass', 'coffee', 'express']\ngulp.task 'setup', ['setupGems', 'setupBower']\n\n\n\ndevel/test/server.js\nmocha\u3092\u30d6\u30e9\u30a6\u30b6\u3067\u8d70\u3089\u305b\u308b\u305f\u3081\u306e\u30b5\u30fc\u30d0\u30fc\u3092express\u3067\u7c21\u5358\u306b\u3002\n\ntest/server.js\nvar express = require('express');\nvar http = require('http');\nvar app = express();\n\napp.set('port', process.env.PORT || 8080);\napp.set('view engine', 'jade');\napp.use(express.static('./../'));\n\napp.get(/(.+)(\\/.+)?/, function(req, res){\n  var path = req.params[0].replace('/', '');\n  res.render(__dirname + '/template', {target: path});\n});\n\nhttp.createServer(app).listen(app.get('port'), function(){\n  console.log(\"Express server listening on port \" + app.get('port'));\n});\n\n\n\u3053\u306e\u30b5\u30fc\u30d0\u30fc\u3067devel/test/coffee/hoge/fuga-spec.coffee\u306e\u30c6\u30b9\u30c8\u7d50\u679c\u3092localhost:8080/hoge/fuga\u3067\u95b2\u89a7\u3057\u3066TDD\u3059\u308b\u3002livereload\u3057\u3066\u308b\u306e\u3067\u30d6\u30e9\u30a6\u30b6\u306b\u9069\u5f53\u306a\u62e1\u5f35\u5165\u308c\u308b\u3068\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306b\u53cd\u6620\u3055\u308c\u308b\u306e\u3067\u5b09\u3057\u3044\u3002\n\nrequire.js\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092coffee\u3067\u66f8\u304f\n\ndevel/coffee/config.coffee\nrequire =\n  baseUrl: '/static'\n  paths:\n    jquery: 'vendors/jquery/dist/jquery.min'\n    underscore: 'vendors/underscore/underscore'\n    backbone: 'vendors/backbone/backbone'\n    domReady: 'vendors/requirejs-domready/domReady'\n  shim:\n    underscore:\n      exports: '_'\n    backbone:\n      deps: [\"jquery\", \"underscore\"]\n      exports: \"Backbone\"\n\n\n\ndevel/test/coffee/spec-config.coffee\nrequire_test =\n  paths:\n    mocha: 'vendors/mocha/mocha'\n    chai: 'vendors/chai/chai'\n    sinon: 'vendors/sinon/index'\n  shim:\n    mocha:\n      exports: 'mocha'\n    chai:\n      exports: 'chai'\n    sinon:\n      exports: 'sinon'\n\nrequire = window.require || {}\n\nfor key, val of require_test.paths\n  require.paths[key] = val\nfor key, val of require_test.shim\n  require.shim[key] = val\n\n\n\n\u30c6\u30b9\u30c8\u5bfe\u8c61\u3068\u306a\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u4f8b\n\u3082\u306e\u3059\u3054\u304f\u3069\u3046\u3067\u3082\u3044\u3044\u611f\u3058\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092Requirejs\u3067\u4f5c\u308a\u307e\u3059\u3002\n\ndevel/hoge/fuga.coffee\ndefine(\n  'js/hoge/fuga',\n  ['jquery', 'underscore', 'backbone'],\n  ($, _, Backbone) ->\n    'use strict'\n\n    App =\n      Models: {}\n      Collections: {}\n      Views: {}\n\n    class App.Models.Fuga extends Backbone.Model\n\n      initialize: (obj) ->\n        @name = obj.name\n\n    class App.Collections.Fugas extends Backbone.Collection\n\n      model: App.Models.Fuga\n\n    class App.Views.FugaView extends Backbone.View\n\n      initialize: ->\n        @listenTo(@collection, 'sync', @render)\n        @collection.fetch()\n\n      render: ->\n\n    App.initialize = ->\n    if Object.freeze? then Object.freeze App else App\n)\n\n\n\n\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30c6\u30b9\u30c8\u3059\u308bspec\u4f8b\n\ndevel/test/coffee/hoge/fuga-spec.coffee\nrequire(['js/hoge/fuga', 'backbone', 'mocha', 'chai', 'sinon'], (App, Backbone, mocha, chai, sinon) ->\n  'use strict'\n\n  mocha.ui 'bdd'\n\n  chai.should()\n\n  describe 'App', ->\n    it 'App.Models.Fuga\u306fBackbone.Model\u3092\u7d99\u627f', ->\n      App.Models.Fuga.prototype.should.be.an.instanceof Backbone.Model\n    it 'App.Collections.Fugas\u306fBackbone.Collection\u3092\u7d99\u627f', ->\n      App.Collections.Fugas.prototype.should.be.an.instanceof Backbone.Collection\n    it 'App.Views.FugaView\u306fBackbone.View\u3092\u7d99\u627f', ->\n      App.Views.FugaView.prototype.should.be.an.instanceof Backbone.View\n\n  describe 'App.Models.Fuga', ->\n\n    fuga = null\n    before ->\n      fuga = new App.Models.Fuga({name: 'fuga'})\n\n    it 'fuga\u306ename\u304cfuga', ->\n      fuga.name.should.be.equals 'fuga'\n\n  describe 'App.View.FugaView', ->\n\n    it '\u521d\u671f\u5316\u6642\u306bcollection\u3092fetch\u3059\u308b', ->\n      iamspy = new App.Collections.Fugas()\n      iamspy.fetch = sinon.spy()\n      new App.Views.FugaView collection: iamspy\n      iamspy.fetch.called.should.be.true\n\n  mocha.run()\n\n)\n\n\n\nmocha\u3067\u7d50\u679c\u3092\u8868\u793a\u3059\u308b\u305f\u3081\u306ejade\u30c6\u30f3\u30d7\u30ec\n\ntemplate.jade\ndoctype html\nhtml\n  head\n    title (^q^) < #{target} \u306e\u3066\u3059\u3068\n    link(rel='stylesheet', href='/static/vendors/mocha/mocha.css')\n    link(rel='stylesheet', href='/devel/test/css/style.css')\n\n  body\n    div(class='title')\n      h1 (^q^) < #{target} \u306e\u3066\u3059\u3068\n    div(id='mocha')\n    script(src='/static/js/config.js')\n    script(src='/devel/test/js/spec-config.js')\n    script(src='/static/vendors/requirejs/require.js')\n    script(src='/devel/test/js/#{target}-spec.js')\n\n\n\n## \u4ed8\u5e2f\u76ee\u6a19\n* CoffeeScript\u3067\u66f8\u304d\u305f\u3044\u306e\u3067*.cofee\u3092\u30a6\u30a9\u30c3\u30c1\u3057\u3066\u81ea\u52d5\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u305b\u305f\u3044\n* Sass\u3068\u304b\u3082\u4f7f\u3044\u305f\u3044\n* mocha\u3092\u30d6\u30e9\u30a6\u30b6\u3067\u8d70\u3089\u305b\u305f\u3044\u306e\u3067\u30c6\u30b9\u30c8\u7528\u306e\u30b5\u30fc\u30d0\u30fc\u3092express\u3067\u69cb\u7bc9\u3059\u308b\n* LiveReload\u3067\u30c6\u30b9\u30c8\u7528\u306e\u30da\u30fc\u30b8\u3092\u66f4\u65b0\u3055\u305b\u308b\n* \u4ee5\u4e0a\u306e\u30bf\u30b9\u30af\u3092grunt\u30b3\u30de\u30f3\u30c9\u4e00\u767a\u3067\u7acb\u3061\u4e0a\u3052\u305f\u3044\n* \u305d\u306e\u74b0\u5883\u69cb\u7bc9\u3092npm install\u3092\u542b\u3080\u6700\u4f4e\u9650\u306e\u6e96\u5099\u3067\u6e08\u307e\u305b\u305f\u3044\n\n## \u69cb\u6210\u65b9\u91dd\n```\n.\n\u251c\u2500\u2500 devel\n\u2502   \u251c\u2500\u2500 coffee\n\u2502   \u251c\u2500\u2500 node_modules\n\u2502   \u251c\u2500\u2500 sass\n\u2502   \u2514\u2500\u2500 test\n\u2502       \u251c\u2500\u2500 coffee\n\u2502       \u2514\u2500\u2500 js\n\u2514\u2500\u2500 static\n    \u251c\u2500\u2500 css\n    \u251c\u2500\u2500 img\n    \u251c\u2500\u2500 js\n    \u2514\u2500\u2500 vendors\n```\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u3068\ndevel/cofee -> static/js\ndevel/sass -> static/css\ntest/coffee -> test/js\n\u306b\u81ea\u52d5\u7684\u306b\u914d\u7f6e\u3055\u308c\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\ndevel/node_moduls\u306fgulp\u3067\u4f7f\u3046\u30e2\u30b8\u30e5\u30fc\u30eb\u3001static/vendors\u306b\u306fbower\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b3rd\u30d1\u30fc\u30c6\u30a3\u30fc\u306e\u30d5\u30a1\u30a4\u30eb\u3002\n\n## \u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\n\nhttps://github.com/keitaoouchi/gulp-tdd-sample\n\n## \u8a66\u3059\n\n\u4e8b\u524d\u306bbunlder\u3001bower\u306e\u5c0e\u5165\u304c\u5fc5\u8981\u3002\n\n```bash\nnpm install -g bower gulp\n```\n\n```bash\ngem install bundler\n```\n\n```bash\ngit clone https://github.com/keitaoouchi/gulp-tdd-sample\ncd gulp-tdd-sample/devel\nnpm install\ngulp setup\ngulp\n```\n\n\u305d\u3057\u3066\nhttp://localhost:8080/hoge/fuga\n\u3078\u3002\n\n## gulp\u306e\u74b0\u5883\u3092\u4f5c\u308b\u305f\u3081\u306epackage.json\ndevel\u4ee5\u4e0b\u306b\u914d\u7f6e\u3057\u3066npm install\n\n```json:package.json\n{\n  \"name\": \"static\",\n  \"version\": \"0.0.1\",\n  \"description\": \"static files\",\n  \"main\": \"index.js\",\n  \"dependencies\": {},\n  \"devDependencies\": {\n    \"gulp\": \"3.8.8\",\n    \"gulp-coffee\": \"2.2.0\",\n    \"gulp-watch\": \"1.1.0\",\n    \"gulp-compass\": \"2.0.0\",\n    \"gulp-nodemon\": \"1.0.4\",\n    \"gulp-notify\": \"2.0.0\",\n    \"gulp-exec\": \"2.1.1\",\n    \"gulp-livereload\": \"2.1.1\",\n    \"gulp-plumber\": \"0.6.6\",\n    \"express\": \"4.9.8\",\n    \"jade\": \"1.7.0\",\n\t\"coffee-script\": \"1.8.0\"\n  }\n}\n```\n\n## compass/sass\u3092\u5c0e\u5165\u3059\u308b\u305f\u3081\u306eGemfile\n\u5c0e\u5165\u306fgulp\u306b\u3084\u3089\u305b\u308b\u306e\u3067Gemfile\u3092devel\u76f4\u4e0b\u306b\u8cbc\u308b\u3060\u3051\n\n```ruby:Gemfile\nsource 'http://rubygems.org'\n\ngem 'sass'\ngem 'compass'\n```\n\n## bower\u3067\u5c0e\u5165\u3059\u308b3rd\u30d1\u30fc\u30c6\u30fc\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092static/vendors\u306b\u914d\u7f6e\u3059\u308b.bowerrc\ndevel\u76f4\u4e0b\u306b\u914d\u7f6e\n\n```json:.bowerrc\n{\n  \"directory\": \"./../static/vendors\"\n}\n```\n\n## bower\u3067\u5c0e\u5165\u3059\u308b\u305f\u3081\u306ebower.json\u306e\u4e00\u4f8b\ndevel\u76f4\u4e0b\u306b\u914d\u7f6e\u3059\u308b\n\n```json:bower.json\n{\n  \"name\": \"static\",\n  \"version\": \"0.0.1\",\n  \"ignore\": [\n    \"**/.*\",\n    \"node_modules\",\n    \"components\"\n  ],\n  \"dependencies\": {\n    \"jquery\": \"2.1.1\",\n    \"backbone\": \"1.1.2\",\n    \"requirejs-domready\": \"2.0.1\",\n    \"requirejs\": \"2.1.14\",\n    \"underscore\": \"1.6.0\"\n  },\n  \"devDependencies\": {\n    \"mocha\": \"2.0.0\",\n    \"chai\": \"1.9.2\",\n    \"sinon\": \"http://sinonjs.org/releases/sinon-1.10.3.js\"\n  }\n}\n```\n\n## gulpfile.coffee\n\u3084\u306f\u308adevel\u76f4\u4e0b\u306b\u914d\u7f6e\n\n```coffeescript:gulpfile.coffee\ngulp = require 'gulp'\ncoffee = require 'gulp-coffee'\ncompass = require 'gulp-compass'\nnodemon = require 'gulp-nodemon'\nnotify = require 'gulp-notify'\nexec = require('child_process').exec\nlivereload = require 'gulp-livereload'\nplumber = require 'gulp-plumber'\nwatch = require 'gulp-watch'\n\nprintout = (callback) ->\n  (err, stdout, stderr) ->\n    console.log stdout\n    console.log stderr\n    callback err\n\ngulp.task 'setupGems', (cb) ->\n  exec 'bundle install', printout(cb)\n\ngulp.task 'setupBower', (cb) ->\n  exec 'rm -rf ./../static/vendors && bower install', printout(cb)\n\ngulp.task 'express', ->\n  nodemon\n    script: './test/server.js'\n\ngulp.task 'coffee', ->\n  src = './coffee/**/*.coffee'\n  testSrc = './test/coffee/**/*.coffee'\n  gulp.src(src)\n      .pipe watch(src)\n      .pipe plumber\n        errorHandler: notify.onError(\"Error: <%= error.message %>\")\n      .pipe coffee\n        bare: true\n      .pipe gulp.dest('./../static/js')\n      .pipe livereload()\n  gulp.src(testSrc)\n      .pipe watch(testSrc)\n      .pipe plumber\n        errorHandler: notify.onError(\"Error: <%= error.message %>\")\n      .pipe coffee\n        bare:true\n      .pipe gulp.dest('./test/js')\n      .pipe livereload()\n\ngulp.task 'compass', ->\n  src = './sass/**/*.sass'\n  testSrc = './test/sass/**/*.sass'\n  gulp.src(src)\n      .pipe watch(src)\n      .pipe plumber\n        errorHandler: notify.onError(\"Error: <%= error.message %>\")\n      .pipe compass\n        bundle_exec:true,\n        css: './../static/css'\n        sass: './sass'\n      .pipe livereload()\n  gulp.src(testSrc)\n      .pipe watch(testSrc)\n      .pipe plumber\n        errorHandler: notify.onError(\"Error: <%= error.message %>\")\n      .pipe compass\n        bundle_exec:true\n        css: './test/css'\n        sass: './test/sass'\n      .pipe livereload()\n\ngulp.task 'default', ['compass', 'coffee', 'express']\ngulp.task 'setup', ['setupGems', 'setupBower']\n```\n\n## devel/test/server.js\n\nmocha\u3092\u30d6\u30e9\u30a6\u30b6\u3067\u8d70\u3089\u305b\u308b\u305f\u3081\u306e\u30b5\u30fc\u30d0\u30fc\u3092express\u3067\u7c21\u5358\u306b\u3002\n\n```js:test/server.js\nvar express = require('express');\nvar http = require('http');\nvar app = express();\n\napp.set('port', process.env.PORT || 8080);\napp.set('view engine', 'jade');\napp.use(express.static('./../'));\n\napp.get(/(.+)(\\/.+)?/, function(req, res){\n  var path = req.params[0].replace('/', '');\n  res.render(__dirname + '/template', {target: path});\n});\n\nhttp.createServer(app).listen(app.get('port'), function(){\n  console.log(\"Express server listening on port \" + app.get('port'));\n});\n```\n\n\u3053\u306e\u30b5\u30fc\u30d0\u30fc\u3067devel/test/coffee/hoge/fuga-spec.coffee\u306e\u30c6\u30b9\u30c8\u7d50\u679c\u3092localhost:8080/hoge/fuga\u3067\u95b2\u89a7\u3057\u3066TDD\u3059\u308b\u3002livereload\u3057\u3066\u308b\u306e\u3067\u30d6\u30e9\u30a6\u30b6\u306b\u9069\u5f53\u306a\u62e1\u5f35\u5165\u308c\u308b\u3068\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306b\u53cd\u6620\u3055\u308c\u308b\u306e\u3067\u5b09\u3057\u3044\u3002\n\n## require.js\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092coffee\u3067\u66f8\u304f\n\n```coffeescript:devel/coffee/config.coffee\nrequire =\n  baseUrl: '/static'\n  paths:\n    jquery: 'vendors/jquery/dist/jquery.min'\n    underscore: 'vendors/underscore/underscore'\n    backbone: 'vendors/backbone/backbone'\n    domReady: 'vendors/requirejs-domready/domReady'\n  shim:\n    underscore:\n      exports: '_'\n    backbone:\n      deps: [\"jquery\", \"underscore\"]\n      exports: \"Backbone\"\n```\n\n```coffeescript:devel/test/coffee/spec-config.coffee\nrequire_test =\n  paths:\n    mocha: 'vendors/mocha/mocha'\n    chai: 'vendors/chai/chai'\n    sinon: 'vendors/sinon/index'\n  shim:\n    mocha:\n      exports: 'mocha'\n    chai:\n      exports: 'chai'\n    sinon:\n      exports: 'sinon'\n\nrequire = window.require || {}\n\nfor key, val of require_test.paths\n  require.paths[key] = val\nfor key, val of require_test.shim\n  require.shim[key] = val\n```\n\n## \u30c6\u30b9\u30c8\u5bfe\u8c61\u3068\u306a\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u4f8b\n\n\u3082\u306e\u3059\u3054\u304f\u3069\u3046\u3067\u3082\u3044\u3044\u611f\u3058\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092Requirejs\u3067\u4f5c\u308a\u307e\u3059\u3002\n\n```coffeescript:devel/hoge/fuga.coffee\ndefine(\n  'js/hoge/fuga',\n  ['jquery', 'underscore', 'backbone'],\n  ($, _, Backbone) ->\n    'use strict'\n\n    App =\n      Models: {}\n      Collections: {}\n      Views: {}\n\n    class App.Models.Fuga extends Backbone.Model\n\n      initialize: (obj) ->\n        @name = obj.name\n\n    class App.Collections.Fugas extends Backbone.Collection\n\n      model: App.Models.Fuga\n\n    class App.Views.FugaView extends Backbone.View\n\n      initialize: ->\n        @listenTo(@collection, 'sync', @render)\n        @collection.fetch()\n\n      render: ->\n\n    App.initialize = ->\n    if Object.freeze? then Object.freeze App else App\n)\n```\n\n## \u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30c6\u30b9\u30c8\u3059\u308bspec\u4f8b\n\n```coffeescript:devel/test/coffee/hoge/fuga-spec.coffee\nrequire(['js/hoge/fuga', 'backbone', 'mocha', 'chai', 'sinon'], (App, Backbone, mocha, chai, sinon) ->\n  'use strict'\n\n  mocha.ui 'bdd'\n\n  chai.should()\n\n  describe 'App', ->\n    it 'App.Models.Fuga\u306fBackbone.Model\u3092\u7d99\u627f', ->\n      App.Models.Fuga.prototype.should.be.an.instanceof Backbone.Model\n    it 'App.Collections.Fugas\u306fBackbone.Collection\u3092\u7d99\u627f', ->\n      App.Collections.Fugas.prototype.should.be.an.instanceof Backbone.Collection\n    it 'App.Views.FugaView\u306fBackbone.View\u3092\u7d99\u627f', ->\n      App.Views.FugaView.prototype.should.be.an.instanceof Backbone.View\n\n  describe 'App.Models.Fuga', ->\n\n    fuga = null\n    before ->\n      fuga = new App.Models.Fuga({name: 'fuga'})\n\n    it 'fuga\u306ename\u304cfuga', ->\n      fuga.name.should.be.equals 'fuga'\n\n  describe 'App.View.FugaView', ->\n\n    it '\u521d\u671f\u5316\u6642\u306bcollection\u3092fetch\u3059\u308b', ->\n      iamspy = new App.Collections.Fugas()\n      iamspy.fetch = sinon.spy()\n      new App.Views.FugaView collection: iamspy\n      iamspy.fetch.called.should.be.true\n\n  mocha.run()\n\n)\n```\n\n## mocha\u3067\u7d50\u679c\u3092\u8868\u793a\u3059\u308b\u305f\u3081\u306ejade\u30c6\u30f3\u30d7\u30ec\n\n```jade:template.jade\ndoctype html\nhtml\n  head\n    title (^q^) < #{target} \u306e\u3066\u3059\u3068\n    link(rel='stylesheet', href='/static/vendors/mocha/mocha.css')\n    link(rel='stylesheet', href='/devel/test/css/style.css')\n\n  body\n    div(class='title')\n      h1 (^q^) < #{target} \u306e\u3066\u3059\u3068\n    div(id='mocha')\n    script(src='/static/js/config.js')\n    script(src='/devel/test/js/spec-config.js')\n    script(src='/static/vendors/requirejs/require.js')\n    script(src='/devel/test/js/#{target}-spec.js')\n```\n"}