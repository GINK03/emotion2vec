{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\n[DIR_NAME]\u4ee5\u4e0b\u30d5\u30a1\u30a4\u30eb\u5168\u3066\u3092\u5bfe\u8c61\u306b\u3001\n[TARGET_ENCODING_LIST]\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u30b3\u30fc\u30c9\u306e\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u304b\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3001\n[OUTPUT_NAME]\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u51fa\u529b\u3057\u307e\u3059\u3002\n\u5224\u5225\u51fa\u6765\u306a\u3051\u308c\u3070\u3001binary\u3068\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n\u74b0\u5883\nWindows8\uff0bPython2.6\u7cfb\n\n\u30b3\u30fc\u30c9\n\ncheck_encoding.py\n#!/usr/bin/python\n# -*- coding: utf-8 -*-\n# vim: fileencoding=utf-8\n\nimport os , sys\n\nDIR_NAME = 'C:\\\\Program Files\\\\'\nOUTPUT_NAME = 'result_file_encoding_list.txt'\n\nTARGET_ENCODING_LIST = [\n    'utf-8',\n    'shift-jis',\n    'euc-jp',\n    'iso2022-jp'\n]\n\nFLAG_STDOUT = True\n#FLAG_STDOUT = False\n\nimport os, sys\n\nwrite = sys.stdout.write\n\ndef guess_charset(data):\n    file = lambda d, encoding: d.decode(encoding) and encoding\n    for enc in TARGET_ENCODING_LIST:\n        try:\n            file(data, enc)\n            return enc\n        except:\n            pass\n    return 'binary'\n\nout = open(OUTPUT_NAME, 'w')\nfor dirpath, dirs, files in os.walk(DIR_NAME):\n    for fn in files:\n        path = os.path.join(dirpath, fn)\n        fobj = file(path, 'rU')\n        data = fobj.read()\n        fobj.close()\n        try:\n            enc = guess_charset(data)\n        except:\n            continue\n        str = path + ',' + enc + '\\n'\n        try:\n            if FLAG_STDOUT == True:\n                write(str)\n            out.write(str)\n        except:\n            continue\n\n\n\n\u88dc\u8db3\n\u4f8b\u5916\u51e6\u7406\u306f\u3001\u9069\u5f53\u3067\u3059\u3002\n\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u65e5\u672c\u8a9e\u6587\u5b57\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3068\u3001\u6587\u5b57\u5316\u3051\u3057\u305f\u308a\u3057\u307e\u3059\u3002\n# \u6982\u8981\n\n[DIR_NAME]\u4ee5\u4e0b\u30d5\u30a1\u30a4\u30eb\u5168\u3066\u3092\u5bfe\u8c61\u306b\u3001\n[TARGET_ENCODING_LIST]\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u6587\u5b57\u30b3\u30fc\u30c9\u306e\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u304b\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3001\n[OUTPUT_NAME]\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u51fa\u529b\u3057\u307e\u3059\u3002\n\u5224\u5225\u51fa\u6765\u306a\u3051\u308c\u3070\u3001binary\u3068\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n\n# \u74b0\u5883\nWindows8\uff0bPython2.6\u7cfb\n\n\n# \u30b3\u30fc\u30c9\n\n```python:check_encoding.py\n#!/usr/bin/python\n# -*- coding: utf-8 -*-\n# vim: fileencoding=utf-8\n\nimport os , sys\n\nDIR_NAME = 'C:\\\\Program Files\\\\'\nOUTPUT_NAME = 'result_file_encoding_list.txt'\n\nTARGET_ENCODING_LIST = [\n\t'utf-8',\n\t'shift-jis',\n\t'euc-jp',\n\t'iso2022-jp'\n]\n\nFLAG_STDOUT = True\n#FLAG_STDOUT = False\n\nimport os, sys\n\nwrite = sys.stdout.write\n\ndef guess_charset(data):\n\tfile = lambda d, encoding: d.decode(encoding) and encoding\n\tfor enc in TARGET_ENCODING_LIST:\n\t\ttry:\n\t\t\tfile(data, enc)\n\t\t\treturn enc\n\t\texcept:\n\t\t\tpass\n\treturn 'binary'\n\nout = open(OUTPUT_NAME, 'w')\nfor dirpath, dirs, files in os.walk(DIR_NAME):\n\tfor fn in files:\n\t\tpath = os.path.join(dirpath, fn)\n\t\tfobj = file(path, 'rU')\n\t\tdata = fobj.read()\n\t\tfobj.close()\n\t\ttry:\n\t\t\tenc = guess_charset(data)\n\t\texcept:\n\t\t\tcontinue\n\t\tstr = path + ',' + enc + '\\n'\n\t\ttry:\n\t\t\tif FLAG_STDOUT == True:\n\t\t\t\twrite(str)\n\t\t\tout.write(str)\n\t\texcept:\n\t\t\tcontinue\n```\n\n\n# \u88dc\u8db3\n\n\u4f8b\u5916\u51e6\u7406\u306f\u3001\u9069\u5f53\u3067\u3059\u3002\n\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u65e5\u672c\u8a9e\u6587\u5b57\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3068\u3001\u6587\u5b57\u5316\u3051\u3057\u305f\u308a\u3057\u307e\u3059\u3002\n", "tags": ["Python", "encoding", "\u6587\u5b57\u30b3\u30fc\u30c9"]}