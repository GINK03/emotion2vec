{"context": "\n\n\u306f\u3058\u3081\u306b\n\u81ea\u5206\u306e\u52c9\u5f37\u304c\u3066\u3089\u3001Amazon CloudSearch\u306b\u30c7\u30fc\u30bf\u3092\u767b\u9332\u3057\u3066\u3001CloudSearch\u3067\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3059\u308b\u624b\u9806\u306b\u3064\u3044\u3066\u8a18\u3057\u307e\u3059\u3002\nCloudSearch\u3067\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3059\u308b\u306b\u306f\u3001\u691c\u7d22\u7528\u306e\u5143\u30c7\u30fc\u30bf\u3092\u8a18\u8f09\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092CloudSearch\u3078\u767b\u9332\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002CloudSearch\u306f\u767b\u9332\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u5143\u306b\u3057\u3066\u3001\u30c7\u30fc\u30bf\u691c\u7d22\u7528\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\u3053\u306e\u30da\u30fc\u30b8\u3067\u306f\u3001Amazon S3\u306bCloudSearch\u691c\u7d22\u7528\u306e\u5143\u30c7\u30fc\u30bf\u3068\u306a\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb(json\u30d5\u30a1\u30a4\u30eb)\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u3001Tokyo\u30ea\u30fc\u30b8\u30e7\u30f3\u306bCloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u3092\u4f5c\u6210\u3057\u3001CloudSearch\u3067\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3059\u308b\u624b\u9806\u306b\u3064\u3044\u3066\u8a18\u3057\u307e\u3059\u3002\n\n\u53c2\u8003\u8cc7\u6599\nAmazon CloudSearch \u7528\u306b\u30c7\u30fc\u30bf\u3092\u6e96\u5099\nhttps://docs.aws.amazon.com/ja_jp/cloudsearch/latest/developerguide/preparing-data.html\nAmazon CloudSearch \u30c9\u30e1\u30a4\u30f3\u3078\u306e\u691c\u7d22\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u9001\u4fe1\nhttps://docs.aws.amazon.com/ja_jp/cloudsearch/latest/developerguide/submitting-search-requests.html\nAmazon CloudSearch \u3067\u306e\u30c6\u30ad\u30b9\u30c8\u306e\u691c\u7d22\nhttps://docs.aws.amazon.com/ja_jp/cloudsearch/latest/developerguide/searching-text.html\nAmazon CloudSearch \u306e\u30c6\u30ad\u30b9\u30c8\u5206\u6790\u30b9\u30ad\u30fc\u30e0\u306e\u8a2d\u5b9a\nhttps://docs.aws.amazon.com/ja_jp/cloudsearch/latest/developerguide/configuring-analysis-schemes.html\n\nAmazon CloudSearch\u8a2d\u5b9a\u624b\u9806\n\n(1) AWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u3078\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\u753b\u9762\u53f3\u4e0a\u306eTokyo\u30ea\u30fc\u30b8\u30e7\u30f3\u300c\u30a2\u30b8\u30a2\u30d1\u30b7\u30d5\u30a3\u30c3\u30af (\u6771\u4eac)\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n(2) AWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u300cCloudSearch\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\nhttps://ap-northeast-1.console.aws.amazon.com/cloudsearch/home?region=ap-northeast-1#\n\n(3)\u300cCreate a new search domain\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u300cWelcome to Amazon CloudSearch\u300d\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u300cCreate a new search domain\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n(4) CloudSearch\u691c\u7d22\u7528\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u3092\u53c2\u8003\u306b\u3057\u3066\u3001CloudSearch\u306e\u691c\u7d22\u5bfe\u8c61\u3068\u3057\u305f\u3044\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb(CloudSearch\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u5143\u30c7\u30fc\u30bf)\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nhttps://docs.aws.amazon.com/ja_jp/cloudsearch/latest/developerguide/preparing-data.html\njson\u5f62\u5f0f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n[ec2-user@example-cloudsearch-client ~]$ vi example_document.json\n\n\nexample_document.json\n{ \"type\": \"add\",\n  \"id\":   \"tt0484562\",\n  \"fields\": {\n    \"title\": \"The Seeker: The Dark Is Rising\",\n    \"directors\": [\"Cunningham, David L.\"],\n    \"genres\": [\"Adventure\",\"Drama\",\"Fantasy\",\"Thriller\"],\n    \"actors\": [\"McShane, Ian\",\"Eccleston, Christopher\",\"Conroy, Frances\",\n              \"Crewson, Wendy\",\"Ludwig, Alexander\",\"Cosmo, James\",\n              \"Warner, Amelia\",\"Hickey, John Benjamin\",\"Piddock, Jim\",\n              \"Lockhart, Emma\"]\n  }\n}\n\n\njq\u30b3\u30de\u30f3\u30c9\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u4f5c\u6210\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u304cjson\u3068\u3057\u3066\u6709\u52b9\u304b\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n[ec2-user@example-cloudsearch-client ~]$ sudo yum install jq\n\n[ec2-user@example-cloudsearch-client ~]$ cat example_document.json | jq '.'\n{\n  \"type\": \"add\",\n  \"id\": \"tt0484562\",\n  \"fields\": {\n    \"title\": \"The Seeker: The Dark Is Rising\",\n    \"directors\": [\n      \"Cunningham, David L.\"\n    ],\n    \"genres\": [\n      \"Adventure\",\n      \"Drama\",\n      \"Fantasy\",\n      \"Thriller\"\n    ],\n    \"actors\": [\n      \"McShane, Ian\",\n      \"Eccleston, Christopher\",\n      \"Conroy, Frances\",\n      \"Crewson, Wendy\",\n      \"Ludwig, Alexander\",\n      \"Cosmo, James\",\n      \"Warner, Amelia\",\n      \"Hickey, John Benjamin\",\n      \"Piddock, Jim\",\n      \"Lockhart, Emma\"\n    ]\n  }\n}\n[ec2-user@example-cloudsearch-client ~]$\n\n\n(5) CloudSearch\u691c\u7d22\u7528\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u683c\u7d0d\u3059\u308bAmazon S3\u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nAWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u300cS3\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\nhttps://console.aws.amazon.com/s3/home?region=ap-northeast-1\n\u300c\u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\u4eca\u56de\u306e\u4f8b\u3067\u306f\u4ee5\u4e0b\u306eS3\u30d0\u30b1\u30c3\u30c8( s3://example-search-document )\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n\n\u8a2d\u5b9a\u9805\u76ee\n\u5165\u529b\u3059\u308b\u5185\u5bb9\n\n\n\n\n\u30d0\u30b1\u30c3\u30c8\u540d\nexample-search-document\n\n\n\u30ea\u30fc\u30b8\u30e7\u30f3\nTokyo\n\n\n\n\n(6) S3\u30d0\u30b1\u30c3\u30c8\u306b\u4f5c\u6210\u3057\u305fCloudSearch\u691c\u7d22\u7528\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\u4f5c\u6210\u3057\u305fS3\u30d0\u30b1\u30c3\u30c8\u306b\u5bfe\u3057\u3066\u3001\u524d\u8ff0\u306e\u624b\u9806(4)\u3067\u4f5c\u6210\u3057\u305fCloudSearch\u691c\u7d22\u7528\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n[ec2-user@example-cloudsearch-client ~]$ aws s3 cp example_document.json s3://example-search-document/document/\nupload: ./example_document.json to s3://example-search-document/document/example_document.json\n[ec2-user@example-cloudsearch-client ~]$\n\n[ec2-user@example-cloudsearch-client ~]$ aws s3 ls s3://example-search-document/document/example_document.json\n2016-09-25 01:08:53        452 example_document.json\n[ec2-user@example-cloudsearch-client ~]$\n\n\n(7) \u4f5c\u6210\u3059\u308bCloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u60c5\u5831\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\u300cCreate New Search Domain\u300d\u306e\u300cNAME YOUR DOMAIN\u300d\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u4eca\u56de\u306e\u4f8b\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5165\u529b\u3057\u307e\u3059\u3002\n\n\n\n\u8a2d\u5b9a\u9805\u76ee\n\u5165\u529b\u3059\u308b\u5185\u5bb9\n\n\n\n\nSearch Domain Name\nexample-search-domain\n\n\nDesired Instance Type\nUse default\n\n\nDesired Replication Count\nUse default\n\n\n\n\u300cContinue\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n(8) CloudSearch\u691c\u7d22\u7528\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u683c\u7d0d\u5834\u6240\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u300cCONFIGURE INDEX\u300d\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u300cHow do you want to configure your index fields?\u300d\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u300cAnalyze sample object(s) from Amazon S3\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002S3\u306e\u5404\u8a2d\u5b9a\u9805\u76ee\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\n\n\u8a2d\u5b9a\u9805\u76ee\n\u9078\u629e\u3059\u308b\u5185\u5bb9\n\n\n\n\nS3 Bucket\nexample-search-document\n\n\nPrefix\ndocument/example_document.json\n\n\n\n\u300cAdd\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u300cContinue\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n(9) CloudSearch\u3067\u691c\u7d22\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u300cREVIEW INDEX CONFIGURATION\u300d\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u300cSuggested Index Field Configuration\u300d\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u300cAdd Index Field\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u691c\u7d22\u7528\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u4ee5\u4e0b3\u3064\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u300cType\u300d\u306f\u300cText\u300d\u3001\u300cAnalysis Scheme\u300d\u306f\u300cEng\u300d\u3092\u9078\u629e\u3057\u3066\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\n\n\u8ffd\u52a0\u3059\u308bIndex Fields\nType\nAnalysis Scheme\n\n\n\n\ndirectors\nText\nEng\n\n\ngenres\nText\nEng\n\n\nactors\nText\nEng\n\n\n\n\u4e0a\u8a18\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3057\u3001\u300cIndex Fields\u300d\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u305f\u3089\u300cContinue\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u3053\u308c\u306b\u3088\u308a\u3001CloudSearch\u306f\u524d\u8ff0(4)\u3067S3\u30d0\u30b1\u30c3\u30c8\u306b\u683c\u7d0d\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb(json)\u3092\u53d6\u308a\u8fbc\u3093\u3067\u3001\u691c\u7d22\u7528\u306e\u30c7\u30fc\u30bf(\u30a4\u30f3\u30c7\u30c3\u30af\u30b9)\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n\n\nName\nType\nSearch\nFacet\nReturn\nSort\nHighlight\nAnalysis Scheme\nDefault Value\nSource Field\nRemove\n\n\n\n\ncontent\nText\n\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\nEng\n\n\n\n\n\ncontent_encoding\nText\n\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\nEng\n\n\n\n\n\ncontent_type\nText\n\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\nEng\n\n\n\n\n\nresourcename\nText\n\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\nEng\n\n\n\n\n\ndirectors\nText\n\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\nEng\n\n\n\n\n\ngenres\nText\n\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\nEng\n\n\n\n\n\nactors\nText\n\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\nEng\n\n\n\n\n\n\n\n(10) CloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306e\u4f8b\u3067\u306f\u7279\u5b9aIP\u30a2\u30c9\u30ec\u30b9(\u4f8b:198.51.100.13)\u304b\u3089\u306e\u307fCloudSearch\u306e\u30c7\u30fc\u30bf\u691c\u7d22\u3092\u8a31\u53ef\u3057\u307e\u3059\u3002\n\u3053\u306e\u8a2d\u5b9a\u306b\u3088\u308a\u3001\u7279\u5b9aIP\u30a2\u30c9\u30ec\u30b9(\u4f8b:198.51.100.13)\u4ee5\u5916\u304b\u3089CloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u3078\u691c\u7d22\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u308b\u4e8b\u3092\u7981\u6b62\u51fa\u6765\u307e\u3059\u3002\n\u300cSETUP ACCESS POLICIES\u300d\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u300cCurrent Policy\u300d\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5165\u529b\u3057\u307e\u3059\u3002\n\n\u5165\u529b\u3059\u308bPolicy\u5185\u5bb9\n{\n  \"Version\":\"2012-10-17\",\n  \"Statement\":[\n    {\n      \"Sid\":\"search_only\",\n      \"Effect\":\"Allow\",\n      \"Principal\":\"*\",\n      \"Action\":[\"cloudsearch:search\"],\n      \"Condition\":{\"IpAddress\":{\"aws:SourceIp\":\"198.51.100.13/32\"}}\n    }\n  ]\n}\n\n\n\u300cContinue\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n(11) CloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u306e\u4f5c\u6210\u3092\u958b\u59cb\u3057\u307e\u3059\u3002\n\u300cCONFIRM\u300d\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u300cContinue\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n(12) CloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u306e\u4f5c\u6210\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u5f85\u3061\u307e\u3059\u3002\nAWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u4ee5\u4e0b\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\nCongratulations\nYou have successfully created the domain example-search-domain. The domain will take approximately 10 minutes to initialize. Once the domain is initialized, you may upload documents, and make any other changes to the domain.\n\nAWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u53f3\u4e0b\u306e\u300cOK\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\nAWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u300cCloudSearch\u300d->\u300cDashboard\u300d\u753b\u9762\u3078\u5207\u308a\u66ff\u308f\u308a\u307e\u3059\u3002\nhttps://ap-northeast-1.console.aws.amazon.com/cloudsearch/home?region=ap-northeast-1#domainDashboard,example-search-domain\nCloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u306e\u4f5c\u6210\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u5f85\u3061\u307e\u3059\u3002\n\n(13) CloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u306e\u4f5c\u6210\u304c\u5b8c\u4e86\u3057\u305f\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\nAWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u300cCloudSearch\u300d->\u300cDashboard\u300d\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\nhttps://ap-northeast-1.console.aws.amazon.com/cloudsearch/home?region=ap-northeast-1#domainDashboard,example-search-domain\n\u300cDomain Status for example-search-domain\u300d\u306b\u300cexample-search-domain is: ACTIVE\u300d\u3068\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\u300cDashboard\u300d\u306e\u300cSearch Endpoint\u300d\u306eCloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u63a7\u3048\u3066\u304a\u304d\u307e\u3059\u3002\u3053\u306e\u300cSearch Endpoint\u300d\u306e\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u3092\u6307\u5b9a\u3057\u3066\u3001CloudSearch\u306b\u767b\u9332\u3057\u305f\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u51fa\u6765\u307e\u3059\u3002\u8a73\u7d30\u306f\u5f8c\u8ff0\u3057\u307e\u3059\u3002\nSearchable Documents:   1\nIndex Fields:   7\nSearch Endpoint:    search-example-search-domain-**************************.ap-northeast-1.cloudsearch.amazonaws.com\nDocument Endpoint:  doc-example-search-domain-**************************.ap-northeast-1.cloudsearch.amazonaws.com\nDomain ARN: arn:aws:cloudsearch:ap-northeast-1:464959028036:domain/example-search-domain\nEngine Type:    CloudSearch (2013 API)\n\n\n(14) CloudSearch\u306e\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u3066CloudSearch\u304b\u3089\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3057\u307e\u3059\u3002\n\u524d\u8ff0(13)\u306e\u300cSearch Endpoint\u300d\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308bCloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u6307\u5b9a\u3057\u3066\u3001\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3057\u307e\u3059\u3002\nCloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u4f8b\nsearch-example-search-domain-**************************.ap-northeast-1.cloudsearch.amazonaws.com\n\nCloudSearch\u306e\u30c7\u30fc\u30bf\u691c\u7d22\u306b\u3064\u3044\u3066\u306f\u3001CloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3057\u305fIP\u30a2\u30c9\u30ec\u30b9(198.51.100.13/32)\u304b\u3089\u4ee5\u4e0b\u306e\u691c\u7d22\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u4fe1\u3059\u308b\u4e8b\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n[ec2-user@example-cloudsearch-client ~]$ /sbin/ifconfig eth0 | grep 'inet addr'\n          inet addr:198.51.100.13  Bcast:198.51.100.255  Mask:255.255.240.0\n[ec2-user@example-cloudsearch-client ~]$\n\n\n(14-1) CloudSearch\u304b\u3089'McShane'\u3068\u3044\u3046\u6587\u5b57\u5217\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001CloudSearch\u304b\u3089'McShane'\u3068\u3044\u3046\u6587\u5b57\u5217\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3057\u307e\u3059\u3002\nCloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u3078\u6b63\u5e38\u306b\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306bCloudSarch\u304b\u3089\u306e\u691c\u7d22\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u300cHit\u300d\u306b\u691c\u7d22\u7d50\u679c\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u524d\u8ff0(4)\u3067S3\u30d0\u30b1\u30c3\u30c8\u306b\u683c\u7d0d\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb(s3://example-search-document/document/example_document.json)\u3092\u5143\u306b\u3057\u3066\u3001CloudSearch\u691c\u7d22\u7528\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u691c\u7d22\u7d50\u679c\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n[ec2-user@example-cloudsearch-client ~]$ aws cloudsearchdomain --region ap-northeast-1 --endpoint-url http://search-example-search-domain-**************************.ap-northeast-1.cloudsearch.amazonaws.com search --search-query McShane\n{\n    \"status\": {\n        \"timems\": 1,\n        \"rid\": \"jr+w6/UqlAEKeR92\"\n    },\n    \"hits\": {\n        \"found\": 1,\n        \"hit\": [\n            {\n                \"fields\": {\n                    \"content\": [\n                        \"{ \\\"type\\\": \\\"add\\\",   \\\"id\\\":   \\\"tt0484562\\\",   \\\"fields\\\": {     \\\"title\\\": \\\"The Seeker: The Dark Is Rising\\\",     \\\"directors\\\": [\\\"Cunningham, David L.\\\"],     \\\"genres\\\": [\\\"Adventure\\\",\\\"Drama\\\",\\\"Fantasy\\\",\\\"Thriller\\\"],     \\\"actors\\\": [\\\"McShane, Ian\\\",\\\"Eccleston, Christopher\\\",\\\"Conroy, Frances\\\",               \\\"Crewson, Wendy\\\",\\\"Ludwig, Alexander\\\",\\\"Cosmo, James\\\",               \\\"Warner, Amelia\\\",\\\"Hickey, John Benjamin\\\",\\\"Piddock, Jim\\\",               \\\"Lockhart, Emma\\\"]   } }\"\n                    ],\n                    \"resourcename\": [\n                        \"example_document.json\"\n                    ],\n                    \"content_encoding\": [\n                        \"ISO-8859-1\"\n                    ],\n                    \"content_type\": [\n                        \"application/json\"\n                    ]\n                },\n                \"id\": \"example-search-document/document/example_document.json\"\n            }\n        ],\n        \"start\": 0\n    }\n}\n[ec2-user@example-cloudsearch-client ~]$\n\n\n(14-2) CloudSearch\u304b\u3089actores\u30d5\u30a3\u30fc\u30eb\u30c9\u306b'McShane'\u3068\u3044\u3046\u6587\u5b57\u5217\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001CloudSearch\u304b\u3089actores\u30d5\u30a3\u30fc\u30eb\u30c9\u306b'McShane'\u3068\u3044\u3046\u6587\u5b57\u5217\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3057\u307e\u3059\u3002\n[ec2-user@example-cloudsearch-client ~]$ aws cloudsearchdomain --region ap-northeast-1 --endpoint-url http://search-example-search-domain-**************************.ap-northeast-1.cloudsearch.amazonaws.com search --search-query \"actores:'McShane'\"\n{\n    \"status\": {\n        \"timems\": 5,\n        \"rid\": \"nZCy6/UqlgEKeR92\"\n    },\n    \"hits\": {\n        \"found\": 1,\n        \"hit\": [\n            {\n                \"fields\": {\n                    \"content\": [\n                        \"{ \\\"type\\\": \\\"add\\\",   \\\"id\\\":   \\\"tt0484562\\\",   \\\"fields\\\": {     \\\"title\\\": \\\"The Seeker: The Dark Is Rising\\\",     \\\"directors\\\": [\\\"Cunningham, David L.\\\"],     \\\"genres\\\": [\\\"Adventure\\\",\\\"Drama\\\",\\\"Fantasy\\\",\\\"Thriller\\\"],     \\\"actors\\\": [\\\"McShane, Ian\\\",\\\"Eccleston, Christopher\\\",\\\"Conroy, Frances\\\",               \\\"Crewson, Wendy\\\",\\\"Ludwig, Alexander\\\",\\\"Cosmo, James\\\",               \\\"Warner, Amelia\\\",\\\"Hickey, John Benjamin\\\",\\\"Piddock, Jim\\\",               \\\"Lockhart, Emma\\\"]   } }\"\n                    ],\n                    \"resourcename\": [\n                        \"example_document.json\"\n                    ],\n                    \"content_encoding\": [\n                        \"ISO-8859-1\"\n                    ],\n                    \"content_type\": [\n                        \"application/json\"\n                    ]\n                },\n                \"id\": \"example-search-document/document/example_document.json\"\n            }\n        ],\n        \"start\": 0\n    }\n}\n[ec2-user@example-cloudsearch-client ~]$\n\n[ec2-user@example-cloudsearch-client ~]$ aws cloudsearchdomain --region ap-northeast-1 --endpoint-url http://search-example-search-domain-**************************.ap-northeast-1.cloudsearch.amazonaws.com search --search-query \"actores:'McShane'\" --return _no_fields\n{\n    \"status\": {\n        \"timems\": 42,\n        \"rid\": \"lfve6vUqbgp5H3Y=\"\n    },\n    \"hits\": {\n        \"found\": 1,\n        \"hit\": [\n            {\n                \"id\": \"example-search-document/document/example_document.json\"\n            }\n        ],\n        \"start\": 0\n    }\n}\n[ec2-user@example-cloudsearch-client ~]$\n\n\n\u4ee5\u4e0a\u306b\u306a\u308a\u307e\u3059\u3002\n\u306f\u3058\u3081\u306b\n===\n\n\u81ea\u5206\u306e\u52c9\u5f37\u304c\u3066\u3089\u3001Amazon CloudSearch\u306b\u30c7\u30fc\u30bf\u3092\u767b\u9332\u3057\u3066\u3001CloudSearch\u3067\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3059\u308b\u624b\u9806\u306b\u3064\u3044\u3066\u8a18\u3057\u307e\u3059\u3002\n\nCloudSearch\u3067\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3059\u308b\u306b\u306f\u3001\u691c\u7d22\u7528\u306e\u5143\u30c7\u30fc\u30bf\u3092\u8a18\u8f09\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092CloudSearch\u3078\u767b\u9332\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002CloudSearch\u306f\u767b\u9332\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u5143\u306b\u3057\u3066\u3001\u30c7\u30fc\u30bf\u691c\u7d22\u7528\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u30da\u30fc\u30b8\u3067\u306f\u3001Amazon S3\u306bCloudSearch\u691c\u7d22\u7528\u306e\u5143\u30c7\u30fc\u30bf\u3068\u306a\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb(json\u30d5\u30a1\u30a4\u30eb)\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u3001Tokyo\u30ea\u30fc\u30b8\u30e7\u30f3\u306bCloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u3092\u4f5c\u6210\u3057\u3001CloudSearch\u3067\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3059\u308b\u624b\u9806\u306b\u3064\u3044\u3066\u8a18\u3057\u307e\u3059\u3002\n\n\u53c2\u8003\u8cc7\u6599\n===\n\nAmazon CloudSearch \u7528\u306b\u30c7\u30fc\u30bf\u3092\u6e96\u5099\nhttps://docs.aws.amazon.com/ja_jp/cloudsearch/latest/developerguide/preparing-data.html\n\nAmazon CloudSearch \u30c9\u30e1\u30a4\u30f3\u3078\u306e\u691c\u7d22\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u9001\u4fe1\nhttps://docs.aws.amazon.com/ja_jp/cloudsearch/latest/developerguide/submitting-search-requests.html\n\nAmazon CloudSearch \u3067\u306e\u30c6\u30ad\u30b9\u30c8\u306e\u691c\u7d22\nhttps://docs.aws.amazon.com/ja_jp/cloudsearch/latest/developerguide/searching-text.html\n\nAmazon CloudSearch \u306e\u30c6\u30ad\u30b9\u30c8\u5206\u6790\u30b9\u30ad\u30fc\u30e0\u306e\u8a2d\u5b9a\nhttps://docs.aws.amazon.com/ja_jp/cloudsearch/latest/developerguide/configuring-analysis-schemes.html\n\nAmazon CloudSearch\u8a2d\u5b9a\u624b\u9806\n===\n\n## (1) AWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u3078\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\n\u753b\u9762\u53f3\u4e0a\u306eTokyo\u30ea\u30fc\u30b8\u30e7\u30f3\u300c\u30a2\u30b8\u30a2\u30d1\u30b7\u30d5\u30a3\u30c3\u30af (\u6771\u4eac)\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n## (2) AWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u300cCloudSearch\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\nhttps://ap-northeast-1.console.aws.amazon.com/cloudsearch/home?region=ap-northeast-1#\n\n## (3)\u300cCreate a new search domain\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u300cWelcome to Amazon CloudSearch\u300d\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u300cCreate a new search domain\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n## (4) CloudSearch\u691c\u7d22\u7528\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u3092\u53c2\u8003\u306b\u3057\u3066\u3001CloudSearch\u306e\u691c\u7d22\u5bfe\u8c61\u3068\u3057\u305f\u3044\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb(CloudSearch\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u5143\u30c7\u30fc\u30bf)\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nhttps://docs.aws.amazon.com/ja_jp/cloudsearch/latest/developerguide/preparing-data.html\n\njson\u5f62\u5f0f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```\n[ec2-user@example-cloudsearch-client ~]$ vi example_document.json\n```\n\n```json:example_document.json\n{ \"type\": \"add\",\n  \"id\":   \"tt0484562\",\n  \"fields\": {\n    \"title\": \"The Seeker: The Dark Is Rising\",\n    \"directors\": [\"Cunningham, David L.\"],\n    \"genres\": [\"Adventure\",\"Drama\",\"Fantasy\",\"Thriller\"],\n    \"actors\": [\"McShane, Ian\",\"Eccleston, Christopher\",\"Conroy, Frances\",\n              \"Crewson, Wendy\",\"Ludwig, Alexander\",\"Cosmo, James\",\n              \"Warner, Amelia\",\"Hickey, John Benjamin\",\"Piddock, Jim\",\n              \"Lockhart, Emma\"]\n  }\n}\n```\n\njq\u30b3\u30de\u30f3\u30c9\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u4f5c\u6210\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u304cjson\u3068\u3057\u3066\u6709\u52b9\u304b\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n\n```\n[ec2-user@example-cloudsearch-client ~]$ sudo yum install jq\n```\n\n```\n[ec2-user@example-cloudsearch-client ~]$ cat example_document.json | jq '.'\n{\n  \"type\": \"add\",\n  \"id\": \"tt0484562\",\n  \"fields\": {\n    \"title\": \"The Seeker: The Dark Is Rising\",\n    \"directors\": [\n      \"Cunningham, David L.\"\n    ],\n    \"genres\": [\n      \"Adventure\",\n      \"Drama\",\n      \"Fantasy\",\n      \"Thriller\"\n    ],\n    \"actors\": [\n      \"McShane, Ian\",\n      \"Eccleston, Christopher\",\n      \"Conroy, Frances\",\n      \"Crewson, Wendy\",\n      \"Ludwig, Alexander\",\n      \"Cosmo, James\",\n      \"Warner, Amelia\",\n      \"Hickey, John Benjamin\",\n      \"Piddock, Jim\",\n      \"Lockhart, Emma\"\n    ]\n  }\n}\n[ec2-user@example-cloudsearch-client ~]$\n```\n\n## (5) CloudSearch\u691c\u7d22\u7528\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u683c\u7d0d\u3059\u308bAmazon S3\u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nAWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u300cS3\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\nhttps://console.aws.amazon.com/s3/home?region=ap-northeast-1\n\n\u300c\u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\u4eca\u56de\u306e\u4f8b\u3067\u306f\u4ee5\u4e0b\u306eS3\u30d0\u30b1\u30c3\u30c8( s3://example-search-document )\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n| \u8a2d\u5b9a\u9805\u76ee | \u5165\u529b\u3059\u308b\u5185\u5bb9 |\n|---------|-------------|\n| \u30d0\u30b1\u30c3\u30c8\u540d | example-search-document |\n| \u30ea\u30fc\u30b8\u30e7\u30f3 | Tokyo |\u3000\n\n## (6) S3\u30d0\u30b1\u30c3\u30c8\u306b\u4f5c\u6210\u3057\u305fCloudSearch\u691c\u7d22\u7528\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n\u4f5c\u6210\u3057\u305fS3\u30d0\u30b1\u30c3\u30c8\u306b\u5bfe\u3057\u3066\u3001\u524d\u8ff0\u306e\u624b\u9806(4)\u3067\u4f5c\u6210\u3057\u305fCloudSearch\u691c\u7d22\u7528\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n```\n[ec2-user@example-cloudsearch-client ~]$ aws s3 cp example_document.json s3://example-search-document/document/\nupload: ./example_document.json to s3://example-search-document/document/example_document.json\n[ec2-user@example-cloudsearch-client ~]$\n```\n\n```\n[ec2-user@example-cloudsearch-client ~]$ aws s3 ls s3://example-search-document/document/example_document.json\n2016-09-25 01:08:53        452 example_document.json\n[ec2-user@example-cloudsearch-client ~]$\n```\n\n## (7) \u4f5c\u6210\u3059\u308bCloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u60c5\u5831\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\n\u300cCreate New Search Domain\u300d\u306e\u300cNAME YOUR DOMAIN\u300d\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u4eca\u56de\u306e\u4f8b\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5165\u529b\u3057\u307e\u3059\u3002\n\n| \u8a2d\u5b9a\u9805\u76ee | \u5165\u529b\u3059\u308b\u5185\u5bb9 |\n|---------|-------------|\n| Search Domain Name | example-search-domain |\n| Desired Instance Type | Use default |\n| Desired Replication Count | Use default |\n\n\u300cContinue\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n## (8) CloudSearch\u691c\u7d22\u7528\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u683c\u7d0d\u5834\u6240\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\u300cCONFIGURE INDEX\u300d\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u300cHow do you want to configure your index fields?\u300d\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u300cAnalyze sample object(s) from Amazon S3\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002S3\u306e\u5404\u8a2d\u5b9a\u9805\u76ee\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n| \u8a2d\u5b9a\u9805\u76ee | \u9078\u629e\u3059\u308b\u5185\u5bb9 |\n|---------|-------------|\n| S3 Bucket | example-search-document | \n| Prefix | document/example_document.json |\n\n\u300cAdd\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u300cContinue\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n## (9) CloudSearch\u3067\u691c\u7d22\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\u300cREVIEW INDEX CONFIGURATION\u300d\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u300cSuggested Index Field Configuration\u300d\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u300cAdd Index Field\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u691c\u7d22\u7528\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u4ee5\u4e0b3\u3064\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u300cType\u300d\u306f\u300cText\u300d\u3001\u300cAnalysis Scheme\u300d\u306f\u300cEng\u300d\u3092\u9078\u629e\u3057\u3066\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n| \u8ffd\u52a0\u3059\u308bIndex Fields | Type  | Analysis Scheme  |\n|---------------------|-------|------------------|\n| directors           | Text  | Eng |\n| genres              | Text  | Eng |\n| actors              | Text  | Eng |\n\n\u4e0a\u8a18\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3057\u3001\u300cIndex Fields\u300d\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u305f\u3089\u300cContinue\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\n\n\u3053\u308c\u306b\u3088\u308a\u3001CloudSearch\u306f\u524d\u8ff0(4)\u3067S3\u30d0\u30b1\u30c3\u30c8\u306b\u683c\u7d0d\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb(json)\u3092\u53d6\u308a\u8fbc\u3093\u3067\u3001\u691c\u7d22\u7528\u306e\u30c7\u30fc\u30bf(\u30a4\u30f3\u30c7\u30c3\u30af\u30b9)\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n| Name | Type | Search | Facet | Return | Sort | Highlight | Analysis Scheme | Default Value | Source Field | Remove |\n|------|------|--------|-------|--------|------|-----------|---------------------|---------------|--------------|--------|\n| content | Text | | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | Eng | | | |\n| content_encoding | Text | | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | Eng | | | |\n| content_type | Text | | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | Eng | | | |\n| resourcename | Text | | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | Eng | | | |\n| directors | Text | | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | Eng | | | |\n| genres | Text | | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | Eng | | | |\n| actors | Text | | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | \u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b | Eng | | | |\n\n## (10) CloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n\u4eca\u56de\u306e\u4f8b\u3067\u306f\u7279\u5b9aIP\u30a2\u30c9\u30ec\u30b9(\u4f8b:198.51.100.13)\u304b\u3089\u306e\u307fCloudSearch\u306e\u30c7\u30fc\u30bf\u691c\u7d22\u3092\u8a31\u53ef\u3057\u307e\u3059\u3002\n\u3053\u306e\u8a2d\u5b9a\u306b\u3088\u308a\u3001\u7279\u5b9aIP\u30a2\u30c9\u30ec\u30b9(\u4f8b:198.51.100.13)\u4ee5\u5916\u304b\u3089CloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u3078\u691c\u7d22\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u308b\u4e8b\u3092\u7981\u6b62\u51fa\u6765\u307e\u3059\u3002\n\n\u300cSETUP ACCESS POLICIES\u300d\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u300cCurrent Policy\u300d\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5165\u529b\u3057\u307e\u3059\u3002\n\n```json:\u5165\u529b\u3059\u308bPolicy\u5185\u5bb9\n{\n  \"Version\":\"2012-10-17\",\n  \"Statement\":[\n    {\n      \"Sid\":\"search_only\",\n      \"Effect\":\"Allow\",\n      \"Principal\":\"*\",\n      \"Action\":[\"cloudsearch:search\"],\n      \"Condition\":{\"IpAddress\":{\"aws:SourceIp\":\"198.51.100.13/32\"}}\n    }\n  ]\n}\n```\n\n\u300cContinue\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n## (11) CloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u306e\u4f5c\u6210\u3092\u958b\u59cb\u3057\u307e\u3059\u3002\n\n\u300cCONFIRM\u300d\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u300cContinue\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n## (12) CloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u306e\u4f5c\u6210\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u5f85\u3061\u307e\u3059\u3002\n\nAWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u4ee5\u4e0b\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n```\nCongratulations\nYou have successfully created the domain example-search-domain. The domain will take approximately 10 minutes to initialize. Once the domain is initialized, you may upload documents, and make any other changes to the domain.\n```\n\nAWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u53f3\u4e0b\u306e\u300cOK\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\nAWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u300cCloudSearch\u300d->\u300cDashboard\u300d\u753b\u9762\u3078\u5207\u308a\u66ff\u308f\u308a\u307e\u3059\u3002\n\nhttps://ap-northeast-1.console.aws.amazon.com/cloudsearch/home?region=ap-northeast-1#domainDashboard,example-search-domain\n\nCloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u306e\u4f5c\u6210\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u5f85\u3061\u307e\u3059\u3002\n\n## (13) CloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u306e\u4f5c\u6210\u304c\u5b8c\u4e86\u3057\u305f\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\nAWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u300cCloudSearch\u300d->\u300cDashboard\u300d\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\nhttps://ap-northeast-1.console.aws.amazon.com/cloudsearch/home?region=ap-northeast-1#domainDashboard,example-search-domain\n\n\u300cDomain Status for example-search-domain\u300d\u306b\u300cexample-search-domain is: ACTIVE\u300d\u3068\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u300cDashboard\u300d\u306e\u300cSearch Endpoint\u300d\u306eCloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u63a7\u3048\u3066\u304a\u304d\u307e\u3059\u3002\u3053\u306e\u300cSearch Endpoint\u300d\u306e\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u3092\u6307\u5b9a\u3057\u3066\u3001CloudSearch\u306b\u767b\u9332\u3057\u305f\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u51fa\u6765\u307e\u3059\u3002\u8a73\u7d30\u306f\u5f8c\u8ff0\u3057\u307e\u3059\u3002\n\n```\nSearchable Documents:\t1\nIndex Fields:\t7\nSearch Endpoint:\tsearch-example-search-domain-**************************.ap-northeast-1.cloudsearch.amazonaws.com\nDocument Endpoint:\tdoc-example-search-domain-**************************.ap-northeast-1.cloudsearch.amazonaws.com\nDomain ARN:\tarn:aws:cloudsearch:ap-northeast-1:464959028036:domain/example-search-domain\nEngine Type:\tCloudSearch (2013 API)\n```\n\n## (14) CloudSearch\u306e\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u3066CloudSearch\u304b\u3089\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3057\u307e\u3059\u3002\n\n\u524d\u8ff0(13)\u306e\u300cSearch Endpoint\u300d\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308bCloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u6307\u5b9a\u3057\u3066\u3001\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3057\u307e\u3059\u3002\n\nCloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u4f8b\n\n```\nsearch-example-search-domain-**************************.ap-northeast-1.cloudsearch.amazonaws.com\n```\n\nCloudSearch\u306e\u30c7\u30fc\u30bf\u691c\u7d22\u306b\u3064\u3044\u3066\u306f\u3001CloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3057\u305fIP\u30a2\u30c9\u30ec\u30b9(198.51.100.13/32)\u304b\u3089\u4ee5\u4e0b\u306e\u691c\u7d22\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u4fe1\u3059\u308b\u4e8b\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n[ec2-user@example-cloudsearch-client ~]$ /sbin/ifconfig eth0 | grep 'inet addr'\n          inet addr:198.51.100.13  Bcast:198.51.100.255  Mask:255.255.240.0\n[ec2-user@example-cloudsearch-client ~]$\n```\n\n### (14-1) CloudSearch\u304b\u3089'McShane'\u3068\u3044\u3046\u6587\u5b57\u5217\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001CloudSearch\u304b\u3089'McShane'\u3068\u3044\u3046\u6587\u5b57\u5217\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3057\u307e\u3059\u3002\n\nCloudSearch\u691c\u7d22\u30c9\u30e1\u30a4\u30f3\u3078\u6b63\u5e38\u306b\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306bCloudSarch\u304b\u3089\u306e\u691c\u7d22\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u300cHit\u300d\u306b\u691c\u7d22\u7d50\u679c\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u524d\u8ff0(4)\u3067S3\u30d0\u30b1\u30c3\u30c8\u306b\u683c\u7d0d\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb(s3://example-search-document/document/example_document.json)\u3092\u5143\u306b\u3057\u3066\u3001CloudSearch\u691c\u7d22\u7528\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u691c\u7d22\u7d50\u679c\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\n[ec2-user@example-cloudsearch-client ~]$ aws cloudsearchdomain --region ap-northeast-1 --endpoint-url http://search-example-search-domain-**************************.ap-northeast-1.cloudsearch.amazonaws.com search --search-query McShane\n{\n    \"status\": {\n        \"timems\": 1,\n        \"rid\": \"jr+w6/UqlAEKeR92\"\n    },\n    \"hits\": {\n        \"found\": 1,\n        \"hit\": [\n            {\n                \"fields\": {\n                    \"content\": [\n                        \"{ \\\"type\\\": \\\"add\\\",   \\\"id\\\":   \\\"tt0484562\\\",   \\\"fields\\\": {     \\\"title\\\": \\\"The Seeker: The Dark Is Rising\\\",     \\\"directors\\\": [\\\"Cunningham, David L.\\\"],     \\\"genres\\\": [\\\"Adventure\\\",\\\"Drama\\\",\\\"Fantasy\\\",\\\"Thriller\\\"],     \\\"actors\\\": [\\\"McShane, Ian\\\",\\\"Eccleston, Christopher\\\",\\\"Conroy, Frances\\\",               \\\"Crewson, Wendy\\\",\\\"Ludwig, Alexander\\\",\\\"Cosmo, James\\\",               \\\"Warner, Amelia\\\",\\\"Hickey, John Benjamin\\\",\\\"Piddock, Jim\\\",               \\\"Lockhart, Emma\\\"]   } }\"\n                    ],\n                    \"resourcename\": [\n                        \"example_document.json\"\n                    ],\n                    \"content_encoding\": [\n                        \"ISO-8859-1\"\n                    ],\n                    \"content_type\": [\n                        \"application/json\"\n                    ]\n                },\n                \"id\": \"example-search-document/document/example_document.json\"\n            }\n        ],\n        \"start\": 0\n    }\n}\n[ec2-user@example-cloudsearch-client ~]$\n```\n\n### (14-2) CloudSearch\u304b\u3089actores\u30d5\u30a3\u30fc\u30eb\u30c9\u306b'McShane'\u3068\u3044\u3046\u6587\u5b57\u5217\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001CloudSearch\u304b\u3089actores\u30d5\u30a3\u30fc\u30eb\u30c9\u306b'McShane'\u3068\u3044\u3046\u6587\u5b57\u5217\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3057\u307e\u3059\u3002\n\n```\n[ec2-user@example-cloudsearch-client ~]$ aws cloudsearchdomain --region ap-northeast-1 --endpoint-url http://search-example-search-domain-**************************.ap-northeast-1.cloudsearch.amazonaws.com search --search-query \"actores:'McShane'\"\n{\n    \"status\": {\n        \"timems\": 5,\n        \"rid\": \"nZCy6/UqlgEKeR92\"\n    },\n    \"hits\": {\n        \"found\": 1,\n        \"hit\": [\n            {\n                \"fields\": {\n                    \"content\": [\n                        \"{ \\\"type\\\": \\\"add\\\",   \\\"id\\\":   \\\"tt0484562\\\",   \\\"fields\\\": {     \\\"title\\\": \\\"The Seeker: The Dark Is Rising\\\",     \\\"directors\\\": [\\\"Cunningham, David L.\\\"],     \\\"genres\\\": [\\\"Adventure\\\",\\\"Drama\\\",\\\"Fantasy\\\",\\\"Thriller\\\"],     \\\"actors\\\": [\\\"McShane, Ian\\\",\\\"Eccleston, Christopher\\\",\\\"Conroy, Frances\\\",               \\\"Crewson, Wendy\\\",\\\"Ludwig, Alexander\\\",\\\"Cosmo, James\\\",               \\\"Warner, Amelia\\\",\\\"Hickey, John Benjamin\\\",\\\"Piddock, Jim\\\",               \\\"Lockhart, Emma\\\"]   } }\"\n                    ],\n                    \"resourcename\": [\n                        \"example_document.json\"\n                    ],\n                    \"content_encoding\": [\n                        \"ISO-8859-1\"\n                    ],\n                    \"content_type\": [\n                        \"application/json\"\n                    ]\n                },\n                \"id\": \"example-search-document/document/example_document.json\"\n            }\n        ],\n        \"start\": 0\n    }\n}\n[ec2-user@example-cloudsearch-client ~]$\n```\n\n```\n[ec2-user@example-cloudsearch-client ~]$ aws cloudsearchdomain --region ap-northeast-1 --endpoint-url http://search-example-search-domain-**************************.ap-northeast-1.cloudsearch.amazonaws.com search --search-query \"actores:'McShane'\" --return _no_fields\n{\n    \"status\": {\n        \"timems\": 42,\n        \"rid\": \"lfve6vUqbgp5H3Y=\"\n    },\n    \"hits\": {\n        \"found\": 1,\n        \"hit\": [\n            {\n                \"id\": \"example-search-document/document/example_document.json\"\n            }\n        ],\n        \"start\": 0\n    }\n}\n[ec2-user@example-cloudsearch-client ~]$\n```\n\n***\n\n\u4ee5\u4e0a\u306b\u306a\u308a\u307e\u3059\u3002\n", "tags": ["AWS", "CloudSearch", "S3"]}