{"context": " More than 1 year has passed since last update.\u3088\u304f\u3042\u308b\u3001Cell\u306b\u8868\u793a\u3059\u308b\u753b\u50cf\u3092\u975e\u540c\u671f\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3084\u3064\u3067\u3059\u3002\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u4e2d\u306e\u304f\u308b\u304f\u308b\u3082\u8868\u793a\u3057\u3066\u307f\u307e\u3059\u3002\n\u30bb\u30eb\u306e\u518d\u5229\u7528\u3092\u610f\u8b58\u3057\u3066\u306a\u304b\u3063\u305f\u305b\u3044\u3067\u7d50\u69cb\u30cf\u30de\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n\u30ab\u30b9\u30bf\u30e0\u30bb\u30eb\u4f5c\u6210\n\u307e\u305a\u30ab\u30b9\u30bf\u30e0\u30bb\u30eb\u3092\u4f5c\u308a\u307e\u3059\u3002\n\nCustomCell.h\n\n#import <UIKit/UIKit.h>\n\n@interface CustomCell : UICollectionViewCell\n\n@property (weak, nonatomic) IBOutlet UIActivityIndicatorView *indicatorView;\n@property (weak, nonatomic) IBOutlet UIImageView *imageView;\n\n@end\n\n\n\nCustomCell.xib\u3067\u914d\u7f6e\u3057\u3066\u63a5\u7d9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nUICollectionView\n\nViewControler.m\n\n#import \"ViewController.h\"\n#import \"CustomCell.h\"\n\nstatic NSString* const kCellIdentifier = @\"cell\";\n\n@interface ViewController ()<UICollectionViewDataSource, UICollectionViewDelegate>\n\n@property (weak, nonatomic) IBOutlet UICollectionView *collectionView;\n@property (nonatomic) NSCache* imageCache;\n@property (nonatomic) NSOperationQueue* queue;\n\n@end\n\n@implementation ViewController\n\n- (void)viewDidLoad\n{\n    [super viewDidLoad];\n\n    [self.collectionView registerNib:[UINib nibWithNibName:@\"CustomCell\" bundle:nil] forCellWithReuseIdentifier:kCellIdentifier];\n    self.imageCache = [[NSCache alloc] init];\n    self.queue = [[NSOperationQueue alloc] init];\n}\n\n- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath\n{\n    CustomCell* cell = [collectionView dequeueReusableCellWithReuseIdentifier:kCellIdentifier forIndexPath:indexPath];\n\n    cell.imageView.image = nil;\n    [cell.indicatorView stopAnimating];\n\n    UIImage* image = [self.imageCache objectForKey:indexPath];\n    if (image) {\n        cell.imageView.image = image;\n    } else {\n        [cell.indicatorView startAnimating];\n\n        NSURLRequest* request = [NSURLRequest requestWithURL:[NSURL URLWithString:@\"\u753b\u50cf\u306eURL\"]];\n\n        [NSURLConnection sendAsynchronousRequest:request queue:self.queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *connectionError) {\n            CustomCell* aCell = (CustomCell *)[collectionView cellForItemAtIndexPath:indexPath];\n            UIImage *aImage = [UIImage imageWithData:data];\n\n            [aCell.indicatorView stopAnimating];\n            [self.imageCache setObject:aImage forKey:indexPath];\n            [collectionView reloadItemsAtIndexPaths:@[indexPath]];\n        }];\n    }\n\n    return cell;\n}\n\n@end\n\n\n\ncollectionView:cellForItemAtIndexPath:\u30c7\u30ea\u30b2\u30fc\u30c8\u30e1\u30bd\u30c3\u30c9\u3067\u3001\u307e\u305a\u30bb\u30eb\u306eimageView, indicatorView\u3092\u521d\u671f\u72b6\u614b\u306b\u623b\u3057\u307e\u3059\u3002\n\u3053\u308c\u3092\u5fd8\u308c\u3066\u305f\u306e\u3067\u3001\u753b\u50cf\u306e\u8868\u793a\u3055\u308c\u308b\u30bb\u30eb\u304c\u304a\u304b\u3057\u304f\u306a\u3063\u305f\u308a\u3057\u3066\u30cf\u30de\u308a\u307e\u3057\u305f\u3002\u3002\u3002\nUITableView, UICollectionView\u306b\u306f\u3044\u3064\u3082\u60a9\u307e\u3055\u308c\u307e\u3059\u3002\n\n\u3088\u304f\u3042\u308b\u3001Cell\u306b\u8868\u793a\u3059\u308b\u753b\u50cf\u3092\u975e\u540c\u671f\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3084\u3064\u3067\u3059\u3002\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u4e2d\u306e\u304f\u308b\u304f\u308b\u3082\u8868\u793a\u3057\u3066\u307f\u307e\u3059\u3002\n\u30bb\u30eb\u306e\u518d\u5229\u7528\u3092\u610f\u8b58\u3057\u3066\u306a\u304b\u3063\u305f\u305b\u3044\u3067\u7d50\u69cb\u30cf\u30de\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n##\u30ab\u30b9\u30bf\u30e0\u30bb\u30eb\u4f5c\u6210\n\n\u307e\u305a\u30ab\u30b9\u30bf\u30e0\u30bb\u30eb\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n```objectivec:CustomCell.h\n\n#import <UIKit/UIKit.h>\n\n@interface CustomCell : UICollectionViewCell\n\n@property (weak, nonatomic) IBOutlet UIActivityIndicatorView *indicatorView;\n@property (weak, nonatomic) IBOutlet UIImageView *imageView;\n\n@end\n\n```\nCustomCell.xib\u3067\u914d\u7f6e\u3057\u3066\u63a5\u7d9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n##UICollectionView\n\n```objectivec:ViewControler.m\n\n#import \"ViewController.h\"\n#import \"CustomCell.h\"\n\nstatic NSString* const kCellIdentifier = @\"cell\";\n\n@interface ViewController ()<UICollectionViewDataSource, UICollectionViewDelegate>\n\n@property (weak, nonatomic) IBOutlet UICollectionView *collectionView;\n@property (nonatomic) NSCache* imageCache;\n@property (nonatomic) NSOperationQueue* queue;\n\n@end\n\n@implementation ViewController\n\n- (void)viewDidLoad\n{\n    [super viewDidLoad];\n\n    [self.collectionView registerNib:[UINib nibWithNibName:@\"CustomCell\" bundle:nil] forCellWithReuseIdentifier:kCellIdentifier];\n    self.imageCache = [[NSCache alloc] init];\n    self.queue = [[NSOperationQueue alloc] init];\n}\n\n- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath\n{\n    CustomCell* cell = [collectionView dequeueReusableCellWithReuseIdentifier:kCellIdentifier forIndexPath:indexPath];\n    \n    cell.imageView.image = nil;\n    [cell.indicatorView stopAnimating];\n    \n    UIImage* image = [self.imageCache objectForKey:indexPath];\n    if (image) {\n        cell.imageView.image = image;\n    } else {\n        [cell.indicatorView startAnimating];\n        \n        NSURLRequest* request = [NSURLRequest requestWithURL:[NSURL URLWithString:@\"\u753b\u50cf\u306eURL\"]];\n        \n        [NSURLConnection sendAsynchronousRequest:request queue:self.queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *connectionError) {\n            CustomCell* aCell = (CustomCell *)[collectionView cellForItemAtIndexPath:indexPath];\n            UIImage *aImage = [UIImage imageWithData:data];\n            \n            [aCell.indicatorView stopAnimating];\n            [self.imageCache setObject:aImage forKey:indexPath];\n            [collectionView reloadItemsAtIndexPaths:@[indexPath]];\n        }];\n    }\n    \n    return cell;\n}\n\n@end\n\n```\ncollectionView:cellForItemAtIndexPath:\u30c7\u30ea\u30b2\u30fc\u30c8\u30e1\u30bd\u30c3\u30c9\u3067\u3001\u307e\u305a\u30bb\u30eb\u306eimageView, indicatorView\u3092\u521d\u671f\u72b6\u614b\u306b\u623b\u3057\u307e\u3059\u3002\n\u3053\u308c\u3092\u5fd8\u308c\u3066\u305f\u306e\u3067\u3001\u753b\u50cf\u306e\u8868\u793a\u3055\u308c\u308b\u30bb\u30eb\u304c\u304a\u304b\u3057\u304f\u306a\u3063\u305f\u308a\u3057\u3066\u30cf\u30de\u308a\u307e\u3057\u305f\u3002\u3002\u3002\n\nUITableView, UICollectionView\u306b\u306f\u3044\u3064\u3082\u60a9\u307e\u3055\u308c\u307e\u3059\u3002\n\n\n\n\n", "tags": ["UICollectionView", "iOS"]}