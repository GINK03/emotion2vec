{"context": "Mac OS X El Capitan \u306bpyenv, pyenv-virtualenv, jupyter\u3092\u5165\u308c\u3066\u74b0\u5883\u69cb\u7bc9\u3059\u308b\u8a71\uff0e\n\nInstall pyenv, pyenv-virtualenv\n$ brew install pyenv pyenv-virtualenv\n\n\nInstall python and create virtual environment\n$ PYTHON_CONFIGURE_OPTS=\"--enable-unicode=ucs2 --enable-framework=$(pyenv root)/versions/2.7.11\" pyenv install 2.7.11\n$ pyenv virtualenv 2.7.11 tech\n\nPYTHON_CONFIGURE_OPTS=\"--enable-unicode=ucs2\"\u3092\u3064\u3051\u306a\u3044\u3068\uff0c\u3042\u3068\u3067jupyter notebook\u3067\u30a8\u30e9\u30fc\u306b\u306a\u308b\u2193\n\u53c2\u8003\uff1ahttp://qiita.com/sigmalogneko/items/b5c15f5229387bbfd53a\n(test) foo-mbp:test foo$ jupyter notebook\nTraceback (most recent call last):\n  File \"/Users/foo/.pyenv/versions/test/bin/jupyter-notebook\", line 7, in <module>\n    from notebook.notebookapp import main\n  File \"/Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/notebook/notebookapp.py\", line 30, in <module>\n    from zmq.eventloop import ioloop\n  File \"/Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/zmq/__init__.py\", line 66, in <module>\n    from zmq import backend\n  File \"/Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/zmq/backend/__init__.py\", line 40, in <module>\n    reraise(*exc_info)\n  File \"/Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/zmq/backend/__init__.py\", line 27, in <module>\n    _ns = select_backend(first)\n  File \"/Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/zmq/backend/select.py\", line 27, in select_backend\n    mod = __import__(name, fromlist=public_api)\n  File \"/Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/zmq/backend/cython/__init__.py\", line 6, in <module>\n    from . import (constants, error, message, context,\nImportError: dlopen(/Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/zmq/backend/cython/constants.so, 2): Symbol not found: _PyUnicodeUCS2_DecodeUTF8\n  Referenced from: /Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/zmq/backend/cython/constants.so\n  Expected in: flat namespace\n in /Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/zmq/backend/cython/constants.so\n\n\u3053\u3046\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u3089\uff0c\n$ pyenv uninstall 2.7.10\n$ PYTHON_CONFIGURE_OPTS=\"--enable-unicode=ucs2\" pyenv install 2.7.10\n\n\u3067\u3084\u308a\u306a\u304a\u3057\n\u307e\u305f\uff0cPYTHON_CONFIGURE_OPTS=\"--enable-framework=$(pyenv root)/versions/2.7.11\"\u306fPython\u3092\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u30e2\u30fc\u30c9\uff08\uff1f\uff09\u3067\u52d5\u4f5c\u3055\u305b\u308b\u305f\u3081\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\uff0e\u3053\u308c\u3092\u3084\u3089\u306a\u3044\u3068matplotlib\u304c\u3046\u307e\u304f\u52d5\u304b\u306a\u3044\uff0e\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u306f\u9069\u5b9c\u5909\u3048\u308b\uff0e\nvirtual env\u3092\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u3069\u306e\u307f\u3061\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u304c\uff08\u5f8c\u8ff0\uff09\n\nUse virtual environment\npyenv activate tech\n\n\nInstall jupyter\npip install jupyter\n\n\nMatplotlib\niPython Notebook\u4e0a\u3067\nimport matplotlib.pyplot\n\n\u3059\u308b\u3068\uff0c\u30a8\u30e9\u30fc\u306b\u306a\u308b\uff0e\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n<ipython-input-1-c845eb879342> in <module>()\n     19 \n     20 sys.path.append(os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath('__file__')))))\n---> 21 import handcraft_feature_extractor\n     22 #import text2vec\n     23 import config\n\n/Users/foo/codes/pksha/chatbot-base/handcraft_feature_extractor.py in <module>()\n      1 #!/usr/bin/env python\n      2 # -*- coding: utf-8 -*-\n----> 3 from feature_extractor import FeatureExtractor\n      4 import MeCab\n      5 import config\n\n/Users/foo/codes/pksha/chatbot-base/feature_extractor.py in <module>()\n      3 import matplotlib\n      4 import numpy as np\n----> 5 import matplotlib.pyplot as plt\n      6 import MeCab\n      7 import re, pprint\n\n/Users/foo/.pyenv/versions/2.7.9/envs/pksha/lib/python2.7/site-packages/matplotlib/pyplot.py in <module>()\n    112 \n    113 from matplotlib.backends import pylab_setup\n--> 114 _backend_mod, new_figure_manager, draw_if_interactive, _show = pylab_setup()\n    115 \n    116 _IP_REGISTERED = None\n\n/Users/foo/.pyenv/versions/2.7.9/envs/pksha/lib/python2.7/site-packages/matplotlib/backends/__init__.pyc in pylab_setup()\n     30     # imports. 0 means only perform absolute imports.\n     31     backend_mod = __import__(backend_name,\n---> 32                              globals(),locals(),[backend_name],0)\n     33 \n     34     # Things we pull in from all backends\n\n/Users/foo/.pyenv/versions/2.7.9/envs/pksha/lib/python2.7/site-packages/matplotlib/backends/backend_macosx.py in <module>()\n     22 \n     23 import matplotlib\n---> 24 from matplotlib.backends import _macosx\n     25 \n     26 \n\nRuntimeError: Python is not installed as a framework. The Mac OS X backend will not be able to function correctly if Python is not installed as a framework. See the Python documentation for more information on installing Python as a framework on Mac OS X. Please either reinstall Python as a framework, or try one of the other backends. If you are Working with Matplotlib in a virtual enviroment see 'Working with Matplotlib in Virtual environments' in the Matplotlib FAQ\n\nhttp://matplotlib.org/faq/virtualenv_faq.html\n\u3092\u53c2\u8003\u306b\uff0c\nPATHTOENV/bin/frameworkpython\u3092\u4f5c\u6210\u3057\uff0c\u5b9f\u884c\u6a29\u9650\u4ed8\u4e0e\n\n~/.pyenv/versions/tech/bin/frameworkpython\n#!/bin/bash\n\n# what real Python executable to use\nPYVER=2.7\nPATHTOPYTHON=/usr/bin/\nPYTHON=${PATHTOPYTHON}python${PYVER}\n\n# find the root of the virtualenv, it should be the parent of the dir this script is in\nENV=`$PYTHON -c \"import os; print os.path.abspath(os.path.join(os.path.dirname(\\\"$0\\\"), '..'))\"`\n\n# now run Python with the virtualenv set as Python's HOME\nexport PYTHONHOME=$ENV\nexec $PYTHON \"$@\"\n\n\n$ chmod +x ~/.pyenv/versions/tech/bin/frameworkpython\n\n\u3053\u306e\u72b6\u614b\u3067\n$ frameworkpython -m IPython notebook\n\n\u3067IPython Notebook\u3092\u8d77\u52d5\u3059\u308b\u3068\uff0cimport matplotlib.pyplot\u304c\u52d5\u304f\uff0e\nframeworkpython\u3067\uff0c\u4f7f\u7528\u3059\u308bpython\u3092system\u306e\u3082\u306e\u306b\u7f6e\u304d\u63db\u3048\u3066\u3044\u308b\uff1f\n\u306a\u306e\u3067\uff0c\u4eca\u56de\u306e\u4f8b\u306b\u304b\u304e\u3089\u305a\uff0cvirtualenv\u306ePython\u3092\u4f7f\u3046\u305b\u3044\u3067\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3044\u308b\u3063\u307d\u3044\u554f\u984c\u306b\u906d\u9047\u3057\u305f\u3089\uff0c\u4ee3\u308f\u308a\u306bframeworkpython\u3067\u5b9f\u884c\u3057\u3066\u307f\u308b\u3068\u3088\u3044\uff0e\n\u3057\u304b\u3057\uff0c\n$ frameworkpython -m jupyter notebook\n\n\u3060\u3068\u3046\u307e\u304f\u3044\u304b\u306a\u3044\uff0e\n\u6c17\u6301\u3061\u60aa\u3044\u306e\u3067\u306a\u3093\u3068\u304b\u3057\u305f\u3044\uff0e\nhttp://www.wirywolf.com/2016/01/pyplot-in-jupyter-inside-pyenv-on-el-capitan.html\n\u3092\u53c2\u8003\u306b\uff0c\n$ jupyter --paths\nconfig:\n    /Users/foo/.jupyter\n    /Users/foo/.pyenv/versions/2.7.9/envs/pksha/etc/jupyter\n    /usr/local/etc/jupyter\n    /etc/jupyter\ndata:\n    /Users/foo/Library/Jupyter\n    /Users/foo/.pyenv/versions/2.7.9/envs/pksha/share/jupyter\n    /usr/local/share/jupyter\n    /usr/share/jupyter\nruntime:\n    /Users/foo/Library/Jupyter/runtime\n\ndata:\u306e\u4e00\u756a\u76ee\uff0c/Users/foo/Library/Jupyter\u306e\u4e0b\u306b\u65b0\u3057\u304fKernel\u3092\u5b9a\u7fa9\u3059\u308b\uff0e\n$ mkdir -p ~/Library/Jupyter/kernels/matplotlib\n$ vi ~/Library/Jupyter/kernels/matplotlib/kernel.json\n\n\n~/Library/Jupyter/kernels/matplotlib/kernel.json\n{\n \"argv\": [ \"/Users/foo/.pyenv/versions/tech/bin/frameworkpython\", \"-m\", \"ipykernel\",\n          \"-f\", \"{connection_file}\"],\n \"display_name\": \"matplotlib\",\n \"language\": \"python\"\n}\n\n\n\u3053\u308c\u3067\uff0cmatplotlib\u3068\u3044\u3046\u540d\u524d\u3067Kernel\u304c\u5b9a\u7fa9\u3055\u308c\u305f\uff0e\n\u666e\u901a\u306bjupyter notebook\u3092\u5b9f\u884c\u3057\u3066\uff0c\nJupyter Notebook\u4e0a\u3067\u4f5c\u696d\u3059\u308b\u3068\u304d\u306b\uff0cKernel\u3092matplotlib\u306b\u3057\u3066\u3084\u308c\u3070\u3088\u3044\uff0e\nMac OS X El Capitan \u306bpyenv, pyenv-virtualenv, jupyter\u3092\u5165\u308c\u3066\u74b0\u5883\u69cb\u7bc9\u3059\u308b\u8a71\uff0e\n\n# Install pyenv, pyenv-virtualenv\n\n```shell-session\n$ brew install pyenv pyenv-virtualenv\n```\n\n# Install python and create virtual environment\n\n```shell-session\n$ PYTHON_CONFIGURE_OPTS=\"--enable-unicode=ucs2 --enable-framework=$(pyenv root)/versions/2.7.11\" pyenv install 2.7.11\n$ pyenv virtualenv 2.7.11 tech\n```\n\n`PYTHON_CONFIGURE_OPTS=\"--enable-unicode=ucs2\"`\u3092\u3064\u3051\u306a\u3044\u3068\uff0c\u3042\u3068\u3067`jupyter notebook`\u3067\u30a8\u30e9\u30fc\u306b\u306a\u308b\u2193\n\u53c2\u8003\uff1ahttp://qiita.com/sigmalogneko/items/b5c15f5229387bbfd53a\n\n```shell-session\n(test) foo-mbp:test foo$ jupyter notebook\nTraceback (most recent call last):\n  File \"/Users/foo/.pyenv/versions/test/bin/jupyter-notebook\", line 7, in <module>\n    from notebook.notebookapp import main\n  File \"/Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/notebook/notebookapp.py\", line 30, in <module>\n    from zmq.eventloop import ioloop\n  File \"/Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/zmq/__init__.py\", line 66, in <module>\n    from zmq import backend\n  File \"/Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/zmq/backend/__init__.py\", line 40, in <module>\n    reraise(*exc_info)\n  File \"/Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/zmq/backend/__init__.py\", line 27, in <module>\n    _ns = select_backend(first)\n  File \"/Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/zmq/backend/select.py\", line 27, in select_backend\n    mod = __import__(name, fromlist=public_api)\n  File \"/Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/zmq/backend/cython/__init__.py\", line 6, in <module>\n    from . import (constants, error, message, context,\nImportError: dlopen(/Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/zmq/backend/cython/constants.so, 2): Symbol not found: _PyUnicodeUCS2_DecodeUTF8\n  Referenced from: /Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/zmq/backend/cython/constants.so\n  Expected in: flat namespace\n in /Users/foo/.pyenv/versions/2.7.10/envs/test/lib/python2.7/site-packages/zmq/backend/cython/constants.so\n```\n\n\u3053\u3046\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u3089\uff0c\n\n```shell-session\n$ pyenv uninstall 2.7.10\n$ PYTHON_CONFIGURE_OPTS=\"--enable-unicode=ucs2\" pyenv install 2.7.10\n```\n\u3067\u3084\u308a\u306a\u304a\u3057\n\n\u307e\u305f\uff0c`PYTHON_CONFIGURE_OPTS=\"--enable-framework=$(pyenv root)/versions/2.7.11\"`\u306fPython\u3092\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u30e2\u30fc\u30c9\uff08\uff1f\uff09\u3067\u52d5\u4f5c\u3055\u305b\u308b\u305f\u3081\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\uff0e\u3053\u308c\u3092\u3084\u3089\u306a\u3044\u3068`matplotlib`\u304c\u3046\u307e\u304f\u52d5\u304b\u306a\u3044\uff0e\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u306f\u9069\u5b9c\u5909\u3048\u308b\uff0e\nvirtual env\u3092\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u3069\u306e\u307f\u3061\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u304c\uff08\u5f8c\u8ff0\uff09\n\n# Use virtual environment\n\n```shell-session\npyenv activate tech\n```\n\n# Install jupyter\n\n```shell-session\npip install jupyter\n```\n\n# Matplotlib\niPython Notebook\u4e0a\u3067\n\n```py\nimport matplotlib.pyplot\n```\n\u3059\u308b\u3068\uff0c\u30a8\u30e9\u30fc\u306b\u306a\u308b\uff0e\n\n```\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n<ipython-input-1-c845eb879342> in <module>()\n     19 \n     20 sys.path.append(os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath('__file__')))))\n---> 21 import handcraft_feature_extractor\n     22 #import text2vec\n     23 import config\n\n/Users/foo/codes/pksha/chatbot-base/handcraft_feature_extractor.py in <module>()\n      1 #!/usr/bin/env python\n      2 # -*- coding: utf-8 -*-\n----> 3 from feature_extractor import FeatureExtractor\n      4 import MeCab\n      5 import config\n\n/Users/foo/codes/pksha/chatbot-base/feature_extractor.py in <module>()\n      3 import matplotlib\n      4 import numpy as np\n----> 5 import matplotlib.pyplot as plt\n      6 import MeCab\n      7 import re, pprint\n\n/Users/foo/.pyenv/versions/2.7.9/envs/pksha/lib/python2.7/site-packages/matplotlib/pyplot.py in <module>()\n    112 \n    113 from matplotlib.backends import pylab_setup\n--> 114 _backend_mod, new_figure_manager, draw_if_interactive, _show = pylab_setup()\n    115 \n    116 _IP_REGISTERED = None\n\n/Users/foo/.pyenv/versions/2.7.9/envs/pksha/lib/python2.7/site-packages/matplotlib/backends/__init__.pyc in pylab_setup()\n     30     # imports. 0 means only perform absolute imports.\n     31     backend_mod = __import__(backend_name,\n---> 32                              globals(),locals(),[backend_name],0)\n     33 \n     34     # Things we pull in from all backends\n\n/Users/foo/.pyenv/versions/2.7.9/envs/pksha/lib/python2.7/site-packages/matplotlib/backends/backend_macosx.py in <module>()\n     22 \n     23 import matplotlib\n---> 24 from matplotlib.backends import _macosx\n     25 \n     26 \n\nRuntimeError: Python is not installed as a framework. The Mac OS X backend will not be able to function correctly if Python is not installed as a framework. See the Python documentation for more information on installing Python as a framework on Mac OS X. Please either reinstall Python as a framework, or try one of the other backends. If you are Working with Matplotlib in a virtual enviroment see 'Working with Matplotlib in Virtual environments' in the Matplotlib FAQ\n```\n\nhttp://matplotlib.org/faq/virtualenv_faq.html\n\u3092\u53c2\u8003\u306b\uff0c\n\n`PATHTOENV/bin/frameworkpython`\u3092\u4f5c\u6210\u3057\uff0c\u5b9f\u884c\u6a29\u9650\u4ed8\u4e0e\n\n```bash:~/.pyenv/versions/tech/bin/frameworkpython\n#!/bin/bash\n\n# what real Python executable to use\nPYVER=2.7\nPATHTOPYTHON=/usr/bin/\nPYTHON=${PATHTOPYTHON}python${PYVER}\n\n# find the root of the virtualenv, it should be the parent of the dir this script is in\nENV=`$PYTHON -c \"import os; print os.path.abspath(os.path.join(os.path.dirname(\\\"$0\\\"), '..'))\"`\n\n# now run Python with the virtualenv set as Python's HOME\nexport PYTHONHOME=$ENV\nexec $PYTHON \"$@\"\n```\n\n```shell-session\n$ chmod +x ~/.pyenv/versions/tech/bin/frameworkpython\n```\n\n\u3053\u306e\u72b6\u614b\u3067\n\n```shell-session\n$ frameworkpython -m IPython notebook\n```\n\n\u3067IPython Notebook\u3092\u8d77\u52d5\u3059\u308b\u3068\uff0c`import matplotlib.pyplot`\u304c\u52d5\u304f\uff0e\n`frameworkpython`\u3067\uff0c\u4f7f\u7528\u3059\u308bpython\u3092system\u306e\u3082\u306e\u306b\u7f6e\u304d\u63db\u3048\u3066\u3044\u308b\uff1f\n\u306a\u306e\u3067\uff0c\u4eca\u56de\u306e\u4f8b\u306b\u304b\u304e\u3089\u305a\uff0c`virtualenv`\u306ePython\u3092\u4f7f\u3046\u305b\u3044\u3067\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3044\u308b\u3063\u307d\u3044\u554f\u984c\u306b\u906d\u9047\u3057\u305f\u3089\uff0c\u4ee3\u308f\u308a\u306b`frameworkpython`\u3067\u5b9f\u884c\u3057\u3066\u307f\u308b\u3068\u3088\u3044\uff0e\n\n\u3057\u304b\u3057\uff0c\n\n```shell-session\n$ frameworkpython -m jupyter notebook\n```\n\u3060\u3068\u3046\u307e\u304f\u3044\u304b\u306a\u3044\uff0e\n\u6c17\u6301\u3061\u60aa\u3044\u306e\u3067\u306a\u3093\u3068\u304b\u3057\u305f\u3044\uff0e\n\nhttp://www.wirywolf.com/2016/01/pyplot-in-jupyter-inside-pyenv-on-el-capitan.html\n\u3092\u53c2\u8003\u306b\uff0c\n\n```shell-session\n$ jupyter --paths\nconfig:\n    /Users/foo/.jupyter\n    /Users/foo/.pyenv/versions/2.7.9/envs/pksha/etc/jupyter\n    /usr/local/etc/jupyter\n    /etc/jupyter\ndata:\n    /Users/foo/Library/Jupyter\n    /Users/foo/.pyenv/versions/2.7.9/envs/pksha/share/jupyter\n    /usr/local/share/jupyter\n    /usr/share/jupyter\nruntime:\n    /Users/foo/Library/Jupyter/runtime\n```\n\n`data:`\u306e\u4e00\u756a\u76ee\uff0c`/Users/foo/Library/Jupyter`\u306e\u4e0b\u306b\u65b0\u3057\u304fKernel\u3092\u5b9a\u7fa9\u3059\u308b\uff0e\n\n```shell-session\n$ mkdir -p ~/Library/Jupyter/kernels/matplotlib\n$ vi ~/Library/Jupyter/kernels/matplotlib/kernel.json\n```\n\n```json:~/Library/Jupyter/kernels/matplotlib/kernel.json\n{\n \"argv\": [ \"/Users/foo/.pyenv/versions/tech/bin/frameworkpython\", \"-m\", \"ipykernel\",\n          \"-f\", \"{connection_file}\"],\n \"display_name\": \"matplotlib\",\n \"language\": \"python\"\n}\n```\n\n\u3053\u308c\u3067\uff0c`matplotlib`\u3068\u3044\u3046\u540d\u524d\u3067Kernel\u304c\u5b9a\u7fa9\u3055\u308c\u305f\uff0e\n\n\u666e\u901a\u306b`jupyter notebook`\u3092\u5b9f\u884c\u3057\u3066\uff0c\nJupyter Notebook\u4e0a\u3067\u4f5c\u696d\u3059\u308b\u3068\u304d\u306b\uff0cKernel\u3092`matplotlib`\u306b\u3057\u3066\u3084\u308c\u3070\u3088\u3044\uff0e\n", "tags": ["Python", "pyenv", "OSX", "Jupyter"]}