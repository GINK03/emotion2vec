{"context": "\n\n\u3053\u308c\u306f\u4f55\n1\u753b\u9762\u306b\u8907\u6570\u30e2\u30c7\u30eb\u3092\u8868\u793a\u3059\u308bSPA\u3063\u307d\u3044Rails\u30a2\u30d7\u30ea\u3067\u753b\u9762\u9077\u79fb\u7121\u3057\u3067\u8ffd\u52a0\u8aad\u307f\u8fbc\u307f\u3057\u305f\u3044\u3001\n\u3067\u3082React\u3084Angular \u306f\u3088\u304f\u5206\u304b\u3089\u306a\u3044 \u3092\u5c0e\u5165\u3057\u3066\u308b\u6642\u9593\u306f\u306a\u3044\u3001\n\u3068\u3044\u3046\u4eba\u306e\u305f\u3081\u306e\u8a18\u4e8b\u3067\u3059\u3002\nGitHub\u306b\u4f5c\u6210\u6e08\u307f\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u4f55\u3092\u4f7f\u3046\u306e\nkaminari\u3068jQuery, jquery.infinitscroll\u3092\u4f7f\u3044\u30e2\u30c7\u30eb\u306e\u8ffd\u52a0\u8aad\u307f\u8fbc\u307f\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n\u3069\u3046\u306a\u308b\u306e\n\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\u3069\u3046\u3059\u308b\u306e\n\n\u30a2\u30d7\u30ea\u306e\u4f5c\u6210\n\n\u30b3\u30de\u30f3\u30c9\n$ rails new multi-model-infinitscroll --skip-bundle &&\n  cd multi-model-infinitscroll\n\n\n\n\u4e0b\u62f5\u3048\n\nkaminari\u3068jquery-turbolinks\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nGemfile\n#\u8ffd\u8a18\ngem \"jquery-turbolinks\"\ngem \"kaminari\"\n\n\n\n\u30b3\u30de\u30f3\u30c9\n$ bundle install\n\n\n\njquery.infinitscroll\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n\u30b3\u30de\u30f3\u30c9\n$ curl -k -o vendor/assets/javascripts/jquery.infinitescroll.js \\\n https://raw.githubusercontent.com/paulirish/infinite-scroll/master/jquery.infinitescroll.js\n\n\n\nAsset Pipeline\u306bjquery-turbolinks\u3068jquery.infinitscroll\u3092\u8ffd\u52a0\n\napp/assets/javascripts/application.js\n#\u8ffd\u8a18\n//= require jquery.turbolinks\n//= require jquery.infinitescroll\n\n\n\n\u30e2\u30c7\u30eb\u306e\u6e96\u5099\n\n\u30e2\u30c7\u30eb\u306e\u4f5c\u6210\n\n\u30b3\u30de\u30f3\u30c9\n$ rails g model Hoge name description &&\n  rails g model Piyo name description &&\n  rails db:migrate\n\n\n\n\u521d\u671f\u30c7\u30fc\u30bf\u306e\u6295\u5165\n\ndb/seeds.rb\n#\u8ffd\u8a18\n1000.times do |i|\n  Hoge.create!(name: 'Hoge' + i.to_s, description: 'This is Hoge ' + i.to_s)\n  Piyo.create!(name: 'Piyo' + i.to_s, description: 'This is Piyo ' + i.to_s)\nend\n\n\n\n\u30b3\u30de\u30f3\u30c9\n$ rails db:seed\n\n\n\nController\u306e\u6e96\u5099\n\n\u30e1\u30a4\u30f3\u753b\u9762\u3068\u306a\u308bController\u3092\u4f5c\u6210\n\n\u30b3\u30de\u30f3\u30c9\n$ rails g controller home home\n\n\n\napp/controllers/home_controller.rb\nclass HomeController < ApplicationController\n  def home\n\n    #\u4e0b\u8a18\u8ffd\u8a18\n\n    #\u666e\u901a\u306e\u30a2\u30af\u30bb\u30b9\u306e\u6642\u306b\u5b9f\u884c\n    @hoges = Hoge.page(params[:hoge_page]) if params[:piyo_page].blank?\n    @piyos = Piyo.page(params[:piyo_page]) if params[:hoge_page].blank?\n    #*_page\u304c\u6e21\u3055\u308c\u305f\u6642\u306f\u3082\u3046\u7247\u65b9\u306f\u4e0d\u8981\u306a\u306e\u3067if\u6587\u3067DB\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8efd\u6e1b\n\n    #\u8ffd\u52a0\u8aad\u307f\u8fbc\u307f\u6642\u306b\u5b9f\u884c\u3001\u30ec\u30a4\u30a2\u30a6\u30c8\u7121\u3057\u3067\u30c7\u30fc\u30bf\u306e\u307f\u3092\u8fd4\u3059\n    unless params[:hoge_page].blank?\n      return render @hoges, layout: false\n    end\n    unless params[:piyo_page].blank?\n      return render @piyos, layout: false\n    end\n\n  end\nend\n\n\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u8a2d\u5b9a\n\nconfig/routes.rb\nRails.application.routes.draw do\n  get 'home/home' #\u8981\u3089\u306a\u3044\u306e\u3067\u4efb\u610f\u3067\u524a\u9664\n\n  root to: 'home#home' #\u8ffd\u8a18\nend\n\n\n\n\u30e2\u30c7\u30eb\u8aad\u307f\u8fbc\u307f\u7528\u306eController\u3092\u4f5c\u6210\n\u3053\u308c\u306f\u306a\u304f\u3066\u3082\u52d5\u304f\u306e\u3067\u4efb\u610f\u3067\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u30b3\u30de\u30f3\u30c9\n$ rails g controller hoges &&\n  rails g controller piyos\n\n\n\nView\u306e\u6e96\u5099\n\nhome view\u306e\u7de8\u96c6\n\napp/views/home/home.html.erb\n<div id='hoge_container'>\n  <table id=\"hoges\">\n    <thead>\n      <tr>\n        <th>Name</th>\n        <th>Description</th>\n      </tr>\n    </thead>\n\n    <tbody class=\"page\">\n      <%= render @hoges %>\n    </tbody>\n  </table>\n\n  <br>\n  <%= paginate @hoges, remote: true, param_name: :hoge_page %>\n</div>\n\n<div id='piyo_container'>\n  <table id=\"piyos\">\n    <thead>\n      <tr>\n        <th>Name</th>\n        <th>Description</th>\n      </tr>\n    </thead>\n\n    <tbody class=\"page\">\n      <%= render @piyos %>\n    </tbody>\n  </table>\n\n  <br>\n  <%= paginate @piyos, remote: true, param_name: :piyo_page %>\n</div>\n\n\n\nhoge\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f5c\u6210\n\napp/views/hoge/_hoge.html.erb\n<tr class=\"hoge\">\n  <td><%= hoge.name %></td>\n  <td><%= hoge.description %></td>\n</tr>\n\n\n\npiyo\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f5c\u6210\n\napp/views/piyo/_piyo.html.erb\n<tr class=\"piyo\">\n  <td><%= piyo.name %></td>\n  <td><%= piyo.description %></td>\n</tr>\n\n\n\ncss\u306e\u7de8\u96c6\n\napp/assets/stylesheets/application.css\n/*\u8ffd\u8a18*/\n#infscr-loading, .pagination {\n  width: 0;\n  display: none;\n}\n\n#hoge_container, #piyo_container{\n  float: left;\n  margin: 10px 50px;\n  padding: 10px 50px;\n}\n\nthead, tbody {\n  display:block;\n}\n\ntbody {\n  overflow-y:scroll;\n  height:500px;\n}\n\n\n\n\ninfinitescroll\u306e\u8a2d\u5b9a\nbehaviors\u3068binder\u3092\u6307\u5b9a\u3059\u308b\u4e8b\u3067\u30a6\u30a3\u30f3\u30c9\u30a6\u3067\u306f\u306a\u304f\u7279\u5b9a\u306e\u8981\u7d20\u304c\u4e0b\u307e\u3067\u30b9\u30af\u30ed\u30fc\u30eb\u3055\u308c\u305f\u6642\u306b\u8ffd\u52a0\u8aad\u307f\u8fbc\u307f\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\napp/assets/javascripts/home.coffee\n#\u8ffd\u8a18\n$ ->\n  $(\"#hoges .page\").infinitescroll\n    loading: {\n      img: \"\"\n      msgText: \"\"\n      finishedMsg: \"\"\n    }\n    animate: true\n    navSelector: \"#hoge_container nav.pagination\"\n    nextSelector: \"#hoge_container nav.pagination a[rel=next]\"\n    itemSelector: \"tr.hoge\"\n    behaviors: \"local\"\n    binder: $(\"#hoge_container .page\")\n\n$ ->\n  $(\"#piyos .page\").infinitescroll\n    loading: {\n      img: \"\"\n      msgText: \"\"\n      finishedMsg: \"\"\n    }\n    animate: true\n    navSelector: \"#piyo_container nav.pagination\"\n    nextSelector: \"#piyo_container nav.pagination a[rel=next]\"\n    itemSelector: \"tr.piyo\"\n    behaviors: \"local\"\n    binder: $(\"#piyo_container .page\")\n\n\n\n\n\u5b9f\u884c\n\n\u30b3\u30de\u30f3\u30c9\n$ rails s\n\n\nlocalhost:3000/\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\u305d\u308c\u305e\u308c\u3092\u30b9\u30af\u30ed\u30fc\u30eb\u3057\u3066\u81ea\u52d5\u3067\u8ffd\u52a0\u8aad\u307f\u8fbc\u307f\u3055\u308c\u308c\u3070\u6210\u529f\u3067\u3059\u3002\n\n\u307e\u3068\u3081\nJavaScript\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u52c9\u5f37\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u53c2\u8003\nInfinite Scroll\nRails\u3067Infinite Scroll\u3068kaminari\u3092\u4f7f\u3044\u30b9\u30af\u30ed\u30fc\u30eb\u306b\u3088\u308b\u52d5\u7684\u306b\u30da\u30fc\u30b8\u30ed\u30fc\u30c9\u6a5f\u80fd\u3092\u5b9f\u88c5\u3059\u308b\n\u3010Ruby On Rails\u3011infinit scroll\u3068kaminari\u306b\u3088\u308b\u7121\u9650\u30b9\u30af\u30ed\u30fc\u30eb\u306e\u5b9f\u88c5\n#\u3053\u308c\u306f\u4f55\n1\u753b\u9762\u306b\u8907\u6570\u30e2\u30c7\u30eb\u3092\u8868\u793a\u3059\u308bSPA\u3063\u307d\u3044Rails\u30a2\u30d7\u30ea\u3067\u753b\u9762\u9077\u79fb\u7121\u3057\u3067\u8ffd\u52a0\u8aad\u307f\u8fbc\u307f\u3057\u305f\u3044\u3001\n\u3067\u3082React\u3084Angular ~~\u306f\u3088\u304f\u5206\u304b\u3089\u306a\u3044~~ \u3092\u5c0e\u5165\u3057\u3066\u308b\u6642\u9593\u306f\u306a\u3044\u3001\n\u3068\u3044\u3046\u4eba\u306e\u305f\u3081\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\nGitHub\u306b[\u4f5c\u6210\u6e08\u307f\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9](https://github.com/nametaketakewo/multi-model-infinitscroll)\u304c\u3042\u308a\u307e\u3059\u3002\n\n#\u4f55\u3092\u4f7f\u3046\u306e\n\nkaminari\u3068jQuery, jquery.infinitscroll\u3092\u4f7f\u3044\u30e2\u30c7\u30eb\u306e\u8ffd\u52a0\u8aad\u307f\u8fbc\u307f\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n#\u3069\u3046\u306a\u308b\u306e\n\n\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n![multi-model-infinitscroll.gif](https://qiita-image-store.s3.amazonaws.com/0/51329/464f3154-f9d5-28c2-7053-8aa8985d85da.gif)\n\n#\u3069\u3046\u3059\u308b\u306e\n\n##\u30a2\u30d7\u30ea\u306e\u4f5c\u6210\n\n```bash:\u30b3\u30de\u30f3\u30c9\n$ rails new multi-model-infinitscroll --skip-bundle &&\n  cd multi-model-infinitscroll\n```\n\n##\u4e0b\u62f5\u3048\n\n###kaminari\u3068jquery-turbolinks\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```ruby:Gemfile\n#\u8ffd\u8a18\ngem \"jquery-turbolinks\"\ngem \"kaminari\"\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9\n$ bundle install\n```\n\n###jquery.infinitscroll\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n```bash:\u30b3\u30de\u30f3\u30c9\n$ curl -k -o vendor/assets/javascripts/jquery.infinitescroll.js \\\n https://raw.githubusercontent.com/paulirish/infinite-scroll/master/jquery.infinitescroll.js\n```\n\n###Asset Pipeline\u306bjquery-turbolinks\u3068jquery.infinitscroll\u3092\u8ffd\u52a0\n\n```ruby:app/assets/javascripts/application.js\n#\u8ffd\u8a18\n//= require jquery.turbolinks\n//= require jquery.infinitescroll\n```\n\n##\u30e2\u30c7\u30eb\u306e\u6e96\u5099\n\n###\u30e2\u30c7\u30eb\u306e\u4f5c\u6210\n\n```bash:\u30b3\u30de\u30f3\u30c9\n$ rails g model Hoge name description &&\n  rails g model Piyo name description &&\n  rails db:migrate\n```\n\n###\u521d\u671f\u30c7\u30fc\u30bf\u306e\u6295\u5165\n\n```ruby:db/seeds.rb\n#\u8ffd\u8a18\n1000.times do |i|\n  Hoge.create!(name: 'Hoge' + i.to_s, description: 'This is Hoge ' + i.to_s)\n  Piyo.create!(name: 'Piyo' + i.to_s, description: 'This is Piyo ' + i.to_s)\nend\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9\n$ rails db:seed\n```\n\n##Controller\u306e\u6e96\u5099\n\n###\u30e1\u30a4\u30f3\u753b\u9762\u3068\u306a\u308bController\u3092\u4f5c\u6210\n\n```bash:\u30b3\u30de\u30f3\u30c9\n$ rails g controller home home\n```\n\n```ruby:app/controllers/home_controller.rb\nclass HomeController < ApplicationController\n  def home\n\n    #\u4e0b\u8a18\u8ffd\u8a18\n\n    #\u666e\u901a\u306e\u30a2\u30af\u30bb\u30b9\u306e\u6642\u306b\u5b9f\u884c\n    @hoges = Hoge.page(params[:hoge_page]) if params[:piyo_page].blank?\n    @piyos = Piyo.page(params[:piyo_page]) if params[:hoge_page].blank?\n    #*_page\u304c\u6e21\u3055\u308c\u305f\u6642\u306f\u3082\u3046\u7247\u65b9\u306f\u4e0d\u8981\u306a\u306e\u3067if\u6587\u3067DB\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8efd\u6e1b\n\n    #\u8ffd\u52a0\u8aad\u307f\u8fbc\u307f\u6642\u306b\u5b9f\u884c\u3001\u30ec\u30a4\u30a2\u30a6\u30c8\u7121\u3057\u3067\u30c7\u30fc\u30bf\u306e\u307f\u3092\u8fd4\u3059\n    unless params[:hoge_page].blank?\n      return render @hoges, layout: false\n    end\n    unless params[:piyo_page].blank?\n      return render @piyos, layout: false\n    end\n\n  end\nend\n```\n\n###\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u8a2d\u5b9a\n\n```ruby:config/routes.rb\nRails.application.routes.draw do\n  get 'home/home' #\u8981\u3089\u306a\u3044\u306e\u3067\u4efb\u610f\u3067\u524a\u9664\n\n  root to: 'home#home' #\u8ffd\u8a18\nend\n```\n\n###\u30e2\u30c7\u30eb\u8aad\u307f\u8fbc\u307f\u7528\u306eController\u3092\u4f5c\u6210\n\n\u3053\u308c\u306f\u306a\u304f\u3066\u3082\u52d5\u304f\u306e\u3067\u4efb\u610f\u3067\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9\n$ rails g controller hoges &&\n  rails g controller piyos\n```\n\n##View\u306e\u6e96\u5099\n\n###home view\u306e\u7de8\u96c6\n\n```html+erb:app/views/home/home.html.erb\n<div id='hoge_container'>\n  <table id=\"hoges\">\n    <thead>\n      <tr>\n        <th>Name</th>\n        <th>Description</th>\n      </tr>\n    </thead>\n\n    <tbody class=\"page\">\n      <%= render @hoges %>\n    </tbody>\n  </table>\n\n  <br>\n  <%= paginate @hoges, remote: true, param_name: :hoge_page %>\n</div>\n\n<div id='piyo_container'>\n  <table id=\"piyos\">\n    <thead>\n      <tr>\n        <th>Name</th>\n        <th>Description</th>\n      </tr>\n    </thead>\n\n    <tbody class=\"page\">\n      <%= render @piyos %>\n    </tbody>\n  </table>\n\n  <br>\n  <%= paginate @piyos, remote: true, param_name: :piyo_page %>\n</div>\n```\n\n###hoge\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f5c\u6210\n\n```html+erb:app/views/hoge/_hoge.html.erb\n<tr class=\"hoge\">\n  <td><%= hoge.name %></td>\n  <td><%= hoge.description %></td>\n</tr>\n```\n\n###piyo\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f5c\u6210\n\n```html+erb:app/views/piyo/_piyo.html.erb\n<tr class=\"piyo\">\n  <td><%= piyo.name %></td>\n  <td><%= piyo.description %></td>\n</tr>\n```\n\n###css\u306e\u7de8\u96c6\n\n```css:app/assets/stylesheets/application.css\n/*\u8ffd\u8a18*/\n#infscr-loading, .pagination {\n  width: 0;\n  display: none;\n}\n\n#hoge_container, #piyo_container{\n  float: left;\n  margin: 10px 50px;\n  padding: 10px 50px;\n}\n\nthead, tbody {\n  display:block;\n}\n\ntbody {\n  overflow-y:scroll;\n  height:500px;\n}\n\n```\n\n###infinitescroll\u306e\u8a2d\u5b9a\n\n\nbehaviors\u3068binder\u3092\u6307\u5b9a\u3059\u308b\u4e8b\u3067\u30a6\u30a3\u30f3\u30c9\u30a6\u3067\u306f\u306a\u304f\u7279\u5b9a\u306e\u8981\u7d20\u304c\u4e0b\u307e\u3067\u30b9\u30af\u30ed\u30fc\u30eb\u3055\u308c\u305f\u6642\u306b\u8ffd\u52a0\u8aad\u307f\u8fbc\u307f\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```ruby:app/assets/javascripts/home.coffee\n#\u8ffd\u8a18\n$ ->\n  $(\"#hoges .page\").infinitescroll\n    loading: {\n      img: \"\"\n      msgText: \"\"\n      finishedMsg: \"\"\n    }\n    animate: true\n    navSelector: \"#hoge_container nav.pagination\"\n    nextSelector: \"#hoge_container nav.pagination a[rel=next]\"\n    itemSelector: \"tr.hoge\"\n    behaviors: \"local\"\n    binder: $(\"#hoge_container .page\")\n\n$ ->\n  $(\"#piyos .page\").infinitescroll\n    loading: {\n      img: \"\"\n      msgText: \"\"\n      finishedMsg: \"\"\n    }\n    animate: true\n    navSelector: \"#piyo_container nav.pagination\"\n    nextSelector: \"#piyo_container nav.pagination a[rel=next]\"\n    itemSelector: \"tr.piyo\"\n    behaviors: \"local\"\n    binder: $(\"#piyo_container .page\")\n\n```\n\n##\u5b9f\u884c\n\n```bash:\u30b3\u30de\u30f3\u30c9\n$ rails s\n```\n[localhost:3000/](http://localhost:3000/)\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u305d\u308c\u305e\u308c\u3092\u30b9\u30af\u30ed\u30fc\u30eb\u3057\u3066\u81ea\u52d5\u3067\u8ffd\u52a0\u8aad\u307f\u8fbc\u307f\u3055\u308c\u308c\u3070\u6210\u529f\u3067\u3059\u3002\n\n#\u307e\u3068\u3081\n\nJavaScript\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u52c9\u5f37\u3057\u307e\u3057\u3087\u3046\u3002\n\n#\u53c2\u8003\n\n[Infinite Scroll](https://github.com/infinite-scroll/infinite-scroll)\n\n[Rails\u3067Infinite Scroll\u3068kaminari\u3092\u4f7f\u3044\u30b9\u30af\u30ed\u30fc\u30eb\u306b\u3088\u308b\u52d5\u7684\u306b\u30da\u30fc\u30b8\u30ed\u30fc\u30c9\u6a5f\u80fd\u3092\u5b9f\u88c5\u3059\u308b](http://ruby-rails.hatenadiary.com/entry/20141115/1416021886)\n\n[\u3010Ruby On Rails\u3011infinit scroll\u3068kaminari\u306b\u3088\u308b\u7121\u9650\u30b9\u30af\u30ed\u30fc\u30eb\u306e\u5b9f\u88c5](http://watarisein.hatenablog.com/entry/2016/01/02/013050)\n", "tags": ["Ruby", "Rails", "Rails5", "jQuery", "SPA"]}