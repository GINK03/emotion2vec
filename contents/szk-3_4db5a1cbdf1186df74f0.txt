{"context": " More than 1 year has passed since last update.\n\u98df\u4e8b\u8a18\u9332SNS\u30df\u30a4\u30eb\n\niOS\u7248\u30df\u30a4\u30eb\u5185\u3067\u300c\u30b7\u30a7\u30a2\u300d\uff1e\u300cEvernote\u300d\uff1e\u300c\u4fdd\u5b58\u300d\u3057\u305f\u30ce\u30fc\u30c8\n\u30ce\u30fc\u30c8\u306e\u30bd\u30fc\u30b9URL\u306b\u306f\u30df\u30a4\u30eb\u306b\u6295\u7a3f\u3057\u305fURL\u304c\u542b\u307e\u308c\u308b\n\n\n\nhttp://miil.me/g/...\u307e\u305f\u306fhttp://miil.me/p/...\n\n\n\nMac\u7248Evernote\u3067\u30df\u30a4\u30eb\u306e\u30ce\u30fc\u30c8\u304b\u3089URL\u3092\u53d6\u5f97\u3057\u3066Safari\u3067\u30da\u30fc\u30b8\u3092\u958b\u304f\n\u6295\u7a3f\u30da\u30fc\u30b8\u4e2d\u90e8\u306b\u3042\u308b\u5e97\u60c5\u5831\u304b\u3089\u30df\u30a4\u30eb\u306e\u5e97\u8217\u30da\u30fc\u30b8\u3078\u79fb\u52d5\n\n\nhttp://miil.me/v/...\n\n\n\u5e97\u8217\u30da\u30fc\u30b8\u4e2d\u90e8\u306b\u57cb\u3081\u8fbc\u307e\u308c\u305f\u5730\u56f3\u304b\u3089\u4f4d\u7f6e\u60c5\u5831\u3092\u53d6\u5f97\n\u30df\u30a4\u30eb\u306e\u30ce\u30fc\u30c8\u306b\u4f4d\u7f6e\u60c5\u5831\u3092\u8ffd\u52a0\n\n\nsetAddressToMiilNoteInEvernote.scpt\ntell application \"Evernote\"\n    set {miilNote} to selection\nend tell\nmy setAddressToMiilNoteInEvernote(miilNote)\n\non setAddressToMiilNoteInEvernote(miilNote)\n    tell application \"Evernote\"\n        tell miilNote\n            set {lat:latitude, lng:longitude} to my getLatlngOfRestaurantFromMiil(source URL)\n        end tell\n    end tell\nend setAddressToMiilNoteInEvernote\n\non getLatlngOfRestaurantFromMiil(miilURL as text)\n    if miilURL does not start with \"http://miil.me/\" then\n        error\n    end if\n    my openURLinSafari(miilURL)\n    tell application \"Safari\"\n        if character 16 of miilURL is in {\"g\", \"p\"} then\n            set JSResult to \"loading\"\n            repeat while JSResult = \"loading\"\n                set JSResult to do JavaScript \"if(!document.getElementsByClassName('detailphoto')[0]) {\n    'loading';\n} else {\n    var elements = document.getElementsByClassName('venueHdl mb20');\n    if(!elements[0]) {\n        'error';\n    } else {\n        elements[0].firstChild.click();\n    }\n}\" in document 1\n                if JSResult = \"error\" then\n                    error \"\u5e97\u8217\u3092\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\"\n                end if\n            end repeat\n        end if\n        set latlng to missing value\n        repeat while latlng = missing value\n            delay 1\n            set latlng to do JavaScript \"var latlng = document.getElementById('venueMapView').firstElementChild.children;\nlatlng[0].getAttribute('content') + '\\\\n' + latlng[1].getAttribute('content');\" in document 1\n        end repeat\n        close current tab of window 1\n    end tell\n    return {lat:paragraph 1 of latlng as number, lng:paragraph 2 of latlng as number}\nend getLatlngOfRestaurantFromMiil\n\non openURLinSafari(aURL)\n    tell application \"Safari\"\n        open location aURL\n        repeat\n            try\n                set aTab to current tab of window 1\n                exit repeat\n            on error number -1719\n            end try\n        end repeat\n    end tell\n    my waitForSafariLoading(aTab)\n    return aTab\nend openURLinSafari\n\non waitForSafariLoading(aTab)\n    repeat while my loadingOfSafari(aTab)\n        delay 1\n    end repeat\nend waitForSafariLoading\n\non loadingOfSafari(aTab)\n    try\n        tell application \"Safari\"\n            return (URL of aTab = missing value) or (do JavaScript \"document.readyState\" in aTab) \u2260 \"complete\"\n        end tell\n    on error\n        return true\n    end try\nend loadingOfSafari\n\n\n\n\u66f4\u65b0\u60c5\u5831\n\n2015-10-15: Mac\u7528Twitter\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u300c\u591c\u30d5\u30af\u30ed\u30a6\u300d\u7d4c\u7531\u3067\u8a66\u4f5c\n2015-12-21: Evernote\u306e\u30ce\u30fc\u30c8\u304b\u3089URL\u3092\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\n2015-12-22: \u5e97\u8217\u306e\u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u5143\u3092\u4f4f\u6240\u304b\u3089\u5730\u56f3\u3078\u5909\u66f4\n2015-12-26: \u5e97\u8217\u60c5\u5831\u304c\u306a\u3044\u6295\u7a3f\u306b\u5bfe\u5fdc\n\n\n* \u98df\u4e8b\u8a18\u9332SNS[\u30df\u30a4\u30eb](http://miil.me/)\n* iOS\u7248\u30df\u30a4\u30eb\u5185\u3067\u300c\u30b7\u30a7\u30a2\u300d\uff1e\u300cEvernote\u300d\uff1e\u300c\u4fdd\u5b58\u300d\u3057\u305f\u30ce\u30fc\u30c8\n* \u30ce\u30fc\u30c8\u306e\u30bd\u30fc\u30b9URL\u306b\u306f\u30df\u30a4\u30eb\u306b\u6295\u7a3f\u3057\u305fURL\u304c\u542b\u307e\u308c\u308b\n\t* `http://miil.me/g/...`\u307e\u305f\u306f`http://miil.me/p/...`\n* Mac\u7248Evernote\u3067\u30df\u30a4\u30eb\u306e\u30ce\u30fc\u30c8\u304b\u3089URL\u3092\u53d6\u5f97\u3057\u3066Safari\u3067\u30da\u30fc\u30b8\u3092\u958b\u304f\n* \u6295\u7a3f\u30da\u30fc\u30b8\u4e2d\u90e8\u306b\u3042\u308b\u5e97\u60c5\u5831\u304b\u3089\u30df\u30a4\u30eb\u306e\u5e97\u8217\u30da\u30fc\u30b8\u3078\u79fb\u52d5\n\t* `http://miil.me/v/...`\n* \u5e97\u8217\u30da\u30fc\u30b8\u4e2d\u90e8\u306b\u57cb\u3081\u8fbc\u307e\u308c\u305f\u5730\u56f3\u304b\u3089\u4f4d\u7f6e\u60c5\u5831\u3092\u53d6\u5f97\n* \u30df\u30a4\u30eb\u306e\u30ce\u30fc\u30c8\u306b\u4f4d\u7f6e\u60c5\u5831\u3092\u8ffd\u52a0\n\n\n```applescript:setAddressToMiilNoteInEvernote.scpt\ntell application \"Evernote\"\n\tset {miilNote} to selection\nend tell\nmy setAddressToMiilNoteInEvernote(miilNote)\n\non setAddressToMiilNoteInEvernote(miilNote)\n\ttell application \"Evernote\"\n\t\ttell miilNote\n\t\t\tset {lat:latitude, lng:longitude} to my getLatlngOfRestaurantFromMiil(source URL)\n\t\tend tell\n\tend tell\nend setAddressToMiilNoteInEvernote\n\non getLatlngOfRestaurantFromMiil(miilURL as text)\n\tif miilURL does not start with \"http://miil.me/\" then\n\t\terror\n\tend if\n\tmy openURLinSafari(miilURL)\n\ttell application \"Safari\"\n\t\tif character 16 of miilURL is in {\"g\", \"p\"} then\n\t\t\tset JSResult to \"loading\"\n\t\t\trepeat while JSResult = \"loading\"\n\t\t\t\tset JSResult to do JavaScript \"if(!document.getElementsByClassName('detailphoto')[0]) {\n\t'loading';\n} else {\n\tvar elements = document.getElementsByClassName('venueHdl mb20');\n\tif(!elements[0]) {\n\t\t'error';\n\t} else {\n\t\telements[0].firstChild.click();\n\t}\n}\" in document 1\n\t\t\t\tif JSResult = \"error\" then\n\t\t\t\t\terror \"\u5e97\u8217\u3092\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\"\n\t\t\t\tend if\n\t\t\tend repeat\n\t\tend if\n\t\tset latlng to missing value\n\t\trepeat while latlng = missing value\n\t\t\tdelay 1\n\t\t\tset latlng to do JavaScript \"var latlng = document.getElementById('venueMapView').firstElementChild.children;\nlatlng[0].getAttribute('content') + '\\\\n' + latlng[1].getAttribute('content');\" in document 1\n\t\tend repeat\n\t\tclose current tab of window 1\n\tend tell\n\treturn {lat:paragraph 1 of latlng as number, lng:paragraph 2 of latlng as number}\nend getLatlngOfRestaurantFromMiil\n\non openURLinSafari(aURL)\n\ttell application \"Safari\"\n\t\topen location aURL\n\t\trepeat\n\t\t\ttry\n\t\t\t\tset aTab to current tab of window 1\n\t\t\t\texit repeat\n\t\t\ton error number -1719\n\t\t\tend try\n\t\tend repeat\n\tend tell\n\tmy waitForSafariLoading(aTab)\n\treturn aTab\nend openURLinSafari\n\non waitForSafariLoading(aTab)\n\trepeat while my loadingOfSafari(aTab)\n\t\tdelay 1\n\tend repeat\nend waitForSafariLoading\n\non loadingOfSafari(aTab)\n\ttry\n\t\ttell application \"Safari\"\n\t\t\treturn (URL of aTab = missing value) or (do JavaScript \"document.readyState\" in aTab) \u2260 \"complete\"\n\t\tend tell\n\ton error\n\t\treturn true\n\tend try\nend loadingOfSafari\n```\n\n\n## \u66f4\u65b0\u60c5\u5831\n\n* 2015-10-15: Mac\u7528Twitter\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u300c\u591c\u30d5\u30af\u30ed\u30a6\u300d\u7d4c\u7531\u3067\u8a66\u4f5c\n* 2015-12-21: Evernote\u306e\u30ce\u30fc\u30c8\u304b\u3089URL\u3092\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\n* 2015-12-22: \u5e97\u8217\u306e\u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u5143\u3092\u4f4f\u6240\u304b\u3089\u5730\u56f3\u3078\u5909\u66f4\n* 2015-12-26: \u5e97\u8217\u60c5\u5831\u304c\u306a\u3044\u6295\u7a3f\u306b\u5bfe\u5fdc\n\n", "tags": ["Evernote", "AppleScript", "Safari"]}