{"context": "Firefox\u30a2\u30c9\u30aa\u30f3\u3067\u30de\u30a6\u30b9\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\u3057\u3066\u30015\u79d2\u30a2\u30a4\u30c9\u30eb\u6642\u9593\u304c\u3042\u308c\u3070\u30d6\u30e9\u30a6\u30b6\u3092\u9589\u3058\u308b\u3002\n\nindex.js\nvar system = require(\"sdk/system\");\nvar { setTimeout, clearTimeout } = require('sdk/timers');\n\nvar tabs = require(\"sdk/tabs\");\nvar pageMod = require(\"sdk/page-mod\");\nvar data = require(\"sdk/self\").data;\nvar to;\n\nto = sto();\nfunction sto(){\n    return setTimeout(function(){\n        system.exit();\n    }, 5000);\n}\n\ntabs.on('ready',function(tab){\n    detect_event(tab);\n});\n\ntabs.on('activate', function(tab) {\n    detect_event(tab);\n});\n\nfunction detect_event(tab){\n    worker = tab.attach({\n        contentScriptFile: data.url(\"content-script.js\")\n    });\n    worker.port.on(\"event\",function(msg){\n        console.log(msg);\n        clearTimeout(to);\n        to = sto();\n    });\n}\n\n\n\ncontent-script.js\n//\u30af\u30ea\u30c3\u30af\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\u3057\u3001\u30a2\u30c9\u30aa\u30f3\u5074\u306b\u901a\u77e5\nwindow.onclick = function() { \n    self.port.emit(\"event\",\"click\");\n}\n//\u30db\u30a4\u30fc\u30eb\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\u3057\u3001\u30a2\u30c9\u30aa\u30f3\u5074\u306b\u901a\u77e5\ndocument.addEventListener(\"wheel\",function(e){\n    self.port.emit(\"event\",\"wheel\");\n})\n\n\nFirefox\u30a2\u30c9\u30aa\u30f3\u3067\u30de\u30a6\u30b9\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\u3057\u3066\u30015\u79d2\u30a2\u30a4\u30c9\u30eb\u6642\u9593\u304c\u3042\u308c\u3070\u30d6\u30e9\u30a6\u30b6\u3092\u9589\u3058\u308b\u3002\n\n```js:index.js\nvar system = require(\"sdk/system\");\nvar { setTimeout, clearTimeout } = require('sdk/timers');\n\nvar tabs = require(\"sdk/tabs\");\nvar pageMod = require(\"sdk/page-mod\");\nvar data = require(\"sdk/self\").data;\nvar to;\n\nto = sto();\nfunction sto(){\n\treturn setTimeout(function(){\n\t\tsystem.exit();\n\t}, 5000);\n}\n\ntabs.on('ready',function(tab){\n\tdetect_event(tab);\n});\n\ntabs.on('activate', function(tab) {\n\tdetect_event(tab);\n});\n\nfunction detect_event(tab){\n\tworker = tab.attach({\n\t\tcontentScriptFile: data.url(\"content-script.js\")\n\t});\n\tworker.port.on(\"event\",function(msg){\n\t\tconsole.log(msg);\n\t\tclearTimeout(to);\n\t\tto = sto();\n\t});\n}\n```\n\n```js:content-script.js\n//\u30af\u30ea\u30c3\u30af\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\u3057\u3001\u30a2\u30c9\u30aa\u30f3\u5074\u306b\u901a\u77e5\nwindow.onclick = function() { \n\tself.port.emit(\"event\",\"click\");\n}\n//\u30db\u30a4\u30fc\u30eb\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\u3057\u3001\u30a2\u30c9\u30aa\u30f3\u5074\u306b\u901a\u77e5\ndocument.addEventListener(\"wheel\",function(e){\n\tself.port.emit(\"event\",\"wheel\");\n})\n```\n", "tags": ["firefox", "AddonSDK"]}