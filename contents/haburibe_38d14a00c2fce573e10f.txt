{"context": " More than 1 year has passed since last update.\n\n\u76ee\u6b21\n\n\u74b0\u5883\nArch Linux\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306e\u8a2d\u5b9a\nVM\u30a4\u30e1\u30fc\u30b8\u3092Vabrant\u306ebasebox\u306b\u3059\u308b\n\n\n\u74b0\u5883\n\n\u30db\u30b9\u30c8OS\n\n\nMacbook Air (Marvericks)\nVirtualbox 4.3.10\nVagrant 1.4.3\n\n\n\u30b2\u30b9\u30c8OS\n\n\nArch Linux 2014.05.01\n\n\n\n\nArch Linux\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nArchWiki\u3092\u53c2\u8003\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nBeginners' Guide (\u65e5\u672c\u8a9e) - ArchWiki\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306e\u8a2d\u5b9a\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\n\nsudo\n\u30d1\u30b9\u30ef\u30fc\u30c9\u306a\u3057\u3067sudo\u3092\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b.\n# visudo\n\n%wheel ALL=(ALL) NOPASSWD: ALL\n\n\nopenssh\n# pacman -S openssh\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u30db\u30b9\u30c8\u540d\u3092\u9006\u5f15\u304d\u3057\u306a\u3044.\n# vi /etc/ssh/sshd_config\n-------------------------\n#UseDNS yes\nUseDNS no\n\nSSH\u30b5\u30fc\u30d0\u3092\u30c7\u30fc\u30e2\u30f3\u3068\u3057\u3066\u8d77\u52d5\u3059\u308b.\n# systemctl enable sshd.service\n# systemctl start sshd.service\n\n\n\u30e6\u30fc\u30b6\u3092\u8ffd\u52a0\nvagrant\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u30e6\u30fc\u30b6\u3092\u8ffd\u52a0\u3059\u308b\n# useradd -m -g users -G wheel -s /bin/bash archer\n# passwd archer\n# su - archer\n$ mkdir ~/.ssh\n$ chmod 700 ~/.ssh\n\n\u30db\u30b9\u30c8\u4e0a\u3067ssh\u30ad\u30fc\u3092\u4f5c\u6210\u3057\u3066\u30b2\u30b9\u30c8\u306b\u8ee2\u9001\u3059\u308b\n\nnote: VM\u306e\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c7\u30a3\u30f3\u30b0\u8a2d\u5b9a: \u30db\u30b9\u30c8(2222) -> \u30b2\u30b9\u30c8(22)\n\n$ ssh-keygen -t rsa -f ~/.ssh/arch64 -C \"archer@arch64\"\n$ scp -P 2222 ~/.ssh/arch64.pub archer@localhost:~/.ssh/authorized_keys\n\n\nVirtualbox \u306e Guest Addisions \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n# pacman -S virtualbox-guest-utils\n\n\n\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u8a2d\u5b9a\n\nnote: wiki\u7b49\u306e\u624b\u9806\u306b\u306f\u7121\u3044\u304c\u30cf\u30de\u3063\u305f\u306e\u3067\u8a18\u9332\n\u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u60c5\u5831\u3092\u66f4\u65b0\u3059\u308b\n\n# depmod -a\n\nGUI\u306f\u4f7f\u7528\u3057\u306a\u3044\u306e\u3067 vboxvideo\u306f\u8a2d\u5b9a\u3057\u306a\u3044.\n# modprobe -a vboxguest vboxsf\n# vi /etc/modules-load.d/virtualbox.conf\n\n\n/etc/modules-load.d/virtualbox.conf\nvboxguest\nvboxsf\n\n\n\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u6a5f\u80fd\u3092\u6709\u52b9\u306b\u3059\u308b\n# groupadd vboxsf\n# gpasswd -a archer vboxsf\n# systemctl enable vboxservice.service\n\n\nVM\u30a4\u30e1\u30fc\u30b8\u3092vagrant\u306ebasebox\u306b\u3059\u308b\n1) pacman\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u30af\u30ea\u30a2\u3059\u308b.\n# pacman -Sc\n\n2) DHCP\u30ea\u30fc\u30b9\u60c5\u5831\u3092\u524a\u9664\u3059\u308b.\n# rm /var/lib/dhcpcd/*\n\n3) VM\u30a4\u30e1\u30fc\u30b8\u3092\u30b3\u30f3\u30d1\u30af\u30c8\u5316\u3059\u308b.\n# dd if=/dev/zero of=/EMPTY bs=1M\n# rm /EMPTY\n\n4) \u30b3\u30de\u30f3\u30c9\u5c65\u6b74\u3092\u524a\u9664\u3059\u308b.\n# su - archer\n$ history -c\n<C-D>\n# history -c\n<C-D>\n\n5) VM\u3092\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3059\u308b.\n6) VM\u306e\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c7\u30a3\u30f3\u30b0\u306e\u8a2d\u5b9a\u3092\u524a\u9664\u3059\u308b.\n7) \u30db\u30b9\u30c8\u4e0a\u3067VM\u30a4\u30e1\u30fc\u30b8\u306ebox\u3092\u4f5c\u6210\u3059\u308b\n$ vagrant package --base arch64 --output arch64.box\n$ vagrant box add arch64 arch64.box\n$ rm arch64.box\n\n8) vagrant\u3067VM\u3092\u4f5c\u6210\u3059\u308b.\n$ vagrant init arch64\n\n9) VagrantFile\u3092\u7de8\u96c6\nconfig.vm.box = \"arch64\"\nconfig.ssh.username = \"archer\"\nconfig.ssh.private_key_path = \"~/.ssh/arch64\"\n\n10) VM\u3092\u8d77\u52d5\u3059\u308b\n$ vagrant up\n\n\n\u53c2\u8003\u30b5\u30a4\u30c8\n\nBeginners' Guide (\u65e5\u672c\u8a9e) - ArchWiki\nVirtualbox (\u65e5\u672c\u8a9e) - ArchWiki\nVagrant \u306e\u30d9\u30fc\u30b9BOX\u4f5c\u6210\u624b\u9806 (Scientific Linux 6.1) - \u30a8\u30f3\u30b8\u30cb\u30a2\u304d\u307e\u3050\u308cTips\nveewee/templates/archlinux-x86_64/virtualbox.sh at master \u00b7 jedi4ever/veewee\n\n\n## \u76ee\u6b21\n1. \u74b0\u5883\n* Arch Linux\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n* \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306e\u8a2d\u5b9a\n* VM\u30a4\u30e1\u30fc\u30b8\u3092Vabrant\u306ebasebox\u306b\u3059\u308b\n\n## \u74b0\u5883\n* \u30db\u30b9\u30c8OS\n * Macbook Air (Marvericks)\n * Virtualbox 4.3.10\n * Vagrant 1.4.3\n* \u30b2\u30b9\u30c8OS\n * Arch Linux 2014.05.01\n\n## Arch Linux\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nArchWiki\u3092\u53c2\u8003\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n[Beginners' Guide (\u65e5\u672c\u8a9e) - ArchWiki] (https://wiki.archlinux.org/index.php/Beginners'_Guide_(\u65e5\u672c\u8a9e))\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306e\u8a2d\u5b9a\n\n### \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\n\n#### sudo\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\u306a\u3057\u3067sudo\u3092\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b.\n\n```\n# visudo\n```\n\n```\n%wheel ALL=(ALL) NOPASSWD: ALL\n```\n\n#### openssh\n\n```\n# pacman -S openssh\n```\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u30db\u30b9\u30c8\u540d\u3092\u9006\u5f15\u304d\u3057\u306a\u3044.\n\n```\n# vi /etc/ssh/sshd_config\n-------------------------\n#UseDNS yes\nUseDNS no\n```\n\nSSH\u30b5\u30fc\u30d0\u3092\u30c7\u30fc\u30e2\u30f3\u3068\u3057\u3066\u8d77\u52d5\u3059\u308b.\n\n```\n# systemctl enable sshd.service\n# systemctl start sshd.service\n```\n\n### \u30e6\u30fc\u30b6\u3092\u8ffd\u52a0\n\nvagrant\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u30e6\u30fc\u30b6\u3092\u8ffd\u52a0\u3059\u308b\n\n```\n# useradd -m -g users -G wheel -s /bin/bash archer\n# passwd archer\n# su - archer\n$ mkdir ~/.ssh\n$ chmod 700 ~/.ssh\n```\n\n\u30db\u30b9\u30c8\u4e0a\u3067ssh\u30ad\u30fc\u3092\u4f5c\u6210\u3057\u3066\u30b2\u30b9\u30c8\u306b\u8ee2\u9001\u3059\u308b\n\n> note: VM\u306e\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c7\u30a3\u30f3\u30b0\u8a2d\u5b9a: \u30db\u30b9\u30c8(2222) -> \u30b2\u30b9\u30c8(22)\n\n```\n$ ssh-keygen -t rsa -f ~/.ssh/arch64 -C \"archer@arch64\"\n$ scp -P 2222 ~/.ssh/arch64.pub archer@localhost:~/.ssh/authorized_keys\n```\n\n### Virtualbox \u306e Guest Addisions \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n```\n# pacman -S virtualbox-guest-utils\n```\n\n#### \u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u8a2d\u5b9a\n\n> note: wiki\u7b49\u306e\u624b\u9806\u306b\u306f\u7121\u3044\u304c\u30cf\u30de\u3063\u305f\u306e\u3067\u8a18\u9332\n> \u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u60c5\u5831\u3092\u66f4\u65b0\u3059\u308b\n\n```\n# depmod -a\n```\n\nGUI\u306f\u4f7f\u7528\u3057\u306a\u3044\u306e\u3067 vboxvideo\u306f\u8a2d\u5b9a\u3057\u306a\u3044.\n\n```\n# modprobe -a vboxguest vboxsf\n# vi /etc/modules-load.d/virtualbox.conf\n```\n\n```/etc/modules-load.d/virtualbox.conf\nvboxguest\nvboxsf\n```\n\n\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u6a5f\u80fd\u3092\u6709\u52b9\u306b\u3059\u308b\n\n```\n# groupadd vboxsf\n# gpasswd -a archer vboxsf\n# systemctl enable vboxservice.service\n```\n\n## VM\u30a4\u30e1\u30fc\u30b8\u3092vagrant\u306ebasebox\u306b\u3059\u308b\n\n1) pacman\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u30af\u30ea\u30a2\u3059\u308b.\n\n```\n# pacman -Sc\n```\n\n2) DHCP\u30ea\u30fc\u30b9\u60c5\u5831\u3092\u524a\u9664\u3059\u308b.\n\n```\n# rm /var/lib/dhcpcd/*\n```\n\n3) VM\u30a4\u30e1\u30fc\u30b8\u3092\u30b3\u30f3\u30d1\u30af\u30c8\u5316\u3059\u308b.\n\n```\n# dd if=/dev/zero of=/EMPTY bs=1M\n# rm /EMPTY\n```\n\n4) \u30b3\u30de\u30f3\u30c9\u5c65\u6b74\u3092\u524a\u9664\u3059\u308b.\n\n```\n# su - archer\n$ history -c\n<C-D>\n# history -c\n<C-D>\n```\n\n5) VM\u3092\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3059\u308b.\n\n6) VM\u306e\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c7\u30a3\u30f3\u30b0\u306e\u8a2d\u5b9a\u3092\u524a\u9664\u3059\u308b.\n\n7) \u30db\u30b9\u30c8\u4e0a\u3067VM\u30a4\u30e1\u30fc\u30b8\u306ebox\u3092\u4f5c\u6210\u3059\u308b\n\n```\n$ vagrant package --base arch64 --output arch64.box\n$ vagrant box add arch64 arch64.box\n$ rm arch64.box\n```\n\n8) vagrant\u3067VM\u3092\u4f5c\u6210\u3059\u308b.\n\n```\n$ vagrant init arch64\n```\n\n9) VagrantFile\u3092\u7de8\u96c6\n\n```\nconfig.vm.box = \"arch64\"\nconfig.ssh.username = \"archer\"\nconfig.ssh.private_key_path = \"~/.ssh/arch64\"\n```\n\n10) VM\u3092\u8d77\u52d5\u3059\u308b\n\n```\n$ vagrant up\n```\n\n## \u53c2\u8003\u30b5\u30a4\u30c8\n\n* [Beginners' Guide (\u65e5\u672c\u8a9e) - ArchWiki] (https://wiki.archlinux.org/index.php/Beginners'_Guide_(\u65e5\u672c\u8a9e))\n* [Virtualbox (\u65e5\u672c\u8a9e) - ArchWiki] (https://wiki.archlinux.org/index.php/VirtualBox_(\u65e5\u672c\u8a9e))\n* [Vagrant \u306e\u30d9\u30fc\u30b9BOX\u4f5c\u6210\u624b\u9806 (Scientific Linux 6.1) - \u30a8\u30f3\u30b8\u30cb\u30a2\u304d\u307e\u3050\u308cTips] (http://d.hatena.ne.jp/okinaka/20110805/1312474847)\n* [veewee/templates/archlinux-x86_64/virtualbox.sh at master \u00b7 jedi4ever/veewee] (https://github.com/jedi4ever/veewee/blob/master/templates/archlinux-x86_64/virtualbox.sh)\n", "tags": ["vagrant", "archLinux", "VirtualBox"]}