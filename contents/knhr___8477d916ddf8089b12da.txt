{"context": "\u30bf\u30a4\u30c8\u30eb\u306f\u3042\u308c\u3067\u3059\u304c riot\u3068Redux\u306e\u7d44\u307f\u5408\u308f\u305b\u306e\u30a2\u30d7\u30ea\u306e\u7d20\u632f\u308a\u3092\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067\u3053\u3093\u306a\u306e\u4f5c\u308a\u307e\u3057\u305f\u3002\n\n\n\u984c\u6750\n\u666e\u901a\u306eWeb\u30a2\u30d7\u30ea\u3067\u3082\u3044\u3044\u304b\u306a\u3041\u3063\u3066\u601d\u3063\u305f\u306e\u3067\u3059\u304c\u3069\u3046\u305b\u306a\u3089\u30b6\u30af\u30b6\u30af\u52d5\u304f\u3082\u306e\u304c\u3044\u3044\u306a\u3041\u3068\u601d\u3063\u3066\u9069\u5f53\u306b\u30b5\u30fc\u30d5\u30a3\u30f3\u3057\u3066\u3044\u305f\u3089\u3001Matrix \u98a8\u306eEffect\u3092\u518d\u73fe\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u898b\u3064\u3051\u305f\u306e\u3067\u305d\u308c\u3092Redux , riot \u306b\u843d\u3068\u3057\u8fbc\u3093\u3067\u307f\u3088\u3046\u304b\u306a\u3041\u3063\u3068\u8003\u3048\u307e\u3057\u305f\u30021\n\n\u5143\u306e\u30b9\u30af\u30ea\u30d7\u30c8\n\u5143\u306b\u306a\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3053\u3061\u3089\u306b\u306a\u308a\u307e\u3059\n\u30bd\u30fc\u30b9\u3092\u629c\u7c8b\u3057\u3066\u304a\u304d\u307e\u3059\n//drawing the characters\nfunction draw()\n{\n    //\u7701\u7565\n    //looping over drops\n    for(var i = 0; i < drops.length; i++)\n    {\n        //a random chinese character to print\n        var text = chinese[Math.floor(Math.random()*chinese.length)];\n        ctx.fillText(text, i*font_size, drops[i]*font_size);\n\n        if(drops[i]*font_size > c.height && Math.random() > 0.975)\n        drops[i] = 0;   \n        //incrementing Y coordinate\n        drops[i]++;\n    }\n}\n\nsetInterval(draw, 33);\n\n\u30d5\u30a9\u30f3\u30c8\u30b5\u30a4\u30ba\u5206\u306e\u30ab\u30e9\u30e0\u3092\u7528\u610f\u3057\u3066\u30ab\u30e9\u30e0\u5206\u306e\u914d\u5217\u306bY\u5ea7\u6a19\u3092\u8a18\u9332\u3057\u3066\u3044\u304d\u307e\u3059\u3002\nsetInterval \u6bce\u306b\u5ea7\u6a19\u3092\u4e00\u3064\u3065\u3064\u66f4\u65b0\u3057\u3066\u3044\u304d\u4e0b\u307e\u3067\u9054\u3057\u305f\u6bb5\u968e\u3067\u30e9\u30f3\u30c0\u30e0\u306b\u5ea7\u6a19\u3092\u30bc\u30ed\u306b\u623b\u3057\u307e\u3059\u3002\n\n\u4ed5\u69d8\n\n\u521d\u671f\u5024: 0 - 9 \u307e\u3067\u306e\u6587\u5b57\u5217\n30\u79d2\u6bce\u306b\u30e9\u30f3\u30c0\u30e0\u306a\u7d75\u6587\u5b57\u3092\u6df7\u5165\u3055\u305b\u3066\u3044\u304f\n\u5916\u90e8\u304b\u3089\u306e\u30d5\u30a9\u30f3\u30c8\u30b5\u30a4\u30ba\u306e\u5909\u66f4\n\u5916\u90e8\u304b\u3089\u306e\u6587\u5b57\u5217\u306e\u6df7\u5165\n\n\u305b\u3063\u304b\u304fState\u3092Redux\u7ba1\u7406\u306b\u3059\u308b\u306e\u3067\u51fa\u6765\u5fc3\u304b\u3089\u5916\u90e8\u304b\u3089\u52d5\u7684\u306b\u5909\u6570\u3092\u5909\u3048\u3089\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u5b9f\u88c5\n\nsetInterval \u306e\u90e8\u5206\n\u5143\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306fdraw\u95a2\u6570\u3092\u305d\u306e\u307e\u307esetInterval\u306b\u767b\u9332\u3057\u3066\u3044\u308b\u3068State\u306e\u7ba1\u7406\u3092Redux\u306b\u9810\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u306e\u3067\u307e\u305a\u306fupdate\u7528\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u30af\u30ea\u30a8\u30fc\u30bf\u3092\u767b\u9332\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\nsetInterval(draw, 33) => setInterval(\u3042\u304f\u3057\u3087\u3093\u304f\u308a\u3048\u30fc\u305f, 33)\n\nStore\u306b\u4fdd\u6301\u3059\u308b\u3082\u306e\u3068\u4fdd\u6301\u3057\u306a\u3044\u3082\u306e\n\u6b63\u76f4\u3069\u3053\u307e\u3067State\u306b\u4fdd\u5b58\u3059\u3079\u304d\u304b\u60a9\u307f\u307e\u3057\u305f\u304c\u63cf\u753b\u306b\u95a2\u3059\u308b\u3082\u306e\u306f\u5168\u3066State\u7ba1\u7406\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\nState\u7ba1\u7406\u306b\u3057\u305f\u3082\u306e\n\n\u5404\u30ab\u30e9\u30e0\u306e\u5ea7\u6a19\n\u5404\u30ab\u30e9\u30e0\u306e\u6587\u5b57\nfontSize\ncanvas \u306ewidth, height\ncontext\n\nState\u304b\u3089\u5916\u3057\u305f\u3082\u306e\n\n\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u306e\u30b9\u30bf\u30a4\u30eb\n\n\u57fa\u672c\u52d5\u7684\u306a\u5909\u66f4\u3092\u4ed8\u3051\u52a0\u3048\u305f\u3044\uff08\u4eca\u56de\u306e\u5b9f\u88c5\u3067\u306f\u6b8b\u5ff5\u306a\u304c\u3089\u56fa\u5b9a\u5024\u3067\u3044\u3044\u3088\u3046\u306a\u30b1\u30fc\u30b9\u3067\u3082\uff09\u9805\u76ee\u306f\u5168\u3066State\u306e\u7ba1\u7406\u306b\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\u3053\u3053\u307e\u3067\u304f\u308b\u3068\u3000draw\u95a2\u6570\u306f\u5165\u529b\u3055\u308c\u305f\u5024\u3092\u5143\u306b\u63cf\u753b\u3059\u308b\u3060\u3051\u306e\u95a2\u6570\u3068\u306a\u308a\u304b\u306a\u308a\u30b7\u30f3\u30d7\u30eb\u306b\u306a\u308a\u307e\u3059\u3002\nconst draw = ({ctx, textArray, fontSize, fontColor, height, width, drops}) => {\n      ctx.fillStyle = \"rgba(0, 0, 0, 0.05)\"\n      ctx.fillRect(0, 0, width, height)\n\n      ctx.fillStyle = fontColor\n      ctx.font = fontSize + \"px arial\"\n\n      for (let i = 0; i < drops.length; i++) {\n          ctx.fillText(drops[i].text, i * fontSize, drops[i].pos * fontSize)\n      }\n}\nconst store = this.opts.store\n\nstore.subscribe(() => {\n    draw(store.getState())\n})\n\nStore\u306e\u5909\u66f4\u3092\u691c\u77e5\u3057\u3066\u305d\u306e\u307e\u307edraw\u95a2\u6570\u306b\u6d41\u3059\u3060\u3051\u3068\u306a\u308a\u63cf\u753b\u90e8\u5206\u3068\u30c7\u30fc\u30bf\u90e8\u5206\u3092\u5207\u308a\u96e2\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\nRandom\u306a\u632f\u308b\u821e\u3044\u3092\u3069\u3046\u6271\u3046\u304b\nRandom\u306a\u5ea7\u6a19\u3084\u751f\u6210\u3059\u308b\u6587\u5b57\u5217\u3092\u3069\u3053\u3067\u8a08\u7b97\u3059\u3079\u304d\u304b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n\u68481. Reducers\u306e\u4e2d\u3067\u51e6\u7406\u3059\u308b\nReducers\u5185\u3067\u306f\u524d\u56de\u306eState\u3092\u53c2\u7167\u3067\u304d\u308b\u306e\u3067\u3001\u305d\u3053\u304b\u3089random\u306a\u6587\u5b57\u5217\u3084\u5ea7\u6a19\u3092\u8a08\u7b97\u3057\u3066\u65b0\u3057\u3044State\u3092\u8fd4\u3059\u3068\u3044\u3046\u51e6\u7406\u304c\u6bd4\u8f03\u7684\u7c21\u5358\u306b\u66f8\u3051\u305d\u3046\u3067\u3059\u3002\n\u3057\u304b\u3057\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3088\u308c\u3070Reducers\u306f\u7d14\u95a2\u6570\u3067\u3042\u308b\u3053\u3068\u304c\u671f\u5f85\u3055\u308c\u307e\u3059\nhttp://redux.js.org/docs/basics/Reducers.html#handling-actions\nRandom\u3068\u3044\u3046\u51aa\u7b49\u5236\u3092\u6301\u305f\u306a\u3044\u95a2\u6570\u3092reducer\u5185\u3067\u884c\u3046\u306e\u306f\u9055\u3046\u3068\u601d\u3044\u3084\u3081\u307e\u3057\u305f\u3002\n\n\u6848\uff12 ActionCreator\u5185\u3067\u51e6\u7406\u3059\u308b\nActionCreator\u3067\u51e6\u7406\u3057\u3066\u5909\u6570\u3092\u3000Reducers\u306b\u5f15\u304d\u6e21\u3059\u306e\u304c\u826f\u3055\u305d\u3046\u3067\u3059\u3002\n\u3000\u305f\u3060ActionCreator\u5185\u3067Math.random\u3092\u5404\u3005\u547c\u3076\u3068\u30c6\u30b9\u30c8\u304c\u3057\u306b\u304f\u3044\u3068\u601d\u3063\u305f\u306e\u3067\u5c11\u3057\u9055\u3046\u65b9\u6cd5\u3092\u3068\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u68483 RNG\u3092\u8a2d\u5b9a\u3067\u304d\u308bMiddleware\u3092\u81ea\u4f5c\u3059\u308b\n\u30c6\u30b9\u30c8\u306e\u3053\u3068\u3092\u8003\u3048\u308b\u3068\u5916\u90e8\u304b\u3089Random-Number Generator(RNG)\u3092\u6e21\u305b\u308b\u3088\u3046\u306a\u69cb\u9020\u306b\u3057\u3066\u304a\u304d\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\n\u3068\u8003\u3048\u308b\u3068\u5b9f\u88c5\u305d\u3057\u3066\u306f\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\nexport const randomTest = createAction(TEST, (value, rng = Math.random()) => ...process...)\n\n\u5404\u30a2\u30af\u30b7\u30e7\u30f3\u306b\u30e9\u30f3\u30c0\u30e0\u306e\u5f15\u6570\u5165\u308c\u308b\u306e\u30a4\u30b1\u30c6\u306a\u3044\u306a\u3041\u3063\u3068\u601d\u3063\u3066\u7279\u5b9a\u306eAction\u306e\u5834\u5408\u3060\u3051RNG\u3092\u5f15\u304d\u6e21\u3059\u3088\u3046\u306aMiddleware\u3092\u81ea\u4f5c\u3057\u307e\u3057\u305f\u3002\n\u3053\u3093\u306a\u98a8\u306b\u4f7f\u3044\u307e\u3059\nexport const moveDrops = () =>\n    randomAction((rng, state) =>\n        rng()   <- \u3053\u306e\u8fd4\u308a\u5024\u304c\u4e38\u3054\u3068payload\u306b\u306a\u308b\n    )(updateDropsAction)\n\nrandomAction\u306eAction\u3092\u4f5c\u6210\u3057\u3066\u5f15\u6570\u306bRNG, \u3068State\u3092\u6e21\u3059\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\nRandomAction\u306e\u7b2c\u4e00\u5f15\u6570\u306e\u51e6\u7406\u304c\u7d42\u308f\u3063\u305f\u5f8c\u306b\u6b21\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u3067\u3042\u308bupdaeDropsAction\u3092\u53e9\u304f\u304d\u307e\u3059\n\u30bd\u30fc\u30b9\u306f\u3053\u3093\u306a\u611f\u3058\nconst RANDOM = 'RANDOM'\n\nconst randomColumns = (rng = Math.random.bind(this)) => store => next => action => {\n    if(action.type === RANDOM && typeof action.fn === 'function'){\n        const r = action.fn(rng, Object.assign({}, store.getState()))\n        action.nextAction && store.dispatch(action.nextAction(r))\n    }\n    return next(action)\n}\n\nexport const randomAction = fn => nextAction => ({\n    type: RANDOM,\n    fn,\n    nextAction\n})\n\nexport default randomColumns\n\n\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067rng\u3092\u5916\u90e8\u304b\u3089\u6307\u5b9a\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3092\u3042\u307e\u308a\u610f\u8b58\u305b\u305a\u306b\u30e9\u30f3\u30c0\u30e0\u306a\u95a2\u6570\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u3053\u308c\u4ee5\u5916\u3067\u3082component\u3067\u9811\u5f35\u308b\u3063\u3066\u306e\u3082\u30a2\u30ea\u3067\u3059\u3002\nMiddleware\u306e\u4f5c\u308a\u65b9\u306fRedux\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\u3059\u3054\u304f\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\nhttp://redux.js.org/docs/advanced/Middleware.html\n\n\u30c7\u30e2\nhttps://1984weed.github.io/riot-redux-matrix/\n\n\u30bd\u30fc\u30b9\nhttps://github.com/1984weed/riot-redux-matrix\n\nGitHub Pages \u3078\u306e\u30c7\u30d7\u30ed\u30a4\n\u305d\u3046\u3044\u3048\u3070gh-pages\u306b\u81ea\u52d5\u30c7\u30d7\u30ed\u30a4\u3092\u3057\u305f\u3053\u3068\u306a\u304b\u3063\u305f\u306e\u3067\u3053\u3053\u3092\u53c2\u8003\u306b\u3057\u305f\nhttps://gist.github.com/domenic/ec8b0fc8ab45f39403dd\nhttp://qiita.com/dora56/items/cafae475daec802b6b8f\n\n\u65ad\u5ff5\u3057\u305f\u3053\u3068\n\nFlow\nriot\u306e\u578b\u306e\u90e8\u5206\u3067\u30b5\u30af\u30c3\u3068\u5c0e\u5165\u3067\u304d\u306a\u304b\u3063\u305f\u306e\u3067\u65ad\u5ff5\u3057\u305f\u3002\u3082\u3046\u3061\u3087\u3063\u3068\u7c98\u308a\u305f\u304b\u3063\u305f\u304c\u30bf\u30a4\u30e0\u30aa\u30fc\u30d0\u30fc\u3002\n\nredux-loop\n\u975e\u540c\u671f\u306a\u90e8\u5206\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u5c0e\u5165\u3057\u306a\u304b\u3063\u305f\u3002\u3051\u3069\u5c11\u3057\u8208\u5473\u306e\u3042\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3002\n\n\u307e\u3068\u3081\n\u4eca\u306e\u30b3\u30fc\u30c9\u3060\u3068Store\u3092\u3069\u3053\u304b\u3089\u3067\u3082\u53c2\u7167\u3067\u304d\u308b\u306e\u3067\u82e5\u5e72\u5371\u967a\u306a\u5302\u3044\u304c\u3059\u308b\u30b3\u30fc\u30c9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u8fba\u3092\u3046\u307e\u304f\u9589\u3058\u8fbc\u3081\u3064\u3064\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3084ActionCreater\u3067\u89e6\u3089\u306a\u304f\u3066\u3082\u3044\u3044\u3088\u3046\u306a\u611f\u3058\u306b\u3057\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\nreact-redux\u306a\u3093\u304b\u306f\u305d\u3053\u3089\u3078\u3093\u4e0a\u624b\u304f\u3084\u3063\u3066\u3066State\u3092\u6271\u3046\u90e8\u5206\u306f\u5272\u3068\u9650\u5b9a\u7684\u306b\u3057\u3064\u3064\u5b9f\u88c5\u304c\u3067\u304d\u305f\u6c17\u304c\u3057\u307e\u3059\u3002\n\n\n\n\n\u30c3\u30af\u30b9\u306e\u90e8\u5206\u304c\u304b\u304b\u3063\u3066\u305f\u304b\u3089\u3068\u3044\u3046\u306e\u304c\u672c\u97f3\u00a0\u21a9\n\n\n\n\u30bf\u30a4\u30c8\u30eb\u306f\u3042\u308c\u3067\u3059\u304c riot\u3068Redux\u306e\u7d44\u307f\u5408\u308f\u305b\u306e\u30a2\u30d7\u30ea\u306e\u7d20\u632f\u308a\u3092\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067\u3053\u3093\u306a\u306e\u4f5c\u308a\u307e\u3057\u305f\u3002\n\n![screen.gif](https://qiita-image-store.s3.amazonaws.com/0/134294/a2cb9cf7-1816-e293-26b2-86f8ca0327ae.gif)\n\n# \u984c\u6750\n\n\u666e\u901a\u306eWeb\u30a2\u30d7\u30ea\u3067\u3082\u3044\u3044\u304b\u306a\u3041\u3063\u3066\u601d\u3063\u305f\u306e\u3067\u3059\u304c\u3069\u3046\u305b\u306a\u3089\u30b6\u30af\u30b6\u30af\u52d5\u304f\u3082\u306e\u304c\u3044\u3044\u306a\u3041\u3068\u601d\u3063\u3066\u9069\u5f53\u306b\u30b5\u30fc\u30d5\u30a3\u30f3\u3057\u3066\u3044\u305f\u3089\u3001Matrix \u98a8\u306eEffect\u3092\u518d\u73fe\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u898b\u3064\u3051\u305f\u306e\u3067\u305d\u308c\u3092Redux , riot \u306b\u843d\u3068\u3057\u8fbc\u3093\u3067\u307f\u3088\u3046\u304b\u306a\u3041\u3063\u3068\u8003\u3048\u307e\u3057\u305f\u3002[^1]\n\n# \u5143\u306e\u30b9\u30af\u30ea\u30d7\u30c8\n\n\u5143\u306b\u306a\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u306f[\u3053\u3061\u3089]\n(http://thecodeplayer.com/walkthrough/matrix-rain-animation-html5-canvas-javascript)\u306b\u306a\u308a\u307e\u3059\n\n\u30bd\u30fc\u30b9\u3092\u629c\u7c8b\u3057\u3066\u304a\u304d\u307e\u3059\n\n```js\n//drawing the characters\nfunction draw()\n{\n    //\u7701\u7565\n    //looping over drops\n    for(var i = 0; i < drops.length; i++)\n    {\n        //a random chinese character to print\n        var text = chinese[Math.floor(Math.random()*chinese.length)];\n        ctx.fillText(text, i*font_size, drops[i]*font_size);\n\t\t\n        if(drops[i]*font_size > c.height && Math.random() > 0.975)\n        drops[i] = 0;\t\n        //incrementing Y coordinate\n        drops[i]++;\n    }\n}\n\nsetInterval(draw, 33);\n```\n\n\u30d5\u30a9\u30f3\u30c8\u30b5\u30a4\u30ba\u5206\u306e\u30ab\u30e9\u30e0\u3092\u7528\u610f\u3057\u3066\u30ab\u30e9\u30e0\u5206\u306e\u914d\u5217\u306bY\u5ea7\u6a19\u3092\u8a18\u9332\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\nsetInterval \u6bce\u306b\u5ea7\u6a19\u3092\u4e00\u3064\u3065\u3064\u66f4\u65b0\u3057\u3066\u3044\u304d\u4e0b\u307e\u3067\u9054\u3057\u305f\u6bb5\u968e\u3067\u30e9\u30f3\u30c0\u30e0\u306b\u5ea7\u6a19\u3092\u30bc\u30ed\u306b\u623b\u3057\u307e\u3059\u3002\n\n# \u4ed5\u69d8\n\n- \u521d\u671f\u5024: 0 - 9 \u307e\u3067\u306e\u6587\u5b57\u5217\n- 30\u79d2\u6bce\u306b\u30e9\u30f3\u30c0\u30e0\u306a\u7d75\u6587\u5b57\u3092\u6df7\u5165\u3055\u305b\u3066\u3044\u304f\n- \u5916\u90e8\u304b\u3089\u306e\u30d5\u30a9\u30f3\u30c8\u30b5\u30a4\u30ba\u306e\u5909\u66f4\n- \u5916\u90e8\u304b\u3089\u306e\u6587\u5b57\u5217\u306e\u6df7\u5165\n\n\u305b\u3063\u304b\u304fState\u3092Redux\u7ba1\u7406\u306b\u3059\u308b\u306e\u3067\u51fa\u6765\u5fc3\u304b\u3089\u5916\u90e8\u304b\u3089\u52d5\u7684\u306b\u5909\u6570\u3092\u5909\u3048\u3089\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n# \u5b9f\u88c5\n\n## setInterval \u306e\u90e8\u5206\n\n\u5143\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306fdraw\u95a2\u6570\u3092\u305d\u306e\u307e\u307esetInterval\u306b\u767b\u9332\u3057\u3066\u3044\u308b\u3068State\u306e\u7ba1\u7406\u3092Redux\u306b\u9810\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u306e\u3067\u307e\u305a\u306fupdate\u7528\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u30af\u30ea\u30a8\u30fc\u30bf\u3092\u767b\u9332\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n`setInterval(draw, 33)` => `setInterval(\u3042\u304f\u3057\u3087\u3093\u304f\u308a\u3048\u30fc\u305f, 33)`\n\n## Store\u306b\u4fdd\u6301\u3059\u308b\u3082\u306e\u3068\u4fdd\u6301\u3057\u306a\u3044\u3082\u306e\n\n\u6b63\u76f4\u3069\u3053\u307e\u3067State\u306b\u4fdd\u5b58\u3059\u3079\u304d\u304b\u60a9\u307f\u307e\u3057\u305f\u304c\u63cf\u753b\u306b\u95a2\u3059\u308b\u3082\u306e\u306f\u5168\u3066State\u7ba1\u7406\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\nState\u7ba1\u7406\u306b\u3057\u305f\u3082\u306e\n\n- \u5404\u30ab\u30e9\u30e0\u306e\u5ea7\u6a19\n- \u5404\u30ab\u30e9\u30e0\u306e\u6587\u5b57\n- fontSize\n- canvas \u306ewidth, height\n- context\n\nState\u304b\u3089\u5916\u3057\u305f\u3082\u306e\n\n- \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u306e\u30b9\u30bf\u30a4\u30eb\n\n\u57fa\u672c\u52d5\u7684\u306a\u5909\u66f4\u3092\u4ed8\u3051\u52a0\u3048\u305f\u3044\uff08\u4eca\u56de\u306e\u5b9f\u88c5\u3067\u306f\u6b8b\u5ff5\u306a\u304c\u3089\u56fa\u5b9a\u5024\u3067\u3044\u3044\u3088\u3046\u306a\u30b1\u30fc\u30b9\u3067\u3082\uff09\u9805\u76ee\u306f\u5168\u3066State\u306e\u7ba1\u7406\u306b\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u3053\u3053\u307e\u3067\u304f\u308b\u3068\u3000draw\u95a2\u6570\u306f\u5165\u529b\u3055\u308c\u305f\u5024\u3092\u5143\u306b\u63cf\u753b\u3059\u308b\u3060\u3051\u306e\u95a2\u6570\u3068\u306a\u308a\u304b\u306a\u308a\u30b7\u30f3\u30d7\u30eb\u306b\u306a\u308a\u307e\u3059\u3002\n\n```js\nconst draw = ({ctx, textArray, fontSize, fontColor, height, width, drops}) => {\n      ctx.fillStyle = \"rgba(0, 0, 0, 0.05)\"\n      ctx.fillRect(0, 0, width, height)\n\n      ctx.fillStyle = fontColor\n      ctx.font = fontSize + \"px arial\"\n\n      for (let i = 0; i < drops.length; i++) {\n          ctx.fillText(drops[i].text, i * fontSize, drops[i].pos * fontSize)\n      }\n}\nconst store = this.opts.store\n\nstore.subscribe(() => {\n    draw(store.getState())\n})\n```\n\nStore\u306e\u5909\u66f4\u3092\u691c\u77e5\u3057\u3066\u305d\u306e\u307e\u307edraw\u95a2\u6570\u306b\u6d41\u3059\u3060\u3051\u3068\u306a\u308a\u63cf\u753b\u90e8\u5206\u3068\u30c7\u30fc\u30bf\u90e8\u5206\u3092\u5207\u308a\u96e2\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\n## Random\u306a\u632f\u308b\u821e\u3044\u3092\u3069\u3046\u6271\u3046\u304b\n\nRandom\u306a\u5ea7\u6a19\u3084\u751f\u6210\u3059\u308b\u6587\u5b57\u5217\u3092\u3069\u3053\u3067\u8a08\u7b97\u3059\u3079\u304d\u304b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n### \u68481. Reducers\u306e\u4e2d\u3067\u51e6\u7406\u3059\u308b\n\nReducers\u5185\u3067\u306f\u524d\u56de\u306eState\u3092\u53c2\u7167\u3067\u304d\u308b\u306e\u3067\u3001\u305d\u3053\u304b\u3089random\u306a\u6587\u5b57\u5217\u3084\u5ea7\u6a19\u3092\u8a08\u7b97\u3057\u3066\u65b0\u3057\u3044State\u3092\u8fd4\u3059\u3068\u3044\u3046\u51e6\u7406\u304c\u6bd4\u8f03\u7684\u7c21\u5358\u306b\u66f8\u3051\u305d\u3046\u3067\u3059\u3002\n\u3057\u304b\u3057\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3088\u308c\u3070Reducers\u306f\u7d14\u95a2\u6570\u3067\u3042\u308b\u3053\u3068\u304c\u671f\u5f85\u3055\u308c\u307e\u3059\n\nhttp://redux.js.org/docs/basics/Reducers.html#handling-actions\n\nRandom\u3068\u3044\u3046\u51aa\u7b49\u5236\u3092\u6301\u305f\u306a\u3044\u95a2\u6570\u3092reducer\u5185\u3067\u884c\u3046\u306e\u306f\u9055\u3046\u3068\u601d\u3044\u3084\u3081\u307e\u3057\u305f\u3002\n\n### \u6848\uff12 ActionCreator\u5185\u3067\u51e6\u7406\u3059\u308b\n\nActionCreator\u3067\u51e6\u7406\u3057\u3066\u5909\u6570\u3092\u3000Reducers\u306b\u5f15\u304d\u6e21\u3059\u306e\u304c\u826f\u3055\u305d\u3046\u3067\u3059\u3002\n\u3000\u305f\u3060ActionCreator\u5185\u3067Math.random\u3092\u5404\u3005\u547c\u3076\u3068\u30c6\u30b9\u30c8\u304c\u3057\u306b\u304f\u3044\u3068\u601d\u3063\u305f\u306e\u3067\u5c11\u3057\u9055\u3046\u65b9\u6cd5\u3092\u3068\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n\n### \u68483 RNG\u3092\u8a2d\u5b9a\u3067\u304d\u308bMiddleware\u3092\u81ea\u4f5c\u3059\u308b\n\n\u30c6\u30b9\u30c8\u306e\u3053\u3068\u3092\u8003\u3048\u308b\u3068\u5916\u90e8\u304b\u3089Random-Number Generator(RNG)\u3092\u6e21\u305b\u308b\u3088\u3046\u306a\u69cb\u9020\u306b\u3057\u3066\u304a\u304d\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\n\u3068\u8003\u3048\u308b\u3068\u5b9f\u88c5\u305d\u3057\u3066\u306f\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\n\n```js\nexport const randomTest = createAction(TEST, (value, rng = Math.random()) => ...process...)\n```\n\u5404\u30a2\u30af\u30b7\u30e7\u30f3\u306b\u30e9\u30f3\u30c0\u30e0\u306e\u5f15\u6570\u5165\u308c\u308b\u306e\u30a4\u30b1\u30c6\u306a\u3044\u306a\u3041\u3063\u3068\u601d\u3063\u3066\u7279\u5b9a\u306eAction\u306e\u5834\u5408\u3060\u3051RNG\u3092\u5f15\u304d\u6e21\u3059\u3088\u3046\u306aMiddleware\u3092\u81ea\u4f5c\u3057\u307e\u3057\u305f\u3002\n\u3053\u3093\u306a\u98a8\u306b\u4f7f\u3044\u307e\u3059\n\n```\nexport const moveDrops = () =>\n    randomAction((rng, state) =>\n        rng()   <- \u3053\u306e\u8fd4\u308a\u5024\u304c\u4e38\u3054\u3068payload\u306b\u306a\u308b\n    )(updateDropsAction)\n```\nrandomAction\u306eAction\u3092\u4f5c\u6210\u3057\u3066\u5f15\u6570\u306bRNG, \u3068State\u3092\u6e21\u3059\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\nRandomAction\u306e\u7b2c\u4e00\u5f15\u6570\u306e\u51e6\u7406\u304c\u7d42\u308f\u3063\u305f\u5f8c\u306b\u6b21\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u3067\u3042\u308bupdaeDropsAction\u3092\u53e9\u304f\u304d\u307e\u3059\n\n[\u30bd\u30fc\u30b9](https://github.com/1984weed/riot-redux-matrix/blob/master/src/store/index.js)\u306f\u3053\u3093\u306a\u611f\u3058\n\n```js\nconst RANDOM = 'RANDOM'\n\nconst randomColumns = (rng = Math.random.bind(this)) => store => next => action => {\n    if(action.type === RANDOM && typeof action.fn === 'function'){\n        const r = action.fn(rng, Object.assign({}, store.getState()))\n        action.nextAction && store.dispatch(action.nextAction(r))\n    }\n    return next(action)\n}\n\nexport const randomAction = fn => nextAction => ({\n    type: RANDOM,\n    fn,\n    nextAction\n})\n\nexport default randomColumns\n\n```\n\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067rng\u3092\u5916\u90e8\u304b\u3089\u6307\u5b9a\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3092\u3042\u307e\u308a\u610f\u8b58\u305b\u305a\u306b\u30e9\u30f3\u30c0\u30e0\u306a\u95a2\u6570\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n**\u3061\u306a\u307f\u306b\u3053\u308c\u4ee5\u5916\u3067\u3082component\u3067\u9811\u5f35\u308b\u3063\u3066\u306e\u3082\u30a2\u30ea\u3067\u3059\u3002**\n\nMiddleware\u306e\u4f5c\u308a\u65b9\u306fRedux\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\u3059\u3054\u304f\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\nhttp://redux.js.org/docs/advanced/Middleware.html\n\n# \u30c7\u30e2\n\nhttps://1984weed.github.io/riot-redux-matrix/\n\n# \u30bd\u30fc\u30b9\n\nhttps://github.com/1984weed/riot-redux-matrix\n\n## GitHub Pages \u3078\u306e\u30c7\u30d7\u30ed\u30a4\n\n\u305d\u3046\u3044\u3048\u3070gh-pages\u306b\u81ea\u52d5\u30c7\u30d7\u30ed\u30a4\u3092\u3057\u305f\u3053\u3068\u306a\u304b\u3063\u305f\u306e\u3067\u3053\u3053\u3092\u53c2\u8003\u306b\u3057\u305f\nhttps://gist.github.com/domenic/ec8b0fc8ab45f39403dd\nhttp://qiita.com/dora56/items/cafae475daec802b6b8f\n\n# \u65ad\u5ff5\u3057\u305f\u3053\u3068\n\n## Flow\n\nriot\u306e\u578b\u306e\u90e8\u5206\u3067\u30b5\u30af\u30c3\u3068\u5c0e\u5165\u3067\u304d\u306a\u304b\u3063\u305f\u306e\u3067\u65ad\u5ff5\u3057\u305f\u3002\u3082\u3046\u3061\u3087\u3063\u3068\u7c98\u308a\u305f\u304b\u3063\u305f\u304c\u30bf\u30a4\u30e0\u30aa\u30fc\u30d0\u30fc\u3002\n\n## redux-loop\n\n\u975e\u540c\u671f\u306a\u90e8\u5206\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u5c0e\u5165\u3057\u306a\u304b\u3063\u305f\u3002\u3051\u3069\u5c11\u3057\u8208\u5473\u306e\u3042\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3002\n\n# \u307e\u3068\u3081\n\n\u4eca\u306e\u30b3\u30fc\u30c9\u3060\u3068Store\u3092\u3069\u3053\u304b\u3089\u3067\u3082\u53c2\u7167\u3067\u304d\u308b\u306e\u3067\u82e5\u5e72\u5371\u967a\u306a\u5302\u3044\u304c\u3059\u308b\u30b3\u30fc\u30c9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u8fba\u3092\u3046\u307e\u304f\u9589\u3058\u8fbc\u3081\u3064\u3064\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3084ActionCreater\u3067\u89e6\u3089\u306a\u304f\u3066\u3082\u3044\u3044\u3088\u3046\u306a\u611f\u3058\u306b\u3057\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\n\nreact-redux\u306a\u3093\u304b\u306f\u305d\u3053\u3089\u3078\u3093\u4e0a\u624b\u304f\u3084\u3063\u3066\u3066State\u3092\u6271\u3046\u90e8\u5206\u306f\u5272\u3068\u9650\u5b9a\u7684\u306b\u3057\u3064\u3064\u5b9f\u88c5\u304c\u3067\u304d\u305f\u6c17\u304c\u3057\u307e\u3059\u3002\n\n[^1]: \u30c3\u30af\u30b9\u306e\u90e8\u5206\u304c\u304b\u304b\u3063\u3066\u305f\u304b\u3089\u3068\u3044\u3046\u306e\u304c\u672c\u97f3\n", "tags": ["riot", "redux"]}