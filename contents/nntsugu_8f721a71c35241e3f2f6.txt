{"context": " More than 1 year has passed since last update.\u305f\u307e\u30fc\u306b\u3057\u304b\u3084\u3089\u306a\u3044\u306e\u3067\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u5834\u6240\u3002\n\n\u3081\u3063\u3061\u3083\u53c2\u8003\u306b\u306a\u308b\u3068\u3053\u308d\nhttp://www.rinneza.com/junya/tech/solaris8_x86/sendmail_8.12.10_cf_setup.html\nhttp://blog.azumakuniyuki.org/2011/08/4-ways-to-relay-email-from-sendmail-to.html\nhttp://www.gadgety.net/shin/tips/unix/sendmail.html\n\n\u30e1\u30fc\u30eb\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3092\u8907\u6570\u6307\u5b9a\u3059\u308b\n\nsendmail.mc\u3067\u6307\u5b9a\u3059\u308b\u5834\u5408\n:\u533a\u5207\u308a\u3067\u8907\u6570\u6307\u5b9a\u3059\u308b\u3068\u3001\u5de6\u304b\u3089\u9806\u306b\u63a5\u7d9a\u3092\u8a66\u307f\u307e\u3059\u3002\n\u5168\u90e8\u30c0\u30e1\u306a\u3089mqueue\u306b\u6e9c\u3081\u8fbc\u307f\u3001\u8a2d\u5b9a\u3055\u308c\u305f\u518d\u9001\u9593\u9694\u306b\u5247\u3063\u3066\u30ea\u30c8\u30e9\u30a4\u3057\u307e\u3059\u3002\n\nsendmail.mc\ndefine(`SMART_HOST', `mailer:hostname')dnl\n\nex. define(`SMART_HOST', `maingateway.ne.jp:subgateway.ne.jp:smtp.sendgrid.ne.jp')dnl\n\n\n\nmailertable\u3067\u6307\u5b9a\u3059\u308b\u5834\u5408\nFEATURE(`mailertable')\u3067\u4f7f\u3048\u308bmailertable\u3002\n,\u533a\u5207\u308a\u3067\u8907\u6570\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\nhoge.ne.jp     smtp:[maingateway.ne.jp,subgateway.ne.jp,smtp.sendgrid.ne.jp]\n.hoge.ne.jp     smtp:[maingateway.ne.jp,subgateway.ne.jp,smtp.sendgrid.ne.jp]\n\n\n\u7279\u5b9a\u306e\u5b9b\u5148\u4ee5\u5916\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3055\u305b\u306a\u3044\n\nmailertable\u3067\u5236\u5fa1\u3059\u308b\nFEATURE(`mailertable')\u3067\u4f7f\u3048\u308bmailertable\u3002\n*hoge.ne.jp\u5b9b\u306e\u30e1\u30fc\u30eb\u306e\u307f\u9001\u4fe1\u3002\u6b8b\u308a\u306f/dev/null\u306b\u6368\u3066\u307e\u3059\u3002\nmailertable\u306fsendmail.cf\u306erelay\u8a2d\u5b9a\u3088\u308a\u5148\u306b\u8a55\u4fa1\u3055\u308c\u308b\u306e\u3067\u3001\u3053\u3053\u3067\u6368\u3066\u3066\u304a\u3051\u3070\u4f59\u8a08\u306a\u30e1\u30fc\u30eb\u304c\u98db\u3076\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002\nhoge.ne.jp     smtp:[maingateway.ne.jp,subgateway.ne.jp,smtp.sendgrid.ne.jp]\n.hoge.ne.jp    smtp:[maingateway.ne.jp,subgateway.ne.jp,smtp.sendgrid.ne.jp]\n.              local:trash\n\n\nmailertable\u3068sendmail.cf\u306e\u8a55\u4fa1\u9806\nmailertable\u306fsendmail.cf\u306erelay\u8a2d\u5b9a\u3088\u308a\u5148\u306b\u8a55\u4fa1\u3055\u308c\u307e\u3059\u3002\n\n\u518d\u9001\u9593\u9694\n\u4f55\u3089\u304b\u306e\u7406\u7531\u3067\u30e1\u30fc\u30eb\u304c\u9001\u4fe1\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408\u3001\nmqueue\u306b\u6e9c\u3081\u8fbc\u307f\u3001\u8a2d\u5b9a\u3055\u308c\u305f\u518d\u9001\u9593\u9694\u306b\u5f93\u3063\u3066\u518d\u9001\u4fe1\u3092\u8a66\u307f\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f30\u5206\u3002\n\nsendmail.mc\ndefine(`confMIN_QUEUE_AGE', `30m')dnl\ndefine(`confTO_HOSTSTATUS', `30m')dnl\n\n\nqueue\u306b\u5165\u3063\u3066\u304b\u3089\u4e00\u5b9a\u671f\u9593\u7d4c\u904e\u3057\u305f\u30e1\u30fc\u30eb\u306f\u518d\u9001\u3092\u8ae6\u3081\u3001\u8fd4\u9001\u3055\u308c\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f5\u65e5\u3002\n\u8a2d\u5b9a\u5024\u306f\u4e0b\u8a18\u3002\n\nsendmail.mc\ndefine(`confTO_QUEUERETURN', `5d')dnl\n\n\n\n\u518d\u9001\u9593\u9694(2)\n\u306a\u3093\u3089\u304b\u306e\u7406\u7531\u306b\u3088\u308aqueue\u3067\u914d\u9001\u5f85\u3061\u3068\u306a\u3063\u3066\u3044\u308b\u30e1\u30fc\u30eb\u306e\u518d\u9001\u9593\u9694\u3002\n\u524d\u8ff0\u3057\u305fHOSTSTATUS\u3068\u306e\u512a\u5148\u9806\u4f4d\u306a\u3069\u306f\u308f\u304b\u3089\u3063\u3066\u3044\u306a\u3044\u3002\u2190\u5fc5\u8981\u306b\u306a\u3063\u305f\u3089\u8abf\u3079\u307e\u3059\u3002\n\n/etc/sysconfig/sendmail\nQUEUE=1h\n1m\u306a\u30891\u5206\n\n\n\n\u30c6\u30b9\u30c8\n\n\u518d\u9001\u9593\u9694\n\u3061\u3083\u3093\u3068\u8a2d\u5b9a\u901a\u308a\u306e\u9593\u9694\u3067\u30e1\u30fc\u30eb\u518d\u9001\u3092\u884c\u3046\u304b\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u3001\n\u30e1\u30fc\u30eb\u3092\u3059\u3050\u914d\u4fe1\u305b\u305a\u306bqueue\u306b\u5165\u308c\u308b\u3002\nDeliveryMode=q\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3048\u3070OK\u3002\necho \"5mintest\" | sendmail -ODeliveryMode=q atesaki@mail.domain.com\n\n\nsendmail.mc\u3068sendmail.cf\nsendmail.mc\u306fsendmail\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5143\u3002\nsendmail.mc\u304b\u3089m4\u30b3\u30de\u30f3\u30c9\u3067sendmail.cf\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nm4 sendmail.mc > sendmail.cf\n\u51fa\u6765\u305fsendmail.cf\u3092\u8a2d\u5b9a\u7f6e\u304d\u5834\u306b\u4e0a\u66f8\u3044\u3066\u304b\u3089(ex. cp -i sendmail.cf /etc/mail/ )\n\u305d\u306e\u5f8crestart\n/etc/init.d/sendmail stop\n/etc/init.d/sendmail start\n\n\u305f\u307e\u30fc\u306b\u3057\u304b\u3084\u3089\u306a\u3044\u306e\u3067\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u5834\u6240\u3002\n\n\n## \u3081\u3063\u3061\u3083\u53c2\u8003\u306b\u306a\u308b\u3068\u3053\u308d\nhttp://www.rinneza.com/junya/tech/solaris8_x86/sendmail_8.12.10_cf_setup.html\nhttp://blog.azumakuniyuki.org/2011/08/4-ways-to-relay-email-from-sendmail-to.html\nhttp://www.gadgety.net/shin/tips/unix/sendmail.html\n\n## \u30e1\u30fc\u30eb\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3092\u8907\u6570\u6307\u5b9a\u3059\u308b\n\n### sendmail.mc\u3067\u6307\u5b9a\u3059\u308b\u5834\u5408\n\n:\u533a\u5207\u308a\u3067\u8907\u6570\u6307\u5b9a\u3059\u308b\u3068\u3001\u5de6\u304b\u3089\u9806\u306b\u63a5\u7d9a\u3092\u8a66\u307f\u307e\u3059\u3002\n\u5168\u90e8\u30c0\u30e1\u306a\u3089mqueue\u306b\u6e9c\u3081\u8fbc\u307f\u3001\u8a2d\u5b9a\u3055\u308c\u305f\u518d\u9001\u9593\u9694\u306b\u5247\u3063\u3066\u30ea\u30c8\u30e9\u30a4\u3057\u307e\u3059\u3002\n\n```sendmail.mc\ndefine(`SMART_HOST', `mailer:hostname')dnl\n\nex. define(`SMART_HOST', `maingateway.ne.jp:subgateway.ne.jp:smtp.sendgrid.ne.jp')dnl\n```\n\n### mailertable\u3067\u6307\u5b9a\u3059\u308b\u5834\u5408\n\nFEATURE(`mailertable')\u3067\u4f7f\u3048\u308bmailertable\u3002\n,\u533a\u5207\u308a\u3067\u8907\u6570\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\n```mailertable\nhoge.ne.jp     smtp:[maingateway.ne.jp,subgateway.ne.jp,smtp.sendgrid.ne.jp]\n.hoge.ne.jp     smtp:[maingateway.ne.jp,subgateway.ne.jp,smtp.sendgrid.ne.jp]\n```\n\n## \u7279\u5b9a\u306e\u5b9b\u5148\u4ee5\u5916\u306e\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3055\u305b\u306a\u3044\n\n### mailertable\u3067\u5236\u5fa1\u3059\u308b\n\nFEATURE(`mailertable')\u3067\u4f7f\u3048\u308bmailertable\u3002\n*hoge.ne.jp\u5b9b\u306e\u30e1\u30fc\u30eb\u306e\u307f\u9001\u4fe1\u3002\u6b8b\u308a\u306f/dev/null\u306b\u6368\u3066\u307e\u3059\u3002\n\nmailertable\u306fsendmail.cf\u306erelay\u8a2d\u5b9a\u3088\u308a\u5148\u306b\u8a55\u4fa1\u3055\u308c\u308b\u306e\u3067\u3001\u3053\u3053\u3067\u6368\u3066\u3066\u304a\u3051\u3070\u4f59\u8a08\u306a\u30e1\u30fc\u30eb\u304c\u98db\u3076\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n```mailertable\nhoge.ne.jp     smtp:[maingateway.ne.jp,subgateway.ne.jp,smtp.sendgrid.ne.jp]\n.hoge.ne.jp    smtp:[maingateway.ne.jp,subgateway.ne.jp,smtp.sendgrid.ne.jp]\n.              local:trash\n```\n\n## mailertable\u3068sendmail.cf\u306e\u8a55\u4fa1\u9806\n\nmailertable\u306fsendmail.cf\u306erelay\u8a2d\u5b9a\u3088\u308a\u5148\u306b\u8a55\u4fa1\u3055\u308c\u307e\u3059\u3002\n\n\n## \u518d\u9001\u9593\u9694\n\n\u4f55\u3089\u304b\u306e\u7406\u7531\u3067\u30e1\u30fc\u30eb\u304c\u9001\u4fe1\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408\u3001\nmqueue\u306b\u6e9c\u3081\u8fbc\u307f\u3001\u8a2d\u5b9a\u3055\u308c\u305f\u518d\u9001\u9593\u9694\u306b\u5f93\u3063\u3066\u518d\u9001\u4fe1\u3092\u8a66\u307f\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f30\u5206\u3002\n\n```sendmail.mc\ndefine(`confMIN_QUEUE_AGE', `30m')dnl\ndefine(`confTO_HOSTSTATUS', `30m')dnl\n```\n\n\nqueue\u306b\u5165\u3063\u3066\u304b\u3089\u4e00\u5b9a\u671f\u9593\u7d4c\u904e\u3057\u305f\u30e1\u30fc\u30eb\u306f\u518d\u9001\u3092\u8ae6\u3081\u3001\u8fd4\u9001\u3055\u308c\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f5\u65e5\u3002\n\u8a2d\u5b9a\u5024\u306f\u4e0b\u8a18\u3002\n\n```sendmail.mc\ndefine(`confTO_QUEUERETURN', `5d')dnl\n```\n\n## \u518d\u9001\u9593\u9694(2)\n\n\u306a\u3093\u3089\u304b\u306e\u7406\u7531\u306b\u3088\u308aqueue\u3067\u914d\u9001\u5f85\u3061\u3068\u306a\u3063\u3066\u3044\u308b\u30e1\u30fc\u30eb\u306e\u518d\u9001\u9593\u9694\u3002\n\u524d\u8ff0\u3057\u305fHOSTSTATUS\u3068\u306e\u512a\u5148\u9806\u4f4d\u306a\u3069\u306f\u308f\u304b\u3089\u3063\u3066\u3044\u306a\u3044\u3002\u2190\u5fc5\u8981\u306b\u306a\u3063\u305f\u3089\u8abf\u3079\u307e\u3059\u3002\n\n```bash:/etc/sysconfig/sendmail\nQUEUE=1h\n1m\u306a\u30891\u5206\n```\n\n## \u30c6\u30b9\u30c8\n### \u518d\u9001\u9593\u9694\n\n\u3061\u3083\u3093\u3068\u8a2d\u5b9a\u901a\u308a\u306e\u9593\u9694\u3067\u30e1\u30fc\u30eb\u518d\u9001\u3092\u884c\u3046\u304b\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u3001\n\u30e1\u30fc\u30eb\u3092\u3059\u3050\u914d\u4fe1\u305b\u305a\u306bqueue\u306b\u5165\u308c\u308b\u3002\nDeliveryMode=q\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3048\u3070OK\u3002\n\n```bash\necho \"5mintest\" | sendmail -ODeliveryMode=q atesaki@mail.domain.com\n```\n\n## sendmail.mc\u3068sendmail.cf\n\nsendmail.mc\u306fsendmail\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5143\u3002\nsendmail.mc\u304b\u3089m4\u30b3\u30de\u30f3\u30c9\u3067sendmail.cf\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bash\nm4 sendmail.mc > sendmail.cf\n\u51fa\u6765\u305fsendmail.cf\u3092\u8a2d\u5b9a\u7f6e\u304d\u5834\u306b\u4e0a\u66f8\u3044\u3066\u304b\u3089(ex. cp -i sendmail.cf /etc/mail/ )\n\u305d\u306e\u5f8crestart\n/etc/init.d/sendmail stop\n/etc/init.d/sendmail start\n```\n\n\n", "tags": ["sendmail", "Linux"]}