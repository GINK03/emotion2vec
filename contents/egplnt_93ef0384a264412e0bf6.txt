{"context": "\u521d\u3081\u3066Watson IoT Platform\u3092\u4f7f\u3063\u3066\u307f\u3088\u3046\u3001\u3068\u3044\u3046\u304b\u305f\u306e\u305f\u3081\u306e\u30ac\u30a4\u30c9\u3067\u3059\u3002\nWatson IoT Platform\u3092\u4f7f\u3063\u3066\u307f\u308b\u3067IoT\u30a2\u30d7\u30ea\u3092\u6e96\u5099\u3057\u307e\u3057\u305f\u3002\n\u3053\u306e\u30b5\u30f3\u30d7\u30eb\u306e\u30d5\u30ed\u30fc\u3067\u306f\u3001\u5b9f\u7269\u306e\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3092\u53ef\u8996\u5316\u3057\u307e\u3059\u3002\n\n\u30c6\u30ad\u30b5\u30b9\u30fb\u30a4\u30f3\u30b9\u30c4\u30eb\u30e1\u30f3\u30c4\u793e\u88fd\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0CC2650\u304b\u3089\u306e\u5024\u3092\u53ef\u8996\u5316\u3057\u307e\u3059\n\n\u5b9f\u7269\u306e\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3092\u53ef\u8996\u5316\u3059\u308b\n[{\"id\":\"98adf1ac.562b5\",\"type\":\"template\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"ws\u7528html\u3092\u8fd4\u3059\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"<!DOCTYPE HTML>\\n<html>\\n\\t<head>\\n\\t\\t<title>\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067\u30bb\u30f3\u30b5\u30fc\u5024\u3068\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3092\u8868\u793a</title>\\n\\t\\t<meta charset=\\\"utf-8\\\" />\\n\\t\\t<script src=\\\"http://ccchart.com/js/ccchart.js\\\" charset=\\\"utf-8\\\"></script>\\n<script>\\n\\nwindow.onload=function(){\\n\\tcc();\\n}\\n\\nfunction cc() {\\n\\nvar chartdata87 = {\\n\\n  \\\"config\\\": {\\n    \\\"title\\\": \\\"\u30bb\u30f3\u30b5\u30fc\u5024\u3068\u76f4\u8fd1\u5e73\u5747\u5024\u3092\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u8868\u793a\\\",\\n    \\\"subTitle\\\": \\\"\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067IoT\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3068\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3092\u8868\u793a\u3057\u307e\u3059\\\",\\n    \\\"type\\\": \\\"stackedarea\\\",\\n    \\\"maxWsColLen\\\": 8,\\n    \\\"colorSet\\\":\\n          [\\\"#ff7f7f\\\",\\\"#7f7fff\\\",\\\"#7fff7f\\\",\\\"#7fbfff\\\",\\\"#ff7f7f\\\"],\\n    \\\"useMarker\\\": \\\"arc\\\",\\n    \\\"useVal\\\": \\\"yes\\\",\\n\\t\\\"autoReConnect\\\": \\\"yes\\\",\\n\\t\\\"autoReConnectInterval\\\": 500,\\n\\t\\\"wsReCnt\\\": 5000,\\n    \\\"roundedUpMaxY\\\": 100\\n  },\\n\\n  \\\"data\\\": [\\n    [\\\"\u6642\u523b\\\"],\\n    [\\\"\u30bb\u30f3\u30b5\u30fc\uff11\u5024\\\"],\\n    [\\\"\u5e73\u5747\u5024\\\"],\\n    [\\\"\u6a19\u6e96\u504f\u5dee\\\"]\\n  ]\\n};\\n\\n  ccchart.wsCloseAll();//\u4e00\u65e6\u30af\u30ea\u30a2\\n  ccchart\\n    .init('id123', chartdata87)\\n\\t.ws('ws://\u3053\u306eIoT\u30a2\u30d7\u30ea\u306e\u540d\u524d.mybluemix.net/ws/flow42', autoReConnectInterval = 5000)\\n\\t.on('message', myOneColAtATime)\\n\\t.on('message', ccchart.wscase.oneColAtATime);\\n}\\n\\nfunction myOneColAtATime (msg) {\\n\\tconsole.log(\\\"myOneColAtATime entered\\\");\\n\\t// \u4e00\u5ea6\u306b1\u5217\u305a\u3064 [[\\\"2013\\\"],[435],[600]] \u3068\u3044\u3063\u305f\u914d\u5217\u3067\u5c4a\u304f\u5834\u5408\\n    // e.g. ws.on('message', ccchart.wscase.oneColAtAtime)\\n    var msgs = JSON.parse(msg.data);\\n\\t// \u5404\u30bb\u30f3\u30b5\u30fc\u8981\u7d20\u3092\u53d6\u308a\u51fa\u3057\u3066\u3001\u753b\u9762\u3078\u8868\u793a\\n\\tfor (var i = 0; i < msgs.length; i++) { console.log( i + \\\" = \\\" + msgs[i]); }\\n\\ttarget = document.getElementById(\\\"output1\\\");\\n\\ttarget.innerHTML = msgs[0];\\n\\ttarget = document.getElementById(\\\"output2\\\");\\n\\ttarget.innerHTML = msgs[1];\\n\\ttarget = document.getElementById(\\\"output3\\\");\\n\\ttarget.innerHTML = msgs[2];\\n  target = document.getElementById(\\\"output4\\\");\\n\\ttarget.innerHTML = msgs[3];\\n}\\n\\n</script>\\n\\t</head>\\n\\t<body>\\n\\n<div id=\\\"a-box\\\" style=\\\"background-color: #87cefa; padding: 20px;\\\">\\n\\t<h1>\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067\u30bb\u30f3\u30b5\u30fc\u5024\u3068\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3092\u8868\u793a</h1>\\n\\t<br />\\n\\t<p>\\n\\t\\t\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067IoT\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3068\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3092\u8868\u793a\u3057\u307e\u3059<br />\\n\\t</p>\\n</div>\\n\\n<div id=\\\"b-box\\\" style=\\\"background-color: #ecf2fe; padding: 20px; \\\">\\n\\t<canvas id=\\\"id123\\\"></canvas>\\n\\t\\t<h2>\u6642\u523b</h2>\\n\\t\\t\\t<div style=\\\"text-align:left\\\" id=\\\"output0\\\"></div>\\n\\t\\t\\t<div style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output1\\\"></div>\\n\\t\\t<h2>\u30bb\u30f3\u30b5\u30fc\uff11\u3000</h2>\\n\\t\\t\\t<span style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output2\\\"></span>\\n\\t\\t<h2>\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3000</h2>\\n\\t\\t\\t<span style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output3\\\"></span>\\n      <h2>\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u6a19\u6e96\u504f\u5dee\u3000</h2>\\n  \\t\\t\\t<span style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output4\\\"></span>\\n</div>\\n\\n<div id=\\\"c-box\\\" style=\\\"background-color: #f0e8fa; padding: 20px; \\\">\\n\\t\\t<ul>\\n\\t\\t\\t<li><a href=\\\"http://qiita.com/egplnt/items/af867711a7191923b2ff\\\">Watson IoT Platform\u3092\u4f7f\u3063\u3066\u307f\u308b</a></li>\\n\\t\\t\\t<li><a href=\\\"https://internetofthings.ibmcloud.com/#/\\\">Watson IoT Platform</a></li>\\n\\t\\t\\t<li><a href=\\\"https://developer.ibm.com/recipes/tutorials/use-the-simulated-device-to-experience-the-iot-foundation/\\\">Recipe - Simulator</a></li>\\n\\t\\t</ul>\\n\\t\\t<div class=\\\"category\\\">\u8cc7\u6599\u30da\u30fc\u30b8</div>\\n\\t\\t<ul>\\n\\t\\t\\t<li><a href=\\\"http://ibm.com/iot\\\">IBM IoT</a></li>\\n\\t\\t\\t<li><a href=\\\"https://docs.internetofthings.ibmcloud.com/ja/\\\">Watson IoT Platform\u8cc7\u6599\u30da\u30fc\u30b8</a></li>\\n\\t\\t\\t<li><a href=\\\"https://developer.ibm.com/recipes/\\\">Recipe</a></li>\\n\\t\\t</ul>\\n\\n\\n\\n<!---\\n\\t\\t<p>\u30c6\u30ad\u30b9\u30c8\u3000\uff08\u7701\u7565\uff09</p>\\n\\t\\t<h3>h3 \u898b\u51fa\u3057</h3>\\n\\t\\t<p>\u30c6\u30ad\u30b9\u30c8\u3000\uff08\u7701\u7565\uff09</p>\\n\\t\\t<h3>h3 \u898b\u51fa\u3057</h3>\\n\\t\\t<p>\u30c6\u30ad\u30b9\u30c8\u3000\uff08\u7701\u7565\uff09</p>\\n--->\\n\\n</div>\\n<div id=\\\"d-box\\\" style=\\\"clear: both; background-color: #e0ce96; font-size: 18px; padding: 10px; text-align: center;  padding: 20px;\\\">\\n\\tcopyright (c) abc.com All right reserved.\\n</div>\\n\\n\\t</body>\\n</html>\\n\",\"x\":340,\"y\":420,\"wires\":[[\"305db9f7.d9bdd6\"]]},{\"id\":\"9e5a363b.02f9b8\",\"type\":\"comment\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"TI\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0CC2650\u304b\u3089\u306e\u5024\u3092\u51fa\u529b\",\"info\":\"\",\"x\":210,\"y\":140,\"wires\":[]},{\"id\":\"edf0f962.91e0d\",\"type\":\"http in\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\",\"url\":\"/test42\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":150,\"y\":420,\"wires\":[[\"98adf1ac.562b5\"]]},{\"id\":\"305db9f7.d9bdd6\",\"type\":\"http response\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\",\"x\":510,\"y\":420,\"wires\":[]},{\"id\":\"edc76d3d.4dce28\",\"type\":\"comment\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\u9001\u4ed8\u3055\u308c\u305f\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u53ef\u8996\u5316\",\"info\":\"\",\"x\":190,\"y\":380,\"wires\":[]},{\"id\":\"c8beff65.a6cdb\",\"type\":\"ibmiot in\",\"z\":\"3d90a2c7.0bf7a6\",\"authentication\":\"quickstart\",\"apiKey\":\"\",\"inputType\":\"evt\",\"deviceId\":\"\",\"applicationId\":\"\",\"deviceType\":\"+\",\"eventType\":\"+\",\"commandType\":\"\",\"format\":\"json\",\"name\":\"IBM IoT\",\"service\":\"quickstart\",\"allDevices\":\"\",\"allApplications\":\"\",\"allDeviceTypes\":true,\"allEvents\":true,\"allCommands\":\"\",\"allFormats\":\"\",\"x\":130,\"y\":200,\"wires\":[[\"df09e905.cafb8\"]]},{\"id\":\"316f0c10.7cb134\",\"type\":\"function\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\u5206\u6563\",\"func\":\"var variance = 0;\\nfor (i=0; i<msg.length; i++) {\\n    variance = variance + Math.pow(msg.array[i] - msg.average, 2);\\n}\\nvariance = variance / msg.length;\\nmsg.variance = Math.round(variance*100)/100;\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":590,\"y\":200,\"wires\":[[\"18df015b.a45687\"]]},{\"id\":\"18df015b.a45687\",\"type\":\"function\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\u6a19\u6e96\u504f\u5dee\",\"func\":\"var standard_deviation = 0;\\nstandard_deviation = Math.sqrt(msg.variance);\\nmsg.std = Math.round(standard_deviation*100)/100;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":280,\"y\":260,\"wires\":[[\"f0077e6d.4de818\",\"48214f83.6422b\"]]},{\"id\":\"f0077e6d.4de818\",\"type\":\"debug\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"std\",\"x\":460,\"y\":300,\"wires\":[]},{\"id\":\"48214f83.6422b\",\"type\":\"function\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\u6642\u523b\u3092\u8a2d\u5b9a\",\"func\":\"var d = new Date();\\nvar localTime = d.getTime();\\nvar localOffset = d.getTimezoneOffset() * 60000;\\nvar utc = localTime + localOffset;\\nvar offset = -9.0;\\nvar result = utc - (3600000 * offset);\\nvar date = parseInt(new Date(result) / 1000);\\nvar dt = new Date(result);\\n\\nvar year = dt.getFullYear();\\nvar month = dt.getMonth()+1;\\nvar day = dt.getDate();\\nvar hour = dt.getHours();\\nvar minute = dt.getMinutes();\\nvar second = dt.getSeconds();\\n//if (!msg.payload) {\\n//    msg.payload = { \\\"initial\\\": \\\"value\\\" };\\n//}\\nif (!msg.date) {\\n    msg.date = { \\\"initial\\\": \\\"value\\\" };\\n}\\nmsg.date = {\\n        \\\"date\\\": date,\\n        \\\"year\\\": year,\\n        \\\"month\\\": month,\\n        \\\"day\\\": day,\\n        \\\"hour\\\": hour,\\n        \\\"minute\\\": minute,\\n        \\\"second\\\": second\\n};\\n\\nvar hour = JSON.stringify(msg.date.hour);\\nvar min_org  = JSON.stringify(msg.date.minute);\\nvar min = ( \\\"0\\\" + min_org ).substr( -2 );       // \u4e00\u6841\u5206\u306e\u5834\u5408\u3001\u4e8c\u6841\u306b\\nvar sec_org  = JSON.stringify(msg.date.second);\\nvar sec = ( \\\"0\\\" + sec_org ).substr( -2 );       // \u4e00\u6841\u79d2\u306e\u5834\u5408\u3001\u4e8c\u6841\u306b\\nvar time = hour + \\\":\\\" + min + \\\":\\\" + sec;\\n\\n//average = sum / length;\\nvar data = [[time],[msg.sen1],[msg.average],[msg.std]];\\nmsg.payload = data;\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":470,\"y\":260,\"wires\":[[\"91518054.29af08\",\"8863a0d0.8377f\"]]},{\"id\":\"91518054.29af08\",\"type\":\"debug\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":650,\"y\":240,\"wires\":[]},{\"id\":\"8863a0d0.8377f\",\"type\":\"websocket out\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\",\"server\":\"d31c9a2c.05d468\",\"client\":\"\",\"x\":660,\"y\":280,\"wires\":[]},{\"id\":\"df09e905.cafb8\",\"type\":\"function\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\u914d\u5217\u306b\u683c\u7d0d\",\"func\":\"if (msg.payload.d.lux ) {\\n    msg.sen1 = Math.round(msg.payload.d.lux*100)/100;\u3000// Alps\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u6e29\u5ea6\u3092\u53d6\u5f97\\n} else {\\n    return 0;\\n}\\n\\nif ( !context.global.array ) {\\n    context.global.array = new Array (10);\\n}\\nvar shifted = context.global.array.shift();\\n\\ncontext.global.array.push(msg.sen1);\\n\\nmsg.array = context.global.array;\\nmsg.length = context.global.array.length;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":290,\"y\":200,\"wires\":[[\"2f595b01.869534\"]]},{\"id\":\"2f595b01.869534\",\"type\":\"function\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\u5e73\u5747\",\"func\":\"var sum = 0, average = 0;\\n    for (i=0; i<msg.length; i++) {\\n        sum = sum + msg.array[i];\\n}\\nmsg.sum = sum;\\naverage = sum / msg.length;\\nmsg.average = Math.round(average*100)/100;\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":450,\"y\":200,\"wires\":[[\"ca316ee9.f446a\",\"316f0c10.7cb134\"]]},{\"id\":\"ca316ee9.f446a\",\"type\":\"debug\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"average\",\"x\":570,\"y\":160,\"wires\":[]},{\"id\":\"d31c9a2c.05d468\",\"type\":\"websocket-listener\",\"z\":\"3d90a2c7.0bf7a6\",\"path\":\"/ws/flow42\",\"wholemsg\":\"false\"}]\n\n\n\n\n\nNode-RED\u306e\u30d5\u30ed\u30fc\u3092\u30b3\u30d4\u30fc\u3059\u308b\u65b9\u6cd5\u3092\u53c2\u7167\u3057\u3066\u3001\u4e0a\u8a18\u306e\u30d5\u30ed\u30fc\u3092\u30b3\u30d4\u30da\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u660e\u5ea6\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\u4e0a\u6bb5\u306e\u300cTI\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0CC2650\u304b\u3089\u306e\u5024\u3092\u51fa\u529b\u300d\u30d5\u30ed\u30fc\u306e\u5148\u982d\u306e\u9752\u3044\u300cIBM IoT\u300d\u30ce\u30fc\u30c9\u3092\u958b\u304d\u3001\u4f7f\u7528\u3057\u3066\u3044\u308bTI\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0CC2650\u306e\u30c7\u30d0\u30a4\u30b9ID\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u4e0b\u6bb5\u306e\u300c\u9001\u4ed8\u3055\u308c\u305f\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u53ef\u8996\u5316\u300d\u30d5\u30ed\u30fc\u3092\u78ba\u8a8d\u3057\u3001\u30aa\u30ec\u30f3\u30b8\u8272\u306e\u300cws\u7528html\u3092\u8fd4\u3059\u300d\u306e\u30ce\u30fc\u30c9\u3092\u958b\u304d\u300143\u884c\u76ee\u306e.ws('ws://\u3053\u306eIoT\u30a2\u30d7\u30ea\u306e\u540d\u524d.mybluemix.net/ws/flow42'\u306e\u30a2\u30d7\u30ea\u540d\u90e8\u5206\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002\nNode-RED\u753b\u9762\u53f3\u4e0a\u306e\u8d64\u3044\u300cDeploy\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u30af\u30e9\u30a6\u30c9\u5074\u3078\u53cd\u6620\u3057\u307e\u3059\u3002\n\u30d6\u30e9\u30a6\u30b6\u306e\u65b0\u3057\u3044\u30bf\u30d6\u3092\u958b\u304d\u3001IoT\u30a2\u30d7\u30ea\u540d.mybluemix.net/test42\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306a\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u3046\u307e\u304f\u8868\u793a\u3055\u308c\u306a\u3044\u5834\u5408\u3001\u4e0a\u6bb5\u306eIoT\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u51fa\u529b\u3059\u308b\u30d5\u30ed\u30fc\u306ewebsocket\u51fa\u529b\u30ce\u30fc\u30c9\u3092\u4e00\u65e6\u524a\u9664\u3057\u3066\u3001\u753b\u9762\u5de6\u5074\u306e\u30d1\u30ec\u30c3\u30c8\u306eoutput\u30bb\u30af\u30b7\u30e7\u30f3\u304b\u3089websocket\u30ce\u30fc\u30c9\u3092\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3057\u3066\u4f5c\u308a\u76f4\u3057\u3066\u307f\u307e\u3059\u3002\u51fa\u529bPath\u306f/ws/flow42\u3068\u3057\u3066\u3042\u308a\u307e\u3059\uff08html\u5185\u306e\u6307\u5b9a\u3068\u6574\u5408\u3059\u308c\u3070\u4f55\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\uff09\u3002\n\n\n\n\n\nALPS\u793e\u88fd\u306eIoT\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3092\u53ef\u8996\u5316\u3057\u307e\u3059\n\n\u5b9f\u7269\u306e\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3092\u53ef\u8996\u5316\u3059\u308b\n[{\"id\":\"71eca2d3.c94dd4\",\"type\":\"template\",\"z\":\"d95fb411.e6be68\",\"name\":\"ws\u7528html\u3092\u8fd4\u3059\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"<!DOCTYPE HTML>\\n<html>\\n\\t<head>\\n\\t\\t<title>\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067\u30bb\u30f3\u30b5\u30fc\u5024\u3068\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3092\u8868\u793a</title>\\n\\t\\t<meta charset=\\\"utf-8\\\" />\\n\\t\\t<script src=\\\"http://ccchart.com/js/ccchart.js\\\" charset=\\\"utf-8\\\"></script>\\n<script>\\n\\nwindow.onload=function(){\\n\\tcc();\\n}\\n\\nfunction cc() {\\n\\nvar chartdata87 = {\\n\\n  \\\"config\\\": {\\n    \\\"title\\\": \\\"\u30bb\u30f3\u30b5\u30fc\u5024\u3068\u76f4\u8fd1\u5e73\u5747\u5024\u3092\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u8868\u793a\\\",\\n    \\\"subTitle\\\": \\\"\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067IoT\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3068\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3092\u8868\u793a\u3057\u307e\u3059\\\",\\n    \\\"type\\\": \\\"stackedarea\\\",\\n    \\\"maxWsColLen\\\": 8,\\n    \\\"colorSet\\\":\\n          [\\\"#ff7f7f\\\",\\\"#7f7fff\\\",\\\"#7fff7f\\\",\\\"#7fbfff\\\",\\\"#ff7f7f\\\"],\\n    \\\"useMarker\\\": \\\"arc\\\",\\n    \\\"useVal\\\": \\\"yes\\\",\\n\\t\\\"autoReConnect\\\": \\\"yes\\\",\\n\\t\\\"autoReConnectInterval\\\": 500,\\n\\t\\\"wsReCnt\\\": 5000,\\n    \\\"roundedUpMaxY\\\": 100\\n  },\\n\\n  \\\"data\\\": [\\n    [\\\"\u6642\u523b\\\"],\\n    [\\\"\u30bb\u30f3\u30b5\u30fc\uff11\u5024\\\"],\\n    [\\\"\u5e73\u5747\u5024\\\"],\\n    [\\\"\u6a19\u6e96\u504f\u5dee\\\"]\\n  ]\\n};\\n\\n  ccchart.wsCloseAll();//\u4e00\u65e6\u30af\u30ea\u30a2\\n  ccchart\\n    .init('id123', chartdata87)\\n\\t.ws('ws://\u3053\u306eIoT\u30a2\u30d7\u30ea\u306e\u540d\u524d.mybluemix.net/ws/flow27', autoReConnectInterval = 5000)\\n\\t.on('message', myOneColAtATime)\\n\\t.on('message', ccchart.wscase.oneColAtATime);\\n}\\n\\nfunction myOneColAtATime (msg) {\\n\\tconsole.log(\\\"myOneColAtATime entered\\\");\\n\\t// \u4e00\u5ea6\u306b1\u5217\u305a\u3064 [[\\\"2013\\\"],[435],[600]] \u3068\u3044\u3063\u305f\u914d\u5217\u3067\u5c4a\u304f\u5834\u5408\\n    // e.g. ws.on('message', ccchart.wscase.oneColAtAtime)\\n    var msgs = JSON.parse(msg.data);\\n\\t// \u5404\u30bb\u30f3\u30b5\u30fc\u8981\u7d20\u3092\u53d6\u308a\u51fa\u3057\u3066\u3001\u753b\u9762\u3078\u8868\u793a\\n\\tfor (var i = 0; i < msgs.length; i++) { console.log( i + \\\" = \\\" + msgs[i]); }\\n\\ttarget = document.getElementById(\\\"output1\\\");\\n\\ttarget.innerHTML = msgs[0];\\n\\ttarget = document.getElementById(\\\"output2\\\");\\n\\ttarget.innerHTML = msgs[1];\\n\\ttarget = document.getElementById(\\\"output3\\\");\\n\\ttarget.innerHTML = msgs[2];\\n  target = document.getElementById(\\\"output4\\\");\\n\\ttarget.innerHTML = msgs[3];\\n}\\n\\n</script>\\n\\t</head>\\n\\t<body>\\n\\n<div id=\\\"a-box\\\" style=\\\"background-color: #87cefa; padding: 20px;\\\">\\n\\t<h1>\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067\u30bb\u30f3\u30b5\u30fc\u5024\u3068\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3092\u8868\u793a</h1>\\n\\t<br />\\n\\t<p>\\n\\t\\t\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067IoT\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3068\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3092\u8868\u793a\u3057\u307e\u3059<br />\\n\\t</p>\\n</div>\\n\\n<div id=\\\"b-box\\\" style=\\\"background-color: #ecf2fe; padding: 20px; \\\">\\n\\t<canvas id=\\\"id123\\\"></canvas>\\n\\t\\t<h2>\u6642\u523b</h2>\\n\\t\\t\\t<div style=\\\"text-align:left\\\" id=\\\"output0\\\"></div>\\n\\t\\t\\t<div style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output1\\\"></div>\\n\\t\\t<h2>\u30bb\u30f3\u30b5\u30fc\uff11\u3000</h2>\\n\\t\\t\\t<span style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output2\\\"></span>\\n\\t\\t<h2>\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3000</h2>\\n\\t\\t\\t<span style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output3\\\"></span>\\n      <h2>\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u6a19\u6e96\u504f\u5dee\u3000</h2>\\n  \\t\\t\\t<span style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output4\\\"></span>\\n</div>\\n\\n<div id=\\\"c-box\\\" style=\\\"background-color: #f0e8fa; padding: 20px; \\\">\\n\\t\\t<ul>\\n\\t\\t\\t<li><a href=\\\"http://qiita.com/egplnt/items/af867711a7191923b2ff\\\">Watson IoT Platform\u3092\u4f7f\u3063\u3066\u307f\u308b</a></li>\\n\\t\\t\\t<li><a href=\\\"https://internetofthings.ibmcloud.com/#/\\\">Watson IoT Platform</a></li>\\n\\t\\t\\t<li><a href=\\\"https://developer.ibm.com/recipes/tutorials/use-the-simulated-device-to-experience-the-iot-foundation/\\\">Recipe - Simulator</a></li>\\n\\t\\t</ul>\\n\\t\\t<div class=\\\"category\\\">\u8cc7\u6599\u30da\u30fc\u30b8</div>\\n\\t\\t<ul>\\n\\t\\t\\t<li><a href=\\\"http://ibm.com/iot\\\">IBM IoT</a></li>\\n\\t\\t\\t<li><a href=\\\"https://docs.internetofthings.ibmcloud.com/ja/\\\">Watson IoT Platform\u8cc7\u6599\u30da\u30fc\u30b8</a></li>\\n\\t\\t\\t<li><a href=\\\"https://developer.ibm.com/recipes/\\\">Recipe</a></li>\\n\\t\\t</ul>\\n\\n\\n\\n<!---\\n\\t\\t<p>\u30c6\u30ad\u30b9\u30c8\u3000\uff08\u7701\u7565\uff09</p>\\n\\t\\t<h3>h3 \u898b\u51fa\u3057</h3>\\n\\t\\t<p>\u30c6\u30ad\u30b9\u30c8\u3000\uff08\u7701\u7565\uff09</p>\\n\\t\\t<h3>h3 \u898b\u51fa\u3057</h3>\\n\\t\\t<p>\u30c6\u30ad\u30b9\u30c8\u3000\uff08\u7701\u7565\uff09</p>\\n--->\\n\\n</div>\\n<div id=\\\"d-box\\\" style=\\\"clear: both; background-color: #e0ce96; font-size: 18px; padding: 10px; text-align: center;  padding: 20px;\\\">\\n\\tcopyright (c) abc.com All right reserved.\\n</div>\\n\\n\\t</body>\\n</html>\\n\",\"x\":300,\"y\":320,\"wires\":[[\"f504c584.bed548\"]]},{\"id\":\"9fb9bfee.b0b478\",\"type\":\"comment\",\"z\":\"d95fb411.e6be68\",\"name\":\"Alps\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3092\u51fa\u529b\",\"info\":\"\",\"x\":140,\"y\":40,\"wires\":[]},{\"id\":\"ae767bc3.fe19e8\",\"type\":\"http in\",\"z\":\"d95fb411.e6be68\",\"name\":\"\",\"url\":\"/test27\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":110,\"y\":320,\"wires\":[[\"71eca2d3.c94dd4\"]]},{\"id\":\"f504c584.bed548\",\"type\":\"http response\",\"z\":\"d95fb411.e6be68\",\"name\":\"\",\"x\":470,\"y\":320,\"wires\":[]},{\"id\":\"67883a9a.c2ca74\",\"type\":\"comment\",\"z\":\"d95fb411.e6be68\",\"name\":\"\u9001\u4ed8\u3055\u308c\u305f\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u53ef\u8996\u5316\",\"info\":\"\",\"x\":150,\"y\":280,\"wires\":[]},{\"id\":\"24febcbd.d40bdc\",\"type\":\"ibmiot in\",\"z\":\"d95fb411.e6be68\",\"authentication\":\"quickstart\",\"apiKey\":\"\",\"inputType\":\"evt\",\"deviceId\":\"\",\"applicationId\":\"\",\"deviceType\":\"+\",\"eventType\":\"+\",\"commandType\":\"\",\"format\":\"json\",\"name\":\"IBM IoT\",\"service\":\"quickstart\",\"allDevices\":\"\",\"allApplications\":\"\",\"allDeviceTypes\":true,\"allEvents\":true,\"allCommands\":\"\",\"allFormats\":\"\",\"x\":90,\"y\":100,\"wires\":[[\"64dcf49a.f12f94\"]]},{\"id\":\"dc31af51.9bf038\",\"type\":\"function\",\"z\":\"d95fb411.e6be68\",\"name\":\"\u5206\u6563\",\"func\":\"var variance = 0;\\nfor (i=0; i<msg.length; i++) {\\n    variance = variance + Math.pow(msg.array[i] - msg.average, 2);\\n}\\nvariance = variance / msg.length;\\nmsg.variance = Math.round(variance*100)/100;\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":550,\"y\":100,\"wires\":[[\"24fb33e.3370acc\"]]},{\"id\":\"24fb33e.3370acc\",\"type\":\"function\",\"z\":\"d95fb411.e6be68\",\"name\":\"\u6a19\u6e96\u504f\u5dee\",\"func\":\"var standard_deviation = 0;\\nstandard_deviation = Math.sqrt(msg.variance);\\nmsg.std = Math.round(standard_deviation*100)/100;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":240,\"y\":160,\"wires\":[[\"2ce07369.e3acac\",\"ad4f660f.435558\"]]},{\"id\":\"2ce07369.e3acac\",\"type\":\"debug\",\"z\":\"d95fb411.e6be68\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"std\",\"x\":420,\"y\":200,\"wires\":[]},{\"id\":\"ad4f660f.435558\",\"type\":\"function\",\"z\":\"d95fb411.e6be68\",\"name\":\"\u6642\u523b\u3092\u8a2d\u5b9a\",\"func\":\"var d = new Date();\\nvar localTime = d.getTime();\\nvar localOffset = d.getTimezoneOffset() * 60000;\\nvar utc = localTime + localOffset;\\nvar offset = -9.0;\\nvar result = utc - (3600000 * offset);\\nvar date = parseInt(new Date(result) / 1000);\\nvar dt = new Date(result);\\n\\nvar year = dt.getFullYear();\\nvar month = dt.getMonth()+1;\\nvar day = dt.getDate();\\nvar hour = dt.getHours();\\nvar minute = dt.getMinutes();\\nvar second = dt.getSeconds();\\n//if (!msg.payload) {\\n//    msg.payload = { \\\"initial\\\": \\\"value\\\" };\\n//}\\nif (!msg.date) {\\n    msg.date = { \\\"initial\\\": \\\"value\\\" };\\n}\\nmsg.date = {\\n        \\\"date\\\": date,\\n        \\\"year\\\": year,\\n        \\\"month\\\": month,\\n        \\\"day\\\": day,\\n        \\\"hour\\\": hour,\\n        \\\"minute\\\": minute,\\n        \\\"second\\\": second\\n};\\n\\nvar hour = JSON.stringify(msg.date.hour);\\nvar min_org  = JSON.stringify(msg.date.minute);\\nvar min = ( \\\"0\\\" + min_org ).substr( -2 );       // \u4e00\u6841\u5206\u306e\u5834\u5408\u3001\u4e8c\u6841\u306b\\nvar sec_org  = JSON.stringify(msg.date.second);\\nvar sec = ( \\\"0\\\" + sec_org ).substr( -2 );       // \u4e00\u6841\u79d2\u306e\u5834\u5408\u3001\u4e8c\u6841\u306b\\nvar time = hour + \\\":\\\" + min + \\\":\\\" + sec;\\n\\n//average = sum / length;\\nvar data = [[time],[msg.sen1],[msg.average],[msg.std]];\\nmsg.payload = data;\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":430,\"y\":160,\"wires\":[[\"13fff97e.8241a7\",\"f3667015.230078\"]]},{\"id\":\"13fff97e.8241a7\",\"type\":\"debug\",\"z\":\"d95fb411.e6be68\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":610,\"y\":140,\"wires\":[]},{\"id\":\"f3667015.230078\",\"type\":\"websocket out\",\"z\":\"d95fb411.e6be68\",\"name\":\"\",\"server\":\"4e30e318.9e246c\",\"client\":\"\",\"x\":620,\"y\":180,\"wires\":[]},{\"id\":\"64dcf49a.f12f94\",\"type\":\"function\",\"z\":\"d95fb411.e6be68\",\"name\":\"\u914d\u5217\u306b\u683c\u7d0d\",\"func\":\"if (msg.payload.d.ambientLight ) {\\n    msg.sen1 = Math.round(msg.payload.d.ambientLight*100)/100;\u3000// Alps\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u6e29\u5ea6\u3092\u53d6\u5f97\\n} else {\\n    return 0;\\n}\\n\\nif ( !context.global.array ) {\\n    context.global.array = new Array (10);\\n}\\nvar shifted = context.global.array.shift();\\n\\ncontext.global.array.push(msg.sen1);\\n\\nmsg.array = context.global.array;\\nmsg.length = context.global.array.length;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":250,\"y\":100,\"wires\":[[\"77e09e93.a3a0c8\"]]},{\"id\":\"77e09e93.a3a0c8\",\"type\":\"function\",\"z\":\"d95fb411.e6be68\",\"name\":\"\u5e73\u5747\",\"func\":\"var sum = 0, average = 0;\\n    for (i=0; i<msg.length; i++) {\\n        sum = sum + msg.array[i];\\n}\\nmsg.sum = sum;\\naverage = sum / msg.length;\\nmsg.average = Math.round(average*100)/100;\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":410,\"y\":100,\"wires\":[[\"854054e7.b00ad8\",\"dc31af51.9bf038\"]]},{\"id\":\"854054e7.b00ad8\",\"type\":\"debug\",\"z\":\"d95fb411.e6be68\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"average\",\"x\":530,\"y\":60,\"wires\":[]},{\"id\":\"4e30e318.9e246c\",\"type\":\"websocket-listener\",\"z\":\"d95fb411.e6be68\",\"path\":\"/ws/flow27\",\"wholemsg\":\"false\"}]\n\n\n\n\n\nNode-RED\u306e\u30d5\u30ed\u30fc\u3092\u30b3\u30d4\u30fc\u3059\u308b\u65b9\u6cd5\u3092\u53c2\u7167\u3057\u3066\u3001\u4e0a\u8a18\u306e\u30d5\u30ed\u30fc\u3092\u30b3\u30d4\u30da\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u660e\u5ea6\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\u4e0a\u6bb5\u306e\u300cAlps\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3092\u51fa\u529b\u300d\u30d5\u30ed\u30fc\u306e\u5148\u982d\u306e\u9752\u3044\u300cIBM IoT\u300d\u30ce\u30fc\u30c9\u3092\u958b\u304d\u3001\u4f7f\u7528\u3057\u3066\u3044\u308bAlps IoT\u30bb\u30f3\u30b5\u30fc\u306e\u30c7\u30d0\u30a4\u30b9ID\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u4e0b\u6bb5\u306e\u300c\u9001\u4ed8\u3055\u308c\u305f\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u53ef\u8996\u5316\u300d\u30d5\u30ed\u30fc\u3092\u78ba\u8a8d\u3057\u3001\u30aa\u30ec\u30f3\u30b8\u8272\u306e\u300cws\u7528html\u3092\u8fd4\u3059\u300d\u306e\u30ce\u30fc\u30c9\u3092\u958b\u304d\u300143\u884c\u76ee\u306e.ws('ws://\u3053\u306eIoT\u30a2\u30d7\u30ea\u306e\u540d\u524d.mybluemix.net/ws/flow27'\u306e\u30a2\u30d7\u30ea\u540d\u90e8\u5206\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002\nNode-RED\u753b\u9762\u53f3\u4e0a\u306e\u8d64\u3044\u300cDeploy\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u30af\u30e9\u30a6\u30c9\u5074\u3078\u53cd\u6620\u3057\u307e\u3059\u3002\n\u30d6\u30e9\u30a6\u30b6\u306e\u65b0\u3057\u3044\u30bf\u30d6\u3092\u958b\u304d\u3001IoT\u30a2\u30d7\u30ea\u540d.bluemix.net/test27\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306a\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u3046\u307e\u304f\u8868\u793a\u3055\u308c\u306a\u3044\u5834\u5408\u3001\u4e0a\u6bb5\u306eIoT\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u51fa\u529b\u3059\u308b\u30d5\u30ed\u30fc\u306ewebsocket\u51fa\u529b\u30ce\u30fc\u30c9\u3092\u4e00\u65e6\u524a\u9664\u3057\u3066\u3001\u753b\u9762\u5de6\u5074\u306e\u30d1\u30ec\u30c3\u30c8\u306eoutput\u30bb\u30af\u30b7\u30e7\u30f3\u304b\u3089websocket\u30ce\u30fc\u30c9\u3092\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3057\u3066\u4f5c\u308a\u76f4\u3057\u3066\u307f\u307e\u3059\u3002\u51fa\u529bPath\u306f/ws/flow27\u3068\u3057\u3066\u3042\u308a\u307e\u3059\uff08html\u5185\u306e\u6307\u5b9a\u3068\u6574\u5408\u3059\u308c\u3070\u4f55\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\uff09\u3002\n\n\n\n\u521d\u3081\u3066Watson IoT Platform\u3092\u4f7f\u3063\u3066\u307f\u3088\u3046\u3001\u3068\u3044\u3046\u304b\u305f\u306e\u305f\u3081\u306e\u30ac\u30a4\u30c9\u3067\u3059\u3002\n[Watson IoT Platform\u3092\u4f7f\u3063\u3066\u307f\u308b](http://qiita.com/egplnt/items/af867711a7191923b2ff)\u3067IoT\u30a2\u30d7\u30ea\u3092\u6e96\u5099\u3057\u307e\u3057\u305f\u3002\n\u3053\u306e\u30b5\u30f3\u30d7\u30eb\u306e\u30d5\u30ed\u30fc\u3067\u306f\u3001\u5b9f\u7269\u306e\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3092\u53ef\u8996\u5316\u3057\u307e\u3059\u3002\n\n# \u30c6\u30ad\u30b5\u30b9\u30fb\u30a4\u30f3\u30b9\u30c4\u30eb\u30e1\u30f3\u30c4\u793e\u88fd\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0CC2650\u304b\u3089\u306e\u5024\u3092\u53ef\u8996\u5316\u3057\u307e\u3059\n\n```lang:\u5b9f\u7269\u306e\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3092\u53ef\u8996\u5316\u3059\u308b\n[{\"id\":\"98adf1ac.562b5\",\"type\":\"template\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"ws\u7528html\u3092\u8fd4\u3059\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"<!DOCTYPE HTML>\\n<html>\\n\\t<head>\\n\\t\\t<title>\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067\u30bb\u30f3\u30b5\u30fc\u5024\u3068\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3092\u8868\u793a</title>\\n\\t\\t<meta charset=\\\"utf-8\\\" />\\n\\t\\t<script src=\\\"http://ccchart.com/js/ccchart.js\\\" charset=\\\"utf-8\\\"></script>\\n<script>\\n\\nwindow.onload=function(){\\n\\tcc();\\n}\\n\\nfunction cc() {\\n\\nvar chartdata87 = {\\n\\n  \\\"config\\\": {\\n    \\\"title\\\": \\\"\u30bb\u30f3\u30b5\u30fc\u5024\u3068\u76f4\u8fd1\u5e73\u5747\u5024\u3092\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u8868\u793a\\\",\\n    \\\"subTitle\\\": \\\"\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067IoT\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3068\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3092\u8868\u793a\u3057\u307e\u3059\\\",\\n    \\\"type\\\": \\\"stackedarea\\\",\\n    \\\"maxWsColLen\\\": 8,\\n    \\\"colorSet\\\":\\n          [\\\"#ff7f7f\\\",\\\"#7f7fff\\\",\\\"#7fff7f\\\",\\\"#7fbfff\\\",\\\"#ff7f7f\\\"],\\n    \\\"useMarker\\\": \\\"arc\\\",\\n    \\\"useVal\\\": \\\"yes\\\",\\n\\t\\\"autoReConnect\\\": \\\"yes\\\",\\n\\t\\\"autoReConnectInterval\\\": 500,\\n\\t\\\"wsReCnt\\\": 5000,\\n    \\\"roundedUpMaxY\\\": 100\\n  },\\n\\n  \\\"data\\\": [\\n    [\\\"\u6642\u523b\\\"],\\n    [\\\"\u30bb\u30f3\u30b5\u30fc\uff11\u5024\\\"],\\n    [\\\"\u5e73\u5747\u5024\\\"],\\n    [\\\"\u6a19\u6e96\u504f\u5dee\\\"]\\n  ]\\n};\\n\\n  ccchart.wsCloseAll();//\u4e00\u65e6\u30af\u30ea\u30a2\\n  ccchart\\n    .init('id123', chartdata87)\\n\\t.ws('ws://\u3053\u306eIoT\u30a2\u30d7\u30ea\u306e\u540d\u524d.mybluemix.net/ws/flow42', autoReConnectInterval = 5000)\\n\\t.on('message', myOneColAtATime)\\n\\t.on('message', ccchart.wscase.oneColAtATime);\\n}\\n\\nfunction myOneColAtATime (msg) {\\n\\tconsole.log(\\\"myOneColAtATime entered\\\");\\n\\t// \u4e00\u5ea6\u306b1\u5217\u305a\u3064 [[\\\"2013\\\"],[435],[600]] \u3068\u3044\u3063\u305f\u914d\u5217\u3067\u5c4a\u304f\u5834\u5408\\n    // e.g. ws.on('message', ccchart.wscase.oneColAtAtime)\\n    var msgs = JSON.parse(msg.data);\\n\\t// \u5404\u30bb\u30f3\u30b5\u30fc\u8981\u7d20\u3092\u53d6\u308a\u51fa\u3057\u3066\u3001\u753b\u9762\u3078\u8868\u793a\\n\\tfor (var i = 0; i < msgs.length; i++) { console.log( i + \\\" = \\\" + msgs[i]); }\\n\\ttarget = document.getElementById(\\\"output1\\\");\\n\\ttarget.innerHTML = msgs[0];\\n\\ttarget = document.getElementById(\\\"output2\\\");\\n\\ttarget.innerHTML = msgs[1];\\n\\ttarget = document.getElementById(\\\"output3\\\");\\n\\ttarget.innerHTML = msgs[2];\\n  target = document.getElementById(\\\"output4\\\");\\n\\ttarget.innerHTML = msgs[3];\\n}\\n\\n</script>\\n\\t</head>\\n\\t<body>\\n\\n<div id=\\\"a-box\\\" style=\\\"background-color: #87cefa; padding: 20px;\\\">\\n\\t<h1>\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067\u30bb\u30f3\u30b5\u30fc\u5024\u3068\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3092\u8868\u793a</h1>\\n\\t<br />\\n\\t<p>\\n\\t\\t\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067IoT\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3068\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3092\u8868\u793a\u3057\u307e\u3059<br />\\n\\t</p>\\n</div>\\n\\n<div id=\\\"b-box\\\" style=\\\"background-color: #ecf2fe; padding: 20px; \\\">\\n\\t<canvas id=\\\"id123\\\"></canvas>\\n\\t\\t<h2>\u6642\u523b</h2>\\n\\t\\t\\t<div style=\\\"text-align:left\\\" id=\\\"output0\\\"></div>\\n\\t\\t\\t<div style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output1\\\"></div>\\n\\t\\t<h2>\u30bb\u30f3\u30b5\u30fc\uff11\u3000</h2>\\n\\t\\t\\t<span style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output2\\\"></span>\\n\\t\\t<h2>\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3000</h2>\\n\\t\\t\\t<span style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output3\\\"></span>\\n      <h2>\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u6a19\u6e96\u504f\u5dee\u3000</h2>\\n  \\t\\t\\t<span style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output4\\\"></span>\\n</div>\\n\\n<div id=\\\"c-box\\\" style=\\\"background-color: #f0e8fa; padding: 20px; \\\">\\n\\t\\t<ul>\\n\\t\\t\\t<li><a href=\\\"http://qiita.com/egplnt/items/af867711a7191923b2ff\\\">Watson IoT Platform\u3092\u4f7f\u3063\u3066\u307f\u308b</a></li>\\n\\t\\t\\t<li><a href=\\\"https://internetofthings.ibmcloud.com/#/\\\">Watson IoT Platform</a></li>\\n\\t\\t\\t<li><a href=\\\"https://developer.ibm.com/recipes/tutorials/use-the-simulated-device-to-experience-the-iot-foundation/\\\">Recipe - Simulator</a></li>\\n\\t\\t</ul>\\n\\t\\t<div class=\\\"category\\\">\u8cc7\u6599\u30da\u30fc\u30b8</div>\\n\\t\\t<ul>\\n\\t\\t\\t<li><a href=\\\"http://ibm.com/iot\\\">IBM IoT</a></li>\\n\\t\\t\\t<li><a href=\\\"https://docs.internetofthings.ibmcloud.com/ja/\\\">Watson IoT Platform\u8cc7\u6599\u30da\u30fc\u30b8</a></li>\\n\\t\\t\\t<li><a href=\\\"https://developer.ibm.com/recipes/\\\">Recipe</a></li>\\n\\t\\t</ul>\\n\\n\\n\\n<!---\\n\\t\\t<p>\u30c6\u30ad\u30b9\u30c8\u3000\uff08\u7701\u7565\uff09</p>\\n\\t\\t<h3>h3 \u898b\u51fa\u3057</h3>\\n\\t\\t<p>\u30c6\u30ad\u30b9\u30c8\u3000\uff08\u7701\u7565\uff09</p>\\n\\t\\t<h3>h3 \u898b\u51fa\u3057</h3>\\n\\t\\t<p>\u30c6\u30ad\u30b9\u30c8\u3000\uff08\u7701\u7565\uff09</p>\\n--->\\n\\n</div>\\n<div id=\\\"d-box\\\" style=\\\"clear: both; background-color: #e0ce96; font-size: 18px; padding: 10px; text-align: center;  padding: 20px;\\\">\\n\\tcopyright (c) abc.com All right reserved.\\n</div>\\n\\n\\t</body>\\n</html>\\n\",\"x\":340,\"y\":420,\"wires\":[[\"305db9f7.d9bdd6\"]]},{\"id\":\"9e5a363b.02f9b8\",\"type\":\"comment\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"TI\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0CC2650\u304b\u3089\u306e\u5024\u3092\u51fa\u529b\",\"info\":\"\",\"x\":210,\"y\":140,\"wires\":[]},{\"id\":\"edf0f962.91e0d\",\"type\":\"http in\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\",\"url\":\"/test42\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":150,\"y\":420,\"wires\":[[\"98adf1ac.562b5\"]]},{\"id\":\"305db9f7.d9bdd6\",\"type\":\"http response\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\",\"x\":510,\"y\":420,\"wires\":[]},{\"id\":\"edc76d3d.4dce28\",\"type\":\"comment\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\u9001\u4ed8\u3055\u308c\u305f\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u53ef\u8996\u5316\",\"info\":\"\",\"x\":190,\"y\":380,\"wires\":[]},{\"id\":\"c8beff65.a6cdb\",\"type\":\"ibmiot in\",\"z\":\"3d90a2c7.0bf7a6\",\"authentication\":\"quickstart\",\"apiKey\":\"\",\"inputType\":\"evt\",\"deviceId\":\"\",\"applicationId\":\"\",\"deviceType\":\"+\",\"eventType\":\"+\",\"commandType\":\"\",\"format\":\"json\",\"name\":\"IBM IoT\",\"service\":\"quickstart\",\"allDevices\":\"\",\"allApplications\":\"\",\"allDeviceTypes\":true,\"allEvents\":true,\"allCommands\":\"\",\"allFormats\":\"\",\"x\":130,\"y\":200,\"wires\":[[\"df09e905.cafb8\"]]},{\"id\":\"316f0c10.7cb134\",\"type\":\"function\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\u5206\u6563\",\"func\":\"var variance = 0;\\nfor (i=0; i<msg.length; i++) {\\n    variance = variance + Math.pow(msg.array[i] - msg.average, 2);\\n}\\nvariance = variance / msg.length;\\nmsg.variance = Math.round(variance*100)/100;\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":590,\"y\":200,\"wires\":[[\"18df015b.a45687\"]]},{\"id\":\"18df015b.a45687\",\"type\":\"function\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\u6a19\u6e96\u504f\u5dee\",\"func\":\"var standard_deviation = 0;\\nstandard_deviation = Math.sqrt(msg.variance);\\nmsg.std = Math.round(standard_deviation*100)/100;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":280,\"y\":260,\"wires\":[[\"f0077e6d.4de818\",\"48214f83.6422b\"]]},{\"id\":\"f0077e6d.4de818\",\"type\":\"debug\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"std\",\"x\":460,\"y\":300,\"wires\":[]},{\"id\":\"48214f83.6422b\",\"type\":\"function\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\u6642\u523b\u3092\u8a2d\u5b9a\",\"func\":\"var d = new Date();\\nvar localTime = d.getTime();\\nvar localOffset = d.getTimezoneOffset() * 60000;\\nvar utc = localTime + localOffset;\\nvar offset = -9.0;\\nvar result = utc - (3600000 * offset);\\nvar date = parseInt(new Date(result) / 1000);\\nvar dt = new Date(result);\\n\\nvar year = dt.getFullYear();\\nvar month = dt.getMonth()+1;\\nvar day = dt.getDate();\\nvar hour = dt.getHours();\\nvar minute = dt.getMinutes();\\nvar second = dt.getSeconds();\\n//if (!msg.payload) {\\n//    msg.payload = { \\\"initial\\\": \\\"value\\\" };\\n//}\\nif (!msg.date) {\\n    msg.date = { \\\"initial\\\": \\\"value\\\" };\\n}\\nmsg.date = {\\n        \\\"date\\\": date,\\n        \\\"year\\\": year,\\n        \\\"month\\\": month,\\n        \\\"day\\\": day,\\n        \\\"hour\\\": hour,\\n        \\\"minute\\\": minute,\\n        \\\"second\\\": second\\n};\\n\\nvar hour = JSON.stringify(msg.date.hour);\\nvar min_org  = JSON.stringify(msg.date.minute);\\nvar min = ( \\\"0\\\" + min_org ).substr( -2 );       // \u4e00\u6841\u5206\u306e\u5834\u5408\u3001\u4e8c\u6841\u306b\\nvar sec_org  = JSON.stringify(msg.date.second);\\nvar sec = ( \\\"0\\\" + sec_org ).substr( -2 );       // \u4e00\u6841\u79d2\u306e\u5834\u5408\u3001\u4e8c\u6841\u306b\\nvar time = hour + \\\":\\\" + min + \\\":\\\" + sec;\\n\\n//average = sum / length;\\nvar data = [[time],[msg.sen1],[msg.average],[msg.std]];\\nmsg.payload = data;\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":470,\"y\":260,\"wires\":[[\"91518054.29af08\",\"8863a0d0.8377f\"]]},{\"id\":\"91518054.29af08\",\"type\":\"debug\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":650,\"y\":240,\"wires\":[]},{\"id\":\"8863a0d0.8377f\",\"type\":\"websocket out\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\",\"server\":\"d31c9a2c.05d468\",\"client\":\"\",\"x\":660,\"y\":280,\"wires\":[]},{\"id\":\"df09e905.cafb8\",\"type\":\"function\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\u914d\u5217\u306b\u683c\u7d0d\",\"func\":\"if (msg.payload.d.lux ) {\\n    msg.sen1 = Math.round(msg.payload.d.lux*100)/100;\u3000// Alps\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u6e29\u5ea6\u3092\u53d6\u5f97\\n} else {\\n    return 0;\\n}\\n\\nif ( !context.global.array ) {\\n    context.global.array = new Array (10);\\n}\\nvar shifted = context.global.array.shift();\\n\\ncontext.global.array.push(msg.sen1);\\n\\nmsg.array = context.global.array;\\nmsg.length = context.global.array.length;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":290,\"y\":200,\"wires\":[[\"2f595b01.869534\"]]},{\"id\":\"2f595b01.869534\",\"type\":\"function\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\u5e73\u5747\",\"func\":\"var sum = 0, average = 0;\\n    for (i=0; i<msg.length; i++) {\\n        sum = sum + msg.array[i];\\n}\\nmsg.sum = sum;\\naverage = sum / msg.length;\\nmsg.average = Math.round(average*100)/100;\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":450,\"y\":200,\"wires\":[[\"ca316ee9.f446a\",\"316f0c10.7cb134\"]]},{\"id\":\"ca316ee9.f446a\",\"type\":\"debug\",\"z\":\"3d90a2c7.0bf7a6\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"average\",\"x\":570,\"y\":160,\"wires\":[]},{\"id\":\"d31c9a2c.05d468\",\"type\":\"websocket-listener\",\"z\":\"3d90a2c7.0bf7a6\",\"path\":\"/ws/flow42\",\"wholemsg\":\"false\"}]\n\n```\n\n1. [Node-RED\u306e\u30d5\u30ed\u30fc\u3092\u30b3\u30d4\u30fc\u3059\u308b\u65b9\u6cd5](http://qiita.com/egplnt/items/84b244a50d8bdaced324)\u3092\u53c2\u7167\u3057\u3066\u3001\u4e0a\u8a18\u306e\u30d5\u30ed\u30fc\u3092\u30b3\u30d4\u30da\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u660e\u5ea6\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n2. \u4e0a\u6bb5\u306e\u300cTI\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0CC2650\u304b\u3089\u306e\u5024\u3092\u51fa\u529b\u300d\u30d5\u30ed\u30fc\u306e\u5148\u982d\u306e\u9752\u3044\u300cIBM IoT\u300d\u30ce\u30fc\u30c9\u3092\u958b\u304d\u3001\u4f7f\u7528\u3057\u3066\u3044\u308bTI\u30bb\u30f3\u30b5\u30fc\u30bf\u30b0CC2650\u306e\u30c7\u30d0\u30a4\u30b9ID\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n3. \u4e0b\u6bb5\u306e\u300c\u9001\u4ed8\u3055\u308c\u305f\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u53ef\u8996\u5316\u300d\u30d5\u30ed\u30fc\u3092\u78ba\u8a8d\u3057\u3001\u30aa\u30ec\u30f3\u30b8\u8272\u306e\u300cws\u7528html\u3092\u8fd4\u3059\u300d\u306e\u30ce\u30fc\u30c9\u3092\u958b\u304d\u300143\u884c\u76ee\u306e`.ws('ws://\u3053\u306eIoT\u30a2\u30d7\u30ea\u306e\u540d\u524d.mybluemix.net/ws/flow42'`\u306e\u30a2\u30d7\u30ea\u540d\u90e8\u5206\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002\n4. Node-RED\u753b\u9762\u53f3\u4e0a\u306e\u8d64\u3044\u300cDeploy\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u30af\u30e9\u30a6\u30c9\u5074\u3078\u53cd\u6620\u3057\u307e\u3059\u3002\n5. \u30d6\u30e9\u30a6\u30b6\u306e\u65b0\u3057\u3044\u30bf\u30d6\u3092\u958b\u304d\u3001`IoT\u30a2\u30d7\u30ea\u540d.mybluemix.net/test42`\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306a\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n6. \u3046\u307e\u304f\u8868\u793a\u3055\u308c\u306a\u3044\u5834\u5408\u3001\u4e0a\u6bb5\u306eIoT\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u51fa\u529b\u3059\u308b\u30d5\u30ed\u30fc\u306ewebsocket\u51fa\u529b\u30ce\u30fc\u30c9\u3092\u4e00\u65e6\u524a\u9664\u3057\u3066\u3001\u753b\u9762\u5de6\u5074\u306e\u30d1\u30ec\u30c3\u30c8\u306eoutput\u30bb\u30af\u30b7\u30e7\u30f3\u304b\u3089websocket\u30ce\u30fc\u30c9\u3092\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3057\u3066\u4f5c\u308a\u76f4\u3057\u3066\u307f\u307e\u3059\u3002\u51fa\u529bPath\u306f`/ws/flow42`\u3068\u3057\u3066\u3042\u308a\u307e\u3059\uff08html\u5185\u306e\u6307\u5b9a\u3068\u6574\u5408\u3059\u308c\u3070\u4f55\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\uff09\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-16 17.30.03.png](https://qiita-image-store.s3.amazonaws.com/0/125842/eeab5d73-813a-a998-c55b-fc39ca9ec29e.png)\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-16 17.30.58.png](https://qiita-image-store.s3.amazonaws.com/0/125842/ab2a619c-86fb-c2f4-0bbc-65dc7c3aee63.png)\n\n* * *\n\n\n# ALPS\u793e\u88fd\u306eIoT\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3092\u53ef\u8996\u5316\u3057\u307e\u3059\n\n```lang:\u5b9f\u7269\u306e\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3092\u53ef\u8996\u5316\u3059\u308b\n[{\"id\":\"71eca2d3.c94dd4\",\"type\":\"template\",\"z\":\"d95fb411.e6be68\",\"name\":\"ws\u7528html\u3092\u8fd4\u3059\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"<!DOCTYPE HTML>\\n<html>\\n\\t<head>\\n\\t\\t<title>\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067\u30bb\u30f3\u30b5\u30fc\u5024\u3068\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3092\u8868\u793a</title>\\n\\t\\t<meta charset=\\\"utf-8\\\" />\\n\\t\\t<script src=\\\"http://ccchart.com/js/ccchart.js\\\" charset=\\\"utf-8\\\"></script>\\n<script>\\n\\nwindow.onload=function(){\\n\\tcc();\\n}\\n\\nfunction cc() {\\n\\nvar chartdata87 = {\\n\\n  \\\"config\\\": {\\n    \\\"title\\\": \\\"\u30bb\u30f3\u30b5\u30fc\u5024\u3068\u76f4\u8fd1\u5e73\u5747\u5024\u3092\u30a4\u30f3\u30bf\u30fc\u30d0\u30eb\u8868\u793a\\\",\\n    \\\"subTitle\\\": \\\"\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067IoT\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3068\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3092\u8868\u793a\u3057\u307e\u3059\\\",\\n    \\\"type\\\": \\\"stackedarea\\\",\\n    \\\"maxWsColLen\\\": 8,\\n    \\\"colorSet\\\":\\n          [\\\"#ff7f7f\\\",\\\"#7f7fff\\\",\\\"#7fff7f\\\",\\\"#7fbfff\\\",\\\"#ff7f7f\\\"],\\n    \\\"useMarker\\\": \\\"arc\\\",\\n    \\\"useVal\\\": \\\"yes\\\",\\n\\t\\\"autoReConnect\\\": \\\"yes\\\",\\n\\t\\\"autoReConnectInterval\\\": 500,\\n\\t\\\"wsReCnt\\\": 5000,\\n    \\\"roundedUpMaxY\\\": 100\\n  },\\n\\n  \\\"data\\\": [\\n    [\\\"\u6642\u523b\\\"],\\n    [\\\"\u30bb\u30f3\u30b5\u30fc\uff11\u5024\\\"],\\n    [\\\"\u5e73\u5747\u5024\\\"],\\n    [\\\"\u6a19\u6e96\u504f\u5dee\\\"]\\n  ]\\n};\\n\\n  ccchart.wsCloseAll();//\u4e00\u65e6\u30af\u30ea\u30a2\\n  ccchart\\n    .init('id123', chartdata87)\\n\\t.ws('ws://\u3053\u306eIoT\u30a2\u30d7\u30ea\u306e\u540d\u524d.mybluemix.net/ws/flow27', autoReConnectInterval = 5000)\\n\\t.on('message', myOneColAtATime)\\n\\t.on('message', ccchart.wscase.oneColAtATime);\\n}\\n\\nfunction myOneColAtATime (msg) {\\n\\tconsole.log(\\\"myOneColAtATime entered\\\");\\n\\t// \u4e00\u5ea6\u306b1\u5217\u305a\u3064 [[\\\"2013\\\"],[435],[600]] \u3068\u3044\u3063\u305f\u914d\u5217\u3067\u5c4a\u304f\u5834\u5408\\n    // e.g. ws.on('message', ccchart.wscase.oneColAtAtime)\\n    var msgs = JSON.parse(msg.data);\\n\\t// \u5404\u30bb\u30f3\u30b5\u30fc\u8981\u7d20\u3092\u53d6\u308a\u51fa\u3057\u3066\u3001\u753b\u9762\u3078\u8868\u793a\\n\\tfor (var i = 0; i < msgs.length; i++) { console.log( i + \\\" = \\\" + msgs[i]); }\\n\\ttarget = document.getElementById(\\\"output1\\\");\\n\\ttarget.innerHTML = msgs[0];\\n\\ttarget = document.getElementById(\\\"output2\\\");\\n\\ttarget.innerHTML = msgs[1];\\n\\ttarget = document.getElementById(\\\"output3\\\");\\n\\ttarget.innerHTML = msgs[2];\\n  target = document.getElementById(\\\"output4\\\");\\n\\ttarget.innerHTML = msgs[3];\\n}\\n\\n</script>\\n\\t</head>\\n\\t<body>\\n\\n<div id=\\\"a-box\\\" style=\\\"background-color: #87cefa; padding: 20px;\\\">\\n\\t<h1>\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067\u30bb\u30f3\u30b5\u30fc\u5024\u3068\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3092\u8868\u793a</h1>\\n\\t<br />\\n\\t<p>\\n\\t\\t\u6307\u5b9a\u3057\u305f\u9593\u9694\u3067IoT\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3068\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3092\u8868\u793a\u3057\u307e\u3059<br />\\n\\t</p>\\n</div>\\n\\n<div id=\\\"b-box\\\" style=\\\"background-color: #ecf2fe; padding: 20px; \\\">\\n\\t<canvas id=\\\"id123\\\"></canvas>\\n\\t\\t<h2>\u6642\u523b</h2>\\n\\t\\t\\t<div style=\\\"text-align:left\\\" id=\\\"output0\\\"></div>\\n\\t\\t\\t<div style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output1\\\"></div>\\n\\t\\t<h2>\u30bb\u30f3\u30b5\u30fc\uff11\u3000</h2>\\n\\t\\t\\t<span style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output2\\\"></span>\\n\\t\\t<h2>\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u5e73\u5747\u5024\u3000</h2>\\n\\t\\t\\t<span style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output3\\\"></span>\\n      <h2>\u76f4\u8fd1\uff11\uff10\u4ef6\u306e\u6a19\u6e96\u504f\u5dee\u3000</h2>\\n  \\t\\t\\t<span style=\\\"text-align:left;font-size: 18pt\\\" id=\\\"output4\\\"></span>\\n</div>\\n\\n<div id=\\\"c-box\\\" style=\\\"background-color: #f0e8fa; padding: 20px; \\\">\\n\\t\\t<ul>\\n\\t\\t\\t<li><a href=\\\"http://qiita.com/egplnt/items/af867711a7191923b2ff\\\">Watson IoT Platform\u3092\u4f7f\u3063\u3066\u307f\u308b</a></li>\\n\\t\\t\\t<li><a href=\\\"https://internetofthings.ibmcloud.com/#/\\\">Watson IoT Platform</a></li>\\n\\t\\t\\t<li><a href=\\\"https://developer.ibm.com/recipes/tutorials/use-the-simulated-device-to-experience-the-iot-foundation/\\\">Recipe - Simulator</a></li>\\n\\t\\t</ul>\\n\\t\\t<div class=\\\"category\\\">\u8cc7\u6599\u30da\u30fc\u30b8</div>\\n\\t\\t<ul>\\n\\t\\t\\t<li><a href=\\\"http://ibm.com/iot\\\">IBM IoT</a></li>\\n\\t\\t\\t<li><a href=\\\"https://docs.internetofthings.ibmcloud.com/ja/\\\">Watson IoT Platform\u8cc7\u6599\u30da\u30fc\u30b8</a></li>\\n\\t\\t\\t<li><a href=\\\"https://developer.ibm.com/recipes/\\\">Recipe</a></li>\\n\\t\\t</ul>\\n\\n\\n\\n<!---\\n\\t\\t<p>\u30c6\u30ad\u30b9\u30c8\u3000\uff08\u7701\u7565\uff09</p>\\n\\t\\t<h3>h3 \u898b\u51fa\u3057</h3>\\n\\t\\t<p>\u30c6\u30ad\u30b9\u30c8\u3000\uff08\u7701\u7565\uff09</p>\\n\\t\\t<h3>h3 \u898b\u51fa\u3057</h3>\\n\\t\\t<p>\u30c6\u30ad\u30b9\u30c8\u3000\uff08\u7701\u7565\uff09</p>\\n--->\\n\\n</div>\\n<div id=\\\"d-box\\\" style=\\\"clear: both; background-color: #e0ce96; font-size: 18px; padding: 10px; text-align: center;  padding: 20px;\\\">\\n\\tcopyright (c) abc.com All right reserved.\\n</div>\\n\\n\\t</body>\\n</html>\\n\",\"x\":300,\"y\":320,\"wires\":[[\"f504c584.bed548\"]]},{\"id\":\"9fb9bfee.b0b478\",\"type\":\"comment\",\"z\":\"d95fb411.e6be68\",\"name\":\"Alps\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3092\u51fa\u529b\",\"info\":\"\",\"x\":140,\"y\":40,\"wires\":[]},{\"id\":\"ae767bc3.fe19e8\",\"type\":\"http in\",\"z\":\"d95fb411.e6be68\",\"name\":\"\",\"url\":\"/test27\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":110,\"y\":320,\"wires\":[[\"71eca2d3.c94dd4\"]]},{\"id\":\"f504c584.bed548\",\"type\":\"http response\",\"z\":\"d95fb411.e6be68\",\"name\":\"\",\"x\":470,\"y\":320,\"wires\":[]},{\"id\":\"67883a9a.c2ca74\",\"type\":\"comment\",\"z\":\"d95fb411.e6be68\",\"name\":\"\u9001\u4ed8\u3055\u308c\u305f\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u53ef\u8996\u5316\",\"info\":\"\",\"x\":150,\"y\":280,\"wires\":[]},{\"id\":\"24febcbd.d40bdc\",\"type\":\"ibmiot in\",\"z\":\"d95fb411.e6be68\",\"authentication\":\"quickstart\",\"apiKey\":\"\",\"inputType\":\"evt\",\"deviceId\":\"\",\"applicationId\":\"\",\"deviceType\":\"+\",\"eventType\":\"+\",\"commandType\":\"\",\"format\":\"json\",\"name\":\"IBM IoT\",\"service\":\"quickstart\",\"allDevices\":\"\",\"allApplications\":\"\",\"allDeviceTypes\":true,\"allEvents\":true,\"allCommands\":\"\",\"allFormats\":\"\",\"x\":90,\"y\":100,\"wires\":[[\"64dcf49a.f12f94\"]]},{\"id\":\"dc31af51.9bf038\",\"type\":\"function\",\"z\":\"d95fb411.e6be68\",\"name\":\"\u5206\u6563\",\"func\":\"var variance = 0;\\nfor (i=0; i<msg.length; i++) {\\n    variance = variance + Math.pow(msg.array[i] - msg.average, 2);\\n}\\nvariance = variance / msg.length;\\nmsg.variance = Math.round(variance*100)/100;\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":550,\"y\":100,\"wires\":[[\"24fb33e.3370acc\"]]},{\"id\":\"24fb33e.3370acc\",\"type\":\"function\",\"z\":\"d95fb411.e6be68\",\"name\":\"\u6a19\u6e96\u504f\u5dee\",\"func\":\"var standard_deviation = 0;\\nstandard_deviation = Math.sqrt(msg.variance);\\nmsg.std = Math.round(standard_deviation*100)/100;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":240,\"y\":160,\"wires\":[[\"2ce07369.e3acac\",\"ad4f660f.435558\"]]},{\"id\":\"2ce07369.e3acac\",\"type\":\"debug\",\"z\":\"d95fb411.e6be68\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"std\",\"x\":420,\"y\":200,\"wires\":[]},{\"id\":\"ad4f660f.435558\",\"type\":\"function\",\"z\":\"d95fb411.e6be68\",\"name\":\"\u6642\u523b\u3092\u8a2d\u5b9a\",\"func\":\"var d = new Date();\\nvar localTime = d.getTime();\\nvar localOffset = d.getTimezoneOffset() * 60000;\\nvar utc = localTime + localOffset;\\nvar offset = -9.0;\\nvar result = utc - (3600000 * offset);\\nvar date = parseInt(new Date(result) / 1000);\\nvar dt = new Date(result);\\n\\nvar year = dt.getFullYear();\\nvar month = dt.getMonth()+1;\\nvar day = dt.getDate();\\nvar hour = dt.getHours();\\nvar minute = dt.getMinutes();\\nvar second = dt.getSeconds();\\n//if (!msg.payload) {\\n//    msg.payload = { \\\"initial\\\": \\\"value\\\" };\\n//}\\nif (!msg.date) {\\n    msg.date = { \\\"initial\\\": \\\"value\\\" };\\n}\\nmsg.date = {\\n        \\\"date\\\": date,\\n        \\\"year\\\": year,\\n        \\\"month\\\": month,\\n        \\\"day\\\": day,\\n        \\\"hour\\\": hour,\\n        \\\"minute\\\": minute,\\n        \\\"second\\\": second\\n};\\n\\nvar hour = JSON.stringify(msg.date.hour);\\nvar min_org  = JSON.stringify(msg.date.minute);\\nvar min = ( \\\"0\\\" + min_org ).substr( -2 );       // \u4e00\u6841\u5206\u306e\u5834\u5408\u3001\u4e8c\u6841\u306b\\nvar sec_org  = JSON.stringify(msg.date.second);\\nvar sec = ( \\\"0\\\" + sec_org ).substr( -2 );       // \u4e00\u6841\u79d2\u306e\u5834\u5408\u3001\u4e8c\u6841\u306b\\nvar time = hour + \\\":\\\" + min + \\\":\\\" + sec;\\n\\n//average = sum / length;\\nvar data = [[time],[msg.sen1],[msg.average],[msg.std]];\\nmsg.payload = data;\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":430,\"y\":160,\"wires\":[[\"13fff97e.8241a7\",\"f3667015.230078\"]]},{\"id\":\"13fff97e.8241a7\",\"type\":\"debug\",\"z\":\"d95fb411.e6be68\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":610,\"y\":140,\"wires\":[]},{\"id\":\"f3667015.230078\",\"type\":\"websocket out\",\"z\":\"d95fb411.e6be68\",\"name\":\"\",\"server\":\"4e30e318.9e246c\",\"client\":\"\",\"x\":620,\"y\":180,\"wires\":[]},{\"id\":\"64dcf49a.f12f94\",\"type\":\"function\",\"z\":\"d95fb411.e6be68\",\"name\":\"\u914d\u5217\u306b\u683c\u7d0d\",\"func\":\"if (msg.payload.d.ambientLight ) {\\n    msg.sen1 = Math.round(msg.payload.d.ambientLight*100)/100;\u3000// Alps\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u6e29\u5ea6\u3092\u53d6\u5f97\\n} else {\\n    return 0;\\n}\\n\\nif ( !context.global.array ) {\\n    context.global.array = new Array (10);\\n}\\nvar shifted = context.global.array.shift();\\n\\ncontext.global.array.push(msg.sen1);\\n\\nmsg.array = context.global.array;\\nmsg.length = context.global.array.length;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":250,\"y\":100,\"wires\":[[\"77e09e93.a3a0c8\"]]},{\"id\":\"77e09e93.a3a0c8\",\"type\":\"function\",\"z\":\"d95fb411.e6be68\",\"name\":\"\u5e73\u5747\",\"func\":\"var sum = 0, average = 0;\\n    for (i=0; i<msg.length; i++) {\\n        sum = sum + msg.array[i];\\n}\\nmsg.sum = sum;\\naverage = sum / msg.length;\\nmsg.average = Math.round(average*100)/100;\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":410,\"y\":100,\"wires\":[[\"854054e7.b00ad8\",\"dc31af51.9bf038\"]]},{\"id\":\"854054e7.b00ad8\",\"type\":\"debug\",\"z\":\"d95fb411.e6be68\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"average\",\"x\":530,\"y\":60,\"wires\":[]},{\"id\":\"4e30e318.9e246c\",\"type\":\"websocket-listener\",\"z\":\"d95fb411.e6be68\",\"path\":\"/ws/flow27\",\"wholemsg\":\"false\"}]\n\n```\n\n1. [Node-RED\u306e\u30d5\u30ed\u30fc\u3092\u30b3\u30d4\u30fc\u3059\u308b\u65b9\u6cd5](http://qiita.com/egplnt/items/84b244a50d8bdaced324)\u3092\u53c2\u7167\u3057\u3066\u3001\u4e0a\u8a18\u306e\u30d5\u30ed\u30fc\u3092\u30b3\u30d4\u30da\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u660e\u5ea6\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n2. \u4e0a\u6bb5\u306e\u300cAlps\u30bb\u30f3\u30b5\u30fc\u304b\u3089\u306e\u5024\u3092\u51fa\u529b\u300d\u30d5\u30ed\u30fc\u306e\u5148\u982d\u306e\u9752\u3044\u300cIBM IoT\u300d\u30ce\u30fc\u30c9\u3092\u958b\u304d\u3001\u4f7f\u7528\u3057\u3066\u3044\u308bAlps IoT\u30bb\u30f3\u30b5\u30fc\u306e\u30c7\u30d0\u30a4\u30b9ID\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n3. \u4e0b\u6bb5\u306e\u300c\u9001\u4ed8\u3055\u308c\u305f\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u53ef\u8996\u5316\u300d\u30d5\u30ed\u30fc\u3092\u78ba\u8a8d\u3057\u3001\u30aa\u30ec\u30f3\u30b8\u8272\u306e\u300cws\u7528html\u3092\u8fd4\u3059\u300d\u306e\u30ce\u30fc\u30c9\u3092\u958b\u304d\u300143\u884c\u76ee\u306e`.ws('ws://\u3053\u306eIoT\u30a2\u30d7\u30ea\u306e\u540d\u524d.mybluemix.net/ws/flow27'`\u306e\u30a2\u30d7\u30ea\u540d\u90e8\u5206\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002\n4. Node-RED\u753b\u9762\u53f3\u4e0a\u306e\u8d64\u3044\u300cDeploy\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u30af\u30e9\u30a6\u30c9\u5074\u3078\u53cd\u6620\u3057\u307e\u3059\u3002\n5. \u30d6\u30e9\u30a6\u30b6\u306e\u65b0\u3057\u3044\u30bf\u30d6\u3092\u958b\u304d\u3001`IoT\u30a2\u30d7\u30ea\u540d.bluemix.net/test27`\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306a\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n6. \u3046\u307e\u304f\u8868\u793a\u3055\u308c\u306a\u3044\u5834\u5408\u3001\u4e0a\u6bb5\u306eIoT\u30bb\u30f3\u30b5\u30fc\u5024\u3092\u51fa\u529b\u3059\u308b\u30d5\u30ed\u30fc\u306ewebsocket\u51fa\u529b\u30ce\u30fc\u30c9\u3092\u4e00\u65e6\u524a\u9664\u3057\u3066\u3001\u753b\u9762\u5de6\u5074\u306e\u30d1\u30ec\u30c3\u30c8\u306eoutput\u30bb\u30af\u30b7\u30e7\u30f3\u304b\u3089websocket\u30ce\u30fc\u30c9\u3092\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3057\u3066\u4f5c\u308a\u76f4\u3057\u3066\u307f\u307e\u3059\u3002\u51fa\u529bPath\u306f`/ws/flow27`\u3068\u3057\u3066\u3042\u308a\u307e\u3059\uff08html\u5185\u306e\u6307\u5b9a\u3068\u6574\u5408\u3059\u308c\u3070\u4f55\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\uff09\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-16 11.46.45.png](https://qiita-image-store.s3.amazonaws.com/0/125842/14e6e3b8-89f4-9c54-d2dd-54260f9cf531.png)\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-16 11.38.45.png](https://qiita-image-store.s3.amazonaws.com/0/125842/98d7ce3f-200f-ca76-3002-679d4743f354.png)\n", "tags": ["watsoniotplatform", "node-red", "IoT", "wiotp", "wiotp406"]}