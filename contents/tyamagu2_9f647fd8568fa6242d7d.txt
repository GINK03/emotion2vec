{"context": " More than 1 year has passed since last update.\u8af8\u4e8b\u60c5\u306b\u3088\u308a FactoryGirl \u3067\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3082\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3082\u7121\u52b9\u306b\u3057\u305f\u3044\u3053\u3068\u304c\u3042\u3063\u305f\u306e\u3067\u3002\n\n\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3057\u306a\u3044\nActiveRecord \u306e #save \u306b validate: false \u3092\u6e21\u3059\u3068\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3057\u306a\u3044\u3002\u306a\u306e\u3067\u3001FactoryGirl \u3067 create \u3059\u308b\u6642\u306b save! \u3067\u306f\u306a\u304f save(validate: false) \u3092\u547c\u3073\u51fa\u3059\u3088\u3046\u306b\u3059\u308c\u3070 OK\u3002\nFactoryGirl \u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4fdd\u5b58\u3059\u308b\u65b9\u6cd5\u3092\u4e0a\u66f8\u304d\u3057\u305f\u3044\u5834\u5408\u306f to_create \u3092\u5b9a\u7fa9\u3059\u308c\u3070\u826f\u3044\u3002\u8a73\u3057\u304f\u306f\u3053\u3061\u3089\u3002\nFactoryGirl.define do\n  # \u3053\u3053\u306b\u66f8\u3044\u305f\u3089\u5168 factory \u306e to_create \u304c\u4e0a\u66f8\u304d\u3055\u308c\u308b\u3002\n  # to_create { |instance| instance.save(validate: false) }\n  factory :person do\n    to_create { |instance| instance.save(validate: false) }\n  end\nend\n\n\n\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u8d70\u3089\u305b\u306a\u3044\nActiveSupport::Callbacks::ClassMethods \u306e skip_callback \u3092\u4f7f\u3063\u3066\u3001before(:create) \u3067\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u30b9\u30ad\u30c3\u30d7\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\u305d\u308c\u3060\u3051\u3060\u3068\u3001factory \u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u305f\u5f8c\u3082\u30b9\u30ad\u30c3\u30d7\u3055\u308c\u3063\u3071\u306a\u3057\u306b\u306a\u308b\u306e\u3067 after(:create) \u3067 set_callback \u3059\u308b\u3002\nset/skip_callback \u306e\u7b2c\u4e00\u5f15\u6570\u306b\u306f :validate \u3084 :save \u306a\u3069\u3001\u5bfe\u8c61\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u30a4\u30d9\u30f3\u30c8\u3092\u6307\u5b9a\u3002\u7b2c\u4e8c\u5f15\u6570\u3067\u306f\u30a4\u30d9\u30f3\u30c8\u306e :before\u3001:after\u3001:around \u306e\u3044\u305a\u308c\u3067\u547c\u3073\u51fa\u3055\u308c\u308b\u306e\u304b\u3092\u6307\u5b9a\u3002if \u3084 prepend \u3068\u3044\u3063\u305f\u30aa\u30d7\u30b7\u30e7\u30f3\u3082\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\nFactoryGirl.define do\n  factory :person do\n    before(:create) { Person.skip_callback(:save, :before, :do_something) }\n    after(:create) { Person.set_callback(:save, :before, :do_something) }\n  end\nend\n\n\u53c2\u8003\uff1ahttp://api.rubyonrails.org/classes/ActiveSupport/Callbacks/ClassMethods.html\n\n\u307e\u3068\u3081\u308b\u3068\n\u3053\u3046\u306a\u308b\u3002\nFactoryGirl.define do\n  factory :person do\n    to_create { |instance| instance.save(validate: false) }\n    before(:create) { Person.skip_callback(:save, :before, :do_something) }\n    after(:create) { Person.set_callback(:save, :before, :do_something) }\n  end\nend\n\n\u8af8\u4e8b\u60c5\u306b\u3088\u308a FactoryGirl \u3067\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3082\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3082\u7121\u52b9\u306b\u3057\u305f\u3044\u3053\u3068\u304c\u3042\u3063\u305f\u306e\u3067\u3002\n\n# \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3057\u306a\u3044\n\nActiveRecord \u306e `#save` \u306b `validate: false` \u3092\u6e21\u3059\u3068\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3057\u306a\u3044\u3002\u306a\u306e\u3067\u3001FactoryGirl \u3067 `create` \u3059\u308b\u6642\u306b `save!` \u3067\u306f\u306a\u304f `save(validate: false)` \u3092\u547c\u3073\u51fa\u3059\u3088\u3046\u306b\u3059\u308c\u3070 OK\u3002\n\nFactoryGirl \u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4fdd\u5b58\u3059\u308b\u65b9\u6cd5\u3092\u4e0a\u66f8\u304d\u3057\u305f\u3044\u5834\u5408\u306f `to_create` \u3092\u5b9a\u7fa9\u3059\u308c\u3070\u826f\u3044\u3002\u8a73\u3057\u304f\u306f[\u3053\u3061\u3089](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#custom-methods-to-persist-objects)\u3002\n\n```ruby\nFactoryGirl.define do\n  # \u3053\u3053\u306b\u66f8\u3044\u305f\u3089\u5168 factory \u306e to_create \u304c\u4e0a\u66f8\u304d\u3055\u308c\u308b\u3002\n  # to_create { |instance| instance.save(validate: false) }\n  factory :person do\n    to_create { |instance| instance.save(validate: false) }\n  end\nend\n```\n\n# \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u8d70\u3089\u305b\u306a\u3044\n\nActiveSupport::Callbacks::ClassMethods \u306e `skip_callback` \u3092\u4f7f\u3063\u3066\u3001`before(:create)` \u3067\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u30b9\u30ad\u30c3\u30d7\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\u305d\u308c\u3060\u3051\u3060\u3068\u3001factory \u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u305f\u5f8c\u3082\u30b9\u30ad\u30c3\u30d7\u3055\u308c\u3063\u3071\u306a\u3057\u306b\u306a\u308b\u306e\u3067 `after(:create)` \u3067 `set_callback` \u3059\u308b\u3002\n\n`set/skip_callback` \u306e\u7b2c\u4e00\u5f15\u6570\u306b\u306f `:validate` \u3084 `:save` \u306a\u3069\u3001\u5bfe\u8c61\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u30a4\u30d9\u30f3\u30c8\u3092\u6307\u5b9a\u3002\u7b2c\u4e8c\u5f15\u6570\u3067\u306f\u30a4\u30d9\u30f3\u30c8\u306e `:before`\u3001`:after`\u3001`:around` \u306e\u3044\u305a\u308c\u3067\u547c\u3073\u51fa\u3055\u308c\u308b\u306e\u304b\u3092\u6307\u5b9a\u3002`if` \u3084 `prepend` \u3068\u3044\u3063\u305f\u30aa\u30d7\u30b7\u30e7\u30f3\u3082\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\n```ruby\nFactoryGirl.define do\n  factory :person do\n    before(:create) { Person.skip_callback(:save, :before, :do_something) }\n    after(:create) { Person.set_callback(:save, :before, :do_something) }\n  end\nend\n```\n\n\u53c2\u8003\uff1ahttp://api.rubyonrails.org/classes/ActiveSupport/Callbacks/ClassMethods.html\n\n# \u307e\u3068\u3081\u308b\u3068\n\n\u3053\u3046\u306a\u308b\u3002\n\n```ruby\nFactoryGirl.define do\n  factory :person do\n    to_create { |instance| instance.save(validate: false) }\n    before(:create) { Person.skip_callback(:save, :before, :do_something) }\n    after(:create) { Person.set_callback(:save, :before, :do_something) }\n  end\nend\n```\n", "tags": ["Rails", "FactoryGirl"]}