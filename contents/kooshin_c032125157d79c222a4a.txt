{"context": " More than 1 year has passed since last update.\n\n\u76ee\u7684\n\u4e00\u822c\u7684\u306a\u30eb\u30fc\u30bf\u306e\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u30b0\u30e9\u30d5\u5316\u3059\u308b\u30c4\u30fc\u30eb\u306f5\u5206\u5e73\u5747\u3067\u3059\u3002\n\u30b9\u30d1\u30a4\u30af\u306a\u3069\u306e\u4e00\u77ac\u306e\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u5897\u6e1b\u3092\u628a\u63e1\u3059\u308b\u305f\u3081\u306b\u300130\u79d2\u5e73\u5747\u3067\u30b0\u30e9\u30d5\u5316\u3057\u307e\u3059\u3002\n\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u306e\u30b0\u30e9\u30d5\u5316\u306b\u306fRRDtool\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\u3053\u306e\u8a18\u4e8b\u3067\u306fRRDtool\u306e\u4f7f\u3044\u65b9\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u3001\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8a18\u8f09\u3057\u307e\u3059\u3002\nCisco\u30eb\u30fc\u30bf\u3068snmp\u306b\u3064\u3044\u3066\u306f\u3001Cisco\u30eb\u30fc\u30bf\u306e\u30dd\u30fc\u30c8\u4e00\u89a7\u3092SNMP\u3067\u53d6\u5f97\u3059\u308b\u3067\u8a18\u8f09\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u5b9f\u884c\u30a4\u30e1\u30fc\u30b8\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u30d1\u30b1\u30c3\u30c8\u30c7\u30fc\u30bf\u91cf\u3068\u30d1\u30b1\u30c3\u30c8\u6570\u309230\u79d2\u5e73\u5747\u306e\u30b0\u30e9\u30d5\u306b\u3057\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3068\u3057\u3066\u30b5\u30a4\u30f3\u30ab\u30fc\u30d6\u3092\u4fdd\u5b58\u3057\u3001RRDtool\u3067\u63cf\u753b\u3057\u3066\u3044\u307e\u3059\u3002\n\u9001\u53d7\u4fe1\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\uff08\u8ee2\u9001\u30c7\u30fc\u30bf\u91cf\uff09\u3000\u203b\u6b63\u65b9\u5411\u306f\u53d7\u4fe1\u3001\u8ca0\u65b9\u5411\u306f\u9001\u4fe1\n\n\u9001\u53d7\u4fe1\u30d1\u30b1\u30c3\u30c8\u6570\u3000\u203b\u6b63\u65b9\u5411\u306f\u53d7\u4fe1\u3001\u8ca0\u65b9\u5411\u306f\u9001\u4fe1\n\n\n\u53ce\u96c6\u5bfe\u8c61\u306eSNMP OID\n\u4e0b\u8a18\u306eOID\u3092\u5b9a\u671f\u7684\u306bsnmpget\u3067\u53d6\u5f97\u3057\u3066\u3001RRD\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\n\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\n\n\n\u53d7\u4fe1: ifHCInOctets\n\u9001\u4fe1: ifHCOutOctets\n\n\n\u30e6\u30cb\u30ad\u30e3\u30b9\u30c8\u30d1\u30b1\u30c3\u30c8\u6570\n\n\n\u53d7\u4fe1: ifHCInUcastPkts\n\u9001\u4fe1: ifHCOutUcastPkts\n\n\n\u30de\u30eb\u30c1\u30ad\u30e3\u30b9\u30c8\u30d1\u30b1\u30c3\u30c8\u6570\n\n\n\u53d7\u4fe1: ifHCInMulticastPkts\n\u9001\u4fe1: ifHCOutMulticastPkts\n\n\n\u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30c8\u30d1\u30b1\u30c3\u30c8\u6570\n\n\n\u53d7\u4fe1: ifHCInBroadcastPkts\n\u9001\u4fe1: ifHCOutBroadcastPkts\n\n\n\n\nRRDtool\u30b3\u30de\u30f3\u30c9\n\n\u5bfe\u8c61\n\u4eca\u56de\u306fCisco1812J\u30eb\u30fc\u30bf\u306eFastEthernet0\u306e\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u53d6\u5f97\u5bfe\u8c61\u3068\u3059\u308b\u3002\n\u4e0b\u8a18\u306esnmpwalk\u306e\u5b9f\u884c\u7d50\u679c\u304b\u3089\u3001\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u756a\u53f7\u306f1\u3068\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\nsnmpwalk\n% snmpwalk -v2c -c public 192.168.88.101 ifDescr\nIF-MIB::ifDescr.1 = STRING: FastEthernet0\nIF-MIB::ifDescr.2 = STRING: FastEthernet1\nIF-MIB::ifDescr.3 = STRING: BRI0\nIF-MIB::ifDescr.4 = STRING: BRI0:1\nIF-MIB::ifDescr.5 = STRING: BRI0:2\nIF-MIB::ifDescr.6 = STRING: FastEthernet2\nIF-MIB::ifDescr.7 = STRING: FastEthernet3\nIF-MIB::ifDescr.8 = STRING: FastEthernet4\nIF-MIB::ifDescr.9 = STRING: FastEthernet5\nIF-MIB::ifDescr.10 = STRING: FastEthernet6\nIF-MIB::ifDescr.11 = STRING: FastEthernet7\nIF-MIB::ifDescr.12 = STRING: FastEthernet8\nIF-MIB::ifDescr.13 = STRING: FastEthernet9\nIF-MIB::ifDescr.14 = STRING: Null0\nIF-MIB::ifDescr.15 = STRING: Vlan1\nIF-MIB::ifDescr.16 = STRING: BRI0-Physical\nIF-MIB::ifDescr.17 = STRING: BRI0-Signaling\nIF-MIB::ifDescr.18 = STRING: BRI0:1-Bearer Channel\nIF-MIB::ifDescr.19 = STRING: BRI0:2-Bearer Channel\n\n\n\n\u4f5c\u6210\nRRD\u5f62\u5f0f\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30d5\u30a1\u30a4\u30eb\u540d\u306fUUID\u3092\u3064\u3051\u307e\u3057\u305f\u3002\n30\u79d2\u9593\u9694\u30671\u30f6\u6708\u9593\u3001\u30eb\u30fc\u30bf\u306e\u5404\u30ab\u30a6\u30f3\u30bf\u3092\u4fdd\u5b58\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\ncreate\n# 1447167590 => 2015-11-10 23:59:90 +0900\n# 1447167600 => 2015-11-11 00:00:00 +0900\nrrdtool create 286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd \\\n  --start 1447167590 \\\n  --step 30 \\\n  DS:InOctets:COUNTER:120:0:U \\\n  DS:OutOctets:COUNTER:120:0:U \\\n  DS:InUcastPkts:COUNTER:120:0:U \\\n  DS:OutUcastPkts:COUNTER:120:0:U \\\n  DS:InMulticastPkts:COUNTER:120:0:U \\\n  DS:OutMulticastPkts:COUNTER:120:0:U \\\n  DS:InBroadcastPkts:COUNTER:120:0:U \\\n  DS:OutBroadcastPkts:COUNTER:120:0:U \\\n  RRA:MAX:0.5:1:86400\n\n\n\n\u66f4\u65b0\nwatch\u30b3\u30de\u30f3\u30c9\u306730\u79d2\u6bce\u306bsnmpget\u3067\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u53d6\u5f97\u3057\u3066\u3001\u66f4\u65b0\u3057\u307e\u3059\u3002\n\nupdate\nwatch -n 30 rrdtool update 286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd N:\\\n`snmpget -v2c -Oqv -c public 192.168.88.101 ifHCInOctets.1`:\\\n`snmpget -v2c -Oqv -c public 192.168.88.101 ifHCOutOctets.1`:\\\n`snmpget -v2c -Oqv -c public 192.168.88.101 ifHCInUcastPkts.1`:\\\n`snmpget -v2c -Oqv -c public 192.168.88.101 ifHCOutUcastPkts.1`:\\\n`snmpget -v2c -Oqv -c public 192.168.88.101 ifHCInMulticastPkts.1`:\\\n`snmpget -v2c -Oqv -c public 192.168.88.101 ifHCOutMulticastPkts.1`:\\\n`snmpget -v2c -Oqv -c public 192.168.88.101 ifHCInBroadcastPkts.1`:\\\n`snmpget -v2c -Oqv -c public 192.168.88.101 ifHCOutBroadcastPkts.1`\n\n\n\n\u63cf\u753b\n\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3068\u30d1\u30b1\u30c3\u30c8\u6570\u306e\u30b0\u30e9\u30d5\u3092\u5225\u3005\u306b\u63cf\u753b\u3057\u307e\u3059\u3002\n\u53d7\u4fe1\u65b9\u5411\u3092\u30b0\u30e9\u30d5\u306e\u6b63\u306e\u9818\u57df\u306b\u3001\u9001\u4fe1\u65b9\u5411\u3092\u30b0\u30e9\u30d5\u306e\u8ca0\u306e\u9818\u57df\u306b\u63cf\u753b\u3057\u307e\u3059\u3002\nstart\u3068end\u306b\u3001\u524d\u65e5\u301c\u672c\u65e5\u307e\u3067\u306e\u7bc4\u56f2\u6307\u5b9a\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\n\ngraph\nrrdtool graph 286ec4c0-4233-4460-b8ca-2a0393e5edb3-traffic.png \\\n  --start -1day \\\n  --end start+1day \\\n  --title \"R1 Fa0 - Traffic\" \\\n  --width 800 \\\n  --height 200 \\\n  --slope-mode \\\n  --rigid \\\n  --vertical-label \"bits per second (bps)\" \\\n  \"DEF:a=286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd:InOctets:MAX\" \\\n  \"DEF:b=286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd:OutOctets:MAX\" \\\n  \"CDEF:bita=a,8,*\" \\\n  \"CDEF:bitb=b,8,*,-1,*\" \\\n  \"VDEF:maxa=bita,MAXIMUM\" \\\n  \"VDEF:maxb=bitb,MINIMUM\" \\\n  \"VDEF:avga=bita,AVERAGE\" \\\n  \"VDEF:avgb=bitb,AVERAGE\" \\\n  \"VDEF:lsta=bita,LAST\" \\\n  \"VDEF:lstb=bitb,LAST\" \\\n  \"HRULE:0#888888\" \\\n  \"AREA:bita#54EC48:Inbound \" \\\n  \"LINE1:bita#24BC14\" \\\n  \"GPRINT:avga:Average\\\\:%8.1lf %sbps\" \\\n  \"GPRINT:maxa:Maximum\\\\:%8.1lf %sbps\" \\\n  \"GPRINT:lsta:Current\\\\:%8.1lf %sbps\\\\n\" \\\n  \"AREA:bitb#48C4EC:Outbound\" \\\n  \"LINE1:bitb#1598C3\" \\\n  \"GPRINT:avgb:Average\\\\:%8.1lf %sbps\" \\\n  \"GPRINT:maxb:Maximum\\\\:%8.1lf %sbps\" \\\n  \"GPRINT:lstb:Current\\\\:%8.1lf %sbps\\\\n\"\n\n\n\u30d1\u30b1\u30c3\u30c8\u6570\n\ngraph\nrrdtool graph 286ec4c0-4233-4460-b8ca-2a0393e5edb3-packet.png \\\n  --start  \\\n  --start -1day \\\n  --end start+1day \\\n  --title \"R1 Fa0 - Packets\" \\\n  --width 800 \\\n  --height 200 \\\n  --slope-mode \\\n  --rigid \\\n  --vertical-label \"packets per second (pps)\" \\\n  \"DEF:a=286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd:InUcastPkts:MAX\" \\\n  \"DEF:b=286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd:OutUcastPkts:MAX\" \\\n  \"DEF:c=286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd:InMulticastPkts:MAX\" \\\n  \"DEF:d=286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd:OutMulticastPkts:MAX\" \\\n  \"DEF:e=286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd:InBroadcastPkts:MAX\" \\\n  \"DEF:f=286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd:OutBroadcastPkts:MAX\" \\\n  \"CDEF:bita=a\" \\\n  \"CDEF:bitb=b,-1,*\" \\\n  \"CDEF:bitc=c\" \\\n  \"CDEF:bitd=d,-1,*\" \\\n  \"CDEF:bite=e\" \\\n  \"CDEF:bitf=f,-1,*\" \\\n  \"CDEF:ace=bita,bitc,+,bite,+\" \\\n  \"CDEF:bdf=bitb,bitd,+,bitf,+\" \\\n  \"VDEF:maxa=bita,MAXIMUM\" \\\n  \"VDEF:maxb=bitb,MINIMUM\" \\\n  \"VDEF:maxc=bitc,MAXIMUM\" \\\n  \"VDEF:maxd=bitd,MINIMUM\" \\\n  \"VDEF:maxe=bite,MAXIMUM\" \\\n  \"VDEF:maxf=bitf,MINIMUM\" \\\n  \"VDEF:maxace=ace,MAXIMUM\" \\\n  \"VDEF:maxbdf=bdf,MINIMUM\" \\\n  \"VDEF:avga=bita,AVERAGE\" \\\n  \"VDEF:avgb=bitb,AVERAGE\" \\\n  \"VDEF:avgc=bitc,AVERAGE\" \\\n  \"VDEF:avgd=bitd,AVERAGE\" \\\n  \"VDEF:avge=bite,AVERAGE\" \\\n  \"VDEF:avgf=bitf,AVERAGE\" \\\n  \"VDEF:avgace=ace,AVERAGE\" \\\n  \"VDEF:avgbdf=bdf,AVERAGE\" \\\n  \"VDEF:lsta=bita,LAST\" \\\n  \"VDEF:lstb=bitb,LAST\" \\\n  \"VDEF:lstc=bitc,LAST\" \\\n  \"VDEF:lstd=bitd,LAST\" \\\n  \"VDEF:lste=bite,LAST\" \\\n  \"VDEF:lstf=bitf,LAST\" \\\n  \"VDEF:lstace=ace,LAST\" \\\n  \"VDEF:lstbdf=bdf,LAST\" \\\n  \"HRULE:0#888888\" \\\n  \\\n  \"AREA:bita#54EC48:Unicast   Packets In \" \\\n  \"GPRINT:avga:Average\\\\:%8.1lf %spps\" \\\n  \"GPRINT:maxa:Maximum\\\\:%8.1lf %spps\" \\\n  \"GPRINT:lsta:Current\\\\:%8.1lf %spps\\\\n\" \\\n  \"AREA:bitc#7648EC:Multicast Packets In :STACK\" \\\n  \"GPRINT:avgc:Average\\\\:%8.1lf %spps\" \\\n  \"GPRINT:maxc:Maximum\\\\:%8.1lf %spps\" \\\n  \"GPRINT:lstc:Current\\\\:%8.1lf %spps\\\\n\" \\\n  \"AREA:bite#DE48EC:Broadcast Packets In :STACK\" \\\n  \"GPRINT:avgc:Average\\\\:%8.1lf %spps\" \\\n  \"GPRINT:maxc:Maximum\\\\:%8.1lf %spps\" \\\n  \"GPRINT:lstc:Current\\\\:%8.1lf %spps\\\\n\" \\\n  \"LINE1:bita#24BC14\" \\\n  \"LINE1:bitc#4D18E4::STACK\" \\\n  \"LINE1:bite#B415C7::STACK\" \\\n  \"COMMENT:  Total     Packets In \" \\\n  \"GPRINT:avgace:Average\\\\:%8.1lf %spps\" \\\n  \"GPRINT:maxace:Maximum\\\\:%8.1lf %spps\" \\\n  \"GPRINT:lstace:Current\\\\:%8.1lf %spps\\\\n\" \\\n  \"COMMENT: \\\\n\" \\\n  \\\n  \"AREA:bitb#48C4EC:Unicast   Packets Out\" \\\n  \"GPRINT:avgb:Average\\\\:%8.1lf %spps\" \\\n  \"GPRINT:maxb:Maximum\\\\:%8.1lf %spps\" \\\n  \"GPRINT:lstb:Current\\\\:%8.1lf %spps\\\\n\" \\\n  \"AREA:bitd#EA644A:Multicast Packets Out:STACK\" \\\n  \"GPRINT:avgd:Average\\\\:%8.1lf %spps\" \\\n  \"GPRINT:maxd:Maximum\\\\:%8.1lf %spps\" \\\n  \"GPRINT:lstd:Current\\\\:%8.1lf %spps\\\\n\" \\\n  \"AREA:bitf#EC9D48:Broadcast Packets Out:STACK\" \\\n  \"GPRINT:avgf:Average\\\\:%8.1lf %spps\" \\\n  \"GPRINT:maxf:Maximum\\\\:%8.1lf %spps\" \\\n  \"GPRINT:lstf:Current\\\\:%8.1lf %spps\\\\n\" \\\n  \"LINE1:bitb#1598C3\" \\\n  \"LINE1:bitd#CC3118::STACK\" \\\n  \"LINE1:bitf#CC7016::STACK\" \\\n  \"COMMENT:  Total     Packets Out\" \\\n  \"GPRINT:avgbdf:Average\\\\:%8.1lf %spps\" \\\n  \"GPRINT:maxbdf:Maximum\\\\:%8.1lf %spps\" \\\n  \"GPRINT:lstbdf:Current\\\\:%8.1lf %spps\\\\n\"\n\n\n## \u76ee\u7684\n\u4e00\u822c\u7684\u306a\u30eb\u30fc\u30bf\u306e\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u30b0\u30e9\u30d5\u5316\u3059\u308b\u30c4\u30fc\u30eb\u306f5\u5206\u5e73\u5747\u3067\u3059\u3002\n\u30b9\u30d1\u30a4\u30af\u306a\u3069\u306e\u4e00\u77ac\u306e\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u5897\u6e1b\u3092\u628a\u63e1\u3059\u308b\u305f\u3081\u306b\u300130\u79d2\u5e73\u5747\u3067\u30b0\u30e9\u30d5\u5316\u3057\u307e\u3059\u3002\n\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u306e\u30b0\u30e9\u30d5\u5316\u306b\u306fRRDtool\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u8a18\u4e8b\u3067\u306fRRDtool\u306e\u4f7f\u3044\u65b9\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u3001\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8a18\u8f09\u3057\u307e\u3059\u3002\n\nCisco\u30eb\u30fc\u30bf\u3068``snmp``\u306b\u3064\u3044\u3066\u306f\u3001[Cisco\u30eb\u30fc\u30bf\u306e\u30dd\u30fc\u30c8\u4e00\u89a7\u3092SNMP\u3067\u53d6\u5f97\u3059\u308b](http://qiita.com/kooshin/items/1853e245d7162498cea9)\u3067\u8a18\u8f09\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n## \u5b9f\u884c\u30a4\u30e1\u30fc\u30b8\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u30d1\u30b1\u30c3\u30c8\u30c7\u30fc\u30bf\u91cf\u3068\u30d1\u30b1\u30c3\u30c8\u6570\u309230\u79d2\u5e73\u5747\u306e\u30b0\u30e9\u30d5\u306b\u3057\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3068\u3057\u3066\u30b5\u30a4\u30f3\u30ab\u30fc\u30d6\u3092\u4fdd\u5b58\u3057\u3001RRDtool\u3067\u63cf\u753b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u9001\u53d7\u4fe1\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\uff08\u8ee2\u9001\u30c7\u30fc\u30bf\u91cf\uff09\u3000\u203b\u6b63\u65b9\u5411\u306f\u53d7\u4fe1\u3001\u8ca0\u65b9\u5411\u306f\u9001\u4fe1\n![286ec4c0-4233-4460-b8ca-2a0393e5edb3-traffic.png](https://qiita-image-store.s3.amazonaws.com/0/12026/7de8b1d3-bfb6-1eac-8f9c-afba66859ee3.png)\n\n\u9001\u53d7\u4fe1\u30d1\u30b1\u30c3\u30c8\u6570\u3000\u203b\u6b63\u65b9\u5411\u306f\u53d7\u4fe1\u3001\u8ca0\u65b9\u5411\u306f\u9001\u4fe1\n![286ec4c0-4233-4460-b8ca-2a0393e5edb3-packet.png](https://qiita-image-store.s3.amazonaws.com/0/12026/bfb3fd9e-51dd-54aa-8a0c-7f6020e44770.png)\n\n\n## \u53ce\u96c6\u5bfe\u8c61\u306eSNMP OID\n\u4e0b\u8a18\u306eOID\u3092\u5b9a\u671f\u7684\u306b``snmpget``\u3067\u53d6\u5f97\u3057\u3066\u3001RRD\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\n* \u30c8\u30e9\u30d5\u30a3\u30c3\u30af\n  * \u53d7\u4fe1: ifHCInOctets\n  * \u9001\u4fe1: ifHCOutOctets\n* \u30e6\u30cb\u30ad\u30e3\u30b9\u30c8\u30d1\u30b1\u30c3\u30c8\u6570\n  * \u53d7\u4fe1: ifHCInUcastPkts\n  * \u9001\u4fe1: ifHCOutUcastPkts\n* \u30de\u30eb\u30c1\u30ad\u30e3\u30b9\u30c8\u30d1\u30b1\u30c3\u30c8\u6570\n  * \u53d7\u4fe1: ifHCInMulticastPkts\n  * \u9001\u4fe1: ifHCOutMulticastPkts\n* \u30d6\u30ed\u30fc\u30c9\u30ad\u30e3\u30b9\u30c8\u30d1\u30b1\u30c3\u30c8\u6570\n  * \u53d7\u4fe1: ifHCInBroadcastPkts\n  * \u9001\u4fe1: ifHCOutBroadcastPkts\n\n## RRDtool\u30b3\u30de\u30f3\u30c9\n\n### \u5bfe\u8c61\n\u4eca\u56de\u306fCisco1812J\u30eb\u30fc\u30bf\u306eFastEthernet0\u306e\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u53d6\u5f97\u5bfe\u8c61\u3068\u3059\u308b\u3002\n\u4e0b\u8a18\u306e``snmpwalk``\u306e\u5b9f\u884c\u7d50\u679c\u304b\u3089\u3001\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u756a\u53f7\u306f``1``\u3068\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\n```zsh:snmpwalk\n% snmpwalk -v2c -c public 192.168.88.101 ifDescr\nIF-MIB::ifDescr.1 = STRING: FastEthernet0\nIF-MIB::ifDescr.2 = STRING: FastEthernet1\nIF-MIB::ifDescr.3 = STRING: BRI0\nIF-MIB::ifDescr.4 = STRING: BRI0:1\nIF-MIB::ifDescr.5 = STRING: BRI0:2\nIF-MIB::ifDescr.6 = STRING: FastEthernet2\nIF-MIB::ifDescr.7 = STRING: FastEthernet3\nIF-MIB::ifDescr.8 = STRING: FastEthernet4\nIF-MIB::ifDescr.9 = STRING: FastEthernet5\nIF-MIB::ifDescr.10 = STRING: FastEthernet6\nIF-MIB::ifDescr.11 = STRING: FastEthernet7\nIF-MIB::ifDescr.12 = STRING: FastEthernet8\nIF-MIB::ifDescr.13 = STRING: FastEthernet9\nIF-MIB::ifDescr.14 = STRING: Null0\nIF-MIB::ifDescr.15 = STRING: Vlan1\nIF-MIB::ifDescr.16 = STRING: BRI0-Physical\nIF-MIB::ifDescr.17 = STRING: BRI0-Signaling\nIF-MIB::ifDescr.18 = STRING: BRI0:1-Bearer Channel\nIF-MIB::ifDescr.19 = STRING: BRI0:2-Bearer Channel\n```\n\n### \u4f5c\u6210\nRRD\u5f62\u5f0f\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30d5\u30a1\u30a4\u30eb\u540d\u306fUUID\u3092\u3064\u3051\u307e\u3057\u305f\u3002\n30\u79d2\u9593\u9694\u30671\u30f6\u6708\u9593\u3001\u30eb\u30fc\u30bf\u306e\u5404\u30ab\u30a6\u30f3\u30bf\u3092\u4fdd\u5b58\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```zsh:create\n# 1447167590 => 2015-11-10 23:59:90 +0900\n# 1447167600 => 2015-11-11 00:00:00 +0900\nrrdtool create 286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd \\\n  --start 1447167590 \\\n  --step 30 \\\n  DS:InOctets:COUNTER:120:0:U \\\n  DS:OutOctets:COUNTER:120:0:U \\\n  DS:InUcastPkts:COUNTER:120:0:U \\\n  DS:OutUcastPkts:COUNTER:120:0:U \\\n  DS:InMulticastPkts:COUNTER:120:0:U \\\n  DS:OutMulticastPkts:COUNTER:120:0:U \\\n  DS:InBroadcastPkts:COUNTER:120:0:U \\\n  DS:OutBroadcastPkts:COUNTER:120:0:U \\\n  RRA:MAX:0.5:1:86400\n```\n\n### \u66f4\u65b0\nwatch\u30b3\u30de\u30f3\u30c9\u306730\u79d2\u6bce\u306bsnmpget\u3067\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u53d6\u5f97\u3057\u3066\u3001\u66f4\u65b0\u3057\u307e\u3059\u3002\n\n```zsh:update\nwatch -n 30 rrdtool update 286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd N:\\\n`snmpget -v2c -Oqv -c public 192.168.88.101 ifHCInOctets.1`:\\\n`snmpget -v2c -Oqv -c public 192.168.88.101 ifHCOutOctets.1`:\\\n`snmpget -v2c -Oqv -c public 192.168.88.101 ifHCInUcastPkts.1`:\\\n`snmpget -v2c -Oqv -c public 192.168.88.101 ifHCOutUcastPkts.1`:\\\n`snmpget -v2c -Oqv -c public 192.168.88.101 ifHCInMulticastPkts.1`:\\\n`snmpget -v2c -Oqv -c public 192.168.88.101 ifHCOutMulticastPkts.1`:\\\n`snmpget -v2c -Oqv -c public 192.168.88.101 ifHCInBroadcastPkts.1`:\\\n`snmpget -v2c -Oqv -c public 192.168.88.101 ifHCOutBroadcastPkts.1`\n```\n\n### \u63cf\u753b\n\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3068\u30d1\u30b1\u30c3\u30c8\u6570\u306e\u30b0\u30e9\u30d5\u3092\u5225\u3005\u306b\u63cf\u753b\u3057\u307e\u3059\u3002\n\u53d7\u4fe1\u65b9\u5411\u3092\u30b0\u30e9\u30d5\u306e\u6b63\u306e\u9818\u57df\u306b\u3001\u9001\u4fe1\u65b9\u5411\u3092\u30b0\u30e9\u30d5\u306e\u8ca0\u306e\u9818\u57df\u306b\u63cf\u753b\u3057\u307e\u3059\u3002\nstart\u3068end\u306b\u3001\u524d\u65e5\u301c\u672c\u65e5\u307e\u3067\u306e\u7bc4\u56f2\u6307\u5b9a\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\n\n```zsh:graph\nrrdtool graph 286ec4c0-4233-4460-b8ca-2a0393e5edb3-traffic.png \\\n  --start -1day \\\n  --end start+1day \\\n  --title \"R1 Fa0 - Traffic\" \\\n  --width 800 \\\n  --height 200 \\\n  --slope-mode \\\n  --rigid \\\n  --vertical-label \"bits per second (bps)\" \\\n  \"DEF:a=286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd:InOctets:MAX\" \\\n  \"DEF:b=286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd:OutOctets:MAX\" \\\n  \"CDEF:bita=a,8,*\" \\\n  \"CDEF:bitb=b,8,*,-1,*\" \\\n  \"VDEF:maxa=bita,MAXIMUM\" \\\n  \"VDEF:maxb=bitb,MINIMUM\" \\\n  \"VDEF:avga=bita,AVERAGE\" \\\n  \"VDEF:avgb=bitb,AVERAGE\" \\\n  \"VDEF:lsta=bita,LAST\" \\\n  \"VDEF:lstb=bitb,LAST\" \\\n  \"HRULE:0#888888\" \\\n  \"AREA:bita#54EC48:Inbound \" \\\n  \"LINE1:bita#24BC14\" \\\n  \"GPRINT:avga:Average\\\\:%8.1lf %sbps\" \\\n  \"GPRINT:maxa:Maximum\\\\:%8.1lf %sbps\" \\\n  \"GPRINT:lsta:Current\\\\:%8.1lf %sbps\\\\n\" \\\n  \"AREA:bitb#48C4EC:Outbound\" \\\n  \"LINE1:bitb#1598C3\" \\\n  \"GPRINT:avgb:Average\\\\:%8.1lf %sbps\" \\\n  \"GPRINT:maxb:Maximum\\\\:%8.1lf %sbps\" \\\n  \"GPRINT:lstb:Current\\\\:%8.1lf %sbps\\\\n\"\n```\n\n\u30d1\u30b1\u30c3\u30c8\u6570\n\n```zsh:graph\nrrdtool graph 286ec4c0-4233-4460-b8ca-2a0393e5edb3-packet.png \\\n  --start  \\\n  --start -1day \\\n  --end start+1day \\\n  --title \"R1 Fa0 - Packets\" \\\n  --width 800 \\\n  --height 200 \\\n  --slope-mode \\\n  --rigid \\\n  --vertical-label \"packets per second (pps)\" \\\n  \"DEF:a=286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd:InUcastPkts:MAX\" \\\n  \"DEF:b=286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd:OutUcastPkts:MAX\" \\\n  \"DEF:c=286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd:InMulticastPkts:MAX\" \\\n  \"DEF:d=286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd:OutMulticastPkts:MAX\" \\\n  \"DEF:e=286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd:InBroadcastPkts:MAX\" \\\n  \"DEF:f=286ec4c0-4233-4460-b8ca-2a0393e5edb3.rrd:OutBroadcastPkts:MAX\" \\\n  \"CDEF:bita=a\" \\\n  \"CDEF:bitb=b,-1,*\" \\\n  \"CDEF:bitc=c\" \\\n  \"CDEF:bitd=d,-1,*\" \\\n  \"CDEF:bite=e\" \\\n  \"CDEF:bitf=f,-1,*\" \\\n  \"CDEF:ace=bita,bitc,+,bite,+\" \\\n  \"CDEF:bdf=bitb,bitd,+,bitf,+\" \\\n  \"VDEF:maxa=bita,MAXIMUM\" \\\n  \"VDEF:maxb=bitb,MINIMUM\" \\\n  \"VDEF:maxc=bitc,MAXIMUM\" \\\n  \"VDEF:maxd=bitd,MINIMUM\" \\\n  \"VDEF:maxe=bite,MAXIMUM\" \\\n  \"VDEF:maxf=bitf,MINIMUM\" \\\n  \"VDEF:maxace=ace,MAXIMUM\" \\\n  \"VDEF:maxbdf=bdf,MINIMUM\" \\\n  \"VDEF:avga=bita,AVERAGE\" \\\n  \"VDEF:avgb=bitb,AVERAGE\" \\\n  \"VDEF:avgc=bitc,AVERAGE\" \\\n  \"VDEF:avgd=bitd,AVERAGE\" \\\n  \"VDEF:avge=bite,AVERAGE\" \\\n  \"VDEF:avgf=bitf,AVERAGE\" \\\n  \"VDEF:avgace=ace,AVERAGE\" \\\n  \"VDEF:avgbdf=bdf,AVERAGE\" \\\n  \"VDEF:lsta=bita,LAST\" \\\n  \"VDEF:lstb=bitb,LAST\" \\\n  \"VDEF:lstc=bitc,LAST\" \\\n  \"VDEF:lstd=bitd,LAST\" \\\n  \"VDEF:lste=bite,LAST\" \\\n  \"VDEF:lstf=bitf,LAST\" \\\n  \"VDEF:lstace=ace,LAST\" \\\n  \"VDEF:lstbdf=bdf,LAST\" \\\n  \"HRULE:0#888888\" \\\n  \\\n  \"AREA:bita#54EC48:Unicast   Packets In \" \\\n  \"GPRINT:avga:Average\\\\:%8.1lf %spps\" \\\n  \"GPRINT:maxa:Maximum\\\\:%8.1lf %spps\" \\\n  \"GPRINT:lsta:Current\\\\:%8.1lf %spps\\\\n\" \\\n  \"AREA:bitc#7648EC:Multicast Packets In :STACK\" \\\n  \"GPRINT:avgc:Average\\\\:%8.1lf %spps\" \\\n  \"GPRINT:maxc:Maximum\\\\:%8.1lf %spps\" \\\n  \"GPRINT:lstc:Current\\\\:%8.1lf %spps\\\\n\" \\\n  \"AREA:bite#DE48EC:Broadcast Packets In :STACK\" \\\n  \"GPRINT:avgc:Average\\\\:%8.1lf %spps\" \\\n  \"GPRINT:maxc:Maximum\\\\:%8.1lf %spps\" \\\n  \"GPRINT:lstc:Current\\\\:%8.1lf %spps\\\\n\" \\\n  \"LINE1:bita#24BC14\" \\\n  \"LINE1:bitc#4D18E4::STACK\" \\\n  \"LINE1:bite#B415C7::STACK\" \\\n  \"COMMENT:  Total     Packets In \" \\\n  \"GPRINT:avgace:Average\\\\:%8.1lf %spps\" \\\n  \"GPRINT:maxace:Maximum\\\\:%8.1lf %spps\" \\\n  \"GPRINT:lstace:Current\\\\:%8.1lf %spps\\\\n\" \\\n  \"COMMENT: \\\\n\" \\\n  \\\n  \"AREA:bitb#48C4EC:Unicast   Packets Out\" \\\n  \"GPRINT:avgb:Average\\\\:%8.1lf %spps\" \\\n  \"GPRINT:maxb:Maximum\\\\:%8.1lf %spps\" \\\n  \"GPRINT:lstb:Current\\\\:%8.1lf %spps\\\\n\" \\\n  \"AREA:bitd#EA644A:Multicast Packets Out:STACK\" \\\n  \"GPRINT:avgd:Average\\\\:%8.1lf %spps\" \\\n  \"GPRINT:maxd:Maximum\\\\:%8.1lf %spps\" \\\n  \"GPRINT:lstd:Current\\\\:%8.1lf %spps\\\\n\" \\\n  \"AREA:bitf#EC9D48:Broadcast Packets Out:STACK\" \\\n  \"GPRINT:avgf:Average\\\\:%8.1lf %spps\" \\\n  \"GPRINT:maxf:Maximum\\\\:%8.1lf %spps\" \\\n  \"GPRINT:lstf:Current\\\\:%8.1lf %spps\\\\n\" \\\n  \"LINE1:bitb#1598C3\" \\\n  \"LINE1:bitd#CC3118::STACK\" \\\n  \"LINE1:bitf#CC7016::STACK\" \\\n  \"COMMENT:  Total     Packets Out\" \\\n  \"GPRINT:avgbdf:Average\\\\:%8.1lf %spps\" \\\n  \"GPRINT:maxbdf:Maximum\\\\:%8.1lf %spps\" \\\n  \"GPRINT:lstbdf:Current\\\\:%8.1lf %spps\\\\n\"\n```\n", "tags": ["RRDtool", "Cisco", "snmp", "Network"]}