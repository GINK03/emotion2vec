{"context": " More than 1 year has passed since last update.# http://qiita.com/Nabetani/items/9c514267214d3917edf2\n#STDOUT.sync=true\n$dx=[-2,2,0,0];$dy=[0,0,-2,2]\nM=Array.new(9){Array.new(9)}\ndef d(x,y,d)\n    if x==8&&y==8\n        $r+=1\n    else\n        4.times{|i|\n            if 0<=x+$dx[i]&&x+$dx[i]<=8 && 0<=y+$dy[i]&&y+$dy[i]<=8\n                if !M[y+$dy[i]][x+$dx[i]]&&!M[y+$dy[i]/2][x+$dx[i]/2]\n                    M[y+$dy[i]][x+$dx[i]]=1\n                    d(x+$dx[i],y+$dy[i],d+1)\n                    M[y+$dy[i]][x+$dx[i]]=nil\n                end\n            end\n        }\n    end\nend\nDATA.each_with_index{|e,i|\n    $r=0\n    M.map!{Array.new(9)}\n    M[0][0]=1\n    input,expect=e.chomp.split(' -> ')\n    expect=expect.to_i\n    input[1...-1].split(' ').each{|e|\n        a=e.chars.map{|e|e.ord-97}\n        d=a[1]-a[0]\n        raise if d!=1&&d!=5\n        x=a[0]%5*2\n        y=a[0]/5*2\n        M[y+d/5][x+d%5]=1\n    }\n    d(0,0,0)\n    #p $r\n    puts 'Case '+(i+1).to_s+': '+(expect==$r?'OK':'NG')\n}\n__END__\n\"\" -> 8512 #\u305d\u306e\u307e\u307e\u3002\u3053\u308c\u304c\u6700\u5927\u5024\u3002\n\"af\" -> 4256 #\u5bfe\u79f0\u6027\u3088\u308a\u534a\u5206\u306b\u306a\u308b\n\"xy\" -> 4256 #\u5bfe\u79f0\u6027\u3088\u308a\u534a\u5206\u306b\u306a\u308b\n\"pq qr rs st di in ns sx\" -> 184 #3x3\u30de\u30b9\u3068\u540c\u5024\n\"af pq qr rs st di in ns sx\" -> 92 #3x3\u30de\u30b9\u306e\u30d1\u30bf\u30fc\u30f3\u306e\u534a\u5206\n\"bg ch di ij no st\" -> 185 #3x3\u30de\u30b9\u306e\u30d1\u30bf\u30fc\u30f3 +1\n\"bc af ch di no kp mr ns ot pu rs\" -> 16 #4x2x2\n\"ab af\" -> 0 #\u5165\u53e3\u3092\u585e\u3044\u3060\n\"ty xy\" -> 0 #\u51fa\u53e3\u3092\u585e\u3044\u3060\n\"bg ch ej gh lm lq mr ot rs sx\" -> 11 #2x4+3\n\"ty ch hi mn kp mr rs sx\" -> 18 #6*3\n\"xy ch hi mn kp mr rs sx\" -> 32 #4*8\n\"ch hi mn kp mr rs sx\" -> 50 #6*3+4*8\n\"ab cd uv wx\" -> 621 \n\"gh mn st lq qr\" -> 685 \n\"fg gl lm mr rs\" -> 171\n\n```rb\n# http://qiita.com/Nabetani/items/9c514267214d3917edf2\n#STDOUT.sync=true\n$dx=[-2,2,0,0];$dy=[0,0,-2,2]\nM=Array.new(9){Array.new(9)}\ndef d(x,y,d)\n\tif x==8&&y==8\n\t\t$r+=1\n\telse\n\t\t4.times{|i|\n\t\t\tif 0<=x+$dx[i]&&x+$dx[i]<=8 && 0<=y+$dy[i]&&y+$dy[i]<=8\n\t\t\t\tif !M[y+$dy[i]][x+$dx[i]]&&!M[y+$dy[i]/2][x+$dx[i]/2]\n\t\t\t\t\tM[y+$dy[i]][x+$dx[i]]=1\n\t\t\t\t\td(x+$dx[i],y+$dy[i],d+1)\n\t\t\t\t\tM[y+$dy[i]][x+$dx[i]]=nil\n\t\t\t\tend\n\t\t\tend\n\t\t}\n\tend\nend\nDATA.each_with_index{|e,i|\n\t$r=0\n\tM.map!{Array.new(9)}\n\tM[0][0]=1\n\tinput,expect=e.chomp.split(' -> ')\n\texpect=expect.to_i\n\tinput[1...-1].split(' ').each{|e|\n\t\ta=e.chars.map{|e|e.ord-97}\n\t\td=a[1]-a[0]\n\t\traise if d!=1&&d!=5\n\t\tx=a[0]%5*2\n\t\ty=a[0]/5*2\n\t\tM[y+d/5][x+d%5]=1\n\t}\n\td(0,0,0)\n\t#p $r\n\tputs 'Case '+(i+1).to_s+': '+(expect==$r?'OK':'NG')\n}\n__END__\n\"\" -> 8512 #\u305d\u306e\u307e\u307e\u3002\u3053\u308c\u304c\u6700\u5927\u5024\u3002\n\"af\" -> 4256 #\u5bfe\u79f0\u6027\u3088\u308a\u534a\u5206\u306b\u306a\u308b\n\"xy\" -> 4256 #\u5bfe\u79f0\u6027\u3088\u308a\u534a\u5206\u306b\u306a\u308b\n\"pq qr rs st di in ns sx\" -> 184 #3x3\u30de\u30b9\u3068\u540c\u5024\n\"af pq qr rs st di in ns sx\" -> 92 #3x3\u30de\u30b9\u306e\u30d1\u30bf\u30fc\u30f3\u306e\u534a\u5206\n\"bg ch di ij no st\" -> 185 #3x3\u30de\u30b9\u306e\u30d1\u30bf\u30fc\u30f3 +1\n\"bc af ch di no kp mr ns ot pu rs\" -> 16 #4x2x2\n\"ab af\" -> 0 #\u5165\u53e3\u3092\u585e\u3044\u3060\n\"ty xy\" -> 0 #\u51fa\u53e3\u3092\u585e\u3044\u3060\n\"bg ch ej gh lm lq mr ot rs sx\" -> 11 #2x4+3\n\"ty ch hi mn kp mr rs sx\" -> 18 #6*3\n\"xy ch hi mn kp mr rs sx\" -> 32 #4*8\n\"ch hi mn kp mr rs sx\" -> 50 #6*3+4*8\n\"ab cd uv wx\" -> 621 \n\"gh mn st lq qr\" -> 685 \n\"fg gl lm mr rs\" -> 171\n```", "tags": ["Ruby", "\u3069\u3046\u66f8\u304f", "yhpg"]}