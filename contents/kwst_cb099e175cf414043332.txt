{"context": "web\u30da\u30fc\u30b8\u304b\u3089\u2193\u3092\u5b9f\u73fe\u3055\u305b\u3066\u307f\u307e\u3057\u305f\n- \u30a2\u30d7\u30ea\u3092\u8d77\u52d5\u3055\u305b\u308b\n- \u30a2\u30d7\u30ea\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3051\u308c\u3070\u30b9\u30c8\u30a2\u3078\u9077\u79fb\u3055\u305b\u305f\u308a\u4f55\u304b\u3057\u3089\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u8d77\u3053\u3055\u305b\u308b\n\u3084\u308a\u305f\u3044\u3053\u3068\u3068\u3057\u3066\u306f\u3053\u3061\u3089\u306e\u3088\u3046\u306a\u3053\u3068\nhttp://qiita.com/oigus-k/items/03044da9a9f7f1754346\nhttp://qiita.com/kenguy/items/9d9a8b7b6ca8b6984eb9\n\u524d\u63d0\u3068\u3057\u3066\u3001\u30a2\u30d7\u30ea\u5074\u306b\u30ab\u30b9\u30bf\u30e0url\u30b9\u30ad\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u307e\u305f\u3001\u30d6\u30e9\u30a6\u30b6\u74b0\u5883\u3054\u3068\u3067\u6319\u52d5\u304c\u7570\u306a\u308b\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u5168\u3066\u3092\u7db2\u7f85\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u57fa\u672c\u7684\u306a\u30ed\u30b8\u30c3\u30af\n\niframe\u304blocation.href\u3067\u30a2\u30d7\u30ea\u8d77\u52d5\u3092\u8a66\u307f\u308b\nsetTimeout\u3067\u9045\u308c\u3066\u30d5\u30a9\u30fc\u30eb\u30d0\u30c3\u30af\u51e6\u7406\u3092\u3059\u308b(\u30b9\u30c8\u30a2\u3078\u9077\u79fb\u306a\u3069)\n\u30a2\u30d7\u30ea\u3084\u30b9\u30c8\u30a2\u3078\u9077\u79fb\u3057\u305f\u3042\u3068\u306b\u30d6\u30e9\u30a6\u30b6\u306b\u623b\u3063\u3066\u304d\u305f\u3053\u3068\u3092\u691c\u77e5\u3059\u308b\n\n\n\u30ab\u30b9\u30bf\u30e0url\u30b9\u30ad\u30fc\u30e0\u3067\u30a2\u30d7\u30ea\u3092\u8d77\u52d5\u3055\u305b\u308b\n\u30a2\u30d7\u30ea\u3092\u8d77\u52d5\u3055\u305b\u308b\u306b\u306f2\u901a\u308a\u3042\u308a\u307e\u3059\u3002\n\u3069\u3061\u3089\u306e\u65b9\u6cd5\u3067\u3082\u5927\u4e08\u592b\u3067\u3059\u304c\u3001iOS9 safari\u3067\u306fiframe\u3067\u306f\u8d77\u52d5\u3057\u306a\u3044\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\niframe\u3067DOM\u306b\u8ffd\u52a0\u3059\u308b\nvar url = 'hoge://'; // \u30ab\u30b9\u30bf\u30e0URL\u30b9\u30ad\u30fc\u30e0\nvar iframe = document.createElement('iframe');\niframe.src = url;\ndocument.body.appendChild(iframe);\n\n\nlocation.href\u3067\u98db\u3070\u3059\nvar url = 'hoge://'; // \u30ab\u30b9\u30bf\u30e0URL\u30b9\u30ad\u30fc\u30e0\nlocation.href = url;\n\n\n\u30a2\u30d7\u30ea\u304c\u7121\u3044\u3053\u3068\u3092\u691c\u77e5\u3059\u308b\n\u30a2\u30d7\u30ea\u3092\u8d77\u52d5\u3057\u3088\u3046\u3068\u3057\u305f\u5f8c\u306b\u3001setTimeout\u3067\u30d5\u30a9\u30fc\u30eb\u30d0\u30c3\u30af\u51e6\u7406\u3092\u8d70\u3089\u305b\u307e\u3059\u3002\n\u30a2\u30d7\u30ea\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u30a2\u30d7\u30ea\u304c\u8d77\u52d5\u3059\u308b\u306e\u3067\u3053\u306esetTimeout\u306e\u9045\u5ef6\u51e6\u7406\u304c\u8d70\u3089\u306a\u3044\u3067\u3059\u3002\n\u9045\u5ef6\u51e6\u7406\u304c\u8d70\u3063\u305f\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u30a2\u30d7\u30ea\u304c\u8d77\u52d5\u3057\u306a\u304b\u3063\u305f\u3068\u3044\u3046\u3053\u3068\u306a\u306e\u3067\u3001\u305d\u308c\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n// \u30a2\u30d7\u30ea\u3092\u8d77\u52d5\u3057\u3088\u3046\u3068\u3059\u308b\u51e6\u7406\u306e\u5f8c\u306b\nvar _timerId = setTimeout(function() {\n  console.log('on fallback'); // \u3053\u3053\u3067\u30b9\u30c8\u30a2\u3078\u9077\u79fb\u306a\u3069\u3055\u305b\u307e\u3059\n}, 500); // \u9045\u5ef6\u6642\u9593\u306f\u30c7\u30d0\u30a4\u30b9\u306b\u3088\u308a\u307e\u3059\u304c\u3001500\u30df\u30ea\u79d2\u3050\u3089\u3044\u304c\u59a5\u5f53\u304b\u3068\n\n\n\u30d6\u30e9\u30a6\u30b6\u306b\u623b\u3063\u3066\u304d\u305f\u3053\u3068\u3092\u691c\u77e5\u3059\u308b\n\nwindow.focus, blur\nblur\u30a4\u30d9\u30f3\u30c8\u306e\u5f8c\u306efocus\u30a4\u30d9\u30f3\u30c8\u3067\u691c\u77e5\u3057\u307e\u3059\u3002\nwindow.focus();\nwindow.addEventListener('blur', onBlur);\nfunction onBlur() {\n  window.removeEventListener('blur', onBlur);\n  window.addEventListener('focus', onFocus);\n}\nfunction onFocus() {\n  console.log('on return browser');\n}\n\n\nvisibilityChange\nvisibilitychange\u306f\u4f7f\u3048\u306a\u3044\u30d6\u30e9\u30a6\u30b6\u3084\u30d9\u30f3\u30c0\u30fc\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u304c\u5fc5\u8981\u306a\u30d6\u30e9\u30a6\u30b6\u304c\u3042\u308b\u306e\u3067\u3001\u5834\u5408\u5206\u3051\u3057\u307e\u3059\u3002\nif (document.hidden !== undefined) {\n  document.addEventListener('visibilitychange', onVisibilityChange);\n} else if (document.webkitHidden !== undefined) {\n  document.addEventListener('webkitvisibilitychange', onWebkitVisibilityChange);\n}\nfunction onVisibilityChange() {\n   if (!document.hidden) {\n    console.log('on return browser');\n  }\n}\n\nfunction onWebkitVisibilityChange() {\n  if (!document.webkitHidden) {\n    console.log('on return browser');\n  }\n}\n\n\nrequestAnimationFrame\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u96e2\u308c\u305f\u6642\u306frequestAnimationFrame\u304c\u56de\u3089\u306a\u3044\u306e\u3067\u3001\u305d\u308c\u3092\u5229\u7528\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u623b\u3063\u3066\u304d\u305f\u304b\u3069\u3046\u304b\u3092\u691c\u77e5\u3057\u307e\u3059\u3002\nvar rafTimer, rafId;\nfunction observe(){\n  this.rafId = window.requestAnimationFrame(observe);\n  if (rafTimer !== false) {\n    clearTimeout(this.rafTimer);\n  }\n\n  rafTimer = setTimeout(function() {\n    console.log('on return browser');\n    window.cancelAnimationFrame(rafId);\n  }, 1000);\n};\nobserve();\n\n\nnpm\u306b\u516c\u958b\u3057\u3066\u307e\u3059\nnpm\nhttps://www.npmjs.com/package/fallback-custom-scheme\n\n\u53c2\u8003\nhttp://qiita.com/d2cs-kimura/items/b51ef73528fa66a35a9d\nhttps://havelog.ayumusato.com/develop/javascript/e564-url-scheme-fallback.html\nweb\u30da\u30fc\u30b8\u304b\u3089\u2193\u3092\u5b9f\u73fe\u3055\u305b\u3066\u307f\u307e\u3057\u305f\n- \u30a2\u30d7\u30ea\u3092\u8d77\u52d5\u3055\u305b\u308b\n- \u30a2\u30d7\u30ea\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3051\u308c\u3070\u30b9\u30c8\u30a2\u3078\u9077\u79fb\u3055\u305b\u305f\u308a\u4f55\u304b\u3057\u3089\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u8d77\u3053\u3055\u305b\u308b\n\n\u3084\u308a\u305f\u3044\u3053\u3068\u3068\u3057\u3066\u306f\u3053\u3061\u3089\u306e\u3088\u3046\u306a\u3053\u3068\nhttp://qiita.com/oigus-k/items/03044da9a9f7f1754346\nhttp://qiita.com/kenguy/items/9d9a8b7b6ca8b6984eb9\n\n\n\u524d\u63d0\u3068\u3057\u3066\u3001\u30a2\u30d7\u30ea\u5074\u306b\u30ab\u30b9\u30bf\u30e0url\u30b9\u30ad\u30fc\u30e0\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u307e\u305f\u3001\u30d6\u30e9\u30a6\u30b6\u74b0\u5883\u3054\u3068\u3067\u6319\u52d5\u304c\u7570\u306a\u308b\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u5168\u3066\u3092\u7db2\u7f85\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n## \u57fa\u672c\u7684\u306a\u30ed\u30b8\u30c3\u30af\n1. iframe\u304blocation.href\u3067\u30a2\u30d7\u30ea\u8d77\u52d5\u3092\u8a66\u307f\u308b\n2. setTimeout\u3067\u9045\u308c\u3066\u30d5\u30a9\u30fc\u30eb\u30d0\u30c3\u30af\u51e6\u7406\u3092\u3059\u308b(\u30b9\u30c8\u30a2\u3078\u9077\u79fb\u306a\u3069)\n3. \u30a2\u30d7\u30ea\u3084\u30b9\u30c8\u30a2\u3078\u9077\u79fb\u3057\u305f\u3042\u3068\u306b\u30d6\u30e9\u30a6\u30b6\u306b\u623b\u3063\u3066\u304d\u305f\u3053\u3068\u3092\u691c\u77e5\u3059\u308b\n\n## \u30ab\u30b9\u30bf\u30e0url\u30b9\u30ad\u30fc\u30e0\u3067\u30a2\u30d7\u30ea\u3092\u8d77\u52d5\u3055\u305b\u308b\n\u30a2\u30d7\u30ea\u3092\u8d77\u52d5\u3055\u305b\u308b\u306b\u306f2\u901a\u308a\u3042\u308a\u307e\u3059\u3002\n\u3069\u3061\u3089\u306e\u65b9\u6cd5\u3067\u3082\u5927\u4e08\u592b\u3067\u3059\u304c\u3001iOS9 safari\u3067\u306fiframe\u3067\u306f\u8d77\u52d5\u3057\u306a\u3044\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n#### iframe\u3067DOM\u306b\u8ffd\u52a0\u3059\u308b\n\n```Javascript:\nvar url = 'hoge://'; // \u30ab\u30b9\u30bf\u30e0URL\u30b9\u30ad\u30fc\u30e0\nvar iframe = document.createElement('iframe');\niframe.src = url;\ndocument.body.appendChild(iframe);\n```\n\n#### location.href\u3067\u98db\u3070\u3059\n\n```Javascript:\nvar url = 'hoge://'; // \u30ab\u30b9\u30bf\u30e0URL\u30b9\u30ad\u30fc\u30e0\nlocation.href = url;\n```\n\n## \u30a2\u30d7\u30ea\u304c\u7121\u3044\u3053\u3068\u3092\u691c\u77e5\u3059\u308b\n\u30a2\u30d7\u30ea\u3092\u8d77\u52d5\u3057\u3088\u3046\u3068\u3057\u305f\u5f8c\u306b\u3001setTimeout\u3067\u30d5\u30a9\u30fc\u30eb\u30d0\u30c3\u30af\u51e6\u7406\u3092\u8d70\u3089\u305b\u307e\u3059\u3002\n\u30a2\u30d7\u30ea\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u30a2\u30d7\u30ea\u304c\u8d77\u52d5\u3059\u308b\u306e\u3067\u3053\u306esetTimeout\u306e\u9045\u5ef6\u51e6\u7406\u304c\u8d70\u3089\u306a\u3044\u3067\u3059\u3002\n\u9045\u5ef6\u51e6\u7406\u304c\u8d70\u3063\u305f\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u30a2\u30d7\u30ea\u304c\u8d77\u52d5\u3057\u306a\u304b\u3063\u305f\u3068\u3044\u3046\u3053\u3068\u306a\u306e\u3067\u3001\u305d\u308c\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n```Javascript:\n// \u30a2\u30d7\u30ea\u3092\u8d77\u52d5\u3057\u3088\u3046\u3068\u3059\u308b\u51e6\u7406\u306e\u5f8c\u306b\nvar _timerId = setTimeout(function() {\n  console.log('on fallback'); // \u3053\u3053\u3067\u30b9\u30c8\u30a2\u3078\u9077\u79fb\u306a\u3069\u3055\u305b\u307e\u3059\n}, 500); // \u9045\u5ef6\u6642\u9593\u306f\u30c7\u30d0\u30a4\u30b9\u306b\u3088\u308a\u307e\u3059\u304c\u3001500\u30df\u30ea\u79d2\u3050\u3089\u3044\u304c\u59a5\u5f53\u304b\u3068\n```\n\n## \u30d6\u30e9\u30a6\u30b6\u306b\u623b\u3063\u3066\u304d\u305f\u3053\u3068\u3092\u691c\u77e5\u3059\u308b\n\n#### window.focus, blur\nblur\u30a4\u30d9\u30f3\u30c8\u306e\u5f8c\u306efocus\u30a4\u30d9\u30f3\u30c8\u3067\u691c\u77e5\u3057\u307e\u3059\u3002\n\n```Javascript:\nwindow.focus();\nwindow.addEventListener('blur', onBlur);\nfunction onBlur() {\n  window.removeEventListener('blur', onBlur);\n  window.addEventListener('focus', onFocus);\n}\nfunction onFocus() {\n  console.log('on return browser');\n}\n```\n\n#### visibilityChange\nvisibilitychange\u306f\u4f7f\u3048\u306a\u3044\u30d6\u30e9\u30a6\u30b6\u3084\u30d9\u30f3\u30c0\u30fc\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u304c\u5fc5\u8981\u306a\u30d6\u30e9\u30a6\u30b6\u304c\u3042\u308b\u306e\u3067\u3001\u5834\u5408\u5206\u3051\u3057\u307e\u3059\u3002\n\n```Javascript:\nif (document.hidden !== undefined) {\n  document.addEventListener('visibilitychange', onVisibilityChange);\n} else if (document.webkitHidden !== undefined) {\n  document.addEventListener('webkitvisibilitychange', onWebkitVisibilityChange);\n}\nfunction onVisibilityChange() {\n   if (!document.hidden) {\n    console.log('on return browser');\n  }\n}\n\nfunction onWebkitVisibilityChange() {\n  if (!document.webkitHidden) {\n    console.log('on return browser');\n  }\n}\n```\n\n#### requestAnimationFrame\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u96e2\u308c\u305f\u6642\u306frequestAnimationFrame\u304c\u56de\u3089\u306a\u3044\u306e\u3067\u3001\u305d\u308c\u3092\u5229\u7528\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u623b\u3063\u3066\u304d\u305f\u304b\u3069\u3046\u304b\u3092\u691c\u77e5\u3057\u307e\u3059\u3002\n\n```Javascript:\nvar rafTimer, rafId;\nfunction observe(){\n  this.rafId = window.requestAnimationFrame(observe);\n  if (rafTimer !== false) {\n    clearTimeout(this.rafTimer);\n  }\n\n  rafTimer = setTimeout(function() {\n    console.log('on return browser');\n    window.cancelAnimationFrame(rafId);\n  }, 1000);\n};\nobserve();\n```\n\n# npm\u306b\u516c\u958b\u3057\u3066\u307e\u3059\nnpm\nhttps://www.npmjs.com/package/fallback-custom-scheme\n\n# \u53c2\u8003\nhttp://qiita.com/d2cs-kimura/items/b51ef73528fa66a35a9d\nhttps://havelog.ayumusato.com/develop/javascript/e564-url-scheme-fallback.html\n\n", "tags": ["JavaScript", "HTML", "Scheme"]}