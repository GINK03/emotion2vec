{"context": " More than 1 year has passed since last update.\u3053\u306e\u8a18\u4e8b\u306f\u3001knockout.js Advent Calendar 2015\u306e\uff18\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002 \u5148\u306b\uff17\u65e5\u76ee\u306b\u76ee\u3092\u901a\u3059\u3053\u3068\u3092\u63a8\u5968\u3057\u3066\u3044\u307e\u3059\u3002\nknockout , knockout-es5 , knockout.punches\u74b0\u5883\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\nknockout\u306b\u3082\u3001scope(context)\u306e\u6982\u5ff5\u304c\u3042\u308a\u307e\u3059\u3002\nscope\u304c\u5207\u308a\u66ff\u308f\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u306f\u3001foreachbind\u306a\u3069\u306e\u30a4\u30c6\u30ec\u30fc\u30bf\u3067\u306e\u5b50scope\u3084\u3001withbind\u3067\u306e\u660e\u793a\u7684\u306ascope\u5207\u63db\u3048\u3092\u884c\u3063\u305f\u5834\u5408\u3067\u3059\u3002\n\u4f8b\u3048\u3070\u3001\u3053\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nCountry(\u56fd)\u3068State(\u5dde/\u770c)\u3068City\uff08\u5e02\u30fb\u533a\uff09\u306f\u305d\u308c\u305e\u308c\u89aa\u5b50\u95a2\u4fc2\u306b\u3042\u308a\u307e\u3059\u3002\n\nindex.html\n<div data-bind=\"foreach:countries\">\n    <div class=\"country\">\n        <span>{{name}}</span>\n        {{#foreach: states}}\n        <div class=\"state\">\n            <span>{{name}}</span>\n            {{#foreach: cities}}\n            <div class=\"city\">\n                <span>{{name}}</span>\u306f\u3001{{$parents[1].name}}\u306e{{$parents[0].name}}\u306b\u3042\u308a\u307e\u3059\n            </div>\n            {{/foreach}}\n        </div>\n        {{/foreach}}\n    </div>\n</div>\n\n\n<div data-bind=\"foreach:list\">\u306f\u3001div\u306e\u5185\u5074\u3092\u7e70\u308a\u8fd4\u3057\u3001\n{{#foreach:list}} {{/foreach}}\u3082\u307e\u305f\u3001\u3053\u306e\u30bf\u30b0\u306e\u5185\u5074\u3092\u7e70\u308a\u8fd4\u3057\u307e\u3059\u3002 \n\u3053\u308c\u306f\u3001<!-- ko foreach:list--><!-- /ko -->\u306e\u69cb\u6587\u7cd6\u8863\u3067\u3059\u3002\nVirtualElement\u3068\u547c\u3070\u308c\u308b\u3082\u306e\u3067\u3001\u4f59\u8a08\u306a\u30bf\u30b0\u306e\u30cd\u30b9\u30c8\u3092\u907f\u3051\u308b\u305f\u3081\u306b\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n(\u30b3\u30e1\u30f3\u30c8\u3092\u7528\u3044\u308b\u65b9\u6cd5\u3092\u4f7f\u3063\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u3059\u3053\u3057\u9577\u3044\u3067\u3059\u3057\u3001\u6700\u9069\u5316\u30c4\u30fc\u30eb\u306a\u3069\u3067\u30b3\u30e1\u30f3\u30c8\u304c\u6d88\u3055\u308c\u305f\u5834\u5408\u306b\u3001\u4e0d\u90fd\u5408\u304c\u751f\u3058\u308b\u306e\u3067\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002)\n\n\u30b5\u30f3\u30d7\u30eb\u3092\u773a\u3081\u3066\u307f\u308b\u3068\u3001\u306a\u3093\u3068\u306a\u304f\u308f\u304b\u308b\u901a\u308a\u3001\ndiv.country\u306e\u5185\u5074\u304c\u6307\u3059 name \u306f\u56fd\u540d\u3067\u3059\u3057\u3001\ndiv.state\u306e\u5185\u5074\u5074\u3059 name \u306f \u770c\u30fb\u5dde\u540d\u3067\u3059\u3002\ndiv.city\u3067\u306f name \u306f\u5e02\u30fb\u533a\u540d\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u5b50scope\u304b\u3089\u89aascope\u3092\u53c2\u7167\u3059\u308b\u306b\u306f\u3001 $parents\u3092\u4f7f\u3044\u307e\u3059\u3002\n$parents[0]\u3068$parent \u306f\u7b49\u4fa1\u3067\u3059\u3002\ncity\u306escope\u304b\u3089\u307f\u3066\u3001\n\u3000\\$parents[0]\u306fstate\u306escope\u3067\u3001\n\u3000\\$parents[1]\u306fcountry\u306escope\n\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\nscript.js\nfunction Country(name){\n    this.states=[];\n    this.name = name;\n    ko.track(this);\n}\nfunction State(name){\n    this.cities=[];\n    this.name = name;\n    ko.track(this);\n}\nfunction City(name){\n    this.name = name;\n    ko.track(this);\n}\n\nfunction VM(){\n    var countries = this.countries = [];\n    var src = [\n        {\n            name:'jp',\n            state:[\n                {name:'\u6771\u4eac',city:[{name:'\u5343\u4ee3\u7530'},{name:'\u6e2f'},{name:' \u6e0b\u8c37'}]},\n                {name:'\u5927\u962a',city:[{name:'\u5927\u962a'},{name:'\u583a'},{name:'\u677e\u539f'}]},\n                {name:'\u5bae\u57ce',city:[{name:'\u4ed9\u53f0'},{name:'\u89d2\u7530'},{name:'\u540d\u53d6'}]}\n            ]\n        },\n        {\n            name:'us',\n            state:[\n                {name:'Texas',city:[{name:'SanAntonio'},{name:'Austin'},{name:' Huston'}]},\n                {name:'NewYork',city:[{name:'Rochester'},{name:'Buffalo'}]}\n            ]\n        }\n    ];\n    // mapping to model\n    src.forEach(function(c){\n        var country = new Country(c.name);\n        c.state.forEach(function(s){\n            var state = new State(s.name);\n            s.city.forEach(function(ci){\n                state.cities.push(new City(ci.name));\n            });\n            country.states.push(state)\n        });\n        countries.push(country);\n    });\n    ko.track(this);\n}\nvar vm = new VM();\n\nko.punches.enableAll();\nko.applyBindings(vm);\n\n\n\nscope\u306econtext\u306b\u306f\u3001\n$parent\u3084$parents[]\u3084$data\u3000\u305d\u3057\u3066\u3001\u30a4\u30c6\u30ec\u30fc\u30bf\u306escope\u3067\u306f$index\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\n\u3000\u305d\u308c\u305e\u308c\u3001\n\u3000\u3000$parent\u306f\u3001\u81ea\u5206\u306e\u89aascope\u3001\n\u3000\u3000$parents\u306f\u3001\u81ea\u5206\u306e\u5148\u7956scope\u3001\n\u3000\u3000$data\u306f\u3001\u81ea\u5206\u81ea\u8eab\u306escope\u3001\n\u3000\u3000$index\u306f\u3001\u89aa\u304b\u3089\u898b\u305f\u81ea\u5206\u306eindex\n\u3000\u3068\u306a\u308a\u307e\u3059\u3002\n$data\u306e\u4f7f\u3044\u9053\u306f\u3001\u4f8b\u3048\u3070\u3000data-bind=\"foreach:['A','B','C']\"\u306a\u3069\u3001property\u3092\u6709\u3055\u306a\u3044primitive\u306a\u5024\u3092\u307e\u308f\u3059\u969b\u306a\u3069\u306b\u4f7f\u3063\u305f\u308a\u3057\u307e\u3059\u3002\n    \u3053\u306e\u8a18\u4e8b\u306f\u3001knockout.js Advent Calendar 2015\u306e\uff18\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002 \u5148\u306b\uff17\u65e5\u76ee\u306b\u76ee\u3092\u901a\u3059\u3053\u3068\u3092\u63a8\u5968\u3057\u3066\u3044\u307e\u3059\u3002\n    knockout , knockout-es5 , knockout.punches\u74b0\u5883\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\nknockout\u306b\u3082\u3001scope(context)\u306e\u6982\u5ff5\u304c\u3042\u308a\u307e\u3059\u3002\nscope\u304c\u5207\u308a\u66ff\u308f\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u306f\u3001``foreach``bind\u306a\u3069\u306e\u30a4\u30c6\u30ec\u30fc\u30bf\u3067\u306e\u5b50scope\u3084\u3001``with``bind\u3067\u306e\u660e\u793a\u7684\u306ascope\u5207\u63db\u3048\u3092\u884c\u3063\u305f\u5834\u5408\u3067\u3059\u3002\n\n\u4f8b\u3048\u3070\u3001[\u3053\u306e**\u30b5\u30f3\u30d7\u30eb**](http://jsfiddle.net/MKGaru/mtavwtbp/)\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nCountry(\u56fd)\u3068State(\u5dde/\u770c)\u3068City\uff08\u5e02\u30fb\u533a\uff09\u306f\u305d\u308c\u305e\u308c\u89aa\u5b50\u95a2\u4fc2\u306b\u3042\u308a\u307e\u3059\u3002\n\n```html:index.html\n<div data-bind=\"foreach:countries\">\n    <div class=\"country\">\n        <span>{{name}}</span>\n        {{#foreach: states}}\n        <div class=\"state\">\n            <span>{{name}}</span>\n            {{#foreach: cities}}\n            <div class=\"city\">\n                <span>{{name}}</span>\u306f\u3001{{$parents[1].name}}\u306e{{$parents[0].name}}\u306b\u3042\u308a\u307e\u3059\n            </div>\n            {{/foreach}}\n        </div>\n        {{/foreach}}\n    </div>\n</div>\n```\n\n``<div data-bind=\"foreach:list\">``\u306f\u3001div\u306e\u5185\u5074\u3092\u7e70\u308a\u8fd4\u3057\u3001\n``{{#foreach:list}} {{/foreach}}``\u3082\u307e\u305f\u3001\u3053\u306e\u30bf\u30b0\u306e\u5185\u5074\u3092\u7e70\u308a\u8fd4\u3057\u307e\u3059\u3002 \n\u3053\u308c\u306f\u3001``<!-- ko foreach:list--><!-- /ko -->``\u306e\u69cb\u6587\u7cd6\u8863\u3067\u3059\u3002\n[VirtualElement](http://knockoutjs.com/documentation/custom-bindings-for-virtual-elements.html)\u3068\u547c\u3070\u308c\u308b\u3082\u306e\u3067\u3001\u4f59\u8a08\u306a\u30bf\u30b0\u306e\u30cd\u30b9\u30c8\u3092\u907f\u3051\u308b\u305f\u3081\u306b\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n    (\u30b3\u30e1\u30f3\u30c8\u3092\u7528\u3044\u308b\u65b9\u6cd5\u3092\u4f7f\u3063\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u3059\u3053\u3057\u9577\u3044\u3067\u3059\u3057\u3001\u6700\u9069\u5316\u30c4\u30fc\u30eb\u306a\u3069\u3067\u30b3\u30e1\u30f3\u30c8\u304c\u6d88\u3055\u308c\u305f\u5834\u5408\u306b\u3001\u4e0d\u90fd\u5408\u304c\u751f\u3058\u308b\u306e\u3067\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002)\n\n\u30b5\u30f3\u30d7\u30eb\u3092\u773a\u3081\u3066\u307f\u308b\u3068\u3001\u306a\u3093\u3068\u306a\u304f\u308f\u304b\u308b\u901a\u308a\u3001\n\ndiv.country\u306e\u5185\u5074\u304c\u6307\u3059 name \u306f\u56fd\u540d\u3067\u3059\u3057\u3001\ndiv.state\u306e\u5185\u5074\u5074\u3059 name \u306f \u770c\u30fb\u5dde\u540d\u3067\u3059\u3002\ndiv.city\u3067\u306f name \u306f\u5e02\u30fb\u533a\u540d\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u5b50scope\u304b\u3089\u89aascope\u3092\u53c2\u7167\u3059\u308b\u306b\u306f\u3001 ``$parents``\u3092\u4f7f\u3044\u307e\u3059\u3002\n``$parents[0]``\u3068``$parent`` \u306f\u7b49\u4fa1\u3067\u3059\u3002\ncity\u306escope\u304b\u3089\u307f\u3066\u3001\n\u3000\\$parents[0]\u306fstate\u306escope\u3067\u3001\n\u3000\\$parents[1]\u306fcountry\u306escope\n\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n```js:script.js\nfunction Country(name){\n    this.states=[];\n    this.name = name;\n    ko.track(this);\n}\nfunction State(name){\n    this.cities=[];\n    this.name = name;\n    ko.track(this);\n}\nfunction City(name){\n    this.name = name;\n    ko.track(this);\n}\n\nfunction VM(){\n    var countries = this.countries = [];\n\tvar src = [\n        {\n            name:'jp',\n            state:[\n                {name:'\u6771\u4eac',city:[{name:'\u5343\u4ee3\u7530'},{name:'\u6e2f'},{name:' \u6e0b\u8c37'}]},\n                {name:'\u5927\u962a',city:[{name:'\u5927\u962a'},{name:'\u583a'},{name:'\u677e\u539f'}]},\n                {name:'\u5bae\u57ce',city:[{name:'\u4ed9\u53f0'},{name:'\u89d2\u7530'},{name:'\u540d\u53d6'}]}\n            ]\n        },\n        {\n            name:'us',\n            state:[\n                {name:'Texas',city:[{name:'SanAntonio'},{name:'Austin'},{name:' Huston'}]},\n                {name:'NewYork',city:[{name:'Rochester'},{name:'Buffalo'}]}\n            ]\n        }\n    ];\n    // mapping to model\n    src.forEach(function(c){\n        var country = new Country(c.name);\n        c.state.forEach(function(s){\n            var state = new State(s.name);\n            s.city.forEach(function(ci){\n            \tstate.cities.push(new City(ci.name));\n        \t});\n            country.states.push(state)\n        });\n        countries.push(country);\n    });\n    ko.track(this);\n}\nvar vm = new VM();\n\nko.punches.enableAll();\nko.applyBindings(vm);\n```\n\n------------------------------------------------------------------------\nscope\u306econtext\u306b\u306f\u3001\n ``$parent``\u3084``$parents[]``\u3084``$data``\u3000\u305d\u3057\u3066\u3001\u30a4\u30c6\u30ec\u30fc\u30bf\u306escope\u3067\u306f``$index``\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\n\u3000\u305d\u308c\u305e\u308c\u3001\n\u3000\u3000``$parent``\u306f\u3001\u81ea\u5206\u306e\u89aascope\u3001\n\u3000\u3000``$parents``\u306f\u3001\u81ea\u5206\u306e\u5148\u7956scope\u3001\n\u3000\u3000``$data``\u306f\u3001\u81ea\u5206\u81ea\u8eab\u306escope\u3001\n\u3000\u3000``$index``\u306f\u3001\u89aa\u304b\u3089\u898b\u305f\u81ea\u5206\u306eindex\n\u3000\u3068\u306a\u308a\u307e\u3059\u3002\n\n  \n  ``$data``\u306e\u4f7f\u3044\u9053\u306f\u3001\u4f8b\u3048\u3070\u3000``data-bind=\"foreach:['A','B','C']\"``\u306a\u3069\u3001property\u3092\u6709\u3055\u306a\u3044primitive\u306a\u5024\u3092\u307e\u308f\u3059\u969b\u306a\u3069\u306b\u4f7f\u3063\u305f\u308a\u3057\u307e\u3059\u3002\n", "tags": ["knockoutjs"]}