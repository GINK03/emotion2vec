{"context": "\n\n\u74b0\u5883\nruby 2.1.0\nRails 4.1.0\nransack 1.7.0\n\nRansack\u3067Shop\u30e2\u30c7\u30eb\u306b\u30cd\u30b9\u30c8\u3055\u308c\u305fItems\u3092\u691c\u7d22\u3057\u305f\u3044\n\u8907\u6570\u306eItems\u3092\u6301\u3064Shop\u30e2\u30c7\u30eb\u304c\u3042\u308a\u307e\u3059\u3002\ngemRansack\u3067shop/show.html.erb\u306bitems\u4e00\u89a7\u3092\u8868\u793a\u3057\u3001\u5e97\u8217\u3054\u3068\u306eitem\u691c\u7d22\u6a5f\u80fd\u3092\u4f5c\u308a\u305f\u3044\u3068\u8003\u3048\u3066\u3044\u307e\u3059\u3002\n\u4e00\u89a7\u8868\u793a\u307e\u3067\u306f\u51fa\u6765\u3066\u3044\u307e\u3059\u304c\u3001\u691c\u7d22\u6a5f\u80fd\u3068\u30bd\u30fc\u30c8\u6a5f\u80fd\u304c\u6a5f\u80fd\u3057\u306a\u3044\u72b6\u6cc1\u3067\u3059\u3002\n\u3069\u3053\u306b\u30df\u30b9\u304c\u3042\u308b\u306e\u304b\u6559\u3048\u3066\u9802\u3051\u307e\u305b\u3093\u3067\u3057\u3087\u3046\u304b\u3002\u3002\n\nroutes.rb\nRails.application.routes.draw do\n  resources :shops do\n    resources :items\n  end\nend\n\n\n\n\nmodels/shop.rb\nclass Shop < ActiveRecord::Base\n  belongs_to :user\n  has_many :items , dependent: :destroy\n\n\n\nshops_controller.rb\ndef show\n    @shop = Shop.find(params[:id])\n    @q    = @shop.items.ransack(params[:q])\n    @q.sorts = 'price asc' if @q.sorts.empty?\n    @shop.items = @q.result(distinct: true)\n\n    respond_with(@shop.items)\n  end\n\n\n\nshop/show.html.erb\n<h1>\u5e97\u8217\u8a73\u7d30</h1>\n\n<p>\n  <strong>Image:</strong>\n  <% if @shop.image? %>\n    <td><%= image_tag @shop.image_url(:thumb).to_s , :width => '300'%></td>\n   <% end %>\n</p>\n\n<p>\n  <strong>Name:</strong>\n  <%= @shop.name %>\n</p>\n\n<p>\n  <strong>City:</strong>\n  <%= @shop.city %>\n\n  <h1>\u5546\u54c1\u4e00\u89a7</h1>\n    <%= search_form_for @q, url: items_path(params[:shop_id]) do |f| %>\n    <%= f.label :name_or_content_cont, \"\u5546\u54c1\u540dor\u8aac\u660e\u6587\" %>\n    <%= f.search_field :name_or_content_cont %>\n    <%= f.submit '\u691c\u7d22'%>\n  <% end %>\n\n  <table>\n    <thead>\n      <tr>\n        <th>ShopName</th>\n        <th>ItemImage</th>\n        <th>ItemName</th>\n        <th><%= sort_link(@q,:item_price,'\u5024\u6bb5') %></th>\n        <th>Content</th>\n        <th colspan=\"3\"></th>\n      </tr>\n    </thead>\n      <%= render @shop.items %>\n  </table>\n\n\n##\u74b0\u5883\nruby 2.1.0\nRails 4.1.0\nransack 1.7.0\n\n##Ransack\u3067Shop\u30e2\u30c7\u30eb\u306b\u30cd\u30b9\u30c8\u3055\u308c\u305fItems\u3092\u691c\u7d22\u3057\u305f\u3044\n\u8907\u6570\u306eItems\u3092\u6301\u3064Shop\u30e2\u30c7\u30eb\u304c\u3042\u308a\u307e\u3059\u3002\ngem```Ransack```\u3067```shop/show.html.erb```\u306bitems\u4e00\u89a7\u3092\u8868\u793a\u3057\u3001\u5e97\u8217\u3054\u3068\u306eitem\u691c\u7d22\u6a5f\u80fd\u3092\u4f5c\u308a\u305f\u3044\u3068\u8003\u3048\u3066\u3044\u307e\u3059\u3002\n\u4e00\u89a7\u8868\u793a\u307e\u3067\u306f\u51fa\u6765\u3066\u3044\u307e\u3059\u304c\u3001\u691c\u7d22\u6a5f\u80fd\u3068\u30bd\u30fc\u30c8\u6a5f\u80fd\u304c\u6a5f\u80fd\u3057\u306a\u3044\u72b6\u6cc1\u3067\u3059\u3002\n\u3069\u3053\u306b\u30df\u30b9\u304c\u3042\u308b\u306e\u304b\u6559\u3048\u3066\u9802\u3051\u307e\u305b\u3093\u3067\u3057\u3087\u3046\u304b\u3002\u3002\n\n\n```routes.rb\nRails.application.routes.draw do\n  resources :shops do\n    resources :items\n  end\nend\n\n```\n\n```models/shop.rb\nclass Shop < ActiveRecord::Base\n  belongs_to :user\n  has_many :items , dependent: :destroy\n```\n\n```shops_controller.rb\ndef show\n    @shop = Shop.find(params[:id])\n    @q    = @shop.items.ransack(params[:q])\n    @q.sorts = 'price asc' if @q.sorts.empty?\n    @shop.items = @q.result(distinct: true)\n\n    respond_with(@shop.items)\n  end\n```\n\n\n```shop/show.html.erb\n<h1>\u5e97\u8217\u8a73\u7d30</h1>\n\n<p>\n  <strong>Image:</strong>\n  <% if @shop.image? %>\n    <td><%= image_tag @shop.image_url(:thumb).to_s , :width => '300'%></td>\n   <% end %>\n</p>\n\n<p>\n  <strong>Name:</strong>\n  <%= @shop.name %>\n</p>\n\n<p>\n  <strong>City:</strong>\n  <%= @shop.city %>\n\n  <h1>\u5546\u54c1\u4e00\u89a7</h1>\n    <%= search_form_for @q, url: items_path(params[:shop_id]) do |f| %>\n    <%= f.label :name_or_content_cont, \"\u5546\u54c1\u540dor\u8aac\u660e\u6587\" %>\n    <%= f.search_field :name_or_content_cont %>\n    <%= f.submit '\u691c\u7d22'%>\n  <% end %>\n\n  <table>\n    <thead>\n      <tr>\n        <th>ShopName</th>\n        <th>ItemImage</th>\n        <th>ItemName</th>\n        <th><%= sort_link(@q,:item_price,'\u5024\u6bb5') %></th>\n        <th>Content</th>\n        <th colspan=\"3\"></th>\n      </tr>\n    </thead>\n      <%= render @shop.items %>\n  </table>\n```\n", "tags": ["Ruby", "Rails", "ransack"]}