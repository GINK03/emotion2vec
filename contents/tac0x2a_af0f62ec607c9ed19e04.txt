{"context": " More than 1 year has passed since last update.\u3044\u308d\u3044\u308d\u304a\u3055\u308f\u308a\u4e2d\uff0e\u968f\u6642\u8ffd\u8a18\u3057\u307e\u3059\uff0e\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\n\u30bd\u30fc\u30b9\u306fGithub\u304b\u3089clone\u3057\u3066\u304d\u305f\uff0e\n$ git clone git@github.com:mruby/mruby.git\n$ cd mruby\n$ git log | head  -1\ncommit 4dac03cb2d53227bde2e5f50e70ca79596807e11\n\n$ mruby -v\nmruby 1.1.0 (2014-11-19)\n\n\nmruby\u306e\u30d3\u30eb\u30c9\n$ make\n\n\u307e\u305f\u306f\n$ ./minirake\n\n\nBuild-Log\n================================================                                                               \n      Config Name: host\n Output Directory: build/host\n         Binaries: mrbc\n    Included Gems:\n             mruby-sprintf - standard Kernel#sprintf method\n             mruby-print - standard print/puts/p\n             mruby-math - standard Math module\n             mruby-time - standard Time class\n             mruby-struct - standard Struct class\n             mruby-enum-ext - Enumerable module extension\n             mruby-string-ext - String class extension\n             mruby-numeric-ext - Numeric class extension\n             mruby-array-ext - Array class extension\n             mruby-hash-ext - Hash class extension\n             mruby-range-ext - Range class extension\n             mruby-proc-ext - Proc class extension\n             mruby-symbol-ext - Symbol class extension\n             mruby-random - Random class\n             mruby-object-ext - Object class extension\n             mruby-objectspace - ObjectSpace class\n             mruby-fiber - Fiber class\n             mruby-enumerator - Enumerator class\n             mruby-enum-lazy - Enumerable::Lazy class\n             mruby-toplevel-ext - toplevel object (main) methods extension\n             mruby-compiler - mruby compiler library\n             mruby-bin-mirb - mirb command\n               - Binaries: mirb\n             mruby-bin-mruby - mruby command\n               - Binaries: mruby\n             mruby-bin-strip - irep dump debug section remover command\n               - Binaries: mruby-strip\n             mruby-kernel-ext - Kernel module extension\n             mruby-bin-mrbc - mruby compiler executable\n================================================\n\n================================================\n      Config Name: host-debug\n Output Directory: build/host-debug\n    Included Gems:\n             mruby-sprintf - standard Kernel#sprintf method\n             mruby-print - standard print/puts/p\n             mruby-math - standard Math module\n             mruby-time - standard Time class\n             mruby-struct - standard Struct class\n             mruby-enum-ext - Enumerable module extension\n             mruby-string-ext - String class extension\n             mruby-numeric-ext - Numeric class extension\n             mruby-array-ext - Array class extension\n             mruby-hash-ext - Hash class extension\n             mruby-range-ext - Range class extension\n             mruby-proc-ext - Proc class extension\n             mruby-symbol-ext - Symbol class extension\n             mruby-random - Random class\n             mruby-object-ext - Object class extension\n             mruby-objectspace - ObjectSpace class\n             mruby-fiber - Fiber class\n             mruby-enumerator - Enumerator class\n             mruby-enum-lazy - Enumerable::Lazy class\n             mruby-toplevel-ext - toplevel object (main) methods extension\n             mruby-compiler - mruby compiler library\n             mruby-bin-mirb - mirb command\n               - Binaries: mirb\n             mruby-bin-mruby - mruby command\n               - Binaries: mruby\n             mruby-bin-strip - irep dump debug section remover command\n               - Binaries: mruby-strip\n             mruby-kernel-ext - Kernel module extension\n             mruby-eval - standard Kernel#eval method\n             mruby-bin-debugger - mruby debuggeer command\n               - Binaries: mrdb\n================================================\n\n\nbuild_config.rb \u3067\u5b9a\u7fa9\u3055\u308c\u305fMRuby::Build\u306b\u5bfe\u5fdc\u3059\u308b\u30d3\u30eb\u30c9\u304c\u5b9f\u884c\u3055\u308c\u308b\uff0e\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u3001MRuby::Build.new\u3068MRuby::Build.new('host-debug') \u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\n\u305d\u308c\u305e\u308c\u30d3\u30eb\u30c9\u3055\u308c\u3066\u3044\u308b\uff0e\n\u30d3\u30eb\u30c9\u304c\u7d42\u308f\u308b\u3068 bin/\u306e\u4e0b\u306b\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u304c\u3001build/\u306e\u4e0b\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u4f5c\u6210\u3055\u308c\u308b\uff0e\n\nbin\u306e\u4e2d\u8eab\n$ ls -l bin\ntotal 7736\n-rwxr-xr-x  1 tac  staff   850K  7 13 01:33 mirb*\n-rwxr-xr-x  1 tac  staff   632K  7 13 01:33 mrbc*\n-rwxr-xr-x  1 tac  staff   888K  7 13 01:33 mrdb*\n-rwxr-xr-x  1 tac  staff   845K  7 13 01:33 mruby*\n-rwxr-xr-x  1 tac  staff   644K  7 13 01:33 mruby-strip*\n\n\nmirb\nirb \u306b\u76f8\u5f53\uff0e\u5b9f\u969b\u306f\u5165\u529b\u3092\u90fd\u5ea6\u30d0\u30a4\u30c8\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u5b9f\u884c\u3057\u3066\u308b\u3089\u3057\u3044\n\nmrbc\nRuby\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30d0\u30a4\u30c8\u30b3\u30fc\u30c9\u306b\u3059\u308b\u30b3\u30f3\u30d1\u30a4\u30e9\uff0eRite\u5f62\u5f0f\u307e\u305f\u306fC\u5f62\u5f0f(\u914d\u5217)\u3092\u51fa\u529b\u3059\u308b\n\nhello.rb\n\n# -*- coding: utf-8 -*-\n# Author::    TAC (tac@tac42.net)\n\nputs \"Hello,MRuby!!\"\n\n\n\nRite\u5f62\u5f0f\n$ mrbc --verbose hello.rb\n00005 NODE_SCOPE:\n00005   NODE_BEGIN:\n00005     NODE_CALL:\n00005       NODE_SELF\n00005       method='puts' (218)\n00005       args:\n00005         NODE_STR \"Hello,MRuby!!\" len 13\nirep 0x7f995140d7f0 nregs=4 nlocals=1 pools=1 syms=1 reps=0\nfile: hello.rb\n    5 000 OP_LOADSELF   R1\n    5 001 OP_STRING     R2      L(0)    ; \"Hello,MRuby!!\"\n    5 002 OP_SEND       R1      :puts   1\n    5 003 OP_STOP\n\nRite\u5f62\u5f0f\u306e hoge.mrb \u304c\u3067\u304d\u3066\u308b\uff0e\n$ od hello.mrb\n0000000    044522  042524  030060  031460  026450  000000  063400  040515\n0000020    055124  030060  030060  051111  050105  000000  044400  030060\n0000040    030060  000000  040400  000400  002000  000000  000000  002000\n0000060    100000  003000  000001  036400  100000  120000  000000  045000\n0000100    000000  000400  000000  044015  066145  067554  046454  072522\n0000120    074542  020441  000000  000400  002000  072560  071564  042400\n0000140    042116  000000  000000  000010\n0000147\n\n\nC\u5f62\u5f0f(\u914d\u5217)\nhello.rb \u3092\u30b7\u30f3\u30dc\u30ebhello\u306e C\u914d\u5217\u306b\u3059\u308b\uff0e\n$ mrbc -Bhello hello.rb\n\nhello.c \u30d5\u30a1\u30a4\u30eb\u304c\u3067\u304d\u3066\u308b\uff0e\n\nhoge.c\n/* dumped in little endian order.\n   use `mrbc -E` option for big endian CPU. */\n#include <stdint.h>\nconst uint8_t\n#if defined __GNUC__\n__attribute__((aligned(4)))\n#elif defined _MSC_VER\n__declspec(align(4))\n#endif\nhello[] = {\n0x45,0x54,0x49,0x52,0x30,0x30,0x30,0x33,0x5e,0x45,0x00,0x00,0x00,0x67,0x4d,0x41,\n0x54,0x5a,0x30,0x30,0x30,0x30,0x49,0x52,0x45,0x50,0x00,0x00,0x00,0x49,0x30,0x30,\n0x30,0x30,0x00,0x00,0x00,0x41,0x00,0x01,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x04,\n0x06,0x00,0x80,0x00,0x3d,0x00,0x00,0x01,0xa0,0x00,0x80,0x00,0x4a,0x00,0x00,0x00,\n0x00,0x00,0x00,0x01,0x00,0x00,0x0d,0x48,0x65,0x6c,0x6c,0x6f,0x2c,0x4d,0x52,0x75,\n0x62,0x79,0x21,0x21,0x00,0x00,0x00,0x01,0x00,0x04,0x70,0x75,0x74,0x73,0x00,0x45,\n0x4e,0x44,0x00,0x00,0x00,0x00,0x08,\n};\n\n\n\u3053\u308c\u3092\u30b3\u30f3\u30d1\u30a4\u30eb,\u30ea\u30f3\u30af\u3057\u3066\u7d44\u307f\u8fbc\u3093\u3067\u3001\n\nC\u306e\u30b3\u30fc\u30c9\nextern const uint8_t hello[];\nmrb_load_irep(mrb, hello);\n\n\n\u3068\u304b\u3063\u3066\u5b9f\u884c\u3059\u308b\uff0e\u8a73\u7d30\u306f\u5f8c\u8ff0\uff0e\n\nmrdb\n\u30c7\u30d0\u30c3\u30ac\uff0eruby -r debug \u3068\u306f\u82e5\u5e72\u52d5\u304d\u304c\u9055\u3046\uff0e\n\nmruby\nruby \u306b\u76f8\u5f53\uff0e\u30aa\u30d7\u30b7\u30e7\u30f3\u306a\u3057\u3067Ruby\u30b9\u30af\u30ea\u30d7\u30c8\u3001\u307e\u305f\u306f-b\u30aa\u30d7\u30b7\u30e7\u30f3\u3067Rite\u5f62\u5f0f\u306e\u30d0\u30a4\u30ca\u30ea\u3092\u5b9f\u884c\u3059\u308b\uff0e\n# ex) Rite\u5f62\u5f0f\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u5b9f\u884c\u3059\u308b\n$ mruby -b hoge.mrb\n\n\nmruby-strip\n$ ./mruby-strip\nno files to strip\nUsage: ./mruby-strip [switches] irepfiles\nswitches:\n  -l, --lvar   remove LVAR section too.\n\n\n\u30af\u30ed\u30b9\u30d3\u30eb\u30c9\nbuild_config.rb \u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\uff0eMRuby::Build.new('hoge')\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u30d3\u30eb\u30c9\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u7570\u306a\u308b\u30d0\u30a4\u30ca\u30ea\u3092\u30d3\u30eb\u30c9\u3067\u304d\u308b\uff0e\n\u3053\u3053\u306b\u3061\u3087\u3063\u3068\u8ffd\u52a0\u3059\u308b\u3060\u3051\u3067\u30af\u30ed\u30b9\u30d3\u30eb\u30c9\u3067\u304d\u308b\uff0e\u3059\u3054\u3044\uff0e\n\nbuild_config.rb\n\n\u3053\u3053\u3092\u8aad\u3080\uff0e\n\u9014\u4e2d\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u524a\u308b\u3068\u3053\u3093\u306a\u304b\u3093\u3058\uff0e\n\nbuild_config.rb\nMRuby::Build.new do |conf|\n  # load specific toolchain settings\n\n  # Gets set by the VS command prompts.\n  if ENV['VisualStudioVersion'] || ENV['VSINSTALLDIR']\n    toolchain :visualcpp\n  else\n    toolchain :gcc\n  end\n\n  enable_debug\n\n    conf.gembox 'default'\nend\n\n\nMRuby::Build.new('host-debug') do |conf|\n  # load specific toolchain settings\n\n  # Gets set by the VS command prompts.\n  if ENV['VisualStudioVersion'] || ENV['VSINSTALLDIR']\n    toolchain :visualcpp\n  else\n    toolchain :gcc\n  end\n\n  enable_debug\n\n  # include the default GEMs\n  conf.gembox 'default'\n\n  # C compiler settings\n  conf.cc.defines = %w(ENABLE_DEBUG)\n\n  # Generate mruby debugger command (require mruby-eval)\n  conf.gem :core => \"mruby-bin-debugger\"\n\n  # bintest\n  # conf.enable_bintest\nend\n\n\n\nC\u3078\u306e\u7d44\u307f\u8fbc\u307f\nmrbc -B \u3067 \u51fa\u529b\u3057\u305fC\u914d\u5217\u3092\u7d44\u307f\u8fbc\u3093\u3067\u307f\u308b\uff0e\n\n\nmruby/include \u3092 include \u3068\u3057\u3066\u30b3\u30d4\u30fc\u3057\u3066\u304f\u308b\n\nmruby/build/{target}/lib/ \u3092 lib \u3068\u3057\u3066\u30b3\u30d4\u30fc\u3057\u3066\u304f\u308b\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u66f8\u304f\n\n\nmain.c\n#include<stdio.h>\n\n#include \"mruby.h\"\n#include \"mruby/compile.h\"\n#include \"mruby/irep.h\"\n\nextern const uint8_t hoge[];\n\nint main(int argc, char *argv[]){\n\n  mrb_state* mrb;\n  mrb = mrb_open();\n\n  mrb_load_string(mrb,\"puts 'Hello,World!'\");\n  mrb_load_irep(mrb, hoge);\n\n  mrb_close(mrb);\n\n  return 0;\n}\n\n\n\u30d3\u30eb\u30c9\u3057\u3066\u5b9f\u884c\uff0e\n$ gcc -Iinclude -o main main.c hoge.c lib/libmruby.a\n$ ./main\nHello,World!\nHello,MRuby!!\n\n\n\u53c2\u8003\u6587\u732e\u306a\u3069\u306a\u3069\n\nhttps://github.com/mruby/mruby\nhttp://www.kumikomi.net/archives/2012/12/ep17mrb3.php\nhttp://harasou.github.io/2015/05/02/mruby-%E3%82%92%E3%81%95%E3%82%8F%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F/\nMacOSX\u4e0a\u3067Linux\u3068Windows\u3068OSX\u3067\u52d5\u304fmruby\u30d0\u30a4\u30ca\u30ea\u3092\u7c21\u5358\u306b\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u304d\u308bmrbgem\u4f5c\u3063\u305f\nhttp://hb.matsumoto-r.jp/entry/2015/05/02/232220\n\n\n\n\u3042\u3068\u3067\u8abf\u3079\u308b\n\nmrbc \u306e C\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u5ec3\u6b62\u3055\u308c\u305f\uff1f\uff1f\nRite\u5f62\u5f0f\u306b\u3064\u3044\u3066\nlibmruby.a \u3068\u306f\uff1f\nMrbgems \u3068\u306f\uff1f\n\n\u3044\u308d\u3044\u308d\u304a\u3055\u308f\u308a\u4e2d\uff0e\u968f\u6642\u8ffd\u8a18\u3057\u307e\u3059\uff0e\n\n# \u30d0\u30fc\u30b8\u30e7\u30f3\n\u30bd\u30fc\u30b9\u306fGithub\u304b\u3089clone\u3057\u3066\u304d\u305f\uff0e\n\n```bash\n$ git clone git@github.com:mruby/mruby.git\n$ cd mruby\n$ git log | head  -1\ncommit 4dac03cb2d53227bde2e5f50e70ca79596807e11\n```\n\n```bash\n$ mruby -v\nmruby 1.1.0 (2014-11-19)\n```\n\n# mruby\u306e\u30d3\u30eb\u30c9\n\n```bash:\n$ make\n```\n\n\u307e\u305f\u306f\n\n```bash:\n$ ./minirake\n```\n\n\n```text:Build-Log\n================================================                                                               \n      Config Name: host\n Output Directory: build/host\n         Binaries: mrbc\n    Included Gems:\n             mruby-sprintf - standard Kernel#sprintf method\n             mruby-print - standard print/puts/p\n             mruby-math - standard Math module\n             mruby-time - standard Time class\n             mruby-struct - standard Struct class\n             mruby-enum-ext - Enumerable module extension\n             mruby-string-ext - String class extension\n             mruby-numeric-ext - Numeric class extension\n             mruby-array-ext - Array class extension\n             mruby-hash-ext - Hash class extension\n             mruby-range-ext - Range class extension\n             mruby-proc-ext - Proc class extension\n             mruby-symbol-ext - Symbol class extension\n             mruby-random - Random class\n             mruby-object-ext - Object class extension\n             mruby-objectspace - ObjectSpace class\n             mruby-fiber - Fiber class\n             mruby-enumerator - Enumerator class\n             mruby-enum-lazy - Enumerable::Lazy class\n             mruby-toplevel-ext - toplevel object (main) methods extension\n             mruby-compiler - mruby compiler library\n             mruby-bin-mirb - mirb command\n               - Binaries: mirb\n             mruby-bin-mruby - mruby command\n               - Binaries: mruby\n             mruby-bin-strip - irep dump debug section remover command\n               - Binaries: mruby-strip\n             mruby-kernel-ext - Kernel module extension\n             mruby-bin-mrbc - mruby compiler executable\n================================================\n\n================================================\n      Config Name: host-debug\n Output Directory: build/host-debug\n    Included Gems:\n             mruby-sprintf - standard Kernel#sprintf method\n             mruby-print - standard print/puts/p\n             mruby-math - standard Math module\n             mruby-time - standard Time class\n             mruby-struct - standard Struct class\n             mruby-enum-ext - Enumerable module extension\n             mruby-string-ext - String class extension\n             mruby-numeric-ext - Numeric class extension\n             mruby-array-ext - Array class extension\n             mruby-hash-ext - Hash class extension\n             mruby-range-ext - Range class extension\n             mruby-proc-ext - Proc class extension\n             mruby-symbol-ext - Symbol class extension\n             mruby-random - Random class\n             mruby-object-ext - Object class extension\n             mruby-objectspace - ObjectSpace class\n             mruby-fiber - Fiber class\n             mruby-enumerator - Enumerator class\n             mruby-enum-lazy - Enumerable::Lazy class\n             mruby-toplevel-ext - toplevel object (main) methods extension\n             mruby-compiler - mruby compiler library\n             mruby-bin-mirb - mirb command\n               - Binaries: mirb\n             mruby-bin-mruby - mruby command\n               - Binaries: mruby\n             mruby-bin-strip - irep dump debug section remover command\n               - Binaries: mruby-strip\n             mruby-kernel-ext - Kernel module extension\n             mruby-eval - standard Kernel#eval method\n             mruby-bin-debugger - mruby debuggeer command\n               - Binaries: mrdb\n================================================\n```\n\n`build_config.rb` \u3067\u5b9a\u7fa9\u3055\u308c\u305f`MRuby::Build`\u306b\u5bfe\u5fdc\u3059\u308b\u30d3\u30eb\u30c9\u304c\u5b9f\u884c\u3055\u308c\u308b\uff0e\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u3001`MRuby::Build.new`\u3068`MRuby::Build.new('host-debug')` \u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\n\u305d\u308c\u305e\u308c\u30d3\u30eb\u30c9\u3055\u308c\u3066\u3044\u308b\uff0e\n\n\u30d3\u30eb\u30c9\u304c\u7d42\u308f\u308b\u3068 `bin/`\u306e\u4e0b\u306b\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u304c\u3001`build/`\u306e\u4e0b\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u4f5c\u6210\u3055\u308c\u308b\uff0e\n\n\n# bin\u306e\u4e2d\u8eab\n\n```bash:\n$ ls -l bin\ntotal 7736\n-rwxr-xr-x  1 tac  staff   850K  7 13 01:33 mirb*\n-rwxr-xr-x  1 tac  staff   632K  7 13 01:33 mrbc*\n-rwxr-xr-x  1 tac  staff   888K  7 13 01:33 mrdb*\n-rwxr-xr-x  1 tac  staff   845K  7 13 01:33 mruby*\n-rwxr-xr-x  1 tac  staff   644K  7 13 01:33 mruby-strip*\n```\n\n## mirb\n`irb` \u306b\u76f8\u5f53\uff0e\u5b9f\u969b\u306f\u5165\u529b\u3092\u90fd\u5ea6\u30d0\u30a4\u30c8\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u5b9f\u884c\u3057\u3066\u308b\u3089\u3057\u3044\n\n## mrbc\nRuby\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30d0\u30a4\u30c8\u30b3\u30fc\u30c9\u306b\u3059\u308b\u30b3\u30f3\u30d1\u30a4\u30e9\uff0eRite\u5f62\u5f0f\u307e\u305f\u306fC\u5f62\u5f0f(\u914d\u5217)\u3092\u51fa\u529b\u3059\u308b\n\n```ruby:hello.rb\n\n# -*- coding: utf-8 -*-\n# Author::    TAC (tac@tac42.net)\n\nputs \"Hello,MRuby!!\"\n```\n\n#### Rite\u5f62\u5f0f\n\n```bash:\n$ mrbc --verbose hello.rb\n00005 NODE_SCOPE:\n00005   NODE_BEGIN:\n00005     NODE_CALL:\n00005       NODE_SELF\n00005       method='puts' (218)\n00005       args:\n00005         NODE_STR \"Hello,MRuby!!\" len 13\nirep 0x7f995140d7f0 nregs=4 nlocals=1 pools=1 syms=1 reps=0\nfile: hello.rb\n    5 000 OP_LOADSELF   R1\n    5 001 OP_STRING     R2      L(0)    ; \"Hello,MRuby!!\"\n    5 002 OP_SEND       R1      :puts   1\n    5 003 OP_STOP\n```\nRite\u5f62\u5f0f\u306e `hoge.mrb` \u304c\u3067\u304d\u3066\u308b\uff0e\n\n\n```bash:\n$ od hello.mrb\n0000000    044522  042524  030060  031460  026450  000000  063400  040515\n0000020    055124  030060  030060  051111  050105  000000  044400  030060\n0000040    030060  000000  040400  000400  002000  000000  000000  002000\n0000060    100000  003000  000001  036400  100000  120000  000000  045000\n0000100    000000  000400  000000  044015  066145  067554  046454  072522\n0000120    074542  020441  000000  000400  002000  072560  071564  042400\n0000140    042116  000000  000000  000010\n0000147\n```\n\n#### C\u5f62\u5f0f(\u914d\u5217)\n\n`hello.rb` \u3092\u30b7\u30f3\u30dc\u30eb`hello`\u306e C\u914d\u5217\u306b\u3059\u308b\uff0e\n\n```bash:\n$ mrbc -Bhello hello.rb\n```\n\n`hello.c` \u30d5\u30a1\u30a4\u30eb\u304c\u3067\u304d\u3066\u308b\uff0e\n\n```c:hoge.c\n/* dumped in little endian order.\n   use `mrbc -E` option for big endian CPU. */\n#include <stdint.h>\nconst uint8_t\n#if defined __GNUC__\n__attribute__((aligned(4)))\n#elif defined _MSC_VER\n__declspec(align(4))\n#endif\nhello[] = {\n0x45,0x54,0x49,0x52,0x30,0x30,0x30,0x33,0x5e,0x45,0x00,0x00,0x00,0x67,0x4d,0x41,\n0x54,0x5a,0x30,0x30,0x30,0x30,0x49,0x52,0x45,0x50,0x00,0x00,0x00,0x49,0x30,0x30,\n0x30,0x30,0x00,0x00,0x00,0x41,0x00,0x01,0x00,0x04,0x00,0x00,0x00,0x00,0x00,0x04,\n0x06,0x00,0x80,0x00,0x3d,0x00,0x00,0x01,0xa0,0x00,0x80,0x00,0x4a,0x00,0x00,0x00,\n0x00,0x00,0x00,0x01,0x00,0x00,0x0d,0x48,0x65,0x6c,0x6c,0x6f,0x2c,0x4d,0x52,0x75,\n0x62,0x79,0x21,0x21,0x00,0x00,0x00,0x01,0x00,0x04,0x70,0x75,0x74,0x73,0x00,0x45,\n0x4e,0x44,0x00,0x00,0x00,0x00,0x08,\n};\n```\n\n\u3053\u308c\u3092\u30b3\u30f3\u30d1\u30a4\u30eb,\u30ea\u30f3\u30af\u3057\u3066\u7d44\u307f\u8fbc\u3093\u3067\u3001\n\n```c:C\u306e\u30b3\u30fc\u30c9\nextern const uint8_t hello[];\nmrb_load_irep(mrb, hello);\n```\n\n\u3068\u304b\u3063\u3066\u5b9f\u884c\u3059\u308b\uff0e\u8a73\u7d30\u306f\u5f8c\u8ff0\uff0e\n\n## mrdb\n\u30c7\u30d0\u30c3\u30ac\uff0eruby -r debug \u3068\u306f\u82e5\u5e72\u52d5\u304d\u304c\u9055\u3046\uff0e\n\n## mruby\n`ruby` \u306b\u76f8\u5f53\uff0e\u30aa\u30d7\u30b7\u30e7\u30f3\u306a\u3057\u3067Ruby\u30b9\u30af\u30ea\u30d7\u30c8\u3001\u307e\u305f\u306f`-b`\u30aa\u30d7\u30b7\u30e7\u30f3\u3067Rite\u5f62\u5f0f\u306e\u30d0\u30a4\u30ca\u30ea\u3092\u5b9f\u884c\u3059\u308b\uff0e\n\n\n```bash:\n# ex) Rite\u5f62\u5f0f\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u5b9f\u884c\u3059\u308b\n$ mruby -b hoge.mrb\n```\n\n## mruby-strip\n\n```bash:\n$ ./mruby-strip\nno files to strip\nUsage: ./mruby-strip [switches] irepfiles\nswitches:\n  -l, --lvar   remove LVAR section too.\n```\n\n\n\n# \u30af\u30ed\u30b9\u30d3\u30eb\u30c9\n`build_config.rb` \u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\uff0e`MRuby::Build.new('hoge')`\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u30d3\u30eb\u30c9\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u7570\u306a\u308b\u30d0\u30a4\u30ca\u30ea\u3092\u30d3\u30eb\u30c9\u3067\u304d\u308b\uff0e\n\u3053\u3053\u306b\u3061\u3087\u3063\u3068\u8ffd\u52a0\u3059\u308b\u3060\u3051\u3067\u30af\u30ed\u30b9\u30d3\u30eb\u30c9\u3067\u304d\u308b\uff0e\u3059\u3054\u3044\uff0e\n\n\n\n## `build_config.rb`\n[\u3053\u3053](https://github.com/mruby/mruby/tree/master/doc/compile)\u3092\u8aad\u3080\uff0e\n\n\u9014\u4e2d\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u524a\u308b\u3068\u3053\u3093\u306a\u304b\u3093\u3058\uff0e\n\n```ruby:build_config.rb\nMRuby::Build.new do |conf|\n  # load specific toolchain settings\n\n  # Gets set by the VS command prompts.\n  if ENV['VisualStudioVersion'] || ENV['VSINSTALLDIR']\n    toolchain :visualcpp\n  else\n    toolchain :gcc\n  end\n\n  enable_debug\n\n    conf.gembox 'default'\nend\n\n\nMRuby::Build.new('host-debug') do |conf|\n  # load specific toolchain settings\n\n  # Gets set by the VS command prompts.\n  if ENV['VisualStudioVersion'] || ENV['VSINSTALLDIR']\n    toolchain :visualcpp\n  else\n    toolchain :gcc\n  end\n\n  enable_debug\n\n  # include the default GEMs\n  conf.gembox 'default'\n\n  # C compiler settings\n  conf.cc.defines = %w(ENABLE_DEBUG)\n\n  # Generate mruby debugger command (require mruby-eval)\n  conf.gem :core => \"mruby-bin-debugger\"\n\n  # bintest\n  # conf.enable_bintest\nend\n```\n\n\n\n\n# C\u3078\u306e\u7d44\u307f\u8fbc\u307f\n`mrbc -B` \u3067 \u51fa\u529b\u3057\u305fC\u914d\u5217\u3092\u7d44\u307f\u8fbc\u3093\u3067\u307f\u308b\uff0e\n\n1. `mruby/include` \u3092 `include` \u3068\u3057\u3066\u30b3\u30d4\u30fc\u3057\u3066\u304f\u308b\n1. `mruby/build/{target}/lib/` \u3092 `lib` \u3068\u3057\u3066\u30b3\u30d4\u30fc\u3057\u3066\u304f\u308b\n1. \u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u66f8\u304f\n\n```c:main.c\n#include<stdio.h>\n\n#include \"mruby.h\"\n#include \"mruby/compile.h\"\n#include \"mruby/irep.h\"\n\nextern const uint8_t hoge[];\n\nint main(int argc, char *argv[]){\n\n  mrb_state* mrb;\n  mrb = mrb_open();\n\n  mrb_load_string(mrb,\"puts 'Hello,World!'\");\n  mrb_load_irep(mrb, hoge);\n\n  mrb_close(mrb);\n\n  return 0;\n}\n```\n\n\u30d3\u30eb\u30c9\u3057\u3066\u5b9f\u884c\uff0e\n\n```bash:\n$ gcc -Iinclude -o main main.c hoge.c lib/libmruby.a\n$ ./main\nHello,World!\nHello,MRuby!!\n```\n\n# \u53c2\u8003\u6587\u732e\u306a\u3069\u306a\u3069\n\n+ https://github.com/mruby/mruby\n+ http://www.kumikomi.net/archives/2012/12/ep17mrb3.php\n+ http://harasou.github.io/2015/05/02/mruby-%E3%82%92%E3%81%95%E3%82%8F%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F/\n+ MacOSX\u4e0a\u3067Linux\u3068Windows\u3068OSX\u3067\u52d5\u304fmruby\u30d0\u30a4\u30ca\u30ea\u3092\u7c21\u5358\u306b\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u304d\u308bmrbgem\u4f5c\u3063\u305f\nhttp://hb.matsumoto-r.jp/entry/2015/05/02/232220\n\n## \u3042\u3068\u3067\u8abf\u3079\u308b\n\n+ mrbc \u306e C\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u5ec3\u6b62\u3055\u308c\u305f\uff1f\uff1f\n+ Rite\u5f62\u5f0f\u306b\u3064\u3044\u3066\n+ libmruby.a \u3068\u306f\uff1f\n+ Mrbgems \u3068\u306f\uff1f\n", "tags": ["mruby", "Ruby"]}