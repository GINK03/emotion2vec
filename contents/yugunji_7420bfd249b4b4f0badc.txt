{"context": " More than 1 year has passed since last update.\n\n\u524d\u63d0\n\nMacOS\u300010.10 Yosemite\u3000\uff0810.9\u4ee5\u524d\u306f\u5bfe\u8c61\u5916\uff09\nelsaticsearch\u3092launchctl\u3067\u8d77\u52d5\u3057\u3066\u3044\u308b\n\n\n\u4e8b\u8c61\nelasticsearch\u304ctoo many open files\u3068\u3044\u3046\u30a8\u30e9\u30fc\u3092\u5410\u3044\u3066\u3046\u3093\u3068\u3082\u3059\u3093\u3068\u3082\u8a00\u308f\u306a\u304f\u306a\u308b\u3053\u3068\u304c\u3042\u308b\u3002\n\n\u539f\u56e0\n\u30b7\u30b9\u30c6\u30e0\u4e0a\u306emaxfiles\u306e\u6570\u304celasticsearch\u304c\u63a8\u5968\u3059\u308b32k\u301c64k\u307e\u3067\u306e\u5024\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3002\n\n\u5bfe\u5fdc\n\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3002\n/Library/LaunchDaemons/limit.maxfiles.plist \n\u5185\u5bb9\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3002\nxml:limit.maxfiles.plist\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">\n  <plist version=\"1.0\">\n    <dict>\n      <key>Label</key>\n        <string>limit.maxfiles</string>\n      <key>ProgramArguments</key>\n        <array>\n          <string>launchctl</string>\n          <string>limit</string>\n          <string>maxfiles</string>\n          <string>65536</string>\n          <string>65536</string>\n        </array>\n      <key>RunAtLoad</key>\n        <true/>\n      <key>ServiceIPC</key>\n        <false/>\n    </dict>\n  </plist>\n\nmac\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\nelasticsearch\u306eAPI\u3067open_file_descriptors\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n$ curl -s http://127.0.0.1:9200/_nodes/stats/process?pretty\n\u3042\u3068\u306felasticsearch\u306e\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u3092\u898b\u306a\u304c\u3089\u3061\u3083\u3093\u3068\u51e6\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u308c\u3070OK\u306a\u306f\u305a\u3067\u3059\u3002\n# \u524d\u63d0\n1. MacOS\u300010.10 Yosemite\u3000\uff0810.9\u4ee5\u524d\u306f\u5bfe\u8c61\u5916\uff09\n2. elsaticsearch\u3092launchctl\u3067\u8d77\u52d5\u3057\u3066\u3044\u308b\n\n# \u4e8b\u8c61\nelasticsearch\u304ctoo many open files\u3068\u3044\u3046\u30a8\u30e9\u30fc\u3092\u5410\u3044\u3066\u3046\u3093\u3068\u3082\u3059\u3093\u3068\u3082\u8a00\u308f\u306a\u304f\u306a\u308b\u3053\u3068\u304c\u3042\u308b\u3002\n\n# \u539f\u56e0\n\u30b7\u30b9\u30c6\u30e0\u4e0a\u306emaxfiles\u306e\u6570\u304celasticsearch\u304c\u63a8\u5968\u3059\u308b32k\u301c64k\u307e\u3067\u306e\u5024\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3002\n\n# \u5bfe\u5fdc\n\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3002\n/Library/LaunchDaemons/limit.maxfiles.plist \n\n\u5185\u5bb9\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3002\n```xml:limit.maxfiles.plist\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">\n  <plist version=\"1.0\">\n    <dict>\n      <key>Label</key>\n        <string>limit.maxfiles</string>\n      <key>ProgramArguments</key>\n        <array>\n          <string>launchctl</string>\n          <string>limit</string>\n          <string>maxfiles</string>\n          <string>65536</string>\n          <string>65536</string>\n        </array>\n      <key>RunAtLoad</key>\n        <true/>\n      <key>ServiceIPC</key>\n        <false/>\n    </dict>\n  </plist>\n```\nmac\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\n\nelasticsearch\u306eAPI\u3067open_file_descriptors\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n`$ curl -s http://127.0.0.1:9200/_nodes/stats/process?pretty`\n\n\u3042\u3068\u306felasticsearch\u306e\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u3092\u898b\u306a\u304c\u3089\u3061\u3083\u3093\u3068\u51e6\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u308c\u3070OK\u306a\u306f\u305a\u3067\u3059\u3002\n", "tags": ["Elasticsearch", "Yosemite", "Mac", "fluentd"]}