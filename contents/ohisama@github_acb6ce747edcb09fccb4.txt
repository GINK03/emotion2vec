{"context": "\n\n\u6982\u8981\narduino leonardo\u306bps/2 \u30ad\u30fc\u30dc\u30fc\u30c9\u3092\u3064\u306a\u3044\u3067\u3001usb\u30ad\u30fc\u30dc\u30fc\u30c9\u3092\u30a8\u30df\u30e5\u30ec\u30fc\u30c8\u3057\u3066\u307f\u305f\u3002\n\n\u5199\u771f\n\n\n\u56de\u8def\u56f3\n\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n#include \"ps2.h\"\n\n#define PS2_TAB             9\n#define PS2_ENTER           13\n#define PS2_BACKSPACE       127\n#define PS2_ESC             27\n#define PS2_INSERT          0\n#define PS2_DELETE          127\n#define PS2_HOME            0\n#define PS2_END             0\n#define PS2_SCROLL          0\nPS2 kbd(6, 5);\nchar key[140] = {\n    0, 0, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, PS2_TAB, '`', 0,\n    0, 0, 0, 0, 0, 'q', '1', 0,\n    0, 0, 'z', 's', 'a', 'w', '2', 0,\n    0, 'c', 'x', 'd', 'e', '4', '3', 0,\n    0, ' ', 'v', 'f', 't', 'r', '5', 0,\n    0, 'n', 'b', 'h', 'g', 'y', '6', 0,\n    0, 0, 'm', 'j', 'u', '7', '8', 0,\n    0, ',', 'k', 'i', 'o', '0', '9', 0,\n    0, '.', '/', 'l', ';', 'p', '-', 0,\n    0, 0, '\\'', 0, '[', '=', 0, 0,\n    0, 0, PS2_ENTER, ']', 0, '\\\\', 0, 0,\n    0, 0, 0, 0, 0, 0, PS2_BACKSPACE, 0,\n    0, '1', 0, '4', '7', 0, 0, 0,\n    '0', '.', '2', '5', '6', '8', PS2_ESC, 0,\n    0, '+', '3', '-', '*', '9', PS2_SCROLL, 0,\n    0, 0, 0, 0\n};\nvoid kbd_init()\n{\n    char ack;\n    kbd.write(0xff);\n    ack = kbd.read();\n    ack = kbd.read();\n}\nvoid setup()\n{\n    Serial.begin(115200);\n    while (!Serial);\n    Serial.println(\"Start\");\n    kbd_init();\n    Keyboard.begin();\n    Serial.println(\"OK\");\n}\nvoid loop()\n{\n    unsigned char code;\n    for ( ; ; )\n    {\n        code = kbd.read();\n        code = key[code];\n        Serial.println(code, HEX);\n        Keyboard.print((char) code);\n        code = kbd.read();\n        code = kbd.read();\n    }\n}\n\n\n#\u6982\u8981\narduino leonardo\u306bps/2 \u30ad\u30fc\u30dc\u30fc\u30c9\u3092\u3064\u306a\u3044\u3067\u3001usb\u30ad\u30fc\u30dc\u30fc\u30c9\u3092\u30a8\u30df\u30e5\u30ec\u30fc\u30c8\u3057\u3066\u307f\u305f\u3002\n#\u5199\u771f\n![MVC-003S.JPG](https://qiita-image-store.s3.amazonaws.com/0/18104/b13d23fe-e3cc-64e1-8410-9d3ec41256ca.jpeg)\n\n#\u56de\u8def\u56f3\n![key.JPG](https://qiita-image-store.s3.amazonaws.com/0/18104/2b2bc7d3-2fa3-bee3-52c7-5b112a15c3a0.jpeg)\n\n#\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n```\n#include \"ps2.h\"\n\n#define PS2_TAB\t\t\t\t9\n#define PS2_ENTER\t\t\t13\n#define PS2_BACKSPACE\t\t127\n#define PS2_ESC\t\t\t\t27\n#define PS2_INSERT\t\t\t0\n#define PS2_DELETE\t\t\t127\n#define PS2_HOME\t\t\t0\n#define PS2_END\t\t\t\t0\n#define PS2_SCROLL\t\t\t0\nPS2 kbd(6, 5);\nchar key[140] = {\n\t0, 0, 0, 0, 0, 0, 0, 0,\n\t0, 0, 0, 0, 0, PS2_TAB, '`', 0,\n\t0, 0, 0, 0, 0, 'q', '1', 0,\n\t0, 0, 'z', 's', 'a', 'w', '2', 0,\n\t0, 'c', 'x', 'd', 'e', '4', '3', 0,\n\t0, ' ', 'v', 'f', 't', 'r', '5', 0,\n\t0, 'n', 'b', 'h', 'g', 'y', '6', 0,\n\t0, 0, 'm', 'j', 'u', '7', '8', 0,\n\t0, ',', 'k', 'i', 'o', '0', '9', 0,\n\t0, '.', '/', 'l', ';', 'p', '-', 0,\n\t0, 0, '\\'', 0, '[', '=', 0, 0,\n\t0, 0, PS2_ENTER, ']', 0, '\\\\', 0, 0,\n\t0, 0, 0, 0, 0, 0, PS2_BACKSPACE, 0,\n\t0, '1', 0, '4', '7', 0, 0, 0,\n\t'0', '.', '2', '5', '6', '8', PS2_ESC, 0,\n\t0, '+', '3', '-', '*', '9', PS2_SCROLL, 0,\n\t0, 0, 0, 0\n};\nvoid kbd_init()\n{\n\tchar ack;\n\tkbd.write(0xff);\n\tack = kbd.read();\n\tack = kbd.read();\n}\nvoid setup()\n{\n\tSerial.begin(115200);\n\twhile (!Serial);\n\tSerial.println(\"Start\");\n\tkbd_init();\n\tKeyboard.begin();\n\tSerial.println(\"OK\");\n}\nvoid loop()\n{\n\tunsigned char code;\n\tfor ( ; ; )\n\t{\n\t\tcode = kbd.read();\n\t\tcode = key[code];\n\t\tSerial.println(code, HEX);\n\t\tKeyboard.print((char) code);\n\t\tcode = kbd.read();\n\t\tcode = kbd.read();\n\t}\n}\n\n```\n\n", "tags": ["Arduino", "ps2", "USB"]}