{"tags": ["TypeScript", "Scala", "optional"], "context": " More than 1 year has passed since last update.\u3044\u3061\u3044\u3061null\u30c1\u30a7\u30c3\u30af\u3092\u3057\u3066\u3044\u308b\u6642\u306b\u3075\u3068scala\u306eOption\u578b\u304c\u604b\u3057\u304f\u306a\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\u304b\u3068\u8a00\u3063\u3066\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u63a2\u3057\u3066\u304d\u3066\u5c0e\u5165\u3059\u308b\u306e\u3082\u306a\u3041\u3063\u3066\u601d\u3044\u8efd\u3081\u306b\u5b9f\u88c5\u3057\u305f\u6642\u306e\u30e1\u30e2\u3002\n\u65e9\u901f\u30b3\u30fc\u30c9\n    export interface Optional<A> {\n        isEmpty: boolean;\n        map<B>(f: (a: A) => B): Optional<B>\n        bind<B>(f: (a: A) => Optional<B>): Optional<B>\n        getOrElse<A>(a: A): A\n        get(): A\n    }\n    class Just<A> implements Optional<A> {\n        private value: A;\n        public isEmpty: boolean = false;\n        constructor(a: A) {\n            this.value = a\n        }\n        map<B>(f: (a: A) => B): Just<B> {\n            return Some(f(this.value));\n        }\n        bind<B>(f: (a: A) => Just<B>): Just<B> {\n            return f(this.value);\n        }\n        getOrElse(a: A): A{\n            return this.value;\n        }\n        get(): A{\n            return this.value;\n        }\n    }\n    class Nothing<A> implements Optional<A> {\n        private value: A;\n        public isEmpty: boolean = true;\n        constructor(a: A) {\n            this.value = a;\n        }\n        map<B>(f: (a: A) => B): Nothing<B> {\n            return None;\n        }\n        bind<B>(f: (a: A) => Just<B>): Nothing<B> {\n            return None;\n        }\n        getOrElse<A>(a: A): A{\n            return a;\n        }\n        get(): A {\n            throw Error(\"NoSuchElementException\");\n        }\n    }\n    export const None = new Nothing(null);\n\n    export function Some<A>(a: A): Just<A>{\n        return new Just(a);\n    }\n\n\n\u4f7f\u7528\u4f8b\nSome(10).map(a => a * 10).get()\n=> 100\n\n\nOption\u578b\u3063\u3066monad \u3060\u3088\u306d?\n\u30e2\u30ca\u30c9\u5247\u3068\u306f\u4ee5\u4e0b\n1. (return x) >>= f == f x\n2. m >>= return == m\n3. (m >>= f) >>= g == m >>= (\\x -> f x >>= g)\n\n\u691c\u8a3c\u3057\u3066\u307f\u308b\n\u4ee5\u4e0b\u306e\u69d8\u306a\u95a2\u6570f\u3092\u5b9a\u7fa9\u3057\u3068\u304d\u307e\u3059\u3002\nvar f = a => {return new Just(\"FFF!!!\")};\n\n\n1. (return x) >>= f == f x\n(Some(\"Monad!\").bind(f).get() === f(\"Monad!\").get()\n\n\n2.  m >>= return == m\nnew Just(\"Monad!\").bind(Some).get() === Some(\"Monad!\").get()\n\n\n3. (m >>= f) >>= g == m >>= (\\x -> f x >>= g)\n\u95a2\u6570g\u306e\u5b9a\u7fa9\nvar g = (x) => new Just(\"GGG!\")\n\nvar left = (new Just(\"Monad!\").bind(f)).bind(g).get()\nvar right = new Just(\"Monad!\").bind(x => {return f(x).bind(g)}).get()\nleft === right\n\n\n\u307e\u3068\u3081\n\u30b3\u30fc\u30c9\u306f\u77ed\u3044\u3067\u3059\u304c\u30e9\u30a4\u30d6\u30e9\u30ea\u5165\u308c\u305f\u307b\u3046\u304c\u697d\u304b\u3082\u3067\u3059\u306d\u30fb\u30fb\u30fb\n\u3044\u3061\u3044\u3061null\u30c1\u30a7\u30c3\u30af\u3092\u3057\u3066\u3044\u308b\u6642\u306b\u3075\u3068scala\u306eOption\u578b\u304c\u604b\u3057\u304f\u306a\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u304b\u3068\u8a00\u3063\u3066\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u63a2\u3057\u3066\u304d\u3066\u5c0e\u5165\u3059\u308b\u306e\u3082\u306a\u3041\u3063\u3066\u601d\u3044\u8efd\u3081\u306b\u5b9f\u88c5\u3057\u305f\u6642\u306e\u30e1\u30e2\u3002\n\n\u65e9\u901f\u30b3\u30fc\u30c9\n\n```ts\n    export interface Optional<A> {\n        isEmpty: boolean;\n        map<B>(f: (a: A) => B): Optional<B>\n        bind<B>(f: (a: A) => Optional<B>): Optional<B>\n        getOrElse<A>(a: A): A\n        get(): A\n    }\n    class Just<A> implements Optional<A> {\n        private value: A;\n        public isEmpty: boolean = false;\n        constructor(a: A) {\n            this.value = a\n        }\n        map<B>(f: (a: A) => B): Just<B> {\n            return Some(f(this.value));\n        }\n        bind<B>(f: (a: A) => Just<B>): Just<B> {\n            return f(this.value);\n        }\n        getOrElse(a: A): A{\n            return this.value;\n        }\n        get(): A{\n            return this.value;\n        }\n    }\n    class Nothing<A> implements Optional<A> {\n        private value: A;\n        public isEmpty: boolean = true;\n        constructor(a: A) {\n            this.value = a;\n        }\n        map<B>(f: (a: A) => B): Nothing<B> {\n            return None;\n        }\n        bind<B>(f: (a: A) => Just<B>): Nothing<B> {\n            return None;\n        }\n        getOrElse<A>(a: A): A{\n            return a;\n        }\n        get(): A {\n            throw Error(\"NoSuchElementException\");\n        }\n    }\n    export const None = new Nothing(null);\n\n    export function Some<A>(a: A): Just<A>{\n        return new Just(a);\n    }\n```\n\n# \u4f7f\u7528\u4f8b\n\n```ts\nSome(10).map(a => a * 10).get()\n=> 100\n```\n\n# Option\u578b\u3063\u3066monad \u3060\u3088\u306d?\n\n\u30e2\u30ca\u30c9\u5247\u3068\u306f\u4ee5\u4e0b\n1. (return x) >>= f == f x\n2. m >>= return == m\n3. (m >>= f) >>= g == m >>= (\\x -> f x >>= g)\n\n## \u691c\u8a3c\u3057\u3066\u307f\u308b\n\n\u4ee5\u4e0b\u306e\u69d8\u306a\u95a2\u6570f\u3092\u5b9a\u7fa9\u3057\u3068\u304d\u307e\u3059\u3002\n\n```ts\nvar f = a => {return new Just(\"FFF!!!\")};\n```\n\n### 1. (return x) >>= f == f x\n\n```ts\n(Some(\"Monad!\").bind(f).get() === f(\"Monad!\").get()\n```\n\n### 2.  m >>= return == m\n\n```ts\nnew Just(\"Monad!\").bind(Some).get() === Some(\"Monad!\").get()\n```\n\n### 3. (m >>= f) >>= g == m >>= (\\x -> f x >>= g)\n\n\u95a2\u6570g\u306e\u5b9a\u7fa9\n\n```ts\nvar g = (x) => new Just(\"GGG!\")\n```\n\n```ts\nvar left = (new Just(\"Monad!\").bind(f)).bind(g).get()\nvar right = new Just(\"Monad!\").bind(x => {return f(x).bind(g)}).get()\nleft === right\n```\n\n# \u307e\u3068\u3081\n\n\u30b3\u30fc\u30c9\u306f\u77ed\u3044\u3067\u3059\u304c\u30e9\u30a4\u30d6\u30e9\u30ea\u5165\u308c\u305f\u307b\u3046\u304c\u697d\u304b\u3082\u3067\u3059\u306d\u30fb\u30fb\u30fb\n"}