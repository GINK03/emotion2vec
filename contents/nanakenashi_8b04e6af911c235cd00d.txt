{"context": "\n\n\u306f\u3058\u3081\u306b\n\nThe FOSUserBundle, developed by the Symfony community, adds support for a database-backed user system in Symfony. It also handles common tasks like user registration and forgotten password functionality.\n\nFOSUserBundle\u306fSymfony\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306b\u3088\u308a\u958b\u767a\u3055\u308c\u3066\u304a\u308a\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f7f\u7528\u3057\u305f\u30e6\u30fc\u30b6\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\n\u30e6\u30fc\u30b6\u767b\u9332\u3084\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30ea\u30bb\u30c3\u30c8\u306a\u3069\u306e\u3088\u304f\u3042\u308b\u6a5f\u80fd\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nSymfony\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u5165\u308a\u307e\u305b\u3093\u304c\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304cSymfony.com\u4ee5\u4e0b\u306b\u3042\u3063\u305f\u308a\n\u4e0a\u8a18\u306e\u3088\u3046\u306a\u8a18\u8f09\u304c\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u306b\u8f09\u3063\u3066\u3044\u305f\u308a\u3068\u3001\u4fe1\u983c\u3067\u304d\u305d\u3046\u3067\u3059\u3002\n\u57fa\u672c\u7684\u306a\u6a5f\u80fd\u3084\u6c17\u306b\u306a\u3063\u305f\u3068\u3053\u308d\u3092\u307e\u3068\u3081\u307e\u3059\u3002\n \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u95a2\u308f\u308b\u3053\u3068\u306a\u306e\u3067\u3001\u5185\u5bb9\u3092\u9d5c\u5451\u307f\u306b\u306f\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002\n\n\u74b0\u5883\nSymfony\u304c\u52d5\u4f5c\u3057\u3001Doctrine\u7d4c\u7531\u3067MySQL\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3053\u3068\u304c\u524d\u63d0\u3067\u3059\u3002\n\n\n\n\u30bd\u30d5\u30c8\n\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\n\n\nPHP\n7\u7cfb\n\n\nSymfony\n3\u7cfb\n\n\nMySQL\n5.6.x\n\n\nDoctrine\n2.5.3\n\n\n\n\uff08\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\u306e\u8a18\u61b6\u304c\u66d6\u6627\u306a\u305f\u3081\u3001\u5f8c\u65e5\u8ffd\u8a18\uff09\n\n\u5c0e\u5165\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306eInstallation\u306b\u5f93\u3044\u307e\u3059\u3002\n\n\u4f5c\u6210\u3055\u308c\u308b\u30da\u30fc\u30b8\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\n\u81ea\u52d5\u3067\u591a\u304f\u306e\u30da\u30fc\u30b8\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\u6a5f\u80fd\u7684\u306b\u306fURL\u30d1\u30b9\u898b\u305f\u307e\u3093\u307e\u306a\u306e\u3067\u8a73\u7d30\u306f\u5272\u611b\u3057\u307e\u3059\u3002\n$ bin/console debug:router | grep fos                               \n  fos_user_security_login             GET|POST   ANY      ANY    /login                   \n  fos_user_security_check             POST       ANY      ANY    /login_check             \n  fos_user_security_logout            GET|POST   ANY      ANY    /logout                  \n  fos_user_profile_show               GET        ANY      ANY    /profile/                \n  fos_user_profile_edit               GET|POST   ANY      ANY    /profile/edit            \n  fos_user_registration_register      GET|POST   ANY      ANY    /register/               \n  fos_user_registration_check_email   GET        ANY      ANY    /register/check-email    \n  fos_user_registration_confirm       GET        ANY      ANY    /register/confirm/{token}\n  fos_user_registration_confirmed     GET        ANY      ANY    /register/confirmed      \n  fos_user_resetting_request          GET        ANY      ANY    /resetting/request       \n  fos_user_resetting_send_email       POST       ANY      ANY    /resetting/send-email    \n  fos_user_resetting_check_email      GET        ANY      ANY    /resetting/check-email   \n  fos_user_resetting_reset            GET|POST   ANY      ANY    /resetting/reset/{token} \n  fos_user_change_password            GET|POST   ANY      ANY    /profile/change-password\n\n\n\u30ed\u30b0\u30a4\u30f3\n\n\n\u767b\u9332\n\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\n\n\u898b\u305f\u76ee\u304c\u7c21\u7d20\u3067\u3059\u304c\u3001\u3082\u3061\u308d\u3093\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u66f8\u304d\u63db\u3048\u306f\u3067\u304d\u307e\u3059\u3002\nOverriding Default FOSUserBundle Templates\n\n\u4f5c\u6210\u3055\u308c\u308b\u30c6\u30fc\u30d6\u30eb\nDB\u306b\u306f\u4ee5\u4e0b\u306e\u30c6\u30fc\u30d6\u30eb\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\nmysql> DESC user;\n+-----------------------+--------------+------+-----+---------+----------------+\n| Field                 | Type         | Null | Key | Default | Extra          |\n+-----------------------+--------------+------+-----+---------+----------------+\n| id                    | int(11)      | NO   | PRI | NULL    | auto_increment |\n| username              | varchar(180) | NO   |     | NULL    |                |\n| username_canonical    | varchar(180) | NO   | UNI | NULL    |                |\n| email                 | varchar(180) | NO   |     | NULL    |                |\n| email_canonical       | varchar(180) | NO   | UNI | NULL    |                |\n| enabled               | tinyint(1)   | NO   |     | NULL    |                |\n| salt                  | varchar(255) | NO   |     | NULL    |                |\n| password              | varchar(255) | NO   |     | NULL    |                |\n| last_login            | datetime     | YES  |     | NULL    |                |\n| locked                | tinyint(1)   | NO   |     | NULL    |                |\n| expired               | tinyint(1)   | NO   |     | NULL    |                |\n| expires_at            | datetime     | YES  |     | NULL    |                |\n| confirmation_token    | varchar(255) | YES  | UNI | NULL    |                |\n| password_requested_at | datetime     | YES  |     | NULL    |                |\n| roles                 | longtext     | NO   |     | NULL    |                |\n| credentials_expired   | tinyint(1)   | NO   |     | NULL    |                |\n| credentials_expire_at | datetime     | YES  |     | NULL    |                |\n+-----------------------+--------------+------+-----+---------+----------------+\n18 rows in set (0.00 sec)\n\n\u30d5\u30a3\u30fc\u30eb\u30c9\u3054\u3068\u306e\u5f79\u5272\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8a18\u8f09\u304c\u898b\u5f53\u305f\u3089\u306a\u3044\u306e\u3067\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30b6\u30c3\u3068\u8aad\u3093\u3060\u5185\u5bb9\u3067\u3059\u3002\n\n\n\n\u30d5\u30a3\u30fc\u30eb\u30c9\n\u5f79\u5272\n\n\n\n\nid\n\u30e6\u30cb\u30fc\u30afID\n\n\nusername\n\u30e6\u30fc\u30b6\u540d\n\n\nusername_canonical\n\nusername\u3092\u3059\u3079\u3066\u5c0f\u6587\u5b57\u306b\u5909\u63db\u3057\u305f\u3082\u306e\u3002\u30e6\u30fc\u30b6\u540d\u306e\u91cd\u8907\u9632\u6b62\u306b\u4f7f\u7528\n\n\nemail\n\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\n\n\nemail_canonical\n\nemail\u3092\u3059\u3079\u3066\u5c0f\u6587\u5b57\u306b\u5909\u63db\u3057\u305f\u3082\u306e\u3002\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u91cd\u8907\u9632\u6b62\u306b\u4f7f\u7528\n\n\nenabled\n\u30ed\u30b0\u30a4\u30f3\u53ef\u80fd\u304b\u3092\u793a\u3059\u3002\u672a\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30c8\u30e6\u30fc\u30b6\u306e\u30ed\u30b0\u30a4\u30f3\u7981\u6b62\u306a\u3069\u306b\u4f7f\u7528\n\n\nsalt\n\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30cf\u30c3\u30b7\u30e5\u5316\u306b\u4f7f\u7528\u3055\u308c\u308b\u30bd\u30eb\u30c8\u6587\u5b57\u5217\n\n\npassword\n\u6697\u53f7\u5316\u3055\u308c\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\n\n\nlast_login\n\u6700\u7d42\u30ed\u30b0\u30a4\u30f3\u306e\u65e5\u6642\n\n\nlocked\n\u30ed\u30b0\u30a4\u30f3\u53ef\u80fd\u304b\u3092\u793a\u3059\u30d5\u30e9\u30b0\u3002\u5f37\u5236\u7684\u306a\u30ed\u30b0\u30a4\u30f3\u7981\u6b62\u306a\u3069\u306b\u4f7f\u7528\n\n\nexpired\n\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u6709\u52b9\u671f\u9650\u5207\u308c\u3092\u793a\u3059\u3002\u671f\u9650\u304c\u5207\u308c\u3066\u3044\u308b\u3068\u30ed\u30b0\u30a4\u30f3\u4e0d\u53ef\n\n\nexpires_at\n\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u6709\u52b9\u671f\u9650\n\n\nconfirmation_token\n\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306b\u304a\u3051\u308b\u672c\u4eba\u78ba\u8a8d\u306a\u3069\u306b\u4f7f\u7528\u3055\u308c\u308b\u30c8\u30fc\u30af\u30f3\n\n\npassword_requested_at\n\u30e6\u30fc\u30b6\u304c\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305f\u65e5\u6642\n\n\nroles\n\u30a2\u30af\u30bb\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u306b\u4f7f\u7528\u3055\u308c\u308b\u30ed\u30fc\u30eb\n\n\ncredentials_expired\n\u8a8d\u8a3c\u60c5\u5831\u306e\u6709\u52b9\u671f\u9650\u5207\u308c\u3092\u793a\u3059\u3002\u5b9a\u671f\u7684\u306a\u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4\u3092\u4fc3\u3059\u306e\u306b\u4f7f\u7528\n\n\ncredentials_expire_at\n\u8a8d\u8a3c\u60c5\u5831\u306e\u6709\u52b9\u671f\u9650\n\n\n\n\n\u6c17\u306b\u306a\u3063\u305f\u3053\u3068\n\nuser\u30c6\u30fc\u30d6\u30eb\u306b\u4ed6\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3067\u304d\u306a\u3044\u306e\u304b\n\u5fc5\u8981\u6700\u4f4e\u9650\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306f\u81ea\u52d5\u7684\u306b\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u304c\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8981\u4ef6\u306b\u3088\u3063\u3066\u306f\u4ed6\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u3053\u306e\u5834\u5408\u306b\u306f\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306b\u8ffd\u52a0\u30d5\u30a3\u30fc\u30eb\u30c9\u60c5\u5831\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\u4f8b\u3048\u3070\u30a2\u30a4\u30b3\u30f3\u8868\u793a\u7528\u306b\u753b\u50cf\u30d1\u30b9\u3092\u683c\u7d0d\u3057\u305f\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8f09\u3057\u307e\u3059\u3002\n\nUser.php\n/**\n * @var string\n *\n * @ORM\\Column(name=\"image_path\", type=\"string\", length=255)\n */\nprotected $image_path;\n\n\n\u305d\u306e\u5f8c\u306b\u30b9\u30ad\u30fc\u30de\u3092\u518d\u66f4\u65b0\u3057\u307e\u3059\u3002\n\n\u30b9\u30ad\u30fc\u30de\u306e\u66f4\u65b0\n$ bin/console doctrine:schema:update --force\n\n\n\u65b0\u3057\u304f\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\nmysql> DESC user;\n+-----------------------+--------------+------+-----+---------+----------------+\n| Field                 | Type         | Null | Key | Default | Extra          |\n+-----------------------+--------------+------+-----+---------+----------------+\n| id                    | int(11)      | NO   | PRI | NULL    | auto_increment |\n| username              | varchar(180) | NO   |     | NULL    |                |\n| username_canonical    | varchar(180) | NO   | UNI | NULL    |                |\n| email                 | varchar(180) | NO   |     | NULL    |                |\n| email_canonical       | varchar(180) | NO   | UNI | NULL    |                |\n| enabled               | tinyint(1)   | NO   |     | NULL    |                |\n| salt                  | varchar(255) | NO   |     | NULL    |                |\n| password              | varchar(255) | NO   |     | NULL    |                |\n| last_login            | datetime     | YES  |     | NULL    |                |\n| locked                | tinyint(1)   | NO   |     | NULL    |                |\n| expired               | tinyint(1)   | NO   |     | NULL    |                |\n| expires_at            | datetime     | YES  |     | NULL    |                |\n| confirmation_token    | varchar(255) | YES  | UNI | NULL    |                |\n| password_requested_at | datetime     | YES  |     | NULL    |                |\n| roles                 | longtext     | NO   |     | NULL    |                |\n| credentials_expired   | tinyint(1)   | NO   |     | NULL    |                |\n| credentials_expire_at | datetime     | YES  |     | NULL    |                |\n| image_path            | varchar(255) | NO   |     | NULL    |                |\n+-----------------------+--------------+------+-----+---------+----------------+\n18 rows in set (0.00 sec)\n\nUser\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u57fa\u672c\u7684\u306a\u4f5c\u308a\u306f\u4ed6\u3068\u5909\u308f\u3089\u306a\u3044\u306e\u3067\n\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3082\u540c\u69d8\u306b\u53ef\u80fd\u3067\u3059\u3002\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30dd\u30ea\u30b7\u30fc\uff08\u9577\u3055\u3084\u4f7f\u7528\u6587\u5b57\u5236\u9650\uff09\u306f\u8a2d\u5b9a\u3067\u304d\u306a\u3044\u306e\u304b\n\u5185\u90e8\u3067\u306f\u3001Entity\u3001Form\u3001FormType\u306a\u3069\u304c\u4f7f\u308f\u308c\u3066\u3044\u308b\u306e\u3067\n\u305d\u308c\u305e\u308c\u306b\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u52a0\u3048\u308b\u3053\u3068\u3067\u5b9f\u73fe\u3067\u304d\u305d\u3046\u3067\u3059\u3002\nOverriding Default FOSUserBundle Forms\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u306fResources/config/validation.xml\u306b\u3042\u308b\u304b\u3089\n\u4f7f\u3046\u306a\u3089\u4f7f\u3048\u3070\u3044\u3044\u3057\u3001\u3060\u3081\u306a\u3089\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3068\u3044\u3046\u30b9\u30bf\u30f3\u30b9\u306a\u3093\u3067\u3057\u3087\u3046\u304b\u3002\nOverriding Default FOSUserBundle Validation\n\n\u30e6\u30fc\u30b6\u540d\u3092\u4f7f\u308f\u306a\u3044\u3068\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u3044\u306e\u304b\ninstallation\u3067\u306e\u624b\u9806\u3067\u306f\u30e6\u30fc\u30b6\u540d\u3057\u304b\u4f7f\u7528\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u304c\n\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u3082\u8a31\u53ef\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\nsecurity.yml\u306eid\u306e\u90e8\u5206\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\n\nsecurity.yml\nproviders:                                       \n    fos_userbundle:                              \n        id: fos_user.user_provider.username_email\n\n\n\u3053\u308c\u3067\u3001\u30e6\u30fc\u30b6\u540d\u3068\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u3069\u3061\u3089\u304b\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u307f\u3092\u8a31\u3059\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u304c\u3001\u62e1\u5f35\u306b\u3064\u3044\u3066PR\u304c\u3042\u308a\u307e\u3057\u305f\u3002\nAdded email only authentication\n\n\u307e\u3068\u3081\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u304c\u5272\u3068\u7de9\u3081\u306a\u306e\u3067\n\u8a73\u7d30\u306a\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u3054\u4e00\u8aad\u304f\u3060\u3055\u3044\u3002\n\u5168\u4f53\u7684\u306b\u300c\u6c17\u306b\u306a\u308b\u3068\u3053\u308d\u306f\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u3066\u300d\u3068\u3044\u3046\u30b9\u30bf\u30f3\u30b9\u306a\u6c17\u304c\u3057\u307e\u3059\u3002\nWeb\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u77e5\u8b58\u3084\u5185\u90e8\u5b9f\u88c5\u3078\u306e\u7406\u89e3\u306f\u5fc5\u8981\u3067\u3059\u304c\n\u4e0a\u8a18\u306e\u3088\u3046\u306a\u7c21\u5358\u306a\u624b\u9806\u3060\u3051\u3067\u591a\u304f\u306e\u6a5f\u80fd\u3092\u5f97\u3089\u308c\u308b\u306e\u306f\u304a\u5f97\u3067\u3059\u306d\u3002\n\n## \u306f\u3058\u3081\u306b\n\n> The FOSUserBundle, developed by the Symfony community, adds support for a database-backed user system in Symfony. It also handles common tasks like user registration and forgotten password functionality.\n\nFOSUserBundle\u306fSymfony\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306b\u3088\u308a\u958b\u767a\u3055\u308c\u3066\u304a\u308a\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f7f\u7528\u3057\u305f\u30e6\u30fc\u30b6\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\n\u30e6\u30fc\u30b6\u767b\u9332\u3084\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30ea\u30bb\u30c3\u30c8\u306a\u3069\u306e\u3088\u304f\u3042\u308b\u6a5f\u80fd\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\nSymfony\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u5165\u308a\u307e\u305b\u3093\u304c\n[\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://symfony.com/doc/current/bundles/FOSUserBundle/index.html)\u304cSymfony.com\u4ee5\u4e0b\u306b\u3042\u3063\u305f\u308a\n\u4e0a\u8a18\u306e\u3088\u3046\u306a\u8a18\u8f09\u304c\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u306b\u8f09\u3063\u3066\u3044\u305f\u308a\u3068\u3001\u4fe1\u983c\u3067\u304d\u305d\u3046\u3067\u3059\u3002\n\n\u57fa\u672c\u7684\u306a\u6a5f\u80fd\u3084\u6c17\u306b\u306a\u3063\u305f\u3068\u3053\u308d\u3092\u307e\u3068\u3081\u307e\u3059\u3002\n\n:warning: \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u95a2\u308f\u308b\u3053\u3068\u306a\u306e\u3067\u3001\u5185\u5bb9\u3092\u9d5c\u5451\u307f\u306b\u306f\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002\n\n## \u74b0\u5883\n\nSymfony\u304c\u52d5\u4f5c\u3057\u3001Doctrine\u7d4c\u7531\u3067MySQL\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3053\u3068\u304c\u524d\u63d0\u3067\u3059\u3002\n\n|\u30bd\u30d5\u30c8|\u30d0\u30fc\u30b8\u30e7\u30f3|\n|:-:|:-:|\n|PHP|7\u7cfb|\n|Symfony|3\u7cfb|\n|MySQL|5.6.x|\n|Doctrine|2.5.3|\n\n\uff08\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\u306e\u8a18\u61b6\u304c\u66d6\u6627\u306a\u305f\u3081\u3001\u5f8c\u65e5\u8ffd\u8a18\uff09\n\n## \u5c0e\u5165\n\n### \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e[Installation](http://symfony.com/doc/current/bundles/FOSUserBundle/index.html#installation)\u306b\u5f93\u3044\u307e\u3059\u3002\n\n### \u4f5c\u6210\u3055\u308c\u308b\u30da\u30fc\u30b8\n\n#### \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\n\n\u81ea\u52d5\u3067\u591a\u304f\u306e\u30da\u30fc\u30b8\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\u6a5f\u80fd\u7684\u306b\u306fURL\u30d1\u30b9\u898b\u305f\u307e\u3093\u307e\u306a\u306e\u3067\u8a73\u7d30\u306f\u5272\u611b\u3057\u307e\u3059\u3002\n\n```\n$ bin/console debug:router | grep fos                               \n  fos_user_security_login             GET|POST   ANY      ANY    /login                   \n  fos_user_security_check             POST       ANY      ANY    /login_check             \n  fos_user_security_logout            GET|POST   ANY      ANY    /logout                  \n  fos_user_profile_show               GET        ANY      ANY    /profile/                \n  fos_user_profile_edit               GET|POST   ANY      ANY    /profile/edit            \n  fos_user_registration_register      GET|POST   ANY      ANY    /register/               \n  fos_user_registration_check_email   GET        ANY      ANY    /register/check-email    \n  fos_user_registration_confirm       GET        ANY      ANY    /register/confirm/{token}\n  fos_user_registration_confirmed     GET        ANY      ANY    /register/confirmed      \n  fos_user_resetting_request          GET        ANY      ANY    /resetting/request       \n  fos_user_resetting_send_email       POST       ANY      ANY    /resetting/send-email    \n  fos_user_resetting_check_email      GET        ANY      ANY    /resetting/check-email   \n  fos_user_resetting_reset            GET|POST   ANY      ANY    /resetting/reset/{token} \n  fos_user_change_password            GET|POST   ANY      ANY    /profile/change-password\n```\n\n#### \u30ed\u30b0\u30a4\u30f3\n\n![1.png](https://qiita-image-store.s3.amazonaws.com/0/43116/44f847cc-584b-010b-89e7-05eaff6e0ce3.png \"1.png\")\n\n\n#### \u767b\u9332\n\n![2.png](https://qiita-image-store.s3.amazonaws.com/0/43116/0b299ec7-a1b2-1d05-4045-9a071bdb2cc7.png \"2.png\")\n\n\n#### \u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\n\n![3.png](https://qiita-image-store.s3.amazonaws.com/0/43116/26471090-9609-6417-5b9d-6a7cd019383f.png \"3.png\")\n\n\n\u898b\u305f\u76ee\u304c\u7c21\u7d20\u3067\u3059\u304c\u3001\u3082\u3061\u308d\u3093\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u66f8\u304d\u63db\u3048\u306f\u3067\u304d\u307e\u3059\u3002\n[Overriding Default FOSUserBundle Templates](http://symfony.com/doc/current/bundles/FOSUserBundle/overriding_templates.html)\n\n### \u4f5c\u6210\u3055\u308c\u308b\u30c6\u30fc\u30d6\u30eb\n\nDB\u306b\u306f\u4ee5\u4e0b\u306e\u30c6\u30fc\u30d6\u30eb\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n```\nmysql> DESC user;\n+-----------------------+--------------+------+-----+---------+----------------+\n| Field                 | Type         | Null | Key | Default | Extra          |\n+-----------------------+--------------+------+-----+---------+----------------+\n| id                    | int(11)      | NO   | PRI | NULL    | auto_increment |\n| username              | varchar(180) | NO   |     | NULL    |                |\n| username_canonical    | varchar(180) | NO   | UNI | NULL    |                |\n| email                 | varchar(180) | NO   |     | NULL    |                |\n| email_canonical       | varchar(180) | NO   | UNI | NULL    |                |\n| enabled               | tinyint(1)   | NO   |     | NULL    |                |\n| salt                  | varchar(255) | NO   |     | NULL    |                |\n| password              | varchar(255) | NO   |     | NULL    |                |\n| last_login            | datetime     | YES  |     | NULL    |                |\n| locked                | tinyint(1)   | NO   |     | NULL    |                |\n| expired               | tinyint(1)   | NO   |     | NULL    |                |\n| expires_at            | datetime     | YES  |     | NULL    |                |\n| confirmation_token    | varchar(255) | YES  | UNI | NULL    |                |\n| password_requested_at | datetime     | YES  |     | NULL    |                |\n| roles                 | longtext     | NO   |     | NULL    |                |\n| credentials_expired   | tinyint(1)   | NO   |     | NULL    |                |\n| credentials_expire_at | datetime     | YES  |     | NULL    |                |\n+-----------------------+--------------+------+-----+---------+----------------+\n18 rows in set (0.00 sec)\n```\n\n\u30d5\u30a3\u30fc\u30eb\u30c9\u3054\u3068\u306e\u5f79\u5272\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8a18\u8f09\u304c\u898b\u5f53\u305f\u3089\u306a\u3044\u306e\u3067\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30b6\u30c3\u3068\u8aad\u3093\u3060\u5185\u5bb9\u3067\u3059\u3002\n\n|\u30d5\u30a3\u30fc\u30eb\u30c9|\u5f79\u5272|\n|:--|:--|\n|`id`|\u30e6\u30cb\u30fc\u30afID|\n|`username`|\u30e6\u30fc\u30b6\u540d|\n|`username_canonical`|`username`\u3092\u3059\u3079\u3066\u5c0f\u6587\u5b57\u306b\u5909\u63db\u3057\u305f\u3082\u306e\u3002\u30e6\u30fc\u30b6\u540d\u306e\u91cd\u8907\u9632\u6b62\u306b\u4f7f\u7528|\n|`email`|\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9|\n|`email_canonical`|`email`\u3092\u3059\u3079\u3066\u5c0f\u6587\u5b57\u306b\u5909\u63db\u3057\u305f\u3082\u306e\u3002\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u91cd\u8907\u9632\u6b62\u306b\u4f7f\u7528|\n|`enabled`|\u30ed\u30b0\u30a4\u30f3\u53ef\u80fd\u304b\u3092\u793a\u3059\u3002\u672a\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30c8\u30e6\u30fc\u30b6\u306e\u30ed\u30b0\u30a4\u30f3\u7981\u6b62\u306a\u3069\u306b\u4f7f\u7528|\n|`salt`|\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30cf\u30c3\u30b7\u30e5\u5316\u306b\u4f7f\u7528\u3055\u308c\u308b\u30bd\u30eb\u30c8\u6587\u5b57\u5217|\n|`password`|\u6697\u53f7\u5316\u3055\u308c\u305f\u30d1\u30b9\u30ef\u30fc\u30c9|\n|`last_login`|\u6700\u7d42\u30ed\u30b0\u30a4\u30f3\u306e\u65e5\u6642|\n|`locked`|\u30ed\u30b0\u30a4\u30f3\u53ef\u80fd\u304b\u3092\u793a\u3059\u30d5\u30e9\u30b0\u3002\u5f37\u5236\u7684\u306a\u30ed\u30b0\u30a4\u30f3\u7981\u6b62\u306a\u3069\u306b\u4f7f\u7528|\n|`expired`|\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u6709\u52b9\u671f\u9650\u5207\u308c\u3092\u793a\u3059\u3002\u671f\u9650\u304c\u5207\u308c\u3066\u3044\u308b\u3068\u30ed\u30b0\u30a4\u30f3\u4e0d\u53ef|\n|`expires_at`|\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u6709\u52b9\u671f\u9650|\n|`confirmation_token`|\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306b\u304a\u3051\u308b\u672c\u4eba\u78ba\u8a8d\u306a\u3069\u306b\u4f7f\u7528\u3055\u308c\u308b\u30c8\u30fc\u30af\u30f3|\n|`password_requested_at`|\u30e6\u30fc\u30b6\u304c\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305f\u65e5\u6642|\n|`roles`|\u30a2\u30af\u30bb\u30b9\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u306b\u4f7f\u7528\u3055\u308c\u308b\u30ed\u30fc\u30eb|\n|`credentials_expired`|\u8a8d\u8a3c\u60c5\u5831\u306e\u6709\u52b9\u671f\u9650\u5207\u308c\u3092\u793a\u3059\u3002\u5b9a\u671f\u7684\u306a\u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4\u3092\u4fc3\u3059\u306e\u306b\u4f7f\u7528|\n|`credentials_expire_at`|\u8a8d\u8a3c\u60c5\u5831\u306e\u6709\u52b9\u671f\u9650|\n\n## \u6c17\u306b\u306a\u3063\u305f\u3053\u3068\n\n### user\u30c6\u30fc\u30d6\u30eb\u306b\u4ed6\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3067\u304d\u306a\u3044\u306e\u304b\n\n\u5fc5\u8981\u6700\u4f4e\u9650\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306f\u81ea\u52d5\u7684\u306b\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u304c\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8981\u4ef6\u306b\u3088\u3063\u3066\u306f\u4ed6\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n\u3053\u306e\u5834\u5408\u306b\u306f\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306b\u8ffd\u52a0\u30d5\u30a3\u30fc\u30eb\u30c9\u60c5\u5831\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\u4f8b\u3048\u3070\u30a2\u30a4\u30b3\u30f3\u8868\u793a\u7528\u306b\u753b\u50cf\u30d1\u30b9\u3092\u683c\u7d0d\u3057\u305f\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8f09\u3057\u307e\u3059\u3002\n\n```php:User.php\n/**\n * @var string\n *\n * @ORM\\Column(name=\"image_path\", type=\"string\", length=255)\n */\nprotected $image_path;\n```\n\n\u305d\u306e\u5f8c\u306b\u30b9\u30ad\u30fc\u30de\u3092\u518d\u66f4\u65b0\u3057\u307e\u3059\u3002\n\n```bash:\u30b9\u30ad\u30fc\u30de\u306e\u66f4\u65b0\n$ bin/console doctrine:schema:update --force\n```\n\n\u65b0\u3057\u304f\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n```\nmysql> DESC user;\n+-----------------------+--------------+------+-----+---------+----------------+\n| Field                 | Type         | Null | Key | Default | Extra          |\n+-----------------------+--------------+------+-----+---------+----------------+\n| id                    | int(11)      | NO   | PRI | NULL    | auto_increment |\n| username              | varchar(180) | NO   |     | NULL    |                |\n| username_canonical    | varchar(180) | NO   | UNI | NULL    |                |\n| email                 | varchar(180) | NO   |     | NULL    |                |\n| email_canonical       | varchar(180) | NO   | UNI | NULL    |                |\n| enabled               | tinyint(1)   | NO   |     | NULL    |                |\n| salt                  | varchar(255) | NO   |     | NULL    |                |\n| password              | varchar(255) | NO   |     | NULL    |                |\n| last_login            | datetime     | YES  |     | NULL    |                |\n| locked                | tinyint(1)   | NO   |     | NULL    |                |\n| expired               | tinyint(1)   | NO   |     | NULL    |                |\n| expires_at            | datetime     | YES  |     | NULL    |                |\n| confirmation_token    | varchar(255) | YES  | UNI | NULL    |                |\n| password_requested_at | datetime     | YES  |     | NULL    |                |\n| roles                 | longtext     | NO   |     | NULL    |                |\n| credentials_expired   | tinyint(1)   | NO   |     | NULL    |                |\n| credentials_expire_at | datetime     | YES  |     | NULL    |                |\n| image_path            | varchar(255) | NO   |     | NULL    |                |\n+-----------------------+--------------+------+-----+---------+----------------+\n18 rows in set (0.00 sec)\n```\n\nUser\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u57fa\u672c\u7684\u306a\u4f5c\u308a\u306f\u4ed6\u3068\u5909\u308f\u3089\u306a\u3044\u306e\u3067\n\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3082\u540c\u69d8\u306b\u53ef\u80fd\u3067\u3059\u3002\n\n### \u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30dd\u30ea\u30b7\u30fc\uff08\u9577\u3055\u3084\u4f7f\u7528\u6587\u5b57\u5236\u9650\uff09\u306f\u8a2d\u5b9a\u3067\u304d\u306a\u3044\u306e\u304b\n\n\u5185\u90e8\u3067\u306f\u3001Entity\u3001Form\u3001FormType\u306a\u3069\u304c\u4f7f\u308f\u308c\u3066\u3044\u308b\u306e\u3067\n\u305d\u308c\u305e\u308c\u306b\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u52a0\u3048\u308b\u3053\u3068\u3067\u5b9f\u73fe\u3067\u304d\u305d\u3046\u3067\u3059\u3002\n[Overriding Default FOSUserBundle Forms](http://symfony.com/doc/current/bundles/FOSUserBundle/overriding_forms.html)\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u306f`Resources/config/validation.xml`\u306b\u3042\u308b\u304b\u3089\n\u4f7f\u3046\u306a\u3089\u4f7f\u3048\u3070\u3044\u3044\u3057\u3001\u3060\u3081\u306a\u3089\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3068\u3044\u3046\u30b9\u30bf\u30f3\u30b9\u306a\u3093\u3067\u3057\u3087\u3046\u304b\u3002\n[Overriding Default FOSUserBundle Validation](http://symfony.com/doc/current/bundles/FOSUserBundle/overriding_validation.html)\n\n### \u30e6\u30fc\u30b6\u540d\u3092\u4f7f\u308f\u306a\u3044\u3068\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u3044\u306e\u304b\n\n[installation](http://symfony.com/doc/current/bundles/FOSUserBundle/index.html#installation)\u3067\u306e\u624b\u9806\u3067\u306f\u30e6\u30fc\u30b6\u540d\u3057\u304b\u4f7f\u7528\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u304c\n\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u3082\u8a31\u53ef\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\n`security.yml`\u306e`id`\u306e\u90e8\u5206\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```security.yml\nproviders:                                       \n    fos_userbundle:                              \n        id: fos_user.user_provider.username_email\n```\n\n\u3053\u308c\u3067\u3001\u30e6\u30fc\u30b6\u540d\u3068\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u3069\u3061\u3089\u304b\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u307f\u3092\u8a31\u3059\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u304c\u3001\u62e1\u5f35\u306b\u3064\u3044\u3066PR\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n[Added email only authentication](https://github.com/FriendsOfSymfony/FOSUserBundle/pull/2122)\n\n## \u307e\u3068\u3081\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u304c\u5272\u3068\u7de9\u3081\u306a\u306e\u3067\n\u8a73\u7d30\u306a\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306f[\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://symfony.com/doc/current/bundles/FOSUserBundle/index.html)\u3092\u3054\u4e00\u8aad\u304f\u3060\u3055\u3044\u3002\n\u5168\u4f53\u7684\u306b\u300c\u6c17\u306b\u306a\u308b\u3068\u3053\u308d\u306f\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u3066\u300d\u3068\u3044\u3046\u30b9\u30bf\u30f3\u30b9\u306a\u6c17\u304c\u3057\u307e\u3059\u3002\n\nWeb\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u77e5\u8b58\u3084\u5185\u90e8\u5b9f\u88c5\u3078\u306e\u7406\u89e3\u306f\u5fc5\u8981\u3067\u3059\u304c\n\u4e0a\u8a18\u306e\u3088\u3046\u306a\u7c21\u5358\u306a\u624b\u9806\u3060\u3051\u3067\u591a\u304f\u306e\u6a5f\u80fd\u3092\u5f97\u3089\u308c\u308b\u306e\u306f\u304a\u5f97\u3067\u3059\u306d\u3002\n", "tags": ["PHP", "Symfony", "doctrine", "FOSUserBundle"]}