{"context": " More than 1 year has passed since last update.Android\u5e83\u544aID\u3092\u53d6\u5f97\u3059\u308b\u6700\u5c0f\u306a\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u4f5c\u3063\u3066\u307f\u305f\u3002\n\u6ce8\u610f\u3059\u3079\u304d\u70b9\u306f\n\n\nAdvertisingIdClient.getAdvertisingIdInfo()\u306f\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u304b\u3089\u547c\u3076\u3068IllegalStateException\u4f8b\u5916\u3068\u306a\u308b\u306e\u3067\u3001UI\u30b9\u30ec\u30c3\u30c9\u3068\u306f\u5225\u306e\u30b9\u30ec\u30c3\u30c9\u3067\u53d6\u5f97\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\nAdvertisingIdClient.Info.isLimitAdTrackingEnabled()\u306e\u8a2d\u5b9a\u306b\u95a2\u308f\u3089\u305a\u5e83\u544aID\u306f\u53d6\u5f97\u3067\u304d\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u5b9f\u969b\u306b\u5e83\u544aID\u3092\u4f7f\u3046\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306fisLimitAdTrackingEnabled()\u306e\u5024\u3092\u8003\u616e\u3057\u305f\u5b9f\u88c5\u3068\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n\nMainActivity.java\npackage jp.gr.java_conf.fofn.advertisingid;\n\nimport android.app.Activity;\nimport android.content.Context;\nimport android.os.AsyncTask;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.widget.TextView;\n\nimport com.google.android.gms.ads.identifier.AdvertisingIdClient;\nimport com.google.android.gms.common.GooglePlayServicesNotAvailableException;\nimport com.google.android.gms.common.GooglePlayServicesRepairableException;\n\nimport java.io.IOException;\n\npublic class MainActivity extends AppCompatActivity {\n    private static final String TAG = \"AdvertisingId\";\n\n    class AdIdTask extends AsyncTask<Void, Void, String> {\n        private Activity mActivity;\n\n        AdIdTask(Activity activity) {\n            mActivity = activity;\n        }\n\n        @Override\n        protected String doInBackground(Void... params) {\n            String advertisingId = \"\";\n            try {\n                AdvertisingIdClient.Info info =\n                        AdvertisingIdClient.getAdvertisingIdInfo(mActivity.getApplicationContext());\n                advertisingId = info.getId();\n            } catch (GooglePlayServicesNotAvailableException e) {\n                Log.e(TAG, \"GooglePlayServices not available.\");\n            } catch (GooglePlayServicesRepairableException e) {\n                //\n            } catch (IOException e) {\n                //\n            }\n            return advertisingId;\n        }\n\n        @Override\n        protected void onPostExecute(String id) {\n            TextView view = (TextView)mActivity.findViewById(R.id.adid);\n            view.append(id);\n        }\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        // AdvertisingIdClient cannot be called in the main thread.\n        AsyncTask<Void, Void, String> task = new AdIdTask(this);\n        task.execute();\n    }\n}\n\n\nAndroid\u5e83\u544aID\u3092\u53d6\u5f97\u3059\u308b\u6700\u5c0f\u306a\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u4f5c\u3063\u3066\u307f\u305f\u3002\n\u6ce8\u610f\u3059\u3079\u304d\u70b9\u306f\n\n- `AdvertisingIdClient.getAdvertisingIdInfo()`\u306f\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u304b\u3089\u547c\u3076\u3068`IllegalStateException`\u4f8b\u5916\u3068\u306a\u308b\u306e\u3067\u3001UI\u30b9\u30ec\u30c3\u30c9\u3068\u306f\u5225\u306e\u30b9\u30ec\u30c3\u30c9\u3067\u53d6\u5f97\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n- `AdvertisingIdClient.Info.isLimitAdTrackingEnabled()`\u306e\u8a2d\u5b9a\u306b\u95a2\u308f\u3089\u305a\u5e83\u544aID\u306f\u53d6\u5f97\u3067\u304d\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u5b9f\u969b\u306b\u5e83\u544aID\u3092\u4f7f\u3046\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f`isLimitAdTrackingEnabled()`\u306e\u5024\u3092\u8003\u616e\u3057\u305f\u5b9f\u88c5\u3068\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n```java:MainActivity.java\npackage jp.gr.java_conf.fofn.advertisingid;\n\nimport android.app.Activity;\nimport android.content.Context;\nimport android.os.AsyncTask;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.widget.TextView;\n\nimport com.google.android.gms.ads.identifier.AdvertisingIdClient;\nimport com.google.android.gms.common.GooglePlayServicesNotAvailableException;\nimport com.google.android.gms.common.GooglePlayServicesRepairableException;\n\nimport java.io.IOException;\n\npublic class MainActivity extends AppCompatActivity {\n    private static final String TAG = \"AdvertisingId\";\n\n    class AdIdTask extends AsyncTask<Void, Void, String> {\n        private Activity mActivity;\n\n        AdIdTask(Activity activity) {\n            mActivity = activity;\n        }\n\n        @Override\n        protected String doInBackground(Void... params) {\n            String advertisingId = \"\";\n            try {\n                AdvertisingIdClient.Info info =\n                        AdvertisingIdClient.getAdvertisingIdInfo(mActivity.getApplicationContext());\n                advertisingId = info.getId();\n            } catch (GooglePlayServicesNotAvailableException e) {\n                Log.e(TAG, \"GooglePlayServices not available.\");\n            } catch (GooglePlayServicesRepairableException e) {\n                //\n            } catch (IOException e) {\n                //\n            }\n            return advertisingId;\n        }\n\n        @Override\n        protected void onPostExecute(String id) {\n            TextView view = (TextView)mActivity.findViewById(R.id.adid);\n            view.append(id);\n        }\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        // AdvertisingIdClient cannot be called in the main thread.\n        AsyncTask<Void, Void, String> task = new AdIdTask(this);\n        task.execute();\n    }\n}\n```\n", "tags": ["Android", "GooglePlayServices"]}