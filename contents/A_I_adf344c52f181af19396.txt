{"context": " More than 1 year has passed since last update.\n\ncentos\u306bapache\u3001passenger 4.0.45\u3092\u5c0e\u5165\u3057\u672cproduction\u74b0\u5883\u3067rails\u3092\u52d5\u304b\u3059\n\nGitHub \u306bssh\u3067\u63a5\u7d9a\u3059\u308b\n$ cd ~/.ssh\n$ ls\nauthorized_key  id_dsa       known_hosts\nconfig            id_dsa.pub\n\n\u2191\u4ee5\u4e0a\u306e\u3088\u3046\u306b\u3059\u3067\u306bid_dsa\u3068id_dsa.pub\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001Github\u3078\u306e\u516c\u958b\u9375\u306e\u767b\u9332\u3092\u884c\u3046\u3002id_dsa\u3068id_dsa.pub\u304c\u7121\u3044\u5834\u5408\u306f\u3001\n$ ssh-keygen\n\u3092~/.ssh\u306b\u3066\u5b9f\u884c\u3057\u3001\u9375\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\n\nrails\u3067\u6271\u3046\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\u3059\u308b\nrails\u3067\u4f7f\u3046\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\u3059\u308b(\u65e5\u672c\u8a9e\u5bfe\u5fdc)\nCREATE DATABASE databas_name CHARACTER SET utf8;\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u6a29\u9650\u3092\u6e21\u3059.(\u3053\u3053\u3067\u306f\u540d\u524d\u304cuser\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u6a29\u9650\u3092\u6e21\u3059)\nuser\u306e\u4f5c\u6210\u306f\u3000http://qiita.com/A_I/items/f0aecd5e92b535f34f4f\nGRANT CREATE ON database_name.* TO user@localhost;\n\u8a2d\u5b9a\u3057\u305f\u6a29\u9650\u3092\u78ba\u8a8d\u3059\u308b\nSHOW GRANTS FOR user@localhost;\n\u2192GRANT ALL PRIVILEGES ON \u4f5c\u6210\u3057\u305f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\u3000\u3000\u3068\u306a\u3063\u3066\u3044\u3044\u308c\u3070OK\nMysql\u3092\u518d\u8d77\u52d5\u3057\u3066\u304a\u304f\nsudo service mysqld start\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u7528\u610f\u3092\u3059\u308b\n$ cd /var/www/html\n\u30ed\u30fc\u30ab\u30eb\u3067\u8d77\u52d5\u3057\u3066\u307f\u308b\nbundle install\nbundle exec rake db:migrate\nbundle exec rake db:seed\n\n$ rails s\n\u8d77\u52d5\u3059\u308c\u3070OK\n\napache\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089passenger\u306e\u5c0e\u5165rails\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u307e\u3067\n\napache\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u524d\u306b\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u7121\u52b9\u306b\u3057\u3001SELInax\u3092\u7121\u52b9\u306b\u3059\u308b\n\nSELinax\u306e\u7121\u52b9\u5316\n$ sudo setenforce 0\n\u3053\u306e\u307e\u307e\u3060\u3068\u30b5\u30fc\u30d0\u3092\u518d\u8d77\u52d5\u3059\u308b\u3068\u307e\u305f\u6709\u52b9\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001 \u518d\u8d77\u52d5\u6642\u306b\u3082\u7121\u52b9\u306b\u306a\u308b\u3088\u3046\u306b\u3059\u308b\u306b\u306f/etc/selinux/config\u3092\u7de8\u96c6\u3057\u3066\u304a\u304f\u3002\n'$ vim /etc/selinux/config'\n\u2192\u3000SELINUX=disabled\n\u3068\u5909\u66f4\u3059\u308b\n\n\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u7121\u52b9\u306b\u3059\u308b\n$ yum install system-config-firewall-tui\n$ system-config-firewall-tui\n\u30d5\u30a1\u30a4\u30e4\u30a6\u30a9\u30fc\u30eb\u306e\u8a2d\u5b9a\u3067NO\u3092\u9078\u3079\u3070OK\n\napache\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ yum install httpd\n\npassenger\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ gem install --no-rdoc --no-ri passenger\n\uff08\u9014\u4e2d\u3067gem\u304c\u8db3\u308a\u306a\u3044\u3060\u306e\u3001Ruby\u3092\u9078\u3079\u3060\u306e\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c\u304d\u3064\u3044\u3060\u306e\u8a00\u308f\u308c\u305f\u3089\u9069\u5b9c\u4fee\u6b63\u3084\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u3046\uff09\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u6700\u5f8c\u306b\nLoadModule \n<IfModule\n\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\n\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\n</IfModule>\n\n\u304c\u51fa\u6765\u308b\u306e\u3067\u30b3\u30d4\u30fc\u3057\u3066\u304a\u304f\n\u305d\u3057\u3066/etc/httpd/conf/httpd.conf\u306eLoadModule\u306e\u4e0b\u306b\u8cbc\u4ed8\u3051\u308b\n/etc/httpd/conf.d/hogehoge.conf\u306b\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u8a2d\u5b9a\u3092\u8a18\u8f09\u3057\u3066\u3044\u304f\n(hogehoge\u306e\u90e8\u5206\u306f\u4efb\u610f)\n\u50d5\u306e\u5834\u5408\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u305f\n$ vim /etc/httpd/conf.d/hogehoge.conf\n<VirtualHost *:80>\n    ServerName localhost.ishii\n    RailsEnv production\n    PassengerEnabled on\n    DocumentRoot /var/www/html/app_name/public\n    <Directory /var/www/html/app_name/public>\n        AllowOverride all\n        Options -MultiViews\n    </Directory>\n</VirtualHost>\n\nrails\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\n$ vim rails_app/database.yml\nproduction:\n  adapter: mysql2\n  encoding: utf8\n  database: databasename\n  pool: 5\n  username: root\n  password: Password\u21e6mysql\u306epassword\n  socket: /var/lib/mysql/mysql.sock\n  host: localhost\ndefault: &default\n  adapter: sqlite3\n  pool: 5\n  timeout: 100000\ndevelopment:\n  <<: *default\n  database: db/development.sqlite3\n  timeout: 100000\n\n\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3057\u305f\u3089appaach \u3092\u518d\u8d77\u52d5\u3059\u308b\n$ service httpd start\n\u3053\u306e\u6642\u70b9\u3067centoos\u30b5\u30fc\u30d0\u30fc\u306eiP\u3092\u53e9\u3044\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8868\u793a\u3055\u308c\u308c\u3070\u3044\u3044\u306e\u3060\u304c\u81ea\u5206\u306f\u3053\u3053\u3067\u76f8\u5f53\u306f\u307e\u3063\u305f\u3002\n\u307e\u305a\u30a8\u30e9\u30fc\u30ed\u30b0\u306e\u898b\u65b9\u3060\u304c\n$ tail -f /var/log/httpd/error_log\n$ tail -f /var/log/apache2/error_log\n\u3092\u4f7f\u3046\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8d77\u52d5\u304c\u3057\u306a\u3044\u3088\u3046\u306a\u3089tail -f /var/log/httpd/error_log\u306e\u65b9\u3092\u53c2\u7167\u3059\u308b\u3002\n\u81ea\u5206\u306e\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u672c\u756a\u74b0\u5883\u3067\u3042\u308b\u3053\u3068\u3092\u660e\u793a\u3059\u308b\u3053\u3068\u3067\u89e3\u6c7a\u3057\u305f\n$ bundle install --deployment\n$ rake db:migrate RAILS_ENV=development\n$ rake db:seed RAILS_ENV=development`\n\u672c\u756a\u74b0\u5883\u3060\u3068asset\u304c\u81ea\u52d5\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u306a\u3044\u306e\u3067\u3001\n$ bundle exec rake assets:precompile RAILS_ENV=production\n\u3092\u5b9f\u884c\u3059\u308b\u3002\n\u307e\u305fconfig/secrets.yml\u306b\u3042\u308bsecret_key_base:\u304c\u3057\u3063\u304b\u308a\u3068\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\u8a18\u8ff0\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u3001\u4f5c\u6210\u3059\u308b\u306e\u3060\u304ckey\u306f\nrake secret\n\u306b\u3088\u3063\u3066\u4f5c\u6210\u51fa\u6765\u308b\n\u6b21\u306fcapistorano\u3092\u5c0e\u5165\u3057\u307e\u3059\n\n# centos\u306bapache\u3001passenger 4.0.45\u3092\u5c0e\u5165\u3057\u672cproduction\u74b0\u5883\u3067rails\u3092\u52d5\u304b\u3059\n\n### GitHub \u306bssh\u3067\u63a5\u7d9a\u3059\u308b\n\n`$ cd ~/.ssh`\n```$ ls\nauthorized_key  id_dsa       known_hosts\nconfig            id_dsa.pub\n```\n\u2191\u4ee5\u4e0a\u306e\u3088\u3046\u306b\u3059\u3067\u306bid_dsa\u3068id_dsa.pub\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001Github\u3078\u306e\u516c\u958b\u9375\u306e\u767b\u9332\u3092\u884c\u3046\u3002id_dsa\u3068id_dsa.pub\u304c\u7121\u3044\u5834\u5408\u306f\u3001\n\n`$ ssh-keygen`\n\u3092`~/.ssh`\u306b\u3066\u5b9f\u884c\u3057\u3001\u9375\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\n\n\n\n### rails\u3067\u6271\u3046\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\u3059\u308b\n\nrails\u3067\u4f7f\u3046\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\u3059\u308b(\u65e5\u672c\u8a9e\u5bfe\u5fdc)\n`CREATE DATABASE databas_name CHARACTER SET utf8;`\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u6a29\u9650\u3092\u6e21\u3059.(\u3053\u3053\u3067\u306f\u540d\u524d\u304cuser\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u6a29\u9650\u3092\u6e21\u3059)\nuser\u306e\u4f5c\u6210\u306f\u3000http://qiita.com/A_I/items/f0aecd5e92b535f34f4f\n`GRANT CREATE ON database_name.* TO user@localhost;`\n\n\u8a2d\u5b9a\u3057\u305f\u6a29\u9650\u3092\u78ba\u8a8d\u3059\u308b\n`SHOW GRANTS FOR user@localhost;`\n\n\u2192`GRANT ALL PRIVILEGES ON \u4f5c\u6210\u3057\u305f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d`\u3000\u3000\u3068\u306a\u3063\u3066\u3044\u3044\u308c\u3070OK\n\nMysql\u3092\u518d\u8d77\u52d5\u3057\u3066\u304a\u304f\n`sudo service mysqld start`\n\n\n###\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u7528\u610f\u3092\u3059\u308b\n`$ cd /var/www/html`\n\u30ed\u30fc\u30ab\u30eb\u3067\u8d77\u52d5\u3057\u3066\u307f\u308b\n```bundle install\nbundle exec rake db:migrate\nbundle exec rake db:seed\n```\n`$ rails s`\n\u8d77\u52d5\u3059\u308c\u3070OK\n\n## apache\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089passenger\u306e\u5c0e\u5165rails\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u307e\u3067\n\n### apache\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u524d\u306b\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u7121\u52b9\u306b\u3057\u3001SELInax\u3092\u7121\u52b9\u306b\u3059\u308b\n\n##### SELinax\u306e\u7121\u52b9\u5316\n`$ sudo setenforce 0`\n\n\u3053\u306e\u307e\u307e\u3060\u3068\u30b5\u30fc\u30d0\u3092\u518d\u8d77\u52d5\u3059\u308b\u3068\u307e\u305f\u6709\u52b9\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001 \u518d\u8d77\u52d5\u6642\u306b\u3082\u7121\u52b9\u306b\u306a\u308b\u3088\u3046\u306b\u3059\u308b\u306b\u306f/etc/selinux/config\u3092\u7de8\u96c6\u3057\u3066\u304a\u304f\u3002\n\n'$ vim /etc/selinux/config'\n\n\u2192\u3000SELINUX=disabled\n\u3068\u5909\u66f4\u3059\u308b\n\n##### \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u7121\u52b9\u306b\u3059\u308b\n`$ yum install system-config-firewall-tui`\n`$ system-config-firewall-tui`\n\u30d5\u30a1\u30a4\u30e4\u30a6\u30a9\u30fc\u30eb\u306e\u8a2d\u5b9a\u3067NO\u3092\u9078\u3079\u3070OK\n\n### apache\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n`$ yum install httpd`\n\n### passenger\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n`$ gem install --no-rdoc --no-ri passenger`\n\n\uff08\u9014\u4e2d\u3067gem\u304c\u8db3\u308a\u306a\u3044\u3060\u306e\u3001Ruby\u3092\u9078\u3079\u3060\u306e\u3001\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c\u304d\u3064\u3044\u3060\u306e\u8a00\u308f\u308c\u305f\u3089\u9069\u5b9c\u4fee\u6b63\u3084\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u3046\uff09\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u6700\u5f8c\u306b\n```LoadModule \n<IfModule\n\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\n\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\n</IfModule>\n```\n\u304c\u51fa\u6765\u308b\u306e\u3067\u30b3\u30d4\u30fc\u3057\u3066\u304a\u304f\n\u305d\u3057\u3066`/etc/httpd/conf/httpd.conf`\u306eLoadModule\u306e\u4e0b\u306b\u8cbc\u4ed8\u3051\u308b\n\n`/etc/httpd/conf.d/hogehoge.conf`\u306b\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u8a2d\u5b9a\u3092\u8a18\u8f09\u3057\u3066\u3044\u304f\n(hogehoge\u306e\u90e8\u5206\u306f\u4efb\u610f)\n\n\u50d5\u306e\u5834\u5408\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u305f\n```$ vim /etc/httpd/conf.d/hogehoge.conf\n<VirtualHost *:80>\n    ServerName localhost.ishii\n    RailsEnv production\n    PassengerEnabled on\n    DocumentRoot /var/www/html/app_name/public\n    <Directory /var/www/html/app_name/public>\n        AllowOverride all\n        Options -MultiViews\n    </Directory>\n</VirtualHost>\n```\nrails\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\n`$ vim rails_app/database.yml`\n\n```\nproduction:\n  adapter: mysql2\n  encoding: utf8\n  database: databasename\n  pool: 5\n  username: root\n  password: Password\u21e6mysql\u306epassword\n  socket: /var/lib/mysql/mysql.sock\n  host: localhost\ndefault: &default\n  adapter: sqlite3\n  pool: 5\n  timeout: 100000\ndevelopment:\n  <<: *default\n  database: db/development.sqlite3\n  timeout: 100000\n```\n\n\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3057\u305f\u3089appaach \u3092\u518d\u8d77\u52d5\u3059\u308b\n `$ service httpd start`\n\n\n\u3053\u306e\u6642\u70b9\u3067centoos\u30b5\u30fc\u30d0\u30fc\u306eiP\u3092\u53e9\u3044\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8868\u793a\u3055\u308c\u308c\u3070\u3044\u3044\u306e\u3060\u304c\u81ea\u5206\u306f\u3053\u3053\u3067\u76f8\u5f53\u306f\u307e\u3063\u305f\u3002\n\n\u307e\u305a\u30a8\u30e9\u30fc\u30ed\u30b0\u306e\u898b\u65b9\u3060\u304c\n`$ tail -f /var/log/httpd/error_log`\n`$ tail -f /var/log/apache2/error_log`\n\u3092\u4f7f\u3046\u3002\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8d77\u52d5\u304c\u3057\u306a\u3044\u3088\u3046\u306a\u3089`tail -f /var/log/httpd/error_log`\u306e\u65b9\u3092\u53c2\u7167\u3059\u308b\u3002\n\n\u81ea\u5206\u306e\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u672c\u756a\u74b0\u5883\u3067\u3042\u308b\u3053\u3068\u3092\u660e\u793a\u3059\u308b\u3053\u3068\u3067\u89e3\u6c7a\u3057\u305f\n\n`$ bundle install --deployment\n`$ rake db:migrate RAILS_ENV=development`\n`$ rake db:seed RAILS_ENV=development`\n\n\u672c\u756a\u74b0\u5883\u3060\u3068asset\u304c\u81ea\u52d5\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u306a\u3044\u306e\u3067\u3001\n`$ bundle exec rake assets:precompile RAILS_ENV=production`\n\u3092\u5b9f\u884c\u3059\u308b\u3002\n\n\u307e\u305f`config/secrets.yml`\u306b\u3042\u308bsecret_key_base:\u304c\u3057\u3063\u304b\u308a\u3068\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\u8a18\u8ff0\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u3001\u4f5c\u6210\u3059\u308b\u306e\u3060\u304ckey\u306f\n`rake secret`\n\u306b\u3088\u3063\u3066\u4f5c\u6210\u51fa\u6765\u308b\n\n\u6b21\u306fcapistorano\u3092\u5c0e\u5165\u3057\u307e\u3059\n\n\n\n", "tags": ["passenger 4.0.45", "Rails4.1.1", "Apache", "CentOS6.x", "MySQL"]}