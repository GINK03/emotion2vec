{"context": " More than 1 year has passed since last update.\u304a\u306f\u3088\u3046\u3054\u3056\u3044\u307e\u3059\u3001cloudpack \u306e @dz_ \u3053\u3068\u5927\u5e73\u304b\u3065\u307f\u3067\u3059\u3002\n\nPrologue - \u306f\u3058\u3081\u306b\n\u3055\u3041\u3001\u3044\u3088\u3044\u3088 IoT \u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306b\u3064\u306a\u3050\u6e96\u5099\u304c\u3067\u304d\u307e\u3057\u305f\uff01\nBluemix Advent Calendar 2015 \u3067\u304a\u62ab\u9732\u76ee\u3059\u308b\u3079\u304f\u3001\u7740\u3005\u3068\u6e96\u5099\u3092\u9032\u3081\u3066\u3044\u305f\u3053\u306e ESP-WROOM-02 !\n\n(WiFi\u30e2\u30b8\u30e5\u30fc\u30eb\u3001Arduino\u4e92\u63db\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u66f8\u304d\u8fbc\u307f\u53ef\u80fd)\n\u30ad\u30df\u3092\u3001 IBM IoT Foundation \u3067 Bluemix \u306b\u3064\u306a\u3052\u3066\u3042\u3052\u308b\u3088\u30fc\uff01(/\u30fb\u03c9\u30fb)/\n\n\u6e96\u5099\n\n\u524d\u63d0\nESP-WROOM-02 \u304c\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3067\u304d\u308b\u72b6\u614b\u3067\u3042\u308b\u3053\u3068\u304c\u524d\u63d0\u3067\u3059\u3002\n\u904e\u53bb\u306e\u8a18\u4e8b\u3067 ESP-WROOM-02 \u306e\u6e96\u5099\u3092\u3057\u305f\u306e\u3067\u3001\u305c\u3072\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u307e\u305b\u3002\n\nCheck! IoT \u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u307e\u3067 \uff5e \u307e\u305a\u306f\u30b7\u30ea\u30a2\u30eb\u901a\u4fe1\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\nCheck! IoT \u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u307e\u3067 \uff5e ESP-WROOM-02 \u306b\u30b7\u30ea\u30a2\u30eb\u901a\u4fe1\u3067\u63a5\u7d9a\u3059\u308b\nCheck! IoT \u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u307e\u3067 \uff5e ESP-WROOM-02 \u306b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u713c\u304f\n\n\n\u304a\u304a\u307e\u304b\u306a\u624b\u9806\n\u3055\u3066\u3001\u6e96\u5099\u304c\u3067\u304d\u305f\u3089 Bluemix IBM IoT Foundation \u306b\u63a5\u7d9a\u3059\u308b\u6e96\u5099\u3092\u9032\u3081\u307e\u3057\u3087\u3046\u3002\n\nArduino IDE \u306b MQTT \u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5c0e\u5165\u3059\u308b\nBluemix \u3067 IoT Foundation \u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u6210\u3059\u308b\nIoT Foundation \u306b\u30c7\u30d0\u30a4\u30b9\u3092\u767b\u9332\u3059\u308b\nBluemix \u3067 IoT Foundation Starter \u3092\u4f5c\u6210\u3059\u308b\n\u30c7\u30fc\u30bf\u3092\u9001\u3063\u3066\u307f\u308b\n\n\nArduino IDE \u306b MQTT \u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5c0e\u5165\u3059\u308b\nArduino IDE \u306b MQTT \u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5c0e\u5165\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3001\u53c2\u8003\u306b\u3057\u3066\u3044\u308b IBM developerWorks \u30ec\u30b7\u30d4 \u3067\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308b Arduino Client for MQTT \u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\nGit \u3067\u5c0e\u5165\u3059\u308b\u5834\u5408\nArduino IDE \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3001 libraries \u304c\u3042\u308b\u306e\u3067\u3001\u305d\u306e\u4e0b\u306b\u4efb\u610f\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u3063\u3066 git clone \u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u300c\u30b9\u30b1\u30c3\u30c1\u300d>\u300cInclude Library\u300d>\u300cManage Libraries...\u300d\u3092\u958b\u304d\u307e\u3059\u3002\n\nPubSubClient \u3092\u307f\u3064\u3051\u3066\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\nZip \u3067\u5c0e\u5165\u3059\u308b\u5834\u5408\n\u3082\u3057\u3001Zip \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u5c0e\u5165\u3059\u308b\u65b9\u306f\u3001 Arduino IDE \u306e \u300cAdd .ZIP Library...\u300d\u3092\u5229\u7528\u3067\u304d\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\nBluemix \u3067 IoT Foundation \u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u6210\u3059\u308b\n\u305d\u308c\u3067\u306f\u3055\u3063\u305d\u304f\u3001 Bluemix \u30ab\u30bf\u30ed\u30b0 \u304b\u3089\u3001\u300cInternet of Things Foundation\u300d\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u540d\u524d\u3092\u4ed8\u3051\u3066\u3001\u30a2\u30f3\u30d0\u30a4\u30f3\u30c9\u306e\u307e\u307e\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u300c\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u8d77\u52d5\u300d\u3067\u3001Internet of Things Foudation \u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u958b\u304d\u307e\u3059\u3002\n\n\nIoT Foundation \u306b\u30c7\u30d0\u30a4\u30b9\u3092\u767b\u9332\u3059\u308b\n\u6b21\u306b\u3001 ESP-WROOM-02 \u3092\u60f3\u5b9a\u3057\u305f\u30c7\u30d0\u30a4\u30b9\u3092 IoT Foundaiton \u306b\u767b\u9332\u3057\u307e\u3059\u3002Internet of Things Foundation \u3078\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u767b\u9332 \u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\nInternet of Things Foundation \u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306f\u3053\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u306e\u8ffd\u52a0\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u4f5c\u6210\u76f4\u5f8c\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u30fb\u30bf\u30a4\u30d7\u304c\u306a\u3044\u306e\u3067\u3001\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u4efb\u610f\u306e\u30c7\u30d0\u30a4\u30b9\u540d\u3092\u5165\u529b\u3057\u307e\u3059\u3002\u3053\u306e\u5f8c\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3044\u308d\u3044\u308d\u5165\u529b\u3067\u304d\u308b\u306e\u3067\u3001\u597d\u307f\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u30c7\u30d0\u30a4\u30b9\u30fb\u30bf\u30a4\u30d7\u304c\u4f5c\u6210\u3067\u304d\u305f\u306e\u3067\u3001\u30c7\u30d0\u30a4\u30b9\u306e\u8ffd\u52a0\u306b\u9032\u307f\u307e\u3059\u3002\n\n\u4efb\u610f\u306e\u30c7\u30d0\u30a4\u30b9\u540d\u3092\u5165\u529b\u3057\u307e\u3059\u3002\u3053\u306e\u5f8c\u3082\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3044\u308d\u3044\u308d\u8a2d\u5b9a\u3067\u304d\u308b\u306e\u3067\u304a\u597d\u307f\u3067\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u30c8\u30fc\u30af\u30f3\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\u79c1\u306f\u300c\u81ea\u52d5\u751f\u6210\u8a8d\u8a3c\u30c8\u30fc\u30af\u30f3\u300d\u3092\u5229\u7528\u3057\u307e\u3057\u305f\u3002\n\n\u30c7\u30d0\u30a4\u30b9\u306e\u767b\u9332\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\n\n\u3053\u306e\u60c5\u5831\u306f\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u4f7f\u3044\u307e\u3059\u306e\u3067\u3001\u63a7\u3048\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\u30c8\u30fc\u30af\u30f3\u306f\u3053\u308c\u4ee5\u964d\u306f\u8868\u793a\u3055\u308c\u306a\u3044\u306e\u3067\u3001\u3053\u3053\u3067\u5fc5\u305a\u63a7\u3048\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u7d44\u7e54ID\n\u30c7\u30d0\u30a4\u30b9\u30fb\u30bf\u30a4\u30d7\n\u30c7\u30d0\u30a4\u30b9ID\n\u8a8d\u8a3c\u30c8\u30fc\u30af\u30f3\n\n\nInternet of Things Foundation Starter \u3092\u4f5c\u6210\u3059\u308b\n\u305d\u308c\u304b\u3089\u3001\u30c7\u30fc\u30bf\u306e\u53d7\u3051\u624b\u3082\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\u3002\n\u30e2\u30ce\u306e\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u30fb\u30b9\u30bf\u30fc\u30bf\u30fc\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u3088\u308b\u30a2\u30d7\u30ea\u306e\u4f5c\u6210 \u3092\u53c2\u8003\u306b\u3001IoT Foundation \u3068\u9023\u52d5\u3059\u308b\u30b9\u30bf\u30fc\u30bf\u30fc\u30a2\u30d7\u30ea\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\u3053\u308c\u306f Node-RED \u3068\u3044\u3046GUI\u3067\u51e6\u7406\u3092\u63cf\u3051\u308b\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30c4\u30fc\u30eb\u3092\u7528\u3044\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u3064\u304f\u308c\u307e\u3059\u3002\u79c1\u306f\u4eca\u56de\u521d\u3081\u3066\u89e6\u3063\u3066\u305d\u306e\u7c21\u5358\u3055\u306b\u3073\u3063\u304f\u308a\u3057\u307e\u3057\u305f\u3002\nBluemix \u30ab\u30bf\u30ed\u30b0 \u304b\u3089\u3001\u4eca\u5ea6\u306f\u300cInternet of Things Foundation Starter\u300d\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u9805\u76ee\u3092\u5165\u529b\u3057\u3066\u4f5c\u6210\u3092\u9032\u3081\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u4f5c\u6210\u3067\u304d\u305f\u3089\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8d77\u52d5\u3092\u5f85\u3061\u307e\u3059\u3002\n\u8d77\u52d5\u3067\u304d\u305f\u3089\u3001URL\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u958b\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\nNode-RED \u306e\u30d5\u30ed\u30fc\u30a8\u30c7\u30a3\u30bf\u3092\u958b\u304d\u307e\u3059\u3002\n\n\u3053\u3093\u306a\u753b\u9762\u3067\u3059\u3002\u30ce\u30fc\u30c9\u3092\u3064\u306a\u3052\u3066\u51e6\u7406\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\u3053\u306e\u6642\u70b9\u3067\u3059\u3067\u306b IoT Foundation \u304b\u3089\u306e\u5165\u529b\u3092\u53d7\u3051\u3066\u30c7\u30d0\u30c3\u30ac\u306b\u51fa\u529b\u3059\u308b\u51e6\u7406\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u3001Bluemix \u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u623b\u3063\u3066\u3001\u3053\u306e\u30b9\u30bf\u30fc\u30bf\u30fc\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u300cInternet of Things Foundation \u30b5\u30fc\u30d3\u30b9\u300d\u3092\u30d0\u30a4\u30f3\u30c9\u3057\u307e\u3059\u3002(\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u518d\u8d77\u52d5\u304c\u3042\u308a\u307e\u3059\u3002\uff09\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u518d\u8d77\u52d5\u304c\u7d42\u308f\u3063\u305f\u3089\u3001IoT Foundation \u304b\u3089\u306e\u5165\u529b\u3092\u8abf\u6574\u3059\u308b\u306e\u3067\u3001Node-RED \u30d5\u30ed\u30fc\u30a8\u30c7\u30a3\u30bf\u306e\u300cIBM IoT App In\u300d\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u300cAuthentication\u300d\u306b\u300cBluemix Service\u300d\u3092\u9078\u629e\u3057\u3066\u300cOK\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\uff08\u9069\u5b9c\u3001\u300cDevice Id\u300d\u3092\u6307\u5b9a\u3057\u3066\u3082\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\uff09\n\n\u3053\u308c\u3067\u6e96\u5099\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n\u30c7\u30fc\u30bf\u3092\u9001\u3063\u3066\u307f\u308b\n\u3044\u3088\u3044\u3088\u30c7\u30fc\u30bf\u3092\u9001\u3063\u3066\u307f\u307e\u3057\u3087\u3046\uff01\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3001IBM developerWorks \u30ec\u30b7\u30d4 \u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u30d9\u30fc\u30b9\u306b\u3001PubSubClient \u306e ESP8266\u5411\u3051\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9 \u3092\u53c2\u8003\u306b\u8abf\u6574\u3057\u307e\u3057\u305f\u3002\n\nesp8266_to_iotf.ino\n/** \n * This source code refer to the recipe of IBM developerWorks, https://developer.ibm.com/recipes/tutorials/connect-an-esp8266-with-the-arduino-sdk-to-the-ibm-iot-foundation/ .\n */ \n\n#include <ESP8266WiFi.h>\n#include <PubSubClient.h>\n\n//-------- Customise these values -----------\nconst char* ssid = \"<WIFI SSID>\";\nconst char* password = \"<WIFI PASSWORD>\";\n\n#define ORG \"<ORGANIZATION_ID>\"      // \u7d44\u7e54ID\n#define DEVICE_TYPE \"<DEVICE_TYPE>\"  // \u30c7\u30d0\u30a4\u30b9\u30fb\u30bf\u30a4\u30d7\n#define DEVICE_ID \"<DEVICE_ID>\"      // \u30c7\u30d0\u30a4\u30b9ID\n#define TOKEN \"<TOKEN>\"              // \u8a8d\u8a3c\u30c8\u30fc\u30af\u30f3\n//-------- Customise the above values --------\n\nchar server[] = ORG \".messaging.internetofthings.ibmcloud.com\";\nchar topic[] = \"iot-2/evt/status/fmt/json\";\nchar authMethod[] = \"use-token-auth\";\nchar token[] = TOKEN;\nchar clientId[] = \"d:\" ORG \":\" DEVICE_TYPE \":\" DEVICE_ID;\n\nWiFiClient wifiClient;\nPubSubClient client(wifiClient);\n\nvoid callback(char* topic, byte* payload, unsigned int length) {\n Serial.println(\"callback invoked\");\n}\n\nvoid setup() {\n Serial.begin(115200);\n Serial.println();\n\n Serial.print(\"Connecting to \");\n Serial.print(ssid);\n WiFi.begin(ssid, password);\n\n while (WiFi.status() != WL_CONNECTED) {\n delay(500);\n Serial.print(\".\");\n } \n Serial.println(\"\");\n\n Serial.print(\"WiFi connected, IP address: \");\n Serial.println(WiFi.localIP());\n\n client.setServer(server, 1883);\n client.setCallback(callback);\n}\n\nint counter = 0;\n\nvoid loop() {\n\n if (!!!client.connected()) {\n Serial.print(\"Reconnecting client to \");\n Serial.println(server);\n while (!!!client.connect(clientId, authMethod, token)) {\n Serial.print(\".\");\n delay(500);\n }\n Serial.println();\n }\n\n String payload = \"{\\\"d\\\":{\\\"myName\\\":\\\"\";\n payload += DEVICE_TYPE;\n payload += \".\";\n payload += DEVICE_ID;\n payload += \"\\\",\\\"counter\\\":\";\n payload += counter;\n payload += \"}}\";\n\n Serial.print(\"Sending payload: \");\n Serial.println(payload);\n\n if (client.publish(topic, (char*) payload.c_str())) {\n Serial.println(\"Publish ok\");\n } else {\n Serial.println(\"Publish failed\");\n }\n\n if (1000 < counter) {\n  counter = 0;\n }\n else {\n  ++counter;\n }\n delay(10000);\n}\n\n\n\u3044\u3056\uff01\n\n\n\u3053\u306e ESP-WROOM-02 \u304b\u3089 Bluemix \u306b\u3064\u306a\u304c\u3063\u305f\u30fc\u30fc\u30fc\u30fc\uff01\uff01\uff01(*\uff89\u03c9\uff89)\n\u671d4\u6642\u306e\u611f\u52d5\u3002\n\nEpilogue - \u304a\u308f\u308a\u306b\n\u5b9f\u306f\u3001\u610f\u6c17\u8fbc\u3093\u3067\u4f5c\u696d\u958b\u59cb\u3059\u308b\u3082 Bluemix \u306e\u8a08\u753b\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u306b\u3076\u3064\u304b\u308a\u3001500\u30a8\u30e9\u30fc\u306e\u9023\u7d9a\u2026(;\u00b4\u0414\uff40)\n\u666e\u6bb5\u4f7f\u3063\u3066\u308b\u7c73\u56fd\u30ea\u30fc\u30b8\u30e7\u30f3\u3092\u3042\u304d\u3089\u3081\u3001\u4eee\u7720\u3057\u3066\u30e8\u30fc\u30ed\u30c3\u30d1\u304c\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u304c\u7d42\u308f\u308b\u306e\u3092\u5f85\u3061\u30014\u6642\u306b\u6674\u308c\u3066\u7e4b\u304c\u308b\u3068\u3044\u3046\u304e\u308a\u304e\u308a\u306a Advent Calendar \u53c2\u6226\u3068\u76f8\u6210\u308a\u307e\u3057\u305f(/\u30fb\u03c9\u30fb)/\n\u3042\u30fc\uff01\u3082\u3046\u671d\u3060\u3051\u3069 12/14 \u306e Advent Calendar \u3068\u3057\u3066\u6295\u7a3f\u3057\u307e\u3059\uff01\u304a\u3084\u3059\u307f\u306a\u3055\u3044\uff01\n\u304a\u306f\u3088\u3046\u3054\u3056\u3044\u307e\u3059\u3001[cloudpack][] \u306e @dz_ \u3053\u3068[\u5927\u5e73\u304b\u3065\u307f][]\u3067\u3059\u3002\n\nPrologue - \u306f\u3058\u3081\u306b\n====\n\u3055\u3041\u3001\u3044\u3088\u3044\u3088 IoT \u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306b\u3064\u306a\u3050\u6e96\u5099\u304c\u3067\u304d\u307e\u3057\u305f\uff01\n\nBluemix Advent Calendar 2015 \u3067\u304a\u62ab\u9732\u76ee\u3059\u308b\u3079\u304f\u3001\u7740\u3005\u3068\u6e96\u5099\u3092\u9032\u3081\u3066\u3044\u305f\u3053\u306e `ESP-WROOM-02` !\n![20151212_arduino_007.png](https://qiita-image-store.s3.amazonaws.com/0/3812/38dd26d0-f6be-dfa5-39bb-0bb408b903ed.png)\n(WiFi\u30e2\u30b8\u30e5\u30fc\u30eb\u3001Arduino\u4e92\u63db\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u66f8\u304d\u8fbc\u307f\u53ef\u80fd)\n\n\u30ad\u30df\u3092\u3001 IBM IoT Foundation \u3067 Bluemix \u306b\u3064\u306a\u3052\u3066\u3042\u3052\u308b\u3088\u30fc\uff01(/\u30fb\u03c9\u30fb)/\n\n\u6e96\u5099\n====\n\u524d\u63d0\n----\n`ESP-WROOM-02` \u304c\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3067\u304d\u308b\u72b6\u614b\u3067\u3042\u308b\u3053\u3068\u304c\u524d\u63d0\u3067\u3059\u3002\n\n\u904e\u53bb\u306e\u8a18\u4e8b\u3067 `ESP-WROOM-02` \u306e\u6e96\u5099\u3092\u3057\u305f\u306e\u3067\u3001\u305c\u3072\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u307e\u305b\u3002\n\n- [Check! IoT \u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u307e\u3067 \uff5e \u307e\u305a\u306f\u30b7\u30ea\u30a2\u30eb\u901a\u4fe1\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b](http://qiita.com/dz_/items/277eba8cb760b81a2688 \"Check! IoT \u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u307e\u3067 \uff5e \u307e\u305a\u306f\u30b7\u30ea\u30a2\u30eb\u901a\u4fe1\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\")\n- [Check! IoT \u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u307e\u3067 \uff5e ESP-WROOM-02 \u306b\u30b7\u30ea\u30a2\u30eb\u901a\u4fe1\u3067\u63a5\u7d9a\u3059\u308b](http://qiita.com/dz_/items/7cca78ffa792a55416e2 \"Check! IoT \u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u307e\u3067 \uff5e ESP-WROOM-02 \u306b\u30b7\u30ea\u30a2\u30eb\u901a\u4fe1\u3067\u63a5\u7d9a\u3059\u308b\")\n- [Check! IoT \u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u307e\u3067 \uff5e ESP-WROOM-02 \u306b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u713c\u304f](http://qiita.com/dz_/items/eb7c80d3caf4a5c84274 \"Check! IoT \u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u307e\u3067 \uff5e ESP-WROOM-02 \u306b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u713c\u304f\")\n\n\n\u304a\u304a\u307e\u304b\u306a\u624b\u9806\n----\n\u3055\u3066\u3001\u6e96\u5099\u304c\u3067\u304d\u305f\u3089 Bluemix IBM IoT Foundation \u306b\u63a5\u7d9a\u3059\u308b\u6e96\u5099\u3092\u9032\u3081\u307e\u3057\u3087\u3046\u3002\n\n1. Arduino IDE \u306b MQTT \u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5c0e\u5165\u3059\u308b\n2. Bluemix \u3067 IoT Foundation \u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u6210\u3059\u308b\n3. IoT Foundation \u306b\u30c7\u30d0\u30a4\u30b9\u3092\u767b\u9332\u3059\u308b\n4. Bluemix \u3067 IoT Foundation Starter \u3092\u4f5c\u6210\u3059\u308b\n5. \u30c7\u30fc\u30bf\u3092\u9001\u3063\u3066\u307f\u308b\n\nArduino IDE \u306b MQTT \u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5c0e\u5165\u3059\u308b\n====\nArduino IDE \u306b MQTT \u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5c0e\u5165\u3057\u307e\u3059\u3002\n\n\u4eca\u56de\u306f\u3001\u53c2\u8003\u306b\u3057\u3066\u3044\u308b [IBM developerWorks \u30ec\u30b7\u30d4](https://developer.ibm.com/recipes/tutorials/connect-an-esp8266-with-the-arduino-sdk-to-the-ibm-iot-foundation/ \"Connect an ESP8266 with the Arduino SDK to the IBM IoT Foundation\") \u3067\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308b [Arduino Client for MQTT](https://github.com/knolleary/pubsubclient \"Arduino Client for MQTT\") \u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\nGit \u3067\u5c0e\u5165\u3059\u308b\u5834\u5408\n----\nArduino IDE \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3001 `libraries` \u304c\u3042\u308b\u306e\u3067\u3001\u305d\u306e\u4e0b\u306b\u4efb\u610f\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u3063\u3066 `git clone` \u3057\u3066\u304f\u3060\u3055\u3044\u3002\n![20151214_arduino_002.png](https://qiita-image-store.s3.amazonaws.com/0/3812/ce3a747d-596e-527d-21cb-c402dc578505.png)\n\n\u300c\u30b9\u30b1\u30c3\u30c1\u300d>\u300cInclude Library\u300d>\u300cManage Libraries...\u300d\u3092\u958b\u304d\u307e\u3059\u3002\n![20151214_bluemix-iot_015.png](https://qiita-image-store.s3.amazonaws.com/0/3812/b5d58e7b-d74a-41a2-bee7-6bdd01d06e09.png)\n\n`PubSubClient` \u3092\u307f\u3064\u3051\u3066\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n![20151214_arduino_001.png](https://qiita-image-store.s3.amazonaws.com/0/3812/97cca53c-b0be-90b6-7838-b89217a5a11b.png)\n\nZip \u3067\u5c0e\u5165\u3059\u308b\u5834\u5408\n----\n\u3082\u3057\u3001Zip \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u5c0e\u5165\u3059\u308b\u65b9\u306f\u3001 Arduino IDE \u306e \u300cAdd .ZIP Library...\u300d\u3092\u5229\u7528\u3067\u304d\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n![20151214_bluemix-iot_014.png](https://qiita-image-store.s3.amazonaws.com/0/3812/bb3a7e7f-6f09-4391-2730-df15fe1976d7.png)\n\nBluemix \u3067 IoT Foundation \u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u6210\u3059\u308b\n====\n\u305d\u308c\u3067\u306f\u3055\u3063\u305d\u304f\u3001 [Bluemix \u30ab\u30bf\u30ed\u30b0](https://console.ng.bluemix.net/catalog/ \"Bluemix \u30ab\u30bf\u30ed\u30b0\") \u304b\u3089\u3001\u300cInternet of Things Foundation\u300d\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n![20151214_bluemix-iot_001.png](https://qiita-image-store.s3.amazonaws.com/0/3812/df1068bb-b639-7297-4d8d-4e440c73d1dd.png)\n\n\u540d\u524d\u3092\u4ed8\u3051\u3066\u3001\u30a2\u30f3\u30d0\u30a4\u30f3\u30c9\u306e\u307e\u307e\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n![20151214_bluemix-iot_002.png](https://qiita-image-store.s3.amazonaws.com/0/3812/8e31d144-1867-651e-aa63-b6f08b4b2420.png)\n\n\u300c\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u8d77\u52d5\u300d\u3067\u3001Internet of Things Foudation \u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u958b\u304d\u307e\u3059\u3002\n![20151214_bluemix-iot_004.png](https://qiita-image-store.s3.amazonaws.com/0/3812/118e9e3c-88af-200d-2578-e787754d10e8.png)\n\nIoT Foundation \u306b\u30c7\u30d0\u30a4\u30b9\u3092\u767b\u9332\u3059\u308b\n====\n\u6b21\u306b\u3001 `ESP-WROOM-02` \u3092\u60f3\u5b9a\u3057\u305f\u30c7\u30d0\u30a4\u30b9\u3092 IoT Foundaiton \u306b\u767b\u9332\u3057\u307e\u3059\u3002[Internet of Things Foundation \u3078\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u767b\u9332](https://www.eu-gb.bluemix.net/docs/services/IoT/index.html#gettingstartedtemplate \"Internet of Things Foundation \u3078\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u767b\u9332\") \u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\nInternet of Things Foundation \u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306f\u3053\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u30c7\u30d0\u30a4\u30b9\u306e\u8ffd\u52a0\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![20151214_bluemix-iot_018.png](https://qiita-image-store.s3.amazonaws.com/0/3812/498ed99e-e4f0-ffc6-3475-145b3f7addc0.png)\n\n\u4f5c\u6210\u76f4\u5f8c\u306f\u3001\u30c7\u30d0\u30a4\u30b9\u30fb\u30bf\u30a4\u30d7\u304c\u306a\u3044\u306e\u3067\u3001\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\u3002\n![20151214_bluemix-iot_019.png](https://qiita-image-store.s3.amazonaws.com/0/3812/1de12f38-074d-f53c-7ec7-227c3ba8de7f.png)\n\n\u4efb\u610f\u306e\u30c7\u30d0\u30a4\u30b9\u540d\u3092\u5165\u529b\u3057\u307e\u3059\u3002\u3053\u306e\u5f8c\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3044\u308d\u3044\u308d\u5165\u529b\u3067\u304d\u308b\u306e\u3067\u3001\u597d\u307f\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n![20151214_bluemix-iot_020.png](https://qiita-image-store.s3.amazonaws.com/0/3812/b03a5f08-e52d-e651-046f-62c624862cb5.png)\n\n\u30c7\u30d0\u30a4\u30b9\u30fb\u30bf\u30a4\u30d7\u304c\u4f5c\u6210\u3067\u304d\u305f\u306e\u3067\u3001\u30c7\u30d0\u30a4\u30b9\u306e\u8ffd\u52a0\u306b\u9032\u307f\u307e\u3059\u3002\n![20151214_bluemix-iot_024.png](https://qiita-image-store.s3.amazonaws.com/0/3812/b81d7a71-17e6-b5f6-dc1b-406048100b40.png)\n\n\u4efb\u610f\u306e\u30c7\u30d0\u30a4\u30b9\u540d\u3092\u5165\u529b\u3057\u307e\u3059\u3002\u3053\u306e\u5f8c\u3082\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3044\u308d\u3044\u308d\u8a2d\u5b9a\u3067\u304d\u308b\u306e\u3067\u304a\u597d\u307f\u3067\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n![20151214_bluemix-iot_025.png](https://qiita-image-store.s3.amazonaws.com/0/3812/450e4cf3-0262-82e6-4de6-6ceeb34094d9.png)\n\n\u30c8\u30fc\u30af\u30f3\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\u79c1\u306f\u300c\u81ea\u52d5\u751f\u6210\u8a8d\u8a3c\u30c8\u30fc\u30af\u30f3\u300d\u3092\u5229\u7528\u3057\u307e\u3057\u305f\u3002\n![20151214_bluemix-iot_027.png](https://qiita-image-store.s3.amazonaws.com/0/3812/9d703061-259e-7f7e-65fa-cbf5016eddbf.png)\n\n\u30c7\u30d0\u30a4\u30b9\u306e\u767b\u9332\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\n![20151214_bluemix-iot_029.png](https://qiita-image-store.s3.amazonaws.com/0/3812/7112ab17-febb-ee56-70ec-eadb50d09619.png)\n\n\u3053\u306e\u60c5\u5831\u306f\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u4f7f\u3044\u307e\u3059\u306e\u3067\u3001\u63a7\u3048\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\u30c8\u30fc\u30af\u30f3\u306f\u3053\u308c\u4ee5\u964d\u306f\u8868\u793a\u3055\u308c\u306a\u3044\u306e\u3067\u3001\u3053\u3053\u3067\u5fc5\u305a\u63a7\u3048\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\n- \u7d44\u7e54ID\n- \u30c7\u30d0\u30a4\u30b9\u30fb\u30bf\u30a4\u30d7\n- \u30c7\u30d0\u30a4\u30b9ID\n- \u8a8d\u8a3c\u30c8\u30fc\u30af\u30f3\n\n\nInternet of Things Foundation Starter \u3092\u4f5c\u6210\u3059\u308b\n====\n\u305d\u308c\u304b\u3089\u3001\u30c7\u30fc\u30bf\u306e\u53d7\u3051\u624b\u3082\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\u3002\n\n[\u30e2\u30ce\u306e\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u30fb\u30b9\u30bf\u30fc\u30bf\u30fc\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u3088\u308b\u30a2\u30d7\u30ea\u306e\u4f5c\u6210](https://www.eu-gb.bluemix.net/docs/#starters/IoT/../../starters/IoT/iot500.html \"\u30e2\u30ce\u306e\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u30fb\u30b9\u30bf\u30fc\u30bf\u30fc\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u3088\u308b\u30a2\u30d7\u30ea\u306e\u4f5c\u6210\") \u3092\u53c2\u8003\u306b\u3001IoT Foundation \u3068\u9023\u52d5\u3059\u308b\u30b9\u30bf\u30fc\u30bf\u30fc\u30a2\u30d7\u30ea\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\n\u3053\u308c\u306f [Node-RED](http://nodered.org/ \"Node-RED\") \u3068\u3044\u3046GUI\u3067\u51e6\u7406\u3092\u63cf\u3051\u308b\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30c4\u30fc\u30eb\u3092\u7528\u3044\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u3064\u304f\u308c\u307e\u3059\u3002\u79c1\u306f\u4eca\u56de\u521d\u3081\u3066\u89e6\u3063\u3066\u305d\u306e\u7c21\u5358\u3055\u306b\u3073\u3063\u304f\u308a\u3057\u307e\u3057\u305f\u3002\n\n[Bluemix \u30ab\u30bf\u30ed\u30b0](https://console.ng.bluemix.net/catalog/ \"Bluemix \u30ab\u30bf\u30ed\u30b0\") \u304b\u3089\u3001\u4eca\u5ea6\u306f\u300cInternet of Things Foundation **Starter**\u300d\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u9805\u76ee\u3092\u5165\u529b\u3057\u3066\u4f5c\u6210\u3092\u9032\u3081\u3066\u304f\u3060\u3055\u3044\u3002\n![20151214_bluemix-iot_035.png](https://qiita-image-store.s3.amazonaws.com/0/3812/5a6a62c9-4979-b8e1-a320-36148ee1677e.png)\n\n\u4f5c\u6210\u3067\u304d\u305f\u3089\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8d77\u52d5\u3092\u5f85\u3061\u307e\u3059\u3002\n\n\u8d77\u52d5\u3067\u304d\u305f\u3089\u3001URL\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u958b\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n![20151214_bluemix-iot_005.png](https://qiita-image-store.s3.amazonaws.com/0/3812/db54b6d5-d574-4e1f-9f14-e81b66a0fa8c.png)\n\nNode-RED \u306e\u30d5\u30ed\u30fc\u30a8\u30c7\u30a3\u30bf\u3092\u958b\u304d\u307e\u3059\u3002\n![20151214_bluemix-iot_007.png](https://qiita-image-store.s3.amazonaws.com/0/3812/fb5a87f0-0ba8-a6c7-d1df-a7ad89868c4a.png)\n\n\u3053\u3093\u306a\u753b\u9762\u3067\u3059\u3002\u30ce\u30fc\u30c9\u3092\u3064\u306a\u3052\u3066\u51e6\u7406\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\u3053\u306e\u6642\u70b9\u3067\u3059\u3067\u306b IoT Foundation \u304b\u3089\u306e\u5165\u529b\u3092\u53d7\u3051\u3066\u30c7\u30d0\u30c3\u30ac\u306b\u51fa\u529b\u3059\u308b\u51e6\u7406\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n![20151214_bluemix-iot_008.png](https://qiita-image-store.s3.amazonaws.com/0/3812/1f55aa33-9e42-c6c5-2c59-e5b0522709bf.png)\n\n\u3053\u3053\u3067\u3001Bluemix \u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u623b\u3063\u3066\u3001\u3053\u306e\u30b9\u30bf\u30fc\u30bf\u30fc\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u300cInternet of Things Foundation \u30b5\u30fc\u30d3\u30b9\u300d\u3092\u30d0\u30a4\u30f3\u30c9\u3057\u307e\u3059\u3002(\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u518d\u8d77\u52d5\u304c\u3042\u308a\u307e\u3059\u3002\uff09\n![20151214_bluemix-iot_031.png](https://qiita-image-store.s3.amazonaws.com/0/3812/c0e6b889-eed5-3ea3-6107-2f0e64f093f7.png)\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u518d\u8d77\u52d5\u304c\u7d42\u308f\u3063\u305f\u3089\u3001IoT Foundation \u304b\u3089\u306e\u5165\u529b\u3092\u8abf\u6574\u3059\u308b\u306e\u3067\u3001Node-RED \u30d5\u30ed\u30fc\u30a8\u30c7\u30a3\u30bf\u306e\u300cIBM IoT App In\u300d\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n![20151214_bluemix-iot_036.png](https://qiita-image-store.s3.amazonaws.com/0/3812/9e4682a1-2a17-ed51-4241-b1f0ce7d97d3.png)\n\n\u300cAuthentication\u300d\u306b\u300cBluemix Service\u300d\u3092\u9078\u629e\u3057\u3066\u300cOK\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\uff08\u9069\u5b9c\u3001\u300cDevice Id\u300d\u3092\u6307\u5b9a\u3057\u3066\u3082\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\uff09\n![20151214_bluemix-iot_037.png](https://qiita-image-store.s3.amazonaws.com/0/3812/8e0797d7-43cb-ecdf-8955-eafa88679ef8.png)\n\n\u3053\u308c\u3067\u6e96\u5099\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n\u30c7\u30fc\u30bf\u3092\u9001\u3063\u3066\u307f\u308b\n====\n\n\u3044\u3088\u3044\u3088\u30c7\u30fc\u30bf\u3092\u9001\u3063\u3066\u307f\u307e\u3057\u3087\u3046\uff01\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3001[IBM developerWorks \u30ec\u30b7\u30d4](https://developer.ibm.com/recipes/tutorials/connect-an-esp8266-with-the-arduino-sdk-to-the-ibm-iot-foundation/ \"Connect an ESP8266 with the Arduino SDK to the IBM IoT Foundation\") \u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u30d9\u30fc\u30b9\u306b\u3001[PubSubClient \u306e ESP8266\u5411\u3051\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9](https://github.com/knolleary/pubsubclient/blob/master/examples/mqtt_esp8266/mqtt_esp8266.ino \"pubsubclient/mqtt_esp8266.ino at master \u00b7 knolleary/pubsubclient\") \u3092\u53c2\u8003\u306b\u8abf\u6574\u3057\u307e\u3057\u305f\u3002\n\n```cpp:esp8266_to_iotf.ino\n/** \n * This source code refer to the recipe of IBM developerWorks, https://developer.ibm.com/recipes/tutorials/connect-an-esp8266-with-the-arduino-sdk-to-the-ibm-iot-foundation/ .\n */ \n\n#include <ESP8266WiFi.h>\n#include <PubSubClient.h>\n\n//-------- Customise these values -----------\nconst char* ssid = \"<WIFI SSID>\";\nconst char* password = \"<WIFI PASSWORD>\";\n\n#define ORG \"<ORGANIZATION_ID>\"      // \u7d44\u7e54ID\n#define DEVICE_TYPE \"<DEVICE_TYPE>\"  // \u30c7\u30d0\u30a4\u30b9\u30fb\u30bf\u30a4\u30d7\n#define DEVICE_ID \"<DEVICE_ID>\"      // \u30c7\u30d0\u30a4\u30b9ID\n#define TOKEN \"<TOKEN>\"              // \u8a8d\u8a3c\u30c8\u30fc\u30af\u30f3\n//-------- Customise the above values --------\n\nchar server[] = ORG \".messaging.internetofthings.ibmcloud.com\";\nchar topic[] = \"iot-2/evt/status/fmt/json\";\nchar authMethod[] = \"use-token-auth\";\nchar token[] = TOKEN;\nchar clientId[] = \"d:\" ORG \":\" DEVICE_TYPE \":\" DEVICE_ID;\n\nWiFiClient wifiClient;\nPubSubClient client(wifiClient);\n\nvoid callback(char* topic, byte* payload, unsigned int length) {\n Serial.println(\"callback invoked\");\n}\n\nvoid setup() {\n Serial.begin(115200);\n Serial.println();\n\n Serial.print(\"Connecting to \");\n Serial.print(ssid);\n WiFi.begin(ssid, password);\n\n while (WiFi.status() != WL_CONNECTED) {\n delay(500);\n Serial.print(\".\");\n } \n Serial.println(\"\");\n\n Serial.print(\"WiFi connected, IP address: \");\n Serial.println(WiFi.localIP());\n\n client.setServer(server, 1883);\n client.setCallback(callback);\n}\n\nint counter = 0;\n\nvoid loop() {\n\n if (!!!client.connected()) {\n Serial.print(\"Reconnecting client to \");\n Serial.println(server);\n while (!!!client.connect(clientId, authMethod, token)) {\n Serial.print(\".\");\n delay(500);\n }\n Serial.println();\n }\n\n String payload = \"{\\\"d\\\":{\\\"myName\\\":\\\"\";\n payload += DEVICE_TYPE;\n payload += \".\";\n payload += DEVICE_ID;\n payload += \"\\\",\\\"counter\\\":\";\n payload += counter;\n payload += \"}}\";\n \n Serial.print(\"Sending payload: \");\n Serial.println(payload);\n \n if (client.publish(topic, (char*) payload.c_str())) {\n Serial.println(\"Publish ok\");\n } else {\n Serial.println(\"Publish failed\");\n }\n\n if (1000 < counter) {\n  counter = 0;\n }\n else {\n  ++counter;\n }\n delay(10000);\n}\n```\n\u3044\u3056\uff01\n\n![20151214_bluemix-iot_030.png](https://qiita-image-store.s3.amazonaws.com/0/3812/0e8c69f8-87d1-a299-33c8-96d2fda2fe17.png)\n\n![20151214_bluemix-iot_033.png](https://qiita-image-store.s3.amazonaws.com/0/3812/3cd5f76e-9345-df82-eef7-8bdf7a799daf.png)\n\n\u3053\u306e `ESP-WROOM-02` \u304b\u3089 Bluemix \u306b\u3064\u306a\u304c\u3063\u305f\u30fc\u30fc\u30fc\u30fc\uff01\uff01\uff01(*\uff89\u03c9\uff89)\n\n\u671d4\u6642\u306e\u611f\u52d5\u3002\n\nEpilogue - \u304a\u308f\u308a\u306b\n====\n\u5b9f\u306f\u3001\u610f\u6c17\u8fbc\u3093\u3067\u4f5c\u696d\u958b\u59cb\u3059\u308b\u3082 Bluemix \u306e\u8a08\u753b\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u306b\u3076\u3064\u304b\u308a\u3001500\u30a8\u30e9\u30fc\u306e\u9023\u7d9a\u2026(;\u00b4\u0414\uff40)\n\n\u666e\u6bb5\u4f7f\u3063\u3066\u308b\u7c73\u56fd\u30ea\u30fc\u30b8\u30e7\u30f3\u3092\u3042\u304d\u3089\u3081\u3001\u4eee\u7720\u3057\u3066\u30e8\u30fc\u30ed\u30c3\u30d1\u304c\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u304c\u7d42\u308f\u308b\u306e\u3092\u5f85\u3061\u30014\u6642\u306b\u6674\u308c\u3066\u7e4b\u304c\u308b\u3068\u3044\u3046\u304e\u308a\u304e\u308a\u306a Advent Calendar \u53c2\u6226\u3068\u76f8\u6210\u308a\u307e\u3057\u305f(/\u30fb\u03c9\u30fb)/\n\n\u3042\u30fc\uff01\u3082\u3046\u671d\u3060\u3051\u3069 12/14 \u306e Advent Calendar \u3068\u3057\u3066\u6295\u7a3f\u3057\u307e\u3059\uff01\u304a\u3084\u3059\u307f\u306a\u3055\u3044\uff01\n\n[cloudpack]:https://cloudpack.jp/ \"cloudpack\uff08\u30af\u30e9\u30a6\u30c9\u30d1\u30c3\u30af\uff09 400\u793e\u3092\u8d85\u3048\u308b\u5c0e\u5165\u5b9f\u7e3e! EC2\u306a\u3069AWS\u30af\u30e9\u30a6\u30c9\u306e\u5c0e\u5165\u8a2d\u8a08\u3001\u69cb\u7bc9\u3001\u904b\u7528\u4fdd\u5b88\u30b5\u30fc\u30d3\u30b9\"\n[cloudpack-blog]:http://blog.cloudpack.jp/ \"cloudpack\u6280\u8853\u60c5\u5831\u30b5\u30a4\u30c8\"\n[\u5927\u5e73\u304b\u3065\u307f]:http://blog.cloudpack.jp/author/oohira/ \"\u5927\u5e73\u304b\u3065\u307f\u306e\u8a18\u4e8b\u4e00\u89a7\"\n", "tags": ["Bluemix", "IoTFoundation", "IoT", "ESP8266", "ESP-WROOM-02"]}