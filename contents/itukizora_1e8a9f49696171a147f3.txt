{"context": " More than 1 year has passed since last update.Perl\u3068Openssl\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3057\u3066\u3001\u5bfe\u8c61\u3068\u306a\u308b\u30c9\u30e1\u30a4\u30f3\u306eSSL\u8a3c\u660e\u66f8\u306e\u6709\u52b9\u671f\u9650\u3068\u4e2d\u9593\u8a3c\u660e\u66f8\u306e\u6709\u52b9\u671f\u9650\u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u306e\u30e1\u30e2\u3067\u3059\u3002\u8d85\u3056\u3063\u304f\u308a\u3002\n\u53d6\u5f97\u3057\u305f\u7d50\u679c\u3092\u5229\u7528\u3057\u3066\u76e3\u8996\u306a\u308a\u306b\u5229\u7528\u3067\u304d\u308b\u304b\u306a\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\n\u3061\u306a\u307f\u306bPerl\u306f\u521d\u3081\u3066\u66f8\u3044\u3066\u307f\u305f\u306e\u3067\u3061\u3068\u5f8c\u307b\u3069\u7dba\u9e97\u306b\u4fee\u6b63\u3057\u307e\u3059\u2025\u3002\n\u307e\u305f\u5bfe\u8c61\u3068\u306a\u308b\u30c9\u30e1\u30a4\u30f3\u306f\u30b0\u30ed\u30fc\u30d0\u30eb\u30b5\u30a4\u30f3\u3092\u3068\u308a\u3042\u3048\u305a\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3053\u3093\u306a\u611f\u3058\u3002\n\ngetYuukoukigen.pl\n#!/usr/bin/perl\n\n# \u30d5\u30e9\u30b0\u306a\u3069\u306a\u3069\n$flgCert = \"none\";\n$i = 0;\n\n# openssl\u30b3\u30de\u30f3\u30c9\u3067\u8a3c\u660e\u66f8\u3092\u53d6\u5f97\n@certfile = `openssl s_client -connect [\u5bfe\u8c61\u306e\u30c9\u30e1\u30a4\u30f3]:443 -showcerts < /dev/null 2>/dev/null`;\n\n# \u53d6\u5f97\u3057\u305f\u8a3c\u660e\u66f8\u304b\u3089\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u3068\u4e2d\u9593\u8a3c\u660e\u66f8\u3092\u62bd\u51fa\nforeach my $certline (@certfile) {\n\n        # \u6539\u884c\u30b3\u30fc\u30c9\u3092\u9664\u53bb\n        $certline =~ s/\\n//;\n\n        # \u8a3c\u660e\u66f8\u30b3\u30fc\u30c9\u306e\u59cb\u307e\u308a\u3068\u7d42\u308f\u308a\u3092\u691c\u51fa\n        if( $certline eq \"-----BEGIN CERTIFICATE-----\" ){\n                $flgCert = \"in\"\n        }elsif( $certline eq \"-----END CERTIFICATE-----\" ){\n                $flgCert = \"out\"\n        }\n\n        # \u8a3c\u660e\u66f8\u90e8\u5206\u306e\u307f\u914d\u5217\u306b\u683c\u7d0d (\u8a3c\u660e\u66f8\u3068\u4e2d\u9593\u8a3c\u660e\u66f8\u306e2\u7a2e\u985e\u3042\u308b\u306e\u3067\u305d\u308c\u305e\u308c\u3092\u683c\u7d0d)\n        if( $flgCert eq \"in\" ){\n                $cert[$i] = $cert[$i].$certline.\"\\n\";\n\n        }elsif( $flgCert eq \"out\" ){\n                $cert[$i] = $cert[$i].$certline.\"\\n\";\n                $flgCert = \"none\";\n                $i++;\n\n        }\n}\n\n# \u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u306e\u6709\u52b9\u671f\u9650\u60c5\u5831\u3092\u53d6\u5f97\n$certdetail = `echo \"$cert[0]\" | openssl x509 -text | sed -e \"/Not After/{s/^.* : //;p};d\"`;\nprint \"Server Cert -> \".$certdetail;\n\n# \u4e2d\u9593\u8a3c\u660e\u66f8\u306e\u6709\u52b9\u671f\u9650\u60c5\u5831\u3092\u53d6\u5f97\n$chaindetail = `echo \"$cert[1]\" | openssl x509 -text | sed -e \"/Not After/{s/^.* : //;p};d\"`;\nprint \"Chain Cert  -> \".$chaindetail;\n\n\n\u672c\u5f53\u306fPHP\u3067\u3084\u308a\u305f\u304b\u3063\u305f\u3093\u3067\u3059\u3051\u3069\u306d\u2025\u3002\n\u4ed6\u306e\u65b9\u6cd5\u3082\u63a2\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3088\u3002\n**Perl**\u3068**Openssl\u30b3\u30de\u30f3\u30c9**\u3092\u5229\u7528\u3057\u3066\u3001\u5bfe\u8c61\u3068\u306a\u308b\u30c9\u30e1\u30a4\u30f3\u306e**SSL\u8a3c\u660e\u66f8\u306e\u6709\u52b9\u671f\u9650**\u3068**\u4e2d\u9593\u8a3c\u660e\u66f8\u306e\u6709\u52b9\u671f\u9650**\u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u306e\u30e1\u30e2\u3067\u3059\u3002\u8d85\u3056\u3063\u304f\u308a\u3002\n\u53d6\u5f97\u3057\u305f\u7d50\u679c\u3092\u5229\u7528\u3057\u3066\u76e3\u8996\u306a\u308a\u306b\u5229\u7528\u3067\u304d\u308b\u304b\u306a\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u3061\u306a\u307f\u306bPerl\u306f\u521d\u3081\u3066\u66f8\u3044\u3066\u307f\u305f\u306e\u3067\u3061\u3068\u5f8c\u307b\u3069\u7dba\u9e97\u306b\u4fee\u6b63\u3057\u307e\u3059\u2025\u3002\n\u307e\u305f\u5bfe\u8c61\u3068\u306a\u308b\u30c9\u30e1\u30a4\u30f3\u306f\u30b0\u30ed\u30fc\u30d0\u30eb\u30b5\u30a4\u30f3\u3092\u3068\u308a\u3042\u3048\u305a\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3053\u3093\u306a\u611f\u3058\u3002\n\n```perl:getYuukoukigen.pl\n#!/usr/bin/perl\n\n# \u30d5\u30e9\u30b0\u306a\u3069\u306a\u3069\n$flgCert = \"none\";\n$i = 0;\n\n# openssl\u30b3\u30de\u30f3\u30c9\u3067\u8a3c\u660e\u66f8\u3092\u53d6\u5f97\n@certfile = `openssl s_client -connect [\u5bfe\u8c61\u306e\u30c9\u30e1\u30a4\u30f3]:443 -showcerts < /dev/null 2>/dev/null`;\n\n# \u53d6\u5f97\u3057\u305f\u8a3c\u660e\u66f8\u304b\u3089\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u3068\u4e2d\u9593\u8a3c\u660e\u66f8\u3092\u62bd\u51fa\nforeach my $certline (@certfile) {\n\n        # \u6539\u884c\u30b3\u30fc\u30c9\u3092\u9664\u53bb\n        $certline =~ s/\\n//;\n\n        # \u8a3c\u660e\u66f8\u30b3\u30fc\u30c9\u306e\u59cb\u307e\u308a\u3068\u7d42\u308f\u308a\u3092\u691c\u51fa\n        if( $certline eq \"-----BEGIN CERTIFICATE-----\" ){\n                $flgCert = \"in\"\n        }elsif( $certline eq \"-----END CERTIFICATE-----\" ){\n                $flgCert = \"out\"\n        }\n\n        # \u8a3c\u660e\u66f8\u90e8\u5206\u306e\u307f\u914d\u5217\u306b\u683c\u7d0d (\u8a3c\u660e\u66f8\u3068\u4e2d\u9593\u8a3c\u660e\u66f8\u306e2\u7a2e\u985e\u3042\u308b\u306e\u3067\u305d\u308c\u305e\u308c\u3092\u683c\u7d0d)\n        if( $flgCert eq \"in\" ){\n                $cert[$i] = $cert[$i].$certline.\"\\n\";\n\n        }elsif( $flgCert eq \"out\" ){\n                $cert[$i] = $cert[$i].$certline.\"\\n\";\n                $flgCert = \"none\";\n                $i++;\n\n        }\n}\n\n# \u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u306e\u6709\u52b9\u671f\u9650\u60c5\u5831\u3092\u53d6\u5f97\n$certdetail = `echo \"$cert[0]\" | openssl x509 -text | sed -e \"/Not After/{s/^.* : //;p};d\"`;\nprint \"Server Cert -> \".$certdetail;\n\n# \u4e2d\u9593\u8a3c\u660e\u66f8\u306e\u6709\u52b9\u671f\u9650\u60c5\u5831\u3092\u53d6\u5f97\n$chaindetail = `echo \"$cert[1]\" | openssl x509 -text | sed -e \"/Not After/{s/^.* : //;p};d\"`;\nprint \"Chain Cert  -> \".$chaindetail;\n```\n\n\u672c\u5f53\u306fPHP\u3067\u3084\u308a\u305f\u304b\u3063\u305f\u3093\u3067\u3059\u3051\u3069\u306d\u2025\u3002\n\u4ed6\u306e\u65b9\u6cd5\u3082\u63a2\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3088\u3002\n", "tags": ["Perl", "SSL", "openssl"]}