{"context": " More than 1 year has passed since last update.Play framework2(Scala)\u3067\u3001Ajax\u3092\u4f7f\u3063\u3066\u753b\u9762\u9077\u79fb\u305b\u305a\u306b\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u3059\u3002\nJavaScript\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u4f7f\u3063\u3066\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u3001\u5b9f\u88c5\u3002\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306eApplication.scala\n\nApplication.scala\npackage controllers\n\nimport play.api._\nimport play.api.mvc._\nimport models.Comment\n\nobject Application extends Controller {\n\n  def index = Action {\n    Ok(views.html.index(Comment.all()))\n  }\n\n  def postComment(comment: String) = Action { implicit request =>\n    Comment.insertDB(comment)\n    Ok\n  }\n\n  def javascriptRoutes = Action { implicit request =>\n    import routes.javascript._\n    Ok(\n       Routes.javascriptRouter(\"jsRoutes\")(routes.javascript.Application.postComment)\n    ).as(\"text/javascript\")\n  }\n}\n\n\n\u30d3\u30e5\u30fc\u306emain.scala\n\nmain.scala\n@(title: String)(content: Html)\n\n<!DOCTYPE html>\n<html>\n    <head>\n        <title>@title</title>\n        <link rel=\"stylesheet\" media=\"screen\" href=\"@routes.Assets.at(\"stylesheets/main.css\")\">\n        <link rel=\"shortcut icon\" type=\"image/png\" href=\"@routes.Assets.at(\"images/favicon.png\")\">\n        <script src=\"@routes.Assets.at(\"javascripts/jquery-1.9.0.min.js\")\" type=\"text/javascript\"></script>\n        <script type=\"text/javascript\" src=\"@routes.Application.javascriptRoutes\"></script>\n    </head>\n    <body>\n        @content\n    </body>\n</html>\n\n\n\u30eb\u30fc\u30bf\u3092\u30d8\u30c3\u30c0\u306b\u66f8\u304d\u3001\u8aad\u307f\u8fbc\u307e\u305b\u307e\u3059\u3002\n\u30d3\u30e5\u30fc\u306eindex.scala\n\nindex.scala\n@(comments: List[Comment])\n\n@main(\"Ajax Comment\") {\n\n<form class=\"form-inline\" id=\"comment-form\">\n  <input type=\"text\" id=\"input-comment\" placeholder=\"comment\" />\n  <button type=\"submit\" id=\"comment-submit\">post</button>\n</form>\n\n<!-- \u30b3\u30e1\u30f3\u30c8\u3092\u8868\u793a -->\n<ul id=\"comments\">\n  @comments.map { comment =>\n    <li>@comment.comment</li>\n  }\n<ul>\n\n<script>\n$('#comment-form').submit(function(event) {\n  event.preventDefault();\n  var comment = $(\"#input-comment\").val();\n  jsRoutes.controllers.Application.postComment(comment).ajax({\n    // \u9001\u4fe1\u3057\u305f\u3089\u30dc\u30bf\u30f3\u3092\u4f7f\u7528\u4e0d\u53ef\u306b\u3057\u4e8c\u91cd\u6295\u7a3f\u3092\u9632\u3050\n    beforeSend: function() {\n      $(\"#comment-submit\").attr('disabled', true);\n    },\n    // \u5b8c\u4e86\u3057\u305f\u3089\u30dc\u30bf\u30f3\u4f7f\u7528\u4e0d\u53ef\u3092\u89e3\u9664\u3059\u308b\n    complete: function() {\n      $(\"#comment-submit\").attr('disabled', false);\n    },\n    // \u6295\u7a3f\u304c\u6210\u529f\u3057\u305f\u3089\u65b0\u3057\u3044\u30b3\u30e1\u30f3\u30c8\u3092\u8868\u793a\u3059\u308b\n    success: function(datetime) {\n      $(\"#input-comment\").val(\"\");\n      $('#comments').append(\"<li>\" + comment + \"</li>\")\n    },\n    error: function() {\n      alert(\"error\")\n    }\n  })\n});\n</script>\n\n}\n\n\n\u30e2\u30c7\u30eb\u306eComment.scala\n\nComment.scala\npackage models\n\nimport anorm._\nimport anorm.SqlParser._\nimport play.api.db._\nimport play.api.Play.current\n\ncase class Comment(id: Long, comment: String)\n\nobject Comment {\n\n  def all(): List[Comment] = DB.withConnection { implicit c =>\n    SQL(\"select * from comment\").as(comment *)\n  }\n\n  def insertDB(comment: String) {\n    DB.withConnection { implicit c =>\n      SQL(\"\"\"\n          insert into comment (comment)\n          values ({comment})\n          \"\"\"\n      ).on(\n        'comment -> comment\n      ).executeUpdate()\n    }\n  }\n\n  val comment = {\n    get[Long](\"id\") \u203e\n    get[String](\"comment\") map {\n      case id \u203e comment => Comment(id, comment)\n    }\n  }\n}\n\n\nroutes\n# Routes\n# This file defines all application routes (Higher priority routes first)\n# \u203e\u203e\u203e\u203e\n\n# Home page\nGET     /                           controllers.Application.index\n\nPOST    /comment                    controllers.Application.postComment(comment: String)\n\n# Map static resources from the /public folder to the /assets URL path\nGET     /assets/*file               controllers.Assets.at(path=\"/public\", file)\n\nGET     /javascriptRoutes           controllers.Application.javascriptRoutes\n\n\u305d\u308c\u4ee5\u5916\u306e\u30d5\u30a1\u30a4\u30eb\u306fgithub\u306b\u3042\u3052\u3066\u3044\u307e\u3059\u3002\n\nPlay framework2(Scala)\u3067\u3001Ajax\u3092\u4f7f\u3063\u3066\u753b\u9762\u9077\u79fb\u305b\u305a\u306b\u30b3\u30e1\u30f3\u30c8\u3092\u6295\u7a3f\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u3059\u3002\n[JavaScript\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0](http://www.playframework-ja.org/documentation/2.1.5/ScalaJavascriptRouting)\u3092\u4f7f\u3063\u3066\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u3001\u5b9f\u88c5\u3002\n\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306eApplication.scala\n\n```scala:Application.scala\npackage controllers\n\nimport play.api._\nimport play.api.mvc._\nimport models.Comment\n\nobject Application extends Controller {\n\n  def index = Action {\n    Ok(views.html.index(Comment.all()))\n  }\n\n  def postComment(comment: String) = Action { implicit request =>\n    Comment.insertDB(comment)\n    Ok\n  }\n\n  def javascriptRoutes = Action { implicit request =>\n    import routes.javascript._\n    Ok(\n       Routes.javascriptRouter(\"jsRoutes\")(routes.javascript.Application.postComment)\n    ).as(\"text/javascript\")\n  }\n}\n```\n\n\u30d3\u30e5\u30fc\u306emain.scala\n\n```html:main.scala\n@(title: String)(content: Html)\n\n<!DOCTYPE html>\n<html>\n    <head>\n        <title>@title</title>\n        <link rel=\"stylesheet\" media=\"screen\" href=\"@routes.Assets.at(\"stylesheets/main.css\")\">\n        <link rel=\"shortcut icon\" type=\"image/png\" href=\"@routes.Assets.at(\"images/favicon.png\")\">\n        <script src=\"@routes.Assets.at(\"javascripts/jquery-1.9.0.min.js\")\" type=\"text/javascript\"></script>\n        <script type=\"text/javascript\" src=\"@routes.Application.javascriptRoutes\"></script>\n    </head>\n    <body>\n        @content\n    </body>\n</html>\n```\n\n\u30eb\u30fc\u30bf\u3092\u30d8\u30c3\u30c0\u306b\u66f8\u304d\u3001\u8aad\u307f\u8fbc\u307e\u305b\u307e\u3059\u3002\n\n\n\u30d3\u30e5\u30fc\u306eindex.scala\n\n```html:index.scala\n@(comments: List[Comment])\n\n@main(\"Ajax Comment\") {\n\n<form class=\"form-inline\" id=\"comment-form\">\n  <input type=\"text\" id=\"input-comment\" placeholder=\"comment\" />\n  <button type=\"submit\" id=\"comment-submit\">post</button>\n</form>\n\n<!-- \u30b3\u30e1\u30f3\u30c8\u3092\u8868\u793a -->\n<ul id=\"comments\">\n  @comments.map { comment =>\n    <li>@comment.comment</li>\n  }\n<ul>\n\n<script>\n$('#comment-form').submit(function(event) {\n  event.preventDefault();\n  var comment = $(\"#input-comment\").val();\n  jsRoutes.controllers.Application.postComment(comment).ajax({\n    // \u9001\u4fe1\u3057\u305f\u3089\u30dc\u30bf\u30f3\u3092\u4f7f\u7528\u4e0d\u53ef\u306b\u3057\u4e8c\u91cd\u6295\u7a3f\u3092\u9632\u3050\n    beforeSend: function() {\n      $(\"#comment-submit\").attr('disabled', true);\n    },\n    // \u5b8c\u4e86\u3057\u305f\u3089\u30dc\u30bf\u30f3\u4f7f\u7528\u4e0d\u53ef\u3092\u89e3\u9664\u3059\u308b\n    complete: function() {\n      $(\"#comment-submit\").attr('disabled', false);\n    },\n    // \u6295\u7a3f\u304c\u6210\u529f\u3057\u305f\u3089\u65b0\u3057\u3044\u30b3\u30e1\u30f3\u30c8\u3092\u8868\u793a\u3059\u308b\n    success: function(datetime) {\n      $(\"#input-comment\").val(\"\");\n      $('#comments').append(\"<li>\" + comment + \"</li>\")\n    },\n    error: function() {\n      alert(\"error\")\n    }\n  })\n});\n</script>\n\n}\n```\n\n\u30e2\u30c7\u30eb\u306eComment.scala\n\n```scala:Comment.scala\npackage models\n\nimport anorm._\nimport anorm.SqlParser._\nimport play.api.db._\nimport play.api.Play.current\n\ncase class Comment(id: Long, comment: String)\n\nobject Comment {\n\n  def all(): List[Comment] = DB.withConnection { implicit c =>\n    SQL(\"select * from comment\").as(comment *)\n  }\n\n  def insertDB(comment: String) {\n    DB.withConnection { implicit c =>\n      SQL(\"\"\"\n          insert into comment (comment)\n          values ({comment})\n          \"\"\"\n      ).on(\n        'comment -> comment\n      ).executeUpdate()\n    }\n  }\n\n  val comment = {\n    get[Long](\"id\") \u203e\n    get[String](\"comment\") map {\n      case id \u203e comment => Comment(id, comment)\n    }\n  }\n}\n```\n\nroutes\n\n```yaml\n# Routes\n# This file defines all application routes (Higher priority routes first)\n# \u203e\u203e\u203e\u203e\n\n# Home page\nGET     /                           controllers.Application.index\n\nPOST    /comment                    controllers.Application.postComment(comment: String)\n\n# Map static resources from the /public folder to the /assets URL path\nGET     /assets/*file               controllers.Assets.at(path=\"/public\", file)\n\nGET     /javascriptRoutes           controllers.Application.javascriptRoutes\n```\n\n\u305d\u308c\u4ee5\u5916\u306e\u30d5\u30a1\u30a4\u30eb\u306f[github](https://github.com/shzero5/Ajax-Comment-Form)\u306b\u3042\u3052\u3066\u3044\u307e\u3059\u3002", "tags": ["Scala", "Play2", "PlayFramework"]}