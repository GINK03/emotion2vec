{"context": "\n\n\u6982\u8981\n\u306a\u3093\u3068\u306a\u304f\u5c5e\u4eba\u7684\u3067\u8a00\u8a9e\u5316\u3055\u308c\u308b\u3053\u3068\u306e\u5c11\u306a\u3044\u6280\u8853\u3067\u3001\u306a\u304b\u306a\u304b\u30b9\u30ad\u30eb\u30a2\u30c3\u30d7\u3084\u6280\u8853\u306e\u6a2a\u5c55\u304c\u3057\u3065\u3089\u3044\u5206\u91ce\u306a\u30a4\u30e1\u30fc\u30b8\u3002\n\u4e00\u56de\u307e\u3068\u3081\u3066\u307f\u308b\u3002\n\n\u5168\u822c\n\n\u57fa\u672c\n\u30fb\u4ed5\u69d8\u3092\u6e80\u305f\u3057\u3066\u3044\u308b\u304b\n\u30fb\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3084\u4e0d\u8981\u306a\u30b3\u30fc\u30c9\u306f\u542b\u307e\u308c\u3066\u3044\u306a\u3044\u304b\n\u30fb\u51e6\u7406\u901f\u5ea6\u3084\u8ca0\u8377\u306b\u554f\u984c\u306f\u306a\u3044\u304b\n\u30fb\u4f7f\u3044\u56de\u3057\u306e\u52b9\u304f\u8a2d\u8a08\u306b\u306a\u3063\u3066\u3044\u308b\u304b\n\u30fb\u540c\u3058\u51e6\u7406\u3092\u4f55\u5ea6\u3082\u66f8\u3044\u3066\u3044\u306a\u3044\u304b\n\u30fb\u65e2\u306b\u5b58\u5728\u3059\u308b\u51e6\u7406\u3092\u65b0\u898f\u3067\u66f8\u3044\u3066\u3044\u308b\u7b87\u6240\u304c\u306a\u3044\u304b\n\u30fb\u65e2\u5b58\u306e\u51e6\u7406\u306b\u5f71\u97ff\u304c\u3067\u306a\u3044\u304b\n\n\u53ef\u8aad\u6027\n\u30fb\u30c1\u30fc\u30e0\u306e\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u898f\u7d04\u3092\u5b88\u3063\u3066\u3044\u308b\u304b\n\u30fb\u5909\u6570\u3084\u95a2\u6570\u306e\u547d\u540d\u306f\u9069\u5207\u304b\n\u30fb\u3082\u3063\u3068\u30b7\u30f3\u30d7\u30eb\u306a\u66f8\u304d\u65b9\u306f\u3067\u304d\u306a\u3044\u304b\n\n\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\n\u30fb\u7570\u5e38\u7cfb\u3092\u8003\u616e\u3057\u305f\u8a2d\u8a08\u306b\u306a\u3063\u3066\u3044\u308b\u304b\n\u30fb\u30e6\u30fc\u30b6\u4e0d\u5229\u76ca\u304c\u8d77\u3053\u308b\u51e6\u7406\u306e\u9806\u756a\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u304b\n\nModel\n\u30fbmaster-slave\u9045\u5ef6\u3067\u554f\u984c\u304c\u8d77\u304d\u306a\u3044\u304b\n\n\u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u3084\u30af\u30a8\u30ea\u306f\u9069\u5207\u304b\n\n\u30af\u30a8\u30ea\u306e\u91cf\n\u30fbPV\u304b\u3089\u60f3\u5b9a\u3055\u308c\u308b\u30af\u30a8\u30ea\u306e\u5897\u52a0\u91cf\u304b\u3089DB\u306e\u8ca0\u8377\u3092\u60f3\u5b9a\u3057\u305f\u3068\u304d\u306b\u3001\u305d\u306e\u30af\u30a8\u30ea\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3082\u554f\u984c\u306a\u3044\u304b\n\u30fb\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u6709\u7121\u3084\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u683c\u7d0d\u5834\u6240\u306f\u9069\u5207\u304b\n\u30fb\u66f4\u65b0\u6642\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u524a\u9664\u306a\u3069\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u306f\u9069\u5207\u304b\n\u30fb\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30ad\u30fc\u306f\u9069\u5207\u304b\uff08\u7570\u306a\u308b\u30c7\u30fc\u30bf\u3092\u540c\u3058Key\u306b\u683c\u7d0d\u3057\u3066\u3044\u306a\u3044\u304b\uff09\n\u30fb\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u683c\u7d0d\u3059\u308b\u30c7\u30fc\u30bf\u30b5\u30a4\u30ba\u306f\u9069\u5207\u304b\n\u30fb\u51e6\u7406\u306e\u6d41\u308c\u3084Master/Slave\u9045\u5ef6\u3067\u4e0d\u9069\u5207\u306a\u5024\u304c\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u3066\u3057\u307e\u3046\u30b1\u30fc\u30b9\u306f\u306a\u3044\u304b\n\u30fb\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u306f\u9069\u5207\u304b\n\n\u30af\u30a8\u30ea\u306e\u91cd\u3055\n\u30fb\u8ca0\u8377\u306e\u9ad8\u3044\u30af\u30a8\u30ea\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u304b\u3001\u9069\u5207\u306bIndex\u306f\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u304b\n\u30fbIndex\u304c\u4f7f\u308f\u308c\u3066\u3044\u305f\u3068\u3057\u3066\u3082\u3001Rows\u306f\u3061\u3083\u3093\u3068\u7d5e\u3089\u308c\u3066\u3044\u308b\u304b\n\nDB\u30b5\u30fc\u30d0\u306e\u72b6\u6cc1\n\u30fb\u60f3\u5b9a\u3055\u308c\u308b\u30c7\u30fc\u30bf\u306e\u5897\u52a0\u91cf\u304c\u5897\u3048\u305f\u3068\u3057\u3066\u3001\u683c\u7d0d\u5148\u306eDB\u30b5\u30fc\u30d0\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u554f\u984c\u306a\u3044\u304b\n\u30fb\u767a\u884c\u30af\u30a8\u30ea\u304c\u5897\u3048\u305f\u3068\u3057\u3066QPS (CPU Usage, la)\u306b\u554f\u984c\u306a\u3044\u304b\n\nController\n\n\u30d6\u30e9\u30a6\u30b6\u30d0\u30c3\u30af\u3001\u9023\u6253\u306a\u3069\u3067\u4e0d\u6b63\u306a\u51e6\u7406\u304c\u8d77\u304d\u306a\u3044\u304b\n\u5bfe\u5fdc\u4f8b)\nDB\u64cd\u4f5c\u304c\u767a\u751f\u3059\u308b\u7b87\u6240\u3067token\u306e\u767a\u884c/\u78ba\u8a8d\u3092\u884c\u3046\nreferer\u306e\u53c2\u7167\u3067\u9077\u79fb\u5143\u3092\u9650\u5b9a\u3059\u308b\nstate\u3092\u30e6\u30fc\u30b6\u306b\u6301\u305f\u305b\u3001\u305d\u306e\u5024\u3092\u9077\u79fb\u3055\u305b\u3066\u3044\u304f\u3053\u3068\u3067\u4e0d\u6b63\u306a\u51e6\u7406\u306e\u6d41\u308c\u306b\u306a\u3089\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n\u51e6\u7406\u306elock\u3092\u884c\u3046\n\nXSS, SQL Injection, HTTP Header Injection\u5bfe\u7b56\u306f\u9069\u5207\u306b\u3055\u308c\u3066\u3044\u308b\u304b\n\u30fb\u30d5\u30a9\u30fc\u30e0\u304b\u3089\u306e\u5165\u529b\u5024\u306e\u7cbe\u67fb\u306f\u9069\u5207\u306b\u884c\u308f\u308c\u3066\u3044\u308b\u304b\n\u30fbDB\u306e\u5024\u3092\u8868\u793a\u3059\u308b\u969b\u306bescape\u3055\u308c\u305f\u5024\u306e\u8868\u793a\u304c\u3055\u308c\u3066\u3044\u308b\u304b\n\nCSRF\u5bfe\u7b56\u306f\u9069\u5207\u306b\u3055\u308c\u3066\u3044\u308b\u304b\n\u5bfe\u5fdc\u4f8b)\ntoken\u306e\u767a\u884c\nreferer\u3067\u9077\u79fb\u5143\u306e\u53c2\u7167\n# \u6982\u8981\n\u306a\u3093\u3068\u306a\u304f\u5c5e\u4eba\u7684\u3067\u8a00\u8a9e\u5316\u3055\u308c\u308b\u3053\u3068\u306e\u5c11\u306a\u3044\u6280\u8853\u3067\u3001\u306a\u304b\u306a\u304b\u30b9\u30ad\u30eb\u30a2\u30c3\u30d7\u3084\u6280\u8853\u306e\u6a2a\u5c55\u304c\u3057\u3065\u3089\u3044\u5206\u91ce\u306a\u30a4\u30e1\u30fc\u30b8\u3002\n\u4e00\u56de\u307e\u3068\u3081\u3066\u307f\u308b\u3002\n\n## \u5168\u822c \n### \u57fa\u672c\n\u30fb\u4ed5\u69d8\u3092\u6e80\u305f\u3057\u3066\u3044\u308b\u304b\n\u30fb\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3084\u4e0d\u8981\u306a\u30b3\u30fc\u30c9\u306f\u542b\u307e\u308c\u3066\u3044\u306a\u3044\u304b\n\u30fb\u51e6\u7406\u901f\u5ea6\u3084\u8ca0\u8377\u306b\u554f\u984c\u306f\u306a\u3044\u304b\n\u30fb\u4f7f\u3044\u56de\u3057\u306e\u52b9\u304f\u8a2d\u8a08\u306b\u306a\u3063\u3066\u3044\u308b\u304b\n\u30fb\u540c\u3058\u51e6\u7406\u3092\u4f55\u5ea6\u3082\u66f8\u3044\u3066\u3044\u306a\u3044\u304b\n\u30fb\u65e2\u306b\u5b58\u5728\u3059\u308b\u51e6\u7406\u3092\u65b0\u898f\u3067\u66f8\u3044\u3066\u3044\u308b\u7b87\u6240\u304c\u306a\u3044\u304b\n\u30fb\u65e2\u5b58\u306e\u51e6\u7406\u306b\u5f71\u97ff\u304c\u3067\u306a\u3044\u304b\n\n### \u53ef\u8aad\u6027\n\u30fb\u30c1\u30fc\u30e0\u306e\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u898f\u7d04\u3092\u5b88\u3063\u3066\u3044\u308b\u304b\n\u30fb\u5909\u6570\u3084\u95a2\u6570\u306e\u547d\u540d\u306f\u9069\u5207\u304b\n\u30fb\u3082\u3063\u3068\u30b7\u30f3\u30d7\u30eb\u306a\u66f8\u304d\u65b9\u306f\u3067\u304d\u306a\u3044\u304b\n\n### \u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\n\u30fb\u7570\u5e38\u7cfb\u3092\u8003\u616e\u3057\u305f\u8a2d\u8a08\u306b\u306a\u3063\u3066\u3044\u308b\u304b\n\u30fb\u30e6\u30fc\u30b6\u4e0d\u5229\u76ca\u304c\u8d77\u3053\u308b\u51e6\u7406\u306e\u9806\u756a\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u304b\n\n## Model\n\u30fbmaster-slave\u9045\u5ef6\u3067\u554f\u984c\u304c\u8d77\u304d\u306a\u3044\u304b\n\n### \u30c6\u30fc\u30d6\u30eb\u8a2d\u8a08\u3084\u30af\u30a8\u30ea\u306f\u9069\u5207\u304b\n#### \u30af\u30a8\u30ea\u306e\u91cf\n\u30fbPV\u304b\u3089\u60f3\u5b9a\u3055\u308c\u308b\u30af\u30a8\u30ea\u306e\u5897\u52a0\u91cf\u304b\u3089DB\u306e\u8ca0\u8377\u3092\u60f3\u5b9a\u3057\u305f\u3068\u304d\u306b\u3001\u305d\u306e\u30af\u30a8\u30ea\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3082\u554f\u984c\u306a\u3044\u304b\n\u30fb\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u6709\u7121\u3084\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u683c\u7d0d\u5834\u6240\u306f\u9069\u5207\u304b\n\u30fb\u66f4\u65b0\u6642\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u524a\u9664\u306a\u3069\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u306f\u9069\u5207\u304b\n\u30fb\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30ad\u30fc\u306f\u9069\u5207\u304b\uff08\u7570\u306a\u308b\u30c7\u30fc\u30bf\u3092\u540c\u3058Key\u306b\u683c\u7d0d\u3057\u3066\u3044\u306a\u3044\u304b\uff09\n\u30fb\u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u683c\u7d0d\u3059\u308b\u30c7\u30fc\u30bf\u30b5\u30a4\u30ba\u306f\u9069\u5207\u304b\n\u30fb\u51e6\u7406\u306e\u6d41\u308c\u3084Master/Slave\u9045\u5ef6\u3067\u4e0d\u9069\u5207\u306a\u5024\u304c\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u3066\u3057\u307e\u3046\u30b1\u30fc\u30b9\u306f\u306a\u3044\u304b\n\u30fb\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u306f\u9069\u5207\u304b\n\n#### \u30af\u30a8\u30ea\u306e\u91cd\u3055\n\u30fb\u8ca0\u8377\u306e\u9ad8\u3044\u30af\u30a8\u30ea\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u304b\u3001\u9069\u5207\u306bIndex\u306f\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u304b\n\u30fbIndex\u304c\u4f7f\u308f\u308c\u3066\u3044\u305f\u3068\u3057\u3066\u3082\u3001Rows\u306f\u3061\u3083\u3093\u3068\u7d5e\u3089\u308c\u3066\u3044\u308b\u304b\n\n#### DB\u30b5\u30fc\u30d0\u306e\u72b6\u6cc1\n\u30fb\u60f3\u5b9a\u3055\u308c\u308b\u30c7\u30fc\u30bf\u306e\u5897\u52a0\u91cf\u304c\u5897\u3048\u305f\u3068\u3057\u3066\u3001\u683c\u7d0d\u5148\u306eDB\u30b5\u30fc\u30d0\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u554f\u984c\u306a\u3044\u304b\n\u30fb\u767a\u884c\u30af\u30a8\u30ea\u304c\u5897\u3048\u305f\u3068\u3057\u3066QPS (CPU Usage, la)\u306b\u554f\u984c\u306a\u3044\u304b\n\n## Controller\n### \u30d6\u30e9\u30a6\u30b6\u30d0\u30c3\u30af\u3001\u9023\u6253\u306a\u3069\u3067\u4e0d\u6b63\u306a\u51e6\u7406\u304c\u8d77\u304d\u306a\u3044\u304b\n\u5bfe\u5fdc\u4f8b)\nDB\u64cd\u4f5c\u304c\u767a\u751f\u3059\u308b\u7b87\u6240\u3067token\u306e\u767a\u884c/\u78ba\u8a8d\u3092\u884c\u3046\nreferer\u306e\u53c2\u7167\u3067\u9077\u79fb\u5143\u3092\u9650\u5b9a\u3059\u308b\nstate\u3092\u30e6\u30fc\u30b6\u306b\u6301\u305f\u305b\u3001\u305d\u306e\u5024\u3092\u9077\u79fb\u3055\u305b\u3066\u3044\u304f\u3053\u3068\u3067\u4e0d\u6b63\u306a\u51e6\u7406\u306e\u6d41\u308c\u306b\u306a\u3089\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n\u51e6\u7406\u306elock\u3092\u884c\u3046\n\n### XSS, SQL Injection, HTTP Header Injection\u5bfe\u7b56\u306f\u9069\u5207\u306b\u3055\u308c\u3066\u3044\u308b\u304b\n\u30fb\u30d5\u30a9\u30fc\u30e0\u304b\u3089\u306e\u5165\u529b\u5024\u306e\u7cbe\u67fb\u306f\u9069\u5207\u306b\u884c\u308f\u308c\u3066\u3044\u308b\u304b\n\u30fbDB\u306e\u5024\u3092\u8868\u793a\u3059\u308b\u969b\u306bescape\u3055\u308c\u305f\u5024\u306e\u8868\u793a\u304c\u3055\u308c\u3066\u3044\u308b\u304b\n\n### CSRF\u5bfe\u7b56\u306f\u9069\u5207\u306b\u3055\u308c\u3066\u3044\u308b\u304b\n\u5bfe\u5fdc\u4f8b)\ntoken\u306e\u767a\u884c\nreferer\u3067\u9077\u79fb\u5143\u306e\u53c2\u7167\n", "tags": ["PHP", "mvc"]}