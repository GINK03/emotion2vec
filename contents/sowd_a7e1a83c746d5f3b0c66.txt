{"context": " More than 1 year has passed since last update.\n\n\u5185\u5bb9\n\u5171\u6709\u30b5\u30fc\u30d0\u63a5\u7d9a\u306b\u95a2\u3059\u308b\u4ee5\u4e0b\u306e\u9805\u76ee\u3092\u8a18\u8f09\u3002\n\n\u5171\u6709\u30b5\u30fc\u30d0\u63a5\u7d9a\u306e\u8a2d\u5b9a\nXMLDB\u5c0e\u5165\u6642\u306e\u6ce8\u610f\u4e8b\u9805\n\n\n\u5171\u6709\u30b5\u30fc\u30d0\u63a5\u7d9a\u306e\u8a2d\u5b9a\n\n1. \u521d\u671f\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u78ba\u8a8d\n\u4ee5\u4e0b\u306e\u521d\u671f\u5316\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u78ba\u8a8d\u3059\u308b\u3002  \n\nSHARED_SERVERS\u306b\"1\"\u4ee5\u4e0a\u306e\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3002\nDISPATCHERS\u306b\u6b63\u3057\u3044\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\"(PROTOCOL=TCP)\"\u3002\n\n\u4ee5\u4e0b\u306eSQL\u3067\u78ba\u8a8d\u3002  \nSQL> col name for a30\nSQL> col value for a50\nSQL> select name,value from v$parameter where name in ('dispatchers','shared_servers');\n\n NAME                           VALUE\n------------------------------ --------------------------------------------------\ndispatchers                    (PROTOCOL=TCP)\nshared_servers                 1\n\n\n\u5fc5\u8981\u304c\u3042\u308c\u3070\u5909\u66f4\u3002\nSQL> alter system set shared_servers=5 scope=both;\n\n\u30b7\u30b9\u30c6\u30e0\u304c\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\u3002\n\nSQL> alter system set DISPATCHERS='(PROTOCOL=TCP)(DISPATCHERS=5)' scope=both;\n\n\u30b7\u30b9\u30c6\u30e0\u304c\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\u3002\n\nSQL> select name,value from v$parameter where name in ('dispatchers','shared_servers');\n\nNAME                           VALUE\n------------------------------ --------------------------------------------------\ndispatchers                    (PROTOCOL=TCP)(DISPATCHERS=5)\nshared_servers                 5\n\n\n\n2. \u5404\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\n\ntnsnames.ora\n\"(DESCRIPTIN=\"\u5185\u306b\"(SERVER=DEDICATED)\"\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3002\n\u2192 \u3053\u306e\u8a2d\u5b9a\u3092\u524a\u9664 or \"(SERVER=SHARED)\"\u3092\u8a2d\u5b9a\nsqlnet.ora\n\"USE_DEDICATED_SERVER=ON\"\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3002\n\u2192 \u3053\u306e\u8a2d\u5b9a\u3092\u524a\u9664 or \"USE_DEDICATED_SERVER=OFF\"\u3092\u8a2d\u5b9a\n\n\n3. \u30ea\u30b9\u30ca\u30fc\u767b\u9332\u72b6\u6cc1\u3092\u78ba\u8a8d\n\"lsnrctl service\"\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3002\u30cf\u30f3\u30c9\u30e9\"D000\u301c\"\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3002\n\n\u8a2d\u5b9a\u306e\u518d\u8aad\u307f\u8fbc\u307f\n\n$ lsnrctl reload\n\n\n\u767b\u9332\u72b6\u6cc1\u78ba\u8a8d\n\n$ lsnrctl service\n\nLSNRCTL for Linux: Version 11.2.0.4.0 - Production on 25-4\u6708 -2015 21:13:18\n\nCopyright (c) 1991, 2013, Oracle.  All rights reserved.\n\n(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=rhel01)(PORT=1521)))\u306b\u63a5\u7d9a\u4e2d\n\u30b5\u30fc\u30d3\u30b9\u306e\u30b5\u30de\u30ea\u30fc...\n\u30b5\u30fc\u30d3\u30b9\"TESTDB01\"\u306b\u306f\u30011\u4ef6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u3042\u308a\u307e\u3059\u3002\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\"TESTDB01\"\u3001\u72b6\u614bREADY\u306b\u306f\u3001\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3059\u308b6\u4ef6\u306e\u30cf\u30f3\u30c9\u30e9\u304c\u3042\u308a\u307e\u3059...\n  \u30cf\u30f3\u30c9\u30e9:\n    \"D004\" \u78ba\u7acb:0 \u62d2\u5426:0 \u73fe\u884c:0 \u6700\u5927:1022 \u72b6\u614b:ready\n       DISPATCHER <machine: rhel01, pid: 5362>\n       (ADDRESS=(PROTOCOL=tcp)(HOST=rhel01)(PORT=40818))\n    \"D003\" \u78ba\u7acb:0 \u62d2\u5426:0 \u73fe\u884c:0 \u6700\u5927:1022 \u72b6\u614b:ready\n       DISPATCHER <machine: rhel01, pid: 5360>\n       (ADDRESS=(PROTOCOL=tcp)(HOST=rhel01)(PORT=45898))\n    \"D002\" \u78ba\u7acb:0 \u62d2\u5426:0 \u73fe\u884c:0 \u6700\u5927:1022 \u72b6\u614b:ready\n       DISPATCHER <machine: rhel01, pid: 5358>\n       (ADDRESS=(PROTOCOL=tcp)(HOST=rhel01)(PORT=34725))\n    \"D001\" \u78ba\u7acb:0 \u62d2\u5426:0 \u73fe\u884c:0 \u6700\u5927:1022 \u72b6\u614b:ready\n       DISPATCHER <machine: rhel01, pid: 5356>\n       (ADDRESS=(PROTOCOL=tcp)(HOST=rhel01)(PORT=9412))\n    \"D000\" \u78ba\u7acb:0 \u62d2\u5426:0 \u73fe\u884c:8 \u6700\u5927:1022 \u72b6\u614b:ready\n       DISPATCHER <machine: rhel01, pid: 1639>\n       (ADDRESS=(PROTOCOL=tcp)(HOST=rhel01)(PORT=55424))\n    \"DEDICATED\" \u78ba\u7acb:0 \u62d2\u5426:0 \u72b6\u614b:ready\n       LOCAL SERVER\n\u30b3\u30de\u30f3\u30c9\u306f\u6b63\u5e38\u306b\u7d42\u4e86\u3057\u307e\u3057\u305f\u3002\n\n\n4. \u5171\u6709\u30b5\u30fc\u30d0\u63a5\u7d9a\u306e\u78ba\u8a8d\nV$SESSION\u30d3\u30e5\u30fc\u306eSERVER\u5217\u3067\u78ba\u8a8d\u3059\u308b\u3002\nSERVER\u5217\u306e\u5185\u5bb9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002\n\nDEDICATED\n\u2192 \u5c02\u7528\u30b5\u30fc\u30d0\u63a5\u7d9a\nSHARED\n\u2192 \u5171\u6709\u30b5\u30fc\u30d0\u63a5\u7d9a\nNONE\n\u2192 \u5171\u6709\u30b5\u30fc\u30d0\u63a5\u7d9a\uff08\u30a2\u30a4\u30c9\u30eb\u72b6\u614b\uff09\n\n\u78ba\u8a8d\u65b9\u6cd5\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002\n\n\u63a5\u7d9a\u5225\u30bb\u30c3\u30b7\u30e7\u30f3\u6570\n\nSQL> SELECT SERVER, COUNT(*) FROM V$SESSION GROUP BY SERVER;\n\nSERVER                        COUNT(*)\n--------------------------- ----------\nDEDICATED                           29\nSHARED                               1\nNONE                                 1\n\n\n\u73fe\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u63a5\u7d9a\u7a2e\u5225\n\nSQL> SELECT SERVER FROM V$SESSION WHERE SID = USERENV('SID') ;\n\nSERVER\n---------------------------\nSHARED\n\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u5bfe\u5fdc\u3059\u308b\u30c7\u30a3\u30b9\u30d1\u30c3\u30c1\u30e3\u30fc\u30d7\u30ed\u30bb\u30b9\uff08D000\u301c\uff09\n\nSQL> COL PROCESS FOR A20\nSQL> COL PROGRAM FOR A40\nSQL> COL USERNAME FOR A10\nSQL> COL PID FOR A5\nSQL> SELECT P.PNAME PNAME, P.SPID PID,S.SID,S.SERIAL#,S.USERNAME,S.PROGRAM PROGRAM\n     FROM V$PROCESS P, V$SESSION S\n     WHERE P.ADDR = S.PADDR AND P.PNAME LIKE '%D00%';\n\nPNAME           PID          SID    SERIAL# USERNAME   PROGRAM\n--------------- ----- ---------- ---------- ---------- ----------------------------------------\nD001            5356          44        567 SYSTEM     sqlplus@rhel01 (TNS V1-V3)\nD002            5358          30         13 SYSTEM     sqlplus@rhel01 (TNS V1-V3)\nD002            5358          52        575 SYSTEM     sqlplus@rhel01 (TNS V1-V3)\nD003            5360          39        609 SYSTEM     sqlplus@rhel01 (TNS V1-V3)\nD003            5360          46         83 SYSTEM     sqlplus@rhel01 (TNS V1-V3)\nD004            5362          28        859 SYSTEM     sqlplus@rhel01 (TNS V1-V3)\nD004            5362          47        571 SYSTEM     sqlplus@rhel01 (TNS V1-V3)\n\nSQL> -- P.SPID\u5217\u306f\u3001\"lstener service\"\u3067\u8868\u793a\u3055\u308c\u308bpid\u3068\u540c\u3058\nSQL> --   DISPATCHER <machine: rhel01, pid: 5358>\nSQL> --                                     ~~~~\n\n\nXMLDB\u5c0e\u5165\u6642\u306e\u6ce8\u610f\u4e8b\u9805\n\n\u5185\u5bb9\nXMLDB\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u3001\u4eca\u307e\u3067\u4f7f\u7528\u3057\u3066\u3044\u305f\u5171\u6709\u30b5\u30fc\u30d0\u63a5\u7d9a\u304c\u63a5\u7d9a\u3067\u304d\u306a\u304f\u306a\u308b\u3068\u3044\u3046\u4e8b\u8c61\u304c\u767a\u751f\u3002\n\u305d\u306e\u6642\u306e\u539f\u56e0\u3068\u5bfe\u5fdc\u3092\u4ee5\u4e0b\u306b\u8a18\u8f09\u3059\u308b\u3002\n\n\u4e8b\u8c61\nXMLDB\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u3001\u4eca\u307e\u3067\u4f7f\u7528\u3057\u3066\u3044\u305f\u5171\u6709\u30b5\u30fc\u30d0\u63a5\u7d9a\u3092\u5b9f\u65bd\u3057\u305f\u3068\u3053\u308d\u3001\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3002\n$ sqlplus system/oracle@TESTDB01\n\nSQL*Plus: Release 11.2.0.4.0 Production on \u571f 4\u6708 25 22:17:31 2015\n\nCopyright (c) 1982, 2013, Oracle.  All rights reserved.\n\nERROR:\nORA-12520: TNS:\n\u30ea\u30b9\u30ca\u30fc\u306f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305f\u30b5\u30fc\u30d0\u30fc\u30fb\u30bf\u30a4\u30d7\u306b\u4f7f\u7528\u53ef\u80fd\u306a\u30cf\u30f3\u30c9\u30e9\u3092\u691c\u51fa\u3067\u304d\u307e\u305b\u3093\u3067\n\u3057\u305f\u3002\n\n\u4eca\u307e\u3067\u4f7f\u7528\u3057\u3066\u3044\u305f\u30b5\u30fc\u30d3\u30b9\"TESTDB01\"\u306bDISPATCHER\u304c\u30ea\u30b9\u30ca\u30fc\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3002\nSQL> !lsnrctl service\n\u2026\uff08\u7701\u7565\uff09\u2026\n\n\u30b5\u30fc\u30d3\u30b9\u306e\u30b5\u30de\u30ea\u30fc...\n\u30b5\u30fc\u30d3\u30b9\"TESTDB01\"\u306b\u306f\u30011\u4ef6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u3042\u308a\u307e\u3059\u3002\n  \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\"TESTDB01\"\u3001\u72b6\u614bREADY\u306b\u306f\u3001\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3059\u308b1\u4ef6\u306e\u30cf\u30f3\u30c9\u30e9\u304c\u3042\u308a\u307e\u3059...\n    \u30cf\u30f3\u30c9\u30e9:\n      \"DEDICATED\" \u78ba\u7acb:0 \u62d2\u5426:0 \u72b6\u614b:ready\n         LOCAL SERVER\n\u30b5\u30fc\u30d3\u30b9\"TESTDB01XDB\"\u306b\u306f\u30011\u4ef6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u3042\u308a\u307e\u3059\u3002\n  \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\"TESTDB01\"\u3001\u72b6\u614bREADY\u306b\u306f\u3001\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3059\u308b1\u4ef6\u306e\u30cf\u30f3\u30c9\u30e9\u304c\u3042\u308a\u307e\u3059...\n    \u30cf\u30f3\u30c9\u30e9:\n      \"D002\" \u78ba\u7acb:0 \u62d2\u5426:0 \u73fe\u884c:2 \u6700\u5927:1022 \u72b6\u614b:ready\n         DISPATCHER <machine: rhel01, pid: 5358>\n         (ADDRESS=(PROTOCOL=tcp)(HOST=rhel01)(PORT=34725))\n\u30b3\u30de\u30f3\u30c9\u306f\u6b63\u5e38\u306b\u7d42\u4e86\u3057\u307e\u3057\u305f\u3002\n\n\n\u539f\u56e0\nXMLDB\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u521d\u671f\u5316\u30d1\u30e9\u30e1\u30fc\u30bfdispatchers\u306b\u4ee5\u4e0b\u306e\u5024\u3092\u8a2d\u5b9a\u3057\u305f\u304c\u3001\u3053\u306e\"SERVICE\"\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5024\u306b\u4e0d\u8db3\u304c\u3042\u3063\u305f\u3053\u3068\u304c\u539f\u56e0\u3002\n\u4eca\u56de\u306f\u4eca\u307e\u3067\u4f7f\u7528\u3057\u3066\u3044\u305f\u30b5\u30fc\u30d3\u30b9\u540d\u304c\u4e0d\u8db3\u3057\u3066\u3044\u305f\u306e\u304c\u539f\u56e0\u3002\ndispatchers=\"(PROTOCOL=TCP) (SERVICE=<sid>XDB)\"\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3059\u308b\u3002\ndispatchers=\"(PROTOCOL=TCP) (SERVICE=<\u4eca\u307e\u3067\u4f7f\u7528\u3057\u3066\u3044\u305f\u30b5\u30fc\u30d3\u30b9\u540d>,<sid>XDB)\"\n\n\n\u5bfe\u5fdc\n\n1. \u767b\u9332\u5bfe\u8c61\u30b5\u30fc\u30d3\u30b9\u306e\u78ba\u8a8d\nV$SERVICES\u3067\u3001\u767b\u9332\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u78ba\u8a8d\u3002\nSQL> select name from v$services;\n\nNAME\n------------------------------\nTESTDB01XDB\nTESTDB01\nSYS$BACKGROUND\nSYS$USERS\n\n-- SYS$USERS\n-- \u2192 \u30e6\u30fc\u30b6\u30fc\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u660e\u793a\u7684\u306b\u8b58\u5225\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u540d\u306a\u3057\u306b\n--    \u78ba\u7acb\u3057\u305f\u3068\u304d\u4f7f\u7528\u3059\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b5\u30fc\u30d3\u30b9\u540d\u3002\n-- SYS$BACKGROUND\n-- \u2192 \u3059\u3079\u3066\u306eOracle Database\u306e\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u30d7\u30ed\u30bb\u30b9\u3067\u69cb\u6210\u3002\n\n\n2. \u521d\u671f\u5316\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5909\u66f4\nSQL> alter system set dispatchers='(PROTOCOL=TCP)(SERVICE=TESTDB01,TESTDB01XDB)' scope=both;\n\n\u30b7\u30b9\u30c6\u30e0\u304c\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\u3002\n\nSQL> select name,value from v$parameter where name = 'dispatchers';\n\nNAME                           VALUE\n------------------------------ --------------------------------------------------\ndispatchers                    (PROTOCOL=TCP)(SERVICE=TESTDB01,TESTDB01XDB)\n\n\n3. \u30ea\u30b9\u30ca\u30fc\u306e\u518d\u8aad\u307f\u8fbc\u307f\nSQL> !lsnrctl reload\n\u2026\uff08\u7701\u7565\uff09\u2026\n\nSQL> !lsnrctl service\n\u2026\uff08\u7701\u7565\uff09\u2026\n\n\u30b5\u30fc\u30d3\u30b9\u306e\u30b5\u30de\u30ea\u30fc...\n\u30b5\u30fc\u30d3\u30b9\"TESTDB01\"\u306b\u306f\u30011\u4ef6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u3042\u308a\u307e\u3059\u3002\n  \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\"TESTDB01\"\u3001\u72b6\u614bREADY\u306b\u306f\u3001\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3059\u308b2\u4ef6\u306e\u30cf\u30f3\u30c9\u30e9\u304c\u3042\u308a\u307e\u3059...\n    \u30cf\u30f3\u30c9\u30e9:\n      \"D002\" \u78ba\u7acb:0 \u62d2\u5426:0 \u73fe\u884c:1 \u6700\u5927:1022 \u72b6\u614b:ready\n         DISPATCHER <machine: rhel01, pid: 5358>\n         (ADDRESS=(PROTOCOL=tcp)(HOST=rhel01)(PORT=34725))\n      \"DEDICATED\" \u78ba\u7acb:0 \u62d2\u5426:0 \u72b6\u614b:ready\n         LOCAL SERVER\n\u30b5\u30fc\u30d3\u30b9\"TESTDB01XDB\"\u306b\u306f\u30011\u4ef6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u3042\u308a\u307e\u3059\u3002\n  \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\"TESTDB01\"\u3001\u72b6\u614bREADY\u306b\u306f\u3001\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3059\u308b1\u4ef6\u306e\u30cf\u30f3\u30c9\u30e9\u304c\u3042\u308a\u307e\u3059...\n    \u30cf\u30f3\u30c9\u30e9:\n      \"D002\" \u78ba\u7acb:0 \u62d2\u5426:0 \u73fe\u884c:1 \u6700\u5927:1022 \u72b6\u614b:ready\n         DISPATCHER <machine: rhel01, pid: 5358>\n         (ADDRESS=(PROTOCOL=tcp)(HOST=rhel01)(PORT=34725))\n\u30b3\u30de\u30f3\u30c9\u306f\u6b63\u5e38\u306b\u7d42\u4e86\u3057\u307e\u3057\u305f\u3002\n\n\n\n4. \u63a5\u7d9a\u78ba\u8a8d\nsqlplus\u30928\u3064\u7acb\u3061\u4e0a\u3052\u30014\u3064\u3092\"TESTDB01\"\u30b5\u30fc\u30d3\u30b9\u306b\u3001\u6b8b\u308a\u3092\"TESTDB01XDB\"\u30b5\u30fc\u30d3\u30b9\u306b\u5171\u6709\u30b5\u30fc\u30d0\u3067\u63a5\u7d9a\u3002\n\u4ee5\u4e0b\u306eSQL\u3067\u63a5\u7d9a\u72b6\u6cc1\u3092\u78ba\u8a8d\u3002\nSQL> COL SERVICE_NAME FOR A20\nSQL> SELECT SERVICE_NAME,SERVER,COUNT(*) \n     FROM V$SESSION GROUP BY SERVICE_NAME,SERVER\n     ORDER BY 1,2;\n\nSERVICE_NAME         SERVER                        COUNT(*)\n-------------------- --------------------------- ----------\nSYS$BACKGROUND       DEDICATED                           26\nTESTDB01             NONE                                 3\nTESTDB01             SHARED                               1\nTESTDB01XDB          NONE                                 4\n\n\n## \u5185\u5bb9\n\u5171\u6709\u30b5\u30fc\u30d0\u63a5\u7d9a\u306b\u95a2\u3059\u308b\u4ee5\u4e0b\u306e\u9805\u76ee\u3092\u8a18\u8f09\u3002\n\n- \u5171\u6709\u30b5\u30fc\u30d0\u63a5\u7d9a\u306e\u8a2d\u5b9a\n- XMLDB\u5c0e\u5165\u6642\u306e\u6ce8\u610f\u4e8b\u9805\n\n\n## \u5171\u6709\u30b5\u30fc\u30d0\u63a5\u7d9a\u306e\u8a2d\u5b9a\n\n### 1. \u521d\u671f\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u78ba\u8a8d\n\u4ee5\u4e0b\u306e\u521d\u671f\u5316\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u78ba\u8a8d\u3059\u308b\u3002  \n\n- SHARED_SERVERS\u306b\"1\"\u4ee5\u4e0a\u306e\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3002\n- DISPATCHERS\u306b\u6b63\u3057\u3044\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\"(PROTOCOL=TCP)\"\u3002\n\n  \n\u4ee5\u4e0b\u306eSQL\u3067\u78ba\u8a8d\u3002  \n  \n```sql:\nSQL> col name for a30\nSQL> col value for a50\nSQL> select name,value from v$parameter where name in ('dispatchers','shared_servers');\n\n NAME                           VALUE\n------------------------------ --------------------------------------------------\ndispatchers                    (PROTOCOL=TCP)\nshared_servers                 1\n\n```\n\n\u5fc5\u8981\u304c\u3042\u308c\u3070\u5909\u66f4\u3002\n\n```sql:\nSQL> alter system set shared_servers=5 scope=both;\n\n\u30b7\u30b9\u30c6\u30e0\u304c\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\u3002\n\nSQL> alter system set DISPATCHERS='(PROTOCOL=TCP)(DISPATCHERS=5)' scope=both;\n\n\u30b7\u30b9\u30c6\u30e0\u304c\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\u3002\n\nSQL> select name,value from v$parameter where name in ('dispatchers','shared_servers');\n\nNAME                           VALUE\n------------------------------ --------------------------------------------------\ndispatchers                    (PROTOCOL=TCP)(DISPATCHERS=5)\nshared_servers                 5\n\n```\n  \n\n### 2. \u5404\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\n\n- tnsnames.ora\n  \"(DESCRIPTIN=\"\u5185\u306b\"(SERVER=DEDICATED)\"\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3002\n  \u2192 \u3053\u306e\u8a2d\u5b9a\u3092\u524a\u9664 or \"(SERVER=SHARED)\"\u3092\u8a2d\u5b9a\n  \n- sqlnet.ora\n  \"USE_DEDICATED_SERVER=ON\"\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3002\n   \u2192 \u3053\u306e\u8a2d\u5b9a\u3092\u524a\u9664 or \"USE_DEDICATED_SERVER=OFF\"\u3092\u8a2d\u5b9a\n\n\n\n### 3. \u30ea\u30b9\u30ca\u30fc\u767b\u9332\u72b6\u6cc1\u3092\u78ba\u8a8d\n\"lsnrctl service\"\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3002\u30cf\u30f3\u30c9\u30e9\"D000\u301c\"\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3002\n\n- \u8a2d\u5b9a\u306e\u518d\u8aad\u307f\u8fbc\u307f\n  \n```bash:\n$ lsnrctl reload\n```\n\n- \u767b\u9332\u72b6\u6cc1\u78ba\u8a8d\n\n```bash:\n$ lsnrctl service\n\nLSNRCTL for Linux: Version 11.2.0.4.0 - Production on 25-4\u6708 -2015 21:13:18\n\nCopyright (c) 1991, 2013, Oracle.  All rights reserved.\n\n(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=rhel01)(PORT=1521)))\u306b\u63a5\u7d9a\u4e2d\n\u30b5\u30fc\u30d3\u30b9\u306e\u30b5\u30de\u30ea\u30fc...\n\u30b5\u30fc\u30d3\u30b9\"TESTDB01\"\u306b\u306f\u30011\u4ef6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u3042\u308a\u307e\u3059\u3002\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\"TESTDB01\"\u3001\u72b6\u614bREADY\u306b\u306f\u3001\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3059\u308b6\u4ef6\u306e\u30cf\u30f3\u30c9\u30e9\u304c\u3042\u308a\u307e\u3059...\n  \u30cf\u30f3\u30c9\u30e9:\n    \"D004\" \u78ba\u7acb:0 \u62d2\u5426:0 \u73fe\u884c:0 \u6700\u5927:1022 \u72b6\u614b:ready\n       DISPATCHER <machine: rhel01, pid: 5362>\n       (ADDRESS=(PROTOCOL=tcp)(HOST=rhel01)(PORT=40818))\n    \"D003\" \u78ba\u7acb:0 \u62d2\u5426:0 \u73fe\u884c:0 \u6700\u5927:1022 \u72b6\u614b:ready\n       DISPATCHER <machine: rhel01, pid: 5360>\n       (ADDRESS=(PROTOCOL=tcp)(HOST=rhel01)(PORT=45898))\n    \"D002\" \u78ba\u7acb:0 \u62d2\u5426:0 \u73fe\u884c:0 \u6700\u5927:1022 \u72b6\u614b:ready\n       DISPATCHER <machine: rhel01, pid: 5358>\n       (ADDRESS=(PROTOCOL=tcp)(HOST=rhel01)(PORT=34725))\n    \"D001\" \u78ba\u7acb:0 \u62d2\u5426:0 \u73fe\u884c:0 \u6700\u5927:1022 \u72b6\u614b:ready\n       DISPATCHER <machine: rhel01, pid: 5356>\n       (ADDRESS=(PROTOCOL=tcp)(HOST=rhel01)(PORT=9412))\n    \"D000\" \u78ba\u7acb:0 \u62d2\u5426:0 \u73fe\u884c:8 \u6700\u5927:1022 \u72b6\u614b:ready\n       DISPATCHER <machine: rhel01, pid: 1639>\n       (ADDRESS=(PROTOCOL=tcp)(HOST=rhel01)(PORT=55424))\n    \"DEDICATED\" \u78ba\u7acb:0 \u62d2\u5426:0 \u72b6\u614b:ready\n       LOCAL SERVER\n\u30b3\u30de\u30f3\u30c9\u306f\u6b63\u5e38\u306b\u7d42\u4e86\u3057\u307e\u3057\u305f\u3002\n```\n\n### 4. \u5171\u6709\u30b5\u30fc\u30d0\u63a5\u7d9a\u306e\u78ba\u8a8d\n\nV$SESSION\u30d3\u30e5\u30fc\u306eSERVER\u5217\u3067\u78ba\u8a8d\u3059\u308b\u3002\nSERVER\u5217\u306e\u5185\u5bb9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002\n\n- DEDICATED\n    \u2192 \u5c02\u7528\u30b5\u30fc\u30d0\u63a5\u7d9a\n- SHARED\n    \u2192 \u5171\u6709\u30b5\u30fc\u30d0\u63a5\u7d9a\n- NONE\n    \u2192 \u5171\u6709\u30b5\u30fc\u30d0\u63a5\u7d9a\uff08\u30a2\u30a4\u30c9\u30eb\u72b6\u614b\uff09\n\n\n\u78ba\u8a8d\u65b9\u6cd5\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002\n\n- \u63a5\u7d9a\u5225\u30bb\u30c3\u30b7\u30e7\u30f3\u6570\n\n```sql:\nSQL> SELECT SERVER, COUNT(*) FROM V$SESSION GROUP BY SERVER;\n\nSERVER                        COUNT(*)\n--------------------------- ----------\nDEDICATED                           29\nSHARED                               1\nNONE                                 1\n```\n\n- \u73fe\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u63a5\u7d9a\u7a2e\u5225\n\n```sql:\nSQL> SELECT SERVER FROM V$SESSION WHERE SID = USERENV('SID') ;\n\nSERVER\n---------------------------\nSHARED\n```\n\n- \u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u5bfe\u5fdc\u3059\u308b\u30c7\u30a3\u30b9\u30d1\u30c3\u30c1\u30e3\u30fc\u30d7\u30ed\u30bb\u30b9\uff08D000\u301c\uff09\n\n```sql:\nSQL> COL PROCESS FOR A20\nSQL> COL PROGRAM FOR A40\nSQL> COL USERNAME FOR A10\nSQL> COL PID FOR A5\nSQL> SELECT P.PNAME PNAME, P.SPID PID,S.SID,S.SERIAL#,S.USERNAME,S.PROGRAM PROGRAM\n     FROM V$PROCESS P, V$SESSION S\n     WHERE P.ADDR = S.PADDR AND P.PNAME LIKE '%D00%';\n\nPNAME           PID          SID    SERIAL# USERNAME   PROGRAM\n--------------- ----- ---------- ---------- ---------- ----------------------------------------\nD001            5356          44        567 SYSTEM     sqlplus@rhel01 (TNS V1-V3)\nD002            5358          30         13 SYSTEM     sqlplus@rhel01 (TNS V1-V3)\nD002            5358          52        575 SYSTEM     sqlplus@rhel01 (TNS V1-V3)\nD003            5360          39        609 SYSTEM     sqlplus@rhel01 (TNS V1-V3)\nD003            5360          46         83 SYSTEM     sqlplus@rhel01 (TNS V1-V3)\nD004            5362          28        859 SYSTEM     sqlplus@rhel01 (TNS V1-V3)\nD004            5362          47        571 SYSTEM     sqlplus@rhel01 (TNS V1-V3)\n\nSQL> -- P.SPID\u5217\u306f\u3001\"lstener service\"\u3067\u8868\u793a\u3055\u308c\u308bpid\u3068\u540c\u3058\nSQL> --   DISPATCHER <machine: rhel01, pid: 5358>\nSQL> --                                     ~~~~\n```\n\n\n## XMLDB\u5c0e\u5165\u6642\u306e\u6ce8\u610f\u4e8b\u9805\n\n### \u5185\u5bb9\nXMLDB\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u3001\u4eca\u307e\u3067\u4f7f\u7528\u3057\u3066\u3044\u305f\u5171\u6709\u30b5\u30fc\u30d0\u63a5\u7d9a\u304c\u63a5\u7d9a\u3067\u304d\u306a\u304f\u306a\u308b\u3068\u3044\u3046\u4e8b\u8c61\u304c\u767a\u751f\u3002\n\u305d\u306e\u6642\u306e\u539f\u56e0\u3068\u5bfe\u5fdc\u3092\u4ee5\u4e0b\u306b\u8a18\u8f09\u3059\u308b\u3002\n\n### \u4e8b\u8c61\nXMLDB\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u3001\u4eca\u307e\u3067\u4f7f\u7528\u3057\u3066\u3044\u305f\u5171\u6709\u30b5\u30fc\u30d0\u63a5\u7d9a\u3092\u5b9f\u65bd\u3057\u305f\u3068\u3053\u308d\u3001\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3002\n\n```sql:\n$ sqlplus system/oracle@TESTDB01\n\nSQL*Plus: Release 11.2.0.4.0 Production on \u571f 4\u6708 25 22:17:31 2015\n\nCopyright (c) 1982, 2013, Oracle.  All rights reserved.\n\nERROR:\nORA-12520: TNS:\n\u30ea\u30b9\u30ca\u30fc\u306f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305f\u30b5\u30fc\u30d0\u30fc\u30fb\u30bf\u30a4\u30d7\u306b\u4f7f\u7528\u53ef\u80fd\u306a\u30cf\u30f3\u30c9\u30e9\u3092\u691c\u51fa\u3067\u304d\u307e\u305b\u3093\u3067\n\u3057\u305f\u3002\n```\n\n\n\u4eca\u307e\u3067\u4f7f\u7528\u3057\u3066\u3044\u305f\u30b5\u30fc\u30d3\u30b9\"TESTDB01\"\u306bDISPATCHER\u304c\u30ea\u30b9\u30ca\u30fc\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\n```bash:\nSQL> !lsnrctl service\n\u2026\uff08\u7701\u7565\uff09\u2026\n\n\u30b5\u30fc\u30d3\u30b9\u306e\u30b5\u30de\u30ea\u30fc...\n\u30b5\u30fc\u30d3\u30b9\"TESTDB01\"\u306b\u306f\u30011\u4ef6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u3042\u308a\u307e\u3059\u3002\n  \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\"TESTDB01\"\u3001\u72b6\u614bREADY\u306b\u306f\u3001\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3059\u308b1\u4ef6\u306e\u30cf\u30f3\u30c9\u30e9\u304c\u3042\u308a\u307e\u3059...\n    \u30cf\u30f3\u30c9\u30e9:\n      \"DEDICATED\" \u78ba\u7acb:0 \u62d2\u5426:0 \u72b6\u614b:ready\n         LOCAL SERVER\n\u30b5\u30fc\u30d3\u30b9\"TESTDB01XDB\"\u306b\u306f\u30011\u4ef6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u3042\u308a\u307e\u3059\u3002\n  \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\"TESTDB01\"\u3001\u72b6\u614bREADY\u306b\u306f\u3001\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3059\u308b1\u4ef6\u306e\u30cf\u30f3\u30c9\u30e9\u304c\u3042\u308a\u307e\u3059...\n    \u30cf\u30f3\u30c9\u30e9:\n      \"D002\" \u78ba\u7acb:0 \u62d2\u5426:0 \u73fe\u884c:2 \u6700\u5927:1022 \u72b6\u614b:ready\n         DISPATCHER <machine: rhel01, pid: 5358>\n         (ADDRESS=(PROTOCOL=tcp)(HOST=rhel01)(PORT=34725))\n\u30b3\u30de\u30f3\u30c9\u306f\u6b63\u5e38\u306b\u7d42\u4e86\u3057\u307e\u3057\u305f\u3002\n```\n\n### \u539f\u56e0\nXMLDB\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u521d\u671f\u5316\u30d1\u30e9\u30e1\u30fc\u30bfdispatchers\u306b\u4ee5\u4e0b\u306e\u5024\u3092\u8a2d\u5b9a\u3057\u305f\u304c\u3001\u3053\u306e\"SERVICE\"\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5024\u306b\u4e0d\u8db3\u304c\u3042\u3063\u305f\u3053\u3068\u304c\u539f\u56e0\u3002\n\u4eca\u56de\u306f\u4eca\u307e\u3067\u4f7f\u7528\u3057\u3066\u3044\u305f\u30b5\u30fc\u30d3\u30b9\u540d\u304c\u4e0d\u8db3\u3057\u3066\u3044\u305f\u306e\u304c\u539f\u56e0\u3002\n\n```sql:\ndispatchers=\"(PROTOCOL=TCP) (SERVICE=<sid>XDB)\"\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3059\u308b\u3002\n\n```sql:\ndispatchers=\"(PROTOCOL=TCP) (SERVICE=<\u4eca\u307e\u3067\u4f7f\u7528\u3057\u3066\u3044\u305f\u30b5\u30fc\u30d3\u30b9\u540d>,<sid>XDB)\"\n```\n   \n\n### \u5bfe\u5fdc\n\n####1. \u767b\u9332\u5bfe\u8c61\u30b5\u30fc\u30d3\u30b9\u306e\u78ba\u8a8d\nV$SERVICES\u3067\u3001\u767b\u9332\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u78ba\u8a8d\u3002\n          \n```sql:\nSQL> select name from v$services;\n\nNAME\n------------------------------\nTESTDB01XDB\nTESTDB01\nSYS$BACKGROUND\nSYS$USERS\n\n-- SYS$USERS\n-- \u2192 \u30e6\u30fc\u30b6\u30fc\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u660e\u793a\u7684\u306b\u8b58\u5225\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u540d\u306a\u3057\u306b\n--    \u78ba\u7acb\u3057\u305f\u3068\u304d\u4f7f\u7528\u3059\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b5\u30fc\u30d3\u30b9\u540d\u3002\n-- SYS$BACKGROUND\n-- \u2192 \u3059\u3079\u3066\u306eOracle Database\u306e\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u30d7\u30ed\u30bb\u30b9\u3067\u69cb\u6210\u3002\n```\n\n\n####2. \u521d\u671f\u5316\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5909\u66f4\n  \n```sql:\nSQL> alter system set dispatchers='(PROTOCOL=TCP)(SERVICE=TESTDB01,TESTDB01XDB)' scope=both;\n\n\u30b7\u30b9\u30c6\u30e0\u304c\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\u3002\n\nSQL> select name,value from v$parameter where name = 'dispatchers';\n\nNAME                           VALUE\n------------------------------ --------------------------------------------------\ndispatchers                    (PROTOCOL=TCP)(SERVICE=TESTDB01,TESTDB01XDB)\n```\n\n\n####3. \u30ea\u30b9\u30ca\u30fc\u306e\u518d\u8aad\u307f\u8fbc\u307f\n\n```bash:\nSQL> !lsnrctl reload\n\u2026\uff08\u7701\u7565\uff09\u2026\n\nSQL> !lsnrctl service\n\u2026\uff08\u7701\u7565\uff09\u2026\n\n\u30b5\u30fc\u30d3\u30b9\u306e\u30b5\u30de\u30ea\u30fc...\n\u30b5\u30fc\u30d3\u30b9\"TESTDB01\"\u306b\u306f\u30011\u4ef6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u3042\u308a\u307e\u3059\u3002\n  \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\"TESTDB01\"\u3001\u72b6\u614bREADY\u306b\u306f\u3001\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3059\u308b2\u4ef6\u306e\u30cf\u30f3\u30c9\u30e9\u304c\u3042\u308a\u307e\u3059...\n    \u30cf\u30f3\u30c9\u30e9:\n      \"D002\" \u78ba\u7acb:0 \u62d2\u5426:0 \u73fe\u884c:1 \u6700\u5927:1022 \u72b6\u614b:ready\n         DISPATCHER <machine: rhel01, pid: 5358>\n         (ADDRESS=(PROTOCOL=tcp)(HOST=rhel01)(PORT=34725))\n      \"DEDICATED\" \u78ba\u7acb:0 \u62d2\u5426:0 \u72b6\u614b:ready\n         LOCAL SERVER\n\u30b5\u30fc\u30d3\u30b9\"TESTDB01XDB\"\u306b\u306f\u30011\u4ef6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u3042\u308a\u307e\u3059\u3002\n  \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\"TESTDB01\"\u3001\u72b6\u614bREADY\u306b\u306f\u3001\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3059\u308b1\u4ef6\u306e\u30cf\u30f3\u30c9\u30e9\u304c\u3042\u308a\u307e\u3059...\n    \u30cf\u30f3\u30c9\u30e9:\n      \"D002\" \u78ba\u7acb:0 \u62d2\u5426:0 \u73fe\u884c:1 \u6700\u5927:1022 \u72b6\u614b:ready\n         DISPATCHER <machine: rhel01, pid: 5358>\n         (ADDRESS=(PROTOCOL=tcp)(HOST=rhel01)(PORT=34725))\n\u30b3\u30de\u30f3\u30c9\u306f\u6b63\u5e38\u306b\u7d42\u4e86\u3057\u307e\u3057\u305f\u3002\n\n```\n\n####4. \u63a5\u7d9a\u78ba\u8a8d\nsqlplus\u30928\u3064\u7acb\u3061\u4e0a\u3052\u30014\u3064\u3092\"TESTDB01\"\u30b5\u30fc\u30d3\u30b9\u306b\u3001\u6b8b\u308a\u3092\"TESTDB01XDB\"\u30b5\u30fc\u30d3\u30b9\u306b\u5171\u6709\u30b5\u30fc\u30d0\u3067\u63a5\u7d9a\u3002\n\u4ee5\u4e0b\u306eSQL\u3067\u63a5\u7d9a\u72b6\u6cc1\u3092\u78ba\u8a8d\u3002\n \n```sql:\nSQL> COL SERVICE_NAME FOR A20\nSQL> SELECT SERVICE_NAME,SERVER,COUNT(*) \n     FROM V$SESSION GROUP BY SERVICE_NAME,SERVER\n     ORDER BY 1,2;\n\nSERVICE_NAME         SERVER                        COUNT(*)\n-------------------- --------------------------- ----------\nSYS$BACKGROUND       DEDICATED                           26\nTESTDB01             NONE                                 3\nTESTDB01             SHARED                               1\nTESTDB01XDB          NONE                                 4\n```\n\n\n", "tags": ["oracle"]}