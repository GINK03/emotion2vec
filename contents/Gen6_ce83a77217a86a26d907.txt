{"context": " More than 1 year has passed since last update.Twitter\u306eStreaming API\u3092\u4f7f\u3063\u3066\u3001\u4efb\u610f\u306e\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u53d6\u5f97\u3002\n\u7d50\u5c40home_timeline\u3060\u3068\u30d5\u30a9\u30ed\u30fc\u3057\u3066\u3044\u308b\u4eba\u3060\u3051\u3060\u304b\u3089Streaming\u4f7f\u308f\u306a\u3044\u3068\u30c7\u30fc\u30bf\u53ce\u96c6\u306b\u306a\u3089\u306a\u3044\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067\u6563\u3005\u8a9e\u308a\u5c3d\u304f\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u4eca\u66f4Streaming API\u3092\u89e6\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\nstream.py\n\n#!/user/bin/env python\n# -*- coding: utf-8 -*-\nfrom requests_oauthlib import OAuth1Session\nimport json\nimport requests\nimport time, calendar\nimport sys, codecs\n\nword = raw_input(u\"input: \")\n\nC_KEY = \"*************************************\"\nC_SECRET = \"*************************************\"\nA_TOKEN = \"*************************************\"\nT_SECRET = \"*************************************\"\n\n\nURL = \"https://stream.twitter.com/1.1/statuses/filter.json\"\n\ndef Client_key():\n    return OAuth1Session(C_KEY,\n        client_secret = C_SECRET,\n        resource_owner_key = A_TOKEN,\n        resource_owner_secret = T_SECRET\n    )\n\ndef Response(client, **filter_data):\n    return client.post(\n        URL,\n        data = filter_data,\n        stream = True\n    )\n\n\ndef YmdHMS(created_at):\n    time_utc = time.strptime(created_at, '%a %b %d %H:%M:%S +0000 %Y')\n    unix_time = calendar.timegm(time_utc)\n    time_local = time.localtime(unix_time)\n    return int(time.strftime(\"%Y%m%d%H%M%S\", time_local))\n\ndef Print_l(r): \n    for line in r.iter_lines():\n        tweet = json.loads(line)\n\n        Created_at = YmdHMS(tweet[\"created_at\"])\n        User = (tweet[\"user\"][\"screen_name\"].encode(\"utf-8\"))\n        Name = (tweet[\"user\"][\"name\"].encode(\"utf-8\"))\n        Text = (tweet[\"text\"].encode(\"utf-8\"))\n\n        try:\n            if tweet[\"user\"][\"lang\"] == \"ja\":\n                print \"ID: \", User\n                print \"\u30e6\u30fc\u30b6\u30fc\u540d: \", Name\n                print \"\u672c\u6587: \", Text\n                print Created_at\n                print \"==\" * 40\n        except:\n            pass\n\nif __name__ == \"__main__\":\n    client = Client_key()\n    r = Response(client, track=word)\n    Print_l(r)\n\n\n\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306a\u30e2\u30ce\u3092\u53d6\u5f97\u3059\u308b\u308f\u3051\u3067\u3059\u304b\u3089\u3001\u5909\u306a\u30ad\u30fc\u30ef\u30fc\u30c9\u306e\u5834\u5408\u306f\u898b\u3064\u304b\u3089\u306a\u304f\u3066json\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u7121\u3044\u3088\uff01\u3063\u3066\u6012\u3089\u308c\u307e\u3059\u3002#\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u3068\u304b\u3092\u4e00\u65b9\u7684\u306b\u53d6\u5f97\u3057\u306b\u884c\u304f\u307b\u3046\u304c\u826f\u3055\u3052\u3002\ncreated_at\u306e\u65e5\u672c\u6642\u9593\u3078\u306e\u5909\u66f4\u306f\nhttp://blog.unfindable.net/archives/4302\n\u4e0a\u8a18URL\u3092\u4f7f\u7528\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u7d42\u4e86\u306fctr+c\u3067\u3002\nTwitter\u306eStreaming API\u3092\u4f7f\u3063\u3066\u3001\u4efb\u610f\u306e\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u53d6\u5f97\u3002\n\u7d50\u5c40home_timeline\u3060\u3068\u30d5\u30a9\u30ed\u30fc\u3057\u3066\u3044\u308b\u4eba\u3060\u3051\u3060\u304b\u3089Streaming\u4f7f\u308f\u306a\u3044\u3068\u30c7\u30fc\u30bf\u53ce\u96c6\u306b\u306a\u3089\u306a\u3044\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067\u6563\u3005\u8a9e\u308a\u5c3d\u304f\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u4eca\u66f4Streaming API\u3092\u89e6\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n```python:stream.py\n\n#!/user/bin/env python\n# -*- coding: utf-8 -*-\nfrom requests_oauthlib import OAuth1Session\nimport json\nimport requests\nimport time, calendar\nimport sys, codecs\n\nword = raw_input(u\"input: \")\n\nC_KEY = \"*************************************\"\nC_SECRET = \"*************************************\"\nA_TOKEN = \"*************************************\"\nT_SECRET = \"*************************************\"\n\n\nURL = \"https://stream.twitter.com/1.1/statuses/filter.json\"\n \ndef Client_key():\n    return OAuth1Session(C_KEY,\n        client_secret = C_SECRET,\n        resource_owner_key = A_TOKEN,\n        resource_owner_secret = T_SECRET\n    )\n \ndef Response(client, **filter_data):\n    return client.post(\n        URL,\n        data = filter_data,\n        stream = True\n    )\n\n\ndef YmdHMS(created_at):\n    time_utc = time.strptime(created_at, '%a %b %d %H:%M:%S +0000 %Y')\n    unix_time = calendar.timegm(time_utc)\n    time_local = time.localtime(unix_time)\n    return int(time.strftime(\"%Y%m%d%H%M%S\", time_local))\n\ndef Print_l(r):\t\n\tfor line in r.iter_lines():\n\t\ttweet = json.loads(line)\n\t\t\n\t\tCreated_at = YmdHMS(tweet[\"created_at\"])\n\t\tUser = (tweet[\"user\"][\"screen_name\"].encode(\"utf-8\"))\n\t\tName = (tweet[\"user\"][\"name\"].encode(\"utf-8\"))\n\t\tText = (tweet[\"text\"].encode(\"utf-8\"))\n\t\t\n\t\ttry:\n\t\t\tif tweet[\"user\"][\"lang\"] == \"ja\":\n\t\t\t\tprint \"ID: \", User\n\t\t\t\tprint \"\u30e6\u30fc\u30b6\u30fc\u540d: \", Name\n\t\t\t\tprint \"\u672c\u6587: \", Text\n\t\t\t\tprint Created_at\n\t\t\t\tprint \"==\" * 40\n\t\texcept:\n\t\t\tpass\n \nif __name__ == \"__main__\":\n    client = Client_key()\n    r = Response(client, track=word)\n    Print_l(r)\n```\n\n\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306a\u30e2\u30ce\u3092\u53d6\u5f97\u3059\u308b\u308f\u3051\u3067\u3059\u304b\u3089\u3001\u5909\u306a\u30ad\u30fc\u30ef\u30fc\u30c9\u306e\u5834\u5408\u306f\u898b\u3064\u304b\u3089\u306a\u304f\u3066json\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u7121\u3044\u3088\uff01\u3063\u3066\u6012\u3089\u308c\u307e\u3059\u3002#\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u3068\u304b\u3092\u4e00\u65b9\u7684\u306b\u53d6\u5f97\u3057\u306b\u884c\u304f\u307b\u3046\u304c\u826f\u3055\u3052\u3002\n\ncreated_at\u306e\u65e5\u672c\u6642\u9593\u3078\u306e\u5909\u66f4\u306f\nhttp://blog.unfindable.net/archives/4302\n\u4e0a\u8a18URL\u3092\u4f7f\u7528\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u7d42\u4e86\u306fctr+c\u3067\u3002\n", "tags": ["TwitterAPI", "Twitter", "Python", "OAuth1Session", "StreamingAPI"]}