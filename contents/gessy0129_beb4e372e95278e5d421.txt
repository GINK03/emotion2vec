{"context": " More than 1 year has passed since last update.\n\nSolr\u3092\u30bd\u30fc\u30b9\u304b\u3089Build\u3059\u308b\n\nSolr \u306eSimilarity \u3092\u81ea\u5206\u52dd\u624b\u306b\u5909\u66f4\u3057\u305f\u3044\u3068\u8003\u3048\u305f\u306e\u3067\u3059\u304c\u3001schema\u3084solrconfig\u3067\u306f\u9650\u754c\u304c\u3042\u308a\u307e\u3057\u305f\n\u306a\u306e\u3067\u3001\u30bd\u30fc\u30b9\u304b\u3089Build\u3092\u3057\u3001\u81ea\u5206\u52dd\u624b\u306aSimilarity\u3092\u4f7f\u3044\u305f\u3044\u3068\u601d\u3044\u307e\u3059\nSimilarity\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u30e1\u30a4\u30f3\u3067\u3059\u304c\u3001\u30bd\u30fc\u30b9\u304b\u3089Build\u3059\u308b\u3084\u308a\u65b9\u3092\u8a18\u8f09\u3057\u3066\u3042\u308a\u307e\u3059\u306e\u3067\u3054\u53c2\u8003\u306b\n\u57f7\u7b46\u6642\u70b9\u3067\u3001solr-4.5.1 \u304c\u6700\u65b0\u7248\u306a\u306e\u3067\u3001\u3082\u3057\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u7570\u306a\u308c\u3070\u9069\u5b9c\u4fee\u6b63\u3057\u3066\u8aad\u3093\u3067\u4e0b\u3055\u3044\n\n\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n1 yum \u3092\u7528\u3044\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo yum install -y java-1.7.0-openjdk-devel.x86_64\n$ sudo yum install -y tomcat6-webapps tomcat6-admin-webapps\n\n2 Solr\u7b49\u306e\u7f6e\u304d\u5834\u3092 /app \u3068\u3059\u308b\n$ sudo mkdir /app\n$ sudo chown vagrant:vagrant /app\n$ cd /app\n\n3 \u30b3\u30f3\u30d1\u30a4\u30eb\u306b\u5fc5\u8981\u306a\u7269\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n$ wget http://mirrors.go-parts.com/apache/lucene/solr/4.5.1/solr-4.5.1-src.tgz\n$ wget http://ftp.riken.jp/net/apache//ant/binaries/apache-ant-1.9.2-bin.tar.gz\n\n4 ant \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo ln -s /app/infrastructure/apache-ant-1.9.2 /usr/src/apache-ant-1.9.2\n$ sudo ln -s /usr/src/apache-ant-1.9.2 /usr/local/ant\n$ sudo vim /etc/profile\nexport ANT_HOME=/usr/local/ant\nexport PATH=$PATH:$ANT_HOME/bin\n$ ant -version\nApache Ant(TM) version 1.9.2 compiled on July 8 2013\n\n5 Solr\u306eBuild\n$ cd solr-4.5.1-src\n$ ant ivy-bootstrap\n$ ant compile\nBUILD SUCCESSFUL\nTotal time: 4 minutes 26 seconds\n$ sudo su - \n# cd /appp/solr-4.5.1-src/solr/\n# ant example\n\n6 SolrInit \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ git clone https://github.com/jbusby/solr-initd.git\n$ cp solr.initd /etc/init.d/solr\n$ chmod 755 /etc/init.d/solr\n$ cp solr.start /app/solr-4.5.1-src/solr/example/solr.start\n$ cp solr.conf /etc/solr.conf\n# Edit solr.conf to suite your needs.\n$ vim /etc/solr.conf\nSOLR_HOME=/app/solr-4.5.1-src/solr/example\nSOLR_START=/app/solr-4.5.1-src/solr/solr.star\nLOG_FILE=/var/log/solr/solr.log\n\n\nGessy0129Similarity\u306e\u8ffd\u52a0\n1 lucene \u306b\u30ed\u30b8\u30c3\u30af\u8ffd\u52a0\n\nlucene/core/src/java/org/apache/lucene/search/similarities/Gessy0129Similarity.java\n\n\n\u66f8\u304d\u65b9\u306fDefaultSimilarity.java \u7b49\u3092\u53c2\u7167\u3002\u30b3\u30d4\u3063\u3066\u3082\u3044\u3044\n\n\n\n--- lucene/core/src/java/org/apache/lucene/search/similarities/Gessy0129Similarity.java 2014-01-07 08:44:01.913794926 +0000\n+++ lucene/core/src/java/org/apache/lucene/search/similarities/DefaultSimilarity.java   2013-06-25 18:54:18.000000000 +0000\n@@ -42,7 +42,7 @@\n  * Last, note that search time is too late to modify this <i>norm</i> part of\n  * scoring, e.g. by using a different {@link Similarity} for search.\n  */\n-public class Gessy0129Similarity extends TFIDFSimilarity {\n+public class DefaultSimilarity extends TFIDFSimilarity {\n\n   /** Cache of decoded bytes. */\n   private static final float[] NORM_TABLE = new float[256];\n@@ -54,7 +54,7 @@\n   }\n\n   /** Sole constructor: parameter-free */\n-  public Gessy0129Similarity() {}\n+  public DefaultSimilarity() {}\n\n   /** Implemented as <code>overlap / maxOverlap</code>. */\n   @Override\n@@ -118,8 +118,7 @@\n   /** Implemented as <code>sqrt(freq)</code>. */\n   @Override\n   public float tf(float freq) {\n-    return 1;\n-    //return (float)Math.sqrt(freq);\n+    return (float)Math.sqrt(freq);\n   }\n\n   /** Implemented as <code>1 / (distance + 1)</code>. */\n@@ -169,6 +168,6 @@\n\n   @Override\n   public String toString() {\n-    return \"Gessy0129Similarity\";\n+    return \"DefaultSimilarity\";\n   }\n }\n\n2 Solr \u306b\u3082\u30ed\u30b8\u30c3\u30af\u8ffd\u52a0\n+ solr/core/src/java/org/apache/solr/search/similarities/Gessy0129SimilarityFactory.java\n  + DefaultSimilarityFactory.java \u304b\u3089\u30b3\u30d4\u30fc\u3057\u3001\u540d\u524d\u3092\u7f6e\u63db\n3 Build\n$ cd /app/solr-4.5.1-src\n$ ant compile\n$ cd solr\n$ ant example\n\n4 Schema.xml \u3092\u4fee\u6b63\n <similarity class=\"solr.Gessy0129SimilarityFactory\" />\n\n5 Solr\u306e\u518d\u8d77\u52d5\nSolr\u3092\u30bd\u30fc\u30b9\u304b\u3089Build\u3059\u308b\n==============================\n\n+ Solr \u306eSimilarity \u3092\u81ea\u5206\u52dd\u624b\u306b\u5909\u66f4\u3057\u305f\u3044\u3068\u8003\u3048\u305f\u306e\u3067\u3059\u304c\u3001schema\u3084solrconfig\u3067\u306f\u9650\u754c\u304c\u3042\u308a\u307e\u3057\u305f\n+ \u306a\u306e\u3067\u3001\u30bd\u30fc\u30b9\u304b\u3089Build\u3092\u3057\u3001\u81ea\u5206\u52dd\u624b\u306aSimilarity\u3092\u4f7f\u3044\u305f\u3044\u3068\u601d\u3044\u307e\u3059\n+ Similarity\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u30e1\u30a4\u30f3\u3067\u3059\u304c\u3001\u30bd\u30fc\u30b9\u304b\u3089Build\u3059\u308b\u3084\u308a\u65b9\u3092\u8a18\u8f09\u3057\u3066\u3042\u308a\u307e\u3059\u306e\u3067\u3054\u53c2\u8003\u306b\n\n+ *\u57f7\u7b46\u6642\u70b9\u3067\u3001solr-4.5.1 \u304c\u6700\u65b0\u7248\u306a\u306e\u3067\u3001\u3082\u3057\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u7570\u306a\u308c\u3070\u9069\u5b9c\u4fee\u6b63\u3057\u3066\u8aad\u3093\u3067\u4e0b\u3055\u3044*\n\n### \u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n1 yum \u3092\u7528\u3044\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```sh\n$ sudo yum install -y java-1.7.0-openjdk-devel.x86_64\n$ sudo yum install -y tomcat6-webapps tomcat6-admin-webapps\n```\n\n2 Solr\u7b49\u306e\u7f6e\u304d\u5834\u3092 /app \u3068\u3059\u308b\n\n```sh\n$ sudo mkdir /app\n$ sudo chown vagrant:vagrant /app\n$ cd /app\n```\n\n3 \u30b3\u30f3\u30d1\u30a4\u30eb\u306b\u5fc5\u8981\u306a\u7269\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n```sh\n$ wget http://mirrors.go-parts.com/apache/lucene/solr/4.5.1/solr-4.5.1-src.tgz\n$ wget http://ftp.riken.jp/net/apache//ant/binaries/apache-ant-1.9.2-bin.tar.gz\n```\n\n4 ant \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```sh\n$ sudo ln -s /app/infrastructure/apache-ant-1.9.2 /usr/src/apache-ant-1.9.2\n$ sudo ln -s /usr/src/apache-ant-1.9.2 /usr/local/ant\n$ sudo vim /etc/profile\nexport ANT_HOME=/usr/local/ant\nexport PATH=$PATH:$ANT_HOME/bin\n$ ant -version\nApache Ant(TM) version 1.9.2 compiled on July 8 2013\n```\n\n5 Solr\u306eBuild\n\n```sh\n$ cd solr-4.5.1-src\n$ ant ivy-bootstrap\n$ ant compile\nBUILD SUCCESSFUL\nTotal time: 4 minutes 26 seconds\n$ sudo su - \n# cd /appp/solr-4.5.1-src/solr/\n# ant example\n```\n6 SolrInit \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```sh\n$ git clone https://github.com/jbusby/solr-initd.git\n$ cp solr.initd /etc/init.d/solr\n$ chmod 755 /etc/init.d/solr\n$ cp solr.start /app/solr-4.5.1-src/solr/example/solr.start\n$ cp solr.conf /etc/solr.conf\n# Edit solr.conf to suite your needs.\n$ vim /etc/solr.conf\nSOLR_HOME=/app/solr-4.5.1-src/solr/example\nSOLR_START=/app/solr-4.5.1-src/solr/solr.star\nLOG_FILE=/var/log/solr/solr.log\n```\n\n### Gessy0129Similarity\u306e\u8ffd\u52a0\n\n1 lucene \u306b\u30ed\u30b8\u30c3\u30af\u8ffd\u52a0\n\n+ lucene/core/src/java/org/apache/lucene/search/similarities/Gessy0129Similarity.java\n  + \u66f8\u304d\u65b9\u306fDefaultSimilarity.java \u7b49\u3092\u53c2\u7167\u3002\u30b3\u30d4\u3063\u3066\u3082\u3044\u3044\n  \n```diff\n--- lucene/core/src/java/org/apache/lucene/search/similarities/Gessy0129Similarity.java\t2014-01-07 08:44:01.913794926 +0000\n+++ lucene/core/src/java/org/apache/lucene/search/similarities/DefaultSimilarity.java\t2013-06-25 18:54:18.000000000 +0000\n@@ -42,7 +42,7 @@\n  * Last, note that search time is too late to modify this <i>norm</i> part of\n  * scoring, e.g. by using a different {@link Similarity} for search.\n  */\n-public class Gessy0129Similarity extends TFIDFSimilarity {\n+public class DefaultSimilarity extends TFIDFSimilarity {\n\n   /** Cache of decoded bytes. */\n   private static final float[] NORM_TABLE = new float[256];\n@@ -54,7 +54,7 @@\n   }\n\n   /** Sole constructor: parameter-free */\n-  public Gessy0129Similarity() {}\n+  public DefaultSimilarity() {}\n\n   /** Implemented as <code>overlap / maxOverlap</code>. */\n   @Override\n@@ -118,8 +118,7 @@\n   /** Implemented as <code>sqrt(freq)</code>. */\n   @Override\n   public float tf(float freq) {\n-    return 1;\n-    //return (float)Math.sqrt(freq);\n+    return (float)Math.sqrt(freq);\n   }\n\n   /** Implemented as <code>1 / (distance + 1)</code>. */\n@@ -169,6 +168,6 @@\n\n   @Override\n   public String toString() {\n-    return \"Gessy0129Similarity\";\n+    return \"DefaultSimilarity\";\n   }\n }\n```\n\n2 Solr \u306b\u3082\u30ed\u30b8\u30c3\u30af\u8ffd\u52a0\n+ solr/core/src/java/org/apache/solr/search/similarities/Gessy0129SimilarityFactory.java\n  + DefaultSimilarityFactory.java \u304b\u3089\u30b3\u30d4\u30fc\u3057\u3001\u540d\u524d\u3092\u7f6e\u63db\n\n3 Build\n\n```sh\n$ cd /app/solr-4.5.1-src\n$ ant compile\n$ cd solr\n$ ant example\n```\n\n4 Schema.xml \u3092\u4fee\u6b63\n\n```\n <similarity class=\"solr.Gessy0129SimilarityFactory\" />\n```\n\n5 Solr\u306e\u518d\u8d77\u52d5", "tags": ["solr"]}