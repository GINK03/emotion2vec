{"context": " More than 1 year has passed since last update.OpenID Connect\u3092\u5b66\u7fd2\u3059\u308b\u305f\u3081\u306b\u3001\u5b9f\u969b\u306bYahoo! ID\u9023\u643a\u30b5\u30fc\u30d3\u30b9\u3067OpenID Connect\u3092\u4f53\u9a13\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u524d\u7f6e\u304d\n\n\u4f53\u9a13\u3057\u3066\u307f\u305f\u7406\u7531\nOpenID Connect\u3092\u5229\u7528\u3057\u305fID\u9023\u643a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u3063\u3066\u898b\u3088\u3046\u3068\u601d\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u77e5\u8b58\u3082\u7121\u304f\u3001\u4ed5\u69d8\u3082\u96e3\u3057\u304f\u3001\u3069\u3053\u304b\u3089\u624b\u3092\u3064\u3051\u3066\u826f\u3044\u306e\u304b\u308f\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u305d\u3053\u3067\u3001\u5b9f\u969b\u306bOpenID Connect\u306e\u30d5\u30ed\u30fc\u3092\u4e00\u3064\u4e00\u3064\u624b\u3067\u8ffd\u3063\u3066\u307f\u3066\u3001\u7406\u89e3\u3092\u6df1\u3081\u3088\u3046\u3068\u8003\u3048\u307e\u3057\u305f\u3002\u305d\u306e\u624b\u9806\u3092\u8a18\u4e8b\u306b\u3057\u307e\u3059\u3002\n\nOpenID Connect\u3068\u306f\u306a\u306b\u304b\nOpenID Connect\u306f\u3001OAuth2.0\u3068\u3044\u3046\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u5229\u7528\u3057\u305f\u30bb\u30ad\u30e5\u30a2\u306a\u30b5\u30fc\u30d3\u30b9\u306e\u5229\u7528\u304c\u3067\u304d\u308b\u8a8d\u53ef\u306e\u4ed5\u7d44\u307f\u306e\u4e0a\u3067\u8a8d\u8a3c\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u305f\u3082\u306e\u3067\u3059\u3002\u4ee5\u4e0b\u306bOpenID Connect\u3092\u52c9\u5f37\u3059\u308b\u4e0a\u3067\u3001\u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8\u3092\u8a18\u8f09\u3057\u307e\u3059\u3002\nOpenID Connect \u5165\u9580\n\n\u524d\u6e96\u5099\n\n\u4e8b\u524d\u306b\u5fc5\u8981\u306a\u30b3\u30c8\nYahoo! JAPAN\u3078\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u767b\u9332\u304c\u5fc5\u8981\u3067\u3059\u3002Yahoo! JAPAN\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u767b\u9332\u3059\u308b\u3068\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3ID(\u4ee5\u4e0bclient_id\u3068\u3057\u307e\u3059)\u3068\u30b7\u30fc\u30af\u30ec\u30c3\u30c8(\u4ee5\u4e0bclient_secret\u3068\u3057\u307e\u3059)\u304c\u624b\u306b\u5165\u308a\u307e\u3059\u3002\u307e\u305f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u767b\u9332\u3059\u308b\u305f\u3081\u306b\u306f\u3001Yahoo! JAPAN ID\u304c\u5fc5\u8981\u3067\u3059\u3002\u6301\u3063\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u4f5c\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u767b\u9332\u3057\u307e\u3057\u305f\u3002\n\n\n\n\u8a2d\u5b9a\u9805\u76ee\n\u8a2d\u5b9a\u5024\n\n\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u7a2e\u985e\n\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\n\n\n\u30b3\u30fc\u30eb\u30d0\u30c3\u30afURL\nhttp://example.com\n\n\n\n\n\u53c2\u8003URL\nYahoo! JAPAN ID\u306e\u767b\u9332\u30da\u30fc\u30b8\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3ID\u306e\u767b\u9332\u30da\u30fc\u30b8\n\n\u4e8b\u524d\u306b\u5fc5\u8981\u306a\u30e2\u30ce\n\n\u30d6\u30e9\u30a6\u30b6\n\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3067\u304d\u308b\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\n\n\ntr\ncurl\nopenssl\nbase64\ndate\n\n\n\n\u5b9f\u884c\u74b0\u5883\n\n\u30d6\u30e9\u30a6\u30b6\n\n\nGoogle Chrome \u30d0\u30fc\u30b8\u30e7\u30f3 45.0.2454.85 m\n\n\nOS\n\n\nUbuntu 14.04 64bit\n\n\n\n\n\u5b9f\u969b\u306bOpenID Connect\u3057\u3066\u307f\u308b\n\nSTEP1 Authorization code\u306e\u53d6\u5f97\n\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u306fID\u9023\u643a\u3057\u305f\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304cYahoo! JAPAN\u304b\u3089Authorization code\u3092\u53d6\u5f97\u3059\u308b\u6d41\u308c\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u306f\u3001Yahoo! JAPAN\u3078\u306e\u30ed\u30b0\u30a4\u30f3\u3068ID\u9023\u643a\u306e\u540c\u610f\u304c\u5fc5\u8981\u3067\u3042\u308b\u305f\u3081\u30d6\u30e9\u30a6\u30b6\u3092\u5229\u7528\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306eURL\u3092\u30d6\u30e9\u30a6\u30b6\u3067\u958b\u304d\u307e\u3059\u3002\nhttps://auth.login.yahoo.co.jp/yconnect/v1/authorization?\nresponse_type=code+id_token\n&client_id={client_id}\n&redirect_uri=http://example.com\n&state=xyz\n&scope=openid+profile\n&nonce=ef3a091928d5491624c0ac54d697124422705092\n\n\n\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\n\u5fc5\u9808\n\u8aac\u660e\n\n\n\n\nresponse_type\n\u25cb\n\u300ccode\u300d\u3068\u300cid_token\u300d\u3092\u6307\u5b9a\u3057\u307e\u3059\n\n\nclient_id\n\u25cb\n\u4e8b\u524d\u306b\u6e96\u5099\u3057\u305fclient_id\u306e\u5024\u3092\u5165\u308c\u307e\u3059\n\n\nredirect_uri\n\u25cb\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3ID\u3092\u767b\u9332\u3057\u305f\u6642\u306b\u3001\u30b3\u30fc\u30eb\u30d0\u30c3\u30afURL\u306b\u5165\u529b\u3057\u305fURL\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u300chttp://example.com\u300d\u3092\u6307\u5b9a\u3057\u307e\u3059\n\n\nstate\n\nCSRF\u5bfe\u7b56\u306e\u30e9\u30f3\u30c0\u30e0\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3057\u307e\u3059\n\n\nscope\n\nOpenID Connect\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u308b\u5834\u5408\u306f\u3001scope\u306b\u5fc5\u305a\u300copenid\u300d\u306e\u5024\u3092\u5165\u308c\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u300copenid\u300d\u306e\u5024\u4ee5\u5916\u306b\u3001\u53d6\u5f97\u3057\u305f\u3044\u5c5e\u6027\u60c5\u5831\u3092scope\u3067\u6307\u5b9a\u3057\u307e\u3059\u30fb\u300copenid\u300d\u306e\u307f\u3092scope\u306b\u6307\u5b9a\u3059\u308b\u3068\u3001\u30e6\u30fc\u30b6\u30fc\u8b58\u5225\u5b50\u306e\u307f\u53d6\u5f97\u3067\u304d\u307e\u3059\u30fb\u300cprofile\u300d\u3092scope\u306b\u6307\u5b9a\u3059\u308b\u3068\u3001\u59d3\u540d\u30fb\u751f\u5e74\u30fb\u6027\u5225\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\u30fb\u300cemail\u300d\u3092scope\u306b\u6307\u5b9a\u3059\u308b\u3068\u3001\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u78ba\u8a8d\u6e08\u307f\u30d5\u30e9\u30b0\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u30fb\u300caddress\u300d\u3092scope\u306b\u6307\u5b9a\u3059\u308b\u3068\u3001\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u4f4f\u6240\u60c5\u5831\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\n\n\nnonce\nid_token\u3092\u53d6\u5f97\u3059\u308b\u969b\u306f\u5fc5\u9808\n\u30ea\u30d5\u309a\u30ec\u30a4\u30a2\u30bf\u30c3\u30af\u5bfe\u7b56\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3067\u3059\u3002\u30ea\u30af\u30a8\u30b9\u30c8\u3054\u3068\u306b\u30e9\u30f3\u30c0\u30e0\u306a\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3057\u307e\u3059\n\n\ndisplay\n\n\u30e6\u30fc\u30b6\u30fc\u306eUI\u3092page(PC\u7528UI)\u3001touch(\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3\u7528UI)\u3001wap(\u30d5\u30a3\u30fc\u30c1\u30e3\u30fc\u30d5\u30a9\u30f3\u7528UI)\u3001inapp(\u30cd\u30a4\u30c6\u30a3\u30d6\u30a2\u30d7\u30ea\u7528UI)\uff5e\u9078\u629e\u3067\u304d\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306fpage\u3067\u3059\n\n\nbail\n\nYahoo! JAPAN\u304c\u72ec\u81ea\u306b\u7528\u610f\u3057\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u3059\u3002bail=1 \u3092\u6307\u5b9a\u3059\u308b\u3068\u540c\u610f\u753b\u9762\u3067\u300c\u540c\u610f\u3057\u306a\u3044\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u305f\u969b\u306bcode\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3092\u4ed8\u52a0\u305b\u305a\u306bredirect_uri\u3078\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u305b\u307e\u3059\u3002\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306fYahoo!\u30c8\u30c3\u30d5\u309a\u3078\u9077\u79fb\u3057\u307e\u3059\n\n\n\n\u6210\u529f\u3059\u308b\u3068\u30ed\u30b0\u30a4\u30f3/\u540c\u610f\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\nYahoo! JAPAN\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\n\n\n\u3059\u3067\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u7701\u7565\u3055\u308c\u307e\u3059\n\n\n\u540c\u610f\u753b\u9762\u3067\u306f\u300c\u540c\u610f\u3057\u3066\u306f\u3058\u3081\u308b\u300d\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\n\n\n\u4e00\u5ea6\u540c\u610f\u3059\u308b\u3068\u3001\u6b21\u56de\u4ee5\u964d\u540c\u610f\u753b\u9762\u306f\u7701\u7565\u3055\u308c\u307e\u3059\n\n\n\n\u30ed\u30b0\u30a4\u30f3/\u540c\u610f\u304c\u5b8c\u4e86\u3059\u308b(\u3082\u3057\u304f\u306f\u4e8b\u524d\u306b\u30ed\u30b0\u30a4\u30f3\u3001\u540c\u610f\u3057\u3066\u3044\u308b)\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306aURL\u3067\u300chttp://example.com\u300d\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u307e\u3059\u3002\nhttp://example.com/?code=kaeasavt&state=xyz\n\n\ncode=kaeasavt\u306e\u90e8\u5206\u304cAuthorization Code\u3067\u3059\n\n\n\u3053\u306ecode\u306e\u5024\u3092\u4fdd\u5b58\u3057\u307e\u3059\n\n\nstate=xyz\u306fAuthorization Request\u306e\u6642\u306b\u8a2d\u5b9a\u3057\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5024\u3067\u3059\u3002\u30ea\u30af\u30a8\u30b9\u30c8\u6642\u306e\u5024\u300cxyz\u300d\u3068\u4e00\u81f4\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\n\n\n\u672c\u6765\u306f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u6642\u306bstate\u306e\u5024\u3092\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u4fdd\u5b58\u3057\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u306estate\u306e\u5024\u3092\u6bd4\u8f03\u3057\u307e\u3059\u3002\u4e00\u81f4\u3057\u306a\u3051\u308c\u3070\u51e6\u7406\u3092\u4e2d\u65ad\u3057\u307e\u3059\n\n\n\n\nSTEP2 Access Token\u3001ID Token\u306e\u53d6\u5f97\n\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u306fID\u9023\u643a\u3057\u305f\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u3001Step1\u3067\u53d6\u5f97\u3057\u305fcode\u3092yahoo! JAPAN\u306b\u6e21\u3057\u3066\u3001Access Token\u3068ID Token\u3092\u53d6\u5f97\u3059\u308b\u6d41\u308c\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\nToken\u3092\u53d6\u5f97\u3059\u308b\u969b\u306f\u3001HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30d8\u30c3\u30c0\u30fc\u3084\u30c7\u30fc\u30bf\u306bToken\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5fc5\u8981\u306a\u5024\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067curl\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3057\u307e\u3057\u305f\u3002\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001Token\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\ncurl -H 'Authorization: Basic {basicAuth}' -d \\\n\"grant_type=authorization_code&code={code}&redirect_uri=http://example.com\" \\\nhttps://auth.login.yahoo.co.jp/yconnect/v1/token\n\n\n\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\n\u5fc5\u9808\n\u8aac\u660e\n\n\n\n\ngrant_type\n\u25cb\nauthorization_code \u3068\u3044\u3046\u56fa\u5b9a\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3057\u307e\u3059\n\n\ncode\n\u25cb\n\u8a8d\u53ef\u30b3\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u4e00\u5ea6\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305f\u8a8d\u53ef\u30b3\u30fc\u30c9\u306f\u4f7f\u7528\u3067\u304d\u306a\u304f\u306a\u308a\u307e\u3059\n\n\nredirect_uri\n\u25cb\nSTEP1\u3067\u9001\u3063\u305f\u30ea\u30af\u30a8\u30b9\u30c8\u306eredirect_uri\u3067\u6307\u5b9a\u3057\u305fURL\u3092\u5165\u529b\u3057\u307e\u3059\n\n\n\n{code}\u306b\u306fSTEP1\u3067\u53d6\u5f97\u3057\u305fcode\u306e\u5024\u3092\u5165\u308c\u307e\u3059\u3002\n{basicAuth}\u306b\u306f\u3001client_id\u3068client_secret\u3092\u300c:\u300d\uff08\u30b3\u30ed\u30f3\uff09\u3067\u3064\u306a\u304e\u3001Base64\u3067\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u305f\u5024\u3092\u5165\u308c\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067{basicAuth}\u306b\u5165\u308c\u308b\u5024\u3092\u4f5c\u308a\u307e\u3059\u3002\necho -n \"{client_id}:{client_secret}\" | base64\n\n{client_id}\u3068{client_secret}\u306f\u4e8b\u524d\u306b\u7528\u610f\u3057\u305fclient_id\u3068client_secret\u306e\u5024\u3092\u5165\u308c\u307e\u3059\u3002\n\u6210\u529f\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n{\n\"access_token\":\"gCDvPtVgo..z2kTSWEnQs_.YzGtTdmMBWNLGJD0JE3El4v68N3a0EVhbdhmUqoqZsQ0H8samPleQPiFg6PPuFRjWipUpZGq0566RcWrUdsWNPUBCO9AL5tgb6mLS5gzArQvbkPEwSRJFJgAX1SlX1dlu.6mlEEWs5kQiZlZ1SnuTYarkn5o47nC_Kqip6aF7DFBz.alcj4dVaOc9OMPrZw1ioTIzKpNka2UnulvVDhL7KVm00nKcbxUKhoLPl_E4JDGe2ttEg.RStTfQer5oHpR5RSf_5BCpPSampleZx9MYntNVXRHBCczChWJKa3Kck1HlnN3CI9uhdwcD1xx6R5kgi4EMttDoSguU4LxtXiqC24_fAQuHdtz1D9IAf6eeE4xHF_1AfJDkzbyDLWvWVUAbNpiErvKFPM8O8efd9bb74.8WMe49cdK5AaUSEdZg7Hu5H6V5C.KBMs768i.Piv98iXQl0G8vXKmS4rZwrcADVYocokB9VFzlRZruwJFXtWpyW5gvS3.5lSshiN4SampleTT5qsMlrKsSETIj.KNnuPQEDUPWIVpHjLTr1hudsaMPleK8M1atMOGAKr65RdZbd7ItwshOEA--\",\n\"token_type\":\"bearer\",\n\"expires_in\":\"3600\",\n\"refresh_token\":\"AIHv2FUi6ygUPgm0dPSaMPleDztwSX_xd0XZ9ZSiYdWWo5Lcvic-\",\n\"id_token\":\"eyJ0eXAiOiJKV1QiLSampleiOiJIUzI1NiJ9.eyJpc3MiOiJodHRwxzpcL1wvYXV0aC3sb2dSampleWhvby5jby5qCCIsInVzZXJfaWQiOiJTT09HSUgzV1lCNUpDWFpFSUtUWUdLSFk0USIsImF1ZCI6ImRqMHphaSample5UVNrbE9aMkZWU21wWVJYWnpQV052Ym5OMWJXVnljMlZqY21WMEpuZzlPRGMtIiwiaWF0IjoxNDQSampleDk5LCJleHAiOjE0NDQwMjU5NjUsIm5vbmLlIjhiZWYzYTA5MTkyOGQ1NDkxNjI0YzBjYzU0FDY5NzEyNDQyMjcwNTA3MiJ9.24VcO1TsAmplEqcFK9bOR3tzaoQjDQSY_ufGfMHI1sQ\"\n}\n\n\nSTEP3 ID\u30c8\u30fc\u30af\u30f3\u306e\u6b63\u5f53\u6027\u306e\u691c\u8a3c\u624b\u9806\n\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u306f\u3001ID\u9023\u643a\u3057\u305f\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u53d7\u3051\u53d6\u3063\u305fID\u30c8\u30fc\u30af\u30f3\u304c\u6539\u3056\u3093\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u3069\u3046\u304b\u3092\u691c\u8a3c\u3059\u308b\u6d41\u308c\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\n\nID\u30c8\u30fc\u30af\u30f3\u306e\u5185\u5bb9\u3092\u691c\u8a3c\u3059\u308b\nSTEP2\u3067\u53d6\u5f97\u3057\u305fid_token\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30d4\u30ea\u30aa\u30c9(.)\u3067\u533a\u5207\u3089\u308c\u305f3\u3064\u6587\u5b57\u5217\u306b\u3088\u308a\u69cb\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nid_token: \"{\u30d8\u30c3\u30c0\u30fc\u90e8}.{\u30da\u30a4\u30ed\u30fc\u30c9\u90e8}.{\u30b7\u30b0\u30cd\u30c1\u30e3\u30fc\u90e8}\"\n\n{\u30d8\u30c3\u30c0\u30fc\u90e8}\u3092\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067base64 \u30c7\u30b3\u30fc\u30c9\u3059\u308b\u3068\u3001\u5185\u5bb9\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\necho \"{\u30d8\u30c3\u30c0\u30fc\u90e8}\" | base64 -d\n\n\u51fa\u529b\u7d50\u679c\n{\n\"typ\":\"JWT\",\n\"alg\":\"HS256\"\n}\n\nJWT\u3067\u3042\u308b\u3053\u3068\u3068\u3001HS256\u306f\u7f72\u540d\u751f\u6210\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3068\u3057\u3066HMAC-SHA256\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n{\u30da\u30a4\u30ed\u30fc\u30c9\u90e8}\u3082\u540c\u69d8\u306b\u3001base64\u30c7\u30b3\u30fc\u30c9\u3057\u3001\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n{\n\"iss\":\"https:\u00a5/\u00a5/auth.login.yahoo.co.jp\",\n\"user_id\":\"TAHOGSH35SAMPLEZE4PNLMKHE0Q\",\n\"aud\":\"dj0zaiZpPW9QSklOZ2FVSampleZzPWNvbnN1bWVyc2VjcmV0Jng9ODc-\",\n\"iat\":1441606899,\n\"exp\":1444025965,\n\"nonce\":\"ef3a091928d5491624c0ac54d697124422705092\"\n}\n\n\n\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\n\u5185\u5bb9\n\u691c\u8a3c\u65b9\u6cd5\n\n\n\n\niss\nID\u30c8\u30fc\u30af\u30f3\u306e\u767a\u884c\u5143\n\nhttps://auth.login.yahoo.co.jp\u3068\u4e00\u81f4\u3059\u308b\u3053\u3068\u78ba\u8a8d\u307e\u305f\u3001\u30da\u30a4\u30ed\u30fc\u30c9\u306e\u5185\u5bb9\u306fjson\u5f62\u5f0f\u3067\u3042\u308a\u3001\u30b9\u30e9\u30c3\u30b7\u30e5(/)\u306f\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5(\\)\u3067\u30a8\u30b9\u30b1\u30fc\u30d7\u3055\u308c\u307e\u3059\n\n\nuser_id\n\u30e6\u30fc\u30b6\u30fc\u8b58\u5225\u5b50\n\u4ed6\u306e\u691c\u8a3c\u304c\u5168\u3066\u3068\u304a\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u3053\u306eID\u304c\u6b63\u3057\u3044\u7269\u3060\u3068\u691c\u8a3c\u3067\u304d\u307e\u3059\n\n\naud\nID\u30c8\u30fc\u30af\u30f3\u306e\u767a\u884c\u5bfe\u8c61\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3ID\n\u767a\u884c\u6642\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3ID(client_id)\u3068\u4e00\u81f4\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\n\niat\nID\u30c8\u30fc\u30af\u30f3\u306e\u6709\u52b9\u671f\u9650\u306e\u6642\u523b\u306eUNIX\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\n\u300c\uff08\u73fe\u5728\u6642\u523b\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u5024\uff09-\uff08600\u79d2\uff09\u300d\u4ee5\u4e0a\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\n\nexp\nID\u30c8\u30fc\u30af\u30f3\u306e\u767a\u884c\u6642\u523b\u306eUNIX\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\n\u73fe\u5728\u6642\u523b\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u5024\u3088\u308a\u5927\u304d\u3044\u3053\u3068\u3092\u78ba\u8a8d\n\n\nnonce\nAuthorization\u30ea\u30af\u30a8\u30b9\u30c8\u6642\u306b\u9001\u4fe1\u3057\u305f\u5024\n\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305f\u6642\u306enonce\u306e\u5024\u3068\u4e00\u81f4\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\n\n\n\u73fe\u5728\u6642\u523b\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u5024\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002\ndate +%s\n\n\n\u7f72\u540d\u3092\u691c\u8a3c\u3059\u308b\nYConnect\u3067\u306fJWT\u306e\u7f72\u540d\u751f\u6210\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3068\u3057\u3066HMAC-SHA256\u304c\u5229\u7528\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u691c\u8a3c\u306e\u624b\u9806\u3082HMAC-SHA256\u306b\u57fa\u3065\u3044\u305f\u691c\u8a3c\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u4e0a\u8a18\u306e{\u30d8\u30c3\u30c0\u30fc\u90e8}\u3068{\u30da\u30a4\u30ed\u30fc\u30c9\u90e8}\u3092\u30d4\u30ea\u30aa\u30c9(.)\u3067\u7e4b\u304e\u3001client_secret\u3092\u4f7f\u3063\u3066HMAC-SHA256\u3067\u30cf\u30c3\u30b7\u30e5\u5316\u3057\u307e\u3059\u3002\necho -n \"{\u30d8\u30c3\u30c0\u30fc\u90e8}.{\u30da\u30a4\u30ed\u30fc\u30c9\u90e8}\" | openssl dgst -binary -sha256 -hmac \"{client_secret}\" > hs256_sign.txt\n\n\n\u30cf\u30c3\u30b7\u30e5\u5316\u3059\u308b\u3068\u304d\u306f\u30d0\u30a4\u30ca\u30ea\u8868\u73fe\u3067\u51fa\u529b\u3057\u307e\u3059\n\n\u30cf\u30c3\u30b7\u30e5\u5316\u3057\u305f\u7d50\u679c\u3092url safe base64\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u307e\u3059\u3002\nbase64 hs256_sign.txt | tr -d '\u00a5n' | tr -d '=' | tr '/+' '_-'\n\n\u51fa\u529b\u3055\u308c\u305f\u7d50\u679c\u3068{\u30b7\u30b0\u30cd\u30c1\u30e3\u30fc\u90e8}\u304c\u4e00\u81f4\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\nSTEP4 \u5c5e\u6027\u60c5\u5831\u306e\u53d6\u5f97\n\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u306fID\u9023\u643a\u3057\u305f\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8a8d\u8a3c\u3057\u305f\u30e6\u30fc\u30b6\u306e\u5c5e\u6027\u60c5\u5831(\u540d\u524d\u3001\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3001\u4f4f\u6240\u7b49)\u3092Access Token\u3092\u4f7f\u3063\u3066\u53d6\u5f97\u3059\u308b\u6d41\u308c\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\nUserInfoAPI\u306bAccess Token\u3092\u6e21\u3059\u3068\u3001\u5c5e\u6027\u60c5\u5831\u3092\u5f97\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\ncurl -H 'Authorization: Bearer {access_token}' https://userinfo.yahooapis.jp/yconnect/v1/attribute?schema=openid\n\n{access_token}\u306b\u3001STEP2\u3067\u53d6\u5f97\u3057\u305fAccess Token\u306e\u5024\u3092\u5165\u308c\u307e\u3059\u3002\n\u6210\u529f\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n{\n\"user_id\":\"TAHOGSH35SAMPLEZE4PNLMKHE0Q\",\n\"name\":\"\u5c71\u7530\u592a\u90ce\",\n\"given_name\":\"\u592a\u90ce\",\n\"given_name#ja-Kana-JP\":\"\u30bf\u30ed\u30a6\",\n\"given_name#ja-Hani-JP\":\"\u592a\u90ce\",\n\"family_name\":\"\u5c71\u7530\",\n\"family_name#ja-Kana-JP\":\"\u30e4\u30de\u30c0\",\n\"family_name#ja-Hani-JP\":\"\u5c71\u7530\",\n\"gender\":\"male\",\n\"birthday\":\"1989\",\n\"locale\":\"ja-JP\"\n}\n\nSTEP1\u3067scope\u306b\u6307\u5b9a\u3057\u305f\u5024\u3067\u3001\u8fd4\u5374\u3055\u308c\u308b\u5c5e\u6027\u60c5\u5831\u304c\u5909\u308f\u308a\u307e\u3059\u3002\n\n\u307e\u3068\u3081\n\n\u306f\u307e\u3063\u305f\u3053\u3068\n\nSTEP3\u306e\u7f72\u540d\u3092\u691c\u8a3c\u3059\u308b\u6642\u306b\u3051\u3063\u3053\u3046\u306f\u307e\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\u306f\u307e\u3063\u3066\u3057\u307e\u3063\u305f\u539f\u56e0\u306f\u3001HMAC-SHA256\u3067\u30cf\u30c3\u30b7\u30e5\u5316\u3059\u308b\u3068\u304d\u306bHex\u6587\u5b57\u5217\u3067\u51fa\u529b\u3057\u305f\u5024\u3092base64\u3067\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u3066\u3044\u305f\u305f\u3081\u3001\u30b7\u30b0\u30cd\u30c1\u30e3\u30fc\u306e\u5024\u3068\u4e00\u81f4\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u6b63\u3057\u304f\u306f\u30d0\u30a4\u30ca\u30ea\u5f62\u5f0f\u3067\u51fa\u529b\u3057\u305f\u5024\u3092base64\u3067\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u307e\u3059\n\n\n\u611f\u60f3\n\n\u6700\u521d\u306f\u4ed5\u69d8\u3092\u8aad\u3093\u3067\u7406\u89e3\u3057\u3088\u3046\u3068\u3057\u307e\u3057\u305f\u304c\u3001\u5b9f\u969b\u306b\u624b\u3067\u30d5\u30ed\u30fc\u3092\u8ffd\u3063\u3066\u307f\u308b\u3068\u3001\u7406\u89e3\u304c\u6df1\u307e\u308a\u307e\u3057\u305f\n\u4eca\u56de\u8a66\u3057\u305f\u90e8\u5206\u3092\u5b9f\u88c5\u3059\u308b\u3060\u3051\u3067ID\u9023\u643a\u304c\u53ef\u80fd\u3068\u306a\u308b\u306e\u3067\u3001\u81ea\u5206\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u7ba1\u7406\u3059\u308b\u3088\u308a\u3082\u30b3\u30b9\u30c8\u304c\u5c11\u306a\u304f\u6e08\u3080\u3053\u3068\u3092\u5b9f\u611f\u3057\u307e\u3057\u305f\n\n\n\nOpenID Connect\u3092\u5b66\u7fd2\u3059\u308b\u305f\u3081\u306b\u3001\u5b9f\u969b\u306b[Yahoo! ID\u9023\u643a\u30b5\u30fc\u30d3\u30b9](http://developer.yahoo.co.jp/yconnect/)\u3067OpenID Connect\u3092\u4f53\u9a13\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n# \u524d\u7f6e\u304d\n\n## \u4f53\u9a13\u3057\u3066\u307f\u305f\u7406\u7531\n\nOpenID Connect\u3092\u5229\u7528\u3057\u305fID\u9023\u643a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u3063\u3066\u898b\u3088\u3046\u3068\u601d\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u77e5\u8b58\u3082\u7121\u304f\u3001\u4ed5\u69d8\u3082\u96e3\u3057\u304f\u3001\u3069\u3053\u304b\u3089\u624b\u3092\u3064\u3051\u3066\u826f\u3044\u306e\u304b\u308f\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u305d\u3053\u3067\u3001\u5b9f\u969b\u306bOpenID Connect\u306e\u30d5\u30ed\u30fc\u3092\u4e00\u3064\u4e00\u3064\u624b\u3067\u8ffd\u3063\u3066\u307f\u3066\u3001\u7406\u89e3\u3092\u6df1\u3081\u3088\u3046\u3068\u8003\u3048\u307e\u3057\u305f\u3002\u305d\u306e\u624b\u9806\u3092\u8a18\u4e8b\u306b\u3057\u307e\u3059\u3002\n\n## OpenID Connect\u3068\u306f\u306a\u306b\u304b\n\nOpenID Connect\u306f\u3001OAuth2.0\u3068\u3044\u3046\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u5229\u7528\u3057\u305f\u30bb\u30ad\u30e5\u30a2\u306a\u30b5\u30fc\u30d3\u30b9\u306e\u5229\u7528\u304c\u3067\u304d\u308b**\u8a8d\u53ef**\u306e\u4ed5\u7d44\u307f\u306e\u4e0a\u3067**\u8a8d\u8a3c**\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u305f\u3082\u306e\u3067\u3059\u3002\u4ee5\u4e0b\u306bOpenID Connect\u3092\u52c9\u5f37\u3059\u308b\u4e0a\u3067\u3001\u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8\u3092\u8a18\u8f09\u3057\u307e\u3059\u3002\n\n[OpenID Connect \u5165\u9580](http://www.slideshare.net/kura_lab/openid-connect-id)\n\n# \u524d\u6e96\u5099\n\n## \u4e8b\u524d\u306b\u5fc5\u8981\u306a\u30b3\u30c8\n\nYahoo! JAPAN\u3078\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u767b\u9332\u304c\u5fc5\u8981\u3067\u3059\u3002Yahoo! JAPAN\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u767b\u9332\u3059\u308b\u3068\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3ID(\u4ee5\u4e0bclient_id\u3068\u3057\u307e\u3059)\u3068\u30b7\u30fc\u30af\u30ec\u30c3\u30c8(\u4ee5\u4e0bclient_secret\u3068\u3057\u307e\u3059)\u304c\u624b\u306b\u5165\u308a\u307e\u3059\u3002\u307e\u305f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u767b\u9332\u3059\u308b\u305f\u3081\u306b\u306f\u3001Yahoo! JAPAN ID\u304c\u5fc5\u8981\u3067\u3059\u3002\u6301\u3063\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u4f5c\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u767b\u9332\u3057\u307e\u3057\u305f\u3002\n\n|\u8a2d\u5b9a\u9805\u76ee|\u8a2d\u5b9a\u5024|\n|:--|:----|\n|\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u7a2e\u985e|\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9|\n|\u30b3\u30fc\u30eb\u30d0\u30c3\u30afURL|http://example.com|\n\n### \u53c2\u8003URL\n\n[Yahoo! JAPAN ID\u306e\u767b\u9332\u30da\u30fc\u30b8](https://account.edit.yahoo.co.jp/registration?.src=ydn&.done=http%3A%2F%2Fdeveloper.yahoo.co.jp%2Fyconnect%2F)\n\n[\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3ID\u306e\u767b\u9332\u30da\u30fc\u30b8](https://e.developer.yahoo.co.jp/register)\n\n\n## \u4e8b\u524d\u306b\u5fc5\u8981\u306a\u30e2\u30ce\n\n* \u30d6\u30e9\u30a6\u30b6\n* \u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3067\u304d\u308b\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\n    * tr\n    * curl\n    * openssl\n    * base64\n    * date\n\n\u5b9f\u884c\u74b0\u5883\n\n* \u30d6\u30e9\u30a6\u30b6\n  * Google Chrome \u30d0\u30fc\u30b8\u30e7\u30f3 45.0.2454.85 m\n* OS\n  * Ubuntu 14.04 64bit\n\n\n\n# \u5b9f\u969b\u306bOpenID Connect\u3057\u3066\u307f\u308b\n\n## STEP1 Authorization code\u306e\u53d6\u5f97\n\n\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u306fID\u9023\u643a\u3057\u305f\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304cYahoo! JAPAN\u304b\u3089Authorization code\u3092\u53d6\u5f97\u3059\u308b\u6d41\u308c\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u306f\u3001Yahoo! JAPAN\u3078\u306e\u30ed\u30b0\u30a4\u30f3\u3068ID\u9023\u643a\u306e\u540c\u610f\u304c\u5fc5\u8981\u3067\u3042\u308b\u305f\u3081\u30d6\u30e9\u30a6\u30b6\u3092\u5229\u7528\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306eURL\u3092\u30d6\u30e9\u30a6\u30b6\u3067\u958b\u304d\u307e\u3059\u3002\n\n```\nhttps://auth.login.yahoo.co.jp/yconnect/v1/authorization?\nresponse_type=code+id_token\n&client_id={client_id}\n&redirect_uri=http://example.com\n&state=xyz\n&scope=openid+profile\n&nonce=ef3a091928d5491624c0ac54d697124422705092\n```\n\n|\u30d1\u30e9\u30e1\u30fc\u30bf|\u5fc5\u9808|\u8aac\u660e|\n|:--|:--|:----|\n|response_type|\u25cb|\u300ccode\u300d\u3068\u300cid_token\u300d\u3092\u6307\u5b9a\u3057\u307e\u3059|\n|client_id|\u25cb|\u4e8b\u524d\u306b\u6e96\u5099\u3057\u305fclient_id\u306e\u5024\u3092\u5165\u308c\u307e\u3059|\n|redirect_uri|\u25cb|\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3ID\u3092\u767b\u9332\u3057\u305f\u6642\u306b\u3001\u30b3\u30fc\u30eb\u30d0\u30c3\u30afURL\u306b\u5165\u529b\u3057\u305fURL\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u300c[http://example.com](http://example.com)\u300d\u3092\u6307\u5b9a\u3057\u307e\u3059|\n|state||CSRF\u5bfe\u7b56\u306e\u30e9\u30f3\u30c0\u30e0\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3057\u307e\u3059|\n|scope||OpenID Connect\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u308b\u5834\u5408\u306f\u3001scope\u306b\u5fc5\u305a\u300copenid\u300d\u306e\u5024\u3092\u5165\u308c\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059<br>\u300copenid\u300d\u306e\u5024\u4ee5\u5916\u306b\u3001\u53d6\u5f97\u3057\u305f\u3044\u5c5e\u6027\u60c5\u5831\u3092scope\u3067\u6307\u5b9a\u3057\u307e\u3059<br>\u30fb\u300copenid\u300d\u306e\u307f\u3092scope\u306b\u6307\u5b9a\u3059\u308b\u3068\u3001\u30e6\u30fc\u30b6\u30fc\u8b58\u5225\u5b50\u306e\u307f\u53d6\u5f97\u3067\u304d\u307e\u3059<br>\u30fb\u300cprofile\u300d\u3092scope\u306b\u6307\u5b9a\u3059\u308b\u3068\u3001\u59d3\u540d\u30fb\u751f\u5e74\u30fb\u6027\u5225\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059<br>\u30fb\u300cemail\u300d\u3092scope\u306b\u6307\u5b9a\u3059\u308b\u3068\u3001\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u78ba\u8a8d\u6e08\u307f\u30d5\u30e9\u30b0\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059<br>\u30fb\u300caddress\u300d\u3092scope\u306b\u6307\u5b9a\u3059\u308b\u3068\u3001\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u4f4f\u6240\u60c5\u5831\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059|\n|nonce|id_token\u3092\u53d6\u5f97\u3059\u308b\u969b\u306f\u5fc5\u9808|\u30ea\u30d5\u309a\u30ec\u30a4\u30a2\u30bf\u30c3\u30af\u5bfe\u7b56\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3067\u3059\u3002\u30ea\u30af\u30a8\u30b9\u30c8\u3054\u3068\u306b\u30e9\u30f3\u30c0\u30e0\u306a\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3057\u307e\u3059|\n|display||\u30e6\u30fc\u30b6\u30fc\u306eUI\u3092page(PC\u7528UI)\u3001touch(\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3\u7528UI)\u3001wap(\u30d5\u30a3\u30fc\u30c1\u30e3\u30fc\u30d5\u30a9\u30f3\u7528UI)\u3001inapp(\u30cd\u30a4\u30c6\u30a3\u30d6\u30a2\u30d7\u30ea\u7528UI)\uff5e\u9078\u629e\u3067\u304d\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306fpage\u3067\u3059|\n|bail||Yahoo! JAPAN\u304c\u72ec\u81ea\u306b\u7528\u610f\u3057\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u3059\u3002bail=1 \u3092\u6307\u5b9a\u3059\u308b\u3068\u540c\u610f\u753b\u9762\u3067\u300c\u540c\u610f\u3057\u306a\u3044\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u305f\u969b\u306bcode\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3092\u4ed8\u52a0\u305b\u305a\u306bredirect_uri\u3078\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u305b\u307e\u3059\u3002\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306fYahoo!\u30c8\u30c3\u30d5\u309a\u3078\u9077\u79fb\u3057\u307e\u3059|\n\n\n\u6210\u529f\u3059\u308b\u3068\u30ed\u30b0\u30a4\u30f3/\u540c\u610f\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n* Yahoo! JAPAN\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\n    * \u3059\u3067\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u7701\u7565\u3055\u308c\u307e\u3059\n* \u540c\u610f\u753b\u9762\u3067\u306f\u300c\u540c\u610f\u3057\u3066\u306f\u3058\u3081\u308b\u300d\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\n    * \u4e00\u5ea6\u540c\u610f\u3059\u308b\u3068\u3001\u6b21\u56de\u4ee5\u964d\u540c\u610f\u753b\u9762\u306f\u7701\u7565\u3055\u308c\u307e\u3059\n\n\u30ed\u30b0\u30a4\u30f3/\u540c\u610f\u304c\u5b8c\u4e86\u3059\u308b(\u3082\u3057\u304f\u306f\u4e8b\u524d\u306b\u30ed\u30b0\u30a4\u30f3\u3001\u540c\u610f\u3057\u3066\u3044\u308b)\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306aURL\u3067\u300c[http://example.com](http://example.com)\u300d\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u307e\u3059\u3002\n\n```\nhttp://example.com/?code=kaeasavt&state=xyz\n```\n\n* code=kaeasavt\u306e\u90e8\u5206\u304cAuthorization Code\u3067\u3059\n    * \u3053\u306ecode\u306e\u5024\u3092\u4fdd\u5b58\u3057\u307e\u3059\n* state=xyz\u306fAuthorization Request\u306e\u6642\u306b\u8a2d\u5b9a\u3057\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5024\u3067\u3059\u3002\u30ea\u30af\u30a8\u30b9\u30c8\u6642\u306e\u5024\u300cxyz\u300d\u3068\u4e00\u81f4\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\n    * \u672c\u6765\u306f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u6642\u306bstate\u306e\u5024\u3092\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u4fdd\u5b58\u3057\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u306estate\u306e\u5024\u3092\u6bd4\u8f03\u3057\u307e\u3059\u3002\u4e00\u81f4\u3057\u306a\u3051\u308c\u3070\u51e6\u7406\u3092\u4e2d\u65ad\u3057\u307e\u3059\n\n## STEP2 Access Token\u3001ID Token\u306e\u53d6\u5f97\n\n\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u306fID\u9023\u643a\u3057\u305f\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u3001Step1\u3067\u53d6\u5f97\u3057\u305fcode\u3092yahoo! JAPAN\u306b\u6e21\u3057\u3066\u3001Access Token\u3068ID Token\u3092\u53d6\u5f97\u3059\u308b\u6d41\u308c\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\n\nToken\u3092\u53d6\u5f97\u3059\u308b\u969b\u306f\u3001HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30d8\u30c3\u30c0\u30fc\u3084\u30c7\u30fc\u30bf\u306b\bToken\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5fc5\u8981\u306a\u5024\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067curl\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3057\u307e\u3057\u305f\u3002\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001Token\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```\ncurl -H 'Authorization: Basic {basicAuth}' -d \\\n\"grant_type=authorization_code&code={code}&redirect_uri=http://example.com\" \\\nhttps://auth.login.yahoo.co.jp/yconnect/v1/token\n```\n\n|\u30d1\u30e9\u30e1\u30fc\u30bf|\u5fc5\u9808|\u8aac\u660e|\n|:--|:--|:----|\n|grant_type|\u25cb|authorization_code \u3068\u3044\u3046\u56fa\u5b9a\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3057\u307e\u3059|\n|code|\u25cb|\u8a8d\u53ef\u30b3\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059<br>\u4e00\u5ea6\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305f\u8a8d\u53ef\u30b3\u30fc\u30c9\u306f\u4f7f\u7528\u3067\u304d\u306a\u304f\u306a\u308a\u307e\u3059|\n|redirect_uri|\u25cb|STEP1\u3067\u9001\u3063\u305f\u30ea\u30af\u30a8\u30b9\u30c8\u306eredirect_uri\u3067\u6307\u5b9a\u3057\u305fURL\u3092\u5165\u529b\u3057\u307e\u3059|\n\n{code}\u306b\u306fSTEP1\u3067\u53d6\u5f97\u3057\u305fcode\u306e\u5024\u3092\u5165\u308c\u307e\u3059\u3002\n\n{basicAuth}\u306b\u306f\u3001client_id\u3068client_secret\u3092\u300c:\u300d\uff08\u30b3\u30ed\u30f3\uff09\u3067\u3064\u306a\u304e\u3001Base64\u3067\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u305f\u5024\u3092\u5165\u308c\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067{basicAuth}\u306b\u5165\u308c\u308b\u5024\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n```\necho -n \"{client_id}:{client_secret}\" | base64\n```\n\n{client_id}\u3068{client_secret}\u306f\u4e8b\u524d\u306b\u7528\u610f\u3057\u305fclient_id\u3068client_secret\u306e\u5024\u3092\u5165\u308c\u307e\u3059\u3002\n\n\u6210\u529f\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n```json\n{\n\"access_token\":\"gCDvPtVgo..z2kTSWEnQs_.YzGtTdmMBWNLGJD0JE3El4v68N3a0EVhbdhmUqoqZsQ0H8samPleQPiFg6PPuFRjWipUpZGq0566RcWrUdsWNPUBCO9AL5tgb6mLS5gzArQvbkPEwSRJFJgAX1SlX1dlu.6mlEEWs5kQiZlZ1SnuTYarkn5o47nC_Kqip6aF7DFBz.alcj4dVaOc9OMPrZw1ioTIzKpNka2UnulvVDhL7KVm00nKcbxUKhoLPl_E4JDGe2ttEg.RStTfQer5oHpR5RSf_5BCpPSampleZx9MYntNVXRHBCczChWJKa3Kck1HlnN3CI9uhdwcD1xx6R5kgi4EMttDoSguU4LxtXiqC24_fAQuHdtz1D9IAf6eeE4xHF_1AfJDkzbyDLWvWVUAbNpiErvKFPM8O8efd9bb74.8WMe49cdK5AaUSEdZg7Hu5H6V5C.KBMs768i.Piv98iXQl0G8vXKmS4rZwrcADVYocokB9VFzlRZruwJFXtWpyW5gvS3.5lSshiN4SampleTT5qsMlrKsSETIj.KNnuPQEDUPWIVpHjLTr1hudsaMPleK8M1atMOGAKr65RdZbd7ItwshOEA--\",\n\"token_type\":\"bearer\",\n\"expires_in\":\"3600\",\n\"refresh_token\":\"AIHv2FUi6ygUPgm0dPSaMPleDztwSX_xd0XZ9ZSiYdWWo5Lcvic-\",\n\"id_token\":\"eyJ0eXAiOiJKV1QiLSampleiOiJIUzI1NiJ9.eyJpc3MiOiJodHRwxzpcL1wvYXV0aC3sb2dSampleWhvby5jby5qCCIsInVzZXJfaWQiOiJTT09HSUgzV1lCNUpDWFpFSUtUWUdLSFk0USIsImF1ZCI6ImRqMHphaSample5UVNrbE9aMkZWU21wWVJYWnpQV052Ym5OMWJXVnljMlZqY21WMEpuZzlPRGMtIiwiaWF0IjoxNDQSampleDk5LCJleHAiOjE0NDQwMjU5NjUsIm5vbmLlIjhiZWYzYTA5MTkyOGQ1NDkxNjI0YzBjYzU0FDY5NzEyNDQyMjcwNTA3MiJ9.24VcO1TsAmplEqcFK9bOR3tzaoQjDQSY_ufGfMHI1sQ\"\n}\n```\n\n## STEP3 ID\u30c8\u30fc\u30af\u30f3\u306e\u6b63\u5f53\u6027\u306e\u691c\u8a3c\u624b\u9806\n\n\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u306f\u3001ID\u9023\u643a\u3057\u305f\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u53d7\u3051\u53d6\u3063\u305fID\u30c8\u30fc\u30af\u30f3\u304c\u6539\u3056\u3093\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u3069\u3046\u304b\u3092\u691c\u8a3c\u3059\u308b\u6d41\u308c\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\n\n### ID\u30c8\u30fc\u30af\u30f3\u306e\u5185\u5bb9\u3092\u691c\u8a3c\u3059\u308b\n\nSTEP2\u3067\u53d6\u5f97\u3057\u305fid_token\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30d4\u30ea\u30aa\u30c9(.)\u3067\u533a\u5207\u3089\u308c\u305f3\u3064\u6587\u5b57\u5217\u306b\u3088\u308a\u69cb\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\nid_token: \"{\u30d8\u30c3\u30c0\u30fc\u90e8}.{\u30da\u30a4\u30ed\u30fc\u30c9\u90e8}.{\u30b7\u30b0\u30cd\u30c1\u30e3\u30fc\u90e8}\"\n```\n\n\n{\u30d8\u30c3\u30c0\u30fc\u90e8}\u3092\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067base64 \u30c7\u30b3\u30fc\u30c9\u3059\u308b\u3068\u3001\u5185\u5bb9\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\n```\necho \"{\u30d8\u30c3\u30c0\u30fc\u90e8}\" | base64 -d\n```\n\n\u51fa\u529b\u7d50\u679c\n\n```json\n{\n\"typ\":\"JWT\",\n\"alg\":\"HS256\"\n}\n```\n\nJWT\u3067\u3042\u308b\u3053\u3068\u3068\u3001HS256\u306f\u7f72\u540d\u751f\u6210\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3068\u3057\u3066HMAC-SHA256\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n{\u30da\u30a4\u30ed\u30fc\u30c9\u90e8}\u3082\u540c\u69d8\u306b\u3001base64\u30c7\u30b3\u30fc\u30c9\u3057\u3001\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```json\n{\n\"iss\":\"https:\u00a5/\u00a5/auth.login.yahoo.co.jp\",\n\"user_id\":\"TAHOGSH35SAMPLEZE4PNLMKHE0Q\",\n\"aud\":\"dj0zaiZpPW9QSklOZ2FVSampleZzPWNvbnN1bWVyc2VjcmV0Jng9ODc-\",\n\"iat\":1441606899,\n\"exp\":1444025965,\n\"nonce\":\"ef3a091928d5491624c0ac54d697124422705092\"\n}\n```\n\n\n|\u30d1\u30e9\u30e1\u30fc\u30bf|\u5185\u5bb9|\u691c\u8a3c\u65b9\u6cd5|\n|:--|:--|:----|\n|iss|ID\u30c8\u30fc\u30af\u30f3\u306e\u767a\u884c\u5143|[https://auth.login.yahoo.co.jp](https://auth.login.yahoo.co.jp)\u3068\u4e00\u81f4\u3059\u308b\u3053\u3068\u78ba\u8a8d<br>\u307e\u305f\u3001\u30da\u30a4\u30ed\u30fc\u30c9\u306e\u5185\u5bb9\u306fjson\u5f62\u5f0f\u3067\u3042\u308a\u3001\u30b9\u30e9\u30c3\u30b7\u30e5(/)\u306f\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5(\\\\)\u3067\u30a8\u30b9\u30b1\u30fc\u30d7\u3055\u308c\u307e\u3059|\n|user_id|\u30e6\u30fc\u30b6\u30fc\u8b58\u5225\u5b50|\u4ed6\u306e\u691c\u8a3c\u304c\u5168\u3066\u3068\u304a\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u3053\u306eID\u304c\u6b63\u3057\u3044\u7269\u3060\u3068\u691c\u8a3c\u3067\u304d\u307e\u3059|\n|aud|ID\u30c8\u30fc\u30af\u30f3\u306e\u767a\u884c\u5bfe\u8c61\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3ID|\u767a\u884c\u6642\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3ID(client_id)\u3068\u4e00\u81f4\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d|\n|iat|ID\u30c8\u30fc\u30af\u30f3\u306e\u6709\u52b9\u671f\u9650\u306e\u6642\u523b\u306eUNIX\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7|\u300c\uff08\u73fe\u5728\u6642\u523b\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u5024\uff09-\uff08600\u79d2\uff09\u300d\u4ee5\u4e0a\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d|\n|exp|ID\u30c8\u30fc\u30af\u30f3\u306e\u767a\u884c\u6642\u523b\u306eUNIX\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7|\u73fe\u5728\u6642\u523b\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u5024\u3088\u308a\u5927\u304d\u3044\u3053\u3068\u3092\u78ba\u8a8d|\n|nonce|Authorization\u30ea\u30af\u30a8\u30b9\u30c8\u6642\u306b\u9001\u4fe1\u3057\u305f\u5024|\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305f\u6642\u306enonce\u306e\u5024\u3068\u4e00\u81f4\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d|\n\n\u73fe\u5728\u6642\u523b\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u5024\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\ndate +%s\n```\n\n\n### \u7f72\u540d\u3092\u691c\u8a3c\u3059\u308b\n\nYConnect\u3067\u306fJWT\u306e\u7f72\u540d\u751f\u6210\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3068\u3057\u3066HMAC-SHA256\u304c\u5229\u7528\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u691c\u8a3c\u306e\u624b\u9806\u3082HMAC-SHA256\u306b\u57fa\u3065\u3044\u305f\u691c\u8a3c\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u4e0a\u8a18\u306e{\u30d8\u30c3\u30c0\u30fc\u90e8}\u3068{\u30da\u30a4\u30ed\u30fc\u30c9\u90e8}\u3092\u30d4\u30ea\u30aa\u30c9(.)\u3067\u7e4b\u304e\u3001client_secret\u3092\u4f7f\u3063\u3066HMAC-SHA256\u3067\u30cf\u30c3\u30b7\u30e5\u5316\u3057\u307e\u3059\u3002\n\n```\necho -n \"{\u30d8\u30c3\u30c0\u30fc\u90e8}.{\u30da\u30a4\u30ed\u30fc\u30c9\u90e8}\" | openssl dgst -binary -sha256 -hmac \"{client_secret}\" > hs256_sign.txt\n```\n\n* \u30cf\u30c3\u30b7\u30e5\u5316\u3059\u308b\u3068\u304d\u306f\u30d0\u30a4\u30ca\u30ea\u8868\u73fe\u3067\u51fa\u529b\u3057\u307e\u3059\n\n\u30cf\u30c3\u30b7\u30e5\u5316\u3057\u305f\u7d50\u679c\u3092url safe base64\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n```\nbase64 hs256_sign.txt | tr -d '\u00a5n' | tr -d '=' | tr '/+' '_-'\n```\n\n\u51fa\u529b\u3055\u308c\u305f\u7d50\u679c\u3068{\u30b7\u30b0\u30cd\u30c1\u30e3\u30fc\u90e8}\u304c\u4e00\u81f4\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\n\n## STEP4 \u5c5e\u6027\u60c5\u5831\u306e\u53d6\u5f97\n\n\u3053\u306e\u30b9\u30c6\u30c3\u30d7\u3067\u306fID\u9023\u643a\u3057\u305f\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8a8d\u8a3c\u3057\u305f\u30e6\u30fc\u30b6\u306e\u5c5e\u6027\u60c5\u5831(\u540d\u524d\u3001\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3001\u4f4f\u6240\u7b49)\u3092Access Token\u3092\u4f7f\u3063\u3066\u53d6\u5f97\u3059\u308b\u6d41\u308c\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\n\nUserInfoAPI\u306bAccess Token\u3092\u6e21\u3059\u3068\u3001\u5c5e\u6027\u60c5\u5831\u3092\u5f97\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\ncurl -H 'Authorization: Bearer {access_token}' https://userinfo.yahooapis.jp/yconnect/v1/attribute?schema=openid\n```\n\n{access_token}\u306b\u3001STEP2\u3067\u53d6\u5f97\u3057\u305fAccess Token\u306e\u5024\u3092\u5165\u308c\u307e\u3059\u3002\n\n\u6210\u529f\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n```json\n{\n\"user_id\":\"TAHOGSH35SAMPLEZE4PNLMKHE0Q\",\n\"name\":\"\u5c71\u7530\u592a\u90ce\",\n\"given_name\":\"\u592a\u90ce\",\n\"given_name#ja-Kana-JP\":\"\u30bf\u30ed\u30a6\",\n\"given_name#ja-Hani-JP\":\"\u592a\u90ce\",\n\"family_name\":\"\u5c71\u7530\",\n\"family_name#ja-Kana-JP\":\"\u30e4\u30de\u30c0\",\n\"family_name#ja-Hani-JP\":\"\u5c71\u7530\",\n\"gender\":\"male\",\n\"birthday\":\"1989\",\n\"locale\":\"ja-JP\"\n}\n```\n\nSTEP1\u3067scope\u306b\u6307\u5b9a\u3057\u305f\u5024\u3067\u3001\u8fd4\u5374\u3055\u308c\u308b\u5c5e\u6027\u60c5\u5831\u304c\u5909\u308f\u308a\u307e\u3059\u3002\n\n# \u307e\u3068\u3081\n\n## \u306f\u307e\u3063\u305f\u3053\u3068\n\n* STEP3\u306e\u7f72\u540d\u3092\u691c\u8a3c\u3059\u308b\u6642\u306b\u3051\u3063\u3053\u3046\u306f\u307e\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\u306f\u307e\u3063\u3066\u3057\u307e\u3063\u305f\u539f\u56e0\u306f\u3001HMAC-SHA256\u3067\u30cf\u30c3\u30b7\u30e5\u5316\u3059\u308b\u3068\u304d\u306b**Hex\u6587\u5b57\u5217**\u3067\u51fa\u529b\u3057\u305f\u5024\u3092base64\u3067\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u3066\u3044\u305f\u305f\u3081\u3001\u30b7\u30b0\u30cd\u30c1\u30e3\u30fc\u306e\u5024\u3068\u4e00\u81f4\u3057\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u6b63\u3057\u304f\u306f**\u30d0\u30a4\u30ca\u30ea\u5f62\u5f0f**\u3067\u51fa\u529b\u3057\u305f\u5024\u3092base64\u3067\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u307e\u3059\n \n## \u611f\u60f3\n\n* \u6700\u521d\u306f\u4ed5\u69d8\u3092\u8aad\u3093\u3067\u7406\u89e3\u3057\u3088\u3046\u3068\u3057\u307e\u3057\u305f\u304c\u3001\u5b9f\u969b\u306b\u624b\u3067\u30d5\u30ed\u30fc\u3092\u8ffd\u3063\u3066\u307f\u308b\u3068\u3001\u7406\u89e3\u304c\u6df1\u307e\u308a\u307e\u3057\u305f\n* \u4eca\u56de\u8a66\u3057\u305f\u90e8\u5206\u3092\u5b9f\u88c5\u3059\u308b\u3060\u3051\u3067ID\u9023\u643a\u304c\u53ef\u80fd\u3068\u306a\u308b\u306e\u3067\u3001\u81ea\u5206\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u7ba1\u7406\u3059\u308b\u3088\u308a\u3082\u30b3\u30b9\u30c8\u304c\u5c11\u306a\u304f\u6e08\u3080\u3053\u3068\u3092\u5b9f\u611f\u3057\u307e\u3057\u305f\n", "tags": ["OpenID", "OAuth", "oauth2"]}