{"context": "Fuse\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306fdocker\u74b0\u5883\u306e\u305b\u3044\u306a\u306e\u304b\u3001\u52d5\u304b\u306a\u304b\u3063\u305f\u306e\u3067rpm\u4f5c\u6210\u65b9\u6cd5\u307e\u3067\u3002\n\nfuse\u3068\u306f\n\u7720\u304f\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u7701\u7565\u3002\nFilesystem in Userspace - Wikipedia\nhttps://ja.wikipedia.org/wiki/Filesystem_in_Userspace\ndpavlin/perl-fuse: write filesystems in Perl using FUSE\nhttps://github.com/dpavlin/perl-fuse\nFuse - write filesystems in Perl using FUSE - metacpan.org\nhttps://metacpan.org/pod/Fuse\n\n\u6e96\u5099\u3001\u30d3\u30eb\u30c9\u3001\u5b9f\u884c\n\u9577\u3044\u306e\u3067\u899a\u609f\u81f4\u305b\u3002\n$ docker run --rm -i -t --cap-add SYS_ADMIN --device /dev/fuse centos:centos7 /bin/bash\n\n\u6368\u3066docker\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3059\u308b\u3002\n--cap-add SYS_ADMIN --device /dev/fuse\u306f\u304a\u307e\u3058\u306a\u3044\u3002\n# yum install -y sudo\n# visudo\n- #%wheel  ALL=(ALL)       NOPASSWD: ALL\n+%wheel  ALL=(ALL)       NOPASSWD: ALL\n# useradd -g users -G wheel test\n# su - test\n\n\u3044\u3061\u3044\u3061\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u3068root\u3092\u5207\u308a\u66ff\u3048\u308b\u306e\u304c\u9762\u5012\u306a\u306e\u3067sudo\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\u3002\u30d1\u30b9\u30ef\u30fc\u30c9\u3082\u3044\u3089\u306a\u3044\u3002\n$ sudo yum install -y fuse-devel perl-ExtUtils-MakeMaker make perl-Test-Simple gcc rpm-build rpmdevtools fuse\n\n\u3053\u308c\u3089\u4e00\u901a\u308a\u304c\u5fc5\u8981\u3002\n$ curl -L https://git.io/cpanm -o cpanm\n$ chmod +x cpanm\n$ ./cpanm Fuse\nBuilding and testing Fuse-0.16 ... FAIL\n! Installing Fuse failed. See /home/test/.cpanm/work/1463153252.157/build.log for details. Retry with --force to force install it.\n20 distributions installed\n\ncpanm\u3067\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u306e\u30ed\u30fc\u30ab\u30eb\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\ntest\u304c\u901a\u3089\u306a\u3044\u306e\u3067Fuse\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u6b62\u307e\u308b\u3002\n$ curl -O https://cpan.metacpan.org/authors/id/D/DP/DPATES/Fuse-0.16.tar.gz\n$ curl -O http://apt.sw.be/source/perl-Fuse-0.09-1.rf.src.rpm\n$ rpmdev-setuptree\n$ rpm -ivh perl-Fuse-0.09-1.rf.src.rpm\n$ mv Fuse-0.16.tar.gz rpmbuild/SOURCES/\n$ vi rpmbuild/SPECS/perl-Fuse.spec\n-Version: 0.09\n+Version: 0.16\n$ rpmbuild -ba rpmbuild/SPECS/perl-Fuse.spec\nWrote: /home/test/rpmbuild/SRPMS/perl-Fuse-0.16-1.el7.centos.src.rpm\nWrote: /home/test/rpmbuild/RPMS/x86_64/perl-Fuse-0.16-1.el7.centos.x86_64.rpm\n\nrpm\u3092\u4f5c\u6210\u3059\u308b\u3002SPEC\u30d5\u30a1\u30a4\u30eb\u306fRepoforge\u30ec\u30dd\u30b8\u30c8\u30ea\u3082\u306e\u3092\u4f7f\u308f\u305b\u3066\u9802\u304f\u3002\n\u3053\u3053\u3067Fuse\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u306a\u3044\u306e\u306fSPEC\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u3067make test\u3092\u3057\u3066\u3044\u306a\u3044\u304b\u3089\u3002\nsudo rpm -ivh /home/test/rpmbuild/RPMS/x86_64/perl-Fuse-0.16-1.el7.centos.x86_64.rpm\n\nrpm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\nmkdir tmp\nperl /usr/share/doc/perl-Fuse-0.16/examples/example.pl tmp/\nCtrl+C\n$ ll\nls: cannot access tmp: Transport endpoint is not connected\n-rwxr-xr-x 1 test users 304737 May 13 15:27 cpanm\n-rw-r--r-- 1 test users  24588 May 13 15:31 perl-Fuse-0.09-1.rf.src.rpm\ndrwxr-xr-x 5 test users   4096 May 13 15:27 perl5\ndrwxr-xr-x 8 test users   4096 May 13 15:32 rpmbuild\nd????????? ? ?    ?          ?            ? tmp\n$ fusermount -u tmp\n\nperl-Fuse\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308bsample\u3092\u5b9f\u884c\u3059\u308b\u304c\u3001\n\u6b62\u307e\u3063\u3066\u3057\u307e\u3063\u3066\u52d5\u304b\u306a\u3044\u3002Ctrl+C\u3067\u629c\u3051\u308b\u3068\u304a\u304b\u3057\u306a\u72b6\u614b\u304c\u6b8b\u308b\u306e\u3067\nfusermount -u\u3067\u89e3\u9664\u3059\u308b\u3002\n\n\u53c2\u8003\ndpavlin/perl-fuse: write filesystems in Perl using FUSE\nhttps://github.com/dpavlin/perl-fuse\n\u304a\u307e\u3048\u3089 rpmdev-setuptree \u3092\u4f7f\u3048\u3068\u3044\u3046\u8a71 : \u9769\u547d\u306e\u65e5\u3005 \u305d\u306e\uff12\nhttp://blog.gachapin-sensei.com/archives/618872.html\n\n.rpmmacros\u306b\u4e26\u5217\u51e6\u7406\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u3066\u304f\u308c\u308b\u3002\n\n\u3010\u8cea\u554f\u30a8\u30f3\u30c8\u30ea\u3011s3fs\u3063\u3066docker\u5185\u3067\u30de\u30a6\u30f3\u30c8\u3067\u304d\u306a\u3044\u306e\uff1f - Qiita\nhttp://qiita.com/kochizufan/items/e0253eeda0cd470c6dc8\n\ndocker run \u306e\u6642\u306b --cap-add SYS_ADMIN \u3068 --device /dev/fuse \u3092\u3064\u3051\u308b\u3068\u3046\u307e\u304f\u52d5\u304d\u307e\u3057\u305f\u3002\n\u5b9f\u969b\u306e\u6253\u3063\u305f\u30b3\u30de\u30f3\u30c9\ndocker run -d -p 80:80 -p 443:443 -p 8080:8080 -p 1122:22 --cap-add SYS_ADMIN --device /dev/fuse centos6.6:origin01\n\n\u3010AWS\u3011 s3fs\u30de\u30a6\u30f3\u30c8\u6642\u306b\u8d77\u3053\u308b\u554f\u984c\u3068\u3001\u305d\u306e\u56de\u907f\u65b9\u6cd5 | \u30b5\u30dc\u308a\u5c4b\u306e\u6280\u8853\u30e1\u30e2\nhttps://angelndxp.wordpress.com/2014/03/06/%E3%80%90aws%E3%80%91-s3fs%E3%83%9E%E3%82%A6%E3%83%B3%E3%83%88%E6%99%82%E3%81%AB%E8%B5%B7%E3%81%93%E3%82%8B%E5%95%8F%E9%A1%8C%E3%81%A8%E3%80%81%E3%81%9D%E3%81%AE%E5%9B%9E%E9%81%BF%E6%96%B9%E6%B3%95/\n\nfusermount -u /mnt/s3-bucket\n\nFuse\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306fdocker\u74b0\u5883\u306e\u305b\u3044\u306a\u306e\u304b\u3001\u52d5\u304b\u306a\u304b\u3063\u305f\u306e\u3067rpm\u4f5c\u6210\u65b9\u6cd5\u307e\u3067\u3002\n\n# fuse\u3068\u306f\n\n\u7720\u304f\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u7701\u7565\u3002\n\nFilesystem in Userspace - Wikipedia\nhttps://ja.wikipedia.org/wiki/Filesystem_in_Userspace\n\ndpavlin/perl-fuse: write filesystems in Perl using FUSE\nhttps://github.com/dpavlin/perl-fuse\n\nFuse - write filesystems in Perl using FUSE - metacpan.org\nhttps://metacpan.org/pod/Fuse\n\n\n# \u6e96\u5099\u3001\u30d3\u30eb\u30c9\u3001\u5b9f\u884c\n\n\u9577\u3044\u306e\u3067\u899a\u609f\u81f4\u305b\u3002\n\n```bash\n$ docker run --rm -i -t --cap-add SYS_ADMIN --device /dev/fuse centos:centos7 /bin/bash\n```\n\n\u6368\u3066docker\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3059\u308b\u3002\n`--cap-add SYS_ADMIN --device /dev/fuse`\u306f\u304a\u307e\u3058\u306a\u3044\u3002\n\n```bash\n# yum install -y sudo\n# visudo\n- #%wheel  ALL=(ALL)       NOPASSWD: ALL\n+%wheel  ALL=(ALL)       NOPASSWD: ALL\n# useradd -g users -G wheel test\n# su - test\n```\n\n\u3044\u3061\u3044\u3061\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u3068root\u3092\u5207\u308a\u66ff\u3048\u308b\u306e\u304c\u9762\u5012\u306a\u306e\u3067sudo\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\u3002\u30d1\u30b9\u30ef\u30fc\u30c9\u3082\u3044\u3089\u306a\u3044\u3002\n\n```bash\n$ sudo yum install -y fuse-devel perl-ExtUtils-MakeMaker make perl-Test-Simple gcc rpm-build rpmdevtools fuse\n```\n\n\u3053\u308c\u3089\u4e00\u901a\u308a\u304c\u5fc5\u8981\u3002\n\n```bash\n$ curl -L https://git.io/cpanm -o cpanm\n$ chmod +x cpanm\n$ ./cpanm Fuse\nBuilding and testing Fuse-0.16 ... FAIL\n! Installing Fuse failed. See /home/test/.cpanm/work/1463153252.157/build.log for details. Retry with --force to force install it.\n20 distributions installed\n```\n\ncpanm\u3067\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u306e\u30ed\u30fc\u30ab\u30eb\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\ntest\u304c\u901a\u3089\u306a\u3044\u306e\u3067Fuse\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u6b62\u307e\u308b\u3002\n\n```bash\n$ curl -O https://cpan.metacpan.org/authors/id/D/DP/DPATES/Fuse-0.16.tar.gz\n$ curl -O http://apt.sw.be/source/perl-Fuse-0.09-1.rf.src.rpm\n$ rpmdev-setuptree\n$ rpm -ivh perl-Fuse-0.09-1.rf.src.rpm\n$ mv Fuse-0.16.tar.gz rpmbuild/SOURCES/\n$ vi rpmbuild/SPECS/perl-Fuse.spec\n-Version: 0.09\n+Version: 0.16\n$ rpmbuild -ba rpmbuild/SPECS/perl-Fuse.spec\nWrote: /home/test/rpmbuild/SRPMS/perl-Fuse-0.16-1.el7.centos.src.rpm\nWrote: /home/test/rpmbuild/RPMS/x86_64/perl-Fuse-0.16-1.el7.centos.x86_64.rpm\n```\n\nrpm\u3092\u4f5c\u6210\u3059\u308b\u3002SPEC\u30d5\u30a1\u30a4\u30eb\u306fRepoforge\u30ec\u30dd\u30b8\u30c8\u30ea\u3082\u306e\u3092\u4f7f\u308f\u305b\u3066\u9802\u304f\u3002\n\u3053\u3053\u3067Fuse\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u306a\u3044\u306e\u306fSPEC\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u3067make test\u3092\u3057\u3066\u3044\u306a\u3044\u304b\u3089\u3002\n\n```bash\nsudo rpm -ivh /home/test/rpmbuild/RPMS/x86_64/perl-Fuse-0.16-1.el7.centos.x86_64.rpm\n```\n\nrpm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```bash\nmkdir tmp\nperl /usr/share/doc/perl-Fuse-0.16/examples/example.pl tmp/\nCtrl+C\n$ ll\nls: cannot access tmp: Transport endpoint is not connected\n-rwxr-xr-x 1 test users 304737 May 13 15:27 cpanm\n-rw-r--r-- 1 test users  24588 May 13 15:31 perl-Fuse-0.09-1.rf.src.rpm\ndrwxr-xr-x 5 test users   4096 May 13 15:27 perl5\ndrwxr-xr-x 8 test users   4096 May 13 15:32 rpmbuild\nd????????? ? ?    ?          ?            ? tmp\n$ fusermount -u tmp\n```\n\nperl-Fuse\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308bsample\u3092\u5b9f\u884c\u3059\u308b\u304c\u3001\n\u6b62\u307e\u3063\u3066\u3057\u307e\u3063\u3066\u52d5\u304b\u306a\u3044\u3002Ctrl+C\u3067\u629c\u3051\u308b\u3068\u304a\u304b\u3057\u306a\u72b6\u614b\u304c\u6b8b\u308b\u306e\u3067\n`fusermount -u`\u3067\u89e3\u9664\u3059\u308b\u3002\n\n# \u53c2\u8003\n\ndpavlin/perl-fuse: write filesystems in Perl using FUSE\nhttps://github.com/dpavlin/perl-fuse\n\n\u304a\u307e\u3048\u3089 rpmdev-setuptree \u3092\u4f7f\u3048\u3068\u3044\u3046\u8a71 : \u9769\u547d\u306e\u65e5\u3005 \u305d\u306e\uff12\nhttp://blog.gachapin-sensei.com/archives/618872.html\n>  .rpmmacros\u306b\u4e26\u5217\u51e6\u7406\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u3066\u304f\u308c\u308b\u3002\n\n\u3010\u8cea\u554f\u30a8\u30f3\u30c8\u30ea\u3011s3fs\u3063\u3066docker\u5185\u3067\u30de\u30a6\u30f3\u30c8\u3067\u304d\u306a\u3044\u306e\uff1f - Qiita\nhttp://qiita.com/kochizufan/items/e0253eeda0cd470c6dc8\n>\ndocker run \u306e\u6642\u306b --cap-add SYS_ADMIN \u3068 --device /dev/fuse \u3092\u3064\u3051\u308b\u3068\u3046\u307e\u304f\u52d5\u304d\u307e\u3057\u305f\u3002\n\u5b9f\u969b\u306e\u6253\u3063\u305f\u30b3\u30de\u30f3\u30c9\ndocker run -d -p 80:80 -p 443:443 -p 8080:8080 -p 1122:22 --cap-add SYS_ADMIN --device /dev/fuse centos6.6:origin01\n\n\u3010AWS\u3011 s3fs\u30de\u30a6\u30f3\u30c8\u6642\u306b\u8d77\u3053\u308b\u554f\u984c\u3068\u3001\u305d\u306e\u56de\u907f\u65b9\u6cd5 | \u30b5\u30dc\u308a\u5c4b\u306e\u6280\u8853\u30e1\u30e2\nhttps://angelndxp.wordpress.com/2014/03/06/%E3%80%90aws%E3%80%91-s3fs%E3%83%9E%E3%82%A6%E3%83%B3%E3%83%88%E6%99%82%E3%81%AB%E8%B5%B7%E3%81%93%E3%82%8B%E5%95%8F%E9%A1%8C%E3%81%A8%E3%80%81%E3%81%9D%E3%81%AE%E5%9B%9E%E9%81%BF%E6%96%B9%E6%B3%95/\n> fusermount -u /mnt/s3-bucket\n", "tags": ["Perl", "rpmbuild", "rpmdevtools"]}