{"tags": ["Bigtop", "hadoop"], "context": " More than 1 year has passed since last update.Bigtop\u3068\u622f\u308c\u308b \u305d\u306e1\u306e\u7d9a\u304d\u3067\u3059\u3002\u3072\u305f\u3059\u3089\u622f\u308c\u307e\u3057\u305f\u304c\u3001\u8ab2\u984c\u304c\u6b8b\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u7d9a\u304d\u3092\u66f8\u304f\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\u76ee\u6a19\n\n\u6700\u65b0\u7248\u306eHadoop\u306eRPM\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\u3053\u3068\n\u81ea\u5206\u3067\u30d1\u30c3\u30c1\u3092\u5f53\u3066\u305fHadoop\u306eRPM\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\u3053\u3068\n\n\u4e21\u65b9\u3068\u3082\u3053\u306e\u8a18\u4e8b\u3067\u9054\u6210\u3057\u307e\u3059\u3002\n\n\u6700\u65b0\u7248\u306eHadoop\u306eRPM\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\n2015/12/22\u6642\u70b9\u306emaster\u3060\u3068\u3001Bigtop\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bHadoop\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f2.7.1\u306b\u306a\u308b\u3002\n\nbigtop.bom\n    'hadoop' {\n      name    = 'hadoop'\n      relNotes = 'Apache Hadoop'\n      version { base = '2.7.1'; pkg = base; release = 1 }\n      tarball { destination = \"${name}-${version.base}.tar.gz\"\n                source      = \"${name}-${version.base}-src.tar.gz\" }\n      url     { download_path = \"/$name/common/$name-${version.base}\"\n                site = \"${apache.APACHE_MIRROR}/${download_path}\"\n                archive = \"${apache.APACHE_ARCHIVE}/${download_path}\" }\n    }\n\n\n\u73fe\u72b6\u3001Apache Hadoop\u306e\u6700\u65b0\u30ea\u30ea\u30fc\u30b9\u306f2.7.1\u306a\u306e\u3067\u3001\u5358\u306b\u30d3\u30eb\u30c9\u3059\u308b\u3060\u3051\u3067Hadoop 2.7.1\u306eRPM\u304c\u5b8c\u6210\u3059\u308b\u306e\u3067\u3059\u304c\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5909\u66f4\u3057\u305f\u3044\u5834\u5408\u306fbase\u30922.7.1\u304b\u3089\u5909\u66f4\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001Hadoop 2.6.3\u306eRPM\u3092\u4f5c\u6210\u3057\u305f\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\n\nbigtop.bom\n    'hadoop' {\n      name    = 'hadoop'\n      relNotes = 'Apache Hadoop'\n      version { base = '2.6.3'; pkg = base; release = 1 }\n      tarball { destination = \"${name}-${version.base}.tar.gz\"\n                source      = \"${name}-${version.base}-src.tar.gz\" }\n      url     { download_path = \"/$name/common/$name-${version.base}\"\n                site = \"${apache.APACHE_MIRROR}/${download_path}\"\n                archive = \"${apache.APACHE_ARCHIVE}/${download_path}\" }\n    }\n\n\n\u305f\u3060\u3057\u3001\u3053\u306e\u307e\u307egradle hadoop-rpm\u3092\u5b9f\u884c\u3057\u3066\u3082\u3001hadoop-2.6.3\u306f\u65e2\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6e08\u3060\u3068\u8a00\u308f\u308c\u3066\u3001\u30d3\u30eb\u30c9\u304c\u5b9f\u884c\u3055\u308c\u306a\u3044\u3002\u30d3\u30eb\u30c9\u3059\u308b\u305f\u3081\u306b\u306f\u3001dl/hadoop-2.7.1-src.tar.gz\u3092\u6d88\u3059\u5fc5\u8981\u304c\u3042\u308b\u3002\n\u6d88\u3057\u3066\u304b\u3089\u518d\u5b9f\u884c\u3059\u308b\u3068\u3001\u65e2\u306bBigtop\u3067Hadoop 2.7.1\u306e\u305f\u3081\u306b\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u30d1\u30c3\u30c1\u3092Hadoop 2.6.3\u306b\u9069\u7528\u3057\u3088\u3046\u3068\u3057\u3066\u5931\u6557\u3059\u308b\u3002\nPatch #0 (patch0.diff):\npatching file hadoop-common-project/hadoop-common/pom.xml\nHunk #1 FAILED at 238.\n1 out of 1 hunk FAILED -- saving rejects to file hadoop-common-project/hadoop-common/pom.xml.rej\n\n\u30d1\u30c3\u30c1\u3092\u6d88\u3057\u3066\u3001build\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u6d88\u53bb\u3059\u308c\u3070\u3088\u3044\u3002\n$ rm bigtop-packages/src/common/hadoop/patch0.diff\n$ rm -rf build\n$ gradle hadoop-rpm\n(snip)\nWrote: /home/azureuser/git/bigtop/build/hadoop/rpm/RPMS/x86_64/hadoop-hdfs-fuse-2.6.3-1.el6.x86_64.rpm\nWrote: /home/azureuser/git/bigtop/build/hadoop/rpm/RPMS/x86_64/hadoop-debuginfo-2.6.3-1.el6.x86_64.rpm\nExecuting(%clean): /bin/sh -e /var/tmp/rpm-tmp.C4ymKd\n+ umask 022\n+ cd /home/azureuser/git/bigtop/build/hadoop/rpm//BUILD\n+ cd hadoop-2.6.3-src\n+ /bin/rm -rf /home/azureuser/git/bigtop/build/hadoop/rpm/BUILDROOT/hadoop-2.6.3-1.el6.x86_64\n+ exit 0\nExecuting(--clean): /bin/sh -e /var/tmp/rpm-tmp.C0a7C8\n+ umask 022\n+ cd /home/azureuser/git/bigtop/build/hadoop/rpm//BUILD\n+ rm -rf hadoop-2.6.3-src\n+ exit 0\n\nBUILD SUCCESSFUL\n\nTotal time: 25 mins 41.469 secs\n\n\n\u81ea\u5206\u3067\u30d1\u30c3\u30c1\u3092\u5f53\u3066\u305fHadoop\u306eRPM\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\nHadoop 2.6.3\u306b\u3044\u304f\u3064\u304b\u30d1\u30c3\u30c1\u3092\u5f53\u3066\u305fHadoop\u306eRPM\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\n\u30d1\u30c3\u30c1\u9069\u7528\u306e\u305f\u3081\u306b\u65b0\u898f\u30d6\u30e9\u30f3\u30c1\u3092\u4f5c\u6210\n$ git clone https://github.com/apache/hadoop.git\n$ cd hadoop\n$ git checkout release-2.6.3\nHEAD is now at cc865b4... Set release date for 2.6.3\n$ git checkout -b myrelease-2.6.3\n\n\n\u30d1\u30c3\u30c1\u3092\u9069\u7528\u3059\u308b\n\u4ee5\u4e0b\u306e\u30d1\u30c3\u30c1\u3092\u9069\u7528\u3057\u3066\u307f\u308b\u3002\n\n\nHADOOP-8989: hadoop fs -find feature \n\nHADOOP-7984: Add hadoop --loglevel option to change log level\n\n$ wget https://issues.apache.org/jira/secure/attachment/12667105/HADOOP-8989.patch\n$ git apply -p0 HADOOP-8989.patch --whitespace=fix\n../patch/HADOOP-8989.patch:966: trailing whitespace.\n   * \n../patch/HADOOP-8989.patch:1132: trailing whitespace.\n   * \n../patch/HADOOP-8989.patch:1142: trailing whitespace.\n   * \n../patch/HADOOP-8989.patch:1183: trailing whitespace.\n   * \n../patch/HADOOP-8989.patch:2549: trailing whitespace.\n\nwarning: squelched 7 whitespace errors\nwarning: 12 lines applied after fixing whitespace errors.\n\n# \u826f\u3044\u611f\u3058\u306b\u30b3\u30df\u30c3\u30c8\u3059\u308b\n$ git add -A\n$ git commit -a\n$ git log | head -5\ncommit 345e583734f3bce0b1d8d8a64060c8a6a139e37e\nAuthor: Akira Ajisaka <aajisaka@apache.org>\nDate:   Tue Dec 22 15:47:49 2015 +0900\n\n    HADOOP-8989 hadoop fs -find feature.\n\n$ wget https://issues.apache.org/jira/secure/attachment/12681196/HADOOP-7984-branch-2.3.patch\n$ git apply -p0 HADOOP-7984-branch-2.3.patch\n$ git commit -a\n$ git log | head -5\ncommit f965e1501720b3b218bd448b0da0d908f46d4572\nAuthor: Akira Ajisaka <aajisaka@apache.org>\nDate:   Tue Dec 22 16:20:21 2015 +0900\n\n    HADOOP-7984. Add hadoop --loglevel option to change log level.\n\n\u3061\u306a\u307f\u306b\u3001\u30d1\u30c3\u30c1\u306b\u3088\u3063\u3066git apply\u3059\u308b\u3068\u304d\u306b-p0\u3084--whitespace=fix\u3084--binary\u304c\u5fc5\u8981\u304b\u3069\u3046\u304b\u304c\u7570\u306a\u308b\u3002(\u3042\u307e\u308a\u7d71\u4e00\u611f\u304c\u306a\u3044)\n\nBigtop\u7528\u306e\u30d1\u30c3\u30c1\u3092\u4f5c\u308b\ngit format-patch\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u3068\u30d1\u30c3\u30c1\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n$ git format-patch -p release-2.6.3\n0001-HADOOP-8989-hadoop-fs-find-feature.patch\n0002-HADOOP-7984.-Add-hadoop-loglevel-option-to-change-lo.patch\n\n\u305f\u3060\u3057\u3001Bigtop\u3067\u30d1\u30c3\u30c1\u3092\u9069\u7528\u3059\u308b\u306b\u306f\u3001\u3053\u308c\u3089\u3092patch*.diff\u306brename\u3057\u3066patch -p1\u30b3\u30de\u30f3\u30c9\u3067\u5f53\u3066\u3089\u308c\u308b\u3088\u3046\u306b\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\u3060\u304c\u3057\u304b\u3057\u3001HADOOP-7984\u306e\u30d1\u30c3\u30c1\u304cpatch\u30b3\u30de\u30f3\u30c9\u3067\u5f53\u3066\u3089\u308c\u306a\u3044(CR/LF\u554f\u984c)\u3002\u3053\u306e\u554f\u984c\u304c\u767a\u751f\u3059\u308b\u305f\u3073\u306b\u624b\u3067\u30d1\u30c3\u30c1\u306e\u4e2d\u8eab\u3092\u3044\u3058\u308b\u306e\u306f\u3001\u3068\u3066\u3082\u3064\u3089\u3044\u3002\n\n\u30d1\u30c3\u30c1\u3092\u8ae6\u3081\u305f\u3044\n\u305d\u3082\u305d\u3082\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u30d1\u30c3\u30c1\u9069\u7528\u6e08\u306e\u3082\u306e\u306b\u5dee\u3057\u66ff\u3048\u308c\u3070\u3088\u3044\u306e\u3067\u306f\u306a\u3044\u304b!\n\nsource tarball\u306e\u4f5c\u6210\n\n$ mvn package -Psrc -Dtar -DskipTests\n(snip)\n$ ls -l hadoop-dist/target/hadoop-2.6.3-src.tar.gz \n-rw-r--r--  1 aajisaka  staff  45689815 Dec 22 18:19 hadoop-dist/target/hadoop-2.6.3-src.tar.gz\n\n\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u5dee\u3057\u66ff\u3048\u3066RPM\u3092\u4f5c\u6210\u3067\u304d\u307e\u3057\u305f\u3002\n\n\ndl/hadoop-2.6.3.tar.gz\u3092\u5dee\u3057\u66ff\u3048\n\nbuild/\u3092\u524a\u9664\ngradle hadoop-rpm\n\n\nRPM\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5909\u3048\u305f\u3044\n\u5148\u307b\u3069\u306e\u65b9\u6cd5\u3067\u81ea\u4f5cRPM\u306f\u5b8c\u6210\u3059\u308b\u306e\u3067\u3059\u304c\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u540c\u4e00\u3060\u3068update\u304c\u3067\u304d\u307e\u305b\u3093\u3002\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4e0a\u3052\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u307e\u305a\u306f\u3001spec\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\nbigtop-packages/src/rpm/hadoop/SPECS/hadoop.spec\n(snip)\nName: %{hadoop_name}\nVersion: %{hadoop_version}\nRelease: %{hadoop_release}\nSummary: Hadoop is a software platform for processing vast amounts of data\nLicense: ASL 2.0\n(snip)\n\n\n\u4ee5\u4e0b\u3001Version\u3068Release\u306b\u5206\u3051\u3066\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\nVersion\u3092\u4e0a\u3052\u308b\n\u3053\u308c\u306f\u3001Hadoop\u5074\u3067\u3082\u5bfe\u5fdc\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002pom.xml\u3092\u7de8\u96c6\u3057\u3066\u3001\u518d\u30d3\u30eb\u30c9\u3057\u307e\u3057\u3087\u3046\u3002\n$ git diff\ndiff --git a/pom.xml b/pom.xml\nindex a5b3ce0..686e384 100644\n--- a/pom.xml\n+++ b/pom.xml\n@@ -18,7 +18,7 @@ xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xs\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.apache.hadoop</groupId>\n   <artifactId>hadoop-main</artifactId>\n-  <version>2.6.3</version>\n+  <version>2.6.3+2.ajisaka0.1.0</version>\n   <description>Apache Hadoop Main</description>\n   <name>Apache Hadoop Main</name>\n   <packaging>pom</packaging>\n\nmvn package -Psrc -Dtar -DskipTests\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u3044\u3064\u3082\u3068\u9055\u3046\u540d\u524d\u306etarball\u304c\u51fa\u6765\u4e0a\u304c\u308a\u307e\u3057\u305f\u3002\n$ ls hadoop-dist/target/\nantrun                  maven-archiver\nhadoop-2.6.3+2.ajisaka0.1.0-src.tar.gz  test-dir\nhadoop-dist-2.6.3.jar\n\n\u3053\u306etarball\u3092\u4f7f\u3063\u3066Bigtop\u3067\u30d3\u30eb\u30c9\u3057\u3066\u307f\u307e\u3059\u3002\n\n\ndl/\u306btarball\u3092\u914d\u7f6e\u3059\u308b\n\nbigtop.bom\u3092\u4fee\u6b63\u3059\u308b\n\n\nbigtop.bom\n     'hadoop' {\n       name    = 'hadoop'\n       relNotes = 'Apache Hadoop'\nrelease = 1 }\n       version { base = '2.6.3+2.ajisaka0.1.0'; pkg = base; release = 1 }\n       tarball { destination = \"${name}-${version.base}.tar.gz\"\n                 source      = \"${name}-${version.base}-src.tar.gz\" }\n       url     { download_path = \"/$name/common/$name-${version.base}\"\n\n\n\u3053\u308c\u3067\u3001gradle hadoop-rpm\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u306a\u3093\u3068\u5931\u6557\u3057\u307e\u3057\u305f\u3002\n:hadoop-download\n    File /home/azureuser/git/bigtop/dl/hadoop-2.6.3+2.ajisaka0.1.0-src.tar.gz appears to be already downloaded. Exiting...\n:hadoop-tar\nCopy /home/azureuser/git/bigtop/dl/hadoop-2.6.3+2.ajisaka0.1.0-src.tar.gz to /home/azureuser/git/bigtop/build/hadoop/tar/hadoop-2.6.3+2.ajisaka0.1.0.tar.gz\n:hadoop-srpm\nerror: File /home/azureuser/git/bigtop/build/hadoop/rpm/SOURCES/hadoop-2.6.3+2.ajisaka0.1.0.tar.gz: No such file or directory\n:hadoop-srpm FAILED\n\nFAILURE: Build failed with an exception.\n\n* Where:\nScript '/home/azureuser/git/bigtop/packages.gradle' line: 511\n\n* What went wrong:\nExecution failed for task ':hadoop-srpm'.\n> Process 'command 'rpmbuild'' finished with non-zero exit value 1\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n\nTotal time: 9.564 secs\n\n\u30ed\u30b0\u3092\u898b\u3066\u3082\u3055\u3063\u3071\u308a\u308f\u304b\u3089\u306a\u3044...\n\u3068\u308a\u3042\u3048\u305aVersion\u304b\u3089+2\u3092\u5916\u3057\u3066\u307f\u308b\u3068\u3001\u304b\u306a\u308a\u9032\u307f\u307e\u3057\u305f\u3002+\u304c\u30a8\u30b9\u30b1\u30fc\u30d7\u3067\u304d\u3066\u306a\u3044\u306e\u306fBigtop\u306e\u30d0\u30b0\u3063\u307d\u3044\u3002CDH\u3063\u307d\u304f\u9069\u7528\u3057\u305f\u30d1\u30c3\u30c1\u6570\u3092+2\u3068\u3057\u3066\u8868\u3057\u3066\u307f\u305f\u304b\u3063\u305f\u3051\u3069\u3001\u4f55\u304b\u76f4\u3059\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u3002\n\u305d\u3057\u3066\u3001\u30a8\u30e9\u30fc\u30ed\u30b0\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-site-plugin:3.3:site (default-site) on project hadoop-main: Error during page generation: Error rendering Maven report: Unable to find artifact:groupId = 'org.apache.hadoop'\n[ERROR] artifactId = 'hadoop-annotations'\n[ERROR] version = '2.6.3.ajisaka0.1.0': Failure to find org.apache.hadoop:hadoop-annotations:pom:2.6.3.ajisaka0.1.0 in https://repository.apache.org/content/repositories/snapshots was cached in the local repository, resolution will not be reattempted until the update interval of apache.snapshots.https has elapsed or updates are forced\n[ERROR] \n[ERROR] org.apache.hadoop:hadoop-annotations:pom:2.6.3.ajisaka0.1.0\n\npom\u3092\u7528\u610f\u3057\u3066\u3001\u5c02\u7528\u306erepository\u306b\u7f6e\u304f\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u3002CDH\u3067\u3044\u3046\u3068\u3053\u308d\u306erepository.cloudera.com\u306e\u3088\u3046\u306a\u3068\u3053\u308d\u3002\n\u4eca\u5f8c\u306e\u8ab2\u984c\u3067\u3059\u3002\n\nRelease\u3092\u4e0a\u3052\u308b\nRelease\u3092\u4e0a\u3052\u308b\u306b\u306f\u3001%{hadoop_release}\u3092\u3044\u3058\u308c\u3070\u3088\u3055\u305d\u3046\u3067\u3059\u3002\u304a\u305d\u3089\u304f\u3001rpmbuild\u30b3\u30de\u30f3\u30c9\u3092\u53e9\u304f\u3068\u304d\u306b\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\u96d1\u306b\u63a2\u3057\u307e\u3059\u3002\n$ find . -type f | xargs grep rpmbuild\n./bigtop-packages/src/common/hue/install_hue.sh:# remove RECORD files since it contains \"real\" paths confusing rpmbuild\n./src/site/xdoc/release-notes.xml:                  ] - Add normal rpmbuild options for make rpm\n./build/hadoop/rpm/BUILD/hadoop-2.6.3-src/hadoop-common-project/hadoop-common/CHANGES.txt:    HADOOP-9611 mvn-rpmbuild against google-guice > 3.0 yields missing cglib\ngrep: ./build/hadoop/rpm/BUILD/hadoop-2.6.3-src/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/resources/webapps/static/dt-1.9.4/images/Sorting: No such file or directory\ngrep: icons.psd: No such file or directory\n./packages.gradle:    def RELEASE_DIST = \"rpmbuild --eval '%{?dist}' 2>/dev/null\".execute().text.trim().replaceAll(\"'\",'')\n./packages.gradle:      executable 'rpmbuild'\n./packages.gradle:      executable 'rpmbuild'\n./packages.gradle:    def RELEASE_DIST = \"rpmbuild --eval '%{?dist}' 2>/dev/null\".execute().text.trim().replaceAll(\"'\",'')\n./CHANGES.txt:  - [BIGTOP-60] - Add normal rpmbuild options for make rpm\n\npackages.gradle\u3092\u8aad\u3081\u3070\u826f\u3055\u305d\u3046\u3067\u3059\u3002\n\npackages.gradle\n411     def command = [\n412         '--define', \"_topdir $PKG_BUILD_DIR/rpm/\",\n413         '--define', \"${NAME}_base_version $BASE_VERSION\",\n414         '--define', \"${NAME}_version ${PKG_VERSION}\",\n415         '--define', \"${NAME}_release ${BIGTOP_BUILD_STAMP}%{?dist}\",\n416         '--rebuild', SRCRPM,\n417     ]\n418     exec {\n419       workingDir BASE_DIR\n420       executable 'rpmbuild'\n421       args command\n422     }\n\n\n${BIGTOP_BUILD_STAMP}\u3092\u4fee\u6b63\u3059\u308c\u3070\u3088\u3055\u305d\u3046\u3067\u3059\u3002\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u90e8\u5206\u3092\u63a2\u3057\u307e\u3059\u3002\n\npackages.gradle\n 48 config.bigtop.buildstamp = 1\n 49 \n 50 def bomVersions = []\n 51 \n 52 def final BASE_DIR = projectDir.absolutePath\n 53 def final REPO_DIR = \"$BASE_DIR/bigtop-repos\"\n 54 def final BUILD_DIR = config.bigtop.builddir\n 55 def final OUTPUT_DIR = config.bigtop.outputdir\n 56 def final DIST_DIR = config.bigtop.distdir\n 57 def final DL_DIR = config.bigtop.dldir\n 58 def final BIGTOP_BUILD_STAMP = System.getenv('BIGTOP_BUILD_STAMP') ?: config.bigtop.buildstamp\n\n\nconfig.bigtop.buildstamp\u3092\u5dee\u3057\u66ff\u3048\u308c\u3070OK\u3067\u3059\u3002\u8a66\u3057\u306b\u30012\u306b\u8a2d\u5b9a\u3057\u3066\u30d3\u30eb\u30c9\u3057\u76f4\u3057\u3066\u307f\u307e\u3059\u3002\u3059\u308b\u3068\u3001\u898b\u4e8b\u306bRelease\u304c\u4e0a\u304c\u308a\u307e\u3057\u305f\u3002\n$ ls build/hadoop/rpm/RPMS/x86_64/\nhadoop-2.6.3-2.el6.x86_64.rpm                         hadoop-hdfs-zkfc-2.6.3-2.el6.x86_64.rpm\nhadoop-client-2.6.3-2.el6.x86_64.rpm                  hadoop-httpfs-2.6.3-2.el6.x86_64.rpm\nhadoop-conf-pseudo-2.6.3-2.el6.x86_64.rpm             hadoop-libhdfs-2.6.3-2.el6.x86_64.rpm\nhadoop-debuginfo-2.6.3-2.el6.x86_64.rpm               hadoop-libhdfs-devel-2.6.3-2.el6.x86_64.rpm\nhadoop-doc-2.6.3-2.el6.x86_64.rpm                     hadoop-mapreduce-2.6.3-2.el6.x86_64.rpm\nhadoop-hdfs-2.6.3-2.el6.x86_64.rpm                    hadoop-mapreduce-historyserver-2.6.3-2.el6.x86_64.rpm\nhadoop-hdfs-datanode-2.6.3-2.el6.x86_64.rpm           hadoop-yarn-2.6.3-2.el6.x86_64.rpm\nhadoop-hdfs-fuse-2.6.3-2.el6.x86_64.rpm               hadoop-yarn-nodemanager-2.6.3-2.el6.x86_64.rpm\nhadoop-hdfs-journalnode-2.6.3-2.el6.x86_64.rpm        hadoop-yarn-proxyserver-2.6.3-2.el6.x86_64.rpm\nhadoop-hdfs-namenode-2.6.3-2.el6.x86_64.rpm           hadoop-yarn-resourcemanager-2.6.3-2.el6.x86_64.rpm\nhadoop-hdfs-secondarynamenode-2.6.3-2.el6.x86_64.rpm  hadoop-yarn-timelineserver-2.6.3-2.el6.x86_64.rpm\n\n\n\u611f\u60f3\n\nBigtop\u306e\u4ed5\u7d44\u307f\u3067\u30d1\u30c3\u30c1\u3092\u5f53\u3066\u308b\u306e\u306f\u5927\u5909\u3002\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u81ea\u4f53\u3092\u5dee\u3057\u66ff\u3048\u3066\u3057\u307e\u3063\u305f\u307b\u3046\u304c\u697d\u3002\n\u305f\u3060\u3057\u3001\u5dee\u3057\u66ff\u3048\u308b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u81ea\u4f53\u306fgit\u3067\u7ba1\u7406\u3057\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5909\u3048\u308b\u305f\u3073\u306btag\u3092\u6253\u3064\u3079\u304d\u3002\nVersion\u3092\u3044\u3058\u308b\u306e\u306f\u3001\u975e\u5e38\u306b\u624b\u9593\u304c\u304b\u304b\u308b\n\n\n[Bigtop\u3068\u622f\u308c\u308b \u305d\u306e1](http://qiita.com/ajis_ka/items/2510a530aacf0ec80108)\u306e\u7d9a\u304d\u3067\u3059\u3002\u3072\u305f\u3059\u3089\u622f\u308c\u307e\u3057\u305f\u304c\u3001\u8ab2\u984c\u304c\u6b8b\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u7d9a\u304d\u3092\u66f8\u304f\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n## \u76ee\u6a19\n\n* \u6700\u65b0\u7248\u306eHadoop\u306eRPM\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\u3053\u3068\n* \u81ea\u5206\u3067\u30d1\u30c3\u30c1\u3092\u5f53\u3066\u305fHadoop\u306eRPM\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\u3053\u3068\n\n\u4e21\u65b9\u3068\u3082\u3053\u306e\u8a18\u4e8b\u3067\u9054\u6210\u3057\u307e\u3059\u3002\n\n## \u6700\u65b0\u7248\u306eHadoop\u306eRPM\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\n\n2015/12/22\u6642\u70b9\u306emaster\u3060\u3068\u3001Bigtop\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bHadoop\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f2.7.1\u306b\u306a\u308b\u3002\n\n```bigtop.bom\n    'hadoop' {\n      name    = 'hadoop'\n      relNotes = 'Apache Hadoop'\n      version { base = '2.7.1'; pkg = base; release = 1 }\n      tarball { destination = \"${name}-${version.base}.tar.gz\"\n                source      = \"${name}-${version.base}-src.tar.gz\" }\n      url     { download_path = \"/$name/common/$name-${version.base}\"\n                site = \"${apache.APACHE_MIRROR}/${download_path}\"\n                archive = \"${apache.APACHE_ARCHIVE}/${download_path}\" }\n    }\n```\n\n\u73fe\u72b6\u3001Apache Hadoop\u306e\u6700\u65b0\u30ea\u30ea\u30fc\u30b9\u306f2.7.1\u306a\u306e\u3067\u3001\u5358\u306b\u30d3\u30eb\u30c9\u3059\u308b\u3060\u3051\u3067Hadoop 2.7.1\u306eRPM\u304c\u5b8c\u6210\u3059\u308b\u306e\u3067\u3059\u304c\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5909\u66f4\u3057\u305f\u3044\u5834\u5408\u306f`base`\u30922.7.1\u304b\u3089\u5909\u66f4\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001Hadoop 2.6.3\u306eRPM\u3092\u4f5c\u6210\u3057\u305f\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\n\n```bigtop.bom\n    'hadoop' {\n      name    = 'hadoop'\n      relNotes = 'Apache Hadoop'\n      version { base = '2.6.3'; pkg = base; release = 1 }\n      tarball { destination = \"${name}-${version.base}.tar.gz\"\n                source      = \"${name}-${version.base}-src.tar.gz\" }\n      url     { download_path = \"/$name/common/$name-${version.base}\"\n                site = \"${apache.APACHE_MIRROR}/${download_path}\"\n                archive = \"${apache.APACHE_ARCHIVE}/${download_path}\" }\n    }\n```\n\n\u305f\u3060\u3057\u3001\u3053\u306e\u307e\u307e`gradle hadoop-rpm`\u3092\u5b9f\u884c\u3057\u3066\u3082\u3001hadoop-2.6.3\u306f\u65e2\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6e08\u3060\u3068\u8a00\u308f\u308c\u3066\u3001\u30d3\u30eb\u30c9\u304c\u5b9f\u884c\u3055\u308c\u306a\u3044\u3002\u30d3\u30eb\u30c9\u3059\u308b\u305f\u3081\u306b\u306f\u3001`dl/hadoop-2.7.1-src.tar.gz`\u3092\u6d88\u3059\u5fc5\u8981\u304c\u3042\u308b\u3002\n\u6d88\u3057\u3066\u304b\u3089\u518d\u5b9f\u884c\u3059\u308b\u3068\u3001\u65e2\u306bBigtop\u3067Hadoop 2.7.1\u306e\u305f\u3081\u306b\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u30d1\u30c3\u30c1\u3092Hadoop 2.6.3\u306b\u9069\u7528\u3057\u3088\u3046\u3068\u3057\u3066\u5931\u6557\u3059\u308b\u3002\n\n```\u30a8\u30e9\u30fc\u30ed\u30b0\nPatch #0 (patch0.diff):\npatching file hadoop-common-project/hadoop-common/pom.xml\nHunk #1 FAILED at 238.\n1 out of 1 hunk FAILED -- saving rejects to file hadoop-common-project/hadoop-common/pom.xml.rej\n```\n\n\u30d1\u30c3\u30c1\u3092\u6d88\u3057\u3066\u3001`build`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u6d88\u53bb\u3059\u308c\u3070\u3088\u3044\u3002\n\n```\n$ rm bigtop-packages/src/common/hadoop/patch0.diff\n$ rm -rf build\n$ gradle hadoop-rpm\n(snip)\nWrote: /home/azureuser/git/bigtop/build/hadoop/rpm/RPMS/x86_64/hadoop-hdfs-fuse-2.6.3-1.el6.x86_64.rpm\nWrote: /home/azureuser/git/bigtop/build/hadoop/rpm/RPMS/x86_64/hadoop-debuginfo-2.6.3-1.el6.x86_64.rpm\nExecuting(%clean): /bin/sh -e /var/tmp/rpm-tmp.C4ymKd\n+ umask 022\n+ cd /home/azureuser/git/bigtop/build/hadoop/rpm//BUILD\n+ cd hadoop-2.6.3-src\n+ /bin/rm -rf /home/azureuser/git/bigtop/build/hadoop/rpm/BUILDROOT/hadoop-2.6.3-1.el6.x86_64\n+ exit 0\nExecuting(--clean): /bin/sh -e /var/tmp/rpm-tmp.C0a7C8\n+ umask 022\n+ cd /home/azureuser/git/bigtop/build/hadoop/rpm//BUILD\n+ rm -rf hadoop-2.6.3-src\n+ exit 0\n\nBUILD SUCCESSFUL\n\nTotal time: 25 mins 41.469 secs\n```\n\n## \u81ea\u5206\u3067\u30d1\u30c3\u30c1\u3092\u5f53\u3066\u305fHadoop\u306eRPM\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\n\nHadoop 2.6.3\u306b\u3044\u304f\u3064\u304b\u30d1\u30c3\u30c1\u3092\u5f53\u3066\u305fHadoop\u306eRPM\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\n### \u30d1\u30c3\u30c1\u9069\u7528\u306e\u305f\u3081\u306b\u65b0\u898f\u30d6\u30e9\u30f3\u30c1\u3092\u4f5c\u6210\n\n```\n$ git clone https://github.com/apache/hadoop.git\n$ cd hadoop\n$ git checkout release-2.6.3\nHEAD is now at cc865b4... Set release date for 2.6.3\n$ git checkout -b myrelease-2.6.3\n```\n\n### \u30d1\u30c3\u30c1\u3092\u9069\u7528\u3059\u308b\n\n\u4ee5\u4e0b\u306e\u30d1\u30c3\u30c1\u3092\u9069\u7528\u3057\u3066\u307f\u308b\u3002\n\n  * [HADOOP-8989](https://issues.apache.org/jira/browse/HADOOP-8989): hadoop fs -find feature \n  * [HADOOP-7984](https://issues.apache.org/jira/browse/HADOOP-7984): Add hadoop --loglevel option to change log level\n\n```\n$ wget https://issues.apache.org/jira/secure/attachment/12667105/HADOOP-8989.patch\n$ git apply -p0 HADOOP-8989.patch --whitespace=fix\n../patch/HADOOP-8989.patch:966: trailing whitespace.\n   * \n../patch/HADOOP-8989.patch:1132: trailing whitespace.\n   * \n../patch/HADOOP-8989.patch:1142: trailing whitespace.\n   * \n../patch/HADOOP-8989.patch:1183: trailing whitespace.\n   * \n../patch/HADOOP-8989.patch:2549: trailing whitespace.\n  \nwarning: squelched 7 whitespace errors\nwarning: 12 lines applied after fixing whitespace errors.\n\n# \u826f\u3044\u611f\u3058\u306b\u30b3\u30df\u30c3\u30c8\u3059\u308b\n$ git add -A\n$ git commit -a\n$ git log | head -5\ncommit 345e583734f3bce0b1d8d8a64060c8a6a139e37e\nAuthor: Akira Ajisaka <aajisaka@apache.org>\nDate:   Tue Dec 22 15:47:49 2015 +0900\n\n    HADOOP-8989 hadoop fs -find feature.\n\n$ wget https://issues.apache.org/jira/secure/attachment/12681196/HADOOP-7984-branch-2.3.patch\n$ git apply -p0 HADOOP-7984-branch-2.3.patch\n$ git commit -a\n$ git log | head -5\ncommit f965e1501720b3b218bd448b0da0d908f46d4572\nAuthor: Akira Ajisaka <aajisaka@apache.org>\nDate:   Tue Dec 22 16:20:21 2015 +0900\n\n    HADOOP-7984. Add hadoop --loglevel option to change log level.\n```\n\n\u3061\u306a\u307f\u306b\u3001\u30d1\u30c3\u30c1\u306b\u3088\u3063\u3066`git apply`\u3059\u308b\u3068\u304d\u306b`-p0`\u3084`--whitespace=fix`\u3084`--binary`\u304c\u5fc5\u8981\u304b\u3069\u3046\u304b\u304c\u7570\u306a\u308b\u3002(\u3042\u307e\u308a\u7d71\u4e00\u611f\u304c\u306a\u3044)\n\n### Bigtop\u7528\u306e\u30d1\u30c3\u30c1\u3092\u4f5c\u308b\n\n`git format-patch`\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u3068\u30d1\u30c3\u30c1\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n\n```\n$ git format-patch -p release-2.6.3\n0001-HADOOP-8989-hadoop-fs-find-feature.patch\n0002-HADOOP-7984.-Add-hadoop-loglevel-option-to-change-lo.patch\n```\n\n\u305f\u3060\u3057\u3001Bigtop\u3067\u30d1\u30c3\u30c1\u3092\u9069\u7528\u3059\u308b\u306b\u306f\u3001\u3053\u308c\u3089\u3092`patch*.diff`\u306brename\u3057\u3066`patch -p1`\u30b3\u30de\u30f3\u30c9\u3067\u5f53\u3066\u3089\u308c\u308b\u3088\u3046\u306b\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\u3060\u304c\u3057\u304b\u3057\u3001HADOOP-7984\u306e\u30d1\u30c3\u30c1\u304cpatch\u30b3\u30de\u30f3\u30c9\u3067\u5f53\u3066\u3089\u308c\u306a\u3044(CR/LF\u554f\u984c)\u3002\u3053\u306e\u554f\u984c\u304c\u767a\u751f\u3059\u308b\u305f\u3073\u306b\u624b\u3067\u30d1\u30c3\u30c1\u306e\u4e2d\u8eab\u3092\u3044\u3058\u308b\u306e\u306f\u3001\u3068\u3066\u3082\u3064\u3089\u3044\u3002\n\n### \u30d1\u30c3\u30c1\u3092\u8ae6\u3081\u305f\u3044\n\n\u305d\u3082\u305d\u3082\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u30d1\u30c3\u30c1\u9069\u7528\u6e08\u306e\u3082\u306e\u306b\u5dee\u3057\u66ff\u3048\u308c\u3070\u3088\u3044\u306e\u3067\u306f\u306a\u3044\u304b!\n\n* source tarball\u306e\u4f5c\u6210\n\n```\n$ mvn package -Psrc -Dtar -DskipTests\n(snip)\n$ ls -l hadoop-dist/target/hadoop-2.6.3-src.tar.gz \n-rw-r--r--  1 aajisaka  staff  45689815 Dec 22 18:19 hadoop-dist/target/hadoop-2.6.3-src.tar.gz\n```\n\n\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u5dee\u3057\u66ff\u3048\u3066RPM\u3092\u4f5c\u6210\u3067\u304d\u307e\u3057\u305f\u3002\n\n1. `dl/hadoop-2.6.3.tar.gz`\u3092\u5dee\u3057\u66ff\u3048\n1. `build/`\u3092\u524a\u9664\n1. `gradle hadoop-rpm`\n\n## RPM\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5909\u3048\u305f\u3044\n\n\u5148\u307b\u3069\u306e\u65b9\u6cd5\u3067\u81ea\u4f5cRPM\u306f\u5b8c\u6210\u3059\u308b\u306e\u3067\u3059\u304c\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u540c\u4e00\u3060\u3068update\u304c\u3067\u304d\u307e\u305b\u3093\u3002\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4e0a\u3052\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u307e\u305a\u306f\u3001spec\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bigtop-packages/src/rpm/hadoop/SPECS/hadoop.spec\n(snip)\nName: %{hadoop_name}\nVersion: %{hadoop_version}\nRelease: %{hadoop_release}\nSummary: Hadoop is a software platform for processing vast amounts of data\nLicense: ASL 2.0\n(snip)\n```\n\n\u4ee5\u4e0b\u3001Version\u3068Release\u306b\u5206\u3051\u3066\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n### Version\u3092\u4e0a\u3052\u308b\n\n\u3053\u308c\u306f\u3001Hadoop\u5074\u3067\u3082\u5bfe\u5fdc\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002`pom.xml`\u3092\u7de8\u96c6\u3057\u3066\u3001\u518d\u30d3\u30eb\u30c9\u3057\u307e\u3057\u3087\u3046\u3002\n\n```diff:\n$ git diff\ndiff --git a/pom.xml b/pom.xml\nindex a5b3ce0..686e384 100644\n--- a/pom.xml\n+++ b/pom.xml\n@@ -18,7 +18,7 @@ xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xs\n   <modelVersion>4.0.0</modelVersion>\n   <groupId>org.apache.hadoop</groupId>\n   <artifactId>hadoop-main</artifactId>\n-  <version>2.6.3</version>\n+  <version>2.6.3+2.ajisaka0.1.0</version>\n   <description>Apache Hadoop Main</description>\n   <name>Apache Hadoop Main</name>\n   <packaging>pom</packaging>\n```\n\n`mvn package -Psrc -Dtar -DskipTests`\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u3044\u3064\u3082\u3068\u9055\u3046\u540d\u524d\u306etarball\u304c\u51fa\u6765\u4e0a\u304c\u308a\u307e\u3057\u305f\u3002\n\n```\n$ ls hadoop-dist/target/\nantrun\t\t\t\t\tmaven-archiver\nhadoop-2.6.3+2.ajisaka0.1.0-src.tar.gz\ttest-dir\nhadoop-dist-2.6.3.jar\n```\n\n\u3053\u306etarball\u3092\u4f7f\u3063\u3066Bigtop\u3067\u30d3\u30eb\u30c9\u3057\u3066\u307f\u307e\u3059\u3002\n\n1. `dl/`\u306btarball\u3092\u914d\u7f6e\u3059\u308b\n2. `bigtop.bom`\u3092\u4fee\u6b63\u3059\u308b\n\n```bigtop.bom\n     'hadoop' {\n       name    = 'hadoop'\n       relNotes = 'Apache Hadoop'\nrelease = 1 }\n       version { base = '2.6.3+2.ajisaka0.1.0'; pkg = base; release = 1 }\n       tarball { destination = \"${name}-${version.base}.tar.gz\"\n                 source      = \"${name}-${version.base}-src.tar.gz\" }\n       url     { download_path = \"/$name/common/$name-${version.base}\"\n```\n\n\u3053\u308c\u3067\u3001`gradle hadoop-rpm`\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u306a\u3093\u3068\u5931\u6557\u3057\u307e\u3057\u305f\u3002\n\n```\n:hadoop-download\n\tFile /home/azureuser/git/bigtop/dl/hadoop-2.6.3+2.ajisaka0.1.0-src.tar.gz appears to be already downloaded. Exiting...\n:hadoop-tar\nCopy /home/azureuser/git/bigtop/dl/hadoop-2.6.3+2.ajisaka0.1.0-src.tar.gz to /home/azureuser/git/bigtop/build/hadoop/tar/hadoop-2.6.3+2.ajisaka0.1.0.tar.gz\n:hadoop-srpm\nerror: File /home/azureuser/git/bigtop/build/hadoop/rpm/SOURCES/hadoop-2.6.3+2.ajisaka0.1.0.tar.gz: No such file or directory\n:hadoop-srpm FAILED\n\nFAILURE: Build failed with an exception.\n\n* Where:\nScript '/home/azureuser/git/bigtop/packages.gradle' line: 511\n\n* What went wrong:\nExecution failed for task ':hadoop-srpm'.\n> Process 'command 'rpmbuild'' finished with non-zero exit value 1\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n\nTotal time: 9.564 secs\n```\n\n\u30ed\u30b0\u3092\u898b\u3066\u3082\u3055\u3063\u3071\u308a\u308f\u304b\u3089\u306a\u3044...\n\n\u3068\u308a\u3042\u3048\u305aVersion\u304b\u3089`+2`\u3092\u5916\u3057\u3066\u307f\u308b\u3068\u3001\u304b\u306a\u308a\u9032\u307f\u307e\u3057\u305f\u3002`+`\u304c\u30a8\u30b9\u30b1\u30fc\u30d7\u3067\u304d\u3066\u306a\u3044\u306e\u306fBigtop\u306e\u30d0\u30b0\u3063\u307d\u3044\u3002CDH\u3063\u307d\u304f\u9069\u7528\u3057\u305f\u30d1\u30c3\u30c1\u6570\u3092`+2`\u3068\u3057\u3066\u8868\u3057\u3066\u307f\u305f\u304b\u3063\u305f\u3051\u3069\u3001\u4f55\u304b\u76f4\u3059\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u3002\n\n\u305d\u3057\u3066\u3001\u30a8\u30e9\u30fc\u30ed\u30b0\n\n```\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-site-plugin:3.3:site (default-site) on project hadoop-main: Error during page generation: Error rendering Maven report: Unable to find artifact:groupId = 'org.apache.hadoop'\n[ERROR] artifactId = 'hadoop-annotations'\n[ERROR] version = '2.6.3.ajisaka0.1.0': Failure to find org.apache.hadoop:hadoop-annotations:pom:2.6.3.ajisaka0.1.0 in https://repository.apache.org/content/repositories/snapshots was cached in the local repository, resolution will not be reattempted until the update interval of apache.snapshots.https has elapsed or updates are forced\n[ERROR] \n[ERROR] org.apache.hadoop:hadoop-annotations:pom:2.6.3.ajisaka0.1.0\n```\n\npom\u3092\u7528\u610f\u3057\u3066\u3001\u5c02\u7528\u306erepository\u306b\u7f6e\u304f\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u3002CDH\u3067\u3044\u3046\u3068\u3053\u308d\u306erepository.cloudera.com\u306e\u3088\u3046\u306a\u3068\u3053\u308d\u3002\n\n\u4eca\u5f8c\u306e\u8ab2\u984c\u3067\u3059\u3002\n\n### Release\u3092\u4e0a\u3052\u308b\n\nRelease\u3092\u4e0a\u3052\u308b\u306b\u306f\u3001`%{hadoop_release}`\u3092\u3044\u3058\u308c\u3070\u3088\u3055\u305d\u3046\u3067\u3059\u3002\u304a\u305d\u3089\u304f\u3001`rpmbuild`\u30b3\u30de\u30f3\u30c9\u3092\u53e9\u304f\u3068\u304d\u306b\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\u96d1\u306b\u63a2\u3057\u307e\u3059\u3002\n\n```\n$ find . -type f | xargs grep rpmbuild\n./bigtop-packages/src/common/hue/install_hue.sh:# remove RECORD files since it contains \"real\" paths confusing rpmbuild\n./src/site/xdoc/release-notes.xml:\t\t\t\t\t] - Add normal rpmbuild options for make rpm\n./build/hadoop/rpm/BUILD/hadoop-2.6.3-src/hadoop-common-project/hadoop-common/CHANGES.txt:    HADOOP-9611 mvn-rpmbuild against google-guice > 3.0 yields missing cglib\ngrep: ./build/hadoop/rpm/BUILD/hadoop-2.6.3-src/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/resources/webapps/static/dt-1.9.4/images/Sorting: No such file or directory\ngrep: icons.psd: No such file or directory\n./packages.gradle:    def RELEASE_DIST = \"rpmbuild --eval '%{?dist}' 2>/dev/null\".execute().text.trim().replaceAll(\"'\",'')\n./packages.gradle:      executable 'rpmbuild'\n./packages.gradle:      executable 'rpmbuild'\n./packages.gradle:    def RELEASE_DIST = \"rpmbuild --eval '%{?dist}' 2>/dev/null\".execute().text.trim().replaceAll(\"'\",'')\n./CHANGES.txt:  - [BIGTOP-60] - Add normal rpmbuild options for make rpm\n```\n\n`packages.gradle`\u3092\u8aad\u3081\u3070\u826f\u3055\u305d\u3046\u3067\u3059\u3002\n\n```packages.gradle\n411     def command = [\n412         '--define', \"_topdir $PKG_BUILD_DIR/rpm/\",\n413         '--define', \"${NAME}_base_version $BASE_VERSION\",\n414         '--define', \"${NAME}_version ${PKG_VERSION}\",\n415         '--define', \"${NAME}_release ${BIGTOP_BUILD_STAMP}%{?dist}\",\n416         '--rebuild', SRCRPM,\n417     ]\n418     exec {\n419       workingDir BASE_DIR\n420       executable 'rpmbuild'\n421       args command\n422     }\n```\n\n`${BIGTOP_BUILD_STAMP}`\u3092\u4fee\u6b63\u3059\u308c\u3070\u3088\u3055\u305d\u3046\u3067\u3059\u3002\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u90e8\u5206\u3092\u63a2\u3057\u307e\u3059\u3002\n\n```packages.gradle\n 48 config.bigtop.buildstamp = 1\n 49 \n 50 def bomVersions = []\n 51 \n 52 def final BASE_DIR = projectDir.absolutePath\n 53 def final REPO_DIR = \"$BASE_DIR/bigtop-repos\"\n 54 def final BUILD_DIR = config.bigtop.builddir\n 55 def final OUTPUT_DIR = config.bigtop.outputdir\n 56 def final DIST_DIR = config.bigtop.distdir\n 57 def final DL_DIR = config.bigtop.dldir\n 58 def final BIGTOP_BUILD_STAMP = System.getenv('BIGTOP_BUILD_STAMP') ?: config.bigtop.buildstamp\n```\n\n`config.bigtop.buildstamp`\u3092\u5dee\u3057\u66ff\u3048\u308c\u3070OK\u3067\u3059\u3002\u8a66\u3057\u306b\u30012\u306b\u8a2d\u5b9a\u3057\u3066\u30d3\u30eb\u30c9\u3057\u76f4\u3057\u3066\u307f\u307e\u3059\u3002\u3059\u308b\u3068\u3001\u898b\u4e8b\u306bRelease\u304c\u4e0a\u304c\u308a\u307e\u3057\u305f\u3002\n\n```\n$ ls build/hadoop/rpm/RPMS/x86_64/\nhadoop-2.6.3-2.el6.x86_64.rpm                         hadoop-hdfs-zkfc-2.6.3-2.el6.x86_64.rpm\nhadoop-client-2.6.3-2.el6.x86_64.rpm                  hadoop-httpfs-2.6.3-2.el6.x86_64.rpm\nhadoop-conf-pseudo-2.6.3-2.el6.x86_64.rpm             hadoop-libhdfs-2.6.3-2.el6.x86_64.rpm\nhadoop-debuginfo-2.6.3-2.el6.x86_64.rpm               hadoop-libhdfs-devel-2.6.3-2.el6.x86_64.rpm\nhadoop-doc-2.6.3-2.el6.x86_64.rpm                     hadoop-mapreduce-2.6.3-2.el6.x86_64.rpm\nhadoop-hdfs-2.6.3-2.el6.x86_64.rpm                    hadoop-mapreduce-historyserver-2.6.3-2.el6.x86_64.rpm\nhadoop-hdfs-datanode-2.6.3-2.el6.x86_64.rpm           hadoop-yarn-2.6.3-2.el6.x86_64.rpm\nhadoop-hdfs-fuse-2.6.3-2.el6.x86_64.rpm               hadoop-yarn-nodemanager-2.6.3-2.el6.x86_64.rpm\nhadoop-hdfs-journalnode-2.6.3-2.el6.x86_64.rpm        hadoop-yarn-proxyserver-2.6.3-2.el6.x86_64.rpm\nhadoop-hdfs-namenode-2.6.3-2.el6.x86_64.rpm           hadoop-yarn-resourcemanager-2.6.3-2.el6.x86_64.rpm\nhadoop-hdfs-secondarynamenode-2.6.3-2.el6.x86_64.rpm  hadoop-yarn-timelineserver-2.6.3-2.el6.x86_64.rpm\n```\n\n## \u611f\u60f3\n\n* Bigtop\u306e\u4ed5\u7d44\u307f\u3067\u30d1\u30c3\u30c1\u3092\u5f53\u3066\u308b\u306e\u306f\u5927\u5909\u3002\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u81ea\u4f53\u3092\u5dee\u3057\u66ff\u3048\u3066\u3057\u307e\u3063\u305f\u307b\u3046\u304c\u697d\u3002\n* \u305f\u3060\u3057\u3001\u5dee\u3057\u66ff\u3048\u308b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u81ea\u4f53\u306fgit\u3067\u7ba1\u7406\u3057\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5909\u3048\u308b\u305f\u3073\u306btag\u3092\u6253\u3064\u3079\u304d\u3002\n* Version\u3092\u3044\u3058\u308b\u306e\u306f\u3001\u975e\u5e38\u306b\u624b\u9593\u304c\u304b\u304b\u308b\n"}