{"context": "\n\n\u80cc\u666f\n\nRails\u306e\u30b8\u30e7\u30d6\u5b9f\u884c\u30b5\u30fc\u30d0\u3067\u3042\u308bSidekiq\u306b\u306f\u304b\u3063\u3053\u3044\u3044\u30b8\u30e7\u30d6\u7ba1\u7406\u306eWeb\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u304c\u3082\u308c\u306a\u304f\u3064\u3044\u3066\u304d\u307e\u3059\n\n\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306a\u611f\u3058\u3067routes.rb\u306b\u8ffd\u8a18\u3059\u308b\u3060\u3051\n\nmount Sidekiq::Web => '/sidekiq'\n\n\n\u74b0\u5883\n\nPuma\n\n\nCluster\u3067\u8907\u6570\u30d7\u30ed\u30bb\u30b9\u8d77\u52d5\n\u8907\u6570\u30b5\u30fc\u30d0\n\n\n\n\n\u554f\u984c\n\n\u3053\u306e\u753b\u9762\u3092\u4f7f\u3063\u3066\u30b8\u30e7\u30d6\u306e\u53c2\u7167\u3092\u3057\u3066\u3044\u308b\u306b\u306f\u554f\u984c\u306a\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001\n\u30b8\u30e7\u30d6\u306e\u524a\u9664\u3068\u304b\u30ea\u30c8\u30e9\u30a4\u306e\u3088\u3046\u306a\u66f4\u65b0\u3092\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u306a\u305c\u304b403 forbidden\u304c\u767a\u751f\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3057\u305f\n\n\n\u539f\u56e0\n\nSidekiq::Web\u3072\u3044\u3066\u306fSinatra\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u30de\u30eb\u30c1\u30d7\u30ed\u30bb\u30b9\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u3067\u304d\u306a\u3044\n\u7d50\u679c\u7684\u306bRack::Protection\u306eCSRF\u30c1\u30a7\u30c3\u30af\u306b\u3072\u3063\u304b\u304b\u3063\u3066\u3044\u305f\u306e\u304c\u539f\u56e0\u3067\u3059\n\n\n\nSidekiq::Web\u306fsinatra\u3067\u66f8\u304b\u308c\u305f\u7c21\u6613\u306aRack\u30a2\u30d7\u30ea\u3067\u3059\nSinatra\u306f\u4e00\u90e8\u72ec\u81ea\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u3092\u3057\u3066\u3044\u308b\u5834\u6240\u304c\u3042\u308a\u3001session_secret\u3092\u30d7\u30ed\u30bb\u30b9\u8d77\u52d5\u6642\u306b\u30e9\u30f3\u30c0\u30e0\u306b\u6307\u5b9a\u3057\u307e\u3059\n\u7d50\u679c\u7684\u306b\u30d7\u30ed\u30bb\u30b9\u3054\u3068\u306b\u7570\u306a\u308bsession_secret\u304c\u6307\u5b9a\u3055\u308c\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u5024\u306e\u5fa9\u53f7\u5316\u306b\u5931\u6557\u3057\u3066\u3044\u307e\u3057\u305f\n\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u3067\u304d\u306a\u3044\u3068\u3001Rack::Protection\u306b\u8106\u5f31\u6027\u3068\u3057\u3066\u691c\u51fa\u3055\u308c\u3066\u843d\u3061\u3066\u3044\u307e\u3057\u305f\n\n\n\n\n\u5bfe\u5fdc\n\n\u4e0b\u8a18\u306e\u5bfe\u5fdc\u3092routes.rb\u306b\u5165\u308c\u3066sinatra\u306esession_secret\u3092\u56fa\u5b9a\u3059\u308c\u3070\u6cbb\u308a\u307e\u3059\n\nrequire 'sidekiq/web'\nSidekiq::Web.set :session_secret, 'secret secret'\nmount Sidekiq::Web => '/sidekiq'\n\n\u80cc\u666f\n---\n\n* Rails\u306e\u30b8\u30e7\u30d6\u5b9f\u884c\u30b5\u30fc\u30d0\u3067\u3042\u308b[Sidekiq](https://github.com/mperham/sidekiq)\u306b\u306f\u304b\u3063\u3053\u3044\u3044\u30b8\u30e7\u30d6\u7ba1\u7406\u306eWeb\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u304c\u3082\u308c\u306a\u304f\u3064\u3044\u3066\u304d\u307e\u3059\n\n![](https://github.com/mperham/sidekiq/raw/master/examples/web-ui.png)\n\n* \u4e0b\u8a18\u306e\u3088\u3046\u306a\u611f\u3058\u3067routes.rb\u306b\u8ffd\u8a18\u3059\u308b\u3060\u3051\n\n```\nmount Sidekiq::Web => '/sidekiq'\n```\n\n\u74b0\u5883\n---\n\n* Puma\n  * Cluster\u3067\u8907\u6570\u30d7\u30ed\u30bb\u30b9\u8d77\u52d5\n  * \u8907\u6570\u30b5\u30fc\u30d0\n\n\u554f\u984c\n---\n\n* \u3053\u306e\u753b\u9762\u3092\u4f7f\u3063\u3066\u30b8\u30e7\u30d6\u306e\u53c2\u7167\u3092\u3057\u3066\u3044\u308b\u306b\u306f\u554f\u984c\u306a\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001\n* \u30b8\u30e7\u30d6\u306e\u524a\u9664\u3068\u304b\u30ea\u30c8\u30e9\u30a4\u306e\u3088\u3046\u306a\u66f4\u65b0\u3092\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u306a\u305c\u304b```403 forbidden```\u304c\u767a\u751f\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3057\u305f\n\n\u539f\u56e0\n---\n\n* Sidekiq::Web\u3072\u3044\u3066\u306fSinatra\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u30de\u30eb\u30c1\u30d7\u30ed\u30bb\u30b9\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u3067\u304d\u306a\u3044\n* \u7d50\u679c\u7684\u306bRack::Protection\u306eCSRF\u30c1\u30a7\u30c3\u30af\u306b\u3072\u3063\u304b\u304b\u3063\u3066\u3044\u305f\u306e\u304c\u539f\u56e0\u3067\u3059\n  * [Sidekiq::Web](https://github.com/mperham/sidekiq/blob/master/lib/sidekiq/web.rb)\u306fsinatra\u3067\u66f8\u304b\u308c\u305f\u7c21\u6613\u306aRack\u30a2\u30d7\u30ea\u3067\u3059\n  * Sinatra\u306f\u4e00\u90e8\u72ec\u81ea\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u3092\u3057\u3066\u3044\u308b\u5834\u6240\u304c\u3042\u308a\u3001[session_secret\u3092\u30d7\u30ed\u30bb\u30b9\u8d77\u52d5\u6642\u306b\u30e9\u30f3\u30c0\u30e0\u306b\u6307\u5b9a](https://github.com/sinatra/sinatra/blob/master/lib/sinatra/base.rb#L1845)\u3057\u307e\u3059\n  * \u7d50\u679c\u7684\u306b\u30d7\u30ed\u30bb\u30b9\u3054\u3068\u306b\u7570\u306a\u308bsession_secret\u304c\u6307\u5b9a\u3055\u308c\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u5024\u306e\u5fa9\u53f7\u5316\u306b\u5931\u6557\u3057\u3066\u3044\u307e\u3057\u305f\n  * \u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u3067\u304d\u306a\u3044\u3068\u3001[Rack::Protection\u306b\u8106\u5f31\u6027\u3068\u3057\u3066\u691c\u51fa](https://github.com/sinatra/rack-protection/blob/master/lib/rack/protection/authenticity_token.rb#L27)\u3055\u308c\u3066\u843d\u3061\u3066\u3044\u307e\u3057\u305f\n\n\u5bfe\u5fdc\n---\n\n* \u4e0b\u8a18\u306e\u5bfe\u5fdc\u3092routes.rb\u306b\u5165\u308c\u3066sinatra\u306esession_secret\u3092\u56fa\u5b9a\u3059\u308c\u3070\u6cbb\u308a\u307e\u3059\n\n```\nrequire 'sidekiq/web'\nSidekiq::Web.set :session_secret, 'secret secret'\nmount Sidekiq::Web => '/sidekiq'\n```\n", "tags": ["Ruby", "Rails", "sidekiq", "Sinatra", "rack"]}