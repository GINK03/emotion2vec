{"context": " More than 1 year has passed since last update.OpenStack Heat\u306eHOT\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u3069\u306e\u7a0b\u5ea6\u307e\u3067\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3092\u7c21\u7565\u5316\u3067\u304d\u308b\u304b\u50d5\u306a\u308a\u306b\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u3002\n\u5177\u4f53\u7684\u306b\u30c8\u30e9\u30a4\u3057\u3066\u307f\u305f\u3053\u3068\u306f\u3001Ubuntu 12.04 LTS \u306e\u30af\u30e9\u30a6\u30c9\u30a4\u30e1\u30fc\u30b8\u3067\uff15\u30ce\u30fc\u30c9\u306eHadoop\u30af\u30e9\u30b9\u30bf\u69cb\u7bc9\u3067\u3059\u3002\u57fa\u672c\u7684\u306b\u306f\u4f5c\u696d\u306e\uff18\u5272\u304f\u3089\u3044\u306f\u4e0b\u8a18\u306eheat stack-create\u30b3\u30de\u30f3\u30c9\uff11\u3064\u3067\u6e08\u307e\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\uff08<key name>\u3068 <image name>\u306f\u4efb\u610f\u3002\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30ea\u30f3\u30af\u306f\u3053\u3061\u3089\u3002\uff09\n\u30b3\u30de\u30f3\u30c9\nheat stack-create hadoop \\\n    -u https://raw.github.com/kjtanaka/heat_templates/master/hadoop/deploy_hadoop.yml \\\n    -P \"key_name=<key name>;image_name=<image name>\"\n\n\u56f3\uff08IP\u30a2\u30c9\u30ec\u30b9\u306f\u74b0\u5883\u306b\u3088\u3063\u3066\u7570\u306a\u308a\u307e\u3059\u3002\uff09\n Network\n --------------------------------------------------------------------------\n      | 192.168.11.1      | 192.168.11.2      | 192.168.11.3      | 192.xxx\n  +----------------+  +----------------+  +----------------+  +------------\n  | node01[master] |  | node02[master] |  | node03[slave]  |  | node04[slav\n  | -------------- |  | -------------- |  | -------------- |  | -----------\n  | NameNode       |  | SecondNameNode |  | DataNode       |  | DataNode\n  | SecondNameNode |  |                |  | TaskTracker    |  | TaskTracker\n  | JobTracker     |  |                |  |                |  |\n  |                |  |                |  |                |  |\n  +----------------+  +----------------+  +----------------+  +------------\n\n\uff08\u6ce8\uff09heat event-list hadoop\u3067\u9032\u884c\u72b6\u6cc1\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u304c\u3001\u3059\u3079\u3066\u306e\u30a4\u30d9\u30f3\u30c8\u304cCREATE_COMPLETE\u306b\u306a\u3063\u3066\u3082\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4e0a\u306ebash\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u7d42\u308f\u308b\u307e\u3067\u3057\u3070\u3089\u304f\u5f85\u3064\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u5b8c\u4e86\u3059\u308b\u3068hdfs\u3068\u3044\u3046\u30e6\u30fc\u30b6\u540d\u3067node01\u306b\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u624b\u4f5c\u696d\u306b\u306a\u3063\u305f\u3053\u3068\uff08\uff12\u3064\uff09\n\n\u30de\u30b9\u30bf\u30fc\u30ce\u30fc\u30c9node01\u306ehdfs\u30e6\u30fc\u30b6\u306e.ssh/id_rsa.pub\u3092\u5404\u30ce\u30fc\u30c9\u306e.ssh/authorized_keys\u767b\u9332\u3059\u308b\u4f5c\u696d\u3002\n\n/etc/hosts\u306e\u7de8\u96c6\u306fnode01\u306e\u307f\u53ef\u80fd\u3067\u3057\u305f\u3002\u305d\u308c\u4ee5\u5916\u306e\u30ce\u30fc\u30c9\u306b\u306fnode01\u306e/etc/hosts\u3092\u30b3\u30d4\u30fc\u3059\u308b\u5f62\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u3053\u308c\u3089\u306e\u4f5c\u696d\u306fChef\u3084Puppet\u3067\u81ea\u52d5\u5316\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\uff08\u50d5\u306fFabric\u3092\u4f7f\u3044\u307e\u3057\u305f\u304c\u3001Heat\u306e\u691c\u8a3c\u306a\u306e\u3067\u3053\u306e\u30dd\u30b9\u30c8\u306b\u306f\u8f09\u305b\u307e\u305b\u3093\u3002\uff09\n\n\u4e8b\u524d\u306b\u5fc5\u8981\u306a\u3082\u306e\n\nHeat\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u5229\u7528\u3067\u304d\u308bOpenStack\nUbuntu 12.04 LTS\u306e\u30af\u30e9\u30a6\u30c9\u30a4\u30e1\u30fc\u30b8\u3002\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002\uff08<image name>\u306f\u4efb\u610f\uff09\n\n  glance image-create --name <image name> \\\n      --location http://cloud-images.ubuntu.com/precise/current/precise-server-cloudimg-amd64-disk1.img \\\n      --disk-format qcow2 \\\n      --container-format bare \\\n      --is-public false\n\n\n\u597d\u307e\u3057\u3044\u8a2d\u5b9a\n\n\u30ed\u30fc\u30ab\u30eb\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30ad\u30fc~/.ssh/id_dsa.pub\u3082\u3057\u304f\u306f~/.ssh/id_rsa.pub\u304c\u30ad\u30fc\u30da\u30a2\u3068\u3057\u3066\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3068ssh\u306e\u969b\u306b-i\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u305a\u306b\u6e08\u307f\u307e\u3059\u3002\u4eba\u305d\u308c\u305e\u308c\u306e\u597d\u307f\u3060\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u5f8c\u8ff0\u306f\u305d\u308c\u3092\u524d\u63d0\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\n\n  nova keypair-add --pub-key ~/.ssh/id_dsa.pub <key name>\n\n\n\u624b\u4f5c\u696d\u306b\u306a\u3063\u305f\u90e8\u5206\u306e\u8aac\u660e\n\nhdfs\u306essh\u516c\u958b\u9375\u3092\u767b\u9332\u3059\u308b\u3002\n\nnode01\u306eauthorized_keys\u306f\u7de8\u96c6\u6e08\u307f\u306a\u306e\u3067\u305d\u308c\u3092\u30ed\u30fc\u30ab\u30eb\u306b\u30b3\u30d4\u30fc\u3059\u308b\u3002\n   scp -p hdfs@192.168.11.1:.ssh/authorized_keys /tmp/hdfs_auth_keys\n\n\u30b3\u30d4\u30fc\u3057\u305f\u3082\u306e\u3092\u305d\u308c\u305e\u308c\u306e\u30ce\u30fc\u30c9\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3002\n   scp -p /tmp/hdfs_auth_keys hdfs@192.168.11.2:.ssh/authorized_keys\n   scp -p /tmp/hdfs_auth_keys hdfs@192.168.11.3:.ssh/authorized_keys\n   scp -p /tmp/hdfs_auth_keys hdfs@192.168.11.4:.ssh/authorized_keys\n   scp -p /tmp/hdfs_auth_keys hdfs@192.168.11.5:.ssh/authorized_keys\n\n\n/etc/hosts\u306e\u914d\u5e03\u3059\u308b\n\nnode01\u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b\n   ssh hdfs@192.168.11.1\n\nsudo\u304c\u5fc5\u8981\u306a\u306e\u3067scp\u3067\u306f\u306a\u304f\u3066cat\u3001ssh\u3001sudo\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3002\n   hdfs@node01:~$ cat /etc/hosts | ssh node02 'sudo sh -c \"cat > /etc/hosts\"'\n     Are you sure you want to continue connecting (yes/no)? yes\n   hdfs@node01:~$ cat /etc/hosts | ssh node03 'sudo sh -c \"cat > /etc/hosts\"'\n     Are you sure you want to continue connecting (yes/no)? yes\n   hdfs@node01:~$ cat /etc/hosts | ssh node04 'sudo sh -c \"cat > /etc/hosts\"'\n     Are you sure you want to continue connecting (yes/no)? yes\n   hdfs@node01:~$ cat /etc/hosts | ssh node05 'sudo sh -c \"cat > /etc/hosts\"'\n     Are you sure you want to continue connecting (yes/no)? yes\n\nHadoop\u306e\u8d77\u52d5\u6642\u306b\u8cea\u554f\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u3001node01\u3092 ~/.ssh/known_hosts\u306b\u767b\u9332\u3059\u308b\u3002\n   hdfs@node01:~$ ssh node01 hostname\n     Are you sure you want to continue connecting (yes/no)? yes\n\n\nHadoop\u3092\u4f7f\u3063\u3066\u307f\u308b\n\nHDFS\u3092\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\n\n   hdfs@node01:~$ hadoop namenode -format\n\n\nHadoop\u3092\u8d77\u52d5\n\n   hdfs@node01:~$ ./bin/start-all.sh\n\n\nWordCount\u3092\u8a66\u3057\u3066\u307f\u308b\n\n   hdfs@node01:~$ wget http://norvig.com/big.txt -P ~/\n   hdfs@node01:~$ hadoop fs -copyFromLocal ~/big.txt big.txt\n   hdfs@node01:~$ hadoop jar /usr/lib/hadoop/hadoop*examples*.jar wordcount big.txt output\n   hdfs@node01:~$ hadoop fs -ls\n   hdfs@node01:~$ hadoop fs -get output ~/local_output\n   hdfs@node01:~$ hadoop fs -rmr output\n   hdfs@node01:~$ less ~/local_output/part-r-00000\n\n\n\u30e6\u30fc\u30b6\u3092\u8ffd\u52a0\u3057\u3066\u307f\u308b\u3002\u8a66\u3057\u306bjohn\n\n\n   hdfs@node01:~$ sudo useradd john -m -s /bin/bash\n   hdfs@node01:~$ hadoop fs -mkdir /user/john\n   hdfs@node01:~$ hadoop fs -chown john:john /user/john\n\njohn\u3068\u3044\u3046\u30e6\u30fc\u30b6\u30fc\u3067\u3082WordCount\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n   hdfs@node01:~$ sudo -i -u john\n   john@node01:~$ wget http://norvig.com/big.txt -P ~/\n   john@node01:~$ hadoop fs -copyFromLocal ~/big.txt big.txt\n   john@node01:~$ hadoop jar /usr/lib/hadoop/hadoop*examples*.jar wordcount big.txt output\n   john@node01:~$ hadoop fs -ls\n   john@node01:~$ hadoop fs -get output ~/local_output\n   john@node01:~$ hadoop fs -rmr output\n   john@node01:~$ less ~/local_output/part-r-00000\n\n\nHadoop\u3092\u505c\u6b62\u3059\u308b\n\n   hdfs@node01:~$ ./bin/stop-all.sh\n\n\nHeat\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306b\u8cea\u554f\u3057\u3066\u307f\u305f\u3053\u3068\n\nHeat Template\u3067for-loop\u306f\u4f7f\u3048\u307e\u3059\u304b\uff1f\n\u3059\u3079\u3066\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e/etc/hosts\u3092\u7c21\u5358\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u65b9\u6cd5\u306f\u3042\u308a\u307e\u3059\u304b\uff1f\n\n\u3069\u3061\u3089\u306e\u8cea\u554f\u3082\u7b54\u3048\u306f\u30ce\u30fc\u3067\u3057\u305f\u3002{ get_attr: [ name, first_address ] }\u306f\u3068\u3066\u3082\u4fbf\u5229\u3067\u3059\u304c\u3001get_attr\u304c\u30eb\u30fc\u30d7\u306b\u306a\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\u306a\u306e\u3067Heat\u3067\u30b9\u30bf\u30c3\u30af\u3059\u308b\u969b\u306f\u30de\u30b9\u30bf\u30fc\uff08\u3042\u308b\u3044\u306f\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\uff09\u30ce\u30fc\u30c9\u306bget_attr\u3067\u60c5\u5831\u3092\u96c6\u3081\u3066\u304a\u3044\u3066\u3001\u305d\u308c\u3092\u5225\u306e\u30c7\u30d7\u30ed\u30a4\u30c4\u30fc\u30eb\u3067\u5229\u7528\u3059\u308b\u5f62\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u4ee5\u4e0a\u3067\u3059\u3002\u53c2\u8003\u306b\u3057\u305f\u30ea\u30f3\u30af\u3092\u4ee5\u4e0b\u306b\u6dfb\u3048\u3066\u304a\u304d\u307e\u3059\u3002\n\nHeat\n\n\nhttp://docs.openstack.org/developer/heat/template_guide/hot_spec.html\nhttps://github.com/openstack/heat-templates\nhttps://wiki.openstack.org/wiki/Heat\n\n\n\nHadoop\n\n\nhttp://askubuntu.com/questions/144433/how-to-install-hadoop\nhttp://enterprisezine.jp/dbonline/detail/4254\n\n\n\nOpenStack Heat\u306eHOT\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u3069\u306e\u7a0b\u5ea6\u307e\u3067\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3092\u7c21\u7565\u5316\u3067\u304d\u308b\u304b\u50d5\u306a\u308a\u306b\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u5177\u4f53\u7684\u306b\u30c8\u30e9\u30a4\u3057\u3066\u307f\u305f\u3053\u3068\u306f\u3001[Ubuntu 12.04 LTS \u306e\u30af\u30e9\u30a6\u30c9\u30a4\u30e1\u30fc\u30b8](http://cloud-images.ubuntu.com/precise/current/)\u3067\uff15\u30ce\u30fc\u30c9\u306eHadoop\u30af\u30e9\u30b9\u30bf\u69cb\u7bc9\u3067\u3059\u3002\u57fa\u672c\u7684\u306b\u306f\u4f5c\u696d\u306e\uff18\u5272\u304f\u3089\u3044\u306f\u4e0b\u8a18\u306e``heat stack-create``\u30b3\u30de\u30f3\u30c9\uff11\u3064\u3067\u6e08\u307e\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\uff08``<key name>``\u3068 ``<image name>``\u306f\u4efb\u610f\u3002[\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30ea\u30f3\u30af\u306f\u3053\u3061\u3089](https://raw.github.com/kjtanaka/heat_templates/master/hadoop/deploy_hadoop.yml)\u3002\uff09\n\n\u30b3\u30de\u30f3\u30c9\n\n```\nheat stack-create hadoop \\\n    -u https://raw.github.com/kjtanaka/heat_templates/master/hadoop/deploy_hadoop.yml \\\n    -P \"key_name=<key name>;image_name=<image name>\"\n```\n\n\u56f3\uff08IP\u30a2\u30c9\u30ec\u30b9\u306f\u74b0\u5883\u306b\u3088\u3063\u3066\u7570\u306a\u308a\u307e\u3059\u3002\uff09\n\n```\n Network\n --------------------------------------------------------------------------\n      | 192.168.11.1      | 192.168.11.2      | 192.168.11.3      | 192.xxx\n  +----------------+  +----------------+  +----------------+  +------------\n  | node01[master] |  | node02[master] |  | node03[slave]  |  | node04[slav\n  | -------------- |  | -------------- |  | -------------- |  | -----------\n  | NameNode       |  | SecondNameNode |  | DataNode       |  | DataNode\n  | SecondNameNode |  |                |  | TaskTracker    |  | TaskTracker\n  | JobTracker     |  |                |  |                |  |\n  |                |  |                |  |                |  |\n  +----------------+  +----------------+  +----------------+  +------------\n```\n\n\uff08\u6ce8\uff09``heat event-list hadoop``\u3067\u9032\u884c\u72b6\u6cc1\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u304c\u3001\u3059\u3079\u3066\u306e\u30a4\u30d9\u30f3\u30c8\u304c``CREATE_COMPLETE``\u306b\u306a\u3063\u3066\u3082\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4e0a\u306ebash\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u7d42\u308f\u308b\u307e\u3067\u3057\u3070\u3089\u304f\u5f85\u3064\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u5b8c\u4e86\u3059\u308b\u3068hdfs\u3068\u3044\u3046\u30e6\u30fc\u30b6\u540d\u3067node01\u306b\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u624b\u4f5c\u696d\u306b\u306a\u3063\u305f\u3053\u3068\uff08\uff12\u3064\uff09\n---------------------------------\n1. \u30de\u30b9\u30bf\u30fc\u30ce\u30fc\u30c9node01\u306ehdfs\u30e6\u30fc\u30b6\u306e``.ssh/id_rsa.pub``\u3092\u5404\u30ce\u30fc\u30c9\u306e``.ssh/authorized_keys``\u767b\u9332\u3059\u308b\u4f5c\u696d\u3002\n2. ``/etc/hosts``\u306e\u7de8\u96c6\u306fnode01\u306e\u307f\u53ef\u80fd\u3067\u3057\u305f\u3002\u305d\u308c\u4ee5\u5916\u306e\u30ce\u30fc\u30c9\u306b\u306fnode01\u306e``/etc/hosts``\u3092\u30b3\u30d4\u30fc\u3059\u308b\u5f62\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u3053\u308c\u3089\u306e\u4f5c\u696d\u306fChef\u3084Puppet\u3067\u81ea\u52d5\u5316\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\uff08\u50d5\u306fFabric\u3092\u4f7f\u3044\u307e\u3057\u305f\u304c\u3001Heat\u306e\u691c\u8a3c\u306a\u306e\u3067\u3053\u306e\u30dd\u30b9\u30c8\u306b\u306f\u8f09\u305b\u307e\u305b\u3093\u3002\uff09\n\n\u4e8b\u524d\u306b\u5fc5\u8981\u306a\u3082\u306e\n---------------------\n* Heat\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u5229\u7528\u3067\u304d\u308bOpenStack\n* Ubuntu 12.04 LTS\u306e\u30af\u30e9\u30a6\u30c9\u30a4\u30e1\u30fc\u30b8\u3002\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002\uff08``<image name>``\u306f\u4efb\u610f\uff09\n\n  ```\n  glance image-create --name <image name> \\\n      --location http://cloud-images.ubuntu.com/precise/current/precise-server-cloudimg-amd64-disk1.img \\\n      --disk-format qcow2 \\\n      --container-format bare \\\n      --is-public false\n  ```\n\n\u597d\u307e\u3057\u3044\u8a2d\u5b9a\n---------\n* \u30ed\u30fc\u30ab\u30eb\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30ad\u30fc``~/.ssh/id_dsa.pub``\u3082\u3057\u304f\u306f``~/.ssh/id_rsa.pub``\u304c\u30ad\u30fc\u30da\u30a2\u3068\u3057\u3066\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3068ssh\u306e\u969b\u306b``-i``\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u305a\u306b\u6e08\u307f\u307e\u3059\u3002\u4eba\u305d\u308c\u305e\u308c\u306e\u597d\u307f\u3060\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u5f8c\u8ff0\u306f\u305d\u308c\u3092\u524d\u63d0\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\n\n  ```\n  nova keypair-add --pub-key ~/.ssh/id_dsa.pub <key name>\n  ```\n\n\u624b\u4f5c\u696d\u306b\u306a\u3063\u305f\u90e8\u5206\u306e\u8aac\u660e\n--------------------------------\n\n1. hdfs\u306essh\u516c\u958b\u9375\u3092\u767b\u9332\u3059\u308b\u3002\n\n   node01\u306eauthorized_keys\u306f\u7de8\u96c6\u6e08\u307f\u306a\u306e\u3067\u305d\u308c\u3092\u30ed\u30fc\u30ab\u30eb\u306b\u30b3\u30d4\u30fc\u3059\u308b\u3002\n\n   ```\n   scp -p hdfs@192.168.11.1:.ssh/authorized_keys /tmp/hdfs_auth_keys\n   ```\n\n   \u30b3\u30d4\u30fc\u3057\u305f\u3082\u306e\u3092\u305d\u308c\u305e\u308c\u306e\u30ce\u30fc\u30c9\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3002\n\n   ```\n   scp -p /tmp/hdfs_auth_keys hdfs@192.168.11.2:.ssh/authorized_keys\n   scp -p /tmp/hdfs_auth_keys hdfs@192.168.11.3:.ssh/authorized_keys\n   scp -p /tmp/hdfs_auth_keys hdfs@192.168.11.4:.ssh/authorized_keys\n   scp -p /tmp/hdfs_auth_keys hdfs@192.168.11.5:.ssh/authorized_keys\n   ```\n\n2. /etc/hosts\u306e\u914d\u5e03\u3059\u308b\n\n   node01\u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b\n\n   ```\n   ssh hdfs@192.168.11.1\n   ```\n\n   sudo\u304c\u5fc5\u8981\u306a\u306e\u3067scp\u3067\u306f\u306a\u304f\u3066cat\u3001ssh\u3001sudo\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3002\n\n   ```\n   hdfs@node01:~$ cat /etc/hosts | ssh node02 'sudo sh -c \"cat > /etc/hosts\"'\n     Are you sure you want to continue connecting (yes/no)? yes\n   hdfs@node01:~$ cat /etc/hosts | ssh node03 'sudo sh -c \"cat > /etc/hosts\"'\n     Are you sure you want to continue connecting (yes/no)? yes\n   hdfs@node01:~$ cat /etc/hosts | ssh node04 'sudo sh -c \"cat > /etc/hosts\"'\n     Are you sure you want to continue connecting (yes/no)? yes\n   hdfs@node01:~$ cat /etc/hosts | ssh node05 'sudo sh -c \"cat > /etc/hosts\"'\n     Are you sure you want to continue connecting (yes/no)? yes\n   ```\n\n   Hadoop\u306e\u8d77\u52d5\u6642\u306b\u8cea\u554f\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u3001node01\u3092 ~/.ssh/known_hosts\u306b\u767b\u9332\u3059\u308b\u3002\n\n   ```\n   hdfs@node01:~$ ssh node01 hostname\n     Are you sure you want to continue connecting (yes/no)? yes\n   ```\n\nHadoop\u3092\u4f7f\u3063\u3066\u307f\u308b\n----------\n\n1. HDFS\u3092\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\n\n   ```\n   hdfs@node01:~$ hadoop namenode -format\n   ```\n\n2. Hadoop\u3092\u8d77\u52d5\n\n   ```\n   hdfs@node01:~$ ./bin/start-all.sh\n   ```\n\n3. WordCount\u3092\u8a66\u3057\u3066\u307f\u308b\n\n   ```\n   hdfs@node01:~$ wget http://norvig.com/big.txt -P ~/\n   hdfs@node01:~$ hadoop fs -copyFromLocal ~/big.txt big.txt\n   hdfs@node01:~$ hadoop jar /usr/lib/hadoop/hadoop*examples*.jar wordcount big.txt output\n   hdfs@node01:~$ hadoop fs -ls\n   hdfs@node01:~$ hadoop fs -get output ~/local_output\n   hdfs@node01:~$ hadoop fs -rmr output\n   hdfs@node01:~$ less ~/local_output/part-r-00000\n   ```\n\n4. \u30e6\u30fc\u30b6\u3092\u8ffd\u52a0\u3057\u3066\u307f\u308b\u3002\u8a66\u3057\u306b``john``\n\n   ```\n   hdfs@node01:~$ sudo useradd john -m -s /bin/bash\n   hdfs@node01:~$ hadoop fs -mkdir /user/john\n   hdfs@node01:~$ hadoop fs -chown john:john /user/john\n   ```\n\n   ``john``\u3068\u3044\u3046\u30e6\u30fc\u30b6\u30fc\u3067\u3082WordCount\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n\n   ```\n   hdfs@node01:~$ sudo -i -u john\n   john@node01:~$ wget http://norvig.com/big.txt -P ~/\n   john@node01:~$ hadoop fs -copyFromLocal ~/big.txt big.txt\n   john@node01:~$ hadoop jar /usr/lib/hadoop/hadoop*examples*.jar wordcount big.txt output\n   john@node01:~$ hadoop fs -ls\n   john@node01:~$ hadoop fs -get output ~/local_output\n   john@node01:~$ hadoop fs -rmr output\n   john@node01:~$ less ~/local_output/part-r-00000\n   ```\n\n5. Hadoop\u3092\u505c\u6b62\u3059\u308b\n\n   ```\n   hdfs@node01:~$ ./bin/stop-all.sh\n   ```\n\nHeat\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306b\u8cea\u554f\u3057\u3066\u307f\u305f\u3053\u3068\n---------\n\n* [Heat Template\u3067for-loop\u306f\u4f7f\u3048\u307e\u3059\u304b\uff1f](https://answers.launchpad.net/heat/+question/240943)\n* [\u3059\u3079\u3066\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e/etc/hosts\u3092\u7c21\u5358\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3059\u308b\u65b9\u6cd5\u306f\u3042\u308a\u307e\u3059\u304b\uff1f](https://answers.launchpad.net/heat/+question/241010)\n\n\u3069\u3061\u3089\u306e\u8cea\u554f\u3082\u7b54\u3048\u306f\u30ce\u30fc\u3067\u3057\u305f\u3002``{ get_attr: [ name, first_address ] }``\u306f\u3068\u3066\u3082\u4fbf\u5229\u3067\u3059\u304c\u3001``get_attr``\u304c\u30eb\u30fc\u30d7\u306b\u306a\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\u306a\u306e\u3067Heat\u3067\u30b9\u30bf\u30c3\u30af\u3059\u308b\u969b\u306f\u30de\u30b9\u30bf\u30fc\uff08\u3042\u308b\u3044\u306f\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\uff09\u30ce\u30fc\u30c9\u306b``get_attr``\u3067\u60c5\u5831\u3092\u96c6\u3081\u3066\u304a\u3044\u3066\u3001\u305d\u308c\u3092\u5225\u306e\u30c7\u30d7\u30ed\u30a4\u30c4\u30fc\u30eb\u3067\u5229\u7528\u3059\u308b\u5f62\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u4ee5\u4e0a\u3067\u3059\u3002\u53c2\u8003\u306b\u3057\u305f\u30ea\u30f3\u30af\u3092\u4ee5\u4e0b\u306b\u6dfb\u3048\u3066\u304a\u304d\u307e\u3059\u3002\n\n* Heat\n  * http://docs.openstack.org/developer/heat/template_guide/hot_spec.html\n  * https://github.com/openstack/heat-templates\n  * https://wiki.openstack.org/wiki/Heat\n  * \n* Hadoop\n  * http://askubuntu.com/questions/144433/how-to-install-hadoop\n  * http://enterprisezine.jp/dbonline/detail/4254", "tags": ["openstackHavana", "Heat"]}