{"context": " More than 1 year has passed since last update.\n\nDatasheet\nDatasheet\n\n0/1 \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\n\n\n\n\u5024\nHIGH/LOW\n\u6982\u8981\n\u6642\u9593\n\u8aa4\u5dee\n\n\n\n\nT0H\n0\nhigh voltage time\n0.40us\n\u00b1150ns\n\n\nT1H\n1\nhigh voltage time\n0.8us\n\u00b1150ns\n\n\nT0L\n0\nlow voltage time\n0.85us\n\u00b1150ns\n\n\nT1L\n1\nlow voltage time\n0.45us\n\u00b1150ns\n\n\nRES\n\nlow voltage time Above\n50\u00b5s\n\n\n\n\n\n\n\u30c7\u30fc\u30bf\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\n24bit\u306e\u8272\u30c7\u30fc\u30bf\n\n\n\nGreen(8bit)\nRed(8bit)\nBlue(8bit)\n\n\n\n\n\n\n\n\u30c7\u30fc\u30bf\u69cb\u9020\n50us\u306eRET\u304c\u7d9a\u3044\u305f\u5834\u5408\u3001\u65b0\u3057\u3044\u30c7\u30fc\u30bf\u3068\u307f\u306a\u3059\u30021\u3064\u3081\u306e\u30c7\u30fc\u30bf\u306f\u3001LED1\u304c\u629c\u304d\u53d6\u308a\u767a\u8272\u3059\u308b\u30022\u3064\u3081\u306e\u30c7\u30fc\u30bf\u306f\u3001\uff12\u756a\u76ee\u306eLED2\u304c\u629c\u304d\u53d6\u308a\u767a\u8272\u3059\u308b\u300250us\u4ee5\u5185\u3067\u30c7\u30fc\u30bf\u3092\u7d50\u5408\u3057\u3001\u6d41\u3059\u3060\u3051\u3067\u30de\u30a4\u30b3\u30f3\u304c\u81ea\u5206\u306e\u30c7\u30fc\u30bf\u3092\u629c\u304d\u51fa\u3057\u767a\u8272\u3059\u308b\u3002\n\n\nDelay\ndelayMicroseconds()\u306f\u30012us\u306edelay\u304c\u53ef\u80fd\u3002\u3053\u308c\u3060\u3068\u9045\u3059\u304e\u308b\u3002\nArduino\u306eUNO\u306e\u30af\u30ed\u30c3\u30af\u306f\u300116MHz\n\n1/16MHz = 0.0625us\n\n1\u5468\u671f 0.0625us\u3002\n\u5272\u308a\u8fbc\u307fMacro\n\nsei()\ncli()\n\n\u3092\u3064\u304b\u3063\u3066\u3001\u51e6\u7406\u4e2d\u5272\u308a\u8fbc\u307f\u3092\u9632\u3050\u3002\n\nArduino\u306ePORT\n\n\nSample\n\uff11\uff12\u500b\u306eLED\u3092\u5149\u3089\u3059\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u304c\u3001\u5909\u8272\u3001\u3046\u307e\u304f\u8272\u304c\u51fa\u305b\u306a\u3044\u3002\n```cpp:sample\n\ndefine PORTA1_HIGH 0b1\n\ndefine PORTA1_LOW 0b0\n\ndefine BYTENUMBER 8\n\ndefine NUBEROFLED 12\nconst uint8_t bitShift = BYTENUMBER - 1 ;\nuint8_t colorData[36] = {5,5,5, \n                         5,5,5,\n                         5,5,5, \n                         5,5,5, \n                         5,5,5,\n                         5,5,5,\n                         5,5,5,\n                         5,5,5,\n                         5,5,5,\n                         5,5,5,\n                         5,5,5,\n                         5,5,5};\nvoid setup() {\n DDRC = 1; // PORTC\u3092\u51fa\u529b\u306b\n PORTC = 0b0; // PORTC\u306b 00000000\u3092\u8a2d\u5b9a\uff08\u5168\u90e8LOW)\n}\nvoid loop() {\nsei();\n  for(int i = 0; i<NUBEROFLED; i++){\n    send(colorData[i*3], colorData[i*3+1], colorData[i*3+2]);\n  }\n  cli();\n  reset();\n  delay(100);\n}\nvoid send(uint8_t g, uint8_t r, uint8_t b){\n for(int i = 0; i < BYTENUMBER; i++){\n   if(g & (1 << (bitShift-i))){\n     led_one();\n   } else {\n     led_zero();\n   }\n }\nfor(int i = 0; i < BYTENUMBER; i++){\n   if(r & 1 << ((bitShift-i))){\n     led_one();\n   } else {\n     led_zero();\n   }\n }\n for(int i = 0; i < BYTENUMBER; i++){\n   if(b & 1 << ((bitShift-i))){\n     led_one();\n   } else {\n     led_zero();\n   }\n }\n}\nvoid led_zero(){\n// HIGH: 0.35us\n   PORTC |= PORTA1_HIGH; //T 2\n   asm(\" nop\"); //T 3\n   asm(\" nop\"); //T 4\n   asm(\" nop\"); //T 5\n   asm(\" nop\"); //T 6  6 * 0.0625 = 0.375us\n// LOW: 0.8us\n   PORTC &= PORTA1_LOW; //T 8\n   asm(\" nop\"); //T 9\n   asm(\" nop\"); //T 10\n   asm(\" nop\"); //T 11\n   asm(\" nop\"); //T 12\n   asm(\" nop\"); //T 13\n   asm(\" nop\"); //T 14\n   asm(\" nop\"); //T 15\n   asm(\" nop\"); //T 16\n   asm(\" nop\"); //T 17\n   asm(\" nop\"); //T 18\n   asm(\" nop\"); //T 19 13 * 0.0625 = 0.8125us\n}\nvoid led_one(){\n// HIGH 0.7us\n   PORTC |= PORTA1_HIGH; // T 2\n   asm(\" nop\"); // T 3\n   asm(\" nop\"); // T 4\n   asm(\" nop\"); // T 5\n   asm(\" nop\"); // T 6\n   asm(\" nop\"); // T 7 \n   asm(\" nop\"); // T 8\n   asm(\" nop\"); // T 9\n   asm(\" nop\"); // T 10\n   asm(\" nop\"); // T 11 11 * 0.0625 = 0.6875us\n// LOW 0.6us\n   PORTC &= PORTA1_LOW; // T 13\n   asm(\" nop\"); // T 14\n   asm(\" nop\"); // T 15\n   asm(\" nop\"); // T 16\n   asm(\" nop\"); // T 17\n   asm(\" nop\"); // T 18\n   asm(\" nop\"); // T 19\n   asm(\" nop\"); // T 20\n   //asm(\" nop\"); // T 21 10 * 0.0625 = 0.625 \n}\nvoid reset(){\n PORTC &= PORTA1_LOW;\n for(int i = 0; i < 60; i++){ \n   asm(\" nop\");\n   asm(\" nop\"); \n   asm(\" nop\"); \n   asm(\" nop\"); \n   asm(\" nop\"); \n   asm(\" nop\"); \n   asm(\" nop\"); \n   asm(\" nop\"); \n   asm(\" nop\"); \n   asm(\" nop\"); \n }\n}\n```\n\n\u5b9f\u884c\u7d50\u679c\n\n\nhigh\u306f\u72d9\u3063\u305f\u901a\u308a\u306e\u72b6\u614b\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001low\u306f\u9577\u304f\u306a\u308b\u300224bit\u9593\u306e\u6642\u9593\u304c3000us\u3068\u306a\u308a\u5927\u304d\u304f\u9045\u5ef6\u3059\u308b\u3002LED\u306fRest\u72b6\u614b\u3060\u3068\u52d8\u9055\u3044\u3057LED\u304c\u30c1\u30e9\u30c4\u30ad\u59cb\u3081\u308b\u3002\n\n\u539f\u56e0\n\u30af\u30ed\u30c3\u30af\u306f\u6b63\u5e38\u306b\u52d5\u3044\u3066\u3044\u308b\u304c\u3001\u30d3\u30c3\u30c8\u3092\u51fa\u529b\u3059\u308b\u524d\u5f8c\u306b\u9045\u5ef6\u304c\u3042\u308a\u3001if\u6587\u306a\u3069\u306e\u6761\u4ef6\u5206\u5c90\u3084\u30d3\u30c3\u30c8\u6f14\u7b97\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u3002\n\n# Datasheet\n\n[Datasheet](http://www.world-semi.com/uploads/soft/150522/1-150522091P5.pdf)\n\n# 0/1 \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\n\n|\u5024|HIGH/LOW|\u6982\u8981|\u6642\u9593|\u8aa4\u5dee|\n|:--|:--|:--|:--|:--|:--|\n|T0H| 0 |high voltage time|  0.40us | \u00b1150ns |\n|T1H| 1 |high voltage time | 0.8us | \u00b1150ns |\n|T0L| 0 |low voltage time | 0.85us | \u00b1150ns |\n|T1L| 1 |low voltage time | 0.45us | \u00b1150ns |\n|RES|   |low voltage time Above | 50\u00b5s |\n\n<img width=\"589\" alt=\"WS2812B_Datasheet_tiimeChart.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/112699/ccf891ab-4165-8898-2629-d367d7a0fed7.jpeg\">\n\n# \u30c7\u30fc\u30bf\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\n\n24bit\u306e\u8272\u30c7\u30fc\u30bf\n\n|Green(8bit)|Red(8bit)|Blue(8bit)|\n|:--|:--|:--|\n\n<img width=\"730\" alt=\"color02.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/63450/13244225-9682-c28f-478c-4f73e65aa5f4.png\">\n\n# \u30c7\u30fc\u30bf\u69cb\u9020\n\n50us\u306eRET\u304c\u7d9a\u3044\u305f\u5834\u5408\u3001\u65b0\u3057\u3044\u30c7\u30fc\u30bf\u3068\u307f\u306a\u3059\u30021\u3064\u3081\u306e\u30c7\u30fc\u30bf\u306f\u3001LED1\u304c\u629c\u304d\u53d6\u308a\u767a\u8272\u3059\u308b\u30022\u3064\u3081\u306e\u30c7\u30fc\u30bf\u306f\u3001\uff12\u756a\u76ee\u306eLED2\u304c\u629c\u304d\u53d6\u308a\u767a\u8272\u3059\u308b\u300250us\u4ee5\u5185\u3067\u30c7\u30fc\u30bf\u3092\u7d50\u5408\u3057\u3001\u6d41\u3059\u3060\u3051\u3067\u30de\u30a4\u30b3\u30f3\u304c\u81ea\u5206\u306e\u30c7\u30fc\u30bf\u3092\u629c\u304d\u51fa\u3057\u767a\u8272\u3059\u308b\u3002\n\n<img width=\"972\" alt=\"color03.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/63450/5cb3526c-93a3-c545-9bd0-136c06d6ba59.png\">\n\n# Delay\n\n`delayMicroseconds()`\u306f\u30012us\u306edelay\u304c\u53ef\u80fd\u3002\u3053\u308c\u3060\u3068\u9045\u3059\u304e\u308b\u3002\n\nArduino\u306eUNO\u306e\u30af\u30ed\u30c3\u30af\u306f\u300116MHz\n> 1/16MHz = 0.0625us\n\n1\u5468\u671f 0.0625us\u3002\n\n\u5272\u308a\u8fbc\u307fMacro\n\n> sei()\n> cli()\n\n\u3092\u3064\u304b\u3063\u3066\u3001\u51e6\u7406\u4e2d\u5272\u308a\u8fbc\u307f\u3092\u9632\u3050\u3002\n\n# Arduino\u306ePORT\n\n![port.png](https://qiita-image-store.s3.amazonaws.com/0/63450/97625108-55b7-499d-04c1-e8b55e9b02ec.png)\n\n\n# Sample\n\uff11\uff12\u500b\u306eLED\u3092\u5149\u3089\u3059\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u304c\u3001\u5909\u8272\u3001\u3046\u307e\u304f\u8272\u304c\u51fa\u305b\u306a\u3044\u3002\n```cpp:sample\n#define PORTA1_HIGH 0b1\n#define PORTA1_LOW 0b0\n#define BYTENUMBER 8\n#define NUBEROFLED 12\n\nconst uint8_t bitShift = BYTENUMBER - 1 ;\nuint8_t colorData[36] = {5,5,5, \n                         5,5,5,\n                         5,5,5, \n                         5,5,5, \n                         5,5,5,\n                         5,5,5,\n                         5,5,5,\n                         5,5,5,\n                         5,5,5,\n                         5,5,5,\n                         5,5,5,\n                         5,5,5};\n\nvoid setup() {\n DDRC = 1; // PORTC\u3092\u51fa\u529b\u306b\n PORTC = 0b0; // PORTC\u306b 00000000\u3092\u8a2d\u5b9a\uff08\u5168\u90e8LOW)\n}\n\nvoid loop() {\n\n  sei();\n  for(int i = 0; i<NUBEROFLED; i++){\n    send(colorData[i*3], colorData[i*3+1], colorData[i*3+2]);\n  }\n  cli();\n  reset();\n  delay(100);\n}\n\nvoid send(uint8_t g, uint8_t r, uint8_t b){\n for(int i = 0; i < BYTENUMBER; i++){\n   if(g & (1 << (bitShift-i))){\n     led_one();\n   } else {\n     led_zero();\n   }\n }\n\n for(int i = 0; i < BYTENUMBER; i++){\n   if(r & 1 << ((bitShift-i))){\n     led_one();\n   } else {\n     led_zero();\n   }\n }\n for(int i = 0; i < BYTENUMBER; i++){\n   if(b & 1 << ((bitShift-i))){\n     led_one();\n   } else {\n     led_zero();\n   }\n }\n}\n\nvoid led_zero(){\n\n   // HIGH: 0.35us\n   PORTC |= PORTA1_HIGH; //T 2\n   asm(\" nop\"); //T 3\n   asm(\" nop\"); //T 4\n   asm(\" nop\"); //T 5\n   asm(\" nop\"); //T 6  6 * 0.0625 = 0.375us\n\n   // LOW: 0.8us\n   PORTC &= PORTA1_LOW; //T 8\n   asm(\" nop\"); //T 9\n   asm(\" nop\"); //T 10\n   asm(\" nop\"); //T 11\n   asm(\" nop\"); //T 12\n   asm(\" nop\"); //T 13\n   asm(\" nop\"); //T 14\n   asm(\" nop\"); //T 15\n   asm(\" nop\"); //T 16\n   asm(\" nop\"); //T 17\n   asm(\" nop\"); //T 18\n   asm(\" nop\"); //T 19 13 * 0.0625 = 0.8125us\n}\n\nvoid led_one(){\n\n   // HIGH 0.7us\n   PORTC |= PORTA1_HIGH; // T 2\n   asm(\" nop\"); // T 3\n   asm(\" nop\"); // T 4\n   asm(\" nop\"); // T 5\n   asm(\" nop\"); // T 6\n   asm(\" nop\"); // T 7 \n   asm(\" nop\"); // T 8\n   asm(\" nop\"); // T 9\n   asm(\" nop\"); // T 10\n   asm(\" nop\"); // T 11 11 * 0.0625 = 0.6875us\n\n   // LOW 0.6us\n   PORTC &= PORTA1_LOW; // T 13\n   asm(\" nop\"); // T 14\n   asm(\" nop\"); // T 15\n   asm(\" nop\"); // T 16\n   asm(\" nop\"); // T 17\n   asm(\" nop\"); // T 18\n   asm(\" nop\"); // T 19\n   asm(\" nop\"); // T 20\n   //asm(\" nop\"); // T 21 10 * 0.0625 = 0.625 \n}\n\nvoid reset(){\n PORTC &= PORTA1_LOW;\n for(int i = 0; i < 60; i++){ \n   asm(\" nop\");\n   asm(\" nop\"); \n   asm(\" nop\"); \n   asm(\" nop\"); \n   asm(\" nop\"); \n   asm(\" nop\"); \n   asm(\" nop\"); \n   asm(\" nop\"); \n   asm(\" nop\"); \n   asm(\" nop\"); \n }\n}\n```\n#\u5b9f\u884c\u7d50\u679c\n![Delaytime01.jpg](https://qiita-image-store.s3.amazonaws.com/0/112699/6216d4aa-0b5f-c0d6-f6e6-3089d9788d0b.jpeg)\n![timeDelay02.jpg](https://qiita-image-store.s3.amazonaws.com/0/112699/b95794bd-c8fd-d07c-0737-9c630c366f82.jpeg)\nhigh\u306f\u72d9\u3063\u305f\u901a\u308a\u306e\u72b6\u614b\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001low\u306f\u9577\u304f\u306a\u308b\u300224bit\u9593\u306e\u6642\u9593\u304c3000us\u3068\u306a\u308a\u5927\u304d\u304f\u9045\u5ef6\u3059\u308b\u3002LED\u306fRest\u72b6\u614b\u3060\u3068\u52d8\u9055\u3044\u3057LED\u304c\u30c1\u30e9\u30c4\u30ad\u59cb\u3081\u308b\u3002\n#\u539f\u56e0\n\u30af\u30ed\u30c3\u30af\u306f\u6b63\u5e38\u306b\u52d5\u3044\u3066\u3044\u308b\u304c\u3001\u30d3\u30c3\u30c8\u3092\u51fa\u529b\u3059\u308b\u524d\u5f8c\u306b\u9045\u5ef6\u304c\u3042\u308a\u3001if\u6587\u306a\u3069\u306e\u6761\u4ef6\u5206\u5c90\u3084\u30d3\u30c3\u30c8\u6f14\u7b97\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u3002\n", "tags": ["fabo", "IoT", "colorled", "WS2812"]}