{"context": " More than 1 year has passed since last update.\u5168\u4f53\u7684\u306a\u5185\u5bb9\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u306e\u8a18\u4e8b\uff08\u8003\u3048\u308b\u307b\u3069\u306b\u30d6\u30e9\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u5316\u3057\u3066\u304f\u308b\u30b9\u30ad\u30f3\u30e1\u30c3\u30b7\u30e5\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u89e3\u8aac\uff09\u3068\u3001\u3053\u3061\u3089\u306e\u8a18\u4e8b\uff08\u305d\u306e61 \u5b8c\u5168\u30db\u30ef\u30a4\u30c8\u30dc\u30c3\u30af\u30b9\u306a\u30b9\u30ad\u30f3\u30e1\u30c3\u30b7\u30e5\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u306e\u89e3\uff09\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\n\u4eca\u56de\u3082\u4f8b\u306b\u3088\u3063\u3066\u3001\u30b5\u30f3\u30d7\u30eb\u3092jsdo.it\u306b\u4e0a\u3052\u3066\u3042\u308a\u307e\u3059\u3002\n\n\u30b9\u30ad\u30cb\u30f3\u30b0\u30e1\u30c3\u30b7\u30e5\uff08\u30dc\u30fc\u30f3\uff09\u306b\u30c1\u30e3\u30ec\u30f3\u30b8\n\u30b9\u30ad\u30cb\u30f3\u30b0\u30e1\u30c3\u30b7\u30e5\uff08\u30dc\u30fc\u30f3\uff09\u3067\u6cd5\u7dda\u60c5\u5831\u3082\u6271\u3046\n\n\u30b9\u30ad\u30cb\u30f3\u30b0\u30e1\u30c3\u30b7\u30e5\u3068\u3044\u3046\u540d\u306e\u901a\u308a\u3001\u30e2\u30c7\u30eb\u306e\u30b9\u30ad\u30f3\u3001\u3064\u307e\u308a\u76ae\u819a\u3092\u8868\u73fe\u3059\u308b\u6280\u8853\u3067\u3059\u3002\n\u305d\u308c\u3092\u5b9f\u73fe\u3059\u308b\u306e\u304c\u30dc\u30fc\u30f3\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u306d\u3002\n\n\u3056\u3063\u3068\u3057\u305f\u6d41\u308c\n\u3056\u3063\u3068\u3057\u305f\u6d41\u308c\u3092\u66f8\u304f\u3068\u3001\n\n\u89aa\u5b50\u95a2\u4fc2\u3092\u6301\u3063\u305f\u30dc\u30fc\u30f3\u90e1\u3092\u751f\u6210\u3059\u308b\n\u30dc\u30fc\u30f3\u306e\u521d\u671f\u59ff\u52e2\u3092\u8a08\u7b97\u3057\u3066\u304a\u304f\n\u30dc\u30fc\u30f3\u3092\u52d5\u304b\u3059\uff08\u5dee\u5206\u59ff\u52e2\uff09\n\u52d5\u3044\u305f\u5dee\u5206\u3068\u91cd\u307f\u4ed8\u3051\u3092\u4f7f\u3063\u3066\u3069\u308c\u304f\u3089\u3044\u76ae\u819a\uff08\u3064\u307e\u308a\u9802\u70b9\uff09\u3092\u52d5\u304b\u3059\u304b\u3092\u8a08\u7b97\u3059\u308b\n\u3042\u3068\u306f\u901a\u5e38\u306e\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\n\n\u3068\u3044\u3046\u6d41\u308c\u3067\u3059\u3002\n\u3053\u306e\u6d41\u308c\u3092\u3001\u9806\u3092\u8ffd\u3063\u3066\u898b\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u30dd\u30ea\u30b4\u30f3\u8a2d\u8a08\n\u4e0a\u8a18\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u3044\u305f\u8a18\u4e8b\u306e\u8a2d\u8a08\u3092\u3001\u4eca\u56de\u306f\u305d\u306e\u307e\u307e\u4f7f\u308f\u305b\u3066\u3082\u3089\u3044\u307e\u3057\u305f\u3002\n\n\u30dd\u30ea\u30b4\u30f3\u306e\u9802\u70b9\u4f4d\u7f6e\uff08\u8d64\uff09\u3068\u3001\u30dc\u30fc\u30f3\u306e\u91cd\u307f\u4ed8\u3051\uff08\u30aa\u30ec\u30f3\u30b8\uff09\u3001\u305d\u3057\u3066\u5f71\u97ff\u3092\u53d7\u3051\u308b\u30dc\u30fc\u30f3\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\uff08\u9752\uff09\u3067\u3059\u3002\n\u7403\u4f53\u306e\u4e0a\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u306e\u306f\u30dc\u30fc\u30f3\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3067\u3059\u3002\n\n\u3053\u3061\u3089\u306f\u30dc\u30fc\u30f3\u306e\u7d76\u5bfe\u5ea7\u6a19\u306b\u3088\u308b\u4f4d\u7f6e\u3068\u56de\u8ee2\u89d2\u5ea6\u3067\u3059\u3002\uff08\u3059\u3079\u30660\u5ea6\uff09\n\u4eca\u56de\u306f\u4e0a\u8a18\u306e\u3088\u3046\u306b\u3001\u975e\u5e38\u306b\u30b7\u30f3\u30d7\u30eb\u306a\u30dd\u30ea\u30b4\u30f3\u69cb\u6210\u3067\u3059\u3002\n\u677f\u304c5\u679a\u3042\u308b\u3060\u3051\u3067\u3059\u306d\u3002\n\u305d\u308c\u305e\u308c\u306e\u9802\u70b9\u306b\u632f\u3089\u308c\u3066\u3044\u308b\u6570\u5b57\u306f\u3001\u9802\u70b9\u4f4d\u7f6e\u3001\u30dc\u30fc\u30f3\u306e\u91cd\u307f\u4ed8\u3051\u3001\u3069\u306e\u30dc\u30fc\u30f3\u304b\u3089\u5f71\u97ff\u3092\u53d7\u3051\u308b\u304b\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9(\u203b1)\u3001\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u203b1 ... \u3053\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3001\u6700\u7d42\u7684\u306b\u306f\u30dc\u30fc\u30f3\u305d\u306e\u3082\u306e\u3067\u306f\u306a\u304f\u3001\u30dc\u30fc\u30f3\u304b\u3089\u8a08\u7b97\u3055\u308c\u305f\u300c\u5408\u6210\u884c\u5217\u300d\u3078\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3068\u306a\u308a\u307e\u3059\u3002\n\u3053\u306e\u5408\u6210\u884c\u5217\u306f\u3001\u4eca\u56de\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u306f\u30b0\u30ed\u30fc\u30d0\u30eb\u9818\u57df\u306b\u914d\u5217\u3068\u3057\u3066\u7528\u610f\u3057\u3066\u305d\u3053\u304b\u3089\u53d6\u308a\u51fa\u3057\u307e\u3059\u3002\n\u8a73\u3057\u304f\u306f\u300c\u5408\u6210\u884c\u5217\u300d\u306e\u3068\u3053\u308d\u3067\u8aac\u660e\u3057\u307e\u3059\u3002\n\n\u60c5\u5831\u5b9a\u7fa9\u90e8\u5206\u629c\u7c8b\n\u4eca\u56de\u306f\u30b5\u30f3\u30d7\u30eb\u306a\u306e\u3067\u3001\u624b\u3067\u60c5\u5831\u3092\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002\n\u901a\u5e38\u3067\u3042\u308c\u3070\u30e2\u30c7\u30ea\u30f3\u30b0\u30c4\u30fc\u30eb\u306a\u3069\u304b\u3089\u51fa\u529b\u3055\u308c\u305f\u30c7\u30fc\u30bf\u3092\u30d1\u30fc\u30b9\u3059\u308b\u306a\u308a\u3057\u3066\u30c7\u30fc\u30bf\u3092\u53d6\u308a\u51fa\u3059\u3053\u3068\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u3002\n\u305d\u306e\u5b9a\u7fa9\u90e8\u5206\u304c\u4ee5\u4e0b\u3067\u3059\u3002\n\n\n\n\u30d7\u30ed\u30d1\u30c6\u30a3\n\u610f\u5473\n\n\n\n\nposition\n\u9802\u70b9\u4f4d\u7f6e\n\n\ncolor\n\u9802\u70b9\u8272\n\n\nnormal\n\u9802\u70b9\u6cd5\u7dda\n\n\nindex\n\u9802\u70b9\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\n\n\nboneIndices\n\u5f71\u97ff\u3092\u53d7\u3051\u308b\u30dc\u30fc\u30f3\uff08\u5408\u6210\u884c\u5217\uff09\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\n\n\nweights\n\u30dc\u30fc\u30f3\u306b\u5bfe\u3059\u308b\u91cd\u307f\u4ed8\u3051\n\n\n\n\n// Plane\u306e\u5b9a\u7fa9\nvar plane = {\n    position: [\n        2.0, 0.0, 0.0,\n        2.0, 1.0, 0.0,\n        3.0, 1.0, 0.0,\n        3.0, 0.0, 0.0,\n\n        2.0, 2.0, 0.0,\n        3.0, 2.0, 0.0,\n        2.0, 3.0, 0.0,\n        3.0, 3.0, 0.0,\n\n        2.0, 4.0, 0.0,\n        3.0, 4.0, 0.0,\n        2.0, 5.0, 0.0,\n        3.0, 5.0, 0.0,\n    ],\n    color: [\n        1.0, 0.0, 0.0, 1.0,\n        0.0, 1.0, 0.0, 1.0,\n        0.0, 0.0, 1.0, 1.0,\n        0.0, 0.0, 0.0, 1.0,\n\n        1.0, 0.0, 0.0, 1.0,\n        0.0, 1.0, 0.0, 1.0,\n        0.0, 0.0, 1.0, 1.0,\n        0.0, 0.0, 0.0, 1.0,\n\n        1.0, 0.0, 0.0, 1.0,\n        0.0, 1.0, 0.0, 1.0,\n        0.0, 0.0, 1.0, 1.0,\n        0.0, 0.0, 0.0, 1.0,\n    ],\n    normal: [\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n    ],\n    index: [\n        0, 1, 2,\n        2, 3, 0,\n\n        1, 4, 5,\n        5, 2, 1,\n\n        4, 6, 7,\n        7, 5, 4,\n\n        6, 8, 9,\n        9, 7, 6,\n\n        8, 10, 11,\n        11, 9,  8,\n    ],\n    boneIndices: [\n        0, 0, 0, 0,\n        1, 2, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 0, 0,\n\n        1, 2, 0, 0,\n        1, 2, 0, 0,\n        2, 3, 0, 0,\n        2, 3, 0, 0,\n\n        3, 4, 0, 0,\n        3, 4, 0, 0,\n        4, 0, 0, 0,\n        4, 0, 0, 0,\n    ],\n    weights: [\n        1.0, 0.0, 0.0,\n        0.5, 0.5, 0.0,\n        0.5, 0.5, 0.0,\n        1.0, 0.0, 0.0,\n\n        0.5, 0.5, 0.0,\n        0.5, 0.5, 0.0,\n        0.5, 0.5, 0.0,\n        0.5, 0.5, 0.0,\n\n        0.5, 0.5, 0.0,\n        0.5, 0.5, 0.0,\n        1.0, 0.0, 0.0,\n        1.0, 0.0, 0.0,\n    ],\n};\n\n\u5f71\u97ff\u3092\u53d7\u3051\u308b\u30dc\u30fc\u30f3\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306f4\u3064\u3067\u3059\u3002\n\u304c\u3001\u3053\u308c\u306f\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u306a\u305c4\u672c\u306a\u306e\u304b\u307e\u3060\u8a73\u3057\u304f\u306f\u5206\u304b\u3063\u3066\u3044\u307e\u305b\u3093\u30fb\u30fb\u3002\n\uff08\u5f71\u97ff\u53d7\u3051\u305d\u3046\u306a\u306e\u306f2\u672c\u3060\u3057\u3001\u8a08\u7b97\u30822\u672c\u3060\u3051\u3060\u3057\uff09\n\u305f\u3093\u306b\u4efb\u610f\u306e\u6570\u306a\u306e\u304b\u3001\u305d\u308c\u4ee5\u5916\u306b\u7406\u7531\u304c\u3042\u308b\u306e\u304b\u3002\n\u898b\u304b\u3051\u305f\u7406\u7531\u3068\u3057\u3066\u306f\u3001\u30dc\u30fc\u30f3\u306e\u6570\u304c\u591a\u3059\u304e\u308b\u3068uniform\u5909\u6570\u306a\u3069\u306e\u4e0a\u9650\u3092\u8d85\u3048\u3066\u3057\u307e\u3046\u304b\u3089\u3001\u3068\u3044\u3046\u3082\u306e\u3067\u3057\u305f\u3002\n\uff08\u304c\u3001\u4eca\u56de\u306f\u305d\u3082\u305d\u3082\u9802\u70b9\u306e\u79fb\u52d5\u3092\u30b7\u30a7\u30fc\u30c0\u3067\u306f\u306a\u304fJS\u5074\u3067\u884c\u3063\u3066\u3044\u308b\u306e\u3067\u3042\u307e\u308a\u95a2\u4fc2\u3042\u308a\u307e\u305b\u3093\u304c\uff09\n\n\u5f71\u97ff\u3092\u53d7\u3051\u306a\u3044\u30dc\u30fc\u30f3\u306b\u95a2\u3057\u3066\u306f\u91cd\u307f\u3092\u300c0\u300d\u306b\n\u3055\u3066\u3001\u672c\u6570\u306f\u7f6e\u3044\u3066\u304a\u3044\u3066\u3001\u305d\u3082\u305d\u3082\u5f71\u97ff\u3092\u53d7\u3051\u308b\u30dc\u30fc\u30f3\u304c\u3072\u3068\u3064\u306a\u3089\u5b9a\u7fa9\u3082\u3072\u3068\u3064\u3067\u3044\u3044\u3058\u3083\u306a\u3044\u304b\u3001\u3068\u601d\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u3067\u3059\u304c\u3001\u5b9f\u969b\u306b\u306f\u6570\u3092\u7d71\u4e00\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u3001\u4e0d\u8981\u306aif\u6587\u306b\u3088\u308b\u5206\u5c90\u304c\u3044\u3089\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\u3053\u3046\u3057\u305f\u6700\u9069\u5316\u304c\u3069\u3046\u3084\u3089\u50cd\u3044\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\uff08\u305f\u3060\u3001\u3059\u3067\u306b\u66f8\u3044\u305f\u3088\u3046\u306b\u4eca\u56de\u306fJS\u3067\u3084\u308b\u306e\u3067\u3042\u307e\u308a\u610f\u5473\u306f\u3042\u308a\u307e\u305b\u3093\uff09\n\u305d\u3057\u3066weights\u30920\u306b\u3057\u3066\u304a\u3051\u3070\u3001\u5b9f\u8cea\u30dc\u30fc\u30f3\u306e\u5f71\u97ff\u306f\u53d7\u3051\u306a\u304f\u306a\u308b\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\n4\u672c\u76ee\u306e\u30dc\u30fc\u30f3\u306f1.0 - weight1 - weight2 - weight3\u3067\u6c42\u3081\u308b\n\u3055\u3089\u306b\u3088\u30fc\u304f\u898b\u3066\u307f\u308b\u3068\u3001weights\u306e\u5b9a\u7fa9\u306f\u5b9f\u306f3\u3064\u305a\u3064\u306e\u6570\u5024\u306e\u307f\u3067\u3059\u3002\n\u3053\u308c\u306f\u306a\u3093\u3067\u304b\u3068\u3044\u3046\u3068\u3001\u30dc\u30fc\u30f3\u306e\u91cd\u307f\u4ed8\u3051\u306e\u4e2d\u30674\u672c\u76ee\u306f1.0 - weight1 - weight2 - weight3\u3068\u3057\u3066\u30011.0\u304b\u3089\u306e\u5dee\u5206\u306b\u3088\u3063\u3066\u8a08\u7b97\u3059\u308b\u304b\u3089\u3067\u3059\u3002\n\u304a\u305d\u3089\u304f\u3067\u3059\u304c\u3001\u91cd\u307f\u4ed8\u3051\u306f\u5408\u8a08\u30671.0\u3092\u8d85\u3048\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3082\u306e\u306a\u306e\u3067\u3057\u3087\u3046\u3002\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u3001\u5fc5\u305a\u5408\u8a08\u5024\u304c1\u3092\u8d85\u3048\u308b\u3053\u3068\u304c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\n\u30dc\u30fc\u30f3\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u3068\u521d\u671f\u59ff\u52e2\u884c\u5217\n\u3055\u3066\u3001\u7d9a\u3044\u3066\u306f\u30dc\u30fc\u30f3\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u3068\u521d\u671f\u59ff\u52e2\u884c\u5217\u3067\u3059\u3002\n\u3053\u308c\u3089\u306e\u884c\u5217\u304c\u306a\u306b\u3092\u3057\u3066\u304f\u308c\u308b\u304b\u3002\n\u30dc\u30fc\u30f3\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217 \u306f\u3001\u7d76\u5bfe\u5ea7\u6a19\u3067\u4e0e\u3048\u3089\u308c\u305f\u521d\u671f\u59ff\u52e2\u3092\u306a\u304b\u3063\u305f\u3053\u3068\u306b\u3059\u308b\u884c\u5217\u3067\u3059\u3002\n\u306a\u304b\u3063\u305f\u3053\u3068\u306b\u3059\u308b\u884c\u5217\u3068\u3044\u3048\u3070\u9006\u884c\u5217\u3067\u3059\u306d\u3002\n\n\u30dc\u30fc\u30f3\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u306f\u9006\u884c\u5217\n\u4f8b\u3048\u3070\u3001x: 2.5, y: 1.5\u306e\u4f4d\u7f6e\u306b\u79fb\u52d5\u3059\u308b\u884c\u5217\u3092\u306a\u304b\u3063\u305f\u3053\u3068\u306b\u3059\u308b\u306b\u306f\u3001x: -2.5, y: -1.5\u3092\u8a08\u7b97\u3057\u3066\u3084\u308c\u3070\u3044\u3044\u3067\u3059\u306d\u3002\n\u5b9f\u969b\u306e\u884c\u5217\u306f\u3082\u3063\u3068\u8907\u96d1\u306a\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u3001\u3053\u3046\u5358\u7d14\u306b\u306f\u884c\u304d\u307e\u305b\u3093\u3002\n\u305d\u3053\u3067\u767b\u5834\u3059\u308b\u306e\u304c\u9006\u884c\u5217\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\u9006\u884c\u5217\u306f\u3001\u307e\u3055\u306b\u3053\u306e\u300c\u306a\u304b\u3063\u305f\u3053\u3068\u300d\u306b\u3057\u3066\u304f\u308c\u308b\u884c\u5217\u3092\u751f\u6210\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\n\u3068\u3044\u3046\u3053\u3068\u3092\u8e0f\u307e\u3048\u3066\u30dc\u30fc\u30f3\u306e\u521d\u671f\u5316\u90e8\u5206\u306e\u51e6\u7406\u3092\u898b\u3066\u307f\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n// \u4e2d\u7565\ninit: function (position) {\n    this.matrix       = mat4();\n    this.matrixBone   = mat4();\n    this.matrixComb   = mat4();\n    this.matrixInit   = mat4.translate(mat4(), position);\n    this.matrixOffset = mat4.inverse(this.matrixInit);\n    this.children = [];\n},\n// \u4e2d\u7565\n\n\u3053\u306e\u4e2d\u3067this.matrixOffset = mat4.inverse(this.matrixInit);\u3068\u306a\u3063\u3066\u3044\u308b\u306e\u304c\u305d\u306e\u90e8\u5206\u3067\u3059\u306d\u3002\n\u521d\u671f\u5316\u6642\u306b\u6e21\u3055\u308c\u308bposition\u5f15\u6570\u306f\u7d76\u5bfe\u5ea7\u6a19\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\u306a\u306e\u3067\u305d\u306e\u307e\u307e\u9006\u884c\u5217\u3092\u6c42\u3081\u3066\u4fdd\u6301\u3057\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u306d\u3002\n\n\u4f59\u8ac7\n\u3061\u306a\u307f\u306b\u3053\u3053\u3067\u767b\u5834\u3057\u3066\u3044\u308bmat4\u306f\u81ea\u4f5c\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002\nGLSL\u3068\u4f3c\u305f\u3088\u3046\u306a\u64cd\u4f5c\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u76ee\u6a19\u3068\u3057\u3066\u3044\u308b\u3082\u306e\u3067\u3059\u3002\n\u306a\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nMathJS\nvar v1 = vec3(0, 1, 0); // 3\u8981\u7d20\u306e\u30d9\u30af\u30c8\u30eb\nvar v2 = vec2(0, 1);\nvar v3 = vec3(v2, 0); // vec2\u6210\u5206\u3092\u6d41\u7528\u3057\u3066vec3\u3092\u4f5c\u308b\nvar m1 = mat4(); // \u5f15\u6570\u306a\u3057\u3067\u5358\u4f4d\u884c\u5217\u3092\u4f5c\u308b\nvar m2 = mat4(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16); // \u5f15\u6570\u3092\u4e0e\u3048\u3066\u521d\u671f\u5316\nvar m3 = mat4(m2); // \u540c\u3058\u5024\u3067\u8907\u88fd\n\nvar result = mat4();\n\n// OpenGL\u306e\u3088\u3046\u306b\u7d50\u679c\u3092\u5f97\u308b\u884c\u5217\u3092\u7b2c3\u5f15\u6570\u306b\u6307\u5b9a\u3059\u308b\nmat4.multiply(m1, m2, result);\n\n// \u623b\u308a\u5024\u3068\u3057\u3066\u3082\u8a08\u7b97\u3067\u304d\u308b\n// result = mat4.multiply(m1, m2);\n\n\n\n\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u306e\u610f\u5473\n\u306a\u305c\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u304c\u5fc5\u8981\u306a\u306e\u304b\u3002\u305d\u308c\u306f\u3001\u30dc\u30fc\u30f3\u306e\u610f\u5473\u3092\u8003\u3048\u308b\u3068\u898b\u3048\u3066\u304d\u307e\u3059\u3002\n\uff08Blender\u306a\u3069\u306e\u30e2\u30c7\u30ea\u30f3\u30b0\u30c4\u30fc\u30eb\u3092\u4f7f\u3063\u305f\u3053\u3068\u304c\u3042\u308b\u4eba\u3067\u3042\u308c\u3070\u60f3\u50cf\u3057\u3084\u3059\u3044\u3068\u601d\u3044\u307e\u3059\uff09\n\u30dc\u30fc\u30f3\u306f\u3001\u305d\u308c\u5358\u4f53\u3067\u3082\u4f4d\u7f6e\u3084\u59ff\u52e2\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\n\u30e2\u30c7\u30ea\u30f3\u30b0\u30c4\u30fc\u30eb\u3067\u3082\u8996\u899a\u7684\u306b\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u5206\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u305d\u3057\u3066\u6700\u521d\u306f\u30e2\u30c7\u30eb\u306b\u5bfe\u3057\u3066\u30dc\u30fc\u30f3\u306f\u7d10\u4ed8\u3044\u3066\u3044\u307e\u305b\u3093\u3002\uff08\u30c4\u30fc\u30eb\u4e0a\u3067\u95a2\u9023\u4ed8\u3051\u3092\u884c\u3046\u5fc5\u8981\u304c\u3042\u308b\uff09\n\u306a\u306b\u304c\u8a00\u3044\u305f\u3044\u304b\u3068\u8a00\u3046\u3068\u3001 \u30dc\u30fc\u30f3\u306e\u4f4d\u7f6e\u3068\u30e2\u30c7\u30eb\u306e\u4f4d\u7f6e\u306b\u306f\u672c\u6765\u306f\u95a2\u9023\u6027\u304c\u306a\u3044 \u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\u30c4\u30fc\u30eb\u4e0a\u3067\u95a2\u9023\u4ed8\u3051\u3092\u884c\u3063\u305f\u3068\u304d\u306b\u521d\u3081\u3066\u95a2\u9023\u6027\u304c\u751f\u307e\u308c\u307e\u3059\u3002\n\u305d\u3057\u3066\u305d\u306e\u3068\u304d\u306e\u30e2\u30c7\u30eb\u306e\u72b6\u614b\u3068\u30dc\u30fc\u30f3\u306e\u72b6\u614b\u3092\u95a2\u9023\u4ed8\u3051\u3001\u305d\u308c\u3092 \u521d\u671f\u59ff\u52e2 \u3068\u3057\u3066\u767b\u9332\u3059\u308b\u308f\u3051\u3067\u3059\u3002\n\u521d\u671f\u59ff\u52e2\u3092\u6c7a\u3081\u3066\u304a\u304b\u306a\u3044\u3068\u3001\u5f8c\u3005\u30dc\u30fc\u30f3\u3092\u52d5\u304b\u3057\u305f\u3068\u304d\u306b\u95a2\u9023\u4ed8\u3051\u3089\u308c\u305f\u30e2\u30c7\u30eb\u3092\u3069\u3046\u52d5\u304b\u305b\u3070\u3044\u3044\u304b\u5206\u304b\u3089\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3088\u306d\u3002\n\n\u30de\u30ea\u30aa\u30cd\u30c3\u30c8\u306b\u4f8b\u3048\u3066\u307f\u308b\n\u3075\u3068\u601d\u3044\u3064\u3044\u305f\u4f8b\u3048\u3092\u3057\u3066\u307f\u307e\u3059\u3002\n\u307e\u305a\u3001\u30de\u30ea\u30aa\u30cd\u30c3\u30c8\u3092\u60f3\u50cf\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30de\u30ea\u30aa\u30cd\u30c3\u30c8\u306f\u7cf8\u3067\u7d50\u3070\u308c\u3001\u96e2\u308c\u305f\u4f4d\u7f6e\uff08\u4e0a\u90e8\uff09\u306b\u3042\u308b\u677f\u3092\u4eba\u9593\u304c\u64cd\u4f5c\u3059\u308b\u3053\u3068\u3067\u3001\u307e\u308b\u3067\u751f\u304d\u3066\u3044\u308b\u304b\u306e\u3088\u3046\u306b\u52d5\u304b\u3057\u307e\u3059\u3088\u306d\u3002\n\n\u2191\u3053\u3093\u306a\u611f\u3058\u306e\u3082\u306e\u3067\u3059\u3002\uff08\u3053\u3061\u3089\u306e\u8a18\u4e8b\u304b\u3089\u5f15\u7528\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\uff09\n\u3053\u306e\u7cf8\u304c\u95a2\u9023\u4ed8\u3051\u3067\u3001\u677f\u304c\u30dc\u30fc\u30f3\u306e\u4f4d\u7f6e(\u203b1)\u3067\u3059\u3002\n\u677f\u3092\u5c11\u3057\u3060\u3051\u4e0a\u306b\u4e0a\u3052\u308b\u3068\u3001\u30de\u30ea\u30aa\u30cd\u30c3\u30c8\u3082\u5c11\u3057\u3060\u3051\u4e0a\u306b\u4e0a\u304c\u308a\u307e\u3059\u3002\n\u3069\u308c\u3060\u3051\u4e0a\u304c\u308b\u304b\u306f\u677f\u3092\u3069\u308c\u3060\u3051\u4e0a\u3052\u305f\u304b\u306b\u3088\u308a\u307e\u3059\u306d\u3002\n\u3053\u308c\u304c\u300c\u5dee\u5206\u300d\u3067\u3059\u3002\n\u305d\u3057\u3066\u5dee\u5206\u306f\u3001\u300c\u521d\u671f\u4f4d\u7f6e\u304b\u3089\u3069\u308c\u3060\u3051\u52d5\u3044\u305f\u304b\u300d\u3067\u6c42\u3081\u3089\u308c\u307e\u3059\u306d\u3002\n\u3053\u306e\u3053\u3068\u304b\u3089\u3082\u5206\u304b\u308b\u3088\u3046\u306b\u3001\u300c\u521d\u671f\u59ff\u52e2\u300d\u306f\u5927\u4e8b\u306a\u5f79\u5272\u304c\u3042\u308b\u306e\u3067\u3059\u3002\n\u4eee\u306b\u3001\u30de\u30ea\u30aa\u30cd\u30c3\u30c8\u304c\u6b63\u5e38\u306a\u72b6\u614b\u3067\u306f\u306a\u304f\u3001\u5909\u306a\u59ff\u52e2\u306e\u307e\u307e\u7cf8\u3068\u7d50\u3073\u4ed8\u3051\u3089\u308c\u3066\u3057\u307e\u3063\u305f\u3089\u3002\n\u64cd\u4f5c\u3059\u308b\u305f\u3081\u306e\u677f\u3092\u52d5\u304b\u3057\u3066\u3082\u3001\u601d\u3044\u901a\u308a\u306b\u306f\u52d5\u304d\u307e\u305b\u3093\u3088\u306d\u3002\n\u306a\u306e\u3067\u3001\u521d\u671f\u59ff\u52e2\u3068\u3057\u3066\u6b63\u3057\u3044\u4f4d\u7f6e\u3092\u5b9a\u7fa9\u3057\u305f\u4e0a\u3067\u95a2\u9023\u4ed8\u3051\u3092\u884c\u3046\u306e\u3067\u3059\u3002\n\u203b1 ... \u901a\u5e38\u306e\u30e2\u30c7\u30ea\u30f3\u30b0\u30c4\u30fc\u30eb\u3067\u306f\u30dc\u30fc\u30f3\u306f\u30e2\u30c7\u30eb\u306b\u91cd\u306a\u308b\u3088\u3046\u306b\u3059\u308b\u306e\u304c\u666e\u901a\u3067\u3059\u304c\u3001\u96e2\u308c\u3066\u3044\u3066\u3082\u540c\u69d8\u306e\u52d5\u304d\u3092\u3059\u308b\u306e\u3067\u3042\u304f\u307e\u3067\u4f8b\u3048\u3067\u3059\u3002\n\n\u89aa\u7a7a\u9593\u304b\u3089\u306e\u76f8\u5bfe\u5ea7\u6a19\u306b\u5909\u63db\n\u4ee5\u4e0b\u306e\u30d8\u30eb\u30d1\u30fc\u30e1\u30bd\u30c3\u30c9\u3092\u898b\u3066\u304f\u3060\u3055\u3044\u3002\n\ncalc-relative-mat\n/**\n * \u5404\u7a2e\u30dc\u30fc\u30f3\u3092\u89aa\u7a7a\u9593\u306e\u76f8\u5bfe\u4f4d\u7f6e\u306b\u5909\u63db\n */\nBone.calcRelativeMat = function (bone, parentOffsetMat) {\n    bone.children.forEach(function (childBone, idx) {\n        Bone.calcRelativeMat(childBone, bone.matrixOffset);\n    });\n\n    if (parentOffsetMat) {\n        mat4.multiply(bone.matrixInit, parentOffsteMat, bone.matrixInit);\n    }\n};\n\n\n\u3084\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u4e00\u8a00\u3067\u8a00\u3046\u3068\u3001\u300c\u5b50\u30dc\u30fc\u30f3\u306e\u5ea7\u6a19\u3092\u89aa\u7a7a\u9593\u5ea7\u6a19\u3078\u5909\u63db\u300d\u3067\u3059\u3002\nmat4.multiply(bone.matrixInit, parentOffsetMat, bone.matrixInit);\u306e\u90e8\u5206\u3067\u3059\u306d\u3002\n\n\u639b\u3051\u308b\u9806\u756a\u306b\u6ce8\u610f\n\u884c\u5217\u306b\u8a73\u3057\u3044\u4eba\u3067\u3042\u308c\u3070\u300c\u304a\u3084\uff1f\u300d\u3068\u601d\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u306a\u305c\u306a\u3089\u3001OpenGL\u7cfb\u306e\u5834\u5408\u306f\u89aa\u7a7a\u9593\u5ea7\u6a19\u3078\u306e\u5909\u63db\u306e\u969b\u306f\u3001\u305d\u306e\u5ea7\u6a19\u5909\u63db\u884c\u5217\u3092 \u5de6\u5074 \u306b\u639b\u3051\u308b\u304b\u3089\u3067\u3059\u3002\n\u304c\u3001\u898b\u3066\u3082\u3089\u3046\u3068\u5206\u304b\u308b\u3088\u3046\u306b\u3001parentOffsetMat\u306f\u53f3\u5074\u306b\u6765\u3066\u3044\u307e\u3059\u3002\n\u305d\u3082\u305d\u3082\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u306f \u9006\u884c\u5217 \u3067\u3059\u3002\n\u306a\u306e\u3067\u3001\u901a\u5e38\u901a\u308a\u306b\u8a08\u7b97\u3057\u3066\u3057\u307e\u3046\u3068\u300c\u9006\u306e\u79fb\u52d5\u300d\u3092\u3057\u3066\u3057\u307e\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\u3060\u304b\u3089\u53cd\u5bfe\u304b\u3089\u639b\u3051\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\n\u521d\u671f\u59ff\u52e2\u884c\u5217\u3092\u4e0a\u66f8\u304d\n\u3055\u3089\u306b\u898b\u3066\u3082\u3089\u3046\u3068\u5206\u304b\u308a\u307e\u3059\u304c\u3001matrixInit\uff08\u521d\u671f\u59ff\u52e2\u7528\u884c\u5217\uff09\u81ea\u4f53\u3092\u4e0a\u66f8\u304d\u3057\u3066\u3044\u307e\u3059\u3002\n\u3064\u307e\u308a\u3001\u521d\u671f\u59ff\u52e2\u306f\u300c\u89aa\u7a7a\u9593\u304b\u3089\u306e\u76f8\u5bfe\u5ea7\u6a19\u300d\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308b\u308f\u3051\u3067\u3059\u3002\n\u305f\u3060\u3001\u7d76\u5bfe\u5ea7\u6a19\u3078\u623b\u3059\u305f\u3081\u306e\u884c\u5217\u3092\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u3068\u3057\u3066\u3059\u3067\u306b\u8a08\u7b97\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3042\u3068\u3042\u3068\u56f0\u308b\u3053\u3068\u306f\u306a\u3044\u306e\u3067\u3059\u3002\n\n\u5dee\u5206\u59ff\u52e2\n\u7d9a\u3044\u3066\u5dee\u5206\u59ff\u52e2\u3067\u3059\u3002\n\u3061\u306a\u307f\u306b\u4eca\u307e\u3067\u306e\u6d41\u308c\u3092\u898b\u3066\u307f\u308b\u3068\u3001\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u30dc\u30fc\u30f3\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\n\u89aa\u7a7a\u9593\u5ea7\u6a19\u3067\u306e\u521d\u671f\u59ff\u52e2\n\u30dc\u30fc\u30f3\u9023\u7d50\n\n\u3053\u308c\u304c\u306a\u306b\u3092\u610f\u5473\u3059\u308b\u304b\u3068\u3044\u3046\u3068\u3001\u30dc\u30fc\u30f3\u306e\u521d\u671f\u5316\u304c\u7d42\u308f\u3063\u305f\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\u3053\u3053\u304b\u3089\u306f \u30dc\u30fc\u30f3\u3092\u3069\u3046\u52d5\u304b\u3059\u304b \u3092\u8a08\u7b97\u3059\u308b\u308f\u3051\u3067\u3059\u3002\n\uff08\u306a\u306e\u3067\u6975\u7aef\u306a\u8a71\u3001\u30dc\u30fc\u30f3\u3092\u307e\u3063\u305f\u304f\u52d5\u304b\u3055\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u3001\u3053\u3053\u3092\u98db\u3070\u3057\u3066\u6b21\u306e\u300c\u5408\u6210\u884c\u5217\u300d\u3092\u751f\u6210\u3057\u3066\u3082\u554f\u984c\u306a\u304f\u52d5\u304f\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\uff09\n\n\u5dee\u5206\u3092\u8a08\u7b97\u3059\u308b\n\u3067\u306f\u5b9f\u969b\u306b\u30dc\u30fc\u30f3\u3092\u52d5\u304b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u4eca\u56de\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u306f\u5358\u7d14\u306b\u3001\u3059\u3079\u3066\u306e\u30dc\u30fc\u30f3\u3092\u5c11\u3057\u3060\u3051\u56de\u8ee2\u3055\u305b\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u30dc\u30fc\u30f3\u306f\u3044\u308f\u3086\u308b\u30c4\u30ea\u30fc\u69cb\u9020\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u3059\u3079\u3066\u306e\u30dc\u30fc\u30f3\u3092\u540c\u3058\u89d2\u5ea6\u3060\u3051\u66f2\u3052\u3066\u3044\u3051\u3070\u3001\u81ea\u52d5\u7684\u306b\u30ab\u30fc\u30d6\u3092\u63cf\u304f\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\n\n\u56de\u8ee2\u3092\u8a08\u7b97\n\ndelta\n// count\u306f\u30d5\u30ec\u30fc\u30e0\u3054\u3068\u306b\u5897\u52a0\u3057\u3066\u3044\u304f\nvar s = Math.sin(count) / 5;\n\nfor (var i = 0; i < bones.length; i++) {\n    // `s`\u89d2\u5ea6\u3060\u3051\u5168\u30dc\u30fc\u30f3\u3092\u56de\u8ee2\u3055\u305b\u308b\n    bones[i].rotate(s, axis);\n}\n\n// \u5408\u6210\u884c\u5217\u3092\u66f4\u65b0\nBone.updateBone(bones[0], global);\n\n\n\n\u5408\u6210\u884c\u5217\n\u3055\u3066\u3001\u3044\u3088\u3044\u3088\u4ed5\u4e0a\u3052\u3067\u3059\u3002\n\u4eca\u307e\u3067\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u305f\u884c\u5217\u305f\u3061\u3092\u4f7f\u3063\u3066\u3001\u6700\u7d42\u7684\u306b\u4f7f\u3046\u5408\u6210\u884c\u5217\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u5408\u6210\u884c\u5217\u306f\u89aa\u30dc\u30fc\u30f3\u306e\u5ea7\u6a19\u3082\u5fc5\u8981\u306b\u306a\u308b\u306e\u3067\u3001\u30d8\u30eb\u30d1\u30fc\u30e1\u30bd\u30c3\u30c9\u3092\u4f5c\u308a\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\nupdateBone\n/**\n * \u5404\u7a2e\u30dc\u30fc\u30f3\u306e\u5408\u6210\u884c\u5217\u3092\u751f\u6210\n */\nBone.updateBone = function (bone, parentWorldMat) {\n    // \u89aa\u306e\u59ff\u52e2\u884c\u5217\uff08\u30dc\u30fc\u30f3\u884c\u5217\uff09\u3092\u5de6\u304b\u3089\u81ea\u8eab\u306e\u59ff\u52e2\u884c\u5217\u306b\u639b\u3051\u308b\n    mat4.multiply(parentWorldMat, bone.matrixBone, bone.matrixBone);\n\n    // \u81ea\u8eab\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u3092\u53f3\u304b\u3089\u639b\u3051\u3066\u5408\u6210\u884c\u5217\u3092\u751f\u6210\n    mat4.multiply(bone.matrixBone, bone.matrixOffset, bone.matrixComb);\n\n    bone.children.forEach(function (childBone, idx) {\n        Bone.updateBone(childBone, bone.matrixBone);\n    });\n};\n\n\n\u89aa\u306e\u30dc\u30fc\u30f3\u884c\u5217\u3092\u3001\u81ea\u8eab\u306e\u30dc\u30fc\u30f3\u884c\u5217\u306b\u639b\u3051\u3066\u3001\u3055\u3089\u306b\u81ea\u8eab\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u3092\u639b\u3051\u307e\u3059\u3002\n\uff08\u304b\u3051\u308b\u9806\u756a\u306b\u6ce8\u610f\uff09\n\u306a\u306b\u3092\u3057\u3066\u3044\u308b\u304b\u3068\u3044\u3046\u3068\u3001\u305f\u3093\u306b \u7d76\u5bfe\u5ea7\u6a19\u306b\u623b\u3059 \u3068\u3044\u3046\u3053\u3068\u3092\u3084\u3063\u3066\u3044\u307e\u3059\u3002\n\u89aa\u306e\u5ea7\u6a19\u5909\u63db\u884c\u5217\u3092\u639b\u3051\u308b\u3053\u3068\u3067\u3001\u89aa\u306e\u7a7a\u9593\u3067\u306e\u5ea7\u6a19\u7cfb\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u308c\u3092\u518d\u5e30\u7684\u306b\u7e70\u308a\u8fd4\u305b\u3070\u3001\u3059\u3079\u3066\u306e\u30dc\u30fc\u30f3\u304c\u30ef\u30fc\u30eb\u30c9\u7a7a\u9593\u4e0a\u3067\u306e\u7d76\u5bfe\u5ea7\u6a19\u3068\u306a\u308a\u307e\u3059\u3002\n\u305d\u3057\u3066\u6700\u5f8c\u306b\u3001\u4e00\u756a\u6700\u521d\u306b\u8a08\u7b97\u3057\u3066\u304a\u3044\u305f \u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217 \u3092\u304b\u3051\u308b\u3053\u3068\u3067\u3001\u30dc\u30fc\u30f3\u306e\u521d\u671f\u4f4d\u7f6e\u304b\u3089\u306e\u5dee\u5206\u4f4d\u7f6e\u306b\u30dc\u30fc\u30f3\u304c\u79fb\u52d5\u3059\u308b\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\n\u30dc\u30fc\u30f3\u884c\u5217\uff1f\n\u5b9f\u306f\u4e0a\u8a18\u307e\u3067\u3067\u3001\u30dc\u30fc\u30f3\u884c\u5217\u3092\u8a08\u7b97\u3057\u3066\u3044\u308b\u7b87\u6240\u304c\u3042\u308a\u307e\u305b\u3093\u3002\n\u3053\u308c\u306f\u306a\u306b\u3092\u3057\u3066\u3044\u308b\u304b\u3068\u3044\u3046\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30dc\u30fc\u30f3\u30af\u30e9\u30b9\u306e\u30e1\u30bd\u30c3\u30c9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\uff08\u4f8b\u306f\u56de\u8ee2\uff09\n\nrotate\n//\u3000\u4e2d\u7565\nrotate: function (angle, axis) {\n    mat4.rotate(this.matrix, angle, axis, this.matrix);\n    this.updateMatrix();\n},\n// \u4e2d\u7565\nupdateMatrix: function () {\n    mat4.multiply(this.matrixInit, this.matrix, this.matrixBone);\n},\n\n\nthis.matrix\u306f\u3001\u3061\u3087\u3063\u3068\u524d\u306b\u51fa\u3066\u304d\u305f\u5dee\u5206\u884c\u5217\u3092\u8868\u3057\u307e\u3059\u3002\n\u3053\u308c\u306b\u3001\u3069\u3046\u3044\u3046\u79fb\u52d5\u3084\u56de\u8ee2\u304c\u884c\u308f\u308c\u305f\u304b\u3092\u4fdd\u6301\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u305d\u3057\u3066\u6700\u5f8c\u306ethis.updateMatrix\u30e1\u30bd\u30c3\u30c9\u3067\u3001\u89aa\u306b\u5bfe\u3059\u308b\u76f8\u5bfe\u884c\u5217\u3068\u306a\u3063\u305fmatrixInit\u3068\u304b\u3051\u3066\u3084\u308b\u3053\u3068\u3067\u3001\u89aa\u7a7a\u9593\u304b\u3089\u898b\u305f\u4f4d\u7f6e\u304cupdate\u3055\u308c\u307e\u3059\u3002\n\n\u5408\u6210\u884c\u5217\u306e\u610f\u5473\n\u5408\u6210\u884c\u5217\u306f\u6700\u7d42\u7684\u306b \u9802\u70b9\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u884c\u5217 \u3067\u3059\u3002\n\u4eee\u306b\u30dc\u30fc\u30f3\u3092\u306a\u306b\u3082\u52d5\u304b\u3057\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u8003\u3048\u308b\u3068\u5206\u304b\u308a\u3084\u3059\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\uff08\u305d\u3057\u3066\u30eb\u30fc\u30c8\u30dc\u30fc\u30f3\u306e\u521d\u671f\u4f4d\u7f6e\u306f\u9069\u5f53\u306b\uff0815, 8\uff09\u3068\u304b\u3068\u8003\u3048\u3066\u304f\u3060\u3055\u3044\uff09\n\u306a\u306b\u3082\u3057\u3066\u3044\u306a\u3044\u308f\u3051\u3067\u3059\u304b\u3089\u3001\u666e\u901a\u306f\u30e2\u30c7\u30eb\uff08\u9802\u70b9\uff09\u306b\u5909\u5316\u306f\u3042\u308a\u307e\u305b\u3093\u306d\u3002\n\u8a08\u7b97\u3057\u3066\u3082\u5909\u5316\u304c\u306a\u3044\u884c\u5217\u30fb\u30fb\u30fb\u3064\u307e\u308a\u3001\u5408\u6210\u884c\u5217\u3092\u8a08\u7b97\u3059\u308b\u3068 \u5358\u4f4d\u884c\u5217 \u3068\u306a\u308a\u307e\u3059\u3002\n\u3053\u308c\u304c\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u3092\u6c42\u3081\u3066\u304a\u304f\u610f\u5473\u3067\u3059\u3002\n\u3042\u3068\u306f\u3001\u30dc\u30fc\u30f3\u3092\u52d5\u304b\u3057\u305f\u3044\u3088\u3046\u306b\u5e73\u884c\u79fb\u52d5\u3001\u56de\u8ee2\u3092\u3055\u305b\u3066\u3044\u3051\u3070\u3001\u5358\u4f4d\u884c\u5217\u306b\u5bfe\u3057\u3066\u5f90\u3005\u306b\u5909\u5316\u304c\u84c4\u7a4d\u3055\u308c\u3066\u3044\u304d\u307e\u3059\u3002\n\u7d50\u679c\u3001\u30dc\u30fc\u30f3\u304c\u52d5\u304f\u3053\u3068\u3067\u3001\u95a2\u9023\u4ed8\u3051\u3089\u308c\u305f\u30e2\u30c7\u30eb\u304c\u52d5\u304f\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\n\u9802\u70b9\u306b\u30dc\u30fc\u30f3\u306e\u5f71\u97ff\u3092\u53cd\u6620\u3055\u305b\u308b\n\u3055\u3066\u3001\u30dc\u30fc\u30f3\u306e\u8a08\u7b97\u306f\u4ee5\u4e0a\u3067\u3059\u3002\n\u305f\u3060\u3001\u30dc\u30fc\u30f3\u306e\u8a08\u7b97\u304c\u7d42\u308f\u3063\u3066\u3082\u3001\u305d\u308c\u3092\u5404\u7a2e\u9802\u70b9\u306b\u53cd\u6620\u3057\u306a\u3044\u3068\u307e\u3063\u305f\u304f\u610f\u5473\u304c\u3042\u308a\u307e\u305b\u3093\u306d\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u8a08\u7b97\u3055\u308c\u305f\u30dc\u30fc\u30f3\u3092\u9802\u70b9\u306b\u9069\u7528\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\uff08\u3061\u306a\u307f\u306b\u30dc\u30fc\u30f3\u306e\u5408\u6210\u884c\u5217\u306e\u9069\u7528\u306f\u3001\u4eca\u56de\u306fJS\u4e0a\u3067\u884c\u3063\u3066\u3044\u307e\u3059\u3002\u9802\u70b9\u3092\u3044\u3058\u308b\u306e\u3060\u304b\u3089\u672c\u6765\u306f\u9802\u70b9\u30b7\u30a7\u30fc\u30c0\u306e\u4ed5\u4e8b\u3060\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u77e5\u8b58\u4e0d\u8db3\u306a\u306e\u3068WebGL\u3067\u306e\u53d6\u308a\u6271\u3044\u304b\u305f\u304c\u5206\u304b\u3089\u305a\u3001\u4eca\u56de\u306fJS\u3067\u884c\u3063\u3066\u3044\u307e\u3059\uff09\n\u307e\u305a\u306f\u30b3\u30fc\u30c9\u304b\u3089\u3002\n\napply-bone-weight\nvar newPosition = [];\nvar newNormal   = [];\nfor (var i = 0; i < 12; i++) {\n    var idxBase = i * 3;\n    var idx0 = idxBase + 0;\n    var idx1 = idxBase + 1;\n    var idx2 = idxBase + 2;\n\n    var comb1 = [\n        mat4(),\n        mat4(),\n        mat4(),\n        mat4()\n    ];\n    var comb2 = mat4.zero;\n\n    for (var j = 0; j < 3; j++) {\n        var boneIdx   = i * 4 + j;\n        var weightIdx = i * 3 + j;\n        mat4.multiplyScalar(combMatArr[plane.boneIndices[boneIdx]], plane.weights[weightIdx], comb1[j]);\n    }\n    var weight = 1.0 - (plane.weights[i * 3 + 0] +\n                        plane.weights[i * 3 + 1] +\n                        plane.weights[i * 3 + 2]);\n    mat4.multiplyScalar(combMatArr[plane.boneIndices[i * 4 + 3]], weight, comb1[3]);\n\n    for (var k = 0; k < 4; k++) {\n        mat4.add(comb2, comb1[k], comb2);\n    }\n\n    var pos = vec3(plane.position[idx0],\n                   plane.position[idx1],\n                   plane.position[idx2]);\n\n    vec3.applyMatrix4(pos, comb2, pos);\n    newPosition[idx0] = pos.x;\n    newPosition[idx1] = pos.y;\n    newPosition[idx2] = pos.z;\n\n    var nor = vec3(plane.normal[idx0],\n                   plane.normal[idx1],\n                   plane.normal[idx2]);\n    mat4.inverse(comb2, comb2);\n\n    vec3.applyMatrix4FromRight(nor, comb2, nor);\n    newNormal[idx0] = nor.x;\n    newNormal[idx1] = nor.y;\n    newNormal[idx2] = nor.z;\n}\n\n\n\u307e\u305a\u3001\u306a\u306b\u3092\u3084\u3063\u3066\u3044\u308b\u304b\u5927\u307e\u304b\u306a\u6d41\u308c\u3092\u66f8\u304f\u3068\u3001\n\n\u5168\u9802\u70b9\uff08\u30b5\u30f3\u30d7\u30eb\u3067\u306f12\u9802\u70b9\uff09\u305d\u308c\u305e\u308c\u306b\u8a08\u7b97\u3092\u884c\u3046\n\u9802\u70b9\u60c5\u5831\u3068\u3057\u3066\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u5024\u3092\u5143\u306b\u3001\u30dc\u30fc\u30f3\u306e\u5408\u6210\u884c\u5217\u306e\u91cd\u307f\u4ed8\u3051\u3092\u8a08\u7b97\u3059\u308b\uff08multiplyScalar\uff09\n\u91cd\u307f\u4ed8\u3051\u3092\u3057\u305f\u5408\u6210\u884c\u5217\u306e\u5408\u8a08\u3092\u8a08\u7b97\u3059\u308b\uff08add\uff09\n\u5f97\u305f\u884c\u5217\u3092\u9802\u70b9\u3001\u6cd5\u7dda\u305d\u308c\u305e\u308c\u306b\u639b\u3051\u308b\n\n\u9806\u756a\u306b\u898b\u3066\u884c\u304d\u307e\u3057\u3087\u3046\u3002\n\n\u9802\u70b9\u3054\u3068\u306b\u8a08\u7b97\u3092\u884c\u3046\n\u4eca\u56de\u306e\u30b5\u30f3\u30d7\u30eb\u306f\u7c21\u5358\u306b\u3059\u308b\u305f\u3081\u3001\u5168\u90e8\u306712\u9802\u70b9\u3067\u3059\u3002\n\u306a\u306e\u3067for\u30eb\u30fc\u30d7\u306712\u56de\u30eb\u30fc\u30d7\u3092\u56de\u3057\u3066\u3044\u307e\u3059\u3002\n\u3064\u307e\u308a\u9802\u70b9\u3054\u3068\u306b\u8a08\u7b97\u3092\u884c\u3063\u3066\u3044\u308b\u308f\u3051\u3067\u3059\u306d\u3002\n\u3053\u308c\u304c\u30e2\u30c7\u30ea\u30f3\u30b0\u30c4\u30fc\u30eb\u306a\u3069\u304b\u3089\u5f97\u3089\u308c\u305f\u3082\u306e\u306a\u3089\u3001\u81a8\u5927\u306a\u6570\u306e\u9802\u70b9\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u57fa\u672c\u306f\u5909\u308f\u308a\u307e\u305b\u3093\u3002\n\n\u5408\u6210\u884c\u5217\u306b\u91cd\u307f\u4ed8\u3051\u3092\u3059\u308b\n\u9802\u70b9\u5b9a\u7fa9\u306e\u3068\u304d\u306b\u898b\u305f\u3088\u3046\u306b\u3001\u5404\u9802\u70b9\u306b\u306f\u3069\u306e\u30dc\u30fc\u30f3\u304b\u3089\u3069\u308c\u304f\u3089\u3044\u5f71\u97ff\u3092\u3046\u3051\u308b\u304b\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3057\u305f\u3002\n\u305d\u308c\u3092\u5143\u306b\u3001\u5404\u7a2e\u5408\u6210\u884c\u5217\uff08\u3064\u307e\u308a\u30dc\u30fc\u30f3\uff09\u306b\u91cd\u307f\u4ed8\u3051\u3092\u3057\u3066\u8a08\u7b97\u3092\u3057\u307e\u3059\u3002\n\u629c\u7c8b\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u90e8\u5206\u3067\u3059\u3002\n\nweights\nfor (var j = 0; j < 3; j++) {\n    var boneIdx   = i * 4 + j;\n    var weightIdx = i * 3 + j;\n    mat4.multiplyScalar(combMatArr[plane.boneIndices[boneIdx]], plane.weights[weightIdx], comb1[j]);\n}\n\n\n\n\u30dc\u30fc\u30f3\u3092\u3042\u3089\u308f\u3059\u914d\u5217\u300ccombMatArr\u300d\ncombMatArr\u306f\u3001\u5c11\u3057\u524d\u3067\u8a08\u7b97\u3057\u305f\u30dc\u30fc\u30f3\u306e\u5408\u6210\u884c\u5217\u3092\u683c\u7d0d\u3057\u305f\u914d\u5217\u3067\u3059\u3002\n\u4eca\u56de\u306f\u30b0\u30ed\u30fc\u30d0\u30eb\u306a\u9818\u57df\u306b\u304a\u3044\u3066\u3044\u307e\u3059\u304c\u3001\u5b9f\u969b\u306f\u30dc\u30fc\u30f3\u3092\u7ba1\u7406\u3059\u308b\u30af\u30e9\u30b9\u306a\u3069\u3067\u7ba1\u7406\u3055\u308c\u308b\u3079\u304d\u3082\u306e\u3067\u3057\u3087\u3046\u3002\n\u3053\u3053\u3067\u306f\u5358\u7d14\u306b\u3001\u8a72\u5f53\u306e\u30dc\u30fc\u30f3\u306e\u60c5\u5831\u3092\u53d6\u308a\u51fa\u3057\u3066\u91cd\u307f\u3092\u639b\u3051\u3066\u3044\u308b\u3001\u3068\u8003\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u5408\u6210\u884c\u5217\u306e\u5408\u8a08\u3092\u5f97\u308b\n\u91cd\u307f\u4ed8\u3051\u3092\u3057\u305f\u5408\u6210\u884c\u5217\u304c\u8a08\u7b97\u3067\u304d\u305f\u3089\u3001\u3042\u3068\u306f\u305d\u308c\u3092\u5358\u7d14\u306b\u8db3\u3057\u5408\u308f\u305b\u307e\u3059\u3002\n\u91cd\u307f\u4ed8\u3051\u306f\u5408\u8a08\u304c1\u306b\u306a\u308b\u3088\u3046\u306b\u8a08\u7b97\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u8a2d\u5b9a\u3055\u308c\u305f\u5024\u306b\u3088\u3063\u3066\u9069\u5207\u306b\u30dc\u30fc\u30f3\u306e\u5f71\u97ff\u3092\u53d7\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\uff08\u4eee\u306b\u3072\u3068\u3064\u306e\u30dc\u30fc\u30f3\u304b\u3089\u306e\u307f\u5f71\u97ff\u3092\u53d7\u3051\u308b\u3088\u3046\u306b\u3057\u305f\u3089\u3001\u305d\u306e\u30dc\u30fc\u30f3\u4ee5\u5916\u306e\u5408\u6210\u884c\u5217\u306e\u5024\u306f\u3059\u3079\u30660\u306b\u306a\u308a\u307e\u3059\u306d\uff09\n\n\u6700\u7d42\u7d50\u679c\u3092\u53cd\u6620\u3059\u308b\n\u3084\u3063\u3068\u30b4\u30fc\u30eb\u304c\u898b\u3048\u3066\u304d\u307e\u3057\u305f\u3002\n\u4ee5\u4e0a\u3067\u3001\u3069\u306e\u9802\u70b9\u306b\u3069\u3046\u3044\u3046\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u3079\u304d\u304b\u306e\u8a08\u7b97\u304c\u7d42\u308f\u308a\u307e\u3057\u305f\u3002\n\u3042\u3068\u306f\u3053\u308c\u3092\u5404\u7a2e\u9802\u70b9\u60c5\u5831\u306b\u639b\u3051\u3066\u3042\u3052\u308c\u3070\u5b8c\u6210\u3067\u3059\u3002\n\u304c\u3001\u5c11\u3057\u3060\u3051\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u30b3\u30fc\u30c9\u3092\u898b\u3066\u307f\u308b\u3068\u3001\u300c\u9802\u70b9\u4f4d\u7f6e\u306e\u8a08\u7b97\u300d\u3068\u300c\u6cd5\u7dda\u3068\u306e\u8a08\u7b97\u3067\u300d\u82e5\u5e72\u9055\u3044\u304c\u3042\u308a\u307e\u3059\u3002\n\u5177\u4f53\u7684\u306b\u306f\u4ee5\u4e0b\u3067\u3059\u3002\n\nposition-matrix\nvar pos = vec3(plane.position[idx0],\n               plane.position[idx1],\n               plane.position[idx2]);\n\nvec3.applyMatrix4(pos, comb2, pos);\nnewPosition[idx0] = pos.x;\nnewPosition[idx1] = pos.y;\nnewPosition[idx2] = pos.z;\n\n\n\nnormal-matrix\nvar nor = vec3(plane.normal[idx0],\n               plane.normal[idx1],\n               plane.normal[idx2]);\nmat4.inverse(comb2, comb2);\n\nvec3.applyMatrix4FromRight(nor, comb2, nor);\nnewNormal[idx0] = nor.x;\nnewNormal[idx1] = nor.y;\nnewNormal[idx2] = nor.z;\n\n\n\u9802\u70b9\u4f4d\u7f6e\u306e\u5834\u5408\u306f\u5358\u7d14\u306bvec3.applyMatrix4\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3063\u3066\u3001\u9802\u70b9\u4f4d\u7f6e\u306b\u884c\u5217\u3092\u9069\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\u4e00\u65b9\u3001\u6cd5\u7dda\u306e\u307b\u3046\u306f\u82e5\u5e72\u3084\u3084\u3053\u3057\u3044\u8a08\u7b97\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u6cd5\u7dda\u306b\u306f\u300c\u8ee2\u7f6e\u9006\u884c\u5217\u300d\u3092\u639b\u3051\u308b\n\u8a08\u7b97\u306f\u3001\u5f97\u305f\u884c\u5217\u306e \u9006\u884c\u5217 \u3092\u639b\u3051\u3001\u3055\u3089\u306b\u9069\u7528\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3082\u82e5\u5e72\u9055\u3046\u3082\u306e\u304c\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u306f\u306a\u306b\u3092\u3057\u3066\u3044\u308b\u304b\u3068\u3044\u3046\u3068\u3001\uff08\u81ea\u5206\u3082\u3057\u3063\u304b\u308a\u7406\u89e3\u3067\u304d\u3066\u3044\u307e\u305b\u3093\u304c\uff09\u6cd5\u7dda\u306e\u5834\u5408\u306f\u5358\u7d14\u306b\u5ea7\u6a19\u5909\u63db\u884c\u5217\u3092\u639b\u3051\u308b\u3068\u9593\u9055\u3063\u305f\u7b54\u3048\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u305f\u3060\u3001\u8ee2\u7f6e\u9006\u884c\u5217 \u3092\u639b\u3051\u308b\u3053\u3068\u3067\u3001\u305d\u306e\u554f\u984c\u304c\u89e3\u6c7a\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\uff08\u6cd5\u7dda\u306e\u5909\u63db\u306e\u8a71\u3068\u3044\u3046\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\uff09\n\u3053\u308c\u3092\u5b9f\u73fe\u3057\u3066\u3044\u308b\u306e\u304c\u4e0a\u8a18\u306e\u30b3\u30fc\u30c9\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u306d\u3002\nmat4.inverse\u306f\u9006\u884c\u5217\u3092\u5f97\u308b\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u3002\n\u304c\u3001\u672c\u6765\u306f\u8ee2\u7f6e\u884c\u5217\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u3053\u306f\u5c11\u3057\u305a\u308b\u3092\u3057\u3066\u3044\u307e\u3059\u3002\nvec3.applyMatrix4FromRight\u30e1\u30bd\u30c3\u30c9\u306f\u3001\u30d9\u30af\u30c8\u30eb\u306e\u300c\u53f3\u5074\u300d\u304b\u3089\u884c\u5217\u3092\u9069\u7528\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u3002\n\uff08\u901a\u5e38\u3001OpenGL\u7cfb\u3067\u306f\u300c\u5de6\u5074\u300d\u304b\u3089\u884c\u5217\u3092\u639b\u3051\u307e\u3059\uff09\n\u3067\u3059\u304c\u3001\u30e1\u30bd\u30c3\u30c9\u540d\u306e\u901a\u308a\u3001\u884c\u5217\u3092\u53f3\u304b\u3089\u639b\u3051\u308b\u3053\u3068\u3067\u8ee2\u7f6e\u884c\u5217\u3092\u9069\u7528\u3057\u305f\u3053\u3068\u3068\u540c\u3058\u7d50\u679c\u3092\u5f97\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\u3042\u3068\u306f\u3001\u3053\u3053\u3067\u5f97\u305f\u65b0\u3057\u3044\u9802\u70b9\u4f4d\u7f6e\u3068\u6cd5\u7dda\u3092\u3001\u65b0\u3057\u3044\u914d\u5217\u306b\u5165\u308c\u3001\u305d\u306e\u9802\u70b9\u30d0\u30c3\u30d5\u30a1\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08VBO\uff09\u3092\u751f\u6210\u3057\u3066\u305d\u308c\u3092WebGL\u306b\u9001\u3063\u3066\u3084\u308c\u3070\u3081\u3067\u305f\u304f\u30dc\u30fc\u30f3\u306e\u5f71\u97ff\u3092\u53d7\u3051\u305f\u9802\u70b9\u304c\u63cf\u304b\u308c\u308b\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\u3060\u3044\u3076\u9577\u3044\u8a18\u4e8b\u306b\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u30fb\u30fb( ;\u00b4\u0414`)\n\u5192\u982d\u3067\u3082\u66f8\u304d\u307e\u3057\u305f\u304c\u3001\u3053\u306e\u8a18\u4e8b\u306e\u30b5\u30f3\u30d7\u30eb\u306fjsdo.it\uff08\u30b9\u30ad\u30cb\u30f3\u30b0\u30e1\u30c3\u30b7\u30e5\uff08\u30dc\u30fc\u30f3\uff09\u3067\u6cd5\u7dda\u60c5\u5831\u3082\u6271\u3046\uff09\u306b\u4e0a\u304c\u3063\u3066\u3044\u308b\u306e\u3067\u898b\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u5168\u4f53\u7684\u306a\u5185\u5bb9\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u306e\u8a18\u4e8b\uff08[\u8003\u3048\u308b\u307b\u3069\u306b\u30d6\u30e9\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u5316\u3057\u3066\u304f\u308b\u30b9\u30ad\u30f3\u30e1\u30c3\u30b7\u30e5\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u89e3\u8aac](http://www.xxxxx13.com/opengl_SkinAnime.html)\uff09\u3068\u3001\u3053\u3061\u3089\u306e\u8a18\u4e8b\uff08[\u305d\u306e61 \u5b8c\u5168\u30db\u30ef\u30a4\u30c8\u30dc\u30c3\u30af\u30b9\u306a\u30b9\u30ad\u30f3\u30e1\u30c3\u30b7\u30e5\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u306e\u89e3](http://marupeke296.com/DXG_No61_WhiteBoxSkinMeshAnimation.html)\uff09\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\n\n\n\u4eca\u56de\u3082\u4f8b\u306b\u3088\u3063\u3066\u3001\u30b5\u30f3\u30d7\u30eb\u3092jsdo.it\u306b\u4e0a\u3052\u3066\u3042\u308a\u307e\u3059\u3002\n\n- [\u30b9\u30ad\u30cb\u30f3\u30b0\u30e1\u30c3\u30b7\u30e5\uff08\u30dc\u30fc\u30f3\uff09\u306b\u30c1\u30e3\u30ec\u30f3\u30b8](http://jsdo.it/edo_m18/3fjV)\n- [\u30b9\u30ad\u30cb\u30f3\u30b0\u30e1\u30c3\u30b7\u30e5\uff08\u30dc\u30fc\u30f3\uff09\u3067\u6cd5\u7dda\u60c5\u5831\u3082\u6271\u3046](http://jsdo.it/edo_m18/fPKD)\n\n\u30b9\u30ad\u30cb\u30f3\u30b0\u30e1\u30c3\u30b7\u30e5\u3068\u3044\u3046\u540d\u306e\u901a\u308a\u3001\u30e2\u30c7\u30eb\u306e\u30b9\u30ad\u30f3\u3001\u3064\u307e\u308a\u76ae\u819a\u3092\u8868\u73fe\u3059\u308b\u6280\u8853\u3067\u3059\u3002\n\u305d\u308c\u3092\u5b9f\u73fe\u3059\u308b\u306e\u304c\u30dc\u30fc\u30f3\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u306d\u3002\n\n\n## \u3056\u3063\u3068\u3057\u305f\u6d41\u308c\n\n\u3056\u3063\u3068\u3057\u305f\u6d41\u308c\u3092\u66f8\u304f\u3068\u3001\n\n1. \u89aa\u5b50\u95a2\u4fc2\u3092\u6301\u3063\u305f\u30dc\u30fc\u30f3\u90e1\u3092\u751f\u6210\u3059\u308b\n* \u30dc\u30fc\u30f3\u306e\u521d\u671f\u59ff\u52e2\u3092\u8a08\u7b97\u3057\u3066\u304a\u304f\n* \u30dc\u30fc\u30f3\u3092\u52d5\u304b\u3059\uff08\u5dee\u5206\u59ff\u52e2\uff09\n* \u52d5\u3044\u305f\u5dee\u5206\u3068\u91cd\u307f\u4ed8\u3051\u3092\u4f7f\u3063\u3066\u3069\u308c\u304f\u3089\u3044\u76ae\u819a\uff08\u3064\u307e\u308a\u9802\u70b9\uff09\u3092\u52d5\u304b\u3059\u304b\u3092\u8a08\u7b97\u3059\u308b\n* \u3042\u3068\u306f\u901a\u5e38\u306e\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\n\n\u3068\u3044\u3046\u6d41\u308c\u3067\u3059\u3002\n\u3053\u306e\u6d41\u308c\u3092\u3001\u9806\u3092\u8ffd\u3063\u3066\u898b\u3066\u3044\u304d\u307e\u3059\u3002\n\n## \u30dd\u30ea\u30b4\u30f3\u8a2d\u8a08\n\n\u4e0a\u8a18[\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u3044\u305f\u8a18\u4e8b](http://www.xxxxx13.com/opengl_SkinAnime.html)\u306e\u8a2d\u8a08\u3092\u3001\u4eca\u56de\u306f\u305d\u306e\u307e\u307e\u4f7f\u308f\u305b\u3066\u3082\u3089\u3044\u307e\u3057\u305f\u3002\n![\u30db\u309a\u30ea\u30b3\u3099\u30f3\u8a2d\u8a08.png](https://qiita-image-store.s3.amazonaws.com/0/5616/e569520a-9011-6f22-9739-303e690d1516.png \"\u30db\u309a\u30ea\u30b3\u3099\u30f3\u8a2d\u8a08.png\")\n\u30dd\u30ea\u30b4\u30f3\u306e\u9802\u70b9\u4f4d\u7f6e\uff08\u8d64\uff09\u3068\u3001\u30dc\u30fc\u30f3\u306e\u91cd\u307f\u4ed8\u3051\uff08\u30aa\u30ec\u30f3\u30b8\uff09\u3001\u305d\u3057\u3066\u5f71\u97ff\u3092\u53d7\u3051\u308b\u30dc\u30fc\u30f3\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\uff08\u9752\uff09\u3067\u3059\u3002\n\u7403\u4f53\u306e\u4e0a\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u306e\u306f\u30dc\u30fc\u30f3\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3067\u3059\u3002\n\n![\u30db\u3099\u30fc\u30f3\u8a2d\u8a08.png](https://qiita-image-store.s3.amazonaws.com/0/5616/e51dba10-51e4-6f17-9167-b89c9009df50.png \"\u30db\u3099\u30fc\u30f3\u8a2d\u8a08.png\")\n\u3053\u3061\u3089\u306f\u30dc\u30fc\u30f3\u306e\u7d76\u5bfe\u5ea7\u6a19\u306b\u3088\u308b\u4f4d\u7f6e\u3068\u56de\u8ee2\u89d2\u5ea6\u3067\u3059\u3002\uff08\u3059\u3079\u30660\u5ea6\uff09\n\n\n\u4eca\u56de\u306f\u4e0a\u8a18\u306e\u3088\u3046\u306b\u3001\u975e\u5e38\u306b\u30b7\u30f3\u30d7\u30eb\u306a\u30dd\u30ea\u30b4\u30f3\u69cb\u6210\u3067\u3059\u3002\n\u677f\u304c5\u679a\u3042\u308b\u3060\u3051\u3067\u3059\u306d\u3002\n\n\u305d\u308c\u305e\u308c\u306e\u9802\u70b9\u306b\u632f\u3089\u308c\u3066\u3044\u308b\u6570\u5b57\u306f\u3001\u9802\u70b9\u4f4d\u7f6e\u3001\u30dc\u30fc\u30f3\u306e\u91cd\u307f\u4ed8\u3051\u3001\u3069\u306e\u30dc\u30fc\u30f3\u304b\u3089\u5f71\u97ff\u3092\u53d7\u3051\u308b\u304b\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9(\u203b1)\u3001\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u203b1 ... \u3053\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3001\u6700\u7d42\u7684\u306b\u306f\u30dc\u30fc\u30f3\u305d\u306e\u3082\u306e\u3067\u306f\u306a\u304f\u3001\u30dc\u30fc\u30f3\u304b\u3089\u8a08\u7b97\u3055\u308c\u305f\u300c\u5408\u6210\u884c\u5217\u300d\u3078\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3068\u306a\u308a\u307e\u3059\u3002\n\u3053\u306e\u5408\u6210\u884c\u5217\u306f\u3001\u4eca\u56de\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u306f\u30b0\u30ed\u30fc\u30d0\u30eb\u9818\u57df\u306b\u914d\u5217\u3068\u3057\u3066\u7528\u610f\u3057\u3066\u305d\u3053\u304b\u3089\u53d6\u308a\u51fa\u3057\u307e\u3059\u3002\n\u8a73\u3057\u304f\u306f\u300c\u5408\u6210\u884c\u5217\u300d\u306e\u3068\u3053\u308d\u3067\u8aac\u660e\u3057\u307e\u3059\u3002\n\n### \u60c5\u5831\u5b9a\u7fa9\u90e8\u5206\u629c\u7c8b\n\n\u4eca\u56de\u306f\u30b5\u30f3\u30d7\u30eb\u306a\u306e\u3067\u3001\u624b\u3067\u60c5\u5831\u3092\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002\n\u901a\u5e38\u3067\u3042\u308c\u3070\u30e2\u30c7\u30ea\u30f3\u30b0\u30c4\u30fc\u30eb\u306a\u3069\u304b\u3089\u51fa\u529b\u3055\u308c\u305f\u30c7\u30fc\u30bf\u3092\u30d1\u30fc\u30b9\u3059\u308b\u306a\u308a\u3057\u3066\u30c7\u30fc\u30bf\u3092\u53d6\u308a\u51fa\u3059\u3053\u3068\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u3002\n\n\u305d\u306e\u5b9a\u7fa9\u90e8\u5206\u304c\u4ee5\u4e0b\u3067\u3059\u3002\n\n| \u30d7\u30ed\u30d1\u30c6\u30a3 | \u610f\u5473 |\n|:-----------|:----------|\n| position | \u9802\u70b9\u4f4d\u7f6e |\n| color | \u9802\u70b9\u8272 |\n| normal | \u9802\u70b9\u6cd5\u7dda |\n| index | \u9802\u70b9\u30a4\u30f3\u30c7\u30c3\u30af\u30b9 |\n| boneIndices | \u5f71\u97ff\u3092\u53d7\u3051\u308b\u30dc\u30fc\u30f3\uff08\u5408\u6210\u884c\u5217\uff09\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9 |\n| weights | \u30dc\u30fc\u30f3\u306b\u5bfe\u3059\u308b\u91cd\u307f\u4ed8\u3051 |\n\n\n```js\n\n// Plane\u306e\u5b9a\u7fa9\nvar plane = {\n    position: [\n        2.0, 0.0, 0.0,\n        2.0, 1.0, 0.0,\n        3.0, 1.0, 0.0,\n        3.0, 0.0, 0.0,\n\n        2.0, 2.0, 0.0,\n        3.0, 2.0, 0.0,\n        2.0, 3.0, 0.0,\n        3.0, 3.0, 0.0,\n\n        2.0, 4.0, 0.0,\n        3.0, 4.0, 0.0,\n        2.0, 5.0, 0.0,\n        3.0, 5.0, 0.0,\n    ],\n    color: [\n        1.0, 0.0, 0.0, 1.0,\n        0.0, 1.0, 0.0, 1.0,\n        0.0, 0.0, 1.0, 1.0,\n        0.0, 0.0, 0.0, 1.0,\n\n        1.0, 0.0, 0.0, 1.0,\n        0.0, 1.0, 0.0, 1.0,\n        0.0, 0.0, 1.0, 1.0,\n        0.0, 0.0, 0.0, 1.0,\n\n        1.0, 0.0, 0.0, 1.0,\n        0.0, 1.0, 0.0, 1.0,\n        0.0, 0.0, 1.0, 1.0,\n        0.0, 0.0, 0.0, 1.0,\n    ],\n    normal: [\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n        0.0, 0.0, 1.0,\n    ],\n    index: [\n        0, 1, 2,\n        2, 3, 0,\n\n        1, 4, 5,\n        5, 2, 1,\n\n        4, 6, 7,\n        7, 5, 4,\n\n        6, 8, 9,\n        9, 7, 6,\n\n        8, 10, 11,\n        11, 9,  8,\n    ],\n    boneIndices: [\n        0, 0, 0, 0,\n        1, 2, 0, 0,\n        0, 1, 0, 0,\n        0, 0, 0, 0,\n\n        1, 2, 0, 0,\n        1, 2, 0, 0,\n        2, 3, 0, 0,\n        2, 3, 0, 0,\n\n        3, 4, 0, 0,\n        3, 4, 0, 0,\n        4, 0, 0, 0,\n        4, 0, 0, 0,\n    ],\n    weights: [\n        1.0, 0.0, 0.0,\n        0.5, 0.5, 0.0,\n        0.5, 0.5, 0.0,\n        1.0, 0.0, 0.0,\n\n        0.5, 0.5, 0.0,\n        0.5, 0.5, 0.0,\n        0.5, 0.5, 0.0,\n        0.5, 0.5, 0.0,\n\n        0.5, 0.5, 0.0,\n        0.5, 0.5, 0.0,\n        1.0, 0.0, 0.0,\n        1.0, 0.0, 0.0,\n    ],\n};\n```\n\n\n\u5f71\u97ff\u3092\u53d7\u3051\u308b\u30dc\u30fc\u30f3\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306f4\u3064\u3067\u3059\u3002\n\u304c\u3001\u3053\u308c\u306f\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u306a\u305c4\u672c\u306a\u306e\u304b\u307e\u3060\u8a73\u3057\u304f\u306f\u5206\u304b\u3063\u3066\u3044\u307e\u305b\u3093\u30fb\u30fb\u3002\n\uff08\u5f71\u97ff\u53d7\u3051\u305d\u3046\u306a\u306e\u306f2\u672c\u3060\u3057\u3001\u8a08\u7b97\u30822\u672c\u3060\u3051\u3060\u3057\uff09\n\n\u305f\u3093\u306b\u4efb\u610f\u306e\u6570\u306a\u306e\u304b\u3001\u305d\u308c\u4ee5\u5916\u306b\u7406\u7531\u304c\u3042\u308b\u306e\u304b\u3002\n\u898b\u304b\u3051\u305f\u7406\u7531\u3068\u3057\u3066\u306f\u3001\u30dc\u30fc\u30f3\u306e\u6570\u304c\u591a\u3059\u304e\u308b\u3068uniform\u5909\u6570\u306a\u3069\u306e\u4e0a\u9650\u3092\u8d85\u3048\u3066\u3057\u307e\u3046\u304b\u3089\u3001\u3068\u3044\u3046\u3082\u306e\u3067\u3057\u305f\u3002\n\uff08\u304c\u3001\u4eca\u56de\u306f\u305d\u3082\u305d\u3082\u9802\u70b9\u306e\u79fb\u52d5\u3092\u30b7\u30a7\u30fc\u30c0\u3067\u306f\u306a\u304fJS\u5074\u3067\u884c\u3063\u3066\u3044\u308b\u306e\u3067\u3042\u307e\u308a\u95a2\u4fc2\u3042\u308a\u307e\u305b\u3093\u304c\uff09\n\n\n### \u5f71\u97ff\u3092\u53d7\u3051\u306a\u3044\u30dc\u30fc\u30f3\u306b\u95a2\u3057\u3066\u306f\u91cd\u307f\u3092\u300c0\u300d\u306b\n\n\u3055\u3066\u3001\u672c\u6570\u306f\u7f6e\u3044\u3066\u304a\u3044\u3066\u3001\u305d\u3082\u305d\u3082\u5f71\u97ff\u3092\u53d7\u3051\u308b\u30dc\u30fc\u30f3\u304c\u3072\u3068\u3064\u306a\u3089\u5b9a\u7fa9\u3082\u3072\u3068\u3064\u3067\u3044\u3044\u3058\u3083\u306a\u3044\u304b\u3001\u3068\u601d\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u3067\u3059\u304c\u3001\u5b9f\u969b\u306b\u306f\u6570\u3092\u7d71\u4e00\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u3001\u4e0d\u8981\u306aif\u6587\u306b\u3088\u308b\u5206\u5c90\u304c\u3044\u3089\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\u3053\u3046\u3057\u305f\u6700\u9069\u5316\u304c\u3069\u3046\u3084\u3089\u50cd\u3044\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\uff08\u305f\u3060\u3001\u3059\u3067\u306b\u66f8\u3044\u305f\u3088\u3046\u306b\u4eca\u56de\u306fJS\u3067\u3084\u308b\u306e\u3067\u3042\u307e\u308a\u610f\u5473\u306f\u3042\u308a\u307e\u305b\u3093\uff09\n\n\u305d\u3057\u3066`weights`\u3092`0`\u306b\u3057\u3066\u304a\u3051\u3070\u3001\u5b9f\u8cea\u30dc\u30fc\u30f3\u306e\u5f71\u97ff\u306f\u53d7\u3051\u306a\u304f\u306a\u308b\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\n### 4\u672c\u76ee\u306e\u30dc\u30fc\u30f3\u306f`1.0 - weight1 - weight2 - weight3`\u3067\u6c42\u3081\u308b\n\n\u3055\u3089\u306b\u3088\u30fc\u304f\u898b\u3066\u307f\u308b\u3068\u3001weights\u306e\u5b9a\u7fa9\u306f\u5b9f\u306f3\u3064\u305a\u3064\u306e\u6570\u5024\u306e\u307f\u3067\u3059\u3002\n\u3053\u308c\u306f\u306a\u3093\u3067\u304b\u3068\u3044\u3046\u3068\u3001\u30dc\u30fc\u30f3\u306e\u91cd\u307f\u4ed8\u3051\u306e\u4e2d\u30674\u672c\u76ee\u306f`1.0 - weight1 - weight2 - weight3`\u3068\u3057\u3066\u30011.0\u304b\u3089\u306e\u5dee\u5206\u306b\u3088\u3063\u3066\u8a08\u7b97\u3059\u308b\u304b\u3089\u3067\u3059\u3002\n\n\u304a\u305d\u3089\u304f\u3067\u3059\u304c\u3001\u91cd\u307f\u4ed8\u3051\u306f\u5408\u8a08\u3067`1.0`\u3092\u8d85\u3048\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3082\u306e\u306a\u306e\u3067\u3057\u3087\u3046\u3002\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u3001\u5fc5\u305a\u5408\u8a08\u5024\u304c`1`\u3092\u8d85\u3048\u308b\u3053\u3068\u304c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\n\n\n## \u30dc\u30fc\u30f3\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u3068\u521d\u671f\u59ff\u52e2\u884c\u5217\n\n\u3055\u3066\u3001\u7d9a\u3044\u3066\u306f\u30dc\u30fc\u30f3\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u3068\u521d\u671f\u59ff\u52e2\u884c\u5217\u3067\u3059\u3002\n\n\u3053\u308c\u3089\u306e\u884c\u5217\u304c\u306a\u306b\u3092\u3057\u3066\u304f\u308c\u308b\u304b\u3002\n**\u30dc\u30fc\u30f3\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217** \u306f\u3001\u7d76\u5bfe\u5ea7\u6a19\u3067\u4e0e\u3048\u3089\u308c\u305f\u521d\u671f\u59ff\u52e2\u3092\u306a\u304b\u3063\u305f\u3053\u3068\u306b\u3059\u308b\u884c\u5217\u3067\u3059\u3002\n\u306a\u304b\u3063\u305f\u3053\u3068\u306b\u3059\u308b\u884c\u5217\u3068\u3044\u3048\u3070\u9006\u884c\u5217\u3067\u3059\u306d\u3002\n\n### \u30dc\u30fc\u30f3\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u306f\u9006\u884c\u5217\n\n\u4f8b\u3048\u3070\u3001`x: 2.5, y: 1.5`\u306e\u4f4d\u7f6e\u306b\u79fb\u52d5\u3059\u308b\u884c\u5217\u3092\u306a\u304b\u3063\u305f\u3053\u3068\u306b\u3059\u308b\u306b\u306f\u3001`x: -2.5, y: -1.5`\u3092\u8a08\u7b97\u3057\u3066\u3084\u308c\u3070\u3044\u3044\u3067\u3059\u306d\u3002\n\u5b9f\u969b\u306e\u884c\u5217\u306f\u3082\u3063\u3068\u8907\u96d1\u306a\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u3001\u3053\u3046\u5358\u7d14\u306b\u306f\u884c\u304d\u307e\u305b\u3093\u3002\n\u305d\u3053\u3067\u767b\u5834\u3059\u308b\u306e\u304c\u9006\u884c\u5217\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\n\u9006\u884c\u5217\u306f\u3001\u307e\u3055\u306b\u3053\u306e\u300c\u306a\u304b\u3063\u305f\u3053\u3068\u300d\u306b\u3057\u3066\u304f\u308c\u308b\u884c\u5217\u3092\u751f\u6210\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\n\u3068\u3044\u3046\u3053\u3068\u3092\u8e0f\u307e\u3048\u3066\u30dc\u30fc\u30f3\u306e\u521d\u671f\u5316\u90e8\u5206\u306e\u51e6\u7406\u3092\u898b\u3066\u307f\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n```js\n// \u4e2d\u7565\ninit: function (position) {\n    this.matrix       = mat4();\n    this.matrixBone   = mat4();\n    this.matrixComb   = mat4();\n    this.matrixInit   = mat4.translate(mat4(), position);\n    this.matrixOffset = mat4.inverse(this.matrixInit);\n    this.children = [];\n},\n// \u4e2d\u7565\n```\n\n\u3053\u306e\u4e2d\u3067`this.matrixOffset = mat4.inverse(this.matrixInit);`\u3068\u306a\u3063\u3066\u3044\u308b\u306e\u304c\u305d\u306e\u90e8\u5206\u3067\u3059\u306d\u3002\n\u521d\u671f\u5316\u6642\u306b\u6e21\u3055\u308c\u308b`position`\u5f15\u6570\u306f\u7d76\u5bfe\u5ea7\u6a19\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\u306a\u306e\u3067\u305d\u306e\u307e\u307e\u9006\u884c\u5217\u3092\u6c42\u3081\u3066\u4fdd\u6301\u3057\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u306d\u3002\n\n#### \u4f59\u8ac7\n\n\u3061\u306a\u307f\u306b\u3053\u3053\u3067\u767b\u5834\u3057\u3066\u3044\u308b`mat4`\u306f[\u81ea\u4f5c\u306e\u30e9\u30a4\u30d6\u30e9\u30ea](https://github.com/edom18/MathJS)\u3067\u3059\u3002\nGLSL\u3068\u4f3c\u305f\u3088\u3046\u306a\u64cd\u4f5c\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u76ee\u6a19\u3068\u3057\u3066\u3044\u308b\u3082\u306e\u3067\u3059\u3002\n\u306a\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```js:MathJS\nvar v1 = vec3(0, 1, 0); // 3\u8981\u7d20\u306e\u30d9\u30af\u30c8\u30eb\nvar v2 = vec2(0, 1);\nvar v3 = vec3(v2, 0); // vec2\u6210\u5206\u3092\u6d41\u7528\u3057\u3066vec3\u3092\u4f5c\u308b\nvar m1 = mat4(); // \u5f15\u6570\u306a\u3057\u3067\u5358\u4f4d\u884c\u5217\u3092\u4f5c\u308b\nvar m2 = mat4(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16); // \u5f15\u6570\u3092\u4e0e\u3048\u3066\u521d\u671f\u5316\nvar m3 = mat4(m2); // \u540c\u3058\u5024\u3067\u8907\u88fd\n\nvar result = mat4();\n\n// OpenGL\u306e\u3088\u3046\u306b\u7d50\u679c\u3092\u5f97\u308b\u884c\u5217\u3092\u7b2c3\u5f15\u6570\u306b\u6307\u5b9a\u3059\u308b\nmat4.multiply(m1, m2, result);\n\n// \u623b\u308a\u5024\u3068\u3057\u3066\u3082\u8a08\u7b97\u3067\u304d\u308b\n// result = mat4.multiply(m1, m2);\n```\n\n\n\n## \u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u306e\u610f\u5473\n\n\u306a\u305c\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u304c\u5fc5\u8981\u306a\u306e\u304b\u3002\u305d\u308c\u306f\u3001\u30dc\u30fc\u30f3\u306e\u610f\u5473\u3092\u8003\u3048\u308b\u3068\u898b\u3048\u3066\u304d\u307e\u3059\u3002\n*\uff08Blender\u306a\u3069\u306e\u30e2\u30c7\u30ea\u30f3\u30b0\u30c4\u30fc\u30eb\u3092\u4f7f\u3063\u305f\u3053\u3068\u304c\u3042\u308b\u4eba\u3067\u3042\u308c\u3070\u60f3\u50cf\u3057\u3084\u3059\u3044\u3068\u601d\u3044\u307e\u3059\uff09*\n\n\u30dc\u30fc\u30f3\u306f\u3001\u305d\u308c\u5358\u4f53\u3067\u3082\u4f4d\u7f6e\u3084\u59ff\u52e2\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\n\u30e2\u30c7\u30ea\u30f3\u30b0\u30c4\u30fc\u30eb\u3067\u3082\u8996\u899a\u7684\u306b\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u5206\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u305d\u3057\u3066\u6700\u521d\u306f\u30e2\u30c7\u30eb\u306b\u5bfe\u3057\u3066\u30dc\u30fc\u30f3\u306f\u7d10\u4ed8\u3044\u3066\u3044\u307e\u305b\u3093\u3002\uff08\u30c4\u30fc\u30eb\u4e0a\u3067\u95a2\u9023\u4ed8\u3051\u3092\u884c\u3046\u5fc5\u8981\u304c\u3042\u308b\uff09\n\n\u306a\u306b\u304c\u8a00\u3044\u305f\u3044\u304b\u3068\u8a00\u3046\u3068\u3001 **\u30dc\u30fc\u30f3\u306e\u4f4d\u7f6e\u3068\u30e2\u30c7\u30eb\u306e\u4f4d\u7f6e\u306b\u306f\u672c\u6765\u306f\u95a2\u9023\u6027\u304c\u306a\u3044** \u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\u30c4\u30fc\u30eb\u4e0a\u3067\u95a2\u9023\u4ed8\u3051\u3092\u884c\u3063\u305f\u3068\u304d\u306b\u521d\u3081\u3066\u95a2\u9023\u6027\u304c\u751f\u307e\u308c\u307e\u3059\u3002\n\u305d\u3057\u3066\u305d\u306e\u3068\u304d\u306e\u30e2\u30c7\u30eb\u306e\u72b6\u614b\u3068\u30dc\u30fc\u30f3\u306e\u72b6\u614b\u3092\u95a2\u9023\u4ed8\u3051\u3001\u305d\u308c\u3092 **\u521d\u671f\u59ff\u52e2** \u3068\u3057\u3066\u767b\u9332\u3059\u308b\u308f\u3051\u3067\u3059\u3002\n\n\u521d\u671f\u59ff\u52e2\u3092\u6c7a\u3081\u3066\u304a\u304b\u306a\u3044\u3068\u3001\u5f8c\u3005\u30dc\u30fc\u30f3\u3092\u52d5\u304b\u3057\u305f\u3068\u304d\u306b\u95a2\u9023\u4ed8\u3051\u3089\u308c\u305f\u30e2\u30c7\u30eb\u3092\u3069\u3046\u52d5\u304b\u305b\u3070\u3044\u3044\u304b\u5206\u304b\u3089\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3088\u306d\u3002\n\n\n### \u30de\u30ea\u30aa\u30cd\u30c3\u30c8\u306b\u4f8b\u3048\u3066\u307f\u308b\n\n\u3075\u3068\u601d\u3044\u3064\u3044\u305f\u4f8b\u3048\u3092\u3057\u3066\u307f\u307e\u3059\u3002\n\u307e\u305a\u3001\u30de\u30ea\u30aa\u30cd\u30c3\u30c8\u3092\u60f3\u50cf\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30de\u30ea\u30aa\u30cd\u30c3\u30c8\u306f\u7cf8\u3067\u7d50\u3070\u308c\u3001\u96e2\u308c\u305f\u4f4d\u7f6e\uff08\u4e0a\u90e8\uff09\u306b\u3042\u308b\u677f\u3092\u4eba\u9593\u304c\u64cd\u4f5c\u3059\u308b\u3053\u3068\u3067\u3001\u307e\u308b\u3067\u751f\u304d\u3066\u3044\u308b\u304b\u306e\u3088\u3046\u306b\u52d5\u304b\u3057\u307e\u3059\u3088\u306d\u3002\n\n![\u30de\u30ea\u30aa\u30cd\u30c3\u30c8\u306e\u4f8b](http://www.parabox.jp/marionet/yubi03.jpg)\n*\u2191\u3053\u3093\u306a\u611f\u3058\u306e\u3082\u306e\u3067\u3059\u3002\uff08[\u3053\u3061\u3089\u306e\u8a18\u4e8b](http://www.parabox.jp/marionet/sousa.html)\u304b\u3089\u5f15\u7528\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\uff09*\n\n\u3053\u306e\u7cf8\u304c\u95a2\u9023\u4ed8\u3051\u3067\u3001\u677f\u304c\u30dc\u30fc\u30f3\u306e\u4f4d\u7f6e(\u203b1)\u3067\u3059\u3002\n\u677f\u3092\u5c11\u3057\u3060\u3051\u4e0a\u306b\u4e0a\u3052\u308b\u3068\u3001\u30de\u30ea\u30aa\u30cd\u30c3\u30c8\u3082\u5c11\u3057\u3060\u3051\u4e0a\u306b\u4e0a\u304c\u308a\u307e\u3059\u3002\n\u3069\u308c\u3060\u3051\u4e0a\u304c\u308b\u304b\u306f\u677f\u3092\u3069\u308c\u3060\u3051\u4e0a\u3052\u305f\u304b\u306b\u3088\u308a\u307e\u3059\u306d\u3002\n\u3053\u308c\u304c\u300c\u5dee\u5206\u300d\u3067\u3059\u3002\n\n\u305d\u3057\u3066\u5dee\u5206\u306f\u3001\u300c\u521d\u671f\u4f4d\u7f6e\u304b\u3089\u3069\u308c\u3060\u3051\u52d5\u3044\u305f\u304b\u300d\u3067\u6c42\u3081\u3089\u308c\u307e\u3059\u306d\u3002\n\u3053\u306e\u3053\u3068\u304b\u3089\u3082\u5206\u304b\u308b\u3088\u3046\u306b\u3001\u300c\u521d\u671f\u59ff\u52e2\u300d\u306f\u5927\u4e8b\u306a\u5f79\u5272\u304c\u3042\u308b\u306e\u3067\u3059\u3002\n\n\u4eee\u306b\u3001\u30de\u30ea\u30aa\u30cd\u30c3\u30c8\u304c\u6b63\u5e38\u306a\u72b6\u614b\u3067\u306f\u306a\u304f\u3001\u5909\u306a\u59ff\u52e2\u306e\u307e\u307e\u7cf8\u3068\u7d50\u3073\u4ed8\u3051\u3089\u308c\u3066\u3057\u307e\u3063\u305f\u3089\u3002\n\u64cd\u4f5c\u3059\u308b\u305f\u3081\u306e\u677f\u3092\u52d5\u304b\u3057\u3066\u3082\u3001\u601d\u3044\u901a\u308a\u306b\u306f\u52d5\u304d\u307e\u305b\u3093\u3088\u306d\u3002\n\u306a\u306e\u3067\u3001\u521d\u671f\u59ff\u52e2\u3068\u3057\u3066\u6b63\u3057\u3044\u4f4d\u7f6e\u3092\u5b9a\u7fa9\u3057\u305f\u4e0a\u3067\u95a2\u9023\u4ed8\u3051\u3092\u884c\u3046\u306e\u3067\u3059\u3002\n\n*\u203b1 ... \u901a\u5e38\u306e\u30e2\u30c7\u30ea\u30f3\u30b0\u30c4\u30fc\u30eb\u3067\u306f\u30dc\u30fc\u30f3\u306f\u30e2\u30c7\u30eb\u306b\u91cd\u306a\u308b\u3088\u3046\u306b\u3059\u308b\u306e\u304c\u666e\u901a\u3067\u3059\u304c\u3001\u96e2\u308c\u3066\u3044\u3066\u3082\u540c\u69d8\u306e\u52d5\u304d\u3092\u3059\u308b\u306e\u3067\u3042\u304f\u307e\u3067\u4f8b\u3048\u3067\u3059\u3002*\n\n\n\n## \u89aa\u7a7a\u9593\u304b\u3089\u306e\u76f8\u5bfe\u5ea7\u6a19\u306b\u5909\u63db\n\n\u4ee5\u4e0b\u306e\u30d8\u30eb\u30d1\u30fc\u30e1\u30bd\u30c3\u30c9\u3092\u898b\u3066\u304f\u3060\u3055\u3044\u3002\n\n```js:calc-relative-mat\n/**\n * \u5404\u7a2e\u30dc\u30fc\u30f3\u3092\u89aa\u7a7a\u9593\u306e\u76f8\u5bfe\u4f4d\u7f6e\u306b\u5909\u63db\n */\nBone.calcRelativeMat = function (bone, parentOffsetMat) {\n    bone.children.forEach(function (childBone, idx) {\n        Bone.calcRelativeMat(childBone, bone.matrixOffset);\n    });\n\n    if (parentOffsetMat) {\n        mat4.multiply(bone.matrixInit, parentOffsteMat, bone.matrixInit);\n    }\n};\n```\n\n\u3084\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u4e00\u8a00\u3067\u8a00\u3046\u3068\u3001\u300c\u5b50\u30dc\u30fc\u30f3\u306e\u5ea7\u6a19\u3092\u89aa\u7a7a\u9593\u5ea7\u6a19\u3078\u5909\u63db\u300d\u3067\u3059\u3002\n`mat4.multiply(bone.matrixInit, parentOffsetMat, bone.matrixInit);`\u306e\u90e8\u5206\u3067\u3059\u306d\u3002\n\n\n### \u639b\u3051\u308b\u9806\u756a\u306b\u6ce8\u610f\n\n\u884c\u5217\u306b\u8a73\u3057\u3044\u4eba\u3067\u3042\u308c\u3070\u300c\u304a\u3084\uff1f\u300d\u3068\u601d\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u306a\u305c\u306a\u3089\u3001OpenGL\u7cfb\u306e\u5834\u5408\u306f\u89aa\u7a7a\u9593\u5ea7\u6a19\u3078\u306e\u5909\u63db\u306e\u969b\u306f\u3001\u305d\u306e\u5ea7\u6a19\u5909\u63db\u884c\u5217\u3092 **\u5de6\u5074** \u306b\u639b\u3051\u308b\u304b\u3089\u3067\u3059\u3002\n\n\u304c\u3001\u898b\u3066\u3082\u3089\u3046\u3068\u5206\u304b\u308b\u3088\u3046\u306b\u3001`parentOffsetMat`\u306f\u53f3\u5074\u306b\u6765\u3066\u3044\u307e\u3059\u3002\n\u305d\u3082\u305d\u3082\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u306f **\u9006\u884c\u5217** \u3067\u3059\u3002\n\u306a\u306e\u3067\u3001\u901a\u5e38\u901a\u308a\u306b\u8a08\u7b97\u3057\u3066\u3057\u307e\u3046\u3068\u300c\u9006\u306e\u79fb\u52d5\u300d\u3092\u3057\u3066\u3057\u307e\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\u3060\u304b\u3089\u53cd\u5bfe\u304b\u3089\u639b\u3051\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\n### \u521d\u671f\u59ff\u52e2\u884c\u5217\u3092\u4e0a\u66f8\u304d\n\n\u3055\u3089\u306b\u898b\u3066\u3082\u3089\u3046\u3068\u5206\u304b\u308a\u307e\u3059\u304c\u3001`matrixInit\uff08\u521d\u671f\u59ff\u52e2\u7528\u884c\u5217\uff09`\u81ea\u4f53\u3092\u4e0a\u66f8\u304d\u3057\u3066\u3044\u307e\u3059\u3002\n\u3064\u307e\u308a\u3001\u521d\u671f\u59ff\u52e2\u306f\u300c\u89aa\u7a7a\u9593\u304b\u3089\u306e\u76f8\u5bfe\u5ea7\u6a19\u300d\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308b\u308f\u3051\u3067\u3059\u3002\n\n\u305f\u3060\u3001\u7d76\u5bfe\u5ea7\u6a19\u3078\u623b\u3059\u305f\u3081\u306e\u884c\u5217\u3092\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u3068\u3057\u3066\u3059\u3067\u306b\u8a08\u7b97\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3042\u3068\u3042\u3068\u56f0\u308b\u3053\u3068\u306f\u306a\u3044\u306e\u3067\u3059\u3002\n\n\n## \u5dee\u5206\u59ff\u52e2\n\n\u7d9a\u3044\u3066\u5dee\u5206\u59ff\u52e2\u3067\u3059\u3002\n\u3061\u306a\u307f\u306b\u4eca\u307e\u3067\u306e\u6d41\u308c\u3092\u898b\u3066\u307f\u308b\u3068\u3001\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n* \u30dc\u30fc\u30f3\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\n* \u89aa\u7a7a\u9593\u5ea7\u6a19\u3067\u306e\u521d\u671f\u59ff\u52e2\n* \u30dc\u30fc\u30f3\u9023\u7d50\n\n\u3053\u308c\u304c\u306a\u306b\u3092\u610f\u5473\u3059\u308b\u304b\u3068\u3044\u3046\u3068\u3001\u30dc\u30fc\u30f3\u306e\u521d\u671f\u5316\u304c\u7d42\u308f\u3063\u305f\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\u3053\u3053\u304b\u3089\u306f **\u30dc\u30fc\u30f3\u3092\u3069\u3046\u52d5\u304b\u3059\u304b** \u3092\u8a08\u7b97\u3059\u308b\u308f\u3051\u3067\u3059\u3002\n\uff08\u306a\u306e\u3067\u6975\u7aef\u306a\u8a71\u3001\u30dc\u30fc\u30f3\u3092\u307e\u3063\u305f\u304f\u52d5\u304b\u3055\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u3001\u3053\u3053\u3092\u98db\u3070\u3057\u3066\u6b21\u306e\u300c\u5408\u6210\u884c\u5217\u300d\u3092\u751f\u6210\u3057\u3066\u3082\u554f\u984c\u306a\u304f\u52d5\u304f\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\uff09\n\n### \u5dee\u5206\u3092\u8a08\u7b97\u3059\u308b\n\n\u3067\u306f\u5b9f\u969b\u306b\u30dc\u30fc\u30f3\u3092\u52d5\u304b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u4eca\u56de\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u306f\u5358\u7d14\u306b\u3001\u3059\u3079\u3066\u306e\u30dc\u30fc\u30f3\u3092\u5c11\u3057\u3060\u3051\u56de\u8ee2\u3055\u305b\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u30dc\u30fc\u30f3\u306f\u3044\u308f\u3086\u308b\u30c4\u30ea\u30fc\u69cb\u9020\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u3059\u3079\u3066\u306e\u30dc\u30fc\u30f3\u3092\u540c\u3058\u89d2\u5ea6\u3060\u3051\u66f2\u3052\u3066\u3044\u3051\u3070\u3001\u81ea\u52d5\u7684\u306b\u30ab\u30fc\u30d6\u3092\u63cf\u304f\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n![sample.jpg](https://qiita-image-store.s3.amazonaws.com/0/5616/56c3ae10-db7e-7ff8-8b1b-395725d7c2f6.jpeg \"sample.jpg\")\n*\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059*\n\n\n#### \u56de\u8ee2\u3092\u8a08\u7b97\n\n```js:delta\n// count\u306f\u30d5\u30ec\u30fc\u30e0\u3054\u3068\u306b\u5897\u52a0\u3057\u3066\u3044\u304f\nvar s = Math.sin(count) / 5;\n\nfor (var i = 0; i < bones.length; i++) {\n\t// `s`\u89d2\u5ea6\u3060\u3051\u5168\u30dc\u30fc\u30f3\u3092\u56de\u8ee2\u3055\u305b\u308b\n    bones[i].rotate(s, axis);\n}\n\n// \u5408\u6210\u884c\u5217\u3092\u66f4\u65b0\nBone.updateBone(bones[0], global);\n```\n\n\n\n## \u5408\u6210\u884c\u5217\n\n\u3055\u3066\u3001\u3044\u3088\u3044\u3088\u4ed5\u4e0a\u3052\u3067\u3059\u3002\n\n\u4eca\u307e\u3067\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u305f\u884c\u5217\u305f\u3061\u3092\u4f7f\u3063\u3066\u3001\u6700\u7d42\u7684\u306b\u4f7f\u3046\u5408\u6210\u884c\u5217\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u5408\u6210\u884c\u5217\u306f\u89aa\u30dc\u30fc\u30f3\u306e\u5ea7\u6a19\u3082\u5fc5\u8981\u306b\u306a\u308b\u306e\u3067\u3001\u30d8\u30eb\u30d1\u30fc\u30e1\u30bd\u30c3\u30c9\u3092\u4f5c\u308a\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n```js:updateBone\n/**\n * \u5404\u7a2e\u30dc\u30fc\u30f3\u306e\u5408\u6210\u884c\u5217\u3092\u751f\u6210\n */\nBone.updateBone = function (bone, parentWorldMat) {\n    // \u89aa\u306e\u59ff\u52e2\u884c\u5217\uff08\u30dc\u30fc\u30f3\u884c\u5217\uff09\u3092\u5de6\u304b\u3089\u81ea\u8eab\u306e\u59ff\u52e2\u884c\u5217\u306b\u639b\u3051\u308b\n    mat4.multiply(parentWorldMat, bone.matrixBone, bone.matrixBone);\n\n    // \u81ea\u8eab\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u3092\u53f3\u304b\u3089\u639b\u3051\u3066\u5408\u6210\u884c\u5217\u3092\u751f\u6210\n    mat4.multiply(bone.matrixBone, bone.matrixOffset, bone.matrixComb);\n\n    bone.children.forEach(function (childBone, idx) {\n        Bone.updateBone(childBone, bone.matrixBone);\n    });\n};\n```\n\n\u89aa\u306e\u30dc\u30fc\u30f3\u884c\u5217\u3092\u3001\u81ea\u8eab\u306e\u30dc\u30fc\u30f3\u884c\u5217\u306b\u639b\u3051\u3066\u3001\u3055\u3089\u306b\u81ea\u8eab\u306e\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u3092\u639b\u3051\u307e\u3059\u3002\n*\uff08\u304b\u3051\u308b\u9806\u756a\u306b\u6ce8\u610f\uff09*\n\n\u306a\u306b\u3092\u3057\u3066\u3044\u308b\u304b\u3068\u3044\u3046\u3068\u3001\u305f\u3093\u306b **\u7d76\u5bfe\u5ea7\u6a19\u306b\u623b\u3059** \u3068\u3044\u3046\u3053\u3068\u3092\u3084\u3063\u3066\u3044\u307e\u3059\u3002\n\u89aa\u306e\u5ea7\u6a19\u5909\u63db\u884c\u5217\u3092\u639b\u3051\u308b\u3053\u3068\u3067\u3001\u89aa\u306e\u7a7a\u9593\u3067\u306e\u5ea7\u6a19\u7cfb\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u308c\u3092\u518d\u5e30\u7684\u306b\u7e70\u308a\u8fd4\u305b\u3070\u3001\u3059\u3079\u3066\u306e\u30dc\u30fc\u30f3\u304c\u30ef\u30fc\u30eb\u30c9\u7a7a\u9593\u4e0a\u3067\u306e\u7d76\u5bfe\u5ea7\u6a19\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u305d\u3057\u3066\u6700\u5f8c\u306b\u3001\u4e00\u756a\u6700\u521d\u306b\u8a08\u7b97\u3057\u3066\u304a\u3044\u305f **\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217** \u3092\u304b\u3051\u308b\u3053\u3068\u3067\u3001\u30dc\u30fc\u30f3\u306e\u521d\u671f\u4f4d\u7f6e\u304b\u3089\u306e\u5dee\u5206\u4f4d\u7f6e\u306b\u30dc\u30fc\u30f3\u304c\u79fb\u52d5\u3059\u308b\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\n\n### \u30dc\u30fc\u30f3\u884c\u5217\uff1f\n\n\u5b9f\u306f\u4e0a\u8a18\u307e\u3067\u3067\u3001\u30dc\u30fc\u30f3\u884c\u5217\u3092\u8a08\u7b97\u3057\u3066\u3044\u308b\u7b87\u6240\u304c\u3042\u308a\u307e\u305b\u3093\u3002\n\u3053\u308c\u306f\u306a\u306b\u3092\u3057\u3066\u3044\u308b\u304b\u3068\u3044\u3046\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30dc\u30fc\u30f3\u30af\u30e9\u30b9\u306e\u30e1\u30bd\u30c3\u30c9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\uff08\u4f8b\u306f\u56de\u8ee2\uff09\n\n```js:rotate\n//\u3000\u4e2d\u7565\nrotate: function (angle, axis) {\n    mat4.rotate(this.matrix, angle, axis, this.matrix);\n    this.updateMatrix();\n},\n// \u4e2d\u7565\nupdateMatrix: function () {\n    mat4.multiply(this.matrixInit, this.matrix, this.matrixBone);\n},\n```\n\n`this.matrix`\u306f\u3001\u3061\u3087\u3063\u3068\u524d\u306b\u51fa\u3066\u304d\u305f\u5dee\u5206\u884c\u5217\u3092\u8868\u3057\u307e\u3059\u3002\n\u3053\u308c\u306b\u3001\u3069\u3046\u3044\u3046\u79fb\u52d5\u3084\u56de\u8ee2\u304c\u884c\u308f\u308c\u305f\u304b\u3092\u4fdd\u6301\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u305d\u3057\u3066\u6700\u5f8c\u306e`this.updateMatrix`\u30e1\u30bd\u30c3\u30c9\u3067\u3001\u89aa\u306b\u5bfe\u3059\u308b\u76f8\u5bfe\u884c\u5217\u3068\u306a\u3063\u305f`matrixInit`\u3068\u304b\u3051\u3066\u3084\u308b\u3053\u3068\u3067\u3001\u89aa\u7a7a\u9593\u304b\u3089\u898b\u305f\u4f4d\u7f6e\u304cupdate\u3055\u308c\u307e\u3059\u3002\n\n### \u5408\u6210\u884c\u5217\u306e\u610f\u5473\n\n\u5408\u6210\u884c\u5217\u306f\u6700\u7d42\u7684\u306b **\u9802\u70b9\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u884c\u5217** \u3067\u3059\u3002\n\u4eee\u306b\u30dc\u30fc\u30f3\u3092\u306a\u306b\u3082\u52d5\u304b\u3057\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u8003\u3048\u308b\u3068\u5206\u304b\u308a\u3084\u3059\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n*\uff08\u305d\u3057\u3066\u30eb\u30fc\u30c8\u30dc\u30fc\u30f3\u306e\u521d\u671f\u4f4d\u7f6e\u306f\u9069\u5f53\u306b\uff0815, 8\uff09\u3068\u304b\u3068\u8003\u3048\u3066\u304f\u3060\u3055\u3044\uff09*\n\n\u306a\u306b\u3082\u3057\u3066\u3044\u306a\u3044\u308f\u3051\u3067\u3059\u304b\u3089\u3001\u666e\u901a\u306f\u30e2\u30c7\u30eb\uff08\u9802\u70b9\uff09\u306b\u5909\u5316\u306f\u3042\u308a\u307e\u305b\u3093\u306d\u3002\n\u8a08\u7b97\u3057\u3066\u3082\u5909\u5316\u304c\u306a\u3044\u884c\u5217\u30fb\u30fb\u30fb\u3064\u307e\u308a\u3001\u5408\u6210\u884c\u5217\u3092\u8a08\u7b97\u3059\u308b\u3068 **\u5358\u4f4d\u884c\u5217** \u3068\u306a\u308a\u307e\u3059\u3002\n\n\u3053\u308c\u304c\u30aa\u30d5\u30bb\u30c3\u30c8\u884c\u5217\u3092\u6c42\u3081\u3066\u304a\u304f\u610f\u5473\u3067\u3059\u3002\n\u3042\u3068\u306f\u3001\u30dc\u30fc\u30f3\u3092\u52d5\u304b\u3057\u305f\u3044\u3088\u3046\u306b\u5e73\u884c\u79fb\u52d5\u3001\u56de\u8ee2\u3092\u3055\u305b\u3066\u3044\u3051\u3070\u3001\u5358\u4f4d\u884c\u5217\u306b\u5bfe\u3057\u3066\u5f90\u3005\u306b\u5909\u5316\u304c\u84c4\u7a4d\u3055\u308c\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u7d50\u679c\u3001\u30dc\u30fc\u30f3\u304c\u52d5\u304f\u3053\u3068\u3067\u3001\u95a2\u9023\u4ed8\u3051\u3089\u308c\u305f\u30e2\u30c7\u30eb\u304c\u52d5\u304f\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\n\n## \u9802\u70b9\u306b\u30dc\u30fc\u30f3\u306e\u5f71\u97ff\u3092\u53cd\u6620\u3055\u305b\u308b\n\n\u3055\u3066\u3001\u30dc\u30fc\u30f3\u306e\u8a08\u7b97\u306f\u4ee5\u4e0a\u3067\u3059\u3002\n\u305f\u3060\u3001\u30dc\u30fc\u30f3\u306e\u8a08\u7b97\u304c\u7d42\u308f\u3063\u3066\u3082\u3001\u305d\u308c\u3092\u5404\u7a2e\u9802\u70b9\u306b\u53cd\u6620\u3057\u306a\u3044\u3068\u307e\u3063\u305f\u304f\u610f\u5473\u304c\u3042\u308a\u307e\u305b\u3093\u306d\u3002\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u8a08\u7b97\u3055\u308c\u305f\u30dc\u30fc\u30f3\u3092\u9802\u70b9\u306b\u9069\u7528\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n*\uff08\u3061\u306a\u307f\u306b\u30dc\u30fc\u30f3\u306e\u5408\u6210\u884c\u5217\u306e\u9069\u7528\u306f\u3001\u4eca\u56de\u306fJS\u4e0a\u3067\u884c\u3063\u3066\u3044\u307e\u3059\u3002\u9802\u70b9\u3092\u3044\u3058\u308b\u306e\u3060\u304b\u3089\u672c\u6765\u306f\u9802\u70b9\u30b7\u30a7\u30fc\u30c0\u306e\u4ed5\u4e8b\u3060\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u77e5\u8b58\u4e0d\u8db3\u306a\u306e\u3068WebGL\u3067\u306e\u53d6\u308a\u6271\u3044\u304b\u305f\u304c\u5206\u304b\u3089\u305a\u3001\u4eca\u56de\u306fJS\u3067\u884c\u3063\u3066\u3044\u307e\u3059\uff09*\n\n\u307e\u305a\u306f\u30b3\u30fc\u30c9\u304b\u3089\u3002\n\n```js:apply-bone-weight\nvar newPosition = [];\nvar newNormal   = [];\nfor (var i = 0; i < 12; i++) {\n    var idxBase = i * 3;\n    var idx0 = idxBase + 0;\n    var idx1 = idxBase + 1;\n    var idx2 = idxBase + 2;\n    \n    var comb1 = [\n        mat4(),\n        mat4(),\n        mat4(),\n        mat4()\n    ];\n    var comb2 = mat4.zero;\n\n    for (var j = 0; j < 3; j++) {\n        var boneIdx   = i * 4 + j;\n        var weightIdx = i * 3 + j;\n        mat4.multiplyScalar(combMatArr[plane.boneIndices[boneIdx]], plane.weights[weightIdx], comb1[j]);\n    }\n    var weight = 1.0 - (plane.weights[i * 3 + 0] +\n                        plane.weights[i * 3 + 1] +\n                        plane.weights[i * 3 + 2]);\n    mat4.multiplyScalar(combMatArr[plane.boneIndices[i * 4 + 3]], weight, comb1[3]);\n\n    for (var k = 0; k < 4; k++) {\n        mat4.add(comb2, comb1[k], comb2);\n    }\n\n    var pos = vec3(plane.position[idx0],\n                   plane.position[idx1],\n                   plane.position[idx2]);\n\n    vec3.applyMatrix4(pos, comb2, pos);\n    newPosition[idx0] = pos.x;\n    newPosition[idx1] = pos.y;\n    newPosition[idx2] = pos.z;\n\n    var nor = vec3(plane.normal[idx0],\n                   plane.normal[idx1],\n                   plane.normal[idx2]);\n    mat4.inverse(comb2, comb2);\n\n    vec3.applyMatrix4FromRight(nor, comb2, nor);\n    newNormal[idx0] = nor.x;\n    newNormal[idx1] = nor.y;\n    newNormal[idx2] = nor.z;\n}\n```\n\n\u307e\u305a\u3001\u306a\u306b\u3092\u3084\u3063\u3066\u3044\u308b\u304b\u5927\u307e\u304b\u306a\u6d41\u308c\u3092\u66f8\u304f\u3068\u3001\n\n1. \u5168\u9802\u70b9\uff08\u30b5\u30f3\u30d7\u30eb\u3067\u306f12\u9802\u70b9\uff09\u305d\u308c\u305e\u308c\u306b\u8a08\u7b97\u3092\u884c\u3046\n* \u9802\u70b9\u60c5\u5831\u3068\u3057\u3066\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u5024\u3092\u5143\u306b\u3001\u30dc\u30fc\u30f3\u306e\u5408\u6210\u884c\u5217\u306e\u91cd\u307f\u4ed8\u3051\u3092\u8a08\u7b97\u3059\u308b\uff08`multiplyScalar`\uff09\n* \u91cd\u307f\u4ed8\u3051\u3092\u3057\u305f\u5408\u6210\u884c\u5217\u306e\u5408\u8a08\u3092\u8a08\u7b97\u3059\u308b\uff08`add`\uff09\n* \u5f97\u305f\u884c\u5217\u3092\u9802\u70b9\u3001\u6cd5\u7dda\u305d\u308c\u305e\u308c\u306b\u639b\u3051\u308b\n\n\u9806\u756a\u306b\u898b\u3066\u884c\u304d\u307e\u3057\u3087\u3046\u3002\n\n### \u9802\u70b9\u3054\u3068\u306b\u8a08\u7b97\u3092\u884c\u3046\n\n\u4eca\u56de\u306e\u30b5\u30f3\u30d7\u30eb\u306f\u7c21\u5358\u306b\u3059\u308b\u305f\u3081\u3001\u5168\u90e8\u306712\u9802\u70b9\u3067\u3059\u3002\n\u306a\u306e\u3067for\u30eb\u30fc\u30d7\u306712\u56de\u30eb\u30fc\u30d7\u3092\u56de\u3057\u3066\u3044\u307e\u3059\u3002\n\u3064\u307e\u308a\u9802\u70b9\u3054\u3068\u306b\u8a08\u7b97\u3092\u884c\u3063\u3066\u3044\u308b\u308f\u3051\u3067\u3059\u306d\u3002\n\u3053\u308c\u304c\u30e2\u30c7\u30ea\u30f3\u30b0\u30c4\u30fc\u30eb\u306a\u3069\u304b\u3089\u5f97\u3089\u308c\u305f\u3082\u306e\u306a\u3089\u3001\u81a8\u5927\u306a\u6570\u306e\u9802\u70b9\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u57fa\u672c\u306f\u5909\u308f\u308a\u307e\u305b\u3093\u3002\n\n\n### \u5408\u6210\u884c\u5217\u306b\u91cd\u307f\u4ed8\u3051\u3092\u3059\u308b\n\n\u9802\u70b9\u5b9a\u7fa9\u306e\u3068\u304d\u306b\u898b\u305f\u3088\u3046\u306b\u3001\u5404\u9802\u70b9\u306b\u306f\u3069\u306e\u30dc\u30fc\u30f3\u304b\u3089\u3069\u308c\u304f\u3089\u3044\u5f71\u97ff\u3092\u3046\u3051\u308b\u304b\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3057\u305f\u3002\n\u305d\u308c\u3092\u5143\u306b\u3001\u5404\u7a2e\u5408\u6210\u884c\u5217\uff08\u3064\u307e\u308a\u30dc\u30fc\u30f3\uff09\u306b\u91cd\u307f\u4ed8\u3051\u3092\u3057\u3066\u8a08\u7b97\u3092\u3057\u307e\u3059\u3002\n\n\u629c\u7c8b\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u90e8\u5206\u3067\u3059\u3002\n\n```js:weights\nfor (var j = 0; j < 3; j++) {\n    var boneIdx   = i * 4 + j;\n    var weightIdx = i * 3 + j;\n    mat4.multiplyScalar(combMatArr[plane.boneIndices[boneIdx]], plane.weights[weightIdx], comb1[j]);\n}\n```\n\n#### \u30dc\u30fc\u30f3\u3092\u3042\u3089\u308f\u3059\u914d\u5217\u300ccombMatArr\u300d\n\n`combMatArr`\u306f\u3001\u5c11\u3057\u524d\u3067\u8a08\u7b97\u3057\u305f\u30dc\u30fc\u30f3\u306e\u5408\u6210\u884c\u5217\u3092\u683c\u7d0d\u3057\u305f\u914d\u5217\u3067\u3059\u3002\n\u4eca\u56de\u306f\u30b0\u30ed\u30fc\u30d0\u30eb\u306a\u9818\u57df\u306b\u304a\u3044\u3066\u3044\u307e\u3059\u304c\u3001\u5b9f\u969b\u306f\u30dc\u30fc\u30f3\u3092\u7ba1\u7406\u3059\u308b\u30af\u30e9\u30b9\u306a\u3069\u3067\u7ba1\u7406\u3055\u308c\u308b\u3079\u304d\u3082\u306e\u3067\u3057\u3087\u3046\u3002\n\n\u3053\u3053\u3067\u306f\u5358\u7d14\u306b\u3001\u8a72\u5f53\u306e\u30dc\u30fc\u30f3\u306e\u60c5\u5831\u3092\u53d6\u308a\u51fa\u3057\u3066\u91cd\u307f\u3092\u639b\u3051\u3066\u3044\u308b\u3001\u3068\u8003\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n### \u5408\u6210\u884c\u5217\u306e\u5408\u8a08\u3092\u5f97\u308b\n\n\u91cd\u307f\u4ed8\u3051\u3092\u3057\u305f\u5408\u6210\u884c\u5217\u304c\u8a08\u7b97\u3067\u304d\u305f\u3089\u3001\u3042\u3068\u306f\u305d\u308c\u3092\u5358\u7d14\u306b\u8db3\u3057\u5408\u308f\u305b\u307e\u3059\u3002\n\u91cd\u307f\u4ed8\u3051\u306f\u5408\u8a08\u304c1\u306b\u306a\u308b\u3088\u3046\u306b\u8a08\u7b97\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u8a2d\u5b9a\u3055\u308c\u305f\u5024\u306b\u3088\u3063\u3066\u9069\u5207\u306b\u30dc\u30fc\u30f3\u306e\u5f71\u97ff\u3092\u53d7\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\uff08\u4eee\u306b\u3072\u3068\u3064\u306e\u30dc\u30fc\u30f3\u304b\u3089\u306e\u307f\u5f71\u97ff\u3092\u53d7\u3051\u308b\u3088\u3046\u306b\u3057\u305f\u3089\u3001\u305d\u306e\u30dc\u30fc\u30f3\u4ee5\u5916\u306e\u5408\u6210\u884c\u5217\u306e\u5024\u306f\u3059\u3079\u30660\u306b\u306a\u308a\u307e\u3059\u306d\uff09\n\n\n### \u6700\u7d42\u7d50\u679c\u3092\u53cd\u6620\u3059\u308b\n\n\u3084\u3063\u3068\u30b4\u30fc\u30eb\u304c\u898b\u3048\u3066\u304d\u307e\u3057\u305f\u3002\n\u4ee5\u4e0a\u3067\u3001\u3069\u306e\u9802\u70b9\u306b\u3069\u3046\u3044\u3046\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u3079\u304d\u304b\u306e\u8a08\u7b97\u304c\u7d42\u308f\u308a\u307e\u3057\u305f\u3002\n\u3042\u3068\u306f\u3053\u308c\u3092\u5404\u7a2e\u9802\u70b9\u60c5\u5831\u306b\u639b\u3051\u3066\u3042\u3052\u308c\u3070\u5b8c\u6210\u3067\u3059\u3002\n\n\u304c\u3001\u5c11\u3057\u3060\u3051\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u30b3\u30fc\u30c9\u3092\u898b\u3066\u307f\u308b\u3068\u3001\u300c\u9802\u70b9\u4f4d\u7f6e\u306e\u8a08\u7b97\u300d\u3068\u300c\u6cd5\u7dda\u3068\u306e\u8a08\u7b97\u3067\u300d\u82e5\u5e72\u9055\u3044\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u5177\u4f53\u7684\u306b\u306f\u4ee5\u4e0b\u3067\u3059\u3002\n\n```js:position-matrix\nvar pos = vec3(plane.position[idx0],\n               plane.position[idx1],\n               plane.position[idx2]);\n\nvec3.applyMatrix4(pos, comb2, pos);\nnewPosition[idx0] = pos.x;\nnewPosition[idx1] = pos.y;\nnewPosition[idx2] = pos.z;\n```\n\n```js:normal-matrix\nvar nor = vec3(plane.normal[idx0],\n               plane.normal[idx1],\n               plane.normal[idx2]);\nmat4.inverse(comb2, comb2);\n\nvec3.applyMatrix4FromRight(nor, comb2, nor);\nnewNormal[idx0] = nor.x;\nnewNormal[idx1] = nor.y;\nnewNormal[idx2] = nor.z;\n```\n\n\u9802\u70b9\u4f4d\u7f6e\u306e\u5834\u5408\u306f\u5358\u7d14\u306b`vec3.applyMatrix4`\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3063\u3066\u3001\u9802\u70b9\u4f4d\u7f6e\u306b\u884c\u5217\u3092\u9069\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\u4e00\u65b9\u3001\u6cd5\u7dda\u306e\u307b\u3046\u306f\u82e5\u5e72\u3084\u3084\u3053\u3057\u3044\u8a08\u7b97\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\n#### \u6cd5\u7dda\u306b\u306f\u300c\u8ee2\u7f6e\u9006\u884c\u5217\u300d\u3092\u639b\u3051\u308b\n\n\u8a08\u7b97\u306f\u3001\u5f97\u305f\u884c\u5217\u306e **\u9006\u884c\u5217** \u3092\u639b\u3051\u3001\u3055\u3089\u306b\u9069\u7528\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3082\u82e5\u5e72\u9055\u3046\u3082\u306e\u304c\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u306f\u306a\u306b\u3092\u3057\u3066\u3044\u308b\u304b\u3068\u3044\u3046\u3068\u3001\uff08\u81ea\u5206\u3082\u3057\u3063\u304b\u308a\u7406\u89e3\u3067\u304d\u3066\u3044\u307e\u305b\u3093\u304c\uff09\u6cd5\u7dda\u306e\u5834\u5408\u306f\u5358\u7d14\u306b\u5ea7\u6a19\u5909\u63db\u884c\u5217\u3092\u639b\u3051\u308b\u3068\u9593\u9055\u3063\u305f\u7b54\u3048\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u305f\u3060\u3001**\u8ee2\u7f6e\u9006\u884c\u5217** \u3092\u639b\u3051\u308b\u3053\u3068\u3067\u3001\u305d\u306e\u554f\u984c\u304c\u89e3\u6c7a\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n*\uff08[\u6cd5\u7dda\u306e\u5909\u63db\u306e\u8a71](http://raytracing.hatenablog.com/entry/20130325/1364229762)\u3068\u3044\u3046\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\uff09*\n\n\u3053\u308c\u3092\u5b9f\u73fe\u3057\u3066\u3044\u308b\u306e\u304c\u4e0a\u8a18\u306e\u30b3\u30fc\u30c9\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u306d\u3002\n`mat4.inverse`\u306f\u9006\u884c\u5217\u3092\u5f97\u308b\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u3002\n\u304c\u3001\u672c\u6765\u306f\u8ee2\u7f6e\u884c\u5217\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u3053\u306f\u5c11\u3057\u305a\u308b\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\n`vec3.applyMatrix4FromRight`\u30e1\u30bd\u30c3\u30c9\u306f\u3001\u30d9\u30af\u30c8\u30eb\u306e\u300c\u53f3\u5074\u300d\u304b\u3089\u884c\u5217\u3092\u9069\u7528\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u3002\n*\uff08\u901a\u5e38\u3001OpenGL\u7cfb\u3067\u306f\u300c\u5de6\u5074\u300d\u304b\u3089\u884c\u5217\u3092\u639b\u3051\u307e\u3059\uff09*\n\n\u3067\u3059\u304c\u3001\u30e1\u30bd\u30c3\u30c9\u540d\u306e\u901a\u308a\u3001\u884c\u5217\u3092\u53f3\u304b\u3089\u639b\u3051\u308b\u3053\u3068\u3067\u8ee2\u7f6e\u884c\u5217\u3092\u9069\u7528\u3057\u305f\u3053\u3068\u3068\u540c\u3058\u7d50\u679c\u3092\u5f97\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\n\u3042\u3068\u306f\u3001\u3053\u3053\u3067\u5f97\u305f\u65b0\u3057\u3044\u9802\u70b9\u4f4d\u7f6e\u3068\u6cd5\u7dda\u3092\u3001\u65b0\u3057\u3044\u914d\u5217\u306b\u5165\u308c\u3001\u305d\u306e\u9802\u70b9\u30d0\u30c3\u30d5\u30a1\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08VBO\uff09\u3092\u751f\u6210\u3057\u3066\u305d\u308c\u3092WebGL\u306b\u9001\u3063\u3066\u3084\u308c\u3070\u3081\u3067\u305f\u304f\u30dc\u30fc\u30f3\u306e\u5f71\u97ff\u3092\u53d7\u3051\u305f\u9802\u70b9\u304c\u63cf\u304b\u308c\u308b\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\n\n\u3060\u3044\u3076\u9577\u3044\u8a18\u4e8b\u306b\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u30fb\u30fb( ;\u00b4\u0414`)\n\n\u5192\u982d\u3067\u3082\u66f8\u304d\u307e\u3057\u305f\u304c\u3001\u3053\u306e\u8a18\u4e8b\u306e\u30b5\u30f3\u30d7\u30eb\u306fjsdo.it\uff08[\u30b9\u30ad\u30cb\u30f3\u30b0\u30e1\u30c3\u30b7\u30e5\uff08\u30dc\u30fc\u30f3\uff09\u3067\u6cd5\u7dda\u60c5\u5831\u3082\u6271\u3046](http://jsdo.it/edo_m18/fPKD)\uff09\u306b\u4e0a\u304c\u3063\u3066\u3044\u308b\u306e\u3067\u898b\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n", "tags": ["WebGL", "Shader", "Bone"]}