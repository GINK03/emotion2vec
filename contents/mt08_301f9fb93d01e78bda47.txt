{"context": "\n\n\u6982\u8981\n\n\n\u3089\u305a\u3071\u3044\u306bJupyter notebook \u306e\u3064\u3065\u304d\nGitHub - jupyterhub/jupyterhub: Multi-user server for Jupyter notebooks\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u30de\u30eb\u30c1\u30e6\u30fc\u30b6\u5bfe\u5fdc\u3002\n\nJupyterHub\n\nWith JupyterHub you can create a multi-user Hub which spawns, manages, and proxies multiple instances of the single-user Jupyter notebook (IPython notebook) server.\nJupyterHub provides single-user notebook servers to many users. For example, JupyterHub could serve notebooks to a class of students, a corporate workgroup, or a science research group.\nJupyterHub\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u30b7\u30f3\u30b0\u30eb\u30e6\u30fc\u30b6\u30fcJupyter\u30ce\u30fc\u30c8\u30d6\u30c3\u30af\uff08IPython\u30ce\u30fc\u30c8\uff09\u30b5\u30fc\u30d0\u30fc\u306e\u8907\u6570\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30b9\u30dd\u30fc\u30f3\u3001\u7ba1\u7406\u3001\u30d7\u30ed\u30af\u30b7\u3059\u308b\u30de\u30eb\u30c1\u30e6\u30fc\u30b6\u30cf\u30d6\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002JupyterHub\u306f\u3001\u591a\u304f\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u30b7\u30f3\u30b0\u30eb\u30fb\u30e6\u30fc\u30b6\u30fb\u30ce\u30fc\u30c8\u30d6\u30c3\u30af\u30fb\u30b5\u30fc\u30d0\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001JupyterHub\u306f\u5b66\u751f\u306e\u30af\u30e9\u30b9\u3001\u4f01\u696d\u306e\u30ef\u30fc\u30af\u30b0\u30eb\u30fc\u30d7\u3001\u307e\u305f\u306f\u79d1\u5b66\u7814\u7a76\u30b0\u30eb\u30fc\u30d7\u306b\uff08Jupyter)notebook\u3092\u63d0\u4f9b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u3060\u305d\u3046\u3067\u3059. (\u2191\u30b0\u30fc\u30b0\u30eb\u7ffb\u8a33\u6539)\n\nSSL\u95a2\u4fc2\u306f\u3084\u3089\u306a\u3044.\n\n\n\u74b0\u5883\n\nRaspberry Pi 3\n2016-05-27-raspbian-jessie-lite.img\nmicroSD 8GB\n\n\u3089\u305a\u3071\u3044\u306bJupyter notebook \u306e\u3064\u3065\u304d\u306b\u306a\u308b\u306e\u3067\u3001Jupyter\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u74b0\u5883\n\n\n\u624b\u9806\n\nnodejs/npm\n\nsudo apt-get install npm nodejs-legacy\nsudo npm install -g configurable-http-proxy\n\n\nJupyterHub\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\u7ba1\u7406\u30e6\u30fc\u30b6jupyterhub\u8ffd\u52a0\n# JupyterHub\u3068SudoSpawner\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb.\nsudo pip3 install jupyterhub\nsudo pip install git+https://github.com/jupyter/sudospawner\n#\n# \u30e6\u30fc\u30b6jupyterhub\u4f5c\u6210. /etc/shadow\u306b\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u6301\u3064\u30d5\u30a1\u30a4\u30eb\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0.\nsudo useradd jupyterhub\nsudo usermod -a -G shadow jupyterhub\nsudo mkdir /etc/jupyterhub\nsudo chown jupyterhub /etc/jupyterhub\ncd /etc/jupyterhub\nsudo -u jupyterhub jupyterhub --generate-config\n\n\n\nsudo -u jupyterhub vi /etc/jupyterhub/jupyterhub_config.py3\u7b87\u6240\u5909\u66f4\n\n/etc/jupyterhub/jupyterhub_config.py\n...\nc.JupyterHub.confirm_no_ssl = True\n...\nc.JupyterHub.spawner_class = 'sudospawner.SudoSpawner'\n...\nc.Spawner.notebook_dir = '~/notebooks'\n...\n\n\n\n\nsudo visudo\n\n\nJUPYTER_USERS\u306b\u4f7f\u7528\u3059\u308b\u30e6\u30fc\u30b6\u3092\u5165\u308c\u308b\u3002\n\n\n\u4ee5\u4e0b\u8ffd\u52a0\n...\n# comma-separated whitelist of users that can spawn single-user servers\nRunas_Alias JUPYTER_USERS = pi, jns\n\n# the command(s) the Hub can run on behalf of the above users without needing a password# the exact path may differ, depending on how sudospawner was installed\nCmnd_Alias JUPYTER_CMD = /usr/local/bin/sudospawner\n\n# actually give the Hub user permission to run the above command on behalf# of the above users without prompting for a password\njupyterhub ALL=(JUPYTER_USERS) NOPASSWD:JUPYTER_CMD\n\n\n\nsudo -u pi mkdir ~/notebooks\u4f7f\u7528\u3059\u308b\u30e6\u30fc\u30b6\u306e\u30db\u30fc\u30e0\u30d5\u30a9\u30eb\u30c0\u306b notebooks \u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\u3059\u308b. \n\n\u52d5\u4f5c\u78ba\u8a8d\ncd /etc/jupyterhub;  sudo -u jupyterhub /usr/local/bin/jupyterhub\n\u30d6\u30e9\u30a6\u30b6\u3092\u7acb\u3061\u4e0a\u3052\u3066\u3001http://<\u30e9\u30ba\u30d9\u30ea\u30fc\u30d1\u30a4\u306eIP>:8000/\u3078\u30a2\u30af\u30bb\u30b9\u3002\nLinux\u306e\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u30fb\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u3044\u308c\u3066\u3001Jupyter Notebook\u306e\u30da\u30fc\u30b8\u3078\u3059\u3059\u3081\u3070OK.\n\n\u5b9f\u884c\u4f8b\npi@raspberrypi:~ $ cd /etc/jupyterhub;  sudo -u jupyterhub /usr/local/bin/jupyterhub\n[I 2016-08-21 06:56:01.839 JupyterHub app:622] Loading cookie_secret from /etc/jupyterhub/jupyterhub_cookie_secret\n[W 2016-08-21 06:56:02.009 JupyterHub app:304] \nGenerating CONFIGPROXY_AUTH_TOKEN. Restarting the Hub will require restarting the proxy.\nSet CONFIGPROXY_AUTH_TOKEN env or JupyterHub.proxy_auth_token config to avoid this message.\n\n[W 2016-08-21 06:56:02.030 JupyterHub app:757] No admin users, admin interface will be unavailable.\n[W 2016-08-21 06:56:02.030 JupyterHub app:758] Add any administrative users to `c.Authenticator.admin_users` in config.\n[I 2016-08-21 06:56:02.031 JupyterHub app:785] Not using whitelist. Any authenticated user will be allowed.\n[W 2016-08-21 06:56:03.107 JupyterHub app:883] pi not running.\n[W 2016-08-21 06:56:04.205 JupyterHub app:883] jns not running.\n[I 2016-08-21 06:56:04.259 JupyterHub app:1231] Hub API listening on http://127.0.0.1:8081/hub/\n[W 2016-08-21 06:56:04.276 JupyterHub app:959] Running JupyterHub without SSL. There better be SSL termination happening somewhere else...\n[I 2016-08-21 06:56:04.277 JupyterHub app:968] Starting proxy @ http://*:8000/\n06:56:05.087 - info: [ConfigProxy] Proxying http://*:8000 to http://127.0.0.1:8081\n06:56:05.098 - info: [ConfigProxy] Proxy API at http://127.0.0.1:8001/api/routes\n[I 2016-08-21 06:56:05.205 JupyterHub app:1254] JupyterHub is now running at http://127.0.0.1:8000/\n...\n... >>> \u30d6\u30e9\u30a6\u30b6\u3067\u30a2\u30af\u30bb\u30b9\n...\n[I 2016-08-21 06:56:17.998 JupyterHub log:100] 302 GET / (@127.0.0.1) 9.73ms\n[I 2016-08-21 06:56:18.033 JupyterHub log:100] 302 GET /hub (@127.0.0.1) 1.93ms\n[I 2016-08-21 06:56:18.069 JupyterHub log:100] 302 GET /hub/ (@127.0.0.1) 3.30ms\n[I 2016-08-21 06:56:18.253 JupyterHub log:100] 200 GET /hub/login (@127.0.0.1) 161.63ms\n\n\n\n\n\n\nsystemd\u3067\u81ea\u52d5\u8d77\u52d5\n\n\nsudo vi  /lib/systemd/system/jupyterhub.service\n\n/lib/systemd/system/jupyterhub.service\n[Unit]\nDescription=Jupyterhub\n\n[Service]\nUser=jupyterhub\nExecStart=/usr/local/bin/jupyterhub\nWorkingDirectory=/etc/jupyterhub\n\n[Install]\nWantedBy=multi-user.target\n\n\n\n\n\u30b5\u30fc\u30d3\u30b9\u6709\u52b9\u30fb\u958b\u59cb\u30fb\u72b6\u614b\nsudo systemctl enable jupyterhub\nsudo systemctl start jupyterhub\nsudo systemctl status jupyterhub\n\n\n\n\n\u305d\u306e\u4ed6\n\n\nc.JupyterHub.confirm_no_ssl = True\u3067 --no-ssl \u306b\u3057\u3066\u307e\u3059\u304c\u3001\u30b0\u30b0\u308b\u3068\u3059\u3050\u3067\u3066\u304d\u3066\u3001\u7c21\u5358\u306b\u5bfe\u5fdc\u3067\u304d\u305f\u3068\u601d\u3044\u307e\u3059\u3002(\u4e00\u5ea6\u3001\u52d5\u4f5c\u78ba\u8a8d\u3057\u3066\u307e\u3059\u304c\u3001\u30ed\u30fc\u30ab\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306a\u3089\u3044\u3089\u306a\u3044\u304b\u3068...\u8aac\u660e\u304c\u9762\u5012...)\n\n\n\n## \u6982\u8981\n- [\u3089\u305a\u3071\u3044\u306bJupyter notebook](http://qiita.com/mt08/items/edb9bcaeaa416d3e5319) \u306e\u3064\u3065\u304d\n- [GitHub - jupyterhub/jupyterhub: Multi-user server for Jupyter notebooks](https://github.com/jupyterhub/jupyterhub)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u30de\u30eb\u30c1\u30e6\u30fc\u30b6\u5bfe\u5fdc\u3002\n\n- JupyterHub\n    > *With JupyterHub you can create a multi-user Hub which spawns, manages, and proxies multiple instances of the single-user Jupyter notebook (IPython notebook) server.*\n    > *JupyterHub provides single-user notebook servers to many users. For example, JupyterHub could serve notebooks to a class of students, a corporate workgroup, or a science research group.*\nJupyterHub\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u30b7\u30f3\u30b0\u30eb\u30e6\u30fc\u30b6\u30fcJupyter\u30ce\u30fc\u30c8\u30d6\u30c3\u30af\uff08IPython\u30ce\u30fc\u30c8\uff09\u30b5\u30fc\u30d0\u30fc\u306e\u8907\u6570\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30b9\u30dd\u30fc\u30f3\u3001\u7ba1\u7406\u3001\u30d7\u30ed\u30af\u30b7\u3059\u308b\u30de\u30eb\u30c1\u30e6\u30fc\u30b6\u30cf\u30d6\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002JupyterHub\u306f\u3001\u591a\u304f\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u30b7\u30f3\u30b0\u30eb\u30fb\u30e6\u30fc\u30b6\u30fb\u30ce\u30fc\u30c8\u30d6\u30c3\u30af\u30fb\u30b5\u30fc\u30d0\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001JupyterHub\u306f\u5b66\u751f\u306e\u30af\u30e9\u30b9\u3001\u4f01\u696d\u306e\u30ef\u30fc\u30af\u30b0\u30eb\u30fc\u30d7\u3001\u307e\u305f\u306f\u79d1\u5b66\u7814\u7a76\u30b0\u30eb\u30fc\u30d7\u306b\uff08Jupyter)notebook\u3092\u63d0\u4f9b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n    \u3060\u305d\u3046\u3067\u3059. (\u2191\u30b0\u30fc\u30b0\u30eb\u7ffb\u8a33\u6539)\n- SSL\u95a2\u4fc2\u306f\u3084\u3089\u306a\u3044.\n\n\n## \u74b0\u5883\n- Raspberry Pi 3\n- `2016-05-27-raspbian-jessie-lite.img`\n- microSD 8GB\n- [\u3089\u305a\u3071\u3044\u306bJupyter notebook](http://qiita.com/mt08/items/edb9bcaeaa416d3e5319) \u306e\u3064\u3065\u304d\u306b\u306a\u308b\u306e\u3067\u3001Jupyter\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u74b0\u5883\n\n## \u624b\u9806\n\n### nodejs/npm\n1. `sudo apt-get install npm nodejs-legacy`\n2. `sudo npm install -g configurable-http-proxy`\n\n### JupyterHub\n\n1. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\u7ba1\u7406\u30e6\u30fc\u30b6`jupyterhub`\u8ffd\u52a0\n\n    ```bash\n# JupyterHub\u3068SudoSpawner\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb.\nsudo pip3 install jupyterhub\nsudo pip install git+https://github.com/jupyter/sudospawner\n#\n# \u30e6\u30fc\u30b6jupyterhub\u4f5c\u6210. /etc/shadow\u306b\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u6301\u3064\u30d5\u30a1\u30a4\u30eb\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0.\nsudo useradd jupyterhub\nsudo usermod -a -G shadow jupyterhub\nsudo mkdir /etc/jupyterhub\nsudo chown jupyterhub /etc/jupyterhub\ncd /etc/jupyterhub\nsudo -u jupyterhub jupyterhub --generate-config\n```\n\n2. `sudo -u jupyterhub vi /etc/jupyterhub/jupyterhub_config.py`<br>3\u7b87\u6240\u5909\u66f4\n\n    ```py:/etc/jupyterhub/jupyterhub_config.py\n...\nc.JupyterHub.confirm_no_ssl = True\n...\nc.JupyterHub.spawner_class = 'sudospawner.SudoSpawner'\n...\nc.Spawner.notebook_dir = '~/notebooks'\n...\n```\n\n3. `sudo visudo`\n    - `JUPYTER_USERS`\u306b\u4f7f\u7528\u3059\u308b\u30e6\u30fc\u30b6\u3092\u5165\u308c\u308b\u3002\n\n    ```txt:\u4ee5\u4e0b\u8ffd\u52a0\n...\n# comma-separated whitelist of users that can spawn single-user servers\nRunas_Alias JUPYTER_USERS = pi, jns\n\n    # the command(s) the Hub can run on behalf of the above users without needing a password# the exact path may differ, depending on how sudospawner was installed\nCmnd_Alias JUPYTER_CMD = /usr/local/bin/sudospawner\n\n    # actually give the Hub user permission to run the above command on behalf# of the above users without prompting for a password\njupyterhub ALL=(JUPYTER_USERS) NOPASSWD:JUPYTER_CMD\n```\n\n4. `sudo -u pi mkdir ~/notebooks`<br>\u4f7f\u7528\u3059\u308b\u30e6\u30fc\u30b6\u306e\u30db\u30fc\u30e0\u30d5\u30a9\u30eb\u30c0\u306b <font color='red'>**notebooks** \u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210</font>\u3059\u308b. \n\n5. \u52d5\u4f5c\u78ba\u8a8d\n`cd /etc/jupyterhub;  sudo -u jupyterhub /usr/local/bin/jupyterhub`\n\u30d6\u30e9\u30a6\u30b6\u3092\u7acb\u3061\u4e0a\u3052\u3066\u3001`http://<\u30e9\u30ba\u30d9\u30ea\u30fc\u30d1\u30a4\u306eIP>:8000/`\u3078\u30a2\u30af\u30bb\u30b9\u3002\nLinux\u306e\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u30fb\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u3044\u308c\u3066\u3001Jupyter Notebook\u306e\u30da\u30fc\u30b8\u3078\u3059\u3059\u3081\u3070OK.\n\n    ```bash:\u5b9f\u884c\u4f8b\npi@raspberrypi:~ $ cd /etc/jupyterhub;  sudo -u jupyterhub /usr/local/bin/jupyterhub\n[I 2016-08-21 06:56:01.839 JupyterHub app:622] Loading cookie_secret from /etc/jupyterhub/jupyterhub_cookie_secret\n[W 2016-08-21 06:56:02.009 JupyterHub app:304] \n    Generating CONFIGPROXY_AUTH_TOKEN. Restarting the Hub will require restarting the proxy.\n    Set CONFIGPROXY_AUTH_TOKEN env or JupyterHub.proxy_auth_token config to avoid this message.\n    \n    [W 2016-08-21 06:56:02.030 JupyterHub app:757] No admin users, admin interface will be unavailable.\n[W 2016-08-21 06:56:02.030 JupyterHub app:758] Add any administrative users to `c.Authenticator.admin_users` in config.\n[I 2016-08-21 06:56:02.031 JupyterHub app:785] Not using whitelist. Any authenticated user will be allowed.\n[W 2016-08-21 06:56:03.107 JupyterHub app:883] pi not running.\n[W 2016-08-21 06:56:04.205 JupyterHub app:883] jns not running.\n[I 2016-08-21 06:56:04.259 JupyterHub app:1231] Hub API listening on http://127.0.0.1:8081/hub/\n[W 2016-08-21 06:56:04.276 JupyterHub app:959] Running JupyterHub without SSL. There better be SSL termination happening somewhere else...\n[I 2016-08-21 06:56:04.277 JupyterHub app:968] Starting proxy @ http://*:8000/\n06:56:05.087 - info: [ConfigProxy] Proxying http://*:8000 to http://127.0.0.1:8081\n06:56:05.098 - info: [ConfigProxy] Proxy API at http://127.0.0.1:8001/api/routes\n[I 2016-08-21 06:56:05.205 JupyterHub app:1254] JupyterHub is now running at http://127.0.0.1:8000/\n...\n... >>> \u30d6\u30e9\u30a6\u30b6\u3067\u30a2\u30af\u30bb\u30b9\n...\n[I 2016-08-21 06:56:17.998 JupyterHub log:100] 302 GET / (@127.0.0.1) 9.73ms\n[I 2016-08-21 06:56:18.033 JupyterHub log:100] 302 GET /hub (@127.0.0.1) 1.93ms\n[I 2016-08-21 06:56:18.069 JupyterHub log:100] 302 GET /hub/ (@127.0.0.1) 3.30ms\n[I 2016-08-21 06:56:18.253 JupyterHub log:100] 200 GET /hub/login (@127.0.0.1) 161.63ms\n```\n![JupyterHub01.png](https://qiita-image-store.s3.amazonaws.com/0/75594/f8a7ffb5-13d8-c572-14be-29173490e729.png)\n\n\n### `systemd`\u3067\u81ea\u52d5\u8d77\u52d5\n\n1. `sudo vi  /lib/systemd/system/jupyterhub.service`\n\n    ```txt:/lib/systemd/system/jupyterhub.service\n[Unit]\nDescription=Jupyterhub\n\n    [Service]\nUser=jupyterhub\nExecStart=/usr/local/bin/jupyterhub\nWorkingDirectory=/etc/jupyterhub\n\n    [Install]\nWantedBy=multi-user.target\n```\n2. \u30b5\u30fc\u30d3\u30b9\u6709\u52b9\u30fb\u958b\u59cb\u30fb\u72b6\u614b\n\n    ```bash\nsudo systemctl enable jupyterhub\nsudo systemctl start jupyterhub\nsudo systemctl status jupyterhub\n```\n\n## \u305d\u306e\u4ed6\n- `c.JupyterHub.confirm_no_ssl = True`\u3067 `--no-ssl` \u306b\u3057\u3066\u307e\u3059\u304c\u3001\u30b0\u30b0\u308b\u3068\u3059\u3050\u3067\u3066\u304d\u3066\u3001\u7c21\u5358\u306b\u5bfe\u5fdc\u3067\u304d\u305f\u3068\u601d\u3044\u307e\u3059\u3002(\u4e00\u5ea6\u3001\u52d5\u4f5c\u78ba\u8a8d\u3057\u3066\u307e\u3059\u304c\u3001\u30ed\u30fc\u30ab\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306a\u3089\u3044\u3089\u306a\u3044\u304b\u3068...\u8aac\u660e\u304c\u9762\u5012...)\n", "tags": ["RaspberryPi", "Jupyter", "Linux"]}