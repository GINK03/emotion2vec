{"context": "vim\u3067\u30a4\u30f3\u30b5\u30fc\u30c8\u30e2\u30fc\u30c9\u3092\u629c\u3051\u308b\u6642\u306e\u3042\u308c\uff08Hammerspoon\u7248\u305d\u306e2)\nhs.eventtap \u3092\u4f7f\u7528\u3057\u305f\u3082\u306e\u306b\u66f8\u304d\u63db\u3048\u3002\n\nSierra \u306b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u56f0\u3089\u306a\u3044\u305f\u3081\u306e\u6e96\u5099\n\n\u524d\u6e96\u5099\nHammerspoon \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ brew cask install hammerspoon\n\nLutzifer/keyboardSwitcher \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u672c\u5bb6\u306e brew install \u306f\u30b3\u30b1\u308b\u306e\u3067\u3001\u3068\u308a\u3042\u3048\u305a\u4ee5\u4e0b\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n$ brew install oppara/homebrew/keyboardswitcher\n\n\ninit.lua\n\ninit.lua\nlocal function keyCode(key, modifiers)\n   modifiers = modifiers or {}\n   return function()\n      hs.eventtap.event.newKeyEvent(modifiers, string.lower(key), true):post()\n      hs.timer.usleep(1000)\n      hs.eventtap.event.newKeyEvent(modifiers, string.lower(key), false):post()\n   end\nend\n\nlocal function switchToUs()\n    local cmd = '/usr/local/bin/keyboardSwitcher select U.S.'\n    os.execute(cmd)\n    hs.console.printStyledtext(cmd)\nend\n\nlocal ctrlBracket = hs.hotkey.bind({'ctrl'}, '[', keyCode('escape'), switchToUs)\n\n\nlocal function handleGlobalEvent(name, event, app)\n    if event == hs.application.watcher.activated then\n        local bundleId = string.lower(app.frontmostApplication():bundleID())\n        if bundleId == 'com.apple.terminal' then\n            ctrlBracket:enable()\n        else\n            ctrlBracket:disable()\n        end\n    end\nend\nwatcher = hs.application.watcher.new(handleGlobalEvent)\nwatcher:start()\n\n\n\n\n\u5099\u8003\nread \u306f\u51fa\u6765\u308b\n$ defaults read com.apple.HIToolbox AppleSelectedInputSources\n$ defaults read com.apple.HIToolbox AppleSelectedInputSources | xargs | cut -d';' -f3 | cut -d'=' -f2\n\nwrite \u304c\n\n$ defaults write com.apple.HIToolbox AppleSelectedInputSources -array '{ InputSourceKind = \"Keyboard Layout\"; \"KeyboardLayout ID\" = 0; \"KeyboardLayout Name\" = \"U.S.\"; }'\n\n\u591a\u5206\u3001\u3053\u3063\u3061\u304c\u738b\u9053\u3002escape\u306e\u30eb\u30fc\u30d7\u554f\u984c\u3082\u89e3\u6c7a\u3067\u304d\u305d\u3046\u3002\u3002\nIntelliJ\u3068\u304bJVM\u306eIDE\u4f7f\u3044\u3067\u3082Karabiner\u306a\u3057\u3067\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5\u3092\u7247\u624b\u5165\u529b\u3057\u305f\u3044\n\n[vim\u3067\u30a4\u30f3\u30b5\u30fc\u30c8\u30e2\u30fc\u30c9\u3092\u629c\u3051\u308b\u6642\u306e\u3042\u308c\uff08Hammerspoon\u7248\u305d\u306e2)](http://qiita.com/oppara/items/5f70c9e67415a0a16979)\n`hs.eventtap` \u3092\u4f7f\u7528\u3057\u305f\u3082\u306e\u306b\u66f8\u304d\u63db\u3048\u3002\n\n---\n\nSierra \u306b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u56f0\u3089\u306a\u3044\u305f\u3081\u306e\u6e96\u5099\n\n## \u524d\u6e96\u5099\n\n[Hammerspoon](http://www.hammerspoon.org/) \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ brew cask install hammerspoon\n```\n[Lutzifer/keyboardSwitcher](https://github.com/Lutzifer/keyboardSwitcher) \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u672c\u5bb6\u306e `brew install` \u306f\u30b3\u30b1\u308b\u306e\u3067\u3001\u3068\u308a\u3042\u3048\u305a\u4ee5\u4e0b\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```\n$ brew install oppara/homebrew/keyboardswitcher\n```\n\n## init.lua\n\n```lua:init.lua\nlocal function keyCode(key, modifiers)\n   modifiers = modifiers or {}\n   return function()\n      hs.eventtap.event.newKeyEvent(modifiers, string.lower(key), true):post()\n      hs.timer.usleep(1000)\n      hs.eventtap.event.newKeyEvent(modifiers, string.lower(key), false):post()\n   end\nend\n\nlocal function switchToUs()\n    local cmd = '/usr/local/bin/keyboardSwitcher select U.S.'\n    os.execute(cmd)\n    hs.console.printStyledtext(cmd)\nend\n\nlocal ctrlBracket = hs.hotkey.bind({'ctrl'}, '[', keyCode('escape'), switchToUs)\n\n\nlocal function handleGlobalEvent(name, event, app)\n    if event == hs.application.watcher.activated then\n        local bundleId = string.lower(app.frontmostApplication():bundleID())\n        if bundleId == 'com.apple.terminal' then\n            ctrlBracket:enable()\n        else\n            ctrlBracket:disable()\n        end\n    end\nend\nwatcher = hs.application.watcher.new(handleGlobalEvent)\nwatcher:start()\n\n```\n\n## \u5099\u8003\n\nread \u306f\u51fa\u6765\u308b\n\n```\n$ defaults read com.apple.HIToolbox AppleSelectedInputSources\n$ defaults read com.apple.HIToolbox AppleSelectedInputSources | xargs | cut -d';' -f3 | cut -d'=' -f2\n```\n\nwrite \u304c:confounded:\n```\n$ defaults write com.apple.HIToolbox AppleSelectedInputSources -array '{ InputSourceKind = \"Keyboard Layout\"; \"KeyboardLayout ID\" = 0; \"KeyboardLayout Name\" = \"U.S.\"; }'\n```\n\n\u591a\u5206\u3001\u3053\u3063\u3061\u304c\u738b\u9053\u3002escape\u306e\u30eb\u30fc\u30d7\u554f\u984c\u3082\u89e3\u6c7a\u3067\u304d\u305d\u3046\u3002\u3002\n[IntelliJ\u3068\u304bJVM\u306eIDE\u4f7f\u3044\u3067\u3082Karabiner\u306a\u3057\u3067\u30d0\u30c3\u30af\u30b9\u30e9\u30c3\u30b7\u30e5\u3092\u7247\u624b\u5165\u529b\u3057\u305f\u3044](http://qiita.com/tanakahisateru/items/d8a67ad89c07baf8c0da)\n", "tags": ["Vim", "Hammerspoon", "Sierra", "OSX"]}