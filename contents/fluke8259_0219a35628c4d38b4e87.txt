{"context": " More than 1 year has passed since last update.\n\n4. JWT\nhttp://jwt.io/\n\u65e2\u5b58\u306e\u3084\u308a\u65b9\u306fCookie\u304b\u3089Session\u3092\u63a2\u3057\u3066\u3001\nSession\u304b\u3089\u30e6\u30fc\u30b6\u306e\u30ed\u30b0\u30a4\u30f3\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u305f\u304c\u3001\nJWT\u306fToken\u3092\u6301\u3063\u3066\u3044\u308b\u3053\u3068\u81ea\u4f53\u304c\u30ed\u30b0\u30a4\u30f3\u3055\u308c\u3066\u3044\u308b\u610f\u5473\u3067\u3042\u3063\u3066\u3001\nToken\u306e\u6709\u52b9\u3060\u3051\u3092\u78ba\u8a8d\u3057\u30ed\u30b0\u30a4\u30f3\u72b6\u614b\u3092\u5224\u65ad\u3059\u308b\u8a8d\u8a3c\u65b9\u5f0f\u3067\u3042\u308b\u3002\n\u3053\u308c\u3067\u5f97\u3089\u308c\u308b\u306e\u306f\u3001Session\u3092\u7ba1\u7406\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\u306e\u3067\u3001\u30b3\u30b9\u30c8\u3082\u4e0b\u304c\u308b\u3057\u3001\n\u8907\u6570\u306e\u30b5\u30fc\u30d0\u306bSession\u3092\u5171\u6709\u3059\u308b\u624b\u9593\u3082\u306a\u304f\u306a\u308b\u3002\n\n\u3082\u3061\u308d\u3093\u3001Laravel\u306e\u5834\u5408\u7c21\u5358\u306b\u5177\u73fe\u3067\u304d\u308b\u304c \u263a\n\n\u552f\u4e00\u77ed\u6240\u306fToken\u3092\u9001\u308b\u305f\u3081Request\u306e\u91cf\u304c\u591a\u304f\u306a\u308b\u554f\u984c\u304c\u3042\u308b\u304c\u3001\nCookie\u4e8b\u614b\u3092\u4f7f\u308f\u306a\u3044\u306e\u3067\u3001\u305d\u306e\u5206\u76f8\u6bba\u3055\u308c\u308b\u304b\u306a\u3068\u601d\u3046\u3002\n\nBackend\n\u307e\u305a\u3001\u4f1a\u54e1\u767b\u9332\u306f\u5f8c\u3067\u4f5c\u308b\u3064\u3082\u308a\u306a\u306e\u3067\u3001User\u4e00\u4eba\u3092Tinker\u3067\u7c21\u5358\u306b\u8ffd\u52a0\u3055\u305b\u308b\u3002\n\n\u307b\u304b\u306e\u3084\u308a\u65b9\u304c\u3042\u308c\u3070\u305d\u308c\u3067\u3044\u3044\u3002\n\n\n$ php artisan tinker\n\nTinker\u306b\u6b21\u306e\u30b3\u30fc\u30c9\u3092\u5165\u529b\u3057\u4f1a\u54e1\u3092\u4f5c\u308b\n>>> App\\User::create(['email'=>'laravelfanatic@example.com', 'name'=>'laravelfanatic', 'password'=>bcrypt('secret')]);\n\n\uff12\u3064\u306eRoute\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\napp/Http/routes.php\n\napp/Http/routes.php\n<?php\n\nRoute::get('/', function(Illuminate\\Foundation\\Inspiring $inspiring){\n\n    $message = $inspiring->quote();\n\n    return response(compact('message'), 200);\n\n});\n\n// Check if user has valid token\nRoute::get('auth', ['middleware' => 'jwt.auth', function(){\n    $user = JWTAuth::parseToken()->toUser();\n\n    return Response::json(compact('user'));\n}]);\n\n// Request token with email and password\nRoute::post('auth', function(){\n    // grab credentials from the request\n    $credentials = Input::only('email', 'password');\n\n    try {\n        // attempt to verify the credentials and create a token for the user\n        if (! $token = JWTAuth::attempt($credentials)) {\n            return response()->json(['error' => 'invalid_credentials'], 401);\n        }\n    } catch (JWTException $e) {\n        // something went wrong whilst attempting to encode the token\n        return response()->json(['error' => 'could_not_create_token'], 500);\n    }\n\n    // all good so return the token\n    return response()->json(compact('token'));\n\n});\n\n\nGET method\u306eRoute\u306fToken\u304b\u3089\u30e6\u30fc\u30b6\u60c5\u5831\u3092\u7fd2\u5f97\u3059\u308b\u3002\n\uff08\u30e6\u30fc\u30b6\u304c\u30ed\u30b0\u30a4\u30f3\u4e2d\u3067\u3042\u308b\u306e\u304b\u3092\u78ba\u8a8d\u3059\u308b\u90e8\u5206\uff09\nPOST method\u306eRoute\u306fE-mail\u3068\u6697\u8a3c\u756a\u53f7\u304b\u3089Token\u3092\u7fd2\u5f97\u3059\u308b\u3002\n\uff08\u65e2\u5b58\u306e\u30ed\u30b0\u30a4\u30f3\u6a5f\u80fd\u3068\u4f3c\u3066\u3044\u308b\uff09\n\u6b21\u306fMiddleware\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\napp/Http/Kernel.php\n<?php namespace App\\Http;\n\nuse Illuminate\\Foundation\\Http\\Kernel as HttpKernel;\n\nclass Kernel extends HttpKernel {\n\n    /**\n     * The application's global HTTP middleware stack.\n     *\n     * @var array\n     */\n    protected $middleware = [\n        'Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode',\n        'App\\Http\\Middleware\\EnableCors'\n    ];\n\n    /**\n     * The application's route middleware.\n     *\n     * @var array\n     */\n    protected $routeMiddleware = [\n        'jwt.auth' => 'Tymon\\JWTAuth\\Middleware\\GetUserFromToken',\n        'jwt.refresh' => 'Tymon\\JWTAuth\\Middleware\\RefreshToken'\n    ];\n\n}\n\n\nFrontend\nSign in page\u304b\u3089\u8ffd\u52a0\u3059\u308b\n\nsrc/signin/signin.js\nangular.module('lrng.signin')\n    .config(function($stateProvider){\n        $stateProvider.state('signin', {\n            url:'/signin',\n            templateUrl:'signin/signin.tpl.html',\n            controller:'SignInController',\n            controllerAs:'vm',\n            data:{\n                guest:true\n            }\n        });\n    })\n    .controller('SignInController', function(Auth, $state){\n        var vm = this;\n\n        vm.signIn = function(){\n            vm.error = null;\n            Auth.attempt(vm.email, vm.password, function(){\n                if(Auth.hasPendingState()){\n                    var pending = Auth.releasePendingState();\n                    $state.go(pending.state, pending.params);\n                    return;\n                }\n                $state.go('home');\n            }, function(data){\n                vm.error = data.error;\n            });\n        };\n    });\n\n\nsrc/signin/signin.tpl.html\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-sm-6 col-sm-offset-3\">\n            <h1>Sign in</h1>\n            <div ng-show=\"vm.error\" class=\"alert alert-danger\">\n                <strong>Oops...</strong>\n                <span ng-bind=\"vm.error\"></span>\n            </div>\n            <form class=\"\" ng-submit=\"vm.signIn()\" method=\"post\">\n                <div class=\"form-group\">\n                    <label for=\"email\">E-mail</label>\n                    <input ng-model=\"vm.email\" name=\"email\" id=\"email\" class=\"form-control\" type=\"email\" required>\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"password\">Password</label>\n                    <input ng-model=\"vm.password\" name=\"password\" id=\"password\" class=\"form-control\" type=\"password\" required>\n                </div>\n                <div class=\"form-group\">\n                    <button class=\"btn btn-primary form-control\">Sign In</button>\n                </div>\n            </form>\n        </div>\n    </div>\n\n</div>\n\nState\u8a2d\u5b9a\u306e\u3068\u304ddata\u9805\u76ee\u306f\u81ea\u7531\u306b\u30c7\u30fc\u30bf\u3092\u5165\u308c\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3067\u3001\n\u3053\u3053\u306b\u3069\u3046Filtering\u3055\u305b\u308b\u306e\u304b\u3092\u6c7a\u3081\u305f\u3002\n\u3053\u306eState\u306f\u30ed\u30b0\u30a4\u30f3\u6e08\u307f\u306e\u30e6\u30fc\u30b6\u304c\u5165\u3063\u305f\u3089Redirect\u3057\u3066\u3042\u3052\u3088\u3046\u3068\u3059\u308b\u3002\nAuth.attempt\u306e\u4e2d\u8eab\u3067\u30013\u756a\u76ee\u306e\u5f15\u6570\u306f\u8a8d\u8a3c\u6210\u529f\u306e\u3068\u304d\u306eCallback\u3067\u3042\u308a\u30014\u756a\u76ee\u306e\u5f15\u6570\u306f\u8a8d\u8a3c\u5931\u6557\u306e\u3068\u304d\u306eCallback\u3067\u3042\u308b\u3002\n\u305d\u3057\u3066\u30013\u756a\u3082\u306ePendingState\u306fmypage\u306b\u30ed\u30b0\u30a4\u30f3\u305b\u305a\u306b\u5165\u308d\u3046\u3068\u3057\u305f\u3068\u304d\u306b\u3001\nsignin\u306bRedirect\u3055\u308c\u308b\u3051\u3069\u3001\n\u6210\u529f\u7684\u306b\u30ed\u30b0\u30a4\u30f3\u304c\u3067\u304d\u305f\u3089\u3001PendingState\u306b\u307e\u305f\u623b\u3059\u305f\u3081\u306e\u30b3\u30fc\u30c9\u3067\u3042\u308b\u3002\n\u30ed\u30b0\u30a4\u30f3\u304c\u5fc5\u8981\u3067\u3042\u308bmypage\u3068\u3044\u3046\u30da\u30fc\u30b8\u3082\u8ffd\u52a0\u3059\u308b\u3002\n\nsrc/mypage/mypage.js\nangular.module('lrng.mypage')\n    .config(function($stateProvider){\n        $stateProvider.state('mypage', {\n            url:'/mypage',\n            templateUrl:'mypage/mypage.tpl.html',\n            controller:'MyPageController',\n            controllerAs:'vm',\n            data:{\n                auth:true\n            }\n        });\n    })\n    .controller('MyPageController', function(){\n        var vm = this;\n    });\n\n\nsrc/mypage/mypage.tpl.html\n<h1>MyPage</h1>\n\n\u6b21\u306f\u3001index.html\u3067\u884c\u3063\u305f\u8a2d\u5b9a\u3092\u307b\u304b\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u5206\u96e2\u3057\u305f\n\nsrc/core/config.js\nangular.module('lrng.config')\n    .config(function($urlRouterProvider, jwtInterceptorProvider, $httpProvider){\n\n        $urlRouterProvider\n            .when('', '/')\n            .otherwise('/notfound');\n\n        $urlRouterProvider.deferIntercept();\n\n        jwtInterceptorProvider.tokenGetter = [function() {\n            return localStorage.getItem('id_token');\n        }];\n\n        $httpProvider.interceptors.push('jwtInterceptor');\n    })\n    .factory('Config', function(){\n        var rootUrl = 'http://localhost:8000/';\n\n        return {\n            rootUrl:rootUrl\n        };\n    });\n\n\n$urlRouterProvider.deferIntercept()\u3067Ui-router\u3092\u6b62\u3081\u308b\uff08\u30ed\u30b0\u30a4\u30f3\u304c\u5fc5\u8981\u306a\u5834\u5408\u30ed\u30b0\u30a4\u30f3\u3057\u305f\u5f8c\u306b\u30da\u30fc\u30b8\u3092\u9077\u79fb\u3057\u305f\u3044\u306e\u3067\uff09\njwtInterceptorProvider\u3067Token\u3092\u4fdd\u5b58\u3059\u308b\u3068\u3053\u308d\u3092\u6c7a\u3081\u308b\u3002\n$httpProvider.interceptors.push('jwtInterceptor');\u306f\u307b\u304b\u306e\u8a2d\u5b9a\u304c\u306a\u3044\u9650\u308a\u3001$http\u3092\u4f7f\u3046\u305f\u3073\u306b\u306b\u81ea\u52d5\u7684\u306bToken\u3092\u542b\u3081\u3066\u9001\u3063\u3066\u304f\u308c\u308b\u3002\n\nsrc/core/auth.js\nangular.module('lrng.auth')\n    .factory('Auth', function($http, Config, $rootScope, $state){\n\n        /**\n         * Auth state\n         * states [idle, auth, user, guest]\n         * @type {String}\n         */\n        var state = 'idle';\n\n        var currentUser = null;\n\n        var authenticateToken = function(cbSuccess, cbError){\n            console.log('authenticating token');\n            state = 'auth';\n            $rootScope.$broadcast('StartAuthenticating');\n\n            var url = Config.rootUrl + 'auth';\n\n            return $http.get(url).success(function(data){\n                console.log(data.user);\n                state = 'user';\n                currentUser = data.user;\n\n                $rootScope.$broadcast('EndAuthenticating', currentUser);\n                angular.isFunction(cbSuccess)?cbSuccess(data):null;\n            }).error(function(data){\n                console.log(data.error);\n                currentUser = null;\n                state = 'guest';\n\n                $rootScope.$broadcast('EndAuthenticating', null);\n                angular.isFunction(cbError)?cbError(data):null;\n            });\n        };\n\n        var attempt = function(email, password, cbSuccess, cbError){\n            var url = Config.rootUrl + 'auth';\n\n            return $http.post(url, {\n                email:email,\n                password:password\n            })\n            .success(function(data){\n                console.log('Success');\n                localStorage.setItem('id_token', data.token);\n                authenticateToken(cbSuccess, cbError);\n            })\n            .error(function(data, status){\n                console.log('Error occurs :' + status);\n                angular.isFunction(cbError)?cbError(data):null;\n            });\n        };\n\n        var signOut = function(){\n            console.log('Sign out');\n            localStorage.removeItem('id_token');\n            currentUser = null;\n            state = 'guest';\n            $rootScope.$broadcast('EndAuthenticating', null);\n            $state.go('home');\n        };\n\n        var isPending = false;\n        var pendingState = null;\n        var pendingParams = null;\n\n        var setPendingState = function(state, params){\n            isPending = true;\n            pendingState = state;\n            pendingParams = params;\n        };\n        var releasePendingState = function(){\n            var result = {\n                state:pendingState,\n                params:pendingParams\n            };\n\n            isPending = false;\n            pendingState = null;\n            pendingParams = null;\n\n            return result;\n        };\n        var hasPendingState = function(){\n            return isPending;\n        };\n\n        return {\n            authenticateToken:authenticateToken,\n            attempt:attempt,\n            signOut:signOut,\n            getAuthState:function(){\n                return state;\n            },\n            getCurrentUser:function(){\n                return currentUser;\n            },\n            setPendingState:setPendingState,\n            releasePendingState:releasePendingState,\n            hasPendingState:hasPendingState\n        };\n    });\n\nauthenticateToken\u306f\u6301\u3063\u3066\u3044\u308bToken\u304b\u3089\u30e6\u30fc\u30b6\u60c5\u5831\u3092\u7fd2\u5f97\u3057\u3066\u304f\u308c\u308b\u3002\u6700\u521d\u306e\u7acb\u3061\u4e0a\u3052\u3068\u30ed\u30b0\u30a4\u30f3\u76f4\u5f8c\u306b\u547c\u3070\u308c\u308b\u3002\nattempt\u306f\u30ed\u30b0\u30a4\u30f3\u30d5\u30a9\u30fc\u30e0\u304b\u3089\u3082\u3089\u3063\u305fEmail\u3068Password\u3092\u9001\u3063\u3066Token\u3092\u78ba\u4fdd\u3059\u308b\u5f79\u5272\u3092\u3059\u308b\u3002\n\u305d\u3057\u3066\u3001\u30ed\u30b0\u30a4\u30f3\u3092\u3059\u308b\u3068\u304d\u306bStartAuthentication\u3068EndAuthentication\u3092\u6295\u3052\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\u6b21\u306f\u3001\u7acb\u3061\u4e0a\u3052\u305f\u6700\u521d\u306b\u8d77\u52d5\u3059\u308b\u30b3\u30fc\u30c9\u3067\u3042\u308b\u3002\n\nsrc/core/init.js\nangular.module('lrng.init')\n    .run(function(Auth, $urlRouter, $rootScope, $state){\n        Auth.authenticateToken(function(){\n            $urlRouter.sync();\n        },function(){\n            $urlRouter.sync();\n        });\n\n        $rootScope.$on('$stateChangeStart', function(event, toState, toParams){\n\n            var go = function(state, params){\n                event.preventDefault();\n                $state.go(state, params);\n            };\n\n            // return if target state need no filtering\n            if(!angular.isObject(toState.data) || (!toState.data.auth && !toState.data.guest)) return;\n\n            var authState = Auth.getAuthState();\n\n            // if on attempting, ignore state change\n            if(authState=='auth') {\n                event.preventDefault();\n                return;\n            }\n\n            // only for authenticated user\n            if(angular.isObject(toState.data) && toState.data.auth){\n                switch(authState){\n                    case 'user':\n                        return;\n                    case 'guest':\n                    case 'init':\n                        console.log('redirect signin');\n                        Auth.setPendingState(toState.name, toParams);\n                        go('signin');\n                        return;\n                }\n            }\n\n            // only for guest\n            if(angular.isObject(toState.data) && toState.data.guest){\n                switch(authState){\n                    case 'user':\n                        console.log('redirect home');\n                        go('home');\n                        return;\n                }\n            }\n\n        });\n        $rootScope.$on('$stateChangeSuccess', function(event, toState){\n            if(Auth.hasPendingState() && toState.name!=='signin') Auth.releasePendingState();\n        });\n\n        $urlRouter.listen();\n    });\n\n\u307e\u305a\u3001\u5148\u66f8\u3044\u305fauthenticateToken\u3092\u8d77\u52d5\u3057\u3066\u304a\u3044\u3066\u3001\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u304c\u78ba\u4fdd\u3067\u304d\u3066\u304b\u3089$urlRouter.sync()\u3067URL router\u3092\u8d77\u52d5\u3055\u305b\u308b\u3002\n\u305d\u3057\u3066\u3001$stateChangeStartEvent handler\u3092\u8ffd\u52a0\u3057\u3066\u3001\u30ed\u30b0\u30a4\u30f3\u72b6\u6cc1\u306b\u5408\u308f\u305b\u3066State\u3092Filtering\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n$stateChangeSuccess\u306e\u5834\u5408\u3001PendingState\u3092\u6301\u3063\u3066\u3044\u308b\u72b6\u6cc1\u3067\u30ed\u30b0\u30a4\u30f3\u305b\u305a\u306b\u307b\u304b\u306e\u30da\u30fc\u30b8\u306b\u98db\u3093\u3060\u3068\u304d\u306bPendingState\u3092\u653e\u3059\u305f\u3081\u306b\u66f8\u3044\u3066\u304a\u3044\u305f\u3002\n$urlRouter.listen()\u3067\u5fa9\u6d3b\u3055\u305b\u308b\u3002\u305f\u3060\u3057\u3001\u6700\u521d\u306f$urlRouter.sync()\u3067Refresh\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\u6b21\u306fTop-Nav\u3092\u3044\u3058\u308b\u3002\n\nsrc/directives/top-nav/top-nav.js\nangular.module('lrng.top-nav')\n    .directive('topNav', function(){\n        return {\n            restrict:'E',\n            templateUrl:'directives/top-nav/top-nav.tpl.html',\n            controller:'TopNavController',\n            controllerAs:'vm',\n            scope:{}\n        }\n    })\n    .controller('TopNavController', function(Auth, $scope){\n        var vm = this;\n\n        vm.collapsed = true;\n        vm.currentUser = null;\n        vm.onAuthenticating = true;\n\n        $scope.$on('StartAuthenticating', function(){\n            vm.onAuthenticating = true;\n        });\n\n        $scope.$on('EndAuthenticating', function(event, user){\n            vm.onAuthenticating = false;\n            vm.currentUser = user;\n        });\n\n        vm.signOut = function(){\n            Auth.signOut();\n        };\n\n    });\n\n\nsrc/directives/top-nav/top-nav.tpl.html\n<nav class=\"navbar navbar-default\">\n    <div class=\"container-fluid\">\n\n        <div class=\"navbar-header\">\n\n            <button type=\"button\" class=\"navbar-toggle collapsed\"\n            ng-click=\"topNav.collapsed = !topNav.collapsed\">\n                <span class=\"sr-only\">Toggle navigation</span>\n                <span class=\"icon-bar\"></span>\n                <span class=\"icon-bar\"></span>\n                <span class=\"icon-bar\"></span>\n            </button>\n\n            <a class=\"navbar-brand\" href=\"#\">LrNg</a>\n\n        </div>\n\n        <div class=\"collapse navbar-collapse\" collapse=\"topNav.collapsed\">\n            <ul class=\"nav navbar-nav\">\n\n                <li ui-sref-active=\"active\"><a  ui-sref=\"home\">Home</a></li>\n\n                <li ui-sref-active=\"active\"><a ui-sref=\"about\">About</a></li>\n\n                <li ui-sref-active=\"active\" ng-show=\"vm.currentUser\"><a ui-sref=\"mypage\">My page</a></li>\n\n            </ul>\n            <ul ng-show=\"vm.onAuthenticating\" class=\"nav navbar-nav navbar-right\">\n                <li><a>Authenticating...</a></li>\n            </ul>\n            <ul ng-hide=\"vm.onAuthenticating\" class=\"nav navbar-nav navbar-right\">\n                <li ng-hide=\"vm.currentUser\" ui-sref-active=\"active\"><a ui-sref=\"signin\">Sign In</a></li>\n                <li ng-show=\"vm.currentUser\" dropdown is-open=\"status.isopen\">\n                    <a dropdown-toggle ng-bind=\"vm.currentUser.name\"></a>\n                    <ul class=\"dropdown-menu\" role=\"menu\">\n                      <li><a href=\"#\">Action</a></li>\n                      <li><a href=\"#\">Another action</a></li>\n                      <li><a href=\"#\">Something else here</a></li>\n                      <li class=\"divider\"></li>\n                      <li><a ng-click=\"vm.signOut()\">Sign Out</a></li>\n                    </ul>\n                </li>\n            </ul>\n        </div>\n    </div>\n</nav>\n\nStartAuthenticating\u3068EndAuthenticating\u30a4\u30d9\u30f3\u30c8\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u5185\u5bb9\u3092\u5909\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u6700\u7d42\u7684\u306b\u3059\u3079\u3066\u306eModule\u3092\u7247\u3065\u3051\u308b\u3002\n\nsrc/index.html\n<!doctype html>\n<html ng-app=\"lrng\">\n<head>\n    <meta charset=\"utf-8\">\n    <title>Yolo!</title>\n    <link rel=\"stylesheet\" href=\"vendor/css/font-awesome.css\">\n    <link rel=\"stylesheet\" href=\"all.css\" media=\"screen\" title=\"no title\" charset=\"utf-8\">\n</head>\n<body>\n    <top-nav></top-nav>\n    <section ui-view></section>\n\n    <script src=\"vendor/angular.js\"></script>\n    <script src=\"vendor/angular-ui-router.js\" charset=\"utf-8\"></script>\n    <script src=\"vendor/ui-bootstrap-tpls.js\" charset=\"utf-8\"></script>\n    <script src=\"vendor/angular-jwt.js\" charset=\"utf-8\"></script>\n    <script charset=\"utf-8\">\n    // app\n    angular.module('lrng', ['templates', 'angular-jwt', 'ui.bootstrap', 'ui.router', 'lrng.states', 'lrng.directives', 'lrng.core']);\n\n    // core\n    angular.module('lrng.core', [\n        'lrng.init',\n        'lrng.config',\n        'lrng.auth'\n        ]);\n    angular.module('lrng.init', ['lrng.auth', 'ui.router']);\n    angular.module('lrng.config', ['angular-jwt', 'ui.router']);\n    angular.module('lrng.auth', ['lrng.config', 'ui.router']);\n\n    // directives\n    angular.module('lrng.directives', [\n        'lrng.top-nav'\n        ]);\n    angular.module('lrng.top-nav', ['ui.router']);\n\n    // states\n    angular.module('lrng.states', [\n        'lrng.home',\n        'lrng.about',\n        'lrng.mypage',\n        'lrng.signin',\n        'lrng.errors'\n        ]);\n    angular.module('lrng.home', ['ui.router', 'lrng.inspiring']);\n    angular.module('lrng.about', ['ui.router']);\n    angular.module('lrng.mypage', ['ui.router']);\n\n    angular.module('lrng.signin', ['ui.router', 'lrng.auth']);\n\n    // error states\n    angular.module('lrng.errors', [\n        'lrng.errors.notfound'\n    ]);\n    angular.module('lrng.errors.notfound', ['ui.router']);\n\n    // services\n    angular.module('lrng.inspiring', ['lrng.config']);\n\n    // templates\n    angular.module('templates', []);\n\n    </script>\n    <% scripts.forEach(function(script){%>\n    <script src=\"<%=script%>\" charset=\"utf-8\"></script>\n    <% });%>\n</body>\n</html>\n\n\n\u66f8\u3044\u3066\u307f\u3066\u5206\u304b\u3063\u305f\u3051\u3069\u3001Laravel\u3092\u4f7f\u3046\u3068\u304d\u306f\u57fa\u672c\u7684\u306b\u5165\u3063\u3066\u3044\u308b\u6a5f\u80fd\u304c\u5165\u3063\u3066\u3044\u306a\u304f\u3066\u3001\u304b\u306a\u308a\u9577\u304f\u66f8\u3044\u3066\u3057\u307e\u3063\u305f\u3068\u601d\u3046\u3002\n\u6642\u9593\u304c\u3042\u308c\u3070\u3001Laravel\u306eAPI\u3092\u305d\u306e\u307e\u307e\u6620\u3057\u305f\u611f\u3058\u306eAngularLibrary\u3092\u4f5c\u3063\u305f\u3089\u3069\u3046\u304b\u306a\u3068\u601d\u3063\u305f\u3051\u3069\u3001\u6642\u9593\u7684\u306b\u3069\u3046\u306a\u308b\u306e\u304b\u304c\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u5fc5\u8981\u306b\u5408\u308f\u305b\u3066\u5c11\u3057\u305a\u3064\u8ffd\u52a0\u3057\u3088\u3046\u3068\u601d\u3063\u3066\u3044\u308b\n\n# 4. JWT\n\nhttp://jwt.io/\n\n\u65e2\u5b58\u306e\u3084\u308a\u65b9\u306fCookie\u304b\u3089Session\u3092\u63a2\u3057\u3066\u3001\nSession\u304b\u3089\u30e6\u30fc\u30b6\u306e\u30ed\u30b0\u30a4\u30f3\u72b6\u614b\u3092\u78ba\u8a8d\u3057\u305f\u304c\u3001\nJWT\u306fToken\u3092\u6301\u3063\u3066\u3044\u308b\u3053\u3068\u81ea\u4f53\u304c\u30ed\u30b0\u30a4\u30f3\u3055\u308c\u3066\u3044\u308b\u610f\u5473\u3067\u3042\u3063\u3066\u3001\nToken\u306e\u6709\u52b9\u3060\u3051\u3092\u78ba\u8a8d\u3057\u30ed\u30b0\u30a4\u30f3\u72b6\u614b\u3092\u5224\u65ad\u3059\u308b\u8a8d\u8a3c\u65b9\u5f0f\u3067\u3042\u308b\u3002\n\n\u3053\u308c\u3067\u5f97\u3089\u308c\u308b\u306e\u306f\u3001Session\u3092\u7ba1\u7406\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\u306e\u3067\u3001\u30b3\u30b9\u30c8\u3082\u4e0b\u304c\u308b\u3057\u3001\n\u8907\u6570\u306e\u30b5\u30fc\u30d0\u306bSession\u3092\u5171\u6709\u3059\u308b\u624b\u9593\u3082\u306a\u304f\u306a\u308b\u3002\n\n>\u3082\u3061\u308d\u3093\u3001Laravel\u306e\u5834\u5408\u7c21\u5358\u306b\u5177\u73fe\u3067\u304d\u308b\u304c \u263a\n\n\u552f\u4e00\u77ed\u6240\u306fToken\u3092\u9001\u308b\u305f\u3081Request\u306e\u91cf\u304c\u591a\u304f\u306a\u308b\u554f\u984c\u304c\u3042\u308b\u304c\u3001\nCookie\u4e8b\u614b\u3092\u4f7f\u308f\u306a\u3044\u306e\u3067\u3001\u305d\u306e\u5206\u76f8\u6bba\u3055\u308c\u308b\u304b\u306a\u3068\u601d\u3046\u3002\n\n## Backend\n\n\u307e\u305a\u3001\u4f1a\u54e1\u767b\u9332\u306f\u5f8c\u3067\u4f5c\u308b\u3064\u3082\u308a\u306a\u306e\u3067\u3001User\u4e00\u4eba\u3092Tinker\u3067\u7c21\u5358\u306b\u8ffd\u52a0\u3055\u305b\u308b\u3002\n>\u307b\u304b\u306e\u3084\u308a\u65b9\u304c\u3042\u308c\u3070\u305d\u308c\u3067\u3044\u3044\u3002\n\n``` bash\n\n$ php artisan tinker\n```\n\nTinker\u306b\u6b21\u306e\u30b3\u30fc\u30c9\u3092\u5165\u529b\u3057\u4f1a\u54e1\u3092\u4f5c\u308b\n\n```\n>>> App\\User::create(['email'=>'laravelfanatic@example.com', 'name'=>'laravelfanatic', 'password'=>bcrypt('secret')]);\n```\n\n\uff12\u3064\u306eRoute\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n##### app/Http/routes.php\n\n```php:app/Http/routes.php\n<?php\n\nRoute::get('/', function(Illuminate\\Foundation\\Inspiring $inspiring){\n\n    $message = $inspiring->quote();\n\n    return response(compact('message'), 200);\n\n});\n\n// Check if user has valid token\nRoute::get('auth', ['middleware' => 'jwt.auth', function(){\n    $user = JWTAuth::parseToken()->toUser();\n\n    return Response::json(compact('user'));\n}]);\n\n// Request token with email and password\nRoute::post('auth', function(){\n    // grab credentials from the request\n    $credentials = Input::only('email', 'password');\n\n    try {\n        // attempt to verify the credentials and create a token for the user\n        if (! $token = JWTAuth::attempt($credentials)) {\n            return response()->json(['error' => 'invalid_credentials'], 401);\n        }\n    } catch (JWTException $e) {\n        // something went wrong whilst attempting to encode the token\n        return response()->json(['error' => 'could_not_create_token'], 500);\n    }\n\n    // all good so return the token\n    return response()->json(compact('token'));\n\n});\n```\nGET method\u306eRoute\u306fToken\u304b\u3089\u30e6\u30fc\u30b6\u60c5\u5831\u3092\u7fd2\u5f97\u3059\u308b\u3002\n\uff08\u30e6\u30fc\u30b6\u304c\u30ed\u30b0\u30a4\u30f3\u4e2d\u3067\u3042\u308b\u306e\u304b\u3092\u78ba\u8a8d\u3059\u308b\u90e8\u5206\uff09\n\nPOST method\u306eRoute\u306fE-mail\u3068\u6697\u8a3c\u756a\u53f7\u304b\u3089Token\u3092\u7fd2\u5f97\u3059\u308b\u3002\n\uff08\u65e2\u5b58\u306e\u30ed\u30b0\u30a4\u30f3\u6a5f\u80fd\u3068\u4f3c\u3066\u3044\u308b\uff09\n\n\u6b21\u306fMiddleware\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n##### app/Http/Kernel.php\n\n```php\n<?php namespace App\\Http;\n\nuse Illuminate\\Foundation\\Http\\Kernel as HttpKernel;\n\nclass Kernel extends HttpKernel {\n\n\t/**\n\t * The application's global HTTP middleware stack.\n\t *\n\t * @var array\n\t */\n\tprotected $middleware = [\n\t\t'Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode',\n\t\t'App\\Http\\Middleware\\EnableCors'\n\t];\n\n\t/**\n\t * The application's route middleware.\n\t *\n\t * @var array\n\t */\n\tprotected $routeMiddleware = [\n\t    'jwt.auth' => 'Tymon\\JWTAuth\\Middleware\\GetUserFromToken',\n\t    'jwt.refresh' => 'Tymon\\JWTAuth\\Middleware\\RefreshToken'\n\t];\n\n}\n```\n\n## Frontend\n\nSign in page\u304b\u3089\u8ffd\u52a0\u3059\u308b\n\n##### src/signin/signin.js\n\n```js\nangular.module('lrng.signin')\n    .config(function($stateProvider){\n        $stateProvider.state('signin', {\n            url:'/signin',\n            templateUrl:'signin/signin.tpl.html',\n            controller:'SignInController',\n            controllerAs:'vm',\n            data:{\n                guest:true\n            }\n        });\n    })\n    .controller('SignInController', function(Auth, $state){\n        var vm = this;\n\n        vm.signIn = function(){\n            vm.error = null;\n            Auth.attempt(vm.email, vm.password, function(){\n                if(Auth.hasPendingState()){\n                    var pending = Auth.releasePendingState();\n                    $state.go(pending.state, pending.params);\n                    return;\n                }\n                $state.go('home');\n            }, function(data){\n                vm.error = data.error;\n            });\n        };\n    });\n```\n\n##### src/signin/signin.tpl.html\n\n```html\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-sm-6 col-sm-offset-3\">\n            <h1>Sign in</h1>\n            <div ng-show=\"vm.error\" class=\"alert alert-danger\">\n                <strong>Oops...</strong>\n                <span ng-bind=\"vm.error\"></span>\n            </div>\n            <form class=\"\" ng-submit=\"vm.signIn()\" method=\"post\">\n                <div class=\"form-group\">\n                    <label for=\"email\">E-mail</label>\n                    <input ng-model=\"vm.email\" name=\"email\" id=\"email\" class=\"form-control\" type=\"email\" required>\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"password\">Password</label>\n                    <input ng-model=\"vm.password\" name=\"password\" id=\"password\" class=\"form-control\" type=\"password\" required>\n                </div>\n                <div class=\"form-group\">\n                    <button class=\"btn btn-primary form-control\">Sign In</button>\n                </div>\n            </form>\n        </div>\n    </div>\n\n</div>\n```\n\nState\u8a2d\u5b9a\u306e\u3068\u304d`data`\u9805\u76ee\u306f\u81ea\u7531\u306b\u30c7\u30fc\u30bf\u3092\u5165\u308c\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3067\u3001\n\u3053\u3053\u306b\u3069\u3046Filtering\u3055\u305b\u308b\u306e\u304b\u3092\u6c7a\u3081\u305f\u3002\n\u3053\u306eState\u306f\u30ed\u30b0\u30a4\u30f3\u6e08\u307f\u306e\u30e6\u30fc\u30b6\u304c\u5165\u3063\u305f\u3089Redirect\u3057\u3066\u3042\u3052\u3088\u3046\u3068\u3059\u308b\u3002\n\n`Auth.attempt`\u306e\u4e2d\u8eab\u3067\u30013\u756a\u76ee\u306e\u5f15\u6570\u306f\u8a8d\u8a3c\u6210\u529f\u306e\u3068\u304d\u306eCallback\u3067\u3042\u308a\u30014\u756a\u76ee\u306e\u5f15\u6570\u306f\u8a8d\u8a3c\u5931\u6557\u306e\u3068\u304d\u306eCallback\u3067\u3042\u308b\u3002\n\u305d\u3057\u3066\u30013\u756a\u3082\u306ePendingState\u306f`mypage`\u306b\u30ed\u30b0\u30a4\u30f3\u305b\u305a\u306b\u5165\u308d\u3046\u3068\u3057\u305f\u3068\u304d\u306b\u3001\n`signin`\u306bRedirect\u3055\u308c\u308b\u3051\u3069\u3001\n\u6210\u529f\u7684\u306b\u30ed\u30b0\u30a4\u30f3\u304c\u3067\u304d\u305f\u3089\u3001PendingState\u306b\u307e\u305f\u623b\u3059\u305f\u3081\u306e\u30b3\u30fc\u30c9\u3067\u3042\u308b\u3002\n\n\u30ed\u30b0\u30a4\u30f3\u304c\u5fc5\u8981\u3067\u3042\u308b`mypage`\u3068\u3044\u3046\u30da\u30fc\u30b8\u3082\u8ffd\u52a0\u3059\u308b\u3002\n\n##### src/mypage/mypage.js\n\n```js\nangular.module('lrng.mypage')\n    .config(function($stateProvider){\n        $stateProvider.state('mypage', {\n            url:'/mypage',\n            templateUrl:'mypage/mypage.tpl.html',\n            controller:'MyPageController',\n            controllerAs:'vm',\n            data:{\n                auth:true\n            }\n        });\n    })\n    .controller('MyPageController', function(){\n        var vm = this;\n    });\n```\n\n##### src/mypage/mypage.tpl.html\n\n```html\n<h1>MyPage</h1>\n```\n\n\u6b21\u306f\u3001`index.html`\u3067\u884c\u3063\u305f\u8a2d\u5b9a\u3092\u307b\u304b\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u5206\u96e2\u3057\u305f\n\n##### src/core/config.js\n\n```js\nangular.module('lrng.config')\n    .config(function($urlRouterProvider, jwtInterceptorProvider, $httpProvider){\n\n        $urlRouterProvider\n            .when('', '/')\n            .otherwise('/notfound');\n\n        $urlRouterProvider.deferIntercept();\n\n        jwtInterceptorProvider.tokenGetter = [function() {\n            return localStorage.getItem('id_token');\n        }];\n\n        $httpProvider.interceptors.push('jwtInterceptor');\n    })\n    .factory('Config', function(){\n        var rootUrl = 'http://localhost:8000/';\n\n        return {\n            rootUrl:rootUrl\n        };\n    });\n\n```\n\n`$urlRouterProvider.deferIntercept()`\u3067Ui-router\u3092\u6b62\u3081\u308b\uff08\u30ed\u30b0\u30a4\u30f3\u304c\u5fc5\u8981\u306a\u5834\u5408\u30ed\u30b0\u30a4\u30f3\u3057\u305f\u5f8c\u306b\u30da\u30fc\u30b8\u3092\u9077\u79fb\u3057\u305f\u3044\u306e\u3067\uff09\n\n`jwtInterceptorProvider`\u3067Token\u3092\u4fdd\u5b58\u3059\u308b\u3068\u3053\u308d\u3092\u6c7a\u3081\u308b\u3002\n\n`$httpProvider.interceptors.push('jwtInterceptor');`\u306f\u307b\u304b\u306e\u8a2d\u5b9a\u304c\u306a\u3044\u9650\u308a\u3001`$http`\u3092\u4f7f\u3046\u305f\u3073\u306b\u306b\u81ea\u52d5\u7684\u306bToken\u3092\u542b\u3081\u3066\u9001\u3063\u3066\u304f\u308c\u308b\u3002\n\n##### src/core/auth.js\n\n```js\nangular.module('lrng.auth')\n    .factory('Auth', function($http, Config, $rootScope, $state){\n\n        /**\n         * Auth state\n         * states [idle, auth, user, guest]\n         * @type {String}\n         */\n        var state = 'idle';\n\n        var currentUser = null;\n\n        var authenticateToken = function(cbSuccess, cbError){\n            console.log('authenticating token');\n            state = 'auth';\n            $rootScope.$broadcast('StartAuthenticating');\n\n            var url = Config.rootUrl + 'auth';\n\n            return $http.get(url).success(function(data){\n                console.log(data.user);\n                state = 'user';\n                currentUser = data.user;\n\n                $rootScope.$broadcast('EndAuthenticating', currentUser);\n                angular.isFunction(cbSuccess)?cbSuccess(data):null;\n            }).error(function(data){\n                console.log(data.error);\n                currentUser = null;\n                state = 'guest';\n\n                $rootScope.$broadcast('EndAuthenticating', null);\n                angular.isFunction(cbError)?cbError(data):null;\n            });\n        };\n\n        var attempt = function(email, password, cbSuccess, cbError){\n            var url = Config.rootUrl + 'auth';\n\n            return $http.post(url, {\n                email:email,\n                password:password\n            })\n            .success(function(data){\n                console.log('Success');\n                localStorage.setItem('id_token', data.token);\n                authenticateToken(cbSuccess, cbError);\n            })\n            .error(function(data, status){\n                console.log('Error occurs :' + status);\n                angular.isFunction(cbError)?cbError(data):null;\n            });\n        };\n\n        var signOut = function(){\n            console.log('Sign out');\n            localStorage.removeItem('id_token');\n            currentUser = null;\n            state = 'guest';\n            $rootScope.$broadcast('EndAuthenticating', null);\n            $state.go('home');\n        };\n\n        var isPending = false;\n        var pendingState = null;\n        var pendingParams = null;\n\n        var setPendingState = function(state, params){\n            isPending = true;\n            pendingState = state;\n            pendingParams = params;\n        };\n        var releasePendingState = function(){\n            var result = {\n                state:pendingState,\n                params:pendingParams\n            };\n\n            isPending = false;\n            pendingState = null;\n            pendingParams = null;\n\n            return result;\n        };\n        var hasPendingState = function(){\n            return isPending;\n        };\n\n        return {\n            authenticateToken:authenticateToken,\n            attempt:attempt,\n            signOut:signOut,\n            getAuthState:function(){\n                return state;\n            },\n            getCurrentUser:function(){\n                return currentUser;\n            },\n            setPendingState:setPendingState,\n            releasePendingState:releasePendingState,\n            hasPendingState:hasPendingState\n        };\n    });\n```\n`authenticateToken`\u306f\u6301\u3063\u3066\u3044\u308bToken\u304b\u3089\u30e6\u30fc\u30b6\u60c5\u5831\u3092\u7fd2\u5f97\u3057\u3066\u304f\u308c\u308b\u3002\u6700\u521d\u306e\u7acb\u3061\u4e0a\u3052\u3068\u30ed\u30b0\u30a4\u30f3\u76f4\u5f8c\u306b\u547c\u3070\u308c\u308b\u3002\n\n`attempt`\u306f\u30ed\u30b0\u30a4\u30f3\u30d5\u30a9\u30fc\u30e0\u304b\u3089\u3082\u3089\u3063\u305fEmail\u3068Password\u3092\u9001\u3063\u3066Token\u3092\u78ba\u4fdd\u3059\u308b\u5f79\u5272\u3092\u3059\u308b\u3002\n\n\u305d\u3057\u3066\u3001\u30ed\u30b0\u30a4\u30f3\u3092\u3059\u308b\u3068\u304d\u306b`StartAuthentication`\u3068`EndAuthentication`\u3092\u6295\u3052\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\n\n\n\u6b21\u306f\u3001\u7acb\u3061\u4e0a\u3052\u305f\u6700\u521d\u306b\u8d77\u52d5\u3059\u308b\u30b3\u30fc\u30c9\u3067\u3042\u308b\u3002\n\n##### src/core/init.js\n\n```js\nangular.module('lrng.init')\n    .run(function(Auth, $urlRouter, $rootScope, $state){\n        Auth.authenticateToken(function(){\n            $urlRouter.sync();\n        },function(){\n            $urlRouter.sync();\n        });\n\n        $rootScope.$on('$stateChangeStart', function(event, toState, toParams){\n\n            var go = function(state, params){\n                event.preventDefault();\n                $state.go(state, params);\n            };\n\n            // return if target state need no filtering\n            if(!angular.isObject(toState.data) || (!toState.data.auth && !toState.data.guest)) return;\n\n            var authState = Auth.getAuthState();\n\n            // if on attempting, ignore state change\n            if(authState=='auth') {\n                event.preventDefault();\n                return;\n            }\n\n            // only for authenticated user\n            if(angular.isObject(toState.data) && toState.data.auth){\n                switch(authState){\n                    case 'user':\n                        return;\n                    case 'guest':\n                    case 'init':\n                        console.log('redirect signin');\n                        Auth.setPendingState(toState.name, toParams);\n                        go('signin');\n                        return;\n                }\n            }\n\n            // only for guest\n            if(angular.isObject(toState.data) && toState.data.guest){\n                switch(authState){\n                    case 'user':\n                        console.log('redirect home');\n                        go('home');\n                        return;\n                }\n            }\n\n        });\n        $rootScope.$on('$stateChangeSuccess', function(event, toState){\n            if(Auth.hasPendingState() && toState.name!=='signin') Auth.releasePendingState();\n        });\n\n        $urlRouter.listen();\n    });\n```\n\n\u307e\u305a\u3001\u5148\u66f8\u3044\u305f`authenticateToken`\u3092\u8d77\u52d5\u3057\u3066\u304a\u3044\u3066\u3001\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u304c\u78ba\u4fdd\u3067\u304d\u3066\u304b\u3089`$urlRouter.sync()`\u3067URL router\u3092\u8d77\u52d5\u3055\u305b\u308b\u3002\n\n\u305d\u3057\u3066\u3001`$stateChangeStart`Event handler\u3092\u8ffd\u52a0\u3057\u3066\u3001\u30ed\u30b0\u30a4\u30f3\u72b6\u6cc1\u306b\u5408\u308f\u305b\u3066State\u3092Filtering\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n`$stateChangeSuccess`\u306e\u5834\u5408\u3001PendingState\u3092\u6301\u3063\u3066\u3044\u308b\u72b6\u6cc1\u3067\u30ed\u30b0\u30a4\u30f3\u305b\u305a\u306b\u307b\u304b\u306e\u30da\u30fc\u30b8\u306b\u98db\u3093\u3060\u3068\u304d\u306bPendingState\u3092\u653e\u3059\u305f\u3081\u306b\u66f8\u3044\u3066\u304a\u3044\u305f\u3002\n\n`$urlRouter.listen()`\u3067\u5fa9\u6d3b\u3055\u305b\u308b\u3002\u305f\u3060\u3057\u3001\u6700\u521d\u306f`$urlRouter.sync()`\u3067Refresh\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n\u6b21\u306fTop-Nav\u3092\u3044\u3058\u308b\u3002\n\n##### src/directives/top-nav/top-nav.js\n\n```js\nangular.module('lrng.top-nav')\n    .directive('topNav', function(){\n        return {\n            restrict:'E',\n            templateUrl:'directives/top-nav/top-nav.tpl.html',\n            controller:'TopNavController',\n            controllerAs:'vm',\n            scope:{}\n        }\n    })\n    .controller('TopNavController', function(Auth, $scope){\n        var vm = this;\n\n        vm.collapsed = true;\n        vm.currentUser = null;\n        vm.onAuthenticating = true;\n\n        $scope.$on('StartAuthenticating', function(){\n            vm.onAuthenticating = true;\n        });\n\n        $scope.$on('EndAuthenticating', function(event, user){\n            vm.onAuthenticating = false;\n            vm.currentUser = user;\n        });\n\n        vm.signOut = function(){\n            Auth.signOut();\n        };\n\n    });\n```\n\n##### src/directives/top-nav/top-nav.tpl.html\n\n```html\n<nav class=\"navbar navbar-default\">\n    <div class=\"container-fluid\">\n\n        <div class=\"navbar-header\">\n\n            <button type=\"button\" class=\"navbar-toggle collapsed\"\n            ng-click=\"topNav.collapsed = !topNav.collapsed\">\n                <span class=\"sr-only\">Toggle navigation</span>\n                <span class=\"icon-bar\"></span>\n                <span class=\"icon-bar\"></span>\n                <span class=\"icon-bar\"></span>\n            </button>\n\n            <a class=\"navbar-brand\" href=\"#\">LrNg</a>\n\n        </div>\n\n        <div class=\"collapse navbar-collapse\" collapse=\"topNav.collapsed\">\n            <ul class=\"nav navbar-nav\">\n\n                <li ui-sref-active=\"active\"><a  ui-sref=\"home\">Home</a></li>\n\n                <li ui-sref-active=\"active\"><a ui-sref=\"about\">About</a></li>\n\n                <li ui-sref-active=\"active\" ng-show=\"vm.currentUser\"><a ui-sref=\"mypage\">My page</a></li>\n\n            </ul>\n            <ul ng-show=\"vm.onAuthenticating\" class=\"nav navbar-nav navbar-right\">\n                <li><a>Authenticating...</a></li>\n            </ul>\n            <ul ng-hide=\"vm.onAuthenticating\" class=\"nav navbar-nav navbar-right\">\n                <li ng-hide=\"vm.currentUser\" ui-sref-active=\"active\"><a ui-sref=\"signin\">Sign In</a></li>\n                <li ng-show=\"vm.currentUser\" dropdown is-open=\"status.isopen\">\n                    <a dropdown-toggle ng-bind=\"vm.currentUser.name\"></a>\n                    <ul class=\"dropdown-menu\" role=\"menu\">\n                      <li><a href=\"#\">Action</a></li>\n                      <li><a href=\"#\">Another action</a></li>\n                      <li><a href=\"#\">Something else here</a></li>\n                      <li class=\"divider\"></li>\n                      <li><a ng-click=\"vm.signOut()\">Sign Out</a></li>\n                    </ul>\n                </li>\n            </ul>\n        </div>\n    </div>\n</nav>\n```\n`StartAuthenticating`\u3068`EndAuthenticating`\u30a4\u30d9\u30f3\u30c8\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u5185\u5bb9\u3092\u5909\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\u6700\u7d42\u7684\u306b\u3059\u3079\u3066\u306eModule\u3092\u7247\u3065\u3051\u308b\u3002\n\n##### src/index.html\n\n```html\n<!doctype html>\n<html ng-app=\"lrng\">\n<head>\n    <meta charset=\"utf-8\">\n    <title>Yolo!</title>\n    <link rel=\"stylesheet\" href=\"vendor/css/font-awesome.css\">\n    <link rel=\"stylesheet\" href=\"all.css\" media=\"screen\" title=\"no title\" charset=\"utf-8\">\n</head>\n<body>\n    <top-nav></top-nav>\n    <section ui-view></section>\n\n    <script src=\"vendor/angular.js\"></script>\n    <script src=\"vendor/angular-ui-router.js\" charset=\"utf-8\"></script>\n    <script src=\"vendor/ui-bootstrap-tpls.js\" charset=\"utf-8\"></script>\n    <script src=\"vendor/angular-jwt.js\" charset=\"utf-8\"></script>\n    <script charset=\"utf-8\">\n    // app\n    angular.module('lrng', ['templates', 'angular-jwt', 'ui.bootstrap', 'ui.router', 'lrng.states', 'lrng.directives', 'lrng.core']);\n\n    // core\n    angular.module('lrng.core', [\n        'lrng.init',\n        'lrng.config',\n        'lrng.auth'\n        ]);\n    angular.module('lrng.init', ['lrng.auth', 'ui.router']);\n    angular.module('lrng.config', ['angular-jwt', 'ui.router']);\n    angular.module('lrng.auth', ['lrng.config', 'ui.router']);\n\n    // directives\n    angular.module('lrng.directives', [\n        'lrng.top-nav'\n        ]);\n    angular.module('lrng.top-nav', ['ui.router']);\n\n    // states\n    angular.module('lrng.states', [\n        'lrng.home',\n        'lrng.about',\n        'lrng.mypage',\n        'lrng.signin',\n        'lrng.errors'\n        ]);\n    angular.module('lrng.home', ['ui.router', 'lrng.inspiring']);\n    angular.module('lrng.about', ['ui.router']);\n    angular.module('lrng.mypage', ['ui.router']);\n\n    angular.module('lrng.signin', ['ui.router', 'lrng.auth']);\n\n    // error states\n    angular.module('lrng.errors', [\n        'lrng.errors.notfound'\n    ]);\n    angular.module('lrng.errors.notfound', ['ui.router']);\n\n    // services\n    angular.module('lrng.inspiring', ['lrng.config']);\n\n    // templates\n    angular.module('templates', []);\n\n    </script>\n    <% scripts.forEach(function(script){%>\n    <script src=\"<%=script%>\" charset=\"utf-8\"></script>\n    <% });%>\n</body>\n</html>\n```\n\n\n>\u66f8\u3044\u3066\u307f\u3066\u5206\u304b\u3063\u305f\u3051\u3069\u3001Laravel\u3092\u4f7f\u3046\u3068\u304d\u306f\u57fa\u672c\u7684\u306b\u5165\u3063\u3066\u3044\u308b\u6a5f\u80fd\u304c\u5165\u3063\u3066\u3044\u306a\u304f\u3066\u3001\u304b\u306a\u308a\u9577\u304f\u66f8\u3044\u3066\u3057\u307e\u3063\u305f\u3068\u601d\u3046\u3002\n\u6642\u9593\u304c\u3042\u308c\u3070\u3001Laravel\u306eAPI\u3092\u305d\u306e\u307e\u307e\u6620\u3057\u305f\u611f\u3058\u306eAngularLibrary\u3092\u4f5c\u3063\u305f\u3089\u3069\u3046\u304b\u306a\u3068\u601d\u3063\u305f\u3051\u3069\u3001\u6642\u9593\u7684\u306b\u3069\u3046\u306a\u308b\u306e\u304b\u304c\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u5fc5\u8981\u306b\u5408\u308f\u305b\u3066\u5c11\u3057\u305a\u3064\u8ffd\u52a0\u3057\u3088\u3046\u3068\u601d\u3063\u3066\u3044\u308b\n", "tags": ["laravel", "Laravel5.Tutorial", "AngularJS", "JWT"]}