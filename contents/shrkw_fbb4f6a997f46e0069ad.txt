{"context": " More than 1 year has passed since last update.java -XX:+PrintFlagsFinal -XX:+UnlockDiagnosticVMOptions -XX:+UnlockExperimentalVMOptions\n\n\u3067\u72b6\u614b\u306e\u78ba\u8a8d\u3002\n\n\u3072\u306a\u5f62\n\u30d0\u30c3\u30c1\u51e6\u7406\u306ejar\u3092\u60f3\u5b9a\u3002Java7\u3067\u4f7f\u7528\u4e2d\u3002Java8\u3067\u306f\u672a\u78ba\u8a8d\u3002\n-Xmx\u3084\u3089-Xms\u3084\u3089\u306fJVM_TUNE\u306b\u66f8\u304f\u3001\u3051\u3069\u5927\u62b5\u306fJVM\u304c\u81ea\u52d5\u3067\u3088\u3057\u306a\u306b\u8a2d\u5b9a\u3057\u3066\u304f\u308c\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3002\n\nrun.sh\nfunction run_batch() {\n  local TODAY=$(date +%Y_%m_%d)\n  local JVM_LOG_DIR=\"/var/log/app_batch\"\n\n  local JVM_TUNE=\"\"\n  local JVM_GC_LOG=\"-Xloggc:$JVM_LOG_DIR/gc.log.$TODAY \\\n   -XX:+PrintGCDetails -XX:+PrintGCDateStamps \\\n   -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=5 -XX:GCLogFileSize=10M\"\n  local JVM_DUMP=\"-XX:+HeapDumpOnOutOfMemoryError \\\n   -XX:HeapDumpPath=$JVM_LOG_DIR/ \\\n   -XX:ErrorFile=$JVM_LOG_DIR/hs_err_pid%p.log\"\n  local JVM_OPTS=\"$JVM_TUNE $JVM_GC_LOG $JVM_DUMP\"\n\n  java $JVM_OPTS -jar batch-${VER}.jar\n  return 0\n}\n\n\n\n\u53c2\u8003\n\nJava - \u898b\u305b\u3066\u3084\u308d\u3046JVM\u304c\u6301\u3064\u771f\u306e\u30c1\u30ab\u30e9\u3092\uff01 JVM\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4e00\u89a7\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u3002 - Qiita\nJava\u30c8\u30e9\u30d6\u30eb\u306b\u5fdc\u3058\u305f\u521d\u52d5\u5bfe\u5fdc\u306e\u307e\u3068\u3081 - \u898b\u7fd2\u3044\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u65e5\u8a18\nJava 7 CMS GC\u306e\u57fa\u672c\u7684\u306a\u60c5\u5831\u306e\u6574\u7406 - nekop's blog\n\u307e\u3058\u3081\u306bJVM\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0: \u7b2c1\u56de \u307e\u305a\u306f\u73fe\u72b6\u78ba\u8a8d\n\n\n```\njava -XX:+PrintFlagsFinal -XX:+UnlockDiagnosticVMOptions -XX:+UnlockExperimentalVMOptions\n```\n\n\u3067\u72b6\u614b\u306e\u78ba\u8a8d\u3002\n\n### \u3072\u306a\u5f62\n\n\u30d0\u30c3\u30c1\u51e6\u7406\u306ejar\u3092\u60f3\u5b9a\u3002Java7\u3067\u4f7f\u7528\u4e2d\u3002Java8\u3067\u306f\u672a\u78ba\u8a8d\u3002\n`-Xmx`\u3084\u3089`-Xms`\u3084\u3089\u306f`JVM_TUNE`\u306b\u66f8\u304f\u3001\u3051\u3069\u5927\u62b5\u306fJVM\u304c\u81ea\u52d5\u3067\u3088\u3057\u306a\u306b\u8a2d\u5b9a\u3057\u3066\u304f\u308c\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3002\n\n```bash:run.sh\nfunction run_batch() {\n  local TODAY=$(date +%Y_%m_%d)\n  local JVM_LOG_DIR=\"/var/log/app_batch\"\n\n  local JVM_TUNE=\"\"\n  local JVM_GC_LOG=\"-Xloggc:$JVM_LOG_DIR/gc.log.$TODAY \\\n   -XX:+PrintGCDetails -XX:+PrintGCDateStamps \\\n   -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=5 -XX:GCLogFileSize=10M\"\n  local JVM_DUMP=\"-XX:+HeapDumpOnOutOfMemoryError \\\n   -XX:HeapDumpPath=$JVM_LOG_DIR/ \\\n   -XX:ErrorFile=$JVM_LOG_DIR/hs_err_pid%p.log\"\n  local JVM_OPTS=\"$JVM_TUNE $JVM_GC_LOG $JVM_DUMP\"\n\n  java $JVM_OPTS -jar batch-${VER}.jar\n  return 0\n}\n```\n\n### \u53c2\u8003\n\n* [Java - \u898b\u305b\u3066\u3084\u308d\u3046JVM\u304c\u6301\u3064\u771f\u306e\u30c1\u30ab\u30e9\u3092\uff01 JVM\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4e00\u89a7\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u3002 - Qiita](http://qiita.com/taichi@github/items/7d2bb7d4af7fec8530c3)\n* [Java\u30c8\u30e9\u30d6\u30eb\u306b\u5fdc\u3058\u305f\u521d\u52d5\u5bfe\u5fdc\u306e\u307e\u3068\u3081 - \u898b\u7fd2\u3044\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u65e5\u8a18](http://n-agetsuma.hatenablog.com/entry/2014/03/11/205012)\n* [Java 7 CMS GC\u306e\u57fa\u672c\u7684\u306a\u60c5\u5831\u306e\u6574\u7406 - nekop's blog](http://nekop.hatenablog.com/entry/20140327/1395886237)\n* [\u307e\u3058\u3081\u306bJVM\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0: \u7b2c1\u56de \u307e\u305a\u306f\u73fe\u72b6\u78ba\u8a8d](http://x1.inkenkun.com/archives/367)\n", "tags": ["Java", "\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0", "JVM"]}