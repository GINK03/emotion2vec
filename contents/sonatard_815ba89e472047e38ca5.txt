{"context": "\n\n\u306f\u3058\u3081\u306b\nGo\u306f\u3001Go1.5\u4ee5\u964dC\u8a00\u8a9e\u306b\u3088\u308b\u5b9f\u88c5\u304c\u306a\u304f\u306a\u308a\u3001\u307b\u307c\u5168\u3066\u304cGo\u306b\u3088\u3063\u3066\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081Go\u30a8\u30f3\u30b8\u30cb\u30a2\u306f\u6700\u60aaGo\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u8aad\u3093\u3067\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u305f\u3081\u3001\u3068\u3066\u3082\u751f\u7523\u7684\u306a\u72b6\u614b\u306b\u3042\u308b\u3068\u8a00\u3048\u307e\u3059\u3002\n\u3057\u304b\u3057Go\u304c\u30bb\u30eb\u30d5\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3060\u3068\u3057\u3066\u3082OS\u306e\u6a5f\u80fd\u7fa4\u3092\u547c\u3073\u51fa\u3059\u3068\u304d\u306b\u306f\u3001C\u8a00\u8a9e\u3067\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\u3067\u306f\u3001Go\u3067\u306f\u3069\u306e\u3088\u3046\u306b\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u306e\u3067\u3057\u3087\u3046\u304b\uff1f\u307e\u305f\u3001\u3069\u306e\u3088\u3046\u306b\u305d\u308c\u3089\u3092\u30d3\u30eb\u30c9\u3057\u3066\u3044\u308b\u306e\u3067\u3057\u3087\u3046\u304b\uff1f\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001\u4e0a\u8a18\u306e\u7591\u554f\u3092Go\u306e\u30bd\u30fc\u30b9\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304b\u3089\u8aad\u307f\u89e3\u3044\u3066\u3044\u304d\u307e\u3059\u3002\n\nGo\u3068\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\n\u4e00\u822c\u306eGo\u30d7\u30ed\u30b0\u30e9\u30de\u304cGo\u3067\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u5b9f\u884c\u3059\u308b\u306b\u306f\u3001syscall\u30d1\u30c3\u30b1\u30fc\u30b8\u3001golang.org/x/sys/\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5229\u7528\u3057\u307e\u3059\u30021\n\u95a2\u6570\u4e00\u89a7\u306b\u306f\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u304c\u306e\u540d\u524d\u306e\u95a2\u6570\u304c\u4e26\u3093\u3067\u3044\u307e\u3059\u3002\u3053\u308c\u3089\u306f\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u5b9f\u884c\u3057\u3084\u3059\u3044\u3088\u3046\u306bGo\u3067\u30e9\u30c3\u30d1\u30fc\u3057\u305f\u95a2\u6570\u7fa4\u3067\u3059\u3002\nsyscall\u30d1\u30c3\u30b1\u30fc\u30b8\u306f\u307b\u3068\u3093\u3069\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u66f8\u304b\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306fOS\u306b\u3088\u3063\u3066\u8a73\u7d30\u306a\u6319\u52d5\u304c\u7570\u306a\u308b\u305f\u3081\u7d71\u4e00\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u66f8\u304f\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u306e\u3067\u3057\u3087\u3046\u3002\n\n\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306e\u5b9f\u884c\u65b9\u6cd5\n\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306e\u5b9f\u884c\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306a\u3069\u3001\u8a73\u7d30\u306a\u4ed5\u7d44\u307f\u306fGo\u306a\u3089\u308f\u304b\u308b\u30b7\u30b9\u30c6\u30e0\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 \u2015 \u7b2c5\u56de Go\u304b\u3089\u898b\u305f\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306b\u5927\u5909\u308f\u304b\u308a\u3084\u3059\u3044\u89e3\u8aac\u304c\u8f09\u3063\u3066\u3044\u308b\u306e\u3067\u8aac\u660e\u306f\u5272\u611b\u3057\u307e\u3059\u3002\n\u307e\u305f\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3068\u3044\u3046\u306e\u306fOS\u306b\u4f9d\u5b58\u3057\u305f\u51e6\u7406\u3067\u3042\u308a\u3001POSIX\u306a\u3069\u3067\u898f\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3082\u306e\u304c\u591a\u304f\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3059\u3079\u3066\u306e\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306e\u30e9\u30c3\u30d1\u30fc\u3092Go\u3067\u5b9f\u88c5\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u73fe\u5b9f\u7684\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u305d\u3053\u3067Go\u306f\u30e9\u30c3\u30d1\u30fc\u95a2\u6570\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u306a\u3044\u95a2\u6570\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306bsyscall.Syscall()\u3068\u3044\u3046\u95a2\u6570\u3082\u7528\u610f\u3057\u3066\u3044\u307e\u3059\u3002\n\u3057\u304b\u3057\u79fb\u690d\u6027\u3092\u8003\u616e\u3057\u3066Windows, Linux, Mac\u306a\u3069\u306e\u305d\u308c\u305e\u308c\u306b\u5408\u308f\u305b\u305f\u5b9f\u88c5\u3092\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u306e\u3067\u3001\u666e\u6bb5\u306f\u4f7f\u3046\u3053\u3068\u306f\u307e\u305a\u306a\u3044\u3067\u3057\u3087\u3046\u3002\n\nGo\u3068\u30a2\u30bb\u30f3\u30d6\u30e9\u306e\u30d3\u30eb\u30c9\n\u5148\u307b\u3069\u7d39\u4ecb\u3057\u305f\u8a18\u4e8b\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u3044\u3066\u3042\u308a\u307e\u3057\u305f\u3002\n\nSyscall()\u306e\u4e2d\u8eab\u306f\u3001macOS\u306e\u5834\u5408\u3001asm_darwin_amd64.s\u3068\u3044\u3046Go\u8a00\u8a9e\u306e\u4f4e\u30ec\u30d9\u30eb\u30a2\u30bb\u30f3\u30d6\u30ea\u8a00\u8a9e\u3067\u66f8\u304b\u308c\u305f\u30b3\u30fc\u30c9\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306bGo\u3068\u30a2\u30bb\u30f3\u30d6\u30e9\u3067\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u3089\u3092\u3069\u306e\u3088\u3046\u306b\u30d3\u30eb\u30c9\u3057\u3066\u3044\u308b\u306e\u304b\u3092\u898b\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nSyscall()\u306f\u30a2\u30bb\u30f3\u30d6\u30e9\u306e\u30bd\u30fc\u30b9\u306b\u5b9a\u7fa9\u3057\u3066\u3042\u308a\u3001\u5ba3\u8a00\u306fsyscall_unix.go\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\nsyscall_unix.go\nfunc Syscall(trap, a1, a2, a3 uintptr) (r1, r2 uintptr, err Errno)\n\n\nhttps://golang.org/src/syscall/syscall_unix.go?s=542:608#L18\n\u666e\u6bb5\u898b\u304b\u3051\u306a\u3044\u8a18\u6cd5\u3067\u3059\u304c\u3001\u7570\u306a\u308b\u5834\u6240\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u95a2\u6570\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u306f\u5fc5\u8981\u3067\u3059\u3002\u8a73\u7d30\u306f\u3001\u3053\u3061\u3089\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002Go Binary Hacks - go build\u305b\u305a\u306b\u30d3\u30eb\u30c9\u3059\u308b #golang\n\u307e\u305f\u4ed6\u306e\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u95a2\u6570\u306f//sys\u3068\u3044\u3046\u7279\u6b8a\u306a\u8a18\u6cd5\u3067\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u3068\u3053\u308d\u304c\u3042\u308a\u307e\u3059\u3002\u672c\u6765\u306f//\u306f\u30b3\u30e1\u30f3\u30c8\u306e\u306f\u305a\u3067\u3059\u304c//sys\u306b\u306f\u7279\u5225\u306e\u610f\u5473\u304c\u4e0e\u3048\u3089\u308c\u3066\u3044\u307e\u3059\u3002\n\u4ee5\u4e0b\u306fMac\u306e\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u7fa4\u3067\u3059\u3002\n\nsyscall_darwin.go\n//sys    Access(path string, mode uint32) (err error)\n//sys    Adjtime(delta *Timeval, olddelta *Timeval) (err error)\n//sys    Chdir(path string) (err error)\n//sys    Chflags(path string, flags int) (err error)\n//sys    Chmod(path string, mode uint32) (err error)\n//sys    Chown(path string, uid int, gid int) (err error)\n//sys    Chroot(path string) (err error)\n//sys    Close(fd int) (err error)\n\n\nhttps://golang.org/src/syscall/syscall_darwin.go?#L218\n//sys\u3068\u3044\u3046\u884c\u306f\u3001mksyscall.pl\u3092\u4f7f\u3063\u3066//sys\u3068\u66f8\u304b\u308c\u305f\u884c\u306e\u30e9\u30c3\u30d1\u30fc\u3092\u81ea\u52d5\u751f\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n\u6050\u3089\u304f\u5358\u7d14\u306b\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u7d14\u7c8b\u306a\u30e9\u30c3\u30d1\u30fc\u3092\u305d\u306e\u90fd\u5ea6\u5b9f\u88c5\u3059\u308b\u306e\u304c\u624b\u9593\u306a\u305f\u3081\u3001\u5c02\u7528\u306e\u8a18\u6cd5\u3068\u30c4\u30fc\u30eb\u3092\u7528\u610f\u3057\u305f\u306e\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\ncd github.com/golang/go/src/syscall\n./mksyscall.pl syscall_darwin.go\n\n\u5909\u63db\u5f8c\u306e\u30bd\u30fc\u30b9\u304c\u6a19\u6e96\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\u4ee5\u4e0b\u3001\u51fa\u529b\u4f8b\n// THIS FILE IS GENERATED BY THE COMMAND AT THE TOP; DO NOT EDIT\n\nfunc Access(path string, mode uint32) (err error) {\n        var _p0 *byte\n        _p0, err = BytePtrFromString(path)\n        if err != nil {\n                return\n        }\n        _, _, e1 := Syscall(SYS_ACCESS, uintptr(unsafe.Pointer(_p0)), uintptr(mode), 0)\n        use(unsafe.Pointer(_p0))\n        if e1 != 0 {\n                err = errnoErr(e1)\n        }\n        return\n}\n\n\u3053\u306e\u751f\u6210\u3055\u308c\u305f\u3082\u306e\u306f\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u30b3\u30df\u30c3\u30c8\u3057\u3066\u3042\u308a\u307e\u3059\u3002\nhttps://golang.org/src/syscall/zsyscall_darwin_amd64.go#L298\n\u5b9f\u969b\u306b\u306f\u3001mkall.sh\u304b\u3089\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\nMac 64bit\u74b0\u5883\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n./mksyscall.pl syscall_bsd.go syscall_darwin.go syscall_darwin_amd64.go |gofmt >zsyscall_darwin_amd64.go'\n\nhttps://golang.org/src/syscall/mkall.sh\n\nGo\u672c\u4f53\u306e\u30d3\u30eb\u30c9\n\u6700\u5f8c\u306bGo\u3092\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u3059\u308b\u969b\u306b\u3069\u306e\u3088\u3046\u306bsyscall\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3057\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\u307e\u305aGo 1.5\u4ee5\u964d\u306e\u30d3\u30eb\u30c9\u306e\u624b\u9806\u3092\u7406\u89e3\u3057\u307e\u3057\u3087\u3046\u3002\n\nGo 1.4\u3092\u4f7f\u3063\u3066cmd/dist\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3002\n\ndist\u3092\u4f7f\u3063\u3066\u3001Go 1.4\u3067Go 1.x\u306e\u30b3\u30f3\u30d1\u30a4\u30e9\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3002\n\ndist\u3092\u4f7f\u3063\u3066\u3001Go 1.x\u3067Go 1.x\u306e\u30b3\u30f3\u30d1\u30a4\u30e9\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3002\n\ndist\u3092\u4f7f\u3063\u3066\u3001Go 1.x\u306e\u30b3\u30f3\u30d1\u30a4\u30e9\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u3067Go 1.x\u306ecmd/go\u3092go_bootstrap\u3068\u3057\u3066\u30d3\u30eb\u30c9\u3059\u308b\u3002\n\ngo_bootstrap\u3092\u4f7f\u3063\u3066\u3001\u6b8b\u308a\u306eGo 1.x\u306e\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u3084\u30b3\u30de\u30f3\u30c9\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3002\n\n\u3053\u306e\u4e2d\u3067\u6700\u7d42\u7684\u306bGo\u306esyscall\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3068\u3053\u308d\u306f\u3001\u6700\u5f8c\u306e\u300cgo_bootstrap\u3092\u4f7f\u3063\u3066\u3001\u6b8b\u308a\u306eGo 1.x\u306e\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u3084\u30b3\u30de\u30f3\u30c9\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3002\u300d\u306b\u306a\u308a\u307e\u3059\u3002\n\u5b9f\u884c\u3057\u3066\u3044\u308b\u7b87\u6240\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n\ngo/src/make.bash\necho \"##### Building packages and commands for $GOOS/$GOARCH.\"\nCC=$CC_FOR_TARGET \"$GOTOOLDIR\"/go_bootstrap install $GO_FLAGS -gcflags \"$GO_GCFLAGS\" -ldflags \"$GO_LDFLAGS\" -v std cmd\necho\n\n\n\u5b9f\u884c\u3057\u305f\u6642\u306e\u30ed\u30b0\u3002\n$ ./make.bash\n##### Building packages and commands for darwin/amd64.\n+ CC=clang\n+ /Users/sonatard/src/github.com/golang/go/pkg/tool/darwin_amd64/go_bootstrap install -gcflags '' -ldflags '' -v std cmd\nruntime/internal/sys\nruntime/internal/atomic\nruntime\nerrors\ninternal/race\n.\n.\n.\nsyscall\n\n\u3053\u308c\u3060\u3051\u3067\u306f\u8a73\u7d30\u304c\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u30ed\u30b0\u3092\u4ed5\u8fbc\u307f\u307e\u3059\u3002install\u306b-x\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\ngo/src/make.bash\n-/Users/sonatard/src/github.com/golang/go/pkg/tool/darwin_amd64/go_bootstrap install -gcflags '' -ldflags '' -v std cmd\n+/Users/sonatard/src/github.com/golang/go/pkg/tool/darwin_amd64/go_bootstrap install -x -gcflags '' -ldflags '' -v std cmd\n\n\n\u4ee5\u4e0b\u3001\u30ed\u30b0\u3092\u898b\u3084\u3059\u3044\u3088\u3046\u306b\u6574\u5f62\u3057\u3066\u3044\u307e\u3059\u3002\nsyscall\ncd /Users/sonatard/src/github.com/golang/go/src/syscall\n\n# syscall.a\u3092\u4f5c\u6210\nmkdir -p $WORK/syscall/_obj/\ncd src/github.com/golang/go/src/syscall\ngo tool compile -o $WORK/syscall.a -trimpath $WORK -p syscall -buildid 23f18ef6130112e16d17ad131dc023da83cc5f0f -D _/Users/sonatard/src/github.com/golang/go/src/syscall -I $WORK -pack -asmhdr $WORK/syscall/_obj/go_asm.h ./bpf_bsd.go ./env_unix.go ./exec_bsd.go ./exec_unix.go ./flock.go ./msan0.go ./route_bsd.go ./route_darwin.go ./sockcmsg_unix.go ./str.go ./syscall.go ./syscall_bsd.go ./syscall_darwin.go ./syscall_darwin_amd64.go ./syscall_unix.go ./zerrors_darwin_amd64.go ./zsyscall_darwin_amd64.go ./zsysnum_darwin_amd64.go ./ztypes_darwin_amd64.go\n\n# asm.s\u304b\u3089asm.o\u3092\u4f5c\u6210c\ngo tool asm -o $WORK/syscall/_obj/asm.o -trimpath $WORK -I $WORK/syscall/_obj/ -I go/pkg/include -D GOOS_darwin -D GO\nARCH_amd64 ./asm.s\n\n# asm_darwin_amd64.s\u304b\u3089asm_darwin_amd64.o\u3092\u4f5c\u6210\ngo tool asm -o $WORK/syscall/_obj/asm_darwin_amd64.o -trimpath $WORK -I $WORK/syscall/_obj/ -I go/pkg/include -D GOOS_darwin -D GOARCH_amd64 ./asm_darwin_amd64.s\n\n# syscall.a\u306b asm.o\u3068asm_darwin_amd64.o\u3092\u8ffd\u52a0\ngo tool pack r $WORK/syscall.a $WORK/syscall/_obj/asm.o $WORK/syscall/_obj/asm_darwin_amd64.o\n\n# \u4f5c\u6210\u3057\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u79fb\u52d5\nmv $WORK/syscall.a /Users/sonatard/src/github.com/golang/go/pkg/darwin_amd64/syscall.a\n\nasm.o\u306emain.use()\u306f\u4f55\u306a\u306e\u304b\u4e0d\u660e\u3067\u3059\u3002(\u305f\u3060return\u3057\u3066\u3044\u308b\u3060\u3051\uff1f)\n$ $WORK/syscall/_obj/\n$ go tool nm asm.o\n6e T %22%22.use\n\n\nsyscall/asm.s\n#include \"textflag.h\"\n\nTEXT \u00b7use(SB),NOSPLIT,$0\n    RET\n\n\nasm_darwin_amd64.s\u306b\u306fSyscall\u306a\u3069\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n$ go tool nm asm_darwin_amd64.o\n367 T %22%22.RawSyscall\n3e6 T %22%22.RawSyscall6\n163 T %22%22.Syscall\n1f6 T %22%22.Syscall6\n28f T %22%22.Syscall9\n    U runtime.entersyscall\n    U runtime.exitsyscall\n\nhttps://github.com/golang/go/blob/master/src/syscall/asm_darwin_amd64.s\n\n\u307e\u3068\u3081\n\n\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306b\u95a2\u9023\u3059\u308bOS\u306b\u4f9d\u5b58\u3057\u305f\u51e6\u7406\u306f\u3001\u5b9f\u884c\u74b0\u5883\u3054\u3068\u306b\u5b9f\u88c5\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306e\u547c\u3073\u51fa\u3057\u306f\u3001C\u8a00\u8a9e\u3067\u306f\u306a\u304f\u30a2\u30bb\u30f3\u30d6\u30e9\u3067\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u3002\nGo\u672c\u4f53\u3067\u306f\u3001\u5b9f\u884c\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u9069\u5207\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u3066\u30d3\u30eb\u30c9\u3059\u308b\u3002\n\n\u4ee5\u4e0a\u3067\u4e00\u901a\u308a\u306e\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306e\u6d41\u308c\u304c\u308f\u304b\u3063\u305f\u306e\u3067\u3001\u3082\u3057\u4e0d\u8db3\u3057\u3066\u3044\u308b\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u304c\u3042\u308c\u3070PR\u3092\u51fa\u305b\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\u6b21\u56de\u306f\u3001\u81ea\u5206\u3067go\u3068assembla\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u30d3\u30eb\u30c9\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u66f8\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u95a2\u9023\nGo\u306e\u4ed5\u69d8\u306b\u3064\u3044\u3066\u8208\u5473\u304c\u3042\u308b\u65b9\u306f\u3053\u3061\u3089\u3082\u3069\u3046\u305e\n\nBetter C - Go\u8a00\u8a9e\u3068\u6574\u6570 #golang\nGo Binary Hacks - go build\u305b\u305a\u306b\u30d3\u30eb\u30c9\u3059\u308b #golang\n\n\n\n\n\nGo 1.4\u4ee5\u964dsyscall\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u5229\u7528\u306f\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u8a73\u7d30\u306fThe syscall package\u00a0\u21a9\n\n\n\n## \u306f\u3058\u3081\u306b\nGo\u306f\u3001Go1.5\u4ee5\u964dC\u8a00\u8a9e\u306b\u3088\u308b\u5b9f\u88c5\u304c\u306a\u304f\u306a\u308a\u3001\u307b\u307c\u5168\u3066\u304cGo\u306b\u3088\u3063\u3066\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081Go\u30a8\u30f3\u30b8\u30cb\u30a2\u306f\u6700\u60aaGo\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u8aad\u3093\u3067\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u305f\u3081\u3001\u3068\u3066\u3082\u751f\u7523\u7684\u306a\u72b6\u614b\u306b\u3042\u308b\u3068\u8a00\u3048\u307e\u3059\u3002\n\u3057\u304b\u3057Go\u304c\u30bb\u30eb\u30d5\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3060\u3068\u3057\u3066\u3082OS\u306e\u6a5f\u80fd\u7fa4\u3092\u547c\u3073\u51fa\u3059\u3068\u304d\u306b\u306f\u3001C\u8a00\u8a9e\u3067\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\u3067\u306f\u3001Go\u3067\u306f\u3069\u306e\u3088\u3046\u306b\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u306e\u3067\u3057\u3087\u3046\u304b\uff1f\u307e\u305f\u3001\u3069\u306e\u3088\u3046\u306b\u305d\u308c\u3089\u3092\u30d3\u30eb\u30c9\u3057\u3066\u3044\u308b\u306e\u3067\u3057\u3087\u3046\u304b\uff1f\n\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001\u4e0a\u8a18\u306e\u7591\u554f\u3092Go\u306e\u30bd\u30fc\u30b9\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304b\u3089\u8aad\u307f\u89e3\u3044\u3066\u3044\u304d\u307e\u3059\u3002\n\n## Go\u3068\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\n\n\u4e00\u822c\u306eGo\u30d7\u30ed\u30b0\u30e9\u30de\u304cGo\u3067\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u5b9f\u884c\u3059\u308b\u306b\u306f\u3001~~[syscall\u30d1\u30c3\u30b1\u30fc\u30b8](https://golang.org/pkg/syscall/)~~\u3001[golang.org/x/sys/\u30d1\u30c3\u30b1\u30fc\u30b8](https://godoc.org/golang.org/x/sys)\u3092\u5229\u7528\u3057\u307e\u3059\u3002[^1]\n\n[^1]: Go 1.4\u4ee5\u964dsyscall\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u5229\u7528\u306f\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u8a73\u7d30\u306f[The syscall package](https://docs.google.com/document/d/1QXzI9I1pOfZPujQzxhyRy6EeHYTQitKKjHfpq0zpxZs/)\n\n\u95a2\u6570\u4e00\u89a7\u306b\u306f\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u304c\u306e\u540d\u524d\u306e\u95a2\u6570\u304c\u4e26\u3093\u3067\u3044\u307e\u3059\u3002\u3053\u308c\u3089\u306f\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u5b9f\u884c\u3057\u3084\u3059\u3044\u3088\u3046\u306bGo\u3067\u30e9\u30c3\u30d1\u30fc\u3057\u305f\u95a2\u6570\u7fa4\u3067\u3059\u3002\n\nsyscall\u30d1\u30c3\u30b1\u30fc\u30b8\u306f\u307b\u3068\u3093\u3069\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u66f8\u304b\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306fOS\u306b\u3088\u3063\u3066\u8a73\u7d30\u306a\u6319\u52d5\u304c\u7570\u306a\u308b\u305f\u3081\u7d71\u4e00\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u66f8\u304f\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u306e\u3067\u3057\u3087\u3046\u3002\n\n### \u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306e\u5b9f\u884c\u65b9\u6cd5\n\n\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306e\u5b9f\u884c\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306a\u3069\u3001\u8a73\u7d30\u306a\u4ed5\u7d44\u307f\u306f[Go\u306a\u3089\u308f\u304b\u308b\u30b7\u30b9\u30c6\u30e0\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 \u2015 \u7b2c5\u56de Go\u304b\u3089\u898b\u305f\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb](http://ascii.jp/elem/000/001/267/1267477/)\u306b\u5927\u5909\u308f\u304b\u308a\u3084\u3059\u3044\u89e3\u8aac\u304c\u8f09\u3063\u3066\u3044\u308b\u306e\u3067\u8aac\u660e\u306f\u5272\u611b\u3057\u307e\u3059\u3002\n\n\u307e\u305f\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3068\u3044\u3046\u306e\u306fOS\u306b\u4f9d\u5b58\u3057\u305f\u51e6\u7406\u3067\u3042\u308a\u3001POSIX\u306a\u3069\u3067\u898f\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u3082\u306e\u304c\u591a\u304f\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3059\u3079\u3066\u306e\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306e\u30e9\u30c3\u30d1\u30fc\u3092Go\u3067\u5b9f\u88c5\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u73fe\u5b9f\u7684\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u305d\u3053\u3067Go\u306f\u30e9\u30c3\u30d1\u30fc\u95a2\u6570\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u306a\u3044\u95a2\u6570\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b`syscall.Syscall()`\u3068\u3044\u3046\u95a2\u6570\u3082\u7528\u610f\u3057\u3066\u3044\u307e\u3059\u3002\n\u3057\u304b\u3057\u79fb\u690d\u6027\u3092\u8003\u616e\u3057\u3066Windows, Linux, Mac\u306a\u3069\u306e\u305d\u308c\u305e\u308c\u306b\u5408\u308f\u305b\u305f\u5b9f\u88c5\u3092\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u306e\u3067\u3001\u666e\u6bb5\u306f\u4f7f\u3046\u3053\u3068\u306f\u307e\u305a\u306a\u3044\u3067\u3057\u3087\u3046\u3002\n\n### Go\u3068\u30a2\u30bb\u30f3\u30d6\u30e9\u306e\u30d3\u30eb\u30c9\n\n\u5148\u307b\u3069\u7d39\u4ecb\u3057\u305f\u8a18\u4e8b\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u3044\u3066\u3042\u308a\u307e\u3057\u305f\u3002\n\n> Syscall()\u306e\u4e2d\u8eab\u306f\u3001macOS\u306e\u5834\u5408\u3001asm_darwin_amd64.s\u3068\u3044\u3046Go\u8a00\u8a9e\u306e\u4f4e\u30ec\u30d9\u30eb\u30a2\u30bb\u30f3\u30d6\u30ea\u8a00\u8a9e\u3067\u66f8\u304b\u308c\u305f\u30b3\u30fc\u30c9\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306bGo\u3068\u30a2\u30bb\u30f3\u30d6\u30e9\u3067\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u3089\u3092\u3069\u306e\u3088\u3046\u306b\u30d3\u30eb\u30c9\u3057\u3066\u3044\u308b\u306e\u304b\u3092\u898b\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nSyscall()\u306f\u30a2\u30bb\u30f3\u30d6\u30e9\u306e\u30bd\u30fc\u30b9\u306b\u5b9a\u7fa9\u3057\u3066\u3042\u308a\u3001\u5ba3\u8a00\u306fsyscall_unix.go\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\n\n```go:syscall_unix.go\nfunc Syscall(trap, a1, a2, a3 uintptr) (r1, r2 uintptr, err Errno)\n```\n\nhttps://golang.org/src/syscall/syscall_unix.go?s=542:608#L18\n\n\u666e\u6bb5\u898b\u304b\u3051\u306a\u3044\u8a18\u6cd5\u3067\u3059\u304c\u3001\u7570\u306a\u308b\u5834\u6240\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u95a2\u6570\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u306f\u5fc5\u8981\u3067\u3059\u3002\u8a73\u7d30\u306f\u3001\u3053\u3061\u3089\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002[Go Binary Hacks - go build\u305b\u305a\u306b\u30d3\u30eb\u30c9\u3059\u308b #golang](http://qiita.com/sonatard/items/7b9b376f3420879a00d6)\n\n\n\n\u307e\u305f\u4ed6\u306e\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u95a2\u6570\u306f`//sys`\u3068\u3044\u3046\u7279\u6b8a\u306a\u8a18\u6cd5\u3067\u8a18\u8ff0\u3055\u308c\u3066\u3044\u308b\u3068\u3053\u308d\u304c\u3042\u308a\u307e\u3059\u3002\u672c\u6765\u306f`//`\u306f\u30b3\u30e1\u30f3\u30c8\u306e\u306f\u305a\u3067\u3059\u304c`//sys`\u306b\u306f\u7279\u5225\u306e\u610f\u5473\u304c\u4e0e\u3048\u3089\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306fMac\u306e\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u7fa4\u3067\u3059\u3002\n\n```go:syscall_darwin.go\n//sys    Access(path string, mode uint32) (err error)\n//sys    Adjtime(delta *Timeval, olddelta *Timeval) (err error)\n//sys    Chdir(path string) (err error)\n//sys    Chflags(path string, flags int) (err error)\n//sys    Chmod(path string, mode uint32) (err error)\n//sys    Chown(path string, uid int, gid int) (err error)\n//sys    Chroot(path string) (err error)\n//sys    Close(fd int) (err error)\n```\n\nhttps://golang.org/src/syscall/syscall_darwin.go?#L218\n\n`//sys`\u3068\u3044\u3046\u884c\u306f\u3001`mksyscall.pl`\u3092\u4f7f\u3063\u3066`//sys`\u3068\u66f8\u304b\u308c\u305f\u884c\u306e\u30e9\u30c3\u30d1\u30fc\u3092\u81ea\u52d5\u751f\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n\u6050\u3089\u304f\u5358\u7d14\u306b\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u7d14\u7c8b\u306a\u30e9\u30c3\u30d1\u30fc\u3092\u305d\u306e\u90fd\u5ea6\u5b9f\u88c5\u3059\u308b\u306e\u304c\u624b\u9593\u306a\u305f\u3081\u3001\u5c02\u7528\u306e\u8a18\u6cd5\u3068\u30c4\u30fc\u30eb\u3092\u7528\u610f\u3057\u305f\u306e\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n```\ncd github.com/golang/go/src/syscall\n./mksyscall.pl syscall_darwin.go\n```\n\n\u5909\u63db\u5f8c\u306e\u30bd\u30fc\u30b9\u304c\u6a19\u6e96\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\u4ee5\u4e0b\u3001\u51fa\u529b\u4f8b\n\n```go\n// THIS FILE IS GENERATED BY THE COMMAND AT THE TOP; DO NOT EDIT\n\nfunc Access(path string, mode uint32) (err error) {\n        var _p0 *byte\n        _p0, err = BytePtrFromString(path)\n        if err != nil {\n                return\n        }\n        _, _, e1 := Syscall(SYS_ACCESS, uintptr(unsafe.Pointer(_p0)), uintptr(mode), 0)\n        use(unsafe.Pointer(_p0))\n        if e1 != 0 {\n                err = errnoErr(e1)\n        }\n        return\n}\n```\n\n\u3053\u306e\u751f\u6210\u3055\u308c\u305f\u3082\u306e\u306f\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u30b3\u30df\u30c3\u30c8\u3057\u3066\u3042\u308a\u307e\u3059\u3002\nhttps://golang.org/src/syscall/zsyscall_darwin_amd64.go#L298\n\n\u5b9f\u969b\u306b\u306f\u3001`mkall.sh`\u304b\u3089\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\nMac 64bit\u74b0\u5883\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\n./mksyscall.pl syscall_bsd.go syscall_darwin.go syscall_darwin_amd64.go |gofmt >zsyscall_darwin_amd64.go'\n```\n\n\nhttps://golang.org/src/syscall/mkall.sh\n\n### Go\u672c\u4f53\u306e\u30d3\u30eb\u30c9\n\n\u6700\u5f8c\u306bGo\u3092\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u30d3\u30eb\u30c9\u3059\u308b\u969b\u306b\u3069\u306e\u3088\u3046\u306bsyscall\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3057\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u307e\u305aGo 1.5\u4ee5\u964d\u306e\u30d3\u30eb\u30c9\u306e\u624b\u9806\u3092\u7406\u89e3\u3057\u307e\u3057\u3087\u3046\u3002\n\n\n1. Go 1.4\u3092\u4f7f\u3063\u3066`cmd/dist`\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3002\n1. `dist`\u3092\u4f7f\u3063\u3066\u3001Go 1.4\u3067Go 1.x\u306e\u30b3\u30f3\u30d1\u30a4\u30e9\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3002\n1. `dist`\u3092\u4f7f\u3063\u3066\u3001Go 1.x\u3067Go 1.x\u306e\u30b3\u30f3\u30d1\u30a4\u30e9\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3002\n1. `dist`\u3092\u4f7f\u3063\u3066\u3001Go 1.x\u306e\u30b3\u30f3\u30d1\u30a4\u30e9\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u3067Go 1.x\u306e`cmd/go`\u3092`go_bootstrap`\u3068\u3057\u3066\u30d3\u30eb\u30c9\u3059\u308b\u3002\n1. `go_bootstrap`\u3092\u4f7f\u3063\u3066\u3001\u6b8b\u308a\u306eGo 1.x\u306e\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u3084\u30b3\u30de\u30f3\u30c9\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3002\n\n\u3053\u306e\u4e2d\u3067\u6700\u7d42\u7684\u306bGo\u306esyscall\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3068\u3053\u308d\u306f\u3001\u6700\u5f8c\u306e\u300cgo_bootstrap\u3092\u4f7f\u3063\u3066\u3001\u6b8b\u308a\u306eGo 1.x\u306e\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u3084\u30b3\u30de\u30f3\u30c9\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3002\u300d\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u5b9f\u884c\u3057\u3066\u3044\u308b\u7b87\u6240\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n\n```bash:go/src/make.bash\necho \"##### Building packages and commands for $GOOS/$GOARCH.\"\nCC=$CC_FOR_TARGET \"$GOTOOLDIR\"/go_bootstrap install $GO_FLAGS -gcflags \"$GO_GCFLAGS\" -ldflags \"$GO_LDFLAGS\" -v std cmd\necho\n```\n\n\u5b9f\u884c\u3057\u305f\u6642\u306e\u30ed\u30b0\u3002\n\n```\n$ ./make.bash\n##### Building packages and commands for darwin/amd64.\n+ CC=clang\n+ /Users/sonatard/src/github.com/golang/go/pkg/tool/darwin_amd64/go_bootstrap install -gcflags '' -ldflags '' -v std cmd\nruntime/internal/sys\nruntime/internal/atomic\nruntime\nerrors\ninternal/race\n.\n.\n.\nsyscall\n```\n\n\u3053\u308c\u3060\u3051\u3067\u306f\u8a73\u7d30\u304c\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u30ed\u30b0\u3092\u4ed5\u8fbc\u307f\u307e\u3059\u3002`install`\u306b`-x`\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\n```diff:go/src/make.bash\n-/Users/sonatard/src/github.com/golang/go/pkg/tool/darwin_amd64/go_bootstrap install -gcflags '' -ldflags '' -v std cmd\n+/Users/sonatard/src/github.com/golang/go/pkg/tool/darwin_amd64/go_bootstrap install -x -gcflags '' -ldflags '' -v std cmd\n```\n\n\u4ee5\u4e0b\u3001\u30ed\u30b0\u3092\u898b\u3084\u3059\u3044\u3088\u3046\u306b\u6574\u5f62\u3057\u3066\u3044\u307e\u3059\u3002\n\n```\nsyscall\ncd /Users/sonatard/src/github.com/golang/go/src/syscall\n\n# syscall.a\u3092\u4f5c\u6210\nmkdir -p $WORK/syscall/_obj/\ncd src/github.com/golang/go/src/syscall\ngo tool compile -o $WORK/syscall.a -trimpath $WORK -p syscall -buildid 23f18ef6130112e16d17ad131dc023da83cc5f0f -D _/Users/sonatard/src/github.com/golang/go/src/syscall -I $WORK -pack -asmhdr $WORK/syscall/_obj/go_asm.h ./bpf_bsd.go ./env_unix.go ./exec_bsd.go ./exec_unix.go ./flock.go ./msan0.go ./route_bsd.go ./route_darwin.go ./sockcmsg_unix.go ./str.go ./syscall.go ./syscall_bsd.go ./syscall_darwin.go ./syscall_darwin_amd64.go ./syscall_unix.go ./zerrors_darwin_amd64.go ./zsyscall_darwin_amd64.go ./zsysnum_darwin_amd64.go ./ztypes_darwin_amd64.go\n\n# asm.s\u304b\u3089asm.o\u3092\u4f5c\u6210c\ngo tool asm -o $WORK/syscall/_obj/asm.o -trimpath $WORK -I $WORK/syscall/_obj/ -I go/pkg/include -D GOOS_darwin -D GO\nARCH_amd64 ./asm.s\n\n# asm_darwin_amd64.s\u304b\u3089asm_darwin_amd64.o\u3092\u4f5c\u6210\ngo tool asm -o $WORK/syscall/_obj/asm_darwin_amd64.o -trimpath $WORK -I $WORK/syscall/_obj/ -I go/pkg/include -D GOOS_darwin -D GOARCH_amd64 ./asm_darwin_amd64.s\n\n# syscall.a\u306b asm.o\u3068asm_darwin_amd64.o\u3092\u8ffd\u52a0\ngo tool pack r $WORK/syscall.a $WORK/syscall/_obj/asm.o $WORK/syscall/_obj/asm_darwin_amd64.o\n\n# \u4f5c\u6210\u3057\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u79fb\u52d5\nmv $WORK/syscall.a /Users/sonatard/src/github.com/golang/go/pkg/darwin_amd64/syscall.a\n```\n\n\n`asm.o`\u306e`main.use()`\u306f\u4f55\u306a\u306e\u304b\u4e0d\u660e\u3067\u3059\u3002(\u305f\u3060return\u3057\u3066\u3044\u308b\u3060\u3051\uff1f)\n\n```\n$ $WORK/syscall/_obj/\n$ go tool nm asm.o\n6e T %22%22.use\n```\n\n```:syscall/asm.s\n#include \"textflag.h\"\n\nTEXT \u00b7use(SB),NOSPLIT,$0\n    RET\n```\n\n`asm_darwin_amd64.s`\u306b\u306fSyscall\u306a\u3069\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\n$ go tool nm asm_darwin_amd64.o\n367 T %22%22.RawSyscall\n3e6 T %22%22.RawSyscall6\n163 T %22%22.Syscall\n1f6 T %22%22.Syscall6\n28f T %22%22.Syscall9\n    U runtime.entersyscall\n    U runtime.exitsyscall\n```\n\nhttps://github.com/golang/go/blob/master/src/syscall/asm_darwin_amd64.s\n\n\n## \u307e\u3068\u3081\n\n- \u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306b\u95a2\u9023\u3059\u308bOS\u306b\u4f9d\u5b58\u3057\u305f\u51e6\u7406\u306f\u3001\u5b9f\u884c\u74b0\u5883\u3054\u3068\u306b\u5b9f\u88c5\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n- \u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306e\u547c\u3073\u51fa\u3057\u306f\u3001C\u8a00\u8a9e\u3067\u306f\u306a\u304f\u30a2\u30bb\u30f3\u30d6\u30e9\u3067\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u3002\n- Go\u672c\u4f53\u3067\u306f\u3001\u5b9f\u884c\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u9069\u5207\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u3066\u30d3\u30eb\u30c9\u3059\u308b\u3002\n\n\u4ee5\u4e0a\u3067\u4e00\u901a\u308a\u306e\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306e\u6d41\u308c\u304c\u308f\u304b\u3063\u305f\u306e\u3067\u3001\u3082\u3057\u4e0d\u8db3\u3057\u3066\u3044\u308b\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u304c\u3042\u308c\u3070PR\u3092\u51fa\u305b\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u6b21\u56de\u306f\u3001\u81ea\u5206\u3067go\u3068assembla\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u30d3\u30eb\u30c9\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u66f8\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n## \u95a2\u9023\n\nGo\u306e\u4ed5\u69d8\u306b\u3064\u3044\u3066\u8208\u5473\u304c\u3042\u308b\u65b9\u306f\u3053\u3061\u3089\u3082\u3069\u3046\u305e\n\n- [Better C - Go\u8a00\u8a9e\u3068\u6574\u6570 #golang](http://qiita.com/sonatard/items/464a9d45c689386edfe1)\n- [Go Binary Hacks - go build\u305b\u305a\u306b\u30d3\u30eb\u30c9\u3059\u308b #golang](http://qiita.com/sonatard/items/7b9b376f3420879a00d6)\n\n", "tags": ["Go", "C\u8a00\u8a9e", "assembly"]}