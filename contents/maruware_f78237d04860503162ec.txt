{"context": " More than 1 year has passed since last update.\n\n\u73fe\u8c61\nfluentd\u3092\u4f7f\u3063\u3066Apache\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u3092Elasticsearch+kibana\u3078\u6d41\u3057\u305f\u969b\u306b\n\"host\"\u3084\"path\"\u3001\"agent\"\u306a\u3069\u306e\u5024\u304c\u5206\u304b\u3061\u66f8\u304d\u3055\u308c\u3066\u3057\u307e\u3046\u3002\n\uff08Elasticsearch\u304c\u5168\u6587\u691c\u7d22\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u3068\u3057\u3066\u3044\u308b\u305f\u3081\u3001\"/\"\u306a\u3069\u3092\u533a\u5207\u308a\u6587\u5b57\u3068\u3057\u3066\u5206\u5272\u3057\u3066\u3057\u307e\u3046\uff09\n\n\u5bfe\u51e6\n\u3053\u308c\u3092\u89e3\u6c7a\u3059\u308b\u306b\u306fElasticsearch\u306eMapping\u8a2d\u5b9a\u3092\u3059\u308c\u3070\u3088\u3044\u3002\nfluentd\u304c\u4ee5\u4e0b\u8a2d\u5b9a\u3060\u3068\u3057\u305f\u3089\n<match **>\n  type elasticsearch\n  type_name apache_access\n  logstash_prefix apache_access\n  ...\n</match>\n\n\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u3066\u8a2d\u5b9a\u3002\nproperties\u306b\u3069\u306e\u30ad\u30fc\u3092\u6307\u5b9a\u3059\u308b\u304b\u306f\u304a\u597d\u307f\u3067\u3002\ncurl -XPUT localhost:9200/_template/template_1 -d '\n{\n   \"template\" : \"apache_access-*\",\n   \"mappings\" : {\n       \"apache_access\": {\n           \"properties\": {\n                \"host\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" },\n                \"path\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" },\n                \"referer\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" },\n                \"domain\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" },\n                \"agent\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" }\n           }\n       }\n   }\n}\n'\n\n# \u73fe\u8c61\nfluentd\u3092\u4f7f\u3063\u3066Apache\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u3092Elasticsearch+kibana\u3078\u6d41\u3057\u305f\u969b\u306b\n\"host\"\u3084\"path\"\u3001\"agent\"\u306a\u3069\u306e\u5024\u304c\u5206\u304b\u3061\u66f8\u304d\u3055\u308c\u3066\u3057\u307e\u3046\u3002\n\uff08Elasticsearch\u304c\u5168\u6587\u691c\u7d22\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u3068\u3057\u3066\u3044\u308b\u305f\u3081\u3001\"/\"\u306a\u3069\u3092\u533a\u5207\u308a\u6587\u5b57\u3068\u3057\u3066\u5206\u5272\u3057\u3066\u3057\u307e\u3046\uff09\n\n# \u5bfe\u51e6\n\u3053\u308c\u3092\u89e3\u6c7a\u3059\u308b\u306b\u306fElasticsearch\u306eMapping\u8a2d\u5b9a\u3092\u3059\u308c\u3070\u3088\u3044\u3002\nfluentd\u304c\u4ee5\u4e0b\u8a2d\u5b9a\u3060\u3068\u3057\u305f\u3089\n\n```\n<match **>\n  type elasticsearch\n  type_name apache_access\n  logstash_prefix apache_access\n  ...\n</match>\n```\n\n\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u3066\u8a2d\u5b9a\u3002\nproperties\u306b\u3069\u306e\u30ad\u30fc\u3092\u6307\u5b9a\u3059\u308b\u304b\u306f\u304a\u597d\u307f\u3067\u3002\n\n```\ncurl -XPUT localhost:9200/_template/template_1 -d '\n{\n   \"template\" : \"apache_access-*\",\n   \"mappings\" : {\n       \"apache_access\": {\n           \"properties\": {\n                \"host\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" },\n                \"path\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" },\n                \"referer\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" },\n                \"domain\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" },\n                \"agent\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" }\n           }\n       }\n   }\n}\n'\n```\n", "tags": ["kibana"]}