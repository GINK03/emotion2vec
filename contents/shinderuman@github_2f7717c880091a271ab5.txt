{"tags": ["backlog", "Slack", "\u30dd\u30a8\u30e0", "Go", "golang"], "context": "\n\n\u306f\u3058\u3081\u306b\n\n\u3086\u308b\u3075\u308f\u3067\u3059\n\n\n\u3042\u308f\u305b\u3066\u8aad\u307f\u305f\u3044\n\nbacklog\u306egit\u304b\u3089jenkins\u3092build - Qiita http://qiita.com/shinderuman@github/items/eff9f3567cbd11c03ee2\n\n\n\n\u30b4\u30fc\u30eb\n\nbacklog\u306ewebhook\u306e\u30a4\u30d9\u30f3\u30c8(pull-request\u4f5c\u6210\u3001\u66f4\u65b0\u3001\u30b3\u30e1\u30f3\u30c8)\u3092\u30b5\u30fc\u30d0\u30fc\u4e0a\u306egolang\u3067\u53d7\u3051\u4ed8\u3051\u3066slack\u306eincoming webhook\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b\n\n\n\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067json\u5b9a\u7fa9\u63a2\u3059\n\nhttp://www.backlog.jp/help/adminsguide/webhook-setting/userguide2493.html\n\n\nWebhook\u3067\u306f\u3001\u6307\u5b9a\u3055\u308c\u305fURL\u306b\u30c7\u30fc\u30bf\u3092JSON\u5f62\u5f0f\u3067PUSH\u3067\u9001\u4fe1\u3057\u307e\u3059\u3002JSON\u30c7\u30fc\u30bf\u306e\u5c5e\u6027\u306f\u4e00\u90e8\u306e\u5171\u901a\u90e8\u5206\u3092\u9664\u304d\u3001\u30a4\u30d9\u30f3\u30c8\u306b\u3088\u3063\u3066\u7570\u306a\u308b\u305f\u3081\u30c6\u30b9\u30c8\u5b9f\u884c\u7b49\u3067\u78ba\u8a8d\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n><\n\n\u81ea\u9bd6\u306b\u6d41\u3057\u3066\u78ba\u8a8d\n\npull-request\u4f5c\u6210\n{\n    \"content\": {\n        \"changes\": [], \n        \"comment\": null, \n        \"description\": \"XXX\", \n        \"diff\": null, \n        \"id\": 111, \n        \"issue\": {\n            \"description\": \"XXX\", \n            \"id\": 111, \n            \"key_id\": 111, \n            \"summary\": \"XXX\"\n        }, \n        \"number\": 1, \n        \"repository\": {\n            \"description\": \"\", \n            \"id\": 111, \n            \"name\": \"test\"\n        }, \n        \"summary\": \"XXX\"\n    }, \n    \"created\": \"2016-04-14T14:31:33Z\", \n    \"createdUser\": {\n        \"id\": 111, \n        \"mailAddress\": null, \n        \"name\": \"XXX\", \n        \"nulabAccount\": null, \n        \"roleType\": 1, \n        \"userId\": null\n    }, \n    \"id\": 111, \n    \"notifications\": [\n        {\n            \"alreadyRead\": false, \n            \"id\": 111, \n            \"reason\": 111, \n            \"resourceAlreadyRead\": false, \n            \"user\": {\n                \"id\": 111, \n                \"mailAddress\": null, \n                \"name\": \"XXX\", \n                \"nulabAccount\": null, \n                \"roleType\": 111, \n                \"userId\": null\n            }\n        }, \n        {\n            \"alreadyRead\": false, \n            \"id\": 111, \n            \"reason\": 111, \n            \"resourceAlreadyRead\": false, \n            \"user\": {\n                \"id\": 111, \n                \"mailAddress\": null, \n                \"name\": \"XXX\", \n                \"nulabAccount\": {\n                    \"name\": \"XXX\", \n                    \"nulabId\": \"XXX\", \n                    \"uniqueId\": \"XXX\"\n                }, \n                \"roleType\": 111, \n                \"userId\": null\n            }\n        }\n    ], \n    \"project\": {\n        \"archived\": false, \n        \"chartEnabled\": true, \n        \"id\": 111, \n        \"name\": \"XXX\", \n        \"projectKey\": \"XXX\", \n        \"subtaskingEnabled\": true\n    }, \n    \"type\": 111\n}\n\n\npull-request\u66f4\u65b0\n{\n    \"content\": {\n        \"changes\": [\n            {\n                \"field\": \"description\", \n                \"new_value\": \"XXX\", \n                \"old_value\": \"XXX\"\n            }\n        ], \n        \"comment\": {\n            \"content\": \"\", \n            \"id\": 111\n        }, \n        \"description\": \"XXX\", \n        \"diff\": \"\", \n        \"id\": 111, \n        \"issue\": {\n            \"description\": \"XXX\", \n            \"id\": 111, \n            \"key_id\": 111, \n            \"summary\": \"XXX\"\n        }, \n        \"number\": 111, \n        \"repository\": {\n            \"description\": \"\", \n            \"id\": 111, \n            \"name\": \"XXX\"\n        }, \n        \"summary\": \"XXX\"\n    }, \n    \"created\": \"2016-04-14T14:32:30Z\", \n    \"createdUser\": {\n        \"id\": 111, \n        \"mailAddress\": null, \n        \"name\": \"XXX\", \n        \"nulabAccount\": null, \n        \"roleType\": 111, \n        \"userId\": null\n    }, \n    \"id\": 111, \n    \"notifications\": [], \n    \"project\": {\n        \"archived\": false, \n        \"chartEnabled\": true, \n        \"id\": 111, \n        \"name\": \"XXX\", \n        \"projectKey\": \"XXX\", \n        \"subtaskingEnabled\": true\n    }, \n    \"type\": 111\n}\n\n\npull-request\u30b3\u30e1\u30f3\u30c8\n{\n    \"content\": {\n        \"changes\": [], \n        \"comment\": {\n            \"content\": \"XXX\", \n            \"id\": 111\n        }, \n        \"description\": \"XXX\", \n        \"diff\": null, \n        \"id\": 111, \n        \"issue\": {\n            \"description\": \"XXX\", \n            \"id\": 111, \n            \"key_id\": 111, \n            \"summary\": \"XXX\"\n        }, \n        \"number\": 111, \n        \"repository\": {\n            \"description\": \"\", \n            \"id\": 111, \n            \"name\": \"XXX\"\n        }, \n        \"summary\": \"XXX\"\n    }, \n    \"created\": \"2016-04-14T14:32:04Z\", \n    \"createdUser\": {\n        \"id\": 111, \n        \"mailAddress\": null, \n        \"name\": \"XXX\", \n        \"nulabAccount\": null, \n        \"roleType\": 111, \n        \"userId\": null\n    }, \n    \"id\": 111, \n    \"notifications\": [\n        {\n            \"alreadyRead\": false, \n            \"id\": 111, \n            \"reason\": 111, \n            \"resourceAlreadyRead\": false, \n            \"user\": {\n                \"id\": 111, \n                \"mailAddress\": null, \n                \"name\": \"XXX\", \n                \"nulabAccount\": null, \n                \"roleType\": 111, \n                \"userId\": null\n            }\n        }, \n        {\n            \"alreadyRead\": false, \n            \"id\": 111, \n            \"reason\": 111, \n            \"resourceAlreadyRead\": false, \n            \"user\": {\n                \"id\": 111, \n                \"mailAddress\": null, \n                \"name\": \"XXX\", \n                \"nulabAccount\": {\n                    \"name\": \"XXX\", \n                    \"nulabId\": \"XXX\", \n                    \"uniqueId\": \"XXX\"\n                }, \n                \"roleType\": 111, \n                \"userId\": null\n            }\n        }\n    ], \n    \"project\": {\n        \"archived\": false, \n        \"chartEnabled\": true, \n        \"id\": 111, \n        \"name\": \"XXX\", \n        \"projectKey\": \"XXX\", \n        \"subtaskingEnabled\": true\n    }, \n    \"type\": 111\n}\n\n\n\u4e0a\u8a183\u3064\u3092merge\u3057\u305fstruct\ntype Backlog struct {\n    Content struct {\n        Changes []interface{} `json:\"changes\"`\n        Comment struct {\n            Content string `json:\"content\"`\n            ID      int    `json:\"id\"`\n        } `json:\"comment\"`\n        Description string      `json:\"description\"`\n        Diff        interface{} `json:\"diff\"`\n        ID          int         `json:\"id\"`\n        Issue       struct {\n            Description string `json:\"description\"`\n            ID          int    `json:\"id\"`\n            KeyID       int    `json:\"key_id\"`\n            Summary     string `json:\"summary\"`\n        } `json:\"issue\"`\n        Number     int `json:\"number\"`\n        Repository struct {\n            Description string `json:\"description\"`\n            ID          int    `json:\"id\"`\n            Name        string `json:\"name\"`\n        } `json:\"repository\"`\n        Summary string `json:\"summary\"`\n    } `json:\"content\"`\n    Created     string `json:\"created\"`\n    CreatedUser struct {\n        ID           int         `json:\"id\"`\n        MailAddress  interface{} `json:\"mailAddress\"`\n        Name         string      `json:\"name\"`\n        NulabAccount interface{} `json:\"nulabAccount\"`\n        RoleType     int         `json:\"roleType\"`\n        UserID       interface{} `json:\"userId\"`\n    } `json:\"createdUser\"`\n    ID            int `json:\"id\"`\n    Notifications []struct {\n        AlreadyRead         bool `json:\"alreadyRead\"`\n        ID                  int  `json:\"id\"`\n        Reason              int  `json:\"reason\"`\n        ResourceAlreadyRead bool `json:\"resourceAlreadyRead\"`\n        User                struct {\n            ID           int         `json:\"id\"`\n            MailAddress  interface{} `json:\"mailAddress\"`\n            Name         string      `json:\"name\"`\n            NulabAccount interface{} `json:\"nulabAccount\"`\n            RoleType     int         `json:\"roleType\"`\n            UserID       interface{} `json:\"userId\"`\n        } `json:\"user\"`\n    } `json:\"notifications\"`\n    Project struct {\n        Archived          bool   `json:\"archived\"`\n        ChartEnabled      bool   `json:\"chartEnabled\"`\n        ID                int    `json:\"id\"`\n        Name              string `json:\"name\"`\n        ProjectKey        string `json:\"projectKey\"`\n        SubtaskingEnabled bool   `json:\"subtaskingEnabled\"`\n    } `json:\"project\"`\n    Type int `json:\"type\"`\n}\n\n\n\u5b9f\u88c5\npackage main\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n    \"io\"\n    \"net/http\"\n    \"net/url\"\n)\n\ntype Slack struct {\n    Channel   string `json:\"channel\"`\n    IconEmoji string `json:\"icon_emoji\"`\n    IconUrl   string `json:\"icon_url\"`\n    Text      string `json:\"text\"`\n    Username  string `json:\"username\"`\n}\n\ntype Backlog struct {\n    Content struct {\n        Changes []interface{} `json:\"changes\"`\n        Comment struct {\n            Content string `json:\"content\"`\n            ID      int    `json:\"id\"`\n        } `json:\"comment\"`\n        Description string      `json:\"description\"`\n        Diff        interface{} `json:\"diff\"`\n        ID          int         `json:\"id\"`\n        Issue       struct {\n            Description string `json:\"description\"`\n            ID          int    `json:\"id\"`\n            KeyID       int    `json:\"key_id\"`\n            Summary     string `json:\"summary\"`\n        } `json:\"issue\"`\n        Number     int `json:\"number\"`\n        Repository struct {\n            Description string `json:\"description\"`\n            ID          int    `json:\"id\"`\n            Name        string `json:\"name\"`\n        } `json:\"repository\"`\n        Summary string `json:\"summary\"`\n    } `json:\"content\"`\n    Created     string `json:\"created\"`\n    CreatedUser struct {\n        ID           int         `json:\"id\"`\n        MailAddress  interface{} `json:\"mailAddress\"`\n        Name         string      `json:\"name\"`\n        NulabAccount interface{} `json:\"nulabAccount\"`\n        RoleType     int         `json:\"roleType\"`\n        UserID       interface{} `json:\"userId\"`\n    } `json:\"createdUser\"`\n    ID            int `json:\"id\"`\n    Notifications []struct {\n        AlreadyRead         bool `json:\"alreadyRead\"`\n        ID                  int  `json:\"id\"`\n        Reason              int  `json:\"reason\"`\n        ResourceAlreadyRead bool `json:\"resourceAlreadyRead\"`\n        User                struct {\n            ID           int         `json:\"id\"`\n            MailAddress  interface{} `json:\"mailAddress\"`\n            Name         string      `json:\"name\"`\n            NulabAccount interface{} `json:\"nulabAccount\"`\n            RoleType     int         `json:\"roleType\"`\n            UserID       interface{} `json:\"userId\"`\n        } `json:\"user\"`\n    } `json:\"notifications\"`\n    Project struct {\n        Archived          bool   `json:\"archived\"`\n        ChartEnabled      bool   `json:\"chartEnabled\"`\n        ID                int    `json:\"id\"`\n        Name              string `json:\"name\"`\n        ProjectKey        string `json:\"projectKey\"`\n        SubtaskingEnabled bool   `json:\"subtaskingEnabled\"`\n    } `json:\"project\"`\n    Type int `json:\"type\"`\n}\n\nfunc main() {\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        var b Backlog\n        err := json.NewDecoder(r.Body).Decode(&b)\n        if !(err != nil && err == io.EOF) {\n\n            s := Slack{Text: fmt.Sprintf(\"https://{YOUR_BACKLOG_DOMAIN}.backlog.jp/git/%s/%s/pullRequests/%d\", b.Project.ProjectKey, b.Content.Repository.Name, b.Content.Number)}\n            j, _ := json.Marshal(s)\n            http.PostForm(\"https://hooks.slack.com/services/XXXXX/XXXXX/XXXXXXX\", url.Values{\"payload\": {string(j)}})\n        }\n    })\n    http.ListenAndServe(\":80\", nil)\n}\n\nURL\u9001\u3063\u305f\u3068\u3053\u308d\u3067\u529b\u5c3d\u304d\u305forz\n\n\u611f\u60f3\u6226\n\njson\u8abf\u3079\u308b\u306e\u306b\u307b\u307c\u307b\u307c\u306e\u6642\u9593\u3092\u4f7f\u3063\u305f\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u914d\u4e0b\u306e\u3059\u3079\u3066\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306epull-request\u304cwebhook\u3067\u9001\u3089\u308c\u3066\u304f\u308b\u306e\u3067\u4e0d\u8981\u306a\u3082\u306e\u3092\u7121\u8996\u3059\u308b\u306e\u304c\u3072\u3068\u624b\u9593\n\u30b3\u30e1\u30f3\u30c8\u3054\u3068\u306bslack\u306b\u901a\u77e5\u304c\u6765\u308b\u306e\u306f\u3060\u3044\u3076\u30ce\u30a4\u30ba\u306a\u306e\u3067n\u5206\u9593\u9694\u3067pool\u3057\u3066\u91cd\u8907\u306f\u9664\u53bb\u3057\u3066\u901a\u77e5\u3068\u304b\u3084\u308a\u305f\u3044(\u3084\u308b\u3068\u306f\u3044\u3063\u3066\u306a\u3044\n\n\n## \u306f\u3058\u3081\u306b\n- \u3086\u308b\u3075\u308f\u3067\u3059\n\n## \u3042\u308f\u305b\u3066\u8aad\u307f\u305f\u3044\n- backlog\u306egit\u304b\u3089jenkins\u3092build - Qiita http://qiita.com/shinderuman@github/items/eff9f3567cbd11c03ee2\n\n## \u30b4\u30fc\u30eb\n- backlog\u306ewebhook\u306e\u30a4\u30d9\u30f3\u30c8(pull-request\u4f5c\u6210\u3001\u66f4\u65b0\u3001\u30b3\u30e1\u30f3\u30c8)\u3092\u30b5\u30fc\u30d0\u30fc\u4e0a\u306egolang\u3067\u53d7\u3051\u4ed8\u3051\u3066slack\u306eincoming webhook\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b\n\n## \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067json\u5b9a\u7fa9\u63a2\u3059\n- http://www.backlog.jp/help/adminsguide/webhook-setting/userguide2493.html\n\n> Webhook\u3067\u306f\u3001\u6307\u5b9a\u3055\u308c\u305fURL\u306b\u30c7\u30fc\u30bf\u3092JSON\u5f62\u5f0f\u3067PUSH\u3067\u9001\u4fe1\u3057\u307e\u3059\u3002JSON\u30c7\u30fc\u30bf\u306e\u5c5e\u6027\u306f\u4e00\u90e8\u306e\u5171\u901a\u90e8\u5206\u3092\u9664\u304d\u3001\u30a4\u30d9\u30f3\u30c8\u306b\u3088\u3063\u3066\u7570\u306a\u308b\u305f\u3081\u30c6\u30b9\u30c8\u5b9f\u884c\u7b49\u3067\u78ba\u8a8d\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n\\><\n\n## \u81ea\u9bd6\u306b\u6d41\u3057\u3066\u78ba\u8a8d\n### pull-request\u4f5c\u6210\n```json\n{\n    \"content\": {\n        \"changes\": [], \n        \"comment\": null, \n        \"description\": \"XXX\", \n        \"diff\": null, \n        \"id\": 111, \n        \"issue\": {\n            \"description\": \"XXX\", \n            \"id\": 111, \n            \"key_id\": 111, \n            \"summary\": \"XXX\"\n        }, \n        \"number\": 1, \n        \"repository\": {\n            \"description\": \"\", \n            \"id\": 111, \n            \"name\": \"test\"\n        }, \n        \"summary\": \"XXX\"\n    }, \n    \"created\": \"2016-04-14T14:31:33Z\", \n    \"createdUser\": {\n        \"id\": 111, \n        \"mailAddress\": null, \n        \"name\": \"XXX\", \n        \"nulabAccount\": null, \n        \"roleType\": 1, \n        \"userId\": null\n    }, \n    \"id\": 111, \n    \"notifications\": [\n        {\n            \"alreadyRead\": false, \n            \"id\": 111, \n            \"reason\": 111, \n            \"resourceAlreadyRead\": false, \n            \"user\": {\n                \"id\": 111, \n                \"mailAddress\": null, \n                \"name\": \"XXX\", \n                \"nulabAccount\": null, \n                \"roleType\": 111, \n                \"userId\": null\n            }\n        }, \n        {\n            \"alreadyRead\": false, \n            \"id\": 111, \n            \"reason\": 111, \n            \"resourceAlreadyRead\": false, \n            \"user\": {\n                \"id\": 111, \n                \"mailAddress\": null, \n                \"name\": \"XXX\", \n                \"nulabAccount\": {\n                    \"name\": \"XXX\", \n                    \"nulabId\": \"XXX\", \n                    \"uniqueId\": \"XXX\"\n                }, \n                \"roleType\": 111, \n                \"userId\": null\n            }\n        }\n    ], \n    \"project\": {\n        \"archived\": false, \n        \"chartEnabled\": true, \n        \"id\": 111, \n        \"name\": \"XXX\", \n        \"projectKey\": \"XXX\", \n        \"subtaskingEnabled\": true\n    }, \n    \"type\": 111\n}\n```\n\n### pull-request\u66f4\u65b0\n```json\n{\n    \"content\": {\n        \"changes\": [\n            {\n                \"field\": \"description\", \n                \"new_value\": \"XXX\", \n                \"old_value\": \"XXX\"\n            }\n        ], \n        \"comment\": {\n            \"content\": \"\", \n            \"id\": 111\n        }, \n        \"description\": \"XXX\", \n        \"diff\": \"\", \n        \"id\": 111, \n        \"issue\": {\n            \"description\": \"XXX\", \n            \"id\": 111, \n            \"key_id\": 111, \n            \"summary\": \"XXX\"\n        }, \n        \"number\": 111, \n        \"repository\": {\n            \"description\": \"\", \n            \"id\": 111, \n            \"name\": \"XXX\"\n        }, \n        \"summary\": \"XXX\"\n    }, \n    \"created\": \"2016-04-14T14:32:30Z\", \n    \"createdUser\": {\n        \"id\": 111, \n        \"mailAddress\": null, \n        \"name\": \"XXX\", \n        \"nulabAccount\": null, \n        \"roleType\": 111, \n        \"userId\": null\n    }, \n    \"id\": 111, \n    \"notifications\": [], \n    \"project\": {\n        \"archived\": false, \n        \"chartEnabled\": true, \n        \"id\": 111, \n        \"name\": \"XXX\", \n        \"projectKey\": \"XXX\", \n        \"subtaskingEnabled\": true\n    }, \n    \"type\": 111\n}\n```\n\n### pull-request\u30b3\u30e1\u30f3\u30c8\n\n```json\n{\n    \"content\": {\n        \"changes\": [], \n        \"comment\": {\n            \"content\": \"XXX\", \n            \"id\": 111\n        }, \n        \"description\": \"XXX\", \n        \"diff\": null, \n        \"id\": 111, \n        \"issue\": {\n            \"description\": \"XXX\", \n            \"id\": 111, \n            \"key_id\": 111, \n            \"summary\": \"XXX\"\n        }, \n        \"number\": 111, \n        \"repository\": {\n            \"description\": \"\", \n            \"id\": 111, \n            \"name\": \"XXX\"\n        }, \n        \"summary\": \"XXX\"\n    }, \n    \"created\": \"2016-04-14T14:32:04Z\", \n    \"createdUser\": {\n        \"id\": 111, \n        \"mailAddress\": null, \n        \"name\": \"XXX\", \n        \"nulabAccount\": null, \n        \"roleType\": 111, \n        \"userId\": null\n    }, \n    \"id\": 111, \n    \"notifications\": [\n        {\n            \"alreadyRead\": false, \n            \"id\": 111, \n            \"reason\": 111, \n            \"resourceAlreadyRead\": false, \n            \"user\": {\n                \"id\": 111, \n                \"mailAddress\": null, \n                \"name\": \"XXX\", \n                \"nulabAccount\": null, \n                \"roleType\": 111, \n                \"userId\": null\n            }\n        }, \n        {\n            \"alreadyRead\": false, \n            \"id\": 111, \n            \"reason\": 111, \n            \"resourceAlreadyRead\": false, \n            \"user\": {\n                \"id\": 111, \n                \"mailAddress\": null, \n                \"name\": \"XXX\", \n                \"nulabAccount\": {\n                    \"name\": \"XXX\", \n                    \"nulabId\": \"XXX\", \n                    \"uniqueId\": \"XXX\"\n                }, \n                \"roleType\": 111, \n                \"userId\": null\n            }\n        }\n    ], \n    \"project\": {\n        \"archived\": false, \n        \"chartEnabled\": true, \n        \"id\": 111, \n        \"name\": \"XXX\", \n        \"projectKey\": \"XXX\", \n        \"subtaskingEnabled\": true\n    }, \n    \"type\": 111\n}\n```\n\n### \u4e0a\u8a183\u3064\u3092merge\u3057\u305fstruct\n\n```go\ntype Backlog struct {\n\tContent struct {\n\t\tChanges []interface{} `json:\"changes\"`\n\t\tComment struct {\n\t\t\tContent string `json:\"content\"`\n\t\t\tID      int    `json:\"id\"`\n\t\t} `json:\"comment\"`\n\t\tDescription string      `json:\"description\"`\n\t\tDiff        interface{} `json:\"diff\"`\n\t\tID          int         `json:\"id\"`\n\t\tIssue       struct {\n\t\t\tDescription string `json:\"description\"`\n\t\t\tID          int    `json:\"id\"`\n\t\t\tKeyID       int    `json:\"key_id\"`\n\t\t\tSummary     string `json:\"summary\"`\n\t\t} `json:\"issue\"`\n\t\tNumber     int `json:\"number\"`\n\t\tRepository struct {\n\t\t\tDescription string `json:\"description\"`\n\t\t\tID          int    `json:\"id\"`\n\t\t\tName        string `json:\"name\"`\n\t\t} `json:\"repository\"`\n\t\tSummary string `json:\"summary\"`\n\t} `json:\"content\"`\n\tCreated     string `json:\"created\"`\n\tCreatedUser struct {\n\t\tID           int         `json:\"id\"`\n\t\tMailAddress  interface{} `json:\"mailAddress\"`\n\t\tName         string      `json:\"name\"`\n\t\tNulabAccount interface{} `json:\"nulabAccount\"`\n\t\tRoleType     int         `json:\"roleType\"`\n\t\tUserID       interface{} `json:\"userId\"`\n\t} `json:\"createdUser\"`\n\tID            int `json:\"id\"`\n\tNotifications []struct {\n\t\tAlreadyRead         bool `json:\"alreadyRead\"`\n\t\tID                  int  `json:\"id\"`\n\t\tReason              int  `json:\"reason\"`\n\t\tResourceAlreadyRead bool `json:\"resourceAlreadyRead\"`\n\t\tUser                struct {\n\t\t\tID           int         `json:\"id\"`\n\t\t\tMailAddress  interface{} `json:\"mailAddress\"`\n\t\t\tName         string      `json:\"name\"`\n\t\t\tNulabAccount interface{} `json:\"nulabAccount\"`\n\t\t\tRoleType     int         `json:\"roleType\"`\n\t\t\tUserID       interface{} `json:\"userId\"`\n\t\t} `json:\"user\"`\n\t} `json:\"notifications\"`\n\tProject struct {\n\t\tArchived          bool   `json:\"archived\"`\n\t\tChartEnabled      bool   `json:\"chartEnabled\"`\n\t\tID                int    `json:\"id\"`\n\t\tName              string `json:\"name\"`\n\t\tProjectKey        string `json:\"projectKey\"`\n\t\tSubtaskingEnabled bool   `json:\"subtaskingEnabled\"`\n\t} `json:\"project\"`\n\tType int `json:\"type\"`\n}\n```\n\n## \u5b9f\u88c5\n\n```go\npackage main\n\nimport (\n\t\"encoding/json\"\n\t\"fmt\"\n\t\"io\"\n\t\"net/http\"\n\t\"net/url\"\n)\n\ntype Slack struct {\n\tChannel   string `json:\"channel\"`\n\tIconEmoji string `json:\"icon_emoji\"`\n\tIconUrl   string `json:\"icon_url\"`\n\tText      string `json:\"text\"`\n\tUsername  string `json:\"username\"`\n}\n\ntype Backlog struct {\n\tContent struct {\n\t\tChanges []interface{} `json:\"changes\"`\n\t\tComment struct {\n\t\t\tContent string `json:\"content\"`\n\t\t\tID      int    `json:\"id\"`\n\t\t} `json:\"comment\"`\n\t\tDescription string      `json:\"description\"`\n\t\tDiff        interface{} `json:\"diff\"`\n\t\tID          int         `json:\"id\"`\n\t\tIssue       struct {\n\t\t\tDescription string `json:\"description\"`\n\t\t\tID          int    `json:\"id\"`\n\t\t\tKeyID       int    `json:\"key_id\"`\n\t\t\tSummary     string `json:\"summary\"`\n\t\t} `json:\"issue\"`\n\t\tNumber     int `json:\"number\"`\n\t\tRepository struct {\n\t\t\tDescription string `json:\"description\"`\n\t\t\tID          int    `json:\"id\"`\n\t\t\tName        string `json:\"name\"`\n\t\t} `json:\"repository\"`\n\t\tSummary string `json:\"summary\"`\n\t} `json:\"content\"`\n\tCreated     string `json:\"created\"`\n\tCreatedUser struct {\n\t\tID           int         `json:\"id\"`\n\t\tMailAddress  interface{} `json:\"mailAddress\"`\n\t\tName         string      `json:\"name\"`\n\t\tNulabAccount interface{} `json:\"nulabAccount\"`\n\t\tRoleType     int         `json:\"roleType\"`\n\t\tUserID       interface{} `json:\"userId\"`\n\t} `json:\"createdUser\"`\n\tID            int `json:\"id\"`\n\tNotifications []struct {\n\t\tAlreadyRead         bool `json:\"alreadyRead\"`\n\t\tID                  int  `json:\"id\"`\n\t\tReason              int  `json:\"reason\"`\n\t\tResourceAlreadyRead bool `json:\"resourceAlreadyRead\"`\n\t\tUser                struct {\n\t\t\tID           int         `json:\"id\"`\n\t\t\tMailAddress  interface{} `json:\"mailAddress\"`\n\t\t\tName         string      `json:\"name\"`\n\t\t\tNulabAccount interface{} `json:\"nulabAccount\"`\n\t\t\tRoleType     int         `json:\"roleType\"`\n\t\t\tUserID       interface{} `json:\"userId\"`\n\t\t} `json:\"user\"`\n\t} `json:\"notifications\"`\n\tProject struct {\n\t\tArchived          bool   `json:\"archived\"`\n\t\tChartEnabled      bool   `json:\"chartEnabled\"`\n\t\tID                int    `json:\"id\"`\n\t\tName              string `json:\"name\"`\n\t\tProjectKey        string `json:\"projectKey\"`\n\t\tSubtaskingEnabled bool   `json:\"subtaskingEnabled\"`\n\t} `json:\"project\"`\n\tType int `json:\"type\"`\n}\n\nfunc main() {\n\thttp.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n\t\tvar b Backlog\n\t\terr := json.NewDecoder(r.Body).Decode(&b)\n\t\tif !(err != nil && err == io.EOF) {\n\n\t\t\ts := Slack{Text: fmt.Sprintf(\"https://{YOUR_BACKLOG_DOMAIN}.backlog.jp/git/%s/%s/pullRequests/%d\", b.Project.ProjectKey, b.Content.Repository.Name, b.Content.Number)}\n\t\t\tj, _ := json.Marshal(s)\n\t\t\thttp.PostForm(\"https://hooks.slack.com/services/XXXXX/XXXXX/XXXXXXX\", url.Values{\"payload\": {string(j)}})\n\t\t}\n\t})\n\thttp.ListenAndServe(\":80\", nil)\n}\n```\n\nURL\u9001\u3063\u305f\u3068\u3053\u308d\u3067\u529b\u5c3d\u304d\u305forz\n\n## \u611f\u60f3\u6226\n- json\u8abf\u3079\u308b\u306e\u306b\u307b\u307c\u307b\u307c\u306e\u6642\u9593\u3092\u4f7f\u3063\u305f\n- \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u914d\u4e0b\u306e\u3059\u3079\u3066\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306epull-request\u304cwebhook\u3067\u9001\u3089\u308c\u3066\u304f\u308b\u306e\u3067\u4e0d\u8981\u306a\u3082\u306e\u3092\u7121\u8996\u3059\u308b\u306e\u304c\u3072\u3068\u624b\u9593\n- \u30b3\u30e1\u30f3\u30c8\u3054\u3068\u306bslack\u306b\u901a\u77e5\u304c\u6765\u308b\u306e\u306f\u3060\u3044\u3076\u30ce\u30a4\u30ba\u306a\u306e\u3067n\u5206\u9593\u9694\u3067pool\u3057\u3066\u91cd\u8907\u306f\u9664\u53bb\u3057\u3066\u901a\u77e5\u3068\u304b\u3084\u308a\u305f\u3044(\u3084\u308b\u3068\u306f\u3044\u3063\u3066\u306a\u3044\n\n"}