{"context": "\u7d50\u69cb\u8a70\u307e\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n\u3053\u3093\u306a\u30a8\u30e9\u30fc\n\u30d0\u30fc\u30b8\u30e7\u30f3 3.0 \u306e\u5834\u5408\njava.lang.NullPointerException\norg.robolectric.shadows.ShadowLooper.getMainLooper(ShadowLooper.java:70)\nandroid.os.Looper.getMainLooper(Looper.java)\nandroid.database.sqlite.SQLiteDatabase.isMainThread(SQLiteDatabase.java:391)\nandroid.database.sqlite.SQLiteDatabase.getThreadDefaultConnectionFlags(SQLiteDatabase.java:381)\nandroid.database.sqlite.SQLiteProgram.__constructor__(SQLiteProgram.java:58)\nandroid.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java)\nandroid.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java)\nandroid.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1467)\nandroid.database.sqlite.SQLiteDatabase.insertOrThrow(SQLiteDatabase.java:1365)\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u3092 3.1-rc1 ( 2016-04-25 \u73fe\u5728\u306e\u6700\u65b0 ) \u306b\u4e0a\u3052\u3066\u3082\u2026\njava.lang.IllegalStateException: Illegal connection pointer 1. Current pointers for thread Thread[pool-5-thread-1,5,main] []\norg.robolectric.shadows.ShadowSQLiteConnection$Connections.execute(ShadowSQLiteConnection.java:467)\norg.robolectric.shadows.ShadowSQLiteConnection$Connections.prepareStatement(ShadowSQLiteConnection.java:373)\norg.robolectric.shadows.ShadowSQLiteConnection.nativePrepareStatement(ShadowSQLiteConnection.java:64)\nandroid.database.sqlite.SQLiteConnection.nativePrepareStatement(SQLiteConnection.java)\nandroid.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)\nandroid.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)\nandroid.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)\nandroid.database.sqlite.SQLiteProgram.__constructor__(SQLiteProgram.java:58)\nandroid.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java)\nandroid.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java)\nandroid.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1467)\nandroid.database.sqlite.SQLiteDatabase.insertOrThrow(SQLiteDatabase.java:1365)\n\n(\u00b4\u30fb\u03c9:;.:...\n\n\u56de\u907f\u7b56\n\u666e\u901a\u306b SQLite \u3092\u5229\u7528\u3057\u305f\u5834\u5408\u306f\u554f\u984c\u306a\u304b\u3063\u305f\u306e\u3067\u3001\n\u3069\u3046\u3084\u3089\u5225\u306a\u30b9\u30ec\u30c3\u30c9\u304b\u3089\u53c2\u7167\u3059\u308b\u3068\u30c0\u30e1\u3089\u3057\u3044\u2026\u3068\u3044\u3046\u3053\u3068\u3067\nimport java.util.concurrent.Executor\nimport scala.concurrent.ExecutionContext\nimplicit lazy val executor: ExecutionContext = {\n  ExecutionContext fromExecutor new Executor {\n    override def execute(command: Runnable) = command.run()\n  }\n}\n\n\u30c6\u30b9\u30c8\u4e2d\u3060\u3051\u30b9\u30ec\u30c3\u30c9\u3092\u751f\u6210\u3057\u306a\u3044 ExecutionContext \u306b\u5207\u308a\u66ff\u3048\u3066\u3057\u307e\u3048\u3070\u7121\u4e8b\u306b\u52d5\u3044\u3066\u304f\u308c\u308b\u3002\n\u3084\u3063\u305f\uff01\n\n\u53c2\u8003\uff08\u306b\u306a\u3089\u306a\u304b\u3063\u305f\uff09\u30ea\u30f3\u30af\n\u3061\u306a\u307f\u306b\u3053\u308c\u3089\u306f\u5168\u3066\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u60c5\u5831\u3067\u3059\n\nTesting SQLite database in Robolectrie\nRobolectric accessing database throws an error\nShadowSQLiteConnection$Connections.execute fails while testing sqlite operations in different test case\nUnit test failing when using Ollie\n\n\n\u7d50\u69cb\u8a70\u307e\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n## \u3053\u3093\u306a\u30a8\u30e9\u30fc\n\n\u30d0\u30fc\u30b8\u30e7\u30f3 `3.0` \u306e\u5834\u5408\n\n```java\njava.lang.NullPointerException\norg.robolectric.shadows.ShadowLooper.getMainLooper(ShadowLooper.java:70)\nandroid.os.Looper.getMainLooper(Looper.java)\nandroid.database.sqlite.SQLiteDatabase.isMainThread(SQLiteDatabase.java:391)\nandroid.database.sqlite.SQLiteDatabase.getThreadDefaultConnectionFlags(SQLiteDatabase.java:381)\nandroid.database.sqlite.SQLiteProgram.__constructor__(SQLiteProgram.java:58)\nandroid.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java)\nandroid.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java)\nandroid.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1467)\nandroid.database.sqlite.SQLiteDatabase.insertOrThrow(SQLiteDatabase.java:1365)\n```\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u3092 `3.1-rc1` ( 2016-04-25 \u73fe\u5728\u306e\u6700\u65b0 ) \u306b\u4e0a\u3052\u3066\u3082\u2026\n\n```java\njava.lang.IllegalStateException: Illegal connection pointer 1. Current pointers for thread Thread[pool-5-thread-1,5,main] []\norg.robolectric.shadows.ShadowSQLiteConnection$Connections.execute(ShadowSQLiteConnection.java:467)\norg.robolectric.shadows.ShadowSQLiteConnection$Connections.prepareStatement(ShadowSQLiteConnection.java:373)\norg.robolectric.shadows.ShadowSQLiteConnection.nativePrepareStatement(ShadowSQLiteConnection.java:64)\nandroid.database.sqlite.SQLiteConnection.nativePrepareStatement(SQLiteConnection.java)\nandroid.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)\nandroid.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)\nandroid.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)\nandroid.database.sqlite.SQLiteProgram.__constructor__(SQLiteProgram.java:58)\nandroid.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java)\nandroid.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java)\nandroid.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1467)\nandroid.database.sqlite.SQLiteDatabase.insertOrThrow(SQLiteDatabase.java:1365)\n```\n\n(\u00b4\u30fb\u03c9:;.:...\n\n## \u56de\u907f\u7b56\n\n\u666e\u901a\u306b SQLite \u3092\u5229\u7528\u3057\u305f\u5834\u5408\u306f\u554f\u984c\u306a\u304b\u3063\u305f\u306e\u3067\u3001\n\u3069\u3046\u3084\u3089\u5225\u306a\u30b9\u30ec\u30c3\u30c9\u304b\u3089\u53c2\u7167\u3059\u308b\u3068\u30c0\u30e1\u3089\u3057\u3044\u2026\u3068\u3044\u3046\u3053\u3068\u3067\n\n```scala\nimport java.util.concurrent.Executor\nimport scala.concurrent.ExecutionContext\nimplicit lazy val executor: ExecutionContext = {\n  ExecutionContext fromExecutor new Executor {\n    override def execute(command: Runnable) = command.run()\n  }\n}\n```\n\n\u30c6\u30b9\u30c8\u4e2d\u3060\u3051\u30b9\u30ec\u30c3\u30c9\u3092\u751f\u6210\u3057\u306a\u3044 ExecutionContext \u306b\u5207\u308a\u66ff\u3048\u3066\u3057\u307e\u3048\u3070\u7121\u4e8b\u306b\u52d5\u3044\u3066\u304f\u308c\u308b\u3002\n\n\u3084\u3063\u305f\uff01\n\n## \u53c2\u8003\uff08\u306b\u306a\u3089\u306a\u304b\u3063\u305f\uff09\u30ea\u30f3\u30af\n\n\u3061\u306a\u307f\u306b\u3053\u308c\u3089\u306f\u5168\u3066\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u60c5\u5831\u3067\u3059\n\n* [Testing SQLite database in Robolectrie](http://stackoverflow.com/questions/7320820/testing-sqlite-database-in-robolectric/24578332#24578332)\n* [Robolectric accessing database throws an error](http://stackoverflow.com/questions/30308776/robolectric-accessing-database-throws-an-error)\n* [ShadowSQLiteConnection$Connections.execute fails while testing sqlite operations in different test case](https://github.com/robolectric/robolectric/issues/1890)\n* [Unit test failing when using Ollie](https://github.com/robolectric/robolectric/issues/1882)\n", "tags": ["Scala2.11.7", "Android", "robolectric3.0", "sqlite"]}