{"context": " More than 1 year has passed since last update.\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u3057\u305f\u6642\u306b\u5236\u7d04\u306b\u5f15\u3063\u304b\u304b\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\u3042\u308b\u30c6\u30fc\u30d6\u30eb\u30675000\u4e07\u30ec\u30b3\u30fc\u30c9\u3050\u3089\u3044\u306e\u30c7\u30fc\u30bf\u3092\u6d41\u3057\u8fbc\u3080\u5fc5\u8981\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3059\u308b\u6642\u306b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3067\u5206\u5272\u3057\u3088\u3046\u3068\u8003\u3048\u305f\u3002\n\n\u4f8b\nCREATE TABLE `hoge` (\n  `key` int(10) unsigned NOT NULL,\n  `key2` varchar(10) NOT NULL,\n  `test1` varchar(50) DEFAULT NULL,\n  `test2` varchar(50) DEFAULT NULL,\n  PRIMARY KEY (`key`),\n  KEY `hoge_FK1` (`key2`)\n);\n\nCREATE TABLE `piyo` (\n  `key2` varchar(10) NOT NULL,\n  `test4` varchar(50) DEFAULT NULL,\n  `test5` varchar(50) DEFAULT NULL,\n  PRIMARY KEY (`key2`),\n  KEY `hoge_FK1` (`key2`),\n  CONSTRAINT `hoge_FK1` FOREIGN KEY (`key2`) REFERENCES `hoge` (`key2`) ON DELETE CASCADE ON UPDATE CASCADE\n)\n  PARTITION BY HASH(`key2`) PARTITIONS 500;\n\n\u4e0b\u306epiyo\u3092\u6d41\u3057\u305f\u3068\u304d\u306b\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u3002\nERROR 1506 (HY000): Foreign key clause is not yet supported in conjunction with partitioning\n\u3069\u3046\u3084\u3089\u5236\u7d04\u3067\u5916\u90e8\u30ad\u30fc\u304c\u4f7f\u3048\u306a\u3044\u6a21\u69d8\u3002\u3002\n\nhttps://dev.mysql.com/doc/refman/5.6/ja/partitioning-limitations.html\n\u8a2d\u8a08\u4e0a\u5916\u90e8\u30ad\u30fc\u3092\u6d88\u3059\u308f\u3051\u306b\u306f\u3044\u304b\u306a\u304b\u3063\u305f\u306e\u3067\u8ae6\u3081\u308b\u3053\u3068\u306b\u30fb\u30fb\u3002\u3057\u3087\u3093\u307c\u308a\u3002\n\n\u304a\u307e\u3051\n\u3053\u308c\u3092\u884c\u3063\u3066\u3044\u308b\u6642\u306b\u3001\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u5f8c\u306b\u5916\u90e8\u30ad\u30fc\u3092\u524a\u9664\u3059\u308b\u65b9\u6cd5\u3092\u898b\u3064\u3051\u305f\u306e\u3067\u30e1\u30e2\u3002\n\uff11\uff0eSHOW CREATE TABLE\u3067\u5916\u90e8\u30ad\u30fc\u306e\u78ba\u8a8d\u3002\nmysql> SHOW CREATE TABLE piyo;\n+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Table | Create Table                                                                                                                                                                                                                                                                                                                     |\n+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| piyo  | CREATE TABLE `piyo` (\n  `key2` varchar(10) NOT NULL,\n  `test4` varchar(50) DEFAULT NULL,\n  `test5` varchar(50) DEFAULT NULL,\n  PRIMARY KEY (`key2`),\n  KEY `hoge_FK1` (`key2`),\n  CONSTRAINT `hoge_FK1` FOREIGN KEY (`key2`) REFERENCES `hoge` (`key2`) ON DELETE CASCADE ON UPDATE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 |\n+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n1 row in set (0.00 sec)\n\n\uff12\uff0e\u5916\u90e8\u30ad\u30fc\u306e\u540d\u524d\u304c\u300choge_FK1\u300d\u3068\u5206\u304b\u3063\u305f\u306e\u3067\u3053\u308c\u3092\u524a\u9664\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3002\nALTER TABLE piyo DROP FOREIGN KEY hoge_FK1;\n\n\uff13\uff0e\u5916\u90e8\u30ad\u30fc\u3092\u518d\u5ea6\u4ed8\u4e0e\u3057\u305f\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3002\nALTER TABLE piyo ADD CONSTRAINT hoge_FK1 FOREIGN KEY (key2) REFERENCES hoge(key2) ON DELETE CASCADE ON UPDATE CASCADE;\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30cb\u30f3\u30b0\u3057\u305f\u6642\u306b\u5236\u7d04\u306b\u5f15\u3063\u304b\u304b\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n\u3042\u308b\u30c6\u30fc\u30d6\u30eb\u30675000\u4e07\u30ec\u30b3\u30fc\u30c9\u3050\u3089\u3044\u306e\u30c7\u30fc\u30bf\u3092\u6d41\u3057\u8fbc\u3080\u5fc5\u8981\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3059\u308b\u6642\u306b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3067\u5206\u5272\u3057\u3088\u3046\u3068\u8003\u3048\u305f\u3002\n\n# \u4f8b\n\n```mysql:\nCREATE TABLE `hoge` (\n  `key` int(10) unsigned NOT NULL,\n  `key2` varchar(10) NOT NULL,\n  `test1` varchar(50) DEFAULT NULL,\n  `test2` varchar(50) DEFAULT NULL,\n  PRIMARY KEY (`key`),\n  KEY `hoge_FK1` (`key2`)\n);\n\nCREATE TABLE `piyo` (\n  `key2` varchar(10) NOT NULL,\n  `test4` varchar(50) DEFAULT NULL,\n  `test5` varchar(50) DEFAULT NULL,\n  PRIMARY KEY (`key2`),\n  KEY `hoge_FK1` (`key2`),\n  CONSTRAINT `hoge_FK1` FOREIGN KEY (`key2`) REFERENCES `hoge` (`key2`) ON DELETE CASCADE ON UPDATE CASCADE\n)\n  PARTITION BY HASH(`key2`) PARTITIONS 500;\n```\n\n\u4e0b\u306epiyo\u3092\u6d41\u3057\u305f\u3068\u304d\u306b\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u3002\n`ERROR 1506 (HY000): Foreign key clause is not yet supported in conjunction with partitioning`\n\n\u3069\u3046\u3084\u3089\u5236\u7d04\u3067\u5916\u90e8\u30ad\u30fc\u304c\u4f7f\u3048\u306a\u3044\u6a21\u69d8\u3002\u3002\n![\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u5316.png](https://qiita-image-store.s3.amazonaws.com/0/93950/280c059f-0ab3-8b98-bfe4-a164f0f125ea.png)\n\nhttps://dev.mysql.com/doc/refman/5.6/ja/partitioning-limitations.html\n\n\u8a2d\u8a08\u4e0a\u5916\u90e8\u30ad\u30fc\u3092\u6d88\u3059\u308f\u3051\u306b\u306f\u3044\u304b\u306a\u304b\u3063\u305f\u306e\u3067\u8ae6\u3081\u308b\u3053\u3068\u306b\u30fb\u30fb\u3002\u3057\u3087\u3093\u307c\u308a\u3002\n\n# \u304a\u307e\u3051\n\u3053\u308c\u3092\u884c\u3063\u3066\u3044\u308b\u6642\u306b\u3001\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u5f8c\u306b\u5916\u90e8\u30ad\u30fc\u3092\u524a\u9664\u3059\u308b\u65b9\u6cd5\u3092\u898b\u3064\u3051\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n\uff11\uff0eSHOW CREATE TABLE\u3067\u5916\u90e8\u30ad\u30fc\u306e\u78ba\u8a8d\u3002\n\n```mysql:\nmysql> SHOW CREATE TABLE piyo;\n+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Table | Create Table                                                                                                                                                                                                                                                                                                                     |\n+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| piyo  | CREATE TABLE `piyo` (\n  `key2` varchar(10) NOT NULL,\n  `test4` varchar(50) DEFAULT NULL,\n  `test5` varchar(50) DEFAULT NULL,\n  PRIMARY KEY (`key2`),\n  KEY `hoge_FK1` (`key2`),\n  CONSTRAINT `hoge_FK1` FOREIGN KEY (`key2`) REFERENCES `hoge` (`key2`) ON DELETE CASCADE ON UPDATE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 |\n+-------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n1 row in set (0.00 sec)\n```\n\n\uff12\uff0e\u5916\u90e8\u30ad\u30fc\u306e\u540d\u524d\u304c\u300choge_FK1\u300d\u3068\u5206\u304b\u3063\u305f\u306e\u3067\u3053\u308c\u3092\u524a\u9664\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n\n```mysql:\nALTER TABLE piyo DROP FOREIGN KEY hoge_FK1;\n```\n\n\uff13\uff0e\u5916\u90e8\u30ad\u30fc\u3092\u518d\u5ea6\u4ed8\u4e0e\u3057\u305f\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n\n```mysql:\nALTER TABLE piyo ADD CONSTRAINT hoge_FK1 FOREIGN KEY (key2) REFERENCES hoge(key2) ON DELETE CASCADE ON UPDATE CASCADE;\n```\n", "tags": ["MySQL", "mysql5.6", "\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3", "\u30e1\u30e2"]}