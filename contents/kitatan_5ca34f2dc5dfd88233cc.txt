{"context": " More than 1 year has passed since last update.\n\n\u3044\u304d\u3055\u3064\n\u5e73\u6587\u306e\u7121\u7ddaLAN\u5bfe\u7b56\u306bVPN\u304c\u6b32\u3057\u3044\u3060\u3051\u3067\u2026\n\u4e16\u306e\u4e2d\u305f\u304f\u3055\u3093\u8a18\u4e8b\u304c\u3042\u308b\u3051\u3069\u3001\u3046\u307e\u304f\u884c\u304b\u305a\u3002\u30b5\u30fc\u30d3\u30b9\u501f\u308a\u308b\u306e\u9ad8\u3044\u3057\u3001\u7121\u6599\u306f\u307e\u305f\u4e0d\u5b89\u3060\u3057\u3002\nIDCF\u30af\u30e9\u30a6\u30c9\u3055\u3093\u306a\u3089\u6708\u984d500\u5186\u672a\u6e80\u3067\u3082\u30b5\u30fc\u30d0\u4f5c\u308c\u308b\u304b\u3089\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\uff08500\u5186\u304b\u3089\u3063\u3066\u306a\u3063\u3066\u308b\u3051\u3069\u3001\u30b9\u30c8\u30ec\u30fc\u30b8\u524a\u308b\u3068500\u5186\u5207\u308b\u3088\u306d\uff09\n\u4eca\u56de\u306fL2TP+IPsec\u304c\u5fc5\u9808\u3002iPhone\u304b\u3089\u7e4b\u304e\u305f\u3044\u304b\u3089\u3002\nOpenVPN\u306f\u5c02\u7528\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3060\u3057\u3001PPTP\u306f\u8106\u5f31\u306a\u306e\u3067\u9078\u629e\u304b\u3089\u5916\u3057\u307e\u3057\u305f\u3002\n\n\u8a66\u3057\u305f\u3082\u306e\n\nDebian 6 (GlobalIP) + Openswan + xl2tpd\nDebian 6 (GlobalIP) + strongswan + xl2tpd\nDebian 7 (PrivateIP) + Openswan + xl2tpd\nDebian 7 (PrivateIP) + strongswan + xl2tpd\nDebian 7 (PrivateIP) + Softether VPN \uff08\u6210\u529f\uff09\n\n\n\u69cb\u6210\n\u74b0\u5883\u306f\u3053\u3093\u306a\u611f\u3058\u3067NAPT\u9593\u3067\u60a9\u3080\u4eba\u306f\u3053\u308c\u304c\u6700\u77ed\u304b\u3082\u3002\nServer 10.3.x.x\n\u3000\u3000\u3000|\nGlobal IP(NAPT)\n\u3000\u3000\u3000|\n\u3000Internet\n\u3000\u3000\u3000|\nGlobal IP(NAPT)\n\u3000\u3000\u3000|\nClient 10.x.x.x\n\u3000\u3000\u3000|\n\u3000\u3000iPhone\n\u30b5\u30fc\u30d0\u3082NAPT\u914d\u4e0b\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3082NAPT\u914d\u4e0b\u3067\u3059\u3002\n\u30b5\u30fc\u30d0\u5074\u306f\u3061\u3083\u3093\u3068\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c7\u30a3\u30f3\u30b0\u8a2d\u5b9a\u304c\u5fc5\u9808\u3002\n\n\u7d50\u679c\n1\u301c4\u306f\u6483\u6c88\u3057\u307e\u3057\u305f\u3002\nIPsec\u306e\u30cf\u30f3\u30c9\u30b7\u30a7\u30a4\u30af\u304c\u3067\u304d\u305f\u308a\u3067\u304d\u306a\u304b\u3063\u305f\u308a\u3002\u7279\u306bOpenswan\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u30cf\u30de\u3063\u305f\u3093\u3060\u3051\u3069\u3001source\u304b\u3089\u306f\u5165\u308c\u305f\u304f\u306a\u3044\u304b\u3089\u8ae6\u3081\u305f\u3002\n\u3057\u304b\u3057Softether VPN\u3092\u8a66\u3059\u306810\u5206\u3067\u5b8c\u4e86\uff01\u4eca\u307e\u3067\u306e\u6642\u9593\u306a\u306b\uff1f\uff01\nsource\u304b\u3089\u5165\u308c\u306a\u3044\u3063\u3066\u306e\u3092\u64a4\u56de\u3067\u3059\u3002\n\n\u3084\u3063\u305f\u3053\u3068\nSoftether\u306e\u30b5\u30a4\u30c8\u304b\u3089source\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066make\u3060\u3051\n\nshell\n# wget http://jp.softether-download.com/files/softether/v4.18-9570-rtm-2015.07.26-tree/Linux/SoftEther_VPN_Server/64bit_-_Intel_x64_or_AMD64/softether-vpnserver-v4.18-9570-rtm-2015.07.26-linux-x64-64bit.tar.gz\n\n\n\nshell\n# tar zxvf softether-vpnserver-v4.18-9570-rtm-2015.07.26-linux-x64-64bit.tar.gz -C /usr/local/\n\n\n\nshell\n# cd /usr/local/\n# make\n\n\n\u305d\u3057\u3066\u8d77\u52d5\u30d5\u30a1\u30a4\u30eb\n\n/etc/init.d/vpnserver\n#!/bin/sh\n### BEGIN INIT INFO\n# Provides:          vpnserver\n# Required-Start:    $local_fs $network\n# Required-Stop:     $local_fs $network\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: SoftEther VPN Server\n# Description:       SoftEther VPN Server\n### END INIT INFO\n\nDAEMON=/usr/local/vpnserver/vpnserver\nLOCK=/var/lock/vpnserver\n\ntest -x $DAEMON || exit 0\n\ncase \"$1\" in\n  start)\n        $DAEMON start\n        touch $LOCK\n        ;;\n  stop)\n        $DAEMON stop\n        rm $LOCK\n        ;;\n  restart)\n        $DAEMON stop\n        sleep 3\n        $DAEMON start\n        ;;\n  *)\n        echo \"Usage: $0 {start|stop|restart}\"\n        exit 1\nesac\n\nexit 0\nEOT\n\n\n\u3042\u3068\u306fiptables\u306e\u958b\u653e\u3068Windows\u7248\u306e\u30de\u30cd\u30fc\u30b8\u30e1\u30f3\u30c8\u30c4\u30fc\u30eb\u304b\u3089\u30a2\u30ab\u30a6\u30f3\u30c8\u8ffd\u52a0\u3068L2TP\u3001NAT\u306e\u6709\u52b9\u5316\u304f\u3089\u3044\u3002\uff08\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30d9\u30fc\u30b9\u306e\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u306f\u4f7f\u3044\u3065\u3089\u3044\u306e\u3067GUI\u306b\u983c\u308a\u307e\u3057\u305f\uff09\nVPN\u7528\u306eIP\u306f\u52dd\u624b\u306b\u8a2d\u5b9a\u3055\u308c\u3066192.168.xx.x\u304c\u4ed8\u4e0e\u3055\u308c\u307e\u3057\u305f\u3002\n\u8a3c\u660e\u66f8\u30d9\u30fc\u30b9\u3067\u306a\u304f\u3066\u7c21\u5358\u306bVPN\u3063\u3066\u3060\u3051\u306a\u3089\u3053\u308c\u3067\u3044\u3044\u3067\u3059\u3002\n\u4eca\u56de\u306f\u30b5\u30fc\u30d0\u5074\u304c\u76f4\u63a5\u30b0\u30ed\u30fc\u30d0\u30ebIP\u6301\u3063\u3066\u3044\u306a\u304f\u3066\nNAPT\u914d\u4e0b\u3063\u3066\u3068\u3053\u308d\u304c\u5c11\u3057\u60a9\u307f\u3069\u3053\u308d\uff1f\n\u8ffd\u52a0\u3067\u30a2\u30c9\u30ec\u30b9\u5951\u7d04\u3059\u308b\u306e\u3082\u306a\u3093\u306a\u306e\u3067\uff08IDCF\u3055\u3093\u3054\u3081\u3093\u306a\u3055\u3044\uff09\u3053\u3093\u306a\u69cb\u6210\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u5143\u3005IDCF\u3055\u3093\u304c\u7528\u610f\u3057\u3066\u3044\u308bVPN\u304ciOS\u672a\u5bfe\u5fdc\u306e\u307e\u307e\u653e\u7f6e\u3055\u308c\u3066\u308b\u306e\u2026\n\u3053\u308c\u304c\u4f7f\u3048\u305f\u3089\u4e00\u756a\u7c21\u5358\u3060\u3063\u305f\uff1f\n\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c7\u30a3\u30f3\u30b0\u3082500/udp, 4500/udp\u3060\u3051\u3057\u3068\u3051\u3070\n\u3042\u3068\u5168\u90e8\u30af\u30ed\u30fc\u30ba\u3067\u554f\u984c\u306a\u3057\u3002\n#\u3044\u304d\u3055\u3064\n\u5e73\u6587\u306e\u7121\u7ddaLAN\u5bfe\u7b56\u306bVPN\u304c\u6b32\u3057\u3044\u3060\u3051\u3067\u2026\n\u4e16\u306e\u4e2d\u305f\u304f\u3055\u3093\u8a18\u4e8b\u304c\u3042\u308b\u3051\u3069\u3001\u3046\u307e\u304f\u884c\u304b\u305a\u3002\u30b5\u30fc\u30d3\u30b9\u501f\u308a\u308b\u306e\u9ad8\u3044\u3057\u3001\u7121\u6599\u306f\u307e\u305f\u4e0d\u5b89\u3060\u3057\u3002\nIDCF\u30af\u30e9\u30a6\u30c9\u3055\u3093\u306a\u3089\u6708\u984d500\u5186\u672a\u6e80\u3067\u3082\u30b5\u30fc\u30d0\u4f5c\u308c\u308b\u304b\u3089\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\uff08500\u5186\u304b\u3089\u3063\u3066\u306a\u3063\u3066\u308b\u3051\u3069\u3001\u30b9\u30c8\u30ec\u30fc\u30b8\u524a\u308b\u3068500\u5186\u5207\u308b\u3088\u306d\uff09\n\n\u4eca\u56de\u306fL2TP+IPsec\u304c\u5fc5\u9808\u3002iPhone\u304b\u3089\u7e4b\u304e\u305f\u3044\u304b\u3089\u3002\nOpenVPN\u306f\u5c02\u7528\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3060\u3057\u3001PPTP\u306f\u8106\u5f31\u306a\u306e\u3067\u9078\u629e\u304b\u3089\u5916\u3057\u307e\u3057\u305f\u3002\n\n#\u8a66\u3057\u305f\u3082\u306e\n1. Debian 6 (GlobalIP) + Openswan + xl2tpd\n2. Debian 6 (GlobalIP) + strongswan + xl2tpd\n\n3. Debian 7 (PrivateIP) + Openswan + xl2tpd\n4. Debian 7 (PrivateIP) + strongswan + xl2tpd\n5. Debian 7 (PrivateIP) + Softether VPN **\uff08\u6210\u529f\uff09**\n\n#\u69cb\u6210\n\u74b0\u5883\u306f\u3053\u3093\u306a\u611f\u3058\u3067NAPT\u9593\u3067\u60a9\u3080\u4eba\u306f\u3053\u308c\u304c\u6700\u77ed\u304b\u3082\u3002\n\nServer 10.3.x.x\n\u3000\u3000\u3000|\nGlobal IP(NAPT)\n\u3000\u3000\u3000|\n\u3000Internet\n\u3000\u3000\u3000|\nGlobal IP(NAPT)\n\u3000\u3000\u3000|\nClient 10.x.x.x\n\u3000\u3000\u3000|\n\u3000\u3000iPhone\n\n\u30b5\u30fc\u30d0\u3082NAPT\u914d\u4e0b\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3082NAPT\u914d\u4e0b\u3067\u3059\u3002\n\u30b5\u30fc\u30d0\u5074\u306f\u3061\u3083\u3093\u3068\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c7\u30a3\u30f3\u30b0\u8a2d\u5b9a\u304c\u5fc5\u9808\u3002\n\n#\u7d50\u679c\n1\u301c4\u306f\u6483\u6c88\u3057\u307e\u3057\u305f\u3002\n\nIPsec\u306e\u30cf\u30f3\u30c9\u30b7\u30a7\u30a4\u30af\u304c\u3067\u304d\u305f\u308a\u3067\u304d\u306a\u304b\u3063\u305f\u308a\u3002\u7279\u306bOpenswan\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u30cf\u30de\u3063\u305f\u3093\u3060\u3051\u3069\u3001source\u304b\u3089\u306f\u5165\u308c\u305f\u304f\u306a\u3044\u304b\u3089\u8ae6\u3081\u305f\u3002\n\n\u3057\u304b\u3057Softether VPN\u3092\u8a66\u3059\u306810\u5206\u3067\u5b8c\u4e86\uff01\u4eca\u307e\u3067\u306e\u6642\u9593\u306a\u306b\uff1f\uff01\nsource\u304b\u3089\u5165\u308c\u306a\u3044\u3063\u3066\u306e\u3092\u64a4\u56de\u3067\u3059\u3002\n\n#\u3084\u3063\u305f\u3053\u3068\nSoftether\u306e\u30b5\u30a4\u30c8\u304b\u3089source\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066make\u3060\u3051\n\n```sh:shell\n# wget http://jp.softether-download.com/files/softether/v4.18-9570-rtm-2015.07.26-tree/Linux/SoftEther_VPN_Server/64bit_-_Intel_x64_or_AMD64/softether-vpnserver-v4.18-9570-rtm-2015.07.26-linux-x64-64bit.tar.gz\n```\n\n```sh:shell\n# tar zxvf softether-vpnserver-v4.18-9570-rtm-2015.07.26-linux-x64-64bit.tar.gz -C /usr/local/\n```\n```sh:shell\n# cd /usr/local/\n# make\n```\n\n\u305d\u3057\u3066\u8d77\u52d5\u30d5\u30a1\u30a4\u30eb\n\n```sh:/etc/init.d/vpnserver\n#!/bin/sh\n### BEGIN INIT INFO\n# Provides:          vpnserver\n# Required-Start:    $local_fs $network\n# Required-Stop:     $local_fs $network\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: SoftEther VPN Server\n# Description:       SoftEther VPN Server\n### END INIT INFO\n\nDAEMON=/usr/local/vpnserver/vpnserver\nLOCK=/var/lock/vpnserver\n\ntest -x $DAEMON || exit 0\n\ncase \"$1\" in\n  start)\n        $DAEMON start\n        touch $LOCK\n        ;;\n  stop)\n        $DAEMON stop\n        rm $LOCK\n        ;;\n  restart)\n        $DAEMON stop\n        sleep 3\n        $DAEMON start\n        ;;\n  *)\n        echo \"Usage: $0 {start|stop|restart}\"\n        exit 1\nesac\n\nexit 0\nEOT\n```\n\n\u3042\u3068\u306fiptables\u306e\u958b\u653e\u3068Windows\u7248\u306e\u30de\u30cd\u30fc\u30b8\u30e1\u30f3\u30c8\u30c4\u30fc\u30eb\u304b\u3089\u30a2\u30ab\u30a6\u30f3\u30c8\u8ffd\u52a0\u3068L2TP\u3001NAT\u306e\u6709\u52b9\u5316\u304f\u3089\u3044\u3002\uff08\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30d9\u30fc\u30b9\u306e\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u306f\u4f7f\u3044\u3065\u3089\u3044\u306e\u3067GUI\u306b\u983c\u308a\u307e\u3057\u305f\uff09\n\nVPN\u7528\u306eIP\u306f\u52dd\u624b\u306b\u8a2d\u5b9a\u3055\u308c\u3066192.168.xx.x\u304c\u4ed8\u4e0e\u3055\u308c\u307e\u3057\u305f\u3002\n\u8a3c\u660e\u66f8\u30d9\u30fc\u30b9\u3067\u306a\u304f\u3066\u7c21\u5358\u306bVPN\u3063\u3066\u3060\u3051\u306a\u3089\u3053\u308c\u3067\u3044\u3044\u3067\u3059\u3002\n\n\u4eca\u56de\u306f\u30b5\u30fc\u30d0\u5074\u304c\u76f4\u63a5\u30b0\u30ed\u30fc\u30d0\u30ebIP\u6301\u3063\u3066\u3044\u306a\u304f\u3066\nNAPT\u914d\u4e0b\u3063\u3066\u3068\u3053\u308d\u304c\u5c11\u3057\u60a9\u307f\u3069\u3053\u308d\uff1f\n\u8ffd\u52a0\u3067\u30a2\u30c9\u30ec\u30b9\u5951\u7d04\u3059\u308b\u306e\u3082\u306a\u3093\u306a\u306e\u3067\uff08IDCF\u3055\u3093\u3054\u3081\u3093\u306a\u3055\u3044\uff09\u3053\u3093\u306a\u69cb\u6210\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u5143\u3005IDCF\u3055\u3093\u304c\u7528\u610f\u3057\u3066\u3044\u308bVPN\u304ciOS\u672a\u5bfe\u5fdc\u306e\u307e\u307e\u653e\u7f6e\u3055\u308c\u3066\u308b\u306e\u2026\n\u3053\u308c\u304c\u4f7f\u3048\u305f\u3089\u4e00\u756a\u7c21\u5358\u3060\u3063\u305f\uff1f\n\n\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30fc\u30c7\u30a3\u30f3\u30b0\u3082500/udp, 4500/udp\u3060\u3051\u3057\u3068\u3051\u3070\n\u3042\u3068\u5168\u90e8\u30af\u30ed\u30fc\u30ba\u3067\u554f\u984c\u306a\u3057\u3002\n", "tags": ["Debian", "ipsec", "VPN", "iOS", "iPhone"]}