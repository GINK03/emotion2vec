{"context": " More than 1 year has passed since last update.docker-compose\u3092\u4f7f\u3046\u3068\u3001\u8907\u6570\u30b3\u30f3\u30c6\u30ca\u306e\u69cb\u6210\u3092\u30b3\u30fc\u30c9\u3067\u5b9a\u7fa9\u3067\u304d\n\u5b9f\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\ndocker-swarm\u3068\u5408\u308f\u305b\u3066\u4f7f\u3046\u4e8b\u3067\u3001\n\u8907\u6570\u30db\u30b9\u30c8\u9593\u3067\u306e\u30b9\u30b1\u30fc\u30eb\u30a4\u30f3/\u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u304c\u7c21\u5358\u306b\u306a\u308a\u307e\u3059\u3002\n\n1. \u5b9f\u884c\u74b0\u5883\n\nOS: Max OSX\n\n\n2. \u5fc5\u8981\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\n\ndocker\ndocker-compose\ndocker-machine\ndocker-swarm\nvirtualbox\n\n\u5168\u3066brew\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\n$ brew search docker                             \nboot2docker           docker-machine (installed)        homebrew/versions/boot2docker141  homebrew/versions/docker141   homebrew/versions/docker171\ndocker (installed)        docker-swarm (installed)      homebrew/versions/boot2docker162  homebrew/versions/docker150\ndocker-compose (installed)    homebrew/versions/boot2docker133  homebrew/versions/docker133       homebrew/versions/docker162\nhomebrew/completions/boot2docker-completion    homebrew/emacs/dockerfile-mode             Caskroom/cask/docker-compose           Caskroom/cask/docker\nhomebrew/completions/docker-completion         Caskroom/cask/boot2docker-status           Caskroom/cask/docker-machine-driver-parallels  Caskroom/cask/dockertoolbox\nhomebrew/completions/docker-machine-completion     Caskroom/cask/boot2docker                  Caskroom/cask/docker-machine\n\n$ brew cask search virtualbox \n==> Exact match\nvirtualbox\n==> Partial matches\nvirtualbox-extension-pack\n\n\n3. Swarm\u3067\u30b3\u30f3\u30c6\u30ca\u306e\u30af\u30e9\u30b9\u30bf\u30ea\u30f3\u30b0\nDocker\u30b3\u30f3\u30c6\u30ca\u3092\u30af\u30e9\u30b9\u30bf\u30ea\u30f3\u30b0\u3059\u308b\u3092\u53c2\u7167\u4e0b\u3055\u3044\u3002\n\n4. docker-compose.yml\u3092\u4f5c\u6210\ndocker-compose.yml\u3067\u30b3\u30f3\u30c6\u30ca\u306e\u69cb\u6210\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\ndocker-compose.yml\n\n\ndocker-compose.yml\nweb:\n  image: tutum/hello-world\n  ports:\n    - 80:80\nredis:\n  image: redis:latest\n\n\n\n5. \u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3059\u308b\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001docker-compose.yml\u901a\u308a\u306b\u30b3\u30f3\u30c6\u30ca\u304c\u69cb\u7bc9\u3055\u308c\u307e\u3059\u3002\n$ docker-compose up -d\n\n$ docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                       NAMES\nac93efeba148        redis:latest        \"/entrypoint.sh redis\"   7 minutes ago       Up 6 minutes        6379/tcp                    cl-node2/robotconnect_redis_1\n29faddfd38f1        tutum/hello-world   \"/bin/sh -c 'php-fpm \"   8 minutes ago       Up 6 minutes        192.168.99.108:80->80/tcp   cl-node1/robotconnect_web_1\n\n\n6. \u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8/\u30b9\u30b1\u30fc\u30eb\u30a4\u30f3\nscale\u30b3\u30de\u30f3\u30c9\u3067\u3001\u30a4\u30e1\u30fc\u30b8\u306e\u30b3\u30f3\u30c6\u30ca\u6570\u3092\u81ea\u7531\u306b\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\n\nweb\u30b5\u30fc\u30d0\u30fc\u30923\u3064\u8d77\u52d5\u3059\u308b\n\n$ docker-compose scale web=3\nCreating and starting 2... done\nCreating and starting 3... done\n\n$ docker ps                 \nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                       NAMES\n3690c5a756a3        tutum/hello-world   \"/bin/sh -c 'php-fpm \"   35 seconds ago      Up 34 seconds       192.168.99.109:80->80/tcp   cl-node2/robotconnect_web_3\nbec52a263c98        tutum/hello-world   \"/bin/sh -c 'php-fpm \"   35 seconds ago      Up 34 seconds       192.168.99.107:80->80/tcp   cl-manager/robotconnect_web_2\nac93efeba148        redis:latest        \"/entrypoint.sh redis\"   8 minutes ago       Up 7 minutes        6379/tcp                    cl-node2/robotconnect_redis_1\n29faddfd38f1        tutum/hello-world   \"/bin/sh -c 'php-fpm \"   8 minutes ago       Up 7 minutes        192.168.99.108:80->80/tcp   cl-node1/robotconnect_web_1\n\n\nweb\u30b5\u30fc\u30d0\u30fc\u30921\u3064\u306b\u3059\u308b\n\n$ docker-compose scale web=1\nStopping robotconnect_web_2... done\nStopping robotconnect_web_3... done\nRemoving robotconnect_web_3... done\nRemoving robotconnect_web_2... done\n\n$ docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                       NAMES\nac93efeba148        redis:latest        \"/entrypoint.sh redis\"   8 minutes ago       Up 7 minutes        6379/tcp                    cl-node2/robotconnect_redis_1\n29faddfd38f1        tutum/hello-world   \"/bin/sh -c 'php-fpm \"   9 minutes ago       Up 7 minutes        192.168.99.108:80->80/tcp   cl-node1/robotconnect_web_1\n\ndocker-compose\u3092\u4f7f\u3046\u3068\u3001\u8907\u6570\u30b3\u30f3\u30c6\u30ca\u306e\u69cb\u6210\u3092\u30b3\u30fc\u30c9\u3067\u5b9a\u7fa9\u3067\u304d\n\u5b9f\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\ndocker-swarm\u3068\u5408\u308f\u305b\u3066\u4f7f\u3046\u4e8b\u3067\u3001\n\u8907\u6570\u30db\u30b9\u30c8\u9593\u3067\u306e\u30b9\u30b1\u30fc\u30eb\u30a4\u30f3/\u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u304c\u7c21\u5358\u306b\u306a\u308a\u307e\u3059\u3002\n\n## 1. \u5b9f\u884c\u74b0\u5883\n* OS: Max OSX\n\n## 2. \u5fc5\u8981\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\n* docker\n* docker-compose\n* docker-machine\n* docker-swarm\n* virtualbox\n\n\u5168\u3066brew\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\n\n```bash\n$ brew search docker                             \nboot2docker           docker-machine (installed)        homebrew/versions/boot2docker141  homebrew/versions/docker141   homebrew/versions/docker171\ndocker (installed)        docker-swarm (installed)      homebrew/versions/boot2docker162  homebrew/versions/docker150\ndocker-compose (installed)    homebrew/versions/boot2docker133  homebrew/versions/docker133       homebrew/versions/docker162\nhomebrew/completions/boot2docker-completion    homebrew/emacs/dockerfile-mode             Caskroom/cask/docker-compose           Caskroom/cask/docker\nhomebrew/completions/docker-completion         Caskroom/cask/boot2docker-status           Caskroom/cask/docker-machine-driver-parallels  Caskroom/cask/dockertoolbox\nhomebrew/completions/docker-machine-completion     Caskroom/cask/boot2docker                  Caskroom/cask/docker-machine\n\n$ brew cask search virtualbox \n==> Exact match\nvirtualbox\n==> Partial matches\nvirtualbox-extension-pack\n```\n\n## 3. Swarm\u3067\u30b3\u30f3\u30c6\u30ca\u306e\u30af\u30e9\u30b9\u30bf\u30ea\u30f3\u30b0\n[Docker\u30b3\u30f3\u30c6\u30ca\u3092\u30af\u30e9\u30b9\u30bf\u30ea\u30f3\u30b0\u3059\u308b](http://qiita.com/hikouki/items/05e408061203a72aef8f)\u3092\u53c2\u7167\u4e0b\u3055\u3044\u3002\n\n## 4. docker-compose.yml\u3092\u4f5c\u6210\ndocker-compose.yml\u3067\u30b3\u30f3\u30c6\u30ca\u306e\u69cb\u6210\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n* docker-compose.yml\n\n```docker-compose.yml\nweb:\n  image: tutum/hello-world\n  ports:\n    - 80:80\nredis:\n  image: redis:latest\n```\n\n## 5. \u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3059\u308b\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001docker-compose.yml\u901a\u308a\u306b\u30b3\u30f3\u30c6\u30ca\u304c\u69cb\u7bc9\u3055\u308c\u307e\u3059\u3002\n\n```bash\n$ docker-compose up -d\n\n$ docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                       NAMES\nac93efeba148        redis:latest        \"/entrypoint.sh redis\"   7 minutes ago       Up 6 minutes        6379/tcp                    cl-node2/robotconnect_redis_1\n29faddfd38f1        tutum/hello-world   \"/bin/sh -c 'php-fpm \"   8 minutes ago       Up 6 minutes        192.168.99.108:80->80/tcp   cl-node1/robotconnect_web_1\n```\n\n## 6. \u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8/\u30b9\u30b1\u30fc\u30eb\u30a4\u30f3\nscale\u30b3\u30de\u30f3\u30c9\u3067\u3001\u30a4\u30e1\u30fc\u30b8\u306e\u30b3\u30f3\u30c6\u30ca\u6570\u3092\u81ea\u7531\u306b\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\n\n* web\u30b5\u30fc\u30d0\u30fc\u30923\u3064\u8d77\u52d5\u3059\u308b\n\n```bash\n$ docker-compose scale web=3\nCreating and starting 2... done\nCreating and starting 3... done\n\n$ docker ps                 \nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                       NAMES\n3690c5a756a3        tutum/hello-world   \"/bin/sh -c 'php-fpm \"   35 seconds ago      Up 34 seconds       192.168.99.109:80->80/tcp   cl-node2/robotconnect_web_3\nbec52a263c98        tutum/hello-world   \"/bin/sh -c 'php-fpm \"   35 seconds ago      Up 34 seconds       192.168.99.107:80->80/tcp   cl-manager/robotconnect_web_2\nac93efeba148        redis:latest        \"/entrypoint.sh redis\"   8 minutes ago       Up 7 minutes        6379/tcp                    cl-node2/robotconnect_redis_1\n29faddfd38f1        tutum/hello-world   \"/bin/sh -c 'php-fpm \"   8 minutes ago       Up 7 minutes        192.168.99.108:80->80/tcp   cl-node1/robotconnect_web_1\n```\n\n* web\u30b5\u30fc\u30d0\u30fc\u30921\u3064\u306b\u3059\u308b\n\n```bash\n$ docker-compose scale web=1\nStopping robotconnect_web_2... done\nStopping robotconnect_web_3... done\nRemoving robotconnect_web_3... done\nRemoving robotconnect_web_2... done\n\n$ docker ps\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                       NAMES\nac93efeba148        redis:latest        \"/entrypoint.sh redis\"   8 minutes ago       Up 7 minutes        6379/tcp                    cl-node2/robotconnect_redis_1\n29faddfd38f1        tutum/hello-world   \"/bin/sh -c 'php-fpm \"   9 minutes ago       Up 7 minutes        192.168.99.108:80->80/tcp   cl-node1/robotconnect_web_1\n```\n", "tags": ["docker-compose", "docker"]}