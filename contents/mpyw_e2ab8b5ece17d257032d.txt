{"context": " More than 1 year has passed since last update.\u5927\u5b66\u306e\u8ab2\u984c\u7528 (\u518d\u3000\u5c65\u3000\u4fee)\n\n\u6574\u6570\u30d0\u30fc\u30b8\u30e7\u30f3\n\u7aef\u6570\u306f\u5207\u308a\u6368\u3066\u307e\u3059\u3002\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n# \u30c7\u30fc\u30bf\u30bb\u30af\u30b7\u30e7\u30f3\n.data\n\n    # \u6587\u5b57\u5217\u306e\u5b9a\u7fa9\n    input_message_0: .asciiz \"x0: \"\n    input_message_1: .asciiz \"y0: \"\n    input_message_2: .asciiz \"x1: \"\n    input_message_3: .asciiz \"y1: \"\n    output_message: .asciiz \"Distance: \"\n    eol: .asciiz \"\\n\"\n\n\n# \u30c6\u30ad\u30b9\u30c8\u30bb\u30af\u30b7\u30e7\u30f3\n.text\n\n    # main()\n    # \u300c\u5165\u529b\u300d\u2192\u300c\u8a08\u7b97\u300d\u2192\u300c\u51fa\u529b\u300d\u3092\u7e70\u308a\u8fd4\u3059\n    main:\n\n        # x0\u306e\u8981\u6c42\u3068\u4ee3\u5165\n        li $v0, 4\n        la $a0, input_message_0\n        syscall\n        li $v0, 5\n        syscall\n        move $s0, $v0\n\n        # y0\u306e\u8981\u6c42\u3068\u4ee3\u5165\n        li $v0, 4\n        la $a0, input_message_1\n        syscall\n        li $v0, 5\n        syscall\n        move $s1, $v0\n\n        # x1\u306e\u8981\u6c42\u3068\u4ee3\u5165\n        li $v0, 4\n        la $a0, input_message_2\n        syscall\n        li $v0, 5\n        syscall\n        move $s2, $v0\n\n        # y1\u306e\u8981\u6c42\u3068\u4ee3\u5165\n        li $v0, 4\n        la $a0, input_message_3\n        syscall\n        li $v0, 5\n        syscall\n        move $s3, $v0\n\n        # 2\u70b9\u9593\u306e\u8ddd\u96e2\u3092\u8a08\u7b97\n        sub $t0, $s0, $s2\n        sub $t1, $s1, $s3\n        mul $t0, $t0, $t0\n        mul $t1, $t1, $t1\n        add $a0, $t0, $t1\n        jal sqrt\n        move $t0, $v0\n\n        # \u7b54\u3048\u3092\u8868\u793a\n        li $v0, 4\n        la $a0, output_message\n        syscall\n        li $v0, 1\n        move $a0, $t0\n        syscall\n        li $v0, 4\n        la $a0, eol\n        syscall\n        syscall\n\n        # \u30ea\u30c8\u30e9\u30a4\n        j main\n\n    # sqrt()\n    # $a0: in\n    # $v0: out\n    sqrt:\n\n        # r = 0;\n        move $v0, $zero\n\n        # while (1) {\n        sqrt_loop_start:\n\n        # a = r * r;\n        mul $t0, $v0, $v0\n\n        # if (a > x) break;\n        bgt $t0, $a0, sqrt_loop_end\n\n        # r = r + 1;\n        addi $v0, $v0, 1\n\n        # }\n        j sqrt_loop_start\n        sqrt_loop_end:\n\n        # r = r - 1;\n        addi $v0, $v0, -1\n\n        # return r;\n        jr $ra\n\n\n\n\u5b9f\u884c\u4f8b\n\n\n\u5358\u7cbe\u5ea6\u6d6e\u52d5\u5c0f\u6570\u70b9\u30d0\u30fc\u30b8\u30e7\u30f3\n\u5358\u7cbe\u5ea6\u3067\u53ce\u675f\u3059\u308b\u307e\u3067\u8a08\u7b97\u3057\u307e\u3059\u3002\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n# \u30c7\u30fc\u30bf\u30bb\u30af\u30b7\u30e7\u30f3\n.data\n\n    # \u6587\u5b57\u5217\u306e\u5b9a\u7fa9\n    input_message_0: .asciiz \"x0: \"\n    input_message_1: .asciiz \"y0: \"\n    input_message_2: .asciiz \"x1: \"\n    input_message_3: .asciiz \"y1: \"\n    output_message: .asciiz \"Distance: \"\n    eol: .asciiz \"\\n\"\n\n    # \u6d6e\u52d5\u5c0f\u6570\u70b9\u6570\u5373\u5024\u306e\u5b9a\u7fa9\n    floats: .float 0.0, 1.0, 2.0\n\n\n# \u30c6\u30ad\u30b9\u30c8\u30bb\u30af\u30b7\u30e7\u30f3\n.text\n\n    # main()\n    # \u300c\u5165\u529b\u300d\u2192\u300c\u8a08\u7b97\u300d\u2192\u300c\u51fa\u529b\u300d\u3092\u7e70\u308a\u8fd4\u3059\n    main:\n\n        # x0\u306e\u8981\u6c42\u3068\u4ee3\u5165\n        li $v0, 4\n        la $a0, input_message_0\n        syscall\n        li $v0, 6\n        syscall\n        mov.s $f20, $f0\n\n        # y0\u306e\u8981\u6c42\u3068\u4ee3\u5165\n        li $v0, 4\n        la $a0, input_message_1\n        syscall\n        li $v0, 6\n        syscall\n        mov.s $f21, $f0\n\n        # x1\u306e\u8981\u6c42\u3068\u4ee3\u5165\n        li $v0, 4\n        la $a0, input_message_2\n        syscall\n        li $v0, 6\n        syscall\n        mov.s $f22, $f0\n\n        # y1\u306e\u8981\u6c42\u3068\u4ee3\u5165\n        li $v0, 4\n        la $a0, input_message_3\n        syscall\n        li $v0, 6\n        syscall\n        mov.s $f23, $f0\n\n        # 0.0, 1.0, 2.0\u306e\u4ee3\u5165\n        la $t0, floats\n        l.s $f24, 0($t0)\n        l.s $f25, 4($t0)\n        l.s $f26, 8($t0)\n\n        # 2\u70b9\u9593\u306e\u8ddd\u96e2\u3092\u8a08\u7b97\n        sub.s $f4, $f20, $f22\n        sub.s $f5, $f21, $f23\n        mul.s $f4, $f4, $f4\n        mul.s $f5, $f5, $f5\n        add.s $f12, $f4, $f5\n        jal sqrt\n\n        # \u7b54\u3048\u3092\u8868\u793a\n        li $v0, 4\n        la $a0, output_message\n        syscall\n        li $v0, 2\n        mov.s $f12, $f0\n        syscall\n        li $v0, 4\n        la $a0, eol\n        syscall\n        syscall\n\n        # \u30ea\u30c8\u30e9\u30a4\n        j main\n\n    # sqrt()\n    # $f12: in\n    # $f0: out\n    sqrt:\n\n        # if (x <= 0.0) goto sqrt_zero;\n        c.le.s $f12, $f24\n        bc1t sqrt_zero\n\n        # a = 1.0;\n        mov.s $f4, $f25\n\n        # while (1) {\n        sqrt_loop_start:\n\n        # b = a\n        mov.s $f5, $f4\n\n        # a = (x / a + a) / 2\n        div.s $f6, $f12, $f4\n        add.s $f6, $f6, $f4\n        div.s $f4, $f6, $f26\n\n        # if (a == b) break;\n        c.eq.s $f4, $f5\n        bc1t sqrt_loop_end\n\n        # }\n        j sqrt_loop_start\n        sqrt_loop_end:\n\n        # return a;\n        mov.s $f0, $f4\n        jr $ra\n\n        # return 0.0;\n        sqrt_zero:\n        mov.s $f0, $f24\n        jr $ra\n\n\n\n\u5b9f\u884c\u4f8b\n\n\u5927\u5b66\u306e\u8ab2\u984c\u7528 (**\u518d\u3000\u5c65\u3000\u4fee**)\n\n# \u6574\u6570\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\u7aef\u6570\u306f\u5207\u308a\u6368\u3066\u307e\u3059\u3002\n\n## \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\n```zsh\n# \u30c7\u30fc\u30bf\u30bb\u30af\u30b7\u30e7\u30f3\n.data\n\t\n\t# \u6587\u5b57\u5217\u306e\u5b9a\u7fa9\n\tinput_message_0: .asciiz \"x0: \"\n\tinput_message_1: .asciiz \"y0: \"\n\tinput_message_2: .asciiz \"x1: \"\n\tinput_message_3: .asciiz \"y1: \"\n\toutput_message: .asciiz \"Distance: \"\n\teol: .asciiz \"\\n\"\n\n\n# \u30c6\u30ad\u30b9\u30c8\u30bb\u30af\u30b7\u30e7\u30f3\n.text\n\t\n\t# main()\n\t# \u300c\u5165\u529b\u300d\u2192\u300c\u8a08\u7b97\u300d\u2192\u300c\u51fa\u529b\u300d\u3092\u7e70\u308a\u8fd4\u3059\n\tmain:\n\t\t\n\t\t# x0\u306e\u8981\u6c42\u3068\u4ee3\u5165\n\t\tli $v0, 4\n\t\tla $a0, input_message_0\n\t\tsyscall\n\t\tli $v0, 5\n\t\tsyscall\n\t\tmove $s0, $v0\n\t\t\n\t\t# y0\u306e\u8981\u6c42\u3068\u4ee3\u5165\n\t\tli $v0, 4\n\t\tla $a0, input_message_1\n\t\tsyscall\n\t\tli $v0, 5\n\t\tsyscall\n\t\tmove $s1, $v0\n\t\t\n\t\t# x1\u306e\u8981\u6c42\u3068\u4ee3\u5165\n\t\tli $v0, 4\n\t\tla $a0, input_message_2\n\t\tsyscall\n\t\tli $v0, 5\n\t\tsyscall\n\t\tmove $s2, $v0\n\t\t\n\t\t# y1\u306e\u8981\u6c42\u3068\u4ee3\u5165\n\t\tli $v0, 4\n\t\tla $a0, input_message_3\n\t\tsyscall\n\t\tli $v0, 5\n\t\tsyscall\n\t\tmove $s3, $v0\n\t\t\n\t\t# 2\u70b9\u9593\u306e\u8ddd\u96e2\u3092\u8a08\u7b97\n\t\tsub $t0, $s0, $s2\n\t\tsub $t1, $s1, $s3\n\t\tmul $t0, $t0, $t0\n\t\tmul $t1, $t1, $t1\n\t\tadd $a0, $t0, $t1\n\t\tjal sqrt\n\t\tmove $t0, $v0\n\t\t\n\t\t# \u7b54\u3048\u3092\u8868\u793a\n\t\tli $v0, 4\n\t\tla $a0, output_message\n\t\tsyscall\n\t\tli $v0, 1\n\t\tmove $a0, $t0\n\t\tsyscall\n\t\tli $v0, 4\n\t\tla $a0, eol\n\t\tsyscall\n\t\tsyscall\n\t\t\n\t\t# \u30ea\u30c8\u30e9\u30a4\n\t\tj main\n\t\n\t# sqrt()\n\t# $a0: in\n\t# $v0: out\n\tsqrt:\n\t\t\n\t\t# r = 0;\n\t\tmove $v0, $zero\n\t\t\n\t\t# while (1) {\n\t\tsqrt_loop_start:\n\t\t\n\t\t# a = r * r;\n\t\tmul $t0, $v0, $v0\n\t\t\n\t\t# if (a > x) break;\n\t\tbgt $t0, $a0, sqrt_loop_end\n\t\t\n\t\t# r = r + 1;\n\t\taddi $v0, $v0, 1\n\t\t\n\t\t# }\n\t\tj sqrt_loop_start\n\t\tsqrt_loop_end:\n\t\t\n\t\t# r = r - 1;\n\t\taddi $v0, $v0, -1\n\t\t\n\t\t# return r;\n\t\tjr $ra\n\t\n```\n\n## \u5b9f\u884c\u4f8b\n\n![ss (2014-05-04 at 03.28.34).png](https://qiita-image-store.s3.amazonaws.com/0/25060/22e09e09-a44d-520c-f9f6-7677d108ca54.png)\n\n# \u5358\u7cbe\u5ea6\u6d6e\u52d5\u5c0f\u6570\u70b9\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\u5358\u7cbe\u5ea6\u3067\u53ce\u675f\u3059\u308b\u307e\u3067\u8a08\u7b97\u3057\u307e\u3059\u3002\n\n## \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\n```zsh\n# \u30c7\u30fc\u30bf\u30bb\u30af\u30b7\u30e7\u30f3\n.data\n\t\n\t# \u6587\u5b57\u5217\u306e\u5b9a\u7fa9\n\tinput_message_0: .asciiz \"x0: \"\n\tinput_message_1: .asciiz \"y0: \"\n\tinput_message_2: .asciiz \"x1: \"\n\tinput_message_3: .asciiz \"y1: \"\n\toutput_message: .asciiz \"Distance: \"\n\teol: .asciiz \"\\n\"\n\t\n\t# \u6d6e\u52d5\u5c0f\u6570\u70b9\u6570\u5373\u5024\u306e\u5b9a\u7fa9\n\tfloats: .float 0.0, 1.0, 2.0\n\t\n\n# \u30c6\u30ad\u30b9\u30c8\u30bb\u30af\u30b7\u30e7\u30f3\n.text\n\t\n\t# main()\n\t# \u300c\u5165\u529b\u300d\u2192\u300c\u8a08\u7b97\u300d\u2192\u300c\u51fa\u529b\u300d\u3092\u7e70\u308a\u8fd4\u3059\n\tmain:\n\t\t\n\t\t# x0\u306e\u8981\u6c42\u3068\u4ee3\u5165\n\t\tli $v0, 4\n\t\tla $a0, input_message_0\n\t\tsyscall\n\t\tli $v0, 6\n\t\tsyscall\n\t\tmov.s $f20, $f0\n\t\t\n\t\t# y0\u306e\u8981\u6c42\u3068\u4ee3\u5165\n\t\tli $v0, 4\n\t\tla $a0, input_message_1\n\t\tsyscall\n\t\tli $v0, 6\n\t\tsyscall\n\t\tmov.s $f21, $f0\n\t\t\n\t\t# x1\u306e\u8981\u6c42\u3068\u4ee3\u5165\n\t\tli $v0, 4\n\t\tla $a0, input_message_2\n\t\tsyscall\n\t\tli $v0, 6\n\t\tsyscall\n\t\tmov.s $f22, $f0\n\t\t\n\t\t# y1\u306e\u8981\u6c42\u3068\u4ee3\u5165\n\t\tli $v0, 4\n\t\tla $a0, input_message_3\n\t\tsyscall\n\t\tli $v0, 6\n\t\tsyscall\n\t\tmov.s $f23, $f0\n\t\t\n\t\t# 0.0, 1.0, 2.0\u306e\u4ee3\u5165\n\t\tla $t0, floats\n\t\tl.s $f24, 0($t0)\n\t\tl.s $f25, 4($t0)\n\t\tl.s $f26, 8($t0)\n\t\t\n\t\t# 2\u70b9\u9593\u306e\u8ddd\u96e2\u3092\u8a08\u7b97\n\t\tsub.s $f4, $f20, $f22\n\t\tsub.s $f5, $f21, $f23\n\t\tmul.s $f4, $f4, $f4\n\t\tmul.s $f5, $f5, $f5\n\t\tadd.s $f12, $f4, $f5\n\t\tjal sqrt\n\t\t\n\t\t# \u7b54\u3048\u3092\u8868\u793a\n\t\tli $v0, 4\n\t\tla $a0, output_message\n\t\tsyscall\n\t\tli $v0, 2\n\t\tmov.s $f12, $f0\n\t\tsyscall\n\t\tli $v0, 4\n\t\tla $a0, eol\n\t\tsyscall\n\t\tsyscall\n\t\t\n\t\t# \u30ea\u30c8\u30e9\u30a4\n\t\tj main\n\t\n\t# sqrt()\n\t# $f12: in\n\t# $f0: out\n\tsqrt:\n\t\t\n\t\t# if (x <= 0.0) goto sqrt_zero;\n\t\tc.le.s $f12, $f24\n\t\tbc1t sqrt_zero\n\t\t\n\t\t# a = 1.0;\n\t\tmov.s $f4, $f25\n\t\t\n\t\t# while (1) {\n\t\tsqrt_loop_start:\n\t\t\n\t\t# b = a\n\t\tmov.s $f5, $f4\n\t\t\n\t\t# a = (x / a + a) / 2\n\t\tdiv.s $f6, $f12, $f4\n\t\tadd.s $f6, $f6, $f4\n\t\tdiv.s $f4, $f6, $f26\n\t\t\n\t\t# if (a == b) break;\n\t\tc.eq.s $f4, $f5\n\t\tbc1t sqrt_loop_end\n\t\t\n\t\t# }\n\t\tj sqrt_loop_start\n\t\tsqrt_loop_end:\n\t\t\n\t\t# return a;\n\t\tmov.s $f0, $f4\n\t\tjr $ra\n\t\t\n\t\t# return 0.0;\n\t\tsqrt_zero:\n\t\tmov.s $f0, $f24\n\t\tjr $ra\n\t\n```\n\n## \u5b9f\u884c\u4f8b\n\n![ss (2014-05-04 at 03.31.27).png](https://qiita-image-store.s3.amazonaws.com/0/25060/9b20252e-549d-c4f3-7f2c-585fb68eabe5.png)\n\n", "tags": ["MIPS", "assembly"]}