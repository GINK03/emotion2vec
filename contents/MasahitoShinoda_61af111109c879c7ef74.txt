{"tags": ["bundler", "Ruby"], "context": "\u3053\u306e\u30da\u30fc\u30b8\u306f Bundler \u306e\u53ef\u611b\u3055\uff08\uff1f\uff09\u3092\u304a\u697d\u3057\u307f\u9802\u304f\u305f\u3081\u90aa\u9b54\u306b\u306a\u3089\u306a\u3044\u7a0b\u5ea6\u306e\u5dee\u3057\u969c\u308a\u306e\u306a\u3044\u4f1a\u8a71\u3092\u304a\u697d\u3057\u307f\u3044\u305f\u3060\u304f\u30e1\u30e2\u3092\u6652\u3059\u30da\u30fc\u30b8\u3067\u3059\u3002\n\u3064\u307e\u308a\u4ffa\u5f97\u306a\u3060\u3051\u3067\u4ed6\u306b\u5bc4\u4e0e\u3057\u307e\u305b\u3093\uff01\nQiita \u306b\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u3044\u308b\u7686\u69d8\u306b\u306f 99% \u8033\u30bf\u30b3\u306a\u8a71\u3067\u3057\u3087\u3046\uff01\n\u771f\u9762\u76ee\u306a\u8a71\u3092\u3059\u308b\u3068\u3001\u4e3b\u306b\u65e5\u672c\u8a9e\u60c5\u5831\u304c\u5c11\u306a\u3044\u3068\u611f\u3058\u305f\u3082\u306e\u3084\u3001\u3053\u308c\u3063\u3066\u88dc\u8db3\u3057\u305f\u3044\u306a\u30fc\u3063\u3066\u60c5\u5831\u3092\u5fd8\u308c\u306a\u3044\u305f\u3081\u306b\u30e1\u30e2\u3059\u308b\u30da\u30fc\u30b8\u3002\n\n\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u30e1\u30e2\n\nDon't run Bundler as root...\n$ sudo bundle install\n\nDon't run Bundler as root. Bundler can ask for sudo if it is needed, and installing your bundle as root will break this application for all non-root users on this machine.\n\n\n\u30a8\u30e9\u30fc\u306e\u5185\u5bb9\u88dc\u8db3\n\u8a00\u3044\u305f\u3044\u3053\u3068\u306f\u4f55\u3068\u306a\u304f\u308f\u304b\u308b\u304c\u3001\u9006\u306b\u4f55\u3068\u306a\u304f\u3057\u304b\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u3050\u3050\u3063\u3066\u307f\u305f\u3002\nPrint warning when bundler is run by root \u00b7 Issue #2936 \u00b7 bundler/bundler\nruby - \"Don't run bundler as root\" - what is the exact difference made by using root? - Stack Overflow\n\nRunning sudo bundle install can cause huge and cascading problems for users trying to install gems on OS X into the system gems. We should print a warning and explain that Bundler will prompt for sudo if it's needed. We should also warn people that sudo bundle will break git gems, because they have to be writable by the user that Bundler runs as.\n\n\u8981\u3059\u308b\u306b\u300croot \u3067 install \u3059\u308b\u3068\u30b7\u30b9\u30c6\u30e0\u306e gem \u3076\u3063\u58ca\u3059\u304b\u3082\u3057\u308c\u306a\u3044\u304b\u3089\u6ce8\u610f\u30e1\u30c3\u30bb\u30fc\u30b8\u51fa\u305d\u3046\u300d\u3063\u3066\u3053\u3068\u3089\u3057\u3044\u3002\n\u30b3\u30e1\u30f3\u30c8\u3067\u306f OS X \u306b\u3064\u3044\u3066\u8a00\u53ca\u3057\u3066\u3044\u308b\u3088\u3046\u3060\u304c\u3001\u5225\u306b Linux \u3067\u3082\u8d77\u304d\u306a\u3044\u8a71\u3067\u306f\u306a\u3044\u3002\n\n\u5bfe\u5fdc\u65b9\u6cd5\n\u300c\u3058\u3083\u3041 root \u3084\u3081\u308b\u308f\u300d\u3063\u3066\u306e\u304c\u6b63\u3057\u3044\u3093\u3060\u308d\u3046\u3051\u3069\u3001Rails \u306a\u3069\u306e\u30ea\u30e2\u30fc\u30c8\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u3059\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u884c\u6a29\u9650\u3092\u3061\u3083\u3093\u3068\u5206\u3051\u3066\u3044\u308b\u304b\u304c\u6c17\u306b\u306a\u3063\u305f\u3002\n\u4f8b\u3048\u3070\u30d9\u30bf\u3067\u66f8\u304f\u3068\u3053\u3093\u306a\u611f\u3058\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\u74b0\u5883\u304c\u3042\u3063\u305f\u3068\u3059\u308b\u3002\n# root \u304c\u3060\u3081\u306a\u306e\u3067\u5c02\u7528\u306e\u30e6\u30fc\u30b6\u30fc\u6a29\u9650\u4f5c\u3063\u3066\u5bfe\u5fdc\u3059\u308b\u3088\uff01\n$ sudo -u rails git pull original-rails-app && cd original-rails-app\n$ sudo -u rails bundle install\n\n# supervisord \u3067\u5b9f\u884c\u3059\u308b\u3082 root \u3058\u3083\u306a\u304f\u3066 rails \u30e6\u30fc\u30b6\u30fc\u306b\u8a2d\u5b9a\u6e08\u307f\u3060\uff01\n$ sudo supervisorctl start original-rails-app\n\n\u3053\u308c\u3060\u3068\u4e07\u304c\u4e00\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u4efb\u610f\u306e\u30d5\u30a1\u30a4\u30eb\u66f8\u304d\u8fbc\u307f\u3092\u8a31\u3059\u30d0\u30b0\u304c\u3042\u3063\u305f\u5834\u5408\u306b\u3001\u30d0\u30b0\u306e\u524d\u63d0\u304c\u9177\u3059\u304e\u308b\u3068\u3044\u3046\u8a71\u306f\u7f6e\u3044\u3068\u3044\u3066\u7c21\u5358\u306b\u60aa\u610f\u306e\u3042\u308b\u30b3\u30fc\u30c9\u304c\u57cb\u3081\u8fbc\u307e\u308c\u3066\u3057\u307e\u3046\u3002\n\u8981\u306f supervisord \u3067\u5b9f\u884c\u3059\u308b\u969b\u306b nobody \u7b49\u306e\u5225\u306e\u6a29\u9650\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f7f\u3063\u3066\u3044\u308c\u3070\u3044\u3044\u306e\u3060\u3051\u308c\u3069\u3001\u307e\u3060\u307e\u3060\u73fe\u5f79\u3067\u3042\u308b CentOS-6\u7cfb EPEL \u306b\u3042\u308b supervisor.noarch-2.1-9.el6 \u3067\u306f\u5b9f\u884c\u30e6\u30fc\u30b6\u30fc\u6a29\u9650\u306e\u5909\u66f4\u304c\u3067\u304d\u306a\u3044\u3002\n\u7d50\u5c40\u306e\u3068\u3053\u308d\u4e0b\u8a18\u306e\u3069\u308c\u304b\u306e\u5bfe\u5fdc\u304c\u5fc5\u8981\u306b\u306a\u308b\u3002\n\nsupervisord-3 \u3092\u5165\u308c\u3066 nobody \u306a\u3069\u5b89\u5168\u306a\u30e6\u30fc\u30b6\u30fc\u6a29\u9650\u3067\u5b9f\u884c\u3059\u308b\u3002\n\u8af8\u4e8b\u60c5\u3067 supervisord-3 \u3092\u5165\u308c\u3089\u308c\u306a\u3044\u5834\u5408\u306f supervisord \u3092\u8ae6\u3081\u3066\u76f4\u63a5 unicorn \u3092 nobody \u306a\u3069\u306e\u5b89\u5168\u306a\u30e6\u30fc\u30b6\u30fc\u6a29\u9650\u3067\u5b9f\u884c\u3059\u308b\u3002\n\u8af8\u4e8b\u60c5\u3067\uff08\u7565\uff09supervisord \u3058\u3083\u306a\u304f\u3066 upstart \u4f7f\u3046\u3002\nSELinux \u7b49\u306e\u5f37\u5236\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u53ef\u80fd\u306a\u4ed5\u7d44\u307f\u3092\u5c0e\u5165\u3057\u3066\u66f8\u304d\u63db\u3048\u3092\u9632\u3050\u3002\n\n\u3053\u306e\u30da\u30fc\u30b8\u306f Bundler \u306e\u53ef\u611b\u3055\uff08\uff1f\uff09\u3092\u304a\u697d\u3057\u307f\u9802\u304f\u305f\u3081\u90aa\u9b54\u306b\u306a\u3089\u306a\u3044\u7a0b\u5ea6\u306e\u5dee\u3057\u969c\u308a\u306e\u306a\u3044~~\u4f1a\u8a71\u3092\u304a\u697d\u3057\u307f\u3044\u305f\u3060\u304f~~\u30e1\u30e2\u3092\u6652\u3059\u30da\u30fc\u30b8\u3067\u3059\u3002\n\n\u3064\u307e\u308a\u4ffa\u5f97\u306a\u3060\u3051\u3067\u4ed6\u306b\u5bc4\u4e0e\u3057\u307e\u305b\u3093\uff01\nQiita \u306b\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u3044\u308b\u7686\u69d8\u306b\u306f 99% \u8033\u30bf\u30b3\u306a\u8a71\u3067\u3057\u3087\u3046\uff01\n\n\u771f\u9762\u76ee\u306a\u8a71\u3092\u3059\u308b\u3068\u3001\u4e3b\u306b\u65e5\u672c\u8a9e\u60c5\u5831\u304c\u5c11\u306a\u3044\u3068\u611f\u3058\u305f\u3082\u306e\u3084\u3001\u3053\u308c\u3063\u3066\u88dc\u8db3\u3057\u305f\u3044\u306a\u30fc\u3063\u3066\u60c5\u5831\u3092\u5fd8\u308c\u306a\u3044\u305f\u3081\u306b\u30e1\u30e2\u3059\u308b\u30da\u30fc\u30b8\u3002\n\n# \u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u30e1\u30e2\n\n## Don't run Bundler as root...\n\n```shell-session\n$ sudo bundle install\n\nDon't run Bundler as root. Bundler can ask for sudo if it is needed, and installing your bundle as root will break this application for all non-root users on this machine.\n```\n\n### \u30a8\u30e9\u30fc\u306e\u5185\u5bb9\u88dc\u8db3\n\u8a00\u3044\u305f\u3044\u3053\u3068\u306f\u4f55\u3068\u306a\u304f\u308f\u304b\u308b\u304c\u3001\u9006\u306b\u4f55\u3068\u306a\u304f\u3057\u304b\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u3050\u3050\u3063\u3066\u307f\u305f\u3002\n\n[Print warning when bundler is run by root \u00b7 Issue #2936 \u00b7 bundler/bundler](https://github.com/bundler/bundler/issues/2936)\n[ruby - \"Don't run bundler as root\" - what is the exact difference made by using root? - Stack Overflow](http://stackoverflow.com/questions/25437817/dont-run-bundler-as-root-what-is-the-exact-difference-made-by-using-root)\n\n> Running sudo bundle install can cause huge and cascading problems for users trying to install gems on OS X into the system gems. We should print a warning and explain that Bundler will prompt for sudo if it's needed. We should also warn people that sudo bundle will break git gems, because they have to be writable by the user that Bundler runs as.\n\n\u8981\u3059\u308b\u306b\u300croot \u3067 install \u3059\u308b\u3068\u30b7\u30b9\u30c6\u30e0\u306e gem \u3076\u3063\u58ca\u3059\u304b\u3082\u3057\u308c\u306a\u3044\u304b\u3089\u6ce8\u610f\u30e1\u30c3\u30bb\u30fc\u30b8\u51fa\u305d\u3046\u300d\u3063\u3066\u3053\u3068\u3089\u3057\u3044\u3002\n\u30b3\u30e1\u30f3\u30c8\u3067\u306f OS X \u306b\u3064\u3044\u3066\u8a00\u53ca\u3057\u3066\u3044\u308b\u3088\u3046\u3060\u304c\u3001\u5225\u306b Linux \u3067\u3082\u8d77\u304d\u306a\u3044\u8a71\u3067\u306f\u306a\u3044\u3002\n\n\n### \u5bfe\u5fdc\u65b9\u6cd5\n\n\u300c\u3058\u3083\u3041 root \u3084\u3081\u308b\u308f\u300d\u3063\u3066\u306e\u304c\u6b63\u3057\u3044\u3093\u3060\u308d\u3046\u3051\u3069\u3001Rails \u306a\u3069\u306e\u30ea\u30e2\u30fc\u30c8\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u3059\u30b5\u30fc\u30d3\u30b9\u306e\u5b9f\u884c\u6a29\u9650\u3092\u3061\u3083\u3093\u3068\u5206\u3051\u3066\u3044\u308b\u304b\u304c\u6c17\u306b\u306a\u3063\u305f\u3002\n\n\u4f8b\u3048\u3070\u30d9\u30bf\u3067\u66f8\u304f\u3068\u3053\u3093\u306a\u611f\u3058\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\u74b0\u5883\u304c\u3042\u3063\u305f\u3068\u3059\u308b\u3002\n\n```shell-session\n# root \u304c\u3060\u3081\u306a\u306e\u3067\u5c02\u7528\u306e\u30e6\u30fc\u30b6\u30fc\u6a29\u9650\u4f5c\u3063\u3066\u5bfe\u5fdc\u3059\u308b\u3088\uff01\n$ sudo -u rails git pull original-rails-app && cd original-rails-app\n$ sudo -u rails bundle install\n\n# supervisord \u3067\u5b9f\u884c\u3059\u308b\u3082 root \u3058\u3083\u306a\u304f\u3066 rails \u30e6\u30fc\u30b6\u30fc\u306b\u8a2d\u5b9a\u6e08\u307f\u3060\uff01\n$ sudo supervisorctl start original-rails-app\n```\n\n\u3053\u308c\u3060\u3068\u4e07\u304c\u4e00\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u4efb\u610f\u306e\u30d5\u30a1\u30a4\u30eb\u66f8\u304d\u8fbc\u307f\u3092\u8a31\u3059\u30d0\u30b0\u304c\u3042\u3063\u305f\u5834\u5408\u306b\u3001~~\u30d0\u30b0\u306e\u524d\u63d0\u304c\u9177\u3059\u304e\u308b\u3068\u3044\u3046\u8a71\u306f\u7f6e\u3044\u3068\u3044\u3066~~\u7c21\u5358\u306b\u60aa\u610f\u306e\u3042\u308b\u30b3\u30fc\u30c9\u304c\u57cb\u3081\u8fbc\u307e\u308c\u3066\u3057\u307e\u3046\u3002\n\n\u8981\u306f supervisord \u3067\u5b9f\u884c\u3059\u308b\u969b\u306b nobody \u7b49\u306e\u5225\u306e\u6a29\u9650\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f7f\u3063\u3066\u3044\u308c\u3070\u3044\u3044\u306e\u3060\u3051\u308c\u3069\u3001\u307e\u3060\u307e\u3060\u73fe\u5f79\u3067\u3042\u308b CentOS-6\u7cfb EPEL \u306b\u3042\u308b `supervisor.noarch-2.1-9.el6` \u3067\u306f\u5b9f\u884c\u30e6\u30fc\u30b6\u30fc\u6a29\u9650\u306e\u5909\u66f4\u304c\u3067\u304d\u306a\u3044\u3002\n\n\u7d50\u5c40\u306e\u3068\u3053\u308d\u4e0b\u8a18\u306e\u3069\u308c\u304b\u306e\u5bfe\u5fdc\u304c\u5fc5\u8981\u306b\u306a\u308b\u3002\n\n* supervisord-3 \u3092\u5165\u308c\u3066 nobody \u306a\u3069\u5b89\u5168\u306a\u30e6\u30fc\u30b6\u30fc\u6a29\u9650\u3067\u5b9f\u884c\u3059\u308b\u3002\n* \u8af8\u4e8b\u60c5\u3067 supervisord-3 \u3092\u5165\u308c\u3089\u308c\u306a\u3044\u5834\u5408\u306f supervisord \u3092\u8ae6\u3081\u3066\u76f4\u63a5 unicorn \u3092 nobody \u306a\u3069\u306e\u5b89\u5168\u306a\u30e6\u30fc\u30b6\u30fc\u6a29\u9650\u3067\u5b9f\u884c\u3059\u308b\u3002\n* \u8af8\u4e8b\u60c5\u3067\uff08\u7565\uff09supervisord \u3058\u3083\u306a\u304f\u3066 upstart \u4f7f\u3046\u3002\n* SELinux \u7b49\u306e\u5f37\u5236\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u53ef\u80fd\u306a\u4ed5\u7d44\u307f\u3092\u5c0e\u5165\u3057\u3066\u66f8\u304d\u63db\u3048\u3092\u9632\u3050\u3002\n"}