{"context": " More than 1 year has passed since last update.\n\nvsftpd\u306b\u304a\u3044\u3066\u904b\u7528\u4e2d\u306eftp\u306eroot\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u591c\u9593\u306b\u5909\u66f4\u3059\u308b\u624b\u9806\n\u904b\u7528\u4e2d\u306eftp\u306eroot\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u591c\u9593\u306b\u5165\u308c\u66ff\u3048\u305f\u3068\u304d\u306e\u624b\u9806\u3092\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u5909\u66f4\u524d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff1a\n/home/ftpservice/ftp_root\n\u5909\u66f4\u5f8c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff1a\n/data/ftp/ftp_root\n\n\n/data/ftp\u3092\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u30eb\u30fc\u30c8\u30d5\u30a9\u30eb\u30c0\u3092\u5909\u66f4\u3057\u305fvsftpd.conf\u3092\u7528\u610f\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u5165\u308c\u66ff\u3048\u7528\u30b9\u30af\u30ea\u30d7\u30c8change_ftp_dir.sh\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n3.1. ftp\u30b5\u30fc\u30d3\u30b9\u505c\u6b62\n  3.2. \u65e7\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30c7\u30fc\u30bf\u3092\u65b0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\n  3.3. \u30a2\u30af\u30bb\u30b9\u6a29\u3092\u8a2d\u5b9a\n  3.4. ftp\u30b5\u30fc\u30d0\u30fc\u7528\u8a2d\u5b9a\u3092\u5909\u66f4\uff08root\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5909\u66f4\u3057\u305f\u3082\u306e\u3068\u7f6e\u304d\u63db\u3048\uff09\n  3.5. ftp\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n\ncrontab\u3067\u591c\u9593\u306bchange_ftp_dir.sh\u8d77\u52d5\u3059\u308b\u3088\u3046\u4ed5\u8fbc\u3093\u3067\u304a\u304d\u307e\u3059\u3002\n\n\u203b\u624b\u98062\u3067\u4f5c\u6210\u3059\u308bvsftpd.conf\u306f\nlocal_root=/home/ftpservice/ftp_root/\n\u3092\nlocal_root=/data/ftp/ftp_root/\n\u306b\u5909\u66f4\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002\n\u203b\u624b\u98063\u306e\u5165\u308c\u66ff\u3048\u7528\u30b9\u30af\u30ea\u30d7\u30c8\n\nchange_ftp_dir.sh\necho `date`\nsudo /sbin/service vsftpd stop\nsudo cp -rpf /home/ftpservice/ftp_root /data/ftp/\nsudo chown -R ftpservice /data/ftp\nsudo chgrp -R ftpservice /data/ftp\nsudo cp vsftpd.conf /etc/vsftpd/vsftpd.conf\nsudo chmod 0600 /etc/vsftpd/vsftpd.conf\nsudo /sbin/service vsftpd start\necho `date`\n\n\n\u4f5c\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u306f\u6b21\u306e\u5834\u6240\u306b\u914d\u7f6e\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n/data/vsftpd.conf\n/data/change_ftp_dir.sh\n5/15 23:00\u306b\u5b9f\u884c\u3055\u305b\u308b\u5834\u5408\u306e\u8a2d\u5b9a\n$ crontab -e\n\n00 23 15 05 * /data/change_ftp_dir.sh\n\n# vsftpd\u306b\u304a\u3044\u3066\u904b\u7528\u4e2d\u306eftp\u306eroot\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u591c\u9593\u306b\u5909\u66f4\u3059\u308b\u624b\u9806\n\n\u904b\u7528\u4e2d\u306eftp\u306eroot\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u591c\u9593\u306b\u5165\u308c\u66ff\u3048\u305f\u3068\u304d\u306e\u624b\u9806\u3092\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059\u3002\n\n* \u5909\u66f4\u524d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff1a\n/home/ftpservice/ftp_root\n\n* \u5909\u66f4\u5f8c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff1a\n/data/ftp/ftp_root\n\n1. /data/ftp\u3092\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n2. \u30eb\u30fc\u30c8\u30d5\u30a9\u30eb\u30c0\u3092\u5909\u66f4\u3057\u305fvsftpd.conf\u3092\u7528\u610f\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n3. \u5165\u308c\u66ff\u3048\u7528\u30b9\u30af\u30ea\u30d7\u30c8change_ftp_dir.sh\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n  3.1. ftp\u30b5\u30fc\u30d3\u30b9\u505c\u6b62\n  3.2. \u65e7\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30c7\u30fc\u30bf\u3092\u65b0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\n  3.3. \u30a2\u30af\u30bb\u30b9\u6a29\u3092\u8a2d\u5b9a\n  3.4. ftp\u30b5\u30fc\u30d0\u30fc\u7528\u8a2d\u5b9a\u3092\u5909\u66f4\uff08root\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5909\u66f4\u3057\u305f\u3082\u306e\u3068\u7f6e\u304d\u63db\u3048\uff09\n  3.5. ftp\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n\n4. crontab\u3067\u591c\u9593\u306bchange_ftp_dir.sh\u8d77\u52d5\u3059\u308b\u3088\u3046\u4ed5\u8fbc\u3093\u3067\u304a\u304d\u307e\u3059\u3002\n\n\n\u203b\u624b\u98062\u3067\u4f5c\u6210\u3059\u308bvsftpd.conf\u306f\n`local_root=/home/ftpservice/ftp_root/`\n\u3092\n`local_root=/data/ftp/ftp_root/`\n\u306b\u5909\u66f4\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002\n\n\n\u203b\u624b\u98063\u306e\u5165\u308c\u66ff\u3048\u7528\u30b9\u30af\u30ea\u30d7\u30c8\n\n```bash:change_ftp_dir.sh\necho `date`\nsudo /sbin/service vsftpd stop\nsudo cp -rpf /home/ftpservice/ftp_root /data/ftp/\nsudo chown -R ftpservice /data/ftp\nsudo chgrp -R ftpservice /data/ftp\nsudo cp vsftpd.conf /etc/vsftpd/vsftpd.conf\nsudo chmod 0600 /etc/vsftpd/vsftpd.conf\nsudo /sbin/service vsftpd start\necho `date`\n```\n\n\u4f5c\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u306f\u6b21\u306e\u5834\u6240\u306b\u914d\u7f6e\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n`/data/vsftpd.conf\n/data/change_ftp_dir.sh`\n\n5/15 23:00\u306b\u5b9f\u884c\u3055\u305b\u308b\u5834\u5408\u306e\u8a2d\u5b9a\n\n`$ crontab -e`\n\n`\n00 23 15 05 * /data/change_ftp_dir.sh\n`\n", "tags": ["vsftpd", "Linux"]}