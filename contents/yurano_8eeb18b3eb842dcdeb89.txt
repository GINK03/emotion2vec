{"context": "\n\n\u6982\u8981\nServerless Framework v1.0\u3092\u4f7f\u3063\u3066\u3001API Gateway + Lambda + DynamoDB\u306eREST API\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\nServerless Framework\u306f\u3001node.js\u3067\u52d5\u4f5c\u3059\u308b\u30b5\u30fc\u30d0\u30fc\u30ec\u30b9\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7ba1\u7406\u30c4\u30fc\u30eb\u3067\u3059\u3002\n\u4ee5\u4e0b\u306e\u624b\u9806\u306fnode.js\u53ca\u3073npm\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u74b0\u5883\u3067\u5b9f\u65bd\u3057\u307e\u3059\u3002\n\n\u74b0\u5883\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\nServerless Framework\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nnpm\u3067serverless\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nnpm install -g serverless\n\nserverless\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u30b3\u30de\u30f3\u30c9\u4e00\u89a7\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\u3067\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u306e\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u3068\u3057\u3066\u3001sls\u3082\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n$ serverless\n\nCommands\n...\n\n\nServerless Framework\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066\u3001\u79fb\u52d5\u3057\u307e\u3059\u3002\nmkdir serverless-rest-example\ncd serverless-rest-example\n\nserverless create\u30b3\u30de\u30f3\u30c9\u3067\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n--template\u5f15\u6570\u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001aws-nodejs\u3092\u4f7f\u3044\u307e\u3059\u3002\nsls create --template aws-nodejs\n\n\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\nserverless.yml: Serverless Framework\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\nhandler.js: lambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\nevent.json: \u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3057\u305f\u6642\u306b\u6e21\u3055\u308c\u308b\u5f15\u6570\n\n\nserverless.yml\u306e\u8a2d\u5b9a\nserverless.yml\u3092\u7de8\u96c6\u3057\u3066\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u57fa\u672c\u8a2d\u5b9a\n\n\nservice: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\nprovider: \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30c7\u30d7\u30ed\u30a4\u5148\u306e\u8a2d\u5b9a\u3067\u3059\u3002\n\n\n\nname: aws\u3068\u3059\u308b\u3068\u3001AWS\u3092\u30c7\u30d7\u30ed\u30a4\u5148\u3068\u3057\u3066\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nruntime: lambda\u306e\u30e9\u30f3\u30bf\u30a4\u30e0\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nstage: \u30b5\u30fc\u30d3\u30b9\u306e\u30b9\u30c6\u30fc\u30b8\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nregion: \u30c7\u30d7\u30ed\u30a4\u5148\u306eAWS\u30ea\u30fc\u30b8\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n\nserverless.yml\u306f\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\nserverless.yml\nservice: serverless-rest-example\n\nprovider:\n  name: aws\n  runtime: nodejs4.3\n  stage: test\n  region: ap-northeast-1\n\n\n\nlambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\nfunctions:\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u306e\u4e0b\u306b\u3001lambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001hello\u3068\u3044\u3046\u540d\u524d\u306elambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nlambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a:\n\n\nhandler: lambda\u306ehandler\u306e\u8a2d\u5b9a\u3067\u3059\u3002\n\nevents: lambda\u306e\u30c8\u30ea\u30ac\u30fc\u30a4\u30d9\u30f3\u30c8\u306e\u8a2d\u5b9a\u3067\u3059\u3002\n\n\n\nhttp: APIGateway\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092lambda\u306e\u30c8\u30ea\u30ac\u30fc\u30a4\u30d9\u30f3\u30c8\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\n\npath: REST API\u306e\u30ea\u30bd\u30fc\u30b9\u30d1\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nmethod: lambda\u304c\u30b3\u30fc\u30eb\u3055\u308c\u308bHTTP\u30e1\u30bd\u30c3\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n\n\nserverless.yml\nfunctions:\n  hello:\n    handler: handler.hello\n    events:\n      - http:\n          path: hello\n          method: get\n      - http:\n          path: hello/{name}\n          method: get\n\n\n\nDynamoDB\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u5b9a\nDynamoDB\u306e\u30c6\u30fc\u30d6\u30eb\u3092CloudFormation\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u4f8b\u306e\u3088\u3046\u306b\u3001resources:\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u306e\u4e0b\u306b\u3001CloudFormation\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u3002\n\u3053\u306e\u4f8b\u3067\u306f\u3001\u5148\u307b\u3069\u8a2d\u5b9a\u3057\u305fservice:\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u306e\u5024\u3092\u30d7\u30ea\u30d5\u30a3\u30c3\u30af\u30b9\u306b\u3057\u305f\u3001users\u3068\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n\nserverless.yml\nresources:\n  AWSTemplateFormatVersion: \"2010-09-09\"\n  Resources:\n    users:\n      Type: AWS::DynamoDB::Table\n      Properties:\n        AttributeDefinitions:\n          - AttributeName: id\n            AttributeType: S\n        KeySchema:\n          - AttributeName: id\n            KeyType: HASH\n        ProvisionedThroughput:\n          ReadCapacityUnits: 1\n          WriteCapacityUnits: 1\n        TableName: ${self:service}_users\n\n\n\nlambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u306e\u4f5c\u6210\nlambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nserverless\u30b3\u30de\u30f3\u30c9\u3067\u30c7\u30d7\u30ed\u30a4\u3057\u305flambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092APIGateway\u3067\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u306e\u623b\u308a\u5024\u306f\u4ee5\u4e0b\u306e\u5f62\u5f0f\u306b\u3057\u307e\u3059\u3002\n{\n    \"statusCode\": httpStatusCode,\n    \"headers\": { \"headerName\": \"headerValue\", ... },\n    \"body\": \"...\"\n}\n\n\u5f15\u7528:AWS Documentation | Proxy Resource\u306e\u30d7\u30ed\u30ad\u30b7\u7d71\u5408\u3092\u8a2d\u5b9a\u3059\u308b\nserverless.yml\u306e\u4e2d\u3067\u3001GET /hello\u3068GET /hello/{name}\u306blambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u7d10\u3065\u3051\u307e\u3057\u305f\u3002\n\u3053\u3053\u3067\u306f\u3001GET /hello\u3068\u3059\u308b\u3068\u3001Hello World!\u3068\u8fd4\u3057\u3001GET /hello/{name}\u3068\u3059\u308b\u3068\u3001Hello ${name}!\u8fd4\u3059lambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u305b\u3063\u304b\u304f\u4f5c\u3063\u305fDynamoDB\u306e\u30c6\u30fc\u30d6\u30eb\u306f\u4f7f\u7528\u3057\u3066\u3044\u307e\u305b\u3093\u306d\u3002\n\nhandler.js\nmodule.exports.hello = (event, context, callback) => {\n  const pathParameters = event.pathParameters || { name: 'World' };\n\n  const response = {\n    statusCode: 200,\n    body: JSON.stringify({\n      message: `Hello ${pathParameters.name}!`,\n    }),\n  };\n\n  callback(null, response);\n};\n\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\nserverless deploy\u30b3\u30de\u30f3\u30c9\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u306b\u306f\u3001AWS\u30a2\u30ab\u30a6\u30f3\u30c8\u3078\u306e\u8a8d\u8a3c\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u624b\u3063\u53d6\u308a\u65e9\u3044\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3001\u74b0\u5883\u5909\u6570\u306bAWS_ACCESS_KEY_ID\u3068AWS_SECRET_ACCESS_KEY\u3092\u74b0\u5883\u5909\u6570\u306b\u8a2d\u5b9a\u3059\u308b\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\nexport AWS_ACCESS_KEY_ID=<key>\nexport AWS_SECRET_ACCESS_KEY=<secret>\nserverless deploy\n\n\u3059\u3067\u306baws cli\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u74b0\u5883\u306e\u5834\u5408\u3001aws cli\u306e\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u524a\u9664\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\nserverless remove\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3059\u308b\nserverless invoke\u30b3\u30de\u30f3\u30c9\u3067\u3001\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n--function\u3067\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n--path\u3067\u3001\u5b9f\u884c\u6642\u306bevent\u306b\u6e21\u3059\u5f15\u6570\u306ejson\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\nserverless invoke --function hello --path event.json\n\n\n\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\nhttps://github.com/yurano/serverless-rest-example\n## \u6982\u8981\n\n[Serverless Framework](https://serverless.com) v1.0\u3092\u4f7f\u3063\u3066\u3001API Gateway + Lambda + DynamoDB\u306eREST API\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\n\nServerless Framework\u306f\u3001node.js\u3067\u52d5\u4f5c\u3059\u308b\u30b5\u30fc\u30d0\u30fc\u30ec\u30b9\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7ba1\u7406\u30c4\u30fc\u30eb\u3067\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u624b\u9806\u306fnode.js\u53ca\u3073npm\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u74b0\u5883\u3067\u5b9f\u65bd\u3057\u307e\u3059\u3002\n\n## \u74b0\u5883\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\n### Serverless Framework\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nnpm\u3067serverless\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```Bash\nnpm install -g serverless\n```\n\n`serverless`\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u30b3\u30de\u30f3\u30c9\u4e00\u89a7\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\u3067\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u306e\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8\u3068\u3057\u3066\u3001`sls`\u3082\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\n```Bash\n$ serverless\n\nCommands\n...\n```\n\n### Serverless Framework\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210 \n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066\u3001\u79fb\u52d5\u3057\u307e\u3059\u3002\n\n```Bash\nmkdir serverless-rest-example\ncd serverless-rest-example\n```\n\n`serverless create`\u30b3\u30de\u30f3\u30c9\u3067\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n`--template`\u5f15\u6570\u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001`aws-nodejs`\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n```Bash\nsls create --template aws-nodejs\n```\n\n\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n* serverless.yml: Serverless Framework\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n* handler.js: lambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n* event.json: \u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3057\u305f\u6642\u306b\u6e21\u3055\u308c\u308b\u5f15\u6570\n\n## serverless.yml\u306e\u8a2d\u5b9a\n\nserverless.yml\u3092\u7de8\u96c6\u3057\u3066\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n### \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u57fa\u672c\u8a2d\u5b9a\n\n* `service:` \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n* `provider:` \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30c7\u30d7\u30ed\u30a4\u5148\u306e\u8a2d\u5b9a\u3067\u3059\u3002\n  * `name:` aws\u3068\u3059\u308b\u3068\u3001AWS\u3092\u30c7\u30d7\u30ed\u30a4\u5148\u3068\u3057\u3066\u6307\u5b9a\u3057\u307e\u3059\u3002\n  * `runtime:` lambda\u306e\u30e9\u30f3\u30bf\u30a4\u30e0\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n  * `stage:` \u30b5\u30fc\u30d3\u30b9\u306e\u30b9\u30c6\u30fc\u30b8\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n  * `region:` \u30c7\u30d7\u30ed\u30a4\u5148\u306eAWS\u30ea\u30fc\u30b8\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nserverless.yml\u306f\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n  \n```yaml:serverless.yml\nservice: serverless-rest-example\n\nprovider:\n  name: aws\n  runtime: nodejs4.3\n  stage: test\n  region: ap-northeast-1\n```\n\n### lambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\n\n`functions:`\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u306e\u4e0b\u306b\u3001lambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u306f\u3001`hello`\u3068\u3044\u3046\u540d\u524d\u306elambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nlambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a:\n\n* `handler:` lambda\u306ehandler\u306e\u8a2d\u5b9a\u3067\u3059\u3002\n* `events:` lambda\u306e\u30c8\u30ea\u30ac\u30fc\u30a4\u30d9\u30f3\u30c8\u306e\u8a2d\u5b9a\u3067\u3059\u3002\n  * `http:` APIGateway\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092lambda\u306e\u30c8\u30ea\u30ac\u30fc\u30a4\u30d9\u30f3\u30c8\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\n  * `path:` REST API\u306e\u30ea\u30bd\u30fc\u30b9\u30d1\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n  * `method:` lambda\u304c\u30b3\u30fc\u30eb\u3055\u308c\u308bHTTP\u30e1\u30bd\u30c3\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```yaml:serverless.yml\nfunctions:\n  hello:\n    handler: handler.hello\n    events:\n      - http:\n          path: hello\n          method: get\n      - http:\n          path: hello/{name}\n          method: get\n```\n\n### DynamoDB\u30c6\u30fc\u30d6\u30eb\u306e\u8a2d\u5b9a\n\nDynamoDB\u306e\u30c6\u30fc\u30d6\u30eb\u3092CloudFormation\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u4f8b\u306e\u3088\u3046\u306b\u3001`resources:`\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u306e\u4e0b\u306b\u3001CloudFormation\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u3002\n\u3053\u306e\u4f8b\u3067\u306f\u3001\u5148\u307b\u3069\u8a2d\u5b9a\u3057\u305f`service:`\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u306e\u5024\u3092\u30d7\u30ea\u30d5\u30a3\u30c3\u30af\u30b9\u306b\u3057\u305f\u3001users\u3068\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n\n```yaml:serverless.yml\nresources:\n  AWSTemplateFormatVersion: \"2010-09-09\"\n  Resources:\n    users:\n      Type: AWS::DynamoDB::Table\n      Properties:\n        AttributeDefinitions:\n          - AttributeName: id\n            AttributeType: S\n        KeySchema:\n          - AttributeName: id\n            KeyType: HASH\n        ProvisionedThroughput:\n          ReadCapacityUnits: 1\n          WriteCapacityUnits: 1\n        TableName: ${self:service}_users\n```\n\n## lambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u306e\u4f5c\u6210\n\nlambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nserverless\u30b3\u30de\u30f3\u30c9\u3067\u30c7\u30d7\u30ed\u30a4\u3057\u305flambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092APIGateway\u3067\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u306e\u623b\u308a\u5024\u306f\u4ee5\u4e0b\u306e\u5f62\u5f0f\u306b\u3057\u307e\u3059\u3002\n\n```\n{\n    \"statusCode\": httpStatusCode,\n    \"headers\": { \"headerName\": \"headerValue\", ... },\n    \"body\": \"...\"\n}\n```\n\n[\u5f15\u7528:AWS Documentation | Proxy Resource\u306e\u30d7\u30ed\u30ad\u30b7\u7d71\u5408\u3092\u8a2d\u5b9a\u3059\u308b](https://docs.aws.amazon.com/ja_jp/apigateway/latest/developerguide/api-gateway-set-up-simple-proxy.html#api-gateway-simple-proxy-for-lambda-output-format)\n\n\nserverless.yml\u306e\u4e2d\u3067\u3001`GET /hello`\u3068`GET /hello/{name}`\u306blambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u7d10\u3065\u3051\u307e\u3057\u305f\u3002\n\n\u3053\u3053\u3067\u306f\u3001`GET /hello`\u3068\u3059\u308b\u3068\u3001`Hello World!`\u3068\u8fd4\u3057\u3001`GET /hello/{name}`\u3068\u3059\u308b\u3068\u3001`Hello ${name}!`\u8fd4\u3059lambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u305b\u3063\u304b\u304f\u4f5c\u3063\u305fDynamoDB\u306e\u30c6\u30fc\u30d6\u30eb\u306f\u4f7f\u7528\u3057\u3066\u3044\u307e\u305b\u3093\u306d\u3002\n\n```javascript:handler.js\nmodule.exports.hello = (event, context, callback) => {\n  const pathParameters = event.pathParameters || { name: 'World' };\n\n  const response = {\n    statusCode: 200,\n    body: JSON.stringify({\n      message: `Hello ${pathParameters.name}!`,\n    }),\n  };\n\n  callback(null, response);\n};\n```\n\n## \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\n\n`serverless deploy`\u30b3\u30de\u30f3\u30c9\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u306b\u306f\u3001AWS\u30a2\u30ab\u30a6\u30f3\u30c8\u3078\u306e\u8a8d\u8a3c\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n\u624b\u3063\u53d6\u308a\u65e9\u3044\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3001\u74b0\u5883\u5909\u6570\u306b`AWS_ACCESS_KEY_ID`\u3068`AWS_SECRET_ACCESS_KEY`\u3092\u74b0\u5883\u5909\u6570\u306b\u8a2d\u5b9a\u3059\u308b\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\n\n```Bash\nexport AWS_ACCESS_KEY_ID=<key>\nexport AWS_SECRET_ACCESS_KEY=<secret>\nserverless deploy\n```\n\n\u3059\u3067\u306baws cli\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u74b0\u5883\u306e\u5834\u5408\u3001aws cli\u306e\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n\n\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u524a\u9664\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```Bash\nserverless remove\n```\n\n## \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3059\u308b\n\n`serverless invoke`\u30b3\u30de\u30f3\u30c9\u3067\u3001\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n`--function`\u3067\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n`--path`\u3067\u3001\u5b9f\u884c\u6642\u306b`event`\u306b\u6e21\u3059\u5f15\u6570\u306ejson\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\n```Bash\nserverless invoke --function hello --path event.json\n```\n\n## \u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\n\nhttps://github.com/yurano/serverless-rest-example\n", "tags": ["serverless", "APIGateway", "lambda", "DynamoDB", "AWS"]}