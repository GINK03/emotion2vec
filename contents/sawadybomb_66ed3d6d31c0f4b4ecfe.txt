{"context": " More than 1 year has passed since last update.\n\n\u3053\u306e\u8a18\u4e8b\u306b\u3064\u3044\u3066\nPython\u3068lxml\u3092\u4f7f\u3063\u3066\u3001web\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3067\u6295\u4fe1\u5354\u4f1a\u306eweb\u30b5\u30a4\u30c8(\u6295\u4fe1\u7dcf\u5408\u691c\u7d22\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc)\u304b\u3089\u6295\u8cc7\u4fe1\u8a17\u306e\u5c5e\u6027\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3059\u3002\n\n\u74b0\u5883\nWindows10 x64\nPython 2.7.11\nlxml 3.5.0\n\ngetFundDetail.py\n# -*- coding: utf-8 -*-\n# python 2.7\nimport urllib2\nimport lxml.html\n\n# \u6295\u4fe1\u5354\u4f1aHP\u304b\u3089\u6295\u8cc7\u4fe1\u8a17\u306e\u5c5e\u6027\u3092\u53d6\u5f97\u3059\u308b\ndef getFundDetail(isin_cd):\n    try:\n        # URL\u751f\u6210\n        ud = dict(isinCd=isin_cd)\n        url = 'http://tskl.toushin.or.jp/FdsWeb/view/FDST030000.seam?isinCd={isinCd}'.format(**ud)\n\n        html = urllib2.urlopen(url).read()\n        root = lxml.html.fromstring(html)\n\n        xpath_top = '//*[@id=\"contents\"]/div[2]/div/table[1]//label'\n        xpath_mid = '//*[@id=\"contents\"]/div[2]/div/table[3]//label'\n        xpath_bottom = '//*[@id=\"contents\"]//table[@class=\"dividend\"]//label'\n\n        labels_top = root.xpath(xpath_top)\n        labels_mid = root.xpath(xpath_mid)\n        labels_bottom = root.xpath(xpath_bottom)\n\n        func = lambda elem: elem.text.encode('utf-8').replace('\\n','')\n\n        labels_top  = map(func, labels_top)\n        labels_mid = map(func, labels_mid)\n        labels_bottom  = map(func, labels_bottom)\n\n        # \u7a7adict\u306b\u5024\u3092\u30bb\u30c3\u30c8\n        d = {}\n\n        d['isin_cd'] = isin_cd\n        d['closing_date'] = labels_top[0]\n        d['index_type'] = labels_top[1]\n        d['trustee_fee'] = labels_top[2]\n        d['unit_type'] = labels_top[3]\n        d['establishment_date'] = labels_top[4]\n        d['fund_ctg1'] = labels_top[5]\n        d['fund_ctg2'] = labels_top[6]\n        d['fund_name'] = labels_top[7]\n        d['fund_shortname'] = labels_top[8]\n        d['asset_manager'] = labels_top[9]\n\n        d['independent_division'] = labels_mid[0]\n        d['investment_asset'] = labels_mid[1]\n        d['investment_style'] = labels_mid[2]\n        d['establishment_date2'] = labels_mid[3]\n        d['close_date'] = labels_mid[4]\n\n        d['trustee_fee_am'] = labels_bottom[0]\n        # \u7121\u5831\u916c\u306e\u5834\u5408\u306f'buying_fee'\u304c\u53d6\u308c\u305a\u8981\u7d20\u6570\u304c5\u306b\u306a\u308b\n        if len(labels_bottom) == 5:\n            d['buying_fee'] = 0\n            d['partical_redemption_charge'] = labels_bottom[1]\n            d['trustee_fee2'] = labels_bottom[2]\n            d['trustee_fee_seller'] = labels_bottom[3]\n            d['trustee_fee_custody'] = labels_bottom[4]\n        else:\n            d['buying_fee'] = labels_bottom[1]\n            d['partical_redemption_charge'] = labels_bottom[2]\n            d['trustee_fee2'] = labels_bottom[3]\n            d['trustee_fee_seller'] = labels_bottom[4]\n            d['trustee_fee_custody'] = labels_bottom[5]\n\n        return d\n\n    except:\n        d = {}\n        return d\n\n\nif __name__ == '__main__':\n    dict = getFundDetail('JP90C000A931') # \u65e5\u672c\u682a\u30a2\u30eb\u30d5\u30a1\u30fb\u30ab\u30eb\u30c6\u30c3\u30c8\uff08\u6bce\u6708\u5206\u914d\u578b\uff09\n#    dict = getFundDetail('JP90C0003E16') # \u30ce\u30e0\u30e9\u65e5\u672c\u682a\u6226\u7565\u30d5\u30a1\u30f3\u30c9\n#    dict = getFundDetail('JP90C0002V73') # MMF\n    for k, v in dict.iteritems():\n        print k\n        print v\n\n\n\n\n\u51fa\u529b\u30b5\u30f3\u30d7\u30eb\nestablishment_date2\n2014/04/04\nbuying_fee\n3.50\nclose_date\n2019/04/04\nindependent_division\n-\nfund_shortname\n\u3000\nindex_type\n-\ntrustee_fee_seller\n0.60000\nisin_cd\nJP90C000A931\nunit_type\n\u8ffd\u52a0\u578b\nfund_name\n\u65e5\u672c\u682a\u30a2\u30eb\u30d5\u30a1\u30fb\u30ab\u30eb\u30c6\u30c3\u30c8\uff08\u6bce\u6708\u5206\u914d\u578b\uff09\nestablishment_date\n2014/04/04\ntrustee_fee2\n1.02500\ninvestment_style\n\u30d5\u30a1\u30f3\u30c9\uff65\u30aa\u30d6\uff65\u30d5\u30a1\u30f3\u30ba\nfund_ctg1\n\u56fd\u5185\u682a\u5f0f\ntrustee_fee\n1.02500\nfund_ctg2\n\u8a72\u5f53\u7121\nasset_manager\n\u5927\u548c\u4f4f\u9280\u6295\u4fe1\u6295\u8cc7\u9867\u554f\u682a\u5f0f\u4f1a\u793e\ninvestment_asset\n\u682a\u5f0f\nclosing_date\n\u5e7412\u56de\ntrustee_fee_custody\n0.02500\npartical_redemption_charge\n\u5916\u67a00.5\uff05\u672a\u6e80\ntrustee_fee_am\n0.40000\n\n#\u3053\u306e\u8a18\u4e8b\u306b\u3064\u3044\u3066\nPython\u3068lxml\u3092\u4f7f\u3063\u3066\u3001web\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3067\u6295\u4fe1\u5354\u4f1a\u306eweb\u30b5\u30a4\u30c8(\u6295\u4fe1\u7dcf\u5408\u691c\u7d22\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc)\u304b\u3089\u6295\u8cc7\u4fe1\u8a17\u306e\u5c5e\u6027\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3059\u3002\n\n##\u74b0\u5883\nWindows10 x64\nPython 2.7.11\nlxml 3.5.0\n\n```py:getFundDetail.py\n# -*- coding: utf-8 -*-\n# python 2.7\nimport urllib2\nimport lxml.html\n\n# \u6295\u4fe1\u5354\u4f1aHP\u304b\u3089\u6295\u8cc7\u4fe1\u8a17\u306e\u5c5e\u6027\u3092\u53d6\u5f97\u3059\u308b\ndef getFundDetail(isin_cd):\n    try:\n        # URL\u751f\u6210\n        ud = dict(isinCd=isin_cd)\n        url = 'http://tskl.toushin.or.jp/FdsWeb/view/FDST030000.seam?isinCd={isinCd}'.format(**ud)\n\n        html = urllib2.urlopen(url).read()\n        root = lxml.html.fromstring(html)\n\n        xpath_top = '//*[@id=\"contents\"]/div[2]/div/table[1]//label'\n        xpath_mid = '//*[@id=\"contents\"]/div[2]/div/table[3]//label'\n        xpath_bottom = '//*[@id=\"contents\"]//table[@class=\"dividend\"]//label'\n\n        labels_top = root.xpath(xpath_top)\n        labels_mid = root.xpath(xpath_mid)\n        labels_bottom = root.xpath(xpath_bottom)\n\n        func = lambda elem: elem.text.encode('utf-8').replace('\\n','')\n\n        labels_top  = map(func, labels_top)\n        labels_mid = map(func, labels_mid)\n        labels_bottom  = map(func, labels_bottom)\n\n        # \u7a7adict\u306b\u5024\u3092\u30bb\u30c3\u30c8\n        d = {}\n\n        d['isin_cd'] = isin_cd\n        d['closing_date'] = labels_top[0]\n        d['index_type'] = labels_top[1]\n        d['trustee_fee'] = labels_top[2]\n        d['unit_type'] = labels_top[3]\n        d['establishment_date'] = labels_top[4]\n        d['fund_ctg1'] = labels_top[5]\n        d['fund_ctg2'] = labels_top[6]\n        d['fund_name'] = labels_top[7]\n        d['fund_shortname'] = labels_top[8]\n        d['asset_manager'] = labels_top[9]\n\n        d['independent_division'] = labels_mid[0]\n        d['investment_asset'] = labels_mid[1]\n        d['investment_style'] = labels_mid[2]\n        d['establishment_date2'] = labels_mid[3]\n        d['close_date'] = labels_mid[4]\n\n        d['trustee_fee_am'] = labels_bottom[0]\n        # \u7121\u5831\u916c\u306e\u5834\u5408\u306f'buying_fee'\u304c\u53d6\u308c\u305a\u8981\u7d20\u6570\u304c5\u306b\u306a\u308b\n        if len(labels_bottom) == 5:\n            d['buying_fee'] = 0\n            d['partical_redemption_charge'] = labels_bottom[1]\n            d['trustee_fee2'] = labels_bottom[2]\n            d['trustee_fee_seller'] = labels_bottom[3]\n            d['trustee_fee_custody'] = labels_bottom[4]\n        else:\n            d['buying_fee'] = labels_bottom[1]\n            d['partical_redemption_charge'] = labels_bottom[2]\n            d['trustee_fee2'] = labels_bottom[3]\n            d['trustee_fee_seller'] = labels_bottom[4]\n            d['trustee_fee_custody'] = labels_bottom[5]\n\n        return d\n\n    except:\n        d = {}\n        return d\n\n\nif __name__ == '__main__':\n    dict = getFundDetail('JP90C000A931') # \u65e5\u672c\u682a\u30a2\u30eb\u30d5\u30a1\u30fb\u30ab\u30eb\u30c6\u30c3\u30c8\uff08\u6bce\u6708\u5206\u914d\u578b\uff09\n#    dict = getFundDetail('JP90C0003E16') # \u30ce\u30e0\u30e9\u65e5\u672c\u682a\u6226\u7565\u30d5\u30a1\u30f3\u30c9\n#    dict = getFundDetail('JP90C0002V73') # MMF\n    for k, v in dict.iteritems():\n        print k\n        print v\n\n```\n\n##\u51fa\u529b\u30b5\u30f3\u30d7\u30eb\n```\nestablishment_date2\n2014/04/04\nbuying_fee\n3.50\nclose_date\n2019/04/04\nindependent_division\n-\nfund_shortname\n\u3000\nindex_type\n-\ntrustee_fee_seller\n0.60000\nisin_cd\nJP90C000A931\nunit_type\n\u8ffd\u52a0\u578b\nfund_name\n\u65e5\u672c\u682a\u30a2\u30eb\u30d5\u30a1\u30fb\u30ab\u30eb\u30c6\u30c3\u30c8\uff08\u6bce\u6708\u5206\u914d\u578b\uff09\nestablishment_date\n2014/04/04\ntrustee_fee2\n1.02500\ninvestment_style\n\u30d5\u30a1\u30f3\u30c9\uff65\u30aa\u30d6\uff65\u30d5\u30a1\u30f3\u30ba\nfund_ctg1\n\u56fd\u5185\u682a\u5f0f\ntrustee_fee\n1.02500\nfund_ctg2\n\u8a72\u5f53\u7121\nasset_manager\n\u5927\u548c\u4f4f\u9280\u6295\u4fe1\u6295\u8cc7\u9867\u554f\u682a\u5f0f\u4f1a\u793e\ninvestment_asset\n\u682a\u5f0f\nclosing_date\n\u5e7412\u56de\ntrustee_fee_custody\n0.02500\npartical_redemption_charge\n\u5916\u67a00.5\uff05\u672a\u6e80\ntrustee_fee_am\n0.40000\n```\n", "tags": ["Python", "\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0", "\u6295\u8cc7"]}