{"context": " More than 1 year has passed since last update.\n\n\u4eca\u56de\u306e\u30b4\u30fc\u30eb\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u306e\u821e\u53f0\u88cf\u3092\u7406\u89e3\u3059\u308b\u3053\u3068\u304c\u4eca\u56de\u306e\u30b4\u30fc\u30eb\u3002\nval hello = Action {\n  Ok(\"hello\")\n}\n\ndef echo = Action { request =>\n  Ok(\"Got [\" + request.body + \"]\")\n}\n\n\u306a\u304a\u3001\u5bfe\u8c61\u306ePlay Framework\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f2.3.2\u3002\n\n\u306f\u3058\u3081\u306b\nAction\u304c\u3084\u308b\u3053\u3068\u306f\u4e00\u8a00\u3067\u3044\u3046\u3068HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u53d6\u3063\u3066HTTP\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3059\u3001\u8981\u306f\u3053\u308c\u3002\nPlay Framework\u3067\u3053\u308c\u3092\u5b9f\u65bd\u3059\u308b\u306b\u3042\u305f\u3063\u3066HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3068HTTP\u30ec\u30b9\u30dd\u30f3\u30b9\u306b\u8a72\u5f53\u3059\u308b\u3082\u306e\u3092\u5148\u306b\u6574\u7406\u3057\u3066\u304a\u304f\u3002\n\nHTTP\u30ea\u30af\u30a8\u30b9\u30c8\n\nplay.api.mvc.RequestHeader\nplay.api.mvc.Request\n\nRequest\u306fRequestHeader\u3092\u7d99\u627f\u3057\u3066\u304a\u308a\u3001\u4e21\u8005\u306e\u9055\u3044\u306f\u524d\u8005\u304cbody\u306a\u3057\u3001\u5f8c\u8005\u306fbody\u3042\u308a\u3068\u3044\u3046\u3053\u3068\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u305f\u969b\u306erequest\u306e\u578b\u306f\u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u90e8\u306e\u30d1\u30fc\u30b9\u304c\u884c\u308f\u308c\u305f\u5f8c\u8005\u306eRequest\u578b\u306e\u65b9\u3068\u306a\u308b\u3002\ndef myAction = Action { request =>\n\n\u203b\u4f46\u3057\u3001Request\u578b\u3068\u3044\u3063\u3066\u3082GET\u6642\u306f\u305d\u3082\u305d\u3082body\u304c\u7121\u3044\u306e\u3067body.asText\u3068\u3084\u3063\u3066\u3082\u4f55\u3082\u53d6\u308c\u306a\u3044\u3002\n\nHTTP\u30ec\u30b9\u30dd\u30f3\u30b9\n\nplay.api.mvc.Result\n\nResult\u306e\u5b9a\u7fa9\u306f\u4ee5\u4e0b\u3067\u3001\u69cb\u6210\u8981\u7d20\u3068\u3057\u3066\u4e3b\u306b\u30ec\u30b9\u30dd\u30f3\u30b9\u30d8\u30c3\u30c0\u3068\u30d0\u30a4\u30c8\u914d\u5217\u306e\u30dc\u30c7\u30a3\u304b\u3089\u306a\u308b\u3053\u3068\u304c\u5206\u304b\u308b\u3002\ncase class Result(header: ResponseHeader, body: Enumerator[Array[Byte]], connection: HttpConnection.Connection = HttpConnection.KeepAlive) {\n\nEnumerator\u3067\u304f\u308b\u307e\u308c\u3066\u3044\u308b\u306e\u306f\u3001\u901a\u5e38HTTP\u30ec\u30b9\u30dd\u30f3\u30b9\u306fArray[Byte]\u304c\u4e00\u767a\u3067\u8fd4\u308b\u3068\u3044\u3046\u3088\u308a\u3082\u3080\u3057\u308d\u8907\u6570\u56de\u306b\u5206\u3051\u3066\u8fd4\u3055\u308c\u308b\u3053\u3068\u304c\u591a\u3044\u304b\u3089\u3067\u3001\u305d\u306e\u8fba\u306e\u4ed5\u7d44\u307f\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u3002\n\u3082\u3061\u308d\u3093\u30ec\u30b9\u30dd\u30f3\u30b9\u3060\u3051\u3067\u306a\u304f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u3082\u540c\u69d8\u3067\u3042\u308b\u3002\n\u3053\u3053\u306b\u3064\u3044\u3066\u306f\u300c\u3084\u3055\u3057\u3044Iteratee\u5165\u9580\u300d\u304c\u5206\u304b\u308a\u3084\u3059\u3044\u306e\u3067\u8aad\u307f\u307e\u3057\u3087\u3046\u3002\nhttp://www.slideshare.net/TakashiKawachi/iteratee\n\nOk(\"hello\")\n\u3055\u3066\u3001Ok(\"hello\")\u306e\u90e8\u5206\u304b\u3089\u898b\u3066\u3044\u304f\u3053\u3068\u306b\u3059\u308b\u3002\n\u3053\u306eOk\u306fResults\u30c8\u30ec\u30a4\u30c8\u5185\u306b\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308bStatus\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3042\u308b\u3002\n/** Generates a \u2018200 OK\u2019 result. */\nval Ok = new Status(OK)\n\n\u3053\u306e\u4ed6\u306b\u3082NotFound(404)\u3084ServiceUnavailable(503)\u306a\u3069\u3082\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002\n\u3053\u306eStatus\u3068\u3044\u3046\u30af\u30e9\u30b9\u306f\u540c\u3058\u304fResults\u30c8\u30ec\u30a4\u30c8\u5185\u306b\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002\nclass Status(status: Int) extends Result(header = ResponseHeader(status), body = Enumerator.empty, connection = HttpConnection.KeepAlive) {\n\n\u306a\u304a\u3001new Status(OK)\u306eOK\u306f\u4ee5\u4e0b\u306eStandardValues.scala\u306b\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u3001Status\u306e\u5b9a\u6570\u3002\nhttps://github.com/playframework/playframework/blob/2.3.0/framework/src/play/src/main/scala/play/api/http/StandardValues.scala\nStandardValues.scala\u306b\u306f\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u8868\u3059Status\u4ee5\u5916\u306b\u3082\n\nMimeTypes(\"text/html\"\u3084\"application/octet-stream\"\u306a\u3069)\nContentTypes(\"text/html; charset=utf-8\"\u306a\u3069)\nHttpVerbs(\"GET\"\u3084\"POST\"\u306a\u3069)\nHeaderNames(\"Accept-Language\"\u3084\"ETag\"\u306a\u3069)\nHttpProtocols(\"HTTP/1.1\"\u306a\u3069)\n\n\u3068\u3044\u3063\u305f\u5404\u7a2e\u5b9a\u6570\u30af\u30e9\u30b9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\u3053\u308c\u3089trait\u306fController\u306bmix-in\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u4f7f\u7528\u3057\u305f\u3044\u5834\u5408\u306fAtion\u5b9a\u7fa9\u6642\u306bimport\u306a\u3057\u3067\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3002\u899a\u3048\u3066\u304a\u304f\u3068\u3044\u3044\u3060\u308d\u3046\u3002\ntrait Controller extends Results with BodyParsers with HttpProtocol with Status with HeaderNames with ContentTypes with RequestExtractors with Rendering {\n\n\u3067\u3001\u8a71\u306f\u623b\u3063\u3066Ok(\"hello\")\u3001\u3053\u308c\u306fStatus\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9Ok\u306b(\"hello\")\u3068\u3084\u3063\u3066\u3044\u308b\u308f\u3051\u3067\u3001\u8981\u306fStatus#apply\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u3002\ndef apply[C](content: C)(implicit writeable: Writeable[C]): Result = {\n  Result(\n    ResponseHeader(status, writeable.contentType.map(ct => Map(CONTENT_TYPE -> ct)).getOrElse(Map.empty)),\n    Enumerator(writeable.transform(content))\n  )\n}\n\n\u3053\u3053\u3067\u5b9f\u969b\u306bResult\u3092\u751f\u6210\u3057\u3066\u8fd4\u3057\u3066\u3044\u308b\u3002\nstatus\u30b3\u30fc\u30c9\u3001content-type\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u30dc\u30c7\u30a3\u90e8\u304c\u5b9a\u7fa9\u3055\u308c\u308b\u3002\nWriteable\u306f\u578b\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u578b\u306b\u5fdc\u3058\u305f\u9069\u5207\u306a\u3082\u306e\u304c\u9069\u7528\u3055\u308c\u308b\u3002\n\u4eca\u56de\u306f\"hello\"\u3092\u6e21\u3057\u3066\u3044\u308b\u306e\u3067content\u306fString\u578b\u3068\u306a\u308aWriteable[String]\u3068\u306a\u308b\u3002\n\u3053\u306e\u4ed6\u306b\u3001Writeable[JsValue]\u3001Writeable[Xml]\u3001Writeable[Array[Byte]]\u306a\u3069\u304c\u3042\u308b\u3002\n\nAction\n\u6b21\u306bAction\u90e8\u3002\nAction {\n  Ok(\"hello\")\n}\n\n\u3053\u308c\u306fobject Action\u306eapply\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u3002\nAction\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5ba3\u8a00\u90e8\u306f\u4ee5\u4e0b\u3002\nobject Action extends ActionBuilder[Request] {\n  def invokeBlock[A](request: Request[A], block: (Request[A]) => Future[Result]) = block(request)\n}\n\n\u3053\u3053\u3067\u306fapply\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u5b9f\u969b\u306f\u7d99\u627f\u5143\u306eActionBuilder\u306eapply\u304c\u547c\u3070\u308c\u3066\u3044\u308b\u3002\nfinal def apply(block: => Result): Action[AnyContent] = apply(_ => block)\n\napply\u306e\u5f15\u6570\u306fResult\u3002\nAnyContent\u306aAction\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8fd4\u3059\u306e\u304c\u3053\u306eapply\u95a2\u6570\u3060\u3068\u3044\u3046\u3053\u3068\u304c\u5206\u304b\u308b\u3002\n\u3055\u3089\u306b\u30c1\u30a7\u30fc\u30f3\u3057\u3066\u3001\nfinal def apply(block: R[AnyContent] => Result): Action[AnyContent] = apply(BodyParsers.parse.anyContent)(block)\n\n\u5192\u982d\u306e\u4f8b\u306e\u3053\u3063\u3061\u306e\u30bf\u30a4\u30d7\u306a\u3089\u4e0a\u8a18apply\u304b\u3089\u59cb\u307e\u308b\u3002Request\u3092\u53d7\u3051\u53d6\u3063\u3066Result\u3092\u8fd4\u3059\u95a2\u6570\u304c\u5f15\u6570\u3002\nAction{ request =>\n  Ok(\"Got [\" + request.body + \"]\")\n}\n\n\u3055\u3089\u306b\u30c1\u30a7\u30fc\u30f3\u3057\u3066\u3001\nfinal def apply[A](bodyParser: BodyParser[A])(block: R[A] => Result): Action[A] = async(bodyParser) { req: R[A] =>\n    Future.successful(block(req))\n\nbodyParser\u304c\u767b\u5834\u3002\u3053\u3053\u306f\u6700\u5f8c\u306b\u53d6\u308a\u4e0a\u3052\u308b\u304c\u3001\u5f79\u5272\u306fHTTP\u30ea\u30af\u30a8\u30b9\u30c8\u306ebody\u90e8\u3092\u30d1\u30fc\u30b9\u3057\u3066Array[Byte]\u304b\u3089String\u3084Xml\u3092\u751f\u6210\u3059\u308b\u3053\u3068\u3002\n\u3055\u3089\u306b\u30c1\u30a7\u30fc\u30f3\u3057\u3066\u3001\nfinal def async[A](bodyParser: BodyParser[A])(block: R[A] => Future[Result]): Action[A] = composeAction(new Action[A] {\n  def parser = composeParser(bodyParser)\n  def apply(request: Request[A]) = try {\n    invokeBlock(request, block)\n  } catch {\n    // NotImplementedError is not caught by NonFatal, wrap it\n    case e: NotImplementedError => throw new RuntimeException(e)\n    // LinkageError is similarly harmless in Play Framework, since automatic reloading could easily trigger it\n    case e: LinkageError => throw new RuntimeException(e)\n  }\n  override def executionContext = ActionBuilder.this.executionContext\n})\n\n\u3053\u308c\u304capply\u30c1\u30a7\u30fc\u30f3\u306e\u6700\u5f8c\u3067\u3001\u3053\u3053\u3067\u3088\u3046\u3084\u304fAction\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u751f\u6210\u3055\u308c\u3066\u8fd4\u308b\u3053\u3068\u306b\u306a\u308b\u3002\n\u306a\u304a\u3001async\u3068\u3044\u3046\u3053\u3068\u3067\u623b\u308a\u3082\u3053\u308c\u307e\u3067\u306eResult\u304b\u3089Future[Result]\u306b\u306a\u3063\u3066\u3044\u308b\u3082\u306e\u306e\u3001\u3053\u306eapply\u304c\u547c\u3070\u308c\u308b\u524d\u306eapply\u3067\u3001Future.successful(block(req))\u3068\u3084\u3063\u3066\u3044\u308b\u3053\u3068\u304b\u3089\u5b9f\u884c\u6e08\u307fFuture\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\u306e\u3067(\u901a\u5e38\u547c\u3073\u51fa\u3057\u6642\u306f)\u672c\u30b9\u30ec\u30c3\u30c9\u3068\u5225\u306bblock\u304c\u4e26\u5217\u5b9f\u884c\u3055\u308c\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u4e8b\u304c\u308f\u304b\u308b\u3002\nAction\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306einvokeBlock\u3067\u5b9a\u7fa9\u3057\u305fblock\u304c\u4f7f\u308f\u308c\u3066\u3044\u308b\u306e\u304c\u898b\u3066\u53d6\u308c\u308b\u3002Action\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306bRequest\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u6e21\u3063\u3066\u304d\u305f\u6642\u306b\u5b9a\u7fa9\u3057\u305fblock\u90e8\u304c\u5b9f\u884c\u3055\u308c\u308b\u3002\n\n\u307e\u3068\u3081\n\u4e00\u5ea6\u3053\u3053\u3067\u307e\u3068\u3081\u308b\u3068\u3001\u4e0a\u8a18\u3067\u3082\u5c11\u3057\u89e6\u308c\u305f\u304c\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u306f\u3001\ndef echo = Action { request =>\n  Ok(\"Got [\" + request.body + \"]\")\n}\n\nobject Action\u306eapply\u306bRequest => Result\u306a\u95a2\u6570\u3092\u6e21\u3059\u3053\u3068\u3067Action\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u3053\u3068\u3002\n\u5b9f\u969b\u306b\u51e6\u7406\u3055\u308c\u308bAction\u30af\u30e9\u30b9\u306e\u65b9\u306eapply\u3092\u898b\u3066\u307f\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\ndef apply(rh: RequestHeader): Iteratee[Array[Byte], Result] = parser(rh).mapM {\n  case Left(r) =>\n    Play.logger.trace(\"Got direct result from the BodyParser: \" + r)\n    Future.successful(r)\n  case Right(a) =>\n    val request = Request(rh, a)\n    Play.logger.trace(\"Invoking action with request: \" + request)\n    Play.maybeApplication.map { app =>\n      play.utils.Threads.withContextClassLoader(app.classloader) {\n        apply(request)\n      }\n    }.getOrElse {\n      apply(request)\n    }\n}(executionContext)\n\n\u3053\u3053\u3092\u7406\u89e3\u3059\u308b\u306b\u306fBodyParser\u3092\u7406\u89e3\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3060\u3002\n\nBodyParser\u3068AnyContent\n\u9577\u304f\u306a\u3063\u305f\u306e\u3067\u5206\u3051\u307e\u3057\u305f\u3002\n\u7d9a\u304d\u306f\u3053\u3061\u3089\u3002\n# \u4eca\u56de\u306e\u30b4\u30fc\u30eb\n\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u306e\u821e\u53f0\u88cf\u3092\u7406\u89e3\u3059\u308b\u3053\u3068\u304c\u4eca\u56de\u306e\u30b4\u30fc\u30eb\u3002\n\n\n```scala\nval hello = Action {\n  Ok(\"hello\")\n}\n\ndef echo = Action { request =>\n  Ok(\"Got [\" + request.body + \"]\")\n}\n```\n\n\u306a\u304a\u3001\u5bfe\u8c61\u306ePlay Framework\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f2.3.2\u3002\n\n# \u306f\u3058\u3081\u306b\nAction\u304c\u3084\u308b\u3053\u3068\u306f\u4e00\u8a00\u3067\u3044\u3046\u3068HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u53d6\u3063\u3066HTTP\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3059\u3001\u8981\u306f\u3053\u308c\u3002\nPlay Framework\u3067\u3053\u308c\u3092\u5b9f\u65bd\u3059\u308b\u306b\u3042\u305f\u3063\u3066HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3068HTTP\u30ec\u30b9\u30dd\u30f3\u30b9\u306b\u8a72\u5f53\u3059\u308b\u3082\u306e\u3092\u5148\u306b\u6574\u7406\u3057\u3066\u304a\u304f\u3002\n\n## HTTP\u30ea\u30af\u30a8\u30b9\u30c8\n- [play.api.mvc.RequestHeader](http://www.playframework.com/documentation/2.3.0/api/scala/index.html#play.api.mvc.RequestHeader)\n- [play.api.mvc.Request](http://www.playframework.com/documentation/2.3.0/api/scala/index.html#play.api.mvc.Request)\n\nRequest\u306fRequestHeader\u3092\u7d99\u627f\u3057\u3066\u304a\u308a\u3001\u4e21\u8005\u306e\u9055\u3044\u306f\u524d\u8005\u304cbody\u306a\u3057\u3001\u5f8c\u8005\u306fbody\u3042\u308a\u3068\u3044\u3046\u3053\u3068\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u305f\u969b\u306erequest\u306e\u578b\u306f\u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u90e8\u306e\u30d1\u30fc\u30b9\u304c\u884c\u308f\u308c\u305f\u5f8c\u8005\u306eRequest\u578b\u306e\u65b9\u3068\u306a\u308b\u3002\n\n```\ndef myAction = Action { request =>\n```\n\n\u203b\u4f46\u3057\u3001Request\u578b\u3068\u3044\u3063\u3066\u3082GET\u6642\u306f\u305d\u3082\u305d\u3082body\u304c\u7121\u3044\u306e\u3067```body.asText```\u3068\u3084\u3063\u3066\u3082\u4f55\u3082\u53d6\u308c\u306a\u3044\u3002\n\n## HTTP\u30ec\u30b9\u30dd\u30f3\u30b9\n- [play.api.mvc.Result](http://www.playframework.com/documentation/2.3.0/api/scala/index.html#play.api.mvc.Result)\n\nResult\u306e\u5b9a\u7fa9\u306f\u4ee5\u4e0b\u3067\u3001\u69cb\u6210\u8981\u7d20\u3068\u3057\u3066\u4e3b\u306b\u30ec\u30b9\u30dd\u30f3\u30b9\u30d8\u30c3\u30c0\u3068\u30d0\u30a4\u30c8\u914d\u5217\u306e\u30dc\u30c7\u30a3\u304b\u3089\u306a\u308b\u3053\u3068\u304c\u5206\u304b\u308b\u3002\n\n```scala\ncase class Result(header: ResponseHeader, body: Enumerator[Array[Byte]], connection: HttpConnection.Connection = HttpConnection.KeepAlive) {\n```\n\nEnumerator\u3067\u304f\u308b\u307e\u308c\u3066\u3044\u308b\u306e\u306f\u3001\u901a\u5e38HTTP\u30ec\u30b9\u30dd\u30f3\u30b9\u306fArray[Byte]\u304c\u4e00\u767a\u3067\u8fd4\u308b\u3068\u3044\u3046\u3088\u308a\u3082\u3080\u3057\u308d\u8907\u6570\u56de\u306b\u5206\u3051\u3066\u8fd4\u3055\u308c\u308b\u3053\u3068\u304c\u591a\u3044\u304b\u3089\u3067\u3001\u305d\u306e\u8fba\u306e\u4ed5\u7d44\u307f\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u3002\n\u3082\u3061\u308d\u3093\u30ec\u30b9\u30dd\u30f3\u30b9\u3060\u3051\u3067\u306a\u304f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u3082\u540c\u69d8\u3067\u3042\u308b\u3002\n\u3053\u3053\u306b\u3064\u3044\u3066\u306f\u300c\u3084\u3055\u3057\u3044Iteratee\u5165\u9580\u300d\u304c\u5206\u304b\u308a\u3084\u3059\u3044\u306e\u3067\u8aad\u307f\u307e\u3057\u3087\u3046\u3002\nhttp://www.slideshare.net/TakashiKawachi/iteratee\n\n# Ok(\"hello\")\n\u3055\u3066\u3001```Ok(\"hello\")```\u306e\u90e8\u5206\u304b\u3089\u898b\u3066\u3044\u304f\u3053\u3068\u306b\u3059\u308b\u3002\n\n\u3053\u306eOk\u306f[Results\u30c8\u30ec\u30a4\u30c8\u5185](https://github.com/playframework/playframework/blob/2.3.0/framework/src/play/src/main/scala/play/api/mvc/Results.scala#L572-L703)\u306b\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308bStatus\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3042\u308b\u3002\n\n```scala\n/** Generates a \u2018200 OK\u2019 result. */\nval Ok = new Status(OK)\n```\n\n\u3053\u306e\u4ed6\u306b\u3082NotFound(404)\u3084ServiceUnavailable(503)\u306a\u3069\u3082\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002\n\n\u3053\u306eStatus\u3068\u3044\u3046\u30af\u30e9\u30b9\u306f\u540c\u3058\u304fResults\u30c8\u30ec\u30a4\u30c8\u5185\u306b\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3002\n\n```scala\nclass Status(status: Int) extends Result(header = ResponseHeader(status), body = Enumerator.empty, connection = HttpConnection.KeepAlive) {\n```\n\n\u306a\u304a\u3001```new Status(OK)```\u306eOK\u306f\u4ee5\u4e0b\u306eStandardValues.scala\u306b\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u3001Status\u306e\u5b9a\u6570\u3002\nhttps://github.com/playframework/playframework/blob/2.3.0/framework/src/play/src/main/scala/play/api/http/StandardValues.scala\n\nStandardValues.scala\u306b\u306f\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u8868\u3059Status\u4ee5\u5916\u306b\u3082\n\n- MimeTypes(\"text/html\"\u3084\"application/octet-stream\"\u306a\u3069)\n- ContentTypes(\"text/html; charset=utf-8\"\u306a\u3069)\n- HttpVerbs(\"GET\"\u3084\"POST\"\u306a\u3069)\n- HeaderNames(\"Accept-Language\"\u3084\"ETag\"\u306a\u3069)\n- HttpProtocols(\"HTTP/1.1\"\u306a\u3069)\n\n\u3068\u3044\u3063\u305f\u5404\u7a2e\u5b9a\u6570\u30af\u30e9\u30b9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\u3053\u308c\u3089trait\u306fController\u306bmix-in\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u4f7f\u7528\u3057\u305f\u3044\u5834\u5408\u306fAtion\u5b9a\u7fa9\u6642\u306bimport\u306a\u3057\u3067\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3002\u899a\u3048\u3066\u304a\u304f\u3068\u3044\u3044\u3060\u308d\u3046\u3002\n\n```scala\ntrait Controller extends Results with BodyParsers with HttpProtocol with Status with HeaderNames with ContentTypes with RequestExtractors with Rendering {\n```\n\n\u3067\u3001\u8a71\u306f\u623b\u3063\u3066```Ok(\"hello\")```\u3001\u3053\u308c\u306fStatus\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9Ok\u306b(\"hello\")\u3068\u3084\u3063\u3066\u3044\u308b\u308f\u3051\u3067\u3001\u8981\u306fStatus#apply\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u3002\n\n```scala\ndef apply[C](content: C)(implicit writeable: Writeable[C]): Result = {\n  Result(\n    ResponseHeader(status, writeable.contentType.map(ct => Map(CONTENT_TYPE -> ct)).getOrElse(Map.empty)),\n    Enumerator(writeable.transform(content))\n  )\n}\n```\n\n\u3053\u3053\u3067\u5b9f\u969b\u306bResult\u3092\u751f\u6210\u3057\u3066\u8fd4\u3057\u3066\u3044\u308b\u3002\nstatus\u30b3\u30fc\u30c9\u3001content-type\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u30dc\u30c7\u30a3\u90e8\u304c\u5b9a\u7fa9\u3055\u308c\u308b\u3002\n\nWriteable\u306f\u578b\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u578b\u306b\u5fdc\u3058\u305f\u9069\u5207\u306a\u3082\u306e\u304c\u9069\u7528\u3055\u308c\u308b\u3002\n\u4eca\u56de\u306f\"hello\"\u3092\u6e21\u3057\u3066\u3044\u308b\u306e\u3067content\u306fString\u578b\u3068\u306a\u308a[Writeable[String]](https://github.com/playframework/playframework/blob/2.3.0/framework/src/play/src/main/scala/play/api/http/Writeable.scala)\u3068\u306a\u308b\u3002\n\n\u3053\u306e\u4ed6\u306b\u3001Writeable[JsValue]\u3001Writeable[Xml]\u3001Writeable[Array[Byte]]\u306a\u3069\u304c\u3042\u308b\u3002\n\n# Action\n\u6b21\u306bAction\u90e8\u3002\n\n```scala\nAction {\n  Ok(\"hello\")\n}\n```\n\n\u3053\u308c\u306f[object Action](https://github.com/playframework/playframework/blob/2.3.0/framework/src/play/src/main/scala/play/api/mvc/Action.scala#L555-L557)\u306eapply\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u3002\nAction\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5ba3\u8a00\u90e8\u306f\u4ee5\u4e0b\u3002\n\n```scala\nobject Action extends ActionBuilder[Request] {\n  def invokeBlock[A](request: Request[A], block: (Request[A]) => Future[Result]) = block(request)\n}\n```\n\n\u3053\u3053\u3067\u306fapply\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u5b9f\u969b\u306f\u7d99\u627f\u5143\u306eActionBuilder\u306eapply\u304c\u547c\u3070\u308c\u3066\u3044\u308b\u3002\n\n```scala\nfinal def apply(block: => Result): Action[AnyContent] = apply(_ => block)\n```\n\napply\u306e\u5f15\u6570\u306fResult\u3002\nAnyContent\u306aAction\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8fd4\u3059\u306e\u304c\u3053\u306eapply\u95a2\u6570\u3060\u3068\u3044\u3046\u3053\u3068\u304c\u5206\u304b\u308b\u3002\n\u3055\u3089\u306b\u30c1\u30a7\u30fc\u30f3\u3057\u3066\u3001\n\n```scala\nfinal def apply(block: R[AnyContent] => Result): Action[AnyContent] = apply(BodyParsers.parse.anyContent)(block)\n```\n\n\u5192\u982d\u306e\u4f8b\u306e\u3053\u3063\u3061\u306e\u30bf\u30a4\u30d7\u306a\u3089\u4e0a\u8a18apply\u304b\u3089\u59cb\u307e\u308b\u3002Request\u3092\u53d7\u3051\u53d6\u3063\u3066Result\u3092\u8fd4\u3059\u95a2\u6570\u304c\u5f15\u6570\u3002\n\n```scala\nAction{ request =>\n  Ok(\"Got [\" + request.body + \"]\")\n}\n```\n\u3055\u3089\u306b\u30c1\u30a7\u30fc\u30f3\u3057\u3066\u3001\n\n```scala\nfinal def apply[A](bodyParser: BodyParser[A])(block: R[A] => Result): Action[A] = async(bodyParser) { req: R[A] =>\n    Future.successful(block(req))\n```\n\nbodyParser\u304c\u767b\u5834\u3002\u3053\u3053\u306f\u6700\u5f8c\u306b\u53d6\u308a\u4e0a\u3052\u308b\u304c\u3001\u5f79\u5272\u306fHTTP\u30ea\u30af\u30a8\u30b9\u30c8\u306ebody\u90e8\u3092\u30d1\u30fc\u30b9\u3057\u3066Array[Byte]\u304b\u3089String\u3084Xml\u3092\u751f\u6210\u3059\u308b\u3053\u3068\u3002\n\u3055\u3089\u306b\u30c1\u30a7\u30fc\u30f3\u3057\u3066\u3001\n\n```scala\nfinal def async[A](bodyParser: BodyParser[A])(block: R[A] => Future[Result]): Action[A] = composeAction(new Action[A] {\n  def parser = composeParser(bodyParser)\n  def apply(request: Request[A]) = try {\n    invokeBlock(request, block)\n  } catch {\n    // NotImplementedError is not caught by NonFatal, wrap it\n    case e: NotImplementedError => throw new RuntimeException(e)\n    // LinkageError is similarly harmless in Play Framework, since automatic reloading could easily trigger it\n    case e: LinkageError => throw new RuntimeException(e)\n  }\n  override def executionContext = ActionBuilder.this.executionContext\n})\n```\n\n\u3053\u308c\u304capply\u30c1\u30a7\u30fc\u30f3\u306e\u6700\u5f8c\u3067\u3001\u3053\u3053\u3067\u3088\u3046\u3084\u304fAction\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u751f\u6210\u3055\u308c\u3066\u8fd4\u308b\u3053\u3068\u306b\u306a\u308b\u3002\n\u306a\u304a\u3001async\u3068\u3044\u3046\u3053\u3068\u3067\u623b\u308a\u3082\u3053\u308c\u307e\u3067\u306eResult\u304b\u3089Future[Result]\u306b\u306a\u3063\u3066\u3044\u308b\u3082\u306e\u306e\u3001\u3053\u306eapply\u304c\u547c\u3070\u308c\u308b\u524d\u306eapply\u3067\u3001```Future.successful(block(req))```\u3068\u3084\u3063\u3066\u3044\u308b\u3053\u3068\u304b\u3089\u5b9f\u884c\u6e08\u307fFuture\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\u306e\u3067(\u901a\u5e38\u547c\u3073\u51fa\u3057\u6642\u306f)\u672c\u30b9\u30ec\u30c3\u30c9\u3068\u5225\u306bblock\u304c\u4e26\u5217\u5b9f\u884c\u3055\u308c\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u4e8b\u304c\u308f\u304b\u308b\u3002\n\nAction\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306einvokeBlock\u3067\u5b9a\u7fa9\u3057\u305fblock\u304c\u4f7f\u308f\u308c\u3066\u3044\u308b\u306e\u304c\u898b\u3066\u53d6\u308c\u308b\u3002Action\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306bRequest\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u6e21\u3063\u3066\u304d\u305f\u6642\u306b\u5b9a\u7fa9\u3057\u305fblock\u90e8\u304c\u5b9f\u884c\u3055\u308c\u308b\u3002\n\n## \u307e\u3068\u3081\n\u4e00\u5ea6\u3053\u3053\u3067\u307e\u3068\u3081\u308b\u3068\u3001\u4e0a\u8a18\u3067\u3082\u5c11\u3057\u89e6\u308c\u305f\u304c\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u306f\u3001\n\n```scala\ndef echo = Action { request =>\n  Ok(\"Got [\" + request.body + \"]\")\n}\n```\n\n**object Action\u306eapply\u306bRequest => Result\u306a\u95a2\u6570\u3092\u6e21\u3059\u3053\u3068\u3067Action\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3066\u3044\u308b**\u3068\u3044\u3046\u3053\u3068\u3002\n\n\u5b9f\u969b\u306b\u51e6\u7406\u3055\u308c\u308bAction\u30af\u30e9\u30b9\u306e\u65b9\u306e[apply](https://github.com/playframework/playframework/blob/master/framework/src/play/src/main/scala/play/api/mvc/Action.scala#L121-L135)\u3092\u898b\u3066\u307f\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n```scala\ndef apply(rh: RequestHeader): Iteratee[Array[Byte], Result] = parser(rh).mapM {\n  case Left(r) =>\n    Play.logger.trace(\"Got direct result from the BodyParser: \" + r)\n    Future.successful(r)\n  case Right(a) =>\n    val request = Request(rh, a)\n    Play.logger.trace(\"Invoking action with request: \" + request)\n    Play.maybeApplication.map { app =>\n      play.utils.Threads.withContextClassLoader(app.classloader) {\n        apply(request)\n      }\n    }.getOrElse {\n      apply(request)\n    }\n}(executionContext)\n```\n\n\u3053\u3053\u3092\u7406\u89e3\u3059\u308b\u306b\u306fBodyParser\u3092\u7406\u89e3\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3060\u3002\n\n# BodyParser\u3068AnyContent\n\u9577\u304f\u306a\u3063\u305f\u306e\u3067\u5206\u3051\u307e\u3057\u305f\u3002\n\u7d9a\u304d\u306f[\u3053\u3061\u3089](http://qiita.com/mtoyoshi/items/a5fcfb01a9bb56b2a492)\u3002\n", "tags": ["Scala", "PlayFramework", "Play2"]}