{"context": "\n\n\u306f\u3058\u3081\u306b\nAWS Lambda + API Gateway \u3067API\u3064\u304f\u3063\u3066React\u306e\u90e8\u5206\u306fS3\u306b\u7f6e\u3051\u3070\u8d85\u4f4e\u30b3\u30b9\u30c8\u3067SPA\u4f5c\u308c\u308b\u3093\u3058\u3083\u306d\uff01\uff1f\u3068\u3044\u3046\u601d\u3044\u3064\u304d\uff08\u307f\u3093\u306a\u6c17\u3065\u3044\u3066\u308b\uff09\u3092\u5b9f\u8df5\u3057\u3066\u307f\u305f\u8a18\u9332\u3067\u3059\u3002\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\n\nServerless v0.5.5\nReact v15.1.0\naws-cli v1.10.35\nNode.js v4.3\n\nServerless\u306f\u30d0\u30fc\u30b8\u30e7\u30f3\u6bce\u306b\u304b\u306a\u308a\u5dee\u7570\u304c\u5927\u304d\u3044\u3088\u3046\u306a\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\uff08\u6570\u30ab\u6708\u524d\u306b\u66f8\u304b\u308c\u305f\u8a18\u4e8b\u3092\u8aad\u3093\u3067\u3082\uff1f\uff1f\uff1f\u3068\u306a\u308b\u3053\u3068\u304c\u591a\u3044\uff09\u3002\nNode\u306e\u4ed6\u306bPython\u3067\u3082\u3044\u3051\u307e\u3059\u304c\u4eca\u56de\u306fNode\u3067\u3044\u304d\u307e\u3059\u3002Lambda\u306fNode v5~\u7cfb\u306b\u306f\u307e\u3060\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u3064\u304f\u308b\n\nAWS\u306eID\u3068\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u53d6\u5f97\u3059\u308b\nServerless - Configuring AWS \u306b\u66f8\u3044\u3066\u3042\u308b\u901a\u308a\u306b\u9032\u3081\u307e\u3059\u3002\u307e\u305f\u3001AWS\u306f\u65e5\u672c\u8a9e\u306b\u8a2d\u5b9a\u3057\u3066\u3042\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002\n\nAWS\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3088\u308aIAM\u8a2d\u5b9a\u30da\u30fc\u30b8\u3078\u884c\u304f\uff08\u898b\u3064\u304b\u3089\u306a\u3044\u5834\u5408\u306f\u4e0a\u90e8\u30ca\u30d3\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u51fa\u3066\u304f\u308b\"\u8a8d\u8a3c\u60c5\u5831\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\uff09\u3002\n\"\u30e6\u30fc\u30b6\u30fc\"\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300c\u65b0\u898f\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210\u300d\u306e\u9752\u3044\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3002\n\u30c6\u30ad\u30b9\u30c8\u30dc\u30c3\u30af\u30b9\u304c5\u3064\u307b\u3069\u8868\u793a\u3055\u308c\u308b\u306e\u3067 serverless-admin \u3068\u5165\u529b\u30571\u3064\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u4f5c\u6210\u304c\u5b8c\u4e86\u3059\u308b\u3068\u8a8d\u8a3c\u60c5\u5831\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u308b\u306e\u3067\u3053\u308c\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u307e\u305f\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u306a\u304f\u3066\u3082\u8a8d\u8a3c\u60c5\u5831\u3092\u8868\u793a\u3059\u308b\u3068\u30a2\u30af\u30bb\u30b9\u30ad\u30fcID\u3068\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u306e\u3067\u3053\u308c\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n\nServerless\u3092\u59cb\u3081\u308b\n$ npm install serverless -g\n$ serverless project create\n\nServerless: Initializing Serverless Project...\nServerless: Enter a name for this project:  (serverless-h1cjyg) serverless-react\nServerless: Enter a new stage name for this project:  (dev) dev\nServerless: For the \"dev\" stage, do you want to use an existing Amazon Web Services profile or create a new one?\n    Existing Profile\n  > Create A New Profile\nServerless: Please enter the ACCESS KEY ID for your Admin AWS IAM User:  XXXXXXXXXXXXXXX(\u5148\u307b\u3069\u4f5c\u3063\u305f)\nServerless: Enter the SECRET ACCESS KEY for your Admin AWS IAM User:  XXXXXXXXXXXXXXXXXXXXXXXXXXXXX(\u5148\u307b\u3069\u4f5c\u3063\u305f)\nServerless: Enter the name of your new profile:  (serverless-react_dev) serverless-admin\uff08\u4f5c\u3063\u305fIAM\u306e\u540d\u524d)\nServerless: Creating stage \"dev\"...\nServerless: Select a new region for your stage:\n    us-east-1\n    us-west-2\n    eu-west-1\n    eu-central-1\n  > ap-northeast-1\nServerless: Creating region \"ap-northeast-1\" in stage \"dev\"...\nServerless: Deploying resources to stage \"dev\" in region \"ap-northeast-1\" via Cloudformation (~3 minutes)...\n\n\u4eca\u56de\u306f\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u304b\u3057\u307e\u3059\u306e\u3067\u3053\u3093\u306a\u611f\u3058\u306b\u8cea\u554f\u306b\u7b54\u3048\u307e\u3059\u3002\u8a8d\u8a3c\u304c\u3046\u307e\u304f\u3044\u3051\u3070\nServerless: Successfully deployed \"dev\" resources to \"ap-northeast-1\"\nServerless: Successfully created region \"ap-northeast-1\" within stage \"dev\"\nServerless: Successfully created stage \"dev\"\nServerless: Successfully initialized project \"serverless-react\"\n\n\u3053\u3093\u306a\u8868\u793a\u304c\u51fa\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u4f5c\u3089\u308c\u307e\u3059\u3002\n\nLambda function\u3068API\u3092\u3064\u304f\u308b\n\ncurl\u3067\u52d5\u304b\u3059\n\u65e9\u901f\u3067\u304d\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3001\u6b21\u306e\u3088\u3046\u306b\u64cd\u4f5c\u3057\u307e\u3059\u3002\n$ serverless function create functions/hello\n  > nodejs4.3\n    python2.7\n    nodejs (v0.10, soon to be deprecated)\nServerless: For this new Function, would you like to create an Endpoint, Event, or just the Function?\n  > Create Endpoint\n    Create Event\n    Just the Function...\nServerless: Successfully created function: \"functions/hello\"\n\n\u3053\u308c\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4ee5\u4e0b\u306bfunctions\u3001\u305d\u306e\u4e0b\u306bhello\u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u4f5c\u3089\u308c\u308b\u306e\u3067\u305d\u3053\u3078\u79fb\u52d5\u3057\u3001\u304a\u3082\u3080\u308d\u306b\u4eca\u4f5c\u3063\u305f\u95a2\u6570\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n$ serverless function run\nServerless: Running hello...\nServerless: -----------------\nServerless: Success! - This Response Was Returned:\nServerless: {\n    \"message\": \"Go Serverless! Your Lambda function executed successfully!\"\n}\n\n\u3046\u307e\u304f\u52d5\u304d\u307e\u3057\u305f\u3002\u6b21\u306b\u3053\u308c\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n$ serverless function deploy\nServerless: Deploying the specified functions in \"dev\" to the following regions: ap-northeast-1\nServerless: ------------------------\nServerless: Successfully deployed the following functions in \"dev\" to the following regions:\nServerless: ap-northeast-1 ------------------------\nServerless:   hello (serverless-react-hello): arn:aws:lambda:ap-northeast-1:xxxxxxxxxx:function:serverless-react-hello:dev\n\n\u3053\u308c\u3067\u3082\u3046AWS\u306eWeb\u30b3\u30f3\u30bd\u30fc\u30eb\u4e0a\u3067\u3053\u306eLambda\u95a2\u6570\u3092\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u304c\u3001\u305d\u3053\u3092\u98db\u3070\u3057\u3066\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3082\u4f5c\u308a\u307e\u3059\u3002\n$ serverless endpoint deploy\n\nServerless: Deploying endpoints in \"dev\" to the following regions: ap-northeast-1\nServerless: Successfully deployed endpoints in \"dev\" to the following regions:\nServerless: ap-northeast-1 ------------------------\nServerless:   GET - hello - https://xxxxxxxxxx.execute-api.ap-northeast-1.amazonaws.com/dev/hello\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306bURL\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3053\u308c\u3092\u53e9\u3044\u3066\u307f\u307e\u3059\u3002\n$ curl https://xxxxxxxxxx.execute-api.ap-northeast-1.amazonaws.com/dev/hello\n{\"message\":\"Go Serverless! Your Lambda function executed successfully!\"}\n\nAPI\u304c\u5b8c\u6210\u3057\u307e\u3057\u305f\u3002\u3053\u306e\u30b3\u30fc\u30c9\u306e\u5b9f\u4f53\u306fhandler.js\u306b\u3042\u308a\u307e\u3059\u306e\u3067\u5c11\u3057\u7de8\u96c6\u3057\u3066\u307f\u307e\u3059\u3002\n\nhandler.js\n'use strict';\n\nmodule.exports.handler = function(event, context, cb) {\n  return cb(null, {\n    message: 'Go Serverless! Your Lambda function executed successfully!' //\u3053\u3053\u3092\n  });\n};\n\n\n\nhandler.js\n'use strict';\n\nmodule.exports.handler = function(event, context, cb) {\n  return cb(null, {\n    message: 'Hello Serverless and React!' //\u3053\u3046\n  });\n};\n\n\n\u540c\u3058\u3088\u3046\u306b serverless function deploy \u3057\u3001\u540c\u3058API\u3092\u53e9\u3044\u3066\u307f\u308b\u3068\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u5909\u308f\u3063\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\nCORS\u306b\u5bfe\u5fdc\u3059\u308b\n\u3053\u306e\u307e\u307e\u3060\u3068\u3001API\u3068\u540c\u3058\u30aa\u30ea\u30b8\u30f3\u304b\u3089\u3067\u306a\u3044\u3068Cross-Origin Resource Sharing\uff08CORS\uff09\u306b\u5f15\u3063\u304b\u304b\u3063\u3066\u958b\u767a\u6642\u306b\u9762\u5012\u306a\u305f\u3081\u5236\u9650\u3092\u7de9\u548c\u3057\u307e\u3059\uff08\u5225\u30c9\u30e1\u30a4\u30f3\u306bXHR\u3059\u308b\u3068\u5931\u6557\u3059\u308b\u30a2\u30ec\u3067\u3059\uff09\u3002\nServerless\u306b\u306f serverless-cors-plugin \u3068\u3044\u3046\u4fbf\u5229\u306a\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u3042\u308b\u306e\u3067\u3053\u308c\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n$ npm install serverless-cors-plugin -S\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306e s-project.json \u3092\u7de8\u96c6\u3057\u3066 plugins \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\ns-project.json\n  \"plugins\": [\"serverless-cors-plugin\"]\n\n\n\u5148\u307b\u3069\u4f5c\u3063\u305f hello \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u623b\u308a\u3001 s-function.json \u3092\u7de8\u96c6\u3057\u3066 cors \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\ns-function.json\n  \"custom\": {\n    \"excludePatterns\": [],\n    \"cors\": {\n      \"allowOrigin\": \"*\"\n    }\n  },\n\n\n\u3053\u308c\u3067 serverless endpoint deploy \u3059\u308c\u3070\u5b8c\u4e86\u3067\u3059\u3002\n\nReact\u3067Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u3064\u304f\u308b\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306b\u623b\u308a\u3001React\u3067\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002React\u306e\u8a73\u3057\u3044\u89e3\u8aac\u306f\uff08\u81ea\u4fe1\u304c\u306a\u304f\uff09\u7701\u304d\u307e\u3059\u306e\u3067\u4ed6\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u4eca\u56de\u306fWebpack\u3092\u4f7f\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n$ npm install webpack webpack-dev-server babel-core babel-loader babel-preset-es2015 babel-preset-react -D\n$ npm install react react-dom react-redux redux redux-thunk isomorphic-fetch -S\n\n\u5fc5\u8981\u306anpm\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\nwebpack-web-server \u306f watchify \u7684\u306a\u3053\u3068\u3092\u3084\u3063\u3066\u304f\u308c\u308b\u306e\u3067\u958b\u767a\u6642\u306b\u5927\u5909\u4fbf\u5229\u3067\u3059\u3002\u307e\u305f\u3001\u7279\u306b\u8aac\u660e\u3092\u305b\u305a redux \u3092\u4f7f\u3063\u3066\u3044\u304d\u307e\u3059\u304c\u305d\u3061\u3089\u3082\u4ed6\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u3066\u9802\u3051\u308b\u3068\u52a9\u304b\u308a\u307e\u3059\u3002\nReact\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f serverless-react/client/src \u4ee5\u4e0b\u306b\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u304c\u3001\u307e\u305a serverless-react/webpack.config.js \u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\nwebpack.config.js\nmodule.exports = {\n    entry: './client/src/index.jsx',\n\n    output: {\n        path: './client/dist',\n        filename: 'bundle.js',\n        publicPath: ''\n    },\n\n    module: {\n        loaders: [{\n            test: /\\.jsx?$/,\n            exclude: [ /node_modules/, /functions/ ],\n            loader: 'babel',\n            query: {\n                presets: ['es2015', 'react']\n            }\n        }]\n    }\n};\n\n\n\u6b21\u306bpackage.json\u306b\u8ffd\u8a18\u3057\u307e\u3059\u3002\n\npackage.json\n  \"scripts\": {\n    \"start\": \"webpack-dev-server --inline --content-base client/dist\",\n    \"build\": \"webpack\"\n  },\n\n\n\u30d3\u30eb\u30c9\u3057\u305fjs\u3092\u8aad\u307f\u8fbc\u3080html\u3092 client/dist/index.html \u3068\u3057\u3066\u4f5c\u308a\u307e\u3059\u3002\n\nclient/dist/index.html\n<!doctype html>\n<html lang=\"ja\">\n    <head>\n        <title>Serverless + React</title>\n    </head>\n    <body>\n        <div id=\"app\"></div>\n        <script src=\"bundle.js\"></script>\n    </body>\n</html>\n\n\nindex.jsx, app.jsx, actions.js, reducer.js \u3092 client/src \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306b\u4f5c\u308a\u307e\u3059\u3002\n\nclient/src/index.jsx\nimport React from 'react';\nimport { render } from 'react-dom';\nimport { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { Provider } from 'react-redux';\n\nimport App from './app.jsx';\nimport reducer from './reducer';\n\nconst createStoreWithMiddleware = applyMiddleware(thunk)(createStore);\nconst store = createStoreWithMiddleware(reducer);\n\nrender(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById('app')\n);\n\n\n\nclient/src/app.jsx\nimport React from 'react';\nimport { connect } from 'react-redux';\n\nimport { fetchHello } from './actions';\n\nclass App extends React.Component {\n    constructor() {\n        super();\n        this.onClickHello = this.onClickHello.bind(this);\n    }\n\n    onClickHello() {\n        this.props.dispatch(fetchHello());\n    }\n\n    render() {\n        return (\n            <div>\n                <h1>{this.props.message}</h1>\n                <button onClick={this.onClickHello}>Hello</button>\n                <div>\n                    {this.props.isFetching ? 'Fetching...' : ''}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default connect((state) => {\n    return {\n        message: state.message,\n        isFetching: state.isFetching\n    };\n})(App);\n\n\n\nclient/src/actions.js\nimport fetch from 'isomorphic-fetch';\n\nexport const REQUEST = 'REQUEST';\nfunction request() {\n    return {\n        type: REQUEST\n    };\n}\n\nexport const RECEIVE = 'RECEIVE';\nfunction recieve(result) {\n    return {\n        type: RECEIVE,\n        message: result.message\n    };\n}\n\nexport function fetchHello() {\n    return (dispatch) => {\n        dispatch(request());\n\n        return fetch('https://xxxxxxxxxx.execute-api.ap-northeast-1.amazonaws.com/dev/hello').then((response) => {\n            return response.json();\n        }).then((result) => {\n            return dispatch(recieve(result));\n        });\n    };\n}\n\n\n\nclient/src/reducer.js\nimport { REQUEST, RECEIVE } from './actions';\n\nconst initialState = {\n    isFetching: false,\n    message: 'This is React App.'\n};\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n    case REQUEST:\n        return Object.assign({}, state, {\n            isFetching: true\n        });\n    case RECEIVE:\n        return Object.assign({}, state, {\n            isFetching: false,\n            message: action.message\n        });\n    default:\n        return state;\n    }\n};\n\n\n\u3053\u308c\u3067React\u30a2\u30d7\u30ea\u306f\u3072\u3068\u307e\u305a\u5b8c\u6210\u306a\u306e\u3067\n$ npm start\n\n\u3068\u3057\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002\n\u6a19\u6e96\u3067\u3059\u3068 http://localhost:8080/ \u3067\u52d5\u3044\u3066\u3044\u307e\u3059\u306e\u3067\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\nHello\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u2026\n\n\u52d5\u3044\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\nS3\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\nReact\u3067\u66f8\u3044\u305f\u30a2\u30d7\u30ea\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\n$ npm run build\n\n\u5b8c\u4e86\u3059\u308b\u3068 client/dist \u306b bundle.js \u304c\u751f\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3068 index.html \u3092S3\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3068\u5b8c\u4e86\u3067\u3059\u3002Serverless\u306b\u306f\u3053\u308c\u3082\u3084\u3063\u3066\u304f\u308c\u308b serverless-client-s3 \u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3053\u308c\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n$ npm install serverless-client-s3 -S\n\n\u9069\u5f53\u306a\u540d\u524d\u3067S3\u306e\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u306b\u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u3063\u3066\u304a\u304d\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306e s-project.json \u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\ns-project.json\n  \"custom\": {\n    \"client\": {\n        \"bucketName\": \"foo\"\n    }\n  },\n  \"plugins\": [\n    \"serverless-cors-plugin\",\n    \"serverless-client-s3\"\n  ]\n\n\n\u6700\u5f8c\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u5b8c\u4e86\u3067\u3059\u3002\n$ serverless client deploy\n\n\u5b8c\u6210\u7269\u306f\u3053\u3061\u3089\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002Serverless + React\n\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089 Eiryyy/serverless-react\n\n\u96d1\u611f\n\nEC2\u3067Node.js\u52d5\u304b\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u306a\u304f\u6c17\u8efd\u306bSPA\u3092\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u305f\n\u30c7\u30d7\u30ed\u30a4\u304c\u7570\u5e38\u306b\u697d\nDynamoDB\u3092\u4f7f\u3048\u3070\u30ed\u30fc\u30b3\u30b9\u30c8\u306e\u307e\u307e\u3082\u3063\u3068\u3044\u308d\u3044\u308d\u3067\u304d\u308b\n\u4eca\u56de\u306f\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306b\u306f\u89e6\u308c\u3066\u3044\u306a\u3044\u304c\u4e00\u8003\u306e\u4f59\u5730\u304c\u3042\u308a\u305d\u3046\nReact+Redux\u306e\u524d\u63d0\u77e5\u8b58\u306f\u3042\u308b\u72b6\u614b\u3067\u3001Serverless\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066Qiita\u66f8\u304d\u306a\u304c\u30894\u6642\u9593\u5f37\u3067\u5b8c\u6210\n\n\n##\u306f\u3058\u3081\u306b\n\nAWS Lambda + API Gateway \u3067API\u3064\u304f\u3063\u3066React\u306e\u90e8\u5206\u306fS3\u306b\u7f6e\u3051\u3070\u8d85\u4f4e\u30b3\u30b9\u30c8\u3067SPA\u4f5c\u308c\u308b\u3093\u3058\u3083\u306d\uff01\uff1f\u3068\u3044\u3046\u601d\u3044\u3064\u304d\uff08\u307f\u3093\u306a\u6c17\u3065\u3044\u3066\u308b\uff09\u3092\u5b9f\u8df5\u3057\u3066\u307f\u305f\u8a18\u9332\u3067\u3059\u3002\n\n##\u30d0\u30fc\u30b8\u30e7\u30f3\n\n+ Serverless v0.5.5\n+ React v15.1.0\n+ aws-cli v1.10.35\n+ Node.js v4.3\n\nServerless\u306f\u30d0\u30fc\u30b8\u30e7\u30f3\u6bce\u306b\u304b\u306a\u308a\u5dee\u7570\u304c\u5927\u304d\u3044\u3088\u3046\u306a\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\uff08\u6570\u30ab\u6708\u524d\u306b\u66f8\u304b\u308c\u305f\u8a18\u4e8b\u3092\u8aad\u3093\u3067\u3082\uff1f\uff1f\uff1f\u3068\u306a\u308b\u3053\u3068\u304c\u591a\u3044\uff09\u3002\nNode\u306e\u4ed6\u306bPython\u3067\u3082\u3044\u3051\u307e\u3059\u304c\u4eca\u56de\u306fNode\u3067\u3044\u304d\u307e\u3059\u3002Lambda\u306fNode v5~\u7cfb\u306b\u306f\u307e\u3060\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\n##\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u3064\u304f\u308b\n\n### AWS\u306eID\u3068\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u53d6\u5f97\u3059\u308b\n\n[Serverless - Configuring AWS](http://docs.serverless.com/docs/configuring-aws) \u306b\u66f8\u3044\u3066\u3042\u308b\u901a\u308a\u306b\u9032\u3081\u307e\u3059\u3002\u307e\u305f\u3001AWS\u306f\u65e5\u672c\u8a9e\u306b\u8a2d\u5b9a\u3057\u3066\u3042\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002\n\n1. AWS\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3088\u308aIAM\u8a2d\u5b9a\u30da\u30fc\u30b8\u3078\u884c\u304f\uff08\u898b\u3064\u304b\u3089\u306a\u3044\u5834\u5408\u306f\u4e0a\u90e8\u30ca\u30d3\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u51fa\u3066\u304f\u308b\"\u8a8d\u8a3c\u60c5\u5831\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\uff09\u3002\n2. \"\u30e6\u30fc\u30b6\u30fc\"\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300c\u65b0\u898f\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210\u300d\u306e\u9752\u3044\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3002\n3. \u30c6\u30ad\u30b9\u30c8\u30dc\u30c3\u30af\u30b9\u304c5\u3064\u307b\u3069\u8868\u793a\u3055\u308c\u308b\u306e\u3067 `serverless-admin` \u3068\u5165\u529b\u30571\u3064\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n4. \u4f5c\u6210\u304c\u5b8c\u4e86\u3059\u308b\u3068\u8a8d\u8a3c\u60c5\u5831\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u308b\u306e\u3067\u3053\u308c\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u307e\u305f\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u306a\u304f\u3066\u3082\u8a8d\u8a3c\u60c5\u5831\u3092\u8868\u793a\u3059\u308b\u3068\u30a2\u30af\u30bb\u30b9\u30ad\u30fcID\u3068\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u306e\u3067\u3053\u308c\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n### Serverless\u3092\u59cb\u3081\u308b\n\n```\n$ npm install serverless -g\n$ serverless project create\n\nServerless: Initializing Serverless Project...\nServerless: Enter a name for this project:  (serverless-h1cjyg) serverless-react\nServerless: Enter a new stage name for this project:  (dev) dev\nServerless: For the \"dev\" stage, do you want to use an existing Amazon Web Services profile or create a new one?\n    Existing Profile\n  > Create A New Profile\nServerless: Please enter the ACCESS KEY ID for your Admin AWS IAM User:  XXXXXXXXXXXXXXX(\u5148\u307b\u3069\u4f5c\u3063\u305f)\nServerless: Enter the SECRET ACCESS KEY for your Admin AWS IAM User:  XXXXXXXXXXXXXXXXXXXXXXXXXXXXX(\u5148\u307b\u3069\u4f5c\u3063\u305f)\nServerless: Enter the name of your new profile:  (serverless-react_dev) serverless-admin\uff08\u4f5c\u3063\u305fIAM\u306e\u540d\u524d)\nServerless: Creating stage \"dev\"...\nServerless: Select a new region for your stage:\n    us-east-1\n    us-west-2\n    eu-west-1\n    eu-central-1\n  > ap-northeast-1\nServerless: Creating region \"ap-northeast-1\" in stage \"dev\"...\nServerless: Deploying resources to stage \"dev\" in region \"ap-northeast-1\" via Cloudformation (~3 minutes)...\n```\n\n\u4eca\u56de\u306f\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u304b\u3057\u307e\u3059\u306e\u3067\u3053\u3093\u306a\u611f\u3058\u306b\u8cea\u554f\u306b\u7b54\u3048\u307e\u3059\u3002\u8a8d\u8a3c\u304c\u3046\u307e\u304f\u3044\u3051\u3070\n\n```\nServerless: Successfully deployed \"dev\" resources to \"ap-northeast-1\"\nServerless: Successfully created region \"ap-northeast-1\" within stage \"dev\"\nServerless: Successfully created stage \"dev\"\nServerless: Successfully initialized project \"serverless-react\"\n```\n\n\u3053\u3093\u306a\u8868\u793a\u304c\u51fa\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u4f5c\u3089\u308c\u307e\u3059\u3002\n\n## Lambda function\u3068API\u3092\u3064\u304f\u308b\n\n### curl\u3067\u52d5\u304b\u3059\n\n\u65e9\u901f\u3067\u304d\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3001\u6b21\u306e\u3088\u3046\u306b\u64cd\u4f5c\u3057\u307e\u3059\u3002\n\n```\n$ serverless function create functions/hello\n  > nodejs4.3\n    python2.7\n    nodejs (v0.10, soon to be deprecated)\nServerless: For this new Function, would you like to create an Endpoint, Event, or just the Function?\n  > Create Endpoint\n    Create Event\n    Just the Function...\nServerless: Successfully created function: \"functions/hello\"\n```\n\n\u3053\u308c\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4ee5\u4e0b\u306b`functions`\u3001\u305d\u306e\u4e0b\u306b`hello`\u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u4f5c\u3089\u308c\u308b\u306e\u3067\u305d\u3053\u3078\u79fb\u52d5\u3057\u3001\u304a\u3082\u3080\u308d\u306b\u4eca\u4f5c\u3063\u305f\u95a2\u6570\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\n$ serverless function run\nServerless: Running hello...\nServerless: -----------------\nServerless: Success! - This Response Was Returned:\nServerless: {\n    \"message\": \"Go Serverless! Your Lambda function executed successfully!\"\n}\n```\n\n\u3046\u307e\u304f\u52d5\u304d\u307e\u3057\u305f\u3002\u6b21\u306b\u3053\u308c\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n```\n$ serverless function deploy\nServerless: Deploying the specified functions in \"dev\" to the following regions: ap-northeast-1\nServerless: ------------------------\nServerless: Successfully deployed the following functions in \"dev\" to the following regions:\nServerless: ap-northeast-1 ------------------------\nServerless:   hello (serverless-react-hello): arn:aws:lambda:ap-northeast-1:xxxxxxxxxx:function:serverless-react-hello:dev\n```\n\n\u3053\u308c\u3067\u3082\u3046AWS\u306eWeb\u30b3\u30f3\u30bd\u30fc\u30eb\u4e0a\u3067\u3053\u306eLambda\u95a2\u6570\u3092\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u304c\u3001\u305d\u3053\u3092\u98db\u3070\u3057\u3066\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3082\u4f5c\u308a\u307e\u3059\u3002\n\n```\n$ serverless endpoint deploy\n\nServerless: Deploying endpoints in \"dev\" to the following regions: ap-northeast-1\nServerless: Successfully deployed endpoints in \"dev\" to the following regions:\nServerless: ap-northeast-1 ------------------------\nServerless:   GET - hello - https://xxxxxxxxxx.execute-api.ap-northeast-1.amazonaws.com/dev/hello\n```\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u306bURL\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3053\u308c\u3092\u53e9\u3044\u3066\u307f\u307e\u3059\u3002\n\n```\n$ curl https://xxxxxxxxxx.execute-api.ap-northeast-1.amazonaws.com/dev/hello\n{\"message\":\"Go Serverless! Your Lambda function executed successfully!\"}\n```\n\nAPI\u304c\u5b8c\u6210\u3057\u307e\u3057\u305f\u3002\u3053\u306e\u30b3\u30fc\u30c9\u306e\u5b9f\u4f53\u306f`handler.js`\u306b\u3042\u308a\u307e\u3059\u306e\u3067\u5c11\u3057\u7de8\u96c6\u3057\u3066\u307f\u307e\u3059\u3002\n\n```javascript:handler.js\n'use strict';\n\nmodule.exports.handler = function(event, context, cb) {\n  return cb(null, {\n    message: 'Go Serverless! Your Lambda function executed successfully!' //\u3053\u3053\u3092\n  });\n};\n```\n\n```javascript:handler.js\n'use strict';\n\nmodule.exports.handler = function(event, context, cb) {\n  return cb(null, {\n    message: 'Hello Serverless and React!' //\u3053\u3046\n  });\n};\n```\n\n\u540c\u3058\u3088\u3046\u306b `serverless function deploy` \u3057\u3001\u540c\u3058API\u3092\u53e9\u3044\u3066\u307f\u308b\u3068\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u5909\u308f\u3063\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n### CORS\u306b\u5bfe\u5fdc\u3059\u308b\n\n\u3053\u306e\u307e\u307e\u3060\u3068\u3001API\u3068\u540c\u3058\u30aa\u30ea\u30b8\u30f3\u304b\u3089\u3067\u306a\u3044\u3068Cross-Origin Resource Sharing\uff08CORS\uff09\u306b\u5f15\u3063\u304b\u304b\u3063\u3066\u958b\u767a\u6642\u306b\u9762\u5012\u306a\u305f\u3081\u5236\u9650\u3092\u7de9\u548c\u3057\u307e\u3059\uff08\u5225\u30c9\u30e1\u30a4\u30f3\u306bXHR\u3059\u308b\u3068\u5931\u6557\u3059\u308b\u30a2\u30ec\u3067\u3059\uff09\u3002\nServerless\u306b\u306f [serverless-cors-plugin](https://github.com/joostfarla/serverless-cors-plugin) \u3068\u3044\u3046\u4fbf\u5229\u306a\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u3042\u308b\u306e\u3067\u3053\u308c\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n```\n$ npm install serverless-cors-plugin -S\n```\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306e `s-project.json` \u3092\u7de8\u96c6\u3057\u3066 `plugins` \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```javascript:s-project.json\n  \"plugins\": [\"serverless-cors-plugin\"]\n```\n\n\u5148\u307b\u3069\u4f5c\u3063\u305f `hello` \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u623b\u308a\u3001 `s-function.json` \u3092\u7de8\u96c6\u3057\u3066 `cors` \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```javascript:s-function.json\n  \"custom\": {\n    \"excludePatterns\": [],\n    \"cors\": {\n      \"allowOrigin\": \"*\"\n    }\n  },\n```\n\n\u3053\u308c\u3067 `serverless endpoint deploy` \u3059\u308c\u3070\u5b8c\u4e86\u3067\u3059\u3002\n\n## React\u3067Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u3064\u304f\u308b\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306b\u623b\u308a\u3001React\u3067\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002React\u306e\u8a73\u3057\u3044\u89e3\u8aac\u306f\uff08\u81ea\u4fe1\u304c\u306a\u304f\uff09\u7701\u304d\u307e\u3059\u306e\u3067\u4ed6\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u4eca\u56de\u306fWebpack\u3092\u4f7f\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n```\n$ npm install webpack webpack-dev-server babel-core babel-loader babel-preset-es2015 babel-preset-react -D\n$ npm install react react-dom react-redux redux redux-thunk isomorphic-fetch -S\n```\n\n\u5fc5\u8981\u306anpm\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\n`webpack-web-server` \u306f `watchify` \u7684\u306a\u3053\u3068\u3092\u3084\u3063\u3066\u304f\u308c\u308b\u306e\u3067\u958b\u767a\u6642\u306b\u5927\u5909\u4fbf\u5229\u3067\u3059\u3002\u307e\u305f\u3001\u7279\u306b\u8aac\u660e\u3092\u305b\u305a `redux` \u3092\u4f7f\u3063\u3066\u3044\u304d\u307e\u3059\u304c\u305d\u3061\u3089\u3082\u4ed6\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u3066\u9802\u3051\u308b\u3068\u52a9\u304b\u308a\u307e\u3059\u3002\n\nReact\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f `serverless-react/client/src` \u4ee5\u4e0b\u306b\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u304c\u3001\u307e\u305a `serverless-react/webpack.config.js` \u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```javascript:webpack.config.js\nmodule.exports = {\n    entry: './client/src/index.jsx',\n\n    output: {\n        path: './client/dist',\n        filename: 'bundle.js',\n        publicPath: ''\n    },\n\n    module: {\n        loaders: [{\n            test: /\\.jsx?$/,\n            exclude: [ /node_modules/, /functions/ ],\n            loader: 'babel',\n            query: {\n                presets: ['es2015', 'react']\n            }\n        }]\n    }\n};\n```\n\n\u6b21\u306b`package.json`\u306b\u8ffd\u8a18\u3057\u307e\u3059\u3002\n\n```javascript:package.json\n  \"scripts\": {\n    \"start\": \"webpack-dev-server --inline --content-base client/dist\",\n    \"build\": \"webpack\"\n  },\n```\n\n\u30d3\u30eb\u30c9\u3057\u305fjs\u3092\u8aad\u307f\u8fbc\u3080html\u3092 `client/dist/index.html` \u3068\u3057\u3066\u4f5c\u308a\u307e\u3059\u3002\n\n```html:client/dist/index.html\n<!doctype html>\n<html lang=\"ja\">\n    <head>\n        <title>Serverless + React</title>\n    </head>\n    <body>\n        <div id=\"app\"></div>\n        <script src=\"bundle.js\"></script>\n    </body>\n</html>\n```\n\n`index.jsx`, `app.jsx`, `actions.js`, `reducer.js` \u3092 `client/src` \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306b\u4f5c\u308a\u307e\u3059\u3002\n\n```javascript:client/src/index.jsx\nimport React from 'react';\nimport { render } from 'react-dom';\nimport { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { Provider } from 'react-redux';\n\nimport App from './app.jsx';\nimport reducer from './reducer';\n\nconst createStoreWithMiddleware = applyMiddleware(thunk)(createStore);\nconst store = createStoreWithMiddleware(reducer);\n\nrender(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.getElementById('app')\n);\n```\n\n```javascript:client/src/app.jsx\nimport React from 'react';\nimport { connect } from 'react-redux';\n\nimport { fetchHello } from './actions';\n\nclass App extends React.Component {\n    constructor() {\n        super();\n        this.onClickHello = this.onClickHello.bind(this);\n    }\n\n    onClickHello() {\n        this.props.dispatch(fetchHello());\n    }\n\n    render() {\n        return (\n            <div>\n                <h1>{this.props.message}</h1>\n                <button onClick={this.onClickHello}>Hello</button>\n                <div>\n                    {this.props.isFetching ? 'Fetching...' : ''}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default connect((state) => {\n    return {\n        message: state.message,\n        isFetching: state.isFetching\n    };\n})(App);\n```\n\n```javascript:client/src/actions.js\nimport fetch from 'isomorphic-fetch';\n\nexport const REQUEST = 'REQUEST';\nfunction request() {\n    return {\n        type: REQUEST\n    };\n}\n\nexport const RECEIVE = 'RECEIVE';\nfunction recieve(result) {\n    return {\n        type: RECEIVE,\n        message: result.message\n    };\n}\n\nexport function fetchHello() {\n    return (dispatch) => {\n        dispatch(request());\n\n        return fetch('https://xxxxxxxxxx.execute-api.ap-northeast-1.amazonaws.com/dev/hello').then((response) => {\n            return response.json();\n        }).then((result) => {\n            return dispatch(recieve(result));\n        });\n    };\n}\n```\n\n```javascript:client/src/reducer.js\nimport { REQUEST, RECEIVE } from './actions';\n\nconst initialState = {\n    isFetching: false,\n    message: 'This is React App.'\n};\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n    case REQUEST:\n        return Object.assign({}, state, {\n            isFetching: true\n        });\n    case RECEIVE:\n        return Object.assign({}, state, {\n            isFetching: false,\n            message: action.message\n        });\n    default:\n        return state;\n    }\n};\n```\n\n\u3053\u308c\u3067React\u30a2\u30d7\u30ea\u306f\u3072\u3068\u307e\u305a\u5b8c\u6210\u306a\u306e\u3067\n\n```\n$ npm start\n```\n\n\u3068\u3057\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002\n\u6a19\u6e96\u3067\u3059\u3068 http://localhost:8080/ \u3067\u52d5\u3044\u3066\u3044\u307e\u3059\u306e\u3067\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-07 1.24.13.png](https://qiita-image-store.s3.amazonaws.com/0/20695/bae28bba-2c58-f036-949f-fe76c6380910.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-07 1.24.13.png\")\n\nHello\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u2026\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-07 1.24.56.png](https://qiita-image-store.s3.amazonaws.com/0/20695/761fe244-73bb-4894-ba80-184c5abeba71.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-07 1.24.56.png\")\n\n\u52d5\u3044\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\n##S3\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\n\nReact\u3067\u66f8\u3044\u305f\u30a2\u30d7\u30ea\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\n\n```\n$ npm run build\n```\n\n\u5b8c\u4e86\u3059\u308b\u3068 `client/dist` \u306b `bundle.js` \u304c\u751f\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3068 `index.html` \u3092S3\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3068\u5b8c\u4e86\u3067\u3059\u3002Serverless\u306b\u306f\u3053\u308c\u3082\u3084\u3063\u3066\u304f\u308c\u308b [serverless-client-s3](https://github.com/serverless/serverless-client-s3) \u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3053\u308c\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n```\n$ npm install serverless-client-s3 -S\n```\n\n\u9069\u5f53\u306a\u540d\u524d\u3067S3\u306e\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u306b\u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u3063\u3066\u304a\u304d\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306e `s-project.json` \u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n```javascript:s-project.json\n  \"custom\": {\n    \"client\": {\n        \"bucketName\": \"foo\"\n    }\n  },\n  \"plugins\": [\n    \"serverless-cors-plugin\",\n    \"serverless-client-s3\"\n  ]\n```\n\n\u6700\u5f8c\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u5b8c\u4e86\u3067\u3059\u3002\n\n```\n$ serverless client deploy\n```\n\n\u5b8c\u6210\u7269\u306f\u3053\u3061\u3089\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002[Serverless + React](http://serverless-react.s3-website-ap-northeast-1.amazonaws.com/)\n\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089 [Eiryyy/serverless-react](https://github.com/Eiryyy/serverless-react)\n\n##\u96d1\u611f\n\n+ EC2\u3067Node.js\u52d5\u304b\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u306a\u304f\u6c17\u8efd\u306bSPA\u3092\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u305f\n+ \u30c7\u30d7\u30ed\u30a4\u304c\u7570\u5e38\u306b\u697d\n+ DynamoDB\u3092\u4f7f\u3048\u3070\u30ed\u30fc\u30b3\u30b9\u30c8\u306e\u307e\u307e\u3082\u3063\u3068\u3044\u308d\u3044\u308d\u3067\u304d\u308b\n+ \u4eca\u56de\u306f\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306b\u306f\u89e6\u308c\u3066\u3044\u306a\u3044\u304c\u4e00\u8003\u306e\u4f59\u5730\u304c\u3042\u308a\u305d\u3046\n+ React+Redux\u306e\u524d\u63d0\u77e5\u8b58\u306f\u3042\u308b\u72b6\u614b\u3067\u3001Serverless\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066Qiita\u66f8\u304d\u306a\u304c\u30894\u6642\u9593\u5f37\u3067\u5b8c\u6210\n\n", "tags": ["S3", "reactjs", "JavaScript", "lambda", "serverless"]}