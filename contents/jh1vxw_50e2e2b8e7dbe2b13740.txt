{"context": "\u3053\u306e\u8a18\u4e8b\u306f \u3055\u304f\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8 Advent Calendar 2016 22\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n\u305d\u308c\u306b\u3057\u3066\u3082\n\u306a\u3093\u3067\u3053\u306e\u30a2\u30c9\u30d9\u30f3\u30c8\u30ab\u30ec\u30f3\u30c0\u30fc\u3001\u3053\u3093\u306a\u306b\u3082\u76db\u308a\u4e0a\u304c\u3063\u3066\u308b\u3093\u3067\u3059\u304b\uff01\u67a0\u304c\u5168\u90e8\u57cb\u307e\u3063\u3066\u308b\u4e0a\u306b\u3055\u304f\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\uff08\u305d\u306e\uff12\uff09 Advent Calendar 2016\u306a\u3093\u3066\u306e\u3082\u3042\u308b\u3093\u3058\u3083\u306a\u3044\u3067\u3059\u304b\u3002\u306a\u3093\u3067\u3053\u3093\u306a\u306b\u30d3\u30c3\u30c1\u30ea\u306a\u306e\uff01\n\u203b \u30e6\u30fc\u30b6\u3055\u307e\u306b\u3082\u5bc4\u7a3f\u3044\u305f\u3060\u3044\u3066\u304a\u308a\u3001\u3042\u308a\u304c\u305f\u3044\u9650\u308a\u3067\u3059 m((__))m\n\u3048\u30fc\u3001\u9591\u8a71\u4f11\u984c\u9591\u8a71\u4f11\u984c\u3002\n\u4eca\u56de\u306f\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u63a5\u7d9a\u306e\u8a71\u3067\u3059\u3002\u5b9f\u306f\u3053\u306e\u8a71\u3001\u307e\u3060\u516c\u306b\u306f\u306a\u3063\u3066\u306a\u3044\u3093\u3067\u3059\u304c\u3001AWS Direct Connect \u3092\u7d4c\u7531\u3057\u3066\u3055\u304f\u3089\u306e\u5404\u30b5\u30fc\u30d3\u30b9\u304b\u3089\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u63a5\u7d9a\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3088\u3046\u3068\u691c\u8a0e\u3057\u3066\u3044\u308b\u8a71\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u3064\u307e\u308a\u3069\u3046\u3044\u3046\u3053\u3068\u306a\u3093\u3060\u3063\u3066\u3070\u3088\uff1f\n\u3053\u308c\u3092\u3053\u3046\u3057\u3066\u3053\u3046\u3058\u3083\uff01\n\n\u5f15\u7528\u5143\uff1ahttp://nextcloud.tokyo/?p=374\nDirect Connect\u306b\u3088\u3063\u3066AWS\u3068\u3055\u304f\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u304c\u9589\u57df\u7db2\u63a5\u7d9a\u3055\u308c\u307e\u3057\u305f\uff57\uff57\uff57\n\u203b\u3061\u306a\u307f\u306b\u8a73\u7d30\u306f\u5168\u7136\u6c7a\u307e\u3063\u3066\u307e\u305b\u3093\u3002\u3002\u6b63\u5f0f\u767a\u8868\u3092\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002\u3002\n\u30e6\u30fc\u30b6\u8996\u70b9\u3067\u306e\u69cb\u6210\u65b9\u6cd5\u306f\u3001\u5148\u65e5\u5f0a\u793e\u306e\u30a8\u30d0\u30f3\u30b8\u30a7\u30ea\u30b9\u30c8\u304c\u4ee5\u4e0b\u306e\u30d6\u30ed\u30b0\u3092\u66f8\u3044\u3066\u304f\u308c\u307e\u3057\u305f\u306e\u3067\u3001\nAWS Direct Connect\u3067\u307e\u3055\u304b\u306e\u3042\u305d\u3053\u3068\u7e4b\u304c\u3063\u305f | TOKYO NEXT CLOUD\n\n\u672c\u7a3f\u306f\u30a4\u30f3\u30d5\u30e9\u5074\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u6210\u3092\u7d39\u4ecb\u3057\u3088\u3046\u304b\u3068\u601d\u3044\u307e\u3059\n\u3053\u3093\u306a\u611f\u3058\u3067\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u4f5c\u308a\u307e\u3057\u305f\u3002\n\nAWS Direct Connect\u306e\u7533\u8fbc\u65b9\u6cd5\u3068\u304b\u306f\u3053\u3061\u3089\u306e\u8cc7\u6599\u304c\u8a73\u3057\u304f\u66f8\u304b\u308c\u3066\u304a\u308a\u3001\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\nAWS Black Belt Tech\u30b7\u30ea\u30fc\u30ba AWS Direct Connect\nhttp://www.slideshare.net/AmazonWebServicesJapan/aws-black-belt-tech-aws-direct-connect\n\u5143\u3005\u5f0a\u793e\u3001L3\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3092\u901a\u3058\u3066\u4ed6\u30ad\u30e3\u30ea\u30a2\u3068\u306e\u63a5\u7d9a\u3092\u884c\u3046\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30f3\u30af\u30b5\u30fc\u30d3\u30b9\u3068\u3044\u3046\u306e\u304c\u3042\u308a\u3001\u9589\u57df\u7db2\u306e\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3092Equinix TY4(\u5927\u624b\u753a)\u307e\u3067\u5f35\u308a\u51fa\u3057\u3066\u304a\u308a\u307e\u3057\u305f\u3002\u305d\u306e\u305f\u3081\u3001Direct connect\u306e\u53d7\u3051\u53e3\u304c\u3042\u308bTY2(\u54c1\u5ddd)\u307e\u3067\u306f\u3001\u30e1\u30c8\u30ed\u30b3\u30cd\u30af\u30c8\u3067\u7c21\u5358\u306b10Gbps\u3067\u63a5\u7d9a\u3067\u304d\u307e\u3057\u305f\uff01\n\u30a8\u30af\u30a4\u30cb\u30af\u30b9\u3055\u307e\u3055\u307e\u3067\u3059\u306d\uff01\n\u30ea\u30f3\u30af\u30a2\u30c3\u30d7\u3059\u308b\u3068\u3001AWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u3067 available \u8868\u793a\u306b\u5207\u308a\u66ff\u308a\u307e\u3059\u3002\n\n\u58f2\u308c\u308b\u304b\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u4eca\u306e\u3068\u3053\u308d\u30b7\u30f3\u30b0\u30eb(1\u672c)\u3067\u3059\u3002\u6b63\u5f0f\u30e1\u30cb\u30e5\u30fc\u5316\u3059\u308b\u3053\u3068\u306b\u306a\u3063\u305f\u3089\u5197\u9577\u69cb\u6210(2\u672c)\u306b\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u69cb\u6210\n\u305b\u3063\u304b\u304f10G\u3067\u7e4b\u3044\u3060\u306e\u3067\u3001\u5e2f\u57df\u3092\u5206\u5272\u3057\u3066\u8907\u6570\u306e\u30e6\u30fc\u30b6\u3055\u3093\u3067\u5171\u6709\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3067\u3059\u3088\u306d\u3002Direct Connect\u3067\u306f\u304d\u3061\u3093\u3068\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u306b\u5bfe\u5fdc\u3067\u304d\u308b\u4ed5\u7d44\u307f\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3044\u308f\u3086\u308bOption-A\u65b9\u5f0f\u3067\u306e\u30ad\u30e3\u30ea\u30a2\u9593\u306eIP-VPN\u63a5\u7d9a\u5f62\u614b\u306b\u306a\u3063\u3066\u3044\u3066\u3001RFC\u306b\u3082\u3061\u3083\u3093\u3068\u66f8\u304b\u308c\u3066\u3044\u308b\u3093\u3067\u3059\u3088\u3002(RFC4364 Section 10. Multi-AS Backbones)\n\u5148\u65e5\u3001\u5f0a\u793e\u306e\u30a4\u30d9\u30f3\u30c8\u3067\u767a\u8868\u3057\u305f\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u3082\u7d39\u4ecb\u3057\u3066\u304a\u308a\u307e\u3057\u305f\u3002\u30b9\u30e9\u30a4\u30c9\u3092\u4ee5\u4e0b\u306b\u30a2\u30c3\u30d7\u3057\u3066\u304a\u308a\u307e\u3059\u306e\u3067\u3001\u3082\u3057\u3054\u8208\u5473\u3042\u308a\u307e\u3057\u305f\u3089\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n2016.7.6 \u3055\u304f\u3089\u306e\u5915\u3079\uff20\u6c96\u7e04 \u3055\u304f\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306e\u300c\u9589\u57df\u7db2\u30b5\u30fc\u30d3\u30b9\u300d\u306e\u88cf\u5074\nInterprovider IP-VPN Option-A\n\n\u5f0a\u793e\u5074\u306e\u30eb\u30fc\u30bf(\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30f3\u30af\u306e\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4)\u306fJuniper\u3055\u3093\u306eQFX\u30b7\u30ea\u30fc\u30ba\u3092\u4f7f\u3063\u3066\u307e\u3059\u3002\u8a2d\u5b9a\u4f8b\u3092\u672b\u5c3e\u306b\u8f09\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n\u6975\u3005\u666e\u901a\u306eIP-VPN(VRF)\u306e\u8a2d\u5b9a\u3067\u3059\u304c\u3001\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u3067Direct Connect\u3059\u308b\u8a2d\u5b9a\u4f8b\u304c\u3042\u3093\u307e\u308a\u30cd\u30c3\u30c8\u4e0a\u306b\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u4f55\u304b\u306e\u53c2\u8003\u306b\u306a\u308c\u3070\u5e78\u3044\u3067\u3059\u3002\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\n\u6700\u7d42\u7684\u306b\u3069\u306e\u3088\u3046\u306a\u5f62\u3067\u30e1\u30cb\u30e5\u30fc\u5316\u3055\u308c\u308b\u306e\u304b\uff1f\u3055\u308c\u306a\u3044\u306e\u304b\uff1f\u5168\u304f\u6c7a\u307e\u3063\u3066\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u73fe\u5728\u304a\u8a66\u3057\u5229\u7528\u3067\u304d\u308b\u72b6\u614b\u3067\u3059\u3002\n\u3082\u3057\u3054\u8208\u5473\u3042\u308a\u307e\u3057\u305f\u3089\u500b\u5225\u306b\u3054\u9023\u7d61\u304f\u3060\u3055\u3044\uff01\n\n\u4ed8\u9332\uff1aJuniper QFX\u30b7\u30ea\u30fc\u30ba\u3067\u306e\u8a2d\u5b9a\u4f8b\n\u5f53\u65b9\u306e\u74b0\u5883\u3067\u306fQFX\u30b7\u30ea\u30fc\u30ba\u3067\u8a66\u3057\u3066\u3044\u307e\u3059\u3002\n\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u306e\u5272\u308a\u5f53\u3066\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\n\nxe-0/0/0.1234\n\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u63a5\u7d9a\u5074\u5bfe\u8c61\u30e6\u30fc\u30b6\u7528\u306e\u30b5\u30d6\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\nxe-0/0/5.200\nAWS Direct Connect\u5074\u5bfe\u8c61\u30e6\u30fc\u30b6\u7528\u306e\u30b5\u30d6\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\n\n1\u30e6\u30fc\u30b6\u3054\u3068\u306b\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u6295\u5165\u3057\u307e\u3059\u3002\ninterfaces {\n    xe-0/0/0 {\n        description hybrid-l2-segment;\n        vlan-tagging;\n        mtu 9000;\n        unit 1234 {\n            vlan-id 1234;\n            family inet {\n                mtu 1500;\n                address 10.0.0.253/24 {\n                    vrrp-group 1 {\n                        virtual-address 10.0.0.254;\n                        priority 100;\n                        accept-data;\n                    }\n                }\n            }\n        }\n    }\n    xe-0/0/5 {\n        description aws-direct-connect;\n        vlan-tagging;\n        mtu 9000;\n        unit 200 {\n            vlan-id 200;\n            family inet {\n                mtu 1500;\n                address 169.254.252.2/30;\n            }\n        }\n    }\n}\n\npolicy-options {\n    policy-statement bgp-aws-vrf1234-export {\n        term origin {\n            from {\n                route-filter 10.0.0.0/24 exact;\n            }\n            then {\n                metric 100;\n                accept;\n            }\n        }\n        then reject;\n    }\n    policy-statement bgp-aws-vrf1234-import {\n        then accept;\n    }\n    policy-statement vrf1234-export {\n        then {\n            community add vrf1234-sakura;\n            accept;\n        }\n    }\n    policy-statement vrf1234-import {\n        from community vrf1234-sakura;\n        then accept;\n    }\n    community vrf1234-sakura members target:9370:1234;\n}\n\nrouting-instances {\n    vrf1234 {\n        instance-type vrf;\n        interface xe-0/0/0.1234;\n        interface xe-0/0/5.200;\n        route-distinguisher 9370:1234;\n        vrf-import vrf1234-import;\n        vrf-export vrf1234-export;\n        vrf-table-label;\n        protocols {\n            bgp {\n                log-updown;\n                group ebgp {\n                    type external;\n                    graceful-restart {\n                        disable;\n                    }\n                    neighbor 169.254.252.1 {\n                        description aws;\n                        import bgp-aws-vrf1234-import;\n                        authentication-key aaaa\n                        export bgp-aws-vrf1234-export;\n                        peer-as 10124;\n                    }\n                }\n            }\n        }\n    }\n}\n\n\n\u8a2d\u5b9a\u306e\u88dc\u8db3\n\ninterfaces xe-0/0/0.1234\n\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u63a5\u7d9a\u306b\u304a\u3051\u308bL2\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306fVXLAN\u306e\u30aa\u30fc\u30d0\u30ec\u30a4\u3067\u69cb\u6210\u3057\u3066\u3044\u307e\u3059\u304c\u3001QFX\u306b\u5bfe\u3057\u3066\u306f\u5185\u90e8\u3067\u30a2\u30b5\u30a4\u30f3\u3057\u3066\u3044\u308b802.1Q VLAN\u3067\u51fa\u3066\u304d\u307e\u3059\u3002\u305d\u306eVLAN\u306b\u5bfe\u3057\u3066\u30e6\u30fc\u30b6\u3055\u3093\u5411\u3051\u306e\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3068\u306a\u308bIP\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\ninterfaces xe-0/0/5.200\nAWS Direct Connect\u5411\u3051\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3067\u3001IP\u30a2\u30c9\u30ec\u30b9\u3084\u30d1\u30b9\u30ef\u30fc\u30c9\u306fAWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u8868\u793a\u3055\u308c\u308b\u3082\u306e\u3092\u5165\u529b\u3057\u307e\u3059\u3002\nrouting-instances vrf1234\n\u30e6\u30fc\u30b6\u5358\u4f4d\u3067\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30c6\u30fc\u30d6\u30eb\u3092\u9694\u96e2\u3059\u308b\u305f\u3081\u306b\u3001VRF\u3092\u8a2d\u5b9a\u3057\u4e0a\u8a18\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u306e\u7d4c\u8def\u3092\u9589\u3058\u8fbc\u3081\u307e\u3059\u3002\u307e\u305f\u3001VRF\u306e\u4e2d\u3067AWS\u3068BGP\u30d4\u30a2\u3092\u5f35\u308a\u307e\u3059\u3002\npolicy-options policy-statement vrf1234-export / vrf1234-import\n\u5f0a\u793e\u74b0\u5883\u3067\u306fIP-VPN\u53ce\u5bb9\u30eb\u30fc\u30bf\u304c\u4ed6\u62e0\u70b9\u306b\u3082\u5b58\u5728\u3057\u3001iBGP\u306b\u3066\u7d4c\u8def\u60c5\u5831\u3092\u5171\u6709\u3057\u3066\u3044\u307e\u3059\u3002VRF\u3068BGP\u30c6\u30fc\u30d6\u30eb\u9593\u3067\u7d4c\u8def\u60c5\u5831\u3092\u4f1d\u642c\u3055\u305b\u308b\u969b\u306b\u30bf\u30fc\u30b2\u30c3\u30c8\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3067\u8b58\u5225\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u306e\u8a18\u4e8b\u306f [\u3055\u304f\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8 Advent Calendar 2016](http://qiita.com/advent-calendar/2016/sakura) 22\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n# \u305d\u308c\u306b\u3057\u3066\u3082\n\n\u306a\u3093\u3067\u3053\u306e\u30a2\u30c9\u30d9\u30f3\u30c8\u30ab\u30ec\u30f3\u30c0\u30fc\u3001\u3053\u3093\u306a\u306b\u3082\u76db\u308a\u4e0a\u304c\u3063\u3066\u308b\u3093\u3067\u3059\u304b\uff01\u67a0\u304c\u5168\u90e8\u57cb\u307e\u3063\u3066\u308b\u4e0a\u306b[\u3055\u304f\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\uff08\u305d\u306e\uff12\uff09 Advent Calendar 2016](http://qiita.com/advent-calendar/2016/sakura2)\u306a\u3093\u3066\u306e\u3082\u3042\u308b\u3093\u3058\u3083\u306a\u3044\u3067\u3059\u304b\u3002\u306a\u3093\u3067\u3053\u3093\u306a\u306b\u30d3\u30c3\u30c1\u30ea\u306a\u306e\uff01\n\n**\u203b \u30e6\u30fc\u30b6\u3055\u307e\u306b\u3082\u5bc4\u7a3f\u3044\u305f\u3060\u3044\u3066\u304a\u308a\u3001\u3042\u308a\u304c\u305f\u3044\u9650\u308a\u3067\u3059 m((__))m**\n\n\u3048\u30fc\u3001\u9591\u8a71\u4f11\u984c\u9591\u8a71\u4f11\u984c\u3002\n\n\u4eca\u56de\u306f\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u63a5\u7d9a\u306e\u8a71\u3067\u3059\u3002\u5b9f\u306f\u3053\u306e\u8a71\u3001\u307e\u3060\u516c\u306b\u306f\u306a\u3063\u3066\u306a\u3044\u3093\u3067\u3059\u304c\u3001**AWS Direct Connect** \u3092\u7d4c\u7531\u3057\u3066\u3055\u304f\u3089\u306e\u5404\u30b5\u30fc\u30d3\u30b9\u304b\u3089\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u63a5\u7d9a\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3088\u3046\u3068\u691c\u8a0e\u3057\u3066\u3044\u308b\u8a71\u3068\u306a\u308a\u307e\u3059\u3002\n\n# \u3064\u307e\u308a\u3069\u3046\u3044\u3046\u3053\u3068\u306a\u3093\u3060\u3063\u3066\u3070\u3088\uff1f\n\n\u3053\u308c\u3092\u3053\u3046\u3057\u3066\u3053\u3046\u3058\u3083\uff01\n\n![WS001095-768x430.png](https://qiita-image-store.s3.amazonaws.com/0/108990/16c89e19-f0a4-b63b-9131-2820db8719ad.png)\n\n\u5f15\u7528\u5143\uff1ahttp://nextcloud.tokyo/?p=374\n\n**Direct Connect\u306b\u3088\u3063\u3066AWS\u3068\u3055\u304f\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u304c\u9589\u57df\u7db2\u63a5\u7d9a\u3055\u308c\u307e\u3057\u305f\uff57\uff57\uff57**\n\u203b\u3061\u306a\u307f\u306b\u8a73\u7d30\u306f\u5168\u7136\u6c7a\u307e\u3063\u3066\u307e\u305b\u3093\u3002\u3002\u6b63\u5f0f\u767a\u8868\u3092\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002\u3002\n\n\u30e6\u30fc\u30b6\u8996\u70b9\u3067\u306e\u69cb\u6210\u65b9\u6cd5\u306f\u3001\u5148\u65e5\u5f0a\u793e\u306e\u30a8\u30d0\u30f3\u30b8\u30a7\u30ea\u30b9\u30c8\u304c\u4ee5\u4e0b\u306e\u30d6\u30ed\u30b0\u3092\u66f8\u3044\u3066\u304f\u308c\u307e\u3057\u305f\u306e\u3067\u3001\n\n[AWS Direct Connect\u3067\u307e\u3055\u304b\u306e\u3042\u305d\u3053\u3068\u7e4b\u304c\u3063\u305f | TOKYO NEXT CLOUD](http://nextcloud.tokyo/?p=374)\n\n# \u672c\u7a3f\u306f\u30a4\u30f3\u30d5\u30e9\u5074\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u6210\u3092\u7d39\u4ecb\u3057\u3088\u3046\u304b\u3068\u601d\u3044\u307e\u3059\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u4f5c\u308a\u307e\u3057\u305f\u3002\n![c.png](https://qiita-image-store.s3.amazonaws.com/0/108990/7d8f87b0-06b7-469e-5045-1d7fb3d6af12.png)\n\nAWS Direct Connect\u306e\u7533\u8fbc\u65b9\u6cd5\u3068\u304b\u306f\u3053\u3061\u3089\u306e\u8cc7\u6599\u304c\u8a73\u3057\u304f\u66f8\u304b\u308c\u3066\u304a\u308a\u3001\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n\nAWS Black Belt Tech\u30b7\u30ea\u30fc\u30ba AWS Direct Connect\nhttp://www.slideshare.net/AmazonWebServicesJapan/aws-black-belt-tech-aws-direct-connect\n\n\u5143\u3005\u5f0a\u793e\u3001L3\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3092\u901a\u3058\u3066\u4ed6\u30ad\u30e3\u30ea\u30a2\u3068\u306e\u63a5\u7d9a\u3092\u884c\u3046[\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30f3\u30af\u30b5\u30fc\u30d3\u30b9](http://cloud-news.sakura.ad.jp/privatelink/)\u3068\u3044\u3046\u306e\u304c\u3042\u308a\u3001\u9589\u57df\u7db2\u306e\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3092Equinix TY4(\u5927\u624b\u753a)\u307e\u3067\u5f35\u308a\u51fa\u3057\u3066\u304a\u308a\u307e\u3057\u305f\u3002\u305d\u306e\u305f\u3081\u3001Direct connect\u306e\u53d7\u3051\u53e3\u304c\u3042\u308bTY2(\u54c1\u5ddd)\u307e\u3067\u306f\u3001[\u30e1\u30c8\u30ed\u30b3\u30cd\u30af\u30c8](http://www.equinix.co.jp/resources/data-sheets/odeo-metro-connect/)\u3067\u7c21\u5358\u306b10Gbps\u3067\u63a5\u7d9a\u3067\u304d\u307e\u3057\u305f\uff01\n\n\u30a8\u30af\u30a4\u30cb\u30af\u30b9\u3055\u307e\u3055\u307e\u3067\u3059\u306d\uff01\n\n\u30ea\u30f3\u30af\u30a2\u30c3\u30d7\u3059\u308b\u3068\u3001AWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u3067 **available** \u8868\u793a\u306b\u5207\u308a\u66ff\u308a\u307e\u3059\u3002\n\n![d.png](https://qiita-image-store.s3.amazonaws.com/0/108990/92c6f8ef-2bf0-24bb-7fb4-164d3103c292.png)\n\n\u58f2\u308c\u308b\u304b\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u4eca\u306e\u3068\u3053\u308d\u30b7\u30f3\u30b0\u30eb(1\u672c)\u3067\u3059\u3002\u6b63\u5f0f\u30e1\u30cb\u30e5\u30fc\u5316\u3059\u308b\u3053\u3068\u306b\u306a\u3063\u305f\u3089\u5197\u9577\u69cb\u6210(2\u672c)\u306b\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n# \u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u69cb\u6210\n\n\u305b\u3063\u304b\u304f10G\u3067\u7e4b\u3044\u3060\u306e\u3067\u3001\u5e2f\u57df\u3092\u5206\u5272\u3057\u3066\u8907\u6570\u306e\u30e6\u30fc\u30b6\u3055\u3093\u3067\u5171\u6709\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3067\u3059\u3088\u306d\u3002Direct Connect\u3067\u306f\u304d\u3061\u3093\u3068\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u306b\u5bfe\u5fdc\u3067\u304d\u308b\u4ed5\u7d44\u307f\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3044\u308f\u3086\u308bOption-A\u65b9\u5f0f\u3067\u306e\u30ad\u30e3\u30ea\u30a2\u9593\u306eIP-VPN\u63a5\u7d9a\u5f62\u614b\u306b\u306a\u3063\u3066\u3044\u3066\u3001RFC\u306b\u3082\u3061\u3083\u3093\u3068\u66f8\u304b\u308c\u3066\u3044\u308b\u3093\u3067\u3059\u3088\u3002[(RFC4364 Section 10. Multi-AS Backbones)](https://tools.ietf.org/html/rfc4364#section-10)\n\n\u5148\u65e5\u3001\u5f0a\u793e\u306e\u30a4\u30d9\u30f3\u30c8\u3067\u767a\u8868\u3057\u305f\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u3082\u7d39\u4ecb\u3057\u3066\u304a\u308a\u307e\u3057\u305f\u3002\u30b9\u30e9\u30a4\u30c9\u3092\u4ee5\u4e0b\u306b\u30a2\u30c3\u30d7\u3057\u3066\u304a\u308a\u307e\u3059\u306e\u3067\u3001\u3082\u3057\u3054\u8208\u5473\u3042\u308a\u307e\u3057\u305f\u3089\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\n[2016.7.6 \u3055\u304f\u3089\u306e\u5915\u3079\uff20\u6c96\u7e04 \u3055\u304f\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306e\u300c\u9589\u57df\u7db2\u30b5\u30fc\u30d3\u30b9\u300d\u306e\u88cf\u5074](http://www.slideshare.net/ShuichiOhkubo/201676-63799088)\n\nInterprovider IP-VPN Option-A\n![b.png](https://qiita-image-store.s3.amazonaws.com/0/108990/17b9e2d4-7ac6-3e86-97be-8a4ded7a4026.png)\n\n\u5f0a\u793e\u5074\u306e\u30eb\u30fc\u30bf(\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30f3\u30af\u306e\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4)\u306fJuniper\u3055\u3093\u306eQFX\u30b7\u30ea\u30fc\u30ba\u3092\u4f7f\u3063\u3066\u307e\u3059\u3002\u8a2d\u5b9a\u4f8b\u3092\u672b\u5c3e\u306b\u8f09\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u6975\u3005\u666e\u901a\u306eIP-VPN(VRF)\u306e\u8a2d\u5b9a\u3067\u3059\u304c\u3001\u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u3067Direct Connect\u3059\u308b\u8a2d\u5b9a\u4f8b\u304c\u3042\u3093\u307e\u308a\u30cd\u30c3\u30c8\u4e0a\u306b\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u4f55\u304b\u306e\u53c2\u8003\u306b\u306a\u308c\u3070\u5e78\u3044\u3067\u3059\u3002\n\n# \u3068\u3044\u3046\u3053\u3068\u3067\u3001\n\n\u6700\u7d42\u7684\u306b\u3069\u306e\u3088\u3046\u306a\u5f62\u3067\u30e1\u30cb\u30e5\u30fc\u5316\u3055\u308c\u308b\u306e\u304b\uff1f\u3055\u308c\u306a\u3044\u306e\u304b\uff1f\u5168\u304f\u6c7a\u307e\u3063\u3066\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u73fe\u5728\u304a\u8a66\u3057\u5229\u7528\u3067\u304d\u308b\u72b6\u614b\u3067\u3059\u3002\n\n\u3082\u3057\u3054\u8208\u5473\u3042\u308a\u307e\u3057\u305f\u3089\u500b\u5225\u306b\u3054\u9023\u7d61\u304f\u3060\u3055\u3044\uff01\n\n# \u4ed8\u9332\uff1aJuniper QFX\u30b7\u30ea\u30fc\u30ba\u3067\u306e\u8a2d\u5b9a\u4f8b\n\n\u5f53\u65b9\u306e\u74b0\u5883\u3067\u306fQFX\u30b7\u30ea\u30fc\u30ba\u3067\u8a66\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u306e\u5272\u308a\u5f53\u3066\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\n\n- xe-0/0/0.1234\n\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u63a5\u7d9a\u5074\u5bfe\u8c61\u30e6\u30fc\u30b6\u7528\u306e\u30b5\u30d6\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\n\n- xe-0/0/5.200\nAWS Direct Connect\u5074\u5bfe\u8c61\u30e6\u30fc\u30b6\u7528\u306e\u30b5\u30d6\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\n\n1\u30e6\u30fc\u30b6\u3054\u3068\u306b\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u6295\u5165\u3057\u307e\u3059\u3002\n\n```\ninterfaces {\n    xe-0/0/0 {\n        description hybrid-l2-segment;\n        vlan-tagging;\n        mtu 9000;\n        unit 1234 {\n            vlan-id 1234;\n            family inet {\n                mtu 1500;\n                address 10.0.0.253/24 {\n                    vrrp-group 1 {\n                        virtual-address 10.0.0.254;\n                        priority 100;\n                        accept-data;\n                    }\n                }\n            }\n        }\n    }\n    xe-0/0/5 {\n        description aws-direct-connect;\n        vlan-tagging;\n        mtu 9000;\n        unit 200 {\n            vlan-id 200;\n            family inet {\n                mtu 1500;\n                address 169.254.252.2/30;\n            }\n        }\n    }\n}\n\npolicy-options {\n    policy-statement bgp-aws-vrf1234-export {\n        term origin {\n            from {\n                route-filter 10.0.0.0/24 exact;\n            }\n            then {\n                metric 100;\n                accept;\n            }\n        }\n        then reject;\n    }\n    policy-statement bgp-aws-vrf1234-import {\n        then accept;\n    }\n    policy-statement vrf1234-export {\n        then {\n            community add vrf1234-sakura;\n            accept;\n        }\n    }\n    policy-statement vrf1234-import {\n        from community vrf1234-sakura;\n        then accept;\n    }\n    community vrf1234-sakura members target:9370:1234;\n}\n\nrouting-instances {\n    vrf1234 {\n        instance-type vrf;\n        interface xe-0/0/0.1234;\n        interface xe-0/0/5.200;\n        route-distinguisher 9370:1234;\n        vrf-import vrf1234-import;\n        vrf-export vrf1234-export;\n        vrf-table-label;\n        protocols {\n            bgp {\n                log-updown;\n                group ebgp {\n                    type external;\n                    graceful-restart {\n                        disable;\n                    }\n                    neighbor 169.254.252.1 {\n                        description aws;\n                        import bgp-aws-vrf1234-import;\n                        authentication-key aaaa\n                        export bgp-aws-vrf1234-export;\n                        peer-as 10124;\n                    }\n                }\n            }\n        }\n    }\n}\n```\n\n## \u8a2d\u5b9a\u306e\u88dc\u8db3\n\n- interfaces xe-0/0/0.1234\n\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u63a5\u7d9a\u306b\u304a\u3051\u308bL2\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306fVXLAN\u306e\u30aa\u30fc\u30d0\u30ec\u30a4\u3067\u69cb\u6210\u3057\u3066\u3044\u307e\u3059\u304c\u3001QFX\u306b\u5bfe\u3057\u3066\u306f\u5185\u90e8\u3067\u30a2\u30b5\u30a4\u30f3\u3057\u3066\u3044\u308b802.1Q VLAN\u3067\u51fa\u3066\u304d\u307e\u3059\u3002\u305d\u306eVLAN\u306b\u5bfe\u3057\u3066\u30e6\u30fc\u30b6\u3055\u3093\u5411\u3051\u306e\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3068\u306a\u308bIP\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n- interfaces xe-0/0/5.200\nAWS Direct Connect\u5411\u3051\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3067\u3001IP\u30a2\u30c9\u30ec\u30b9\u3084\u30d1\u30b9\u30ef\u30fc\u30c9\u306fAWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u8868\u793a\u3055\u308c\u308b\u3082\u306e\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\n- routing-instances vrf1234\n\u30e6\u30fc\u30b6\u5358\u4f4d\u3067\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30c6\u30fc\u30d6\u30eb\u3092\u9694\u96e2\u3059\u308b\u305f\u3081\u306b\u3001VRF\u3092\u8a2d\u5b9a\u3057\u4e0a\u8a18\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u306e\u7d4c\u8def\u3092\u9589\u3058\u8fbc\u3081\u307e\u3059\u3002\u307e\u305f\u3001VRF\u306e\u4e2d\u3067AWS\u3068BGP\u30d4\u30a2\u3092\u5f35\u308a\u307e\u3059\u3002\n\n- policy-options policy-statement vrf1234-export / vrf1234-import\n\u5f0a\u793e\u74b0\u5883\u3067\u306fIP-VPN\u53ce\u5bb9\u30eb\u30fc\u30bf\u304c\u4ed6\u62e0\u70b9\u306b\u3082\u5b58\u5728\u3057\u3001iBGP\u306b\u3066\u7d4c\u8def\u60c5\u5831\u3092\u5171\u6709\u3057\u3066\u3044\u307e\u3059\u3002VRF\u3068BGP\u30c6\u30fc\u30d6\u30eb\u9593\u3067\u7d4c\u8def\u60c5\u5831\u3092\u4f1d\u642c\u3055\u305b\u308b\u969b\u306b\u30bf\u30fc\u30b2\u30c3\u30c8\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3067\u8b58\u5225\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n", "tags": ["Network", "SAKURACloud", "DirectConnect", "AWS"]}