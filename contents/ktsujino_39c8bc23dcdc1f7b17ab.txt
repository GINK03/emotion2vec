{"context": " More than 1 year has passed since last update.\u81ea\u5206\u306b\u3068\u3063\u3066\u306e\u8981\u70b9\u30e1\u30e2\u3002\nEffective C++\u306e\u8457\u8005\u306eScott Meyers\u306b\u3088\u308bC++11/14\u306e\u5b9a\u756a\u672c(\u3089\u3057\u3044)\n\u203b\u77e5\u3089\u305a\u306b\u8cb7\u3063\u305f\u3089\u82f1\u8a9e\u3060\u3063\u305f\u306e\u3067\u3001\u306a\u3093\u3068\u304b\u901a\u8aad\u3057\u307e\u3057\u305f\u304c\u7406\u89e3\u306f\u968f\u6240\u602a\u3057\u3044\u3068\u601d\u308f\u308c\u307e\u3059\u3002\u8aa4\u308a\u306f\u662f\u975e\u3054\u6307\u6458\u304f\u3060\u3055\u3044\u3002\n2015/11/02\u8ffd\u8a18: \u65e5\u672c\u8a9e\u7248\u304c\u51fa\u3066\u3044\u307e\u3059\u3002\u672c\u7a3f\u306f\u65e5\u672c\u8a9e\u8a33\u304c\u51fa\u308b\u524d\u306b\u66f8\u3044\u305f\u306e\u306a\u306e\u3067\u76ee\u6b21\u306e\u8a33\u306f\u4e00\u81f4\u3057\u307e\u305b\u3093\u3002\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002 https://www.oreilly.co.jp/books/9784873117362/\n\n\u7b2c1\u7ae0: \u578b\u63a8\u8ad6\n\n\nauto\u3084decltype\u306b\u3088\u308b\u578b\u63a8\u8ad6\u306f\u30b3\u30fc\u30c9\u306e\u5197\u9577\u6027\u3092\u6e1b\u3089\u3059\u5f37\u529b\u306a\u6a5f\u69cb\u3060\u304c\u3001\u578b\u63a8\u8ad6\u306e\u52d5\u304d\u3092\u3057\u3063\u304b\u308a\u7406\u89e3\u3057\u3066\u3044\u306a\u3044\u3068modern C++\u3067\u306e\u52b9\u7387\u7684\u306a\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306f\u307b\u307c\u4e0d\u53ef\u80fd\u3002\n\n\n1: \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u578b\u63a8\u8ad6\u3092\u7406\u89e3\u3057\u308d\n\n\u95a2\u6570\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8template<typename T> void f(ParamType param);\u3092\u57fa\u672c\u306b\u8003\u3048\u3001f(expr)\u3068\u3044\u3046\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\u3068\u304d\u306bT\u304c\u4f55\u3068\u63a8\u8ad6\u3055\u308c\u308b\u304b\u3092\u8ad6\u3058\u308b\u3002\n\n\u578b\u63a8\u8ad6\u306e\u30b7\u30ca\u30ea\u30aa\u306f3\u7a2e\u985e(+\u4f8b\u59161\u7a2e)\u3002\n\n\u30b1\u30fc\u30b91: ParamType\u306f\u53c2\u7167\u307e\u305f\u306f\u30dd\u30a4\u30f3\u30bf\u578b\u3060\u304cuniversal refernce(T&&)\u3067\u306f\u306a\u3044\n\n\n\nexpr\u304b\u3089\u53c2\u7167\u3092\u5916\u3057\u3066\u304b\u3089ParamType\u3068\u7167\u5408\u3057\u3066T\u3092\u6c7a\u3081\u308b\n\n\n\u30b1\u30fc\u30b92: ParamType\u304c universal reference(T&&)\n\n\n\nexpr\u304clvalue\u306a\u3089T\u3068ParamType\u306flvalue\u53c2\u7167\u3002\u3053\u308c\u306f2\u3064\u306e\u610f\u5473\u3067\u30c8\u30ea\u30c3\u30ad\u30fc\u3002\n\n\n\u3053\u308c\u306fT\u304c\u53c2\u7167\u578b\u3068\u63a8\u8ad6\u3055\u308c\u308b\u552f\u4e00\u306e\u30b1\u30fc\u30b9\u3002\n\nParamType\u306f\u6587\u6cd5\u7684\u306b\u306frvalue reference\u3068\u3057\u3066\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u306e\u306b\u578b\u63a8\u8ad6\u306e\u7d50\u679c\u306flvalue reference\u306b\u306a\u308b\u3002\n\n\n\nexpr\u304crvalue\u306a\u3089\u30b1\u30fc\u30b91\u3069\u304a\u308a\u306e\u52d5\u4f5c\u3002\n\n\n\u30b1\u30fc\u30b93: ParamType\u304c\u30dd\u30a4\u30f3\u30bf\u3067\u3082\u53c2\u7167\u3067\u3082\u306a\u3044\n\n\n\nexpr\u304b\u3089\u53c2\u7167\u3068CV\u4fee\u98fe\u5b50\u3092\u5916\u3059(\u5024\u6e21\u3057\u306a\u306e\u3067CV\u4fee\u98fe\u5b50\u3082\u306a\u304f\u306a\u308b)\u3002\u305f\u3060\u3057\u30dd\u30a4\u30f3\u30bf\u3084\u53c2\u7167\u304c\u6307\u3059\u5148\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306econst\u6027\u306f\u4fdd\u5b58\u3055\u308c\u308b\u3002\n\n\n(\u4f8b\u5916:\u914d\u5217\u30fb\u95a2\u6570)\n\n\n\u666e\u6bb5\u306f\u914d\u5217\u306f\u5148\u982d\u30dd\u30a4\u30f3\u30bf\u306b\u81ea\u52d5\u5909\u63db\u3055\u308c\u308b\u304c\u3001ParamType\u304c\u53c2\u7167\u4fee\u98fe\u5b50\u3092\u542b\u3080\u3068\u304d\u3060\u3051param\u306f\u300c\u914d\u5217\u3078\u306e\u53c2\u7167\u300d\u578b\u3068\u306a\u308b\u3002\u95a2\u6570\u30dd\u30a4\u30f3\u30bf\u306b\u3064\u3044\u3066\u3082\u540c\u69d8\u3060\u304c\u30b3\u30fc\u30ca\u30fc\u30b1\u30fc\u30b9\u306a\u306e\u3067\u6c17\u306b\u3057\u306a\u304f\u3066\u3044\u3044\u3002\n\n\n\n\u4f8b\nint x = 27;\nconst int cx = x;\nconst int& rx = x;\n\ntemplate<typename T> void f1(T& param); // \u30b1\u30fc\u30b91\nf1(x);  // T is int, param is int&\nf1(cx); // T is const int, param is const int&\nf1(rx); // T is const int, param is const int& \n\ntemplate<typename T> void f2(T&& param); // \u30b1\u30fc\u30b92\nf2(x);  // x is lvalue: T is int&, param is int&\nf2(cx); // cx is lvalue: T is const int&, param is const int&\nf2(rx); // rx is lvalue: T is const int&, param is const int&\nf2(27); // 27 is rvalue: T is int, param is int&& \n\ntemplate<typename T> void f3(T param); // \u30b1\u30fc\u30b93\nf3(x);  // T and param are both int\nf3(cx); // T and param are both int\nf3(rx); // T and param are both int\n\n\n\n2: auto\u578b\u63a8\u8ad6\u3092\u7406\u89e3\u3057\u308d\n\n\nauto\u3068\u95a2\u6570\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u57fa\u672c\u540c\u3058\u3060\u304c\u30011\u3064\u3060\u3051\u4f8b\u5916\u304c\u3042\u308b\u3002auto x={27};\u307e\u305f\u306fauto x{27};\u3068\u5ba3\u8a00\u3057\u305f\u3068\u304d\u3060\u3051\u3001x\u306fint\u578b\u3067\u306a\u304fstd::initializer_list<int>\u578b\u3068\u306a\u308b\u3002\nC++14\u3067\u306e\u95a2\u6570\u623b\u308a\u5024\u578b\u6307\u5b9a\u3084\u30e9\u30e0\u30c0\u5f0f\u3067\u306eauto\u306f\u4e0a\u8a18\u306eauto\u578b\u63a8\u8ad6\u3067\u306f\u306a\u304f#1\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u578b\u63a8\u8ad6\u306b\u5f93\u3046\u3002 \n\n\n3: decltype\u3092\u7406\u89e3\u3057\u308d\n\n\u540d\u524d(\u5909\u6570\u540d\u3068\u304b\u95a2\u6570\u540d\u3068\u304b)\u306b\u9069\u7528\u3057\u305f\u5834\u5408\u306edecltype(x)\u306f\u76f4\u611f\u3069\u304a\u308a\u52d5\u304f\u306e\u3067\u5fc3\u914d\u306a\u3044\n\n\ndecltype\u306fauto\u3068\u9055\u3063\u3066\u53c2\u7167\u578b\u3092\u5916\u3057\u305f\u308a\u3057\u306a\u3044\u3002\n\n\n\u540d\u524d\u3092\u305d\u306e\u307e\u307e\u66f8\u304f\u5f62\u4ee5\u5916\u306e\u3001T\u578b\u306b\u76f8\u5f53\u3059\u308blvalue expression\u306b\u5bfe\u3057\u3066\u306fdecltype\u306f\u3044\u3064\u3082T&\u578b\u3092\u5831\u544a\u3059\u308b\u3002()\u3092\u3064\u3051\u308b\u3060\u3051\u3067\u300c\u540d\u524d\u3092\u305d\u306e\u307e\u307e\u66f8\u304f\u5f62\u3067\u306a\u3044\u300d\u3068\u307f\u306a\u3055\u308c\u308b\u3002\u4f8b\u3048\u3070\u3001x\u304cint\u306e\u3068\u304ddecltype((x))\u306fint&\u306a\u306e\u3067\u6ce8\u610f!\nC++14\u3067\u306fdecltype(auto)\u304c\u4f7f\u3048\u308b\u3002\"\u3075\u3064\u3046\u306eauto\u3067\u306a\u304fdecltype\u306e\u30eb\u30fc\u30eb\u3067\u578b\u63a8\u8ad6\u3057\u3066\u306d\"\u306e\u610f\u3002\n\n\n4: \u63a8\u8ad6\u3055\u308c\u305f\u578b\u3092\u8868\u793a\u3059\u308b\u65b9\u6cd5\u3092\u77e5\u3063\u3066\u304a\u3051\n\nIDE\u306e\u6a5f\u80fd\u3092\u4f7f\u3046: \u5618\u3092\u3064\u304b\u308c\u308b\u3053\u3068\u304c\u3042\u308b\u3002\n\u30b3\u30f3\u30d1\u30a4\u30e9\u306b\u30a8\u30e9\u30fc\u3092\u5410\u304b\u305b\u3066\u89b3\u5bdf\u3059\u308b\u3002template<typename T> class TD;\u3068\u3044\u3046\u5b9a\u7fa9\u306e\u306a\u3044\u30af\u30e9\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5ba3\u8a00\u3057\u3066\u304a\u304f\u3002x\u306e\u578b\u304c\u77e5\u308a\u305f\u3051\u308c\u3070TD<decltype x> xType;\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3092\u8a66\u307f\u308b\u3068\"TC\u304c\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3067\u304d\u306a\u3044\u3088\"\u7684\u306a\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30b3\u30f3\u30d1\u30a4\u30e9\u304c\u5410\u3044\u3066\u304f\u308c\u308b\u306f\u305a\u3002\n\u30e9\u30f3\u30bf\u30a4\u30e0\u3067\u306eprintf\u30a2\u30d7\u30ed\u30fc\u30c1: std::type_info::name\u306f\u4fe1\u7528\u3067\u304d\u306a\u3044\u3002\u4ed5\u69d8\u4e0a\u53c2\u7167\u3068CV\u4fee\u98fe\u5b50\u306f\u7121\u8996\u3055\u308c\u308b\u3053\u3068\u306b\u306a\u3063\u3066\u3044\u308b\u3002boost::typeindex\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3046\u306e\u304c\u3088\u3044\u3002\n\n#include <iostream>\n#include <boost/type_index.hpp>\n\ntemplate<typename T> void f(const T& param) {\n  std::cout << \"T: \"     << boost::typeindex::type_id_with_cvr<T>().pretty_name() << std::endl; // show T\n  std::cout << \"param: \" << boost::typeindex::type_id_with_cvr<decltype(param)>().pretty_name() << std::endl; // show param\n}\n\nint main() {\n  int x = 27;\n  f(x); // T: int, param: int const&\n}\n\n\n\u7b2c2\u7ae0: auto\n\n\u578b\u63a8\u8ad6\u306b\u3088\u308aauto\u304c(\u30e6\u30fc\u30b6\u8996\u70b9\u3067\u306f)\u5909\u306a\u52d5\u304d\u3092\u3059\u308b\u3053\u3068\u304c\u3042\u308b\u304c\u3001\u8ae6\u3081\u3066\u660e\u793a\u7684\u578b\u6307\u5b9a\u306b\u983c\u308b\u3088\u308aauto\u3092\u671f\u5f85\u901a\u308a\u52d5\u304b\u305b\u308b\u3088\u3046\u304c\u3093\u3070\u308d\u3046\u3002\n\n\n5: \u660e\u793a\u7684\u306a\u578b\u5ba3\u8a00\u3088\u308aauto\u3092\u4f7f\u3048\n\nauto\u306f\u3059\u3070\u3089\u3057\u3044\u3002\n\n\n\u521d\u671f\u5316\u3057\u306a\u3044\u3068\u578b\u304c\u6c7a\u307e\u3089\u306a\u3044\u306e\u3067\u5909\u6570\u306e\u521d\u671f\u5316\u5fd8\u308c\u3092\u9632\u3052\u308b\u3002\nC++14\u3067\u306f\u30e9\u30e0\u30c0\u5f0f\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3082auto\u304c\u4f7f\u3048\u308b\u3002\n\u30af\u30ed\u30fc\u30b8\u30e3\u3092\u66f8\u304f\u3068\u304d\u306b\u306fstd::function\u5909\u6570\u306b\u683c\u7d0d\u3059\u308b\u3088\u308aauto\u5909\u6570\u306b\u683c\u7d0d\u3059\u308b\u307b\u3046\u304c\u697d\u3067\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u7684\u306b\u3082\u3088\u3044\u3002\nsize_type\u306e\u30d3\u30c3\u30c8\u5e45\u306e\u74b0\u5883\u4f9d\u5b58\u6027(unsigned int\u3068\u540c\u3058\u3068\u306f\u9650\u3089\u306a\u3044!)\u3067\u30cf\u30de\u3063\u305f\u308a\u3059\u308b\u3053\u3068\u3082auto\u3067\u9632\u3052\u308b\u3002\nSTL\u30b3\u30f3\u30c6\u30ca\u306b\u5bfe\u3059\u308b\u30a4\u30c6\u30ec\u30fc\u30bf\u306e\u578b\u6307\u5b9a\u8aa4\u308a(unordered_map\u306ekey\u90e8\u5206\u306bconst\u3092\u3064\u3051\u5fd8\u308c\u308b\u3068\u304b)\u3067\u3046\u3063\u304b\u308a\u4e00\u6642\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u4f5c\u3089\u308c\u307e\u304f\u3063\u3066\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u4f4e\u4e0b\u3068\u304b\u3082\u9632\u3052\u308b\n\u30b3\u30fc\u30c9\u306e\u5197\u9577\u6027\u304c\u6e1b\u3063\u3066\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3082\u697d\u306b\u306a\u308b\n\n\n\n\u304b\u3088\u3046\u306bauto\u306f\u6700\u9ad8\u3060\u304c\u671b\u307e\u306a\u3044\u7d50\u679c\u3092\u751f\u3080\u3053\u3068\u3082\u3042\u308b\u306e\u3067\u6ce8\u610f\u305b\u3088!\n\n\n6: auto\u304c\u671b\u307e\u306a\u3044\u578b\u63a8\u8ad6\u3092\u3059\u308b\u3068\u304d\u306f explicitly typed initializer idiom \u3092\u4f7f\u3048\n\n\u306f\u307e\u308b\u30b1\u30fc\u30b9\n\n\n\u4f8b: std::vector<bool> f(); auto b = f()[0];(f\u306fvector\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059\u95a2\u6570)\u3002std::vector<bool>\u306f\u30d3\u30c3\u30c8\u30d1\u30c3\u30ad\u30f3\u30b0\u3092\u3059\u308b\u3088\u3046\u7279\u6b8a\u5316\u3055\u308c\u3066\u304a\u308a[]\u6f14\u7b97\u5b50\u306fbool&\u3067\u306a\u304fstd::vector<bool>::reference\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059\u3002\u5b9f\u88c5\u4f9d\u5b58\u3060\u304c\u3001\u3082\u3057f()\u304c\u8fd4\u3059\u4e00\u6642\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u6d88\u3048\u305f\u5f8c\u306b\u30d3\u30c3\u30c8\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u53c2\u7167\u3057\u3088\u3046\u3068\u3057\u305f\u3089\u7d50\u679c\u306f\u4e0d\u5b9a!\n\u4e00\u822c\u306b\u4e0d\u53ef\u8996\u306eproxy class\u3068auto\u306f\u76f8\u6027\u304c\u60aa\u3044\u3002\u30de\u30cb\u30e5\u30a2\u30eb\u3068\u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb\u3068\u5fc3\u306e\u76ee\u3067\u4e0d\u53ef\u8996\u306eproxy class\u3092\u898b\u629c\u3051\u3002\n\n\n\u3053\u3046\u3057\u305f\u5834\u5408\u3082auto\u306e\u4f7f\u7528\u3092\u8ae6\u3081\u308b\u5fc5\u8981\u306f\u306a\u3044\u3002 explicitly typed initializer idiom \u306e\u51fa\u756a\u3002\u3072\u3068\u3053\u3068\u3067\u3044\u3046\u3068static_cast\u3057\u308d\u3068\u3044\u3046\u3053\u3068\u3002\u524d\u8ff0\u306e\u4f8b\u3067\u3042\u308c\u3070auto b = static_cast<bool>(f()[0]);\u3068\u3059\u308c\u3070\u3088\u3044\u3002\n\n\n\u7b2c3\u7ae0: Modern C++\u3078\u306e\u79fb\u884c\n\nauto\u3001\u30b9\u30de\u30fc\u30c8\u30dd\u30a4\u30f3\u30bf\u3001\u30e0\u30fc\u30d6\u30bb\u30de\u30f3\u30c6\u30a3\u30af\u30b9\u3001\u30e9\u30e0\u30c0\u5f0f\u3001\u4e26\u884c\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3001C++11/14\u306e\u5927\u304d\u306a\u65b0\u6a5f\u80fd\u3002\u3067\u3082\u305d\u306e\u307b\u304b\u306e\u7d30\u304b\u3044\u65b0\u6a5f\u80fd\u3082\u5927\u4e8b\u3002\n\n\n7: \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u6642\u306b()\u3068{}\u3092\u533a\u5225\u3057\u308d\n\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u521d\u671f\u5316\u306e\u66f8\u5f0f\u3068\u3057\u3066\u3001int x(0);, int y=0;,  int z{0};\u304c\u3042\u308b\u3002(int z={0};\u3082\u5927\u62b5\u4f7f\u3048\u308b\u304c\u3001\u307b\u307cint z{0};\u3068\u540c\u3058\u6319\u52d5)\n\n\n\n\u30af\u30e9\u30b9\u5b9a\u7fa9\u5185\u3067\u306estatic\u3067\u306a\u3044\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u306e\u521d\u671f\u5316\u306f{}\u3068=\u3067\u66f8\u3051\u308b\u304c()\u306f\u30a8\u30e9\u30fc\n\u30b3\u30d4\u30fc\u4e0d\u53ef\u30aa\u30d6\u30b8\u30a7\u30af\u30c8(std::atomic\u3068\u304b)\u306f{}\u3068()\u3067\u521d\u671f\u5316\u3067\u304d\u308b\u304c=\u306f\u30a8\u30e9\u30fc\n{}\u3067\u306e\u521d\u671f\u5316\u3067\u306f\u7d44\u8fbc\u307f\u578b\u3067\u306e\u6697\u9ed9\u306e\u7cbe\u5ea6\u5207\u308a\u4e0b\u3052\u578b\u5909\u63db\u304c\u7981\u6b62\u3055\u308c\u308b\u3002int x(1.0);\u306fOK\u3060\u304c\u3001int y{1.0};\u306f\u30a8\u30e9\u30fc\u3002\nWidget w();\u3068\u66f8\u3044\u3066Widget\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9w\u3092\u4f5c\u308d\u3046\u3068\u3059\u308b\u3068\u95a2\u6570\u306e\u5ba3\u8a00\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u304c\u3001Widget w{};\u3068\u66f8\u3051\u3070\u5b89\u5fc3\n\n\n\u305f\u3060\u3057\u3001{}\u66f8\u5f0f\u306fstd::initializer_list\u3092\u5f15\u6570\u578b\u306b\u6301\u3064\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u512a\u5148\u3057\u3066\u547c\u3073\u51fa\u3057\u3066\u3057\u307e\u3046\u3002T\u306e\u90e8\u5206\u3092\u578b\u5909\u63db\u3057\u3066\u3067\u3082std::initializer_list\u3092\u5f15\u6570\u578b\u306b\u6301\u3064\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u305d\u306e\u4ed6\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3088\u308a\u5148\u306b\u63a2\u3057\u3001\u305d\u306e\u904e\u7a0b\u3067\u7cbe\u5ea6\u5207\u308a\u4e0b\u3052\u578b\u5909\u63db\u304c\u3042\u308b\u3068\u30a8\u30e9\u30fc\u3092\u5410\u3044\u3066\u3057\u307e\u3046\u3002\n\n\n\u7a7a\u306e{}\u306f\u7a7a\u306estd::initializer_list\u3068\u306f\u307f\u306a\u3055\u308c\u305a\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u547c\u3070\u308c\u308b\n\nstd::vector v1(10, 20);\u306f10\u8981\u7d20\u3067\u3001\u5168\u3066\u306e\u5024\u304c20\u3002std::vector v2{10, 20};\u306f2\u8981\u7d20\u3067\u5024\u306f10\u306820\u3002\n\n\n\u4e16\u306e\u4e2d\u306b\u306f{}\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u4f7f\u3046\u6d3e\u3068()\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u4f7f\u3046\u6d3e\u304c\u3044\u308b\u3002\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30e6\u30fc\u30b6\u304c\u3069\u3063\u3061\u6d3e\u304b\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4e2d\u3067\u3069\u3063\u3061\u3067\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3059\u308b\u304b\u306f\u96e3\u3057\u3044\u554f\u984c\u306b\u306a\u308b\u3002\n\n\n8: 0\u3084NULL\u3088\u308anullptr\u3092\u4f7f\u3048\n\n0\u306fint\u3067\u30dd\u30a4\u30f3\u30bf\u578b\u3067\u306f\u306a\u3044\u3002NULL\u3082\u6574\u6570\u578b\u3067\u30dd\u30a4\u30f3\u30bf\u578b\u3067\u306f\u306a\u3044\u3002nullptr\u306f\u306a\u3093\u3067\u3082\u578b\u306e\u30dd\u30a4\u30f3\u30bf\u3068\u307f\u306a\u3057\u3066\u3088\u3044\u3002\n\u7279\u306b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3084auto\u3068\u7d44\u307f\u5408\u308f\u305b\u3066\u4f7f\u3046\u3068\u304d\u306fnullptr\u3092\u4f7f\u3046\u3068\u975e\u5e38\u306b\u3088\u3044\u3002\n(NULL\u3092\u4f7f\u3063\u3066\u3057\u307e\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f7f\u3044\u624b\u306b\u5099\u3048\u3066?)\u6574\u6570\u3068\u30dd\u30a4\u30f3\u30bf\u578b\u306e\u30aa\u30fc\u30d0\u30ed\u30fc\u30c9\u306f\u907f\u3051\u308d\n\n\n9: typedef\u3088\u308aalias\u5ba3\u8a00\u3092\u4f7f\u3048\n\n\u306a\u305c\u306a\u3089alias\u5ba3\u8a00\u306f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5316\u3067\u304d\u308b\u304b\u3089\u3002\u4f8b:template<typename T> using MyAllocList = std::list<T, MyAlloc<T>>;\n\nTMP(\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30e1\u30bf\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0)\u3057\u305f\u3053\u3068\u304c\u306a\u3044\u306a\u3089\u52c9\u5f37\u3057\u308d\u3002type traits\u3068\u3044\u3046\u306e\u304c\u3042\u308b\u3002\n\n\nC++11\u3067\u306fstd::remove_const<T>::type\u3067T\u304b\u3089const\u6027\u3092\u53d6\u308a\u9664\u304f\u3053\u3068\u304c\u3067\u304d\u308b\u304c\u3001C++14\u3067\u306ftypedef\u3067\u306a\u304falias\u3092\u4f7f\u3063\u3066std::remove_const_t<T>\u3068\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\u307b\u304b\u306b\u3082\u3044\u308d\u3044\u308d\u306atype traits\u304c\u3042\u308b\u3088\u3002\n\n\n\n\n10: \u30b9\u30b3\u30fc\u30d7\u306a\u3057enum\u3088\u308a\u30b9\u30b3\u30fc\u30d7\u4ed8\u304denum\u3092\u4f7f\u3048\n\n\u30b9\u30b3\u30fc\u30d7\u306a\u3057enum\u3067\u306f\u3001\u540d\u524d\u304cenum\u306e\u5916\u5074\u306e\u30b9\u30b3\u30fc\u30d7\u306b\u6f0f\u308c\u51fa\u3059\u3002\u30b9\u30b3\u30fc\u30d7\u4ed8\u304denum\u306f\u6f0f\u308c\u306a\u3044\u3002\u30b9\u30b3\u30fc\u30d7\u3042\u308aenum\u306fenum class Color{black, white, red};\u306e\u3088\u3046\u306b\u66f8\u304f\u3060\u3051\u3002\n\u30b9\u30b3\u30fc\u30d7\u4ed8\u304denum\u3067\u306f\u6574\u6570\u3078\u306e\u6697\u9ed9\u5909\u63db\u304c\u884c\u308f\u308c\u306a\u3044\u3002static_cast\u304c\u5fc5\u9808\u3068\u306a\u308a\u3001\u30b3\u30fc\u30c9\u306e\u53ef\u8aad\u6027\u304c\u5411\u4e0a\u3059\u308b\u3002\n\n\nC++11\u3067\u306fenum\u306e\u5ba3\u8a00(\u5b9a\u7fa9\u306a\u3057)\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\u30b0\u30ed\u30fc\u30d0\u30eb\u306aenum\u306e\u4e2d\u306b\u65b0\u3057\u3044\u5024\u3092\u5b9a\u7fa9\u3057\u305f\u3068\u304d\u306b\u4f9d\u5b58\u95a2\u4fc2\u3067\u5168\u90e8\u306e\u30bd\u30fc\u30b9\u304c\u518d\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u308b\u3053\u3068\u3092\u9632\u3052\u308b\u3002\n\u305f\u3060\u3057\u3001enum\u306e\u30e1\u30e2\u30ea\u4e0a\u306e\u30b5\u30a4\u30ba\u306f\u308f\u304b\u3063\u3066\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u3067\u3001\u30b9\u30b3\u30fc\u30d7\u4ed8\u304denum\u306f\u5ba3\u8a00\u6642\u306b\u30b5\u30a4\u30ba\u304c\u660e\u793a\u7684\u306b\u308f\u304b\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u30b9\u30b3\u30fc\u30d7\u4ed8\u304denum\u306fint\u306e\u30b5\u30a4\u30ba\u3068\u6c7a\u307e\u3063\u3066\u3044\u308b\u3002\u307e\u305f\u3001\u30b9\u30b3\u30fc\u30d7\u306a\u3057enum\u3082\u30b9\u30b3\u30fc\u30d7\u4ed8\u304denum\u3082\u3001enum class Status: std::unit32_t;\u7b49\u3068\u3057\u3066\u30b5\u30a4\u30ba\u3092\u660e\u793a\u7684\u6307\u5b9a\u3067\u304d\u308b\u3002\ntuple\u306eget\u7b49\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u6307\u5b9a\u306b\u306f\u30b9\u30b3\u30fc\u30d7\u306a\u3057enum\u304c\u4fbf\u5229\u3002\u30b9\u30b3\u30fc\u30d7\u3042\u308aenum\u3060\u3068X\u306e\u3068\u3053\u308d\u306b\u306fstatic_cast<std::size_t>\u304c\u5fc5\u8981\u3002std::underlying_type\u3068\u3044\u3046type trait\u3092\u4f7f\u3063\u3066\u3082\u3088\u3044\u3002\n\n\n\n\n11: \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u306e\u672a\u5b9a\u7fa9\u95a2\u6570\u3088\u308adelete\u3055\u308c\u305f\u95a2\u6570\u3092\u4f7f\u3048\n\n\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3084\u30b3\u30d4\u30fc\u4ee3\u5165\u6f14\u7b97\u5b50\u3092\u30e9\u30a4\u30d6\u30e9\u30ea\u5229\u7528\u8005\u306b\u4f7f\u308f\u308c\u305f\u304f\u306a\u3044\u3068\u304d\u306eC++98\u306e\u3084\u308a\u304b\u305f\u306fprivate\u5ba3\u8a00\u3057\u3066\u5b9a\u7fa9\u3057\u306a\u3044\u3053\u3068\u3060\u3063\u305f\u3002\nC++11\u3067\u306fpublic\u5ba3\u8a00\u3057\u3066\u3001basic_ios(const basic_ios&) = delete;\u7b49\u3068\u66f8\u304f\u3002\ndelete\u8a18\u6cd5\u306e\u30e1\u30ea\u30c3\u30c8\n\n\n\u81ea\u30af\u30e9\u30b9\u3084friend\u304b\u3089\u3082\u30b3\u30d4\u30fc\u304c\u3067\u304d\u306a\u3044\u3053\u3068\u304c\u4fdd\u8a3c\u3067\u304d\u308b\n\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u308f\u304b\u308a\u3084\u3059\u304f\u306a\u308b\n\u975e\u30e1\u30f3\u30d0\u95a2\u6570\u3082delete\u3067\u304d\u308b: \u671b\u307e\u306a\u3044\u6697\u9ed9\u578b\u5909\u63db\u306b\u3088\u308b\u95a2\u6570\u547c\u3073\u51fa\u3057(bool isLucky(int n); bool isLucky(char) = delete;)\u3084\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u7279\u5b9a\u578b\u3067\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316(template typename<T> void f(T* ptr); template<> void f(void*) = delete;)\u3092\u660e\u793a\u7684\u306b\u7981\u6b62\u3067\u304d\u308b \n\u30e1\u30f3\u30d0\u95a2\u6570\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u7279\u5b9a\u578b\u3067\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u7981\u6b62\u306fdelete\u3067\u3057\u304b\u3067\u304d\u306a\u3044\n\n\n\n\n12: \u4ed6\u306e\u95a2\u6570\u3092\u30aa\u30fc\u30d0\u30e9\u30a4\u30c9\u3057\u3066\u3044\u308b\u95a2\u6570\u306foverride\u3068\u5ba3\u8a00\u305b\u3088\n\n\u95a2\u6570\u306e\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u304c\u8d77\u3053\u308b\u305f\u3081\u306e\u6761\u4ef6\u306f\u3051\u3063\u3053\u3046\u3046\u3063\u3068\u3046\u3057\u304f\u3001\u66f8\u304d\u9593\u9055\u3048\u3066\u3082\u30a8\u30e9\u30fc\u304c\u51fa\u306a\u3044\u3053\u3068\u304c\u591a\u3044\n\n\n\u57fa\u5e95\u30af\u30e9\u30b9\u306e\u95a2\u6570\u306fvirtual\u3067\u306a\u3044\u3068\u3044\u3051\u306a\u3044\n(\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u4ee5\u5916\u3067\u306f)\u95a2\u6570\u540d\u304c\u57fa\u5e95\u30af\u30e9\u30b9\u3068\u6d3e\u751f\u30af\u30e9\u30b9\u3067\u4e00\u81f4\u3057\u3066\u306a\u3044\u3068\u3044\u3051\u306a\u3044\n\u30d1\u30e9\u30e1\u30fc\u30bf\u578b\u3068\u3001const\u3055\u3068\u3001\u623b\u308a\u5024\u3068\u3001\u4f8b\u5916\u898f\u5b9a\u3082\u4e00\u81f4\u3057\u3066\u306a\u3044\u3068\u3044\u3051\u306a\u3044\nC++11\u3067\u306f\u3001\u3055\u3089\u306breference qualifier\u3082\u4e00\u81f4\u3057\u3066\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\n\n\nreference qualifier\u306f*this\u304clvalue\u304brvalue\u304b\u3067\u52d5\u4f5c\u3092\u5207\u308a\u66ff\u3048\u308b\u305f\u3081\u306e\u4ed5\u7d44\u307f (\u5fc5\u8981\u306b\u306a\u3063\u305f\u3089\u672c\u3092\u8aad\u307f\u8fd4\u3059)\n\n\n\n\n\u305d\u3053\u3067\u3001\u30aa\u30fc\u30d0\u30e9\u30a4\u30c9\u3092\u884c\u3046\u6d3e\u751f\u30af\u30e9\u30b9\u5074\u306e\u95a2\u6570\u306e\u5ba3\u8a00\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u305b\u3088: virtual void f() override;\n\n\u4f55\u304b\u30df\u30b9\u304c\u3042\u3063\u305f\u3089\u30b3\u30f3\u30d1\u30a4\u30e9\u304c\u6012\u3063\u3066\u304f\u308c\u308b\u3002\n\n\nfinal\u3068\u3044\u3046\u306e\u3082\u3042\u308b\u3002\u30af\u30e9\u30b9\u306b\u3082\u95a2\u6570\u306b\u3082\u3064\u3051\u3089\u308c\u308b\u3002\n\n\n13: iterator\u3088\u308aconst_iterator\u3092\u4f7f\u3048\n\n* const_iterator\u306fconst X*\u3068\u540c\u3058\u304f\u3001iterator\u306e\u6307\u3059\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30b3\u30fc\u30c9\u304c\u5909\u66f4\u3057\u306a\u3044\u3053\u3068\u3092\u610f\u5473\u3059\u308b\n* C++98\u3067\u306fconst_iterator\u306f\u5b9f\u7528\u7684\u3067\u306a\u304b\u3063\u305f\u304cC++11\u3067\u306f\u975e\u5e38\u306b\u4f7f\u3044\u3084\u3059\u304f\u306a\u3063\u305f\u3002\nstd::vector<int> v;\nauto it = std::find(v.cbegin(), values.cend(), 1983); // it\u306e\u578b\u306fconst_iterator\nv.insert(it, 1998);\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4e2d\u3067\u306fstd::cbegin(v)\u3068\u3044\u3046\u975e\u30e1\u30f3\u30d0\u95a2\u6570\u547c\u3073\u51fa\u3057\u5f62\u304c\u4f7f\u3048\u308b\u304c\u3001C++14\u3067\u3057\u304b\u52d5\u304b\u306a\u3044\u3002(C++\u6a19\u6e96\u5316\u306e\u3068\u304d\u306e\u898b\u843d\u3068\u3057\u306e\u305b\u3044\u3089\u3057\u3044)\n\n\n14: \u4f8b\u5916\u3092\u5410\u304b\u306a\u3044\u95a2\u6570\u306fnoexcept\u3068\u5ba3\u8a00\u305b\u3088\n\nnoexcpt\u306f\u95a2\u6570\u306e\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u306e\u4e00\u90e8\u306a\u306e\u3067\u3001\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u4e00\u65e6\u516c\u958b\u3059\u308b\u3068\u547c\u3073\u51fa\u3057\u5074\u30b3\u30fc\u30c9\u304c\u305d\u308c\u306b\u4f9d\u5b58\u3057\u3066\u3057\u307e\u3046\u3053\u3068\u304c\u3042\u308b\nnoexcept\u95a2\u6570\u306f\u6700\u9069\u5316\u306b\u8ca2\u732e\u3059\u308b\u3002\nnoexcept\u306fmove\u52d5\u4f5c\u3001swap, \u30e1\u30e2\u30ea\u89e3\u653e\u95a2\u6570\u3001\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u7279\u306b\u6709\u76ca\u3002C++11\u3067\u306f\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067noexcept\u3002\n\u5927\u90e8\u5206\u306e\u95a2\u6570\u306f\u73fe\u5b9f\u306b\u306fnoexcept\u5ba3\u8a00\u3057\u306a\u3044\u3002(\u4f8b\u5916\u306f\u6295\u3052\u308b\u304b\u3082..\u3068\u3044\u3046\u7acb\u5834)\n\n\n15: \u4f7f\u3048\u308b\u5834\u6240\u3067\u306fconstexpr\u3092\u4f7f\u3048\n\nconstexpr\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8(\u7d44\u8fbc\u578b\u542b\u3080)\u306f\u5b9a\u5024\u3067\u304b\u3064\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u308f\u304b\u3063\u3066\u3044\u308b\u5024\u3002\nconstexpr\u306a\u95a2\u6570\u306f\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u5224\u660e\u3057\u3066\u3044\u308b\u5b9a\u6570\u3092\u4e0e\u3048\u3066\u547c\u3070\u308c\u308b\u3068\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u5224\u660e\u3057\u3066\u3044\u308b\u5b9a\u6570\u3092\u8fd4\u3059\u3002\nconstexpr\u306f\u95a2\u6570\u306e\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u306e\u4e00\u90e8\u3067\u3001\u3042\u3068\u3067\u5909\u66f4\u3059\u308b\u3068\u5f71\u97ff\u304c\u5927\u304d\u3044\u3053\u3068\u3082\u3042\u308b\u306e\u3067\u6ce8\u610f\u3002\n\n\u4f8b:\n#include <iostream>\n#include <array>\n\nconstexpr int pow(int base, int exp) noexcept {\n  int out = 1;\n  for(int i = 0; i < exp; i++) {\n    out *= base;\n  }\n  return out;\n}\n\nint main() {\n  std::array<int, pow(3, 3)> ary;\n  std::cout << ary.size() << std::endl; // 27\n}\n\n\n16: const\u30e1\u30f3\u30d0\u95a2\u6570\u3092\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u306b\u3057\u308d\n\n\u30e1\u30e2\u5316\u306bconst\u30e1\u30f3\u30d0\u95a2\u6570\u3068mutable\u306a\u30e1\u30e2\u7528\u5909\u6570\u3092\u4f7f\u3046\u306e\u306f\u6b63\u5f53\u3001\u3057\u304b\u3057C++98\u6d41\u306e\u66f8\u304d\u65b9\u3067\u306f\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u3067\u306a\u3044\nmutable\u306amutex\u3092\u30e1\u30f3\u30d0\u8ffd\u52a0\u3059\u308b:\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5168\u4f53\u304c\u30e0\u30fc\u30d6\u53ef\u30fb\u30b3\u30d4\u30fc\u4e0d\u53ef\u306b\u306a\u308b\n1\u3064\u306e\u5909\u6570\u3084\u30e1\u30e2\u30ea\u7b87\u6240\u3060\u3051\u306b\u5909\u66f4\u3092\u52a0\u3048\u308b\u3068\u304d\u306fatomic\u306a\u30ab\u30a6\u30f3\u30bf\u3060\u3051\u3067\u3044\u3044(\u3053\u306e\u5834\u5408\u3082\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u30b3\u30d4\u30fc\u4e0d\u53ef\u306b\u306a\u308b)\n\n\n17: \u7279\u6b8a\u30e1\u30f3\u30d0\u95a2\u6570\u306e(\u81ea\u52d5)\u751f\u6210\u3092\u7406\u89e3\u3057\u308d\n\nC++98\u3067\u306e\u7279\u6b8a\u30e1\u30f3\u30d0\u95a2\u6570: \u30c7\u30d5\u30a9\u30eb\u30c8\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3001\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u3001\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3001\u30b3\u30d4\u30fc\u4ee3\u5165\u6f14\u7b97\u5b50\n\n\n\u5fc5\u8981\u306b\u306a\u3063\u305f\u3068\u304d\u306b public inline \u3067\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u5168\u304f\u306a\u3044\u3068\u304d\u3060\u3051\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u3002\u81ea\u52d5\u751f\u6210\u30b3\u30d4\u30fc\u6f14\u7b97\u306f\u8981\u7d20\u3054\u3068\u306e\u30b3\u30d4\u30fc\u6319\u52d5\u3002\n\n\nC++11\u3067\u52a0\u308f\u3063\u305f\u7279\u6b8a\u30e1\u30f3\u30d0\u95a2\u6570: \u30e0\u30fc\u30d6\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3001\u30e0\u30fc\u30d6\u4ee3\u5165\u6f14\u7b97\u5b50\n\n\n\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u30e0\u30fc\u30d6\u95a2\u6570\u306f\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u306e\u8981\u7d20\u3054\u3068\u306e\u30e0\u30fc\u30d6\u3092\u8a66\u307f\u308b\u3002\u30e0\u30fc\u30d6\u6f14\u7b97\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u306a\u3044\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u306b\u3064\u3044\u3066\u306f\u30b3\u30d4\u30fc\u3092\u3059\u308b\u3002\n\n\n\u30b3\u30d4\u30fc\u6f14\u7b97(\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u30fb\u30b3\u30d4\u30fc\u4ee3\u5165)\u306f\u30012\u3064\u306e\u30e0\u30fc\u30d6\u6f14\u7b97\u304c\u3044\u305a\u308c\u3082\u5ba3\u8a00\u3055\u308c\u3066\u3044\u306a\u3044\u3068\u304d\u3060\u3051\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u3002(\u4ed6\u65b9\u306e)\u30b3\u30d4\u30fc\u6f14\u7b97\u307e\u305f\u306f\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u3068\u304d\u306e\u30b3\u30d4\u30fc\u6f14\u7b97\u306e\u81ea\u52d5\u751f\u6210\u306fC++11\u3067\u306fdeprecated\u3002\n\u30e0\u30fc\u30d6\u6f14\u7b97\u306e\u81ea\u52d5\u751f\u6210\u306f\u3001\u30b3\u30d4\u30fc\u6f14\u7b97\u30fb(\u4ed6\u65b9\u306e)\u30e0\u30fc\u30d6\u6f14\u7b97\u30fb\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u3044\u305a\u308c\u3082\u5ba3\u8a00\u3055\u308c\u3066\u3044\u306a\u3044\u3068\u304d\u3060\u3051\u884c\u308f\u308c\u308b\u3002\n\u30b3\u30d4\u30fc\u6f14\u7b97\u30fb\u30e0\u30fc\u30d6\u6f14\u7b97\u30fb\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u3044\u305a\u308c\u304b\u304c\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u3068\u304d\u306e\u30b3\u30d4\u30fc\u6f14\u7b97\u306e\u81ea\u52d5\u751f\u6210\u306fobsolete\u306a\u306e\u3067\u3001\u30ec\u30ac\u30b7\u30fc\u30b3\u30fc\u30c9\u306bWidget(const Widget&) = default;\u7b49\u306e\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u660e\u793a\u7684\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u5b9f\u88c5\u3067\u3088\u3044\u3053\u3068\u3092\u8868\u660e\u305b\u3088\u3002\n\n\n\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u3092virtual\u5ba3\u8a00\u3059\u308b\u3060\u3051\u3067\u30e0\u30fc\u30d6\u6f14\u7b97\u306e\u751f\u6210\u304c\u6291\u5236\u3055\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u30e0\u30fc\u30d6\u6f14\u7b97\u30fb\u30b3\u30d4\u30fc\u6f14\u7b97\u306e\u30b5\u30dd\u30fc\u30c8\u3092=default\u3067\u660e\u793a\u7684\u306b\u793a\u3059\u306e\u304c\u3088\u3044\u3002\n\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u5f8c\u3067\u5ba3\u8a00\u3059\u308b\u30b1\u30fc\u30b9\u306b\u5099\u3048\u3066\u30b3\u30d4\u30fc\u6f14\u7b97\u30fb\u30e0\u30fc\u30d6\u6f14\u7b97\u3092\u3042\u3089\u304b\u3058\u3081=default\u3067\u660e\u793a\u7684\u306b\u5ba3\u8a00\u3057\u3066\u304a\u304f\u306e\u306f\u3088\u3044\u30de\u30ca\u30fc\u3002\n\n\n\u30e1\u30f3\u30d0\u95a2\u6570\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u3001T\u3092\u81ea\u8eab\u306e\u30af\u30e9\u30b9\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3057\u305f\u3068\u304d\u306b\u7279\u6b8a\u30e1\u30f3\u30d0\u95a2\u6570\u306b\u3042\u305f\u3063\u3066\u3057\u307e\u3046\u5834\u5408\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u3088\u3063\u3066\u7279\u6b8a\u30e1\u30f3\u30d0\u95a2\u6570\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3057\u307e\u3046\u3002 (\u5909\u63db\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u3046\u3063\u304b\u308a\u3067\u304d\u3066\u3057\u307e\u3046\u30b1\u30fc\u30b9\u304c\u3042\u308b\u3053\u3068\u306b\u6ce8\u610f)\n\n\n\u7b2c4\u7ae0: \u30b9\u30de\u30fc\u30c8\u30dd\u30a4\u30f3\u30bf\n\n\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u306f\u5f37\u529b\u3067\u306f\u3042\u308b\u304c\u6271\u3044\u3092\u3061\u3087\u3063\u3068\u3067\u3082\u9593\u9055\u3048\u308b\u3068\u75db\u3044\u76ee\u306b\u3042\u3046\u3002\n\u30b9\u30de\u30fc\u30c8\u30dd\u30a4\u30f3\u30bf\u306f\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u3068\u4f3c\u305f\u6271\u3044\u304c\u3067\u304d\u3001\u843d\u3068\u3057\u7a74\u3092\u907f\u3051\u3089\u308c\u308b\u306e\u3067\u306a\u308b\u3079\u304f\u4f7f\u3048\u3002C++\u306b\u306fstd::auto_ptr(deprecated), std::unique_ptr, std::shared_ptr, std::uniq_ptr\u304c\u3042\u308b\u3002\n\n\n18: \u6392\u4ed6\u7684\u6240\u6709\u6a29\u306b\u3088\u308b\u30ea\u30bd\u30fc\u30b9\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u306b\u306fstd::unique_ptr\u3092\u5229\u7528\u305b\u3088\n\nstd::unique_ptr\u306f\u6392\u4ed6\u7684\u6240\u6709\u6a29\u306e\u30bb\u30de\u30f3\u30c6\u30a3\u30af\u30b9\u3092\u3082\u3064\u3002\u30e0\u30fc\u30d6\u53ef\u3001\u30b3\u30d4\u30fc\u4e0d\u53ef\u3002\u7834\u58ca\u6642\u306bnon-null\u306estd::unique_ptr\u306f\u81ea\u5206\u304c\u6307\u3057\u3066\u3044\u308b\u5148\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u7834\u58ca\u3059\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u547c\u3070\u308c\u308b\u304c\u30c7\u30ea\u30fc\u30bf\u95a2\u6570\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\n\n\u30c7\u30ea\u30fc\u30bf\u3092\u30e9\u30e0\u30c0\u5f0f\u3067\u66f8\u304f\u3068\u4fbf\u5229\u3060\u3057\u6027\u80fd\u3082\u3088\u3044\u3002(\u30ad\u30e3\u30d7\u30c1\u30e3\u3092\u3057\u306a\u3044\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u95a2\u6570\u30dd\u30a4\u30f3\u30bf\u306e\u30b9\u30da\u30fc\u30b9\u3092\u98df\u308f\u306a\u3044)\n\n\n\u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u304cstd::unique_ptr\u3092\u8fd4\u3059\u306e\u306f\u3088\u304f\u3042\u308b\u4f7f\u3044\u304b\u305f\u3002\u30e0\u30fc\u30d6\u6f14\u7b97\u3067\u6240\u6709\u6a29\u3092\u5f15\u304d\u7d99\u3044\u3067\u3044\u304f\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u30e6\u30fc\u30b6\u306fstd::unique_ptr\u3092\u8cb0\u3048\u3070\u30ea\u30bd\u30fc\u30b9\u89e3\u653e(\u3057\u5fd8\u308c\u3084\u8907\u6570\u56de\u89e3\u653e\u3001\u89e3\u653e\u65b9\u6cd5)\u306b\u3064\u3044\u3066\u60a9\u307e\u306a\u304f\u3066\u3088\u3044\u3002\n\n\n\u521d\u671f\u5316\u305a\u307f\u306estd::unique_ptr\u306b\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u306e\u4ee3\u5165\u306f\u3067\u304d\u306a\u3044\u3002\nstd::unique_ptr\u306fstd::shared_ptr\u306b\u52b9\u7387\u7684\u306b\u6697\u9ed9\u5909\u63db\u3067\u304d\u308b\u3002(\u5909\u63db\u306f\u3001\u30dd\u30a4\u30f3\u30bf\u304c\u6307\u3059\u30ea\u30bd\u30fc\u30b9\u306e\u6392\u4ed6\u6240\u6709\u6a29\u7ba1\u7406\u3092\u3084\u3081\u5171\u6709\u7ba1\u7406\u306b\u79fb\u884c\u3059\u308b\u3053\u3068\u3092\u610f\u5473\u3059\u308b)\n\n\u81ea\u4f5c\u306e\u4f8b:\n#include <iostream>\n#include <boost/type_index.hpp>\n\nclass BaseItem {\npublic:\n  virtual ~BaseItem(){};\n};\n\ntemplate<typename T>\nclass Item : public BaseItem{\n  T t;\n};\n\ntemplate<typename T>\nauto factory() {\n  auto customDeleter = [](BaseItem *pItem) {\n    std::cout << \"Item of type \" << boost::typeindex::type_id_with_cvr<T>().pretty_name() << \" is being deleted!\" << std::endl;\n    delete pItem;\n  };\n  std::unique_ptr<BaseItem, decltype(customDeleter)> pItem(new Item<T>, customDeleter); // decltype\u306e\u3042\u305f\u308a\u306b\u6ce8\u76ee\n  return pItem;\n};\n\nint main() {\n  auto i = factory<int>(); // auto \u3092\u4f7f\u3046\u3068\u3088\u3044\n  // output: Item of type int is being deleted!\n}\n\n\n19: \u5171\u540c\u6240\u6709\u6a29\u306b\u3088\u308b\u30ea\u30bd\u30fc\u30b9\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u306b\u306f std::shared_ptr \u3092\u5229\u7528\u305b\u3088\n\nstd::shared_ptr\u306f\u30ea\u30bd\u30fc\u30b9\u306e\u30e9\u30a4\u30d5\u30bf\u30a4\u30e0\u7ba1\u7406\u3092\u81ea\u52d5\u5316\u3059\u308b\u304c\u3001GC(Garbage Collection)\u3068\u9055\u3063\u3066\u30bf\u30a4\u30df\u30f3\u30b0\u306f\u4e88\u6e2c\u53ef\u80fd\u3002\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u307e\u3060\u4f7f\u308f\u308c\u3066\u3044\u308b\u304b\u3092\u77e5\u308b\u305f\u3081\u306b\u53c2\u7167\u30ab\u30a6\u30f3\u30bf\u304c\u4f7f\u308f\u308c\u308b\u3002\n\n\nstd::shared_ptr\u306e\u30b5\u30a4\u30ba\u306f\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u306e\u500d\u3002std::shared_ptr\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306f\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u306e\u307b\u304b\u3001\u53c2\u7167\u30ab\u30a6\u30f3\u30bf\u7b49\u3092\u542b\u3080\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u3078\u306e\u30dd\u30a4\u30f3\u30bf\u3082\u5185\u5305\u3055\u308c\u308b\u305f\u3081\u3002\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u306e\u305f\u3081\u306e\u30e1\u30e2\u30ea\u9818\u57df\u306f\u52d5\u7684\u78ba\u4fdd\u3055\u308c\u308b(\u5178\u578b\u7684\u306b\u306f\u30d2\u30fc\u30d7\u306b)\u3002\n\u53c2\u7167\u30ab\u30a6\u30f3\u30bf\u306e\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u30fb\u30c7\u30af\u30ea\u30e1\u30f3\u30c8\u306f\u30a2\u30c8\u30df\u30c3\u30af\u3067\u306a\u304f\u3066\u306f\u306a\u3089\u306a\u3044\u3002(\u52b9\u7387\u304c\u60aa\u304f\u306a\u308a\u304c\u3061)\n\u30e0\u30fc\u30d6\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30b7\u30e7\u30f3\u306f\u53c2\u7167\u30ab\u30a6\u30f3\u30bf\u3092\u5897\u3084\u3055\u306a\u3044\u3002(\u52b9\u7387\u7684)\n\n\nstd::shared_ptr\u3067\u3082\u30ab\u30b9\u30bf\u30e0\u30c7\u30ea\u30fc\u30bf\u304c\u4f7f\u3048\u308b\u304c\u3001std::unique_ptr\u3068\u9055\u3063\u3066\u578b\u3084\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b5\u30a4\u30ba\u306b\u306f\u5f71\u97ff\u3057\u306a\u3044\u3002\u30c7\u30ea\u30fc\u30bf\u60c5\u5831\u306e\u305f\u3081\u306e\u8ffd\u52a0\u9818\u57df\u306f\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u306e\u4e00\u90e8\u3068\u3057\u3066\u52d5\u7684\u5272\u308a\u5f53\u3066\u3055\u308c\u308b\u305f\u3081\u3002\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u306f\u53c2\u7167\u30ab\u30a6\u30f3\u30c8\u306e\u4ed6\u306b\u30a6\u30a3\u30fc\u30af\u30ab\u30a6\u30f3\u30c8\u3001\u30ab\u30b9\u30bf\u30e0\u30c7\u30ea\u30fc\u30bf\u3001\u30a2\u30ed\u30b1\u30fc\u30bf\u7b49\u3092\u542b\u3080\u3002\n\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u306f (1) std::make_shared\u304c\u547c\u3070\u308c\u305f\u3068\u304d\u3001(2) std::unique_ptr\u3084std::auto_ptr\u3084\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u304b\u3089std::shared_ptr\u304c\u4f5c\u3089\u308c\u305f\u3068\u304d\u3001\u306b\u65b0\u898f\u4f5c\u6210\u3055\u308c\u308b\u3002\n\u30b0\u30ed\u30fc\u30d0\u30eb\u306a\u91cd\u8907\u56de\u907f\u306e\u6a5f\u69cb\u306f\u306a\u304f\u3001\u540c\u4e00\u306e\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u304b\u3089\u8907\u6570\u306estd::shared_ptr\u304c\u4f5c\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u4f5c\u3089\u306a\u3044\u3088\u3046\u6ce8\u610f\u3002\u30ab\u30b9\u30bf\u30e0\u30c7\u30ea\u30fc\u30bf\u3092\u4f7f\u308f\u306a\u3044\u3068\u304d\u306fstd::shared_ptr\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u4ee3\u308f\u308a\u306bstd::make_shared\u3092\u4f7f\u3044\u3001\u30ab\u30b9\u30bf\u30e0\u30c7\u30ea\u30fc\u30bf\u3042\u308a\u306e\u3068\u304d\u306fstd::shared_ptr<Widget> sp(new Widget, customDeleter);\u306e\u3088\u3046\u306b1\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u3067\u66f8\u304f\u3068\u3088\u3044\u3002\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u306f\u3044\u3063\u3061\u3087\u307e\u3048\u306b\u7d99\u627f\u3068\u304b\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067vtable\u3068\u304b\u3082\u542b\u307f\u3001\u6700\u4f4e3\u30ef\u30fc\u30c9\u304f\u3089\u3044\u306e\u30b5\u30a4\u30ba\u306f\u3042\u308b\u3002\n\n\n\n\n20: \u6307\u793a\u5148\u304c\u7834\u58ca\u3055\u308c\u3066\u3082\u69cb\u308f\u306a\u3044std::shared_ptr\u3068\u3057\u3066std::weak_ptr\u3092\u4f7f\u3048\n\nstd::weak_ptr\u306fstd::shared_ptr\u306e\u3088\u3046\u306b\u632f\u308b\u821e\u3046\u304c\u5171\u6709\u6240\u6709\u6a29\u306b\u306f\u52a0\u308f\u3089\u306a\u3044(\u53c2\u7167\u30ab\u30a6\u30f3\u30c8\u306b\u5f71\u97ff\u3057\u306a\u3044)\u3002\u77e5\u3089\u306a\u3044\u3046\u3061\u306b\u53c2\u7167\u5148\u304c\u7834\u58ca\u3055\u308c\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002\nstd::weak_ptr\u306fstd::shared_ptr\u304b\u3089\u4f5c\u308b\u3002\nstd::weak_ptr::expired()\u3068\u3044\u3046\u30e1\u30f3\u30d0\u95a2\u6570\u3067\u751f\u304d\u3066\u3044\u308b\u304b\u3092\u30c1\u30a7\u30c3\u30af\u3067\u304d\u308b\u304c\u3001\u30c1\u30a7\u30c3\u30af\u3057\u3066\u751f\u304d\u3066\u3044\u305f\u3089\u4f7f\u3046\u3088\u3046\u306a\u30b3\u30fc\u30c9\u306b\u306f\u30a2\u30c8\u30df\u30c3\u30af\u64cd\u4f5c\u306e\u554f\u984c\u304c\u4f34\u3046\u3002\nstd::weak_ptr::lock()\u3068\u3044\u3046\u95a2\u6570\u3067\u53c2\u7167\u5148\u304c\u751f\u304d\u3066\u3044\u308b\u5834\u5408\u3060\u3051std::shared_ptr\u3092\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u53c2\u7167\u5148\u304c\u6b7b\u3093\u3067\u3044\u308c\u3070nullptr\u304c\u8fd4\u308b\u3002\nstd::weak_ptr\u306e\u3064\u304b\u3044\u3069\u3053\u308d\n\n\n\u30ad\u30e3\u30c3\u30b7\u30e5\u3002\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u751f\u6210\u304c\u9ad8\u30b3\u30b9\u30c8\u3067\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u518d\u5229\u7528\u53ef\u80fd\u3060\u304c\u751f\u6210\u3055\u308c\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6c38\u4e45\u306b\u6b8b\u3057\u3066\u304a\u304f\u3068\u30e1\u30e2\u30ea\u5bb9\u91cf\u304c\u5927\u5909\u306a\u30b1\u30fc\u30b9\u3067\u300c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u3082\u3057\u307e\u3060\u6b8b\u3063\u3066\u3044\u305f\u3089\u30ad\u30e3\u30c3\u30b7\u30e5\u3068\u3057\u3066\u518d\u5229\u7528\u3059\u308b\u300d\u6226\u7565\u3092\u3068\u308b\u306e\u306b\u4f7f\u3046\u3002\n\u30aa\u30d6\u30b5\u30fc\u30d0\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3002\u30aa\u30d6\u30b6\u30fc\u30d0\u304c\u307e\u3060\u751f\u304d\u3066\u3044\u305f\u3089\u72b6\u614b\u5909\u5316\u3092\u5831\u544a\u3059\u308b\u304c\u3001\u30aa\u30d6\u30b6\u30fc\u30d0\u3092\u78ba\u5b9f\u306b\u751f\u304b\u3057\u3066\u304a\u304d\u305f\u3044\u308f\u3051\u3067\u306f\u306a\u3044\u3068\u304d\u3002\nstd::shared_ptr\u3067\u6307\u3055\u308c\u3066\u3044\u308b\u5171\u6709\u3055\u308c\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u300c\u8ab0\u304b\u3089\u6307\u3055\u308c\u3066\u3044\u308b\u304b\u300d\u3092\u4fdd\u6301\u3057\u305f\u3044\u5834\u5408\u3002std::shared_ptr\u3067\u6307\u3057\u8fd4\u3059\u3068\u5faa\u74b0\u53c2\u7167\u306b\u306a\u3063\u3066\u3057\u307e\u3046(\u53c2\u7167\u30ab\u30a6\u30f3\u30bf\u578b\u306eGC\u3068\u540c\u3058\u3067\u30ea\u30bd\u30fc\u30b9\u304c\u56de\u53ce\u3055\u308c\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3046)\u306e\u3067std::weak_ptr\u304c\u3088\u3044\u3002\n\n\n\u305f\u3060\u3057\u3001\u5faa\u74b0\u304c\u3042\u308a\u3048\u306a\u3044\u968e\u5c64\u7684\u306a\u30c7\u30fc\u30bf\u69cb\u9020\u3060\u3063\u305f\u3089std::weak_ptr\u3092\u308f\u3056\u308f\u3056\u4f7f\u308f\u306a\u304f\u3066\u826f\u3044\u3002\u6728\u69cb\u9020\u306e\u89aa\u304b\u3089\u5b50\u3078\u306e\u30dd\u30a4\u30f3\u30bf\u306fstd::uniq_ptr\u3001\u5b50\u304b\u3089\u89aa\u3078\u306e\u30d0\u30c3\u30af\u30dd\u30a4\u30f3\u30bf\u3068\u304b\u306f\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u3067OK\u3002\n\n\n\n\n\n\n21: new\u3088\u308astd::make_unique(C++14)\u3084std::make_shared(C++11)\u3092\u4f7f\u3048\n\n\nauto upw(std::make_unique<Widget>());\u306e\u3088\u3046\u306b\u4f7f\u3046\u3002Widget\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u6ce8\u610f\u3002std::make_shared\u306fC++11\u3067\u4f7f\u3048\u308b\u304c\u3001std::make_unique\u306e\u307b\u3046\u306fC++14\u3067\u3057\u304b\u4f7f\u3048\u306a\u3044\u3002\n\u30e1\u30ea\u30c3\u30c8\n\n\n\nstd::unique_ptr<Widget> upw(new Widget);\u3068Widget\u30922\u56de\u66f8\u304f\u3088\u3046\u306a\u30b3\u30fc\u30c9\u306e\u5197\u9577\u6027\u3092\u907f\u3051\u3089\u308c\u308b\n\u4f8b\u5916\u5b89\u5168\u6027\u306e\u4fdd\u8a3c\u3002func(std::shared_ptr<Widget>(new Widget));\u3068\u304b\u66f8\u3044\u305f\u3068\u304d\u306b\u3001\u30b3\u30f3\u30d1\u30a4\u30e9\u6700\u9069\u5316\u306b\u3088\u3063\u3066\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u304c\u30b9\u30de\u30fc\u30c8\u30dd\u30a4\u30f3\u30bf\u306b\u683c\u7d0d\u3055\u308c\u308b\u524d\u306bfunc()\u304c\u547c\u3070\u308c\u3001\u4f8b\u5916\u304c\u767a\u751f\u3057\u3066\u30ea\u30bd\u30fc\u30b9\u30ea\u30fc\u30af\u3057\u305f\u308a\u3057\u306a\u3044\u3053\u3068\u3092\u4fdd\u8a3c\u3067\u304d\u308b\u3002\n\u52b9\u7387\u306e\u5411\u4e0a: new\u3068\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u306e\u30e1\u30e2\u30ea\u78ba\u4fdd\u304c\u307e\u3068\u3081\u30661\u56de\u3067\u884c\u308f\u308c\u308b\n\n\n\u4f7f\u308f\u306a\u3044\u307b\u3046\u304c\u3044\u3044\u3068\u304d\u3001\u4f7f\u3063\u3066\u306f\u3044\u3051\u306a\u3044\u3068\u304d\n\n\n\u30ab\u30b9\u30bf\u30e0\u30c7\u30ea\u30fc\u30bf\u3092\u4f7f\u3046\u3068\u304d\nstd::initializer_list \u306b\u3088\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u521d\u671f\u5316\u304c\u5fc5\u8981\u306a\u3068\u304d (\u305f\u3060\u3057auto\u3092\u3046\u307e\u304f\u4f7f\u3048\u3070\u56de\u907f\u3067\u304d\u308b)\n(std::make_shared\u306e\u307f\u95a2\u4fc2\u3042\u308a)\n\n\nnew/delete\u3067\u72ec\u81ea\u306e\u30e1\u30e2\u30ea\u78ba\u4fdd\u3092\u3057\u3066\u3044\u308b\u3068\u304d\n\u30e1\u30e2\u30ea\u306b\u53b3\u3057\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3001\u304b\u3064\u683c\u7d0d\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b5\u30a4\u30ba\u304c\u5927\u304d\u304f\u3001\u304b\u3064weak_ptr\u304cshared_ptr\u3088\u308a\u9577\u3044\u30e9\u30a4\u30d5\u30bf\u30a4\u30e0\u3092\u6301\u3064\u3068\u304d (\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u306fweak_ptr\u304c\u3042\u308b\u9650\u308a\u6b8b\u3055\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u304c\u3001\u30bb\u30c3\u30c8\u3067\u30e1\u30e2\u30ea\u30a2\u30ed\u30b1\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3068\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u672c\u4f53\u90e8\u5206\u306e\u30e1\u30e2\u30ea\u3082weak_ptr\u304c\u306a\u304f\u306a\u308b\u307e\u3067\u89e3\u653e\u3067\u304d\u306a\u3044)\n\n\n\n\n\n\n22: Pimpl\u30a4\u30c7\u30a3\u30aa\u30e0\u3092\u4f7f\u3063\u3066\u3044\u308b\u3068\u304d\u306f\u7279\u6b8a\u30e1\u30f3\u30d0\u95a2\u6570\u3092\u5b9f\u88c5\u30d5\u30a1\u30a4\u30eb\u306b\u7f6e\u3051\n\nPimpl\u30a4\u30c7\u30a3\u30aa\u30e0\u306f\u30af\u30e9\u30b9\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8(\u5229\u7528\u8005)\u304b\u3089\u30af\u30e9\u30b9\u306e\u5b9f\u88c5\u3092\u96a0\u3059\u3053\u3068\u3067\u30d3\u30eb\u30c9\u6642\u9593\u3092\u77ed\u7e2e\u3059\u308b\nstd::unique_ptr\u3067Pimpl\u30a4\u30c7\u30a3\u30aa\u30e0\u3092\u5b9f\u88c5\u3059\u308b\u3068\u304d\u306f\u3001\u30d8\u30c3\u30c0\u306b\u7279\u6b8a\u30e1\u30f3\u30d0\u95a2\u6570\u3092\u5ba3\u8a00\u3057\u3001\u5b9f\u88c5\u30d5\u30a1\u30a4\u30eb\u3067\u5b9a\u7fa9\u305b\u3088\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u5b9f\u88c5\u3067OK\u306a\u3068\u304d\u3082\u660e\u793a\u7684\u306b\u5ba3\u8a00\u305b\u3088\u3002\nstd::shared_ptr\u3092\u4f7f\u3046\u3068\u9762\u5012\u306a\u3053\u3068\u306b\u306a\u308b\u306e\u3067std::unique_ptr\u3092\u4f7f\u3048\u3002\n\n\n\u7b2c5\u7ae0: rvalue reference\u3001\u30e0\u30fc\u30d6\u30bb\u30de\u30f3\u30c6\u30a3\u30af\u30b9\u3001\u30d1\u30fc\u30d5\u30a7\u30af\u30c8\u30d5\u30a9\u30ef\u30fc\u30c7\u30a3\u30f3\u30b0\n\n\u3053\u308c\u3089\u306f\u4e00\u898b\u30b9\u30c3\u30ad\u30ea\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3001\u6df1\u304f\u5b66\u3073\u59cb\u3081\u308b\u3068\u5fae\u5999\u3002\u3057\u304b\u3057\u304d\u3061\u3093\u3068\u7406\u89e3\u3059\u308c\u3070\u518d\u3073\u30b9\u30c3\u30ad\u30ea\u3067\u304d\u308b\u3088\u3002\n\u610f\u8b58\u3057\u3066\u304a\u3051: \u95a2\u6570\u306e\u5b9f\u5f15\u6570(void f(Widget&& w);\u306b\u304a\u3051\u308bw)\u306f\u3001\u305f\u3068\u3048\u305d\u306e\u578b\u304crvalue reference\u3067\u3042\u308d\u3046\u3068\u3082\u3001\u305d\u308c\u81ea\u8eab\u306f \u5e38\u306b lvalue\u3002\n\n\n23: std::move\u3068std::forward\u3092\u7406\u89e3\u305b\u3088\n\nstd::move\u3068std::forward\u306e\u5b9f\u614b\u306f\u30ad\u30e3\u30b9\u30c8\u3067\u3001\u5b9f\u884c\u30b3\u30fc\u30c9\u306f\u751f\u6210\u3057\u306a\u3044\u3002 \nstd::move\u306f\u5f15\u6570\u3092\u7121\u6761\u4ef6\u306brvalue\u306b\u30ad\u30e3\u30b9\u30c8\u3059\u308b\u3002 \u305d\u308c\u3060\u3051\u3002\n\nstd::move\u306f\u3001\u5f15\u6570\u3092move\u5bfe\u8c61\u306b\u3057\u3066\u3088\u3044\u3068\u3044\u3046\u8868\u660e\u3092\u610f\u5473\u3059\u308b\u3068\u306f\u9650\u3089\u306a\u3044\u3002\u4f8b: const\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092std::move\u3067\u30ad\u30e3\u30b9\u30c8\u3057\u3066\u3082\u3001 const\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3078\u306ervalue reference\u3068\u306a\u308b\u3060\u3051\u3002const \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u30e0\u30fc\u30d6\u5bfe\u8c61\u306b\u3067\u304d\u306a\u3044\u306e\u3067\u5bfe\u8c61\u306e\u30af\u30e9\u30b9\u304c\u30e0\u30fc\u30d6\u6f14\u7b97\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u3066\u3082\u7d50\u5c40\u30b3\u30d4\u30fc\u304c\u884c\u308f\u308c\u308b\u3002\n\n\nstd::forward\u306f\u6761\u4ef6\u4ed8\u304d\u30ad\u30e3\u30b9\u30c8\u3067\u3001\u5f15\u6570\u304crvalue\u306b\u7d10\u3065\u304f\u3068\u304d\u3060\u3051rvalue\u306b\u30ad\u30e3\u30b9\u30c8\u3059\u308b\u3002\n\n\u4f8b:\nvoid process(const Widget& lvalArg); // lvalue\u3092\u51e6\u7406\u3059\u308b\nvoid process(Widget&& rvalArg);      // rvalue\u3092\u51e6\u7406\u3059\u308b\n\ntemplate <typename T>\nvoid logAndProcess(T&& param) {\n  // logging code blah blah blah\n  // ...\n  process(std::forward<T>(param)); // logAndProcess\u304crvalue\u3092\u4e0e\u3048\u3066\u547c\u3070\u308c\u305f\u3068\u304d\u3060\u3051param\u3092rvalue\u306b\u30ad\u30e3\u30b9\u30c8\u3059\u308b\n}\n\n\n24: universal reference\u3068rvalue reference\u3092\u533a\u5225\u305b\u3088\n\nT&&\u306b\u306f\u3001\u4f7f\u308f\u308c\u65b9\u306b\u3088\u3063\u30662\u3064\u306e\u7570\u306a\u308b\u610f\u5473\u304c\u3042\u308b\u3002\n\u578b\u63a8\u8ad6\u3092\u4f34\u3046T&&\u306e\u4f7f\u7528\u3068auto&&\u306funiversal reference\u3002\u305f\u3060\u3057T&&\u306b\u3064\u3044\u3066\u306f\u3074\u3063\u305f\u308a\u3053\u306e\u8a18\u6cd5\u3069\u304a\u308a\u306e\u5834\u5408\u306e\u307f\u3002 const\u3068\u304bT\u306b\u4f55\u304b\u304f\u3063\u3064\u3044\u3066\u3044\u305f\u308a\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u306f\u3042\u3063\u3066\u3082\u305d\u3053\u3067\u578b\u63a8\u8ad6\u304c\u3055\u308c\u306a\u3044\u5834\u5408\u306funiversal reference\u3067\u306a\u304frvalue reference\u3068\u306a\u308b\u3002\n\u4e0a\u8a18\u6761\u4ef6\u4ee5\u5916\u306f\u3059\u3079\u3066rvalue reference\u3002\nuniversal reference\u306frvalue\u3067\u521d\u671f\u5316\u3055\u308c\u308c\u3070rvalue\u3092\u6307\u3059\u3082\u306e\u3068\u306a\u308b\u3002lvalue\u3067\u521d\u671f\u5316\u3055\u308c\u308c\u3070lvalue\u3092\u6307\u3059\u3082\u306e\u3068\u306e\u306a\u308b\u3002\nuniversal reference\u3068\u3044\u3046\u306e\u306f\u5b9f\u306f\u65b9\u4fbf\u3067\u3001\u6587\u6cd5\u4e0a\u306f\u5b9f\u969b\u306f\u5b58\u5728\u3057\u306a\u3044\u5e7b\u3002(see #28)\n\nvoid f(Widget && param);   // rvalue reference\nWidget && var1 = Widget(); // rvalue reference\nauto && var2 = var1;       // universal reference\ntemplate<typename T> void f(std::vector<T>&& param); // rvalue reference\ntemplate<typename T> void f(const T&& param); // rvalue reference\ntemplate<typename T> void f(T&& param); // universal reference\ntemplate<class T, class Allocator = allocator<T>>\nclass vector {\npublic\n    void push_back(T&& x); // rvalue referene\n    template <class... Args>\n    void emplace_back(Args&&... args); // univerrsal reference\n};\n\n\n25: rvalue reference\u306b\u306fstd::move\u3092\u3001universal reference\u306b\u306fstd::forward\u3092\u4f7f\u3048\n\nrvalue reference\u306f\u30e0\u30fc\u30d6\u5bfe\u8c61\u3068\u3057\u3066\u3088\u3044\u30aa\u30d6\u30b8\u30a7\u30af\u30c8(\u629c\u3051\u6bbb\u306b\u3057\u3066\u3088\u3044\u30aa\u30d6\u30b8\u30a7\u30af\u30c8)\u3078\u306e\u53c2\u7167\u3002\nstd::forward\u3092rvalue reference\u306b\u9069\u7528\u3059\u308b\u306e\u306f\u3001\u52d5\u4f5c\u4e0a\u306f\u554f\u984c\u306a\u3044\u304c\u8aad\u307f\u624b\u306e\u6df7\u4e71\u3092\u62db\u304f\u304b\u3089\u3084\u3081\u3066\u304a\u3051\u3002\nstd::move\u3092universal reference\u306b\u9069\u7528\u3059\u308b\u306e\u306f\u7d76\u5bfe\u3060\u3081\u3002\n\u305d\u3082\u305d\u3082universal reference\u306a\u3093\u304b\u306a\u304d\u3083\u3044\u3044\u3058\u3083\u306a\u3044\u304b\u3001\u3068\u601d\u3046\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u4ee5\u4e0b\u306e\u5fc5\u7136\u6027\u304c\u3042\u308b\u306e\u3060\u3002\n\n\n\u4f59\u5206\u306a\u4e00\u6642\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u3089\u306a\u3044\u3067\u3059\u3080\u30b1\u30fc\u30b9\u304c\u3042\u308b\u3001\n\u8907\u6570\u307e\u305f\u306f\u4e0d\u5b9a\u6570\u500b)\u306e\u5f15\u6570\u306elvalue\u3068rvalue\u306e2^n\u500b\u306e\u7d44\u307f\u5408\u308f\u305b\u306b\u5bfe\u3059\u308b\u30aa\u30fc\u30d0\u30ed\u30fc\u30c9\u3092\u3059\u3079\u3066\u66f8\u304f\u306e\u306f\u5acc(\u4e0d\u5b9a\u6570\u500b\u3067\u306f\u4e0d\u53ef\u80fd)\n\n\nstd::move\u3084std::forward\u306f\u305d\u306e\u53c2\u7167\u306e\u6700\u5f8c\u306e\u5229\u7528\u6642\u306b\u3060\u3051\u3064\u3051\u308b\u3002(\u307e\u3060\u6b21\u56de\u4f7f\u3046\u306e\u306b\u5bfe\u8c61\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u629c\u3051\u6bbb\u306b\u3055\u308c\u3066\u3057\u307e\u3063\u3066\u306f\u56f0\u308b\u304b\u3089)\n\u5024\u6e21\u3057\u3067return\u3059\u308b\u95a2\u6570\u3067rvalue reference\u3084unversal refernce\u3092return\u3059\u308b\u3068\u304d\u3082std::move\u3084std::forward\u3092\u3064\u3051\u308d\u3002\n\u3060\u304b\u3089\u3068\u3044\u3063\u3066\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3092\u5024\u6e21\u3057\u3067return\u3059\u308b\u3068\u304d\u306bstd::move\u3068\u304b\u3064\u3051\u308b\u306a\u3002RVO (Return Value Optimization)\u306b\u4efb\u305b\u308d\u3002\n\n\n26: universal reference\u306b\u3064\u3044\u3066\u306e\u30aa\u30fc\u30d0\u30ed\u30fc\u30c9\u3092\u907f\u3051\u308d\n\nuniversal reference\u5f15\u6570\u306e\u95a2\u6570\u3092\u30aa\u30fc\u30d0\u30ed\u30fc\u30c9\u3057\u305f\u3068\u304d\u3001universal refernce\u7248\u306e\u307b\u3046\u306e\u95a2\u6570\u304c\u307b\u3068\u3093\u3069\u306e\u30b1\u30fc\u30b9\u3067\u547c\u3070\u308c\u3066\u3057\u307e\u3046\u3002(\u6697\u9ed9\u578b\u5909\u63db\u3084const\u306e\u8ffd\u52a0\u304c\u306a\u3044\u3068\u975euniversal reference\u7248\u306e\u95a2\u6570\u304c\u547c\u3070\u308c\u306a\u3044\u3068\u304d\u306funiversal reference\u7248\u304c\u512a\u5148\u3055\u308c\u3066\u3057\u307e\u3046\u3002)\n\ntemplate<typename T> void f(T&& name);\nvoid f(int x);\nshort i = 27;\nf(i); // int \u7248\u3067\u306a\u306f\u304f universal reference\u7248\u304c\u547c\u3070\u308c\u308b\n\n\nperfect forwarding\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306f\u7279\u306b\u554f\u984c\u304c\u3042\u308a\u3001non-const\u306alvalue\u3092\u4e0e\u3048\u3066\u547c\u3073\u51fa\u305d\u3046\u3068\u3057\u305f\u3068\u304d\u306b\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3088\u308a\u512a\u5148\u3055\u308c\u3066\u3057\u307e\u3046\u3002\u305d\u306e\u305f\u3081\u3001\u6d3e\u751f\u30af\u30e9\u30b9\u3067\u304b\u3089\u306e\u57fa\u5e95\u30af\u30e9\u30b9\u306e\u30b3\u30d4\u30fc\u30fb\u30e0\u30fc\u30d6\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u547c\u3073\u51fa\u3057\u306bperfect forwarding\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u5272\u308a\u8fbc\u3093\u3067\u3057\u307e\u3046\u3002 (perfect forwarding\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306f\u5fc5\u305a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306a\u306e\u3067\u3001\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3068\u306f\u7570\u306a\u308b\u6319\u52d5\u3067\u3042\u308b\u306f\u305a\u3067\u3001\u7d50\u679c\u554f\u984c\u3092\u62db\u304f)\n\n\nconst \u306e\u3064\u3044\u305f\u5f15\u6570\u3092\u6301\u3064\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3088\u308a\u3001const\u306e\u3064\u3044\u3066\u306a\u3044\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5f15\u6570\u3092\u6301\u3064perfect forwarding\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u307b\u3046\u304c\u512a\u5148\u5ea6\u304c\u9ad8\u3044\n\n\n\nclass Person{\npublic:\n  template<typename T>explicit Person(T&& n) : name(std::forward<T>(n)) {}\n   // perfect forwarding constructor: std::string\u306a\u3069\u3044\u308d\u3093\u306a\u578b\u3067\u540d\u524d\u3092\u4e0e\u3048\u3066Person\u3092\u521d\u671f\u5316\u3059\u308b\u610f\u56f3\n   Person(const Person& rhs); // \u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf (\u30b3\u30f3\u30d1\u30a4\u30e9\u751f\u6210)\n   Person(Person && rhs); // \u30e0\u30fc\u30d6\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf (\u30b3\u30f3\u30d1\u30a4\u30e9\u751f\u6210)\n   ...\n};\nPerson p(\"Nancy\");\nauto cloneOf(p); // \u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc: \u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u3067\u306a\u304fperfect forwarding\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u547c\u3093\u3067\u3057\u307e\u3046\n\n\n27: universal reference\u306b\u3064\u3044\u3066\u306e\u30aa\u30fc\u30d0\u30ed\u30fc\u30c9\u306e\u4ee3\u66ff\u65b9\u6cd5\u3092\u77e5\u3063\u3066\u304a\u3051\n\n\u30aa\u30fc\u30d0\u30ed\u30fc\u30c9\u3092\u8ae6\u3081\u308b: \u554f\u984c\u5916\nconst T& \u6e21\u3057\u306b\u3059\u308b: C++98\u6642\u4ee3\u306b\u623b\u308a\u3001perfect forwarding \u3092\u8ae6\u3081\u308b\n\u5024\u6e21\u3057\u306b\u3059\u308b\ntag dispatch\u3092\u4f7f\u3046\n\ntemplate<typename T> void logAndAdd(T&& name) {\n  logAndAddImpl(std::forward<T>(name),\n                std::is_integral<typename std::remove_reference<T>::type()); \n};\n\ntemplate<typename T> void logAndAddImpl(T&& name, std::true_type); // T \u304c\u6574\u6570\u578b\u306e\u3068\u304d\u306b\u547c\u3070\u308c\u308b\ntemplate<typename T> void logAndAddImpl(T&& name, std::false_type); // \u305d\u308c\u4ee5\u5916\u306e\u3068\u304d\u306b\u547c\u3070\u308c\u308b\n\n\nuniversal reference\u3092\u53d7\u3051\u53d6\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u5236\u7d04\u3092\u52a0\u3048\u308b\n\nclass Person{\npublic:\n    template<\n        typename T,\n        typename = typename std::enable_if<\n            !std::is_same<Person,\n                typename std::decay<T>::type>::value\n            >::type\n    >\n    explicit Person(T&& n);\n    ...\n};\n\n\nperfect fowarding\u306f\u6027\u80fd\u4e0a\u6709\u5229\u3060\u304c\u3001#30\u306b\u793a\u3059\u5229\u7528\u6761\u4ef6\u306e\u5236\u7d04\u304c\u3042\u308b\u307b\u304b\u3001\u30b3\u30f3\u30d1\u30a4\u30e9\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u5206\u304b\u308a\u306b\u304f\u304f\u306a\u308b(forward\u3055\u308c\u305f\u5148\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u305f\u3081)\n\n\n28: reference collapsing(\u53c2\u7167\u306e\u7e2e\u7d04?)\u3092\u7406\u89e3\u305b\u3088\n\n#24\u3067\u8aac\u660e\u3057\u305funiversal reference\u3068\u3044\u3046\u306e\u306f\u65b9\u4fbf\u3067\u3001\u5b9f\u4f53\u306f\u3084\u3063\u3071\u308arvalue reference\u3067\u3057\u305f\u3002\n\n\n\ntemplate<typename T> void func(T&& param);\u306b\u304a\u3051\u308bT\u306e\u578b\u63a8\u8ad6\u7d50\u679c\u306f\u3001\u5f15\u6570\u306blvalue\u304c\u6e21\u3055\u308c\u305f\u304brvalue\u304c\u6e21\u3055\u308c\u305f\u304b\u304c\u53cd\u6620\u3055\u308c\u308b: lvalue\u304c\u5f15\u6570\u306b\u6e21\u3055\u308c\u305f\u3089T\u306flvalue reference\u3001rvalue\u304c\u6e21\u3055\u308c\u305f\u3089T\u306fnon-reference\u3002 (see #1)\n\u305d\u306e\u4e0a\u3067\u3001reference collapsing\u3068\u3044\u3046\u6a5f\u69cb\u304cuniversal refernce\u3068\u3044\u3046\u5e7b\u3092\u4f5c\u3063\u3066\u3044\u308b\u3002\n\n\nreference collapsing\u306f\u300c\u53c2\u7167\u306e\u53c2\u7167\u300d\u3092\u3072\u3068\u3064\u306e\u53c2\u7167\u306b\u7e2e\u7d04\u3059\u308b\u50cd\u304d\u30022\u3064\u306e\u53c2\u7167\u304c\u3044\u305a\u308c\u3082rvalue reference\u306e\u6642\u3060\u3051\u7e2e\u7d04\u3055\u308c\u305f\u53c2\u7167\u306frvalue referene\u306b\u306a\u308a\u3001\u305d\u308c\u4ee5\u5916\u306e\u5834\u5408\u306flvalue reference\u306b\u306a\u308b\u3002\nreference collapsing \u306f\u6b21\u306e4\u3064\u306e\u3044\u305a\u308c\u304b\u306e\u5834\u5408\u3067\u3060\u3051\u8d77\u3053\u308b: (1) \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5177\u73fe\u5316\u3001 (2) auto \u578b\u751f\u6210\u3001 (3) typedef \u3068 alias \u306e\u5ba3\u8a00\u3001 (4) decltype\u3002\n\u3053\u306e\u3088\u3046\u306b\u3001universal reference\u3068\u3044\u3046\u306e\u306f\u5b9f\u614b\u3068\u3057\u3066\u306f\u5b58\u5728\u3057\u306a\u3044\u306e\u3060\u304c\u3001 universal reference\u304c\u3042\u308b\u3068\u601d\u3063\u3066\u3044\u3066\u3082\u6319\u52d5\u3092\u8aa4\u89e3\u3059\u308b\u308f\u3051\u3067\u306f\u306a\u304f\u601d\u8003\u3092\u5358\u7d14\u5316\u3067\u304d\u308b\u4fbf\u5229\u306a\u6982\u5ff5\u3002\n\n\n29: move \u64cd\u4f5c\u306f\u5b58\u5728\u3057\u306a\u3044\u3053\u3068\u3082\u3042\u308b\u3057\u3001\u52b9\u7387\u7684\u3067\u306a\u3044\u3053\u3068\u3082\u3042\u308b\u3057\u3001\u4f7f\u308f\u308c\u306a\u3044\u3053\u3068\u3082\u3042\u308b\n\nC++11\u306e\u30e0\u30fc\u30d6\u30bb\u30de\u30f3\u30c6\u30a3\u30af\u30b9\u306f\u904e\u4fe1\u3055\u308c\u304c\u3061\u3067\u3001\u300c\u30b3\u30f3\u30c6\u30ca\u3092\u30e0\u30fc\u30d6\u3059\u308b\u306e\u306f\u751f\u306e\u30dd\u30a4\u30f3\u30bf1\u3064\u3092\u30b3\u30d4\u30fc\u3059\u308b\u304f\u3089\u3044\u52b9\u7387\u7684\u3060\u300d\u3068\u304b\u300cC++98\u306e\u30b3\u30fc\u30c9\u3092\u5358\u306bC++11\u3067\u518d\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u3060\u3051\u3067\u30b3\u30d4\u30fc\u64cd\u4f5c\u304c\u81ea\u52d5\u7684\u306b\u30e0\u30fc\u30d6\u64cd\u4f5c\u306b\u7f6e\u304d\u63db\u3048\u3089\u308c\u3066\u6027\u80fd\u304c\u52dd\u624b\u306b\u4e0a\u304c\u308b\u300d\u3068\u304b\u601d\u308f\u308c\u3066\u3044\u308b\u304c\u3001\u3044\u308d\u3044\u308d\u4f8b\u5916\u306f\u3042\u308b\u306e\u3067\u904e\u4fe1\u3059\u308b\u306a\u3002 (\u6ce8: \u904e\u4fe1\u3092\u8acc\u3081\u305f\u3044\u3060\u3051\u3067\u30e0\u30fc\u30d6\u30bb\u30de\u30f3\u30c6\u30a3\u30af\u30b9\u306a\u3093\u3066\u7121\u4fa1\u5024\u3060\u3068\u8a00\u3063\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3068\u601d\u3046)\n#17\u3067\u8aac\u660e\u3057\u305f\u3088\u3046\u306b\u3001\u30e0\u30fc\u30d6\u64cd\u4f5c\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u306a\u3044\u30b1\u30fc\u30b9\u304c\u3042\u308b\u3002\n\u30e0\u30fc\u30d6\u64cd\u4f5c\u304c\u30b3\u30d4\u30fc\u64cd\u4f5c\u3068\u540c\u7b49\u7a0b\u5ea6\u306e\u6027\u80fd\u3067\u3001\u5225\u306b\u30e1\u30ea\u30c3\u30c8\u304c\u306a\u3044\u30b1\u30fc\u30b9\u304c\u3042\u308b\u3002\n\n\nstd::array\u306f\u3001\u683c\u7d0d\u5bfe\u8c61\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3078\u306e\u30dd\u30a4\u30f3\u30bf\u306e\u914d\u5217\u3092\u30d2\u30fc\u30d7\u306b\u78ba\u4fdd\u3059\u308b\u3067\u306f\u306a\u304f\u81ea\u8eab\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u4e2d\u306b\u6301\u3064\u3002\u3057\u305f\u304c\u3063\u3066\u3001std::array\u306e\u30e0\u30fc\u30d6\u306farray\u30b5\u30a4\u30ba\u306b\u5bfe\u3057\u7dda\u5f62\u6642\u9593\u304b\u304b\u308b\u3002\n\u77ed\u3044\u6587\u5b57\u5217\u306e\u30d0\u30c3\u30d5\u30a1\u3082\u540c\u3058\u304f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u4e2d\u306b\u7f6e\u304b\u308c\u308b\u3053\u3068\u304c\u591a\u3044(SSO: Small String Optimization)\u3002\u540c\u3058\u304f\u3053\u306e\u3068\u304d\u3082\u30b3\u30d4\u30fc\u3057\u3066\u3082\u30e0\u30fc\u30d6\u3057\u3066\u3082\u52b9\u7387\u306f\u5909\u308f\u3089\u306a\u3044\u3002\n\n\nSTL\u306e\u30b3\u30f3\u30c6\u30ca\u64cd\u4f5c\u306e\u3044\u304f\u3064\u304b\u306f\u5f37\u3044\u4f8b\u5916\u5b89\u5168\u6027\u3092\u4fdd\u8a3c\u3057\u3066\u3044\u308b\u3002\u3053\u308c\u3089\u306e\u4e2d\u3067\u306f\u3001\u30e0\u30fc\u30d6\u6f14\u7b97\u304c\u4f8b\u5916\u3092\u6295\u3052\u306a\u3044\u4fdd\u8a3c\u304c\u3042\u308b\u3068\u304d\u3060\u3051\u30b3\u30d4\u30fc\u304c\u30e0\u30fc\u30d6\u306b\u7f6e\u304d\u63db\u3048\u3089\u308c\u308b\u3002(\u3064\u307e\u308a\u3001\u30e0\u30fc\u30d6\u6f14\u7b97\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u3044\u3066\u3082\u4f7f\u3063\u3066\u304f\u308c\u306a\u3044\u30b1\u30fc\u30b9\u304c\u3042\u308b)\n\u524d\u63d0\u304c\u304d\u3063\u3061\u308a\u6e80\u305f\u3055\u308c\u3066\u3044\u308c\u3070\u30e0\u30fc\u30d6\u6f14\u7b97\u306f\u9593\u9055\u3044\u306a\u304f\u4f7f\u308f\u308c\u308b\u3068\u601d\u3063\u3066\u3044\u3044\u3088\u3002\n\n\n30: perfect forwarding\u304c\u5931\u6557\u3059\u308b\u30b1\u30fc\u30b9\u3092\u77e5\u3063\u3066\u304a\u3051\n\n\u307e\u305aperfect fowarding\u3068\u3044\u3046\u306e\u306f\u3001\u300c\u53d7\u3051\u53d6\u3063\u305f\u5f15\u6570\u3092\u305d\u306e\u307e\u307e\u5225\u306e\u95a2\u6570\u306b\u30d5\u30a9\u30ef\u30fc\u30c9\u3059\u308b\u3053\u3068\u300d\u3002\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30b3\u30d4\u30fc\u3059\u308b\u3053\u3068\u3082\u306a\u3044\u3057\u3001lvalue/rvalue\u306e\u5225\u3082CV\u4fee\u98fe\u5b50\u3082\u4fdd\u5b58\u3055\u308c\u308b\u3002\u4fbf\u5229\u3060\u306d!\n\nperfect forwarding\u304c\u3046\u307e\u304f\u50cd\u304b\u306a\u3044\u4f8b\u5916\n\n{}\u521d\u671f\u5316\u5b50\n0\u3084NULL\u3092\u30dd\u30a4\u30f3\u30bf\u6271\u3044\u3057\u3066\u4e0e\u3048\u305f\u3068\u304d (see #8)\n\u5ba3\u8a00\u3057\u304b\u3057\u3066\u306a\u3044 static const \u6574\u6570\u578b\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\n\n\n\u5b9a\u7fa9\u304c\u306a\u3044\u3068 static const \u6574\u6570\u578b\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u306f\u30e1\u30e2\u30ea\u4e0a\u306b\u5b9f\u4f53\u3092\u6301\u305f\u306a\u3044\u306e\u3067\u53c2\u7167\u304c\u4f5c\u308c\u306a\u3044\u3002\u3053\u308c\u306f\u3001\u5b9a\u7fa9\u3092\u5b9f\u88c5\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304f\u3060\u3051\u3067\u89e3\u6c7a\u3067\u304d\u308b\u3002\n\n\n\u30aa\u30fc\u30d0\u30ed\u30fc\u30c9\u3055\u308c\u305f\u95a2\u6570\u540d\u3084\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\n\n\n\u3069\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u547c\u3070\u308c\u308b\u304b\u308f\u304b\u3063\u3066\u306a\u3044\u6642\u70b9\u3067\u306f\u3001\u3053\u308c\u3089\u306f\u95a2\u6570\u30dd\u30a4\u30f3\u30bf\u3067\u306f\u306a\u304f\u300c\u540d\u524d\u300d\u306b\u3059\u304e\u306a\u3044\u306e\u3067perfect forwarding\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u3002\nalias \u3068\u304b\u4f7f\u3063\u3066\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u660e\u793a\u7684\u306b\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u89e3\u6c7a\u3067\u304d\u308b\u3089\u3057\u3044 (\u6b32\u3057\u304f\u306a\u3063\u305f\u3089\u672c\u3092\u898b\u308b\u3053\u3068)\n\n\n\u30d3\u30c3\u30c8\u30d5\u30a3\u30fc\u30eb\u30c9\n\n\n\u30d3\u30c3\u30c8\u30d5\u30a3\u30fc\u30eb\u30c9\u3078\u306e\u53c2\u7167\u306f\u4f5c\u308c\u306a\u3044\u306e\u3067\u5f15\u6570\u306b\u4e0e\u3048\u308b\u3068\u30b3\u30d4\u30fc\u304c\u751f\u6210\u3055\u308c\u308b\u3002\u3042\u3089\u304b\u3058\u3081static_cast\u3059\u308c\u3070OK\u3002\n\n\n\n\n\n\n\u7b2c6\u7ae0: \u30e9\u30e0\u30c0\u5f0f\n\n\u30e9\u30e0\u30c0\u5f0f\u306f\u5f37\u529b\u3002STL\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306epredicate\u3068\u304b\u3001sort\u306e\u6bd4\u8f03\u95a2\u6570\u3068\u304b\u3001std::unique_ptr\u3084std::shared_ptr\u306e\u30ab\u30b9\u30bf\u30e0\u30c7\u30ea\u30fc\u30bf\u3068\u304b\u304c\u7c21\u6f54\u306b\u66f8\u3051\u308b\u3002\n\u7528\u8a9e\u6574\u7406\u3002\n\n\n\u30e9\u30e0\u30c0\u5f0f\u306f\u5358\u306a\u308b\u5f0f\u3002\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e[...](...){...}\u90e8\u5206\u305d\u306e\u3082\u306e\u3002\n\u30af\u30ed\u30fc\u30b8\u30e3\u306f\u30e9\u30e0\u30c0\u5f0f\u306b\u3088\u3063\u3066\u4f5c\u3089\u308c\u305f\u30e9\u30f3\u30bf\u30a4\u30e0\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002\u30ad\u30e3\u30d7\u30c1\u30e3\u30e2\u30fc\u30c9\u306b\u3088\u3063\u3066\u5916\u90e8\u5909\u6570\u3078\u306e\u53c2\u7167\u3092\u4fdd\u6301\u3057\u305f\u308a\u30b3\u30d4\u30fc\u3092\u4fdd\u6301\u3057\u305f\u308a\u3059\u308b\u3002std::find_if\u3068\u304b\u3092\u30e9\u30e0\u30c0\u5f0f\u3092\u4e0e\u3048\u3066\u8a18\u8ff0\u3057\u305f\u3068\u304d\u3001\u30e9\u30f3\u30bf\u30a4\u30e0\u3067\u95a2\u6570\u306e\u5f15\u6570\u3068\u3057\u3066\u6e21\u3055\u308c\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u30af\u30ed\u30fc\u30b8\u30e3\u3002\n\u30af\u30ed\u30fc\u30b8\u30e3\u30af\u30e9\u30b9\u306f\u30af\u30ed\u30fc\u30b8\u30e3(=\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9)\u304c\u5c5e\u3059\u308b\u30af\u30e9\u30b9\u3002\u30e9\u30e0\u30c0\u5f0f\u306f\u305d\u308c\u305e\u308c\u72ec\u81ea\u306e\u30af\u30ed\u30fc\u30b8\u30e3\u30af\u30e9\u30b9\u3092\u30b3\u30f3\u30d1\u30a4\u30e9\u306b\u751f\u6210\u3055\u305b\u3001\u30e9\u30e0\u30c0\u5f0f\u306e\u4e2d\u306b\u66f8\u3044\u305f\u8a18\u8ff0\u306f\u30af\u30ed\u30fc\u30b8\u30e3\u30af\u30e9\u30b9\u306e\u30e1\u30f3\u30d0\u95a2\u6570\u306b\u306a\u308b\u3002\n\n\n\n\u540c\u4e00\u30af\u30e9\u30b9\u306e\u30af\u30ed\u30fc\u30b8\u30e3\u306e\u30b3\u30d4\u30fc\u3068\u304b\u3082\u3067\u304d\u308b\u3002\n{\n  int x;\n  ...\n  auto c1 = [x](int y) {return x > y > 55; };\n  auto c2 = c1; // \u30af\u30ed\u30fc\u30b8\u30e3\u306e\u30b3\u30d4\u30fc\n}\n\n\n31: \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30ad\u30e3\u30d7\u30c1\u30e3\u30e2\u30fc\u30c9\u306f\u907f\u3051\u308d\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u30ad\u30e3\u30d7\u30c1\u30e3\u30e2\u30fc\u30c9\u3068\u306f[=]\u3068\u304b[&]\u306e\u3053\u3068\u3002\n\u30ad\u30e3\u30d7\u30c1\u30e3\u306f\u30e9\u30e0\u30c0\u5f0f\u304c\u66f8\u304b\u308c\u305f\u30b9\u30b3\u30fc\u30d7\u3067\u898b\u3048\u3066\u3044\u308bnon-static\u306a\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306b\u5bfe\u3057\u3066\u306e\u307f\u8d77\u3053\u308b\u3002\n\u53c2\u7167\u30e2\u30fc\u30c9([&])\u3067\u306e\u30ad\u30e3\u30d7\u30c1\u30e3\u306b\u306f\u3001\u5bfe\u8c61\u5909\u6570\u304c\u30af\u30ed\u30fc\u30b8\u30e3\u3088\u308a\u5148\u306b\u30b9\u30b3\u30fc\u30d7\u5916\u306b\u306a\u3063\u3066\u6d88\u3048\u3066\u3057\u307e\u3046\u30ea\u30b9\u30af\u304c\u3042\u308b\u3002\n\u30b3\u30d4\u30fc\u30e2\u30fc\u30c9([=])\u3067\u3082\u30dd\u30a4\u30f3\u30bf\u3092\u30ad\u30e3\u30d7\u30c1\u30e3\u3057\u3066\u3057\u307e\u3046\u3068\u30dd\u30a4\u30f3\u30bf\u306e\u6307\u793a\u5148\u304c\u6d88\u3048\u3066\u3057\u307e\u3046\u30ea\u30b9\u30af\u304c\u3042\u308b\u3002(\u3068\u304f\u306bthis\u3002[=]\u30e2\u30fc\u30c9\u306f\u6697\u9ed9\u306e\u3046\u3061\u306bthis\u3092\u5024\u3068\u3057\u3066\u30ad\u30e3\u30d7\u30c1\u30e3\u3057\u3066\u3057\u307e\u3046)\n\u30ad\u30e3\u30d7\u30c1\u30e3\u306f[hoge]\u3068\u304b\u5909\u6570\u540d\u3092\u660e\u793a\u7684\u306b\u66f8\u3044\u3066\u884c\u3048\u3002\n\n\n32: \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30af\u30ed\u30fc\u30b8\u30e3\u5185\u306bmove\u3059\u308b\u306b\u306finit capture\u3092\u4f7f\u3048\n\nC++14\u3067\u5c0e\u5165\u3055\u308c\u305finit capture\u3067\u306f\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u540d\u3068\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u306e\u521d\u671f\u5316\u5f0f\u3092\u8a18\u8ff0\u3067\u304d\u308b\u3002\n\nauto pw = std::make_unique<Widget()>;\nauto func[pw = std::move(pw)]{ ...}; // \u5de6\u8fba\u306epw\u306f\u30af\u30ed\u30fc\u30b8\u30e3\u30af\u30e9\u30b9\u306e\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u3068\u306a\u308b\nauto func2[pw = std::make_unique<Widget()>]{...}; // \u3053\u3093\u306a\u3075\u3046\u306b\u3082\u66f8\u3051\u308b\n\n\nC++11\u3067\u3082\u3001std::bind\u3092\u3046\u307e\u304f\u4f7f\u3048\u3070\u540c\u3058\u3053\u3068\u304c\u3067\u304d\u308b (\u8a73\u7d30\u7565)\n\n\n33: auto&& \u578b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092(lambda\u5185\u3067)std::forward\u3059\u308b\u3068\u304d\u306fdecltype\u3092\u4f7f\u3048\n\nC++14\u3067\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u3092auto\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u5f37\u529b\u306a\u30b8\u30a7\u30cd\u30ea\u30c3\u30af\u30e9\u30e0\u30c0\u5f0f\u304c\u4f7f\u3048\u308b\u3002\n\u30e9\u30e0\u30c0\u5f0f\u306e\u5f15\u6570\u3092\u30e9\u30e0\u30c0\u5f0f\u306e\u4e2d\u3067\u547c\u3073\u51fa\u3059\u95a2\u6570\u306b\u30d1\u30fc\u30d5\u30a7\u30af\u30c8\u30d5\u30a9\u30ef\u30fc\u30c7\u30a3\u30f3\u30b0\u3057\u305f\u3044\u3068\u304d\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u3051\u3070\u3088\u3044:\n\nauto f = [](auto && param) {\n  return func(std::forward<decltype(param)>(param));\n};\n\n\n34: std::bind\u3088\u308a\u30e9\u30e0\u30c0\u5f0f\u3092\u4f7f\u3048\n\nstd::bind\u3088\u308a\u30e9\u30e0\u30c0\u5f0f\u306e\u307b\u3046\u304c\u898b\u3084\u3059\u304f\u304b\u3064\u52b9\u7387\u7684\u3089\u3057\u3044\u3002std::bind\u306e\u7406\u89e3\u304c\u524d\u63d0\u306b\u306a\u3063\u3066\u3044\u308b\u304c\u3001\u305d\u3082\u305d\u3082\u3088\u304f\u77e5\u3089\u306a\u3044\u306e\u3067\u8a73\u7d30\u306f\u30d1\u30b9\u3002\n\n\n\u7b2c7\u7ae0: \u4e26\u884c\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0(concurrency)API\n\n\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u30de\u30eb\u30c1\u30b9\u30ec\u30c3\u30c7\u30a3\u30f3\u30b0\u304c\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u306e\u306f\u3059\u3070\u3089\u3057\u3044\u3053\u3068\u3060\u3088\nfuture\u306bstd::future\u3068std::shared_future\u3068\u304c\u3042\u308b\u304c\u3001\u307b\u3068\u3093\u3069\u540c\u3058\u306a\u306e\u3067\u7dcf\u79f0\u3057\u3066future\u3068\u547c\u3076\u3088\n\n\n35: \u30b9\u30ec\u30c3\u30c9\u30d9\u30fc\u30b9\u3088\u308a\u30bf\u30b9\u30af\u30d9\u30fc\u30b9\u3067\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u305b\u3088\nint doAsyncWork();\nstd::thread t(doAsyncWork); // \u30b9\u30ec\u30c3\u30c9\u30d9\u30fc\u30b9\nauto fut = std::async(doAsyncWork); // \u30bf\u30b9\u30af\u30d9\u30fc\u30b9\n\n\nstd::async\u304b\u3089\u5f97\u3089\u308c\u308bfuture\u306fget\u95a2\u6570\u3092\u6301\u3061\u3001doAsyncWork\u306e\u623b\u308a\u5024\u3084\u5410\u3044\u305f\u4f8b\u5916\u304c\u660e\u793a\u7684\u306b\u308f\u304b\u308b\u3002\nstd::async\u306f\u30b9\u30ec\u30c3\u30c9\u3092\u5373\u6642\u306b\u8d77\u52d5\u3059\u308b\u4fdd\u8a3c\u306f\u306a\u304f\u3001\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u306b\u8d77\u52d5\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3084HW\u30b9\u30ec\u30c3\u30c9\u306e\u5272\u308a\u5f53\u3066\u3092\u4efb\u305b\u308b\u3002 (OS\u30b9\u30ec\u30c3\u30c9\u6570\u306e\u4e0a\u9650\u3084\u30b3\u30f3\u30c6\u30af\u30b9\u30c8\u30b9\u30a4\u30c3\u30c1\u306b\u3088\u308b\u30ad\u30e3\u30c3\u30b7\u30e5\u52b9\u7387\u4f4e\u4e0b\u306b\u95a2\u308f\u308b\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u3092\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u304a\u4efb\u305b\u3067\u304d\u308b)\nGUI\u30b9\u30ec\u30c3\u30c9\u306e\u5fdc\u7b54\u6027\u3068\u304b\u306f\u306a\u304a\u554f\u984c\u306a\u306e\u3067#36\u3067\u8b70\u8ad6\u3059\u308b\u3002\nstd::async\u3092\u4f7f\u3046\u3079\u304d\u3067\u306a\u3044\u4f8b\u5916\u7684\u72b6\u6cc1\n\n\npthread \u3068\u304b Windows' Threads\u3068\u304b\u306e\u30cd\u30a4\u30c6\u30a3\u30d6\u306aAPI\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3044\u3068\u304d\n\u30b9\u30ec\u30c3\u30c9\u306e\u4f7f\u3044\u65b9\u3092\u81ea\u5206\u306e\u30a2\u30d7\u30ea\u306b\u6700\u9069\u5316\u3057\u305f\u3044(+\u81ea\u5206\u306b\u305d\u306e\u80fd\u529b\u304c\u3042\u308b)\u3068\u304d\nC++\u306e\u4e26\u884c\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0API\u306e\u80fd\u529b\u3092\u8d85\u3048\u308b\u3053\u3068\u3092\u3084\u308b\u5fc5\u8981\u304c\u3042\u308b\u3068\u304d\n\n\n\n\n36: \u975e\u540c\u671f\u5b9f\u884c\u306e\u5fc5\u7136\u6027\u304c\u3042\u308c\u3070 std::launch::async \u3092\u6307\u5b9a\u305b\u3088\n\nstd::async \u3067\u306e\u30b9\u30ec\u30c3\u30c9\u8d77\u52d5\u30dd\u30ea\u30b7\u30fc\u306f\u300c\u540c\u671f\u3067(\u81ea\u30b9\u30ec\u30c3\u30c9\u5185\u3067)\u5b9f\u884c\u3057\u3066\u3082\u3044\u3044\u3057\u975e\u540c\u671f\u3067(\u5225\u30b9\u30ec\u30c3\u30c9\u3067)\u5b9f\u884c\u3057\u3066\u3082\u3044\u3044\u3088\u300d\u3068\u306a\u3063\u3066\u3044\u308b\u3002\u3053\u306e\u81ea\u7531\u3092\u4f7f\u3063\u3066\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b9\u3068\u304b\u3092\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u5074\u304c\u304c\u3093\u3070\u3063\u3066\u304f\u308c\u308b\u3002\n\u660e\u793a\u7684\u306b\u6307\u5b9a\u3057\u305f\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306e2\u3064\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\n\nstd::launch::async : \u7d76\u5bfe\u5225\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3057\u308d\nstd::launch::deferred : std::async\u304c\u8fd4\u3057\u305ffuture\u306b\u5bfe\u3057\u3066get\u304bwait\u304c\u547c\u3070\u308c\u305f\u3068\u304d\u306b\u3060\u3051\u5b9f\u884c\u3057\u308d\u3002get\u304bwait\u304c\u547c\u3070\u308c\u305f\u3068\u304d\u306b\u306f\u81ea\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3057\u308d\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8d77\u52d5\u30dd\u30ea\u30b7\u30fc\u3067\u306f\u5b9f\u969b\u306b\u3069\u3063\u3061\u306e\u30dd\u30ea\u30b7\u30fc\u304c\u63a1\u7528\u3055\u308c\u305f\u304b\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u305d\u3082\u305d\u3082\u5b9f\u884c\u5bfe\u8c61\u306e\u95a2\u6570\u304c\u5b9f\u884c\u3055\u308c\u305f\u304b\u3069\u3046\u304b\u3059\u3089\u4e0d\u660e\u306e\u30b1\u30fc\u30b9\u3082\u3042\u308b (\u305d\u306e\u5f8cget\u3084wait\u3057\u306a\u3044\u3068\u304d\u306fdeferred\u30e2\u30fc\u30c9\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u308b\u3068\u5b9f\u884c\u3055\u308c\u305a\u3058\u307e\u3044\u306b\u306a\u308b)\ndeferred \u30e2\u30fc\u30c9\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3068\u304d\u306fwait_for\u306f\u3044\u3064\u3082std::future_status::deferred\u3092\u8fd4\u3059\u306e\u3067\u6ce8\u610f\u3002\u623b\u308a\u5024\u304cstd::future_status::ready\u306b\u306a\u308b\u306e\u3092\u5f85\u3063\u3066\u3044\u308b\u3068\u7121\u9650\u30eb\u30fc\u30d7\u306b\u306a\u308b\u3002\n\n\nwait_for(0)\u3067\u30e2\u30fc\u30c9\u3092\u8abf\u3079\u3066\u51e6\u7406\u3092\u30b9\u30a4\u30c3\u30c1\u3059\u308b\u65b9\u6cd5\u3082\u3042\u308b\u3002\u3069\u3046\u3057\u3066\u3082\u975e\u540c\u671f\u5b9f\u884c\u3067\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3068\u304d\u3060\u3051std::launch::async\u3092\u6307\u5b9a\u3057\u308d\u3002\n\n\n37: std::thread \u304c\u5168\u3066\u306e\u5b9f\u884c\u30d1\u30b9\u3067unjoinable\u306b\u306a\u308b\u3088\u3046\u306b\u305b\u3088\n\nunjoinable\u306astd::thread\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u306f\u3001\u4ee5\u4e0b\u306e\u3044\u305a\u308c\u304b\u306e\u72b6\u614b: (1)\u30c7\u30d5\u30a9\u30eb\u30c8\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u751f\u6210\u3055\u308c\u3066\u3044\u3066\u30b9\u30ec\u30c3\u30c9\u306b\u7d10\u4ed8\u3044\u3066\u3044\u306a\u3044\u3001(2)move\u3055\u308c\u3066\u629c\u3051\u6bbb\u3001(3)join\u305a\u307f\u3001(4)detach\u305a\u307f\nstd::thread\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u7834\u68c4\u3055\u308c\u308b\u524d\u306bunjoinable\u306b\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u30d7\u30ed\u30b0\u30e9\u30e0\u5168\u4f53\u304c\u5f37\u5236\u7d42\u4e86\u3055\u308c\u3066\u3057\u307e\u3046(\u30b9\u30ec\u30c3\u30c9\u304c\u3001\u3067\u306f\u306a\u3044!)\u3002\nstd::thread\u3092\u5305\u3080RAII(Resource Acquisition Is Instantiation)\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308a\u3001RAII\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u304a\u3044\u3066\u3001\u751f\u6210\u6642\u306b\u3042\u3089\u304b\u3058\u3081\u6307\u5b9a\u3057\u3066\u304a\u3044\u305f\u65b9\u6cd5(join or detach)\u3067std::thread\u3092unjoinable\u306b\u3059\u308b\u3088\u3046\u306bRAII\u30af\u30e9\u30b9\u3092\u66f8\u3044\u3066\u304a\u304f\u3068\u3088\u3044\u3002\nThreadRAII \u30af\u30e9\u30b9\u306e\u4e2d\u3067 std::thread \u306f\u6700\u5f8c\u306e\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u3068\u3057\u3066\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3002 (\u66f8\u3044\u305f\u9806\u306b\u521d\u671f\u5316\u3055\u308c\u308b\u306e\u3067\u3001\u30b9\u30ec\u30c3\u30c9\u304c\u8d77\u304d\u305f\u3068\u304d\u306b\u306f\u4ed6\u306e\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u304c\u521d\u671f\u5316\u305a\u307f\u3067\u3042\u308b\u3053\u3068\u304c\u4fdd\u8a3c\u3055\u308c\u308b)\n\n\n38: std::thread\u3068future\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u7834\u58ca\u6642\u306e\u6319\u52d5\u306e\u5dee\u3092\u77e5\u3063\u3066\u304a\u3051\n\njoinable\u306a\u72b6\u614b\u306b\u3042\u308bstd::thread\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068future\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u3044\u305a\u308c\u3082OS\u30b9\u30ec\u30c3\u30c9\u3078\u306e\u30cf\u30f3\u30c9\u30eb\u3068\u307f\u306a\u305b\u308b\u3002\nfuture\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u7834\u58ca\u6642\u306e\u6319\u52d5\u306f\u3061\u3087\u3063\u3068\u8907\u96d1\u3002std::thread\u3068\u9055\u3063\u3066\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u5f37\u5236\u7d42\u4e86\u306f\u8d77\u3053\u3089\u306a\u3044\u3002\nfuture\u306fstd::shared_future\u3068\u3057\u3066\u30b3\u30d4\u30fc\u3067\u304d\u308b\u3002\u547c\u3073\u51fa\u3055\u308c\u305f\u95a2\u6570\u306e\u72b6\u614b\u3068\u6f14\u7b97\u7d50\u679c\u306f\u547c\u3073\u51fa\u3057\u5143\u30fb\u547c\u3073\u51fa\u3057\u5148\u3044\u305a\u308c\u306e\u30b9\u30ec\u30c3\u30c9\u306b\u3082\u5c5e\u3055\u306a\u3044\u5171\u6709\u9818\u57df\u306b\u7f6e\u304b\u308c\u308b\u3002\u30b3\u30d4\u30fc\u3055\u308c\u305ffuture\u306e\u9593\u3067\u306f\u3053\u306e\u5171\u6709\u9818\u57df\u306f\u5171\u901a\u3067\u3001std::shared_ptr\u3068\u540c\u3058\u3088\u3046\u306b\u53c2\u7167\u30ab\u30a6\u30f3\u30bf\u3067\u7ba1\u7406\u3055\u308c\u308b\u3002\nstd::async\u306b\u3088\u3063\u3066\u4f5c\u3089\u308c\u305f\u3072\u3068\u3064\u306e\u5171\u6709\u9818\u57df\u306b\u7d10\u4ed8\u3044\u305f\u6700\u5f8c\u306efuture\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u7834\u68c4\u3055\u308c\u308b\u3068\u304d\u3001\u975e\u540c\u671f\u6307\u5b9a(std::launch::async)\u3067\u6700\u521d\u306e\u30b9\u30ec\u30c3\u30c9\u8d77\u52d5\u304c\u3055\u308c\u3066\u3044\u308c\u3070\u6697\u9ed9join\u306b\u306a\u308b(\u5bfe\u8c61\u30b9\u30ec\u30c3\u30c9\u7d42\u4e86\u307e\u3067\u547c\u3073\u51fa\u3057\u5143\u30b9\u30ec\u30c3\u30c9\u304c\u30d6\u30ed\u30c3\u30af\u3055\u308c\u308b)\u3002\u305d\u308c\u4ee5\u5916\u306e\u3068\u304d\u306f\u3001\u305f\u3060future\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u7834\u68c4\u3055\u308c\u308b(\u3059\u3067\u306b\u30b9\u30ec\u30c3\u30c9\u304c\u975e\u540c\u671f\u5b9f\u884c\u3055\u308c\u3066\u3044\u308c\u3070detach\u306b\u76f8\u5f53\u3059\u308b\u3002\u3082\u3057\u304f\u306f\u30bf\u30b9\u30af\u304c\u540c\u671f\u578b\u3067\u9045\u5ef6\u5b9f\u884c\u4e88\u5b9a\u3060\u3063\u305f\u3068\u3059\u308b\u3068\u5168\u304f\u5b9f\u884c\u3055\u308c\u305a\u306b\u7d42\u308f\u308b)\n\n\n39: 1\u56de\u304d\u308a\u306e\u30a4\u30d9\u30f3\u30c8\u901a\u4fe1\u306b\u306f void future \u306e\u5229\u7528\u3092\u8003\u3048\u3088\n\n\u30b9\u30ec\u30c3\u30c9\u9593\u306e\u30a4\u30d9\u30f3\u30c8\u901a\u77e5\u306e\u65b9\u6cd5\nstd::condition_variable\u3092\u30ed\u30c3\u30af\u7528\u306estd::mutex\u3068\u4e00\u7dd2\u306b\u4f7f\u3046\u306e\u304c\u308f\u304b\u308a\u3084\u3059\u3044\u65b9\u6cd5\u3002\u3057\u304b\u3057\u3001\u30a4\u30d9\u30f3\u30c8\u9001\u4fe1\u5074\u306e\u30bf\u30b9\u30af\u304cnotify_one(\u307e\u305f\u306fnotify_all)\u3059\u308b\u524d\u306b\u30a4\u30d9\u30f3\u30c8\u53d7\u4fe1\u5074\u306e\u30bf\u30b9\u30af\u304cwait\u3057\u306f\u3058\u3081\u3066\u3044\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u5236\u7d04\u304c\u3042\u308b\u3002\u307e\u305f\u3001spurious wakeup(condition_variable\u306e\u6761\u4ef6\u304c\u6e80\u305f\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u306b\u306a\u3093\u304b\u53d7\u4fe1\u5074\u30bf\u30b9\u30af\u304c\u8d77\u3053\u3055\u308c\u3066\u3057\u307e\u3046)\u306b\u5bfe\u51e6\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3002\u53d7\u4fe1\u5074\u30bf\u30b9\u30af\u306f\u9001\u4fe1\u5074\u30bf\u30b9\u30af\u304c\u30a4\u30d9\u30f3\u30c8\u901a\u77e5\u306e\u524d\u63d0\u6761\u4ef6\u3092\u6e80\u305f\u3057\u305f\u304b\u3069\u3046\u304b\u3092\u89b3\u5bdf\u3067\u304d\u306a\u3044\u304b\u3089\u3002\nstd::atomic \u3067\u30d5\u30e9\u30b0\u3092\u4f5c\u3063\u3066\u3001\u9001\u4fe1\u5074\u306fflag=true;\u3068\u3057\u3001\u53d7\u4fe1\u5074\u306fwhile(!flag);\u3068\u3057\u3066\u3082\u3044\u3044\u304c\u3053\u308c\u306f\u30dd\u30fc\u30ea\u30f3\u30b0\u3067\u52b9\u7387\u306b\u554f\u984c\u304c\u3042\u308b\u3002\n\u30d5\u30e9\u30b0\u3068\u6761\u4ef6\u5909\u6570(condition variable)\u3092\u4f75\u7528\u3059\u308b\u306e\u304c\u3088\u304f\u3084\u308b\u65b9\u6cd5\u3060\u304c\u3001mutex\u306b\u3088\u308b\u30d5\u30e9\u30b0\u306e\u4fdd\u8b77\u3082\u5fc5\u8981\u3067\u3001\u8ab2\u984c\u306f\u89e3\u3051\u308b\u3082\u306e\u306e\u30b4\u30c1\u30e3\u30b4\u30c1\u30e3\u3059\u308b\u3002\n\u6b21\u306e\u65b9\u6cd5\u304c\u3042\u308b\uff1a\u9001\u4fe1\u5074\u30bf\u30b9\u30af\u304cstd::promise<void> p;\u3068\u3057\u3066\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308a\u3001p.set_value();\u3057\u3066\u30a4\u30d9\u30f3\u30c8\u9001\u4fe1\u3092\u3059\u308b\u3002\u53d7\u4fe1\u5074\u306fp.get_future().wait();\u3059\u308c\u3070\u3088\u3044\u3002\u305f\u3060\u30d2\u30fc\u30d7\u306b\u5171\u6709\u72b6\u614b\u306e\u305f\u3081\u306e\u9818\u57df\u304c\u3068\u3089\u308c\u308b\u306e\u3068\u3001std::promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c1\u56de\u304d\u308a\u3057\u304b\u4f7f\u3048\u306a\u3044\u554f\u984c\u304c\u3042\u308b\u3002\n\n\n40: std::atomic\u306f\u4e26\u884c\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306b\u4f7f\u3044\u3001 voatile \u306f\u7279\u6b8a\u306a\u30e1\u30e2\u30ea\u306b\u4f7f\u3048\n\n\u4e16\u9593\u3067\u8aa4\u89e3\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3060\u304cvolatile\u3068\u4e26\u884c\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306f\u95a2\u4fc2\u306a\u3044\u3002\nstd::atomic\u306fmutex\u3067\u30ed\u30c3\u30af\u3055\u308c\u3066\u3044\u308b\u304b\u306e\u3088\u3046\u306b\u3001read, write, RMW(read-modify-write\u64cd\u4f5c)\u3092\u5206\u5272\u4e0d\u53ef\u80fd\u306a(atomic\u306a)\u64cd\u4f5c\u3068\u3057\u3066\u3001CPU\u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u52b9\u7387\u7684\u306b\u5b9f\u73fe\u3067\u304d\u308b\u3002\nstd::atomic\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001statement\u306e\u9593\u306e\u9806\u5e8f\u306e\u4fdd\u8a3c\u304c\u3067\u304d\u308b\u3002\u305f\u3068\u3048\u3070\u3001\u4e0b\u8a18\u30b3\u30fc\u30c9\u3067 flag \u304c true \u306b\u306a\u3063\u305f\u3053\u3068\u306f func() \u306e\u5b9f\u884c\u304c\u5b8c\u4e86\u3057\u305f\u3053\u3068\u3092\u4fdd\u8a3c\u3059\u308b\u3002 flag \u304c\u305f\u3060\u306e bool\u3000\u3060\u3063\u305f\u3089\u4fdd\u8a3c\u3055\u308c\u306a\u3044\u3002\n\nstd::atomic<bool> flag(false);\nint x = func();\nflag = true; // CPU\u306b\u3088\u308b\u6700\u9069\u5316\u3082\u542b\u3081\u3001x\u306e\u5024\u304c\u66f4\u65b0\u3055\u308c\u3066\u304b\u3089flag\u304c\u66f4\u65b0\u3055\u308c\u308b\u3053\u3068\u304c\u4fdd\u8a3c\u3055\u308c\u308b\n\n\n\u3058\u3083\u3042volatile\u306e\u610f\u5473\u306f?: \u5bfe\u8c61\u304c\u300c\u7279\u6b8a\u306a\u30e1\u30e2\u30ea\u300d\u3060\u3068\u30b3\u30f3\u30d1\u30a4\u30e9\u306b\u6559\u3048\u308b\u3053\u3068\u300210\u3092\u66f8\u304d\u8fbc\u3093\u3060\u76f4\u5f8c\u306b20\u3092\u66f8\u304d\u8fbc\u3080\u3053\u3068\u306f\u7121\u610f\u5473\u306b\u601d\u3048\u308b\u304c\u3001Memory Mapped IO\u3068\u304b\u3060\u3068\u610f\u5473\u304c\u3042\u308b\u3002\u307e\u305f\u3001\u81ea\u5206\u306f\u66f8\u304d\u8fbc\u3093\u3067\u3044\u306a\u3044\u306e\u306b\u5024\u304c\u3044\u3064\u306e\u307e\u306b\u304b\u5909\u308f\u3063\u3066\u3044\u308b\u3053\u3068\u3082\u3042\u308a\u3048\u308b\u3002\u3068\u3044\u3046\u524d\u63d0\u306b\u7acb\u3063\u3066\u3001\u8aad\u307f\u8fbc\u307f\u3084\u66f8\u304d\u8fbc\u307f\u306f\u8a00\u308f\u308c\u305f\u901a\u308a\u306b\u3084\u3063\u3066\u5909\u306a\u6700\u9069\u5316\u3059\u308b\u306a\u3088\u3001\u3068\u3044\u3046\u30b3\u30f3\u30d1\u30a4\u30e9\u3078\u306e\u6307\u793a\u304cvolatile\u3002\nvolatile std::atomic val; \u307f\u305f\u3044\u306a\u30b1\u30fc\u30b9\u3082\u3042\u308a\u3048\u308b\u3002\n\n\n\u7b2c8\u7ae0: \u88dc\u907a\n\n\u5024\u6e21\u3057\u3068 emplace \u306f\u4f7f\u3044\u3069\u3053\u308d\u3092\u9593\u9055\u3048\u3084\u3059\u3044\u306e\u3067\u88dc\u8db3\u3059\u308b\u306d\u3002\n\n\n41: \u5f15\u6570\u304c\u30b3\u30d4\u30fc\u53ef\u3067\u3001\u53d7\u3051\u53d6\u308a\u5074\u3067\u5e38\u306b\u30b3\u30d4\u30fc\u304c\u5fc5\u8981\u3067\u3001\u304b\u3064\u52b9\u7387\u7684\u306b\u30e0\u30fc\u30d6\u3067\u304d\u308b\u3068\u304d\u306f\u5024\u6e21\u3057\u3082\u8003\u3048\u308d\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u3063\u3066*this\u306e\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u683c\u7d0d\u3059\u308b\u3088\u3046\u306a\u30e1\u30f3\u30d0\u95a2\u6570\u3092\u66f8\u304f\u3068\u304d\u3067\u3001lvalue\u7248\u306e\u30b3\u30d4\u30fc\u3068rvalue\u7248\u306e\u30e0\u30fc\u30d6\u30682\u3064\u95a2\u6570\u3092\u66f8\u304f\u30b1\u30fc\u30b9\u3042\u308b\u3088\u306d\u3002\u9762\u5012\u304f\u3055\u3044\u3088\u306d\u3002\nuniversal reference\u30671\u3064\u306e\u95a2\u6570\u306b\u3067\u304d\u308b\u3051\u3069\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u306a\u308b\u304b\u3089\u30d8\u30c3\u30c0\u306b\u5b9f\u88c5\u3092\u7f6e\u304b\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3068\u304b\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\u306e\u30b5\u30a4\u30ba\u304c\u81a8\u308c\u4e0a\u304c\u308b\u304b\u3082\u3068\u304b\u3001\u6e21\u305b\u306a\u3044\u5f15\u6570\u578b\u304c\u3042\u308b(#30)\u3068\u304b\u30b3\u30f3\u30d1\u30a4\u30e9\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u308f\u304b\u308a\u306b\u304f\u3044(#27)\u3068\u304b\u3044\u308d\u3044\u308d\u9762\u5012\u3060\u3088\u306d\u3002\n\u5024\u6e21\u3057\u3067\u53d7\u3051\u53d6\u3063\u3066std::move\u3092\u3064\u3051\u3066\u30b3\u30f3\u30c6\u30ca\u306b\u5165\u308c\u308c\u3070\u3044\u3044\u3093\u3084\u3067\u3002\u5024\u6e21\u3057\u6642\u306e\u3068\u304d\u3001C++98\u3067\u306f\u5e38\u306b\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u547c\u3070\u308c\u308b\u304cC++11\u3067\u306f\u5f15\u6570\u304crvalue\u306a\u3089\u30e0\u30fc\u30d6\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u547c\u3070\u308c\u308b\u3002\n\nclass Widget {\npublic:\n    void addName(std::string newName) { // \u5024\u6e21\u3057\n        names.push_back(std::move(newName)); // std::move\u306b\u6ce8\u76ee\n    }\nprivate:\n    std::vector<std::string> names;\n};\n\n\n\u5024\u6e21\u3057\u89e3\u6cd5\u3067\u306f\u3001\u30aa\u30fc\u30d0\u30ed\u30fc\u30c9\u3068\u6bd4\u3079\u3066\u3082universal reference\u3068\u6bd4\u3079\u3066\u3082\u3001\u5f15\u6570\u304crvalue\u3067\u3042\u308clvalue\u3067\u3042\u308c\u30e0\u30fc\u30d6\u304c1\u56de\u4f59\u8a08\u306b\u884c\u308f\u308c\u308b\u306e\u3067\u3001\u3053\u306e\u89e3\u6cd5\u304cOK\u306a\u306e\u306f\u30e0\u30fc\u30d6\u304c\u52b9\u7387\u7684\u306a\u5834\u5408\u306b\u9650\u308b\u3002\n\u30e0\u30fc\u30d6\u6f14\u7b97\u4e0d\u53ef\u306a\u5834\u5408\u3001\u30e0\u30fc\u30d6\u306e\u4ee3\u308f\u308a\u306b\u30b3\u30d4\u30fc\u304c\u3055\u308c\u308b\u306e\u3067\u975e\u52b9\u7387\u3002\u3053\u306e\u5834\u5408\u5024\u6e21\u3057\u306f\u3088\u304f\u306a\u3044\u3002\n\u3042\u3068\u3001\u30e1\u30f3\u30d0\u95a2\u6570\u5185\u306b\u6761\u4ef6\u5224\u65ad\u304c\u3042\u3063\u3066\u30b3\u30d4\u30fc\u3092\u7d50\u5c40\u3057\u306a\u3044\u53ef\u80fd\u6027\u304c\u3042\u308b\u306a\u3089\u3001\u5024\u6e21\u3057\u3067\u4f5c\u3063\u305f\u30b3\u30d4\u30fc\u304c\u7121\u99c4\u306b\u306a\u308b\u306e\u3067\u5024\u6e21\u3057\u306f\u3088\u304f\u306a\u3044\u3002\n\u307b\u3093\u3068\u3046\u306b\u5024\u6e21\u3057\u3067\u52b9\u7387\u304c\u843d\u3061\u306a\u3044\u304b\u3069\u3046\u304b\u306f\u305d\u306e\u4ed6\u3044\u308d\u3044\u308d\u6761\u4ef6\u304c\u3042\u308b\u306e\u3067\u3088\u304f\u8003\u3048\u308d\u3002\u30b3\u30d4\u30fc\u4ee3\u5165\u3088\u308a\u30b3\u30d4\u30fc\u521d\u671f\u5316\u306e\u307b\u3046\u304c\u30b3\u30b9\u30c8\u304c\u9ad8\u3044\u30b1\u30fc\u30b9\u3082\u3042\u308b (\u9577\u3044\u6587\u5b57\u5217\u306e\u5165\u3063\u3066\u3044\u308b std::string \u3092\u77ed\u3044\u6587\u5b57\u5217\u306b\u66f8\u304d\u63db\u3048\u308b\u3068\u304d\u3068\u304b)\n\u5024\u6e21\u3057\u306f\u30b9\u30e9\u30a4\u30b7\u30f3\u30b0\u306e\u554f\u984c\u3092\u4f34\u3046\u306e\u3067\u6d3e\u751f\u30af\u30e9\u30b9\u3092\u57fa\u5e95\u30af\u30e9\u30b9\u578b\u306e\u5909\u6570\u306b\u5024\u6e21\u3057\u4ee3\u5165\u3059\u308b\u969b\u306b\u306f\u6c17\u3092\u3064\u3051\u308d\n\n\n42: insert(push_back\u3068\u304b\u306e\u7dcf\u79f0)\u306e\u4ee3\u308f\u308a\u306bemplace(emplace_*\u306e\u7dcf\u79f0)\u306e\u5229\u7528\u3092\u8003\u3048\u308d\n\n\u30b3\u30f3\u30c6\u30ca\u306b\u5024\u3092\u633f\u5165\u3059\u308b\u3068\u304d\u306b\u4e00\u6642\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u4f5c\u3089\u308c\u308b\u3068\u3059\u308b\u3068\u3001\u30e0\u30fc\u30d6\u6f14\u7b97\u304c\u4f59\u5206\u306b\u304b\u304b\u308b\u3002emplace\u3092\u4f7f\u3048\u3070\u4e00\u6642\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u751f\u6210\u3092\u907f\u3051\u3089\u308c\u308b\u3002\n\nstd::vector<str::string> vs;\nvs.push_back(\"xyzzy\"); // \u5b9f\u614b\u306fvs.push_back(std::string(\"xyzzy\"));\nvs.emplace_back(\"xyzzy\"); // \u30d9\u30bf\u30fc\nvs.emplace_back(50, 'x'); // x\u304c50\u56de\u7d9a\u304f\u6587\u5b57\u5217\u3092vs\u306b\u633f\u5165\u3059\u308b\n\n\n\u3058\u3083\u3042insert\u4f7f\u3046\u306e\u3092\u3084\u3081\u3066\u3044\u3064\u3082emplace\u3092\u4f7f\u3048\u3070?\u3068\u601d\u3044\u304d\u3084\u3001insert\u306e\u307b\u3046\u304c\u6027\u80fd\u304c\u3044\u3044\u30b1\u30fc\u30b9\u3082\u3042\u308b\u3002\u30b3\u30f3\u30c6\u30ca\u306e\u7a2e\u985e\u306a\u3069\u524d\u63d0\u6761\u4ef6\u304c\u8907\u96d1\u306a\u306e\u3060\u304c\u3001\u4e0b\u8a18\u6761\u4ef6\u304c\u3059\u3079\u3066\u6e80\u305f\u3055\u308c\u308c\u3070\u3001\u307b\u307cemplace\u306e\u307b\u3046\u304c\u3088\u3044\u3002\n\n\n\u5024\u304c\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u4ee3\u5165\u3055\u308c\u308b\u306e\u3067\u306f\u306a\u304f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u65b0\u3057\u304f\u69cb\u7bc9\u3055\u308c\u308b(push_back\u3068\u304b\u306b\u76f8\u5f53\u3059\u308b\u72b6\u6cc1)\n\u633f\u5165\u3055\u308c\u308b\u5f15\u6570\u578b\u304c\u30b3\u30f3\u30c6\u30ca\u306b\u683c\u7d0d\u3055\u308c\u308b\u578b\u3068\u7570\u306a\u308b (insert\u3060\u3068\u4e00\u6642\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u4f5c\u3089\u308c\u308b)\n\u30b3\u30f3\u30c6\u30ca\u304c\u633f\u5165\u3057\u3088\u3046\u3068\u3057\u305f\u5024\u3092\u91cd\u8907\u3068\u3057\u3066\u62d2\u7d76\u3059\u308b\u53ef\u80fd\u6027\u304c\u4f4e\u3044 (\u91cd\u8907\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u3067\u306femplace\u306f\u6bd4\u8f03\u306e\u305f\u3081\u306b\u4e00\u5ea6\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u3063\u3066\u307f\u3066\u3001\u91cd\u8907\u304c\u691c\u51fa\u3055\u308c\u305f\u3089\u7834\u68c4\u3059\u308b\u3053\u3068\u306b\u306a\u308b)\n\n\nstd::shared_ptr\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u683c\u7d0d\u3057\u3001\u304b\u3064\u30ab\u30b9\u30bf\u30e0\u30c7\u30ea\u30fc\u30bf\u3092\u4f7f\u3046\u3068\u304d\u306femplace\u3067\u306f\u306a\u304fpush_back\u3067\u3001ptrs.push_back(std::shared_ptr<Widget>(new Widget, customDeleter));\u306e\u3088\u3046\u306b\u305b\u3088\u3002shared_ptr\u3092\u4f5c\u3063\u3066\u304b\u3089\u30b3\u30f3\u30c6\u30ca\u306b\u5165\u308c\u306b\u884c\u304f\u3068\u3044\u3046\u9806\u5e8f\u3092\u78ba\u4fdd\u3059\u308b\u3068\u4f8b\u5916\u5b89\u5168\u7684\u306b\u30d9\u30bf\u30fc\u3002\u4e00\u822c\u306bnew\u3068\u304b\u3092emplace\u306b\u6e21\u3059\u3079\u304d\u3067\u306a\u3044\u3002\nexplicit\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u4f34\u3046\u3068\u304d\u306f\u8981\u6ce8\u610f\u3002emplace_back\u306e\u4e2d\u3067\u306f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u660e\u793a\u7684\u306b\u547c\u3070\u308c\u308b\u3002\u3042\u3068\u3001regex\u306f const char*\u3092\u53d7\u3051\u53d6\u308bexplicit\u306a\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u6301\u3064\u3002\n\nstd::vector<std::regex> regexes;\nregexes.emplace_back(nullptr); // \u4e0d\u6b63\u3060\u304c\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u306b\u306a\u3089\u306a\u3044\nregexes.push_back(nullptr); // \u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\nstd::regex r = nullptr; // \u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\nstd::regex r(nullptr); // \u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u306b\u306a\u3089\u306a\u3044\n\n\n\u81ea\u5206\u306b\u3068\u3063\u3066\u306e\u8981\u70b9\u30e1\u30e2\u3002\n\nEffective C++\u306e\u8457\u8005\u306eScott Meyers\u306b\u3088\u308bC++11/14\u306e\u5b9a\u756a\u672c(\u3089\u3057\u3044)\n\u203b\u77e5\u3089\u305a\u306b\u8cb7\u3063\u305f\u3089\u82f1\u8a9e\u3060\u3063\u305f\u306e\u3067\u3001\u306a\u3093\u3068\u304b\u901a\u8aad\u3057\u307e\u3057\u305f\u304c\u7406\u89e3\u306f\u968f\u6240\u602a\u3057\u3044\u3068\u601d\u308f\u308c\u307e\u3059\u3002\u8aa4\u308a\u306f\u662f\u975e\u3054\u6307\u6458\u304f\u3060\u3055\u3044\u3002\n\n2015/11/02\u8ffd\u8a18: \u65e5\u672c\u8a9e\u7248\u304c\u51fa\u3066\u3044\u307e\u3059\u3002\u672c\u7a3f\u306f\u65e5\u672c\u8a9e\u8a33\u304c\u51fa\u308b\u524d\u306b\u66f8\u3044\u305f\u306e\u306a\u306e\u3067\u76ee\u6b21\u306e\u8a33\u306f\u4e00\u81f4\u3057\u307e\u305b\u3093\u3002\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002 https://www.oreilly.co.jp/books/9784873117362/\n\n# \u7b2c1\u7ae0: \u578b\u63a8\u8ad6\n* `auto`\u3084`decltype`\u306b\u3088\u308b\u578b\u63a8\u8ad6\u306f\u30b3\u30fc\u30c9\u306e\u5197\u9577\u6027\u3092\u6e1b\u3089\u3059\u5f37\u529b\u306a\u6a5f\u69cb\u3060\u304c\u3001\u578b\u63a8\u8ad6\u306e\u52d5\u304d\u3092\u3057\u3063\u304b\u308a\u7406\u89e3\u3057\u3066\u3044\u306a\u3044\u3068modern C++\u3067\u306e\u52b9\u7387\u7684\u306a\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306f\u307b\u307c\u4e0d\u53ef\u80fd\u3002\n\n## 1: \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u578b\u63a8\u8ad6\u3092\u7406\u89e3\u3057\u308d\n\n* \u95a2\u6570\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8`template<typename T>\b void f(ParamType param);`\u3092\u57fa\u672c\u306b\u8003\u3048\u3001`f(expr)`\u3068\u3044\u3046\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\u3068\u304d\u306b`T`\u304c\u4f55\u3068\u63a8\u8ad6\u3055\u308c\u308b\u304b\u3092\u8ad6\u3058\u308b\u3002\n\n\u578b\u63a8\u8ad6\u306e\u30b7\u30ca\u30ea\u30aa\u306f3\u7a2e\u985e(+\u4f8b\u59161\u7a2e)\u3002\n\n* \u30b1\u30fc\u30b91: `ParamType`\u306f\u53c2\u7167\u307e\u305f\u306f\u30dd\u30a4\u30f3\u30bf\u578b\u3060\u304cuniversal refernce(`T&&`)\u3067\u306f\u306a\u3044\n     * `expr`\u304b\u3089\u53c2\u7167\u3092\u5916\u3057\u3066\u304b\u3089`ParamType`\u3068\u7167\u5408\u3057\u3066`T`\u3092\u6c7a\u3081\u308b\n* \u30b1\u30fc\u30b92: `ParamType`\u304c universal reference(`T&&`)\n  * `expr`\u304clvalue\u306a\u3089`T`\u3068`ParamType`\u306flvalue\u53c2\u7167\u3002\u3053\u308c\u306f2\u3064\u306e\u610f\u5473\u3067\u30c8\u30ea\u30c3\u30ad\u30fc\u3002\n      1. \u3053\u308c\u306f`T`\u304c\u53c2\u7167\u578b\u3068\u63a8\u8ad6\u3055\u308c\u308b\u552f\u4e00\u306e\u30b1\u30fc\u30b9\u3002\n      2. `ParamType`\u306f\u6587\u6cd5\u7684\u306b\u306frvalue reference\u3068\u3057\u3066\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u306e\u306b\u578b\u63a8\u8ad6\u306e\u7d50\u679c\u306flvalue reference\u306b\u306a\u308b\u3002\n  * `expr`\u304crvalue\u306a\u3089\u30b1\u30fc\u30b91\u3069\u304a\u308a\u306e\u52d5\u4f5c\u3002\n* \u30b1\u30fc\u30b93: `ParamType`\u304c\u30dd\u30a4\u30f3\u30bf\u3067\u3082\u53c2\u7167\u3067\u3082\u306a\u3044\n  * `expr`\u304b\u3089\u53c2\u7167\u3068CV\u4fee\u98fe\u5b50\u3092\u5916\u3059(\u5024\u6e21\u3057\u306a\u306e\u3067CV\u4fee\u98fe\u5b50\u3082\u306a\u304f\u306a\u308b)\u3002\u305f\u3060\u3057\u30dd\u30a4\u30f3\u30bf\u3084\u53c2\u7167\u304c\u6307\u3059\u5148\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306econst\u6027\u306f\u4fdd\u5b58\u3055\u308c\u308b\u3002\n* (\u4f8b\u5916:\u914d\u5217\u30fb\u95a2\u6570)\n  * \u666e\u6bb5\u306f\u914d\u5217\u306f\u5148\u982d\u30dd\u30a4\u30f3\u30bf\u306b\u81ea\u52d5\u5909\u63db\u3055\u308c\u308b\u304c\u3001`ParamType`\u304c\u53c2\u7167\u4fee\u98fe\u5b50\u3092\u542b\u3080\u3068\u304d\u3060\u3051param\u306f\u300c\u914d\u5217\u3078\u306e\u53c2\u7167\u300d\u578b\u3068\u306a\u308b\u3002\u95a2\u6570\u30dd\u30a4\u30f3\u30bf\u306b\u3064\u3044\u3066\u3082\u540c\u69d8\u3060\u304c\u30b3\u30fc\u30ca\u30fc\u30b1\u30fc\u30b9\u306a\u306e\u3067\u6c17\u306b\u3057\u306a\u304f\u3066\u3044\u3044\u3002\n\n\u4f8b\n\n```\nint x = 27;\nconst int cx = x;\nconst int& rx = x;\n\ntemplate<typename T> void f1(T& param); // \u30b1\u30fc\u30b91\nf1(x);  // T is int, param is int&\nf1(cx); // T is const int, param is const int&\nf1(rx); // T is const int, param is const int& \n\ntemplate<typename T> void f2(T&& param); // \u30b1\u30fc\u30b92\nf2(x);  // x is lvalue: T is int&, param is int&\nf2(cx); // cx is lvalue: T is const int&, param is const int&\nf2(rx); // rx is lvalue: T is const int&, param is const int&\nf2(27); // 27 is rvalue: T is int, param is int&& \n\ntemplate<typename T> void f3(T param); // \u30b1\u30fc\u30b93\nf3(x);  // T and param are both int\nf3(cx); // T and param are both int\nf3(rx); // T and param are both int\n\n```\n\n## 2: auto\u578b\u63a8\u8ad6\u3092\u7406\u89e3\u3057\u308d\n\n* `auto`\u3068\u95a2\u6570\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u57fa\u672c\u540c\u3058\u3060\u304c\u30011\u3064\u3060\u3051\u4f8b\u5916\u304c\u3042\u308b\u3002`auto x={27};`\u307e\u305f\u306f`auto x{27};`\u3068\u5ba3\u8a00\u3057\u305f\u3068\u304d\u3060\u3051\u3001x\u306f`int`\u578b\u3067\u306a\u304f`std::initializer_list<int>`\u578b\u3068\u306a\u308b\u3002\n* C++14\u3067\u306e\u95a2\u6570\u623b\u308a\u5024\u578b\u6307\u5b9a\u3084\u30e9\u30e0\u30c0\u5f0f\u3067\u306e`auto`\u306f\u4e0a\u8a18\u306e`auto`\u578b\u63a8\u8ad6\u3067\u306f\u306a\u304f#1\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u578b\u63a8\u8ad6\u306b\u5f93\u3046\u3002 \n\n## 3: decltype\u3092\u7406\u89e3\u3057\u308d\n\n* \u540d\u524d(\u5909\u6570\u540d\u3068\u304b\u95a2\u6570\u540d\u3068\u304b)\u306b\u9069\u7528\u3057\u305f\u5834\u5408\u306e`decltype(x)`\u306f\u76f4\u611f\u3069\u304a\u308a\u52d5\u304f\u306e\u3067\u5fc3\u914d\u306a\u3044\n  * decltype\u306fauto\u3068\u9055\u3063\u3066\u53c2\u7167\u578b\u3092\u5916\u3057\u305f\u308a\u3057\u306a\u3044\u3002\n* \u540d\u524d\u3092\u305d\u306e\u307e\u307e\u66f8\u304f\u5f62\u4ee5\u5916\u306e\u3001T\u578b\u306b\u76f8\u5f53\u3059\u308blvalue expression\u306b\u5bfe\u3057\u3066\u306f`decltype`\u306f\u3044\u3064\u3082T&\u578b\u3092\u5831\u544a\u3059\u308b\u3002()\u3092\u3064\u3051\u308b\u3060\u3051\u3067\u300c\u540d\u524d\u3092\u305d\u306e\u307e\u307e\u66f8\u304f\u5f62\u3067\u306a\u3044\u300d\u3068\u307f\u306a\u3055\u308c\u308b\u3002\u4f8b\u3048\u3070\u3001x\u304cint\u306e\u3068\u304ddecltype((x))\u306fint&\u306a\u306e\u3067\u6ce8\u610f!\n* C++14\u3067\u306f`decltype(auto)`\u304c\u4f7f\u3048\u308b\u3002\"\u3075\u3064\u3046\u306eauto\u3067\u306a\u304fdecltype\u306e\u30eb\u30fc\u30eb\u3067\u578b\u63a8\u8ad6\u3057\u3066\u306d\"\u306e\u610f\u3002\n\n## 4: \u63a8\u8ad6\u3055\u308c\u305f\u578b\u3092\u8868\u793a\u3059\u308b\u65b9\u6cd5\u3092\u77e5\u3063\u3066\u304a\u3051\n* IDE\u306e\u6a5f\u80fd\u3092\u4f7f\u3046: \u5618\u3092\u3064\u304b\u308c\u308b\u3053\u3068\u304c\u3042\u308b\u3002\n* \u30b3\u30f3\u30d1\u30a4\u30e9\u306b\u30a8\u30e9\u30fc\u3092\u5410\u304b\u305b\u3066\u89b3\u5bdf\u3059\u308b\u3002`template<typename T> class TD;`\u3068\u3044\u3046\u5b9a\u7fa9\u306e\u306a\u3044\u30af\u30e9\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5ba3\u8a00\u3057\u3066\u304a\u304f\u3002x\u306e\u578b\u304c\u77e5\u308a\u305f\u3051\u308c\u3070`TD<decltype x> xType;`\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3092\u8a66\u307f\u308b\u3068\"TC<XXX>\u304c\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3067\u304d\u306a\u3044\u3088\"\u7684\u306a\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u30b3\u30f3\u30d1\u30a4\u30e9\u304c\u5410\u3044\u3066\u304f\u308c\u308b\u306f\u305a\u3002\n* \u30e9\u30f3\u30bf\u30a4\u30e0\u3067\u306eprintf\u30a2\u30d7\u30ed\u30fc\u30c1: `std::type_info::name`\u306f\u4fe1\u7528\u3067\u304d\u306a\u3044\u3002\u4ed5\u69d8\u4e0a\u53c2\u7167\u3068CV\u4fee\u98fe\u5b50\u306f\u7121\u8996\u3055\u308c\u308b\u3053\u3068\u306b\u306a\u3063\u3066\u3044\u308b\u3002boost::typeindex\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3046\u306e\u304c\u3088\u3044\u3002\n\n```\n#include <iostream>\n#include <boost/type_index.hpp>\n\ntemplate<typename T> void f(const T& param) {\n  std::cout << \"T: \"     << boost::typeindex::type_id_with_cvr<T>().pretty_name() << std::endl; // show T\n  std::cout << \"param: \" << boost::typeindex::type_id_with_cvr<decltype(param)>().pretty_name() << std::endl; // show param\n}\n\nint main() {\n  int x = 27;\n  f(x); // T: int, param: int const&\n}\n```\n\n# \u7b2c2\u7ae0: auto\n\n* \u578b\u63a8\u8ad6\u306b\u3088\u308aauto\u304c(\u30e6\u30fc\u30b6\u8996\u70b9\u3067\u306f)\u5909\u306a\u52d5\u304d\u3092\u3059\u308b\u3053\u3068\u304c\u3042\u308b\u304c\u3001\u8ae6\u3081\u3066\u660e\u793a\u7684\u578b\u6307\u5b9a\u306b\u983c\u308b\u3088\u308aauto\u3092\u671f\u5f85\u901a\u308a\u52d5\u304b\u305b\u308b\u3088\u3046\u304c\u3093\u3070\u308d\u3046\u3002\n\n## 5: \u660e\u793a\u7684\u306a\u578b\u5ba3\u8a00\u3088\u308aauto\u3092\u4f7f\u3048\n\n* auto\u306f\u3059\u3070\u3089\u3057\u3044\u3002\n  * \u521d\u671f\u5316\u3057\u306a\u3044\u3068\u578b\u304c\u6c7a\u307e\u3089\u306a\u3044\u306e\u3067\u5909\u6570\u306e\u521d\u671f\u5316\u5fd8\u308c\u3092\u9632\u3052\u308b\u3002\n  * C++14\u3067\u306f\u30e9\u30e0\u30c0\u5f0f\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3082auto\u304c\u4f7f\u3048\u308b\u3002\n  * \u30af\u30ed\u30fc\u30b8\u30e3\u3092\u66f8\u304f\u3068\u304d\u306b\u306f`std::function`\u5909\u6570\u306b\u683c\u7d0d\u3059\u308b\u3088\u308aauto\u5909\u6570\u306b\u683c\u7d0d\u3059\u308b\u307b\u3046\u304c\u697d\u3067\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u7684\u306b\u3082\u3088\u3044\u3002\n  * size_type\u306e\u30d3\u30c3\u30c8\u5e45\u306e\u74b0\u5883\u4f9d\u5b58\u6027(unsigned int\u3068\u540c\u3058\u3068\u306f\u9650\u3089\u306a\u3044!)\u3067\u30cf\u30de\u3063\u305f\u308a\u3059\u308b\u3053\u3068\u3082auto\u3067\u9632\u3052\u308b\u3002\n  * STL\u30b3\u30f3\u30c6\u30ca\u306b\u5bfe\u3059\u308b\u30a4\u30c6\u30ec\u30fc\u30bf\u306e\u578b\u6307\u5b9a\u8aa4\u308a(unordered_map\u306ekey\u90e8\u5206\u306bconst\u3092\u3064\u3051\u5fd8\u308c\u308b\u3068\u304b)\u3067\u3046\u3063\u304b\u308a\u4e00\u6642\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u4f5c\u3089\u308c\u307e\u304f\u3063\u3066\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u4f4e\u4e0b\u3068\u304b\u3082\u9632\u3052\u308b\n  * \u30b3\u30fc\u30c9\u306e\u5197\u9577\u6027\u304c\u6e1b\u3063\u3066\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3082\u697d\u306b\u306a\u308b\n\b\n* \u304b\u3088\u3046\u306bauto\u306f\u6700\u9ad8\u3060\u304c\u671b\u307e\u306a\u3044\u7d50\u679c\u3092\u751f\u3080\u3053\u3068\u3082\u3042\u308b\u306e\u3067\u6ce8\u610f\u305b\u3088!\n\n## 6: auto\u304c\u671b\u307e\u306a\u3044\u578b\u63a8\u8ad6\u3092\u3059\u308b\u3068\u304d\u306f *explicitly typed initializer idiom* \u3092\u4f7f\u3048\n\n* \u306f\u307e\u308b\u30b1\u30fc\u30b9\n  * \u4f8b: `std::vector<bool> f(); auto b = f()[0];`(f\u306fvector<bool>\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059\u95a2\u6570)\u3002`std::vector<bool>`\u306f\u30d3\u30c3\u30c8\u30d1\u30c3\u30ad\u30f3\u30b0\u3092\u3059\u308b\u3088\u3046\u7279\u6b8a\u5316\u3055\u308c\u3066\u304a\u308a`[]`\u6f14\u7b97\u5b50\u306f`bool&`\u3067\u306a\u304f`std::vector<bool>::reference`\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059\u3002\u5b9f\u88c5\u4f9d\u5b58\u3060\u304c\u3001\u3082\u3057`f()`\u304c\u8fd4\u3059\u4e00\u6642\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u6d88\u3048\u305f\u5f8c\u306b\u30d3\u30c3\u30c8\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u53c2\u7167\u3057\u3088\u3046\u3068\u3057\u305f\u3089\u7d50\u679c\u306f\u4e0d\u5b9a!\n  * \u4e00\u822c\u306b\u4e0d\u53ef\u8996\u306eproxy class\u3068auto\u306f\u76f8\u6027\u304c\u60aa\u3044\u3002\u30de\u30cb\u30e5\u30a2\u30eb\u3068\u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb\u3068\u5fc3\u306e\u76ee\u3067\u4e0d\u53ef\u8996\u306eproxy class\u3092\u898b\u629c\u3051\u3002\n* \u3053\u3046\u3057\u305f\u5834\u5408\u3082auto\u306e\u4f7f\u7528\u3092\u8ae6\u3081\u308b\u5fc5\u8981\u306f\u306a\u3044\u3002 *explicitly typed initializer idiom* \u306e\u51fa\u756a\u3002\u3072\u3068\u3053\u3068\u3067\u3044\u3046\u3068static_cast\u3057\u308d\u3068\u3044\u3046\u3053\u3068\u3002\u524d\u8ff0\u306e\u4f8b\u3067\u3042\u308c\u3070`auto b = static_cast<bool>(f()[0]);`\u3068\u3059\u308c\u3070\u3088\u3044\u3002\n\n\n# \u7b2c3\u7ae0: Modern C++\u3078\u306e\u79fb\u884c\n\n* auto\u3001\u30b9\u30de\u30fc\u30c8\u30dd\u30a4\u30f3\u30bf\u3001\u30e0\u30fc\u30d6\u30bb\u30de\u30f3\u30c6\u30a3\u30af\u30b9\u3001\u30e9\u30e0\u30c0\u5f0f\u3001\u4e26\u884c\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3001C++11/14\u306e\u5927\u304d\u306a\u65b0\u6a5f\u80fd\u3002\u3067\u3082\u305d\u306e\u307b\u304b\u306e\u7d30\u304b\u3044\u65b0\u6a5f\u80fd\u3082\u5927\u4e8b\u3002\n\n## 7: \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u6642\u306b()\u3068{}\u3092\u533a\u5225\u3057\u308d\n\n* \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u521d\u671f\u5316\u306e\u66f8\u5f0f\u3068\u3057\u3066\u3001`int x(0);`, `int y=0;`,  `int z{0};`\u304c\u3042\u308b\u3002(`int z={0};`\u3082\u5927\u62b5\u4f7f\u3048\u308b\u304c\u3001\u307b\u307c`int z{0};`\u3068\u540c\u3058\u6319\u52d5)\n\b\n  * \u30af\u30e9\u30b9\u5b9a\u7fa9\u5185\u3067\u306estatic\u3067\u306a\u3044\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u306e\u521d\u671f\u5316\u306f{}\u3068=\u3067\u66f8\u3051\u308b\u304c()\u306f\u30a8\u30e9\u30fc\n  * \u30b3\u30d4\u30fc\u4e0d\u53ef\u30aa\u30d6\u30b8\u30a7\u30af\u30c8(std::atomic\u3068\u304b)\u306f{}\u3068()\u3067\u521d\u671f\u5316\u3067\u304d\u308b\u304c=\u306f\u30a8\u30e9\u30fc\n  * {}\u3067\u306e\u521d\u671f\u5316\u3067\u306f\u7d44\u8fbc\u307f\u578b\u3067\u306e\u6697\u9ed9\u306e\u7cbe\u5ea6\u5207\u308a\u4e0b\u3052\u578b\u5909\u63db\u304c\u7981\u6b62\u3055\u308c\u308b\u3002`int x(1.0);`\u306fOK\u3060\u304c\u3001`int y{1.0};`\u306f\u30a8\u30e9\u30fc\u3002\n  * Widget w();\u3068\u66f8\u3044\u3066Widget\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9w\u3092\u4f5c\u308d\u3046\u3068\u3059\u308b\u3068\u95a2\u6570\u306e\u5ba3\u8a00\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u304c\u3001Widget w{};\u3068\u66f8\u3051\u3070\u5b89\u5fc3\n* \u305f\u3060\u3057\u3001{}\u66f8\u5f0f\u306fstd::initializer_list<T>\u3092\u5f15\u6570\u578b\u306b\u6301\u3064\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u512a\u5148\u3057\u3066\u547c\u3073\u51fa\u3057\u3066\u3057\u307e\u3046\u3002T\u306e\u90e8\u5206\u3092\u578b\u5909\u63db\u3057\u3066\u3067\u3082std::initializer_list<T>\u3092\u5f15\u6570\u578b\u306b\u6301\u3064\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u305d\u306e\u4ed6\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3088\u308a\u5148\u306b\u63a2\u3057\u3001\u305d\u306e\u904e\u7a0b\u3067\u7cbe\u5ea6\u5207\u308a\u4e0b\u3052\u578b\u5909\u63db\u304c\u3042\u308b\u3068\u30a8\u30e9\u30fc\u3092\u5410\u3044\u3066\u3057\u307e\u3046\u3002\n  * \u7a7a\u306e{}\u306f\u7a7a\u306estd::initializer_list\u3068\u306f\u307f\u306a\u3055\u308c\u305a\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u547c\u3070\u308c\u308b\n  * `std::vector v1(10, 20);`\u306f10\u8981\u7d20\u3067\u3001\u5168\u3066\u306e\u5024\u304c20\u3002`std::vector v2{10, 20};`\u306f2\u8981\u7d20\u3067\u5024\u306f10\u306820\u3002\n* \u4e16\u306e\u4e2d\u306b\u306f{}\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u4f7f\u3046\u6d3e\u3068()\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u4f7f\u3046\u6d3e\u304c\u3044\u308b\u3002\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30e6\u30fc\u30b6\u304c\u3069\u3063\u3061\u6d3e\u304b\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4e2d\u3067\u3069\u3063\u3061\u3067\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3059\u308b\u304b\u306f\u96e3\u3057\u3044\u554f\u984c\u306b\u306a\u308b\u3002\n\n## 8: 0\u3084NULL\u3088\u308anullptr\u3092\u4f7f\u3048\n\n* 0\u306fint\u3067\u30dd\u30a4\u30f3\u30bf\u578b\u3067\u306f\u306a\u3044\u3002NULL\u3082\u6574\u6570\u578b\u3067\u30dd\u30a4\u30f3\u30bf\u578b\u3067\u306f\u306a\u3044\u3002nullptr\u306f\u306a\u3093\u3067\u3082\u578b\u306e\u30dd\u30a4\u30f3\u30bf\u3068\u307f\u306a\u3057\u3066\u3088\u3044\u3002\n* \u7279\u306b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3084auto\u3068\u7d44\u307f\u5408\u308f\u305b\u3066\u4f7f\u3046\u3068\u304d\u306fnullptr\u3092\u4f7f\u3046\u3068\u975e\u5e38\u306b\u3088\u3044\u3002\n* (NULL\u3092\u4f7f\u3063\u3066\u3057\u307e\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f7f\u3044\u624b\u306b\u5099\u3048\u3066?)\u6574\u6570\u3068\u30dd\u30a4\u30f3\u30bf\u578b\u306e\u30aa\u30fc\u30d0\u30ed\u30fc\u30c9\u306f\u907f\u3051\u308d\n\n## 9: typedef\u3088\u308aalias\u5ba3\u8a00\u3092\u4f7f\u3048\n\n* \u306a\u305c\u306a\u3089alias\u5ba3\u8a00\u306f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5316\u3067\u304d\u308b\u304b\u3089\u3002\u4f8b:`template<typename T> using MyAllocList = std::list<T, MyAlloc<T>>;`\n* TMP(\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30e1\u30bf\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0)\u3057\u305f\u3053\u3068\u304c\u306a\u3044\u306a\u3089\u52c9\u5f37\u3057\u308d\u3002type traits\u3068\u3044\u3046\u306e\u304c\u3042\u308b\u3002\n  * C++11\u3067\u306f`std::remove_const<T>::type`\u3067T\u304b\u3089const\u6027\u3092\u53d6\u308a\u9664\u304f\u3053\u3068\u304c\u3067\u304d\u308b\u304c\u3001C++14\u3067\u306ftypedef\u3067\u306a\u304falias\u3092\u4f7f\u3063\u3066`std::remove_const_t<T>`\u3068\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\u307b\u304b\u306b\u3082\u3044\u308d\u3044\u308d\u306atype traits\u304c\u3042\u308b\u3088\u3002\n\n## 10: \u30b9\u30b3\u30fc\u30d7\u306a\u3057enum\u3088\u308a\u30b9\u30b3\u30fc\u30d7\u4ed8\u304denum\u3092\u4f7f\u3048\n\n* \u30b9\u30b3\u30fc\u30d7\u306a\u3057enum\u3067\u306f\u3001\u540d\u524d\u304cenum\u306e\u5916\u5074\u306e\u30b9\u30b3\u30fc\u30d7\u306b\u6f0f\u308c\u51fa\u3059\u3002\u30b9\u30b3\u30fc\u30d7\u4ed8\u304denum\u306f\u6f0f\u308c\u306a\u3044\u3002\u30b9\u30b3\u30fc\u30d7\u3042\u308aenum\u306f`enum class Color{black, white, red};`\u306e\u3088\u3046\u306b\u66f8\u304f\u3060\u3051\u3002\n* \u30b9\u30b3\u30fc\u30d7\u4ed8\u304denum\u3067\u306f\u6574\u6570\u3078\u306e\u6697\u9ed9\u5909\u63db\u304c\u884c\u308f\u308c\u306a\u3044\u3002static_cast\u304c\u5fc5\u9808\u3068\u306a\u308a\u3001\u30b3\u30fc\u30c9\u306e\u53ef\u8aad\u6027\u304c\u5411\u4e0a\u3059\u308b\u3002\n  * C++11\u3067\u306fenum\u306e\u5ba3\u8a00(\u5b9a\u7fa9\u306a\u3057)\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\u30b0\u30ed\u30fc\u30d0\u30eb\u306aenum\u306e\u4e2d\u306b\u65b0\u3057\u3044\u5024\u3092\u5b9a\u7fa9\u3057\u305f\u3068\u304d\u306b\u4f9d\u5b58\u95a2\u4fc2\u3067\u5168\u90e8\u306e\u30bd\u30fc\u30b9\u304c\u518d\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u308b\u3053\u3068\u3092\u9632\u3052\u308b\u3002\n  * \u305f\u3060\u3057\u3001enum\u306e\u30e1\u30e2\u30ea\u4e0a\u306e\u30b5\u30a4\u30ba\u306f\u308f\u304b\u3063\u3066\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u3067\u3001\u30b9\u30b3\u30fc\u30d7\u4ed8\u304denum\u306f\u5ba3\u8a00\u6642\u306b\u30b5\u30a4\u30ba\u304c\u660e\u793a\u7684\u306b\u308f\u304b\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u30b9\u30b3\u30fc\u30d7\u4ed8\u304denum\u306fint\u306e\u30b5\u30a4\u30ba\u3068\u6c7a\u307e\u3063\u3066\u3044\u308b\u3002\u307e\u305f\u3001\u30b9\u30b3\u30fc\u30d7\u306a\u3057enum\u3082\u30b9\u30b3\u30fc\u30d7\u4ed8\u304denum\u3082\u3001`enum class Status: std::unit32_t;`\u7b49\u3068\u3057\u3066\u30b5\u30a4\u30ba\u3092\u660e\u793a\u7684\u6307\u5b9a\u3067\u304d\u308b\u3002\n  * tuple\u306eget<X>\u7b49\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u6307\u5b9a\u306b\u306f\u30b9\u30b3\u30fc\u30d7\u306a\u3057enum\u304c\u4fbf\u5229\u3002\u30b9\u30b3\u30fc\u30d7\u3042\u308aenum\u3060\u3068X\u306e\u3068\u3053\u308d\u306b\u306f`static_cast<std::size_t>`\u304c\u5fc5\u8981\u3002std::underlying_type\u3068\u3044\u3046type trait\u3092\u4f7f\u3063\u3066\u3082\u3088\u3044\u3002\n\n## 11: \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u306e\u672a\u5b9a\u7fa9\u95a2\u6570\u3088\u308adelete\u3055\u308c\u305f\u95a2\u6570\u3092\u4f7f\u3048\n\n* \u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3084\u30b3\u30d4\u30fc\u4ee3\u5165\u6f14\u7b97\u5b50\u3092\u30e9\u30a4\u30d6\u30e9\u30ea\u5229\u7528\u8005\u306b\u4f7f\u308f\u308c\u305f\u304f\u306a\u3044\u3068\u304d\u306eC++98\u306e\u3084\u308a\u304b\u305f\u306fprivate\u5ba3\u8a00\u3057\u3066\u5b9a\u7fa9\u3057\u306a\u3044\u3053\u3068\u3060\u3063\u305f\u3002\n* C++11\u3067\u306fpublic\u5ba3\u8a00\u3057\u3066\u3001`basic_ios(const basic_ios&) = delete;`\u7b49\u3068\u66f8\u304f\u3002\n* delete\u8a18\u6cd5\u306e\u30e1\u30ea\u30c3\u30c8\n  * \u81ea\u30af\u30e9\u30b9\u3084friend\u304b\u3089\u3082\u30b3\u30d4\u30fc\u304c\u3067\u304d\u306a\u3044\u3053\u3068\u304c\u4fdd\u8a3c\u3067\u304d\u308b\n  * \u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u308f\u304b\u308a\u3084\u3059\u304f\u306a\u308b\n  * \u975e\u30e1\u30f3\u30d0\u95a2\u6570\u3082delete\u3067\u304d\u308b: \u671b\u307e\u306a\u3044\u6697\u9ed9\u578b\u5909\u63db\u306b\u3088\u308b\u95a2\u6570\u547c\u3073\u51fa\u3057(`bool isLucky(int n); bool isLucky(char) = delete;`)\u3084\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u7279\u5b9a\u578b\u3067\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316(`template typename<T> void f(T* ptr); template<> void f(void*) = delete;`)\u3092\u660e\u793a\u7684\u306b\u7981\u6b62\u3067\u304d\u308b \n  * \u30e1\u30f3\u30d0\u95a2\u6570\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u7279\u5b9a\u578b\u3067\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u7981\u6b62\u306fdelete\u3067\u3057\u304b\u3067\u304d\u306a\u3044\n\n## 12: \u4ed6\u306e\u95a2\u6570\u3092\u30aa\u30fc\u30d0\u30e9\u30a4\u30c9\u3057\u3066\u3044\u308b\u95a2\u6570\u306foverride\u3068\u5ba3\u8a00\u305b\u3088\n\n* \u95a2\u6570\u306e\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u304c\u8d77\u3053\u308b\u305f\u3081\u306e\u6761\u4ef6\u306f\u3051\u3063\u3053\u3046\u3046\u3063\u3068\u3046\u3057\u304f\u3001\u66f8\u304d\u9593\u9055\u3048\u3066\u3082\u30a8\u30e9\u30fc\u304c\u51fa\u306a\u3044\u3053\u3068\u304c\u591a\u3044\n  * \u57fa\u5e95\u30af\u30e9\u30b9\u306e\u95a2\u6570\u306fvirtual\u3067\u306a\u3044\u3068\u3044\u3051\u306a\u3044\n  * (\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u4ee5\u5916\u3067\u306f)\u95a2\u6570\u540d\u304c\u57fa\u5e95\u30af\u30e9\u30b9\u3068\u6d3e\u751f\u30af\u30e9\u30b9\u3067\u4e00\u81f4\u3057\u3066\u306a\u3044\u3068\u3044\u3051\u306a\u3044\n  * \u30d1\u30e9\u30e1\u30fc\u30bf\u578b\u3068\u3001const\u3055\u3068\u3001\u623b\u308a\u5024\u3068\u3001\u4f8b\u5916\u898f\u5b9a\u3082\u4e00\u81f4\u3057\u3066\u306a\u3044\u3068\u3044\u3051\u306a\u3044\n  * C++11\u3067\u306f\u3001\u3055\u3089\u306breference qualifier\u3082\u4e00\u81f4\u3057\u3066\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\n     * reference qualifier\u306f*this\u304clvalue\u304brvalue\u304b\u3067\u52d5\u4f5c\u3092\u5207\u308a\u66ff\u3048\u308b\u305f\u3081\u306e\u4ed5\u7d44\u307f (\u5fc5\u8981\u306b\u306a\u3063\u305f\u3089\u672c\u3092\u8aad\u307f\u8fd4\u3059)\n* \u305d\u3053\u3067\u3001\u30aa\u30fc\u30d0\u30e9\u30a4\u30c9\u3092\u884c\u3046\u6d3e\u751f\u30af\u30e9\u30b9\u5074\u306e\u95a2\u6570\u306e\u5ba3\u8a00\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u305b\u3088: `virtual void f() override;`\n    * \u4f55\u304b\u30df\u30b9\u304c\u3042\u3063\u305f\u3089\u30b3\u30f3\u30d1\u30a4\u30e9\u304c\u6012\u3063\u3066\u304f\u308c\u308b\u3002\n* final\u3068\u3044\u3046\u306e\u3082\u3042\u308b\u3002\u30af\u30e9\u30b9\u306b\u3082\u95a2\u6570\u306b\u3082\u3064\u3051\u3089\u308c\u308b\u3002\n\n## 13: iterator\u3088\u308aconst_iterator\u3092\u4f7f\u3048\n\b\n* const_iterator\u306fconst X*\u3068\u540c\u3058\u304f\u3001iterator\u306e\u6307\u3059\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30b3\u30fc\u30c9\u304c\u5909\u66f4\u3057\u306a\u3044\u3053\u3068\u3092\u610f\u5473\u3059\u308b\n* C++98\u3067\u306fconst_iterator\u306f\u5b9f\u7528\u7684\u3067\u306a\u304b\u3063\u305f\u304cC++11\u3067\u306f\u975e\u5e38\u306b\u4f7f\u3044\u3084\u3059\u304f\u306a\u3063\u305f\u3002\n\n```\nstd::vector<int> v;\nauto it = std::find(v.cbegin(), values.cend(), 1983); // it\u306e\u578b\u306fconst_iterator\nv.insert(it, 1998);\n```\n\n* \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4e2d\u3067\u306fstd::cbegin(v)\u3068\u3044\u3046\u975e\u30e1\u30f3\u30d0\u95a2\u6570\u547c\u3073\u51fa\u3057\u5f62\u304c\u4f7f\u3048\u308b\u304c\u3001C++14\u3067\u3057\u304b\u52d5\u304b\u306a\u3044\u3002(C++\u6a19\u6e96\u5316\u306e\u3068\u304d\u306e\u898b\u843d\u3068\u3057\u306e\u305b\u3044\u3089\u3057\u3044)\n\n## 14: \u4f8b\u5916\u3092\u5410\u304b\u306a\u3044\u95a2\u6570\u306fnoexcept\u3068\u5ba3\u8a00\u305b\u3088\n\n* noexcpt\u306f\u95a2\u6570\u306e\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u306e\u4e00\u90e8\u306a\u306e\u3067\u3001\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u4e00\u65e6\u516c\u958b\u3059\u308b\u3068\u547c\u3073\u51fa\u3057\u5074\u30b3\u30fc\u30c9\u304c\u305d\u308c\u306b\u4f9d\u5b58\u3057\u3066\u3057\u307e\u3046\u3053\u3068\u304c\u3042\u308b\n* noexcept\u95a2\u6570\u306f\u6700\u9069\u5316\u306b\u8ca2\u732e\u3059\u308b\u3002\n* noexcept\u306fmove\u52d5\u4f5c\u3001swap, \u30e1\u30e2\u30ea\u89e3\u653e\u95a2\u6570\u3001\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u7279\u306b\u6709\u76ca\u3002C++11\u3067\u306f\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067noexcept\u3002\n* \u5927\u90e8\u5206\u306e\u95a2\u6570\u306f\u73fe\u5b9f\u306b\u306fnoexcept\u5ba3\u8a00\u3057\u306a\u3044\u3002(\u4f8b\u5916\u306f\u6295\u3052\u308b\u304b\u3082..\u3068\u3044\u3046\u7acb\u5834)\n\n## 15: \u4f7f\u3048\u308b\u5834\u6240\u3067\u306fconstexpr\u3092\u4f7f\u3048\n\n* constexpr\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8(\u7d44\u8fbc\u578b\u542b\u3080)\u306f\u5b9a\u5024\u3067\u304b\u3064\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u308f\u304b\u3063\u3066\u3044\u308b\u5024\u3002\n* constexpr\u306a\u95a2\u6570\u306f\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u5224\u660e\u3057\u3066\u3044\u308b\u5b9a\u6570\u3092\u4e0e\u3048\u3066\u547c\u3070\u308c\u308b\u3068\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u5224\u660e\u3057\u3066\u3044\u308b\u5b9a\u6570\u3092\u8fd4\u3059\u3002\n* constexpr\u306f\u95a2\u6570\u306e\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u306e\u4e00\u90e8\u3067\u3001\u3042\u3068\u3067\u5909\u66f4\u3059\u308b\u3068\u5f71\u97ff\u304c\u5927\u304d\u3044\u3053\u3068\u3082\u3042\u308b\u306e\u3067\u6ce8\u610f\u3002\n\n\u4f8b:\n\n```\n#include <iostream>\n#include <array>\n\nconstexpr int pow(int base, int exp) noexcept {\n  int out = 1;\n  for(int i = 0; i < exp; i++) {\n    out *= base;\n  }\n  return out;\n}\n\nint main() {\n  std::array<int, pow(3, 3)> ary;\n  std::cout << ary.size() << std::endl; // 27\n}\n```\n\n\n## 16: const\u30e1\u30f3\u30d0\u95a2\u6570\u3092\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u306b\u3057\u308d\n\n* \u30e1\u30e2\u5316\u306bconst\u30e1\u30f3\u30d0\u95a2\u6570\u3068mutable\u306a\u30e1\u30e2\u7528\u5909\u6570\u3092\u4f7f\u3046\u306e\u306f\u6b63\u5f53\u3001\u3057\u304b\u3057C++98\u6d41\u306e\u66f8\u304d\u65b9\u3067\u306f\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u3067\u306a\u3044\n* mutable\u306amutex\u3092\u30e1\u30f3\u30d0\u8ffd\u52a0\u3059\u308b:\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5168\u4f53\u304c\u30e0\u30fc\u30d6\u53ef\u30fb\u30b3\u30d4\u30fc\u4e0d\u53ef\u306b\u306a\u308b\n* 1\u3064\u306e\u5909\u6570\u3084\u30e1\u30e2\u30ea\u7b87\u6240\u3060\u3051\u306b\u5909\u66f4\u3092\u52a0\u3048\u308b\u3068\u304d\u306fatomic\u306a\u30ab\u30a6\u30f3\u30bf\u3060\u3051\u3067\u3044\u3044(\u3053\u306e\u5834\u5408\u3082\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u30b3\u30d4\u30fc\u4e0d\u53ef\u306b\u306a\u308b)\n\n##17: \u7279\u6b8a\u30e1\u30f3\u30d0\u95a2\u6570\u306e(\u81ea\u52d5)\u751f\u6210\u3092\u7406\u89e3\u3057\u308d\n\n* C++98\u3067\u306e\u7279\u6b8a\u30e1\u30f3\u30d0\u95a2\u6570: \u30c7\u30d5\u30a9\u30eb\u30c8\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3001\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u3001\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3001\u30b3\u30d4\u30fc\u4ee3\u5165\u6f14\u7b97\u5b50\n  * \u5fc5\u8981\u306b\u306a\u3063\u305f\u3068\u304d\u306b\b public inline \u3067\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u5168\u304f\u306a\u3044\u3068\u304d\u3060\u3051\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u3002\u81ea\u52d5\u751f\u6210\u30b3\u30d4\u30fc\u6f14\u7b97\u306f\u8981\u7d20\u3054\u3068\u306e\u30b3\u30d4\u30fc\u6319\u52d5\u3002\n* C++11\u3067\u52a0\u308f\u3063\u305f\u7279\u6b8a\u30e1\u30f3\u30d0\u95a2\u6570: \u30e0\u30fc\u30d6\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3001\u30e0\u30fc\u30d6\u4ee3\u5165\u6f14\u7b97\u5b50\n  * \u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u30e0\u30fc\u30d6\u95a2\u6570\u306f\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u306e\u8981\u7d20\u3054\u3068\u306e\u30e0\u30fc\u30d6\u3092\u8a66\u307f\u308b\u3002\u30e0\u30fc\u30d6\u6f14\u7b97\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u306a\u3044\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u306b\u3064\u3044\u3066\u306f\u30b3\u30d4\u30fc\u3092\u3059\u308b\u3002\n* \u30b3\u30d4\u30fc\u6f14\u7b97(\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u30fb\u30b3\u30d4\u30fc\u4ee3\u5165)\u306f\u30012\u3064\u306e\u30e0\u30fc\u30d6\u6f14\u7b97\u304c\u3044\u305a\u308c\u3082\u5ba3\u8a00\u3055\u308c\u3066\u3044\u306a\u3044\u3068\u304d\u3060\u3051\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u3002(\u4ed6\u65b9\u306e)\u30b3\u30d4\u30fc\u6f14\u7b97\u307e\u305f\u306f\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u3068\u304d\u306e\u30b3\u30d4\u30fc\u6f14\u7b97\u306e\u81ea\u52d5\u751f\u6210\u306fC++11\u3067\u306fdeprecated\u3002\n* \u30e0\u30fc\u30d6\u6f14\u7b97\u306e\u81ea\u52d5\u751f\u6210\u306f\u3001\u30b3\u30d4\u30fc\u6f14\u7b97\u30fb(\u4ed6\u65b9\u306e)\u30e0\u30fc\u30d6\u6f14\u7b97\u30fb\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u3044\u305a\u308c\u3082\u5ba3\u8a00\u3055\u308c\u3066\u3044\u306a\u3044\u3068\u304d\u3060\u3051\u884c\u308f\u308c\u308b\u3002\n* \u30b3\u30d4\u30fc\u6f14\u7b97\u30fb\u30e0\u30fc\u30d6\u6f14\u7b97\u30fb\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u3044\u305a\u308c\u304b\u304c\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u3068\u304d\u306e\u30b3\u30d4\u30fc\u6f14\u7b97\u306e\u81ea\u52d5\u751f\u6210\u306fobsolete\u306a\u306e\u3067\u3001\u30ec\u30ac\u30b7\u30fc\u30b3\u30fc\u30c9\u306b`Widget(const Widget&) = default;`\u7b49\u306e\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u660e\u793a\u7684\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u5b9f\u88c5\u3067\u3088\u3044\u3053\u3068\u3092\u8868\u660e\u305b\u3088\u3002\n  * \u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u3092virtual\u5ba3\u8a00\u3059\u308b\u3060\u3051\u3067\u30e0\u30fc\u30d6\u6f14\u7b97\u306e\u751f\u6210\u304c\u6291\u5236\u3055\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u30e0\u30fc\u30d6\u6f14\u7b97\u30fb\u30b3\u30d4\u30fc\u6f14\u7b97\u306e\u30b5\u30dd\u30fc\u30c8\u3092=default\u3067\u660e\u793a\u7684\u306b\u793a\u3059\u306e\u304c\u3088\u3044\u3002\n  * \u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u5f8c\u3067\u5ba3\u8a00\u3059\u308b\u30b1\u30fc\u30b9\u306b\u5099\u3048\u3066\u30b3\u30d4\u30fc\u6f14\u7b97\u30fb\u30e0\u30fc\u30d6\u6f14\u7b97\u3092\u3042\u3089\u304b\u3058\u3081=default\u3067\u660e\u793a\u7684\u306b\u5ba3\u8a00\u3057\u3066\u304a\u304f\u306e\u306f\u3088\u3044\u30de\u30ca\u30fc\u3002\n* \u30e1\u30f3\u30d0\u95a2\u6570\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u3001T\u3092\u81ea\u8eab\u306e\u30af\u30e9\u30b9\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3057\u305f\u3068\u304d\u306b\u7279\u6b8a\u30e1\u30f3\u30d0\u95a2\u6570\u306b\u3042\u305f\u3063\u3066\u3057\u307e\u3046\u5834\u5408\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u3088\u3063\u3066\u7279\u6b8a\u30e1\u30f3\u30d0\u95a2\u6570\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3057\u307e\u3046\u3002 (\u5909\u63db\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u3046\u3063\u304b\u308a\u3067\u304d\u3066\u3057\u307e\u3046\u30b1\u30fc\u30b9\u304c\u3042\u308b\u3053\u3068\u306b\u6ce8\u610f)\n\n# \u7b2c4\u7ae0: \u30b9\u30de\u30fc\u30c8\u30dd\u30a4\u30f3\u30bf\n\n* \u751f\u306e\u30dd\u30a4\u30f3\u30bf\u306f\u5f37\u529b\u3067\u306f\u3042\u308b\u304c\u6271\u3044\u3092\u3061\u3087\u3063\u3068\u3067\u3082\u9593\u9055\u3048\u308b\u3068\u75db\u3044\u76ee\u306b\u3042\u3046\u3002\n* \u30b9\u30de\u30fc\u30c8\u30dd\u30a4\u30f3\u30bf\u306f\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u3068\u4f3c\u305f\u6271\u3044\u304c\u3067\u304d\u3001\u843d\u3068\u3057\u7a74\u3092\u907f\u3051\u3089\u308c\u308b\u306e\u3067\u306a\u308b\u3079\u304f\u4f7f\u3048\u3002C++\u306b\u306fstd::auto_ptr(deprecated), std::unique_ptr, std::shared_ptr, std::uniq_ptr\u304c\u3042\u308b\u3002\n\n## 18: \u6392\u4ed6\u7684\u6240\u6709\u6a29\u306b\u3088\u308b\u30ea\u30bd\u30fc\u30b9\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u306b\u306fstd::unique_ptr\u3092\u5229\u7528\u305b\u3088\n\n* std::unique_ptr\u306f\u6392\u4ed6\u7684\u6240\u6709\u6a29\u306e\u30bb\u30de\u30f3\u30c6\u30a3\u30af\u30b9\u3092\u3082\u3064\u3002\u30e0\u30fc\u30d6\u53ef\u3001\u30b3\u30d4\u30fc\u4e0d\u53ef\u3002\u7834\u58ca\u6642\u306bnon-null\u306estd::unique_ptr\u306f\u81ea\u5206\u304c\u6307\u3057\u3066\u3044\u308b\u5148\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u7834\u58ca\u3059\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u547c\u3070\u308c\u308b\u304c\u30c7\u30ea\u30fc\u30bf\u95a2\u6570\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n  * \u30c7\u30ea\u30fc\u30bf\u3092\u30e9\u30e0\u30c0\u5f0f\u3067\u66f8\u304f\u3068\u4fbf\u5229\u3060\u3057\u6027\u80fd\u3082\u3088\u3044\u3002(\u30ad\u30e3\u30d7\u30c1\u30e3\u3092\u3057\u306a\u3044\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u95a2\u6570\u30dd\u30a4\u30f3\u30bf\u306e\u30b9\u30da\u30fc\u30b9\u3092\u98df\u308f\u306a\u3044)\n* \u30d5\u30a1\u30af\u30c8\u30ea\u95a2\u6570\u304cstd::unique_ptr\u3092\u8fd4\u3059\u306e\u306f\u3088\u304f\u3042\u308b\u4f7f\u3044\u304b\u305f\u3002\u30e0\u30fc\u30d6\u6f14\u7b97\u3067\u6240\u6709\u6a29\u3092\u5f15\u304d\u7d99\u3044\u3067\u3044\u304f\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n  * \u30e9\u30a4\u30d6\u30e9\u30ea\u30e6\u30fc\u30b6\u306fstd::unique_ptr\u3092\u8cb0\u3048\u3070\u30ea\u30bd\u30fc\u30b9\u89e3\u653e(\u3057\u5fd8\u308c\u3084\u8907\u6570\u56de\u89e3\u653e\u3001\u89e3\u653e\u65b9\u6cd5)\u306b\u3064\u3044\u3066\u60a9\u307e\u306a\u304f\u3066\u3088\u3044\u3002\n* \u521d\u671f\u5316\u305a\u307f\u306estd::unique_ptr\u306b\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u306e\u4ee3\u5165\u306f\u3067\u304d\u306a\u3044\u3002\n* std::unique_ptr\u306fstd::shared_ptr\u306b\u52b9\u7387\u7684\u306b\u6697\u9ed9\u5909\u63db\u3067\u304d\u308b\u3002(\u5909\u63db\u306f\u3001\u30dd\u30a4\u30f3\u30bf\u304c\u6307\u3059\u30ea\u30bd\u30fc\u30b9\u306e\u6392\u4ed6\u6240\u6709\u6a29\u7ba1\u7406\u3092\u3084\u3081\u5171\u6709\u7ba1\u7406\u306b\u79fb\u884c\u3059\u308b\u3053\u3068\u3092\u610f\u5473\u3059\u308b)\n\n\u81ea\u4f5c\u306e\u4f8b:\n\n```\n#include <iostream>\n#include <boost/type_index.hpp>\n\nclass BaseItem {\npublic:\n  virtual ~BaseItem(){};\n};\n\ntemplate<typename T>\nclass Item : public BaseItem{\n  T t;\n};\n\ntemplate<typename T>\nauto factory() {\n  auto customDeleter = [](BaseItem *pItem) {\n    std::cout << \"Item of type \" << boost::typeindex::type_id_with_cvr<T>().pretty_name() << \" is being deleted!\" << std::endl;\n    delete pItem;\n  };\n  std::unique_ptr<BaseItem, decltype(customDeleter)> pItem(new Item<T>, customDeleter); // decltype\u306e\u3042\u305f\u308a\u306b\u6ce8\u76ee\n  return pItem;\n};\n\nint main() {\n  auto i = factory<int>(); // auto \u3092\u4f7f\u3046\u3068\u3088\u3044\n  // output: Item of type int is being deleted!\n}\n```\n\n## 19: \u5171\u540c\u6240\u6709\u6a29\u306b\u3088\u308b\u30ea\u30bd\u30fc\u30b9\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u306b\u306f std::shared_ptr \u3092\u5229\u7528\u305b\u3088\n\n* std::shared_ptr\u306f\u30ea\u30bd\u30fc\u30b9\u306e\u30e9\u30a4\u30d5\u30bf\u30a4\u30e0\u7ba1\u7406\u3092\u81ea\u52d5\u5316\u3059\u308b\u304c\u3001GC(Garbage Collection)\u3068\u9055\u3063\u3066\u30bf\u30a4\u30df\u30f3\u30b0\u306f\u4e88\u6e2c\u53ef\u80fd\u3002\n* \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u307e\u3060\u4f7f\u308f\u308c\u3066\u3044\u308b\u304b\u3092\u77e5\u308b\u305f\u3081\u306b\u53c2\u7167\u30ab\u30a6\u30f3\u30bf\u304c\u4f7f\u308f\u308c\u308b\u3002\n  * std::shared_ptr\u306e\u30b5\u30a4\u30ba\u306f\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u306e\u500d\u3002std::shared_ptr\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306f\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u306e\u307b\u304b\u3001\u53c2\u7167\u30ab\u30a6\u30f3\u30bf\u7b49\u3092\u542b\u3080\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u3078\u306e\u30dd\u30a4\u30f3\u30bf\u3082\u5185\u5305\u3055\u308c\u308b\u305f\u3081\u3002\n  * \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u306e\u305f\u3081\u306e\u30e1\u30e2\u30ea\u9818\u57df\u306f\u52d5\u7684\u78ba\u4fdd\u3055\u308c\u308b(\u5178\u578b\u7684\u306b\u306f\u30d2\u30fc\u30d7\u306b)\u3002\n  * \u53c2\u7167\u30ab\u30a6\u30f3\u30bf\u306e\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u30fb\u30c7\u30af\u30ea\u30e1\u30f3\u30c8\u306f\u30a2\u30c8\u30df\u30c3\u30af\u3067\u306a\u304f\u3066\u306f\u306a\u3089\u306a\u3044\u3002(\u52b9\u7387\u304c\u60aa\u304f\u306a\u308a\u304c\u3061)\n  * \u30e0\u30fc\u30d6\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30b7\u30e7\u30f3\u306f\u53c2\u7167\u30ab\u30a6\u30f3\u30bf\u3092\u5897\u3084\u3055\u306a\u3044\u3002(\u52b9\u7387\u7684)\n* std::shared_ptr\u3067\u3082\u30ab\u30b9\u30bf\u30e0\u30c7\u30ea\u30fc\u30bf\u304c\u4f7f\u3048\u308b\u304c\u3001std::unique_ptr\u3068\u9055\u3063\u3066\u578b\u3084\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b5\u30a4\u30ba\u306b\u306f\u5f71\u97ff\u3057\u306a\u3044\u3002\u30c7\u30ea\u30fc\u30bf\u60c5\u5831\u306e\u305f\u3081\u306e\u8ffd\u52a0\u9818\u57df\u306f\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u306e\u4e00\u90e8\u3068\u3057\u3066\u52d5\u7684\u5272\u308a\u5f53\u3066\u3055\u308c\u308b\u305f\u3081\u3002\n* \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u306f\u53c2\u7167\u30ab\u30a6\u30f3\u30c8\u306e\u4ed6\u306b\u30a6\u30a3\u30fc\u30af\u30ab\u30a6\u30f3\u30c8\u3001\u30ab\u30b9\u30bf\u30e0\u30c7\u30ea\u30fc\u30bf\u3001\u30a2\u30ed\u30b1\u30fc\u30bf\u7b49\u3092\u542b\u3080\u3002\n  * \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u306f (1) std::make_shared\u304c\u547c\u3070\u308c\u305f\u3068\u304d\u3001(2) std::unique_ptr\u3084std::auto_ptr\u3084\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u304b\u3089std::shared_ptr\u304c\u4f5c\u3089\u308c\u305f\u3068\u304d\u3001\u306b\u65b0\u898f\u4f5c\u6210\u3055\u308c\u308b\u3002\n  * \u30b0\u30ed\u30fc\u30d0\u30eb\u306a\u91cd\u8907\u56de\u907f\u306e\u6a5f\u69cb\u306f\u306a\u304f\u3001\u540c\u4e00\u306e\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u304b\u3089\u8907\u6570\u306estd::shared_ptr\u304c\u4f5c\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u4f5c\u3089\u306a\u3044\u3088\u3046\u6ce8\u610f\u3002\u30ab\u30b9\u30bf\u30e0\u30c7\u30ea\u30fc\u30bf\u3092\u4f7f\u308f\u306a\u3044\u3068\u304d\u306fstd::shared_ptr\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u4ee3\u308f\u308a\u306bstd::make_shared\u3092\u4f7f\u3044\u3001\u30ab\u30b9\u30bf\u30e0\u30c7\u30ea\u30fc\u30bf\u3042\u308a\u306e\u3068\u304d\u306f`std::shared_ptr<Widget> sp(new Widget, customDeleter);`\u306e\u3088\u3046\u306b1\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u3067\u66f8\u304f\u3068\u3088\u3044\u3002\n  * \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u306f\u3044\u3063\u3061\u3087\u307e\u3048\u306b\u7d99\u627f\u3068\u304b\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067vtable\u3068\u304b\u3082\u542b\u307f\u3001\u6700\u4f4e3\u30ef\u30fc\u30c9\u304f\u3089\u3044\u306e\u30b5\u30a4\u30ba\u306f\u3042\u308b\u3002\n\n## 20: \u6307\u793a\u5148\u304c\u7834\u58ca\u3055\u308c\u3066\u3082\u69cb\u308f\u306a\u3044std::shared_ptr\u3068\u3057\u3066std::weak_ptr\u3092\u4f7f\u3048\n\n* std::weak_ptr\u306fstd::shared_ptr\u306e\u3088\u3046\u306b\u632f\u308b\u821e\u3046\u304c\u5171\u6709\u6240\u6709\u6a29\u306b\u306f\u52a0\u308f\u3089\u306a\u3044(\u53c2\u7167\u30ab\u30a6\u30f3\u30c8\u306b\u5f71\u97ff\u3057\u306a\u3044)\u3002\u77e5\u3089\u306a\u3044\u3046\u3061\u306b\u53c2\u7167\u5148\u304c\u7834\u58ca\u3055\u308c\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002\n* std::weak_ptr\u306fstd::shared_ptr\u304b\u3089\u4f5c\u308b\u3002\n* std::weak_ptr::expired()\u3068\u3044\u3046\u30e1\u30f3\u30d0\u95a2\u6570\u3067\u751f\u304d\u3066\u3044\u308b\u304b\u3092\u30c1\u30a7\u30c3\u30af\u3067\u304d\u308b\u304c\u3001\u30c1\u30a7\u30c3\u30af\u3057\u3066\u751f\u304d\u3066\u3044\u305f\u3089\u4f7f\u3046\u3088\u3046\u306a\u30b3\u30fc\u30c9\u306b\u306f\u30a2\u30c8\u30df\u30c3\u30af\u64cd\u4f5c\u306e\u554f\u984c\u304c\u4f34\u3046\u3002\n* std::weak_ptr::lock()\u3068\u3044\u3046\u95a2\u6570\u3067\u53c2\u7167\u5148\u304c\u751f\u304d\u3066\u3044\u308b\u5834\u5408\u3060\u3051std::shared_ptr\u3092\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u53c2\u7167\u5148\u304c\u6b7b\u3093\u3067\u3044\u308c\u3070nullptr\u304c\u8fd4\u308b\u3002\n* std::weak_ptr\u306e\u3064\u304b\u3044\u3069\u3053\u308d\n  * \u30ad\u30e3\u30c3\u30b7\u30e5\u3002\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u751f\u6210\u304c\u9ad8\u30b3\u30b9\u30c8\u3067\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u518d\u5229\u7528\u53ef\u80fd\u3060\u304c\u751f\u6210\u3055\u308c\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6c38\u4e45\u306b\u6b8b\u3057\u3066\u304a\u304f\u3068\u30e1\u30e2\u30ea\u5bb9\u91cf\u304c\u5927\u5909\u306a\u30b1\u30fc\u30b9\u3067\u300c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u3082\u3057\u307e\u3060\u6b8b\u3063\u3066\u3044\u305f\u3089\u30ad\u30e3\u30c3\u30b7\u30e5\u3068\u3057\u3066\u518d\u5229\u7528\u3059\u308b\u300d\u6226\u7565\u3092\u3068\u308b\u306e\u306b\u4f7f\u3046\u3002\n  * \u30aa\u30d6\u30b5\u30fc\u30d0\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3002\u30aa\u30d6\u30b6\u30fc\u30d0\u304c\u307e\u3060\u751f\u304d\u3066\u3044\u305f\u3089\u72b6\u614b\u5909\u5316\u3092\u5831\u544a\u3059\u308b\u304c\u3001\u30aa\u30d6\u30b6\u30fc\u30d0\u3092\u78ba\u5b9f\u306b\u751f\u304b\u3057\u3066\u304a\u304d\u305f\u3044\u308f\u3051\u3067\u306f\u306a\u3044\u3068\u304d\u3002\n  * std::shared_ptr\u3067\u6307\u3055\u308c\u3066\u3044\u308b\u5171\u6709\u3055\u308c\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u300c\u8ab0\u304b\u3089\u6307\u3055\u308c\u3066\u3044\u308b\u304b\u300d\u3092\u4fdd\u6301\u3057\u305f\u3044\u5834\u5408\u3002std::shared_ptr\u3067\u6307\u3057\u8fd4\u3059\u3068\u5faa\u74b0\u53c2\u7167\u306b\u306a\u3063\u3066\u3057\u307e\u3046(\u53c2\u7167\u30ab\u30a6\u30f3\u30bf\u578b\u306eGC\u3068\u540c\u3058\u3067\u30ea\u30bd\u30fc\u30b9\u304c\u56de\u53ce\u3055\u308c\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3046)\u306e\u3067std::weak_ptr\u304c\u3088\u3044\u3002\n     * \u305f\u3060\u3057\u3001\u5faa\u74b0\u304c\u3042\u308a\u3048\u306a\u3044\u968e\u5c64\u7684\u306a\u30c7\u30fc\u30bf\u69cb\u9020\u3060\u3063\u305f\u3089std::weak_ptr\u3092\u308f\u3056\u308f\u3056\u4f7f\u308f\u306a\u304f\u3066\u826f\u3044\u3002\u6728\u69cb\u9020\u306e\u89aa\u304b\u3089\u5b50\u3078\u306e\u30dd\u30a4\u30f3\u30bf\u306fstd::uniq_ptr\u3001\u5b50\u304b\u3089\u89aa\u3078\u306e\u30d0\u30c3\u30af\u30dd\u30a4\u30f3\u30bf\u3068\u304b\u306f\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u3067OK\u3002\n\n## 21: new\u3088\u308astd::make_unique(C++14)\u3084std::make_shared(C++11)\u3092\u4f7f\u3048\n\n* `auto upw(std::make_unique<Widget>());`\u306e\u3088\u3046\u306b\u4f7f\u3046\u3002Widget\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u6ce8\u610f\u3002std::make_shared\u306fC++11\u3067\u4f7f\u3048\u308b\u304c\u3001std::make_unique\u306e\u307b\u3046\u306fC++14\u3067\u3057\u304b\u4f7f\u3048\u306a\u3044\u3002\n* \u30e1\u30ea\u30c3\u30c8\n  * `std::unique_ptr<Widget> upw(new Widget);`\u3068Widget\u30922\u56de\u66f8\u304f\u3088\u3046\u306a\u30b3\u30fc\u30c9\u306e\u5197\u9577\u6027\u3092\u907f\u3051\u3089\u308c\u308b\n  * \u4f8b\u5916\u5b89\u5168\u6027\u306e\u4fdd\u8a3c\u3002`func(std::shared_ptr<Widget>(new Widget));`\u3068\u304b\u66f8\u3044\u305f\u3068\u304d\u306b\u3001\u30b3\u30f3\u30d1\u30a4\u30e9\u6700\u9069\u5316\u306b\u3088\u3063\u3066\u751f\u306e\u30dd\u30a4\u30f3\u30bf\u304c\u30b9\u30de\u30fc\u30c8\u30dd\u30a4\u30f3\u30bf\u306b\u683c\u7d0d\u3055\u308c\u308b\u524d\u306bfunc()\u304c\u547c\u3070\u308c\u3001\u4f8b\u5916\u304c\u767a\u751f\u3057\u3066\u30ea\u30bd\u30fc\u30b9\u30ea\u30fc\u30af\u3057\u305f\u308a\u3057\u306a\u3044\u3053\u3068\u3092\u4fdd\u8a3c\u3067\u304d\u308b\u3002\n  * \u52b9\u7387\u306e\u5411\u4e0a: new\u3068\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u306e\u30e1\u30e2\u30ea\u78ba\u4fdd\u304c\u307e\u3068\u3081\u30661\u56de\u3067\u884c\u308f\u308c\u308b\n* \u4f7f\u308f\u306a\u3044\u307b\u3046\u304c\u3044\u3044\u3068\u304d\u3001\u4f7f\u3063\u3066\u306f\u3044\u3051\u306a\u3044\u3068\u304d\n  * \u30ab\u30b9\u30bf\u30e0\u30c7\u30ea\u30fc\u30bf\u3092\u4f7f\u3046\u3068\u304d\n  * std::initializer_list \u306b\u3088\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u521d\u671f\u5316\u304c\u5fc5\u8981\u306a\u3068\u304d (\u305f\u3060\u3057auto\u3092\u3046\u307e\u304f\u4f7f\u3048\u3070\u56de\u907f\u3067\u304d\u308b)\n  * (std::make_shared\u306e\u307f\u95a2\u4fc2\u3042\u308a)\n      * new/delete\u3067\u72ec\u81ea\u306e\u30e1\u30e2\u30ea\u78ba\u4fdd\u3092\u3057\u3066\u3044\u308b\u3068\u304d\n      * \u30e1\u30e2\u30ea\u306b\u53b3\u3057\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3001\u304b\u3064\u683c\u7d0d\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b5\u30a4\u30ba\u304c\u5927\u304d\u304f\u3001\u304b\u3064weak_ptr\u304cshared_ptr\u3088\u308a\u9577\u3044\u30e9\u30a4\u30d5\u30bf\u30a4\u30e0\u3092\u6301\u3064\u3068\u304d (\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d6\u30ed\u30c3\u30af\u306fweak_ptr\u304c\u3042\u308b\u9650\u308a\u6b8b\u3055\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u304c\u3001\u30bb\u30c3\u30c8\u3067\u30e1\u30e2\u30ea\u30a2\u30ed\u30b1\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3068\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u672c\u4f53\u90e8\u5206\u306e\u30e1\u30e2\u30ea\u3082weak_ptr\u304c\u306a\u304f\u306a\u308b\u307e\u3067\u89e3\u653e\u3067\u304d\u306a\u3044)\n\n## 22: Pimpl\u30a4\u30c7\u30a3\u30aa\u30e0\u3092\u4f7f\u3063\u3066\u3044\u308b\u3068\u304d\u306f\u7279\u6b8a\u30e1\u30f3\u30d0\u95a2\u6570\u3092\u5b9f\u88c5\u30d5\u30a1\u30a4\u30eb\u306b\u7f6e\u3051\n\n* Pimpl\u30a4\u30c7\u30a3\u30aa\u30e0\u306f\u30af\u30e9\u30b9\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8(\u5229\u7528\u8005)\u304b\u3089\u30af\u30e9\u30b9\u306e\u5b9f\u88c5\u3092\u96a0\u3059\u3053\u3068\u3067\u30d3\u30eb\u30c9\u6642\u9593\u3092\u77ed\u7e2e\u3059\u308b\n* std::unique_ptr\u3067Pimpl\u30a4\u30c7\u30a3\u30aa\u30e0\u3092\u5b9f\u88c5\u3059\u308b\u3068\u304d\u306f\u3001\u30d8\u30c3\u30c0\u306b\u7279\u6b8a\u30e1\u30f3\u30d0\u95a2\u6570\u3092\u5ba3\u8a00\u3057\u3001\u5b9f\u88c5\u30d5\u30a1\u30a4\u30eb\u3067\u5b9a\u7fa9\u305b\u3088\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u5b9f\u88c5\u3067OK\u306a\u3068\u304d\u3082\u660e\u793a\u7684\u306b\u5ba3\u8a00\u305b\u3088\u3002\n* std::shared_ptr\u3092\u4f7f\u3046\u3068\u9762\u5012\u306a\u3053\u3068\u306b\u306a\u308b\u306e\u3067std::unique_ptr\u3092\u4f7f\u3048\u3002\n\n# \u7b2c5\u7ae0: rvalue reference\u3001\u30e0\u30fc\u30d6\u30bb\u30de\u30f3\u30c6\u30a3\u30af\u30b9\u3001\u30d1\u30fc\u30d5\u30a7\u30af\u30c8\u30d5\u30a9\u30ef\u30fc\u30c7\u30a3\u30f3\u30b0\n\n* \u3053\u308c\u3089\u306f\u4e00\u898b\u30b9\u30c3\u30ad\u30ea\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3001\u6df1\u304f\u5b66\u3073\u59cb\u3081\u308b\u3068\u5fae\u5999\u3002\u3057\u304b\u3057\u304d\u3061\u3093\u3068\u7406\u89e3\u3059\u308c\u3070\u518d\u3073\u30b9\u30c3\u30ad\u30ea\u3067\u304d\u308b\u3088\u3002\n* \u610f\u8b58\u3057\u3066\u304a\u3051: \u95a2\u6570\u306e\u5b9f\u5f15\u6570(`void f(Widget&& w);`\u306b\u304a\u3051\u308bw)\u306f\u3001\u305f\u3068\u3048\u305d\u306e\u578b\u304crvalue reference\u3067\u3042\u308d\u3046\u3068\u3082\u3001\u305d\u308c\u81ea\u8eab\u306f **\u5e38\u306b** lvalue\u3002\n\n# 23: std::move\u3068std::forward\u3092\u7406\u89e3\u305b\u3088\n\n* std::move\u3068std::forward\u306e\u5b9f\u614b\u306f\u30ad\u30e3\u30b9\u30c8\u3067\u3001\u5b9f\u884c\u30b3\u30fc\u30c9\u306f\u751f\u6210\u3057\u306a\u3044\u3002 \n* std::move\u306f\u5f15\u6570\u3092\u7121\u6761\u4ef6\u306brvalue\u306b\u30ad\u30e3\u30b9\u30c8\u3059\u308b\u3002 **\u305d\u308c\u3060\u3051\u3002**\n  * std::move\u306f\u3001\u5f15\u6570\u3092move\u5bfe\u8c61\u306b\u3057\u3066\u3088\u3044\u3068\u3044\u3046\u8868\u660e\u3092\u610f\u5473\u3059\u308b\u3068\u306f\u9650\u3089\u306a\u3044\u3002\u4f8b: const\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092std::move\u3067\u30ad\u30e3\u30b9\u30c8\u3057\u3066\u3082\u3001 const\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3078\u306ervalue reference\u3068\u306a\u308b\u3060\u3051\u3002const \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u30e0\u30fc\u30d6\u5bfe\u8c61\u306b\u3067\u304d\u306a\u3044\u306e\u3067\u5bfe\u8c61\u306e\u30af\u30e9\u30b9\u304c\u30e0\u30fc\u30d6\b\u6f14\u7b97\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u3066\u3082\u7d50\u5c40\u30b3\u30d4\u30fc\u304c\u884c\u308f\u308c\u308b\u3002\n* std::forward\u306f\u6761\u4ef6\u4ed8\u304d\u30ad\u30e3\u30b9\u30c8\u3067\u3001\u5f15\u6570\u304crvalue\u306b\u7d10\u3065\u304f\u3068\u304d\u3060\u3051rvalue\u306b\u30ad\u30e3\u30b9\u30c8\u3059\u308b\u3002\n\n\u4f8b:\n\n```\nvoid process(const Widget& lvalArg); // lvalue\u3092\u51e6\u7406\u3059\u308b\nvoid process(Widget&& rvalArg);      // rvalue\u3092\u51e6\u7406\u3059\u308b\n\ntemplate <typename T>\nvoid logAndProcess(T&& param) {\n  // logging code blah blah blah\n  // ...\n  process(std::forward<T>(param)); // logAndProcess\u304crvalue\u3092\u4e0e\u3048\u3066\u547c\u3070\u308c\u305f\u3068\u304d\u3060\u3051param\u3092rvalue\u306b\u30ad\u30e3\u30b9\u30c8\u3059\u308b\n}\n```\n\n## 24: universal reference\u3068rvalue reference\u3092\u533a\u5225\u305b\u3088\n\n* T&&\u306b\u306f\u3001\u4f7f\u308f\u308c\u65b9\u306b\u3088\u3063\u30662\u3064\u306e\u7570\u306a\u308b\u610f\u5473\u304c\u3042\u308b\u3002\n* \u578b\u63a8\u8ad6\u3092\u4f34\u3046T&&\u306e\u4f7f\u7528\u3068auto&&\u306funiversal reference\u3002\u305f\u3060\u3057T&&\u306b\u3064\u3044\u3066\u306f\u3074\u3063\u305f\u308a\u3053\u306e\u8a18\u6cd5\u3069\u304a\u308a\u306e\u5834\u5408\u306e\u307f\u3002 const\u3068\u304bT\u306b\u4f55\u304b\u304f\u3063\u3064\u3044\u3066\u3044\u305f\u308a\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u3067\u306f\u3042\u3063\u3066\u3082\u305d\u3053\u3067\u578b\u63a8\u8ad6\u304c\u3055\u308c\u306a\u3044\u5834\u5408\u306funiversal reference\u3067\u306a\u304frvalue reference\u3068\u306a\u308b\u3002\n* \u4e0a\u8a18\u6761\u4ef6\u4ee5\u5916\u306f\u3059\u3079\u3066rvalue reference\u3002\n* universal reference\u306frvalue\u3067\u521d\u671f\u5316\u3055\u308c\u308c\u3070rvalue\u3092\u6307\u3059\u3082\u306e\u3068\u306a\u308b\u3002lvalue\u3067\u521d\u671f\u5316\u3055\u308c\u308c\u3070lvalue\u3092\u6307\u3059\u3082\u306e\u3068\u306e\u306a\u308b\u3002\n* universal reference\u3068\u3044\u3046\u306e\u306f\u5b9f\u306f\u65b9\u4fbf\u3067\u3001\u6587\u6cd5\u4e0a\u306f\u5b9f\u969b\u306f\u5b58\u5728\u3057\u306a\u3044\u5e7b\u3002(see #28)\n\n```\nvoid f(Widget && param);   // rvalue reference\nWidget && var1 = Widget(); // rvalue reference\nauto && var2 = var1;       // universal reference\ntemplate<typename T> void f(std::vector<T>&& param); // rvalue reference\ntemplate<typename T> void f(const T&& param); // rvalue reference\ntemplate<typename T> void f(T&& param); // universal reference\ntemplate<class T, class Allocator = allocator<T>>\nclass vector {\npublic\n\tvoid push_back(T&& x); // rvalue referene\n\ttemplate <class... Args>\n\tvoid emplace_back(Args&&... args); // univerrsal reference\n};\n```\n\n## 25: rvalue reference\u306b\u306fstd::move\u3092\u3001universal reference\u306b\u306fstd::forward\u3092\u4f7f\u3048\n\n* rvalue reference\u306f\u30e0\u30fc\u30d6\u5bfe\u8c61\u3068\u3057\u3066\u3088\u3044\u30aa\u30d6\u30b8\u30a7\u30af\u30c8(\u629c\u3051\u6bbb\u306b\u3057\u3066\u3088\u3044\u30aa\u30d6\u30b8\u30a7\u30af\u30c8)\u3078\u306e\u53c2\u7167\u3002\n* std::forward\u3092rvalue reference\u306b\u9069\u7528\u3059\u308b\u306e\u306f\u3001\u52d5\u4f5c\u4e0a\u306f\u554f\u984c\u306a\u3044\u304c\u8aad\u307f\u624b\u306e\u6df7\u4e71\u3092\u62db\u304f\u304b\u3089\u3084\u3081\u3066\u304a\u3051\u3002\n* std::move\u3092universal reference\u306b\u9069\u7528\u3059\u308b\u306e\u306f\u7d76\u5bfe\u3060\u3081\u3002\n* \u305d\u3082\u305d\u3082universal reference\u306a\u3093\u304b\u306a\u304d\u3083\u3044\u3044\u3058\u3083\u306a\u3044\u304b\u3001\u3068\u601d\u3046\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u4ee5\u4e0b\u306e\u5fc5\u7136\u6027\u304c\u3042\u308b\u306e\u3060\u3002\n   1. \u4f59\u5206\u306a\u4e00\u6642\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u3089\u306a\u3044\u3067\u3059\u3080\u30b1\u30fc\u30b9\u304c\u3042\u308b\u3001\n   2. \u8907\u6570\u307e\u305f\u306f\u4e0d\u5b9a\u6570\u500b)\u306e\u5f15\u6570\u306elvalue\u3068rvalue\u306e2^n\u500b\u306e\u7d44\u307f\u5408\u308f\u305b\u306b\u5bfe\u3059\u308b\u30aa\u30fc\u30d0\u30ed\u30fc\u30c9\u3092\u3059\u3079\u3066\u66f8\u304f\u306e\u306f\u5acc(\u4e0d\u5b9a\u6570\u500b\u3067\u306f\u4e0d\u53ef\u80fd)\n* std::move\u3084std::forward\u306f\u305d\u306e\u53c2\u7167\u306e\u6700\u5f8c\u306e\u5229\u7528\u6642\u306b\u3060\u3051\u3064\u3051\u308b\u3002(\u307e\u3060\u6b21\u56de\u4f7f\u3046\u306e\u306b\u5bfe\u8c61\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u629c\u3051\u6bbb\u306b\u3055\u308c\u3066\u3057\u307e\u3063\u3066\u306f\u56f0\u308b\u304b\u3089)\n* \u5024\u6e21\u3057\u3067return\u3059\u308b\u95a2\u6570\u3067rvalue reference\u3084unversal refernce\u3092return\u3059\u308b\u3068\u304d\u3082std::move\u3084std::forward\u3092\u3064\u3051\u308d\u3002\n* \u3060\u304b\u3089\u3068\u3044\u3063\u3066\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3092\u5024\u6e21\u3057\u3067return\u3059\u308b\u3068\u304d\u306bstd::move\u3068\u304b\u3064\u3051\u308b\u306a\u3002RVO (Return Value Optimization)\u306b\u4efb\u305b\u308d\u3002\n\n## 26: universal reference\u306b\u3064\u3044\u3066\u306e\u30aa\u30fc\u30d0\u30ed\u30fc\u30c9\u3092\u907f\u3051\u308d\n\n* universal reference\u5f15\u6570\u306e\u95a2\u6570\u3092\u30aa\u30fc\u30d0\u30ed\u30fc\u30c9\u3057\u305f\u3068\u304d\u3001universal refernce\u7248\u306e\u307b\u3046\u306e\u95a2\u6570\u304c\u307b\u3068\u3093\u3069\u306e\u30b1\u30fc\u30b9\u3067\u547c\u3070\u308c\u3066\u3057\u307e\u3046\u3002(\u6697\u9ed9\u578b\u5909\u63db\u3084const\u306e\u8ffd\u52a0\u304c\u306a\u3044\u3068\u975euniversal reference\u7248\u306e\u95a2\u6570\u304c\u547c\u3070\u308c\u306a\u3044\u3068\u304d\u306funiversal reference\u7248\u304c\u512a\u5148\u3055\u308c\u3066\u3057\u307e\u3046\u3002)\n\n```\ntemplate<typename T> void f(T&& name);\nvoid f(int x);\nshort i = 27;\nf(i); // int \u7248\u3067\u306a\u306f\u304f universal reference\u7248\u304c\u547c\u3070\u308c\u308b\n```\n\n* perfect forwarding\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306f\u7279\u306b\u554f\u984c\u304c\u3042\u308a\u3001non-const\u306alvalue\u3092\u4e0e\u3048\u3066\u547c\u3073\u51fa\u305d\u3046\u3068\u3057\u305f\u3068\u304d\u306b\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3088\u308a\u512a\u5148\u3055\u308c\u3066\u3057\u307e\u3046\u3002\u305d\u306e\u305f\u3081\u3001\u6d3e\u751f\u30af\u30e9\u30b9\u3067\u304b\u3089\u306e\u57fa\u5e95\u30af\u30e9\u30b9\u306e\u30b3\u30d4\u30fc\u30fb\u30e0\u30fc\u30d6\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u547c\u3073\u51fa\u3057\u306bperfect forwarding\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u5272\u308a\u8fbc\u3093\u3067\u3057\u307e\u3046\u3002 (perfect forwarding\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306f\u5fc5\u305a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306a\u306e\u3067\u3001\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3068\u306f\u7570\u306a\u308b\u6319\u52d5\u3067\u3042\u308b\u306f\u305a\u3067\u3001\u7d50\u679c\u554f\u984c\u3092\u62db\u304f)\n  * const \u306e\u3064\u3044\u305f\u5f15\u6570\u3092\u6301\u3064\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3088\u308a\u3001const\u306e\u3064\u3044\u3066\u306a\u3044\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5f15\u6570\u3092\u6301\u3064perfect forwarding\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u307b\u3046\u304c\u512a\u5148\u5ea6\u304c\u9ad8\u3044\n\n```\nclass Person{\npublic:\n  template<typename T>explicit Person(T&& n) : name(std::forward<T>(n)) {}\n   // perfect forwarding constructor: std::string\u306a\u3069\u3044\u308d\u3093\u306a\u578b\u3067\u540d\u524d\u3092\u4e0e\u3048\u3066Person\u3092\u521d\u671f\u5316\u3059\u308b\u610f\u56f3\n   Person(const Person& rhs); // \u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf (\u30b3\u30f3\u30d1\u30a4\u30e9\u751f\u6210)\n   Person(Person && rhs); // \u30e0\u30fc\u30d6\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf (\u30b3\u30f3\u30d1\u30a4\u30e9\u751f\u6210)\n   ...\n};\nPerson p(\"Nancy\");\nauto cloneOf(p); // \u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc: \u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u3067\u306a\u304fperfect forwarding\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u547c\u3093\u3067\u3057\u307e\u3046\n```\n\n## 27: universal reference\u306b\u3064\u3044\u3066\u306e\u30aa\u30fc\u30d0\u30ed\u30fc\u30c9\u306e\u4ee3\u66ff\u65b9\u6cd5\u3092\u77e5\u3063\u3066\u304a\u3051\n\n* \u30aa\u30fc\u30d0\u30ed\u30fc\u30c9\u3092\u8ae6\u3081\u308b: \u554f\u984c\u5916\n* const T& \u6e21\u3057\u306b\u3059\u308b: C++98\u6642\u4ee3\u306b\u623b\u308a\u3001perfect forwarding \u3092\u8ae6\u3081\u308b\n* \u5024\u6e21\u3057\u306b\u3059\u308b\n* tag dispatch\u3092\u4f7f\u3046\n\n```\ntemplate<typename T> void logAndAdd(T&& name) {\n  logAndAddImpl(std::forward<T>(name),\n                std::is_integral<typename std::remove_reference<T>::type()); \n};\n\ntemplate<typename T> void logAndAddImpl(T&& name, std::true_type); // T \u304c\u6574\u6570\u578b\u306e\u3068\u304d\u306b\u547c\u3070\u308c\u308b\ntemplate<typename T> void logAndAddImpl(T&& name, std::false_type); // \u305d\u308c\u4ee5\u5916\u306e\u3068\u304d\u306b\u547c\u3070\u308c\u308b\n```\n\n* universal reference\u3092\u53d7\u3051\u53d6\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u5236\u7d04\u3092\u52a0\u3048\u308b\n\n```\nclass Person{\npublic:\n\ttemplate<\n\t\ttypename T,\n\t\ttypename = typename std::enable_if<\n\t\t\t!std::is_same<Person,\n\t\t\t\ttypename std::decay<T>::type>::value\n\t\t\t>::type\n\t>\n\texplicit Person(T&& n);\n\t...\n};\n```\n\n* perfect fowarding\u306f\u6027\u80fd\u4e0a\u6709\u5229\u3060\u304c\u3001#30\u306b\u793a\u3059\u5229\u7528\u6761\u4ef6\u306e\u5236\u7d04\u304c\u3042\u308b\u307b\u304b\u3001\u30b3\u30f3\u30d1\u30a4\u30e9\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u5206\u304b\u308a\u306b\u304f\u304f\u306a\u308b(forward\u3055\u308c\u305f\u5148\u3067\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u305f\u3081)\n\n## 28: reference collapsing(\u53c2\u7167\u306e\u7e2e\u7d04?)\u3092\u7406\u89e3\u305b\u3088\n\n* #24\u3067\u8aac\u660e\u3057\u305funiversal reference\u3068\u3044\u3046\u306e\u306f\u65b9\u4fbf\u3067\u3001\u5b9f\u4f53\u306f\u3084\u3063\u3071\u308arvalue reference\u3067\u3057\u305f\u3002\n  * `template<typename T> void func(T&& param);`\u306b\u304a\u3051\u308bT\u306e\u578b\u63a8\u8ad6\u7d50\u679c\u306f\u3001\u5f15\u6570\u306blvalue\u304c\u6e21\u3055\u308c\u305f\u304brvalue\u304c\u6e21\u3055\u308c\u305f\u304b\u304c\u53cd\u6620\u3055\u308c\u308b: lvalue\u304c\u5f15\u6570\u306b\u6e21\u3055\u308c\u305f\u3089T\u306flvalue reference\u3001rvalue\u304c\u6e21\u3055\u308c\u305f\u3089T\u306fnon-reference\u3002 (see #1)\n  * \u305d\u306e\u4e0a\u3067\u3001reference collapsing\u3068\u3044\u3046\u6a5f\u69cb\u304cuniversal refernce\u3068\u3044\u3046\u5e7b\u3092\u4f5c\u3063\u3066\u3044\u308b\u3002\n* reference collapsing\u306f\u300c\u53c2\u7167\u306e\u53c2\u7167\u300d\u3092\u3072\u3068\u3064\u306e\u53c2\u7167\u306b\u7e2e\u7d04\u3059\u308b\u50cd\u304d\u30022\u3064\u306e\u53c2\u7167\u304c\u3044\u305a\u308c\u3082rvalue reference\u306e\u6642\u3060\u3051\u7e2e\u7d04\u3055\u308c\u305f\u53c2\u7167\u306frvalue referene\u306b\u306a\u308a\u3001\u305d\u308c\u4ee5\u5916\u306e\u5834\u5408\u306flvalue reference\u306b\u306a\u308b\u3002\n* reference collapsing \u306f\u6b21\u306e4\u3064\u306e\u3044\u305a\u308c\u304b\u306e\u5834\u5408\u3067\u3060\u3051\u8d77\u3053\u308b: (1) \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5177\u73fe\u5316\u3001 (2) auto \u578b\u751f\u6210\u3001 (3) typedef \u3068 alias \u306e\u5ba3\u8a00\u3001 (4) decltype\u3002\n* \u3053\u306e\u3088\u3046\u306b\u3001universal reference\u3068\u3044\u3046\u306e\u306f\u5b9f\u614b\u3068\u3057\u3066\u306f\u5b58\u5728\u3057\u306a\u3044\u306e\u3060\u304c\u3001\b universal reference\u304c\u3042\u308b\u3068\u601d\u3063\u3066\u3044\u3066\u3082\u6319\u52d5\u3092\u8aa4\u89e3\u3059\u308b\u308f\u3051\u3067\u306f\u306a\u304f\u601d\u8003\u3092\u5358\u7d14\u5316\u3067\u304d\u308b\u4fbf\u5229\u306a\u6982\u5ff5\u3002\n\n## 29: move \u64cd\u4f5c\u306f\u5b58\u5728\u3057\u306a\u3044\u3053\u3068\u3082\u3042\u308b\u3057\u3001\u52b9\u7387\u7684\u3067\u306a\u3044\u3053\u3068\u3082\u3042\u308b\u3057\u3001\u4f7f\u308f\u308c\u306a\u3044\u3053\u3068\u3082\u3042\u308b\n\n* C++11\u306e\u30e0\u30fc\u30d6\u30bb\u30de\u30f3\u30c6\u30a3\u30af\u30b9\u306f\u904e\u4fe1\u3055\u308c\u304c\u3061\u3067\u3001\u300c\u30b3\u30f3\u30c6\u30ca\u3092\u30e0\u30fc\u30d6\u3059\u308b\u306e\u306f\u751f\u306e\u30dd\u30a4\u30f3\u30bf1\u3064\u3092\u30b3\u30d4\u30fc\u3059\u308b\u304f\u3089\u3044\u52b9\u7387\u7684\u3060\u300d\u3068\u304b\u300cC++98\u306e\u30b3\u30fc\u30c9\u3092\u5358\u306bC++11\u3067\u518d\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u3060\u3051\u3067\u30b3\u30d4\u30fc\u64cd\u4f5c\u304c\u81ea\u52d5\u7684\u306b\u30e0\u30fc\u30d6\u64cd\u4f5c\u306b\u7f6e\u304d\u63db\u3048\u3089\u308c\u3066\u6027\u80fd\u304c\u52dd\u624b\u306b\u4e0a\u304c\u308b\u300d\u3068\u304b\u601d\u308f\u308c\u3066\u3044\u308b\u304c\u3001\u3044\u308d\u3044\u308d\u4f8b\u5916\u306f\u3042\u308b\u306e\u3067\u904e\u4fe1\u3059\u308b\u306a\u3002 (\u6ce8: \u904e\u4fe1\u3092\u8acc\u3081\u305f\u3044\u3060\u3051\u3067\u30e0\u30fc\u30d6\u30bb\u30de\u30f3\u30c6\u30a3\u30af\u30b9\u306a\u3093\u3066\u7121\u4fa1\u5024\u3060\u3068\u8a00\u3063\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3068\u601d\u3046)\n* #17\u3067\u8aac\u660e\u3057\u305f\u3088\u3046\u306b\u3001\u30e0\u30fc\u30d6\u64cd\u4f5c\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u306a\u3044\u30b1\u30fc\u30b9\u304c\u3042\u308b\u3002\n* \u30e0\u30fc\u30d6\u64cd\u4f5c\u304c\u30b3\u30d4\u30fc\u64cd\u4f5c\u3068\u540c\u7b49\u7a0b\u5ea6\u306e\u6027\u80fd\u3067\u3001\u5225\u306b\u30e1\u30ea\u30c3\u30c8\u304c\u306a\u3044\u30b1\u30fc\u30b9\u304c\u3042\u308b\u3002\n  * std::array\u306f\u3001\u683c\u7d0d\u5bfe\u8c61\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3078\u306e\u30dd\u30a4\u30f3\u30bf\u306e\u914d\u5217\u3092\u30d2\u30fc\u30d7\u306b\u78ba\u4fdd\u3059\u308b\u3067\u306f\u306a\u304f\u81ea\u8eab\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u4e2d\u306b\u6301\u3064\u3002\u3057\u305f\u304c\u3063\u3066\u3001std::array\u306e\u30e0\u30fc\u30d6\u306farray\u30b5\u30a4\u30ba\u306b\u5bfe\u3057\u7dda\u5f62\u6642\u9593\u304b\u304b\u308b\u3002\n  * \u77ed\u3044\u6587\u5b57\u5217\u306e\u30d0\u30c3\u30d5\u30a1\u3082\u540c\u3058\u304f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u4e2d\u306b\u7f6e\u304b\u308c\u308b\u3053\u3068\u304c\u591a\u3044(SSO: Small String Optimization)\u3002\u540c\u3058\u304f\u3053\u306e\u3068\u304d\u3082\u30b3\u30d4\u30fc\u3057\u3066\u3082\u30e0\u30fc\u30d6\u3057\u3066\u3082\u52b9\u7387\u306f\u5909\u308f\u3089\u306a\u3044\u3002\n* STL\u306e\u30b3\u30f3\u30c6\u30ca\u64cd\u4f5c\u306e\u3044\u304f\u3064\u304b\u306f\u5f37\u3044\u4f8b\u5916\u5b89\u5168\u6027\u3092\u4fdd\u8a3c\u3057\u3066\u3044\u308b\u3002\u3053\u308c\u3089\u306e\u4e2d\u3067\u306f\u3001\u30e0\u30fc\u30d6\u6f14\u7b97\u304c\u4f8b\u5916\u3092\u6295\u3052\u306a\u3044\u4fdd\u8a3c\u304c\u3042\u308b\u3068\u304d\u3060\u3051\u30b3\u30d4\u30fc\u304c\u30e0\u30fc\u30d6\u306b\u7f6e\u304d\u63db\u3048\u3089\u308c\u308b\u3002(\u3064\u307e\u308a\u3001\u30e0\u30fc\u30d6\u6f14\u7b97\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u3044\u3066\u3082\u4f7f\u3063\u3066\u304f\u308c\u306a\u3044\u30b1\u30fc\u30b9\u304c\u3042\u308b)\n* \u524d\u63d0\u304c\u304d\u3063\u3061\u308a\u6e80\u305f\u3055\u308c\u3066\u3044\u308c\u3070\u30e0\u30fc\u30d6\u6f14\u7b97\u306f\u9593\u9055\u3044\u306a\u304f\u4f7f\u308f\u308c\u308b\u3068\u601d\u3063\u3066\u3044\u3044\u3088\u3002\n\n## 30: perfect forwarding\u304c\u5931\u6557\u3059\u308b\u30b1\u30fc\u30b9\u3092\u77e5\u3063\u3066\u304a\u3051\n\n* \u307e\u305aperfect fowarding\u3068\u3044\u3046\u306e\u306f\u3001\u300c\u53d7\u3051\u53d6\u3063\u305f\u5f15\u6570\u3092\u305d\u306e\u307e\u307e\u5225\u306e\u95a2\u6570\u306b\u30d5\u30a9\u30ef\u30fc\u30c9\u3059\u308b\u3053\u3068\u300d\u3002\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30b3\u30d4\u30fc\u3059\u308b\u3053\u3068\u3082\u306a\u3044\u3057\u3001lvalue/rvalue\u306e\u5225\u3082CV\u4fee\u98fe\u5b50\u3082\u4fdd\u5b58\u3055\u308c\u308b\u3002\u4fbf\u5229\u3060\u306d!\n\n* perfect forwarding\u304c\u3046\u307e\u304f\u50cd\u304b\u306a\u3044\u4f8b\u5916\n  * {}\u521d\u671f\u5316\u5b50\n  * 0\u3084NULL\u3092\u30dd\u30a4\u30f3\u30bf\u6271\u3044\u3057\u3066\u4e0e\u3048\u305f\u3068\u304d (see #8)\n  * \u5ba3\u8a00\u3057\u304b\u3057\u3066\u306a\u3044 static const \u6574\u6570\u578b\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\n      * \u5b9a\u7fa9\u304c\u306a\u3044\u3068 static const \u6574\u6570\u578b\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u306f\u30e1\u30e2\u30ea\u4e0a\u306b\u5b9f\u4f53\u3092\u6301\u305f\u306a\u3044\u306e\u3067\u53c2\u7167\u304c\u4f5c\u308c\u306a\u3044\u3002\u3053\u308c\u306f\u3001\u5b9a\u7fa9\u3092\u5b9f\u88c5\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304f\u3060\u3051\u3067\u89e3\u6c7a\u3067\u304d\u308b\u3002\n  * \u30aa\u30fc\u30d0\u30ed\u30fc\u30c9\u3055\u308c\u305f\u95a2\u6570\u540d\u3084\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\n      * \u3069\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u547c\u3070\u308c\u308b\u304b\u308f\u304b\u3063\u3066\u306a\u3044\u6642\u70b9\u3067\u306f\u3001\u3053\u308c\u3089\u306f\u95a2\u6570\u30dd\u30a4\u30f3\u30bf\u3067\u306f\u306a\u304f\u300c\u540d\u524d\u300d\u306b\u3059\u304e\u306a\u3044\u306e\u3067perfect forwarding\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u3002\n      * alias \u3068\u304b\u4f7f\u3063\u3066\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u660e\u793a\u7684\u306b\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u89e3\u6c7a\u3067\u304d\u308b\u3089\u3057\u3044 (\u6b32\u3057\u304f\u306a\u3063\u305f\u3089\u672c\u3092\u898b\u308b\u3053\u3068)\n  * \u30d3\u30c3\u30c8\u30d5\u30a3\u30fc\u30eb\u30c9\n      * \u30d3\u30c3\u30c8\u30d5\u30a3\u30fc\u30eb\u30c9\u3078\u306e\u53c2\u7167\u306f\u4f5c\u308c\u306a\u3044\u306e\u3067\u5f15\u6570\u306b\u4e0e\u3048\u308b\u3068\u30b3\u30d4\u30fc\u304c\u751f\u6210\u3055\u308c\u308b\u3002\u3042\u3089\u304b\u3058\u3081static_cast\u3059\u308c\u3070OK\u3002\n  \n# \u7b2c6\u7ae0: \u30e9\u30e0\u30c0\u5f0f\n\n* \u30e9\u30e0\u30c0\u5f0f\u306f\u5f37\u529b\u3002STL\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306epredicate\u3068\u304b\u3001sort\u306e\u6bd4\u8f03\u95a2\u6570\u3068\u304b\u3001std::unique_ptr\u3084std::shared_ptr\u306e\u30ab\u30b9\u30bf\u30e0\u30c7\u30ea\u30fc\u30bf\u3068\u304b\u304c\u7c21\u6f54\u306b\u66f8\u3051\u308b\u3002\n* \u7528\u8a9e\u6574\u7406\u3002\n  * \u30e9\u30e0\u30c0\u5f0f\u306f\u5358\u306a\u308b\u5f0f\u3002\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e`[...](...){...}`\u90e8\u5206\u305d\u306e\u3082\u306e\u3002\n  * \u30af\u30ed\u30fc\u30b8\u30e3\u306f\u30e9\u30e0\u30c0\u5f0f\u306b\u3088\u3063\u3066\u4f5c\u3089\u308c\u305f\u30e9\u30f3\u30bf\u30a4\u30e0\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002\u30ad\u30e3\u30d7\u30c1\u30e3\u30e2\u30fc\u30c9\u306b\u3088\u3063\u3066\u5916\u90e8\u5909\u6570\u3078\u306e\u53c2\u7167\u3092\u4fdd\u6301\u3057\u305f\u308a\u30b3\u30d4\u30fc\u3092\u4fdd\u6301\u3057\u305f\u308a\u3059\u308b\u3002std::find_if\u3068\u304b\u3092\u30e9\u30e0\u30c0\u5f0f\u3092\u4e0e\u3048\u3066\u8a18\u8ff0\u3057\u305f\u3068\u304d\u3001\u30e9\u30f3\u30bf\u30a4\u30e0\u3067\u95a2\u6570\u306e\u5f15\u6570\u3068\u3057\u3066\u6e21\u3055\u308c\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u30af\u30ed\u30fc\u30b8\u30e3\u3002\n  * \u30af\u30ed\u30fc\u30b8\u30e3\u30af\u30e9\u30b9\u306f\u30af\u30ed\u30fc\u30b8\u30e3(=\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9)\u304c\u5c5e\u3059\u308b\u30af\u30e9\u30b9\u3002\u30e9\u30e0\u30c0\u5f0f\u306f\u305d\u308c\u305e\u308c\u72ec\u81ea\u306e\u30af\u30ed\u30fc\u30b8\u30e3\u30af\u30e9\u30b9\u3092\u30b3\u30f3\u30d1\u30a4\u30e9\u306b\u751f\u6210\u3055\u305b\u3001\u30e9\u30e0\u30c0\u5f0f\u306e\u4e2d\u306b\u66f8\u3044\u305f\u8a18\u8ff0\u306f\u30af\u30ed\u30fc\u30b8\u30e3\u30af\u30e9\u30b9\u306e\u30e1\u30f3\u30d0\u95a2\u6570\u306b\u306a\u308b\u3002\n\n\u540c\u4e00\u30af\u30e9\u30b9\u306e\u30af\u30ed\u30fc\u30b8\u30e3\u306e\u30b3\u30d4\u30fc\u3068\u304b\u3082\u3067\u304d\u308b\u3002\n\n```\n{\n  int x;\n  ...\n  auto c1 = [x](int y) {return x > y > 55; };\n  auto c2 = c1; // \u30af\u30ed\u30fc\u30b8\u30e3\u306e\u30b3\u30d4\u30fc\n}\n```\n\n## 31: \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30ad\u30e3\u30d7\u30c1\u30e3\u30e2\u30fc\u30c9\u306f\u907f\u3051\u308d\n\n* \u30c7\u30d5\u30a9\u30eb\u30c8\u30ad\u30e3\u30d7\u30c1\u30e3\u30e2\u30fc\u30c9\u3068\u306f`[=]`\u3068\u304b`[&]`\u306e\u3053\u3068\u3002\n* \u30ad\u30e3\u30d7\u30c1\u30e3\u306f\u30e9\u30e0\u30c0\u5f0f\u304c\u66f8\u304b\u308c\u305f\u30b9\u30b3\u30fc\u30d7\u3067\u898b\u3048\u3066\u3044\u308bnon-static\u306a\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306b\u5bfe\u3057\u3066\u306e\u307f\u8d77\u3053\u308b\u3002\n* \u53c2\u7167\u30e2\u30fc\u30c9(`[&]`)\u3067\u306e\u30ad\u30e3\u30d7\u30c1\u30e3\u306b\u306f\u3001\u5bfe\u8c61\u5909\u6570\u304c\u30af\u30ed\u30fc\u30b8\u30e3\u3088\u308a\u5148\u306b\u30b9\u30b3\u30fc\u30d7\u5916\u306b\u306a\u3063\u3066\u6d88\u3048\u3066\u3057\u307e\u3046\u30ea\u30b9\u30af\u304c\u3042\u308b\u3002\n* \u30b3\u30d4\u30fc\u30e2\u30fc\u30c9(`[=]`)\u3067\u3082\u30dd\u30a4\u30f3\u30bf\u3092\u30ad\u30e3\u30d7\u30c1\u30e3\u3057\u3066\u3057\u307e\u3046\u3068\u30dd\u30a4\u30f3\u30bf\u306e\u6307\u793a\u5148\u304c\u6d88\u3048\u3066\u3057\u307e\u3046\u30ea\u30b9\u30af\u304c\u3042\u308b\u3002(\u3068\u304f\u306bthis\u3002`[=]`\u30e2\u30fc\u30c9\u306f\u6697\u9ed9\u306e\u3046\u3061\u306bthis\u3092\u5024\u3068\u3057\u3066\u30ad\u30e3\u30d7\u30c1\u30e3\u3057\u3066\u3057\u307e\u3046)\n* \u30ad\u30e3\u30d7\u30c1\u30e3\u306f`[hoge]`\u3068\u304b\u5909\u6570\u540d\u3092\u660e\u793a\u7684\u306b\u66f8\u3044\u3066\u884c\u3048\u3002\n\n## 32: \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30af\u30ed\u30fc\u30b8\u30e3\u5185\u306bmove\u3059\u308b\u306b\u306finit capture\u3092\u4f7f\u3048\n\n* C++14\u3067\u5c0e\u5165\u3055\u308c\u305finit capture\u3067\u306f\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u540d\u3068\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u306e\u521d\u671f\u5316\u5f0f\u3092\u8a18\u8ff0\u3067\u304d\u308b\u3002\n\n```\nauto pw = std::make_unique<Widget()>;\nauto func[pw = std::move(pw)]{ ...}; // \u5de6\u8fba\u306epw\u306f\u30af\u30ed\u30fc\u30b8\u30e3\u30af\u30e9\u30b9\u306e\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u3068\u306a\u308b\nauto func2[pw = std::make_unique<Widget()>]{...}; // \u3053\u3093\u306a\u3075\u3046\u306b\u3082\u66f8\u3051\u308b\n```\n\n* C++11\u3067\u3082\u3001std::bind\u3092\u3046\u307e\u304f\u4f7f\u3048\u3070\u540c\u3058\u3053\u3068\u304c\u3067\u304d\u308b (\u8a73\u7d30\u7565)\n\n## 33: auto&& \u578b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092(lambda\u5185\u3067)std::forward\u3059\u308b\u3068\u304d\u306fdecltype\u3092\u4f7f\u3048\n\n* C++14\u3067\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u3092auto\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u5f37\u529b\u306a\u30b8\u30a7\u30cd\u30ea\u30c3\u30af\u30e9\u30e0\u30c0\u5f0f\u304c\u4f7f\u3048\u308b\u3002\n* \u30e9\u30e0\u30c0\u5f0f\u306e\u5f15\u6570\u3092\u30e9\u30e0\u30c0\u5f0f\u306e\u4e2d\u3067\u547c\u3073\u51fa\u3059\u95a2\u6570\u306b\u30d1\u30fc\u30d5\u30a7\u30af\u30c8\u30d5\u30a9\u30ef\u30fc\u30c7\u30a3\u30f3\u30b0\u3057\u305f\u3044\u3068\u304d\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u3051\u3070\u3088\u3044:\n\n```\nauto f = [](auto && param) {\n  return func(std::forward<decltype(param)>(param));\n};\n```\n\n## 34: std::bind\u3088\u308a\u30e9\u30e0\u30c0\u5f0f\u3092\u4f7f\u3048\n\n* std::bind\u3088\u308a\u30e9\u30e0\u30c0\u5f0f\u306e\u307b\u3046\u304c\u898b\u3084\u3059\u304f\u304b\u3064\u52b9\u7387\u7684\u3089\u3057\u3044\u3002std::bind\u306e\u7406\u89e3\u304c\u524d\u63d0\u306b\u306a\u3063\u3066\u3044\u308b\u304c\u3001\u305d\u3082\u305d\u3082\u3088\u304f\u77e5\u3089\u306a\u3044\u306e\u3067\u8a73\u7d30\u306f\u30d1\u30b9\u3002\n\n# \u7b2c7\u7ae0: \u4e26\u884c\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0(concurrency)API\n\n* \u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u30de\u30eb\u30c1\u30b9\u30ec\u30c3\u30c7\u30a3\u30f3\u30b0\u304c\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u306e\u306f\u3059\u3070\u3089\u3057\u3044\u3053\u3068\u3060\u3088\n* future\u306bstd::future\u3068std::shared_future\u3068\u304c\u3042\u308b\u304c\u3001\u307b\u3068\u3093\u3069\u540c\u3058\u306a\u306e\u3067\u7dcf\u79f0\u3057\u3066future\u3068\u547c\u3076\u3088\n\n## 35: \u30b9\u30ec\u30c3\u30c9\u30d9\u30fc\u30b9\u3088\u308a\u30bf\u30b9\u30af\u30d9\u30fc\u30b9\u3067\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u305b\u3088\n\n```\nint doAsyncWork();\nstd::thread t(doAsyncWork); // \u30b9\u30ec\u30c3\u30c9\u30d9\u30fc\u30b9\nauto fut = std::async(doAsyncWork); // \u30bf\u30b9\u30af\u30d9\u30fc\u30b9\n```\n\n* std::async\u304b\u3089\u5f97\u3089\u308c\u308bfuture\u306fget\u95a2\u6570\u3092\u6301\u3061\u3001doAsyncWork\u306e\u623b\u308a\u5024\u3084\u5410\u3044\u305f\u4f8b\u5916\u304c\u660e\u793a\u7684\u306b\u308f\u304b\u308b\u3002\n* std::async\u306f\u30b9\u30ec\u30c3\u30c9\u3092\u5373\u6642\u306b\u8d77\u52d5\u3059\u308b\u4fdd\u8a3c\u306f\u306a\u304f\u3001\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u306b\u8d77\u52d5\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3084HW\u30b9\u30ec\u30c3\u30c9\u306e\u5272\u308a\u5f53\u3066\u3092\u4efb\u305b\u308b\u3002 (OS\u30b9\u30ec\u30c3\u30c9\u6570\u306e\u4e0a\u9650\u3084\u30b3\u30f3\u30c6\u30af\u30b9\u30c8\u30b9\u30a4\u30c3\u30c1\u306b\u3088\u308b\u30ad\u30e3\u30c3\u30b7\u30e5\u52b9\u7387\u4f4e\u4e0b\u306b\u95a2\u308f\u308b\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u3092\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u304a\u4efb\u305b\u3067\u304d\u308b)\n* GUI\u30b9\u30ec\u30c3\u30c9\u306e\u5fdc\u7b54\u6027\u3068\u304b\u306f\u306a\u304a\u554f\u984c\u306a\u306e\u3067#36\u3067\u8b70\u8ad6\u3059\u308b\u3002\n* std::async\u3092\u4f7f\u3046\u3079\u304d\u3067\u306a\u3044\u4f8b\u5916\u7684\u72b6\u6cc1\n\t* pthread \u3068\u304b Windows' Threads\u3068\u304b\u306e\u30cd\u30a4\u30c6\u30a3\u30d6\u306aAPI\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3044\u3068\u304d\n\t* \u30b9\u30ec\u30c3\u30c9\u306e\u4f7f\u3044\u65b9\u3092\u81ea\u5206\u306e\u30a2\u30d7\u30ea\u306b\u6700\u9069\u5316\u3057\u305f\u3044(+\u81ea\u5206\u306b\u305d\u306e\u80fd\u529b\u304c\u3042\u308b)\u3068\u304d\n\t* C++\u306e\u4e26\u884c\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0API\u306e\u80fd\u529b\u3092\u8d85\u3048\u308b\u3053\u3068\u3092\u3084\u308b\u5fc5\u8981\u304c\u3042\u308b\u3068\u304d\n\n## 36: \u975e\u540c\u671f\u5b9f\u884c\u306e\u5fc5\u7136\u6027\u304c\u3042\u308c\u3070 std::launch::async \u3092\u6307\u5b9a\u305b\u3088\n* std::async \u3067\u306e\u30b9\u30ec\u30c3\u30c9\u8d77\u52d5\u30dd\u30ea\u30b7\u30fc\u306f\u300c\u540c\u671f\u3067(\u81ea\u30b9\u30ec\u30c3\u30c9\u5185\u3067)\u5b9f\u884c\u3057\u3066\u3082\u3044\u3044\u3057\u975e\u540c\u671f\u3067(\u5225\u30b9\u30ec\u30c3\u30c9\u3067)\u5b9f\u884c\u3057\u3066\u3082\u3044\u3044\u3088\u300d\u3068\u306a\u3063\u3066\u3044\u308b\u3002\u3053\u306e\u81ea\u7531\u3092\u4f7f\u3063\u3066\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b9\u3068\u304b\u3092\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u5074\u304c\u304c\u3093\u3070\u3063\u3066\u304f\u308c\u308b\u3002\n* \u660e\u793a\u7684\u306b\u6307\u5b9a\u3057\u305f\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306e2\u3064\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\t* std::launch::async : \u7d76\u5bfe\u5225\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3057\u308d\n\t* std::launch::deferred : std::async\u304c\u8fd4\u3057\u305ffuture\u306b\u5bfe\u3057\u3066get\u304bwait\u304c\u547c\u3070\u308c\u305f\u3068\u304d\u306b\u3060\u3051\u5b9f\u884c\u3057\u308d\u3002get\u304bwait\u304c\u547c\u3070\u308c\u305f\u3068\u304d\u306b\u306f\u81ea\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3057\u308d\n\t* \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8d77\u52d5\u30dd\u30ea\u30b7\u30fc\u3067\u306f\u5b9f\u969b\u306b\u3069\u3063\u3061\u306e\u30dd\u30ea\u30b7\u30fc\u304c\u63a1\u7528\u3055\u308c\u305f\u304b\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u305d\u3082\u305d\u3082\u5b9f\u884c\u5bfe\u8c61\u306e\u95a2\u6570\u304c\u5b9f\u884c\u3055\u308c\u305f\u304b\u3069\u3046\u304b\u3059\u3089\u4e0d\u660e\u306e\u30b1\u30fc\u30b9\u3082\u3042\u308b (\u305d\u306e\u5f8cget\u3084wait\u3057\u306a\u3044\u3068\u304d\u306fdeferred\u30e2\u30fc\u30c9\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u308b\u3068\u5b9f\u884c\u3055\u308c\u305a\u3058\u307e\u3044\u306b\u306a\u308b)\n\t* deferred \u30e2\u30fc\u30c9\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u3068\u304d\u306fwait_for\u306f\u3044\u3064\u3082std::future_status::deferred\u3092\u8fd4\u3059\u306e\u3067\u6ce8\u610f\u3002\u623b\u308a\u5024\u304cstd::future_status::ready\u306b\u306a\u308b\u306e\u3092\u5f85\u3063\u3066\u3044\u308b\u3068\u7121\u9650\u30eb\u30fc\u30d7\u306b\u306a\u308b\u3002\n* wait_for(0)\u3067\u30e2\u30fc\u30c9\u3092\u8abf\u3079\u3066\u51e6\u7406\u3092\u30b9\u30a4\u30c3\u30c1\u3059\u308b\u65b9\u6cd5\u3082\u3042\u308b\u3002\u3069\u3046\u3057\u3066\u3082\u975e\u540c\u671f\u5b9f\u884c\u3067\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3068\u304d\u3060\u3051std::launch::async\u3092\u6307\u5b9a\u3057\u308d\u3002\n\n## 37: std::thread \u304c\u5168\u3066\u306e\u5b9f\u884c\u30d1\u30b9\u3067unjoinable\u306b\u306a\u308b\u3088\u3046\u306b\u305b\u3088\n\n* unjoinable\u306astd::thread\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u306f\u3001\u4ee5\u4e0b\u306e\u3044\u305a\u308c\u304b\u306e\u72b6\u614b: (1)\u30c7\u30d5\u30a9\u30eb\u30c8\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u751f\u6210\u3055\u308c\u3066\u3044\u3066\u30b9\u30ec\u30c3\u30c9\u306b\u7d10\u4ed8\u3044\u3066\u3044\u306a\u3044\u3001(2)move\u3055\u308c\u3066\u629c\u3051\u6bbb\u3001(3)join\u305a\u307f\u3001(4)detach\u305a\u307f\n* std::thread\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u7834\u68c4\u3055\u308c\u308b\u524d\u306bunjoinable\u306b\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u30d7\u30ed\u30b0\u30e9\u30e0\u5168\u4f53\u304c\u5f37\u5236\u7d42\u4e86\u3055\u308c\u3066\u3057\u307e\u3046(\u30b9\u30ec\u30c3\u30c9\u304c\u3001\u3067\u306f\u306a\u3044!)\u3002\n* std::thread\u3092\u5305\u3080RAII(Resource Acquisition Is Instantiation)\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308a\u3001RAII\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30c7\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u304a\u3044\u3066\u3001\u751f\u6210\u6642\u306b\u3042\u3089\u304b\u3058\u3081\u6307\u5b9a\u3057\u3066\u304a\u3044\u305f\u65b9\u6cd5(join or detach)\u3067std::thread\u3092unjoinable\u306b\u3059\u308b\u3088\u3046\u306bRAII\u30af\u30e9\u30b9\u3092\u66f8\u3044\u3066\u304a\u304f\u3068\u3088\u3044\u3002\n* ThreadRAII \u30af\u30e9\u30b9\u306e\u4e2d\u3067 std::thread \u306f\u6700\u5f8c\u306e\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u3068\u3057\u3066\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3002 (\u66f8\u3044\u305f\u9806\u306b\u521d\u671f\u5316\u3055\u308c\u308b\u306e\u3067\u3001\u30b9\u30ec\u30c3\u30c9\u304c\u8d77\u304d\u305f\u3068\u304d\u306b\u306f\u4ed6\u306e\u30c7\u30fc\u30bf\u30e1\u30f3\u30d0\u304c\u521d\u671f\u5316\u305a\u307f\u3067\u3042\u308b\u3053\u3068\u304c\u4fdd\u8a3c\u3055\u308c\u308b)\n\n## 38: std::thread\u3068future\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u7834\u58ca\u6642\u306e\u6319\u52d5\u306e\u5dee\u3092\u77e5\u3063\u3066\u304a\u3051\n\n* joinable\u306a\u72b6\u614b\u306b\u3042\u308bstd::thread\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068future\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u3044\u305a\u308c\u3082OS\u30b9\u30ec\u30c3\u30c9\u3078\u306e\u30cf\u30f3\u30c9\u30eb\u3068\u307f\u306a\u305b\u308b\u3002\n* future\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u7834\u58ca\u6642\u306e\u6319\u52d5\u306f\u3061\u3087\u3063\u3068\u8907\u96d1\u3002std::thread\u3068\u9055\u3063\u3066\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u5f37\u5236\u7d42\u4e86\u306f\u8d77\u3053\u3089\u306a\u3044\u3002\n* future\u306fstd::shared_future\u3068\u3057\u3066\u30b3\u30d4\u30fc\u3067\u304d\u308b\u3002\u547c\u3073\u51fa\u3055\u308c\u305f\u95a2\u6570\u306e\u72b6\u614b\u3068\u6f14\u7b97\u7d50\u679c\u306f\u547c\u3073\u51fa\u3057\u5143\u30fb\u547c\u3073\u51fa\u3057\u5148\u3044\u305a\u308c\u306e\u30b9\u30ec\u30c3\u30c9\u306b\u3082\u5c5e\u3055\u306a\u3044\u5171\u6709\u9818\u57df\u306b\u7f6e\u304b\u308c\u308b\u3002\u30b3\u30d4\u30fc\u3055\u308c\u305ffuture\u306e\u9593\u3067\u306f\u3053\u306e\u5171\u6709\u9818\u57df\u306f\u5171\u901a\u3067\u3001std::shared_ptr\u3068\u540c\u3058\u3088\u3046\u306b\u53c2\u7167\u30ab\u30a6\u30f3\u30bf\u3067\u7ba1\u7406\u3055\u308c\u308b\u3002\n* std::async\u306b\u3088\u3063\u3066\u4f5c\u3089\u308c\u305f\u3072\u3068\u3064\u306e\u5171\u6709\u9818\u57df\u306b\u7d10\u4ed8\u3044\u305f\u6700\u5f8c\u306efuture\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u7834\u68c4\u3055\u308c\u308b\u3068\u304d\u3001\u975e\u540c\u671f\u6307\u5b9a(std::launch::async)\u3067\u6700\u521d\u306e\u30b9\u30ec\u30c3\u30c9\u8d77\u52d5\u304c\u3055\u308c\u3066\u3044\u308c\u3070\u6697\u9ed9join\u306b\u306a\u308b(\u5bfe\u8c61\u30b9\u30ec\u30c3\u30c9\u7d42\u4e86\u307e\u3067\u547c\u3073\u51fa\u3057\u5143\u30b9\u30ec\u30c3\u30c9\u304c\u30d6\u30ed\u30c3\u30af\u3055\u308c\u308b)\u3002\u305d\u308c\u4ee5\u5916\u306e\u3068\u304d\u306f\u3001\u305f\u3060future\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u7834\u68c4\u3055\u308c\u308b(\u3059\u3067\u306b\u30b9\u30ec\u30c3\u30c9\u304c\u975e\u540c\u671f\u5b9f\u884c\u3055\u308c\u3066\u3044\u308c\u3070detach\u306b\u76f8\u5f53\u3059\u308b\u3002\u3082\u3057\u304f\u306f\u30bf\u30b9\u30af\u304c\u540c\u671f\u578b\u3067\u9045\u5ef6\u5b9f\u884c\u4e88\u5b9a\u3060\u3063\u305f\u3068\u3059\u308b\u3068\u5168\u304f\u5b9f\u884c\u3055\u308c\u305a\u306b\u7d42\u308f\u308b)\n\n## 39: 1\u56de\u304d\u308a\u306e\u30a4\u30d9\u30f3\u30c8\u901a\u4fe1\u306b\u306f void future \u306e\u5229\u7528\u3092\u8003\u3048\u3088\n\n* \u30b9\u30ec\u30c3\u30c9\u9593\u306e\u30a4\u30d9\u30f3\u30c8\u901a\u77e5\u306e\u65b9\u6cd5\n* std::condition_variable\u3092\u30ed\u30c3\u30af\u7528\u306estd::mutex\u3068\u4e00\u7dd2\u306b\u4f7f\u3046\u306e\u304c\u308f\u304b\u308a\u3084\u3059\u3044\u65b9\u6cd5\u3002\u3057\u304b\u3057\u3001\u30a4\u30d9\u30f3\u30c8\u9001\u4fe1\u5074\u306e\u30bf\u30b9\u30af\u304cnotify_one(\u307e\u305f\u306fnotify_all)\u3059\u308b\u524d\u306b\u30a4\u30d9\u30f3\u30c8\u53d7\u4fe1\u5074\u306e\u30bf\u30b9\u30af\u304cwait\u3057\u306f\u3058\u3081\u3066\u3044\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u5236\u7d04\u304c\u3042\u308b\u3002\u307e\u305f\u3001spurious wakeup(condition_variable\u306e\u6761\u4ef6\u304c\u6e80\u305f\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u306b\u306a\u3093\u304b\u53d7\u4fe1\u5074\u30bf\u30b9\u30af\u304c\u8d77\u3053\u3055\u308c\u3066\u3057\u307e\u3046)\u306b\u5bfe\u51e6\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3002\u53d7\u4fe1\u5074\u30bf\u30b9\u30af\u306f\u9001\u4fe1\u5074\u30bf\u30b9\u30af\u304c\u30a4\u30d9\u30f3\u30c8\u901a\u77e5\u306e\u524d\u63d0\u6761\u4ef6\u3092\u6e80\u305f\u3057\u305f\u304b\u3069\u3046\u304b\u3092\u89b3\u5bdf\u3067\u304d\u306a\u3044\u304b\u3089\u3002\n* std::atomic<bool> \u3067\u30d5\u30e9\u30b0\u3092\u4f5c\u3063\u3066\u3001\u9001\u4fe1\u5074\u306f`flag=true;`\u3068\u3057\u3001\u53d7\u4fe1\u5074\u306f`while(!flag);`\u3068\u3057\u3066\u3082\u3044\u3044\u304c\u3053\u308c\u306f\u30dd\u30fc\u30ea\u30f3\u30b0\u3067\u52b9\u7387\u306b\u554f\u984c\u304c\u3042\u308b\u3002\n* \u30d5\u30e9\u30b0\u3068\u6761\u4ef6\u5909\u6570(condition variable)\u3092\u4f75\u7528\u3059\u308b\u306e\u304c\u3088\u304f\u3084\u308b\u65b9\u6cd5\u3060\u304c\u3001mutex\u306b\u3088\u308b\u30d5\u30e9\u30b0\u306e\u4fdd\u8b77\u3082\u5fc5\u8981\u3067\u3001\u8ab2\u984c\u306f\u89e3\u3051\u308b\u3082\u306e\u306e\u30b4\u30c1\u30e3\u30b4\u30c1\u30e3\u3059\u308b\u3002\n* \u6b21\u306e\u65b9\u6cd5\u304c\u3042\u308b\uff1a\u9001\u4fe1\u5074\u30bf\u30b9\u30af\u304c`std::promise<void> p;`\u3068\u3057\u3066\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308a\u3001`p.set_value();`\u3057\u3066\u30a4\u30d9\u30f3\u30c8\u9001\u4fe1\u3092\u3059\u308b\u3002\u53d7\u4fe1\u5074\u306f`p.get_future().wait();`\u3059\u308c\u3070\u3088\u3044\u3002\u305f\u3060\u30d2\u30fc\u30d7\u306b\u5171\u6709\u72b6\u614b\u306e\u305f\u3081\u306e\u9818\u57df\u304c\u3068\u3089\u308c\u308b\u306e\u3068\u3001std::promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c1\u56de\u304d\u308a\u3057\u304b\u4f7f\u3048\u306a\u3044\u554f\u984c\u304c\u3042\u308b\u3002\n\n## 40: std::atomic\u306f\u4e26\u884c\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306b\u4f7f\u3044\u3001 voatile \u306f\u7279\u6b8a\u306a\u30e1\u30e2\u30ea\u306b\u4f7f\u3048\n\n* \u4e16\u9593\u3067\u8aa4\u89e3\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3060\u304cvolatile\u3068\u4e26\u884c\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306f\u95a2\u4fc2\u306a\u3044\u3002\n* std::atomic\u306fmutex\u3067\u30ed\u30c3\u30af\u3055\u308c\u3066\u3044\u308b\u304b\u306e\u3088\u3046\u306b\u3001read, write, RMW(read-modify-write\u64cd\u4f5c)\u3092\u5206\u5272\u4e0d\u53ef\u80fd\u306a(atomic\u306a)\u64cd\u4f5c\u3068\u3057\u3066\u3001CPU\u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u52b9\u7387\u7684\u306b\u5b9f\u73fe\u3067\u304d\u308b\u3002\n* std::atomic\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001statement\u306e\u9593\u306e\u9806\u5e8f\u306e\u4fdd\u8a3c\u304c\u3067\u304d\u308b\u3002\u305f\u3068\u3048\u3070\u3001\u4e0b\u8a18\u30b3\u30fc\u30c9\u3067 flag \u304c true \u306b\u306a\u3063\u305f\u3053\u3068\u306f func() \u306e\u5b9f\u884c\u304c\u5b8c\u4e86\u3057\u305f\u3053\u3068\u3092\u4fdd\u8a3c\u3059\u308b\u3002 flag \u304c\u305f\u3060\u306e bool\u3000\u3060\u3063\u305f\u3089\u4fdd\u8a3c\u3055\u308c\u306a\u3044\u3002\n\n```\nstd::atomic<bool> flag(false);\nint x = func();\nflag = true; // CPU\u306b\u3088\u308b\u6700\u9069\u5316\u3082\u542b\u3081\u3001x\u306e\u5024\u304c\u66f4\u65b0\u3055\u308c\u3066\u304b\u3089flag\u304c\u66f4\u65b0\u3055\u308c\u308b\u3053\u3068\u304c\u4fdd\u8a3c\u3055\u308c\u308b\n```\n\n* \u3058\u3083\u3042volatile\u306e\u610f\u5473\u306f?: \u5bfe\u8c61\u304c\u300c\u7279\u6b8a\u306a\u30e1\u30e2\u30ea\u300d\u3060\u3068\u30b3\u30f3\u30d1\u30a4\u30e9\u306b\u6559\u3048\u308b\u3053\u3068\u300210\u3092\u66f8\u304d\u8fbc\u3093\u3060\u76f4\u5f8c\u306b20\u3092\u66f8\u304d\u8fbc\u3080\u3053\u3068\u306f\u7121\u610f\u5473\u306b\u601d\u3048\u308b\u304c\u3001Memory Mapped IO\u3068\u304b\u3060\u3068\u610f\u5473\u304c\u3042\u308b\u3002\u307e\u305f\u3001\u81ea\u5206\u306f\u66f8\u304d\u8fbc\u3093\u3067\u3044\u306a\u3044\u306e\u306b\u5024\u304c\u3044\u3064\u306e\u307e\u306b\u304b\u5909\u308f\u3063\u3066\u3044\u308b\u3053\u3068\u3082\u3042\u308a\u3048\u308b\u3002\u3068\u3044\u3046\u524d\u63d0\u306b\u7acb\u3063\u3066\u3001\u8aad\u307f\u8fbc\u307f\u3084\u66f8\u304d\u8fbc\u307f\u306f\u8a00\u308f\u308c\u305f\u901a\u308a\u306b\u3084\u3063\u3066\u5909\u306a\u6700\u9069\u5316\u3059\u308b\u306a\u3088\u3001\u3068\u3044\u3046\u30b3\u30f3\u30d1\u30a4\u30e9\u3078\u306e\u6307\u793a\u304cvolatile\u3002\n\n* volatile std::atomic<int> val; \u307f\u305f\u3044\u306a\u30b1\u30fc\u30b9\u3082\u3042\u308a\u3048\u308b\u3002\n\n# \u7b2c8\u7ae0: \u88dc\u907a\n\n* \u5024\u6e21\u3057\u3068 emplace \u306f\u4f7f\u3044\u3069\u3053\u308d\u3092\u9593\u9055\u3048\u3084\u3059\u3044\u306e\u3067\u88dc\u8db3\u3059\u308b\u306d\u3002\n\n## 41: \u5f15\u6570\u304c\u30b3\u30d4\u30fc\u53ef\u3067\u3001\u53d7\u3051\u53d6\u308a\u5074\u3067\u5e38\u306b\u30b3\u30d4\u30fc\u304c\u5fc5\u8981\u3067\u3001\u304b\u3064\u52b9\u7387\u7684\u306b\u30e0\u30fc\u30d6\u3067\u304d\u308b\u3068\u304d\u306f\u5024\u6e21\u3057\u3082\u8003\u3048\u308d\n\n* \u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53d7\u3051\u53d6\u3063\u3066*this\u306e\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u683c\u7d0d\u3059\u308b\u3088\u3046\u306a\u30e1\u30f3\u30d0\u95a2\u6570\u3092\u66f8\u304f\u3068\u304d\u3067\u3001lvalue\u7248\u306e\u30b3\u30d4\u30fc\u3068rvalue\u7248\u306e\u30e0\u30fc\u30d6\u30682\u3064\u95a2\u6570\u3092\u66f8\u304f\u30b1\u30fc\u30b9\u3042\u308b\u3088\u306d\u3002\u9762\u5012\u304f\u3055\u3044\u3088\u306d\u3002\n* universal reference\u30671\u3064\u306e\u95a2\u6570\u306b\u3067\u304d\u308b\u3051\u3069\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u306a\u308b\u304b\u3089\u30d8\u30c3\u30c0\u306b\u5b9f\u88c5\u3092\u7f6e\u304b\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3068\u304b\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b3\u30fc\u30c9\u306e\u30b5\u30a4\u30ba\u304c\u81a8\u308c\u4e0a\u304c\u308b\u304b\u3082\u3068\u304b\u3001\u6e21\u305b\u306a\u3044\u5f15\u6570\u578b\u304c\u3042\u308b(#30)\u3068\u304b\u30b3\u30f3\u30d1\u30a4\u30e9\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u308f\u304b\u308a\u306b\u304f\u3044(#27)\u3068\u304b\u3044\u308d\u3044\u308d\u9762\u5012\u3060\u3088\u306d\u3002\n* \u5024\u6e21\u3057\u3067\u53d7\u3051\u53d6\u3063\u3066std::move\u3092\u3064\u3051\u3066\u30b3\u30f3\u30c6\u30ca\u306b\u5165\u308c\u308c\u3070\u3044\u3044\u3093\u3084\u3067\u3002\u5024\u6e21\u3057\u6642\u306e\u3068\u304d\u3001C++98\u3067\u306f\u5e38\u306b\u30b3\u30d4\u30fc\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u547c\u3070\u308c\u308b\u304cC++11\u3067\u306f\u5f15\u6570\u304crvalue\u306a\u3089\u30e0\u30fc\u30d6\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u547c\u3070\u308c\u308b\u3002\n\n```\nclass Widget {\npublic:\n    void addName(std::string newName) { // \u5024\u6e21\u3057\n        names.push_back(std::move(newName)); // std::move\u306b\u6ce8\u76ee\n    }\nprivate:\n    std::vector<std::string> names;\n};\n```\n\n* \u5024\u6e21\u3057\u89e3\u6cd5\u3067\u306f\u3001\u30aa\u30fc\u30d0\u30ed\u30fc\u30c9\u3068\u6bd4\u3079\u3066\u3082universal reference\u3068\u6bd4\u3079\u3066\u3082\u3001\u5f15\u6570\u304crvalue\u3067\u3042\u308clvalue\u3067\u3042\u308c\u30e0\u30fc\u30d6\u304c1\u56de\u4f59\u8a08\u306b\u884c\u308f\u308c\u308b\u306e\u3067\u3001\u3053\u306e\u89e3\u6cd5\u304cOK\u306a\u306e\u306f\u30e0\u30fc\u30d6\u304c\u52b9\u7387\u7684\u306a\u5834\u5408\u306b\u9650\u308b\u3002\n* \u30e0\u30fc\u30d6\u6f14\u7b97\u4e0d\u53ef\u306a\u5834\u5408\u3001\u30e0\u30fc\u30d6\u306e\u4ee3\u308f\u308a\u306b\u30b3\u30d4\u30fc\u304c\u3055\u308c\u308b\u306e\u3067\u975e\u52b9\u7387\u3002\u3053\u306e\u5834\u5408\u5024\u6e21\u3057\u306f\u3088\u304f\u306a\u3044\u3002\n* \u3042\u3068\u3001\u30e1\u30f3\u30d0\u95a2\u6570\u5185\u306b\u6761\u4ef6\u5224\u65ad\u304c\u3042\u3063\u3066\u30b3\u30d4\u30fc\u3092\u7d50\u5c40\u3057\u306a\u3044\u53ef\u80fd\u6027\u304c\u3042\u308b\u306a\u3089\u3001\u5024\u6e21\u3057\u3067\u4f5c\u3063\u305f\u30b3\u30d4\u30fc\u304c\u7121\u99c4\u306b\u306a\u308b\u306e\u3067\u5024\u6e21\u3057\u306f\u3088\u304f\u306a\u3044\u3002\n* \u307b\u3093\u3068\u3046\u306b\u5024\u6e21\u3057\u3067\u52b9\u7387\u304c\u843d\u3061\u306a\u3044\u304b\u3069\u3046\u304b\u306f\u305d\u306e\u4ed6\u3044\u308d\u3044\u308d\u6761\u4ef6\u304c\u3042\u308b\u306e\u3067\u3088\u304f\u8003\u3048\u308d\u3002\u30b3\u30d4\u30fc\u4ee3\u5165\u3088\u308a\u30b3\u30d4\u30fc\u521d\u671f\u5316\u306e\u307b\u3046\u304c\u30b3\u30b9\u30c8\u304c\u9ad8\u3044\u30b1\u30fc\u30b9\u3082\u3042\u308b (\u9577\u3044\u6587\u5b57\u5217\u306e\u5165\u3063\u3066\u3044\u308b std::string \u3092\u77ed\u3044\u6587\u5b57\u5217\u306b\u66f8\u304d\u63db\u3048\u308b\u3068\u304d\u3068\u304b)\n* \u5024\u6e21\u3057\u306f\u30b9\u30e9\u30a4\u30b7\u30f3\u30b0\u306e\u554f\u984c\u3092\u4f34\u3046\u306e\u3067\u6d3e\u751f\u30af\u30e9\u30b9\u3092\u57fa\u5e95\u30af\u30e9\u30b9\u578b\u306e\u5909\u6570\u306b\u5024\u6e21\u3057\u4ee3\u5165\u3059\u308b\u969b\u306b\u306f\u6c17\u3092\u3064\u3051\u308d\n\n## 42: insert(push_back\u3068\u304b\u306e\u7dcf\u79f0\b)\u306e\u4ee3\u308f\u308a\u306bemplace(emplace_*\u306e\u7dcf\u79f0)\u306e\u5229\u7528\u3092\u8003\u3048\u308d\n\n* \u30b3\u30f3\u30c6\u30ca\u306b\u5024\u3092\u633f\u5165\u3059\u308b\u3068\u304d\u306b\u4e00\u6642\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u4f5c\u3089\u308c\u308b\u3068\u3059\u308b\u3068\u3001\u30e0\u30fc\u30d6\u6f14\u7b97\u304c\u4f59\u5206\u306b\u304b\u304b\u308b\u3002emplace\u3092\u4f7f\u3048\u3070\u4e00\u6642\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u751f\u6210\u3092\u907f\u3051\u3089\u308c\u308b\u3002\n\n```\nstd::vector<str::string> vs;\nvs.push_back(\"xyzzy\"); // \u5b9f\u614b\u306fvs.push_back(std::string(\"xyzzy\"));\nvs.emplace_back(\"xyzzy\"); // \u30d9\u30bf\u30fc\nvs.emplace_back(50, 'x'); // x\u304c50\u56de\u7d9a\u304f\u6587\u5b57\u5217\u3092vs\u306b\u633f\u5165\u3059\u308b\n```\n\n* \u3058\u3083\u3042insert\u4f7f\u3046\u306e\u3092\u3084\u3081\u3066\u3044\u3064\u3082emplace\u3092\u4f7f\u3048\u3070?\u3068\u601d\u3044\u304d\u3084\u3001insert\u306e\u307b\u3046\u304c\u6027\u80fd\u304c\u3044\u3044\u30b1\u30fc\u30b9\u3082\u3042\u308b\u3002\u30b3\u30f3\u30c6\u30ca\u306e\u7a2e\u985e\u306a\u3069\u524d\u63d0\u6761\u4ef6\u304c\u8907\u96d1\u306a\u306e\u3060\u304c\u3001\u4e0b\u8a18\u6761\u4ef6\u304c\u3059\u3079\u3066\u6e80\u305f\u3055\u308c\u308c\u3070\u3001\u307b\u307cemplace\u306e\u307b\u3046\u304c\u3088\u3044\u3002\n  \t* \u5024\u304c\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u4ee3\u5165\u3055\u308c\u308b\u306e\u3067\u306f\u306a\u304f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u65b0\u3057\u304f\u69cb\u7bc9\u3055\u308c\u308b(push_back\u3068\u304b\u306b\u76f8\u5f53\u3059\u308b\u72b6\u6cc1)\n\t* \u633f\u5165\u3055\u308c\u308b\u5f15\u6570\u578b\u304c\u30b3\u30f3\u30c6\u30ca\u306b\u683c\u7d0d\u3055\u308c\u308b\u578b\u3068\u7570\u306a\u308b (insert\u3060\u3068\u4e00\u6642\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u4f5c\u3089\u308c\u308b)\n\t* \u30b3\u30f3\u30c6\u30ca\u304c\u633f\u5165\u3057\u3088\u3046\u3068\u3057\u305f\u5024\u3092\u91cd\u8907\u3068\u3057\u3066\u62d2\u7d76\u3059\u308b\u53ef\u80fd\u6027\u304c\u4f4e\u3044 (\u91cd\u8907\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u3067\u306femplace\u306f\u6bd4\u8f03\u306e\u305f\u3081\u306b\u4e00\u5ea6\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u3063\u3066\u307f\u3066\u3001\u91cd\u8907\u304c\u691c\u51fa\u3055\u308c\u305f\u3089\u7834\u68c4\u3059\u308b\u3053\u3068\u306b\u306a\u308b)\n* std::shared_ptr<Widget>\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u683c\u7d0d\u3057\u3001\u304b\u3064\u30ab\u30b9\u30bf\u30e0\u30c7\u30ea\u30fc\u30bf\u3092\u4f7f\u3046\u3068\u304d\u306femplace\u3067\u306f\u306a\u304fpush_back\u3067\u3001`ptrs.push_back(std::shared_ptr<Widget>(new Widget, customDeleter));`\u306e\u3088\u3046\u306b\u305b\u3088\u3002shared_ptr\u3092\u4f5c\u3063\u3066\u304b\u3089\u30b3\u30f3\u30c6\u30ca\u306b\u5165\u308c\u306b\u884c\u304f\u3068\u3044\u3046\u9806\u5e8f\u3092\u78ba\u4fdd\u3059\u308b\u3068\u4f8b\u5916\u5b89\u5168\u7684\u306b\u30d9\u30bf\u30fc\u3002\u4e00\u822c\u306bnew\u3068\u304b\u3092emplace\u306b\u6e21\u3059\u3079\u304d\u3067\u306a\u3044\u3002\n* explicit\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u4f34\u3046\u3068\u304d\u306f\u8981\u6ce8\u610f\u3002emplace_back\u306e\u4e2d\u3067\u306f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u660e\u793a\u7684\u306b\u547c\u3070\u308c\u308b\u3002\u3042\u3068\u3001regex\u306f const char*\u3092\u53d7\u3051\u53d6\u308bexplicit\u306a\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u6301\u3064\u3002\n\n```\nstd::vector<std::regex> regexes;\nregexes.emplace_back(nullptr); // \u4e0d\u6b63\u3060\u304c\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u306b\u306a\u3089\u306a\u3044\nregexes.push_back(nullptr); // \u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\nstd::regex r = nullptr; // \u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\nstd::regex r(nullptr); // \u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u306b\u306a\u3089\u306a\u3044\n```\n", "tags": ["C++11", "C++14", "C++"]}