{"context": "Ansible\u306e\u691c\u8a3c\u3059\u308b\u306e\u306b\u3044\u3061\u3044\u3061EC2\u3067AmazonLinux\u3092\u8d77\u52d5\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u306f\u9762\u5012\u306a\u306e\u3067\u3001docker\u3067\u8a66\u3057\u3066\u307f\u305f\u3002\n\nDocker\u306e\u6e96\u5099\n\nDocker for Mac\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nGet started with Docker for Mac\n\nAmazon ECR registry\u306b\u30ed\u30b0\u30a4\u30f3\n$ $(aws ecr get-login | sed 's/\\-e none //g')\nLogin Succeeded\n\n\n\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\n$ docker pull amazonlinux:latest\nlatest: Pulling from library/amazonlinux\nc9141092a50d: Pull complete\nDigest: sha256:2010c88ac1e7c118d61793eec71dcfe0e276d72b38dd86bd3e49da1f8c48bf54\nStatus: Downloaded newer image for amazonlinux:latest\n\n\nansible-playbook\u9069\u7528\u5bfe\u8c61\u3068\u3057\u3066\u8d77\u52d5\u3057\u3066\u304a\u304f\n$ docker run -itd --name example amazonlinux:latest\n\n\nansible\u5074\u306e\u6e96\u5099\u3092\u3059\u308b\n$ ansible --version\nansible 2.2.1.0\n  config file = /Users/example/.ansible.cfg\n  configured module search path = Default w/o overrides\n\n\ndocker-py\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ pip install docker-py\n\n\ninventory/docker.py\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5185\u306b\u53d6\u5f97\n$ curl https://raw.githubusercontent.com/ansible/ansible/devel/contrib/inventory/docker.py -o inventory/docker.py\n$ chmod 755 inventory/docker.py\n\n\nplaybook\u3092\u4f5c\u6210\n\nexample.yml\n---\n- hosts: example # \u5148\u307b\u3069docker run\u3067\u6307\u5b9a\u3057\u305fname\u306e\u5024\u3092\u6307\u5b9a\n  connection: docker\n  user: root\n  tasks:\n  - name: ping\n    ping:\n\n\n\n\u5b9f\u884c\n$ ansible-playbook example.yml -i inventory/docker.py\n\nPLAY [example] *****************************************************************\n\nTASK [setup] *******************************************************************\nok: [example]\n\nTASK [ping] ********************************************************************\nok: [example]\n\nPLAY RECAP *********************************************************************\nexample                    : ok=2    changed=0    unreachable=0    failed=0\n\n\n\u6ce8\u610f\u70b9\nAmazon Linux AMI\u3068Amazon Linux Container Image\u306f\u6a19\u6e96\u3067\u5165\u3063\u3066\u3044\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u9055\u3046\u306e\u3067\u3001\u6ce8\u610f\u304c\u5fc5\u8981\u3002\n\nAnsible\u306e\u691c\u8a3c\u3059\u308b\u306e\u306b\u3044\u3061\u3044\u3061EC2\u3067AmazonLinux\u3092\u8d77\u52d5\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u306f\u9762\u5012\u306a\u306e\u3067\u3001docker\u3067\u8a66\u3057\u3066\u307f\u305f\u3002\n\n# Docker\u306e\u6e96\u5099\n\n## Docker for Mac\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n[Get started with Docker for Mac](https://docs.docker.com/docker-for-mac/)\n\n## Amazon ECR registry\u306b\u30ed\u30b0\u30a4\u30f3\n\n```bash\n$ $(aws ecr get-login | sed 's/\\-e none //g')\nLogin Succeeded\n```\n\n## \u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\n```bash\n$ docker pull amazonlinux:latest\nlatest: Pulling from library/amazonlinux\nc9141092a50d: Pull complete\nDigest: sha256:2010c88ac1e7c118d61793eec71dcfe0e276d72b38dd86bd3e49da1f8c48bf54\nStatus: Downloaded newer image for amazonlinux:latest\n```\n\n## ansible-playbook\u9069\u7528\u5bfe\u8c61\u3068\u3057\u3066\u8d77\u52d5\u3057\u3066\u304a\u304f\n```bash\n$ docker run -itd --name example amazonlinux:latest\n```\n\n# ansible\u5074\u306e\u6e96\u5099\u3092\u3059\u308b\n\n```\n$ ansible --version\nansible 2.2.1.0\n  config file = /Users/example/.ansible.cfg\n  configured module search path = Default w/o overrides\n```\n\n## docker-py\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n$ pip install docker-py\n```\n\n## inventory/docker.py\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5185\u306b\u53d6\u5f97\n```\n$ curl https://raw.githubusercontent.com/ansible/ansible/devel/contrib/inventory/docker.py -o inventory/docker.py\n$ chmod 755 inventory/docker.py\n```\n## playbook\u3092\u4f5c\u6210\n```yaml:example.yml\n---\n- hosts: example # \u5148\u307b\u3069docker run\u3067\u6307\u5b9a\u3057\u305fname\u306e\u5024\u3092\u6307\u5b9a\n  connection: docker\n  user: root\n  tasks:\n  - name: ping\n    ping:\n```\n\n# \u5b9f\u884c\n```bash\n$ ansible-playbook example.yml -i inventory/docker.py\n\nPLAY [example] *****************************************************************\n\nTASK [setup] *******************************************************************\nok: [example]\n\nTASK [ping] ********************************************************************\nok: [example]\n\nPLAY RECAP *********************************************************************\nexample                    : ok=2    changed=0    unreachable=0    failed=0\n```\n\n# \u6ce8\u610f\u70b9\nAmazon Linux AMI\u3068Amazon Linux Container Image\u306f\u6a19\u6e96\u3067\u5165\u3063\u3066\u3044\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u9055\u3046\u306e\u3067\u3001\u6ce8\u610f\u304c\u5fc5\u8981\u3002\n", "tags": ["docker", "AmazonLinux", "Ansible"]}