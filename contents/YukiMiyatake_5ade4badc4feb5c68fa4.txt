{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n(\u524d\u56de)[http://qiita.com/samuneP/items/f2d24911803debbcaa48]\ncocos2dx-3.0rc0 \u3067\u74b0\u5883\u306f\u4f5c\u3063\u305f\u3068\u601d\u3044\u307e\u3059\n\u306e\u3067\u3001\u4eca\u56de\u306f cocoStudio\u3067 UI\u3092\u8868\u793a\u3057\u307e\u3059\n\ncocoStudio\n\u8d77\u52d5\u3057\u305f\u3089UI Editor\u3092\u9078\u3073\u307e\u3059\u3002\nImage\u3068\u304b\u30dc\u30bf\u30f3\u3068\u304b\u30c6\u30ad\u30b9\u30c8\u3068\u304b \u597d\u304d\u306b\u8cbc\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\n\u4eca\u56de\u306f\u3000640x960 \u306e\u7e26\u753b\u9762\u306b\u3057\u305f\u3044\u306e\u3067 \u30b5\u30a4\u30ba\u306f\u5909\u66f4\u3057\u307e\u3057\u305f\n\u305d\u3057\u3066 export\u3092\u3057\u307e\u3059\nexport\u4ee5\u4e0b\u306b json\u30d5\u30a1\u30a4\u30eb\u3068\u753b\u50cf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u51fa\u6765\u308b\u306e\u3067\n\u305d\u308c\u3092 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eres\u4ee5\u4e0b\u306b\u7f6e\u304d\u307e\u3059\n\nC++\u30bd\u30fc\u30b9\n\u57fa\u672c\u7684\u306b\u3060\u3044\u305f\u3044\u306e\u4e8b\u306fLua\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u5b8c\u7d50\u3057\u307e\u3059\u304c\u3001\u30bd\u30fc\u30b9\u3092\u5c11\u3057\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\n\nClasses/AppDelegate.cpp\nbool AppDelegate::applicationDidFinishLaunching()\n{\n    // initialize director\n    auto director = Director::getInstance();\n    auto glview = director->getOpenGLView();\n    if(!glview) {\n        glview = GLView::createWithRect(\"Mimico\", Rect(0,0,900,640));\n        director->setOpenGLView(glview);\n    }\n\n//    glview->setDesignResolutionSize(480, 320, ResolutionPolicy::NO_BORDER);\n    glview->setDesignResolutionSize(640, 960, ResolutionPolicy::NO_BORDER);\n\n    // turn on display FPS\n    director->setDisplayStats(true);\n\n    // set FPS. the default value is 1.0/60 if you don't call this\n    director->setAnimationInterval(1.0 / 60);\n\n\n    auto engine = LuaEngine::getInstance();\n    ScriptEngineManager::getInstance()->setScriptEngine(engine);\n    engine->executeScriptFile(\"src/main.lua\");\n\n    return true;\n}\n\n\n\u6700\u521d\u306b\u753b\u9762\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u307e\u3059\n\u4eca\u56de\u7e26\u753b\u9762\u306e 640x960 \u306b\u3057\u305f\u306e\u3067\nsetDesignResolutionSize \u306e\u90e8\u5206\u3092\u5909\u66f4\u3057\u307e\u3057\u305f\nauto engine = LuaEngine::getInstance();\nScriptEngineManager::getInstance()->setScriptEngine(engine);\nengine->executeScriptFile(\"src/main.lua\");\n\u3053\u306e\u90e8\u5206\u304c\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8d77\u52d5\u3057\u3066\u307e\u3059\u306d\n\nLua\u90e8\u5206\n\u30b5\u30f3\u30d7\u30eb\u306e\u30bd\u30fc\u30b9\u306f\u3001\u8272\u3093\u306a\u4e8b\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\u80cc\u666f\u3092\u8aad\u307f\u8fbc\u307f\u3001\u30c9\u30e9\u30c3\u30b0\u3067\u80cc\u666f\u3092\u52d5\u304b\u3057\u3066\u3044\u307e\u3059\n\u305d\u3057\u3066\u30e1\u30cb\u30e5\u30fc\u30dc\u30bf\u30f3\u3092\u4f5c\u308a \u30e1\u30cb\u30e5\u30fc\u304c\u30aa\u30fc\u30d7\u30f3\u3057\u3001\u30e1\u30cb\u30e5\u30fc\u9805\u76ee\u30af\u30ea\u30c3\u30af\u3067\u30e1\u30cb\u30e5\u30fc\u30af\u30ed\u30fc\u30ba\n\u305d\u3057\u3066 \u97f3\u697d\u3092\u9cf4\u3089\u3059\n\u3053\u306e\u90e8\u5206\u3092\u8d85\u30b7\u30f3\u30d7\u30eb\u306b\u3057\u3001\u66f4\u306b UI\u3068\u3057\u3066 cocoStudio\u306e\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u307e\u305b\u3066\u307f\u307e\u3059\n\nmain.lua\nrequire \"Cocos2d\"\n-- cclog\ncclog = function(...)\n    print(string.format(...))\nend\n\n-- for CCLuaEngine traceback\nfunction __G__TRACKBACK__(msg)\n    cclog(\"----------------------------------------\")\n    cclog(\"LUA ERROR: \" .. tostring(msg) .. \"\\n\")\n    cclog(debug.traceback())\n    cclog(\"----------------------------------------\")\nend\n\nlocal function main()\n    collectgarbage(\"collect\")\n    -- avoid memory leak\n    collectgarbage(\"setpause\", 100)\n    collectgarbage(\"setstepmul\", 5000)\n    cc.FileUtils:getInstance():addSearchResolutionsOrder(\"src\");\n    cc.FileUtils:getInstance():addSearchResolutionsOrder(\"res\");\n    local schedulerID = 0\n    --support debug\n    local targetPlatform = cc.Application:getInstance():getTargetPlatform()\n        ---------------\n\n    local visibleSize = cc.Director:getInstance():getVisibleSize()\n    local origin = cc.Director:getInstance():getVisibleOrigin()\n\n\n\n    -- create BG\n    local function createLayerBG()\n        local layerBG = cc.Layer:create()\n\n        local bg = cc.Sprite:create(\"farm.jpg\")\n        bg:setPosition(origin.x + visibleSize.width / 2, origin.y + visibleSize.height / 2)\n        layerBG:addChild(bg)\n\n        return layerBG\n    end\n\n\n\n    -- create UI\n    local function createLayerUI()\n        local layerUI = cc.Layer:create()\n\n        -- add cocoStudio\n        local ui = ccs.GUIReader:getInstance():widgetFromJsonFile(\"ui.json\")\n        layerUI:addChild(ui,1)\n\n        return layerUI\n    end\n\n\n    -- run\n    local sceneGame = cc.Scene:create()\n    sceneGame:addChild(createLayerBG())\n    sceneGame:addChild(createLayerUI())\n\n    if cc.Director:getInstance():getRunningScene() then\n        cc.Director:getInstance():replaceScene(sceneGame)\n    else\n        cc.Director:getInstance():runWithScene(sceneGame)\n    end\n\nend\n\n\nxpcall(main, __G__TRACKBACK__)\n\n\nlocal ui = ccs.GUIReader:getInstance():widgetFromJsonFile(\"ui.json\")\nlayerUI:addChild(ui,1)\n\u3053\u306e\uff12\u884c\u3067\u3059\n\u6b21\u306f\u30dc\u30bf\u30f3\u306e\u30a4\u30d9\u30f3\u30c8\u3068\u3063\u305f\u308a\u3001\u753b\u50cf\u5909\u3048\u305f\u308a\u3001\u52d5\u304b\u305d\u3046\u3068\u601d\u3044\u307e\u3059\n#\u306f\u3058\u3081\u306b\n(\u524d\u56de)[http://qiita.com/samuneP/items/f2d24911803debbcaa48]\ncocos2dx-3.0rc0 \u3067\u74b0\u5883\u306f\u4f5c\u3063\u305f\u3068\u601d\u3044\u307e\u3059\n\u306e\u3067\u3001\u4eca\u56de\u306f cocoStudio\u3067 UI\u3092\u8868\u793a\u3057\u307e\u3059\n\n\n#cocoStudio\n\u8d77\u52d5\u3057\u305f\u3089UI Editor\u3092\u9078\u3073\u307e\u3059\u3002\nImage\u3068\u304b\u30dc\u30bf\u30f3\u3068\u304b\u30c6\u30ad\u30b9\u30c8\u3068\u304b \u597d\u304d\u306b\u8cbc\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\n\u4eca\u56de\u306f\u3000640x960 \u306e\u7e26\u753b\u9762\u306b\u3057\u305f\u3044\u306e\u3067 \u30b5\u30a4\u30ba\u306f\u5909\u66f4\u3057\u307e\u3057\u305f\n\u305d\u3057\u3066 export\u3092\u3057\u307e\u3059\nexport\u4ee5\u4e0b\u306b json\u30d5\u30a1\u30a4\u30eb\u3068\u753b\u50cf\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u51fa\u6765\u308b\u306e\u3067\n\u305d\u308c\u3092 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eres\u4ee5\u4e0b\u306b\u7f6e\u304d\u307e\u3059\n\n\n#C++\u30bd\u30fc\u30b9\n\u57fa\u672c\u7684\u306b\u3060\u3044\u305f\u3044\u306e\u4e8b\u306fLua\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u5b8c\u7d50\u3057\u307e\u3059\u304c\u3001\u30bd\u30fc\u30b9\u3092\u5c11\u3057\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\n\n```cpp:Classes/AppDelegate.cpp\nbool AppDelegate::applicationDidFinishLaunching()\n{\n    // initialize director\n    auto director = Director::getInstance();\n\tauto glview = director->getOpenGLView();\n\tif(!glview) {\n\t\tglview = GLView::createWithRect(\"Mimico\", Rect(0,0,900,640));\n\t\tdirector->setOpenGLView(glview);\n\t}\n\n//    glview->setDesignResolutionSize(480, 320, ResolutionPolicy::NO_BORDER);\n    glview->setDesignResolutionSize(640, 960, ResolutionPolicy::NO_BORDER);\n\n    // turn on display FPS\n    director->setDisplayStats(true);\n\n    // set FPS. the default value is 1.0/60 if you don't call this\n    director->setAnimationInterval(1.0 / 60);\n\n\n\tauto engine = LuaEngine::getInstance();\n\tScriptEngineManager::getInstance()->setScriptEngine(engine);\n\tengine->executeScriptFile(\"src/main.lua\");\n\n    return true;\n}\n```\n\n\u6700\u521d\u306b\u753b\u9762\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u307e\u3059\n\u4eca\u56de\u7e26\u753b\u9762\u306e 640x960 \u306b\u3057\u305f\u306e\u3067\nsetDesignResolutionSize \u306e\u90e8\u5206\u3092\u5909\u66f4\u3057\u307e\u3057\u305f\n\nauto engine = LuaEngine::getInstance();\nScriptEngineManager::getInstance()->setScriptEngine(engine);\nengine->executeScriptFile(\"src/main.lua\");\n\n\u3053\u306e\u90e8\u5206\u304c\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8d77\u52d5\u3057\u3066\u307e\u3059\u306d\n\n\n\n#Lua\u90e8\u5206\n\u30b5\u30f3\u30d7\u30eb\u306e\u30bd\u30fc\u30b9\u306f\u3001\u8272\u3093\u306a\u4e8b\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\u80cc\u666f\u3092\u8aad\u307f\u8fbc\u307f\u3001\u30c9\u30e9\u30c3\u30b0\u3067\u80cc\u666f\u3092\u52d5\u304b\u3057\u3066\u3044\u307e\u3059\n\u305d\u3057\u3066\u30e1\u30cb\u30e5\u30fc\u30dc\u30bf\u30f3\u3092\u4f5c\u308a \u30e1\u30cb\u30e5\u30fc\u304c\u30aa\u30fc\u30d7\u30f3\u3057\u3001\u30e1\u30cb\u30e5\u30fc\u9805\u76ee\u30af\u30ea\u30c3\u30af\u3067\u30e1\u30cb\u30e5\u30fc\u30af\u30ed\u30fc\u30ba\n\u305d\u3057\u3066 \u97f3\u697d\u3092\u9cf4\u3089\u3059\n\n\u3053\u306e\u90e8\u5206\u3092\u8d85\u30b7\u30f3\u30d7\u30eb\u306b\u3057\u3001\u66f4\u306b UI\u3068\u3057\u3066 cocoStudio\u306e\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u307e\u305b\u3066\u307f\u307e\u3059\n\n```lua:main.lua\nrequire \"Cocos2d\"\n-- cclog\ncclog = function(...)\n    print(string.format(...))\nend\n\n-- for CCLuaEngine traceback\nfunction __G__TRACKBACK__(msg)\n    cclog(\"----------------------------------------\")\n    cclog(\"LUA ERROR: \" .. tostring(msg) .. \"\\n\")\n    cclog(debug.traceback())\n    cclog(\"----------------------------------------\")\nend\n\nlocal function main()\n    collectgarbage(\"collect\")\n    -- avoid memory leak\n    collectgarbage(\"setpause\", 100)\n    collectgarbage(\"setstepmul\", 5000)\n\tcc.FileUtils:getInstance():addSearchResolutionsOrder(\"src\");\n\tcc.FileUtils:getInstance():addSearchResolutionsOrder(\"res\");\n\tlocal schedulerID = 0\n    --support debug\n    local targetPlatform = cc.Application:getInstance():getTargetPlatform()\n        ---------------\n\n    local visibleSize = cc.Director:getInstance():getVisibleSize()\n    local origin = cc.Director:getInstance():getVisibleOrigin()\n\n\n\n    -- create BG\n    local function createLayerBG()\n        local layerBG = cc.Layer:create()\n\n        local bg = cc.Sprite:create(\"farm.jpg\")\n        bg:setPosition(origin.x + visibleSize.width / 2, origin.y + visibleSize.height / 2)\n        layerBG:addChild(bg)\n\n        return layerBG\n    end\n\n\n\n    -- create UI\n    local function createLayerUI()\n        local layerUI = cc.Layer:create()\n\n        -- add cocoStudio\n        local ui = ccs.GUIReader:getInstance():widgetFromJsonFile(\"ui.json\")\n        layerUI:addChild(ui,1)\n\n        return layerUI\n    end\n\n\n    -- run\n    local sceneGame = cc.Scene:create()\n    sceneGame:addChild(createLayerBG())\n    sceneGame:addChild(createLayerUI())\n\t\n\tif cc.Director:getInstance():getRunningScene() then\n\t\tcc.Director:getInstance():replaceScene(sceneGame)\n\telse\n\t\tcc.Director:getInstance():runWithScene(sceneGame)\n\tend\n\nend\n\n\nxpcall(main, __G__TRACKBACK__)\n```\n\n\nlocal ui = ccs.GUIReader:getInstance():widgetFromJsonFile(\"ui.json\")\nlayerUI:addChild(ui,1)\n\n\u3053\u306e\uff12\u884c\u3067\u3059\n\n\u6b21\u306f\u30dc\u30bf\u30f3\u306e\u30a4\u30d9\u30f3\u30c8\u3068\u3063\u305f\u308a\u3001\u753b\u50cf\u5909\u3048\u305f\u308a\u3001\u52d5\u304b\u305d\u3046\u3068\u601d\u3044\u307e\u3059\n\n", "tags": ["cocos2d-x3.0rc0", "Lua", "cocoStudio", "C++"]}