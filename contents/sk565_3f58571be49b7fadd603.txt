{"context": "Multi-AZ\u306eVPC\u74b0\u5883\u3092\u69cb\u6210\u3059\u308b\u3001CloudFormation\u306eTemplate\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\u4ee5\u4e0b\u306e\u9806\u3067Multi-AZ\u69cb\u6210\u3067\u5fc5\u8981\u3068\u306a\u308b\u5178\u578b\u7684\u306aNW\u74b0\u5883\u304c\u69cb\u7bc9\u3055\u308c\u307e\u3059\u3002\n\u30fbVPC\u4f5c\u6210\n\u30fbIGW\u4f5c\u6210\u30fb\u30a2\u30bf\u30c3\u30c1\n\u30fbSubnets\u4f5c\u6210\n\u30fbNAT Gateway\u306e\u4f5c\u6210\n\u30fbRouteTable\u4f5c\u6210\n\n\u69cb\u6210\n\nVPC\u306eCIDR\u3001AZ\u306f\u69cb\u7bc9\u6642\u306eParameter\u306b\u3066\u4efb\u610f\u306b\u8a2d\u5b9a\u53ef\u80fd\u3067\u3059\u3002\n\u307e\u305f\u3001\u4efb\u610f\u306e\u30ea\u30fc\u30b8\u30e7\u30f3\u3067\u5229\u7528\u53ef\u80fd\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u4f7f\u3044\u65b9\n\u30fb\u4e0b\u8a18\u306b\u3042\u308bTemplate\u3092\u4fdd\u5b58\u3057\u3001CloudFormation\u306e\"CreateStack\"\u304b\u3089\u30b9\u30bf\u30c3\u30af\u306e\u4f5c\u6210\u3092\u958b\u59cb\n\u30fbParameters\u3067\u4ee5\u4e0b\u3092\u5165\u529b\n\u3000- Multi-AZ\u3067\u4f7f\u7528\u3059\u308bAZ\u30922\u3064\u9078\u629e\uff08AZ1/AZ2\uff09\n\u3000- VPCCIDR\u306b\u4f5c\u6210\u3057\u305f\u3044\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\uff0810.* \u307e\u305f\u306f 172.16 \u301c 172.31 \u307e\u305f\u306f 192.168\uff09\n\u30fb\u4f5c\u6210\u5b8c\u4e86\u307e\u3067\u5f85\u3064\uff08NatGateway\u3067\u5c11\u3005\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\uff09\n\n\nTemplate\n{\n  \"AWSTemplateFormatVersion\": \"2010-09-09\",\n  \"Description\": \"VPC Template For Multi-AZ\",\n  \"Parameters\": {\n    \"AZ1\" : {\n        \"Description\" : \"input Availability Zone 1\",\n        \"Type\"        : \"AWS::EC2::AvailabilityZone::Name\"\n    },\n    \"AZ2\" : {\n        \"Description\" : \"input Availability Zone 2\",\n        \"Type\"        : \"AWS::EC2::AvailabilityZone::Name\"\n    },\n    \"VPCCIDR\": {\n      \"AllowedPattern\" : \"^(\\\\d|[01]?\\\\d\\\\d|2[0-4]\\\\d|25[0-5])\\\\.(\\\\d|[01]?\\\\d\\\\d|2[0-4]\\\\d|25[0-5])\",\n      \"Default\"        : \"10.0\",\n      \"Description\"    : \"VPC CIDR (*.*.0.0/16)\",\n      \"Type\"           : \"String\"\n    }\n  },\n  \"Resources\": {\n    \"vpc00\": {\n      \"Type\"       : \"AWS::EC2::VPC\",\n      \"Properties\" : {\n        \"CidrBlock\"          : { \"Fn::Join\": [ \"\", [ { \"Ref\": \"VPCCIDR\" }, \".0.0/16\" ] ] },\n        \"InstanceTenancy\"    : \"default\",\n        \"EnableDnsSupport\"   : \"true\",\n        \"EnableDnsHostnames\" : \"false\",\n        \"Tags\"               : [ { \"Key\": \"Name\", \"Value\": \"TestVPC\" } ]\n      }\n    },\n    \"eip0001\": {\n      \"Type\"       : \"AWS::EC2::EIP\",\n      \"Properties\" : { \"Domain\" : \"vpc\" }\n    },\n    \"eip0002\": {\n      \"Type\"       : \"AWS::EC2::EIP\",\n      \"Properties\" : { \"Domain\" : \"vpc\" }\n    },\n    \"subnetPub1\": {\n      \"Type\"       : \"AWS::EC2::Subnet\",\n      \"Properties\" : {\n        \"CidrBlock\"        : { \"Fn::Join\": [ \"\", [ { \"Ref\": \"VPCCIDR\" }, \".0.0/24\" ] ] },\n        \"AvailabilityZone\" : { \"Ref\" : \"AZ1\" },\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Public-Subnet-1\" } ]\n      }\n    },\n    \"subnetPub2\": {\n      \"Type\"       : \"AWS::EC2::Subnet\",\n      \"Properties\" : {\n        \"CidrBlock\"        : { \"Fn::Join\": [ \"\", [ { \"Ref\": \"VPCCIDR\" }, \".1.0/24\" ] ] },\n        \"AvailabilityZone\" : { \"Ref\" : \"AZ2\" },\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Public-Subnet-2\" } ]\n      }\n    },\n    \"subnetPrv1\": {\n      \"Type\"       : \"AWS::EC2::Subnet\",\n      \"Properties\" : {\n        \"CidrBlock\"        : { \"Fn::Join\": [ \"\", [ { \"Ref\": \"VPCCIDR\" }, \".2.0/24\" ] ] },\n        \"AvailabilityZone\" : { \"Ref\" : \"AZ1\" },\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Private-Subnet-1\" } ]\n      }\n    },\n    \"subnetPrv2\": {\n      \"Type\"       : \"AWS::EC2::Subnet\",\n      \"Properties\" : {\n        \"CidrBlock\"        : { \"Fn::Join\": [ \"\", [ { \"Ref\": \"VPCCIDR\" }, \".3.0/24\" ] ] },\n        \"AvailabilityZone\" : { \"Ref\" : \"AZ2\" },\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Private-Subnet-2\" } ]\n      }\n    },\n    \"Nat1\": {\n      \"Type\"       : \"AWS::EC2::NatGateway\",\n      \"Properties\" : {\n        \"AllocationId\"     : { \"Fn::GetAtt\" : [\"eip0001\", \"AllocationId\"] },\n        \"SubnetId\"         : { \"Ref\" : \"subnetPub1\" }\n      },\n      \"DependsOn\"  : \"eip0001\"\n    },\n    \"Nat2\": {\n      \"Type\"       : \"AWS::EC2::NatGateway\",\n      \"Properties\" : {\n        \"AllocationId\"     : { \"Fn::GetAtt\" : [\"eip0002\", \"AllocationId\"] },\n        \"SubnetId\"         : { \"Ref\" : \"subnetPub2\" }\n      },\n      \"DependsOn\"  : \"eip0002\"\n    },\n    \"IGW\": {\n      \"Type\"       : \"AWS::EC2::InternetGateway\",\n      \"Properties\" : {\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Test-IG\" } ]\n      }\n    },\n    \"RouteTablePub1\": {\n      \"Type\"           : \"AWS::EC2::RouteTable\",\n      \"Properties\"     : {\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Public-RT-A\" } ]\n      }\n    },\n    \"RouteTablePub2\": {\n      \"Type\"           : \"AWS::EC2::RouteTable\",\n      \"Properties\"     : {\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Public-RT-C\" } ]\n      }\n    },\n    \"RouteTablePrv1\": {\n      \"Type\"           : \"AWS::EC2::RouteTable\",\n      \"Properties\"     : {\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Private-RT-A\" } ]\n      }\n    },\n    \"RouteTablePrv2\": {\n      \"Type\"           : \"AWS::EC2::RouteTable\",\n      \"Properties\"     : {\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Private-RT-C\" } ]\n      }\n    },\n    \"gw1\": {\n      \"Type\"           : \"AWS::EC2::VPCGatewayAttachment\",\n      \"Properties\"     : {\n        \"VpcId\"             : { \"Ref\": \"vpc00\" },\n        \"InternetGatewayId\" : { \"Ref\": \"IGW\" }\n      }\n    },\n    \"subnetRoutePub1\": {\n      \"Type\"           : \"AWS::EC2::SubnetRouteTableAssociation\",\n      \"Properties\"     : {\n        \"RouteTableId\"     : { \"Ref\": \"RouteTablePub1\" },\n        \"SubnetId\"         : { \"Ref\": \"subnetPub1\" }\n      }\n    },\n    \"subnetRoutePub2\": {\n      \"Type\"           : \"AWS::EC2::SubnetRouteTableAssociation\",\n      \"Properties\"     : {\n        \"RouteTableId\"     : { \"Ref\": \"RouteTablePub2\" },\n        \"SubnetId\"         : { \"Ref\": \"subnetPub2\" }\n      }\n    },\n    \"subnetRoutePrv1\": {\n      \"Type\"           : \"AWS::EC2::SubnetRouteTableAssociation\",\n      \"Properties\"     : {\n        \"RouteTableId\"     : { \"Ref\": \"RouteTablePrv1\" },\n        \"SubnetId\"         : { \"Ref\": \"subnetPrv1\" }\n      }\n    },\n    \"subnetRoutePrv2\": {\n      \"Type\"           : \"AWS::EC2::SubnetRouteTableAssociation\",\n      \"Properties\"     : {\n        \"RouteTableId\"     : { \"Ref\": \"RouteTablePrv2\" },\n        \"SubnetId\"         : { \"Ref\": \"subnetPrv2\" }\n      }\n    },\n    \"routePub101\": {\n      \"Type\"           : \"AWS::EC2::Route\",\n      \"Properties\"     : {\n        \"DestinationCidrBlock\"  : \"0.0.0.0/0\",\n        \"RouteTableId\"          : { \"Ref\": \"RouteTablePub1\" },\n        \"GatewayId\"             : { \"Ref\": \"IGW\" }\n      },\n      \"DependsOn\"      : \"gw1\"\n    },\n    \"routePub201\": {\n      \"Type\"           : \"AWS::EC2::Route\",\n      \"Properties\"     : {\n        \"DestinationCidrBlock\"  : \"0.0.0.0/0\",\n        \"RouteTableId\"          : { \"Ref\": \"RouteTablePub2\" },\n        \"GatewayId\"             : { \"Ref\": \"IGW\" }\n      },\n      \"DependsOn\"      : \"gw1\"\n    },\n    \"routePrv101\": {\n      \"Type\"           : \"AWS::EC2::Route\",\n      \"Properties\"     : {\n        \"DestinationCidrBlock\"  : \"0.0.0.0/0\",\n        \"RouteTableId\"          : { \"Ref\": \"RouteTablePrv1\" },\n        \"NatGatewayId\"          : { \"Ref\" : \"Nat1\" }\n      },\n      \"DependsOn\"      : [ \"Nat1\" , \"subnetRoutePrv1\" ]\n    },\n    \"routePrv201\": {\n      \"Type\"           : \"AWS::EC2::Route\",\n      \"Properties\"     : {\n        \"DestinationCidrBlock\"  : \"0.0.0.0/0\",\n        \"RouteTableId\"          : { \"Ref\": \"RouteTablePrv2\" },\n        \"NatGatewayId\"          : { \"Ref\" : \"Nat2\" }\n      },\n      \"DependsOn\"      : [ \"Nat2\" , \"subnetRoutePrv2\" ]\n    },\n    \"dchpOpt\": {\n      \"Type\"           : \"AWS::EC2::DHCPOptions\",\n      \"Properties\"     : {\n        \"DomainName\"           : \"ec2.internal.com\",\n        \"DomainNameServers\"    : [ \"AmazonProvidedDNS\"]\n      }\n    },\n    \"dchpAssoc\": {\n      \"Type\"           : \"AWS::EC2::VPCDHCPOptionsAssociation\",\n      \"Properties\"     : {\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"DhcpOptionsId\"    : {\"Ref\" : \"dchpOpt\" }\n      },\n      \"DependsOn\"      : \"dchpOpt\"\n    }\n  }\n}\n\nMulti-AZ\u306eVPC\u74b0\u5883\u3092\u69cb\u6210\u3059\u308b\u3001CloudFormation\u306eTemplate\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\u4ee5\u4e0b\u306e\u9806\u3067Multi-AZ\u69cb\u6210\u3067\u5fc5\u8981\u3068\u306a\u308b\u5178\u578b\u7684\u306aNW\u74b0\u5883\u304c\u69cb\u7bc9\u3055\u308c\u307e\u3059\u3002\n\n\u30fbVPC\u4f5c\u6210\n\u30fbIGW\u4f5c\u6210\u30fb\u30a2\u30bf\u30c3\u30c1\n\u30fbSubnets\u4f5c\u6210\n\u30fbNAT Gateway\u306e\u4f5c\u6210\n\u30fbRouteTable\u4f5c\u6210\n\n\u69cb\u6210\n====\n\n![vpc.png](https://qiita-image-store.s3.amazonaws.com/0/111300/6ea2a1d1-ae8f-42e8-d06e-2d3601376fd7.png)\n\nVPC\u306eCIDR\u3001AZ\u306f\u69cb\u7bc9\u6642\u306eParameter\u306b\u3066\u4efb\u610f\u306b\u8a2d\u5b9a\u53ef\u80fd\u3067\u3059\u3002\n\u307e\u305f\u3001\u4efb\u610f\u306e\u30ea\u30fc\u30b8\u30e7\u30f3\u3067\u5229\u7528\u53ef\u80fd\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u4f7f\u3044\u65b9\n====\n\n\u30fb\u4e0b\u8a18\u306b\u3042\u308bTemplate\u3092\u4fdd\u5b58\u3057\u3001CloudFormation\u306e\"CreateStack\"\u304b\u3089\u30b9\u30bf\u30c3\u30af\u306e\u4f5c\u6210\u3092\u958b\u59cb\n\u30fbParameters\u3067\u4ee5\u4e0b\u3092\u5165\u529b\n\u3000- Multi-AZ\u3067\u4f7f\u7528\u3059\u308bAZ\u30922\u3064\u9078\u629e\uff08AZ1/AZ2\uff09\n\u3000- VPCCIDR\u306b\u4f5c\u6210\u3057\u305f\u3044\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\uff0810.* \u307e\u305f\u306f 172.16 \u301c 172.31 \u307e\u305f\u306f 192.168\uff09\n\u30fb\u4f5c\u6210\u5b8c\u4e86\u307e\u3067\u5f85\u3064\uff08NatGateway\u3067\u5c11\u3005\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\uff09\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-05-24 23.17.39.png](https://qiita-image-store.s3.amazonaws.com/0/111300/cae40fe3-4a5b-0cc5-98a4-4ebad83d274d.png)\n\nTemplate\n====\n\n````\n{\n  \"AWSTemplateFormatVersion\": \"2010-09-09\",\n  \"Description\": \"VPC Template For Multi-AZ\",\n  \"Parameters\": {\n    \"AZ1\" : {\n        \"Description\" : \"input Availability Zone 1\",\n        \"Type\"        : \"AWS::EC2::AvailabilityZone::Name\"\n    },\n    \"AZ2\" : {\n        \"Description\" : \"input Availability Zone 2\",\n        \"Type\"        : \"AWS::EC2::AvailabilityZone::Name\"\n    },\n    \"VPCCIDR\": {\n      \"AllowedPattern\" : \"^(\\\\d|[01]?\\\\d\\\\d|2[0-4]\\\\d|25[0-5])\\\\.(\\\\d|[01]?\\\\d\\\\d|2[0-4]\\\\d|25[0-5])\",\n      \"Default\"        : \"10.0\",\n      \"Description\"    : \"VPC CIDR (*.*.0.0/16)\",\n      \"Type\"           : \"String\"\n    }\n  },\n  \"Resources\": {\n    \"vpc00\": {\n      \"Type\"       : \"AWS::EC2::VPC\",\n      \"Properties\" : {\n        \"CidrBlock\"          : { \"Fn::Join\": [ \"\", [ { \"Ref\": \"VPCCIDR\" }, \".0.0/16\" ] ] },\n        \"InstanceTenancy\"    : \"default\",\n        \"EnableDnsSupport\"   : \"true\",\n        \"EnableDnsHostnames\" : \"false\",\n        \"Tags\"               : [ { \"Key\": \"Name\", \"Value\": \"TestVPC\" } ]\n      }\n    },\n    \"eip0001\": {\n      \"Type\"       : \"AWS::EC2::EIP\",\n      \"Properties\" : { \"Domain\" : \"vpc\" }\n    },\n    \"eip0002\": {\n      \"Type\"       : \"AWS::EC2::EIP\",\n      \"Properties\" : { \"Domain\" : \"vpc\" }\n    },\n    \"subnetPub1\": {\n      \"Type\"       : \"AWS::EC2::Subnet\",\n      \"Properties\" : {\n        \"CidrBlock\"        : { \"Fn::Join\": [ \"\", [ { \"Ref\": \"VPCCIDR\" }, \".0.0/24\" ] ] },\n        \"AvailabilityZone\" : { \"Ref\" : \"AZ1\" },\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Public-Subnet-1\" } ]\n      }\n    },\n    \"subnetPub2\": {\n      \"Type\"       : \"AWS::EC2::Subnet\",\n      \"Properties\" : {\n        \"CidrBlock\"        : { \"Fn::Join\": [ \"\", [ { \"Ref\": \"VPCCIDR\" }, \".1.0/24\" ] ] },\n        \"AvailabilityZone\" : { \"Ref\" : \"AZ2\" },\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Public-Subnet-2\" } ]\n      }\n    },\n    \"subnetPrv1\": {\n      \"Type\"       : \"AWS::EC2::Subnet\",\n      \"Properties\" : {\n        \"CidrBlock\"        : { \"Fn::Join\": [ \"\", [ { \"Ref\": \"VPCCIDR\" }, \".2.0/24\" ] ] },\n        \"AvailabilityZone\" : { \"Ref\" : \"AZ1\" },\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Private-Subnet-1\" } ]\n      }\n    },\n    \"subnetPrv2\": {\n      \"Type\"       : \"AWS::EC2::Subnet\",\n      \"Properties\" : {\n        \"CidrBlock\"        : { \"Fn::Join\": [ \"\", [ { \"Ref\": \"VPCCIDR\" }, \".3.0/24\" ] ] },\n        \"AvailabilityZone\" : { \"Ref\" : \"AZ2\" },\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Private-Subnet-2\" } ]\n      }\n    },\n    \"Nat1\": {\n      \"Type\"       : \"AWS::EC2::NatGateway\",\n      \"Properties\" : {\n        \"AllocationId\"     : { \"Fn::GetAtt\" : [\"eip0001\", \"AllocationId\"] },\n        \"SubnetId\"         : { \"Ref\" : \"subnetPub1\" }\n      },\n      \"DependsOn\"  : \"eip0001\"\n    },\n    \"Nat2\": {\n      \"Type\"       : \"AWS::EC2::NatGateway\",\n      \"Properties\" : {\n        \"AllocationId\"     : { \"Fn::GetAtt\" : [\"eip0002\", \"AllocationId\"] },\n        \"SubnetId\"         : { \"Ref\" : \"subnetPub2\" }\n      },\n      \"DependsOn\"  : \"eip0002\"\n    },\n    \"IGW\": {\n      \"Type\"       : \"AWS::EC2::InternetGateway\",\n      \"Properties\" : {\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Test-IG\" } ]\n      }\n    },\n    \"RouteTablePub1\": {\n      \"Type\"           : \"AWS::EC2::RouteTable\",\n      \"Properties\"     : {\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Public-RT-A\" } ]\n      }\n    },\n    \"RouteTablePub2\": {\n      \"Type\"           : \"AWS::EC2::RouteTable\",\n      \"Properties\"     : {\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Public-RT-C\" } ]\n      }\n    },\n    \"RouteTablePrv1\": {\n      \"Type\"           : \"AWS::EC2::RouteTable\",\n      \"Properties\"     : {\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Private-RT-A\" } ]\n      }\n    },\n    \"RouteTablePrv2\": {\n      \"Type\"           : \"AWS::EC2::RouteTable\",\n      \"Properties\"     : {\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"Tags\"             : [ { \"Key\": \"Name\", \"Value\": \"Private-RT-C\" } ]\n      }\n    },\n    \"gw1\": {\n      \"Type\"           : \"AWS::EC2::VPCGatewayAttachment\",\n      \"Properties\"     : {\n        \"VpcId\"             : { \"Ref\": \"vpc00\" },\n        \"InternetGatewayId\" : { \"Ref\": \"IGW\" }\n      }\n    },\n    \"subnetRoutePub1\": {\n      \"Type\"           : \"AWS::EC2::SubnetRouteTableAssociation\",\n      \"Properties\"     : {\n        \"RouteTableId\"     : { \"Ref\": \"RouteTablePub1\" },\n        \"SubnetId\"         : { \"Ref\": \"subnetPub1\" }\n      }\n    },\n    \"subnetRoutePub2\": {\n      \"Type\"           : \"AWS::EC2::SubnetRouteTableAssociation\",\n      \"Properties\"     : {\n        \"RouteTableId\"     : { \"Ref\": \"RouteTablePub2\" },\n        \"SubnetId\"         : { \"Ref\": \"subnetPub2\" }\n      }\n    },\n    \"subnetRoutePrv1\": {\n      \"Type\"           : \"AWS::EC2::SubnetRouteTableAssociation\",\n      \"Properties\"     : {\n        \"RouteTableId\"     : { \"Ref\": \"RouteTablePrv1\" },\n        \"SubnetId\"         : { \"Ref\": \"subnetPrv1\" }\n      }\n    },\n    \"subnetRoutePrv2\": {\n      \"Type\"           : \"AWS::EC2::SubnetRouteTableAssociation\",\n      \"Properties\"     : {\n        \"RouteTableId\"     : { \"Ref\": \"RouteTablePrv2\" },\n        \"SubnetId\"         : { \"Ref\": \"subnetPrv2\" }\n      }\n    },\n    \"routePub101\": {\n      \"Type\"           : \"AWS::EC2::Route\",\n      \"Properties\"     : {\n        \"DestinationCidrBlock\"  : \"0.0.0.0/0\",\n        \"RouteTableId\"          : { \"Ref\": \"RouteTablePub1\" },\n        \"GatewayId\"             : { \"Ref\": \"IGW\" }\n      },\n      \"DependsOn\"      : \"gw1\"\n    },\n    \"routePub201\": {\n      \"Type\"           : \"AWS::EC2::Route\",\n      \"Properties\"     : {\n        \"DestinationCidrBlock\"  : \"0.0.0.0/0\",\n        \"RouteTableId\"          : { \"Ref\": \"RouteTablePub2\" },\n        \"GatewayId\"             : { \"Ref\": \"IGW\" }\n      },\n      \"DependsOn\"      : \"gw1\"\n    },\n    \"routePrv101\": {\n      \"Type\"           : \"AWS::EC2::Route\",\n      \"Properties\"     : {\n        \"DestinationCidrBlock\"  : \"0.0.0.0/0\",\n        \"RouteTableId\"          : { \"Ref\": \"RouteTablePrv1\" },\n        \"NatGatewayId\"          : { \"Ref\" : \"Nat1\" }\n      },\n      \"DependsOn\"      : [ \"Nat1\" , \"subnetRoutePrv1\" ]\n    },\n    \"routePrv201\": {\n      \"Type\"           : \"AWS::EC2::Route\",\n      \"Properties\"     : {\n        \"DestinationCidrBlock\"  : \"0.0.0.0/0\",\n        \"RouteTableId\"          : { \"Ref\": \"RouteTablePrv2\" },\n        \"NatGatewayId\"          : { \"Ref\" : \"Nat2\" }\n      },\n      \"DependsOn\"      : [ \"Nat2\" , \"subnetRoutePrv2\" ]\n    },\n    \"dchpOpt\": {\n      \"Type\"           : \"AWS::EC2::DHCPOptions\",\n      \"Properties\"     : {\n        \"DomainName\"           : \"ec2.internal.com\",\n        \"DomainNameServers\"    : [ \"AmazonProvidedDNS\"]\n      }\n    },\n    \"dchpAssoc\": {\n      \"Type\"           : \"AWS::EC2::VPCDHCPOptionsAssociation\",\n      \"Properties\"     : {\n        \"VpcId\"            : { \"Ref\": \"vpc00\" },\n        \"DhcpOptionsId\"    : {\"Ref\" : \"dchpOpt\" }\n      },\n      \"DependsOn\"      : \"dchpOpt\"\n    }\n  }\n}\n````\n", "tags": ["AWS", "vpc", "CloudFormation"]}