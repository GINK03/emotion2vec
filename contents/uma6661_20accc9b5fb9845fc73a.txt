{"context": "\n\n\u6982\u8981\n\u672c\u30a8\u30f3\u30c8\u30ea\u30fc\u306fGPU\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u98db\u3070\u3059\u305f\u3081\u306b\u7b46\u8005\u304c\u52c9\u5f37\u3057\u305f\u8ecc\u8de1\u3067\u3059\u3002\n\n\u672c\u30a8\u30f3\u30c8\u30ea\u30fc\u306e\u5bfe\u8c61\u8005\n\n\u30b7\u30a7\u30fc\u30c0\u30fc\u304c\u4f55\u306a\u306e\u304b\u306f\u77e5\u3063\u3066\u308b\n\u3061\u3087\u3063\u3068\u304f\u3089\u3044\u306a\u3089GLSL\u66f8\u3044\u305f\u3053\u3068\u3042\u308b\n\u3060\u3051\u3069GPU\u306b\u6f14\u7b97\u3092\u3055\u305b\u308b\u306e\u306f\u3084\u3063\u305f\u3053\u3068\u306a\u3044\n\u30b5\u30f3\u30d7\u30eb\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u308f\u3051\u308f\u304b\u3089\u3093\n\n\u3053\u3093\u306a\u4eba\u3092\u60f3\u5b9a\u3057\u3066\u66f8\u3044\u3066\u307e\u3059\u3002\nGLSL\u306b\u3064\u3044\u3066\u306e\u57fa\u672c\u4e2d\u306e\u57fa\u672c\u306b\u3064\u3044\u3066\u306f\u89e3\u8aac\u3057\u307e\u305b\u3093\u3002\n\u305d\u3053\u3089\u3078\u3093\u304c\u307e\u3060\u308f\u304b\u3089\u306a\u3044\u65b9\u306f\u672c\u30a8\u30f3\u30c8\u30ea\u30fc\u306b\u3064\u3044\u3066\u306f\u3055\u3089\u3063\u3068\u76ee\u3092\u3068\u304a\u3057\u3066\u3001\n\u521d\u5fc3\u8005\u5411\u3051\u306e\u5b66\u7fd2\u8cc7\u6599\u3092\u8aad\u307f\u6f01\u3063\u3066\u304f\u3060\u3055\u3044\uff01\n\nGPGPU\u3067\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u305f\u304f\u3055\u3093\u98db\u3070\u3057\u305f\u3044\u304b\u3089\u30b5\u30f3\u30d7\u30eb\u3092\u8997\u3044\u3066\u307f\u308b\n\nthree.js\u306e\u7d20\u6674\u3089\u3057\u3044\u30b5\u30f3\u30d7\u30eb\u9054\n\nhttps://threejs.org/examples/webgl_gpgpu_birds.html\n\nhttps://threejs.org/examples/webgl_gpgpu_protoplanet.html\n\nhttps://threejs.org/examples/webgl_gpgpu_water.html\n\n\u30b5\u30f3\u30d7\u30eb\u304c\u3080\u305a\u304b\u3057\u3044\n\n\u8907\u96d1\u306a\u6570\u5b66\u7684\u8981\u7d20\u304c\u30b3\u30fc\u30c9\u306e\u8aad\u89e3\u306e\u90aa\u9b54\n\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u98db\u3070\u3057\u305f\u3044\u3060\u3051\u3060\u3063\u3064\u306e\n\n\u7d50\u5c40\u3053\u306e\u306a\u304b\u3067\u3082\u6bd4\u8f03\u7684\u7c21\u5358\u305d\u3046\u306a\u91cd\u529b\u3068\u304b\u3092\u8a08\u7b97\u3057\u3066\u308b\u3053\u3044\u3064\u3092\u89e3\u8aad\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3002\nhttps://threejs.org/examples/webgl_gpgpu_protoplanet.html\n\n\u305d\u3082\u305d\u3082\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u5c02\u7528\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u3042\u308b\u304b\u3089\u305d\u308c\u4f7f\u3048\u3070\uff1f\u3063\u3066\u3044\u3046\u30c4\u30c3\u30b3\u30df\u304c\u6765\u305d\u3046\u3067\u3059\u3051\u3069\u3001\u79c1\u306f\u5f53\u6642\u3001\u4e00\u304b\u3089\u4f5c\u308a\u305f\u304b\u3063\u305f\u306e\u3067\u3059\u3002\u52c9\u5f37\u3082\u517c\u306d\u3066\u3002\n\n\u524a\u308a\u306b\u524a\u3063\u3066\u30e9\u30f3\u30c0\u30e0\u306b\u98db\u3076\u3060\u3051\u306e\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306b\u3057\u3066\u307f\u305f\uff01\n\n\u4eca\u56de\u306f\u3053\u308c\u3092\u76ee\u6307\u3057\u307e\u3059\u3002\n\u306a\u3093\u306825\u4e07\u3064\u3076\u3064\u3076\u3067\u3059\uff01\n\n\u30b7\u30a7\u30fc\u30c0\u30fc\u3067\u6f14\u7b97\u3059\u308b\u3068\u3044\u3046\u306e\u306f\u3069\u3046\u3044\u3046\u3053\u3068\u304b\n\n\u3059\u3054\u3044\u3056\u3063\u304f\u308a\u3057\u305f\u89e3\u8aac\u3002\u3053\u3053\u307e\u3067\u306f\u307e\u3042\u308f\u304b\u308b\u3002\n\u3057\u304b\u3057\u30b7\u30a7\u30fc\u30c0\u30fc\u3092\u3061\u3087\u3053\u3061\u3087\u3053\u3044\u3058\u3063\u305f\u3053\u3068\u304c\u6709\u308b\u4eba\u306a\u3089\u308f\u304b\u308b\u304c\u3001\u914d\u5217\u306a\u3093\u304b\u3092\u7528\u610f\u3057\u3066\u3055\u304f\u3063\u3068\u60c5\u5831\u3092\u9023\u756a\u3067\u4fdd\u5b58\u3059\u308b\u3053\u3068\u304c\u96e3\u3057\u3044\u2026\u3002\n\u3053\u3053\u3067\u30c6\u30af\u30b9\u30c1\u30e3\u306e\u767b\u5834\u3067\u3042\u308b\u3002\u30c6\u30af\u30b9\u30c1\u30e3\u306frgba\u306e\u60c5\u5831\u3092\u683c\u7d0d\u3059\u308b\u305f\u3081\u306e\u3082\u306e\u3060\u304c\u3001\u4eca\u56de\u306f\u3080\u308a\u3084\u308axyzw\u3068\u8a00\u3063\u305f\u611f\u3058\u3067\u5ea7\u6a19\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306b\u5229\u7528\u3055\u305b\u3066\u9802\u304d\u307e\u3059\u3002\n\u305d\u3057\u3066\u3053\u306e\u30c6\u30af\u30b9\u30c1\u30e3\u304c\u8907\u6570\u3042\u308c\u3070\u2026\n\n\u3053\u3093\u306a\u611f\u3058\u306b\u3067\u30ef\u30f3\u30d5\u30ec\u30fc\u30e0\u3054\u3068\u306b\u30d4\u30f3\u30dd\u30f3\u3092\u7e70\u308a\u8fd4\u3059\u3053\u3068\u3067\u3001\u81ea\u7531\u306a\u6f14\u7b97\u304c\u3067\u304d\u307e\u3059\u3002\nJavaScript\u3060\u3051\u3060\u3068\u3001\u4f55\u4e07\u3068\u3044\u3046\u9802\u70b9\u60c5\u5831\u304c\u683c\u7d0d\u3055\u308c\u305f\u914d\u5217\u3092for\u6587\u3067\u56de\u3057\u3066\u914d\u5217\u306e\u4e2d\u3092\u66f8\u304d\u63db\u3048\u3066\u3044\u304f\u308f\u3051\u3067\u3059\u304c\u3001\n\u3053\u308c\u3092GPU\u5074\u3067\u4e26\u5217\u306b\u30c9\u30ab\u30f3\u3068\u51e6\u7406\u3057\u3066\u3057\u307e\u304a\u3046\u3068\u3044\u3046\u3082\u306e\u3002\n\n\u809d\u5fc3\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <title>three.js webgl - gpgpu - protoplanet</title>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0\">\n    <style>\n        body {\n            background-color: #000000;\n            margin: 0px;\n            overflow: hidden;\n            font-family:Monospace;\n            font-size:13px;\n            text-align:center;\n            text-align:center;\n            cursor: pointer;\n        }\n        a {\n            color:#0078ff;\n        }\n        #info {\n            color: #ffffff;\n            position: absolute;\n            top: 10px;\n            width: 100%;\n        }\n    </style>\n</head>\n<body>\n\n\n\n<script src=\"./js/three.js\"></script>\n<script src=\"js/Detector.js\"></script>\n<script src=\"js/stats.min.js\"></script>\n<script src=\"js/dat.gui.min.js\"></script>\n<script src=\"js/OrbitControls.js\"></script>\n\n<script src=\"js/GPUComputationRenderer.js\"></script>\n\n\n<!-- Fragment shader for protoplanet's position -->\n<script id=\"computeShaderPosition\" type=\"x-shader/x-fragment\">\n            // \u73fe\u5728\u306e\u4f4d\u7f6e\u60c5\u5831\u3092\u6c7a\u5b9a\u3059\u308b\n            #define delta ( 1.0 / 60.0 )\n            void main() {\n                vec2 uv = gl_FragCoord.xy / resolution.xy;\n                vec4 tmpPos = texture2D( texturePosition, uv );\n                vec3 pos = tmpPos.xyz;\n                vec4 tmpVel = texture2D( textureVelocity, uv );\n                // vel\u304c\u79fb\u52d5\u3059\u308b\u65b9\u5411(\u3082\u3046\u4e00\u3064\u4e0b\u306ecomputeShaderVelocity\u3092\u53c2\u7167)\n                vec3 vel = tmpVel.xyz;\n\n                // \u79fb\u52d5\u3059\u308b\u65b9\u5411\u306b\u901f\u5ea6\u3092\u639b\u3051\u5408\u308f\u305b\u305f\u6570\u5024\u3092\u73fe\u5728\u5730\u306b\u52a0\u3048\u308b\u3002\n                pos += vel * delta;\n                gl_FragColor = vec4( pos, 1.0 );\n            }\n        </script>\n\n<!-- Fragment shader for protoplanet's velocity -->\n<script id=\"computeShaderVelocity\" type=\"x-shader/x-fragment\">\n\n            // \u79fb\u52d5\u65b9\u5411\u306b\u3064\u3044\u3066\u3044\u308d\u3044\u308d\u8a08\u7b97\u3067\u304d\u308b\u30b7\u30a7\u30fc\u30c0\u30fc\u3002\n            // \u4eca\u56de\u306f\u306a\u306b\u3082\u3057\u3066\u306a\u3044\u3002\n            // \u3053\u3053\u3067Vel\u306ex y z\u306b\u3064\u3044\u3066\u60c5\u5831\u3092\u4e0a\u66f8\u304d\u3059\u308b\u3068\u3001\u305d\u308c\u306b\u5fdc\u3058\u3066\u79fb\u52d5\u65b9\u5411\u304c\u5909\u308f\u308b\n            #include <common>\n\n            void main() {\n                vec2 uv = gl_FragCoord.xy / resolution.xy;\n                float idParticle = uv.y * resolution.x + uv.x;\n                vec4 tmpVel = texture2D( textureVelocity, uv );\n                vec3 vel = tmpVel.xyz;\n\n                gl_FragColor = vec4( vel.xyz, 1.0 );\n            }\n        </script>\n\n<!-- Particles vertex shader -->\n<script type=\"x-shader/x-vertex\" id=\"particleVertexShader\">\n\n\n            #include <common>\n            uniform sampler2D texturePosition;\n            uniform float cameraConstant;\n            uniform float density;\n            varying vec4 vColor;\n            varying vec2 vUv;\n            uniform float radius;\n\n\n\n            void main() {\n                vec4 posTemp = texture2D( texturePosition, uv );\n                vec3 pos = posTemp.xyz;\n                vColor = vec4( 1.0, 0.7, 1.0, 1.0 );\n\n                // \u30dd\u30a4\u30f3\u30c8\u306e\u30b5\u30a4\u30ba\u3092\u6c7a\u5b9a\n                vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );\n                gl_PointSize = 0.5 * cameraConstant / ( - mvPosition.z );\n\n                // uv\u60c5\u5831\u306e\u5f15\u304d\u6e21\u3057\n                vUv = uv;\n\n                // \u5909\u63db\u3057\u3066\u683c\u7d0d\n                gl_Position = projectionMatrix * mvPosition;\n            }\n        </script>\n\n<!-- Particles fragment shader -->\n<script type=\"x-shader/x-fragment\" id=\"particleFragmentShader\">\n            // VertexShader\u304b\u3089\u53d7\u3051\u53d6\u3063\u305f\u8272\u3092\u683c\u7d0d\u3059\u308b\u3060\u3051\u3002\n            varying vec4 vColor;\n            void main() {\n\n                // \u4e38\u3044\u5f62\u306b\u8272\u3092\u306c\u308b\u305f\u3081\u306e\u8a08\u7b97\n                float f = length( gl_PointCoord - vec2( 0.5, 0.5 ) );\n                if ( f > 0.1 ) {\n                    discard;\n                }\n                gl_FragColor = vColor;\n            }\n        </script>\n\n\n<script>\n    if ( ! Detector.webgl ) Detector.addGetWebGLMessage();\n    // \u4eca\u56de\u306f25\u4e07\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u52d5\u304b\u3059\u3053\u3068\u306b\u6311\u6226\n    // \u306a\u306e\u30671\u8fba\u304c500\u306e\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u4f5c\u308b\u3002\n    // 500 * 500 = 250000\n    var WIDTH = 500;\n    var PARTICLES = WIDTH * WIDTH;\n\n    // \u30e1\u30e2\u30ea\u8ca0\u8377\u78ba\u8a8d\u7528\n    var stats;\n\n    // \u57fa\u672c\u30bb\u30c3\u30c8\n    var container, camera, scene, renderer, geometry, controls;\n\n\n\n\n\n    // gpgpu\u3092\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u9054\n    var gpuCompute;\n    var velocityVariable;\n    var positionVariable;\n    var positionUniforms;\n    var velocityUniforms;\n    var particleUniforms;\n    var effectController;\n\n    init();\n    animate();\n    function init() {\n\n\n        // \u4e00\u822c\u7684\u306aThree.js\u306b\u304a\u3051\u308b\u5b9a\u7fa9\u90e8\u5206\n        container = document.createElement( 'div' );\n        document.body.appendChild( container );\n        camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 5, 15000 );\n        camera.position.y = 120;\n        camera.position.z = 200;\n        scene = new THREE.Scene();\n        renderer = new THREE.WebGLRenderer();\n        renderer.setClearColor( 0x000000 );\n        renderer.setPixelRatio( window.devicePixelRatio );\n        renderer.setSize( window.innerWidth, window.innerHeight );\n        container.appendChild( renderer.domElement );\n        controls = new THREE.OrbitControls( camera, renderer.domElement );\n        stats = new Stats();\n        container.appendChild( stats.dom );\n        window.addEventListener( 'resize', onWindowResize, false );\n\n\n        // ***** \u3053\u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u306b\u3064\u3044\u3066\u306f\u5f8c\u8ff0 ***** //\n//        effectController = {\n//            time: 0.0,\n//        };\n\n\n        // \u2460gpuCopute\u7528\u306eRender\u3092\u4f5c\u308b\n        initComputeRenderer();\n\n        // \u2461particle \u521d\u671f\u5316\n        initPosition();\n\n    }\n\n\n    // \u2460gpuCopute\u7528\u306eRender\u3092\u4f5c\u308b\n    function initComputeRenderer() {\n\n        // gpgpu\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u683c\u7d0d\n        gpuCompute = new GPUComputationRenderer( WIDTH, WIDTH, renderer );\n\n        // \u4eca\u56de\u306f\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u4f4d\u7f6e\u60c5\u5831\u3068\u3001\u79fb\u52d5\u65b9\u5411\u3092\u4fdd\u5b58\u3059\u308b\u30c6\u30af\u30b9\u30c1\u30e3\u30922\u3064\u7528\u610f\u3057\u307e\u3059\n        var dtPosition = gpuCompute.createTexture();\n        var dtVelocity = gpuCompute.createTexture();\n\n        // \u30c6\u30af\u30b9\u30c1\u30e3\u306bGPU\u3067\u8a08\u7b97\u3059\u308b\u305f\u3081\u306b\u521d\u671f\u60c5\u5831\u3092\u57cb\u3081\u3066\u3044\u304f\n        fillTextures( dtPosition, dtVelocity );\n\n        // shader\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30a2\u30bf\u30c3\u30c1\n        velocityVariable = gpuCompute.addVariable( \"textureVelocity\", document.getElementById( 'computeShaderVelocity' ).textContent, dtVelocity );\n        positionVariable = gpuCompute.addVariable( \"texturePosition\", document.getElementById( 'computeShaderPosition' ).textContent, dtPosition );\n\n        // \u4e00\u9023\u306e\u95a2\u4fc2\u6027\u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u306e\u304a\u307e\u3058\u306a\u3044\n        gpuCompute.setVariableDependencies( velocityVariable, [ positionVariable, velocityVariable ] );\n        gpuCompute.setVariableDependencies( positionVariable, [ positionVariable, velocityVariable ] );\n\n\n        // uniform\u5909\u6570\u3092\u767b\u9332\u3057\u305f\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f5c\u308b\n        /*\n        positionUniforms = positionVariable.material.uniforms;\n        velocityUniforms = velocityVariable.material.uniforms;\n\n        velocityUniforms.time = { value: 0.0 };\n        positionUniforms.time = { ValueB: 0.0 };\n        ***********************************\n        \u305f\u3068\u3048\u3070\u3001\u4e0a\u3067\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u3066\u3044\u308beffectController\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306etime\u3092\n        \u308f\u305f\u3057\u3066\u3042\u3052\u308c\u3070\u3001effectController.time\u3092\u66f4\u65b0\u3059\u308c\u3070uniform\u5909\u6570\u3082\u5909\u308f\u3063\u305f\u308a\u3001\u3068\u3044\u3046\u3053\u3068\u304c\u3067\u304d\u308b\n        velocityUniforms.time = { value: effectController.time };\n        ************************************\n        */\n\n        // error\u51e6\u7406\n        var error = gpuCompute.init();\n        if ( error !== null ) {\n            console.error( error );\n        }\n    }\n\n    // restart\u7528\u95a2\u6570 \u4eca\u56de\u306f\u4f7f\u308f\u306a\u3044\n    function restartSimulation() {\n        var dtPosition = gpuCompute.createTexture();\n        var dtVelocity = gpuCompute.createTexture();\n        fillTextures( dtPosition, dtVelocity );\n        gpuCompute.renderTexture( dtPosition, positionVariable.renderTargets[ 0 ] );\n        gpuCompute.renderTexture( dtPosition, positionVariable.renderTargets[ 1 ] );\n        gpuCompute.renderTexture( dtVelocity, velocityVariable.renderTargets[ 0 ] );\n        gpuCompute.renderTexture( dtVelocity, velocityVariable.renderTargets[ 1 ] );\n    }\n\n    // \u2461\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u305d\u306e\u3082\u306e\u306e\u60c5\u5831\u3092\u6c7a\u3081\u3066\u3044\u304f\u3002\n    function initPosition() {\n\n        // \u6700\u7d42\u7684\u306b\u8a08\u7b97\u3055\u308c\u305f\u7d50\u679c\u3092\u53cd\u6620\u3059\u308b\u305f\u3081\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002\n        // \u4f4d\u7f6e\u60c5\u5831\u306fShader\u5074(texturePosition, textureVelocity)\n        // \u3067\u6c7a\u5b9a\u3055\u308c\u308b\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u9069\u5f53\u306b\u3046\u3081\u3061\u3083\u3063\u3066OK\n\n        geometry = new THREE.BufferGeometry();\n        var positions = new Float32Array( PARTICLES * 3 );\n        var p = 0;\n        for ( var i = 0; i < PARTICLES; i++ ) {\n            positions[ p++ ] = 0;\n            positions[ p++ ] = 0;\n            positions[ p++ ] = 0;\n        }\n\n        // uv\u60c5\u5831\u306e\u6c7a\u5b9a\u3002\u30c6\u30af\u30b9\u30c1\u30e3\u304b\u3089\u60c5\u5831\u3092\u53d6\u308a\u51fa\u3059\u3068\u304d\u306b\u5fc5\u8981\n        var uvs = new Float32Array( PARTICLES * 2 );\n        p = 0;\n        for ( var j = 0; j < WIDTH; j++ ) {\n            for ( var i = 0; i < WIDTH; i++ ) {\n                uvs[ p++ ] = i / ( WIDTH - 1 );\n                uvs[ p++ ] = j / ( WIDTH - 1 );\n            }\n        }\n\n        // attribute\u3092geometry\u306b\u767b\u9332\u3059\u308b\n        geometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\n        geometry.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\n\n\n        // uniform\u5909\u6570\u3092\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u5b9a\u7fa9\n        // \u4eca\u56de\u306f\u30ab\u30e1\u30e9\u3092\u30de\u30a6\u30b9\u3067\u3044\u3058\u308c\u308b\u3088\u3046\u306b\u3001\u8a08\u7b97\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3082\u308f\u305f\u3059\u3002\n        particleUniforms = {\n            texturePosition: { value: null },\n            textureVelocity: { value: null },\n            cameraConstant: { value: getCameraConstant( camera ) }\n        };\n\n\n\n        // Shader\u30de\u30c6\u30ea\u30a2\u30eb \u3053\u308c\u306f\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u305d\u306e\u3082\u306e\u306e\u63cf\u5199\u306b\u5fc5\u8981\u306a\u30b7\u30a7\u30fc\u30c0\u30fc\n        var material = new THREE.ShaderMaterial( {\n            uniforms:       particleUniforms,\n            vertexShader:   document.getElementById( 'particleVertexShader' ).textContent,\n            fragmentShader: document.getElementById( 'particleFragmentShader' ).textContent\n        });\n        material.extensions.drawBuffers = true;\n        var particles = new THREE.Points( geometry, material );\n        particles.matrixAutoUpdate = false;\n        particles.updateMatrix();\n\n        // \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u30b7\u30fc\u30f3\u306b\u8ffd\u52a0\n        scene.add( particles );\n    }\n\n\n    function fillTextures( texturePosition, textureVelocity ) {\n\n        // texture\u306e\u30a4\u30e1\u30fc\u30b8\u30c7\u30fc\u30bf\u3092\u3044\u3063\u305f\u3093\u53d6\u308a\u51fa\u3059\n        var posArray = texturePosition.image.data;\n        var velArray = textureVelocity.image.data;\n\n        // \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u521d\u671f\u306e\u4f4d\u7f6e\u306f\u3001\u30e9\u30f3\u30c0\u30e0\u306aXZ\u306b\u5e73\u9762\u304a\u304f\u3002\n        // \u677f\u72b6\u306e\u6b63\u65b9\u5f62\u304c\u63cf\u304b\u308c\u308b\n\n        for ( var k = 0, kl = posArray.length; k < kl; k += 4 ) {\n            // Position\n            var x, y, z;\n            x = Math.random()*500-250;\n            z = Math.random()*500-250;\n            y = 0;\n            // posArray\u306e\u5b9f\u614b\u306f\u4e00\u6b21\u5143\u914d\u5217\u306a\u306e\u3067\n            // x,y,z,w\u306e\u9806\u756a\u306b\u57cb\u3081\u3066\u3044\u304f\u3002\n            // w\u306f\u4eca\u56de\u306f\u4f7f\u7528\u3057\u306a\u3044\u304c\u3001\u914d\u5217\u306e\u9806\u756a\u306a\u3069\u3092\u57cb\u3081\u3066\u304a\u304f\u3068\u3044\u308d\u3044\u308d\u4f7f\u3048\u3066\u4fbf\u5229\n            posArray[ k + 0 ] = x;\n            posArray[ k + 1 ] = y;\n            posArray[ k + 2 ] = z;\n            posArray[ k + 3 ] = 0;\n\n            // \u79fb\u52d5\u3059\u308b\u65b9\u5411\u306f\u3068\u308a\u3042\u3048\u305a\u30e9\u30f3\u30c0\u30e0\u306b\u6c7a\u3081\u3066\u307f\u308b\u3002\n            // \u3053\u308c\u3067\u30e9\u30f3\u30c0\u30e0\u306a\u65b9\u5411\u306b\u3068\u3076\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u304c\u51fa\u6765\u4e0a\u304c\u308b\u306f\u305a\u3002\n            velArray[ k + 0 ] = Math.random()*2-1;\n            velArray[ k + 1 ] = Math.random()*2-1;\n            velArray[ k + 2 ] = Math.random()*2-1;\n            velArray[ k + 3 ] = Math.random()*2-1;\n        }\n    }\n\n\n\n    // \u30ab\u30e1\u30e9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30b7\u30a7\u30fc\u30c0\u30fc\u306b\u6e21\u3057\u305f\u3044\u60c5\u5831\u3092\u5f15\u3063\u5f35\u3063\u3066\u304f\u308b\u95a2\u6570\n    // \u30ab\u30e1\u30e9\u304b\u3089\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u304c\u3069\u308c\u3060\u3051\u96e2\u308c\u3066\u308b\u304b\u3092\u8a08\u7b97\u3057\u3001\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u5927\u304d\u3055\u3092\u6c7a\u5b9a\u3059\u308b\u305f\u3081\u3002\n    function getCameraConstant( camera ) {\n        return window.innerHeight / ( Math.tan( THREE.Math.DEG2RAD * 0.5 * camera.fov ) / camera.zoom );\n    }\n\n\n\n    // \u753b\u9762\u304c\u30ea\u30b5\u30a4\u30ba\u3055\u308c\u305f\u3068\u304d\u306e\u51e6\u7406\n    // \u3053\u3053\u3067\u3082\u30b7\u30a7\u30fc\u30c0\u30fc\u5074\u306b\u60c5\u5831\u3092\u6e21\u3059\u3002\n    function onWindowResize() {\n        camera.aspect = window.innerWidth / window.innerHeight;\n        camera.updateProjectionMatrix();\n        renderer.setSize( window.innerWidth, window.innerHeight );\n        particleUniforms.cameraConstant.value = getCameraConstant( camera );\n    }\n\n\n    function animate() {\n        requestAnimationFrame( animate );\n        render();\n        stats.update();\n    }\n\n\n\n    function render() {\n        gpuCompute.compute();\n\n        // Three.js\u7528\u306eGPGPU\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u60c5\u5831\u3092\u66f4\u65b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n        // \u73fe\u5728\u306e\u60c5\u5831\u3092\u3001\u4fdd\u5b58\u7528\u306e\u30e1\u30e2\u30ea\u306b\u683c\u7d0d\u3059\u308b\u304a\u307e\u3058\u306a\u3044\u3002\n        particleUniforms.texturePosition.value = gpuCompute.getCurrentRenderTarget( positionVariable ).texture;\n        particleUniforms.textureVelocity.value = gpuCompute.getCurrentRenderTarget( velocityVariable ).texture;\n        renderer.render( scene, camera );\n    }\n</script>\n</body>\n\n\u30b5\u30f3\u30d7\u30eb\u306b\u76ee\u3092\u901a\u3057\u305f\u65b9\u306a\u3089\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3051\u3063\u3053\u3046\u30c0\u30a4\u30a8\u30c3\u30c8\u306b\u6210\u529f\u3057\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306b\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002\n\u9069\u5b9c\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u3044\u308c\u3066\u304a\u308a\u307e\u3059\u304c\u3001GPGPU\u3042\u305f\u308a\u3092\u7d30\u304b\u304f\u89e3\u8aac\u3057\u3066\u3044\u304f\u3068\u6587\u5b57\u91cf\u304c\u3068\u3093\u3067\u3082\u306a\u304f\u306a\u308b\u306e\u3067\u3001\n\u3053\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306b\u306a\u308b\u3088\u3046\u306b\nhttps://threejs.org/examples/webgl_gpgpu_protoplanet.html\n\u3053\u306e\u30b5\u30f3\u30d7\u30eb\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u524a\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff01\u305d\u3046\u3059\u308c\u3070\u306a\u3093\u3068\u306a\u304f\u308f\u304b\u3063\u3066\u304d\u307e\u3059\u3002\n\u3053\u306e\u9818\u57df\u307e\u3067\u304f\u308b\u3068\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u90e8\u5206\u3054\u3068\u306b\u7834\u58ca\u3057\u3066\u8868\u793a\u7d50\u679c\u304c\u3069\u3046\u5909\u5316\u3059\u308b\u304b\u3092\u4f53\u9a13\u3057\u305f\u307b\u3046\u304c\u7406\u89e3\u304c\u901f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u3042\u3068doxas\u3055\u3093\u306e\u8cc7\u6599\u3082\u304a\u3059\u3059\u3081\u3067\u3059\u3002\nGPGPU \u3067\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u5927\u91cf\u306b\u63cf\u304f\n\n\u3068\u306f\u3044\u3048\u3001\u4e00\u5fdc\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u3056\u3063\u304f\u308a\u89e3\u8aac\n\u4eca\u56de\u7528\u610f\u3057\u305f\u30b7\u30a7\u30fc\u30c0\u30fc\u306f\uff13\u3064\u3067\u3059\n\n\u9802\u70b9\u60c5\u5831\u306e\u30b7\u30a7\u30fc\u30c0\u30fc\uff08computeShaderPosition : fragment\u306e\u307f\uff09\n\u79fb\u52d5\u65b9\u5411\u3092\u6c7a\u5b9a\u3059\u308b\u30b7\u30a7\u30fc\u30c0\u30fc\uff08computeShaderVelocity : fragment\u306e\u307f\uff09\n\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u63cf\u5199\u3059\u308b\u305f\u3081\u306e\u30b7\u30a7\u30fc\u30c0\u30fc\uff08particleVertexShader\u3068particleFragmentShader\uff09\n\n\u91cd\u8981\u306a\u306e\u306f\u4e0a\u306e\uff12\u3064\u3067\u3001\u4e00\u756a\u4e0a\u304c\u9802\u70b9\u60c5\u5831\u3092\u30ef\u30f3\u30d5\u30ec\u30fc\u30e0\u3054\u3068\u306b\u8a18\u9332\u3059\u308b\u30e1\u30e2\u30ea\u306e\u5f79\u5272\u3092\u3057\u307e\u3059\u3002\n\uff12\u756a\u3081(computeShaderVelocity)\u3067\u79fb\u52d5\u65b9\u5411\u3092\u6c7a\u5b9a\u3057\u307e\u3059\u3002\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u52d5\u304d\u306f\u3053\u3053\u3067\u5236\u5fa1\u3067\u304d\u308b\u306e\u3067\u3001\u305f\u3081\u306b\u3057computeShaderVelocity\u306b\nvel.y = 0.0;\nvel.z = 0.0;\n\n\u4ee5\u4e0a\u306e\u30b3\u30fc\u30c9\u3092vel\u304c\u5ba3\u8a00\u3055\u308c\u305f\u5f8c\u306b\u8ffd\u8a18\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u305d\u3046\u3059\u308b\u3068\u2026\n\nx\u65b9\u5411\u306e\u52d5\u304d\u3060\u3051\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u306a\u3093\u3068\u306a\u304f\u308f\u304b\u3063\u3066\u304d\u307e\u3057\u305f\u304b\uff1f\n\n\u767a\u5c55\u7cfb\n\n\n\nhttps://murasaki-uma.github.io/webgl_vj/frame.html\n\u30b5\u30f3\u30d7\u30eb\u30da\u30fc\u30b8\u3067\u306f \n\"<\"\u30ad\u30fc\u3067\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u30b9\u30bf\u30fc\u30c8\n\">\"\u30ad\u30fc\u3092\u62bc\u3057\u3066\u308b\u9593\u306f\u30b9\u30d4\u30fc\u30c9\u30c0\u30a6\u30f3\n\u3068\u3044\u3046\u8a2d\u5b9a\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u5c11\u3057\u904a\u3093\u3067\u304f\u3060\u3055\u3044\u3002MBP2015\u7a0b\u5ea6\u306a\u3089\u666e\u901a\u306b\u52d5\u304f\u306f\u305a\u3067\u3059\u3002\n\u89e3\u8aac\u306f\u4ee5\u4e0a\u3067\u3059\uff01\u60c5\u5831\u304c\u307e\u3060\u8db3\u308a\u306a\u3044\u3068\u3044\u3046\u65b9\u306f\u9060\u616e\u306a\u304f\u30b3\u30e1\u30f3\u30c8\u6b04\u3084Twitter\u306e\u65b9\u304b\u3089\u8cea\u554f\u3092\u98db\u3070\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u307e\u305f\u3001\u30b7\u30a7\u30fc\u30c0\u30fc\u306b\u95a2\u3057\u3066\u306f\u79c1\u3082\u307e\u3060\u307e\u3060\u7d20\u4eba\u306a\u306e\u3067\u3001\u6c17\u306b\u306a\u308b\u90e8\u5206\u3092\u898b\u3064\u3051\u305f\u5148\u751f\u65b9\u3082\u3001\u9060\u616e\u306a\u304f\u30b3\u30e1\u30f3\u30c8\u6b04\u304b\u3089\u3054\u6307\u6458\u3044\u305f\u3060\u3051\u308c\u3070\u5e78\u3044\u3067\u3059\uff01\n## \u6982\u8981\n\u672c\u30a8\u30f3\u30c8\u30ea\u30fc\u306fGPU\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u98db\u3070\u3059\u305f\u3081\u306b\u7b46\u8005\u304c\u52c9\u5f37\u3057\u305f\u8ecc\u8de1\u3067\u3059\u3002\n## \u672c\u30a8\u30f3\u30c8\u30ea\u30fc\u306e\u5bfe\u8c61\u8005\n* \u30b7\u30a7\u30fc\u30c0\u30fc\u304c\u4f55\u306a\u306e\u304b\u306f\u77e5\u3063\u3066\u308b\n* \u3061\u3087\u3063\u3068\u304f\u3089\u3044\u306a\u3089GLSL\u66f8\u3044\u305f\u3053\u3068\u3042\u308b\n* \u3060\u3051\u3069GPU\u306b\u6f14\u7b97\u3092\u3055\u305b\u308b\u306e\u306f\u3084\u3063\u305f\u3053\u3068\u306a\u3044\n* \u30b5\u30f3\u30d7\u30eb\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u308f\u3051\u308f\u304b\u3089\u3093\n\n\u3053\u3093\u306a\u4eba\u3092\u60f3\u5b9a\u3057\u3066\u66f8\u3044\u3066\u307e\u3059\u3002\nGLSL\u306b\u3064\u3044\u3066\u306e\u57fa\u672c\u4e2d\u306e\u57fa\u672c\u306b\u3064\u3044\u3066\u306f\u89e3\u8aac\u3057\u307e\u305b\u3093\u3002\n\u305d\u3053\u3089\u3078\u3093\u304c\u307e\u3060\u308f\u304b\u3089\u306a\u3044\u65b9\u306f\u672c\u30a8\u30f3\u30c8\u30ea\u30fc\u306b\u3064\u3044\u3066\u306f\u3055\u3089\u3063\u3068\u76ee\u3092\u3068\u304a\u3057\u3066\u3001\n\u521d\u5fc3\u8005\u5411\u3051\u306e\u5b66\u7fd2\u8cc7\u6599\u3092\u8aad\u307f\u6f01\u3063\u3066\u304f\u3060\u3055\u3044\uff01\n\n\n## GPGPU\u3067\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u305f\u304f\u3055\u3093\u98db\u3070\u3057\u305f\u3044\u304b\u3089\u30b5\u30f3\u30d7\u30eb\u3092\u8997\u3044\u3066\u307f\u308b\n\n\n### three.js\u306e\u7d20\u6674\u3089\u3057\u3044\u30b5\u30f3\u30d7\u30eb\u9054\n\n![screencapture-threejs-org-examples-webgl_gpgpu_birds-html-1481813036938.png](https://qiita-image-store.s3.amazonaws.com/0/54225/b775b6b8-35aa-bb04-b4d8-1fe542d87806.png \"screencapture-threejs-org-examples-webgl_gpgpu_birds-html-1481813036938.png\")\nhttps://threejs.org/examples/webgl_gpgpu_birds.html\n\n![screencapture-threejs-org-examples-webgl_gpgpu_protoplanet-html-1481813042713.png](https://qiita-image-store.s3.amazonaws.com/0/54225/183e9f17-5df7-9711-51d1-ab986281ddb2.png \"screencapture-threejs-org-examples-webgl_gpgpu_protoplanet-html-1481813042713.png\")\nhttps://threejs.org/examples/webgl_gpgpu_protoplanet.html\n\n![screencapture-threejs-org-examples-webgl_gpgpu_water-html-1481813044941.png](https://qiita-image-store.s3.amazonaws.com/0/54225/6ad72ff4-4b49-87b9-e695-b187f70c7829.png \"screencapture-threejs-org-examples-webgl_gpgpu_water-html-1481813044941.png\")\nhttps://threejs.org/examples/webgl_gpgpu_water.html\n\n\n\n### \u30b5\u30f3\u30d7\u30eb\u304c\u3080\u305a\u304b\u3057\u3044\n* \u8907\u96d1\u306a\u6570\u5b66\u7684\u8981\u7d20\u304c\u30b3\u30fc\u30c9\u306e\u8aad\u89e3\u306e\u90aa\u9b54\n* \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u98db\u3070\u3057\u305f\u3044\u3060\u3051\u3060\u3063\u3064\u306e\n\n\n\u7d50\u5c40\u3053\u306e\u306a\u304b\u3067\u3082\u6bd4\u8f03\u7684\u7c21\u5358\u305d\u3046\u306a\u91cd\u529b\u3068\u304b\u3092\u8a08\u7b97\u3057\u3066\u308b\u3053\u3044\u3064\u3092\u89e3\u8aad\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3002\nhttps://threejs.org/examples/webgl_gpgpu_protoplanet.html\n\n  \n  \n  <br>\n\n\u305d\u3082\u305d\u3082\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u5c02\u7528\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u3042\u308b\u304b\u3089\u305d\u308c\u4f7f\u3048\u3070\uff1f\u3063\u3066\u3044\u3046\u30c4\u30c3\u30b3\u30df\u304c\u6765\u305d\u3046\u3067\u3059\u3051\u3069\u3001\u79c1\u306f\u5f53\u6642\u3001\u4e00\u304b\u3089\u4f5c\u308a\u305f\u304b\u3063\u305f\u306e\u3067\u3059\u3002\u52c9\u5f37\u3082\u517c\u306d\u3066\u3002\n\n\n## \u524a\u308a\u306b\u524a\u3063\u3066\u30e9\u30f3\u30c0\u30e0\u306b\u98db\u3076\u3060\u3051\u306e\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306b\u3057\u3066\u307f\u305f\uff01\n![gpuparticle_forQiita03.gif](https://qiita-image-store.s3.amazonaws.com/0/54225/293905ac-7b2e-67dc-a313-7d7172690824.gif \"gpuparticle_forQiita03.gif\")\n\n\u4eca\u56de\u306f\u3053\u308c\u3092\u76ee\u6307\u3057\u307e\u3059\u3002\n\u306a\u3093\u306825\u4e07\u3064\u3076\u3064\u3076\u3067\u3059\uff01\n\n\n## \u30b7\u30a7\u30fc\u30c0\u30fc\u3067\u6f14\u7b97\u3059\u308b\u3068\u3044\u3046\u306e\u306f\u3069\u3046\u3044\u3046\u3053\u3068\u304b\n![Group 3.jpg](https://qiita-image-store.s3.amazonaws.com/0/54225/7f35cfb5-0dbf-03d1-bb3a-465e757694c6.jpeg \"Group 3.jpg\")\n\n\u3059\u3054\u3044\u3056\u3063\u304f\u308a\u3057\u305f\u89e3\u8aac\u3002\u3053\u3053\u307e\u3067\u306f\u307e\u3042\u308f\u304b\u308b\u3002\n\n\u3057\u304b\u3057\u30b7\u30a7\u30fc\u30c0\u30fc\u3092\u3061\u3087\u3053\u3061\u3087\u3053\u3044\u3058\u3063\u305f\u3053\u3068\u304c\u6709\u308b\u4eba\u306a\u3089\u308f\u304b\u308b\u304c\u3001\u914d\u5217\u306a\u3093\u304b\u3092\u7528\u610f\u3057\u3066\u3055\u304f\u3063\u3068\u60c5\u5831\u3092\u9023\u756a\u3067\u4fdd\u5b58\u3059\u308b\u3053\u3068\u304c\u96e3\u3057\u3044\u2026\u3002\n\u3053\u3053\u3067\u30c6\u30af\u30b9\u30c1\u30e3\u306e\u767b\u5834\u3067\u3042\u308b\u3002\u30c6\u30af\u30b9\u30c1\u30e3\u306frgba\u306e\u60c5\u5831\u3092\u683c\u7d0d\u3059\u308b\u305f\u3081\u306e\u3082\u306e\u3060\u304c\u3001\u4eca\u56de\u306f\u3080\u308a\u3084\u308axyzw\u3068\u8a00\u3063\u305f\u611f\u3058\u3067\u5ea7\u6a19\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306b\u5229\u7528\u3055\u305b\u3066\u9802\u304d\u307e\u3059\u3002\n\u305d\u3057\u3066\u3053\u306e\u30c6\u30af\u30b9\u30c1\u30e3\u304c\u8907\u6570\u3042\u308c\u3070\u2026\n\n![Group 2.jpg](https://qiita-image-store.s3.amazonaws.com/0/54225/a60d18ff-85fa-33be-a745-70f6bae850b8.jpeg \"Group 2.jpg\")\n\n\n\u3053\u3093\u306a\u611f\u3058\u306b\u3067\u30ef\u30f3\u30d5\u30ec\u30fc\u30e0\u3054\u3068\u306b\u30d4\u30f3\u30dd\u30f3\u3092\u7e70\u308a\u8fd4\u3059\u3053\u3068\u3067\u3001\u81ea\u7531\u306a\u6f14\u7b97\u304c\u3067\u304d\u307e\u3059\u3002\nJavaScript\u3060\u3051\u3060\u3068\u3001\u4f55\u4e07\u3068\u3044\u3046\u9802\u70b9\u60c5\u5831\u304c\u683c\u7d0d\u3055\u308c\u305f\u914d\u5217\u3092for\u6587\u3067\u56de\u3057\u3066\u914d\u5217\u306e\u4e2d\u3092\u66f8\u304d\u63db\u3048\u3066\u3044\u304f\u308f\u3051\u3067\u3059\u304c\u3001\n\u3053\u308c\u3092GPU\u5074\u3067\u4e26\u5217\u306b\u30c9\u30ab\u30f3\u3068\u51e6\u7406\u3057\u3066\u3057\u307e\u304a\u3046\u3068\u3044\u3046\u3082\u306e\u3002\n\n\n## \u809d\u5fc3\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <title>three.js webgl - gpgpu - protoplanet</title>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0\">\n    <style>\n        body {\n            background-color: #000000;\n            margin: 0px;\n            overflow: hidden;\n            font-family:Monospace;\n            font-size:13px;\n            text-align:center;\n            text-align:center;\n            cursor: pointer;\n        }\n        a {\n            color:#0078ff;\n        }\n        #info {\n            color: #ffffff;\n            position: absolute;\n            top: 10px;\n            width: 100%;\n        }\n    </style>\n</head>\n<body>\n\n\n\n<script src=\"./js/three.js\"></script>\n<script src=\"js/Detector.js\"></script>\n<script src=\"js/stats.min.js\"></script>\n<script src=\"js/dat.gui.min.js\"></script>\n<script src=\"js/OrbitControls.js\"></script>\n\n<script src=\"js/GPUComputationRenderer.js\"></script>\n\n\n<!-- Fragment shader for protoplanet's position -->\n<script id=\"computeShaderPosition\" type=\"x-shader/x-fragment\">\n            // \u73fe\u5728\u306e\u4f4d\u7f6e\u60c5\u5831\u3092\u6c7a\u5b9a\u3059\u308b\n\t\t\t#define delta ( 1.0 / 60.0 )\n\t\t\tvoid main() {\n\t\t\t\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\t\t\t\tvec4 tmpPos = texture2D( texturePosition, uv );\n\t\t\t\tvec3 pos = tmpPos.xyz;\n\t\t\t\tvec4 tmpVel = texture2D( textureVelocity, uv );\n\t\t\t\t// vel\u304c\u79fb\u52d5\u3059\u308b\u65b9\u5411(\u3082\u3046\u4e00\u3064\u4e0b\u306ecomputeShaderVelocity\u3092\u53c2\u7167)\n\t\t\t\tvec3 vel = tmpVel.xyz;\n\n\t\t\t\t// \u79fb\u52d5\u3059\u308b\u65b9\u5411\u306b\u901f\u5ea6\u3092\u639b\u3051\u5408\u308f\u305b\u305f\u6570\u5024\u3092\u73fe\u5728\u5730\u306b\u52a0\u3048\u308b\u3002\n\t\t\t    pos += vel * delta;\n\t\t\t\tgl_FragColor = vec4( pos, 1.0 );\n\t\t\t}\n\t\t</script>\n\n<!-- Fragment shader for protoplanet's velocity -->\n<script id=\"computeShaderVelocity\" type=\"x-shader/x-fragment\">\n\n\t\t\t// \u79fb\u52d5\u65b9\u5411\u306b\u3064\u3044\u3066\u3044\u308d\u3044\u308d\u8a08\u7b97\u3067\u304d\u308b\u30b7\u30a7\u30fc\u30c0\u30fc\u3002\n\t\t\t// \u4eca\u56de\u306f\u306a\u306b\u3082\u3057\u3066\u306a\u3044\u3002\n\t\t\t// \u3053\u3053\u3067Vel\u306ex y z\u306b\u3064\u3044\u3066\u60c5\u5831\u3092\u4e0a\u66f8\u304d\u3059\u308b\u3068\u3001\u305d\u308c\u306b\u5fdc\u3058\u3066\u79fb\u52d5\u65b9\u5411\u304c\u5909\u308f\u308b\n\t\t\t#include <common>\n\n\t\t\tvoid main()\t{\n\t\t\t\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\t\t\t\tfloat idParticle = uv.y * resolution.x + uv.x;\n\t\t\t\tvec4 tmpVel = texture2D( textureVelocity, uv );\n\t\t\t\tvec3 vel = tmpVel.xyz;\n\n                gl_FragColor = vec4( vel.xyz, 1.0 );\n\t\t\t}\n\t\t</script>\n\n<!-- Particles vertex shader -->\n<script type=\"x-shader/x-vertex\" id=\"particleVertexShader\">\n\n\n\t\t\t#include <common>\n\t\t\tuniform sampler2D texturePosition;\n\t\t\tuniform float cameraConstant;\n\t\t\tuniform float density;\n\t\t\tvarying vec4 vColor;\n\t\t\tvarying vec2 vUv;\n\t\t\tuniform float radius;\n\n\n\n\t\t\tvoid main() {\n\t\t\t\tvec4 posTemp = texture2D( texturePosition, uv );\n\t\t\t\tvec3 pos = posTemp.xyz;\n\t\t\t\tvColor = vec4( 1.0, 0.7, 1.0, 1.0 );\n\n\t\t\t\t// \u30dd\u30a4\u30f3\u30c8\u306e\u30b5\u30a4\u30ba\u3092\u6c7a\u5b9a\n\t\t\t\tvec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );\n\t\t\t\tgl_PointSize = 0.5 * cameraConstant / ( - mvPosition.z );\n\n                // uv\u60c5\u5831\u306e\u5f15\u304d\u6e21\u3057\n\t\t\t\tvUv = uv;\n\n                // \u5909\u63db\u3057\u3066\u683c\u7d0d\n\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\t\t\t}\n\t\t</script>\n\n<!-- Particles fragment shader -->\n<script type=\"x-shader/x-fragment\" id=\"particleFragmentShader\">\n            // VertexShader\u304b\u3089\u53d7\u3051\u53d6\u3063\u305f\u8272\u3092\u683c\u7d0d\u3059\u308b\u3060\u3051\u3002\n\t\t\tvarying vec4 vColor;\n\t\t\tvoid main() {\n\n\t\t\t    // \u4e38\u3044\u5f62\u306b\u8272\u3092\u306c\u308b\u305f\u3081\u306e\u8a08\u7b97\n\t\t\t    float f = length( gl_PointCoord - vec2( 0.5, 0.5 ) );\n\t\t\t\tif ( f > 0.1 ) {\n\t\t\t\t\tdiscard;\n\t\t\t\t}\n\t\t\t\tgl_FragColor = vColor;\n\t\t\t}\n\t\t</script>\n\n\n<script>\n    if ( ! Detector.webgl ) Detector.addGetWebGLMessage();\n    // \u4eca\u56de\u306f25\u4e07\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u52d5\u304b\u3059\u3053\u3068\u306b\u6311\u6226\n    // \u306a\u306e\u30671\u8fba\u304c500\u306e\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u4f5c\u308b\u3002\n    // 500 * 500 = 250000\n    var WIDTH = 500;\n    var PARTICLES = WIDTH * WIDTH;\n\n    // \u30e1\u30e2\u30ea\u8ca0\u8377\u78ba\u8a8d\u7528\n    var stats;\n\n    // \u57fa\u672c\u30bb\u30c3\u30c8\n    var container, camera, scene, renderer, geometry, controls;\n\n\n\n\n\n    // gpgpu\u3092\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u9054\n    var gpuCompute;\n    var velocityVariable;\n    var positionVariable;\n    var positionUniforms;\n    var velocityUniforms;\n    var particleUniforms;\n    var effectController;\n\n    init();\n    animate();\n    function init() {\n\n\n        // \u4e00\u822c\u7684\u306aThree.js\u306b\u304a\u3051\u308b\u5b9a\u7fa9\u90e8\u5206\n        container = document.createElement( 'div' );\n        document.body.appendChild( container );\n        camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 5, 15000 );\n        camera.position.y = 120;\n        camera.position.z = 200;\n        scene = new THREE.Scene();\n        renderer = new THREE.WebGLRenderer();\n        renderer.setClearColor( 0x000000 );\n        renderer.setPixelRatio( window.devicePixelRatio );\n        renderer.setSize( window.innerWidth, window.innerHeight );\n        container.appendChild( renderer.domElement );\n        controls = new THREE.OrbitControls( camera, renderer.domElement );\n        stats = new Stats();\n        container.appendChild( stats.dom );\n        window.addEventListener( 'resize', onWindowResize, false );\n\n\n        // ***** \u3053\u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u306b\u3064\u3044\u3066\u306f\u5f8c\u8ff0 ***** //\n//        effectController = {\n//            time: 0.0,\n//        };\n\n\n        // \u2460gpuCopute\u7528\u306eRender\u3092\u4f5c\u308b\n        initComputeRenderer();\n\n        // \u2461particle \u521d\u671f\u5316\n        initPosition();\n\n    }\n\n\n    // \u2460gpuCopute\u7528\u306eRender\u3092\u4f5c\u308b\n    function initComputeRenderer() {\n\n        // gpgpu\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u683c\u7d0d\n        gpuCompute = new GPUComputationRenderer( WIDTH, WIDTH, renderer );\n\n        // \u4eca\u56de\u306f\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u4f4d\u7f6e\u60c5\u5831\u3068\u3001\u79fb\u52d5\u65b9\u5411\u3092\u4fdd\u5b58\u3059\u308b\u30c6\u30af\u30b9\u30c1\u30e3\u30922\u3064\u7528\u610f\u3057\u307e\u3059\n        var dtPosition = gpuCompute.createTexture();\n        var dtVelocity = gpuCompute.createTexture();\n\n        // \u30c6\u30af\u30b9\u30c1\u30e3\u306bGPU\u3067\u8a08\u7b97\u3059\u308b\u305f\u3081\u306b\u521d\u671f\u60c5\u5831\u3092\u57cb\u3081\u3066\u3044\u304f\n        fillTextures( dtPosition, dtVelocity );\n\n        // shader\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30a2\u30bf\u30c3\u30c1\n        velocityVariable = gpuCompute.addVariable( \"textureVelocity\", document.getElementById( 'computeShaderVelocity' ).textContent, dtVelocity );\n        positionVariable = gpuCompute.addVariable( \"texturePosition\", document.getElementById( 'computeShaderPosition' ).textContent, dtPosition );\n\n        // \u4e00\u9023\u306e\u95a2\u4fc2\u6027\u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u306e\u304a\u307e\u3058\u306a\u3044\n        gpuCompute.setVariableDependencies( velocityVariable, [ positionVariable, velocityVariable ] );\n        gpuCompute.setVariableDependencies( positionVariable, [ positionVariable, velocityVariable ] );\n\n\n        // uniform\u5909\u6570\u3092\u767b\u9332\u3057\u305f\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f5c\u308b\n        /*\n        positionUniforms = positionVariable.material.uniforms;\n        velocityUniforms = velocityVariable.material.uniforms;\n\n        velocityUniforms.time = { value: 0.0 };\n        positionUniforms.time = { ValueB: 0.0 };\n        ***********************************\n        \u305f\u3068\u3048\u3070\u3001\u4e0a\u3067\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u3066\u3044\u308beffectController\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306etime\u3092\n        \u308f\u305f\u3057\u3066\u3042\u3052\u308c\u3070\u3001effectController.time\u3092\u66f4\u65b0\u3059\u308c\u3070uniform\u5909\u6570\u3082\u5909\u308f\u3063\u305f\u308a\u3001\u3068\u3044\u3046\u3053\u3068\u304c\u3067\u304d\u308b\n        velocityUniforms.time = { value: effectController.time };\n        ************************************\n        */\n\n        // error\u51e6\u7406\n        var error = gpuCompute.init();\n        if ( error !== null ) {\n            console.error( error );\n        }\n    }\n\n    // restart\u7528\u95a2\u6570 \u4eca\u56de\u306f\u4f7f\u308f\u306a\u3044\n    function restartSimulation() {\n        var dtPosition = gpuCompute.createTexture();\n        var dtVelocity = gpuCompute.createTexture();\n        fillTextures( dtPosition, dtVelocity );\n        gpuCompute.renderTexture( dtPosition, positionVariable.renderTargets[ 0 ] );\n        gpuCompute.renderTexture( dtPosition, positionVariable.renderTargets[ 1 ] );\n        gpuCompute.renderTexture( dtVelocity, velocityVariable.renderTargets[ 0 ] );\n        gpuCompute.renderTexture( dtVelocity, velocityVariable.renderTargets[ 1 ] );\n    }\n\n    // \u2461\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u305d\u306e\u3082\u306e\u306e\u60c5\u5831\u3092\u6c7a\u3081\u3066\u3044\u304f\u3002\n    function initPosition() {\n\n        // \u6700\u7d42\u7684\u306b\u8a08\u7b97\u3055\u308c\u305f\u7d50\u679c\u3092\u53cd\u6620\u3059\u308b\u305f\u3081\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002\n        // \u4f4d\u7f6e\u60c5\u5831\u306fShader\u5074(texturePosition, textureVelocity)\n        // \u3067\u6c7a\u5b9a\u3055\u308c\u308b\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u9069\u5f53\u306b\u3046\u3081\u3061\u3083\u3063\u3066OK\n        \n        geometry = new THREE.BufferGeometry();\n        var positions = new Float32Array( PARTICLES * 3 );\n        var p = 0;\n        for ( var i = 0; i < PARTICLES; i++ ) {\n            positions[ p++ ] = 0;\n            positions[ p++ ] = 0;\n            positions[ p++ ] = 0;\n        }\n\n        // uv\u60c5\u5831\u306e\u6c7a\u5b9a\u3002\u30c6\u30af\u30b9\u30c1\u30e3\u304b\u3089\u60c5\u5831\u3092\u53d6\u308a\u51fa\u3059\u3068\u304d\u306b\u5fc5\u8981\n        var uvs = new Float32Array( PARTICLES * 2 );\n        p = 0;\n        for ( var j = 0; j < WIDTH; j++ ) {\n            for ( var i = 0; i < WIDTH; i++ ) {\n                uvs[ p++ ] = i / ( WIDTH - 1 );\n                uvs[ p++ ] = j / ( WIDTH - 1 );\n            }\n        }\n\n        // attribute\u3092geometry\u306b\u767b\u9332\u3059\u308b\n        geometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\n        geometry.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\n\n\n        // uniform\u5909\u6570\u3092\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u5b9a\u7fa9\n        // \u4eca\u56de\u306f\u30ab\u30e1\u30e9\u3092\u30de\u30a6\u30b9\u3067\u3044\u3058\u308c\u308b\u3088\u3046\u306b\u3001\u8a08\u7b97\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3082\u308f\u305f\u3059\u3002\n        particleUniforms = {\n            texturePosition: { value: null },\n            textureVelocity: { value: null },\n            cameraConstant: { value: getCameraConstant( camera ) }\n        };\n\n\n\n        // Shader\u30de\u30c6\u30ea\u30a2\u30eb \u3053\u308c\u306f\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u305d\u306e\u3082\u306e\u306e\u63cf\u5199\u306b\u5fc5\u8981\u306a\u30b7\u30a7\u30fc\u30c0\u30fc\n        var material = new THREE.ShaderMaterial( {\n            uniforms:       particleUniforms,\n            vertexShader:   document.getElementById( 'particleVertexShader' ).textContent,\n            fragmentShader: document.getElementById( 'particleFragmentShader' ).textContent\n        });\n        material.extensions.drawBuffers = true;\n        var particles = new THREE.Points( geometry, material );\n        particles.matrixAutoUpdate = false;\n        particles.updateMatrix();\n\n        // \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u30b7\u30fc\u30f3\u306b\u8ffd\u52a0\n        scene.add( particles );\n    }\n\n\n    function fillTextures( texturePosition, textureVelocity ) {\n\n        // texture\u306e\u30a4\u30e1\u30fc\u30b8\u30c7\u30fc\u30bf\u3092\u3044\u3063\u305f\u3093\u53d6\u308a\u51fa\u3059\n        var posArray = texturePosition.image.data;\n        var velArray = textureVelocity.image.data;\n\n        // \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u521d\u671f\u306e\u4f4d\u7f6e\u306f\u3001\u30e9\u30f3\u30c0\u30e0\u306aXZ\u306b\u5e73\u9762\u304a\u304f\u3002\n        // \u677f\u72b6\u306e\u6b63\u65b9\u5f62\u304c\u63cf\u304b\u308c\u308b\n\n        for ( var k = 0, kl = posArray.length; k < kl; k += 4 ) {\n            // Position\n            var x, y, z;\n            x = Math.random()*500-250;\n            z = Math.random()*500-250;\n            y = 0;\n            // posArray\u306e\u5b9f\u614b\u306f\u4e00\u6b21\u5143\u914d\u5217\u306a\u306e\u3067\n            // x,y,z,w\u306e\u9806\u756a\u306b\u57cb\u3081\u3066\u3044\u304f\u3002\n            // w\u306f\u4eca\u56de\u306f\u4f7f\u7528\u3057\u306a\u3044\u304c\u3001\u914d\u5217\u306e\u9806\u756a\u306a\u3069\u3092\u57cb\u3081\u3066\u304a\u304f\u3068\u3044\u308d\u3044\u308d\u4f7f\u3048\u3066\u4fbf\u5229\n            posArray[ k + 0 ] = x;\n            posArray[ k + 1 ] = y;\n            posArray[ k + 2 ] = z;\n            posArray[ k + 3 ] = 0;\n\n            // \u79fb\u52d5\u3059\u308b\u65b9\u5411\u306f\u3068\u308a\u3042\u3048\u305a\u30e9\u30f3\u30c0\u30e0\u306b\u6c7a\u3081\u3066\u307f\u308b\u3002\n            // \u3053\u308c\u3067\u30e9\u30f3\u30c0\u30e0\u306a\u65b9\u5411\u306b\u3068\u3076\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u304c\u51fa\u6765\u4e0a\u304c\u308b\u306f\u305a\u3002\n            velArray[ k + 0 ] = Math.random()*2-1;\n            velArray[ k + 1 ] = Math.random()*2-1;\n            velArray[ k + 2 ] = Math.random()*2-1;\n            velArray[ k + 3 ] = Math.random()*2-1;\n        }\n    }\n\n\n\n    // \u30ab\u30e1\u30e9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30b7\u30a7\u30fc\u30c0\u30fc\u306b\u6e21\u3057\u305f\u3044\u60c5\u5831\u3092\u5f15\u3063\u5f35\u3063\u3066\u304f\u308b\u95a2\u6570\n    // \u30ab\u30e1\u30e9\u304b\u3089\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u304c\u3069\u308c\u3060\u3051\u96e2\u308c\u3066\u308b\u304b\u3092\u8a08\u7b97\u3057\u3001\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u5927\u304d\u3055\u3092\u6c7a\u5b9a\u3059\u308b\u305f\u3081\u3002\n    function getCameraConstant( camera ) {\n        return window.innerHeight / ( Math.tan( THREE.Math.DEG2RAD * 0.5 * camera.fov ) / camera.zoom );\n    }\n\n\n\n    // \u753b\u9762\u304c\u30ea\u30b5\u30a4\u30ba\u3055\u308c\u305f\u3068\u304d\u306e\u51e6\u7406\n    // \u3053\u3053\u3067\u3082\u30b7\u30a7\u30fc\u30c0\u30fc\u5074\u306b\u60c5\u5831\u3092\u6e21\u3059\u3002\n    function onWindowResize() {\n        camera.aspect = window.innerWidth / window.innerHeight;\n        camera.updateProjectionMatrix();\n        renderer.setSize( window.innerWidth, window.innerHeight );\n        particleUniforms.cameraConstant.value = getCameraConstant( camera );\n    }\n\n\n    function animate() {\n        requestAnimationFrame( animate );\n        render();\n        stats.update();\n    }\n\n\n\n    function render() {\n        gpuCompute.compute();\n\n        // Three.js\u7528\u306eGPGPU\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u60c5\u5831\u3092\u66f4\u65b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n        // \u73fe\u5728\u306e\u60c5\u5831\u3092\u3001\u4fdd\u5b58\u7528\u306e\u30e1\u30e2\u30ea\u306b\u683c\u7d0d\u3059\u308b\u304a\u307e\u3058\u306a\u3044\u3002\n        particleUniforms.texturePosition.value = gpuCompute.getCurrentRenderTarget( positionVariable ).texture;\n        particleUniforms.textureVelocity.value = gpuCompute.getCurrentRenderTarget( velocityVariable ).texture;\n        renderer.render( scene, camera );\n    }\n</script>\n</body>\n```\n\n\n\u30b5\u30f3\u30d7\u30eb\u306b\u76ee\u3092\u901a\u3057\u305f\u65b9\u306a\u3089\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3051\u3063\u3053\u3046\u30c0\u30a4\u30a8\u30c3\u30c8\u306b\u6210\u529f\u3057\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306b\u306a\u3063\u3066\u304a\u308a\u307e\u3059\u3002\n\u9069\u5b9c\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u3044\u308c\u3066\u304a\u308a\u307e\u3059\u304c\u3001GPGPU\u3042\u305f\u308a\u3092\u7d30\u304b\u304f\u89e3\u8aac\u3057\u3066\u3044\u304f\u3068\u6587\u5b57\u91cf\u304c\u3068\u3093\u3067\u3082\u306a\u304f\u306a\u308b\u306e\u3067\u3001\n\u3053\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306b\u306a\u308b\u3088\u3046\u306b\n\nhttps://threejs.org/examples/webgl_gpgpu_protoplanet.html\n\u3053\u306e\u30b5\u30f3\u30d7\u30eb\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u524a\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff01\u305d\u3046\u3059\u308c\u3070\u306a\u3093\u3068\u306a\u304f\u308f\u304b\u3063\u3066\u304d\u307e\u3059\u3002\n\u3053\u306e\u9818\u57df\u307e\u3067\u304f\u308b\u3068\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u90e8\u5206\u3054\u3068\u306b\u7834\u58ca\u3057\u3066\u8868\u793a\u7d50\u679c\u304c\u3069\u3046\u5909\u5316\u3059\u308b\u304b\u3092\u4f53\u9a13\u3057\u305f\u307b\u3046\u304c\u7406\u89e3\u304c\u901f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n\u3042\u3068doxas\u3055\u3093\u306e\u8cc7\u6599\u3082\u304a\u3059\u3059\u3081\u3067\u3059\u3002\n[GPGPU \u3067\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u5927\u91cf\u306b\u63cf\u304f](https://wgld.org/d/webgl/w083.html)\n\n## \u3068\u306f\u3044\u3048\u3001\u4e00\u5fdc\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u3056\u3063\u304f\u308a\u89e3\u8aac\n\n\u4eca\u56de\u7528\u610f\u3057\u305f\u30b7\u30a7\u30fc\u30c0\u30fc\u306f\uff13\u3064\u3067\u3059\n\n* \u9802\u70b9\u60c5\u5831\u306e\u30b7\u30a7\u30fc\u30c0\u30fc\uff08computeShaderPosition : fragment\u306e\u307f\uff09\n* \u79fb\u52d5\u65b9\u5411\u3092\u6c7a\u5b9a\u3059\u308b\u30b7\u30a7\u30fc\u30c0\u30fc\uff08computeShaderVelocity : fragment\u306e\u307f\uff09\n* \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u63cf\u5199\u3059\u308b\u305f\u3081\u306e\u30b7\u30a7\u30fc\u30c0\u30fc\uff08particleVertexShader\u3068particleFragmentShader\uff09\n\n\u91cd\u8981\u306a\u306e\u306f\u4e0a\u306e\uff12\u3064\u3067\u3001\u4e00\u756a\u4e0a\u304c\u9802\u70b9\u60c5\u5831\u3092\u30ef\u30f3\u30d5\u30ec\u30fc\u30e0\u3054\u3068\u306b\u8a18\u9332\u3059\u308b\u30e1\u30e2\u30ea\u306e\u5f79\u5272\u3092\u3057\u307e\u3059\u3002\n\uff12\u756a\u3081(computeShaderVelocity)\u3067\u79fb\u52d5\u65b9\u5411\u3092\u6c7a\u5b9a\u3057\u307e\u3059\u3002\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u52d5\u304d\u306f\u3053\u3053\u3067\u5236\u5fa1\u3067\u304d\u308b\u306e\u3067\u3001\u305f\u3081\u306b\u3057computeShaderVelocity\u306b\n\n```glsl\nvel.y = 0.0;\nvel.z = 0.0;\n```\n\n\u4ee5\u4e0a\u306e\u30b3\u30fc\u30c9\u3092vel\u304c\u5ba3\u8a00\u3055\u308c\u305f\u5f8c\u306b\u8ffd\u8a18\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u305d\u3046\u3059\u308b\u3068\u2026\n\n![gpuparticle_forQiita04.gif](https://qiita-image-store.s3.amazonaws.com/0/54225/d144e687-5cc6-c5bd-1fcc-0737edc4fab4.gif \"gpuparticle_forQiita04.gif\")\n\nx\u65b9\u5411\u306e\u52d5\u304d\u3060\u3051\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u306a\u3093\u3068\u306a\u304f\u308f\u304b\u3063\u3066\u304d\u307e\u3057\u305f\u304b\uff1f\n\n\n## \u767a\u5c55\u7cfb\n\n![simpleGPGPU_study11.gif](https://qiita-image-store.s3.amazonaws.com/0/54225/05699477-148d-74a7-d9b8-5f6f2227a82a.gif \"simpleGPGPU_study11.gif\")\n![simpleGPGPU_study12.gif](https://qiita-image-store.s3.amazonaws.com/0/54225/c476cf61-566b-d960-5d03-adb914af781c.gif \"simpleGPGPU_study12.gif\")\n![gpuparticle_wave_test05.gif](https://qiita-image-store.s3.amazonaws.com/0/54225/24daea3a-b432-25b8-bf31-cfbea7910bcf.gif \"gpuparticle_wave_test05.gif\")\nhttps://murasaki-uma.github.io/webgl_vj/frame.html\n\n\u30b5\u30f3\u30d7\u30eb\u30da\u30fc\u30b8\u3067\u306f \n\n\"<\"\u30ad\u30fc\u3067\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u30b9\u30bf\u30fc\u30c8\n\">\"\u30ad\u30fc\u3092\u62bc\u3057\u3066\u308b\u9593\u306f\u30b9\u30d4\u30fc\u30c9\u30c0\u30a6\u30f3\n\n\u3068\u3044\u3046\u8a2d\u5b9a\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u5c11\u3057\u904a\u3093\u3067\u304f\u3060\u3055\u3044\u3002MBP2015\u7a0b\u5ea6\u306a\u3089\u666e\u901a\u306b\u52d5\u304f\u306f\u305a\u3067\u3059\u3002\n\n\n\n\u89e3\u8aac\u306f\u4ee5\u4e0a\u3067\u3059\uff01\u60c5\u5831\u304c\u307e\u3060\u8db3\u308a\u306a\u3044\u3068\u3044\u3046\u65b9\u306f\u9060\u616e\u306a\u304f\u30b3\u30e1\u30f3\u30c8\u6b04\u3084Twitter\u306e\u65b9\u304b\u3089\u8cea\u554f\u3092\u98db\u3070\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u307e\u305f\u3001\u30b7\u30a7\u30fc\u30c0\u30fc\u306b\u95a2\u3057\u3066\u306f\u79c1\u3082\u307e\u3060\u307e\u3060\u7d20\u4eba\u306a\u306e\u3067\u3001\u6c17\u306b\u306a\u308b\u90e8\u5206\u3092\u898b\u3064\u3051\u305f\u5148\u751f\u65b9\u3082\u3001\u9060\u616e\u306a\u304f\u30b3\u30e1\u30f3\u30c8\u6b04\u304b\u3089\u3054\u6307\u6458\u3044\u305f\u3060\u3051\u308c\u3070\u5e78\u3044\u3067\u3059\uff01\n", "tags": ["JavaScript", "WebGL", "GLSL", "three.js"]}