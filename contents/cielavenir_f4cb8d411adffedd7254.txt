{"context": "https://codeiq.jp/q/2751\nhttp://qiita.com/Nabetani/items/1de39df381dfeee305ab\nCodeIQ\u306e\u554f\u984c\u3092\u898b\u305f\u6642\u3001\u3059\u3050\u306b\u601d\u3044\u51fa\u3059\u3082\u306e\u304c\u3042\u3063\u305f\u3002\u9053\u306a\u308a\u306e\u4e80\u3067\u3042\u308b\u3002\n\u3078\u3093\u306a\u30de\u30c3\u30d7\u3092\u4e0a\u4e0b\u5de6\u53f3\u306b\u9032\u3080\u30eb\u30fc\u30eb\u306f\u305d\u3063\u304f\u308a\u3067\u3042\u308b\u3002\n\u30de\u30c3\u30d7\u306e\u6301\u3061\u65b9\u3092\u3001\u4e0a\u4e0b\u3067\u306f\u306a\u304f\u3001\u5916\u5074\u304b\u3089\u5185\u5074\u3078\u6301\u3064\u3088\u3046\u306b\u3059\u308c\u3070\u3001\u8f9e\u66f8\u306e\u5dee\u3067\u5dee\u7570\u3092\u5438\u53ce\u3067\u304d\u308b\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3063\u305f\u3002\n\n\u4ee5\u4e0b\u306e\u30bd\u30fc\u30b9\u306f\u3001-DHENA12\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u3053\u3068\u3067\u300c\u9053\u306a\u308a\u306e\u4e80\u300d\u3001\u3064\u3051\u306a\u3051\u308c\u3070(-DCODEIQ2751\u3068\u306a\u308a)\u300c\u4e16\u754c\u306f\u6b6a\u3093\u3067\u3044\u308b\u3002\u305d\u308c\u3067\u3082\u541b\u306f\u6b69\u3080\u3002\u300d\u306e\u7b54\u6848\u3068\u3057\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u308b\u3002\n\n\u9053\u306a\u308a\u306e\u4e80\u306e\u65e7\u7b54\u6848\u3068\u6bd4\u8f03\u3057\u3066\u3001v2\u306e\u9806\u5e8f\u304c\u9006\u306b\u3001\u307e\u305fv1\u306e\u6e7e\u66f2\u90e8\u5206\u304cv2\u306b\u79fb\u52d5\u3057\u3066\u3044\u308b\u3053\u3068\u306b\u6ce8\u76ee\u3002\n\u300c\u4e16\u754c\u306f\u6b6a\u3093\u3067\u3044\u308b\u3002\u305d\u308c\u3067\u3082\u541b\u306f\u6b69\u3080\u3002\u300d\u306b\u3064\u3044\u3066\u306f\u3001\u4e09\u89d2\u5f62\u306e1\u9802\u70b9\u30681\u8fba\u30921\u5217\u884c\u306b\u4fdd\u6301\u3057\u3066\u3044\u308b(\u534a\u958b\u533a\u9593\u7684\u306b\u2026\u25cf-\u25cb)\u3002\n\u305d\u3046\u3044\u3048\u3070\u3001\u5b9f\u969b\u306b\u306f-DHENA12PRE\u3058\u3083\u306a\u3044\u3068\u304a\u304b\u3057\u3044\u306e\u3060\u304c\u3001\u30bd\u30fc\u30b9\u66f8\u3044\u305f\u306e\u534a\u5e74\u8fd1\u304f\u524d\u3060\u3057\u3001\u307e\u3042\u3044\u3063\u304b\u3002\n\n\ntyama_codeiq2751-hena12pre.cpp\n//http://qiita.com/Nabetani/items/1de39df381dfeee305ab\n//http://nabetani.sakura.ne.jp/hena/ord12aloroturtle/\n#include <iostream>\n#include <string>\n#include <vector>\n#include <map>\nusing namespace std;\nconst int D[4][2]={{1,0},{0,1},{-1,0},{0,-1}}; //RDLU\n\n#define CODEIQ2751\n\n#if defined(HENA12)\nconst vector<vector<string>>v={\n    {\"ABCDEFGH\",\"LMNOPQRS\",\"WXYZabcd\"},\n    {\"KVg52zwtqnkh\",\"JUf630xuroli\",\"ITe741yvspmj\"},\n};\nconst char start='A',error='?';\n#elif defined(CODEIQ2751)\nconst vector<vector<string>>v={\n    {\"0369cfi\",\"147adgj\",\"258behk\"},\n    {\"loruxAD\",\"mpsvyBE\",\"nqtwzCF\"},\n    {\"GJMPSVY\",\"HKNQTWZ\",\"ILORUX@\"},\n};\nconst char start='0',error='!';\n#else\n#error define HENA12 or CODEIQ2751.\n#endif\n\nint main(){\n    int x,y,i,d,n;\n    map<char,map<int,pair<char,int> > >m;\n    for(auto &v1:v){\n        for(y=0;y<v[0].size();y++){\n            for(x=0;x<v1[y].size();x++){\n                char c=v1[y][x];\n                if(x<v1[y].size()-1)m[c][0]=make_pair(v1[y][x+1],0);\n                if(y<v[0].size()-1)m[c][1]=make_pair(v1[y+1][x],1);\n                if(x>0)m[c][2]=make_pair(v1[y][x-1],2);\n                if(y>0)m[c][3]=make_pair(v1[y-1][x],3);\n            }\n        }\n    }\n    for(int i=0;i<v.size();i++){\n        for(int j=0;j<v[0].size();j++){\n            char c=v[i][j][v[i][j].size()-1],d=v[(i+1)%v.size()][v[0].size()-1][j];\n            m[c][0]=make_pair(d,3);\n            m[d][1]=make_pair(c,2);\n        }\n    }\n    string line;\n    for(;getline(cin,line);){\n        char cur=start,nxt;\n        d=0;\n        cout<<cur;\n        for(i=0;i<line.size();i++){\n            if(line[i]=='L')d=(d+3)%4;\n            else if(line[i]=='R')d=(d+1)%4;\n            else{\n                n=0;\n                if('1'<=line[i]&&line[i]<='9')n=line[i]-'0';\n                if('a'<=line[i]&&line[i]<='f')n=line[i]-'a'+10;\n                if(!n)break;\n                for(;n;n--){\n                    if(m[cur].find(d)==m[cur].end()){cout<<error;break;}\n                    nxt=m[cur][d].first;\n                    d=m[cur][d].second;\n                    cur=nxt;\n                    cout<<cur;\n                }\n                if(n)break;\n            }\n        }\n        cout<<endl<<flush;\n    }\n}\n\n\n\nhttps://codeiq.jp/q/2751\nhttp://qiita.com/Nabetani/items/1de39df381dfeee305ab\n\nCodeIQ\u306e\u554f\u984c\u3092\u898b\u305f\u6642\u3001\u3059\u3050\u306b\u601d\u3044\u51fa\u3059\u3082\u306e\u304c\u3042\u3063\u305f\u3002\u9053\u306a\u308a\u306e\u4e80\u3067\u3042\u308b\u3002\n\u3078\u3093\u306a\u30de\u30c3\u30d7\u3092\u4e0a\u4e0b\u5de6\u53f3\u306b\u9032\u3080\u30eb\u30fc\u30eb\u306f\u305d\u3063\u304f\u308a\u3067\u3042\u308b\u3002\n\u30de\u30c3\u30d7\u306e\u6301\u3061\u65b9\u3092\u3001\u4e0a\u4e0b\u3067\u306f\u306a\u304f\u3001\u5916\u5074\u304b\u3089\u5185\u5074\u3078\u6301\u3064\u3088\u3046\u306b\u3059\u308c\u3070\u3001\u8f9e\u66f8\u306e\u5dee\u3067\u5dee\u7570\u3092\u5438\u53ce\u3067\u304d\u308b\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3063\u305f\u3002\n\n- \u4ee5\u4e0b\u306e\u30bd\u30fc\u30b9\u306f\u3001-DHENA12\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u3053\u3068\u3067\u300c\u9053\u306a\u308a\u306e\u4e80\u300d\u3001\u3064\u3051\u306a\u3051\u308c\u3070(-DCODEIQ2751\u3068\u306a\u308a)\u300c\u4e16\u754c\u306f\u6b6a\u3093\u3067\u3044\u308b\u3002\u305d\u308c\u3067\u3082\u541b\u306f\u6b69\u3080\u3002\u300d\u306e\u7b54\u6848\u3068\u3057\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u308b\u3002\n- [\u9053\u306a\u308a\u306e\u4e80\u306e\u65e7\u7b54\u6848](http://qiita.com/cielavenir/items/56c2a969133f0617f898)\u3068\u6bd4\u8f03\u3057\u3066\u3001v2\u306e\u9806\u5e8f\u304c\u9006\u306b\u3001\u307e\u305fv1\u306e\u6e7e\u66f2\u90e8\u5206\u304cv2\u306b\u79fb\u52d5\u3057\u3066\u3044\u308b\u3053\u3068\u306b\u6ce8\u76ee\u3002\n- \u300c\u4e16\u754c\u306f\u6b6a\u3093\u3067\u3044\u308b\u3002\u305d\u308c\u3067\u3082\u541b\u306f\u6b69\u3080\u3002\u300d\u306b\u3064\u3044\u3066\u306f\u3001\u4e09\u89d2\u5f62\u306e1\u9802\u70b9\u30681\u8fba\u30921<del>\u5217</del>\u884c\u306b\u4fdd\u6301\u3057\u3066\u3044\u308b(\u534a\u958b\u533a\u9593\u7684\u306b\u2026\u25cf-\u25cb)\u3002\n- \u305d\u3046\u3044\u3048\u3070\u3001\u5b9f\u969b\u306b\u306f-DHENA12PRE\u3058\u3083\u306a\u3044\u3068\u304a\u304b\u3057\u3044\u306e\u3060\u304c\u3001\u30bd\u30fc\u30b9\u66f8\u3044\u305f\u306e\u534a\u5e74\u8fd1\u304f\u524d\u3060\u3057\u3001\u307e\u3042\u3044\u3063\u304b\u3002\n\n```tyama_codeiq2751-hena12pre.cpp\n//http://qiita.com/Nabetani/items/1de39df381dfeee305ab\n//http://nabetani.sakura.ne.jp/hena/ord12aloroturtle/\n#include <iostream>\n#include <string>\n#include <vector>\n#include <map>\nusing namespace std;\nconst int D[4][2]={{1,0},{0,1},{-1,0},{0,-1}}; //RDLU\n\n#define CODEIQ2751\n\n#if defined(HENA12)\nconst vector<vector<string>>v={\n\t{\"ABCDEFGH\",\"LMNOPQRS\",\"WXYZabcd\"},\n\t{\"KVg52zwtqnkh\",\"JUf630xuroli\",\"ITe741yvspmj\"},\n};\nconst char start='A',error='?';\n#elif defined(CODEIQ2751)\nconst vector<vector<string>>v={\n\t{\"0369cfi\",\"147adgj\",\"258behk\"},\n\t{\"loruxAD\",\"mpsvyBE\",\"nqtwzCF\"},\n\t{\"GJMPSVY\",\"HKNQTWZ\",\"ILORUX@\"},\n};\nconst char start='0',error='!';\n#else\n#error define HENA12 or CODEIQ2751.\n#endif\n\nint main(){\n\tint x,y,i,d,n;\n\tmap<char,map<int,pair<char,int> > >m;\n\tfor(auto &v1:v){\n\t\tfor(y=0;y<v[0].size();y++){\n\t\t\tfor(x=0;x<v1[y].size();x++){\n\t\t\t\tchar c=v1[y][x];\n\t\t\t\tif(x<v1[y].size()-1)m[c][0]=make_pair(v1[y][x+1],0);\n\t\t\t\tif(y<v[0].size()-1)m[c][1]=make_pair(v1[y+1][x],1);\n\t\t\t\tif(x>0)m[c][2]=make_pair(v1[y][x-1],2);\n\t\t\t\tif(y>0)m[c][3]=make_pair(v1[y-1][x],3);\n\t\t\t}\n\t\t}\n\t}\n\tfor(int i=0;i<v.size();i++){\n\t\tfor(int j=0;j<v[0].size();j++){\n\t\t\tchar c=v[i][j][v[i][j].size()-1],d=v[(i+1)%v.size()][v[0].size()-1][j];\n\t\t\tm[c][0]=make_pair(d,3);\n\t\t\tm[d][1]=make_pair(c,2);\n\t\t}\n\t}\n\tstring line;\n\tfor(;getline(cin,line);){\n\t\tchar cur=start,nxt;\n\t\td=0;\n\t\tcout<<cur;\n\t\tfor(i=0;i<line.size();i++){\n\t\t\tif(line[i]=='L')d=(d+3)%4;\n\t\t\telse if(line[i]=='R')d=(d+1)%4;\n\t\t\telse{\n\t\t\t\tn=0;\n\t\t\t\tif('1'<=line[i]&&line[i]<='9')n=line[i]-'0';\n\t\t\t\tif('a'<=line[i]&&line[i]<='f')n=line[i]-'a'+10;\n\t\t\t\tif(!n)break;\n\t\t\t\tfor(;n;n--){\n\t\t\t\t\tif(m[cur].find(d)==m[cur].end()){cout<<error;break;}\n\t\t\t\t\tnxt=m[cur][d].first;\n\t\t\t\t\td=m[cur][d].second;\n\t\t\t\t\tcur=nxt;\n\t\t\t\t\tcout<<cur;\n\t\t\t\t}\n\t\t\t\tif(n)break;\n\t\t\t}\n\t\t}\n\t\tcout<<endl<<flush;\n\t}\n}\n```\n", "tags": ["codeiq", "\u3069\u3046\u66f8\u304f", "C++", "yhpg"]}