{"context": " More than 1 year has passed since last update.WPF\u3067\u306f\u3001View\u304b\u3089ViewModel\u3078\u306e\u901a\u77e5\u3092\u884c\u3046\u6a5f\u80fd\u3068\u3057\u3066ICommand\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u63d0\u4f9b\u3057\u3066\u304f\u308c\u3066\u3044\u307e\u3059\u304c\u3001\nViewModel\u304b\u3089View\u3078\u306e\u901a\u77e5\u3092\u884c\u3046\u305f\u3081\u306e\u4ed5\u7d44\u307f\u306f\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n\u3057\u304b\u3057\u3001Window\u3092\u30af\u30ed\u30fc\u30ba\u3057\u305f\u3044\u3068\u304b\u3001ViewModel\u304b\u3089View\u3078\u901a\u77e5\u3092\u884c\u3044\u305f\u3044\u3068\u3044\u3046\u30b1\u30fc\u30b9\u306f\u591a\u3044\u3067\u3059\u3002\n\n\u30a4\u30d9\u30f3\u30c8\uff08\u30c7\u30ea\u30b2\u30fc\u30c8\uff09\u3092\u5229\u7528\u3059\u308b\u3002\nWPF\u306b\u306fViewModel\u304b\u3089View\u3078\u901a\u77e5\u3059\u308b\u7279\u5225\u306a\u6a5f\u80fd\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001View \u306f DataContext \u7d4c\u7531\u3067 ViewModel \u3078\u306e\u53c2\u7167\u3092\n\u4fdd\u6301\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u666e\u901a\u306b ViewModel \u306e\u30d1\u30d6\u30ea\u30c3\u30af\u306a\u30d7\u30ed\u30d1\u30c6\u30a3\u3084\u30e1\u30bd\u30c3\u30c9\u3001\u30a4\u30d9\u30f3\u30c8\u3001\u30c7\u30ec\u30b2\u30fc\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u304c\n\u3067\u304d\u307e\u3059\u3002ViewModel\u304b\u3089View\u3078\u306e\u901a\u77e5\u306fViewModel\u306b\u30a4\u30d9\u30f3\u30c8\uff08\u30c7\u30ea\u30b2\u30fc\u30c8\uff09\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u884c\u3048\u307e\u3059\u3002\u7279\u5225\u306a\u6a5f\u80fd\u306f\n\u5fc5\u8981\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u306d\u3002\n\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066ViewModel \u304b\u3089 View\u3092\u30af\u30ed\u30fc\u30ba\u3059\u308b\u30b3\u30fc\u30c9\u3092\u793a\u3057\u307e\u3059\u3002\n\nViewModel\u304b\u3089View\u306bWindow\u3092\u30af\u30ed\u30fc\u30ba\u3059\u308b\u3088\u3046\u901a\u77e5\u3059\u308b\u30b5\u30f3\u30d7\u30eb\n\nViewModel.cs\nclass ViewModel : ViewModelBase\n{\n    // \u30a4\u30d9\u30f3\u30c8\n    public event EventHandler<EventArgs> CloseView;\n\n    // \u30b3\u30de\u30f3\u30c9\n    public ICommand CloseCommand { get; private set; }\n\n    // \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n    public ViewModel()\n    {\n        CloseCommand = CreateCommand(v => \n            { \n                if (CloseView != null) \n                    CloseView(this, EventArgs.Empty); \n            });\n    }\n}\n\n\n\nMainWindow.xaml.cs\npublic partial class MainWindow : Window\n{\n    public MainWindow()\n    {\n        InitializeComponent();\n\n        DataContextChanged += (o, e) =>\n            {\n                ViewModel vm = DataContext as ViewModel;\n                if (vm != null)\n                {\n                    vm.CloseView += (sender, arg) => { Close(); };\n                }\n            };\n\n        DataContext = new ViewModel();\n    }\n}\n\n\n\nMainWindow.xaml\n<Window x:Class=\"WpfTest.MainWindow\"\n        xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\n        xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n        xmlns:local=\"clr-namespace:WpfTest\"\n        Title=\"MainWindow\" Height=\"350\" Width=\"525\">\n    <Grid>\n        <Button Content=\"\u9589\u3058\u308b\" FontSize=\"14\" Padding=\"20,10,20,10\" VerticalAlignment=\"Center\" HorizontalAlignment=\"Center\" Command=\"{Binding CloseCommand}\" />\n    </Grid>\n</Window>\n\n\nWPF\u3067\u306f\u3001View\u304b\u3089ViewModel\u3078\u306e\u901a\u77e5\u3092\u884c\u3046\u6a5f\u80fd\u3068\u3057\u3066ICommand\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u63d0\u4f9b\u3057\u3066\u304f\u308c\u3066\u3044\u307e\u3059\u304c\u3001\nViewModel\u304b\u3089View\u3078\u306e\u901a\u77e5\u3092\u884c\u3046\u305f\u3081\u306e\u4ed5\u7d44\u307f\u306f\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n\n\u3057\u304b\u3057\u3001Window\u3092\u30af\u30ed\u30fc\u30ba\u3057\u305f\u3044\u3068\u304b\u3001ViewModel\u304b\u3089View\u3078\u901a\u77e5\u3092\u884c\u3044\u305f\u3044\u3068\u3044\u3046\u30b1\u30fc\u30b9\u306f\u591a\u3044\u3067\u3059\u3002\n\n## \u30a4\u30d9\u30f3\u30c8\uff08\u30c7\u30ea\u30b2\u30fc\u30c8\uff09\u3092\u5229\u7528\u3059\u308b\u3002\n\nWPF\u306b\u306fViewModel\u304b\u3089View\u3078\u901a\u77e5\u3059\u308b\u7279\u5225\u306a\u6a5f\u80fd\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001View \u306f DataContext \u7d4c\u7531\u3067 ViewModel \u3078\u306e\u53c2\u7167\u3092\n\u4fdd\u6301\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u666e\u901a\u306b ViewModel \u306e\u30d1\u30d6\u30ea\u30c3\u30af\u306a\u30d7\u30ed\u30d1\u30c6\u30a3\u3084\u30e1\u30bd\u30c3\u30c9\u3001\u30a4\u30d9\u30f3\u30c8\u3001\u30c7\u30ec\u30b2\u30fc\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u304c\n\u3067\u304d\u307e\u3059\u3002ViewModel\u304b\u3089View\u3078\u306e\u901a\u77e5\u306fViewModel\u306b\u30a4\u30d9\u30f3\u30c8\uff08\u30c7\u30ea\u30b2\u30fc\u30c8\uff09\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u884c\u3048\u307e\u3059\u3002\u7279\u5225\u306a\u6a5f\u80fd\u306f\n\u5fc5\u8981\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u306d\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066ViewModel \u304b\u3089 View\u3092\u30af\u30ed\u30fc\u30ba\u3059\u308b\u30b3\u30fc\u30c9\u3092\u793a\u3057\u307e\u3059\u3002\n\n## ViewModel\u304b\u3089View\u306bWindow\u3092\u30af\u30ed\u30fc\u30ba\u3059\u308b\u3088\u3046\u901a\u77e5\u3059\u308b\u30b5\u30f3\u30d7\u30eb\n\n```csharp:ViewModel.cs \nclass ViewModel : ViewModelBase\n{\n    // \u30a4\u30d9\u30f3\u30c8\n    public event EventHandler<EventArgs> CloseView;\n  \n    // \u30b3\u30de\u30f3\u30c9\n    public ICommand CloseCommand { get; private set; }\n\n    // \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n    public ViewModel()\n    {\n        CloseCommand = CreateCommand(v => \n            { \n                if (CloseView != null) \n                    CloseView(this, EventArgs.Empty); \n            });\n    }\n}\n```\n\n```csharp:MainWindow.xaml.cs\npublic partial class MainWindow : Window\n{\n    public MainWindow()\n    {\n        InitializeComponent();\n\n        DataContextChanged += (o, e) =>\n            {\n                ViewModel vm = DataContext as ViewModel;\n                if (vm != null)\n                {\n                    vm.CloseView += (sender, arg) => { Close(); };\n                }\n            };\n\n        DataContext = new ViewModel();\n    }\n}\n```\n\n```xml:MainWindow.xaml\n<Window x:Class=\"WpfTest.MainWindow\"\n        xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\n        xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n        xmlns:local=\"clr-namespace:WpfTest\"\n        Title=\"MainWindow\" Height=\"350\" Width=\"525\">\n    <Grid>\n        <Button Content=\"\u9589\u3058\u308b\" FontSize=\"14\" Padding=\"20,10,20,10\" VerticalAlignment=\"Center\" HorizontalAlignment=\"Center\" Command=\"{Binding CloseCommand}\" />\n    </Grid>\n</Window>\n```", "tags": ["C#", "WPF", "\u57fa\u790e"]}