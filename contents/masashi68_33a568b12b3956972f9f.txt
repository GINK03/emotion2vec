{"tags": ["SQLServer"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4f5c\u308a\u306b\u3069\u3046\u305e\u3002\n--\u3053\u306e\u90e8\u5206\u306f\u4efb\u610f\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\u306b\u5909\u66f4\nuse master\n--\u5168\u30c6\u30fc\u30d6\u30eb\u30ea\u30b9\u30c8\nselect *  from\n(\nSELECT\n        (select name from sys.schemas where T.schema_id = schema_id) \u30b9\u30ad\u30fc\u30de,\n        T.name AS \u8868\u540d,\n        C.column_id AS \u5217\u756a,\n        C.name AS \u5217\u540d,\n        Y.name AS \u578b,\n        CASE \n            WHEN Y.name IN ('nvarchar', 'nchar') THEN C.max_length / 2 \n            WHEN C.precision = 0 THEN C.max_length \n            ELSE C.precision \n        END AS \u6841,\n        C.scale AS \u5c0f\u6570\u6841,\n        C.max_length as [\u30b5\u30a4\u30ba(\u30d0\u30a4\u30c8)],\n         C.is_nullable AS Null\u53ef,\n         (select COUNT(*) from sys.index_columns ic where ic.column_id = C.column_id and C.object_id = ic.object_id and exists (select * from sys.key_constraints kc where kc.type = 'PK' and kc.parent_object_id = T.object_id and kc.unique_index_id = ic.index_id ))  as [PK],\n         ep.value as \u8aac\u660e\nFROM    sys.tables AS T INNER JOIN\n        sys.columns AS C ON T.object_id = C.object_id INNER JOIN\n        sys.types AS Y ON C.system_type_id = Y.system_type_id AND C.user_type_id = Y.user_type_id  left OUTER JOIN\n        sys.extended_properties AS ep ON C.object_id = ep.major_id and C.column_id = ep.minor_id\n) z\norder by z.\u30b9\u30ad\u30fc\u30de, z.\u8868\u540d, z.\u5217\u756a\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4f5c\u308a\u306b\u3069\u3046\u305e\u3002\n\n--\u3053\u306e\u90e8\u5206\u306f\u4efb\u610f\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\u306b\u5909\u66f4\nuse master\n\n--\u5168\u30c6\u30fc\u30d6\u30eb\u30ea\u30b9\u30c8\nselect *  from\n(\nSELECT  \n\t\t(select name from sys.schemas where T.schema_id = schema_id) \u30b9\u30ad\u30fc\u30de,\n\t\tT.name AS \u8868\u540d,\n        C.column_id AS \u5217\u756a,\n        C.name AS \u5217\u540d,\n        Y.name AS \u578b,\n        CASE \n\t\t\tWHEN Y.name IN ('nvarchar', 'nchar') THEN C.max_length / 2 \n\t\t\tWHEN C.precision = 0 THEN C.max_length \n\t\t\tELSE C.precision \n\t\tEND AS \u6841,\n        C.scale AS \u5c0f\u6570\u6841,\n\t\tC.max_length as [\u30b5\u30a4\u30ba(\u30d0\u30a4\u30c8)],\n         C.is_nullable AS Null\u53ef,\n         (select COUNT(*) from sys.index_columns ic where ic.column_id = C.column_id and C.object_id = ic.object_id and exists (select * from sys.key_constraints kc where kc.type = 'PK' and kc.parent_object_id = T.object_id and kc.unique_index_id = ic.index_id ))  as [PK],\n         ep.value as \u8aac\u660e\n         \n\nFROM    sys.tables AS T INNER JOIN\n        sys.columns AS C ON T.object_id = C.object_id INNER JOIN\n        sys.types AS Y ON C.system_type_id = Y.system_type_id AND C.user_type_id = Y.user_type_id  left OUTER JOIN\n        sys.extended_properties AS ep ON C.object_id = ep.major_id and C.column_id = ep.minor_id\n) z\norder by z.\u30b9\u30ad\u30fc\u30de, z.\u8868\u540d, z.\u5217\u756a"}