{"context": "\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u4f55\u304b\u3057\u305f\u3044\u3068\u304d\u3001\u30a2\u30ab\u30a6\u30f3\u30c8ID\u304c\u3055\u304f\u3063\u3068\u3068\u308c\u308b\u3068\u52a9\u304b\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3088\u306d \n\u4ee5\u4e0b\u3067\u53d6\u5f97\u53ef\u80fd\u3067\u3059\u3002\n$ ACCOUNT_ID=`aws sts get-caller-identity --query 'Account' --output text`;\n$ echo $ACCOUNT_ID;\n123456789012\n\n\n\u88dc\u8db3\naws sts get-caller-identity \u306f\u3001API\u306e\u547c\u3073\u51fa\u3057\u3092\u884c\u3063\u305f IAM Identity \u306e\u60c5\u5831\u3092\u8fd4\u5374\u3057\u307e\u3059\u3002\n\u3053\u308c\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u3069\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u547c\u3073\u51fa\u3057\u304c\u3055\u308c\u305f\u3082\u306e\u304b\u304c\u308f\u304b\u308b\u306e\u3067\u3001\u8907\u6570\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f7f\u3044\u5206\u3051\u3066\u3044\u308b\u3088\u3046\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3082\u8a8d\u8a3c\u60c5\u5831\u3092\u5225\u306b\u7ba1\u7406\u3059\u308b\u5fc5\u8981\u304c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\nIAM User\n<GetCallerIdentityResponse xmlns=\"https://sts.amazonaws.com/doc/2011-06-15/\">\n  <GetCallerIdentityResult>\n    <Arn>arn:aws:iam::123456789012:user/Alice</Arn>\n    <UserId>AKIAI44QH8DHBEXAMPLE</UserId>\n    <Account>123456789012</Account>\n  </GetCallerIdentityResult>\n  <ResponseMetadata>\n    <RequestId>01234567-89ab-cdef-0123-456789abcdef</RequestId>\n  </ResponseMetadata>\n</GetCallerIdentityResponse>\n\n\nAssumeRole\u3067\u53d6\u5f97\u3057\u305f\u30bb\u30c3\u30b7\u30e7\u30f3\u5834\u5408\n\u5225\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u304b\u3089AssumeRole\u3057\u305f\u5834\u5408\u306f\u3001Role\u3092\u5f15\u304d\u53d7\u3051\u305f\u5148\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3068\u306a\u308a\u307e\u3059\u3002\u307e\u305f\u3001ARN\u3067\u306f\u30ed\u30fc\u30eb\u540d\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u540d\u304c\u542b\u307e\u308c\u307e\u3059\u3002\n<GetCallerIdentityResponse xmlns=\"https://sts.amazonaws.com/doc/2011-06-15/\">\n  <GetCallerIdentityResult>\n     <Arn>arn:aws:sts::123456789012:assumed-role/my-role-name/my-role-session-name</Arn>\n    <UserId>AKIAI44QH8DHBEXAMPLE:my-role-session-name</UserId>\n    <Account>123456789012</Account>\n  </GetCallerIdentityResult>\n  <ResponseMetadata>\n    <RequestId>01234567-89ab-cdef-0123-456789abcdef</RequestId>\n  </ResponseMetadata>\n</GetCallerIdentityResponse>\n\n\nGetFederationToken\u3067\u53d6\u5f97\u3057\u305f\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u5834\u5408\n<GetCallerIdentityResponse xmlns=\"https://sts.amazonaws.com/doc/2011-06-15/\">\n  <GetCallerIdentityResult>\n    <Arn>arn:aws:sts::123456789012:federated-user/my-federated-user-name</Arn>\n    <UserId>123456789012:my-federated-user-name</UserId>\n    <Account>123456789012</Account>\n  </GetCallerIdentityResult>\n  <ResponseMetadata>\n    <RequestId>01234567-89ab-cdef-0123-456789abcdef</RequestId>\n  </ResponseMetadata>\n</GetCallerIdentityResponse>\n\n\nRef\n\nhttp://docs.aws.amazon.com/cli/latest/reference/sts/get-caller-identity.html\nhttp://docs.aws.amazon.com/ja_jp/STS/latest/APIReference/API_GetCallerIdentity.html\n\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u4f55\u304b\u3057\u305f\u3044\u3068\u304d\u3001\u30a2\u30ab\u30a6\u30f3\u30c8ID\u304c\u3055\u304f\u3063\u3068\u3068\u308c\u308b\u3068\u52a9\u304b\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3088\u306d :relaxed:\n\u4ee5\u4e0b\u3067\u53d6\u5f97\u53ef\u80fd\u3067\u3059\u3002\n\n```sh\n$ ACCOUNT_ID=`aws sts get-caller-identity --query 'Account' --output text`;\n$ echo $ACCOUNT_ID;\n123456789012\n```\n\n# \u88dc\u8db3\n\n`aws sts get-caller-identity` \u306f\u3001API\u306e\u547c\u3073\u51fa\u3057\u3092\u884c\u3063\u305f IAM Identity \u306e\u60c5\u5831\u3092\u8fd4\u5374\u3057\u307e\u3059\u3002\n\u3053\u308c\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u3069\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u547c\u3073\u51fa\u3057\u304c\u3055\u308c\u305f\u3082\u306e\u304b\u304c\u308f\u304b\u308b\u306e\u3067\u3001\u8907\u6570\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f7f\u3044\u5206\u3051\u3066\u3044\u308b\u3088\u3046\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3082\u8a8d\u8a3c\u60c5\u5831\u3092\u5225\u306b\u7ba1\u7406\u3059\u308b\u5fc5\u8981\u304c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\n## IAM User\n\n```xml\n<GetCallerIdentityResponse xmlns=\"https://sts.amazonaws.com/doc/2011-06-15/\">\n  <GetCallerIdentityResult>\n    <Arn>arn:aws:iam::123456789012:user/Alice</Arn>\n    <UserId>AKIAI44QH8DHBEXAMPLE</UserId>\n    <Account>123456789012</Account>\n  </GetCallerIdentityResult>\n  <ResponseMetadata>\n    <RequestId>01234567-89ab-cdef-0123-456789abcdef</RequestId>\n  </ResponseMetadata>\n</GetCallerIdentityResponse>\n```\n\n## AssumeRole\u3067\u53d6\u5f97\u3057\u305f\u30bb\u30c3\u30b7\u30e7\u30f3\u5834\u5408\n\n\u5225\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u304b\u3089AssumeRole\u3057\u305f\u5834\u5408\u306f\u3001Role\u3092\u5f15\u304d\u53d7\u3051\u305f\u5148\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3068\u306a\u308a\u307e\u3059\u3002\u307e\u305f\u3001ARN\u3067\u306f\u30ed\u30fc\u30eb\u540d\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u540d\u304c\u542b\u307e\u308c\u307e\u3059\u3002\n\n```xml\n<GetCallerIdentityResponse xmlns=\"https://sts.amazonaws.com/doc/2011-06-15/\">\n  <GetCallerIdentityResult>\n     <Arn>arn:aws:sts::123456789012:assumed-role/my-role-name/my-role-session-name</Arn>\n    <UserId>AKIAI44QH8DHBEXAMPLE:my-role-session-name</UserId>\n    <Account>123456789012</Account>\n  </GetCallerIdentityResult>\n  <ResponseMetadata>\n    <RequestId>01234567-89ab-cdef-0123-456789abcdef</RequestId>\n  </ResponseMetadata>\n</GetCallerIdentityResponse>\n```\n\n## GetFederationToken\u3067\u53d6\u5f97\u3057\u305f\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u5834\u5408\n\n```xml\n<GetCallerIdentityResponse xmlns=\"https://sts.amazonaws.com/doc/2011-06-15/\">\n  <GetCallerIdentityResult>\n    <Arn>arn:aws:sts::123456789012:federated-user/my-federated-user-name</Arn>\n    <UserId>123456789012:my-federated-user-name</UserId>\n    <Account>123456789012</Account>\n  </GetCallerIdentityResult>\n  <ResponseMetadata>\n    <RequestId>01234567-89ab-cdef-0123-456789abcdef</RequestId>\n  </ResponseMetadata>\n</GetCallerIdentityResponse>\n```\n\n\n# Ref\n\n- http://docs.aws.amazon.com/cli/latest/reference/sts/get-caller-identity.html\n- http://docs.aws.amazon.com/ja_jp/STS/latest/APIReference/API_GetCallerIdentity.html\n\n", "tags": ["AWS", "aws-cli", "AWSSTS"]}