{"context": "\u4f55\u304b\u3068CentOS\uff17\u3060\u3068KVM\u306e\u8a2d\u5b9a\u304cCentOS6\u3068\u5fae\u5999\u306b\u9055\u3046\u3002\n\u30d6\u30ea\u30c3\u30b8\u4f5c\u3063\u305f\u308a\u3001Disk\u30a4\u30e1\u30fc\u30b8\u4f5c\u3063\u305f\u308a\u306f\u4ed6\u3092\u53c2\u7167\n[prompt ~]# pwd\n /root\n[prompt ~]# cat guest01.cfg\n#version=RHEL7\n\ninstall\ncdrom\ntext\ncmdline\nskipx\n\nlang en_US.UTF-8\nkeyboard --vckeymap=jp106 --xlayouts=jp\ntimezone Asia/Tokyo --isUtc --nontp\n\nnetwork  --bootproto=dhcp --device=eth0 --nameserver=8.8.8.8 --noipv6 --hostname=bs-lrepo\n\nzerombr\nbootloader --location=mbr\n\nclearpart --all --initlabel\npart / --fstype=xfs --grow --size=1 --asprimary --label=root\n\nrootpw --plaintext B1tsurfS$G\nauth --enableshadow --passalgo=sha512\nselinux --disabled\nfirewall --disabled\nfirstboot --disabled\n\n%post\n## virsh console\u3000\u30cf\u30f3\u30b0\u56de\u907f\u5bfe\u5fdc\n/bin/echo GRUB_CMDLINE_LINUX=\\\"vconsole.keymap=jp106 crashkernel=auto vconsole.font=latarchrheb-sun16 console=tty0 console=ttyS0,115200n8r\\\" > /etc/default/grub\n/sbin/grub2-mkconfig -o /boot/grub2/grub.cfg\n%end\n\nreboot\n\n%packages\n%end\n\n\n[prompt ~]# virt-install --name guest01 --hvm --virt-type kvm --ram 4096 --vcpus 2 --arch x86_64 --os-type linux --os-variant rhel7 --boot hd --disk path=/var/lib/libvirt/disk/bs-lrepo.qcow2 --serial pty --console pty --location /var/lib/libvirt/iso/CentOS-7-x86_64-Minimal-1503-01.iso --graphics vnc,port=5902,listen=0.0.0.0,keymap=ja --initrd-inject bs-lrepo.cfg --extra-args \"inst.ks=file:/guest01.cfg console=tty0\" --noautoconsole\n\n\u4f55\u304b\u3068CentOS\uff17\u3060\u3068KVM\u306e\u8a2d\u5b9a\u304cCentOS6\u3068\u5fae\u5999\u306b\u9055\u3046\u3002\n\u30d6\u30ea\u30c3\u30b8\u4f5c\u3063\u305f\u308a\u3001Disk\u30a4\u30e1\u30fc\u30b8\u4f5c\u3063\u305f\u308a\u306f\u4ed6\u3092\u53c2\u7167\n\n```\n[prompt ~]# pwd\n /root\n[prompt ~]# cat guest01.cfg\n#version=RHEL7\n\ninstall\ncdrom\ntext\ncmdline\nskipx\n\nlang en_US.UTF-8\nkeyboard --vckeymap=jp106 --xlayouts=jp\ntimezone Asia/Tokyo --isUtc --nontp\n\nnetwork  --bootproto=dhcp --device=eth0 --nameserver=8.8.8.8 --noipv6 --hostname=bs-lrepo\n\nzerombr\nbootloader --location=mbr\n\nclearpart --all --initlabel\npart / --fstype=xfs --grow --size=1 --asprimary --label=root\n\nrootpw --plaintext B1tsurfS$G\nauth --enableshadow --passalgo=sha512\nselinux --disabled\nfirewall --disabled\nfirstboot --disabled\n\n%post\n## virsh console\u3000\u30cf\u30f3\u30b0\u56de\u907f\u5bfe\u5fdc\n/bin/echo GRUB_CMDLINE_LINUX=\\\"vconsole.keymap=jp106 crashkernel=auto vconsole.font=latarchrheb-sun16 console=tty0 console=ttyS0,115200n8r\\\" > /etc/default/grub\n/sbin/grub2-mkconfig -o /boot/grub2/grub.cfg\n%end\n\nreboot\n\n%packages\n%end\n\n\n[prompt ~]# virt-install --name guest01 --hvm --virt-type kvm --ram 4096 --vcpus 2 --arch x86_64 --os-type linux --os-variant rhel7 --boot hd --disk path=/var/lib/libvirt/disk/bs-lrepo.qcow2 --serial pty --console pty --location /var/lib/libvirt/iso/CentOS-7-x86_64-Minimal-1503-01.iso --graphics vnc,port=5902,listen=0.0.0.0,keymap=ja --initrd-inject bs-lrepo.cfg --extra-args \"inst.ks=file:/guest01.cfg console=tty0\" --noautoconsole\n```\n", "tags": ["centos7", "kickstart", "KVM"]}