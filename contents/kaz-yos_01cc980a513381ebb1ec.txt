{"context": " More than 1 year has passed since last update.\n\n\u3053\u308c\u306f\u306a\u306b\u304b?\nQiita\u306eR Advent Calendar 2014 ( http://qiita.com/advent-calendar/2014/r-rstudio )\u306e8\u65e5\u76ee\u3067\u3059\u3002ATND\u306b\u3042\u308b\u3084\u3064\u306e\u65b9\u304c\u6804\u3048\u3066\u3044\u308b\u3088\u3046\u3067\u3059( https://atnd.org/events/58648 )\u3002\n\n\u3061\u307e\u305f\u3067\u95a2\u6570\u578b\u8a00\u8a9e\u304c\u5927\u30d6\u30fc\u30e0\n\u95a2\u6570\u578b\u8a00\u8a9e\u3001\u306f\u3084\u3063\u3066\u307e\u3059\u306d\u3002\u95a2\u6570\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u5b9f\u8df5\u5165\u9580\u306a\u3069\u306b\u3088\u308b\u3068\u3001\u4e26\u5217\u51e6\u7406\u3084\u9ad8\u5ea6\u306a\u62bd\u8c61\u5316(\u30b3\u30fc\u30c9\u304c\u77ed\u304b\u304f\u306a\u308b)\u306a\u3069\u306e\u89b3\u70b9\u304b\u3089\u6ce8\u76ee\u304c\u9ad8\u307e\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\u672c\u3092\u8cb7\u3046\u306e\u304c\u5927\u597d\u304d\u306a\u79c1\u306f\u95a2\u6570\u578b\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u672c\u3060\u3051\u3067\u4f55\u518a\u3082\u8cb7\u3044\u307e\u3057\u305f\u3002\u5f53\u7136\u307b\u3068\u3093\u3069\u8aad\u3093\u3067\u3044\u307e\u305b\u3093\u3002\n\u4f55\u3092\u6301\u3063\u3066\u95a2\u6570\u578b\u8a00\u8a9e\u3068\u3044\u3046\u306e\u304b\u306b\u3064\u3044\u3066\u306f\u610f\u898b\u304c\u5225\u308c\u308b\u3088\u3046\u3067\u3059\u304c\u3001\u53e4\u5178\u7684\u306b\u306f\u95a2\u6570\u304c\u5024\u3068\u3057\u3066\u81ea\u5728\u306b\u6271\u3048\u308b\u3053\u3068\u3001\u6700\u8fd1\u306fimmutability (\u7834\u58ca\u7684\u518d\u4ee3\u5165\u3084mutation\u3092\u8a31\u5bb9\u3057\u306a\u3044\u3001\u3064\u307e\u308a\u72b6\u614b(state)\u5909\u5316\u306e\u6291\u6b62)\u306a\u3069\u304c\u3044\u308f\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002ML\u7cfb\u8a00\u8a9e(Standard ML, OCaml\u306a\u3069\u3002Haskell\u3084F#\u3082\u3053\u306e\u6d41\u308c\u3092\u304f\u3080?)\u3067\u306f\u3001\u9759\u7684\u578b\u4ed8\u3051(static typing)/\u578b\u63a8\u8ad6(type inference)\u3082\u8a71\u984c\u306b\u306a\u308a\u307e\u3059\u304c\u3001\u52d5\u7684\u578b\u4ed8\u3051(dynamic typing)\u306eClojure\u3082\u95a2\u6570\u578b\u8a00\u8a9e\u306b\u5206\u985e\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u3001\u95a2\u6570\u578b\u8a00\u8a9e\u306e\u5fc5\u8981\u6761\u4ef6\u3067\u306f\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n\u79c1\u306f\u4eca\u5e74\u306fClojure\u3068Standard ML\u3092\u3059\u3053\u3057\u52c9\u5f37\u3057\u307e\u3057\u305f\u3002\u524d\u8005\u306f4clojure ( https://www.4clojure.com )\u3068Functional Programming in Clojure ( http://mooc.cs.helsinki.fi/clojure )\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002Boston Clojure\u3084Tokyo.clj\u306b\u3082\u884c\u3063\u3066\u307f\u307e\u3057\u305f\u3002lisp\u306f\u6587\u6cd5\u304c\u3064\u308b\u3063\u3068\u3057\u305f\u611f\u3058\u304c\u3057\u3066\u3044\u3044\u3067\u3059\u306d\u3002\u5f8c\u8005\u306fCoursera\u3067\u3084\u3063\u3066\u3044\u305fProgramming Languages ( https://www.coursera.org/course/proglang )\u3068\u3044\u3046\u30b3\u30fc\u30b9\u306e\u4e00\u74b0\u3067\u3084\u308a\u307e\u3057\u305f\u3002R\u3068Emacs lisp\u304c\u4e3b\u8981\u8a00\u8a9e\u306e\u79c1\u306f\u3001\u9759\u7684\u578b\u4ed8\u3051\u3082\u578b\u63a8\u8ad6\u3082\u3069\u3061\u3089\u3082\u521d\u3081\u3066\u3060\u3063\u305f\u306e\u3067\u3001\u304a\u3082\u3057\u308d\u3044\u7d4c\u9a13\u3067\u3057\u305f\u3002\u307e\u3042\u3001\u3069\u3061\u3089\u3082\u79c1\u306e\u80fd\u529b\u3067\u306f\u5b9f\u7528\u304b\u3089\u306f\u307b\u3069\u9060\u3044\u3067\u3059\u304c\u3002\n\nR\u8a00\u8a9e\u306f\u95a2\u6570\u578b\u8a00\u8a9e\u306a\u306e\u304b?\n\u3067\u3001\u79c1\u305f\u3061\u306e\u611b\u3057\u3066\u3084\u307e\u306a\u3044R\u8a00\u8a9e\u306f\u95a2\u6570\u578b\u8a00\u8a9e\u306a\u306e\u3067\u3057\u3087\u3046\u304b? \u53e4\u5178\u7684\u306a\u95a2\u6570\u3092\u81ea\u7531\u306b\u6271\u3048\u308b\u3068\u3044\u3046\u70b9\u306f\u6e80\u3057\u305d\u3046\u3067\u3059\u3002\u4e0b\u8a18\u306e\u3054\u3068\u304f\u7121\u540d\u95a2\u6570\u306ffunction\u3068\u3044\u3046class\u3092\u6301\u3064\u4e00\u7d1a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u3001\u95a2\u6570\u5b9a\u7fa9\u306f\u7121\u540d\u95a2\u6570\u672c\u4f53\u3092\u4ee3\u5165\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002(\u7121\u540d)\u95a2\u6570\u3092\u5f15\u6570\u3068\u3057\u3066\u4f7f\u3046\u9ad8\u968e\u95a2\u6570(higher-order function)\u306f\u3001\u4e0b\u8a18\u306e\u4f8b\u304cR\u3063\u307d\u3044\u304b\u306f\u5225\u3068\u3057\u3066lapply\u3084sapply\u306a\u3069\u3067\u4e00\u822c\u7684\u3067\u3059\u3002\u7121\u540d\u95a2\u6570\u672c\u4f53\u3092\u5024\u3068\u3057\u3066\u8fd4\u3059\u306e\u3082\u3001\u95a2\u6570\u5b9a\u7fa9\u6642\u306e\u74b0\u5883(\u4e0b\u8a18\u306e\u4f8b\u3067\u306fn = 3)\u3092\u6301\u3061\u6b69\u304f(\u74b0\u5883\u3068\u95a2\u6570\u3092\u3042\u308f\u305b\u3066closure\u3068\u547c\u3076)\u306e\u3082\u666e\u901a\u3067\u3059\u3002\n## \u7121\u540d\u95a2\u6570\u306f\"function\"\u30af\u30e9\u30b9\nclass(function(x){x*x})\n## [1] \"function\"\n\n## \u305d\u306e\u307e\u307e\u4f7f\u3048\u308b\n(function(x){x*x})(3)\n## [1] 9\n\n## \u95a2\u6570\u5b9a\u7fa9\u306f\u7121\u540d\u95a2\u6570\u672c\u4f53\u3092\u4ee3\u5165\u3057\u3066\u3044\u308b\u3060\u3051\nsquare = function(x){x*x}\nsquare(3)\n## [1] 9\n\n## \u7121\u540d\u95a2\u6570\u672c\u4f53\u3092\u9ad8\u968e\u95a2\u6570sapply\u306e\u5f15\u6570\u3068\u3057\u3066\u5229\u7528\nsapply(1:10, function(x){x*x})\n##  [1]   1   4   9  16  25  36  49  64  81 100\n\n## \u7121\u540d\u95a2\u6570\u3092\u8fd4\u3059\u95a2\u6570\naddN = function(n) {\n    function(x) {\n        x + n\n    }\n}\n## n = 3\u306e\u74b0\u5883\u3092\u6301\u3061\u6b69\u304f\u7121\u540d\u95a2\u6570\u3092add3\u306b\u4ee3\u5165\nadd3 <- addN(n = 3)\n## \u9ad8\u968e\u95a2\u6570sapply\u306e\u5f15\u6570\u3068\u3057\u3066\u5229\u7528\nsapply(1:10, add3)\n##  [1]  4  5  6  7  8  9 10 11 12 13\n\n\u72b6\u614b\u5909\u5316\u3092\u6291\u6b62\u3059\u308bimmutability\u306b\u3064\u3044\u3066\u306f\u3069\u3046\u3067\u3057\u3087\u3046\u304b? \u7834\u58ca\u7684\u518d\u4ee3\u5165\u306f\u3044\u304f\u3089\u3067\u3082\u3067\u304d\u307e\u3059\u3002\u3068\u3044\u3046\u304b\u3001interactive\u306b\u4f7f\u3046\u3053\u3068\u304c\u591a\u3044\u7d71\u8a08\u89e3\u6790\u8a00\u8a9e\u3067\u3042\u308bR\u3067\u306f\u3001\u3053\u308c\u3092\u6291\u6b62\u3059\u308b\u306e\u306f\u53b3\u3057\u3044\u3067\u3057\u3087\u3046\u3002\u5b9a\u7fa9\u3055\u308c\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u518d\u4ee3\u5165\u4ee5\u5916\u306e\u76f4\u63a5\u306emutation\u306f\u307b\u307c\u306a\u3044\u3067\u3059\u3002\u4e0b\u8a18\u3067110..100\u306ea\u3092\u7834\u58ca\u7684\u518d\u4ee3\u5165\u4ee5\u5916\u306e\u65b9\u6cd5\u3067\u30bd\u30fc\u30c8\u3059\u308b\u65b9\u6cd5\u306f\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002R\u3067\u80b2\u3063\u305f\u79c1\u306f\u3001Python\u3067a.sort() (\u30ea\u30b9\u30c8a\u306e\u30bd\u30fc\u30c8\u30e1\u30bd\u30c3\u30c9\u547c\u3073\u51fa\u3057)\u3067\u3001a\u3092\u76f4\u63a5mutation\u3055\u305b\u308b\u306e\u3092\u898b\u305f\u3068\u304d\u306f\u3061\u3087\u3063\u3068\u3073\u3063\u304f\u308a\u3057\u307e\u3057\u305f\u3002\u3061\u306a\u307f\u306b\u3001R\u3067\u3082\u666e\u901a\u306eobject oriented programming\u3063\u307d\u3044reference class (R5 class\u3068\u304b\u8a00\u308f\u308c\u3066\u3044\u305f\u3082\u306e)\u3092\u4f7f\u3046\u3068\u53ef\u80fd\u306a\u3088\u3046\u3067\u3059\u3002\u307e\u3042\u3001\u3053\u306e\u5fae\u5999\u306aimmutability (\u7834\u58ca\u7684\u518d\u4ee3\u5165\u306f\u8a31\u3059\u3051\u3069\u3001\u4f55\u304b\u3059\u308b\u305f\u3073\u306b\u5143\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u50b7\u4ed8\u3051\u306a\u3044\u305f\u3081\u306b\u30b3\u30d4\u30fc\u304c\u767a\u751f\u3059\u308b)\u304cR\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u60aa\u3055\u306e\u5143\u51f6\u306a\u3088\u3046\u3067\u3059\u304c\u3002\n## \u7834\u58ca\u7684\u518d\u4ee3\u5165\na <- 10\na <- \"hello\"\na <- 110:100\na[1] <- 111 # \u3053\u308c\u3092mutation\u3068\u3068\u308b\u306e\u304b\u7834\u58ca\u7684\u518d\u4ee3\u5165\u3068\u3068\u308b\u306e\u304b\u4e0d\u660e?\na\n##  [1] 111 109 108 107 106 105 104 103 102 101 100\n\n## \u95a2\u6570\u306b\u3088\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306emutation\u306f\u306a\u3044\nsort(a)\n##  [1] 100 101 102 103 104 105 106 107 108 109 111\n\na\n##  [1] 111 109 108 107 106 105 104 103 102 101 100\n\n## b\u306fa\u306e\u30b3\u30d4\u30fc\u306a\u306e\u3067\u3001\u4ee5\u964da\u3092\u3044\u3058\u3063\u3066\u3082\u5f71\u97ff\u3092\u53d7\u3051\u306a\u3044\nb = a\na <- \"a has been changed\"\nb\n##  [1] 111 109 108 107 106 105 104 103 102 101 100\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001R\u8a00\u8a9e\u304c\u95a2\u6570\u578b\u8a00\u8a9e\u304b\u3069\u3046\u304b\u306f\u5b9a\u7fa9\u306b\u3088\u308b\u3068\u3044\u3046\u5fae\u5999\u306a\u7d50\u8ad6\u306a\u3088\u3046\u3067\u3059\u3002\n\nR\u3067\u95a2\u6570\u578b\u8a00\u8a9e\u3063\u307d\u3044\u8868\u73fe\u3092\u3059\u308b\n\u3042\u307e\u308a\u5f79\u306b\u305f\u305f\u306a\u3044\u306f\u306a\u3057\u306f\u3053\u3053\u307e\u3067\u306b\u3057\u3066\u3001\u95a2\u6570\u578b\u8a00\u8a9e\u3067\u307f\u304b\u3051\u308b\u8868\u73fe\u3092R\u3067\u3082\u4f7f\u3063\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u95a2\u6570\u5408\u6210(functional composition)\n\u9023\u7d9a\u3057\u3066\u9069\u7528\u3059\u308b\u8907\u6570\u306e\u95a2\u6570\u3092\u307e\u3068\u3081\u3066\u3001\u4e00\u3064\u306e\u95a2\u6570\u306b\u3057\u307e\u3059\u3002\u6570\u5b66\u7684\u306b\u306f\u4e0b\u8a18\u306e\u3054\u3068\u304f\u3067\u3057\u3087\u3046\u304b\u3002\u6700\u8fd1\u826f\u304f\u307f\u304b\u3051\u308bpipeline\u306b\u4f3c\u3066\u3044\u307e\u3059\u304c\u3001\u95a2\u6570\u5408\u6210\u3067\u306f\u8fd4\u3063\u3066\u304f\u308b\u306e\u306f\u95a2\u6570\u306a\u306e\u3067\u540d\u524d\u3092\u3064\u3051\u308c\u3070\u518d\u5229\u7528\u3067\u304d\u307e\u3059\u3002\nh(g(f(x)))=(h\u2218g\u2218f)(x)h(g(f(x))) = (h \\circ g \\circ f) (x)\n\u3042\u307e\u308a\u610f\u5473\u304c\u306a\u3044\u3067\u3059\u304c\u3001\u4e00\u9023\u306e\u6570\u5b57\u306esquare sum\u3092negative\u306b\u3059\u308b\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u307f\u307e\u3059\u3002Standard ML\u3067\u306fo(\u5c0f\u6587\u5b57\u306eO)\u3092\u3064\u304b\u3044\u307e\u3059\u3002\u4e0b\u304b\u3089\u4e09\u756a\u76ee\u304c\u95a2\u6570\u5408\u6210\u3067\u3059\u3001\u6570\u5b66\u7684\u5b9a\u7fa9\u305d\u306e\u307e\u307e\u3067\u3001\u53f3\u304b\u3089\u8aad\u307f\u307e\u3059\u3002\n(* \u5408\u6210\u3059\u308b\u95a2\u6570\u3092\u5b9a\u7fa9\u3002\u3053\u3053\u306f\u3042\u307e\u308a\u6c17\u306b\u3057\u306a\u3044 *)\nfun square xs =\n    case xs of\n        [] => []\n      | x::xs' => (x*x)::(sq xs')\nfun sum xs =\n    case xs of\n        [] => 0\n      | x::xs' => x + (sum xs')\nfun negate x =\n    ~x\n(* \u3053\u308c\u304c\u95a2\u6570\u5408\u6210\u306e\u90e8\u5206 *)\nval neg_sq_sum = negate o sum o square\n(* \u5b9f\u969b\u4f7f\u7528 *)\nneg_sq_sum [0,1,2,3,4,5,6,7,8,9,10]\n(* \u7d50\u679c :  val it = ~385 : int *)\n\nR\u3067\u306ffunctional\u3068\u3044\u3046\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u3042\u308a\u3001\u305d\u306e\u306a\u304b\u306bCompose\u3068\u3044\u3046\u95a2\u6570\u5408\u6210\u306e\u305f\u3081\u306e\u95a2\u6570\u304c\u3042\u308a\u307e\u3059\u3002\u5de6\u304b\u3089\u53f3\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u304c\u3001\u6570\u5b66\u7684\u306b\u306f\u3061\u3087\u3063\u3068\u3044\u307e\u3044\u3061\u306a\u6c17\u304c\u3057\u307e\u3059\u304c\u3001\u5b9f\u969b\u306f\u8aad\u307f\u3084\u3059\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u5f15\u6570\u304c\u3072\u3068\u3064\u306e\u95a2\u6570\u3057\u304b\u4f7f\u3048\u306a\u3044\u3088\u3046\u3067\u3059\u3002\u591a\u5c11\u4f7f\u3048\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u4f8b\u3068\u3057\u3066\u306f\u3001\u3068\u304d\u3069\u304d\u4f7f\u3046coef(summary(regressionObject))\u5c02\u7528\u306eCoefTable\u3068\u3044\u3046\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u307f\u307e\u3057\u305f\u3002\nlibrary(functional)\nnegate = function(x) {-x}\n## \u3053\u308c\u304c\u95a2\u6570\u5408\u6210\u306e\u90e8\u5206\nNegSqSum = Compose(square, sum, negate)\nNegSqSum(0:10)\n## [1] -385\n\n## \u591a\u5c11\u5b9f\u7528\u7684\u306a\u4f8b\nCoefTable = Compose(summary, coef)\nCoefTable(lm(Sepal.Length ~ Petal.Length + Species, data = iris))\n##                     Estimate Std. Error   t value     Pr(>|t|)\n## (Intercept)        3.6835266 0.10609608 34.718780 1.968671e-72\n## Petal.Length       0.9045646 0.06478559 13.962436 1.121002e-28\n## Speciesversicolor -1.6009717 0.19346616 -8.275203 7.371529e-14\n## Speciesvirginica  -2.1176692 0.27346121 -7.743947 1.480296e-12\n\n\u90e8\u5206\u9069\u7528(partial application)\n\u8907\u6570\u306e\u5f15\u6570\u3092\u53d6\u308b\u95a2\u6570\u306e\u3044\u304f\u3064\u304b\u3092\u56fa\u5b9a\u3057\u305f\u72b6\u614b\u306e\u95a2\u6570\u3092\u8fd4\u3059\u3053\u3068\u3067\u3059\u3002Clojure\u3060\u3068partial\u3068\u3044\u3046\u95a2\u6570\u3092\u4f7f\u3044\u307e\u3059\u3002\u4e0b\u8a18\u3067\u306f\u304b\u3051\u7b97\u306e\"*\"\u95a2\u6570\u306e\u4e00\u756a\u76ee\u306e\u5f15\u6570\u3068\u3057\u306610\u3092\u9069\u7528\u3057\u3066\u56fa\u5b9a\u3057\u305f\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3001times10\u3068\u3044\u3046\u540d\u524d\u306b\u3057\u3066\u3044\u307e\u3059\u3002times10\u306b9\u3092\u4e0e\u3048\u308c\u307010\u500d\u306b\u3059\u308b\u95a2\u6570\u3067\u3059\u306e\u306790\u3068\u8a55\u4fa1\u3055\u308c\u307e\u3059\u3002\n;; \"*\"\u95a2\u6570\u306b\u6700\u521d\u306e\u5f15\u6570\u3068\u3057\u306610\u3092\u4e0e\u3048\u3066times10\u95a2\u6570\u3068\u3059\u308b\n(def times10 (partial * 10))\n;; times10\u95a2\u6570\u306b9\u3092\u5f15\u6570\u3068\u3057\u3066\u3042\u305f\u3048\u308b\n(times10 9)\n;; => 90\n\n\nR\u3067\u306f\u540c\u3058\u304ffunctional\u306bCurry()\u3068\u3044\u3046\u95a2\u6570\u304c\u3042\u308a\u307e\u3059\u3002\u540d\u524d\u306f\u53b3\u5bc6\u306b\u306f\u9593\u9055\u3063\u3066\u3044\u308b(curry\u5316\u3068\u3044\u3046\u8a00\u8449\u306e\u8aa4\u7528)\u306e\u3067\u3059\u304c\u3001\u3057\u3063\u304b\u308a\u90e8\u5206\u9069\u7528\u3057\u3066\u304f\u308c\u307e\u3059\u3002\u5b9f\u7528\u7684\u306a\u4f8b\u3068\u3057\u3066\u306f\u8907\u6570\u306e\u5f15\u6570\u3092\u53d6\u308b\u95a2\u6570\u3067\u3001\u4e00\u500b\u3060\u3051\u5f15\u6570\u3092\u5909\u5316\u3055\u305b\u306a\u304c\u3089\u304f\u308a\u304b\u3048\u3059\u3068\u3044\u3046\u72b6\u6cc1\u304c\u305f\u307e\u306b\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u3001iris\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u304c\u30e2\u30c7\u30eb\u5f0f\u3092\u3042\u305f\u3048\u308b\u3060\u3051\u3067\u3044\u3064\u3067\u3082\u5206\u6790\u3067\u304d\u308b\u5c02\u7528\u95a2\u6570lmIris\u3092\u5b9a\u7fa9\u3057\u3066\u307f\u307e\u3057\u305f\u3002data\u5f15\u6570\u3092iris\u306b\u56fa\u5b9a\u3057\u3066\u3044formula\u5f15\u6570\u3092\u6b8b\u3057\u3066\u3042\u308b\u308f\u3051\u3067\u3059\u3002\u4fbf\u5229\u3067\u3059\u306d\u30022014-12-26\u8ffd\u8a18Hadley Wickham\u306epryr\u30d1\u30c3\u30b1\u30fc\u30b8\u306bpartial()\u3068\u3044\u3046\u6b63\u3057\u3044\u540d\u524d\u306e\u90e8\u5206\u9069\u7528\u95a2\u6570\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n## \"*\"\u95a2\u6570\u306b\u6700\u521d\u306e\u5f15\u6570\u3068\u3057\u306610\u3092\u4e0e\u3048\u3066times10\u95a2\u6570\u3068\u3059\u308b\ntimes10 = Curry(\"*\", 10)\n## times10\u95a2\u6570\u306b9\u3092\u5f15\u6570\u3068\u3057\u3066\u3042\u305f\u3048\u308b\ntimes10(9)\n## [1] 90\n\n## formula\u3092\u3042\u305f\u3048\u308b\u3060\u3051\u3067iris\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306e\u89e3\u6790\u3092\u3059\u308b\u5c02\u7528\u95a2\u6570\nlmIris = Curry(lm, data = iris)\nresIris = lmIris(Sepal.Length ~ Petal.Length + Species)\n## \u7d50\u679c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5148\u7a0b\u306eCoefTable\u3092\u4f7f\u7528\nCoefTable(resIris)\n##                     Estimate Std. Error   t value     Pr(>|t|)\n## (Intercept)        3.6835266 0.10609608 34.718780 1.968671e-72\n## Petal.Length       0.9045646 0.06478559 13.962436 1.121002e-28\n## Speciesversicolor -1.6009717 0.19346616 -8.275203 7.371529e-14\n## Speciesvirginica  -2.1176692 0.27346121 -7.743947 1.480296e-12\n\n\u305d\u306e\u4ed6\nR\u306e\u95a2\u6570\u30ea\u30c6\u30e9\u30eb\u304c\u9577\u3044\u3068\u3044\u3046\u3053\u3068\u3067hoxo_m\u3055\u3093\u304c\u7c21\u7565\u306a\u8a18\u8f09\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3057\u305f(http://d.hatena.ne.jp/hoxo_m/20141204/p1 )\u3002\u62ec\u5f27\u304c\u5c11\u306a\u304f\u306a\u308a\u307e\u3059\u306d\u3002\n## \u901a\u5e38\nfunction(x) x*x\n## function(x) x*x\n(function(x) x*x)(3)\n## [1] 9\n\n## hoxo_m\u3055\u3093\ndevtools::install_github(\"hoxo-m/lambdaR\")\nlibrary(lambdaR)\nlambda(x: x*x)\n## function(x) x * x\nlambda(x: x*x)(3)\n## [1] 9\n\nML\u7cfb\u3067\u898b\u639b\u3051\u308bpattern matching\u3082\u95a2\u6570\u578b\u8a00\u8a9e\u306e\u5fc5\u8981\u6761\u4ef6\u3067\u306f\u306a\u3055\u305d\u3046\u3067\u3059\u304c\u3001\u95a2\u6570\u578b\u8a00\u8a9e\u306e\u6587\u8108\u3067\u3088\u304f\u51fa\u3066\u304d\u307e\u3059\u3002lambda.r\u3068\u3044\u3046\u30d1\u30c3\u30b1\u30fc\u30b8(\u524d\u8ff0\u3068\u306f\u5225\u3082\u306e; https://github.com/zatonovo/lambda.r )\u3067\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\u5b9f\u7528\u7684\u304b\u306f\u5fae\u5999\u304b\u3082\u3002\u3053\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u306f\u4ed6\u306b\u3082\u3044\u308d\u3044\u308d\u3067\u304d\u305d\u3046\u3067\u3059\u3002\nlibrary(lambda.r)\nfib(0) %as% 1\nfib(1) %as% 1\nfib(n) %as% {fib(n-1) + fib(n-2)}\nsapply(0:10, fib)\n##   [1]  1  1  2  3  5  8 13 21 34 55 89\n\n\u624b\u7fd2\u3044lisper\u3068\u3057\u3066\u306fifelse()\u306e\u30cd\u30b9\u30c8\u3092\u898b\u308b\u3068\u8f9b\u304f\u306a\u308a\u307e\u3059\u3002\u305d\u3093\u306a\u3068\u304d\u306f cond \u3067\u3059\u3088\u306d\u3002\u3069\u3063\u304b\u306b\u306a\u3044\u304b\u3068\u601d\u3063\u305f\u3089gist\u306b\u3053\u308d\u304c\u3063\u3066\u3044\u307e\u3057\u305f(https://gist.github.com/DASpringate/8595464 )\u3002\nFizzBuzz <- function(x) {\n    cond(x %% 15 == 0, \"FizzBuzz\",\n         x %%  3 == 0, \"Fizz\",\n         x %%  5 == 0, \"Buzz\",\n         true = x)\n}\nsapply(1:100, FizzBuzz)\n##  [1] \"1\"    \"2\"    \"Fizz\" \"4\"    \"Buzz\"     \"Fizz\" \"7\"    \"8\"    \"Fizz\" \"Buzz\"\n## [11] \"11\"   \"Fizz\" \"13\"   \"14\"   \"FizzBuzz\" \"16\"   \"17\"   \"Fizz\" \"19\"   \"Buzz\"\n## [21] \"Fizz\" \"22\"   \"23\"   \"Fizz\" \"Buzz\"     \"26\"   \"Fizz\" \"28\"   \"29\"   \"FizzBuzz\"\n## [31] \"31\"   \"32\"   \"Fizz\" \"34\"   \"Buzz\"     \"Fizz\" \"37\"   \"38\"   \"Fizz\" \"Buzz\"\n## [41] \"41\"   \"Fizz\" \"43\"   \"44\"   \"FizzBuzz\" \"46\"   \"47\"   \"Fizz\" \"49\"   \"Buzz\"\n## [51] \"Fizz\" \"52\"   \"53\"   \"Fizz\" \"Buzz\"     \"56\"   \"Fizz\" \"58\"   \"59\"   \"FizzBuzz\"\n## [61] \"61\"   \"62\"   \"Fizz\" \"64\"   \"Buzz\"     \"Fizz\" \"67\"   \"68\"   \"Fizz\" \"Buzz\"\n## [71] \"71\"   \"Fizz\" \"73\"   \"74\"   \"FizzBuzz\" \"76\"   \"77\"   \"Fizz\" \"79\"   \"Buzz\"\n## [81] \"Fizz\" \"82\"   \"83\"   \"Fizz\" \"Buzz\"     \"86\"   \"Fizz\" \"88\"   \"89\"   \"FizzBuzz\"\n## [91] \"91\"   \"92\"   \"Fizz\" \"94\"   \"Buzz\"     \"Fizz\" \"97\"   \"98\"   \"Fizz\" \"Buzz\"\n\n\n\u53c2\u8003\u8cc7\u6599\u306a\u3069\n\n\u95a2\u6570\u578b\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u5b9f\u8df5\u5165\u9580: http://gihyo.jp/book/2014/978-4-7741-6926-2\n\nFunctional Programming in Clojure: http://mooc.cs.helsinki.fi/clojure\n\nPrograming Languages https://www.coursera.org/course/proglang\n\nCRAN functional package: http://cran.r-project.org/web/packages/functional/index.html\n\nCRAN lambda.r package: https://github.com/zatonovo/lambda.r\n\nhoxo_m\u3055\u3093lambda\u5f0f: http://d.hatena.ne.jp/hoxo_m/20141204/p1\n\ngist cond: https://gist.github.com/DASpringate/8595464\n\nAdvanced R: http://adv-r.had.co.nz\n\nMutable objects in R: http://vita.had.co.nz/papers/mutatr.pdf\n\nFunctional composition: http://rosettacode.org/wiki/Function_composition\n\nPartial application: http://rosettacode.org/wiki/Partial_function_application\n\n\u90e8\u5206\u9069\u7528\u3092\u30ab\u30ea\u30fc\u5316\u3068\u547c\u3070\u306a\u3044\u3067: http://kmizu.hatenablog.com/entry/20130317/1363515568\n\n\n\u3053\u308c\u306f\u306a\u306b\u304b?\n--------------------\nQiita\u306eR Advent Calendar 2014 ( http://qiita.com/advent-calendar/2014/r-rstudio )\u306e8\u65e5\u76ee\u3067\u3059\u3002ATND\u306b\u3042\u308b\u3084\u3064\u306e\u65b9\u304c\u6804\u3048\u3066\u3044\u308b\u3088\u3046\u3067\u3059( https://atnd.org/events/58648 )\u3002\n\n\n\n\u3061\u307e\u305f\u3067\u95a2\u6570\u578b\u8a00\u8a9e\u304c\u5927\u30d6\u30fc\u30e0\n--------------------\n\n\u95a2\u6570\u578b\u8a00\u8a9e\u3001\u306f\u3084\u3063\u3066\u307e\u3059\u306d\u3002\u95a2\u6570\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u5b9f\u8df5\u5165\u9580\u306a\u3069\u306b\u3088\u308b\u3068\u3001\u4e26\u5217\u51e6\u7406\u3084\u9ad8\u5ea6\u306a\u62bd\u8c61\u5316(\u30b3\u30fc\u30c9\u304c\u77ed\u304b\u304f\u306a\u308b)\u306a\u3069\u306e\u89b3\u70b9\u304b\u3089\u6ce8\u76ee\u304c\u9ad8\u307e\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\u672c\u3092\u8cb7\u3046\u306e\u304c\u5927\u597d\u304d\u306a\u79c1\u306f\u95a2\u6570\u578b\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u672c\u3060\u3051\u3067\u4f55\u518a\u3082\u8cb7\u3044\u307e\u3057\u305f\u3002\u5f53\u7136\u307b\u3068\u3093\u3069\u8aad\u3093\u3067\u3044\u307e\u305b\u3093\u3002\n\n\n\u4f55\u3092\u6301\u3063\u3066\u95a2\u6570\u578b\u8a00\u8a9e\u3068\u3044\u3046\u306e\u304b\u306b\u3064\u3044\u3066\u306f\u610f\u898b\u304c\u5225\u308c\u308b\u3088\u3046\u3067\u3059\u304c\u3001\u53e4\u5178\u7684\u306b\u306f\u95a2\u6570\u304c\u5024\u3068\u3057\u3066\u81ea\u5728\u306b\u6271\u3048\u308b\u3053\u3068\u3001\u6700\u8fd1\u306fimmutability (\u7834\u58ca\u7684\u518d\u4ee3\u5165\u3084mutation\u3092\u8a31\u5bb9\u3057\u306a\u3044\u3001\u3064\u307e\u308a\u72b6\u614b(state)\u5909\u5316\u306e\u6291\u6b62)\u306a\u3069\u304c\u3044\u308f\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002ML\u7cfb\u8a00\u8a9e(Standard ML, OCaml\u306a\u3069\u3002Haskell\u3084F#\u3082\u3053\u306e\u6d41\u308c\u3092\u304f\u3080?)\u3067\u306f\u3001\u9759\u7684\u578b\u4ed8\u3051(static typing)/\u578b\u63a8\u8ad6(type inference)\u3082\u8a71\u984c\u306b\u306a\u308a\u307e\u3059\u304c\u3001\u52d5\u7684\u578b\u4ed8\u3051(dynamic typing)\u306eClojure\u3082\u95a2\u6570\u578b\u8a00\u8a9e\u306b\u5206\u985e\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u3001\u95a2\u6570\u578b\u8a00\u8a9e\u306e\u5fc5\u8981\u6761\u4ef6\u3067\u306f\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n\n\n\u79c1\u306f\u4eca\u5e74\u306fClojure\u3068Standard ML\u3092\u3059\u3053\u3057\u52c9\u5f37\u3057\u307e\u3057\u305f\u3002\u524d\u8005\u306f4clojure ( https://www.4clojure.com )\u3068Functional Programming in Clojure ( http://mooc.cs.helsinki.fi/clojure )\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002Boston Clojure\u3084Tokyo.clj\u306b\u3082\u884c\u3063\u3066\u307f\u307e\u3057\u305f\u3002lisp\u306f\u6587\u6cd5\u304c\u3064\u308b\u3063\u3068\u3057\u305f\u611f\u3058\u304c\u3057\u3066\u3044\u3044\u3067\u3059\u306d\u3002\u5f8c\u8005\u306fCoursera\u3067\u3084\u3063\u3066\u3044\u305fProgramming Languages ( https://www.coursera.org/course/proglang )\u3068\u3044\u3046\u30b3\u30fc\u30b9\u306e\u4e00\u74b0\u3067\u3084\u308a\u307e\u3057\u305f\u3002R\u3068Emacs lisp\u304c\u4e3b\u8981\u8a00\u8a9e\u306e\u79c1\u306f\u3001\u9759\u7684\u578b\u4ed8\u3051\u3082\u578b\u63a8\u8ad6\u3082\u3069\u3061\u3089\u3082\u521d\u3081\u3066\u3060\u3063\u305f\u306e\u3067\u3001\u304a\u3082\u3057\u308d\u3044\u7d4c\u9a13\u3067\u3057\u305f\u3002\u307e\u3042\u3001\u3069\u3061\u3089\u3082\u79c1\u306e\u80fd\u529b\u3067\u306f\u5b9f\u7528\u304b\u3089\u306f\u307b\u3069\u9060\u3044\u3067\u3059\u304c\u3002\n\n\nR\u8a00\u8a9e\u306f\u95a2\u6570\u578b\u8a00\u8a9e\u306a\u306e\u304b?\n--------------------\n\n\u3067\u3001\u79c1\u305f\u3061\u306e\u611b\u3057\u3066\u3084\u307e\u306a\u3044R\u8a00\u8a9e\u306f\u95a2\u6570\u578b\u8a00\u8a9e\u306a\u306e\u3067\u3057\u3087\u3046\u304b? \u53e4\u5178\u7684\u306a\u95a2\u6570\u3092\u81ea\u7531\u306b\u6271\u3048\u308b\u3068\u3044\u3046\u70b9\u306f\u6e80\u3057\u305d\u3046\u3067\u3059\u3002\u4e0b\u8a18\u306e\u3054\u3068\u304f\u7121\u540d\u95a2\u6570\u306ffunction\u3068\u3044\u3046class\u3092\u6301\u3064\u4e00\u7d1a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u3001\u95a2\u6570\u5b9a\u7fa9\u306f\u7121\u540d\u95a2\u6570\u672c\u4f53\u3092\u4ee3\u5165\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002(\u7121\u540d)\u95a2\u6570\u3092\u5f15\u6570\u3068\u3057\u3066\u4f7f\u3046\u9ad8\u968e\u95a2\u6570(higher-order function)\u306f\u3001\u4e0b\u8a18\u306e\u4f8b\u304cR\u3063\u307d\u3044\u304b\u306f\u5225\u3068\u3057\u3066lapply\u3084sapply\u306a\u3069\u3067\u4e00\u822c\u7684\u3067\u3059\u3002\u7121\u540d\u95a2\u6570\u672c\u4f53\u3092\u5024\u3068\u3057\u3066\u8fd4\u3059\u306e\u3082\u3001\u95a2\u6570\u5b9a\u7fa9\u6642\u306e\u74b0\u5883(\u4e0b\u8a18\u306e\u4f8b\u3067\u306fn = 3)\u3092\u6301\u3061\u6b69\u304f(\u74b0\u5883\u3068\u95a2\u6570\u3092\u3042\u308f\u305b\u3066closure\u3068\u547c\u3076)\u306e\u3082\u666e\u901a\u3067\u3059\u3002\n\n```r\n## \u7121\u540d\u95a2\u6570\u306f\"function\"\u30af\u30e9\u30b9\nclass(function(x){x*x})\n## [1] \"function\"\n\n## \u305d\u306e\u307e\u307e\u4f7f\u3048\u308b\n(function(x){x*x})(3)\n## [1] 9\n\n## \u95a2\u6570\u5b9a\u7fa9\u306f\u7121\u540d\u95a2\u6570\u672c\u4f53\u3092\u4ee3\u5165\u3057\u3066\u3044\u308b\u3060\u3051\nsquare = function(x){x*x}\nsquare(3)\n## [1] 9\n\n## \u7121\u540d\u95a2\u6570\u672c\u4f53\u3092\u9ad8\u968e\u95a2\u6570sapply\u306e\u5f15\u6570\u3068\u3057\u3066\u5229\u7528\nsapply(1:10, function(x){x*x})\n##  [1]   1   4   9  16  25  36  49  64  81 100\n\n## \u7121\u540d\u95a2\u6570\u3092\u8fd4\u3059\u95a2\u6570\naddN = function(n) {\n    function(x) {\n        x + n\n    }\n}\n## n = 3\u306e\u74b0\u5883\u3092\u6301\u3061\u6b69\u304f\u7121\u540d\u95a2\u6570\u3092add3\u306b\u4ee3\u5165\nadd3 <- addN(n = 3)\n## \u9ad8\u968e\u95a2\u6570sapply\u306e\u5f15\u6570\u3068\u3057\u3066\u5229\u7528\nsapply(1:10, add3)\n##  [1]  4  5  6  7  8  9 10 11 12 13\n```\n\n\u72b6\u614b\u5909\u5316\u3092\u6291\u6b62\u3059\u308bimmutability\u306b\u3064\u3044\u3066\u306f\u3069\u3046\u3067\u3057\u3087\u3046\u304b? \u7834\u58ca\u7684\u518d\u4ee3\u5165\u306f\u3044\u304f\u3089\u3067\u3082\u3067\u304d\u307e\u3059\u3002\u3068\u3044\u3046\u304b\u3001interactive\u306b\u4f7f\u3046\u3053\u3068\u304c\u591a\u3044\u7d71\u8a08\u89e3\u6790\u8a00\u8a9e\u3067\u3042\u308bR\u3067\u306f\u3001\u3053\u308c\u3092\u6291\u6b62\u3059\u308b\u306e\u306f\u53b3\u3057\u3044\u3067\u3057\u3087\u3046\u3002\u5b9a\u7fa9\u3055\u308c\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u518d\u4ee3\u5165\u4ee5\u5916\u306e\u76f4\u63a5\u306emutation\u306f\u307b\u307c\u306a\u3044\u3067\u3059\u3002\u4e0b\u8a18\u3067110..100\u306ea\u3092\u7834\u58ca\u7684\u518d\u4ee3\u5165\u4ee5\u5916\u306e\u65b9\u6cd5\u3067\u30bd\u30fc\u30c8\u3059\u308b\u65b9\u6cd5\u306f\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002R\u3067\u80b2\u3063\u305f\u79c1\u306f\u3001Python\u3067a.sort() (\u30ea\u30b9\u30c8a\u306e\u30bd\u30fc\u30c8\u30e1\u30bd\u30c3\u30c9\u547c\u3073\u51fa\u3057)\u3067\u3001a\u3092\u76f4\u63a5mutation\u3055\u305b\u308b\u306e\u3092\u898b\u305f\u3068\u304d\u306f\u3061\u3087\u3063\u3068\u3073\u3063\u304f\u308a\u3057\u307e\u3057\u305f\u3002\u3061\u306a\u307f\u306b\u3001R\u3067\u3082\u666e\u901a\u306eobject oriented programming\u3063\u307d\u3044reference class (R5 class\u3068\u304b\u8a00\u308f\u308c\u3066\u3044\u305f\u3082\u306e)\u3092\u4f7f\u3046\u3068\u53ef\u80fd\u306a\u3088\u3046\u3067\u3059\u3002\u307e\u3042\u3001\u3053\u306e\u5fae\u5999\u306aimmutability (\u7834\u58ca\u7684\u518d\u4ee3\u5165\u306f\u8a31\u3059\u3051\u3069\u3001\u4f55\u304b\u3059\u308b\u305f\u3073\u306b\u5143\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u50b7\u4ed8\u3051\u306a\u3044\u305f\u3081\u306b\u30b3\u30d4\u30fc\u304c\u767a\u751f\u3059\u308b)\u304cR\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u60aa\u3055\u306e\u5143\u51f6\u306a\u3088\u3046\u3067\u3059\u304c\u3002\n\n\n```r\n## \u7834\u58ca\u7684\u518d\u4ee3\u5165\na <- 10\na <- \"hello\"\na <- 110:100\na[1] <- 111 # \u3053\u308c\u3092mutation\u3068\u3068\u308b\u306e\u304b\u7834\u58ca\u7684\u518d\u4ee3\u5165\u3068\u3068\u308b\u306e\u304b\u4e0d\u660e?\na\n##  [1] 111 109 108 107 106 105 104 103 102 101 100\n\n## \u95a2\u6570\u306b\u3088\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306emutation\u306f\u306a\u3044\nsort(a)\n##  [1] 100 101 102 103 104 105 106 107 108 109 111\n\na\n##  [1] 111 109 108 107 106 105 104 103 102 101 100\n\n## b\u306fa\u306e\u30b3\u30d4\u30fc\u306a\u306e\u3067\u3001\u4ee5\u964da\u3092\u3044\u3058\u3063\u3066\u3082\u5f71\u97ff\u3092\u53d7\u3051\u306a\u3044\nb = a\na <- \"a has been changed\"\nb\n##  [1] 111 109 108 107 106 105 104 103 102 101 100\n```\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001R\u8a00\u8a9e\u304c\u95a2\u6570\u578b\u8a00\u8a9e\u304b\u3069\u3046\u304b\u306f\u5b9a\u7fa9\u306b\u3088\u308b\u3068\u3044\u3046\u5fae\u5999\u306a\u7d50\u8ad6\u306a\u3088\u3046\u3067\u3059\u3002\n\n\nR\u3067\u95a2\u6570\u578b\u8a00\u8a9e\u3063\u307d\u3044\u8868\u73fe\u3092\u3059\u308b\n====================\n\n\u3042\u307e\u308a\u5f79\u306b\u305f\u305f\u306a\u3044\u306f\u306a\u3057\u306f\u3053\u3053\u307e\u3067\u306b\u3057\u3066\u3001\u95a2\u6570\u578b\u8a00\u8a9e\u3067\u307f\u304b\u3051\u308b\u8868\u73fe\u3092R\u3067\u3082\u4f7f\u3063\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n**\u95a2\u6570\u5408\u6210(functional composition)**\n\n\u9023\u7d9a\u3057\u3066\u9069\u7528\u3059\u308b\u8907\u6570\u306e\u95a2\u6570\u3092\u307e\u3068\u3081\u3066\u3001\u4e00\u3064\u306e\u95a2\u6570\u306b\u3057\u307e\u3059\u3002\u6570\u5b66\u7684\u306b\u306f\u4e0b\u8a18\u306e\u3054\u3068\u304f\u3067\u3057\u3087\u3046\u304b\u3002\u6700\u8fd1\u826f\u304f\u307f\u304b\u3051\u308bpipeline\u306b\u4f3c\u3066\u3044\u307e\u3059\u304c\u3001\u95a2\u6570\u5408\u6210\u3067\u306f\u8fd4\u3063\u3066\u304f\u308b\u306e\u306f\u95a2\u6570\u306a\u306e\u3067\u540d\u524d\u3092\u3064\u3051\u308c\u3070\u518d\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\n$$h(g(f(x))) = (h \\circ g \\circ f) (x)$$\n\n\u3042\u307e\u308a\u610f\u5473\u304c\u306a\u3044\u3067\u3059\u304c\u3001\u4e00\u9023\u306e\u6570\u5b57\u306esquare sum\u3092negative\u306b\u3059\u308b\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u307f\u307e\u3059\u3002Standard ML\u3067\u306fo(\u5c0f\u6587\u5b57\u306eO)\u3092\u3064\u304b\u3044\u307e\u3059\u3002\u4e0b\u304b\u3089\u4e09\u756a\u76ee\u304c\u95a2\u6570\u5408\u6210\u3067\u3059\u3001\u6570\u5b66\u7684\u5b9a\u7fa9\u305d\u306e\u307e\u307e\u3067\u3001\u53f3\u304b\u3089\u8aad\u307f\u307e\u3059\u3002\n\n```ocaml\n(* \u5408\u6210\u3059\u308b\u95a2\u6570\u3092\u5b9a\u7fa9\u3002\u3053\u3053\u306f\u3042\u307e\u308a\u6c17\u306b\u3057\u306a\u3044 *)\nfun square xs =\n    case xs of\n        [] => []\n      | x::xs' => (x*x)::(sq xs')\nfun sum xs =\n    case xs of\n        [] => 0\n      | x::xs' => x + (sum xs')\nfun negate x =\n    ~x\n(* \u3053\u308c\u304c\u95a2\u6570\u5408\u6210\u306e\u90e8\u5206 *)\nval neg_sq_sum = negate o sum o square\n(* \u5b9f\u969b\u4f7f\u7528 *)\nneg_sq_sum [0,1,2,3,4,5,6,7,8,9,10]\n(* \u7d50\u679c :  val it = ~385 : int *)\n```\n\n\nR\u3067\u306ffunctional\u3068\u3044\u3046\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u3042\u308a\u3001\u305d\u306e\u306a\u304b\u306bCompose\u3068\u3044\u3046\u95a2\u6570\u5408\u6210\u306e\u305f\u3081\u306e\u95a2\u6570\u304c\u3042\u308a\u307e\u3059\u3002\u5de6\u304b\u3089\u53f3\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u304c\u3001\u6570\u5b66\u7684\u306b\u306f\u3061\u3087\u3063\u3068\u3044\u307e\u3044\u3061\u306a\u6c17\u304c\u3057\u307e\u3059\u304c\u3001\u5b9f\u969b\u306f\u8aad\u307f\u3084\u3059\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u5f15\u6570\u304c\u3072\u3068\u3064\u306e\u95a2\u6570\u3057\u304b\u4f7f\u3048\u306a\u3044\u3088\u3046\u3067\u3059\u3002\u591a\u5c11\u4f7f\u3048\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u4f8b\u3068\u3057\u3066\u306f\u3001\u3068\u304d\u3069\u304d\u4f7f\u3046coef(summary(regressionObject))\u5c02\u7528\u306eCoefTable\u3068\u3044\u3046\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\n```r\nlibrary(functional)\nnegate = function(x) {-x}\n## \u3053\u308c\u304c\u95a2\u6570\u5408\u6210\u306e\u90e8\u5206\nNegSqSum = Compose(square, sum, negate)\nNegSqSum(0:10)\n## [1] -385\n\n## \u591a\u5c11\u5b9f\u7528\u7684\u306a\u4f8b\nCoefTable = Compose(summary, coef)\nCoefTable(lm(Sepal.Length ~ Petal.Length + Species, data = iris))\n##                     Estimate Std. Error   t value     Pr(>|t|)\n## (Intercept)        3.6835266 0.10609608 34.718780 1.968671e-72\n## Petal.Length       0.9045646 0.06478559 13.962436 1.121002e-28\n## Speciesversicolor -1.6009717 0.19346616 -8.275203 7.371529e-14\n## Speciesvirginica  -2.1176692 0.27346121 -7.743947 1.480296e-12\n```\n\n**\u90e8\u5206\u9069\u7528(partial application)**\n\n\u8907\u6570\u306e\u5f15\u6570\u3092\u53d6\u308b\u95a2\u6570\u306e\u3044\u304f\u3064\u304b\u3092\u56fa\u5b9a\u3057\u305f\u72b6\u614b\u306e\u95a2\u6570\u3092\u8fd4\u3059\u3053\u3068\u3067\u3059\u3002Clojure\u3060\u3068partial\u3068\u3044\u3046\u95a2\u6570\u3092\u4f7f\u3044\u307e\u3059\u3002\u4e0b\u8a18\u3067\u306f\u304b\u3051\u7b97\u306e\"*\"\u95a2\u6570\u306e\u4e00\u756a\u76ee\u306e\u5f15\u6570\u3068\u3057\u306610\u3092\u9069\u7528\u3057\u3066\u56fa\u5b9a\u3057\u305f\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3001times10\u3068\u3044\u3046\u540d\u524d\u306b\u3057\u3066\u3044\u307e\u3059\u3002times10\u306b9\u3092\u4e0e\u3048\u308c\u307010\u500d\u306b\u3059\u308b\u95a2\u6570\u3067\u3059\u306e\u306790\u3068\u8a55\u4fa1\u3055\u308c\u307e\u3059\u3002\n\n```clj\n;; \"*\"\u95a2\u6570\u306b\u6700\u521d\u306e\u5f15\u6570\u3068\u3057\u306610\u3092\u4e0e\u3048\u3066times10\u95a2\u6570\u3068\u3059\u308b\n(def times10 (partial * 10))\n;; times10\u95a2\u6570\u306b9\u3092\u5f15\u6570\u3068\u3057\u3066\u3042\u305f\u3048\u308b\n(times10 9)\n;; => 90\n\n```\n\nR\u3067\u306f\u540c\u3058\u304ffunctional\u306bCurry()\u3068\u3044\u3046\u95a2\u6570\u304c\u3042\u308a\u307e\u3059\u3002\u540d\u524d\u306f\u53b3\u5bc6\u306b\u306f\u9593\u9055\u3063\u3066\u3044\u308b(curry\u5316\u3068\u3044\u3046\u8a00\u8449\u306e\u8aa4\u7528)\u306e\u3067\u3059\u304c\u3001\u3057\u3063\u304b\u308a\u90e8\u5206\u9069\u7528\u3057\u3066\u304f\u308c\u307e\u3059\u3002\u5b9f\u7528\u7684\u306a\u4f8b\u3068\u3057\u3066\u306f\u8907\u6570\u306e\u5f15\u6570\u3092\u53d6\u308b\u95a2\u6570\u3067\u3001\u4e00\u500b\u3060\u3051\u5f15\u6570\u3092\u5909\u5316\u3055\u305b\u306a\u304c\u3089\u304f\u308a\u304b\u3048\u3059\u3068\u3044\u3046\u72b6\u6cc1\u304c\u305f\u307e\u306b\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u3001iris\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u304c\u30e2\u30c7\u30eb\u5f0f\u3092\u3042\u305f\u3048\u308b\u3060\u3051\u3067\u3044\u3064\u3067\u3082\u5206\u6790\u3067\u304d\u308b\u5c02\u7528\u95a2\u6570lmIris\u3092\u5b9a\u7fa9\u3057\u3066\u307f\u307e\u3057\u305f\u3002data\u5f15\u6570\u3092iris\u306b\u56fa\u5b9a\u3057\u3066\u3044formula\u5f15\u6570\u3092\u6b8b\u3057\u3066\u3042\u308b\u308f\u3051\u3067\u3059\u3002\u4fbf\u5229\u3067\u3059\u306d\u30022014-12-26\u8ffd\u8a18Hadley Wickham\u306epryr\u30d1\u30c3\u30b1\u30fc\u30b8\u306bpartial()\u3068\u3044\u3046\u6b63\u3057\u3044\u540d\u524d\u306e\u90e8\u5206\u9069\u7528\u95a2\u6570\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\n\n```r\n## \"*\"\u95a2\u6570\u306b\u6700\u521d\u306e\u5f15\u6570\u3068\u3057\u306610\u3092\u4e0e\u3048\u3066times10\u95a2\u6570\u3068\u3059\u308b\ntimes10 = Curry(\"*\", 10)\n## times10\u95a2\u6570\u306b9\u3092\u5f15\u6570\u3068\u3057\u3066\u3042\u305f\u3048\u308b\ntimes10(9)\n## [1] 90\n\n## formula\u3092\u3042\u305f\u3048\u308b\u3060\u3051\u3067iris\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306e\u89e3\u6790\u3092\u3059\u308b\u5c02\u7528\u95a2\u6570\nlmIris = Curry(lm, data = iris)\nresIris = lmIris(Sepal.Length ~ Petal.Length + Species)\n## \u7d50\u679c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5148\u7a0b\u306eCoefTable\u3092\u4f7f\u7528\nCoefTable(resIris)\n##                     Estimate Std. Error   t value     Pr(>|t|)\n## (Intercept)        3.6835266 0.10609608 34.718780 1.968671e-72\n## Petal.Length       0.9045646 0.06478559 13.962436 1.121002e-28\n## Speciesversicolor -1.6009717 0.19346616 -8.275203 7.371529e-14\n## Speciesvirginica  -2.1176692 0.27346121 -7.743947 1.480296e-12\n```\n\n**\u305d\u306e\u4ed6**\n\nR\u306e\u95a2\u6570\u30ea\u30c6\u30e9\u30eb\u304c\u9577\u3044\u3068\u3044\u3046\u3053\u3068\u3067hoxo_m\u3055\u3093\u304c\u7c21\u7565\u306a\u8a18\u8f09\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3057\u305f(http://d.hatena.ne.jp/hoxo_m/20141204/p1 )\u3002\u62ec\u5f27\u304c\u5c11\u306a\u304f\u306a\u308a\u307e\u3059\u306d\u3002\n\n```r\n## \u901a\u5e38\nfunction(x) x*x\n## function(x) x*x\n(function(x) x*x)(3)\n## [1] 9\n\n## hoxo_m\u3055\u3093\ndevtools::install_github(\"hoxo-m/lambdaR\")\nlibrary(lambdaR)\nlambda(x: x*x)\n## function(x) x * x\nlambda(x: x*x)(3)\n## [1] 9\n```\n\nML\u7cfb\u3067\u898b\u639b\u3051\u308bpattern matching\u3082\u95a2\u6570\u578b\u8a00\u8a9e\u306e\u5fc5\u8981\u6761\u4ef6\u3067\u306f\u306a\u3055\u305d\u3046\u3067\u3059\u304c\u3001\u95a2\u6570\u578b\u8a00\u8a9e\u306e\u6587\u8108\u3067\u3088\u304f\u51fa\u3066\u304d\u307e\u3059\u3002lambda.r\u3068\u3044\u3046\u30d1\u30c3\u30b1\u30fc\u30b8(\u524d\u8ff0\u3068\u306f\u5225\u3082\u306e; https://github.com/zatonovo/lambda.r )\u3067\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\u5b9f\u7528\u7684\u304b\u306f\u5fae\u5999\u304b\u3082\u3002\u3053\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u306f\u4ed6\u306b\u3082\u3044\u308d\u3044\u308d\u3067\u304d\u305d\u3046\u3067\u3059\u3002\n\n```r\nlibrary(lambda.r)\nfib(0) %as% 1\nfib(1) %as% 1\nfib(n) %as% {fib(n-1) + fib(n-2)}\nsapply(0:10, fib)\n##   [1]  1  1  2  3  5  8 13 21 34 55 89\n```\n\n\u624b\u7fd2\u3044lisper\u3068\u3057\u3066\u306fifelse()\u306e\u30cd\u30b9\u30c8\u3092\u898b\u308b\u3068\u8f9b\u304f\u306a\u308a\u307e\u3059\u3002\u305d\u3093\u306a\u3068\u304d\u306f cond \u3067\u3059\u3088\u306d\u3002\u3069\u3063\u304b\u306b\u306a\u3044\u304b\u3068\u601d\u3063\u305f\u3089gist\u306b\u3053\u308d\u304c\u3063\u3066\u3044\u307e\u3057\u305f(https://gist.github.com/DASpringate/8595464 )\u3002\n\n```r\nFizzBuzz <- function(x) {\n    cond(x %% 15 == 0, \"FizzBuzz\",\n         x %%  3 == 0, \"Fizz\",\n         x %%  5 == 0, \"Buzz\",\n         true = x)\n}\nsapply(1:100, FizzBuzz)\n##  [1] \"1\"    \"2\"    \"Fizz\" \"4\"    \"Buzz\"     \"Fizz\" \"7\"    \"8\"    \"Fizz\" \"Buzz\"\n## [11] \"11\"   \"Fizz\" \"13\"   \"14\"   \"FizzBuzz\" \"16\"   \"17\"   \"Fizz\" \"19\"   \"Buzz\"\n## [21] \"Fizz\" \"22\"   \"23\"   \"Fizz\" \"Buzz\"     \"26\"   \"Fizz\" \"28\"   \"29\"   \"FizzBuzz\"\n## [31] \"31\"   \"32\"   \"Fizz\" \"34\"   \"Buzz\"     \"Fizz\" \"37\"   \"38\"   \"Fizz\" \"Buzz\"\n## [41] \"41\"   \"Fizz\" \"43\"   \"44\"   \"FizzBuzz\" \"46\"   \"47\"   \"Fizz\" \"49\"   \"Buzz\"\n## [51] \"Fizz\" \"52\"   \"53\"   \"Fizz\" \"Buzz\"     \"56\"   \"Fizz\" \"58\"   \"59\"   \"FizzBuzz\"\n## [61] \"61\"   \"62\"   \"Fizz\" \"64\"   \"Buzz\"     \"Fizz\" \"67\"   \"68\"   \"Fizz\" \"Buzz\"\n## [71] \"71\"   \"Fizz\" \"73\"   \"74\"   \"FizzBuzz\" \"76\"   \"77\"   \"Fizz\" \"79\"   \"Buzz\"\n## [81] \"Fizz\" \"82\"   \"83\"   \"Fizz\" \"Buzz\"     \"86\"   \"Fizz\" \"88\"   \"89\"   \"FizzBuzz\"\n## [91] \"91\"   \"92\"   \"Fizz\" \"94\"   \"Buzz\"     \"Fizz\" \"97\"   \"98\"   \"Fizz\" \"Buzz\"\n```\n\n\u53c2\u8003\u8cc7\u6599\u306a\u3069\n--------------------\n- \u95a2\u6570\u578b\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u5b9f\u8df5\u5165\u9580: http://gihyo.jp/book/2014/978-4-7741-6926-2\n- Functional Programming in Clojure: http://mooc.cs.helsinki.fi/clojure\n- Programing Languages https://www.coursera.org/course/proglang\n- CRAN functional package: http://cran.r-project.org/web/packages/functional/index.html\n- CRAN lambda.r package: https://github.com/zatonovo/lambda.r\n- hoxo_m\u3055\u3093lambda\u5f0f: http://d.hatena.ne.jp/hoxo_m/20141204/p1\n- gist cond: https://gist.github.com/DASpringate/8595464\n- Advanced R: http://adv-r.had.co.nz\n- Mutable objects in R: http://vita.had.co.nz/papers/mutatr.pdf\n- Functional composition: http://rosettacode.org/wiki/Function_composition\n- Partial application: http://rosettacode.org/wiki/Partial_function_application\n- \u90e8\u5206\u9069\u7528\u3092\u30ab\u30ea\u30fc\u5316\u3068\u547c\u3070\u306a\u3044\u3067: http://kmizu.hatenablog.com/entry/20130317/1363515568\n", "tags": ["R", "\u95a2\u6570\u578b\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0", "\u95a2\u6570\u578b\u8a00\u8a9e"]}