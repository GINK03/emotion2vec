{"context": " More than 1 year has passed since last update.ubuntu\u306f\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u304c\u3001debian\u306b\u306f\u7528\u610f\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u8abf\u67fb\u3057\u305f\u3002\n\n\u53c2\u8003\n\nlxc/lxd \u00b7 GitHub\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n/etc/apt/sources.list.d/pve-enterprise.list\n- deb https://enterprise.proxmox.com/debian jessie pve-enterprise\n+ deb http://download.proxmox.com/debian jessie pve-no-subscription\n\n\n\nlxd\u30d3\u30eb\u30c9\u306b\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\napt-get install \\\n  pkg-config golang lxc-pve-dev build-essential\n\n\n\n\u30d3\u30eb\u30c9\n\n~/.bashrc\nexport GOPATH=~/go\nexport PATH=$PATH:$GOPATH/bin/\n\n\nsource ~/.bashrc\n\nmkdir ~/go\ngo get github.com/lxc/lxd\ncd $GOPATH/src/github.com/lxc/lxd\nmake\n\n\n\n~/go/bin/lxd\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n\n\nLXD\u30c7\u30fc\u30e2\u30f3\u8d77\u52d5\n\n\u8d77\u52d5\nsudo -E $GOPATH/bin/lxd --group sudo\n\n\n\ncron\u3067\u8d77\u52d5\u3059\u308b\u5834\u5408\n\n/etc/sudoers\u306e#includedir\u306e#\u306f\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3058\u3083\u306a\u3044 - Qiita\nsudoers - How to allow user to preserve environment with sudo? - Super User\n\n\n/etc/sudoers.d/user1\nuser1 ALL=(ALL) NOPASSWD:SETENV: /home/user1/go/bin/lxd\n\n\n\n~/bin/lxd-daemon-start.sh\nexport GOPATH=/home/user1/go\nexport PATH=$PATH:$GOPATH/bin/\nsudo -E $GOPATH/bin/lxd --group sudo\n\n\n\ncrontab(user1\u306e)\n@reboot ~/bin/lxd-daemon-start.sh\n\n\n\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\nlxc profile edit default\n\nname: default\nconfig: {}\ndevices:\n  eth0:\n    nictype: bridged\n-   parent: lxcbr0\n+   parent: docker0\n    type: nic\n\n\n\n\u30c7\u30fc\u30bf\u306e\u5834\u6240\n\n/var/lib/lxd/ \u306b\u30b3\u30f3\u30c6\u30ca\u306e\u30c7\u30fc\u30bf\u304c\u683c\u7d0d\u3055\u308c\u308b\u3002\n\n/\u30b9\u30e9\u30a4\u30b9\u306e\u7a7a\u304d\u5bb9\u91cf\u304c\u6c17\u306b\u306a\u308b\u306e\u3067\u3001/var/lib/vz/lxd\u306b\u79fb\u52d5\u3059\u308b\u3002\n\ncd  /var/lib/\nmv lxd vz\nln -s vz/lxd .\n\n\nLXD\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\nlxc remote add images images.linuxcontainers.org\n#lxc launch images:centos/7/amd64 centos\nlxc launch images:ubuntu/xenial/amd64 ubuntu\n\n\nubuntu\u30b3\u30f3\u30c6\u30ca\u306b\u63a5\u7d9a\nlxc exec ubuntu -- /bin/bash\n\n\n\nubuntu\u30b3\u30f3\u30c6\u30ca\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\n\nproxmox\u306edocker0\u304c172.17.0.1/24\u3068\u3059\u308b\u3002\n\n\nubuntu\u30b3\u30f3\u30c6\u30ca\u3067\u5b9f\u65bd\nip addr add 172.17.0.222/24 dev eth0\nip route add default via 172.17.0.1\necho \"nameserver 8.8.8.8\" > /etc/resolv.conf\n\n\n\u306e\u3088\u3046\u306bIP\u3092\u624b\u3067\u8a2d\u5b9a\u3057\u3066\u3082\u826f\u3044\u304c\u3001\u81ea\u52d5\u3067\u8a2d\u5b9a\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3002\n\n/etc/network/interfaces\nauto lo\niface lo inet loopback\n\nauto eth0\niface eth0 inet static\n    address 172.17.0.222\n    netmask 255.255.255.0\n    gateway 172.17.0.1\n    dns-nameservers 8.8.8.8 8.8.4.4\n\n\nlxc restart ubuntu\nlxc list\n\nIP\u30a2\u30c9\u30ec\u30b9\u304c\u8a2d\u5b9a\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\n\u78ba\u8a8d\n$ lxc list\n+--------+---------+---------------------+------+-----------+-----------+\n|  NAME  |  STATE  |        IPV4         | IPV6 | EPHEMERAL | SNAPSHOTS |\n+--------+---------+---------------------+------+-----------+-----------+\n| ubuntu | RUNNING | 172.17.0.2 (eth0)   |      | NO        |         0 |\n+--------+---------+---------------------+------+-----------+-----------+\n\n\nubuntu\u306f\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u304c\u3001debian\u306b\u306f\u7528\u610f\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u8abf\u67fb\u3057\u305f\u3002\n\n## \u53c2\u8003\n\n* [lxc/lxd \u00b7 GitHub](https://github.com/lxc/lxd)\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```diff:/etc/apt/sources.list.d/pve-enterprise.list\n- deb https://enterprise.proxmox.com/debian jessie pve-enterprise\n+ deb http://download.proxmox.com/debian jessie pve-no-subscription\n```\n\n```bash:lxd\u30d3\u30eb\u30c9\u306b\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\napt-get install \\\n  pkg-config golang lxc-pve-dev build-essential\n```\n\n## \u30d3\u30eb\u30c9\n\n```bash:~/.bashrc\nexport GOPATH=~/go\nexport PATH=$PATH:$GOPATH/bin/\n```\n\n```bash:\nsource ~/.bashrc\n\nmkdir ~/go\ngo get github.com/lxc/lxd\ncd $GOPATH/src/github.com/lxc/lxd\nmake\n```\n\n* `~/go/bin/lxd`\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n\n## LXD\u30c7\u30fc\u30e2\u30f3\u8d77\u52d5\n\n```bash:\u8d77\u52d5\nsudo -E $GOPATH/bin/lxd --group sudo\n```\n\n### cron\u3067\u8d77\u52d5\u3059\u308b\u5834\u5408\n\n* [/etc/sudoers\u306e#includedir\u306e#\u306f\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3058\u3083\u306a\u3044 - Qiita](http://qiita.com/mikeda/items/ddd4c59d6cadeb94ff01)\n* [sudoers - How to allow user to preserve environment with sudo? - Super User](http://superuser.com/questions/636283/how-to-allow-user-to-preserve-environment-with-sudo)\n\n```bash:/etc/sudoers.d/user1\nuser1 ALL=(ALL) NOPASSWD:SETENV: /home/user1/go/bin/lxd\n```\n\n```bash:~/bin/lxd-daemon-start.sh \nexport GOPATH=/home/user1/go\nexport PATH=$PATH:$GOPATH/bin/\nsudo -E $GOPATH/bin/lxd --group sudo\n```\n\n```bash:crontab(user1\u306e)\n@reboot ~/bin/lxd-daemon-start.sh\n```\n\n----\n\n# \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\n\n```bash:\nlxc profile edit default\n```\n\n```diff:\nname: default\nconfig: {}\ndevices:\n  eth0:\n    nictype: bridged\n-   parent: lxcbr0\n+   parent: docker0\n    type: nic\n```\n\n----\n\n# \u30c7\u30fc\u30bf\u306e\u5834\u6240\n\n* /var/lib/lxd/ \u306b\u30b3\u30f3\u30c6\u30ca\u306e\u30c7\u30fc\u30bf\u304c\u683c\u7d0d\u3055\u308c\u308b\u3002\n* `/`\u30b9\u30e9\u30a4\u30b9\u306e\u7a7a\u304d\u5bb9\u91cf\u304c\u6c17\u306b\u306a\u308b\u306e\u3067\u3001/var/lib/vz/lxd\u306b\u79fb\u52d5\u3059\u308b\u3002\n\n```bash:\ncd  /var/lib/\nmv lxd vz\nln -s vz/lxd .\n```\n\n# LXD\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\n\n```bash:\nlxc remote add images images.linuxcontainers.org\n#lxc launch images:centos/7/amd64 centos\nlxc launch images:ubuntu/xenial/amd64 ubuntu\n```\n\n```bash:ubuntu\u30b3\u30f3\u30c6\u30ca\u306b\u63a5\u7d9a\nlxc exec ubuntu -- /bin/bash\n```\n\n# ubuntu\u30b3\u30f3\u30c6\u30ca\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\n\n* proxmox\u306edocker0\u304c`172.17.0.1/24`\u3068\u3059\u308b\u3002\n\n```bash:ubuntu\u30b3\u30f3\u30c6\u30ca\u3067\u5b9f\u65bd\nip addr add 172.17.0.222/24 dev eth0\nip route add default via 172.17.0.1\necho \"nameserver 8.8.8.8\" > /etc/resolv.conf\n```\n\n\u306e\u3088\u3046\u306bIP\u3092\u624b\u3067\u8a2d\u5b9a\u3057\u3066\u3082\u826f\u3044\u304c\u3001\u81ea\u52d5\u3067\u8a2d\u5b9a\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3002\n\n```bash:/etc/network/interfaces\nauto lo\niface lo inet loopback\n\nauto eth0\niface eth0 inet static\n    address 172.17.0.222\n    netmask 255.255.255.0\n    gateway 172.17.0.1\n    dns-nameservers 8.8.8.8 8.8.4.4\n```\n\n```bash:\nlxc restart ubuntu\nlxc list\n```\n\nIP\u30a2\u30c9\u30ec\u30b9\u304c\u8a2d\u5b9a\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\n```bash:\u78ba\u8a8d\n$ lxc list\n+--------+---------+---------------------+------+-----------+-----------+\n|  NAME  |  STATE  |        IPV4         | IPV6 | EPHEMERAL | SNAPSHOTS |\n+--------+---------+---------------------+------+-----------+-----------+\n| ubuntu | RUNNING | 172.17.0.2 (eth0)   |      | NO        |         0 |\n+--------+---------+---------------------+------+-----------+-----------+\n```\n", "tags": ["lxd", "proxmox4.1"]}