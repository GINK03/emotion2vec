{"context": " More than 1 year has passed since last update.react.js\u672c\u5bb6\u306eTutorial\u3092\u3061\u3087\u3063\u3068\u66f8\u304d\u63db\u3048\u3066Qiita\u306eAPI\u3092\u53e9\u304f\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u5b9f\u969b\u306b\u52d5\u304fJSFiddle\u306f\u3053\u3061\u3089\u3002\nvar Stock = React.createClass({\n  render: function() {\n    // \u7121\u99c4\u306b\u30b9\u30bf\u30a4\u30eb\u3092\u9069\u7528\u3057\u3066\u307f\u308b\n    var pStyle = {\n      color: 'red'\n    };\n    // StockList\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306estockNodes\u3092this.props.children\u3067\u30a2\u30af\u30bb\u30b9\n    var tags = React.Children.map(this.props.children, function(child) {\n      return <p style={pStyle}>{child}</p>\n    });\n    return (\n      <div>\n        <h1>\n          {this.props.title}\n        </h1>\n        <h2>\n          {this.props.author}\n        </h2>\n        {tags}\n      </div>\n    );\n  }\n});\n\nvar StockList = React.createClass({\n  render: function() {\n    var stockNodes = this.props.data.map(function (stock) {\n    console.log('stock',stock);\n      return (\n        <Stock author={stock.user.id} title={stock.title}>\n          {stock.tags.map(function(tag){ return tag.name})}\n        </Stock>\n      );\n    });\n    return (\n      <div className=\"stockList\">\n        {stockNodes}\n      </div>\n    );\n  }\n});\n\nvar StockBox = React.createClass({\n  loadStocksFromServer: function() {\n    // ajax\u3067API\u3092\u53e9\u304f\n    $.ajax({\n      // \u3068\u308a\u3042\u3048\u305a\u3061\u3087\u3063\u3068\u53d6\u5f97\u3057\u3066\u307f\u305f\u3044\u3060\u3051\u306a\u306e\u30673\u30b9\u30c8\u30c3\u30af\u9650\u5b9a\u3067\u53d6\u5f97\n      url: 'https://qiita.com/api/v2/users/' + this.props.userName + '/stocks?page=1&per_page=3',\n      dataType: 'json',\n      success: function(data) {\n        // \u53d6\u5f97\u306b\u6210\u529f\u3057\u305f\u3089state\u306b\u53cd\u6620\n        this.setState({data: data});\n      }.bind(this),\n      error: function(xhr, status, err) {\n        console.error(this.props.username, status, err.toString());\n      }.bind(this)\n    });\n  },\n  getInitialState: function() {\n    return {data: []};\n  },\n  componentDidMount: function() {\n    // \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u30de\u30a6\u30f3\u30c8\u3055\u308c\u305f\u3089\u8aad\u307f\u8fbc\u307f\u958b\u59cb\n    this.loadStocksFromServer();\n  },\n  render: function() {\n    return (\n      <div className=\"stockBox\">\n        <h1>Stocks</h1>\n        <StockList data={this.state.data} />\n      </div>\n    );\n  }\n});\n\n// StockBox\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306euserName\u3092\u9069\u5f53\u306b\u5909\u3048\u308b\u3053\u3068\u3067\n// \u8ab0\u304b\u3057\u3089\u306e\u30b9\u30c8\u30c3\u30af\u3092\u3068\u3063\u3066\u304f\u308b\nReact.render(\n  <StockBox userName=\"kenfdev\" />,\n  document.getElementById('content')\n);\n\nreact.js\u672c\u5bb6\u306e[Tutorial](http://facebook.github.io/react/docs/tutorial.html)\u3092\u3061\u3087\u3063\u3068\u66f8\u304d\u63db\u3048\u3066Qiita\u306eAPI\u3092\u53e9\u304f\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u5b9f\u969b\u306b\u52d5\u304fJSFiddle\u306f[\u3053\u3061\u3089](https://jsfiddle.net/69z2wepo/3030/)\u3002\n\n```js\nvar Stock = React.createClass({\n  render: function() {\n    // \u7121\u99c4\u306b\u30b9\u30bf\u30a4\u30eb\u3092\u9069\u7528\u3057\u3066\u307f\u308b\n    var pStyle = {\n      color: 'red'\n    };\n    // StockList\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306estockNodes\u3092this.props.children\u3067\u30a2\u30af\u30bb\u30b9\n    var tags = React.Children.map(this.props.children, function(child) {\n      return <p style={pStyle}>{child}</p>\n    });\n    return (\n      <div>\n        <h1>\n          {this.props.title}\n        </h1>\n        <h2>\n          {this.props.author}\n        </h2>\n        {tags}\n      </div>\n    );\n  }\n});\n\nvar StockList = React.createClass({\n  render: function() {\n    var stockNodes = this.props.data.map(function (stock) {\n    console.log('stock',stock);\n      return (\n        <Stock author={stock.user.id} title={stock.title}>\n          {stock.tags.map(function(tag){ return tag.name})}\n        </Stock>\n      );\n    });\n    return (\n      <div className=\"stockList\">\n        {stockNodes}\n      </div>\n    );\n  }\n});\n\nvar StockBox = React.createClass({\n  loadStocksFromServer: function() {\n    // ajax\u3067API\u3092\u53e9\u304f\n    $.ajax({\n      // \u3068\u308a\u3042\u3048\u305a\u3061\u3087\u3063\u3068\u53d6\u5f97\u3057\u3066\u307f\u305f\u3044\u3060\u3051\u306a\u306e\u30673\u30b9\u30c8\u30c3\u30af\u9650\u5b9a\u3067\u53d6\u5f97\n      url: 'https://qiita.com/api/v2/users/' + this.props.userName + '/stocks?page=1&per_page=3',\n      dataType: 'json',\n      success: function(data) {\n        // \u53d6\u5f97\u306b\u6210\u529f\u3057\u305f\u3089state\u306b\u53cd\u6620\n        this.setState({data: data});\n      }.bind(this),\n      error: function(xhr, status, err) {\n        console.error(this.props.username, status, err.toString());\n      }.bind(this)\n    });\n  },\n  getInitialState: function() {\n    return {data: []};\n  },\n  componentDidMount: function() {\n    // \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u30de\u30a6\u30f3\u30c8\u3055\u308c\u305f\u3089\u8aad\u307f\u8fbc\u307f\u958b\u59cb\n    this.loadStocksFromServer();\n  },\n  render: function() {\n    return (\n      <div className=\"stockBox\">\n        <h1>Stocks</h1>\n        <StockList data={this.state.data} />\n      </div>\n    );\n  }\n});\n\n// StockBox\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306euserName\u3092\u9069\u5f53\u306b\u5909\u3048\u308b\u3053\u3068\u3067\n// \u8ab0\u304b\u3057\u3089\u306e\u30b9\u30c8\u30c3\u30af\u3092\u3068\u3063\u3066\u304f\u308b\nReact.render(\n  <StockBox userName=\"kenfdev\" />,\n  document.getElementById('content')\n);\n```\n", "tags": ["react.js", "Qiita"]}