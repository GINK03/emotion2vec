{"context": " More than 1 year has passed since last update.\u30ac\u30c1\u30ac\u30c1\u306b\u56fa\u3081\u305f\u3001\u9759\u7684\u306a\u8a00\u8a9e\u306e\u3088\u3046\u306a\u30af\u30e9\u30b9\u3092JavaScript(TypeScript+ES6+ES7)\u3067\u4f5c\u3063\u3066\u307f\u308b\u30b7\u30ea\u30fc\u30ba\u3002\n\n\u3053\u308c\u307e\u3067\u306f\nES6\u3067\u306f\u305d\u3082\u305d\u3082\u30af\u30e9\u30b9\u30e1\u30f3\u30d0\u30fc\u306b\u30c7\u30fc\u30bf\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u5b9a\u7fa9\u3067\u304d\u306a\u3044\u3002ES7\u3092\u5148\u884c\u5bfe\u5fdc\u3057\u3066\u3044\u308bTypeScript/Babel\u3067\u306f\u30c7\u30fc\u30bf\u30d7\u30ed\u30d1\u30c6\u30a3\u306f\u5b9a\u7fa9\u3067\u304d\u308b\u304cconst\u3001\u3064\u307e\u308a\u5b9a\u6570\u3068\u3057\u3066\u306f\u5b9a\u7fa9\u3067\u304d\u306a\u3044\u3002\n\u4ee5\u524d\u66f8\u3044\u305f\u8a18\u4e8b\u3067\u306fgetter\u3068\u3057\u3066\u5b9a\u7fa9\u3059\u308b\u65b9\u6cd5\u3001\u30af\u30e9\u30b9\u3067\u306f\u306a\u304f\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3067\u5b9a\u7fa9\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u305f\u3002\n\ngetter\u3067\u30af\u30e9\u30b9\u5b9a\u6570\u3063\u307d\u304f\n\"use strict\";\nclass A{\n    static get PROP(){return 1;}\n}\nA.PROP; //1\n\n\n\n\u4e0a\u8a18\u306e\u554f\u984c\u70b9\uff1a\n\n\n\u66f8\u304d\u65b9\u304c\u5197\u9577\u3067\u5b9a\u6570\u3063\u307d\u304f\u898b\u3048\u306a\u3044\n\u4e0a\u66f8\u304d\u3057\u3066\u3044\u3066\u3082TypeScript\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u30c1\u30a7\u30c3\u30af\u3092\u3059\u308a\u629c\u3051\u308b\n\n\n\u30e9\u30f3\u30bf\u30a4\u30e0\u306b\u306f\u30a8\u30e9\u30fc\u306b\u306a\u308b\n\n\n\n\n\n\nTypeScript\u306a\u3089\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3067\n\"use strict\";\nnamespace nsA{\n    export const PROP = 1;\n}\nnsA.PROP;   //1\n\n\n\n\u4e0a\u8a18\u306e\u554f\u984c\u70b9:\n\n\n\u30af\u30e9\u30b9\u3068\u540c\u540d\u306e\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306f\u5b9a\u7fa9\u3067\u304d\u306a\u3044\n\n\n\u30af\u30e9\u30b9\u5b9a\u6570\u3063\u307d\u304f\u306a\u3089\u306a\u3044\n\n\n\u30e9\u30f3\u30bf\u30a4\u30e0\u6642\u306b\u4e0a\u66f8\u304d\u3067\u304d\u3066\u3057\u307e\u3046\n\n\n\u305f\u3060\u306evar\u306b\u306a\u308b\u306e\u3067\n\n\n\n\n\n\n\u30c7\u30b3\u30ec\u30fc\u30bf\u3067\u30af\u30e9\u30b9\u5b9a\u6570\u98a8\u306b\u5b9a\u7fa9\nES7\u3067\u306f\u30af\u30e9\u30b9\u306b\u30e1\u30f3\u30d0\u30fc\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\u305d\u308c\u306b\u52a0\u3048\u3001\u30c7\u30b3\u30ec\u30fc\u30bf\u3067\u5b9a\u6570\u3063\u307d\u304f\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\nTypeScript\u3067\u3084\u3063\u3066\u307f\u308b\u3068\u4ee5\u4e0b\u3002\n\nTypeScript\u3067\u30af\u30e9\u30b9\u5b9a\u6570\nclass A{\n    @readonly static PROP = 1;\n}\n\nA.PROP; //1\nA.PROP = 100;   //runtime error!\n\n\n\n\u30c7\u30b3\u30ec\u30fc\u30bf\u306e\u5b9a\u7fa9\nfunction readonly(target: any, propertyKey: string | symbol){\n    let p = target[propertyKey];\n    Object.defineProperty(\n        target,\n        <string>propertyKey,\n        {\n            get:()=>p,\n            enumerable:true\n        }\n    );\n}\n\n\n\u4e0a\u8a18\u306fgetter\u3067\u64ec\u4f3c\u7684\u306b\u5b9a\u6570\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u3060\u3051\u306a\u306e\u3067\u3001\u30e9\u30f3\u30bf\u30a4\u30e0\u30a8\u30e9\u30fc\u3082getter\u3057\u304b\u306a\u3044\u3088\u3001\u3068\u3044\u3046\u3088\u3046\u306a\u30a8\u30e9\u30fc\u3067\u3042\u308b\u3002\n\n\u30a8\u30e9\u30fc\u6587\u306f\u3061\u3087\u3063\u3068\u5206\u304b\u308a\u306b\u304f\u3044\nTypeError: Cannot set property PROP of function A() {\n    } which has only a getter\n\n\n\u306a\u306e\u3067\u5206\u304b\u308a\u3084\u3059\u3044\u3088\u3046\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30a8\u30e9\u30fc\u3092\u5410\u304f\u3088\u3046\u306b\u3057\u3066\u307f\u308b\u3002\n\n\u30a8\u30e9\u30fc\u3092\u5206\u304b\u308a\u3084\u3059\u304f\nfunction readonly(target: any, propertyKey: string | symbol){\n    let p = target[propertyKey];\n\n    let eSetter = (val:any)=>{\n        throw TypeError(`Cannot set property ${propertyKey} of ${target} which is readonly.`);\n    }\n\n    Object.defineProperty(\n        target,\n        <string>propertyKey,\n        {\n            get:()=>p,\n            set:eSetter,\n            enumerable:true\n        }\n    );\n}\n\n\n\u30b3\u30fc\u30c9\u306e\u307e\u3068\u3081\uff1aTypeScript PlayGround \n\u306a\u304aconst\u306f\u4e88\u7d04\u8a9e\u306a\u306e\u3067\u95a2\u6570\u540d\u306b\u4f7f\u3048\u306a\u3044\u305f\u3081@const\u3068\u3044\u3046\u30c7\u30b3\u30ec\u30fc\u30bf\u540d\u306b\u306f\u3067\u304d\u306a\u304b\u3063\u305f\u3002@const\u3068\u3067\u304d\u308c\u3070\u3082\u3063\u3068\u5206\u304b\u308a\u3084\u3059\u304b\u3063\u305f\u306e\u3060\u304c\u3002\n\n\u6ce8\u610f\u70b9\n\nTypeScript\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u30c1\u30a7\u30c3\u30af\u3067\u306f\u5206\u304b\u3089\u306a\u3044\n\u4e0a\u8a18\u30b3\u30fc\u30c9\u306f\u6b8b\u5ff5\u306a\u304c\u3089\u73fe\u6642\u70b9\u306eBabel\u3060\u3068\u30a8\u30e9\u30fc\u306b\u306a\u3089\u305a\u3001\u5b9a\u6570\u306b\u306a\u3089\u306a\u3044\n\n\n\u30b3\u30fc\u30c9\n\u539f\u56e0\u306f\u30c7\u30b3\u30ec\u30fc\u30bf\u306e\u5b9f\u73fe\u65b9\u6cd5\u306e\u9055\u3044\n\u306a\u306e\u3067\u3042\u308b\u65e5\u7a81\u7136TypeScript\u3067\u3082\u52d5\u304b\u306a\u3044\u30b3\u30fc\u30c9\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\n\n\n\n\u30ac\u30c1\u30ac\u30c1\u306b\u56fa\u3081\u305f\u3001\u9759\u7684\u306a\u8a00\u8a9e\u306e\u3088\u3046\u306a\u30af\u30e9\u30b9\u3092JavaScript(TypeScript+ES6+ES7)\u3067\u4f5c\u3063\u3066\u307f\u308b\u30b7\u30ea\u30fc\u30ba\u3002\n\n## \u3053\u308c\u307e\u3067\u306f\n\nES6\u3067\u306f\u305d\u3082\u305d\u3082\u30af\u30e9\u30b9\u30e1\u30f3\u30d0\u30fc\u306b\u30c7\u30fc\u30bf\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u5b9a\u7fa9\u3067\u304d\u306a\u3044\u3002ES7\u3092\u5148\u884c\u5bfe\u5fdc\u3057\u3066\u3044\u308bTypeScript/Babel\u3067\u306f\u30c7\u30fc\u30bf\u30d7\u30ed\u30d1\u30c6\u30a3\u306f\u5b9a\u7fa9\u3067\u304d\u308b\u304c`const`\u3001\u3064\u307e\u308a\u5b9a\u6570\u3068\u3057\u3066\u306f\u5b9a\u7fa9\u3067\u304d\u306a\u3044\u3002\n\n[\u4ee5\u524d\u66f8\u3044\u305f\u8a18\u4e8b](http://qiita.com/ConquestArrow/items/494d798a4e0788c41a7c)\u3067\u306fgetter\u3068\u3057\u3066\u5b9a\u7fa9\u3059\u308b\u65b9\u6cd5\u3001\u30af\u30e9\u30b9\u3067\u306f\u306a\u304f\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3067\u5b9a\u7fa9\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u305f\u3002\n\n```javascript:getter\u3067\u30af\u30e9\u30b9\u5b9a\u6570\u3063\u307d\u304f\n\"use strict\";\nclass A{\n\tstatic get PROP(){return 1;}\n}\nA.PROP;\t//1\n```\n\n * \u4e0a\u8a18\u306e\u554f\u984c\u70b9\uff1a\n\t * \u66f8\u304d\u65b9\u304c\u5197\u9577\u3067\u5b9a\u6570\u3063\u307d\u304f\u898b\u3048\u306a\u3044\n\t * \u4e0a\u66f8\u304d\u3057\u3066\u3044\u3066\u3082TypeScript\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u30c1\u30a7\u30c3\u30af\u3092\u3059\u308a\u629c\u3051\u308b\n\t\t * \u30e9\u30f3\u30bf\u30a4\u30e0\u306b\u306f\u30a8\u30e9\u30fc\u306b\u306a\u308b\n\n```javascript:TypeScript\u306a\u3089\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3067\n\"use strict\";\nnamespace nsA{\n\texport const PROP = 1;\n}\nnsA.PROP;\t//1\n```\n\n * \u4e0a\u8a18\u306e\u554f\u984c\u70b9:\n\t * \u30af\u30e9\u30b9\u3068\u540c\u540d\u306e\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306f\u5b9a\u7fa9\u3067\u304d\u306a\u3044\n\t\t * \u30af\u30e9\u30b9\u5b9a\u6570\u3063\u307d\u304f\u306a\u3089\u306a\u3044\n\t * \u30e9\u30f3\u30bf\u30a4\u30e0\u6642\u306b\u4e0a\u66f8\u304d\u3067\u304d\u3066\u3057\u307e\u3046\n\t\t * \u305f\u3060\u306e`var`\u306b\u306a\u308b\u306e\u3067\n\n## \u30c7\u30b3\u30ec\u30fc\u30bf\u3067\u30af\u30e9\u30b9\u5b9a\u6570\u98a8\u306b\u5b9a\u7fa9\n\nES7\u3067\u306f\u30af\u30e9\u30b9\u306b\u30e1\u30f3\u30d0\u30fc\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\u305d\u308c\u306b\u52a0\u3048\u3001\u30c7\u30b3\u30ec\u30fc\u30bf\u3067\u5b9a\u6570\u3063\u307d\u304f\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\nTypeScript\u3067\u3084\u3063\u3066\u307f\u308b\u3068\u4ee5\u4e0b\u3002\n\n```javascript:TypeScript\u3067\u30af\u30e9\u30b9\u5b9a\u6570\nclass A{\n\t@readonly static PROP = 1;\n}\n\nA.PROP;\t//1\nA.PROP = 100;\t//runtime error!\n```\n\n```javascript:\u30c7\u30b3\u30ec\u30fc\u30bf\u306e\u5b9a\u7fa9\nfunction readonly(target: any, propertyKey: string | symbol){\n\tlet p = target[propertyKey];\n\tObject.defineProperty(\n\t\ttarget,\n\t\t<string>propertyKey,\n\t\t{\n\t\t\tget:()=>p,\n\t\t\tenumerable:true\n\t\t}\n\t);\n}\n```\n\n\u4e0a\u8a18\u306fgetter\u3067\u64ec\u4f3c\u7684\u306b\u5b9a\u6570\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u3060\u3051\u306a\u306e\u3067\u3001\u30e9\u30f3\u30bf\u30a4\u30e0\u30a8\u30e9\u30fc\u3082getter\u3057\u304b\u306a\u3044\u3088\u3001\u3068\u3044\u3046\u3088\u3046\u306a\u30a8\u30e9\u30fc\u3067\u3042\u308b\u3002\n\n```:\u30a8\u30e9\u30fc\u6587\u306f\u3061\u3087\u3063\u3068\u5206\u304b\u308a\u306b\u304f\u3044\nTypeError: Cannot set property PROP of function A() {\n    } which has only a getter\n```\n\n\u306a\u306e\u3067\u5206\u304b\u308a\u3084\u3059\u3044\u3088\u3046\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30a8\u30e9\u30fc\u3092\u5410\u304f\u3088\u3046\u306b\u3057\u3066\u307f\u308b\u3002\n\n```javascript:\u30a8\u30e9\u30fc\u3092\u5206\u304b\u308a\u3084\u3059\u304f\nfunction readonly(target: any, propertyKey: string | symbol){\n\tlet p = target[propertyKey];\n\t\n\tlet eSetter = (val:any)=>{\n\t\tthrow TypeError(`Cannot set property ${propertyKey} of ${target} which is readonly.`);\n\t}\n\t\n\tObject.defineProperty(\n\t\ttarget,\n\t\t<string>propertyKey,\n\t\t{\n\t\t\tget:()=>p,\n\t\t\tset:eSetter,\n\t\t\tenumerable:true\n\t\t}\n\t);\n}\n```\n\n\u30b3\u30fc\u30c9\u306e\u307e\u3068\u3081\uff1a[TypeScript PlayGround](http://www.typescriptlang.org/Playground#src=function%20readonly(target%3A%20any%2C%20propertyKey%3A%20string%20%7C%20symbol)%7B%0A%09let%20p%20%3D%20target%5BpropertyKey%5D%3B%0A%09%0A%09let%20eSetter%20%3D%20(val%3Aany)%3D%3E%7B%0A%09%09throw%20TypeError(%60Cannot%20set%20property%20%24%7BpropertyKey%7D%20of%20%24%7Btarget%7D%20which%20is%20readonly.%60)%3B%0A%09%7D%0A%09%0A%09Object.defineProperty(%0A%09%09target%2C%0A%09%09%3Cstring%3EpropertyKey%2C%0A%09%09%7B%0A%09%09%09get%3A()%3D%3Ep%2C%0A%09%09%09set%3AeSetter%2C%0A%09%09%09enumerable%3Atrue%2C%0A%09%09%09configurable%3Atrue%0A%09%09%7D%0A%09)%3B%0A%7D%0Aclass%20A%7B%0A%09%40readonly%20static%20PROP%20%3D%201%3B%0A%7D%0Aconsole.log(A.PROP)%3B%09%2F%2F1%0AA.PROP%20%3D%20100%3B%09%2F%2FUncaught%20TypeError%3A%20Cannot%20set%20property%20PROP%20of%20function%20A()%20%7B%7D%20which%20is%20readonly.) \n\n\u306a\u304a`const`\u306f\u4e88\u7d04\u8a9e\u306a\u306e\u3067\u95a2\u6570\u540d\u306b\u4f7f\u3048\u306a\u3044\u305f\u3081`@const`\u3068\u3044\u3046\u30c7\u30b3\u30ec\u30fc\u30bf\u540d\u306b\u306f\u3067\u304d\u306a\u304b\u3063\u305f\u3002`@const`\u3068\u3067\u304d\u308c\u3070\u3082\u3063\u3068\u5206\u304b\u308a\u3084\u3059\u304b\u3063\u305f\u306e\u3060\u304c\u3002\n\n## \u6ce8\u610f\u70b9\n\n * TypeScript\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u30c1\u30a7\u30c3\u30af\u3067\u306f\u5206\u304b\u3089\u306a\u3044\n * \u4e0a\u8a18\u30b3\u30fc\u30c9\u306f\u6b8b\u5ff5\u306a\u304c\u3089\u73fe\u6642\u70b9\u306eBabel\u3060\u3068\u30a8\u30e9\u30fc\u306b\u306a\u3089\u305a\u3001\u5b9a\u6570\u306b\u306a\u3089\u306a\u3044\n\t * [\u30b3\u30fc\u30c9](https://babeljs.io/repl/#?experimental=true&evaluate=true&loose=false&spec=false&code=function%20readonly(target%2C%20propertyKey)%7B%0A%09let%20p%20%3D%20target%5BpropertyKey%5D%3B%0A%09%0A%09let%20eSetter%20%3D%20(val%3Aany)%3D%3E%7B%0A%09%09throw%20Error(%60Cannot%20set%20property%20%24%7BpropertyKey%7D%20of%20%24%7Btarget%7D%20which%20is%20readonly.%60)%3B%0A%09%7D%0A%09%0A%09Object.defineProperty(%0A%09%09target%2C%0A%09%09propertyKey%2C%0A%09%09%7B%0A%09%09%09get%3A()%3D%3Ep%2C%0A%09%09%09set%3AeSetter%2C%0A%09%09%09enumerable%3Atrue%2C%0A%09%09%09configurable%3Atrue%0A%09%09%7D%0A%09)%3B%0A%7D%0Aclass%20A%7B%0A%09%40readonly%20static%20PROP%20%3D%201%3B%0A%7D%0Aconsole.log(A.PROP)%3B%09%2F%2F1%0AA.PROP%20%3D%20100%3B%09%2F%2FUncaught%20TypeError%3A%20Cannot%20set%20property%20PROP%20of%20function%20A()%20%7B%7D%20which%20is%20readonly.%0A)\n\t * \u539f\u56e0\u306f\u30c7\u30b3\u30ec\u30fc\u30bf\u306e\u5b9f\u73fe\u65b9\u6cd5\u306e\u9055\u3044\n\t * \u306a\u306e\u3067\u3042\u308b\u65e5\u7a81\u7136TypeScript\u3067\u3082\u52d5\u304b\u306a\u3044\u30b3\u30fc\u30c9\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\n", "tags": ["TypeScript1.5.3", "ECMAScript6, 7", "JavaScript"]}