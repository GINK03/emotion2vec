{"context": "\u3053\u3093\u306b\u3061\u306f\u3002\ngeojson \u306e simplestyle\uff08geojson \u306e\u30b9\u30bf\u30a4\u30eb\u6307\u5b9a\uff09\u306e Google Maps \u5b9f\u88c5\uff08JavaScript \uff09\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f1\u3002\n\u4e0b\u8a18\u306f\u3053\u308c\u3092\u4f7f\u3063\u305f\u8868\u793a\u4f8b\u3067\u3059\u3002\u3053\u306e geojson\u30c7\u30fc\u30bf2 \u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\n\nvar styleDefaultMarker = {\n    symbol: '',\n    color: '#7e7e7e',\n    size: 'medium'\n};\nvar anchors = {'medium': -30, 'small': -20, 'large': -40};\nvar styleDefault = {\n    title: \"\",\n    description: \"\",\n    icon: markerImage(styleDefaultMarker),\n    strokeColor:  \"#555555\",\n    strokeOpacity:  1.0,\n    strokeWeight:  2,\n    fillColor:  \"#555555\",\n    fillOpacity:    0.6,\n//  draggable: true,\n//  editable: true,\n};\nvar keyStyle = {\n    'title': 'title',\n    'description': 'description',\n    'stroke': 'strokeColor',\n    'stroke-opacity': 'strokeOpacity',\n    'stroke-width': 'strokeWeight',\n    'fill': 'fillColor',\n    'fill-opacity': 'fillOpacity'\n};\n\nfunction markerImage(properties) {\n    for (var k in styleDefaultMarker) {\n        if (properties[k] === undefined) {properties[k] = styleDefaultMarker[k];}\n    }\n    var siz = properties[\"size\"][0];\n    if (properties[\"symbol\"] != \"\") {siz += \"-\";}\n    var pinUrl = 'https://api.tiles.mapbox.com/v3/marker/pin-' + siz + properties[\"symbol\"] + '+' + properties[\"color\"].replace(/^#/,\"\") + '.png';\n    var img = new google.maps.MarkerImage(pinUrl, null, new google.maps.Point(0, anchors[properties[\"size\"]]), null);\n    return img;\n}\n\nfunction copyObject(obj){\n    var newObj = {};\n    for(var i in obj){newObj[i] = obj[i]}\n    return newObj;\n};\n\nvar styleFeature = function(feature) {\n    var style = copyObject(styleDefault);\n    for (var i in keyStyle){\n       var x = feature.getProperty(i);\n       if (x != undefined) {style[keyStyle[i]] = x;}\n    }\n    var markerProperties = copyObject(styleDefaultMarker);\n    for (var k in markerProperties) {\n        markerProperties[k] = feature.getProperty(\"marker-\" + k);\n    }\n    if (markerProperties[\"symbol\"]) {style['icon'] = markerImage(markerProperties);}\n    return style;\n}\n\nvar map;\nfunction init() {\n    map = new google.maps.Map(...);\n    map.data.setStyle(styleFeature);\n//  map.data.setControls(['Point', 'LineString', 'Polygon']);\n}\n\nfunction loadGeoJson(geojsonData) {\n    map.data.addGeoJson(geojsonData);\n}\n\n\n\n\n\n\n\u306a\u304a\u672c\u5f53\u306f\u30de\u30fc\u30ab\u30fc\u306e style \u6307\u5b9a\u306b\u95a2\u3057\u3066\u3001simplestyle \u3068\u3057\u3066\u6b63\u3057\u3044\u3053\u3068\u306e\u30c1\u30a7\u30c3\u30af\u3092\u52a0\u3048\u308b\u3079\u304d\u3060\u3068\u601d\u3063\u3066\u3044\u307e\u3059\uff08\u53c2\u8003\uff1aLeaflet.MakiMarkers \uff09\u3002\u00a0\u21a9\n\n\n\u3053\u306e\u30c7\u30fc\u30bf\u306f \"Diffable, more customizable maps\"\uff08Github \u306e blog\uff09\u3067\u3082\u8868\u793a\u4f8b\u306b\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059\u3002\u3057\u304b\u3057\u3053\u306e Github \u3067\u306e\u8868\u793a\u306e\u5b9f\u88c5\u306f specification \u306b\u5fe0\u5b9f\u3067\u306f\u306a\u3044\u3067\u3059\uff08\u8272\u306a\u3069\uff09\u3002\u00a0\u21a9\n\n\n\n\u3053\u3093\u306b\u3061\u306f\u3002\ngeojson \u306e [simplestyle](https://github.com/mapbox/simplestyle-spec)\uff08[geojson \u306e\u30b9\u30bf\u30a4\u30eb\u6307\u5b9a](http://qiita.com/kkdd/items/46906cb1110488828d9e)\uff09\u306e Google Maps \u5b9f\u88c5\uff08JavaScript \uff09\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f[^1]\u3002\n\n\u4e0b\u8a18\u306f\u3053\u308c\u3092\u4f7f\u3063\u305f\u8868\u793a\u4f8b\u3067\u3059\u3002\u3053\u306e [geojson\u30c7\u30fc\u30bf](https://github.com/nationalparkservice/npmap.js/blob/master/examples/data/simplestyle.geojson)[^2] \u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\n![geojson.jpeg](https://qiita-image-store.s3.amazonaws.com/0/54617/12898511-8211-38b0-cf77-10c237e06c7e.jpeg)\n\n```js\nvar styleDefaultMarker = {\n\tsymbol: '',\n\tcolor: '#7e7e7e',\n\tsize: 'medium'\n};\nvar anchors = {'medium': -30, 'small': -20, 'large': -40};\nvar styleDefault = {\n\ttitle: \"\",\n\tdescription: \"\",\n\ticon: markerImage(styleDefaultMarker),\n\tstrokeColor:  \"#555555\",\n\tstrokeOpacity:  1.0,\n\tstrokeWeight:  2,\n\tfillColor:  \"#555555\",\n\tfillOpacity:    0.6,\n//\tdraggable: true,\n//\teditable: true,\n};\nvar keyStyle = {\n\t'title': 'title',\n\t'description': 'description',\n\t'stroke': 'strokeColor',\n\t'stroke-opacity': 'strokeOpacity',\n\t'stroke-width': 'strokeWeight',\n\t'fill': 'fillColor',\n\t'fill-opacity': 'fillOpacity'\n};\n\nfunction markerImage(properties) {\n    for (var k in styleDefaultMarker) {\n        if (properties[k] === undefined) {properties[k] = styleDefaultMarker[k];}\n    }\n    var siz = properties[\"size\"][0];\n    if (properties[\"symbol\"] != \"\") {siz += \"-\";}\n    var pinUrl = 'https://api.tiles.mapbox.com/v3/marker/pin-' + siz + properties[\"symbol\"] + '+' + properties[\"color\"].replace(/^#/,\"\") + '.png';\n\tvar img = new google.maps.MarkerImage(pinUrl, null, new google.maps.Point(0, anchors[properties[\"size\"]]), null);\n\treturn img;\n}\n\nfunction copyObject(obj){\n\tvar newObj = {};\n\tfor(var i in obj){newObj[i] = obj[i]}\n\treturn newObj;\n};\n\nvar styleFeature = function(feature) {\n\tvar style = copyObject(styleDefault);\n\tfor (var i in keyStyle){\n\t   var x = feature.getProperty(i);\n\t   if (x != undefined) {style[keyStyle[i]] = x;}\n\t}\n\tvar markerProperties = copyObject(styleDefaultMarker);\n\tfor (var k in markerProperties) {\n\t    markerProperties[k] = feature.getProperty(\"marker-\" + k);\n\t}\n\tif (markerProperties[\"symbol\"]) {style['icon'] = markerImage(markerProperties);}\n\treturn style;\n}\n\nvar map;\nfunction init() {\n\tmap = new google.maps.Map(...);\n\tmap.data.setStyle(styleFeature);\n//\tmap.data.setControls(['Point', 'LineString', 'Polygon']);\n}\n\nfunction loadGeoJson(geojsonData) {\n    map.data.addGeoJson(geojsonData);\n}\n```\n-------\n[^1]: \u306a\u304a\u672c\u5f53\u306f\u30de\u30fc\u30ab\u30fc\u306e ```style``` \u6307\u5b9a\u306b\u95a2\u3057\u3066\u3001simplestyle \u3068\u3057\u3066\u6b63\u3057\u3044\u3053\u3068\u306e\u30c1\u30a7\u30c3\u30af\u3092\u52a0\u3048\u308b\u3079\u304d\u3060\u3068\u601d\u3063\u3066\u3044\u307e\u3059\uff08\u53c2\u8003\uff1a[Leaflet.MakiMarkers](https://github.com/jseppi/Leaflet.MakiMarkers) \uff09\u3002\n\n[^2]: \u3053\u306e\u30c7\u30fc\u30bf\u306f \"[Diffable, more customizable maps](https://github.com/blog/1772-diffable-more-customizable-maps)\"\uff08Github \u306e blog\uff09\u3067\u3082\u8868\u793a\u4f8b\u306b\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059\u3002\u3057\u304b\u3057\u3053\u306e [Github \u3067\u306e\u8868\u793a](https://github.com/nationalparkservice/npmap.js/blob/master/examples/data/simplestyle.geojson)\u306e\u5b9f\u88c5\u306f [specification](https://github.com/mapbox/simplestyle-spec) \u306b\u5fe0\u5b9f\u3067\u306f\u306a\u3044\u3067\u3059\uff08\u8272\u306a\u3069\uff09\u3002\n", "tags": ["geojson", "GoogleMapsAPI", "GIS", "JavaScript", "\u5730\u56f3"]}