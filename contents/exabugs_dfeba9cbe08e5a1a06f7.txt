{"context": "\n\n\u306f\u3058\u3081\u306b\n\u300cAWS \u3067 CI \u74b0\u5883\u3092\u69cb\u7bc9\u300d\u30b7\u30ea\u30fc\u30ba\u306e\u7b2c\u4e8c\u5f3e\u3067\u3059\u3002\n\u4eca\u56de\u306f Jenkins \u3067 GitHub \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092 GitBook \u3067 PDF \u5316\u3057\u3066\u3001GitHub \u306e\u30ea\u30ea\u30fc\u30b9\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3053\u3068\u3067\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u30d1\u30d6\u30ea\u30c3\u30b7\u30e5\u3092\u81ea\u52d5\u5316\u3057\u307e\u3059\u3002\n\n\u6e96\u5099\n\nGitHub - Jenkins \u9023\u643a\n\u4ee5\u4e0b\u3067\u3001GitHub \u306e\u30a4\u30d9\u30f3\u30c8\u3092\u30c8\u30ea\u30ac\u30fc\u306b\u3001Jenkins \u30b5\u30fc\u30d0\u306b\u30bd\u30fc\u30b9\u304c\u5c55\u958b\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u300cJenkins \u3067 GitHub \u306e\u30a4\u30d9\u30f3\u30c8\u3092\u53d7\u3051\u3066\u30b4\u30cb\u30e7\u30b4\u30cb\u30e7\u3059\u308b\u6e96\u5099\u300d\nhttp://qiita.com/exabugs/items/cc2c6f59da98cd81a06f\n\nAPI \u30c8\u30fc\u30af\u30f3 \u4f5c\u6210\n\u30ea\u30ea\u30fc\u30b9\u306e\u4f5c\u6210\u3068\u6210\u679c\u7269\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067 GitHub API \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\u305d\u306e\u305f\u3081\u3001Settings - Personal access tokens \u3067 API \u30c8\u30fc\u30af\u30f3 \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nscopes (\u6a29\u9650) \u306f repo \u3092\u30c1\u30a7\u30c3\u30af\n\n\u4f5c\u6210\u3057\u305f\u3089\u3001token \u3092\u30e1\u30e2\u3057\u3066\u304a\u3044\u3066\u4e0b\u3055\u3044\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nNode.js\nyum \u3067\u306f\u3001\u307e\u3060 0.10 \u3067\u3059\u3002\u53e4\u3044\u3067\u3059\u3002\n\u3053\u3053\u306f LTS \u306e 6\u7cfb \u304c\u671b\u307e\u3057\u3044\u3067\u3059\u3002\nNode.js \u306f\u74b0\u5883\u306e\u7ba1\u7406\u3092\u3057\u305f\u3044\u306e\u3067 nvm \u3092\u4f7f\u3044\u307e\u3059\u3002\nhttps://github.com/creationix/nvm\n\u4ee5\u4e0b\u3067 nvm \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\nNVM_DIR \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002(\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f ~/.nvm \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b)\n\u5168\u30e6\u30fc\u30b6\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u3001/usr/local/nvm \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n# curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.0/install.sh | NVM_DIR=/usr/local/nvm bash\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u3001\u4ee5\u4e0b\u304c ~/.bashrc \u306b\u8ffd\u8a18\u3055\u308c\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u3053\u306e\u307e\u307e\u3067\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30e6\u30fc\u30b6\u3067\u3057\u304b\u4f7f\u3048\u306a\u3044\u3002\n\u305d\u306e\u305f\u3081\u3001\u3053\u306e\u90e8\u5206\u3092 /etc/profile.d/nvm.sh (\u65b0\u898f) \u306b\u79fb\u52d5\u3057\u3066\u3001\u5168\u30e6\u30fc\u30b6\u3067\u8aad\u307f\u8fbc\u307e\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n/etc/profile.d/nvm.sh\nexport NVM_DIR=\"/usr/local/nvm\"\n[ -s \"$NVM_DIR/nvm.sh\" ] && \\. \"$NVM_DIR/nvm.sh\"  # This loads nvm\n\n\n\u518d\u30ed\u30b0\u30a4\u30f3\u3067\u3001\u4e0a\u8a18 nvm \u304c\u4f7f\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n# nvm ls-remote\n\n         v6.9.0   (LTS: Boron)\n         v6.9.1   (LTS: Boron)\n         v6.9.2   (LTS: Boron)\n         v6.9.3   (LTS: Boron)\n         v6.9.4   (Latest LTS: Boron)\n\n\u6700\u65b0\u306e v6.9.4 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u3087\u3046\u304b\u3002\n# nvm install v6.9.4\n# nvm use v6.9.4\n# nvm alias default v6.9.4\n\n\u4ee5\u4e0b\u306b\u306a\u308c\u3070 Node.js \u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u3067\u3059\u3002\n# node -v\nv6.9.4\n\n\nGitBook\nGitBook \u306f\u4ee5\u4e0b\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\n# sudo npm install gitbook-cli -g\n# gitbook install\n\n\u307e\u305f\u3001PDF\u51fa\u529b\u306e\u305f\u3081\u306b\u3001Calibre \u304c\u5fc5\u8981\u3067\u3059\nhttps://calibre-ebook.com/download_linux\n# sudo -v && wget -nv -O- https://download.calibre-ebook.com/linux-installer.py | sudo python -c \"import sys; main=lambda:sys.stderr.write('Download failed\\n'); exec(sys.stdin.read()); main()\"\n\nOS \u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3082\u3001\u4e0d\u8db3\u304c\u3042\u308b\u3088\u3046\u306a\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\n# yum install mesa-libGL\n\n\u4ee5\u4e0b\u3067\u3001\u52d5\u4f5c\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u304b\u3002\n(README.md \u3068 SUMMARY.md \u304c\u5fc5\u9808)\n# gitbook pdf\n\n\n\u8a2d\u5b9a\n\nJenkins\nGitBook \u3067 PDF \u3092\u751f\u6210\u3057\u3001\u30ea\u30ea\u30fc\u30b9\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\u4e0a\u8a18\u3092\u5b9f\u884c\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3068\u3057\u3066\u306f\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306bSUMMARY.md \u304c\u5b58\u5728\u3057\u3001\u304b\u3064 tag \u304c Push \u3055\u308c\u305f\u6642\u3060\u3051\u3068\u3057\u307e\u3059\u3002\n\n\n#!/bin/bash\n\nexport PATH=/usr/bin:/usr/local/bin:$PATH\n. /etc/profile.d/nvm.sh\n\nparam() {\n  echo $payload | jq -r $1\n}\n\nOWNER=`param '.repository.owner.name'`\nBRANCH=`param '.ref' | sed \"s:^refs/heads:remotes/origin:\"`\nNAME=`param '.repository.name'`\nURL=`param '.repository.ssh_url'`\nID=`param '.after'`\n\necho $URL\necho $BRANCH\n\nif [ ! -d $NAME ]; then\n  git clone $URL\nfi\n\ncd $NAME\n\ngit fetch origin\ngit reset --hard ${BRANCH}\n\n\n#GitBook\nif [[  $BRANCH = refs/tags/*  ]]; then\n\n  if [ -f SUMMARY.md ]; then\n    gitbook pdf\n    github_asset_upload.sh $OWNER $NAME ${BRANCH:10}\n  fi\n\nfi\n\nJenkins \u304b\u3089\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u30b9\u30af\u30ea\u30d7\u30c8 (github_asset_upload.sh) \u304c\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\ngitbook \u30b3\u30de\u30f3\u30c9\u3067\u751f\u6210\u3057\u305f book.pdf \u3092\u3001GitHub \u306e\u30ea\u30ea\u30fc\u30b9\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u51e6\u7406\u306b\u306a\u308a\u307e\u3059\u3002\nbook.pdf \u304c\u65e2\u306b\u5b58\u5728\u3059\u308b\u306a\u3089\u3001\u524a\u9664\u3057\u3066\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9 (\u66f4\u65b0) \u306b\u306a\u308a\u307e\u3059\u3002\n\ngithub_asset_upload.sh\n#!/bin/bash\n\nTOKEN=<\u3053\u3053\u306b\u30c8\u30fc\u30af\u30f3\u3092\u8a18\u8f09>\n\nOWNER=$1\nREPO=$2\nTAG=$3\n\nFILE=book.pdf\nTYPE=application/pdf\n\nURL_API=https://api.github.com/repos/${OWNER}/${REPO}/releases\nURL_UPLOAD=https://uploads.github.com/repos/${OWNER}/${REPO}/releases\nCURL=(curl -s -H \"Authorization: token ${TOKEN}\")\n\n\n# \u30bf\u30b0\u306e\u30ea\u30ea\u30fc\u30b9\u304c\u3042\u308b\u304b\uff1f\n#  \u306a\u3051\u308c\u3070\u3001\u4f5c\u6210\n#  \u3042\u308c\u3070\u3001\u4f55\u3082\u3057\u306a\u3044\nID_RELEASE=`\"${CURL[@]}\" -X GET $URL_API | jq \".[] | select(.tag_name == \\\"$TAG\\\") | .id\"`\nif [ -z $ID_RELEASE ] ; then\n  echo Release $TAG create.\n  ID_RELEASE=`\"${CURL[@]}\" -X POST $URL_API -d \"{\\\"tag_name\\\":\\\"$TAG\\\"}\" | jq \".id\"`\nelse\n  echo Release $TAG exists.\nfi\necho Release : $ID_RELEASE\n\n\n# \u30bf\u30b0\u306e\u30ea\u30ea\u30fc\u30b9\u3067\u3001\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u540d\u306eassets\u304c\u3042\u308b\u304b\uff1f\n#  \u306a\u3051\u308c\u3070\u3001\u4f55\u3082\u3057\u306a\u3044\n#  \u3042\u308c\u3070\u3001\u524a\u9664\nID_ASSET=`\"${CURL[@]}\" -X GET $URL_API/$ID_RELEASE/assets | jq \".[] | select(.name == \\\"$FILE\\\") | .id\"`\nif [ -z $ID_ASSET ] ; then\n  echo Asset $FILE not exists.\nelse\n  echo Asset $FILE exists : $ID_ASSET. so delete.\n  \"${CURL[@]}\" -X DELETE $URL_API/assets/$ID_ASSET -d \"{\\\"tag_name\\\":\\\"$TAG\\\"}\"\nfi\n\n\n# \u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\necho Asset $FILE upload.\nID_ASSET=`\"${CURL[@]}\" -X POST -H \"Content-type: $TYPE\" -F file=@$FILE $URL_UPLOAD/$ID_RELEASE/assets?name=$FILE | jq \".id\"`\necho Asset : $ID_ASSET\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\u30bf\u30b0\u3092\u6253\u3063\u3066Push\u3057\u3066\u307f\u307e\u3059\u3002\n$ git tag -a v1.9.0\n$ get push origin v1.9.0\n\nRelease v1.9.0 \u304c\u4f5c\u6210\u3055\u308c\u3001\u305d\u306e\u4e2d\u306b book.pdf \u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u3002\n\n\n\u65e5\u672c\u8a9e\u5bfe\u5fdc\n\u65e5\u672c\u8a9e\u306b\u5bfe\u5fdc\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u30d5\u30a9\u30f3\u30c8\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u300cAdobe\uff0fGoogle\u8b39\u88fd\u306e\u6e90\u30ce\u89d2\u30b4\u30b7\u30c3\u30af(Noto Sans CJK / Source Han Sans)\u300d\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u305f\u3002(\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059)\nhttp://backport.net/blog/2016/09/06/pdf_embedded_japanese_font/\n\u30d5\u30a9\u30f3\u30c8\u306f\u3001book.json \u3067 \"GenShinGothic\" \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nbook.json\n{\n  \"pdf\": {\n    \"fontFamily\": \"GenShinGothic\"\n  }\n}\n\n\n\u3055\u3059\u304c\u6e90\u30ce\u89d2\uff01\u65e5\u672c\u8a9e\u304c\u30ad\u30ec\u30a4\u306bPDF\u5316\u3055\u308c\u307e\u3057\u305f\uff01\n\n\n\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\nPDF \u306e\u898b\u6804\u3048\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\nhttps://toolchain.gitbook.com/config.html\n\nbook.json\n{\n    \"pluginsConfig\": {\n        \"fontSettings\": {\n            \"size\": 2\n        }\n    },\n    \"pdf\": {\n        \"fontFamily\": \"GenShinGothic\",\n        \"fontSize\": 12,\n    }\n}\n\n\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u5c0f\u6280\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8(\u30de\u30fc\u30af\u30c0\u30a6\u30f3)\u306f\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3068\u540c\u3058\u30c4\u30ea\u30fc\u306b\u5165\u308c\u308b\u6d3e\u3068\u3001\u3044\u3084\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u3082\u5206\u3051\u305f\u3044\u3093\u3060\u3088\u3001\u3068\u3044\u3046\u6d3e\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u7de8\u96c6\u304c\u983b\u7e41\u306b\u3042\u308b\u5834\u5408\u3001\u30bd\u30fc\u30b9\u3068\u540c\u3058\u30d6\u30e9\u30f3\u30c1\u3060\u3068\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u304c\u8352\u308c\u3066\u304f\u308b\u306e\u3067\u3001\u4eca\u56de\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u7528\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u5206\u96e2\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u305d\u306e\u969b\u3001Git \u306e \u30aa\u30fc\u30d5\u30a1\u30f3(\u30eb\u30fc\u30c8\u306a\u3057\uff09 \u30d6\u30e9\u30f3\u30c1\u304c\u4fbf\u5229\u3067\u3059\u3002\n(\u30b3\u30df\u30c3\u30c8\u5c65\u6b74\u3084\u30bf\u30b0\u7b49\u3001master \u30d6\u30e9\u30f3\u30c1\u3068\u306f\u5b8c\u5168\u306b\u5207\u308a\u96e2\u3055\u308c\u305f\u30d6\u30e9\u30f3\u30c1\u306b\u306a\u308a\u307e\u3059\u3002)\n\u4ee5\u4e0b\u3067\u3001\u30eb\u30fc\u30c8\u306a\u3057\u306e documents \u30d6\u30e9\u30f3\u30c1\u3092\u4f5c\u6210\u3057\u3001\u305d\u3053\u306b \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8(\u30de\u30fc\u30af\u30c0\u30a6\u30f3) \u3092\u30b3\u30df\u30c3\u30c8\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n$ git checkout --orphan documents\n\n\n\u304a\u308f\u308a\u306b\n\n\u3053\u308c\u3067\u3001\u300c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u30de\u30fc\u30af\u30c0\u30a6\u30f3\u3067\u300d\u6d3b\u52d5\u304c\u3001\u4e00\u6b69\u9032\u307f\u307e\u3057\u305f\u3002\nGitHub \u306e\u64cd\u4f5c\u306f\u3001Jenkins \u306e Git \u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4e0a\u624b\u304f\u4f7f\u3048\u3070\u3001\u3082\u3063\u3068\u7c21\u5358\u306b\u3067\u304d\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3067\u3059\u3002\nHTML \u5f62\u5f0f\u3067\u51fa\u529b\u3057\u3066\u3001GitHub-Pages \u3067\u30d1\u30d6\u30ea\u30c3\u30b7\u30e5\u3057\u3088\u3046\u304b\u3001\u3068\u3082\u601d\u3044\u307e\u3057\u305f\u304c\u3001Private \u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u3082 GitHub-Pages \u306f Public \u306b\u306a\u308b\u306e\u3067\u3059\u306d\u3002\u5371\u306a\u3044\u3001\u5371\u306a\u3044\u3002\n\n## \u306f\u3058\u3081\u306b\n\u300cAWS \u3067 CI \u74b0\u5883\u3092\u69cb\u7bc9\u300d\u30b7\u30ea\u30fc\u30ba\u306e\u7b2c\u4e8c\u5f3e\u3067\u3059\u3002\n\n\u4eca\u56de\u306f Jenkins \u3067 GitHub \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092 GitBook \u3067 PDF \u5316\u3057\u3066\u3001GitHub \u306e\u30ea\u30ea\u30fc\u30b9\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3053\u3068\u3067\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u30d1\u30d6\u30ea\u30c3\u30b7\u30e5\u3092\u81ea\u52d5\u5316\u3057\u307e\u3059\u3002\n\n## \u6e96\u5099\n### GitHub - Jenkins \u9023\u643a\n\n\u4ee5\u4e0b\u3067\u3001GitHub \u306e\u30a4\u30d9\u30f3\u30c8\u3092\u30c8\u30ea\u30ac\u30fc\u306b\u3001Jenkins \u30b5\u30fc\u30d0\u306b\u30bd\u30fc\u30b9\u304c\u5c55\u958b\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u300cJenkins \u3067 GitHub \u306e\u30a4\u30d9\u30f3\u30c8\u3092\u53d7\u3051\u3066\u30b4\u30cb\u30e7\u30b4\u30cb\u30e7\u3059\u308b\u6e96\u5099\u300d\nhttp://qiita.com/exabugs/items/cc2c6f59da98cd81a06f\n\n\n### API \u30c8\u30fc\u30af\u30f3 \u4f5c\u6210\n\n\u30ea\u30ea\u30fc\u30b9\u306e\u4f5c\u6210\u3068\u6210\u679c\u7269\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067 GitHub API \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\u305d\u306e\u305f\u3081\u3001Settings - Personal access tokens \u3067 API \u30c8\u30fc\u30af\u30f3 \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n![screencapture-github-settings-tokens-1483809559363.png](https://qiita-image-store.s3.amazonaws.com/0/69410/7a912a84-0c3e-fc40-46d9-011125ecab8a.png)\n\nscopes (\u6a29\u9650) \u306f repo \u3092\u30c1\u30a7\u30c3\u30af\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2017-01-08_2_24_46.png](https://qiita-image-store.s3.amazonaws.com/0/69410/1d3097d2-d94d-bd3a-ca0e-d69ddc4c439c.png)\n\n\u4f5c\u6210\u3057\u305f\u3089\u3001token \u3092\u30e1\u30e2\u3057\u3066\u304a\u3044\u3066\u4e0b\u3055\u3044\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2017-01-08_2_25_33.png](https://qiita-image-store.s3.amazonaws.com/0/69410/6cf6e9ec-ca40-a192-bd5b-9580ee1f34a4.png)\n\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n### Node.js\nyum \u3067\u306f\u3001\u307e\u3060 0.10 \u3067\u3059\u3002\u53e4\u3044\u3067\u3059\u3002\n\u3053\u3053\u306f LTS \u306e 6\u7cfb \u304c\u671b\u307e\u3057\u3044\u3067\u3059\u3002\n\nNode.js \u306f\u74b0\u5883\u306e\u7ba1\u7406\u3092\u3057\u305f\u3044\u306e\u3067 nvm \u3092\u4f7f\u3044\u307e\u3059\u3002\nhttps://github.com/creationix/nvm\n\n\u4ee5\u4e0b\u3067 nvm \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\nNVM_DIR \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002(\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f ~/.nvm \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b)\n\u5168\u30e6\u30fc\u30b6\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u3001/usr/local/nvm \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n# curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.0/install.sh | NVM_DIR=/usr/local/nvm bash\n```\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u3001\u4ee5\u4e0b\u304c ~/.bashrc \u306b\u8ffd\u8a18\u3055\u308c\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u3053\u306e\u307e\u307e\u3067\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30e6\u30fc\u30b6\u3067\u3057\u304b\u4f7f\u3048\u306a\u3044\u3002\n\u305d\u306e\u305f\u3081\u3001\u3053\u306e\u90e8\u5206\u3092 /etc/profile.d/nvm.sh (\u65b0\u898f) \u306b\u79fb\u52d5\u3057\u3066\u3001\u5168\u30e6\u30fc\u30b6\u3067\u8aad\u307f\u8fbc\u307e\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```bash:/etc/profile.d/nvm.sh\nexport NVM_DIR=\"/usr/local/nvm\"\n[ -s \"$NVM_DIR/nvm.sh\" ] && \\. \"$NVM_DIR/nvm.sh\"  # This loads nvm\n```\n\u518d\u30ed\u30b0\u30a4\u30f3\u3067\u3001\u4e0a\u8a18 nvm \u304c\u4f7f\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\n# nvm ls-remote\n\n         v6.9.0   (LTS: Boron)\n         v6.9.1   (LTS: Boron)\n         v6.9.2   (LTS: Boron)\n         v6.9.3   (LTS: Boron)\n         v6.9.4   (Latest LTS: Boron)\n```\n\u6700\u65b0\u306e v6.9.4 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u3087\u3046\u304b\u3002\n\n```\n# nvm install v6.9.4\n# nvm use v6.9.4\n# nvm alias default v6.9.4\n```\n\u4ee5\u4e0b\u306b\u306a\u308c\u3070 Node.js \u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u3067\u3059\u3002\n\n```\n# node -v\nv6.9.4\n```\n\n\n\n### GitBook\nGitBook \u306f\u4ee5\u4e0b\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\n\n```\n# sudo npm install gitbook-cli -g\n# gitbook install\n```\n\n\u307e\u305f\u3001PDF\u51fa\u529b\u306e\u305f\u3081\u306b\u3001Calibre \u304c\u5fc5\u8981\u3067\u3059\nhttps://calibre-ebook.com/download_linux\n\n```\n# sudo -v && wget -nv -O- https://download.calibre-ebook.com/linux-installer.py | sudo python -c \"import sys; main=lambda:sys.stderr.write('Download failed\\n'); exec(sys.stdin.read()); main()\"\n```\nOS \u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3082\u3001\u4e0d\u8db3\u304c\u3042\u308b\u3088\u3046\u306a\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\n\n```\n# yum install mesa-libGL\n```\n\n\u4ee5\u4e0b\u3067\u3001\u52d5\u4f5c\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u304b\u3002\n(README.md \u3068 SUMMARY.md \u304c\u5fc5\u9808)\n\n```\n# gitbook pdf\n```\n\n## \u8a2d\u5b9a\n### Jenkins\n\nGitBook \u3067 PDF \u3092\u751f\u6210\u3057\u3001\u30ea\u30ea\u30fc\u30b9\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\u4e0a\u8a18\u3092\u5b9f\u884c\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3068\u3057\u3066\u306f\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306b**SUMMARY.md \u304c\u5b58\u5728**\u3057\u3001\u304b\u3064 **tag \u304c Push \u3055\u308c\u305f\u6642\u3060\u3051**\u3068\u3057\u307e\u3059\u3002\n\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2017-01-08 3.03.09.png](https://qiita-image-store.s3.amazonaws.com/0/69410/6e0c86a1-6668-fdc3-c27a-0f5624e08cc6.png)\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2017-01-08 3.03.56.png](https://qiita-image-store.s3.amazonaws.com/0/69410/6abf4fa1-7dc1-f3cc-ae21-1c7970782eba.png)\n\n```bash\n#!/bin/bash\n\nexport PATH=/usr/bin:/usr/local/bin:$PATH\n. /etc/profile.d/nvm.sh\n\nparam() {\n  echo $payload | jq -r $1\n}\n\nOWNER=`param '.repository.owner.name'`\nBRANCH=`param '.ref' | sed \"s:^refs/heads:remotes/origin:\"`\nNAME=`param '.repository.name'`\nURL=`param '.repository.ssh_url'`\nID=`param '.after'`\n\necho $URL\necho $BRANCH\n\nif [ ! -d $NAME ]; then\n  git clone $URL\nfi\n\ncd $NAME\n\ngit fetch origin\ngit reset --hard ${BRANCH}\n\n\n#GitBook\nif [[  $BRANCH = refs/tags/*  ]]; then\n\n  if [ -f SUMMARY.md ]; then\n    gitbook pdf\n    github_asset_upload.sh $OWNER $NAME ${BRANCH:10}\n  fi\n\nfi\n```\n\nJenkins \u304b\u3089\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u30b9\u30af\u30ea\u30d7\u30c8 (github_asset_upload.sh) \u304c\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\ngitbook \u30b3\u30de\u30f3\u30c9\u3067\u751f\u6210\u3057\u305f book.pdf \u3092\u3001GitHub \u306e\u30ea\u30ea\u30fc\u30b9\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u51e6\u7406\u306b\u306a\u308a\u307e\u3059\u3002\nbook.pdf \u304c\u65e2\u306b\u5b58\u5728\u3059\u308b\u306a\u3089\u3001\u524a\u9664\u3057\u3066\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9 (\u66f4\u65b0) \u306b\u306a\u308a\u307e\u3059\u3002\n\n```bash:github_asset_upload.sh\n#!/bin/bash\n\nTOKEN=<\u3053\u3053\u306b\u30c8\u30fc\u30af\u30f3\u3092\u8a18\u8f09>\n\nOWNER=$1\nREPO=$2\nTAG=$3\n\nFILE=book.pdf\nTYPE=application/pdf\n\nURL_API=https://api.github.com/repos/${OWNER}/${REPO}/releases\nURL_UPLOAD=https://uploads.github.com/repos/${OWNER}/${REPO}/releases\nCURL=(curl -s -H \"Authorization: token ${TOKEN}\")\n\n\n# \u30bf\u30b0\u306e\u30ea\u30ea\u30fc\u30b9\u304c\u3042\u308b\u304b\uff1f\n#  \u306a\u3051\u308c\u3070\u3001\u4f5c\u6210\n#  \u3042\u308c\u3070\u3001\u4f55\u3082\u3057\u306a\u3044\nID_RELEASE=`\"${CURL[@]}\" -X GET $URL_API | jq \".[] | select(.tag_name == \\\"$TAG\\\") | .id\"`\nif [ -z $ID_RELEASE ] ; then\n  echo Release $TAG create.\n  ID_RELEASE=`\"${CURL[@]}\" -X POST $URL_API -d \"{\\\"tag_name\\\":\\\"$TAG\\\"}\" | jq \".id\"`\nelse\n  echo Release $TAG exists.\nfi\necho Release : $ID_RELEASE\n\n\n# \u30bf\u30b0\u306e\u30ea\u30ea\u30fc\u30b9\u3067\u3001\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u540d\u306eassets\u304c\u3042\u308b\u304b\uff1f\n#  \u306a\u3051\u308c\u3070\u3001\u4f55\u3082\u3057\u306a\u3044\n#  \u3042\u308c\u3070\u3001\u524a\u9664\nID_ASSET=`\"${CURL[@]}\" -X GET $URL_API/$ID_RELEASE/assets | jq \".[] | select(.name == \\\"$FILE\\\") | .id\"`\nif [ -z $ID_ASSET ] ; then\n  echo Asset $FILE not exists.\nelse\n  echo Asset $FILE exists : $ID_ASSET. so delete.\n  \"${CURL[@]}\" -X DELETE $URL_API/assets/$ID_ASSET -d \"{\\\"tag_name\\\":\\\"$TAG\\\"}\"\nfi\n\n\n# \u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\necho Asset $FILE upload.\nID_ASSET=`\"${CURL[@]}\" -X POST -H \"Content-type: $TYPE\" -F file=@$FILE $URL_UPLOAD/$ID_RELEASE/assets?name=$FILE | jq \".id\"`\necho Asset : $ID_ASSET\n```\n\n## \u52d5\u4f5c\u78ba\u8a8d\n\n\u30bf\u30b0\u3092\u6253\u3063\u3066Push\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\n$ git tag -a v1.9.0\n$ get push origin v1.9.0\n```\n\nRelease v1.9.0 \u304c\u4f5c\u6210\u3055\u308c\u3001\u305d\u306e\u4e2d\u306b book.pdf \u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2017-01-08_2_33_03.png](https://qiita-image-store.s3.amazonaws.com/0/69410/c9e929a8-d0b8-c4d1-7f82-22496e2b2a3d.png)\n\n## \u65e5\u672c\u8a9e\u5bfe\u5fdc\n\n\u65e5\u672c\u8a9e\u306b\u5bfe\u5fdc\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u30d5\u30a9\u30f3\u30c8\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u300cAdobe\uff0fGoogle\u8b39\u88fd\u306e\u6e90\u30ce\u89d2\u30b4\u30b7\u30c3\u30af(Noto Sans CJK / Source Han Sans)\u300d\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u305f\u3002(\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059)\nhttp://backport.net/blog/2016/09/06/pdf_embedded_japanese_font/\n\n\u30d5\u30a9\u30f3\u30c8\u306f\u3001book.json \u3067 \"GenShinGothic\" \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```json:book.json\n{\n  \"pdf\": {\n    \"fontFamily\": \"GenShinGothic\"\n  }\n}\n```\n\n\u3055\u3059\u304c\u6e90\u30ce\u89d2\uff01\u65e5\u672c\u8a9e\u304c\u30ad\u30ec\u30a4\u306bPDF\u5316\u3055\u308c\u307e\u3057\u305f\uff01\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2017-01-12 10.06.38.png](https://qiita-image-store.s3.amazonaws.com/0/69410/84f2a635-6728-1aa9-3100-d280947ab45e.png)\n\n\n## \u30ab\u30b9\u30bf\u30de\u30a4\u30ba\n\nPDF \u306e\u898b\u6804\u3048\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\nhttps://toolchain.gitbook.com/config.html\n\n```json:book.json\n{\n    \"pluginsConfig\": {\n        \"fontSettings\": {\n            \"size\": 2\n        }\n    },\n    \"pdf\": {\n        \"fontFamily\": \"GenShinGothic\",\n        \"fontSize\": 12,\n    }\n}\n```\n\n## \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u5c0f\u6280\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8(\u30de\u30fc\u30af\u30c0\u30a6\u30f3)\u306f\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3068\u540c\u3058\u30c4\u30ea\u30fc\u306b\u5165\u308c\u308b\u6d3e\u3068\u3001\u3044\u3084\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u3082\u5206\u3051\u305f\u3044\u3093\u3060\u3088\u3001\u3068\u3044\u3046\u6d3e\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u7de8\u96c6\u304c\u983b\u7e41\u306b\u3042\u308b\u5834\u5408\u3001\u30bd\u30fc\u30b9\u3068\u540c\u3058\u30d6\u30e9\u30f3\u30c1\u3060\u3068\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u304c\u8352\u308c\u3066\u304f\u308b\u306e\u3067\u3001\u4eca\u56de\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u7528\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u5206\u96e2\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u305d\u306e\u969b\u3001Git \u306e \u30aa\u30fc\u30d5\u30a1\u30f3(\u30eb\u30fc\u30c8\u306a\u3057\uff09 \u30d6\u30e9\u30f3\u30c1\u304c\u4fbf\u5229\u3067\u3059\u3002\n(\u30b3\u30df\u30c3\u30c8\u5c65\u6b74\u3084\u30bf\u30b0\u7b49\u3001master \u30d6\u30e9\u30f3\u30c1\u3068\u306f\u5b8c\u5168\u306b\u5207\u308a\u96e2\u3055\u308c\u305f\u30d6\u30e9\u30f3\u30c1\u306b\u306a\u308a\u307e\u3059\u3002)\n\n\u4ee5\u4e0b\u3067\u3001\u30eb\u30fc\u30c8\u306a\u3057\u306e documents \u30d6\u30e9\u30f3\u30c1\u3092\u4f5c\u6210\u3057\u3001\u305d\u3053\u306b \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8(\u30de\u30fc\u30af\u30c0\u30a6\u30f3) \u3092\u30b3\u30df\u30c3\u30c8\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n```\n$ git checkout --orphan documents\n```\n\n\n## \u304a\u308f\u308a\u306b\n - \u3053\u308c\u3067\u3001\u300c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u30de\u30fc\u30af\u30c0\u30a6\u30f3\u3067\u300d\u6d3b\u52d5\u304c\u3001\u4e00\u6b69\u9032\u307f\u307e\u3057\u305f\u3002\n - GitHub \u306e\u64cd\u4f5c\u306f\u3001Jenkins \u306e Git \u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4e0a\u624b\u304f\u4f7f\u3048\u3070\u3001\u3082\u3063\u3068\u7c21\u5358\u306b\u3067\u304d\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3067\u3059\u3002\n - HTML \u5f62\u5f0f\u3067\u51fa\u529b\u3057\u3066\u3001GitHub-Pages \u3067\u30d1\u30d6\u30ea\u30c3\u30b7\u30e5\u3057\u3088\u3046\u304b\u3001\u3068\u3082\u601d\u3044\u307e\u3057\u305f\u304c\u3001Private \u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u3082 GitHub-Pages \u306f Public \u306b\u306a\u308b\u306e\u3067\u3059\u306d\u3002\u5371\u306a\u3044\u3001\u5371\u306a\u3044\u3002\n\n\n", "tags": ["gitbook", "GitHub", "Jenkins", "CI", "AWS"]}