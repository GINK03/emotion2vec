{"context": "\u672c\u7a3f\u3067\u306f\uff0cXenServer\u306b\u304a\u3044\u3066\uff0c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5b58\u5728\u3057\u306a\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306eDebian\u3084Ubuntu\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\uff0cNetwork Installation Notes1\u3092\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\uff0e\u3084\u308a\u65b9\u306f\u305d\u306e\u8fba\u3067\u3088\u304f\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u3042\u3063\u305f\u308a\u3059\u308b\u306e\u3067\uff0c\u3069\u3046\u3044\u3046\u4ed5\u7d44\u307f\u306a\u306e\u304b\u306b\u3064\u3044\u3066\u3082\u52a0\u3048\u3066\u8aac\u660e\u3057\u307e\u30592\uff0e\n\n\u4ed5\u7d44\u307f\nXenServer\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u3046\u3061\uff0cDebian\u3092\u30d9\u30fc\u30b9\u3068\u3059\u308b\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u3067\u306f\uff0c\u30d1\u30e9\u30e1\u30fc\u30bfother-config\u306edebian-release\u3092\u53c2\u7167\u3057\u3066\uff0c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u4f7f\u7528\u3059\u308b\u30ec\u30dd\u30b8\u30c8\u30ea\u4e0a\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6c7a\u5b9a\u3057\u307e\u3059\uff0e\neliloader\u306e\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\u3059\u308b\u3068\uff0cother_config\u3067debianlike\u304c\u6307\u5b9a\u3055\u308c\u305f\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u306fdebian_first_boot_handler\u304c\u547c\u3073\u51fa\u3055\u308c\u3088\u3046\u306b\u30b3\u30fc\u30c9\u3055\u308c\u3066\u3044\u307e\u3059(721\u884c\u76ee)\uff0e\u305d\u3057\u3066\uff0cdebian_first_boot_handler\u306b\u304a\u3044\u3066\uff0cother-config\u306edebian-release\u306b\u3088\u3063\u3066dists\u3092\u7279\u5b9a\u3057\u3066\u3044\u307e\u3059\uff0e\n\neliloader\n    if other_config['install-repository'] == \"cdrom\":\n        cdrom_dirs = { 'i386': 'install.386/xen/',\n                       'amd64': 'install.amd/xen/',\n                       'x86_64': 'install.amd/xen/' }\n        vmlinuz_url = repo_url + cdrom_dirs[other_config['install-arch']] + \"vmlinuz\"\n        ramdisk_url = repo_url + cdrom_dirs[other_config['install-arch']] + \"initrd.gz\"\n    else:\n        boot_dir = \"dists/%s/main/installer-%s/current/images/netboot/xen/\" % (other_config['debian-release'], other_config['install-arch'])\n        vmlinuz_url = repo_url + boot_dir + \"vmlinuz\"\n        ramdisk_url = repo_url + boot_dir + \"initrd.gz\"\n\n    # download the kernel and ramdisk:\n    vmlinuz_file = close_mkstemp(dir = BOOTDIR, prefix = \"vmlinuz-\")\n    ramdisk_file = close_mkstemp(dir = BOOTDIR, prefix = \"ramdisk-\")\n\n\n\u3053\u306e\u3088\u3046\u306a\u4ed5\u7d44\u307f\u3067\u52d5\u4f5c\u3059\u308b\u305f\u3081\uff0c\u4e0b\u8a18\u30b3\u30fc\u30c9\u3067\u6b63\u3057\u3044\u30d1\u30b9\u304c\u751f\u6210\u3055\u308c\u308b\u3088\u3046\u306b\uff0cdebian-release\u3092\u4e0e\u3048\u308c\u3070\u3088\u3044\u3068\u308f\u304b\u308a\u307e\u3059\uff0eDebian Wheezy\u3067\u3042\u308c\u3070\uff0cwheezy\u3092\uff0cUbuntu Xenial Xerus\u3067\u3042\u308c\u3070\uff0cxenial\u3092\u4e0e\u3048\u308c\u3070\u3088\u3044\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\uff0e\n        boot_dir = \"dists/%s/main/installer-%s/current/images/netboot/xen/\" % (other_config['debian-release'], other_config['install-arch'])\n\n\n\u65b9\u6cd5\n\n\u30b7\u30a7\u30eb\u95a2\u6570\u306e\u767b\u9332\nXenServer\u69cb\u7bc9\u76f4\u5f8c\u306b\u5b9f\u65bd\u3059\u308b\u3088\u3046\u306a\u4f5c\u696d\u306a\u306e\u3067\uff0c\u6700\u521d\u306b\u30b7\u30a7\u30eb\u95a2\u6570\u3092\u4e00\u6642\u7684\u306b\u767b\u9332\u3057\u3066\u4e00\u6c17\u306b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u308a\u307e\u3059\uff0e\nXenServer\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff0e\n\ntemplate_add\nfunction template_add () {\n    MIRROR=$1\n    BASE_TPL=$2\n    NEW_TPL=$3\n    DEBIAN_RELEASE=$4\n\n    BASEUUID=$(xe template-list name-label=\"$BASE_TPL\" --minimal)\n    if [[ -z $BASEUUID ]] ; then\n        echo \"Cant find \\\"$BASE_TPL\\ template.\"\n        exit 1\n    fi\n    NEWUUID=$(xe vm-clone uuid=$BASEUUID new-name-label=\"$NEW_TPL\")\n    xe template-param-set uuid=$NEWUUID other-config:default_template=true\n    xe template-param-set uuid=$NEWUUID other-config:debian-release=$DEBIAN_RELEASE\n    xe template-param-set uuid=$NEWUUID other-config:install-methods=http other-config-install-repository=$MIRROR\n    echo $NEWUUID\n}\n\n\n\nDebian\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u8ffd\u52a0\nXenServer\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8ffd\u52a0\u3057\u307e\u3059\uff0e\nMIRROR=http://cdn.debian.or.jp/debian/\nWHEEZY=\"Debian Wheezy 7.0 (64-bit)\"\n\ntemplate_add $MIRROR \"$WHEEZY\" \"Debian Jessie 8.0 (64-bit) (Fixed)\" jessie\ntemplate_add $MIRROR \"$WHEEZY\" \"Debian Stretch 9.0 (64-bit) (Fixed)\" stretch\n\n\nUbuntu\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u8ffd\u52a0\nXenServer\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8ffd\u52a0\u3057\u307e\u3059\uff0e\nMIRROR=http://jp.archive.ubuntu.com/ubuntu/\nPRECISE=\"Ubuntu Precise Pangolin 12.04 (64-bit)\"\n\ntemplate_add $MIRROR \"$PRECISE\" \"Ubuntu Trusty Tahr 14.04 LTS (64-bit) (fixed)\" trusty\ntemplate_add $MIRROR \"$PRECISE\" \"Ubuntu Wily Werewolf 15.10 (64-bit) (fixed)\" wily\ntemplate_add $MIRROR \"$PRECISE\" \"Ubuntu Xenial Xerus 16.04 LTS (64-bit) (Fixed)\" xenial\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u540d\u524d\u5909\u66f4\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u540d\u524d\u3092\u5909\u66f4\u3059\u308b\u3068\u304d\u306f\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\uff0e\nxe template-param-set uuid=`xe template-list name-label=\"<\u5143\u306e\u540d\u524d>\" --minimal` name-label=\"<\u65b0\u3057\u3044\u540d\u524d>\"\n\n\n\n\n\n\u8868\u8a18\u3086\u308c\u304c\u3042\u308a\u307e\u3059\u304c\uff0cnetboot, network install, webinstall, netinstall\u306a\u3093\u3066\u8a00\u8449\u3067\u547c\u3070\u308c\u3066\u308b\u3088\u3046\u3067\u3059\uff0e\u00a0\u21a9\n\n\n\u30b3\u30fc\u30c9\u8aad\u3093\u3067\u3053\u3046\u3044\u3046\u52d5\u4f5c\u3060\u308d\u3063\u3066\u89e3\u91c8\u3057\u3066\u308b\u3060\u3051\u3067\u9593\u9055\u3063\u3066\u308b\u304b\u3082\u77e5\u308c\u307e\u305b\u3093\uff0e\u3042\u3057\u304b\u3089\u305a\uff0e\u00a0\u21a9\n\n\n\n\u672c\u7a3f\u3067\u306f\uff0cXenServer\u306b\u304a\u3044\u3066\uff0c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5b58\u5728\u3057\u306a\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306eDebian\u3084Ubuntu\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\uff0c[Network Installation Notes](http://docs.vmd.citrix.com/XenServer/6.5.0/1.0/en_gb/guest.html#installingVM-guest_installer-network_repository)[^1]\u3092\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\uff0e\u3084\u308a\u65b9\u306f\u305d\u306e\u8fba\u3067\u3088\u304f\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u3042\u3063\u305f\u308a\u3059\u308b\u306e\u3067\uff0c\u3069\u3046\u3044\u3046\u4ed5\u7d44\u307f\u306a\u306e\u304b\u306b\u3064\u3044\u3066\u3082\u52a0\u3048\u3066\u8aac\u660e\u3057\u307e\u3059[^2]\uff0e\n\n[^1]: \u8868\u8a18\u3086\u308c\u304c\u3042\u308a\u307e\u3059\u304c\uff0cnetboot, network install, webinstall, netinstall\u306a\u3093\u3066\u8a00\u8449\u3067\u547c\u3070\u308c\u3066\u308b\u3088\u3046\u3067\u3059\uff0e\n[^2]: \u30b3\u30fc\u30c9\u8aad\u3093\u3067\u3053\u3046\u3044\u3046\u52d5\u4f5c\u3060\u308d\u3063\u3066\u89e3\u91c8\u3057\u3066\u308b\u3060\u3051\u3067\u9593\u9055\u3063\u3066\u308b\u304b\u3082\u77e5\u308c\u307e\u305b\u3093\uff0e\u3042\u3057\u304b\u3089\u305a\uff0e\n\n# \u4ed5\u7d44\u307f\nXenServer\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u3046\u3061\uff0cDebian\u3092\u30d9\u30fc\u30b9\u3068\u3059\u308b\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u3067\u306f\uff0c\u30d1\u30e9\u30e1\u30fc\u30bf`other-config`\u306e`debian-release`\u3092\u53c2\u7167\u3057\u3066\uff0c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u4f7f\u7528\u3059\u308b\u30ec\u30dd\u30b8\u30c8\u30ea\u4e0a\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6c7a\u5b9a\u3057\u307e\u3059\uff0e\n`eliloader`\u306e\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\u3059\u308b\u3068\uff0c`other_config`\u3067[`debianlike`](https://github.com/xapi-project/xcp-eliloader/blob/164a7fd50896d747189c344d15895c6aa52748ad/eliloader#L77)\u304c\u6307\u5b9a\u3055\u308c\u305f\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u306f[`debian_first_boot_handler`](https://github.com/xapi-project/xcp-eliloader/blob/164a7fd50896d747189c344d15895c6aa52748ad/eliloader#L563)\u304c\u547c\u3073\u51fa\u3055\u308c\u3088\u3046\u306b\u30b3\u30fc\u30c9\u3055\u308c\u3066\u3044\u307e\u3059([721\u884c\u76ee](https://github.com/xapi-project/xcp-eliloader/blob/164a7fd50896d747189c344d15895c6aa52748ad/eliloader#L721))\uff0e\u305d\u3057\u3066\uff0c[`debian_first_boot_handler`](https://github.com/xapi-project/xcp-eliloader/blob/164a7fd50896d747189c344d15895c6aa52748ad/eliloader#L563)\u306b\u304a\u3044\u3066\uff0c`other-config`\u306e`debian-release`\u306b\u3088\u3063\u3066dists\u3092\u7279\u5b9a\u3057\u3066\u3044\u307e\u3059\uff0e\n\n```py3:eliloader\n    if other_config['install-repository'] == \"cdrom\":\n        cdrom_dirs = { 'i386': 'install.386/xen/',\n                       'amd64': 'install.amd/xen/',\n                       'x86_64': 'install.amd/xen/' }\n        vmlinuz_url = repo_url + cdrom_dirs[other_config['install-arch']] + \"vmlinuz\"\n        ramdisk_url = repo_url + cdrom_dirs[other_config['install-arch']] + \"initrd.gz\"\n    else:\n        boot_dir = \"dists/%s/main/installer-%s/current/images/netboot/xen/\" % (other_config['debian-release'], other_config['install-arch'])\n        vmlinuz_url = repo_url + boot_dir + \"vmlinuz\"\n        ramdisk_url = repo_url + boot_dir + \"initrd.gz\"\n\n    # download the kernel and ramdisk:\n    vmlinuz_file = close_mkstemp(dir = BOOTDIR, prefix = \"vmlinuz-\")\n    ramdisk_file = close_mkstemp(dir = BOOTDIR, prefix = \"ramdisk-\")\n```\n\n\u3053\u306e\u3088\u3046\u306a\u4ed5\u7d44\u307f\u3067\u52d5\u4f5c\u3059\u308b\u305f\u3081\uff0c\u4e0b\u8a18\u30b3\u30fc\u30c9\u3067\u6b63\u3057\u3044\u30d1\u30b9\u304c\u751f\u6210\u3055\u308c\u308b\u3088\u3046\u306b\uff0c`debian-release`\u3092\u4e0e\u3048\u308c\u3070\u3088\u3044\u3068\u308f\u304b\u308a\u307e\u3059\uff0eDebian Wheezy\u3067\u3042\u308c\u3070\uff0c`wheezy`\u3092\uff0cUbuntu Xenial Xerus\u3067\u3042\u308c\u3070\uff0cxenial\u3092\u4e0e\u3048\u308c\u3070\u3088\u3044\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\uff0e\n\n```py3\n        boot_dir = \"dists/%s/main/installer-%s/current/images/netboot/xen/\" % (other_config['debian-release'], other_config['install-arch'])\n```\n\n# \u65b9\u6cd5\n\n## \u30b7\u30a7\u30eb\u95a2\u6570\u306e\u767b\u9332\nXenServer\u69cb\u7bc9\u76f4\u5f8c\u306b\u5b9f\u65bd\u3059\u308b\u3088\u3046\u306a\u4f5c\u696d\u306a\u306e\u3067\uff0c\u6700\u521d\u306b\u30b7\u30a7\u30eb\u95a2\u6570\u3092\u4e00\u6642\u7684\u306b\u767b\u9332\u3057\u3066\u4e00\u6c17\u306b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u308a\u307e\u3059\uff0e\n\nXenServer\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\uff0e\n\n```bash:template_add\nfunction template_add () {\n\tMIRROR=$1\n\tBASE_TPL=$2\n\tNEW_TPL=$3\n\tDEBIAN_RELEASE=$4\n\t\n\tBASEUUID=$(xe template-list name-label=\"$BASE_TPL\" --minimal)\n\tif [[ -z $BASEUUID ]] ; then\n\t\techo \"Cant find \\\"$BASE_TPL\\ template.\"\n\t\texit 1\n\tfi\n\tNEWUUID=$(xe vm-clone uuid=$BASEUUID new-name-label=\"$NEW_TPL\")\n\txe template-param-set uuid=$NEWUUID other-config:default_template=true\n\txe template-param-set uuid=$NEWUUID other-config:debian-release=$DEBIAN_RELEASE\n\txe template-param-set uuid=$NEWUUID other-config:install-methods=http other-config-install-repository=$MIRROR\n\techo $NEWUUID\n}\n```\n\n## Debian\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u8ffd\u52a0\nXenServer\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8ffd\u52a0\u3057\u307e\u3059\uff0e\n\n```bash\nMIRROR=http://cdn.debian.or.jp/debian/\nWHEEZY=\"Debian Wheezy 7.0 (64-bit)\"\n\ntemplate_add $MIRROR \"$WHEEZY\" \"Debian Jessie 8.0 (64-bit) (Fixed)\" jessie\ntemplate_add $MIRROR \"$WHEEZY\" \"Debian Stretch 9.0 (64-bit) (Fixed)\" stretch\n```\n\n# Ubuntu\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u8ffd\u52a0\nXenServer\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8ffd\u52a0\u3057\u307e\u3059\uff0e\n\n```bash\nMIRROR=http://jp.archive.ubuntu.com/ubuntu/\nPRECISE=\"Ubuntu Precise Pangolin 12.04 (64-bit)\"\n\ntemplate_add $MIRROR \"$PRECISE\" \"Ubuntu Trusty Tahr 14.04 LTS (64-bit) (fixed)\" trusty\ntemplate_add $MIRROR \"$PRECISE\" \"Ubuntu Wily Werewolf 15.10 (64-bit) (fixed)\" wily\ntemplate_add $MIRROR \"$PRECISE\" \"Ubuntu Xenial Xerus 16.04 LTS (64-bit) (Fixed)\" xenial\n```\n\n## \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u540d\u524d\u5909\u66f4\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u540d\u524d\u3092\u5909\u66f4\u3059\u308b\u3068\u304d\u306f\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\uff0e\n\n```bash\nxe template-param-set uuid=`xe template-list name-label=\"<\u5143\u306e\u540d\u524d>\" --minimal` name-label=\"<\u65b0\u3057\u3044\u540d\u524d>\"\n```\n", "tags": ["XenServer", "XenServer6.5", "Debian", "Ubuntu", "ubuntu16.04"]}