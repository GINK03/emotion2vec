{"context": " More than 1 year has passed since last update.\n\nSSL\u8a3c\u660e\u66f8\u306e\u671f\u9650\u3092\u78ba\u8a8d\u3059\u308b\n\u3053\u3093\u306a\u611f\u3058\u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002\n$ sslexpire secure.nicovideo.jp\nhttps://secure.nicovideo.jp SSL certificate expires after 39 days and 13 hours (2014/06/30 23:59:00 JST)\n\n#!/bin/bash\n#\n# usage: $0 domain[:port] [alert days] [timeout]\n# ex)\n# $0 yahoo.com 365\n#\n\nserver=${1//:*/}\nport=${1/*:/}\ntest \"$server\" = \"$port\" && port=443\nlimit=${2-60}   # default 60 days\ntimeout=${3-3}  # default timeout 3 seconds\n\nnotafter=$(timeout $timeout openssl s_client -connect $server:$port < /dev/null 2> /dev/null | openssl x509 -enddate -noout 2> /dev/null | cut -d= -f2)\n\nif [ \"$notafter\" ]; then\n    s=$(( $(date --date \"$notafter\" +%s) - $(date +%s) ))\n\n    if [ $limit -ge $((s / 86400)) ]; then\n        d=$(date --date \"$notafter\" +\"%Y/%m/%d %H:%M:%S %Z\")\n        days=$((s/86400))\n        hours=$((s%86400/3600))\n        echo -n \"https://$server SSL certificate expires after \"\n        if [ $days -gt 0 ]; then\n            echo -n $days day\n            if [ $days -gt 1 ]; then\n                echo -n s\n            fi\n        fi\n        if [ $hours -gt 0 ]; then\n            if [ $days -gt 0 ]; then\n                echo -n \" and \"\n            fi\n            echo -n $hours hour\n            if [ $hours -gt 1 ]; then\n                echo -n s\n            fi\n        fi\n        echo \" ($d)\"\n\n        exit 1\n    fi\nelse\n    echo \"https://$server is not supported SSL or timeout?\"\n    exit 1\nfi\n\n\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u51e6\u7406\u306f\u3082\u3046\u3061\u3087\u3063\u3068\u306a\u3093\u3068\u304b\u3057\u305f\u307b\u3046\u304c\u3044\u3044\u3002\n## SSL\u8a3c\u660e\u66f8\u306e\u671f\u9650\u3092\u78ba\u8a8d\u3059\u308b\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\n```text\n$ sslexpire secure.nicovideo.jp\nhttps://secure.nicovideo.jp SSL certificate expires after 39 days and 13 hours (2014/06/30 23:59:00 JST)\n```\n\n\n```bash\n#!/bin/bash\n#\n# usage: $0 domain[:port] [alert days] [timeout]\n# ex)\n# $0 yahoo.com 365\n#\n\nserver=${1//:*/}\nport=${1/*:/}\ntest \"$server\" = \"$port\" && port=443\nlimit=${2-60}   # default 60 days\ntimeout=${3-3}  # default timeout 3 seconds\n\nnotafter=$(timeout $timeout openssl s_client -connect $server:$port < /dev/null 2> /dev/null | openssl x509 -enddate -noout 2> /dev/null | cut -d= -f2)\n\nif [ \"$notafter\" ]; then\n    s=$(( $(date --date \"$notafter\" +%s) - $(date +%s) ))\n\n    if [ $limit -ge $((s / 86400)) ]; then\n        d=$(date --date \"$notafter\" +\"%Y/%m/%d %H:%M:%S %Z\")\n        days=$((s/86400))\n        hours=$((s%86400/3600))\n        echo -n \"https://$server SSL certificate expires after \"\n        if [ $days -gt 0 ]; then\n            echo -n $days day\n            if [ $days -gt 1 ]; then\n                echo -n s\n            fi\n        fi\n        if [ $hours -gt 0 ]; then\n            if [ $days -gt 0 ]; then\n                echo -n \" and \"\n            fi\n            echo -n $hours hour\n            if [ $hours -gt 1 ]; then\n                echo -n s\n            fi\n        fi\n        echo \" ($d)\"\n\n        exit 1\n    fi\nelse\n    echo \"https://$server is not supported SSL or timeout?\"\n    exit 1\nfi\n```\n\n\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u51e6\u7406\u306f\u3082\u3046\u3061\u3087\u3063\u3068\u306a\u3093\u3068\u304b\u3057\u305f\u307b\u3046\u304c\u3044\u3044\u3002\n", "tags": ["Bash", "openssl", "certificate"]}