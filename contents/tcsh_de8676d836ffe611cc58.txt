{"context": " More than 1 year has passed since last update.http://jawsug-cli.doorkeeper.jp/events/14614 \u3067\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599 (\u305d\u306e2)\u3067\u3059\u3002\nCloudFormation\u3092\u5229\u7528\u3057\u3066\u3001S3\u4e0a\u306b\u9759\u7684\u30a6\u30a7\u30d6\u30db\u30b9\u30c6\u30a3\u30f3\u30b0(\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3)\u7528\u306e\u30d0\u30b1\u30c3\u30c8\u3092\u69cb\u7bc9\u3001\u904b\u7528\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306f\u3001\u4f55\u306e\u8a2d\u5b9a\u3082\u7121\u3044\u3001\u30d4\u30e5\u30a2\u306aS3\u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30c9\u30e1\u30a4\u30f3\u53d6\u5f97\u76f4\u5f8c(\u3082\u3057\u304f\u306f\u65b0\u3057\u3044\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u306e\u4f5c\u6210)\u306eWeb\u516c\u958b\u6e96\u5099\u4f5c\u696d\u3068\u3057\u3066\u884c\u306a\u3046\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n(\u524d\u4f5c\u696d\u3068\u3057\u3066\u3001Route53\u4e0a\u306bHosted Zone\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002 http://qiita.com/tcsh/items/dcd72bfd807626fad8f0)\n\n\u524d\u63d0\u6761\u4ef6\n\nS3\u3078\u306e\u30d5\u30eb\u30a2\u30af\u30bb\u30b9\u6a29\u9650\n\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u904b\u7528\u3057\u3066\u3044\u308b\u3002\n\n\n\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u53d6\u5f97\u624b\u9806: http://qiita.com/tcsh/items/597e7644949bfe4ab405\n\n\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u6301\u3063\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001example.com\u3084example.jp\u306e\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3092\u5229\u7528\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002(Route53\u3078\u306e\u767b\u9332\u306f\u53ef\u80fd\u306a\u3088\u3046\u3067\u3059\u3002\u7d99\u7d9a\u7684\u306b\u5229\u7528\u3067\u304d\u308b\u304b\u306f\u672a\u78ba\u8a8d)\n\n\n\n\n0. \u4e8b\u524d\u4f5c\u696d\n\n0.1. \u30c9\u30e1\u30a4\u30f3\u306e\u6c7a\u5b9a\nWeb\u30b5\u30a4\u30c8\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3092\u884c\u306a\u3046\u30c9\u30e1\u30a4\u30f3\u3092\u6c7a\u3081\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\n$ S3_BUCKET_NAME=www.example.com\n\n\n\n0.2. \u5909\u6570\u306e\u5b9a\u7fa9\n\n\u30b3\u30de\u30f3\u30c9\n$ CF_STACK_NAME=\"s3-`echo ${S3_BUCKET_NAME}|sed 's/\\./-/g'`\"; echo ${CF_STACK_NAME}\n$ FILE_CF_TEMPLATE=\"${CF_STACK_NAME}.template\"\n\n\n\n0.3. \u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u6c7a\u5b9a\n\u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u305f\u3044\u30ea\u30fc\u30b8\u30e7\u30f3\u3092AWS_DEFAULT_REGION\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n(aws cli\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30ea\u30fc\u30b8\u30e7\u30f3\u304c\u5909\u66f4\u3055\u308c\u307e\u3059\u3002)\n\n\u30b3\u30de\u30f3\u30c9(\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u4f8b)\n$ export AWS_DEFAULT_REGION='ap-northeast-1'\n\n\n\n0.4. \u30ea\u30dd\u30b8\u30c8\u30ea\u3078\u306e\u79fb\u52d5\n\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u3001\u4f5c\u696d\u5834\u6240\u3068\u3057\u3066\u30ea\u30dd\u30b8\u30c8\u30ea\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9(\u4f8b)\n$ cd ~/_work/aws/project-01\n\n\n\n\u30b3\u30de\u30f3\u30c9\n$ touch ${FILE_CF_TEMPLATE}\n$ hg add ${FILE_CF_TEMPLATE}\n\n\n\n1. \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4f5c\u6210\nCloudFormation\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 \u3053\u3053\u3067\u306fS3\u30d0\u30b1\u30c3\u30c8(\u8a2d\u5b9a\u306a\u3057)\u30922\u3064\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u30b3\u30f3\u30c6\u30f3\u30c4\u30d0\u30b1\u30c3\u30c8 (\u516c\u958b\u3059\u308b\u30db\u30b9\u30c8\u540d\u3068\u540c\u3058\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002)\n\u30ed\u30b0\u30d0\u30b1\u30c3\u30c8 (\u3053\u3053\u3067\u306f\u3001{\u30b3\u30f3\u30c6\u30f3\u30c4\u30d0\u30b1\u30c3\u30c8}-log\u3068\u3044\u3046\u540d\u524d\u306b\u3057\u307e\u3059\u3002)\n\n\n\u30b3\u30de\u30f3\u30c9\n$ cat << EOF > ${FILE_CF_TEMPLATE}\n{\n   \"AWSTemplateFormatVersion\": \"2010-09-09\",\n\n   \"Description\": \"website bucket (${S3_BUCKET_NAME})\",\n\n   \"Resources\": {\n     \"LogBucket\": {\n       \"Type\": \"AWS::S3::Bucket\",\n       \"Properties\": {\n         \"BucketName\": \"${S3_BUCKET_NAME}-log\"\n       }\n     },\n     \"WebBucket\": {\n       \"Type\": \"AWS::S3::Bucket\",\n       \"Properties\": {\n         \"BucketName\": \"${S3_BUCKET_NAME}\"\n       }\n     }\n   }\n}\nEOF\n\n\nJSON\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u58ca\u308c\u3066\u306a\u3044\u304b\u5fc5\u305a\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\n$ cat ${FILE_CF_TEMPLATE} | json_verify\n\n\n\n\u7d50\u679c\nJSON is valid\n\n\ninvalid\u3068\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u305f\u5834\u5408\u306f\u3001jsonlint\u3067\u3069\u3053\u304c\u58ca\u308c\u3066\u3044\u308b\u304b\u8abf\u3079\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\n$ cat ${FILE_CF_TEMPLATE} | jsonlint\n\n\nvalidate-template\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u3067\u3001\u7c21\u5358\u306a\u691c\u8a3c\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\n$ aws cloudformation validate-template --template-body file://${FILE_CF_TEMPLATE}\n\n\n\n2. \u30d0\u30b1\u30c3\u30c8\u4f5c\u6210\nS3\u4e0a\u3067\u3001\u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n2.1. \u30b9\u30bf\u30c3\u30af(S3\u30d0\u30b1\u30c3\u30c8)\u4f5c\u6210\n\n\u30b3\u30de\u30f3\u30c9\n$ aws cloudformation create-stack --stack-name ${CF_STACK_NAME} --template-body file://${FILE_CF_TEMPLATE}\n\n\n\n\u7d50\u679c\n{\n  \"StackId\": \"arn:aws:cloudformation:ap-northeast-1:XXXXXXXXXXXX:stack/route53-example-com-hostedzone/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\"\n}\n\n\n\n2.2. \u30b9\u30bf\u30c3\u30af\u306e\u72b6\u6cc1\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\n$  aws cloudformation list-stacks \\\n   | jq -r --arg stackname ${CF_STACK_NAME} '.StackSummaries[] | select(.StackName == $stackname) | .StackStatus'\n\n\n\n\u7d50\u679c\nCREATE_COMPLETE\n\n\nStackStatus\u304c\u2019CREATE_COMPLETE\u2019\u306b\u306a\u3063\u3066\u3044\u308c\u3070\u4f5c\u6210\u306f\u5b8c\u4e86\u3067\u3059\u3002 (30\u79d2\u304b\u30891\u5206\u7a0b\u5ea6\u304b\u304b\u308b\u3088\u3046\u3067\u3059\u3002)\n\u305d\u308c\u4ee5\u5916\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3067Failed\u306e\u6587\u5b57\u304c\u51fa\u3066\u3044\u308b\u524d\u5f8c\u3092\u898b\u3066\u539f\u56e0\u3092\u8abf\u3079\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\n$ aws cloudformation describe-stack-events --stack-name ${CF_STACK_NAME}\n\n\n\n2.3. \u30b9\u30bf\u30c3\u30af\u306e\u5185\u5bb9\u78ba\u8a8d\n\u4f5c\u6210\u3055\u308c\u305f\u30b9\u30bf\u30c3\u30af\u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\n$ aws cloudformation get-template --stack-name ${CF_STACK_NAME}\n\n\n\n\u7d50\u679c\n{\n    \"TemplateBody\": {\n        \"AWSTemplateFormatVersion\": \"2010-09-09\", \n        \"Description\": \"website bucket (www.example.com)\", \n        \"Resources\": {\n            \"WebBucket\": {\n                \"Type\": \"AWS::S3::Bucket\", \n                \"Properties\": {\n                    \"BucketName\": \"www.example.com\"\n                }\n            }, \n            \"LogBucket\": {\n                \"Type\": \"AWS::S3::Bucket\", \n                \"Properties\": {\n                    \"BucketName\": \"www.example.com-log\"\n                }\n            }\n        }\n    }\n}\n\n\n\n3. \u30d0\u30b1\u30c3\u30c8\u78ba\u8a8d\n\u30b3\u30f3\u30c6\u30f3\u30c4\u30d0\u30b1\u30c3\u30c8\u3068\u30ed\u30b0\u30d0\u30b1\u30c3\u30c8\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\n$ aws s3 ls | grep ${S3_BUCKET_NAME}\n\n\n\n\u30b3\u30de\u30f3\u30c9\n  2014-11-10 13:05:20 www.example.com\n  2014-11-10 13:05:16 www.example.com-log\n\n\n\n4. \u30b3\u30df\u30c3\u30c8\n\u554f\u984c\u7121\u304f\u30d0\u30b1\u30c3\u30c9\u306e\u4f5c\u6210\u304c\u5b8c\u4e86\u3057\u3066\u3044\u308c\u3070\u3001\u3053\u3053\u3067\u4e00\u65e6\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30b3\u30df\u30c3\u30c8\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n\u30b3\u30de\u30f3\u30c9\n$ hg commit -m \"created website bucket (${S3_BUCKET_NAME}).\"\n\n\n\n\u5b8c\u4e86\nWeb\u30b5\u30a4\u30c8\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u306b\u5fc5\u8981\u306a\u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u305f\u306e\u3067\u3001\u5f15\u304d\u7d9a\u304dWeb\u516c\u958b\u306b\u5fc5\u8981\u306a\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u304d\u307e\u3059\u3002 (http://qiita.com/tcsh/items/3e72c7bd32d4872b972a)\nhttp://jawsug-cli.doorkeeper.jp/events/14614 \u3067\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599 (\u305d\u306e2)\u3067\u3059\u3002\n\nCloudFormation\u3092\u5229\u7528\u3057\u3066\u3001S3\u4e0a\u306b\u9759\u7684\u30a6\u30a7\u30d6\u30db\u30b9\u30c6\u30a3\u30f3\u30b0(\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3)\u7528\u306e\u30d0\u30b1\u30c3\u30c8\u3092\u69cb\u7bc9\u3001\u904b\u7528\u3057\u307e\u3059\u3002\n\n\u4eca\u56de\u306f\u3001\u4f55\u306e\u8a2d\u5b9a\u3082\u7121\u3044\u3001\u30d4\u30e5\u30a2\u306aS3\u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u30c9\u30e1\u30a4\u30f3\u53d6\u5f97\u76f4\u5f8c(\u3082\u3057\u304f\u306f\u65b0\u3057\u3044\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u306e\u4f5c\u6210)\u306eWeb\u516c\u958b\u6e96\u5099\u4f5c\u696d\u3068\u3057\u3066\u884c\u306a\u3046\u3053\u3068\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n(\u524d\u4f5c\u696d\u3068\u3057\u3066\u3001Route53\u4e0a\u306bHosted Zone\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002 http://qiita.com/tcsh/items/dcd72bfd807626fad8f0)\n\n\n\u524d\u63d0\u6761\u4ef6\n===========\n\n* S3\u3078\u306e\u30d5\u30eb\u30a2\u30af\u30bb\u30b9\u6a29\u9650\n* \u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u904b\u7528\u3057\u3066\u3044\u308b\u3002\n  * \u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u53d6\u5f97\u624b\u9806: http://qiita.com/tcsh/items/597e7644949bfe4ab405\n  * \u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3092\u6301\u3063\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001example.com\u3084example.jp\u306e\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3092\u5229\u7528\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002(Route53\u3078\u306e\u767b\u9332\u306f\u53ef\u80fd\u306a\u3088\u3046\u3067\u3059\u3002\u7d99\u7d9a\u7684\u306b\u5229\u7528\u3067\u304d\u308b\u304b\u306f\u672a\u78ba\u8a8d)\n\n\n0. \u4e8b\u524d\u4f5c\u696d\n=============\n\n0.1. \u30c9\u30e1\u30a4\u30f3\u306e\u6c7a\u5b9a\n--------------------\n\nWeb\u30b5\u30a4\u30c8\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3092\u884c\u306a\u3046\u30c9\u30e1\u30a4\u30f3\u3092\u6c7a\u3081\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\n$ S3_BUCKET_NAME=www.example.com\n```\n\n0.2. \u5909\u6570\u306e\u5b9a\u7fa9\n------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\n$ CF_STACK_NAME=\"s3-`echo ${S3_BUCKET_NAME}|sed 's/\\./-/g'`\"; echo ${CF_STACK_NAME}\n$ FILE_CF_TEMPLATE=\"${CF_STACK_NAME}.template\"\n```\n\n0.3. \u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u6c7a\u5b9a\n----------------------\n\n\u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u305f\u3044\u30ea\u30fc\u30b8\u30e7\u30f3\u3092AWS_DEFAULT_REGION\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n(aws cli\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30ea\u30fc\u30b8\u30e7\u30f3\u304c\u5909\u66f4\u3055\u308c\u307e\u3059\u3002)\n\n```bash:\u30b3\u30de\u30f3\u30c9(\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u4f8b):\n$ export AWS_DEFAULT_REGION='ap-northeast-1'\n```\n\n\n0.4. \u30ea\u30dd\u30b8\u30c8\u30ea\u3078\u306e\u79fb\u52d5\n----------------------\n\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u3001\u4f5c\u696d\u5834\u6240\u3068\u3057\u3066\u30ea\u30dd\u30b8\u30c8\u30ea\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9(\u4f8b):\n$ cd ~/_work/aws/project-01\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\n$ touch ${FILE_CF_TEMPLATE}\n$ hg add ${FILE_CF_TEMPLATE}\n```\n\n1. \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4f5c\u6210\n===================\n\nCloudFormation\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 \u3053\u3053\u3067\u306fS3\u30d0\u30b1\u30c3\u30c8(\u8a2d\u5b9a\u306a\u3057)\u30922\u3064\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n* \u30b3\u30f3\u30c6\u30f3\u30c4\u30d0\u30b1\u30c3\u30c8 (\u516c\u958b\u3059\u308b\u30db\u30b9\u30c8\u540d\u3068\u540c\u3058\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002)\n* \u30ed\u30b0\u30d0\u30b1\u30c3\u30c8 (\u3053\u3053\u3067\u306f\u3001{\u30b3\u30f3\u30c6\u30f3\u30c4\u30d0\u30b1\u30c3\u30c8}-log\u3068\u3044\u3046\u540d\u524d\u306b\u3057\u307e\u3059\u3002)\n\n```bash:\u30b3\u30de\u30f3\u30c9:\n$ cat << EOF > ${FILE_CF_TEMPLATE}\n{\n   \"AWSTemplateFormatVersion\": \"2010-09-09\",\n\n   \"Description\": \"website bucket (${S3_BUCKET_NAME})\",\n\n   \"Resources\": {\n     \"LogBucket\": {\n       \"Type\": \"AWS::S3::Bucket\",\n       \"Properties\": {\n         \"BucketName\": \"${S3_BUCKET_NAME}-log\"\n       }\n     },\n     \"WebBucket\": {\n       \"Type\": \"AWS::S3::Bucket\",\n       \"Properties\": {\n         \"BucketName\": \"${S3_BUCKET_NAME}\"\n       }\n     }\n   }\n}\nEOF\n```\n\nJSON\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u58ca\u308c\u3066\u306a\u3044\u304b\u5fc5\u305a\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\n```bash:\u30b3\u30de\u30f3\u30c9:\n$ cat ${FILE_CF_TEMPLATE} | json_verify\n```\n\n```text:\u7d50\u679c:\nJSON is valid\n```\n\ninvalid\u3068\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u305f\u5834\u5408\u306f\u3001jsonlint\u3067\u3069\u3053\u304c\u58ca\u308c\u3066\u3044\u308b\u304b\u8abf\u3079\u307e\u3059\u3002\n\n\n```bash:\u30b3\u30de\u30f3\u30c9:\n$ cat ${FILE_CF_TEMPLATE} | jsonlint\n```\n\nvalidate-template\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u3067\u3001\u7c21\u5358\u306a\u691c\u8a3c\u304c\u3067\u304d\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\n$ aws cloudformation validate-template --template-body file://${FILE_CF_TEMPLATE}\n```\n\n\n\n2. \u30d0\u30b1\u30c3\u30c8\u4f5c\u6210\n===============\n\nS3\u4e0a\u3067\u3001\u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n2.1. \u30b9\u30bf\u30c3\u30af(S3\u30d0\u30b1\u30c3\u30c8)\u4f5c\u6210\n------------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\n$ aws cloudformation create-stack --stack-name ${CF_STACK_NAME} --template-body file://${FILE_CF_TEMPLATE}\n```\n\n```json:\u7d50\u679c:\n{\n  \"StackId\": \"arn:aws:cloudformation:ap-northeast-1:XXXXXXXXXXXX:stack/route53-example-com-hostedzone/XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\"\n}\n```\n\n2.2. \u30b9\u30bf\u30c3\u30af\u306e\u72b6\u6cc1\u78ba\u8a8d\n-----------------------\n\n\n```bash:\u30b3\u30de\u30f3\u30c9:\n$  aws cloudformation list-stacks \\\n   | jq -r --arg stackname ${CF_STACK_NAME} '.StackSummaries[] | select(.StackName == $stackname) | .StackStatus'\n```\n\n```text:\u7d50\u679c:\nCREATE_COMPLETE\n```\n\nStackStatus\u304c\u2019CREATE_COMPLETE\u2019\u306b\u306a\u3063\u3066\u3044\u308c\u3070\u4f5c\u6210\u306f\u5b8c\u4e86\u3067\u3059\u3002 (30\u79d2\u304b\u30891\u5206\u7a0b\u5ea6\u304b\u304b\u308b\u3088\u3046\u3067\u3059\u3002)\n\n\u305d\u308c\u4ee5\u5916\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3067Failed\u306e\u6587\u5b57\u304c\u51fa\u3066\u3044\u308b\u524d\u5f8c\u3092\u898b\u3066\u539f\u56e0\u3092\u8abf\u3079\u307e\u3059\u3002\n\n\n```bash:\u30b3\u30de\u30f3\u30c9:\n$ aws cloudformation describe-stack-events --stack-name ${CF_STACK_NAME}\n```\n\n2.3. \u30b9\u30bf\u30c3\u30af\u306e\u5185\u5bb9\u78ba\u8a8d\n------------------------\n\n\u4f5c\u6210\u3055\u308c\u305f\u30b9\u30bf\u30c3\u30af\u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\n```bash:\u30b3\u30de\u30f3\u30c9:\n$ aws cloudformation get-template --stack-name ${CF_STACK_NAME}\n```\n\n```json:\u7d50\u679c:\n{\n    \"TemplateBody\": {\n        \"AWSTemplateFormatVersion\": \"2010-09-09\", \n        \"Description\": \"website bucket (www.example.com)\", \n        \"Resources\": {\n            \"WebBucket\": {\n                \"Type\": \"AWS::S3::Bucket\", \n                \"Properties\": {\n                    \"BucketName\": \"www.example.com\"\n                }\n            }, \n            \"LogBucket\": {\n                \"Type\": \"AWS::S3::Bucket\", \n                \"Properties\": {\n                    \"BucketName\": \"www.example.com-log\"\n                }\n            }\n        }\n    }\n}\n```\n\n3. \u30d0\u30b1\u30c3\u30c8\u78ba\u8a8d\n================\n\n\u30b3\u30f3\u30c6\u30f3\u30c4\u30d0\u30b1\u30c3\u30c8\u3068\u30ed\u30b0\u30d0\u30b1\u30c3\u30c8\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\n$ aws s3 ls | grep ${S3_BUCKET_NAME}\n```\n\n```text:\u30b3\u30de\u30f3\u30c9:\n  2014-11-10 13:05:20 www.example.com\n  2014-11-10 13:05:16 www.example.com-log\n```\n\n\n4. \u30b3\u30df\u30c3\u30c8\n============\n\n\u554f\u984c\u7121\u304f\u30d0\u30b1\u30c3\u30c9\u306e\u4f5c\u6210\u304c\u5b8c\u4e86\u3057\u3066\u3044\u308c\u3070\u3001\u3053\u3053\u3067\u4e00\u65e6\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30b3\u30df\u30c3\u30c8\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n\n```bash:\u30b3\u30de\u30f3\u30c9:\n$ hg commit -m \"created website bucket (${S3_BUCKET_NAME}).\"\n```\n\n\n\u5b8c\u4e86\n======\n\nWeb\u30b5\u30a4\u30c8\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u306b\u5fc5\u8981\u306a\u30d0\u30b1\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u305f\u306e\u3067\u3001\u5f15\u304d\u7d9a\u304dWeb\u516c\u958b\u306b\u5fc5\u8981\u306a\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u304d\u307e\u3059\u3002 (http://qiita.com/tcsh/items/3e72c7bd32d4872b972a)\n", "tags": ["AWS", "aws-cli", "CloudFormation", "S3"]}