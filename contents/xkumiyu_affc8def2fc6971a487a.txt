{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u4eca\u56de\u3001\u7528\u3044\u305f/\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u74b0\u5883\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\nOS: Ubuntu 14.04\nRuby: 2.2.3\nRedmine: 3.0.4\nIaaS: azure vm standard a0\n\n\u6e96\u5099\n\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3068\u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ sudo apt-get update\n$ sudo apt-get upgrade\n$ sudo apt-get install git vim build-essential libssl-dev libreadline-dev\n\n\nMySQL\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo apt-get install mysql-server\n$ sudo apt-get install libmysql++-dev\n\nmysql-server\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u3001root\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u304d\u304b\u308c\u308b\u306e\u3067\u3001\u5165\u529b\u3057\u307e\u3059\u3002\n\nImageMagick\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo apt-get install imagemagick libmagickcore-dev libmagick++-dev  libmagickwand-dev\n\n\nApache\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo apt-get install apache2\n\n\nRuby\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\npassenger\u3068\u306e\u9023\u643a\u306e\u95a2\u4fc2\u3067\u3001\u30e6\u30fc\u30b6\u74b0\u5883\u3067\u306f\u306a\u304f\u30b7\u30b9\u30c6\u30e0\u30ef\u30a4\u30c9\u306brbenv\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nrbenv\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3064\u3044\u3066\u306f\u3001\u57fa\u672c\u7684\u306b\u3053\u3053\u3092\u53c2\u8003\u306b\u8a2d\u5b9a\u3057\u307e\u3057\u305f\u3002\nsudoers \u306e\u8a2d\u5b9a\n$ sudo visudo -f /etc/sudoers.d/00_base\n\n\u81ea\u52d5\u7684\u306b\u30a8\u30c7\u30a3\u30bf\u304c\u305f\u3061\u304c\u308b\u306e\u3067\u3001\u4ee5\u4e0b\u3092\u8a18\u5165\u3057\u307e\u3059\u3002\nDefaults !secure_path\nDefaults env_keep += \"PATH RBENV_ROOT\"\n\n$ export RBENV_ROOT=/usr/local/rbenv\n$ export PATH=${RBENV_ROOT}/bin:${PATH}\n\nrbenv\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo git clone git://github.com/sstephenson/rbenv.git ${RBENV_ROOT}\n$ sudo git clone git://github.com/sstephenson/ruby-build.git ${RBENV_ROOT}/plugins/ruby-build\n\n.profile \u306e\u672b\u5c3e\u306b\u4ee5\u4e0b\u3092\u8ffd\u8a18\nbash -c 'cat <<\\__EOT__ >> ~/.profile\nexport RBENV_ROOT=\"/usr/local/rbenv\"\nexport PATH=\"${RBENV_ROOT}/bin:${PATH}\"\neval \"$(rbenv init -)\"\n__EOT__'\n\n\u30b7\u30a7\u30eb\u306e\u518d\u8d77\u52d5\n$ exec ${SHELL} -l\n\nruby 2.2.3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo rbenv install 2.2.3\n$ sudo rbenv rehash\n$ sudo rbenv global 2.2.3\n\n\nRedmine\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u82e5\u5e72\u8a18\u4e8b\u304c\u53e4\u3044\u3088\u3046\u3067\u3059\u304c\u3001\u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u624b\u9806\u3092\u53c2\u8003\u306b\u9032\u3081\u307e\u3059\u3002\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u53d6\u5f97\n\u516c\u5f0f\u30b5\u30a4\u30c8\u304b\u3089\u30ea\u30bd\u30fc\u30b9\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5165\u624b\u3057\u3001/var/www\u914d\u4e0b\u306b\u5c55\u958b\u3057\u307e\u3059\u3002\n$ wget http://www.redmine.org/releases/redmine-3.0.4.tar.gz\n$ sudo tar zxvf redmine-3.0.4.tar.gz -C /var/www\n\n$ export RAILS_DIR=/var/www/redmine-3.0.4\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210/\u8a2d\u5b9a\n$ mysql -u root -p\nmysql > create database redmine character set utf8;\nmysql > create user 'redmine'@'localhost' identified by 'password';\nmysql > grant all privileges on redmine.* to 'redmine'@'localhost';\n\n$ sudo cp ${RAILS_DIR}/config/database.yml.example ${RAILS_DIR}/config/database.yml\n$ sudo vim ${RAILS_DIR}/config/database.yml\n\nusername\u3068password\u3092\u5909\u66f4\n\n${RAILS_DIR}/config/database.yml\nproduction:\n  adapter: mysql2\n  database: redmine\n  host: localhost\n  username: redmine\n  password: password\n\n\n\nbundle\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo gem install bundler\n$ cd ${RAILS_DIR}\n$ bundle install --without development test\n\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u79d8\u5bc6\u9375\u3092\u751f\u6210\n$ rake generate_secret_token\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4e0a\u306b\u30c6\u30fc\u30d6\u30eb\u3068\u30c7\u30d5\u30a9\u30eb\u30c8\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n$ RAILS_ENV=production rake db:migrate\n$ RAILS_ENV=production rake redmine:load_default_data\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u30c7\u30fc\u30bf\u4f5c\u6210\u6642\u306b\u3001\u8a00\u8a9e\u3092\u805e\u304b\u308c\u308b\u306e\u3067\u3001ja\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u8a2d\u5b9a\nsudo chown -R www-data:www-data files log tmp public/plugin_assets\nsudo chmod -R 755 files log tmp public/plugin_assets\n\n\nWEBrick\u306b\u3088\u308bweb\u30b5\u30fc\u30d0\u8d77\u52d5\n\u4eca\u56de\u306fAzure\u306eVM\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\u4e8b\u524d\u306b\u30dd\u30fc\u30c8\u3092\u958b\u3051\u3066\u304a\u304d\u307e\u3059\u3002\nAzure\u3067\u306eRails\u306e\u52d5\u304b\u3057\u65b9\u306f\u3001\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u8a73\u3057\u304f\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\n$ sudo ruby bin/rails server webrick -e production -b 0.0.0.0 -p 3000\n\nhttp://redmine20150918.cloudapp.net/ \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001Redmine\u306e\u753b\u9762\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\u300credmine20150918\u300d\u306fVM\u306e\u30db\u30b9\u30c8\u540d\uff08DNS\u540d\uff09\u3067\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u306f\u3001\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\nlogin: admin\npassword: admin\n\n\nPassenger\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ngem\u3067passenger\u3092\u30a4\u30f3\u30b9\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ sudo gem install passenger\n\npassenger-install-apache2-module\u30b3\u30de\u30f3\u30c9\u3067apache2\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059\u3002\n$ sudo passenger-install-apache2-module\n\n\u5bfe\u8a71\u5f62\u5f0f\u3067\u9032\u3093\u3067\u3044\u304d\u307e\u3059\u3002\n\u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30c1\u30a7\u30c3\u30af\u304c\u306f\u3057\u308a\u3001\u8db3\u308a\u306a\u3044\u3082\u306e\u304c\u3042\u308b\u3068\u30a4\u30f3\u30b9\u30fc\u30eb\u3057\u308d\u3068\u8a00\u308f\u308c\u307e\u3059\u3002\u3054\u4e01\u5be7\u306b\u30a4\u30f3\u30b9\u30fc\u30eb\u30b3\u30de\u30f3\u30c9\u3082\u6559\u3048\u3066\u304f\u308c\u308b\u306e\u3067\u3001\u8a00\u308f\u308c\u305f\u3068\u304a\u308a\u306b\u30a4\u30f3\u30b9\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ sudo apt-get install libcurl4-openssl-dev apache2-threaded-dev libapr1-dev libaprutil1-dev\n\n\u518d\u5ea6\u3001passenger-install-apache2-module\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ sudo passenger-install-apache2-module\n\n\u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30c1\u30a7\u30c3\u30af\u306fOK\u3067\u3057\u305f\u304c\u3001\u30e1\u30e2\u30ea\u304c\u5c11\u306a\u3044\u3051\u3069\u5927\u4e08\u592b\uff1f\u3063\u3066\u8a00\u308f\u308c\u3001\u3053\u306e\u307e\u307e\u9032\u3081\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3051\u3069\u3001\u4eee\u60f3\u30e1\u30e2\u30ea\u3092\u3064\u304f\u3063\u305f\u307b\u3046\u304c\u3044\u3044\u3044\u3093\u3058\u3083\u306a\u3044\uff1f\u3068\u30a2\u30c9\u30d0\u30a4\u30b9\u3092\u3044\u305f\u3060\u3044\u305f\u306e\u3067\u3001\u4eee\u60f3\u30e1\u30e2\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u3053\u308c\u3082\u6307\u793a\u3055\u308c\u305f\u30b3\u30de\u30f3\u30c9\u901a\u308a\u306b\u4eee\u60f3\u30e1\u30e2\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ sudo dd if=/dev/zero of=/swap bs=1M count=1024\n$ sudo mkswap /swap\n$ sudo swapon /swap\n\n\u3061\u306a\u307f\u306b\u3001\u4eca\u56de\u306f\u5192\u982d\u3067\u66f8\u3044\u305f\u3088\u3046\u306bAzure\u306eA0\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\u30e1\u30e2\u30ea\u306f0.75GB\u306a\u306e\u3067\u30012GB\u304f\u3089\u3044\u306f\u3042\u3063\u305f\u307b\u3046\u304c\u3044\u3044\u3044\u3088\u3046\u3067\u3059\u3002\n\u518d\u3073\u3001passenger-install-apache2-module\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u30c1\u30a7\u30c3\u30af\u304c\u5168\u90e8\u554f\u984c\u306a\u3051\u308c\u3070\u3001\u30a4\u30f3\u30b9\u30fc\u30eb\u304c\u306f\u3058\u307e\u308a\u307e\u3059\u3002\u7d50\u69cb\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\u3002\n\u30ed\u30b0\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n$ sudo passenger-install-apache2-module\nWelcome to the Phusion Passenger Apache 2 module installer, v5.0.18.\n\nThis installer will guide you through the entire installation process. It\nshouldn't take more than 3 minutes in total.\n\nHere's what you can expect from the installation process:\n\n 1. The Apache 2 module will be installed for you.\n 2. You'll learn how to configure Apache.\n 3. You'll learn how to deploy a Ruby on Rails application.\n\nDon't worry if anything goes wrong. This installer will advise you on how to\nsolve any problems.\n\nPress Enter to continue, or Ctrl-C to abort.\n\n\n--------------------------------------------\n\nWhich languages are you interested in?\n\nUse <space> to select.\nIf the menu doesn't display correctly, press '!'\n\n \u2023 \u2b22  Ruby\n   \u2b22  Python\n   \u2b21  Node.js\n   \u2b21  Meteor\n\n--------------------------------------------\n\nChecking for required software...\n\n * Checking for C compiler...\n      Found: yes\n      Location: /usr/bin/cc\n * Checking for C++ compiler...\n      Found: yes\n      Location: /usr/bin/c++\n * Checking for Curl development headers with SSL support...\n      Found: yes\n      curl-config location: /usr/bin/curl-config\n      Header location: /usr/include/curl/curl.h\n      Version: libcurl 7.35.0\n      Usable: yes\n      Supports SSL: yes\n * Checking for OpenSSL development headers...\n      Found: yes\n      Location: /usr/include/openssl/ssl.h\n * Checking for Zlib development headers...\n      Found: yes\n      Location: /usr/include/zlib.h\n * Checking for Apache 2...\n      Found: yes\n      Location of httpd: /usr/sbin/apache2\n      Apache version: 2.4.7\n * Checking for Apache 2 development headers...\n      Found: yes\n      Location of apxs2: /usr/bin/apxs2\n * Checking for Rake (associated with /usr/local/rbenv/versions/2.2.3/bin/ruby)...\n      Found: yes\n      Location: /usr/local/rbenv/versions/2.2.3/bin/ruby /usr/local/rbenv/versions/2.2.3/bin/rake\n * Checking for OpenSSL support for Ruby...\n      Found: yes\n * Checking for RubyGems...\n      Found: yes\n * Checking for Ruby development headers...\n      Found: yes\n      Location: /usr/local/rbenv/versions/2.2.3/include/ruby-2.2.0/ruby.h\n * Checking for rack...\n      Found: yes\n * Checking for Apache Portable Runtime (APR) development headers...\n      Found: yes\n      Location: /usr/bin/apr-1-config\n      Version: 1.5.1\n * Checking for Apache Portable Runtime Utility (APU) development headers...\n      Found: yes\n      Location: /usr/bin/apu-1-config\n      Version: 1.5.3\n\n--------------------------------------------\n\nChecking whether there are multiple Apache installations...\nOnly a single installation detected. This is good.\n\n--------------------------------------------\nCompiling and installing Apache 2 module...\n\n\uff08\u7565\uff09\n\n--------------------------------------------\nAlmost there!\n\nPlease edit your Apache configuration file, and add these lines:\n\n   LoadModule passenger_module /usr/local/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/passenger-5.0.18/buildout/apache2/mod_passenger.so\n   <IfModule mod_passenger.c>\n     PassengerRoot /usr/local/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/passenger-5.0.18\n     PassengerDefaultRuby /usr/local/rbenv/versions/2.2.3/bin/ruby\n   </IfModule>\n\nAfter you restart Apache, you are ready to deploy any number of web\napplications on Apache, with a minimum amount of configuration!\n\nPress ENTER when you are done editing.\n\n--------------------------------------------\n\nValidating installation...\n\n * Checking whether this Passenger install is in PATH... \u2713\n * Checking whether there are no other Passenger installations... (!)\n\n   You are currently validating against Phusion Passenger 5.0.18, located in:\n\n     /usr/local/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/passenger-5.0.18/bin/passenger\n\n   Besides this Passenger installation, the following other\n   Passenger installations have also been detected:\n\n     /usr/local/rbenv/shims/passenger\n\n   Please uninstall these other Passenger installations to avoid\n   confusion or conflicts.\n\n * Checking whether Apache is installed... \u2713\n * Checking whether the Passenger module is correctly configured in Apache... (!)\n\n   You did not specify 'LoadModule passenger_module' in any of your Apache\n   configuration files. Please paste the configuration snippet that this\n   installer printed earlier, into one of your Apache configuration files, such\n   as /etc/apache2/apache2.conf.\n\n\nDetected 0 error(s), 2 warning(s).\nPress ENTER to continue.\n\n\n--------------------------------------------\n\nDeploying a web application\n\nTo learn how to deploy a web app on Passenger, please follow the deployment\nguide:\n\n  https://www.phusionpassenger.com/library/deploy/apache/deploy/\n\nEnjoy Phusion Passenger, a product of Phusion (www.phusion.nl) :-)\nhttps://www.phusionpassenger.com\n\nPhusion Passenger is a registered trademark of Hongli Lai & Ninh Bui.\n\n\u306a\u3093\u304b\u8b66\u544a\u304c\u51fa\u3066\u308b\u6c17\u304c\u3057\u307e\u3059\u304c\u3001\u30a4\u30f3\u30b9\u30fc\u30eb\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\u6700\u5f8c\u306e\u65b9\u306b\u3042\u308b\u8a2d\u5b9a\u3092apache\u306econf\u30d5\u30a1\u30a4\u30eb\u306b\u8a18\u8f09\u3057\u307e\u3059\u3002\n--snippet\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3042\u3068\u3067\u3082\u307f\u308c\u307e\u3059\u3002\n$ passenger-install-apache2-module --snippet\n\n\napache\u306e\u8a2d\u5b9a\napache\u306e\u8a2d\u5b9a\u306f\u3001/etc/apache2/apache2.conf\u306b\u8a18\u8f09\u3057\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u3051\u3066\u7d30\u304b\u304f\u7ba1\u7406\u3059\u308b\u3089\u3057\u3044\u306e\u3067\u3001/etc/apache2/sites-available\u914d\u4e0b\u306b\u65b0\u3057\u304f\u30d5\u30a1\u30a4\u30eb\u3092\u3064\u304f\u308a\u307e\u3059\u3002\n\npassenger.conf\n<VirtualHost *:80>\n    ServerName redmine20150918.cloudapp.net\n    DocumentRoot /var/www/redmine-3.0.4/public\n</VirtualHost>\n\nLoadModule passenger_module /usr/local/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/passenger-5.0.18/buildout/apache2/mod_passenger.so\n<IfModule mod_passenger.c>\n  PassengerRoot /usr/local/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/passenger-5.0.18\n  PassengerDefaultRuby /usr/local/rbenv/versions/2.2.3/bin/ruby\n</IfModule>\n\n\n\u4eca\u52d5\u3044\u3066\u3044\u308b000-default.conf\u3092\u3068\u3081\u3066\u3001passenger.conf\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002\u5bfe\u8a71\u5f62\u5f0f\u306a\u306e\u3067\u3001\u305d\u308c\u305e\u308c\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n$ sudo a2dissite # 000-default\u3092\u5165\u529b\n$ sudo a2ensite # passenger\u3092\u5165\u529b\n\nsites-enabled/\u306b\u30ea\u30f3\u30af\u304c\u306f\u3089\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001apache\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n$ sudo service apache2 restart\n\nWEBrick\u306e\u3068\u304d\u306b\u30013000\u756a\u306e\u30dd\u30fc\u30c8\u3092\u3042\u3051\u3066\u3044\u305f\u3089\u300180\u756a\u306b\u5909\u66f4\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u3046\u307e\u304f\u884c\u3051\u308c\u3070\u3001http://redmine20150918.cloudapp.net/ \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n\n# \u306f\u3058\u3081\u306b\n\n\u4eca\u56de\u3001\u7528\u3044\u305f/\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u74b0\u5883\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n\nOS: Ubuntu 14.04\nRuby: 2.2.3\nRedmine: 3.0.4\n\nIaaS: azure vm standard a0\n\n\n# \u6e96\u5099\n\n\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3068\u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n$ sudo apt-get update\n$ sudo apt-get upgrade\n$ sudo apt-get install git vim build-essential libssl-dev libreadline-dev\n```\n\n## MySQL\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ sudo apt-get install mysql-server\n$ sudo apt-get install libmysql++-dev\n```\nmysql-server\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u3001root\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u304d\u304b\u308c\u308b\u306e\u3067\u3001\u5165\u529b\u3057\u307e\u3059\u3002\n\n## ImageMagick\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ sudo apt-get install imagemagick libmagickcore-dev libmagick++-dev  libmagickwand-dev\n```\n\n## Apache\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ sudo apt-get install apache2\n```\n\n# Ruby\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\npassenger\u3068\u306e\u9023\u643a\u306e\u95a2\u4fc2\u3067\u3001\u30e6\u30fc\u30b6\u74b0\u5883\u3067\u306f\u306a\u304f\u30b7\u30b9\u30c6\u30e0\u30ef\u30a4\u30c9\u306brbenv\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nrbenv\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3064\u3044\u3066\u306f\u3001\u57fa\u672c\u7684\u306b[\u3053\u3053](http://office.tsukuba-bunko.org/ppoi/entry/systemwide-rbenv)\u3092\u53c2\u8003\u306b\u8a2d\u5b9a\u3057\u307e\u3057\u305f\u3002\n\nsudoers \u306e\u8a2d\u5b9a\n\n```\n$ sudo visudo -f /etc/sudoers.d/00_base\n```\n\n\u81ea\u52d5\u7684\u306b\u30a8\u30c7\u30a3\u30bf\u304c\u305f\u3061\u304c\u308b\u306e\u3067\u3001\u4ee5\u4e0b\u3092\u8a18\u5165\u3057\u307e\u3059\u3002\n\n```\nDefaults !secure_path\nDefaults env_keep += \"PATH RBENV_ROOT\"\n```\n\n```\n$ export RBENV_ROOT=/usr/local/rbenv\n$ export PATH=${RBENV_ROOT}/bin:${PATH}\n```\n\nrbenv\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ sudo git clone git://github.com/sstephenson/rbenv.git ${RBENV_ROOT}\n$ sudo git clone git://github.com/sstephenson/ruby-build.git ${RBENV_ROOT}/plugins/ruby-build\n```\n\n.profile \u306e\u672b\u5c3e\u306b\u4ee5\u4e0b\u3092\u8ffd\u8a18\n\n```\nbash -c 'cat <<\\__EOT__ >> ~/.profile\nexport RBENV_ROOT=\"/usr/local/rbenv\"\nexport PATH=\"${RBENV_ROOT}/bin:${PATH}\"\neval \"$(rbenv init -)\"\n__EOT__'\n```\n\n\u30b7\u30a7\u30eb\u306e\u518d\u8d77\u52d5\n\n```\n$ exec ${SHELL} -l\n```\n\nruby 2.2.3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ sudo rbenv install 2.2.3\n$ sudo rbenv rehash\n$ sudo rbenv global 2.2.3\n```\n\n# Redmine\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u82e5\u5e72\u8a18\u4e8b\u304c\u53e4\u3044\u3088\u3046\u3067\u3059\u304c\u3001[\u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u624b\u9806](http://redmine.jp/guide/RedmineInstall/)\u3092\u53c2\u8003\u306b\u9032\u3081\u307e\u3059\u3002\n\n## \u30d1\u30c3\u30b1\u30fc\u30b8\u53d6\u5f97\n\n\u516c\u5f0f\u30b5\u30a4\u30c8\u304b\u3089\u30ea\u30bd\u30fc\u30b9\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5165\u624b\u3057\u3001/var/www\u914d\u4e0b\u306b\u5c55\u958b\u3057\u307e\u3059\u3002\n\n```\n$ wget http://www.redmine.org/releases/redmine-3.0.4.tar.gz\n$ sudo tar zxvf redmine-3.0.4.tar.gz -C /var/www\n```\n\n```\n$ export RAILS_DIR=/var/www/redmine-3.0.4\n```\n\n## \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210/\u8a2d\u5b9a\n\n```\n$ mysql -u root -p\nmysql > create database redmine character set utf8;\nmysql > create user 'redmine'@'localhost' identified by 'password';\nmysql > grant all privileges on redmine.* to 'redmine'@'localhost';\n```\n\n```\n$ sudo cp ${RAILS_DIR}/config/database.yml.example ${RAILS_DIR}/config/database.yml\n$ sudo vim ${RAILS_DIR}/config/database.yml\n```\n\nusername\u3068password\u3092\u5909\u66f4\n\n``` ${RAILS_DIR}/config/database.yml\nproduction:\n  adapter: mysql2\n  database: redmine\n  host: localhost\n  username: redmine\n  password: password\n```\n\n## bundle\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ sudo gem install bundler\n$ cd ${RAILS_DIR}\n$ bundle install --without development test\n```\n\n## \u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u79d8\u5bc6\u9375\u3092\u751f\u6210\n\n```\n$ rake generate_secret_token\n```\n\n## \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4e0a\u306b\u30c6\u30fc\u30d6\u30eb\u3068\u30c7\u30d5\u30a9\u30eb\u30c8\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n\n```\n$ RAILS_ENV=production rake db:migrate\n$ RAILS_ENV=production rake redmine:load_default_data\n```\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u30c7\u30fc\u30bf\u4f5c\u6210\u6642\u306b\u3001\u8a00\u8a9e\u3092\u805e\u304b\u308c\u308b\u306e\u3067\u3001ja\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n## \u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u8a2d\u5b9a\n\n```\nsudo chown -R www-data:www-data files log tmp public/plugin_assets\nsudo chmod -R 755 files log tmp public/plugin_assets\n```\n\n## WEBrick\u306b\u3088\u308bweb\u30b5\u30fc\u30d0\u8d77\u52d5\n\n\u4eca\u56de\u306fAzure\u306eVM\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\u4e8b\u524d\u306b\u30dd\u30fc\u30c8\u3092\u958b\u3051\u3066\u304a\u304d\u307e\u3059\u3002\nAzure\u3067\u306eRails\u306e\u52d5\u304b\u3057\u65b9\u306f\u3001[\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://azure.microsoft.com/ja-jp/documentation/articles/virtual-machines-ruby-rails-web-app-linux/)\u306b\u8a73\u3057\u304f\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\n$ sudo ruby bin/rails server webrick -e production -b 0.0.0.0 -p 3000\n```\n\nhttp://redmine20150918.cloudapp.net/ \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001Redmine\u306e\u753b\u9762\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\u300credmine20150918\u300d\u306fVM\u306e\u30db\u30b9\u30c8\u540d\uff08DNS\u540d\uff09\u3067\u3059\u3002\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u306f\u3001\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\nlogin: admin\npassword: admin\n```\n\n# Passenger\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\ngem\u3067passenger\u3092\u30a4\u30f3\u30b9\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n$ sudo gem install passenger\n```\n\npassenger-install-apache2-module\u30b3\u30de\u30f3\u30c9\u3067apache2\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059\u3002\n\n```\n$ sudo passenger-install-apache2-module\n```\n\n\u5bfe\u8a71\u5f62\u5f0f\u3067\u9032\u3093\u3067\u3044\u304d\u307e\u3059\u3002\n\u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30c1\u30a7\u30c3\u30af\u304c\u306f\u3057\u308a\u3001\u8db3\u308a\u306a\u3044\u3082\u306e\u304c\u3042\u308b\u3068\u30a4\u30f3\u30b9\u30fc\u30eb\u3057\u308d\u3068\u8a00\u308f\u308c\u307e\u3059\u3002\u3054\u4e01\u5be7\u306b\u30a4\u30f3\u30b9\u30fc\u30eb\u30b3\u30de\u30f3\u30c9\u3082\u6559\u3048\u3066\u304f\u308c\u308b\u306e\u3067\u3001\u8a00\u308f\u308c\u305f\u3068\u304a\u308a\u306b\u30a4\u30f3\u30b9\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n$ sudo apt-get install libcurl4-openssl-dev apache2-threaded-dev libapr1-dev libaprutil1-dev\n```\n\n\u518d\u5ea6\u3001passenger-install-apache2-module\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n$ sudo passenger-install-apache2-module\n```\n\n\u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30c1\u30a7\u30c3\u30af\u306fOK\u3067\u3057\u305f\u304c\u3001\u30e1\u30e2\u30ea\u304c\u5c11\u306a\u3044\u3051\u3069\u5927\u4e08\u592b\uff1f\u3063\u3066\u8a00\u308f\u308c\u3001\u3053\u306e\u307e\u307e\u9032\u3081\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3051\u3069\u3001\u4eee\u60f3\u30e1\u30e2\u30ea\u3092\u3064\u304f\u3063\u305f\u307b\u3046\u304c\u3044\u3044\u3044\u3093\u3058\u3083\u306a\u3044\uff1f\u3068\u30a2\u30c9\u30d0\u30a4\u30b9\u3092\u3044\u305f\u3060\u3044\u305f\u306e\u3067\u3001\u4eee\u60f3\u30e1\u30e2\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u3053\u308c\u3082\u6307\u793a\u3055\u308c\u305f\u30b3\u30de\u30f3\u30c9\u901a\u308a\u306b\u4eee\u60f3\u30e1\u30e2\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\n```\n$ sudo dd if=/dev/zero of=/swap bs=1M count=1024\n$ sudo mkswap /swap\n$ sudo swapon /swap\n```\n\n\u3061\u306a\u307f\u306b\u3001\u4eca\u56de\u306f\u5192\u982d\u3067\u66f8\u3044\u305f\u3088\u3046\u306bAzure\u306eA0\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\u30e1\u30e2\u30ea\u306f0.75GB\u306a\u306e\u3067\u30012GB\u304f\u3089\u3044\u306f\u3042\u3063\u305f\u307b\u3046\u304c\u3044\u3044\u3044\u3088\u3046\u3067\u3059\u3002\n\n\u518d\u3073\u3001passenger-install-apache2-module\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u30c1\u30a7\u30c3\u30af\u304c\u5168\u90e8\u554f\u984c\u306a\u3051\u308c\u3070\u3001\u30a4\u30f3\u30b9\u30fc\u30eb\u304c\u306f\u3058\u307e\u308a\u307e\u3059\u3002\u7d50\u69cb\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\u3002\n\n\u30ed\u30b0\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n\n```\n$ sudo passenger-install-apache2-module\nWelcome to the Phusion Passenger Apache 2 module installer, v5.0.18.\n\nThis installer will guide you through the entire installation process. It\nshouldn't take more than 3 minutes in total.\n\nHere's what you can expect from the installation process:\n\n 1. The Apache 2 module will be installed for you.\n 2. You'll learn how to configure Apache.\n 3. You'll learn how to deploy a Ruby on Rails application.\n\nDon't worry if anything goes wrong. This installer will advise you on how to\nsolve any problems.\n\nPress Enter to continue, or Ctrl-C to abort.\n\n\n--------------------------------------------\n\nWhich languages are you interested in?\n\nUse <space> to select.\nIf the menu doesn't display correctly, press '!'\n\n \u2023 \u2b22  Ruby\n   \u2b22  Python\n   \u2b21  Node.js\n   \u2b21  Meteor\n\n--------------------------------------------\n\nChecking for required software...\n\n * Checking for C compiler...\n      Found: yes\n      Location: /usr/bin/cc\n * Checking for C++ compiler...\n      Found: yes\n      Location: /usr/bin/c++\n * Checking for Curl development headers with SSL support...\n      Found: yes\n      curl-config location: /usr/bin/curl-config\n      Header location: /usr/include/curl/curl.h\n      Version: libcurl 7.35.0\n      Usable: yes\n      Supports SSL: yes\n * Checking for OpenSSL development headers...\n      Found: yes\n      Location: /usr/include/openssl/ssl.h\n * Checking for Zlib development headers...\n      Found: yes\n      Location: /usr/include/zlib.h\n * Checking for Apache 2...\n      Found: yes\n      Location of httpd: /usr/sbin/apache2\n      Apache version: 2.4.7\n * Checking for Apache 2 development headers...\n      Found: yes\n      Location of apxs2: /usr/bin/apxs2\n * Checking for Rake (associated with /usr/local/rbenv/versions/2.2.3/bin/ruby)...\n      Found: yes\n      Location: /usr/local/rbenv/versions/2.2.3/bin/ruby /usr/local/rbenv/versions/2.2.3/bin/rake\n * Checking for OpenSSL support for Ruby...\n      Found: yes\n * Checking for RubyGems...\n      Found: yes\n * Checking for Ruby development headers...\n      Found: yes\n      Location: /usr/local/rbenv/versions/2.2.3/include/ruby-2.2.0/ruby.h\n * Checking for rack...\n      Found: yes\n * Checking for Apache Portable Runtime (APR) development headers...\n      Found: yes\n      Location: /usr/bin/apr-1-config\n      Version: 1.5.1\n * Checking for Apache Portable Runtime Utility (APU) development headers...\n      Found: yes\n      Location: /usr/bin/apu-1-config\n      Version: 1.5.3\n\n--------------------------------------------\n\nChecking whether there are multiple Apache installations...\nOnly a single installation detected. This is good.\n\n--------------------------------------------\nCompiling and installing Apache 2 module...\n\n\uff08\u7565\uff09\n\n--------------------------------------------\nAlmost there!\n\nPlease edit your Apache configuration file, and add these lines:\n\n   LoadModule passenger_module /usr/local/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/passenger-5.0.18/buildout/apache2/mod_passenger.so\n   <IfModule mod_passenger.c>\n     PassengerRoot /usr/local/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/passenger-5.0.18\n     PassengerDefaultRuby /usr/local/rbenv/versions/2.2.3/bin/ruby\n   </IfModule>\n\nAfter you restart Apache, you are ready to deploy any number of web\napplications on Apache, with a minimum amount of configuration!\n\nPress ENTER when you are done editing.\n\n--------------------------------------------\n\nValidating installation...\n\n * Checking whether this Passenger install is in PATH... \u2713\n * Checking whether there are no other Passenger installations... (!)\n\n   You are currently validating against Phusion Passenger 5.0.18, located in:\n\n     /usr/local/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/passenger-5.0.18/bin/passenger\n\n   Besides this Passenger installation, the following other\n   Passenger installations have also been detected:\n\n     /usr/local/rbenv/shims/passenger\n\n   Please uninstall these other Passenger installations to avoid\n   confusion or conflicts.\n\n * Checking whether Apache is installed... \u2713\n * Checking whether the Passenger module is correctly configured in Apache... (!)\n\n   You did not specify 'LoadModule passenger_module' in any of your Apache\n   configuration files. Please paste the configuration snippet that this\n   installer printed earlier, into one of your Apache configuration files, such\n   as /etc/apache2/apache2.conf.\n\n\nDetected 0 error(s), 2 warning(s).\nPress ENTER to continue.\n\n\n--------------------------------------------\n\nDeploying a web application\n\nTo learn how to deploy a web app on Passenger, please follow the deployment\nguide:\n\n  https://www.phusionpassenger.com/library/deploy/apache/deploy/\n\nEnjoy Phusion Passenger, a product of Phusion (www.phusion.nl) :-)\nhttps://www.phusionpassenger.com\n\nPhusion Passenger is a registered trademark of Hongli Lai & Ninh Bui.\n```\n\n\u306a\u3093\u304b\u8b66\u544a\u304c\u51fa\u3066\u308b\u6c17\u304c\u3057\u307e\u3059\u304c\u3001\u30a4\u30f3\u30b9\u30fc\u30eb\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\u6700\u5f8c\u306e\u65b9\u306b\u3042\u308b\u8a2d\u5b9a\u3092apache\u306econf\u30d5\u30a1\u30a4\u30eb\u306b\u8a18\u8f09\u3057\u307e\u3059\u3002\n--snippet\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3042\u3068\u3067\u3082\u307f\u308c\u307e\u3059\u3002\n\n```\n$ passenger-install-apache2-module --snippet\n```\n\n## apache\u306e\u8a2d\u5b9a\n\napache\u306e\u8a2d\u5b9a\u306f\u3001/etc/apache2/apache2.conf\u306b\u8a18\u8f09\u3057\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u3051\u3066\u7d30\u304b\u304f\u7ba1\u7406\u3059\u308b\u3089\u3057\u3044\u306e\u3067\u3001/etc/apache2/sites-available\u914d\u4e0b\u306b\u65b0\u3057\u304f\u30d5\u30a1\u30a4\u30eb\u3092\u3064\u304f\u308a\u307e\u3059\u3002\n \n\n``` passenger.conf\n<VirtualHost *:80>\n\tServerName redmine20150918.cloudapp.net\n\tDocumentRoot /var/www/redmine-3.0.4/public\n</VirtualHost>\n\nLoadModule passenger_module /usr/local/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/passenger-5.0.18/buildout/apache2/mod_passenger.so\n<IfModule mod_passenger.c>\n  PassengerRoot /usr/local/rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/passenger-5.0.18\n  PassengerDefaultRuby /usr/local/rbenv/versions/2.2.3/bin/ruby\n</IfModule>\n```\n\n\u4eca\u52d5\u3044\u3066\u3044\u308b000-default.conf\u3092\u3068\u3081\u3066\u3001passenger.conf\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002\u5bfe\u8a71\u5f62\u5f0f\u306a\u306e\u3067\u3001\u305d\u308c\u305e\u308c\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\n```\n$ sudo a2dissite # 000-default\u3092\u5165\u529b\n$ sudo a2ensite # passenger\u3092\u5165\u529b\n```\n\nsites-enabled/\u306b\u30ea\u30f3\u30af\u304c\u306f\u3089\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001apache\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\n$ sudo service apache2 restart\n```\n\nWEBrick\u306e\u3068\u304d\u306b\u30013000\u756a\u306e\u30dd\u30fc\u30c8\u3092\u3042\u3051\u3066\u3044\u305f\u3089\u300180\u756a\u306b\u5909\u66f4\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u3046\u307e\u304f\u884c\u3051\u308c\u3070\u3001http://redmine20150918.cloudapp.net/ \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n\n\n", "tags": ["Azure", "Ubuntu", "Redmine", "Apache"]}