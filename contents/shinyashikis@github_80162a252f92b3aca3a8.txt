{"context": " More than 1 year has passed since last update.\n\n\u3057\u305f\u3044\u3053\u3068\nEmbulk\u3092\u5229\u7528\u3057\u3066\u5927\u91cf\u30c7\u30fc\u30bf\uff08CSV\uff09\u3092MySQL\u306b\u6295\u5165\u3059\u308b\n\n1. \u6e96\u5099\n\nQuick Start\u3092\u53c2\u8003\u306bEmbulk\u306e\u5c0e\u5165\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ curl --create-dirs -o ~/.embulk/bin/embulk -L \"http://dl.embulk.org/embulk-latest.jar\"\n$ chmod +x .embulk/bin/embulk\n$ echo 'export PATH=\"$HOME/.embulk/bin:$PATH\"' >> ~/.bashrc\n$ source ~/.bashrc\n\n\u30b5\u30f3\u30d7\u30eb\u4f5c\u6210\n$ embulk example ./sample\nCreating ./sample directory...\n  Creating ./sample/\n  Creating ./sample/csv/\n  Creating ./sample/csv/sample_01.csv.gz\n  Creating ./sample/example.yml\n\nEmbulk\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb(config.yml)\u4f5c\u6210\n$ embulk guess ./sample/example.yml -o ./sample/config.yml\n\n$ cat ./sample/config.yml \nin:\n  type: file\n  path_prefix: /home/<\u30e6\u30fc\u30b6>/sample/csv/sample_\n  decoders:\n  - {type: gzip}\n  parser:\n    charset: UTF-8\n    newline: CRLF\n    type: csv\n    delimiter: ','\n    quote: '\"'\n    escape: ''\n    trim_if_not_quoted: false\n    skip_header_lines: 1\n    allow_extra_columns: false\n    allow_optional_columns: false\n    columns:\n    - {name: id, type: long}\n    - {name: account, type: long}\n    - {name: time, type: timestamp, format: '%Y-%m-%d %H:%M:%S'}\n    - {name: purchase, type: timestamp, format: '%Y%m%d'}\n    - {name: comment, type: string}\nout: {type: stdout}\n\n\u30b5\u30f3\u30d7\u30eb\u30d7\u30ec\u30d3\u30e5\u30fc\u5b9f\u884c\n$ embulk preview ./sample/config.yml\n\n# \u2193\u306e\u3088\u3046\u306a\u30d7\u30ec\u30d3\u30e5\u30fc\u304c\u51fa\u529b\u3055\u308c\u308b\n\n+---------+--------------+-------------------------+-------------------------+----------------------------+\n| id:long | account:long |          time:timestamp |      purchase:timestamp |             comment:string |\n+---------+--------------+-------------------------+-------------------------+----------------------------+\n|       1 |       32,864 | 2015-01-27 19:23:49 UTC | 2015-01-27 00:00:00 UTC |                     embulk |\n|       2 |       14,824 | 2015-01-27 19:01:23 UTC | 2015-01-27 00:00:00 UTC |               embulk jruby |\n|       3 |       27,559 | 2015-01-28 02:20:02 UTC | 2015-01-28 00:00:00 UTC | Embulk \"csv\" parser plugin |\n|       4 |       11,270 | 2015-01-29 11:54:36 UTC | 2015-01-29 00:00:00 UTC |                       NULL |\n+---------+--------------+-------------------------+-------------------------+----------------------------+\n\n\u30b5\u30f3\u30d7\u30eb\u5b9f\u884c\n$ embulk run ./sample/config.yml\n\n# ./sample/csv/sample_01.csv.gz \u306e\u60c5\u5831\u304c\u51fa\u529b\u3055\u308c\u308b\n\n1,32864,2015-01-27 19:23:49,20150127,embulk\n2,14824,2015-01-27 19:01:23,20150127,embulk jruby\n3,27559,2015-01-28 02:20:02,20150128,Embulk \"csv\" parser plugin\n4,11270,2015-01-29 11:54:36,20150129,NULL\n\n\n2. MySQL\u3078\u30c7\u30fc\u30bf\u6295\u5165\n\nMySQL\u7528output\u30d7\u30e9\u30b0\u30a4\u30f3\nMySQL\u7528output\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ embulk gem install embulk-output-mysql\n\n\nCSV\ncsv\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n$ vim ./sample/csv/bulk_01.csv.gz\n$ cat ./sample/csv/bulk_01.csv.gz\ncol01,col02,col03,col04,col05,col06,col07,col08,col09,col10,col11,col12,col13,col14,col15,col16,col17,col18,col19,col20\n\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\"\n\n\nDB\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\n$ mysql -u root\nmysql> CREATE DATABASE bulk_db CHARACTER SET utf8;\n\n\u30b5\u30f3\u30d7\u30eb\u30e6\u30fc\u30b6\u4f5c\u6210\nmysql> GRANT ALL PRIVILEGES ON bulk_db.* TO bulk_user @localhost IDENTIFIED BY '\u30d1\u30b9\u30ef\u30fc\u30c9';\n\n\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\nmysql>\nCREATE TABLE bulk_tbl (\n  col01 varchar(20),\n  col02 varchar(20),\n  col03 varchar(20),\n  col04 varchar(20),\n  col05 varchar(20),\n  col06 varchar(20),\n  col07 varchar(20),\n  col08 varchar(20),\n  col09 varchar(20),\n  col10 varchar(20),\n  col11 varchar(20),\n  col12 varchar(20),\n  col13 varchar(20),\n  col14 varchar(20),\n  col15 varchar(20),\n  col16 varchar(20),\n  col17 varchar(20),\n  col18 varchar(20),\n  col19 varchar(20),\n  col20 varchar(20)) CHARACTER SET utf8;\n\n\nEmbulk\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\ncsv\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u5909\u66f4\npath_prefix: /home/<\u30e6\u30fc\u30b6>/sample/csv/bulk_\n\n\u4f7f\u7528\u3059\u308bCSV\u3067\u306f\u30d8\u30c3\u30c0\u306f\u306a\u3044\u306e\u3067\u4e00\u884c\u76ee\u3092\u30b9\u30ad\u30c3\u30d7\u3059\u308b\u8a18\u8ff0\u3092\u524a\u9664\n\nskip_header_lines: 1\n\n\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u3092\u5909\u66f4\ncolumns:\n- {name: col01, type: string}\n- {name: col02, type: string}\n- {name: col03, type: string}\n- {name: col04, type: string}\n- {name: col05, type: string}\n- {name: col06, type: string}\n- {name: col07, type: string}\n- {name: col08, type: string}\n- {name: col09, type: string}\n- {name: col10, type: string}\n- {name: col11, type: string}\n- {name: col12, type: string}\n- {name: col13, type: string}\n- {name: col14, type: string}\n- {name: col15, type: string}\n- {name: col16, type: string}\n- {name: col17, type: string}\n- {name: col18, type: string}\n- {name: col19, type: string}\n- {name: col20, type: string}\n\n\u3053\u3053\u3092\u53c2\u8003\u306bMySQL\u3078\u306eoutput\u306e\u5b9a\u7fa9\u3092\u884c\u3046\nout:\n  type: mysql\n  host: localhost\n  user: bulk_user\n  password: \u30d1\u30b9\u30ef\u30fc\u30c9\n  database: bulk_db\n  table: bulk_tbl\n  mode: insert\n\n\u5b8c\u6210\u5f62\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\n$ cat ./sample/config.yml\nin:\n  type: file\n  path_prefix: /home/<\u30e6\u30fc\u30b6>/sample/csv/bulk_\n  decoders:\n  - {type: gzip}\n  parser:\n    charset: UTF-8\n    newline: CRLF\n    type: csv\n    delimiter: ','\n    quote: '\"'\n    escape: ''\n    trim_if_not_quoted: false\n    allow_extra_columns: false\n    allow_optional_columns: false\n    columns:\n    - {name: col01, type: string}\n    - {name: col02, type: string}\n    - {name: col03, type: string}\n    - {name: col04, type: string}\n    - {name: col05, type: string}\n    - {name: col06, type: string}\n    - {name: col07, type: string}\n    - {name: col08, type: string}\n    - {name: col09, type: string}\n    - {name: col10, type: string}\n    - {name: col11, type: string}\n    - {name: col12, type: string}\n    - {name: col13, type: string}\n    - {name: col14, type: string}\n    - {name: col15, type: string}\n    - {name: col16, type: string}\n    - {name: col17, type: string}\n    - {name: col18, type: string}\n    - {name: col19, type: string}\n    - {name: col20, type: string}\nout:\n  type: mysql\n  host: localhost\n  user: bulk_user\n  password: \u30d1\u30b9\u30ef\u30fc\u30c9\n  database: bulk_db\n  table: bulk_tbl\n  mode: insert\n\n\n\u30c7\u30fc\u30bf\u6295\u5165\nEmbulk\u3092\u5b9f\u884c\u3057\u3001\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u3066\u307f\u308b\n$ embulk run ./sample/config.yml\n\n\u30c6\u30fc\u30d6\u30eb\u306b\u30ec\u30b3\u30fc\u30c9\u304c\u6295\u5165\u3055\u308c\u3066\u3044\u308b\u306e\u3092\u78ba\u8a8d\nmysql>\nmysql> select * from bulk_tbl;\n+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+\n| col01 | col02 | col03 | col04 | col05 | col06 | col07 | col08 | col09 | col10 | col11 | col12 | col13 | col14 | col15 | col16 | col17 | col18 | col19 | col20 |\n+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+\n| 01    | 02    | 03    | 04    | 05    | 06    | 07    | 08    | 09    | 10    | 11    | 12    | 13    | 14    | 15    | 16    | 17    | 18    | 19    | 20    |\n+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+\n1 row in set (0.00 sec)\n\n\n3. \u5927\u91cf\u30c7\u30fc\u30bf\u6295\u5165\n100\u4e07\u4ef6\u306ecsv\u309230\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n\ngenerate_csv.rb\nrequire 'zlib'\n\nclass GenerateCsv\n\n  def run\n    for i in 1..30\n      file = \"./csv/bulk_#{format('%02d',i)}.csv.gz\"\n      data = \"\"\n      for j in 1..1000000\n        row = []\n        for k in 1..20\n          row.push(\"val#{i}_#{j}_#{k}\")\n        end\n        data << row.join(\",\") + \"\\n\"\n      end\n      _generate(file, data)\n    end\n  end\n\n  private\n\n  def _generate(file, data)\n    Zlib::GzipWriter.open(file) {|gz|\n      gz.puts data\n    }\n  end\n\ninstance = GenerateCsv.new\ninstance.run\nend\n\n\nEmbulk\u3092\u5b9f\u884c\u3057\u3001\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u3066\u307f\u308b\n$ embulk run ./sample/config.yml\n\n\u30a8\u30e9\u30fc\u767a\u751f\u3002\u3002\u3002\nEmbulk\u3067MySQL\u306b\u5927\u91cf\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u3066\u307f\u308b - \u305d\u306e\uff12\norg.embulk.exec.PartialExecutionException: java.lang.RuntimeException: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure\n\nThe last packet successfully received from the server was 2,839,153 milliseconds ago.  The last packet sent successfully to the server was 2,839,151 milliseconds ago.\n    at org.embulk.exec.BulkLoader$LoaderState.buildPartialExecuteException(org/embulk/exec/BulkLoader.java:331)\n    at org.embulk.exec.BulkLoader.doRun(org/embulk/exec/BulkLoader.java:529)\n    at org.embulk.exec.BulkLoader.access$100(org/embulk/exec/BulkLoader.java:36)\n    at org.embulk.exec.BulkLoader$1.run(org/embulk/exec/BulkLoader.java:342)\n    at org.embulk.exec.BulkLoader$1.run(org/embulk/exec/BulkLoader.java:338)\n    at org.embulk.spi.Exec.doWith(org/embulk/spi/Exec.java:25)\n    at org.embulk.exec.BulkLoader.run(org/embulk/exec/BulkLoader.java:338)\n    at org.embulk.command.Runner.run(org/embulk/command/Runner.java:149)\n    at org.embulk.command.Runner.main(org/embulk/command/Runner.java:101)\n    at java.lang.reflect.Method.invoke(java/lang/reflect/Method.java:483)\n....\n\n# \u3057\u305f\u3044\u3053\u3068\n[Embulk](http://www.embulk.org/docs/)\u3092\u5229\u7528\u3057\u3066\u5927\u91cf\u30c7\u30fc\u30bf\uff08CSV\uff09\u3092MySQL\u306b\u6295\u5165\u3059\u308b\n\n# 1. \u6e96\u5099\n## [Quick Start](https://github.com/embulk/embulk#quick-start)\u3092\u53c2\u8003\u306bEmbulk\u306e\u5c0e\u5165\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ curl --create-dirs -o ~/.embulk/bin/embulk -L \"http://dl.embulk.org/embulk-latest.jar\"\n$ chmod +x .embulk/bin/embulk\n$ echo 'export PATH=\"$HOME/.embulk/bin:$PATH\"' >> ~/.bashrc\n$ source ~/.bashrc\n```\n\n\u30b5\u30f3\u30d7\u30eb\u4f5c\u6210\n\n```\n$ embulk example ./sample\nCreating ./sample directory...\n  Creating ./sample/\n  Creating ./sample/csv/\n  Creating ./sample/csv/sample_01.csv.gz\n  Creating ./sample/example.yml\n```\n\nEmbulk\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb(config.yml)\u4f5c\u6210\n\n```\n$ embulk guess ./sample/example.yml -o ./sample/config.yml\n\n$ cat ./sample/config.yml \nin:\n  type: file\n  path_prefix: /home/<\u30e6\u30fc\u30b6>/sample/csv/sample_\n  decoders:\n  - {type: gzip}\n  parser:\n    charset: UTF-8\n    newline: CRLF\n    type: csv\n    delimiter: ','\n    quote: '\"'\n    escape: ''\n    trim_if_not_quoted: false\n    skip_header_lines: 1\n    allow_extra_columns: false\n    allow_optional_columns: false\n    columns:\n    - {name: id, type: long}\n    - {name: account, type: long}\n    - {name: time, type: timestamp, format: '%Y-%m-%d %H:%M:%S'}\n    - {name: purchase, type: timestamp, format: '%Y%m%d'}\n    - {name: comment, type: string}\nout: {type: stdout}\n```\n\n\u30b5\u30f3\u30d7\u30eb\u30d7\u30ec\u30d3\u30e5\u30fc\u5b9f\u884c\n\n```\n$ embulk preview ./sample/config.yml\n\n# \u2193\u306e\u3088\u3046\u306a\u30d7\u30ec\u30d3\u30e5\u30fc\u304c\u51fa\u529b\u3055\u308c\u308b\n\n+---------+--------------+-------------------------+-------------------------+----------------------------+\n| id:long | account:long |          time:timestamp |      purchase:timestamp |             comment:string |\n+---------+--------------+-------------------------+-------------------------+----------------------------+\n|       1 |       32,864 | 2015-01-27 19:23:49 UTC | 2015-01-27 00:00:00 UTC |                     embulk |\n|       2 |       14,824 | 2015-01-27 19:01:23 UTC | 2015-01-27 00:00:00 UTC |               embulk jruby |\n|       3 |       27,559 | 2015-01-28 02:20:02 UTC | 2015-01-28 00:00:00 UTC | Embulk \"csv\" parser plugin |\n|       4 |       11,270 | 2015-01-29 11:54:36 UTC | 2015-01-29 00:00:00 UTC |                       NULL |\n+---------+--------------+-------------------------+-------------------------+----------------------------+\n```\n\n\u30b5\u30f3\u30d7\u30eb\u5b9f\u884c\n\n```\n$ embulk run ./sample/config.yml\n\n# ./sample/csv/sample_01.csv.gz \u306e\u60c5\u5831\u304c\u51fa\u529b\u3055\u308c\u308b\n\n1,32864,2015-01-27 19:23:49,20150127,embulk\n2,14824,2015-01-27 19:01:23,20150127,embulk jruby\n3,27559,2015-01-28 02:20:02,20150128,Embulk \"csv\" parser plugin\n4,11270,2015-01-29 11:54:36,20150129,NULL\n```\n\n# 2. MySQL\u3078\u30c7\u30fc\u30bf\u6295\u5165\n\n## MySQL\u7528output\u30d7\u30e9\u30b0\u30a4\u30f3\nMySQL\u7528output\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ embulk gem install embulk-output-mysql\n```\n\n## CSV\ncsv\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n\n```\n$ vim ./sample/csv/bulk_01.csv.gz\n$ cat ./sample/csv/bulk_01.csv.gz\ncol01,col02,col03,col04,col05,col06,col07,col08,col09,col10,col11,col12,col13,col14,col15,col16,col17,col18,col19,col20\n\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\"\n```\n\n## DB\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\n\n```\n$ mysql -u root\nmysql> CREATE DATABASE bulk_db CHARACTER SET utf8;\n```\n\n\u30b5\u30f3\u30d7\u30eb\u30e6\u30fc\u30b6\u4f5c\u6210\n\n```\nmysql> GRANT ALL PRIVILEGES ON bulk_db.* TO bulk_user @localhost IDENTIFIED BY '\u30d1\u30b9\u30ef\u30fc\u30c9';\n```\n\n\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\n\n```\nmysql>\nCREATE TABLE bulk_tbl (\n  col01 varchar(20),\n  col02 varchar(20),\n  col03 varchar(20),\n  col04 varchar(20),\n  col05 varchar(20),\n  col06 varchar(20),\n  col07 varchar(20),\n  col08 varchar(20),\n  col09 varchar(20),\n  col10 varchar(20),\n  col11 varchar(20),\n  col12 varchar(20),\n  col13 varchar(20),\n  col14 varchar(20),\n  col15 varchar(20),\n  col16 varchar(20),\n  col17 varchar(20),\n  col18 varchar(20),\n  col19 varchar(20),\n  col20 varchar(20)) CHARACTER SET utf8;\n```\n\n## Embulk\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\n\ncsv\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u5909\u66f4\n\n```\npath_prefix: /home/<\u30e6\u30fc\u30b6>/sample/csv/bulk_\n```\n\n\u4f7f\u7528\u3059\u308bCSV\u3067\u306f\u30d8\u30c3\u30c0\u306f\u306a\u3044\u306e\u3067\u4e00\u884c\u76ee\u3092\u30b9\u30ad\u30c3\u30d7\u3059\u308b\u8a18\u8ff0\u3092\u524a\u9664\n```\nskip_header_lines: 1\n```\n\n\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u3092\u5909\u66f4\n\n```\ncolumns:\n- {name: col01, type: string}\n- {name: col02, type: string}\n- {name: col03, type: string}\n- {name: col04, type: string}\n- {name: col05, type: string}\n- {name: col06, type: string}\n- {name: col07, type: string}\n- {name: col08, type: string}\n- {name: col09, type: string}\n- {name: col10, type: string}\n- {name: col11, type: string}\n- {name: col12, type: string}\n- {name: col13, type: string}\n- {name: col14, type: string}\n- {name: col15, type: string}\n- {name: col16, type: string}\n- {name: col17, type: string}\n- {name: col18, type: string}\n- {name: col19, type: string}\n- {name: col20, type: string}\n```\n\n[\u3053\u3053](https://github.com/embulk/embulk-output-jdbc/tree/master/embulk-output-mysql)\u3092\u53c2\u8003\u306bMySQL\u3078\u306eoutput\u306e\u5b9a\u7fa9\u3092\u884c\u3046\n\n```\nout:\n  type: mysql\n  host: localhost\n  user: bulk_user\n  password: \u30d1\u30b9\u30ef\u30fc\u30c9\n  database: bulk_db\n  table: bulk_tbl\n  mode: insert\n```\n\n\u5b8c\u6210\u5f62\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\n\n```\n$ cat ./sample/config.yml\nin:\n  type: file\n  path_prefix: /home/<\u30e6\u30fc\u30b6>/sample/csv/bulk_\n  decoders:\n  - {type: gzip}\n  parser:\n    charset: UTF-8\n    newline: CRLF\n    type: csv\n    delimiter: ','\n    quote: '\"'\n    escape: ''\n    trim_if_not_quoted: false\n    allow_extra_columns: false\n    allow_optional_columns: false\n    columns:\n    - {name: col01, type: string}\n    - {name: col02, type: string}\n    - {name: col03, type: string}\n    - {name: col04, type: string}\n    - {name: col05, type: string}\n    - {name: col06, type: string}\n    - {name: col07, type: string}\n    - {name: col08, type: string}\n    - {name: col09, type: string}\n    - {name: col10, type: string}\n    - {name: col11, type: string}\n    - {name: col12, type: string}\n    - {name: col13, type: string}\n    - {name: col14, type: string}\n    - {name: col15, type: string}\n    - {name: col16, type: string}\n    - {name: col17, type: string}\n    - {name: col18, type: string}\n    - {name: col19, type: string}\n    - {name: col20, type: string}\nout:\n  type: mysql\n  host: localhost\n  user: bulk_user\n  password: \u30d1\u30b9\u30ef\u30fc\u30c9\n  database: bulk_db\n  table: bulk_tbl\n  mode: insert\n```\n\n## \u30c7\u30fc\u30bf\u6295\u5165\n\nEmbulk\u3092\u5b9f\u884c\u3057\u3001\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u3066\u307f\u308b\n\n```\n$ embulk run ./sample/config.yml\n```\n\n\u30c6\u30fc\u30d6\u30eb\u306b\u30ec\u30b3\u30fc\u30c9\u304c\u6295\u5165\u3055\u308c\u3066\u3044\u308b\u306e\u3092\u78ba\u8a8d\n\n```\nmysql>\nmysql> select * from bulk_tbl;\n+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+\n| col01 | col02 | col03 | col04 | col05 | col06 | col07 | col08 | col09 | col10 | col11 | col12 | col13 | col14 | col15 | col16 | col17 | col18 | col19 | col20 |\n+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+\n| 01    | 02    | 03    | 04    | 05    | 06    | 07    | 08    | 09    | 10    | 11    | 12    | 13    | 14    | 15    | 16    | 17    | 18    | 19    | 20    |\n+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+\n1 row in set (0.00 sec)\n```\n\n# 3. \u5927\u91cf\u30c7\u30fc\u30bf\u6295\u5165\n\n100\u4e07\u4ef6\u306ecsv\u309230\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n\n```lang:generate_csv.rb\nrequire 'zlib'\n\nclass GenerateCsv\n\n  def run\n    for i in 1..30\n      file = \"./csv/bulk_#{format('%02d',i)}.csv.gz\"\n      data = \"\"\n      for j in 1..1000000\n        row = []\n        for k in 1..20\n          row.push(\"val#{i}_#{j}_#{k}\")\n        end\n        data << row.join(\",\") + \"\\n\"\n      end\n      _generate(file, data)\n    end\n  end\n\n  private\n\n  def _generate(file, data)\n    Zlib::GzipWriter.open(file) {|gz|\n      gz.puts data\n    }\n  end\n\ninstance = GenerateCsv.new\ninstance.run\nend\n```\n\nEmbulk\u3092\u5b9f\u884c\u3057\u3001\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u3066\u307f\u308b\n\n```\n$ embulk run ./sample/config.yml\n```\n\n\u30a8\u30e9\u30fc\u767a\u751f\u3002\u3002\u3002\n[Embulk\u3067MySQL\u306b\u5927\u91cf\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u3066\u307f\u308b - \u305d\u306e\uff12](http://qiita.com/shinyashikis@github/items/21b0fe4e710b397d28b6)\n\n```\norg.embulk.exec.PartialExecutionException: java.lang.RuntimeException: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure\n\nThe last packet successfully received from the server was 2,839,153 milliseconds ago.  The last packet sent successfully to the server was 2,839,151 milliseconds ago.\n\tat org.embulk.exec.BulkLoader$LoaderState.buildPartialExecuteException(org/embulk/exec/BulkLoader.java:331)\n\tat org.embulk.exec.BulkLoader.doRun(org/embulk/exec/BulkLoader.java:529)\n\tat org.embulk.exec.BulkLoader.access$100(org/embulk/exec/BulkLoader.java:36)\n\tat org.embulk.exec.BulkLoader$1.run(org/embulk/exec/BulkLoader.java:342)\n\tat org.embulk.exec.BulkLoader$1.run(org/embulk/exec/BulkLoader.java:338)\n\tat org.embulk.spi.Exec.doWith(org/embulk/spi/Exec.java:25)\n\tat org.embulk.exec.BulkLoader.run(org/embulk/exec/BulkLoader.java:338)\n\tat org.embulk.command.Runner.run(org/embulk/command/Runner.java:149)\n\tat org.embulk.command.Runner.main(org/embulk/command/Runner.java:101)\n\tat java.lang.reflect.Method.invoke(java/lang/reflect/Method.java:483)\n....\n```\n", "tags": ["Embulk", "MySQL"]}