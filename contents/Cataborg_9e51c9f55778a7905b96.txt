{"context": " More than 1 year has passed since last update.Android\u30a2\u30d7\u30ea\u958b\u767a\u8005\u306e\u65b9\u3078\u306e\u6ce8\u610f\u559a\u8d77\u306e\u610f\u5473\u3067\u60c5\u5831\u5c55\u958b\u3057\u307e\u3059\u3002\nAndroid\u304c\u53d6\u308a\u8fbc\u3093\u3067\u3044\u308bJava\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u306f\u3001\u672a\u3060\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u300c\u6697\u53f7\u5229\u7528\u30e2\u30fc\u30c9\u300d\u3068\u3057\u3066ECB\u30e2\u30fc\u30c9\u304c\u5229\u7528\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nECB\u30e2\u30fc\u30c9\u306f\u65e7\u77e5\u306e\u8106\u5f31\u6027\u304c\u3042\u308a\u3001\u65e5\u672c\u653f\u5e9c\u304c\u7b56\u5b9a\u3057\u3066\u3044\u308bCRYPTREC\u63a8\u5968\u30ea\u30b9\u30c8( http://www.cryptrec.go.jp/images/cryptrec_ciphers_list_2013.pdf )\u3067\u3082\u300c\u975e\u63a8\u5968\u300d\u306e\u6271\u3044\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u306b\u3082\u95a2\u308f\u3089\u305a\u3001JAVA\u306eCipher\u30af\u30e9\u30b9\u3092\u5229\u7528\u3057\u3066\u6697\u53f7\u3092\u304b\u3051\u305f\u5834\u5408\u3001\u30e2\u30fc\u30c9\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u304cECB\u3068\u306a\u3063\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u305f\u3081\u306b\u3001\u958b\u767a\u8005\u304c\u610f\u8b58\u305b\u305a\u306bECB\u30e2\u30fc\u30c9\u3067\u6697\u53f7\u5316\u3092\u884c\u3063\u3066\u3044\u308b\u4e8b\u4f8b\u304c\u3001\u591a\u304f\u306eAndroid\u30a2\u30d7\u30ea\u306b\u898b\u53d7\u3051\u3089\u308c\u308b\u72b6\u6cc1\u3067\u3059\u3002\n\n\u25a0 \u305d\u3082\u305d\u3082\u300c\u6697\u53f7\u5229\u7528\u30e2\u30fc\u30c9\u300d\u3063\u3066\uff1f\n\u591a\u304f\u306e\u5171\u901a\u9375\u6697\u53f7\u3067\u306f\u3001\u30d6\u30ed\u30c3\u30af\u6697\u53f7\u65b9\u5f0f\u304c\u63a1\u7528\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u30d6\u30ed\u30c3\u30af\u6697\u53f7\u3068\u306f\u3001\u305d\u306e\u540d\u306e\u901a\u308a\u3042\u308b\u5e73\u6587\u3092\u6697\u53f7\u5316\u3059\u308b\u969b\u306b\u30d6\u30ed\u30c3\u30af\u5358\u4f4d\u3067\u6697\u53f7\u5316\u3092\u884c\u3063\u3066\u3044\u304f\u65b9\u5f0f\u3067\u3059\u3002\n\u305f\u3060\u3001\u305d\u306e\u307e\u307e\u3067\u306f\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\uff08AES\u306f128Byte etc\uff09\u4ee5\u4e0a\u306e\u30c7\u30fc\u30bf\u306e\u6697\u53f7\u5316\u304c\u884c\u3048\u306a\u3044\u305f\u3081\u3001\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3088\u308a\u5927\u304d\u3044\u30c7\u30fc\u30bf\u3092\u6697\u53f7\u5316\u3059\u308b\u5834\u5408\u3001\u30d6\u30ed\u30c3\u30af\u5358\u4f4d\u3067\u30c7\u30fc\u30bf\u3092\u7e70\u308a\u8fd4\u3057\u6697\u53f7\u5316\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u305d\u306e\u7e70\u308a\u8fd4\u3057\u306e\u30d1\u30bf\u30fc\u30f3\u304c\u6697\u53f7\u5229\u7528\u30e2\u30fc\u30c9\u3068\u547c\u3070\u308c\u308b\u3082\u306e\u3067\u3059\u3002\n\u4f8b\u3048\u3070ECB\u30e2\u30fc\u30c9\u306e\u5834\u5408\u306f\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306b\u9806\u756a\u306b\u5e73\u6587\u30c7\u30fc\u30bf\u3092\u30d6\u30ed\u30c3\u30af\u6bce\u306b\u6697\u53f7\u5316\u3057\u3066\u3044\u304f\u3060\u3051\u306e\u975e\u5e38\u306b\u30b7\u30f3\u30d7\u30eb\u306a\u65b9\u5f0f\u3067\u6697\u53f7\u5316\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u203b\u305d\u306e\u4ed6\u306e\u30e2\u30fc\u30c9\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u3002\n\n\u25a0 ECB\u30e2\u30fc\u30c9\u306e\u4f55\u304c\u554f\u984c\u304b\uff1f\nECB\u30e2\u30fc\u30c9\u306f\u4e0a\u8a18\u56f3\u306e\u901a\u308a\u3001\u540c\u3058\u5e73\u6587\u306e\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u3001\u540c\u4e00\u306eKey\u306e\u307f\u3092\u6307\u5b9a\u3059\u308b\u306e\u3067\u540c\u3058\u6697\u53f7\u6587\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u30d1\u30bf\u30fc\u30f3\u63a8\u6e2c\u306b\u3088\u308a\u6697\u53f7\u6587\u304b\u3089\u5143\u306e\u5e73\u6587\u30c7\u30fc\u30bf\u3092\u63a8\u6e2c\u3057\u6613\u3044\u3068\u3044\u3046\u8106\u5f31\u6027\u3092\u5185\u5305\u3057\u3066\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001\u5e73\u6587\u30c7\u30fc\u30bf\u3092\u305f\u3060\u9806\u756a\u306b\u6697\u53f7\u5316\u3057\u3066\u3044\u304f\u3060\u3051\u3067\u6539\u3056\u3093\u691c\u77e5\u6a5f\u80fd\u3082\u306a\u3044\u305f\u3081\u3001\u30c7\u30fc\u30bf\u5185\u306e\u4e00\u90e8\u5206\u3060\u3051\u3092\u4efb\u610f\u306e\u5024\u306b\u66f8\u304d\u63db\u3048\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u4e0b\u8a18\u306e\u653b\u6483\u306b\u5f31\u3044\u3053\u3068\u304c\u5206\u304b\u3063\u3066\u3044\u307e\u3059\u3002\n\n(1) \u6697\u53f7\u6587\u4e00\u81f4\u653b\u6483\n\n\u6697\u53f7\u6587\u4e00\u81f4\u653b\u6483\uff08ciphertext matching attack\uff09\u306f\uff0c\u540c\u4e00\u306e\u9375\u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u305f\u6697\u53f7\u6587\u3092\u5927\u91cf\u306b\u96c6\u3081\u3001\u305d\u308c\u3089\u306e\u4e2d\u304b\u3089\u540c\u4e00\u306e\u6697\u53f7\u6587\u3068\u306a\u308b\u3082\u306e\u3092\u63a2\u7d22\u3057\u3001\u5e73\u6587\u3084\u6697\u53f7\u9375\u3092\u63a8\u6e2c\u3059\u308b\u653b\u6483\u3067\u3059\u3002\n\u4f8b\u3048\u3070\u3001\u3042\u308b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6697\u53f7\u5316\u3057\u3066\u4fdd\u5b58\u3057\u305f\u5927\u91cf\u306e\u30c7\u30fc\u30bf\u304c\u653b\u6483\u8005\u306b\u3088\u3063\u3066\u30b5\u30fc\u30d0\u304b\u3089\u76d7\u307e\u308c\u3001\u6700\u7d42\u7684\u306bECB\u30e2\u30fc\u30c9\u306e\u8106\u5f31\u6027\u3092\u7a81\u304b\u308c\u308b\u3053\u3068\u3067\u3001\u5143\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u81ea\u4f53\u3082\u89e3\u8aad\u3055\u308c\u6f0f\u3048\u3044\u3057\u3066\u3057\u307e\u3063\u305f\u3068\u3044\u3046\u30b1\u30fc\u30b9\u3082\u3042\u308a\u307e\u3059\u3002\nECB\u30e2\u30fc\u30c9\u3067\u6697\u53f7\u5316\u3057\u305f\u5834\u5408\u3001\u540c\u4e00\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u540c\u4e00\u306e\u6697\u53f7\u6587\u306b\u5909\u63db\u3055\u308c\u308b\u306e\u3067\u3001\u4f8b\u3048\u3070\u5927\u91cf\u306e\u30c7\u30fc\u30bf\u306e\u4e2d\u3067\u983b\u51fa\u3059\u308b\u30d0\u30a4\u30ca\u30ea\u30d1\u30bf\u30fc\u30f3\u306f\u3001\u3088\u304f\u5229\u7528\u3055\u308c\u308b\u30d1\u30b9\u30ef\u30fc\u30c9\u3060\u308d\u3046\u3068\u3044\u3046\u63a8\u6e2c\u3092\u50cd\u304b\u305b\u308b\u3053\u3068\u3067\u3001\u5143\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u63a2\u3057\u5f53\u3066\u308b\u3053\u3068\u304c\u3067\u304d\u3066\u3057\u307e\u3046\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\n(2) \u6697\u53f7\u6587\u6539\u3056\u3093\u653b\u6483\n\n\u6697\u53f7\u6587\u306e\u9375\u3092\u898b\u3064\u3051\u305f\u308a\u3001\u5e73\u6587\u30c7\u30fc\u30bf\u3092\u3059\u3079\u3066\u89e3\u6790\u3067\u304d\u306a\u304b\u3063\u305f\u3068\u3057\u3066\u3082\u3001\u30c7\u30fc\u30bf\u306e\u4e2d\u306e\u4e00\u90e8\u3092\u6539\u3056\u3093\u3059\u308c\u3070\u610f\u5473\u306e\u3042\u308b\u653b\u6483\u3092\u884c\u3048\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u304c\u6697\u53f7\u6587\u306e\u6539\u3056\u3093\u306b\u3088\u308b\u653b\u6483\u3067\u3059\u3002\n\u4f8b\u3048\u3070\u3001\u30e6\u30fc\u30b6\u30fc\u306e\u8a8d\u8a3c\u7528\u306e\u60c5\u5831\u306e\u4e2d\u3067\u3001\u30e6\u30fc\u30b6\u306e\u8b58\u5225\u5b50\u90e8\u5206\u3060\u3051\u3092\u3059\u308a\u66ff\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308c\u3070\u3001\u305d\u306e\u30e6\u30fc\u30b6\u306b\u6210\u308a\u3059\u307e\u3057\u305f\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u30b5\u30fc\u30d0\u306b\u9001\u308b\u3053\u3068\u304c\u3067\u304d\u3066\u3057\u307e\u3044\u307e\u3059\u3002\nECB\u30e2\u30fc\u30c9\u306f\u5404\u30d6\u30ed\u30c3\u30af\u3092\u72ec\u7acb\u3057\u3066\u6697\u53f7\u5316\u3059\u308b\u305f\u3081\u306b\u3001\u30d6\u30ed\u30c3\u30af\u5358\u4f4d\u3067\u306e\u3059\u308a\u66ff\u3048\uff08\u6539\u3056\u3093\uff09\u3092\u691c\u77e5\u3067\u304d\u307e\u305b\u3093\u3002\u305d\u306e\u305f\u3081\u3001\u72b6\u6cc1\u306b\u3088\u3063\u3066\u306f\u653b\u6483\u8005\u306b\u6709\u5229\u306a\u60c5\u5831\u306e\u6539\u3056\u3093\u3092\u884c\u308f\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u25a0 \u30a2\u30d7\u30ea\u306e\u4e2d\u3067\u4f7f\u3063\u3066\u305f\u3089\u3069\u3046\u3059\u308b\u304b\uff1f\n\u9806\u6b21\u3001\u4ed6\u306e\u30e2\u30fc\u30c9\u306b\u30ea\u30d7\u30ec\u30fc\u30b9\u3057\u3066\u3044\u304f\u3053\u3068\u3092\u304a\u85a6\u3081\u3057\u307e\u3059\u3002\n\u5b9f\u969b\u306b\u306f\u3001(1)\u306e\u8106\u5f31\u6027\u306b\u5bfe\u3057\u3066\u5358\u306b1\u30d6\u30ed\u30c3\u30af\u5185\u306b\u53ce\u307e\u308b\u3088\u3046\u306a\u5358\u4e00\u306e\u5024\u3092\u6697\u53f7\u5316\u3057\u305f\u5834\u5408\u306f\u653b\u6483\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u306a\u304b\u3063\u305f\u308a\u3001(2)\u306e\u8106\u5f31\u6027\u306b\u5bfe\u3057\u3066\u3082\u30d6\u30ed\u30c3\u30af\u5358\u4f4d\u306e\u3059\u308a\u66ff\u3048\u3067\u306f\u610f\u5473\u306e\u3042\u308b\u653b\u6483\u3092\u884c\u3048\u306a\u3044\u5834\u5408\u3082\u591a\u3044\u305f\u3081\u3001\u30a2\u30d7\u30ea\u5185\u3067ECB\u30e2\u30fc\u30c9\u3092\u5229\u7528\u3057\u3066\u3044\u305f\u304b\u3089\u3068\u3044\u3063\u3066\u3001\u4e00\u6982\u306b\u5229\u7528\u3092\u505c\u6b62\u3059\u308b\u3079\u304d\u5371\u967a\u306a\u72b6\u6cc1\u3068\u306f\u8a00\u3048\u307e\u305b\u3093\u3002\n\u4f8b\u3048\u3070\u3001\u30a2\u30d7\u30ea\u306e\u56fa\u5b9a\u306eKey\u5024\u3092\u30d5\u30a1\u30a4\u30eb\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306bECB\u30e2\u30fc\u30c9\u3067\u6697\u53f7\u5316\u3059\u308b\u3060\u3051\u306e\u7528\u9014\u3067\u3042\u308c\u3070\u3001\u6b86\u3069\u554f\u984c\u306f\u8d77\u304d\u306a\u3044\u3067\u3057\u3087\u3046\u3002\n\u305f\u3060\u3001\u8106\u5f31\u6027\u304c\u65e2\u77e5\u306e\u3082\u306e\u3068\u306a\u3063\u3066\u3044\u308b\u6280\u8853\u3092\u9032\u3093\u3067\u5229\u7528\u3059\u308b\u3082\u306e\u3067\u3082\u3042\u308a\u307e\u305b\u3093\u3057\u3001\u5b9f\u969b\u306b\u5371\u967a\u6027\u306e\u4f34\u3046\u30b1\u30fc\u30b9\u306e\u5834\u5408\u3082\u3042\u308a\u307e\u3059\u3002\u30a2\u30d7\u30ea\u306e\u3053\u306e\u30b1\u30fc\u30b9\u3067\u3042\u308c\u3070\u554f\u984c\u304c\u8d77\u304d\u306a\u3044\u304b\u3001\u3068\u8a73\u7d30\u306b\u691c\u8a0e\u3059\u308b\u3088\u308a\u306f\u3001\u6539\u4fee\u3057\u3066\u3057\u307e\u3046\u65b9\u304c\u73fe\u5b9f\u7684\u306a\u3093\u3058\u3083\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u25a0 \u53c2\u8003\uff1a\u30e2\u30fc\u30c9\u306e\u6307\u5b9a\u65b9\u6cd5\n\u3067\u306f\u5b9f\u969b\u306b\u3069\u3093\u306a\u5b9f\u88c5\u3092\u3059\u308c\u3070\u3088\u3044\u304b\u3068\u3044\u3046\u306e\u304c\u4e0b\u8a18\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u306e\u4f8b\u3067\u306fCBC\u30e2\u30fc\u30c9\u3067\u6697\u53f7\u5316\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u521d\u671f\u5316\u30d9\u30af\u30c8\u30eb\uff08IV\uff09(\u203b)\u3082\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n(\u203b) \u30d6\u30ed\u30c3\u30af\u9593\u306e\u6697\u53f7\u6587\u3092\u7591\u4f3c\u30e9\u30f3\u30c0\u30e0\u5316\u3055\u305b\u308b\u3088\u3046\u306a\u5024\u3067\u3059\u3002\n\u30dd\u30a4\u30f3\u30c8\u306f\u3001Cipher#getInstance()\u306b\"AES\"\u3060\u3051\u3067\u306a\u304f\"AES/CBC/PKCS7Padding\"\u3068\u3001\u30e2\u30fc\u30c9\u307e\u3067\u6307\u5b9a\u3059\u308b\u70b9\u3067\u3059\u3002\n\nimport java.security.InvalidKeyException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.InvalidAlgorithmParameterException;\nimport javax.crypto.BadPaddingException;\nimport javax.crypto.Cipher;\nimport javax.crypto.IllegalBlockSizeException;\nimport javax.crypto.NoSuchPaddingException;\nimport javax.crypto.spec.IvParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\n// \u25a0 CBC\u306b\u3088\u308b\u6697\u53f7\u5316\u51e6\u7406\n//\u3000- buf \uff1a\u6697\u53f7\u5316\u5bfe\u8c61\n//\u3000- key\uff1a\u5171\u901a\u9375\n//\u3000- iv\u3000\uff1a\u521d\u671f\u5316\u30d9\u30af\u30c8\u30eb(IV)\npublic static byte[] cipherEncrypt(byte[] buf, String key, String iv){\n\u3000try {\n\u3000\u3000// \u79d8\u5bc6\u9375\u306e\u751f\u6210\n\u3000\u3000SecretKeySpec sksSpec = new SecretKeySpec(key.getBytes(), \"AES\");\n\u3000\u3000// IV\u306e\u751f\u6210\n\u3000\u3000IvParameterSpec ivSpec = new IvParameterSpec(iv.getBytes());\n\u3000\u3000// Cipher\u30af\u30e9\u30b9\u306e\u521d\u671f\u5316\n\u3000\u3000Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS7Padding\");\u2190\u2605\u30dd\u30a4\u30f3\u30c8\n\u3000\u3000cipher.init(Cipher.ENCRYPT_MODE, sksSpec, ivSpec);\n\u3000\u3000// \u6697\u53f7\u5316\n\u3000\u3000return cipher.doFinal(buf);\n\u3000\u3000\u3000\u3000} catch (NoSuchAlgorithmException e) {\n\u3000\u3000\u3000\u3000} catch (NoSuchPaddingException e) {\n\u3000\u3000\u3000\u3000} catch (InvalidKeyException e) {\n\u3000\u3000\u3000\u3000} catch (IllegalBlockSizeException e) {\n\u3000\u3000\u3000\u3000} catch (BadPaddingException e) {\n\u3000\u3000\u3000\u3000} catch (InvalidAlgorithmParameterException e) {\n\u3000\u3000\u3000\u3000} finally {\n\u3000\u3000\u3000\u3000}\n\u3000\u3000return null;\n}\n\n\n\u203b\u3053\u306e\u8a18\u4e8b\u304c\u53c2\u8003\u306b\u306a\u3063\u305f\uff01\u3068\u3044\u3046\u65b9\u306f\u662f\u975e\u300c\u30b9\u30c8\u30c3\u30af\u300d\u304a\u9858\u3044\u3057\u307e\u3059 \nAndroid\u30a2\u30d7\u30ea\u958b\u767a\u8005\u306e\u65b9\u3078\u306e\u6ce8\u610f\u559a\u8d77\u306e\u610f\u5473\u3067\u60c5\u5831\u5c55\u958b\u3057\u307e\u3059\u3002\n\nAndroid\u304c\u53d6\u308a\u8fbc\u3093\u3067\u3044\u308bJava\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u306f\u3001\u672a\u3060\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e**\u300c\u6697\u53f7\u5229\u7528\u30e2\u30fc\u30c9\u300d**\u3068\u3057\u3066**ECB**\u30e2\u30fc\u30c9\u304c\u5229\u7528\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n**ECB**\u30e2\u30fc\u30c9\u306f\u65e7\u77e5\u306e\u8106\u5f31\u6027\u304c\u3042\u308a\u3001\u65e5\u672c\u653f\u5e9c\u304c\u7b56\u5b9a\u3057\u3066\u3044\u308bCRYPTREC\u63a8\u5968\u30ea\u30b9\u30c8( http://www.cryptrec.go.jp/images/cryptrec_ciphers_list_2013.pdf )\u3067\u3082**\u300c\u975e\u63a8\u5968\u300d**\u306e\u6271\u3044\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u306b\u3082\u95a2\u308f\u3089\u305a\u3001JAVA\u306eCipher\u30af\u30e9\u30b9\u3092\u5229\u7528\u3057\u3066\u6697\u53f7\u3092\u304b\u3051\u305f\u5834\u5408\u3001\u30e2\u30fc\u30c9\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u304c**ECB**\u3068\u306a\u3063\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u305f\u3081\u306b\u3001\u958b\u767a\u8005\u304c\u610f\u8b58\u305b\u305a\u306b**ECB**\u30e2\u30fc\u30c9\u3067\u6697\u53f7\u5316\u3092\u884c\u3063\u3066\u3044\u308b\u4e8b\u4f8b\u304c\u3001\u591a\u304f\u306eAndroid\u30a2\u30d7\u30ea\u306b\u898b\u53d7\u3051\u3089\u308c\u308b\u72b6\u6cc1\u3067\u3059\u3002\n\n\n##\u25a0 \u305d\u3082\u305d\u3082**\u300c\u6697\u53f7\u5229\u7528\u30e2\u30fc\u30c9\u300d**\u3063\u3066\uff1f\n\u591a\u304f\u306e\u5171\u901a\u9375\u6697\u53f7\u3067\u306f\u3001**\u30d6\u30ed\u30c3\u30af\u6697\u53f7**\u65b9\u5f0f\u304c\u63a1\u7528\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n**\u30d6\u30ed\u30c3\u30af\u6697\u53f7**\u3068\u306f\u3001\u305d\u306e\u540d\u306e\u901a\u308a\u3042\u308b\u5e73\u6587\u3092\u6697\u53f7\u5316\u3059\u308b\u969b\u306b\u30d6\u30ed\u30c3\u30af\u5358\u4f4d\u3067\u6697\u53f7\u5316\u3092\u884c\u3063\u3066\u3044\u304f\u65b9\u5f0f\u3067\u3059\u3002\n\n\u305f\u3060\u3001\u305d\u306e\u307e\u307e\u3067\u306f\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\uff08AES\u306f128Byte etc\uff09\u4ee5\u4e0a\u306e\u30c7\u30fc\u30bf\u306e\u6697\u53f7\u5316\u304c\u884c\u3048\u306a\u3044\u305f\u3081\u3001\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3088\u308a\u5927\u304d\u3044\u30c7\u30fc\u30bf\u3092\u6697\u53f7\u5316\u3059\u308b\u5834\u5408\u3001\u30d6\u30ed\u30c3\u30af\u5358\u4f4d\u3067\u30c7\u30fc\u30bf\u3092\u7e70\u308a\u8fd4\u3057\u6697\u53f7\u5316\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u305d\u306e\u7e70\u308a\u8fd4\u3057\u306e\u30d1\u30bf\u30fc\u30f3\u304c**\u6697\u53f7\u5229\u7528\u30e2\u30fc\u30c9**\u3068\u547c\u3070\u308c\u308b\u3082\u306e\u3067\u3059\u3002\n\n\u4f8b\u3048\u3070**ECB**\u30e2\u30fc\u30c9\u306e\u5834\u5408\u306f\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306b\u9806\u756a\u306b\u5e73\u6587\u30c7\u30fc\u30bf\u3092\u30d6\u30ed\u30c3\u30af\u6bce\u306b\u6697\u53f7\u5316\u3057\u3066\u3044\u304f\u3060\u3051\u306e\u975e\u5e38\u306b\u30b7\u30f3\u30d7\u30eb\u306a\u65b9\u5f0f\u3067\u6697\u53f7\u5316\u3092\u884c\u3044\u307e\u3059\u3002\n\n![ECB_from_wiki.png](https://qiita-image-store.s3.amazonaws.com/0/50949/68ecc07a-d91c-b576-5074-111126d3dfdd.png)\n\n\u203b\u305d\u306e\u4ed6\u306e\u30e2\u30fc\u30c9\u306b\u3064\u3044\u3066\u306f[\u3053\u3061\u3089](http://akademeia.info/index.php?%A5%D6%A5%ED%A5%C3%A5%AF%B0%C5%B9%E6%A4%CE%CD%F8%CD%D1%A5%E2%A1%BC%A5%C9)\u3002\n\n\n##\u25a0 **ECB**\u30e2\u30fc\u30c9\u306e\u4f55\u304c\u554f\u984c\u304b\uff1f\n**ECB**\u30e2\u30fc\u30c9\u306f\u4e0a\u8a18\u56f3\u306e\u901a\u308a\u3001\u540c\u3058\u5e73\u6587\u306e\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u3001\u540c\u4e00\u306eKey\u306e\u307f\u3092\u6307\u5b9a\u3059\u308b\u306e\u3067\u540c\u3058\u6697\u53f7\u6587\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u30d1\u30bf\u30fc\u30f3\u63a8\u6e2c\u306b\u3088\u308a\u6697\u53f7\u6587\u304b\u3089\u5143\u306e\u5e73\u6587\u30c7\u30fc\u30bf\u3092\u63a8\u6e2c\u3057\u6613\u3044\u3068\u3044\u3046\u8106\u5f31\u6027\u3092\u5185\u5305\u3057\u3066\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001\u5e73\u6587\u30c7\u30fc\u30bf\u3092\u305f\u3060\u9806\u756a\u306b\u6697\u53f7\u5316\u3057\u3066\u3044\u304f\u3060\u3051\u3067\u6539\u3056\u3093\u691c\u77e5\u6a5f\u80fd\u3082\u306a\u3044\u305f\u3081\u3001\u30c7\u30fc\u30bf\u5185\u306e\u4e00\u90e8\u5206\u3060\u3051\u3092\u4efb\u610f\u306e\u5024\u306b\u66f8\u304d\u63db\u3048\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u4e0b\u8a18\u306e\u653b\u6483\u306b\u5f31\u3044\u3053\u3068\u304c\u5206\u304b\u3063\u3066\u3044\u307e\u3059\u3002\n\n####**(1) \u6697\u53f7\u6587\u4e00\u81f4\u653b\u6483**\n**\u6697\u53f7\u6587\u4e00\u81f4\u653b\u6483**\uff08ciphertext matching attack\uff09\u306f\uff0c\u540c\u4e00\u306e\u9375\u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u305f\u6697\u53f7\u6587\u3092\u5927\u91cf\u306b\u96c6\u3081\u3001\u305d\u308c\u3089\u306e\u4e2d\u304b\u3089\u540c\u4e00\u306e\u6697\u53f7\u6587\u3068\u306a\u308b\u3082\u306e\u3092\u63a2\u7d22\u3057\u3001\u5e73\u6587\u3084\u6697\u53f7\u9375\u3092\u63a8\u6e2c\u3059\u308b\u653b\u6483\u3067\u3059\u3002\n\u4f8b\u3048\u3070\u3001\u3042\u308b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6697\u53f7\u5316\u3057\u3066\u4fdd\u5b58\u3057\u305f\u5927\u91cf\u306e\u30c7\u30fc\u30bf\u304c\u653b\u6483\u8005\u306b\u3088\u3063\u3066\u30b5\u30fc\u30d0\u304b\u3089\u76d7\u307e\u308c\u3001\u6700\u7d42\u7684\u306b**ECB**\u30e2\u30fc\u30c9\u306e\u8106\u5f31\u6027\u3092\u7a81\u304b\u308c\u308b\u3053\u3068\u3067\u3001\u5143\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u81ea\u4f53\u3082\u89e3\u8aad\u3055\u308c\u6f0f\u3048\u3044\u3057\u3066\u3057\u307e\u3063\u305f\u3068\u3044\u3046\u30b1\u30fc\u30b9\u3082\u3042\u308a\u307e\u3059\u3002\n**ECB**\u30e2\u30fc\u30c9\u3067\u6697\u53f7\u5316\u3057\u305f\u5834\u5408\u3001\u540c\u4e00\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u540c\u4e00\u306e\u6697\u53f7\u6587\u306b\u5909\u63db\u3055\u308c\u308b\u306e\u3067\u3001\u4f8b\u3048\u3070\u5927\u91cf\u306e\u30c7\u30fc\u30bf\u306e\u4e2d\u3067\u983b\u51fa\u3059\u308b\u30d0\u30a4\u30ca\u30ea\u30d1\u30bf\u30fc\u30f3\u306f\u3001\u3088\u304f\u5229\u7528\u3055\u308c\u308b\u30d1\u30b9\u30ef\u30fc\u30c9\u3060\u308d\u3046\u3068\u3044\u3046\u63a8\u6e2c\u3092\u50cd\u304b\u305b\u308b\u3053\u3068\u3067\u3001\u5143\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u63a2\u3057\u5f53\u3066\u308b\u3053\u3068\u304c\u3067\u304d\u3066\u3057\u307e\u3046\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\n\n####**(2) \u6697\u53f7\u6587\u6539\u3056\u3093\u653b\u6483**\n\u6697\u53f7\u6587\u306e\u9375\u3092\u898b\u3064\u3051\u305f\u308a\u3001\u5e73\u6587\u30c7\u30fc\u30bf\u3092\u3059\u3079\u3066\u89e3\u6790\u3067\u304d\u306a\u304b\u3063\u305f\u3068\u3057\u3066\u3082\u3001\u30c7\u30fc\u30bf\u306e\u4e2d\u306e\u4e00\u90e8\u3092\u6539\u3056\u3093\u3059\u308c\u3070\u610f\u5473\u306e\u3042\u308b\u653b\u6483\u3092\u884c\u3048\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u304c**\u6697\u53f7\u6587\u306e\u6539\u3056\u3093**\u306b\u3088\u308b\u653b\u6483\u3067\u3059\u3002\n\u4f8b\u3048\u3070\u3001\u30e6\u30fc\u30b6\u30fc\u306e\u8a8d\u8a3c\u7528\u306e\u60c5\u5831\u306e\u4e2d\u3067\u3001\u30e6\u30fc\u30b6\u306e\u8b58\u5225\u5b50\u90e8\u5206\u3060\u3051\u3092\u3059\u308a\u66ff\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308c\u3070\u3001\u305d\u306e\u30e6\u30fc\u30b6\u306b\u6210\u308a\u3059\u307e\u3057\u305f\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u30b5\u30fc\u30d0\u306b\u9001\u308b\u3053\u3068\u304c\u3067\u304d\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n**ECB**\u30e2\u30fc\u30c9\u306f\u5404\u30d6\u30ed\u30c3\u30af\u3092\u72ec\u7acb\u3057\u3066\u6697\u53f7\u5316\u3059\u308b\u305f\u3081\u306b\u3001\u30d6\u30ed\u30c3\u30af\u5358\u4f4d\u3067\u306e\u3059\u308a\u66ff\u3048\uff08\u6539\u3056\u3093\uff09\u3092\u691c\u77e5\u3067\u304d\u307e\u305b\u3093\u3002\u305d\u306e\u305f\u3081\u3001\u72b6\u6cc1\u306b\u3088\u3063\u3066\u306f\u653b\u6483\u8005\u306b\u6709\u5229\u306a\u60c5\u5831\u306e\u6539\u3056\u3093\u3092\u884c\u308f\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\n##\u25a0 \u30a2\u30d7\u30ea\u306e\u4e2d\u3067\u4f7f\u3063\u3066\u305f\u3089\u3069\u3046\u3059\u308b\u304b\uff1f\n\u9806\u6b21\u3001\u4ed6\u306e\u30e2\u30fc\u30c9\u306b\u30ea\u30d7\u30ec\u30fc\u30b9\u3057\u3066\u3044\u304f\u3053\u3068\u3092\u304a\u85a6\u3081\u3057\u307e\u3059\u3002\n\n\u5b9f\u969b\u306b\u306f\u3001(1)\u306e\u8106\u5f31\u6027\u306b\u5bfe\u3057\u3066\u5358\u306b1\u30d6\u30ed\u30c3\u30af\u5185\u306b\u53ce\u307e\u308b\u3088\u3046\u306a\u5358\u4e00\u306e\u5024\u3092\u6697\u53f7\u5316\u3057\u305f\u5834\u5408\u306f\u653b\u6483\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u306a\u304b\u3063\u305f\u308a\u3001(2)\u306e\u8106\u5f31\u6027\u306b\u5bfe\u3057\u3066\u3082\u30d6\u30ed\u30c3\u30af\u5358\u4f4d\u306e\u3059\u308a\u66ff\u3048\u3067\u306f\u610f\u5473\u306e\u3042\u308b\u653b\u6483\u3092\u884c\u3048\u306a\u3044\u5834\u5408\u3082\u591a\u3044\u305f\u3081\u3001\u30a2\u30d7\u30ea\u5185\u3067**ECB**\u30e2\u30fc\u30c9\u3092\u5229\u7528\u3057\u3066\u3044\u305f\u304b\u3089\u3068\u3044\u3063\u3066\u3001\u4e00\u6982\u306b\u5229\u7528\u3092\u505c\u6b62\u3059\u308b\u3079\u304d\u5371\u967a\u306a\u72b6\u6cc1\u3068\u306f\u8a00\u3048\u307e\u305b\u3093\u3002\n\u4f8b\u3048\u3070\u3001\u30a2\u30d7\u30ea\u306e\u56fa\u5b9a\u306eKey\u5024\u3092\u30d5\u30a1\u30a4\u30eb\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306b**ECB**\u30e2\u30fc\u30c9\u3067\u6697\u53f7\u5316\u3059\u308b\u3060\u3051\u306e\u7528\u9014\u3067\u3042\u308c\u3070\u3001\u6b86\u3069\u554f\u984c\u306f\u8d77\u304d\u306a\u3044\u3067\u3057\u3087\u3046\u3002\n\n\u305f\u3060\u3001\u8106\u5f31\u6027\u304c\u65e2\u77e5\u306e\u3082\u306e\u3068\u306a\u3063\u3066\u3044\u308b\u6280\u8853\u3092\u9032\u3093\u3067\u5229\u7528\u3059\u308b\u3082\u306e\u3067\u3082\u3042\u308a\u307e\u305b\u3093\u3057\u3001\u5b9f\u969b\u306b\u5371\u967a\u6027\u306e\u4f34\u3046\u30b1\u30fc\u30b9\u306e\u5834\u5408\u3082\u3042\u308a\u307e\u3059\u3002\u30a2\u30d7\u30ea\u306e\u3053\u306e\u30b1\u30fc\u30b9\u3067\u3042\u308c\u3070\u554f\u984c\u304c\u8d77\u304d\u306a\u3044\u304b\u3001\u3068\u8a73\u7d30\u306b\u691c\u8a0e\u3059\u308b\u3088\u308a\u306f\u3001\u6539\u4fee\u3057\u3066\u3057\u307e\u3046\u65b9\u304c\u73fe\u5b9f\u7684\u306a\u3093\u3058\u3083\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n##\u25a0 \u53c2\u8003\uff1a\u30e2\u30fc\u30c9\u306e\u6307\u5b9a\u65b9\u6cd5\n\u3067\u306f\u5b9f\u969b\u306b\u3069\u3093\u306a\u5b9f\u88c5\u3092\u3059\u308c\u3070\u3088\u3044\u304b\u3068\u3044\u3046\u306e\u304c\u4e0b\u8a18\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u306e\u4f8b\u3067\u306fCBC\u30e2\u30fc\u30c9\u3067\u6697\u53f7\u5316\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u521d\u671f\u5316\u30d9\u30af\u30c8\u30eb\uff08IV\uff09(\u203b)\u3082\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n(\u203b) \u30d6\u30ed\u30c3\u30af\u9593\u306e\u6697\u53f7\u6587\u3092\u7591\u4f3c\u30e9\u30f3\u30c0\u30e0\u5316\u3055\u305b\u308b\u3088\u3046\u306a\u5024\u3067\u3059\u3002\n\n\u30dd\u30a4\u30f3\u30c8\u306f\u3001Cipher#getInstance()\u306b\"AES\"\u3060\u3051\u3067\u306a\u304f\"AES/CBC/PKCS7Padding\"\u3068\u3001\u30e2\u30fc\u30c9\u307e\u3067\u6307\u5b9a\u3059\u308b\u70b9\u3067\u3059\u3002\n\n>import java.security.InvalidKeyException;\n>import java.security.NoSuchAlgorithmException;\n>import java.security.InvalidAlgorithmParameterException;\n>import javax.crypto.BadPaddingException;\n>import javax.crypto.Cipher;\n>import javax.crypto.IllegalBlockSizeException;\n>import javax.crypto.NoSuchPaddingException;\n>import javax.crypto.spec.IvParameterSpec;\n>import javax.crypto.spec.SecretKeySpec;\n>\n>\n>// \u25a0 CBC\u306b\u3088\u308b\u6697\u53f7\u5316\u51e6\u7406\n>//\u3000- buf \uff1a\u6697\u53f7\u5316\u5bfe\u8c61\n>//\u3000- key\uff1a\u5171\u901a\u9375\n>//\u3000- iv\u3000\uff1a\u521d\u671f\u5316\u30d9\u30af\u30c8\u30eb(IV)\n>public static byte[] cipherEncrypt(byte[] buf, String key, String iv){\n>\n>\u3000try {\n>\u3000\u3000// \u79d8\u5bc6\u9375\u306e\u751f\u6210\n>\u3000\u3000SecretKeySpec sksSpec = new SecretKeySpec(key.getBytes(), \"AES\");\n>\u3000\u3000// IV\u306e\u751f\u6210\n>\u3000\u3000IvParameterSpec ivSpec = new IvParameterSpec(iv.getBytes());\n>\u3000\u3000// Cipher\u30af\u30e9\u30b9\u306e\u521d\u671f\u5316\n>\u3000\u3000Cipher cipher = Cipher.getInstance(\"AES/CBC/PKCS7Padding\");**\u2190\u2605\u30dd\u30a4\u30f3\u30c8**\n>\u3000\u3000cipher.init(Cipher.ENCRYPT_MODE, sksSpec, ivSpec);\n>\u3000\u3000// \u6697\u53f7\u5316\n>\u3000\u3000return cipher.doFinal(buf);\n>\u3000\u3000\u3000\u3000} catch (NoSuchAlgorithmException e) {\n>\u3000\u3000\u3000\u3000} catch (NoSuchPaddingException e) {\n>\u3000\u3000\u3000\u3000} catch (InvalidKeyException e) {\n>\u3000\u3000\u3000\u3000} catch (IllegalBlockSizeException e) {\n>\u3000\u3000\u3000\u3000} catch (BadPaddingException e) {\n>\u3000\u3000\u3000\u3000} catch (InvalidAlgorithmParameterException e) {\n>\u3000\u3000\u3000\u3000} finally {\n>\u3000\u3000\u3000\u3000}\n>\u3000\u3000return null;\n>}\n\n---\n\u203b\u3053\u306e\u8a18\u4e8b\u304c\u53c2\u8003\u306b\u306a\u3063\u305f\uff01\u3068\u3044\u3046\u65b9\u306f\u662f\u975e\u300c\u30b9\u30c8\u30c3\u30af\u300d\u304a\u9858\u3044\u3057\u307e\u3059 :ok_hand:\n", "tags": ["Android", "Java", "\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3"]}