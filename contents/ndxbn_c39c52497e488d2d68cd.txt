{"tags": ["Redis", "SortedSet"], "context": "\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306eZUNIONSTORE\u3068ZINTERSTORE\u306b\u66f8\u3044\u3066\u3042\u308b\u3051\u308c\u3069\u3001\u56f3\u89e3\u3057\u306a\u3044\u3068\u308f\u304b\u308a\u306b\u304f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u524d\u63d0\n\n\u79c1\u306eSortedSet\u306b\u5bfe\u3059\u308b\u7406\u89e3\u306e\u4ed5\u65b9\u306b\u3064\u3044\u3066\n\u79c1\u306f\u3001SortedSet\u3092\u3053\u306e\u3088\u3046\u306b\u7406\u89e3\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u306e\u3064\u3082\u308a\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u30da\u30fc\u30b8\u3067\u4f7f\u7528\u3059\u308b\u3001\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\n\u8aac\u660e\u7528\u306b\u3001\u4e8b\u524d\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b2\u3064\u306eSortedSet\u30ec\u30b3\u30fc\u30c9\u3092\u6e96\u5099\u3057\u305f\u3053\u3068\u306b\u3057\u307e\u3059\u3002\nZADD zset1 1 \"one\"\nZADD zset1 2 \"two\"\nZADD zset1 3 \"three\"\n\nZADD zset2 11 \"one\"\nZADD zset2 33 \"three\"\nZADD zset2 44 \"four\"\n\n\u8868\u306b\u3059\u308b\u3068\u3001\u5404\u30ec\u30b3\u30fc\u30c9\uff08\u5909\u6570\uff09\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\u7e26\u8ef8\u306bkey\u3001\u6a2a\u8ef8\u306bmember\u3001\u5024\u304cScore\u3067\u3059\u3002\n\n\n\n\u2193member\uff3ckey\u2192\nzset1\nzset2\n\n\n\n\none\n1\n11\n\n\ntwo\n2\n(nil)\n\n\nthree\n3\n33\n\n\nfour\n(nil)\n44\n\n\n\n\n\u57fa\u672c\nUnion\uff08\u548c\u96c6\u5408\uff09\u3068\u304bIntersect\uff08\u5171\u901a\u96c6\u5408\uff09\u3092\u3057\u3066\u3001Store\uff08\u4fdd\u5b58\uff09\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u3060\u3068\u3001\u5404\u30ec\u30b3\u30fc\u30c9\u306b\u3042\u308bScore\u3092\u8db3\u3057\u7b97\u3057\u307e\u3059\u3002\n\u30df\u30cb\u30de\u30eb\u306a\u6587\u6cd5\u306f\u3001\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\nZUNIONSTORE destination numkeys key [key ...]\nZINTERSTORE destination numkeys key [key ...]\n\n\n\ndistination\u306f\u3001\u51fa\u529b\u5148\u306ekey\u540d\n\nnum\u306f\u3001Union\u30fbIntersect\u3057\u305f\u3044SortedSet\u306e\u6570\n\nkey\u306f\u3001Union\u30fbIntersect\u3057\u305f\u3044SortedSet\u306eKey\u540d\n\n\nZUNIONSTORE\uff08\u548c\u96c6\u5408\uff09\u306e\u4f8b\nZUNIONSTORE union1 2 zset1 zset2\n\n\u3053\u308c\u3092\u3084\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u8868\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\n\u2193member\uff3ckey\u2192\nzset1\nzset2\nunion1\n\n\n\n\none\n1\n11\n\u2192 12\n\n\ntwo\n2\n(nil)\n\u2192 2\n\n\nthree\n3\n33\n\u2192 39\n\n\nfour\n(nil)\n44\n\u2192 44\n\n\n\nSortedSet\u306f\u5e38\u306bScore\u3067\u30bd\u30fc\u30c8\u3055\u308c\u308b\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\nZRANGE union1 0 -1 WITHSCORES\n1) \"two\"\n2) \"2\"\n3) \"one\"\n4) \"12\"\n5) \"three\"\n6) \"36\"\n7) \"four\"\n8) \"44\"\n\n\nZINTERSTORE\uff08\u5171\u901a\u96c6\u5408\uff09\u306e\u4f8b\nZINTERSTORE inter1 2 zset1 zset2\n\n\u3053\u308c\u3092\u3084\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u8868\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\n\u2193member\uff3ckey\u2192\nzset1\nzset2\nunion1\n\n\n\n\none\n1\n11\n\u2192 12\n\n\ntwo\n2\n(nil)\n\u2192 (nil)\n\n\nthree\n3\n33\n\u2192 39\n\n\nfour\n(nil)\n4\n\u2192 (nil)\n\n\n\n\u3069\u3046\u306a\u3063\u3066\u308b\u304b\u3001\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\nZRANGE inter1 0 -1 WITHSCORES\n1) \"one\"\n2) \"12\"\n3) \"three\"\n4) \"36\"\n\n\n\u5404\u7a2e\u30aa\u30d7\u30b7\u30e7\u30f3\nUNION\u3068INTERSECT\u304c\u4f55\u304b\u306f\u308f\u304b\u3063\u305f\u3068\u601d\u3046\u306e\u3067\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u306fUNION\u3067\u8aac\u660e\u3057\u307e\u3059\u3002\uff08\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3082\u3001INTERSECT\u306e\u65b9\u306b\u306f\u300cUNION\u306e\u307b\u3046\u898b\u3066\u300d\u3063\u3066\u66f8\u3044\u3066\u3042\u308b\u3057\u3002\uff09\n\nWEIGHTS\u30aa\u30d7\u30b7\u30e7\u30f3\n\u5404key\u306b\u5bfe\u3059\u308bWEIGHTS\uff08\u91cd\u307f\uff09\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3059\u3002\uff08\u3053\u306e\u8aac\u660e\u308f\u304b\u308b\u306e\u304b\u2026\uff1f\uff09\nZUNIONSTORE\u3068ZINTERSTORE\u306b\u5bfe\u3059\u308bWEIGHTS\u306e\u6587\u6cd5\u306f\u3001\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\nZUNIONSTORE destination numkeys key [key ...] [WEIGHTS weight [weight ...]]\nZINTERSTORE destination numkeys key [key ...] [WEIGHTS weight [weight ...]]\n\n\u2026\u307e\u3041\u3001\u540c\u3058\u3067\u3059\u306a\u3002\n\n\nweight\u306f\u3001key\u3068\u540c\u3058\u6570\u306b\u306a\u308a\u307e\u3059\u3002\n\n\nWEIGHTS\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u3068\u3069\u3046\u306a\u308b\u304b\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3084\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nZUNIONSTORE union2 2 zset1 zset2 WEIGHTS 2 7\n\n\u3053\u308c\u3092\u3084\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u8868\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\n\u2193member\uff3ckey\u2192\nzset1\uff08\u00d72\uff09\nzset2\uff08\u00d77\uff09\nunion2\n\n\n\n\none\n1\u00d72\n11\u00d77\n\u2192 79\n\n\ntwo\n2\u00d72\n(nil)\n\u2192 4\n\n\nthree\n3\u00d72\n33\u00d77\n\u2192 237\n\n\nfour\n(nil)\n44\u00d77\n\u2192 308\n\n\n\nSortedSet\u306f\u3001Score\u3067\u5e38\u306b\u30bd\u30fc\u30c8\u3055\u308c\u308b\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\nZRANGE union2 0 -1 WITHSCORES\n1) \"two\"\n2) \"4\"\n3) \"one\"\n4) \"79\"\n5) \"three\"\n6) \"237\"\n7) \"four\"\n8) \"308\"\n\n\nAGGREGATE\u30aa\u30d7\u30b7\u30e7\u30f3\n\u300c\u57fa\u672c\u300d\u306e\u8aac\u660e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304d\u307e\u3057\u305f\u3002\n\n\u30c7\u30d5\u30a9\u3060\u3068\u3001\u5404\u30ec\u30b3\u30fc\u30c9\u306b\u3042\u308bScore\u3092\u8db3\u3057\u7b97\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u6319\u52d5\u3092\u5909\u66f4\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3059\u3002\n\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u6587\u6cd5\u306f\u3001\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\nZINTERSTORE destination numkeys key [key ...] [AGGREGATE SUM|MIN|MAX]\nZUNIONSTORE destination numkeys key [key ...] [AGGREGATE SUM|MIN|MAX]\n\n\u4f8b\u306b\u3088\u3063\u3066\u3001\u540c\u3058\u3067\u3059\u3002\n\nAGGREGATE\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u3068\u3069\u3046\u306a\u308b\u304b\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3084\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nZUNIONSTORE union3 2 zset1 zset2 AGGREGATE MIN\n\nAGGREGATE MIN \u3068\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u5c0f\u3055\u3044\u307b\u3046\u304c\u9078\u3070\u308c\u307e\u3059\u3002\n\n\n\n\u2193member\uff3ckey\u2192\nzset1\uff08\u00d72\uff09\nzset2\uff08\u00d77\uff09\nunion2\n\n\n\n\none\n1\n11\n\u2192 1\n\n\ntwo\n2\n(nil)\n\u2192 2\n\n\nthree\n3\n33\n\u2192 3\n\n\nfour\n(nil)\n44\n\u2192 44\n\n\n\nZRANGE union3 0 -1 WITHSCORES\n1) \"one\"\n2) \"1\"\n3) \"two\"\n4) \"2\"\n5) \"three\"\n6) \"3\"\n7) \"four\"\n8) \"44\"\n\n\n\u5168\u90e8\u5408\u308f\u305b\u3066\u307f\u308b\n\u6700\u5f8c\u306b\u30014\u3064\u306eSortedSet\u306b\u5bfe\u3057\u3066\u3001\u9069\u5f53\u306bWEIGHTS\u3068AGGREGATE MAX\u3092\u4f7f\u3063\u305f\u5834\u5408\u306e\u4f8b\u3092\u8f09\u305b\u3066\u304a\u304d\u307e\u3059\u3002\nZADD zset1 1 \"one\"\nZADD zset1 2 \"two\"\nZADD zset1 3 \"three\"\n\nZADD zset2 11 \"one\"\nZADD zset2 33 \"three\"\nZADD zset2 44 \"four\"\n\nZADD zset3 12 \"one\"\nZADD zset3 inf \"three\"\nZADD zset3 0 \"four\"\n\nZADD zset4 inf \"one\"\nZADD zset4 33 \"three\"\n\n\nZINTERSTORE inter4 4 zset1 zset2 zset3 zset4 WEIGHTS 13 1 1 0 AGGREGATE MAX\n\n\n\n\n\u2193member\uff3ckey\u2192\nzset1\uff08\u00d713\uff09\nzset2\uff08\u00d71\uff09\nzset3\uff08\u00d71\uff09\nzset4\uff08\u00d70\uff09\ninter4\n\n\n\n\none\n1\u00d713\n11\u00d71\n12\u00d71\ninf\u00d70\n\u219213\n\n\ntwo\n2\u00d713\n(nil)\n(nil)\n(nil)\n\u2192(nil)\n\n\nthree\n3\u00d713\n33\u00d71\ninf\u00d71\n33\u00d70\n\u2192 inf\n\n\nfour\n(nil)\n44\u00d713\n0\u00d71\n(nil)\n\u2192(nil)\n\n\n\nZRANGE inter4 0 -1 WITHSCORES\n1) \"one\"\n2) \"13\"\n3) \"three\"\n4) \"inf\"\n\n\u306a\u308b\u307b\u3069\u3001WEIGHTS\u306e\u6f14\u7b97\u7d50\u679c\u3067\u3001Score\u306e\u5927\u304d\u3055\u3092\u6bd4\u8f03\u3059\u308b\u3093\u3067\u3059\u306d\u3002\n\n\u304a\u308f\u308a\n[\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306eZUNIONSTORE](http://redis.io/commands/zunionstore)\u3068[ZINTERSTORE](http://redis.io/commands/zinterstore)\u306b\u66f8\u3044\u3066\u3042\u308b\u3051\u308c\u3069\u3001\u56f3\u89e3\u3057\u306a\u3044\u3068\u308f\u304b\u308a\u306b\u304f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n# \u524d\u63d0\n\n## \u79c1\u306eSortedSet\u306b\u5bfe\u3059\u308b\u7406\u89e3\u306e\u4ed5\u65b9\u306b\u3064\u3044\u3066\n\u79c1\u306f\u3001[SortedSet\u3092\u3053\u306e\u3088\u3046\u306b\u7406\u89e3\u3057\u3066\u3044\u308b](http://qiita.com/ndxbn/items/e4a25c14c275cb5356a1)\u306e\u3067\u3001\u305d\u306e\u3064\u3082\u308a\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n## \u3053\u306e\u30da\u30fc\u30b8\u3067\u4f7f\u7528\u3059\u308b\u3001\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\n\u8aac\u660e\u7528\u306b\u3001\u4e8b\u524d\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b2\u3064\u306eSortedSet\u30ec\u30b3\u30fc\u30c9\u3092\u6e96\u5099\u3057\u305f\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n```bash\nZADD zset1 1 \"one\"\nZADD zset1 2 \"two\"\nZADD zset1 3 \"three\"\n\nZADD zset2 11 \"one\"\nZADD zset2 33 \"three\"\nZADD zset2 44 \"four\"\n```\n\n\u8868\u306b\u3059\u308b\u3068\u3001\u5404\u30ec\u30b3\u30fc\u30c9\uff08\u5909\u6570\uff09\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u307e\u3059\u3002  \n\u7e26\u8ef8\u306b`key`\u3001\u6a2a\u8ef8\u306b`member`\u3001\u5024\u304c`Score`\u3067\u3059\u3002\n\n\u2193member\uff3ckey\u2192 | zset1 | zset2\n:-- | --: | --:\none | 1 | 11\ntwo | 2 | (nil)\nthree | 3 | 33\nfour | (nil) | 44\n\n\n# \u57fa\u672c\n[Union\uff08\u548c\u96c6\u5408\uff09\u3068\u304bIntersect\uff08\u5171\u901a\u96c6\u5408\uff09](http://www.geisya.or.jp/~mwm48961/koukou/s1set03.htm)\u3092\u3057\u3066\u3001Store\uff08\u4fdd\u5b58\uff09\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u3060\u3068\u3001\u5404\u30ec\u30b3\u30fc\u30c9\u306b\u3042\u308b`Score`\u3092\u8db3\u3057\u7b97\u3057\u307e\u3059\u3002  \n\u30df\u30cb\u30de\u30eb\u306a\u6587\u6cd5\u306f\u3001\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n> ZUNIONSTORE destination numkeys key [key ...]\n> ZINTERSTORE destination numkeys key [key ...]\n\n* `distination`\u306f\u3001\u51fa\u529b\u5148\u306e`key`\u540d\n* `num`\u306f\u3001Union\u30fbIntersect\u3057\u305f\u3044`SortedSet`\u306e\u6570\n* `key`\u306f\u3001Union\u30fbIntersect\u3057\u305f\u3044`SortedSet`\u306eKey\u540d\n\n### ZUNIONSTORE\uff08\u548c\u96c6\u5408\uff09\u306e\u4f8b\n\n```bash\nZUNIONSTORE union1 2 zset1 zset2\n```\n\n\u3053\u308c\u3092\u3084\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u8868\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u2193member\uff3ckey\u2192 | zset1 | zset2 | union1\n:-- | --: | --: | :-- |\none | 1 | 11 | \u2192 12\ntwo | 2 | (nil) | \u2192 2\nthree | 3 | 33 | \u2192 39\nfour | (nil) | 44 | \u2192 44\n\n`SortedSet`\u306f**\u5e38\u306b`Score`\u3067\u30bd\u30fc\u30c8\u3055\u308c\u308b**\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```bash\nZRANGE union1 0 -1 WITHSCORES\n1) \"two\"\n2) \"2\"\n3) \"one\"\n4) \"12\"\n5) \"three\"\n6) \"36\"\n7) \"four\"\n8) \"44\"\n```\n\n### ZINTERSTORE\uff08\u5171\u901a\u96c6\u5408\uff09\u306e\u4f8b\n\n```bash\nZINTERSTORE inter1 2 zset1 zset2\n```\n\n\u3053\u308c\u3092\u3084\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u8868\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u2193member\uff3ckey\u2192 | zset1 | zset2 | union1\n:-- | --: | --: | :-- |\none | 1 | 11 | \u2192 12\ntwo | 2 | (nil) | \u2192 (nil)\nthree | 3 | 33 | \u2192 39\nfour | (nil) | 4 | \u2192 (nil)\n\n\u3069\u3046\u306a\u3063\u3066\u308b\u304b\u3001\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash\nZRANGE inter1 0 -1 WITHSCORES\n1) \"one\"\n2) \"12\"\n3) \"three\"\n4) \"36\"\n```\n\n# \u5404\u7a2e\u30aa\u30d7\u30b7\u30e7\u30f3\nUNION\u3068INTERSECT\u304c\u4f55\u304b\u306f\u308f\u304b\u3063\u305f\u3068\u601d\u3046\u306e\u3067\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u306fUNION\u3067\u8aac\u660e\u3057\u307e\u3059\u3002\uff08\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3082\u3001INTERSECT\u306e\u65b9\u306b\u306f\u300cUNION\u306e\u307b\u3046\u898b\u3066\u300d\u3063\u3066\u66f8\u3044\u3066\u3042\u308b\u3057\u3002\uff09\n\n## WEIGHTS\u30aa\u30d7\u30b7\u30e7\u30f3\n\u5404`key`\u306b\u5bfe\u3059\u308b`WEIGHTS`\uff08\u91cd\u307f\uff09\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3059\u3002\uff08\u3053\u306e\u8aac\u660e\u308f\u304b\u308b\u306e\u304b\u2026\uff1f\uff09  \n`ZUNIONSTORE`\u3068`ZINTERSTORE`\u306b\u5bfe\u3059\u308b`WEIGHTS`\u306e\u6587\u6cd5\u306f\u3001\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n> ZUNIONSTORE destination numkeys key [key ...] [WEIGHTS weight [weight ...]]\n> ZINTERSTORE destination numkeys key [key ...] [WEIGHTS weight [weight ...]]\n\n\u2026\u307e\u3041\u3001\u540c\u3058\u3067\u3059\u306a\u3002\n\n* `weight`\u306f\u3001`key`\u3068\u540c\u3058\u6570\u306b\u306a\u308a\u307e\u3059\u3002\n\n#### WEIGHTS\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u3068\u3069\u3046\u306a\u308b\u304b\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3084\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```bash\nZUNIONSTORE union2 2 zset1 zset2 WEIGHTS 2 7\n```\n\n\u3053\u308c\u3092\u3084\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u8868\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u2193member\uff3ckey\u2192 | zset1\uff08\u00d72\uff09 | zset2\uff08\u00d77\uff09 | union2\n:-- | --: | --: | :-- |\none | 1\u00d72 | 11\u00d77 | \u2192 79\ntwo | 2\u00d72 | (nil) | \u2192 4\nthree | 3\u00d72 | 33\u00d77 | \u2192 237\nfour | (nil) | 44\u00d77 | \u2192 308\n\nSortedSet\u306f\u3001`Score`\u3067\u5e38\u306b\u30bd\u30fc\u30c8\u3055\u308c\u308b\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```bash\nZRANGE union2 0 -1 WITHSCORES\n1) \"two\"\n2) \"4\"\n3) \"one\"\n4) \"79\"\n5) \"three\"\n6) \"237\"\n7) \"four\"\n8) \"308\"\n```\n\n## AGGREGATE\u30aa\u30d7\u30b7\u30e7\u30f3\n\u300c\u57fa\u672c\u300d\u306e\u8aac\u660e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304d\u307e\u3057\u305f\u3002\n\n> \u30c7\u30d5\u30a9\u3060\u3068\u3001\u5404\u30ec\u30b3\u30fc\u30c9\u306b\u3042\u308bScore\u3092\u8db3\u3057\u7b97\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u6319\u52d5\u3092\u5909\u66f4\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3059\u3002  \n\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u6587\u6cd5\u306f\u3001\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n> ZINTERSTORE destination numkeys key [key ...] [AGGREGATE SUM|MIN|MAX]\n> ZUNIONSTORE destination numkeys key [key ...] [AGGREGATE SUM|MIN|MAX]\n\n\u4f8b\u306b\u3088\u3063\u3066\u3001\u540c\u3058\u3067\u3059\u3002\n\n#### AGGREGATE\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u3068\u3069\u3046\u306a\u308b\u304b\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3084\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```bash\nZUNIONSTORE union3 2 zset1 zset2 AGGREGATE MIN\n```\n\n`AGGREGATE MIN` \u3068\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u5c0f\u3055\u3044\u307b\u3046\u304c\u9078\u3070\u308c\u307e\u3059\u3002\n\n\u2193member\uff3ckey\u2192 | zset1\uff08\u00d72\uff09 | zset2\uff08\u00d77\uff09 | union2\n:-- | --: | --: | :-- |\none | **1** | 11 | \u2192 1\ntwo | **2** | (nil) | \u2192 2\nthree | **3** | 33 | \u2192 3\nfour | (nil) | **44** | \u2192 44\n\n```bash\nZRANGE union3 0 -1 WITHSCORES\n1) \"one\"\n2) \"1\"\n3) \"two\"\n4) \"2\"\n5) \"three\"\n6) \"3\"\n7) \"four\"\n8) \"44\"\n```\n\n# \u5168\u90e8\u5408\u308f\u305b\u3066\u307f\u308b\n\u6700\u5f8c\u306b\u30014\u3064\u306e`SortedSet`\u306b\u5bfe\u3057\u3066\u3001\u9069\u5f53\u306b`WEIGHTS`\u3068`AGGREGATE MAX`\u3092\u4f7f\u3063\u305f\u5834\u5408\u306e\u4f8b\u3092\u8f09\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n\n```bash\nZADD zset1 1 \"one\"\nZADD zset1 2 \"two\"\nZADD zset1 3 \"three\"\n\nZADD zset2 11 \"one\"\nZADD zset2 33 \"three\"\nZADD zset2 44 \"four\"\n\nZADD zset3 12 \"one\"\nZADD zset3 inf \"three\"\nZADD zset3 0 \"four\"\n\nZADD zset4 inf \"one\"\nZADD zset4 33 \"three\"\n\n\nZINTERSTORE inter4 4 zset1 zset2 zset3 zset4 WEIGHTS 13 1 1 0 AGGREGATE MAX\n```\n\n\u2193member\uff3ckey\u2192 | zset1\uff08\u00d713\uff09 | zset2\uff08\u00d71\uff09 | zset3\uff08\u00d71\uff09 | zset4\uff08\u00d70\uff09 | inter4\n:-- | --: | --: | --: | --: | :--\none | **1\u00d713** | 11\u00d71 | 12\u00d71 | inf\u00d70 | \u219213\ntwo | 2\u00d713 | (nil) | (nil) | (nil) | \u2192(nil)\nthree | 3\u00d713 | 33\u00d71 | **inf\u00d71** | 33\u00d70 | \u2192 inf\nfour | (nil) | 44\u00d713 | 0\u00d71 | (nil) | \u2192(nil)\n\n```bash\nZRANGE inter4 0 -1 WITHSCORES\n1) \"one\"\n2) \"13\"\n3) \"three\"\n4) \"inf\"\n```\n\n\u306a\u308b\u307b\u3069\u3001`WEIGHTS`\u306e\u6f14\u7b97\u7d50\u679c\u3067\u3001`Score`\u306e\u5927\u304d\u3055\u3092\u6bd4\u8f03\u3059\u308b\u3093\u3067\u3059\u306d\u3002\n\n\n# \u304a\u308f\u308a\n"}