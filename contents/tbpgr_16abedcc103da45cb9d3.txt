{"context": " More than 1 year has passed since last update.\n\nRuby + Heroku \u306e\u7121\u6599\u67a0\u3067 Twitter bot \u3092\u304a\u624b\u8efd\u306b\u4f5c\u6210(\u4f7f\u3044\u6368\u3066\u7de8) #heroku #twitter #ruby #bot\n\n \u6982\u8981\nRuby \u3067 Twitter bot \u3092\u4f5c\u6210(\u4f7f\u3044\u6368\u3066\u7de8)\n\n \u7d4c\u7def\nRuby \u306e\u30dc\u30c3\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e Ruboty \u3067 Twitter bot \u3092\u4f5c\u6210\u3057\u3088\u3046\u3068\u601d\u3063\u305f\u3068\u3053\u308d\u3001\ntwitter-adapter \u3092\u4fee\u6b63\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3068\u3044\u3046\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3057\u305f\u3002\n\u6642\u9593\u304c\u3067\u304d\u3066\u304b\u3089\u3001 twitter-adapter \u3092\u4fee\u6b63\u3057\u3066\u30d7\u30eb\u30ea\u30af\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u304c\u3001\n\u30dc\u30c3\u30c8\u7528\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3057\u307e\u3063\u305f\u3057\u3001\u3082\u3063\u305f\u3044\u306a\u3044\u306e\u3067\u5148\u306b\u7c21\u6613 bot \u3092\u4f5c\u6210\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3057\u305f\u3002\ntwitter-adapter \u304c\u76f4\u3063\u305f\u3089\u4eca\u30a8\u30f3\u30c8\u30ea\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u7834\u68c4\u3057\u3066 ruboty \u306b\u79fb\u884c\u3059\u308b\u4e88\u5b9a\u3067\u3059\u3002\n\u3069\u3046\u305b\u6368\u3066\u308b\u4e88\u5b9a\u306a\u306e\u3067\u3001\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u9762\u306a\u3069\u306f\u3042\u307e\u308a\u6c17\u306b\u304b\u3051\u305a\u6700\u4f4e\u9650\u52d5\u304f\u5185\u5bb9\u306b\u7559\u3081\u307e\u3059\u3002\n=> 2014/12/10\u8ffd\u8a18\u3002 ruboty twitter-adapter \u306e\u52d5\u4f5c\u78ba\u8a8d\u3068\u308c\u307e\u3057\u305f\u3002\u79c1\u306e\u52d8\u9055\u3044\u3067\u3001\u5229\u7528\u6cd5\u304c\u9593\u9055\u3063\u3066\u3044\u305f\u3060\u3051\u3067\u3057\u305f\u3002\n\u30dc\u30c3\u30c8\u7528\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u540d\u306b\u30e1\u30f3\u30b7\u30e7\u30f3\u3092\u9001\u308b\u5f62\u3067\u30b3\u30de\u30f3\u30c9\u3092\u53e9\u304f\u306e\u304b\u3068\u601d\u3063\u3066\u3044\u307e\u3057\u305f\u304c\u3001\n\u30a2\u30ab\u30a6\u30f3\u30c8\u540d\u3068\u306f\u95a2\u4fc2\u306a\u304f ruboty + \u30b3\u30de\u30f3\u30c9\u5185\u5bb9 \u3092\u53e9\u3051\u3070\u3044\u3044\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3057\u305f\u3002\n\n \u69cb\u6210\n\n\u30c7\u30d7\u30ed\u30a4\u5148\u306f Heroku\n\n\nHeroku \u306e\u767b\u9332, \u5229\u7528\u65b9\u6cd5\u306b\u95a2\u3057\u3066\u306f\u8a73\u3057\u304f\u66f8\u304b\u306a\u3044\u306e\u3067\u30b0\u30fc\u30b0\u30eb\u5148\u751f\u53c2\u7167\n\n\n\u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a\u306b dotenv gem \u3092\u5229\u7528\n\n\n \u624b\u9806\n\n \u30d5\u30a1\u30a4\u30eb\u69cb\u6210\n$tree\n.\n\u2520 .env\n\u2520 bot.rb\n\u2520 Gemfile\n\u2520 Gemfile.lock\n\u2520 LICENSE.txt # GitHub \u516c\u958b\u7528\n\u2520 Procfile\n\u2517 README.md # GitHub \u516c\u958b\u7528\n\n\n Gemfile \u306e\u4f5c\u6210\nbot \u306b\u95a2\u308f\u308b\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u306f bundler \u3067\u7ba1\u7406\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306f twitter \u306e\u30e9\u30a4\u30d6\u30e9\u30ea2\u3064\uff08 twitter, tweetstream \uff09\u3002\n\u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a\u7528\u306b dotenv\u3002\n\u5341\u5e72\u5341\u4e8c\u652f\u30fb\u5e72\u652f\u3092\u6271\u3046\u81ea\u4f5c gem \u306e eto \u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nsource \"https://rubygems.org\"\n\ngem \"dotenv\"\ngem \"twitter\"\ngem \"tweetstream\"\ngem 'eto'\n\n\n Dotenv \u306e\u8a2d\u5b9a\n\u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a\u306e\u305f\u3081 .env \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u3053\u3053\u306b\u3001 Twitter \u306e\u8a8d\u8a3c\u60c5\u5831\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30c8\u30fc\u30af\u30f3\u306e\u53d6\u5f97\u65b9\u6cd5\u306f\u3042\u3061\u3053\u3061\u306b\u60c5\u5831\u304c\u3042\u308b\u306e\u3067\u5272\u611b\u3002\nTWITTER_CONSUMER_KEY=your_consumer_key\nTWITTER_CONSUMER_SECRET=your_cunsumer_secret\nTWITTER_ACCESS_TOKEN=your_assecc_token\nTWITTER_ACCESS_TOKEN_SECRET=your_token_secret\n\n\n bot.rb \u306b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u8a18\u8ff0\ntweeter gem \u306b\u3064\u3044\u3066\u306f  tweeter\ntweeterstream gem \u306b\u3064\u3044\u3066\u306f  tweeterstream\neto gem \u306b\u3064\u3044\u3066\u306f  eto\n\u3092\u305d\u308c\u305e\u308c\u53c2\u7167\n# coding:utf-8\n\nrequire 'dotenv'\nrequire 'twitter'\nrequire 'tweetstream'\nrequire 'eto'\nrequire 'date'\n\nclass RobertGarcia\n  attr_accessor :client, :stream_client\n\n  def initialize\n    Dotenv.load\n    @client = new_tweet_client_instance\n    @stream_client = new_teetstreem_client_instance\n  end\n\n  def tweet(text)\n    @client.update(text)\n  end\n\n  def reply(text, target_id, tweet_id)\n    rep_text = \"@#{target_id} #{text}\"\n    @client.update(\"@#{target_id} #{text}\" ,{ in_reply_to_status_id: tweet_id } )\n  end\n\n  def favorite(tweet_id)\n    @client.favorite(tweet_id)\n  end\n\n  def retweet(tweet_id)\n    @client.retweet(tweet_id)\n  end\n\n  private\n\n  def new_tweet_client_instance\n    Twitter::REST::Client.new { |config|auth(config) }\n  end\n\n  def new_teetstreem_client_instance\n    TweetStream.configure do |config|\n      config.consumer_key        = ENV[\"TWITTER_CONSUMER_KEY\"]\n      config.consumer_secret     = ENV[\"TWITTER_CONSUMER_SECRET\"]\n      config.oauth_token         = ENV[\"TWITTER_ACCESS_TOKEN\"]\n      config.oauth_token_secret  = ENV[\"TWITTER_ACCESS_TOKEN_SECRET\"]\n      config.auth_method         = :oauth\n    end\n    TweetStream::Client.new\n  end\n\n  def auth(config)\n    config.consumer_key         = ENV[\"TWITTER_CONSUMER_KEY\"]\n    config.consumer_secret      = ENV[\"TWITTER_CONSUMER_SECRET\"]\n    config.access_token         = ENV[\"TWITTER_ACCESS_TOKEN\"]\n    config.access_token_secret  = ENV[\"TWITTER_ACCESS_TOKEN_SECRET\"]\n    config\n  end\nend\n\ndef current_time\n  DateTime.now.strftime('%Y/%m/%d %H:%M:%S')\nend\n\nrobert_garcia = RobertGarcia.new\nrobert_garcia.stream_client.on_timeline_status do |status|\n  begin\n    twitter_id = status.user.screen_name\n    # \u79c1\u306e\u30e1\u30a4\u30f3\u30a2\u30ab\u30a6\u30f3\u30c8\u4ee5\u5916\u304b\u3089\u306e\u30c4\u30a4\u30fc\u30c8\u306f\u7121\u8996\u3057\u307e\u3059\n    next unless twitter_id == 'tbpgr'\n    tweet = status.text\n    tweet = tweet.gsub(\"@tbpgr_bot\", '')\n    if /^\\s*\u5341\u4e8c\u652f (?<year>\\d{4})\\z/ =~ tweet\n      year = Regexp.last_match[:year]\n      eto = Eto.name(year.to_i)\n      robert_garcia.tweet \"\u897f\u66a6#{year}\u5e74 \u306e\u5341\u4e8c\u652f\u306f #{eto} \u5e74\"\n    elsif /^\\s*\u5341\u5e72\u5341\u4e8c\u652f (?<year>\\d{4})\\z/ =~ tweet\n      year = Regexp.last_match[:year]\n      eto = Eto.name(year.to_i, false )\n      robert_garcia.tweet \"\u897f\u66a6#{year}\u5e74 \u306e\u5341\u5e72\u5341\u4e8c\u652f\u306f #{eto} \u5e74\"\n    end\n  rescue\n    robert_garcia.tweet \"bad request #{current_time}\"\n  end\nend\n\nrobert_garcia.stream_client.userstream  do |tweet|\nend\n\n\n Procfile \u306b heroku \u306e\u8d77\u52d5\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3057\u307e\u3059\nbot: bundle exec ruby bot.rb\n\n\n git \u306b\u30b3\u30df\u30c3\u30c8\u3057\u307e\u3059\n$ git init\n$ git add -A\n$ git commit -m \"first commit\"\n\n\n Heroku \u306b\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\n\u203b heroku toolbelt \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3064\u3044\u3066\u306f Heroku \u306e Getting Started with Ruby on Heroku \u3092\u53c2\u7167 \n$ heroku login\n# remote \u306e\u8a2d\u5b9a\u306b heroku \u3092\u8ffd\u52a0\u3057\u307e\u3059\n$ heroku create tbpgrbot\n# \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092 heroku \u306b push \u3057\u307e\u3059\n$ git push heroku master\n# \u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a\n$ heroku config:add TWITTER_CONSUMER_KEY=your_consumer_key\n$ heroku config:add TWITTER_CONSUMER_SECRET=your_consumer_secret\n$ heroku config:add TWITTER_ACCESS_TOKEN=your_access_token\n$ heroku config:add TWITTER_ACCESS_TOKEN_SECRET=your_access_token_secret\n$ heroku ps:scale bot=1\n\n\n \u8a66\u884c\n\n\n \u88dc\u8db3\n\nbot \u306e\u5229\u7528\uff08 hubot / rubot \u3092\u9664\u304f \uff09\u306f\u521d\u3081\u3066\u306a\u306e\u3067\u8272\u3005\u3068\u4f5c\u6cd5\u7684\u306b\u9593\u9055\u3063\u3066\u3044\u308b\u3053\u3068\u306f\u3042\u308b\u304b\u3082\n\n\n \u53c2\u7167\n TbpgrBot GitHub\n# Ruby + Heroku \u306e\u7121\u6599\u67a0\u3067 Twitter bot \u3092\u304a\u624b\u8efd\u306b\u4f5c\u6210(\u4f7f\u3044\u6368\u3066\u7de8) #heroku #twitter #ruby #bot\n## <i class=\"fa fa-cubes\" style=\"font-size:1em;\"></i> \u6982\u8981\nRuby \u3067 Twitter bot \u3092\u4f5c\u6210(\u4f7f\u3044\u6368\u3066\u7de8)\n\n## <i class=\"fa fa-history\" style=\"font-size:1em;\"></i> \u7d4c\u7def\nRuby \u306e\u30dc\u30c3\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e Ruboty \u3067 Twitter bot \u3092\u4f5c\u6210\u3057\u3088\u3046\u3068\u601d\u3063\u305f\u3068\u3053\u308d\u3001\ntwitter-adapter \u3092\u4fee\u6b63\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3068\u3044\u3046\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3057\u305f\u3002\n\u6642\u9593\u304c\u3067\u304d\u3066\u304b\u3089\u3001 twitter-adapter \u3092\u4fee\u6b63\u3057\u3066\u30d7\u30eb\u30ea\u30af\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u304c\u3001\n\u30dc\u30c3\u30c8\u7528\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3057\u307e\u3063\u305f\u3057\u3001\u3082\u3063\u305f\u3044\u306a\u3044\u306e\u3067\u5148\u306b\u7c21\u6613 bot \u3092\u4f5c\u6210\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\ntwitter-adapter \u304c\u76f4\u3063\u305f\u3089\u4eca\u30a8\u30f3\u30c8\u30ea\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u7834\u68c4\u3057\u3066 ruboty \u306b\u79fb\u884c\u3059\u308b\u4e88\u5b9a\u3067\u3059\u3002\n\u3069\u3046\u305b\u6368\u3066\u308b\u4e88\u5b9a\u306a\u306e\u3067\u3001\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u9762\u306a\u3069\u306f\u3042\u307e\u308a\u6c17\u306b\u304b\u3051\u305a\u6700\u4f4e\u9650\u52d5\u304f\u5185\u5bb9\u306b\u7559\u3081\u307e\u3059\u3002\n\n=> 2014/12/10\u8ffd\u8a18\u3002 ruboty twitter-adapter \u306e\u52d5\u4f5c\u78ba\u8a8d\u3068\u308c\u307e\u3057\u305f\u3002\u79c1\u306e\u52d8\u9055\u3044\u3067\u3001\u5229\u7528\u6cd5\u304c\u9593\u9055\u3063\u3066\u3044\u305f\u3060\u3051\u3067\u3057\u305f\u3002\n\u30dc\u30c3\u30c8\u7528\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u540d\u306b\u30e1\u30f3\u30b7\u30e7\u30f3\u3092\u9001\u308b\u5f62\u3067\u30b3\u30de\u30f3\u30c9\u3092\u53e9\u304f\u306e\u304b\u3068\u601d\u3063\u3066\u3044\u307e\u3057\u305f\u304c\u3001\n\u30a2\u30ab\u30a6\u30f3\u30c8\u540d\u3068\u306f\u95a2\u4fc2\u306a\u304f ruboty + \u30b3\u30de\u30f3\u30c9\u5185\u5bb9 \u3092\u53e9\u3051\u3070\u3044\u3044\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3057\u305f\u3002\n\n## <i class=\"fa fa-cube\" style=\"font-size:1em;\"></i> \u69cb\u6210\n* \u30c7\u30d7\u30ed\u30a4\u5148\u306f Heroku\n    * Heroku \u306e\u767b\u9332, \u5229\u7528\u65b9\u6cd5\u306b\u95a2\u3057\u3066\u306f\u8a73\u3057\u304f\u66f8\u304b\u306a\u3044\u306e\u3067\u30b0\u30fc\u30b0\u30eb\u5148\u751f\u53c2\u7167\n* \u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a\u306b dotenv gem \u3092\u5229\u7528\n\n## <i class=\"fa fa-files-o\" style=\"font-size:1em;\"></i> \u624b\u9806\n### <i class=\"fa fa-tree\" style=\"font-size:1em;\"></i> \u30d5\u30a1\u30a4\u30eb\u69cb\u6210\n\n~~~bash\n$tree\n.\n\u2520 .env\n\u2520 bot.rb\n\u2520 Gemfile\n\u2520 Gemfile.lock\n\u2520 LICENSE.txt # GitHub \u516c\u958b\u7528\n\u2520 Procfile\n\u2517 README.md # GitHub \u516c\u958b\u7528\n~~~\n\n### <i class=\"fa fa-gear\" style=\"font-size:1em;\"></i> Gemfile \u306e\u4f5c\u6210\nbot \u306b\u95a2\u308f\u308b\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u306f bundler \u3067\u7ba1\u7406\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306f twitter \u306e\u30e9\u30a4\u30d6\u30e9\u30ea2\u3064\uff08 twitter, tweetstream \uff09\u3002\n\u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a\u7528\u306b dotenv\u3002\n\u5341\u5e72\u5341\u4e8c\u652f\u30fb\u5e72\u652f\u3092\u6271\u3046\u81ea\u4f5c gem \u306e eto \u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n~~~ruby\nsource \"https://rubygems.org\"\n\ngem \"dotenv\"\ngem \"twitter\"\ngem \"tweetstream\"\ngem 'eto'\n~~~\n\n### <i class=\"fa fa-gear\" style=\"font-size:1em;\"></i> Dotenv \u306e\u8a2d\u5b9a\n\u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a\u306e\u305f\u3081 .env \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u3053\u3053\u306b\u3001 Twitter \u306e\u8a8d\u8a3c\u60c5\u5831\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30c8\u30fc\u30af\u30f3\u306e\u53d6\u5f97\u65b9\u6cd5\u306f\u3042\u3061\u3053\u3061\u306b\u60c5\u5831\u304c\u3042\u308b\u306e\u3067\u5272\u611b\u3002\n\n~~~ruby\nTWITTER_CONSUMER_KEY=your_consumer_key\nTWITTER_CONSUMER_SECRET=your_cunsumer_secret\nTWITTER_ACCESS_TOKEN=your_assecc_token\nTWITTER_ACCESS_TOKEN_SECRET=your_token_secret\n~~~\n\n### <i class=\"fa fa-code\" style=\"font-size:1em;\"></i> bot.rb \u306b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u8a18\u8ff0\ntweeter gem \u306b\u3064\u3044\u3066\u306f <i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [tweeter](https://github.com/sferik/twitter)  \ntweeterstream gem \u306b\u3064\u3044\u3066\u306f <i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [tweeterstream](https://github.com/tweetstream/tweetstream)  \neto gem \u306b\u3064\u3044\u3066\u306f <i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [eto](https://github.com/tbpgr/eto)  \n\u3092\u305d\u308c\u305e\u308c\u53c2\u7167\n\n~~~ruby\n# coding:utf-8\n \nrequire 'dotenv'\nrequire 'twitter'\nrequire 'tweetstream'\nrequire 'eto'\nrequire 'date'\n\nclass RobertGarcia\n  attr_accessor :client, :stream_client\n\n  def initialize\n    Dotenv.load\n    @client = new_tweet_client_instance\n    @stream_client = new_teetstreem_client_instance\n  end\n\n  def tweet(text)\n    @client.update(text)\n  end\n\n  def reply(text, target_id, tweet_id)\n    rep_text = \"@#{target_id} #{text}\"\n    @client.update(\"@#{target_id} #{text}\" ,{ in_reply_to_status_id: tweet_id } )\n  end\n\n  def favorite(tweet_id)\n    @client.favorite(tweet_id)\n  end\n \n  def retweet(tweet_id)\n    @client.retweet(tweet_id)\n  end\n\n  private\n\n  def new_tweet_client_instance\n    Twitter::REST::Client.new { |config|auth(config) }\n  end\n\n  def new_teetstreem_client_instance\n    TweetStream.configure do |config|\n      config.consumer_key        = ENV[\"TWITTER_CONSUMER_KEY\"]\n      config.consumer_secret     = ENV[\"TWITTER_CONSUMER_SECRET\"]\n      config.oauth_token         = ENV[\"TWITTER_ACCESS_TOKEN\"]\n      config.oauth_token_secret  = ENV[\"TWITTER_ACCESS_TOKEN_SECRET\"]\n      config.auth_method         = :oauth\n    end\n    TweetStream::Client.new\n  end\n\n  def auth(config)\n    config.consumer_key         = ENV[\"TWITTER_CONSUMER_KEY\"]\n    config.consumer_secret      = ENV[\"TWITTER_CONSUMER_SECRET\"]\n    config.access_token         = ENV[\"TWITTER_ACCESS_TOKEN\"]\n    config.access_token_secret  = ENV[\"TWITTER_ACCESS_TOKEN_SECRET\"]\n    config\n  end\nend\n\ndef current_time\n  DateTime.now.strftime('%Y/%m/%d %H:%M:%S')\nend\n\nrobert_garcia = RobertGarcia.new\nrobert_garcia.stream_client.on_timeline_status do |status|\n  begin\n    twitter_id = status.user.screen_name\n    # \u79c1\u306e\u30e1\u30a4\u30f3\u30a2\u30ab\u30a6\u30f3\u30c8\u4ee5\u5916\u304b\u3089\u306e\u30c4\u30a4\u30fc\u30c8\u306f\u7121\u8996\u3057\u307e\u3059\n    next unless twitter_id == 'tbpgr'\n    tweet = status.text\n    tweet = tweet.gsub(\"@tbpgr_bot\", '')\n    if /^\\s*\u5341\u4e8c\u652f (?<year>\\d{4})\\z/ =~ tweet\n      year = Regexp.last_match[:year]\n      eto = Eto.name(year.to_i)\n      robert_garcia.tweet \"\u897f\u66a6#{year}\u5e74 \u306e\u5341\u4e8c\u652f\u306f #{eto} \u5e74\"\n    elsif /^\\s*\u5341\u5e72\u5341\u4e8c\u652f (?<year>\\d{4})\\z/ =~ tweet\n      year = Regexp.last_match[:year]\n      eto = Eto.name(year.to_i, false )\n      robert_garcia.tweet \"\u897f\u66a6#{year}\u5e74 \u306e\u5341\u5e72\u5341\u4e8c\u652f\u306f #{eto} \u5e74\"\n    end\n  rescue\n    robert_garcia.tweet \"bad request #{current_time}\"\n  end\nend\n\nrobert_garcia.stream_client.userstream  do |tweet|\nend\n~~~\n\n## <i class=\"fa fa-gear\" style=\"font-size:1em;\"></i> Procfile \u306b heroku \u306e\u8d77\u52d5\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3057\u307e\u3059\n\n~~~ruby\nbot: bundle exec ruby bot.rb\n~~~\n\n### <i class=\"fa fa-cube\" style=\"font-size:1em;\"></i> git \u306b\u30b3\u30df\u30c3\u30c8\u3057\u307e\u3059\n\n~~~bash\n$ git init\n$ git add -A\n$ git commit -m \"first commit\"\n~~~\n\n### <i class=\"fa fa-cloud-upload\" style=\"font-size:1em;\"></i> Heroku \u306b\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\n\u203b heroku toolbelt \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3064\u3044\u3066\u306f Heroku \u306e Getting Started with Ruby on Heroku \u3092\u53c2\u7167 \n\n~~~bash\n$ heroku login\n# remote \u306e\u8a2d\u5b9a\u306b heroku \u3092\u8ffd\u52a0\u3057\u307e\u3059\n$ heroku create tbpgrbot\n# \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092 heroku \u306b push \u3057\u307e\u3059\n$ git push heroku master\n# \u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a\n$ heroku config:add TWITTER_CONSUMER_KEY=your_consumer_key\n$ heroku config:add TWITTER_CONSUMER_SECRET=your_consumer_secret\n$ heroku config:add TWITTER_ACCESS_TOKEN=your_access_token\n$ heroku config:add TWITTER_ACCESS_TOKEN_SECRET=your_access_token_secret\n$ heroku ps:scale bot=1\n~~~\n\n### <i class=\"fa fa-image\" style=\"font-size:1em;\"></i> \u8a66\u884c\n![reply.png](https://qiita-image-store.s3.amazonaws.com/0/43480/1e5a1e09-c0b2-80b4-9ac9-da8f9f92a335.png)\n\n## <i class=\"fa fa-plus\" style=\"font-size:1em;\"></i> \u88dc\u8db3\n* bot \u306e\u5229\u7528\uff08 hubot / rubot \u3092\u9664\u304f \uff09\u306f\u521d\u3081\u3066\u306a\u306e\u3067\u8272\u3005\u3068\u4f5c\u6cd5\u7684\u306b\u9593\u9055\u3063\u3066\u3044\u308b\u3053\u3068\u306f\u3042\u308b\u304b\u3082\n\n## <i class=\"fa fa-arrow-circle-right\" style=\"font-size:1em;\"></i> \u53c2\u7167\n<i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [TbpgrBot GitHub](https://github.com/tbpgr/ruby_twibot)\n", "tags": ["Ruby", "Heroku", "Twitter", "bot"]}