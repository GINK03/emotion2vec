{"context": " More than 1 year has passed since last update.\u3053\u306e\u8a18\u4e8b\u3092\u81ea\u5206\u5411\u3051\u306b\u3057\u305f\u3082\u306e\u3067\u3059\u3002\n\u65b0\u3057\u3044\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u3089\u306a\u304f\u3066\u3088\u3044\u306e\u3067\u697d\u304b\u306a\u3068\u2026\n\n\u5bfe\u8c61\n\ncocos2d-x 3.2.0\nXcode 6.1\nEclipse Juno (Android Developer Tools) \n\n\niOS\u5bfe\u5fdc\ncocos2d_libs.xcodeproj\u306e\u6b21\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\nplatform/ios/CCApplication\n// CCApplication.h\n\nclass CC_DLL Application : public ApplicationProtocol {\n\npublic:\n  void openURL(const char* url);\n\n};\n\n// CCApplication.mm\nvoid Application::openURL(const char *urlStr) {\n    NSString* str = [NSString stringWithUTF8String:urlStr];\n    NSURL* url = [NSURL URLWithString:str];\n    [[UIApplication sharedApplication] openURL:url];\n}\n\n\nAndroid\u5bfe\u5fdc\ncocos2d/cocos/platform/android\u306e\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3068src\u306ejava\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n// CCApplication.h\n\nclass CC_DLL Application : public ApplicationProtocol {\n  virtual void openURL(const char* pszUrl);\n};\n\n\n// CCApplication.cpp\n\nvoid Application::openURL(const char* pszUrl) {\n    JniMethodInfo minfo;\n    if(JniHelper::getStaticMethodInfo(minfo,\n        \"org/cocos2dx/cpp/AppActivity\",\n        \"openURL\",\n        \"(Ljava/lang/String;)V\"))\n    {\n        jstring StringArg1 = minfo.env->NewStringUTF(pszUrl);\n        minfo.env->CallStaticVoidMethod(minfo.classID, minfo.methodID, StringArg1);\n        minfo.env->DeleteLocalRef(StringArg1);\n        minfo.env->DeleteLocalRef(minfo.classID);\n    }\n}\n\n// /src org.cocos2dx.cpp.AppActivity.java\n\npublic class AppActivity extends Cocos2dxActivity {\n\nprivate static AppActivity me = null;\n\n    protected void onCreate(Bundle savedInstanceState) {\n       super.onCreate(savedInstanceState);\n        me = this;   // => added!\n    }\n\n    public static void openURL(String url) { \n        Intent i = new Intent(Intent.ACTION_VIEW);  \n        i.setData(Uri.parse(url));\n        me.startActivity(i);\n    }\n}\n\n\n\u5229\u7528\u4f8b\n// SampleScene.cpp\n\nvoid SampleScene::tapped(Ref* pSender) {\n  Application::getInstance()->openURL(\"http://www.abc.def/~~~\");\n}\n\n\n[\u3053\u306e\u8a18\u4e8b](http://discuss.cocos2d-x.org/t/opening-urls-in-external-browser/2642)\u3092\u81ea\u5206\u5411\u3051\u306b\u3057\u305f\u3082\u306e\u3067\u3059\u3002\n\n\u65b0\u3057\u3044\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u3089\u306a\u304f\u3066\u3088\u3044\u306e\u3067\u697d\u304b\u306a\u3068\u2026\n\n\n# \u5bfe\u8c61\n\n- cocos2d-x 3.2.0\n- Xcode 6.1\n- Eclipse Juno (Android Developer Tools) \n\n# iOS\u5bfe\u5fdc\n\ncocos2d_libs.xcodeproj\u306e\u6b21\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n## platform/ios/CCApplication\n\n\n```c++\n// CCApplication.h\n\nclass CC_DLL Application : public ApplicationProtocol {\n\npublic:\n  void openURL(const char* url);\n\n};\n```\n\n```objc\n// CCApplication.mm\nvoid Application::openURL(const char *urlStr) {\n    NSString* str = [NSString stringWithUTF8String:urlStr];\n    NSURL* url = [NSURL URLWithString:str];\n    [[UIApplication sharedApplication] openURL:url];\n}\n```\n\n# Android\u5bfe\u5fdc\n\ncocos2d/cocos/platform/android\u306e\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3068src\u306ejava\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n\n```c++\n// CCApplication.h\n\nclass CC_DLL Application : public ApplicationProtocol {\n  virtual void openURL(const char* pszUrl);\n};\n\n```\n\n```c++\n// CCApplication.cpp\n\nvoid Application::openURL(const char* pszUrl) {\n    JniMethodInfo minfo;\n    if(JniHelper::getStaticMethodInfo(minfo,\n        \"org/cocos2dx/cpp/AppActivity\",\n        \"openURL\",\n        \"(Ljava/lang/String;)V\"))\n    {\n        jstring StringArg1 = minfo.env->NewStringUTF(pszUrl);\n        minfo.env->CallStaticVoidMethod(minfo.classID, minfo.methodID, StringArg1);\n        minfo.env->DeleteLocalRef(StringArg1);\n        minfo.env->DeleteLocalRef(minfo.classID);\n    }\n}\n```\n\n```java\n// /src org.cocos2dx.cpp.AppActivity.java\n\npublic class AppActivity extends Cocos2dxActivity {\n\nprivate static AppActivity me = null;\n\n    protected void onCreate(Bundle savedInstanceState) {\n       super.onCreate(savedInstanceState);\n        me = this;   // => added!\n    }\n    \n    public static void openURL(String url) { \n        Intent i = new Intent(Intent.ACTION_VIEW);  \n        i.setData(Uri.parse(url));\n        me.startActivity(i);\n    }\n}\n```\n\n# \u5229\u7528\u4f8b\n\n```c++\n// SampleScene.cpp\n\nvoid SampleScene::tapped(Ref* pSender) {\n  Application::getInstance()->openURL(\"http://www.abc.def/~~~\");\n}\n```\n\n", "tags": ["cocos2d-x", "iOS", "Android"]}