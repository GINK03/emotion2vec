{"context": "MacBook\u3092\u4f7f\u3046\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\u8005\u3068\u3057\u3066\u6642\u3005\u56f0\u308b\u3053\u3068\u306f\u3001Windows\u3068Linux(Redhat\u7cfb)\u3057\u304b\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044GUI\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u308f\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u304f\u306a\u3063\u305f\u6642\u3067\u3059\u3002\u305d\u3093\u306a\u6a5f\u4f1a\u306f\u7a00\u3067\u3059\u304c\u3001\u305d\u3046\u3044\u3046\u30cb\u30fc\u30ba\u304c\u672c\u5f53\u306b\u305f\u307e\u306b\u3042\u308a\u307e\u3059\u3002\u305d\u3093\u306a\u6642\u306e\u305f\u3081\u306eVagrantfile\u304c\u3053\u3061\u3089\u3002\n\nVagrantfile\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\n$script = <<SCRIPT\n\nyum -y groupinstall \"GNOME Desktop\"\nsystemctl set-default graphical.target\nsystemctl start graphical.target\n\nSCRIPT\n\nVagrant.configure(2) do |config|\n  config.vm.box = \"bento/centos-7.2\"\n\n  config.vm.provider \"virtualbox\" do |v|\n    v.memory = \"2048\"\n    v.gui = true\n    v.customize [\"modifyvm\", :id, '--audio', 'coreaudio', '--audiocontroller', 'ac97']\n    v.customize [\"modifyvm\", :id, '--vram', '256']\n  end\n\n  config.vm.provision \"shell\", inline: $script\n\nend\n\n\u30e6\u30fc\u30b6\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u3069\u3061\u3089\u3082vagrant\u3067\u3059\u3002\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u74b0\u5883\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u6e08\u3093\u3060\u5f8c\u306f\u30e9\u30a4\u30bb\u30f3\u30b9\u306b\u540c\u610f\u3059\u308b\u624b\u9806\u3092\u8e0f\u307e\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u304c\u3001GUI\u306a\u306e\u3067next\u3001next\u3067\u7c21\u5358\u306b\u6e08\u307f\u307e\u3059\u3002\n\n\u30ab\u30fc\u30cd\u30eb\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u5f8c\u306eVirtualBox Guest Additions\u306b\u3064\u3044\u3066\n\u521d\u56de\u306eyum update\u306b\u306f\u30ab\u30fc\u30cd\u30eb\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u304c\u3064\u304d\u3082\u306e\u3067\u3059\u304c\u3001\u30ab\u30fc\u30cd\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u5909\u308f\u308b\u3068VirtualBox Guest Additions\u304c\u4f7f\u3048\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u305d\u3046\u306a\u308b\u3068\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u30b5\u30a4\u30ba\u306e\u8abf\u7bc0\u304c\u51fa\u6765\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u305d\u3093\u306a\u6642\u306fvagrant-vbguest\u3092\u4f7f\u3046\u304b\u3001\u3082\u3057\u304f\u306fvagrant ssh\u3067VM\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u4e0b\u8a18\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3068\u5927\u4e08\u592b\u3067\u3059\u3002\n#!/bin/bash\n\nset -e\n\nyum -y install gcc kernel-devel\nwget http://download.virtualbox.org/virtualbox/5.1.0_RC1/VBoxGuestAdditions_5.1.0_RC1.iso\nsudo mount VBoxGuestAdditions_5.1.0_RC1.iso /mnt -o loop\nsudo /mnt/VBoxLinuxAdditions.run\nsudo umount /mnt\nrm VBoxGuestAdditions_5.1.0_RC1.iso\nsudo yum clean all\nsudo reboot\n\n\n\u30a4\u30e1\u30fc\u30b8\u3092\u4fdd\u5b58\u3059\u308b\n\u30a4\u30e1\u30fc\u30b8\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u304c\u5b8c\u4e86\u3057\u305f\u3089\u305d\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u30ed\u30fc\u30ab\u30eb\u306b\u4fdd\u5b58\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002\u305d\u3046\u3057\u3066\u304a\u3051\u3070vagrant destroy\u5f8c\u306b\u307e\u305f\u30a4\u30c1\u304b\u3089\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u308a\u76f4\u3059\u5fc5\u8981\u304c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n## Step 1. \u3072\u3068\u307e\u305assh\u30ad\u30fc\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u306b\u623b\u3057\u307e\u3059\u3002\u3053\u3046\u3057\u3066\u304a\u304f\u3068\u65b0\u898f\u306b\n## vagrant up\u3057\u305f\u6642\u306bVagrant\u304c\u65b0\u3057\u3044\u9375\u3067\u30ea\u30bb\u30c3\u30c8\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n$ vagrant ssh\n$ wget https://raw.githubusercontent.com/mitchellh/vagrant/master/keys/vagrant.pub -N -O .ssh/authorized_keys\n$ exit\n\n## Step 2. \u30ed\u30fc\u30ab\u30eb\u306evagrant box\u3068\u3057\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002\n$ VBoxManage list vms\n$ vagrant package --base <\u30a4\u30e1\u30fc\u30b8\u306e\u30d5\u30eb\u30cd\u30fc\u30e0> --output /tmp/centos-7-desktop.box\n$ vagrant destroy\n$ vagrant box add centos-7-desktop /tmp/centos-7-desktop.box\n$ rm /tmp/centos-7-desktop.box\n\n\nNOTE: Step 1\u3067ssh\u30ad\u30fc\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u306b\u623b\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u3001\u65b0\u3057\u3044box\u3067\u4f5c\u3063\u305fVM\u306bvagrant ssh\u3067\u304d\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\n\n\u30ed\u30fc\u30ab\u30eb\u306b\u4fdd\u5b58\u3057\u305f\u5f8c\u306eVagrantfile\n\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u5f8c\u306e\u30a4\u30e1\u30fc\u30b8\u3092vagrant box\u3068\u3057\u3066\u4fdd\u5b58\u3057\u305f\u5f8c\u306f\u4e0b\u8a18\u306eVagrantfile\u3067\u6c17\u8efd\u306bCentOS 7\u306e\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a4\u30e1\u30fc\u30b8\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\nVagrant.configure(2) do |config|\n  config.vm.box = \"centos-7-desktop\"\n\n  config.vm.provider \"virtualbox\" do |v|\n    v.memory = \"2048\"\n    v.gui = true\n    v.customize [\"modifyvm\", :id, '--audio', 'coreaudio', '--audiocontroller', 'ac97']\n    v.customize [\"modifyvm\", :id, '--vram', '256']\n  end\n\nend\n\n\u3053\u3046\u3044\u3046\u30a4\u30e1\u30fc\u30b8\u304c\u624b\u5143\u306b\u3042\u308b\u3068\u3001\u3068\u304d\u3069\u304d\u4fbf\u5229\u3067\u3059\u3002\nMacBook\u3092\u4f7f\u3046\u30b7\u30b9\u30c6\u30e0\u7ba1\u7406\u8005\u3068\u3057\u3066\u6642\u3005\u56f0\u308b\u3053\u3068\u306f\u3001Windows\u3068Linux(Redhat\u7cfb)\u3057\u304b\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044GUI\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u308f\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u304f\u306a\u3063\u305f\u6642\u3067\u3059\u3002\u305d\u3093\u306a\u6a5f\u4f1a\u306f\u7a00\u3067\u3059\u304c\u3001\u305d\u3046\u3044\u3046\u30cb\u30fc\u30ba\u304c\u672c\u5f53\u306b\u305f\u307e\u306b\u3042\u308a\u307e\u3059\u3002\u305d\u3093\u306a\u6642\u306e\u305f\u3081\u306eVagrantfile\u304c\u3053\u3061\u3089\u3002\n\n## Vagrantfile\n\n```ruby\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\n$script = <<SCRIPT\n\nyum -y groupinstall \"GNOME Desktop\"\nsystemctl set-default graphical.target\nsystemctl start graphical.target\n\nSCRIPT\n\nVagrant.configure(2) do |config|\n  config.vm.box = \"bento/centos-7.2\"\n\n  config.vm.provider \"virtualbox\" do |v|\n    v.memory = \"2048\"\n    v.gui = true\n    v.customize [\"modifyvm\", :id, '--audio', 'coreaudio', '--audiocontroller', 'ac97']\n    v.customize [\"modifyvm\", :id, '--vram', '256']\n  end\n\n  config.vm.provision \"shell\", inline: $script\n\nend\n```\n\n\u30e6\u30fc\u30b6\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u3069\u3061\u3089\u3082vagrant\u3067\u3059\u3002\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u74b0\u5883\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u6e08\u3093\u3060\u5f8c\u306f\u30e9\u30a4\u30bb\u30f3\u30b9\u306b\u540c\u610f\u3059\u308b\u624b\u9806\u3092\u8e0f\u307e\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u304c\u3001GUI\u306a\u306e\u3067`next`\u3001`next`\u3067\u7c21\u5358\u306b\u6e08\u307f\u307e\u3059\u3002\n\n## \u30ab\u30fc\u30cd\u30eb\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u5f8c\u306eVirtualBox Guest Additions\u306b\u3064\u3044\u3066\n\n\u521d\u56de\u306e`yum update`\u306b\u306f\u30ab\u30fc\u30cd\u30eb\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u304c\u3064\u304d\u3082\u306e\u3067\u3059\u304c\u3001\u30ab\u30fc\u30cd\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u5909\u308f\u308b\u3068VirtualBox Guest Additions\u304c\u4f7f\u3048\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u305d\u3046\u306a\u308b\u3068\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u30b5\u30a4\u30ba\u306e\u8abf\u7bc0\u304c\u51fa\u6765\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u305d\u3093\u306a\u6642\u306f[vagrant-vbguest](https://github.com/dotless-de/vagrant-vbguest)\u3092\u4f7f\u3046\u304b\u3001\u3082\u3057\u304f\u306f`vagrant ssh`\u3067VM\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u4e0b\u8a18\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3068\u5927\u4e08\u592b\u3067\u3059\u3002\n\n```\n#!/bin/bash\n\nset -e\n\nyum -y install gcc kernel-devel\nwget http://download.virtualbox.org/virtualbox/5.1.0_RC1/VBoxGuestAdditions_5.1.0_RC1.iso\nsudo mount VBoxGuestAdditions_5.1.0_RC1.iso /mnt -o loop\nsudo /mnt/VBoxLinuxAdditions.run\nsudo umount /mnt\nrm VBoxGuestAdditions_5.1.0_RC1.iso\nsudo yum clean all\nsudo reboot\n```\n\n## \u30a4\u30e1\u30fc\u30b8\u3092\u4fdd\u5b58\u3059\u308b\n\n\u30a4\u30e1\u30fc\u30b8\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u304c\u5b8c\u4e86\u3057\u305f\u3089\u305d\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u30ed\u30fc\u30ab\u30eb\u306b\u4fdd\u5b58\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002\u305d\u3046\u3057\u3066\u304a\u3051\u3070`vagrant destroy`\u5f8c\u306b\u307e\u305f\u30a4\u30c1\u304b\u3089\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u308a\u76f4\u3059\u5fc5\u8981\u304c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\n```\n## Step 1. \u3072\u3068\u307e\u305assh\u30ad\u30fc\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u306b\u623b\u3057\u307e\u3059\u3002\u3053\u3046\u3057\u3066\u304a\u304f\u3068\u65b0\u898f\u306b\n## vagrant up\u3057\u305f\u6642\u306bVagrant\u304c\u65b0\u3057\u3044\u9375\u3067\u30ea\u30bb\u30c3\u30c8\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n$ vagrant ssh\n$ wget https://raw.githubusercontent.com/mitchellh/vagrant/master/keys/vagrant.pub -N -O .ssh/authorized_keys\n$ exit\n\n## Step 2. \u30ed\u30fc\u30ab\u30eb\u306evagrant box\u3068\u3057\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002\n$ VBoxManage list vms\n$ vagrant package --base <\u30a4\u30e1\u30fc\u30b8\u306e\u30d5\u30eb\u30cd\u30fc\u30e0> --output /tmp/centos-7-desktop.box\n$ vagrant destroy\n$ vagrant box add centos-7-desktop /tmp/centos-7-desktop.box\n$ rm /tmp/centos-7-desktop.box\n```\n\n> **NOTE:** Step 1\u3067ssh\u30ad\u30fc\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u306b\u623b\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u3001\u65b0\u3057\u3044box\u3067\u4f5c\u3063\u305fVM\u306b`vagrant ssh`\u3067\u304d\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\n## \u30ed\u30fc\u30ab\u30eb\u306b\u4fdd\u5b58\u3057\u305f\u5f8c\u306eVagrantfile\n\n\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u5f8c\u306e\u30a4\u30e1\u30fc\u30b8\u3092`vagrant box`\u3068\u3057\u3066\u4fdd\u5b58\u3057\u305f\u5f8c\u306f\u4e0b\u8a18\u306eVagrantfile\u3067\u6c17\u8efd\u306bCentOS 7\u306e\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a4\u30e1\u30fc\u30b8\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\nVagrant.configure(2) do |config|\n  config.vm.box = \"centos-7-desktop\"\n\n  config.vm.provider \"virtualbox\" do |v|\n    v.memory = \"2048\"\n    v.gui = true\n    v.customize [\"modifyvm\", :id, '--audio', 'coreaudio', '--audiocontroller', 'ac97']\n    v.customize [\"modifyvm\", :id, '--vram', '256']\n  end\n\nend\n```\n\n\u3053\u3046\u3044\u3046\u30a4\u30e1\u30fc\u30b8\u304c\u624b\u5143\u306b\u3042\u308b\u3068\u3001\u3068\u304d\u3069\u304d\u4fbf\u5229\u3067\u3059\u3002\n", "tags": ["vagrant", "MacBook", "Vagrantfile"]}