{"tags": ["Unity", "Shader", "ImageEffect"], "context": "\n\n\u3067\u304d\u308b\u3082\u306e\n\n\u30a8\u30ea\u30a2\u30fb\u30b9\u30c6\u30fc\u30b8\u9593\u306e\u9077\u79fb\u306b\u4f7f\u3048\u305d\u3046\u3002\n\u5c11\u306a\u304f\u3068\u3082\u4e00\u77ac\u3067\u30d1\u30c3\u3068\u5909\u308f\u308b\u3088\u308a\u306f\u30de\u30b7\u304b\u306a\u3041?\n\u5c11\u3057\u3044\u3058\u308c\u3070\u56de\u60f3\u30b7\u30fc\u30f3\u306a\u3093\u304b\u306b\u3082\u4f7f\u3048\u307e\u3059\n(\u30b9\u30af\u30ea\u30d7\u30c8\u304b\u3089\u9032\u884c\u5ea6\u5408\u3044\u306e\u5024\u3092\u5165\u308c\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u8a73\u3057\u304f\u306f\u3053\u3053)\n(\u305d\u308c\u304c\u5acc\u306a\u3089_Time.y\u306b\u6f14\u7b97\u3092\u5c11\u3057\u65bd\u3057\u3066\u4f7f\u3046\u3068\u3044\u3044\u304b\u3082\u3067\u3059\u3002)\n\n\u30b3\u30fc\u30c9\nShader \"Original/NewImageEffectShader 3\"\n{\n    Properties\n    {\n        _MainTex (\"Texture\", 2D) = \"white\" {}\n        percent (\"percent\", Range(0.0, 1.0)) = 0 \n    }\n    SubShader\n    {\n        // No culling or depth\n        Cull Off ZWrite Off ZTest Always\n        CGINCLUDE\n        int xor128(int b, int c){ \n            int x=1234567 * b * c,y=362436036,z=521288629,w=886751 * (_Time.y % 128); \n            int t; \n            t=(x^(x<<11));x=y;y=z;z=w; return( w=(w^(w>>19))^(t^(t>>8)) ); \n        } \n        uniform float percent;\n        ENDCG\n        Pass\n        {\n            CGPROGRAM\n            #pragma vertex vert\n            #pragma fragment frag\n\n            #include \"UnityCG.cginc\"\n\n            struct appdata\n            {\n                float4 vertex : POSITION;\n                float2 uv : TEXCOORD0;\n            };\n\n            struct v2f\n            {\n                float2 uv : TEXCOORD0;\n                float4 vertex : SV_POSITION;\n            };\n\n            v2f vert (appdata v)\n            {\n                v2f o;\n                o.vertex = mul(UNITY_MATRIX_MVP, v.vertex);\n                o.uv = v.uv;\n                return o;\n            }\n\n            sampler2D _MainTex;\n\n            fixed4 frag (v2f i) : SV_Target\n            {\n                fixed4 col = tex2D(_MainTex, i.uv);\n                i.uv.x++;\n                i.uv.y++;\n                i.uv *= 3;\n                float rand = (float)xor128(i.uv.x * 100 + 1, i.uv.y * 100 + 1) % 10000 / 10000;\n                col *= step(percent, rand);\n                return col;\n            }\n            ENDCG\n        }\n    }\n}\n\n\n\n\u4ed5\u7d44\u307f\nxor128\u3068\u3044\u3046\u95a2\u6570\u304c\u30e9\u30f3\u30c0\u30e0\u306e\u95a2\u6570\u306a\u306e\u3067%\u306a\u3069\u3092\u4f7f\u30440~1\u306e\u7bc4\u56f2\u306b\u3057\u305f\u5f8cstep\u95a2\u6570\u3067\u771f\u3063\u9ed2\u306e\u5834\u6240\u3092\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002\ni.uv\u306b\u304b\u3051\u308b\u5024\u3092\u5909\u3048\u308c\u3070\u30ce\u30a4\u30ba\u306e\u89e3\u50cf\u5ea6\u3092\u5909\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u53c2\u8003\n\u3059\u3054\u3044\u4e71\u6570\u751f\u6210\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u300cxorshift\u300d\n#\u3067\u304d\u308b\u3082\u306e\n![1\u6708-29-2017 12-13-24.gif](https://qiita-image-store.s3.amazonaws.com/0/113509/85a17a6c-8b87-4040-8aa3-6f2178c9769e.gif)\n\u30a8\u30ea\u30a2\u30fb\u30b9\u30c6\u30fc\u30b8\u9593\u306e\u9077\u79fb\u306b\u4f7f\u3048\u305d\u3046\u3002\n\u5c11\u306a\u304f\u3068\u3082\u4e00\u77ac\u3067\u30d1\u30c3\u3068\u5909\u308f\u308b\u3088\u308a\u306f\u30de\u30b7\u304b\u306a\u3041?\n\u5c11\u3057\u3044\u3058\u308c\u3070\u56de\u60f3\u30b7\u30fc\u30f3\u306a\u3093\u304b\u306b\u3082\u4f7f\u3048\u307e\u3059\n(\u30b9\u30af\u30ea\u30d7\u30c8\u304b\u3089\u9032\u884c\u5ea6\u5408\u3044\u306e\u5024\u3092\u5165\u308c\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u8a73\u3057\u304f\u306f[\u3053\u3053](http://qiita.com/torumu106/items/20fcb7590f653695f26f))\n(\u305d\u308c\u304c\u5acc\u306a\u3089_Time.y\u306b\u6f14\u7b97\u3092\u5c11\u3057\u65bd\u3057\u3066\u4f7f\u3046\u3068\u3044\u3044\u304b\u3082\u3067\u3059\u3002)\n#\u30b3\u30fc\u30c9\n```\nShader \"Original/NewImageEffectShader 3\"\n{\n\tProperties\n\t{\n\t\t_MainTex (\"Texture\", 2D) = \"white\" {}\n\t\tpercent (\"percent\", Range(0.0, 1.0)) = 0 \n\t}\n\tSubShader\n\t{\n\t\t// No culling or depth\n\t\tCull Off ZWrite Off ZTest Always\n\t\tCGINCLUDE\n\t\tint xor128(int b, int c){ \n\t\t    int x=1234567 * b * c,y=362436036,z=521288629,w=886751 * (_Time.y % 128); \n\t    \tint t; \n    \t\tt=(x^(x<<11));x=y;y=z;z=w; return( w=(w^(w>>19))^(t^(t>>8)) ); \n\t\t} \n\t\tuniform float percent;\n\t\tENDCG\n\t\tPass\n\t\t{\n\t\t\tCGPROGRAM\n\t\t\t#pragma vertex vert\n\t\t\t#pragma fragment frag\n\t\t\t\n\t\t\t#include \"UnityCG.cginc\"\n\n\t\t\tstruct appdata\n\t\t\t{\n\t\t\t\tfloat4 vertex : POSITION;\n\t\t\t\tfloat2 uv : TEXCOORD0;\n\t\t\t};\n\n\t\t\tstruct v2f\n\t\t\t{\n\t\t\t\tfloat2 uv : TEXCOORD0;\n\t\t\t\tfloat4 vertex : SV_POSITION;\n\t\t\t};\n\n\t\t\tv2f vert (appdata v)\n\t\t\t{\n\t\t\t\tv2f o;\n\t\t\t\to.vertex = mul(UNITY_MATRIX_MVP, v.vertex);\n\t\t\t\to.uv = v.uv;\n\t\t\t\treturn o;\n\t\t\t}\n\t\t\t\n\t\t\tsampler2D _MainTex;\n\n\t\t\tfixed4 frag (v2f i) : SV_Target\n\t\t\t{\n\t\t\t\tfixed4 col = tex2D(_MainTex, i.uv);\n\t\t\t\ti.uv.x++;\n\t\t\t\ti.uv.y++;\n\t\t\t\ti.uv *= 3;\n\t\t\t\tfloat rand = (float)xor128(i.uv.x * 100 + 1, i.uv.y * 100 + 1) % 10000 / 10000;\n\t\t\t\tcol *= step(percent, rand);\n\t\t\t\treturn col;\n\t\t\t}\n\t\t\tENDCG\n\t\t}\n\t}\n}\n\n```\n#\u4ed5\u7d44\u307f\nxor128\u3068\u3044\u3046\u95a2\u6570\u304c\u30e9\u30f3\u30c0\u30e0\u306e\u95a2\u6570\u306a\u306e\u3067%\u306a\u3069\u3092\u4f7f\u30440~1\u306e\u7bc4\u56f2\u306b\u3057\u305f\u5f8cstep\u95a2\u6570\u3067\u771f\u3063\u9ed2\u306e\u5834\u6240\u3092\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002\ni.uv\u306b\u304b\u3051\u308b\u5024\u3092\u5909\u3048\u308c\u3070\u30ce\u30a4\u30ba\u306e\u89e3\u50cf\u5ea6\u3092\u5909\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n#\u53c2\u8003\n[\u3059\u3054\u3044\u4e71\u6570\u751f\u6210\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u300cxorshift\u300d](http://d.hatena.ne.jp/pashango_p/20090717/1247848900)\n"}