{"context": " More than 1 year has passed since last update.\u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u4e00\u3064\u3067\u3042\u308bCppUTest\u3092\u5b9f\u6a5f\uff08STM32F4DISCOVERY\uff09\u3067\u52d5\u4f5c\u3055\u305b\u3066\u307f\u308b\u3002\n\n\u6e96\u5099\n\n\u30bf\u30fc\u30b2\u30c3\u30c8\u3068\u30b5\u30f3\u30d7\u30eb\n\u30bf\u30fc\u30b2\u30c3\u30c8\u306fCortex-M4\u30b3\u30a2\u306eSTMicro\u793e\u88fd\u30de\u30a4\u30af\u30ed\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9STM32F407VG\u3092\u642d\u8f09\u3057\u305f\u300cSTM32F4DISCOVERY\u300d\u3068\u3059\u308b\u3002\u30bf\u30fc\u30b2\u30c3\u30c8\u57fa\u677f\u306e\u8a73\u7d30\u306f\u3053\u306e\u8fba\u308a\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3002\u3053\u306e\u30da\u30fc\u30b8\u4e0b\u90e8\u306b\u3042\u308b\u300cRelated Tools and Software\u300d\u3068\u3044\u3046\u9805\u76ee\u304c\u3042\u308a\u3001\u305d\u3053\u306b\u3042\u308b\u30d5\u30a1\u30fc\u30e0\u30a6\u30a7\u30a2\u30d1\u30c3\u30b1\u30fc\u30b8STSW-STM32068\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u9032\u3081\u308b\u4e8b\u3068\u3059\u308b\u3002\u30af\u30ea\u30c3\u30af\u3057\u3066\u30ea\u30f3\u30af\u3092\u9032\u3080\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8AN3983: STM32F4DISCOVERY peripheral firmware examples\u3068\u30b5\u30f3\u30d7\u30eb\uff08Part Number : STSW-STM32068\uff09\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u30dc\u30bf\u30f3\u304c\u3042\u308b\u306e\u3067\u3001\u30af\u30ea\u30c3\u30af\u3057\u3066\u300cstsw-stm32068.zip\u300d\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u5168\u3066\u89e3\u51cd\u3057\u3066\u3082\u826f\u3044\u304c\u3001\u3053\u3053\u3067\u306f\u6b21\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff08\u2606\u30de\u30fc\u30af\u306e\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u5168\u3066\uff09\u306e\u307f\u89e3\u51cd\u3057\u305f\u3082\u306e\u3068\u3057\u3066\u9032\u3081\u308b\u3002\u306a\u304a\u3001\u89e3\u51cd\u5834\u6240\u306f\u4efb\u610f\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u826f\u3044\u304c\u3001\u3053\u3053\u3067\u306f\u4fbf\u5b9c\u7684\u306bsample_root\u306b\u89e3\u51cd\u3057\u305f\u3082\u306e\u3068\u3059\u308b\u3002\nsample_root\n\u251c\u2500Libraries\n\u2502  \u251c\u2500CMSIS\n\u2502  \u2502  \u251c\u2500Include \u2606\n\u2502  \u2502  \u251c\u2500Lib \u2606\n\u2502  \u2502  \u2514\u2500ST \u2606\n\u2502  \u251c\u2500STM32F4xx_StdPeriph_Driver \u2606\n\u2502  \u251c\u2500STM32_USB_Device_Library \u2606\n\u2502  \u2514\u2500STM32_USB_OTG_Driver \u2606\n\u251c\u2500Project\n\u2502  \u251c\u2500Demonstration \u2606\n\u2502  \u251c\u2500Master_Workspace\n\u2502  \u2502  \u2514\u2500EWARM \u2606\n\u2502  \u2514\u2500Peripheral_Examples\n\u2502      \u2514\u2500IO_Toggle \u2606\n\u2514\u2500Utilities\n    \u2514\u2500STM32F4-Discovery \u2606\n\n\n\u958b\u767a\u74b0\u5883\n\u4eca\u56de\u3001\u958b\u767a\u74b0\u5883\u306fIAR\u793e\u306eEmbedded Workbench\u3092\u4f7f\u7528\u3057\u3001\u307e\u305a\u306f\u30b3\u30fc\u30c9\u5236\u9650\u4ed8\u304d\u306e\u8a55\u4fa1\u7248\u3067\u53ef\u80fd\u304b\u3069\u3046\u304b\u691c\u8a3c\u3057\u3066\u307f\u308b\u3002Embedded Workbench ver.6.6 for ARM\uff08\u4ee5\u4e0b\u3001EWARM\uff09\u3092\u3053\u306e\u8fba\u308a\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u3066\u3001IAR\u793e\u304b\u3089\u30e9\u30a4\u30bb\u30f3\u30b9\u3092\u53d6\u5f97\u3059\u308b\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u53ca\u3073\u30e9\u30a4\u30bb\u30f3\u30b9\u306e\u53d6\u5f97\u306b\u95a2\u3059\u308b\u90e8\u5206\u306f\u3053\u306e\u8fba\u308a\u3084\u3053\u306e\u8fba\u308a\u304c\u53c2\u8003\u306b\u306a\u308b\u3002\n\n\u30ef\u30fc\u30af\u30b9\uff0d\u30da\u30fc\u30b9\n\u30de\u30b9\u30bf\u30fc\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3092\u958b\u304f\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u7b49\u304b\u3089\u6b21\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u3051\u3070EWARM\u304c\u8d77\u52d5\u3059\u308b\u3002\nsample_root/Project/Master_Workspace/EWARM/STM32F4-Discovery.eww\n\u89e3\u51cd\u3057\u306a\u304b\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u3042\u308b\u5834\u5408\u306f\u8b66\u544a\u8868\u793a\u304c\u51fa\u308b\u306e\u3067\u5168\u3066OK\u3067\u5207\u308a\u629c\u3051\u308b\u3002\u6210\u529f\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u306e\u3092\u307f\u308b\u4e8b\u304c\u3067\u304d\u308b\u3002\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u300cSTM32F4-Discovery_Demo\u300d\u306f\u5de5\u5834\u51fa\u8377\u6642\u306b\u66f8\u304d\u8fbc\u307e\u308c\u3066\u3044\u308b\u3082\u306e\u3068\u540c\u3058\u3067\u3042\u308b\uff08\u3068\u601d\u3046\uff09\u3002\u6700\u5f8c\u306b\u5143\u306b\u623b\u3057\u3066\u304a\u304f\u305f\u3081\u306b\u7d44\u307f\u8fbc\u3093\u3067\u3044\u308b\u3002\u4eca\u56de\u3001\u30d9\u30fc\u30b9\u306b\u3059\u308b\u306e\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u300cIO_Toggle\u300d\u3067\u3001LED\u3092ON/OFF\u3059\u308b\u3060\u3051\u306e\u5358\u7d14\u306a\u3082\u306e\u3067\u3042\u308b\u3002\u3053\u3053\u3067\u305d\u308c\u305e\u308c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53f3\u30af\u30ea\u30c3\u30af\u304b\u3089make\u3092\u5b9f\u884c\u3057\u30d3\u30eb\u30c9\u304c\u6210\u529f\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304f\u3068\u826f\u3044\u3002\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u751f\u6210\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\nProject \u21d2 Create New Project\u3092\u9078\u3093\u3067\u65b0\u898f\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\u3059\u308b\u3002\n\n\u30c4\u30fc\u30eb\u30c1\u30a7\u30fc\u30f3\u306fARM\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f Empty project \u3092\u9078\u3093\u3067OK\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u3001\u7a7a\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u683c\u7d0d\u5834\u6240\u3092\u805e\u3044\u3066\u304f\u308b\u304c\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u306f\u81ea\u52d5\u7684\u306b\u6c7a\u5b9a\u3055\u308c\u306a\u3044\u306e\u3067\u81ea\u529b\u3067\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u3092\u69cb\u7bc9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\u30d5\u30a9\u30eb\u30c0\u306e\u4f5c\u6210\u7b49\u3092\u99c6\u4f7f\u3057\u3064\u3064\u6b21\u306e\u3088\u3046\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u3092\u69cb\u7bc9\u3057\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u6c7a\u3081\u3066\u78ba\u5b9a\u3059\u308b\u3002\n\u7d9a\u3044\u3066\u3001\u30d5\u30a1\u30a4\u30eb\u3092CppUTest\u304b\u3089\u30b3\u30d4\u30fc\u3059\u308b\u3002\n\u251c\u2500include\n\u2502  \u251c\u2500CppUTest\n\u2502  \u2502      CommandLineArguments.h\n\u2502  \u2502      CommandLineTestRunner.h\n\u2502  \u2502      JUnitTestOutput.h\n\u2502  \u2502      MemoryLeakAllocator.h\n\u2502  \u2502      MemoryLeakDetector.h\n\u2502  \u2502      MemoryLeakDetectorMallocMacros.h\n\u2502  \u2502      MemoryLeakDetectorNewMacros.h\n\u2502  \u2502      MemoryLeakWarningPlugin.h\n\u2502  \u2502      PlatformSpecificFunctions.h\n\u2502  \u2502      SimpleString.h\n\u2502  \u2502      TestFailure.h\n\u2502  \u2502      TestHarness.h\n\u2502  \u2502      TestHarness_c.h\n\u2502  \u2502      TestOutput.h\n\u2502  \u2502      TestPlugin.h\n\u2502  \u2502      TestRegistry.h\n\u2502  \u2502      TestResult.h\n\u2502  \u2502      TestTestingFixture.h\n\u2502  \u2502      Utest.h\n\u2502  \u2502      UtestMacros.h\n\u2502  \u2502      VirtualCall.h\n\u2502  \u2514\u2500Platforms\n\u2502      \u2514\u2500Gcc\n\u2502              Platform.h\n\u2514\u2500src\n    \u251c\u2500CppUTest\n    \u2502      CommandLineArguments.cpp\n    \u2502      CommandLineTestRunner.cpp\n    \u2502      JUnitTestOutput.cpp\n    \u2502      MemoryLeakAllocator.cpp\n    \u2502      MemoryLeakDetector.cpp\n    \u2502      MemoryLeakWarningPlugin.cpp\n    \u2502      SimpleString.cpp\n    \u2502      TestFailure.cpp\n    \u2502      TestHarness_c.cpp\n    \u2502      TestOutput.cpp\n    \u2502      TestPlugin.cpp\n    \u2502      TestRegistry.cpp\n    \u2502      TestResult.cpp\n    \u2502      Utest.cpp\n    \u2514\u2500Platforms\n        \u2514\u2500Iar\n                UtestPlatform.cpp\n\n\n\u30d5\u30a1\u30a4\u30eb\u306e\u8ffd\u52a0\n\u5206\u304b\u308a\u3084\u3059\u3044\u3088\u3046\u306bGroup\u3092\u8ffd\u52a0\u3057\u3066\u304a\u304f\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53f3\u30af\u30ea\u30c3\u30af\u304b\u3089\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30e1\u30cb\u30e5\u30fc\u3092\u958b\u304d\u3001Add\u21d2Add Group\u3092\u9078\u3076\u3002\n\n\u3053\u3053\u3067\u306f\u30b0\u30eb\u30fc\u30d7\u540d\u3092 Src \u3068\u3057\u305f\u3002OK\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u3066\u78ba\u5b9a\u3059\u308b\u3002\n\n\u7d9a\u3044\u3066\u8ffd\u52a0\u3057\u305f\u30b0\u30eb\u30fc\u30d7\u3092\u53f3\u30af\u30ea\u30c3\u30af\u304b\u3089\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30e1\u30cb\u30e5\u30fc\u3092\u958b\u304d\u3001Add\u21d2Add Files\u3067\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u30c0\u30a4\u30a2\u30ed\u30b0\u3092\u958b\u304f\u3002\n\n\u5148\u307b\u3069\u30b3\u30d4\u30fc\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u9078\u629e\u3057\u3066\u8ffd\u52a0\u3059\u308b\u3002\n\n\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u56fa\u6709\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3082\u8ffd\u52a0\u3059\u308b\u3002\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u306a\u3069\u306e\u9055\u3044\u306b\u3088\u308atolower()\u95a2\u6570\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb\u304c\u7570\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306esrc/Platforms/Iar/UtestPlatform.cpp\u3092\u958b\u304d\u3001\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u306bctype.h\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\nUtestPlatform.cpp\n#include <ctype.h>\n\n\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53f3\u30af\u30ea\u30c3\u30af\u304b\u3089option\u3092\u9078\u3076\u3002\u5148\u305a\u306fGeneral Options\u304b\u3089\u8a2d\u5b9a\u3057\u3066\u3044\u304f\u3002Processor variant\u306fDevice\u3092\u9078\u629e\u3057\u3001\u53f3\u306e\u30dc\u30bf\u30f3\u62bc\u4e0b\u3067\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30e1\u30cb\u30e5\u30fc\u3092\u958b\u304d\u3001ST \u21d2 STM32F407 \u21d2 ST STM32F407VG\u3068\u9078\u629e\u3059\u308b\u3002\n\nOutput file\u306f Library \u3092\u9078\u629e\u3059\u308b\u3002\n\nUse CMSIS\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u308b\u3002\n\nCategory\u3067C/C++ Compiler\u3092\u9078\u3073\u3001Language\u3092 C++ \u3001C++ dialect\u3067 C++ \u3092\u9078\u629e\u3059\u308b\u3002\n\nEnable multibyte support\u306f\u30c1\u30a7\u30c3\u30af\u30de\u30fc\u30af\u304c\u5916\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\nOptimization\u3067\u306f\u30b5\u30a4\u30ba\u5236\u9650\u8a55\u4fa1\u7248\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u53ef\u80fd\u306a\u9650\u308a\u30b3\u30fc\u30c9\u30b5\u30a4\u30ba\u3092\u5c0f\u3055\u304f\u3059\u308b\u305f\u3081\u3001Level\u3092 High \u306b\u3057\u3066 Size \u512a\u5148\u3092\u9078\u629e\u3057\u3066\u304a\u304f\u3002\n\n\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u30d1\u30b9\u306b $PROJ_DIR$\\include \u3092\u901a\u3057\u3066\u304a\u304f\u3002OK\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u3066\u8a2d\u5b9a\u5185\u5bb9\u3092\u78ba\u5b9a\u3059\u308b\u3002\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53f3\u30af\u30ea\u30c3\u30af\u304b\u3089make\u3092\u8d77\u52d5\u3059\u308b\u3068\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u751f\u6210\u3055\u308c\u308b\u300230\u500b\u304f\u3089\u3044\u8b66\u544a\u304c\u51fa\u308b\u304c\u4eca\u56de\u306f\u7121\u8996\u3057\u305f\u3002\n\n\n\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u306e\u4f5c\u6210\nIO_Toggle\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30a2\u30af\u30c6\u30a3\u30d6\u306b\u5207\u308a\u66ff\u3048\u308b\u3002\nC++\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u305f\u3081\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u542b\u307e\u308c\u308bmain.c\u3092main.cpp\u306b\u5909\u66f4\u3059\u308b\u3002\u5b9f\u969b\u306b\u306fRemove\u3057\u3066\u540d\u524d\u3092\u5909\u66f4\u3057\u3066\u304b\u3089Add\u3059\u308b\u3002\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\n\u30b3\u30f3\u30d1\u30a4\u30e9\u306e\u6307\u5b9a\u3092 C++ \u306b\u5909\u66f4\u3059\u308b\u3002\n\n\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u30d1\u30b9\u306b $PROJ_DIR$\\..\\..\\..\\Test_Framework\\CppUTest\\include \u3092\u8ffd\u52a0\u3002\n\nLinker\u306e\u8a2d\u5b9a\u3067Linker configuration file\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u3066\u500b\u5225\u8a2d\u5b9a\u3059\u308b\u3002Edit\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u3066Linker configuration file editor\u3092\u958b\u304f\u3002\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d2\u30fc\u30d7\u30b5\u30a4\u30ba\u3067\u306f\u4e0d\u8db3\u3059\u308b\u306e\u3067\u3053\u3053\u3067\u306f 0x2000 \u78ba\u4fdd\u3057\u3066\u3044\u308b\u3002Save\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u3001configuration file\u306b\u66f8\u304d\u8fbc\u3080\u3002\n\n\u8ffd\u52a0\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306b $PROJ_DIR$\\..\\..\\..\\Test_Framework\\CppUTest\\Debug\\Exe\\CppUTest.a \u3092\u52a0\u3048\u308b\u3002\n\nSTM32F4xx_StdPeriph_Driver\u306b\u3042\u308b stm32f4xx_usart.c \u3092\u8ffd\u52a0\u3002\n\n\n\u51fa\u529b\u5148\u3092\u30b7\u30ea\u30a2\u30eb\u306b\u3059\u308b\n\u30b7\u30ea\u30a2\u30eb\u3078\u306e\u63a5\u7d9a\u3053\u306e\u8fba\u308a\u3092\u53c2\u8003\u306b\u7d44\u307f\u8fbc\u3080\u3002\n\u3053\u306e\u8fba\u308a\u306b\u3082\u60c5\u5831\u304c\u3042\u308b\u3002\n\nmain.cpp\n#include <stdio.h>\n#include <CppUTest/CommandLineTestRunner.h>\n\nUSART_InitTypeDef USART_InitStructure;\n\nvoid USART_Configuration(void){\n  // sort out clocks\n  RCC_AHB1PeriphClockCmd( RCC_AHB1Periph_GPIOA, ENABLE);\n  RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART2, ENABLE);\n  /* Configure USART2 Tx (PA.02) as alternate function push-pull */\n  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;\n  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;\n  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;\n  GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;\n  GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;\n  GPIO_Init(GPIOA, &GPIO_InitStructure);\n  // Map USART2 to A.02\n  GPIO_PinAFConfig(GPIOA, GPIO_PinSource2, GPIO_AF_USART2);\n  // Initialize USART\n  USART_InitStructure.USART_BaudRate = 9600;\n  USART_InitStructure.USART_WordLength = USART_WordLength_8b;\n  USART_InitStructure.USART_StopBits = USART_StopBits_1;\n  USART_InitStructure.USART_Parity = USART_Parity_No;\n  USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;\n  USART_InitStructure.USART_Mode = USART_Mode_Tx;\n  /* Configure USART */\n  USART_Init(USART2, &USART_InitStructure);\n  /* Enable the USART */\n  USART_Cmd(USART2, ENABLE);\n}\n\n/**\n* @brief Function that printf uses to push characters to serial port\n* @param ch: ascii character\n* @retval character\n*/\nint putcharx(int ch)\n{\n  while (USART_GetFlagStatus(USART2, USART_FLAG_TXE) == RESET);\n  USART_SendData(USART2, (uint8_t)ch);\n  return ch;\n}\n\nint main(void)\n{\n  USART_Configuration();\n\n  static char *argv[] = { \"main\" };\n  CommandLineTestRunner::RunAllTests(sizeof(argv)/sizeof(*argv), argv);\n}\n\n\n\n\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u306e\u8a18\u8ff0\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306btest.cpp\u3092\u8ffd\u52a0\u3057\u3001\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u3092\u8a18\u8ff0\u3059\u308b\u3002\n\ntest.cpp\n#include <CppUTest/TestHarness.h>\n\nint hoge(void)\n{\n    return 3;\n}\n\nint hoge(int a)\n{\n    return a+1;\n}\n\nTEST_GROUP(TestSuiteHoge)\n{};\n\nTEST(TestSuiteHoge, TestCaseHoge)\n{\n    LONGS_EQUAL(3, hoge());\n}\n\nTEST(TestSuiteHoge, TestCaseHoge2)\n{\n    LONGS_EQUAL(3, hoge(2));\n}\n\n\n\n\u30d3\u30eb\u30c9\u3068\u5b9f\u884c\n\n\u30d3\u30eb\u30c9\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30e1\u30cb\u30e5\u30fc\u304b\u3089Make\u3092\u9078\u3093\u3067\u30d3\u30eb\u30c9\u3059\u308b\u3002\u30d3\u30eb\u30c9\u306b\u6210\u529f\u3059\u308c\u3070IO_Toggle.out\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n\n\u30c7\u30d0\u30c3\u30b0\u5b9f\u884c\nUSB\u30dd\u30fc\u30c8\u306bSTM32F4 DISCOVERY\u3092\u63a5\u7d9a\u3059\u308b\u3002\u521d\u3081\u3066\u63a5\u7d9a\u3057\u305f\u5834\u5408\u3084\u3001\u63a5\u7d9a\u3059\u308bUSB\u30dd\u30fc\u30c8\u3092\u5909\u66f4\u3057\u305f\u5834\u5408\u306fST-Link\u30c9\u30e9\u30a4\u30d0\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u304c\u5fc5\u8981\u306b\u306a\u308b\u3002ST-Link\u30c9\u30e9\u30a4\u30d0\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306b\u95a2\u3057\u3066\u306f\u3053\u306e\u8fba\u308a\u304c\u53c2\u8003\u306b\u306a\u308b\u3002\u4eca\u56de\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u74b0\u5883\u3067\u306f C:\\Program Files\\IAR Systems\\Embedded Workbench 6.5\\arm\\drivers\\ST-Link\\ST-Link_V2_USBdriver.exe \u3092\u5b9f\u884c\u3057\u305f\u3002\n\u6b63\u5e38\u306b\u30c7\u30d0\u30a4\u30b9\u304c\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3089\u3001IO_Toggle\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9078\u629e\u3057Project\u21d2Download and Debug\uff08Ctrl+D\uff09\u3092\u9078\u629e\u3059\u308b\u3002\u81ea\u52d5\u7684\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308cmain\u95a2\u6570\u3067\u4e00\u6642\u505c\u6b62\u3059\u308b\u3002\n\n\u30c6\u30b9\u30c8\u7d50\u679c\u3092\u8868\u793a\u3055\u305b\u308b\u305f\u3081\u3001View\u21d2Terminal I/O\u3067Terminal I/O\u30d3\u30e5\u30fc\u3092\u8868\u793a\u3057\u3066\u304a\u304f\u3002\n\nDebug\u21d2Go\uff08F5\uff09\u3067\u5b9f\u884c\u3059\u308b\u3068\u3001\u6b21\u306e\u3088\u3046\u306bTerminal I/O\u306b\u30c6\u30b9\u30c8\u7d50\u679c\u304c\u8868\u793a\u3055\u308c\u308b\u3002\n\n\n\u30b3\u30fc\u30c9\u30b5\u30a4\u30ba\n\u3061\u306a\u307f\u306b\u4eca\u56de\u306e\u5b9f\u88c5\u3067\u30b3\u30fc\u30c9\u30b5\u30a4\u30ba\u306f28.5KB\u7a0b\u5ea6\u3068\u306a\u3063\u305f\u3002\u30b3\u30fc\u30c9\u30b5\u30a4\u30ba\u9650\u5b9a\u7248\u3092\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u30b3\u30fc\u30c9\u30b5\u30a4\u30ba\u304c32KB\u4ee5\u4e0b\u306b\u306a\u3089\u306a\u3044\u3068\u30d3\u30eb\u30c9\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u6b8b\u308a3.5KB\u7a0b\u5ea6\u3068\u306a\u3063\u3066\u3044\u308b\u3002\n  29,163 bytes of readonly  code memory\n   6,073 bytes of readonly  data memory\n  19,136 bytes of readwrite data memory\n\n\u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u4e00\u3064\u3067\u3042\u308bCppUTest\u3092\u5b9f\u6a5f\uff08STM32F4DISCOVERY\uff09\u3067\u52d5\u4f5c\u3055\u305b\u3066\u307f\u308b\u3002\n\n#\u6e96\u5099\n\n##\u30bf\u30fc\u30b2\u30c3\u30c8\u3068\u30b5\u30f3\u30d7\u30eb\n\u30bf\u30fc\u30b2\u30c3\u30c8\u306fCortex-M4\u30b3\u30a2\u306eSTMicro\u793e\u88fd\u30de\u30a4\u30af\u30ed\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9STM32F407VG\u3092\u642d\u8f09\u3057\u305f\u300cSTM32F4DISCOVERY\u300d\u3068\u3059\u308b\u3002\u30bf\u30fc\u30b2\u30c3\u30c8\u57fa\u677f\u306e\u8a73\u7d30\u306f[\u3053\u306e\u8fba\u308a](http://www.st.com/web/catalog/tools/FM116/SC959/SS1532/PF252419)\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3002\u3053\u306e\u30da\u30fc\u30b8\u4e0b\u90e8\u306b\u3042\u308b\u300cRelated Tools and Software\u300d\u3068\u3044\u3046\u9805\u76ee\u304c\u3042\u308a\u3001\u305d\u3053\u306b\u3042\u308b\u30d5\u30a1\u30fc\u30e0\u30a6\u30a7\u30a2\u30d1\u30c3\u30b1\u30fc\u30b8[STSW-STM32068](http://www.st.com/web/en/catalog/tools/PF257904)\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u9032\u3081\u308b\u4e8b\u3068\u3059\u308b\u3002\u30af\u30ea\u30c3\u30af\u3057\u3066\u30ea\u30f3\u30af\u3092\u9032\u3080\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8[AN3983: STM32F4DISCOVERY peripheral firmware examples](http://www.st.com/st-web-ui/static/active/en/fragment/website_building_block/site_media/icon/pdf_icon.gif)\u3068\u30b5\u30f3\u30d7\u30eb\uff08Part Number : STSW-STM32068\uff09\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u30dc\u30bf\u30f3\u304c\u3042\u308b\u306e\u3067\u3001\u30af\u30ea\u30c3\u30af\u3057\u3066\u300cstsw-stm32068.zip\u300d\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u5168\u3066\u89e3\u51cd\u3057\u3066\u3082\u826f\u3044\u304c\u3001\u3053\u3053\u3067\u306f\u6b21\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff08\u2606\u30de\u30fc\u30af\u306e\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u5168\u3066\uff09\u306e\u307f\u89e3\u51cd\u3057\u305f\u3082\u306e\u3068\u3057\u3066\u9032\u3081\u308b\u3002\u306a\u304a\u3001\u89e3\u51cd\u5834\u6240\u306f\u4efb\u610f\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u826f\u3044\u304c\u3001\u3053\u3053\u3067\u306f\u4fbf\u5b9c\u7684\u306bsample_root\u306b\u89e3\u51cd\u3057\u305f\u3082\u306e\u3068\u3059\u308b\u3002\n\n```\nsample_root\n\u251c\u2500Libraries\n\u2502  \u251c\u2500CMSIS\n\u2502  \u2502  \u251c\u2500Include \u2606\n\u2502  \u2502  \u251c\u2500Lib \u2606\n\u2502  \u2502  \u2514\u2500ST \u2606\n\u2502  \u251c\u2500STM32F4xx_StdPeriph_Driver \u2606\n\u2502  \u251c\u2500STM32_USB_Device_Library \u2606\n\u2502  \u2514\u2500STM32_USB_OTG_Driver \u2606\n\u251c\u2500Project\n\u2502  \u251c\u2500Demonstration \u2606\n\u2502  \u251c\u2500Master_Workspace\n\u2502  \u2502  \u2514\u2500EWARM \u2606\n\u2502  \u2514\u2500Peripheral_Examples\n\u2502      \u2514\u2500IO_Toggle \u2606\n\u2514\u2500Utilities\n    \u2514\u2500STM32F4-Discovery \u2606\n```\n\n##\u958b\u767a\u74b0\u5883\n\u4eca\u56de\u3001\u958b\u767a\u74b0\u5883\u306fIAR\u793e\u306eEmbedded Workbench\u3092\u4f7f\u7528\u3057\u3001\u307e\u305a\u306f\u30b3\u30fc\u30c9\u5236\u9650\u4ed8\u304d\u306e\u8a55\u4fa1\u7248\u3067\u53ef\u80fd\u304b\u3069\u3046\u304b\u691c\u8a3c\u3057\u3066\u307f\u308b\u3002Embedded Workbench ver.6.6 for ARM\uff08\u4ee5\u4e0b\u3001EWARM\uff09\u3092[\u3053\u306e\u8fba\u308a](http://www.iar.com/jp/)\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u3066\u3001IAR\u793e\u304b\u3089\u30e9\u30a4\u30bb\u30f3\u30b9\u3092\u53d6\u5f97\u3059\u308b\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u53ca\u3073\u30e9\u30a4\u30bb\u30f3\u30b9\u306e\u53d6\u5f97\u306b\u95a2\u3059\u308b\u90e8\u5206\u306f[\u3053\u306e\u8fba\u308a](http://kowaimononantenai.blogspot.jp/2012/10/stm32f4-discovery-ewarm.html)\u3084[\u3053\u306e\u8fba\u308a](https://sites.google.com/site/stm32datasheet/home/dev-tools/iar-dev-tool)\u304c\u53c2\u8003\u306b\u306a\u308b\u3002\n\n##\u30ef\u30fc\u30af\u30b9\uff0d\u30da\u30fc\u30b9\n\u30de\u30b9\u30bf\u30fc\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3092\u958b\u304f\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u7b49\u304b\u3089\u6b21\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u3051\u3070EWARM\u304c\u8d77\u52d5\u3059\u308b\u3002\n`sample_root/Project/Master_Workspace/EWARM/STM32F4-Discovery.eww`\n\u89e3\u51cd\u3057\u306a\u304b\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u3042\u308b\u5834\u5408\u306f\u8b66\u544a\u8868\u793a\u304c\u51fa\u308b\u306e\u3067\u5168\u3066OK\u3067\u5207\u308a\u629c\u3051\u308b\u3002\u6210\u529f\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u306e\u3092\u307f\u308b\u4e8b\u304c\u3067\u304d\u308b\u3002\n ![image001.png](https://qiita-image-store.s3.amazonaws.com/0/21786/0a54d764-0ced-4d0e-65b0-d9d1b80acf50.png)\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u300cSTM32F4-Discovery_Demo\u300d\u306f\u5de5\u5834\u51fa\u8377\u6642\u306b\u66f8\u304d\u8fbc\u307e\u308c\u3066\u3044\u308b\u3082\u306e\u3068\u540c\u3058\u3067\u3042\u308b\uff08\u3068\u601d\u3046\uff09\u3002\u6700\u5f8c\u306b\u5143\u306b\u623b\u3057\u3066\u304a\u304f\u305f\u3081\u306b\u7d44\u307f\u8fbc\u3093\u3067\u3044\u308b\u3002\u4eca\u56de\u3001\u30d9\u30fc\u30b9\u306b\u3059\u308b\u306e\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u300cIO_Toggle\u300d\u3067\u3001LED\u3092ON/OFF\u3059\u308b\u3060\u3051\u306e\u5358\u7d14\u306a\u3082\u306e\u3067\u3042\u308b\u3002\u3053\u3053\u3067\u305d\u308c\u305e\u308c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53f3\u30af\u30ea\u30c3\u30af\u304b\u3089make\u3092\u5b9f\u884c\u3057\u30d3\u30eb\u30c9\u304c\u6210\u529f\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304f\u3068\u826f\u3044\u3002\n\n#\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u751f\u6210\n\n##\u30e9\u30a4\u30d6\u30e9\u30ea\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\nProject \u21d2 Create New Project\u3092\u9078\u3093\u3067\u65b0\u898f\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\u3059\u308b\u3002\n ![image003.png](https://qiita-image-store.s3.amazonaws.com/0/21786/5c325045-3a81-53ff-84b6-230a146e4bb3.png)\n\u30c4\u30fc\u30eb\u30c1\u30a7\u30fc\u30f3\u306fARM\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f **Empty project** \u3092\u9078\u3093\u3067OK\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u3001\u7a7a\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3002\n ![image005.png](https://qiita-image-store.s3.amazonaws.com/0/21786/525ce65c-c001-6fc4-8959-638c142d9ba1.png)\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u683c\u7d0d\u5834\u6240\u3092\u805e\u3044\u3066\u304f\u308b\u304c\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u306f\u81ea\u52d5\u7684\u306b\u6c7a\u5b9a\u3055\u308c\u306a\u3044\u306e\u3067\u81ea\u529b\u3067\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u3092\u69cb\u7bc9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\u30d5\u30a9\u30eb\u30c0\u306e\u4f5c\u6210\u7b49\u3092\u99c6\u4f7f\u3057\u3064\u3064\u6b21\u306e\u3088\u3046\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u3092\u69cb\u7bc9\u3057\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u6c7a\u3081\u3066\u78ba\u5b9a\u3059\u308b\u3002\n\u7d9a\u3044\u3066\u3001\u30d5\u30a1\u30a4\u30eb\u3092CppUTest\u304b\u3089\u30b3\u30d4\u30fc\u3059\u308b\u3002\n\n```\n\u251c\u2500include\n\u2502  \u251c\u2500CppUTest\n\u2502  \u2502      CommandLineArguments.h\n\u2502  \u2502      CommandLineTestRunner.h\n\u2502  \u2502      JUnitTestOutput.h\n\u2502  \u2502      MemoryLeakAllocator.h\n\u2502  \u2502      MemoryLeakDetector.h\n\u2502  \u2502      MemoryLeakDetectorMallocMacros.h\n\u2502  \u2502      MemoryLeakDetectorNewMacros.h\n\u2502  \u2502      MemoryLeakWarningPlugin.h\n\u2502  \u2502      PlatformSpecificFunctions.h\n\u2502  \u2502      SimpleString.h\n\u2502  \u2502      TestFailure.h\n\u2502  \u2502      TestHarness.h\n\u2502  \u2502      TestHarness_c.h\n\u2502  \u2502      TestOutput.h\n\u2502  \u2502      TestPlugin.h\n\u2502  \u2502      TestRegistry.h\n\u2502  \u2502      TestResult.h\n\u2502  \u2502      TestTestingFixture.h\n\u2502  \u2502      Utest.h\n\u2502  \u2502      UtestMacros.h\n\u2502  \u2502      VirtualCall.h\n\u2502  \u2514\u2500Platforms\n\u2502      \u2514\u2500Gcc\n\u2502              Platform.h\n\u2514\u2500src\n    \u251c\u2500CppUTest\n    \u2502      CommandLineArguments.cpp\n    \u2502      CommandLineTestRunner.cpp\n    \u2502      JUnitTestOutput.cpp\n    \u2502      MemoryLeakAllocator.cpp\n    \u2502      MemoryLeakDetector.cpp\n    \u2502      MemoryLeakWarningPlugin.cpp\n    \u2502      SimpleString.cpp\n    \u2502      TestFailure.cpp\n    \u2502      TestHarness_c.cpp\n    \u2502      TestOutput.cpp\n    \u2502      TestPlugin.cpp\n    \u2502      TestRegistry.cpp\n    \u2502      TestResult.cpp\n    \u2502      Utest.cpp\n    \u2514\u2500Platforms\n        \u2514\u2500Iar\n                UtestPlatform.cpp\n```\n\n##\u30d5\u30a1\u30a4\u30eb\u306e\u8ffd\u52a0\n\u5206\u304b\u308a\u3084\u3059\u3044\u3088\u3046\u306bGroup\u3092\u8ffd\u52a0\u3057\u3066\u304a\u304f\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53f3\u30af\u30ea\u30c3\u30af\u304b\u3089\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30e1\u30cb\u30e5\u30fc\u3092\u958b\u304d\u3001Add\u21d2Add Group\u3092\u9078\u3076\u3002\n ![image007.png](https://qiita-image-store.s3.amazonaws.com/0/21786/af45de42-f671-6c54-9c0d-add8daabcb7b.png)\n\u3053\u3053\u3067\u306f\u30b0\u30eb\u30fc\u30d7\u540d\u3092 **Src** \u3068\u3057\u305f\u3002OK\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u3066\u78ba\u5b9a\u3059\u308b\u3002\n ![image009.png](https://qiita-image-store.s3.amazonaws.com/0/21786/a34d6d09-eea5-46b5-bd35-7fc76a95b08b.png)\n\u7d9a\u3044\u3066\u8ffd\u52a0\u3057\u305f\u30b0\u30eb\u30fc\u30d7\u3092\u53f3\u30af\u30ea\u30c3\u30af\u304b\u3089\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30e1\u30cb\u30e5\u30fc\u3092\u958b\u304d\u3001Add\u21d2Add Files\u3067\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u30c0\u30a4\u30a2\u30ed\u30b0\u3092\u958b\u304f\u3002\n ![image011.png](https://qiita-image-store.s3.amazonaws.com/0/21786/c282310d-2aa7-4677-2f4b-b844df4ff47f.png)\n\u5148\u307b\u3069\u30b3\u30d4\u30fc\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u9078\u629e\u3057\u3066\u8ffd\u52a0\u3059\u308b\u3002\n ![image013.png](https://qiita-image-store.s3.amazonaws.com/0/21786/76228d1d-14bb-c0c1-3096-a48e93b75333.png)\n\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u56fa\u6709\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3082\u8ffd\u52a0\u3059\u308b\u3002\n ![image015.png](https://qiita-image-store.s3.amazonaws.com/0/21786/50fb9fca-9d8a-89fb-add2-a5b4126797fb.png)\n\u30d0\u30fc\u30b8\u30e7\u30f3\u306a\u3069\u306e\u9055\u3044\u306b\u3088\u308atolower()\u95a2\u6570\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30d8\u30c3\u30c0\u30d5\u30a1\u30a4\u30eb\u304c\u7570\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306esrc/Platforms/Iar/UtestPlatform.cpp\u3092\u958b\u304d\u3001\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u306bctype.h\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n```c:UtestPlatform.cpp\n#include <ctype.h>\n```\n\n##\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53f3\u30af\u30ea\u30c3\u30af\u304b\u3089option\u3092\u9078\u3076\u3002\u5148\u305a\u306fGeneral Options\u304b\u3089\u8a2d\u5b9a\u3057\u3066\u3044\u304f\u3002Processor variant\u306fDevice\u3092\u9078\u629e\u3057\u3001\u53f3\u306e\u30dc\u30bf\u30f3\u62bc\u4e0b\u3067\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30e1\u30cb\u30e5\u30fc\u3092\u958b\u304d\u3001ST \u21d2 STM32F407 \u21d2 ST STM32F407VG\u3068\u9078\u629e\u3059\u308b\u3002\n ![image017.png](https://qiita-image-store.s3.amazonaws.com/0/21786/47430b47-2b75-09a9-5e23-6753362fc1ad.png)\nOutput file\u306f **Library** \u3092\u9078\u629e\u3059\u308b\u3002\n ![image019.png](https://qiita-image-store.s3.amazonaws.com/0/21786/93f5cc95-569b-8f24-5b69-058027fd4ec6.png)\nUse CMSIS\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u308b\u3002\n ![image021.png](https://qiita-image-store.s3.amazonaws.com/0/21786/f4102b65-7631-f848-94d5-2190b61965e2.png)\nCategory\u3067C/C++ Compiler\u3092\u9078\u3073\u3001Language\u3092 **C++** \u3001C++ dialect\u3067 **C++** \u3092\u9078\u629e\u3059\u308b\u3002\n ![image023.png](https://qiita-image-store.s3.amazonaws.com/0/21786/ef47bcf5-c43b-ecbb-a58c-610df3fe9094.png)\nEnable multibyte support\u306f\u30c1\u30a7\u30c3\u30af\u30de\u30fc\u30af\u304c\u5916\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3002\n![image025.png](https://qiita-image-store.s3.amazonaws.com/0/21786/62cd3c1f-26e1-395e-d47a-4005f925c39e.png)\nOptimization\u3067\u306f\u30b5\u30a4\u30ba\u5236\u9650\u8a55\u4fa1\u7248\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u53ef\u80fd\u306a\u9650\u308a\u30b3\u30fc\u30c9\u30b5\u30a4\u30ba\u3092\u5c0f\u3055\u304f\u3059\u308b\u305f\u3081\u3001Level\u3092 **High** \u306b\u3057\u3066 **Size** \u512a\u5148\u3092\u9078\u629e\u3057\u3066\u304a\u304f\u3002\n ![image027.png](https://qiita-image-store.s3.amazonaws.com/0/21786/ef0b3fe3-7b60-fcbf-a636-1f1605bcf6b6.png)\n\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u30d1\u30b9\u306b `$PROJ_DIR$\\include` \u3092\u901a\u3057\u3066\u304a\u304f\u3002OK\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u3066\u8a2d\u5b9a\u5185\u5bb9\u3092\u78ba\u5b9a\u3059\u308b\u3002\n ![image029.png](https://qiita-image-store.s3.amazonaws.com/0/21786/76051076-4f1a-7cb4-a8e1-5273a51d762e.png)\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53f3\u30af\u30ea\u30c3\u30af\u304b\u3089make\u3092\u8d77\u52d5\u3059\u308b\u3068\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u751f\u6210\u3055\u308c\u308b\u300230\u500b\u304f\u3089\u3044\u8b66\u544a\u304c\u51fa\u308b\u304c\u4eca\u56de\u306f\u7121\u8996\u3057\u305f\u3002\n![image031.png](https://qiita-image-store.s3.amazonaws.com/0/21786/fa03b043-dbf0-2140-a3f2-0c11202696a2.png)\n\n#\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u306e\u4f5c\u6210\nIO_Toggle\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30a2\u30af\u30c6\u30a3\u30d6\u306b\u5207\u308a\u66ff\u3048\u308b\u3002\nC++\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u305f\u3081\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u542b\u307e\u308c\u308bmain.c\u3092main.cpp\u306b\u5909\u66f4\u3059\u308b\u3002\u5b9f\u969b\u306b\u306fRemove\u3057\u3066\u540d\u524d\u3092\u5909\u66f4\u3057\u3066\u304b\u3089Add\u3059\u308b\u3002\n\n##\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\n\u30b3\u30f3\u30d1\u30a4\u30e9\u306e\u6307\u5b9a\u3092 **C++** \u306b\u5909\u66f4\u3059\u308b\u3002\n ![image033.png](https://qiita-image-store.s3.amazonaws.com/0/21786/0714a9db-0cf9-c043-1385-15ab08606a9b.png)\n\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u30d1\u30b9\u306b `$PROJ_DIR$\\..\\..\\..\\Test_Framework\\CppUTest\\include` \u3092\u8ffd\u52a0\u3002\n ![image035.png](https://qiita-image-store.s3.amazonaws.com/0/21786/896a8c3d-2d0c-842f-775e-d91d51e968b2.png)\nLinker\u306e\u8a2d\u5b9a\u3067Linker configuration file\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u3066\u500b\u5225\u8a2d\u5b9a\u3059\u308b\u3002Edit\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u3066Linker configuration file editor\u3092\u958b\u304f\u3002\n![image037.png](https://qiita-image-store.s3.amazonaws.com/0/21786/f6a20d92-cb83-f5fa-5a92-533400073f02.png)\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d2\u30fc\u30d7\u30b5\u30a4\u30ba\u3067\u306f\u4e0d\u8db3\u3059\u308b\u306e\u3067\u3053\u3053\u3067\u306f **0x2000** \u78ba\u4fdd\u3057\u3066\u3044\u308b\u3002Save\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u3001configuration file\u306b\u66f8\u304d\u8fbc\u3080\u3002\n![image039.png](https://qiita-image-store.s3.amazonaws.com/0/21786/451b1acb-2675-9dcd-dac2-ab0caa30e311.png)\n\u8ffd\u52a0\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306b `$PROJ_DIR$\\..\\..\\..\\Test_Framework\\CppUTest\\Debug\\Exe\\CppUTest.a` \u3092\u52a0\u3048\u308b\u3002\n ![image037.png](https://qiita-image-store.s3.amazonaws.com/0/21786/ab23a567-4e33-d49d-bd75-4f4763f2bfca.png)\nSTM32F4xx_StdPeriph_Driver\u306b\u3042\u308b **stm32f4xx_usart.c** \u3092\u8ffd\u52a0\u3002\n![image039.png](https://qiita-image-store.s3.amazonaws.com/0/21786/fd55233b-c523-7cef-3976-7941b6845029.png)\n\n##\u51fa\u529b\u5148\u3092\u30b7\u30ea\u30a2\u30eb\u306b\u3059\u308b\n\u30b7\u30ea\u30a2\u30eb\u3078\u306e\u63a5\u7d9a[\u3053\u306e\u8fba\u308a](http://amarkham.com/?p=45)\u3092\u53c2\u8003\u306b\u7d44\u307f\u8fbc\u3080\u3002\n[\u3053\u306e\u8fba\u308a](http://eliaselectronics.com/stm32f4-discovery-usart-example/)\u306b\u3082\u60c5\u5831\u304c\u3042\u308b\u3002\n\n```cpp:main.cpp\n#include <stdio.h>\n#include <CppUTest/CommandLineTestRunner.h>\n\nUSART_InitTypeDef USART_InitStructure;\n\nvoid USART_Configuration(void){\n  // sort out clocks\n  RCC_AHB1PeriphClockCmd( RCC_AHB1Periph_GPIOA, ENABLE);\n  RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART2, ENABLE);\n  /* Configure USART2 Tx (PA.02) as alternate function push-pull */\n  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;\n  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;\n  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;\n  GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;\n  GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;\n  GPIO_Init(GPIOA, &GPIO_InitStructure);\n  // Map USART2 to A.02\n  GPIO_PinAFConfig(GPIOA, GPIO_PinSource2, GPIO_AF_USART2);\n  // Initialize USART\n  USART_InitStructure.USART_BaudRate = 9600;\n  USART_InitStructure.USART_WordLength = USART_WordLength_8b;\n  USART_InitStructure.USART_StopBits = USART_StopBits_1;\n  USART_InitStructure.USART_Parity = USART_Parity_No;\n  USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;\n  USART_InitStructure.USART_Mode = USART_Mode_Tx;\n  /* Configure USART */\n  USART_Init(USART2, &USART_InitStructure);\n  /* Enable the USART */\n  USART_Cmd(USART2, ENABLE);\n}\n\n/**\n* @brief Function that printf uses to push characters to serial port\n* @param ch: ascii character\n* @retval character\n*/\nint putcharx(int ch)\n{\n  while (USART_GetFlagStatus(USART2, USART_FLAG_TXE) == RESET);\n  USART_SendData(USART2, (uint8_t)ch);\n  return ch;\n}\n\nint main(void)\n{\n  USART_Configuration();\n\n  static char *argv[] = { \"main\" };\n  CommandLineTestRunner::RunAllTests(sizeof(argv)/sizeof(*argv), argv);\n}\n```\n\n##\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u306e\u8a18\u8ff0\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306btest.cpp\u3092\u8ffd\u52a0\u3057\u3001\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u3092\u8a18\u8ff0\u3059\u308b\u3002\n\n```cpp:test.cpp\n#include <CppUTest/TestHarness.h>\n\nint hoge(void)\n{\n\treturn 3;\n}\n\nint hoge(int a)\n{\n\treturn a+1;\n}\n\nTEST_GROUP(TestSuiteHoge)\n{};\n\nTEST(TestSuiteHoge, TestCaseHoge)\n{\n\tLONGS_EQUAL(3, hoge());\n}\n\nTEST(TestSuiteHoge, TestCaseHoge2)\n{\n\tLONGS_EQUAL(3, hoge(2));\n}\n```\n\n#\u30d3\u30eb\u30c9\u3068\u5b9f\u884c\n\n##\u30d3\u30eb\u30c9\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30e1\u30cb\u30e5\u30fc\u304b\u3089Make\u3092\u9078\u3093\u3067\u30d3\u30eb\u30c9\u3059\u308b\u3002\u30d3\u30eb\u30c9\u306b\u6210\u529f\u3059\u308c\u3070IO_Toggle.out\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n\n##\u30c7\u30d0\u30c3\u30b0\u5b9f\u884c\nUSB\u30dd\u30fc\u30c8\u306bSTM32F4 DISCOVERY\u3092\u63a5\u7d9a\u3059\u308b\u3002\u521d\u3081\u3066\u63a5\u7d9a\u3057\u305f\u5834\u5408\u3084\u3001\u63a5\u7d9a\u3059\u308bUSB\u30dd\u30fc\u30c8\u3092\u5909\u66f4\u3057\u305f\u5834\u5408\u306fST-Link\u30c9\u30e9\u30a4\u30d0\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u304c\u5fc5\u8981\u306b\u306a\u308b\u3002ST-Link\u30c9\u30e9\u30a4\u30d0\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306b\u95a2\u3057\u3066\u306f[\u3053\u306e\u8fba\u308a](http://kowaimononantenai.blogspot.jp/2012/10/stm32f4-discovery-ewarm.html)\u304c\u53c2\u8003\u306b\u306a\u308b\u3002\u4eca\u56de\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u74b0\u5883\u3067\u306f C:\\Program Files\\IAR Systems\\Embedded Workbench 6.5\\arm\\drivers\\ST-Link\\ST-Link_V2_USBdriver.exe \u3092\u5b9f\u884c\u3057\u305f\u3002\n\u6b63\u5e38\u306b\u30c7\u30d0\u30a4\u30b9\u304c\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3089\u3001IO_Toggle\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9078\u629e\u3057Project\u21d2Download and Debug\uff08Ctrl+D\uff09\u3092\u9078\u629e\u3059\u308b\u3002\u81ea\u52d5\u7684\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308cmain\u95a2\u6570\u3067\u4e00\u6642\u505c\u6b62\u3059\u308b\u3002\n![image047.png](https://qiita-image-store.s3.amazonaws.com/0/21786/4d421322-abb6-5ece-9e2e-b29359b27886.png)\n\u30c6\u30b9\u30c8\u7d50\u679c\u3092\u8868\u793a\u3055\u305b\u308b\u305f\u3081\u3001View\u21d2Terminal I/O\u3067Terminal I/O\u30d3\u30e5\u30fc\u3092\u8868\u793a\u3057\u3066\u304a\u304f\u3002\n![image049.png](https://qiita-image-store.s3.amazonaws.com/0/21786/b76a33a2-5d11-c047-4d1f-c5cdb8e8efcd.png)\nDebug\u21d2Go\uff08F5\uff09\u3067\u5b9f\u884c\u3059\u308b\u3068\u3001\u6b21\u306e\u3088\u3046\u306bTerminal I/O\u306b\u30c6\u30b9\u30c8\u7d50\u679c\u304c\u8868\u793a\u3055\u308c\u308b\u3002\n![image053.png](https://qiita-image-store.s3.amazonaws.com/0/21786/34c3aa68-2aaf-aae7-c069-d6ab50565c9a.png)\n\n##\u30b3\u30fc\u30c9\u30b5\u30a4\u30ba\n\u3061\u306a\u307f\u306b\u4eca\u56de\u306e\u5b9f\u88c5\u3067\u30b3\u30fc\u30c9\u30b5\u30a4\u30ba\u306f28.5KB\u7a0b\u5ea6\u3068\u306a\u3063\u305f\u3002\u30b3\u30fc\u30c9\u30b5\u30a4\u30ba\u9650\u5b9a\u7248\u3092\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u30b3\u30fc\u30c9\u30b5\u30a4\u30ba\u304c32KB\u4ee5\u4e0b\u306b\u306a\u3089\u306a\u3044\u3068\u30d3\u30eb\u30c9\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u6b8b\u308a3.5KB\u7a0b\u5ea6\u3068\u306a\u3063\u3066\u3044\u308b\u3002\n\n```\n  29,163 bytes of readonly  code memory\n   6,073 bytes of readonly  data memory\n  19,136 bytes of readwrite data memory\n```\n", "tags": ["C", "TDD", "CppUTest"]}