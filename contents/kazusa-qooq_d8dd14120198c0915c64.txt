{"context": " More than 1 year has passed since last update.http://revel.github.io/\n\u524d\u56de\u306b\u5f15\u304d\u7d9a\u304d\u3001Golang\u306eWebFramework\u3001Revel\u306e\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u3092\u8aad\u3093\u3067\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002Overview\u304b\u3089\u3067\u3059\n\nOverview\n\u3053\u306e\u9805\u3067\u306f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u69d8\u3005\u306a\u6a5f\u80fd\u3092\u7d39\u4ecb\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\nRouting: \u7c21\u7d20\u306a\u8a18\u6cd5\u3068\u578b\u5b89\u5168\u306a\u30ea\u30d0\u30fc\u30b9\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u63d0\u4f9b\u3059\u308b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\nControllers: \u7c21\u5358\u306a\u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3068\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u63d0\u4f9b\u3057\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3068\u306a\u308b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\nTemplates: Go\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30b7\u30f3\u30d7\u30eb\u306b\u3057\u3001\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\nInterceptors: \u30a2\u30af\u30b7\u30e7\u30f3\u306e\u524d\u5f8c\u3067\u5404\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3054\u3068\u306b\u547c\u3073\u51fa\u305b\u308b\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\nFilters: \u3088\u308a\u5168\u4f53\u3092\u30ab\u30d0\u30fc\u3067\u304d\u308b\u30d5\u30a3\u30eb\u30bf\n\n\nRouting\nRevel\u306f\u5ba3\u8a00\u578b\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u69cb\u6587\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306f\uff11\u30d5\u30a1\u30a4\u30eb\u306b\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002\u69cb\u6587\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u9664\u5916\u3057\u305fURI\u3068\u30de\u30c3\u30c1\u3059\u308b\u30b7\u30f3\u30d7\u30eb\u306a\u3082\u306e\u3067\u3059\u3002\u3055\u3089\u306b/hotels/:id\u306e\u3088\u3046\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u4ed8\u306e\u30eb\u30fc\u30c8\u3082\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\nconf/routes.\nGET    /login                Application.Login       # \u5358\u7d14\u306a\u30d1\u30b9\nGET    /hotels/              Hotels.Index            # /hotels\u307e\u305f\u306f/hotels/\u306b\u30de\u30c3\u30c1\nGET    /hotels/:id           Hotels.Show             # :id\u3092\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u53d6\u5f97\nWS     /hotels/:id/feed      Hotels.Feed             # WebSockets.\nPOST   /hotels/:id/:action   Hotels.:action          # \u5b9a\u7fa9\u3055\u308c\u305f\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u81ea\u52d5\u7684\u306b\u30eb\u30fc\u30c8\u3068\u3057\u3066\u4f5c\u6210\nGET    /public/*filepath     Static.Serve(\"public\")  # \u9759\u7684\u30d5\u30a1\u30a4\u30eb\n*      /:controller/:action  :controller.:action     # \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u81ea\u52d5\u69cb\u7bc9\n\n\n\u30ea\u30d0\u30fc\u30b9\u30eb\u30fc\u30c8\u306f\u578b\u5b89\u5168\u306a\u8a18\u6cd5\u3067\u4f5c\u3089\u308c\u307e\u3059\u3002\n// Show the hotel information.\nfunc (c Hotels) Show(id int) revel.Result {\n    hotel := HotelById(id)\n    return c.Render(hotel)\n}\n\n// Save the updated hotel information and redirect back to Show.\nfunc (c Hotels) Save(hotel Hotel) revel.Result {\n    // validate and save hotel\n    return c.Redirect(routes.Hotels.Show(hotel.Id))\n}\n\n\nControllers\n\u5168\u3066\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u306f\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306e\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u4ee5\u4e0b\u306e\u5229\u70b9\u304c\u3042\u308a\u307e\u3059\u3002\n\nData binding: Revel\u306f\u30af\u30a8\u30ea\u30b9\u30c8\u30ea\u30f3\u30b0\u307e\u305f\u306f\u30d5\u30a9\u30fc\u30e0\u9001\u4fe1\u30c7\u30fc\u30bf\u3092\u3001\u5358\u7d14\u306a\u5024\u304b\u69cb\u9020\u4f53\u306b\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3057\u3001\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5f15\u6570\u3068\u3057\u3066\u6e21\u3057\u3066\u304f\u308c\u307e\u3059\u3002\u307e\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u30de\u30c3\u30d7\u306b\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\nValidation: c.Validation.Required(verifyPassword)\u306e\u3088\u3046\u306b\u3001\u30d0\u30ea\u30c7\u30fc\u30c8\u7528\u306e\u30d8\u30eb\u30d1\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\nFlash: c.Flash.Success(\"Welcome, \" + user.Name)\u306e\u3088\u3046\u306b\u3001\u4e00\u5ea6\u306e\u307f\u5229\u7528\u3067\u304d\u308b\u30af\u30c3\u30ad\u30fc\u30c7\u30fc\u30bf\u304c\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u305f\u3081\u306b\u7528\u610f\u3055\u308c\u3066\u307e\u3059\u3002\nSession: c.Session[\"user\"] = user.Username\u306e\u3088\u3046\u306b\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u306f\u6697\u53f7\u5316\u3055\u308c\u305fmap[string]string\u578b\u306e\u30af\u30c3\u30ad\u30fc\u3067\u3059\u3002\nResults: c.Redirect(routes.Hotels.Index())\u306e\u3088\u3046\u306b\u3001\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u306f\u30ea\u30d0\u30fc\u30b9\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u6069\u6075\u3092\u53d7\u3051\u308c\u307e\u3059\u3002\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3067\u306f\u3001\u3042\u306a\u305f\u306e\u30c7\u30fc\u30bf\u306f\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\n\u4f8b\uff1a\n// app/controllers/app.go\n\ntype MyApplication struct {\n    *revel.Controller\n}\n\nfunc (c MyApplication) Register() revel.Result {\n    title := \"Register\"\n    return c.Render(title)\n}\n\nfunc (c MyApplication) SaveUser(user models.User, verifyPassword string) revel.Result {\n    c.Validation.Required(verifyPassword)\n    c.Validation.Required(verifyPassword == user.Password).\n        Message(\"Password does not match\")\n    user.Validate(c.Validation)\n\n    if c.Validation.HasErrors() {\n        c.Validation.Keep()\n        c.FlashParams()\n        return c.Redirect(routes.Application.Register())\n    }\n\n    user.HashedPassword, _ = bcrypt.GenerateFromPassword(\n        []byte(user.Password), bcrypt.DefaultCost)\n    err := c.Txn.Insert(&user)\n    if err != nil {\n        panic(err)\n    }\n\n    c.Session[\"user\"] = user.Username\n    c.Flash.Success(\"Welcome, \" + user.Name)\n    return c.Redirect(routes.Hotels.Index())\n}\n\n\nTemplates\n\u6163\u4f8b\u901a\u308a\u3001Revel\u306fWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d3\u30e5\u30fc\u30c7\u30b6\u30a4\u30f3\u3092Go\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u884c\u3044\u307e\u3059\u3002Regisiter\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nNote:\n\nRevel\u306f\u4f7f\u7528\u3055\u308c\u308b\u30a2\u30af\u30b7\u30e7\u30f3\u540d\u3092\u81ea\u52d5\u7684\u306b\u63a2\u3057\u51fa\u3057\u307e\u3059\nfield\u306f\u30d5\u30a9\u30fc\u30e0\u7528\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u5024\u3092\u4fdd\u5b58\u3057\u305f\u30de\u30c3\u30d7\u3092\u8fd4\u3059\u30b7\u30f3\u30d7\u30eb\u306a\u30d8\u30eb\u30d1\u95a2\u6570\u3067\u3059\u3002\u5fc5\u8981\u304c\u3042\u308c\u3070\u4ed6\u306e\u95a2\u6570\u3082\u30d8\u30eb\u30d1\u3068\u3057\u3066\u6e21\u3059\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\nRender\u30e1\u30bd\u30c3\u30c9\u306e\u5f15\u6570\u3068\u3057\u3066\u660e\u793a\u3055\u308c\u305f\u5024\u306f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4e2d\u3067\u4f7f\u7528\u53ef\u80fd\u3067\u3059\u3002\uff08\u4f8b\u3067\u306ftitle\u304cheader.html\u5185\u3067\u4f7f\u7528\u3055\u308c\u3066\u307e\u3059\uff09\n\n{{template \"header.html\" .}}\n\n<h1>Register:</h1>\n<form action=\"/register\" method=\"POST\">\n  {{with $field := field \"user.Username\" .}}\n    <p class=\"{{$field.ErrorClass}}\">\n      <strong>Username:</strong>\n      <input type=\"text\" name=\"{{$field.Name}}\" size=\"16\" value=\"{{$field.Flash}}\"> *\n      <span class=\"error\">{{$field.Error}}</span>\n    </p>\n  {{end}}\n\n  {{/* other fields */}}\n\n  <p class=\"buttons\">\n    <input type=\"submit\" value=\"Register\"> <a href=\"/\">Cancel</a>\n  </p>\n</form>\n\n{{template \"footer.html\" .}}\n\n\nInterceptors\n\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u306f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u524d\u5f8c\u3067\u547c\u3073\u51fa\u3055\u308c\u308b\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306e\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u3002\u307e\u305f\u30e9\u30f3\u30bf\u30a4\u30e0\u30a8\u30e9\u30fc\u6642\u306b\u547c\u3073\u51fa\u3059\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092\u5225\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306b\u7d44\u307f\u8fbc\u3080\u3053\u3068\u3067\u3001\u958b\u767a\u8005\u306f\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u3068\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u591a\u304f\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3067\u30b7\u30a7\u30a2\u3067\u304d\u307e\u3059\u3002\n\u4f8b\u3068\u3057\u3066\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u6319\u3052\u307e\u3059\u3002\u3053\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u521d\u671f\u5316\u6642\u306b\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u958b\u304d\u3001\u30b0\u30ed\u30fc\u30d0\u30eb\u30cf\u30f3\u30c9\u30ebDb\u306b\u305d\u308c\u3092\u4fdd\u6301\u3057\u307e\u3059\u3002\u52a0\u3048\u3066\u3001db.Transactional\u578b\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3067\u3042\u308bsql.Txn\u3092\u7528\u3044\u3001\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u3068\u3057\u3066\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002\n// github.com/revel/modules/db/app/db.go\n\nvar Db *sql.DB\n\nfunc Init() {\n    // Read configuration.\n    Driver, _ = revel.Config.String(\"db.driver\")\n    Spec, _ = revel.Config.String(\"db.spec\")\n\n    // Open a connection.\n    Db, _ = sql.Open(Driver, Spec)\n}\n\n// Transactional adds transaction management to your controller.\ntype Transactional struct {\n    *revel.Controller\n    Txn *sql.Tx\n}\n\nfunc (c *Transactional) Begin() revel.Result {\n    c.Txn, _ = Db.Begin()\n    return nil\n}\n\nfunc (c *Transactional) Commit() revel.Result {\n    _ = c.Txn.Commit()\n    c.Txn = nil\n    return nil\n}\n\nfunc (c *Transactional) Rollback() revel.Result {\n    _ = c.Txn.Rollback()\n    c.Txn = nil\n    return nil\n}\n\nfunc init() {\n    revel.InterceptMethod((*Transactional).Begin, revel.BEFORE)\n    revel.InterceptMethod((*Transactional).Commit, revel.AFTER)\n    revel.InterceptMethod((*Transactional).Rollback, revel.PANIC)\n}\n\n\u3053\u308c\u3092\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306b\u30df\u30c3\u30af\u30b9\u30a4\u30f3\u3059\u308b\u3053\u3068\u3067\u3001\u958b\u767a\u8005\u306f\u7c21\u5358\u306b\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3067\u304d\u307e\u3059\u3002\ntype Bookings struct {\n    *revel.Controller\n    db.Transactional  // Adds .Txn\n    user.Login        // Adds .User\n}\n\nfunc (c Bookings) ShowFirstBooking() revel.Result {\n    row := c.Txn.QueryRow(`\nselect id, hotel_id, user_id, price, nights\n  from Booking\n where UserId = ?\n limit 1`, c.User.Id)\n    ...\n    return c.Render(booking)\n}\n\n\nFilters\n\u30d5\u30a3\u30eb\u30bf\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u3067\u3059\u3002\u30d5\u30a3\u30eb\u30bf\u306f\u5358\u7d14\u306a\u95a2\u6570\u3067\u3042\u308a\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5f62\u5f0f\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002\ntype Filter func(c *Controller, filterChain []Filter)\n\n\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u3088\u3046\u306a\u8907\u96d1\u306a\u30d3\u30eb\u30c9\u30a4\u30f3\u306e\u6a5f\u80fd\u3082\u30d5\u30a3\u30eb\u30bf\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n// github.com/revel/revel/intercept.go\n\nvar InterceptorFilter = func(c *Controller, fc []Filter) {\n    defer invokeInterceptors(FINALLY, c)\n    defer func() {\n        if err := recover(); err != nil {\n            invokeInterceptors(PANIC, c)\n            panic(err)\n        }\n    }()\n\n    // Invoke the BEFORE interceptors and return early, if we get a result.\n    invokeInterceptors(BEFORE, c)\n    if c.Result != nil {\n        return\n    }\n\n    fc[0](c, fc[1:])\n    invokeInterceptors(AFTER, c)\n}\n\nRevel\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d5\u30a3\u30eb\u30bf\u30fc\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u672c\u5f53\u306b\u7c21\u5358\u3067\u3001\u4f7f\u3044\u305f\u3044\u30d5\u30a3\u30eb\u30bf\u3092\u9078\u3076\u3060\u3051\u3067\u3059\u3002\n// Filters is the default set of global filters.\n// It may be set by the application on initialization.\nvar Filters = []Filter{\n    PanicFilter,             // Recover from panics and display an error page instead.\n    RouterFilter,            // Use the routing table to select the right Action\n    FilterConfiguringFilter, // A hook for adding or removing per-Action filters.\n    ParamsFilter,            // Parse parameters into Controller.Params.\n    SessionFilter,           // Restore and write the session cookie.\n    FlashFilter,             // Restore and write the flash cookie.\n    ValidationFilter,        // Restore kept validation errors  from cookie.\n    I18nFilter,              // Resolve the requested language\n    InterceptorFilter,       // Run interceptors around the action.\n    ActionInvoker,           // Invoke the action.\n}\n\n\u307b\u307c\u5168\u3066\u306eRevel\u306e\u6a5f\u80fd\u306f\u30d5\u30a3\u30eb\u30bf\u3068\u3057\u3066\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u3057\u3066\u305d\u308c\u3089\u306f\u30b3\u30f3\u30d5\u30a3\u30b0\u306e\u4e00\u90e8\u3067\u3042\u308a\u958b\u767a\u8005\u304c\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u304cRevel\u3092\u7406\u89e3\u3057\u3084\u3059\u304f\u3057\u3001\u307e\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u6027\u3092\u9ad8\u3081\u308b\u8981\u56e0\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u30e2\u30b8\u30e5\u30fc\u30eb\u6027\u306e\u8a3c\u62e0\u3068\u3057\u3066\u3001\u30e1\u30a4\u30f3\u30b5\u30fc\u30d0\u30cf\u30f3\u30c9\u30e9\u304c\u3044\u304b\u306b\u30b7\u30f3\u30d7\u30eb\u304b\u3092\u3054\u89a7\u306b\u304f\u3060\u3055\u3044\u3002\n// github.com/revel/revel/server.go\n\nfunc handleInternal(w http.ResponseWriter, r *http.Request, ws *websocket.Conn) {\n    var (\n        req  = NewRequest(r)\n        resp = NewResponse(w)\n        c    = NewController(req, resp)\n    )\n    req.Websocket = ws\n\n    Filters[0](c, Filters[1:])\n    if c.Result != nil {\n        c.Result.Apply(req, resp)\n    }\n}\n\n\u4ee5\u4e0a\u306b\u306a\u308a\u307e\u3059\u3002\u3061\u3087\u3063\u3068\u5b9f\u969b\u306b\u3084\u3063\u3066\u307f\u306a\u3044\u3068\u3001\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3068\u3053\u308d\u3082\u3042\u308a\u307e\u3057\u305f\u306d\u3002\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u304c\u3042\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u305d\u3061\u3089\u3067\u88dc\u3048\u308b\u3068\u3044\u3044\u3067\u3059\u306d\u3002\nhttp://revel.github.io/\n[\u524d\u56de](http://qiita.com/kazusa-qooq/items/ca4435d45f367ee36b72)\u306b\u5f15\u304d\u7d9a\u304d\u3001Golang\u306eWebFramework\u3001Revel\u306e\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u3092\u8aad\u3093\u3067\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002Overview\u304b\u3089\u3067\u3059\n\n#Overview\n\u3053\u306e\u9805\u3067\u306f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u69d8\u3005\u306a\u6a5f\u80fd\u3092\u7d39\u4ecb\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n* Routing: \u7c21\u7d20\u306a\u8a18\u6cd5\u3068\u578b\u5b89\u5168\u306a\u30ea\u30d0\u30fc\u30b9\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u63d0\u4f9b\u3059\u308b\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\n* Controllers: \u7c21\u5358\u306a\u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3068\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u63d0\u4f9b\u3057\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3068\u306a\u308b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\n* Templates: Go\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30b7\u30f3\u30d7\u30eb\u306b\u3057\u3001\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n* Interceptors: \u30a2\u30af\u30b7\u30e7\u30f3\u306e\u524d\u5f8c\u3067\u5404\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3054\u3068\u306b\u547c\u3073\u51fa\u305b\u308b\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\n* Filters: \u3088\u308a\u5168\u4f53\u3092\u30ab\u30d0\u30fc\u3067\u304d\u308b\u30d5\u30a3\u30eb\u30bf\n\n##Routing\nRevel\u306f\u5ba3\u8a00\u578b\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u69cb\u6587\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306f\uff11\u30d5\u30a1\u30a4\u30eb\u306b\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002\u69cb\u6587\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u9664\u5916\u3057\u305fURI\u3068\u30de\u30c3\u30c1\u3059\u308b\u30b7\u30f3\u30d7\u30eb\u306a\u3082\u306e\u3067\u3059\u3002\u3055\u3089\u306b`/hotels/:id`\u306e\u3088\u3046\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u4ed8\u306e\u30eb\u30fc\u30c8\u3082\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\n``` conf/routes.\nGET    /login                Application.Login       # \u5358\u7d14\u306a\u30d1\u30b9\nGET    /hotels/              Hotels.Index            # /hotels\u307e\u305f\u306f/hotels/\u306b\u30de\u30c3\u30c1\nGET    /hotels/:id           Hotels.Show             # :id\u3092\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u53d6\u5f97\nWS     /hotels/:id/feed      Hotels.Feed             # WebSockets.\nPOST   /hotels/:id/:action   Hotels.:action          # \u5b9a\u7fa9\u3055\u308c\u305f\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u81ea\u52d5\u7684\u306b\u30eb\u30fc\u30c8\u3068\u3057\u3066\u4f5c\u6210\nGET    /public/*filepath     Static.Serve(\"public\")  # \u9759\u7684\u30d5\u30a1\u30a4\u30eb\n*      /:controller/:action  :controller.:action     # \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u81ea\u52d5\u69cb\u7bc9\n```\n\n\u30ea\u30d0\u30fc\u30b9\u30eb\u30fc\u30c8\u306f\u578b\u5b89\u5168\u306a\u8a18\u6cd5\u3067\u4f5c\u3089\u308c\u307e\u3059\u3002\n\n```\n// Show the hotel information.\nfunc (c Hotels) Show(id int) revel.Result {\n\thotel := HotelById(id)\n\treturn c.Render(hotel)\n}\n\n// Save the updated hotel information and redirect back to Show.\nfunc (c Hotels) Save(hotel Hotel) revel.Result {\n\t// validate and save hotel\n\treturn c.Redirect(routes.Hotels.Show(hotel.Id))\n}\n```\n\n##Controllers\n\u5168\u3066\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u306f\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306e\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u4ee5\u4e0b\u306e\u5229\u70b9\u304c\u3042\u308a\u307e\u3059\u3002\n\n* Data binding: Revel\u306f\u30af\u30a8\u30ea\u30b9\u30c8\u30ea\u30f3\u30b0\u307e\u305f\u306f\u30d5\u30a9\u30fc\u30e0\u9001\u4fe1\u30c7\u30fc\u30bf\u3092\u3001\u5358\u7d14\u306a\u5024\u304b\u69cb\u9020\u4f53\u306b\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3057\u3001\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5f15\u6570\u3068\u3057\u3066\u6e21\u3057\u3066\u304f\u308c\u307e\u3059\u3002\u307e\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u30de\u30c3\u30d7\u306b\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n* Validation: `c.Validation.Required(verifyPassword)`\u306e\u3088\u3046\u306b\u3001\u30d0\u30ea\u30c7\u30fc\u30c8\u7528\u306e\u30d8\u30eb\u30d1\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\n* Flash: `c.Flash.Success(\"Welcome, \" + user.Name)`\u306e\u3088\u3046\u306b\u3001\u4e00\u5ea6\u306e\u307f\u5229\u7528\u3067\u304d\u308b\u30af\u30c3\u30ad\u30fc\u30c7\u30fc\u30bf\u304c\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u305f\u3081\u306b\u7528\u610f\u3055\u308c\u3066\u307e\u3059\u3002\n* Session: `c.Session[\"user\"] = user.Username`\u306e\u3088\u3046\u306b\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u306f\u6697\u53f7\u5316\u3055\u308c\u305fmap[string]string\u578b\u306e\u30af\u30c3\u30ad\u30fc\u3067\u3059\u3002\n* Results: `c.Redirect(routes.Hotels.Index())`\u306e\u3088\u3046\u306b\u3001\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u306f\u30ea\u30d0\u30fc\u30b9\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u6069\u6075\u3092\u53d7\u3051\u308c\u307e\u3059\u3002\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3067\u306f\u3001\u3042\u306a\u305f\u306e\u30c7\u30fc\u30bf\u306f\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\n\u4f8b\uff1a\n\n```\n// app/controllers/app.go\n\ntype MyApplication struct {\n\t*revel.Controller\n}\n\nfunc (c MyApplication) Register() revel.Result {\n\ttitle := \"Register\"\n\treturn c.Render(title)\n}\n\nfunc (c MyApplication) SaveUser(user models.User, verifyPassword string) revel.Result {\n\tc.Validation.Required(verifyPassword)\n\tc.Validation.Required(verifyPassword == user.Password).\n\t\tMessage(\"Password does not match\")\n\tuser.Validate(c.Validation)\n\n\tif c.Validation.HasErrors() {\n\t\tc.Validation.Keep()\n\t\tc.FlashParams()\n\t\treturn c.Redirect(routes.Application.Register())\n\t}\n\n\tuser.HashedPassword, _ = bcrypt.GenerateFromPassword(\n\t\t[]byte(user.Password), bcrypt.DefaultCost)\n\terr := c.Txn.Insert(&user)\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\tc.Session[\"user\"] = user.Username\n\tc.Flash.Success(\"Welcome, \" + user.Name)\n\treturn c.Redirect(routes.Hotels.Index())\n}\n```\n\n##Templates\n\u6163\u4f8b\u901a\u308a\u3001Revel\u306fWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d3\u30e5\u30fc\u30c7\u30b6\u30a4\u30f3\u3092Go\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u884c\u3044\u307e\u3059\u3002Regisiter\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nNote:\n\n* Revel\u306f\u4f7f\u7528\u3055\u308c\u308b\u30a2\u30af\u30b7\u30e7\u30f3\u540d\u3092\u81ea\u52d5\u7684\u306b\u63a2\u3057\u51fa\u3057\u307e\u3059\n* field\u306f\u30d5\u30a9\u30fc\u30e0\u7528\u306e\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u5024\u3092\u4fdd\u5b58\u3057\u305f\u30de\u30c3\u30d7\u3092\u8fd4\u3059\u30b7\u30f3\u30d7\u30eb\u306a\u30d8\u30eb\u30d1\u95a2\u6570\u3067\u3059\u3002\u5fc5\u8981\u304c\u3042\u308c\u3070\u4ed6\u306e\u95a2\u6570\u3082\u30d8\u30eb\u30d1\u3068\u3057\u3066\u6e21\u3059\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n* Render\u30e1\u30bd\u30c3\u30c9\u306e\u5f15\u6570\u3068\u3057\u3066\u660e\u793a\u3055\u308c\u305f\u5024\u306f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4e2d\u3067\u4f7f\u7528\u53ef\u80fd\u3067\u3059\u3002\uff08\u4f8b\u3067\u306ftitle\u304cheader.html\u5185\u3067\u4f7f\u7528\u3055\u308c\u3066\u307e\u3059\uff09\n\n```\n{{template \"header.html\" .}}\n\n<h1>Register:</h1>\n<form action=\"/register\" method=\"POST\">\n  {{with $field := field \"user.Username\" .}}\n    <p class=\"{{$field.ErrorClass}}\">\n      <strong>Username:</strong>\n      <input type=\"text\" name=\"{{$field.Name}}\" size=\"16\" value=\"{{$field.Flash}}\"> *\n      <span class=\"error\">{{$field.Error}}</span>\n    </p>\n  {{end}}\n\n  {{/* other fields */}}\n\n  <p class=\"buttons\">\n    <input type=\"submit\" value=\"Register\"> <a href=\"/\">Cancel</a>\n  </p>\n</form>\n\n{{template \"footer.html\" .}}\n```\n\n\n##Interceptors\n\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u306f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u524d\u5f8c\u3067\u547c\u3073\u51fa\u3055\u308c\u308b\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306e\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u3002\u307e\u305f\u30e9\u30f3\u30bf\u30a4\u30e0\u30a8\u30e9\u30fc\u6642\u306b\u547c\u3073\u51fa\u3059\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092\u5225\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306b\u7d44\u307f\u8fbc\u3080\u3053\u3068\u3067\u3001\u958b\u767a\u8005\u306f\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u3068\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u591a\u304f\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3067\u30b7\u30a7\u30a2\u3067\u304d\u307e\u3059\u3002\n\u4f8b\u3068\u3057\u3066\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u6319\u3052\u307e\u3059\u3002\u3053\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u521d\u671f\u5316\u6642\u306b\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u958b\u304d\u3001\u30b0\u30ed\u30fc\u30d0\u30eb\u30cf\u30f3\u30c9\u30eb`Db`\u306b\u305d\u308c\u3092\u4fdd\u6301\u3057\u307e\u3059\u3002\u52a0\u3048\u3066\u3001db.Transactional\u578b\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3067\u3042\u308bsql.Txn\u3092\u7528\u3044\u3001\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u3068\u3057\u3066\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002\n\n```\n// github.com/revel/modules/db/app/db.go\n\nvar Db *sql.DB\n\nfunc Init() {\n\t// Read configuration.\n\tDriver, _ = revel.Config.String(\"db.driver\")\n\tSpec, _ = revel.Config.String(\"db.spec\")\n\n\t// Open a connection.\n\tDb, _ = sql.Open(Driver, Spec)\n}\n\n// Transactional adds transaction management to your controller.\ntype Transactional struct {\n\t*revel.Controller\n\tTxn *sql.Tx\n}\n\nfunc (c *Transactional) Begin() revel.Result {\n\tc.Txn, _ = Db.Begin()\n\treturn nil\n}\n\nfunc (c *Transactional) Commit() revel.Result {\n\t_ = c.Txn.Commit()\n\tc.Txn = nil\n\treturn nil\n}\n\nfunc (c *Transactional) Rollback() revel.Result {\n\t_ = c.Txn.Rollback()\n\tc.Txn = nil\n\treturn nil\n}\n\nfunc init() {\n\trevel.InterceptMethod((*Transactional).Begin, revel.BEFORE)\n\trevel.InterceptMethod((*Transactional).Commit, revel.AFTER)\n\trevel.InterceptMethod((*Transactional).Rollback, revel.PANIC)\n}\n```\n\n\u3053\u308c\u3092\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306b\u30df\u30c3\u30af\u30b9\u30a4\u30f3\u3059\u308b\u3053\u3068\u3067\u3001\u958b\u767a\u8005\u306f\u7c21\u5358\u306b\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\n```\ntype Bookings struct {\n\t*revel.Controller\n\tdb.Transactional  // Adds .Txn\n\tuser.Login        // Adds .User\n}\n\nfunc (c Bookings) ShowFirstBooking() revel.Result {\n\trow := c.Txn.QueryRow(`\nselect id, hotel_id, user_id, price, nights\n  from Booking\n where UserId = ?\n limit 1`, c.User.Id)\n\t...\n\treturn c.Render(booking)\n}\n```\n\n##Filters\n\u30d5\u30a3\u30eb\u30bf\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u3067\u3059\u3002\u30d5\u30a3\u30eb\u30bf\u306f\u5358\u7d14\u306a\u95a2\u6570\u3067\u3042\u308a\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5f62\u5f0f\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n```\ntype Filter func(c *Controller, filterChain []Filter)\n```\n\n\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u3088\u3046\u306a\u8907\u96d1\u306a\u30d3\u30eb\u30c9\u30a4\u30f3\u306e\u6a5f\u80fd\u3082\u30d5\u30a3\u30eb\u30bf\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\n// github.com/revel/revel/intercept.go\n\nvar InterceptorFilter = func(c *Controller, fc []Filter) {\n\tdefer invokeInterceptors(FINALLY, c)\n\tdefer func() {\n\t\tif err := recover(); err != nil {\n\t\t\tinvokeInterceptors(PANIC, c)\n\t\t\tpanic(err)\n\t\t}\n\t}()\n\n\t// Invoke the BEFORE interceptors and return early, if we get a result.\n\tinvokeInterceptors(BEFORE, c)\n\tif c.Result != nil {\n\t\treturn\n\t}\n\n\tfc[0](c, fc[1:])\n\tinvokeInterceptors(AFTER, c)\n}\n```\n\nRevel\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d5\u30a3\u30eb\u30bf\u30fc\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u672c\u5f53\u306b\u7c21\u5358\u3067\u3001\u4f7f\u3044\u305f\u3044\u30d5\u30a3\u30eb\u30bf\u3092\u9078\u3076\u3060\u3051\u3067\u3059\u3002\n\n```\n// Filters is the default set of global filters.\n// It may be set by the application on initialization.\nvar Filters = []Filter{\n\tPanicFilter,             // Recover from panics and display an error page instead.\n\tRouterFilter,            // Use the routing table to select the right Action\n\tFilterConfiguringFilter, // A hook for adding or removing per-Action filters.\n\tParamsFilter,            // Parse parameters into Controller.Params.\n\tSessionFilter,           // Restore and write the session cookie.\n\tFlashFilter,             // Restore and write the flash cookie.\n\tValidationFilter,        // Restore kept validation errors  from cookie.\n\tI18nFilter,              // Resolve the requested language\n\tInterceptorFilter,       // Run interceptors around the action.\n\tActionInvoker,           // Invoke the action.\n}\n```\n\u307b\u307c\u5168\u3066\u306eRevel\u306e\u6a5f\u80fd\u306f\u30d5\u30a3\u30eb\u30bf\u3068\u3057\u3066\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u305d\u3057\u3066\u305d\u308c\u3089\u306f\u30b3\u30f3\u30d5\u30a3\u30b0\u306e\u4e00\u90e8\u3067\u3042\u308a\u958b\u767a\u8005\u304c\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u304cRevel\u3092\u7406\u89e3\u3057\u3084\u3059\u304f\u3057\u3001\u307e\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u6027\u3092\u9ad8\u3081\u308b\u8981\u56e0\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u30e2\u30b8\u30e5\u30fc\u30eb\u6027\u306e\u8a3c\u62e0\u3068\u3057\u3066\u3001\u30e1\u30a4\u30f3\u30b5\u30fc\u30d0\u30cf\u30f3\u30c9\u30e9\u304c\u3044\u304b\u306b\u30b7\u30f3\u30d7\u30eb\u304b\u3092\u3054\u89a7\u306b\u304f\u3060\u3055\u3044\u3002\n\n```\n// github.com/revel/revel/server.go\n\nfunc handleInternal(w http.ResponseWriter, r *http.Request, ws *websocket.Conn) {\n\tvar (\n\t\treq  = NewRequest(r)\n\t\tresp = NewResponse(w)\n\t\tc    = NewController(req, resp)\n\t)\n\treq.Websocket = ws\n\n\tFilters[0](c, Filters[1:])\n\tif c.Result != nil {\n\t\tc.Result.Apply(req, resp)\n\t}\n}\n```\n\n\u4ee5\u4e0a\u306b\u306a\u308a\u307e\u3059\u3002\u3061\u3087\u3063\u3068\u5b9f\u969b\u306b\u3084\u3063\u3066\u307f\u306a\u3044\u3068\u3001\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3068\u3053\u308d\u3082\u3042\u308a\u307e\u3057\u305f\u306d\u3002\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u304c\u3042\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u305d\u3061\u3089\u3067\u88dc\u3048\u308b\u3068\u3044\u3044\u3067\u3059\u306d\u3002\n", "tags": ["Revel", "Go", "golang"]}