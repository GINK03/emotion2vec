{"context": " More than 1 year has passed since last update.\u304a\u554f\u3044\u5408\u308f\u305b\u30d5\u30a9\u30fc\u30e0\u4ed8\u304dWe\u30b5\u30a4\u30c8\u3092\n\nS3\u3067\nSlack\u901a\u77e5\u3042\u308a\u3067\n\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3067(\u304a\u540d\u524d.com\u3088\u308aCNAME\u3092\u5229\u7528)\n\u72ec\u81eaSSL\u3067\uff08https/SNI\u30d9\u30fc\u30b9\uff09\n\n\u516c\u958b\u3059\u308b\u307e\u3067\u306e\u5099\u5fd8\u9332\n\u3069\u3053\u306b\u3067\u3082\u3084\u308a\u65b9\u3084\u30ea\u30f3\u30af\u306f\u8ee2\u304c\u3063\u3066\u307e\u3059\u304c\u500b\u4eba\u7684\u306b\u307e\u3068\u3081\u307e\u3059\u3002\n\u524d\u56de\u3067S3\u3067\u306e\u9759\u7684\u30b3\u30f3\u30c6\u30f3\u30c4\u914d\u4fe1\u306f\u53ef\u80fd\u3068\u306a\u308a\u307e\u3057\u305f\u306e\u3067\u3001\n\u6b21\u306flambda/Cognito\u3092\u4f7f\u3063\u3066\u554f\u3044\u5408\u308f\u305b\u30d5\u30a9\u30fc\u30e0\u3088\u308a\u9001\u4fe1\u304c\u3042\u3063\u305f\u5834\u5408\u306fslack\u901a\u77e5\u3092\u3057\u307e\u3057\u3087\u3046\u3002\n\u6d41\u308c\u306f\u3001\nCognito\u3067\u4e00\u6642\u7684\u306aIAM User\u3092\u4f5c\u6210\u3057\u3066\u3001\n\u305d\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f7f\u3063\u3066\u30d5\u30a9\u30fc\u30e0\u306e\u5165\u529b\u5185\u5bb9\u3092S3\u3067\u30c6\u30ad\u30b9\u30c8\u3067\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3001\nS3\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3092Lambda\u3067\u30d5\u30c3\u30af\u3057\u3066\u5185\u5bb9\u3092Slack\u901a\u77e5\u3067\u3059\u3002\n\u5404\u30ea\u30f3\u30af\u306f\u4ee5\u4e0b  \n\n[AWS]\u30d5\u30a9\u30fc\u30e0\u4ed8\u304d\u9759\u7684\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u72ec\u81eaSSL/\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3067\u516c\u958b\u3059\u308b\u307e\u3067\u2460-S3\u7de8\n[AWS]\u30d5\u30a9\u30fc\u30e0\u4ed8\u304d\u9759\u7684\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u72ec\u81eaSSL/\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3067\u516c\u958b\u3059\u308b\u307e\u3067\u2462-CloudFront\u7de8\n\n\n\u6280\u8853\u8981\u4ef6\n\nAWS\n\n\nS3\naws-cli\n\nCognito <-\u4eca\u56de\n\nLambda <-\u4eca\u56de\n\naws-sdk <-\u4eca\u56de\nCloudFront\n\n\ndns\u307e\u308f\u308a\n\n\n\u53c2\u8003\u30ea\u30f3\u30af\nS3 + Lambda + Cognito\u3092\u4f7f\u3063\u3066\u3001\u7c21\u5358\u304a\u554f\u3044\u5408\u308f\u305b\u30b7\u30b9\u30c6\u30e0\u69cb\u7bc9\n\nSlack\n\nIncoming Webhook\u53d6\u5f97\n\n1.Slack\u30ed\u30b0\u30a4\u30f3\u72b6\u614b\u3067\u3001https://api.slack.com/incoming-webhooks \u306b\u30a2\u30af\u30bb\u30b9\n\u4ee5\u4e0b\u3092\u30af\u30ea\u30c3\u30af\n\n\n2.\u901a\u77e5\u3092\u3057\u305f\u3044\u30c1\u30e3\u30f3\u30cd\u30eb\u307e\u305f\u306f\u500b\u4eba\u3092\u9078\u629e\n\n\n3.Incoming Webhook\u7528\u306eURL\u3092\u53d6\u5f97\n\u4ee5\u4e0b\u306eURL\u3092\u3061\u3083\u3093\u3068\u30e1\u30e2\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\n\n\u5fc5\u8981\u304c\u3042\u308c\u3070\u30a2\u30a4\u30b3\u30f3\u3084\u540d\u524d\u306a\u3069\u4e0a\u8a18\u30da\u30fc\u30b8\u306e\u4e0b\u300cIntegration Settings\u300d\u3067\u3044\u3058\u308c\u307e\u3059\u3002\n\nCognito\nS3\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u305f\u3081\u306e\u4e00\u6642\u7684\u306aIAM User\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306bCognito\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n1.Identity Pool\u306e\u4f5c\u6210\nAmazon Management Console\u3088\u308a\u300cCognito\u300d\u3092\u9078\u629e\u3002\n\u300cCreate New Identity Pool\u300d\n\u300cName\u300d\u306f\u9069\u7528\u306b\u5206\u304b\u308a\u3084\u3059\u3044\u3084\u3064\u3092\n\u300cUnauthenticated identities\u300d\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u307e\u3057\u3087\u3046\n\u7279\u5b9a\u306e\u8a8d\u8a3c\uff08ID/PASS\u3060\u3063\u305f\u308a\u3001Facebook\u8a8d\u8a3c\u3060\u3063\u305f\u308a\uff09\u3092\u3057\u306a\u3044\u3067\u3082IAM User\u3092\u4f5c\u6210\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\n\n\n2.\u65b0\u3057\u3044IAM Role\u306e\u78ba\u8a8d\n\u4e0a\u304c\u300cauthenticated role\u300d\n\u8a8d\u8a3c\u3092\u3057\u305f\u5834\u5408\u306eIAM Role\n\u4e0b\u304c\u300cunauthenticated role\u300d\n\u8a8d\u8a3c\u3092\u3057\u306a\u304b\u3063\u305f\u5834\u5408\u306eIAM Role\n\u305d\u308c\u305e\u308c\u65b0\u3057\u304f\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n\n3.Identity Pool Id \u306e\u53d6\u5f97\n\u3053\u3053\u306b\u3042\u308bID\u3092\u5f8c\u307b\u3069\u4f7f\u3044\u307e\u3059\u3002\n\n\n4.\u4f5c\u6210\u3057\u305funauthenticated Role\u306b\u6a29\u9650\u3092\u4ed8\u4e0e\nAmazon Management Console\u3088\u308a\u300cIdentity and Access Management\u300d\u3092\u9078\u629e\u3002\n\u5de6\u30e1\u30cb\u30e5\u30fc\u300cRole\u300d\u3088\u308a\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u300cUnAuth\u300d\u306e\u30ed\u30fc\u30eb\u3092\u30af\u30ea\u30c3\u30af\n\n\u30a4\u30f3\u30e9\u30a4\u30f3\u30dd\u30ea\u30b7\u30fc\u3000\u300c\u30ed\u30fc\u30eb\u30dd\u30ea\u30b7\u30fc\u306e\u4f5c\u6210\u300d\n\n\u4eca\u56de\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30dd\u30ea\u30b7\u30fc\u3092\u8ffd\u52a0 : \u7279\u5b9a\u306eBucket\u3078\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u6a29\u9650\n{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:PutObject\"\n            ],\n            \"Resource\": \"arn:aws:s3:::example.co.jp/*\" <- \u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u3059\u308bBucket\n        }\n    ]\n}\n\n\naws-sdk-js\n\n\u30d5\u30a9\u30fc\u30e0\u306e\u305f\u3081\u306e\u51e6\u7406\n\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u7bb1\u3068\u6a29\u9650\u306f\u8a2d\u5b9a\u3057\u305f\u306e\u5b9f\u969b\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\naws-sdk\u3092\u4f7f\u3046\u306e\u3067HTML\u306e\u30d8\u30c3\u30c0\u3067\u8aad\u307f\u8fbc\u3093\u3067\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\u4eca\u56de\u306fCDN\u3067\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002\n<script src=\"https://sdk.amazonaws.com/js/aws-sdk-2.1.12.min.js\"></script>\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306aHTML\u3068JS\u3092S3\u306b\u7f6e\u304d\u307e\u3059\u3002\n\u3053\u3093\u306a\u611f\u3058\u306e\u30d5\u30a9\u30fc\u30e0\u304c\u3042\u3063\u305f\u3068\u3057\u307e\u3059\uff08\u3042\u304f\u307e\u3067\u4f8b\u3067\u3059\uff09\n<div>\n    <input type=\"text\" id=\"ContactCompanyName\"/>\n    <input type=\"text\" id=\"ContactName\"/>\n    <input type=\"text\" id=\"ContactEmail\"/>\n    <input type=\"text\" id=\"ContactTel\"/>\n    <textarea cols=\"40\" rows=\"4\" id=\"ContactDetailBody\"></textarea>\n    <a href=\"#\" id=\"put_contact\"><img src=\"/send_btn.gif\" alt=\"\u9001\u4fe1\"/></a>\n</div>\n\naws-sdk\u3092\u4f7f\u3063\u3066\u9001\u4fe1\u30dc\u30bf\u30f3\u304c\u30af\u30ea\u30c3\u30af\u3057\u305f\u3068\u304d\u306b\u30d5\u30a9\u30fc\u30e0\u306e\u5185\u5bb9\u3092upload\u3057\u307e\u3059\n$('#put_contact').on('click', function() {\n    AWS.config.region = \"ap-northeast-1\";\n    AWS.config.credentials = new AWS.CognitoIdentityCredentials({IdentityPoolId: \"\u53d6\u5f97\u3057\u305f Identity Pool Id\"});\n    AWS.config.credentials.get();\n\n    //\u4f5c\u6210\u3057\u305fBucket\u3092\u6307\u5b9a\u3057\u307e\u3057\u3087\u3046\n    var bucket = 'example.co.jp';\n    var s3 = new AWS.S3({\n        params: {\n            Bucket: bucket\n        }\n    });\n\n    var now = new Date();\n    var obj = {\n        \"\u554f\u3044\u5408\u308f\u305b\u6642\u9593\" : now.toLocaleString(),\n        \"\u5fa1\u793e\u540d\" : $(\"#ConfirmContactCompanyName\").text(),\n        \"\u304a\u540d\u524d\" : $(\"#ConfirmContactName\").text(),\n        \"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\" : $(\"#ConfirmContactEmail\").text(),\n        \"\u96fb\u8a71\u756a\u53f7\" : $(\"#ConfirmContactTel\").text(),\n        \"\u304a\u554f\u3044\u5408\u308f\u305b\u5185\u5bb9\" : $(\"#ConfirmContactDetailBody\").text(),\n    };\n\n    var blob = new Blob([JSON.stringify(obj, null, 2)], {type:'text/plain'});\n\n    //Bucket\u306e\u300ccontacts\u300d\u30d5\u30a9\u30eb\u30c0\u306e\u4e0b\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n    s3.putObject({Key: \"contacts/\" + now.getTime()+\".txt\", ContentType: \"text/plain\", Body: blob},\n    function(err, data){\n        if(data !== null){\n             window.location.href = '/contact_end.html';\n        }\n        else{\n            alert(\"\u304a\u554f\u3044\u5408\u308f\u305b\u9001\u4fe1\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u304a\u624b\u6570\u3067\u3059\u304c\u518d\u5ea6\u3054\u5165\u529b\u3092\u304a\u9858\u3044\u3057\u307e\u3059\u3002\");\n            window.location.href = '/contact.html';\n        }\n    });\n});\n\n\nS3\u306bCORS\u306e\u8a2d\u5b9a\n\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u307e\u3067\u3082\u3046\u5c11\u3057\u3002\nJavaScript\u3067S3\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306fCORS\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\nCORS\u2026http://dev.classmethod.jp/etc/about-cors/\nAmazon Management Console\u304b\u3089S3\u3067\u4f5c\u6210\u3057\u305fBucket\u306b\u884c\u304d\u307e\u3057\u3087\u3046\n\n\u3053\u3053\u306b\u3053\u3093\u306a\u611f\u3058\u306b\u8a18\u8ff0\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<CORSConfiguration xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\">\n    <CORSRule>\n        <AllowedOrigin>\u30a2\u30af\u30bb\u30b9\u5143\uff08\u4eca\u56de\u306fBucket\u306e\u9759\u7684\u30b3\u30f3\u30c6\u30f3\u30c4\u914d\u4fe1\u306e\u305f\u3081\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306eURL\uff09</AllowedOrigin>\n        <AllowedMethod>PUT</AllowedMethod>\n        <AllowedHeader>*</AllowedHeader>\n    </CORSRule>\n</CORSConfiguration>\n\n\n\u3055\u3066\u3001\u75b2\u308c\u307e\u3057\u305f\u306d\u3002\n\u3082\u3046\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306f\u51fa\u6765\u308b\u306f\u305a\u3002\n\nlambda\n\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306f\u51fa\u6765\u305f\u306e\u3067\u6700\u5f8c\u306bSlack\u901a\u77e5\u306e\u305f\u3081\u306elambda function\u3092\u8a2d\u7f6e\u3057\u307e\u3059\u3002\n\n1.lambda function\u4f5c\u6210\u306e\u305f\u3081\u306e\u6e96\u5099\nnpm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff08CentOS6\u306e\u5834\u5408\uff09\nyum install epel-release\nyum install nodejs npm --enablerepo=epel\n\nnpm\u3088\u308a\u300creqest\u300d\u300caws-sdk\u300d\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nrequest\u2026HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u7c21\u5358\u306b\u3059\u308b\u305f\u3081\naws-sdk\u2026S3\u304b\u3089\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u53d6\u5f97\u306e\u305f\u3081\n\nnpm install aws-sdk\nnpm install request\n\n\n2.\u30b3\u30fc\u30c9\u30b5\u30f3\u30d7\u30eb\nindex.js\u3092\u300cnode_modules\u300d\u3068\u540c\u3058\u968e\u5c64\u306b\u4f5c\u6210\nvar aws = require('aws-sdk');\nvar s3 = new aws.S3({apiVersion: '2006-03-01'});\nvar request = require('request');\n\nexports.handler = function(event, context) {\n    var bucket = event.Records[0].s3.bucket.name;\n    var key = event.Records[0].s3.object.key;\n    s3.getObject({Bucket:bucket, Key:key}, function(err, data) {\n\n        //\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u3092\u53d6\u5f97\n        var contentType = data.ContentType;\n        var body = data.Body.toString(\"utf-8\");\n\n        var options = {\n            uri: '\u53d6\u5f97\u3057\u305fSlack\u306eIncoming Webhook URL',\n            json: true\n        };\n\n        if (key.match(/^contacts/)) {\n            options['form'] = {\n                payload: JSON.stringify({\n                    'username': 'webhook\u306eusername',\n                    'channel': '\u901a\u77e5\u3059\u308bchannel',\n                    'text': '\u304a\u554f\u3044\u5408\u308f\u305b\u304c\u3042\u308a\u307e\u3057\u305f\u3002'\n                })\n            };\n        }\n\n        request.post(options, function(err, responce, body) {\n            if(!err && responce.statusCode == 200) {\n                console.log('success');\n            } else {\n                console.log('error: ' + responce.statusCode);\n            }\n            context.done(null, '');\n        });\n    });\n};\n\n\n3.zip\u5316\n\u300cindex.html\u300d\u3068\u300cnode_modules\u300d\u3092zip\u5316\u3057\u307e\u3057\u3087\u3046\nzip -r contact.zip index.js node_modules\n\n\n4.lambda\u7528\u306eIAM Role\u3092\u4f5c\u6210\n\u30c7\u30d7\u30ed\u30a4\u524d\u306b\u3072\u3068\u624b\u9593\n\u4eca\u56de\u3001lambda function\u5185\u3067S3\u306e\u4e2d\u8eab\u3092\u53d6\u5f97\u3057\u3066\u3044\u308b\u306e\u3067\u3001lambda\u7528\u306eRole\u3092\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\u3002\nAmazon Management Console\u3088\u308a\u300cIdentity and Access Management\u300d\u3092\u9078\u629e\u3002\n\u5de6\u30e1\u30cb\u30e5\u30fc\u300cRole\u300d\u3088\u308a\u65b0\u3057\u3044Role\u3092\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\nRole\u540d\u306f\u9069\u5f53\u306b\u5206\u304b\u308a\u3084\u3059\u540d\u524d\u3067\n\nRole type \u3067Lambda\u3092\u9078\u629e\n\nS3\u306eReadOnly\u306e\u30dd\u30ea\u30b7\u30fc\u3092\u4ed8\u4e0e\n\n\u3053\u308c\u3067\u3001lambda\u7528\u306eRole\u304c\u5b8c\u6210\n\n5.lambda\u306b\u30c7\u30d7\u30ed\u30a4\n\u3055\u3066\u3001\u3044\u3088\u3044\u3088\u30c7\u30d7\u30ed\u30a4\u3067\u3059\u3002\nAmazon Management Console\u3088\u308a\u300clambda\u300d\u3092\u9078\u629e\n\u300cCreate a Lambda Function\u300d\n\u8272\u3005\u96db\u5f62\u304c\u51fa\u3066\u304d\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u30b9\u30eb\u30fc\n\n\u540d\u524d\u306f\u9069\u5f53\u306b\u5206\u304b\u308a\u3084\u3059\u3044\u3082\u306e\u3092\nUpload a ZIP file\u3067\u5148\u307b\u3069\u4f5c\u6210\u3057\u305flambda function\u3092\u307e\u3068\u3081\u305fzip\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\nRole\u306b\u5148\u307b\u3069\u4f5c\u6210\u3057\u305flambda\u7528\u306eRole\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u6700\u7d42\u78ba\u8a8d\u753b\u9762\u3067Enable\u3092\u9078\u629e\u3059\u308c\u3070lambda function\u304c\u6709\u52b9\u3068\u306a\u308a\u307e\u3059\u3002\n\u305f\u3060\u6700\u5f8c\u306b\u6700\u5f8c\u306b\u3042\u3068\u4e00\u4ed5\u4e8b\nlambda\u304c\u4f55\u306eEvent\u306bhook\u3055\u308c\u308b\u306e\u304b\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046\u3002\n\u4f5c\u6210\u3055\u308c\u305flambda function\u306e\u300cEvent source\u300d\u3092\u9078\u629e\n\u300cAdd event source\u300d\u3067hook\u3059\u308b\u30dd\u30a4\u30f3\u30c8\u3092\u8ffd\u52a0\u3057\u307e\u3059\n\nBucket\u306f\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308bBucket\nEvent type\u306fS3\u3078\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u30af\u30ea\u30a8\u30a4\u30c8\u3055\u308c\u305f\u6642\nprefix\u306f\u4eca\u56de\u306f\u300ccontacts/\u300d\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u308b\u306e\u3067\u8a18\u5165\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\n\n\n\u3053\u3053\u307e\u3067\u3067\u30b5\u30a4\u30c8\u3068\u3057\u3066\u306f\u6a5f\u80fd\u3057\u3066\u3044\u308b\n\u3055\u3066\u3001\u9577\u304f\u306a\u308a\u307e\u3057\u305f\u304c\u4eca\u56de\u306f\u3053\u3053\u3067\u7d42\u4e86\u3067\u3059\u3002\n\u304d\u3063\u3068\u9759\u7684\u30b3\u30f3\u30c6\u30f3\u30c4\u8d8a\u3057\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u304cslack\u3067\u901a\u77e5\u3055\u308c\u3066\u3044\u308b\uff08\uff8a\uff7d\uff9e\n\u6b21\u306famazon\u304b\u3089\u4e0e\u3048\u3089\u308c\u308b\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u7528\u306e\u9577\u3044URL\u3067\u306f\u306a\u304f\n\u72ec\u81ea\u306e\u30c9\u30e1\u30a4\u30f3\u3067\u30b5\u30a4\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306e\u3068\u3001\u901a\u4fe1\u306eSSL\u5316\u3067\u3059\u3002\n\n[AWS]\u30d5\u30a9\u30fc\u30e0\u4ed8\u304d\u9759\u7684\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u72ec\u81eaSSL/\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3067\u516c\u958b\u3059\u308b\u307e\u3067\u2462-CloudFront\u7de8\n\n\u304a\u554f\u3044\u5408\u308f\u305b\u30d5\u30a9\u30fc\u30e0\u4ed8\u304dWe\u30b5\u30a4\u30c8\u3092\n\n- S3\u3067\n- Slack\u901a\u77e5\u3042\u308a\u3067\n- \u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3067(\u304a\u540d\u524d.com\u3088\u308aCNAME\u3092\u5229\u7528)\n- \u72ec\u81eaSSL\u3067\uff08https/SNI\u30d9\u30fc\u30b9\uff09\n\n\u516c\u958b\u3059\u308b\u307e\u3067\u306e\u5099\u5fd8\u9332\n\u3069\u3053\u306b\u3067\u3082\u3084\u308a\u65b9\u3084\u30ea\u30f3\u30af\u306f\u8ee2\u304c\u3063\u3066\u307e\u3059\u304c\u500b\u4eba\u7684\u306b\u307e\u3068\u3081\u307e\u3059\u3002\n\n\u524d\u56de\u3067S3\u3067\u306e\u9759\u7684\u30b3\u30f3\u30c6\u30f3\u30c4\u914d\u4fe1\u306f\u53ef\u80fd\u3068\u306a\u308a\u307e\u3057\u305f\u306e\u3067\u3001\n\u6b21\u306f**lambda/Cognito**\u3092\u4f7f\u3063\u3066\u554f\u3044\u5408\u308f\u305b\u30d5\u30a9\u30fc\u30e0\u3088\u308a\u9001\u4fe1\u304c\u3042\u3063\u305f\u5834\u5408\u306f**slack\u901a\u77e5**\u3092\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u6d41\u308c\u306f\u3001\nCognito\u3067\u4e00\u6642\u7684\u306aIAM User\u3092\u4f5c\u6210\u3057\u3066\u3001\n\u305d\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f7f\u3063\u3066\u30d5\u30a9\u30fc\u30e0\u306e\u5165\u529b\u5185\u5bb9\u3092S3\u3067\u30c6\u30ad\u30b9\u30c8\u3067\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3001\nS3\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3092Lambda\u3067\u30d5\u30c3\u30af\u3057\u3066\u5185\u5bb9\u3092Slack\u901a\u77e5\u3067\u3059\u3002\n\n\u5404\u30ea\u30f3\u30af\u306f\u4ee5\u4e0b  \n\n* [[AWS]\u30d5\u30a9\u30fc\u30e0\u4ed8\u304d\u9759\u7684\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u72ec\u81eaSSL/\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3067\u516c\u958b\u3059\u308b\u307e\u3067\u2460-S3\u7de8](http://qiita.com/tutida/items/bfc3865f2035483d2c43)\n* [[AWS]\u30d5\u30a9\u30fc\u30e0\u4ed8\u304d\u9759\u7684\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u72ec\u81eaSSL/\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3067\u516c\u958b\u3059\u308b\u307e\u3067\u2462-CloudFront\u7de8](http://qiita.com/tutida/items/7a0396008d19d9051511)\n\n## \u6280\u8853\u8981\u4ef6\n\n- AWS\n - S3\n - aws-cli\n - **Cognito** <-\u4eca\u56de\n - **Lambda** <-\u4eca\u56de\n - **aws-sdk** <-\u4eca\u56de\n - CloudFront\n- dns\u307e\u308f\u308a\n\n## \u53c2\u8003\u30ea\u30f3\u30af\n[S3 + Lambda + Cognito\u3092\u4f7f\u3063\u3066\u3001\u7c21\u5358\u304a\u554f\u3044\u5408\u308f\u305b\u30b7\u30b9\u30c6\u30e0\u69cb\u7bc9](http://qiita.com/takuma_yoshida/items/3bd3af8b09307d25981a)\n\n## Slack\n### Incoming Webhook\u53d6\u5f97\n### 1.Slack\u30ed\u30b0\u30a4\u30f3\u72b6\u614b\u3067\u3001https://api.slack.com/incoming-webhooks \u306b\u30a2\u30af\u30bb\u30b9\n\n\u4ee5\u4e0b\u3092\u30af\u30ea\u30c3\u30af\n![2015-12-22_21h46_59.png](https://qiita-image-store.s3.amazonaws.com/0/74129/398a065b-51ab-fcd5-626d-3182a3e1c203.png)\n\n### 2.\u901a\u77e5\u3092\u3057\u305f\u3044\u30c1\u30e3\u30f3\u30cd\u30eb\u307e\u305f\u306f\u500b\u4eba\u3092\u9078\u629e\n![2015-12-22_21h49_31.png](https://qiita-image-store.s3.amazonaws.com/0/74129/02b56605-aedc-0218-3e7a-e32468b28208.png)\n\n### 3.Incoming Webhook\u7528\u306eURL\u3092\u53d6\u5f97\n\u4ee5\u4e0b\u306eURL\u3092\u3061\u3083\u3093\u3068\u30e1\u30e2\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\n![2015-12-22_21h52_01.png](https://qiita-image-store.s3.amazonaws.com/0/74129/3ba53ea8-d32a-a42d-7b41-12952f7e4561.png)\n\n\u5fc5\u8981\u304c\u3042\u308c\u3070\u30a2\u30a4\u30b3\u30f3\u3084\u540d\u524d\u306a\u3069\u4e0a\u8a18\u30da\u30fc\u30b8\u306e\u4e0b\u300cIntegration Settings\u300d\u3067\u3044\u3058\u308c\u307e\u3059\u3002\n\n## Cognito\nS3\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u305f\u3081\u306e\u4e00\u6642\u7684\u306aIAM User\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306bCognito\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n### 1.Identity Pool\u306e\u4f5c\u6210\nAmazon Management Console\u3088\u308a\u300cCognito\u300d\u3092\u9078\u629e\u3002\n\u300cCreate New Identity Pool\u300d\n\u300cName\u300d\u306f\u9069\u7528\u306b\u5206\u304b\u308a\u3084\u3059\u3044\u3084\u3064\u3092\n\u300cUnauthenticated identities\u300d\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u307e\u3057\u3087\u3046\n\u7279\u5b9a\u306e\u8a8d\u8a3c\uff08ID/PASS\u3060\u3063\u305f\u308a\u3001Facebook\u8a8d\u8a3c\u3060\u3063\u305f\u308a\uff09\u3092\u3057\u306a\u3044\u3067\u3082IAM User\u3092\u4f5c\u6210\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\n![2015-12-22_22h09_18.png](https://qiita-image-store.s3.amazonaws.com/0/74129/06cd71b1-ab70-6f7c-90fb-87834b60cdb1.png)\n\n### 2.\u65b0\u3057\u3044IAM Role\u306e\u78ba\u8a8d\n\u4e0a\u304c\u300cauthenticated role\u300d\n\u8a8d\u8a3c\u3092\u3057\u305f\u5834\u5408\u306eIAM Role\n\u4e0b\u304c\u300cunauthenticated role\u300d\n\u8a8d\u8a3c\u3092\u3057\u306a\u304b\u3063\u305f\u5834\u5408\u306eIAM Role\n\n\u305d\u308c\u305e\u308c\u65b0\u3057\u304f\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n![2015-12-22_22h10_51.png](https://qiita-image-store.s3.amazonaws.com/0/74129/40dc7bcc-ec86-606f-baf9-c8717c90d8a0.png)\n\n### 3.Identity Pool Id \u306e\u53d6\u5f97\n\u3053\u3053\u306b\u3042\u308bID\u3092\u5f8c\u307b\u3069\u4f7f\u3044\u307e\u3059\u3002\n![2015-12-22_22h11_21.png](https://qiita-image-store.s3.amazonaws.com/0/74129/73971f36-fe94-c6aa-e1df-039e932a6095.png)\n\n### 4.\u4f5c\u6210\u3057\u305funauthenticated Role\u306b\u6a29\u9650\u3092\u4ed8\u4e0e\nAmazon Management Console\u3088\u308a\u300cIdentity and Access Management\u300d\u3092\u9078\u629e\u3002\n\u5de6\u30e1\u30cb\u30e5\u30fc\u300cRole\u300d\u3088\u308a\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u300cUnAuth\u300d\u306e\u30ed\u30fc\u30eb\u3092\u30af\u30ea\u30c3\u30af\n![2015-12-22_22h12_53.png](https://qiita-image-store.s3.amazonaws.com/0/74129/7ebb5578-9169-57b6-27f9-c507084c9b5a.png)\n\n\u30a4\u30f3\u30e9\u30a4\u30f3\u30dd\u30ea\u30b7\u30fc\u3000\u300c\u30ed\u30fc\u30eb\u30dd\u30ea\u30b7\u30fc\u306e\u4f5c\u6210\u300d\n![2015-12-22_22h13_29.png](https://qiita-image-store.s3.amazonaws.com/0/74129/c5d5ac63-3375-2e6d-f177-1681899a29c0.png)\n\n\u4eca\u56de\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30dd\u30ea\u30b7\u30fc\u3092\u8ffd\u52a0 : \u7279\u5b9a\u306eBucket\u3078\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u6a29\u9650\n\n```\n{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"s3:PutObject\"\n            ],\n            \"Resource\": \"arn:aws:s3:::example.co.jp/*\" <- \u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u3059\u308bBucket\n        }\n    ]\n}\n```\n## aws-sdk-js\n### \u30d5\u30a9\u30fc\u30e0\u306e\u305f\u3081\u306e\u51e6\u7406\n\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u7bb1\u3068\u6a29\u9650\u306f\u8a2d\u5b9a\u3057\u305f\u306e\u5b9f\u969b\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n**aws-sdk\u3092\u4f7f\u3046\u306e\u3067HTML\u306e\u30d8\u30c3\u30c0\u3067\u8aad\u307f\u8fbc\u3093\u3067\u304a\u304d\u307e\u3057\u3087\u3046\u3002**\n\u4eca\u56de\u306fCDN\u3067\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002\n\n```\n<script src=\"https://sdk.amazonaws.com/js/aws-sdk-2.1.12.min.js\"></script>\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306aHTML\u3068JS\u3092S3\u306b\u7f6e\u304d\u307e\u3059\u3002\n\u3053\u3093\u306a\u611f\u3058\u306e\u30d5\u30a9\u30fc\u30e0\u304c\u3042\u3063\u305f\u3068\u3057\u307e\u3059\uff08\u3042\u304f\u307e\u3067\u4f8b\u3067\u3059\uff09\n\n```\n<div>\n    <input type=\"text\" id=\"ContactCompanyName\"/>\n    <input type=\"text\" id=\"ContactName\"/>\n    <input type=\"text\" id=\"ContactEmail\"/>\n    <input type=\"text\" id=\"ContactTel\"/>\n    <textarea cols=\"40\" rows=\"4\" id=\"ContactDetailBody\"></textarea>\n    <a href=\"#\" id=\"put_contact\"><img src=\"/send_btn.gif\" alt=\"\u9001\u4fe1\"/></a>\n</div>\n```\n\naws-sdk\u3092\u4f7f\u3063\u3066\u9001\u4fe1\u30dc\u30bf\u30f3\u304c\u30af\u30ea\u30c3\u30af\u3057\u305f\u3068\u304d\u306b\u30d5\u30a9\u30fc\u30e0\u306e\u5185\u5bb9\u3092upload\u3057\u307e\u3059\n\n```\n$('#put_contact').on('click', function() {\n    AWS.config.region = \"ap-northeast-1\";\n    AWS.config.credentials = new AWS.CognitoIdentityCredentials({IdentityPoolId: \"\u53d6\u5f97\u3057\u305f Identity Pool Id\"});\n    AWS.config.credentials.get();\n\n\t//\u4f5c\u6210\u3057\u305fBucket\u3092\u6307\u5b9a\u3057\u307e\u3057\u3087\u3046\n    var bucket = 'example.co.jp';\n    var s3 = new AWS.S3({\n        params: {\n            Bucket: bucket\n        }\n    });\n\n    var now = new Date();\n    var obj = {\n        \"\u554f\u3044\u5408\u308f\u305b\u6642\u9593\" : now.toLocaleString(),\n        \"\u5fa1\u793e\u540d\" : $(\"#ConfirmContactCompanyName\").text(),\n        \"\u304a\u540d\u524d\" : $(\"#ConfirmContactName\").text(),\n        \"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\" : $(\"#ConfirmContactEmail\").text(),\n        \"\u96fb\u8a71\u756a\u53f7\" : $(\"#ConfirmContactTel\").text(),\n        \"\u304a\u554f\u3044\u5408\u308f\u305b\u5185\u5bb9\" : $(\"#ConfirmContactDetailBody\").text(),\n    };\n\n    var blob = new Blob([JSON.stringify(obj, null, 2)], {type:'text/plain'});\n\n\t//Bucket\u306e\u300ccontacts\u300d\u30d5\u30a9\u30eb\u30c0\u306e\u4e0b\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n    s3.putObject({Key: \"contacts/\" + now.getTime()+\".txt\", ContentType: \"text/plain\", Body: blob},\n    function(err, data){\n        if(data !== null){\n             window.location.href = '/contact_end.html';\n        }\n        else{\n            alert(\"\u304a\u554f\u3044\u5408\u308f\u305b\u9001\u4fe1\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u304a\u624b\u6570\u3067\u3059\u304c\u518d\u5ea6\u3054\u5165\u529b\u3092\u304a\u9858\u3044\u3057\u307e\u3059\u3002\");\n            window.location.href = '/contact.html';\n        }\n    });\n});\n```\n\n### S3\u306bCORS\u306e\u8a2d\u5b9a\n\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u307e\u3067\u3082\u3046\u5c11\u3057\u3002\nJavaScript\u3067S3\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306fCORS\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u3068\u306a\u308a\u307e\u3059\u3002\nCORS\u2026http://dev.classmethod.jp/etc/about-cors/\nAmazon Management Console\u304b\u3089S3\u3067\u4f5c\u6210\u3057\u305fBucket\u306b\u884c\u304d\u307e\u3057\u3087\u3046\n![2015-12-22_23h06_37.png](https://qiita-image-store.s3.amazonaws.com/0/74129/085a4fd1-4688-4776-9c17-27307fe397f8.png)\n\u3053\u3053\u306b\u3053\u3093\u306a\u611f\u3058\u306b\u8a18\u8ff0\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<CORSConfiguration xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\">\n    <CORSRule>\n        <AllowedOrigin>\u30a2\u30af\u30bb\u30b9\u5143\uff08\u4eca\u56de\u306fBucket\u306e\u9759\u7684\u30b3\u30f3\u30c6\u30f3\u30c4\u914d\u4fe1\u306e\u305f\u3081\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306eURL\uff09</AllowedOrigin>\n        <AllowedMethod>PUT</AllowedMethod>\n        <AllowedHeader>*</AllowedHeader>\n    </CORSRule>\n</CORSConfiguration>\n\n```\n\n\u3055\u3066\u3001\u75b2\u308c\u307e\u3057\u305f\u306d\u3002\n\u3082\u3046\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306f\u51fa\u6765\u308b\u306f\u305a\u3002\n\n## lambda\n\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306f\u51fa\u6765\u305f\u306e\u3067\u6700\u5f8c\u306bSlack\u901a\u77e5\u306e\u305f\u3081\u306elambda function\u3092\u8a2d\u7f6e\u3057\u307e\u3059\u3002\n### 1.lambda function\u4f5c\u6210\u306e\u305f\u3081\u306e\u6e96\u5099\nnpm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff08CentOS6\u306e\u5834\u5408\uff09\n\n```\nyum install epel-release\nyum install nodejs npm --enablerepo=epel\n```\n\nnpm\u3088\u308a\u300creqest\u300d\u300caws-sdk\u300d\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n* request\u2026HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u7c21\u5358\u306b\u3059\u308b\u305f\u3081\n* aws-sdk\u2026S3\u304b\u3089\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u53d6\u5f97\u306e\u305f\u3081\n\n```\nnpm install aws-sdk\nnpm install request\n```\n\n### 2.\u30b3\u30fc\u30c9\u30b5\u30f3\u30d7\u30eb\nindex.js\u3092\u300cnode_modules\u300d\u3068\u540c\u3058\u968e\u5c64\u306b\u4f5c\u6210\n\n```\nvar aws = require('aws-sdk');\nvar s3 = new aws.S3({apiVersion: '2006-03-01'});\nvar request = require('request');\n\nexports.handler = function(event, context) {\n    var bucket = event.Records[0].s3.bucket.name;\n    var key = event.Records[0].s3.object.key;\n    s3.getObject({Bucket:bucket, Key:key}, function(err, data) {\n\n        //\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u3092\u53d6\u5f97\n        var contentType = data.ContentType;\n        var body = data.Body.toString(\"utf-8\");\n\n        var options = {\n            uri: '\u53d6\u5f97\u3057\u305fSlack\u306eIncoming Webhook URL',\n            json: true\n        };\n\n        if (key.match(/^contacts/)) {\n            options['form'] = {\n                payload: JSON.stringify({\n                    'username': 'webhook\u306eusername',\n                    'channel': '\u901a\u77e5\u3059\u308bchannel',\n                    'text': '\u304a\u554f\u3044\u5408\u308f\u305b\u304c\u3042\u308a\u307e\u3057\u305f\u3002'\n                })\n            };\n        }\n\n        request.post(options, function(err, responce, body) {\n            if(!err && responce.statusCode == 200) {\n                console.log('success');\n            } else {\n                console.log('error: ' + responce.statusCode);\n            }\n            context.done(null, '');\n        });\n    });\n};\n```\n\n### 3.zip\u5316\n\u300cindex.html\u300d\u3068\u300cnode_modules\u300d\u3092zip\u5316\u3057\u307e\u3057\u3087\u3046\n\n```\nzip -r contact.zip index.js node_modules\n```\n\n### 4.lambda\u7528\u306eIAM Role\u3092\u4f5c\u6210\n\u30c7\u30d7\u30ed\u30a4\u524d\u306b\u3072\u3068\u624b\u9593\n\u4eca\u56de\u3001lambda function\u5185\u3067S3\u306e\u4e2d\u8eab\u3092\u53d6\u5f97\u3057\u3066\u3044\u308b\u306e\u3067\u3001lambda\u7528\u306eRole\u3092\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\u3002\n\nAmazon Management Console\u3088\u308a\u300cIdentity and Access Management\u300d\u3092\u9078\u629e\u3002\n\u5de6\u30e1\u30cb\u30e5\u30fc\u300cRole\u300d\u3088\u308a\u65b0\u3057\u3044Role\u3092\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\nRole\u540d\u306f\u9069\u5f53\u306b\u5206\u304b\u308a\u3084\u3059\u540d\u524d\u3067\n\n![2015-12-22_23h37_26.png](https://qiita-image-store.s3.amazonaws.com/0/74129/6e250fbb-af1a-a036-1c2e-15d0a5764e35.png)\n\nRole type \u3067Lambda\u3092\u9078\u629e\n\n![2015-12-22_23h40_07.png](https://qiita-image-store.s3.amazonaws.com/0/74129/b28c0c8b-6638-3c03-d72a-da86c1fa6a8c.png)\n\nS3\u306eReadOnly\u306e\u30dd\u30ea\u30b7\u30fc\u3092\u4ed8\u4e0e\n\n![2015-12-22_23h47_46.png](https://qiita-image-store.s3.amazonaws.com/0/74129/ba6d23cb-7e23-7036-48ca-49bbaa14a60a.png)\n\n\u3053\u308c\u3067\u3001lambda\u7528\u306eRole\u304c\u5b8c\u6210\n\n### 5.lambda\u306b\u30c7\u30d7\u30ed\u30a4\n\n\u3055\u3066\u3001\u3044\u3088\u3044\u3088\u30c7\u30d7\u30ed\u30a4\u3067\u3059\u3002\n\nAmazon Management Console\u3088\u308a\u300clambda\u300d\u3092\u9078\u629e\n\u300cCreate a Lambda Function\u300d\n\u8272\u3005\u96db\u5f62\u304c\u51fa\u3066\u304d\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u30b9\u30eb\u30fc\n\n![2015-12-22_23h49_34.png](https://qiita-image-store.s3.amazonaws.com/0/74129/2f0fcfcc-fbb3-1894-801f-432288682fbc.png)\n\n\u540d\u524d\u306f\u9069\u5f53\u306b\u5206\u304b\u308a\u3084\u3059\u3044\u3082\u306e\u3092\nUpload a ZIP file\u3067\u5148\u307b\u3069\u4f5c\u6210\u3057\u305flambda function\u3092\u307e\u3068\u3081\u305fzip\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\nRole\u306b\u5148\u307b\u3069\u4f5c\u6210\u3057\u305flambda\u7528\u306eRole\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n![\u8aac\u660e](/system/media/files/000/000/938/original/2015-12-22_23h50_42.png?1450796605)![2015-12-22_23h50_42.png](https://qiita-image-store.s3.amazonaws.com/0/74129/fc6fdbd4-9f8e-4e8e-d812-a9f8b4f4f424.png)\n\n\u6700\u7d42\u78ba\u8a8d\u753b\u9762\u3067Enable\u3092\u9078\u629e\u3059\u308c\u3070lambda function\u304c\u6709\u52b9\u3068\u306a\u308a\u307e\u3059\u3002\n\u305f\u3060\u6700\u5f8c\u306b\u6700\u5f8c\u306b\u3042\u3068\u4e00\u4ed5\u4e8b\nlambda\u304c\u4f55\u306eEvent\u306bhook\u3055\u308c\u308b\u306e\u304b\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u4f5c\u6210\u3055\u308c\u305flambda function\u306e\u300cEvent source\u300d\u3092\u9078\u629e\n\u300cAdd event source\u300d\u3067hook\u3059\u308b\u30dd\u30a4\u30f3\u30c8\u3092\u8ffd\u52a0\u3057\u307e\u3059\n\n![2015-12-23_00h10_35.png](https://qiita-image-store.s3.amazonaws.com/0/74129/7e950b40-de51-d913-0110-7a67caaecfc0.png)\n\nBucket\u306f\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308bBucket\nEvent type\u306fS3\u3078\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u30af\u30ea\u30a8\u30a4\u30c8\u3055\u308c\u305f\u6642\nprefix\u306f\u4eca\u56de\u306f\u300ccontacts/\u300d\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u308b\u306e\u3067\u8a18\u5165\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\n\n![2015-12-23_00h11_25.png](https://qiita-image-store.s3.amazonaws.com/0/74129/e0414ee5-9cc8-cf53-e57e-d6c41726ad95.png)\n\n## \u3053\u3053\u307e\u3067\u3067\u30b5\u30a4\u30c8\u3068\u3057\u3066\u306f\u6a5f\u80fd\u3057\u3066\u3044\u308b\n\n\u3055\u3066\u3001\u9577\u304f\u306a\u308a\u307e\u3057\u305f\u304c\u4eca\u56de\u306f\u3053\u3053\u3067\u7d42\u4e86\u3067\u3059\u3002\n\u304d\u3063\u3068\u9759\u7684\u30b3\u30f3\u30c6\u30f3\u30c4\u8d8a\u3057\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u304cslack\u3067\u901a\u77e5\u3055\u308c\u3066\u3044\u308b\uff08\uff8a\uff7d\uff9e\n\n\u6b21\u306famazon\u304b\u3089\u4e0e\u3048\u3089\u308c\u308b\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u7528\u306e\u9577\u3044URL\u3067\u306f\u306a\u304f\n\u72ec\u81ea\u306e\u30c9\u30e1\u30a4\u30f3\u3067\u30b5\u30a4\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306e\u3068\u3001\u901a\u4fe1\u306eSSL\u5316\u3067\u3059\u3002\n\n* [[AWS]\u30d5\u30a9\u30fc\u30e0\u4ed8\u304d\u9759\u7684\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u72ec\u81eaSSL/\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3067\u516c\u958b\u3059\u308b\u307e\u3067\u2462-CloudFront\u7de8](http://qiita.com/tutida/items/7a0396008d19d9051511)\n", "tags": ["AWS", "S3", "cognito", "lambda", "Slack"]}