{"context": "\u753b\u50cf\u8a8d\u8b58\u306b\u5b9a\u8a55\u306e\u3042\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u30fbCaffe\u3092\u4f7f\u3063\u3066\u307f\u305f\u304f\u306a\u308a\u3001\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u30b5\u30f3\u30d7\u30eb\uff08mnist\uff09\u3092\u52d5\u304b\u3059\u307e\u3067\u306e\u624b\u9806\u3092\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u74b0\u5883\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\nOS: Ubuntu 16.04.1 LTS\nGPU\u30c9\u30e9\u30a4\u30d0: NVIDIA 367.57 \n\n\n\uff11\uff0e\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4e00\u5f0f\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n~\n$ sudo apt-get install libatlas-base-dev libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libboost-all-dev libhdf5-serial-dev libgflags-dev libgoogle-glog-dev liblmdb-dev protobuf-compiler git\n\n\n\n\uff12\uff0eCaffe\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\ngit\u304b\u3089Caffe\u306e\u30bd\u30fc\u30b9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n~\n$ git clone https://github.com/BVLC/caffe.git\n$ cd caffe\n\n\n\n\uff13\uff0e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u7de8\u96c6\n\u307e\u305a\u306f\u30b3\u30f3\u30d1\u30a4\u30eb\u7528\u306emake\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\ncaffe/\n$ cp Makefile.config.example Makefile.config\n\n\n\u3053\u306e\u307e\u307e\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u3068\u3044\u304f\u3064\u304b\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u306e\u3067\u3001\n\u305d\u308c\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u3044\u304f\u3064\u304b\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\n\uff13\uff0e\uff11\uff0ehdf5\u307e\u308f\u308a\n\"can't find hdf5.h\"\u306a\u3069\u3068\u8a00\u308f\u308c\u305f\u5834\u5408\u306f\u3001\n\u307e\u305alibhdf5-dev\u3092apt-get\u3057\u305f\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u306e\u306b\u30a8\u30e9\u30fc\u3092\u5410\u304f\u5834\u5408\u306f\u3001\nMakefile.config\u306eINCLUDE_DIRS\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\n\ncaffe/Makefile.config\n#INCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include /usr/include/hdf5/serial/\nINCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include /usr/include/hdf5/serial/\n\n\n\n\uff13\uff0e\uff12\uff0ecuda\u307e\u308f\u308a\n\u6b21\u306b\u3001\"/usr/local/cuda/bin/nvcc: not found\"\u3068\u8a00\u308f\u308c\u305f\u5834\u5408\u306f\u3001\nMakefile.config\u306eCUDA_DIR\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\n\ncaffe/Makefile.config\n#CUDA_DIR := /usr/local/cuda\nCUDA_DIR := /usr\n\n\n\n\uff13\uff0e\uff13\uff0ememcpy\u307e\u308f\u308a\nmemcpy\u307e\u308f\u308a\u3067\u30a8\u30e9\u30fc\u3092\u5410\u3044\u305f\u5834\u5408\u306b\u306f\u3001caffe/Makefile\u306eNVCCFLAGS\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\uff08Makefile.config\u3067\u306f\u306a\u3044\u3067\u3059\u3002\u7d1b\u3089\u308f\u3057\u3044\uff09\n\ncaffe/Makefile\n#NVCCFLAGS += -ccbin=$(CXX) -Xcompiler -fPIC $(COMMON_FLAGS)\nNVCCFLAGS += -D_FORCE_INLINES -ccbin=$(CXX) -Xcompiler -fPIC $(COMMON_FLAGS)\n\n\n\n\uff13\uff0e\uff14\uff0elhdf5\u307e\u308f\u308a\n\"/usr/bin/ld: -hdf5_hl \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\"\u3068\u8a00\u308f\u308c\u305f\u3068\u304d\u306f\u3001\n/usr/lib/x86_64-linux-gnu\u306e\u4e2d\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u8cbc\u308a\u307e\u3059\u3002\n\n/usr/lib/x86_64-linux-gnu\n$ cd /usr/lib/x86_64-linux-gnu\n$ sudo ln -s libhdf5_serial.so.10.1.0 libhdf5.so\n$ sudo ln -s libhdf5_serial_hl.so.10.0.2 libhdf5_hl.so\n\n\n\n\uff14\uff0e\u30b3\u30f3\u30d1\u30a4\u30eb\n\u3053\u3053\u307e\u3067\u6765\u308c\u3070\u3001\u5fc5\u8981\u306a\u8a2d\u5b9a\u306f\u5927\u4f53\u7d42\u308f\u3063\u305f\u306f\u305a\u3067\u3059\u3002\n\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u3001\u30c6\u30b9\u30c8\u3092\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\ncaffe\n$ make\n$ make runtest\n\n\nruntest\u306e\u7d50\u679c\u304cPASSED\u3068\u306a\u308c\u3070\u3001Caffe\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3067\u3059\u3002\n\n\n\uff15\uff0e\u30b5\u30f3\u30d7\u30eb\u306e\u30c6\u30b9\u30c8\ncaffe\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5b66\u7fd2\u7528\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u4e00\u5f0f\u304c\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\u306a\u306e\u3067\u3001\u3042\u3068\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u9806\u3005\u306b\u53e9\u304f\u3060\u3051\u3067\u30b5\u30f3\u30d7\u30eb\u304c\u52d5\u304b\u305b\u307e\u3059\u3002\n\u307e\u305a\u306fmnist\u306e\u30c7\u30fc\u30bf\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u5909\u63db\u3057\u307e\u3057\u3087\u3046\u3002\n\ncaffe/\n$ data/mnist/get_mnist.sh\n$ examples/mnist/create_mnist.sh\n\n\n\u5b66\u7fd2\u7528\u30c7\u30fc\u30bf\u304c\u624b\u306b\u5165\u3063\u305f\u306e\u3067\u3001\u30e2\u30c7\u30eb\u3092\u5b66\u7fd2\u3055\u305b\u307e\u3059\u3002\n\ncaffe/\n$ examples/mnist/train_lenet.sh\n\n\n\u6700\u5f8c\u306b\u3001\u5b66\u7fd2\u6e08\u307f\u30e2\u30c7\u30eb\u3092\u5229\u7528\u3057\u3066\u3001mnist\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\ncaffe/\n$ ./build/tools/caffe test -model ./examples/mnist/let_train_test.prototxt -weights ./examples/mnist/lenet_iter_10000.caffemodel\n\n\n\u3053\u3053\u307e\u3067\u3067\u4e00\u901a\u308aCaffe\u3092\u52d5\u304b\u3059\u3053\u3068\u304c\u51fa\u6765\u307e\u3057\u305f\u3002\n\n\u53c2\u8003\u6587\u732e\n\n\u3010Caffe\u3011\u306f\u3058\u3081\u3066Caffe\u3092make\u3059\u308b\u307e\u3067On Ubuntu16.04\n\u521d\u3081\u3066\u306e\u30c7\u30a3\u30fc\u30d7\u30e9\u30fc\u30cb\u30f3\u30b0\uff0c\u6b66\u4e95\u5b8f\u5c06 \u8457\n\n\u753b\u50cf\u8a8d\u8b58\u306b\u5b9a\u8a55\u306e\u3042\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u30fbCaffe\u3092\u4f7f\u3063\u3066\u307f\u305f\u304f\u306a\u308a\u3001\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u30b5\u30f3\u30d7\u30eb\uff08mnist\uff09\u3092\u52d5\u304b\u3059\u307e\u3067\u306e\u624b\u9806\u3092\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u74b0\u5883\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n* OS: Ubuntu 16.04.1 LTS\n* GPU\u30c9\u30e9\u30a4\u30d0: NVIDIA 367.57 \n\n# \uff11\uff0e\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4e00\u5f0f\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```bash:~\n$ sudo apt-get install libatlas-base-dev libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libboost-all-dev libhdf5-serial-dev libgflags-dev libgoogle-glog-dev liblmdb-dev protobuf-compiler git\n```\n\n# \uff12\uff0eCaffe\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\ngit\u304b\u3089Caffe\u306e\u30bd\u30fc\u30b9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n```bash:~\n$ git clone https://github.com/BVLC/caffe.git\n$ cd caffe\n```\n\n# \uff13\uff0e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u7de8\u96c6\n\n\u307e\u305a\u306f\u30b3\u30f3\u30d1\u30a4\u30eb\u7528\u306emake\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bash:caffe/\n$ cp Makefile.config.example Makefile.config\n```\n\n\u3053\u306e\u307e\u307e\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u3068\u3044\u304f\u3064\u304b\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u306e\u3067\u3001\n\u305d\u308c\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u3044\u304f\u3064\u304b\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\n## \uff13\uff0e\uff11\uff0ehdf5\u307e\u308f\u308a\n\n\"can't find hdf5.h\"\u306a\u3069\u3068\u8a00\u308f\u308c\u305f\u5834\u5408\u306f\u3001\n\u307e\u305alibhdf5-dev\u3092apt-get\u3057\u305f\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u306e\u306b\u30a8\u30e9\u30fc\u3092\u5410\u304f\u5834\u5408\u306f\u3001\nMakefile.config\u306eINCLUDE_DIRS\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\n\n```bash:caffe/Makefile.config\n#INCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include /usr/include/hdf5/serial/\nINCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include /usr/include/hdf5/serial/\n```\n\n## \uff13\uff0e\uff12\uff0ecuda\u307e\u308f\u308a\n\n\u6b21\u306b\u3001\"/usr/local/cuda/bin/nvcc: not found\"\u3068\u8a00\u308f\u308c\u305f\u5834\u5408\u306f\u3001\nMakefile.config\u306eCUDA_DIR\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\n\n```bash:caffe/Makefile.config\n#CUDA_DIR := /usr/local/cuda\nCUDA_DIR := /usr\n```\n\n## \uff13\uff0e\uff13\uff0ememcpy\u307e\u308f\u308a\n\nmemcpy\u307e\u308f\u308a\u3067\u30a8\u30e9\u30fc\u3092\u5410\u3044\u305f\u5834\u5408\u306b\u306f\u3001caffe/Makefile\u306eNVCCFLAGS\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\uff08Makefile.config\u3067\u306f\u306a\u3044\u3067\u3059\u3002\u7d1b\u3089\u308f\u3057\u3044\uff09\n\n```bash:caffe/Makefile\n#NVCCFLAGS += -ccbin=$(CXX) -Xcompiler -fPIC $(COMMON_FLAGS)\nNVCCFLAGS += -D_FORCE_INLINES -ccbin=$(CXX) -Xcompiler -fPIC $(COMMON_FLAGS)\n```\n\n## \uff13\uff0e\uff14\uff0elhdf5\u307e\u308f\u308a\n\n\"/usr/bin/ld: -hdf5_hl \u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\"\u3068\u8a00\u308f\u308c\u305f\u3068\u304d\u306f\u3001\n/usr/lib/x86_64-linux-gnu\u306e\u4e2d\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u8cbc\u308a\u307e\u3059\u3002\n\n```bash:/usr/lib/x86_64-linux-gnu\n$ cd /usr/lib/x86_64-linux-gnu\n$ sudo ln -s libhdf5_serial.so.10.1.0 libhdf5.so\n$ sudo ln -s libhdf5_serial_hl.so.10.0.2 libhdf5_hl.so\n```\n\n# \uff14\uff0e\u30b3\u30f3\u30d1\u30a4\u30eb\n\n\u3053\u3053\u307e\u3067\u6765\u308c\u3070\u3001\u5fc5\u8981\u306a\u8a2d\u5b9a\u306f\u5927\u4f53\u7d42\u308f\u3063\u305f\u306f\u305a\u3067\u3059\u3002\n\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u3001\u30c6\u30b9\u30c8\u3092\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```bash:caffe\n$ make\n$ make runtest\n```\n\nruntest\u306e\u7d50\u679c\u304cPASSED\u3068\u306a\u308c\u3070\u3001Caffe\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3067\u3059\u3002\n\n![passed.png](https://qiita-image-store.s3.amazonaws.com/0/127680/ea69b039-d35a-4d0f-febb-e2f7173b8d7a.png)\n\n# \uff15\uff0e\u30b5\u30f3\u30d7\u30eb\u306e\u30c6\u30b9\u30c8\n\ncaffe\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5b66\u7fd2\u7528\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u4e00\u5f0f\u304c\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u306a\u306e\u3067\u3001\u3042\u3068\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u9806\u3005\u306b\u53e9\u304f\u3060\u3051\u3067\u30b5\u30f3\u30d7\u30eb\u304c\u52d5\u304b\u305b\u307e\u3059\u3002\n\n\u307e\u305a\u306fmnist\u306e\u30c7\u30fc\u30bf\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u5909\u63db\u3057\u307e\u3057\u3087\u3046\u3002\n\n```bash:caffe/\n$ data/mnist/get_mnist.sh\n$ examples/mnist/create_mnist.sh\n```\n\n\u5b66\u7fd2\u7528\u30c7\u30fc\u30bf\u304c\u624b\u306b\u5165\u3063\u305f\u306e\u3067\u3001\u30e2\u30c7\u30eb\u3092\u5b66\u7fd2\u3055\u305b\u307e\u3059\u3002\n\n```bash:caffe/\n$ examples/mnist/train_lenet.sh\n```\n\n\u6700\u5f8c\u306b\u3001\u5b66\u7fd2\u6e08\u307f\u30e2\u30c7\u30eb\u3092\u5229\u7528\u3057\u3066\u3001mnist\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```bash:caffe/\n$ ./build/tools/caffe test -model ./examples/mnist/let_train_test.prototxt -weights ./examples/mnist/lenet_iter_10000.caffemodel\n```\n\n\u3053\u3053\u307e\u3067\u3067\u4e00\u901a\u308aCaffe\u3092\u52d5\u304b\u3059\u3053\u3068\u304c\u51fa\u6765\u307e\u3057\u305f\u3002\n\n# \u53c2\u8003\u6587\u732e\n\n* [\u3010Caffe\u3011\u306f\u3058\u3081\u3066Caffe\u3092make\u3059\u308b\u307e\u3067On Ubuntu16.04](http://yusuke-ujitoko.hatenablog.com/entry/2016/06/19/203443)\n* \u521d\u3081\u3066\u306e\u30c7\u30a3\u30fc\u30d7\u30e9\u30fc\u30cb\u30f3\u30b0\uff0c\u6b66\u4e95\u5b8f\u5c06 \u8457\n", "tags": ["Python", "DeepLearning", "Caffe", "Ubuntu"]}