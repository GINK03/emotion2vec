{"context": "\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\nfastermirror\u5c0e\u5165\n\nterminal\nyum -y install yum-fastestmirror\n\n\n\n\n\u3059\u3067\u306b\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u5165\u3063\u3066\u3044\u308b(\u304b\u3082\u3057\u308c\u306a\u3044)\u306e\u3067\u3001\u4e00\u65e6\u524a\u9664\u3059\u308b\n\nterminal\nyum -y remove mariadb*\n\n\n\n\nGPG\u30ad\u30fc\u53d6\u5f97 & yum\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\n\nterminal\nrpm --import https://yum.mariadb.org/RPM-GPG-KEY-MariaDB\n\ncat << \\EOS > /etc/yum.repos.d/mariadb.repo\n[mariadb]\nname=MariaDB\nbaseurl=http://yum.mariadb.org/10.1/centos7-amd64\ngpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB\ngpgcheck=1\nenabled=0\nEOS\n\n\n\n\nMariaDB\u30b5\u30fc\u30d0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nterminal\nyum -y install mariadb-server --enablerepo=mariadb\n\n\n\n\n\n\u8a2d\u5b9a&\u8d77\u52d5\n\n\ncnf\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\n\nterminal\ncat << \\EOS > /etc/my.cnf.d/local.cnf\n[mysqld]\n\n# \u6587\u5b57\u30b3\u30fc\u30c9\u8a2d\u5b9a\ncharacter-set-server=utf8mb4\nskip-character-set-client-handshake\n\n# \u30ea\u30f3\u30af\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\u3092\u8a31\u5bb9\u3059\u308b\nsymbolic-links=0\n\n# \u30e1\u30e2\u30ea\u30b5\u30a4\u30ba\u62e1\u5f35\nmax_allowed_packet=128MB\n\n# \u30c6\u30fc\u30d6\u30eb\u3001\u30ab\u30e9\u30e0\u540d\u3092\u5c0f\u6587\u5b57\u306b\u7d71\u4e00\nlower_case_table_names=1\n\n# InnoDB\u8a2d\u5b9a\ninnodb_buffer_pool_size = 512M\n\n# index\u30b5\u30a4\u30ba\u62e1\u5f35\u5bfe\u5fdc\ninnodb_large_prefix=1\ninnodb_file_per_table=1\ninnodb_file_format=Barracuda\ninnodb_file_format_max=Barracuda\nEOS\n\n\n\n\n\u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\n\nterminal\nservice mariadb start\n\n\n\n\n\n\u521d\u671f\u8a2d\u5b9a\n\n\nmysql_secure_installation\u3092\u4f7f\u3046\u3068\u3001\u4e0b\u8a18\u306e\u5185\u5bb9\u3092\u5bfe\u8a71\u5f62\u5f0f\u3067\u8a2d\u5b9a\u3067\u304d\u308b\u3002\n\n\u73fe\u5728\u306eroot\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u78ba\u8a8d(\u521d\u671f\u306f\u7a7a\u6587\u5b57)\n\u65b0\u3057\u3044root\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u8a2d\u5b9a\nroot\u3078\u306e\u30ea\u30e2\u30fc\u30c8\u30ed\u30b0\u30a4\u30f3\u8a2d\u5b9a\nanonymous\u30e6\u30fc\u30b6\u30fc\u306e\u524a\u9664\ntest\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u524a\u9664\n\u4e0a\u8a18\u8a2d\u5b9a\u5909\u66f4\u306e\u53cd\u6620\n\n\n\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\n\n\nmysql_secure_installation\u3092\u4f7f\u3046\u5834\u5408\u3002\n\nterminal\nmysql_secure_installation\n\n\n\n\n\u540c\u7b49\u306e\u3053\u3068\u3092\u3001Chef/Ansible\u306a\u3069\u3067\u3084\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u3092\u53c2\u8003\u306b\u3002\u3002\u3002\n\nterminal\nmysql -u root -p << \\EOS\n/* root\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210 & \u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a */\nGRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost'   IDENTIFIED BY '[password]' WITH GRANT OPTION;\nGRANT ALL PRIVILEGES ON *.* TO 'root'@'%'           IDENTIFIED BY '[password]' WITH GRANT OPTION;\n/* anonymas\u30e6\u30fc\u30b6\u30fc\u524a\u9664 */\nDELETE FROM mysql.user WHERE User = '';\n/* test\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u524a\u9664 */\nDROP DATABASE IF EXISTS test;\n/* \u6a29\u9650\u53cd\u6620 */\nFLUSH PRIVILEGES;\nEOS\n\n\n\n\n\n\u5b8c\u4e86\n\n\u4ee5\u4e0a\n\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\t\n* fastermirror\u5c0e\u5165\n\t\n\t```bash:terminal\n\tyum -y install yum-fastestmirror\n\t```\n\t\n* \u3059\u3067\u306b\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u5165\u3063\u3066\u3044\u308b(\u304b\u3082\u3057\u308c\u306a\u3044)\u306e\u3067\u3001\u4e00\u65e6\u524a\u9664\u3059\u308b\n\n\t```bash:terminal\n\tyum -y remove mariadb*\n\t```\n\t\n* GPG\u30ad\u30fc\u53d6\u5f97 & yum\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\n\n\t```bash:terminal\n\trpm --import https://yum.mariadb.org/RPM-GPG-KEY-MariaDB\n\t\n\tcat << \\EOS > /etc/yum.repos.d/mariadb.repo\n\t[mariadb]\n\tname=MariaDB\n\tbaseurl=http://yum.mariadb.org/10.1/centos7-amd64\n\tgpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB\n\tgpgcheck=1\n\tenabled=0\n\tEOS\n\t```\n\n* MariaDB\u30b5\u30fc\u30d0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\t```bash:terminal\n\tyum -y install mariadb-server --enablerepo=mariadb\n\t```\n\n## \u8a2d\u5b9a&\u8d77\u52d5\n\n* cnf\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\n\t\n\t```bash:terminal\n\tcat << \\EOS > /etc/my.cnf.d/local.cnf\n\t[mysqld]\n\t\n\t# \u6587\u5b57\u30b3\u30fc\u30c9\u8a2d\u5b9a\n\tcharacter-set-server=utf8mb4\n\tskip-character-set-client-handshake\n\t\n\t# \u30ea\u30f3\u30af\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\u3092\u8a31\u5bb9\u3059\u308b\n\tsymbolic-links=0\n\t\n\t# \u30e1\u30e2\u30ea\u30b5\u30a4\u30ba\u62e1\u5f35\n\tmax_allowed_packet=128MB\n\t\n\t# \u30c6\u30fc\u30d6\u30eb\u3001\u30ab\u30e9\u30e0\u540d\u3092\u5c0f\u6587\u5b57\u306b\u7d71\u4e00\n\tlower_case_table_names=1\n\t\n\t# InnoDB\u8a2d\u5b9a\n\tinnodb_buffer_pool_size = 512M\n\t\n\t# index\u30b5\u30a4\u30ba\u62e1\u5f35\u5bfe\u5fdc\n\tinnodb_large_prefix=1\n\tinnodb_file_per_table=1\n\tinnodb_file_format=Barracuda\n\tinnodb_file_format_max=Barracuda\n\tEOS\n\t```\n\t\n* \u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\n\t\n\t```bash:terminal\n\tservice mariadb start\n\t```\n\n## \u521d\u671f\u8a2d\u5b9a\n\n* mysql_secure_installation\u3092\u4f7f\u3046\u3068\u3001\u4e0b\u8a18\u306e\u5185\u5bb9\u3092\u5bfe\u8a71\u5f62\u5f0f\u3067\u8a2d\u5b9a\u3067\u304d\u308b\u3002\n\n\t* \u73fe\u5728\u306eroot\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u78ba\u8a8d(\u521d\u671f\u306f\u7a7a\u6587\u5b57)\n\t* \u65b0\u3057\u3044root\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u8a2d\u5b9a\n\t* root\u3078\u306e\u30ea\u30e2\u30fc\u30c8\u30ed\u30b0\u30a4\u30f3\u8a2d\u5b9a\n\t* anonymous\u30e6\u30fc\u30b6\u30fc\u306e\u524a\u9664\n\t* test\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u524a\u9664\n\t* \u4e0a\u8a18\u8a2d\u5b9a\u5909\u66f4\u306e\u53cd\u6620\n\n### \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\n\n* mysql_secure_installation\u3092\u4f7f\u3046\u5834\u5408\u3002\n\n\t```bash:terminal\n\tmysql_secure_installation\n\t```\n\n* \u540c\u7b49\u306e\u3053\u3068\u3092\u3001Chef/Ansible\u306a\u3069\u3067\u3084\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u3092\u53c2\u8003\u306b\u3002\u3002\u3002\n\n\t```bash:terminal\n\tmysql -u root -p << \\EOS\n\t/* root\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210 & \u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a */\n\tGRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost'\tIDENTIFIED BY '[password]' WITH GRANT OPTION;\n\tGRANT ALL PRIVILEGES ON *.* TO 'root'@'%'\t\t\tIDENTIFIED BY '[password]' WITH GRANT OPTION;\n\t/* anonymas\u30e6\u30fc\u30b6\u30fc\u524a\u9664 */\n\tDELETE FROM mysql.user WHERE User = '';\n\t/* test\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u524a\u9664 */\n\tDROP DATABASE IF EXISTS test;\n\t/* \u6a29\u9650\u53cd\u6620 */\n\tFLUSH PRIVILEGES;\n\tEOS\n\t```\n\t\n## \u5b8c\u4e86\n\n* \u4ee5\u4e0a\n", "tags": ["CentOS", "mariadb"]}