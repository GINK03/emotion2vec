{"context": " More than 1 year has passed since last update.Grape\u3067\u3053\u3093\u306a\u611f\u3058\u306b\u8907\u6570\u30d0\u30fc\u30b8\u30e7\u30f3\u306eAPI\u3092\u63d0\u4f9b\u3059\u308b\u5834\u5408\u306eTips\n/v1/hoge\n/v2/hage\n\n\n\u3068\u308a\u3042\u3048\u305a\u30d0\u30fc\u30b8\u30e7\u30f3\u3054\u3068\u306b\u30af\u30e9\u30b9\u4f5c\u308b\n\nclass V1 < Grape::API\n  version 'v1'\n  get '/hoge' do\n  end\nend\n\nclass V2 < Grape::API\n  version 'v2'\n  get '/hage' do\n  end\nend\n\n\n\n\u305d\u308c\u3092\u307e\u3068\u3081\u308b\u30af\u30e9\u30b9\u3092\u4f5c\u308b\n\nclass App < Grape::API\n  mount V1\n  mount V2\nend\n\n\n\u3067\u3053\u308c\u3092 config.ru \u3067 run App \u306a\u611f\u3058\u3067\u8d77\u52d5\u3059\u308b\n\u3053\u3053\u307e\u3067\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u66f8\u304b\u308c\u3066\u308b\u5185\u5bb9\n\n\u5171\u901a\u3059\u308b\u3082\u306e\u3092\u3069\u3046\u3059\u308b\u304b\nhelper\u3084\u3089format\u3084\u3089\u306f\u3059\u3079\u3066\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u540c\u3058\u30e2\u30ce\u3092\u4f7f\u3044\u305f\u3044\u3088\u306d\u30fc\n\u3068\u601d\u3063\u3066\n\nclass Base\n  format :json\n  helpers do\n    ...\n  end\nend\n\nclass V1 < Base\nend\n\nclass V2 < Base\nend\n\n\n\u5358\u7d14\u306b\u3053\u3093\u306a\u611f\u3058\u306bBase\u30af\u30e9\u30b9\u306b\u62bc\u3057\u8fbc\u3081\u3066\u307f\u3066\u3082\u3046\u307e\u304f\u3044\u304b\u306a\u3044\n\u3058\u3083\u3042\u3069\u3046\u3059\u308b\u304b\u3068\u3044\u3046\u3068\n\nclass App < Grape::API\n  format :json\n  helpers do\n    ...\n  end\n\n  mount V1\n  mount V2\nend\n\n\n\u3053\u3053\u306b\u66f8\u304f\u3068\u914d\u4e0b\u306e V1, V2 \u306b\u3082\u6709\u52b9\u306b\u306a\u308b\u3063\u307d\u3044\n\n\u904e\u53bb\u30d0\u30fc\u30b8\u30e7\u30f3\u306eAPI\u3092\u900f\u904e\u7684\u306b\u30a2\u30af\u30bb\u30b9\n\u900f\u904e\u7684\u3068\u3044\u3046\u8868\u73fe\u304c\u6b63\u3057\u3044\u306e\u304b\u308f\u304b\u3089\u306a\u3044\u3051\u3069\nV2 \u306b /v2/hoge \u304c\u5b9a\u7fa9\u3055\u308c\u3066\u306a\u304b\u3063\u305f\u3089 /v1/hoge \u3068\u540c\u3058\u6319\u52d5\u3092\u3055\u305b\u305f\u3044\u3088\u306d\u30fc\n\u3053\u308c\u3082\u7d99\u627f\u3067\u306f\u3067\u304d\u306a\u3044\u306e\u3067 V1 \u3092\u307e\u308b\u3063\u3068 dup \u3057\u3066\u3057\u307e\u3048\u3070\u3044\u3044\u3089\u3057\u3044\n\nclass V1 < Grape::API\n  get '/hoge' do\n  end\nend\n\nV2 = V1.dup\n\nclass V2 < Grape::API\n  def '/hage' do\n  end\nend\n\n\n\u3053\u306e\u5834\u5408\u306eurl\u306e\u30a2\u30af\u30bb\u30b9\u306f\n\n/v1/hoge \u3067\u304d\u308b\n/v1/hage \u3067\u304d\u306a\u3044!\n\n/v2/hoge \u3067\u304d\u308b!\n\n/v2/hage \u3067\u304d\u308b\n\n\u904e\u53bb\u306eurl\u306e\u524a\u9664(API\u306e\u5ec3\u6b62)\u3092\u3057\u305f\u3044\u3068\u304d\u306f\n\u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306f 404 \u3092\u8fd4\u3059\u3088\u3046\u306b\u3059\u308c\u3070\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u306a\nthanks to @rosylilly \nGrape\u3067\u3053\u3093\u306a\u611f\u3058\u306b\u8907\u6570\u30d0\u30fc\u30b8\u30e7\u30f3\u306eAPI\u3092\u63d0\u4f9b\u3059\u308b\u5834\u5408\u306eTips\n\n    /v1/hoge\n    /v2/hage\n\n## \u3068\u308a\u3042\u3048\u305a\u30d0\u30fc\u30b8\u30e7\u30f3\u3054\u3068\u306b\u30af\u30e9\u30b9\u4f5c\u308b\n\n```rb\n\nclass V1 < Grape::API\n  version 'v1'\n  get '/hoge' do\n  end\nend\n\nclass V2 < Grape::API\n  version 'v2'\n  get '/hage' do\n  end\nend\n\n```\n\n## \u305d\u308c\u3092\u307e\u3068\u3081\u308b\u30af\u30e9\u30b9\u3092\u4f5c\u308b\n\n```rb\n\nclass App < Grape::API\n  mount V1\n  mount V2\nend\n\n```\n\n\u3067\u3053\u308c\u3092 `config.ru` \u3067 `run App` \u306a\u611f\u3058\u3067\u8d77\u52d5\u3059\u308b\n\u3053\u3053\u307e\u3067\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u66f8\u304b\u308c\u3066\u308b\u5185\u5bb9\n\n## \u5171\u901a\u3059\u308b\u3082\u306e\u3092\u3069\u3046\u3059\u308b\u304b\n\nhelper\u3084\u3089format\u3084\u3089\u306f\u3059\u3079\u3066\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u540c\u3058\u30e2\u30ce\u3092\u4f7f\u3044\u305f\u3044\u3088\u306d\u30fc\n\n\u3068\u601d\u3063\u3066\n\n```rb\n\nclass Base\n  format :json\n  helpers do\n    ...\n  end\nend\n\nclass V1 < Base\nend\n\nclass V2 < Base\nend\n\n```\n\n\u5358\u7d14\u306b\u3053\u3093\u306a\u611f\u3058\u306bBase\u30af\u30e9\u30b9\u306b\u62bc\u3057\u8fbc\u3081\u3066\u307f\u3066\u3082\u3046\u307e\u304f\u3044\u304b\u306a\u3044\n\n\u3058\u3083\u3042\u3069\u3046\u3059\u308b\u304b\u3068\u3044\u3046\u3068\n\n```rb\n\nclass App < Grape::API\n  format :json\n  helpers do\n    ...\n  end\n\n  mount V1\n  mount V2\nend\n\n```\n\n\u3053\u3053\u306b\u66f8\u304f\u3068\u914d\u4e0b\u306e `V1`, `V2` \u306b\u3082\u6709\u52b9\u306b\u306a\u308b\u3063\u307d\u3044\n\n## \u904e\u53bb\u30d0\u30fc\u30b8\u30e7\u30f3\u306eAPI\u3092\u900f\u904e\u7684\u306b\u30a2\u30af\u30bb\u30b9\n\n\u900f\u904e\u7684\u3068\u3044\u3046\u8868\u73fe\u304c\u6b63\u3057\u3044\u306e\u304b\u308f\u304b\u3089\u306a\u3044\u3051\u3069\n`V2` \u306b `/v2/hoge` \u304c\u5b9a\u7fa9\u3055\u308c\u3066\u306a\u304b\u3063\u305f\u3089 `/v1/hoge` \u3068\u540c\u3058\u6319\u52d5\u3092\u3055\u305b\u305f\u3044\u3088\u306d\u30fc\n\u3053\u308c\u3082\u7d99\u627f\u3067\u306f\u3067\u304d\u306a\u3044\u306e\u3067 `V1` \u3092\u307e\u308b\u3063\u3068 `dup` \u3057\u3066\u3057\u307e\u3048\u3070\u3044\u3044\u3089\u3057\u3044\n\n```rb\n\nclass V1 < Grape::API\n  get '/hoge' do\n  end\nend\n\nV2 = V1.dup\n\nclass V2 < Grape::API\n  def '/hage' do\n  end\nend\n\n```\n\n\u3053\u306e\u5834\u5408\u306eurl\u306e\u30a2\u30af\u30bb\u30b9\u306f\n\n- /v1/hoge \u3067\u304d\u308b\n- /v1/hage **\u3067\u304d\u306a\u3044!**\n- /v2/hoge **\u3067\u304d\u308b!**\n- /v2/hage \u3067\u304d\u308b\n\n\u904e\u53bb\u306eurl\u306e\u524a\u9664(API\u306e\u5ec3\u6b62)\u3092\u3057\u305f\u3044\u3068\u304d\u306f\n\u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306f `404` \u3092\u8fd4\u3059\u3088\u3046\u306b\u3059\u308c\u3070\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u306a\n\nthanks to @rosylilly \n", "tags": ["Ruby", "grape"]}