{"context": "\u3060\u3044\u3076\u524d\u306b\u66f8\u3044\u305f\u8a18\u4e8b\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u7248\u3067\u3059\u3002\n2016/4/1\u6642\u70b9\u3067\u306e\u6700\u65b0\u7248\u306eRuby2.3\u3068Twitter Ruby Gem\u3067Twitter\u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22\u306e\u52d5\u4f5c\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\n\n\u74b0\u5883\n\nRuby (v2.3.0)\nTwitter Ruby Gem (v5.16.0)\nTwitter REST API\n\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\nTwitter_KeywordSearch.rb\n#!/bin/env ruby\n#encoding:UTF-8\nrequire \"twitter\"\n\n# \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ad\u30fc(consumer key/secret)\u306e\u8aad\u307f\u8fbc\u307f\n# OAuth \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u8aad\u307f\u8fbc\u307f\n@client = Twitter::REST::Client.new do | cnf |\n  cnf.consumer_key = \"****************************************\"\n  cnf.consumer_secret = \"****************************************\"\n  cnf.access_token = \"****************************************\"\n  cnf.access_token_secret = \"****************************************\"\nend\n\n# \u5909\u6570\u306e\u521d\u671f\u5316\nsince_id = 0\ncounter = 0\n\n# \u7121\u9650\u30eb\u30fc\u30d7\nwhile counter == 0  do\n    begin\n      # \u5f15\u6570\u3067\u53d7\u3051\u53d6\u3063\u305f\u30ef\u30fc\u30c9\u3092\u5143\u306b\u3001\u691c\u7d22\u7d50\u679c\u3092\u53d6\u5f97\u3057\u3001\u53e4\u3044\u3082\u306e\u304b\u3089\u9806\u306b\u4e26\u3073\u66ff\u3048\n      # \u203b\u6700\u521d\u306fsince_id=0\u3067\u3042\u308b\u305f\u3081\u3001tweet ID 0\u4ee5\u964d\u306eTweet\u304b\u3089\u6700\u65b0\u306e\u3082\u306e\u4e0a\u4f4d100\u4ef6\u3092\u53d6\u5f97\n       @client.search(ARGV[0], count: 100, result_type: \"recent\").take(100).reverse.collect do |tweet|\n\n        # Tweet ID, \u30e6\u30fc\u30b6\u540d\u3001Tweet\u672c\u6587\u3001\u6295\u7a3f\u65e5\u306a\u3069\u306a\u3069\u30fb\u30fb\u30fb\u30921\u4ef6\u3065\u3064\u8868\u793a\n        p tweet.user.id\n        p tweet.user.screen_name\n        p tweet.user.description\n        p tweet.user.location\n        p tweet.text\n        p tweet.retweet_count\n        p tweet.favorite_count\n        p tweet.geo\n        p tweet.place\n        p tweet.source\n        p tweet.created_at\n        print(\"\\n\")\n\n        # \u53d6\u5f97\u3057\u305fTweet id\u3092since_id\u306b\u683c\u7d0d\n        # \u203b\u53e4\u3044\u3082\u306e\u304b\u3089\u65b0\u3057\u3044\u9806(Tweet ID\u306e\u6607\u9806)\u306b\u8868\u793a\u3055\u308c\u308b\u305f\u3081\u3001\n        #  \u6700\u7d42\u7684\u306b\u3001\u53d6\u5f97\u3057\u305f\u7d50\u679c\u306e\u5185\u306e\u6700\u65b0\u306eTweet ID\u304c\u683c\u7d0d\u3055\u308c\u3001\n        #  \u6b21\u306f\u3053\u306eID\u4ee5\u964d\u306eTweet\u304c\u53d6\u5f97\u3055\u308c\u308b\n        since_id=tweet.id\n      end\n\n    # \u691c\u7d22\u30ef\u30fc\u30c9\u3067 Tweet \u3092\u53d6\u5f97\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408\u306e\u4f8b\u5916\u51e6\u7406\n    rescue Twitter::Error::ClientError\n      # 60\u79d2\u5f85\u6a5f\u3057\u3001\u30ea\u30c8\u30e9\u30a4\n      sleep(60)\n      retry\n    end\n    sleep(60)\nend\n\n\n\n\u5b9f\u884c\n% ruby Twitter_KeywordSearch.rb \u691c\u7d22\u30ef\u30fc\u30c9\n\n[\u3060\u3044\u3076\u524d\u306b\u66f8\u3044\u305f\u8a18\u4e8b](http://qiita.com/d_shimizu/items/05e42ba15cd13e45cfca)\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u7248\u3067\u3059\u3002\n2016/4/1\u6642\u70b9\u3067\u306e\u6700\u65b0\u7248\u306eRuby2.3\u3068Twitter Ruby Gem\u3067Twitter\u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22\u306e\u52d5\u4f5c\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\n\n## \u74b0\u5883\n- [Ruby (v2.3.0)](https://www.ruby-lang.org/ja/news/2015/12/25/ruby-2-3-0-released/)\n- [Twitter Ruby Gem (v5.16.0)](https://github.com/sferik/twitter)\n- [Twitter REST API](https://dev.twitter.com/rest/public)\n\n## \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n```Twitter_KeywordSearch.rb\n#!/bin/env ruby\n#encoding:UTF-8\nrequire \"twitter\"\n\n# \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ad\u30fc(consumer key/secret)\u306e\u8aad\u307f\u8fbc\u307f\n# OAuth \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u8aad\u307f\u8fbc\u307f\n@client = Twitter::REST::Client.new do | cnf |\n  cnf.consumer_key = \"****************************************\"\n  cnf.consumer_secret = \"****************************************\"\n  cnf.access_token = \"****************************************\"\n  cnf.access_token_secret = \"****************************************\"\nend\n\n# \u5909\u6570\u306e\u521d\u671f\u5316\nsince_id = 0\ncounter = 0\n\n# \u7121\u9650\u30eb\u30fc\u30d7\nwhile counter == 0  do\n    begin\n      # \u5f15\u6570\u3067\u53d7\u3051\u53d6\u3063\u305f\u30ef\u30fc\u30c9\u3092\u5143\u306b\u3001\u691c\u7d22\u7d50\u679c\u3092\u53d6\u5f97\u3057\u3001\u53e4\u3044\u3082\u306e\u304b\u3089\u9806\u306b\u4e26\u3073\u66ff\u3048\n      # \u203b\u6700\u521d\u306fsince_id=0\u3067\u3042\u308b\u305f\u3081\u3001tweet ID 0\u4ee5\u964d\u306eTweet\u304b\u3089\u6700\u65b0\u306e\u3082\u306e\u4e0a\u4f4d100\u4ef6\u3092\u53d6\u5f97\n       @client.search(ARGV[0], count: 100, result_type: \"recent\").take(100).reverse.collect do |tweet|\n\n        # Tweet ID, \u30e6\u30fc\u30b6\u540d\u3001Tweet\u672c\u6587\u3001\u6295\u7a3f\u65e5\u306a\u3069\u306a\u3069\u30fb\u30fb\u30fb\u30921\u4ef6\u3065\u3064\u8868\u793a\n        p tweet.user.id\n        p tweet.user.screen_name\n        p tweet.user.description\n        p tweet.user.location\n        p tweet.text\n        p tweet.retweet_count\n        p tweet.favorite_count\n        p tweet.geo\n        p tweet.place\n        p tweet.source\n        p tweet.created_at\n        print(\"\\n\")\n\n        # \u53d6\u5f97\u3057\u305fTweet id\u3092since_id\u306b\u683c\u7d0d\n        # \u203b\u53e4\u3044\u3082\u306e\u304b\u3089\u65b0\u3057\u3044\u9806(Tweet ID\u306e\u6607\u9806)\u306b\u8868\u793a\u3055\u308c\u308b\u305f\u3081\u3001\n        #  \u6700\u7d42\u7684\u306b\u3001\u53d6\u5f97\u3057\u305f\u7d50\u679c\u306e\u5185\u306e\u6700\u65b0\u306eTweet ID\u304c\u683c\u7d0d\u3055\u308c\u3001\n        #  \u6b21\u306f\u3053\u306eID\u4ee5\u964d\u306eTweet\u304c\u53d6\u5f97\u3055\u308c\u308b\n        since_id=tweet.id\n      end\n\n    # \u691c\u7d22\u30ef\u30fc\u30c9\u3067 Tweet \u3092\u53d6\u5f97\u3067\u304d\u306a\u304b\u3063\u305f\u5834\u5408\u306e\u4f8b\u5916\u51e6\u7406\n    rescue Twitter::Error::ClientError\n      # 60\u79d2\u5f85\u6a5f\u3057\u3001\u30ea\u30c8\u30e9\u30a4\n      sleep(60)\n      retry\n    end\n    sleep(60)\nend\n```\n\n## \u5b9f\u884c\n```\n% ruby Twitter_KeywordSearch.rb \u691c\u7d22\u30ef\u30fc\u30c9\n```\n", "tags": ["Twitter", "Ruby", "TwitterAPI", "Ruby2.3"]}