{"tags": ["JavaScript", "yhpg", "\u3069\u3046\u66f8\u304f"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002javascript\u306e\u52c9\u5f37\u304c\u3066\u3089\u904e\u53bb\u306e\u3069\u3046\u66f8\u304f\u3092\u89e3\u304b\u305b\u3066\u3082\u3089\u3063\u3066\u3044\u307e\u3059\u3002\n\u554f\u984c\u306f\u3053\u3061\u3089\nhttp://nabetani.sakura.ne.jp/hena/ord6lintersection/\n\u300c\u30aa\u30d5\u30e9\u30a4\u30f3\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3069\u3046\u66f8\u304f\u7b2c6\u56de\u306e\u53c2\u8003\u554f\u984c\u300d\nhttp://qiita.com/Nabetani/items/4c60f10b73812e86441c\n\u4eca\u56de\u306f\u307f\u306a\u3055\u3093\u306e\u56de\u7b54\u3092\u3044\u304f\u3064\u304b\u5148\u306b\u62dd\u898b\u3057\u3066\u304b\u3089\u3001\u9055\u3046\u65b9\u6cd5\u3092\u63a2\u3057\u3066\u89e3\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\uff08\u5168\u90e8\u306f\u62dd\u898b\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u4e00\u7dd2\u306e\u89e3\u6cd5\u306e\u3082\u306e\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\uff09\n\nl-intersection.js\n\nvar solve = function test (input) {\n    'use strict';\n\n        // (p)oint \u3068\u308a\u3042\u3048\u305a\u30d0\u30e9\u30d0\u30e9\u306b\u3057\u3066\u4eca\u56de\u4f7f\u7528\u3059\u308b\u5ea7\u6a19\u306b\u5909\u63db\n    var p = input.match(/\\d/g).reduce(function (x, y, i) {\n                var color = i < 6 ? 'r' : 'g'\n                  , num   = Math.round((i % 6 + 1) / 2) // \u9802\u70b9\u756a\u53f7\n                  , pos   = i % 2 // x\u8ef8:0, y\u8ef8:1\n                  , f1, f2;\n\n                y = y *1;\n\n                switch(num) {\n                case 1: // \u6700\u521d\u306e\u9802\u70b9\n                    x[color + '1'].push(y);\n                    break;\n                case 2: // \u5bfe\u89d2\u306e\u9802\u70b9 (\u5165\u66ff\u6709)\n                    x[color + '2'].push(y);\n                    break;\n                case 3: // \u6b20\u3051\u3066\u3044\u308b\u90e8\u5206\u306e\u9802\u70b9\n                    f1 = x[color + '1'][pos];\n                    f2 = x[color + '2'][pos];\n                    if (Math.abs(f1 - f2) < Math.abs(f1 - y)) {\n                        x[color + '2'][pos] = y; // \u5bfe\u89d2\u306e\u9802\u70b9\u5165\u66ff\n                        x[color + '3'].push(f1 < y ? f2 + 1 : f2 - 1);\n                    } else {\n                        x[color + '3'].push(f1 < f2 ? y + 1 : y - 1);\n                    }\n                }\n                return x;\n            }, {r1:[], r2:[], r3:[], g1:[], g2:[], g3:[]})\n\n        // \uff12\u7dda\u306e\u91cd\u8907\u3057\u3066\u3044\u3066\u3044\u308b\u5e45\u3082\u3057\u304f\u306f\u9ad8\u3055\u3092\u8fd4\u3059\u95a2\u6570\n      , over = function (a, b, x, y) {\n            // \u5f15\u6570\u5165\u66ff\n            var tmp;\n            if (b < a) { tmp = a; a = b; b = tmp;}\n            if (y < x) { tmp = x; x = y; y = tmp;}\n\n            // \u4e26\u3079\u66ff\u3048\n            var odr = [a, b, x, y].sort(function(a, b) { return a - b;});\n\n            switch(true) {\n\n            // a-x-y-b\n            case odr[0] === a && odr[3] === b:\n                return y - x + 1;\n\n            // x-a-b-y\n            case odr[0] === x && odr[3] === y:\n                return b - a + 1;\n\n            // a-x-b-y\n            case odr[0] === a && odr[3] === y && x <= b:\n                return b - x + 1;\n\n            // x-a-y-b\n            case odr[0] === x && odr[3] === b && a <= y:\n                return y - a + 1;\n\n            // other\n            default:\n                return 0;\n            }\n        }\n\n        // \u91cd\u8907\u90e8\u5206\u306e\u9762\u7a4d\n      , rgOver = over(p.r1[0], p.r2[0], p.g1[0], p.g2[0]) * over(p.r1[1], p.r2[1], p.g1[1], p.g2[1])\n\n        // \u305d\u308c\u305e\u308c\u6b20\u3051\u3066\u3044\u308b\u90e8\u5206\u3068\u306e\u91cd\u8907\u306e\u9762\u7a4d\n      , rLack  = over(p.r3[0], p.r2[0], p.g1[0], p.g2[0]) * over(p.r3[1], p.r2[1], p.g1[1], p.g2[1])\n      , gLack  = over(p.r1[0], p.r2[0], p.g3[0], p.g2[0]) * over(p.r1[1], p.r2[1], p.g3[1], p.g2[1])\n\n        // \u6b20\u3051\u3066\u3044\u308b\u90e8\u5206\u540c\u58eb\u306e\u91cd\u8907\u306e\u9762\u7a4d\n      , rgLack = over(p.r3[0], p.r2[0], p.g3[0], p.g2[0]) * over(p.r3[1], p.r2[1], p.g3[1], p.g2[1])\n\n      , result = rgOver - rLack - gLack + rgLack;\n\n    return result;\n};\n\nvar data = [\n/*#1*/ [\"23-94-28,89-06-51\", 11],\n/*#2*/ [\"11-84-58,02-73-69\", 40],\n/*#3*/ [\"18-41-86,77-04-32\", 26],\n/*#4*/ [\"81-88-23,64-58-14\", 0],\n/*#5*/ [\"31-29-07,41-87-69\", 0],\n/*#6*/ [\"83-13-40,18-10-94\", 1],\n/*#7*/ [\"77-80-92,21-72-38\", 2],\n/*#8*/ [\"57-70-91,55-19-08\", 3],\n/*#9*/ [\"18-22-75,66-80-91\", 4],\n/*#10*/ [\"51-93-78,54-49-06\", 5],\n/*#11*/ [\"58-70-96,17-43-76\", 6],\n/*#12*/ [\"58-07-12,58-82-93\", 7],\n/*#13*/ [\"41-29-07,35-95-88\", 8],\n/*#14*/ [\"88-26-60,42-29-07\", 9],\n/*#15*/ [\"18-40-85,34-40-91\", 10],\n/*#16*/ [\"36-60-96,53-96-89\", 11],\n/*#17*/ [\"51-39-02,44-98-69\", 12],\n/*#18*/ [\"48-06-20,76-04-42\", 13],\n/*#19*/ [\"85-29-18,26-50-93\", 14],\n/*#20*/ [\"27-50-91,43-29-07\", 15],\n/*#21*/ [\"57-06-20,48-60-91\", 16],\n/*#22*/ [\"52-98-89,21-76-67\", 17],\n/*#23*/ [\"67-12-40,45-80-92\", 18],\n/*#24*/ [\"47-03-10,26-30-82\", 19],\n/*#25*/ [\"74-28-06,21-86-37\", 20],\n/*#26*/ [\"65-01-20,73-39-05\", 21],\n/*#27*/ [\"17-72-86,36-50-94\", 22],\n/*#28*/ [\"51-29-07,77-15-41\", 23],\n/*#29*/ [\"33-98-39,82-16-02\", 24],\n/*#30*/ [\"75-05-10,37-81-96\", 25],\n/*#31*/ [\"72-58-06,48-80-96\", 26],\n/*#32*/ [\"81-67-16,21-91-59\", 27],\n/*#33*/ [\"13-96-57,24-96-79\", 28],\n/*#34*/ [\"57-04-32,51-18-06\", 29],\n/*#35*/ [\"88-03-52,28-41-86\", 30],\n/*#36*/ [\"78-04-61,13-86-49\", 31],\n/*#37*/ [\"58-12-20,27-50-85\", 32],\n/*#38*/ [\"61-19-05,71-68-15\", 33],\n/*#39*/ [\"63-29-16,18-31-83\", 34],\n/*#40*/ [\"16-50-91,32-98-79\", 35],\n/*#41*/ [\"82-17-03,38-40-81\", 36],\n/*#42*/ [\"72-48-04,11-98-39\", 37],\n/*#43*/ [\"77-05-10,28-50-62\", 38],\n/*#44*/ [\"38-50-91,11-86-57\", 39],\n/*#45*/ [\"87-05-10,13-97-69\", 40],\n/*#46*/ [\"11-86-49,22-98-89\", 44],\n/*#47*/ [\"11-97-69,12-86-67\", 46],\n/*#48*/ [\"11-95-69,71-49-05\", 47],\n/*#49*/ [\"28-31-92,13-98-79\", 48]\n];\n\n// \u30c6\u30b9\u30c8\ndata.forEach(function (item) {\n    console.log(solve(item[0]) === item[1]);\n});\n\n\n\n\uff08\u306a\u3093\u3068\u306a\u304f\u89e3\u8aac\uff09\n\u5ea7\u6a19\u3092\u3001\u5927\u304d\u3044\u56db\u89d2\u306e\u4e2d\u306b\u5c0f\u3055\u3044\u56db\u89d2\u304c\u5165\u3063\u3066\u3044\u308b\u3088\u3046\u306b\u4e8c\u3064\u306e\u5ea7\u6a19\u306b\u5909\u63db\u3057\u3066\n\u91cd\u306a\u3063\u3066\u3044\u308b\u90e8\u5206\u306e\u9762\u7a4d\u3092\u8db3\u3057\u305f\u308a\u5f15\u3044\u305f\u308a\u3057\u3066\u8a08\u7b97\u3057\u3066\u3044\u307e\u3059\u3002\n\u3067\u304d\u308b\u3060\u3051\u7e70\u308a\u8fd4\u3057\u306e\u51e6\u7406(for, forEach, map\u3068\u304b\uff09\u3092\u4f7f\u7528\u3057\u306a\u3044\u3067\u51e6\u7406\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u304a\u304b\u3052\u3067\u9577\u3063\u305f\u3089\u3057\u3044\u3067\u3059\u304c\u3001\u5185\u5bb9\u306f\u8584\u304f\u3066\u7c21\u5358\u3067\u3059\u3002(\u4fdd\u5b88\u306f\u3057\u3084\u3059\u3044\u304b\u3082\uff09\n\u30d3\u30c3\u30c8\u305f\u3066\u308b\u306e\u3068\u6bd4\u3079\u3066\u5229\u70b9\u306f\u7279\u306b\u306a\u3044\u3067\u3059\u3002\n10000*10000\u3068\u304b\u30de\u30c3\u30d7\u304c\u5927\u304d\u3051\u308c\u3070\u3001\u305d\u308c\u306a\u308a\u306b\u5909\u308f\u308b\u304b\u3082\u77e5\u308c\u306a\u3044\u306a\u30fc\n(\u8ffd\u8a18)\n\u3084\u3063\u3066\u3057\u307e\u3063\u305f\u3002\u3002\u3002\n\u8aa4\uff09var odr = [a, b, x, y].sort();\n\u6b63\uff09var odr = [a, b, x, y].sort(function(a, b) { return a - b;});\n\u6570\u5b57\u306e\u30bd\u30fc\u30c8\u306f\u6bd4\u8f03\u7528\u306e\u95a2\u6570\u304c\u5fc5\u8981\u3067\u3057\u305f\u3002\n\u4eca\u56de\u306f\u305f\u307e\u305f\u307e\u4e00\u6841\u306e\u6570\u5b57\u3060\u3051\u306a\u306e\u3067\u5f71\u97ff\u306f\u306a\u3044\u3067\u3059\u304c\u3001\u4e00\u5fdc\u5909\u66f4\njavascript\u306e\u52c9\u5f37\u304c\u3066\u3089\u904e\u53bb\u306e\u3069\u3046\u66f8\u304f\u3092\u89e3\u304b\u305b\u3066\u3082\u3089\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u554f\u984c\u306f\u3053\u3061\u3089\nhttp://nabetani.sakura.ne.jp/hena/ord6lintersection/\n\n\u300c\u30aa\u30d5\u30e9\u30a4\u30f3\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3069\u3046\u66f8\u304f\u7b2c6\u56de\u306e\u53c2\u8003\u554f\u984c\u300d\nhttp://qiita.com/Nabetani/items/4c60f10b73812e86441c\n\n\u4eca\u56de\u306f\u307f\u306a\u3055\u3093\u306e\u56de\u7b54\u3092\u3044\u304f\u3064\u304b\u5148\u306b\u62dd\u898b\u3057\u3066\u304b\u3089\u3001\u9055\u3046\u65b9\u6cd5\u3092\u63a2\u3057\u3066\u89e3\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\uff08\u5168\u90e8\u306f\u62dd\u898b\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u4e00\u7dd2\u306e\u89e3\u6cd5\u306e\u3082\u306e\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\uff09\n\n```js:l-intersection.js\n\nvar solve = function test (input) {\n    'use strict';\n\n        // (p)oint \u3068\u308a\u3042\u3048\u305a\u30d0\u30e9\u30d0\u30e9\u306b\u3057\u3066\u4eca\u56de\u4f7f\u7528\u3059\u308b\u5ea7\u6a19\u306b\u5909\u63db\n    var p = input.match(/\\d/g).reduce(function (x, y, i) {\n                var color = i < 6 ? 'r' : 'g'\n                  , num   = Math.round((i % 6 + 1) / 2) // \u9802\u70b9\u756a\u53f7\n                  , pos   = i % 2 // x\u8ef8:0, y\u8ef8:1\n                  , f1, f2;\n                \n                y = y *1;\n\n                switch(num) {\n                case 1: // \u6700\u521d\u306e\u9802\u70b9\n                    x[color + '1'].push(y);\n                    break;\n                case 2: // \u5bfe\u89d2\u306e\u9802\u70b9 (\u5165\u66ff\u6709)\n                    x[color + '2'].push(y);\n                    break;\n                case 3: // \u6b20\u3051\u3066\u3044\u308b\u90e8\u5206\u306e\u9802\u70b9\n                    f1 = x[color + '1'][pos];\n                    f2 = x[color + '2'][pos];\n                    if (Math.abs(f1 - f2) < Math.abs(f1 - y)) {\n                        x[color + '2'][pos] = y; // \u5bfe\u89d2\u306e\u9802\u70b9\u5165\u66ff\n                        x[color + '3'].push(f1 < y ? f2 + 1 : f2 - 1);\n                    } else {\n                        x[color + '3'].push(f1 < f2 ? y + 1 : y - 1);\n                    }\n                }\n                return x;\n            }, {r1:[], r2:[], r3:[], g1:[], g2:[], g3:[]})\n\n        // \uff12\u7dda\u306e\u91cd\u8907\u3057\u3066\u3044\u3066\u3044\u308b\u5e45\u3082\u3057\u304f\u306f\u9ad8\u3055\u3092\u8fd4\u3059\u95a2\u6570\n      , over = function (a, b, x, y) {\n            // \u5f15\u6570\u5165\u66ff\n            var tmp;\n            if (b < a) { tmp = a; a = b; b = tmp;}\n            if (y < x) { tmp = x; x = y; y = tmp;}\n\n            // \u4e26\u3079\u66ff\u3048\n            var odr = [a, b, x, y].sort(function(a, b) { return a - b;});\n\n            switch(true) {\n\n            // a-x-y-b\n            case odr[0] === a && odr[3] === b:\n                return y - x + 1;\n\n            // x-a-b-y\n            case odr[0] === x && odr[3] === y:\n                return b - a + 1;\n\n            // a-x-b-y\n            case odr[0] === a && odr[3] === y && x <= b:\n                return b - x + 1;\n\n            // x-a-y-b\n            case odr[0] === x && odr[3] === b && a <= y:\n                return y - a + 1;\n\n            // other\n            default:\n                return 0;\n            }\n        }\n\n        // \u91cd\u8907\u90e8\u5206\u306e\u9762\u7a4d\n      , rgOver = over(p.r1[0], p.r2[0], p.g1[0], p.g2[0]) * over(p.r1[1], p.r2[1], p.g1[1], p.g2[1])\n\n        // \u305d\u308c\u305e\u308c\u6b20\u3051\u3066\u3044\u308b\u90e8\u5206\u3068\u306e\u91cd\u8907\u306e\u9762\u7a4d\n      , rLack  = over(p.r3[0], p.r2[0], p.g1[0], p.g2[0]) * over(p.r3[1], p.r2[1], p.g1[1], p.g2[1])\n      , gLack  = over(p.r1[0], p.r2[0], p.g3[0], p.g2[0]) * over(p.r1[1], p.r2[1], p.g3[1], p.g2[1])\n\n        // \u6b20\u3051\u3066\u3044\u308b\u90e8\u5206\u540c\u58eb\u306e\u91cd\u8907\u306e\u9762\u7a4d\n      , rgLack = over(p.r3[0], p.r2[0], p.g3[0], p.g2[0]) * over(p.r3[1], p.r2[1], p.g3[1], p.g2[1])\n\n      , result = rgOver - rLack - gLack + rgLack;\n\n    return result;\n};\n\nvar data = [\n/*#1*/ [\"23-94-28,89-06-51\", 11],\n/*#2*/ [\"11-84-58,02-73-69\", 40],\n/*#3*/ [\"18-41-86,77-04-32\", 26],\n/*#4*/ [\"81-88-23,64-58-14\", 0],\n/*#5*/ [\"31-29-07,41-87-69\", 0],\n/*#6*/ [\"83-13-40,18-10-94\", 1],\n/*#7*/ [\"77-80-92,21-72-38\", 2],\n/*#8*/ [\"57-70-91,55-19-08\", 3],\n/*#9*/ [\"18-22-75,66-80-91\", 4],\n/*#10*/ [\"51-93-78,54-49-06\", 5],\n/*#11*/ [\"58-70-96,17-43-76\", 6],\n/*#12*/ [\"58-07-12,58-82-93\", 7],\n/*#13*/ [\"41-29-07,35-95-88\", 8],\n/*#14*/ [\"88-26-60,42-29-07\", 9],\n/*#15*/ [\"18-40-85,34-40-91\", 10],\n/*#16*/ [\"36-60-96,53-96-89\", 11],\n/*#17*/ [\"51-39-02,44-98-69\", 12],\n/*#18*/ [\"48-06-20,76-04-42\", 13],\n/*#19*/ [\"85-29-18,26-50-93\", 14],\n/*#20*/ [\"27-50-91,43-29-07\", 15],\n/*#21*/ [\"57-06-20,48-60-91\", 16],\n/*#22*/ [\"52-98-89,21-76-67\", 17],\n/*#23*/ [\"67-12-40,45-80-92\", 18],\n/*#24*/ [\"47-03-10,26-30-82\", 19],\n/*#25*/ [\"74-28-06,21-86-37\", 20],\n/*#26*/ [\"65-01-20,73-39-05\", 21],\n/*#27*/ [\"17-72-86,36-50-94\", 22],\n/*#28*/ [\"51-29-07,77-15-41\", 23],\n/*#29*/ [\"33-98-39,82-16-02\", 24],\n/*#30*/ [\"75-05-10,37-81-96\", 25],\n/*#31*/ [\"72-58-06,48-80-96\", 26],\n/*#32*/ [\"81-67-16,21-91-59\", 27],\n/*#33*/ [\"13-96-57,24-96-79\", 28],\n/*#34*/ [\"57-04-32,51-18-06\", 29],\n/*#35*/ [\"88-03-52,28-41-86\", 30],\n/*#36*/ [\"78-04-61,13-86-49\", 31],\n/*#37*/ [\"58-12-20,27-50-85\", 32],\n/*#38*/ [\"61-19-05,71-68-15\", 33],\n/*#39*/ [\"63-29-16,18-31-83\", 34],\n/*#40*/ [\"16-50-91,32-98-79\", 35],\n/*#41*/ [\"82-17-03,38-40-81\", 36],\n/*#42*/ [\"72-48-04,11-98-39\", 37],\n/*#43*/ [\"77-05-10,28-50-62\", 38],\n/*#44*/ [\"38-50-91,11-86-57\", 39],\n/*#45*/ [\"87-05-10,13-97-69\", 40],\n/*#46*/ [\"11-86-49,22-98-89\", 44],\n/*#47*/ [\"11-97-69,12-86-67\", 46],\n/*#48*/ [\"11-95-69,71-49-05\", 47],\n/*#49*/ [\"28-31-92,13-98-79\", 48]\n];\n\n// \u30c6\u30b9\u30c8\ndata.forEach(function (item) {\n    console.log(solve(item[0]) === item[1]);\n});\n\n```\n\n\uff08\u306a\u3093\u3068\u306a\u304f\u89e3\u8aac\uff09\n\u5ea7\u6a19\u3092\u3001\u5927\u304d\u3044\u56db\u89d2\u306e\u4e2d\u306b\u5c0f\u3055\u3044\u56db\u89d2\u304c\u5165\u3063\u3066\u3044\u308b\u3088\u3046\u306b\u4e8c\u3064\u306e\u5ea7\u6a19\u306b\u5909\u63db\u3057\u3066\n\u91cd\u306a\u3063\u3066\u3044\u308b\u90e8\u5206\u306e\u9762\u7a4d\u3092\u8db3\u3057\u305f\u308a\u5f15\u3044\u305f\u308a\u3057\u3066\u8a08\u7b97\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3067\u304d\u308b\u3060\u3051\u7e70\u308a\u8fd4\u3057\u306e\u51e6\u7406(for, forEach, map\u3068\u304b\uff09\u3092\u4f7f\u7528\u3057\u306a\u3044\u3067\u51e6\u7406\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u304a\u304b\u3052\u3067\u9577\u3063\u305f\u3089\u3057\u3044\u3067\u3059\u304c\u3001\u5185\u5bb9\u306f\u8584\u304f\u3066\u7c21\u5358\u3067\u3059\u3002(\u4fdd\u5b88\u306f\u3057\u3084\u3059\u3044\u304b\u3082\uff09\n\n\u30d3\u30c3\u30c8\u305f\u3066\u308b\u306e\u3068\u6bd4\u3079\u3066\u5229\u70b9\u306f\u7279\u306b\u306a\u3044\u3067\u3059\u3002\n10000*10000\u3068\u304b\u30de\u30c3\u30d7\u304c\u5927\u304d\u3051\u308c\u3070\u3001\u305d\u308c\u306a\u308a\u306b\u5909\u308f\u308b\u304b\u3082\u77e5\u308c\u306a\u3044\u306a\u30fc\n\n(\u8ffd\u8a18)\n\u3084\u3063\u3066\u3057\u307e\u3063\u305f\u3002\u3002\u3002\n\u8aa4\uff09var odr = [a, b, x, y].sort();\n\u6b63\uff09var odr = [a, b, x, y].sort(function(a, b) { return a - b;});\n\u6570\u5b57\u306e\u30bd\u30fc\u30c8\u306f\u6bd4\u8f03\u7528\u306e\u95a2\u6570\u304c\u5fc5\u8981\u3067\u3057\u305f\u3002\n\u4eca\u56de\u306f\u305f\u307e\u305f\u307e\u4e00\u6841\u306e\u6570\u5b57\u3060\u3051\u306a\u306e\u3067\u5f71\u97ff\u306f\u306a\u3044\u3067\u3059\u304c\u3001\u4e00\u5fdc\u5909\u66f4"}