{"context": " More than 1 year has passed since last update.\n\nPostgreSQL \u7248\u306e PL/SQL \u3067\u3042\u308b PL/pgSQL \u3092\u4f7f\u3063\u3066\u3001\u30af\u30a8\u30ea\u95a2\u6570\u3092\u5ba3\u8a00\u3059\u308b\u969b\u3001\u95a2\u6570\u306e\u306a\u304b\u306b R\u8a00\u8a9e\u306e\u30b3\u30fc\u30c9\u3092\u57cb\u3081\u8fbc\u3081\u308b\u3088\u3046\u3067\u3059\u3002\n\n\n\u4ee5\u4e0b\u3001\u3044\u304f\u3064\u304b\u3001\u53c2\u8003\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306b\u30ea\u30f3\u30af\u3092\u5f35\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\nRWiki \u300cR \u3068 PostgreSQL\u300d\n\n\n\u95a2\u6570\u306e\u57fa\u672c\u5f62\n\u4ee5\u4e0b\u306e\u3088\u3046\u306bPL/R\u5f62\u306e\u624b\u7d9a\u304d\u3092\u5b9a\u7fa9\u3059\u308b\nCREATE OR REPLACE FUNCTION \u95a2\u6570\u540d (\u5f15\u6570\u30bf\u30a4\u30d7)\nRETURNS return-type AS '\n   \u95a2\u6570\u672c\u4f53\u3000\u2212\u2212\u3000\u3053\u3053\u306bR\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304f\n' LANGUAGE 'plr';\n\n\n\n\nHatena::Diary fous\u306e\u65e5\u8a18 \uff082009/08/28\uff09\u300c[PostgreSQL][R] PostgreSQL\u3068PL/R\u300d\n\n\n\u3055\u3063\u305d\u304fFunctions and Arguments\u306b\u3042\u308b\u30b5\u30f3\u30d7\u30eb\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\nCREATE TABLE emp (name text, age int, salary numeric(10,2));\nINSERT INTO emp VALUES ('Joe', 41, 250000.00);\nINSERT INTO emp VALUES ('Jim', 25, 120000.00);\nINSERT INTO emp VALUES ('Jon', 35, 50000.00);\nCREATE OR REPLACE FUNCTION overpaid (emp) RETURNS bool AS '\n    if (200000 < arg1$salary) {\n        return(TRUE)\n    }\n    if (arg1$age < 30 && 100000 < arg1$salary) {\n        return(TRUE)\n    }\n    return(FALSE)\n' LANGUAGE 'plr';\nSELECT name, overpaid(emp) FROM emp;\n\n\u6ce8\u610f\u70b9\u3068\u3057\u3066\u3001PL/R\u306eCREATE FUNCTION\u6587\u306f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306esuper user\u6a29\u9650\u304c\u5fc5\u8981\u3067\u3059\u3002postgres\u30e6\u30fc\u30b6\u30fc\u306a\u3069\u3067\u3059\u306d\u3002R\u306b\u306f\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3084\u30d5\u30a1\u30a4\u30eb\u5165\u51fa\u529b\u306a\u3069\u30b7\u30b9\u30c6\u30e0\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u547d\u4ee4\u3082\u4f7f\u7528\u3067\u304d\u308b\u306e\u3067\u3001\u4ed5\u65b9\u306a\u3044\u3067\u3059\u3002\u3069\u3046\u3057\u3066\u3082\u4f7f\u7528\u3057\u305f\u3051\u308c\u3070CREATE LANGUAGE\u6642\u306bTRUSTED\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4e0e\u3048\u308c\u3070\u3067\u304d\u308b\u30fb\u30fb\u30fb\u304b\u3082\u3002\nR\u306f\u7d71\u8a08\u89e3\u6790\u30bd\u30d5\u30c8\u3067\u3042\u308b\u3068\u540c\u6642\u306b\u3001\u7d50\u679c\u3092\u308f\u304b\u308a\u3084\u3059\u304f\u8868\u793a\u3059\u308b\u305f\u3081\u306b\u3001\u69d8\u3005\u306a\u30b0\u30e9\u30d5\u3092\u63cf\u753b\u3059\u308b\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002\u63cf\u753b\u3057\u305f\u30b0\u30e9\u30d5\u306f\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u306b\u4fdd\u5b58\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nCREATE TABLE temp (x int, y int);\nINSERT INTO temp VALUES(4,6);\nINSERT INTO temp VALUES(9,4);\n\nCREATE OR REPLACE FUNCTION f_graph() RETURNS text AS\n'\nstr <<- pg.spi.exec (''select x as \"my a\" ,y as \"my b\" from temp order by x,y'');\npdf(''/tmp/myplot.pdf'');\nplot(str,type=\"l\",main=\"Graphics Demonstration\",sub=\"Line Graph\");\ndev.off();\nprint(''done'');\n'\nLANGUAGE plr;\n\n\n\n\nIT\u30a8\u30f3\u30b8\u30cb\u30a2\u306e\u30e1\u30bf\u30fb\u30ce\u30fc\u30c8 \u300cPostgreSQL\u3067\u7d71\u8a08\u89e3\u6790 PL/R \u57fa\u790e\u7de8 : PostgreSQL Advent Calendar #6\u300d\n\u8272\u3005\u3068\u8003\u3048\u3066\u307f\u308b \u300c\u81ea\u5206\u306e\u305f\u3081\u306e\u300cPL/R\u3092\u4f7f\u3063\u3066\u308b\u300d\uff08\uff11\uff09\u300d\n\n\n\n\u3010 PL/R \u3092\u7528\u3044\u305f Web\u30a2\u30d7\u30ea\u5b9f\u88c5\u4e8b\u4f8b \u3011\n\n\nCybozu Inside Out (2009/6/12)\u300c\u30b0\u30eb\u30fc\u30d7\u30a6\u30a7\u30a2\u306e\u30ed\u30b0\u30c7\u30fc\u30bf\u3092\u5206\u6790\u5bfe\u8c61\u3068\u3057\u305f\u3001 PL/R\u3092\u7528\u3044\u305f\u30c7\u30fc\u30bf\u30de\u30a4\u30cb\u30f3\u30b0Web\u30a2\u30d7\u30ea\u306e\u5b9f\u73fe(1)\u300d\n\n\n\u65b0\u5165\u793e\u54e1\u304c\u53d7\u3051\u308b\u4e00\u30f6\u6708\u306e\u958b\u767a\u7814\u4fee\u3067\u3001PostgreSQL\u3068R\u8a00\u8a9e\u3092\u7d71\u5408\u3057\u3001PL/R\u3092\u7528\u3044\u3066\u30c7\u30fc\u30bf\u30de\u30a4\u30cb\u30f3\u30b0\u306eWeb\u30a2\u30d7\u30ea\u3092\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002\u307e\u305f\u3001\u30b5\u30a4\u30dc\u30a6\u30ba\u793e\u5185\u3067\u4f7f\u7528\u3057\u3066\u3044\u308b\u300c\u30b5\u30a4\u30dc\u30a6\u30ba\u30ac\u30eb\u30fc\u30f32\u300d\u306eWeb\u30b5\u30fc\u30d0\u30fc\u306e\u30ed\u30b0\u30c7\u30fc\u30bf\u3092\u5206\u6790\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u3053\u3053\u3067\u3001\u3053\u308c\u3089\u306e\u6280\u8853\u306b\u3064\u3044\u3066\u3001\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n#### __PostgreSQL \u7248\u306e PL/SQL \u3067\u3042\u308b PL/pgSQL \u3092\u4f7f\u3063\u3066\u3001\u30af\u30a8\u30ea\u95a2\u6570\u3092\u5ba3\u8a00\u3059\u308b\u969b\u3001\u95a2\u6570\u306e\u306a\u304b\u306b R\u8a00\u8a9e\u306e\u30b3\u30fc\u30c9\u3092\u57cb\u3081\u8fbc\u3081\u308b\u3088\u3046\u3067\u3059\u3002__\n\n___\n\n__\u4ee5\u4e0b\u3001\u3044\u304f\u3064\u304b\u3001\u53c2\u8003\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306b\u30ea\u30f3\u30af\u3092\u5f35\u3063\u3066\u307f\u307e\u3057\u305f\u3002__\n\n* [RWiki \u300cR \u3068 PostgreSQL\u300d](http://www.okada.jp.org/RWiki/?R%20%E3%81%A8%20PostgreSQL)\n\n> \u95a2\u6570\u306e\u57fa\u672c\u5f62\n>\n> \u4ee5\u4e0b\u306e\u3088\u3046\u306bPL/R\u5f62\u306e\u624b\u7d9a\u304d\u3092\u5b9a\u7fa9\u3059\u308b\n>\n> ```\nCREATE OR REPLACE FUNCTION \u95a2\u6570\u540d (\u5f15\u6570\u30bf\u30a4\u30d7)\nRETURNS return-type AS '\n   \u95a2\u6570\u672c\u4f53\u3000\u2212\u2212\u3000\u3053\u3053\u306bR\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304f\n' LANGUAGE 'plr';\n> ```\n\n___\n\n\n* [Hatena::Diary fous\u306e\u65e5\u8a18 \uff082009/08/28\uff09\u300c[PostgreSQL][R] PostgreSQL\u3068PL/R\u300d](http://d.hatena.ne.jp/fous/20090828/1251387016)\n\n> \u3055\u3063\u305d\u304fFunctions and Arguments\u306b\u3042\u308b\u30b5\u30f3\u30d7\u30eb\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n>\n> ```\nCREATE TABLE emp (name text, age int, salary numeric(10,2));\nINSERT INTO emp VALUES ('Joe', 41, 250000.00);\nINSERT INTO emp VALUES ('Jim', 25, 120000.00);\nINSERT INTO emp VALUES ('Jon', 35, 50000.00);\nCREATE OR REPLACE FUNCTION overpaid (emp) RETURNS bool AS '\n    if (200000 < arg1$salary) {\n        return(TRUE)\n    }\n    if (arg1$age < 30 && 100000 < arg1$salary) {\n        return(TRUE)\n    }\n    return(FALSE)\n' LANGUAGE 'plr';\nSELECT name, overpaid(emp) FROM emp;\n> ```\n>\n> \u6ce8\u610f\u70b9\u3068\u3057\u3066\u3001PL/R\u306eCREATE FUNCTION\u6587\u306f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306esuper user\u6a29\u9650\u304c\u5fc5\u8981\u3067\u3059\u3002postgres\u30e6\u30fc\u30b6\u30fc\u306a\u3069\u3067\u3059\u306d\u3002R\u306b\u306f\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3084\u30d5\u30a1\u30a4\u30eb\u5165\u51fa\u529b\u306a\u3069\u30b7\u30b9\u30c6\u30e0\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u547d\u4ee4\u3082\u4f7f\u7528\u3067\u304d\u308b\u306e\u3067\u3001\u4ed5\u65b9\u306a\u3044\u3067\u3059\u3002\u3069\u3046\u3057\u3066\u3082\u4f7f\u7528\u3057\u305f\u3051\u308c\u3070CREATE LANGUAGE\u6642\u306bTRUSTED\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4e0e\u3048\u308c\u3070\u3067\u304d\u308b\u30fb\u30fb\u30fb\u304b\u3082\u3002\n>\n>\n> R\u306f\u7d71\u8a08\u89e3\u6790\u30bd\u30d5\u30c8\u3067\u3042\u308b\u3068\u540c\u6642\u306b\u3001\u7d50\u679c\u3092\u308f\u304b\u308a\u3084\u3059\u304f\u8868\u793a\u3059\u308b\u305f\u3081\u306b\u3001\u69d8\u3005\u306a\u30b0\u30e9\u30d5\u3092\u63cf\u753b\u3059\u308b\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002\u63cf\u753b\u3057\u305f\u30b0\u30e9\u30d5\u306f\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u306b\u4fdd\u5b58\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n>\n> ```\nCREATE TABLE temp (x int, y int);\nINSERT INTO temp VALUES(4,6);\nINSERT INTO temp VALUES(9,4);\n>\n>CREATE OR REPLACE FUNCTION f_graph() RETURNS text AS\n'\nstr <<- pg.spi.exec (''select x as \"my a\" ,y as \"my b\" from temp order by x,y'');\npdf(''/tmp/myplot.pdf'');\nplot(str,type=\"l\",main=\"Graphics Demonstration\",sub=\"Line Graph\");\ndev.off();\nprint(''done'');\n'\nLANGUAGE plr;\n> ```\n\n___\n\n* [IT\u30a8\u30f3\u30b8\u30cb\u30a2\u306e\u30e1\u30bf\u30fb\u30ce\u30fc\u30c8 \u300cPostgreSQL\u3067\u7d71\u8a08\u89e3\u6790 PL/R \u57fa\u790e\u7de8 : PostgreSQL Advent Calendar #6\u300d](http://engineer-metanote.blogspot.jp/2011/12/postgresql-plr-postgresql-advent.html)\n* [\u8272\u3005\u3068\u8003\u3048\u3066\u307f\u308b \u300c\u81ea\u5206\u306e\u305f\u3081\u306e\u300cPL/R\u3092\u4f7f\u3063\u3066\u308b\u300d\uff08\uff11\uff09\u300d](http://cis-jp.blogspot.jp/2012/10/plr.html)\n\n___\n\n# __\u3010 PL/R \u3092\u7528\u3044\u305f Web\u30a2\u30d7\u30ea\u5b9f\u88c5\u4e8b\u4f8b \u3011__\n\n* [Cybozu Inside Out (2009/6/12)\u300c\u30b0\u30eb\u30fc\u30d7\u30a6\u30a7\u30a2\u306e\u30ed\u30b0\u30c7\u30fc\u30bf\u3092\u5206\u6790\u5bfe\u8c61\u3068\u3057\u305f\u3001 PL/R\u3092\u7528\u3044\u305f\u30c7\u30fc\u30bf\u30de\u30a4\u30cb\u30f3\u30b0Web\u30a2\u30d7\u30ea\u306e\u5b9f\u73fe(1)\u300d](http://developer.cybozu.co.jp/archives/tech/2009/06/plrweb1-8cb7.html)\n\n> \u65b0\u5165\u793e\u54e1\u304c\u53d7\u3051\u308b\u4e00\u30f6\u6708\u306e\u958b\u767a\u7814\u4fee\u3067\u3001PostgreSQL\u3068R\u8a00\u8a9e\u3092\u7d71\u5408\u3057\u3001PL/R\u3092\u7528\u3044\u3066\u30c7\u30fc\u30bf\u30de\u30a4\u30cb\u30f3\u30b0\u306eWeb\u30a2\u30d7\u30ea\u3092\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002\u307e\u305f\u3001\u30b5\u30a4\u30dc\u30a6\u30ba\u793e\u5185\u3067\u4f7f\u7528\u3057\u3066\u3044\u308b\u300c\u30b5\u30a4\u30dc\u30a6\u30ba\u30ac\u30eb\u30fc\u30f32\u300d\u306eWeb\u30b5\u30fc\u30d0\u30fc\u306e\u30ed\u30b0\u30c7\u30fc\u30bf\u3092\u5206\u6790\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u3053\u3053\u3067\u3001\u3053\u308c\u3089\u306e\u6280\u8853\u306b\u3064\u3044\u3066\u3001\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n", "tags": ["R", "PostgreSQL", "PLpgSQL", "plsql", "plr"]}