{"context": " More than 1 year has passed since last update.Chef-Client\u306b\u306fWhitelist Attributes\u3068\u3044\u3046\u6a5f\u80fd\u304c\u3042\u3063\u3066\u3001Ohai\u304c\u53ce\u96c6\u3057\u305f(Automatic)Attributes\u304b\u3089\u3001\u4efb\u610f\u306eAttribute\u306e\u307f\u4fdd\u5b58\u5bfe\u8c61\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u4f7f\u3044\u65b9\u306fclient.rb\u306b\u66f8\u3051\u3070OK\u3002\n\nKnife Zero Bootstrap \u3067\u666e\u901a\u306bnode\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3068\u3067\u304b\u3044\n\u9069\u5f53\u306aAmazon EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306bbootstrap\u3092\u4ed5\u639b\u3051\u3066\u307f\u307e\u3059\u3002\n$ knife zero bootstrap 52.69.40.215 -x ec2-user -i ~/.ssh/privatekey --hint ec2 -N test-server\nDoing old-style registration with the validation key at ...\nDelete your validation key in order to use your user credentials instead\n\nConnecting to 52.69.40.215\n52.69.40.215 -----> Installing Chef Omnibus (-v 12)\n52.69.40.215 downloading https://www.opscode.com/chef/install.sh\n52.69.40.215   to file /tmp/install.sh.2281/install.sh\n52.69.40.215 trying wget...\n52.69.40.215 Downloading Chef 12 for el...\n52.69.40.215 downloading https://www.opscode.com/chef/metadata?v=12&prerelease=false&nightlies=false&p=el&pv=6&m=x86_64\n52.69.40.215   to file /tmp/install.sh.2286/metadata.txt\n52.69.40.215 trying wget...\n52.69.40.215 url    https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-12.3.0-1.el6.x86_64.rpm\n52.69.40.215 md5    c19fefcb3d033107e9fbdb3839312584\n52.69.40.215 sha256 4b7c846a9ad93564cc203a5ac99890431f7d6ad159c424aa89827fd772c9881d\n52.69.40.215 downloaded metadata file looks valid...\n52.69.40.215 downloading https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-12.3.0-1.el6.x86_64.rpm\n52.69.40.215   to file /tmp/install.sh.2286/chef-12.3.0-1.el6.x86_64.rpm\n52.69.40.215 trying wget...\n52.69.40.215 Comparing checksum with sha256sum...\n52.69.40.215 Installing Chef 12\n52.69.40.215 installing with rpm...\n52.69.40.215 warning: /tmp/install.sh.2286/chef-12.3.0-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY\n52.69.40.215 Preparing...                          ################################# [100%]\n52.69.40.215 Updating / installing...\n52.69.40.215    1:chef-12.3.0-1.el6                ################################# [100%]\n52.69.40.215 Thank you for installing Chef!\n52.69.40.215 Starting first Chef Client run...\n52.69.40.215 Starting Chef Client, version 12.3.0\n52.69.40.215 Creating a new client identity for test-server using the validator key.\n52.69.40.215 resolving cookbooks for run list: []\n52.69.40.215 Synchronizing Cookbooks:\n52.69.40.215 Compiling Cookbooks...\n52.69.40.215 [2015-06-15T08:00:47+00:00] WARN: Node test-server has an empty run list.\n52.69.40.215 Converging 0 resources\n52.69.40.215 \n52.69.40.215 Running handlers:\n52.69.40.215 Running handlers complete\n52.69.40.215 Chef Client finished, 0/0 resources updated in 2.739626435 seconds\n\n\nWhitelist\u306a\u3057\u3067\u63a1\u96c6\u3057\u305fNode\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30ad\u30fc\u3092\u78ba\u8a8d\n\u7121\u7b56\u3067\u3084\u308b\u3068\u30bf\u30c3\u30d7\u30ea\u3068\u308c\u307e\u3057\u305f\u3002\u56fa\u5b9a\u7684\u306a\u5024\u3068\u72b6\u6cc1\u306b\u3088\u308b\u5024\u304c\u6df7\u5728\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u4f8b\u3048\u3070node\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3082git\u306e\u7ba1\u7406\u5bfe\u8c61\u306b\u3057\u305f\u3044\u306a\u30fc\u3068\u3044\u3046\u30b1\u30fc\u30b9\u3067\u7279\u306b\u9762\u5012\u3067\u3059\u3002\n$ knife exec -E \"puts nodes.all.first.keys\"\ntags\nfilesystem\nnetwork\ncounters\nipaddress\nmacaddress\nip6address\nmemory\nkernel\nlsb\nos\nos_version\nplatform\nplatform_version\nplatform_family\nuptime_seconds\nuptime\nidletime_seconds\nidletime\ncpu\nvirtualization\nroot_group\nblock_device\nec2\ncloud\nohai_time\nlanguages\ncommand\nchef_packages\netc\ncurrent_user\ninit_package\nkeys\ncloud_v2\ndmi\nhostname\nmachinename\ndomain\nrecipes\nroles\n\n\nKnife Zero Bootstrap \u3067Whitelist\u3092\u6307\u5b9a\u3059\u308b\u3002\nChef\u306b\u5143\u3005\u3042\u308b\u6a5f\u80fd\u3068\u3044\u3046\u3053\u3068\u3067\u3001knife-zero\u306ev1.7\u3067Bootstrap\u6642\u306bWhitelist\u3082\u4f7f\u3046\u3088\u3046\u306b\u6a5f\u80fd\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\n\u305f\u3068\u3048\u3070knife.rb\u306b\u3053\u306e\u69d8\u306b\u66f8\u3044\u3066\u3001\u3042\u3089\u305f\u3081\u3066Bootstrap\u3057\u3066\u307f\u307e\u3059\u3002\n\nknife.rb\nknife[:automatic_attribute_whitelist] = [\n  \"fqdn/\",\n  \"os/\",\n  \"os_version/\",\n  \"hostname\",\n  \"ipaddress/\",\n  \"roles/\",\n  \"recipes/\",\n  \"ipaddress/\",\n  \"platform/\",\n  \"platform_version/\",\n  \"platform_version/\",\n  \"cloud/\",\n  \"cloud_v2/\",\n  \"ec2/ami_id/\",\n  \"ec2/instance_id/\",\n  \"ec2/instance_type/\",\n  \"ec2/placement_availability_zone/\",\n  \"chef_packages/\"\n]\n\n\nBootstrap\u3055\u308c\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e/etc/chef/client.rb\u306b\u306f\u3001automatic_attribute_whitelist\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u3002\n\n/etc/chef/client.rb\nlog_location     STDOUT\nchef_server_url  \"chefzero://localhost:8889\"\nvalidation_client_name \"chef-validator\"\nnode_name \"test-server\"\nssl_verify_mode :none\nautomatic_attribute_whitelist [\"fqdn/\", \"os/\", \"os_version/\", \"hostname\", \"ipaddress/\", \"roles/\", \"recipes/\", \"ipaddress/\", \"platform/\", \"platform_version/\", \"platform_version/\", \"cloud/\", \"cloud_v2/\", \"ec2/ami_id/\", \"ec2/instance_id/\", \"ec2/instance_type/\", \"ec2/placement_availability_zone/\", \"chef_packages/\"]\n\n\n\nWhitelist\u3092\u6307\u5b9a\u3057\u305fNode\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u69d8\u5b50\n\u30ed\u30fc\u30ab\u30eb\u306enode.json(nodes/test-server.json)\u306b\u3042\u308b\u30ad\u30fc\u306f\u3053\u308c\u3060\u3051\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n$ knife exec -E \"puts nodes.all.first.keys\"\ntags\nos\nos_version\nhostname\nipaddress\nroles\nrecipes\nplatform\nplatform_version\ncloud\ncloud_v2\nec2\nchef_packages\n\nVim\u3067\u76f4\u63a5\u958b\u3044\u3066\u3082\u753b\u9762\u306b\u53ce\u307e\u308b\u304f\u3089\u3044\u3067\u3059\u306d\u3002\n\nnodes/test-server.json\n{\n  \"name\": \"test-server\",\n  \"normal\": {\n    \"tags\": [\n\n    ]\n  },\n  \"automatic\": {\n    \"os\": \"linux\",\n    \"os_version\": \"3.14.35-28.38.amzn1.x86_64\",\n    \"hostname\": \"test-server\",\n    \"ipaddress\": \"10.0.1.122\",\n    \"roles\": [\n\n    ],\n    \"recipes\": [\n\n    ],\n    \"platform\": \"amazon\",\n    \"platform_version\": \"2015.03\",\n    \"cloud\": {\n      \"public_ips\": [\n        \"52.69.40.215\"\n      ],\n      \"private_ips\": [\n        \"10.0.1.122\"\n      ],\n      \"public_ipv4\": \"52.69.40.215\",\n      \"public_hostname\": \"\",\n      \"local_ipv4\": \"10.0.1.122\",\n      \"local_hostname\": \"test-server.ap-northeast-1.compute.internal\",\n      \"provider\": \"ec2\"\n    },\n    \"cloud_v2\": {\n      \"public_ipv4_addrs\": [\n        \"52.69.40.215\"\n      ],\n      \"local_ipv4_addrs\": [\n        \"10.0.1.122\"\n      ],\n      \"provider\": \"ec2\",\n      \"public_hostname\": \"\",\n      \"local_hostname\": \"test-server.ap-northeast-1.compute.internal\",\n      \"public_ipv4\": \"52.69.40.215\",\n      \"local_ipv4\": \"10.0.1.122\"\n    },\n    \"ec2\": {\n      \"ami_id\": \"ami-cbf90ecb\",\n      \"instance_id\": \"i-0ef561fb\",\n      \"instance_type\": \"t2.micro\",\n      \"placement_availability_zone\": \"ap-northeast-1c\"\n    },\n    \"chef_packages\": {\n      \"chef\": {\n        \"version\": \"12.3.0\",\n        \"chef_root\": \"/opt/chef/embedded/apps/chef/lib\"\n      },\n      \"ohai\": {\n        \"version\": \"8.3.0\",\n        \"ohai_root\": \"/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/ohai-8.3.0/lib/ohai\"\n      }\n    }\n  }\n}\n\n\n\u3053\u308c\u306a\u3089\u3042\u307e\u308a\u3058\u3083\u3093\u3058\u3083\u3093\u3068\u5909\u66f4\u306f\u3055\u308c\u307e\u305b\u3093\u3002\n\n\u3082\u3046Bootstrap\u3057\u3061\u3083\u3063\u305f\u30db\u30b9\u30c8\u306eclient.rb\u3060\u3051\u3092\u66f4\u65b0\u3057\u3066\u3001Whitelist\u5bfe\u5fdc\u3057\u305f\u3044\uff1f\n\u3042\u3089\u53e4\u3044knife-zero\u3067Bootstrap\u3057\u3061\u3083\u3063\u305f\u308f\u3088\u3002\u3068\u3044\u3046\u74b0\u5883\u306f\u3001--no-converge\u3067bootstrap\u3059\u308b\u3084\u308a\u65b9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n--[no-]converge              Bootstrap without Chef-Client Run.(for only update client.rb)\n\n\u901a\u5e38\u306eBootstrap\u306f\u4e00\u5ea6Chef-Client\u304c\u8d70\u308b\u305f\u3081\u3001\u518d\u5ea6\u5b9f\u884c\u3059\u308b\u969b\u306b\u306f\u6c17\u3092\u4f7f\u3044\u307e\u3057\u305f\u304c\u3001--no-converge\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u5b9f\u884c\u3057\u306a\u3044\u3068\u3044\u3046\u9078\u629e\u80a2\u3092\u8ffd\u52a0\u3002\n$ knife zero bootstrap 52.69.40.215 -x ec2-user -i ~/.ssh/private_key --hint ec2 -N test-server --no-converge\nDoing old-style registration with the validation key at ...\nDelete your validation key in order to use your user credentials instead\n\nConnecting to 52.69.40.215\n52.69.40.215 -----> Existing Chef installation detected\n52.69.40.215 Starting first Chef Client run...\n52.69.40.215 Execution of Chef-Client has been canceled due to bootstrap_converge is false. <= Chef-Client\u5b9f\u884c\u3092\u3068\u308a\u3084\u3081\u3066\u7d42\u4e86\n\nclient.rb\u304c\u66f8\u304d\u63db\u308f\u3063\u305f\u306e\u3067\u3001zero converge(chef_client)\u3092\u5b9f\u884c\u3059\u308c\u3070\u30b9\u30c3\u30ad\u30eaNode\u306b\u306a\u308a\u307e\u3059\u3002\n$ knife zero converge name:test-server -x ec2-user -i ~/.ssh/private_key -a cloud_v2.public_ipv4 \n52.69.40.215 Starting Chef Client, version 12.3.0\n52.69.40.215 resolving cookbooks for run list: []\n52.69.40.215 Synchronizing Cookbooks:\n52.69.40.215 Compiling Cookbooks...\n52.69.40.215 [2015-06-15T08:27:08+00:00] WARN: Node test-server has an empty run list.\n52.69.40.215 Converging 0 resources\n52.69.40.215 [2015-06-15T08:27:08+00:00] WARN: Could not find whitelist attribute fqdn/.\n52.69.40.215 \n52.69.40.215 Running handlers:\n52.69.40.215 Running handlers complete\n52.69.40.215 Chef Client finished, 0/0 resources updated in 1.669752105 seconds\n\n--[no-]converge\u306e\u30d5\u30e9\u30b0\u306fknife[:bootstrap_converge]\u3068\u3057\u3066knife.rb\u3067\u3082\u6307\u5b9aOK\u3001CLI\u30aa\u30d7\u30b7\u30e7\u30f3\u512a\u5148\u3067\u3059\u3002\nknife[:bootstrap_converge] = true/false\n\n\u3061\u306a\u307f\u306b\u521d\u56de\u306eBootstrap\u3067--no-converge\u3057\u3061\u3083\u3046\u3068\u3001\u305d\u3082\u305d\u3082node\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u3067\u304d\u306a\u3044\u305f\u3081\u3001\u305d\u306e\u5f8cconverge\u304c\u3067\u304d\u307e\u305b\u3093\u3002\u3084\u308a\u76f4\u3057\u3067\u3059\u3002\n\nTwitter\u3067\u62fe\u3063\u305f\u610f\u898b\u3068\u3001Github Issue\u306b\u7a81\u8cab\u3057\u3066\u304d\u305f\u3069\u3053\u304b\u7570\u56fd\u306e\u5144\u3055\u3093\u9054\u306e\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u304c\u53cd\u6620\u3055\u308c\u307e\u3057\u305f\u3002\n\nChef-Client\u306b\u306f[Whitelist Attributes](https://docs.chef.io/attributes.html#whitelist-attributes)\u3068\u3044\u3046\u6a5f\u80fd\u304c\u3042\u3063\u3066\u3001Ohai\u304c\u53ce\u96c6\u3057\u305f(Automatic)Attributes\u304b\u3089\u3001\u4efb\u610f\u306eAttribute\u306e\u307f\u4fdd\u5b58\u5bfe\u8c61\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u4f7f\u3044\u65b9\u306f`client.rb`\u306b\u66f8\u3051\u3070OK\u3002\n\n\n## Knife Zero Bootstrap \u3067\u666e\u901a\u306bnode\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3068\u3067\u304b\u3044\n\n\u9069\u5f53\u306aAmazon EC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306bbootstrap\u3092\u4ed5\u639b\u3051\u3066\u307f\u307e\u3059\u3002\n\n```shell:\n$ knife zero bootstrap 52.69.40.215 -x ec2-user -i ~/.ssh/privatekey --hint ec2 -N test-server\nDoing old-style registration with the validation key at ...\nDelete your validation key in order to use your user credentials instead\n\nConnecting to 52.69.40.215\n52.69.40.215 -----> Installing Chef Omnibus (-v 12)\n52.69.40.215 downloading https://www.opscode.com/chef/install.sh\n52.69.40.215   to file /tmp/install.sh.2281/install.sh\n52.69.40.215 trying wget...\n52.69.40.215 Downloading Chef 12 for el...\n52.69.40.215 downloading https://www.opscode.com/chef/metadata?v=12&prerelease=false&nightlies=false&p=el&pv=6&m=x86_64\n52.69.40.215   to file /tmp/install.sh.2286/metadata.txt\n52.69.40.215 trying wget...\n52.69.40.215 url\thttps://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-12.3.0-1.el6.x86_64.rpm\n52.69.40.215 md5\tc19fefcb3d033107e9fbdb3839312584\n52.69.40.215 sha256\t4b7c846a9ad93564cc203a5ac99890431f7d6ad159c424aa89827fd772c9881d\n52.69.40.215 downloaded metadata file looks valid...\n52.69.40.215 downloading https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-12.3.0-1.el6.x86_64.rpm\n52.69.40.215   to file /tmp/install.sh.2286/chef-12.3.0-1.el6.x86_64.rpm\n52.69.40.215 trying wget...\n52.69.40.215 Comparing checksum with sha256sum...\n52.69.40.215 Installing Chef 12\n52.69.40.215 installing with rpm...\n52.69.40.215 warning: /tmp/install.sh.2286/chef-12.3.0-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY\n52.69.40.215 Preparing...                          ################################# [100%]\n52.69.40.215 Updating / installing...\n52.69.40.215    1:chef-12.3.0-1.el6                ################################# [100%]\n52.69.40.215 Thank you for installing Chef!\n52.69.40.215 Starting first Chef Client run...\n52.69.40.215 Starting Chef Client, version 12.3.0\n52.69.40.215 Creating a new client identity for test-server using the validator key.\n52.69.40.215 resolving cookbooks for run list: []\n52.69.40.215 Synchronizing Cookbooks:\n52.69.40.215 Compiling Cookbooks...\n52.69.40.215 [2015-06-15T08:00:47+00:00] WARN: Node test-server has an empty run list.\n52.69.40.215 Converging 0 resources\n52.69.40.215 \n52.69.40.215 Running handlers:\n52.69.40.215 Running handlers complete\n52.69.40.215 Chef Client finished, 0/0 resources updated in 2.739626435 seconds\n```\n\n### Whitelist\u306a\u3057\u3067\u63a1\u96c6\u3057\u305fNode\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30ad\u30fc\u3092\u78ba\u8a8d\n\n\u7121\u7b56\u3067\u3084\u308b\u3068\u30bf\u30c3\u30d7\u30ea\u3068\u308c\u307e\u3057\u305f\u3002\u56fa\u5b9a\u7684\u306a\u5024\u3068\u72b6\u6cc1\u306b\u3088\u308b\u5024\u304c\u6df7\u5728\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u4f8b\u3048\u3070node\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3082git\u306e\u7ba1\u7406\u5bfe\u8c61\u306b\u3057\u305f\u3044\u306a\u30fc\u3068\u3044\u3046\u30b1\u30fc\u30b9\u3067\u7279\u306b\u9762\u5012\u3067\u3059\u3002\n\n```\n$ knife exec -E \"puts nodes.all.first.keys\"\ntags\nfilesystem\nnetwork\ncounters\nipaddress\nmacaddress\nip6address\nmemory\nkernel\nlsb\nos\nos_version\nplatform\nplatform_version\nplatform_family\nuptime_seconds\nuptime\nidletime_seconds\nidletime\ncpu\nvirtualization\nroot_group\nblock_device\nec2\ncloud\nohai_time\nlanguages\ncommand\nchef_packages\netc\ncurrent_user\ninit_package\nkeys\ncloud_v2\ndmi\nhostname\nmachinename\ndomain\nrecipes\nroles\n```\n\n\n## Knife Zero Bootstrap \u3067Whitelist\u3092\u6307\u5b9a\u3059\u308b\u3002\n\nChef\u306b\u5143\u3005\u3042\u308b\u6a5f\u80fd\u3068\u3044\u3046\u3053\u3068\u3067\u3001knife-zero\u306ev1.7\u3067Bootstrap\u6642\u306bWhitelist\u3082\u4f7f\u3046\u3088\u3046\u306b\u6a5f\u80fd\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\n\n\u305f\u3068\u3048\u3070knife.rb\u306b\u3053\u306e\u69d8\u306b\u66f8\u3044\u3066\u3001\u3042\u3089\u305f\u3081\u3066Bootstrap\u3057\u3066\u307f\u307e\u3059\u3002\n\n```Ruby:knife.rb\nknife[:automatic_attribute_whitelist] = [\n  \"fqdn/\",\n  \"os/\",\n  \"os_version/\",\n  \"hostname\",\n  \"ipaddress/\",\n  \"roles/\",\n  \"recipes/\",\n  \"ipaddress/\",\n  \"platform/\",\n  \"platform_version/\",\n  \"platform_version/\",\n  \"cloud/\",\n  \"cloud_v2/\",\n  \"ec2/ami_id/\",\n  \"ec2/instance_id/\",\n  \"ec2/instance_type/\",\n  \"ec2/placement_availability_zone/\",\n  \"chef_packages/\"\n]\n```\n\n\nBootstrap\u3055\u308c\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e`/etc/chef/client.rb`\u306b\u306f\u3001`automatic_attribute_whitelist`\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u3002\n\n```/etc/chef/client.rb \nlog_location     STDOUT\nchef_server_url  \"chefzero://localhost:8889\"\nvalidation_client_name \"chef-validator\"\nnode_name \"test-server\"\nssl_verify_mode :none\nautomatic_attribute_whitelist [\"fqdn/\", \"os/\", \"os_version/\", \"hostname\", \"ipaddress/\", \"roles/\", \"recipes/\", \"ipaddress/\", \"platform/\", \"platform_version/\", \"platform_version/\", \"cloud/\", \"cloud_v2/\", \"ec2/ami_id/\", \"ec2/instance_id/\", \"ec2/instance_type/\", \"ec2/placement_availability_zone/\", \"chef_packages/\"]\n```\n\n\n### Whitelist\u3092\u6307\u5b9a\u3057\u305fNode\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u69d8\u5b50\n\n\u30ed\u30fc\u30ab\u30eb\u306enode.json(`nodes/test-server.json`)\u306b\u3042\u308b\u30ad\u30fc\u306f\u3053\u308c\u3060\u3051\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n```\n$ knife exec -E \"puts nodes.all.first.keys\"\ntags\nos\nos_version\nhostname\nipaddress\nroles\nrecipes\nplatform\nplatform_version\ncloud\ncloud_v2\nec2\nchef_packages\n```\n\nVim\u3067\u76f4\u63a5\u958b\u3044\u3066\u3082\u753b\u9762\u306b\u53ce\u307e\u308b\u304f\u3089\u3044\u3067\u3059\u306d\u3002\n\n```nodes/test-server.json\n{\n  \"name\": \"test-server\",\n  \"normal\": {\n    \"tags\": [\n\n    ]\n  },\n  \"automatic\": {\n    \"os\": \"linux\",\n    \"os_version\": \"3.14.35-28.38.amzn1.x86_64\",\n    \"hostname\": \"test-server\",\n    \"ipaddress\": \"10.0.1.122\",\n    \"roles\": [\n\n    ],\n    \"recipes\": [\n\n    ],\n    \"platform\": \"amazon\",\n    \"platform_version\": \"2015.03\",\n    \"cloud\": {\n      \"public_ips\": [\n        \"52.69.40.215\"\n      ],\n      \"private_ips\": [\n        \"10.0.1.122\"\n      ],\n      \"public_ipv4\": \"52.69.40.215\",\n      \"public_hostname\": \"\",\n      \"local_ipv4\": \"10.0.1.122\",\n      \"local_hostname\": \"test-server.ap-northeast-1.compute.internal\",\n      \"provider\": \"ec2\"\n    },\n    \"cloud_v2\": {\n      \"public_ipv4_addrs\": [\n        \"52.69.40.215\"\n      ],\n      \"local_ipv4_addrs\": [\n        \"10.0.1.122\"\n      ],\n      \"provider\": \"ec2\",\n      \"public_hostname\": \"\",\n      \"local_hostname\": \"test-server.ap-northeast-1.compute.internal\",\n      \"public_ipv4\": \"52.69.40.215\",\n      \"local_ipv4\": \"10.0.1.122\"\n    },\n    \"ec2\": {\n      \"ami_id\": \"ami-cbf90ecb\",\n      \"instance_id\": \"i-0ef561fb\",\n      \"instance_type\": \"t2.micro\",\n      \"placement_availability_zone\": \"ap-northeast-1c\"\n    },\n    \"chef_packages\": {\n      \"chef\": {\n        \"version\": \"12.3.0\",\n        \"chef_root\": \"/opt/chef/embedded/apps/chef/lib\"\n      },\n      \"ohai\": {\n        \"version\": \"8.3.0\",\n        \"ohai_root\": \"/opt/chef/embedded/lib/ruby/gems/2.1.0/gems/ohai-8.3.0/lib/ohai\"\n      }\n    }\n  }\n}\n```\n\n\u3053\u308c\u306a\u3089\u3042\u307e\u308a\u3058\u3083\u3093\u3058\u3083\u3093\u3068\u5909\u66f4\u306f\u3055\u308c\u307e\u305b\u3093\u3002\n\n\n## \u3082\u3046Bootstrap\u3057\u3061\u3083\u3063\u305f\u30db\u30b9\u30c8\u306e`client.rb`\u3060\u3051\u3092\u66f4\u65b0\u3057\u3066\u3001Whitelist\u5bfe\u5fdc\u3057\u305f\u3044\uff1f\n\n\u3042\u3089\u53e4\u3044knife-zero\u3067Bootstrap\u3057\u3061\u3083\u3063\u305f\u308f\u3088\u3002\u3068\u3044\u3046\u74b0\u5883\u306f\u3001`--no-converge`\u3067bootstrap\u3059\u308b\u3084\u308a\u65b9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\n--[no-]converge              Bootstrap without Chef-Client Run.(for only update client.rb)\n```\n\n\u901a\u5e38\u306eBootstrap\u306f\u4e00\u5ea6Chef-Client\u304c\u8d70\u308b\u305f\u3081\u3001\u518d\u5ea6\u5b9f\u884c\u3059\u308b\u969b\u306b\u306f\u6c17\u3092\u4f7f\u3044\u307e\u3057\u305f\u304c\u3001`--no-converge`\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u5b9f\u884c\u3057\u306a\u3044\u3068\u3044\u3046\u9078\u629e\u80a2\u3092\u8ffd\u52a0\u3002\n\n\n```shell:\n$ knife zero bootstrap 52.69.40.215 -x ec2-user -i ~/.ssh/private_key --hint ec2 -N test-server --no-converge\nDoing old-style registration with the validation key at ...\nDelete your validation key in order to use your user credentials instead\n\nConnecting to 52.69.40.215\n52.69.40.215 -----> Existing Chef installation detected\n52.69.40.215 Starting first Chef Client run...\n52.69.40.215 Execution of Chef-Client has been canceled due to bootstrap_converge is false. <= Chef-Client\u5b9f\u884c\u3092\u3068\u308a\u3084\u3081\u3066\u7d42\u4e86\n```\n\nclient.rb\u304c\u66f8\u304d\u63db\u308f\u3063\u305f\u306e\u3067\u3001zero converge(chef_client)\u3092\u5b9f\u884c\u3059\u308c\u3070\u30b9\u30c3\u30ad\u30eaNode\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\n$ knife zero converge name:test-server -x ec2-user -i ~/.ssh/private_key -a cloud_v2.public_ipv4 \n52.69.40.215 Starting Chef Client, version 12.3.0\n52.69.40.215 resolving cookbooks for run list: []\n52.69.40.215 Synchronizing Cookbooks:\n52.69.40.215 Compiling Cookbooks...\n52.69.40.215 [2015-06-15T08:27:08+00:00] WARN: Node test-server has an empty run list.\n52.69.40.215 Converging 0 resources\n52.69.40.215 [2015-06-15T08:27:08+00:00] WARN: Could not find whitelist attribute fqdn/.\n52.69.40.215 \n52.69.40.215 Running handlers:\n52.69.40.215 Running handlers complete\n52.69.40.215 Chef Client finished, 0/0 resources updated in 1.669752105 seconds\n```\n\n`--[no-]converge`\u306e\u30d5\u30e9\u30b0\u306f`knife[:bootstrap_converge]`\u3068\u3057\u3066knife.rb\u3067\u3082\u6307\u5b9aOK\u3001CLI\u30aa\u30d7\u30b7\u30e7\u30f3\u512a\u5148\u3067\u3059\u3002\n\n```\nknife[:bootstrap_converge] = true/false\n```\n\n\u3061\u306a\u307f\u306b\u521d\u56de\u306eBootstrap\u3067`--no-converge`\u3057\u3061\u3083\u3046\u3068\u3001\u305d\u3082\u305d\u3082node\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u3067\u304d\u306a\u3044\u305f\u3081\u3001\u305d\u306e\u5f8cconverge\u304c\u3067\u304d\u307e\u305b\u3093\u3002\u3084\u308a\u76f4\u3057\u3067\u3059\u3002\n\n----\n\nTwitter\u3067\u62fe\u3063\u305f\u610f\u898b\u3068\u3001Github Issue\u306b\u7a81\u8cab\u3057\u3066\u304d\u305f\u3069\u3053\u304b\u7570\u56fd\u306e\u5144\u3055\u3093\u9054\u306e\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u304c\u53cd\u6620\u3055\u308c\u307e\u3057\u305f\u3002\n", "tags": ["chef-zero", "chef", "knife-zero"]}