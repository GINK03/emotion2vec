{"context": " More than 1 year has passed since last update.WP\u6848\u4ef6\u3067\u521d\u3081\u3066REST API\u3092\u4f7f\u3063\u3066\u307f\u305f\u306e\u3067\u3001\u8a18\u4e8b\u306emore\u30dc\u30bf\u30f3\u3092\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\nmore\u30dc\u30bf\u30f3\u306e\u30bd\u30fc\u30b9\u306f\u3001\u3053\u3061\u3089\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u7d44\u307f\u5408\u308f\u305b\u3066\u307f\u307e\u3057\u305f\u3002\n\u30bd\u30fc\u30b9\u306f\u6574\u7406\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u3002\uff08\u5b9f\u88c5\u3059\u308b\u3053\u3068\u306b\u96c6\u4e2d\u3057\u3066\u3044\u305f\u305f\u3081\u3002\u3002\u3002\u3042\u3068\u3067\u6574\u7406\u3059\u308b\u4e88\u5b9a\uff09\n\u305f\u3076\u3093\u3001\u307e\u305f\u3053\u3046\u3044\u3063\u305f\u306e\u3092\u4f7f\u3063\u3066\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u3042\u308b\u3068\u601d\u3046\u306e\u3067\u30e1\u30e2\u3068\u3057\u3066\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nWP REST API\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3053\u3061\u3089\n\nhttp://wp-api.org/\n\n\nHTML \u30c8\u30c3\u30d7\u30da\u30fc\u30b8\n<div class=\"clearfix\" id=\"content\">\n</div>\n\n\nHTML \u30ab\u30c6\u30b4\u30ea\u7528\u30da\u30fc\u30b8\n<?php\n  $category = get_the_category();\n  $cat_id   = $category[0]->cat_ID;\n  $cat_name = $category[0]->cat_name;\n  $cat_slug = $category[0]->category_nicename;\n?>\n<div class=\"clearfix\" id=\"page_content\" data-name=\"<?php echo $cat_slug; ?>\">\n</div>\n\n\nJS\n$(function(){\n  function cutTextEvent(){\n    var $title = $('.p-blogListBox__title');\n    var cutFigure = '25';\n    var afterTxt = ' \u2026';\n    $title.each(function(){\n      var textLength = $(this).text().length;\n      var textTrim = $(this).text().substr(0,(cutFigure));\n      if(cutFigure < textLength) {\n        $(this).html(textTrim + afterTxt).css({visibility:'visible'});\n      } else if(cutFigure >= textLength) {\n        $(this).css({visibility:'visible'});\n      }\n    });\n  }\n  var setArea = $(\"#content\"),\n  setArea_page = $(\"#page_content\"),\n  loadNum = 4, // \u8aad\u307f\u8fbc\u3080\u500b\u6570\n  loadTxt = 'Now Loading...', // Loading\u4e2d\u306e\u8868\u793a\u30c6\u30ad\u30b9\u30c8\n  btnTxt = '\u3082\u3063\u3068\u898b\u308b', // \u30dc\u30bf\u30f3\u30c6\u30ad\u30b9\u30c8\n  fadeSpeed = 500; // \u30d5\u30a7\u30fc\u30c9\u30b9\u30d4\u30fc\u30c9\n\n  setArea.after('<div id=\"btnMore\" class=\"p-blog__btn clearfix\" style=\"overflow: hidden; clear: both\"><a herf=\"#\">' + btnTxt + '</a></div>');\n  var setMore = setArea.next('#btnMore');\n\n  setArea_page.after('<div id=\"btnMore\" class=\"p-blog__btn clearfix\" style=\"overflow: hidden; clear: both\"><a herf=\"#\">' + btnTxt + '</a></div>');\n  var setMore_top = setArea_page.next('#btnMore');\n\n  var page_name = $('#content').data('name');\n  var category_urls = '/wp-json/posts?filter[orderby]=&filter[category_name]=' + page_name;\n  var post_url =  '/wp-json/posts';\n\n  function ajax_list(urls,area){\n    $.ajax({\n      url: urls,\n      dataType: 'json',\n      success : function(data){\n        var dataLengh = data.length,\n        loadItemLength = area.find('.loadItem').length,\n        setAdj = (dataLengh)-(loadItemLength),\n        setBeg = (dataLengh)-(setAdj);\n        function blogList(number){\n          var title = data[number].title;\n          var link = data[number].link;\n          var category = '';\n          for (var j = data[number].terms.category.length - 1; j >= 0; j--) {\n            category += data[number].terms.category[j].name;\n          }\n          var pubDD = new Date(data[i].date);\n          yy = pubDD.getYear();if (yy < 2000) { yy += 1900; }\n          mm = pubDD.getMonth() + 1;dd = pubDD.getDate();\n          var pubDate = yy +'\u5e74'+ mm +'\u6708'+ dd +'\u65e5';\n          var html = '<div class=\"p-blogListBox loadItem\"><a href=\"' + link + '\">'+ '<p class=\"p-blogListBox__category\">' + category +'</p>' + '<p class=\"is-read__txt c-fade\"><span>\u7d9a\u304d\u3092\u898b\u308b</span></p><h2 class=\"p-blogListBox__title\">' + title +'</h2><p class=\"p-blogListBox__date\">'+ pubDate + '</p></a></div>';\n          $(html).appendTo(area).css({opacity:'0'}).animate({opacity:'1'},fadeSpeed);\n          cutTextEvent();\n        }\n        if(!(dataLengh == loadItemLength)){\n          area.append('<div id=\"nowLoading\">' + loadTxt + '</div>');\n          if(loadItemLength == 0){\n            if(dataLengh <= loadNum){\n              for (var i=0; i<dataLengh; i++) {\n                blogList(i);\n              }\n              setMore.remove();\n              setMore_top.remove();\n            } else {\n              for (var i=0; i<loadNum; i++) {\n                blogList(i);\n              }\n            }\n          } else if(loadItemLength > 0 && loadItemLength < dataLengh){\n            if(loadNum < setAdj){\n              for (var i=0; i<loadNum; i++) {\n                v = i+setBeg;\n                blogList(v);\n              }\n            } else if(loadNum >= setAdj){\n              for (var i=0; i<setAdj; i++) {\n                v = i+setBeg;\n                blogList(v);\n              }\n              setMore.remove();\n              setMore_top.remove();\n            }\n          } else if(loadItemLength == dataLengh){\n            return false;\n          }\n        } else {\n          return false;\n        }\n      }, //success\n      complete : function(){\n        $('#nowLoading').each(function(){\n          $(this).remove();\n        });\n        return false;\n      } //complete\n    });\n    return false;\n  }\n\n  setMore.click(function(){\n    ajax_list(category_urls,setArea);\n  }).click();\n  setMore_top.click(function(){\n    ajax_list(post_url,setArea_page);\n  }).click();\n  cutTextEvent();\n});\n\n\n\u53c2\u8003\u30b5\u30a4\u30c8\n\njQuery\u3067\u5916\u90e8HTML\uff08JSON\u5f62\u5f0f\uff09\u5316\u3057\u305f\u8981\u7d20\u3092\u300c\u3082\u3063\u3068\u898b\u308b\u300d\u30dc\u30bf\u30f3\u3067\u8ffd\u52a0\u3059\u308b\u65b9\u6cd5\nEC\u30aa\u30fc\u30ca\u30fc\u5fc5\u898b\uff01WP-API\u3067WordPress\u306e\u30c7\u30fc\u30bf\u3092\u5916\u90e8\u30b5\u30a4\u30c8\u306b\u8868\u793a\u3059\u308b\u65b9\u6cd5\n\nWP\u6848\u4ef6\u3067\u521d\u3081\u3066REST API\u3092\u4f7f\u3063\u3066\u307f\u305f\u306e\u3067\u3001\u8a18\u4e8b\u306emore\u30dc\u30bf\u30f3\u3092\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\nmore\u30dc\u30bf\u30f3\u306e\u30bd\u30fc\u30b9\u306f\u3001[\u3053\u3061\u3089\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003](http://black-flag.net/jquery/20131119-4881.html)\u306b\u7d44\u307f\u5408\u308f\u305b\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30bd\u30fc\u30b9\u306f\u6574\u7406\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u3002\uff08\u5b9f\u88c5\u3059\u308b\u3053\u3068\u306b\u96c6\u4e2d\u3057\u3066\u3044\u305f\u305f\u3081\u3002\u3002\u3002\u3042\u3068\u3067\u6574\u7406\u3059\u308b\u4e88\u5b9a\uff09\n\u305f\u3076\u3093\u3001\u307e\u305f\u3053\u3046\u3044\u3063\u305f\u306e\u3092\u4f7f\u3063\u3066\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u3042\u308b\u3068\u601d\u3046\u306e\u3067\u30e1\u30e2\u3068\u3057\u3066\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\n# WP REST API\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3053\u3061\u3089\n\n* [http://wp-api.org/](http://wp-api.org/)\n\n## HTML \u30c8\u30c3\u30d7\u30da\u30fc\u30b8\n\n```HTML\n<div class=\"clearfix\" id=\"content\">\n</div>\n```\n\n## HTML \u30ab\u30c6\u30b4\u30ea\u7528\u30da\u30fc\u30b8\n\n```php\n<?php\n  $category = get_the_category();\n  $cat_id   = $category[0]->cat_ID;\n  $cat_name = $category[0]->cat_name;\n  $cat_slug = $category[0]->category_nicename;\n?>\n<div class=\"clearfix\" id=\"page_content\" data-name=\"<?php echo $cat_slug; ?>\">\n</div>\n```\n\n## JS\n\n```js\n$(function(){\n  function cutTextEvent(){\n    var $title = $('.p-blogListBox__title');\n    var cutFigure = '25';\n    var afterTxt = ' \u2026';\n    $title.each(function(){\n      var textLength = $(this).text().length;\n      var textTrim = $(this).text().substr(0,(cutFigure));\n      if(cutFigure < textLength) {\n        $(this).html(textTrim + afterTxt).css({visibility:'visible'});\n      } else if(cutFigure >= textLength) {\n        $(this).css({visibility:'visible'});\n      }\n    });\n  }\n  var setArea = $(\"#content\"),\n  setArea_page = $(\"#page_content\"),\n  loadNum = 4, // \u8aad\u307f\u8fbc\u3080\u500b\u6570\n  loadTxt = 'Now Loading...', // Loading\u4e2d\u306e\u8868\u793a\u30c6\u30ad\u30b9\u30c8\n  btnTxt = '\u3082\u3063\u3068\u898b\u308b', // \u30dc\u30bf\u30f3\u30c6\u30ad\u30b9\u30c8\n  fadeSpeed = 500; // \u30d5\u30a7\u30fc\u30c9\u30b9\u30d4\u30fc\u30c9\n\n  setArea.after('<div id=\"btnMore\" class=\"p-blog__btn clearfix\" style=\"overflow: hidden; clear: both\"><a herf=\"#\">' + btnTxt + '</a></div>');\n  var setMore = setArea.next('#btnMore');\n\n  setArea_page.after('<div id=\"btnMore\" class=\"p-blog__btn clearfix\" style=\"overflow: hidden; clear: both\"><a herf=\"#\">' + btnTxt + '</a></div>');\n  var setMore_top = setArea_page.next('#btnMore');\n\n  var page_name = $('#content').data('name');\n  var category_urls = '/wp-json/posts?filter[orderby]=&filter[category_name]=' + page_name;\n  var post_url =  '/wp-json/posts';\n\n  function ajax_list(urls,area){\n    $.ajax({\n      url: urls,\n      dataType: 'json',\n      success : function(data){\n        var dataLengh = data.length,\n        loadItemLength = area.find('.loadItem').length,\n        setAdj = (dataLengh)-(loadItemLength),\n        setBeg = (dataLengh)-(setAdj);\n        function blogList(number){\n          var title = data[number].title;\n          var link = data[number].link;\n          var category = '';\n          for (var j = data[number].terms.category.length - 1; j >= 0; j--) {\n            category += data[number].terms.category[j].name;\n          }\n          var pubDD = new Date(data[i].date);\n          yy = pubDD.getYear();if (yy < 2000) { yy += 1900; }\n          mm = pubDD.getMonth() + 1;dd = pubDD.getDate();\n          var pubDate = yy +'\u5e74'+ mm +'\u6708'+ dd +'\u65e5';\n          var html = '<div class=\"p-blogListBox loadItem\"><a href=\"' + link + '\">'+ '<p class=\"p-blogListBox__category\">' + category +'</p>' + '<p class=\"is-read__txt c-fade\"><span>\u7d9a\u304d\u3092\u898b\u308b</span></p><h2 class=\"p-blogListBox__title\">' + title +'</h2><p class=\"p-blogListBox__date\">'+ pubDate + '</p></a></div>';\n          $(html).appendTo(area).css({opacity:'0'}).animate({opacity:'1'},fadeSpeed);\n          cutTextEvent();\n        }\n        if(!(dataLengh == loadItemLength)){\n          area.append('<div id=\"nowLoading\">' + loadTxt + '</div>');\n          if(loadItemLength == 0){\n            if(dataLengh <= loadNum){\n              for (var i=0; i<dataLengh; i++) {\n                blogList(i);\n              }\n              setMore.remove();\n              setMore_top.remove();\n            } else {\n              for (var i=0; i<loadNum; i++) {\n                blogList(i);\n              }\n            }\n          } else if(loadItemLength > 0 && loadItemLength < dataLengh){\n            if(loadNum < setAdj){\n              for (var i=0; i<loadNum; i++) {\n                v = i+setBeg;\n                blogList(v);\n              }\n            } else if(loadNum >= setAdj){\n              for (var i=0; i<setAdj; i++) {\n                v = i+setBeg;\n                blogList(v);\n              }\n              setMore.remove();\n              setMore_top.remove();\n            }\n          } else if(loadItemLength == dataLengh){\n            return false;\n          }\n        } else {\n          return false;\n        }\n      }, //success\n      complete : function(){\n        $('#nowLoading').each(function(){\n          $(this).remove();\n        });\n        return false;\n      } //complete\n    });\n    return false;\n  }\n\n  setMore.click(function(){\n    ajax_list(category_urls,setArea);\n  }).click();\n  setMore_top.click(function(){\n    ajax_list(post_url,setArea_page);\n  }).click();\n  cutTextEvent();\n});\n```\n\n# \u53c2\u8003\u30b5\u30a4\u30c8\n\n* [jQuery\u3067\u5916\u90e8HTML\uff08JSON\u5f62\u5f0f\uff09\u5316\u3057\u305f\u8981\u7d20\u3092\u300c\u3082\u3063\u3068\u898b\u308b\u300d\u30dc\u30bf\u30f3\u3067\u8ffd\u52a0\u3059\u308b\u65b9\u6cd5](http://black-flag.net/jquery/20131119-4881.html)\n* [EC\u30aa\u30fc\u30ca\u30fc\u5fc5\u898b\uff01WP-API\u3067WordPress\u306e\u30c7\u30fc\u30bf\u3092\u5916\u90e8\u30b5\u30a4\u30c8\u306b\u8868\u793a\u3059\u308b\u65b9\u6cd5](http://www.aiship.jp/knowhow/archives/22003)\n", "tags": ["WordPress", "REST-API", "jQuery"]}