{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\n\u540c\u3058\u753b\u50cf\u3092\u683c\u5b50\u72b6\u3067\u30ea\u30d4\u30fc\u30c8\u8868\u793a\u3055\u308c\u3001\u305d\u308c\u304c\u659c\u3081\u4e0a\u3068\u304b\u306b\u6c38\u9060\u306b\u52d5\u3044\u3066\u3044\u308b\u3002\n\u305d\u3093\u306a\u80cc\u666f\u3092\u4f5c\u3063\u3066\u307f\u308b\u3002\n\n\u74b0\u5883\n\ncocos2d-x v3.3\n\n\n\u683c\u5b50\u72b6\u306e\u52d5\u304f\u80cc\u666f\u3092\u4f5c\u308b\n\n\u753b\u50cf\u3092\u7528\u610f\u3059\u308b\n2\u306e\u968e\u4e57\u306e\u30b5\u30a4\u30ba\u3067\u7528\u610f\u3059\u308b\u3002\n\nGL_REPEAT\u3092\u4f7f\u3063\u3066\u3057\u304d\u3064\u3081\u308b\nauto director = Director::getInstance();\nconst auto vs = director->getVisibleSize();\nconst auto vo = director->getVisibleOrigin();\n\n// \u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\nTexture2D *texture = Director::getInstance()->getTextureCache()->addImage(\"bg.png\");\n\n// \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u751f\u6210\nconst Texture2D::TexParams tp = {GL_LINEAR, GL_LINEAR, GL_REPEAT, GL_REPEAT};\n\n// \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30b5\u30a4\u30ba\u8a2d\u5b9a\u7528\u306eRect\u3092\u751f\u6210\n// - \u753b\u9762\u30b5\u30a4\u30ba\u306b\u753b\u50cf\u30b5\u30a4\u30ba\u3092\u7e26\u6a2a\u306b1\u500b\u5206\u305a\u3064\u8ffd\u52a0\u3059\u308b\uff08\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u308b\u305f\u3081\uff09\nauto rect = Rect(0.0f, 0.0f, vs.width, vs.height);\nrect.size.width += texture->getContentSize().width;\nrect.size.height += texture->getContentSize().height;\n\n// Sprite\u3092\u751f\u6210\n// - \u753b\u9762\u306e\u4e0b\u3068\u53f3\u306b\u753b\u50cf1\u500b\u5206\u306f\u307f\u51fa\u3059\u3088\u3046\u306b\u914d\u7f6e\u3059\u308b\n_bg = Sprite::createWithTexture(texture, rect);\n_bg->setAnchorPoint(Vec2::ANCHOR_BOTTOM_LEFT);\n_bg->getTexture()->setTexParameters(tp);\n_bg->setPosition(Vec2(vo.x, vo.y - texture->getContentSize().height));\naddChild(_bg, 0);\n\n\nupdate\u3067\u52d5\u304b\u3059\nauto director = Director::getInstance();\nconst auto vs = director->getVisibleSize();\nconst auto vo = director->getVisibleOrigin();\n\n// \u4f4d\u7f6e\u3092\u5de6\u4e0a\u306b\u52d5\u304b\u3059\n// \u753b\u50cf1\u500b\u5206\u4ee5\u4e0a\u79fb\u52d5\u3057\u3066\u3044\u305f\u3089\u6700\u521d\u306e\u4f4d\u7f6e\u306b\u623b\u3059\n{\n    auto pos = _bg->getPosition();\n    pos += Vec2(-0.5f, 0.5f);\n\n    auto diff = pos - vo;\n\n    if (fabsf(diff.x) >= _bg->getTexture()->getContentSize().width) {\n        pos = Vec2(vo.x, vo.y - _bg->getTexture()->getContentSize().height);\n    }\n\n    _bg->setPosition(pos);\n}\n\n\n\u53c2\u8003\n\ncocos2d-x\u3067\u753b\u50cf\u3092\u30b7\u30fc\u30f3\u306e\u80cc\u666f\u306b\u30ea\u30d4\u30fc\u30c8\u8868\u793a\n\n\n\n## \u6982\u8981\n\n\u540c\u3058\u753b\u50cf\u3092\u683c\u5b50\u72b6\u3067\u30ea\u30d4\u30fc\u30c8\u8868\u793a\u3055\u308c\u3001\u305d\u308c\u304c\u659c\u3081\u4e0a\u3068\u304b\u306b\u6c38\u9060\u306b\u52d5\u3044\u3066\u3044\u308b\u3002\n\u305d\u3093\u306a\u80cc\u666f\u3092\u4f5c\u3063\u3066\u307f\u308b\u3002\n\n\n## \u74b0\u5883\n\n- cocos2d-x v3.3\n\n\n## \u683c\u5b50\u72b6\u306e\u52d5\u304f\u80cc\u666f\u3092\u4f5c\u308b\n\n### \u753b\u50cf\u3092\u7528\u610f\u3059\u308b\n\n2\u306e\u968e\u4e57\u306e\u30b5\u30a4\u30ba\u3067\u7528\u610f\u3059\u308b\u3002\n\n### GL_REPEAT\u3092\u4f7f\u3063\u3066\u3057\u304d\u3064\u3081\u308b\n\n```cpp\nauto director = Director::getInstance();\nconst auto vs = director->getVisibleSize();\nconst auto vo = director->getVisibleOrigin();\n\n// \u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\nTexture2D *texture = Director::getInstance()->getTextureCache()->addImage(\"bg.png\");\n\n// \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u751f\u6210\nconst Texture2D::TexParams tp = {GL_LINEAR, GL_LINEAR, GL_REPEAT, GL_REPEAT};\n\n// \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30b5\u30a4\u30ba\u8a2d\u5b9a\u7528\u306eRect\u3092\u751f\u6210\n// - \u753b\u9762\u30b5\u30a4\u30ba\u306b\u753b\u50cf\u30b5\u30a4\u30ba\u3092\u7e26\u6a2a\u306b1\u500b\u5206\u305a\u3064\u8ffd\u52a0\u3059\u308b\uff08\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u308b\u305f\u3081\uff09\nauto rect = Rect(0.0f, 0.0f, vs.width, vs.height);\nrect.size.width += texture->getContentSize().width;\nrect.size.height += texture->getContentSize().height;\n\n// Sprite\u3092\u751f\u6210\n// - \u753b\u9762\u306e\u4e0b\u3068\u53f3\u306b\u753b\u50cf1\u500b\u5206\u306f\u307f\u51fa\u3059\u3088\u3046\u306b\u914d\u7f6e\u3059\u308b\n_bg = Sprite::createWithTexture(texture, rect);\n_bg->setAnchorPoint(Vec2::ANCHOR_BOTTOM_LEFT);\n_bg->getTexture()->setTexParameters(tp);\n_bg->setPosition(Vec2(vo.x, vo.y - texture->getContentSize().height));\naddChild(_bg, 0);\n```\n\n### update\u3067\u52d5\u304b\u3059\n\n```cpp\nauto director = Director::getInstance();\nconst auto vs = director->getVisibleSize();\nconst auto vo = director->getVisibleOrigin();\n\n// \u4f4d\u7f6e\u3092\u5de6\u4e0a\u306b\u52d5\u304b\u3059\n// \u753b\u50cf1\u500b\u5206\u4ee5\u4e0a\u79fb\u52d5\u3057\u3066\u3044\u305f\u3089\u6700\u521d\u306e\u4f4d\u7f6e\u306b\u623b\u3059\n{\n    auto pos = _bg->getPosition();\n    pos += Vec2(-0.5f, 0.5f);\n    \n    auto diff = pos - vo;\n\n    if (fabsf(diff.x) >= _bg->getTexture()->getContentSize().width) {\n        pos = Vec2(vo.x, vo.y - _bg->getTexture()->getContentSize().height);\n    }\n    \n    _bg->setPosition(pos);\n}\n```\n\n\n## \u53c2\u8003\n\n- [cocos2d-x\u3067\u753b\u50cf\u3092\u30b7\u30fc\u30f3\u306e\u80cc\u666f\u306b\u30ea\u30d4\u30fc\u30c8\u8868\u793a](http://qiita.com/_rdtr/items/f3e4cd50bc78d21efc05)\n", "tags": ["cocos2d-x"]}