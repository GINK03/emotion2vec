{"tags": ["R3.1.0", "Selenium", "\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u6982\u8981\nWeb\u306eUI\u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u300cSelenium\u300d\u306f\u3001\nInternetExplorer\u3084Firefox\u3001GoogleChrome\u306a\u3069\u306e\u30d6\u30e9\u30a6\u30b6\u3092\u81ea\u52d5\u64cd\u4f5c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\u3044\u308f\u3070\u30d6\u30e9\u30a6\u30b6\u30de\u30af\u30ed\u30c4\u30fc\u30eb\u3060\u3002\n\u307e\u305f\u3001\u3053\u306e\u30c4\u30fc\u30eb\u306fHTML\u30bd\u30fc\u30b9\u306e\u53d6\u5f97\u3084\u30a8\u30ec\u30e1\u30f3\u30c8\u304b\u3089\u306e\u5024\u53d6\u5f97\u3082\u3067\u304d\u308b\u305f\u3081\u3001\n\u30ed\u30b0\u30a4\u30f3\u51e6\u7406\u3084Javascript\u5236\u5fa1\u304c\u3042\u308b\u30b5\u30a4\u30c8\u3067\u306e\u30af\u30ed\u30fc\u30ea\u30f3\u30b0\u306b\u3082\u8ee2\u7528\u3067\u304d\u308b\u3002\n\u6b63\u76f4\u3001\u524d\u56de\u306e\u30cb\u30b3\u30cb\u30b3\u9759\u753b\u7528\u30b3\u30fc\u30c9\u306e\u65b9\u304c\u65ad\u7136\u5f79\u306b\u7acb\u3064\u3068\u601d\u3046\u304c\u3001\n\u8af8\u4e8b\u60c5\u306b\u3088\u308aR\u3092\u901a\u3057\u3066\u5b9f\u884c\u3059\u308b\u30b3\u30fc\u30c9\u3092\u4f5c\u3063\u305f\u306e\u3067\u516c\u958b\u3059\u308b\u3002\n\n\u6a5f\u80fd\n\u5c0f\u8aac\u6295\u7a3f\u30b5\u30a4\u30c8\u300c\u5c0f\u8aac\u5bb6\u306b\u306a\u308d\u3046\u300d\u3067\u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22\u3059\u308b\u3002\n\u30d2\u30c3\u30c8\u3057\u305f\u4f5c\u54c1\u306e\u4e00\u89a7\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u51fa\u529b\u3059\u308b\u3002\n\u3000\u203bFirefox\u304c\u81ea\u52d5\u3067\u958b\u304d\u3001\u64cd\u4f5c\u3055\u308c\u308b\u3002\u51e6\u7406\u5f8c\u3001Firefox\u306f\u9589\u3058\u3089\u308c\u308b\u3002\n\n\u4e8b\u524d\u6e96\u5099\n\u4e0b\u8a18\u30bd\u30d5\u30c8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\u30fbJava\n\u30fbFirefox\nrJava\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(\u4e0b\u8a18\u30b3\u30fc\u30c9\u5185)\u306b\u5931\u6557\u3057\u305f\u305f\u3081\u3001\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u7aef\u672b(\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8)\u3067\u5b9f\u884c\u3057\u305f\u3002\nsudo update-java-alternatives -s java-7-oracle\nsudo R CMD javareconf\n\n\n\u30b3\u30fc\u30c9\n\nGetSyosetuList.R\n#GetSyosetuList.R\n#Copyright (c) 2014 nezuq\n#This software is released under the MIT License.\n#http://opensource.org/licenses/mit-license.php\n\n#\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ninstall.packages(\"rJava\")\ninstall.packages(\"devtools\")\nlibrary(devtools)\ninstall_github('seleniumJars', 'LluisRamon')\ninstall_github('relenium', 'LluisRamon')\n\n#\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u4f7f\u7528\u5ba3\u8a00\nlibrary(relenium)\n\n#\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\nkeywords = \"\u30ac\u30fc\u30eb\u30ba\u30e9\u30d6 \u30b7\u30ea\u30a2\u30b9 -\u30ac\u30fc\u30eb\u30ba\u30e9\u30d6\uff1f -\u30b7\u30ea\u30a2\u30b9\uff1f -\u30dc\u30fc\u30a4\u30ba\u30e9\u30d6 -R15 -\u30d5\u30a1\u30f3\u30bf\u30b8\u30fc\"\n\n#Firefox\u3092\u8d77\u52d5\nfirefox <- firefoxClass$new()\n\n#\u691c\u7d22\u7d50\u679c\u753b\u9762\u3092\u8868\u793a\nfirefox$get(paste(\"http://yomou.syosetu.com/search.php?&order=new&genre=&type=&word=\", keywords, sep=\"\"))\n\n#\u691c\u7d22\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\nnovellist.df <- data.frame()\ngetTextAndHref <- function(x){c(x$getText(), x$getAttribute(\"href\"))}\ngetSysTime <- function(){format(Sys.time(), \"%Y\u5e74%m\u6708%d\u65e5 %H\u6642%M\u5206%S\u79d2\")}\nwhile(T){\n  Sys.sleep(3)\n\n  #\u691c\u7d22\u4f5c\u54c1\u306e\u60c5\u5831\u3092\u53d6\u5f97\n  cat(paste(\"\u984c\u540d\u53d6\u5f97\u4e2d...\\n\", getSysTime(), \"\\n\"))\n  titles <- firefox$findElementsByCssSelector(\".searchkekka_box > .novel_h > a\")\n  titles.df <- sapply(titles, getTextAndHref)\n  cat(paste(\"\u7b46\u8005\u60c5\u5831\u53d6\u5f97\u4e2d...\\n\", getSysTime(), \"\\n\"))\n  writers <- firefox$findElementsByCssSelector(\".searchkekka_box > a:nth-of-type(1)\")\n  writers.df <- sapply(writers, getTextAndHref)\n  cat(paste(\"\u5c0f\u8aac\u60c5\u5831\u53d6\u5f97\u4e2d...\\n\", getSysTime(), \"\\n\"))\n  novel.info <- firefox$findElementsByCssSelector(\".searchkekka_box > a:nth-of-type(2)\")\n  novel.info.df <- sapply(novel.info, getTextAndHref)\n  cat(paste(\"\u5c0f\u8aac\u30b9\u30c6\u30fc\u30bf\u30b9\u53d6\u5f97\u4e2d...\\n\", getSysTime(), \"\\n\"))\n  novel.status <- firefox$findElementsByCssSelector(\".searchkekka_box > table > tbody > tr > td:nth-of-type(1)\")\n  novel.status.df <- sapply(novel.status, function(x){\n    x.c <- c(strsplit(x$getText(), \"\\n\")[[1]], 0)\n    x.c[2] <- gsub(\"[^0-9]+\", \"\", x.c[2])\n    x.c[1:2]\n  })\n  cat(paste(\"\u3042\u3089\u3059\u3058\u53d6\u5f97\u4e2d...\\n\", getSysTime(), \"\\n\"))\n  novel.ex <- firefox$findElementsByClassName(\"ex\")\n  cat(paste(\"\u5c0f\u8aac\u95a2\u9023\u60c5\u5831\u53d6\u5f97\u4e2d...\\n\", getSysTime(), \"\\n\"))\n  novel.opt <- firefox$findElementsByCssSelector(\".searchkekka_box > table > tbody > tr > td:nth-of-type(2)\")\n  novel.opt.df <- sapply(novel.opt, function(x){\n    x.c <- gsub(\"^[ ]+|[\\n\u3000]|[ ]+$\",\"\",strsplit(x$getText(), \"[^[:space:]]+[\uff1a]{1}\")[[1]])\n    n <- length(x.c)\n    x.c <- x.c[(n-10):n]\n    x.c[4] <- gsub(\" \", \"\", x.c[4])\n    x.c[5] <- gsub(\"\u7d04[[:digit:]]{1,4}\u5206\uff08|,|\u6587\u5b57\uff09\", \"\", x.c[5])\n    x.c[7] <- gsub(\"\u4ef6\", \"\", x.c[7])\n    x.c[8] <- gsub(\" pt\", \"\", x.c[8])\n    x.c[9] <- gsub(\" \u4eba\", \"\", x.c[9])\n    x.c[10] <- gsub(\" pt\", \"\", x.c[10])\n    x.c[11] <- gsub(\"\u4ef6\", \"\", x.c[11])\n    x.c\n  })\n\n  #\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306b\u683c\u7d0d\n  novellist.df <- rbind(novellist.df, data.frame(\n    novel.id=sapply(strsplit(titles.df[2,],\"/\"), function(x){x[4]}), \n    novel.name=titles.df[1,],\n    novel.status=novel.status.df[1,],\n    novel.npara=novel.status.df[2,],\n    novel.genre=novel.opt.df[2,],\n    novel.ex=sapply(novel.ex, function(x){x$getText()}),\n    novel.info.url=novel.info.df[2,], \n    novel.url=titles.df[2,], \n    novel.keywords=novel.opt.df[3,], \n    writer.id=sapply(strsplit(writers.df[2,],\"/\"), function(x){x[4]}), \n    writer.name=writers.df[1,], \n    writer.url=writers.df[2,], \n    novel.updated=novel.opt.df[4,], \n    novel.nchar=novel.opt.df[5,], \n    novel.nuser=novel.opt.df[6,], \n    novel.nreview=novel.opt.df[7,], \n    novel.nval=novel.opt.df[8,], \n    novel.nfav=novel.opt.df[9,], \n    created=sapply(1:length(titles), function(x){getSysTime()})\n  ))\n\n  cat(paste(\"\u6b21\u30da\u30fc\u30b8\u30ea\u30f3\u30af\u53d6\u5f97\u4e2d...\\n\", getSysTime(), \"\\n\"))\n  nextlink <- firefox$findElementByClassName(\"nextlink\")\n  if (is.null(nextlink)) break\n\n  nextlink$click()\n}\n\n#\u30d5\u30a1\u30a4\u30eb\u3078\u51fa\u529b\nwrite.table(novellist.df, \"./INPUT.txt\")\n\n#Firefox\u3092\u505c\u6b62\nfirefox$close()\n\n\n\n\u51fa\u529b\u30a4\u30e1\u30fc\u30b8\n\"novel.id\" \"novel.name\" \"novel.status\" \"novel.npara\" \"novel.genre\" \"novel.ex\" \"novel.info.url\" \"novel.url\" \"novel.keywords\" \"writer.id\" \"writer.name\" \"writer.url\" \"novel.updated\" \"novel.nchar\" \"novel.nuser\" \"novel.nreview\" \"novel.nval\" \"novel.nfav\" \"created\"\n\"1\" \"n0000bt\" \"\u5c0f\u8aac\u30bf\u30a4\u30c8\u30eb1\" \"\u9023\u8f09\u4e2d\" \"99\" \"\u30b8\u30e3\u30f3\u30eb\u540d\" \"\u3042\u3089\u3059\u3058\" \"http://ncode.syosetu.com/novelview/infotop/ncode/n0000bt/\" \"http://ncode.syosetu.com/n0000bt/\" \"\u30bf\u30b01 \u30bf\u30b02 \u30bf\u30b03\" \"000000\" \"\u4f5c\u8005\u540d\" \"http://mypage.syosetu.com/000000/\" \"2014\u5e7405\u670801\u65e512\u664200\u5206\" \"000000\" \"1,000\u4eba\" \"0\" \"999\" \"99\" \"2014\u5e7405\u670825\u65e5 00\u664200\u520600\u79d2\"\n\"2\" \"n0001bt\" \"\u5c0f\u8aac\u30bf\u30a4\u30c8\u30eb2\" \"\u9023\u8f09\u4e2d\" \"99\" \"\u30b8\u30e3\u30f3\u30eb\u540d\" \"\u3042\u3089\u3059\u3058\" \"http://ncode.syosetu.com/novelview/infotop/ncode/n0001bt/\" \"http://ncode.syosetu.com/n0001bt/\" \"\u30bf\u30b01 \u30bf\u30b02 \u30bf\u30b03\" \"000001\" \"\u4f5c\u8005\u540d\" \"http://mypage.syosetu.com/000001/\" \"2014\u5e7405\u670801\u65e512\u664201\u5206\" \"000001\" \"1,000\u4eba\" \"0\" \"999\" \"99\" \"2014\u5e7405\u670825\u65e5 00\u664200\u520600\u79d2\"\n\n\u6b20\u70b9\nCSS\u30bb\u30ec\u30af\u30bf\u7d4c\u7531\u3067\u306e\u30a8\u30ec\u30e1\u30f3\u30c8\u53d6\u5f97\u306b\u534a\u7aef\u306a\u3044\u6642\u9593\u304c\u304b\u304b\u308b\u3002\nR\u81ea\u4f53\u304c\u91cd\u3044\u4e8b\u306f\u5f53\u7136\u3060\u304c\u3001\nJava\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3073\u306b\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7acb\u3061\u4e0a\u3052\u76f4\u3057\u3066\u3044\u308b\u53ef\u80fd\u6027\u3082\u3042\u308b\u3002\n//\u7aef\u672b\u3067\u306e\u30ed\u30b0\u8868\u793a\n\u984c\u540d\u53d6\u5f97\u4e2d...\n 2014\u5e7405\u670825\u65e5 09\u664238\u520653\u79d2 \n\u7b46\u8005\u60c5\u5831\u53d6\u5f97\u4e2d...\n 2014\u5e7405\u670825\u65e5 09\u664239\u520638\u79d2 \n\u5c0f\u8aac\u60c5\u5831\u53d6\u5f97\u4e2d...\n 2014\u5e7405\u670825\u65e5 09\u664240\u520612\u79d2 \n\u5c0f\u8aac\u30b9\u30c6\u30fc\u30bf\u30b9\u53d6\u5f97\u4e2d...\n 2014\u5e7405\u670825\u65e5 09\u664240\u520641\u79d2 \n\u3042\u3089\u3059\u3058\u53d6\u5f97\u4e2d...\n 2014\u5e7405\u670825\u65e5 09\u664241\u520605\u79d2 \n\u5c0f\u8aac\u95a2\u9023\u60c5\u5831\u53d6\u5f97\u4e2d...\n 2014\u5e7405\u670825\u65e5 09\u664241\u520631\u79d2 \n\u6b21\u30da\u30fc\u30b8\u30ea\u30f3\u30af\u53d6\u5f97\u4e2d...\n 2014\u5e7405\u670825\u65e5 09\u664242\u520603\u79d2 \n\n\u611f\u60f3\nRelenium\u306fSelenium for Java\u306eR\u30e9\u30c3\u30d1\u30fc\u3067\u305d\u308c\u4ee5\u4e0a\u3067\u3082\u305d\u308c\u4ee5\u4e0b\u3067\u3082\u306a\u3044\u3002\n\u524d\u51e6\u7406\u306fPython/Ruby\u3067\u884c\u3063\u305f\u65b9\u304c\u5e78\u798f\u306b\u306a\u308c\u308b\u3002\n\u4e21\u8a00\u8a9e\u306eAPI\u306f\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u304c\u3042\u308b\u306e\u3067\u3001Selenium\u3078\u30e9\u30c3\u30d1\u30fc\u3092\u4ecb\u3055\u305a\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\n\n\u53c2\u8003\u30b5\u30a4\u30c8\n-> Relenium\n-> LluisRamon/relenium \u00b7 GitHub\n#\u6982\u8981\nWeb\u306eUI\u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u300c[Selenium](http://docs.seleniumhq.org/)\u300d\u306f\u3001\nInternetExplorer\u3084Firefox\u3001GoogleChrome\u306a\u3069\u306e\u30d6\u30e9\u30a6\u30b6\u3092\u81ea\u52d5\u64cd\u4f5c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\u3044\u308f\u3070\u30d6\u30e9\u30a6\u30b6\u30de\u30af\u30ed\u30c4\u30fc\u30eb\u3060\u3002\n\n\u307e\u305f\u3001\u3053\u306e\u30c4\u30fc\u30eb\u306fHTML\u30bd\u30fc\u30b9\u306e\u53d6\u5f97\u3084\u30a8\u30ec\u30e1\u30f3\u30c8\u304b\u3089\u306e\u5024\u53d6\u5f97\u3082\u3067\u304d\u308b\u305f\u3081\u3001\n\u30ed\u30b0\u30a4\u30f3\u51e6\u7406\u3084Javascript\u5236\u5fa1\u304c\u3042\u308b\u30b5\u30a4\u30c8\u3067\u306e\u30af\u30ed\u30fc\u30ea\u30f3\u30b0\u306b\u3082\u8ee2\u7528\u3067\u304d\u308b\u3002\n\n\u6b63\u76f4\u3001[\u524d\u56de\u306e\u30cb\u30b3\u30cb\u30b3\u9759\u753b\u7528\u30b3\u30fc\u30c9](http://qiita.com/nezuq/items/9681364cd505aa7f178b)\u306e\u65b9\u304c\u65ad\u7136\u5f79\u306b\u7acb\u3064\u3068\u601d\u3046\u304c\u3001\n\u8af8\u4e8b\u60c5\u306b\u3088\u308aR\u3092\u901a\u3057\u3066\u5b9f\u884c\u3059\u308b\u30b3\u30fc\u30c9\u3092\u4f5c\u3063\u305f\u306e\u3067\u516c\u958b\u3059\u308b\u3002\n\n#\u6a5f\u80fd\n\u5c0f\u8aac\u6295\u7a3f\u30b5\u30a4\u30c8\u300c[\u5c0f\u8aac\u5bb6\u306b\u306a\u308d\u3046](http://syosetu.com/)\u300d\u3067\u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22\u3059\u308b\u3002\n\u30d2\u30c3\u30c8\u3057\u305f\u4f5c\u54c1\u306e\u4e00\u89a7\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u51fa\u529b\u3059\u308b\u3002\n\u3000\u203bFirefox\u304c\u81ea\u52d5\u3067\u958b\u304d\u3001\u64cd\u4f5c\u3055\u308c\u308b\u3002\u51e6\u7406\u5f8c\u3001Firefox\u306f\u9589\u3058\u3089\u308c\u308b\u3002\n\n#\u4e8b\u524d\u6e96\u5099\n\u4e0b\u8a18\u30bd\u30d5\u30c8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\u30fb[Java](http://java.com/ja/download/)\n\u30fb[Firefox](http://www.mozilla.org/ja/firefox/new/)\n\nrJava\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(\u4e0b\u8a18\u30b3\u30fc\u30c9\u5185)\u306b\u5931\u6557\u3057\u305f\u305f\u3081\u3001\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u7aef\u672b(\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8)\u3067\u5b9f\u884c\u3057\u305f\u3002\n\n```\nsudo update-java-alternatives -s java-7-oracle\nsudo R CMD javareconf\n```\n\n#\u30b3\u30fc\u30c9\n```r:GetSyosetuList.R\n#GetSyosetuList.R\n#Copyright (c) 2014 nezuq\n#This software is released under the MIT License.\n#http://opensource.org/licenses/mit-license.php\n\n#\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ninstall.packages(\"rJava\")\ninstall.packages(\"devtools\")\nlibrary(devtools)\ninstall_github('seleniumJars', 'LluisRamon')\ninstall_github('relenium', 'LluisRamon')\n\n#\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u4f7f\u7528\u5ba3\u8a00\nlibrary(relenium)\n\n#\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\nkeywords = \"\u30ac\u30fc\u30eb\u30ba\u30e9\u30d6 \u30b7\u30ea\u30a2\u30b9 -\u30ac\u30fc\u30eb\u30ba\u30e9\u30d6\uff1f -\u30b7\u30ea\u30a2\u30b9\uff1f -\u30dc\u30fc\u30a4\u30ba\u30e9\u30d6 -R15 -\u30d5\u30a1\u30f3\u30bf\u30b8\u30fc\"\n\n#Firefox\u3092\u8d77\u52d5\nfirefox <- firefoxClass$new()\n\n#\u691c\u7d22\u7d50\u679c\u753b\u9762\u3092\u8868\u793a\nfirefox$get(paste(\"http://yomou.syosetu.com/search.php?&order=new&genre=&type=&word=\", keywords, sep=\"\"))\n\n#\u691c\u7d22\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\nnovellist.df <- data.frame()\ngetTextAndHref <- function(x){c(x$getText(), x$getAttribute(\"href\"))}\ngetSysTime <- function(){format(Sys.time(), \"%Y\u5e74%m\u6708%d\u65e5 %H\u6642%M\u5206%S\u79d2\")}\nwhile(T){\n  Sys.sleep(3)\n  \n  #\u691c\u7d22\u4f5c\u54c1\u306e\u60c5\u5831\u3092\u53d6\u5f97\n  cat(paste(\"\u984c\u540d\u53d6\u5f97\u4e2d...\\n\", getSysTime(), \"\\n\"))\n  titles <- firefox$findElementsByCssSelector(\".searchkekka_box > .novel_h > a\")\n  titles.df <- sapply(titles, getTextAndHref)\n  cat(paste(\"\u7b46\u8005\u60c5\u5831\u53d6\u5f97\u4e2d...\\n\", getSysTime(), \"\\n\"))\n  writers <- firefox$findElementsByCssSelector(\".searchkekka_box > a:nth-of-type(1)\")\n  writers.df <- sapply(writers, getTextAndHref)\n  cat(paste(\"\u5c0f\u8aac\u60c5\u5831\u53d6\u5f97\u4e2d...\\n\", getSysTime(), \"\\n\"))\n  novel.info <- firefox$findElementsByCssSelector(\".searchkekka_box > a:nth-of-type(2)\")\n  novel.info.df <- sapply(novel.info, getTextAndHref)\n  cat(paste(\"\u5c0f\u8aac\u30b9\u30c6\u30fc\u30bf\u30b9\u53d6\u5f97\u4e2d...\\n\", getSysTime(), \"\\n\"))\n  novel.status <- firefox$findElementsByCssSelector(\".searchkekka_box > table > tbody > tr > td:nth-of-type(1)\")\n  novel.status.df <- sapply(novel.status, function(x){\n    x.c <- c(strsplit(x$getText(), \"\\n\")[[1]], 0)\n    x.c[2] <- gsub(\"[^0-9]+\", \"\", x.c[2])\n    x.c[1:2]\n  })\n  cat(paste(\"\u3042\u3089\u3059\u3058\u53d6\u5f97\u4e2d...\\n\", getSysTime(), \"\\n\"))\n  novel.ex <- firefox$findElementsByClassName(\"ex\")\n  cat(paste(\"\u5c0f\u8aac\u95a2\u9023\u60c5\u5831\u53d6\u5f97\u4e2d...\\n\", getSysTime(), \"\\n\"))\n  novel.opt <- firefox$findElementsByCssSelector(\".searchkekka_box > table > tbody > tr > td:nth-of-type(2)\")\n  novel.opt.df <- sapply(novel.opt, function(x){\n    x.c <- gsub(\"^[ ]+|[\\n\u3000]|[ ]+$\",\"\",strsplit(x$getText(), \"[^[:space:]]+[\uff1a]{1}\")[[1]])\n    n <- length(x.c)\n    x.c <- x.c[(n-10):n]\n    x.c[4] <- gsub(\" \", \"\", x.c[4])\n    x.c[5] <- gsub(\"\u7d04[[:digit:]]{1,4}\u5206\uff08|,|\u6587\u5b57\uff09\", \"\", x.c[5])\n    x.c[7] <- gsub(\"\u4ef6\", \"\", x.c[7])\n    x.c[8] <- gsub(\" pt\", \"\", x.c[8])\n    x.c[9] <- gsub(\" \u4eba\", \"\", x.c[9])\n    x.c[10] <- gsub(\" pt\", \"\", x.c[10])\n    x.c[11] <- gsub(\"\u4ef6\", \"\", x.c[11])\n    x.c\n  })\n  \n  #\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306b\u683c\u7d0d\n  novellist.df <- rbind(novellist.df, data.frame(\n    novel.id=sapply(strsplit(titles.df[2,],\"/\"), function(x){x[4]}), \n    novel.name=titles.df[1,],\n    novel.status=novel.status.df[1,],\n    novel.npara=novel.status.df[2,],\n    novel.genre=novel.opt.df[2,],\n    novel.ex=sapply(novel.ex, function(x){x$getText()}),\n    novel.info.url=novel.info.df[2,], \n    novel.url=titles.df[2,], \n    novel.keywords=novel.opt.df[3,], \n    writer.id=sapply(strsplit(writers.df[2,],\"/\"), function(x){x[4]}), \n    writer.name=writers.df[1,], \n    writer.url=writers.df[2,], \n    novel.updated=novel.opt.df[4,], \n    novel.nchar=novel.opt.df[5,], \n    novel.nuser=novel.opt.df[6,], \n    novel.nreview=novel.opt.df[7,], \n    novel.nval=novel.opt.df[8,], \n    novel.nfav=novel.opt.df[9,], \n    created=sapply(1:length(titles), function(x){getSysTime()})\n  ))\n  \n  cat(paste(\"\u6b21\u30da\u30fc\u30b8\u30ea\u30f3\u30af\u53d6\u5f97\u4e2d...\\n\", getSysTime(), \"\\n\"))\n  nextlink <- firefox$findElementByClassName(\"nextlink\")\n  if (is.null(nextlink)) break\n  \n  nextlink$click()\n}\n\n#\u30d5\u30a1\u30a4\u30eb\u3078\u51fa\u529b\nwrite.table(novellist.df, \"./INPUT.txt\")\n\n#Firefox\u3092\u505c\u6b62\nfirefox$close()\n```\n#\u51fa\u529b\u30a4\u30e1\u30fc\u30b8\n\"novel.id\" \"novel.name\" \"novel.status\" \"novel.npara\" \"novel.genre\" \"novel.ex\" \"novel.info.url\" \"novel.url\" \"novel.keywords\" \"writer.id\" \"writer.name\" \"writer.url\" \"novel.updated\" \"novel.nchar\" \"novel.nuser\" \"novel.nreview\" \"novel.nval\" \"novel.nfav\" \"created\"\n\"1\" \"n0000bt\" \"\u5c0f\u8aac\u30bf\u30a4\u30c8\u30eb1\" \"\u9023\u8f09\u4e2d\" \"99\" \"\u30b8\u30e3\u30f3\u30eb\u540d\" \"\u3042\u3089\u3059\u3058\" \"http://ncode.syosetu.com/novelview/infotop/ncode/n0000bt/\" \"http://ncode.syosetu.com/n0000bt/\" \"\u30bf\u30b01 \u30bf\u30b02 \u30bf\u30b03\" \"000000\" \"\u4f5c\u8005\u540d\" \"http://mypage.syosetu.com/000000/\" \"2014\u5e7405\u670801\u65e512\u664200\u5206\" \"000000\" \"1,000\u4eba\" \"0\" \"999\" \"99\" \"2014\u5e7405\u670825\u65e5 00\u664200\u520600\u79d2\"\n\"2\" \"n0001bt\" \"\u5c0f\u8aac\u30bf\u30a4\u30c8\u30eb2\" \"\u9023\u8f09\u4e2d\" \"99\" \"\u30b8\u30e3\u30f3\u30eb\u540d\" \"\u3042\u3089\u3059\u3058\" \"http://ncode.syosetu.com/novelview/infotop/ncode/n0001bt/\" \"http://ncode.syosetu.com/n0001bt/\" \"\u30bf\u30b01 \u30bf\u30b02 \u30bf\u30b03\" \"000001\" \"\u4f5c\u8005\u540d\" \"http://mypage.syosetu.com/000001/\" \"2014\u5e7405\u670801\u65e512\u664201\u5206\" \"000001\" \"1,000\u4eba\" \"0\" \"999\" \"99\" \"2014\u5e7405\u670825\u65e5 00\u664200\u520600\u79d2\"\n\n#\u6b20\u70b9\nCSS\u30bb\u30ec\u30af\u30bf\u7d4c\u7531\u3067\u306e\u30a8\u30ec\u30e1\u30f3\u30c8\u53d6\u5f97\u306b\u534a\u7aef\u306a\u3044\u6642\u9593\u304c\u304b\u304b\u308b\u3002\nR\u81ea\u4f53\u304c\u91cd\u3044\u4e8b\u306f\u5f53\u7136\u3060\u304c\u3001\nJava\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3073\u306b\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7acb\u3061\u4e0a\u3052\u76f4\u3057\u3066\u3044\u308b\u53ef\u80fd\u6027\u3082\u3042\u308b\u3002\n\n//\u7aef\u672b\u3067\u306e\u30ed\u30b0\u8868\u793a\n\u984c\u540d\u53d6\u5f97\u4e2d...\n 2014\u5e7405\u670825\u65e5 09\u664238\u520653\u79d2 \n\u7b46\u8005\u60c5\u5831\u53d6\u5f97\u4e2d...\n 2014\u5e7405\u670825\u65e5 09\u664239\u520638\u79d2 \n\u5c0f\u8aac\u60c5\u5831\u53d6\u5f97\u4e2d...\n 2014\u5e7405\u670825\u65e5 09\u664240\u520612\u79d2 \n\u5c0f\u8aac\u30b9\u30c6\u30fc\u30bf\u30b9\u53d6\u5f97\u4e2d...\n 2014\u5e7405\u670825\u65e5 09\u664240\u520641\u79d2 \n\u3042\u3089\u3059\u3058\u53d6\u5f97\u4e2d...\n 2014\u5e7405\u670825\u65e5 09\u664241\u520605\u79d2 \n\u5c0f\u8aac\u95a2\u9023\u60c5\u5831\u53d6\u5f97\u4e2d...\n 2014\u5e7405\u670825\u65e5 09\u664241\u520631\u79d2 \n\u6b21\u30da\u30fc\u30b8\u30ea\u30f3\u30af\u53d6\u5f97\u4e2d...\n 2014\u5e7405\u670825\u65e5 09\u664242\u520603\u79d2 \n\n#\u611f\u60f3\nRelenium\u306fSelenium for Java\u306eR\u30e9\u30c3\u30d1\u30fc\u3067\u305d\u308c\u4ee5\u4e0a\u3067\u3082\u305d\u308c\u4ee5\u4e0b\u3067\u3082\u306a\u3044\u3002\n\u524d\u51e6\u7406\u306fPython/Ruby\u3067\u884c\u3063\u305f\u65b9\u304c\u5e78\u798f\u306b\u306a\u308c\u308b\u3002\n\u4e21\u8a00\u8a9e\u306eAPI\u306f\u516c\u5f0f\u30b5\u30dd\u30fc\u30c8\u304c\u3042\u308b\u306e\u3067\u3001Selenium\u3078\u30e9\u30c3\u30d1\u30fc\u3092\u4ecb\u3055\u305a\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\n\n#\u53c2\u8003\u30b5\u30a4\u30c8\n[-> Relenium](http://lluisramon.github.io/relenium/)\n[-> LluisRamon/relenium \u00b7 GitHub](https://github.com/LluisRamon/relenium)\n"}