{"context": "Pinterest\u98a8\u306eCollectionView\u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\nCHTCollectionViewWaterfallLayout \n\u3067\u3001\u30bb\u30eb\u306e\u6a2a\u5e45\u3092\u53d6\u308a\u305f\u304b\u3063\u305f\u306e\u3067\u30e1\u30e2\n\nUICollectionViewLayout \u3092\u62e1\u5f35\u3057\u3066\u5b9f\u88c5\nimport Foundation\nimport CHTCollectionViewWaterfallLayout\n\nextension UICollectionViewLayout {\n    func getCHTItemWidth() -> CGFloat{\n        guard let collectionViewRect = self.collectionView?.bounds else {\n            return 0\n        }\n        if self is CHTCollectionViewWaterfallLayout {\n            let me = self as! CHTCollectionViewWaterfallLayout\n            let columnWidth = collectionViewRect.width - (me.sectionInset.left + me.sectionInset.right)\n            return ( columnWidth - CGFloat(me.columnCount - 1) * me.minimumColumnSpacing ) / me.columnCount\n        } else {\n            return collectionViewRect.width\n        }\n    }\n}\n\n\n\u4f7f\u7528\u65b9\u6cd5\n\u6a2a\u5e45:\u30bb\u30eb\u306e\u6a2a\u5e45 \u7e26\u5e45:\u30bb\u30eb\u306e\u6a2a\u5e45+60 \u306e\u30bb\u30eb\u3092\u8fd4\u3057\u305f\u3044\u6642\nextension ViewController : CHTCollectionViewDelegateWaterfallLayout {\n    func collectionView(collectionView: UICollectionView!,\n                        layout collectionViewLayout: UICollectionViewLayout!,\n                               sizeForItemAtIndexPath indexPath: NSIndexPath!) -> CGSize {\n        let w = collectionViewLayout.getCHTItemWidth()\n        return CGSize(width: w, height: w + 60)\n    }\n}\n\n\u30bb\u30eb\u306e\u6a2a\u5e45\u306b\u5408\u308f\u305b\u305f\u67d4\u8edf\u306a\u30ec\u30a4\u30a2\u30a6\u30c8\u304c\u7d44\u3081\u3066\u697d\u3057\u3044\u3067\u3059\nPinterest\u98a8\u306eCollectionView\u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n[CHTCollectionViewWaterfallLayout](https://github.com/chiahsien/CHTCollectionViewWaterfallLayout) \n\u3067\u3001\u30bb\u30eb\u306e\u6a2a\u5e45\u3092\u53d6\u308a\u305f\u304b\u3063\u305f\u306e\u3067\u30e1\u30e2\n\n## UICollectionViewLayout \u3092\u62e1\u5f35\u3057\u3066\u5b9f\u88c5\n\n```swift\nimport Foundation\nimport CHTCollectionViewWaterfallLayout\n\nextension UICollectionViewLayout {\n    func getCHTItemWidth() -> CGFloat{\n        guard let collectionViewRect = self.collectionView?.bounds else {\n            return 0\n        }\n        if self is CHTCollectionViewWaterfallLayout {\n            let me = self as! CHTCollectionViewWaterfallLayout\n            let columnWidth = collectionViewRect.width - (me.sectionInset.left + me.sectionInset.right)\n            return ( columnWidth - CGFloat(me.columnCount - 1) * me.minimumColumnSpacing ) / me.columnCount\n        } else {\n            return collectionViewRect.width\n        }\n    }\n}\n```\n\n## \u4f7f\u7528\u65b9\u6cd5\n  \u6a2a\u5e45:\u30bb\u30eb\u306e\u6a2a\u5e45 \u7e26\u5e45:\u30bb\u30eb\u306e\u6a2a\u5e45+60 \u306e\u30bb\u30eb\u3092\u8fd4\u3057\u305f\u3044\u6642\n\n``` swift\nextension ViewController : CHTCollectionViewDelegateWaterfallLayout {\n    func collectionView(collectionView: UICollectionView!,\n                        layout collectionViewLayout: UICollectionViewLayout!,\n                               sizeForItemAtIndexPath indexPath: NSIndexPath!) -> CGSize {\n        let w = collectionViewLayout.getCHTItemWidth()\n        return CGSize(width: w, height: w + 60)\n    }\n}\n```\n\n\u30bb\u30eb\u306e\u6a2a\u5e45\u306b\u5408\u308f\u305b\u305f\u67d4\u8edf\u306a\u30ec\u30a4\u30a2\u30a6\u30c8\u304c\u7d44\u3081\u3066\u697d\u3057\u3044\u3067\u3059\n", "tags": ["iOS", "Swift", "UICollectionView"]}