{"context": "\n\n \u306f\u3058\u3081\u306b\n\u3053\u3093\u306b\u3061\u306f\u3001OthloTech\u306e@pokohide\u3067\u3059\u3002\n\u3053\u306e\u8a18\u4e8b\u306fOthloTech Advent Calendar 2016\u306e\u6700\u7d42\u65e5(25\u65e5)\u306e\u8a18\u4e8b\u3067\u3059\uff01\n\u4e16\u9593\u306f\u30af\u30ea\u30b9\u30de\u30b9\u30e0\u30fc\u30c9\u3067\u3001\u3053\u3093\u306a\u8a18\u4e8b\u3092\u8aad\u3093\u3067\u3044\u308b\u4eba\u3082\u3044\u306a\u3044\u3068\u306f\u601d\u3044\u307e\u3059\u304c...\u6700\u8fd1MacBookPro\u3092\u8cfc\u5165\u3057\u3066\u3001\u65b0\u3057\u3044\u306e\u3092\u8cb7\u3063\u305f\u3089\u74b0\u5883\u6c5a\u67d3\u3057\u306a\u3044\u305e\uff01\u3068\u601d\u3063\u3066\u3044\u305f\u306e\u3067\u3001\u3053\u308c\u3092\u6a5f\u306b\u52c9\u5f37\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u306a\u306e\u3067\u3001\u30b9\u30c6\u30c3\u30d7\u3054\u3068\u306b\u81ea\u5206\u306a\u308a\u306e\u89e3\u8aac\u30b3\u30e1\u30f3\u30c8\u7b49\u4ed8\u304d\u307e\u3059\u304c\u3001\u3054\u4e86\u627f\u304f\u3060\u3055\u3044\u3002\n\n \u4e8b\u524d\u77e5\u8b58\n\n docker\u3068\u306f\n\nDocker Inc.\u304c\u63d0\u4f9b\u3057\u3066\u3044\u308b\u4eee\u60f3\u5316\u306e\u305f\u3081\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u3059\u3002\n\n\u300eDocker\u5b9f\u6226\u6d3b\u7528\u30ac\u30a4\u30c9\u300fp.7 \u3088\u308a\nVagrant\u306a\u3069\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u3068\u306f\u9055\u3063\u3066\u3001docker\u306e\u30b3\u30f3\u30c6\u30ca\u306fOS\u30ec\u30d9\u30eb\u3067\u306e\u4eee\u60f3\u5316\u3092\u884c\u3063\u3066\u305d\u306eOS\u4e0a\u3067\u30d7\u30ed\u30bb\u30b9\u3092\u52d5\u304b\u3059\u306e\u3067\u3059\u304c\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u306f\u30de\u30b7\u30f3\u30ec\u30d9\u30eb\u3067\u4eee\u60f3\u5316\u3092\u884c\u3044\u307e\u3059\u3002\u306a\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\u3002\n\n\n\n\n\u30b3\u30f3\u30c6\u30ca(Docker)\n\u4eee\u60f3\u30de\u30b7\u30f3\n\n\n\n\n\u8d77\u52d5\n\u65e9\u3044\n\u9045\u3044\n\n\n\u30ea\u30bd\u30fc\u30b9\u6d88\u8cbb\n\u5c11\u306a\u3044\n\u591a\u3044\n\n\nOS\nLinux\u306e\u307f\n\u4f55\u3067\u3082\u53ef\n\n\n\nvagrant\u306f\u30de\u30b7\u30f3\u30ec\u30d9\u30eb\u3067\u69cb\u7bc9\u3059\u308b\u306e\u3067\u3001\u30d9\u30fc\u30b9\u3068\u306a\u308bOS\u306f\u7279\u306b\u9650\u5b9a\u3055\u308c\u307e\u305b\u3093\u304c\u3001docker\u306fLinux\u4e0a\u3067\u306e\u307f\u3057\u304b\u52d5\u304d\u307e\u305b\u3093\u3002\u3057\u304b\u3057\u3001docker\u306fLinux\u306e\u6a5f\u80fd\u3092\u501f\u308a\u3066\u4eee\u60f3\u74b0\u5883\u3092\u5b9f\u73fe\u3057\u3066\u3044\u308b\u306e\u3067\u5fc5\u8981\u306a\u30ea\u30bd\u30fc\u30b9\u306f\u5c11\u306a\u304f\u3066\u8d77\u52d5\u304c\u65e9\u3044\u306e\u304c\u7279\u5fb4\u3067\u3059\u3002\u9006\u306b\u4eee\u60f3\u30de\u30b7\u30f3\u306fOS\u5358\u4f4d\u3067\u4eee\u60f3\u5316\u3057\u3066\u3044\u308b\u306e\u3067\u30ea\u30bd\u30fc\u30b9\u6d88\u8cbb\u91cf\u304c\u9ad8\u304f\u8d77\u52d5\u306f\u9045\u3044\u3067\u3059\u3002\n\u4ee5\u524d\u306fVirtualBox\u304c\u5fc5\u8981\u3060\u3063\u305f\u308a\u74b0\u5883\u8a2d\u5b9a\u304c\u5fc5\u8981\u3060\u3063\u305f\u308a\u3001\u8272\u3005\u9762\u5012\u3060\u3063\u305f\u305d\u3046\u3067\u3059\u304c\u3001\u4eca\u306fDocker\u793e\u304c\u516c\u5f0f\u3067\u51fa\u3057\u3066\u3044\u308b  Docker for (Mac/Windows/Linux)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3059\u3050\u306b\u4f7f\u3048\u308b\u306e\u3067\u3001\u307e\u3060\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u3057\u3066\u3044\u306a\u3044\u4eba\u306f\u5165\u308c\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n \uff44ocker-compose\u3068\u306f?\ndocker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068docker\u30b3\u30de\u30f3\u30c9\u304c\u4f7f\u7528\u3067\u304d\u3066\u3001\u305d\u308c\u3092\u7528\u3044\u308b\u3053\u3068\u3067\u8272\u3005\u306a\u30b3\u30f3\u30c6\u30ca\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3067\u3059\u304c\u3001Rails\u30a2\u30d7\u30ea\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u306e\u306bPostgres\u3060\u3063\u305f\u308a\u3001Ruby\u3060\u3063\u305f\u308a\u3001Redis\u3060\u3063\u305f\u308a\u8907\u6570\u306e\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u306a\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u624b\u4f5c\u696d\u3067\u4f5c\u308b\u306e\u306f\u5927\u5909\u3002\u3068\u3044\u3046\u3053\u3068\u3067\u3001docker-compose\u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u7528\u3044\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\ndocker-compose\u3068\u306f\u8907\u6570\u306e\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u306a\u308bdocker\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9a\u7fa9\u30fb\u5b9f\u884c\u308b\u30c4\u30fc\u30eb\u3067\u3001compose\u7528\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u3066\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u8a18\u8ff0\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30ca\u3092\u4e00\u6c17\u306b\u8d77\u52d5\u3067\u304d\u307e\u3059 \ndocker-compose\u306f\u30ea\u30ea\u30fc\u30b9\u30da\u30fc\u30b8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u6700\u65b0\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092curl\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u65b9\u6cd5\u306f\u30ea\u30ea\u30fc\u30b9\u30da\u30fc\u30b8\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u30b3\u30d4\u30da\u3059\u308c\u3070\u5927\u4e08\u592b\u3060\u3068\u601d\u3044\u307e\u3059\u3002\nDocker compose release page\n\n Dockerfile / docker-compose.yml\n\ndocker\u30b3\u30de\u30f3\u30c9\u3067\u30a4\u30e1\u30fc\u30b8\u306e\u4f5c\u6210\u3084\u30b3\u30f3\u30c6\u30ca\u306e\u8d77\u52d5\u306a\u3069\u3092\u5b9f\u884c\u3057\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u5165\u529b\u3059\u308b\u306e\u306f\u75b2\u308c\u308b\u3057\u3001\u4f5c\u696d\u3092\u4e00\u62ec\u3057\u3066\u884c\u3044\u305f\u304f\u306a\u3063\u3066\u304f\u308b\u306e\u3067\u305d\u3093\u306a\u6642\u306b\u4f7f\u3046\u306e\u304cDockerfile\u3067\u3059\u3002makefile\u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3059\u304c\u3001\u500b\u4eba\u7684\u306b\u306f\u305d\u308c\u4ee5\u4e0a\u306b\u53d6\u3063\u4ed8\u304d\u3084\u3059\u3044\u304f\u3066\u6c17\u306b\u5165\u308a\u307e\u3057\u305f\u3002\n\u4f7f\u3048\u308b\u30b3\u30de\u30f3\u30c9\u308210\u7a2e\u985e\u7a0b\u5ea6\u3057\u304b\u306a\u3044\u306e\u3067\u3001\u3059\u3050\u306a\u308c\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nDockerfile\u306e\u30b3\u30de\u30f3\u30c9\ndocker-compose.yml\u306fdocker-compose\u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u4f7f\u3046\u305f\u3081\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u3001\u3053\u3053\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u69cb\u6210\u3059\u308b\u5404\u30b5\u30fc\u30d3\u30b9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n \u691c\u8a3c\u74b0\u5883\n\u691c\u8a3c\u306fmac\u4e0a\u3067docker\u306f1.12, docker-compose\u306f1.8.1\u3092\u4f7f\u7528\u3057\u3066docker\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3066\u3044\u307e\u3059\u30022016\u5e7412\u6708\u73fe\u6642\u70b9\u306e\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n$ docker version\nClient:\n Version:      1.12.3\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   6b644ec\n Built:        Wed Oct 26 23:26:11 2016\n OS/Arch:      darwin/amd64\n\nServer:\n Version:      1.12.3\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   6b644ec\n Built:        Wed Oct 26 23:26:11 2016\n OS/Arch:      linux/amd64\n\n$ docker-compose version\ndocker-compose version 1.8.1, build 878cff1\ndocker-py version: 1.10.3\nCPython version: 2.7.9\nOpenSSL version: OpenSSL 1.0.2h  3 May 2016\n\n\n Docker\u3092\u6d3b\u304b\u3059\u539f\u5247\n\n1) 1 Container 1 Service\n\uff11\u3064\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u306f1\u3064\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u52d5\u4f5c\u3055\u305b\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002\u305f\u3068\u3048\u3070\u3001\u4eca\u56de\u7528\u3044\u308bPostgres\u3068Redis\u3092\u540c\u3058\u30b3\u30f3\u30c6\u30ca\u3067\u52d5\u304b\u3059\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u304c\u3001\u30b3\u30f3\u30c6\u30ca\u304c\u8907\u96d1\u5316\u3057\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u6975\u529b\u30b7\u30f3\u30d7\u30eb\u306b\u4fdd\u3064\u305f\u3081\u610f\u8b58\u3057\u307e\u3057\u3087\u3046\u3002\n\n2) Dockerfile\u306b\u66f8\u304f\n\u30b3\u30f3\u30bd\u30fc\u30eb\u3067docker\u30b3\u30de\u30f3\u30c9\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u304c\u3001\u7d50\u5c40\u8ab0\u304b\u3068\u5171\u6709\u3059\u308b\u306b\u306f\u305d\u306e\u4f5c\u6210\u624b\u9806\u3092\u660e\u793a\u3057\u306a\u304f\u3066\u306f\u3044\u3051\u306a\u3044\u306e\u3067\u3001Dockerfile\u306b\u7d71\u4e00\u3057\u307e\u3057\u3087\u3046\u3002\n\n Rails\u30a2\u30d7\u30ea\u306e\u958b\u767a\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3066\u307f\u308b\n\u4eca\u56de\u306e\u8a2d\u5b9a\u3068\u3057\u3066\u3001\u958b\u767a\u4e2d\u306eRails\u30a2\u30d7\u30ea(Postgres+Redis)\u3092Docker\u306e\u4eee\u60f3\u74b0\u5883\u306b\u79fb\u884c\u3059\u308b\u3053\u3068\u3092\u8003\u3048\u307e\u3059\u3002\u3053\u3053\u3067\u500b\u4eba\u7684\u306a\u524d\u63d0\u3068\u3057\u3066\u3001\u958b\u767a\u74b0\u5883\u3067\u306fsqlite3\u3092\u4f7f\u3063\u3066\u3044\u305f\u306e\u3067\u305d\u3053\u3067\u306e\u5909\u66f4\u624b\u9806\u3082\u307e\u3068\u3081\u3066\u3042\u308a\u307e\u3059\u3002\n\nruby: 2.3.3\nRuby on Rails: 5.0.1.rc2\n\n\n  Rails\u7528\u306eDockerfile\u3092\u7528\u610f\u3059\u308b\nDockerfile\u306frails\u30a2\u30d7\u30ea\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u914d\u7f6e\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nDockerfile\nFROM ruby:2.3.3\n\nENV APP_ROOT /my_app\n\nRUN apt-get update -qq && apt-get install -y nodejs build-essential libpq-dev postgresql-client\n\nRUN mkdir $APP_ROOT\nWORKDIR $APP_ROOT\n\nADD Gemfile ${APP_ROOT}/Gemfile\nADD Gemfile.lock ${APP_ROOT}/Gemfile.lock\nRUN bundle install\n\nADD . $APP_ROOT\n\n\nDockerfile\u306e\u6700\u521d\u306fFROM IMAGE:TAG\u30b3\u30de\u30f3\u30c9\u3067\u3001\u4f7f\u7528\u3059\u308b\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3092\u9078\u629e\u3057\u306a\u304f\u3066\u306f\u3044\u3051\u307e\u305b\u3093\u3002\u4f7f\u7528\u3059\u308b\u30a4\u30e1\u30fc\u30b8\u306fCentOS\u3060\u3063\u305f\u308a\u3001\u308aRedis\u3060\u3063\u305f\u308a\u4ed6\u4eba\u306e\u4f5c\u6210\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u57fa\u672c\u7684\u306b\u306f\u3001\u516c\u5f0f\u306e\u30a4\u30e1\u30fc\u30b8\u30ea\u30b9\u30c8\u304b\u3089\u9078\u629e\u3059\u308c\u3070\u3044\u3044\u3067\u3057\u3087\u3046\u3002\nUbuntu\u3092\u5165\u308c\u3066\u3001apt-get\u30671\u304b\u3089ruby\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u3042\u3089\u304b\u3058\u3081ruby\u306e\u5165\u3063\u3066\u3044\u308b\u30a4\u30e1\u30fc\u30b8\u3092\u9078\u629e\u3057\u307e\u3057\u305f\u3002\nENV\u30b3\u30de\u30f3\u30c9\u306f\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3067APP_ROOT\u3068\u3044\u3046\u5909\u6570\u306b/my_app\u3068\u3044\u3046\u6587\u5b57\u5217\u3092\u683c\u7d0d\u3057\u3066\u3044\u307e\u3059\u3002\nRUN\u30b3\u30de\u30f3\u30c9\u306f\u3092\u4eca\u56de\u3060\u3068ruby\u306e\u5165\u3063\u305f\u30b3\u30f3\u30c6\u30ca\u5185\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u5b9f\u884c\u3059\u308b\u611f\u3058\u3067\u3001apt-get\u3067nodejs\u306a\u3069\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u307e\u3059\u3002\n\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u3001\u4f5c\u696d\u7528\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u3063\u3066\u305d\u3053\u3092WORKDIR\u30b3\u30de\u30f3\u30c9\u3067\u8d77\u70b9\u3068\u3057\u307e\u3059\u3002\u305d\u306e\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bADD\u30b3\u30de\u30f3\u30c9\u3067\u81ea\u5206\u306e\u30ed\u30fc\u30ab\u30eb\u306eGemfile\u3068Gemfile.lock\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3001\u30b3\u30f3\u30c6\u30ca\u5185\u3067bundle install\u3092\u5b9f\u884c\u3057\u305f\u5f8c\u3001\u4ed6\u306e\u30ed\u30fc\u30ab\u30eb\u306e\u30d5\u30a1\u30a4\u30eb\u3059\u3079\u3066\u3092\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u30b3\u30d4\u30fc\u3057\u3066\u3044\u307e\u3059\u3002\n\n \u30e1\u30e2\n\u4ed6\u306e\u30b5\u30a4\u30c8\u3067\u306fGemfile\u3092/tmp\u30d5\u30a9\u30eb\u30c0\u306b\u30b3\u30d4\u30fc\u3057\u3066bundle install\u3092\u3059\u308b\u3053\u3068\u3067\u9ad8\u901f\u5316\u3057\u3066\u3044\u308b\u4f8b\u304c\u3042\u308a\u307e\u3059\u304c\u3001Docker 1.1\u4ee5\u4e0a\u304b\u3089\u306fADD\u30b3\u30de\u30f3\u30c9\u306b\u30ad\u30e3\u30c3\u30b7\u30e5\u6a5f\u80fd\u304c\u5897\u3048\u305f\u306e\u3067\u3001\u5909\u66f4\u304c\u306a\u3051\u308c\u3070\u3001\u518d\u30d3\u30eb\u30c9\u3092\u3057\u3066\u3082\u9ad8\u901f\u3067\u884c\u3048\u307e\u3059\u3002\n\u540c\u69d8\u306e\u7406\u7531\u3067\u3001ADD . $APP_ROOT\u30b3\u30de\u30f3\u30c9\u3067\u3001\u30ed\u30fc\u30ab\u30eb\u306e\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5168\u3066\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u30b3\u30d4\u30fc\u3092\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u3053\u3053\u3067\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u7b49\u3082\u30b3\u30d4\u30fc\u3057\u3066\u3057\u307e\u3046\u3068\u3001\u5909\u66f4\u3092\u52a0\u3048\u3066\u3044\u306a\u3044\u306e\u306b\u518d\u30d3\u30eb\u30c9\u304c\u8d70\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u306e\u3067\u30b3\u30d4\u30fc\u5bfe\u8c61\u304b\u3089\u660e\u793a\u7684\u306b\u5916\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\u3053\u308c\u306f.dockerignore\u3067\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\n\n.dockerignore\n## Rails\npublic/assets/*\n.ruby-version\n.env\n\n## Environment normalisation:\n.bundle\nvendor/bundle\n.git*\n\n## log\nlog/*\ntmp/*\n\n## OSX\n.DS_Store\n\n## docker\n.dockerignore\n\n\n\n  docker-compose\u3067\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\n\u3061\u306a\u307f\u306b...\n\n\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u306f\u3001\u8907\u96d1\u306a\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30b7\u30b9\u30c6\u30e0/\u30df\u30c9\u30eb\u30a6\u30a7\u30a2/\u30b5\u30fc\u30d3\u30b9\u306e\u914d\u5099/\u8a2d\u5b9a/\u7ba1\u7406\u306e\u81ea\u52d5\u5316\u3092\u6307\u3059\u7528\u8a9e\n\n\u304a\u6065\u305a\u304b\u3057\u3044\u3067\u3059\u304c\u3001\u610f\u5473\u304c\u5206\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u30b0\u30b0\u308a\u307e\u3057\u305f\u3002docker-compose\u3067\u8272\u3005\u306a\u30b5\u30fc\u30d3\u30b9(Postgres, Redis, Nginx, etc...)\u306a\u3069\u3092\u4e00\u62ec\u3067\u8a2d\u5b9a\u30fb\u8d77\u52d5\u3059\u308b\u306e\u3067\u3001\u3057\u3063\u304f\u308a\u304d\u307e\u3059\u306d\u3002\n\ndocker-compose.yml\nversion: '2'\nservices:\n  db:\n    image: postgres\n    ports:\n      - \"5432\"\n  redis:\n    image: redis:latest\n    ports:\n      - 6379:6379\n  web:\n    build: .\n    command: bundle exec rails s -p 3000 -b 0.0.0.0\n    ports:\n      - \"3000:3000\"\n    links:\n      - db\n      - redis\n    environment:\n      DATABASE_USER: postgres\n      DATABASE_PASSWORD:\n      DATABASE_PORT: 5432\n      DATABASE_HOST: db\n      REDIS_URL: redis://redis:6379\n\n\nversion '2'\u3084\u3001\u306f\u3058\u3081\u306eservices\u306fDocker1.5\u7cfb\u4ee5\u964d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u5fc5\u8981\u306a\u304a\u307e\u3058\u306a\u3044\u3060\u3068\u601d\u3063\u3066\u304f\u3060\u3055\u3044\u3002services\u306e\u4e0b\u306e\u968e\u5c64\u306edb, redis, web\u306f\u305d\u308c\u305e\u308c\u30b5\u30fc\u30d3\u30b9\u540d\u3092\u610f\u5473\u3057\u3066\u3044\u3066\u3001\u3053\u306e\u540d\u524d\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u7acb\u3061\u4e0a\u304c\u3063\u3066\u3001\u305d\u308c\u4ee5\u4e0b\u306e\u5185\u5bb9\u304c\u305d\u306e\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u5b9f\u73fe\u3055\u308c\u308b\u611f\u3058\u3067\u3059\u3002\nRedis\u30b3\u30f3\u30c6\u30ca\u3068DB\u30b3\u30f3\u30c6\u30ca\u306f\u3001redis\u3068postgres\u306f\u516c\u5f0f\u306e\u30a4\u30e1\u30fc\u30b8\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u3092\u305d\u306e\u307e\u307e\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\nRails\u30b3\u30f3\u30c6\u30ca\u306fDockerfile\u3067\u5148\u7a0b\u6e96\u5099\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3092build: .\u3067\u6307\u5b9a\u3057\u3066\u3001links\u3067DB\u30b3\u30f3\u30c6\u30ca\u3068Redis\u30b3\u30f3\u30c6\u30ca\u3092\u540c\u6642\u306b\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002environment\u306f\u3001\u305d\u306e\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u4f7f\u7528\u3067\u304d\u308b\u74b0\u5883\u5909\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u3066\u307e\u3059\u3002\n\ndocker-compose\u3067\u5b9a\u7fa9\u3057\u305fservice\u306f\u540c\u4e00\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u914d\u4e0b\u306b\u7f6e\u304b\u308c\u308b\u306e\u3067\u3001links\u3067\u5b9a\u7fa9\u3057\u306a\u304f\u3066\u3082\u3001\u304a\u4e92\u3044\u306e\u30db\u30b9\u30c8\u540d\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u308b\u306e\u3067\u3001\u8a18\u8ff0\u3057\u306a\u304f\u3066\u3082\u5927\u4e08\u592b\u306a\u305d\u3046\u3067\u3059\u3002\n\n@hidekuro \u3055\u3093\u306b\u30b3\u30e1\u30f3\u30c8\u3067\u8a02\u6b63\u3057\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\n\n \u30e1\u30e2\nimage: postgres\u3068\u516c\u5f0f\u306epostgres\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u6b63\u5f0f\u306a\u66f8\u304d\u65b9\u306f\u30a4\u30e1\u30fc\u30b8\u540d:\u30bf\u30b0\u540d\u3067\u3059\u3002\u3053\u306e\u3088\u3046\u306b\u30bf\u30b0\u540d\u3092\u7701\u7565\u3057\u305f\u5834\u5408\u306f\u3001postgres:latest\u3068\u540c\u3058\u3068\u307f\u306a\u3055\u308c\u3066\u6700\u65b0\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u9069\u7528\u3055\u308c\u307e\u3059\u3002\u306a\u306e\u3067\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u304b\u3089\u898b\u3064\u3051\u308b\u3068\u3044\u3044\u3067\u3057\u3087\u3046\u3002\nhttps://hub.docker.com/_/postgres/\nports\u306fDocker\u5185\u5916\u306b\u30dd\u30fc\u30c8\u3092\u958b\u653e\u3059\u308b\u8a2d\u5b9a\u3067Rails\u30b3\u30f3\u30c6\u30ca\u306f\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3057\u305f\u308a\u3059\u308b\u306e\u3067\u3001ports\u3067\u30dd\u30fc\u30c8\u3092\u958b\u653e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001Redis\u30b3\u30f3\u30c6\u30ca\u3084DB\u30b3\u30f3\u30c6\u30ca\u306fRails\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u3057\u304b\u30a2\u30af\u30bb\u30b9\u3057\u306a\u3044\u306a\u3089\u3001expose\u3067Docker\u5185\u306e\u4ed6\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u5411\u3051\u3066\u30dd\u30fc\u30c8\u3092\u958b\u653e\u3059\u3079\u304d\u304b\u3082\u3057\u308c\u306a\u3044\u3067\u3059\u3002\npostgres\u3068redis\u306e\u516c\u5f0f\u30a4\u30e1\u30fc\u30b8\u306fports\u3092\u6307\u5b9a\u3057\u306a\u304f\u3066\u3082\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u305d\u308c\u305e\u308c5432\u30686379\u3092\u6307\u3057\u307e\u3059\u304c\u3001\u660e\u793a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n Rails\u306eDB\u306e\u8a2d\u5b9a\n\u4eca\u56de\u306f\u524d\u63d0\u3068\u3057\u3066\u3001\u958b\u767a\u74b0\u5883\u3067\u306fsqlite3\u3092\u4f7f\u7528\u3057\u3066\u3044\u305f\u306e\u3067\u3001\u307e\u305a\u305d\u308c\u3092postgres\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\u305d\u306e\u6b21\u306b\u3001Rails\u30b3\u30f3\u30c6\u30ca\u3068Docker\u3067\u7528\u610f\u3057\u305fDB\u30b3\u30f3\u30c6\u30ca\u306f\u5225\u306e\u30b3\u30f3\u30c6\u30ca\u306a\u306e\u3067\u3001database.yml\u3092\u66f8\u304d\u63db\u3048\u3066\u63a5\u7d9a\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\nsqlite3  postgres\nGemfile\u304b\u3089sqlite3\u3092\u524a\u9664\u3057\u3066\u3001\u672c\u756a\u74b0\u5883\u306e\u307f\u306b\u8a18\u8ff0\u3057\u3066\u3044\u305fpg\u3092\u4e0a\u306b\u6301\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n\nGemfile\n+ gem 'pg'\n\ngroup :development, :test do\n-  gem 'sqlite3'\nend\n\ngroup :production do\n-  gem 'pg'\nend\n\n\n\n database.yml\n\n\u74b0\u5883\u5909\u6570\u3092\u591a\u69d8\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u306e\u4e2d\u8eab\u306f\u5148\u307b\u3069docker-compose.yml\u3067\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u6539\u3081\u3066\u78ba\u8a8d\u3057\u307e\u3059\u3002\nDATABASE_USER: postgres\nDATABASE_PASSWORD:\nDATABASE_PORT: 5432\nDATABASE_HOST: db\n\nHOST\u540d\u3084USER, PASSWORD\u306f\u3053\u308c\u3058\u3083\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\uff1f\u3068\u601d\u3063\u305f\u65b9\u306f\u4e0b\u8a18\u306e\u30e1\u30e2\u6b04\u306b\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u81ea\u5206\u3082\u7d50\u5c40\u4ed6\u306e\u65b9\u6cd5\u306f\u3088\u304f\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u3067\u884c\u304d\u307e\u3057\u305f...\n\ndatabase.yml\ndefault: &default\n  adapter: postgresql\n  encoding: unicode\n  timeout: 5000\n  port: <%= ENV.fetch('DATABASE_PORT') { 5432 } %>\n  host: <%= ENV.fetch('DATABASE_HOST') { 'localhost' } %>\n  username: <%= ENV.fetch('DATABASE_USER') { 'root' } %>\n  password: <%= ENV.fetch('DATABASE_PASSWORD') { 'password' } %>\n  pool: <%= ENV.fetch('RAILS_MAX_THREADS') { 5 } %>\n\ndevelopment:\n  <<: *default\n  database: myapp_development\n\ntest:\n  <<: *default\n  database: myapp_test\n\n\n\n redis\u306e\u8a2d\u5b9a\ndatabase.yml\u3067\u74b0\u5883\u5909\u6570\u306bREDIS_URL: redis://redis:6379\u3068\u8a2d\u5b9a\u3057\u307e\u3057\u305f\u3002\u306a\u306e\u3067\u3001redis\u306e\u521d\u671f\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\n\nconfig/initialize/redis.rb\nREDIS ||= Redis.new(url: ENV['REDIS_URL'] || 'redis://localhost:6379')\n\n\n\u3053\u3053\u306f\u9069\u5b9c\u3001\u81ea\u5206\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n \u30e1\u30e2\n\u4eca\u56de\u306f\u516c\u5f0f\u306ePostgres\u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u304c\u3001\u672c\u5bb6\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u65e5\u672c\u8a9e\u8a33\u306b\u3088\u308b\u3068\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306f localhost \u3067\u5b9f\u884c\u3059\u308b\u3068\u307f\u306a\u3055\u308c\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001db \u30b3\u30f3\u30c6\u30ca\u306b\u6307\u793a\u3057\u306a\u304f\u3066\u306f\u3044\u3051\u307e\u305b\u3093\u3002postgres \u30a4\u30e1\u30fc\u30b8\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b database \u3068 username \u306b\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3068\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u6c17\u4ed8\u304b\u305a\u304b\u306a\u308a\u30cf\u30de\u308a\u307e\u3057\u305f\u3002\u305d\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306edatabase\u3068username\u306f\ndevelopment: &default\n  adapter: postgresql\n  encoding: unicode\n  database: postgres\n  pool: 5\n  username: postgres\n  password:\n  host: db\n\n\u3068\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u53c2\u8003\u306b\u3000database.yml\u3092\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\n\u307e\u305f\u3001\u4e0a\u8a18\u3067REDIS\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u3001redis://redis:6379\u3067Redis\u30b3\u30f3\u30c6\u30ca\u306b\u3001database.yml\u3067\u306fhost: db\u3067DB\u30b3\u30f3\u30c6\u30ca\u306bRails\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u63a5\u7d9a\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306b\u3082Docker\u306e\u304a\u304b\u3052\u3067\u3059\u3002\ndocker-compose.yml\u3067links\u3092\u66f8\u304f\u3068\u3001\u30b3\u30f3\u30c6\u30ca\u5185\u306e/etc/hosts\u306b\u6307\u5b9a\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u540d\u3068\u305d\u306eip\u30a2\u30c9\u30ec\u30b9\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\u4ee5\u4e0b\u306f\u4f8b\u3067\u3059\u3002\n\n/etc/hosts\n172.17.0.6  db\n172/17/0.4  redis\n\n\n\u3053\u306e\u3088\u3046\u306b\u3001\u4eca\u56de\u6307\u5b9a\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u540d\u304c\u30a8\u30a4\u30ea\u30a2\u30b9\u3068\u306a\u3063\u3066\u3001ip\u30a2\u30c9\u30ec\u30b9\u3092\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u3067\u3001host: db\u3068\u30b3\u30f3\u30c6\u30ca\u540d\u3092\u5165\u529b\u3057\u305f\u308a\u3001redis://redis:6379\u3067\u4ed6\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u307e\u3057\u305f\u3002\u308f\u3056\u308f\u3056ip\u30a2\u30c9\u30ec\u30b9\u3068\u304b\u6c17\u306b\u3057\u306a\u304f\u3066\u3044\u3044\u306e\u306f\u697d\u3067\u3059\u306d\uff01\uff01\n\n \u5b9f\u884c\u3057\u3066\u307f\u3088\u3046!\n\u3053\u308c\u3067\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u3002\n$ docker-compose build\n... # \u3053\u308c\u3067\u8a2d\u5b9a\u3057\u305fpostgres\u3084ruby\u3084\u3089\u8272\u3005\u306a\u30a4\u30e1\u30fc\u30b8\u3068\u304b\u3092\u53d6\u3063\u3066\u304f\u308b\n... # \u4f55\u3082\u30a8\u30e9\u30fc\u304c\u7121\u3051\u308c\u3070\u3001\u74b0\u5883\u69cb\u7bc9\u5b8c\u4e86\u306a\u306e\u3067\u3001Rails\u30a2\u30d7\u30ea\u306eDB\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\n$ docker-compose run web rake db:create\n$ docker-compose run web rake db:migrate\n... # docker-compose run <\u30b5\u30fc\u30d3\u30b9\u540d> <\u30b3\u30de\u30f3\u30c9>\n... # \u4e0a\u306e\u69cb\u6587\u3067\u30b5\u30fc\u30d3\u30b9\u540d\u306e\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3067\u304d\u308b\n$ docker-compose up\n\n\u3053\u308c\u3067\u5168\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u8d77\u52d5\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nweb_1    | => Booting Puma\nweb_1    | => Rails 5.0.1.rc2 application starting in development on http://0.0.0.0:3000\nweb_1    | => Run `rails server -h` for more startup options\nweb_1    | Puma starting in single mode...\nweb_1    | * Version 3.6.2 (ruby 2.3.3-p222), codename: Sleepy Sunday Serenity\nweb_1    | * Min threads: 5, max threads: 5\nweb_1    | * Environment: development\nweb_1    | * Listening on tcp://0.0.0.0:3000\nweb_1    | Use Ctrl-C to stop\n\n\u30ed\u30b0\u306e\u901a\u308a\u3001http://0.0.0.0:3000\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308c\u3070\u3001\u3061\u3083\u3093\u3068\u52d5\u3044\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\uff01\uff01\u3053\u308c\u306b\u3066\u5b8c\u4e86...\u3067\u306f\u306a\u3044\u3093\u3067\u3059\u5b9f\u306f(\u00b4\u30fb\u03c9\u30fb\uff40)\u3059\u3044\u307e\u305b\u3093\u3002\n\n\u3053\u306e\u307e\u307e\u3060\u3068build\u3059\u308b\u305f\u3073\u306b\u30c7\u30fc\u30bf\u304c\u6d88\u3048\u3066\u3057\u307e\u3046!!\n\u3053\u306e\u307e\u307e\u3060\u3068\u3001Redis\u3084Postgres\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u518d\u8d77\u52d5\u3059\u308b\u305f\u3073\u306b\u4e2d\u306b\u5165\u3063\u3066\u3044\u305f\u30c7\u30fc\u30bf\u304c\u6d88\u3048\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u306a\u306e\u3067\u3001Docker\u306e\u6a19\u6e96\u306eAPI\u3092\u7528\u3044\u3066volumes\u3067\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\u4eca\u56de\u306fpostgres\u3068redis\u306e\u30c7\u30fc\u30bf\u3092\u6c38\u7d9a\u5316\u3057\u3066\u307b\u3057\u3044\u306e\u3067\u3001\u305d\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\ndocker-compose.yml\nversion: '2'\nservices:\n  db:\n    image: postgres\n    ports:\n      - \"5432\"\n    volumes:\n      - ./data/postgres:/var/lib/postgresql/data\n  redis:\n    image: redis:latest\n    ports:\n      - 6379:6379\n    volumes:\n      - ./data/redis:/data\n    command: redis-server --appendonly yes\n\n\nDB\u30b3\u30f3\u30c6\u30ca\u3068Redis\u30b3\u30f3\u30c6\u30ca\u306bvolumes\u3068Redis\u30b3\u30f3\u30c6\u30ca\u306b\u306fcommand\u3092\u4ed8\u4e0e\u3057\u307e\u3057\u305f\u3002volumes\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3057\u3066\u30db\u30b9\u30c8\u5074\u306e\u30d1\u30b9\u3068\u30b3\u30f3\u30c6\u30ca\u5074\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3057\u3066\u3001\u30db\u30b9\u30c8\u5074\u306e\u305d\u306e\u30d1\u30b9\u306b\u30b3\u30f3\u30c6\u30ca\u5074\u306e\u30d1\u30b9\u3092\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u3001\u30b3\u30f3\u30c6\u30ca\u304c\u518d\u8d77\u52d5\u3057\u305f\u6642\u306b\u3001\u81ea\u5206\u306e\u30ed\u30fc\u30ab\u30eb\u306e\u65b9\u306b\u3082\u4fdd\u5b58\u3055\u308c\u305f\u30c7\u30fc\u30bf\u304c\u30b3\u30f3\u30c6\u30ca\u5074\u306b\u3082\u540c\u671f\u3055\u308c\u3066\u3001\u305d\u308c\u3092\u8aad\u307f\u8fbc\u3093\u3060\u72b6\u614b\u304b\u3089\u30b9\u30bf\u30fc\u30c8\u3059\u308b...\u307f\u305f\u3044\u306a\u611f\u3058\u306b\u306a\u308b\u306e\u3067\u3001\u30c7\u30fc\u30bf\u3092\u6c38\u7d9a\u5316\u3067\u304d\u307e\u3059\u3002\nvolumes: <\u30db\u30b9\u30c8\u306e\u30d1\u30b9>:<\u30b3\u30f3\u30c6\u30ca\u306e\u30d1\u30b9>\nredis\u306f\u521d\u671f\u8d77\u52d5\u6642\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5909\u66f4\u3057\u3066--appendonly yes\u3068\u3044\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3092\u3064\u3051\u306a\u3044\u3068\u30c7\u30fc\u30bf\u304c\u751f\u6210\u3055\u308c\u306a\u3044\u3089\u3057\u3044\u306e\u3067\u3001\u6c17\u3092\u3064\u3051\u3066\u304f\u3060\u3055\u3044\u3002\nredis\u306f/data\u306b\u3001postgres\u306f/var/lib/postgresql/data\u306b\u30c7\u30fc\u30bf\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308c\u3070\u3044\u3044\u306e\u3067\u3001\u4ee5\u4e0a\u306e\u3088\u3046\u306b\u7de8\u96c6\u3059\u308c\u3070\u3001\u5b8c\u4e86\u3067\u3059\uff01\n\n \u30cf\u30de\u3063\u305f\u4e8b\u4e00\u89a7\n\nA server is already running\n\nDocker\u306e\u74b0\u5883\u304c\u51fa\u6765\u3066,docker-compose build\u3082\u51fa\u6765\u3066\u3001\u3044\u3056docker-compose up\u3058\u3083\u3042\uff5e\uff01\u3063\u3066\u306a\u3063\u305f\u3089\u9854\u3092\u51fa\u3057\u305f\u30a8\u30e9\u30fc\u3002\nweb_1    | => Booting Puma\nweb_1    | => Rails 5.0.1.rc2 application starting in development on http://0.0.0.0:3000\nweb_1    | => Run `rails server -h` for more startup options\nweb_1    | A server is already running. Check /myapp/tmp/pids/server.pid.\nweb_1    | Exiting\n\n\u3059\u3067\u306b\u30b5\u30fc\u30d0\u30fc\u304c\u7acb\u3063\u3066\u3044\u308b\u3088\u3068\u3044\u3046\u3002\u3067\u3082\u3001pa aux | grep 3000\u3067\u63a2\u3057\u3066\u307f\u3066\u3082\u3001docker ps -a | grep 3000\u3067\u63a2\u3057\u3066\u307f\u3066\u3082\u5225\u306b\u30d7\u30ed\u30bb\u30b9\u306f\u7acb\u3063\u3066\u3044\u306a\u3055\u305d\u3046\u3002\u3002\n\u3053\u308c\u306e\u539f\u56e0\u306fRails\u306eWEB\u30b5\u30fc\u30d0\u304c\u6b63\u5e38\u306b\u7d42\u4e86\u51fa\u6765\u3066\u3044\u306a\u3044\u3053\u3068\u306b\u3088\u308b\u305d\u3046\u3067\u3001\u672c\u6765\u306a\u3089pid\u306fWEB\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3059\u308b\u6642\u306btmp/pids/server.pid\u306b\u66f8\u304d\u8fbc\u307e\u308c\u3066\u3001\u7d42\u4e86\u3059\u308b\u6642\u306b\u524a\u9664\u3055\u308c\u308b\u306f\u305a\u3060\u3051\u308c\u3069\u3001\u305d\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u306b\u4f55\u304b\u66f8\u304b\u308c\u3066\u3044\u308b\u304c\u305f\u3081\u306b\u3001WEB\u30b5\u30fc\u30d0\u304c\u8d77\u52d5\u4e2d\u3067\u3042\u308b\u3068\u8aa4\u8a8d\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u3088\u308b\u30a8\u30e9\u30fc\u306e\u3088\u3046\u3002\nrm /tmp/pids/server.pid\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u6d88\u305b\u3070\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3067\u304d\u307e\u3057\u305f\u3002server.pid\u306f\u306a\u3051\u308c\u3070\u3001\u751f\u6210\u3055\u308c\u308b\u306e\u3067\u6d88\u3057\u3066\u3082\u5927\u4e08\u592b\u3067\u3059\u3002\n\nBundler::GemRequireError: There was an error while trying to load the gem 'uglifier'.\n\nDockerfile\u3092\u5b9f\u884c\u6642\u306ebundle install\u3067\u3053\u3093\u306a\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u30b0\u30b0\u3063\u305f\u3089\u3001node.js\u304c\u5165\u3063\u3066\u3044\u308c\u3070\u5927\u4e08\u592b\u3063\u3066\u66f8\u3044\u3066\u3042\u3063\u305f\u306e\u3067\u3001Dockerfile\u306bapt-get install nodejs\u3092\u8ffd\u8a18\u3057\u305f\u3089\u76f4\u308a\u307e\u3057\u305f\u3002\u3053\u308c\u306f\u4e0a\u3067\u306f\u5bfe\u5fdc\u6e08\u307f\u3067\u3059\uff01\n\n docker\u306eTips\n\n\u30a8\u30e9\u30fc\u304c\u8d77\u304d\u305f\u3089\u30ed\u30b0\u3092\u898b\u3088\u3046\ndocker-compose logs\u3067\u5b9f\u884c\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u5185\u306e\u30ed\u30b0\u304c\u898b\u308c\u307e\u3059\u3002\u30b5\u30fc\u30d3\u30b9\u540d\u3092\u6307\u5b9a\u3057\u305f\u3044\u5834\u5408\u306f\u3001docker-compose logs db\u3068\u3059\u308c\u3070\u3001DB\u30b3\u30f3\u30c6\u30ca\u5185\u306e\u30ed\u30b0\u304c\u898b\u308c\u307e\u3059\u3002\n\n\u4e0d\u8981\u306a\u30d7\u30ed\u30bb\u30b9\u3068\u30a4\u30e1\u30fc\u30b8\u3092\u524a\u9664\u3059\u308b\n\u3044\u307e\u8d77\u52d5\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u306fdocker images\u30b3\u30de\u30f3\u30c9\u3067\u3001\u5b9f\u884c\u4e2d\u306e\u30d7\u30ed\u30bb\u30b9\u306fdocker ps\u30b3\u30de\u30f3\u30c9\u3067\u5206\u304b\u308a\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u8d77\u52d5\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u308a\u3001\u3059\u3067\u306b\u5fc5\u8981\u306e\u306a\u3044\u30d7\u30ed\u30bb\u30b9\u3092\u524a\u9664\u3057\u306a\u3044\u3068\u4ee5\u5916\u3068\u5bb9\u91cf\u3092\u98df\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u5b9a\u671f\u7684\u306b\u4e0d\u8981\u306a\u30d7\u30ed\u30bb\u30b9\u3084\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3059\u308b\u3068\u3044\u3044\u3067\u3057\u3087\u3046\u3002\n\u30b9\u30c6\u30fc\u30bf\u30b9\u304cexited\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u524a\u9664\u3057\u3066\u3001\u30a4\u30e1\u30fc\u30b8\u540d\u304c\u3068\u306a\u3063\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3059\u308b\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u3067\u3059\u3002\ndocker ps -aq -f \"status=exited\" | xargs docker rm -v && docker images -q -f \"dangling=true\" | xargs docker rmi\n\ndocker-compose \u30b3\u30de\u30f3\u30c9\u3092\u77ed\u304f\u3059\u308b\n\u57fa\u672c\u7684\u306b\u4eca\u307e\u3067\u666e\u901a\u306b\u5b9f\u884c\u3057\u3066\u3044\u305frake db:migrate\u306a\u3069\u306e\u30b3\u30de\u30f3\u30c9\u306f\u4eca\u56de\u69cb\u6210\u3057\u305fDocker\u30b3\u30f3\u30c6\u30ca\u4e0a\u3060\u3068docker-compose run web rake db:migrate\u3068\u3044\u3046\u3088\u3046\u306b\u304b\u306a\u308a\u9577\u304f\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u306a\u306e\u3067\u3001.zshrc\u3084.bashrc\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u3066\u30a8\u30a4\u30ea\u30a2\u30b9\u5316\u3057\u307e\u3057\u3087\u3046\u3002\nalias fig='docker-compose'\n\n\n \u3055\u3044\u3054\u306b\n\u304b\u306a\u308a\u9577\u6587\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093...\u3002\u81ea\u5206\u306a\u308a\u306b\u5f8c\u304b\u3089\u8aad\u307f\u8fd4\u3057\u3066\u3082\u7d0d\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u8a73\u3057\u304f\u66f8\u3044\u305f\u3064\u3082\u308a\u306a\u306e\u3067\u3001\u3082\u3057\u9593\u9055\u3063\u3066\u3044\u305f\u3089\u8a02\u6b63\u30ea\u30af\u30a8\u30b9\u30c8\u7b49\u3057\u3066\u3044\u305f\u3060\u3051\u308b\u3068\u5b09\u3057\u3044\u3067\u3059\uff01\ndocker\u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u304b\u306a\u308a\u5145\u5b9f\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u8ff7\u3063\u305f\u3089\u307e\u305a\u305d\u3053\u3092\u898b\u308b\u306e\u304c\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u3068\u3044\u3063\u3066\u3001\u5168\u3066\u82f1\u8a9e\u306a\u306e\u3067\u3001\u3082\u3057\u3044\u304d\u306a\u308a\u306f\u53b3\u3057\u3044\u3068\u3044\u3046\u65b9\u304c\u3044\u307e\u3057\u305f\u3089\u3001\u65e5\u672c\u8a9e\u8a33\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3082\u3042\u308b\u306e\u3067\u305c\u3072\u4e00\u5ea6\u306f\u8aad\u3093\u3067\u307f\u3066\u304f\u3060\u3055\u3044\uff01\n\u3042\u3068\u3001\u66f8\u3044\u3066\u3044\u3066\u5b8c\u5168\u306bOthloTech\u306eAdventCalendar\u3068\u3044\u3046\u3053\u3068\u3092\u5fd8\u308c\u3066\u3044\u307e\u3057\u305f\u304c\u3001OthloTech\u306f\u6765\u5e74\u3082\u6771\u6d77\u306eIT\u754c\u9688\u3092\u76db\u308a\u4e0a\u3052\u308b\u305f\u3081\u306b\u697d\u3057\u304f\u6d3b\u52d5\u3057\u3066\u3044\u304d\u307e\u3059\u306e\u3067\u3001\u5fdc\u63f4\u3057\u3066\u3044\u305f\u3060\u3051\u308b\u3068\u5b09\u3057\u3044\u3067\u3059\uff3c(^o^)\uff0f\n\n(\u300d\uff9f\u30ed\uff9f)\u300d<<< { A Happy New Year \u266c\u266c \u266a}\n\n\n \u53c2\u8003\u30ea\u30f3\u30af\n\n2016\u5e74\u7248\u3001Docker\u306e\u3059\u3079\u3066\u304c5\u5206\u3067\u308f\u304b\u308b\u307e\u3068\u3081!(\u30b3\u30de\u30f3\u30c9\u4e00\u89a7\u4ed8\u304d)\ndocker-compose \u3067 Rails \u306e\u958b\u767a\u74b0\u5883\u3092\u4f5c\u308b\n\nDocker Compose\u306b\u3088\u308bMySQL, Redis, nginx, Rails\u69cb\u6210\u306e\u8a2d\u5b9a\u4f8b\ndocker-compose-rails-dev-example\ndocker-compose\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b3\u30f3\u30c6\u30ca\u3092\u7acb\u3066\u308b\u3068\u304d\u306eTips\nDocker Compose - docker-compose.yml \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\n\u8907\u96d1\u306a\u69cb\u6210\u306erails\u30a2\u30d7\u30ea\u3092docker\u3067\u52d5\u304b\u3057\u305f\u3044\u5834\u5408\u306f\u3069\u3046\u3059\u308b\u3079\u304d\u304b\n\n## <i class=\"fa fa-cubes\"></i> \u306f\u3058\u3081\u306b\n\u3053\u3093\u306b\u3061\u306f\u3001OthloTech\u306e@pokohide\u3067\u3059\u3002\n\n\u3053\u306e\u8a18\u4e8b\u306f[OthloTech Advent Calendar 2016](http://qiita.com/advent-calendar/2016/othlotech)\u306e\u6700\u7d42\u65e5(25\u65e5)\u306e\u8a18\u4e8b\u3067\u3059\uff01\n\n\u4e16\u9593\u306f\u30af\u30ea\u30b9\u30de\u30b9\u30e0\u30fc\u30c9\u3067\u3001\u3053\u3093\u306a\u8a18\u4e8b\u3092\u8aad\u3093\u3067\u3044\u308b\u4eba\u3082\u3044\u306a\u3044\u3068\u306f\u601d\u3044\u307e\u3059\u304c...\u6700\u8fd1MacBookPro\u3092\u8cfc\u5165\u3057\u3066\u3001\u65b0\u3057\u3044\u306e\u3092\u8cb7\u3063\u305f\u3089\u74b0\u5883\u6c5a\u67d3\u3057\u306a\u3044\u305e\uff01\u3068\u601d\u3063\u3066\u3044\u305f\u306e\u3067\u3001\u3053\u308c\u3092\u6a5f\u306b\u52c9\u5f37\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u306a\u306e\u3067\u3001\u30b9\u30c6\u30c3\u30d7\u3054\u3068\u306b\u81ea\u5206\u306a\u308a\u306e\u89e3\u8aac\u30b3\u30e1\u30f3\u30c8\u7b49\u4ed8\u304d\u307e\u3059\u304c\u3001\u3054\u4e86\u627f\u304f\u3060\u3055\u3044\u3002\n\n## <i class=\"fa fa-cubes\"></i> \u4e8b\u524d\u77e5\u8b58\n\n### <i class=\"fa fa-cube\"></i> `docker`\u3068\u306f\n\n![docker.png](https://qiita-image-store.s3.amazonaws.com/0/85665/a5cbd877-5186-6cb5-3ca6-49ac3de3041d.png)\n\n[Docker Inc.](https://www.docker.com/)\u304c\u63d0\u4f9b\u3057\u3066\u3044\u308b\u4eee\u60f3\u5316\u306e\u305f\u3081\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u3059\u3002\n\n<img width=\"512\" alt=\"dd.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/85665/ac6e540f-fd49-3f04-2752-4b7ec846739b.png\">\n\u300eDocker\u5b9f\u6226\u6d3b\u7528\u30ac\u30a4\u30c9\u300fp.7 \u3088\u308a\n\nVagrant\u306a\u3069\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u3068\u306f\u9055\u3063\u3066\u3001docker\u306e\u30b3\u30f3\u30c6\u30ca\u306fOS\u30ec\u30d9\u30eb\u3067\u306e\u4eee\u60f3\u5316\u3092\u884c\u3063\u3066\u305d\u306eOS\u4e0a\u3067\u30d7\u30ed\u30bb\u30b9\u3092\u52d5\u304b\u3059\u306e\u3067\u3059\u304c\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u306f\u30de\u30b7\u30f3\u30ec\u30d9\u30eb\u3067\u4eee\u60f3\u5316\u3092\u884c\u3044\u307e\u3059\u3002\u306a\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\u3002\n\n|  | \u30b3\u30f3\u30c6\u30ca(Docker) | \u4eee\u60f3\u30de\u30b7\u30f3 |\n|:-:|:-:|:-:|\n| \u8d77\u52d5 | \u65e9\u3044  |  \u9045\u3044 |\n| \u30ea\u30bd\u30fc\u30b9\u6d88\u8cbb | \u5c11\u306a\u3044 | \u591a\u3044 |\n| OS | Linux\u306e\u307f | \u4f55\u3067\u3082\u53ef |\n\nvagrant\u306f\u30de\u30b7\u30f3\u30ec\u30d9\u30eb\u3067\u69cb\u7bc9\u3059\u308b\u306e\u3067\u3001\u30d9\u30fc\u30b9\u3068\u306a\u308bOS\u306f\u7279\u306b\u9650\u5b9a\u3055\u308c\u307e\u305b\u3093\u304c\u3001docker\u306fLinux\u4e0a\u3067\u306e\u307f\u3057\u304b\u52d5\u304d\u307e\u305b\u3093\u3002\u3057\u304b\u3057\u3001docker\u306fLinux\u306e\u6a5f\u80fd\u3092\u501f\u308a\u3066\u4eee\u60f3\u74b0\u5883\u3092\u5b9f\u73fe\u3057\u3066\u3044\u308b\u306e\u3067\u5fc5\u8981\u306a\u30ea\u30bd\u30fc\u30b9\u306f\u5c11\u306a\u304f\u3066\u8d77\u52d5\u304c\u65e9\u3044\u306e\u304c\u7279\u5fb4\u3067\u3059\u3002\u9006\u306b\u4eee\u60f3\u30de\u30b7\u30f3\u306fOS\u5358\u4f4d\u3067\u4eee\u60f3\u5316\u3057\u3066\u3044\u308b\u306e\u3067\u30ea\u30bd\u30fc\u30b9\u6d88\u8cbb\u91cf\u304c\u9ad8\u304f\u8d77\u52d5\u306f\u9045\u3044\u3067\u3059\u3002\n\n\u4ee5\u524d\u306fVirtualBox\u304c\u5fc5\u8981\u3060\u3063\u305f\u308a\u74b0\u5883\u8a2d\u5b9a\u304c\u5fc5\u8981\u3060\u3063\u305f\u308a\u3001\u8272\u3005\u9762\u5012\u3060\u3063\u305f\u305d\u3046\u3067\u3059\u304c\u3001\u4eca\u306fDocker\u793e\u304c\u516c\u5f0f\u3067\u51fa\u3057\u3066\u3044\u308b <i class=\"fa fa-external-link-square\"></i> [Docker for (Mac/Windows/Linux)](https://www.docker.com/products/docker)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3059\u3050\u306b\u4f7f\u3048\u308b\u306e\u3067\u3001\u307e\u3060\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u3057\u3066\u3044\u306a\u3044\u4eba\u306f\u5165\u308c\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n### <i class=\"fa fa-cube\"></i> `\uff44ocker-compose`\u3068\u306f?\ndocker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068docker\u30b3\u30de\u30f3\u30c9\u304c\u4f7f\u7528\u3067\u304d\u3066\u3001\u305d\u308c\u3092\u7528\u3044\u308b\u3053\u3068\u3067\u8272\u3005\u306a\u30b3\u30f3\u30c6\u30ca\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3067\u3059\u304c\u3001Rails\u30a2\u30d7\u30ea\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u306e\u306bPostgres\u3060\u3063\u305f\u308a\u3001Ruby\u3060\u3063\u305f\u308a\u3001Redis\u3060\u3063\u305f\u308a\u8907\u6570\u306e\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u306a\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u624b\u4f5c\u696d\u3067\u4f5c\u308b\u306e\u306f\u5927\u5909\u3002\u3068\u3044\u3046\u3053\u3068\u3067\u3001docker-compose\u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u7528\u3044\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\ndocker-compose\u3068\u306f\u8907\u6570\u306e\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u306a\u308bdocker\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9a\u7fa9\u30fb\u5b9f\u884c\u308b\u30c4\u30fc\u30eb\u3067\u3001compose\u7528\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u3066\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u8a18\u8ff0\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30ca\u3092\u4e00\u6c17\u306b\u8d77\u52d5\u3067\u304d\u307e\u3059 <i class=\"fa fa-thumbs-o-up\"></i>\n\ndocker-compose\u306f\u30ea\u30ea\u30fc\u30b9\u30da\u30fc\u30b8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u6700\u65b0\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092`curl`\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u65b9\u6cd5\u306f\u30ea\u30ea\u30fc\u30b9\u30da\u30fc\u30b8\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u30b3\u30d4\u30da\u3059\u308c\u3070\u5927\u4e08\u592b\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n[Docker compose release page](https://github.com/docker/compose/releases)\n\n### <i class=\"fa fa-file-code-o\"></i> `Dockerfile` / `docker-compose.yml`\n\ndocker\u30b3\u30de\u30f3\u30c9\u3067\u30a4\u30e1\u30fc\u30b8\u306e\u4f5c\u6210\u3084\u30b3\u30f3\u30c6\u30ca\u306e\u8d77\u52d5\u306a\u3069\u3092\u5b9f\u884c\u3057\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u5165\u529b\u3059\u308b\u306e\u306f\u75b2\u308c\u308b\u3057\u3001\u4f5c\u696d\u3092\u4e00\u62ec\u3057\u3066\u884c\u3044\u305f\u304f\u306a\u3063\u3066\u304f\u308b\u306e\u3067\u305d\u3093\u306a\u6642\u306b\u4f7f\u3046\u306e\u304c`Dockerfile`\u3067\u3059\u3002`makefile`\u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3059\u304c\u3001\u500b\u4eba\u7684\u306b\u306f\u305d\u308c\u4ee5\u4e0a\u306b\u53d6\u3063\u4ed8\u304d\u3084\u3059\u3044\u304f\u3066\u6c17\u306b\u5165\u308a\u307e\u3057\u305f\u3002\n\n\u4f7f\u3048\u308b\u30b3\u30de\u30f3\u30c9\u308210\u7a2e\u985e\u7a0b\u5ea6\u3057\u304b\u306a\u3044\u306e\u3067\u3001\u3059\u3050\u306a\u308c\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n[Dockerfile\u306e\u30b3\u30de\u30f3\u30c9](http://qiita.com/kmats@github/items/27c09f34aa4d338d40fc)\n\n`docker-compose.yml`\u306fdocker-compose\u3068\u3044\u3046\u30c4\u30fc\u30eb\u3092\u4f7f\u3046\u305f\u3081\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u3001\u3053\u3053\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u69cb\u6210\u3059\u308b\u5404\u30b5\u30fc\u30d3\u30b9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n### <i class=\"fa fa-wrench\"></i> \u691c\u8a3c\u74b0\u5883\n\n\u691c\u8a3c\u306fmac\u4e0a\u3067docker\u306f1.12, docker-compose\u306f1.8.1\u3092\u4f7f\u7528\u3057\u3066docker\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3066\u3044\u307e\u3059\u30022016\u5e7412\u6708\u73fe\u6642\u70b9\u306e\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n```\n$ docker version\nClient:\n Version:      1.12.3\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   6b644ec\n Built:        Wed Oct 26 23:26:11 2016\n OS/Arch:      darwin/amd64\n\nServer:\n Version:      1.12.3\n API version:  1.24\n Go version:   go1.6.3\n Git commit:   6b644ec\n Built:        Wed Oct 26 23:26:11 2016\n OS/Arch:      linux/amd64\n\n$ docker-compose version\ndocker-compose version 1.8.1, build 878cff1\ndocker-py version: 1.10.3\nCPython version: 2.7.9\nOpenSSL version: OpenSSL 1.0.2h  3 May 2016\n```\n\n### <i class=\"fa fa-cube\"></i> Docker\u3092\u6d3b\u304b\u3059\u539f\u5247\n#### 1) 1 Container 1 Service\n\uff11\u3064\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u306f1\u3064\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u52d5\u4f5c\u3055\u305b\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002\u305f\u3068\u3048\u3070\u3001\u4eca\u56de\u7528\u3044\u308bPostgres\u3068Redis\u3092\u540c\u3058\u30b3\u30f3\u30c6\u30ca\u3067\u52d5\u304b\u3059\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u304c\u3001\u30b3\u30f3\u30c6\u30ca\u304c\u8907\u96d1\u5316\u3057\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u6975\u529b\u30b7\u30f3\u30d7\u30eb\u306b\u4fdd\u3064\u305f\u3081\u610f\u8b58\u3057\u307e\u3057\u3087\u3046\u3002\n\n#### 2) Dockerfile\u306b\u66f8\u304f\n\u30b3\u30f3\u30bd\u30fc\u30eb\u3067docker\u30b3\u30de\u30f3\u30c9\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u304c\u3001\u7d50\u5c40\u8ab0\u304b\u3068\u5171\u6709\u3059\u308b\u306b\u306f\u305d\u306e\u4f5c\u6210\u624b\u9806\u3092\u660e\u793a\u3057\u306a\u304f\u3066\u306f\u3044\u3051\u306a\u3044\u306e\u3067\u3001Dockerfile\u306b\u7d71\u4e00\u3057\u307e\u3057\u3087\u3046\u3002\n\n## <i class=\"fa fa-cubes\"></i> Rails\u30a2\u30d7\u30ea\u306e\u958b\u767a\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3066\u307f\u308b\n\n\u4eca\u56de\u306e\u8a2d\u5b9a\u3068\u3057\u3066\u3001\u958b\u767a\u4e2d\u306eRails\u30a2\u30d7\u30ea(Postgres+Redis)\u3092Docker\u306e\u4eee\u60f3\u74b0\u5883\u306b\u79fb\u884c\u3059\u308b\u3053\u3068\u3092\u8003\u3048\u307e\u3059\u3002\u3053\u3053\u3067\u500b\u4eba\u7684\u306a\u524d\u63d0\u3068\u3057\u3066\u3001\u958b\u767a\u74b0\u5883\u3067\u306fsqlite3\u3092\u4f7f\u3063\u3066\u3044\u305f\u306e\u3067\u305d\u3053\u3067\u306e\u5909\u66f4\u624b\u9806\u3082\u307e\u3068\u3081\u3066\u3042\u308a\u307e\u3059\u3002\n\n- ruby: 2.3.3\n- Ruby on Rails: 5.0.1.rc2\n\n### <i class=\"fa fa-file-code-o\"></i>  Rails\u7528\u306eDockerfile\u3092\u7528\u610f\u3059\u308b\nDockerfile\u306frails\u30a2\u30d7\u30ea\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u914d\u7f6e\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash:Dockerfile\nFROM ruby:2.3.3\n\nENV APP_ROOT /my_app\n\nRUN apt-get update -qq && apt-get install -y nodejs build-essential libpq-dev postgresql-client\n\nRUN mkdir $APP_ROOT\nWORKDIR $APP_ROOT\n\nADD Gemfile ${APP_ROOT}/Gemfile\nADD Gemfile.lock ${APP_ROOT}/Gemfile.lock\nRUN bundle install\n\nADD . $APP_ROOT\n```\n\nDockerfile\u306e\u6700\u521d\u306f`FROM IMAGE:TAG`\u30b3\u30de\u30f3\u30c9\u3067\u3001\u4f7f\u7528\u3059\u308b\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3092\u9078\u629e\u3057\u306a\u304f\u3066\u306f\u3044\u3051\u307e\u305b\u3093\u3002\u4f7f\u7528\u3059\u308b\u30a4\u30e1\u30fc\u30b8\u306f`CentOS`\u3060\u3063\u305f\u308a\u3001\u308a`Redis`\u3060\u3063\u305f\u308a\u4ed6\u4eba\u306e\u4f5c\u6210\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u57fa\u672c\u7684\u306b\u306f\u3001[\u516c\u5f0f\u306e\u30a4\u30e1\u30fc\u30b8\u30ea\u30b9\u30c8](https://hub.docker.com/explore/)\u304b\u3089\u9078\u629e\u3059\u308c\u3070\u3044\u3044\u3067\u3057\u3087\u3046\u3002\n\n`Ubuntu`\u3092\u5165\u308c\u3066\u3001`apt-get`\u30671\u304b\u3089ruby\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u3042\u3089\u304b\u3058\u3081ruby\u306e\u5165\u3063\u3066\u3044\u308b\u30a4\u30e1\u30fc\u30b8\u3092\u9078\u629e\u3057\u307e\u3057\u305f\u3002\n\n`ENV`\u30b3\u30de\u30f3\u30c9\u306f\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3067`APP_ROOT`\u3068\u3044\u3046\u5909\u6570\u306b`/my_app`\u3068\u3044\u3046\u6587\u5b57\u5217\u3092\u683c\u7d0d\u3057\u3066\u3044\u307e\u3059\u3002\n\n`RUN`\u30b3\u30de\u30f3\u30c9\u306f\u3092\u4eca\u56de\u3060\u3068ruby\u306e\u5165\u3063\u305f\u30b3\u30f3\u30c6\u30ca\u5185\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u5b9f\u884c\u3059\u308b\u611f\u3058\u3067\u3001`apt-get`\u3067`nodejs`\u306a\u3069\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u3001\u4f5c\u696d\u7528\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u3063\u3066\u305d\u3053\u3092`WORKDIR`\u30b3\u30de\u30f3\u30c9\u3067\u8d77\u70b9\u3068\u3057\u307e\u3059\u3002\u305d\u306e\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b`ADD`\u30b3\u30de\u30f3\u30c9\u3067\u81ea\u5206\u306e\u30ed\u30fc\u30ab\u30eb\u306e`Gemfile`\u3068`Gemfile.lock`\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3001\u30b3\u30f3\u30c6\u30ca\u5185\u3067`bundle install`\u3092\u5b9f\u884c\u3057\u305f\u5f8c\u3001\u4ed6\u306e\u30ed\u30fc\u30ab\u30eb\u306e\u30d5\u30a1\u30a4\u30eb\u3059\u3079\u3066\u3092\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u30b3\u30d4\u30fc\u3057\u3066\u3044\u307e\u3059\u3002\n\n#### <i class=\"fa fa-smile-o\"></i> \u30e1\u30e2\n\u4ed6\u306e\u30b5\u30a4\u30c8\u3067\u306f`Gemfile`\u3092`/tmp`\u30d5\u30a9\u30eb\u30c0\u306b\u30b3\u30d4\u30fc\u3057\u3066`bundle install`\u3092\u3059\u308b\u3053\u3068\u3067\u9ad8\u901f\u5316\u3057\u3066\u3044\u308b\u4f8b\u304c\u3042\u308a\u307e\u3059\u304c\u3001Docker 1.1\u4ee5\u4e0a\u304b\u3089\u306f`ADD`\u30b3\u30de\u30f3\u30c9\u306b\u30ad\u30e3\u30c3\u30b7\u30e5\u6a5f\u80fd\u304c\u5897\u3048\u305f\u306e\u3067\u3001\u5909\u66f4\u304c\u306a\u3051\u308c\u3070\u3001\u518d\u30d3\u30eb\u30c9\u3092\u3057\u3066\u3082\u9ad8\u901f\u3067\u884c\u3048\u307e\u3059\u3002\n\n\u540c\u69d8\u306e\u7406\u7531\u3067\u3001`ADD . $APP_ROOT`\u30b3\u30de\u30f3\u30c9\u3067\u3001\u30ed\u30fc\u30ab\u30eb\u306e\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5168\u3066\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u30b3\u30d4\u30fc\u3092\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u3053\u3053\u3067\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u7b49\u3082\u30b3\u30d4\u30fc\u3057\u3066\u3057\u307e\u3046\u3068\u3001\u5909\u66f4\u3092\u52a0\u3048\u3066\u3044\u306a\u3044\u306e\u306b\u518d\u30d3\u30eb\u30c9\u304c\u8d70\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u306e\u3067\u30b3\u30d4\u30fc\u5bfe\u8c61\u304b\u3089\u660e\u793a\u7684\u306b\u5916\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\u3053\u308c\u306f`.dockerignore`\u3067\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\n\n```bash:.dockerignore\n## Rails\npublic/assets/*\n.ruby-version\n.env\n\n## Environment normalisation:\n.bundle\nvendor/bundle\n.git*\n\n## log\nlog/*\ntmp/*\n\n## OSX\n.DS_Store\n\n## docker\n.dockerignore\n```\n\n### <i class=\"fa fa-file-code-o\"></i>  docker-compose\u3067\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\n\u3061\u306a\u307f\u306b...\n> \u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u3068\u306f\u3001\u8907\u96d1\u306a\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30b7\u30b9\u30c6\u30e0/\u30df\u30c9\u30eb\u30a6\u30a7\u30a2/\u30b5\u30fc\u30d3\u30b9\u306e\u914d\u5099/\u8a2d\u5b9a/\u7ba1\u7406\u306e\u81ea\u52d5\u5316\u3092\u6307\u3059\u7528\u8a9e\n\n\u304a\u6065\u305a\u304b\u3057\u3044\u3067\u3059\u304c\u3001\u610f\u5473\u304c\u5206\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u30b0\u30b0\u308a\u307e\u3057\u305f\u3002docker-compose\u3067\u8272\u3005\u306a\u30b5\u30fc\u30d3\u30b9(Postgres, Redis, Nginx, etc...)\u306a\u3069\u3092\u4e00\u62ec\u3067\u8a2d\u5b9a\u30fb\u8d77\u52d5\u3059\u308b\u306e\u3067\u3001\u3057\u3063\u304f\u308a\u304d\u307e\u3059\u306d\u3002\n\n```bash:docker-compose.yml\nversion: '2'\nservices:\n  db:\n    image: postgres\n    ports:\n      - \"5432\"\n  redis:\n    image: redis:latest\n    ports:\n      - 6379:6379\n  web:\n    build: .\n    command: bundle exec rails s -p 3000 -b 0.0.0.0\n    ports:\n      - \"3000:3000\"\n    links:\n      - db\n      - redis\n    environment:\n      DATABASE_USER: postgres\n      DATABASE_PASSWORD:\n      DATABASE_PORT: 5432\n      DATABASE_HOST: db\n      REDIS_URL: redis://redis:6379\n```\n\n`version '2'`\u3084\u3001\u306f\u3058\u3081\u306e`services`\u306fDocker1.5\u7cfb\u4ee5\u964d\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u5fc5\u8981\u306a\u304a\u307e\u3058\u306a\u3044\u3060\u3068\u601d\u3063\u3066\u304f\u3060\u3055\u3044\u3002`services`\u306e\u4e0b\u306e\u968e\u5c64\u306e`db`, `redis`, `web`\u306f\u305d\u308c\u305e\u308c\u30b5\u30fc\u30d3\u30b9\u540d\u3092\u610f\u5473\u3057\u3066\u3044\u3066\u3001\u3053\u306e\u540d\u524d\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u7acb\u3061\u4e0a\u304c\u3063\u3066\u3001\u305d\u308c\u4ee5\u4e0b\u306e\u5185\u5bb9\u304c\u305d\u306e\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u5b9f\u73fe\u3055\u308c\u308b\u611f\u3058\u3067\u3059\u3002\n\nRedis\u30b3\u30f3\u30c6\u30ca\u3068DB\u30b3\u30f3\u30c6\u30ca\u306f\u3001`redis`\u3068`postgres`\u306f\u516c\u5f0f\u306e\u30a4\u30e1\u30fc\u30b8\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u3092\u305d\u306e\u307e\u307e\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\nRails\u30b3\u30f3\u30c6\u30ca\u306fDockerfile\u3067\u5148\u7a0b\u6e96\u5099\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3092`build: .`\u3067\u6307\u5b9a\u3057\u3066\u3001~~`links`\u3067DB\u30b3\u30f3\u30c6\u30ca\u3068Redis\u30b3\u30f3\u30c6\u30ca\u3092\u540c\u6642\u306b\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002~~`environment`\u306f\u3001\u305d\u306e\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u4f7f\u7528\u3067\u304d\u308b\u74b0\u5883\u5909\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u3066\u307e\u3059\u3002\n\n> docker-compose\u3067\u5b9a\u7fa9\u3057\u305fservice\u306f\u540c\u4e00\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u914d\u4e0b\u306b\u7f6e\u304b\u308c\u308b\u306e\u3067\u3001`links`\u3067\u5b9a\u7fa9\u3057\u306a\u304f\u3066\u3082\u3001\u304a\u4e92\u3044\u306e\u30db\u30b9\u30c8\u540d\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u308b\u306e\u3067\u3001\u8a18\u8ff0\u3057\u306a\u304f\u3066\u3082\u5927\u4e08\u592b\u306a\u305d\u3046\u3067\u3059\u3002\n\n@hidekuro \u3055\u3093\u306b\u30b3\u30e1\u30f3\u30c8\u3067\u8a02\u6b63\u3057\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\n\n#### <i class=\"fa fa-smile-o\"></i> \u30e1\u30e2\n`image: postgres`\u3068\u516c\u5f0f\u306epostgres\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u6b63\u5f0f\u306a\u66f8\u304d\u65b9\u306f`\u30a4\u30e1\u30fc\u30b8\u540d:\u30bf\u30b0\u540d`\u3067\u3059\u3002\u3053\u306e\u3088\u3046\u306b\u30bf\u30b0\u540d\u3092\u7701\u7565\u3057\u305f\u5834\u5408\u306f\u3001`postgres:latest`\u3068\u540c\u3058\u3068\u307f\u306a\u3055\u308c\u3066\u6700\u65b0\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u9069\u7528\u3055\u308c\u307e\u3059\u3002\u306a\u306e\u3067\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u304b\u3089\u898b\u3064\u3051\u308b\u3068\u3044\u3044\u3067\u3057\u3087\u3046\u3002\n\nhttps://hub.docker.com/_/postgres/\n\n`ports`\u306fDocker\u5185\u5916\u306b\u30dd\u30fc\u30c8\u3092\u958b\u653e\u3059\u308b\u8a2d\u5b9a\u3067Rails\u30b3\u30f3\u30c6\u30ca\u306f\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3057\u305f\u308a\u3059\u308b\u306e\u3067\u3001`ports`\u3067\u30dd\u30fc\u30c8\u3092\u958b\u653e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001`Redis`\u30b3\u30f3\u30c6\u30ca\u3084`DB`\u30b3\u30f3\u30c6\u30ca\u306f`Rails`\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u3057\u304b\u30a2\u30af\u30bb\u30b9\u3057\u306a\u3044\u306a\u3089\u3001`expose`\u3067Docker\u5185\u306e\u4ed6\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u5411\u3051\u3066\u30dd\u30fc\u30c8\u3092\u958b\u653e\u3059\u3079\u304d\u304b\u3082\u3057\u308c\u306a\u3044\u3067\u3059\u3002\n\n`postgres`\u3068`redis`\u306e\u516c\u5f0f\u30a4\u30e1\u30fc\u30b8\u306f`ports`\u3092\u6307\u5b9a\u3057\u306a\u304f\u3066\u3082\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u305d\u308c\u305e\u308c`5432`\u3068`6379`\u3092\u6307\u3057\u307e\u3059\u304c\u3001\u660e\u793a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n### <i class=\"fa fa-file-code-o\"></i> Rails\u306eDB\u306e\u8a2d\u5b9a\n\n\u4eca\u56de\u306f\u524d\u63d0\u3068\u3057\u3066\u3001\u958b\u767a\u74b0\u5883\u3067\u306fsqlite3\u3092\u4f7f\u7528\u3057\u3066\u3044\u305f\u306e\u3067\u3001\u307e\u305a\u305d\u308c\u3092postgres\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\u305d\u306e\u6b21\u306b\u3001Rails\u30b3\u30f3\u30c6\u30ca\u3068Docker\u3067\u7528\u610f\u3057\u305fDB\u30b3\u30f3\u30c6\u30ca\u306f\u5225\u306e\u30b3\u30f3\u30c6\u30ca\u306a\u306e\u3067\u3001`database.yml`\u3092\u66f8\u304d\u63db\u3048\u3066\u63a5\u7d9a\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n#### sqlite3 <i class=\"fa fa-long-arrow-right\"></i> postgres\n`Gemfile`\u304b\u3089`sqlite3`\u3092\u524a\u9664\u3057\u3066\u3001\u672c\u756a\u74b0\u5883\u306e\u307f\u306b\u8a18\u8ff0\u3057\u3066\u3044\u305f`pg`\u3092\u4e0a\u306b\u6301\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n\n```ruby:Gemfile\n+ gem 'pg'\n\ngroup :development, :test do\n-  gem 'sqlite3'\nend\n\ngroup :production do\n-  gem 'pg'\nend\n```\n\n#### <i class=\"fa fa-file-code-o\"></i> `database.yml`\n\n\u74b0\u5883\u5909\u6570\u3092\u591a\u69d8\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u306e\u4e2d\u8eab\u306f\u5148\u307b\u3069`docker-compose.yml`\u3067\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u6539\u3081\u3066\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\nDATABASE_USER: postgres\nDATABASE_PASSWORD:\nDATABASE_PORT: 5432\nDATABASE_HOST: db\n```\n\nHOST\u540d\u3084USER, PASSWORD\u306f\u3053\u308c\u3058\u3083\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\uff1f\u3068\u601d\u3063\u305f\u65b9\u306f\u4e0b\u8a18\u306e\u30e1\u30e2\u6b04\u306b\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u81ea\u5206\u3082\u7d50\u5c40\u4ed6\u306e\u65b9\u6cd5\u306f\u3088\u304f\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u3067\u884c\u304d\u307e\u3057\u305f...\n\n```yaml:database.yml\ndefault: &default\n  adapter: postgresql\n  encoding: unicode\n  timeout: 5000\n  port: <%= ENV.fetch('DATABASE_PORT') { 5432 } %>\n  host: <%= ENV.fetch('DATABASE_HOST') { 'localhost' } %>\n  username: <%= ENV.fetch('DATABASE_USER') { 'root' } %>\n  password: <%= ENV.fetch('DATABASE_PASSWORD') { 'password' } %>\n  pool: <%= ENV.fetch('RAILS_MAX_THREADS') { 5 } %>\n\ndevelopment:\n  <<: *default\n  database: myapp_development\n\ntest:\n  <<: *default\n  database: myapp_test\n```\n\n\n#### <i class=\"fa fa-code-o\"></i> `redis`\u306e\u8a2d\u5b9a\n\n`database.yml`\u3067\u74b0\u5883\u5909\u6570\u306b`REDIS_URL: redis://redis:6379`\u3068\u8a2d\u5b9a\u3057\u307e\u3057\u305f\u3002\u306a\u306e\u3067\u3001redis\u306e\u521d\u671f\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\n\n```ruby:config/initialize/redis.rb\nREDIS ||= Redis.new(url: ENV['REDIS_URL'] || 'redis://localhost:6379')\n```\n\n\u3053\u3053\u306f\u9069\u5b9c\u3001\u81ea\u5206\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n#### <i class=\"fa fa-smile-o\"></i> \u30e1\u30e2\n\u4eca\u56de\u306f\u516c\u5f0f\u306e`Postgres`\u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u304c\u3001[\u672c\u5bb6\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u65e5\u672c\u8a9e\u8a33](http://docs.docker.jp/compose/rails.html#id3)\u306b\u3088\u308b\u3068\n\n>\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306f localhost \u3067\u5b9f\u884c\u3059\u308b\u3068\u307f\u306a\u3055\u308c\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001db \u30b3\u30f3\u30c6\u30ca\u306b\u6307\u793a\u3057\u306a\u304f\u3066\u306f\u3044\u3051\u307e\u305b\u3093\u3002postgres \u30a4\u30e1\u30fc\u30b8\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b database \u3068 username \u306b\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3068\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u6c17\u4ed8\u304b\u305a\u304b\u306a\u308a\u30cf\u30de\u308a\u307e\u3057\u305f\u3002\u305d\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306edatabase\u3068username\u306f\n\n```\ndevelopment: &default\n  adapter: postgresql\n  encoding: unicode\n  database: postgres\n  pool: 5\n  username: postgres\n  password:\n  host: db\n```\n\n\u3068\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u53c2\u8003\u306b\u3000database.yml\u3092\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\n\n\u307e\u305f\u3001\u4e0a\u8a18\u3067REDIS\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u3001`redis://redis:6379`\u3067Redis\u30b3\u30f3\u30c6\u30ca\u306b\u3001`database.yml`\u3067\u306f`host: db`\u3067DB\u30b3\u30f3\u30c6\u30ca\u306bRails\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u63a5\u7d9a\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306b\u3082Docker\u306e\u304a\u304b\u3052\u3067\u3059\u3002\n`docker-compose.yml`\u3067links\u3092\u66f8\u304f\u3068\u3001\u30b3\u30f3\u30c6\u30ca\u5185\u306e`/etc/hosts`\u306b\u6307\u5b9a\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u540d\u3068\u305d\u306eip\u30a2\u30c9\u30ec\u30b9\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\u4ee5\u4e0b\u306f\u4f8b\u3067\u3059\u3002\n\n```bash:/etc/hosts\n172.17.0.6  db\n172/17/0.4  redis\n```\n\n\u3053\u306e\u3088\u3046\u306b\u3001\u4eca\u56de\u6307\u5b9a\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u540d\u304c\u30a8\u30a4\u30ea\u30a2\u30b9\u3068\u306a\u3063\u3066\u3001ip\u30a2\u30c9\u30ec\u30b9\u3092\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u3067\u3001`host: db`\u3068\u30b3\u30f3\u30c6\u30ca\u540d\u3092\u5165\u529b\u3057\u305f\u308a\u3001`redis://redis:6379`\u3067\u4ed6\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u307e\u3057\u305f\u3002\u308f\u3056\u308f\u3056ip\u30a2\u30c9\u30ec\u30b9\u3068\u304b\u6c17\u306b\u3057\u306a\u304f\u3066\u3044\u3044\u306e\u306f\u697d\u3067\u3059\u306d\uff01\uff01\n\n## <i class=\"fa fa-cubes\"></i> \u5b9f\u884c\u3057\u3066\u307f\u3088\u3046!\n\u3053\u308c\u3067\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n```bash\n$ docker-compose build\n... # \u3053\u308c\u3067\u8a2d\u5b9a\u3057\u305fpostgres\u3084ruby\u3084\u3089\u8272\u3005\u306a\u30a4\u30e1\u30fc\u30b8\u3068\u304b\u3092\u53d6\u3063\u3066\u304f\u308b\n... # \u4f55\u3082\u30a8\u30e9\u30fc\u304c\u7121\u3051\u308c\u3070\u3001\u74b0\u5883\u69cb\u7bc9\u5b8c\u4e86\u306a\u306e\u3067\u3001Rails\u30a2\u30d7\u30ea\u306eDB\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\n$ docker-compose run web rake db:create\n$ docker-compose run web rake db:migrate\n... # docker-compose run <\u30b5\u30fc\u30d3\u30b9\u540d> <\u30b3\u30de\u30f3\u30c9>\n... # \u4e0a\u306e\u69cb\u6587\u3067\u30b5\u30fc\u30d3\u30b9\u540d\u306e\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3067\u304d\u308b\n$ docker-compose up\n```\n\n\u3053\u308c\u3067\u5168\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u8d77\u52d5\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n```\nweb_1    | => Booting Puma\nweb_1    | => Rails 5.0.1.rc2 application starting in development on http://0.0.0.0:3000\nweb_1    | => Run `rails server -h` for more startup options\nweb_1    | Puma starting in single mode...\nweb_1    | * Version 3.6.2 (ruby 2.3.3-p222), codename: Sleepy Sunday Serenity\nweb_1    | * Min threads: 5, max threads: 5\nweb_1    | * Environment: development\nweb_1    | * Listening on tcp://0.0.0.0:3000\nweb_1    | Use Ctrl-C to stop\n```\n\n\u30ed\u30b0\u306e\u901a\u308a\u3001`http://0.0.0.0:3000`\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308c\u3070\u3001\u3061\u3083\u3093\u3068\u52d5\u3044\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\uff01\uff01\u3053\u308c\u306b\u3066\u5b8c\u4e86...\u3067\u306f\u306a\u3044\u3093\u3067\u3059\u5b9f\u306f(\u00b4\u30fb\u03c9\u30fb\uff40)\u3059\u3044\u307e\u305b\u3093\u3002\n\n### \u3053\u306e\u307e\u307e\u3060\u3068build\u3059\u308b\u305f\u3073\u306b\u30c7\u30fc\u30bf\u304c\u6d88\u3048\u3066\u3057\u307e\u3046!!\n\n\u3053\u306e\u307e\u307e\u3060\u3068\u3001Redis\u3084Postgres\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u518d\u8d77\u52d5\u3059\u308b\u305f\u3073\u306b\u4e2d\u306b\u5165\u3063\u3066\u3044\u305f\u30c7\u30fc\u30bf\u304c\u6d88\u3048\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u306a\u306e\u3067\u3001Docker\u306e\u6a19\u6e96\u306eAPI\u3092\u7528\u3044\u3066volumes\u3067\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\u4eca\u56de\u306fpostgres\u3068redis\u306e\u30c7\u30fc\u30bf\u3092\u6c38\u7d9a\u5316\u3057\u3066\u307b\u3057\u3044\u306e\u3067\u3001\u305d\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n```yaml:docker-compose.yml\nversion: '2'\nservices:\n  db:\n    image: postgres\n    ports:\n      - \"5432\"\n    volumes:\n      - ./data/postgres:/var/lib/postgresql/data\n  redis:\n    image: redis:latest\n    ports:\n      - 6379:6379\n    volumes:\n      - ./data/redis:/data\n    command: redis-server --appendonly yes\n```\n\nDB\u30b3\u30f3\u30c6\u30ca\u3068Redis\u30b3\u30f3\u30c6\u30ca\u306bvolumes\u3068Redis\u30b3\u30f3\u30c6\u30ca\u306b\u306fcommand\u3092\u4ed8\u4e0e\u3057\u307e\u3057\u305f\u3002volumes\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3057\u3066\u30db\u30b9\u30c8\u5074\u306e\u30d1\u30b9\u3068\u30b3\u30f3\u30c6\u30ca\u5074\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3057\u3066\u3001\u30db\u30b9\u30c8\u5074\u306e\u305d\u306e\u30d1\u30b9\u306b\u30b3\u30f3\u30c6\u30ca\u5074\u306e\u30d1\u30b9\u3092\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u3001\u30b3\u30f3\u30c6\u30ca\u304c\u518d\u8d77\u52d5\u3057\u305f\u6642\u306b\u3001\u81ea\u5206\u306e\u30ed\u30fc\u30ab\u30eb\u306e\u65b9\u306b\u3082\u4fdd\u5b58\u3055\u308c\u305f\u30c7\u30fc\u30bf\u304c\u30b3\u30f3\u30c6\u30ca\u5074\u306b\u3082\u540c\u671f\u3055\u308c\u3066\u3001\u305d\u308c\u3092\u8aad\u307f\u8fbc\u3093\u3060\u72b6\u614b\u304b\u3089\u30b9\u30bf\u30fc\u30c8\u3059\u308b...\u307f\u305f\u3044\u306a\u611f\u3058\u306b\u306a\u308b\u306e\u3067\u3001\u30c7\u30fc\u30bf\u3092\u6c38\u7d9a\u5316\u3067\u304d\u307e\u3059\u3002\n\n`volumes: <\u30db\u30b9\u30c8\u306e\u30d1\u30b9>:<\u30b3\u30f3\u30c6\u30ca\u306e\u30d1\u30b9>`\n\n`redis`\u306f\u521d\u671f\u8d77\u52d5\u6642\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5909\u66f4\u3057\u3066`--appendonly yes`\u3068\u3044\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3092\u3064\u3051\u306a\u3044\u3068\u30c7\u30fc\u30bf\u304c\u751f\u6210\u3055\u308c\u306a\u3044\u3089\u3057\u3044\u306e\u3067\u3001\u6c17\u3092\u3064\u3051\u3066\u304f\u3060\u3055\u3044\u3002\n`redis`\u306f`/data`\u306b\u3001`postgres`\u306f`/var/lib/postgresql/data`\u306b\u30c7\u30fc\u30bf\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308c\u3070\u3044\u3044\u306e\u3067\u3001\u4ee5\u4e0a\u306e\u3088\u3046\u306b\u7de8\u96c6\u3059\u308c\u3070\u3001\u5b8c\u4e86\u3067\u3059\uff01\n\n## <i class=\"fa fa-bug\"></i> \u30cf\u30de\u3063\u305f\u4e8b\u4e00\u89a7\n\n### `A server is already running`\nDocker\u306e\u74b0\u5883\u304c\u51fa\u6765\u3066,`docker-compose build`\u3082\u51fa\u6765\u3066\u3001\u3044\u3056`docker-compose up`\u3058\u3083\u3042\uff5e\uff01\u3063\u3066\u306a\u3063\u305f\u3089\u9854\u3092\u51fa\u3057\u305f\u30a8\u30e9\u30fc\u3002\n\n```\nweb_1    | => Booting Puma\nweb_1    | => Rails 5.0.1.rc2 application starting in development on http://0.0.0.0:3000\nweb_1    | => Run `rails server -h` for more startup options\nweb_1    | A server is already running. Check /myapp/tmp/pids/server.pid.\nweb_1    | Exiting\n```\n\n\u3059\u3067\u306b\u30b5\u30fc\u30d0\u30fc\u304c\u7acb\u3063\u3066\u3044\u308b\u3088\u3068\u3044\u3046\u3002\u3067\u3082\u3001`pa aux | grep 3000`\u3067\u63a2\u3057\u3066\u307f\u3066\u3082\u3001`docker ps -a | grep 3000`\u3067\u63a2\u3057\u3066\u307f\u3066\u3082\u5225\u306b\u30d7\u30ed\u30bb\u30b9\u306f\u7acb\u3063\u3066\u3044\u306a\u3055\u305d\u3046\u3002\u3002\n\u3053\u308c\u306e\u539f\u56e0\u306fRails\u306eWEB\u30b5\u30fc\u30d0\u304c\u6b63\u5e38\u306b\u7d42\u4e86\u51fa\u6765\u3066\u3044\u306a\u3044\u3053\u3068\u306b\u3088\u308b\u305d\u3046\u3067\u3001\u672c\u6765\u306a\u3089pid\u306fWEB\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3059\u308b\u6642\u306b`tmp/pids/server.pid`\u306b\u66f8\u304d\u8fbc\u307e\u308c\u3066\u3001\u7d42\u4e86\u3059\u308b\u6642\u306b\u524a\u9664\u3055\u308c\u308b\u306f\u305a\u3060\u3051\u308c\u3069\u3001\u305d\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u306b\u4f55\u304b\u66f8\u304b\u308c\u3066\u3044\u308b\u304c\u305f\u3081\u306b\u3001WEB\u30b5\u30fc\u30d0\u304c\u8d77\u52d5\u4e2d\u3067\u3042\u308b\u3068\u8aa4\u8a8d\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u3088\u308b\u30a8\u30e9\u30fc\u306e\u3088\u3046\u3002\n\n`rm /tmp/pids/server.pid`\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u6d88\u305b\u3070\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3067\u304d\u307e\u3057\u305f\u3002`server.pid`\u306f\u306a\u3051\u308c\u3070\u3001\u751f\u6210\u3055\u308c\u308b\u306e\u3067\u6d88\u3057\u3066\u3082\u5927\u4e08\u592b\u3067\u3059\u3002\n\n### `Bundler::GemRequireError: There was an error while trying to load the gem 'uglifier'.`\n\nDockerfile\u3092\u5b9f\u884c\u6642\u306e`bundle install`\u3067\u3053\u3093\u306a\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u30b0\u30b0\u3063\u305f\u3089\u3001node.js\u304c\u5165\u3063\u3066\u3044\u308c\u3070\u5927\u4e08\u592b\u3063\u3066\u66f8\u3044\u3066\u3042\u3063\u305f\u306e\u3067\u3001`Dockerfile`\u306b`apt-get install nodejs`\u3092\u8ffd\u8a18\u3057\u305f\u3089\u76f4\u308a\u307e\u3057\u305f\u3002\u3053\u308c\u306f\u4e0a\u3067\u306f\u5bfe\u5fdc\u6e08\u307f\u3067\u3059\uff01\n\n## <i class=\"fa fa-support\"></i> docker\u306eTips\n\n### \u30a8\u30e9\u30fc\u304c\u8d77\u304d\u305f\u3089\u30ed\u30b0\u3092\u898b\u3088\u3046\n\n`docker-compose logs`\u3067\u5b9f\u884c\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u5185\u306e\u30ed\u30b0\u304c\u898b\u308c\u307e\u3059\u3002\u30b5\u30fc\u30d3\u30b9\u540d\u3092\u6307\u5b9a\u3057\u305f\u3044\u5834\u5408\u306f\u3001`docker-compose logs db`\u3068\u3059\u308c\u3070\u3001DB\u30b3\u30f3\u30c6\u30ca\u5185\u306e\u30ed\u30b0\u304c\u898b\u308c\u307e\u3059\u3002\n\n### \u4e0d\u8981\u306a\u30d7\u30ed\u30bb\u30b9\u3068\u30a4\u30e1\u30fc\u30b8\u3092\u524a\u9664\u3059\u308b\n\u3044\u307e\u8d77\u52d5\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u306f`docker images`\u30b3\u30de\u30f3\u30c9\u3067\u3001\u5b9f\u884c\u4e2d\u306e\u30d7\u30ed\u30bb\u30b9\u306f`docker ps`\u30b3\u30de\u30f3\u30c9\u3067\u5206\u304b\u308a\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u8d77\u52d5\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u308a\u3001\u3059\u3067\u306b\u5fc5\u8981\u306e\u306a\u3044\u30d7\u30ed\u30bb\u30b9\u3092\u524a\u9664\u3057\u306a\u3044\u3068\u4ee5\u5916\u3068\u5bb9\u91cf\u3092\u98df\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u5b9a\u671f\u7684\u306b\u4e0d\u8981\u306a\u30d7\u30ed\u30bb\u30b9\u3084\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3059\u308b\u3068\u3044\u3044\u3067\u3057\u3087\u3046\u3002\n\n\u30b9\u30c6\u30fc\u30bf\u30b9\u304cexited\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u524a\u9664\u3057\u3066\u3001\u30a4\u30e1\u30fc\u30b8\u540d\u304c<none>\u3068\u306a\u3063\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3059\u308b\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u3067\u3059\u3002\n\n`docker ps -aq -f \"status=exited\" | xargs docker rm -v && docker images -q -f \"dangling=true\" | xargs docker rmi`\n\n### `docker-compose` \u30b3\u30de\u30f3\u30c9\u3092\u77ed\u304f\u3059\u308b\n\u57fa\u672c\u7684\u306b\u4eca\u307e\u3067\u666e\u901a\u306b\u5b9f\u884c\u3057\u3066\u3044\u305f`rake db:migrate`\u306a\u3069\u306e\u30b3\u30de\u30f3\u30c9\u306f\u4eca\u56de\u69cb\u6210\u3057\u305fDocker\u30b3\u30f3\u30c6\u30ca\u4e0a\u3060\u3068`docker-compose run web rake db:migrate`\u3068\u3044\u3046\u3088\u3046\u306b\u304b\u306a\u308a\u9577\u304f\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u306a\u306e\u3067\u3001.zshrc\u3084.bashrc\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u3066\u30a8\u30a4\u30ea\u30a2\u30b9\u5316\u3057\u307e\u3057\u3087\u3046\u3002\n\n```\nalias fig='docker-compose'\n```\n\n## <i class=\"fa fa-cubes\"></i> \u3055\u3044\u3054\u306b\n\n\u304b\u306a\u308a\u9577\u6587\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093...\u3002\u81ea\u5206\u306a\u308a\u306b\u5f8c\u304b\u3089\u8aad\u307f\u8fd4\u3057\u3066\u3082\u7d0d\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u8a73\u3057\u304f\u66f8\u3044\u305f\u3064\u3082\u308a\u306a\u306e\u3067\u3001\u3082\u3057\u9593\u9055\u3063\u3066\u3044\u305f\u3089\u8a02\u6b63\u30ea\u30af\u30a8\u30b9\u30c8\u7b49\u3057\u3066\u3044\u305f\u3060\u3051\u308b\u3068\u5b09\u3057\u3044\u3067\u3059\uff01\n\ndocker\u306e[\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://docs.docker.com/)\u306f\u304b\u306a\u308a\u5145\u5b9f\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u8ff7\u3063\u305f\u3089\u307e\u305a\u305d\u3053\u3092\u898b\u308b\u306e\u304c\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u3068\u3044\u3063\u3066\u3001\u5168\u3066\u82f1\u8a9e\u306a\u306e\u3067\u3001\u3082\u3057\u3044\u304d\u306a\u308a\u306f\u53b3\u3057\u3044\u3068\u3044\u3046\u65b9\u304c\u3044\u307e\u3057\u305f\u3089\u3001[\u65e5\u672c\u8a9e\u8a33\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://docs.docker.jp/)\u3082\u3042\u308b\u306e\u3067\u305c\u3072\u4e00\u5ea6\u306f\u8aad\u3093\u3067\u307f\u3066\u304f\u3060\u3055\u3044\uff01\n\n\u3042\u3068\u3001\u66f8\u3044\u3066\u3044\u3066\u5b8c\u5168\u306bOthloTech\u306eAdventCalendar\u3068\u3044\u3046\u3053\u3068\u3092\u5fd8\u308c\u3066\u3044\u307e\u3057\u305f\u304c\u3001[OthloTech](http://www.othlo.tech)\u306f\u6765\u5e74\u3082\u6771\u6d77\u306eIT\u754c\u9688\u3092\u76db\u308a\u4e0a\u3052\u308b\u305f\u3081\u306b\u697d\u3057\u304f\u6d3b\u52d5\u3057\u3066\u3044\u304d\u307e\u3059\u306e\u3067\u3001\u5fdc\u63f4\u3057\u3066\u3044\u305f\u3060\u3051\u308b\u3068\u5b09\u3057\u3044\u3067\u3059\uff3c(^o^)\uff0f\n\n\n# (\u300d\uff9f\u30ed\uff9f)\u300d<<< { A Happy New Year \u266c\u266c \u266a}\n\n![hny.jpg](https://qiita-image-store.s3.amazonaws.com/0/85665/99d1a390-00c1-e02f-e4c3-7c6af6c4d3eb.jpeg)\n\n\n## <i class=\"fa fa-book\"></i> \u53c2\u8003\u30ea\u30f3\u30af\n- [2016\u5e74\u7248\u3001Docker\u306e\u3059\u3079\u3066\u304c5\u5206\u3067\u308f\u304b\u308b\u307e\u3068\u3081!(\u30b3\u30de\u30f3\u30c9\u4e00\u89a7\u4ed8\u304d)](http://paiza.hatenablog.com/entry/docker_intro)\n- [docker-compose \u3067 Rails \u306e\u958b\u767a\u74b0\u5883\u3092\u4f5c\u308b\n](http://qiita.com/skyriser/items/2cf98b747ed6577cc5ee)\n- [Docker Compose\u306b\u3088\u308bMySQL, Redis, nginx, Rails\u69cb\u6210\u306e\u8a2d\u5b9a\u4f8b](http://qiita.com/oshin/items/0d011610238eb4df83fd)\n- [docker-compose-rails-dev-example](https://github.com/vovimayhem/docker-compose-rails-dev-example)\n- [docker-compose\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b3\u30f3\u30c6\u30ca\u3092\u7acb\u3066\u308b\u3068\u304d\u306eTips](http://blog.muuny-blue.info/9f067d8d6df2d4b8c64fb4c084d6c208.html)\n- [Docker Compose - docker-compose.yml \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](http://qiita.com/zembutsu/items/9e9d80e05e36e882caaa)\n- [\u8907\u96d1\u306a\u69cb\u6210\u306erails\u30a2\u30d7\u30ea\u3092docker\u3067\u52d5\u304b\u3057\u305f\u3044\u5834\u5408\u306f\u3069\u3046\u3059\u308b\u3079\u304d\u304b](http://qiita.com/k-shogo/items/3c887cbf86b3cab85b72)\n", "tags": ["Rails", "docker", "docker-compose", "postgres"]}