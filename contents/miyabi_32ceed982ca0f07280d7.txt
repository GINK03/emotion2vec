{"context": "Ruby on Rails 5 with JDBC(MySQL)\u74b0\u5883\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u524d\u63d0\u6761\u4ef6\u3068\u3057\u3066\u3001MySQL Server\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u7a3c\u50cd\u3057\u3066\u304a\u308a\u3001\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9(jruby_schema\u3001jruby_schema_development)\u306f\u4f5c\u6210\u3057\u3066\u3044\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002\n\u307e\u305f\u4eca\u56de\u306f\u3001JDBC\u306fJAR\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n1. Git\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n[Linux]\n$ yum -y install git\n\n*root\u30e6\u30fc\u30b6\u30fc\u3082\u3057\u304f\u306fsudo\u3067\n[Mac]\n\n\nXcode\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nHomebrew\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\n2. rbenv\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(anyenv\u3067\u3082\u53ef)\n[Linux]\n$ git clone https://github.com/sstephenson/rbenv.git ~/.rbenv\n$ echo 'export PATH=\"$HOME/.rbenv/bin:$PATH\"' >> ~/.bash_profile\n$ echo 'eval \"$(rbenv init -)\"' >> ~/.bash_profile\n\n[Mac]\n$ brew install rbenv\n$ brew install ruby-build\n\n\n\u53c2\u8003\u30ea\u30f3\u30af\nrbenv \u3092\u4f7f\u3063\u3066 ruby \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b(CentOS\u7de8)\nMac\u306brbenv\u3067Ruby\u3092\u7c21\u5358\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u308b\n\n2. jruby\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u8a2d\u5b9a\n$ rbenv install --list\n  (\u4e2d\u7565)\n  jruby-9.1.3.0\n  jruby-9.1.4.0\n  jruby-9.1.5.0\n  maglev-1.0.0\n  maglev-1.1.0-dev\n  maglev-2.0.0-dev\n  (\u4e2d\u7565)\n$ rbenv install jruby-9.1.5.0\n$ rbenv rehash\n$ rbenv versions\n* system\n  jruby-9.1.5.0\n$ rbenv global jruby-9.1.5.0\n\n\n3. Gem\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ gem install bundler rails jdbc-mysql\n\n\n4. Rails\u30a2\u30d7\u30ea\u306e\u521d\u671f\u5316\n$ rbenv exec rails new test-app -d jdbcmysql\n$ cd test-app\n\n\n5. Gemfile\u306e\u5909\u66f4(jdbc\u306eRails5\u5bfe\u5fdc)\n\ntest-app/Gemfile\n# \u4e0b\u8a18\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n# gem 'activerecord-jdbc-adapter'\n# \u4e0b\u8a18\u3092\u8ffd\u8a18\ngem 'activerecord-jdbc-adapter', github: \"jruby/activerecord-jdbc-adapter\",\n                                 branch: \"rails-5\"\n# \u305f\u3060\u3057\u3001jdbc-mysql\u306f\u4eca\u56de\u4f7f\u308f\u306a\u3044\n# gem 'jdbc-mysql', github: 'jruby/activerecord-jdbc-adapter',\n#                   branch: 'rails-5'\n\n\n\n6. Gemfile\u306bjbunlder\u306e\u8ffd\u52a0\n\ntest-app/Gemfile\n# \u4ee5\u4e0b\u3092\u8ffd\u8a18\n# Use jbundler https://github.com/mkristian/jbundler\ngem 'jbundler', '>= 0.9.3'\n\n\n\n7. Gemfile\u306bjar-dependencies\u306e\u8ffd\u52a0\n\ntest-app/Gemfile\n# \u4e0b\u8a18\u3092\u8ffd\u8a18\n# Use jar-dependencies https://github.com/mkristian/jar-dependencies\ngem 'jar-dependencies', '>= 0.3.5'\n\n\n\n8. Gemfile\u306bdevelopment\u74b0\u5883\u5411\u3051gem\u3092\u8ffd\u8a18\n\ntest-app/Gemfile\n# \u4e0b\u8a18\u3092\u8ffd\u8a18\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platform: :mri\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using <%= console %> anywhere in the code.\n  gem 'web-console'\n  gem 'listen', '~> 3.0.5'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~> 2.0.0'\nend\n\n\n\n9. Jarfile\u3092\u8ffd\u52a0\n\ntest-app/Jarfile\n# \u4ee5\u4e0b\u3092\u8a18\u8ff0\u3057\u305fJarfile\u3092\u4fdd\u5b58\njar 'mysql:mysql-connector-java', '5.1.39'\n# 6.0.X\u3060\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\n\n\n\n10. bundler\u3067Gem\u3092\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ bundle install\n\n\n11. jbundler\u3067JAR(MySQL JDBC)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ jbundle install\n\n\n12. config/boot.rb\u306e\u4fee\u6b63\n\ntest-app/config/boot.rb(\u5909\u66f4\u524d)\nENV['BUNDLE_GEMFILE'] ||= File.expand_path('../Gemfile', __dir__)\n\nrequire 'bundler/setup' # Set up gems listed in the Gemfile.\n\n\n\ntest-app/config/boot.rb(\u5909\u66f4\u5f8c)\nENV['BUNDLE_GEMFILE'] ||= File.expand_path('../Gemfile', __dir__)\n#\u8ffd\u8a18\u958b\u59cb\nrequire 'jbundler' # Use jbundler for some JARs.\n#\u8ffd\u8a18\u7d42\u308f\u308a\nrequire 'bundler/setup' # Set up gems listed in the Gemfile.\n\n\n\n12. config/database.yaml\u306e\u4fee\u6b63\n\ntest-app/config/database.yaml\n# MySQL. Versions 5.0 and up are supported.\n#\n# Install the MySQL driver:\n#   gem install activerecord-jdbcmysql-adapter\n#\n# Configure Using Gemfile\n# gem 'activerecord-jdbcmysql-adapter'\n#\n# And be sure to use new-style password hashing:\n#   http://dev.mysql.com/doc/refman/5.7/en/old-client.html\n#\ndefault: &default\n  adapter: jdbc\n  jndi: jdbc/jruby\n  username: root\n  password: password\n  host: localhost\n  encoding: utf8\n  reconnect: true\n  pool: 8\n  driver: com.mysql.jdbc.Driver\n  url: jdbc:mysql://127.0.0.1:3306/jruby_schema\n  database: jruby_schema\n  properties:\n    autoReconnect: true\n    autoReconnectForPools: true\n    defaultFetchSize: 1000\n    requireSSL: false\n    useCursorFetch: true\n    useSSL: false\n    useUnicode: true\n\ndevelopment:\n  <<: *default\n  database: jruby_schema_development\n\n# Warning: The database defined as \"test\" will be erased and\n# re-generated from your development database when you run \"rake\".\n# Do not set this db to the same as development or production.\ntest:\n  <<: *default\n  database: jruby_schema_test\n\n# As with config/secrets.yml, you never want to store sensitive information,\n# like your database password, in your source code. If your source code is\n# ever seen by anyone, they now have access to your database.\n#\n# Instead, provide the password as a unix environment variable when you boot\n# the app. Read http://guides.rubyonrails.org/configuring.html#configuring-a-database\n# for a full rundown on how to provide these environment variables in a\n# production deployment.\n#\n# On Heroku and other platform providers, you may have a full connection URL\n# available as an environment variable. For example:\n#\n#   DATABASE_URL=\"mysql://myuser:mypass@localhost/somedatabase\"\n#\n# You can use this database configuration with:\n#\n#   production:\n#     url: <%= ENV['DATABASE_URL'] %>\n#\nproduction:\n  <<: *default\n\n\n\n\n13. Rails\u30a2\u30d7\u30ea\u3092\u30b9\u30bf\u30fc\u30c8\n$ jruby -S bin/rails s\n\nRuby on Rails 5 with JDBC(MySQL)\u74b0\u5883\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u524d\u63d0\u6761\u4ef6\u3068\u3057\u3066\u3001MySQL Server\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u7a3c\u50cd\u3057\u3066\u304a\u308a\u3001\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9(jruby_schema\u3001jruby_schema_development)\u306f\u4f5c\u6210\u3057\u3066\u3044\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002\n\u307e\u305f\u4eca\u56de\u306f\u3001JDBC\u306fJAR\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n## 1. Git\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n[Linux]\n\n```bash\n$ yum -y install git\n```\n*root\u30e6\u30fc\u30b6\u30fc\u3082\u3057\u304f\u306fsudo\u3067\n\n[Mac]\n\n- [Xcode](https://itunes.apple.com/jp/app/id497799835)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n- [Homebrew](http://brew.sh/index_ja.html)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n## 2. rbenv\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(anyenv\u3067\u3082\u53ef)\n[Linux]\n\n```bash\n$ git clone https://github.com/sstephenson/rbenv.git ~/.rbenv\n$ echo 'export PATH=\"$HOME/.rbenv/bin:$PATH\"' >> ~/.bash_profile\n$ echo 'eval \"$(rbenv init -)\"' >> ~/.bash_profile\n```\n\n[Mac]\n\n```bash\n$ brew install rbenv\n$ brew install ruby-build\n```\n\n### \u53c2\u8003\u30ea\u30f3\u30af\n[rbenv \u3092\u4f7f\u3063\u3066 ruby \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b(CentOS\u7de8)](http://qiita.com/inouet/items/478f4228dbbcd442bfe8)\n[Mac\u306brbenv\u3067Ruby\u3092\u7c21\u5358\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u308b](http://qiita.com/dtlabo/items/4d5922b6c3e4face35b6)\n## 2. jruby\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u8a2d\u5b9a\n\n```bash\n$ rbenv install --list\n  (\u4e2d\u7565)\n  jruby-9.1.3.0\n  jruby-9.1.4.0\n  jruby-9.1.5.0\n  maglev-1.0.0\n  maglev-1.1.0-dev\n  maglev-2.0.0-dev\n  (\u4e2d\u7565)\n$ rbenv install jruby-9.1.5.0\n$ rbenv rehash\n$ rbenv versions\n* system\n  jruby-9.1.5.0\n$ rbenv global jruby-9.1.5.0\n```\n\n## 3. Gem\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ gem install bundler rails jdbc-mysql\n```\n\n## 4. Rails\u30a2\u30d7\u30ea\u306e\u521d\u671f\u5316\n\n```bash\n$ rbenv exec rails new test-app -d jdbcmysql\n$ cd test-app\n```\n\n## 5. Gemfile\u306e\u5909\u66f4(jdbc\u306eRails5\u5bfe\u5fdc)\n\n```ruby:test-app/Gemfile\n# \u4e0b\u8a18\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n# gem 'activerecord-jdbc-adapter'\n# \u4e0b\u8a18\u3092\u8ffd\u8a18\ngem 'activerecord-jdbc-adapter', github: \"jruby/activerecord-jdbc-adapter\",\n                                 branch: \"rails-5\"\n# \u305f\u3060\u3057\u3001jdbc-mysql\u306f\u4eca\u56de\u4f7f\u308f\u306a\u3044\n# gem 'jdbc-mysql', github: 'jruby/activerecord-jdbc-adapter',\n#                   branch: 'rails-5'\n```\n\n## 6. Gemfile\u306bjbunlder\u306e\u8ffd\u52a0\n\n```ruby:test-app/Gemfile\n# \u4ee5\u4e0b\u3092\u8ffd\u8a18\n# Use jbundler https://github.com/mkristian/jbundler\ngem 'jbundler', '>= 0.9.3'\n```\n\n## 7. Gemfile\u306bjar-dependencies\u306e\u8ffd\u52a0\n\n```ruby:test-app/Gemfile\n# \u4e0b\u8a18\u3092\u8ffd\u8a18\n# Use jar-dependencies https://github.com/mkristian/jar-dependencies\ngem 'jar-dependencies', '>= 0.3.5'\n```\n\n## 8. Gemfile\u306bdevelopment\u74b0\u5883\u5411\u3051gem\u3092\u8ffd\u8a18\n\n```ruby:test-app/Gemfile\n# \u4e0b\u8a18\u3092\u8ffd\u8a18\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platform: :mri\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using <%= console %> anywhere in the code.\n  gem 'web-console'\n  gem 'listen', '~> 3.0.5'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~> 2.0.0'\nend\n```\n\n## 9. Jarfile\u3092\u8ffd\u52a0\n\n```ruby:test-app/Jarfile\n# \u4ee5\u4e0b\u3092\u8a18\u8ff0\u3057\u305fJarfile\u3092\u4fdd\u5b58\njar 'mysql:mysql-connector-java', '5.1.39'\n# 6.0.X\u3060\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\n```\n\n## 10. bundler\u3067Gem\u3092\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```Bash\n$ bundle install\n```\n\n## 11. jbundler\u3067JAR(MySQL JDBC)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ jbundle install\n```\n\n## 12. config/boot.rb\u306e\u4fee\u6b63\n\n```ruby:test-app/config/boot.rb(\u5909\u66f4\u524d)\nENV['BUNDLE_GEMFILE'] ||= File.expand_path('../Gemfile', __dir__)\n\nrequire 'bundler/setup' # Set up gems listed in the Gemfile.\n```\n\n```ruby:test-app/config/boot.rb(\u5909\u66f4\u5f8c)\nENV['BUNDLE_GEMFILE'] ||= File.expand_path('../Gemfile', __dir__)\n#\u8ffd\u8a18\u958b\u59cb\nrequire 'jbundler' # Use jbundler for some JARs.\n#\u8ffd\u8a18\u7d42\u308f\u308a\nrequire 'bundler/setup' # Set up gems listed in the Gemfile.\n```\n\n## 12. config/database.yaml\u306e\u4fee\u6b63\n\n```yaml:test-app/config/database.yaml\n# MySQL. Versions 5.0 and up are supported.\n#\n# Install the MySQL driver:\n#   gem install activerecord-jdbcmysql-adapter\n#\n# Configure Using Gemfile\n# gem 'activerecord-jdbcmysql-adapter'\n#\n# And be sure to use new-style password hashing:\n#   http://dev.mysql.com/doc/refman/5.7/en/old-client.html\n#\ndefault: &default\n  adapter: jdbc\n  jndi: jdbc/jruby\n  username: root\n  password: password\n  host: localhost\n  encoding: utf8\n  reconnect: true\n  pool: 8\n  driver: com.mysql.jdbc.Driver\n  url: jdbc:mysql://127.0.0.1:3306/jruby_schema\n  database: jruby_schema\n  properties:\n    autoReconnect: true\n    autoReconnectForPools: true\n    defaultFetchSize: 1000\n    requireSSL: false\n    useCursorFetch: true\n    useSSL: false\n    useUnicode: true\n\ndevelopment:\n  <<: *default\n  database: jruby_schema_development\n\n# Warning: The database defined as \"test\" will be erased and\n# re-generated from your development database when you run \"rake\".\n# Do not set this db to the same as development or production.\ntest:\n  <<: *default\n  database: jruby_schema_test\n\n# As with config/secrets.yml, you never want to store sensitive information,\n# like your database password, in your source code. If your source code is\n# ever seen by anyone, they now have access to your database.\n#\n# Instead, provide the password as a unix environment variable when you boot\n# the app. Read http://guides.rubyonrails.org/configuring.html#configuring-a-database\n# for a full rundown on how to provide these environment variables in a\n# production deployment.\n#\n# On Heroku and other platform providers, you may have a full connection URL\n# available as an environment variable. For example:\n#\n#   DATABASE_URL=\"mysql://myuser:mypass@localhost/somedatabase\"\n#\n# You can use this database configuration with:\n#\n#   production:\n#     url: <%= ENV['DATABASE_URL'] %>\n#\nproduction:\n  <<: *default\n\n```\n## 13. Rails\u30a2\u30d7\u30ea\u3092\u30b9\u30bf\u30fc\u30c8\n\n```bash\n$ jruby -S bin/rails s\n```\n", "tags": ["Rails", "RubyOnRails", "JRuby", "JDBC", "MySQL"]}