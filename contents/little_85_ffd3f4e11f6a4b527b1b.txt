{"context": "\n\n\u306f\u3058\u3081\u306b\nTD\u3092\u696d\u52d9\u3067\u3064\u304b\u3063\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u30ab\u30e9\u30e0\u306barray\u304c\u5165\u3063\u3066\u3044\u308b\u5834\u5408\u306bwhere\u3067\u3069\u306e\u3088\u3046\u306b\u4f7f\u3046\u304b\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u8abf\u3079\u305f\u6642\u306e\u30e1\u30e2\n\n\u4f7f\u7528\u30c7\u30fc\u30bf\n\u4f8b\u3068\u3057\u3066\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30c7\u30fc\u30bf\u3092\u3064\u304b\u3044\u307e\u3059\ntable_name: user_values\n\n\n\nuser_id(Int)\nvalues(Array)\n\n\n\n\n1\n[\"123\",\"abc\"]\n\n\n2\n[\"123\", \"bcd\"]\n\n\n3\n[\"789\", \"cde\"]\n\n\n\n\u3053\u306euser_values\u306f\u305d\u306e\u307e\u307e\u3060\u3068where\u3067\u4f7f\u3048\u306a\u3044\u306e\u3067\u3001array\u3092\u5c55\u958b\u3059\u308b\nselect count(user_id) AS user_cnt from user_fruits\nLATERAL VIEW explode(values) exploded_values AS data\n WHERE data = '123'\n\n\u3068\u3059\u308b\u3068\n\n\n\nuser_id\ndata\n\n\n\n\n1\n123\n\n\n1\nabc\n\n\n2\n123\n\n\n2\nbcd\n\n\n3\n789\n\n\n3\ncde\n\n\n\n\u3068\u3044\u3046\u3088\u3046\u306b\u7d50\u5408\u3055\u308c\u308b\u306e\u3067\n\u2191\u306e\u30af\u30a8\u30ea\u306e\u7d50\u679c\u306f\n\n\n\nuser_cnt\n\n\n\n\n2\n\n\n\n\u3068\u304b\u306a\u308b\u3089\u3057\u3044\n\u3078\u30fc\n\narray\u304c\u9023\u60f3\u914d\u5217\u3060\u3063\u305f\u5834\u5408\n\n\n\nuser_id(Int)\nvalues(Array)\n\n\n\n\n1\n{\"key1\":\"val1\"}\n\n\n2\n{\"key2\":\"val2\"}\n\n\n3\n{\"key3\":\"val3\"}\n\n\n\nvalues\u306e\u5024\u304c\u9023\u60f3\u914d\u5217\nselect key, val from user_values\nLATERAL VIEW explode(values) exploded_values AS key, val\n\n\u3063\u3066\u3084\u308b\u3068\n\n\n\nkey\nval\n\n\n\n\nkey1\nval1\n\n\nkey2\nval2\n\n\nkey3\nval3\n\n\n\n\u3068\u304b\u3063\u3066\u8fd4\u3063\u3066\u304f\u308b\u3089\u3057\u3044\n\u3075\u3046\u3093\uff1f\n\n\u307e\u3068\u3081\u308b\n\u982d\u306b\u63cf\u304d\u3065\u3089\u304f\u3066\u306a\u304b\u306a\u304b\u899a\u3048\u3089\u308c\u306a\u305d\u3046\n\u3068\u308a\u3042\u3048\u305a\u300c\u3075\u3046\u3093\uff1f\u300d\u304f\u3089\u3044\u3057\u304b\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u30e1\u30e2\u3057\u3066\u304a\u304f\n# \u306f\u3058\u3081\u306b\nTD\u3092\u696d\u52d9\u3067\u3064\u304b\u3063\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u30ab\u30e9\u30e0\u306barray\u304c\u5165\u3063\u3066\u3044\u308b\u5834\u5408\u306bwhere\u3067\u3069\u306e\u3088\u3046\u306b\u4f7f\u3046\u304b\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u8abf\u3079\u305f\u6642\u306e\u30e1\u30e2\n\n# \u4f7f\u7528\u30c7\u30fc\u30bf\n\n\u4f8b\u3068\u3057\u3066\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30c7\u30fc\u30bf\u3092\u3064\u304b\u3044\u307e\u3059\n\ntable_name: user_values\n\n| user_id(Int) | values(Array) |\n|---------|---------|\n|1|[\"123\",\"abc\"]|\n|2|[\"123\", \"bcd\"]|\n|3|[\"789\", \"cde\"]|\n\n\u3053\u306euser_values\u306f\u305d\u306e\u307e\u307e\u3060\u3068where\u3067\u4f7f\u3048\u306a\u3044\u306e\u3067\u3001array\u3092\u5c55\u958b\u3059\u308b\n\n```sql\nselect count(user_id) AS user_cnt from user_fruits\nLATERAL VIEW explode(values) exploded_values AS data\n WHERE data = '123'\n```\n\n\u3068\u3059\u308b\u3068\n\n| user_id | data |\n|---------|---------|\n|1|123|\n|1|abc|\n|2|123|\n|2|bcd|\n|3|789|\n|3|cde|\n\n\u3068\u3044\u3046\u3088\u3046\u306b\u7d50\u5408\u3055\u308c\u308b\u306e\u3067\n\n\u2191\u306e\u30af\u30a8\u30ea\u306e\u7d50\u679c\u306f\n\n| user_cnt |\n|---------|\n|2|\n\n\u3068\u304b\u306a\u308b\u3089\u3057\u3044\n\n\u3078\u30fc\n\n## array\u304c\u9023\u60f3\u914d\u5217\u3060\u3063\u305f\u5834\u5408\n\n| user_id(Int) | values(Array) |\n|---------|---------|\n|1|{\"key1\":\"val1\"}|\n|2|{\"key2\":\"val2\"}|\n|3|{\"key3\":\"val3\"}|\n\nvalues\u306e\u5024\u304c\u9023\u60f3\u914d\u5217\n\n```sql\nselect key, val from user_values\nLATERAL VIEW explode(values) exploded_values AS key, val\n```\n\n\u3063\u3066\u3084\u308b\u3068\n\n| key | val |\n|---------|---------|\n|key1|val1|\n|key2|val2|\n|key3|val3|\n\n\u3068\u304b\u3063\u3066\u8fd4\u3063\u3066\u304f\u308b\u3089\u3057\u3044\n\u3075\u3046\u3093\uff1f\n\n# \u307e\u3068\u3081\u308b\n\u982d\u306b\u63cf\u304d\u3065\u3089\u304f\u3066\u306a\u304b\u306a\u304b\u899a\u3048\u3089\u308c\u306a\u305d\u3046\n\u3068\u308a\u3042\u3048\u305a\u300c\u3075\u3046\u3093\uff1f\u300d\u304f\u3089\u3044\u3057\u304b\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u30e1\u30e2\u3057\u3066\u304a\u304f\n", "tags": ["hive"]}