{"context": " More than 1 year has passed since last update.\n\n1. \u74b0\u5883\u524d\u63d0\n\u30db\u30b9\u30c8 : MacOSX + VirtualBox + Vagrant\n\u30b2\u30b9\u30c8 : CentOS6.5, Nginx, PHP\n192.168.33.20 \u3092 private network \u3067\u8a2d\u5b9a\n\n2. VM\u5074\u8ffd\u52a0\u8a2d\u5b9a\u3000\n\uff08\uff0a\u4eca\u56de\u306fVM\u74b0\u5883\u306b\u3066\u76f4\u63a5\u5b9f\u884c\u3002\u672c\u6765\u306fchef\u5316 or sh \u3067Vagrant provision\u3068\u3057\u305f\u3044\u3002\u5bbf\u984c\uff09\n\n(1) \u5171\u6709\u30d5\u30a9\u30eb\u30c0\u8a2d\u5b9a\n\u30db\u30b9\u30c8\u3068 \u30b2\u30b9\u30c8 VM \u306f\u3001\u4ee5\u4e0b\u624b\u9806\u3067synced folder \u3067nginx\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u3068\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5171\u6709\u8a2d\u5b9a\u3092\u3057\u3066\u304a\u304f\u3002\n\n\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u4f5c\u6210\n\n#\u4e00\u65e6\u524a\u9664\nsudo rm -rf /usr/share/nginx/html\n#\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\nsudo ln -fs /home/vagrant/html /usr/share/nginx/html\n\n\n\nVagrantfile\u306bsynced_folder\u306e\u8a2d\u5b9a\n\n\nVagrantfile\nconfig.vm.synced_folder \"src/\", \"/home/vagrant/html\"\n\n\n\n(2) Xdebug\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo yum -y install php-pecl-xdebug\n#\u78ba\u8a8d\nphp -v\n#\u7d50\u679c\u4ee5\u4e0b\u306e\u3088\u3046\u306bXdebug\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\u304c\u51fa\u529b\u3055\u308c\u308b\nPHP 5.5.26 (cli) \u30fb\u30fb\u30fb\nwith Xdebug v2.3.2, Copyright (c) 2002-2015, by Derick Rethans\n\nphp.ini\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\n\nphp.ini\n#\u30ea\u30e2\u30fc\u30c8\u30c7\u30d0\u30c3\u30af\u3092\u6709\u52b9\u306b\u3059\u308b\nxdebug.remote_enable = On\n#\u30ea\u30e2\u30fc\u30c8\u30c7\u30d0\u30c3\u30b0\u304c\u5e38\u306b\u958b\u59cb\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\nxdebug.remote_autostart = On\n\u30c7\u30d0\u30c3\u30b0\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e IP \u3092\u6307\u5b9a\nxdebug.remote_host = 192.168.33.1\n\n\n\n(3) \u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a\nexport PHP_IDE_CONFIG=\"serverName=192.168.33.20\"\n\n\n(4) \u3064\u3044\u3067\u306b\u30fb\u30fbPHPUnit\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nwget https://phar.phpunit.de/phpunit.phar\nchmod +x phpunit.pharPhpStorm\nsudo mv phpunit.phar /usr/local/bin/phpunit\nphpunit --version\n\n\n3. PhpStorm\u306e\u8a2d\u5b9a\n\n(1)PHPRemoteDebug\u8a2d\u5b9a\n\n\u2460\u8a2d\u5b9a\n\nPhpStorm \u30e1\u30cb\u30e5\u30fc\u2192[Run]\u2192[Edit Configurations\u2026]\u3000\u3067\u3001\n[Run/Debug Configurations] \u30c0\u30a4\u30a2\u30ed\u30b0\u3092\u958b\u304f\n[+] \u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001[PHP Remote Debug] \u3092\u9078\u629e\n\nServers \u306e\u53c2\u7167 ... \u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u3001\u30b5\u30fc\u30d0\u8a2d\u5b9a\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u884c\u3044\u3001 OK\u30dc\u30bf\u30f3\u3067\u767b\u9332\u3002\n\nServers \u306b\u8a2d\u5b9a\u3057\u305f\u30b5\u30fc\u30d0\u540d\u304c\u53cd\u6620\u3055\u308c\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3001session id \u306fdummy\u3067\u4f55\u304b\u5165\u308c\u3066\u3001OK\u30dc\u30bf\u30f3\u3067\u767b\u9332\u3002\n\n\n\n\u2461\u52d5\u4f5c\u78ba\u8a8d\n\nPhpStorm \u306b\u3066\u3000\u30ea\u30e2\u30fc\u30c8\u30c7\u30d0\u30c3\u30b0\u3092\u6709\u52b9\u306b\u3057\u3001\u6700\u521d\u306e\u884c\u3067Break\u3059\u308b\u7528\u306b\u8a2d\u5b9a\n[Run] \u2013 [Start Listen for PHP Debug Connections] \n[Run] \u2013 [Break at first line in PHP Scripts]\n\n\u8a2d\u5b9a\u5f8c\u306e\u72b6\u614b\n\n\n\u30d6\u30e9\u30a6\u30b6\u3067\u9069\u5f53\u306aphp\u30d5\u30a1\u30a4\u30eb\u3092\u53e9\u304f\n\u2192PhpStorm\u3067\u30c7\u30d0\u30c3\u30b0\u30e2\u30fc\u30c9\u306b\n\nCLI\u3067\u9069\u5f53\u306aphp\u30d5\u30a1\u30a4\u30eb\u3092\u53e9\u304f\n\nvagrant ssh \nphp XXX.php\n\n\u2192PhpStorm\u3067\u30c7\u30d0\u30c3\u30af\u30e2\u30fc\u30c9\u306b\u3002\n\n98.\u305d\u306e\u4ed6chef\u5316Todo\nsudo yum install php-mbstring\nsudo yum install php-xml\n\n99.\u53c2\u8003\u30da\u30fc\u30b8\nPhpStorm Advent Calendar 2013\nShin x blog PhpStorm \u304b\u3089 Vagrant VM \u306e PHP \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30ea\u30e2\u30fc\u30c8\u30c7\u30d0\u30c3\u30b0\u3059\u308b\uff08Web & CLI)\nPhpStorm 8 \u3067\u3001Vagrant VM \u306e PHPUnit \u3092 IDE \u304b\u3089\u5b9f\u884c\u3059\u308b\n\n#1. \u74b0\u5883\u524d\u63d0\n\u30db\u30b9\u30c8 : MacOSX + VirtualBox + Vagrant\n\u30b2\u30b9\u30c8 : CentOS6.5, Nginx, PHP\n192.168.33.20 \u3092 private network \u3067\u8a2d\u5b9a\n\n#2. VM\u5074\u8ffd\u52a0\u8a2d\u5b9a\u3000\n\uff08\uff0a\u4eca\u56de\u306fVM\u74b0\u5883\u306b\u3066\u76f4\u63a5\u5b9f\u884c\u3002\u672c\u6765\u306fchef\u5316 or sh \u3067Vagrant provision\u3068\u3057\u305f\u3044\u3002\u5bbf\u984c\uff09\n##(1) \u5171\u6709\u30d5\u30a9\u30eb\u30c0\u8a2d\u5b9a\n\u30db\u30b9\u30c8\u3068 \u30b2\u30b9\u30c8 VM \u306f\u3001\u4ee5\u4e0b\u624b\u9806\u3067synced folder \u3067nginx\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u3068\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5171\u6709\u8a2d\u5b9a\u3092\u3057\u3066\u304a\u304f\u3002\n\n+ \u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u4f5c\u6210\n\n```bash:\n#\u4e00\u65e6\u524a\u9664\nsudo rm -rf /usr/share/nginx/html\n#\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\nsudo ln -fs /home/vagrant/html /usr/share/nginx/html\n\n```\n\n+ Vagrantfile\u306bsynced_folder\u306e\u8a2d\u5b9a\n\n```bash:Vagrantfile\nconfig.vm.synced_folder \"src/\", \"/home/vagrant/html\"\n```\n\n#(2) Xdebug\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash:\nsudo yum -y install php-pecl-xdebug\n#\u78ba\u8a8d\nphp -v\n#\u7d50\u679c\u4ee5\u4e0b\u306e\u3088\u3046\u306bXdebug\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\u304c\u51fa\u529b\u3055\u308c\u308b\nPHP 5.5.26 (cli) \u30fb\u30fb\u30fb\nwith Xdebug v2.3.2, Copyright (c) 2002-2015, by Derick Rethans\n```\n\nphp.ini\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\n\n```bash:php.ini\n#\u30ea\u30e2\u30fc\u30c8\u30c7\u30d0\u30c3\u30af\u3092\u6709\u52b9\u306b\u3059\u308b\nxdebug.remote_enable = On\n#\u30ea\u30e2\u30fc\u30c8\u30c7\u30d0\u30c3\u30b0\u304c\u5e38\u306b\u958b\u59cb\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\nxdebug.remote_autostart = On\n\u30c7\u30d0\u30c3\u30b0\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e IP \u3092\u6307\u5b9a\nxdebug.remote_host = 192.168.33.1\n```\n\n##(3) \u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a\n```bash:\nexport PHP_IDE_CONFIG=\"serverName=192.168.33.20\"\n```\n\n##(4) \u3064\u3044\u3067\u306b\u30fb\u30fbPHPUnit\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash:\nwget https://phar.phpunit.de/phpunit.phar\nchmod +x phpunit.pharPhpStorm\nsudo mv phpunit.phar /usr/local/bin/phpunit\nphpunit --version\n```\n\n#3. PhpStorm\u306e\u8a2d\u5b9a\n##(1)PHPRemoteDebug\u8a2d\u5b9a\n###\u2460\u8a2d\u5b9a\n+ PhpStorm \u30e1\u30cb\u30e5\u30fc\u2192[Run]\u2192[Edit Configurations\u2026]\u3000\u3067\u3001\n[Run/Debug Configurations] \u30c0\u30a4\u30a2\u30ed\u30b0\u3092\u958b\u304f\n\n+ [+] \u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001[PHP Remote Debug] \u3092\u9078\u629e\n![Kobito.xjS5SV.png](https://qiita-image-store.s3.amazonaws.com/0/72578/21f9dbac-28cc-78b4-a52b-e689ebdcedfe.png \"Kobito.xjS5SV.png\")\n\n+  Servers \u306e\u53c2\u7167 ... \u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u3001\u30b5\u30fc\u30d0\u8a2d\u5b9a\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u884c\u3044\u3001 OK\u30dc\u30bf\u30f3\u3067\u767b\u9332\u3002\n![Kobito.NqpvfI.png](https://qiita-image-store.s3.amazonaws.com/0/72578/c1668185-bb4a-4047-1069-b686d86b8c4f.png \"Kobito.NqpvfI.png\")\n\n+ Servers \u306b\u8a2d\u5b9a\u3057\u305f\u30b5\u30fc\u30d0\u540d\u304c\u53cd\u6620\u3055\u308c\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3001session id \u306fdummy\u3067\u4f55\u304b\u5165\u308c\u3066\u3001OK\u30dc\u30bf\u30f3\u3067\u767b\u9332\u3002\n![Kobito.jfkFPp.png](https://qiita-image-store.s3.amazonaws.com/0/72578/816c30df-c8c0-cd14-7f71-b8910e6dbb68.png \"Kobito.jfkFPp.png\")\n\n###\u2461\u52d5\u4f5c\u78ba\u8a8d\n+ PhpStorm \u306b\u3066\u3000\u30ea\u30e2\u30fc\u30c8\u30c7\u30d0\u30c3\u30b0\u3092\u6709\u52b9\u306b\u3057\u3001\u6700\u521d\u306e\u884c\u3067Break\u3059\u308b\u7528\u306b\u8a2d\u5b9a\n+ [Run] \u2013 [Start Listen for PHP Debug Connections] \n+ [Run] \u2013 [Break at first line in PHP Scripts]\n\n\u8a2d\u5b9a\u5f8c\u306e\u72b6\u614b\n![Kobito.AJI6Ma.png](https://qiita-image-store.s3.amazonaws.com/0/72578/6ec29a77-7b4c-2de5-0e58-9baf7d9e0890.png \"Kobito.AJI6Ma.png\")\n\n+ \u30d6\u30e9\u30a6\u30b6\u3067\u9069\u5f53\u306aphp\u30d5\u30a1\u30a4\u30eb\u3092\u53e9\u304f\n\u2192PhpStorm\u3067\u30c7\u30d0\u30c3\u30b0\u30e2\u30fc\u30c9\u306b\n![Kobito.PhbScn.png](https://qiita-image-store.s3.amazonaws.com/0/72578/5cf8b355-078d-9d07-c894-d42c1459fd99.png \"Kobito.PhbScn.png\")\n\n\n+ CLI\u3067\u9069\u5f53\u306aphp\u30d5\u30a1\u30a4\u30eb\u3092\u53e9\u304f\n\n```bash:\nvagrant ssh \nphp XXX.php\n```\n\n\u2192PhpStorm\u3067\u30c7\u30d0\u30c3\u30af\u30e2\u30fc\u30c9\u306b\u3002\n\n#98.\u305d\u306e\u4ed6chef\u5316Todo\nsudo yum install php-mbstring\nsudo yum install php-xml\n\n#99.\u53c2\u8003\u30da\u30fc\u30b8\n[PhpStorm Advent Calendar 2013](http://qiita.com/advent-calendar/2013/PhpStorm)\n[Shin x blog PhpStorm \u304b\u3089 Vagrant VM \u306e PHP \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30ea\u30e2\u30fc\u30c8\u30c7\u30d0\u30c3\u30b0\u3059\u308b\uff08Web & CLI)](http://www.1x1.jp/blog/2014/08/how-to-setup-php-remote-debug-with-vagrant-vm.html)\n[PhpStorm 8 \u3067\u3001Vagrant VM \u306e PHPUnit \u3092 IDE \u304b\u3089\u5b9f\u884c\u3059\u308b](PhpStorm 8 \u3067\u3001Vagrant VM \u306e PHPUnit \u3092 IDE \u304b\u3089\u5b9f\u884c\u3059\u308b)\n", "tags": ["PhpStorm"]}