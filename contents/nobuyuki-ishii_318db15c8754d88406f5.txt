{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nServersMan@VPS\u3067\u30ec\u30f3\u30bf\u30eb\u3057\u305fcentos6.5\u306b\u30c9\u30c3\u30c8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u3055\u304f\u3089\u306eVPS\u5165\u9580\u3092\u53c2\u8003\u306b\u521d\u671f\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u30d0\u30fc\u30b8\u30e7\u30f3\u306f6.5\u3067\u3059\u3002\n\n\u30ed\u30b0\u30a4\u30f3\n\u30e1\u30fc\u30eb\u3067ssh\u30dd\u30fc\u30c8\u756a\u53f7\u3068\u30b5\u30fc\u30d0ip\u30a2\u30c9\u30ec\u30b9\u3068root\u30e6\u30fc\u30b6\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u901a\u77e5\u3055\u308c\u307e\u3059\u3002\n$ ssh -p [\u30dd\u30fc\u30c8\u756a\u53f7] root@[\u30b5\u30fc\u30d0ip\u30a2\u30c9\u30ec\u30b9]\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u6700\u65b0\u5316\n$ yum update\n\n\n\u8a00\u8a9e\u8a2d\u5b9a\n\u65e5\u672c\u8a9e\u306b\u3057\u307e\u3059\u3002\n$ vi /etc/sysconfig/i18n\n\n\ni18n\nLANG=\"ja_JP.UTF-8\"\nSYSFONT=\"latarcyrheb-sun16\"\n\n\n\n\u4f5c\u696d\u30e6\u30fc\u30b6\u4f5c\u6210\n$ useradd [\u30e6\u30fc\u30b6\u540d]\n$ passwd [\u30e6\u30fc\u30b6\u540d]\n\n\nsudo\u6a29\u9650\u4ed8\u4e0e\n$ usermod -G wheel [\u30e6\u30fc\u30b6\u540d]\n$ visudo\n\n\u2193\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u5916\u3059\n\nsudoers\n%wheel  ALL=(ALL)       ALL\n\n\n\n\u9375\u8a8d\u8a3c\u306e\u8a2d\u5b9a\n\u30b5\u30fc\u30d0) \u516c\u958b\u9375\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\uff08\u4f5c\u6210\u30e6\u30fc\u30b6\u3067\uff09\n$ mkdir .ssh\n$ chmod 700 .ssh\n\nPC) \u516c\u958b\u9375\u3001\u79d8\u5bc6\u9375\u3092\u4f5c\u6210\u3057\u3066\u3001\u516c\u958b\u9375\u3092\u8ee2\u9001\n\u9375\u306e\u540d\u79f0\u3068\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\u3092\u805e\u304b\u308c\u308b\u3002\n$ ssh-keygen -t rsa -v\n$ chmod 600 .ssh/id_rsa.pub\n$ scp -P [\u30dd\u30fc\u30c8\u756a\u53f7] id_rsa.pub [\u30e6\u30fc\u30b6\u540d]@[\u30b5\u30fc\u30d0ip\u30a2\u30c9\u30ec\u30b9]:~/.ssh/authorized_keys\n\n\n\u9375\u8a8d\u8a3c\u3067\u30ed\u30b0\u30a4\u30f3\n$ ssh -p [\u30dd\u30fc\u30c8\u756a\u53f7] [\u30e6\u30fc\u30b6\u540d]@[\u30b5\u30fc\u30d0ip\u30a2\u30c9\u30ec\u30b9]\n\n\nssh\u8a2d\u5b9a\nroot\u30ed\u30b0\u30a4\u30f3\u7981\u6b62\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u30ed\u30b0\u30a4\u30f3\u7981\u6b62\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n$ sudo -s\n$ cp /etc/ssh/sshd_config /etc/ssh/sshd_config.org\n$ vi /etc/ssh/sshd_config\n\n\u2193\u3092\u8a2d\u5b9a\u3059\u308b\n\nsshd_config\nPasswordAuthentication no\nPermitRootLogin no\n\n\nsshd\u518d\u8d77\u52d5\n$ service sshd restart\n\n\n\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a\n$ cp /etc/sysconfig/iptables /etc/sysconfig/iptables.org\n$ vi /etc/sysconfig/iptables\n\n\u2193\u3092\u8a2d\u5b9a\u3059\u308b\n\niptables\n*filter \n:INPUT DROP [0:0]\n:FORWARD DROP [0:0]\n:OUTPUT ACCEPT [0:0]\n:SERVICES - [0:0]\n-A INPUT -i lo -j ACCEPT\n-A INPUT -p icmp --icmp-type echo-request -m limit --limit 1/s --limit-burst 4 -j ACCEPT\n-A INPUT -p tcp -m state --state ESTABLISHED,RELATED -j ACCEPT\n-A INPUT -p tcp -m state --state NEW -j SERVICES\n-A INPUT -p udp --sport 53 -j ACCEPT\n-A INPUT -p udp --sport 123 --dport 123 -j ACCEPT\n-A SERVICES -p tcp --dport [ssh\u30dd\u30fc\u30c8\u756a\u53f7] -j ACCEPT\n-A SERVICES -p tcp --dport 80 -j ACCEPT\n-A SERVICES -p tcp --dport 443 -j ACCEPT\nCOMMIT\n\n\n\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u518d\u8d77\u52d5\n$ service iptables restart\n\n\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a\u78ba\u8a8d\n$ iptables -L\n\n\nntp\nServersMan@VPS\u3067\u306f\u3001ntp\u3092\u8a2d\u5b9a\u3057\u306a\u304f\u3066\u3082\u3001\u81ea\u52d5\u3067\u6642\u523b\u3092\u5408\u308f\u305b\u3066\u304f\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001\nntp\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ yum install ntp\n\n\u624b\u52d5\u6642\u523b\u5408\u308f\u305b\n$ ntpdate ntp.nict.jp\n\n\u8d77\u52d5\n$ service ntpd start\n\n\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n$ chkconfig ntpd on\n\n## \u306f\u3058\u3081\u306b\nServersMan@VPS\u3067\u30ec\u30f3\u30bf\u30eb\u3057\u305fcentos6.5\u306b\u30c9\u30c3\u30c8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u3055\u304f\u3089\u306eVPS\u5165\u9580\u3092\u53c2\u8003\u306b\u521d\u671f\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u30d0\u30fc\u30b8\u30e7\u30f3\u306f6.5\u3067\u3059\u3002\n\n## \u30ed\u30b0\u30a4\u30f3\n\u30e1\u30fc\u30eb\u3067`ssh\u30dd\u30fc\u30c8\u756a\u53f7`\u3068`\u30b5\u30fc\u30d0ip\u30a2\u30c9\u30ec\u30b9`\u3068`root\u30e6\u30fc\u30b6\u306e\u30d1\u30b9\u30ef\u30fc\u30c9`\u304c\u901a\u77e5\u3055\u308c\u307e\u3059\u3002\n\n    $ ssh -p [\u30dd\u30fc\u30c8\u756a\u53f7] root@[\u30b5\u30fc\u30d0ip\u30a2\u30c9\u30ec\u30b9]\n\n## \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u6700\u65b0\u5316\n\n    $ yum update\n\n## \u8a00\u8a9e\u8a2d\u5b9a\n\u65e5\u672c\u8a9e\u306b\u3057\u307e\u3059\u3002\n\n    $ vi /etc/sysconfig/i18n\n\n```text:i18n\nLANG=\"ja_JP.UTF-8\"\nSYSFONT=\"latarcyrheb-sun16\"\n```\n\n## \u4f5c\u696d\u30e6\u30fc\u30b6\u4f5c\u6210\n\n    $ useradd [\u30e6\u30fc\u30b6\u540d]\n    $ passwd [\u30e6\u30fc\u30b6\u540d]\n\n## sudo\u6a29\u9650\u4ed8\u4e0e\n\n    $ usermod -G wheel [\u30e6\u30fc\u30b6\u540d]\n    $ visudo\n\n\u2193\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u5916\u3059\n\n```text:sudoers    \n%wheel  ALL=(ALL)       ALL\n```\n\n## \u9375\u8a8d\u8a3c\u306e\u8a2d\u5b9a\n\u30b5\u30fc\u30d0) \u516c\u958b\u9375\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\uff08\u4f5c\u6210\u30e6\u30fc\u30b6\u3067\uff09\n\n    $ mkdir .ssh\n    $ chmod 700 .ssh\n    \nPC) \u516c\u958b\u9375\u3001\u79d8\u5bc6\u9375\u3092\u4f5c\u6210\u3057\u3066\u3001\u516c\u958b\u9375\u3092\u8ee2\u9001\n\u9375\u306e\u540d\u79f0\u3068\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\u3092\u805e\u304b\u308c\u308b\u3002\n\n    $ ssh-keygen -t rsa -v\n    $ chmod 600 .ssh/id_rsa.pub\n    $ scp -P [\u30dd\u30fc\u30c8\u756a\u53f7] id_rsa.pub [\u30e6\u30fc\u30b6\u540d]@[\u30b5\u30fc\u30d0ip\u30a2\u30c9\u30ec\u30b9]:~/.ssh/authorized_keys\n\n## \u9375\u8a8d\u8a3c\u3067\u30ed\u30b0\u30a4\u30f3\n\n    $ ssh -p [\u30dd\u30fc\u30c8\u756a\u53f7] [\u30e6\u30fc\u30b6\u540d]@[\u30b5\u30fc\u30d0ip\u30a2\u30c9\u30ec\u30b9]\n\n## ssh\u8a2d\u5b9a\nroot\u30ed\u30b0\u30a4\u30f3\u7981\u6b62\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u30ed\u30b0\u30a4\u30f3\u7981\u6b62\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n    $ sudo -s\n    $ cp /etc/ssh/sshd_config /etc/ssh/sshd_config.org\n    $ vi /etc/ssh/sshd_config\n\n\u2193\u3092\u8a2d\u5b9a\u3059\u308b\n\n```text:sshd_config\nPasswordAuthentication no\nPermitRootLogin no\n```\nsshd\u518d\u8d77\u52d5\n\n    $ service sshd restart\n\n## \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a\n\n    $ cp /etc/sysconfig/iptables /etc/sysconfig/iptables.org\n    $ vi /etc/sysconfig/iptables\n\n\u2193\u3092\u8a2d\u5b9a\u3059\u308b\n\n```text:iptables\n*filter \n:INPUT DROP [0:0]\n:FORWARD DROP [0:0]\n:OUTPUT ACCEPT [0:0]\n:SERVICES - [0:0]\n-A INPUT -i lo -j ACCEPT\n-A INPUT -p icmp --icmp-type echo-request -m limit --limit 1/s --limit-burst 4 -j ACCEPT\n-A INPUT -p tcp -m state --state ESTABLISHED,RELATED -j ACCEPT\n-A INPUT -p tcp -m state --state NEW -j SERVICES\n-A INPUT -p udp --sport 53 -j ACCEPT\n-A INPUT -p udp --sport 123 --dport 123 -j ACCEPT\n-A SERVICES -p tcp --dport [ssh\u30dd\u30fc\u30c8\u756a\u53f7] -j ACCEPT\n-A SERVICES -p tcp --dport 80 -j ACCEPT\n-A SERVICES -p tcp --dport 443 -j ACCEPT\nCOMMIT\n```\n\n\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u518d\u8d77\u52d5\n\n    $ service iptables restart\n\n\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a\u78ba\u8a8d\n\n    $ iptables -L\n\n## ntp\nServersMan@VPS\u3067\u306f\u3001ntp\u3092\u8a2d\u5b9a\u3057\u306a\u304f\u3066\u3082\u3001\u81ea\u52d5\u3067\u6642\u523b\u3092\u5408\u308f\u305b\u3066\u304f\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001\n\nntp\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n    $ yum install ntp\n\n\u624b\u52d5\u6642\u523b\u5408\u308f\u305b\n\n    $ ntpdate ntp.nict.jp\n\n\u8d77\u52d5\n\n    $ service ntpd start\n\n\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n\n    $ chkconfig ntpd on\n", "tags": ["CentOS6.5"]}