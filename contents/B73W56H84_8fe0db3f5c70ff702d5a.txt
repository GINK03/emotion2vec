{"context": " More than 1 year has passed since last update.\u8a95\u751f\u65e5\u304b\u3089\u661f\u5ea7\u3092\u8abf\u3079\u308b\u6b63\u898f\u8868\u73fe - Qiita \u306b\u66f8\u3044\u305f\u6b63\u898f\u8868\u73fe\u3092\u751f\u6210\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3002\n\nregexp_assemble_seiza.pl\nuse v5.18;\nuse Regexp::Assemble;\nuse DateTime;\nuse DateTime::Event::Recurrence;\n\n# 'mm/dd'\u5f62\u5f0f\u306e\u8a95\u751f\u65e5\u304b\u3089\u3001\u661f\u5ea7\u3092\u6c42\u3081\u308b\u6b63\u898f\u8868\u73fe\u3092\u4f5c\u308d\u3046\u3002\n&main; exit;\n\nsub main {\n  my @Aries       = seiza( [qw( 2016  3 21 )], [qw( 2016  4 19 )] ) ;\n  my @Taurus      = seiza( [qw( 2016  4 20 )], [qw( 2016  5 20 )] ) ;\n  my @Gemini      = seiza( [qw( 2016  5 21 )], [qw( 2016  6 21 )] ) ;\n  my @Cancer      = seiza( [qw( 2016  6 22 )], [qw( 2016  7 22 )] ) ;\n  my @Leo         = seiza( [qw( 2016  7 23 )], [qw( 2016  8 22 )] ) ;\n  my @Virgo       = seiza( [qw( 2016  8 23 )], [qw( 2016  9 22 )] ) ;\n  my @Libra       = seiza( [qw( 2016  9 23 )], [qw( 2016 10 23 )] ) ;\n  my @Scorpio     = seiza( [qw( 2016 10 24 )], [qw( 2016 11 21 )] ) ;\n  my @Sagittarius = seiza( [qw( 2016 11 22 )], [qw( 2016 12 21 )] ) ;\n  my @Capricorn   = seiza( [qw( 2016 12 22 )], [qw( 2017  1 19 )] ) ;\n  my @Aquarius    = seiza( [qw( 2017  1 20 )], [qw( 2017  2 18 )] ) ;\n  my @Pisces      = seiza( [qw( 2017  2 19 )], [qw( 2017  3 20 )] ) ;\n\n  say regexp_assemble( @Aries );\n  say regexp_assemble( @Taurus );\n  say regexp_assemble( @Gemini );\n  say regexp_assemble( @Cancer );\n  say regexp_assemble( @Leo );\n  say regexp_assemble( @Virgo );\n  say regexp_assemble( @Libra );\n  say regexp_assemble( @Scorpio );\n  say regexp_assemble( @Sagittarius );\n  say regexp_assemble( @Capricorn );\n  say regexp_assemble( @Aquarius );\n  say regexp_assemble( @Pisces );\n\n  # '01/01' \u301c '12/31' \u306b\u30de\u30c3\u30c1\u3059\u308b\u6b63\u898f\u8868\u73fe(\u542b'02/29')\n  say regexp_assemble(\n    @Aries, @Taurus,  @Gemini,      @Cancer,    @Leo,      @Virgo,\n    @Libra, @Scorpio, @Sagittarius, @Capricorn, @Aquarius, @Pisces,\n  );\n}\n\nsub seiza ( $$ ) {\n  my ( $f, $t ) = @_;\n\n  return\n    # 2016-03-21T00:00:00 \u5f62\u5f0f\u3092 03/21 \u306b\u5909\u63db\n    # \u203b \u30b9\u30e9\u30c3\u30b7\u30e5\u7121\u3057( 0321 )\u306b\u3059\u308b\u306a\u3089 s@-@@ \u2193\n    map{ s/T.*// && s/^\\d\\d\\d\\d-// && s@-@/@ && $_ }\n    DateTime::Event::Recurrence->daily->as_list(\n      'start' => DateTime->new(\n        'year'   => $f->[0],\n        'month'  => $f->[1],\n        'day'    => $f->[2],\n      ),\n      'end' => DateTime->new(\n        'year'   => $t->[0],\n        'month'  => $t->[1],\n        'day'    => $t->[2],\n      ),\n    );\n}\n\nsub regexp_assemble ( @ ) {\n  my $builder = Regexp::Assemble->new;\n\n  for my $day ( @_ ) {\n    $builder->add( '\\A' . ${day} . '\\z' );\n  }\n\n  return $builder->as_string;\n}\n\n\n\nOUTPUT\n$ perl regexp_assemble_seiza.pl\n\\A0(?:3\\/(?:2[123456789]|3[01])|4\\/(?:0[123456789]|1\\d))\\z\n\\A0(?:5\\/(?:0[123456789]|1\\d|20)|4\\/(?:2\\d|30))\\z\n\\A0(?:6\\/(?:0[123456789]|2[01]|1\\d)|5\\/(?:2[123456789]|3[01]))\\z\n\\A0(?:7\\/(?:0[123456789]|2[012]|1\\d)|6\\/(?:2[23456789]|30))\\z\n\\A0(?:8\\/(?:0[123456789]|2[012]|1\\d)|7\\/(?:2[3456789]|3[01]))\\z\n\\A0(?:9\\/(?:0[123456789]|2[012]|1\\d)|8\\/(?:2[3456789]|3[01]))\\z\n\\A(?:10\\/(?:0[123456789]|2[0123]|1\\d)|09\\/(?:2[3456789]|30))\\z\n\\A1(?:1\\/(?:0[123456789]|2[01]|1\\d)|0\\/(?:2[456789]|3[01]))\\z\n\\A1(?:2\\/(?:0[123456789]|2[01]|1\\d)|1\\/(?:2[23456789]|30))\\z\n\\A(?:12\\/(?:2[23456789]|3[01])|01\\/(?:0[123456789]|1\\d))\\z\n\\A0(?:2\\/(?:0[123456789]|1[012345678])|1\\/(?:3[01]|2\\d))\\z\n\\A0(?:3\\/(?:0[123456789]|1\\d|20)|2\\/(?:2[012345678]|19))\\z\n\\A(?:0(?:[13578]\\/(?:0[123456789]|[12]\\d|3[01])|2\\/(?:0[123456789]|2[012345678]|1\\d)|[469]\\/(?:0[123456789]|[12]\\d|30))|1(?:[02]\\/(?:0[123456789]|[12]\\d|3[01])|1\\/(?:0[123456789]|[12]\\d|30)))\\z\n\n\n\u304a\u308f\u308a\u3067\u3059\u3002\n\n\u53c2\u8003\u3068\u6ce8\u91c8\n\nDateTime\nDateTime::Event::Recurrence\nRegexp::Assemble\n\u30e2\u30c0\u30f3Perl\u306e\u4e16\u754c\u3078\u3088\u3046\u3053\u305d \u7b2c15\u56de\u3000DateTime\uff1aAPI\u306e\u6a19\u6e96\u5316\u3092\u3081\u3056\u3057\u3066 - gihyo.jp\nperl - Regexp::Assemble\u306e\u30b9\u30b9\u30e1 - 404 Blog Not Found\nPerl CPAN\u30e2\u30b8\u30e5\u30fc\u30eb\u30ac\u30a4\u30c9\n\n\n[\u8a95\u751f\u65e5\u304b\u3089\u661f\u5ea7\u3092\u8abf\u3079\u308b\u6b63\u898f\u8868\u73fe - Qiita](http://qiita.com/B73W56H84/items/1a4c83425125c43bde14) \u306b\u66f8\u3044\u305f\u6b63\u898f\u8868\u73fe\u3092\u751f\u6210\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3002\n\n```pl:regexp_assemble_seiza.pl\nuse v5.18;\nuse Regexp::Assemble;\nuse DateTime;\nuse DateTime::Event::Recurrence;\n\n# 'mm/dd'\u5f62\u5f0f\u306e\u8a95\u751f\u65e5\u304b\u3089\u3001\u661f\u5ea7\u3092\u6c42\u3081\u308b\u6b63\u898f\u8868\u73fe\u3092\u4f5c\u308d\u3046\u3002\n&main; exit;\n\nsub main {\n  my @Aries       = seiza( [qw( 2016  3 21 )], [qw( 2016  4 19 )] ) ;\n  my @Taurus      = seiza( [qw( 2016  4 20 )], [qw( 2016  5 20 )] ) ;\n  my @Gemini      = seiza( [qw( 2016  5 21 )], [qw( 2016  6 21 )] ) ;\n  my @Cancer      = seiza( [qw( 2016  6 22 )], [qw( 2016  7 22 )] ) ;\n  my @Leo         = seiza( [qw( 2016  7 23 )], [qw( 2016  8 22 )] ) ;\n  my @Virgo       = seiza( [qw( 2016  8 23 )], [qw( 2016  9 22 )] ) ;\n  my @Libra       = seiza( [qw( 2016  9 23 )], [qw( 2016 10 23 )] ) ;\n  my @Scorpio     = seiza( [qw( 2016 10 24 )], [qw( 2016 11 21 )] ) ;\n  my @Sagittarius = seiza( [qw( 2016 11 22 )], [qw( 2016 12 21 )] ) ;\n  my @Capricorn   = seiza( [qw( 2016 12 22 )], [qw( 2017  1 19 )] ) ;\n  my @Aquarius    = seiza( [qw( 2017  1 20 )], [qw( 2017  2 18 )] ) ;\n  my @Pisces      = seiza( [qw( 2017  2 19 )], [qw( 2017  3 20 )] ) ;\n\n  say regexp_assemble( @Aries );\n  say regexp_assemble( @Taurus );\n  say regexp_assemble( @Gemini );\n  say regexp_assemble( @Cancer );\n  say regexp_assemble( @Leo );\n  say regexp_assemble( @Virgo );\n  say regexp_assemble( @Libra );\n  say regexp_assemble( @Scorpio );\n  say regexp_assemble( @Sagittarius );\n  say regexp_assemble( @Capricorn );\n  say regexp_assemble( @Aquarius );\n  say regexp_assemble( @Pisces );\n\n  # '01/01' \u301c '12/31' \u306b\u30de\u30c3\u30c1\u3059\u308b\u6b63\u898f\u8868\u73fe(\u542b'02/29')\n  say regexp_assemble(\n    @Aries, @Taurus,  @Gemini,      @Cancer,    @Leo,      @Virgo,\n    @Libra, @Scorpio, @Sagittarius, @Capricorn, @Aquarius, @Pisces,\n  );\n}\n\nsub seiza ( $$ ) {\n  my ( $f, $t ) = @_;\n\n  return\n    # 2016-03-21T00:00:00 \u5f62\u5f0f\u3092 03/21 \u306b\u5909\u63db\n    # \u203b \u30b9\u30e9\u30c3\u30b7\u30e5\u7121\u3057( 0321 )\u306b\u3059\u308b\u306a\u3089 s@-@@ \u2193\n    map{ s/T.*// && s/^\\d\\d\\d\\d-// && s@-@/@ && $_ }\n    DateTime::Event::Recurrence->daily->as_list(\n      'start' => DateTime->new(\n        'year'   => $f->[0],\n        'month'  => $f->[1],\n        'day'    => $f->[2],\n      ),\n      'end' => DateTime->new(\n        'year'   => $t->[0],\n        'month'  => $t->[1],\n        'day'    => $t->[2],\n      ),\n    );\n}\n\nsub regexp_assemble ( @ ) {\n  my $builder = Regexp::Assemble->new;\n\n  for my $day ( @_ ) {\n    $builder->add( '\\A' . ${day} . '\\z' );\n  }\n\n  return $builder->as_string;\n}\n```\n\n```bash:OUTPUT\n$ perl regexp_assemble_seiza.pl\n\\A0(?:3\\/(?:2[123456789]|3[01])|4\\/(?:0[123456789]|1\\d))\\z\n\\A0(?:5\\/(?:0[123456789]|1\\d|20)|4\\/(?:2\\d|30))\\z\n\\A0(?:6\\/(?:0[123456789]|2[01]|1\\d)|5\\/(?:2[123456789]|3[01]))\\z\n\\A0(?:7\\/(?:0[123456789]|2[012]|1\\d)|6\\/(?:2[23456789]|30))\\z\n\\A0(?:8\\/(?:0[123456789]|2[012]|1\\d)|7\\/(?:2[3456789]|3[01]))\\z\n\\A0(?:9\\/(?:0[123456789]|2[012]|1\\d)|8\\/(?:2[3456789]|3[01]))\\z\n\\A(?:10\\/(?:0[123456789]|2[0123]|1\\d)|09\\/(?:2[3456789]|30))\\z\n\\A1(?:1\\/(?:0[123456789]|2[01]|1\\d)|0\\/(?:2[456789]|3[01]))\\z\n\\A1(?:2\\/(?:0[123456789]|2[01]|1\\d)|1\\/(?:2[23456789]|30))\\z\n\\A(?:12\\/(?:2[23456789]|3[01])|01\\/(?:0[123456789]|1\\d))\\z\n\\A0(?:2\\/(?:0[123456789]|1[012345678])|1\\/(?:3[01]|2\\d))\\z\n\\A0(?:3\\/(?:0[123456789]|1\\d|20)|2\\/(?:2[012345678]|19))\\z\n\\A(?:0(?:[13578]\\/(?:0[123456789]|[12]\\d|3[01])|2\\/(?:0[123456789]|2[012345678]|1\\d)|[469]\\/(?:0[123456789]|[12]\\d|30))|1(?:[02]\\/(?:0[123456789]|[12]\\d|3[01])|1\\/(?:0[123456789]|[12]\\d|30)))\\z\n```\n\n\u304a\u308f\u308a\u3067\u3059\u3002\n\n## \u53c2\u8003\u3068\u6ce8\u91c8\n\n* [DateTime](https://metacpan.org/pod/DateTime)\n* [DateTime::Event::Recurrence](https://metacpan.org/pod/DateTime::Event::Recurrence)\n* [Regexp::Assemble](https://metacpan.org/pod/Regexp::Assemble)\n\n* [\u30e2\u30c0\u30f3Perl\u306e\u4e16\u754c\u3078\u3088\u3046\u3053\u305d \u7b2c15\u56de\u3000DateTime\uff1aAPI\u306e\u6a19\u6e96\u5316\u3092\u3081\u3056\u3057\u3066 - gihyo.jp](http://gihyo.jp/dev/serial/01/modern-perl/0015)\n* [perl - Regexp::Assemble\u306e\u30b9\u30b9\u30e1 - 404 Blog Not Found](http://blog.livedoor.jp/dankogai/archives/50812865.html)\n\n* [Perl CPAN\u30e2\u30b8\u30e5\u30fc\u30eb\u30ac\u30a4\u30c9](https://www.wgn.co.jp/store/dat/3227/)\n", "tags": ["Perl", "\u6b63\u898f\u8868\u73fe"]}