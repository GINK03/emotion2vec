{"context": " More than 1 year has passed since last update.\n\nChef\nhttps://www.chef.io\n\u30a4\u30f3\u30d5\u30e9\u74b0\u5883\u306e\u69cb\u6210\u7ba1\u7406\u30c4\u30fc\u30eb\u3002Ruby\u88fd\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3084\u5404\u7a2e\u8a2d\u5b9a\u3092\u5168\u81ea\u52d5\u3067\u884c\u3048\u308b\u3002\n\u304b\u3064\u3066\u306f\u7686\u30a4\u30f3\u30d5\u30e9\u74b0\u5883\u69cb\u7bc9\u3092\u624b\u52d5\u3067\u884c\u3063\u3066\u304d\u305f\u304c\u3001\n\u30b9\u30af\u30ea\u30d7\u30c8\u3084\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7b49\u306b\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\n\u30a4\u30f3\u30d5\u30e9\u74b0\u5883\u3092\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 (Infrastructure as a Code) \u3059\u308b\u306e\u304c\u6700\u8fd1\u306e\u306f\u3084\u308a\u3002\n\u4f3c\u305f\u3088\u3046\u306a\u30c4\u30fc\u30eb\u3068\u3057\u3066\u3001Puppet\u3001Ansible \u7b49\u304c\u3042\u308b\u3002\n\nBerkshelf\nhttp://berkshelf.com\nCookbook \u306e\u7ba1\u7406\u30bd\u30d5\u30c8\u3002Ruby \u3067\u3044\u3046\u3068\u3053\u308d\u306e Bundler \u306b\u8a72\u5f53\u3059\u308b\u3082\u306e\u3002\nCookbook \u540c\u58eb\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u89e3\u6d88\u3057\u3066\u304f\u308c\u308b\u3002\n\u4ed6\u306e\u4eba\u304c\u4f5c\u3063\u3066\u304f\u308c\u305f Cookbook \u306f\u4e0b\u8a18URL\u304b\u3089\u691c\u7d22\u3067\u304d\u308b\u3002\nhttps://supermarket.chef.io/cookbooks-directory\n\nChef \u306e\u7528\u8a9e\u8aac\u660e\n\nResource\n\n\n1\u3064\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30fb\u8a2d\u5b9a\u306a\u3069\u306e\u6700\u5c0f\u5358\u4f4d\u3002\n\n\nRecipe\n\n\nResource \u3092\u307e\u3068\u3081\u305f\u3082\u306e\u3002\n\n\nCookbook\n\n\nRecipe \u3092\u307e\u3068\u3081\u305f\u3082\u306e\u3002\n\n\nRole\n\n\nCookbook \u306e\u9069\u7528\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3057\u305f\u3082\u306e\u3002\n\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\n\n\nCookbook \u306e\u4fdd\u5b58\u5148\u3002\n\n\nKnife\n\n\nChef \u95a2\u9023\u306e\u64cd\u4f5c\u3092\u884c\u3046\u969b\u306b\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3002\n\n\nknife-Solo\n\n\nknife\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3002Chef-Solo \u95a2\u9023\u306e\u64cd\u4f5c\u3092\u5b9f\u884c\u3059\u308b\u969b\u306f\u3053\u3061\u3089\u306e\u30b3\u30de\u30f3\u30c9\u3002\n\n\n\n\u30ea\u30dd\u30b8\u30c8\u30ea -> Cookbook -> Recipe -> Resource \u306e\u968e\u5c64\u69cb\u9020\u3068\u306a\u308b\u3002\n\nChef \u306e\u69cb\u6210\n\nChef-Solo\u3092\u7528\u3044\u308b\u5834\u5408\n\u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30f3\u7248\u306e Chef \u74b0\u5883\u3002\u4eca\u56de\u306f\u3053\u3061\u3089\u306e\u69cb\u6210\u3067\u4f5c\u696d\u3092\u884c\u3046\u3002\n\u304c\u3063\u3064\u308a\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3066\u308b\u3088\u3046\u306a\u898f\u6a21\u3067\u306a\u3044\u3088\u3046\u306a\u5834\u5408\u306f\u3053\u306e\u69cb\u6210\u3002\n\nChef-Solo:\n\n\nCookbook\u306e\u958b\u767a\u30fb\u7ba1\u7406\u3001Node\u306e\u7ba1\u7406\u306a\u3069\u3092\u884c\u3046\u3002\n\u7ba1\u7406\u3059\u308b\u5074\u306e\u30de\u30b7\u30f3\u3002\n\n\nNode:\n\n\nChef \u3067\u69cb\u6210\u7ba1\u7406\u3055\u308c\u308b\u30de\u30b7\u30f3\u3002\n\u7ba1\u7406\u3055\u308c\u308b\u5074\u306e\u30de\u30b7\u30f3\u3002\n\n\n\n\u203b Chef-Solo \u306f\u4eca\u5f8c\u306f\u975e\u63a8\u5968\u306b\u306a\u308b\u3063\u307d\u3044? (\u516c\u5f0f\u30d6\u30ed\u30b0\u3088\u308a)\u3002\n\u304c\u3001\u307e\u3060\u60c5\u5831\u304c\u932f\u7d9c\u3057\u3066\u3044\u308b\u307d\u3044\u306e\u3067\u3001\u4eca\u56de\u306f Chef-Solo \u3067\u3044\u304f\u3002\n\nChef Server \u3092\u7528\u3044\u308b\u5834\u5408\n\u30b5\u30fc\u30d0\u30fc/\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u7248\u3002\u4e00\u5fdc\u53c2\u8003\u307e\u3067\u306b\u8a18\u8f09\u3002\n\u6bd4\u8f03\u7684\u5927\u898f\u6a21\u306a\u30b7\u30b9\u30c6\u30e0\u3092\u7ba1\u7406\u3059\u308b\u5834\u5408\u3053\u3061\u3089\u306e\u69cb\u6210\u3067\u7528\u3044\u308b\u3002\n\u8a73\u3057\u304f\u306f\u4ed6\u306e\u8cc7\u6599\u3092\u63a2\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nChef Server:\n\n\nCookbook\u306e\u7ba1\u7406\u3001Node\u306e\u7ba1\u7406\u3092\u884c\u3046\u30de\u30b7\u30f3\u3002\n\n\nNodes:\n\n\nChef \u3067\u69cb\u6210\u7ba1\u7406\u3055\u308c\u308b\u30de\u30b7\u30f3\u3002\n\n\nWorkstation:\n\n\nCookbook\u7b49\u306e\u958b\u767a\u30fb\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3092\u884c\u3046\u30de\u30b7\u30f3\u3002\n\n\n\n\nChef \u74b0\u5883\u306e\u69cb\u7bc9\n\u4eca\u56de\u306f\u30ed\u30fc\u30ab\u30eb\u30de\u30b7\u30f3\u306e MacBook Pro (Retina, 13-inch, Late 2013) \u306b\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u3002\nOS \u306f Yosemite \u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u6e08\u307f\u3002\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u4f5c\u6210\n$ mkdir ~/chef_repo # \u4efb\u610f\u306e\u5834\u6240\u306b\u4f5c\u6210\n$ cd ~/chef_repo\n\n\nChef\u30fbKnife-Solo\u30fbBerkshelf \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nRuby 1.9 \u4ee5\u4e0a\u304c\u5fc5\u8981\u3002OSX Yosemite \u306e\u5834\u5408\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5165\u3063\u3066\u3044\u308bRuby\u3067OK\u3002\n\u4ee5\u4e0b\u306e Gemfile \u3092 ~/chef_repo \u4ee5\u4e0b\u306b\u4f5c\u6210\u3002\n\nGemfile\nsource \"https://rubygems.org\"\n\ngem 'chef'\ngem 'knife-solo'\ngem 'berkshelf'\n\n\nBundler\u3067Gem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n$ bundle install --path vendor/bundle\n\n\u3053\u308c\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u3002\n\nVagrant \u3067\u30c6\u30b9\u30c8\u7528\u30b5\u30fc\u30d0\u30fc\u69cb\u7bc9\nVagrant \u81ea\u4f53\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u8aac\u660e\u306f\u5272\u611b\u3002\n\u4eca\u56de\u306f CentOS6.5 \u306e \u30a4\u30e1\u30fc\u30b8\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3046\u3002\n\u307e\u305f\u3001\u4eee\u60f3\u74b0\u5883\u306e\u4f5c\u6210\u5148\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f ~/projects/chef_zero_test \u3068\u3057\u305f\u3002\n$ vagrant box add centos6.5 https://github.com/2creatives/vagrant-centos/releases/download/v6.5.3/centos65-x86_64-20140116.box\n$ mkdir ~/projects\n$ mkdir ~/projects/chef_zero_test\n$ cd ~/projects/chef_zero_test\n$ vagrant init centos6.5\n\n\u4f5c\u6210\u3055\u308c\u305f Vagrantfile \u306e\u4e2d\u3092\u4e0b\u8a18\u306e\u3088\u3046\u306b\u7de8\u96c6\u3059\u308b\u3002\n\nVagrantfile\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\nVAGRANTFILE_API_VERSION = \"2\"\n\nVagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n  config.vm.box = \"centos6.5\"\n  config.vm.box_url = \"https://github.com/2creatives/vagrant-centos/releases/download/v6.5.3/centos65-x86_64-20140116.box\"\n  config.vm.network \"private_network\", ip: \"192.168.33.10\"\n  config.vm.provider \"virtualbox\" do |vb|\n    vb.customize [\"modifyvm\", :id, \"--memory\", \"4096\"]\n  end\nend\n\n\n\u3053\u308c\u3067\u30ed\u30fc\u30ab\u30eb\u304b\u3089 192.168.33.10 \u3067\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n$ vagrant up\n\n\u3067\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7acb\u3061\u4e0a\u3052\u3066\u304a\u304f\u3002\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u3078\u306eChef\u74b0\u5883\u5c0e\u5165\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3002\n[sudo \u6a29\u9650\u306e\u3042\u308b\u30e6\u30fc\u30b6\u30fc]@[IP\u30a2\u30c9\u30ec\u30b9] \u3092\u5f15\u6570\u306b\u3001\n-i [\u79d8\u5bc6\u9375\u306e\u5834\u6240] \u3092\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u6307\u5b9a\u3057\u3066\u3084\u308b\u3068\u52d5\u3044\u305f\u3002\n$ bundle exec knife solo prepare vagrant@192.168.33.10 -i ~/.vagrant.d/insecure_private_key\nBootstrapping Chef...\n...\nPreparing... ########################################### [100%]\n1:chef ########################################### [100%]\nThank you for installing Chef!\nGenerating node config 'nodes/192.168.33.10.json'...\n\nNode \u306e\u78ba\u8a8d\u3002\n$ bundle exec knife node list -z\n192.168.33.10\n$ bundle exec knife node show 192.168.33.10 -z\nNode Name: 192.168.33.10\nEnvironment: _default\nFQDN:\nIP: 192.168.33.10\nRun List:\nRoles:\nRecipes:\nPlatform:\nTags:\n\n\u7121\u4e8b\u767b\u9332\u3055\u308c\u305f\u6a21\u69d8\u3002\n\nCookbook \u306e\u9069\u7528\n\nCookbook \u306e\u53d6\u5f97\n\u4eca\u56de\u306f Berkshelf \u3092\u5229\u7528\u3057\u3066\u30af\u30c3\u30af\u30d6\u30c3\u30af\u3092\u7ba1\u7406\u3059\u308b\u3002\n\u8a66\u3057\u306b Chef \u306e\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3067\u4f5c\u6210\u3055\u308c\u305f Emacs \u306e Cookbook \u3092\u53d6\u5f97\u3057\u3066\u307f\u308b\u3002\n\u4ee5\u4e0b\u306e\u5185\u5bb9\u306e Berksfile \u3092 ~/chef_repo \u306b\u4f5c\u6210\u3002\n\nBerksfile\nsource \"https://api.berkshelf.com\"\n\ncookbook 'emacs'\n\n\nCookbook \u3092\u53d6\u5f97\u3059\u308b\u3002\n$ bundle exec berks vendor cookbooks\n\n\nRun List \u306e\u8a2d\u5b9a\n\u5bfe\u8c61\u306e Node \u306e json \u30d5\u30a1\u30a4\u30eb\u306e run_list \u306b Cookbook \u540d\u3092\u8ffd\u52a0\u3002\n\nnodes/192.168.33.10.json\n{\n  \"run_list\": [\n    \"recipe[emacs]\"\n  ],\n  \"automatic\": {\n    \"ipaddress\": \"192.168.33.10\"\n  }\n}\n\n\nRun List \u304c\u66f4\u65b0\u3055\u308c\u305f\u304b\u78ba\u8a8d\u3002\n$ bundle exec knife node show 192.168.33.10 -z\nWARNING: No knife configuration file found\nNode Name:   192.168.33.10\nEnvironment: _default\nFQDN:        \nIP:          192.168.33.10\nRun List:    recipe[emacs]\nRoles:       \nRecipes:     \nPlatform:     \nTags:  \n\n\nCookbook \u306e\u8a2d\u5b9a\u53cd\u6620\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066Node\u306bCookbook\u3092\u9069\u7528\u3059\u308b\u3002\n$ bundle exec knife solo cook vagrant@192.168.33.10 -i ~/.vagrant.d/insecure_private_key\nRunning Chef on 192.168.33.10...\nChecking Chef version...\nInstalling Berkshelf cookbooks to 'cookbooks'...\nResolving cookbook dependencies...\nUsing emacs (0.9.0)\nVendoring emacs (0.9.0) to cookbooks/emacs\nUploading the kitchen...\nGenerating solo config...\nRunning Chef...\nStarting Chef Client, version 12.0.3\nCompiling Cookbooks...\nConverging 1 resources\nRecipe: emacs::default\n* yum_package[emacs-nox] action install\n- install version 23.1-25.el6 of package emacs-nox\n\nRunning handlers:\nRunning handlers complete\nChef Client finished, 1/1 resources updated in 24.896140136 seconds\n\n\n\u7d50\u679c\u306e\u78ba\u8a8d\n$ cd ~/projects/chef_zero_test\n$ vagrant ssh\n\n\u4e0a\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u4eee\u60f3\u74b0\u5883\u306b\u30ed\u30b0\u30a4\u30f3\u3002\nEmacs\u3092\u8d77\u52d5\u3057\u3066\u307f\u308b\u3002\n$ emacs\n\n\u3053\u308c\u3067 Emacs \u304c\u8d77\u52d5\u3059\u308c\u3070OK\u3002\n\n\u3055\u3044\u3054\u306b\n\u3053\u3053\u307e\u3067\u3067\u4ed6\u4eba\u304c\u66f8\u3044\u305f Cookbook \u3092\u53d6\u5f97\u3057\u3001\n\u5bfe\u8c61\u306e\u30de\u30b7\u30f3\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3053\u308d\u307e\u3067\u306f\u30b3\u30fc\u30c9\u5316\u3067\u304d\u305f\u3002\n\u3064\u307e\u308a Vagrantfile\u3001Gemfile\u3001Berksfile \u304c\u3042\u308c\u3070\u3001\n\u540c\u4e00\u74b0\u5883\u304c\u7c21\u5358\u306b\u518d\u73fe\u53ef\u80fd\u3068\u306a\u3063\u305f\u3002\n\u6b21\u306f\u81ea\u4f5c\u306e Cookbook \u306e\u4f5c\u6210 & \u9069\u7528\u304b\u3002\n# Chef\n[https://www.chef.io](https://www.chef.io)\n\u30a4\u30f3\u30d5\u30e9\u74b0\u5883\u306e\u69cb\u6210\u7ba1\u7406\u30c4\u30fc\u30eb\u3002Ruby\u88fd\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3084\u5404\u7a2e\u8a2d\u5b9a\u3092\u5168\u81ea\u52d5\u3067\u884c\u3048\u308b\u3002\n\n\u304b\u3064\u3066\u306f\u7686\u30a4\u30f3\u30d5\u30e9\u74b0\u5883\u69cb\u7bc9\u3092\u624b\u52d5\u3067\u884c\u3063\u3066\u304d\u305f\u304c\u3001\n\u30b9\u30af\u30ea\u30d7\u30c8\u3084\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7b49\u306b\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\n\u30a4\u30f3\u30d5\u30e9\u74b0\u5883\u3092\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0 (Infrastructure as a Code) \u3059\u308b\u306e\u304c\u6700\u8fd1\u306e\u306f\u3084\u308a\u3002\n\n\u4f3c\u305f\u3088\u3046\u306a\u30c4\u30fc\u30eb\u3068\u3057\u3066\u3001Puppet\u3001Ansible \u7b49\u304c\u3042\u308b\u3002\n\n# Berkshelf\n[http://berkshelf.com](http://berkshelf.com)\nCookbook \u306e\u7ba1\u7406\u30bd\u30d5\u30c8\u3002Ruby \u3067\u3044\u3046\u3068\u3053\u308d\u306e Bundler \u306b\u8a72\u5f53\u3059\u308b\u3082\u306e\u3002\nCookbook \u540c\u58eb\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u89e3\u6d88\u3057\u3066\u304f\u308c\u308b\u3002\n\n\u4ed6\u306e\u4eba\u304c\u4f5c\u3063\u3066\u304f\u308c\u305f Cookbook \u306f\u4e0b\u8a18URL\u304b\u3089\u691c\u7d22\u3067\u304d\u308b\u3002\n[https://supermarket.chef.io/cookbooks-directory](https://supermarket.chef.io/cookbooks-directory)\n\n# Chef \u306e\u7528\u8a9e\u8aac\u660e\n* Resource\n  * 1\u3064\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30fb\u8a2d\u5b9a\u306a\u3069\u306e\u6700\u5c0f\u5358\u4f4d\u3002\n* Recipe\n  * Resource \u3092\u307e\u3068\u3081\u305f\u3082\u306e\u3002\n* Cookbook\n  * Recipe \u3092\u307e\u3068\u3081\u305f\u3082\u306e\u3002\n* Role\n  * Cookbook \u306e\u9069\u7528\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3057\u305f\u3082\u306e\u3002\n* \u30ea\u30dd\u30b8\u30c8\u30ea\n  * Cookbook \u306e\u4fdd\u5b58\u5148\u3002\n* Knife\n  * Chef \u95a2\u9023\u306e\u64cd\u4f5c\u3092\u884c\u3046\u969b\u306b\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3002\n* knife-Solo\n  * knife\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3002Chef-Solo \u95a2\u9023\u306e\u64cd\u4f5c\u3092\u5b9f\u884c\u3059\u308b\u969b\u306f\u3053\u3061\u3089\u306e\u30b3\u30de\u30f3\u30c9\u3002\n \n\u30ea\u30dd\u30b8\u30c8\u30ea -> Cookbook -> Recipe -> Resource \u306e\u968e\u5c64\u69cb\u9020\u3068\u306a\u308b\u3002\n\n# Chef \u306e\u69cb\u6210\n## Chef-Solo\u3092\u7528\u3044\u308b\u5834\u5408\n\u30b9\u30bf\u30f3\u30c9\u30a2\u30ed\u30f3\u7248\u306e Chef \u74b0\u5883\u3002\u4eca\u56de\u306f\u3053\u3061\u3089\u306e\u69cb\u6210\u3067\u4f5c\u696d\u3092\u884c\u3046\u3002\n\u304c\u3063\u3064\u308a\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3066\u308b\u3088\u3046\u306a\u898f\u6a21\u3067\u306a\u3044\u3088\u3046\u306a\u5834\u5408\u306f\u3053\u306e\u69cb\u6210\u3002\n\n* Chef-Solo:\n  * Cookbook\u306e\u958b\u767a\u30fb\u7ba1\u7406\u3001Node\u306e\u7ba1\u7406\u306a\u3069\u3092\u884c\u3046\u3002\n  * \u7ba1\u7406\u3059\u308b\u5074\u306e\u30de\u30b7\u30f3\u3002\n* Node:\n  * Chef \u3067\u69cb\u6210\u7ba1\u7406\u3055\u308c\u308b\u30de\u30b7\u30f3\u3002\n  * \u7ba1\u7406\u3055\u308c\u308b\u5074\u306e\u30de\u30b7\u30f3\u3002\n\n\u203b Chef-Solo \u306f\u4eca\u5f8c\u306f\u975e\u63a8\u5968\u306b\u306a\u308b\u3063\u307d\u3044? ([\u516c\u5f0f\u30d6\u30ed\u30b0\u3088\u308a](https://www.chef.io/blog/2014/06/24/from-solo-to-zero-migrating-to-chef-client-local-mode/))\u3002\n\u304c\u3001\u307e\u3060\u60c5\u5831\u304c\u932f\u7d9c\u3057\u3066\u3044\u308b\u307d\u3044\u306e\u3067\u3001\u4eca\u56de\u306f Chef-Solo \u3067\u3044\u304f\u3002\n\n## Chef Server \u3092\u7528\u3044\u308b\u5834\u5408\n\u30b5\u30fc\u30d0\u30fc/\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u7248\u3002\u4e00\u5fdc\u53c2\u8003\u307e\u3067\u306b\u8a18\u8f09\u3002\n\u6bd4\u8f03\u7684\u5927\u898f\u6a21\u306a\u30b7\u30b9\u30c6\u30e0\u3092\u7ba1\u7406\u3059\u308b\u5834\u5408\u3053\u3061\u3089\u306e\u69cb\u6210\u3067\u7528\u3044\u308b\u3002\n\u8a73\u3057\u304f\u306f\u4ed6\u306e\u8cc7\u6599\u3092\u63a2\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n* Chef Server:\n  * Cookbook\u306e\u7ba1\u7406\u3001Node\u306e\u7ba1\u7406\u3092\u884c\u3046\u30de\u30b7\u30f3\u3002\n* Nodes:\n  * Chef \u3067\u69cb\u6210\u7ba1\u7406\u3055\u308c\u308b\u30de\u30b7\u30f3\u3002\n* Workstation:\n  * Cookbook\u7b49\u306e\u958b\u767a\u30fb\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3092\u884c\u3046\u30de\u30b7\u30f3\u3002\n\n# Chef \u74b0\u5883\u306e\u69cb\u7bc9\n\u4eca\u56de\u306f\u30ed\u30fc\u30ab\u30eb\u30de\u30b7\u30f3\u306e MacBook Pro (Retina, 13-inch, Late 2013) \u306b\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u3002\nOS \u306f Yosemite \u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u6e08\u307f\u3002\n\n## \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u4f5c\u6210\n```\n$ mkdir ~/chef_repo # \u4efb\u610f\u306e\u5834\u6240\u306b\u4f5c\u6210\n$ cd ~/chef_repo\n```\n\n## Chef\u30fbKnife-Solo\u30fbBerkshelf \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nRuby 1.9 \u4ee5\u4e0a\u304c\u5fc5\u8981\u3002OSX Yosemite \u306e\u5834\u5408\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5165\u3063\u3066\u3044\u308bRuby\u3067OK\u3002\n\u4ee5\u4e0b\u306e Gemfile \u3092 `~/chef_repo` \u4ee5\u4e0b\u306b\u4f5c\u6210\u3002\n\n```ruby:Gemfile\nsource \"https://rubygems.org\"\n\ngem 'chef'\ngem 'knife-solo'\ngem 'berkshelf'\n```\n\nBundler\u3067Gem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```\n$ bundle install --path vendor/bundle\n```\n\n\u3053\u308c\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u3002\n\n# Vagrant \u3067\u30c6\u30b9\u30c8\u7528\u30b5\u30fc\u30d0\u30fc\u69cb\u7bc9\nVagrant \u81ea\u4f53\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u8aac\u660e\u306f\u5272\u611b\u3002\n\n\u4eca\u56de\u306f CentOS6.5 \u306e \u30a4\u30e1\u30fc\u30b8\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3046\u3002\n\u307e\u305f\u3001\u4eee\u60f3\u74b0\u5883\u306e\u4f5c\u6210\u5148\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f `~/projects/chef_zero_test` \u3068\u3057\u305f\u3002\n\n```\n$ vagrant box add centos6.5 https://github.com/2creatives/vagrant-centos/releases/download/v6.5.3/centos65-x86_64-20140116.box\n$ mkdir ~/projects\n$ mkdir ~/projects/chef_zero_test\n$ cd ~/projects/chef_zero_test\n$ vagrant init centos6.5\n```\n\n\u4f5c\u6210\u3055\u308c\u305f `Vagrantfile` \u306e\u4e2d\u3092\u4e0b\u8a18\u306e\u3088\u3046\u306b\u7de8\u96c6\u3059\u308b\u3002\n\n```ruby:Vagrantfile\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\nVAGRANTFILE_API_VERSION = \"2\"\n\nVagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n  config.vm.box = \"centos6.5\"\n  config.vm.box_url = \"https://github.com/2creatives/vagrant-centos/releases/download/v6.5.3/centos65-x86_64-20140116.box\"\n  config.vm.network \"private_network\", ip: \"192.168.33.10\"\n  config.vm.provider \"virtualbox\" do |vb|\n    vb.customize [\"modifyvm\", :id, \"--memory\", \"4096\"]\n  end\nend\n```\n\n\u3053\u308c\u3067\u30ed\u30fc\u30ab\u30eb\u304b\u3089 192.168.33.10 \u3067\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n```\n$ vagrant up\n```\n\n\u3067\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7acb\u3061\u4e0a\u3052\u3066\u304a\u304f\u3002\n\n# \u4eee\u60f3\u30de\u30b7\u30f3\u3078\u306eChef\u74b0\u5883\u5c0e\u5165\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3002\n`[sudo \u6a29\u9650\u306e\u3042\u308b\u30e6\u30fc\u30b6\u30fc]@[IP\u30a2\u30c9\u30ec\u30b9]` \u3092\u5f15\u6570\u306b\u3001\n`-i [\u79d8\u5bc6\u9375\u306e\u5834\u6240]` \u3092\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u6307\u5b9a\u3057\u3066\u3084\u308b\u3068\u52d5\u3044\u305f\u3002\n\n```\n$ bundle exec knife solo prepare vagrant@192.168.33.10 -i ~/.vagrant.d/insecure_private_key\nBootstrapping Chef...\n...\nPreparing... ########################################### [100%]\n1:chef ########################################### [100%]\nThank you for installing Chef!\nGenerating node config 'nodes/192.168.33.10.json'...\n```\n\nNode \u306e\u78ba\u8a8d\u3002\n\n```\n$ bundle exec knife node list -z\n192.168.33.10\n$ bundle exec knife node show 192.168.33.10 -z\nNode Name: 192.168.33.10\nEnvironment: _default\nFQDN:\nIP: 192.168.33.10\nRun List:\nRoles:\nRecipes:\nPlatform:\nTags:\n```\n\n\u7121\u4e8b\u767b\u9332\u3055\u308c\u305f\u6a21\u69d8\u3002\n\n# Cookbook \u306e\u9069\u7528\n## Cookbook \u306e\u53d6\u5f97\n\u4eca\u56de\u306f Berkshelf \u3092\u5229\u7528\u3057\u3066\u30af\u30c3\u30af\u30d6\u30c3\u30af\u3092\u7ba1\u7406\u3059\u308b\u3002\n\u8a66\u3057\u306b Chef \u306e\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3067\u4f5c\u6210\u3055\u308c\u305f Emacs \u306e Cookbook \u3092\u53d6\u5f97\u3057\u3066\u307f\u308b\u3002\n\n\u4ee5\u4e0b\u306e\u5185\u5bb9\u306e Berksfile \u3092 `~/chef_repo` \u306b\u4f5c\u6210\u3002\n\n```ruby:Berksfile\nsource \"https://api.berkshelf.com\"\n\ncookbook 'emacs'\n```\n\nCookbook \u3092\u53d6\u5f97\u3059\u308b\u3002\n\n```\n$ bundle exec berks vendor cookbooks\n```\n\n## Run List \u306e\u8a2d\u5b9a\n\u5bfe\u8c61\u306e Node \u306e json \u30d5\u30a1\u30a4\u30eb\u306e run_list \u306b Cookbook \u540d\u3092\u8ffd\u52a0\u3002\n\n```json:nodes/192.168.33.10.json\n{\n  \"run_list\": [\n    \"recipe[emacs]\"\n  ],\n  \"automatic\": {\n    \"ipaddress\": \"192.168.33.10\"\n  }\n}\n```\n\nRun List \u304c\u66f4\u65b0\u3055\u308c\u305f\u304b\u78ba\u8a8d\u3002\n\n```\n$ bundle exec knife node show 192.168.33.10 -z\nWARNING: No knife configuration file found\nNode Name:   192.168.33.10\nEnvironment: _default\nFQDN:        \nIP:          192.168.33.10\nRun List:    recipe[emacs]\nRoles:       \nRecipes:     \nPlatform:     \nTags:  \n```\n\n## Cookbook \u306e\u8a2d\u5b9a\u53cd\u6620\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066Node\u306bCookbook\u3092\u9069\u7528\u3059\u308b\u3002\n\n```\n$ bundle exec knife solo cook vagrant@192.168.33.10 -i ~/.vagrant.d/insecure_private_key\nRunning Chef on 192.168.33.10...\nChecking Chef version...\nInstalling Berkshelf cookbooks to 'cookbooks'...\nResolving cookbook dependencies...\nUsing emacs (0.9.0)\nVendoring emacs (0.9.0) to cookbooks/emacs\nUploading the kitchen...\nGenerating solo config...\nRunning Chef...\nStarting Chef Client, version 12.0.3\nCompiling Cookbooks...\nConverging 1 resources\nRecipe: emacs::default\n* yum_package[emacs-nox] action install\n- install version 23.1-25.el6 of package emacs-nox\n\nRunning handlers:\nRunning handlers complete\nChef Client finished, 1/1 resources updated in 24.896140136 seconds\n```\n\n## \u7d50\u679c\u306e\u78ba\u8a8d\n\n```\n$ cd ~/projects/chef_zero_test\n$ vagrant ssh\n```\n\n\u4e0a\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u4eee\u60f3\u74b0\u5883\u306b\u30ed\u30b0\u30a4\u30f3\u3002\nEmacs\u3092\u8d77\u52d5\u3057\u3066\u307f\u308b\u3002\n\n```\n$ emacs\n```\n\n\u3053\u308c\u3067 Emacs \u304c\u8d77\u52d5\u3059\u308c\u3070OK\u3002\n\n# \u3055\u3044\u3054\u306b\n\u3053\u3053\u307e\u3067\u3067\u4ed6\u4eba\u304c\u66f8\u3044\u305f Cookbook \u3092\u53d6\u5f97\u3057\u3001\n\u5bfe\u8c61\u306e\u30de\u30b7\u30f3\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3053\u308d\u307e\u3067\u306f\u30b3\u30fc\u30c9\u5316\u3067\u304d\u305f\u3002\n\n\u3064\u307e\u308a Vagrantfile\u3001Gemfile\u3001Berksfile \u304c\u3042\u308c\u3070\u3001\n\u540c\u4e00\u74b0\u5883\u304c\u7c21\u5358\u306b\u518d\u73fe\u53ef\u80fd\u3068\u306a\u3063\u305f\u3002\n\n\u6b21\u306f\u81ea\u4f5c\u306e Cookbook \u306e\u4f5c\u6210 & \u9069\u7528\u304b\u3002\n", "tags": ["chef", "chef-solo", "Berkshelf", "vagrant"]}