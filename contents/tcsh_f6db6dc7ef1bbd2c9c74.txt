{"context": " More than 1 year has passed since last update.http://jawsug-cli.doorkeeper.jp/events/19360 \u3067\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\u3067\u3059\u3002\nAWS CLI\u3092\u5229\u7528\u3057\u3066\u3001ElasticBeanstalk\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u66f4\u65b0\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u524d\u63d0\u6761\u4ef6\n\nIAM\u3078\u306e\u6a29\u9650\n\nElasticBeanstalk\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\n\n\u30dd\u30ea\u30b7\u30fc\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n{\n    \"GroupName\": \"beanstalk_full\", \n    \"PolicyDocument\": {\n        \"Version\": \"2012-10-17\", \n        \"Statement\": [\n            {\n                \"Action\": [\n                    \"elasticbeanstalk:*\", \n                    \"ec2:*\", \n                    \"elasticloadbalancing:*\", \n                    \"autoscaling:*\", \n                    \"cloudwatch:*\", \n                    \"s3:*\", \n                    \"sns:*\", \n                    \"cloudformation:*\", \n                    \"rds:*\", \n                    \"sqs:*\", \n                    \"iam:CreateRole\",\n                    \"iam:CreateInstanceProfile\",\n                    \"iam:GetUser\",\n                    \"iam:ListInstanceProfiles\",\n                    \"iam:ListRoles\", \n                    \"iam:PassRole\"\n                ], \n                \"Resource\": \"*\", \n                \"Effect\": \"Allow\"\n            }\n        ]\n    }, \n    \"PolicyName\": \"beanstalk_full\"\n}\n\n\n\nAWS CLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\n\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\nAWS CLI 1.7.12\n\n\n\n\n0. \u6e96\u5099\n\n\u5909\u6570\u306e\u78ba\u8a8d\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n      AWS_DEFAULT_REGION:   ${AWS_DEFAULT_REGION}\n      AWS_DEFAULT_PROFILE:  ${AWS_DEFAULT_PROFILE}\n      EB_APP_NAME:         \"${EB_APP_NAME}\"\n      EB_ENV_NAME:         \"${EB_ENV_NAME}\"\n      EB_ENV_ID:           \"${EB_ENV_ID}\"\n      S3_BUCKET_NAME:       ${S3_BUCKET_NAME}\n\nETX\n\n\n\nEB_APP_NAME\n\n\u30b3\u30de\u30f3\u30c9\nEB_APP_NAME='My First Elastic Beanstalk Application'\n\n\n\nEB_ENV_NAME\n\n\u30b3\u30de\u30f3\u30c9\nEB_ENV_NAME='Default-Environment'\n\n\n\n\u30b3\u30de\u30f3\u30c9\nEB_ENV_ID=`aws elasticbeanstalk describe-environments --application-name \"${EB_APP_NAME}\" --environment-names \"${EB_ENV_NAME}\" --query 'Environments[].EnvironmentId' --output text` \\\n        && echo ${EB_ENV_ID}\n\n\n      e-xxxxxxxxxx\n\n\u30ce\u30fc\u30c8: Environment\u306f\u3001Environment ID\u3068Environment Name\u306e2\u3064\u3067\u7279\u5b9a\u3067\n  \u304d\u307e\u3059\u304c \u3001\u3053\u3053\u3067\u306f\u306a\u308b\u3079\u304fEnvironment ID\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nS3_BUCKET_NAME\n\n\u30b3\u30de\u30f3\u30c9\nAWS_ID=`aws iam get-user --query 'User.Arn' --output text | sed 's/^.*:://' | sed 's/:.*$//'` \\\n        && echo ${AWS_ID}\n\n\n\n\u30b3\u30de\u30f3\u30c9\nS3_BUCKET_NAME=\"elasticbeanstalk-${AWS_DEFAULT_REGION}-${AWS_ID}\"\n      echo ${S3_BUCKET_NAME}\n\n\n\n1. \u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u4f5c\u6210\n\n1.1. \u65b0\u3057\u3044version\u540d\u306e\u6c7a\u5b9a\n\n\u30b3\u30de\u30f3\u30c9\nEB_VER_LABEL='Sample Application Second Version'\n\n\n\n1.2. \u65b0version\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u6e96\u5099\n\n\u30b3\u30de\u30f3\u30c9(\u66f4\u65b0)\nSRC_EB_VER='https://elasticbeanstalk-samples-us-east-1.s3.amazonaws.com/php-secondsample.zip'\n\n\n\n\u30b3\u30de\u30f3\u30c9\nFILE_EB_VER=`echo ${SRC_EB_VER} | sed 's/^.*\\///'` \\\n        && echo ${FILE_EB_VER}\n\n\n\n\u30b3\u30de\u30f3\u30c9\ncurl ${SRC_EB_VER} > ${FILE_EB_VER}\n\n\n\n\u7d50\u679c(\u4f8b)\n        % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                       Dload  Upload   Total   Spent    Left  Speed\n      100  2539  100  2539    0     0   1965      0  0:00:01  0:00:01 --:--:--  2959\n\n\n\n1.3. \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306eS3\u30d0\u30b1\u30c3\u30c8\u3078\u306e\u8ee2\u9001\n\n\u30b3\u30de\u30f3\u30c9\nS3_OBJECT_NAME=\"${FILE_EB_VER}\"\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws s3 cp ${FILE_EB_VER} s3://${S3_BUCKET_NAME}/${S3_OBJECT_NAME}\n\n\n\n\u7d50\u679c(\u4f8b)\n      upload: ./php-secondsample.zip to s3://elasticbeanstalk-us-west-2-XXXXXXXXXXXX/php-secondsample.zip\n\n\n\n1.4. \u65b0version\u306e\u4f5c\u6210\n-[ \u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u5b58\u5728\u78ba\u8a8d (describe-application-versions) ]-\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-application-versions \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --version-labels \"${EB_VER_LABEL}\"\n\n\n\n\u7d50\u679c\n      {\n          \"ApplicationVersions\": []\n      }\n\n\n-[ \u65b0version\u306e\u4f5c\u6210 (create-application-version) ]-\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n      EB_APP_NAME:    \"${EB_APP_NAME}\"\n      EB_VER_LABEL:   \"${EB_VER_LABEL}\"\n      S3_BUCKET_NAME: ${S3_BUCKET_NAME}\n      S3_OBJECT_NAME: ${S3_OBJECT_NAME}\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk create-application-version \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --version-label \"${EB_VER_LABEL}\" \\\n        --source-bundle \"S3Bucket=${S3_BUCKET_NAME},S3Key=${S3_OBJECT_NAME}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"ApplicationVersion\": {\n          \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n          \"VersionLabel\": \"Sample Application Second Version\",\n          \"SourceBundle\": {\n              \"S3Bucket\": \"elasticbeanstalk-us-west-2-XXXXXXXXXXXX\",\n              \"S3Key\": \"php-secondsample.zip\"\n          },\n          \"DateUpdated\": \"2015-03-02T07:32:28.238Z\",\n          \"DateCreated\": \"2015-03-02T07:32:28.238Z\"\n        }\n      }\n\n\n-[ \u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u5b58\u5728\u78ba\u8a8d (describe-application-versions) ]-\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-application-versions \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --version-labels \"${EB_VER_LABEL}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"ApplicationVersion\": {\n          \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n          \"VersionLabel\": \"Sample Application Second Version\",\n          \"SourceBundle\": {\n              \"S3Bucket\": \"elasticbeanstalk-us-west-2-XXXXXXXXXXXX\",\n              \"S3Key\": \"php-secondsample.zip\"\n          },\n          \"DateUpdated\": \"2015-03-02T07:32:28.238Z\",\n          \"DateCreated\": \"2015-03-02T07:32:28.238Z\"\n        }\n      }\n\n\n-[ \u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d (describe-events) ]-\n\n\u30b3\u30de\u30f3\u30c9\nEB_MAX_ITEMS='3'\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-events \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --max-items ${EB_MAX_ITEMS}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"NextToken\": \"None___3\",\n        \"Events\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"47471280-c0ae-11e4-923c-6bf74ef94e2e\",\n              \"Message\": \"createApplicationVersion completed successfully.\",\n              \"EventDate\": \"2015-03-02T07:32:28.316Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"47471280-c0ae-11e4-923c-6bf74ef94e2e\",\n              \"Message\": \"Created new Application Version: Sample Application Second Version\",\n              \"EventDate\": \"2015-03-02T07:32:28.239Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"47471280-c0ae-11e4-923c-6bf74ef94e2e\",\n              \"Message\": \"createApplicationVersion is starting.\",\n              \"EventDate\": \"2015-03-02T07:32:28.196Z\"\n          }\n        ]\n      }\n\n\n\n2. \u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30ea\u30ea\u30fc\u30b9 (Environment\u306e\u66f4\u65b0)\n\n2.1.  \u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30ea\u30ea\u30fc\u30b9\n-[ Environment\u306e\u5185\u5bb9\u78ba\u8a8d (describe-environments) ]-\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-environments \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --environment-names \"${EB_ENV_NAME}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"Environments\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"VersionLabel\": \"Sample Application\",\n              \"Status\": \"Ready\",\n              \"EnvironmentId\": \"e-pm2m8tsyuc\",\n              \"EndpointURL\": \"awseb-e-p-AWSEBLoa-1JIB95ZPILT5G-1170500997.us-west-2.elb.amazonaws.com\",\n              \"SolutionStackName\": \"64bit Amazon Linux 2014.09 v1.2.0 running PHP 5.5\",\n              \"CNAME\": \"Default-Environment-dy6a8ifwuv.elasticbeanstalk.com\",\n              \"Health\": \"Green\",\n              \"Tier\": {\n                  \"Version\": \" \",\n                  \"Type\": \"Standard\",\n                  \"Name\": \"WebServer\"\n              },\n              \"DateUpdated\": \"2015-03-02T07:19:13.016Z\",\n              \"DateCreated\": \"2015-03-02T07:15:58.547Z\"\n          }\n        ]\n      }\n\n\n-[ Environment\u306e\u66f4\u65b0 (update-environment) ]-\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n        EB_ENV_ID:     ${EB_ENV_ID}\n        EB_VER_LABEL: \"${EB_VER_LABEL}\"\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk update-environment \\\n        --environment-id ${EB_ENV_ID} \\\n        --version-label \"${EB_VER_LABEL}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n        \"EnvironmentName\": \"Default-Environment\",\n        \"VersionLabel\": \"Sample Application Second Version\",\n        \"Status\": \"Updating\",\n        \"EnvironmentId\": \"e-pm2m8tsyuc\",\n        \"EndpointURL\": \"awseb-e-p-AWSEBLoa-1JIB95ZPILT5G-1170500997.us-west-2.elb.amazonaws.com\",\n        \"SolutionStackName\": \"64bit Amazon Linux 2014.09 v1.2.0 running PHP 5.5\",\n        \"CNAME\": \"Default-Environment-dy6a8ifwuv.elasticbeanstalk.com\",\n        \"Health\": \"Grey\",\n        \"Tier\": {\n          \"Version\": \" \",\n          \"Type\": \"Standard\",\n          \"Name\": \"WebServer\"\n        },\n        \"DateUpdated\": \"2015-03-02T07:38:44.798Z\",\n        \"DateCreated\": \"2015-03-02T07:15:58.547Z\"\n      }\n\n\n-[ Environment\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u78ba\u8a8d (describe-environments) ]-\n\n\u30b3\u30de\u30f3\u30c9\nEB_ENV_STATUS=`aws elasticbeanstalk describe-environments --application-name \"${EB_APP_NAME}\" --environment-ids \"${EB_ENV_ID}\" --query 'Environments[].Status' --output text` \\\n        && echo ${EB_ENV_STATUS}\n\n\n\n\u7d50\u679c\n      Ready\n\n\n\n2.2.  \u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u78ba\u8a8d\n-[ Environment\u306e\u5185\u5bb9\u78ba\u8a8d (describe-environments) ]-\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-environments \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --environment-names \"${EB_ENV_NAME}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"Environments\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Status\": \"Ready\",\n              \"EnvironmentId\": \"e-pm2m8tsyuc\",\n              \"EndpointURL\": \"awseb-e-p-AWSEBLoa-1JIB95ZPILT5G-1170500997.us-west-2.elb.amazonaws.com\",\n              \"SolutionStackName\": \"64bit Amazon Linux 2014.09 v1.2.0 running PHP 5.5\",\n              \"CNAME\": \"Default-Environment-dy6a8ifwuv.elasticbeanstalk.com\",\n              \"Health\": \"Green\",\n              \"Tier\": {\n                  \"Version\": \" \",\n                  \"Type\": \"Standard\",\n                  \"Name\": \"WebServer\"\n              },\n              \"DateUpdated\": \"2015-03-02T07:39:23.031Z\",\n              \"DateCreated\": \"2015-03-02T07:15:58.547Z\"\n          }\n        ]\n      }\n\n\n-[ \u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d (describe-events) ]-\n\n\u30b3\u30de\u30f3\u30c9\nEB_MAX_ITEMS='4'\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-events \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --environment-name ${EB_ENV_NAME} \\\n        --max-items ${EB_MAX_ITEMS}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"NextToken\": \"None___4\",\n        \"Events\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"27a71ad0-c0af-11e4-b0ba-53a9554007d2\",\n              \"Message\": \"Environment update completed successfully.\",\n              \"EventDate\": \"2015-03-02T07:39:22.880Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"27a71ad0-c0af-11e4-b0ba-53a9554007d2\",\n              \"Message\": \"New application version was deployed to running EC2 instances.\",\n              \"EventDate\": \"2015-03-02T07:39:22.835Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"27a71ad0-c0af-11e4-b0ba-53a9554007d2\",\n              \"Message\": \"Deploying new version to instance(s).\",\n              \"EventDate\": \"2015-03-02T07:39:10.447Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"27a71ad0-c0af-11e4-b0ba-53a9554007d2\",\n              \"Message\": \"Environment update is starting.\",\n              \"EventDate\": \"2015-03-02T07:38:44.748Z\"\n          }\n        ]\n      }\n\n\n-[ URL\u306e\u53d6\u5f97 ]-\n\n\u30b3\u30de\u30f3\u30c9\nEB_CNAME_URL=`aws elasticbeanstalk describe-environments --application-name \"${EB_APP_NAME}\" --environment-names \"${EB_ENV_NAME}\" --query 'Environments[].CNAME' --output text` \\\n        && echo ${EB_CNAME_URL}\n\n\n\n\u7d50\u679c\n      Default-Environment-xxxxxxxxxxxx.elasticbeanstalk.com\n\n\n-[ \u30a2\u30af\u30bb\u30b9\u78ba\u8a8d ]-\n\u30d6\u30e9\u30a6\u30b6\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\n\u3046\u3002\n\u30ce\u30fc\u30c8: \u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u3088\u3063\u3066\u65e7\u30b3\u30f3\u30c6\u30f3\u30c4\u304c\u898b\u3048\u3066\u3044\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n  \u305d\u306e\u5834\u5408 \u306f\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u30af\u30ea\u30a2\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n3. version\u66f4\u65b0\nversion\u306edescription\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002\n-[ version\u306e\u5185\u5bb9\u78ba\u8a8d (describe-application-versions) ]-\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-application-versions \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --version-labels \"${EB_VER_LABEL}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"ApplicationVersions\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"SourceBundle\": {\n                  \"S3Bucket\": \"elasticbeanstalk-us-west-2-XXXXXXXXXXXX\",\n                  \"S3Key\": \"php-secondsample.zip\"\n              },\n              \"DateUpdated\": \"2015-03-02T07:32:28.238Z\",\n              \"DateCreated\": \"2015-03-02T07:32:28.238Z\"\n          }\n        ]\n      }\n\n\n-[ version\u306e\u66f4\u65b0 (update-application-version) ]-\n\n\u30b3\u30de\u30f3\u30c9\nEB_VER_DESC='hands-on version'\n\n\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n      EB_APP_NAME:  \"${EB_APP_NAME}\"\n      EB_VER_LABEL: \"${EB_VER_LABEL}\"\n      EB_VER_DESC:  \"${EB_VER_DESC}\"\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk update-application-version \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --version-label \"${EB_VER_LABEL}\" \\\n        --description \"${EB_VER_DESC}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"ApplicationVersion\": {\n          \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n          \"VersionLabel\": \"Sample Application Second Version\",\n          \"Description\": \"hands-on version\",\n          \"DateCreated\": \"2015-03-02T07:32:28.238Z\",\n          \"DateUpdated\": \"2015-03-02T07:45:58.767Z\",\n          \"SourceBundle\": {\n              \"S3Bucket\": \"elasticbeanstalk-us-west-2-XXXXXXXXXXXX\",\n              \"S3Key\": \"php-secondsample.zip\"\n          }\n        }\n      }\n\n\n-[ version\u306e\u5185\u5bb9\u78ba\u8a8d (describe-application-versions) ]-\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-application-versions \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --version-labels \"${EB_VER_LABEL}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"ApplicationVersions\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Description\": \"hands-on version\",\n              \"DateCreated\": \"2015-03-02T07:32:28.238Z\",\n              \"DateUpdated\": \"2015-03-02T07:45:58.767Z\",\n              \"SourceBundle\": {\n                  \"S3Bucket\": \"elasticbeanstalk-us-west-2-XXXXXXXXXXXX\",\n                  \"S3Key\": \"php-secondsample.zip\"\n              }\n          }\n        ]\n      }\n\n\n-[ \u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d (describe-events) ]-\n\n\u30b3\u30de\u30f3\u30c9\nEB_MAX_ITEMS='2'\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-events \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --max-items ${EB_MAX_ITEMS}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"NextToken\": \"None___2\",\n        \"Events\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"2a66bab1-c0b0-11e4-99d0-e3965e27cbd3\",\n              \"Message\": \"updateApplicationVersion completed successfully.\",\n              \"EventDate\": \"2015-03-02T07:45:58.828Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"2a66bab1-c0b0-11e4-99d0-e3965e27cbd3\",\n              \"Message\": \"updateApplicationVersion is starting.\",\n              \"EventDate\": \"2015-03-02T07:45:58.722Z\"\n          }\n        ]\n      }\n\n\n\n4. \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u66f4\u65b0\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306edescription\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002\n-[ \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5185\u5bb9\u78ba\u8a8d (describe-applications) ]-\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-applications \\\n        --application-name \"${EB_APP_NAME}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"Applications\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"ConfigurationTemplates\": [],\n              \"DateUpdated\": \"2015-03-02T07:08:07.952Z\",\n              \"Versions\": [\n                  \"Sample Application Second Version\",\n                  \"Sample Application\"\n              ],\n              \"DateCreated\": \"2015-03-02T07:08:07.952Z\"\n          }\n        ]\n      }\n\n\n\n\u30b3\u30de\u30f3\u30c9\nEB_APP_DESC='hands-on app'\n\n\n-[ \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306eDescription\u66f4\u65b0 (update-application) ]-\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n      EB_APP_NAME: \"${EB_APP_NAME}\"\n      EB_APP_DESC: \"${EB_APP_DESC}\"\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk update-application \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --description \"${EB_APP_DESC}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"Application\": {\n          \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n          \"Description\": \"hands-on app\",\n          \"Versions\": [\n              \"Sample Application Second Version\",\n              \"Sample Application\"\n          ],\n          \"DateCreated\": \"2015-03-02T07:08:07.952Z\",\n          \"ConfigurationTemplates\": [],\n          \"DateUpdated\": \"2015-03-02T07:50:35.104Z\"\n        }\n      }\n\n\n-[ \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5185\u5bb9\u78ba\u8a8d (describe-applications) ]-\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-applications \\\n        --application-name \"${EB_APP_NAME}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"Applications\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"Description\": \"hands-on app\",\n              \"Versions\": [\n                  \"Sample Application Second Version\",\n                  \"Sample Application\"\n              ],\n              \"DateCreated\": \"2015-03-02T07:08:07.952Z\",\n              \"ConfigurationTemplates\": [],\n              \"DateUpdated\": \"2015-03-02T07:50:35.104Z\"\n          }\n        ]\n      }\n\n\n-[ \u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d (describe-events) ]-\n\n\u30b3\u30de\u30f3\u30c9\nEB_MAX_ITEMS='2'\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws elasticbeanstalk describe-events \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --max-items ${EB_MAX_ITEMS}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"NextToken\": \"None___2\",\n        \"Events\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"Message\": \"updateApplication completed successfully.\",\n              \"Severity\": \"INFO\",\n              \"EventDate\": \"2015-03-02T07:50:35.278Z\",\n              \"RequestId\": \"cf2605c8-c0b0-11e4-923c-6bf74ef94e2e\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"Message\": \"updateApplication is starting.\",\n              \"Severity\": \"INFO\",\n              \"EventDate\": \"2015-03-02T07:50:35.061Z\",\n              \"RequestId\": \"cf2605c8-c0b0-11e4-923c-6bf74ef94e2e\"\n          }\n        ]\n      }\n\n\n\n\u5b8c\u4e86\n\u6b21\u306b\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5ec3\u6b62\u3068\u5f8c\u59cb\u672b\u3092\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nhttp://qiita.com/tcsh/items/8ab7eb7dd06d1c575c2e\nhttp://jawsug-cli.doorkeeper.jp/events/19360 \u3067\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\u3067\u3059\u3002\n\nAWS CLI\u3092\u5229\u7528\u3057\u3066\u3001ElasticBeanstalk\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u66f4\u65b0\u3057\u3066\u307f\u307e\u3059\u3002\n\n\n\u524d\u63d0\u6761\u4ef6\n========\n\n\nIAM\u3078\u306e\u6a29\u9650\n-----------\n\n* ElasticBeanstalk\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\n```json:\u30dd\u30ea\u30b7\u30fc\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n{\n    \"GroupName\": \"beanstalk_full\", \n    \"PolicyDocument\": {\n        \"Version\": \"2012-10-17\", \n        \"Statement\": [\n            {\n                \"Action\": [\n                    \"elasticbeanstalk:*\", \n                    \"ec2:*\", \n                    \"elasticloadbalancing:*\", \n                    \"autoscaling:*\", \n                    \"cloudwatch:*\", \n                    \"s3:*\", \n                    \"sns:*\", \n                    \"cloudformation:*\", \n                    \"rds:*\", \n                    \"sqs:*\", \n                    \"iam:CreateRole\",\n                    \"iam:CreateInstanceProfile\",\n                    \"iam:GetUser\",\n                    \"iam:ListInstanceProfiles\",\n                    \"iam:ListRoles\", \n                    \"iam:PassRole\"\n                ], \n                \"Resource\": \"*\", \n                \"Effect\": \"Allow\"\n            }\n        ]\n    }, \n    \"PolicyName\": \"beanstalk_full\"\n}\n```\n\n\nAWS CLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n-------------------\n\n* \u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\n  * AWS CLI 1.7.12\n\n\n\n\n0. \u6e96\u5099\n=======\n\n\n\u5909\u6570\u306e\u78ba\u8a8d\n----------\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n      AWS_DEFAULT_REGION:   ${AWS_DEFAULT_REGION}\n      AWS_DEFAULT_PROFILE:  ${AWS_DEFAULT_PROFILE}\n      EB_APP_NAME:         \"${EB_APP_NAME}\"\n      EB_ENV_NAME:         \"${EB_ENV_NAME}\"\n      EB_ENV_ID:           \"${EB_ENV_ID}\"\n      S3_BUCKET_NAME:       ${S3_BUCKET_NAME}\n\nETX\n```\n\n\nEB_APP_NAME\n-----------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_APP_NAME='My First Elastic Beanstalk Application'\n```\n\n\nEB_ENV_NAME\n-----------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_ENV_NAME='Default-Environment'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_ENV_ID=`aws elasticbeanstalk describe-environments --application-name \"${EB_APP_NAME}\" --environment-names \"${EB_ENV_NAME}\" --query 'Environments[].EnvironmentId' --output text` \\\n        && echo ${EB_ENV_ID}\n```\n\n```\u7d50\u679c(\u4f8b):\n      e-xxxxxxxxxx\n```\n\n\u30ce\u30fc\u30c8: Environment\u306f\u3001Environment ID\u3068Environment Name\u306e2\u3064\u3067\u7279\u5b9a\u3067\n  \u304d\u307e\u3059\u304c \u3001\u3053\u3053\u3067\u306f\u306a\u308b\u3079\u304fEnvironment ID\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\nS3_BUCKET_NAME\n--------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nAWS_ID=`aws iam get-user --query 'User.Arn' --output text | sed 's/^.*:://' | sed 's/:.*$//'` \\\n        && echo ${AWS_ID}\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nS3_BUCKET_NAME=\"elasticbeanstalk-${AWS_DEFAULT_REGION}-${AWS_ID}\"\n      echo ${S3_BUCKET_NAME}\n```\n\n\n1. \u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u4f5c\u6210\n=====================\n\n\n1.1. \u65b0\u3057\u3044version\u540d\u306e\u6c7a\u5b9a\n--------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_VER_LABEL='Sample Application Second Version'\n```\n\n\n1.2. \u65b0version\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u6e96\u5099\n--------------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9(\u66f4\u65b0):\nSRC_EB_VER='https://elasticbeanstalk-samples-us-east-1.s3.amazonaws.com/php-secondsample.zip'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nFILE_EB_VER=`echo ${SRC_EB_VER} | sed 's/^.*\\///'` \\\n        && echo ${FILE_EB_VER}\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\ncurl ${SRC_EB_VER} > ${FILE_EB_VER}\n```\n\n```text:\u7d50\u679c(\u4f8b):\n        % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                       Dload  Upload   Total   Spent    Left  Speed\n      100  2539  100  2539    0     0   1965      0  0:00:01  0:00:01 --:--:--  2959\n```\n\n\n1.3. \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306eS3\u30d0\u30b1\u30c3\u30c8\u3078\u306e\u8ee2\u9001\n-------------------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nS3_OBJECT_NAME=\"${FILE_EB_VER}\"\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws s3 cp ${FILE_EB_VER} s3://${S3_BUCKET_NAME}/${S3_OBJECT_NAME}\n```\n\n```text:\u7d50\u679c(\u4f8b):\n      upload: ./php-secondsample.zip to s3://elasticbeanstalk-us-west-2-XXXXXXXXXXXX/php-secondsample.zip\n```\n\n\n1.4. \u65b0version\u306e\u4f5c\u6210\n--------------------\n\n-[ \u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u5b58\u5728\u78ba\u8a8d (describe-application-versions) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-application-versions \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --version-labels \"${EB_VER_LABEL}\"\n```\n\n```json:\u7d50\u679c:\n      {\n          \"ApplicationVersions\": []\n      }\n```\n\n-[ \u65b0version\u306e\u4f5c\u6210 (create-application-version) ]-\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n      EB_APP_NAME:    \"${EB_APP_NAME}\"\n      EB_VER_LABEL:   \"${EB_VER_LABEL}\"\n      S3_BUCKET_NAME: ${S3_BUCKET_NAME}\n      S3_OBJECT_NAME: ${S3_OBJECT_NAME}\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk create-application-version \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --version-label \"${EB_VER_LABEL}\" \\\n        --source-bundle \"S3Bucket=${S3_BUCKET_NAME},S3Key=${S3_OBJECT_NAME}\"\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"ApplicationVersion\": {\n          \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n          \"VersionLabel\": \"Sample Application Second Version\",\n          \"SourceBundle\": {\n              \"S3Bucket\": \"elasticbeanstalk-us-west-2-XXXXXXXXXXXX\",\n              \"S3Key\": \"php-secondsample.zip\"\n          },\n          \"DateUpdated\": \"2015-03-02T07:32:28.238Z\",\n          \"DateCreated\": \"2015-03-02T07:32:28.238Z\"\n        }\n      }\n```\n\n-[ \u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u5b58\u5728\u78ba\u8a8d (describe-application-versions) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-application-versions \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --version-labels \"${EB_VER_LABEL}\"\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"ApplicationVersion\": {\n          \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n          \"VersionLabel\": \"Sample Application Second Version\",\n          \"SourceBundle\": {\n              \"S3Bucket\": \"elasticbeanstalk-us-west-2-XXXXXXXXXXXX\",\n              \"S3Key\": \"php-secondsample.zip\"\n          },\n          \"DateUpdated\": \"2015-03-02T07:32:28.238Z\",\n          \"DateCreated\": \"2015-03-02T07:32:28.238Z\"\n        }\n      }\n```\n\n-[ \u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d (describe-events) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_MAX_ITEMS='3'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-events \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --max-items ${EB_MAX_ITEMS}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"NextToken\": \"None___3\",\n        \"Events\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"47471280-c0ae-11e4-923c-6bf74ef94e2e\",\n              \"Message\": \"createApplicationVersion completed successfully.\",\n              \"EventDate\": \"2015-03-02T07:32:28.316Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"47471280-c0ae-11e4-923c-6bf74ef94e2e\",\n              \"Message\": \"Created new Application Version: Sample Application Second Version\",\n              \"EventDate\": \"2015-03-02T07:32:28.239Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"47471280-c0ae-11e4-923c-6bf74ef94e2e\",\n              \"Message\": \"createApplicationVersion is starting.\",\n              \"EventDate\": \"2015-03-02T07:32:28.196Z\"\n          }\n        ]\n      }\n```\n\n\n2. \u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30ea\u30ea\u30fc\u30b9 (Environment\u306e\u66f4\u65b0)\n=============================================\n\n\n2.1.  \u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30ea\u30ea\u30fc\u30b9\n----------------------------\n\n-[ Environment\u306e\u5185\u5bb9\u78ba\u8a8d (describe-environments) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-environments \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --environment-names \"${EB_ENV_NAME}\"\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"Environments\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"VersionLabel\": \"Sample Application\",\n              \"Status\": \"Ready\",\n              \"EnvironmentId\": \"e-pm2m8tsyuc\",\n              \"EndpointURL\": \"awseb-e-p-AWSEBLoa-1JIB95ZPILT5G-1170500997.us-west-2.elb.amazonaws.com\",\n              \"SolutionStackName\": \"64bit Amazon Linux 2014.09 v1.2.0 running PHP 5.5\",\n              \"CNAME\": \"Default-Environment-dy6a8ifwuv.elasticbeanstalk.com\",\n              \"Health\": \"Green\",\n              \"Tier\": {\n                  \"Version\": \" \",\n                  \"Type\": \"Standard\",\n                  \"Name\": \"WebServer\"\n              },\n              \"DateUpdated\": \"2015-03-02T07:19:13.016Z\",\n              \"DateCreated\": \"2015-03-02T07:15:58.547Z\"\n          }\n        ]\n      }\n```\n\n-[ Environment\u306e\u66f4\u65b0 (update-environment) ]-\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n        EB_ENV_ID:     ${EB_ENV_ID}\n        EB_VER_LABEL: \"${EB_VER_LABEL}\"\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk update-environment \\\n        --environment-id ${EB_ENV_ID} \\\n        --version-label \"${EB_VER_LABEL}\"\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n        \"EnvironmentName\": \"Default-Environment\",\n        \"VersionLabel\": \"Sample Application Second Version\",\n        \"Status\": \"Updating\",\n        \"EnvironmentId\": \"e-pm2m8tsyuc\",\n        \"EndpointURL\": \"awseb-e-p-AWSEBLoa-1JIB95ZPILT5G-1170500997.us-west-2.elb.amazonaws.com\",\n        \"SolutionStackName\": \"64bit Amazon Linux 2014.09 v1.2.0 running PHP 5.5\",\n        \"CNAME\": \"Default-Environment-dy6a8ifwuv.elasticbeanstalk.com\",\n        \"Health\": \"Grey\",\n        \"Tier\": {\n          \"Version\": \" \",\n          \"Type\": \"Standard\",\n          \"Name\": \"WebServer\"\n        },\n        \"DateUpdated\": \"2015-03-02T07:38:44.798Z\",\n        \"DateCreated\": \"2015-03-02T07:15:58.547Z\"\n      }\n```\n\n-[ Environment\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u78ba\u8a8d (describe-environments) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_ENV_STATUS=`aws elasticbeanstalk describe-environments --application-name \"${EB_APP_NAME}\" --environment-ids \"${EB_ENV_ID}\" --query 'Environments[].Status' --output text` \\\n        && echo ${EB_ENV_STATUS}\n```\n\n```text:\u7d50\u679c:\n      Ready\n```\n\n\n2.2.  \u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u78ba\u8a8d\n------------------------\n\n-[ Environment\u306e\u5185\u5bb9\u78ba\u8a8d (describe-environments) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-environments \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --environment-names \"${EB_ENV_NAME}\"\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"Environments\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Status\": \"Ready\",\n              \"EnvironmentId\": \"e-pm2m8tsyuc\",\n              \"EndpointURL\": \"awseb-e-p-AWSEBLoa-1JIB95ZPILT5G-1170500997.us-west-2.elb.amazonaws.com\",\n              \"SolutionStackName\": \"64bit Amazon Linux 2014.09 v1.2.0 running PHP 5.5\",\n              \"CNAME\": \"Default-Environment-dy6a8ifwuv.elasticbeanstalk.com\",\n              \"Health\": \"Green\",\n              \"Tier\": {\n                  \"Version\": \" \",\n                  \"Type\": \"Standard\",\n                  \"Name\": \"WebServer\"\n              },\n              \"DateUpdated\": \"2015-03-02T07:39:23.031Z\",\n              \"DateCreated\": \"2015-03-02T07:15:58.547Z\"\n          }\n        ]\n      }\n```\n\n-[ \u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d (describe-events) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_MAX_ITEMS='4'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-events \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --environment-name ${EB_ENV_NAME} \\\n        --max-items ${EB_MAX_ITEMS}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"NextToken\": \"None___4\",\n        \"Events\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"27a71ad0-c0af-11e4-b0ba-53a9554007d2\",\n              \"Message\": \"Environment update completed successfully.\",\n              \"EventDate\": \"2015-03-02T07:39:22.880Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"27a71ad0-c0af-11e4-b0ba-53a9554007d2\",\n              \"Message\": \"New application version was deployed to running EC2 instances.\",\n              \"EventDate\": \"2015-03-02T07:39:22.835Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"27a71ad0-c0af-11e4-b0ba-53a9554007d2\",\n              \"Message\": \"Deploying new version to instance(s).\",\n              \"EventDate\": \"2015-03-02T07:39:10.447Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"EnvironmentName\": \"Default-Environment\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"27a71ad0-c0af-11e4-b0ba-53a9554007d2\",\n              \"Message\": \"Environment update is starting.\",\n              \"EventDate\": \"2015-03-02T07:38:44.748Z\"\n          }\n        ]\n      }\n```\n\n-[ URL\u306e\u53d6\u5f97 ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_CNAME_URL=`aws elasticbeanstalk describe-environments --application-name \"${EB_APP_NAME}\" --environment-names \"${EB_ENV_NAME}\" --query 'Environments[].CNAME' --output text` \\\n        && echo ${EB_CNAME_URL}\n```\n\n```text:\u7d50\u679c:\n      Default-Environment-xxxxxxxxxxxx.elasticbeanstalk.com\n```\n\n-[ \u30a2\u30af\u30bb\u30b9\u78ba\u8a8d ]-\n\n\u30d6\u30e9\u30a6\u30b6\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\n\u3046\u3002\n\n\u30ce\u30fc\u30c8: \u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u3088\u3063\u3066\u65e7\u30b3\u30f3\u30c6\u30f3\u30c4\u304c\u898b\u3048\u3066\u3044\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n  \u305d\u306e\u5834\u5408 \u306f\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u30af\u30ea\u30a2\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n3. version\u66f4\u65b0\n==============\n\nversion\u306edescription\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002\n\n-[ version\u306e\u5185\u5bb9\u78ba\u8a8d (describe-application-versions) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-application-versions \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --version-labels \"${EB_VER_LABEL}\"\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"ApplicationVersions\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"SourceBundle\": {\n                  \"S3Bucket\": \"elasticbeanstalk-us-west-2-XXXXXXXXXXXX\",\n                  \"S3Key\": \"php-secondsample.zip\"\n              },\n              \"DateUpdated\": \"2015-03-02T07:32:28.238Z\",\n              \"DateCreated\": \"2015-03-02T07:32:28.238Z\"\n          }\n        ]\n      }\n```\n\n-[ version\u306e\u66f4\u65b0 (update-application-version) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_VER_DESC='hands-on version'\n```\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n      EB_APP_NAME:  \"${EB_APP_NAME}\"\n      EB_VER_LABEL: \"${EB_VER_LABEL}\"\n      EB_VER_DESC:  \"${EB_VER_DESC}\"\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk update-application-version \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --version-label \"${EB_VER_LABEL}\" \\\n        --description \"${EB_VER_DESC}\"\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"ApplicationVersion\": {\n          \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n          \"VersionLabel\": \"Sample Application Second Version\",\n          \"Description\": \"hands-on version\",\n          \"DateCreated\": \"2015-03-02T07:32:28.238Z\",\n          \"DateUpdated\": \"2015-03-02T07:45:58.767Z\",\n          \"SourceBundle\": {\n              \"S3Bucket\": \"elasticbeanstalk-us-west-2-XXXXXXXXXXXX\",\n              \"S3Key\": \"php-secondsample.zip\"\n          }\n        }\n      }\n```\n\n-[ version\u306e\u5185\u5bb9\u78ba\u8a8d (describe-application-versions) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-application-versions \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --version-labels \"${EB_VER_LABEL}\"\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"ApplicationVersions\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Description\": \"hands-on version\",\n              \"DateCreated\": \"2015-03-02T07:32:28.238Z\",\n              \"DateUpdated\": \"2015-03-02T07:45:58.767Z\",\n              \"SourceBundle\": {\n                  \"S3Bucket\": \"elasticbeanstalk-us-west-2-XXXXXXXXXXXX\",\n                  \"S3Key\": \"php-secondsample.zip\"\n              }\n          }\n        ]\n      }\n```\n\n-[ \u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d (describe-events) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_MAX_ITEMS='2'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-events \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --max-items ${EB_MAX_ITEMS}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"NextToken\": \"None___2\",\n        \"Events\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"2a66bab1-c0b0-11e4-99d0-e3965e27cbd3\",\n              \"Message\": \"updateApplicationVersion completed successfully.\",\n              \"EventDate\": \"2015-03-02T07:45:58.828Z\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"VersionLabel\": \"Sample Application Second Version\",\n              \"Severity\": \"INFO\",\n              \"RequestId\": \"2a66bab1-c0b0-11e4-99d0-e3965e27cbd3\",\n              \"Message\": \"updateApplicationVersion is starting.\",\n              \"EventDate\": \"2015-03-02T07:45:58.722Z\"\n          }\n        ]\n      }\n```\n\n\n4. \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u66f4\u65b0\n=========================\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306edescription\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002\n\n-[ \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5185\u5bb9\u78ba\u8a8d (describe-applications) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-applications \\\n        --application-name \"${EB_APP_NAME}\"\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"Applications\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"ConfigurationTemplates\": [],\n              \"DateUpdated\": \"2015-03-02T07:08:07.952Z\",\n              \"Versions\": [\n                  \"Sample Application Second Version\",\n                  \"Sample Application\"\n              ],\n              \"DateCreated\": \"2015-03-02T07:08:07.952Z\"\n          }\n        ]\n      }\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_APP_DESC='hands-on app'\n```\n\n-[ \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306eDescription\u66f4\u65b0 (update-application) ]-\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n      EB_APP_NAME: \"${EB_APP_NAME}\"\n      EB_APP_DESC: \"${EB_APP_DESC}\"\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk update-application \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --description \"${EB_APP_DESC}\"\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"Application\": {\n          \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n          \"Description\": \"hands-on app\",\n          \"Versions\": [\n              \"Sample Application Second Version\",\n              \"Sample Application\"\n          ],\n          \"DateCreated\": \"2015-03-02T07:08:07.952Z\",\n          \"ConfigurationTemplates\": [],\n          \"DateUpdated\": \"2015-03-02T07:50:35.104Z\"\n        }\n      }\n```\n\n-[ \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5185\u5bb9\u78ba\u8a8d (describe-applications) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-applications \\\n        --application-name \"${EB_APP_NAME}\"\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"Applications\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"Description\": \"hands-on app\",\n              \"Versions\": [\n                  \"Sample Application Second Version\",\n                  \"Sample Application\"\n              ],\n              \"DateCreated\": \"2015-03-02T07:08:07.952Z\",\n              \"ConfigurationTemplates\": [],\n              \"DateUpdated\": \"2015-03-02T07:50:35.104Z\"\n          }\n        ]\n      }\n```\n\n-[ \u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d (describe-events) ]-\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nEB_MAX_ITEMS='2'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws elasticbeanstalk describe-events \\\n        --application-name \"${EB_APP_NAME}\" \\\n        --max-items ${EB_MAX_ITEMS}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"NextToken\": \"None___2\",\n        \"Events\": [\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"Message\": \"updateApplication completed successfully.\",\n              \"Severity\": \"INFO\",\n              \"EventDate\": \"2015-03-02T07:50:35.278Z\",\n              \"RequestId\": \"cf2605c8-c0b0-11e4-923c-6bf74ef94e2e\"\n          },\n          {\n              \"ApplicationName\": \"My First Elastic Beanstalk Application\",\n              \"Message\": \"updateApplication is starting.\",\n              \"Severity\": \"INFO\",\n              \"EventDate\": \"2015-03-02T07:50:35.061Z\",\n              \"RequestId\": \"cf2605c8-c0b0-11e4-923c-6bf74ef94e2e\"\n          }\n        ]\n      }\n```\n\n\n\u5b8c\u4e86\n====\n\n\u6b21\u306b\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5ec3\u6b62\u3068\u5f8c\u59cb\u672b\u3092\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\nhttp://qiita.com/tcsh/items/8ab7eb7dd06d1c575c2e\n", "tags": ["AWS", "aws-cli", "ElasticBeanstalk"]}