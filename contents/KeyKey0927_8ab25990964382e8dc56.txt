{"context": "\u30b5\u30fc\u30d0\uff08CentOS6.4\uff09\u306e\u30c7\u30fc\u30bf\u3092NAS\uff08TS-121\uff09\u306b\u4fdd\u5b58\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u8aa4\u3063\u3066\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\nLinux\u306b\u3066\u524a\u9664(rm)\u3057\u3066\u3057\u307e\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u5fa9\u5143\u3059\u308b\u3010CentOS\u3011\n\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3057\u3066CentOS\u306bextundelete\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u305f\u304cNFS\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u5fa9\u5143\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\nTS-121\u306fLinux\u3067\u7a3c\u52d5\u3057\u3066\u3044\u308b\u306e\u3067\u3053\u3061\u3089\u3067extundelete\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u5fa9\u5143\u3092\u8a66\u307f\u307e\u3059\u3002\nCentOS\u306f\u30b0\u30ed\u30fc\u30d0\u30eb\u306b\u7e4b\u304c\u3063\u3066\u3044\u307e\u3059\u304cTS-121\u306f\u307b\u307c\u521d\u671f\u72b6\u614b\u3067\u30ed\u30fc\u30ab\u30eb\u3067\u306e\u307f\u7e4b\u304c\u3063\u3066\u3044\u307e\u3059\u3002\n\u9060\u9694\u5730\u306b\u3042\u308b\u305f\u3081TS-121\u3092\u30b0\u30ed\u30fc\u30d0\u30eb\u306b\u63a5\u7d9a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\n\u3068\u308a\u3042\u3048\u305aRead-Only\u306b\nCentOS\u304b\u3089TS-121\u306b\u63a5\u7d9a\n# ssh -l admin 192.168.XXX.XXX\n\n\u8a72\u5f53\u306e\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u78ba\u8a8d\u3057\u3066Read-Only\u306b\n# mount\n# mount -o remount,ro /dev/sda0\n\n\nipkg\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nCentOS\u4e0a\u306bipkg\u306e\u30df\u30e9\u30fc\u3092\u4f5c\u308b\n# mkdir -p /home/fugafuga/public_html/hogehoge; cd $_\n# wget -r -np -nd -w2 --random-wait http://ipkg.nslu2-linux.org/feeds/optware/cs08q1armel/cross/stable/\n\nipkg\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# mount -t tmpfs tmpfs /opt\n# mkdir -p /opt/ipkglib\n# ln -sf /opt/ipkglib /usr/lib/ipkg\n# cd /opt\n# wget http://192.168.XXX.YYY/hogehoge/ipkg-opt_0.99.163-10_arm.ipk\n# tar xvfz ipkg-opt_0.99.163-10_arm.ipk\n# tar xvfz data.tar.gz -C /\n\n\u72ec\u81ea\u30df\u30e9\u30fc\u3092\u53c2\u7167\u3059\u308b\u3088\u3046\u306b\u3059\u308b\n\n/opt/etc/ipkg.conf\n# src/gz openwrt-ixp4xx http://ipkg.nslu2-linux.org/feeds/optware/openwrt-ixp4xx/cross/unstable/\nsrc qnap http://192.168.XXX.YYY/hogehoge #\u8ffd\u52a0\ndest root /\n\n\nipkg\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u3057\u3066\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# /opt/bin/ipkg update\n# /opt/bin/ipkg install optware-devel\n# /opt/bin/ipkg install e2fslibs\n# /opt/bin/ipkg install e2fslibs-dev\n# /opt/bin/ipkg install e2fsprogs\n\n\nextundelete\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nCentOS\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n# cd /tmp\n# wget --no-check-certificate http://sourceforge.net/projects/extundelete/files/extundelete/0.2.4/extundelete-0.2.4.tar.bz2/download\n\nSCP\u3067\u53d7\u4fe1\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# cd /opt\n# scp -P XXXX hogehoge@192.168.XXX.YYY:/tmp/extundelete-0.2.4.tar.bz2 ./extundelete-0.2.4.tar.bz2\n# tar -xvjf extundelete-0.2.4.tar.bz2\n# cd extundelete-0.2.4\n# mv /bin/sed /bin/_sed\n# export PATH=/opt/bin:/opt/sbin:$PATH\n# ./configure --prefix=/opt\n# make\n# make install\n\n\u30d1\u30b9\u3092\u901a\u3059\n# echo \"/opt/lib\" >> /etc/ld.so.conf\n# ldconfig /etc/ld.so.conf\n\n\n\u611f\u52d5\u306e\u77ac\u9593\n# /opt/bin/extundelete --restore-all --after XXXXXXXXXX /dev/sda0 /foo/bar\n\n\n\u53c2\u8003\uff1aQNAPCLUB - [Howto]: RAID/Disaster recovery & undelete\nhttp://forum.qnapclub.de/viewtopic.php?f=80&t=17264\n\n\u30b5\u30fc\u30d0\uff08CentOS6.4\uff09\u306e\u30c7\u30fc\u30bf\u3092NAS\uff08TS-121\uff09\u306b\u4fdd\u5b58\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u8aa4\u3063\u3066\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n[Linux\u306b\u3066\u524a\u9664(rm)\u3057\u3066\u3057\u307e\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u5fa9\u5143\u3059\u308b\u3010CentOS\u3011](http://qiita.com/satoken0417/items/c1535b7d3322ac0d69ca)\n\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3057\u3066CentOS\u306b*extundelete*\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u305f\u304cNFS\u4e0a\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u5fa9\u5143\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\nTS-121\u306fLinux\u3067\u7a3c\u52d5\u3057\u3066\u3044\u308b\u306e\u3067\u3053\u3061\u3089\u3067*extundelete*\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u5fa9\u5143\u3092\u8a66\u307f\u307e\u3059\u3002\nCentOS\u306f\u30b0\u30ed\u30fc\u30d0\u30eb\u306b\u7e4b\u304c\u3063\u3066\u3044\u307e\u3059\u304cTS-121\u306f\u307b\u307c\u521d\u671f\u72b6\u614b\u3067\u30ed\u30fc\u30ab\u30eb\u3067\u306e\u307f\u7e4b\u304c\u3063\u3066\u3044\u307e\u3059\u3002\n\u9060\u9694\u5730\u306b\u3042\u308b\u305f\u3081TS-121\u3092\u30b0\u30ed\u30fc\u30d0\u30eb\u306b\u63a5\u7d9a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\n## \u3068\u308a\u3042\u3048\u305aRead-Only\u306b\n\nCentOS\u304b\u3089TS-121\u306b\u63a5\u7d9a\n\n```\n# ssh -l admin 192.168.XXX.XXX\n```\n\n\u8a72\u5f53\u306e\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u78ba\u8a8d\u3057\u3066Read-Only\u306b\n\n```\n# mount\n# mount -o remount,ro /dev/sda0\n```\n\n## ipkg\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nCentOS\u4e0a\u306bipkg\u306e\u30df\u30e9\u30fc\u3092\u4f5c\u308b\n\n```\n# mkdir -p /home/fugafuga/public_html/hogehoge; cd $_\n# wget -r -np -nd -w2 --random-wait http://ipkg.nslu2-linux.org/feeds/optware/cs08q1armel/cross/stable/\n```\n\nipkg\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n# mount -t tmpfs tmpfs /opt\n# mkdir -p /opt/ipkglib\n# ln -sf /opt/ipkglib /usr/lib/ipkg\n# cd /opt\n# wget http://192.168.XXX.YYY/hogehoge/ipkg-opt_0.99.163-10_arm.ipk\n# tar xvfz ipkg-opt_0.99.163-10_arm.ipk\n# tar xvfz data.tar.gz -C /\n```\n\n\u72ec\u81ea\u30df\u30e9\u30fc\u3092\u53c2\u7167\u3059\u308b\u3088\u3046\u306b\u3059\u308b\n\n```bash:/opt/etc/ipkg.conf\n# src/gz openwrt-ixp4xx http://ipkg.nslu2-linux.org/feeds/optware/openwrt-ixp4xx/cross/unstable/\nsrc qnap http://192.168.XXX.YYY/hogehoge #\u8ffd\u52a0\ndest root /\n```\n\nipkg\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u3057\u3066\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n# /opt/bin/ipkg update\n# /opt/bin/ipkg install optware-devel\n# /opt/bin/ipkg install e2fslibs\n# /opt/bin/ipkg install e2fslibs-dev\n# /opt/bin/ipkg install e2fsprogs\n```\n\n## extundelete\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nCentOS\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n```\n# cd /tmp\n# wget --no-check-certificate http://sourceforge.net/projects/extundelete/files/extundelete/0.2.4/extundelete-0.2.4.tar.bz2/download\n```\n\nSCP\u3067\u53d7\u4fe1\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n# cd /opt\n# scp -P XXXX hogehoge@192.168.XXX.YYY:/tmp/extundelete-0.2.4.tar.bz2 ./extundelete-0.2.4.tar.bz2\n# tar -xvjf extundelete-0.2.4.tar.bz2\n# cd extundelete-0.2.4\n# mv /bin/sed /bin/_sed\n# export PATH=/opt/bin:/opt/sbin:$PATH\n# ./configure --prefix=/opt\n# make\n# make install\n```\n\n\u30d1\u30b9\u3092\u901a\u3059\n\n```\n# echo \"/opt/lib\" >> /etc/ld.so.conf\n# ldconfig /etc/ld.so.conf\n```\n\n## \u611f\u52d5\u306e\u77ac\u9593\n\n```\n# /opt/bin/extundelete --restore-all --after XXXXXXXXXX /dev/sda0 /foo/bar\n```\n\n> \u53c2\u8003\uff1aQNAPCLUB - [Howto]: RAID/Disaster recovery & undelete\n> http://forum.qnapclub.de/viewtopic.php?f=80&t=17264\n", "tags": ["Qnap", "NAS"]}