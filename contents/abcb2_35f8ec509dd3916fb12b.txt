{"context": "Logical Volume Manager\u3092\u5229\u7528\u3057\u3066\u307f\u308b\u3002\n\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3068\u3057\u3066\u6271\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u67d4\u8edf\u306a\u30c7\u30a3\u30b9\u30af\u7ba1\u7406\u3092\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\nPV(Physical Volume)\u304b\u3089\nVG(Volume Group)\u3092\u4f5c\u308a\nLV(Logical Volume)\u3068\u3057\u3066\u67d4\u8edf\u306b\u6271\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\u624b\u3054\u308d\u306a\u30b5\u30f3\u30d7\u30eb\u3092aws\u306eec2\u3092\u7528\u3044\u3066\u8a66\u3057\u307e\u3059\u3002\n\namazon-linux\u3092\u6e96\u5099\n\n\u4e00\u756a\u5c0f\u3055\u306a\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3088\u3057\n\n\n\u521d\u671f\u72b6\u614b\n# lsblk\nNAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT\nxvda    202:0    0   8G  0 disk \n\u2514\u2500xvda1 202:1    0   8G  0 part /\n\n# df -h\nFilesystem      Size  Used Avail Use% Mounted on\ndevtmpfs        236M   56K  236M   1% /dev\ntmpfs           246M     0  246M   0% /dev/shm\n/dev/xvda1      7.8G  981M  6.7G  13% /\n\n\nEBS\u3092\u30a2\u30bf\u30c3\u30c1\u3059\u308b\naws\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u308915G\u3076\u3093\u3092\u30a2\u30bf\u30c3\u30c1\u3059\u308b\u3002aws\u30b3\u30f3\u30bd\u30fc\u30eb\u4e0a\u3067\u306f/dev/sdf\u3068\u3057\u3066\u898b\u3048\u308b\u304c\u3001SSH\u3067\u30b3\u30de\u30f3\u30c9\u3092\u767a\u884c\u3057\u3066\u78ba\u8a8d\u3059\u308b\u3068xvdf\u3068\u3057\u3066\u8a8d\u8b58\u3055\u308c\u3066\u3044\u308b\u3002\n# lsblk\nNAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT\nxvda    202:0    0   8G  0 disk \n\u2514\u2500xvda1 202:1    0   8G  0 part /\nxvdf    202:80   0  15G  0 disk \n\n# fdisk -l\nDisk /dev/xvda: 8589 MB, 8589934592 bytes, 16777216 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: gpt\n\n\n#         Start          End    Size  Type            Name\n 1         4096     16777182      8G  Linux filesyste Linux\n128         2048         4095      1M  BIOS boot parti BIOS Boot Partition\n\nDisk /dev/xvdf: 16.1 GB, 16106127360 bytes, 31457280 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n\n\nLVM\u3068\u3057\u3066\u7ba1\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n\nfdisk\u30b3\u30de\u30f3\u30c9\u3067/dev/xvdf\u5168\u4f53\u3092\u8a2d\u5b9a\u3059\u308b\n# fdisk /dev/xvdf \nWelcome to fdisk (util-linux 2.23.2).\n\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\nDevice does not contain a recognized partition table\nBuilding a new DOS disklabel with disk identifier 0xa7d87ac1.\n\nCommand (m for help): p\n\nDisk /dev/xvdf: 16.1 GB, 16106127360 bytes, 31457280 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0xa7d87ac1\n\n[root@ip-172-31-8-150 ~]# fdisk /dev/xvdf \nWelcome to fdisk (util-linux 2.23.2).\n\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\nDevice does not contain a recognized partition table\nBuilding a new DOS disklabel with disk identifier 0xa3a6cc9c.\n\nCommand (m for help): n\nPartition type:\n   p   primary (0 primary, 0 extended, 4 free)\n   e   extended\nSelect (default p): \nUsing default response p\nPartition number (1-4, default 1): \nFirst sector (2048-31457279, default 2048): \nUsing default value 2048\nLast sector, +sectors or +size{K,M,G} (2048-31457279, default 31457279): \nUsing default value 31457279\nPartition 1 of type Linux and of size 15 GiB is set\n\nCommand (m for help): t\nSelected partition 1\nHex code (type L to list all codes): 8e\nChanged type of partition 'Linux' to 'Linux LVM'\n\nCommand (m for help): w\nThe partition table has been altered!\n\nCalling ioctl() to re-read partition table.\nSyncing disks.\n\n\nPV(Physical Volume)\u3092\u4f5c\u6210\u3059\u308b\npvcreate, pvdisplay\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3057\u307e\u3059\n# pvcreate /dev/xvdf1 \n  Physical volume \"/dev/sdf1\" successfully created\n\n# pvdisplay\n  \"/dev/sdf1\" is a new physical volume of \"15.00 GiB\"\n  --- NEW Physical volume ---\n  PV Name               /dev/sdf1\n  VG Name               \n  PV Size               15.00 GiB\n  Allocatable           NO\n  PE Size               0   \n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               gIK9sh-g23t-n0oB-k4yL-pfUe-Af1u-V7CmpQ\n\n\nVG(Volume Group)\u3092\u4f5c\u6210\u3059\u308b\nvgcreate, vgdisplay, vgscan\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n# vgcreate VGroup /dev/xvdf1                                                                              \n  Volume group \"VGroup\" successfully created\n# vgdisplay \n  --- Volume group ---\n  VG Name               VGroup\n  System ID             \n  Format                lvm2\n  Metadata Areas        1\n  Metadata Sequence No  1\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                0\n  Cur LV                0\n  Open LV               0\n  Max PV                0\n  Cur PV                1\n  Act PV                1\n  VG Size               15.00 GiB\n  PE Size               4.00 MiB\n  Total PE              3839\n  Alloc PE / Size       0 / 0   \n  Free  PE / Size       3839 / 15.00 GiB\n  VG UUID               zZ2Sl1-uJr0-6U61-3YBW-FeDu-nv9W-ELGxR7\n\n# vgscan\n  Reading all physical volumes.  This may take a while...\n  Found volume group \"VGroup\" using metadata type lvm2\n\n\nLV(Logical Volume)\u3092\u4f5c\u6210\u3059\u308b\nlvcreate, lvdisplay, lvscan\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n# lvcreate --name myspace -l 100%FREE VGroup\n  Logical volume \"myspace\" created.\n\n# lvdisplay \n  --- Logical volume ---\n  LV Path                /dev/VGroup/myspace\n  LV Name                myspace\n  VG Name                VGroup\n  LV UUID                wMl2eq-Mkjh-TQip-Ntdd-K6Fo-v7HX-Tsm0Vw\n  LV Write Access        read/write\n  LV Creation host, time ip-172-31-8-150, 2017-01-11 02:40:46 +0000\n  LV Status              available\n  # open                 0\n  LV Size                15.00 GiB\n  Current LE             3839\n  Segments               1\n  Allocation             inherit\n  Read ahead sectors     auto\n  - currently set to     256\n  Block device           253:0\n\n# lvscan\n  ACTIVE            '/dev/VGroup/myspace' [15.00 GiB] inherit\n\n\n\u73fe\u5728\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3059\u308b\n# lsblk\nNAME               MAJ:MIN RM SIZE RO TYPE MOUNTPOINT\nxvda               202:0    0   8G  0 disk \n\u2514\u2500xvda1            202:1    0   8G  0 part /\nxvdf               202:80   0  15G  0 disk \n\u2514\u2500xvdf1            202:81   0  15G  0 part \n  \u2514\u2500VGroup-myspace 253:0    0  15G  0 lvm  \n\n# fdisk -l\nWARNING: fdisk GPT support is currently new, and therefore in an experimental phase. Use at your own discretion.\n\nDisk /dev/xvda: 8589 MB, 8589934592 bytes, 16777216 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: gpt\n\n#         Start          End    Size  Type            Name\n 1         4096     16777182      8G  Linux filesyste Linux\n128         2048         4095      1M  BIOS boot parti BIOS Boot Partition\n\nDisk /dev/xvdf: 16.1 GB, 16106127360 bytes, 31457280 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0xa3a6cc9c\n\n    Device Boot      Start         End      Blocks   Id  System\n/dev/xvdf1            2048    31457279    15727616   8e  Linux LVM\n\nDisk /dev/mapper/VGroup-myspace: 16.1 GB, 16101933056 bytes, 31449088 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n\n\n\u5229\u7528\u53ef\u80fd\u306b\u3059\u308b\n\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3059\u308b\n# mkfs.ext4 /dev/VGroup/myspace                                                                           \nmke2fs 1.42.12 (29-Aug-2014)\nCreating filesystem with 3931136 4k blocks and 983040 inodes\nFilesystem UUID: bf4aaeb0-e7e9-43cf-b089-6f70c0a717f3\nSuperblock backups stored on blocks: \n        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208\n\nAllocating group tables: done                            \nWriting inode tables: done                            \nCreating journal (32768 blocks): done\nWriting superblocks and filesystem accounting information: done  \n\n\nLV(Logical Volumne)\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\n# mkdir /mnt/myspace\n# mount /dev/VGroup/myspace /mnt/myspace\n# df -h\nFilesystem                  Size  Used Avail Use% Mounted on\ndevtmpfs                    236M   68K  236M   1% /dev\ntmpfs                       246M     0  246M   0% /dev/shm\n/dev/xvda1                  7.8G  981M  6.7G  13% /\n/dev/mapper/VGroup-myspace   15G   38M   14G   1% /mnt/myspace\n\n\n\u30e9\u30d9\u30eb\u3092\u4f5c\u6210\u3057fstab\u306b\u8a2d\u5b9a\u3059\u308b\n# e2label /dev/VGroup/myspace /myspace\n\n# cat /etc/fstab                                                                                          \n#\nLABEL=/     /           ext4    defaults,noatime  1   1\nLABEL=/myspace /mnt/myspace ext4 defaults 1 2\ntmpfs       /dev/shm    tmpfs   defaults        0   0\ndevpts      /dev/pts    devpts  gid=5,mode=620  0   0\nsysfs       /sys        sysfs   defaults        0   0\nproc        /proc       proc    defaults        0   0\n\n\u518d\u8d77\u52d5\u5f8c\u3082mount\u3055\u308c\u305f\u72b6\u614b\u3067\u8d77\u52d5\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n\nLV(Logical Volume)\u3092\u30b5\u30a4\u30ba\u3092\u5909\u66f4\u3057\u3066\u307f\u308b\n/dev/xvdf\u306e\u5168\u90e8\u3092\u4f7f\u3044\u5207\u3063\u3066\u3044\u308b\u72b6\u614b\u306a\u306e\u3067\u4e0b\u8a18\u306e\u9806\u756a\u3067\u8a66\u3057\u3066\u307f\u308b\n\nLV\u30b5\u30a4\u30ba\u3092\u7e2e\u5c0f\u3059\u308b\nLV\u30b5\u30a4\u30ba\u3092\u5143\u306b\u623b\u3059\nEBS\u3092\u65b0\u898f\u306b\u30a2\u30bf\u30c3\u30c1\u3057\u3066LV\u3092\u62e1\u5f35\u3059\u308b\n\n\nLV\u30b5\u30a4\u30ba\u3092\u7e2e\u5c0f\u3059\u308b\n\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u78ba\u8a8d\u3059\u308b\n# blockdev --getbsz /dev/VGroup/myspace \n4096\n\n10G\u306b\u5909\u66f4\u3059\u308b\u306e\u3067\u30d6\u30ed\u30c3\u30af\u6570\u3092\u691c\u51fa\u3059\u308b\n\u5272\u308a\u5207\u308c\u306a\u3044\u5834\u5408\u306f\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u30921\u5207\u308a\u4e0a\u3052\u308c\u3070\u3088\u3044\u3068\u3002\n# echo \"(1 * 1024 * 1024 * 1024 * 10) % 4096\" | bc\n0\n# echo \"(1 * 1024 * 1024 * 1024 * 10) / 4096\" | bc\n2621440\n\n\u78ba\u8a8d\u30b3\u30de\u30f3\u30c9(e2fsck)\u3092\u5b9f\u884c\u3057\u3066\u304b\u3089\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u5909\u66f4(resize2fs)\n# e2fsck -f /dev/VGroup/myspace                                                                           \ne2fsck 1.42.12 (29-Aug-2014)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/myspace: 12/983040 files (0.0% non-contiguous), 104065/3931136 blocks\n\n# resize2fs /dev/VGroup/myspace 2621440\nresize2fs 1.42.12 (29-Aug-2014)\nResizing the filesystem on /dev/VGroup/myspace to 2621440 (4k) blocks.\nThe filesystem on /dev/VGroup/myspace is now 2621440 (4k) blocks long.\n\n# e2fsck /dev/VGroup/myspace                                                                              \ne2fsck 1.42.12 (29-Aug-2014)\n/myspace: clean, 12/655360 files, 82544/2621440 blocks\n\nLV\u30b5\u30a4\u30ba\u3092\u7e2e\u5c0f\u3059\u308b(lvreduce)\n# lvreduce -L10G /dev/VGroup/myspace \n  WARNING: Reducing active logical volume to 10.00 GiB\n  THIS MAY DESTROY YOUR DATA (filesystem etc.)\nDo you really want to reduce myspace? [y/n]: y\n  Size of logical volume VGroup/myspace changed from 15.00 GiB (3839 extents) to 10.00 GiB (2560 extents).\n  Logical volume myspace successfully resized\n\n\u30de\u30a6\u30f3\u30c8\u3057\u3066\u78ba\u8a8d\u3057\u3066\u307f\u308b\n# mount /dev/VGroup/myspace /mnt/myspace/\n\n# df -h                                                                                                   \nFilesystem                  Size  Used Avail Use% Mounted on\ndevtmpfs                    236M   68K  236M   1% /dev\ntmpfs                       246M     0  246M   0% /dev/shm\n/dev/xvda1                  7.8G  981M  6.7G  13% /\n/dev/mapper/VGroup-myspace  9.8G   34M  9.2G   1% /mnt/myspace\n\n# lsblk\nNAME               MAJ:MIN RM SIZE RO TYPE MOUNTPOINT\nxvda               202:0    0   8G  0 disk \n\u2514\u2500xvda1            202:1    0   8G  0 part /\nxvdf               202:80   0  15G  0 disk \n\u2514\u2500xvdf1            202:81   0  15G  0 part \n  \u2514\u2500VGroup-myspace 253:0    0  10G  0 lvm  /mnt/myspace\n\n\nLV\u30b5\u30a4\u30ba\u3092\u5143\u306b\u623b\u3059\n\u7d30\u304b\u3044\u8a08\u7b97\u306f\u7701\u304f\uff57\n# umount /dev/VGroup/myspace\n\n# lvextend -L 15G /dev/VGroup/myspace \n  Insufficient free space: 1280 extents needed, but only 1279 available\n\n# lvextend -L 14.9G /dev/VGroup/myspace \n  Rounding size to boundary between physical extents: 14.90 GiB\n  Size of logical volume VGroup/myspace changed from 10.00 GiB (2560 extents) to 14.90 GiB (3815 extents).\n  Logical volume myspace successfully resized\n\nLV\u3092\u62e1\u5f35\u3057\u305f\u306e\u3067\u30c1\u30a7\u30c3\u30af\u3057(e2fsck)\u3001\u30d6\u30ed\u30c3\u30af\u6570\u3092\u62e1\u5f35\u3059\u308b(resize2fs)\n# e2fsck -f /dev/VGroup/myspace \ne2fsck 1.42.12 (29-Aug-2014)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/myspace: 12/655360 files (0.0% non-contiguous), 82544/2621440 blocks\n# resize2fs /dev/VGroup/myspace \nresize2fs 1.42.12 (29-Aug-2014)\nResizing the filesystem on /dev/VGroup/myspace to 3906560 (4k) blocks.\nThe filesystem on /dev/VGroup/myspace is now 3906560 (4k) blocks long.\n\n\u30de\u30a6\u30f3\u30c8\u3057\u3066\u78ba\u8a8d\u3059\u308b\n# mount /dev/VGroup/myspace /mnt/myspace\n\n# df -h                                                                                                   \nFilesystem                  Size  Used Avail Use% Mounted on\ndevtmpfs                    236M   68K  236M   1% /dev\ntmpfs                       246M     0  246M   0% /dev/shm\n/dev/xvda1                  7.8G  981M  6.7G  13% /\n/dev/mapper/VGroup-myspace   15G   38M   14G   1% /mnt/myspace\n\n# lsblk\nNAME               MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nxvda               202:0    0    8G  0 disk \n\u2514\u2500xvda1            202:1    0    8G  0 part /\nxvdf               202:80   0   15G  0 disk \n\u2514\u2500xvdf1            202:81   0   15G  0 part \n  \u2514\u2500VGroup-myspace 253:0    0 14.9G  0 lvm  /mnt/myspace\n\n\nEBS\u3092\u65b0\u898f\u306b\u30a2\u30bf\u30c3\u30c1\u3057\u3066LV\u3092\u62e1\u5f35\u3059\u308b\naws\u30b3\u30f3\u30bd\u30fc\u30eb\u4e0a\u304b\u3089EBS\u3092\u65b0\u898f\u306b\u30a2\u30bf\u30c3\u30c1\u3059\u308baws\u30b3\u30f3\u30bd\u30fc\u30eb\u4e0a\u304b\u3089/dev/sdg\u3068\u3057\u3066\u78ba\u8a8d\u3067\u304d\u308b\u304c\u30b3\u30de\u30f3\u30c9\u4e0a\u3060\u3068/dev/xvdg\u3068\u306a\u308b\n# lsblk\nNAME               MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nxvda               202:0    0    8G  0 disk \n\u2514\u2500xvda1            202:1    0    8G  0 part /\nxvdf               202:80   0   15G  0 disk \n\u2514\u2500xvdf1            202:81   0   15G  0 part \n  \u2514\u2500VGroup-myspace 253:0    0 14.9G  0 lvm  /mnt/myspace\nxvdg               202:96   0    7G  0 disk \n\n# fdisk -l /dev/xvdg                                                                                      \nDisk /dev/xvdg: 7516 MB, 7516192768 bytes, 14680064 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\u524d\u306e\u65b9\u306e\u624b\u9806\u3068\u540c\u3058\n# fdisk /dev/xvdg \nWelcome to fdisk (util-linux 2.23.2).\n\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\nDevice does not contain a recognized partition table\nBuilding a new DOS disklabel with disk identifier 0x3cc33416.\n\nCommand (m for help): n\nPartition type:\n   p   primary (0 primary, 0 extended, 4 free)\n   e   extended\nSelect (default p): \nUsing default response p\nPartition number (1-4, default 1): \nFirst sector (2048-14680063, default 2048): \nUsing default value 2048\nLast sector, +sectors or +size{K,M,G} (2048-14680063, default 14680063): \nUsing default value 14680063\nPartition 1 of type Linux and of size 7 GiB is set\n\nCommand (m for help): t\nSelected partition 1\nHex code (type L to list all codes): 8e\nChanged type of partition 'Linux' to 'Linux LVM'\n\nCommand (m for help): w\nThe partition table has been altered!\n\nCalling ioctl() to re-read partition table.\nSyncing disks.\n\n# fdisk -l /dev/xvdg                                                                                      \nDisk /dev/xvdg: 7516 MB, 7516192768 bytes, 14680064 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0x3cc33416\n\n    Device Boot      Start         End      Blocks   Id  System\n/dev/xvdg1            2048    14680063     7339008   8e  Linux LVM\n\nPV(Physical Volume)\u306e\u4f5c\u6210\n# pvcreate /dev/xvdg1 \n  Physical volume \"/dev/sdg1\" successfully created\n\n# pvdisplay /dev/xvdg1 \n  \"/dev/sdg1\" is a new physical volume of \"7.00 GiB\"\n  --- NEW Physical volume ---\n  PV Name               /dev/sdg1\n  VG Name               \n  PV Size               7.00 GiB\n  Allocatable           NO\n  PE Size               0   \n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               7mj34f-MimX-sPAX-dYHg-OpqE-L0O8-xH3hjL\n\nVG(Volume Group)\u3092\u62e1\u5f35\u3059\u308b\u3002\u65b0\u3057\u3044EBS\u3076\u3093\u306e7G\u304c\u5897\u52a0\u3057\u3066\u3044\u308b\u3002\n# vgextend VGroup /dev/xvdg1\n  Volume group \"VGroup\" successfully extended\n\n# vgdisplay \n  --- Volume group ---\n  VG Name               VGroup\n  System ID             \n  Format                lvm2\n  Metadata Areas        2\n  Metadata Sequence No  5\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                0\n  Cur LV                1\n  Open LV               0\n  Max PV                0\n  Cur PV                2\n  Act PV                2\n  VG Size               21.99 GiB\n  PE Size               4.00 MiB\n  Total PE              5630\n  Alloc PE / Size       3815 / 14.90 GiB\n  Free  PE / Size       1815 / 7.09 GiB\n  VG UUID               zZ2Sl1-uJr0-6U61-3YBW-FeDu-nv9W-ELGxR7\n\n# vgextend VGroup /dev/xvdg1\n  Volume group \"VGroup\" successfully extended\n\n# lvextend -L 21.5G /dev/VGroup/myspace \n  Size of logical volume VGroup/myspace changed from 14.90 GiB (3815 extents) to 21.50 GiB (5504 extents).\n  Logical volume myspace successfully resized\n\n# e2fsck -f /dev/VGroup/myspace \ne2fsck 1.42.12 (29-Aug-2014)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/myspace: 12/983040 files (0.0% non-contiguous), 104065/3906560 blocks\n\n# resize2fs /dev/VGroup/myspace \nresize2fs 1.42.12 (29-Aug-2014)\nResizing the filesystem on /dev/VGroup/myspace to 5636096 (4k) blocks.\nThe filesystem on /dev/VGroup/myspace is now 5636096 (4k) blocks long.\n\n\u62e1\u5f35\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n# mount /dev/VGroup/myspace /mnt/myspace/                                                                 \n[root@ip-172-31-8-150 ~]# df -h\nFilesystem                  Size  Used Avail Use% Mounted on\ndevtmpfs                    236M   76K  236M   1% /dev\ntmpfs                       246M     0  246M   0% /dev/shm\n/dev/xvda1                  7.8G  983M  6.7G  13% /\n/dev/mapper/VGroup-myspace   22G   42M   20G   1% /mnt/myspace\n[root@ip-172-31-8-150 ~]# lsblk\nNAME               MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nxvda               202:0    0    8G  0 disk \n\u2514\u2500xvda1            202:1    0    8G  0 part /\nxvdf               202:80   0   15G  0 disk \n\u2514\u2500xvdf1            202:81   0   15G  0 part \n  \u2514\u2500VGroup-myspace 253:0    0 21.5G  0 lvm  /mnt/myspace\nxvdg               202:96   0    7G  0 disk \n\u2514\u2500xvdg1            202:97   0    7G  0 part \n  \u2514\u2500VGroup-myspace 253:0    0 21.5G  0 lvm  /mnt/myspace\n\n\u3000\nLogical Volume Manager\u3092\u5229\u7528\u3057\u3066\u307f\u308b\u3002\n\u7269\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u3068\u3057\u3066\u6271\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u67d4\u8edf\u306a\u30c7\u30a3\u30b9\u30af\u7ba1\u7406\u3092\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n![\u7121\u984c.png](https://qiita-image-store.s3.amazonaws.com/0/105926/210ed844-82f5-de2a-2cdf-b87e89d7d2a6.png)\n\nPV(Physical Volume)\u304b\u3089\nVG(Volume Group)\u3092\u4f5c\u308a\nLV(Logical Volume)\u3068\u3057\u3066\u67d4\u8edf\u306b\u6271\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n\u624b\u3054\u308d\u306a\u30b5\u30f3\u30d7\u30eb\u3092aws\u306eec2\u3092\u7528\u3044\u3066\u8a66\u3057\u307e\u3059\u3002\n\n# amazon-linux\u3092\u6e96\u5099\n* \u4e00\u756a\u5c0f\u3055\u306a\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3088\u3057\n\n## \u521d\u671f\u72b6\u614b\n\n```\n# lsblk\nNAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT\nxvda    202:0    0   8G  0 disk \n\u2514\u2500xvda1 202:1    0   8G  0 part /\n\n# df -h\nFilesystem      Size  Used Avail Use% Mounted on\ndevtmpfs        236M   56K  236M   1% /dev\ntmpfs           246M     0  246M   0% /dev/shm\n/dev/xvda1      7.8G  981M  6.7G  13% /\n```\n\n## EBS\u3092\u30a2\u30bf\u30c3\u30c1\u3059\u308b\naws\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u308915G\u3076\u3093\u3092\u30a2\u30bf\u30c3\u30c1\u3059\u308b\u3002aws\u30b3\u30f3\u30bd\u30fc\u30eb\u4e0a\u3067\u306f/dev/sdf\u3068\u3057\u3066\u898b\u3048\u308b\u304c\u3001SSH\u3067\u30b3\u30de\u30f3\u30c9\u3092\u767a\u884c\u3057\u3066\u78ba\u8a8d\u3059\u308b\u3068xvdf\u3068\u3057\u3066\u8a8d\u8b58\u3055\u308c\u3066\u3044\u308b\u3002\n\n```\n# lsblk\nNAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT\nxvda    202:0    0   8G  0 disk \n\u2514\u2500xvda1 202:1    0   8G  0 part /\nxvdf    202:80   0  15G  0 disk \n\n# fdisk -l\nDisk /dev/xvda: 8589 MB, 8589934592 bytes, 16777216 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: gpt\n\n\n#         Start          End    Size  Type            Name\n 1         4096     16777182      8G  Linux filesyste Linux\n128         2048         4095      1M  BIOS boot parti BIOS Boot Partition\n\nDisk /dev/xvdf: 16.1 GB, 16106127360 bytes, 31457280 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n```\n\n# LVM\u3068\u3057\u3066\u7ba1\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n\n## fdisk\u30b3\u30de\u30f3\u30c9\u3067/dev/xvdf\u5168\u4f53\u3092\u8a2d\u5b9a\u3059\u308b\n```\n# fdisk /dev/xvdf \nWelcome to fdisk (util-linux 2.23.2).\n\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\nDevice does not contain a recognized partition table\nBuilding a new DOS disklabel with disk identifier 0xa7d87ac1.\n\nCommand (m for help): p\n\nDisk /dev/xvdf: 16.1 GB, 16106127360 bytes, 31457280 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0xa7d87ac1\n\n[root@ip-172-31-8-150 ~]# fdisk /dev/xvdf \nWelcome to fdisk (util-linux 2.23.2).\n\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\nDevice does not contain a recognized partition table\nBuilding a new DOS disklabel with disk identifier 0xa3a6cc9c.\n\nCommand (m for help): n\nPartition type:\n   p   primary (0 primary, 0 extended, 4 free)\n   e   extended\nSelect (default p): \nUsing default response p\nPartition number (1-4, default 1): \nFirst sector (2048-31457279, default 2048): \nUsing default value 2048\nLast sector, +sectors or +size{K,M,G} (2048-31457279, default 31457279): \nUsing default value 31457279\nPartition 1 of type Linux and of size 15 GiB is set\n\nCommand (m for help): t\nSelected partition 1\nHex code (type L to list all codes): 8e\nChanged type of partition 'Linux' to 'Linux LVM'\n\nCommand (m for help): w\nThe partition table has been altered!\n\nCalling ioctl() to re-read partition table.\nSyncing disks.\n```\n\n## PV(Physical Volume)\u3092\u4f5c\u6210\u3059\u308b\npvcreate, pvdisplay\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3057\u307e\u3059\n\n```\n# pvcreate /dev/xvdf1 \n  Physical volume \"/dev/sdf1\" successfully created\n\n# pvdisplay\n  \"/dev/sdf1\" is a new physical volume of \"15.00 GiB\"\n  --- NEW Physical volume ---\n  PV Name               /dev/sdf1\n  VG Name               \n  PV Size               15.00 GiB\n  Allocatable           NO\n  PE Size               0   \n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               gIK9sh-g23t-n0oB-k4yL-pfUe-Af1u-V7CmpQ\n```\n\n## VG(Volume Group)\u3092\u4f5c\u6210\u3059\u308b\nvgcreate, vgdisplay, vgscan\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n```\n# vgcreate VGroup /dev/xvdf1                                                                              \n  Volume group \"VGroup\" successfully created\n# vgdisplay \n  --- Volume group ---\n  VG Name               VGroup\n  System ID             \n  Format                lvm2\n  Metadata Areas        1\n  Metadata Sequence No  1\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                0\n  Cur LV                0\n  Open LV               0\n  Max PV                0\n  Cur PV                1\n  Act PV                1\n  VG Size               15.00 GiB\n  PE Size               4.00 MiB\n  Total PE              3839\n  Alloc PE / Size       0 / 0   \n  Free  PE / Size       3839 / 15.00 GiB\n  VG UUID               zZ2Sl1-uJr0-6U61-3YBW-FeDu-nv9W-ELGxR7\n   \n# vgscan\n  Reading all physical volumes.  This may take a while...\n  Found volume group \"VGroup\" using metadata type lvm2\n```\n\n## LV(Logical Volume)\u3092\u4f5c\u6210\u3059\u308b\nlvcreate, lvdisplay, lvscan\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n```\n# lvcreate --name myspace -l 100%FREE VGroup\n  Logical volume \"myspace\" created.\n\n# lvdisplay \n  --- Logical volume ---\n  LV Path                /dev/VGroup/myspace\n  LV Name                myspace\n  VG Name                VGroup\n  LV UUID                wMl2eq-Mkjh-TQip-Ntdd-K6Fo-v7HX-Tsm0Vw\n  LV Write Access        read/write\n  LV Creation host, time ip-172-31-8-150, 2017-01-11 02:40:46 +0000\n  LV Status              available\n  # open                 0\n  LV Size                15.00 GiB\n  Current LE             3839\n  Segments               1\n  Allocation             inherit\n  Read ahead sectors     auto\n  - currently set to     256\n  Block device           253:0\n   \n# lvscan\n  ACTIVE            '/dev/VGroup/myspace' [15.00 GiB] inherit\n```\n\n# \u73fe\u5728\u306e\u72b6\u614b\u3092\u78ba\u8a8d\u3059\u308b\n\n```\n# lsblk\nNAME               MAJ:MIN RM SIZE RO TYPE MOUNTPOINT\nxvda               202:0    0   8G  0 disk \n\u2514\u2500xvda1            202:1    0   8G  0 part /\nxvdf               202:80   0  15G  0 disk \n\u2514\u2500xvdf1            202:81   0  15G  0 part \n  \u2514\u2500VGroup-myspace 253:0    0  15G  0 lvm  \n\n# fdisk -l\nWARNING: fdisk GPT support is currently new, and therefore in an experimental phase. Use at your own discretion.\n\nDisk /dev/xvda: 8589 MB, 8589934592 bytes, 16777216 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: gpt\n\n#         Start          End    Size  Type            Name\n 1         4096     16777182      8G  Linux filesyste Linux\n128         2048         4095      1M  BIOS boot parti BIOS Boot Partition\n\nDisk /dev/xvdf: 16.1 GB, 16106127360 bytes, 31457280 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0xa3a6cc9c\n\n    Device Boot      Start         End      Blocks   Id  System\n/dev/xvdf1            2048    31457279    15727616   8e  Linux LVM\n\nDisk /dev/mapper/VGroup-myspace: 16.1 GB, 16101933056 bytes, 31449088 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n```\n\n\n# \u5229\u7528\u53ef\u80fd\u306b\u3059\u308b\n## \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3059\u308b\n\n```\n# mkfs.ext4 /dev/VGroup/myspace                                                                           \nmke2fs 1.42.12 (29-Aug-2014)\nCreating filesystem with 3931136 4k blocks and 983040 inodes\nFilesystem UUID: bf4aaeb0-e7e9-43cf-b089-6f70c0a717f3\nSuperblock backups stored on blocks: \n        32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208\n\nAllocating group tables: done                            \nWriting inode tables: done                            \nCreating journal (32768 blocks): done\nWriting superblocks and filesystem accounting information: done  \n```\n\n## LV(Logical Volumne)\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\n```\n# mkdir /mnt/myspace\n# mount /dev/VGroup/myspace /mnt/myspace\n# df -h\nFilesystem                  Size  Used Avail Use% Mounted on\ndevtmpfs                    236M   68K  236M   1% /dev\ntmpfs                       246M     0  246M   0% /dev/shm\n/dev/xvda1                  7.8G  981M  6.7G  13% /\n/dev/mapper/VGroup-myspace   15G   38M   14G   1% /mnt/myspace\n```\n\n## \u30e9\u30d9\u30eb\u3092\u4f5c\u6210\u3057fstab\u306b\u8a2d\u5b9a\u3059\u308b\n\n```\n# e2label /dev/VGroup/myspace /myspace\n\n# cat /etc/fstab                                                                                          \n#\nLABEL=/     /           ext4    defaults,noatime  1   1\nLABEL=/myspace /mnt/myspace ext4 defaults 1 2\ntmpfs       /dev/shm    tmpfs   defaults        0   0\ndevpts      /dev/pts    devpts  gid=5,mode=620  0   0\nsysfs       /sys        sysfs   defaults        0   0\nproc        /proc       proc    defaults        0   0\n```\n\n\u518d\u8d77\u52d5\u5f8c\u3082mount\u3055\u308c\u305f\u72b6\u614b\u3067\u8d77\u52d5\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n\n# LV(Logical Volume)\u3092\u30b5\u30a4\u30ba\u3092\u5909\u66f4\u3057\u3066\u307f\u308b\n\n/dev/xvdf\u306e\u5168\u90e8\u3092\u4f7f\u3044\u5207\u3063\u3066\u3044\u308b\u72b6\u614b\u306a\u306e\u3067\u4e0b\u8a18\u306e\u9806\u756a\u3067\u8a66\u3057\u3066\u307f\u308b\n\n* LV\u30b5\u30a4\u30ba\u3092\u7e2e\u5c0f\u3059\u308b\n* LV\u30b5\u30a4\u30ba\u3092\u5143\u306b\u623b\u3059\n* EBS\u3092\u65b0\u898f\u306b\u30a2\u30bf\u30c3\u30c1\u3057\u3066LV\u3092\u62e1\u5f35\u3059\u308b\n\n## LV\u30b5\u30a4\u30ba\u3092\u7e2e\u5c0f\u3059\u308b\n\n\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u78ba\u8a8d\u3059\u308b\n\n```\n# blockdev --getbsz /dev/VGroup/myspace \n4096\n```\n\n10G\u306b\u5909\u66f4\u3059\u308b\u306e\u3067\u30d6\u30ed\u30c3\u30af\u6570\u3092\u691c\u51fa\u3059\u308b\n\u5272\u308a\u5207\u308c\u306a\u3044\u5834\u5408\u306f\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u30921\u5207\u308a\u4e0a\u3052\u308c\u3070\u3088\u3044\u3068\u3002\n\n```\n# echo \"(1 * 1024 * 1024 * 1024 * 10) % 4096\" | bc\n0\n# echo \"(1 * 1024 * 1024 * 1024 * 10) / 4096\" | bc\n2621440\n```\n\n\u78ba\u8a8d\u30b3\u30de\u30f3\u30c9(e2fsck)\u3092\u5b9f\u884c\u3057\u3066\u304b\u3089\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u3092\u5909\u66f4(resize2fs)\n\n```\n# e2fsck -f /dev/VGroup/myspace                                                                           \ne2fsck 1.42.12 (29-Aug-2014)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/myspace: 12/983040 files (0.0% non-contiguous), 104065/3931136 blocks\n\n# resize2fs /dev/VGroup/myspace 2621440\nresize2fs 1.42.12 (29-Aug-2014)\nResizing the filesystem on /dev/VGroup/myspace to 2621440 (4k) blocks.\nThe filesystem on /dev/VGroup/myspace is now 2621440 (4k) blocks long.\n\n# e2fsck /dev/VGroup/myspace                                                                              \ne2fsck 1.42.12 (29-Aug-2014)\n/myspace: clean, 12/655360 files, 82544/2621440 blocks\n```\n\nLV\u30b5\u30a4\u30ba\u3092\u7e2e\u5c0f\u3059\u308b(lvreduce)\n\n```\n# lvreduce -L10G /dev/VGroup/myspace \n  WARNING: Reducing active logical volume to 10.00 GiB\n  THIS MAY DESTROY YOUR DATA (filesystem etc.)\nDo you really want to reduce myspace? [y/n]: y\n  Size of logical volume VGroup/myspace changed from 15.00 GiB (3839 extents) to 10.00 GiB (2560 extents).\n  Logical volume myspace successfully resized\n```\n\n\u30de\u30a6\u30f3\u30c8\u3057\u3066\u78ba\u8a8d\u3057\u3066\u307f\u308b\n\n```\n# mount /dev/VGroup/myspace /mnt/myspace/\n\n# df -h                                                                                                   \nFilesystem                  Size  Used Avail Use% Mounted on\ndevtmpfs                    236M   68K  236M   1% /dev\ntmpfs                       246M     0  246M   0% /dev/shm\n/dev/xvda1                  7.8G  981M  6.7G  13% /\n/dev/mapper/VGroup-myspace  9.8G   34M  9.2G   1% /mnt/myspace\n\n# lsblk\nNAME               MAJ:MIN RM SIZE RO TYPE MOUNTPOINT\nxvda               202:0    0   8G  0 disk \n\u2514\u2500xvda1            202:1    0   8G  0 part /\nxvdf               202:80   0  15G  0 disk \n\u2514\u2500xvdf1            202:81   0  15G  0 part \n  \u2514\u2500VGroup-myspace 253:0    0  10G  0 lvm  /mnt/myspace\n```\n\n## LV\u30b5\u30a4\u30ba\u3092\u5143\u306b\u623b\u3059\n\n\u7d30\u304b\u3044\u8a08\u7b97\u306f\u7701\u304f\uff57\n\n```\n# umount /dev/VGroup/myspace\n\n# lvextend -L 15G /dev/VGroup/myspace \n  Insufficient free space: 1280 extents needed, but only 1279 available\n\n# lvextend -L 14.9G /dev/VGroup/myspace \n  Rounding size to boundary between physical extents: 14.90 GiB\n  Size of logical volume VGroup/myspace changed from 10.00 GiB (2560 extents) to 14.90 GiB (3815 extents).\n  Logical volume myspace successfully resized\n```\n\nLV\u3092\u62e1\u5f35\u3057\u305f\u306e\u3067\u30c1\u30a7\u30c3\u30af\u3057(e2fsck)\u3001\u30d6\u30ed\u30c3\u30af\u6570\u3092\u62e1\u5f35\u3059\u308b(resize2fs)\n\n```\n# e2fsck -f /dev/VGroup/myspace \ne2fsck 1.42.12 (29-Aug-2014)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/myspace: 12/655360 files (0.0% non-contiguous), 82544/2621440 blocks\n# resize2fs /dev/VGroup/myspace \nresize2fs 1.42.12 (29-Aug-2014)\nResizing the filesystem on /dev/VGroup/myspace to 3906560 (4k) blocks.\nThe filesystem on /dev/VGroup/myspace is now 3906560 (4k) blocks long.\n```\n\n\u30de\u30a6\u30f3\u30c8\u3057\u3066\u78ba\u8a8d\u3059\u308b\n\n```\n# mount /dev/VGroup/myspace /mnt/myspace\n\n# df -h                                                                                                   \nFilesystem                  Size  Used Avail Use% Mounted on\ndevtmpfs                    236M   68K  236M   1% /dev\ntmpfs                       246M     0  246M   0% /dev/shm\n/dev/xvda1                  7.8G  981M  6.7G  13% /\n/dev/mapper/VGroup-myspace   15G   38M   14G   1% /mnt/myspace\n\n# lsblk\nNAME               MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nxvda               202:0    0    8G  0 disk \n\u2514\u2500xvda1            202:1    0    8G  0 part /\nxvdf               202:80   0   15G  0 disk \n\u2514\u2500xvdf1            202:81   0   15G  0 part \n  \u2514\u2500VGroup-myspace 253:0    0 14.9G  0 lvm  /mnt/myspace\n```\n\n## EBS\u3092\u65b0\u898f\u306b\u30a2\u30bf\u30c3\u30c1\u3057\u3066LV\u3092\u62e1\u5f35\u3059\u308b\naws\u30b3\u30f3\u30bd\u30fc\u30eb\u4e0a\u304b\u3089EBS\u3092\u65b0\u898f\u306b\u30a2\u30bf\u30c3\u30c1\u3059\u308baws\u30b3\u30f3\u30bd\u30fc\u30eb\u4e0a\u304b\u3089/dev/sdg\u3068\u3057\u3066\u78ba\u8a8d\u3067\u304d\u308b\u304c\u30b3\u30de\u30f3\u30c9\u4e0a\u3060\u3068/dev/xvdg\u3068\u306a\u308b\n\n```\n# lsblk\nNAME               MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nxvda               202:0    0    8G  0 disk \n\u2514\u2500xvda1            202:1    0    8G  0 part /\nxvdf               202:80   0   15G  0 disk \n\u2514\u2500xvdf1            202:81   0   15G  0 part \n  \u2514\u2500VGroup-myspace 253:0    0 14.9G  0 lvm  /mnt/myspace\nxvdg               202:96   0    7G  0 disk \n\n# fdisk -l /dev/xvdg                                                                                      \nDisk /dev/xvdg: 7516 MB, 7516192768 bytes, 14680064 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\n```\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\u524d\u306e\u65b9\u306e\u624b\u9806\u3068\u540c\u3058\n\n```\n# fdisk /dev/xvdg \nWelcome to fdisk (util-linux 2.23.2).\n\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\nDevice does not contain a recognized partition table\nBuilding a new DOS disklabel with disk identifier 0x3cc33416.\n\nCommand (m for help): n\nPartition type:\n   p   primary (0 primary, 0 extended, 4 free)\n   e   extended\nSelect (default p): \nUsing default response p\nPartition number (1-4, default 1): \nFirst sector (2048-14680063, default 2048): \nUsing default value 2048\nLast sector, +sectors or +size{K,M,G} (2048-14680063, default 14680063): \nUsing default value 14680063\nPartition 1 of type Linux and of size 7 GiB is set\n\nCommand (m for help): t\nSelected partition 1\nHex code (type L to list all codes): 8e\nChanged type of partition 'Linux' to 'Linux LVM'\n\nCommand (m for help): w\nThe partition table has been altered!\n\nCalling ioctl() to re-read partition table.\nSyncing disks.\n\n# fdisk -l /dev/xvdg                                                                                      \nDisk /dev/xvdg: 7516 MB, 7516192768 bytes, 14680064 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisk label type: dos\nDisk identifier: 0x3cc33416\n\n    Device Boot      Start         End      Blocks   Id  System\n/dev/xvdg1            2048    14680063     7339008   8e  Linux LVM\n```\n\nPV(Physical Volume)\u306e\u4f5c\u6210\n\n```\n# pvcreate /dev/xvdg1 \n  Physical volume \"/dev/sdg1\" successfully created\n\n# pvdisplay /dev/xvdg1 \n  \"/dev/sdg1\" is a new physical volume of \"7.00 GiB\"\n  --- NEW Physical volume ---\n  PV Name               /dev/sdg1\n  VG Name               \n  PV Size               7.00 GiB\n  Allocatable           NO\n  PE Size               0   \n  Total PE              0\n  Free PE               0\n  Allocated PE          0\n  PV UUID               7mj34f-MimX-sPAX-dYHg-OpqE-L0O8-xH3hjL\n```\n\nVG(Volume Group)\u3092\u62e1\u5f35\u3059\u308b\u3002\u65b0\u3057\u3044EBS\u3076\u3093\u306e7G\u304c\u5897\u52a0\u3057\u3066\u3044\u308b\u3002\n\n```\n# vgextend VGroup /dev/xvdg1\n  Volume group \"VGroup\" successfully extended\n\n# vgdisplay \n  --- Volume group ---\n  VG Name               VGroup\n  System ID             \n  Format                lvm2\n  Metadata Areas        2\n  Metadata Sequence No  5\n  VG Access             read/write\n  VG Status             resizable\n  MAX LV                0\n  Cur LV                1\n  Open LV               0\n  Max PV                0\n  Cur PV                2\n  Act PV                2\n  VG Size               21.99 GiB\n  PE Size               4.00 MiB\n  Total PE              5630\n  Alloc PE / Size       3815 / 14.90 GiB\n  Free  PE / Size       1815 / 7.09 GiB\n  VG UUID               zZ2Sl1-uJr0-6U61-3YBW-FeDu-nv9W-ELGxR7\n\n# vgextend VGroup /dev/xvdg1\n  Volume group \"VGroup\" successfully extended\n\n# lvextend -L 21.5G /dev/VGroup/myspace \n  Size of logical volume VGroup/myspace changed from 14.90 GiB (3815 extents) to 21.50 GiB (5504 extents).\n  Logical volume myspace successfully resized\n\n# e2fsck -f /dev/VGroup/myspace \ne2fsck 1.42.12 (29-Aug-2014)\nPass 1: Checking inodes, blocks, and sizes\nPass 2: Checking directory structure\nPass 3: Checking directory connectivity\nPass 4: Checking reference counts\nPass 5: Checking group summary information\n/myspace: 12/983040 files (0.0% non-contiguous), 104065/3906560 blocks\n\n# resize2fs /dev/VGroup/myspace \nresize2fs 1.42.12 (29-Aug-2014)\nResizing the filesystem on /dev/VGroup/myspace to 5636096 (4k) blocks.\nThe filesystem on /dev/VGroup/myspace is now 5636096 (4k) blocks long.\n```\n\n\u62e1\u5f35\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n\n```\n# mount /dev/VGroup/myspace /mnt/myspace/                                                                 \n[root@ip-172-31-8-150 ~]# df -h\nFilesystem                  Size  Used Avail Use% Mounted on\ndevtmpfs                    236M   76K  236M   1% /dev\ntmpfs                       246M     0  246M   0% /dev/shm\n/dev/xvda1                  7.8G  983M  6.7G  13% /\n/dev/mapper/VGroup-myspace   22G   42M   20G   1% /mnt/myspace\n[root@ip-172-31-8-150 ~]# lsblk\nNAME               MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nxvda               202:0    0    8G  0 disk \n\u2514\u2500xvda1            202:1    0    8G  0 part /\nxvdf               202:80   0   15G  0 disk \n\u2514\u2500xvdf1            202:81   0   15G  0 part \n  \u2514\u2500VGroup-myspace 253:0    0 21.5G  0 lvm  /mnt/myspace\nxvdg               202:96   0    7G  0 disk \n\u2514\u2500xvdg1            202:97   0    7G  0 part \n  \u2514\u2500VGroup-myspace 253:0    0 21.5G  0 lvm  /mnt/myspace\n```\n\u3000\n", "tags": ["Linux", "lvm"]}