{"context": "group :test do\n  gem 'rspec-rails'\n  gem 'factory_girl_rails'\n  gem 'capybara'\nend\n\n@user \u306a\u3069\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u306f assign \u30e1\u30bd\u30c3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\ncurrent_user \u306a\u3069\u306e\u30d8\u30eb\u30d1\u30fc\u30e1\u30bd\u30c3\u30c9\u306f\u81ea\u524d\u3067\u5b9a\u7fa9\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3063\u307d\u3044\u3002\u3053\u3053\u304c\u60a9\u3093\u3060\n\nspec/views/xxx/yyy.html.erb_spec.rb\nRSpec.describe \"xxx/yyy\", type: :view do\n  let(:user) { create :user }\n  let(:helper_methods) {\n    {\n      current_user: user\n    }\n  }\n  before { assign(:user, user) }\n\n  it 'works' do\n    define_helper_methods(view, helper_methods)\n    render\n\n    expect(rendered).to have_css('h1', text: 'Title')\n  end\nend\n\n\n\nspec/support/test_helpers.rb\nmodule TestHelpers\n  def define_helper_methods(view, methods)\n    methods.each do |name, value|\n      view.define_singleton_method(name){ value }\n    end\n  end\nend\n\n\n\nspec/rails_helper.rb\nDir[Rails.root.join('spec/support/**/*.rb')].each { |f| require f }\n\nRSpec.configure do |config|\n  config.include FactoryGirl::Syntax::Methods\n  config.include Devise::Test::IntegrationHelpers, type: :request\n  config.include TestHelpers\nend\n\n\n\n```Gemfile\ngroup :test do\n  gem 'rspec-rails'\n  gem 'factory_girl_rails'\n  gem 'capybara'\nend\n```\n\n`@user` \u306a\u3069\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u306f `assign` \u30e1\u30bd\u30c3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n`current_user` \u306a\u3069\u306e\u30d8\u30eb\u30d1\u30fc\u30e1\u30bd\u30c3\u30c9\u306f\u81ea\u524d\u3067\u5b9a\u7fa9\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3063\u307d\u3044\u3002\u3053\u3053\u304c\u60a9\u3093\u3060\n\n```spec/views/xxx/yyy.html.erb_spec.rb\nRSpec.describe \"xxx/yyy\", type: :view do\n  let(:user) { create :user }\n  let(:helper_methods) {\n    {\n      current_user: user\n    }\n  }\n  before { assign(:user, user) }\n\n  it 'works' do\n    define_helper_methods(view, helper_methods)\n    render\n\n    expect(rendered).to have_css('h1', text: 'Title')\n  end\nend\n```\n\n```spec/support/test_helpers.rb\nmodule TestHelpers\n  def define_helper_methods(view, methods)\n    methods.each do |name, value|\n      view.define_singleton_method(name){ value }\n    end\n  end\nend\n```\n\n\n```spec/rails_helper.rb\nDir[Rails.root.join('spec/support/**/*.rb')].each { |f| require f }\n\nRSpec.configure do |config|\n  config.include FactoryGirl::Syntax::Methods\n  config.include Devise::Test::IntegrationHelpers, type: :request\n  config.include TestHelpers\nend\n```\n", "tags": ["Capybara", "RSpec"]}