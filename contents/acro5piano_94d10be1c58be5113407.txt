{"context": "\n\n\u72b6\u6cc1\n\nPHP\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3060\u304c\u3001Gulp\u3092\u4f7f\u3063\u3066CSS\u306e\u5727\u7e2e\u3092\u3057\u3066\u3044\u308b\n\u958b\u767a\u74b0\u5883\u306fDocker\u3067\u69cb\u7bc9\u3057\u3066\u3044\u308b\n\u30b3\u30f3\u30c6\u30ca\u306e\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u306fDocker Compose\u3092\u4f7f\u3063\u3066\u3044\u308b\n\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\n\u591a\u5c11\u7701\u7565\u3057\u3066\u3044\u308b\u304c\u3001\u3053\u3093\u306a\u611f\u3058\u3002\napp\n|-- index.php\n|-- gulpfile.js          <-- \u3053\u308c\n|-- docker-compose.yml\n`-- docker\n     |-- db\n     |   |-- Dockerfile\n     |   `-- my.cnf\n     |-- nodejs\n     |   `-- Dockerfile  <-- \u3053\u308c\n     `-- web\n         `-- Dockerfile\n\n\n\u3084\u3063\u305f\u3053\u3068\n\u30a2\u30d7\u30ea\u5074\u306f\u3053\u3093\u306a\u611f\u3058\n\nindex.php\n<html>\n  <head>\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"/assets/css/style.min.css\">\n  </head>\n</html>\n\n\n\u4e0b\u8a18\u306egulpfile.js\u3092\u4f5c\u6210\n\u7c21\u7565\u5316\u3057\u3066\u3044\u308b\u306e\u3067\u52d5\u304b\u306a\u3044\u304b\u3082\n\ngulpfile.js\nvar gulp = require('gulp');\nvar $ = require('gulp-load-plugins')();\n\ngulp.task('watch', function() {\n  return gulp.src('./**/*.scss')\n    .pipe($.plumber())\n    .pipe($.sass())\n    .pipe($.pleeease({\n      autoprefixer: {\n        browsers: ['last 2 versions', 'android >= 4', 'ios >= 8']\n      },\n      minifier: true,\n    }))\n    .pipe(gulp.dest('public/assets/css'));\n});\n\n\n\u4e0b\u8a18\u306eDockerfile\u3092\u4f5c\u6210\n\ndocker/nodejs/Dockerfile\nFROM node:latest\n\nRUN npm install -g gulp\n\nWORKDIR /app\nCMD gulp watch\n\n\ndocker-compose.yml\u306b\u8ffd\u8a18\n\ndocker-compose.yml\nweb:\n    build: ./docker/web\n    links:\n        - db\n    volumes:\n        - ./:/app\n    ports:\n        - \"8000:8000\"\n\ndb:\n    build: ./docker/db\n    environment:\n        MYSQL_ROOT_PASSWORD: root\n        MYSQL_DATABASE: hoge\n        MYSQL_USER: hoge\n        MYSQL_PASSWORD: hoge\n\nnodejs:\n    build: ./docker/nodejs\n    volumes:\n        - ./:/app\n\n\nvolumes\u3067\u3001gulp\u304b\u3089\u30d5\u30a1\u30a4\u30eb\u304c\u64cd\u4f5c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002\n\n\u4f7f\u3044\u65b9\ndocker-compose up -d\n\n\u3059\u308b\u3060\u3051\u3067\u3001gulp watch\u304c\u8d70\u308b\u3002\n\u521d\u56de\u8d77\u52d5\u6642\u3060\u3051\u3001node_modules\u3092\u5165\u308c\u308b\u305f\u3081\u306b\ndocker-compose run nodejs npm install\n\n\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n# \u72b6\u6cc1\n\n- PHP\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3060\u304c\u3001Gulp\u3092\u4f7f\u3063\u3066CSS\u306e\u5727\u7e2e\u3092\u3057\u3066\u3044\u308b\n- \u958b\u767a\u74b0\u5883\u306fDocker\u3067\u69cb\u7bc9\u3057\u3066\u3044\u308b\n- \u30b3\u30f3\u30c6\u30ca\u306e\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u306fDocker Compose\u3092\u4f7f\u3063\u3066\u3044\u308b\n\n# \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\n\n\u591a\u5c11\u7701\u7565\u3057\u3066\u3044\u308b\u304c\u3001\u3053\u3093\u306a\u611f\u3058\u3002\n\n```\napp\n|-- index.php\n|-- gulpfile.js          <-- \u3053\u308c\n|-- docker-compose.yml\n`-- docker\n     |-- db\n     |   |-- Dockerfile\n     |   `-- my.cnf\n     |-- nodejs\n     |   `-- Dockerfile  <-- \u3053\u308c\n     `-- web\n         `-- Dockerfile\n```\n\n\n# \u3084\u3063\u305f\u3053\u3068\n\n\u30a2\u30d7\u30ea\u5074\u306f\u3053\u3093\u306a\u611f\u3058\n\n```php:index.php\n<html>\n  <head>\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"/assets/css/style.min.css\">\n  </head>\n</html>\n```\n\n\u4e0b\u8a18\u306e`gulpfile.js`\u3092\u4f5c\u6210\n\u7c21\u7565\u5316\u3057\u3066\u3044\u308b\u306e\u3067\u52d5\u304b\u306a\u3044\u304b\u3082\n\n```js:gulpfile.js\nvar gulp = require('gulp');\nvar $ = require('gulp-load-plugins')();\n\ngulp.task('watch', function() {\n  return gulp.src('./**/*.scss')\n    .pipe($.plumber())\n    .pipe($.sass())\n    .pipe($.pleeease({\n      autoprefixer: {\n        browsers: ['last 2 versions', 'android >= 4', 'ios >= 8']\n      },\n      minifier: true,\n    }))\n    .pipe(gulp.dest('public/assets/css'));\n});\n```\n\n\u4e0b\u8a18\u306e`Dockerfile`\u3092\u4f5c\u6210\n\n```sh:docker/nodejs/Dockerfile\nFROM node:latest\n\nRUN npm install -g gulp\n\nWORKDIR /app\nCMD gulp watch\n```\n\n`docker-compose.yml`\u306b\u8ffd\u8a18\n\n```yaml:docker-compose.yml\nweb:\n    build: ./docker/web\n    links:\n        - db\n    volumes:\n        - ./:/app\n    ports:\n        - \"8000:8000\"\n\ndb:\n    build: ./docker/db\n    environment:\n        MYSQL_ROOT_PASSWORD: root\n        MYSQL_DATABASE: hoge\n        MYSQL_USER: hoge\n        MYSQL_PASSWORD: hoge\n        \nnodejs:\n    build: ./docker/nodejs\n    volumes:\n        - ./:/app\n```\n\n`volumes`\u3067\u3001gulp\u304b\u3089\u30d5\u30a1\u30a4\u30eb\u304c\u64cd\u4f5c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002\n\n# \u4f7f\u3044\u65b9\n\n```sh\ndocker-compose up -d\n```\n\n\u3059\u308b\u3060\u3051\u3067\u3001`gulp watch`\u304c\u8d70\u308b\u3002\n\n\u521d\u56de\u8d77\u52d5\u6642\u3060\u3051\u3001`node_modules`\u3092\u5165\u308c\u308b\u305f\u3081\u306b\n\n```\ndocker-compose run nodejs npm install\n```\n\n\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n\n\n", "tags": ["gulp", "docker", "docker-compose"]}