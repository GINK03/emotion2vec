{"tags": ["Erlang"], "context": " More than 1 year has passed since last update.\n\nErlang\u306e\u30a2\u30bb\u30f3\u30d6\u30e9\u3068\u4ef2\u826f\u304f\u306a\u308b\n\u901f\u5ea6\u3092\u6c42\u3081\u3066\u3044\u308b\u4eba\u304cErlang\u3092\u4f7f\u3046\u4e8b\u306f\u306a\u3044\u3068\u601d\u3046\u304c, \u4fe1\u983c\u6027\u3092\u6c42\u3081\u3066Erlang\u3092\u4f7f\u3063\u3066\u3044\u308b\u4eba\u304c\u6027\u80fd\u5411\u4e0a\u3092\u56f3\u308b\u3053\u3068\u306f\u5272\u3068\u3088\u304f\u3042\u308b\u8a71\u3060\u3068\u601d\u3046.\n\u305d\u3057\u3066, \u30a2\u30bb\u30f3\u30d6\u30e9\u3092\u773a\u3081\u305f\u304f\u306a\u308b\u3053\u3068\u3082\u3088\u304f\u3042\u308b\u8a71\u3060\u3068\u601d\u3046.\n\u3075\u3068, \u30a2\u30bb\u30f3\u30d6\u30e9\u3092\u773a\u3081\u305f\u304f\u306a\u308a, AdventCalendar\u304c\u307e\u3060\u57cb\u307e\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067, \u3053\u306e\u6a5f\u4f1a\u306b\u8abf\u3079\u305f\u3053\u3068\u3092\u7e8f\u3081\u3066\u307f\u308b.\n\nErlang\u306e\u30a2\u30bb\u30f3\u30d6\u30e9\u3092\u898b\u308b\u65b9\u6cd5\n$ erlc -S hoge.erl\n$ ls\nhoge.erl hoge.S\n# hoge.S\u304c\u30a2\u30bb\u30f3\u30d6\u30e9\n\n\n\u30a2\u30bb\u30f3\u30d6\u30e9\u306e\u8aad\u307f\u65b9\n\u30a2\u30bb\u30f3\u30d6\u30e9\u306b\u767b\u5834\u3059\u308b\u30ad\u30fc\u30ef\u30fc\u30c9\u306f\u4e0b\u8a18\u306b\u66f8\u304b\u308c\u3066\u3044\u308b.\nhttps://github.com/erlang/otp/blob/maint/lib/compiler/src/genop.tab\n\u4e3b\u8981\u306a\u3082\u306e\u3092\u7e8f\u3081\u305f\u306e\u304c\u4ee5\u4e0b\u306e\u8868\u3060.\n\n\n\n\u66f8\u5f0f\n\u4f8b\n\u8aac\u660e\n\n\n\n\n{x, N}\n{x, 0}\n\u30ec\u30b8\u30b9\u30bf\u306e\u5834\u6240\u3092\u6307\u3059\n\n\n{y, N}\n{y, 0}\n\u30b9\u30bf\u30c3\u30af\u306e\u5834\u6240\u3092\u6307\u3059\n\n\n{f, N}\n{f, 0}\n\n{label, N}\u3092\u6307\u3059\n\n\n{label, Lbl}\n{label, 1}\ncode\u306e\u5834\u6240\u3092\u793a\u3059\u540d\u524d.\n\n\n{func_info, M, F, A}\n{func_info, lists, reverse, 1}\n\u95a2\u6570\u5b9a\u7fa9. \u4f8b\u306flists:reverse/1\u3092\u610f\u5473\u3059\u308b.\n\n\n{call, Arity Label}\n{call, 1, {f, 7}}\n\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059.\u547c\u3073\u51fa\u3057\u5f8c\u306f\u6b21\u306e\u547d\u4ee4\u304c\u547c\u3070\u308c\u308b.\u4f8b\u306f\u5f15\u65701\u306e{label, 7}\u3092\u5b9f\u884c\u3059\u308b.\n\n\n{call_only, Arity, Label}\n{call_only, 1, {f, 7}}\n\u672b\u5c3e\u518d\u5e30\u95a2\u6570\u3092\u5b9f\u884c\u3059\u308b.\n\n\n{gc_bif, Lbl, Live, Bif, Arg, Reg}\n{gc_bif,'+',{f,0},2,[{y,0},{x,0}],{x,0}}\nBIF (Built in Function)\u3092\u5b9f\u884c\u3059\u308b. \u4f8b\u306f{y,0} + {x,0}\u306e\u7d50\u679c\u3092{x,0}\u306b\u4ee3\u5165\u3059\u308b. \u5931\u6557\u3057\u305f\u5834\u5408\u306f{label, 0}\u306b\u98db\u3076.\n\n\n{allocate, StackNeed, Live}\n{allocate, 1, 3}\nstack\u4e0a\u306e\u9818\u57df\u3092\u5272\u308a\u5f53\u3066\u308b.\u4f8b\u306e\u5834\u5408\u306f1word\u3092\u5272\u308a\u5f53\u3066\u3066\u3044\u308b.(Continuation Pointer\u3082stack\u306b\u4fdd\u5b58\u3055\u308c\u308b\u70ba\u5b9f\u969b\u306b\u306f+1\u3055\u308c\u308b)\n\n\n{deallocate, N}\n{deallocate, 1}\nallocate\u3057\u305f\u9818\u57df\u6570\u3092\u6307\u5b9a\u3057, \u89e3\u653e\u3059\u308b.(allocate\u540c\u69d8\u306bContinuation Pointer\u5206\u306e\u9818\u57df\u3082\u89e3\u653e\u3055\u308c\u308b)\n\n\n{move, Src, Dst}\n{move, {x,1}, {x,0}}\n\u30b3\u30d4\u30fc\u3059\u308b\n\n\nreturn\nreturn\nContinuation Pointer\u306b\u623b\u308b. (C\u8a00\u8a9e\u306ereturn\u3068\u540c\u3058)\n\n\n{get_list, Src, Head, Tail}\n{get_list, {x,0}, {x,1}, {x,2}}\nSrc\u306b\u4fdd\u5b58\u3055\u308c\u305f\u30ea\u30b9\u30c8\u306eHead\u3068Tail\u3092\u305d\u308c\u305e\u308c\u4fdd\u5b58\u3059\u308b\n\n\n{get_tuple_element, Src, Elem, Dst}\n{get_tuple_element, {x,0}, 0, {x,1}}\nDst = element(Elem, Src)\n\n\nsend\nsend\n\n{x,0} ! {x,1}\u3092\u5b9f\u884c\u3059\u308b.\n\n\nremove_message\nremove_message\nmessage queue\u304b\u3089\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d6\u308a\u51fa\u3057, message\u306e\u30dd\u30a4\u30f3\u30bf\u3092{x,0}\u306b\u4ee3\u5165\u3059\u308b.\n\n\n{test, is_XXX, Lbl, Args}\n{test, is_nil, {f,6}, [{x,0}]}\nArgs\u304cis_XXX\u3067\u3042\u308b\u304b\u3092\u78ba\u304b\u3081, false\u306e\u5834\u5408\u306fLbl\u306b\u98db\u3076.\n\n\n\n\u203b Live\u3068\u66f8\u304b\u308c\u3066\u3044\u308b\u8981\u7d20\u306fGarbage Collection\u7528\u306b, \u73fe\u5728\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u30ec\u30b8\u30b9\u30bf\u306e\u6570\u3092\u610f\u5473\u3059\u308b. \u8aad\u3080\u5206\u306b\u306f\u7279\u306b\u5fc5\u8981\u304c\u306a\u3044\u70ba, \u5404\u8aac\u660e\u3067\u306f\u5272\u611b\u3057\u305f.\n\n\u5b9f\u969b\u306b\u30a2\u30bb\u30f3\u30d6\u30e9\u3092\u773a\u3081\u3066\u307f\u305f\n\n\u672b\u5c3e\u518d\u5e30\u3092\u78ba\u304b\u3081\u308b\nlists:sum/1\u3068\u540c\u3058\u7d50\u679c\u3092\u5f97\u3089\u308c\u308b\u95a2\u6570\u3092\u7528\u610f\u3057\u305f.\n\nloop.erl\n-module(loop).\n-compile(export_all).\n\nsum(Inputs) ->\n    sum_impl(Inputs, 0).\n\nsum_impl([], Sum)      -> Sum;\nsum_impl([H | T], Sum) -> sum_impl(T, Sum + H). %% \u672b\u5c3e\u518d\u5e30\n\nsum2([])      -> 0;\nsum2([H | T]) -> H + sum2(T). %% \u672b\u5c3e\u518d\u5e30\u306b\u306a\u3063\u3066\u3044\u306a\u3044\n\n\n\nloop.S\n%% \u5fc5\u8981\u306a\u90e8\u5206\u3060\u3051\u3092\u629c\u7c8b\u3057\u305f\u3082\u306e\n{function, sum, 1, 2}.\n  {label,2}.\n    {move,{integer,0},{x,1}}.\n    {call_only,2,{f,4}}. %% \u672b\u5c3e\u518d\u5e30\uff01\n\n{function, sum_impl, 2, 4}.\n  {label,4}.\n    {test,is_nonempty_list,{f,5},[{x,0}]}.\n    {get_list,{x,0},{x,2},{x,3}}.\n    {gc_bif,'+',{f,0},4,[{x,1},{x,2}],{x,1}}.\n    {move,{x,3},{x,0}}.\n    {call_only,2,{f,4}}. %% \u672b\u5c3e\u518d\u5e30\uff01\n  {label,5}.\n    {test,is_nil,{f,3},[{x,0}]}.\n    {move,{x,1},{x,0}}.\n    return.\n\n{function, sum2, 1, 7}.\n  {label,7}.\n    {test,is_nonempty_list,{f,8},[{x,0}]}.\n    {allocate,1,1}.\n    {get_list,{x,0},{y,0},{x,0}}. %% Head\u3060\u3051stack\u306b\u5f85\u907f\uff01\n    {call,1,{f,7}}. %% \u672b\u5c3e\u518d\u5e30\u3067\u304d\u3066\u306a\u3044\uff01\n    {gc_bif,'+',{f,0},1,[{y,0},{x,0}],{x,0}}.\n    {deallocate,1}.\n    return.\n  {label,8}.\n    {test,is_nil,{f,6},[{x,0}]}.\n    {move,{integer,0},{x,0}}.\n    return.\n\n\ncall\u3082call_only\u3082{x,0}\u304b\u3089\u6307\u5b9a\u3057\u305f\u6570\u306e\u90e8\u5206\u304c\u5f15\u6570\u3068\u3057\u3066\u6e21\u3055\u308c\u308b\u70ba, \u672b\u5c3e\u518d\u5e30\u3067\u306f\u306a\u3044call\u306e\u5834\u5408\u306fstack\u306b\u5f85\u907f\u3055\u308c\u3066\u3044\u308b\u69d8\u5b50\u3082\u5206\u304b\u308b.\n\nelement/hd\u3092\u7a4d\u6975\u7684\u306b\u4f7f\u3046\n\u6b21\u306f, BIF\u3067\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308belement/2\u3068hd/1, \u305d\u308c\u3068\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u3067\u5b9f\u88c5\u3057\u305f\u95a2\u6570\u3092\u7528\u610f\u3057\u305f.\n\nbif.erl\n-module(bif).\n-compile(export_all).\n\n-spec bif({integer(), integer(), integer()}, [integer()]) -> integer().\nbif(Tuple, List) ->\n    X = element(1, Tuple),\n    Y = hd(List),\n    X + Y.\n\n-spec match({integer(), integer(), integer()}, [integer()]) -> integer().\nmatch(Tuple, List) ->\n    {X, _, _} = Tuple,\n    [Y | _]   = List,\n    X + Y.\n\n\n\nbif.S\n%% \u5fc5\u8981\u306a\u90e8\u5206\u3060\u3051\u3092\u629c\u7c8b\u3057\u305f\u3082\u306e\n{function, bif, 2, 2}.\n  {label,2}.\n    {bif,element,{f,0},[{integer,1},{x,0}],{x,0}}.\n    {bif,hd,{f,0},[{x,1}],{x,1}}.\n    {gc_bif,'+',{f,0},2,[{x,0},{x,1}],{x,0}}.\n    return.\n\n{function, match, 2, 4}.\n  {label,4}.\n    {test,is_tuple,{f,6},[{x,0}]}.\n    {test,test_arity,{f,6},[{x,0},3]}.\n    {get_tuple_element,{x,0},0,{x,2}}.\n    {test,is_nonempty_list,{f,5},[{x,1}]}.\n    {get_list,{x,1},{x,0},{x,3}}.\n    {gc_bif,'+',{f,0},4,[{x,2},{x,0}],{x,0}}.\n    return.\n  {label,5}.\n    {badmatch,{x,1}}.\n  {label,6}.\n    {badmatch,{x,0}}.\n\n\n\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u306e\u5834\u5408\u3060\u3068test\u304c\u8d70\u308b\u305f\u3081\u7121\u99c4\u304c\u3042\u308b\u4e8b\u304c\u5206\u304b\u308b.\n(\u3082\u3061\u308d\u3093\u53ef\u8aad\u6027\u306e\u554f\u984c\u3082\u3042\u308b\u306e\u3067\u4e00\u6982\u306b\u826f\u3044\u3068\u306f\u8a00\u3048\u306a\u3044\u304c)\n\n\u3042\u307e\u308a\u5f79\u306b\u7acb\u3064\u3068\u306f\u8a00\u3048\u306a\u3044\u8a18\u4e8b\u306b\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u304c, Erlang\u30a2\u30bb\u30f3\u30d6\u30e9\u306e\u898b\u65b9\u306b\u3064\u3044\u3066\u306e\u8a18\u4e8b\u3068\u3044\u3046\u3053\u3068\u3067\u3069\u3046\u304b\u4e00\u3064.\n...\u3053\u308c\u3067\u5c11\u3057\u306f\u52b9\u7387\u7684\u306a\u30b3\u30fc\u30c9\u304c\u4f5c\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3089\u826f\u3044\u306a\u3041\n# Erlang\u306e\u30a2\u30bb\u30f3\u30d6\u30e9\u3068\u4ef2\u826f\u304f\u306a\u308b\n\u901f\u5ea6\u3092\u6c42\u3081\u3066\u3044\u308b\u4eba\u304cErlang\u3092\u4f7f\u3046\u4e8b\u306f\u306a\u3044\u3068\u601d\u3046\u304c, \u4fe1\u983c\u6027\u3092\u6c42\u3081\u3066Erlang\u3092\u4f7f\u3063\u3066\u3044\u308b\u4eba\u304c\u6027\u80fd\u5411\u4e0a\u3092\u56f3\u308b\u3053\u3068\u306f\u5272\u3068\u3088\u304f\u3042\u308b\u8a71\u3060\u3068\u601d\u3046.\n\u305d\u3057\u3066, \u30a2\u30bb\u30f3\u30d6\u30e9\u3092\u773a\u3081\u305f\u304f\u306a\u308b\u3053\u3068\u3082\u3088\u304f\u3042\u308b\u8a71\u3060\u3068\u601d\u3046.\n\n\u3075\u3068, \u30a2\u30bb\u30f3\u30d6\u30e9\u3092\u773a\u3081\u305f\u304f\u306a\u308a, AdventCalendar\u304c\u307e\u3060\u57cb\u307e\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067, \u3053\u306e\u6a5f\u4f1a\u306b\u8abf\u3079\u305f\u3053\u3068\u3092\u7e8f\u3081\u3066\u307f\u308b.\n\n## Erlang\u306e\u30a2\u30bb\u30f3\u30d6\u30e9\u3092\u898b\u308b\u65b9\u6cd5\n```bash\n$ erlc -S hoge.erl\n$ ls\nhoge.erl hoge.S\n# hoge.S\u304c\u30a2\u30bb\u30f3\u30d6\u30e9\n```\n\n## \u30a2\u30bb\u30f3\u30d6\u30e9\u306e\u8aad\u307f\u65b9\n\u30a2\u30bb\u30f3\u30d6\u30e9\u306b\u767b\u5834\u3059\u308b\u30ad\u30fc\u30ef\u30fc\u30c9\u306f\u4e0b\u8a18\u306b\u66f8\u304b\u308c\u3066\u3044\u308b.\nhttps://github.com/erlang/otp/blob/maint/lib/compiler/src/genop.tab\n\n\u4e3b\u8981\u306a\u3082\u306e\u3092\u7e8f\u3081\u305f\u306e\u304c\u4ee5\u4e0b\u306e\u8868\u3060.\n\n|\u66f8\u5f0f|\u4f8b|\u8aac\u660e|\n|:---|:---|:---|\n|`{x, N}`|`{x, 0}`|\u30ec\u30b8\u30b9\u30bf\u306e\u5834\u6240\u3092\u6307\u3059|\n|`{y, N}`|`{y, 0}`|\u30b9\u30bf\u30c3\u30af\u306e\u5834\u6240\u3092\u6307\u3059|\n|`{f, N}`|`{f, 0}`|`{label, N}`\u3092\u6307\u3059|\n|`{label, Lbl}`|`{label, 1}`|code\u306e\u5834\u6240\u3092\u793a\u3059\u540d\u524d. |\n|`{func_info, M, F, A}`|`{func_info, lists, reverse, 1}`|\u95a2\u6570\u5b9a\u7fa9. \u4f8b\u306f`lists:reverse/1`\u3092\u610f\u5473\u3059\u308b.|\n|`{call, Arity Label}`|`{call, 1, {f, 7}}`|\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059.\u547c\u3073\u51fa\u3057\u5f8c\u306f\u6b21\u306e\u547d\u4ee4\u304c\u547c\u3070\u308c\u308b.<br />\u4f8b\u306f\u5f15\u65701\u306e`{label, 7}`\u3092\u5b9f\u884c\u3059\u308b.|\n|`{call_only, Arity, Label}`|`{call_only, 1, {f, 7}}`|\u672b\u5c3e\u518d\u5e30\u95a2\u6570\u3092\u5b9f\u884c\u3059\u308b.|\n|`{gc_bif, Lbl, Live, Bif, Arg, Reg}`|`{gc_bif,'+',{f,0},2,[{y,0},{x,0}],{x,0}}`|BIF (Built in Function)\u3092\u5b9f\u884c\u3059\u308b. <br />\u4f8b\u306f`{y,0} + {x,0}`\u306e\u7d50\u679c\u3092`{x,0}`\u306b\u4ee3\u5165\u3059\u308b. <br />\u5931\u6557\u3057\u305f\u5834\u5408\u306f`{label, 0}`\u306b\u98db\u3076.|\n|`{allocate, StackNeed, Live}`|`{allocate, 1, 3}`|stack\u4e0a\u306e\u9818\u57df\u3092\u5272\u308a\u5f53\u3066\u308b.<br />\u4f8b\u306e\u5834\u5408\u306f1word\u3092\u5272\u308a\u5f53\u3066\u3066\u3044\u308b.<br />(Continuation Pointer\u3082stack\u306b\u4fdd\u5b58\u3055\u308c\u308b\u70ba\u5b9f\u969b\u306b\u306f+1\u3055\u308c\u308b)|\n|`{deallocate, N}`|`{deallocate, 1}`|allocate\u3057\u305f\u9818\u57df\u6570\u3092\u6307\u5b9a\u3057, \u89e3\u653e\u3059\u308b.<br />(allocate\u540c\u69d8\u306bContinuation Pointer\u5206\u306e\u9818\u57df\u3082\u89e3\u653e\u3055\u308c\u308b)|\n|`{move, Src, Dst}`|`{move, {x,1}, {x,0}}`|\u30b3\u30d4\u30fc\u3059\u308b|\n|`return`|`return`|Continuation Pointer\u306b\u623b\u308b. (C\u8a00\u8a9e\u306e`return`\u3068\u540c\u3058)|\n|`{get_list, Src, Head, Tail}`|`{get_list, {x,0}, {x,1}, {x,2}}`|Src\u306b\u4fdd\u5b58\u3055\u308c\u305f\u30ea\u30b9\u30c8\u306eHead\u3068Tail\u3092\u305d\u308c\u305e\u308c\u4fdd\u5b58\u3059\u308b|\n|`{get_tuple_element, Src, Elem, Dst}`|`{get_tuple_element, {x,0}, 0, {x,1}}`|`Dst = element(Elem, Src)`|\n|`send`|`send`|`{x,0}` ! `{x,1}`\u3092\u5b9f\u884c\u3059\u308b.|\n|`remove_message`|`remove_message`|message queue\u304b\u3089\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d6\u308a\u51fa\u3057, message\u306e\u30dd\u30a4\u30f3\u30bf\u3092`{x,0}`\u306b\u4ee3\u5165\u3059\u308b.|\n|`{test, is_XXX, Lbl, Args}`|`{test, is_nil, {f,6}, [{x,0}]}`|Args\u304c`is_XXX`\u3067\u3042\u308b\u304b\u3092\u78ba\u304b\u3081, false\u306e\u5834\u5408\u306fLbl\u306b\u98db\u3076.|\n\n\u203b Live\u3068\u66f8\u304b\u308c\u3066\u3044\u308b\u8981\u7d20\u306fGarbage Collection\u7528\u306b, \u73fe\u5728\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u30ec\u30b8\u30b9\u30bf\u306e\u6570\u3092\u610f\u5473\u3059\u308b. \u8aad\u3080\u5206\u306b\u306f\u7279\u306b\u5fc5\u8981\u304c\u306a\u3044\u70ba, \u5404\u8aac\u660e\u3067\u306f\u5272\u611b\u3057\u305f.\n\n## \u5b9f\u969b\u306b\u30a2\u30bb\u30f3\u30d6\u30e9\u3092\u773a\u3081\u3066\u307f\u305f\n### \u672b\u5c3e\u518d\u5e30\u3092\u78ba\u304b\u3081\u308b\n`lists:sum/1`\u3068\u540c\u3058\u7d50\u679c\u3092\u5f97\u3089\u308c\u308b\u95a2\u6570\u3092\u7528\u610f\u3057\u305f.\n\n```erlang:loop.erl\n-module(loop).\n-compile(export_all).\n\nsum(Inputs) ->\n    sum_impl(Inputs, 0).\n\nsum_impl([], Sum)      -> Sum;\nsum_impl([H | T], Sum) -> sum_impl(T, Sum + H). %% \u672b\u5c3e\u518d\u5e30\n\nsum2([])      -> 0;\nsum2([H | T]) -> H + sum2(T). %% \u672b\u5c3e\u518d\u5e30\u306b\u306a\u3063\u3066\u3044\u306a\u3044\n```\n\n```erlang:loop.S\n%% \u5fc5\u8981\u306a\u90e8\u5206\u3060\u3051\u3092\u629c\u7c8b\u3057\u305f\u3082\u306e\n{function, sum, 1, 2}.\n  {label,2}.\n    {move,{integer,0},{x,1}}.\n    {call_only,2,{f,4}}. %% \u672b\u5c3e\u518d\u5e30\uff01\n\n{function, sum_impl, 2, 4}.\n  {label,4}.\n    {test,is_nonempty_list,{f,5},[{x,0}]}.\n    {get_list,{x,0},{x,2},{x,3}}.\n    {gc_bif,'+',{f,0},4,[{x,1},{x,2}],{x,1}}.\n    {move,{x,3},{x,0}}.\n    {call_only,2,{f,4}}. %% \u672b\u5c3e\u518d\u5e30\uff01\n  {label,5}.\n    {test,is_nil,{f,3},[{x,0}]}.\n    {move,{x,1},{x,0}}.\n    return.\n\n{function, sum2, 1, 7}.\n  {label,7}.\n    {test,is_nonempty_list,{f,8},[{x,0}]}.\n    {allocate,1,1}.\n    {get_list,{x,0},{y,0},{x,0}}. %% Head\u3060\u3051stack\u306b\u5f85\u907f\uff01\n    {call,1,{f,7}}. %% \u672b\u5c3e\u518d\u5e30\u3067\u304d\u3066\u306a\u3044\uff01\n    {gc_bif,'+',{f,0},1,[{y,0},{x,0}],{x,0}}.\n    {deallocate,1}.\n    return.\n  {label,8}.\n    {test,is_nil,{f,6},[{x,0}]}.\n    {move,{integer,0},{x,0}}.\n    return.\n```\n\n`call`\u3082`call_only`\u3082`{x,0}`\u304b\u3089\u6307\u5b9a\u3057\u305f\u6570\u306e\u90e8\u5206\u304c\u5f15\u6570\u3068\u3057\u3066\u6e21\u3055\u308c\u308b\u70ba, \u672b\u5c3e\u518d\u5e30\u3067\u306f\u306a\u3044`call`\u306e\u5834\u5408\u306fstack\u306b\u5f85\u907f\u3055\u308c\u3066\u3044\u308b\u69d8\u5b50\u3082\u5206\u304b\u308b.\n\n## element/hd\u3092\u7a4d\u6975\u7684\u306b\u4f7f\u3046\n\u6b21\u306f, BIF\u3067\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b`element/2`\u3068`hd/1`, \u305d\u308c\u3068\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u3067\u5b9f\u88c5\u3057\u305f\u95a2\u6570\u3092\u7528\u610f\u3057\u305f.\n\n```erlang:bif.erl\n-module(bif).\n-compile(export_all).\n\n-spec bif({integer(), integer(), integer()}, [integer()]) -> integer().\nbif(Tuple, List) ->\n    X = element(1, Tuple),\n    Y = hd(List),\n    X + Y.\n\n-spec match({integer(), integer(), integer()}, [integer()]) -> integer().\nmatch(Tuple, List) ->\n    {X, _, _} = Tuple,\n    [Y | _]   = List,\n    X + Y.\n```\n\n```erlang:bif.S\n%% \u5fc5\u8981\u306a\u90e8\u5206\u3060\u3051\u3092\u629c\u7c8b\u3057\u305f\u3082\u306e\n{function, bif, 2, 2}.\n  {label,2}.\n    {bif,element,{f,0},[{integer,1},{x,0}],{x,0}}.\n    {bif,hd,{f,0},[{x,1}],{x,1}}.\n    {gc_bif,'+',{f,0},2,[{x,0},{x,1}],{x,0}}.\n    return.\n\n{function, match, 2, 4}.\n  {label,4}.\n    {test,is_tuple,{f,6},[{x,0}]}.\n    {test,test_arity,{f,6},[{x,0},3]}.\n    {get_tuple_element,{x,0},0,{x,2}}.\n    {test,is_nonempty_list,{f,5},[{x,1}]}.\n    {get_list,{x,1},{x,0},{x,3}}.\n    {gc_bif,'+',{f,0},4,[{x,2},{x,0}],{x,0}}.\n    return.\n  {label,5}.\n    {badmatch,{x,1}}.\n  {label,6}.\n    {badmatch,{x,0}}.\n```\n\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u306e\u5834\u5408\u3060\u3068test\u304c\u8d70\u308b\u305f\u3081\u7121\u99c4\u304c\u3042\u308b\u4e8b\u304c\u5206\u304b\u308b.\n(\u3082\u3061\u308d\u3093\u53ef\u8aad\u6027\u306e\u554f\u984c\u3082\u3042\u308b\u306e\u3067\u4e00\u6982\u306b\u826f\u3044\u3068\u306f\u8a00\u3048\u306a\u3044\u304c)\n\n-----\n\n\u3042\u307e\u308a\u5f79\u306b\u7acb\u3064\u3068\u306f\u8a00\u3048\u306a\u3044\u8a18\u4e8b\u306b\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u304c, Erlang\u30a2\u30bb\u30f3\u30d6\u30e9\u306e\u898b\u65b9\u306b\u3064\u3044\u3066\u306e\u8a18\u4e8b\u3068\u3044\u3046\u3053\u3068\u3067\u3069\u3046\u304b\u4e00\u3064.\n...\u3053\u308c\u3067\u5c11\u3057\u306f\u52b9\u7387\u7684\u306a\u30b3\u30fc\u30c9\u304c\u4f5c\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3089\u826f\u3044\u306a\u3041\n"}