{"tags": ["Android", "gradle", "FindBugs", "checkstyle", "jacoco"], "context": " More than 1 year has passed since last update.\u3053\u306e\u8a18\u4e8b\u306f\u30d6\u30ed\u30b0Yuki\u306e\u679d\u6298 - Android: \u3088\u304f\u4f7f\u3046\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb\u4ed6\u306eGradle\u5b9a\u7fa9\u304b\u3089\u306e\u4e00\u90e8\u8ee2\u8f09\u3067\u3059. \n\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306fGitHub-AndroidProjectTemplate\u306b\u516c\u958b\u3057\u3066\u3044\u307e\u3059. \n\n\u306f\u3058\u3081\u306b\nAndroid\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u983b\u7e41\u306b\u4f7f\u7528\u3055\u308c\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u5c0e\u5165\u30bd\u30fc\u30b9\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u306e\u90fd\u5ea6\u66f8\u304d\u76f4\u3059\u306e\u306f\u975e\u52b9\u7387\u7684\u3067\u3042\u308b.\n\u305d\u3046\u3044\u3063\u305f\u7e70\u308a\u8fd4\u3057\u66f8\u304b\u308c\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u3053\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u307e\u3068\u3081, \u65b0\u898f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u306e\u969b\u306b\u306f\u3053\u308c\u3092\u30b3\u30d4\u30fc\u3059\u308b\u3053\u3068\u3067\u5bfe\u5fdc\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b.  \n\n\u5c0e\u5165\u3055\u308c\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\n\u4e3b\u8981\u306a\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb\u3068\u5404\u7a2e\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u304c\u5c0e\u5165\u3055\u308c\u308b. \n\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u5c0e\u5165\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9(gralde)\u306f/android.gradle\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b. \n\u3053\u308c\u306b\u542b\u307e\u308c\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u306f\u6b21\u306e\u901a\u308a. \nFindBugs\n: Java\u30d7\u30ed\u30b0\u30e9\u30e0(\u30d0\u30a4\u30c8\u30b3\u30fc\u30c9)\u306e\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb.  \nPMD\n: Java\u30d7\u30ed\u30b0\u30e9\u30e0(\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9)\u306e\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb.  \nCheckStyle\n: \u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u4f53\u88c1\u30c1\u30a7\u30c3\u30af\u30c4\u30fc\u30eb.  \nLint\n: Android\u306b\u7279\u5316\u3057\u305f\u6f5c\u5728\u7684\u306a\u4e0d\u5177\u5408\u3092\u691c\u51fa\u3059\u308b\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb.  \nJacoco\n: Java\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30ab\u30d0\u30ec\u30c3\u30b8\u30ec\u30dd\u30fc\u30c8.  \nDexCount\n: APK\u304c\u6301\u3064\u30e1\u30bd\u30c3\u30c9\u6570\u3092\u5831\u544a\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3.  \nApkSize\n: APK\u306e\u30d0\u30a4\u30ca\u30ea\u30b5\u30a4\u30ba\u3092\u5831\u544a\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3.  \nGradleVersion\n: \u4f9d\u5b58\u3057\u3066\u3044\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3.  \n\n\u30e9\u30a4\u30d6\u30e9\u30ea\n\nRxAndroid\nRxJava\nDagger2\nButterKnife\nOrma\nTimber\nStetho\nOkhttp\nRobolectric\nJUnit\nMockito\nHamcrest\nAndroid support Appcompat-v7\nAndroid support annotations\nAndroid design support lib.\nAndroid support testing lib.\n\n\nandroid.gradle\u306e\u9069\u7528\nandroid.gradle\u3092\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u9069\u7528\u3059\u308b\u306b\u306f2\u30b9\u30c6\u30c3\u30d7\u5fc5\u8981. \n\u307e\u305a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u3067\u4e0b\u8a18\u3092\u5ba3\u8a00\u3059\u308b.  \nbuildscript {\n    dependencies {\n        ...\n\n        // dex method count\n        classpath 'com.getkeepsafe.dexcount:dexcount-gradle-plugin:0.4.1'\n\n        // apk size\n        classpath 'com.vanniktech:gradle-android-apk-size-plugin:0.2.0'\n\n        // check for plugin updates\n        classpath 'com.github.ben-manes:gradle-versions-plugin:0.11.3'\n    }\n}\n\n\u6b21\u306b, \u5404\u30e2\u30b8\u30e5\u30fc\u30eb\u306ebuild.gradle\u3067android.gradle\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8aad\u307f\u8fbc\u3080.  \napply from: rootProject.file('android.gradle')\n\n\n\u8ffd\u52a0\u30fb\u5909\u66f4\u3055\u308c\u308b\u30bf\u30b9\u30af\nfindbugs{variantName}\n: FindBugs\u306b\u3088\u308b\u9759\u7684\u89e3\u6790\u3092\u6307\u5b9a\u306e\u30d3\u30eb\u30c9\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b  \npmd{variantName}\n: PMD\u306b\u3088\u308b\u9759\u7684\u89e3\u6790\u3092\u6307\u5b9a\u306e\u30d3\u30eb\u30c9\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b  \ncheckstyle{variantName}\n: CheckStyle\u306b\u3088\u308b\u4f53\u88c1\u30c1\u30a7\u30c3\u30af\u3092\u6307\u5b9a\u306e\u30d3\u30eb\u30c9\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b  \nlint{variantName}\n: Lint\u306b\u3088\u308b\u9759\u7684\u89e3\u6790\u3092\u6307\u5b9a\u306e\u30d3\u30eb\u30c9\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b  \njacoco{variantName}Report\n: Jacoco\u306b\u3088\u308b\u30ab\u30d0\u30ec\u30c3\u30b8\u30ec\u30dd\u30fc\u30c8\u3092\u6307\u5b9a\u306e\u30d3\u30eb\u30c9\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b  \ncount{variantName}Methods\n: DexCount\u306b\u3088\u308b\u30e1\u30bd\u30c3\u30c9\u6570\u306e\u8a08\u6e2c\u3092\u6307\u5b9a\u306e\u30d3\u30eb\u30c9\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b  \nsize{variantName}\n: ApkSize\u306b\u3088\u308bAPK\u30b5\u30a4\u30ba\u306e\u8a08\u6e2c\u3092\u6307\u5b9a\u306e\u30d3\u30eb\u30c9\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b  \ndependencyUpdates\n: \u4f9d\u5b58\u3057\u3066\u3044\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u30c1\u30a7\u30c3\u30af\u3092\u5b9f\u884c\u3059\u308b  \ncheck\n: \u30c7\u30d0\u30c3\u30ac\u30d6\u30eb\u306a\u30d3\u30eb\u30c9\u30bf\u30a4\u30d7\u306e\u5834\u5408, \u3044\u304f\u3064\u304b\u306e\u9759\u7684\u89e3\u6790\u30c1\u30a7\u30c3\u30af\u3092\u8ffd\u52a0\u3067\u884c\u3046  \npullCodeStyleSettings\n: AndroidStudio\u306b\u9069\u7528\u3055\u308c\u308b\u30b3\u30fc\u30c9\u30b9\u30bf\u30a4\u30eb\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b  \ncheckEnvironmentSettings\n: \u958b\u767a\u74b0\u5883\u306e\u8a2d\u5b9a\u78ba\u8a8d\u7528\u30bf\u30b9\u30af  \n\n\u30b3\u30f3\u30d5\u30a3\u30ae\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\n\nCheckStyle\n\u5404\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067/config\u306b\u683c\u7d0d\u3055\u308c\u305f\u30b3\u30f3\u30d5\u30a3\u30ae\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080. \nCheckStyle\u306e\u30b3\u30f3\u30d5\u30a3\u30ae\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u306f2\u7a2e\u985e\u7528\u610f\u3055\u308c\u3066\u3044\u308b.\ncheckstyle-easy.xml\u306f\u7de9\u3044\u4f53\u88c1\u30c1\u30a7\u30c3\u30af\u30eb\u30fc\u30eb. checkstyle-hard.xml\u306f\u53b3\u3057\u3044\u4f53\u88c1\u30c1\u30a7\u30c3\u30af\u30eb\u30fc\u30eb\u3068\u306a\u3063\u3066\u3044\u308b.\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u898f\u7d04\u306b\u3042\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u3092android.gradle\u3067\u6307\u5b9a\u3059\u308b.\n/*\n * CheckStyle\n *   see: https://docs.gradle.org/current/dsl/org.gradle.api.plugins.quality.Checkstyle.html\n */\ntask(\"checkstyle$variantName\", type: Checkstyle,\n        dependsOn: \"assemble$variantName\") {\n...\n    configFile = rootProject.file('config/checkstyle-easy.xml')\n...\n}\n\n\nRelease\u7f72\u540d\nAPK\u306eDebug/Release\u7f72\u540d\u8a2d\u5b9a\u3082android.gradle\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b.\nRelease\u7f72\u540d\u3067\u4f7f\u7528\u3055\u308c\u308b\u30ad\u30fc\u30b9\u30c8\u30a2\u60c5\u5831\u306f/secret\u306b\u683c\u7d0d\u3055\u308c\u3066\u3044\u308brelease.gradle\u306b\u3042\u308b(secret\u30d5\u30a9\u30eb\u30c0\u306b\u3064\u3044\u3066\u306f\u5f8c\u8ff0). \nandroid.gradle\u306f/secret/release.gradle\u3092\u53c2\u7167\u3057, \u3053\u308c\u3092\u9069\u7528\u3059\u308b. \n\u3082\u3057release.gradle\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u5834\u5408\u306fDebug\u7f72\u540d\u306e\u5185\u5bb9\u304cRelease\u7f72\u540d\u3068\u3057\u3066\u6d41\u7528\u3055\u308c\u308b.  \ndef releaseSettingGradleFile = rootProject.file('secret/release.gradle')\nif (releaseSettingGradleFile.exists()) {\n    apply from: releaseSettingGradleFile, to: android\n} else {\n    println \"\\n\\t!! NOT FOUND RELEASE KEYSTORE SETTING. SIGNING DEBUG KEYSTORE !!\\n\"\n    release {\n        storeFile = debug.storeFile\n        storePassword = debug.storePassword\n        keyAlias = debug.keyAlias\n        keyPassword = debug.keyPassword\n    }\n}\n\nDebug\u7f72\u540d\u306fIDE\u6a19\u6e96\u3067\u7528\u610f\u3055\u308c\u308bdebug.keystore\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306b\u914d\u7f6e\u3059\u308b\u3053\u3068\u3067\u5229\u7528\u3067\u304d\u308b.  \n\n\u30b3\u30fc\u30c9\u30b9\u30bf\u30a4\u30eb\u8a2d\u5b9a\nAndroidStudio\u3067\u4f7f\u7528\u3059\u308b\u30b3\u30fc\u30c9\u30b9\u30bf\u30a4\u30eb\u8a2d\u5b9a\u304c/.idea/codeStyleSettings.xml\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b. \nandroid.gradle\u306epullCodeStyleSettings\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u4e0b\u8a18\u306e\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u5b9f\u884c\u3055\u308c, AndroidStudio\u306e\u30b3\u30fc\u30c9\u30b9\u30bf\u30a4\u30eb\u8a2d\u5b9a\u304c\u66f4\u65b0\u3055\u308c\u308b.\ncurl -L \"https://raw.githubusercontent.com/YukiMatsumura/AndroidProjectTemplate/master/.idea/codeStyleSettings.xml\" > .idea/codeStyleSettings.xml\n\n\u30b3\u30fc\u30c9\u30b9\u30bf\u30a4\u30eb\u3092\u9069\u7528\u3059\u308b\u306b\u306fIDE\u3092\u518d\u8d77\u52d5\u3059\u308b\u3053\u3068.  \n\nCheck\u30bf\u30b9\u30af\nFindBugs, PMD, CheckStyle, Jacoco\u306f\u30d3\u30eb\u30c9\u30d0\u30ea\u30a2\u30f3\u30c8\u6bce\u306b\u5b9a\u7fa9\u3055\u308c\u305f\u30bf\u30b9\u30af\u3092\u6301\u3064.  \n\n\u4f8b) findbugsDevDebug  \n\nandroid.gradle\u3067\u306fDebuggable\u306a\u30d3\u30eb\u30c9\u30bf\u30a4\u30d7\u306b\u9650\u5b9a\u3057\u3066\u3053\u308c\u3089\u306e\u30bf\u30b9\u30af\u3092Check\u30bf\u30b9\u30af\u306b\u4f9d\u5b58\u3055\u305b\u3066\u3044\u308b. \n(\u30d3\u30eb\u30c9\u30bf\u30a4\u30d7\u306e\u9650\u5b9a\u3092\u89e3\u9664\u3059\u308b\u5834\u5408\u306fCI\u30b5\u30fc\u30d3\u30b9\u3067\u30e1\u30e2\u30ea\u4f7f\u7528\u91cf\u304c\u5897\u3048\u308b\u305f\u3081\u4e8b\u524d\u306b\u78ba\u8a8d\u304c\u5fc5\u8981)  \nif (variant.buildType.debuggable) {\n    check.dependsOn \"pmd${variantName}\"\n    check.dependsOn \"findbugs${variantName}\"\n    check.dependsOn \"checkstyle${variantName}\"\n    check.dependsOn \"jacoco${variantName}Report\"\n}\n\n\n\u305d\u306e\u4ed6\nandroid.gradle\u3067\u5b9a\u7fa9\u3055\u308c\u308bcheckEnvironmentSettings\u30bf\u30b9\u30af\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5fc5\u8981\u306a\u74b0\u5883\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u305f\u3081\u306e\u30bf\u30b9\u30af. \n\u6a19\u6e96\u3067JDK\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30c1\u30a7\u30c3\u30af\u3092\u5b9f\u65bd\u3059\u308b.  \ntask checkEnvironmentSettings() {\n    group 'Verification'\n    description \"Check environment settings\"\n\n    // Orma\u306fapt\u306b\u3088\u308b\u30b3\u30fc\u30c9\u751f\u6210\u306bJava1.8\u3092\u8981\u6c42\u3059\u308b\n    if (JavaVersion.current() < JavaVersion.VERSION_1_8) {\n        println(\"\\n\\tYou will need Java 1.8 or higher if you use Orma.\")\n        println(\"\\tCurrent Java version is really old. Found ver. \" + JavaVersion.current() + \".\\n\")\n        throw new GradleException(\"Please Update your Java.\")\n    }\n}\n\n\u4ee5\u4e0a. \n\u3053\u306e\u8a18\u4e8b\u306f\u30d6\u30ed\u30b0[Yuki\u306e\u679d\u6298 - Android: \u3088\u304f\u4f7f\u3046\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb\u4ed6\u306eGradle\u5b9a\u7fa9](http://yuki312.blogspot.jp/2016/02/android-gradle.html)\u304b\u3089\u306e\u4e00\u90e8\u8ee2\u8f09\u3067\u3059. \n\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306f[GitHub-AndroidProjectTemplate](https://github.com/YukiMatsumura/AndroidProjectTemplate)\u306b\u516c\u958b\u3057\u3066\u3044\u307e\u3059. \n\n## \u306f\u3058\u3081\u306b\n\nAndroid\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u983b\u7e41\u306b\u4f7f\u7528\u3055\u308c\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u5c0e\u5165\u30bd\u30fc\u30b9\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u306e\u90fd\u5ea6\u66f8\u304d\u76f4\u3059\u306e\u306f\u975e\u52b9\u7387\u7684\u3067\u3042\u308b.  \n\u305d\u3046\u3044\u3063\u305f\u7e70\u308a\u8fd4\u3057\u66f8\u304b\u308c\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u3053\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u307e\u3068\u3081, \u65b0\u898f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u306e\u969b\u306b\u306f\u3053\u308c\u3092\u30b3\u30d4\u30fc\u3059\u308b\u3053\u3068\u3067\u5bfe\u5fdc\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b.  \n\n### \u5c0e\u5165\u3055\u308c\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\n\n\u4e3b\u8981\u306a\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb\u3068\u5404\u7a2e\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u304c\u5c0e\u5165\u3055\u308c\u308b. \n\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u5c0e\u5165\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9(gralde)\u306f`/android.gradle`\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b. \n\u3053\u308c\u306b\u542b\u307e\u308c\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u306f\u6b21\u306e\u901a\u308a. \n\nFindBugs\n: Java\u30d7\u30ed\u30b0\u30e9\u30e0(\u30d0\u30a4\u30c8\u30b3\u30fc\u30c9)\u306e\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb.  \n\nPMD\n: Java\u30d7\u30ed\u30b0\u30e9\u30e0(\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9)\u306e\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb.  \n\nCheckStyle\n: \u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u4f53\u88c1\u30c1\u30a7\u30c3\u30af\u30c4\u30fc\u30eb.  \n\nLint\n: Android\u306b\u7279\u5316\u3057\u305f\u6f5c\u5728\u7684\u306a\u4e0d\u5177\u5408\u3092\u691c\u51fa\u3059\u308b\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb.  \n\nJacoco\n: Java\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30ab\u30d0\u30ec\u30c3\u30b8\u30ec\u30dd\u30fc\u30c8.  \n\nDexCount\n: APK\u304c\u6301\u3064\u30e1\u30bd\u30c3\u30c9\u6570\u3092\u5831\u544a\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3.  \n\nApkSize\n: APK\u306e\u30d0\u30a4\u30ca\u30ea\u30b5\u30a4\u30ba\u3092\u5831\u544a\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3.  \n\nGradleVersion\n: \u4f9d\u5b58\u3057\u3066\u3044\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3.  \n\n\n### \u30e9\u30a4\u30d6\u30e9\u30ea\n\n - RxAndroid\n - RxJava\n - Dagger2\n - ButterKnife\n - Orma\n - Timber\n - Stetho\n - Okhttp\n - Robolectric\n - JUnit\n - Mockito\n - Hamcrest\n - Android support Appcompat-v7\n - Android support annotations\n - Android design support lib.\n - Android support testing lib.\n\n\n## android.gradle\u306e\u9069\u7528\n\n`android.gradle`\u3092\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u9069\u7528\u3059\u308b\u306b\u306f2\u30b9\u30c6\u30c3\u30d7\u5fc5\u8981. \n\u307e\u305a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u3067\u4e0b\u8a18\u3092\u5ba3\u8a00\u3059\u308b.  \n\n```gradle\nbuildscript {\n    dependencies {\n        ...\n\n        // dex method count\n        classpath 'com.getkeepsafe.dexcount:dexcount-gradle-plugin:0.4.1'\n\n        // apk size\n        classpath 'com.vanniktech:gradle-android-apk-size-plugin:0.2.0'\n\n        // check for plugin updates\n        classpath 'com.github.ben-manes:gradle-versions-plugin:0.11.3'\n    }\n}\n```\n\n\u6b21\u306b, \u5404\u30e2\u30b8\u30e5\u30fc\u30eb\u306e`build.gradle`\u3067`android.gradle`\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8aad\u307f\u8fbc\u3080.  \n\n```gradle\napply from: rootProject.file('android.gradle')\n```\n\n### \u8ffd\u52a0\u30fb\u5909\u66f4\u3055\u308c\u308b\u30bf\u30b9\u30af\n\nfindbugs{variantName}\n: FindBugs\u306b\u3088\u308b\u9759\u7684\u89e3\u6790\u3092\u6307\u5b9a\u306e\u30d3\u30eb\u30c9\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b  \n\npmd{variantName}\n: PMD\u306b\u3088\u308b\u9759\u7684\u89e3\u6790\u3092\u6307\u5b9a\u306e\u30d3\u30eb\u30c9\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b  \n\ncheckstyle{variantName}\n: CheckStyle\u306b\u3088\u308b\u4f53\u88c1\u30c1\u30a7\u30c3\u30af\u3092\u6307\u5b9a\u306e\u30d3\u30eb\u30c9\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b  \n\nlint{variantName}\n: Lint\u306b\u3088\u308b\u9759\u7684\u89e3\u6790\u3092\u6307\u5b9a\u306e\u30d3\u30eb\u30c9\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b  \n\njacoco{variantName}Report\n: Jacoco\u306b\u3088\u308b\u30ab\u30d0\u30ec\u30c3\u30b8\u30ec\u30dd\u30fc\u30c8\u3092\u6307\u5b9a\u306e\u30d3\u30eb\u30c9\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b  \n\ncount{variantName}Methods\n: DexCount\u306b\u3088\u308b\u30e1\u30bd\u30c3\u30c9\u6570\u306e\u8a08\u6e2c\u3092\u6307\u5b9a\u306e\u30d3\u30eb\u30c9\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b  \n\nsize{variantName}\n: ApkSize\u306b\u3088\u308bAPK\u30b5\u30a4\u30ba\u306e\u8a08\u6e2c\u3092\u6307\u5b9a\u306e\u30d3\u30eb\u30c9\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u5bfe\u3057\u3066\u5b9f\u884c\u3059\u308b  \n\ndependencyUpdates\n: \u4f9d\u5b58\u3057\u3066\u3044\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u30c1\u30a7\u30c3\u30af\u3092\u5b9f\u884c\u3059\u308b  \n\ncheck\n: \u30c7\u30d0\u30c3\u30ac\u30d6\u30eb\u306a\u30d3\u30eb\u30c9\u30bf\u30a4\u30d7\u306e\u5834\u5408, \u3044\u304f\u3064\u304b\u306e\u9759\u7684\u89e3\u6790\u30c1\u30a7\u30c3\u30af\u3092\u8ffd\u52a0\u3067\u884c\u3046  \n\npullCodeStyleSettings\n: AndroidStudio\u306b\u9069\u7528\u3055\u308c\u308b\u30b3\u30fc\u30c9\u30b9\u30bf\u30a4\u30eb\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b  \n\ncheckEnvironmentSettings\n: \u958b\u767a\u74b0\u5883\u306e\u8a2d\u5b9a\u78ba\u8a8d\u7528\u30bf\u30b9\u30af  \n\n## \u30b3\u30f3\u30d5\u30a3\u30ae\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\n\n### CheckStyle\n\n\u5404\u9759\u7684\u89e3\u6790\u30c4\u30fc\u30eb\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067`/config`\u306b\u683c\u7d0d\u3055\u308c\u305f\u30b3\u30f3\u30d5\u30a3\u30ae\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080. \nCheckStyle\u306e\u30b3\u30f3\u30d5\u30a3\u30ae\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u306f2\u7a2e\u985e\u7528\u610f\u3055\u308c\u3066\u3044\u308b.\n\n`checkstyle-easy.xml`\u306f\u7de9\u3044\u4f53\u88c1\u30c1\u30a7\u30c3\u30af\u30eb\u30fc\u30eb. `checkstyle-hard.xml`\u306f\u53b3\u3057\u3044\u4f53\u88c1\u30c1\u30a7\u30c3\u30af\u30eb\u30fc\u30eb\u3068\u306a\u3063\u3066\u3044\u308b.\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u898f\u7d04\u306b\u3042\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u3092`android.gradle`\u3067\u6307\u5b9a\u3059\u308b.\n\n```gradle\n/*\n * CheckStyle\n *   see: https://docs.gradle.org/current/dsl/org.gradle.api.plugins.quality.Checkstyle.html\n */\ntask(\"checkstyle$variantName\", type: Checkstyle,\n        dependsOn: \"assemble$variantName\") {\n...\n    configFile = rootProject.file('config/checkstyle-easy.xml')\n...\n}\n```\n\n### Release\u7f72\u540d\n\nAPK\u306eDebug/Release\u7f72\u540d\u8a2d\u5b9a\u3082`android.gradle`\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b.  \nRelease\u7f72\u540d\u3067\u4f7f\u7528\u3055\u308c\u308b\u30ad\u30fc\u30b9\u30c8\u30a2\u60c5\u5831\u306f`/secret`\u306b\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b`release.gradle`\u306b\u3042\u308b(`secret`\u30d5\u30a9\u30eb\u30c0\u306b\u3064\u3044\u3066\u306f\u5f8c\u8ff0). \n`android.gradle`\u306f`/secret/release.gradle`\u3092\u53c2\u7167\u3057, \u3053\u308c\u3092\u9069\u7528\u3059\u308b. \n\u3082\u3057`release.gradle`\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u5834\u5408\u306fDebug\u7f72\u540d\u306e\u5185\u5bb9\u304cRelease\u7f72\u540d\u3068\u3057\u3066\u6d41\u7528\u3055\u308c\u308b.  \n\n```gradle\ndef releaseSettingGradleFile = rootProject.file('secret/release.gradle')\nif (releaseSettingGradleFile.exists()) {\n    apply from: releaseSettingGradleFile, to: android\n} else {\n    println \"\\n\\t!! NOT FOUND RELEASE KEYSTORE SETTING. SIGNING DEBUG KEYSTORE !!\\n\"\n    release {\n        storeFile = debug.storeFile\n        storePassword = debug.storePassword\n        keyAlias = debug.keyAlias\n        keyPassword = debug.keyPassword\n    }\n}\n```\n\nDebug\u7f72\u540d\u306fIDE\u6a19\u6e96\u3067\u7528\u610f\u3055\u308c\u308b`debug.keystore`\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u306b\u914d\u7f6e\u3059\u308b\u3053\u3068\u3067\u5229\u7528\u3067\u304d\u308b.  \n\n### \u30b3\u30fc\u30c9\u30b9\u30bf\u30a4\u30eb\u8a2d\u5b9a\n\nAndroidStudio\u3067\u4f7f\u7528\u3059\u308b\u30b3\u30fc\u30c9\u30b9\u30bf\u30a4\u30eb\u8a2d\u5b9a\u304c`/.idea/codeStyleSettings.xml`\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b. \n`android.gradle`\u306e`pullCodeStyleSettings`\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u4e0b\u8a18\u306e\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u5b9f\u884c\u3055\u308c, AndroidStudio\u306e\u30b3\u30fc\u30c9\u30b9\u30bf\u30a4\u30eb\u8a2d\u5b9a\u304c\u66f4\u65b0\u3055\u308c\u308b.\n\n```bash\ncurl -L \"https://raw.githubusercontent.com/YukiMatsumura/AndroidProjectTemplate/master/.idea/codeStyleSettings.xml\" > .idea/codeStyleSettings.xml\n```\n\n\u30b3\u30fc\u30c9\u30b9\u30bf\u30a4\u30eb\u3092\u9069\u7528\u3059\u308b\u306b\u306fIDE\u3092\u518d\u8d77\u52d5\u3059\u308b\u3053\u3068.  \n\n## Check\u30bf\u30b9\u30af\n\nFindBugs, PMD, CheckStyle, Jacoco\u306f\u30d3\u30eb\u30c9\u30d0\u30ea\u30a2\u30f3\u30c8\u6bce\u306b\u5b9a\u7fa9\u3055\u308c\u305f\u30bf\u30b9\u30af\u3092\u6301\u3064.  \n\n> \u4f8b) findbugsDevDebug  \n\n`android.gradle`\u3067\u306fDebuggable\u306a\u30d3\u30eb\u30c9\u30bf\u30a4\u30d7\u306b\u9650\u5b9a\u3057\u3066\u3053\u308c\u3089\u306e\u30bf\u30b9\u30af\u3092Check\u30bf\u30b9\u30af\u306b\u4f9d\u5b58\u3055\u305b\u3066\u3044\u308b. \n(\u30d3\u30eb\u30c9\u30bf\u30a4\u30d7\u306e\u9650\u5b9a\u3092\u89e3\u9664\u3059\u308b\u5834\u5408\u306fCI\u30b5\u30fc\u30d3\u30b9\u3067\u30e1\u30e2\u30ea\u4f7f\u7528\u91cf\u304c\u5897\u3048\u308b\u305f\u3081\u4e8b\u524d\u306b\u78ba\u8a8d\u304c\u5fc5\u8981)  \n\n```gradle\nif (variant.buildType.debuggable) {\n    check.dependsOn \"pmd${variantName}\"\n    check.dependsOn \"findbugs${variantName}\"\n    check.dependsOn \"checkstyle${variantName}\"\n    check.dependsOn \"jacoco${variantName}Report\"\n}\n```\n\n## \u305d\u306e\u4ed6\n\n`android.gradle`\u3067\u5b9a\u7fa9\u3055\u308c\u308b`checkEnvironmentSettings`\u30bf\u30b9\u30af\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u5fc5\u8981\u306a\u74b0\u5883\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u305f\u3081\u306e\u30bf\u30b9\u30af. \n\u6a19\u6e96\u3067JDK\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30c1\u30a7\u30c3\u30af\u3092\u5b9f\u65bd\u3059\u308b.  \n\n```gradle\ntask checkEnvironmentSettings() {\n    group 'Verification'\n    description \"Check environment settings\"\n\n    // Orma\u306fapt\u306b\u3088\u308b\u30b3\u30fc\u30c9\u751f\u6210\u306bJava1.8\u3092\u8981\u6c42\u3059\u308b\n    if (JavaVersion.current() < JavaVersion.VERSION_1_8) {\n        println(\"\\n\\tYou will need Java 1.8 or higher if you use Orma.\")\n        println(\"\\tCurrent Java version is really old. Found ver. \" + JavaVersion.current() + \".\\n\")\n        throw new GradleException(\"Please Update your Java.\")\n    }\n}\n```\n\n\u4ee5\u4e0a. \n"}