{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\uff082015/10/18\u8ffd\u8a18\uff09\n\u672c\u6295\u7a3f\u306f\u3001Nightmare v1\u3092\u524d\u63d0\u3068\u3057\u305f\u5185\u5bb9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\nv2\u306b\u3064\u3044\u3066\u306f\u3001\u3053\u3061\u3089\u306e\u6295\u7a3f\u3092\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\nphantomjs\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ brew install phantomjs\n$ phantomjs -v\n2.0.0\n\n\ncoffee-script, nightmare, mocha \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ npm install --save coffee-script nightmare mocha\n\n\n\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u306e\u4f5c\u6210\n\nNightmare\u3092\u7d99\u627f\u3057\u3066\u3001TestRunner\u30af\u30e9\u30b9\u3092\u4f5c\u6210\n@mizchi\u3055\u3093\u306eNightmare\u3067E2E\u30c6\u30b9\u30c8\u3057\u3064\u3064\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3068\u3063\u3066gif\u306b\u7d50\u5408\u3057\u305f\u3089\u76ee\u8996\u30c1\u30a7\u30c3\u30af\u304c\u6700\u9ad8\u306b\u697d\u306b\u306a\u3063\u305f\u3092\u307f\u3066\u771f\u4f3c\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u306f\u3058\u3081\u3001javascript\u306b\u5909\u63db\u3057\u3066\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u304c\u3001mocha\u3092CoffeeScript\u3067\u4f7f\u304a\u3046\u306b\u3082\u3042\u308b\u3088\u3046\u306b\u3001coffee-script\u306e\u307e\u307e\u5b9f\u884c\u3067\u304d\u308b\u306e\u3067\u3001\u5909\u63db\u305b\u305a\u306b\u4f7f\u3044\u307e\u3059\u3002\nexample\u3067\u306frakuten.co.jp\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306e\u3067\u3001RakutenTestRunner\u3068\u3044\u3046\u30af\u30e9\u30b9\u540d\u306b\u3057\u3066\u3044\u307e\u3059\u3002\nNightmare = require 'nightmare'\n\nclass RakutenTestRunner extends Nightmare\n\n  constructor: (@config) ->\n    super()\n\n  login: () ->\n    @\n    .viewport(800,600)\n    .goto(@config.app.login.url)\n    .wait()\n    .type('input#userid', @config.app.login.username)\n    .type('input#passwd', @config.app.login.password)\n    .click('input.loginButton')\n    .wait()\n\n\nmodule.exports = RakutenTestRunner\n\n\n\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u306e\u4f5c\u6210\nassert = require 'assert'\nRakutenTestRunner = require './rakuten-test-runner'\nconfig = require './config'\n\ntestRunner = new RakutenTestRunner(config)\n\ndescribe 'login and logout at rakuten.co.jp', () ->\n\n  this.timeout(config.mocha.timeout)\n\n  describe 'login and logout', () ->\n\n    it 'login and logout', (done) ->\n      testRunner\n      .login()\n      .evaluate(\n        () ->\n          return {\n              \"location\": location.origin + location.pathname\n          }\n      ,\n        (result) ->\n          assert.equal(result.location, 'http://www.rakuten.co.jp/')\n      )\n      .screenshot('./logs/screenshots/login.png')\n      .click('a.mr-logout-btn')\n      .wait()\n      .evaluate(\n        () ->\n          return {\n            \"location\": location.origin + location.pathname\n          }\n      ,\n        (result) ->\n          assert.equal(result.location, config.app.logout.url)\n      )\n      .screenshot('./logs/screenshots/logout.png')\n      .run(done)\n\n\n\u30c6\u30b9\u30c8\u5b9f\u884c\npackage.json\u306b\u4e0b\u8a18\u306e\u3088\u3046\u306b\u5b9f\u884c\u30b3\u30de\u30f3\u30c9\u3092\u767b\u9332\u3057\u3066\u304a\u304d\u3001\n{\n  \"scripts\": {\n    \"e2e-test:example\": \"mocha --compilers coffee:coffee-script/register tests/example.coffee\"\n  },\n\nnpm run\u306b\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ npm run e2e-test:example\n\n\n\u5b9f\u884c\u7d50\u679c\uff08\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\uff09\n\n\u30ed\u30b0\u30a4\u30f3\u5f8c\n\n\n\u30ed\u30b0\u30a2\u30a6\u30c8\u5f8c\n\n\nexample\uff082015/10/18\u66f4\u65b0\uff09\nrakuten.co.jp\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3001\u30ed\u30b0\u30a2\u30a6\u30c8\u3059\u308b\u5358\u7d14\u306a\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u3067\u3059\u304c\u3001github\u306bexample\u3092\u4f5c\u308a\u307e\u3057\u305f\u306e\u3067\u3001\u53c2\u8003\u307e\u3067\u306b\u4f7f\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\nhttps://github.com/imunew/nightmare-example/tree/nightmare_v1\n\uff08master\u30d6\u30e9\u30f3\u30c1\u306f\u3001v2\u30d9\u30fc\u30b9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u306e\u3067\u3001nightmare_v1\u3092\u30d6\u30e9\u30f3\u30c1\u3092\u53c2\u7167\u304f\u3060\u3055\u3044\uff09\n\n\u53c2\u8003\n\nNightmare\u3067E2E\nNightmare\u3067E2E\u30c6\u30b9\u30c8\u3057\u3064\u3064\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3068\u3063\u3066gif\u306b\u7d50\u5408\u3057\u305f\u3089\u76ee\u8996\u30c1\u30a7\u30c3\u30af\u304c\u6700\u9ad8\u306b\u697d\u306b\u306a\u3063\u305f\nmocha\u3092CoffeeScript\u3067\u4f7f\u304a\u3046\nnightmarejs.org\nnightmare - github\nmochajs.org\n\n\n## \u306f\u3058\u3081\u306b\uff082015/10/18\u8ffd\u8a18\uff09\n\u672c\u6295\u7a3f\u306f\u3001Nightmare v1\u3092\u524d\u63d0\u3068\u3057\u305f\u5185\u5bb9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\nv2\u306b\u3064\u3044\u3066\u306f\u3001\u3053\u3061\u3089\u306e[\u6295\u7a3f](http://qiita.com/imunew/items/06023f689c1a31aeddf9)\u3092\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\n## \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\n### phantomjs\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ brew install phantomjs\n$ phantomjs -v\n2.0.0\n```\n\n### coffee-script, nightmare, mocha \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ npm install --save coffee-script nightmare mocha\n```\n\n## \u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u306e\u4f5c\u6210\n\n### Nightmare\u3092\u7d99\u627f\u3057\u3066\u3001TestRunner\u30af\u30e9\u30b9\u3092\u4f5c\u6210\n[@mizchi](http://qiita.com/mizchi)\u3055\u3093\u306e[Nightmare\u3067E2E\u30c6\u30b9\u30c8\u3057\u3064\u3064\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3068\u3063\u3066gif\u306b\u7d50\u5408\u3057\u305f\u3089\u76ee\u8996\u30c1\u30a7\u30c3\u30af\u304c\u6700\u9ad8\u306b\u697d\u306b\u306a\u3063\u305f](http://qiita.com/mizchi/items/04c53e17ed5c4ec7e8d7)\u3092\u307f\u3066\u771f\u4f3c\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u306f\u3058\u3081\u3001javascript\u306b\u5909\u63db\u3057\u3066\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u304c\u3001[mocha\u3092CoffeeScript\u3067\u4f7f\u304a\u3046](http://qiita.com/dll7/items/599f51f1d79f7e73ccef)\u306b\u3082\u3042\u308b\u3088\u3046\u306b\u3001coffee-script\u306e\u307e\u307e\u5b9f\u884c\u3067\u304d\u308b\u306e\u3067\u3001\u5909\u63db\u305b\u305a\u306b\u4f7f\u3044\u307e\u3059\u3002\nexample\u3067\u306f`rakuten.co.jp`\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306e\u3067\u3001`RakutenTestRunner`\u3068\u3044\u3046\u30af\u30e9\u30b9\u540d\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n```coffee\nNightmare = require 'nightmare'\n\nclass RakutenTestRunner extends Nightmare\n\n  constructor: (@config) ->\n    super()\n\n  login: () ->\n    @\n    .viewport(800,600)\n    .goto(@config.app.login.url)\n    .wait()\n    .type('input#userid', @config.app.login.username)\n    .type('input#passwd', @config.app.login.password)\n    .click('input.loginButton')\n    .wait()\n\n\nmodule.exports = RakutenTestRunner\n```\n\n### \u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u306e\u4f5c\u6210\n\n```coffee\nassert = require 'assert'\nRakutenTestRunner = require './rakuten-test-runner'\nconfig = require './config'\n\ntestRunner = new RakutenTestRunner(config)\n\ndescribe 'login and logout at rakuten.co.jp', () ->\n\n  this.timeout(config.mocha.timeout)\n\n  describe 'login and logout', () ->\n\n    it 'login and logout', (done) ->\n      testRunner\n      .login()\n      .evaluate(\n        () ->\n          return {\n              \"location\": location.origin + location.pathname\n          }\n      ,\n        (result) ->\n          assert.equal(result.location, 'http://www.rakuten.co.jp/')\n      )\n      .screenshot('./logs/screenshots/login.png')\n      .click('a.mr-logout-btn')\n      .wait()\n      .evaluate(\n        () ->\n          return {\n            \"location\": location.origin + location.pathname\n          }\n      ,\n        (result) ->\n          assert.equal(result.location, config.app.logout.url)\n      )\n      .screenshot('./logs/screenshots/logout.png')\n      .run(done)\n```\n\n## \u30c6\u30b9\u30c8\u5b9f\u884c\n`package.json`\u306b\u4e0b\u8a18\u306e\u3088\u3046\u306b\u5b9f\u884c\u30b3\u30de\u30f3\u30c9\u3092\u767b\u9332\u3057\u3066\u304a\u304d\u3001\n\n```json\n{\n  \"scripts\": {\n    \"e2e-test:example\": \"mocha --compilers coffee:coffee-script/register tests/example.coffee\"\n  },\n```\n\n`npm run`\u306b\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```bash\n$ npm run e2e-test:example\n```\n\n## \u5b9f\u884c\u7d50\u679c\uff08\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\uff09\n\n### \u30ed\u30b0\u30a4\u30f3\u5f8c\n![rakuten_login.png](https://qiita-image-store.s3.amazonaws.com/0/26422/68163736-aba0-1f63-072e-52cf8116c4c2.png \"rakuten_login.png\")\n\n### \u30ed\u30b0\u30a2\u30a6\u30c8\u5f8c\n![rakuten_logout.png](https://qiita-image-store.s3.amazonaws.com/0/26422/87d56e3b-c1ac-3674-390f-f486eb6f05ad.png \"rakuten_logout.png\")\n\n\n## example\uff082015/10/18\u66f4\u65b0\uff09\n`rakuten.co.jp`\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3001\u30ed\u30b0\u30a2\u30a6\u30c8\u3059\u308b\u5358\u7d14\u306a\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u3067\u3059\u304c\u3001github\u306bexample\u3092\u4f5c\u308a\u307e\u3057\u305f\u306e\u3067\u3001\u53c2\u8003\u307e\u3067\u306b\u4f7f\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\nhttps://github.com/imunew/nightmare-example/tree/nightmare_v1\n\uff08master\u30d6\u30e9\u30f3\u30c1\u306f\u3001v2\u30d9\u30fc\u30b9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u306e\u3067\u3001nightmare_v1\u3092\u30d6\u30e9\u30f3\u30c1\u3092\u53c2\u7167\u304f\u3060\u3055\u3044\uff09\n\n\n## \u53c2\u8003\n\n- [Nightmare\u3067E2E](\nhttp://qiita.com/mizchi/items/2c406b501a4f93ca9752)\n- [Nightmare\u3067E2E\u30c6\u30b9\u30c8\u3057\u3064\u3064\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3068\u3063\u3066gif\u306b\u7d50\u5408\u3057\u305f\u3089\u76ee\u8996\u30c1\u30a7\u30c3\u30af\u304c\u6700\u9ad8\u306b\u697d\u306b\u306a\u3063\u305f](http://qiita.com/mizchi/items/04c53e17ed5c4ec7e8d7)\n- [mocha\u3092CoffeeScript\u3067\u4f7f\u304a\u3046](http://qiita.com/dll7/items/599f51f1d79f7e73ccef)\n- [nightmarejs.org](http://www.nightmarejs.org/)\n- [nightmare - github](https://github.com/segmentio/nightmare)\n- [mochajs.org](https://mochajs.org/)\n\n\n", "tags": ["JavaScript", "Nightmare", "PhantomJS", "mocha"]}