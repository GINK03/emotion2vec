{"context": " More than 1 year has passed since last update.\n\nRuboty \u306e\u30b3\u30fc\u30c9\u30ea\u30fc\u30c7\u30a3\u30f3\u30b0\u3067 Ruboty \u306e\u4ed5\u7d44\u307f\u3092\u7406\u89e3\u3059\u308b\u3068\u5171\u306b Ruby \u306e\u8a2d\u8a08\u30fb\u5b9f\u88c5\u306e\u5b9a\u77f3\u3092\u5b66\u3076 #ruboty\n\n \u6982\u8981\nRuboty \u306e\u30b3\u30fc\u30c9\u30ea\u30fc\u30c7\u30a3\u30f3\u30b0\u3067 Ruboty \u306e\u4ed5\u7d44\u307f\u3092\u7406\u89e3\u3059\u308b\u3068\u5171\u306b Ruby \u306e\u8a2d\u8a08\u30fb\u5b9f\u88c5\u306e\u5b9a\u77f3\u3092\u5b66\u3073\u307e\u3059\u3002\n\u78ba\u8a8d\u5bfe\u8c61\u306f\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3067 ruboty \u3092\u5b9f\u884c\u3057\u3066 Ruboty \u304c\u8d77\u52d5\u3059\u308b\u307e\u3067\u306e\u90e8\u5206\u3067\u3059\u3002\n\n \u306f\u3058\u3081\u306b\nRuboty \u306e\u69cb\u6210\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306b\u3001\u3053\u306e\u89e3\u8aac\u3092\u4f5c\u308d\u3046\u3068\u601d\u3063\u305f\u306e\u3067\u3059\u304c\u3001\n\nPlugin \u306b\u3088\u308b\u62e1\u5f35\u306a\u3069\u3092\u542b\u3081\u305f\u9ad8\u30ec\u30a4\u30e4\u306e\u8a2d\u8a08\u6280\u6cd5\n\u9069\u5207\u306a\u547d\u540d\u306b\u3088\u308a\u3001\u5358\u4e00\u8cac\u52d9\u3067\u5206\u5272\u3055\u308c\u305f\u30e1\u30bd\u30c3\u30c9\u7fa4\n\u30e1\u30e2\u5316\u3001 alias method chain , ..etc \u306a\u3069\u69d8\u3005\u306a Ruby \u306e\u30a4\u30c7\u30a3\u30aa\u30e0\n\n\u306a\u3069\u3001 Ruby \u306e\u826f\u3044\u4f5c\u6cd5\u3092 \u9ad8\u30ec\u30a4\u30e4\u306e\u8a2d\u8a08\u6280\u6cd5 \u304b\u3089 \u4f4e\u30ec\u30a4\u30e4\u306e\u30a4\u30c7\u30a3\u30aa\u30e0 \u307e\u3067\u5e45\u5e83\u304f\u5b66\u3076\u7d20\u6750\u3068\u3057\u3066\n\u975e\u5e38\u306b\u9b45\u529b\u7684\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u3042\u308b\u3053\u3068\u306b\u6c17\u3065\u304d\u307e\u3057\u305f\u3002\n\u305d\u306e\u305f\u3081\u3001 Ruboty \u81ea\u4f53\u306b\u306f\u8208\u5473\u304c\u306a\u3044\u65b9\u3082\u662f\u975e Ruboty \u306e\u30b3\u30fc\u30c9\u30ea\u30fc\u30c7\u30a3\u30f3\u30b0\u3092\u3057\u3066\u307f\u308b\u3053\u3068\u3092\u304a\u3059\u3059\u3081\u3057\u307e\u3059\u3002\n\u4ed6\u306e Rubyist \u306b\u3082\u8aad\u3093\u3067\u3082\u3089\u3044\u305f\u3044\uff01 \u3068\u601d\u3063\u305f\u3089\u62e1\u6563\u3092\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n \u524d\u63d0\n\nRuboty \u306e\u5168\u4f53\u7684\u306a\u69cb\u6210\u306e\u6982\u8981\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u3092\u53c2\u7167\u3002\n\n\nRuboty | \u57fa\u672c\u69cb\u6210\u56f3\u89e3\n\n\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u306e Ruboty \u8d77\u52d5\u3092\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u3068\u3057\u3066\u3001\u305d\u3053\u3092\u8d77\u70b9\u306b\u8aac\u660e\u3092\u3057\u307e\u3059\n\nruboty --generatr \u5074\u306e\u51e6\u7406\u306b\u3064\u3044\u3066\u306f\u8a73\u7d30\u306b\u3064\u3044\u3066\u89e6\u308c\u307e\u305b\u3093\n\n\n \u69cb\u6210\n\u3056\u3063\u3068\u773a\u3081\u3066\u6b21\u306b\u9032\u307f\u307e\u3057\u3087\u3046\u3002\n$ tree\n.\n\u2523 bin\n\u2503 \u2517 ruboty\n\u2523 CHANGELOG.md\n\u2523 Gemfile\n\u2523 lib\n\u2503 \u2523 ruboty\n\u2503 \u2503 \u2523 action.rb\n\u2503 \u2503 \u2523 actions\n\u2503 \u2503 \u2503 \u2523 base.rb\n\u2503 \u2503 \u2503 \u2523 help.rb\n\u2503 \u2503 \u2503 \u2523 ping.rb\n\u2503 \u2503 \u2503 \u2517 whoami.rb\n\u2503 \u2503 \u2523 adapter_builder.rb\n\u2503 \u2503 \u2523 adapters\n\u2503 \u2503 \u2503 \u2523 base.rb\n\u2503 \u2503 \u2503 \u2517 shell.rb\n\u2503 \u2503 \u2523 brains\n\u2503 \u2503 \u2503 \u2523 base.rb\n\u2503 \u2503 \u2503 \u2517 memory.rb\n\u2503 \u2503 \u2523 command_builder.rb\n\u2503 \u2503 \u2523 commands\n\u2503 \u2503 \u2503 \u2523 base.rb\n\u2503 \u2503 \u2503 \u2523 generate.rb\n\u2503 \u2503 \u2503 \u2517 run.rb\n\u2503 \u2503 \u2523 env\n\u2503 \u2503 \u2503 \u2523 missing_required_key_error.rb\n\u2503 \u2503 \u2503 \u2523 validatable.rb\n\u2503 \u2503 \u2503 \u2517 validation_error.rb\n\u2503 \u2503 \u2523 env.rb\n\u2503 \u2503 \u2523 handlers\n\u2503 \u2503 \u2503 \u2523 base.rb\n\u2503 \u2503 \u2503 \u2523 help.rb\n\u2503 \u2503 \u2503 \u2523 ping.rb\n\u2503 \u2503 \u2503 \u2517 whoami.rb\n\u2503 \u2503 \u2523 logger.rb\n\u2503 \u2503 \u2523 message.rb\n\u2503 \u2503 \u2523 robot.rb\n\u2503 \u2503 \u2517 version.rb\n\u2503 \u2517 ruboty.rb\n\u2523 LICENSE.txt\n\u2523 Rakefile\n\u2523 README.md\n\u2523 ruboty.gemspec\n\u2523 spec\n\u2503 \u2523 ruboty\n\u2503 \u2503 \u2523 adapter_builder_spec.rb\n\u2503 \u2503 \u2523 adapters\n\u2503 \u2503 \u2503 \u2517 shell_spec.rb\n\u2503 \u2503 \u2523 commands\n\u2503 \u2503 \u2503 \u2523 generate_spec.rb\n\u2503 \u2503 \u2503 \u2517 run_spec.rb\n\u2503 \u2503 \u2523 env\n\u2503 \u2503 \u2503 \u2517 validatable_spec.rb\n\u2503 \u2503 \u2523 handlers\n\u2503 \u2503 \u2503 \u2523 base_spec.rb\n\u2503 \u2503 \u2503 \u2523 help_spec.rb\n\u2503 \u2503 \u2503 \u2523 ping_spec.rb\n\u2503 \u2503 \u2503 \u2517 whoami_spec.rb\n\u2503 \u2503 \u2517 robot_spec.rb\n\u2503 \u2517 spec_helper.rb\n\u2517 templates\n    \u2517 Gemfile\n\n\n bin/ruboty\n\n bin/ruboty \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n ruboty | ./bin/ruboty\n\n bin/ruboty \u306b\u3064\u3044\u3066\nruboty \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u6642\u306e\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u306b\u306a\u308a\u307e\u3059\nRuboty::CommandBuilder.new(ARGV).build.call \u3067\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u306e\u547c\u3073\u51fa\u3057\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3067\n$ ruboty --generate\n\n\u3092\u547c\u3073\u51fa\u305b\u3070\u3001 ARGV \u306b --generate \u304c\u5f15\u304d\u6e21\u3055\u308c\u3001\u4ee5\u964d\u306e\u51e6\u7406\u3067\n Commands::Generate.call \u304c\u547c\u3073\u51fa\u3055\u308c\u3001 ruboty \u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3084 Gemfile \u306a\u3069\u306e\u3072\u306a\u5f62\u751f\u6210\u304c\u5b9f\u884c\u3055\u308c\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n lib/command_builder.rb\n\n lib/command_builder.rb \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n ruboty | ./lib/ruboty/command_builder.rb\n\n lib/command_builder.rb \u306b\u3064\u3044\u3066\ncommand_builder \u306f\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306e\u64cd\u4f5c\u3092\u53d7\u3051\u6301\u3061\u307e\u3059\u3002\n\n \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e Build\ndef build\n  command_class.new(options)\nend\n\ncommand_builder \u306e\u540d\u524d\u306e\u901a\u308a\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u5f15\u6570\u306e\u5185\u5bb9\u306b\u5fdc\u3058\u3066 \n Commands::Generate \u3068  Commands::Run \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u751f\u6210 = build \u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\n\u4e21 Commands \u306f\u30c0\u30c3\u30af\u30bf\u30a4\u30d4\u30f3\u30b0\u53ef\u80fd\u306a\u3088\u3046\u306b call \u30e1\u30bd\u30c3\u30c9\u3067\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u63c3\u3048\u3066\u3042\u308a\u307e\u3059\u3002\n\n \u30e1\u30e2\u5316\nRuboty \u3067\u306f\u3044\u305f\u308b\u3068\u3053\u308d\u3067 mem gem \u3092\u5229\u7528\u3057\u305f \u30e1\u30e2\u5316\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\nmodule Ruboty\n  class Robot\n    DEFAULT_ENV = \"development\"\n    DEFAULT_ROBOT_NAME = \"ruboty\"\n\n    include Mem\n# \u4ee5\u4e0b\u7565\n\nMem module \u3092 MixIn \u3057\u3066\u3044\u307e\u3059\u3002\nMem module \u306f\u30e1\u30e2\u5316\u306e\u305f\u3081\u306e gem \u3067\u3001\u4ee5\u964d\u306e\u30b3\u30fc\u30c9\u3067\u3082\u983b\u7e41\u306b\u5229\u7528\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nMem module \u306f  mem gem \u306b\u542b\u307e\u308c\u308b Module \u3067\u3042\u308a\u3001\u3053\u3061\u3089\u3082 Ruboty \u3068\u540c\u69d8 @r7kamura \u3055\u3093\u88fd\u3067\u3059\u3002\n\u3053\u306e gem \u3092\u6d3b\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u540c\u69d8\u306e\u51e6\u7406\u304c\u4f55\u5ea6\u3082\u547c\u3070\u308c\u308b\u5834\u5408\u306e\u6027\u80fd\u3092\u5411\u4e0a\u3055\u305b\u3066\u3044\u307e\u3059\u3002\nMem module \u3092 MixIn \u3059\u308b\u3068\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30e1\u30bd\u30c3\u30c9\u3068\u3057\u3066\n\nhas_memoized?(key)\nmemoize(key, value)\nmemoized(key)\nmemoized_table\nunmemoize(key)\n\n\u3092\u5229\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\u547d\u540d\u304c\u9069\u5207\u306a\u306e\u3067\u3001\u5185\u5bb9\u306f\u60f3\u50cf\u304c\u3064\u304d\u307e\u3059\u306d\u3002\nmemoize \u30af\u30e9\u30b9\u30de\u30af\u30ed\u306b\u4fdd\u5b58\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u30b7\u30f3\u30dc\u30eb\u3067\u6307\u5b9a\u3059\u308b\u3068\u3001\n\n\n\"#{method_name}_with_memoize\" \n\n\"unmemoize_#{method_name}\" \n\n\u3092\u52d5\u7684\u306b\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\u524d\u8005\u306f Hash \u3078\u306e\u30e1\u30e2\u5316\u3002\n\u5f8c\u8005\u306f Hash \u306b\u4fdd\u5b58\u3057\u305f\u60c5\u5831\u306e\u89e3\u653e\uff08\u524a\u9664\uff09\u3092\u884c\u3044\u307e\u3059\u3002\n\"#{method_name}_with_memoize\" \u306f\u30e1\u30e2\u30ea\u306b\u7d50\u679c\u304c\u3042\u308c\u3070\u3001\u30e1\u30e2\u5316\u3055\u308c\u305f\u7d50\u679c\u3092\u5229\u7528\u3001\n\u306a\u3051\u308c\u3070\u51e6\u7406\u3092\u5b9f\u884c\u3057\u3066\u3001\u7d50\u679c\u3092\u30e1\u30e2\u5316\u3057\u3066\u3044\u307e\u3059\u3002\n\u305d\u3057\u3066\u3001\u76f4\u5f8c\u306b alias_method_chain \u306e\u30a4\u30c7\u30a3\u30aa\u30e0\u3067\u65e2\u5b58\u30e1\u30bd\u30c3\u30c9\u3068\u3001\u30e1\u30e2\u5316\u6a5f\u80fd\u4ed8\u304d\u306e\u65b0\u898f\u30e1\u30bd\u30c3\u30c9\u306b\u5225\u540d\u3092\u4e0e\u3048\u3066\u3044\u307e\u3059\u3002\nalias_method_chain \u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u304c\u7c21\u6f54\u3067\u5206\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\n (\uff9f\u2200\uff9f)o\u5f61 sasata299's blog | rails \u306e alias_method_chain \u304c\u7d20\u6674\u3089\u3057\u3059\u304e\u308b\n\u3053\u308c\u306b\u3088\u308a\u3001\u65e2\u5b58\u30e1\u30bd\u30c3\u30c9\u3068\u52d5\u7684\u306b\u8ffd\u52a0\u3057\u305f\u30e1\u30e2\u5316\u6a5f\u80fd\u4ed8\u304d\u306e\u30e1\u30bd\u30c3\u30c9\u306e\u4e21\u65b9\u3092\u547c\u3073\u5206\u3051\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nmemoize :some_method_name \u3092\u8a2d\u5b9a\u3057\u305f\u3053\u3068\u3067\u3001\u65e2\u5b58\u306e\u30e1\u30bd\u30c3\u30c9\u306b\u5bfe\u3057\u3066\u547c\u3073\u51fa\u3057\u3092\u884c\u3046\u3068\u30e1\u30e2\u5316\u6a5f\u80fd\u3092\u4ed8\u52a0\u3055\u308c\u3066\u3001\n\u51e6\u7406\u304c\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n@r7kamura \u3055\u3093\u306b\u3088\u308b Mem \u306e\u7c21\u5358\u306a\u8aac\u660e\u306f\u4ee5\u4e0b\u306e\u30da\u30fc\u30b8\u306e\u4e2d\u7a0b\u306b\u3042\u308a\u307e\u3059\u3002\n Rails\u30a2\u30d7\u30ea\u3064\u304f\u3063\u305f\n\n Option \u306e Parse\n Slop gem \u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\u8a73\u7d30\u306f Slop gem \u306e README \u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002\ndef options\n  Slop.parse!(arguments, help: true) do\n    on(\"dotenv\", \"Load .env before running.\")\n    on(\"g\", \"generate\", \"Generate a new chatterbot with ./ruboty/ directory if specified.\")\n    on(\"l\", \"load=\", \"Load a ruby file before running.\")\n  end.to_hash\nend\n\n\n lib/commands/run.rb\n\n lib/commands/run.rb \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n ruboty | ./lib/commands/run.rb\n\n lib/commands/run.rb \u306b\u3064\u3044\u3066\nRobot \u306e run \u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\ndef call\n  Robot.new(options).run\nend\n\n\n lib/ruboty/robot.rb\n\n lib/ruboty/robot.rb \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n ruboty | ./lib/ruboty/robot.rb\n\n lib/ruboty/robot.rb \u306b\u3064\u3044\u3066\nRuboty \u306e\u8d77\u52d5\u672c\u51e6\u7406\u3067\u3059\u3002\n\n \u30c7\u30d7\u30ed\u30a4\u7a2e\u5225 ( production / development \u7b49 )\nRuboty \u306e\u30c7\u30d7\u30ed\u30a4\u30e2\u30fc\u30c9\u306e\u5207\u308a\u66ff\u3048\u306f ENV['RUBOTY_ENV'] \u3067\u884c\u308f\u308c\u3066\u3044\u307e\u3059\u3002\nRuboty::DEFAULT_ENV \u306b\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30c7\u30d7\u30ed\u30a4\u30e2\u30fc\u30c9\u304c development \u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n \u30ed\u30dc\u30c3\u30c8\u540d\nRuboty \u306e\u30ed\u30dc\u30c3\u30c8\u540d\u306f\u4ee5\u4e0b\u306e\u9806\u3067\u6c7a\u5b9a\u3055\u308c\u307e\u3059\u3002\n\nENV[\"RUBOTY_NAME\"]\nENV[\"ROBOT_NAME\"]\nRuboty::DEFAULT_ROBOT_NAME\n\nRuboty::DEFAULT_ROBOT_NAME \u306f\u3001 ruboty \u3067\u3059\u3002\n\u30b3\u30e1\u30f3\u30c8\u306b ROBOT_NAME is deprecated. \u3068\u66f8\u3044\u3066\u3042\u308b\u306e\u3067, \u74b0\u5883\u5909\u6570 RUBOTY_NAME \u306b\n\u597d\u304d\u306a\u30ed\u30dc\u30c3\u30c8\u540d\u3092\u3064\u3051\u308b\u306e\u304c\u6b63\u3057\u3044\u4f5c\u6cd5\u3068\u3044\u3046\u3053\u3068\u3067\u3057\u3087\u3046\u3002\n\nor \u3092\u5229\u7528\u3057\u305f\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u8a2d\u5b9a\u306e\u30a4\u30c7\u30a3\u30aa\u30e0\n\u4e0a\u8a18\u306e\u8a2d\u5b9a\u306e\u5b9f\u30b3\u30fc\u30c9\u304c\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n\ndef name\n  ENV[\"RUBOTY_NAME\"] || ENV[\"ROBOT_NAME\"] || DEFAULT_ROBOT_NAME\nend\n\n\u5024\u304c\u306a\u304b\u3063\u305f\u5834\u5408\u306e\u307f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306b\nreturn specific_value || default_value\n\n\u3068\u3044\u3046\u30a4\u30c7\u30a3\u30aa\u30e0\u304c\u3088\u304f\u5229\u7528\u3055\u308c\u307e\u3059\u3002\n\n run\n\u3053\u3053\u304b\u3089\u3001 Ruboty \u8d77\u52d5\u306e\u30e1\u30a4\u30f3\u51e6\u7406\u306e\u59cb\u307e\u308a\u3067\u3059\u3002\nrun \u30e1\u30bd\u30c3\u30c9\u306e\u4e2d\u306f\u3001 \u62bd\u8c61\u5ea6\u3092\u5408\u308f\u305b\u305f\u30e1\u30bd\u30c3\u30c9\u7fa4\u306e\u96c6\u307e\u308a\u306b\u306a\u3063\u3066\u3044\u3066\u3001\n\u4f4e\u30ec\u30a4\u30e4\u30fc\u306e\u51e6\u7406\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u3053\u308c\u3060\u3051\u3067\u3082\u3001\u8d77\u52d5\u51e6\u7406\u4e2d\u306b\u3069\u3093\u306a\u9806\u3067\u4f55\u3092\u884c\u3063\u3066\u3044\u308b\u304b\u60f3\u50cf\u304c\u4ed8\u304d\u307e\u3059\u3002\nComposed Method Pattern \u3067\u3059\u306d\u3002\ndef run\n  dotenv\n  bundle\n  setup\n  remember\n  handle\n  adapt\nend\n\n\n run : dotenv\nruboty \u30b3\u30de\u30f3\u30c9\u547c\u3073\u51fa\u3057\u6642\u306b --dotenv \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u3066\u3044\u305f\u5834\u5408\u306b\u3001\n.env \u30d5\u30a1\u30a4\u30eb\u304b\u3089\u74b0\u5883\u5909\u6570\u3092\u30ed\u30fc\u30c9\u3059\u308b\u51e6\u7406\u3067\u3059\u3002\ndotenv gem \u306b\u3064\u3044\u3066\u306f\u3001  \u3053\u3061\u3089\u3092\u53c2\u7167\nRuby \u3067\u3088\u304f\u5229\u7528\u3059\u308b\u3001\u5f8c\u7f6e\u306e if \u306b\u3088\u308b\u30b3\u30f3\u30d1\u30af\u30c8\u306a\u8a18\u6cd5\u3067\u3059\u3002\ndef dotenv\n  Dotenv.load if options[:dotenv]\nend\n\n\n run : bundle\nGemfile \u306b\u6307\u5b9a\u3057\u305f \u5404\u7a2e Plugin \u306a\u3069\u306e gem \u3092 development \u3084 production \u306a\u3069\u306e\u74b0\u5883\u306b\n\u5fdc\u3058\u3066 require \u3057\u3066\u3044\u307e\u3059\u3002\ndef bundle\n  Bundler.require(:default, env)\nrescue Bundler::GemfileNotFound\nend\n\nrescue Bundler::GemfileNotFound \u306e\u90e8\u5206\u306f\u3001 Gemfile \u304c\u306a\u304b\u3063\u305f\u5834\u5408\u3067\u3082\n\u30a8\u30e9\u30fc\u304c\u767a\u751f\u305b\u305a\u306b\u52d5\u4f5c\u304c\u7d9a\u304f\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u901a\u5e38\u3001 Ruby \u306e\u4f8b\u5916\u51e6\u7406\u306b\u3064\u3044\u3066\u306f\nbegin\n  0/0\nrescue => e\n  puts e.message # => divided by 0\nend\n\n\u306e\u3088\u3046\u306b\u3001 begin-rescue-end \u306e\u5f62\u5f0f\u3067\u7d39\u4ecb\u3055\u308c\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u304c\u3001\n\u30e1\u30bd\u30c3\u30c9\u5185\u306e\u51e6\u7406\u306e\u30c8\u30c3\u30d7\u30ec\u30d9\u30eb\u3067\u5229\u7528\u3059\u308b\u5834\u5408\u306f\u3001begin-end \u3092\u7701\u7565\u3059\u308b\u3053\u3068\u3067\n\u30b3\u30fc\u30c9\u5168\u4f53\u306e\u30d6\u30ed\u30c3\u30af\u30921\u968e\u5c64\u4e0b\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3053\u308c\u306b\u3088\u308a\u3001\u30b3\u30fc\u30c9\u306e\u898b\u901a\u3057\u304c\u826f\u304f\u306a\u308a\u3001\u53ef\u8aad\u6027\u304c\u3042\u304c\u308a\u307e\u3059\u3002\n\u66f8\u7c4d \u300c  Confident Ruby\u300d\u306e\u4e2d\u3067\u3082  Prefer top-level rescue clause \u3068\u3044\u3046\u540d\u524d\u306e\u30c6\u30af\u30cb\u30c3\u30af\u3068\u3057\u3066\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n run : setup\nruboty \u30b3\u30de\u30f3\u30c9\u547c\u3073\u51fa\u3057\u6642\u306b --load \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u3066\u3044\u305f\u5834\u5408\u306b\u3001\n\u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u3092\u30ed\u30fc\u30c9\u3059\u308b\u51e6\u7406\u3067\u3059\u3002\ndef setup\n  load(options[:load]) if options[:load]\nend\n\n\n run : remember\nremember \u30e1\u30bd\u30c3\u30c9\u306f brain \u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u306e\u307f\u3067\u3059\u3002\ndef remember\n  brain\nend\n\nbrain \u30e1\u30bd\u30c3\u30c9\u306f\u4ee5\u4e0b\u306e\u69d8\u306a\u51e6\u7406\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\ndef brain\n  Brains::Base.find_class.new\nend\nmemoize :brain\n\n Ruboty::Brains::Base \u30af\u30e9\u30b9\u306e find_class \u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3057\u3001\u7d50\u679c\u3092\u30e1\u30e2\u30ea\u306b\u30e1\u30e2\u5316\u3057\u307e\u3059\u3002\n Ruboty::Brains::Base \u30af\u30e9\u30b9\u306f\u5185\u90e8\u306b @brain_classes \u3068\u3044\u3046\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u3092\u914d\u5217\u5f62\u5f0f\u3067\u4fdd\u6301\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u914d\u5217\u306f\u3001  Ruboty::Brains::Base \u3092\u7d99\u627f\u3059\u308b\u5ea6\u306b\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n find_class \u306f\u6700\u5f8c\u306b\u7d99\u627f\u3055\u308c\u305f\u30af\u30e9\u30b9\u3092\u8fd4\u5374\u3057\u307e\u3059\u3002\n\u7279\u306b\u4f55\u3082\u62e1\u5f35\u3057\u306a\u3051\u308c\u3070\u3001 Ruboty \u306f\u30e1\u30e2\u30ea\u306b Hash \u3068\u3057\u3066\u5024\u3092\u4fdd\u6301\u3059\u308b  Ruboty::Brains::Memory \u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3001\u30c7\u30fc\u30bf\u3092\u8a18\u61b6\u3057\u307e\u3059\u3002\nGemfile \u3067  ruboty-redis gem \u306e\u3088\u3046\u306a Ruboty::Brains::Base \u3092\u7d99\u627f\u3057\u305f gem \u3092\u6307\u5b9a\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u3001\n Ruboty::Brains::Redis \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3001\u30c7\u30fc\u30bf\u3092\u8a18\u61b6\u3057\u307e\u3059\u3002\n\n run : handle\nHandler \u306e\u521d\u671f\u5316\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\nHandler \u306f ruboty \u3092\u5229\u7528\u3059\u308b\u969b\u306b\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u53cd\u5fdc\u3057\u3066\u4f55\u304b\u3057\u3089\u306e\u51e6\u7406\u3092\u884c\u3046\u500b\u5225\u306e\u6a5f\u80fd\u3067\u3059\u3002\n\u4f8b\u3048\u3070 ping \u306b\u5bfe\u3057\u3066 pong \u3092\u8fd4\u5374\u3059\u308b lib/ruboty/handlers/ping.rb \u306a\u3069\u3002\nhandle \u30e1\u30bd\u30c3\u30c9\u306f handlers \u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u306e\u307f\u3067\u3059\u3002\ndef handle\n  handlers\nend\n\n\u4ee5\u4e0b\u306f handlers \u30e1\u30bd\u30c3\u30c9\u306e\u51e6\u7406\u3067\u3059\u3002\ndef handlers\n  Ruboty.handlers.map {|handler_class| handler_class.new(self) }\nend\nmemoize :handlers\n\nRuboty \u30af\u30e9\u30b9\u306e handlers \u306f\u4ee5\u4e0b\u306e\u69d8\u306a\u51e6\u7406\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\nlib/ruboty.rb \u306e 22-25\u884c\u76ee\n\n    def handlers\n      []\n    end\n    memoize :handlers\n\n\u3053\u308c\u3060\u3051\u898b\u308b\u3068\u3001\u7a7a\u914d\u5217\u306b\u898b\u3048\u307e\u3059\u304c\u65e2\u306b\u8aac\u660e\u6e08\u307f\u306e run : bundle \u306e\u5b9f\u884c\u6642\u306b Bundler.require(:default, env) \u3067\u8aad\u307f\u8fbc\u307e\u308c\u305f\nHandler Plugin \u306b\u304b\u3089\u304f\u308a\u304c\u3042\u308a\u307e\u3059\u3002\nRuboty \u306e Handler \u306f  Ruboty::Handlers::Base \u3092\u7d99\u627f\u3057\u3066\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\nRuboty::Handlers::Base \u306f\u7d99\u627f\u6642\u306b  \u7d99\u627f\u5148\u306e\u30af\u30e9\u30b9\u3092 Ruboty \u306e handlers \u914d\u5217\u306b\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\n\u3064\u307e\u308a\u3001\nRuboty.handlers.map {|handler_class| handler_class.new(self) }\n\n\u3068\u3044\u3046\u51e6\u7406\u306f\u3001 \u7d44\u307f\u8fbc\u307f\u306e Handler Plugin (ping, whoami, help) \u3068 Bundler.require(:default, env) \u3067\u8aad\u307f\u8fbc\u307e\u308c\u305f\nGemfile \u306b\u6307\u5b9a\u3057\u305f\u5168\u3066\u306e Hanlder Plugin \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3066\u3001 Ruboty::Brain \u3092\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\u306e\u30e1\u30e2\u30ea\u306b\u8a18\u61b6\u3057\u3001\nRuboty::Robot#handlers \u3067\u53d6\u5f97\u53ef\u80fd\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n run : adapt\nadapte \u306f Ruboty \u304c\u52d5\u4f5c\u3059\u308b\u30c1\u30e3\u30c3\u30c8\u30c4\u30fc\u30eb\u306e\u30a2\u30c0\u30d7\u30bf\u3092\u30ed\u30fc\u30c9\u3059\u308b\u51e6\u7406\u3067\u3059\u3002\nadapter \u306e\u5c64\u304c\u3042\u308b\u3053\u3068\u3067\u3001\u69d8\u3005\u3093\u30c1\u30e3\u30c3\u30c8\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u5bfe\u5fdc\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3066\u3044\u307e\u3059\u3002\nadapt \u30e1\u30bd\u30c3\u30c9\u306f adapter \u30e1\u30bd\u30c3\u30c9\u3067 Gemfile \u306b\u6307\u5b9a\u3057\u305f Adapter \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d6\u5f97\u3057\u3001\nrun \u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u306e\u307f\u3067\u3059\u3002\ndef adapt\n  adapter.run\nend\n\nadapter \u30e1\u30bd\u30c3\u30c9\u306e\u5185\u5bb9\u306f\u4ee5\u4e0b\u3067\u3059\u3002\ndef adapter\n  AdapterBuilder.new(self).build\nend\nmemoize :adapter\n\n Ruboty::AdapterBuilder \u304b\u3089\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d6\u5f97\u3057\u3066\u30e1\u30e2\u30ea\u306b\u8a18\u61b6\u3057\u3066\u3044\u307e\u3059\u3002\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u53d6\u5f97\u306e\u51e6\u7406\u306f\u4ee5\u4e0b\u3067\u3059\u3002\ndef build\n  adapter_class.new(robot)\nend\n\nadapter_class \u30e1\u30bd\u30c3\u30c9\u306e\u672c\u4f53\u306f\u4ee5\u4e0b\u3067\u3059\u3002\ndef adapter_class\n  self.class.adapter_classes.last\nend\n\n\u4ed5\u7d44\u307f\u306f Handlers \u3068\u540c\u3058\u306a\u306e\u3067\u8aac\u660e\u3092\u5272\u611b\u3057\u307e\u3059\u3002\n\n\u7dcf\u62ec\n\u4ee5\u4e0a\u3067\u3001 Ruboty \u306e\u8d77\u52d5\u306e\u4ed5\u7d44\u307f\u3092\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u8aad\u307f\u53d6\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3057\u305f\u3002\n\u307e\u305f\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306a\u70b9\u3092\u5b66\u3073\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\n\u8a2d\u8a08\u624b\u6cd5\n\ngem \u3092\u5229\u7528\u3057\u305f Handler / Adapter / Brain \u306e Plugin \u62e1\u5f35\u306e\u305f\u3081\u306e\u4ed5\u7d44\u307f\nmem gem \u3092\u5229\u7528\u3057\u305f\u30e1\u30e2\u5316\nslop \u3092\u5229\u7528\u3057\u305f option \u306e parse\ndotenv \u3092\u5229\u7528\u3057\u305f\u74b0\u5883\u5909\u6570\u306b\u3088\u308b\u8a2d\u5b9a\n\n\n\u30a4\u30c7\u30a3\u30aa\u30e0\n\nalias_method_chain\n\u5f8c\u7f6e\u306e if\nBundle.require \u3092\u7528\u3044\u305f gem \u306e\u4e00\u62ec require\nPrefer top-level rescue clause \u3092\u5229\u7528\u3057\u305f\u4f8b\u5916\u51e6\u7406\nor \u3092\u5229\u7528\u3057\u305f\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u8a2d\u5b9a\ncompose method pattern \u3092\u5229\u7528\u3057\u3001\u62bd\u8c61\u5ea6\u3092\u63c3\u3048\u3064\u3064\u3001\u5358\u4e00\u6a5f\u80fd\u3067\u7d30\u304b\u304f\u5225\u308c\u305f\u30e1\u30bd\u30c3\u30c9\u7fa4\n\n\n\u305d\u306e\u4ed6\n\n\u8a2d\u8a08\u306b\u4e00\u8cab\u6027\u304c\u3042\u308b\u305f\u3081\u3001\u985e\u4f3c\u30b3\u30fc\u30c9\u3092\u898b\u304b\u3051\u308b\u3068\u51e6\u7406\u3092\u985e\u63a8\u3057\u3084\u3059\u304f\u3001\u3059\u3050\u306b\u7406\u89e3\u3057\u3084\u3059\u3044\n\u547d\u540d\u304c\u9069\u5207\u306a\u305f\u3081\u3001\u30b3\u30e1\u30f3\u30c8\u304c\u975e\u5e38\u306b\u5c11\u306a\u3044\u304c\u554f\u984c\u306a\u304f\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u308b\n\n\n \u53c2\u7167\n\nRuboty | \u57fa\u672c\u69cb\u6210\u56f3\u89e3\n\n octokit.rb\n\n\n mem gem\n\n\n (\uff9f\u2200\uff9f)o\u5f61 sasata299's blog | rails \u306e alias_method_chain \u304c\u7d20\u6674\u3089\u3057\u3059\u304e\u308b\n\n\n# Ruboty \u306e\u30b3\u30fc\u30c9\u30ea\u30fc\u30c7\u30a3\u30f3\u30b0\u3067 Ruboty \u306e\u4ed5\u7d44\u307f\u3092\u7406\u89e3\u3059\u308b\u3068\u5171\u306b Ruby \u306e\u8a2d\u8a08\u30fb\u5b9f\u88c5\u306e\u5b9a\u77f3\u3092\u5b66\u3076 #ruboty\n## <i class=\"fa fa-cubes\" style=\"font-size:1em;\"></i> \u6982\u8981\nRuboty \u306e\u30b3\u30fc\u30c9\u30ea\u30fc\u30c7\u30a3\u30f3\u30b0\u3067 Ruboty \u306e\u4ed5\u7d44\u307f\u3092\u7406\u89e3\u3059\u308b\u3068\u5171\u306b Ruby \u306e\u8a2d\u8a08\u30fb\u5b9f\u88c5\u306e\u5b9a\u77f3\u3092\u5b66\u3073\u307e\u3059\u3002\n\u78ba\u8a8d\u5bfe\u8c61\u306f\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3067 `ruboty` \u3092\u5b9f\u884c\u3057\u3066 Ruboty \u304c\u8d77\u52d5\u3059\u308b\u307e\u3067\u306e\u90e8\u5206\u3067\u3059\u3002\n## <i class=\"fa fa-cube\" style=\"font-size:1em;\"></i> \u306f\u3058\u3081\u306b\nRuboty \u306e\u69cb\u6210\u3092\u7406\u89e3\u3059\u308b\u305f\u3081\u306b\u3001\u3053\u306e\u89e3\u8aac\u3092\u4f5c\u308d\u3046\u3068\u601d\u3063\u305f\u306e\u3067\u3059\u304c\u3001\n\n* Plugin \u306b\u3088\u308b\u62e1\u5f35\u306a\u3069\u3092\u542b\u3081\u305f\u9ad8\u30ec\u30a4\u30e4\u306e\u8a2d\u8a08\u6280\u6cd5\n* \u9069\u5207\u306a\u547d\u540d\u306b\u3088\u308a\u3001\u5358\u4e00\u8cac\u52d9\u3067\u5206\u5272\u3055\u308c\u305f\u30e1\u30bd\u30c3\u30c9\u7fa4\n* \u30e1\u30e2\u5316\u3001 alias method chain , ..etc \u306a\u3069\u69d8\u3005\u306a Ruby \u306e\u30a4\u30c7\u30a3\u30aa\u30e0\n\n\u306a\u3069\u3001 Ruby \u306e\u826f\u3044\u4f5c\u6cd5\u3092 **\u9ad8\u30ec\u30a4\u30e4\u306e\u8a2d\u8a08\u6280\u6cd5** \u304b\u3089 **\u4f4e\u30ec\u30a4\u30e4\u306e\u30a4\u30c7\u30a3\u30aa\u30e0** \u307e\u3067\u5e45\u5e83\u304f\u5b66\u3076\u7d20\u6750\u3068\u3057\u3066\n\u975e\u5e38\u306b\u9b45\u529b\u7684\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u3042\u308b\u3053\u3068\u306b\u6c17\u3065\u304d\u307e\u3057\u305f\u3002\n\n\u305d\u306e\u305f\u3081\u3001 Ruboty \u81ea\u4f53\u306b\u306f\u8208\u5473\u304c\u306a\u3044\u65b9\u3082\u662f\u975e Ruboty \u306e\u30b3\u30fc\u30c9\u30ea\u30fc\u30c7\u30a3\u30f3\u30b0\u3092\u3057\u3066\u307f\u308b\u3053\u3068\u3092\u304a\u3059\u3059\u3081\u3057\u307e\u3059\u3002\n\u4ed6\u306e Rubyist \u306b\u3082\u8aad\u3093\u3067\u3082\u3089\u3044\u305f\u3044\uff01 \u3068\u601d\u3063\u305f\u3089\u62e1\u6563\u3092\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n## <i class=\"fa fa-cube\" style=\"font-size:1em;\"></i> \u524d\u63d0\n* Ruboty \u306e\u5168\u4f53\u7684\u306a\u69cb\u6210\u306e\u6982\u8981\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u3092\u53c2\u7167\u3002\n    * [Ruboty | \u57fa\u672c\u69cb\u6210\u56f3\u89e3](http://qiita.com/tbpgr/items/7f08569dd8828bae6527)\n* \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u306e Ruboty \u8d77\u52d5\u3092\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u3068\u3057\u3066\u3001\u305d\u3053\u3092\u8d77\u70b9\u306b\u8aac\u660e\u3092\u3057\u307e\u3059\n* `ruboty --generatr` \u5074\u306e\u51e6\u7406\u306b\u3064\u3044\u3066\u306f\u8a73\u7d30\u306b\u3064\u3044\u3066\u89e6\u308c\u307e\u305b\u3093\n\n## <i class=\"fa fa-tree\" style=\"font-size:1em;\"></i> \u69cb\u6210\n\u3056\u3063\u3068\u773a\u3081\u3066\u6b21\u306b\u9032\u307f\u307e\u3057\u3087\u3046\u3002\n\n~~~bash\n$ tree\n.\n\u2523 bin\n\u2503 \u2517 ruboty\n\u2523 CHANGELOG.md\n\u2523 Gemfile\n\u2523 lib\n\u2503 \u2523 ruboty\n\u2503 \u2503 \u2523 action.rb\n\u2503 \u2503 \u2523 actions\n\u2503 \u2503 \u2503 \u2523 base.rb\n\u2503 \u2503 \u2503 \u2523 help.rb\n\u2503 \u2503 \u2503 \u2523 ping.rb\n\u2503 \u2503 \u2503 \u2517 whoami.rb\n\u2503 \u2503 \u2523 adapter_builder.rb\n\u2503 \u2503 \u2523 adapters\n\u2503 \u2503 \u2503 \u2523 base.rb\n\u2503 \u2503 \u2503 \u2517 shell.rb\n\u2503 \u2503 \u2523 brains\n\u2503 \u2503 \u2503 \u2523 base.rb\n\u2503 \u2503 \u2503 \u2517 memory.rb\n\u2503 \u2503 \u2523 command_builder.rb\n\u2503 \u2503 \u2523 commands\n\u2503 \u2503 \u2503 \u2523 base.rb\n\u2503 \u2503 \u2503 \u2523 generate.rb\n\u2503 \u2503 \u2503 \u2517 run.rb\n\u2503 \u2503 \u2523 env\n\u2503 \u2503 \u2503 \u2523 missing_required_key_error.rb\n\u2503 \u2503 \u2503 \u2523 validatable.rb\n\u2503 \u2503 \u2503 \u2517 validation_error.rb\n\u2503 \u2503 \u2523 env.rb\n\u2503 \u2503 \u2523 handlers\n\u2503 \u2503 \u2503 \u2523 base.rb\n\u2503 \u2503 \u2503 \u2523 help.rb\n\u2503 \u2503 \u2503 \u2523 ping.rb\n\u2503 \u2503 \u2503 \u2517 whoami.rb\n\u2503 \u2503 \u2523 logger.rb\n\u2503 \u2503 \u2523 message.rb\n\u2503 \u2503 \u2523 robot.rb\n\u2503 \u2503 \u2517 version.rb\n\u2503 \u2517 ruboty.rb\n\u2523 LICENSE.txt\n\u2523 Rakefile\n\u2523 README.md\n\u2523 ruboty.gemspec\n\u2523 spec\n\u2503 \u2523 ruboty\n\u2503 \u2503 \u2523 adapter_builder_spec.rb\n\u2503 \u2503 \u2523 adapters\n\u2503 \u2503 \u2503 \u2517 shell_spec.rb\n\u2503 \u2503 \u2523 commands\n\u2503 \u2503 \u2503 \u2523 generate_spec.rb\n\u2503 \u2503 \u2503 \u2517 run_spec.rb\n\u2503 \u2503 \u2523 env\n\u2503 \u2503 \u2503 \u2517 validatable_spec.rb\n\u2503 \u2503 \u2523 handlers\n\u2503 \u2503 \u2503 \u2523 base_spec.rb\n\u2503 \u2503 \u2503 \u2523 help_spec.rb\n\u2503 \u2503 \u2503 \u2523 ping_spec.rb\n\u2503 \u2503 \u2503 \u2517 whoami_spec.rb\n\u2503 \u2503 \u2517 robot_spec.rb\n\u2503 \u2517 spec_helper.rb\n\u2517 templates\n    \u2517 Gemfile\n~~~\n\n## <i class=\"fa fa-files-o\" style=\"font-size:1em;\"></i> bin/ruboty\n### <i class=\"fa fa-code\" style=\"font-size:1em;\"></i> bin/ruboty \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n<i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [ruboty | ./bin/ruboty](https://github.com/r7kamura/ruboty/blob/master/bin/ruboty)\n### <i class=\"fa fa-pencil\" style=\"font-size:1em;\"></i> bin/ruboty \u306b\u3064\u3044\u3066\nruboty \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u6642\u306e\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u306b\u306a\u308a\u307e\u3059\n`Ruboty::CommandBuilder.new(ARGV).build.call` \u3067\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u306e\u547c\u3073\u51fa\u3057\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u4f8b\u3048\u3070\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3067\n\n~~~bash\n$ ruboty --generate\n~~~\n\n\u3092\u547c\u3073\u51fa\u305b\u3070\u3001 `ARGV` \u306b `--generate` \u304c\u5f15\u304d\u6e21\u3055\u308c\u3001\u4ee5\u964d\u306e\u51e6\u7406\u3067\n<i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [Commands::Generate.call](https://github.com/r7kamura/ruboty/blob/master/lib/ruboty/commands/generate.rb#L6-L8) \u304c\u547c\u3073\u51fa\u3055\u308c\u3001 ruboty \u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3084 Gemfile \u306a\u3069\u306e\u3072\u306a\u5f62\u751f\u6210\u304c\u5b9f\u884c\u3055\u308c\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n## <i class=\"fa fa-files-o\" style=\"font-size:1em;\"></i> lib/command_builder.rb\n### <i class=\"fa fa-code\" style=\"font-size:1em;\"></i> lib/command_builder.rb \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n<i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [ruboty | ./lib/ruboty/command_builder.rb](https://github.com/r7kamura/ruboty/blob/master/lib/ruboty/command_builder.rb)\n### <i class=\"fa fa-pencil\" style=\"font-size:1em;\"></i> lib/command_builder.rb \u306b\u3064\u3044\u3066\n`command_builder` \u306f\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306e\u64cd\u4f5c\u3092\u53d7\u3051\u6301\u3061\u307e\u3059\u3002\n### <i class=\"fa fa-gavel\" style=\"font-size:1em;\"></i> \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e Build\n\n~~~ruby\ndef build\n  command_class.new(options)\nend\n~~~\n\n`command_builder` \u306e\u540d\u524d\u306e\u901a\u308a\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u5f15\u6570\u306e\u5185\u5bb9\u306b\u5fdc\u3058\u3066 \n<i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [Commands::Generate](https://github.com/r7kamura/ruboty/blob/master/lib/ruboty/commands/generate.rb) \u3068 <i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [Commands::Run](https://github.com/r7kamura/ruboty/blob/master/lib/ruboty/commands/run.rb) \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u751f\u6210 = build \u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\n\u4e21 Commands \u306f\u30c0\u30c3\u30af\u30bf\u30a4\u30d4\u30f3\u30b0\u53ef\u80fd\u306a\u3088\u3046\u306b call \u30e1\u30bd\u30c3\u30c9\u3067\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u63c3\u3048\u3066\u3042\u308a\u307e\u3059\u3002\n\n### <i class=\"fa fa-file-text\" style=\"font-size:1em;\"></i> \u30e1\u30e2\u5316\nRuboty \u3067\u306f\u3044\u305f\u308b\u3068\u3053\u308d\u3067 mem gem \u3092\u5229\u7528\u3057\u305f \u30e1\u30e2\u5316\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\n\n~~~ruby\nmodule Ruboty\n  class Robot\n    DEFAULT_ENV = \"development\"\n    DEFAULT_ROBOT_NAME = \"ruboty\"\n\n    include Mem\n# \u4ee5\u4e0b\u7565\n~~~\n\nMem module \u3092 MixIn \u3057\u3066\u3044\u307e\u3059\u3002\nMem module \u306f\u30e1\u30e2\u5316\u306e\u305f\u3081\u306e gem \u3067\u3001\u4ee5\u964d\u306e\u30b3\u30fc\u30c9\u3067\u3082\u983b\u7e41\u306b\u5229\u7528\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nMem module \u306f <i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [mem gem](https://github.com/r7kamura/mem) \u306b\u542b\u307e\u308c\u308b Module \u3067\u3042\u308a\u3001\u3053\u3061\u3089\u3082 Ruboty \u3068\u540c\u69d8 @r7kamura \u3055\u3093\u88fd\u3067\u3059\u3002\n\u3053\u306e gem \u3092\u6d3b\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u540c\u69d8\u306e\u51e6\u7406\u304c\u4f55\u5ea6\u3082\u547c\u3070\u308c\u308b\u5834\u5408\u306e\u6027\u80fd\u3092\u5411\u4e0a\u3055\u305b\u3066\u3044\u307e\u3059\u3002\n\nMem module \u3092 MixIn \u3059\u308b\u3068\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30e1\u30bd\u30c3\u30c9\u3068\u3057\u3066\n\n* has_memoized?(key)\n* memoize(key, value)\n* memoized(key)\n* memoized_table\n* unmemoize(key)\n\n\u3092\u5229\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\u547d\u540d\u304c\u9069\u5207\u306a\u306e\u3067\u3001\u5185\u5bb9\u306f\u60f3\u50cf\u304c\u3064\u304d\u307e\u3059\u306d\u3002\n\nmemoize \u30af\u30e9\u30b9\u30de\u30af\u30ed\u306b\u4fdd\u5b58\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u30b7\u30f3\u30dc\u30eb\u3067\u6307\u5b9a\u3059\u308b\u3068\u3001\n\n* `\"#{method_name}_with_memoize\"` \n* `\"unmemoize_#{method_name}\"` \n\n\u3092\u52d5\u7684\u306b\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\u524d\u8005\u306f Hash \u3078\u306e\u30e1\u30e2\u5316\u3002\n\u5f8c\u8005\u306f Hash \u306b\u4fdd\u5b58\u3057\u305f\u60c5\u5831\u306e\u89e3\u653e\uff08\u524a\u9664\uff09\u3092\u884c\u3044\u307e\u3059\u3002\n\n`\"#{method_name}_with_memoize\"` \u306f\u30e1\u30e2\u30ea\u306b\u7d50\u679c\u304c\u3042\u308c\u3070\u3001\u30e1\u30e2\u5316\u3055\u308c\u305f\u7d50\u679c\u3092\u5229\u7528\u3001\n\u306a\u3051\u308c\u3070\u51e6\u7406\u3092\u5b9f\u884c\u3057\u3066\u3001\u7d50\u679c\u3092\u30e1\u30e2\u5316\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u305d\u3057\u3066\u3001\u76f4\u5f8c\u306b ***alias_method_chain*** \u306e\u30a4\u30c7\u30a3\u30aa\u30e0\u3067\u65e2\u5b58\u30e1\u30bd\u30c3\u30c9\u3068\u3001\u30e1\u30e2\u5316\u6a5f\u80fd\u4ed8\u304d\u306e\u65b0\u898f\u30e1\u30bd\u30c3\u30c9\u306b\u5225\u540d\u3092\u4e0e\u3048\u3066\u3044\u307e\u3059\u3002\n***alias_method_chain*** \u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u304c\u7c21\u6f54\u3067\u5206\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\n<i class=\"fa fa-external-link-square\" style=\"font-size:1em;\"></i> [(\uff9f\u2200\uff9f)o\u5f61 sasata299's blog | rails \u306e alias_method_chain \u304c\u7d20\u6674\u3089\u3057\u3059\u304e\u308b](http://blog.livedoor.jp/sasata299/archives/51166404.html)\n\n\u3053\u308c\u306b\u3088\u308a\u3001\u65e2\u5b58\u30e1\u30bd\u30c3\u30c9\u3068\u52d5\u7684\u306b\u8ffd\u52a0\u3057\u305f\u30e1\u30e2\u5316\u6a5f\u80fd\u4ed8\u304d\u306e\u30e1\u30bd\u30c3\u30c9\u306e\u4e21\u65b9\u3092\u547c\u3073\u5206\u3051\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n`memoize :some_method_name` \u3092\u8a2d\u5b9a\u3057\u305f\u3053\u3068\u3067\u3001\u65e2\u5b58\u306e\u30e1\u30bd\u30c3\u30c9\u306b\u5bfe\u3057\u3066\u547c\u3073\u51fa\u3057\u3092\u884c\u3046\u3068\u30e1\u30e2\u5316\u6a5f\u80fd\u3092\u4ed8\u52a0\u3055\u308c\u3066\u3001\n\u51e6\u7406\u304c\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n@r7kamura \u3055\u3093\u306b\u3088\u308b Mem \u306e\u7c21\u5358\u306a\u8aac\u660e\u306f\u4ee5\u4e0b\u306e\u30da\u30fc\u30b8\u306e\u4e2d\u7a0b\u306b\u3042\u308a\u307e\u3059\u3002\n<i class=\"fa fa-external-link-square\" style=\"font-size:1em;\"></i> [Rails\u30a2\u30d7\u30ea\u3064\u304f\u3063\u305f](http://r7kamura.hatenablog.com/entry/2014/04/06/023344)\n\n### <i class=\"fa fa-cube\" style=\"font-size:1em;\"></i> Option \u306e Parse\n<i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [Slop gem](https://github.com/leejarvis/slop) \u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\u8a73\u7d30\u306f Slop gem \u306e README \u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002\n\n~~~ruby\ndef options\n  Slop.parse!(arguments, help: true) do\n    on(\"dotenv\", \"Load .env before running.\")\n    on(\"g\", \"generate\", \"Generate a new chatterbot with ./ruboty/ directory if specified.\")\n    on(\"l\", \"load=\", \"Load a ruby file before running.\")\n  end.to_hash\nend\n~~~\n\n## <i class=\"fa fa-files-o\" style=\"font-size:1em;\"></i> lib/commands/run.rb\n### <i class=\"fa fa-code\" style=\"font-size:1em;\"></i> lib/commands/run.rb \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n<i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [ruboty | ./lib/commands/run.rb](https://github.com/r7kamura/ruboty/blob/master/lib/ruboty/commands/run.rb)\n### <i class=\"fa fa-pencil\" style=\"font-size:1em;\"></i> lib/commands/run.rb \u306b\u3064\u3044\u3066\nRobot \u306e `run` \u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\n\n~~~ruby\ndef call\n  Robot.new(options).run\nend\n~~~\n\n## <i class=\"fa fa-files-o\" style=\"font-size:1em;\"></i> lib/ruboty/robot.rb\n### <i class=\"fa fa-code\" style=\"font-size:1em;\"></i> lib/ruboty/robot.rb \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n<i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [ruboty | ./lib/ruboty/robot.rb](https://github.com/r7kamura/ruboty/blob/master/lib/ruboty/robot.rb)\n### <i class=\"fa fa-pencil\" style=\"font-size:1em;\"></i> lib/ruboty/robot.rb \u306b\u3064\u3044\u3066\nRuboty \u306e\u8d77\u52d5\u672c\u51e6\u7406\u3067\u3059\u3002\n### <i class=\"fa fa-gear\" style=\"font-size:1em;\"></i> \u30c7\u30d7\u30ed\u30a4\u7a2e\u5225 ( production / development \u7b49 )\nRuboty \u306e\u30c7\u30d7\u30ed\u30a4\u30e2\u30fc\u30c9\u306e\u5207\u308a\u66ff\u3048\u306f ENV['RUBOTY_ENV'] \u3067\u884c\u308f\u308c\u3066\u3044\u307e\u3059\u3002\nRuboty::DEFAULT_ENV \u306b\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30c7\u30d7\u30ed\u30a4\u30e2\u30fc\u30c9\u304c `development` \u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n### <i class=\"fa fa-reddit-square\" style=\"font-size:1em;\"></i> \u30ed\u30dc\u30c3\u30c8\u540d\nRuboty \u306e\u30ed\u30dc\u30c3\u30c8\u540d\u306f\u4ee5\u4e0b\u306e\u9806\u3067\u6c7a\u5b9a\u3055\u308c\u307e\u3059\u3002\n\n1. `ENV[\"RUBOTY_NAME\"]`\n1. `ENV[\"ROBOT_NAME\"]`\n1. `Ruboty::DEFAULT_ROBOT_NAME`\n\n`Ruboty::DEFAULT_ROBOT_NAME` \u306f\u3001 `ruboty` \u3067\u3059\u3002\n\u30b3\u30e1\u30f3\u30c8\u306b `ROBOT_NAME is deprecated.` \u3068\u66f8\u3044\u3066\u3042\u308b\u306e\u3067, \u74b0\u5883\u5909\u6570 `RUBOTY_NAME` \u306b\n\u597d\u304d\u306a\u30ed\u30dc\u30c3\u30c8\u540d\u3092\u3064\u3051\u308b\u306e\u304c\u6b63\u3057\u3044\u4f5c\u6cd5\u3068\u3044\u3046\u3053\u3068\u3067\u3057\u3087\u3046\u3002\n\n* or \u3092\u5229\u7528\u3057\u305f\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u8a2d\u5b9a\u306e\u30a4\u30c7\u30a3\u30aa\u30e0\n\u4e0a\u8a18\u306e\u8a2d\u5b9a\u306e\u5b9f\u30b3\u30fc\u30c9\u304c\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n\n~~~ruby\ndef name\n  ENV[\"RUBOTY_NAME\"] || ENV[\"ROBOT_NAME\"] || DEFAULT_ROBOT_NAME\nend\n~~~\n\n\u5024\u304c\u306a\u304b\u3063\u305f\u5834\u5408\u306e\u307f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306b\n\n~~~ruby\nreturn specific_value || default_value\n~~~\n\n\u3068\u3044\u3046\u30a4\u30c7\u30a3\u30aa\u30e0\u304c\u3088\u304f\u5229\u7528\u3055\u308c\u307e\u3059\u3002\n\n### <i class=\"fa fa-cube\" style=\"font-size:1em;\"></i> run\n\u3053\u3053\u304b\u3089\u3001 Ruboty \u8d77\u52d5\u306e\u30e1\u30a4\u30f3\u51e6\u7406\u306e\u59cb\u307e\u308a\u3067\u3059\u3002\n`run` \u30e1\u30bd\u30c3\u30c9\u306e\u4e2d\u306f\u3001 \u62bd\u8c61\u5ea6\u3092\u5408\u308f\u305b\u305f\u30e1\u30bd\u30c3\u30c9\u7fa4\u306e\u96c6\u307e\u308a\u306b\u306a\u3063\u3066\u3044\u3066\u3001\n\u4f4e\u30ec\u30a4\u30e4\u30fc\u306e\u51e6\u7406\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u3053\u308c\u3060\u3051\u3067\u3082\u3001\u8d77\u52d5\u51e6\u7406\u4e2d\u306b\u3069\u3093\u306a\u9806\u3067\u4f55\u3092\u884c\u3063\u3066\u3044\u308b\u304b\u60f3\u50cf\u304c\u4ed8\u304d\u307e\u3059\u3002\n[Composed Method Pattern](http://qiita.com/tbpgr/items/06266a4161019b445756) \u3067\u3059\u306d\u3002\n\n~~~ruby\ndef run\n  dotenv\n  bundle\n  setup\n  remember\n  handle\n  adapt\nend\n~~~\n\n### <i class=\"fa fa-cube\" style=\"font-size:1em;\"></i> run : dotenv\nruboty \u30b3\u30de\u30f3\u30c9\u547c\u3073\u51fa\u3057\u6642\u306b `--dotenv` \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u3066\u3044\u305f\u5834\u5408\u306b\u3001\n.env \u30d5\u30a1\u30a4\u30eb\u304b\u3089\u74b0\u5883\u5909\u6570\u3092\u30ed\u30fc\u30c9\u3059\u308b\u51e6\u7406\u3067\u3059\u3002\ndotenv gem \u306b\u3064\u3044\u3066\u306f\u3001 <i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [\u3053\u3061\u3089](https://github.com/bkeepers/dotenv)\u3092\u53c2\u7167\n\nRuby \u3067\u3088\u304f\u5229\u7528\u3059\u308b\u3001\u5f8c\u7f6e\u306e `if` \u306b\u3088\u308b\u30b3\u30f3\u30d1\u30af\u30c8\u306a\u8a18\u6cd5\u3067\u3059\u3002\n\n~~~ruby\ndef dotenv\n  Dotenv.load if options[:dotenv]\nend\n~~~\n\n### <i class=\"fa fa-cube\" style=\"font-size:1em;\"></i> run : bundle\nGemfile \u306b\u6307\u5b9a\u3057\u305f \u5404\u7a2e Plugin \u306a\u3069\u306e gem \u3092 development \u3084 production \u306a\u3069\u306e\u74b0\u5883\u306b\n\u5fdc\u3058\u3066 require \u3057\u3066\u3044\u307e\u3059\u3002\n\n~~~ruby\ndef bundle\n  Bundler.require(:default, env)\nrescue Bundler::GemfileNotFound\nend\n~~~\n\n`rescue Bundler::GemfileNotFound` \u306e\u90e8\u5206\u306f\u3001 Gemfile \u304c\u306a\u304b\u3063\u305f\u5834\u5408\u3067\u3082\n\u30a8\u30e9\u30fc\u304c\u767a\u751f\u305b\u305a\u306b\u52d5\u4f5c\u304c\u7d9a\u304f\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3061\u306a\u307f\u306b\u901a\u5e38\u3001 Ruby \u306e\u4f8b\u5916\u51e6\u7406\u306b\u3064\u3044\u3066\u306f\n\n~~~ruby\nbegin\n  0/0\nrescue => e\n  puts e.message # => divided by 0\nend\n~~~\n\n\u306e\u3088\u3046\u306b\u3001 `begin-rescue-end` \u306e\u5f62\u5f0f\u3067\u7d39\u4ecb\u3055\u308c\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u304c\u3001\n\u30e1\u30bd\u30c3\u30c9\u5185\u306e\u51e6\u7406\u306e\u30c8\u30c3\u30d7\u30ec\u30d9\u30eb\u3067\u5229\u7528\u3059\u308b\u5834\u5408\u306f\u3001`begin-end` \u3092\u7701\u7565\u3059\u308b\u3053\u3068\u3067\n\u30b3\u30fc\u30c9\u5168\u4f53\u306e\u30d6\u30ed\u30c3\u30af\u30921\u968e\u5c64\u4e0b\u3052\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3053\u308c\u306b\u3088\u308a\u3001\u30b3\u30fc\u30c9\u306e\u898b\u901a\u3057\u304c\u826f\u304f\u306a\u308a\u3001\u53ef\u8aad\u6027\u304c\u3042\u304c\u308a\u307e\u3059\u3002\n\n\u66f8\u7c4d \u300c <i class=\"fa fa-book\" style=\"font-size:1em;\"></i> [Confident Ruby](https://pragprog.com/book/agcr/confident-ruby)\u300d\u306e\u4e2d\u3067\u3082 <i class=\"fa fa-external-link-square\" style=\"font-size:1em;\"></i> [Prefer top-level rescue clause](http://d.hatena.ne.jp/tbpg/20140514/1400072585) \u3068\u3044\u3046\u540d\u524d\u306e\u30c6\u30af\u30cb\u30c3\u30af\u3068\u3057\u3066\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n### <i class=\"fa fa-cube\" style=\"font-size:1em;\"></i> run : setup\nruboty \u30b3\u30de\u30f3\u30c9\u547c\u3073\u51fa\u3057\u6642\u306b `--load` \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u3066\u3044\u305f\u5834\u5408\u306b\u3001\n\u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u3092\u30ed\u30fc\u30c9\u3059\u308b\u51e6\u7406\u3067\u3059\u3002\n\n~~~ruby\ndef setup\n  load(options[:load]) if options[:load]\nend\n~~~\n\n### <i class=\"fa fa-cube\" style=\"font-size:1em;\"></i> run : remember\n`remember` \u30e1\u30bd\u30c3\u30c9\u306f `brain` \u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u306e\u307f\u3067\u3059\u3002\n\n~~~ruby\ndef remember\n  brain\nend\n~~~\n\nbrain \u30e1\u30bd\u30c3\u30c9\u306f\u4ee5\u4e0b\u306e\u69d8\u306a\u51e6\u7406\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n~~~ruby\ndef brain\n  Brains::Base.find_class.new\nend\nmemoize :brain\n~~~\n\n<i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [Ruboty::Brains::Base](https://github.com/r7kamura/ruboty/blob/master/lib/ruboty/brains/base.rb) \u30af\u30e9\u30b9\u306e `find_class` \u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3057\u3001\u7d50\u679c\u3092\u30e1\u30e2\u30ea\u306b\u30e1\u30e2\u5316\u3057\u307e\u3059\u3002\n<i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [Ruboty::Brains::Base](https://github.com/r7kamura/ruboty/blob/master/lib/ruboty/brains/base.rb) \u30af\u30e9\u30b9\u306f\u5185\u90e8\u306b `@brain_classes` \u3068\u3044\u3046\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u3092\u914d\u5217\u5f62\u5f0f\u3067\u4fdd\u6301\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u914d\u5217\u306f\u3001 <i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [Ruboty::Brains::Base \u3092\u7d99\u627f\u3059\u308b\u5ea6\u306b\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u3002](https://github.com/r7kamura/ruboty/blob/master/lib/ruboty/brains/base.rb#L7-L9)\n<i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [`find_class` \u306f\u6700\u5f8c\u306b\u7d99\u627f\u3055\u308c\u305f\u30af\u30e9\u30b9\u3092\u8fd4\u5374\u3057\u307e\u3059\u3002](https://github.com/r7kamura/ruboty/blob/master/lib/ruboty/brains/base.rb#L12)\n\u7279\u306b\u4f55\u3082\u62e1\u5f35\u3057\u306a\u3051\u308c\u3070\u3001 Ruboty \u306f\u30e1\u30e2\u30ea\u306b Hash \u3068\u3057\u3066\u5024\u3092\u4fdd\u6301\u3059\u308b <i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [Ruboty::Brains::Memory](https://github.com/r7kamura/ruboty/blob/master/lib/ruboty/brains/memory.rb) \u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3001\u30c7\u30fc\u30bf\u3092\u8a18\u61b6\u3057\u307e\u3059\u3002\nGemfile \u3067 <i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [ruboty-redis gem](https://github.com/r7kamura/ruboty-redis) \u306e\u3088\u3046\u306a `Ruboty::Brains::Base` \u3092\u7d99\u627f\u3057\u305f gem \u3092\u6307\u5b9a\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u3001\n<i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [Ruboty::Brains::Redis](https://github.com/r7kamura/ruboty-redis/blob/master/lib/ruboty/brains/redis.rb) \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3001\u30c7\u30fc\u30bf\u3092\u8a18\u61b6\u3057\u307e\u3059\u3002\n\n### <i class=\"fa fa-cube\" style=\"font-size:1em;\"></i> run : handle\nHandler \u306e\u521d\u671f\u5316\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\nHandler \u306f ruboty \u3092\u5229\u7528\u3059\u308b\u969b\u306b\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u53cd\u5fdc\u3057\u3066\u4f55\u304b\u3057\u3089\u306e\u51e6\u7406\u3092\u884c\u3046\u500b\u5225\u306e\u6a5f\u80fd\u3067\u3059\u3002\n\u4f8b\u3048\u3070 ping \u306b\u5bfe\u3057\u3066 pong \u3092\u8fd4\u5374\u3059\u308b `lib/ruboty/handlers/ping.rb` \u306a\u3069\u3002\n\n`handle` \u30e1\u30bd\u30c3\u30c9\u306f `handlers` \u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u306e\u307f\u3067\u3059\u3002\n\n~~~ruby\ndef handle\n  handlers\nend\n~~~\n\n\u4ee5\u4e0b\u306f `handlers` \u30e1\u30bd\u30c3\u30c9\u306e\u51e6\u7406\u3067\u3059\u3002\n\n~~~ruby\ndef handlers\n  Ruboty.handlers.map {|handler_class| handler_class.new(self) }\nend\nmemoize :handlers\n~~~\n\nRuboty \u30af\u30e9\u30b9\u306e handlers \u306f\u4ee5\u4e0b\u306e\u69d8\u306a\u51e6\u7406\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n* [lib/ruboty.rb \u306e 22-25\u884c\u76ee](https://github.com/r7kamura/ruboty/blob/master/lib/ruboty.rb#L22-L25)\n\n~~~ruby\n    def handlers\n      []\n    end\n    memoize :handlers\n~~~\n\n\u3053\u308c\u3060\u3051\u898b\u308b\u3068\u3001\u7a7a\u914d\u5217\u306b\u898b\u3048\u307e\u3059\u304c\u65e2\u306b\u8aac\u660e\u6e08\u307f\u306e `run : bundle` \u306e\u5b9f\u884c\u6642\u306b `Bundler.require(:default, env)` \u3067\u8aad\u307f\u8fbc\u307e\u308c\u305f\nHandler Plugin \u306b\u304b\u3089\u304f\u308a\u304c\u3042\u308a\u307e\u3059\u3002\n\nRuboty \u306e Handler \u306f <i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [Ruboty::Handlers::Base](https://github.com/r7kamura/ruboty/blob/master/lib/ruboty/handlers/base.rb) \u3092\u7d99\u627f\u3057\u3066\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\nRuboty::Handlers::Base \u306f\u7d99\u627f\u6642\u306b <i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [\u7d99\u627f\u5148\u306e\u30af\u30e9\u30b9\u3092 Ruboty \u306e handlers \u914d\u5217\u306b\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002](https://github.com/r7kamura/ruboty/blob/master/lib/ruboty/handlers/base.rb#L8)\n\n\u3064\u307e\u308a\u3001\n\n~~~ruby\nRuboty.handlers.map {|handler_class| handler_class.new(self) }\n~~~\n\n\u3068\u3044\u3046\u51e6\u7406\u306f\u3001 \u7d44\u307f\u8fbc\u307f\u306e Handler Plugin (ping, whoami, help) \u3068 `Bundler.require(:default, env)` \u3067\u8aad\u307f\u8fbc\u307e\u308c\u305f\nGemfile \u306b\u6307\u5b9a\u3057\u305f\u5168\u3066\u306e Hanlder Plugin \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3066\u3001 Ruboty::Brain \u3092\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\u306e\u30e1\u30e2\u30ea\u306b\u8a18\u61b6\u3057\u3001\n`Ruboty::Robot#handlers` \u3067\u53d6\u5f97\u53ef\u80fd\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n### <i class=\"fa fa-cube\" style=\"font-size:1em;\"></i> run : adapt\nadapte \u306f Ruboty \u304c\u52d5\u4f5c\u3059\u308b\u30c1\u30e3\u30c3\u30c8\u30c4\u30fc\u30eb\u306e\u30a2\u30c0\u30d7\u30bf\u3092\u30ed\u30fc\u30c9\u3059\u308b\u51e6\u7406\u3067\u3059\u3002\nadapter \u306e\u5c64\u304c\u3042\u308b\u3053\u3068\u3067\u3001\u69d8\u3005\u3093\u30c1\u30e3\u30c3\u30c8\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u5bfe\u5fdc\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3066\u3044\u307e\u3059\u3002\n\n`adapt` \u30e1\u30bd\u30c3\u30c9\u306f `adapter` \u30e1\u30bd\u30c3\u30c9\u3067 Gemfile \u306b\u6307\u5b9a\u3057\u305f Adapter \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d6\u5f97\u3057\u3001\n`run` \u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u306e\u307f\u3067\u3059\u3002\n\n~~~ruby\ndef adapt\n  adapter.run\nend\n~~~\n\n`adapter` \u30e1\u30bd\u30c3\u30c9\u306e\u5185\u5bb9\u306f\u4ee5\u4e0b\u3067\u3059\u3002\n\n~~~ruby\ndef adapter\n  AdapterBuilder.new(self).build\nend\nmemoize :adapter\n~~~\n\n<i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [Ruboty::AdapterBuilder](https://github.com/r7kamura/ruboty/blob/master/lib/ruboty/adapter_builder.rb) \u304b\u3089\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d6\u5f97\u3057\u3066\u30e1\u30e2\u30ea\u306b\u8a18\u61b6\u3057\u3066\u3044\u307e\u3059\u3002\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u53d6\u5f97\u306e\u51e6\u7406\u306f\u4ee5\u4e0b\u3067\u3059\u3002\n\n~~~ruby\ndef build\n  adapter_class.new(robot)\nend\n~~~\n\n`adapter_class` \u30e1\u30bd\u30c3\u30c9\u306e\u672c\u4f53\u306f\u4ee5\u4e0b\u3067\u3059\u3002\n\n~~~\ndef adapter_class\n  self.class.adapter_classes.last\nend\n~~~\n\n\u4ed5\u7d44\u307f\u306f Handlers \u3068\u540c\u3058\u306a\u306e\u3067\u8aac\u660e\u3092\u5272\u611b\u3057\u307e\u3059\u3002\n\n## \u7dcf\u62ec\n\u4ee5\u4e0a\u3067\u3001 Ruboty \u306e\u8d77\u52d5\u306e\u4ed5\u7d44\u307f\u3092\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304b\u3089\u8aad\u307f\u53d6\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3057\u305f\u3002\n\u307e\u305f\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306a\u70b9\u3092\u5b66\u3073\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\n### \u8a2d\u8a08\u624b\u6cd5\n* gem \u3092\u5229\u7528\u3057\u305f Handler / Adapter / Brain \u306e Plugin \u62e1\u5f35\u306e\u305f\u3081\u306e\u4ed5\u7d44\u307f\n* mem gem \u3092\u5229\u7528\u3057\u305f\u30e1\u30e2\u5316\n* slop \u3092\u5229\u7528\u3057\u305f option \u306e parse\n* dotenv \u3092\u5229\u7528\u3057\u305f\u74b0\u5883\u5909\u6570\u306b\u3088\u308b\u8a2d\u5b9a\n\n### \u30a4\u30c7\u30a3\u30aa\u30e0\n* alias_method_chain\n* \u5f8c\u7f6e\u306e if\n* Bundle.require \u3092\u7528\u3044\u305f gem \u306e\u4e00\u62ec require\n* Prefer top-level rescue clause \u3092\u5229\u7528\u3057\u305f\u4f8b\u5916\u51e6\u7406\n* or \u3092\u5229\u7528\u3057\u305f\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u8a2d\u5b9a\n* compose method pattern \u3092\u5229\u7528\u3057\u3001\u62bd\u8c61\u5ea6\u3092\u63c3\u3048\u3064\u3064\u3001\u5358\u4e00\u6a5f\u80fd\u3067\u7d30\u304b\u304f\u5225\u308c\u305f\u30e1\u30bd\u30c3\u30c9\u7fa4\n\n### \u305d\u306e\u4ed6\n* \u8a2d\u8a08\u306b\u4e00\u8cab\u6027\u304c\u3042\u308b\u305f\u3081\u3001\u985e\u4f3c\u30b3\u30fc\u30c9\u3092\u898b\u304b\u3051\u308b\u3068\u51e6\u7406\u3092\u985e\u63a8\u3057\u3084\u3059\u304f\u3001\u3059\u3050\u306b\u7406\u89e3\u3057\u3084\u3059\u3044\n* \u547d\u540d\u304c\u9069\u5207\u306a\u305f\u3081\u3001\u30b3\u30e1\u30f3\u30c8\u304c\u975e\u5e38\u306b\u5c11\u306a\u3044\u304c\u554f\u984c\u306a\u304f\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u308b\n\n## <i class=\"fa fa-arrow-circle-right\" style=\"font-size:1em;\"></i> \u53c2\u7167\n* [Ruboty | \u57fa\u672c\u69cb\u6210\u56f3\u89e3](http://qiita.com/tbpgr/items/7f08569dd8828bae6527)\n* <i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [octokit.rb](https://github.com/octokit/octokit.rb)\n* <i class=\"fa fa-github-square\" style=\"font-size:1em;\"></i> [mem gem](https://github.com/r7kamura/mem)\n* <i class=\"fa fa-external-link-square\" style=\"font-size:1em;\"></i> [(\uff9f\u2200\uff9f)o\u5f61 sasata299's blog | rails \u306e alias_method_chain \u304c\u7d20\u6674\u3089\u3057\u3059\u304e\u308b](http://blog.livedoor.jp/sasata299/archives/51166404.html)\n", "tags": ["Ruboty", "Ruby"]}