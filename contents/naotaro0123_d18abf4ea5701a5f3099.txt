{"context": " More than 1 year has passed since last update.Live2D SDK WebGL\u7248\u3067\u7c21\u6613Live2DViewer\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\nLive2D\u30e2\u30c7\u30eb\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30b5\u30fc\u30d0\u30fc\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u305b\u305f\u304f\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u5168\u3066HTML5\u306e\u6a5f\u80fd\u3067\u5b9f\u88c5\u3057\u3066\u307e\u3059\u3002\n\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u3068\u30d5\u30a1\u30a4\u30eb\u306e\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\n\uff08\u30c6\u30af\u30b9\u30c1\u30e3\u306f\u8907\u6570\u9078\u629e\u3057\u3066\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3057\u3066\u4e0b\u3055\u3044\uff09\n\u30fb\u7c21\u6613Live2DViewer\n\n\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\nLive2D SDK\u306eSimple\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u5143\u306b\u30ab\u30b9\u30bf\u30e0\u3057\u3066\u3044\u307e\u3059\u3002\nLive2D_DragDrop\n\u2502\n\u2502  index.html\n\u2502\n\u251c\u2500framework\n\u2502    Live2DFramework.js\u30fb\u30fb\u30fbSDK\u4ed8\u5c5e\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n\u2502    \n\u251c\u2500lib\n\u2502    live2d.min.js\u30fb\u30fb\u30fbLive2D\u306e\u30b3\u30a2\u30e9\u30a4\u30d6\u30e9\u30ea\n\u2502    \n\u2514\u2500src\n      Simple.js\n\n\n\u30bd\u30fc\u30b9\n\u65e2\u5b58\u306e\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u30dc\u30bf\u30f3\u3060\u3068\u30c0\u30b5\u3044\u306e\u3067\u3001\u30c0\u30df\u30fc\u30dc\u30bf\u30f3\u3092\u8868\u793a\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u51e6\u7406\u3092\u547c\u3093\u3067\u3044\u307e\u3059\n\nindex.html\n<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset=\"UTF-8\">\n            <title>Live2D Simple</title>\n        </meta>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=4.0\">\n        </meta>\n    <style>\n        /* \u9078\u629e\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u30b5\u30e0\u30cd\u30a4\u30eb\u8868\u793a */\n      .thumb {\n        height: 75px;\n        border: 1px solid #000;\n        margin: 10px 5px 0 0;\n      }\n      .drop_area{\n          border:dashed 2px #ccc;\n          width:512px;\n          height:80px;\n          margin:4px;\n          background-color:#efefef;\n      }\n      .moc_area, .texture_area, .motion_area{\n          padding-top:10px;\n          font-size: 18px;\n          color:blue;\n          text-align: center;\n      }\n      #select_moc, #select_texture, #select_motion{\n          display:none;\n      }\n      #dummy_moc_btn, #dummy_texture_btn, #dummy_motion_btn{\n          margin-top:10px;\n          margin-left:150px;\n          font-size: 12px;\n          text-decoration: none;\n          color:#fff;\n          background-color: #49a9d4;\n          border:none;\n          border-radius: 5px;\n          padding:2px 16px 2px 16px;\n      }\n      #dummy_moc_file, #dummy_motion_file{\n          width:200px;\n          height: 20px;\n          font-size: 14px;\n          border:none;\n          background-color: #e6e6e6;\n      }\n      #displaybtn{\n          width: 160px;\n          height:40px;\n          margin-left:4px;\n          margin-bottom:4px;\n          font-size:20px;\n          font-weight: bold;\n          color:#fff;\n          background-color: #49a9d4;\n          border:none;\n          border-radius: 5px;\n          padding:2px 16px 2px 16px;\n          box-shadow:2px 2px #1a6ea0;\n          text-shadow:1px 1px #555;\n      }\n      #displaybtn:hover{\n          color:#fff;\n          background-color: #0F7DAE;\n          box-shadow: 2px 2px #073E5F;\n      }\n      .live2d_area{\n          position: absolute;\n          top:4px;\n          left:528px;\n      }\n      #glcanvas{\n          border:dashed 2px #CCC;\n          margin:4px;\n      }\n    </style>\n    </head>\n    <body>\n        <!-- moc\u30d5\u30a1\u30a4\u30eb -->\n        <div class=\"drop_area\" id=\"drop_moc\">\n            <div class=\"moc_area\">moc\u3092\u30c9\u30ed\u30c3\u30d7</div>        \n            <input type=\"file\" id=\"select_moc\" name=\"files\" />\n            <button id=\"dummy_moc_btn\" onclick=\"dummy_moc_click()\">moc\u30d5\u30a1\u30a4\u30eb\u9078\u629e</button>\n            <input type=\"text\" id=\"dummy_moc_file\" readonly>\n        </div>\n        <!-- texture\u30d5\u30a1\u30a4\u30eb -->\n        <div class=\"drop_area\" id=\"drop_texture\">\n            <div class=\"texture_area\">texuture\u3092\u30c9\u30ed\u30c3\u30d7</div>        \n            <input type=\"file\" id=\"select_texture\" name=\"files[]\" multiple />            \n            <button id=\"dummy_texture_btn\" onclick=\"dummy_texture_click()\">texture\u30d5\u30a1\u30a4\u30eb\u9078\u629e</button>\n        </div>\n        <!-- \u9078\u629e\u3057\u305f\u3057\u305f\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u8868\u793a\u3059\u308b\u90e8\u5206 -->\n        <output id=\"texture_list\"></output>\n        <br>\n        <!-- motion\u30d5\u30a1\u30a4\u30eb -->\n        <div class=\"drop_area\" id=\"drop_motion\">\n            <div class=\"motion_area\">motion\u3092\u30c9\u30ed\u30c3\u30d7</div>        \n            <input type=\"file\" id=\"select_motion\" name=\"files\" />\n            <button id=\"dummy_motion_btn\" onclick=\"dummy_motion_click()\">motion\u30d5\u30a1\u30a4\u30eb\u9078\u629e</button>\n            <input type=\"text\" id=\"dummy_motion_file\" readonly>\n        </div>\n        <!-- \u30e2\u30c7\u30eb\u8868\u793a\u30dc\u30bf\u30f3 -->\n        <button id=\"displaybtn\" onclick=\"Simple()\">\u30e2\u30c7\u30eb\u8868\u793a</button>\n        <div class=\"live2d_area\">\n            <!-- Live2D\u30e2\u30c7\u30eb -->\n            <canvas id=\"glcanvas\" width = \"512px\" height=\"512px\"></canvas>\n            <div id=\"myconsole\" style=\"color:#BBB\">---- Log ----</div>                    \n        </div>\n        <!-- Live2D Library -->\n        <script src=\"lib/live2d.min.js\"></script>        \n        <script src=\"framework/Live2DFramework.js\"></script>\n        <!-- User's Script -->\n        <script src=\"src/Simple.js\"></script>\n    </body>\n</html>\n\n\n\u5143\u3005\u306fLive2D\u30e2\u30c7\u30eb\u30d5\u30a1\u30a4\u30eb(.moc\u3001.mtn\uff09\u306fXMLHttpRequest\u306earraybuffer\u5f62\u5f0f\u3067\u30ed\u30fc\u30c9\u3057\u3066\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306f\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u5f62\u5f0f\u306a\u306e\u3067\u3001FileReader\u3067Base64\u5f62\u5f0f\u306b\u3057\u3066\u30ed\u30fc\u30c9\u3057\u3066\u307e\u3059\u3002\nBase64\u306f\u5c0f\u3055\u3044\u753b\u50cf\u306e\u307f\u6709\u52b9\u304b\u3068\u601d\u3063\u305f\u3089\u30011024px x 1024px\u306e\u30c6\u30af\u30b9\u30c1\u30e35\u679a\u3068\u304b\u3082\u3055\u304f\u3063\u3068\u30ed\u30fc\u30c9\u3057\u3066\u304f\u308c\u307e\u3057\u305f\u3002\n\nSimple.js\n/******************** moc\u30d5\u30a1\u30a4\u30eb ********************/\nvar binarymoc = null;\n// moc\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u30dc\u30bf\u30f3\uff08\u975e\u8868\u793a\u3067\u30c0\u30df\u30fc\u30dc\u30bf\u30f3\u3067\u88c5\u98fe\uff09\nvar select_moc = document.getElementById('select_moc');\nselect_moc.addEventListener('change', mocSelect, false);\n// moc\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u540d\nvar dummy_moc_file = document.getElementById('dummy_moc_file');\n// moc\u30d5\u30a1\u30a4\u30eb\u306e\u30c9\u30ed\u30c3\u30d7\u9818\u57df\nvar drop_moc = document.getElementById('drop_moc');\ndrop_moc.addEventListener('drop', mocDrop);\ndrop_moc.addEventListener('dragover', mocDragOver);\ndrop_moc.addEventListener('dragleave', mocDragLeave);\n\n// dummy\u7528\u306emoc\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u30dc\u30bf\u30f3\u304b\u3089\u30a4\u30d9\u30f3\u30c8\u547c\u3073\u51fa\u3059\nfunction dummy_moc_click(){\n    select_moc.click();\n}\n// moc\u30d5\u30a1\u30a4\u30eb\u30c9\u30e9\u30c3\u30b0\u30aa\u30fc\u30d0\u30fc\u6642\nfunction mocDragOver(event){\n    drop_moc.style.backgroundColor = \"#C1C1C1\"; // hover\u8272\n    event.preventDefault();\n}\n// moc\u30d5\u30a1\u30a4\u30eb\u30c9\u30e9\u30c3\u30b0\u30ea\u30fc\u30d6\u6642\nfunction mocDragLeave(event){\n    drop_moc.style.backgroundColor = \"#efefef\"; // \u5143\u306e\u8272\n    event.preventDefault();    \n}\n// moc\u30d5\u30a1\u30a4\u30eb\u30c9\u30ed\u30c3\u30d7\u6642\nfunction mocDrop(evt){\n    // \u30c9\u30ed\u30c3\u30d7\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u60c5\u5831\n    var files = evt.dataTransfer.files;\n    moc_load(files);\n    evt.preventDefault();\n    drop_moc.style.backgroundColor = \"#efefef\"; // \u5143\u306e\u8272\n}\n// moc\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u6642\nfunction mocSelect(evt) {\n    // \u9078\u629e\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u60c5\u5831\n    var files = evt.target.files;\n    moc_load(files);\n}\n// moc\u30d5\u30a1\u30a4\u30eb\u30ed\u30fc\u30c9\u51e6\u7406\nfunction moc_load(files){\n    // \u521d\u671f\u5316\u51e6\u7406\n    binarymoc = null;\n    dummy_moc_file.value = \"\";\n    for (var i = 0, f; f = files[i]; i++) {\n        var reader = new FileReader();\n        // \u9078\u629e\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u30bb\u30c3\u30c8\n        dummy_moc_file.value = files[i].name;\n        reader.onload = (function(theFile) {\n            return function(e) {\n                // moc\u4e2d\u8eab\u3092\u30bb\u30c3\u30c8(Base64\u5f62\u5f0f)\n                binarymoc = e.target.result;\n            };\n        })(f);\n        // arrayBuffer\u5f62\u5f0f\n        reader.readAsArrayBuffer(f);\n    }    \n}\n\n/******************** texture\u30d5\u30a1\u30a4\u30eb ********************/\nvar binarytextures = [];\n// texture\u30d5\u30a1\u30a4\u30eb\u306e\u9078\u629e\u30dc\u30bf\u30f3\uff08\u975e\u8868\u793a\u3067\u30c0\u30df\u30fc\u30dc\u30bf\u30f3\u3067\u88c5\u98fe\uff09\nvar select_texture = document.getElementById('select_texture');\nselect_texture.addEventListener('change', TextureSelect, false);\n// texture\u30d5\u30a1\u30a4\u30eb\u306e\u30c9\u30ed\u30c3\u30d7\u9818\u57df\nvar drop_texture = document.getElementById('drop_texture');\ndrop_texture.addEventListener('drop', textureDrop);\ndrop_texture.addEventListener('dragover', textureDragOver);\ndrop_texture.addEventListener('dragleave', textureDragLeave);\n\n// texture\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u30dc\u30bf\u30f3\u304b\u3089\u30a4\u30d9\u30f3\u30c8\u547c\u3073\u51fa\u3059\nfunction dummy_texture_click(){\n    select_texture.click();\n}\n// texture\u30d5\u30a1\u30a4\u30eb\u30c9\u30e9\u30c3\u30b0\u30aa\u30fc\u30d0\u30fc\u6642\nfunction textureDragOver(event){\n    drop_texture.style.backgroundColor = \"#C1C1C1\"; // hover\u8272\n    event.preventDefault();\n}\n// texture\u30d5\u30a1\u30a4\u30eb\u30c9\u30e9\u30c3\u30b0\u30ea\u30fc\u30d6\u6642\nfunction textureDragLeave(event){\n    drop_texture.style.backgroundColor = \"#efefef\"; // \u5143\u306e\u8272\n    event.preventDefault();    \n}\n// texture\u30d5\u30a1\u30a4\u30eb\u30c9\u30ed\u30c3\u30d7\u6642\nfunction textureDrop(evt){\n    // \u30c9\u30ed\u30c3\u30d7\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u60c5\u5831\n    var files = evt.dataTransfer.files;\n    texture_load(files);\n    evt.preventDefault();\n    drop_texture.style.backgroundColor = \"#efefef\"; // \u5143\u306e\u8272\n}\n// texture\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u6642\nfunction TextureSelect(evt) {\n    // \u9078\u629e\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u60c5\u5831\n    var files = evt.target.files;\n    texture_load(files);\n}\n\n// texture\u30d5\u30a1\u30a4\u30eb\u30ed\u30fc\u30c9\u51e6\u7406\nfunction texture_load(files){\n    // \u914d\u5217\u3092\u30af\u30ea\u30a2\u3057\u3066\u304a\u304f\n    binarytextures = [];\n    // \u524d\u56de\u306e\u30b5\u30e0\u30cd\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b\n    var output = document.getElementById('texture_list');\n    while(output.firstChild){\n        output.removeChild(output.firstChild);\n    }\n\n    for (var i = 0, f; f = files[i]; i++) {\n        var reader = new FileReader();\n        // \u975e\u540c\u671f\u51e6\u7406\u306e\u305f\u3081\u3001\u30d5\u30a1\u30a4\u30eb\u756a\u53f7\u3092\u4fdd\u6301\u3057\u3066\u304a\u304f\n        reader.filenm = i;\n        reader.onload = (function(theFile) {\n            return function(e) {\n                // \u30ed\u30fc\u30c9\u3057\u305f\u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30b5\u30e0\u30cd\u30a4\u30eb\u8868\u793a\u3059\u308b\n                var span = document.createElement('span');\n                span.innerHTML = ['<img class=\"thumb\" src=\"', e.target.result,\n                                    '\" title=\"', escape(theFile.name), '\"/>'].join('');\n                document.getElementById('texture_list').insertBefore(span, null);\n                // \u5909\u6570\u306bBase64\u30a8\u30f3\u30b3\u30fc\u30c9\u5f62\u5f0f\u3067\u4fdd\u6301\n                binarytextures[e.target.filenm] = e.target.result;\n            };\n        })(f);\n        // \u753b\u50cf\u306f\u3053\u3061\u3089\u3092\u3064\u304b\u3046\n        reader.readAsDataURL(f);\n    }    \n}\n\n/******************** motion\u30d5\u30a1\u30a4\u30eb ********************/\nvar binarymotion = null;\n// motion\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u30dc\u30bf\u30f3\uff08\u975e\u8868\u793a\u3067\u30c0\u30df\u30fc\u30dc\u30bf\u30f3\u3067\u88c5\u98fe\uff09\nvar select_motion = document.getElementById('select_motion');\nselect_motion.addEventListener('change', motionSelect, false);\n// motion\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u540d\nvar dummy_motion_file = document.getElementById('dummy_motion_file');\n// motion\u30d5\u30a1\u30a4\u30eb\u306e\u30c9\u30ed\u30c3\u30d7\u9818\u57df\nvar drop_motion = document.getElementById('drop_motion');\ndrop_motion.addEventListener('drop', motionDrop);\ndrop_motion.addEventListener('dragover', motionDragOver);\ndrop_motion.addEventListener('dragleave', motionDragLeave);\n\n// dummy\u7528\u306emotion\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u30dc\u30bf\u30f3\u304b\u3089\u30a4\u30d9\u30f3\u30c8\u547c\u3073\u51fa\u3059\nfunction dummy_motion_click(){\n    select_motion.click();\n}\n// motion\u30d5\u30a1\u30a4\u30eb\u30c9\u30e9\u30c3\u30b0\u30aa\u30fc\u30d0\u30fc\u6642\nfunction motionDragOver(event){\n    drop_motion.style.backgroundColor = \"#C1C1C1\"; // hover\u8272\n    event.preventDefault();\n}\n// motion\u30d5\u30a1\u30a4\u30eb\u30c9\u30e9\u30c3\u30b0\u30ea\u30fc\u30d6\u6642\nfunction motionDragLeave(event){\n    drop_motion.style.backgroundColor = \"#efefef\"; // \u5143\u306e\u8272\n    event.preventDefault();    \n}\n// motion\u30d5\u30a1\u30a4\u30eb\u30c9\u30ed\u30c3\u30d7\u6642\nfunction motionDrop(evt){\n    // \u30c9\u30ed\u30c3\u30d7\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u60c5\u5831\n    var files = evt.dataTransfer.files;\n    motion_load(files);\n    evt.preventDefault();\n    drop_motion.style.backgroundColor = \"#efefef\"; // \u5143\u306e\u8272\n}\n// motion\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u6642\nfunction motionSelect(evt) {\n    // \u9078\u629e\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u60c5\u5831\n    var files = evt.target.files;\n    motion_load(files);\n}\n// motion\u30d5\u30a1\u30a4\u30eb\u30ed\u30fc\u30c9\u51e6\u7406\nfunction motion_load(files){\n    // \u521d\u671f\u5316\u51e6\u7406\n    binarymotion = null;\n    dummy_motion_file.value = \"\";\n    for (var i = 0, f; f = files[i]; i++) {\n        var reader = new FileReader();\n        // \u9078\u629e\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u30bb\u30c3\u30c8\n        dummy_motion_file.value = files[i].name;\n        reader.onload = (function(theFile) {\n            return function(e) {\n                // motion\u4e2d\u8eab\u3092\u30bb\u30c3\u30c8(Base64\u5f62\u5f0f)\n                binarymotion = e.target.result;\n                Simple();\n            };\n        })(f);\n        // arrayBuffer\u5f62\u5f0f\n        reader.readAsArrayBuffer(f);\n    }    \n}\n\n\n// JavaScript\u3067\u767a\u751f\u3057\u305f\u30a8\u30e9\u30fc\u3092\u53d6\u5f97\nwindow.onerror = function(msg, url, line, col, error) {\n    var errmsg = \"file:\" + url + \"<br>line:\" + line + \" \" + msg;\n    Simple.myerror(errmsg);\n}\n\nvar Simple = function() {\n\n    /*\n    * Live2D\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n    */\n    this.live2DModel = null;\n\n    /*\n    * \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u505c\u6b62\u3059\u308b\u305f\u3081\u306eID\n    */\n    this.requestID = null;\n\n    /*\n    * \u30e2\u30c7\u30eb\u306e\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u305f\u3089 true\n    */\n    this.loadLive2DCompleted = false;\n\n    /*\n    * \u30e2\u30c7\u30eb\u306e\u521d\u671f\u5316\u304c\u5b8c\u4e86\u3057\u305f\u3089 true\n    */\n    this.initLive2DCompleted = false;\n\n    /*\n    * WebGL Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u914d\u5217\n    */\n    this.loadedImages = [];\n    /*\n    * Live2D \u30e2\u30c7\u30eb\u8a2d\u5b9a\u3002\n    */\n//    this.modelDef = {\n//        \n//        \"type\":\"Live2D Model Setting\",\n//        \"name\":\"haru\",\n//        \"model\":\"assets/haru/haru.moc\",\n//        \"textures\":[\n//            \"assets/haru/haru.1024/texture_00.png\",\n//            \"assets/haru/haru.1024/texture_01.png\",\n//            \"assets/haru/haru.1024/texture_02.png\"\n//        ]\n//    };\n    this.motion = null;     // \u30e2\u30fc\u30b7\u30e7\u30f3\n    this.motionMgr = null;  // \u30e2\u30fc\u30b7\u30e7\u30f3\u30de\u30cd\u30b8\u30e3\u30fc\n\n    // Live2D\u306e\u521d\u671f\u5316\n    Live2D.init();\n\n\n    // canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\n    var canvas = document.getElementById(\"glcanvas\");\n\n    // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u5931\u3063\u305f\u3068\u304d\n\n    canvas.addEventListener(\"webglcontextlost\", function(e) {\n        Simple.myerror(\"context lost\");\n        loadLive2DCompleted = false;\n        initLive2DCompleted = false;\n\n        var cancelAnimationFrame = \n            window.cancelAnimationFrame || \n            window.mozCancelAnimationFrame;\n        cancelAnimationFrame(requestID); //\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u505c\u6b62\n\n        e.preventDefault(); \n    }, false);\n\n    // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u304c\u5fa9\u5143\u3055\u308c\u305f\u3068\u304d\n    canvas.addEventListener(\"webglcontextrestored\" , function(e){\n        Simple.myerror(\"webglcontext restored\");\n        Simple.initLoop(canvas); \n    }, false);\n\n    // Init and start Loop\n    Simple.initLoop(canvas);\n};\n\n\n/*\n* WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u30fb\u521d\u671f\u5316\u3002\n* Live2D\u306e\u521d\u671f\u5316\u3001\u63cf\u753b\u30eb\u30fc\u30d7\u3092\u958b\u59cb\u3002\n*/\nSimple.initLoop = function(canvas/*HTML5 canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8*/) \n{\n    //------------ WebGL\u306e\u521d\u671f\u5316 ------------\n\n    // WebGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n    var para = {\n        premultipliedAlpha : true,\n//        alpha : false\n    };\n    var gl = Simple.getWebGLContext(canvas, para);\n    if (!gl) {\n        Simple.myerror(\"Failed to create WebGL context.\");\n        return;\n    }\n\n    // \u63cf\u753b\u30a8\u30ea\u30a2\u3092\u767d\u3067\u30af\u30ea\u30a2\n    gl.clearColor( 0.0 , 0.0 , 0.0 , 0.0 );  \n\n    //------------ Live2D\u306e\u521d\u671f\u5316 ------------\n\n    // moc\u30d5\u30a1\u30a4\u30eb\u304b\u3089Live2D\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\n//  Simple.loadBytes(modelDef.model, function(buf){\n//      live2DModel = Live2DModelWebGL.loadModel(buf);\n//  });\n        live2DModel = Live2DModelWebGL.loadModel(binarymoc);\n\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u8aad\u307f\u8fbc\u307f\n    var loadCount = 0;\n//  for(var i = 0; i < modelDef.textures.length; i++){\n    for(var i = 0; i < binarytextures.length; i++){\n        (function ( tno ){// \u5373\u6642\u95a2\u6570\u3067 i \u306e\u5024\u3092 tno \u306b\u56fa\u5b9a\u3059\u308b\uff08onerror\u7528)\n            loadedImages[tno] = new Image();\n//          loadedImages[tno].src = modelDef.textures[tno];\n            loadedImages[tno].src = binarytextures[i];\n            loadedImages[tno].onload = function(){\n//              if((++loadCount) == modelDef.textures.length) {\n                if((++loadCount) == binarytextures.length) {\n                    loadLive2DCompleted = true;//\u5168\u3066\u8aad\u307f\u7d42\u308f\u3063\u305f\n                }\n            }\n//          loadedImages[tno].onerror = function() { \n//              Simple.myerror(\"Failed to load image : \" + modelDef.textures[tno]); \n//          }\n        })( i );\n    }\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u30ed\u30fc\u30c9\n        motion = new Live2DMotion.loadMotion(binarymotion);\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30de\u30cd\u30fc\u30b8\u30e3\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\n        motionMgr = new L2DMotionManager();\n\n    //------------ \u63cf\u753b\u30eb\u30fc\u30d7 ------------\n\n    (function tick() {\n        Simple.draw(gl); // 1\u56de\u5206\u63cf\u753b\n\n        var requestAnimationFrame = \n            window.requestAnimationFrame || \n            window.mozRequestAnimationFrame ||\n            window.webkitRequestAnimationFrame || \n            window.msRequestAnimationFrame;\n        requestID = requestAnimationFrame( tick , canvas );// \u4e00\u5b9a\u6642\u9593\u5f8c\u306b\u81ea\u8eab\u3092\u547c\u3073\u51fa\u3059\n    })();\n};\n\n\nSimple.draw = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/)\n{\n    // Canvas\u3092\u30af\u30ea\u30a2\u3059\u308b\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // Live2D\u521d\u671f\u5316\n    if( ! live2DModel || ! loadLive2DCompleted ) \n    return; //\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u4f55\u3082\u3057\u306a\u3044\u3067\u8fd4\u308b\n\n    // \u30ed\u30fc\u30c9\u5b8c\u4e86\u5f8c\u306b\u521d\u56de\u306e\u307f\u521d\u671f\u5316\u3059\u308b\n    if( ! initLive2DCompleted ){\n            initLive2DCompleted = true;\n\n        // \u753b\u50cf\u304b\u3089WebGL\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\u3057\u3001\u30e2\u30c7\u30eb\u306b\u767b\u9332\n        for( var i = 0; i < loadedImages.length; i++ ){\n            //Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n            var texName = Simple.createTexture(gl, loadedImages[i]);\n\n            live2DModel.setTexture(i, texName); //\u30e2\u30c7\u30eb\u306b\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u30bb\u30c3\u30c8\n        }\n\n        // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u5143\u753b\u50cf\u306e\u53c2\u7167\u3092\u30af\u30ea\u30a2\n        loadedImages = null;\n\n        // OpenGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u30bb\u30c3\u30c8\n        live2DModel.setGL(gl);\n\n        // \u8868\u793a\u4f4d\u7f6e\u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306e\u884c\u5217\u3092\u5b9a\u7fa9\u3059\u308b\n        var s = 2.0 / live2DModel.getCanvasWidth(); //canvas\u306e\u6a2a\u5e45\u3092-1..1\u533a\u9593\u306b\u53ce\u3081\u308b\n        var matrix4x4 = [ s,0,0,0 , 0,-s,0,0 , 0,0,1,0 , -1.0,1,0,1 ];\n        live2DModel.setMatrix(matrix4x4);\n    }\n\n    // \u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u9069\u5f53\u306b\u66f4\u65b0\n//    var t = UtSystem.getTimeMSec() * 0.001 * 2 * Math.PI; //1\u79d2\u3054\u3068\u306b2\u03c0(1\u5468\u671f)\u5897\u3048\u308b\n//    var cycle = 3.0; //\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u4e00\u5468\u3059\u308b\u6642\u9593(\u79d2)\n    // PARAM_ANGLE_X\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c[cycle]\u79d2\u3054\u3068\u306b-30\u304b\u308930\u307e\u3067\u5909\u5316\u3059\u308b\n//    live2DModel.setParamFloat(\"PARAM_ANGLE_X\", 30 * Math.sin(t/cycle));\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u4e86\u3057\u3066\u3044\u305f\u3089\u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u518d\u751f\n    if(motionMgr.isFinished()){\n        motionMgr.startMotion(motion);\n    }\n    motionMgr.updateParam(live2DModel);\n\n    // Live2D\u30e2\u30c7\u30eb\u3092\u66f4\u65b0\u3057\u3066\u63cf\u753b\n    live2DModel.update(); // \u73fe\u5728\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5408\u308f\u305b\u3066\u9802\u70b9\u7b49\u3092\u8a08\u7b97\n    live2DModel.draw(); // \u63cf\u753b\n};\n\n\n/*\n* WebGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n*/\nSimple.getWebGLContext = function(canvas/*HTML5 canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8*/)\n{\n    var NAMES = [ \"webgl\" , \"experimental-webgl\" , \"webkit-3d\" , \"moz-webgl\"];\n\n    var param = {\n        alpha : true,\n        premultipliedAlpha : true\n    };\n\n    for( var i = 0; i < NAMES.length; i++ ){\n        try{\n            var ctx = canvas.getContext( NAMES[i], param );\n            if( ctx ) return ctx;\n        } \n        catch(e){}\n    }\n    return null;\n};\n\n\n/*\n* Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n*/\nSimple.createTexture = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/, image/*WebGL Image*/) \n{\n    var texture = gl.createTexture(); //\u30c6\u30af\u30b9\u30c1\u30e3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\n    if ( !texture ){\n        mylog(\"Failed to generate gl texture name.\");\n        return -1;\n    }\n\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);  //image\u3092\u4e0a\u4e0b\u53cd\u8ee2\n    gl.activeTexture( gl.TEXTURE0 );\n    gl.bindTexture( gl.TEXTURE_2D , texture );\n    gl.texImage2D( gl.TEXTURE_2D , 0 , gl.RGBA , gl.RGBA , gl.UNSIGNED_BYTE , image);    \n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);        \n    gl.generateMipmap(gl.TEXTURE_2D);\n    gl.bindTexture( gl.TEXTURE_2D , null );\n\n    return texture;\n};\n\n\n/*\n* \u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30a4\u30c8\u914d\u5217\u3068\u3057\u3066\u30ed\u30fc\u30c9\u3059\u308b\n*/\nSimple.loadBytes = function(path , callback)\n{\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", path , true);\n    request.responseType = \"arraybuffer\";\n    request.onload = function(){\n        switch( request.status ){\n        case 200:\n            callback( request.response );\n            break;\n        default:\n            Simple.myerror( \"Failed to load (\" + request.status + \") : \" + path );\n            break;\n        }\n    }\n\n    request.send(null); \n};\n\n\n/*\n* \u753b\u9762\u30ed\u30b0\u3092\u51fa\u529b\n*/\nSimple.mylog = function(msg/*string*/)\n{\n    var myconsole = document.getElementById(\"myconsole\");\n    myconsole.innerHTML = myconsole.innerHTML + \"<br>\" + msg;\n    console.log(msg);\n};\n\n/*\n* \u753b\u9762\u30a8\u30e9\u30fc\u3092\u51fa\u529b\n*/\nSimple.myerror = function(msg/*string*/)\n{\n    console.error(msg);\n    Simple.mylog( \"<span style='color:red'>\" + msg + \"</span>\");\n};\n\n\n\n\u8ab2\u984c\n\u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30ed\u30fc\u30c9\u306f\u30010\u756a\u304b\u3089\u6b63\u3057\u304f\u9806\u756a\u306b\u8aad\u307f\u8fbc\u307e\u308c\u306a\u3044\u3068\u8868\u793a\u304c\u5d29\u308c\u307e\u3059\u3002\n\u3042\u3068\u3001Live2DViewer\u3060\u3068moc\u3084mtn\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u66f8\u3044\u305fmodel.json1\u3064\u30ed\u30fc\u30c9\u3059\u308b\u3060\u3051\u3067\u30e2\u30c7\u30eb\u304c\u8868\u793a\u3067\u304d\u307e\u3059\u3002\nHTML5\u3060\u3068\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u76f4\u63a5\u9078\u629e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067model.json\u304b\u3089\u30ed\u30fc\u30c9\u306f\u3067\u304d\u306a\u3044\u2026\u3002\n\uff08\u7d50\u5c40\u306fphp\u3067\u30d5\u30a1\u30a4\u30eb\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u305b\u308b\u65b9\u304c\u3044\u3044\u304b\u3082\uff09\n\u305f\u3060\u3001Live2D\u3068WebGL\u3067\u4f5c\u3063\u305f\u30dd\u30b9\u30c8\u30a8\u30d5\u30a7\u30af\u30c8\u306a\u3069\u306f\u30e6\u30fc\u30b6\u304c\u4f5c\u3063\u305f\u30e2\u30c7\u30eb\u3067\u8a66\u305b\u308b\u30b5\u30a4\u30c8\u304c\u4f5c\u308c\u308b\u306e\u3067\u3001\u4f55\u304b\u9762\u767d\u3044\u3082\u306e\u4f5c\u3063\u305f\u3089\u3053\u308c\u3067\u516c\u958b\u3057\u3066\u3044\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\nLive2D SDK WebGL\u7248\u3067\u7c21\u6613Live2DViewer\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\nLive2D\u30e2\u30c7\u30eb\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30b5\u30fc\u30d0\u30fc\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u305b\u305f\u304f\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u5168\u3066HTML5\u306e\u6a5f\u80fd\u3067\u5b9f\u88c5\u3057\u3066\u307e\u3059\u3002\n\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u3068\u30d5\u30a1\u30a4\u30eb\u306e\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\n\uff08\u30c6\u30af\u30b9\u30c1\u30e3\u306f\u8907\u6570\u9078\u629e\u3057\u3066\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3057\u3066\u4e0b\u3055\u3044\uff09\n\n\u30fb[\u7c21\u6613Live2DViewer](http://simplecode.jp/Live2D_DragDrop/)\n![schreenshot.png](https://qiita-image-store.s3.amazonaws.com/0/15028/b9f2c140-66a4-eae4-9d48-a39c5054c401.png)\n\n# \u30d5\u30a9\u30eb\u30c0\u69cb\u6210\nLive2D SDK\u306eSimple\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u5143\u306b\u30ab\u30b9\u30bf\u30e0\u3057\u3066\u3044\u307e\u3059\u3002\n\n```ini\nLive2D_DragDrop\n\u2502\n\u2502  index.html\n\u2502\n\u251c\u2500framework\n\u2502    Live2DFramework.js\u30fb\u30fb\u30fbSDK\u4ed8\u5c5e\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n\u2502    \n\u251c\u2500lib\n\u2502    live2d.min.js\u30fb\u30fb\u30fbLive2D\u306e\u30b3\u30a2\u30e9\u30a4\u30d6\u30e9\u30ea\n\u2502    \n\u2514\u2500src\n      Simple.js\n```\n\n# \u30bd\u30fc\u30b9\n\u65e2\u5b58\u306e\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u30dc\u30bf\u30f3\u3060\u3068\u30c0\u30b5\u3044\u306e\u3067\u3001\u30c0\u30df\u30fc\u30dc\u30bf\u30f3\u3092\u8868\u793a\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u51e6\u7406\u3092\u547c\u3093\u3067\u3044\u307e\u3059\n\n```html:index.html\n<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset=\"UTF-8\">\n            <title>Live2D Simple</title>\n        </meta>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=4.0\">\n        </meta>\n    <style>\n        /* \u9078\u629e\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u30b5\u30e0\u30cd\u30a4\u30eb\u8868\u793a */\n      .thumb {\n        height: 75px;\n        border: 1px solid #000;\n        margin: 10px 5px 0 0;\n      }\n      .drop_area{\n          border:dashed 2px #ccc;\n          width:512px;\n          height:80px;\n          margin:4px;\n          background-color:#efefef;\n      }\n      .moc_area, .texture_area, .motion_area{\n          padding-top:10px;\n          font-size: 18px;\n          color:blue;\n          text-align: center;\n      }\n      #select_moc, #select_texture, #select_motion{\n          display:none;\n      }\n      #dummy_moc_btn, #dummy_texture_btn, #dummy_motion_btn{\n          margin-top:10px;\n          margin-left:150px;\n          font-size: 12px;\n          text-decoration: none;\n          color:#fff;\n          background-color: #49a9d4;\n          border:none;\n          border-radius: 5px;\n          padding:2px 16px 2px 16px;\n      }\n      #dummy_moc_file, #dummy_motion_file{\n          width:200px;\n          height: 20px;\n          font-size: 14px;\n          border:none;\n          background-color: #e6e6e6;\n      }\n      #displaybtn{\n          width: 160px;\n          height:40px;\n          margin-left:4px;\n          margin-bottom:4px;\n          font-size:20px;\n          font-weight: bold;\n          color:#fff;\n          background-color: #49a9d4;\n          border:none;\n          border-radius: 5px;\n          padding:2px 16px 2px 16px;\n          box-shadow:2px 2px #1a6ea0;\n          text-shadow:1px 1px #555;\n      }\n      #displaybtn:hover{\n          color:#fff;\n          background-color: #0F7DAE;\n          box-shadow: 2px 2px #073E5F;\n      }\n      .live2d_area{\n          position: absolute;\n          top:4px;\n          left:528px;\n      }\n      #glcanvas{\n          border:dashed 2px #CCC;\n          margin:4px;\n      }\n    </style>\n    </head>\n    <body>\n        <!-- moc\u30d5\u30a1\u30a4\u30eb -->\n        <div class=\"drop_area\" id=\"drop_moc\">\n            <div class=\"moc_area\">moc\u3092\u30c9\u30ed\u30c3\u30d7</div>        \n            <input type=\"file\" id=\"select_moc\" name=\"files\" />\n            <button id=\"dummy_moc_btn\" onclick=\"dummy_moc_click()\">moc\u30d5\u30a1\u30a4\u30eb\u9078\u629e</button>\n            <input type=\"text\" id=\"dummy_moc_file\" readonly>\n        </div>\n        <!-- texture\u30d5\u30a1\u30a4\u30eb -->\n        <div class=\"drop_area\" id=\"drop_texture\">\n            <div class=\"texture_area\">texuture\u3092\u30c9\u30ed\u30c3\u30d7</div>        \n            <input type=\"file\" id=\"select_texture\" name=\"files[]\" multiple />            \n            <button id=\"dummy_texture_btn\" onclick=\"dummy_texture_click()\">texture\u30d5\u30a1\u30a4\u30eb\u9078\u629e</button>\n        </div>\n        <!-- \u9078\u629e\u3057\u305f\u3057\u305f\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u8868\u793a\u3059\u308b\u90e8\u5206 -->\n        <output id=\"texture_list\"></output>\n        <br>\n        <!-- motion\u30d5\u30a1\u30a4\u30eb -->\n        <div class=\"drop_area\" id=\"drop_motion\">\n            <div class=\"motion_area\">motion\u3092\u30c9\u30ed\u30c3\u30d7</div>        \n            <input type=\"file\" id=\"select_motion\" name=\"files\" />\n            <button id=\"dummy_motion_btn\" onclick=\"dummy_motion_click()\">motion\u30d5\u30a1\u30a4\u30eb\u9078\u629e</button>\n            <input type=\"text\" id=\"dummy_motion_file\" readonly>\n        </div>\n        <!-- \u30e2\u30c7\u30eb\u8868\u793a\u30dc\u30bf\u30f3 -->\n        <button id=\"displaybtn\" onclick=\"Simple()\">\u30e2\u30c7\u30eb\u8868\u793a</button>\n        <div class=\"live2d_area\">\n            <!-- Live2D\u30e2\u30c7\u30eb -->\n            <canvas id=\"glcanvas\" width = \"512px\" height=\"512px\"></canvas>\n            <div id=\"myconsole\" style=\"color:#BBB\">---- Log ----</div>                    \n        </div>\n        <!-- Live2D Library -->\n        <script src=\"lib/live2d.min.js\"></script>        \n        <script src=\"framework/Live2DFramework.js\"></script>\n        <!-- User's Script -->\n        <script src=\"src/Simple.js\"></script>\n    </body>\n</html>\n```\n\n\u5143\u3005\u306fLive2D\u30e2\u30c7\u30eb\u30d5\u30a1\u30a4\u30eb(.moc\u3001.mtn\uff09\u306fXMLHttpRequest\u306earraybuffer\u5f62\u5f0f\u3067\u30ed\u30fc\u30c9\u3057\u3066\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306f\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u5f62\u5f0f\u306a\u306e\u3067\u3001FileReader\u3067Base64\u5f62\u5f0f\u306b\u3057\u3066\u30ed\u30fc\u30c9\u3057\u3066\u307e\u3059\u3002\nBase64\u306f\u5c0f\u3055\u3044\u753b\u50cf\u306e\u307f\u6709\u52b9\u304b\u3068\u601d\u3063\u305f\u3089\u30011024px x 1024px\u306e\u30c6\u30af\u30b9\u30c1\u30e35\u679a\u3068\u304b\u3082\u3055\u304f\u3063\u3068\u30ed\u30fc\u30c9\u3057\u3066\u304f\u308c\u307e\u3057\u305f\u3002\n\n```js:Simple.js\n/******************** moc\u30d5\u30a1\u30a4\u30eb ********************/\nvar binarymoc = null;\n// moc\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u30dc\u30bf\u30f3\uff08\u975e\u8868\u793a\u3067\u30c0\u30df\u30fc\u30dc\u30bf\u30f3\u3067\u88c5\u98fe\uff09\nvar select_moc = document.getElementById('select_moc');\nselect_moc.addEventListener('change', mocSelect, false);\n// moc\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u540d\nvar dummy_moc_file = document.getElementById('dummy_moc_file');\n// moc\u30d5\u30a1\u30a4\u30eb\u306e\u30c9\u30ed\u30c3\u30d7\u9818\u57df\nvar drop_moc = document.getElementById('drop_moc');\ndrop_moc.addEventListener('drop', mocDrop);\ndrop_moc.addEventListener('dragover', mocDragOver);\ndrop_moc.addEventListener('dragleave', mocDragLeave);\n\n// dummy\u7528\u306emoc\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u30dc\u30bf\u30f3\u304b\u3089\u30a4\u30d9\u30f3\u30c8\u547c\u3073\u51fa\u3059\nfunction dummy_moc_click(){\n    select_moc.click();\n}\n// moc\u30d5\u30a1\u30a4\u30eb\u30c9\u30e9\u30c3\u30b0\u30aa\u30fc\u30d0\u30fc\u6642\nfunction mocDragOver(event){\n    drop_moc.style.backgroundColor = \"#C1C1C1\"; // hover\u8272\n    event.preventDefault();\n}\n// moc\u30d5\u30a1\u30a4\u30eb\u30c9\u30e9\u30c3\u30b0\u30ea\u30fc\u30d6\u6642\nfunction mocDragLeave(event){\n    drop_moc.style.backgroundColor = \"#efefef\"; // \u5143\u306e\u8272\n    event.preventDefault();    \n}\n// moc\u30d5\u30a1\u30a4\u30eb\u30c9\u30ed\u30c3\u30d7\u6642\nfunction mocDrop(evt){\n    // \u30c9\u30ed\u30c3\u30d7\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u60c5\u5831\n    var files = evt.dataTransfer.files;\n    moc_load(files);\n    evt.preventDefault();\n    drop_moc.style.backgroundColor = \"#efefef\"; // \u5143\u306e\u8272\n}\n// moc\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u6642\nfunction mocSelect(evt) {\n    // \u9078\u629e\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u60c5\u5831\n    var files = evt.target.files;\n    moc_load(files);\n}\n// moc\u30d5\u30a1\u30a4\u30eb\u30ed\u30fc\u30c9\u51e6\u7406\nfunction moc_load(files){\n    // \u521d\u671f\u5316\u51e6\u7406\n    binarymoc = null;\n    dummy_moc_file.value = \"\";\n    for (var i = 0, f; f = files[i]; i++) {\n        var reader = new FileReader();\n        // \u9078\u629e\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u30bb\u30c3\u30c8\n        dummy_moc_file.value = files[i].name;\n        reader.onload = (function(theFile) {\n            return function(e) {\n                // moc\u4e2d\u8eab\u3092\u30bb\u30c3\u30c8(Base64\u5f62\u5f0f)\n                binarymoc = e.target.result;\n            };\n        })(f);\n        // arrayBuffer\u5f62\u5f0f\n        reader.readAsArrayBuffer(f);\n    }    \n}\n\n/******************** texture\u30d5\u30a1\u30a4\u30eb ********************/\nvar binarytextures = [];\n// texture\u30d5\u30a1\u30a4\u30eb\u306e\u9078\u629e\u30dc\u30bf\u30f3\uff08\u975e\u8868\u793a\u3067\u30c0\u30df\u30fc\u30dc\u30bf\u30f3\u3067\u88c5\u98fe\uff09\nvar select_texture = document.getElementById('select_texture');\nselect_texture.addEventListener('change', TextureSelect, false);\n// texture\u30d5\u30a1\u30a4\u30eb\u306e\u30c9\u30ed\u30c3\u30d7\u9818\u57df\nvar drop_texture = document.getElementById('drop_texture');\ndrop_texture.addEventListener('drop', textureDrop);\ndrop_texture.addEventListener('dragover', textureDragOver);\ndrop_texture.addEventListener('dragleave', textureDragLeave);\n\n// texture\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u30dc\u30bf\u30f3\u304b\u3089\u30a4\u30d9\u30f3\u30c8\u547c\u3073\u51fa\u3059\nfunction dummy_texture_click(){\n    select_texture.click();\n}\n// texture\u30d5\u30a1\u30a4\u30eb\u30c9\u30e9\u30c3\u30b0\u30aa\u30fc\u30d0\u30fc\u6642\nfunction textureDragOver(event){\n    drop_texture.style.backgroundColor = \"#C1C1C1\"; // hover\u8272\n    event.preventDefault();\n}\n// texture\u30d5\u30a1\u30a4\u30eb\u30c9\u30e9\u30c3\u30b0\u30ea\u30fc\u30d6\u6642\nfunction textureDragLeave(event){\n    drop_texture.style.backgroundColor = \"#efefef\"; // \u5143\u306e\u8272\n    event.preventDefault();    \n}\n// texture\u30d5\u30a1\u30a4\u30eb\u30c9\u30ed\u30c3\u30d7\u6642\nfunction textureDrop(evt){\n    // \u30c9\u30ed\u30c3\u30d7\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u60c5\u5831\n    var files = evt.dataTransfer.files;\n    texture_load(files);\n    evt.preventDefault();\n    drop_texture.style.backgroundColor = \"#efefef\"; // \u5143\u306e\u8272\n}\n// texture\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u6642\nfunction TextureSelect(evt) {\n    // \u9078\u629e\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u60c5\u5831\n    var files = evt.target.files;\n    texture_load(files);\n}\n\n// texture\u30d5\u30a1\u30a4\u30eb\u30ed\u30fc\u30c9\u51e6\u7406\nfunction texture_load(files){\n    // \u914d\u5217\u3092\u30af\u30ea\u30a2\u3057\u3066\u304a\u304f\n    binarytextures = [];\n    // \u524d\u56de\u306e\u30b5\u30e0\u30cd\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b\n    var output = document.getElementById('texture_list');\n    while(output.firstChild){\n        output.removeChild(output.firstChild);\n    }\n\n    for (var i = 0, f; f = files[i]; i++) {\n        var reader = new FileReader();\n        // \u975e\u540c\u671f\u51e6\u7406\u306e\u305f\u3081\u3001\u30d5\u30a1\u30a4\u30eb\u756a\u53f7\u3092\u4fdd\u6301\u3057\u3066\u304a\u304f\n        reader.filenm = i;\n        reader.onload = (function(theFile) {\n            return function(e) {\n                // \u30ed\u30fc\u30c9\u3057\u305f\u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30b5\u30e0\u30cd\u30a4\u30eb\u8868\u793a\u3059\u308b\n                var span = document.createElement('span');\n                span.innerHTML = ['<img class=\"thumb\" src=\"', e.target.result,\n                                    '\" title=\"', escape(theFile.name), '\"/>'].join('');\n                document.getElementById('texture_list').insertBefore(span, null);\n                // \u5909\u6570\u306bBase64\u30a8\u30f3\u30b3\u30fc\u30c9\u5f62\u5f0f\u3067\u4fdd\u6301\n                binarytextures[e.target.filenm] = e.target.result;\n            };\n        })(f);\n        // \u753b\u50cf\u306f\u3053\u3061\u3089\u3092\u3064\u304b\u3046\n        reader.readAsDataURL(f);\n    }    \n}\n\n/******************** motion\u30d5\u30a1\u30a4\u30eb ********************/\nvar binarymotion = null;\n// motion\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u30dc\u30bf\u30f3\uff08\u975e\u8868\u793a\u3067\u30c0\u30df\u30fc\u30dc\u30bf\u30f3\u3067\u88c5\u98fe\uff09\nvar select_motion = document.getElementById('select_motion');\nselect_motion.addEventListener('change', motionSelect, false);\n// motion\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u540d\nvar dummy_motion_file = document.getElementById('dummy_motion_file');\n// motion\u30d5\u30a1\u30a4\u30eb\u306e\u30c9\u30ed\u30c3\u30d7\u9818\u57df\nvar drop_motion = document.getElementById('drop_motion');\ndrop_motion.addEventListener('drop', motionDrop);\ndrop_motion.addEventListener('dragover', motionDragOver);\ndrop_motion.addEventListener('dragleave', motionDragLeave);\n\n// dummy\u7528\u306emotion\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u30dc\u30bf\u30f3\u304b\u3089\u30a4\u30d9\u30f3\u30c8\u547c\u3073\u51fa\u3059\nfunction dummy_motion_click(){\n    select_motion.click();\n}\n// motion\u30d5\u30a1\u30a4\u30eb\u30c9\u30e9\u30c3\u30b0\u30aa\u30fc\u30d0\u30fc\u6642\nfunction motionDragOver(event){\n    drop_motion.style.backgroundColor = \"#C1C1C1\"; // hover\u8272\n    event.preventDefault();\n}\n// motion\u30d5\u30a1\u30a4\u30eb\u30c9\u30e9\u30c3\u30b0\u30ea\u30fc\u30d6\u6642\nfunction motionDragLeave(event){\n    drop_motion.style.backgroundColor = \"#efefef\"; // \u5143\u306e\u8272\n    event.preventDefault();    \n}\n// motion\u30d5\u30a1\u30a4\u30eb\u30c9\u30ed\u30c3\u30d7\u6642\nfunction motionDrop(evt){\n    // \u30c9\u30ed\u30c3\u30d7\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u60c5\u5831\n    var files = evt.dataTransfer.files;\n    motion_load(files);\n    evt.preventDefault();\n    drop_motion.style.backgroundColor = \"#efefef\"; // \u5143\u306e\u8272\n}\n// motion\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u6642\nfunction motionSelect(evt) {\n    // \u9078\u629e\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u60c5\u5831\n    var files = evt.target.files;\n    motion_load(files);\n}\n// motion\u30d5\u30a1\u30a4\u30eb\u30ed\u30fc\u30c9\u51e6\u7406\nfunction motion_load(files){\n    // \u521d\u671f\u5316\u51e6\u7406\n    binarymotion = null;\n    dummy_motion_file.value = \"\";\n    for (var i = 0, f; f = files[i]; i++) {\n        var reader = new FileReader();\n        // \u9078\u629e\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u30bb\u30c3\u30c8\n        dummy_motion_file.value = files[i].name;\n        reader.onload = (function(theFile) {\n            return function(e) {\n                // motion\u4e2d\u8eab\u3092\u30bb\u30c3\u30c8(Base64\u5f62\u5f0f)\n                binarymotion = e.target.result;\n                Simple();\n            };\n        })(f);\n        // arrayBuffer\u5f62\u5f0f\n        reader.readAsArrayBuffer(f);\n    }    \n}\n\n\n// JavaScript\u3067\u767a\u751f\u3057\u305f\u30a8\u30e9\u30fc\u3092\u53d6\u5f97\nwindow.onerror = function(msg, url, line, col, error) {\n    var errmsg = \"file:\" + url + \"<br>line:\" + line + \" \" + msg;\n    Simple.myerror(errmsg);\n}\n\nvar Simple = function() {\n\n    /*\n    * Live2D\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n    */\n    this.live2DModel = null;\n    \n    /*\n    * \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u505c\u6b62\u3059\u308b\u305f\u3081\u306eID\n    */\n    this.requestID = null;\n    \n    /*\n    * \u30e2\u30c7\u30eb\u306e\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u305f\u3089 true\n    */\n    this.loadLive2DCompleted = false;\n    \n    /*\n    * \u30e2\u30c7\u30eb\u306e\u521d\u671f\u5316\u304c\u5b8c\u4e86\u3057\u305f\u3089 true\n    */\n    this.initLive2DCompleted = false;\n    \n    /*\n    * WebGL Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u914d\u5217\n    */\n    this.loadedImages = [];\n    /*\n    * Live2D \u30e2\u30c7\u30eb\u8a2d\u5b9a\u3002\n    */\n//    this.modelDef = {\n//        \n//        \"type\":\"Live2D Model Setting\",\n//        \"name\":\"haru\",\n//        \"model\":\"assets/haru/haru.moc\",\n//        \"textures\":[\n//            \"assets/haru/haru.1024/texture_00.png\",\n//            \"assets/haru/haru.1024/texture_01.png\",\n//            \"assets/haru/haru.1024/texture_02.png\"\n//        ]\n//    };\n    this.motion = null;     // \u30e2\u30fc\u30b7\u30e7\u30f3\n    this.motionMgr = null;  // \u30e2\u30fc\u30b7\u30e7\u30f3\u30de\u30cd\u30b8\u30e3\u30fc\n    \n    // Live2D\u306e\u521d\u671f\u5316\n    Live2D.init();\n    \n\n    // canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\n\tvar canvas = document.getElementById(\"glcanvas\");\n\n\t// \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u5931\u3063\u305f\u3068\u304d\n    \n\tcanvas.addEventListener(\"webglcontextlost\", function(e) {\n        Simple.myerror(\"context lost\");\n        loadLive2DCompleted = false;\n        initLive2DCompleted = false;\n        \n        var cancelAnimationFrame = \n            window.cancelAnimationFrame || \n            window.mozCancelAnimationFrame;\n        cancelAnimationFrame(requestID); //\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u505c\u6b62\n        \n        e.preventDefault(); \n    }, false);\n    \n    // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u304c\u5fa9\u5143\u3055\u308c\u305f\u3068\u304d\n\tcanvas.addEventListener(\"webglcontextrestored\" , function(e){\n        Simple.myerror(\"webglcontext restored\");\n        Simple.initLoop(canvas); \n    }, false);\n\n\t// Init and start Loop\n\tSimple.initLoop(canvas);\n};\n\n\n/*\n* WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u30fb\u521d\u671f\u5316\u3002\n* Live2D\u306e\u521d\u671f\u5316\u3001\u63cf\u753b\u30eb\u30fc\u30d7\u3092\u958b\u59cb\u3002\n*/\nSimple.initLoop = function(canvas/*HTML5 canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8*/) \n{\n    //------------ WebGL\u306e\u521d\u671f\u5316 ------------\n    \n\t// WebGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n    var para = {\n        premultipliedAlpha : true,\n//        alpha : false\n    };\n\tvar gl = Simple.getWebGLContext(canvas, para);\n\tif (!gl) {\n        Simple.myerror(\"Failed to create WebGL context.\");\n        return;\n    }\n\n\t// \u63cf\u753b\u30a8\u30ea\u30a2\u3092\u767d\u3067\u30af\u30ea\u30a2\n\tgl.clearColor( 0.0 , 0.0 , 0.0 , 0.0 );\t \n\n    //------------ Live2D\u306e\u521d\u671f\u5316 ------------\n    \n\t// moc\u30d5\u30a1\u30a4\u30eb\u304b\u3089Live2D\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\n//\tSimple.loadBytes(modelDef.model, function(buf){\n//\t\tlive2DModel = Live2DModelWebGL.loadModel(buf);\n//\t});\n        live2DModel = Live2DModelWebGL.loadModel(binarymoc);\n\n\t// \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u8aad\u307f\u8fbc\u307f\n    var loadCount = 0;\n//\tfor(var i = 0; i < modelDef.textures.length; i++){\n\tfor(var i = 0; i < binarytextures.length; i++){\n\t\t(function ( tno ){// \u5373\u6642\u95a2\u6570\u3067 i \u306e\u5024\u3092 tno \u306b\u56fa\u5b9a\u3059\u308b\uff08onerror\u7528)\n\t\t\tloadedImages[tno] = new Image();\n//\t\t\tloadedImages[tno].src = modelDef.textures[tno];\n\t\t\tloadedImages[tno].src = binarytextures[i];\n\t\t\tloadedImages[tno].onload = function(){\n//\t\t\t\tif((++loadCount) == modelDef.textures.length) {\n\t\t\t\tif((++loadCount) == binarytextures.length) {\n                    loadLive2DCompleted = true;//\u5168\u3066\u8aad\u307f\u7d42\u308f\u3063\u305f\n                }\n\t\t\t}\n//\t\t\tloadedImages[tno].onerror = function() { \n//\t\t\t\tSimple.myerror(\"Failed to load image : \" + modelDef.textures[tno]); \n//\t\t\t}\n\t\t})( i );\n\t}\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u30ed\u30fc\u30c9\n        motion = new Live2DMotion.loadMotion(binarymotion);\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30de\u30cd\u30fc\u30b8\u30e3\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\n        motionMgr = new L2DMotionManager();\n        \n\t//------------ \u63cf\u753b\u30eb\u30fc\u30d7 ------------\n    \n    (function tick() {\n        Simple.draw(gl); // 1\u56de\u5206\u63cf\u753b\n        \n        var requestAnimationFrame = \n            window.requestAnimationFrame || \n            window.mozRequestAnimationFrame ||\n            window.webkitRequestAnimationFrame || \n            window.msRequestAnimationFrame;\n\t\trequestID = requestAnimationFrame( tick , canvas );// \u4e00\u5b9a\u6642\u9593\u5f8c\u306b\u81ea\u8eab\u3092\u547c\u3073\u51fa\u3059\n    })();\n};\n\n\nSimple.draw = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/)\n{\n    // Canvas\u3092\u30af\u30ea\u30a2\u3059\u308b\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // Live2D\u521d\u671f\u5316\n    if( ! live2DModel || ! loadLive2DCompleted ) \n    return; //\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u4f55\u3082\u3057\u306a\u3044\u3067\u8fd4\u308b\n\t\n    // \u30ed\u30fc\u30c9\u5b8c\u4e86\u5f8c\u306b\u521d\u56de\u306e\u307f\u521d\u671f\u5316\u3059\u308b\n    if( ! initLive2DCompleted ){\n            initLive2DCompleted = true;\n\n        // \u753b\u50cf\u304b\u3089WebGL\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\u3057\u3001\u30e2\u30c7\u30eb\u306b\u767b\u9332\n        for( var i = 0; i < loadedImages.length; i++ ){\n            //Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n            var texName = Simple.createTexture(gl, loadedImages[i]);\n\n            live2DModel.setTexture(i, texName); //\u30e2\u30c7\u30eb\u306b\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u30bb\u30c3\u30c8\n        }\n\n        // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u5143\u753b\u50cf\u306e\u53c2\u7167\u3092\u30af\u30ea\u30a2\n        loadedImages = null;\n\n        // OpenGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u30bb\u30c3\u30c8\n        live2DModel.setGL(gl);\n\n        // \u8868\u793a\u4f4d\u7f6e\u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306e\u884c\u5217\u3092\u5b9a\u7fa9\u3059\u308b\n        var s = 2.0 / live2DModel.getCanvasWidth(); //canvas\u306e\u6a2a\u5e45\u3092-1..1\u533a\u9593\u306b\u53ce\u3081\u308b\n        var matrix4x4 = [ s,0,0,0 , 0,-s,0,0 , 0,0,1,0 , -1.0,1,0,1 ];\n        live2DModel.setMatrix(matrix4x4);\n    }\n    \n    // \u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u9069\u5f53\u306b\u66f4\u65b0\n//    var t = UtSystem.getTimeMSec() * 0.001 * 2 * Math.PI; //1\u79d2\u3054\u3068\u306b2\u03c0(1\u5468\u671f)\u5897\u3048\u308b\n//    var cycle = 3.0; //\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u4e00\u5468\u3059\u308b\u6642\u9593(\u79d2)\n    // PARAM_ANGLE_X\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c[cycle]\u79d2\u3054\u3068\u306b-30\u304b\u308930\u307e\u3067\u5909\u5316\u3059\u308b\n//    live2DModel.setParamFloat(\"PARAM_ANGLE_X\", 30 * Math.sin(t/cycle));\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u4e86\u3057\u3066\u3044\u305f\u3089\u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u518d\u751f\n    if(motionMgr.isFinished()){\n        motionMgr.startMotion(motion);\n    }\n    motionMgr.updateParam(live2DModel);\n\n    // Live2D\u30e2\u30c7\u30eb\u3092\u66f4\u65b0\u3057\u3066\u63cf\u753b\n    live2DModel.update(); // \u73fe\u5728\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5408\u308f\u305b\u3066\u9802\u70b9\u7b49\u3092\u8a08\u7b97\n    live2DModel.draw();\t// \u63cf\u753b\n};\n\n\n/*\n* WebGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n*/\nSimple.getWebGLContext = function(canvas/*HTML5 canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8*/)\n{\n\tvar NAMES = [ \"webgl\" , \"experimental-webgl\" , \"webkit-3d\" , \"moz-webgl\"];\n\t\n    var param = {\n        alpha : true,\n        premultipliedAlpha : true\n    };\n    \n\tfor( var i = 0; i < NAMES.length; i++ ){\n\t\ttry{\n\t\t\tvar ctx = canvas.getContext( NAMES[i], param );\n\t\t\tif( ctx ) return ctx;\n\t\t} \n\t\tcatch(e){}\n\t}\n\treturn null;\n};\n\n\n/*\n* Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n*/\nSimple.createTexture = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/, image/*WebGL Image*/) \n{\n    var texture = gl.createTexture(); //\u30c6\u30af\u30b9\u30c1\u30e3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\n    if ( !texture ){\n        mylog(\"Failed to generate gl texture name.\");\n        return -1;\n    }\n    \n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);\t//image\u3092\u4e0a\u4e0b\u53cd\u8ee2\n    gl.activeTexture( gl.TEXTURE0 );\n    gl.bindTexture( gl.TEXTURE_2D , texture );\n    gl.texImage2D( gl.TEXTURE_2D , 0 , gl.RGBA , gl.RGBA , gl.UNSIGNED_BYTE , image);    \n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);        \n    gl.generateMipmap(gl.TEXTURE_2D);\n    gl.bindTexture( gl.TEXTURE_2D , null );\n    \n    return texture;\n};\n\n\n/*\n* \u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30a4\u30c8\u914d\u5217\u3068\u3057\u3066\u30ed\u30fc\u30c9\u3059\u308b\n*/\nSimple.loadBytes = function(path , callback)\n{\n\tvar request = new XMLHttpRequest();\n\trequest.open(\"GET\", path , true);\n\trequest.responseType = \"arraybuffer\";\n\trequest.onload = function(){\n\t\tswitch( request.status ){\n\t\tcase 200:\n\t\t\tcallback( request.response );\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tSimple.myerror( \"Failed to load (\" + request.status + \") : \" + path );\n\t\t\tbreak;\n\t\t}\n\t}\n    \n    request.send(null); \n};\n\n\n/*\n* \u753b\u9762\u30ed\u30b0\u3092\u51fa\u529b\n*/\nSimple.mylog = function(msg/*string*/)\n{\n\tvar myconsole = document.getElementById(\"myconsole\");\n\tmyconsole.innerHTML = myconsole.innerHTML + \"<br>\" + msg;\n\tconsole.log(msg);\n};\n\n/*\n* \u753b\u9762\u30a8\u30e9\u30fc\u3092\u51fa\u529b\n*/\nSimple.myerror = function(msg/*string*/)\n{\n    console.error(msg);\n\tSimple.mylog( \"<span style='color:red'>\" + msg + \"</span>\");\n};\n```\n\n# \u8ab2\u984c\n\u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30ed\u30fc\u30c9\u306f\u30010\u756a\u304b\u3089\u6b63\u3057\u304f\u9806\u756a\u306b\u8aad\u307f\u8fbc\u307e\u308c\u306a\u3044\u3068\u8868\u793a\u304c\u5d29\u308c\u307e\u3059\u3002\n\n\u3042\u3068\u3001Live2DViewer\u3060\u3068moc\u3084mtn\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u66f8\u3044\u305fmodel.json1\u3064\u30ed\u30fc\u30c9\u3059\u308b\u3060\u3051\u3067\u30e2\u30c7\u30eb\u304c\u8868\u793a\u3067\u304d\u307e\u3059\u3002\nHTML5\u3060\u3068\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u76f4\u63a5\u9078\u629e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067model.json\u304b\u3089\u30ed\u30fc\u30c9\u306f\u3067\u304d\u306a\u3044\u2026\u3002\n\uff08\u7d50\u5c40\u306fphp\u3067\u30d5\u30a1\u30a4\u30eb\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u305b\u308b\u65b9\u304c\u3044\u3044\u304b\u3082\uff09\n\n\u305f\u3060\u3001Live2D\u3068WebGL\u3067\u4f5c\u3063\u305f\u30dd\u30b9\u30c8\u30a8\u30d5\u30a7\u30af\u30c8\u306a\u3069\u306f\u30e6\u30fc\u30b6\u304c\u4f5c\u3063\u305f\u30e2\u30c7\u30eb\u3067\u8a66\u305b\u308b\u30b5\u30a4\u30c8\u304c\u4f5c\u308c\u308b\u306e\u3067\u3001\u4f55\u304b\u9762\u767d\u3044\u3082\u306e\u4f5c\u3063\u305f\u3089\u3053\u308c\u3067\u516c\u958b\u3057\u3066\u3044\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n", "tags": ["Live2D", "WebGL", "HTML5", "JavaScript"]}