{"context": " More than 1 year has passed since last update.\u4eca\u56de\u306f\u3044\u3088\u3044\u3088GoogleAnalytics\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u51e6\u7406\u3067\u3059\u3002\n\uff15\u6708\u306bPV\u6570\u304c\u591a\u304b\u3063\u305f\u65e5\u4ed8\u3092\u964d\u9806\u306b10\u4ef6\u53d6\u5f97\u3057\u3066\u307f\u307e\u3059\u3002\nClient ID\u306e\u4f5c\u6210\u65b9\u6cd5\u306f[PHP]Google Analytics API v3.0 \u4f7f\u3044\u65b9\u301c\u524d\u6e96\u5099\u7de8\u3092\u5fa1\u89a7\u304f\u3060\u3055\u3044\u3002\n\u30a2\u30ab\u30a6\u30f3\u30c8\u8a8d\u8a3c\u51e6\u7406\u306b\u3064\u3044\u3066\u306f[PHP]Google Analytics API v3.0 \u4f7f\u3044\u65b9\u301c\u8a8d\u8a3c\u7de8\u3092\u5fa1\u89a7\u304f\u3060\u3055\u3044\u3002\n\u25a0 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\n\u524d\u56de\u540c\u69d8\u4ee5\u4e0b\u306e\u69d8\u306b\u914d\u7f6e\u3057\u3066\u3044\u307e\u3059\n/www\n\u3000/lib\n\u3000\u3000/google-api-php-client\u30fb\u30fb\u30fb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\n\u3000signin.php\n\u3000index.php\n\u25a0 index.php\u306bGoogleAnalytics\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u51e6\u7406\u3092\u8ffd\u52a0\n\nindex.php\n<?php\nrequire('lib/google-api-php-client/src/Google_Client.php');\nrequire('lib/google-api-php-client/src/contrib/Google_AnalyticsService.php');\n\nsession_start();\n$client = new Google_Client();\n\n// \u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\n$client->setClientId('Your Client ID');\n// \u30af\u30e9\u30a4\u30a2\u30f3\u30c8Secret\n$client->setClientSecret('Your Client Secret');\n// \u30ea\u30c0\u30a4\u30ec\u30af\u30c8URL\n$client->setRedirectUri('http://example/index.php');\n\n// \u4f7f\u7528\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u6210\n$service = new Google_AnalyticsService($client);\n\n// \u30c8\u30fc\u30af\u30f3\u30bb\u30c3\u30c8\n$client->setAccessToken($_SESSION['token']);\n\n// \u4ee5\u4e0b\uff14\u3064\u306f\u5fc5\u9808\u9805\u76ee\n$profile_id = 'ga:123456789'; // \u30d7\u30ed\u30d5\u30a1\u30a4\u30ebID\n$start_date = '2013-05-01'; // \u958b\u59cb\u65e5\u4ed8(YYYY-MM-DD)\n$end_date = '2013-05-31'; // \u7d42\u4e86\u65e5\u4ed8(YYYY-MM-DD)\n$metrics = 'ga:visits'; // \u53d6\u5f97\u3059\u308b\u6307\u6a19(\u8907\u6570\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f\u300c,\u300d\u3067\u3064\u306a\u3052\u308b\n\n// \u305d\u306e\u4ed6\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f\u9023\u60f3\u914d\u5217\u306b\u307e\u3068\u3081\u308b\n$optParams = array(\n        'dimensions'=> 'ga:date', // \u30c7\u30a3\u30e1\u30f3\u30b7\u30e7\u30f3(\u8907\u6570\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f\u300c,\u300d\u3067\u3064\u306a\u3052\u308b\n        'sort' => '-ga:visits', // \u4f55\u3067\u30bd\u30fc\u30c8\u3059\u308b\u304b(\u964d\u9806\u306e\u5834\u5408\u306f\u5148\u982d\u306b\u300c-\u300d\u3092\u3064\u3051\u308b\n        'max-results' => 10,// \u53d6\u5f97\u3059\u308b\u6700\u5927\u4ef6\u6570\n);\n\n$data = $service->data_ga->get($profile_id, $start_date, $end_date, $metrics, $optParams);\n$list = array();\nforeach ($data['rows'] as $row => $value) {\n    $result = array();\n    foreach ($data['columnHeaders'] as $key => $header) {\n        $result[$header['name']] = $value[$key];\n    }\n    $list[] = $result;\n}\n?>\n\n<table class=\"table table-bordered table-striped\">\n    <thead>\n        <tr>\n            <th>Pagepath</th>\n            <th>visits</th>\n        </tr>\n    </thead>\n    <tbody>\n    <?php\n        foreach ($list as $val) {\n            echo \"<tr>\";\n            foreach ($val as $data) {\n                echo \"<td>$data</td>\";\n            }\n            echo \"</tr>\";\n        }\n    ?>\n    </tbody>\n</table>\n\n\n\n\n\u4eca\u56de\u306f\u3044\u3088\u3044\u3088GoogleAnalytics\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u51e6\u7406\u3067\u3059\u3002\n\n\uff15\u6708\u306bPV\u6570\u304c\u591a\u304b\u3063\u305f\u65e5\u4ed8\u3092\u964d\u9806\u306b10\u4ef6\u53d6\u5f97\u3057\u3066\u307f\u307e\u3059\u3002\n\nClient ID\u306e\u4f5c\u6210\u65b9\u6cd5\u306f[[PHP]Google Analytics API v3.0 \u4f7f\u3044\u65b9\u301c\u524d\u6e96\u5099\u7de8](http://qiita.com/items/581f7c9390de92f4b81a \"[PHP]Google Analytics API v3.0 \u4f7f\u3044\u65b9\u301c\u524d\u6e96\u5099\u7de8\")\u3092\u5fa1\u89a7\u304f\u3060\u3055\u3044\u3002\n\u30a2\u30ab\u30a6\u30f3\u30c8\u8a8d\u8a3c\u51e6\u7406\u306b\u3064\u3044\u3066\u306f[[PHP]Google Analytics API v3.0 \u4f7f\u3044\u65b9\u301c\u8a8d\u8a3c\u7de8](http://qiita.com/items/d1f67592e7b84a8b1e9e \"[PHP]Google Analytics API v3.0 \u4f7f\u3044\u65b9\u301c\u8a8d\u8a3c\u7de8\")\u3092\u5fa1\u89a7\u304f\u3060\u3055\u3044\u3002\n\n\u25a0 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\n\u524d\u56de\u540c\u69d8\u4ee5\u4e0b\u306e\u69d8\u306b\u914d\u7f6e\u3057\u3066\u3044\u307e\u3059\n/www\n\u3000/lib\n\u3000\u3000/google-api-php-client\u30fb\u30fb\u30fb\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\n\u3000signin.php\n\u3000index.php\n\n\u25a0 index.php\u306bGoogleAnalytics\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\u51e6\u7406\u3092\u8ffd\u52a0\n\n```html+php:index.php\n<?php\nrequire('lib/google-api-php-client/src/Google_Client.php');\nrequire('lib/google-api-php-client/src/contrib/Google_AnalyticsService.php');\n\nsession_start();\n$client = new Google_Client();\n\n// \u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\n$client->setClientId('Your Client ID');\n// \u30af\u30e9\u30a4\u30a2\u30f3\u30c8Secret\n$client->setClientSecret('Your Client Secret');\n// \u30ea\u30c0\u30a4\u30ec\u30af\u30c8URL\n$client->setRedirectUri('http://example/index.php');\n\n// \u4f7f\u7528\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u6210\n$service = new Google_AnalyticsService($client);\n\n// \u30c8\u30fc\u30af\u30f3\u30bb\u30c3\u30c8\n$client->setAccessToken($_SESSION['token']);\n\n// \u4ee5\u4e0b\uff14\u3064\u306f\u5fc5\u9808\u9805\u76ee\n$profile_id = 'ga:123456789'; // \u30d7\u30ed\u30d5\u30a1\u30a4\u30ebID\n$start_date = '2013-05-01'; // \u958b\u59cb\u65e5\u4ed8(YYYY-MM-DD)\n$end_date = '2013-05-31'; // \u7d42\u4e86\u65e5\u4ed8(YYYY-MM-DD)\n$metrics = 'ga:visits'; // \u53d6\u5f97\u3059\u308b\u6307\u6a19(\u8907\u6570\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f\u300c,\u300d\u3067\u3064\u306a\u3052\u308b\n\n// \u305d\u306e\u4ed6\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f\u9023\u60f3\u914d\u5217\u306b\u307e\u3068\u3081\u308b\n$optParams = array(\n        'dimensions'=> 'ga:date', // \u30c7\u30a3\u30e1\u30f3\u30b7\u30e7\u30f3(\u8907\u6570\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f\u300c,\u300d\u3067\u3064\u306a\u3052\u308b\n        'sort' => '-ga:visits', // \u4f55\u3067\u30bd\u30fc\u30c8\u3059\u308b\u304b(\u964d\u9806\u306e\u5834\u5408\u306f\u5148\u982d\u306b\u300c-\u300d\u3092\u3064\u3051\u308b\n        'max-results' => 10,// \u53d6\u5f97\u3059\u308b\u6700\u5927\u4ef6\u6570\n);\n\n$data = $service->data_ga->get($profile_id, $start_date, $end_date, $metrics, $optParams);\n$list = array();\nforeach ($data['rows'] as $row => $value) {\n    $result = array();\n    foreach ($data['columnHeaders'] as $key => $header) {\n        $result[$header['name']] = $value[$key];\n    }\n    $list[] = $result;\n}\n?>\n\n<table class=\"table table-bordered table-striped\">\n    <thead>\n        <tr>\n            <th>Pagepath</th>\n            <th>visits</th>\n        </tr>\n    </thead>\n    <tbody>\n    <?php\n        foreach ($list as $val) {\n            echo \"<tr>\";\n            foreach ($val as $data) {\n                echo \"<td>$data</td>\";\n            }\n            echo \"</tr>\";\n        }\n    ?>\n    </tbody>\n</table>\n\n```\n![Bootstrap, from Twitter (4).png](https://qiita-image-store.s3.amazonaws.com/0/14172/7ff7bada-3839-a59e-3c1d-6c3429928445.png)\n", "tags": ["PHP", "GoogleAnalytics"]}