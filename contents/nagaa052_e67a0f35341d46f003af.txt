{"context": "\nGo\u306e\u52e2\u3044\u3092\u611f\u3058\u3064\u3064\u3001LineBot API\u304c\u65b0\u3057\u304f\u306a\u3063\u305f\u3068\u3044\u3046\u3053\u3068\u3067Go\u672a\u7d4c\u9a13\u304b\u3089Go+Heroku\u3067LINE Messaging API\u3067BOT\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\uff01\n\nLINE Messaging API\u306e\u5229\u7528\u767b\u9332\n\u4ee5\u4e0bURL\u304b\u3089\u5229\u7528\u767b\u9332\u3092\u884c\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306f\u304a\u8a66\u3057\u3068\u3044\u3046\u3053\u3068\u3067\u300cDeveloper Trial\u300d\u3092\u9078\u629e\u3002\n(\u767b\u9332\u3059\u308b\u306b\u306fLINE\u30a2\u30d7\u30ea\u5185\u306e\u8a2d\u5b9a->\u30a2\u30ab\u30a6\u30f3\u30c8->\u30ed\u30b0\u30a4\u30f3\u8a31\u53ef\u3092ON\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002)\nhttps://business.line.me/ja/services/bot\n\n\u300cDeveloper Trial\u300d\u306f\u53cb\u9054\u7b49\u306e\u5236\u9650\u306f\u3042\u308b\u3082\u306e\u306e\u3001\u7121\u6599\u3067Push API\u3082\u5229\u7528\u51fa\u6765\u307e\u3059\u3002\n\u30d7\u30e9\u30f3\u306f\u3053\u3093\u306a\u611f\u3058\u3002\n\nBot\u540d\u3001Bot\u30a2\u30a4\u30b3\u30f3\u3001\u8077\u696d\u306a\u3069\u3092\u9078\u629e\u3057\u3066\u767b\u9332\u3002\n\u767b\u9332\u5b8c\u4e86\u5f8c\u3001\u4f5c\u6210\u3057\u305fBOT\u306eLINE@MANAGER\u304b\u3089\u300c\u30a2\u30ab\u30a6\u30f3\u30c8\u8a2d\u5b9a\u300d->\u300cbot\u8a2d\u5b9a\u300d\u3067\u300cAPI\u3092\u5229\u7528\u3059\u308b\u300d\u3092\u9078\u629e\u3001\u4ed6\u8a2d\u5b9a\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u4e00\u65e6LINE\u306e\u8a2d\u5b9a\u306f\u7d42\u4e86\uff01\n\u6b21\u306fLINE\u306eHook\u306b\u5fdc\u7b54\u3059\u308b\u30b5\u30fc\u30d0\u30fc\u74b0\u5883\u306e\u6e96\u5099\u3092\u884c\u3044\u307e\u3059\u3002\n\nGo\u74b0\u5883\u6e96\u5099\n\n\u958b\u767a\u74b0\u5883\nMacOS 10\nGo 1.6\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ brew install go\n...\n$ go version\ngo version go1.6.2 darwin/amd64\n\n\n\u30d1\u30b9\u8a2d\u5b9a\n(zsh\u3092\u5229\u7528)\nexport GOPATH=$HOME/.go\nexport PATH=$GOPATH/bin:$PATH\nsource ~/.zshrc\n\n\nHeroku\u7528\u306eGo\u30a2\u30d7\u30ea\u3092\u6e96\u5099\n$ go get github.com/heroku/go-getting-started\n$ ls $GOPATH/src/github.com/heroku/go-getting-started\n\n\u3061\u306a\u307f\u306b\u3053\u3053\u3067$GOPATH\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5c55\u958b\u3055\u308c\u305f\n$ tree -L 1 ~/.go\n.go\n\u251c\u2500\u2500 bin\n\u251c\u2500\u2500 pkg\n\u2514\u2500\u2500 src\n\n\nIntelliJ IDEA\u74b0\u5883\u6e96\u5099(+Golang plugin)\nSyntax\u30c1\u30a7\u30c3\u30af\u3084\u30e1\u30bd\u30c3\u30c9\u88dc\u5b8c\u306a\u3069\u521d\u5fc3\u8005\u306b\u306f\u3042\u308a\u304c\u305f\u3044\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\uff01(\u597d\u307f\u3067\u3053\u3053\u306f\u98db\u3070\u3057\u3066\u304f\u3060\u3055\u3044)\n(\u53c2\u8003\uff1ahttp://qiita.com/kaiinui/items/433eb86c022ffcad0bea)\n\n1.\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nhttps://www.jetbrains.com/idea/download/\n\u304b\u3089 Community Edition \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\uff01\n\n2.Golang plugin\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nPreferences -> Plugins -> Go \u3092\u691c\u7d22&\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\n3.\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\nNew Project\u304b\u3089Go\u3092\u9078\u629e \n=> Project SDK\u3092\u6307\u5b9a(mac\u3067brew\u3060\u3063\u305f\u3089/usr/local/Cellar/go/[version]/libexec\u3068\u304b\u304b\u306a\uff1f)\n=> Project location\u306b$GOPATH/src/github.com/heroku/go-getting-started\u3092\u6307\u5b9a\n\n\nHeroku\u74b0\u5883\u6e96\u5099\n\n\u30e6\u30fc\u30b6\u30fc\u767b\u9332\nHeroku\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u3092\u884c\u3044\u307e\u3059\u3002\nhttps://www.heroku.com/\n\u53f3\u4e0a\u306esign up\u304b\u3089\u5fc5\u8981\u4e8b\u9805\u3092\u5165\u529b\u3057\u3066\u300cCREATE FREE ACCOUNT\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\u3057\u3070\u3089\u304f\u3059\u308b\u3068\u30e1\u30fc\u30eb\u304c\u9001\u3089\u308c\u3066\u304f\u308b\u306e\u3067\u3001\u305d\u3053\u304b\u3089\u672c\u767b\u9332\u3002\n(\u300cPrimary Development Language\u300d\u306f\u521d\u671f\u3067\u4f5c\u3089\u308c\u308b\u30b5\u30f3\u30d7\u30ebApp\u304c\u5909\u308f\u308b\u3060\u3051\u3063\u307d\u3044\u306e\u3067\u3001\u306a\u3093\u3067\u3082\u5927\u4e08\u592b)\n\n\nHeroku\u306b\u30a2\u30d7\u30ea\u767b\u9332\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u30a2\u30d7\u30ea\u306e\u66f4\u65b0\u3092\u884c\u3046\u70ba\u306b\u3001\u4ee5\u4e0b\u306e\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nhttps://devcenter.heroku.com/articles/heroku-command-line\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u5165\u529b\u3057\n\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u30ed\u30b0\u30a4\u30f3\u78ba\u8a8d\u3092\u884c\u3046\u3002\n$ heroku login\nEnter your Heroku credentials.\nEmail: [\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9]\nPassword (typing will be hidden):\nLogged in as [\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9]\n\n\u30ed\u30b0\u30a4\u30f3\u304c\u78ba\u8a8d\u51fa\u6765\u305f\u3089Heroku\u7528\u306eGo\u30a2\u30d7\u30ea\u3092Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3001\u30a2\u30d7\u30ea\u4f5c\u6210\n$ cd $GOPATH/src/github.com/heroku/go-getting-started\n$ heroku create\n...\nCreating app... done,\nhttps://[\u30a2\u30d7\u30ea\u540d].herokuapp.com/ | https://git.heroku.com/[\u30a2\u30d7\u30ea\u540d].git\n\n\u6b63\u3057\u304f\u30c7\u30d7\u30ed\u30a4\u304c\u5b8c\u4e86\u3059\u308b\u3068Heroku\u306ePersonal apps\u5185\u306b\u30a2\u30d7\u30ea\u304c\u51fa\u6765\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u51fa\u6765\u307e\u3059\u3002\n\n\nBot\u5b9f\u88c5\n\u4eca\u56de\u306f\u9069\u5f53\u306b\u30ac\u30e4\u3092\u5165\u308c\u3066\u304f\u308c\u308b\u3001\u30a6\u30b6\u3044Bot\u3092\u4f5c\u308a\u307e\u3059\uff01\n\nWebHook\u8a2d\u5b9a\nLINE@MANAGER\u5185\u306e\u300cbot\u8a2d\u5b9a\u300d\u304b\u3089\u300cLINE Developers\u300d\u3092\u30af\u30ea\u30c3\u30af\nBasic Information\u5185\u306eEdit\u3092\u62bc\u3057\u3001Webhook URL\u306b\u4ee5\u4e0bURl\u3092\u8a2d\u5b9a\nhttps://[heroku\u30a2\u30d7\u30ea\u540d].herokuapp.com/hook\n\n\u3064\u3044\u3067\u306bChannel Secret\u3068Channel Access Token\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nLine\u306eSDK\u3092\u53d6\u5f97\ngo get github.com/line/line-bot-sdk-go/linebot\n\n\ngo-getting-started/main.go\u3092\u4fee\u6b63\n\nmain.go\npackage main\n\nimport (\n    \"log\"\n    \"net/http\"\n    \"os\"\n\n    \"github.com/gin-gonic/gin\"\n    \"github.com/line/line-bot-sdk-go/linebot\"\n    \"fmt\"\n    \"time\"\n    \"math/rand\"\n)\n\nfunc main() {\n    port := os.Getenv(\"PORT\")\n\n    if port == \"\" {\n        log.Fatal(\"$PORT must be set\")\n    }\n\n    router := gin.New()\n    router.Use(gin.Logger())\n\n\n    router.POST(\"/hook\", func(c *gin.Context) {\n        client := &http.Client{Timeout: time.Duration(15 * time.Second)}\n        bot, err := linebot.New(<Channel Secret>, <Channel Access Token>, linebot.WithHTTPClient(client))\n        if err != nil {\n            fmt.Println(err)\n            return\n        }\n        received, err := bot.ParseRequest(c.Request)\n\n        for _, event := range received {\n            if event.Type == linebot.EventTypeMessage {\n                switch message := event.Message.(type) {\n                case *linebot.TextMessage:\n                    source := event.Source\n                    if source.Type == linebot.EventSourceTypeRoom {\n                        if resMessage := getResMessage(message.Text); resMessage != \"\" {\n                            postMessage := linebot.NewTextMessage(resMessage)\n                            if _, err = bot.ReplyMessage(event.ReplyToken, postMessage).Do(); err != nil {\n                                log.Print(err)\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    })\n\n    router.Run(\":\" + port)\n}\n\n\nfunc getResMessage(reqMessage string) (message string) {\n    resMessages := [3]string{\"\u308f\u304b\u308b\u308f\u304b\u308b\",\"\u305d\u308c\u3067\uff1f\u305d\u308c\u3067\uff1f\",\"\u304b\u3089\u306e\u301c\uff1f\"}\n\n    rand.Seed(time.Now().UnixNano())\n    if rand.Intn(5) == 0 {\n        if math := rand.Intn(4); math != 3 {\n            message = resMessages[math];\n        } else {\n            message = reqMessage + \"\u3058\u3083\u306d\u30fc\u3088w\"\n        }\n    }\n    return\n}\n\n\n\n\u4f9d\u5b58\u95a2\u4fc2\u3092\u5ba3\u8a00\n$ cd $GOPATH/src/github.com/heroku/go-getting-started\n$ go get -u github.com/tools/godep\n$ godep save ./...\n$ godep go install ./...\n\n\nHeroku\u306b\u30c7\u30d7\u30ed\u30a4\n$ git add .\n$ git commit -m \"Create Gayabot\"\n$ git push heroku master\n\n\n\u5b8c\u6210\uff01\n\u30c8\u30fc\u30af\u5185\u306bBOT\u3092\u62db\u5f85\u3057\u3066\u30e1\u30c3\u30bb\u3092\u9001\u308b\u3068\u30ac\u30e4\u3063\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u4ed6\u306b\u3082\u753b\u50cf\u3001\u30b9\u30bf\u30f3\u30d7\u3001\u30ab\u30eb\u30fc\u30bb\u30eb\u8868\u793a\u3001\u30af\u30ea\u30c3\u30af\u53ef\u80fd\u306a\u30dc\u30bf\u30f3\u3092\u914d\u7f6e\u3057\u305f\u308a\u304c\u7c21\u5358\u306b\u5b9f\u88c5\u51fa\u6765\u305f\u306e\u3067\n\u8272\u3005\u53ef\u80fd\u6027\u304c\u5e83\u304c\u308a\u305d\u3046\u3067\u3059\u306d\uff01\nGo\u304c\u521d\u3081\u3066\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u5b9f\u88c5\u7b49\u3054\u6307\u6458\u9802\u3051\u308b\u3068\u5e78\u3044\u3067\u5fa1\u5ea7\u3044\u307e\u3059\u3002\n\u304a\u75b2\u308c\u69d8\u3067\u3057\u305f\uff01\n\n\n\u53c2\u8003\n\nAPI Reference\n\u308f\u305a\u304b5\u5206..\n[golang]Go\u306eSDK\u3067\u624b\u8efd\u306bLINE BOT API\u3092\u8a66\u3057\u3066\u307f\u305f\n\n![golang-320x320.png](https://qiita-image-store.s3.amazonaws.com/0/8255/412b606e-77d5-c736-2160-865c174793a1.png)\n\nGo\u306e\u52e2\u3044\u3092\u611f\u3058\u3064\u3064\u3001LineBot API\u304c\u65b0\u3057\u304f\u306a\u3063\u305f\u3068\u3044\u3046\u3053\u3068\u3067Go\u672a\u7d4c\u9a13\u304b\u3089Go+Heroku\u3067LINE Messaging API\u3067BOT\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\uff01\n\n## LINE Messaging API\u306e\u5229\u7528\u767b\u9332\n\u4ee5\u4e0bURL\u304b\u3089\u5229\u7528\u767b\u9332\u3092\u884c\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306f\u304a\u8a66\u3057\u3068\u3044\u3046\u3053\u3068\u3067\u300cDeveloper Trial\u300d\u3092\u9078\u629e\u3002\n(\u767b\u9332\u3059\u308b\u306b\u306fLINE\u30a2\u30d7\u30ea\u5185\u306e\u8a2d\u5b9a->\u30a2\u30ab\u30a6\u30f3\u30c8->\u30ed\u30b0\u30a4\u30f3\u8a31\u53ef\u3092ON\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002)\n\nhttps://business.line.me/ja/services/bot\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-11-06 16.47.47.png](https://qiita-image-store.s3.amazonaws.com/0/8255/892ad39d-ecae-c2ef-59d3-151c1ad1d401.png)\n\n\u300cDeveloper Trial\u300d\u306f\u53cb\u9054\u7b49\u306e\u5236\u9650\u306f\u3042\u308b\u3082\u306e\u306e\u3001\u7121\u6599\u3067Push API\u3082\u5229\u7528\u51fa\u6765\u307e\u3059\u3002\n\u30d7\u30e9\u30f3\u306f\u3053\u3093\u306a\u611f\u3058\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-11-06 16.58.38.png](https://qiita-image-store.s3.amazonaws.com/0/8255/7a44677b-b6af-b508-44bc-1cd4c4679584.png)\n\nBot\u540d\u3001Bot\u30a2\u30a4\u30b3\u30f3\u3001\u8077\u696d\u306a\u3069\u3092\u9078\u629e\u3057\u3066\u767b\u9332\u3002\n\u767b\u9332\u5b8c\u4e86\u5f8c\u3001\u4f5c\u6210\u3057\u305fBOT\u306eLINE@MANAGER\u304b\u3089\u300c\u30a2\u30ab\u30a6\u30f3\u30c8\u8a2d\u5b9a\u300d->\u300cbot\u8a2d\u5b9a\u300d\u3067\u300cAPI\u3092\u5229\u7528\u3059\u308b\u300d\u3092\u9078\u629e\u3001\u4ed6\u8a2d\u5b9a\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-11-06 20.00.09.png](https://qiita-image-store.s3.amazonaws.com/0/8255/385bffd1-d6a3-186a-f214-8d7b7228684a.png)\n\n\u4e00\u65e6LINE\u306e\u8a2d\u5b9a\u306f\u7d42\u4e86\uff01\n\u6b21\u306fLINE\u306eHook\u306b\u5fdc\u7b54\u3059\u308b\u30b5\u30fc\u30d0\u30fc\u74b0\u5883\u306e\u6e96\u5099\u3092\u884c\u3044\u307e\u3059\u3002\n\n## Go\u74b0\u5883\u6e96\u5099\n### \u958b\u767a\u74b0\u5883\nMacOS 10\nGo 1.6\n\n### \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ brew install go\n...\n$ go version\ngo version go1.6.2 darwin/amd64\n```\n\n### \u30d1\u30b9\u8a2d\u5b9a\n(zsh\u3092\u5229\u7528)\n\n```.zshrc\nexport GOPATH=$HOME/.go\nexport PATH=$GOPATH/bin:$PATH\nsource ~/.zshrc\n```\n\n### Heroku\u7528\u306eGo\u30a2\u30d7\u30ea\u3092\u6e96\u5099\n```\n$ go get github.com/heroku/go-getting-started\n$ ls $GOPATH/src/github.com/heroku/go-getting-started\n```\n\n\u3061\u306a\u307f\u306b\u3053\u3053\u3067$GOPATH\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5c55\u958b\u3055\u308c\u305f\n\n```\n$ tree -L 1 ~/.go\n.go\n\u251c\u2500\u2500 bin\n\u251c\u2500\u2500 pkg\n\u2514\u2500\u2500 src\n```\n\n### IntelliJ IDEA\u74b0\u5883\u6e96\u5099(+Golang plugin)\nSyntax\u30c1\u30a7\u30c3\u30af\u3084\u30e1\u30bd\u30c3\u30c9\u88dc\u5b8c\u306a\u3069\u521d\u5fc3\u8005\u306b\u306f\u3042\u308a\u304c\u305f\u3044\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\uff01(\u597d\u307f\u3067\u3053\u3053\u306f\u98db\u3070\u3057\u3066\u304f\u3060\u3055\u3044)\n(\u53c2\u8003\uff1ahttp://qiita.com/kaiinui/items/433eb86c022ffcad0bea)\n\n#### 1.\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nhttps://www.jetbrains.com/idea/download/\n\n\u304b\u3089 Community Edition \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\uff01\n\n#### 2.Golang plugin\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nPreferences -> Plugins -> Go \u3092\u691c\u7d22&\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-27 22.35.38.png](https://qiita-image-store.s3.amazonaws.com/0/8255/03835a76-3fe8-d7a6-9645-473d908ce675.png)\n\n#### 3.\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\nNew Project\u304b\u3089Go\u3092\u9078\u629e \n=> Project SDK\u3092\u6307\u5b9a(mac\u3067brew\u3060\u3063\u305f\u3089```/usr/local/Cellar/go/[version]/libexec```\u3068\u304b\u304b\u306a\uff1f)\n=> Project location\u306b```$GOPATH/src/github.com/heroku/go-getting-started```\u3092\u6307\u5b9a\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-27 23.09.20.png](https://qiita-image-store.s3.amazonaws.com/0/8255/2663fd6c-6476-f473-ecd0-c2a4600650d5.png)\n\n\n## Heroku\u74b0\u5883\u6e96\u5099\n### \u30e6\u30fc\u30b6\u30fc\u767b\u9332\n\nHeroku\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u3092\u884c\u3044\u307e\u3059\u3002\n\nhttps://www.heroku.com/\n\n\u53f3\u4e0a\u306esign up\u304b\u3089\u5fc5\u8981\u4e8b\u9805\u3092\u5165\u529b\u3057\u3066\u300cCREATE FREE ACCOUNT\u300d\u3092\u30af\u30ea\u30c3\u30af\u3002\n\u3057\u3070\u3089\u304f\u3059\u308b\u3068\u30e1\u30fc\u30eb\u304c\u9001\u3089\u308c\u3066\u304f\u308b\u306e\u3067\u3001\u305d\u3053\u304b\u3089\u672c\u767b\u9332\u3002\n(\u300cPrimary Development Language\u300d\u306f\u521d\u671f\u3067\u4f5c\u3089\u308c\u308b\u30b5\u30f3\u30d7\u30ebApp\u304c\u5909\u308f\u308b\u3060\u3051\u3063\u307d\u3044\u306e\u3067\u3001\u306a\u3093\u3067\u3082\u5927\u4e08\u592b)\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-11-06 16.18.57.png](https://qiita-image-store.s3.amazonaws.com/0/8255/fa37fafc-2cf2-2695-d886-12b3d5d8ae2e.png)\n\n### Heroku\u306b\u30a2\u30d7\u30ea\u767b\u9332\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u30a2\u30d7\u30ea\u306e\u66f4\u65b0\u3092\u884c\u3046\u70ba\u306b\u3001\u4ee5\u4e0b\u306e\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nhttps://devcenter.heroku.com/articles/heroku-command-line\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u5165\u529b\u3057\n\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u30ed\u30b0\u30a4\u30f3\u78ba\u8a8d\u3092\u884c\u3046\u3002\n\n```\n$ heroku login\nEnter your Heroku credentials.\nEmail: [\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9]\nPassword (typing will be hidden):\nLogged in as [\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9]\n```\n\n\u30ed\u30b0\u30a4\u30f3\u304c\u78ba\u8a8d\u51fa\u6765\u305f\u3089Heroku\u7528\u306eGo\u30a2\u30d7\u30ea\u3092Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3001\u30a2\u30d7\u30ea\u4f5c\u6210\n\n```\n$ cd $GOPATH/src/github.com/heroku/go-getting-started\n$ heroku create\n...\nCreating app... done,\nhttps://[\u30a2\u30d7\u30ea\u540d].herokuapp.com/ | https://git.heroku.com/[\u30a2\u30d7\u30ea\u540d].git\n```\n\n\u6b63\u3057\u304f\u30c7\u30d7\u30ed\u30a4\u304c\u5b8c\u4e86\u3059\u308b\u3068Heroku\u306ePersonal apps\u5185\u306b\u30a2\u30d7\u30ea\u304c\u51fa\u6765\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u51fa\u6765\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-11-06 16.33.23.png](https://qiita-image-store.s3.amazonaws.com/0/8255/280f0f63-6137-e1c2-674c-816899ab7205.png)\n\n## Bot\u5b9f\u88c5\n\u4eca\u56de\u306f\u9069\u5f53\u306b\u30ac\u30e4\u3092\u5165\u308c\u3066\u304f\u308c\u308b\u3001\u30a6\u30b6\u3044Bot\u3092\u4f5c\u308a\u307e\u3059\uff01\n\n### WebHook\u8a2d\u5b9a\n\nLINE@MANAGER\u5185\u306e\u300cbot\u8a2d\u5b9a\u300d\u304b\u3089\u300cLINE Developers\u300d\u3092\u30af\u30ea\u30c3\u30af\nBasic Information\u5185\u306eEdit\u3092\u62bc\u3057\u3001Webhook URL\u306b\u4ee5\u4e0bURl\u3092\u8a2d\u5b9a\n\n```\nhttps://[heroku\u30a2\u30d7\u30ea\u540d].herokuapp.com/hook\n```\n\n\u3064\u3044\u3067\u306b```Channel Secret```\u3068```Channel Access Token```\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n### Line\u306eSDK\u3092\u53d6\u5f97\n\n```\ngo get github.com/line/line-bot-sdk-go/linebot\n```\n\n### go-getting-started/main.go\u3092\u4fee\u6b63\n```main.go\npackage main\n\nimport (\n\t\"log\"\n\t\"net/http\"\n\t\"os\"\n\n\t\"github.com/gin-gonic/gin\"\n\t\"github.com/line/line-bot-sdk-go/linebot\"\n\t\"fmt\"\n\t\"time\"\n\t\"math/rand\"\n)\n\nfunc main() {\n\tport := os.Getenv(\"PORT\")\n\n\tif port == \"\" {\n\t\tlog.Fatal(\"$PORT must be set\")\n\t}\n\n\trouter := gin.New()\n\trouter.Use(gin.Logger())\n\n\n\trouter.POST(\"/hook\", func(c *gin.Context) {\n\t\tclient := &http.Client{Timeout: time.Duration(15 * time.Second)}\n\t\tbot, err := linebot.New(<Channel Secret>, <Channel Access Token>, linebot.WithHTTPClient(client))\n\t\tif err != nil {\n\t\t\tfmt.Println(err)\n\t\t\treturn\n\t\t}\n\t\treceived, err := bot.ParseRequest(c.Request)\n\n\t\tfor _, event := range received {\n\t\t\tif event.Type == linebot.EventTypeMessage {\n\t\t\t\tswitch message := event.Message.(type) {\n\t\t\t\tcase *linebot.TextMessage:\n\t\t\t\t\tsource := event.Source\n\t\t\t\t\tif source.Type == linebot.EventSourceTypeRoom {\n\t\t\t\t\t\tif resMessage := getResMessage(message.Text); resMessage != \"\" {\n\t\t\t\t\t\t\tpostMessage := linebot.NewTextMessage(resMessage)\n\t\t\t\t\t\t\tif _, err = bot.ReplyMessage(event.ReplyToken, postMessage).Do(); err != nil {\n\t\t\t\t\t\t\t\tlog.Print(err)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n\n\trouter.Run(\":\" + port)\n}\n\n\nfunc getResMessage(reqMessage string) (message string) {\n\tresMessages := [3]string{\"\u308f\u304b\u308b\u308f\u304b\u308b\",\"\u305d\u308c\u3067\uff1f\u305d\u308c\u3067\uff1f\",\"\u304b\u3089\u306e\u301c\uff1f\"}\n\n\trand.Seed(time.Now().UnixNano())\n\tif rand.Intn(5) == 0 {\n\t\tif math := rand.Intn(4); math != 3 {\n\t\t\tmessage = resMessages[math];\n\t\t} else {\n\t\t\tmessage = reqMessage + \"\u3058\u3083\u306d\u30fc\u3088w\"\n\t\t}\n\t}\n\treturn\n}\n```\n\n### \u4f9d\u5b58\u95a2\u4fc2\u3092\u5ba3\u8a00\n```\n$ cd $GOPATH/src/github.com/heroku/go-getting-started\n$ go get -u github.com/tools/godep\n$ godep save ./...\n$ godep go install ./...\n```\n\n### Heroku\u306b\u30c7\u30d7\u30ed\u30a4\n```\n$ git add .\n$ git commit -m \"Create Gayabot\"\n$ git push heroku master\n```\n\n## \u5b8c\u6210\uff01\n\u30c8\u30fc\u30af\u5185\u306bBOT\u3092\u62db\u5f85\u3057\u3066\u30e1\u30c3\u30bb\u3092\u9001\u308b\u3068\u30ac\u30e4\u3063\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u4ed6\u306b\u3082\u753b\u50cf\u3001\u30b9\u30bf\u30f3\u30d7\u3001\u30ab\u30eb\u30fc\u30bb\u30eb\u8868\u793a\u3001\u30af\u30ea\u30c3\u30af\u53ef\u80fd\u306a\u30dc\u30bf\u30f3\u3092\u914d\u7f6e\u3057\u305f\u308a\u304c\u7c21\u5358\u306b\u5b9f\u88c5\u51fa\u6765\u305f\u306e\u3067\n\u8272\u3005\u53ef\u80fd\u6027\u304c\u5e83\u304c\u308a\u305d\u3046\u3067\u3059\u306d\uff01\nGo\u304c\u521d\u3081\u3066\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u5b9f\u88c5\u7b49\u3054\u6307\u6458\u9802\u3051\u308b\u3068\u5e78\u3044\u3067\u5fa1\u5ea7\u3044\u307e\u3059\u3002\n\u304a\u75b2\u308c\u69d8\u3067\u3057\u305f\uff01\n\n<img width=\"375\" alt=\"IMG_3943.PNG\" src=\"https://qiita-image-store.s3.amazonaws.com/0/8255/4aa4ad0a-0cf0-7623-f5e6-b7e9f13c29c8.png\">\n\n\n## \u53c2\u8003\n* [API Reference](https://devdocs.line.me/ja/)\n* [\u308f\u305a\u304b5\u5206..](https://bita.jp/dml/line-messaging-api-exp)\n* [[golang]Go\u306eSDK\u3067\u624b\u8efd\u306bLINE BOT API\u3092\u8a66\u3057\u3066\u307f\u305f](http://qiita.com/pokochi/items/cc06e3f6edc9136446ca)\n", "tags": ["Go", "golang", "Heroku", "linebot"]}