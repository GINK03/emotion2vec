{"context": "\n\nSelenium\u3067HTML\u8981\u7d20\u304c\u898b\u3064\u304b\u308b\u307e\u3067\u5f85\u6a5f\u3057\u305f\u3044\n\u4f1a\u793e\u3067\u52e4\u6020\u7ba1\u7406\u306eWeb\u30b7\u30b9\u30c6\u30e0\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u6bce\u65e5\u3001\u624b\u52d5\u3067\u5165\u529b\u3059\u308b\u306e\u304c\u9762\u5012\u304f\u3055\u304b\u3063\u305f\u306e\u3067Selenium(Java)\u3067\u81ea\u52d5\u5165\u529b\u3059\u308b\u30c4\u30fc\u30eb\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\u305d\u306e\u969b\u3001\u753b\u9762\u9077\u79fb\u306e\u5b8c\u4e86\u3092\u5224\u65ad\u3059\u308b\u305f\u3081\u306b\u3001\u3042\u308bHTML\u8981\u7d20\u304c\u898b\u3064\u304b\u308b\u307e\u3067\u5f85\u6a5f\u3059\u308b\u51e6\u7406\u3092\u4f5c\u308b\u306e\u306b\u4e00\u756a\u3001\u624b\u3053\u305a\u3063\u305f\u306e\u3067\u5185\u5bb9\u3092\u30e1\u30e2\u3057\u307e\u3059\u3002\n\nStrategy\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u4f5c\u6210\n\u305f\u3060\u5f85\u6a5f\u3059\u308b\u3060\u3051\u3067\u306f\u306a\u304f\u3001\u753b\u9762\u306b\u3088\u3063\u3066\u306f\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u3089\u518d\u5ea6\u3001\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3088\u3046\u306a\u3053\u3068\u304c\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3001\u300c\u3069\u306e\u3088\u3046\u306b\u5f85\u3064\u304b\u300d\u3068\u3044\u3046\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u5165\u308c\u66ff\u3048\u3089\u308c\u308b\u3088\u3046\u306bStrategy\u30d1\u30bf\u30fc\u30f3\u3067\u4f5c\u308a\u307e\u3059\u3002\n\njava\npublic interface HtmlElementStrategy {\n    public boolean isFindElement();\n}\n\n\n\nContext\u3092\u4f5c\u6210\nHtmlElementStrategy#isFindElement\u304ctrue\u306b\u306a\u308b\u307e\u3067\u5f85\u6a5f\u3059\u308b\u51e6\u7406\u3002\nwaitTime\u306b\u5f85\u6a5f\u6642\u9593\u3001timeoutCnt\u306b\u5f85\u6a5f\u56de\u6570\u3092\u6307\u5b9a\u3002\n\njava\npublic class HtmlElementContext{\n    public static void waitUntilFindElement(long waitTime, int timeoutCnt,\n            HtmlElementStrategy t) {\n        for (int i = 0;; i++) {\n            try {\n                if (t.isFindElement()) {\n                    // \u8981\u7d20\u304c\u898b\u3064\u304b\u3063\u305f\u3089\u30eb\u30fc\u30d7\u3092\u629c\u3051\u308b\n                    break;\n                }\n            } catch (NoSuchElementException e) {\n                if (i > timeoutCnt) {\n                    // timeoutCnt\u3092\u8d85\u3048\u305f\u3089\u4f8b\u5916\u3092\u6295\u3052\u308b\n                    throw e;\n                }\n            }\n            try {\n                // waitTime\u306e\u9593\u3001\u5f85\u6a5f\u3059\u308b\n                Thread.sleep(waitTime);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n\n\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u4f5c\u6210\n\u5b9f\u969b\u306e\u4f7f\u7528\u4f8b\u3002\nHtmlElementContext#waitUntilFindElement\u3092\u547c\u3073\u51fa\u3059\u969b\u306b\u3001Strategy\u3092\u5b9f\u88c5\u3059\u308b\u3002\n\njava\nHtmlElementContext.waitUntilFindElement(1000, 30,\n        new TeamSplitStrategy() {\n            // Strategy\u306e\u5b9f\u88c5\n            @Override\n            public boolean isFindElement() {\n                if (driver.getTitle().contains(\"HTML\u8981\u7d20\u540d\")) { \n                    // \u753b\u9762\u306e\u30bf\u30a4\u30c8\u30eb\u304c\u898b\u3064\u304b\u3063\u305f\n                    return true;\n                }\n                // \u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\n                driver.findElement(By.linkText(\"HTML\u8981\u7d20\u540d\")).click();\n                return false;\n            }\n        });\n\n\n\nWebDriverWait\u30af\u30e9\u30b9\u3092\u4f7f\u3048\u3070\u3088\u304b\u3063\u305f\n\u3053\u306e\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u3044\u308b\u6700\u4e2d\u3001Selenium\u30e9\u30a4\u30d6\u30e9\u30ea\u306eWebDriverWait\u30af\u30e9\u30b9\u3092\u4f7f\u3048\u3070\u3001\u308f\u3056\u308f\u3056\u4e0a\u8a18\u306e\u3088\u3046\u306a\u51e6\u7406\u3092\u81ea\u4f5c\u3057\u306a\u304f\u3066\u3082\u6e08\u3080\u3053\u3068\u306b\u6c17\u4ed8\u3044\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\njava\n// Wait\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\nWait<WebDriver> wait = new WebDriverWait(driver, 30);\n\n// \u5f85\u6a5f\u6761\u4ef6\u3092\u5b9f\u88c5\nExpectedCondition<Boolean> waitCondition= new ExpectedCondition<Boolean>() {\n    public Boolean apply(WebDriver driver) {\n        driver.findElement(By.linkText(\"HTML\u8981\u7d20\u540d\")).click();\n        return driver.getTitle().contains(\"HTML\u8981\u7d20\u540d\");\n    }\n};\n\n// \u6761\u4ef6\u3092\u6e80\u305f\u3059\u307e\u3067\u5f85\u3064\nwait.until(waitCondition);\n\n\n\u3064\u307e\u308a\u3001\u8eca\u8f2a\u306e\u518d\u767a\u660e\u3092\u3059\u308b\u524d\u306b\u3001API\u3092\u78ba\u8a8d\u3057\u3088\u3046\u306d\u3068\u3044\u3046\u304a\u8a71\u3067\u3057\u305f\uff65\uff65\uff65\uff65\uff65\uff65\u3002\n#Selenium\u3067HTML\u8981\u7d20\u304c\u898b\u3064\u304b\u308b\u307e\u3067\u5f85\u6a5f\u3057\u305f\u3044\n\u4f1a\u793e\u3067\u52e4\u6020\u7ba1\u7406\u306eWeb\u30b7\u30b9\u30c6\u30e0\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u6bce\u65e5\u3001\u624b\u52d5\u3067\u5165\u529b\u3059\u308b\u306e\u304c\u9762\u5012\u304f\u3055\u304b\u3063\u305f\u306e\u3067Selenium(Java)\u3067\u81ea\u52d5\u5165\u529b\u3059\u308b\u30c4\u30fc\u30eb\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\u305d\u306e\u969b\u3001\u753b\u9762\u9077\u79fb\u306e\u5b8c\u4e86\u3092\u5224\u65ad\u3059\u308b\u305f\u3081\u306b\u3001\u3042\u308bHTML\u8981\u7d20\u304c\u898b\u3064\u304b\u308b\u307e\u3067\u5f85\u6a5f\u3059\u308b\u51e6\u7406\u3092\u4f5c\u308b\u306e\u306b\u4e00\u756a\u3001\u624b\u3053\u305a\u3063\u305f\u306e\u3067\u5185\u5bb9\u3092\u30e1\u30e2\u3057\u307e\u3059\u3002\n\n##Strategy\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u4f5c\u6210\n\u305f\u3060\u5f85\u6a5f\u3059\u308b\u3060\u3051\u3067\u306f\u306a\u304f\u3001\u753b\u9762\u306b\u3088\u3063\u3066\u306f\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u3089\u518d\u5ea6\u3001\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3088\u3046\u306a\u3053\u3068\u304c\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3001\u300c\u3069\u306e\u3088\u3046\u306b\u5f85\u3064\u304b\u300d\u3068\u3044\u3046\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u5165\u308c\u66ff\u3048\u3089\u308c\u308b\u3088\u3046\u306bStrategy\u30d1\u30bf\u30fc\u30f3\u3067\u4f5c\u308a\u307e\u3059\u3002\n\n```java:java\npublic interface HtmlElementStrategy {\n\tpublic boolean isFindElement();\n}\n```\n\n##Context\u3092\u4f5c\u6210\nHtmlElementStrategy#isFindElement\u304ctrue\u306b\u306a\u308b\u307e\u3067\u5f85\u6a5f\u3059\u308b\u51e6\u7406\u3002\nwaitTime\u306b\u5f85\u6a5f\u6642\u9593\u3001timeoutCnt\u306b\u5f85\u6a5f\u56de\u6570\u3092\u6307\u5b9a\u3002\n\n```java:java\npublic class HtmlElementContext{\n\tpublic static void waitUntilFindElement(long waitTime, int timeoutCnt,\n\t\t\tHtmlElementStrategy t) {\n\t\tfor (int i = 0;; i++) {\n\t\t\ttry {\n\t\t\t\tif (t.isFindElement()) {\n\t\t\t\t\t// \u8981\u7d20\u304c\u898b\u3064\u304b\u3063\u305f\u3089\u30eb\u30fc\u30d7\u3092\u629c\u3051\u308b\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} catch (NoSuchElementException e) {\n\t\t\t\tif (i > timeoutCnt) {\n\t\t\t\t\t// timeoutCnt\u3092\u8d85\u3048\u305f\u3089\u4f8b\u5916\u3092\u6295\u3052\u308b\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttry {\n\t\t\t\t// waitTime\u306e\u9593\u3001\u5f85\u6a5f\u3059\u308b\n\t\t\t\tThread.sleep(waitTime);\n\t\t\t} catch (InterruptedException e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n##\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u4f5c\u6210\n\u5b9f\u969b\u306e\u4f7f\u7528\u4f8b\u3002\nHtmlElementContext#waitUntilFindElement\u3092\u547c\u3073\u51fa\u3059\u969b\u306b\u3001Strategy\u3092\u5b9f\u88c5\u3059\u308b\u3002\n\n```java:java\nHtmlElementContext.waitUntilFindElement(1000, 30,\n\t\tnew TeamSplitStrategy() {\n\t\t\t// Strategy\u306e\u5b9f\u88c5\n\t\t\t@Override\n\t\t\tpublic boolean isFindElement() {\n\t\t\t\tif (driver.getTitle().contains(\"HTML\u8981\u7d20\u540d\")) { \n\t\t\t\t\t// \u753b\u9762\u306e\u30bf\u30a4\u30c8\u30eb\u304c\u898b\u3064\u304b\u3063\u305f\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// \u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\n\t\t\t\tdriver.findElement(By.linkText(\"HTML\u8981\u7d20\u540d\")).click();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n```\n\n##WebDriverWait\u30af\u30e9\u30b9\u3092\u4f7f\u3048\u3070\u3088\u304b\u3063\u305f\n\u3053\u306e\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u3044\u308b\u6700\u4e2d\u3001Selenium\u30e9\u30a4\u30d6\u30e9\u30ea\u306eWebDriverWait\u30af\u30e9\u30b9\u3092\u4f7f\u3048\u3070\u3001\u308f\u3056\u308f\u3056\u4e0a\u8a18\u306e\u3088\u3046\u306a\u51e6\u7406\u3092\u81ea\u4f5c\u3057\u306a\u304f\u3066\u3082\u6e08\u3080\u3053\u3068\u306b\u6c17\u4ed8\u3044\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\n```java:java\n// Wait\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\nWait<WebDriver> wait = new WebDriverWait(driver, 30);\n\n// \u5f85\u6a5f\u6761\u4ef6\u3092\u5b9f\u88c5\nExpectedCondition<Boolean> waitCondition= new ExpectedCondition<Boolean>() {\n\tpublic Boolean apply(WebDriver driver) {\n\t\tdriver.findElement(By.linkText(\"HTML\u8981\u7d20\u540d\")).click();\n\t\treturn driver.getTitle().contains(\"HTML\u8981\u7d20\u540d\");\n\t}\n};\n\n// \u6761\u4ef6\u3092\u6e80\u305f\u3059\u307e\u3067\u5f85\u3064\nwait.until(waitCondition);\n```\n\n\u3064\u307e\u308a\u3001\u8eca\u8f2a\u306e\u518d\u767a\u660e\u3092\u3059\u308b\u524d\u306b\u3001API\u3092\u78ba\u8a8d\u3057\u3088\u3046\u306d\u3068\u3044\u3046\u304a\u8a71\u3067\u3057\u305f\uff65\uff65\uff65\uff65\uff65\uff65\u3002\n\n", "tags": ["Java", "Selenium", "\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3"]}