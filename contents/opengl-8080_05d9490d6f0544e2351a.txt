{"context": "\n\nSpring Boot \u3068\u306f\n\nSpring \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u63d0\u4f9b\u3059\u308b\u69d8\u3005\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3084\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u3001\u624b\u3063\u53d6\u308a\u65e9\u304f\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u305f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3002\nDropwizard \u306e Spring \u7248\u307f\u305f\u3044\u306a\u306e\u3002\n\u30d3\u30eb\u30c9\u3059\u308b\u3068\u5358\u72ec\u306e jar \u30d5\u30a1\u30a4\u30eb\u304c\u3067\u304d\u3042\u304c\u308b\u3002\n\n\nWeb \u30a2\u30d7\u30ea\u306e\u5834\u5408\u306f\u3001\u7d44\u307f\u8fbc\u307f\u306e Tomcat \u304c\u8d77\u52d5\u3059\u308b\uff08Jetty \u3084 Undertow \u306b\u5207\u308a\u66ff\u3048\u53ef\uff09\u3002\nWeb \u30a2\u30d7\u30ea\u3067\u306a\u304f\u3001\u666e\u901a\u306e Java \u30d7\u30ed\u30b0\u30e9\u30e0\u3068\u3057\u3066\u3082\u52d5\u304b\u305b\u308b\u3002\n\n\nMaven \u3084 Gradle \u306a\u3069\u306e\u30d3\u30eb\u30c9\u30c4\u30fc\u30eb\u3092\u5229\u7528\u3059\u308b\uff08Ant \u3067\u3082\u3067\u304d\u306a\u304f\u306f\u306a\u3044\uff09\u3002\n\n\n\u4f7f\u7528\u3057\u305f\u3044\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u4f9d\u5b58\u95a2\u4fc2\u306b\u8ffd\u52a0\u3059\u308b\u3060\u3051\u3067\u3001\u7d50\u5408\u306b\u5fc5\u8981\u306a\u8a2d\u5b9a\u306a\u3069\u304c\u81ea\u52d5\u3067\u884c\u308f\u308c\u308b\u3002\n\n\n\n\n\u74b0\u5883\n\nJava\n\n1.8.0_45\n\n\nGradle\n\n2.3\n\n\nSpring Boot\n\n1.2.3\n\n\nHello World\n\n\u5b9f\u88c5\n\nbuild.gradle\nbuildscript {\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'org.springframework.boot:spring-boot-gradle-plugin:1.2.3.RELEASE'\n    }\n}\n\napply plugin: 'java'\napply plugin: 'spring-boot'\n\nsourceCompatibility = '1.8'\ntargetCompatibility = '1.8'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile 'org.springframework.boot:spring-boot-starter'\n}\n\njar.baseName = 'spring-boot-sample'\n\n\n\nMain.java\npackage sample.springboot;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\n\n@SpringBootApplication\npublic class Main {\n\n    public static void main(String[] args) {\n        try (ConfigurableApplicationContext ctx = SpringApplication.run(Main.class, args)) {\n            Main m = ctx.getBean(Main.class);\n            m.hello();\n        }\n    }\n\n    public void hello() {\n        System.out.println(\"Hello Spring Boot!!\");\n    }\n}\n\n\n\nGradle \u304b\u3089\u5b9f\u884c\n$ gradle bootRun\n:compileJava\n:processResources UP-TO-DATE\n:classes\n:findMainClass\n:bootRun\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v1.2.3.RELEASE)\n\n\uff08\u7565\uff09\n\nHello Spring Boot!!\n\n\uff08\u7565\uff09\n\n2015-04-29 12:45:26.542  INFO 5792 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Unregistering JMX-exposed beans on shutdown\n\nBUILD SUCCESSFUL\n\nTotal time: 4.639 secs\n\n\n\u30d3\u30eb\u30c9\u3057\u3066\u5b9f\u884c\n$ gradle build\n\n$ java -jar build/libs/spring-boot-sample.jar\n\n\uff08\u7565\uff09\n\nHello Spring Boot!!\n\n\uff08\u7565\uff09\n\n\n\u8aac\u660e\n\nbuild.gradle \u306e\u8a2d\u5b9a\nSpring Boot \u7528\u306e Gradle \u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u6700\u521d\u306b\u305d\u308c\u3092\u8aad\u307f\u8fbc\u3080\u3002\n\nbuild.gradle\nbuildscript {\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'org.springframework.boot:spring-boot-gradle-plugin:1.2.3.RELEASE'\n    }\n}\n\napply plugin: 'spring-boot'\n\n\n\u305d\u3057\u3066\u3001\u901a\u5e38\u306e Java \u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u308b\u3060\u3051\u306a\u3089\u3001 spring-boot-starter \u3092\u4f9d\u5b58\u95a2\u4fc2\u306b\u8ffd\u52a0\u3059\u308b\u3002\n\nbuild.gradle\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile 'org.springframework.boot:spring-boot-starter'\n}\n\n\n\nSpring Boot \u306e\u8d77\u52d5\nSpring Boot \u306e\u8d77\u52d5\u306b\u306f\u3001 SpringApplication \u30af\u30e9\u30b9\u3092\u4f7f\u3046\u3002\n\u6700\u3082\u5358\u7d14\u306a\u65b9\u6cd5\u304c\u3001 SpringApplication#run(Object, String...) \u3092\u4f7f\u3046\u65b9\u6cd5\u3002\n\nMain.java\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\n\n@SpringBootApplication\npublic class Main {\n\n    public static void main(String[] args) {\n        try (ConfigurableApplicationContext ctx = SpringApplication.run(Main.class, args)) {\n            Main m = ctx.getBean(Main.class);\n            m.hello();\n        }\n    }\n\n    public void hello() {\n        System.out.println(\"Hello Spring Boot!!\");\n    }\n}\n\n\n\n\nrun() \u30e1\u30bd\u30c3\u30c9\u306e\u7b2c\u4e00\u5f15\u6570\u306b\u306f\u3001 @EnableAutoConfiguration \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30af\u30e9\u30b9\u306e Class \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3059\u3002\n\n\n\nMain \u30af\u30e9\u30b9\u306f @SpringBootApplication \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u304c\u3001\u3053\u308c\u306f @Configuration, @EnableAutoConfiguration, @ComponentScan \u306e\uff13\u3064\u3067\u30af\u30e9\u30b9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u306e\u3068\u540c\u3058\u6271\u3044\u306b\u306a\u308b\u3002\n\n@Configuration \u306f\u3001 Spring \u306e\u8272\u3005\u306a\u8a2d\u5b9a\u3092 Java \u30b3\u30fc\u30c9\u4e0a\u3067\u884c\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3002\n\n\n\u6614\u306e Spring \u306f XML \u3067\u8a2d\u5b9a\u3092\u66f8\u3044\u3066\u3044\u305f\u304c\u3001\u4eca\u306f Java \u30b3\u30fc\u30c9\u4e0a\u3067\u8a2d\u5b9a\u3092\u884c\u3046\u306e\u304c\u4e3b\u6d41\u306b\u306a\u3063\u3066\u3044\u308b\u3063\u307d\u3044\u3002\n\n\n\n@EnableAutoConfiguration \u306f\u3001 Spring \u306e\u8a2d\u5b9a\u3092\u81ea\u52d5\u5316\u3059\u308b\u305f\u3081\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3002\n\n\n\u3053\u308c\u304c\u3042\u308b\u3053\u3068\u3067\u3001\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3059\u308b\u3060\u3051\u3067 Spring MVC \u306a\u3069\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8a2d\u5b9a\u8a18\u8ff0\u306a\u3057\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\n\n@ComponentScan \u306f\u3001 DI \u30b3\u30f3\u30c6\u30ca\u304c\u7ba1\u7406\u3059\u308b Bean \u3092\u81ea\u52d5\u767b\u9332\u3059\u308b\u305f\u3081\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3002\n\n\n\u3053\u308c\u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30af\u30e9\u30b9\u3092\u8d77\u70b9\u3068\u3057\u3066\u3001\u914d\u4e0b\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u518d\u5e30\u7684\u306b\u30b9\u30ad\u30e3\u30f3\u3057\u3066\u3001 @Component \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30af\u30e9\u30b9\u3092 Bean \u3068\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u306b\u767b\u9332\u3059\u308b\u3002\n\n\n\u3053\u306e\uff13\u3064\u306f\u3060\u3044\u305f\u3044\u4e00\u7dd2\u306b\u4f7f\u3046\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u3001 @SpringBootApplication \u3092\u4f7f\u3046\u3068\u5c11\u3057\u697d\u306b\u306a\u308b\u3002\n\n\n\u7b2c\u4e8c\u5f15\u6570\u306b\u306f\u3001\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306e\u5f15\u6570\u3092\u6e21\u3059\u3002\n\n\nGradle \u3067\u306e\u5b9f\u884c\u30fb\u30d3\u30eb\u30c9\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8d77\u52d5\u306f\u3001 spring-boot-gradle-plugin \u304c\u63d0\u4f9b\u3059\u308b bootRun \u30bf\u30b9\u30af\u3092\u4f7f\u7528\u3059\u308b\u3002\njar \u306e\u4f5c\u6210\u306f\u3001\u666e\u901a\u306b build \u30bf\u30b9\u30af\u3067 OK\u3002\n\u4f5c\u6210\u3057\u305f jar \u306f\u3001\u666e\u901a\u306b jar -jar <jar\u30d5\u30a1\u30a4\u30eb> \u3067\u5b9f\u884c\u3067\u304d\u308b\u3002\n\n\nJava \u30b3\u30fc\u30c9\u4e0a\u3067 Bean \u3092\u5b9a\u7fa9\u3059\u308b\nCDI \u3067\u8a00\u3046\u3068\u3053\u308d\u306e Provider \u7684\u306a\u3084\u3064\u3002\n\n\u57fa\u672c\n\nHoge.java\npackage sample.springboot;\n\npublic class Hoge {\n\n    private String name;\n\n    public Hoge(String name) {\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return \"Hoge [name=\" + name + \"]\";\n    }\n}\n\n\n\nMain.java\npackage sample.springboot;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\nimport org.springframework.context.annotation.Bean;\n\n@SpringBootApplication\npublic class Main {\n\n    public static void main(String[] args) {\n        try (ConfigurableApplicationContext ctx = SpringApplication.run(Main.class, args)) {\n            Hoge h = ctx.getBean(Hoge.class);\n            System.out.println(h);\n        }\n    }\n\n    @Bean\n    public Hoge getHoge() {\n        System.out.println(\"Main#getHoge()\");\n        return new Hoge(\"hoge\");\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\nMain#getHoge()\nHoge [name=hoge]\n\n\n\n\n@Bean \u3067\u30e1\u30bd\u30c3\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3068\u3001\u305d\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u901a\u3058\u3066 Bean \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u3053\u306e\u3088\u3046\u306a Bean \u3092\u5b9a\u7fa9\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u306f\u3001 @Configuration \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30af\u30e9\u30b9\u306b\u5ba3\u8a00\u3067\u304d\u308b\u3002\n\n\n\n@SpringBootApplication \u306f @Configuration \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u306e\u3068\u540c\u3058\u52b9\u679c\u304c\u3042\u308b\u3002\n\n\n\n\n@Configuration \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30af\u30e9\u30b9\u3092\u5225\u9014\u4f5c\u6210\u3059\u308b\n\nHogeProvider.java\npackage sample.springboot;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class HogeProvider {\n\n    @Bean\n    public Hoge getHoge() {\n        System.out.println(\"HogeProvider#getHoge()\");\n        return new Hoge(\"hoge provider\");\n    }\n}\n\n\n\nMain.java\npackage sample.springboot;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\n\n@SpringBootApplication\npublic class Main {\n\n    public static void main(String[] args) {\n        try (ConfigurableApplicationContext ctx = SpringApplication.run(Main.class, args)) {\n            Hoge h = ctx.getBean(Hoge.class);\n            System.out.println(h);\n        }\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\nHogeProvider#getHoge()\nHoge [name=hoge provider]\n\n\n\n\n@Configuration \u3067\u30af\u30e9\u30b9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3001 @Bean \u3067\u30e1\u30bd\u30c3\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308c\u3070\u3001\u4efb\u610f\u306e\u30af\u30e9\u30b9\u3067 Bean \u3092\u751f\u6210\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\n\nWeb \u30a2\u30d7\u30ea\u3092\u4f5c\u308b\n\nHello World\n\n\u5b9f\u88c5\n\nbuild.gradle\ndependencies {\n-   compile 'org.springframework.boot:spring-boot-starter'\n+   compile 'org.springframework.boot:spring-boot-starter-web'\n}\n\n\n\nMain.java\npackage sample.springboot;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class Main {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Main.class, args);\n    }\n}\n\n\n\nHelloController.java\npackage sample.springboot.web;\n\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"/hello\")\npublic class HelloController {\n\n    @RequestMapping(method=RequestMethod.GET)\n    public String hello() {\n        return \"Hello Spring MVC\";\n    }\n}\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\n\u8d77\u52d5\n$ gradle bootRun\n\uff08\u7565\uff09\n2015-04-29 18:29:29.317  INFO 5772 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat started on port(s): 8080 (http)\n2015-04-29 18:29:29.318  INFO 5772 --- [           main] sample.springboot.Main                   : Started Main in 2.244 seconds (JVM running for 2.531)\n> Building 80% > :bootRun\n\n\n\ncurl\u3067\u30c6\u30b9\u30c8\n$ curl http://localhost:8080/hello\nHello Spring MVC\n\n\n\n\u8aac\u660e\n\nWeb \u30a2\u30d7\u30ea\u7528\u306e\u4f9d\u5b58\u95a2\u4fc2\n\nbuild.gradle\ndependencies {\n-   compile 'org.springframework.boot:spring-boot-starter'\n+   compile 'org.springframework.boot:spring-boot-starter-web'\n}\n\n\n\nWeb \u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u5834\u5408\u306f\u3001 spring-boot-starter-web \u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u7528\u3059\u308b\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001 Spring MVC \u3092\u4f7f\u3063\u3066 Web \u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u3053\u3068\u306b\u306a\u308b\u3002\n\n\n\u8d77\u52d5\u65b9\u6cd5\u306e\u5909\u66f4\n\nMain.java\n    public static void main(String[] args) {\n-       try (ConfigurableApplicationContext ctx = SpringApplication.run(Main.class, args)) {\n-           ....\n-       }\n+       SpringApplication.run(Main.class, args);\n\n\n\n\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\u5f8c\u306b\u30b3\u30f3\u30c6\u30ca\u304c\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3057\u3066\u3057\u307e\u3046\u306e\u3067\u3001try-with-resources \u6587\u306f\u4f7f\u308f\u306a\u3044\u3088\u3046\u306b\u5909\u66f4\u3059\u308b\u3002\n\n\nSpring MVC \u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30af\u30e9\u30b9\n\nHelloController.java\n@RestController\n@RequestMapping(\"/hello\")\npublic class HelloController {\n\n    @RequestMapping(method=RequestMethod.GET)\n    public String hello() {\n        return \"Hello Spring MVC\";\n    }\n}\n\n\n\nWeb API \u306e\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u3068\u306a\u308b\u30af\u30e9\u30b9\u3092\u4f5c\u308b\u5834\u5408\u306f\u3001 @RestController \u3067\u30af\u30e9\u30b9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\n\nWeb API \u3067\u306f\u306a\u304f\u3001 MVC \u306e C \u3068\u306a\u308b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306b\u3057\u305f\u3044\u5834\u5408\u306f @Controller \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\uff08\u8a73\u7d30\u5f8c\u8ff0\uff09\u3002\n\n\n\n@RequestMapping \u3067\u3001\u30d1\u30b9\u3084 HTTP \u30e1\u30bd\u30c3\u30c9\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u3059\u308b\uff08\u3060\u3044\u305f\u3044 JAX-RS \u3068\u540c\u3058\u30ce\u30ea\uff09\u3002\n\n\n\u30b5\u30fc\u30d0\u30fc\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5909\u66f4\u3059\u308b\n\napplication.properties\nserver.port=1598\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n$ gradle bootRun\n\uff08\u7565\uff09\n\n2015-05-02 00:09:11.201  INFO 5968 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat started on port(s): 1598 (http)\n\n\uff08\u7565\uff09\n\n\n\n\nserver.port \u3067\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\napplication.properties \u306b\u3064\u3044\u3066\u306e\u8aac\u660e\u306f \u3053\u3061\u3089\u3002\n\u4ed6\u306b\u3082\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5909\u66f4\u304c\u3067\u304d\u308b\u3002\n\n\n\nserver.address \uff1a\u30ea\u30b9\u30a2\u30f3\u30c9\u30ec\u30b9\uff08localhost \u306b\u3059\u308c\u3070\u3001\u30ed\u30fc\u30ab\u30eb\u304b\u3089\u3057\u304b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u304f\u306a\u308b\uff09\u3002\n\nserver.sessionTimeout \uff1a\u30bb\u30c3\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u6642\u9593\u3002\n\n\n\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30de\u30c3\u30d4\u30f3\u30b0\n\nHoge.java\npackage sample.springboot.web;\n\npublic class Hoge {\n\n    public int id;\n    public String value;\n\n    @Override\n    public String toString() {\n        return \"Hoge [id=\" + id + \", value=\" + value + \"]\";\n    }\n}\n\n\n\nHelloController.java\npackage sample.springboot.web;\n\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"/hello\")\npublic class HelloController {\n\n    @RequestMapping(method=RequestMethod.POST)\n    public Hoge hello(@RequestBody Hoge param) {\n        System.out.println(param);\n\n        Hoge hoge = new Hoge();\n        hoge.id = 20;\n        hoge.value = \"Response\";\n\n        return hoge;\n    }\n}\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n$ curl -H \"Content-type: application/json\" -X POST -d '{\"id\": 10, \"value\": \"Request\"}' http://localhost:8080/hello\n{\"id\":20,\"value\":\"Response\"}\n\n\n\n\u30b5\u30fc\u30d0\u30fc\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\nHoge [id=10, value=Request]\n\n\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u30fb\u30ec\u30b9\u30dd\u30f3\u30b9\u3068\u3082\u306b JSON \u306b\u3088\u308b\u30de\u30c3\u30d4\u30f3\u30b0\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\u30de\u30c3\u30d4\u30f3\u30b0\u306f Jackson \u304c\u3084\u3063\u3066\u3044\u308b\uff08\u306a\u306e\u3067\u3001\u30de\u30c3\u30d4\u30f3\u30b0\u306e\u8abf\u6574\u306f Jackson \u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u3067\u304d\u308b\uff09\u3002\n\n\nSpring MVC \u306e\u7c21\u5358\u306a\u4f7f\u3044\u65b9\u30e1\u30e2\n\nURL \u306e\u30de\u30c3\u30d4\u30f3\u30b0\n\nHelloController.java\npackage sample.springboot.web;\n\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"/hello\")\npublic class HelloController {\n\n    @RequestMapping(method=RequestMethod.GET)\n    public String getMethod() {\n        return \"get\";\n    }\n\n    @RequestMapping(method=RequestMethod.POST)\n    public String postMethod1() {\n        return \"post\";\n    }\n\n    @RequestMapping(value=\"/hey\", method=RequestMethod.POST)\n    public String postMethod2() {\n        return \"hey post\";\n    }\n}\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n$ curl http://localhost:8080/hello\nget\n\n$ curl http://localhost:8080/hello -X POST\npost\n\n$ curl http://localhost:8080/hello/hey -X POST\nhey post\n\n\n\n\n@RequestMapping \u3067\u30e1\u30bd\u30c3\u30c9\uff08\u30af\u30e9\u30b9\uff09\u3068\u30d1\u30b9\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3002\n\nvalue \u5c5e\u6027\u306b\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u3002\n\nmethod \u5c5e\u6027\u306b\u3001 HTTP \u30e1\u30bd\u30c3\u30c9\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\u30d1\u30b9\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u53d6\u5f97\n\nHelloController.java\npackage sample.springboot.web;\n\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"/hello\")\npublic class HelloController {\n\n    @RequestMapping(value=\"/{id}/{name}\", method=RequestMethod.GET)\n    public void getMethod(@PathVariable int id, @PathVariable String name) {\n        System.out.println(\"id=\" + id + \", name=\" + name);\n    }\n}\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n$ curl http://localhost:8080/hello/100/hoge\n\n\n\n\u30b5\u30fc\u30d0\u30fc\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\nid=100, name=hoge\n\n\n\n\u30d1\u30b9\u306e\u5b9a\u7fa9\u306b\u6ce2\u62ec\u5f27\uff08{}\uff09\u3067\u62ec\u3063\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5b9a\u7fa9\u3057\u3001\u30e1\u30bd\u30c3\u30c9\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u540c\u540d\u306e\u5f15\u6570\u3092\u5b9a\u7fa9\u3057\u3066 @PathVariable \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\n\n\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u53d6\u5f97\n\nHelloController.java\npackage sample.springboot.web;\n\nimport java.util.Map;\n\nimport org.springframework.util.MultiValueMap;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"/hello\")\npublic class HelloController {\n\n    @RequestMapping(method=RequestMethod.GET)\n    public void getMethod(\n            @RequestParam String id,\n            @RequestParam Map<String, String> queryParameters,\n            @RequestParam MultiValueMap<String, String> multiMap) {\n\n        System.out.println(\"id=\" + id);\n        System.out.println(queryParameters);\n        System.out.println(multiMap);\n    }\n}\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n$ curl \"http://localhost:8080/hello?id=100&name=hoge&name=fuga\"\n\n\n\n\u30b5\u30fc\u30d0\u30fc\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\nid=100\n{id=100, name=hoge}\n{id=[100], name=[hoge, fuga]}\n\n\n\n\n@RequestParam \u3067\u30e1\u30bd\u30c3\u30c9\u306e\u5f15\u6570\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002\n\u5f15\u6570\u306e\u578b\u304c Map \u306e\u5834\u5408\u306f\u3001\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u60c5\u5831\u3092 Map \u5f62\u5f0f\u3067\u53d6\u5f97\u3067\u304d\u308b\u3002\n\uff11\u3064\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u8907\u6570\u306e\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001 Spring \u304c\u63d0\u4f9b\u3059\u308b MultiValueMap \u3067\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u30d8\u30c3\u30c0\u30fc\u3092\u53d6\u5f97\u3059\u308b\n\nHelloController.java\npackage sample.springboot.web;\n\nimport org.springframework.web.bind.annotation.RequestHeader;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"/hello\")\npublic class HelloController {\n\n    @RequestMapping(method=RequestMethod.GET)\n    public void getMethod(@RequestHeader(\"Test-Header\") String value) {\n        System.out.println(\"Test-Header=\" + value);\n    }\n}\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n$ curl -H \"Test-Header: hoge\" http://localhost:8080/hello\n\n\n\n\u30b5\u30fc\u30d0\u30fc\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\nTest-Header=hoge\n\n\n\n\n@RequestHeader \u3067\u30d8\u30c3\u30c0\u30fc\u60c5\u5831\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u306e\u5024\u3092\u53d6\u5f97\u3059\u308b\n\nHelloController.java\npackage sample.springboot.web;\n\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"/hello\")\npublic class HelloController {\n\n    @RequestMapping(method=RequestMethod.POST)\n    public void getMethod(@RequestBody String body) {\n        System.out.println(\"body=\" + body);\n    }\n}\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n$ curl http://localhost:8080/hello -X POST -d \"Request Body\"\n\n\n\n\u30b5\u30fc\u30d0\u30fc\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\nbody=Request+Body=\n\n\n\n\n@RequestBody \u3067\u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u6307\u5b9a\u3059\u308b\npackage sample.springboot.web;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.ResponseStatus;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"/hello\")\npublic class HelloController {\n\n    @RequestMapping(method=RequestMethod.GET)\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\n    public void getMethod() {\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n$ curl http://localhost:8080/hello -v\n\uff08\u7565\uff09\n\n< HTTP/1.1 400 Bad Request\n* Server Apache-Coyote/1.1 is not blacklisted\n< Server: Apache-Coyote/1.1\n< Content-Length: 0\n< Date: Wed, 29 Apr 2015 11:50:08 GMT\n< Connection: close\n\n\uff08\u7565\uff09\n\n\n\n\u30e1\u30bd\u30c3\u30c9\u3092 @ResponseStatus \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3001 value \u306b\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u305d\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\u4f55\u3082\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f 200 OK \u304c\u8fd4\u3055\u308c\u308b\u3002\n\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u8fd4\u3057\u65b9\u8272\u3005\nJava - Spring MVC\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3067\u306e\u623b\u308a\u5024\u3044\u308d\u3044\u308d - Qiita\n@tag1216 \u3055\u3093\u306e\u4e0a\u8a18\u30da\u30fc\u30b8\u306b\u3001\u5206\u304b\u308a\u3084\u3059\u304f\u307e\u3068\u3081\u3089\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\n\u4f8b\u5916\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f8b\u5916\u304c\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3055\u308c\u308b\u3002\n\nREST \u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u5834\u5408\n\n\n\u30b9\u30ed\u30fc\u3055\u308c\u305f\u4f8b\u5916\u306e\u60c5\u5831\u3084\u3001 HTTP \u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u4fdd\u6301\u3057\u305f JSON \u6587\u5b57\u5217\u3002\n\n\n\n{\"timestamp\":1430484452755,\"status\":500,\"error\":\"Internal Server Error\",\"exception\":\"sample.springboot.web.MyException\",\"message\":\"No message available\",\"path\":\"/hello\"}\n\n\n\u30d6\u30e9\u30a6\u30b6\u306e\u5834\u5408\n\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a8\u30e9\u30fc\u30da\u30fc\u30b8\uff08Whilelabel Error Page\uff09\n\n\n\n\n\n\u7279\u5b9a\u306e\u4f8b\u5916\u304c\u30b9\u30ed\u30fc\u3055\u308c\u305f\u3068\u304d\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u6307\u5b9a\u3059\u308b\n\nMyException.java\npackage sample.springboot.web;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.ResponseStatus;\n\n@ResponseStatus(HttpStatus.BAD_REQUEST)\npublic class MyException extends RuntimeException {\n    private static final long serialVersionUID = 1L;\n\n    public MyException(String msg) {\n        super(msg);\n    }\n}\n\n\n\nWebApiController.java\npackage sample.springboot.web;\n\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"/api\")\npublic class WebApiController {\n\n    @RequestMapping(method=RequestMethod.GET)\n    public void method1() {\n        throw new MyException(\"test exception\");\n    }\n}\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n$ curl http://localhost:8080/api\n{\"timestamp\":1430489386562,\"status\":400,\"error\":\"Bad Request\",\"exception\":\"sample.springboot.web.MyException\",\"message\":\"test exception\",\"path\":\"/api\"}\n\n\n\n\u81ea\u4f5c\u306e\u4f8b\u5916\u30af\u30e9\u30b9\u3092 @ResponseStatus \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u306e\u4f8b\u5916\u304c\u30b9\u30ed\u30fc\u3055\u308c\u305f\u3068\u304d\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3057\u305f\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a8\u30e9\u30fc\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u3002\n\n\n\n\u307b\u307c\u5168\u3066\u306e\u4f8b\u5916\u3092\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3059\u308b\n\nMyExceptionResolver.java\npackage sample.springboot.web;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.servlet.HandlerExceptionResolver;\nimport org.springframework.web.servlet.ModelAndView;\n\n@Component\npublic class MyExceptionResolver implements HandlerExceptionResolver {\n\n    @Override\n    public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) {\n        System.out.println(ex.getClass() + \" : \" + ex.getMessage());\n\n        ModelAndView mv = new ModelAndView();\n        mv.setViewName(\"my-error\");\n\n        return mv;\n    }\n}\n\n\n\nsrc/main/resources/templates/my-error.html\n<h1>My Error Page</h1>\n\n\n\nWebApiController.java\npackage sample.springboot.web;\n\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"/api\")\npublic class WebApiController {\n\n    @RequestMapping(method=RequestMethod.GET)\n    public void method1() {\n        throw new MyException(\"test exception\");\n    }\n\n    @RequestMapping(value=\"/null\", method=RequestMethod.GET)\n    public void method2() {\n        throw new NullPointerException(\"test exception\");\n    }\n}\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n$ curl http://localhost:8080/api\n{\"timestamp\":1430490625809,\"status\":400,\"error\":\"Bad Request\",\"exception\":\"sample.springboot.web.MyException\",\"message\":\"test exception\",\"path\":\"/api\"}\n\n$ curl http://localhost:8080/api/null\n<h1>My Error Page</h1>\n\n\n\n\u30b5\u30fc\u30d0\u30fc\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\nclass java.lang.NullPointerException : test exception\n\n\n\n\nHandlerExceptionResolver \u3092\u5b9f\u88c5\u3057\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3001 @Component \u3067\u30b3\u30f3\u30c6\u30ca\u306b\u767b\u9332\u3059\u308b\u3002\n\u3059\u308b\u3068\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3067\u4f8b\u5916\u304c\u767a\u751f\u3059\u308b\u3068\u767b\u9332\u3057\u305f\u30af\u30e9\u30b9\u306e resolveException() \u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3070\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\n\u305f\u3060\u3057\u3001 @ResponseStatus \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30af\u30e9\u30b9\u304c\u30b9\u30ed\u30fc\u3055\u308c\u305f\u5834\u5408\u306f\u547c\u3070\u308c\u306a\u3044\u3002\n\n\n\nresolveException() \u30e1\u30bd\u30c3\u30c9\u306f ModelAndView \u3092\u8fd4\u3059\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u4efb\u610f\u306e\u30da\u30fc\u30b8\u3092\u8868\u793a\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\nWeb API \u306e\u30a2\u30af\u30bb\u30b9\u306e\u5834\u5408\u306f json \u3067\u8fd4\u3057\u305f\u3044\n\nMyExceptionResolver.java\npackage sample.springboot.web;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.method.HandlerMethod;\nimport org.springframework.web.servlet.HandlerExceptionResolver;\nimport org.springframework.web.servlet.ModelAndView;\n\n@Component\npublic class MyExceptionResolver implements HandlerExceptionResolver {\n\n    @Override\n    public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) {\n        if (isRestController(handler)) {\n            return null;\n        }\n\n        ModelAndView mv = new ModelAndView();\n        mv.setViewName(\"my-error\");\n\n        return mv;\n    }\n\n    private boolean isRestController(Object handler) {\n        if (handler instanceof HandlerMethod) {\n            HandlerMethod method = (HandlerMethod)handler;\n\n            return method.getMethod().getDeclaringClass().isAnnotationPresent(RestController.class);\n        }\n\n        return false;\n    }\n}\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n$ curl http://localhost:8080/api\n{\"timestamp\":1430490748092,\"status\":400,\"error\":\"Bad Request\",\"exception\":\"sample.springboot.web.MyException\",\"message\":\"test exception\",\"path\":\"/api\"}\n\n$ curl http://localhost:8080/api/null\n{\"timestamp\":1430490749586,\"status\":500,\"error\":\"Internal Server Error\",\"exception\":\"java.lang.NullPointerException\",\"message\":\"test exception\",\"path\":\"/api/null\"}\n\n\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u304c @RestController \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001 resolveException() \u3067 null \u3092\u8fd4\u3059\u3088\u3046\u306b\u3059\u308b\u3002\n\u3059\u308b\u3068\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u65b9\u6cd5\u3067\u51e6\u7406\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c curl \u306e\u3088\u3046\u306a\u975e\u30d6\u30e9\u30a6\u30b6\u306a\u3089 json \u306b\u306a\u308b\uff09\u3002\n\n\n\u30d6\u30e9\u30a6\u30b6\u3067\u30a2\u30af\u30bb\u30b9\u3057\u305f\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a8\u30e9\u30fc\u30da\u30fc\u30b8\uff08Whitelabel Error Page\uff09\u304c\u8868\u793a\u3055\u308c\u308b\u3002\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u753b\u9762\u9077\u79fb\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5834\u5408\u306f\u3001 @Controller \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30af\u30e9\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3088\u3046\u306b\u3057\u3001 resolveException() \u3067\u9069\u5207\u306a\u30a8\u30e9\u30fc\u30da\u30fc\u30b8\u306b\u98db\u3070\u3057\u3066\u3042\u3052\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n\n\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u5358\u4f4d\u3067\u4f8b\u5916\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3092\u5b9a\u7fa9\u3059\u308b\n\nWebApiController.java\npackage sample.springboot.web;\n\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"/api\")\npublic class WebApiController {\n\n    @RequestMapping(method=RequestMethod.GET)\n    public void method1() {\n        throw new MyException(\"test exception\");\n    }\n\n    @RequestMapping(value=\"/null\", method=RequestMethod.GET)\n    public void method2() {\n        throw new NullPointerException(\"test exception\");\n    }\n\n    @ExceptionHandler(NullPointerException.class)\n    public String handling(NullPointerException e) {\n        return \"{\\\"message\\\":\\\"\" + e.getMessage() + \"\\\"}\";\n    }\n}\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n$ curl http://localhost:8080/api/null\n{\"message\":\"test exception\"}\n\n\n\n\n@ExceptionHandler \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u3068\u3001\u305d\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u5185\u3067\u3060\u3051\u6709\u52b9\u306a\u4f8b\u5916\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u304c\u3067\u304d\u308b\u3002\n\n@ExceptionHandler \u306e value \u306b\u306f\u3001\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3057\u305f\u3044\u4f8b\u5916\u306e Class \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3059\u3002\n\n\n\u9759\u7684\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\n\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n|-build.gradle\n`-src/main/resources/\n  |-static/\n  | `-static.html\n  |-public/\n  | `-public.html\n  |-resources/\n  | `-resources.html\n  `-META-INF/resources/\n    `-m-resourceshtml\n\n\n\u5404 HTML \u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u8eab\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u540d\u304c\u66f8\u304b\u308c\u305f\u3060\u3051\u306e\u30d7\u30ec\u30fc\u30f3\u30c6\u30ad\u30b9\u30c8\u3002\n\u3053\u306e\u72b6\u614b\u3067 Spring Boot \u3092\u8d77\u52d5\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n$ curl http://localhost:8080/static.html\nstatic.html\n\n$ curl http://localhost:8080/public.html\npublic.html\n\n$ curl http://localhost:8080/resources.html\nresources.html\n\n$ curl http://localhost:8080/m-resources.html\nm-resources.html\n\n\n\u30af\u30e9\u30b9\u30d1\u30b9\u4ee5\u4e0b\u306e\u3001\u6b21\u306e\u30d5\u30a9\u30eb\u30c0\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308b\u3068\u3001\u9759\u7684\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\n\n\nstatic\npublic\nresources\nMETA-INF/resources\n\n\n\n\nWebJars \u3092\u5229\u7528\u3059\u308b\n\nWebJars \u3068\u306f\njQuery \u3068\u304b Bootstrap \u306e\u3088\u3046\u306a\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092 jar \u306b\u56fa\u3081\u3066\u3001 Java \u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u540c\u3058\u8981\u9818\u3067 Maven \u3084 Gradle \u3067\u4f9d\u5b58\u7ba1\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u3002\nWebJars - Web Libraries in Jars\n\njQuery UI \u3092\u5165\u308c\u3066\u307f\u308b\n\u3053\u3053 \u3067\u3001\u5229\u7528\u3067\u304d\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8abf\u3079\u3089\u308c\u308b\u3002\n\nbuild.gradle\ndependencies {\n    compile 'org.springframework.boot:spring-boot-starter-web'\n+   compile 'org.webjars:jquery-ui:1.11.4'\n}\n\n\n\nsrc/main/resources/static/index.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\" />\n    <title>jQuery UI by WebJars</title>\n\n    <link rel=\"stylesheet\" href=\"/webjars/jquery-ui/1.11.4/jquery-ui.min.css\" />\n\n    <script src=\"/webjars/jquery/1.11.1/jquery.min.js\"></script>\n    <script src=\"/webjars/jquery-ui/1.11.4/jquery-ui.min.js\"></script>\n    <script>\n    $(function() {\n        $('button')\n          .button()\n          .on('click', function() {\n              alert('Hello WebJars!!');\n          });\n    });\n    </script>\n  </head>\n  <body>\n    <button>Hello</button>\n  </body>\n</html>\n\n\n\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3057\u3066\u3001\u30d6\u30e9\u30a6\u30b6\u3067 http://localhost:8080/ \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n\n\nWebJars \u3067\u8ffd\u52a0\u3057\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u3001 webjars/ \u4ee5\u4e0b\u306e\u30d1\u30b9\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\u306f\u3001 jar \u306e\u4e2d\u3092\u898b\u308b\u304b\u524d\u8ff0\u306e\u30da\u30fc\u30b8\u306e\u53f3\u7aef\u306b\u3042\u308b Files \u306e\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308c\u3070\u5206\u304b\u308b\u3002\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u3092\u5229\u7528\u3059\u308b\nSpring Boot \u7684\u306b\u306f JSP \u306f\u304a\u3059\u3059\u3081\u3057\u306a\u3044\u3089\u3057\u3044\u3002\n\u306f\u3058\u3081\u3066\u306eSpring Boot \u3067\u3082\u7d39\u4ecb\u3055\u308c\u3066\u308b Thymeleaf \u3092\u4f7f\u3063\u3066\u307f\u308b\u3002\n\nHello World\n\n\u5b9f\u88c5\n\nbuild.gradle\ndependencies {\n    compile 'org.springframework.boot:spring-boot-starter-web'\n+   compile 'org.springframework.boot:spring-boot-starter-thymeleaf'\n    compile 'org.webjars:jquery-ui:1.11.4'\n}\n\n\n\nHelloController.java\npackage sample.springboot.web;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\n\n@Controller\n@RequestMapping(\"/hello\")\npublic class HelloController {\n\n    @RequestMapping(method=RequestMethod.GET)\n    public String hello() {\n        return \"hello\";\n    }\n}\n\n\n\nsrc/main/resources/templates/hello.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\" />\n    <title>Hello Thymeleaf</title>\n  </head>\n  <body>\n    <h1>Hello Thymeleaf</h1>\n  </body>\n</html>\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\u30d6\u30e9\u30a6\u30b6\u3067 http://localhost:8080/hello \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n\n\u8aac\u660e\n\n\u4f9d\u5b58\u95a2\u4fc2\u306e\u8ffd\u52a0\n\nbuild.gradle\ndependencies {\n    compile 'org.springframework.boot:spring-boot-starter-web'\n+   compile 'org.springframework.boot:spring-boot-starter-thymeleaf'\n    compile 'org.webjars:jquery-ui:1.11.4'\n}\n\n\n\nThymeleaf \u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306e\u5b9f\u88c5\n@Controller\n@RequestMapping(\"/hello\")\npublic class HelloController {\n\n    @RequestMapping(method=RequestMethod.GET)\n    public String hello() {\n        return \"hello\";\n    }\n}\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8fd4\u3059\u5834\u5408\u306f\u3001 @RestController \u3067\u306f\u306a\u304f @Controller \u3067\u30af\u30e9\u30b9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\u30e1\u30bd\u30c3\u30c9\u306e\u623b\u308a\u5024\u306b\u3001\u8868\u793a\u3059\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u30af\u30e9\u30b9\u30d1\u30b9\u4e0a\u306e templates \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u4e0b\u306b\u914d\u7f6e\u3059\u308b\u3002\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u8fd4\u3057\u305f\u6587\u5b57\u5217\u306f\u3001\u3053\u306e templates \u30d1\u30c3\u30b1\u30fc\u30b8\u304b\u3089\u306e\u76f8\u5bfe\u30d1\u30b9\u306b\u306a\u308b\uff08\u62e1\u5f35\u5b50\u306f\u7701\u7565\u53ef\uff09\u3002\n\n\n\n\n\u753b\u9762\u306b\u5024\u3092\u57cb\u3081\u8fbc\u3080\n\nHoge.java\npackage sample.springboot.web;\n\npublic class Hoge {\n\n    public int id;\n    public String value;\n\n    @Override\n    public String toString() {\n        return \"Hoge [id=\" + id + \", value=\" + value + \"]\";\n    }\n}\n\n\n\nHelloController.java\npackage sample.springboot.web;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\n\n@Controller\n@RequestMapping(\"/hello\")\npublic class HelloController {\n\n    @RequestMapping(method=RequestMethod.GET)\n    public String hello(Model model) {\n        Hoge hoge = new Hoge();\n        hoge.id = 10;\n        hoge.value = \"hoge\";\n\n        model.addAttribute(\"myData\", hoge);\n\n        return \"hello\";\n    }\n}\n\n\n\nhello.html\n<!DOCTYPE html>\n<html xmlns:th=\"http://www.thymeleaf.org\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <title>Hello Thymeleaf</title>\n  </head>\n  <body>\n    <dl>\n      <dt>id</dt>\n      <dd th:text=\"${myData.id}\"></dd>\n\n      <dt>value</dt>\n      <dd th:text=\"${myData.value}\"></dd>\n    </dl>\n  </body>\n</html>\n\n\n\u30d6\u30e9\u30a6\u30b6\u3067 http://localhost:8080/hello \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306e\u30e1\u30bd\u30c3\u30c9\u3067 Model \u3092\u5f15\u6570\u306b\u53d7\u3051\u53d6\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\u3053\u306e Model \u306e addAttribute() \u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3063\u3066\u3001\u753b\u9762\u3067\u51fa\u529b\u3057\u305f\u3044\u60c5\u5831\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\u753b\u9762\u5074\u3067\u306f\u3001\u307e\u305a Thymeleaf \u7528\u306e\u540d\u524d\u7a7a\u9593\u3092\u5b9a\u7fa9\u3059\u308b\uff08xmlns:th\uff09\n\n\n\nth:text \u5c5e\u6027\u3067\u3001\u6307\u5b9a\u3057\u305f\u5024\u3092\u30c6\u30ad\u30b9\u30c8\u3068\u3057\u3066\u51fa\u529b\u3059\u308b\u3002\n\nth:text \u306e\u5024\u306b\u306f\u3001 ${...} \u306e\u3088\u3046\u306b EL \u5f0f\u3063\u307d\u304f\u51fa\u529b\u3059\u308b\u5024\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\n\n\u7e70\u308a\u8fd4\u3057\u51fa\u529b\n\nHelloController.java\npackage sample.springboot.web;\n\nimport java.util.Arrays;\nimport java.util.List;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\n\n@Controller\n@RequestMapping(\"/hello\")\npublic class HelloController {\n\n    @RequestMapping(method=RequestMethod.GET)\n    public String hello(Model model) {\n        List<Hoge> list = Arrays.asList(\n                            new Hoge() {{\n                                id = 10;\n                                value = \"hoge\";\n                            }},\n                            new Hoge() {{\n                                id = 20;\n                                value = \"fuga\";\n                            }},\n                            new Hoge() {{\n                                id = 30;\n                                value = \"piyo\";\n                            }});\n\n        model.addAttribute(\"hogeList\", list);\n\n        return \"hello\";\n    }\n}\n\n\n\nhello.html\n<!DOCTYPE html>\n<html xmlns:th=\"http://www.thymeleaf.org\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <title>Hello Thymeleaf</title>\n  </head>\n  <body>\n    <dl th:each=\"hoge : ${hogeList}\">\n      <dt>id</dt>\n      <dd th:text=\"${hoge.id}\"></dd>\n\n      <dt>value</dt>\n      <dd th:text=\"${hoge.value}\"></dd>\n    </dl>\n  </body>\n</html>\n\n\n\n\n\nth:each \u3067\u3001\u6307\u5b9a\u3057\u305f\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u7e70\u308a\u8fd4\u3057\u51e6\u7406\u3067\u304d\u308b\u3002\n\n\n\u305d\u306e\u4ed6\u306e\u4f7f\u3044\u65b9\n\u3053\u3053\u306b\u66f8\u3044\u3066\u305f\u3089\u30ad\u30ea\u304c\u306a\u3044\u306e\u3067\u3001 \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u3092\u53c2\u7167\u3002\n\u6c17\u304c\u5411\u3044\u305f\u3089\u5225\u9014\u307e\u3068\u3081\u308b\u3002\n\n\u30db\u30c3\u30c8\u30c7\u30d7\u30ed\u30a4\n\nbuild.gradle\nbuildscript {\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'org.springframework.boot:spring-boot-gradle-plugin:1.2.3.RELEASE'\n+       classpath 'org.springframework:springloaded:1.2.1.RELEASE'\n    }\n}\n\napply plugin: 'java'\napply plugin: 'spring-boot'\n\nsourceCompatibility = '1.8'\ntargetCompatibility = '1.8'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    compile 'org.springframework.boot:spring-boot-starter-web'\n}\n\njar.baseName = 'spring-boot-sample'\n\n\nbuildscript \u306e\u4f9d\u5b58\u95a2\u4fc2\u306b org.springframework:springloaded:1.2.1.RELEASE \u3092\u8ffd\u52a0\u3059\u308b\u3002\n\u3042\u3068\u306f\u3001\u666e\u901a\u306b gradle bootRun \u3059\u308c\u3070\u3001\u30db\u30c3\u30c8\u30c7\u30d7\u30ed\u30a4\u304c\u6709\u52b9\u306b\u306a\u308b\u3002\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u306b Thymeleaf \u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u6a5f\u80fd\u3092\u30aa\u30d5\u306b\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308b\u3002\n\napplication.properties\nspring.thymeleaf.cache=false\n\n\nThymeleaf \u4ee5\u5916\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001 \u3053\u306e\u30da\u30fc\u30b8 \u3092\u53c2\u7167\u3002\n\nIntelliJ IDEA \u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\nbuild.gradle \u306b\u4ee5\u4e0b\u3092\u8ffd\u8a18\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\nbuild.gradle\napply plugin: 'idea'\n\nidea {\n    module {\n        inheritOutputDirs = false\n        outputDir = file(\"$buildDir/classes/main/\")\n    }\n}\n\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u3001 IlleliJ \u304c\u30b3\u30f3\u30d1\u30a4\u30eb\u7d50\u679c\u3092\u51fa\u529b\u3059\u308b\u5148\u304c Gradle \u306e\u51fa\u529b\u5148\u3068\u7570\u306a\u308b\u305f\u3081\u30d5\u30a1\u30a4\u30eb\u306e\u76e3\u8996\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u3089\u3057\u304f\u3001\u305d\u306e\u3078\u3093\u3092\u5909\u66f4\u3057\u3066\u3044\u308b\u3089\u3057\u3044\u3002\n\u53c2\u8003\uff1a80.\u00a0Hot swapping\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30a2\u30af\u30bb\u30b9\n\nHello World\n\nbuild.gradle\ndependencies {\n    compile 'org.hsqldb:hsqldb'\n    compile 'org.springframework.boot:spring-boot-starter-jdbc'\n}\n\n\n\nMain.java\npackage sample.springboot;\n\nimport java.util.List;\nimport java.util.Map;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\nimport org.springframework.jdbc.core.JdbcTemplate;\n\n@SpringBootApplication\npublic class Main {\n\n    public static void main(String[] args) {\n        try (ConfigurableApplicationContext ctx = SpringApplication.run(Main.class, args)) {\n            Main m = ctx.getBean(Main.class);\n            m.method();\n        }\n    }\n\n    @Autowired\n    private JdbcTemplate jdbc;\n\n    public void method() {\n        this.jdbc.execute(\"CREATE TABLE TEST_TABLE (ID INTEGER NOT NULL IDENTITY, VALUE VARCHAR(256))\");\n\n        this.jdbc.update(\"INSERT INTO TEST_TABLE (VALUE) VALUES (?)\", \"hoge\");\n        this.jdbc.update(\"INSERT INTO TEST_TABLE (VALUE) VALUES (?)\", \"fuga\");\n        this.jdbc.update(\"INSERT INTO TEST_TABLE (VALUE) VALUES (?)\", \"piyo\");\n\n        List<Map<String, Object>> list = this.jdbc.queryForList(\"SELECT * FROM TEST_TABLE\");\n        list.forEach(System.out::println);\n    }\n}\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n{ID=0, VALUE=hoge}\n{ID=1, VALUE=fuga}\n{ID=2, VALUE=piyo}\n\n\n\n\u4f9d\u5b58\u95a2\u4fc2\u306b spring-boot-starter-jdbc \u3068\u3001\u4f7f\u7528\u3059\u308b DB \uff08org.hsqldb:hsqldb\uff09\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\u3059\u308b\u3068\u3001\u6307\u5b9a\u3057\u305f DB \u3092\u30aa\u30f3\u30e1\u30e2\u30ea\u3067\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u30aa\u30f3\u30e1\u30e2\u30ea\u306a\u306e\u3067\u3001 JVM \u304c\u505c\u6b62\u3059\u308b\u3068\u30c7\u30fc\u30bf\u306f\u5931\u308f\u308c\u308b\u3002\nHSQLDB \u306e\u4ed6\u306b H2 \u3068 Derby \u3092\u540c\u3058\u304f\u7d44\u307f\u8fbc\u307f\u3067\u5229\u7528\u3067\u304d\u308b\u3002\n\n\n\u30c7\u30fc\u30bf\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u6c38\u7d9a\u5316\u3059\u308b\n\napplication.properties\nspring.datasource.url=jdbc:hsqldb:file:./db/testdb;shutdown=true\n\n\n\n\n\u30d7\u30ed\u30d1\u30c6\u30a3\u30d5\u30a1\u30a4\u30eb\u3067 spring.datasource.url \u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3067\u3001 JDBC \u63a5\u7d9a\u3059\u308b\u3068\u304d\u306e URL \u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\nHSQLDB \u306e\u5834\u5408\u306f\u3001 URL \u3067\u30c7\u30fc\u30bf\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3059\u308b\u304b\u3069\u3046\u304b\u3092\u6307\u5b9a\u3067\u304d\u308b\u306e\u3067\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308c\u3070\u30c7\u30fc\u30bf\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u6c38\u7d9a\u5316\u3067\u304d\u308b\u3002\n\n\n\u5916\u90e8\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u5229\u7528\u3059\u308b\n\u30ed\u30fc\u30ab\u30eb\u306e MySQL \u3092\u5229\u7528\u3059\u308b\u3002\nMySQL \u306e\u30c6\u30fc\u30d6\u30eb\n\n\u5b9f\u88c5\n\nbuild.gradle\ndependencies {\n    compile 'org.springframework.boot:spring-boot-starter-jdbc'\n    compile 'mysql:mysql-connector-java:5.1.35'\n}\n\n\n\napplication.properties\nspring.datasource.url=jdbc:mysql://localhost/test\nspring.datasource.username=test\nspring.datasource.password=test\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\n\n\n\nMain.java\npackage sample.springboot;\n\nimport java.util.List;\nimport java.util.Map;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\nimport org.springframework.jdbc.core.JdbcTemplate;\n\n@SpringBootApplication\npublic class Main {\n\n    public static void main(String[] args) {\n        try (ConfigurableApplicationContext ctx = SpringApplication.run(Main.class, args)) {\n            Main m = ctx.getBean(Main.class);\n            m.method();\n        }\n    }\n\n    @Autowired\n    private JdbcTemplate jdbc;\n\n    public void method() {\n        List<Map<String, Object>> list = this.jdbc.queryForList(\"SELECT * FROM TEST_TABLE\");\n        list.forEach(System.out::println);\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n{id=1, value=hoge}\n{id=2, value=fuga}\n{id=3, value=piyo}\n\n\n\n\napplication.properties \u306b\u63a5\u7d9a\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u3001\u5916\u90e8\u306e DB \u306b\u63a5\u7d9a\u3067\u304d\u308b\u3002\n\n\nJPA \u3092\u5229\u7528\u3059\u308b\n\n\u57fa\u672c\n\nbuild.gradle\ndependencies {\n-   compile 'org.springframework.boot:spring-boot-starter-jdbc'\n+   compile 'org.springframework.boot:spring-boot-starter-data-jpa'\n    compile 'org.hsqldb:hsqldb'\n}\n\n\n\napplication.properties\nspring.datasource.url=jdbc:hsqldb:file:./db/testdb;shutdown=true\nspring.jpa.hibernate.ddl-auto=update\n\n\n\nMyEntity.java\npackage sample.springboot.jpa;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\n\n@Entity\npublic class MyEntity {\n\n    @Id @GeneratedValue\n    private Long id;\n    private String value;\n\n    public MyEntity(String value) {\n        this.value = value;\n    }\n\n    private MyEntity() {}\n\n    @Override\n    public String toString() {\n        return \"MyEntity [id=\" + id + \", value=\" + value + \"]\";\n    }\n}\n\n\n\nMyEntityRepository.java\npackage sample.springboot.jpa;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\n\npublic interface MyEntityRepository extends JpaRepository<MyEntity, Long> {\n}\n\n\n\nMain.java\npackage sample.springboot;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\n\nimport sample.springboot.jpa.MyEntity;\nimport sample.springboot.jpa.MyEntityRepository;\n\n@SpringBootApplication\npublic class Main {\n\n    public static void main(String[] args) {\n        try (ConfigurableApplicationContext ctx = SpringApplication.run(Main.class, args)) {\n            Main m = ctx.getBean(Main.class);\n            m.method();\n        }\n    }\n\n    @Autowired\n    private MyEntityRepository repository;\n\n    public void method() {\n        this.repository.save(new MyEntity(\"test\"));\n\n        this.repository.findAll().forEach(System.out::println);\n    }\n}\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n$ gradle bootRun\nMyEntity [id=1, value=test]\n\n$ gradle bootRun\nMyEntity [id=1, value=test]\nMyEntity [id=2, value=test]\n\n$ gradle bootRun\nMyEntity [id=1, value=test]\nMyEntity [id=2, value=test]\nMyEntity [id=3, value=test]\n\n\n\nJPA \u3092\u4f7f\u3046\u5834\u5408\u306f\u3001 org.springframework.boot:spring-boot-starter-data-jpa \u3092\u4f9d\u5b58\u95a2\u4fc2\u306b\u8ffd\u52a0\u3059\u308b\u3002\nJPA \u306e\u5b9f\u88c5\u306b\u306f Hibernate \u304c\u5229\u7528\u3055\u308c\u308b\u3002\n\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u30c6\u30fc\u30d6\u30eb\u304c\u6bce\u56de\u4f5c\u308a\u306a\u304a\u3055\u308c\u308b\u306e\u3067\u3001 spring.jpa.hibernate.ddl-auto=update \u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u3002\n\n\n\nJpaRepository \u3092\u7d99\u627f\u3057\u305f\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u3068\u3001 Spring \u304c\u826f\u3057\u306a\u306b\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u306e\u5b9f\u88c5\u3092\u4f5c\u3063\u3066\u304f\u308c\u308b\u3002\n\n\n\u30e1\u30bd\u30c3\u30c9\u540d\u304b\u3089\u306e\u30af\u30a8\u30ea\u81ea\u52d5\u751f\u6210\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\nHoge.java\npackage sample.springboot.jpa;\n\nimport javax.persistence.Embedded;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class Hoge {\n\n    @Id @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private Long id;\n    private int number;\n    private String string;\n    @Embedded\n    private Fuga fuga;\n\n    @Override\n    public String toString() {\n        return \"Hoge [id=\" + id + \", number=\" + number + \", string=\" + string + \", fuga=\" + fuga + \"]\";\n    }\n}\n\n\n\nFuga.java\npackage sample.springboot.jpa;\n\nimport javax.persistence.Embeddable;\n\n@Embeddable\npublic class Fuga {\n\n    private String value;\n\n    @Override\n    public String toString() {\n        return \"Fuga [value=\" + value + \"]\";\n    }\n}\n\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\n\nHogeRepository.java\npackage sample.springboot.jpa;\n\nimport java.util.List;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\n\npublic interface HogeRepository extends JpaRepository<Hoge, Long> {\n\n    List<Hoge> findByNumber(int number);\n\n    List<Hoge> findByNumberOrderByIdDesc(int number);\n\n    List<Hoge> findByStringLike(String string);\n\n    List<Hoge> findByNumberLessThan(int number);\n\n    List<Hoge> findByStringIgnoreCase(String string);\n\n    List<Hoge> findByFugaValue(String string);\n\n    long countByStringLike(String string);\n\n    List<Hoge> findByNumberAndStringLike(int number, String string);\n\n    List<Hoge> findByNumberOrString(int number, String string);\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMain.java\npackage sample.springboot;\n\nimport java.util.List;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\n\nimport sample.springboot.jpa.Hoge;\nimport sample.springboot.jpa.HogeRepository;\n\n@SpringBootApplication\npublic class Main {\n\n    public static void main(String[] args) {\n        try (ConfigurableApplicationContext ctx = SpringApplication.run(Main.class, args)) {\n            Main m = ctx.getBean(Main.class);\n            m.method();\n        }\n    }\n\n    @Autowired\n    private HogeRepository repository;\n\n    public void method() {\n        print(\"findByNumber\",              repository.findByNumber(1));\n        print(\"findByNumberAndStringLike\", repository.findByNumberAndStringLike(1, \"%e\"));\n        print(\"findByNumberOrString\",      repository.findByNumberOrString(2, \"seven\"));\n        print(\"findByNumberOrderByIdDesc\", repository.findByNumberOrderByIdDesc(2));\n        print(\"findByStringLike\",          repository.findByStringLike(\"t%\"));\n        print(\"findByNumberLessThan\",      repository.findByNumberLessThan(3));\n        print(\"findByStringIgnoreCase\",    repository.findByStringIgnoreCase(\"FIVE\"));\n        print(\"findByFugaValue\",           repository.findByFugaValue(\"hoge\"));\n        print(\"countByStringLike\",         repository.countByStringLike(\"%o%\"));\n    }\n\n    private void print(String methodName, List<Hoge> list) {\n        System.out.println(\"<<\" + methodName + \">>\");\n        list.forEach(System.out::println);\n        System.out.println();\n    }\n\n    private void print(String methodName, long number) {\n        System.out.println(\"<<\" + methodName + \">>\");\n        System.out.println(number);\n        System.out.println();\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n<<findByNumber>>\nHoge [id=1, number=1, string=one, fuga=Fuga [value=hoge]]\nHoge [id=2, number=1, string=two, fuga=Fuga [value=fuga]]\nHoge [id=3, number=1, string=three, fuga=Fuga [value=piyo]]\n\n<<findByNumberOrderByIdDesc>>\nHoge [id=5, number=2, string=five, fuga=Fuga [value=fuga]]\nHoge [id=4, number=2, string=four, fuga=Fuga [value=hoge]]\n\n<<findByStringLike>>\nHoge [id=2, number=1, string=two, fuga=Fuga [value=fuga]]\nHoge [id=3, number=1, string=three, fuga=Fuga [value=piyo]]\n\n<<findByNumberLessThan>>\nHoge [id=1, number=1, string=one, fuga=Fuga [value=hoge]]\nHoge [id=2, number=1, string=two, fuga=Fuga [value=fuga]]\nHoge [id=3, number=1, string=three, fuga=Fuga [value=piyo]]\nHoge [id=4, number=2, string=four, fuga=Fuga [value=hoge]]\nHoge [id=5, number=2, string=five, fuga=Fuga [value=fuga]]\n\n<<findByStringIgnoreCase>>\nHoge [id=5, number=2, string=five, fuga=Fuga [value=fuga]]\n\n<<findByFugaValue>>\nHoge [id=1, number=1, string=one, fuga=Fuga [value=hoge]]\nHoge [id=4, number=2, string=four, fuga=Fuga [value=hoge]]\nHoge [id=7, number=3, string=seven, fuga=Fuga [value=hoge]]\n\n<<countByStringLike>>\n3\n\n<<findByNumberAndStringLike>>\nHoge [id=1, number=1, string=one, fuga=Fuga [value=hoge]]\nHoge [id=3, number=1, string=three, fuga=Fuga [value=piyo]]\n\n<<findByNumberOrString>>\nHoge [id=4, number=2, string=four, fuga=Fuga [value=hoge]]\nHoge [id=5, number=2, string=five, fuga=Fuga [value=fuga]]\nHoge [id=7, number=3, string=seven, fuga=Fuga [value=hoge]]\n\n\n\n\n\nRepository \u3092\u7d99\u627f\u3057\u305f\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306b find~~ \u306e\u3088\u3046\u306a\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u3068\u3001 Spring \u304c\u826f\u3057\u306a\u306b\u89e3\u91c8\u3057\u3066\u30af\u30a8\u30ea\u3092\u81ea\u52d5\u751f\u6210\u3057\u3066\u304f\u308c\u308b\u3002\n\u57fa\u672c\u306f\u3001 findBy<\u6761\u4ef6\u3068\u3059\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u540d\u524d> \u3067\u5b9a\u7fa9\u3059\u308b\u3002\n\nAnd \u3084 Or \u3067\u9023\u7d50\u3067\u304d\u308b\u3002\n\nOrderBy<\u30d7\u30ed\u30d1\u30c6\u30a3\u540d><Asc | Desc> \u3067\u3001\u30bd\u30fc\u30c8\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\nLike \u3092\u3064\u3051\u308c\u3070\u6587\u5b57\u5217\u306e\u3042\u3044\u307e\u3044\u691c\u7d22\u304c\u3067\u304d\u308b\u3002\n\nLessThan, GreaterThan, Between \u306a\u3069\u3082\u4f7f\u3048\u308b\u3002\n\nIgnoreCase \u3092\u3064\u3051\u308c\u3070\u3001\u5927\u6587\u5b57\u5c0f\u6587\u5b57\u306e\u533a\u5225\u306a\u3057\u3067\u6bd4\u8f03\u3067\u304d\u308b\u3002\n\ncount~~ \u3068\u3059\u308b\u3068\u3001\u691c\u7d22\u7d50\u679c\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u6570\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002\n\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u6761\u4ef6\u306b\u3059\u308b\u5834\u5408\u306f\u3001 findBy<\u7d44\u307f\u53ef\u80fd\u30af\u30e9\u30b9><\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\u306e\u30d7\u30ed\u30d1\u30c6\u30a3> \u3068\u7e4b\u3052\u308b\u3002\n\n\nJPQL \u3092\u4f7f\u7528\u3059\u308b\n\nHogeRepository.java\npackage sample.springboot.jpa;\n\nimport java.util.List;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\n\npublic interface HogeRepository extends JpaRepository<Hoge, Long> {\n\n    @Query(\"SELECT h FROM Hoge h WHERE (h.id % 2) = 0\")\n    List<Hoge> findEvenIdEntities();\n}\n\n\n\nMain.java\npackage sample.springboot;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\n\nimport sample.springboot.jpa.HogeRepository;\n\n@SpringBootApplication\npublic class Main {\n\n    public static void main(String[] args) {\n        try (ConfigurableApplicationContext ctx = SpringApplication.run(Main.class, args)) {\n            Main m = ctx.getBean(Main.class);\n            m.method();\n        }\n    }\n\n    @Autowired\n    private HogeRepository repository;\n\n    public void method() {\n        this.repository.findEvenIdEntities().forEach(System.out::println);\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\nHoge [id=2, number=1, string=two, fuga=Fuga [value=fuga]]\nHoge [id=4, number=2, string=four, fuga=Fuga [value=hoge]]\nHoge [id=6, number=3, string=six, fuga=Fuga [value=piyo]]\n\n\n\n\n\n@Query \u3067\u30e1\u30bd\u30c3\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001 JPQL \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\nJPQL \u306f\u3001 @Query \u306e value \u306b\u8a2d\u5b9a\u3059\u308b\u3002\n\n\nEntityManager \u3092\u53d6\u5f97\u3059\u308b\n\nMain.java\npackage sample.springboot;\n\nimport javax.persistence.EntityManager;\nimport javax.persistence.TypedQuery;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\n\nimport sample.springboot.jpa.Hoge;\n\n@SpringBootApplication\npublic class Main {\n\n    public static void main(String[] args) {\n        try (ConfigurableApplicationContext ctx = SpringApplication.run(Main.class, args)) {\n            Main m = ctx.getBean(Main.class);\n            m.method();\n        }\n    }\n\n    @Autowired\n    private EntityManager em;\n\n    public void method() {\n        TypedQuery<Hoge> query = this.em.createQuery(\"SELECT h FROM Hoge h WHERE h.id=:id\", Hoge.class);\n        query.setParameter(\"id\", 3L);\n\n        Hoge hoge = query.getSingleResult();\n\n        System.out.println(hoge);\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\nHoge [id=3, number=1, string=three, fuga=Fuga [value=piyo]]\n\n\n\n\n@Autowired \u3092\u4f7f\u3063\u3066\u666e\u901a\u306b EntityManager \u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u3002\n\n\n\u5ba3\u8a00\u7684\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\n\nMyService.java\npackage sample.springboot.jpa;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\nimport org.springframework.transaction.annotation.Transactional;\n\n@Component\npublic class MyService {\n\n    @Autowired\n    private HogeRepository repository;\n\n    public void save(String value) {\n        Hoge hoge = new Hoge(value);\n        this.repository.save(hoge);\n    ", "tags": ["spring-boot", "spring", "Java"]}