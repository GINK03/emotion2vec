{"context": " More than 1 year has passed since last update.\n\n\u6982\u8aac\n\u3053\u3053\u3067\u306f\u3001CentOS5.10\u306e\u74b0\u5883\u3067\u3001GitBucket2.4.1\u306erpm\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\u307e\u3067\u3092\u793a\u3057\u307e\u3059\u3002\n\n\u524d\u63d0\n\n\u4f5c\u696d\u306froot\u30e6\u30fc\u30b6\u30fc\u3067\u884c\u3046\u3053\u3068\u3068\u3057\u307e\u3059\u3002\n\u300crpm-build.x86_64\u300d\u306a\u3069\u30d3\u30eb\u30c9\u306b\u5fc5\u8981\u305d\u3046\u306a\u30b3\u30de\u30f3\u30c9\u306f\u4e00\u901a\u308a\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u3067\u3042\u308b\u3053\u3068\u3068\u3057\u307e\u3059\u3002\nGitBucket\u306e\u5b9f\u884c\u306bjava\u30b3\u30de\u30f3\u30c9\u304c\u5fc5\u8981\u306b\u306a\u308b\u305f\u3081\u3001\u4e8b\u524d\u306b\u300cjava-1.7.0-openjdk\u300d\u7b49\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001java\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u53ef\u80fd\u306a\u72b6\u614b\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\n\u30b3\u30de\u30f3\u30c9\n# yum groupinstall \"Development Tools\"\n# yum install rpm-build.x86_64\n# yum install java-1.7.0-openjdk.x86_64\n\n\n\n\u4e8b\u524d\u6e96\u5099\n\u307e\u305a\u3001\u30d3\u30eb\u30c9\u306b\u5fc5\u8981\u306a\u95a2\u9023\u30d5\u30a1\u30a4\u30eb\u3092\u6240\u5b9a\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\nGitBucket\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u306b\u3064\u3044\u3066\u306f\u3001\u6700\u65b0\u306e\u30e2\u30ce\u306b\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u30b3\u30de\u30f3\u30c9\n# cd ~\n# git clone https://github.com/takezoe/gitbucket.git\n# cp gitbucket/contrib/linux/redhat/gitbucket.spec /usr/src/redhat/SPECS/\n# cp gitbucket/contrib/gitbucket.conf /usr/src/redhat/SOURCES/\n# cp gitbucket/contrib/gitbucket.init /usr/src/redhat/SOURCES/\n# wget https://github.com/takezoe/gitbucket/releases/download/2.4.1/gitbucket.war -O /usr/src/redhat/SOURCES/gitbucket.war\n# wget https://github.com/takezoe/gitbucket/archive/2.4.1.tar.gz -O /usr/src/redhat/SOURCES/gitbucket-2.4.1.tar.gz\n# rm -fr gitbucket\n\n\n\nspec\u30d5\u30a1\u30a4\u30eb\u306e\u4fee\u6b63\nspec\u30d5\u30a1\u30a4\u30eb\u5185\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u8a18\u8ff0\u3092\u6700\u65b0\u7248\u306e\u30e2\u30ce\u306b\u66f8\u304d\u63db\u3048\u308b\u3002\n\n\u30b3\u30de\u30f3\u30c9\n\u4e8b\u524d\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u3063\u3066\u304a\u304f\n# cp /usr/src/redhat/SPECS/gitbucket.spec /usr/src/redhat/SPECS/gitbucket.spec.orig\n\n\u4fee\u6b63\u7b87\u6240\u78ba\u8a8d\n# diff /usr/src/redhat/SPECS/gitbucket.spec /usr/src/redhat/SPECS/gitbucket.spec.orig\n3c3\n< Version:      2.4\n---\n> Version:      1.7\n\n\n\nrpm\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n\u4e0b\u6e96\u5099\u304c\u63c3\u3063\u305f\u306e\u3067\u3001rpmbuild\u30b3\u30de\u30f3\u30c9\u3067rpm\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\n# rpmbuild -ba /usr/src/redhat/SPECS/gitbucket.spec\nExecuting(%install): /bin/sh -e /var/tmp/rpm-tmp.57692\n+ umask 022\n+ cd /usr/src/redhat/BUILD\n+ LANG=C\n+ export LANG\n+ unset DISPLAY\n+ '[' /var/tmp/gitbucket-2.4-1-root '!=' / ']'\n+ /bin/rm -rf /var/tmp/gitbucket-2.4-1-root\n+ /bin/mkdir -p /var/tmp/gitbucket-2.4-1-root/etc/init.d /var/tmp/gitbucket-2.4-1-root/etc/sysconfig '/var/tmp/gitbucket-2.4-1-root%{_datarootdir}/gitbucket/lib' /var/tmp/gitbucket-2.4-1-root/usr/com/gitbucket /var/tmp/gitbucket-2.4-1-root/var/log/gitbucket\n+ /usr/bin/install -m 0644 /usr/src/redhat/SOURCES/gitbucket.war '/var/tmp/gitbucket-2.4-1-root%{_datarootdir}/gitbucket/lib'\n+ /usr/bin/install -m 0755 /usr/src/redhat/SOURCES/gitbucket.init /var/tmp/gitbucket-2.4-1-root/etc/init.d/gitbucket\n+ /usr/bin/install -m 0644 /usr/src/redhat/SOURCES/gitbucket.conf /var/tmp/gitbucket-2.4-1-root/etc/sysconfig/gitbucket\n+ touch /var/tmp/gitbucket-2.4-1-root/var/log/gitbucket/run.log\n+ /usr/lib/rpm/redhat/brp-compress\n+ /usr/lib/rpm/redhat/brp-strip /usr/bin/strip\n+ /usr/lib/rpm/redhat/brp-strip-static-archive /usr/bin/strip\n+ /usr/lib/rpm/redhat/brp-strip-comment-note /usr/bin/strip /usr/bin/objdump\n+ /usr/lib/rpm/brp-python-bytecompile\n+ /usr/lib/rpm/redhat/brp-java-repack-jars\nProcessing files: gitbucket-2.4-1\nerror: File must begin with \"/\": %{_datarootdir}/gitbucket/lib/gitbucket.war\nChecking for unpackaged file(s): /usr/lib/rpm/check-files /var/tmp/gitbucket-2.4-1-root\n\n\nRPM build errors:\n    File must begin with \"/\": %{_datarootdir}/gitbucket/lib/gitbucket.war\n\n\n\u6b8b\u5ff5\u306a\u304c\u3089\u300cFile must begin with \"/\": %{datarootdir}/gitbucket/lib/gitbucket.war\u300d\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n\u3069\u3046\u3084\u3089\u3001\u300c%{_datarootdir}\u300d\u306e\u90e8\u5206\u304c\u6b63\u3057\u3044\u6587\u5b57\u5217\u306b\u7f6e\u304d\u63db\u308f\u3063\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u30d1\u30b9\u304c\u4e0d\u6b63\u3068\u306a\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u3067\u306f\u3001\u300c%{datarootdir}\u300d\u3092\u4f55\u306b\u66f8\u304d\u63db\u3048\u308c\u3070\u3088\u3044\u304b\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u624b\u304c\u304b\u308a\u306b\u306a\u308a\u305d\u3046\u306a\u300cgitbucket.conf\u300d\u3092\u958b\u304d\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\n# vim /usr/src/redhat/SOURCES/gitbucket.conf\n\n\u30fb\n\u30fb\n\u7701\u7565\n\u30fb\n\u30fb\n# Directory where GitBucket is installed\n# Configuration is stored here:\nGITBUCKET_DIR=/usr/share/gitbucket <=== \u305d\u308c\u3063\u307d\u3044\nGITBUCKET_WAR_DIR=$GITBUCKET_DIR/lib\n\n\n\u300cGITBUCKET_DIR\u300d\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u300c/usr/share/gitbucket\u300d\u304c\u3059\u3054\u304f\u305d\u308c\u3063\u307d\u3044\u306e\u3067\u3001\u3053\u308c\u306b\u7f6e\u304d\u63db\u3048\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\n# vim /usr/src/redhat/SPECS/gitbucket.spec\n\n\u5b9f\u884c\n:%s/%{_datarootdir}/\\/usr\\/share/g\n\n\u4fee\u6b63\u7b87\u6240\u78ba\u8a8d\n# diff /usr/src/redhat/SPECS/gitbucket.spec /usr/src/redhat/SPECS/gitbucket.spec.orig\n3c3\n< Version:      2.4\n---\n> Version:      1.7\n23,24c23,24\n< %{__mkdir_p} %{buildroot}{%{_sysconfdir}/{init.d,sysconfig},/usr/share/%{name}/lib,%{_sharedstatedir}/%{name},%{_localstatedir}/log/%{name}}\n< %{__install} -m 0644 %{SOURCE0} %{buildroot}/usr/share/%{name}/lib\n---\n> %{__mkdir_p} %{buildroot}{%{_sysconfdir}/{init.d,sysconfig},%{_datarootdir}/%{name}/lib,%{_sharedstatedir}/%{name},%{_localstatedir}/log/%{name}}\n> %{__install} -m 0644 %{SOURCE0} %{buildroot}%{_datarootdir}/%{name}/lib\n36c36\n< /usr/share/%{name}/lib/%{name}.war\n---\n> %{_datarootdir}/%{name}/lib/%{name}.war\n\n\nrpmbuild\u30b3\u30de\u30f3\u30c9\u3067\u30d3\u30eb\u30c9\u306e\u518d\u5b9f\u884c\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\n# rpmbuild -ba /usr/src/redhat/SPECS/gitbucket.spec\nExecuting(%install): /bin/sh -e /var/tmp/rpm-tmp.4672\n+ umask 022\n+ cd /usr/src/redhat/BUILD\n+ LANG=C\n+ export LANG\n+ unset DISPLAY\n+ '[' /var/tmp/gitbucket-2.4-1-root '!=' / ']'\n+ /bin/rm -rf /var/tmp/gitbucket-2.4-1-root\n+ /bin/mkdir -p /var/tmp/gitbucket-2.4-1-root/etc/init.d /var/tmp/gitbucket-2.4-1-root/etc/sysconfig /var/tmp/gitbucket-2.4-1-root/usr/share/gitbucket/lib /var/tmp/gitbucket-2.4-1-root/usr/com/gitbucket /var/tmp/gitbucket-2.4-1-root/var/log/gitbucket\n+ /usr/bin/install -m 0644 /usr/src/redhat/SOURCES/gitbucket.war /var/tmp/gitbucket-2.4-1-root/usr/share/gitbucket/lib\n+ /usr/bin/install -m 0755 /usr/src/redhat/SOURCES/gitbucket.init /var/tmp/gitbucket-2.4-1-root/etc/init.d/gitbucket\n+ /usr/bin/install -m 0644 /usr/src/redhat/SOURCES/gitbucket.conf /var/tmp/gitbucket-2.4-1-root/etc/sysconfig/gitbucket\n+ touch /var/tmp/gitbucket-2.4-1-root/var/log/gitbucket/run.log\n+ /usr/lib/rpm/redhat/brp-compress\n+ /usr/lib/rpm/redhat/brp-strip /usr/bin/strip\n+ /usr/lib/rpm/redhat/brp-strip-static-archive /usr/bin/strip\n+ /usr/lib/rpm/redhat/brp-strip-comment-note /usr/bin/strip /usr/bin/objdump\n+ /usr/lib/rpm/brp-python-bytecompile\n+ /usr/lib/rpm/redhat/brp-java-repack-jars\nProcessing files: gitbucket-2.4-1\nProvides: config(gitbucket) = 2.4-1\nRequires(rpmlib): rpmlib(CompressedFileNames) <= 3.0.4-1 rpmlib(PayloadFilesHavePrefix) <= 4.0-1\nRequires: /bin/bash config(gitbucket) = 2.4-1 java >= 1.7\nChecking for unpackaged file(s): /usr/lib/rpm/check-files /var/tmp/gitbucket-2.4-1-root\nWrote: /usr/src/redhat/SRPMS/gitbucket-2.4-1.src.rpm\nWrote: /usr/src/redhat/RPMS/noarch/gitbucket-2.4-1.noarch.rpm <=== rpm\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\nExecuting(%clean): /bin/sh -e /var/tmp/rpm-tmp.7258\n+ umask 022\n+ cd /usr/src/redhat/BUILD\n+ '[' /var/tmp/gitbucket-2.4-1-root '!=' / ']'\n+ /bin/rm -rf /var/tmp/gitbucket-2.4-1-root\n+ exit 0\n\n\n\u4eca\u5ea6\u306f\u6b63\u3057\u304f\u51e6\u7406\u304c\u7d42\u4e86\u3057\u3001rpm\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u30b3\u30de\u30f3\u30c9\n# ls -l /usr/src/redhat/RPMS/noarch/gitbucket-2.4-1.noarch.rpm\n-rw-r--r-- 1 root root 50521338 Oct 10 18:12 /usr/src/redhat/RPMS/noarch/gitbucket-2.4-1.noarch.rpm\n# ls -l /usr/src/redhat/SRPMS/gitbucket-2.4-1.src.rpm\n-rw-r--r-- 1 root root 50521018 Oct 10 18:12 /usr/src/redhat/SRPMS/gitbucket-2.4-1.src.rpm\n\n\n\n\u4f5c\u6210\u3057\u305fGitBucket2.4.1\u306erpm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n\u30b3\u30de\u30f3\u30c9\n# rpm -Uvh /usr/src/redhat/RPMS/noarch/gitbucket-2.4-1.noarch.rpm\nerror: Failed dependencies:\n        java >= 1.7 is needed by gitbucket-2.4-1.noarch\n\n\njava\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u3044\u3068\u6012\u3089\u308c\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u306e\u3067\u3001java\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\n# java -version\njava version \"1.7.0_65\"\nOpenJDK Runtime Environment (rhel-2.5.1.2.el5_10-x86_64 u65-b17)\nOpenJDK 64-Bit Server VM (build 24.65-b04, mixed mode)\n\n\n\u78ba\u304b\u306b\u3001\u30d0\u30fc\u30b8\u30e7\u30f31.7\u4ee5\u4e0a\u306ejava\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u300c--nodeps\u300d\u3067\u7121\u8996\u3057\u3066\u5165\u308c\u3061\u3083\u3044\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\n# rpm -Uvh --nodeps /usr/src/redhat/RPMS/noarch/gitbucket-2.4-1.noarch.rpm\nPreparing...                ########################################### [100%]\n   1:gitbucket              ########################################### [100%]\n\n\n\u300c%{_datarootdir}\u300d\u3092\u300c/usr/share\u300d\u306b\u66f8\u304d\u63db\u3048\u305f\u90e8\u5206\u304c\u6c17\u306b\u306a\u308b\u306e\u3067\u3001\u300cGITBUCKET_WAR_DIR\u300d\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u305f\u3001\u300c/usr/share/gitbucket/lib\u300d\u914d\u4e0b\u306bwar\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\n# ls -l /usr/share/gitbucket/lib/gitbucket.war\n-rw-r--r-- 1 root root 51074315 Oct 10 18:12 /usr/share/gitbucket/lib/gitbucket.war\n\n\n\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u300c/etc/rc.d/init.d/gitbucket\u300d\u304c\u305d\u306e\u307e\u307e\u3067\u306fCentOS5\u3067\u52d5\u4f5c\u3057\u306a\u3044\u305f\u3081\u3001\u4e00\u90e8\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\n\u4e8b\u524d\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u3063\u3066\u304a\u304f\n# cp /etc/rc.d/init.d/gitbucket /etc/rc.d/init.d/gitbucket.orig\n\n\u4fee\u6b63\u7b87\u6240\u78ba\u8a8d\n# diff /etc/rc.d/init.d/gitbucket /etc/rc.d/init.d/gitbucket.orig\n13c13\n< #set -e\n---\n> set -e\n16c16\n< #[ -f /etc/rc.common ] && source /etc/rc.common # Mac OS/X\n---\n> [ -f /etc/rc.common ] && source /etc/rc.common # Mac OS/X\n24c24\n< #[ -f gitbucket.conf ] && source gitbucket.conf  # For all systems\n---\n> [ -f gitbucket.conf ] && source gitbucket.conf  # For all systems\n34c34\n< #if [ -z \"$(which success)\" ]; then\n---\n> if [ -z \"$(which success)\" ]; then\n38,39c38,39\n< #fi\n< #if [ -z \"$(which failure)\" ]; then\n---\n> fi\n> if [ -z \"$(which failure)\" ]; then\n43c43\n< #fi\n---\n> fi\n\n\nGitBucket\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\n# service gitbucket start\nStarting GitBucket server:  Success\n\n\nhttp://path_to_domain:8080 \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u521d\u671f\u72b6\u614b\u3067\u306f\u3001\u300cUsername:root / Password:root\u300d\u3067\u30ed\u30b0\u30a4\u30f3\u53ef\u80fd\u3067\u3059\u3002\n\n\n\u53c2\u8003URL\nGitBucket-CentOS\nGitBucket 2.1\u306eRPM\u3092\u4f5c\u6210\u3059\u308b\nGitLab\u3068GitBucket\u3068\u304a\u8a66\u3057\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n## \u6982\u8aac\n\u3053\u3053\u3067\u306f\u3001CentOS5.10\u306e\u74b0\u5883\u3067\u3001GitBucket2.4.1\u306erpm\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\u307e\u3067\u3092\u793a\u3057\u307e\u3059\u3002\n\n## \u524d\u63d0\n- \u4f5c\u696d\u306froot\u30e6\u30fc\u30b6\u30fc\u3067\u884c\u3046\u3053\u3068\u3068\u3057\u307e\u3059\u3002\n- \u300crpm-build.x86_64\u300d\u306a\u3069\u30d3\u30eb\u30c9\u306b\u5fc5\u8981\u305d\u3046\u306a\u30b3\u30de\u30f3\u30c9\u306f\u4e00\u901a\u308a\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u3067\u3042\u308b\u3053\u3068\u3068\u3057\u307e\u3059\u3002\n- GitBucket\u306e\u5b9f\u884c\u306bjava\u30b3\u30de\u30f3\u30c9\u304c\u5fc5\u8981\u306b\u306a\u308b\u305f\u3081\u3001\u4e8b\u524d\u306b\u300cjava-1.7.0-openjdk\u300d\u7b49\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001java\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u53ef\u80fd\u306a\u72b6\u614b\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30b3\u30de\u30f3\u30c9\n# yum groupinstall \"Development Tools\"\n# yum install rpm-build.x86_64\n# yum install java-1.7.0-openjdk.x86_64\n```\n\n## \u4e8b\u524d\u6e96\u5099\n\u307e\u305a\u3001\u30d3\u30eb\u30c9\u306b\u5fc5\u8981\u306a\u95a2\u9023\u30d5\u30a1\u30a4\u30eb\u3092\u6240\u5b9a\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\nGitBucket\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u306b\u3064\u3044\u3066\u306f\u3001\u6700\u65b0\u306e\u30e2\u30ce\u306b\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30b3\u30de\u30f3\u30c9\n# cd ~\n# git clone https://github.com/takezoe/gitbucket.git\n# cp gitbucket/contrib/linux/redhat/gitbucket.spec /usr/src/redhat/SPECS/\n# cp gitbucket/contrib/gitbucket.conf /usr/src/redhat/SOURCES/\n# cp gitbucket/contrib/gitbucket.init /usr/src/redhat/SOURCES/\n# wget https://github.com/takezoe/gitbucket/releases/download/2.4.1/gitbucket.war -O /usr/src/redhat/SOURCES/gitbucket.war\n# wget https://github.com/takezoe/gitbucket/archive/2.4.1.tar.gz -O /usr/src/redhat/SOURCES/gitbucket-2.4.1.tar.gz\n# rm -fr gitbucket\n```\n\n## spec\u30d5\u30a1\u30a4\u30eb\u306e\u4fee\u6b63\nspec\u30d5\u30a1\u30a4\u30eb\u5185\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u8a18\u8ff0\u3092\u6700\u65b0\u7248\u306e\u30e2\u30ce\u306b\u66f8\u304d\u63db\u3048\u308b\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30b3\u30de\u30f3\u30c9\n\u4e8b\u524d\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u3063\u3066\u304a\u304f\n# cp /usr/src/redhat/SPECS/gitbucket.spec /usr/src/redhat/SPECS/gitbucket.spec.orig\n\n\u4fee\u6b63\u7b87\u6240\u78ba\u8a8d\n# diff /usr/src/redhat/SPECS/gitbucket.spec /usr/src/redhat/SPECS/gitbucket.spec.orig\n3c3\n< Version:      2.4\n---\n> Version:      1.7\n```\n\n## rpm\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n\u4e0b\u6e96\u5099\u304c\u63c3\u3063\u305f\u306e\u3067\u3001rpmbuild\u30b3\u30de\u30f3\u30c9\u3067rpm\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30b3\u30de\u30f3\u30c9\n# rpmbuild -ba /usr/src/redhat/SPECS/gitbucket.spec\nExecuting(%install): /bin/sh -e /var/tmp/rpm-tmp.57692\n+ umask 022\n+ cd /usr/src/redhat/BUILD\n+ LANG=C\n+ export LANG\n+ unset DISPLAY\n+ '[' /var/tmp/gitbucket-2.4-1-root '!=' / ']'\n+ /bin/rm -rf /var/tmp/gitbucket-2.4-1-root\n+ /bin/mkdir -p /var/tmp/gitbucket-2.4-1-root/etc/init.d /var/tmp/gitbucket-2.4-1-root/etc/sysconfig '/var/tmp/gitbucket-2.4-1-root%{_datarootdir}/gitbucket/lib' /var/tmp/gitbucket-2.4-1-root/usr/com/gitbucket /var/tmp/gitbucket-2.4-1-root/var/log/gitbucket\n+ /usr/bin/install -m 0644 /usr/src/redhat/SOURCES/gitbucket.war '/var/tmp/gitbucket-2.4-1-root%{_datarootdir}/gitbucket/lib'\n+ /usr/bin/install -m 0755 /usr/src/redhat/SOURCES/gitbucket.init /var/tmp/gitbucket-2.4-1-root/etc/init.d/gitbucket\n+ /usr/bin/install -m 0644 /usr/src/redhat/SOURCES/gitbucket.conf /var/tmp/gitbucket-2.4-1-root/etc/sysconfig/gitbucket\n+ touch /var/tmp/gitbucket-2.4-1-root/var/log/gitbucket/run.log\n+ /usr/lib/rpm/redhat/brp-compress\n+ /usr/lib/rpm/redhat/brp-strip /usr/bin/strip\n+ /usr/lib/rpm/redhat/brp-strip-static-archive /usr/bin/strip\n+ /usr/lib/rpm/redhat/brp-strip-comment-note /usr/bin/strip /usr/bin/objdump\n+ /usr/lib/rpm/brp-python-bytecompile\n+ /usr/lib/rpm/redhat/brp-java-repack-jars\nProcessing files: gitbucket-2.4-1\nerror: File must begin with \"/\": %{_datarootdir}/gitbucket/lib/gitbucket.war\nChecking for unpackaged file(s): /usr/lib/rpm/check-files /var/tmp/gitbucket-2.4-1-root\n\n\nRPM build errors:\n    File must begin with \"/\": %{_datarootdir}/gitbucket/lib/gitbucket.war\n```\n\n\u6b8b\u5ff5\u306a\u304c\u3089\u300cFile must begin with \"/\": %{_datarootdir}/gitbucket/lib/gitbucket.war\u300d\u3068\u3044\u3046\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n\u3069\u3046\u3084\u3089\u3001\u300c%{_datarootdir}\u300d\u306e\u90e8\u5206\u304c\u6b63\u3057\u3044\u6587\u5b57\u5217\u306b\u7f6e\u304d\u63db\u308f\u3063\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u30d1\u30b9\u304c\u4e0d\u6b63\u3068\u306a\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u3067\u306f\u3001\u300c%{_datarootdir}\u300d\u3092\u4f55\u306b\u66f8\u304d\u63db\u3048\u308c\u3070\u3088\u3044\u304b\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u624b\u304c\u304b\u308a\u306b\u306a\u308a\u305d\u3046\u306a\u300cgitbucket.conf\u300d\u3092\u958b\u304d\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30b3\u30de\u30f3\u30c9\n# vim /usr/src/redhat/SOURCES/gitbucket.conf\n\n\u30fb\n\u30fb\n\u7701\u7565\n\u30fb\n\u30fb\n# Directory where GitBucket is installed\n# Configuration is stored here:\nGITBUCKET_DIR=/usr/share/gitbucket <=== \u305d\u308c\u3063\u307d\u3044\nGITBUCKET_WAR_DIR=$GITBUCKET_DIR/lib\n```\n\n\u300cGITBUCKET_DIR\u300d\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u300c/usr/share/gitbucket\u300d\u304c\u3059\u3054\u304f\u305d\u308c\u3063\u307d\u3044\u306e\u3067\u3001\u3053\u308c\u306b\u7f6e\u304d\u63db\u3048\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30b3\u30de\u30f3\u30c9\n# vim /usr/src/redhat/SPECS/gitbucket.spec\n\n\u5b9f\u884c\n:%s/%{_datarootdir}/\\/usr\\/share/g\n\n\u4fee\u6b63\u7b87\u6240\u78ba\u8a8d\n# diff /usr/src/redhat/SPECS/gitbucket.spec /usr/src/redhat/SPECS/gitbucket.spec.orig\n3c3\n< Version:      2.4\n---\n> Version:      1.7\n23,24c23,24\n< %{__mkdir_p} %{buildroot}{%{_sysconfdir}/{init.d,sysconfig},/usr/share/%{name}/lib,%{_sharedstatedir}/%{name},%{_localstatedir}/log/%{name}}\n< %{__install} -m 0644 %{SOURCE0} %{buildroot}/usr/share/%{name}/lib\n---\n> %{__mkdir_p} %{buildroot}{%{_sysconfdir}/{init.d,sysconfig},%{_datarootdir}/%{name}/lib,%{_sharedstatedir}/%{name},%{_localstatedir}/log/%{name}}\n> %{__install} -m 0644 %{SOURCE0} %{buildroot}%{_datarootdir}/%{name}/lib\n36c36\n< /usr/share/%{name}/lib/%{name}.war\n---\n> %{_datarootdir}/%{name}/lib/%{name}.war\n```\n\nrpmbuild\u30b3\u30de\u30f3\u30c9\u3067\u30d3\u30eb\u30c9\u306e\u518d\u5b9f\u884c\u3092\u884c\u3044\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30b3\u30de\u30f3\u30c9\n# rpmbuild -ba /usr/src/redhat/SPECS/gitbucket.spec\nExecuting(%install): /bin/sh -e /var/tmp/rpm-tmp.4672\n+ umask 022\n+ cd /usr/src/redhat/BUILD\n+ LANG=C\n+ export LANG\n+ unset DISPLAY\n+ '[' /var/tmp/gitbucket-2.4-1-root '!=' / ']'\n+ /bin/rm -rf /var/tmp/gitbucket-2.4-1-root\n+ /bin/mkdir -p /var/tmp/gitbucket-2.4-1-root/etc/init.d /var/tmp/gitbucket-2.4-1-root/etc/sysconfig /var/tmp/gitbucket-2.4-1-root/usr/share/gitbucket/lib /var/tmp/gitbucket-2.4-1-root/usr/com/gitbucket /var/tmp/gitbucket-2.4-1-root/var/log/gitbucket\n+ /usr/bin/install -m 0644 /usr/src/redhat/SOURCES/gitbucket.war /var/tmp/gitbucket-2.4-1-root/usr/share/gitbucket/lib\n+ /usr/bin/install -m 0755 /usr/src/redhat/SOURCES/gitbucket.init /var/tmp/gitbucket-2.4-1-root/etc/init.d/gitbucket\n+ /usr/bin/install -m 0644 /usr/src/redhat/SOURCES/gitbucket.conf /var/tmp/gitbucket-2.4-1-root/etc/sysconfig/gitbucket\n+ touch /var/tmp/gitbucket-2.4-1-root/var/log/gitbucket/run.log\n+ /usr/lib/rpm/redhat/brp-compress\n+ /usr/lib/rpm/redhat/brp-strip /usr/bin/strip\n+ /usr/lib/rpm/redhat/brp-strip-static-archive /usr/bin/strip\n+ /usr/lib/rpm/redhat/brp-strip-comment-note /usr/bin/strip /usr/bin/objdump\n+ /usr/lib/rpm/brp-python-bytecompile\n+ /usr/lib/rpm/redhat/brp-java-repack-jars\nProcessing files: gitbucket-2.4-1\nProvides: config(gitbucket) = 2.4-1\nRequires(rpmlib): rpmlib(CompressedFileNames) <= 3.0.4-1 rpmlib(PayloadFilesHavePrefix) <= 4.0-1\nRequires: /bin/bash config(gitbucket) = 2.4-1 java >= 1.7\nChecking for unpackaged file(s): /usr/lib/rpm/check-files /var/tmp/gitbucket-2.4-1-root\nWrote: /usr/src/redhat/SRPMS/gitbucket-2.4-1.src.rpm\nWrote: /usr/src/redhat/RPMS/noarch/gitbucket-2.4-1.noarch.rpm <=== rpm\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\nExecuting(%clean): /bin/sh -e /var/tmp/rpm-tmp.7258\n+ umask 022\n+ cd /usr/src/redhat/BUILD\n+ '[' /var/tmp/gitbucket-2.4-1-root '!=' / ']'\n+ /bin/rm -rf /var/tmp/gitbucket-2.4-1-root\n+ exit 0\n```\n\n\u4eca\u5ea6\u306f\u6b63\u3057\u304f\u51e6\u7406\u304c\u7d42\u4e86\u3057\u3001rpm\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30b3\u30de\u30f3\u30c9\n# ls -l /usr/src/redhat/RPMS/noarch/gitbucket-2.4-1.noarch.rpm\n-rw-r--r-- 1 root root 50521338 Oct 10 18:12 /usr/src/redhat/RPMS/noarch/gitbucket-2.4-1.noarch.rpm\n# ls -l /usr/src/redhat/SRPMS/gitbucket-2.4-1.src.rpm\n-rw-r--r-- 1 root root 50521018 Oct 10 18:12 /usr/src/redhat/SRPMS/gitbucket-2.4-1.src.rpm\n```\n\n## \u4f5c\u6210\u3057\u305fGitBucket2.4.1\u306erpm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n```\u30b3\u30de\u30f3\u30c9:\u30b3\u30de\u30f3\u30c9\n# rpm -Uvh /usr/src/redhat/RPMS/noarch/gitbucket-2.4-1.noarch.rpm\nerror: Failed dependencies:\n        java >= 1.7 is needed by gitbucket-2.4-1.noarch\n```\n\njava\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u3044\u3068\u6012\u3089\u308c\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u306e\u3067\u3001java\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30b3\u30de\u30f3\u30c9\n# java -version\njava version \"1.7.0_65\"\nOpenJDK Runtime Environment (rhel-2.5.1.2.el5_10-x86_64 u65-b17)\nOpenJDK 64-Bit Server VM (build 24.65-b04, mixed mode)\n```\n\n\u78ba\u304b\u306b\u3001\u30d0\u30fc\u30b8\u30e7\u30f31.7\u4ee5\u4e0a\u306ejava\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u300c--nodeps\u300d\u3067\u7121\u8996\u3057\u3066\u5165\u308c\u3061\u3083\u3044\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30b3\u30de\u30f3\u30c9\n# rpm -Uvh --nodeps /usr/src/redhat/RPMS/noarch/gitbucket-2.4-1.noarch.rpm\nPreparing...                ########################################### [100%]\n   1:gitbucket              ########################################### [100%]\n```\n\n\u300c%{_datarootdir}\u300d\u3092\u300c/usr/share\u300d\u306b\u66f8\u304d\u63db\u3048\u305f\u90e8\u5206\u304c\u6c17\u306b\u306a\u308b\u306e\u3067\u3001\u300cGITBUCKET_WAR_DIR\u300d\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u305f\u3001\u300c/usr/share/gitbucket/lib\u300d\u914d\u4e0b\u306bwar\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30b3\u30de\u30f3\u30c9\n# ls -l /usr/share/gitbucket/lib/gitbucket.war\n-rw-r--r-- 1 root root 51074315 Oct 10 18:12 /usr/share/gitbucket/lib/gitbucket.war\n```\n\n\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u300c/etc/rc.d/init.d/gitbucket\u300d\u304c\u305d\u306e\u307e\u307e\u3067\u306fCentOS5\u3067\u52d5\u4f5c\u3057\u306a\u3044\u305f\u3081\u3001\u4e00\u90e8\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\n\n```\u30b3\u30de\u30f3\u30c9:\u30b3\u30de\u30f3\u30c9\n\u4e8b\u524d\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u3063\u3066\u304a\u304f\n# cp /etc/rc.d/init.d/gitbucket /etc/rc.d/init.d/gitbucket.orig\n\n\u4fee\u6b63\u7b87\u6240\u78ba\u8a8d\n# diff /etc/rc.d/init.d/gitbucket /etc/rc.d/init.d/gitbucket.orig\n13c13\n< #set -e\n---\n> set -e\n16c16\n< #[ -f /etc/rc.common ] && source /etc/rc.common # Mac OS/X\n---\n> [ -f /etc/rc.common ] && source /etc/rc.common # Mac OS/X\n24c24\n< #[ -f gitbucket.conf ] && source gitbucket.conf  # For all systems\n---\n> [ -f gitbucket.conf ] && source gitbucket.conf  # For all systems\n34c34\n< #if [ -z \"$(which success)\" ]; then\n---\n> if [ -z \"$(which success)\" ]; then\n38,39c38,39\n< #fi\n< #if [ -z \"$(which failure)\" ]; then\n---\n> fi\n> if [ -z \"$(which failure)\" ]; then\n43c43\n< #fi\n---\n> fi\n```\n\nGitBucket\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\u30b3\u30de\u30f3\u30c9:\u30b3\u30de\u30f3\u30c9\n# service gitbucket start\nStarting GitBucket server:  Success\n```\n\nhttp://path_to_domain:8080 \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u521d\u671f\u72b6\u614b\u3067\u306f\u3001\u300cUsername:root / Password:root\u300d\u3067\u30ed\u30b0\u30a4\u30f3\u53ef\u80fd\u3067\u3059\u3002\n\n![gitbucket_login.PNG](https://qiita-image-store.s3.amazonaws.com/0/23093/25c01bc1-936a-d841-6d5f-2df1993d9626.png)\n\n## \u53c2\u8003URL\n\n[GitBucket-CentOS](https://gist.github.com/kheiakiyama/1373a152ebd34d87d111)\n[GitBucket 2.1\u306eRPM\u3092\u4f5c\u6210\u3059\u308b](http://www.torutk.com/issues/14)\n[GitLab\u3068GitBucket\u3068\u304a\u8a66\u3057\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb](http://d.hatena.ne.jp/torutk/20140622/p1)\n", "tags": ["GitBucket2.4.1", "Git"]}