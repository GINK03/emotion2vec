{"context": " More than 1 year has passed since last update.register \u3067 template \u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u5b9f\u884c\u7d50\u679c\u3092\u53d7\u3051\u3066\u3001\nchanged \u306e\u5834\u5408\u306f\u5fc5\u305a update \u3057\u3066\u3001\nskipped \u306e\u5834\u5408\u306f cache_valid_time \u3067\u60c5\u5831\u304c\u53e4\u3044\u5834\u5408\u3060\u3051 update \u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\ntasks/apt.yaml\n---\n- template: src=sources.list.{{ ansible_distribution }}.j2 dest=/etc/apt/sources.list owner=root group=root mode=0644\n  register: apt_sources_list\n- apt: update_cache=yes\n  when: apt_sources_list|changed\n- apt: update_cache=yes cache_valid_time=3600\n  when: apt_sources_list|skipped\n\n\n\u8a73\u7d30\u306f ansible \u3067 sources.list \u3092\u5909\u66f4\u3057\u305f\u3068\u304d\u306b update \u3059\u308b \u3092\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n`register` \u3067 `template` \u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u5b9f\u884c\u7d50\u679c\u3092\u53d7\u3051\u3066\u3001\n`changed` \u306e\u5834\u5408\u306f\u5fc5\u305a update \u3057\u3066\u3001\n`skipped` \u306e\u5834\u5408\u306f `cache_valid_time` \u3067\u60c5\u5831\u304c\u53e4\u3044\u5834\u5408\u3060\u3051 update \u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n```yaml:tasks/apt.yaml\n---\n- template: src=sources.list.{{ ansible_distribution }}.j2 dest=/etc/apt/sources.list owner=root group=root mode=0644\n  register: apt_sources_list\n- apt: update_cache=yes\n  when: apt_sources_list|changed\n- apt: update_cache=yes cache_valid_time=3600\n  when: apt_sources_list|skipped\n```\n\n\u8a73\u7d30\u306f [ansible \u3067 sources.list \u3092\u5909\u66f4\u3057\u305f\u3068\u304d\u306b update \u3059\u308b](http://blog.n-z.jp/blog/2014-05-20-ansible-apt-update.html) \u3092\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n", "tags": ["Ansible1.6.1", "Ubuntu", "Debian"]}