{"tags": ["AWS", "AWS_SDK", "PHP", "AmazonLinux"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002Amazon Linux \u306f AWS \u304c\u7528\u610f\u3057\u3066\u3044\u308b\u3060\u3051\u3042\u3063\u3066 repository \u306b\u8272\u3005\u5165\u3063\u3066\u3044\u307e\u3059\u3002\u3068\u308a\u3042\u3048\u305a\u4f7f\u3063\u3066\u307f\u308b\u306b\u306f\u6700\u9069\u3002\nAccess Key ID \u3068 Secret Access Key \u3092\u66f8\u304f\u3088\u3046\u306b\u3057\u3066\u307e\u3059\u3051\u3069\u3001IAM role \u4f7f\u3046\u3068\u304b\u8272\u3005\u65b9\u6cd5\u3042\u308b\u3068\u601d\u3046\u3093\u3067\u3088\u3057\u306a\u306b\u3002\n\nPHP\n$ sudo yum install php-amazon-sdk2\n(snip)\n\u5b8c\u4e86\u3057\u307e\u3057\u305f!\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86! \u3088\u3044\u5b50\u306f\u304d\u3063\u3068 sdk2 \u306e\u65b9\u3092\u4f7f\u3044\u305f\u3044\u306f\u305a\u3002\n$ rpm -ql php-amazon-sdk2 | grep aws.phar\n/usr/share/pear/AWSSDKforPHP/aws.phar\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u4e0b\u307f\u305f\u3044\u306a\u306e\u66f8\u304f\u3068\u52d5\u304d\u307e\u3059\u3002\n\ncw_listMetrics.php\n<?php\nrequire 'AWSSDKforPHP/aws.phar';\n\nuse Aws\\CloudWatch\\CloudWatchClient;\n\n$cw = CloudWatchClient::factory(array(\n  'region' => 'us-west-2',\n  'key' => 'YOUR ACCESS KEY ID',\n  'secret' => 'YOUR SECRET ACCESS KEY',\n  ));\n\n$result = $cw->listMetrics();\nprint_r($result['Metrics'][0]);\n?>\n\n\nCredential \u306b\u95a2\u3057\u3066\u306f factory \u306e\u5f15\u6570\u3067\u306f\u306a\u304f\u74b0\u5883\u5909\u6570\u3067\u3082\u6307\u5b9a\u53ef\u3002\n$ export AWS_ACCESS_KEY_ID='YOUR ACCESS KEY ID'\n$ export AWS_SECRET_KEY='YOUR SECRET ACCESS KEY'\n\n\u3067\u3001\u5b9f\u884c\u3002\u30e1\u30c8\u30ea\u30c3\u30af\u304c\u8a70\u307e\u3063\u3066\u308b\u305c\u3002\n$ php cw_listMetrics.php\nPHP Warning:  strtotime(): It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in phar:///usr/share/pear/AWSSDKforPHP/aws.phar/Aws/Common/InstanceMetadata/InstanceMetadataClient.php on line 99\nArray\n(\n    [Dimensions] => Array\n        (\n        )\n\n    [MetricName] => NetworkIn\n    [Namespace] => AWS/EC2\n)\n\n\u4f55\u304b\u3001Warning \u51fa\u3066\u304f\u308b\u306e\u3067\u5acc\u3060\u306a\u30fc\u3068\u3044\u3046\u5834\u5408\u306f php.ini \u3092\u7de8\u96c6\u3057\u307e\u3057\u3087\u3046\u3002\n\n/etc/php.ini\n[Date]\n; Defines the default timezone used by the date functions\n; http://php.net/date.timezone\ndate.timezone = UTC\n\n\nlogging \u306b\u95a2\u3057\u3066\u306f\u6b21\u3092\u53c2\u7167: http://docs.aws.amazon.com/aws-sdk-php/guide/latest/faq.html#how-can-i-see-what-data-is-sent-over-the-wire\n\u3053\u308c\u3067 request/response \u3082\u898b\u308c\u307e\u3059\u3002\n\ncw_listMetrics.php\n<?php\nrequire 'AWSSDKforPHP/aws.phar';\n\nuse Guzzle\\Plugin\\Log\\LogPlugin;\nuse Aws\\CloudWatch\\CloudWatchClient;\n\n$cw = CloudWatchClient::factory(array(\n  'region' => 'us-west-2'\n  ));\n$cw->addSubscriber(LogPlugin::getDebugPlugin());\n\n$result = $cw->listMetrics();\nprint_r($result['Metrics'][0]);\n?>\n\n\nAmazon Linux \u306f AWS \u304c\u7528\u610f\u3057\u3066\u3044\u308b\u3060\u3051\u3042\u3063\u3066 repository \u306b\u8272\u3005\u5165\u3063\u3066\u3044\u307e\u3059\u3002\u3068\u308a\u3042\u3048\u305a\u4f7f\u3063\u3066\u307f\u308b\u306b\u306f\u6700\u9069\u3002\n\nAccess Key ID \u3068 Secret Access Key \u3092\u66f8\u304f\u3088\u3046\u306b\u3057\u3066\u307e\u3059\u3051\u3069\u3001IAM role \u4f7f\u3046\u3068\u304b\u8272\u3005\u65b9\u6cd5\u3042\u308b\u3068\u601d\u3046\u3093\u3067\u3088\u3057\u306a\u306b\u3002\n\n# PHP\n\n```shell-session\n$ sudo yum install php-amazon-sdk2\n(snip)\n\u5b8c\u4e86\u3057\u307e\u3057\u305f!\n```\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86! \u3088\u3044\u5b50\u306f\u304d\u3063\u3068 sdk2 \u306e\u65b9\u3092\u4f7f\u3044\u305f\u3044\u306f\u305a\u3002\n\n```shell-session\n$ rpm -ql php-amazon-sdk2 | grep aws.phar\n/usr/share/pear/AWSSDKforPHP/aws.phar\n```\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u4e0b\u307f\u305f\u3044\u306a\u306e\u66f8\u304f\u3068\u52d5\u304d\u307e\u3059\u3002\n\n```php:cw_listMetrics.php\n<?php\nrequire 'AWSSDKforPHP/aws.phar';\n\nuse Aws\\CloudWatch\\CloudWatchClient;\n\n$cw = CloudWatchClient::factory(array(\n  'region' => 'us-west-2',\n  'key' => 'YOUR ACCESS KEY ID',\n  'secret' => 'YOUR SECRET ACCESS KEY',\n  ));\n\n$result = $cw->listMetrics();\nprint_r($result['Metrics'][0]);\n?>\n```\n\nCredential \u306b\u95a2\u3057\u3066\u306f factory \u306e\u5f15\u6570\u3067\u306f\u306a\u304f\u74b0\u5883\u5909\u6570\u3067\u3082\u6307\u5b9a\u53ef\u3002\n\n```shell-session\n$ export AWS_ACCESS_KEY_ID='YOUR ACCESS KEY ID'\n$ export AWS_SECRET_KEY='YOUR SECRET ACCESS KEY'\n```\n\n\u3067\u3001\u5b9f\u884c\u3002\u30e1\u30c8\u30ea\u30c3\u30af\u304c\u8a70\u307e\u3063\u3066\u308b\u305c\u3002\n\n```shell-session\n$ php cw_listMetrics.php\nPHP Warning:  strtotime(): It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in phar:///usr/share/pear/AWSSDKforPHP/aws.phar/Aws/Common/InstanceMetadata/InstanceMetadataClient.php on line 99\nArray\n(\n    [Dimensions] => Array\n        (\n        )\n\n    [MetricName] => NetworkIn\n    [Namespace] => AWS/EC2\n)\n```\n\n\u4f55\u304b\u3001Warning \u51fa\u3066\u304f\u308b\u306e\u3067\u5acc\u3060\u306a\u30fc\u3068\u3044\u3046\u5834\u5408\u306f php.ini \u3092\u7de8\u96c6\u3057\u307e\u3057\u3087\u3046\u3002\n\n```php:/etc/php.ini\n[Date]\n; Defines the default timezone used by the date functions\n; http://php.net/date.timezone\ndate.timezone = UTC\n```\n\nlogging \u306b\u95a2\u3057\u3066\u306f\u6b21\u3092\u53c2\u7167: http://docs.aws.amazon.com/aws-sdk-php/guide/latest/faq.html#how-can-i-see-what-data-is-sent-over-the-wire\n\u3053\u308c\u3067 request/response \u3082\u898b\u308c\u307e\u3059\u3002\n\n```php:cw_listMetrics.php\n<?php\nrequire 'AWSSDKforPHP/aws.phar';\n\nuse Guzzle\\Plugin\\Log\\LogPlugin;\nuse Aws\\CloudWatch\\CloudWatchClient;\n\n$cw = CloudWatchClient::factory(array(\n  'region' => 'us-west-2'\n  ));\n$cw->addSubscriber(LogPlugin::getDebugPlugin());\n\n$result = $cw->listMetrics();\nprint_r($result['Metrics'][0]);\n?>\n```"}