{"context": " More than 1 year has passed since last update.Devise\u306eController\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u3088\u308a\u3082\u7c21\u5358\u306a\u65b9\u6cd5\u3067\u3059\u3002\n\u305f\u3060\u3001\u878d\u901a\u304c\u304d\u304b\u306a\u3044\u9762\u3082\u51fa\u3066\u304d\u307e\u3059\u3002(ActiveAdmin\u306f\u3053\u308c\u306b\u3088\u308a\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u30eb\u30fc\u30d7\u304c\u8d77\u304d\u305f\u306e\u3067\u3001\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093)\n\n\u3084\u308a\u65b9\n\u4ee5\u4e0b\u3092\u8ffd\u8a18\u3057\u307e\u3059\u3002\n\napp/controller/application_controller.rb\n\n  after_filter :store_location\n\n  # \u30ed\u30b0\u30a4\u30f3\u524d\u306e\u30d1\u30b9\u3092\u8a18\u61b6\n  def store_location\n    if (request.fullpath != \"/users/sign_in\" &&\n        request.fullpath != \"/users/sign_up\" &&\n        request.fullpath != \"/users/password\" &&\n        request.fullpath !~ Regexp.new(\"\\\\A/users/password.*\\\\z\") &&\n        !request.xhr?)\n      session[:previous_url] = request.fullpath\n    end\n  end\n\n\u3000#\u30ed\u30b0\u30a4\u30f3\u5f8c\u306e\u30d1\u30b9\u3092\u6307\u5b9a\n  def after_sign_in_path_for(resource)\n    if (session[:previous_url] == root_path)\n      super\n    else\n      session[:previous_url] || root_path\n    end\n  end\n\n\nDevise\u306eController\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u3088\u308a\u3082\u7c21\u5358\u306a\u65b9\u6cd5\u3067\u3059\u3002\n\u305f\u3060\u3001\u878d\u901a\u304c\u304d\u304b\u306a\u3044\u9762\u3082\u51fa\u3066\u304d\u307e\u3059\u3002(ActiveAdmin\u306f\u3053\u308c\u306b\u3088\u308a\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u30eb\u30fc\u30d7\u304c\u8d77\u304d\u305f\u306e\u3067\u3001\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093)\n\n# \u3084\u308a\u65b9\n\n\u4ee5\u4e0b\u3092\u8ffd\u8a18\u3057\u307e\u3059\u3002\n\n```rb:app/controller/application_controller.rb\n\n  after_filter :store_location\n\n  # \u30ed\u30b0\u30a4\u30f3\u524d\u306e\u30d1\u30b9\u3092\u8a18\u61b6\n  def store_location\n    if (request.fullpath != \"/users/sign_in\" &&\n        request.fullpath != \"/users/sign_up\" &&\n        request.fullpath != \"/users/password\" &&\n        request.fullpath !~ Regexp.new(\"\\\\A/users/password.*\\\\z\") &&\n        !request.xhr?)\n      session[:previous_url] = request.fullpath\n    end\n  end\n\n\u3000#\u30ed\u30b0\u30a4\u30f3\u5f8c\u306e\u30d1\u30b9\u3092\u6307\u5b9a\n  def after_sign_in_path_for(resource)\n    if (session[:previous_url] == root_path)\n      super\n    else\n      session[:previous_url] || root_path\n    end\n  end\n```\n", "tags": ["Rails4", "devise"]}