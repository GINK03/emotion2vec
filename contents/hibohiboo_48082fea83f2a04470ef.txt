{"context": "\n\n\u6982\u8981\nAngular2\u306e5 Min Quickstart \u3092Docker\u3092\u4f7f\u3063\u3066\u8a66\u3059\u3002\n(2016/7/13)\u3000\u5fc5\u8981\u306a\u624b\u9806\u3092\u884c\u308f\u305a\u5f37\u5f15\u306b\u884c\u3063\u3066\u3044\u305f\u90e8\u5206\u3092\u4fee\u6b63\n\u74b0\u5883\u306f\u4ee5\u4e0b\u306e\u901a\u308a\n\nOS:Windows10\nVirtualBox: 5.0.22\nVagrant: 1.8.4\n\n\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n\nWindows\u4e0a\u306e\u30c6\u30b9\u30c8\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b.\n- Vagrantfile\n- share\n\u3000- angular2\n\u3000  - index.html\n\u3000  - styles.css \n    - app\n      - app.component.ts\n      - main.ts\n\n\n(2016/7/13)       - lib.es6.d.ts\n  - gulp\n    - tasks\n      - task.js\n  - Docker\n    - angular2\n      - Dockerfile\n      - package.json\n      - systemjs.config.js\n      - tsconfig.json\n      - typings.json\n    - shell\n      - angular.sh\n      - env.conf\n\n\n\u5404\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a\n\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u306fAngular2\u30005 Min Quickstart \u306e\u901a\u308a\n- share\n\u3000- angular2\n\u3000  - index.html\n\u3000  - styles.css \n    - app\n      - app.component.ts\n      - main.ts\n  - Docker\n    - angular2\n      - package.json\n      - systemjs.config.js\n      - tsconfig.json\n      - typings.json\n\n(2016/7/3)typescript/lib/lib.es6.d.ts\u304b\u3089lib.es6.d.ts\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001\nshare/angular2/app/\u30d5\u30a9\u30eb\u30c0\u306b\u3044\u308c\u308b\u3002\n- share\n\u3000- angular2\n    - app\n      - lib.es6.d.ts\n\n(2013/07/16)\u3053\u308c\u304c\u306a\u3044\u3068\u3001 Error TS2304: Cannot find name\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u3002\n(2013/07/16)\u6253\u6d88\u3057\u90e8\u5206\u306ftypings install\u3092\u884c\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u304c\u539f\u56e0\u306e\u30a8\u30e9\u30fc\u3002\n\u4eee\u60f3\u74b0\u5883\u306e\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3067Docker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\nVagrantfile\n# ==> Docker\u30a4\u30f3\u30b9\u30c8\u30fc\u30ebshell.\u3053\u3053\u304b\u3089\n$docker_install = <<SHELL\n\u3000\u3000 # apt\u304c\u4f7f\u7528\u4e2d\u3067update\u304c\u6210\u529f\u3057\u306a\u3044\u3053\u3068\u304c\u3042\u308b\u305f\u3081\u6bba\u3057\u3066\u304b\u3089update\u3002\n    sudo killall -KILL apt.systemd.daily\n\n\u3000\u3000#\u3000\u4ee5\u4e0b\u3001Docker\u306e\u516c\u5f0f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\n    sudo apt-get update\n    sudo apt-get install apt-transport-https ca-certificates\n\n    sudo apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\n\n    echo 127.0.1.1 $(hostname) >> /etc/hosts\n\n    echo \"deb https://apt.dockerproject.org/repo ubuntu-xenial main\" > /etc/apt/sources.list.d/docker.list\n\n    sudo apt-get update\n    sudo apt-get purge lxc-docker\n    apt-cache policy docker-engine\n\n    sudo apt-get update\n    sudo apt-get install -y linux-image-extra-$(uname -r)\n\n    sudo apt-get update\n    sudo apt-get -y install docker-engine\n\n\u3000\u3000#\u3000Docker\u3092sudo\u306a\u3057\u306b\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046vagrant\u30e6\u30fc\u30b6\u3092docker\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\n    sudo gpasswd -a vagrant docker\nSHELL\n# <== Docker\u30a4\u30f3\u30b9\u30c8\u30fc\u30ebshell.\u3053\u3053\u307e\u3067\n\n#\u3000\u4eee\u60f3\u74b0\u5883\u8a2d\u5b9a\nVagrant.configure(2) do |config|\n  config.vm.box = \"bento/ubuntu-16.04\"\n\n  # \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\u3002\n  config.vm.network \"private_network\", ip: \"192.168.50.12\"\n\n  # \u4f7f\u7528\u3059\u308b\u30e1\u30e2\u30ea\u5bb9\u91cf\u3092\u5909\u66f4\u3002\n  # \u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068512\u3067\u5c11\u306a\u3044\u305f\u3081docker\u306ebuild\u304c\u5931\u6557\u3057\u3084\u3059\u3044\n  config.vm.provider \"virtualbox\" do |vm|\n    # \u30e1\u30e2\u30ea\u30921024MB\u306b\u8a2d\u5b9a\n    vm.memory = 1024\n    # Vagrant1.8\u304b\u3089\u5229\u7528\u51fa\u6765\u308bLinked Clone\u3092\u30aa\u30f3\u306b\u3059\u308b\u3002\n    vm.linked_clone = true\n  end\n\n  # docker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n  config.vm.provision \"shell\", inline: $docker_install\n\nend\n\n\n\nDocker\u30d5\u30a1\u30a4\u30eb\u8a2d\u5b9a\u3002\nangular2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u3001\u30d5\u30a1\u30a4\u30eb\u5171\u6709\u306e\u305f\u3081\u306egulp\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n(2016/7/13)typings install\u3092\u3059\u308b\u305f\u3081\u306e RUN npm run postinstall\u3092\u8ffd\u8a18\u3002\n\nDocker/angular2/Dockerfile\nFROM node:4.4.7\n\n# Add our user and group first to make sure their IDs get assigned consistently\nRUN groupadd -r vagrant && useradd -r -g vagrant vagrant \n\nENV DOCKER_FILE_DIR=/vagrant/Docker/angular2\nENV WORK_DIR=/home/vagrant/angular2-quickstart\n\n# ======================================================================\n#\u30bf\u30b9\u30af\u30e9\u30f3\u30ca\u30fc\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nENV GULP_DIR=/home/vagrant/gulp\nRUN mkdir -p ${GULP_DIR}\nWORKDIR ${GULP_DIR}\n\n# package.json\u3092\u66f8\u304d\u51fa\u3057\n# name\u3092gulp\u306b\u3059\u308b\u3068\u30a8\u30e9\u30fc\u3068\u306a\u308b\nRUN echo '{ \"name\": \"my_gulp\",  \"scripts\": { \"gulp\":\"gulp\" }}' > package.json\n\n# install\nRUN npm install -g gulp \nRUN npm install --save-dev gulp \nRUN npm install --save-dev require-dir \nRUN npm install --save-dev gulp-if \n\n#gulpfile\u3092\u66f8\u304d\u51fa\u3057\nRUN echo \"var requireDir = require('require-dir'); requireDir('/home/vagrant/share/gulp/tasks/', { recurse: true }); \" > gulpfile.js \n\n# ======================================================================\n\nRUN mkdir -p ${WORK_DIR}\nWORKDIR ${WORK_DIR}\n\n# COPY\u547d\u4ee4\u3067\u306f../\u306e\u3088\u3046\u306b\u89aa\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u6307\u5b9a\u3067\u304d\u306a\u3044\u3002\n# \u69cb\u7bc9\u6642\u306b\u30b3\u30f3\u30c6\u30af\u30b9\u30c8\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u3092Docker\u30c7\u30fc\u30e2\u30f3\u306b\u9001\u308b\u305f\u3081\nCOPY package.json $WORK_DIR/package.json\nRUN npm install\n\n# \u5404\u7a2e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7528\u610f\nCOPY tsconfig.json ${WORK_DIR}/tsconfig.json\nCOPY typings.json ${WORK_DIR}/typings.json\nCOPY systemjs.config.js ${WORK_DIR}/systemjs.config.js\n\n# typings install\nRUN npm run postinstall\n\nRUN mkdir app\n\n# ======================================================================\nENV SHARE_DIR=/home/vagrant/share\nRUN mkdir -p ${SHARE_DIR}\n# ======================================================================\n\nWORKDIR ${GULP_DIR}\nCMD [\"npm\", \"run\", \"gulp\" ]\n\n\n\npackage.json\n{\n  \"name\": \"angular2-quickstart\",\n  \"version\": \"1.0.0\",\n  \"scripts\": {\n    \"start\": \"tsc && concurrently \\\"npm run tsc:w\\\" \\\"npm run lite\\\" \",\n    \"lite\": \"lite-server\",\n    \"postinstall\": \"typings install\",\n    \"tsc\": \"tsc\",\n    \"tsc:w\": \"tsc -w\",\n    \"typings\": \"typings\"\n  },\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"@angular/common\": \"2.0.0-rc.4\",\n    \"@angular/compiler\": \"2.0.0-rc.4\",\n    \"@angular/core\": \"2.0.0-rc.4\",\n    \"@angular/forms\": \"0.2.0\",\n    \"@angular/http\": \"2.0.0-rc.4\",\n    \"@angular/platform-browser\": \"2.0.0-rc.4\",\n    \"@angular/platform-browser-dynamic\": \"2.0.0-rc.4\",\n    \"@angular/router\": \"3.0.0-beta.1\",\n    \"@angular/router-deprecated\": \"2.0.0-rc.2\",\n    \"@angular/upgrade\": \"2.0.0-rc.4\",\n    \"systemjs\": \"0.19.27\",\n    \"core-js\": \"^2.4.0\",\n    \"reflect-metadata\": \"^0.1.3\",\n    \"rxjs\": \"5.0.0-beta.6\",\n    \"zone.js\": \"^0.6.12\",\n    \"angular2-in-memory-web-api\": \"0.0.14\",\n    \"bootstrap\": \"^3.3.6\"\n  },\n  \"devDependencies\": {\n    \"concurrently\": \"^2.0.0\",\n    \"lite-server\": \"^2.2.0\",\n    \"typescript\": \"^1.8.10\",\n    \"typings\":\"^1.0.4\"\n  }\n}\n\n\ngulp\u7528\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8a18\u8ff0.\n\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306eangular2\u3092\u76e3\u8996\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b\u3002\n\u307e\u305f\u3001angular2\u3092\u8d77\u52d5\u3059\u308b\u3002\n\nshare/gulp/taks.js\nvar gulp = require('/home/vagrant/gulp/node_modules/gulp');\nvar spawn = require('child_process').spawn;\n\nvar angular2_dir = \"/home/vagrant/angular2-quickstart\";\n\ngulp.task('default', ['copy', 'watch', 'angular2']);\n\ngulp.task('copy',function(){\n    var base_dir = \"/home/vagrant/share/angular2\",\n        dist_dir = angular2_dir;\n    return gulp.src(\n        [ base_dir + '/*', base_dir + '/app/*' ],\n        { \"base\": base_dir }\n    )\n    .pipe( gulp.dest( dist_dir ) );\n});\n\ngulp.task('angular2', function(){\n  spawn('npm',['start'], {cwd:angular2_dir,\n    stdio: ['pipe', process.stdout, process.stderr]});\n});\n\ngulp.task('watch',['copy'],function(){\n  gulp.watch(['/home/vagrant/share/angular2/**'], ['copy']);\n});\n\n\n\ndocker\u8d77\u52d5\u7528\u306e\u30b7\u30a7\u30eb\u3092\u8a18\u8ff0\n\nDocker/shell/env.conf\n#!/bin/bash\n\n# docker\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\npath_Dockerfile_dir=\"/vagrant/Docker\"\n\n\n#\u5171\u901a\u95a2\u6570\n\n# docker\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30d3\u30eb\u30c9\nbuild(){\n  local dir=$1\n  local imageName=$2\n\n  # \u79fb\u52d5\u3057\u3066\u30d3\u30eb\u30c9\n  cd $dir && docker build -t $imageName .\n}\n\n# \u524d\u56de\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u30c1\u30a7\u30c3\u30af\u3002\u6b8b\u3063\u3066\u3044\u308c\u3070\u524a\u9664\ncheckBeforeContainer(){\n  local containerName=$1\n\n  # \u524d\u56de\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u6b8b\u3063\u3066\u3044\u308b\u304b\u30c1\u30a7\u30c3\u30af\u3002\n  docker ps -a | grep $containerName >/dev/null 2>&1\n\n  # \u30b3\u30f3\u30c6\u30ca\u304c\u6b8b\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u524a\u9664\u3002\n  if [ $? -eq 0 ]; then\n    docker rm -f $containerName\n  fi\n}\n\n# \u5f15\u6570\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u6642\u306frun\u3092\u884c\u3046\ndefault(){\n  if [ $1 -eq 0 ] ; then\n    run\n    exit\n  fi\n}\n\n# \u6307\u5b9a\u3055\u308c\u305f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u51e6\u7406\u3092\u5207\u308a\u66ff\u3048\u308b\u3002\nmain(){\n  local opt=$1\n  local buildDir=$2\n  local imageName=$3\n  local containerName=$4\n\n  case ${opt} in\n    b)\n      build ${buildDir} ${imageName}\n      ;;\n    r)\n      run\n      ;;\n    d)\n      run_d\n      ;;\n    i)\n      run_d\n      docker exec -it ${containerName} /bin/bash\n      ;;\n    \\?)\n      exit 1\n      ;;\n  esac\n}\n\n\n\nDocker/shell/angular.sh\n#!/bin/bash \n\nsource \"/vagrant/Docker/shell/env.conf\"\n\nimageName=\"hibo/angular2\"\ncontainerName=\"angular2\"\nhost_src_dir=\"/vagrant/share\"\ncontainer_src_dir=\"/home/vagrant/share\"\ndocker_dir=\"${path_Dockerfile_dir}/angular2\"\n\n# -t: docker\u5074\u306e\u6a19\u6e96\u51fa\u529b\u3092\u30db\u30b9\u30c8\u306e\u6a19\u6e96\u51fa\u529b\u306b\u3064\u306a\u3052\u308b\u3002\n# -i: \u30db\u30b9\u30c8\u5074\u306e\u30ad\u30fc\u30dc\u30fc\u30c9\u3067\u6253\u3063\u305f\u6587\u5b57\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u9001\u308b\n# -p:\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30c7\u30a3\u30f3\u30b0 \u30db\u30b9\u30c8\u5074\uff1a\u30b3\u30f3\u30c6\u30ca\u5074\n# -e:\u74b0\u5883\u5909\u6570\n# -u:user\n# -v: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5171\u6709\n# -w: \u30ef\u30fc\u30af\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\nrun(){\n  docker run --name $containerName --rm -it \\\n             -p 80:3000 \\\n             -m \"300M\" --memory-swap \"512M\" \\\n             -e \"NODE_ENV=production\" \\\n             -v $host_src_dir:$container_src_dir \\\n             $imageName \n}\n\nrun_d(){\n  docker run --name $containerName -d -i \\\n             -p 80:3000 \\\n             -m \"300M\" --memory-swap \"512M\" \\\n             -e \"NODE_ENV=production\" \\\n             -v $host_src_dir:$container_src_dir \\\n             $imageName \n}\n\ncheckBeforeContainer $containerName\ndefault $#\n\nwhile getopts brdi opt\ndo\n  main ${opt} $docker_dir $imageName $containerName\ndone\n\n\n\n\u30d5\u30a1\u30a4\u30eb\u3092\u3059\u3079\u3066\u6e96\u5099\u3067\u304d\u305f\u3089\u3001\nvagrant up\nvagrant ssh-config --host angular >> ~/.ssh/config\nssh angular\n\nssh\u63a5\u7d9a\u3067\u304d\u305f\u3089\u3001\u4eee\u60f3\u74b0\u5883\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3002\n/vagrant/Docker/shell/angular.sh -b\n/vagrant/Docker/shell/angular.sh\n\nDocker\u304c\u7acb\u3061\u4e0a\u304c\u3063\u305f\u3089\u3001\u30d6\u30e9\u30a6\u30b6\u3067192.168.50.12\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\nangular2\u306equickstart\u306e\u753b\u9762\u304c\u898b\u3048\u308b\u306f\u305a\u3002\n\n\u53c2\u8003\u8cc7\u6599\n5 Min Quickstart \nlib.es6.d.ts\nstack over flow\n# \u6982\u8981\nAngular2\u306e[5 Min Quickstart ][link1]\u3092Docker\u3092\u4f7f\u3063\u3066\u8a66\u3059\u3002\n\n(2016/7/13)\u3000\u5fc5\u8981\u306a\u624b\u9806\u3092\u884c\u308f\u305a\u5f37\u5f15\u306b\u884c\u3063\u3066\u3044\u305f\u90e8\u5206\u3092\u4fee\u6b63\n\n\u74b0\u5883\u306f\u4ee5\u4e0b\u306e\u901a\u308a\n \n - OS:Windows10\n - VirtualBox: 5.0.22\n - Vagrant: 1.8.4\n\n# \u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n\n```Windows\u4e0a\u306e\u30c6\u30b9\u30c8\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b.\n- Vagrantfile\n- share\n\u3000- angular2\n\u3000  - index.html\n\u3000  - styles.css \n    - app\n      - app.component.ts\n      - main.ts\n```\n\n(2016/7/13)       ~~- lib.es6.d.ts~~\n\n```\n  - gulp\n    - tasks\n      - task.js\n  - Docker\n    - angular2\n      - Dockerfile\n      - package.json\n      - systemjs.config.js\n      - tsconfig.json\n      - typings.json\n    - shell\n      - angular.sh\n      - env.conf\n```\n\n# \u5404\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a\n\n\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u306f[Angular2\u30005 Min Quickstart ][link1]\u306e\u901a\u308a\n\n```\n- share\n\u3000- angular2\n\u3000  - index.html\n\u3000  - styles.css \n    - app\n      - app.component.ts\n      - main.ts\n  - Docker\n    - angular2\n      - package.json\n      - systemjs.config.js\n      - tsconfig.json\n      - typings.json\n```\n\n(2016/7/3)~~[typescript/lib/lib.es6.d.ts][link2]\u304b\u3089lib.es6.d.ts\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001\nshare/angular2/app/\u30d5\u30a9\u30eb\u30c0\u306b\u3044\u308c\u308b\u3002~~\n\n```\n- share\n\u3000- angular2\n    - app\n      - lib.es6.d.ts\n```\n\n(2013/07/16)~~\u3053\u308c\u304c\u306a\u3044\u3068\u3001 ``` Error TS2304: Cannot find name```\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u3002~~\n(2013/07/16)\u6253\u6d88\u3057\u90e8\u5206\u306f`typings install `\u3092\u884c\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u304c\u539f\u56e0\u306e\u30a8\u30e9\u30fc\u3002\n\n\n\u4eee\u60f3\u74b0\u5883\u306e\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3067Docker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n```shell:Vagrantfile\n# ==> Docker\u30a4\u30f3\u30b9\u30c8\u30fc\u30ebshell.\u3053\u3053\u304b\u3089\n$docker_install = <<SHELL\n\u3000\u3000 # apt\u304c\u4f7f\u7528\u4e2d\u3067update\u304c\u6210\u529f\u3057\u306a\u3044\u3053\u3068\u304c\u3042\u308b\u305f\u3081\u6bba\u3057\u3066\u304b\u3089update\u3002\n    sudo killall -KILL apt.systemd.daily\n\n\u3000\u3000#\u3000\u4ee5\u4e0b\u3001Docker\u306e\u516c\u5f0f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\n    sudo apt-get update\n    sudo apt-get install apt-transport-https ca-certificates\n\n    sudo apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\n\n    echo 127.0.1.1 $(hostname) >> /etc/hosts\n\n    echo \"deb https://apt.dockerproject.org/repo ubuntu-xenial main\" > /etc/apt/sources.list.d/docker.list\n\n    sudo apt-get update\n    sudo apt-get purge lxc-docker\n    apt-cache policy docker-engine\n\n    sudo apt-get update\n    sudo apt-get install -y linux-image-extra-$(uname -r)\n\n    sudo apt-get update\n    sudo apt-get -y install docker-engine\n\n\u3000\u3000#\u3000Docker\u3092sudo\u306a\u3057\u306b\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046vagrant\u30e6\u30fc\u30b6\u3092docker\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\n    sudo gpasswd -a vagrant docker\nSHELL\n# <== Docker\u30a4\u30f3\u30b9\u30c8\u30fc\u30ebshell.\u3053\u3053\u307e\u3067\n\n#\u3000\u4eee\u60f3\u74b0\u5883\u8a2d\u5b9a\nVagrant.configure(2) do |config|\n  config.vm.box = \"bento/ubuntu-16.04\"\n  \n  # \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\u3002\n  config.vm.network \"private_network\", ip: \"192.168.50.12\"\n  \n  # \u4f7f\u7528\u3059\u308b\u30e1\u30e2\u30ea\u5bb9\u91cf\u3092\u5909\u66f4\u3002\n  # \u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068512\u3067\u5c11\u306a\u3044\u305f\u3081docker\u306ebuild\u304c\u5931\u6557\u3057\u3084\u3059\u3044\n  config.vm.provider \"virtualbox\" do |vm|\n    # \u30e1\u30e2\u30ea\u30921024MB\u306b\u8a2d\u5b9a\n    vm.memory = 1024\n    # Vagrant1.8\u304b\u3089\u5229\u7528\u51fa\u6765\u308bLinked Clone\u3092\u30aa\u30f3\u306b\u3059\u308b\u3002\n    vm.linked_clone = true\n  end\n\n  # docker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n  config.vm.provision \"shell\", inline: $docker_install\n\nend\n\n```\n\nDocker\u30d5\u30a1\u30a4\u30eb\u8a2d\u5b9a\u3002\nangular2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u3001\u30d5\u30a1\u30a4\u30eb\u5171\u6709\u306e\u305f\u3081\u306egulp\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n(2016/7/13)typings install\u3092\u3059\u308b\u305f\u3081\u306e ` RUN npm run postinstall `\u3092\u8ffd\u8a18\u3002\n\n```bash:Docker/angular2/Dockerfile\nFROM node:4.4.7\n\n# Add our user and group first to make sure their IDs get assigned consistently\nRUN groupadd -r vagrant && useradd -r -g vagrant vagrant \n\nENV DOCKER_FILE_DIR=/vagrant/Docker/angular2\nENV WORK_DIR=/home/vagrant/angular2-quickstart\n\n# ======================================================================\n#\u30bf\u30b9\u30af\u30e9\u30f3\u30ca\u30fc\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nENV GULP_DIR=/home/vagrant/gulp\nRUN mkdir -p ${GULP_DIR}\nWORKDIR ${GULP_DIR}\n\n# package.json\u3092\u66f8\u304d\u51fa\u3057\n# name\u3092gulp\u306b\u3059\u308b\u3068\u30a8\u30e9\u30fc\u3068\u306a\u308b\nRUN echo '{ \"name\": \"my_gulp\",  \"scripts\": { \"gulp\":\"gulp\" }}' > package.json\n\n# install\nRUN npm install -g gulp \nRUN npm install --save-dev gulp \nRUN npm install --save-dev require-dir \nRUN npm install --save-dev gulp-if \n\n#gulpfile\u3092\u66f8\u304d\u51fa\u3057\nRUN echo \"var requireDir = require('require-dir'); requireDir('/home/vagrant/share/gulp/tasks/', { recurse: true }); \" > gulpfile.js \n\n# ======================================================================\n\nRUN mkdir -p ${WORK_DIR}\nWORKDIR ${WORK_DIR}\n\n# COPY\u547d\u4ee4\u3067\u306f../\u306e\u3088\u3046\u306b\u89aa\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u6307\u5b9a\u3067\u304d\u306a\u3044\u3002\n# \u69cb\u7bc9\u6642\u306b\u30b3\u30f3\u30c6\u30af\u30b9\u30c8\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u3092Docker\u30c7\u30fc\u30e2\u30f3\u306b\u9001\u308b\u305f\u3081\nCOPY package.json $WORK_DIR/package.json\nRUN npm install\n\n# \u5404\u7a2e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7528\u610f\nCOPY tsconfig.json ${WORK_DIR}/tsconfig.json\nCOPY typings.json ${WORK_DIR}/typings.json\nCOPY systemjs.config.js ${WORK_DIR}/systemjs.config.js\n\n# typings install\nRUN npm run postinstall\n\nRUN mkdir app\n\n# ======================================================================\nENV SHARE_DIR=/home/vagrant/share\nRUN mkdir -p ${SHARE_DIR}\n# ======================================================================\n\nWORKDIR ${GULP_DIR}\nCMD [\"npm\", \"run\", \"gulp\" ]\n```\n\n```json:package.json\n{\n  \"name\": \"angular2-quickstart\",\n  \"version\": \"1.0.0\",\n  \"scripts\": {\n    \"start\": \"tsc && concurrently \\\"npm run tsc:w\\\" \\\"npm run lite\\\" \",\n    \"lite\": \"lite-server\",\n    \"postinstall\": \"typings install\",\n    \"tsc\": \"tsc\",\n    \"tsc:w\": \"tsc -w\",\n    \"typings\": \"typings\"\n  },\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"@angular/common\": \"2.0.0-rc.4\",\n    \"@angular/compiler\": \"2.0.0-rc.4\",\n    \"@angular/core\": \"2.0.0-rc.4\",\n    \"@angular/forms\": \"0.2.0\",\n    \"@angular/http\": \"2.0.0-rc.4\",\n    \"@angular/platform-browser\": \"2.0.0-rc.4\",\n    \"@angular/platform-browser-dynamic\": \"2.0.0-rc.4\",\n    \"@angular/router\": \"3.0.0-beta.1\",\n    \"@angular/router-deprecated\": \"2.0.0-rc.2\",\n    \"@angular/upgrade\": \"2.0.0-rc.4\",\n    \"systemjs\": \"0.19.27\",\n    \"core-js\": \"^2.4.0\",\n    \"reflect-metadata\": \"^0.1.3\",\n    \"rxjs\": \"5.0.0-beta.6\",\n    \"zone.js\": \"^0.6.12\",\n    \"angular2-in-memory-web-api\": \"0.0.14\",\n    \"bootstrap\": \"^3.3.6\"\n  },\n  \"devDependencies\": {\n    \"concurrently\": \"^2.0.0\",\n    \"lite-server\": \"^2.2.0\",\n    \"typescript\": \"^1.8.10\",\n    \"typings\":\"^1.0.4\"\n  }\n}\n```\n\ngulp\u7528\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8a18\u8ff0.\n\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306eangular2\u3092\u76e3\u8996\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b\u3002\n\u307e\u305f\u3001angular2\u3092\u8d77\u52d5\u3059\u308b\u3002\n\n```js:share/gulp/taks.js\nvar gulp = require('/home/vagrant/gulp/node_modules/gulp');\nvar spawn = require('child_process').spawn;\n\nvar angular2_dir = \"/home/vagrant/angular2-quickstart\";\n\ngulp.task('default', ['copy', 'watch', 'angular2']);\n\ngulp.task('copy',function(){\n    var base_dir = \"/home/vagrant/share/angular2\",\n        dist_dir = angular2_dir;\n    return gulp.src(\n        [ base_dir + '/*', base_dir + '/app/*' ],\n        { \"base\": base_dir }\n    )\n    .pipe( gulp.dest( dist_dir ) );\n});\n\ngulp.task('angular2', function(){\n  spawn('npm',['start'], {cwd:angular2_dir,\n    stdio: ['pipe', process.stdout, process.stderr]});\n});\n\ngulp.task('watch',['copy'],function(){\n  gulp.watch(['/home/vagrant/share/angular2/**'], ['copy']);\n});\n\n```\n\ndocker\u8d77\u52d5\u7528\u306e\u30b7\u30a7\u30eb\u3092\u8a18\u8ff0\n\n```bash:Docker/shell/env.conf\n#!/bin/bash\n\n# docker\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\npath_Dockerfile_dir=\"/vagrant/Docker\"\n\n\n#\u5171\u901a\u95a2\u6570\n\n# docker\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u30d3\u30eb\u30c9\nbuild(){\n  local dir=$1\n  local imageName=$2\n\n  # \u79fb\u52d5\u3057\u3066\u30d3\u30eb\u30c9\n  cd $dir && docker build -t $imageName .\n}\n\n# \u524d\u56de\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u30c1\u30a7\u30c3\u30af\u3002\u6b8b\u3063\u3066\u3044\u308c\u3070\u524a\u9664\ncheckBeforeContainer(){\n  local containerName=$1\n\n  # \u524d\u56de\u306e\u30b3\u30f3\u30c6\u30ca\u304c\u6b8b\u3063\u3066\u3044\u308b\u304b\u30c1\u30a7\u30c3\u30af\u3002\n  docker ps -a | grep $containerName >/dev/null 2>&1\n\n  # \u30b3\u30f3\u30c6\u30ca\u304c\u6b8b\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u524a\u9664\u3002\n  if [ $? -eq 0 ]; then\n    docker rm -f $containerName\n  fi\n}\n\n# \u5f15\u6570\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u6642\u306frun\u3092\u884c\u3046\ndefault(){\n  if [ $1 -eq 0 ] ; then\n    run\n    exit\n  fi\n}\n\n# \u6307\u5b9a\u3055\u308c\u305f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u51e6\u7406\u3092\u5207\u308a\u66ff\u3048\u308b\u3002\nmain(){\n  local opt=$1\n  local buildDir=$2\n  local imageName=$3\n  local containerName=$4\n\n  case ${opt} in\n    b)\n      build ${buildDir} ${imageName}\n      ;;\n    r)\n      run\n      ;;\n    d)\n      run_d\n      ;;\n    i)\n      run_d\n      docker exec -it ${containerName} /bin/bash\n      ;;\n    \\?)\n      exit 1\n      ;;\n  esac\n}\n```\n\n```bash:Docker/shell/angular.sh\n#!/bin/bash \n\nsource \"/vagrant/Docker/shell/env.conf\"\n\nimageName=\"hibo/angular2\"\ncontainerName=\"angular2\"\nhost_src_dir=\"/vagrant/share\"\ncontainer_src_dir=\"/home/vagrant/share\"\ndocker_dir=\"${path_Dockerfile_dir}/angular2\"\n\n# -t: docker\u5074\u306e\u6a19\u6e96\u51fa\u529b\u3092\u30db\u30b9\u30c8\u306e\u6a19\u6e96\u51fa\u529b\u306b\u3064\u306a\u3052\u308b\u3002\n# -i: \u30db\u30b9\u30c8\u5074\u306e\u30ad\u30fc\u30dc\u30fc\u30c9\u3067\u6253\u3063\u305f\u6587\u5b57\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u9001\u308b\n# -p:\u30dd\u30fc\u30c8\u30d5\u30a9\u30ef\u30c7\u30a3\u30f3\u30b0 \u30db\u30b9\u30c8\u5074\uff1a\u30b3\u30f3\u30c6\u30ca\u5074\n# -e:\u74b0\u5883\u5909\u6570\n# -u:user\n# -v: \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5171\u6709\n# -w: \u30ef\u30fc\u30af\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\nrun(){\n  docker run --name $containerName --rm -it \\\n             -p 80:3000 \\\n             -m \"300M\" --memory-swap \"512M\" \\\n             -e \"NODE_ENV=production\" \\\n             -v $host_src_dir:$container_src_dir \\\n             $imageName \n}\n\nrun_d(){\n  docker run --name $containerName -d -i \\\n             -p 80:3000 \\\n             -m \"300M\" --memory-swap \"512M\" \\\n             -e \"NODE_ENV=production\" \\\n             -v $host_src_dir:$container_src_dir \\\n             $imageName \n}\n\ncheckBeforeContainer $containerName\ndefault $#\n\nwhile getopts brdi opt\ndo\n  main ${opt} $docker_dir $imageName $containerName\ndone\n\n```\n\n\u30d5\u30a1\u30a4\u30eb\u3092\u3059\u3079\u3066\u6e96\u5099\u3067\u304d\u305f\u3089\u3001\n\n```\nvagrant up\nvagrant ssh-config --host angular >> ~/.ssh/config\nssh angular\n```\n\nssh\u63a5\u7d9a\u3067\u304d\u305f\u3089\u3001\u4eee\u60f3\u74b0\u5883\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3002\n\n```\n/vagrant/Docker/shell/angular.sh -b\n/vagrant/Docker/shell/angular.sh\n```\n\nDocker\u304c\u7acb\u3061\u4e0a\u304c\u3063\u305f\u3089\u3001\u30d6\u30e9\u30a6\u30b6\u3067192.168.50.12\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\nangular2\u306equickstart\u306e\u753b\u9762\u304c\u898b\u3048\u308b\u306f\u305a\u3002\n\n#\u53c2\u8003\u8cc7\u6599\n[5 Min Quickstart ][link1]\n[lib.es6.d.ts][link2]\n[stack over flow][link3]\n\n[link1]:https://angular.io/docs/ts/latest/quickstart.html\n\n[link2]:https://github.com/Microsoft/TypeScript/blob/master/lib/lib.es6.d.ts\n[link3]:http://stackoverflow.com/questions/33332394/angular-2-typescript-cant-find-names\n", "tags": ["docker", "Angular2"]}