{"context": "\n\nkintone \u3068 Amazon Polly \u306e\u9023\u643a\n\u4eca\u9031\u306f\u3001AWS\u30c7\u30a3\u30d9\u30ed\u30c3\u30d1\u30fc\u306e\u796d\u5178\u300cAWS re:Invent 2016\u300d\u304c\u958b\u50ac\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u4eca\u5e74\u306fkintone\u3082\u30d6\u30fc\u30b9\u51fa\u5c55\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u73fe\u5730\u6642\u9593\u306e11/30\u306812/1\u306f\u305d\u308c\u305e\u308cKeynote\u304c\u884c\u308f\u308c\u3001AWS\u306e\u65b0\u30b5\u30fc\u30d3\u30b9\u304c\u8272\u3005\u3068\u767a\u8868\u3055\u308c\u308b\u975e\u5e38\u306b\u30a8\u30ad\u30b5\u30a4\u30c6\u30a3\u30f3\u30b0\u306a\u30a4\u30d9\u30f3\u30c8\u3067\u3059\u3002\n\u4eca\u671d\u306eKeynote\u3067\u3082\u5e7e\u3064\u304b\u306e\u65b0\u30b5\u30fc\u30d3\u30b9\u306e\u767a\u8868\u304c\u3042\u308a\u307e\u3057\u305f\u3002\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u300ckintone Advent Calendar 2016\u300d\u306e\u521d\u65e5\u306f\u3001\u305d\u3093\u306a\u30db\u30c3\u30c8\u306aAWS\u306e\u65b0\u30b5\u30fc\u30d3\u30b9\u306e\u9023\u643a\u3092\u304a\u5c4a\u3051\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nkintone\u3068\u76f8\u6027\u304c\u826f\u3055\u305d\u3046\u306a\u30b5\u30fc\u30d3\u30b9\u304c\u5e7e\u3064\u304b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u4eca\u56de\u306f\u307e\u305a\u300cAmazon Polly\u300d\u3068\u547c\u3070\u308c\u308b\u300c\u6587\u7ae0\u304b\u3089\u97f3\u58f0\u3092\u4f5c\u308a\u51fa\u3059\u300d\u30b5\u30fc\u30d3\u30b9\u3068\u306e\u9023\u643a\u3092\u3084\u3063\u3066\u307f\u307e\u3057\u305f\u3002Amazon Polly\u306b\u95a2\u3059\u308b\u8a73\u7d30\u306f\u3053\u3061\u3089\u306e\u30d6\u30ed\u30b0\u7b49\u3092\u3054\u89a7\u9802\u304f\u306e\u304c\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\nkintone \u3068 Amazon Polly \u306e\u9023\u643a\n\u69d8\u3005\u306a\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u304c\u60f3\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u30b7\u30f3\u30d7\u30eb\u306bMP3\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308bkintone\u30a2\u30d7\u30ea\u3092Amazon Polly\u3092\u4f7f\u3063\u3066\u4f5c\u6210\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u69cb\u6210\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\nAmazon Polly\u3068kintone\u9023\u643a\u306e\u8a2d\u5b9a\n\nkintone\u30a2\u30d7\u30ea - \u300cSpeak by Polly\u300d\uff08\u8aad\u307f\u4e0a\u3052\u30a2\u30d7\u30ea\uff09\n\u6b21\u306e\u3088\u3046\u306a\u30d5\u30a3\u30fc\u30eb\u30c9\u306ekintone\u30a2\u30d7\u30ea\u3092\u6e96\u5099\u3057\u307e\u3059\u3002\n\n\n\n\u9805\u76ee\u540d\u30fb\u30d5\u30a3\u30fc\u30eb\u30c9\u30b3\u30fc\u30c9\n\u5185\u5bb9\n\u30d5\u30a3\u30fc\u30eb\u30c9\u30bf\u30a4\u30d7\n\n\n\n\nText\n\u97f3\u58f0\u306b\u5909\u63db\u3057\u305f\u3044\u6587\u5b57\u5217\uff08\u6587\u7ae0\uff09\u3092\u5165\u529b\u3059\u308b\u305f\u3081\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3067\u3059\u3002\n\u6587\u5b57\u52171\u884c\n\n\nAttachment\n\u6587\u5b57\u5217\u304b\u3089\u5909\u63db\u3055\u308c\u305f\u97f3\u58f0\uff08MP3\uff09\u30d5\u30a1\u30a4\u30eb\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3067\u3059\u3002\n\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\n\n\n\n\n\nAWS Lambda\n\u3053\u3061\u3089\u304c\u4eca\u56de\u306e\u30e1\u30a4\u30f3\u306b\u306a\u308a\u307e\u3059\u304c\u3001\u5927\u307e\u304b\u306b\u306f\u6b21\u306e\u3088\u3046\u306a\u5185\u5bb9\u3067\u3059\u3002\n1. Amazon API Gateway\u7d4c\u7531\u3067\u53d7\u3051\u53d6\u3063\u305fkintone\u306e\u30ec\u30b3\u30fc\u30c9ID\u304b\u3089\u97f3\u58f0\u306b\u5909\u63db\u3057\u305f\u3044\u6587\u5b57\u5217\uff08Text\uff09\u3092\u53d6\u5f97\u3059\u308b\n2. \u53d6\u5f97\u3057\u305f\u30ec\u30b3\u30fc\u30c9ID\u304b\u3089\u97f3\u58f0\u306b\u5909\u63db\u3057\u305f\u3044\u6587\u5b57\u5217\uff08Text\uff09\u3092\u53d6\u5f97\u3059\u308b\n3. \u53d6\u5f97\u3057\u305f\u6587\u5b57\u5217\u3092Amazon Polly\u306eAPI\u306b\u304b\u3051\u3066\u3001\u97f3\u58f0\uff08MP\uff13\uff09\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b\n4. \u751f\u6210\u3057\u305fMP3\u30d5\u30a1\u30a4\u30eb\u3092kintone\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\n\u3053\u308c\u3089\u306e\u52d5\u304d\u3092API Gateway\u7d4c\u7531\u3067\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nLambda\u95a2\u6570\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u524d\u6e96\u5099\n\n\u4eca\u56de\u3001kintone\u3078\u306eREST API\u30a2\u30af\u30bb\u30b9\u7528\u306brequests\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u5229\u7528\u3057\u307e\u3059\u306e\u3067\u3001\u4e8b\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\u307e\u305f\u3001\u4f5c\u696d\u30d5\u30a9\u30eb\u30c0\u3092\u4eca\u56de\u6b21\u306e\u3088\u3046\u306b\u6c7a\u3081\u3066\u4f5c\u696d\u3092\u9032\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n$ mkdir workspace\n$ cd workspace\n\n\nLambda\u95a2\u6570\u306ePython\u30b3\u30fc\u30c9\n{domain}\u3001{app. id}\u3001{api token}\u3001{access key}\u3001{secret key} \u306f\u9069\u5b9c\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\u4eca\u56de\u306fLambda\u304b\u3089Amazon Polly\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306b\u3064\u3044\u3066\u306fAmazon Polly\u304c\u5229\u7528\u53ef\u80fd\u306a\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u3001\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u3092\u6301\u3064\u30e6\u30fc\u30b6\u30fc\u306e\u8a8d\u8a3c\u60c5\u5831\u3092\u4f7f\u3046\u3053\u3068\u306b\u3057\u307e\u3059\uff08\u672c\u5f53\u306fIAM\u30dd\u30ea\u30b7\u30fc\u3084Lambda\u74b0\u5883\u5909\u6570\u3067\u3057\u3063\u304b\u308a\u5bfe\u5fdc\u3059\u3079\u304d\u3068\u3053\u308d\u3067\u3059\u304c\u3001\u624b\u629c\u304d\u3067\u3059\uff09\u3002\n\u3053\u3061\u3089\u3092lambda_function.py\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u540d\u3067workspace\u30d5\u30a9\u30eb\u30c0\u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\nlambda_function.py\n\nfrom __future__ import print_function\n\nimport json\nfrom boto3 import Session\nfrom botocore.exceptions import BotoCoreError, ClientError\nfrom contextlib import closing\nimport os\nimport sys\nimport subprocess\nfrom tempfile import gettempdir\nimport requests, urllib2\n\n# parameters of kintone\nKINTONE_DOMAIN = \"{domain}\"\nBASE_URL = \"https://\"+ KINTONE_DOMAIN\nAPP_ID = \"{app. id}\"\nAPI_TOKEN = \"{api token}\"\n\n# parameters of AWS\nACCESS_KEY = '{access key}'\nSECRET_KEY = '{secret key}'\nREGION = 'us-east-1'\n\n# file name attaced to kintone\nMP3_FILE_NAME = 'speech.mp3'\n\nprint('Loading function')\n\n# get a kintone record\ndef getRecord(id):\n    query = 'app='+APP_ID+'&id='+id\n    url = BASE_URL + \"/k/v1/record.json?\" + query\n    headers = {\"X-Cybozu-API-Token\": API_TOKEN}\n    # http request with requests\n    res = requests.get(url, headers=headers, data={})\n    print(res.text, res.status_code)\n    return {\"res\":json.loads(res.text), \"code\":res.status_code}\n\n# upload the MP3 file to kintone\ndef uploadMP3File(file):\n    fileUrl = BASE_URL + \"/k/v1/file.json\"\n    fileHeaders = {\"X-Cybozu-API-Token\": API_TOKEN}\n    files = {'file': (MP3_FILE_NAME, open(file, 'rb'), 'audio/mp3', {'Expires': '0'})}\n    res = requests.post(fileUrl, headers=fileHeaders, files=files)\n    print(res.text, res.status_code)\n    fileKey = json.loads(res.text)['fileKey']\n    return fileKey\n\n# update the kintone record by a fileKey\ndef updateRecordForFile(recordId, fileKey):\n    fileKeys = [{\"fileKey\":fileKey}]\n    record = {'Attachment':{'value':fileKeys}}\n    request = {'app':APP_ID,'id': recordId,'record':record}\n    requestJson = json.dumps(request)\n    url = BASE_URL + \"/k/v1/record.json\"\n    headers = {\"X-Cybozu-API-Token\": API_TOKEN, \"Content-Type\" : \"application/json\"}\n    res = requests.put(url, headers=headers, data=requestJson)\n    print(res.text, res.status_code)\n    return {\"res\":json.loads(res.text), \"code\":res.status_code}\n\n# build the MP3 file from text with Amazon Polly API\ndef buildMP3File(text):\n    # Create a client using the credentials and region defined in the [adminuser]\n    # section of the AWS credentials file (~/.aws/credentials).\n    #session = Session(profile_name=\"adminuser\")\n    session = Session(aws_access_key_id=ACCESS_KEY,\n                      aws_secret_access_key=SECRET_KEY,\n                      region_name=REGION)\n    polly = session.client(\"polly\")\n\n    try:\n        # Request speech synthesis\n        response = polly.synthesize_speech(Text=text, OutputFormat=\"mp3\",\n                                            VoiceId=\"Joey\")\n    except (BotoCoreError, ClientError) as error:\n        # The service returned an error, exit gracefully\n        print(error)\n        sys.exit(-1)\n\n    # Access the audio stream from the response\n    if \"AudioStream\" in response:\n        # Note: Closing the stream is important as the service throttles on the\n        # number of parallel connections. Here we are using contextlib.closing to\n        # ensure the close method of the stream object will be called automatically\n        # at the end of the with statement's scope.\n        with closing(response[\"AudioStream\"]) as stream:\n            output = os.path.join(gettempdir(), MP3_FILE_NAME)\n            try:\n                # Open a file for writing the output as a binary stream\n                with open(output, \"wb\") as file:\n                    file.write(stream.read())\n            except IOError as error:\n                # Could not write to file, exit gracefully\n                print(error)\n                sys.exit(-1)\n\n    else:\n        # The response didn't contain audio data, exit gracefully\n        print(\"Could not stream audio\")\n        sys.exit(-1)\n    return output\n\n# Lambda function\ndef lambda_handler(event, context):\n    recordId = event['params']['querystring']['id'] # obtain the record id of kintone via Amazon API Gateway\n    obj = getRecord(recordId)\n    text = obj['res']['record']['Text']['value'] # obtain the text to convert\n    if(len(text) is 0):\n        text = 'Text field is empty.'\n    mp3 = buildMP3File(text) # convert text to MP3-voice\n    fileKey = uploadMP3File(mp3) # upload the MP3 file to kintone and obtain the fileKey\n    updateRecordForFile(recordId, fileKey) # update the kintone record with attachment of the MP3 file\n    return 'Process is completed.'\n\n\n\u30d5\u30a1\u30a4\u30eb\u3092\u4fdd\u5b58\u3057\u305f\u3089\u3001workspace\u30d5\u30a9\u30eb\u30c0\u306bboto3\u3068requests\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001zip\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066workspace\u5185\u306e\u3059\u3079\u3066\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u5727\u7e2e\u3057\u307e\u3059\u3002\u5727\u7e2e\u5f8c\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u306f\u4eca\u56deupload.zip\u3068\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n$ pip install boto3 -t .\n$ pip install requests -t .\n$ zip -r upload.zip *\n\n\nLambda\u95a2\u6570\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u8a2d\u5b9a\uff08\u30b3\u30fc\u30c9\u4ee5\u5916\uff09\n\u300cLambda > Functions\u300d\u304b\u3089\u300cCreate a Lambda function\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u8a2d\u5b9a\u958b\u59cb\u3067\u3059\u3002AWS\u306e\u30ea\u30fc\u30b8\u30e7\u30f3\u306f\u300c\u30d0\u30fc\u30b8\u30cb\u30a2\uff08us-east-1\uff09\u300d\u3067\u9032\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u4eca\u56de\u306eLambda\u95a2\u6570\u306f\u5148\u7a0b\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3057\u305f\u3082\u306e\u3092\u4f7f\u3046\u306e\u3067\u3001\u300cBlank Function\u300d\u3092\u9078\u629e\u3057\u3066\u3001\u8a2d\u5b9a\u3092\u9032\u3081\u307e\u3059\u3002\n\n\u3053\u3053\u306f\u305d\u306e\u307e\u307e\u300cNext\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u5148\u306b\u9032\u307f\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u30e1\u30a4\u30f3\u306e\u8a2d\u5b9a\u753b\u9762\u3067\u3059\u304c\u3001\u6b21\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u8a2d\u5b9a\u304c\u4e00\u901a\u308a\u51fa\u6765\u305f\u3089\u3001\u300cNext\u300d\u3067\u5148\u306b\u9032\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u300cNext\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u9032\u3093\u3067\u304f\u308b\u3068\u3001\u8a2d\u5b9a\u306e\u30ec\u30d3\u30e5\u30fc\u753b\u9762\u304c\u51fa\u3066\u304d\u307e\u3059\u306e\u3067\u3001\u300cCreate function\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u8a2d\u5b9a\u3092\u7d42\u3048\u307e\u3059\u3002\n\n\nAmazon API Gateway\nkintone\u306e\u30ec\u30b3\u30fc\u30c9ID\u3092\u6d41\u3057\u8fbc\u307f\u3064\u3064\u3001\u5148\u306b\u8a2d\u5b9a\u3057\u305fLambda\u95a2\u6570\u3092\u8d77\u52d5\u3059\u308bAPI Gateway\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002API\u30bb\u30c3\u30c8\u3092\u65b0\u3057\u304f\u300cCreate API\u300d\u304b\u3089\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u4eca\u56de\u306fAPI\u540d\u3092\u300ckintone-polly\u300d\u3068\u3057\u3066\u3001\u300cCreate API\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066API\u3092\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u300cResources\u300d\u306e\u300cActions\u300d\u304b\u3089\u300cCreate Method\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u30ea\u30af\u30a8\u30b9\u30c8\u30e1\u30bd\u30c3\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30ea\u30bd\u30fc\u30b9\u30fb\u30d1\u30b9\u306f\u4eca\u56de\uff11\u3064\u306a\u306e\u3067\u3001\u300c/\u300d\u306e\u76f4\u4e0b\u306b\u305d\u306e\u307e\u307e\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u4eca\u56de\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306f\u3001GET\u30e1\u30bd\u30c3\u30c9\u3068\u3059\u308b\u3053\u3068\u3068\u3057\u3066\u3001\u300cGET\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u305d\u3046\u3059\u308b\u3068\u3001\u300cGET\u300d\u30e1\u30bd\u30c3\u30c9\u306e\u8a73\u7d30\u8a2d\u5b9a\u306b\u9032\u3093\u3067\u3044\u304d\u307e\u3059\u3002\u6b21\u306e\u3088\u3046\u306b\u9032\u3081\u307e\u3059\u304c\u3001\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fLambda\u95a2\u6570\u306b\u7d10\u3064\u3051\u3092\u3053\u3053\u3067\u3084\u3063\u3066\u3044\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\u9078\u629e\u30fb\u5165\u529b\u304c\u7d42\u308f\u3063\u305f\u3089\u300cSave\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u3053\u308c\u3067\u300cOK\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308c\u3070\u3001\u7d10\u3064\u3051\u306e\u5b8c\u4e86\u3067\u3059\u3002\n\n\u307e\u3060\u307e\u3060\u7d9a\u304d\u307e\u3059\u3002\u672c\u6765\u306f\u3053\u306e4\u30d1\u30fc\u30c8\u4e01\u5be7\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u300cIntegration Request\u300d\u3060\u3051\u3092\u8a2d\u5b9a\u3057\u3066\u6210\u529f\u30b1\u30fc\u30b9\u3060\u3051\u901a\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u306f\u3001API\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30dc\u30c7\u30a3\u3084\u30af\u30a8\u30ea\u3092\u3069\u306e\u3088\u3046\u306bLambda\uff08\u306eevent\uff09\u306b\u6e21\u3059\u304b\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u6b21\u306e\u3088\u3046\u306b\u9032\u3081\u307e\u3057\u3087\u3046\u3002\n\n\u300cSave\u300d\u3092\u62bc\u3057\u305f\u3089\u3001\u300cActions\u300d\u304b\u3089\u300cDeploy API\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u3044\u3088\u3044\u3088API\u306e\u8a2d\u5b9a\u306f\u7d42\u76e4\u3067\u3059\u3002\n\n\u30c7\u30d7\u30ed\u30a4\u306b\u969b\u3057\u3066\u3001\u6700\u5f8c\u306b\u30b9\u30c6\u30fc\u30b8\u3092\u9078\u629e\u3067\u304d\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u65e2\u5b58\u9078\u629e\u80a2\u304c\u306a\u3044\u306e\u3067\u300cNew Stage\u300d\u3067\u300cprod\u300d\u3068\u5165\u529b\u3057\u3066\u3001\u300cDeploy\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u3053\u308c\u3067API\u3000Gateway\u306e\u8a2d\u5b9a\u3082\u5b8c\u4e86\u3067\u3059\u306e\u3067\u3001\u3053\u3053\u307e\u3067\u8a2d\u5b9a\u3057\u305fAPI\u3092kintone\u304b\u3089\u30b3\u30fc\u30eb\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308c\u3070kintone\u30a2\u30d7\u30ea\u5b8c\u6210\u3067\u3059\u3002\n\nkintone JavaScript\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\n\u6700\u5f8c\u306e\u8a2d\u5b9a\u306fkintone\u30a2\u30d7\u30ea\u3078\u306eJavaScript\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u3059\u3002\u5927\u304d\u304f2\u3064\u306e\u6a5f\u80fd\u3092\u5165\u308c\u307e\u3059\u3002\n- API Gateway\u306eURL\u306bGET\u30e1\u30bd\u30c3\u30c9\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u3001\u6587\u5b57\u5217\u304b\u3089\u5909\u63db\u3055\u308c\u305fMP3\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3092kintone\u30ec\u30b3\u30fc\u30c9\u306b\u6dfb\u4ed8\u3059\u308b\uff08\u4fdd\u5b58\u6210\u529f\u5f8c\u30a4\u30d9\u30f3\u30c8\uff09\n- \u6dfb\u4ed8\u306eMP3\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u751f\u3059\u308b\uff08\u30ec\u30b3\u30fc\u30c9\u8a73\u7d30\u753b\u9762\u8868\u793a\u30a4\u30d9\u30f3\u30c8\uff09\n\u3053\u308c\u3089\u306e\u6a5f\u80fd\u3092\u6709\u3059\u308bJavaScript\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u306a\u304a\u3001{api gw url}\u306f\u3001API Gateway\u3067\u8a2d\u5b9a\u3057\u305f\u30ea\u30af\u30a8\u30b9\u30c8URL\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\npolly.js\njQuery.noConflict();\n(function($) {\n  'use strict';\n\n  // API to convert text to speech, and to upload the converted MP3 file to kintone with Amazon Polly\n  var POLLY_URL = '{api gw url}';\n\n  // show spinner\n  var showSpinner = function() {\n    // initialization\n    if ($('.kintone-spinner').length == 0) {\n      // create elements for spinner and background\n      var spin_div = $('<div id =\"kintone-spin\" class=\"kintone-spinner\"></div>');\n      var spin_bg_div = $('<div id =\"kintone-spin-bg\" class=\"kintone-spinner\"></div>');\n\n      // append spinner element to \"body\"\n      $(document.body).append(spin_div, spin_bg_div);\n\n      // style for spinner\n      $(spin_div).css({\n        'position': 'fixed',\n        'top': '50%',\n        'left': '50%',\n        'z-index': '510',\n        'background-color': '#fff',\n        'padding': '26px',\n        '-moz-border-radius': '4px',\n        '-webkit-border-radius': '4px',\n        'border-radius': '4px'\n      });\n      $(spin_bg_div).css({\n        'position': 'absolute',\n        'top': '0px',\n        'z-index': '500',\n        'width': '150%',\n        'height': '150%',\n        'background-color': '#000',\n        'opacity': '0.5',\n        'filter': 'alpha(opacity=50)',\n        '-ms-filter': \"alpha(opacity=50)\"\n      });\n\n      // options for spinner\n      var opts = {\n        'color': '#000'\n      };\n\n      // invoke spinner\n      new Spinner(opts).spin(document.getElementById('kintone-spin'));\n    }\n\n    // start(show) spinner\n    $('.kintone-spinner').show();\n  };\n\n  // stop(hide) spinner\n  var hideSpinner = function() {\n    // hide spinner element\n    $('.kintone-spinner').hide();\n  };\n\n  // download file from kintone\n  var downloadFile = function(fileKey, callback, errback) {\n    var url = kintone.api.url('/k/v1/file', false) + '?fileKey=' + fileKey;\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url);\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    xhr.responseType = 'blob';\n    xhr.onload = function() {\n      if (xhr.status === 200) {\n        // success\n        var blob = new Blob([xhr.response]);\n        return callback(blob);\n      } else {\n        // error\n        var err = JSON.parse(xhr.responseText);\n        if (errback) {\n          return errback(err);\n        }\n      }\n    };\n    xhr.onerror = function(err) {\n      // error\n      if (errback) {\n        return errback(err);\n      }\n    };\n    xhr.send();\n  };\n\n  // convert Blob to Base64\n  var convertBlobToBase64 = function(blob, callback, errback) {\n    var reader = new window.FileReader();\n    reader.readAsDataURL(blob);\n    reader.onload = function() {\n      // success\n      var base64data = reader.result;\n      return callback(base64data.split(',', 2)[1]);\n    };\n    reader.onerror = function(err) {\n      // error\n      if (errback) {\n        return errback(err);\n      }\n    };\n  };\n\n  // submit success events\n  kintone.events.on([\n    'app.record.create.submit.success',\n    'app.record.edit.submit.success',\n  ], function(event) {\n    // show spinner\n    showSpinner();\n    // call API with Amazon Polly\n    var id = event.recordId;\n    var query = 'id=' + id;\n    var url = POLLY_URL + '?' + query;\n    return kintone.proxy(url, 'GET', {}, {}).then(function(r){\n      // hide spinner\n      hideSpinner();\n      return event;\n    }).catch(function(e){\n      // hide spinner\n      hideSpinner();\n      event.error = 'Error occurred.'\n      return event;\n    });\n  });\n\n  // after showing record details\n  kintone.events.on(['app.record.detail.show'], function(event) {\n    // show spinner\n    showSpinner();\n    var record = event.record;\n    new kintone.Promise(function(resolve, reject) {\n      // download the MP3 file\n      var file = record['Attachment'].value[0];\n      var fileKey = file.fileKey;\n      downloadFile(fileKey, function(r) {\n        return resolve(r);\n      }, function(e) {\n        return reject(e);\n      });\n    }).then(function(blob) {\n      // convert the MP3 blob file to Base64 style\n      return new kintone.Promise(function(resolve, reject) {\n        convertBlobToBase64(blob, function(r) {\n          return resolve(r);\n        }, function(e) {\n          return reject(e);\n        });\n      });\n    }).then(function(base64data) {\n      // hide spinner\n      hideSpinner();\n      // append the Base64-encoded MP3 file to \"audio\" element\n      var audioUrl = 'data:audio/mp3;base64,' + base64data;\n      $(document.body).append(\n        $('<audio>').prop({\n          'id': \"voice\",\n          'preload': \"auto\"\n        }).append(\n          $('<source>').prop({\n            'src': audioUrl,\n            'type': \"audio/mp3\"\n          })\n        )\n      );\n\n      // append the button that starts to play the MP3 file\n      var elAttachment = kintone.app.record.getFieldElement('Attachment');\n      $(elAttachment).append(\n        $('<button>').prop({\n          id: 'speak'\n        }).addClass('kintoneplugin-button-dialog-ok').text('Speak')\n      );\n\n      // attach click event to the \"#speak\" button for playing\n      $('#speak').click(function() {\n        var voice = $('#voice');\n        voice[0].currentTime = 0;\n        voice[0].play();\n      });\n      return;\n    }).catch(function(e) {\n      hideSpinner();\n      console.log(e);\n    });\n  });\n})(jQuery);\n\n\n\nkintone JavaScript\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u306e\u8a2d\u5b9a\n\u5148\u306e polly.js \u3092\u4f5c\u6210\u3057\u305f\u3089\u3001kintone\u3078\u8a2d\u5b9a\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u300c\u30a2\u30d7\u30ea\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u300d\u304b\u3089\u300c\u8a2d\u5b9a\u300d - \u300c\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u300d - \u300cJavaScript/CSS\u3067\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\u305d\u3057\u3066\u3001\u6b21\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n\nPC\u7528\u306eJavaScript\u30d5\u30a1\u30a4\u30eb\n\n\nhttps://js.kintone.com/jquery/3.0.0/jquery.min.js\nhttps://js.kintone.com/spinjs/2.3.2/spin.min.js\npolly.js\n\n\nPC\u7528\u306eCSS\u30d5\u30a1\u30a4\u30eb\n\n\n51-current-default.css\n\n\n\n\u3053\u3053\u3067\u3001 51-current-default.css \u306f kintone Plug-in SDK\u306e\u30da\u30fc\u30b8\u304b\u3089\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u30b9\u30bf\u30a4\u30eb\u30b7\u30fc\u30c8\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001kintone\u306b\u3042\u3063\u305f\u30b9\u30bf\u30a4\u30eb\u3092\u5f53\u3066\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d5\u30a1\u30a4\u30eb\u304c\u51fa\u6765\u305f\u3089\u3001\u300c\u4fdd\u5b58\u300d\u3092\u62bc\u3057\u3066\u3001\u66f4\u306b\u300c\u30a2\u30d7\u30ea\u306e\u66f4\u65b0\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u3053\u308c\u3067\u5168\u884c\u7a0b\u7d42\u4e86\u3067\u3059\uff01\n\n\u300cSpeak by Polly\u300d\uff08\u8aad\u307f\u4e0a\u3052\u30a2\u30d7\u30ea\uff09\u3092\u8a66\u3057\u3066\u307f\u308b\n\u30ec\u30b3\u30fc\u30c9\u65b0\u898f\u767b\u9332\u753b\u9762\u3067\u3001\u300cText\u300d\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u5316\u3057\u305f\u3044\u6587\u5b57\u5217\uff08\u6587\u7ae0\uff09\u3092\u5165\u529b\u3057\u3066\u3001\u30ec\u30b3\u30fc\u30c9\u3092\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\n\u4fdd\u5b58\u6210\u529f\u5f8c\u30a4\u30d9\u30f3\u30c8\u3067\u3001MP3\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3001\u6dfb\u4ed8\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u3057\u3066\u3001\u30ea\u30ed\u30fc\u30c9\u304c\u304b\u304b\u308b\u3068\u6b21\u306e\u3088\u3046\u306b\u6dfb\u4ed8\u3055\u308c\u3066\u3044\u308b\u69d8\u5b50\u304c\u78ba\u8a8d\u3067\u304d\u3001\u300cSpeak\u300d\u3068\u3044\u3046\u30dc\u30bf\u30f3\u304c\u73fe\u308c\u307e\u3059\u3002\n\n\u3053\u308c\u3092\u62bc\u3059\u3068\u3001Amazon Polly\u306b\u3088\u3063\u3066\u6587\u5b57\u5217\u304b\u3089\u5909\u63db\u3055\u308c\u305f\u97f3\u58f0\u3092\u5b9f\u969b\u306b\u8aad\u307f\u4e0a\u3052\u3066\u304f\u308c\u307e\u3059\u3002\n\n\u6240\u611f\n\u8a18\u4e8b\u81ea\u4f53\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u611f\u306f\u306a\u304b\u306a\u304b\u3067\u3001\u79c1\u306f\u767a\u8868\u5f8cSDK\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u307e\u3060\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3055\u308c\u3066\u306a\u304b\u3063\u305f\u308a\u3001Lambda\u306eboto3\u306b\u306f\u65b0\u30b5\u30fc\u30d3\u30b9\u5bfe\u5fdc\u7248\u304c\u5165\u3063\u3066\u306a\u304b\u3063\u305f\u308a\u3068\u5c11\u3057\u30cf\u30de\u308a\u307e\u3057\u305f\u304c\u3001\u5b9f\u969b\u8a2d\u5b9a\u3057\u3066\u307f\u308b\u3068\u610f\u5916\u3068\u6642\u9593\u306f\u304b\u304b\u3089\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u5916\u90e8\u306e\u30af\u30e9\u30a6\u30c9\u306e\u529b\u3092\u501f\u308a\u308b\u3053\u3068\u3067kintone\u306e\u53ef\u80fd\u6027\u304c\u5e83\u304c\u308b\u3053\u3068\u3092\u307e\u305f\u5b9f\u611f\u3067\u304d\u307e\u3057\u305f\u3002\n\u6a5f\u68b0\u5b66\u7fd2\u30fbAI\u3092\u30bc\u30ed\u304b\u3089\u5b66\u3076\u306b\u306f\u6577\u5c45\u304c\u9ad8\u3059\u304e\u308b\u3051\u3069\u3001\u3084\u3063\u3066\u307f\u305f\u3044\u3068\u3044\u3046\u65b9\u306b\u3082\u30aa\u30b9\u30b9\u30e1\u3067\u304d\u308b\u304b\u306a\u3041\u3068\u601d\u3044\u307e\u3059\u3002\u662f\u975e\u304a\u8a66\u3057\u9802\u3051\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n# kintone \u3068 Amazon Polly \u306e\u9023\u643a\n\u4eca\u9031\u306f\u3001AWS\u30c7\u30a3\u30d9\u30ed\u30c3\u30d1\u30fc\u306e\u796d\u5178**\u300cAWS re:Invent 2016\u300d**\u304c\u958b\u50ac\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u4eca\u5e74\u306fkintone\u3082\u30d6\u30fc\u30b9\u51fa\u5c55\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u73fe\u5730\u6642\u9593\u306e11/30\u306812/1\u306f\u305d\u308c\u305e\u308cKeynote\u304c\u884c\u308f\u308c\u3001AWS\u306e\u65b0\u30b5\u30fc\u30d3\u30b9\u304c\u8272\u3005\u3068\u767a\u8868\u3055\u308c\u308b\u975e\u5e38\u306b\u30a8\u30ad\u30b5\u30a4\u30c6\u30a3\u30f3\u30b0\u306a\u30a4\u30d9\u30f3\u30c8\u3067\u3059\u3002\n\n\u4eca\u671d\u306eKeynote\u3067\u3082\u5e7e\u3064\u304b\u306e\u65b0\u30b5\u30fc\u30d3\u30b9\u306e\u767a\u8868\u304c\u3042\u308a\u307e\u3057\u305f\u3002\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u300ckintone Advent Calendar 2016\u300d\u306e\u521d\u65e5\u306f\u3001\u305d\u3093\u306a\u30db\u30c3\u30c8\u306aAWS\u306e\u65b0\u30b5\u30fc\u30d3\u30b9\u306e\u9023\u643a\u3092\u304a\u5c4a\u3051\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nkintone\u3068\u76f8\u6027\u304c\u826f\u3055\u305d\u3046\u306a\u30b5\u30fc\u30d3\u30b9\u304c\u5e7e\u3064\u304b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u4eca\u56de\u306f\u307e\u305a\u300c[Amazon Polly](https://aws.amazon.com/polly/)\u300d\u3068\u547c\u3070\u308c\u308b**\u300c\u6587\u7ae0\u304b\u3089\u97f3\u58f0\u3092\u4f5c\u308a\u51fa\u3059\u300d**\u30b5\u30fc\u30d3\u30b9\u3068\u306e\u9023\u643a\u3092\u3084\u3063\u3066\u307f\u307e\u3057\u305f\u3002Amazon Polly\u306b\u95a2\u3059\u308b\u8a73\u7d30\u306f\u3053\u3061\u3089\u306e[\u30d6\u30ed\u30b0](https://aws.amazon.com/jp/blogs/news/polly-text-to-speech-in-47-voices-and-24-languages/)\u7b49\u3092\u3054\u89a7\u9802\u304f\u306e\u304c\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n![polly18.png](https://qiita-image-store.s3.amazonaws.com/0/43383/69c6b6f9-361c-a729-2022-1716b80fa4c7.png)\n\n# kintone \u3068 Amazon Polly \u306e\u9023\u643a\n\u69d8\u3005\u306a\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u304c\u60f3\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u30b7\u30f3\u30d7\u30eb\u306b**MP3\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308bkintone\u30a2\u30d7\u30ea**\u3092Amazon Polly\u3092\u4f7f\u3063\u3066\u4f5c\u6210\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u69cb\u6210\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n![Untitled (4).png](https://qiita-image-store.s3.amazonaws.com/0/43383/0231f65b-97bd-9654-8314-63a4402787f1.png)\n\n## Amazon Polly\u3068kintone\u9023\u643a\u306e\u8a2d\u5b9a\n### kintone\u30a2\u30d7\u30ea - \u300cSpeak by Polly\u300d\uff08\u8aad\u307f\u4e0a\u3052\u30a2\u30d7\u30ea\uff09\n\u6b21\u306e\u3088\u3046\u306a\u30d5\u30a3\u30fc\u30eb\u30c9\u306ekintone\u30a2\u30d7\u30ea\u3092\u6e96\u5099\u3057\u307e\u3059\u3002\n\n| \u9805\u76ee\u540d\u30fb\u30d5\u30a3\u30fc\u30eb\u30c9\u30b3\u30fc\u30c9 | \u5185\u5bb9 | \u30d5\u30a3\u30fc\u30eb\u30c9\u30bf\u30a4\u30d7 |\n|:-:|:-:|:-:|\n| Text  | \u97f3\u58f0\u306b\u5909\u63db\u3057\u305f\u3044\u6587\u5b57\u5217\uff08\u6587\u7ae0\uff09\u3092\u5165\u529b\u3059\u308b\u305f\u3081\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3067\u3059\u3002  | \u6587\u5b57\u52171\u884c  |\n| Attachment  | \u6587\u5b57\u5217\u304b\u3089\u5909\u63db\u3055\u308c\u305f\u97f3\u58f0\uff08MP3\uff09\u30d5\u30a1\u30a4\u30eb\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3067\u3059\u3002  | \u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb  |\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-01 2.17.38.png](https://qiita-image-store.s3.amazonaws.com/0/43383/992a4a6c-bee4-af73-345e-2166c14abf25.png)\n\n### AWS Lambda\n\u3053\u3061\u3089\u304c\u4eca\u56de\u306e\u30e1\u30a4\u30f3\u306b\u306a\u308a\u307e\u3059\u304c\u3001\u5927\u307e\u304b\u306b\u306f\u6b21\u306e\u3088\u3046\u306a\u5185\u5bb9\u3067\u3059\u3002\n1. Amazon API Gateway\u7d4c\u7531\u3067\u53d7\u3051\u53d6\u3063\u305fkintone\u306e\u30ec\u30b3\u30fc\u30c9ID\u304b\u3089\u97f3\u58f0\u306b\u5909\u63db\u3057\u305f\u3044\u6587\u5b57\u5217\uff08Text\uff09\u3092\u53d6\u5f97\u3059\u308b\n2. \u53d6\u5f97\u3057\u305f\u30ec\u30b3\u30fc\u30c9ID\u304b\u3089\u97f3\u58f0\u306b\u5909\u63db\u3057\u305f\u3044\u6587\u5b57\u5217\uff08Text\uff09\u3092\u53d6\u5f97\u3059\u308b\n3. \u53d6\u5f97\u3057\u305f\u6587\u5b57\u5217\u3092Amazon Polly\u306eAPI\u306b\u304b\u3051\u3066\u3001\u97f3\u58f0\uff08MP\uff13\uff09\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b\n4. \u751f\u6210\u3057\u305fMP3\u30d5\u30a1\u30a4\u30eb\u3092kintone\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\n\u3053\u308c\u3089\u306e\u52d5\u304d\u3092API Gateway\u7d4c\u7531\u3067\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n#### Lambda\u95a2\u6570\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u524d\u6e96\u5099\n- \u4eca\u56de\u3001kintone\u3078\u306eREST API\u30a2\u30af\u30bb\u30b9\u7528\u306b[requests\u30e2\u30b8\u30e5\u30fc\u30eb](http://docs.python-requests.org/en/master/)\u3092\u5229\u7528\u3057\u307e\u3059\u306e\u3067\u3001\u4e8b\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n- \u307e\u305f\u3001\u4f5c\u696d\u30d5\u30a9\u30eb\u30c0\u3092\u4eca\u56de\u6b21\u306e\u3088\u3046\u306b\u6c7a\u3081\u3066\u4f5c\u696d\u3092\u9032\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n```\n$ mkdir workspace\n$ cd workspace\n```\n\n#### Lambda\u95a2\u6570\u306ePython\u30b3\u30fc\u30c9\n```{domain}```\u3001```{app. id}```\u3001```{api token}```\u3001```{access key}```\u3001```{secret key}``` \u306f\u9069\u5b9c\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\u4eca\u56de\u306fLambda\u304b\u3089Amazon Polly\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306b\u3064\u3044\u3066\u306fAmazon Polly\u304c\u5229\u7528\u53ef\u80fd\u306a\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u3001\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u3092\u6301\u3064\u30e6\u30fc\u30b6\u30fc\u306e\u8a8d\u8a3c\u60c5\u5831\u3092\u4f7f\u3046\u3053\u3068\u306b\u3057\u307e\u3059\uff08\u672c\u5f53\u306fIAM\u30dd\u30ea\u30b7\u30fc\u3084Lambda\u74b0\u5883\u5909\u6570\u3067\u3057\u3063\u304b\u308a\u5bfe\u5fdc\u3059\u3079\u304d\u3068\u3053\u308d\u3067\u3059\u304c\u3001\u624b\u629c\u304d\u3067\u3059\uff09\u3002\n\n\u3053\u3061\u3089\u3092```lambda_function.py```\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u540d\u3067```workspace```\u30d5\u30a9\u30eb\u30c0\u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\n```python:lambda_function.py\n\nfrom __future__ import print_function\n\nimport json\nfrom boto3 import Session\nfrom botocore.exceptions import BotoCoreError, ClientError\nfrom contextlib import closing\nimport os\nimport sys\nimport subprocess\nfrom tempfile import gettempdir\nimport requests, urllib2\n\n# parameters of kintone\nKINTONE_DOMAIN = \"{domain}\"\nBASE_URL = \"https://\"+ KINTONE_DOMAIN\nAPP_ID = \"{app. id}\"\nAPI_TOKEN = \"{api token}\"\n\n# parameters of AWS\nACCESS_KEY = '{access key}'\nSECRET_KEY = '{secret key}'\nREGION = 'us-east-1'\n\n# file name attaced to kintone\nMP3_FILE_NAME = 'speech.mp3'\n\nprint('Loading function')\n\n# get a kintone record\ndef getRecord(id):\n    query = 'app='+APP_ID+'&id='+id\n    url = BASE_URL + \"/k/v1/record.json?\" + query\n    headers = {\"X-Cybozu-API-Token\": API_TOKEN}\n    # http request with requests\n    res = requests.get(url, headers=headers, data={})\n    print(res.text, res.status_code)\n    return {\"res\":json.loads(res.text), \"code\":res.status_code}\n\n# upload the MP3 file to kintone\ndef uploadMP3File(file):\n    fileUrl = BASE_URL + \"/k/v1/file.json\"\n    fileHeaders = {\"X-Cybozu-API-Token\": API_TOKEN}\n    files = {'file': (MP3_FILE_NAME, open(file, 'rb'), 'audio/mp3', {'Expires': '0'})}\n    res = requests.post(fileUrl, headers=fileHeaders, files=files)\n    print(res.text, res.status_code)\n    fileKey = json.loads(res.text)['fileKey']\n    return fileKey\n\n# update the kintone record by a fileKey\ndef updateRecordForFile(recordId, fileKey):\n    fileKeys = [{\"fileKey\":fileKey}]\n    record = {'Attachment':{'value':fileKeys}}\n    request = {'app':APP_ID,'id': recordId,'record':record}\n    requestJson = json.dumps(request)\n    url = BASE_URL + \"/k/v1/record.json\"\n    headers = {\"X-Cybozu-API-Token\": API_TOKEN, \"Content-Type\" : \"application/json\"}\n    res = requests.put(url, headers=headers, data=requestJson)\n    print(res.text, res.status_code)\n    return {\"res\":json.loads(res.text), \"code\":res.status_code}\n\n# build the MP3 file from text with Amazon Polly API\ndef buildMP3File(text):\n    # Create a client using the credentials and region defined in the [adminuser]\n    # section of the AWS credentials file (~/.aws/credentials).\n    #session = Session(profile_name=\"adminuser\")\n    session = Session(aws_access_key_id=ACCESS_KEY,\n                      aws_secret_access_key=SECRET_KEY,\n                      region_name=REGION)\n    polly = session.client(\"polly\")\n\n    try:\n        # Request speech synthesis\n        response = polly.synthesize_speech(Text=text, OutputFormat=\"mp3\",\n                                            VoiceId=\"Joey\")\n    except (BotoCoreError, ClientError) as error:\n        # The service returned an error, exit gracefully\n        print(error)\n        sys.exit(-1)\n\n    # Access the audio stream from the response\n    if \"AudioStream\" in response:\n        # Note: Closing the stream is important as the service throttles on the\n        # number of parallel connections. Here we are using contextlib.closing to\n        # ensure the close method of the stream object will be called automatically\n        # at the end of the with statement's scope.\n        with closing(response[\"AudioStream\"]) as stream:\n            output = os.path.join(gettempdir(), MP3_FILE_NAME)\n            try:\n                # Open a file for writing the output as a binary stream\n                with open(output, \"wb\") as file:\n                    file.write(stream.read())\n            except IOError as error:\n                # Could not write to file, exit gracefully\n                print(error)\n                sys.exit(-1)\n\n    else:\n        # The response didn't contain audio data, exit gracefully\n        print(\"Could not stream audio\")\n        sys.exit(-1)\n    return output\n\n# Lambda function\ndef lambda_handler(event, context):\n    recordId = event['params']['querystring']['id'] # obtain the record id of kintone via Amazon API Gateway\n    obj = getRecord(recordId)\n    text = obj['res']['record']['Text']['value'] # obtain the text to convert\n    if(len(text) is 0):\n        text = 'Text field is empty.'\n    mp3 = buildMP3File(text) # convert text to MP3-voice\n    fileKey = uploadMP3File(mp3) # upload the MP3 file to kintone and obtain the fileKey\n    updateRecordForFile(recordId, fileKey) # update the kintone record with attachment of the MP3 file\n    return 'Process is completed.'\n```\n\n\u30d5\u30a1\u30a4\u30eb\u3092\u4fdd\u5b58\u3057\u305f\u3089\u3001```workspace```\u30d5\u30a9\u30eb\u30c0\u306b```boto3```\u3068```requests```\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001zip\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066```workspace```\u5185\u306e\u3059\u3079\u3066\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u5727\u7e2e\u3057\u307e\u3059\u3002\u5727\u7e2e\u5f8c\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u306f\u4eca\u56de```upload.zip```\u3068\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n$ pip install boto3 -t .\n$ pip install requests -t .\n$ zip -r upload.zip *\n```\n\n#### Lambda\u95a2\u6570\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u8a2d\u5b9a\uff08\u30b3\u30fc\u30c9\u4ee5\u5916\uff09\n\u300cLambda > Functions\u300d\u304b\u3089\u300cCreate a Lambda function\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u8a2d\u5b9a\u958b\u59cb\u3067\u3059\u3002AWS\u306e\u30ea\u30fc\u30b8\u30e7\u30f3\u306f**\u300c\u30d0\u30fc\u30b8\u30cb\u30a2\uff08us-east-1\uff09\u300d**\u3067\u9032\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n![polly1.png](https://qiita-image-store.s3.amazonaws.com/0/43383/826b0690-8c92-ac05-715c-22515ce3e9e7.png)\n\n\u4eca\u56de\u306eLambda\u95a2\u6570\u306f\u5148\u7a0b\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30f3\u30b0\u3057\u305f\u3082\u306e\u3092\u4f7f\u3046\u306e\u3067\u3001\u300cBlank Function\u300d\u3092\u9078\u629e\u3057\u3066\u3001\u8a2d\u5b9a\u3092\u9032\u3081\u307e\u3059\u3002\n![polly2.png](https://qiita-image-store.s3.amazonaws.com/0/43383/8dcf8ffd-4df3-4966-a07b-e98165ee8732.png)\n\n\u3053\u3053\u306f\u305d\u306e\u307e\u307e\u300cNext\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u5148\u306b\u9032\u307f\u307e\u3059\u3002\n![polly3.png](https://qiita-image-store.s3.amazonaws.com/0/43383/913e32dc-92a4-b5e0-f567-11fd1ac99218.png)\n\n\u3053\u3053\u3067\u30e1\u30a4\u30f3\u306e\u8a2d\u5b9a\u753b\u9762\u3067\u3059\u304c\u3001\u6b21\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u8a2d\u5b9a\u304c\u4e00\u901a\u308a\u51fa\u6765\u305f\u3089\u3001\u300cNext\u300d\u3067\u5148\u306b\u9032\u307f\u307e\u3057\u3087\u3046\u3002\n![polly4.png](https://qiita-image-store.s3.amazonaws.com/0/43383/9a070405-bb5d-f32b-64e1-563bc3e215e1.png)\n\n\u300cNext\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u9032\u3093\u3067\u304f\u308b\u3068\u3001\u8a2d\u5b9a\u306e\u30ec\u30d3\u30e5\u30fc\u753b\u9762\u304c\u51fa\u3066\u304d\u307e\u3059\u306e\u3067\u3001\u300cCreate function\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u8a2d\u5b9a\u3092\u7d42\u3048\u307e\u3059\u3002\n![polly5.png](https://qiita-image-store.s3.amazonaws.com/0/43383/7634c064-2121-3819-d4f3-83284e10b766.png)\n\n### Amazon API Gateway\nkintone\u306e\u30ec\u30b3\u30fc\u30c9ID\u3092\u6d41\u3057\u8fbc\u307f\u3064\u3064\u3001\u5148\u306b\u8a2d\u5b9a\u3057\u305fLambda\u95a2\u6570\u3092\u8d77\u52d5\u3059\u308bAPI Gateway\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002API\u30bb\u30c3\u30c8\u3092\u65b0\u3057\u304f\u300cCreate API\u300d\u304b\u3089\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n![polly6.png](https://qiita-image-store.s3.amazonaws.com/0/43383/70369a14-f497-872f-3866-f8bee93b2d05.png)\n\n\u4eca\u56de\u306fAPI\u540d\u3092\u300ckintone-polly\u300d\u3068\u3057\u3066\u3001\u300cCreate API\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066API\u3092\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n![polly7.png](https://qiita-image-store.s3.amazonaws.com/0/43383/a6a87fd3-6743-8a95-eb6d-983845c00d94.png)\n\n\u300cResources\u300d\u306e\u300cActions\u300d\u304b\u3089\u300cCreate Method\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u30ea\u30af\u30a8\u30b9\u30c8\u30e1\u30bd\u30c3\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30ea\u30bd\u30fc\u30b9\u30fb\u30d1\u30b9\u306f\u4eca\u56de\uff11\u3064\u306a\u306e\u3067\u3001\u300c/\u300d\u306e\u76f4\u4e0b\u306b\u305d\u306e\u307e\u307e\u4f5c\u6210\u3057\u307e\u3059\u3002\n![polly8.png](https://qiita-image-store.s3.amazonaws.com/0/43383/d516189f-2fe0-8ea6-1ba0-a6bb8b89deed.png)\n\n\u4eca\u56de\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306f\u3001GET\u30e1\u30bd\u30c3\u30c9\u3068\u3059\u308b\u3053\u3068\u3068\u3057\u3066\u3001\u300cGET\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n![polly9.png](https://qiita-image-store.s3.amazonaws.com/0/43383/cdd377c9-83fc-5370-5079-d9630f4ae13c.png)\n\n\u305d\u3046\u3059\u308b\u3068\u3001\u300cGET\u300d\u30e1\u30bd\u30c3\u30c9\u306e\u8a73\u7d30\u8a2d\u5b9a\u306b\u9032\u3093\u3067\u3044\u304d\u307e\u3059\u3002\u6b21\u306e\u3088\u3046\u306b\u9032\u3081\u307e\u3059\u304c\u3001\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fLambda\u95a2\u6570\u306b\u7d10\u3064\u3051\u3092\u3053\u3053\u3067\u3084\u3063\u3066\u3044\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\u9078\u629e\u30fb\u5165\u529b\u304c\u7d42\u308f\u3063\u305f\u3089\u300cSave\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![polly10.png](https://qiita-image-store.s3.amazonaws.com/0/43383/e506df16-5850-57f5-082d-fb4fe2a14e61.png)\n\n\u3053\u308c\u3067\u300cOK\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308c\u3070\u3001\u7d10\u3064\u3051\u306e\u5b8c\u4e86\u3067\u3059\u3002\n![polly11.png](https://qiita-image-store.s3.amazonaws.com/0/43383/bd06755e-2c27-ca3e-6ad6-19542d65a079.png)\n\n\u307e\u3060\u307e\u3060\u7d9a\u304d\u307e\u3059\u3002\u672c\u6765\u306f\u3053\u306e4\u30d1\u30fc\u30c8\u4e01\u5be7\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u300cIntegration Request\u300d\u3060\u3051\u3092\u8a2d\u5b9a\u3057\u3066\u6210\u529f\u30b1\u30fc\u30b9\u3060\u3051\u901a\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n![polly12.png](https://qiita-image-store.s3.amazonaws.com/0/43383/e54ed9f4-f918-90a4-8bb3-40155b7a7e0c.png)\n\n\u3053\u3053\u3067\u306f\u3001API\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30dc\u30c7\u30a3\u3084\u30af\u30a8\u30ea\u3092\u3069\u306e\u3088\u3046\u306bLambda\uff08\u306eevent\uff09\u306b\u6e21\u3059\u304b\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u6b21\u306e\u3088\u3046\u306b\u9032\u3081\u307e\u3057\u3087\u3046\u3002\n![polly13.png](https://qiita-image-store.s3.amazonaws.com/0/43383/89d0b170-7a5a-aa5d-c638-9e2c9ef49a7c.png)\n\n\u300cSave\u300d\u3092\u62bc\u3057\u305f\u3089\u3001\u300cActions\u300d\u304b\u3089\u300cDeploy API\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u3044\u3088\u3044\u3088API\u306e\u8a2d\u5b9a\u306f\u7d42\u76e4\u3067\u3059\u3002\n![poly14.png](https://qiita-image-store.s3.amazonaws.com/0/43383/e830870a-e011-0ecf-2bdf-7bb6e8481759.png)\n\n\u30c7\u30d7\u30ed\u30a4\u306b\u969b\u3057\u3066\u3001\u6700\u5f8c\u306b\u30b9\u30c6\u30fc\u30b8\u3092\u9078\u629e\u3067\u304d\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u65e2\u5b58\u9078\u629e\u80a2\u304c\u306a\u3044\u306e\u3067\u300cNew Stage\u300d\u3067\u300cprod\u300d\u3068\u5165\u529b\u3057\u3066\u3001\u300cDeploy\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n![polly15.png](https://qiita-image-store.s3.amazonaws.com/0/43383/67b4f651-29a3-b40d-293c-9000790713f5.png)\n\n\u3053\u308c\u3067API\u3000Gateway\u306e\u8a2d\u5b9a\u3082\u5b8c\u4e86\u3067\u3059\u306e\u3067\u3001\u3053\u3053\u307e\u3067\u8a2d\u5b9a\u3057\u305fAPI\u3092kintone\u304b\u3089\u30b3\u30fc\u30eb\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308c\u3070kintone\u30a2\u30d7\u30ea\u5b8c\u6210\u3067\u3059\u3002\n\n### kintone JavaScript\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\n\u6700\u5f8c\u306e\u8a2d\u5b9a\u306fkintone\u30a2\u30d7\u30ea\u3078\u306eJavaScript\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u3059\u3002\u5927\u304d\u304f2\u3064\u306e\u6a5f\u80fd\u3092\u5165\u308c\u307e\u3059\u3002\n- API Gateway\u306eURL\u306bGET\u30e1\u30bd\u30c3\u30c9\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u3001\u6587\u5b57\u5217\u304b\u3089\u5909\u63db\u3055\u308c\u305fMP3\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3092kintone\u30ec\u30b3\u30fc\u30c9\u306b\u6dfb\u4ed8\u3059\u308b\uff08\u4fdd\u5b58\u6210\u529f\u5f8c\u30a4\u30d9\u30f3\u30c8\uff09\n- \u6dfb\u4ed8\u306eMP3\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u751f\u3059\u308b\uff08\u30ec\u30b3\u30fc\u30c9\u8a73\u7d30\u753b\u9762\u8868\u793a\u30a4\u30d9\u30f3\u30c8\uff09\n\n\u3053\u308c\u3089\u306e\u6a5f\u80fd\u3092\u6709\u3059\u308bJavaScript\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u306a\u304a\u3001```{api gw url}```\u306f\u3001API Gateway\u3067\u8a2d\u5b9a\u3057\u305f\u30ea\u30af\u30a8\u30b9\u30c8URL\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n```js:polly.js\njQuery.noConflict();\n(function($) {\n  'use strict';\n\n  // API to convert text to speech, and to upload the converted MP3 file to kintone with Amazon Polly\n  var POLLY_URL = '{api gw url}';\n\n  // show spinner\n  var showSpinner = function() {\n    // initialization\n    if ($('.kintone-spinner').length == 0) {\n      // create elements for spinner and background\n      var spin_div = $('<div id =\"kintone-spin\" class=\"kintone-spinner\"></div>');\n      var spin_bg_div = $('<div id =\"kintone-spin-bg\" class=\"kintone-spinner\"></div>');\n\n      // append spinner element to \"body\"\n      $(document.body).append(spin_div, spin_bg_div);\n\n      // style for spinner\n      $(spin_div).css({\n        'position': 'fixed',\n        'top': '50%',\n        'left': '50%',\n        'z-index': '510',\n        'background-color': '#fff',\n        'padding': '26px',\n        '-moz-border-radius': '4px',\n        '-webkit-border-radius': '4px',\n        'border-radius': '4px'\n      });\n      $(spin_bg_div).css({\n        'position': 'absolute',\n        'top': '0px',\n        'z-index': '500',\n        'width': '150%',\n        'height': '150%',\n        'background-color': '#000',\n        'opacity': '0.5',\n        'filter': 'alpha(opacity=50)',\n        '-ms-filter': \"alpha(opacity=50)\"\n      });\n\n      // options for spinner\n      var opts = {\n        'color': '#000'\n      };\n\n      // invoke spinner\n      new Spinner(opts).spin(document.getElementById('kintone-spin'));\n    }\n\n    // start(show) spinner\n    $('.kintone-spinner').show();\n  };\n\n  // stop(hide) spinner\n  var hideSpinner = function() {\n    // hide spinner element\n    $('.kintone-spinner').hide();\n  };\n\n  // download file from kintone\n  var downloadFile = function(fileKey, callback, errback) {\n    var url = kintone.api.url('/k/v1/file', false) + '?fileKey=' + fileKey;\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url);\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    xhr.responseType = 'blob';\n    xhr.onload = function() {\n      if (xhr.status === 200) {\n        // success\n        var blob = new Blob([xhr.response]);\n        return callback(blob);\n      } else {\n        // error\n        var err = JSON.parse(xhr.responseText);\n        if (errback) {\n          return errback(err);\n        }\n      }\n    };\n    xhr.onerror = function(err) {\n      // error\n      if (errback) {\n        return errback(err);\n      }\n    };\n    xhr.send();\n  };\n\n  // convert Blob to Base64\n  var convertBlobToBase64 = function(blob, callback, errback) {\n    var reader = new window.FileReader();\n    reader.readAsDataURL(blob);\n    reader.onload = function() {\n      // success\n      var base64data = reader.result;\n      return callback(base64data.split(',', 2)[1]);\n    };\n    reader.onerror = function(err) {\n      // error\n      if (errback) {\n        return errback(err);\n      }\n    };\n  };\n\n  // submit success events\n  kintone.events.on([\n    'app.record.create.submit.success',\n    'app.record.edit.submit.success',\n  ], function(event) {\n    // show spinner\n    showSpinner();\n    // call API with Amazon Polly\n    var id = event.recordId;\n    var query = 'id=' + id;\n    var url = POLLY_URL + '?' + query;\n    return kintone.proxy(url, 'GET', {}, {}).then(function(r){\n      // hide spinner\n      hideSpinner();\n      return event;\n    }).catch(function(e){\n      // hide spinner\n      hideSpinner();\n      event.error = 'Error occurred.'\n      return event;\n    });\n  });\n\n  // after showing record details\n  kintone.events.on(['app.record.detail.show'], function(event) {\n    // show spinner\n    showSpinner();\n    var record = event.record;\n    new kintone.Promise(function(resolve, reject) {\n      // download the MP3 file\n      var file = record['Attachment'].value[0];\n      var fileKey = file.fileKey;\n      downloadFile(fileKey, function(r) {\n        return resolve(r);\n      }, function(e) {\n        return reject(e);\n      });\n    }).then(function(blob) {\n      // convert the MP3 blob file to Base64 style\n      return new kintone.Promise(function(resolve, reject) {\n        convertBlobToBase64(blob, function(r) {\n          return resolve(r);\n        }, function(e) {\n          return reject(e);\n        });\n      });\n    }).then(function(base64data) {\n      // hide spinner\n      hideSpinner();\n      // append the Base64-encoded MP3 file to \"audio\" element\n      var audioUrl = 'data:audio/mp3;base64,' + base64data;\n      $(document.body).append(\n        $('<audio>').prop({\n          'id': \"voice\",\n          'preload': \"auto\"\n        }).append(\n          $('<source>').prop({\n            'src': audioUrl,\n            'type': \"audio/mp3\"\n          })\n        )\n      );\n\n      // append the button that starts to play the MP3 file\n      var elAttachment = kintone.app.record.getFieldElement('Attachment');\n      $(elAttachment).append(\n        $('<button>').prop({\n          id: 'speak'\n        }).addClass('kintoneplugin-button-dialog-ok').text('Speak')\n      );\n\n      // attach click event to the \"#speak\" button for playing\n      $('#speak').click(function() {\n        var voice = $('#voice');\n        voice[0].currentTime = 0;\n        voice[0].play();\n      });\n      return;\n    }).catch(function(e) {\n      hideSpinner();\n      console.log(e);\n    });\n  });\n})(jQuery);\n```\n\n#### kintone JavaScript\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u306e\u8a2d\u5b9a\n\u5148\u306e ```polly.js``` \u3092\u4f5c\u6210\u3057\u305f\u3089\u3001kintone\u3078\u8a2d\u5b9a\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u300c\u30a2\u30d7\u30ea\u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u300d\u304b\u3089\u300c\u8a2d\u5b9a\u300d - \u300c\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u300d - \u300cJavaScript/CSS\u3067\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\u305d\u3057\u3066\u3001\u6b21\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n![polly17.png](https://qiita-image-store.s3.amazonaws.com/0/43383/16211f63-e55e-277e-4ec8-cf10983aab4c.png)\n\n\n- PC\u7528\u306eJavaScript\u30d5\u30a1\u30a4\u30eb\n    - https://js.kintone.com/jquery/3.0.0/jquery.min.js\n    - https://js.kintone.com/spinjs/2.3.2/spin.min.js\n    - polly.js\n- PC\u7528\u306eCSS\u30d5\u30a1\u30a4\u30eb\n    - 51-current-default.css\n\n\u3053\u3053\u3067\u3001 ```51-current-default.css``` \u306f [kintone Plug-in SDK](https://github.com/kintone/plugin-sdk)\u306e\u30da\u30fc\u30b8\u304b\u3089\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u30b9\u30bf\u30a4\u30eb\u30b7\u30fc\u30c8\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001kintone\u306b\u3042\u3063\u305f\u30b9\u30bf\u30a4\u30eb\u3092\u5f53\u3066\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u30d5\u30a1\u30a4\u30eb\u304c\u51fa\u6765\u305f\u3089\u3001\u300c\u4fdd\u5b58\u300d\u3092\u62bc\u3057\u3066\u3001\u66f4\u306b\u300c\u30a2\u30d7\u30ea\u306e\u66f4\u65b0\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u3053\u308c\u3067\u5168\u884c\u7a0b\u7d42\u4e86\u3067\u3059\uff01\n\n# \u300cSpeak by Polly\u300d\uff08\u8aad\u307f\u4e0a\u3052\u30a2\u30d7\u30ea\uff09\u3092\u8a66\u3057\u3066\u307f\u308b\n\n\u30ec\u30b3\u30fc\u30c9\u65b0\u898f\u767b\u9332\u753b\u9762\u3067\u3001\u300cText\u300d\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u5316\u3057\u305f\u3044\u6587\u5b57\u5217\uff08\u6587\u7ae0\uff09\u3092\u5165\u529b\u3057\u3066\u3001\u30ec\u30b3\u30fc\u30c9\u3092\u4fdd\u5b58\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-01 6.53.39.png](https://qiita-image-store.s3.amazonaws.com/0/43383/fdfc37f7-d0e4-7c5d-677b-952cd12091b1.png)\n\n\u4fdd\u5b58\u6210\u529f\u5f8c\u30a4\u30d9\u30f3\u30c8\u3067\u3001MP3\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3001\u6dfb\u4ed8\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u3057\u3066\u3001\u30ea\u30ed\u30fc\u30c9\u304c\u304b\u304b\u308b\u3068\u6b21\u306e\u3088\u3046\u306b\u6dfb\u4ed8\u3055\u308c\u3066\u3044\u308b\u69d8\u5b50\u304c\u78ba\u8a8d\u3067\u304d\u3001\u300cSpeak\u300d\u3068\u3044\u3046\u30dc\u30bf\u30f3\u304c\u73fe\u308c\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-01 6.54.00.png](https://qiita-image-store.s3.amazonaws.com/0/43383/2bc72a4a-244e-562f-4bc5-a0e1382fbfe3.png)\n\n\u3053\u308c\u3092\u62bc\u3059\u3068\u3001Amazon Polly\u306b\u3088\u3063\u3066\u6587\u5b57\u5217\u304b\u3089\u5909\u63db\u3055\u308c\u305f\u97f3\u58f0\u3092\u5b9f\u969b\u306b**\u8aad\u307f\u4e0a\u3052**\u3066\u304f\u308c\u307e\u3059\u3002\n\n# \u6240\u611f\n\u8a18\u4e8b\u81ea\u4f53\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u611f\u306f\u306a\u304b\u306a\u304b\u3067\u3001\u79c1\u306f\u767a\u8868\u5f8cSDK\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u307e\u3060\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3055\u308c\u3066\u306a\u304b\u3063\u305f\u308a\u3001Lambda\u306eboto3\u306b\u306f\u65b0\u30b5\u30fc\u30d3\u30b9\u5bfe\u5fdc\u7248\u304c\u5165\u3063\u3066\u306a\u304b\u3063\u305f\u308a\u3068\u5c11\u3057\u30cf\u30de\u308a\u307e\u3057\u305f\u304c\u3001**\u5b9f\u969b\u8a2d\u5b9a\u3057\u3066\u307f\u308b\u3068\u610f\u5916\u3068\u6642\u9593\u306f\u304b\u304b\u3089\u306a\u3044**\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u5916\u90e8\u306e\u30af\u30e9\u30a6\u30c9\u306e\u529b\u3092\u501f\u308a\u308b\u3053\u3068\u3067kintone\u306e\u53ef\u80fd\u6027\u304c\u5e83\u304c\u308b\u3053\u3068\u3092\u307e\u305f\u5b9f\u611f\u3067\u304d\u307e\u3057\u305f\u3002\n\n\u6a5f\u68b0\u5b66\u7fd2\u30fbAI\u3092\u30bc\u30ed\u304b\u3089\u5b66\u3076\u306b\u306f\u6577\u5c45\u304c\u9ad8\u3059\u304e\u308b\u3051\u3069\u3001\u3084\u3063\u3066\u307f\u305f\u3044\u3068\u3044\u3046\u65b9\u306b\u3082\u30aa\u30b9\u30b9\u30e1\u3067\u304d\u308b\u304b\u306a\u3041\u3068\u601d\u3044\u307e\u3059\u3002\u662f\u975e\u304a\u8a66\u3057\u9802\u3051\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n", "tags": ["AWS", "kintone", "Polly", "lambda", "APIGateway"]}