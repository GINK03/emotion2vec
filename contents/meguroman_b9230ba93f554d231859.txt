{"context": " More than 1 year has passed since last update.\n\nUTF-16\u306eBOM(\u30ea\u30c8\u30eb\u30a8\u30f3\u30c7\u30a3\u30a2\u30f3\uff09\u3092\u633f\u5165\u3059\u308b\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\nruby -i -e 'print ARGF.read.sub(/\\A/, \"\\u{FFFE#}\")' file.csv\n\n\nUTF-16LE\u306eBOM(\u30ea\u30c8\u30eb\u30a8\u30f3\u30c7\u30a3\u30a2\u30f3\uff09\u3092\u633f\u5165\u3059\u308bFile\u30af\u30e9\u30b9\u62e1\u5f35\nUTF-8\u306e\u30d5\u30a1\u30a4\u30eb\u304b\u3089UTF-16LE\u3078\u306e\u5909\u63db\u524d\u63d0\nclass File\n  def self.insert_bom(input_filename, output_filename)\n    src = File.read(input_filename)\n    File.open(output_filename, \"w:UTF-16\") do |f|\n      src = '  ' + src\n      src.setbyte(0, 0xFF)\n      src.setbyte(1, 0xFE)\n      f.print src\n    end\n  end\nend\n\n\nUTF-8\u306e\u30d5\u30a1\u30a4\u30eb\u3092UTF-16LE\u306b\u5909\u63db\u3059\u308b\nFile.write \"file_utf16.csv\", NKF.nkf('-w16L',File.read(\"file_utf8.csv\")) \nFile.insert_bom(\"file_utf16.csv\", \"file_utf16_bom.csv\")\n\n\u5b9f\u884c\u7d50\u679c\n$ nkf --guess file_utf8.csv\nUTF-8 (CRLF)\n\n$ nkf --guess file_utf16.csv\nBINARY\n\n$ nkf --guess file_utf16_bom.csv\nUTF-16 LE (BOM) (CRLF)\n\n\n\u53c2\u8003\nhttp://magazine.rubyist.net/?0009-BundledLibraries#l7\nhttp://tbpgr.hatenablog.com/entry/20140204/1391517653\n\n## UTF-16\u306eBOM(\u30ea\u30c8\u30eb\u30a8\u30f3\u30c7\u30a3\u30a2\u30f3\uff09\u3092\u633f\u5165\u3059\u308b\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\n\n```bash\nruby -i -e 'print ARGF.read.sub(/\\A/, \"\\u{FFFE#}\")' file.csv\n```\n\n\n\n## UTF-16LE\u306eBOM(\u30ea\u30c8\u30eb\u30a8\u30f3\u30c7\u30a3\u30a2\u30f3\uff09\u3092\u633f\u5165\u3059\u308bFile\u30af\u30e9\u30b9\u62e1\u5f35\n\nUTF-8\u306e\u30d5\u30a1\u30a4\u30eb\u304b\u3089UTF-16LE\u3078\u306e\u5909\u63db\u524d\u63d0\n\n```ruby\nclass File\n  def self.insert_bom(input_filename, output_filename)\n    src = File.read(input_filename)\n    File.open(output_filename, \"w:UTF-16\") do |f|\n      src = '  ' + src\n      src.setbyte(0, 0xFF)\n      src.setbyte(1, 0xFE)\n      f.print src\n    end\n  end\nend\n```\n\n\n\n## UTF-8\u306e\u30d5\u30a1\u30a4\u30eb\u3092UTF-16LE\u306b\u5909\u63db\u3059\u308b\n\n\n```ruby\nFile.write \"file_utf16.csv\", NKF.nkf('-w16L',File.read(\"file_utf8.csv\")) \nFile.insert_bom(\"file_utf16.csv\", \"file_utf16_bom.csv\")\n```\n\n\u5b9f\u884c\u7d50\u679c\n\n```bash\n$ nkf --guess file_utf8.csv\nUTF-8 (CRLF)\n\n$ nkf --guess file_utf16.csv\nBINARY\n\n$ nkf --guess file_utf16_bom.csv\nUTF-16 LE (BOM) (CRLF)\n```\n\n\n### \u53c2\u8003\nhttp://magazine.rubyist.net/?0009-BundledLibraries#l7\nhttp://tbpgr.hatenablog.com/entry/20140204/1391517653\n", "tags": ["CSV", "Ruby"]}