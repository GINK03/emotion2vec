{"context": " More than 1 year has passed since last update.\u6bce\u56de\u30c6\u30b9\u30c8\u3059\u308b\u5ea6\u306b\u30bd\u30fc\u30b9\u66f8\u3044\u3066\u306a\u304f\u3057\u3066\u3001\u307e\u305f\u66f8\u304f\u7fbd\u76ee\u306b\u306a\u308b\u306e\u3067\u30bd\u30fc\u30b9\u3092\u30e1\u30e2\u3057\u3066\u304a\u3053\u3046\u304b\u3068\u3002\nLive2D SDK(WebGL)\u306eSimple\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30ab\u30b9\u30bf\u30e0\u3057\u3066\u3001Canvas\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u30e2\u30fc\u30b7\u30e7\u30f3\u5207\u66ff\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\nSimple.js\u90e8\u5206\u306e\u5b9a\u6570\u90e8\u5206\u3092\u5909\u3048\u308c\u3070\u4ed6\u306e\u30e2\u30c7\u30eb\u3067\u3082\u4f7f\u3048\u307e\u3059\u3002\n\n\nHTML\u90e8\u5206\n\nsimple.html\n<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset=\"UTF-8\">\n            <title>Live2D Simple</title>\n        </meta>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=4.0\">\n        </meta>\n    </head>\n    <body>\n        <canvas id=\"glcanvas\" style=\"border:dashed 1px #CCC\"></canvas>\n        <div id=\"myconsole\" style=\"color:#BBB\">---- Log ----</div>\n        <!-- Live2D Library -->\n        <script src=\"../../lib/live2d.min.js\"></script>        \n        <script src=\"../../framework/Live2DFramework.js\"></script>\n        <!-- User's Script -->\n        <script src=\"src/Simple.js\"></script>\n    </body>\n</html>\n\n\n\njs\u90e8\u5206\n\nSimple.js\n// \u5b9a\u6570\nvar CANVAS_WIDTH  = 512;\nvar CANVAS_HEIGHT = 512;\nvar CANVAS_ID = 'glcanvas';\n\nvar MODEL_PATH = \"assets/haru/\";\nvar MODEL_DEFINE = {\n    \"type\":\"Live2D Model Setting\",\n    \"name\":\"haru\",\n    \"model\": MODEL_PATH + \"haru.moc\",\n    \"textures\":[\n        MODEL_PATH + \"haru.1024/texture_00.png\",\n        MODEL_PATH + \"haru.1024/texture_01.png\",\n        MODEL_PATH + \"haru.1024/texture_02.png\",\n    ],\n    \"motions\":[            \n        MODEL_PATH + \"motions/idle_00.mtn\",\n        MODEL_PATH + \"motions/shake_00.mtn\",\n        MODEL_PATH + \"motions/tapBody_05.mtn\",\n    ],    \n};\n\n\n// JavaScript\u3067\u767a\u751f\u3057\u305f\u30a8\u30e9\u30fc\u3092\u53d6\u5f97\nwindow.onerror = function(msg, url, line, col, error) {\n    var errmsg = \"file:\" + url + \"<br>line:\" + line + \" \" + msg;\n    this.myerror(errmsg);\n}\n\nwindow.onload = function(){\n    var glCanvas = new Simple();\n}\n\nvar Simple = function() {\n    // Live2D\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n    this.live2DModel = null;   \n    // \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u505c\u6b62\u3059\u308b\u305f\u3081\u306eID\n    this.requestID = null; \n    // \u30e2\u30c7\u30eb\u306e\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u305f\u3089 true\n    this.loadLive2DCompleted = false; \n    // \u30e2\u30c7\u30eb\u306e\u521d\u671f\u5316\u304c\u5b8c\u4e86\u3057\u305f\u3089 true\n    this.initLive2DCompleted = false;    \n    // WebGL Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u914d\u5217\n    this.loadedImages = [];    \n    // \u30e2\u30fc\u30b7\u30e7\u30f3\n    this.motions = [];\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u7ba1\u7406\u30de\u30cd\u30b8\u30e3\u30fc\n    this.motionMgr = null;\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u756a\u53f7\n    this.motionnm = 0;\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30c1\u30a7\u30f3\u30b8\n    this.motionchange = false;\n    // Live2D \u30e2\u30c7\u30eb\u8a2d\u5b9a\u3002\n    this.modelDef = MODEL_DEFINE;    \n    // Live2D\u306e\u521d\u671f\u5316\n    Live2D.init();\n    // canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\n    this.canvas = document.getElementById(CANVAS_ID);\n    this.canvas.height = CANVAS_HEIGHT;\n    this.canvas.width = CANVAS_WIDTH;\n\n    // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u5931\u3063\u305f\u3068\u304d    \n    this.canvas.addEventListener(\"webglcontextlost\", function(e) {\n        this.myerror(\"context lost\");\n        this.loadLive2DCompleted = false;\n        this.initLive2DCompleted = false;\n\n        var cancelAnimationFrame = \n            window.cancelAnimationFrame || \n            window.mozCancelAnimationFrame;\n        cancelAnimationFrame(requestID); //\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u505c\u6b62\n\n        e.preventDefault(); \n    }, false);\n\n    // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u304c\u5fa9\u5143\u3055\u308c\u305f\u3068\u304d\n    this.canvas.addEventListener(\"webglcontextrestored\" , function(e){\n        this.myerror(\"webglcontext restored\");\n        this.initLoop(this.canvas); \n    }, false);\n    // Init and start Loop\n    this.initLoop(this.canvas);\n};\n\n\n/*\n* WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u30fb\u521d\u671f\u5316\u3002\n* Live2D\u306e\u521d\u671f\u5316\u3001\u63cf\u753b\u30eb\u30fc\u30d7\u3092\u958b\u59cb\u3002\n*/\nSimple.prototype.initLoop = function(canvas/*HTML5 canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8*/) \n{\n    //------------ WebGL\u306e\u521d\u671f\u5316 ------------   \n    // WebGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n    var para = {\n        premultipliedAlpha : true,\n//        alpha : false\n    };\n    var gl = this.getWebGLContext(canvas, para);\n    if (!gl) {\n        this.myerror(\"Failed to create WebGL context.\");\n        return;\n    }\n\n    // \u63cf\u753b\u30a8\u30ea\u30a2\u3092\u767d\u3067\u30af\u30ea\u30a2\n    gl.clearColor( 0.0 , 0.0 , 0.0 , 0.0 );  \n\n    // \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u5bfe\u7b56\n    var that = this;\n\n    //------------ Live2D\u306e\u521d\u671f\u5316 ------------  \n    // moc\u30d5\u30a1\u30a4\u30eb\u304b\u3089Live2D\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\n    this.loadBytes(this.modelDef.model, function(buf){\n        that.live2DModel = Live2DModelWebGL.loadModel(buf);\n    });\n\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u8aad\u307f\u8fbc\u307f\n    var loadCount = 0;\n    for(var i = 0; i < that.modelDef.textures.length; i++){\n            (function ( tno ){// \u5373\u6642\u95a2\u6570\u3067 i \u306e\u5024\u3092 tno \u306b\u56fa\u5b9a\u3059\u308b\uff08onerror\u7528)\n                that.loadedImages[tno] = new Image();\n                that.loadedImages[tno].src = that.modelDef.textures[tno];\n                that.loadedImages[tno].onload = function(){\n                    if((++loadCount) == that.modelDef.textures.length) {\n                        that.loadLive2DCompleted = true;//\u5168\u3066\u8aad\u307f\u7d42\u308f\u3063\u305f\n                    }\n                }\n                that.loadedImages[tno].onerror = function() { \n                    that.myerror(\"Failed to load image : \" + that.modelDef.textures[tno]); \n                }\n            })( i );\n    }\n\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u30ed\u30fc\u30c9\n        for(var i = 0; i < that.modelDef.motions.length; i++){\n            that.loadBytes(that.modelDef.motions[i], function(buf){\n                that.motions.push(Live2DMotion.loadMotion(buf));\n            });\n        }\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30de\u30cd\u30b8\u30e3\u30fc\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\n       that.motionMgr = new L2DMotionManager();\n\n        // \u30de\u30a6\u30b9\u30af\u30ea\u30c3\u30af\u30a4\u30d9\u30f3\u30c8\n        that.canvas.addEventListener(\"click\", function(e){\n            that.motionchange = true;\n            if(that.motions.length - 1  > that.motionnm){\n                that.motionnm++;\n            }else{\n                that.motionnm = 0;                \n            }\n        }, false);\n    //------------ \u63cf\u753b\u30eb\u30fc\u30d7 ------------\n\n    (function tick() {\n        that.draw(gl, that); // 1\u56de\u5206\u63cf\u753b\n\n        var requestAnimationFrame = \n            window.requestAnimationFrame || \n            window.mozRequestAnimationFrame ||\n            window.webkitRequestAnimationFrame || \n            window.msRequestAnimationFrame;\n        requestID = requestAnimationFrame( tick , that.canvas );// \u4e00\u5b9a\u6642\u9593\u5f8c\u306b\u81ea\u8eab\u3092\u547c\u3073\u51fa\u3059\n    })();\n};\n\n\nSimple.prototype.draw = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/, that)\n{\n    // Canvas\u3092\u30af\u30ea\u30a2\u3059\u308b\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // Live2D\u521d\u671f\u5316\n    if( ! that.live2DModel || ! that.loadLive2DCompleted ) \n    return; //\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u4f55\u3082\u3057\u306a\u3044\u3067\u8fd4\u308b\n\n    // \u30ed\u30fc\u30c9\u5b8c\u4e86\u5f8c\u306b\u521d\u56de\u306e\u307f\u521d\u671f\u5316\u3059\u308b\n    if( ! that.initLive2DCompleted ){\n            that.initLive2DCompleted = true;\n\n        // \u753b\u50cf\u304b\u3089WebGL\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\u3057\u3001\u30e2\u30c7\u30eb\u306b\u767b\u9332\n        for( var i = 0; i < that.loadedImages.length; i++ ){\n            //Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n            var texName = that.createTexture(gl, that.loadedImages[i]);\n            that.live2DModel.setTexture(i, texName); //\u30e2\u30c7\u30eb\u306b\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u30bb\u30c3\u30c8\n        }\n\n        // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u5143\u753b\u50cf\u306e\u53c2\u7167\u3092\u30af\u30ea\u30a2\n        that.loadedImages = null;\n        // OpenGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u30bb\u30c3\u30c8\n        that.live2DModel.setGL(gl);\n\n        // \u8868\u793a\u4f4d\u7f6e\u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306e\u884c\u5217\u3092\u5b9a\u7fa9\u3059\u308b\n        var s = 2.0 / that.live2DModel.getCanvasWidth(); //canvas\u306e\u6a2a\u5e45\u3092-1..1\u533a\u9593\u306b\u53ce\u3081\u308b\n        var matrix4x4 = [\n             s, 0, 0, 0,\n             0,-s, 0, 0,\n             0, 0, 1, 0,\n            -1, 1, 0, 1\n        ];\n        that.live2DModel.setMatrix(matrix4x4);\n    }\n\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u4e86\u3057\u3066\u3044\u305f\u3089\u518d\u751f\u3059\u308b\n    if(that.motionMgr.isFinished() || that.motionchange == true ){\n        that.motionMgr.startMotion(that.motions[that.motionnm], 0);        \n        that.motionchange = false;\n        console.info(\"motion:\" + that.motionnm);\n    }\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u4f55\u3082\u518d\u751f\u3057\u306a\u3044\n    if(that.motionnm != null){\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u66f4\u65b0\n        that.motionMgr.updateParam(that.live2DModel);\n    }\n\n//    // \u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u9069\u5f53\u306b\u66f4\u65b0\n//    var t = UtSystem.getTimeMSec() * 0.001 * 2 * Math.PI; //1\u79d2\u3054\u3068\u306b2\u03c0(1\u5468\u671f)\u5897\u3048\u308b\n//    var cycle = 3.0; //\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u4e00\u5468\u3059\u308b\u6642\u9593(\u79d2)\n//    // PARAM_ANGLE_X\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c[cycle]\u79d2\u3054\u3068\u306b-30\u304b\u308930\u307e\u3067\u5909\u5316\u3059\u308b\n//    that.live2DModel.setParamFloat(\"PARAM_ANGLE_X\", 30 * Math.sin(t/cycle));\n\n    // Live2D\u30e2\u30c7\u30eb\u3092\u66f4\u65b0\u3057\u3066\u63cf\u753b\n    that.live2DModel.update(); // \u73fe\u5728\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5408\u308f\u305b\u3066\u9802\u70b9\u7b49\u3092\u8a08\u7b97\n    that.live2DModel.draw();    // \u63cf\u753b\n};\n\n\n/*\n* WebGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n*/\nSimple.prototype.getWebGLContext = function(canvas/*HTML5 canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8*/)\n{\n    var NAMES = [ \"webgl\" , \"experimental-webgl\" , \"webkit-3d\" , \"moz-webgl\"];\n\n    var param = {\n        alpha : true,\n        premultipliedAlpha : true\n    };\n\n    for( var i = 0; i < NAMES.length; i++ ){\n        try{\n            var ctx = canvas.getContext( NAMES[i], param );\n            if( ctx ) return ctx;\n        } \n        catch(e){}\n    }\n    return null;\n};\n\n\n/*\n* Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n*/\nSimple.prototype.createTexture = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/, image/*WebGL Image*/) \n{\n    var texture = gl.createTexture(); //\u30c6\u30af\u30b9\u30c1\u30e3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\n    if ( !texture ){\n        mylog(\"Failed to generate gl texture name.\");\n        return -1;\n    }\n\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);  //image\u3092\u4e0a\u4e0b\u53cd\u8ee2\n    gl.activeTexture( gl.TEXTURE0 );\n    gl.bindTexture( gl.TEXTURE_2D , texture );\n    gl.texImage2D( gl.TEXTURE_2D , 0 , gl.RGBA , gl.RGBA , gl.UNSIGNED_BYTE , image);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n\n    gl.generateMipmap(gl.TEXTURE_2D);\n    gl.bindTexture( gl.TEXTURE_2D , null );\n\n    return texture;\n};\n\n\n/*\n* \u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30a4\u30c8\u914d\u5217\u3068\u3057\u3066\u30ed\u30fc\u30c9\u3059\u308b\n*/\nSimple.prototype.loadBytes = function(path , callback)\n{\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", path , true);\n    request.responseType = \"arraybuffer\";\n    request.onload = function(){\n        switch( request.status ){\n        case 200:\n                callback( request.response );\n                break;\n        default:\n                Simple.myerror( \"Failed to load (\" + request.status + \") : \" + path );\n                break;\n        }\n    }    \n    request.send(null); \n};\n\n/*\n* \u753b\u9762\u30ed\u30b0\u3092\u51fa\u529b\n*/\nSimple.prototype.mylog = function(msg/*string*/)\n{\n    var myconsole = document.getElementById(\"myconsole\");\n    myconsole.innerHTML = myconsole.innerHTML + \"<br>\" + msg;\n    console.log(msg);\n};\n\n/*\n* \u753b\u9762\u30a8\u30e9\u30fc\u3092\u51fa\u529b\n*/\nSimple.prototype.myerror = function(msg/*string*/)\n{\n    console.error(msg);\n    that.mylog( \"<span style='color:red'>\" + msg + \"</span>\");\n};\n\n\n\n2015/12/02\u8ffd\u8a18\n\u30d5\u30a9\u30fc\u30e9\u30e0\u3067\u95a2\u6570\u304c\u4e00\u90e8\u6697\u53f7\u5316\u3055\u308c\u3066\u3044\u3066\u4f7f\u3048\u306a\u304f\u3066\u56f0\u3063\u3066\u308b\u4eba\u304c\u3044\u305f\u306e\u3067\u3001\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u3082\u3089\u3044\u307e\u3057\u305f\u3002\nLive2D Community - motion - set / get LOOP fade\n\u25c6\u4f7f\u3044\u65b9\u4f8b\n\nSimple.js\nSimple.prototype.draw = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/, that)\n{\n    // Canvas\u3092\u30af\u30ea\u30a2\u3059\u308b\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // Live2D\u521d\u671f\u5316\n    if( ! that.live2DModel || ! that.loadLive2DCompleted ) \n    return; //\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u4f55\u3082\u3057\u306a\u3044\u3067\u8fd4\u308b\n\n    // \u30ed\u30fc\u30c9\u5b8c\u4e86\u5f8c\u306b\u521d\u56de\u306e\u307f\u521d\u671f\u5316\u3059\u308b\n    if( ! that.initLive2DCompleted ){\n            that.initLive2DCompleted = true;\n\n    // \u30eb\u30fc\u30d7\n    for(var k = 0; k < that.motions.length; k++){\n        that.motions[k].setLoop(true);\n        console.log(\"k\" + k + \":\" + that.motions[k].isLoop() + \" \" + that.motions[k].getLoopDurationMSec());        \n    }\n        // \u753b\u50cf\u304b\u3089WebGL\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\u3057\u3001\u30e2\u30c7\u30eb\u306b\u767b\u9332\n        for( var i = 0; i < that.loadedImages.length; i++ ){\n            //Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n            var texName = that.createTexture(gl, that.loadedImages[i]);\n            that.live2DModel.setTexture(i, texName); //\u30e2\u30c7\u30eb\u306b\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u30bb\u30c3\u30c8\n        }\n        that.motionMgr.startMotion(that.motions[that.motionnm], 0);\n\n        // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u5143\u753b\u50cf\u306e\u53c2\u7167\u3092\u30af\u30ea\u30a2\n        that.loadedImages = null;\n        // OpenGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u30bb\u30c3\u30c8\n        that.live2DModel.setGL(gl);\n\n        // \u8868\u793a\u4f4d\u7f6e\u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306e\u884c\u5217\u3092\u5b9a\u7fa9\u3059\u308b\n        var s = 2.0 / that.live2DModel.getCanvasWidth(); //canvas\u306e\u6a2a\u5e45\u3092-1..1\u533a\u9593\u306b\u53ce\u3081\u308b\n        var matrix4x4 = [\n             s, 0, 0, 0,\n             0,-s, 0, 0,\n             0, 0, 1, 0,\n            -1, 1, 0, 1\n        ];\n        that.live2DModel.setMatrix(matrix4x4);\n    }\n\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u4e86\u3057\u3066\u3044\u305f\u3089\u518d\u751f\u3059\u308b\n//    if(that.motionMgr.isFinished() || that.motionchange == true ){\n//        that.motionMgr.startMotion(that.motions[that.motionnm], 0);        \n//        that.motionchange = false;\n//        console.info(\"motion:\" + that.motionnm);\n//    }\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u4f55\u3082\u518d\u751f\u3057\u306a\u3044\n    if(that.motionnm != null){\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u66f4\u65b0\n        that.motionMgr.updateParam(that.live2DModel);\n    }\n\n//    // \u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u9069\u5f53\u306b\u66f4\u65b0\n//    var t = UtSystem.getTimeMSec() * 0.001 * 2 * Math.PI; //1\u79d2\u3054\u3068\u306b2\u03c0(1\u5468\u671f)\u5897\u3048\u308b\n//    var cycle = 3.0; //\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u4e00\u5468\u3059\u308b\u6642\u9593(\u79d2)\n//    // PARAM_ANGLE_X\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c[cycle]\u79d2\u3054\u3068\u306b-30\u304b\u308930\u307e\u3067\u5909\u5316\u3059\u308b\n//    that.live2DModel.setParamFloat(\"PARAM_ANGLE_X\", 30 * Math.sin(t/cycle));\n\n    // Live2D\u30e2\u30c7\u30eb\u3092\u66f4\u65b0\u3057\u3066\u63cf\u753b\n    that.live2DModel.update(); // \u73fe\u5728\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5408\u308f\u305b\u3066\u9802\u70b9\u7b49\u3092\u8a08\u7b97\n    that.live2DModel.draw();    // \u63cf\u753b\n};\n\n\n\u6bce\u56de\u30c6\u30b9\u30c8\u3059\u308b\u5ea6\u306b\u30bd\u30fc\u30b9\u66f8\u3044\u3066\u306a\u304f\u3057\u3066\u3001\u307e\u305f\u66f8\u304f\u7fbd\u76ee\u306b\u306a\u308b\u306e\u3067\u30bd\u30fc\u30b9\u3092\u30e1\u30e2\u3057\u3066\u304a\u3053\u3046\u304b\u3068\u3002\nLive2D SDK(WebGL)\u306eSimple\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30ab\u30b9\u30bf\u30e0\u3057\u3066\u3001Canvas\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u30e2\u30fc\u30b7\u30e7\u30f3\u5207\u66ff\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\nSimple.js\u90e8\u5206\u306e\u5b9a\u6570\u90e8\u5206\u3092\u5909\u3048\u308c\u3070\u4ed6\u306e\u30e2\u30c7\u30eb\u3067\u3082\u4f7f\u3048\u307e\u3059\u3002\n![motion.gif](https://qiita-image-store.s3.amazonaws.com/0/15028/5ac0cd27-9431-2b4e-a7ea-4daf8b94a57c.gif)\n\n\n# HTML\u90e8\u5206\n\n```html:simple.html\n<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset=\"UTF-8\">\n            <title>Live2D Simple</title>\n        </meta>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=4.0\">\n        </meta>\n    </head>\n    <body>\n        <canvas id=\"glcanvas\" style=\"border:dashed 1px #CCC\"></canvas>\n        <div id=\"myconsole\" style=\"color:#BBB\">---- Log ----</div>\n        <!-- Live2D Library -->\n        <script src=\"../../lib/live2d.min.js\"></script>        \n        <script src=\"../../framework/Live2DFramework.js\"></script>\n        <!-- User's Script -->\n        <script src=\"src/Simple.js\"></script>\n    </body>\n</html>\n```\n\n# js\u90e8\u5206\n\n```js:Simple.js\n// \u5b9a\u6570\nvar CANVAS_WIDTH  = 512;\nvar CANVAS_HEIGHT = 512;\nvar CANVAS_ID = 'glcanvas';\n\nvar MODEL_PATH = \"assets/haru/\";\nvar MODEL_DEFINE = {\n    \"type\":\"Live2D Model Setting\",\n    \"name\":\"haru\",\n    \"model\": MODEL_PATH + \"haru.moc\",\n    \"textures\":[\n        MODEL_PATH + \"haru.1024/texture_00.png\",\n        MODEL_PATH + \"haru.1024/texture_01.png\",\n        MODEL_PATH + \"haru.1024/texture_02.png\",\n    ],\n    \"motions\":[            \n        MODEL_PATH + \"motions/idle_00.mtn\",\n        MODEL_PATH + \"motions/shake_00.mtn\",\n        MODEL_PATH + \"motions/tapBody_05.mtn\",\n    ],    \n};\n\n\n// JavaScript\u3067\u767a\u751f\u3057\u305f\u30a8\u30e9\u30fc\u3092\u53d6\u5f97\nwindow.onerror = function(msg, url, line, col, error) {\n    var errmsg = \"file:\" + url + \"<br>line:\" + line + \" \" + msg;\n    this.myerror(errmsg);\n}\n\nwindow.onload = function(){\n    var glCanvas = new Simple();\n}\n\nvar Simple = function() {\n    // Live2D\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n    this.live2DModel = null;   \n    // \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u505c\u6b62\u3059\u308b\u305f\u3081\u306eID\n    this.requestID = null; \n    // \u30e2\u30c7\u30eb\u306e\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u305f\u3089 true\n    this.loadLive2DCompleted = false; \n    // \u30e2\u30c7\u30eb\u306e\u521d\u671f\u5316\u304c\u5b8c\u4e86\u3057\u305f\u3089 true\n    this.initLive2DCompleted = false;    \n    // WebGL Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u914d\u5217\n    this.loadedImages = [];    \n    // \u30e2\u30fc\u30b7\u30e7\u30f3\n    this.motions = [];\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u7ba1\u7406\u30de\u30cd\u30b8\u30e3\u30fc\n    this.motionMgr = null;\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u756a\u53f7\n    this.motionnm = 0;\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30c1\u30a7\u30f3\u30b8\n    this.motionchange = false;\n    // Live2D \u30e2\u30c7\u30eb\u8a2d\u5b9a\u3002\n    this.modelDef = MODEL_DEFINE;    \n    // Live2D\u306e\u521d\u671f\u5316\n    Live2D.init();\n    // canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\n    this.canvas = document.getElementById(CANVAS_ID);\n    this.canvas.height = CANVAS_HEIGHT;\n    this.canvas.width = CANVAS_WIDTH;\n  \n    // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u5931\u3063\u305f\u3068\u304d    \n    this.canvas.addEventListener(\"webglcontextlost\", function(e) {\n        this.myerror(\"context lost\");\n        this.loadLive2DCompleted = false;\n        this.initLive2DCompleted = false;\n        \n        var cancelAnimationFrame = \n            window.cancelAnimationFrame || \n            window.mozCancelAnimationFrame;\n        cancelAnimationFrame(requestID); //\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u505c\u6b62\n        \n        e.preventDefault(); \n    }, false);\n    \n    // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u304c\u5fa9\u5143\u3055\u308c\u305f\u3068\u304d\n    this.canvas.addEventListener(\"webglcontextrestored\" , function(e){\n        this.myerror(\"webglcontext restored\");\n        this.initLoop(this.canvas); \n    }, false);\n    // Init and start Loop\n    this.initLoop(this.canvas);\n};\n\n\n/*\n* WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u30fb\u521d\u671f\u5316\u3002\n* Live2D\u306e\u521d\u671f\u5316\u3001\u63cf\u753b\u30eb\u30fc\u30d7\u3092\u958b\u59cb\u3002\n*/\nSimple.prototype.initLoop = function(canvas/*HTML5 canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8*/) \n{\n    //------------ WebGL\u306e\u521d\u671f\u5316 ------------   \n    // WebGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n    var para = {\n        premultipliedAlpha : true,\n//        alpha : false\n    };\n\tvar gl = this.getWebGLContext(canvas, para);\n\tif (!gl) {\n        this.myerror(\"Failed to create WebGL context.\");\n        return;\n    }\n\n    // \u63cf\u753b\u30a8\u30ea\u30a2\u3092\u767d\u3067\u30af\u30ea\u30a2\n    gl.clearColor( 0.0 , 0.0 , 0.0 , 0.0 );\t \n\n    // \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u5bfe\u7b56\n    var that = this;\n    \n    //------------ Live2D\u306e\u521d\u671f\u5316 ------------  \n    // moc\u30d5\u30a1\u30a4\u30eb\u304b\u3089Live2D\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\n    this.loadBytes(this.modelDef.model, function(buf){\n        that.live2DModel = Live2DModelWebGL.loadModel(buf);\n    });\n\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u8aad\u307f\u8fbc\u307f\n    var loadCount = 0;\n\tfor(var i = 0; i < that.modelDef.textures.length; i++){\n            (function ( tno ){// \u5373\u6642\u95a2\u6570\u3067 i \u306e\u5024\u3092 tno \u306b\u56fa\u5b9a\u3059\u308b\uff08onerror\u7528)\n                that.loadedImages[tno] = new Image();\n                that.loadedImages[tno].src = that.modelDef.textures[tno];\n                that.loadedImages[tno].onload = function(){\n                    if((++loadCount) == that.modelDef.textures.length) {\n                        that.loadLive2DCompleted = true;//\u5168\u3066\u8aad\u307f\u7d42\u308f\u3063\u305f\n                    }\n                }\n                that.loadedImages[tno].onerror = function() { \n                    that.myerror(\"Failed to load image : \" + that.modelDef.textures[tno]); \n                }\n            })( i );\n\t}\n\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u30ed\u30fc\u30c9\n        for(var i = 0; i < that.modelDef.motions.length; i++){\n            that.loadBytes(that.modelDef.motions[i], function(buf){\n                that.motions.push(Live2DMotion.loadMotion(buf));\n            });\n        }\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30de\u30cd\u30b8\u30e3\u30fc\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\n       that.motionMgr = new L2DMotionManager();\n       \n        // \u30de\u30a6\u30b9\u30af\u30ea\u30c3\u30af\u30a4\u30d9\u30f3\u30c8\n        that.canvas.addEventListener(\"click\", function(e){\n            that.motionchange = true;\n            if(that.motions.length - 1  > that.motionnm){\n                that.motionnm++;\n            }else{\n                that.motionnm = 0;                \n            }\n        }, false);\n\t//------------ \u63cf\u753b\u30eb\u30fc\u30d7 ------------\n    \n    (function tick() {\n        that.draw(gl, that); // 1\u56de\u5206\u63cf\u753b\n        \n        var requestAnimationFrame = \n            window.requestAnimationFrame || \n            window.mozRequestAnimationFrame ||\n            window.webkitRequestAnimationFrame || \n            window.msRequestAnimationFrame;\n\t\trequestID = requestAnimationFrame( tick , that.canvas );// \u4e00\u5b9a\u6642\u9593\u5f8c\u306b\u81ea\u8eab\u3092\u547c\u3073\u51fa\u3059\n    })();\n};\n\n\nSimple.prototype.draw = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/, that)\n{\n    // Canvas\u3092\u30af\u30ea\u30a2\u3059\u308b\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // Live2D\u521d\u671f\u5316\n    if( ! that.live2DModel || ! that.loadLive2DCompleted ) \n    return; //\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u4f55\u3082\u3057\u306a\u3044\u3067\u8fd4\u308b\n\t\n    // \u30ed\u30fc\u30c9\u5b8c\u4e86\u5f8c\u306b\u521d\u56de\u306e\u307f\u521d\u671f\u5316\u3059\u308b\n    if( ! that.initLive2DCompleted ){\n            that.initLive2DCompleted = true;\n\n        // \u753b\u50cf\u304b\u3089WebGL\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\u3057\u3001\u30e2\u30c7\u30eb\u306b\u767b\u9332\n        for( var i = 0; i < that.loadedImages.length; i++ ){\n            //Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n            var texName = that.createTexture(gl, that.loadedImages[i]);\n            that.live2DModel.setTexture(i, texName); //\u30e2\u30c7\u30eb\u306b\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u30bb\u30c3\u30c8\n        }\n        \n        // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u5143\u753b\u50cf\u306e\u53c2\u7167\u3092\u30af\u30ea\u30a2\n        that.loadedImages = null;\n        // OpenGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u30bb\u30c3\u30c8\n        that.live2DModel.setGL(gl);\n\n        // \u8868\u793a\u4f4d\u7f6e\u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306e\u884c\u5217\u3092\u5b9a\u7fa9\u3059\u308b\n        var s = 2.0 / that.live2DModel.getCanvasWidth(); //canvas\u306e\u6a2a\u5e45\u3092-1..1\u533a\u9593\u306b\u53ce\u3081\u308b\n        var matrix4x4 = [\n             s, 0, 0, 0,\n             0,-s, 0, 0,\n             0, 0, 1, 0,\n            -1, 1, 0, 1\n        ];\n        that.live2DModel.setMatrix(matrix4x4);\n    }\n    \n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u4e86\u3057\u3066\u3044\u305f\u3089\u518d\u751f\u3059\u308b\n    if(that.motionMgr.isFinished() || that.motionchange == true ){\n        that.motionMgr.startMotion(that.motions[that.motionnm], 0);        \n        that.motionchange = false;\n        console.info(\"motion:\" + that.motionnm);\n    }\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u4f55\u3082\u518d\u751f\u3057\u306a\u3044\n    if(that.motionnm != null){\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u66f4\u65b0\n        that.motionMgr.updateParam(that.live2DModel);\n    }\n    \n//    // \u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u9069\u5f53\u306b\u66f4\u65b0\n//    var t = UtSystem.getTimeMSec() * 0.001 * 2 * Math.PI; //1\u79d2\u3054\u3068\u306b2\u03c0(1\u5468\u671f)\u5897\u3048\u308b\n//    var cycle = 3.0; //\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u4e00\u5468\u3059\u308b\u6642\u9593(\u79d2)\n//    // PARAM_ANGLE_X\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c[cycle]\u79d2\u3054\u3068\u306b-30\u304b\u308930\u307e\u3067\u5909\u5316\u3059\u308b\n//    that.live2DModel.setParamFloat(\"PARAM_ANGLE_X\", 30 * Math.sin(t/cycle));\n\n    // Live2D\u30e2\u30c7\u30eb\u3092\u66f4\u65b0\u3057\u3066\u63cf\u753b\n    that.live2DModel.update(); // \u73fe\u5728\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5408\u308f\u305b\u3066\u9802\u70b9\u7b49\u3092\u8a08\u7b97\n    that.live2DModel.draw();\t// \u63cf\u753b\n};\n\n\n/*\n* WebGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n*/\nSimple.prototype.getWebGLContext = function(canvas/*HTML5 canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8*/)\n{\n\tvar NAMES = [ \"webgl\" , \"experimental-webgl\" , \"webkit-3d\" , \"moz-webgl\"];\n\t\n    var param = {\n        alpha : true,\n        premultipliedAlpha : true\n    };\n    \n\tfor( var i = 0; i < NAMES.length; i++ ){\n\t\ttry{\n\t\t\tvar ctx = canvas.getContext( NAMES[i], param );\n\t\t\tif( ctx ) return ctx;\n\t\t} \n\t\tcatch(e){}\n\t}\n\treturn null;\n};\n\n\n/*\n* Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n*/\nSimple.prototype.createTexture = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/, image/*WebGL Image*/) \n{\n\tvar texture = gl.createTexture(); //\u30c6\u30af\u30b9\u30c1\u30e3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\n\tif ( !texture ){\n        mylog(\"Failed to generate gl texture name.\");\n        return -1;\n    }\n    \n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);\t//image\u3092\u4e0a\u4e0b\u53cd\u8ee2\n    gl.activeTexture( gl.TEXTURE0 );\n    gl.bindTexture( gl.TEXTURE_2D , texture );\n    gl.texImage2D( gl.TEXTURE_2D , 0 , gl.RGBA , gl.RGBA , gl.UNSIGNED_BYTE , image);\n    \n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n        \n    gl.generateMipmap(gl.TEXTURE_2D);\n    gl.bindTexture( gl.TEXTURE_2D , null );\n    \n    return texture;\n};\n\n\n/*\n* \u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30a4\u30c8\u914d\u5217\u3068\u3057\u3066\u30ed\u30fc\u30c9\u3059\u308b\n*/\nSimple.prototype.loadBytes = function(path , callback)\n{\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", path , true);\n    request.responseType = \"arraybuffer\";\n    request.onload = function(){\n        switch( request.status ){\n        case 200:\n                callback( request.response );\n                break;\n        default:\n                Simple.myerror( \"Failed to load (\" + request.status + \") : \" + path );\n                break;\n        }\n    }    \n    request.send(null); \n};\n\n/*\n* \u753b\u9762\u30ed\u30b0\u3092\u51fa\u529b\n*/\nSimple.prototype.mylog = function(msg/*string*/)\n{\n\tvar myconsole = document.getElementById(\"myconsole\");\n\tmyconsole.innerHTML = myconsole.innerHTML + \"<br>\" + msg;\n\tconsole.log(msg);\n};\n\n/*\n* \u753b\u9762\u30a8\u30e9\u30fc\u3092\u51fa\u529b\n*/\nSimple.prototype.myerror = function(msg/*string*/)\n{\n    console.error(msg);\n    that.mylog( \"<span style='color:red'>\" + msg + \"</span>\");\n};\n\n```\n\n**2015/12/02\u8ffd\u8a18**\n\u30d5\u30a9\u30fc\u30e9\u30e0\u3067\u95a2\u6570\u304c\u4e00\u90e8\u6697\u53f7\u5316\u3055\u308c\u3066\u3044\u3066\u4f7f\u3048\u306a\u304f\u3066\u56f0\u3063\u3066\u308b\u4eba\u304c\u3044\u305f\u306e\u3067\u3001\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u3082\u3089\u3044\u307e\u3057\u305f\u3002\n[Live2D Community - motion - set / get LOOP fade](http://community.live2d.com/discussion/250/motion-set-get-loop-fade#latest)\n\n\u25c6\u4f7f\u3044\u65b9\u4f8b\n\n```js:Simple.js\nSimple.prototype.draw = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/, that)\n{\n    // Canvas\u3092\u30af\u30ea\u30a2\u3059\u308b\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // Live2D\u521d\u671f\u5316\n    if( ! that.live2DModel || ! that.loadLive2DCompleted ) \n    return; //\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u4f55\u3082\u3057\u306a\u3044\u3067\u8fd4\u308b\n\n    // \u30ed\u30fc\u30c9\u5b8c\u4e86\u5f8c\u306b\u521d\u56de\u306e\u307f\u521d\u671f\u5316\u3059\u308b\n    if( ! that.initLive2DCompleted ){\n            that.initLive2DCompleted = true;\n\n    // \u30eb\u30fc\u30d7\n    for(var k = 0; k < that.motions.length; k++){\n        that.motions[k].setLoop(true);\n        console.log(\"k\" + k + \":\" + that.motions[k].isLoop() + \" \" + that.motions[k].getLoopDurationMSec());        \n    }\n        // \u753b\u50cf\u304b\u3089WebGL\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\u3057\u3001\u30e2\u30c7\u30eb\u306b\u767b\u9332\n        for( var i = 0; i < that.loadedImages.length; i++ ){\n            //Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n            var texName = that.createTexture(gl, that.loadedImages[i]);\n            that.live2DModel.setTexture(i, texName); //\u30e2\u30c7\u30eb\u306b\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u30bb\u30c3\u30c8\n        }\n        that.motionMgr.startMotion(that.motions[that.motionnm], 0);\n\n        // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u5143\u753b\u50cf\u306e\u53c2\u7167\u3092\u30af\u30ea\u30a2\n        that.loadedImages = null;\n        // OpenGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u30bb\u30c3\u30c8\n        that.live2DModel.setGL(gl);\n\n        // \u8868\u793a\u4f4d\u7f6e\u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306e\u884c\u5217\u3092\u5b9a\u7fa9\u3059\u308b\n        var s = 2.0 / that.live2DModel.getCanvasWidth(); //canvas\u306e\u6a2a\u5e45\u3092-1..1\u533a\u9593\u306b\u53ce\u3081\u308b\n        var matrix4x4 = [\n             s, 0, 0, 0,\n             0,-s, 0, 0,\n             0, 0, 1, 0,\n            -1, 1, 0, 1\n        ];\n        that.live2DModel.setMatrix(matrix4x4);\n    }\n\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u4e86\u3057\u3066\u3044\u305f\u3089\u518d\u751f\u3059\u308b\n//    if(that.motionMgr.isFinished() || that.motionchange == true ){\n//        that.motionMgr.startMotion(that.motions[that.motionnm], 0);        \n//        that.motionchange = false;\n//        console.info(\"motion:\" + that.motionnm);\n//    }\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u4f55\u3082\u518d\u751f\u3057\u306a\u3044\n    if(that.motionnm != null){\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u66f4\u65b0\n        that.motionMgr.updateParam(that.live2DModel);\n    }\n\n//    // \u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u9069\u5f53\u306b\u66f4\u65b0\n//    var t = UtSystem.getTimeMSec() * 0.001 * 2 * Math.PI; //1\u79d2\u3054\u3068\u306b2\u03c0(1\u5468\u671f)\u5897\u3048\u308b\n//    var cycle = 3.0; //\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u4e00\u5468\u3059\u308b\u6642\u9593(\u79d2)\n//    // PARAM_ANGLE_X\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u304c[cycle]\u79d2\u3054\u3068\u306b-30\u304b\u308930\u307e\u3067\u5909\u5316\u3059\u308b\n//    that.live2DModel.setParamFloat(\"PARAM_ANGLE_X\", 30 * Math.sin(t/cycle));\n\n    // Live2D\u30e2\u30c7\u30eb\u3092\u66f4\u65b0\u3057\u3066\u63cf\u753b\n    that.live2DModel.update(); // \u73fe\u5728\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5408\u308f\u305b\u3066\u9802\u70b9\u7b49\u3092\u8a08\u7b97\n    that.live2DModel.draw();    // \u63cf\u753b\n};\n```\n", "tags": ["Live2D", "WebGL", "JavaScript"]}