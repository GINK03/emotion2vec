{"context": " More than 1 year has passed since last update.ActiveRecord::QueryMethods#eager_load\u3067eager loading\u3092\u3059\u308b\u969b\u306b\u3001\nActiveRecord::Associations::JoinDependency\u304c\u3069\u306e\u3088\u3046\u306a\u50cd\u304d\u3092\u3057\u3066\u30ec\u30b3\u30fc\u30c9\u306e\u8aad\u307f\u8fbc\u307f\u3092\u884c\u3063\u3066\u3044\u308b\u304b\u30b3\u30fc\u30c9\u30ea\u30fc\u30c7\u30a3\u30f3\u30b0\u3092\u3057\u305f\u306e\u3067\u3001\u305d\u306e\u30e1\u30e2\u3002\n\n\u305d\u3082\u305d\u3082eager_load\u3063\u3066\u4f55\nJOIN\u3067\u95a2\u9023\u5148\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092eager loading\u3059\u308b\u305f\u3081\u306escope\u3002\nActiveRecord\u306ejoins\u3068preload\u3068includes\u3068eager_load\u306e\u9055\u3044\n\neager_load\u3092\u547c\u3093\u3067\u304b\u3089\u30af\u30a8\u30ea\u304c\u8d70\u308b\u307e\u3067\nTweet.eager_load(:favorites).to_a\u3092rbtrace\u3092\u4f7f\u3063\u3066\u5b9f\u969b\u306b\u30c8\u30ec\u30fc\u30b9\u3057\u3066\u5c11\u3057\u52a0\u5de5\u3057\u305f\u3082\u306e\u3092\u4ee5\u4e0b\u306b\u793a\u3059\u3002\nActiveRecord::QueryMethods#eager_load\n  ActiveRecord::QueryMethods#eager_load!\n\nActiveRecord::Relation#exec_queries\n  ActiveRecord::FinderMethods#find_with_associations\n    ActiveRecord::FinderMethods#construct_join_dependency\n    ActiveRecord::Associations::JoinDependency#aliases\n    ActiveRecord::Associations::JoinDependency::Aliases#columns\n    ActiveRecord::QueryMethods#select\n    ActiveRecord::FinderMethods#apply_join_dependency\n    ActiveRecord::ConnectionAdapters::DatabaseStatements#select_all\n    ActiveRecord::Associations::JoinDependency#instanciate\n\n\u307e\u305aeager_load\u3092\u547c\u3076\u3068\u5f15\u6570\u304crelation\u306beager_load_values\u3068\u3057\u3066\u8ffd\u52a0\u3055\u308c\u308b\u3002\u3053\u306e\u6642\u70b9\u3067\u306frelation\u306a\u306e\u3067\u30af\u30a8\u30ea\u306f\u8d70\u3089\u306a\u3044\u3002\nfind\u3068\u304bfirst\u307f\u305f\u3044\u306a\u3001\u30af\u30a8\u30ea\u304c\u5b9f\u884c\u3055\u308c\u308b\u30e1\u30bd\u30c3\u30c9(ActiveRecord::FinderMethods)\u304c\u547c\u3070\u308c\u308b\u3068exec_queries\u304c\u8d70\u308a\u3001\u3053\u3053\u3067JOIN\u306a\u3069\u304c\u884c\u308f\u308c\u308b\u3002\n\nActiveRecord::Relation#exec_queries\nexec_queries\u306f\u3001eager loading\u3092\u884c\u3063\u305fassociation\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u6301\u3064ActiveRecord::Base\u306eArray\u3092\u8fd4\u3059\u3053\u3068\u306b\u306a\u308b\u3002\ndef exec_queries\n  @records = eager_loading? ? find_with_associations : @klass.find_by_sql(arel, bind_values)\n\n  preload = preload_values\n  preload +=  includes_values unless eager_loading?\n  preloader = ActiveRecord::Associations::Preloader.new\n  preload.each do |associations|\n    preloader.preload @records, associations\n  end\n\n  @records.each { |record| record.readonly! } if readonly_value\n\n  @loaded = true\n  @records\nend\n\npreload\u3092\u547c\u3093\u3060\u5834\u5408\u306e\u51e6\u7406\u3068eager_load\u3092\u8aad\u3093\u3060\u5834\u5408\u306e\u51e6\u7406\u306e\u5206\u5c90\u304c\u3053\u3053\u306b\u5165\u3063\u3066\u3044\u308b\u3002\neager_load\u3092\u547c\u3093\u3060\u5834\u5408\u306feager_loading?\u304ctrue\u306b\u306a\u308b\u305f\u3081\u3001\u3053\u3053\u3067\u306ffind_with_associations\u304c\u30e1\u30a4\u30f3\u306b\u306a\u308b\u3002\n\nActiveRecord::FinderMethods#find_with_associations\neager_load\u3092\u547c\u3093\u3060\u3068\u304d\u306e\u30e1\u30a4\u30f3\u306e\u51e6\u7406\u304c\u3053\u3053\u306b\u5165\u3063\u3066\u3044\u3066\u3001\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u7406\u89e3\u3059\u308b\u3053\u3068\u304c\u91cd\u8981\u3060\u3068\u601d\u3046\u3002\n\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u306e\u9014\u4e2d\u306bbinding.pry\u3092\u631f\u3080\u3068\u308f\u304b\u308a\u3084\u3059\u3044\u3002\ndef find_with_associations\n  join_dependency = construct_join_dependency\n\n  aliases  = join_dependency.aliases\n  relation = select aliases.columns\n  relation = apply_join_dependency(relation, join_dependency)\n\n  if block_given?\n    yield relation\n  else\n    if ActiveRecord::NullRelation === relation\n      []\n    else\n      rows = connection.select_all(relation.arel, 'SQL', relation.bind_values.dup)\n      join_dependency.instantiate(rows, aliases)\n    end\n  end\nend\n\n\njoin_dependency\u3068\u306f\nActiveRecord\u304ceager loading\u3092\u884c\u3046\u305f\u3081\u306b\u4f7f\u3046\u30af\u30e9\u30b9\u306f2\u3064\u3042\u308b\u3002\n\nPreloader\n\n\n\npreload\u3084\u5358\u72ec\u306eincludes\u3092\u547c\u3093\u3060\u6642\u306b\u4f7f\u308f\u308c\u308b\nJOIN\u3057\u306a\u3044\n\n\nJoinDependency\n\n\n\neager_load\u3092\u547c\u3093\u3060\u6642\u306b\u4f7f\u308f\u308c\u308b\nJOIN\u3059\u308b\n\n\n\n\u305d\u306e\u3046\u3061\u306eJoinDependency\u306e\u3053\u3068\u3067\u3042\u308b\u3002\n\nconstruct_join_dependency\nTweet.eager_load(:favorites).to_a\u306e\u5834\u5408\u3001[:favorites]\u304ceager_load_values\u3068\u306a\u308a\u3001\nActiveRecord::Associations::JoinDependency.new(Tweet, [:favorites], [])\n\n\u3092\u8fd4\u3059\u3002\uff08\u304a\u308f\u308a\uff09\n\njoin_dependency.aliases\nActiveRecord\u304cJOIN\u3092\u3059\u308b\u3068\u3001id AS t1_r0, tweet_id AS t1_r1, ...\u307f\u305f\u3044\u306a\u6c5a\u3044\u30ab\u30e9\u30e0\u540d\u3067SELECT\u3055\u308c\u308b\u306e\u3092\u898b\u305f\u3053\u3068\u304c\u3042\u308b\u3068\u601d\u3046\u3002\n\u3053\u306e\u5b9f\u969b\u306e\u30ab\u30e9\u30e0\u540d\u3068\u6c5a\u3044\u30ab\u30e9\u30e0\u540d\u306e\u5bfe\u5fdc\u95a2\u4fc2\u3092\u6301\u3063\u3066\u3044\u308b\u306e\u304caliases\u3067\u3001\u3053\u308c\u304c\u306a\u3044\u3068ActiveRecord::Base\u306e\u30ab\u30e9\u30e0\u306b\u5bfe\u5fdc\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3002\n\u4e00\u90e8\u3092\u8997\u304d\u898b\u308b\u3068\u3001\n[#<struct ActiveRecord::Associations::JoinDependency::Aliases::Column name=\"id\", alias=\"t1_r0\">,\n #<struct ActiveRecord::Associations::JoinDependency::Aliases::Column name=\"tweet_id\", alias=\"t1_r1\">,\n #<struct ActiveRecord::Associations::JoinDependency::Aliases::Column name=\"user_id\", alias=\"t1_r2\">,\n #<struct ActiveRecord::Associations::JoinDependency::Aliases::Column name=\"created_at\", alias=\"t1_r3\">,\n #<struct ActiveRecord::Associations::JoinDependency::Aliases::Column name=\"updated_at\", alias=\"t1_r4\">]>]>\n\n\u307f\u305f\u3044\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\nrelation\u306e\u69cb\u7bc9\nrelation = select aliases.columns\nrelation = apply_join_dependency(relation, join_dependency)\n\n1\u884c\u76ee\u3067\u5fc5\u8981\u306a\u6c5a\u3044\u30ab\u30e9\u30e0\u306eSELECT\u3092relation\u306b\u8ffd\u52a0\u3057\u30012\u884c\u76ee\u3067\u5fc5\u8981\u306a\u30c6\u30fc\u30d6\u30eb\u306eJOIN\u3092relation\u306b\u8ffd\u52a0\u3057\u3066\u3044\u308b\u3002\n\n\u30af\u30a8\u30ea\u5b9f\u884c\nrows = connection.select_all(relation.arel, 'SQL', relation.bind_values.dup)\n# => #<ActiveRecord::Result:0x007f97d2d286d0\n#  @column_types={},\n#  @columns=[\"t0_r0\", \"t0_r1\", \"t0_r2\", \"t0_r3\", \"t0_r4\", \"t1_r0\", \"t1_r1\", \"t1_r2\", \"t1_r3\", \"t1_r4\"],\n#  @hash_rows=nil,\n#  @rows=\n#   [[1, nil, 1, 2014-11-22 19:40:29 UTC, 2014-11-22 19:40:29 UTC, 1, 1, 2, 2014-11-22 19:40:29 UTC, 2014-11-22 19:40:29 UTC],\n#    [3, nil, 3, 2014-11-22 19:40:29 UTC, 2014-11-22 19:40:29 UTC, 2, 3, 4, 2014-11-22 19:40:29 UTC, 2014-11-22 19:40:29 UTC],\n#    [3, nil, 3, 2014-11-22 19:40:29 UTC, 2014-11-22 19:40:29 UTC, 3, 3, 5, 2014-11-22 19:40:29 UTC, 2014-11-22 19:40:29 UTC],\n#    [6, nil, 6, 2014-11-22 19:40:29 UTC, 2014-11-22 19:40:29 UTC, 4, 6, 7, 2014-11-22 19:40:29 UTC, 2014-11-22 19:40:29 UTC],\n#    ...\n\njoin_dependency.instantiate(rows, aliases)\n# => [#<Tweet id: 1, tweet_id: nil, user_id: 1, created_at: \"2014-11-22 19:40:29\", updated_at: \"2014-11-22 19:40:29\">,\n#  #<Tweet id: 3, tweet_id: nil, user_id: 3, created_at: \"2014-11-22 19:40:29\", updated_at: \"2014-11-22 19:40:29\">,\n#  #<Tweet id: 6, tweet_id: nil, user_id: 6, created_at: \"2014-11-22 19:40:29\", updated_at: \"2014-11-22 19:40:29\">,\n#  #<Tweet id: 10, tweet_id: nil, user_id: 10, created_at: \"2014-11-22 19:40:29\", updated_at: \"2014-11-22 19:40:29\">,\n#  #<Tweet id: 15, tweet_id: nil, user_id: 15, created_at: \"2014-11-22 19:40:29\", updated_at: \"2014-11-22 19:40:29\">]\n\nJOIN\u30af\u30a8\u30ea\u306e\u7d50\u679c\u306a\u306e\u3067\u3001rows\u306b\u306f1\u884c\u306b\u30c6\u30fc\u30d6\u30eb\uff12\u3064\u5206\u304c\u5165\u3063\u3066\u3044\u308b\u3002\nrows\u306b\u306f\u6c5a\u3044\u30ab\u30e9\u30e0\u540d\u304c\u5272\u308a\u632f\u3089\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u5148\u307b\u3069\u306ealiases\u3092\u4f7f\u3063\u3066join_dependency.instanciate\u304c\u9069\u5207\u306a\u30ab\u30e9\u30e0\u306b\u5024\u3092\u5165\u308c\u3066ActiveRecord::Base\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u3059\u308b\u3002\n\n\u307e\u3068\u3081\neager_load\u306f\u4ee5\u4e0b\u306e\u6d41\u308c\u3067eager loading\u3092\u884c\u3046\u3002\n\neager_load\u3067relation\u306beager_load_values\u304c\u8ffd\u52a0\u3055\u308c\u308b\neager_load_values\u304b\u3089join_dependency\u304c\u4f5c\u3089\u308c\u308b\njoin_dependency\u304c\u30ab\u30e9\u30e0\u540d\u306ealias\u3092\u4f5c\u308b\nselect\u3068join\u306escope\u3092\u8ffd\u52a0\u3057\u3066\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u3001alias\u3067ActiveRecord::Base\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u3059\u308b\n\n`ActiveRecord::QueryMethods#eager_load`\u3067eager loading\u3092\u3059\u308b\u969b\u306b\u3001\n`ActiveRecord::Associations::JoinDependency`\u304c\u3069\u306e\u3088\u3046\u306a\u50cd\u304d\u3092\u3057\u3066\u30ec\u30b3\u30fc\u30c9\u306e\u8aad\u307f\u8fbc\u307f\u3092\u884c\u3063\u3066\u3044\u308b\u304b\u30b3\u30fc\u30c9\u30ea\u30fc\u30c7\u30a3\u30f3\u30b0\u3092\u3057\u305f\u306e\u3067\u3001\u305d\u306e\u30e1\u30e2\u3002\n\n## \u305d\u3082\u305d\u3082eager\\_load\u3063\u3066\u4f55\n\nJOIN\u3067\u95a2\u9023\u5148\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092eager loading\u3059\u308b\u305f\u3081\u306escope\u3002\n\n[ActiveRecord\u306ejoins\u3068preload\u3068includes\u3068eager\\_load\u306e\u9055\u3044](http://qiita.com/k0kubun/items/80c5a5494f53bb88dc58)\n\n## eager\\_load\u3092\u547c\u3093\u3067\u304b\u3089\u30af\u30a8\u30ea\u304c\u8d70\u308b\u307e\u3067\n\n`Tweet.eager_load(:favorites).to_a`\u3092[rbtrace](https://github.com/tmm1/rbtrace)\u3092\u4f7f\u3063\u3066\u5b9f\u969b\u306b\u30c8\u30ec\u30fc\u30b9\u3057\u3066\u5c11\u3057\u52a0\u5de5\u3057\u305f\u3082\u306e\u3092\u4ee5\u4e0b\u306b\u793a\u3059\u3002\n\n```\nActiveRecord::QueryMethods#eager_load\n  ActiveRecord::QueryMethods#eager_load!\n\nActiveRecord::Relation#exec_queries\n  ActiveRecord::FinderMethods#find_with_associations\n    ActiveRecord::FinderMethods#construct_join_dependency\n    ActiveRecord::Associations::JoinDependency#aliases\n    ActiveRecord::Associations::JoinDependency::Aliases#columns\n    ActiveRecord::QueryMethods#select\n    ActiveRecord::FinderMethods#apply_join_dependency\n    ActiveRecord::ConnectionAdapters::DatabaseStatements#select_all\n    ActiveRecord::Associations::JoinDependency#instanciate\n```\n\n\u307e\u305a`eager_load`\u3092\u547c\u3076\u3068\u5f15\u6570\u304crelation\u306b`eager_load_values`\u3068\u3057\u3066\u8ffd\u52a0\u3055\u308c\u308b\u3002\u3053\u306e\u6642\u70b9\u3067\u306frelation\u306a\u306e\u3067\u30af\u30a8\u30ea\u306f\u8d70\u3089\u306a\u3044\u3002\n`find`\u3068\u304b`first`\u307f\u305f\u3044\u306a\u3001\u30af\u30a8\u30ea\u304c\u5b9f\u884c\u3055\u308c\u308b\u30e1\u30bd\u30c3\u30c9(`ActiveRecord::FinderMethods`)\u304c\u547c\u3070\u308c\u308b\u3068`exec_queries`\u304c\u8d70\u308a\u3001\u3053\u3053\u3067JOIN\u306a\u3069\u304c\u884c\u308f\u308c\u308b\u3002\n\n### ActiveRecord::Relation#exec\\_queries\n\n`exec_queries`\u306f\u3001eager loading\u3092\u884c\u3063\u305fassociation\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u6301\u3064ActiveRecord::Base\u306eArray\u3092\u8fd4\u3059\u3053\u3068\u306b\u306a\u308b\u3002\n\n```ruby\ndef exec_queries\n  @records = eager_loading? ? find_with_associations : @klass.find_by_sql(arel, bind_values)\n\n  preload = preload_values\n  preload +=  includes_values unless eager_loading?\n  preloader = ActiveRecord::Associations::Preloader.new\n  preload.each do |associations|\n    preloader.preload @records, associations\n  end\n\n  @records.each { |record| record.readonly! } if readonly_value\n\n  @loaded = true\n  @records\nend\n```\n\n`preload`\u3092\u547c\u3093\u3060\u5834\u5408\u306e\u51e6\u7406\u3068`eager_load`\u3092\u8aad\u3093\u3060\u5834\u5408\u306e\u51e6\u7406\u306e\u5206\u5c90\u304c\u3053\u3053\u306b\u5165\u3063\u3066\u3044\u308b\u3002\n`eager_load`\u3092\u547c\u3093\u3060\u5834\u5408\u306f`eager_loading?`\u304ctrue\u306b\u306a\u308b\u305f\u3081\u3001\u3053\u3053\u3067\u306f`find_with_associations`\u304c\u30e1\u30a4\u30f3\u306b\u306a\u308b\u3002\n\n\n## ActiveRecord::FinderMethods#find\\_with\\_associations\n\n`eager_load`\u3092\u547c\u3093\u3060\u3068\u304d\u306e\u30e1\u30a4\u30f3\u306e\u51e6\u7406\u304c\u3053\u3053\u306b\u5165\u3063\u3066\u3044\u3066\u3001\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u7406\u89e3\u3059\u308b\u3053\u3068\u304c\u91cd\u8981\u3060\u3068\u601d\u3046\u3002\n\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u306e\u9014\u4e2d\u306bbinding.pry\u3092\u631f\u3080\u3068\u308f\u304b\u308a\u3084\u3059\u3044\u3002\n\n```ruby\ndef find_with_associations\n  join_dependency = construct_join_dependency\n\n  aliases  = join_dependency.aliases\n  relation = select aliases.columns\n  relation = apply_join_dependency(relation, join_dependency)\n\n  if block_given?\n    yield relation\n  else\n    if ActiveRecord::NullRelation === relation\n      []\n    else\n      rows = connection.select_all(relation.arel, 'SQL', relation.bind_values.dup)\n      join_dependency.instantiate(rows, aliases)\n    end\n  end\nend\n```\n\n### join\\_dependency\u3068\u306f\n\nActiveRecord\u304ceager loading\u3092\u884c\u3046\u305f\u3081\u306b\u4f7f\u3046\u30af\u30e9\u30b9\u306f2\u3064\u3042\u308b\u3002\n\n- Preloader\n  - `preload`\u3084\u5358\u72ec\u306e`includes`\u3092\u547c\u3093\u3060\u6642\u306b\u4f7f\u308f\u308c\u308b\n  - JOIN\u3057\u306a\u3044\n- JoinDependency\n  - `eager_load`\u3092\u547c\u3093\u3060\u6642\u306b\u4f7f\u308f\u308c\u308b\n  - JOIN\u3059\u308b\n\n\u305d\u306e\u3046\u3061\u306eJoinDependency\u306e\u3053\u3068\u3067\u3042\u308b\u3002\n\n### construct\\_join\\_dependency\n\n`Tweet.eager_load(:favorites).to_a`\u306e\u5834\u5408\u3001`[:favorites]`\u304c`eager_load_values`\u3068\u306a\u308a\u3001\n\n```ruby\nActiveRecord::Associations::JoinDependency.new(Tweet, [:favorites], [])\n```\n\n\u3092\u8fd4\u3059\u3002\uff08\u304a\u308f\u308a\uff09\n\n### join\\_dependency.aliases\n\nActiveRecord\u304cJOIN\u3092\u3059\u308b\u3068\u3001`id AS t1_r0, tweet_id AS t1_r1, ...`\u307f\u305f\u3044\u306a\u6c5a\u3044\u30ab\u30e9\u30e0\u540d\u3067SELECT\u3055\u308c\u308b\u306e\u3092\u898b\u305f\u3053\u3068\u304c\u3042\u308b\u3068\u601d\u3046\u3002\n\u3053\u306e\u5b9f\u969b\u306e\u30ab\u30e9\u30e0\u540d\u3068\u6c5a\u3044\u30ab\u30e9\u30e0\u540d\u306e\u5bfe\u5fdc\u95a2\u4fc2\u3092\u6301\u3063\u3066\u3044\u308b\u306e\u304caliases\u3067\u3001\u3053\u308c\u304c\u306a\u3044\u3068`ActiveRecord::Base`\u306e\u30ab\u30e9\u30e0\u306b\u5bfe\u5fdc\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3002\n\n\u4e00\u90e8\u3092\u8997\u304d\u898b\u308b\u3068\u3001\n\n```ruby\n[#<struct ActiveRecord::Associations::JoinDependency::Aliases::Column name=\"id\", alias=\"t1_r0\">,\n #<struct ActiveRecord::Associations::JoinDependency::Aliases::Column name=\"tweet_id\", alias=\"t1_r1\">,\n #<struct ActiveRecord::Associations::JoinDependency::Aliases::Column name=\"user_id\", alias=\"t1_r2\">,\n #<struct ActiveRecord::Associations::JoinDependency::Aliases::Column name=\"created_at\", alias=\"t1_r3\">,\n #<struct ActiveRecord::Associations::JoinDependency::Aliases::Column name=\"updated_at\", alias=\"t1_r4\">]>]>\n```\n\n\u307f\u305f\u3044\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n### relation\u306e\u69cb\u7bc9\n\n```ruby\nrelation = select aliases.columns\nrelation = apply_join_dependency(relation, join_dependency)\n```\n\n1\u884c\u76ee\u3067\u5fc5\u8981\u306a\u6c5a\u3044\u30ab\u30e9\u30e0\u306eSELECT\u3092relation\u306b\u8ffd\u52a0\u3057\u30012\u884c\u76ee\u3067\u5fc5\u8981\u306a\u30c6\u30fc\u30d6\u30eb\u306eJOIN\u3092relation\u306b\u8ffd\u52a0\u3057\u3066\u3044\u308b\u3002\n\n### \u30af\u30a8\u30ea\u5b9f\u884c\n\n```ruby\nrows = connection.select_all(relation.arel, 'SQL', relation.bind_values.dup)\n# => #<ActiveRecord::Result:0x007f97d2d286d0\n#  @column_types={},\n#  @columns=[\"t0_r0\", \"t0_r1\", \"t0_r2\", \"t0_r3\", \"t0_r4\", \"t1_r0\", \"t1_r1\", \"t1_r2\", \"t1_r3\", \"t1_r4\"],\n#  @hash_rows=nil,\n#  @rows=\n#   [[1, nil, 1, 2014-11-22 19:40:29 UTC, 2014-11-22 19:40:29 UTC, 1, 1, 2, 2014-11-22 19:40:29 UTC, 2014-11-22 19:40:29 UTC],\n#    [3, nil, 3, 2014-11-22 19:40:29 UTC, 2014-11-22 19:40:29 UTC, 2, 3, 4, 2014-11-22 19:40:29 UTC, 2014-11-22 19:40:29 UTC],\n#    [3, nil, 3, 2014-11-22 19:40:29 UTC, 2014-11-22 19:40:29 UTC, 3, 3, 5, 2014-11-22 19:40:29 UTC, 2014-11-22 19:40:29 UTC],\n#    [6, nil, 6, 2014-11-22 19:40:29 UTC, 2014-11-22 19:40:29 UTC, 4, 6, 7, 2014-11-22 19:40:29 UTC, 2014-11-22 19:40:29 UTC],\n#    ...\n\njoin_dependency.instantiate(rows, aliases)\n# => [#<Tweet id: 1, tweet_id: nil, user_id: 1, created_at: \"2014-11-22 19:40:29\", updated_at: \"2014-11-22 19:40:29\">,\n#  #<Tweet id: 3, tweet_id: nil, user_id: 3, created_at: \"2014-11-22 19:40:29\", updated_at: \"2014-11-22 19:40:29\">,\n#  #<Tweet id: 6, tweet_id: nil, user_id: 6, created_at: \"2014-11-22 19:40:29\", updated_at: \"2014-11-22 19:40:29\">,\n#  #<Tweet id: 10, tweet_id: nil, user_id: 10, created_at: \"2014-11-22 19:40:29\", updated_at: \"2014-11-22 19:40:29\">,\n#  #<Tweet id: 15, tweet_id: nil, user_id: 15, created_at: \"2014-11-22 19:40:29\", updated_at: \"2014-11-22 19:40:29\">]\n```\n\nJOIN\u30af\u30a8\u30ea\u306e\u7d50\u679c\u306a\u306e\u3067\u3001rows\u306b\u306f1\u884c\u306b\u30c6\u30fc\u30d6\u30eb\uff12\u3064\u5206\u304c\u5165\u3063\u3066\u3044\u308b\u3002\nrows\u306b\u306f\u6c5a\u3044\u30ab\u30e9\u30e0\u540d\u304c\u5272\u308a\u632f\u3089\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u5148\u307b\u3069\u306ealiases\u3092\u4f7f\u3063\u3066join\\_dependency.instanciate\u304c\u9069\u5207\u306a\u30ab\u30e9\u30e0\u306b\u5024\u3092\u5165\u308c\u3066ActiveRecord::Base\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u3059\u308b\u3002\n\n## \u307e\u3068\u3081\n\neager\\_load\u306f\u4ee5\u4e0b\u306e\u6d41\u308c\u3067eager loading\u3092\u884c\u3046\u3002\n\n- eager\\_load\u3067relation\u306beager\\_load\\_values\u304c\u8ffd\u52a0\u3055\u308c\u308b\n- eager\\_load\\_values\u304b\u3089join\\_dependency\u304c\u4f5c\u3089\u308c\u308b\n- join\\_dependency\u304c\u30ab\u30e9\u30e0\u540d\u306ealias\u3092\u4f5c\u308b\n- select\u3068join\u306escope\u3092\u8ffd\u52a0\u3057\u3066\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u3001alias\u3067ActiveRecord::Base\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u3059\u308b\n", "tags": ["Ruby", "Rails", "ActiveRecord"]}