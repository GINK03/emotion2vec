{"context": " More than 1 year has passed since last update.\u3053\u306e\u524d\u306e\u8a18\u4e8b\u306e\u901a\u308a\u3001Riak\u306f\u7d50\u679c\u6574\u5408\u6027(Eventual Consistency)\u306b\u3082\u3068\u3065\u304d\u53d6\u308a\u6271\u3046\u3002\n\u3053\u308c\u306b\u52a0\u3048\u3066Riak2.0\u3067\u306f\u3001\u5f37\u3044\u6574\u5408\u6027(Strong Consistency)\u304c\u8a2d\u5b9a\u53ef\u80fd\u306b\u306a\u308b\u4e88\u5b9a\u3060\u3002\n\nStrong Consistency\n\n2.0\u306eriak.conf\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u8a18\u8ff0\u304c\u3042\u308b\u3002\n\nriak.conf\n# Enable consensus subsystem (tech preview feature)\n## Set to true to enable the consensus subsystem used for strongly\n## consistent Riak operations.\n## enable_consensus = true\n\n\n\u3053\u306eenable_consensus = true\u3092\u30a2\u30f3\u30b3\u30e1\u30f3\u30c8\u3057\u3066\u518d\u8d77\u52d5\u3059\u308c\u3070\u3001\u5f37\u3044\u6574\u5408\u6027\u3092\u8a2d\u5b9a\u53ef\u80fd\u306b\u306a\u308b\u3002\nRiak Meetup Tokyo #3\u3067\u306e\u30b9\u30e9\u30a4\u30c9\u3092\u5f15\u7528\u3057\u3066\u3001\u5b9f\u969b\u306b\u5f37\u3044\u6574\u5408\u6027\u3092\u4f7f\u3063\u3066\u307f\u305f\u3002\n   Riak 2.0 pre5 @ Riak Meetup #3  from Shunichi Shinohara \nriak.conf\u3092\u4fee\u6b63\u30fb\u518d\u8d77\u52d5\u3057\u3066\u8a2d\u5b9a\u3092\u6709\u52b9\u306b\u3057\u305f\u5f8c\u3001\u5bfe\u8c61Bucket\u306b\u5f37\u3044\u6574\u5408\u6027\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\u279c  riak git:(a12d5a2) \u2717 rel/riak/bin/riak-admin bucket-type \\\n> create sc '{\"props\": {\"consistent\": true}}'\nsc created\n\u279c  riak git:(a12d5a2) \u2717 rel/riak/bin/riak-admin bucket-type activate sc\nsc has been activated\n\n\u305d\u3046\u3057\u305f\u3089\u3001\u3042\u3068\u306f\u5b9f\u969b\u306b\u30c7\u30fc\u30bf\u3092\u6295\u3052\u3066\u307f\u308b\u3002\n\u279c  riak git:(a12d5a2) \u2717 curl -XPUT http://localhost:8098/types/sc/buckets/mybucket/keys/mykey -d \"data1\"\n\u279c  riak git:(a12d5a2) \u2717 curl -XPUT http://localhost:8098/types/sc/buckets/mybucket/keys/mykey -d \"data2\"\n<html><head><title>412 Precondition Failed</title></head><body><h1>Precondition Failed</h1>Precondition Failed<p><hr><address>mochiweb+webmachine web server</address></body></html>\n\n\u7d50\u679c\u6574\u5408\u306e\u6642\u3068\u306f\u7570\u306a\u308a\u3001Sibling\u3067\u306f\u306a\u304f\u30a8\u30e9\u30fc\u304c\u8fd4\u3063\u3066\u6765\u305f\u3002\n\u66f8\u304d\u8fbc\u307e\u308c\u3066\u3044\u306a\u3044\u3002\nGET\u3067VClock\u306e\u5024\u3092\u8aad\u3093\u3067\u3001\u305d\u308c\u3092\u4f7f\u3063\u3066PUSH\u3059\u308c\u3070\u3001\u5024\u306e\u4e0a\u66f8\u304d\u304c\u3067\u304d\u308b\u3002\n\u279c  riak git:(a12d5a2) \u2717 curl -v http://localhost:8098/types/sc/buckets/mybucket/keys/mykey\n* Adding handle: conn: 0x7f84ab004000\n* Adding handle: send: 0\n* Adding handle: recv: 0\n* Curl_addHandleToPipeline: length: 1\n* - Conn 0 (0x7f84ab004000) send_pipe: 1, recv_pipe: 0\n* About to connect() to localhost port 8098 (#0)\n*   Trying ::1...\n*   Trying fe80::1...\n*   Trying 127.0.0.1...\n* Connected to localhost (127.0.0.1) port 8098 (#0)\n> GET /types/sc/buckets/mybucket/keys/mykey HTTP/1.1\n> User-Agent: curl/7.30.0\n> Host: localhost:8098\n> Accept: */*\n>\n< HTTP/1.1 200 OK\n< X-Riak-Vclock: a85hYGBgzGBKYWBJLU4tzGDKY2Vo4gUKAWlLLfUzfFkA\n< Vary: Accept-Encoding\n* Server MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained) is not blacklisted\n< Server: MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained)\n< Link: </buckets/mybucket>; rel=\"up\"\n< Last-Modified: Thu, 19 Dec 2013 08:28:41 GMT\n< ETag: \"7Xmuz8KIPEqAGDUJVstdqc\"\n< Date: Thu, 19 Dec 2013 08:30:49 GMT\n< Content-Type: application/x-www-form-urlencoded\n< Content-Length: 5\n<\n* Connection #0 to host localhost left intact\ndata1\n\n\u279c  riak git:(a12d5a2) \u2717 curl -XPUT http://localhost:8098/types/sc/buckets/mybucket/keys/mykey\\\n> -H 'X-Riak-Vclock: a85hYGBgzGBKYWBJLU4tzGDKY2Vo4gUKAWlLLfUzfFkA' -d \"data3\"\n\n\u279c  riak git:(a12d5a2) \u2717 curl -v http://localhost:8098/types/sc/buckets/mybucket/keys/mykey\ndata3\n\n\u3053\u306e\u8a2d\u5b9a\u306f\u30d0\u30b1\u30c3\u30c8\u6bce\u306bBucket Type\u3067\u884c\u3046\u306e\u3067\u3001\u540c\u3058Riak\u30af\u30e9\u30b9\u30bf\u5185\u3067\u3001Bucket\u6bce\u3067\u30c7\u30fc\u30bf\u306e\u7279\u6027\u306b\u3042\u308f\u305b\u3066\u6574\u5408\u6027\u306e\u4f7f\u3044\u5206\u3051\u304c\u53ef\u80fd\u3060\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067Sibling\u306e\u89e3\u6c7a\u306e\u624b\u9593\u304c\u7701\u3051\u308b\u306e\u3067\u826f\u3044\u3068\u3044\u3048\u3070\u826f\u3044\u306e\u3060\u304c\u3001\u73fe\u6bb5\u968e\u3067\u306fTeck Preview\u3067\u3042\u308b\u306e\u3067\u3001\u5b9f\u7528\u306b\u306f\u307e\u3060\u691c\u8a3c\u304c\u5fc5\u8981\u306a\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n[\u3053\u306e\u524d](http://qiita.com/saisa6153/items/3bbd719a17839568fa49)\u306e\u8a18\u4e8b\u306e\u901a\u308a\u3001Riak\u306f\u7d50\u679c\u6574\u5408\u6027(Eventual Consistency)\u306b\u3082\u3068\u3065\u304d\u53d6\u308a\u6271\u3046\u3002\n\u3053\u308c\u306b\u52a0\u3048\u3066Riak2.0\u3067\u306f\u3001\u5f37\u3044\u6574\u5408\u6027(Strong Consistency)\u304c\u8a2d\u5b9a\u53ef\u80fd\u306b\u306a\u308b\u4e88\u5b9a\u3060\u3002\n\n## [Strong Consistency](https://github.com/basho/riak_core/pull/441)\n2.0\u306eriak.conf\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u8a18\u8ff0\u304c\u3042\u308b\u3002\n\n```riak.conf\n# Enable consensus subsystem (tech preview feature)\n## Set to true to enable the consensus subsystem used for strongly\n## consistent Riak operations.\n## enable_consensus = true\n```\n\u3053\u306eenable_consensus = true\u3092\u30a2\u30f3\u30b3\u30e1\u30f3\u30c8\u3057\u3066\u518d\u8d77\u52d5\u3059\u308c\u3070\u3001\u5f37\u3044\u6574\u5408\u6027\u3092\u8a2d\u5b9a\u53ef\u80fd\u306b\u306a\u308b\u3002\nRiak Meetup Tokyo #3\u3067\u306e\u30b9\u30e9\u30a4\u30c9\u3092\u5f15\u7528\u3057\u3066\u3001\u5b9f\u969b\u306b\u5f37\u3044\u6574\u5408\u6027\u3092\u4f7f\u3063\u3066\u307f\u305f\u3002\n\n<iframe src=\"http://www.slideshare.net/slideshow/embed_code/27960010?startSlide=21\" width=\"427\" height=\"356\" frameborder=\"0\" marginwidth=\"0\" marginheight=\"0\" scrolling=\"no\" style=\"border:1px solid #CCC;border-width:1px 1px 0;margin-bottom:5px\" allowfullscreen> </iframe> <div style=\"margin-bottom:5px\"> <strong> <a href=\"https://www.slideshare.net/shino/riak-meetup-3-20131106-riak-meetup3riak20pre5\" title=\"Riak 2.0 pre5 @ Riak Meetup #3\" target=\"_blank\">Riak 2.0 pre5 @ Riak Meetup #3</a> </strong> from <strong><a href=\"http://www.slideshare.net/shino\" target=\"_blank\">Shunichi Shinohara</a></strong> </div>\n\nriak.conf\u3092\u4fee\u6b63\u30fb\u518d\u8d77\u52d5\u3057\u3066\u8a2d\u5b9a\u3092\u6709\u52b9\u306b\u3057\u305f\u5f8c\u3001\u5bfe\u8c61Bucket\u306b\u5f37\u3044\u6574\u5408\u6027\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n```\n\u279c  riak git:(a12d5a2) \u2717 rel/riak/bin/riak-admin bucket-type \\\n> create sc '{\"props\": {\"consistent\": true}}'\nsc created\n\u279c  riak git:(a12d5a2) \u2717 rel/riak/bin/riak-admin bucket-type activate sc\nsc has been activated\n```\n\u305d\u3046\u3057\u305f\u3089\u3001\u3042\u3068\u306f\u5b9f\u969b\u306b\u30c7\u30fc\u30bf\u3092\u6295\u3052\u3066\u307f\u308b\u3002\n\n```\n\u279c  riak git:(a12d5a2) \u2717 curl -XPUT http://localhost:8098/types/sc/buckets/mybucket/keys/mykey -d \"data1\"\n\u279c  riak git:(a12d5a2) \u2717 curl -XPUT http://localhost:8098/types/sc/buckets/mybucket/keys/mykey -d \"data2\"\n<html><head><title>412 Precondition Failed</title></head><body><h1>Precondition Failed</h1>Precondition Failed<p><hr><address>mochiweb+webmachine web server</address></body></html>\n```\n\u7d50\u679c\u6574\u5408\u306e\u6642\u3068\u306f\u7570\u306a\u308a\u3001Sibling\u3067\u306f\u306a\u304f\u30a8\u30e9\u30fc\u304c\u8fd4\u3063\u3066\u6765\u305f\u3002\n\u66f8\u304d\u8fbc\u307e\u308c\u3066\u3044\u306a\u3044\u3002\nGET\u3067VClock\u306e\u5024\u3092\u8aad\u3093\u3067\u3001\u305d\u308c\u3092\u4f7f\u3063\u3066PUSH\u3059\u308c\u3070\u3001\u5024\u306e\u4e0a\u66f8\u304d\u304c\u3067\u304d\u308b\u3002\n\n```\n\u279c  riak git:(a12d5a2) \u2717 curl -v http://localhost:8098/types/sc/buckets/mybucket/keys/mykey\n* Adding handle: conn: 0x7f84ab004000\n* Adding handle: send: 0\n* Adding handle: recv: 0\n* Curl_addHandleToPipeline: length: 1\n* - Conn 0 (0x7f84ab004000) send_pipe: 1, recv_pipe: 0\n* About to connect() to localhost port 8098 (#0)\n*   Trying ::1...\n*   Trying fe80::1...\n*   Trying 127.0.0.1...\n* Connected to localhost (127.0.0.1) port 8098 (#0)\n> GET /types/sc/buckets/mybucket/keys/mykey HTTP/1.1\n> User-Agent: curl/7.30.0\n> Host: localhost:8098\n> Accept: */*\n>\n< HTTP/1.1 200 OK\n< X-Riak-Vclock: a85hYGBgzGBKYWBJLU4tzGDKY2Vo4gUKAWlLLfUzfFkA\n< Vary: Accept-Encoding\n* Server MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained) is not blacklisted\n< Server: MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained)\n< Link: </buckets/mybucket>; rel=\"up\"\n< Last-Modified: Thu, 19 Dec 2013 08:28:41 GMT\n< ETag: \"7Xmuz8KIPEqAGDUJVstdqc\"\n< Date: Thu, 19 Dec 2013 08:30:49 GMT\n< Content-Type: application/x-www-form-urlencoded\n< Content-Length: 5\n<\n* Connection #0 to host localhost left intact\ndata1\n\n\u279c  riak git:(a12d5a2) \u2717 curl -XPUT http://localhost:8098/types/sc/buckets/mybucket/keys/mykey\\\n> -H 'X-Riak-Vclock: a85hYGBgzGBKYWBJLU4tzGDKY2Vo4gUKAWlLLfUzfFkA' -d \"data3\"\n\n\u279c  riak git:(a12d5a2) \u2717 curl -v http://localhost:8098/types/sc/buckets/mybucket/keys/mykey\ndata3\n```\n\n\u3053\u306e\u8a2d\u5b9a\u306f\u30d0\u30b1\u30c3\u30c8\u6bce\u306bBucket Type\u3067\u884c\u3046\u306e\u3067\u3001\u540c\u3058Riak\u30af\u30e9\u30b9\u30bf\u5185\u3067\u3001Bucket\u6bce\u3067\u30c7\u30fc\u30bf\u306e\u7279\u6027\u306b\u3042\u308f\u305b\u3066\u6574\u5408\u6027\u306e\u4f7f\u3044\u5206\u3051\u304c\u53ef\u80fd\u3060\u3002\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067Sibling\u306e\u89e3\u6c7a\u306e\u624b\u9593\u304c\u7701\u3051\u308b\u306e\u3067\u826f\u3044\u3068\u3044\u3048\u3070\u826f\u3044\u306e\u3060\u304c\u3001\u73fe\u6bb5\u968e\u3067\u306fTeck Preview\u3067\u3042\u308b\u306e\u3067\u3001\u5b9f\u7528\u306b\u306f\u307e\u3060\u691c\u8a3c\u304c\u5fc5\u8981\u306a\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3002", "tags": ["riak2.0.0-pre7", "AdventCalendar"]}