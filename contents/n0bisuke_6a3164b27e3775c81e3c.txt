{"context": " More than 1 year has passed since last update.\u3055\u3063\u304d\u66f8\u3044\u305f\u8a18\u4e8b\u3067\u306fAPI\u7d4c\u7531\u3067Chatwork\u306e\u30c1\u30e3\u30c3\u30c8\u30b0\u30eb\u30fc\u30d7\u3092\u53d6\u5f97\u3057\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306f\u30c1\u30e3\u30c3\u30c8\u30b0\u30eb\u30fc\u30d7\u306b\u6295\u7a3f\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nChatworkAPI\u306bexpress\u304b\u3089request\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u63a5\u7d9a - Qiita\n\n\u30c1\u30e3\u30c3\u30c8\u30ef\u30fc\u30afAPI\u3067\u6295\u7a3f\n\n\u30b5\u30f3\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\ncurl -X POST -H \"X-ChatWorkToken: YOUR API KEY\" -d \"body=Hello+ChatWork%21\" \"https://api.chatwork.com/v1/rooms/{room_id}/messages\"\n\n\u4eca\u56de\u306fPOST\u3067\u3059\u304c\u3001\u524d\u56de\u306eGET\u3068\u540c\u3058\u304fAPI\u306b\u306f\u30d8\u30c3\u30c0\u30fc\u306bAPI KEY(token)\u3092\u4ed8\u3051\u307e\u3059\u3002\n\u524d\u56de\u306e\u5185\u5bb9\u3067\u30c1\u30e3\u30c3\u30c8\u6bce\u306eroom_id\u304c\u5206\u304b\u3063\u305f\u3068\u601d\u3046\u306e\u3067\u3001\u305d\u308c\u3092\u30e1\u30e2\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n\u524d\u56de\u306e\u30b3\u30fc\u30c9\u3092\u4fee\u6b63&\u66f8\u304d\u8db3\u3057\u3066\u30c1\u30e3\u30c3\u30c8\u30ef\u30fc\u30af\u306bPOST(\u6295\u7a3f)\nrequest\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3044\u307e\u3059\u3002express\u306f4\u7cfb\u3067\u3059\u3002\nroutes/post.js\u3092\u4f5c\u308a\u307e\u3057\u3087\u3046\u3002room_id\u3068API\u30ad\u30fc\u3092\u9069\u5b9c\u5909\u66f4\u3057\u3066\u4e0b\u3055\u3044\u3002\n\nroutes/post.js\nvar express = require('express');\nvar router = express.Router();\nvar request = require('request');\n\nrouter.get('/', function(req, res){\n    var tweet = '\u3053\u3093\u3070\u3093\u308f\u301c';\n    var room_id = \u6295\u7a3f\u3057\u305f\u3044\u30c1\u30e3\u30c3\u30c8\u30eb\u30fc\u30e0\u306eid;\n    var options = {\n        url: 'https://api.chatwork.com/v1/rooms/'+room_id+'/messages',\n        headers: {\n            'X-ChatWorkToken': 'YOUR API KEY'\n        },\n        form: { body: tweet },\n        json: true\n    };\n\n    request.post(options, function (error, response, body) {\n        if (!error && response.statusCode == 200) {\n            res.render('post', body);\n        }else{\n            console.log('error: '+ response.statusCode);\n        }\n    });\n});\n\nmodule.exports = router;\n\n\nurl\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u306e\u305f\u3081\u306bapp.js\u3082\u66f8\u304d\u63db\u3048\u307e\u3059\n\napp.js\n#\uff18\u884c\u76ee\u4ed8\u8fd1\nvar routes = require('./routes/index');\nvar users = require('./routes/users');\nvar post = require('./routes/post'); //\u2190\u8ffd\u52a0\n\n#25\u884c\u76ee\u4ed8\u8fd1\napp.use('/', routes);\napp.use('/users', users);\napp.use('/post', post); //\u2190\u8ffd\u52a0\n\n\n\u4eca\u56de\u306f\u30c1\u30e3\u30c3\u30c8\u30eb\u30fc\u30e0\u306b\u6295\u7a3f\u3057\u305f\u30e1\u30c3\u30bb\u30fc\u30b8id\u3092\u8868\u793a\u3055\u305b\u307e\u3059\u3002\n\nindex.ejs\n<!DOCTYPE html>\n<html>\n  <head>\n    <title>Post\u3066\u3059\u3068</title>\n    <link rel='stylesheet' href='/stylesheets/style.css' />\n  </head>\n  <body>\n    post\u30e1\u30c3\u30bb\u30fc\u30b8id: \n    <%= message_id %>\n  </body>\n</html>\n\n\n\u3053\u308c\u3067\u30d6\u30e9\u30a6\u30b6\u304b\u3089localhost:3000/post\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u30c1\u30e3\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u7720\u3044\u3068\u6295\u7a3f\u3055\u308c\u307e\u3059\u3002\n\u30d6\u30e9\u30a6\u30b6\u4e0a\u306b\u306fpost\u3055\u308c\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306eid\u304c\u8868\u793a\u3055\u308c\u3001\n\n\u30c1\u30e3\u30c3\u30c8\u30ef\u30fc\u30af\u4e0a\u3067\u306f\u81ea\u5206\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u6307\u5b9a\u3057\u305froom\u3067\u7720\u3044\u3068\u8a00\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u6295\u7a3f\u307e\u3067\u51fa\u6765\u307e\u3057\u305f! \u3081\u3067\u305f\u3057!\n\u53c2\u8003: Node.js: request \u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3063\u3066 POST \u30ea\u30af\u30a8\u30b9\u30c8\u3092\u884c\u3046 - Sarabande.jp\n\n\u3055\u3063\u304d\u66f8\u3044\u305f\u8a18\u4e8b\u3067\u306fAPI\u7d4c\u7531\u3067Chatwork\u306e\u30c1\u30e3\u30c3\u30c8\u30b0\u30eb\u30fc\u30d7\u3092\u53d6\u5f97\u3057\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306f\u30c1\u30e3\u30c3\u30c8\u30b0\u30eb\u30fc\u30d7\u306b\u6295\u7a3f\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n[ChatworkAPI\u306bexpress\u304b\u3089request\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u63a5\u7d9a - Qiita](http://go.shr.lc/1rDlXS4)\n\n\n##\u30c1\u30e3\u30c3\u30c8\u30ef\u30fc\u30afAPI\u3067\u6295\u7a3f\n###\u30b5\u30f3\u30d7\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\n\n```\ncurl -X POST -H \"X-ChatWorkToken: YOUR API KEY\" -d \"body=Hello+ChatWork%21\" \"https://api.chatwork.com/v1/rooms/{room_id}/messages\"\n```\n\n\u4eca\u56de\u306fPOST\u3067\u3059\u304c\u3001[\u524d\u56de](http://go.shr.lc/1rDlXS4)\u306eGET\u3068\u540c\u3058\u304fAPI\u306b\u306f\u30d8\u30c3\u30c0\u30fc\u306bAPI KEY(token)\u3092\u4ed8\u3051\u307e\u3059\u3002\n\n\u524d\u56de\u306e\u5185\u5bb9\u3067\u30c1\u30e3\u30c3\u30c8\u6bce\u306eroom_id\u304c\u5206\u304b\u3063\u305f\u3068\u601d\u3046\u306e\u3067\u3001\u305d\u308c\u3092\u30e1\u30e2\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n##\u524d\u56de\u306e\u30b3\u30fc\u30c9\u3092\u4fee\u6b63&\u66f8\u304d\u8db3\u3057\u3066\u30c1\u30e3\u30c3\u30c8\u30ef\u30fc\u30af\u306bPOST(\u6295\u7a3f)\nrequest\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3044\u307e\u3059\u3002express\u306f4\u7cfb\u3067\u3059\u3002\n\n`routes/post.js`\u3092\u4f5c\u308a\u307e\u3057\u3087\u3046\u3002room_id\u3068API\u30ad\u30fc\u3092\u9069\u5b9c\u5909\u66f4\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n```routes/post.js\nvar express = require('express');\nvar router = express.Router();\nvar request = require('request');\n\nrouter.get('/', function(req, res){\n\tvar tweet = '\u3053\u3093\u3070\u3093\u308f\u301c';\n\tvar room_id = \u6295\u7a3f\u3057\u305f\u3044\u30c1\u30e3\u30c3\u30c8\u30eb\u30fc\u30e0\u306eid;\n\tvar options = {\n\t\turl: 'https://api.chatwork.com/v1/rooms/'+room_id+'/messages',\n\t\theaders: {\n\t\t\t'X-ChatWorkToken': 'YOUR API KEY'\n\t\t},\n\t\tform: { body: tweet },\n\t\tjson: true\n\t};\n\n\trequest.post(options, function (error, response, body) {\n\t\tif (!error && response.statusCode == 200) {\n\t\t\tres.render('post', body);\n\t\t}else{\n\t\t\tconsole.log('error: '+ response.statusCode);\n\t\t}\n\t});\n});\n\nmodule.exports = router;\n```\n\nurl\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u306e\u305f\u3081\u306bapp.js\u3082\u66f8\u304d\u63db\u3048\u307e\u3059\n\n```app.js\n#\uff18\u884c\u76ee\u4ed8\u8fd1\nvar routes = require('./routes/index');\nvar users = require('./routes/users');\nvar post = require('./routes/post'); //\u2190\u8ffd\u52a0\n\n#25\u884c\u76ee\u4ed8\u8fd1\napp.use('/', routes);\napp.use('/users', users);\napp.use('/post', post); //\u2190\u8ffd\u52a0\n```\n\n\u4eca\u56de\u306f\u30c1\u30e3\u30c3\u30c8\u30eb\u30fc\u30e0\u306b\u6295\u7a3f\u3057\u305f\u30e1\u30c3\u30bb\u30fc\u30b8id\u3092\u8868\u793a\u3055\u305b\u307e\u3059\u3002\n\n```index.ejs\n<!DOCTYPE html>\n<html>\n  <head>\n    <title>Post\u3066\u3059\u3068</title>\n    <link rel='stylesheet' href='/stylesheets/style.css' />\n  </head>\n  <body>\n  \tpost\u30e1\u30c3\u30bb\u30fc\u30b8id: \n  \t<%= message_id %>\n  </body>\n</html>\n```\n\n\u3053\u308c\u3067\u30d6\u30e9\u30a6\u30b6\u304b\u3089`localhost:3000/post`\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u30c1\u30e3\u30c3\u30c8\u30ef\u30fc\u30af\u306b`\u7720\u3044`\u3068\u6295\u7a3f\u3055\u308c\u307e\u3059\u3002\n\n\u30d6\u30e9\u30a6\u30b6\u4e0a\u306b\u306fpost\u3055\u308c\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306eid\u304c\u8868\u793a\u3055\u308c\u3001\n![](http://i.gyazo.com/f4e402e1541e120c7ac7f6337dcc7fdf.png)\n\u30c1\u30e3\u30c3\u30c8\u30ef\u30fc\u30af\u4e0a\u3067\u306f\u81ea\u5206\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u6307\u5b9a\u3057\u305froom\u3067\u7720\u3044\u3068\u8a00\u3063\u3066\u3044\u307e\u3059\u3002\n![](http://i.gyazo.com/f78b716c07ad0055df2b48160df1cb9d.png)\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u6295\u7a3f\u307e\u3067\u51fa\u6765\u307e\u3057\u305f! \u3081\u3067\u305f\u3057!\n\n\u53c2\u8003: [Node.js: request \u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3063\u3066 POST \u30ea\u30af\u30a8\u30b9\u30c8\u3092\u884c\u3046 - Sarabande.jp](http://go.shr.lc/UMYDGw)\n", "tags": ["api", "Express", "chatwork", "Node.js"]}