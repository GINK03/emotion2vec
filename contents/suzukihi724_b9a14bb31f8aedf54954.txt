{"context": "Treasure Data\u793e\u88fd\u306e\u30d0\u30eb\u30af\u30c7\u30fc\u30bf\u30ed\u30fc\u30c0\u30fcOSS \u300eembulk\u300f \u3092\u8a66\u3057\u305f\u30e1\u30e2\u3002\nv0.8.13\nS\uff13\u306e\u6307\u5b9a\u30d0\u30b1\u30c3\u30c8\u306b\u683c\u7d0d\u3057\u305f\u8907\u6570csv\u30d5\u30a1\u30a4\u30eb\u3092\u3001RDS\uff08Postgresql\uff09\u306bLOAD\u3059\u308b\u3002\nAWS\u306e\u69cb\u6210\u306f\u3001S3\u306e\u30d0\u30b1\u30c3\u30c8\u3001embulk\u5b9f\u884c\u7528EC2(Amazon Linux)\u3001RDS(Postgresql)\u3067\u3001\u4e8b\u524d\u306b\u6e96\u5099\u3059\u308b\u3002\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\uff09\nhttp://www.embulk.org/docs/index.html\nhttps://github.com/embulk/embulk\n\u53c2\u8003\uff09\nhttp://dev.classmethod.jp/tool/embulk-ataglance/\nhttp://dev.classmethod.jp/tool/embulk-guess-01/\nhttp://qiita.com/t-yotsu/items/48b9154db94f85726777\n\nembulk\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4ee5\u4e0b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3002\u57fa\u672c\u7684\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u914d\u7f6e\u3059\u308b\u306e\u307f\u3002\n\u203bJava\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u3042\u308a\u3002\ncurl --create-dirs -o ~/.embulk/bin/embulk -L \"http://dl.embulk.org/embulk-latest.jar\"\nsudo chmod +x ~/.embulk/bin/embulk\nsudo echo 'export PATH=\"$HOME/.embulk/bin:$PATH\"' >> ~/.bashrc\nsource ~/.bashrc\n\n\nembulk\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nembulk\u306fINPUT(\u5165\u529b)\u3001FILTER\uff08\u52a0\u5de5\uff09\u3001OUTPUT(\u51fa\u529b)\u306e\uff13\u8981\u7d20\u3067\u69cb\u6210\u3055\u308c\u3001\u305d\u308c\u305e\u308c\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u3002\uff08\u72ec\u81ea\u306b\u8ffd\u52a0\u3082\u53ef\u80fd\uff09\n\u4eca\u56de\u306fS3\u5165\u529b\u3001Postgresql\u51fa\u529b\u306a\u306e\u3067\u3001\u305d\u308c\u305e\u308c\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\nembulk gem install embulk-input-s3\nembulk gem install embulk-output-postgresql\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(yaml)\u3092\u4f5c\u6210\n\u4eca\u56de\u306f\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3068\u3057\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306aCSV\u30d5\u30a1\u30a4\u30eb\u3092\u6e96\u5099\u3057\u3001S3\u306b\u683c\u7d0d\u3057\u3066\u304a\u304f\u3002\n\u201cNo\u201d,\u201dClass\",\"Sex\",\"Age\",\"Survived\",\"Freq\"\n\"1\",\"1st\",\"Male\",\"Child\",\"No\",0\n\"2\",\"2nd\",\"Male\",\"Child\",\"No\",0\n\"3\",\"3rd\",\"Male\",\"Child\",\"No\",35\n\"4\",\"Crew\",\"Male\",\"Child\",\"No\",0\n\"5\",\"1st\",\"Female\",\"Child\",\"No\",0\n\"6\",\"2nd\",\"Female\",\"Child\",\"No\",0\n\"7\",\"3rd\",\"Female\",\"Child\",\"No\",17\n\"8\",\"Crew\",\"Female\",\"Child\",\"No\",0\n \uff1a\n\nS3\u306etest\u30d0\u30b1\u30c3\u30c8\u306b\u300120160101\u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6398\u308a\u3001\u305d\u306e\u914d\u4e0b\u306b\u4e0a\u8a18\u306e Titanic.csv\u3092\u683c\u7d0d\u3057\u305f\u3002\n\u4ee5\u4e0b\u304cembulk\u7528\u306e\u8a2d\u5b9ayaml\u30d5\u30a1\u30a4\u30eb\u4f8b\u3002\ns3://test/20160101 \u914d\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u3001RDS\u4e0a\u306etitanic\u30c6\u30fc\u30d6\u30eb\u306bINSERT\u3059\u308b\u3068\u3044\u3046\u610f\u5473\u3002\ntest.yaml\nin:\n  type: s3\n  bucket: test\n  path_prefix: 20160101\n  endpoint: s3-ap-northeast-1.amazonaws.com\n  access_key_id: [AWS\u30a2\u30af\u30bb\u30b9\u30ad\u30fc]\n  secret_access_key: [AWS\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30a2\u30af\u30bb\u30b9\u30ad\u30fc]  \nout:\n  type: postgresql\n  host: XXX.ap-northeast-1.rds.amazonaws.com\n  user: [DB\u30e6\u30fc\u30b6]\n  password: [DB\u30d1\u30b9\u30ef\u30fc\u30c9]\n  database: [DB\u540d]\n  table: titanic\n  mode: insert\n\nembulk\u3067\u306f\u3001\u5165\u529b\u30d5\u30a1\u30a4\u30eb\u3092\u3082\u3068\u306b\u30c7\u30fc\u30bf\u5b9a\u7fa9\u3092\u63a8\u6e2c(guess)\u3057\u3001CREATE\u6587\u3068INSERT\u6587\u3092\u81ea\u52d5\u751f\u6210\u3057\u3066\u304f\u308c\u308bGuess\u6a5f\u80fd\u304c\u3042\u308b\u3002\n\nGuess\u6a5f\u80fd\u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(yaml)\u3092\u4f5c\u6210\nembulk guess ./test.yaml -o guessed.yaml\n\n\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001\u63a8\u6e2c\u306b\u3088\u308a\u88dc\u5b8c\u3055\u308c\u305fyaml\u304c\u751f\u6210\u3055\u308c\u308b\u3002\nin:\n  type: s3\n  bucket: test\n  path_prefix: 20160101\n  endpoint: s3-ap-northeast-1.amazonaws.com\n  access_key_id: XXXXX\n  secret_access_key: XXXXX\n  parser:\n    charset: UTF-8\n    newline: CRLF\n    type: csv\n    delimiter: ','\n    quote: '\"'\n    escape: '\"'\n    trim_if_not_quoted: false\n    skip_header_lines: 1\n    allow_extra_columns: false\n    allow_optional_columns: false\n    columns:\n    - {name: No, type: long}\n    - {name: Class, type: string}\n    - {name: Sex, type: string}\n    - {name: Age, type: string}\n    - {name: Survived, type: boolean}\n    - {name: Freq, type: long}\nout: {type: postgresql, host: XXXXX.ap-northeast-1.rds.amazonaws.com,\n  user: XXX, password: XXX, database: postgres, table: titanic, mode: insert}\n\n\u5b9f\u969b\u306e\u30c7\u30fc\u30bf\u3092\u53c2\u7167\u3057\u3001\u30c7\u30fc\u30bf\u9805\u76ee\u3001\u578b\u3092\u4e88\u6e2c\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\u8aa4\u308a\u304c\u3042\u308c\u3070\u3053\u3053\u3067\u624b\u52d5\u3067\u4fee\u6b63\u3057\u3066\u304a\u304f\u3002\n\nembulk\u306b\u3088\u308b\u30ed\u30fc\u30c9\u5b9f\u884c\nembulk run quessed.yaml\n\nRDS\u4e0a\u306bpublic.titanic\u3068\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u3001INSERT\u3055\u308c\u305f\u3002\n\u4eca\u56deS3\u4e0a\u306b\u8907\u6570\u30d5\u30a1\u30a4\u30eb\u3092\u683c\u7d0d\u3057\u305f\u304c\u3001\u5168\u3066INSERT\u3055\u308c\u3066\u3044\u305f\u3002\n\u81ea\u52d5\u751f\u6210\u3055\u308c\u305ftitanic\u30c6\u30fc\u30d6\u30eb\u3002\n\u5217\u540d\u306f\u5143\u30c7\u30fc\u30bf\u306e\uff11\u884c\u76ee\u30d8\u30c3\u30c0\u30fc\u304b\u3089\u81ea\u52d5\u7684\u306b\u8a8d\u8b58(guess)\u3055\u308c\u3001\u578b\u3082\u5143\u30c7\u30fc\u30bf\u306e\u5024\u304b\u3089\u81ea\u52d5\u3067\u5b9a\u7fa9\u3057\u3066\u304f\u308c\u3066\u3044\u308b\u3002\npostgres=> \\d titanic\n  \u30c6\u30fc\u30d6\u30eb \"public.titanic\"\n    \u5217    |   \u578b    | \u4fee\u98fe\u8a9e \n----------+---------+--------\n No       | bigint  | \n Class    | text    | \n Sex      | text    | \n Age      | text    | \n Survived | boolean | \n Freq     | bigint  | \n\nDB\u5074\u306e\u30c6\u30fc\u30d6\u30eb\u5b9a\u7fa9\uff08SQL\uff09\u3092\u4f5c\u6210\u3059\u308b\u306e\u306f\u7d50\u69cb\u9762\u5012\u306a\u306e\u3067\u3001guess\u6a5f\u80fd\u3067\u88dc\u5b8c\u3057\u3066\u304f\u308c\u308b\u3068\u7d50\u69cb\u4fbf\u5229\u3002\nTreasure Data\u793e\u88fd\u306e\u30d0\u30eb\u30af\u30c7\u30fc\u30bf\u30ed\u30fc\u30c0\u30fcOSS \u300eembulk\u300f \u3092\u8a66\u3057\u305f\u30e1\u30e2\u3002\nv0.8.13\n\nS\uff13\u306e\u6307\u5b9a\u30d0\u30b1\u30c3\u30c8\u306b\u683c\u7d0d\u3057\u305f\u8907\u6570csv\u30d5\u30a1\u30a4\u30eb\u3092\u3001RDS\uff08Postgresql\uff09\u306bLOAD\u3059\u308b\u3002\nAWS\u306e\u69cb\u6210\u306f\u3001S3\u306e\u30d0\u30b1\u30c3\u30c8\u3001embulk\u5b9f\u884c\u7528EC2(Amazon Linux)\u3001RDS(Postgresql)\u3067\u3001\u4e8b\u524d\u306b\u6e96\u5099\u3059\u308b\u3002\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\uff09\nhttp://www.embulk.org/docs/index.html\nhttps://github.com/embulk/embulk\n\n\u53c2\u8003\uff09\nhttp://dev.classmethod.jp/tool/embulk-ataglance/\nhttp://dev.classmethod.jp/tool/embulk-guess-01/\nhttp://qiita.com/t-yotsu/items/48b9154db94f85726777\n\n\n#embulk\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u4ee5\u4e0b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3002\u57fa\u672c\u7684\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u914d\u7f6e\u3059\u308b\u306e\u307f\u3002\n\u203bJava\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u3042\u308a\u3002\n\n```\ncurl --create-dirs -o ~/.embulk/bin/embulk -L \"http://dl.embulk.org/embulk-latest.jar\"\nsudo chmod +x ~/.embulk/bin/embulk\nsudo echo 'export PATH=\"$HOME/.embulk/bin:$PATH\"' >> ~/.bashrc\nsource ~/.bashrc\n```\n\n\n#embulk\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nembulk\u306fINPUT(\u5165\u529b)\u3001FILTER\uff08\u52a0\u5de5\uff09\u3001OUTPUT(\u51fa\u529b)\u306e\uff13\u8981\u7d20\u3067\u69cb\u6210\u3055\u308c\u3001\u305d\u308c\u305e\u308c\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b\u3002\uff08\u72ec\u81ea\u306b\u8ffd\u52a0\u3082\u53ef\u80fd\uff09\n\u4eca\u56de\u306fS3\u5165\u529b\u3001Postgresql\u51fa\u529b\u306a\u306e\u3067\u3001\u305d\u308c\u305e\u308c\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n```\nembulk gem install embulk-input-s3\nembulk gem install embulk-output-postgresql\n```\n\n\n#\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(yaml)\u3092\u4f5c\u6210\n\n\u4eca\u56de\u306f\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3068\u3057\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306aCSV\u30d5\u30a1\u30a4\u30eb\u3092\u6e96\u5099\u3057\u3001S3\u306b\u683c\u7d0d\u3057\u3066\u304a\u304f\u3002\n\n```\n\u201cNo\u201d,\u201dClass\",\"Sex\",\"Age\",\"Survived\",\"Freq\"\n\"1\",\"1st\",\"Male\",\"Child\",\"No\",0\n\"2\",\"2nd\",\"Male\",\"Child\",\"No\",0\n\"3\",\"3rd\",\"Male\",\"Child\",\"No\",35\n\"4\",\"Crew\",\"Male\",\"Child\",\"No\",0\n\"5\",\"1st\",\"Female\",\"Child\",\"No\",0\n\"6\",\"2nd\",\"Female\",\"Child\",\"No\",0\n\"7\",\"3rd\",\"Female\",\"Child\",\"No\",17\n\"8\",\"Crew\",\"Female\",\"Child\",\"No\",0\n \uff1a\n```\n\nS3\u306etest\u30d0\u30b1\u30c3\u30c8\u306b\u300120160101\u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6398\u308a\u3001\u305d\u306e\u914d\u4e0b\u306b\u4e0a\u8a18\u306e Titanic.csv\u3092\u683c\u7d0d\u3057\u305f\u3002\n\n\u4ee5\u4e0b\u304cembulk\u7528\u306e\u8a2d\u5b9ayaml\u30d5\u30a1\u30a4\u30eb\u4f8b\u3002\ns3://test/20160101 \u914d\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u3001RDS\u4e0a\u306etitanic\u30c6\u30fc\u30d6\u30eb\u306bINSERT\u3059\u308b\u3068\u3044\u3046\u610f\u5473\u3002\n\ntest.yaml\n\n```\nin:\n  type: s3\n  bucket: test\n  path_prefix: 20160101\n  endpoint: s3-ap-northeast-1.amazonaws.com\n  access_key_id: [AWS\u30a2\u30af\u30bb\u30b9\u30ad\u30fc]\n  secret_access_key: [AWS\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30a2\u30af\u30bb\u30b9\u30ad\u30fc]  \nout:\n  type: postgresql\n  host: XXX.ap-northeast-1.rds.amazonaws.com\n  user: [DB\u30e6\u30fc\u30b6]\n  password: [DB\u30d1\u30b9\u30ef\u30fc\u30c9]\n  database: [DB\u540d]\n  table: titanic\n  mode: insert\n```\n\nembulk\u3067\u306f\u3001\u5165\u529b\u30d5\u30a1\u30a4\u30eb\u3092\u3082\u3068\u306b\u30c7\u30fc\u30bf\u5b9a\u7fa9\u3092\u63a8\u6e2c(guess)\u3057\u3001CREATE\u6587\u3068INSERT\u6587\u3092\u81ea\u52d5\u751f\u6210\u3057\u3066\u304f\u308c\u308bGuess\u6a5f\u80fd\u304c\u3042\u308b\u3002\n\n#Guess\u6a5f\u80fd\u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(yaml)\u3092\u4f5c\u6210\n\n\n```\nembulk guess ./test.yaml -o guessed.yaml\n```\n\n\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001\u63a8\u6e2c\u306b\u3088\u308a\u88dc\u5b8c\u3055\u308c\u305fyaml\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n\n```\nin:\n  type: s3\n  bucket: test\n  path_prefix: 20160101\n  endpoint: s3-ap-northeast-1.amazonaws.com\n  access_key_id: XXXXX\n  secret_access_key: XXXXX\n  parser:\n    charset: UTF-8\n    newline: CRLF\n    type: csv\n    delimiter: ','\n    quote: '\"'\n    escape: '\"'\n    trim_if_not_quoted: false\n    skip_header_lines: 1\n    allow_extra_columns: false\n    allow_optional_columns: false\n    columns:\n    - {name: No, type: long}\n    - {name: Class, type: string}\n    - {name: Sex, type: string}\n    - {name: Age, type: string}\n    - {name: Survived, type: boolean}\n    - {name: Freq, type: long}\nout: {type: postgresql, host: XXXXX.ap-northeast-1.rds.amazonaws.com,\n  user: XXX, password: XXX, database: postgres, table: titanic, mode: insert}\n```\n\n\u5b9f\u969b\u306e\u30c7\u30fc\u30bf\u3092\u53c2\u7167\u3057\u3001\u30c7\u30fc\u30bf\u9805\u76ee\u3001\u578b\u3092\u4e88\u6e2c\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\u8aa4\u308a\u304c\u3042\u308c\u3070\u3053\u3053\u3067\u624b\u52d5\u3067\u4fee\u6b63\u3057\u3066\u304a\u304f\u3002\n\n\n#embulk\u306b\u3088\u308b\u30ed\u30fc\u30c9\u5b9f\u884c\n\n```\nembulk run quessed.yaml\n```\n\nRDS\u4e0a\u306bpublic.titanic\u3068\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u3001INSERT\u3055\u308c\u305f\u3002\n\u4eca\u56deS3\u4e0a\u306b\u8907\u6570\u30d5\u30a1\u30a4\u30eb\u3092\u683c\u7d0d\u3057\u305f\u304c\u3001\u5168\u3066INSERT\u3055\u308c\u3066\u3044\u305f\u3002\n\n\u81ea\u52d5\u751f\u6210\u3055\u308c\u305ftitanic\u30c6\u30fc\u30d6\u30eb\u3002\n\u5217\u540d\u306f\u5143\u30c7\u30fc\u30bf\u306e\uff11\u884c\u76ee\u30d8\u30c3\u30c0\u30fc\u304b\u3089\u81ea\u52d5\u7684\u306b\u8a8d\u8b58(guess)\u3055\u308c\u3001\u578b\u3082\u5143\u30c7\u30fc\u30bf\u306e\u5024\u304b\u3089\u81ea\u52d5\u3067\u5b9a\u7fa9\u3057\u3066\u304f\u308c\u3066\u3044\u308b\u3002\n\n```\npostgres=> \\d titanic\n  \u30c6\u30fc\u30d6\u30eb \"public.titanic\"\n    \u5217    |   \u578b    | \u4fee\u98fe\u8a9e \n----------+---------+--------\n No       | bigint  | \n Class    | text    | \n Sex      | text    | \n Age      | text    | \n Survived | boolean | \n Freq     | bigint  | \n```\n\nDB\u5074\u306e\u30c6\u30fc\u30d6\u30eb\u5b9a\u7fa9\uff08SQL\uff09\u3092\u4f5c\u6210\u3059\u308b\u306e\u306f\u7d50\u69cb\u9762\u5012\u306a\u306e\u3067\u3001guess\u6a5f\u80fd\u3067\u88dc\u5b8c\u3057\u3066\u304f\u308c\u308b\u3068\u7d50\u69cb\u4fbf\u5229\u3002\n\n", "tags": ["Embulk", "AWS", "ETL", "S3", "RDS"]}