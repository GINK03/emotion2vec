{"context": " More than 1 year has passed since last update.View\n<div class=\"control-group\">\n    <?= Form::label('Items', 'item_id[]', array('class'=>'control-label')); ?>\n\n    <div class=\"controls\">\n\n<?php\n    foreach ( Model_Item::find('all') as $item)\n    {\n        $checked = in_array($item->id, array_merge(\n            (array) Input::post('item_id', []),\n            isset($parent) ? array_keys($parent->items) : []\n        ));\n        echo Form::label(\n            Form::checkbox(\n                'item_id[]',\n                $item->id,\n                $checked,\n                ['id' => 'form_item_id_' . $item->id]\n            ) . $item->name,\n            'item_id_' . $item->id,\n            ['class' => 'checkbox']\n        );\n    }\n?>\n\n    </div>\n</div>\n\nController\n<?php\n\nclass Controller_Parent extends Controller_Template\n{\n\n    /* ... \u4e2d\u7565 ... */\n\n    protected function apply_item_ids($parent)\n    {\n        $item_ids = (array) Input::post('item_id', []);\n\n        foreach ( $parent->items as $item )\n        {\n            unset($parent->items[$item->id]);\n        }\n\n        foreach ( $item_ids as $item_id )\n        {\n            $parent->items[] = Model_Item::find($item_id);\n        }\n    }\n}\n\n\u6539\u884c\u5165\u308c\u305f\u3051\u3069\u8aad\u307f\u306b\u304f\u3044\u7f60\u3002\n\u3042\u307e\u308a\u6570\u306e\u591a\u3044\u3082\u306e\u306b\u306f\u4f7f\u3048\u306a\u3044\u3002\n**View**\n\n```php:\n<div class=\"control-group\">\n\t<?= Form::label('Items', 'item_id[]', array('class'=>'control-label')); ?>\n\n\t<div class=\"controls\">\n\n<?php\n\tforeach ( Model_Item::find('all') as $item)\n\t{\n\t\t$checked = in_array($item->id, array_merge(\n\t\t\t(array) Input::post('item_id', []),\n\t\t\tisset($parent) ? array_keys($parent->items) : []\n\t\t));\n\t\techo Form::label(\n\t\t\tForm::checkbox(\n\t\t\t\t'item_id[]',\n\t\t\t\t$item->id,\n\t\t\t\t$checked,\n\t\t\t\t['id' => 'form_item_id_' . $item->id]\n\t\t\t) . $item->name,\n\t\t\t'item_id_' . $item->id,\n\t\t\t['class' => 'checkbox']\n\t\t);\n\t}\n?>\n\n\t</div>\n</div>\n```\n\n**Controller**\n\n```php:\n<?php\n\nclass Controller_Parent extends Controller_Template\n{\n\n\t/* ... \u4e2d\u7565 ... */\n\n\tprotected function apply_item_ids($parent)\n\t{\n\t\t$item_ids = (array) Input::post('item_id', []);\n\n\t\tforeach ( $parent->items as $item )\n\t\t{\n\t\t\tunset($parent->items[$item->id]);\n\t\t}\n\n\t\tforeach ( $item_ids as $item_id )\n\t\t{\n\t\t\t$parent->items[] = Model_Item::find($item_id);\n\t\t}\n\t}\n}\n```\n\n\u6539\u884c\u5165\u308c\u305f\u3051\u3069\u8aad\u307f\u306b\u304f\u3044\u7f60\u3002\n\n\u3042\u307e\u308a\u6570\u306e\u591a\u3044\u3082\u306e\u306b\u306f\u4f7f\u3048\u306a\u3044\u3002", "tags": ["FuelPHP1.6", "PHP"]}