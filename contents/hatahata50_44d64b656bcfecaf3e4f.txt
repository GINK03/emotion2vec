{"context": "archlinux \u306f\u3000\u81ea\u5206\u304c\u7d4c\u9a13\u3057\u305flinux\u4e2d\u3067 \u4e00\u756a\u306f\u3084\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nbtrfs \u5358\u72ec\u3000\u3042\u308b\u3044\u306f\u3000uefi \u5358\u72ec\u3067\u3000archlinux \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u306f\u5bb9\u6613\u3067\u3059\u3002\n2TB\u4ee5\u4e0a\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304b\u3089\u8d77\u52d5\u3057\u300116EiB\u306e\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u306b\u3000\u5bfe\u5fdc\u3059\u3079\u304f\nbtrfs + uefi \u3067 archlinux \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u8a66\u307f\u307e\u3057\u305f\u3002\n\u3067\u304d\u307e\u3059\u3002\n\u307e\u305a\u30c6\u30b9\u30c8\u3068\u3057\u3066\u3000USB\u3000\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\n\u5168\u304f\u540c\u69d8\u306e\u624b\u6bb5\u3067\u3000sata \u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\nbtrfs\u306b\u3088\u3063\u3066\u3000snapper \u306e\u3000archlinux\u7248\u3000pac-snap \u304c\u4f7f\u3048\u307e\u3059\u306e\u3067\u3001\u3000pacman -Sy \u67d0\n\u306e\u53d6\u308a\u6d88\u3057\u3082\u7c21\u5358\u3067\u3059\u3002\n\u3067\u306f\u3000USB\u3000\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u3078\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u59cb\u3081\u307e\u3059\u3002\n\u307e\u305a\u78ba\u8a8d\u3067\u3059\u304c sata \u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306b\u3042\u308b ntfs , vfat \u306a\u3069\u306e microsoft file system \u306f\u306e\u3051\u3068\u304b\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3068\u304a\u3082\u3044\u307e\u3059\u3002\n\u3053\u308c\u304c\u3042\u308b\u3068 UEFI\u304c USB \u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u3067\u306a\u304f sata \u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306e\u65b9\u306b\u3044\u3063\u3061\u3083\u3044\u307e\u3059\u3002\n\u304a\u305d\u3089\u304f UEFI\u306e\u4ed5\u69d8\u306e\u305f\u3081\u3067\u306f\u306a\u3044\u304b\u3068 \u81ea\u5206\u306f\u60f3\u50cf\u3057\u307e\u3059\u3002\n\u4ed6\u306e\u3071\u305d\u3053\u3093\u304b\u3089 archlinux \u306b\u306f\u3044\u308a\u307e\u3059\u3002\n\u3064\u307e\u308a\nssh -l root 192.168.80.116\nroot@archiso ~ # fdisk -l /dev/sda  <-----------\u3053\u3053\u3067\u3059 ntfs , vfat \u306f\u306a\u3044\u3053\u3068\u306e\u78ba\u8a8d\nDevice     Boot     Start       End   Sectors   Size Id Type\n/dev/sda2  *      1050624 614402047 613351424 292.5G 83 Linux\n/dev/sda3       614404094 874369023 259964930   124G  5 Extended\n/dev/sda4       874371072 976773119 102402048  48.8G a6 OpenBSD\n/dev/sda5       614404096 622792703   8388608     4G 82 Linux swap / Solaris\n/dev/sda6       622794752 874369023 251574272   120G 83 Linux\nroot@archiso ~ # gdisk -l /dev/sdb\nNumber  Start (sector)    End (sector)  Size       Code  Name\n   1            2048         1050623   512.0 MiB   EF00  EFI System\n   2         1050624         5244927   2.0 GiB     8200  Linux swap\n   3         5244928       312581774   146.5 GiB   8300  Linux filesystem\n\u3068\u3044\u3075\u3046\u306b USB\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u3092\u8abf\u6574\u3057\u307e\u3059\u3002\n\u305d\u3057\u3066\nroot@archiso ~ #  mkfs.fat -F32    /dev/sdb1\nmkfs.fat 4.0 (2016-05-06)\n\nmkswap /dev/sdb2\n\nswapon /dev/sdb2\n\nmkfs.btrfs -f -L arch /dev/sdb3\n\nmount /dev/sdb3 /mnt\n\ncd /mnt\n\nbtrfs subvolume create /mnt/ROOT\n\ncd /\n\numount /mnt\n\nmount -o defaults,compress=lzo,subvol=ROOT /dev/sdb3 /mnt\n\nmkdir -p /mnt/boot\n\nmount   /dev/sdb1 /mnt/boot\n\nnano  /etc/pacman.d/mirrorlist\nServer = http://ftp.jaist.ac.jp/pub/Linux/ArchLinux/$repo/os/$arch\n\u3092\u30df\u30e9\u30fc\u30ea\u30b9\u30c8\u306e\u4e00\u756a\u4e0a\u306b\u66f8\u304d\u52a0\u3048\u307e\u3059\n\npacstrap /mnt base  base-devel btrfs-progs\ngenfstab  -p /mnt >> /mnt/etc/fstab\nand rewrite  /mnt/etc/fstab <-------- sdb1,2,3 \u3092\u3064\u304b\u3046\u3068\u72b6\u6cc1\u306b\u3088\u3063\u3066\u306f\u5909\u306a\u306e\u306b\u3064\u306a\u304c\u308b\u3068\u3044\u3051\u306a\u3044\u306e\u3067UUID\u306b\u5909\u3048\u307e\u3059\n\n/etc/fstab: static file system information\n\n \n\nUUID=df5ce463-a907-40f8-9021-bb3f565c48d6 LABEL=arch\nUUID=df5ce463-a907-40f8-9021-bb3f565c48d6            /          btrfs     rw,relatime,compress=lzo,space_cache,subvolid=257,subvol=/ROOT,subvol=ROOT 0 0\n\nUUID=479C-992A LABEL=arch\nUUID=479C-992A            /boot      vfat\nrw,relatime,fmask=0022,dmask=0022,codepage=437,iocharset=iso8859-1,shortname=mixed,errors=remount-ro 0 2\n\nUUID=a35045d7-d17b-401f-a14b-9ffb1ff37816 LABEL=arch\nUUID=a35045d7-d17b-401f-a14b-9ffb1ff37816            none       swap       defaults   0 0\narch-chroot /mnt\necho 'arch-pc' >  /etc/hostname\n\nln -s /usr/share/zoneinfo/Asia/Tokyo /etc/localtime\n\nnano /etc/locale.gen \u306e\n\u4e00\u756a\u4e0a\u306b\u6b21\u3092\u66f8\u304d\u52a0\u3048\u308b\nen_US.UTF-8   UTF-8\nja_JP.UTF-8    UTF-8\n\u305d\u3057\u3066 \n\nlocale-gen\nGenerating locales...\n  en_US.UTF-8... done\n  ja_JP.UTF-8... done\nGeneration complete.\n\u3068\u767a\u751f\u3055\u305b\u307e\u3059\n\npasswd\n\nuseradd -m -G wheel -s /bin/bash taro\n\npasswd  taro\n\npacman -S net-tools dnsutils  openssh dialog wpa_supplicant\nsystemctl enable dhcpcd.service\nsystemctl enable sshd.service\n<   \u3053\u3053\u304b\u3089\u304c \u30ad\u30e2\u3067\u3059\u306e\u3067 \u7701\u7565\u305b\u305a\u66f8\u3044\u3066\u307e\u3059  > \n\npacman -S dosfstools efibootmgr grub\n\ngrub-install --target=x86_64-efi --efi-directory=/boot  --bootloader-id=arch_grub --recheck\nInstalling for x86_64-efi platform.\nInstallation finished. No error reported.\n\nmkdir /boot/EFI/boot\n\ncp /boot/EFI/arch_grub/grubx64.efi /boot/EFI/boot/bootx64.efi\n[root@archiso /]# grub-mkconfig > kg\nGenerating grub configuration file ...\nFound linux image: /boot/vmlinuz-linux\nFound initrd image(s) in /boot: initramfs-linux.img\nFound fallback initrd image(s) in /boot: initramfs-linux-fallback.img\ndone\n[root@archiso /]# cp kg /boot/grub/grub.cfg\n\u79c1\u306e\u7656\u3067\u3059\u3002\u666e\u901a\u306f -o \u3067\u3059\u3088\u306d\u3002\n[root@archiso /]# exit\nexit\narch-chroot /mnt  8.03s user 1.75s system 1% cpu 8:52.70 total\nroot@archiso / # umount -R /mnt\nroot@archiso / # halt -p\n\u3053\u308c\u3067\u3067\u304d\u305f\u307e\u3059\u3002\n\u3042\u3068\u306f\u3000http://hatahata50.blogspot.jp/2016/12/uefi-btrfs-usb.html\u3000\n\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\nsata \u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u5f8c\u306e\u98a8\u666f\u306f\nhttps://www.youtube.com/watch?v=3jYST5ziVos\n\u3067\u3059\u3002\narchlinux\u306f\u3068\u306b\u304b\u304f\u524d\u3078\u524d\u3078\u3000\u6700\u65b0\u3078\u304c\u57fa\u672c\u59ff\u52e2\u3067\u3059\u306e\u3067\n\u5b89\u5b9a\u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066\u306f\u3000\u3061\u3087\u3063\u3068\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\n\u500b\u4eba\u7684\u4ed5\u69d8\u3067\u306f\u3068\u3063\u3066\u3082\u7d20\u6575\u306a\u30b7\u30b9\u30c6\u30e0\u3067\u3059\u3002\n\nuname -ar\uff082016/12/27\u73fe\u5728\uff09\nLinux arch-pc 4.8.13-1-ARCH #1 SMP PREEMPT Fri Dec 9 07:24:34 CET 2016 x86_64 GNU/Linux\n\npacman -Ss apache\nextra/apache 2.4.25-1\narchlinux \u306f\u3000\u81ea\u5206\u304c\u7d4c\u9a13\u3057\u305flinux\u4e2d\u3067 \u4e00\u756a\u306f\u3084\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nbtrfs \u5358\u72ec\u3000\u3042\u308b\u3044\u306f\u3000uefi \u5358\u72ec\u3067\u3000archlinux \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u306f\u5bb9\u6613\u3067\u3059\u3002\n\n2TB\u4ee5\u4e0a\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304b\u3089\u8d77\u52d5\u3057\u300116EiB\u306e\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u306b\u3000\u5bfe\u5fdc\u3059\u3079\u304f\nbtrfs + uefi \u3067 archlinux \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u8a66\u307f\u307e\u3057\u305f\u3002\n\n\u3067\u304d\u307e\u3059\u3002\n\n\u307e\u305a\u30c6\u30b9\u30c8\u3068\u3057\u3066\u3000USB\u3000\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\n\u5168\u304f\u540c\u69d8\u306e\u624b\u6bb5\u3067\u3000sata \u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\nbtrfs\u306b\u3088\u3063\u3066\u3000snapper \u306e\u3000archlinux\u7248\u3000pac-snap \u304c\u4f7f\u3048\u307e\u3059\u306e\u3067\u3001\u3000pacman -Sy \u67d0\n\u306e\u53d6\u308a\u6d88\u3057\u3082\u7c21\u5358\u3067\u3059\u3002\n\n\u3067\u306f\u3000USB\u3000\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u3078\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u59cb\u3081\u307e\u3059\u3002\n\n\u307e\u305a\u78ba\u8a8d\u3067\u3059\u304c sata \u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306b\u3042\u308b ntfs , vfat \u306a\u3069\u306e microsoft file system \u306f\u306e\u3051\u3068\u304b\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3068\u304a\u3082\u3044\u307e\u3059\u3002\n\u3053\u308c\u304c\u3042\u308b\u3068 UEFI\u304c USB \u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u3067\u306a\u304f sata \u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306e\u65b9\u306b\u3044\u3063\u3061\u3083\u3044\u307e\u3059\u3002\n\u304a\u305d\u3089\u304f UEFI\u306e\u4ed5\u69d8\u306e\u305f\u3081\u3067\u306f\u306a\u3044\u304b\u3068 \u81ea\u5206\u306f*\u60f3\u50cf*\u3057\u307e\u3059\u3002\n\n\n\u4ed6\u306e\u3071\u305d\u3053\u3093\u304b\u3089 archlinux \u306b\u306f\u3044\u308a\u307e\u3059\u3002\n\u3064\u307e\u308a\nssh -l root 192.168.80.116\n\nroot@archiso ~ # fdisk -l /dev/sda  <-----------\u3053\u3053\u3067\u3059 ntfs , vfat \u306f\u306a\u3044\u3053\u3068\u306e\u78ba\u8a8d\nDevice     Boot     Start       End   Sectors   Size Id Type\n/dev/sda2  *      1050624 614402047 613351424 292.5G 83 Linux\n/dev/sda3       614404094 874369023 259964930   124G  5 Extended\n/dev/sda4       874371072 976773119 102402048  48.8G a6 OpenBSD\n/dev/sda5       614404096 622792703   8388608     4G 82 Linux swap / Solaris\n/dev/sda6       622794752 874369023 251574272   120G 83 Linux\n\n\n\nroot@archiso ~ # gdisk -l /dev/sdb\nNumber  Start (sector)    End (sector)  Size       Code  Name\n   1            2048         1050623   512.0 MiB   EF00  EFI System\n   2         1050624         5244927   2.0 GiB     8200  Linux swap\n   3         5244928       312581774   146.5 GiB   8300  Linux filesystem\n\u3068\u3044\u3075\u3046\u306b USB\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u3092\u8abf\u6574\u3057\u307e\u3059\u3002\n\n\n\u305d\u3057\u3066\nroot@archiso ~ #  mkfs.fat -F32    /dev/sdb1\nmkfs.fat 4.0 (2016-05-06)\n\n# mkswap /dev/sdb2\n# swapon /dev/sdb2\n\n \n# mkfs.btrfs -f -L arch /dev/sdb3\n# mount /dev/sdb3 /mnt\n# cd /mnt\n# btrfs subvolume create /mnt/ROOT\n# cd /\n# umount /mnt\n# mount -o defaults,compress=lzo,subvol=ROOT /dev/sdb3 /mnt\n\n\n# mkdir -p /mnt/boot\n# mount   /dev/sdb1 /mnt/boot \n\n\n# nano  /etc/pacman.d/mirrorlist  \nServer = http://ftp.jaist.ac.jp/pub/Linux/ArchLinux/$repo/os/$arch\n\u3092\u30df\u30e9\u30fc\u30ea\u30b9\u30c8\u306e\u4e00\u756a\u4e0a\u306b\u66f8\u304d\u52a0\u3048\u307e\u3059\n\n# pacstrap /mnt base  base-devel btrfs-progs\n\n\n\ngenfstab  -p /mnt >> /mnt/etc/fstab\n\nand rewrite  /mnt/etc/fstab <-------- sdb1,2,3 \u3092\u3064\u304b\u3046\u3068\u72b6\u6cc1\u306b\u3088\u3063\u3066\u306f\u5909\u306a\u306e\u306b\u3064\u306a\u304c\u308b\u3068\u3044\u3051\u306a\u3044\u306e\u3067UUID\u306b\u5909\u3048\u307e\u3059\n# \n# /etc/fstab: static file system information\n#\n# <file system> <dir> <type> <options> <dump> <pass>\n# UUID=df5ce463-a907-40f8-9021-bb3f565c48d6 LABEL=arch\nUUID=df5ce463-a907-40f8-9021-bb3f565c48d6            /          btrfs     rw,relatime,compress=lzo,space_cache,subvolid=257,subvol=/ROOT,subvol=ROOT 0 0\n\n# UUID=479C-992A LABEL=arch\nUUID=479C-992A            /boot      vfat       \nrw,relatime,fmask=0022,dmask=0022,codepage=437,iocharset=iso8859-1,shortname=mixed,errors=remount-ro 0 2\n\n# UUID=a35045d7-d17b-401f-a14b-9ffb1ff37816 LABEL=arch\nUUID=a35045d7-d17b-401f-a14b-9ffb1ff37816            none       swap       defaults   0 0\n\n\n\narch-chroot /mnt\n\n\necho 'arch-pc' >  /etc/hostname\n\n\n# ln -s /usr/share/zoneinfo/Asia/Tokyo /etc/localtime \n\n\n# nano /etc/locale.gen \u306e\n\u4e00\u756a\u4e0a\u306b\u6b21\u3092\u66f8\u304d\u52a0\u3048\u308b\nen_US.UTF-8   UTF-8\nja_JP.UTF-8    UTF-8\n\n\u305d\u3057\u3066 \n# locale-gen\nGenerating locales...\n  en_US.UTF-8... done\n  ja_JP.UTF-8... done\nGeneration complete.\n\u3068\u767a\u751f\u3055\u305b\u307e\u3059\n\n\n# passwd\n\n# useradd -m -G wheel -s /bin/bash taro\n# passwd  taro\n\n# pacman -S net-tools dnsutils  openssh dialog wpa_supplicant\n\nsystemctl enable dhcpcd.service\nsystemctl enable sshd.service\n\n\n<   \u3053\u3053\u304b\u3089\u304c \u30ad\u30e2\u3067\u3059\u306e\u3067 \u7701\u7565\u305b\u305a\u66f8\u3044\u3066\u307e\u3059  > \n# pacman -S dosfstools efibootmgr grub\n\n# grub-install --target=x86_64-efi --efi-directory=/boot  --bootloader-id=arch_grub --recheck\nInstalling for x86_64-efi platform.\nInstallation finished. No error reported.\n\n\n# mkdir /boot/EFI/boot\n# cp /boot/EFI/arch_grub/grubx64.efi /boot/EFI/boot/bootx64.efi\n\n\n[root@archiso /]# grub-mkconfig > kg\nGenerating grub configuration file ...\nFound linux image: /boot/vmlinuz-linux\nFound initrd image(s) in /boot: initramfs-linux.img\nFound fallback initrd image(s) in /boot: initramfs-linux-fallback.img\ndone\n\n[root@archiso /]# cp kg /boot/grub/grub.cfg\n\u79c1\u306e\u7656\u3067\u3059\u3002\u666e\u901a\u306f -o \u3067\u3059\u3088\u306d\u3002\n\n[root@archiso /]# exit\nexit\narch-chroot /mnt  8.03s user 1.75s system 1% cpu 8:52.70 total\n\nroot@archiso / # umount -R /mnt\n\nroot@archiso / # halt -p\n\n\n\u3053\u308c\u3067\u3067\u304d\u305f\u307e\u3059\u3002\n\u3042\u3068\u306f\u3000http://hatahata50.blogspot.jp/2016/12/uefi-btrfs-usb.html\u3000\n\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\nsata \u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u5f8c\u306e\u98a8\u666f\u306f\nhttps://www.youtube.com/watch?v=3jYST5ziVos\n\u3067\u3059\u3002\n\narchlinux\u306f\u3068\u306b\u304b\u304f\u524d\u3078\u524d\u3078\u3000\u6700\u65b0\u3078\u304c\u57fa\u672c\u59ff\u52e2\u3067\u3059\u306e\u3067\n\u5b89\u5b9a\u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066\u306f\u3000\u3061\u3087\u3063\u3068\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\n\u500b\u4eba\u7684\u4ed5\u69d8\u3067\u306f\u3068\u3063\u3066\u3082\u7d20\u6575\u306a\u30b7\u30b9\u30c6\u30e0\u3067\u3059\u3002\n\n# uname -ar\uff082016/12/27\u73fe\u5728\uff09\nLinux arch-pc 4.8.13-1-ARCH #1 SMP PREEMPT Fri Dec 9 07:24:34 CET 2016 x86_64 GNU/Linux\n\n# pacman -Ss apache\nextra/apache 2.4.25-1\n", "tags": ["archLinux", "btrfs", "UEFI"]}