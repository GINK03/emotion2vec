{"context": " More than 1 year has passed since last update.\u5b50\u4f9b\u3092\u64ae\u3063\u305f\u52d5\u753b\u3092\u3069\u3053\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\u304b\u306a\u30fc\u3068\u60a9\u3093\u3060\u6319\u53e5\u3001\ns3 \u2192 glacier\u3067\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\u3053\u3068\u306b\u3057\u305f\u306e\u3067\u3001\u305d\u306e\u4e8b\u524d\u6e96\u5099\u306e\u70ba\u306b\n\u30d5\u30a1\u30a4\u30eb\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u308f\u3051\u3092\u3057\u305f\u969b\u306e\u30e1\u30e2\n\nffmpeg\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u52d5\u753b\u306e\u30e1\u30bf\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u4e00\u756a\u306e\u8fd1\u9053\u3063\u307d\u3044\u306e\u3067ffmpeg\u3092\u5c0e\u5165\n% brew install ffmpeg\n\n\nffmpeg\u3067\u52d5\u753b\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u8868\u793a\n% ffmpeg -i ***.MOV\n\n\u898b\u305f\u611f\u3058mov\u5074\u306ecreation_time\u306fGMT, mp4\u306b\u306fdate\u7684\u306a\u3082\u306e\u304c\u306a\u3044\u3002\ndate \u2192 creation_time \u2192 \u30d5\u30a1\u30a4\u30eb\u306emtime\u306e\u9806\u3067\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5206\u3051\u306b\u5229\u7528\u3059\u308b\u3053\u3068\u306b\u3057\u305f\n\nmov\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from '***.MOV':\n  Metadata:\n    major_brand     : qt  \n    minor_version   : 0\n    compatible_brands: qt  \n    creation_time   : 2014-06-11 22:17:44\n    encoder         : 7.1.1\n    encoder-jpn     : 7.1.1\n    date            : 2014-06-12T07:17:44+0900\n    date-jpn        : 2014-06-12T07:17:44+0900\n    location        : ***\n    location-jpn    : ***\n    model           : iPhone 5s\n    model-jpn       : iPhone 5s\n    make            : Apple\n    make-jpn        : Apple\n  Duration: 00:00:18.74, start: 0.000000, bitrate: 16993 kb/s\n    Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(tv, bt709), 1920x1080, 16912 kb/s, 29.98 fps, 29.97 tbr, 600 tbn, 1200 tbc (default)\n    Metadata:\n      rotate          : 90\n      creation_time   : 2014-06-11 22:17:44\n      handler_name    : Core Media Data Handler\n    Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 62 kb/s (default)\n    Metadata:\n      creation_time   : 2014-06-11 22:17:44\n      handler_name    : Core Media Data Handler\n\n\n\nmp4\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from '***.mp4':\n  Metadata:\n    major_brand     : mp42\n    minor_version   : 1\n    compatible_brands: mp41mp42isom\n    creation_time   : 2014-06-10 11:17:21\n  Duration: 00:00:36.40, start: 0.000023, bitrate: 3014 kb/s\n    Stream #0:0(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 63 kb/s (default)\n    Metadata:\n      creation_time   : 2014-06-10 11:17:21\n      handler_name    : Core Media Audio\n    Stream #0:1(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(tv, bt709), 720x1280, 2943 kb/s, 29.98 fps, 29.97 tbr, 600 tbn, 1200 tbc (default)\n    Metadata:\n      creation_time   : 2014-06-10 11:17:21\n      handler_name    : Core Media Video\n\n\n\nffmpeg\u3068\u9023\u643a\u3059\u308b\u70ba\u306egem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u66f8\u304f\u306e\u306f\u3081\u3093\u3069\u304f\u3055\u3044\u306e\u3067\u3001ruby\u3067\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304f\u305f\u3081\u306b\u3001\nffmpeg\u3068\u9023\u643a\u3059\u308bgem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nffmpeg\u5bfe\u5fdcgem\n\u3069\u308c\u3067\u3082\u3088\u304b\u3063\u305f\u3093\u3060\u3051\u3069ffmpeg\u306e\u30d0\u30a4\u30ca\u30ea\u3092\u5b9f\u884c\u3057\u3066\u308b\u306e\u3067\u306f\u306a\u304f\u3001\nRuby\u30a8\u30af\u30b9\u30c6\u30f3\u30b7\u30e7\u30f3\u306b\u3057\u3066\u3044\u308bgem\u3092\u9078\u3093\u3067\u307f\u305f\u3002\n\u52d5\u753b\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u304c\u6b32\u3057\u3044\u3060\u3051\u3060\u3063\u305f\u306e\u3067\u6a5f\u80fd\u7684\u306b\u306f\u554f\u984c\u306a\u3057\n% gem install ffmpeg-video-info\n\n\u52d5\u753b\u30d5\u30a1\u30a4\u30eb\u306e\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\n\u3068\u308a\u3042\u3048\u305a\u65b0\u898f\u4f5c\u696d\u306a\u306e\u3067\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u5b58\u5728\u30c1\u30a7\u30c3\u30af\u3068\u304b\u305d\u306e\u8fba\u306f\u306a\u306b\u3082\u3057\u3066\u306a\u3044\n\nirb\nrequire 'ffmpeg_video_info'\nrequire 'time'\nrequire 'fileutils'\nDir.glob(%w(*.avi *.AVI *.mov *.MOV *.mp4 *.MP4 *.3gp)) do |file|\n  info = FFmpegVideoInfo.get(file)\n  info['metadata'] ||= {}\n  creation_at = info['metadata']['date'] || info['metadata']['creation_time'] || File.mtime(file).inspect\n  time = Time.parse(creation_at)\n  year = time.year\n  month = time.month\n  day = time.day\n  dir = File.join(\"#{year}\", \"#{year}-#{format(\"%02d\", month)}\", \"#{year}-#{format(\"%02d\", month)}-#{format(\"%02d\", day)}\")\n  unless File.exists?(dir)\n    FileUtils.mkdir_p(dir)\n  end\n  if File.exists?(File.join(dir, file))\n    puts \"#{File.join(dir, file)} already exists.\"\n    next\n  end\n  FileUtils.mv(file, dir)\nend\n\n\n\u5b50\u4f9b\u3092\u64ae\u3063\u305f\u52d5\u753b\u3092\u3069\u3053\u306b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\u304b\u306a\u30fc\u3068\u60a9\u3093\u3060\u6319\u53e5\u3001\ns3 \u2192 glacier\u3067\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\u3053\u3068\u306b\u3057\u305f\u306e\u3067\u3001\u305d\u306e\u4e8b\u524d\u6e96\u5099\u306e\u70ba\u306b\n\u30d5\u30a1\u30a4\u30eb\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u308f\u3051\u3092\u3057\u305f\u969b\u306e\u30e1\u30e2\n\n## ffmpeg\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u52d5\u753b\u306e\u30e1\u30bf\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u4e00\u756a\u306e\u8fd1\u9053\u3063\u307d\u3044\u306e\u3067ffmpeg\u3092\u5c0e\u5165\n\n```zsh\n% brew install ffmpeg\n```\n\n## ffmpeg\u3067\u52d5\u753b\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u8868\u793a\n\n```zsh\n% ffmpeg -i ***.MOV\n```\n\n\u898b\u305f\u611f\u3058mov\u5074\u306ecreation_time\u306fGMT, mp4\u306b\u306fdate\u7684\u306a\u3082\u306e\u304c\u306a\u3044\u3002\ndate \u2192 creation_time \u2192 \u30d5\u30a1\u30a4\u30eb\u306emtime\u306e\u9806\u3067\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5206\u3051\u306b\u5229\u7528\u3059\u308b\u3053\u3068\u306b\u3057\u305f\n\n```text:mov\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from '***.MOV':\n  Metadata:\n    major_brand     : qt  \n    minor_version   : 0\n    compatible_brands: qt  \n    creation_time   : 2014-06-11 22:17:44\n    encoder         : 7.1.1\n    encoder-jpn     : 7.1.1\n    date            : 2014-06-12T07:17:44+0900\n    date-jpn        : 2014-06-12T07:17:44+0900\n    location        : ***\n    location-jpn    : ***\n    model           : iPhone 5s\n    model-jpn       : iPhone 5s\n    make            : Apple\n    make-jpn        : Apple\n  Duration: 00:00:18.74, start: 0.000000, bitrate: 16993 kb/s\n    Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(tv, bt709), 1920x1080, 16912 kb/s, 29.98 fps, 29.97 tbr, 600 tbn, 1200 tbc (default)\n    Metadata:\n      rotate          : 90\n      creation_time   : 2014-06-11 22:17:44\n      handler_name    : Core Media Data Handler\n    Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 62 kb/s (default)\n    Metadata:\n      creation_time   : 2014-06-11 22:17:44\n      handler_name    : Core Media Data Handler\n```\n\n```text:mp4\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from '***.mp4':\n  Metadata:\n    major_brand     : mp42\n    minor_version   : 1\n    compatible_brands: mp41mp42isom\n    creation_time   : 2014-06-10 11:17:21\n  Duration: 00:00:36.40, start: 0.000023, bitrate: 3014 kb/s\n    Stream #0:0(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 63 kb/s (default)\n    Metadata:\n      creation_time   : 2014-06-10 11:17:21\n      handler_name    : Core Media Audio\n    Stream #0:1(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(tv, bt709), 720x1280, 2943 kb/s, 29.98 fps, 29.97 tbr, 600 tbn, 1200 tbc (default)\n    Metadata:\n      creation_time   : 2014-06-10 11:17:21\n      handler_name    : Core Media Video\n```\n\n## ffmpeg\u3068\u9023\u643a\u3059\u308b\u70ba\u306egem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u66f8\u304f\u306e\u306f\u3081\u3093\u3069\u304f\u3055\u3044\u306e\u3067\u3001ruby\u3067\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304f\u305f\u3081\u306b\u3001\nffmpeg\u3068\u9023\u643a\u3059\u308bgem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n[ffmpeg\u5bfe\u5fdcgem](https://rubygems.org/search?utf8=%E2%9C%93&query=ffmpeg)\n\n\u3069\u308c\u3067\u3082\u3088\u304b\u3063\u305f\u3093\u3060\u3051\u3069ffmpeg\u306e\u30d0\u30a4\u30ca\u30ea\u3092\u5b9f\u884c\u3057\u3066\u308b\u306e\u3067\u306f\u306a\u304f\u3001\nRuby\u30a8\u30af\u30b9\u30c6\u30f3\u30b7\u30e7\u30f3\u306b\u3057\u3066\u3044\u308bgem\u3092\u9078\u3093\u3067\u307f\u305f\u3002\n\n\u52d5\u753b\u306e\u30e1\u30bf\u30c7\u30fc\u30bf\u304c\u6b32\u3057\u3044\u3060\u3051\u3060\u3063\u305f\u306e\u3067\u6a5f\u80fd\u7684\u306b\u306f\u554f\u984c\u306a\u3057\n\n% gem install ffmpeg-video-info\n\n## \u52d5\u753b\u30d5\u30a1\u30a4\u30eb\u306e\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\n\n\u3068\u308a\u3042\u3048\u305a\u65b0\u898f\u4f5c\u696d\u306a\u306e\u3067\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u5b58\u5728\u30c1\u30a7\u30c3\u30af\u3068\u304b\u305d\u306e\u8fba\u306f\u306a\u306b\u3082\u3057\u3066\u306a\u3044\n\n```rb:irb\nrequire 'ffmpeg_video_info'\nrequire 'time'\nrequire 'fileutils'\nDir.glob(%w(*.avi *.AVI *.mov *.MOV *.mp4 *.MP4 *.3gp)) do |file|\n  info = FFmpegVideoInfo.get(file)\n  info['metadata'] ||= {}\n  creation_at = info['metadata']['date'] || info['metadata']['creation_time'] || File.mtime(file).inspect\n  time = Time.parse(creation_at)\n  year = time.year\n  month = time.month\n  day = time.day\n  dir = File.join(\"#{year}\", \"#{year}-#{format(\"%02d\", month)}\", \"#{year}-#{format(\"%02d\", month)}-#{format(\"%02d\", day)}\")\n  unless File.exists?(dir)\n    FileUtils.mkdir_p(dir)\n  end\n  if File.exists?(File.join(dir, file))\n    puts \"#{File.join(dir, file)} already exists.\"\n    next\n  end\n  FileUtils.mv(file, dir)\nend\n```\n", "tags": ["Ruby", "Mac", "ffmpeg"]}