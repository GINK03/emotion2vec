{"tags": ["Play", "PlayFramework", "Play2", "Scala", "slick"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002Play Framework 2.3.x \u3068 Scala \u3092\u4f7f\u3063\u305f Web \u30b7\u30b9\u30c6\u30e0\u958b\u767a\u306b\u3064\u3044\u3066\u52c9\u5f37\u3057\u305f\u969b\u306e\u5185\u5bb9\u3092\u81ea\u5206\u7528\u306e\u30e1\u30e2\u3068\u3057\u3066\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\u3053\u306e\u8a18\u4e8b\u306f\u3001\u3010#Play\u3011Play Framework 2.3 (Scala) \u3092\u4f7f\u3063\u305f Web \u30b7\u30b9\u30c6\u30e0\u958b\u767a\u5165\u9580 \u306e\u7d9a\u304d\u3067\u3059\u3002\n\u300c\u9867\u5ba2\u60c5\u5831\u306e\u767b\u9332/\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\u300d\u3001\u300c\u5546\u54c1\u60c5\u5831\u306e\u767b\u9332/\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\u300d\u3001\u305d\u3057\u3066\u3001\u300c\u53d7\u6ce8\u767b\u9332\u300d\u3092\u884c\u3046\u305f\u3081\u306e\u7c21\u5358\u306a \u53d7\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3092\u76ee\u6307\u3057\u307e\u3059\u3002\n\n3: \u300c\u5546\u54c1\u60c5\u5831\u7ba1\u7406\u300d\u6a5f\u80fd\u306e\u5b9f\u88c5\n\u524d\u56de\u307e\u3067\u306e\u90e8\u5206\u3067 \u300c\u9867\u5ba2\u60c5\u5831\u7ba1\u7406\u300d \u6a5f\u80fd\u306e\u5b9f\u88c5\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\n\u540c\u3058\u8981\u9818\u3067 \u300c\u5546\u54c1\u60c5\u5831\u7ba1\u7406\u300d \u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304f\u3068\u3068\u3082\u306b\u3001Home \u30da\u30fc\u30b8\u304c  \u300cHello World\u300d \u306e\u307e\u307e\u306a\u306e\u3067\u3053\u308c\u3092\u4fee\u6b63\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u624b\u9806 3-1: \u30d5\u30a1\u30a4\u30eb app/controllers/Application.scala \u3092\u7de8\u96c6\u3057\u307e\u3059\n\napp/controllers/Application.scala\npackage controllers\n\nimport play.api._\nimport play.api.mvc._\n\nobject Application extends Controller {\n\n  def index = Action {\n    Ok(views.html.index())\n  }\n\n}\n\n\n\n\n\u624b\u9806 3-2: \u30d5\u30a1\u30a4\u30eb app/views/index.scala.html \u3092\u7de8\u96c6\u3057\u307e\u3059\n\napp/views/index.scala.html\n@main(title = \"\u53d7\u767a\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\") {\n\n<!-- \u30d8\u30c3\u30c0\u30fc -->\n@header()\n\n<div class=\"row\">\n  <div class=\"container\">\n    <!-- \u30b3\u30f3\u30c6\u30f3\u30c4 -->\n    <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n      <ul class=\"nav nav-tabs nav-stacked\">\n        <li><h2>\u9867\u5ba2\u60c5\u5831\u7ba1\u7406</h2></a></li>\n        <li><a href=\"/customers/search\"><h2>\u9867\u5ba2\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\uff09</h2></a></li>\n        <li><a href=\"/customers/create\"><h2>\u9867\u5ba2\u60c5\u5831\u767b\u9332</h2></a></li>\n        <li><h2>\u5546\u54c1\u60c5\u5831\u7ba1\u7406</h2></a></li>\n        <li><a href=\"/items/search\"><h2>\u5546\u54c1\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\uff09</h2></a></li>\n        <li><a href=\"/items/create\"><h2>\u5546\u54c1\u60c5\u5831\u767b\u9332</h2></a></li>\n        <li><h2>\u53d7\u6ce8\u7ba1\u7406</h2></a></li>\n        <li><a href=\"/orderings/search\"><h2>\u53d7\u6ce8\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u524a\u9664\uff09</h2></a></li>\n        <li><a href=\"/orderings/create\"><h2>\u53d7\u6ce8\u767b\u9332</h2></a></li>\n      </ul>\n    </div>\n  </div>\n</div>\n}\n\n\n\n\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u306b\u306f\u3001\u5404\u753b\u9762\u3078\u306e\u30ea\u30f3\u30af\u306e\u4e00\u89a7\u3092\u8868\u793a\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n\u624b\u9806 3-3: \u30d5\u30a1\u30a4\u30eb app/views/header.scala.html \u3092\u7de8\u96c6\u3057\u307e\u3059\n\napp/views/header.scala.html\n<div class=\"navbar navbar-inverse navbar-static-top\">\n  <div class=\"container\">\n    <div class=\"navbar-header\">\n      <a class=\"navbar-brand\" href=\"/\">\u53d7\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0</a>\n      <button type=\"button\" class=\"navbar-toggle\" data-toggle=\"collapse\" data-target=\".navbar-collapse\">\n        <span class=\"sr-only\">Toggle navigation</span>\n        <span class=\"icon-bar\"></span>\n        <span class=\"icon-bar\"></span>\n        <span class=\"icon-bar\"></span>\n      </button>\n    </div>\n    <div class=\"navbar-collapse collapse\">\n      <ul class=\"nav navbar-nav\" role=\"menu\">\n        <li class=\"dropdown\"><a class=\"dropdown-toggle\" data-toggle=\"dropdown\">\u9867\u5ba2\u60c5\u5831\u7ba1\u7406</a>\n          <ul class=\"dropdown-menu\">\n            <li><a role=\"menuitem\" href=\"/customers/search\">\u9867\u5ba2\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\uff09</a></li>\n            <li><a role=\"menuitem\" href=\"/customers/create\">\u9867\u5ba2\u60c5\u5831\u767b\u9332</a></li>\n          </ul>\n        </li>\n        <li class=\"dropdown\"><a class=\"dropdown-toggle\" data-toggle=\"dropdown\">\u5546\u54c1\u60c5\u5831\u7ba1\u7406</a>\n          <ul class=\"dropdown-menu\">\n            <li><a href=\"/items/search\">\u5546\u54c1\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\uff09</a></li>\n            <li><a href=\"/items/create\">\u5546\u54c1\u60c5\u5831\u767b\u9332</a></li>\n          </ul>\n        </li>\n        <li class=\"dropdown\"><a class=\"dropdown-toggle\" data-toggle=\"dropdown\">\u53d7\u6ce8\u7ba1\u7406</a>\n          <ul class=\"dropdown-menu\">\n            <li><a href=\"/orderings/search\">\u53d7\u6ce8\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u524a\u9664\uff09</a></li>\n            <li><a href=\"/orderings/create\">\u53d7\u6ce8\u767b\u9332</a></li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n\n\n\n\u30d8\u30c3\u30c0\u30fc\u90e8\u5206\u306e\u30e1\u30cb\u30e5\u30fc\u306b\u300c\u5546\u54c1\u60c5\u5831\u7ba1\u7406\u300d\u6a5f\u80fd\u3001\u300c\u53d7\u6ce8\u7ba1\u7406\u300d\u6a5f\u80fd\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\u624b\u9806 3-4: \u30d6\u30e9\u30a6\u30b6\u3067\u3001http://localhost:9000/ \u306b\u30a2\u30af\u30bb\u30b9\u3057\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u304b\u3081\u307e\u3059\n\n\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u304c\u51fa\u6765\u4e0a\u304c\u308a\u307e\u3057\u305f\u3002\u7d9a\u3044\u3066 \u300c\u5546\u54c1\u60c5\u5831\u7ba1\u7406\u300d \u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u624b\u9806 3-5: \u30d5\u30a1\u30a4\u30eb conf/route \u3092\u7de8\u96c6\u3057\u307e\u3059\n\nconf/route\n# Routes\n# This file defines all application routes (Higher priority routes first)\n# ~~~~\n\n# Home page\nGET     /                           controllers.Application.index\n\n# Map static resources from the /public folder to the /assets URL path\nGET     /assets/*file               controllers.Assets.at(path=\"/public\", file)\n\n#\n# Customers Management\n#\n\n# Create customer infomation.\nGET     /customers/create           controllers.CustomerController.showCreateForm()\nPOST    /customers/create           controllers.CustomerController.create()\n\n# Search customer infomation.\nGET     /customers/search           controllers.CustomerController.search(word: String ?= \"\")\n\n# Update customer infomation.\nGET     /customers/:id/update       controllers.CustomerController.showUpdateForm(id: Long)\nPOST    /customers/:id/update       controllers.CustomerController.update(id: Long)\n\n# Remove customer infomation\nGET     /customers/:id/remove       controllers.CustomerController.remove(id: Long)\n\n#\n# Items Management\n#\n\n# Create item infomation.\nGET     /items/create               controllers.ItemController.showCreateForm()\nPOST    /items/create               controllers.ItemController.create()\n\n# Search item infomation.\nGET     /items/search               controllers.ItemController.search(word: String ?= \"\")\n\n# Update item infomation.\nGET     /items/:id/update           controllers.ItemController.showUpdateForm(id: Long)\nPOST    /items/:id/update           controllers.ItemController.update(id: Long)\n\n# Remove item infomation.\nGET     /items/:id/remove           controllers.ItemController.remove(id: Long)\n\n\n\n\n\u624b\u9806 3-6: \u30d5\u30a1\u30a4\u30eb app/models/Item.scala \u3092\u7de8\u96c6\u3057\u307e\u3059\n\napp/models/Item.scala\npackage models\n\nimport play.api.db.slick.Config.driver.simple._\n\n/**\n * DTO \u306e\u5b9a\u7fa9\n */\ncase class Item(ID: Long, name: String, price: Long, comment: String)\n\n/**\n * \u30c6\u30fc\u30d6\u30eb\u306e\u5b9a\u7fa9\n */\nclass ItemTable(tag: Tag) extends Table[Item](tag, \"items\") {\n  def ID = column[Long](\"id\", O.PrimaryKey, O.AutoInc)\n  def name = column[String](\"name\", O.NotNull)\n  def price = column[Long](\"price\", O.NotNull)\n  def comment = column[String](\"comment\", O.NotNull)\n  def * = (ID, name, price, comment) <> (Item.tupled, Item.unapply)\n}\n\n/**\n * DAO \u306e\u5b9a\u7fa9\n */\nobject ItemDAO {\n  lazy val itemQuery = TableQuery[ItemTable]\n\n  /**\n   * \u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22\n   * @param word\n   */\n  def search(word: String)(implicit s: Session): List[Item] = {\n    itemQuery.filter(row => (row.name like \"%\"+word+\"%\") || (row.comment like \"%\"+word+\"%\")).list\n  }\n\n  /**\n   * ID\u691c\u7d22\n   * @param ID\n   */\n  def searchByID(ID: Long)(implicit s: Session): Item = {\n    itemQuery.filter(_.ID === ID).first\n  }\n\n  /**\n   * \u4f5c\u6210\n   * @param item\n   */\n  def create(item: Item)(implicit s: Session) {\n    itemQuery.insert(item)\n  }\n\n  /**\n   * \u66f4\u65b0\n   * @param item\n   */\n  def update(item: Item)(implicit s: Session) {\n    itemQuery.filter(_.ID === item.ID).update(item)\n  }\n\n  /**\n   * \u524a\u9664\n   * @param item\n   */\n  def remove(item: Item)(implicit s: Session) {\n    itemQuery.filter(_.ID === item.ID).delete\n  }\n}\n\n\n\n\n\u624b\u9806 3-7: \u30d5\u30a1\u30a4\u30eb app/controllers/ItemController.scala \u3092\u7de8\u96c6\u3057\u307e\u3059\n\napp/controllers/ItemController.scala\npackage controllers\n\n/**\n * \u2460 \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\n */\nimport play.api._\nimport play.api.mvc._\n\nimport play.api.data._\nimport play.api.data.Forms._\n\nimport play.api.db.slick._\nimport models._\n\n/**\n * \u2461 \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5b9a\u7fa9\n */\nobject CustomerController extends Controller {\n\n  /**\n   * \u2462 HTTP \u30d5\u30a9\u30fc\u30e0\u30c7\u30fc\u30bf\u306e\u5b9a\u7fa9\n   */\n  val customerForm = Form(\n    mapping(\n      \"ID\" -> longNumber,\n      \"name\" ->  nonEmptyText(maxLength = 140),\n      \"email\" ->  nonEmptyText(maxLength = 140),\n      \"tel\" ->  nonEmptyText(maxLength = 140),\n      \"address\" ->  nonEmptyText(maxLength = 140),\n      \"comment\" -> text(maxLength = 140)\n    )(Customer.apply)(Customer.unapply)\n  )\n\n  /**\n   * \u2463 \u9867\u5ba2\u60c5\u5831\u767b\u9332\u30d5\u30a9\u30fc\u30e0\u8868\u793a\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def showCreateForm() = Action { request =>\n    Ok(views.html.customerCreateForm(customerForm))\n  }\n\n  /**\n   * \u2464 \u9867\u5ba2\u60c5\u5831\u767b\u9332\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def create() = DBAction { implicit rs =>\n    customerForm.bindFromRequest.fold(\n      errors => BadRequest(views.html.customerCreateForm(errors)),\n      customer => {\n        CustomerDAO.create(customer)\n        Redirect(routes.CustomerController.search())\n      }\n    )\n  }\n\n  /**\n   * \u2465 \u9867\u5ba2\u60c5\u5831\u691c\u7d22\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def search(word: String) = DBAction { implicit rs =>\n    Ok(views.html.customerSearch(word, CustomerDAO.search(word)))\n  }\n\n  /**\n   * \u2466 \u9867\u5ba2\u60c5\u5831\u66f4\u65b0\u30d5\u30a9\u30fc\u30e0\u8868\u793a\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def showUpdateForm(ID: Long) = DBAction { implicit rs =>\n    Ok(views.html.customerUpdateForm(ID, customerForm.fill(CustomerDAO.searchByID(ID))))\n  }\n\n  /**\n   * \u2467 \u9867\u5ba2\u60c5\u5831\u66f4\u65b0\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def update(ID: Long) = DBAction { implicit rs =>\n    customerForm.bindFromRequest.fold(\n      errors => BadRequest(views.html.customerUpdateForm(ID, errors)),\n      customer => {\n        CustomerDAO.update(customer)\n        Redirect(routes.CustomerController.search())\n      }\n    )\n  }\n\n  /**\n   * \u2468 \u9867\u5ba2\u60c5\u5831\u524a\u9664\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def remove(ID: Long) = DBAction { implicit rs =>\n    CustomerDAO.remove(CustomerDAO.searchByID(ID))\n    Redirect(routes.CustomerController.search())\n  }\n}\n\n\n\n\n\u624b\u9806 3-8: \u30d5\u30a1\u30a4\u30eb app/views/itemCreateForm.scala.html \u3092\u7de8\u96c6\u3057\u307e\u3059\n\napp/views/itemCreateForm.scala.html\n@(itemForm: Form[Item])\n\n@import helper._\n\n@main(title = \"\u53d7\u767a\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 - \u5546\u54c1\u60c5\u5831\u767b\u9332\") {\n\n<!-- \u30d8\u30c3\u30c0\u30fc -->\n@header()\n\n<div class=\"row\">\n  <div class=\"container\">\n\n    <!-- \u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc -->\n    <div class=\"hidden-xs col-sm-3 col-md-3 col-lg-3\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <ul class=\"nav nav-pills nav-stacked\">\n            <li><a href=\"/items/search\">\u5546\u54c1\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\uff09</a></li>\n            <li><a href=\"/items/create\">\u5546\u54c1\u60c5\u5831\u767b\u9332</a></li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    <!-- \u30b3\u30f3\u30c6\u30f3\u30c4 -->\n    <div class=\"col-xs-12 col-sm-9 col-md-9 col-lg-9\">\n      <div class=\"row\">\n\n        <!-- \u898b\u51fa\u3057 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <h1>\u5546\u54c1\u60c5\u5831\u767b\u9332</h1>\n        </div>\n\n        <!-- \u30d5\u30a9\u30fc\u30e0 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          @form(routes.ItemController.create()) {\n            <fieldset>\n              <input type=\"hidden\" name=\"ID\" value=\"0\">\n              @inputText(itemForm(\"name\"), '_label -> \"\u5546\u54c1\u540d\", 'size -> 30)\n              @inputText(itemForm(\"price\"), '_label -> \"\u5546\u54c1\u4fa1\u683c\", 'size -> 30)\n              @inputText(itemForm(\"comment\"), '_label -> \"\u5099\u8003\", 'size -> 30)\n            </fieldset>\n            <div class=\"actions\">\n              <input type=\"submit\" class=\"btn btn-primary\">\n              <a href=\"/items/search\" class=\"btn btn-danger\">\u30ad\u30e3\u30f3\u30bb\u30eb</a>\n            </div>\n          }\n        </div>\n      </div>\n    </div>\n </div>\n}\n\n\n\n\n\u624b\u9806 3-9: \u30d5\u30a1\u30a4\u30eb app/views/itemSearch.scala.html \u3092\u7de8\u96c6\u3057\u307e\u3059\n\napp/views/itemSearch.scala.html\n@(word: String, items: List[Item])\n\n@main(title = \"\u53d7\u767a\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 - \u5546\u54c1\u60c5\u5831\u4e00\u89a7\") {\n\n<!-- \u30d8\u30c3\u30c0\u30fc -->\n@header()\n\n<div class=\"row\">\n  <div class=\"container\">\n\n    <!-- \u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc -->\n    <div class=\"hidden-xs col-sm-3 col-md-3 col-lg-3\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <ul class=\"nav nav-pills nav-stacked\">\n            <li><a href=\"/items/search\">\u5546\u54c1\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\uff09</a></li>\n            <li><a href=\"/items/create\">\u5546\u54c1\u60c5\u5831\u767b\u9332</a></li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    <!-- \u30b3\u30f3\u30c6\u30f3\u30c4 -->\n    <div class=\"col-xs-12 col-sm-9 col-md-9 col-lg-9\">\n      <div class=\"row\">\n\n        <!-- \u898b\u51fa\u3057 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <h1>\u5546\u54c1\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\uff09</h1> \n        </div>\n\n        <!-- \u691c\u7d22\u30d5\u30a9\u30fc\u30e0 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n        @helper.form(action=routes.ItemController.search()) {\n          <input type=\"search\" name=\"word\" value=\"@word\">\n          <input type=\"submit\" value=\"\u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22\" class=\"byn btn-primary\">\n        }\n        </div>\n\n        <!-- \u30c6\u30fc\u30d6\u30eb -->\n        <div class=\"table-responsive col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <table class=\"table table-bordered table-striped \">\n            <thead>\n              <tr>\n                <th>\u5546\u54c1\u756a\u53f7</th>\n                <th>\u5546\u54c1\u540d</th>\n                <th>\u5546\u54c1\u4fa1\u683c</th>\n                <th>\u5099\u8003</th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>\n            @items.map { item =>\n              <tr>\n                <td align=\"right\">@(\"%3d\".format(item.ID))</td>\n                <td>@item.name</td>\n                <td align=\"right\">@(\"%,d\".format(item.price))</td>\n                <td>@item.comment</td>\n                <td align=\"center\">\n                  <a href=\"/items/@item.ID/update\" class=\"btn btn-primary\">\u66f4\u65b0</a>\n                  <input type=\"button\" class=\"btn btn-danger\" value=\"\u524a\u9664\" onClick='if(confirm(\"\u672c\u5f53\u306b\u524a\u9664\u3057\u3066\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f\")) {location.href=\"/items/@item.ID/remove\"}'>\n                </td>\n              </tr>\n            }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n </div>\n}\n\n\n\n\n\u624b\u9806 3-10: \u30d5\u30a1\u30a4\u30eb app/views/itemSearch.scala.html \u3092\u7de8\u96c6\u3057\u307e\u3059\n\napp/views/itemSearch.scala.html\n@(ID: Long, itemForm: Form[Item])\n\n@import helper._\n\n@main(title = \"\u53d7\u767a\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 - \u5546\u54c1\u60c5\u5831\u66f4\u65b0\") {\n\n<!-- \u30d8\u30c3\u30c0\u30fc -->\n@header()\n\n<div class=\"row\">\n  <div class=\"container\">\n\n    <!-- \u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc -->\n    <div class=\"hidden-xs col-sm-3 col-md-3 col-lg-3\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <ul class=\"nav nav-pills nav-stacked\">\n            <li><a href=\"/items/search\">\u5546\u54c1\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\uff09</a></li>\n            <li><a href=\"/items/create\">\u5546\u54c1\u60c5\u5831\u767b\u9332</a></li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    <!-- \u30b3\u30f3\u30c6\u30f3\u30c4 -->\n    <div class=\"col-xs-12 col-sm-9 col-md-9 col-lg-9\">\n      <div class=\"row\">\n\n        <!-- \u898b\u51fa\u3057 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <h1>\u5546\u54c1\u60c5\u5831\u66f4\u65b0</h1> \n        </div>\n\n        <!-- \u30d5\u30a9\u30fc\u30e0 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          @form(routes.ItemController.update(ID)) {\n            <fieldset>\n              <input type=\"hidden\" name=\"ID\" value=\"@ID\">\n              @inputText(itemForm(\"name\"), '_label -> \"\u5546\u54c1\u540d\", 'size -> 30)\n              @inputText(itemForm(\"price\"), '_label -> \"\u5546\u54c1\u4fa1\u683c\", 'size -> 30)\n              @inputText(itemForm(\"comment\"), '_label -> \"\u5099\u8003\", 'size -> 30)\n            </fieldset>\n            <div class=\"actions\">\n              <input type=\"submit\" class=\"btn btn-primary\">\n              <a href=\"/items/search\" class=\"btn btn-danger\">\u30ad\u30e3\u30f3\u30bb\u30eb</a>\n            </div>\n          }\n        </div>\n      </div>\n    </div>\n </div>\n}\n\n\n\n\n\u624b\u9806 3-11: \u30d6\u30e9\u30a6\u30b6\u3067\u3001http://localhost:9000/ \u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\n\n\u30e2\u30c7\u30eb\u5c64\u306b\u5909\u66f4\u3092\u52a0\u3048\u305f\u305f\u3081\u3001\u30c6\u30fc\u30d6\u30eb\u30b9\u30ad\u30fc\u30de\u306e\u5909\u66f4\uff08DROP TABLE \u2192 CREATE TABLE\uff09\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u624b\u9806 3-12: Apply this script now! \u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\n\u300c\u5546\u54c1\u60c5\u5831\u7ba1\u7406\u300d\u6a5f\u80fd\u304c\u5b9f\u88c5\u3067\u304d\u307e\u3057\u305f\u3002\n\n\u5546\u54c1\u60c5\u5831\u767b\u9332\n\n\n\u5546\u54c1\u60c5\u5831\u4e00\u89a7\n\n\n\u5546\u54c1\u60c5\u5831\u66f4\u65b0\n\n\n4: Slick \u3092\u4f7f\u3063\u305f \"\u5916\u90e8\u30ad\u30fc\u306e\u8a2d\u5b9a\" \u3068 \"\u30c6\u30fc\u30d6\u30eb\u306e\u7d50\u5408\"\n\u300c\u53d7\u6ce8\u7ba1\u7406\u300d\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u300c\u53d7\u6ce8\u7ba1\u7406\u300d\u6a5f\u80fd\u3067\u306f\u3001\u53d7\u6ce8\u30c6\u30fc\u30d6\u30eb \u4e0a\u306b \u9867\u5ba2\u30c6\u30fc\u30d6\u30eb\u3001\u5546\u54c1\u30c6\u30fc\u30d6\u30eb \u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e \u201d\u5916\u90e8\u30ad\u30fc\u306e\u8a2d\u5b9a\" \u3092\u3057\u305f\u308a\u3001\u60c5\u5831\u3092\u53c2\u7167\u3059\u308b\u969b\u306b \"\u30c6\u30fc\u30d6\u30eb\u306e\u7d50\u5408\" \u3092\u3057\u305f\u308a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001Slick \u3092\u4f7f\u3063\u3066\u3001\u3053\u308c\u3089\u3092\u3069\u3046\u5b9f\u88c5\u3059\u308b\u304b\u3092\u4e2d\u5fc3\u306b\u8aac\u660e\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u624b\u9806 4-1: \u30d5\u30a1\u30a4\u30eb conf/route \u3092\u7de8\u96c6\u3057\u307e\u3059\n\nconf/route\n# Routes\n# This file defines all application routes (Higher priority routes first)\n# ~~~~\n\n# Home page\nGET     /                           controllers.Application.index\n\n# Map static resources from the /public folder to the /assets URL path\nGET     /assets/*file               controllers.Assets.at(path=\"/public\", file)\n\n#\n# Customers Management\n#\n\n# Create customer infomation.\nGET     /customers/create           controllers.CustomerController.showCreateForm()\nPOST    /customers/create           controllers.CustomerController.create()\n\n# Search customer infomation.\nGET     /customers/search           controllers.CustomerController.search(word: String ?= \"\")\n\n# Update customer infomation.\nGET     /customers/:id/update       controllers.CustomerController.showUpdateForm(id: Long)\nPOST    /customers/:id/update       controllers.CustomerController.update(id: Long)\n\n# Remove customer infomation\nGET     /customers/:id/remove       controllers.CustomerController.remove(id: Long)\n\n#\n# Items Management\n#\n\n# Create item infomation.\nGET     /items/create               controllers.ItemController.showCreateForm()\nPOST    /items/create               controllers.ItemController.create()\n\n# Search item infomation.\nGET     /items/search               controllers.ItemController.search(word: String ?= \"\")\n\n# Update item infomation.\nGET     /items/:id/update           controllers.ItemController.showUpdateForm(id: Long)\nPOST    /items/:id/update           controllers.ItemController.update(id: Long)\n\n# Remove item infomation.\nGET     /items/:id/remove           controllers.ItemController.remove(id: Long)\n\n#\n# Orderings Management\n#\n\n# Create ordering infomation.\nGET     /orderings/create           controllers.OrderingController.showCreateForm()\nPOST    /orderings/create           controllers.OrderingController.create()\n\n# Search ordering infomation.\nGET     /orderings/search           controllers.OrderingController.search(word: String ?= \"\")\n\n# Remove ordering infomation.\nGET     /orderings/:id/remove       controllers.OrderingController.remove(id: Long)\n\n\n\n\n\u624b\u9806 4-2: \u30d5\u30a1\u30a4\u30eb app/models/Ordering.scala \u3092\u4f5c\u6210\u3057\u307e\u3059\n\napp/models/Ordering.scala\npackage models\n\n/**\n * Slick \u95a2\u9023\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\n */\nimport play.api.db.slick.Config.driver.simple._\n\n/**\n * DTO \u306e\u5b9a\u7fa9\n */\ncase class Ordering(ID: Long, createdAt: Long, customerID: Long, itemID: Long, itemCount: Long, comment: String)\n\n/**\n * \u30c6\u30fc\u30d6\u30eb\u306e\u5b9a\u7fa9\n */\nclass OrderingTable(tag: Tag) extends Table[Ordering](tag, \"orderings\") {\n  def ID = column[Long](\"id\", O.PrimaryKey, O.AutoInc)\n  def createdAt = column[Long](\"created_at\", O.NotNull)\n  def customerID = column[Long](\"customer_id\", O.NotNull)\n  def itemID = column[Long](\"item_id\", O.NotNull )\n  def itemCount = column[Long](\"item_count\", O.NotNull)\n  def comment = column[String](\"commnet\", O.NotNull)\n  def * = (ID, createdAt, customerID, itemID, itemCount, comment) <> (Ordering.tupled, Ordering.unapply)\n  def customer = foreignKey(\"customer_id\", customerID, OrderingDAO.customerQuery)(_.ID)\n  def item = foreignKey(\"item_id\", itemID, OrderingDAO.itemQuery)(_.ID)\n}\n\n/**\n * DAO \u306e\u5b9a\u7fa9\n */\nobject OrderingDAO {\n\n  /**\n   * scala.slick.lifted.TableQuery \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092 3 \u3064\u4f5c\u6210\n   */  \n  lazy val customerQuery = CustomerDAO.customerQuery\n  lazy val itemQuery = ItemDAO.itemQuery\n  lazy val orderingQuery = TableQuery[OrderingTable]\n\n  /**\n   * 3 \u3064\u30c6\u30fc\u30d6\u30eb\u3092\u7d50\u5408\u3057\u305f\u4e0a\u3067\u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22\n   * @param word\n   */\n  def search(word: String)(implicit s: Session): List[(Long, Long, Long, String, String, String, String, String, Long, String, Long, String, Long, String)] = {\n    val query = for {\n      ordering <- orderingQuery\n      customer <- customerQuery.filter(_.ID === ordering.customerID)\n      item <- itemQuery.filter(_.ID === ordering.itemID)\n    } yield (ordering.ID, ordering.createdAt, customer.ID, customer.name, customer.email, customer.tel, customer.address, customer.comment, item.ID, item.name, item.price, item.comment, ordering.itemCount, ordering.comment)\n    query.filter(row => ((row._4 like \"%\"+word+\"%\") || (row._5 like \"%\"+word+\"%\") || (row._6 like \"%\"+word+\"%\") || (row._7 like \"%\"+word+\"%\") || (row._8 like \"%\"+word+\"%\") || (row._10 like \"%\"+word+\"%\") || (row._12 like \"%\"+word+\"%\") || (row._14 like \"%\"+word+\"%\"))).list\n  }\n\n  /**\n   * ID\u691c\u7d22\n   * @param ID\n   */\n  def searchByID(ID: Long)(implicit s: Session): Ordering = {\n    orderingQuery.filter(_.ID === ID).first\n  }\n\n  /**\n   * \u4f5c\u6210\n   * @param ordering\n   */\n  def create(ordering: Ordering)(implicit s: Session) {\n    orderingQuery.insert(ordering)\n  }\n\n  /**\n   * \u66f4\u65b0\n   * @param ordering\n   */\n  def update(ordering: Ordering)(implicit s: Session) {\n    orderingQuery.filter(_.ID === ordering.ID).update(ordering)\n  }\n\n  /**\n   * \u524a\u9664\n   * @param ordering\n   */\n  def remove(ordering: Ordering)(implicit s: Session) {\n    orderingQuery.filter(_.ID === ordering.ID).delete\n  }\n}\n\n\n\n\u57fa\u672c\u7684\u306b\u306f\u3001\u4ed6\u306e\u30e2\u30c7\u30eb\u5c64\u306e\u5b9f\u88c5\u3068\u540c\u3058\u3067\u3059\u306e\u3067\u3001\u7279\u5fb4\u7684\u306a\u90e8\u5206\u306e\u307f\u8aac\u660e\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u2460 \u30c6\u30fc\u30d6\u30eb\u306e\u5b9a\u7fa9\n/**\n * \u30c6\u30fc\u30d6\u30eb\u306e\u5b9a\u7fa9\n */\nclass OrderingTable(tag: Tag) extends Table[Ordering](tag, \"orderings\") {\n  def ID = column[Long](\"id\", O.PrimaryKey, O.AutoInc)\n  def createdAt = column[Long](\"created_at\", O.NotNull)\n  def customerID = column[Long](\"customer_id\", O.NotNull)\n  def itemID = column[Long](\"item_id\", O.NotNull )\n  def itemCount = column[Long](\"item_count\", O.NotNull)\n  def comment = column[String](\"commnet\", O.NotNull)\n  def * = (ID, createdAt, customerID, itemID, itemCount, comment) <> (Ordering.tupled, Ordering.unapply)\n  def customer = foreignKey(\"customer_id\", customerID, OrderingDAO.customerQuery)(_.ID)\n  def item = foreignKey(\"item_id\", itemID, OrderingDAO.itemQuery)(_.ID)\n}\n\n\u6700\u5f8c\u306e 2 \u884c\u3067\u3001\u5916\u90e8\u30ad\u30fc\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u306f Table \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e foreignKey \u95a2\u6570\u3092\u7528\u3044\u3066\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n\u2461 scala.slick.lifted.TableQuery \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092 3 \u3064\u4f5c\u6210\n \uff1a\n\u4e2d\u7565\n \uff1a\n/**\n * DAO \u306e\u5b9a\u7fa9\n */\nobject OrderingDAO {\n\n  /**\n   * scala.slick.lifted.TableQuery \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092 3 \u3064\u4f5c\u6210\n   */  \n  lazy val customerQuery = CustomerDAO.customerQuery\n  lazy val itemQuery = ItemDAO.itemQuery\n  lazy val orderingQuery = TableQuery[OrderingTable]\n \uff1a\n\u4e2d\u7565\n \uff1a\n\nscala.slick.lifted.TableQuery \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092 3 \u3064\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u3001\u8907\u6570\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u307e\u305f\u304c\u3063\u305f\u30af\u30a8\u30ea\u30fc\u3092\u751f\u6210\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u2462 3 \u3064\u30c6\u30fc\u30d6\u30eb\u3092\u7d50\u5408\u3057\u305f\u4e0a\u3067\u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22\n  /**\n   * 3 \u3064\u30c6\u30fc\u30d6\u30eb\u3092\u7d50\u5408\u3057\u305f\u4e0a\u3067\u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22\n   * @param word\n   */\n  def search(word: String)(implicit s: Session): List[(Long, Long, Long, String, String, String, String, String, Long, String, Long, String, Long, String)] = {\n    val query = for {\n      ordering <- orderingQuery\n      customer <- customerQuery.filter(_.ID === ordering.customerID)\n      item <- itemQuery.filter(_.ID === ordering.itemID)\n    } yield (ordering.ID, ordering.createdAt, customer.ID, customer.name, customer.email, customer.tel, customer.address, customer.comment, item.ID, item.name, item.price, item.comment, ordering.itemCount, ordering.comment)\n    query.filter(row => ((row._4 like \"%\"+word+\"%\") || (row._5 like \"%\"+word+\"%\") || (row._6 like \"%\"+word+\"%\") || (row._7 like \"%\"+word+\"%\") || (row._8 like \"%\"+word+\"%\") || (row._10 like \"%\"+word+\"%\") || (row._12 like \"%\"+word+\"%\") || (row._14 like \"%\"+word+\"%\"))).list\n  }\n \uff1a\n\u4e2d\u7565\n \uff1a\n\nSlick \u3067\u306f\u3001Query \u306b\u5bfe\u3057 for \u5f0f\u3092\u7528\u3044\u3066 flatMap \u64cd\u4f5c\u3092\u884c\u3046\u3053\u3068\u3067\u30c6\u30fc\u30d6\u30eb\u306e\u7d50\u5408\uff08Join\uff09\u3092\u884c\u3044\u307e\u3059\u3002\n\u7d50\u5408\u306e\u969b\u306b if \u6587\u3092\u7528\u3044\u3066\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3092\u884c\u3046\u3053\u3068\u3067\u3001\u5185\u90e8\u7d50\u5408\uff08Inner Join\uff09\u3068\u3059\u308b\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\nSlick \u306b\u304a\u3051\u308b\u7d50\u5408\u7b49\u306e\u65b9\u6cd5\u306e\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001\u4ee5\u4e0b\u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nhttp://slick.typesafe.com/doc/2.0.0/gettingstarted.html\n\n\u624b\u9806 4-3: \u30d5\u30a1\u30a4\u30eb app/contrallers/OrderingController.scala \u3092\u4f5c\u6210\u3057\u307e\u3059\n\napp/contrallers/OrderingController.scala\npackage controllers\n\nimport play.api._\nimport play.api.mvc._\n\nimport play.api.data._\nimport play.api.data.Forms._\n\nimport play.api.db.slick._\nimport models._\n\nobject OrderingController extends Controller {\n\n  /**\n   * \u53d7\u6ce8\u60c5\u5831\u5165\u529b\u30d5\u30a9\u30fc\u30e0\u306e\u5b9a\u7fa9\n   */\n  val orderingForm = Form(\n    mapping(\n      \"ID\" -> longNumber,\n      \"createdAt\" -> longNumber,\n      \"customerID\" ->  longNumber,\n      \"itemID\" -> longNumber,\n      \"itemCount\" -> longNumber,\n      \"comment\" -> text(maxLength = 140)\n    )(Ordering.apply)(Ordering.unapply)\n  )\n\n  /**\n   * \u53d7\u6ce8\u767b\u9332\u30d5\u30a9\u30fc\u30e0\u8868\u793a\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def showCreateForm() = Action { request =>\n    Ok(views.html.orderingCreateForm(orderingForm))\n  }\n\n  /**\n   * \u53d7\u6ce8\u767b\u9332\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def create() = DBAction { implicit rs =>\n    orderingForm.bindFromRequest.fold(\n      errors => BadRequest(views.html.orderingCreateForm(errors)),\n      ordering => {\n        OrderingDAO.create(ordering)\n        Redirect(routes.OrderingController.search())\n      }\n    )\n  }\n\n  /**\n   * \u53d7\u6ce8\u60c5\u5831\u691c\u7d22\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def search(word: String) = DBAction { implicit rs =>\n    Ok(views.html.orderingSearch(word, OrderingDAO.search(word)))\n  }\n\n  /**\n   * \u53d7\u6ce8\u60c5\u5831\u524a\u9664\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def remove(ID: Long) = DBAction { implicit rs =>\n    OrderingDAO.remove(OrderingDAO.searchByID(ID))\n    Redirect(routes.OrderingController.search())\n  }\n}\n\n\n\n\n\u624b\u9806 4-4: \u30d5\u30a1\u30a4\u30eb app/views/orderingCreateForm.scala.html \u3092\u4f5c\u6210\u3057\u307e\u3059\n\napp/views/orderingCreateForm.scala.html\n@(orderingForm: Form[Ordering])\n\n@import helper._\n\n@main(title = \"\u53d7\u767a\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 - \u53d7\u6ce8\u767b\u9332\") {\n\n<!-- \u30d8\u30c3\u30c0\u30fc -->\n@header()\n\n<div class=\"row\">\n  <div class=\"container\">\n\n    <!-- \u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc -->\n    <div class=\"hidden-xs col-sm-3 col-md-3 col-lg-3\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <ul class=\"nav nav-pills nav-stacked\">\n            <li><a href=\"/orderings/search\">\u53d7\u6ce8\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u524a\u9664\uff09</a></li>\n            <li><a href=\"/orderings/create\">\u53d7\u6ce8\u767b\u9332</a></li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    <!-- \u30b3\u30f3\u30c6\u30f3\u30c4 -->\n    <div class=\"col-xs-12 col-sm-9 col-md-9 col-lg-9\">\n      <div class=\"row\">\n\n        <!-- \u898b\u51fa\u3057 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <h1>\u53d7\u6ce8\u767b\u9332</h1>\n        </div>\n\n        <!-- \u30d5\u30a9\u30fc\u30e0 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          @form(routes.OrderingController.create()) {\n            <fieldset>\n              <input type=\"hidden\" name=\"ID\" value=\"0\">\n              <input type=\"hidden\" name=\"createdAt\" value=\"@System.currentTimeMillis()\">\n              @inputText(orderingForm(\"customerID\"), '_label -> \"\u9867\u5ba2\u756a\u53f7\", 'size -> 30)\n              @inputText(orderingForm(\"itemID\"), '_label -> \"\u5546\u54c1\u756a\u53f7\", 'size -> 30)\n              @select(\n                orderingForm(\"itemCount\"),\n                options(\n                  \"1\" -> \"1\",\n                  \"2\" -> \"2\",\n                  \"3\" -> \"3\",\n                  \"4\" -> \"4\",\n                  \"5\" -> \"5\",\n                  \"6\" -> \"6\",\n                  \"7\" -> \"7\",\n                  \"8\" -> \"8\",\n                  \"9\" -> \"9\",\n                  \"10\" -> \"10\",\n                  \"11\" -> \"11\",\n                  \"12\" -> \"12\",\n                  \"13\" -> \"13\",\n                  \"14\" -> \"14\",\n                  \"15\" -> \"15\",\n                  \"16\" -> \"16\",\n                  \"17\" -> \"17\",\n                  \"18\" -> \"18\",\n                  \"19\" -> \"19\",\n                  \"20\" -> \"20\"\n                ),\n                '_label -> \"\u5546\u54c1\u500b\u6570\"\n              )\n              @inputText(orderingForm(\"comment\"), '_label -> \"\u5099\u8003\", 'size -> 30)\n            </fieldset>\n            <div class=\"actions\">\n              <input type=\"submit\" class=\"btn btn-primary\">\n              <a href=\"/orderings/search\" class=\"btn btn-danger\">\u30ad\u30e3\u30f3\u30bb\u30eb</a>\n            </div>\n          }\n        </div>\n      </div>\n    </div>\n </div>\n}\n\n\n\n\n\u624b\u9806 4-5: \u30d5\u30a1\u30a4\u30eb app/views/orderingSearch.scala.html \u3092\u4f5c\u6210\u3057\u307e\u3059\n\napp/views/orderingCreateForm.scala.html\n@(word: String, orderings: List[(Long, Long, Long, String, String, String, String, String, Long, String, Long, String, Long, String)])\n\n@import java.util.Date\n\n@main(title = \"\u53d7\u767a\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 - \u53d7\u6ce8\u60c5\u5831\u4e00\u89a7\") {\n\n<!-- \u30d8\u30c3\u30c0\u30fc -->\n@header()\n\n<div class=\"row\">\n  <div class=\"container\">\n\n    <!-- \u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc -->\n    <div class=\"hidden-xs col-sm-3 col-md-3 col-lg-3\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <ul class=\"nav nav-pills nav-stacked\">\n            <li><a href=\"/orderings/search\">\u53d7\u6ce8\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u524a\u9664\uff09</a></li>\n            <li><a href=\"/orderings/create\">\u53d7\u6ce8\u767b\u9332</a></li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    <!-- \u30b3\u30f3\u30c6\u30f3\u30c4 -->\n    <div class=\"col-xs-12 col-sm-9 col-md-9 col-lg-9\">\n      <div class=\"row\">\n\n        <!-- \u898b\u51fa\u3057 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <h1>\u53d7\u6ce8\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u524a\u9664\uff09</h1> \n        </div>\n\n        <!-- \u691c\u7d22\u30d5\u30a9\u30fc\u30e0 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n        @helper.form(action=routes.OrderingController.search()) {\n          <input type=\"search\" name=\"word\" value=\"@word\">\n          <input type=\"submit\" value=\"\u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22\" class=\"byn btn-primary\">\n        }\n        </div>\n\n        <!-- \u30c6\u30fc\u30d6\u30eb -->\n        <div class=\"table-responsive col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <table class=\"table table-bordered table-striped \">\n            <thead>\n              <tr>\n                <th>\u53d7\u6ce8\u756a\u53f7</th>\n                <th>\u53d7\u6ce8\u65e5\u6642</th>\n                <th>\u9867\u5ba2\u6c0f\u540d</th>\n                <th>\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9</th>\n                <th>\u5546\u54c1\u540d</th>\n                <th>\u5358\u4fa1</th>\n                <th>\u500b\u6570</th>\n                <th>\u5408\u8a08\u4fa1\u683c</th>\n                <th>\u5099\u8003</th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>\n            @orderings.map { ordering =>\n              <tr>\n                <td align=\"right\">@(\"%9d\".format(ordering._1))</td>\n                <td align=\"right\">@(\"%tY/%<tm/%<td %<tH:%<tM:%<tS\".format(new Date(ordering._2)))</td>\n                <td>@ordering._4</td>\n                <td>@ordering._5</td>\n                <td>@ordering._10</td>\n                <td align=\"right\">@(\"%,d\".format(ordering._11))</td>\n                <td align=\"right\">@(\"%,d\".format(ordering._13))</td>\n                <td align=\"right\">@(\"%,d\".format((ordering._11 * ordering._13)))</td>\n                <td>@ordering._14</td>\n                <td align=\"center\"><input type=\"button\" class=\"btn btn-danger\" value=\"\u524a\u9664\" onClick='if(confirm(\"\u672c\u5f53\u306b\u524a\u9664\u3057\u3066\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f\")) {location.href=\"/orderings/@ordering._1/remove\"}'></td>\n              </tr>\n            }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n </div>\n}\n\n\n\n\n\u624b\u9806 4-6: \u30d6\u30e9\u30a6\u30b6\u3067\u3001http://localhost:9000/ \u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\n\n\u518d\u3073\u30e2\u30c7\u30eb\u5c64\u306b\u5909\u66f4\u3092\u52a0\u3048\u305f\u305f\u3081\u3001\u30c6\u30fc\u30d6\u30eb\u30b9\u30ad\u30fc\u30de\u306e\u5909\u66f4\uff08DROP TABLE \u2192 CREATE TABLE\uff09\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\nCREATE TABLE \u6587\u306b\u52a0\u3048\u3066\u3001\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u3092\u4e0e\u3048\u308b\u305f\u3081\u306e ALTER TABLE \u6587\u3082\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u624b\u9806 4-7: Apply this script now! \u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\n\u300c\u53d7\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u300d \u306e\u5b8c\u6210\u3067\u3059\u3002\n\n\u53d7\u6ce8\u767b\u9332\n\n\n\u53d7\u6ce8\u60c5\u5831\u4e00\u89a7\n\n\n\u4f5c\u6210\u3057\u305f \u300c\u53d7\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u300d \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306b\u4fdd\u5b58\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nhttps://github.com/kukita/play-scala-order-management-system\n\u4ee5\u4e0a\nPlay Framework 2.3.x \u3068 Scala \u3092\u4f7f\u3063\u305f Web \u30b7\u30b9\u30c6\u30e0\u958b\u767a\u306b\u3064\u3044\u3066\u52c9\u5f37\u3057\u305f\u969b\u306e\u5185\u5bb9\u3092\u81ea\u5206\u7528\u306e\u30e1\u30e2\u3068\u3057\u3066\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\n\u3053\u306e\u8a18\u4e8b\u306f\u3001[\u3010#Play\u3011Play Framework 2.3 (Scala) \u3092\u4f7f\u3063\u305f Web \u30b7\u30b9\u30c6\u30e0\u958b\u767a\u5165\u9580](http://qiita.com/kukita/items/6326f1439abec013a479) \u306e\u7d9a\u304d\u3067\u3059\u3002\n\n\u300c\u9867\u5ba2\u60c5\u5831\u306e\u767b\u9332/\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\u300d\u3001\u300c\u5546\u54c1\u60c5\u5831\u306e\u767b\u9332/\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\u300d\u3001\u305d\u3057\u3066\u3001\u300c\u53d7\u6ce8\u767b\u9332\u300d\u3092\u884c\u3046\u305f\u3081\u306e\u7c21\u5358\u306a \u53d7\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3092\u76ee\u6307\u3057\u307e\u3059\u3002\n\n## 3: \u300c\u5546\u54c1\u60c5\u5831\u7ba1\u7406\u300d\u6a5f\u80fd\u306e\u5b9f\u88c5\n\n\u524d\u56de\u307e\u3067\u306e\u90e8\u5206\u3067 \u300c\u9867\u5ba2\u60c5\u5831\u7ba1\u7406\u300d \u6a5f\u80fd\u306e\u5b9f\u88c5\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\n\n\u540c\u3058\u8981\u9818\u3067 \u300c\u5546\u54c1\u60c5\u5831\u7ba1\u7406\u300d \u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304f\u3068\u3068\u3082\u306b\u3001Home \u30da\u30fc\u30b8\u304c  \u300cHello World\u300d \u306e\u307e\u307e\u306a\u306e\u3067\u3053\u308c\u3092\u4fee\u6b63\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n### \u624b\u9806 3-1: \u30d5\u30a1\u30a4\u30eb `app/controllers/Application.scala` \u3092\u7de8\u96c6\u3057\u307e\u3059\n\n```scala:app/controllers/Application.scala\npackage controllers\n\nimport play.api._\nimport play.api.mvc._\n\nobject Application extends Controller {\n\n  def index = Action {\n    Ok(views.html.index())\n  }\n\n}\n\n```\n\n### \u624b\u9806 3-2: \u30d5\u30a1\u30a4\u30eb `app/views/index.scala.html` \u3092\u7de8\u96c6\u3057\u307e\u3059\n\n```html:app/views/index.scala.html\n@main(title = \"\u53d7\u767a\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\") {\n \n<!-- \u30d8\u30c3\u30c0\u30fc -->\n@header()\n\n<div class=\"row\">\n  <div class=\"container\">\n    <!-- \u30b3\u30f3\u30c6\u30f3\u30c4 -->\n    <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n      <ul class=\"nav nav-tabs nav-stacked\">\n        <li><h2>\u9867\u5ba2\u60c5\u5831\u7ba1\u7406</h2></a></li>\n        <li><a href=\"/customers/search\"><h2>\u9867\u5ba2\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\uff09</h2></a></li>\n        <li><a href=\"/customers/create\"><h2>\u9867\u5ba2\u60c5\u5831\u767b\u9332</h2></a></li>\n        <li><h2>\u5546\u54c1\u60c5\u5831\u7ba1\u7406</h2></a></li>\n        <li><a href=\"/items/search\"><h2>\u5546\u54c1\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\uff09</h2></a></li>\n        <li><a href=\"/items/create\"><h2>\u5546\u54c1\u60c5\u5831\u767b\u9332</h2></a></li>\n        <li><h2>\u53d7\u6ce8\u7ba1\u7406</h2></a></li>\n        <li><a href=\"/orderings/search\"><h2>\u53d7\u6ce8\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u524a\u9664\uff09</h2></a></li>\n        <li><a href=\"/orderings/create\"><h2>\u53d7\u6ce8\u767b\u9332</h2></a></li>\n      </ul>\n    </div>\n  </div>\n</div>\n}\n\n```\n\n\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u306b\u306f\u3001\u5404\u753b\u9762\u3078\u306e\u30ea\u30f3\u30af\u306e\u4e00\u89a7\u3092\u8868\u793a\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n### \u624b\u9806 3-3: \u30d5\u30a1\u30a4\u30eb `app/views/header.scala.html` \u3092\u7de8\u96c6\u3057\u307e\u3059\n\n```html:app/views/header.scala.html\n<div class=\"navbar navbar-inverse navbar-static-top\">\n  <div class=\"container\">\n    <div class=\"navbar-header\">\n      <a class=\"navbar-brand\" href=\"/\">\u53d7\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0</a>\n      <button type=\"button\" class=\"navbar-toggle\" data-toggle=\"collapse\" data-target=\".navbar-collapse\">\n        <span class=\"sr-only\">Toggle navigation</span>\n        <span class=\"icon-bar\"></span>\n        <span class=\"icon-bar\"></span>\n        <span class=\"icon-bar\"></span>\n      </button>\n    </div>\n    <div class=\"navbar-collapse collapse\">\n      <ul class=\"nav navbar-nav\" role=\"menu\">\n        <li class=\"dropdown\"><a class=\"dropdown-toggle\" data-toggle=\"dropdown\">\u9867\u5ba2\u60c5\u5831\u7ba1\u7406</a>\n          <ul class=\"dropdown-menu\">\n            <li><a role=\"menuitem\" href=\"/customers/search\">\u9867\u5ba2\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\uff09</a></li>\n            <li><a role=\"menuitem\" href=\"/customers/create\">\u9867\u5ba2\u60c5\u5831\u767b\u9332</a></li>\n          </ul>\n        </li>\n        <li class=\"dropdown\"><a class=\"dropdown-toggle\" data-toggle=\"dropdown\">\u5546\u54c1\u60c5\u5831\u7ba1\u7406</a>\n          <ul class=\"dropdown-menu\">\n            <li><a href=\"/items/search\">\u5546\u54c1\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\uff09</a></li>\n            <li><a href=\"/items/create\">\u5546\u54c1\u60c5\u5831\u767b\u9332</a></li>\n          </ul>\n        </li>\n        <li class=\"dropdown\"><a class=\"dropdown-toggle\" data-toggle=\"dropdown\">\u53d7\u6ce8\u7ba1\u7406</a>\n          <ul class=\"dropdown-menu\">\n            <li><a href=\"/orderings/search\">\u53d7\u6ce8\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u524a\u9664\uff09</a></li>\n            <li><a href=\"/orderings/create\">\u53d7\u6ce8\u767b\u9332</a></li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n\n```\n\n\u30d8\u30c3\u30c0\u30fc\u90e8\u5206\u306e\u30e1\u30cb\u30e5\u30fc\u306b\u300c\u5546\u54c1\u60c5\u5831\u7ba1\u7406\u300d\u6a5f\u80fd\u3001\u300c\u53d7\u6ce8\u7ba1\u7406\u300d\u6a5f\u80fd\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n### \u624b\u9806 3-4: \u30d6\u30e9\u30a6\u30b6\u3067\u3001`http://localhost:9000/` \u306b\u30a2\u30af\u30bb\u30b9\u3057\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u304b\u3081\u307e\u3059\n\n<p><span itemscope itemtype=\"http://schema.org/Photograph\"><img src=\"http://cdn-ak.f.st-hatena.com/images/fotolife/k/kukita/20140806/20140806180215.png\" class=\"hatena-fotolife\" itemprop=\"image\"></span></p>\n\n\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u304c\u51fa\u6765\u4e0a\u304c\u308a\u307e\u3057\u305f\u3002\u7d9a\u3044\u3066 \u300c\u5546\u54c1\u60c5\u5831\u7ba1\u7406\u300d \u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n### \u624b\u9806 3-5: \u30d5\u30a1\u30a4\u30eb `conf/route` \u3092\u7de8\u96c6\u3057\u307e\u3059\n\n```scala:conf/route\n# Routes\n# This file defines all application routes (Higher priority routes first)\n# ~~~~\n\n# Home page\nGET     /                           controllers.Application.index\n\n# Map static resources from the /public folder to the /assets URL path\nGET     /assets/*file               controllers.Assets.at(path=\"/public\", file)\n\n#\n# Customers Management\n#\n\n# Create customer infomation.\nGET     /customers/create           controllers.CustomerController.showCreateForm()\nPOST    /customers/create           controllers.CustomerController.create()\n\n# Search customer infomation.\nGET     /customers/search           controllers.CustomerController.search(word: String ?= \"\")\n\n# Update customer infomation.\nGET     /customers/:id/update       controllers.CustomerController.showUpdateForm(id: Long)\nPOST    /customers/:id/update       controllers.CustomerController.update(id: Long)\n\n# Remove customer infomation\nGET     /customers/:id/remove       controllers.CustomerController.remove(id: Long)\n\n#\n# Items Management\n#\n\n# Create item infomation.\nGET     /items/create               controllers.ItemController.showCreateForm()\nPOST    /items/create               controllers.ItemController.create()\n\n# Search item infomation.\nGET     /items/search               controllers.ItemController.search(word: String ?= \"\")\n\n# Update item infomation.\nGET     /items/:id/update           controllers.ItemController.showUpdateForm(id: Long)\nPOST    /items/:id/update           controllers.ItemController.update(id: Long)\n\n# Remove item infomation.\nGET     /items/:id/remove           controllers.ItemController.remove(id: Long)\n\n```\n\n### \u624b\u9806 3-6: \u30d5\u30a1\u30a4\u30eb `app/models/Item.scala` \u3092\u7de8\u96c6\u3057\u307e\u3059\n\n```scala:app/models/Item.scala\npackage models\n\nimport play.api.db.slick.Config.driver.simple._\n\n/**\n * DTO \u306e\u5b9a\u7fa9\n */\ncase class Item(ID: Long, name: String, price: Long, comment: String)\n\n/**\n * \u30c6\u30fc\u30d6\u30eb\u306e\u5b9a\u7fa9\n */\nclass ItemTable(tag: Tag) extends Table[Item](tag, \"items\") {\n  def ID = column[Long](\"id\", O.PrimaryKey, O.AutoInc)\n  def name = column[String](\"name\", O.NotNull)\n  def price = column[Long](\"price\", O.NotNull)\n  def comment = column[String](\"comment\", O.NotNull)\n  def * = (ID, name, price, comment) <> (Item.tupled, Item.unapply)\n}\n\n/**\n * DAO \u306e\u5b9a\u7fa9\n */\nobject ItemDAO {\n  lazy val itemQuery = TableQuery[ItemTable]\n  \n  /**\n   * \u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22\n   * @param word\n   */\n  def search(word: String)(implicit s: Session): List[Item] = {\n    itemQuery.filter(row => (row.name like \"%\"+word+\"%\") || (row.comment like \"%\"+word+\"%\")).list\n  }\n  \n  /**\n   * ID\u691c\u7d22\n   * @param ID\n   */\n  def searchByID(ID: Long)(implicit s: Session): Item = {\n    itemQuery.filter(_.ID === ID).first\n  }\n  \n  /**\n   * \u4f5c\u6210\n   * @param item\n   */\n  def create(item: Item)(implicit s: Session) {\n    itemQuery.insert(item)\n  }\n  \n  /**\n   * \u66f4\u65b0\n   * @param item\n   */\n  def update(item: Item)(implicit s: Session) {\n    itemQuery.filter(_.ID === item.ID).update(item)\n  }\n  \n  /**\n   * \u524a\u9664\n   * @param item\n   */\n  def remove(item: Item)(implicit s: Session) {\n    itemQuery.filter(_.ID === item.ID).delete\n  }\n}\n\n```\n\n\n### \u624b\u9806 3-7: \u30d5\u30a1\u30a4\u30eb `app/controllers/ItemController.scala` \u3092\u7de8\u96c6\u3057\u307e\u3059\n\n```scala:app/controllers/ItemController.scala\npackage controllers\n\n/**\n * \u2460 \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\n */\nimport play.api._\nimport play.api.mvc._\n\nimport play.api.data._\nimport play.api.data.Forms._\n\nimport play.api.db.slick._\nimport models._\n\n/**\n * \u2461 \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5b9a\u7fa9\n */\nobject CustomerController extends Controller {\n\n  /**\n   * \u2462 HTTP \u30d5\u30a9\u30fc\u30e0\u30c7\u30fc\u30bf\u306e\u5b9a\u7fa9\n   */\n  val customerForm = Form(\n    mapping(\n      \"ID\" -> longNumber,\n      \"name\" ->  nonEmptyText(maxLength = 140),\n      \"email\" ->  nonEmptyText(maxLength = 140),\n      \"tel\" ->  nonEmptyText(maxLength = 140),\n      \"address\" ->  nonEmptyText(maxLength = 140),\n      \"comment\" -> text(maxLength = 140)\n    )(Customer.apply)(Customer.unapply)\n  )\n  \n  /**\n   * \u2463 \u9867\u5ba2\u60c5\u5831\u767b\u9332\u30d5\u30a9\u30fc\u30e0\u8868\u793a\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def showCreateForm() = Action { request =>\n    Ok(views.html.customerCreateForm(customerForm))\n  }\n  \n  /**\n   * \u2464 \u9867\u5ba2\u60c5\u5831\u767b\u9332\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def create() = DBAction { implicit rs =>\n    customerForm.bindFromRequest.fold(\n      errors => BadRequest(views.html.customerCreateForm(errors)),\n      customer => {\n        CustomerDAO.create(customer)\n        Redirect(routes.CustomerController.search())\n      }\n    )\n  }\n  \n  /**\n   * \u2465 \u9867\u5ba2\u60c5\u5831\u691c\u7d22\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def search(word: String) = DBAction { implicit rs =>\n    Ok(views.html.customerSearch(word, CustomerDAO.search(word)))\n  }\n  \n  /**\n   * \u2466 \u9867\u5ba2\u60c5\u5831\u66f4\u65b0\u30d5\u30a9\u30fc\u30e0\u8868\u793a\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def showUpdateForm(ID: Long) = DBAction { implicit rs =>\n    Ok(views.html.customerUpdateForm(ID, customerForm.fill(CustomerDAO.searchByID(ID))))\n  }\n\n  /**\n   * \u2467 \u9867\u5ba2\u60c5\u5831\u66f4\u65b0\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def update(ID: Long) = DBAction { implicit rs =>\n    customerForm.bindFromRequest.fold(\n      errors => BadRequest(views.html.customerUpdateForm(ID, errors)),\n      customer => {\n        CustomerDAO.update(customer)\n        Redirect(routes.CustomerController.search())\n      }\n    )\n  }\n\n  /**\n   * \u2468 \u9867\u5ba2\u60c5\u5831\u524a\u9664\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def remove(ID: Long) = DBAction { implicit rs =>\n    CustomerDAO.remove(CustomerDAO.searchByID(ID))\n    Redirect(routes.CustomerController.search())\n  }\n}\n\n```\n\n### \u624b\u9806 3-8: \u30d5\u30a1\u30a4\u30eb `app/views/itemCreateForm.scala.html` \u3092\u7de8\u96c6\u3057\u307e\u3059\n\n```html:app/views/itemCreateForm.scala.html\n@(itemForm: Form[Item])\n\n@import helper._\n\n@main(title = \"\u53d7\u767a\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 - \u5546\u54c1\u60c5\u5831\u767b\u9332\") {\n\n<!-- \u30d8\u30c3\u30c0\u30fc -->\n@header()\n\n<div class=\"row\">\n  <div class=\"container\">\n  \n    <!-- \u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc -->\n    <div class=\"hidden-xs col-sm-3 col-md-3 col-lg-3\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <ul class=\"nav nav-pills nav-stacked\">\n            <li><a href=\"/items/search\">\u5546\u54c1\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\uff09</a></li>\n            <li><a href=\"/items/create\">\u5546\u54c1\u60c5\u5831\u767b\u9332</a></li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    \n    <!-- \u30b3\u30f3\u30c6\u30f3\u30c4 -->\n    <div class=\"col-xs-12 col-sm-9 col-md-9 col-lg-9\">\n      <div class=\"row\">\n      \n        <!-- \u898b\u51fa\u3057 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <h1>\u5546\u54c1\u60c5\u5831\u767b\u9332</h1>\n        </div>\n        \n        <!-- \u30d5\u30a9\u30fc\u30e0 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          @form(routes.ItemController.create()) {\n            <fieldset>\n              <input type=\"hidden\" name=\"ID\" value=\"0\">\n              @inputText(itemForm(\"name\"), '_label -> \"\u5546\u54c1\u540d\", 'size -> 30)\n              @inputText(itemForm(\"price\"), '_label -> \"\u5546\u54c1\u4fa1\u683c\", 'size -> 30)\n              @inputText(itemForm(\"comment\"), '_label -> \"\u5099\u8003\", 'size -> 30)\n            </fieldset>\n            <div class=\"actions\">\n              <input type=\"submit\" class=\"btn btn-primary\">\n              <a href=\"/items/search\" class=\"btn btn-danger\">\u30ad\u30e3\u30f3\u30bb\u30eb</a>\n            </div>\n          }\n        </div>\n      </div>\n    </div>\n </div>\n}\n\n```\n\n### \u624b\u9806 3-9: \u30d5\u30a1\u30a4\u30eb `app/views/itemSearch.scala.html` \u3092\u7de8\u96c6\u3057\u307e\u3059\n\n```html:app/views/itemSearch.scala.html\n@(word: String, items: List[Item])\n\n@main(title = \"\u53d7\u767a\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 - \u5546\u54c1\u60c5\u5831\u4e00\u89a7\") {\n \n<!-- \u30d8\u30c3\u30c0\u30fc -->\n@header()\n\n<div class=\"row\">\n  <div class=\"container\">\n  \n    <!-- \u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc -->\n    <div class=\"hidden-xs col-sm-3 col-md-3 col-lg-3\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <ul class=\"nav nav-pills nav-stacked\">\n            <li><a href=\"/items/search\">\u5546\u54c1\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\uff09</a></li>\n            <li><a href=\"/items/create\">\u5546\u54c1\u60c5\u5831\u767b\u9332</a></li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    \n    <!-- \u30b3\u30f3\u30c6\u30f3\u30c4 -->\n    <div class=\"col-xs-12 col-sm-9 col-md-9 col-lg-9\">\n      <div class=\"row\">\n        \n        <!-- \u898b\u51fa\u3057 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <h1>\u5546\u54c1\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\uff09</h1> \n        </div>\n        \n        <!-- \u691c\u7d22\u30d5\u30a9\u30fc\u30e0 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n        @helper.form(action=routes.ItemController.search()) {\n          <input type=\"search\" name=\"word\" value=\"@word\">\n          <input type=\"submit\" value=\"\u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22\" class=\"byn btn-primary\">\n        }\n        </div>\n        \n        <!-- \u30c6\u30fc\u30d6\u30eb -->\n        <div class=\"table-responsive col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <table class=\"table table-bordered table-striped \">\n            <thead>\n              <tr>\n                <th>\u5546\u54c1\u756a\u53f7</th>\n                <th>\u5546\u54c1\u540d</th>\n                <th>\u5546\u54c1\u4fa1\u683c</th>\n                <th>\u5099\u8003</th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>\n            @items.map { item =>\n              <tr>\n                <td align=\"right\">@(\"%3d\".format(item.ID))</td>\n                <td>@item.name</td>\n                <td align=\"right\">@(\"%,d\".format(item.price))</td>\n                <td>@item.comment</td>\n                <td align=\"center\">\n                  <a href=\"/items/@item.ID/update\" class=\"btn btn-primary\">\u66f4\u65b0</a>\n                  <input type=\"button\" class=\"btn btn-danger\" value=\"\u524a\u9664\" onClick='if(confirm(\"\u672c\u5f53\u306b\u524a\u9664\u3057\u3066\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f\")) {location.href=\"/items/@item.ID/remove\"}'>\n                </td>\n              </tr>\n            }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n </div>\n}\n\n```\n\n### \u624b\u9806 3-10: \u30d5\u30a1\u30a4\u30eb `app/views/itemSearch.scala.html` \u3092\u7de8\u96c6\u3057\u307e\u3059\n\n```html:app/views/itemSearch.scala.html\n@(ID: Long, itemForm: Form[Item])\n\n@import helper._\n\n@main(title = \"\u53d7\u767a\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 - \u5546\u54c1\u60c5\u5831\u66f4\u65b0\") {\n \n<!-- \u30d8\u30c3\u30c0\u30fc -->\n@header()\n\n<div class=\"row\">\n  <div class=\"container\">\n  \n    <!-- \u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc -->\n    <div class=\"hidden-xs col-sm-3 col-md-3 col-lg-3\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <ul class=\"nav nav-pills nav-stacked\">\n            <li><a href=\"/items/search\">\u5546\u54c1\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u66f4\u65b0/\u524a\u9664\uff09</a></li>\n            <li><a href=\"/items/create\">\u5546\u54c1\u60c5\u5831\u767b\u9332</a></li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    \n    <!-- \u30b3\u30f3\u30c6\u30f3\u30c4 -->\n    <div class=\"col-xs-12 col-sm-9 col-md-9 col-lg-9\">\n      <div class=\"row\">\n        \n        <!-- \u898b\u51fa\u3057 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <h1>\u5546\u54c1\u60c5\u5831\u66f4\u65b0</h1> \n        </div>\n                \n        <!-- \u30d5\u30a9\u30fc\u30e0 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          @form(routes.ItemController.update(ID)) {\n            <fieldset>\n              <input type=\"hidden\" name=\"ID\" value=\"@ID\">\n              @inputText(itemForm(\"name\"), '_label -> \"\u5546\u54c1\u540d\", 'size -> 30)\n              @inputText(itemForm(\"price\"), '_label -> \"\u5546\u54c1\u4fa1\u683c\", 'size -> 30)\n              @inputText(itemForm(\"comment\"), '_label -> \"\u5099\u8003\", 'size -> 30)\n            </fieldset>\n            <div class=\"actions\">\n              <input type=\"submit\" class=\"btn btn-primary\">\n              <a href=\"/items/search\" class=\"btn btn-danger\">\u30ad\u30e3\u30f3\u30bb\u30eb</a>\n            </div>\n          }\n        </div>\n      </div>\n    </div>\n </div>\n}\n\n```\n\n### \u624b\u9806 3-11: \u30d6\u30e9\u30a6\u30b6\u3067\u3001`http://localhost:9000/` \u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\n\n<p><span itemscope itemtype=\"http://schema.org/Photograph\"><img src=\"http://cdn-ak.f.st-hatena.com/images/fotolife/k/kukita/20140806/20140806180242.png\" class=\"hatena-fotolife\" itemprop=\"image\"></span></p>\n\n\u30e2\u30c7\u30eb\u5c64\u306b\u5909\u66f4\u3092\u52a0\u3048\u305f\u305f\u3081\u3001\u30c6\u30fc\u30d6\u30eb\u30b9\u30ad\u30fc\u30de\u306e\u5909\u66f4\uff08DROP TABLE \u2192 CREATE TABLE\uff09\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\n### \u624b\u9806 3-12: `Apply this script now!` \u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\n\n\u300c\u5546\u54c1\u60c5\u5831\u7ba1\u7406\u300d\u6a5f\u80fd\u304c\u5b9f\u88c5\u3067\u304d\u307e\u3057\u305f\u3002\n\n#### \u5546\u54c1\u60c5\u5831\u767b\u9332\n\n<p><span itemscope itemtype=\"http://schema.org/Photograph\"><img src=\"http://cdn-ak.f.st-hatena.com/images/fotolife/k/kukita/20140806/20140806180300.png\" class=\"hatena-fotolife\" itemprop=\"image\"></span></p>\n\n#### \u5546\u54c1\u60c5\u5831\u4e00\u89a7\n\n<p><span itemscope itemtype=\"http://schema.org/Photograph\"><img src=\"http://cdn-ak.f.st-hatena.com/images/fotolife/k/kukita/20140806/20140806180325.png\" class=\"hatena-fotolife\" itemprop=\"image\"></span></p>\n\n#### \u5546\u54c1\u60c5\u5831\u66f4\u65b0\n\n<p><span itemscope itemtype=\"http://schema.org/Photograph\"><img src=\"http://cdn-ak.f.st-hatena.com/images/fotolife/k/kukita/20140806/20140806180342.png\" class=\"hatena-fotolife\" itemprop=\"image\"></span></p>\n\n## 4: Slick \u3092\u4f7f\u3063\u305f \"\u5916\u90e8\u30ad\u30fc\u306e\u8a2d\u5b9a\" \u3068 \"\u30c6\u30fc\u30d6\u30eb\u306e\u7d50\u5408\"\n\n\u300c\u53d7\u6ce8\u7ba1\u7406\u300d\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u300c\u53d7\u6ce8\u7ba1\u7406\u300d\u6a5f\u80fd\u3067\u306f\u3001`\u53d7\u6ce8\u30c6\u30fc\u30d6\u30eb` \u4e0a\u306b `\u9867\u5ba2\u30c6\u30fc\u30d6\u30eb`\u3001`\u5546\u54c1\u30c6\u30fc\u30d6\u30eb` \u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e \u201d\u5916\u90e8\u30ad\u30fc\u306e\u8a2d\u5b9a\" \u3092\u3057\u305f\u308a\u3001\u60c5\u5831\u3092\u53c2\u7167\u3059\u308b\u969b\u306b \"\u30c6\u30fc\u30d6\u30eb\u306e\u7d50\u5408\" \u3092\u3057\u305f\u308a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u306f\u3001Slick \u3092\u4f7f\u3063\u3066\u3001\u3053\u308c\u3089\u3092\u3069\u3046\u5b9f\u88c5\u3059\u308b\u304b\u3092\u4e2d\u5fc3\u306b\u8aac\u660e\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n### \u624b\u9806 4-1: \u30d5\u30a1\u30a4\u30eb `conf/route` \u3092\u7de8\u96c6\u3057\u307e\u3059\n\n```scala:conf/route\n# Routes\n# This file defines all application routes (Higher priority routes first)\n# ~~~~\n\n# Home page\nGET     /                           controllers.Application.index\n\n# Map static resources from the /public folder to the /assets URL path\nGET     /assets/*file               controllers.Assets.at(path=\"/public\", file)\n\n#\n# Customers Management\n#\n\n# Create customer infomation.\nGET     /customers/create           controllers.CustomerController.showCreateForm()\nPOST    /customers/create           controllers.CustomerController.create()\n\n# Search customer infomation.\nGET     /customers/search           controllers.CustomerController.search(word: String ?= \"\")\n\n# Update customer infomation.\nGET     /customers/:id/update       controllers.CustomerController.showUpdateForm(id: Long)\nPOST    /customers/:id/update       controllers.CustomerController.update(id: Long)\n\n# Remove customer infomation\nGET     /customers/:id/remove       controllers.CustomerController.remove(id: Long)\n\n#\n# Items Management\n#\n\n# Create item infomation.\nGET     /items/create               controllers.ItemController.showCreateForm()\nPOST    /items/create               controllers.ItemController.create()\n\n# Search item infomation.\nGET     /items/search               controllers.ItemController.search(word: String ?= \"\")\n\n# Update item infomation.\nGET     /items/:id/update           controllers.ItemController.showUpdateForm(id: Long)\nPOST    /items/:id/update           controllers.ItemController.update(id: Long)\n\n# Remove item infomation.\nGET     /items/:id/remove           controllers.ItemController.remove(id: Long)\n\n#\n# Orderings Management\n#\n\n# Create ordering infomation.\nGET     /orderings/create           controllers.OrderingController.showCreateForm()\nPOST    /orderings/create           controllers.OrderingController.create()\n\n# Search ordering infomation.\nGET     /orderings/search           controllers.OrderingController.search(word: String ?= \"\")\n\n# Remove ordering infomation.\nGET     /orderings/:id/remove       controllers.OrderingController.remove(id: Long)\n\n```\n\n### \u624b\u9806 4-2: \u30d5\u30a1\u30a4\u30eb `app/models/Ordering.scala` \u3092\u4f5c\u6210\u3057\u307e\u3059\n\n```scala:app/models/Ordering.scala\npackage models\n\n/**\n * Slick \u95a2\u9023\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\n */\nimport play.api.db.slick.Config.driver.simple._\n\n/**\n * DTO \u306e\u5b9a\u7fa9\n */\ncase class Ordering(ID: Long, createdAt: Long, customerID: Long, itemID: Long, itemCount: Long, comment: String)\n\n/**\n * \u30c6\u30fc\u30d6\u30eb\u306e\u5b9a\u7fa9\n */\nclass OrderingTable(tag: Tag) extends Table[Ordering](tag, \"orderings\") {\n  def ID = column[Long](\"id\", O.PrimaryKey, O.AutoInc)\n  def createdAt = column[Long](\"created_at\", O.NotNull)\n  def customerID = column[Long](\"customer_id\", O.NotNull)\n  def itemID = column[Long](\"item_id\", O.NotNull )\n  def itemCount = column[Long](\"item_count\", O.NotNull)\n  def comment = column[String](\"commnet\", O.NotNull)\n  def * = (ID, createdAt, customerID, itemID, itemCount, comment) <> (Ordering.tupled, Ordering.unapply)\n  def customer = foreignKey(\"customer_id\", customerID, OrderingDAO.customerQuery)(_.ID)\n  def item = foreignKey(\"item_id\", itemID, OrderingDAO.itemQuery)(_.ID)\n}\n\n/**\n * DAO \u306e\u5b9a\u7fa9\n */\nobject OrderingDAO {\n\n  /**\n   * scala.slick.lifted.TableQuery \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092 3 \u3064\u4f5c\u6210\n   */  \n  lazy val customerQuery = CustomerDAO.customerQuery\n  lazy val itemQuery = ItemDAO.itemQuery\n  lazy val orderingQuery = TableQuery[OrderingTable]\n\n  /**\n   * 3 \u3064\u30c6\u30fc\u30d6\u30eb\u3092\u7d50\u5408\u3057\u305f\u4e0a\u3067\u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22\n   * @param word\n   */\n  def search(word: String)(implicit s: Session): List[(Long, Long, Long, String, String, String, String, String, Long, String, Long, String, Long, String)] = {\n    val query = for {\n      ordering <- orderingQuery\n      customer <- customerQuery.filter(_.ID === ordering.customerID)\n      item <- itemQuery.filter(_.ID === ordering.itemID)\n    } yield (ordering.ID, ordering.createdAt, customer.ID, customer.name, customer.email, customer.tel, customer.address, customer.comment, item.ID, item.name, item.price, item.comment, ordering.itemCount, ordering.comment)\n    query.filter(row => ((row._4 like \"%\"+word+\"%\") || (row._5 like \"%\"+word+\"%\") || (row._6 like \"%\"+word+\"%\") || (row._7 like \"%\"+word+\"%\") || (row._8 like \"%\"+word+\"%\") || (row._10 like \"%\"+word+\"%\") || (row._12 like \"%\"+word+\"%\") || (row._14 like \"%\"+word+\"%\"))).list\n  }\n\n  /**\n   * ID\u691c\u7d22\n   * @param ID\n   */\n  def searchByID(ID: Long)(implicit s: Session): Ordering = {\n    orderingQuery.filter(_.ID === ID).first\n  }\n\n  /**\n   * \u4f5c\u6210\n   * @param ordering\n   */\n  def create(ordering: Ordering)(implicit s: Session) {\n    orderingQuery.insert(ordering)\n  }\n\n  /**\n   * \u66f4\u65b0\n   * @param ordering\n   */\n  def update(ordering: Ordering)(implicit s: Session) {\n    orderingQuery.filter(_.ID === ordering.ID).update(ordering)\n  }\n\n  /**\n   * \u524a\u9664\n   * @param ordering\n   */\n  def remove(ordering: Ordering)(implicit s: Session) {\n    orderingQuery.filter(_.ID === ordering.ID).delete\n  }\n}\n\n```\n\n\u57fa\u672c\u7684\u306b\u306f\u3001\u4ed6\u306e\u30e2\u30c7\u30eb\u5c64\u306e\u5b9f\u88c5\u3068\u540c\u3058\u3067\u3059\u306e\u3067\u3001\u7279\u5fb4\u7684\u306a\u90e8\u5206\u306e\u307f\u8aac\u660e\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n#### \u2460 \u30c6\u30fc\u30d6\u30eb\u306e\u5b9a\u7fa9\n\n```scala\n/**\n * \u30c6\u30fc\u30d6\u30eb\u306e\u5b9a\u7fa9\n */\nclass OrderingTable(tag: Tag) extends Table[Ordering](tag, \"orderings\") {\n  def ID = column[Long](\"id\", O.PrimaryKey, O.AutoInc)\n  def createdAt = column[Long](\"created_at\", O.NotNull)\n  def customerID = column[Long](\"customer_id\", O.NotNull)\n  def itemID = column[Long](\"item_id\", O.NotNull )\n  def itemCount = column[Long](\"item_count\", O.NotNull)\n  def comment = column[String](\"commnet\", O.NotNull)\n  def * = (ID, createdAt, customerID, itemID, itemCount, comment) <> (Ordering.tupled, Ordering.unapply)\n  def customer = foreignKey(\"customer_id\", customerID, OrderingDAO.customerQuery)(_.ID)\n  def item = foreignKey(\"item_id\", itemID, OrderingDAO.itemQuery)(_.ID)\n}\n```\n\n\u6700\u5f8c\u306e 2 \u884c\u3067\u3001\u5916\u90e8\u30ad\u30fc\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u306f Table \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e foreignKey \u95a2\u6570\u3092\u7528\u3044\u3066\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n#### \u2461 scala.slick.lifted.TableQuery \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092 3 \u3064\u4f5c\u6210\n\n```scala\n \uff1a\n\u4e2d\u7565\n \uff1a\n/**\n * DAO \u306e\u5b9a\u7fa9\n */\nobject OrderingDAO {\n\n  /**\n   * scala.slick.lifted.TableQuery \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092 3 \u3064\u4f5c\u6210\n   */  \n  lazy val customerQuery = CustomerDAO.customerQuery\n  lazy val itemQuery = ItemDAO.itemQuery\n  lazy val orderingQuery = TableQuery[OrderingTable]\n \uff1a\n\u4e2d\u7565\n \uff1a\n```\n\nscala.slick.lifted.TableQuery \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092 3 \u3064\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u3001\u8907\u6570\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u307e\u305f\u304c\u3063\u305f\u30af\u30a8\u30ea\u30fc\u3092\u751f\u6210\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n#### \u2462 3 \u3064\u30c6\u30fc\u30d6\u30eb\u3092\u7d50\u5408\u3057\u305f\u4e0a\u3067\u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22\n\n```scala\n  /**\n   * 3 \u3064\u30c6\u30fc\u30d6\u30eb\u3092\u7d50\u5408\u3057\u305f\u4e0a\u3067\u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22\n   * @param word\n   */\n  def search(word: String)(implicit s: Session): List[(Long, Long, Long, String, String, String, String, String, Long, String, Long, String, Long, String)] = {\n    val query = for {\n      ordering <- orderingQuery\n      customer <- customerQuery.filter(_.ID === ordering.customerID)\n      item <- itemQuery.filter(_.ID === ordering.itemID)\n    } yield (ordering.ID, ordering.createdAt, customer.ID, customer.name, customer.email, customer.tel, customer.address, customer.comment, item.ID, item.name, item.price, item.comment, ordering.itemCount, ordering.comment)\n    query.filter(row => ((row._4 like \"%\"+word+\"%\") || (row._5 like \"%\"+word+\"%\") || (row._6 like \"%\"+word+\"%\") || (row._7 like \"%\"+word+\"%\") || (row._8 like \"%\"+word+\"%\") || (row._10 like \"%\"+word+\"%\") || (row._12 like \"%\"+word+\"%\") || (row._14 like \"%\"+word+\"%\"))).list\n  }\n \uff1a\n\u4e2d\u7565\n \uff1a\n```\n\nSlick \u3067\u306f\u3001Query \u306b\u5bfe\u3057 for \u5f0f\u3092\u7528\u3044\u3066 flatMap \u64cd\u4f5c\u3092\u884c\u3046\u3053\u3068\u3067\u30c6\u30fc\u30d6\u30eb\u306e\u7d50\u5408\uff08Join\uff09\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u7d50\u5408\u306e\u969b\u306b if \u6587\u3092\u7528\u3044\u3066\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3092\u884c\u3046\u3053\u3068\u3067\u3001\u5185\u90e8\u7d50\u5408\uff08Inner Join\uff09\u3068\u3059\u308b\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\n\nSlick \u306b\u304a\u3051\u308b\u7d50\u5408\u7b49\u306e\u65b9\u6cd5\u306e\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001\u4ee5\u4e0b\u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n[http://slick.typesafe.com/doc/2.0.0/gettingstarted.html](http://slick.typesafe.com/doc/2.0.0/gettingstarted.html)\n\n### \u624b\u9806 4-3: \u30d5\u30a1\u30a4\u30eb `app/contrallers/OrderingController.scala` \u3092\u4f5c\u6210\u3057\u307e\u3059\n\n```scala:app/contrallers/OrderingController.scala\npackage controllers\n\nimport play.api._\nimport play.api.mvc._\n\nimport play.api.data._\nimport play.api.data.Forms._\n\nimport play.api.db.slick._\nimport models._\n\nobject OrderingController extends Controller {\n\n  /**\n   * \u53d7\u6ce8\u60c5\u5831\u5165\u529b\u30d5\u30a9\u30fc\u30e0\u306e\u5b9a\u7fa9\n   */\n  val orderingForm = Form(\n    mapping(\n      \"ID\" -> longNumber,\n      \"createdAt\" -> longNumber,\n      \"customerID\" ->  longNumber,\n      \"itemID\" -> longNumber,\n      \"itemCount\" -> longNumber,\n      \"comment\" -> text(maxLength = 140)\n    )(Ordering.apply)(Ordering.unapply)\n  )\n\n  /**\n   * \u53d7\u6ce8\u767b\u9332\u30d5\u30a9\u30fc\u30e0\u8868\u793a\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def showCreateForm() = Action { request =>\n    Ok(views.html.orderingCreateForm(orderingForm))\n  }\n\n  /**\n   * \u53d7\u6ce8\u767b\u9332\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def create() = DBAction { implicit rs =>\n    orderingForm.bindFromRequest.fold(\n      errors => BadRequest(views.html.orderingCreateForm(errors)),\n      ordering => {\n        OrderingDAO.create(ordering)\n        Redirect(routes.OrderingController.search())\n      }\n    )\n  }\n\n  /**\n   * \u53d7\u6ce8\u60c5\u5831\u691c\u7d22\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def search(word: String) = DBAction { implicit rs =>\n    Ok(views.html.orderingSearch(word, OrderingDAO.search(word)))\n  }\n\n  /**\n   * \u53d7\u6ce8\u60c5\u5831\u524a\u9664\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u5b9a\u7fa9\n   */\n  def remove(ID: Long) = DBAction { implicit rs =>\n    OrderingDAO.remove(OrderingDAO.searchByID(ID))\n    Redirect(routes.OrderingController.search())\n  }\n}\n\n```\n\n### \u624b\u9806 4-4: \u30d5\u30a1\u30a4\u30eb `app/views/orderingCreateForm.scala.html` \u3092\u4f5c\u6210\u3057\u307e\u3059\n\n```html:app/views/orderingCreateForm.scala.html\n@(orderingForm: Form[Ordering])\n\n@import helper._\n\n@main(title = \"\u53d7\u767a\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 - \u53d7\u6ce8\u767b\u9332\") {\n\n<!-- \u30d8\u30c3\u30c0\u30fc -->\n@header()\n\n<div class=\"row\">\n  <div class=\"container\">\n  \n    <!-- \u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc -->\n    <div class=\"hidden-xs col-sm-3 col-md-3 col-lg-3\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <ul class=\"nav nav-pills nav-stacked\">\n            <li><a href=\"/orderings/search\">\u53d7\u6ce8\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u524a\u9664\uff09</a></li>\n            <li><a href=\"/orderings/create\">\u53d7\u6ce8\u767b\u9332</a></li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    \n    <!-- \u30b3\u30f3\u30c6\u30f3\u30c4 -->\n    <div class=\"col-xs-12 col-sm-9 col-md-9 col-lg-9\">\n      <div class=\"row\">\n      \n        <!-- \u898b\u51fa\u3057 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <h1>\u53d7\u6ce8\u767b\u9332</h1>\n        </div>\n        \n        <!-- \u30d5\u30a9\u30fc\u30e0 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          @form(routes.OrderingController.create()) {\n            <fieldset>\n              <input type=\"hidden\" name=\"ID\" value=\"0\">\n              <input type=\"hidden\" name=\"createdAt\" value=\"@System.currentTimeMillis()\">\n              @inputText(orderingForm(\"customerID\"), '_label -> \"\u9867\u5ba2\u756a\u53f7\", 'size -> 30)\n              @inputText(orderingForm(\"itemID\"), '_label -> \"\u5546\u54c1\u756a\u53f7\", 'size -> 30)\n              @select(\n                orderingForm(\"itemCount\"),\n                options(\n                  \"1\" -> \"1\",\n                  \"2\" -> \"2\",\n                  \"3\" -> \"3\",\n                  \"4\" -> \"4\",\n                  \"5\" -> \"5\",\n                  \"6\" -> \"6\",\n                  \"7\" -> \"7\",\n                  \"8\" -> \"8\",\n                  \"9\" -> \"9\",\n                  \"10\" -> \"10\",\n                  \"11\" -> \"11\",\n                  \"12\" -> \"12\",\n                  \"13\" -> \"13\",\n                  \"14\" -> \"14\",\n                  \"15\" -> \"15\",\n                  \"16\" -> \"16\",\n                  \"17\" -> \"17\",\n                  \"18\" -> \"18\",\n                  \"19\" -> \"19\",\n                  \"20\" -> \"20\"\n                ),\n                '_label -> \"\u5546\u54c1\u500b\u6570\"\n              )\n              @inputText(orderingForm(\"comment\"), '_label -> \"\u5099\u8003\", 'size -> 30)\n            </fieldset>\n            <div class=\"actions\">\n              <input type=\"submit\" class=\"btn btn-primary\">\n              <a href=\"/orderings/search\" class=\"btn btn-danger\">\u30ad\u30e3\u30f3\u30bb\u30eb</a>\n            </div>\n          }\n        </div>\n      </div>\n    </div>\n </div>\n}\n\n```\n\n### \u624b\u9806 4-5: \u30d5\u30a1\u30a4\u30eb `app/views/orderingSearch.scala.html` \u3092\u4f5c\u6210\u3057\u307e\u3059\n\n```html:app/views/orderingCreateForm.scala.html\n@(word: String, orderings: List[(Long, Long, Long, String, String, String, String, String, Long, String, Long, String, Long, String)])\n\n@import java.util.Date\n\n@main(title = \"\u53d7\u767a\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0 - \u53d7\u6ce8\u60c5\u5831\u4e00\u89a7\") {\n\n<!-- \u30d8\u30c3\u30c0\u30fc -->\n@header()\n\n<div class=\"row\">\n  <div class=\"container\">\n\n    <!-- \u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc -->\n    <div class=\"hidden-xs col-sm-3 col-md-3 col-lg-3\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <ul class=\"nav nav-pills nav-stacked\">\n            <li><a href=\"/orderings/search\">\u53d7\u6ce8\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u524a\u9664\uff09</a></li>\n            <li><a href=\"/orderings/create\">\u53d7\u6ce8\u767b\u9332</a></li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n    <!-- \u30b3\u30f3\u30c6\u30f3\u30c4 -->\n    <div class=\"col-xs-12 col-sm-9 col-md-9 col-lg-9\">\n      <div class=\"row\">\n\n        <!-- \u898b\u51fa\u3057 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <h1>\u53d7\u6ce8\u60c5\u5831\u4e00\u89a7\uff08\u691c\u7d22/\u524a\u9664\uff09</h1> \n        </div>\n\n        <!-- \u691c\u7d22\u30d5\u30a9\u30fc\u30e0 -->\n        <div class=\"col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n        @helper.form(action=routes.OrderingController.search()) {\n          <input type=\"search\" name=\"word\" value=\"@word\">\n          <input type=\"submit\" value=\"\u30ad\u30fc\u30ef\u30fc\u30c9\u691c\u7d22\" class=\"byn btn-primary\">\n        }\n        </div>\n\n        <!-- \u30c6\u30fc\u30d6\u30eb -->\n        <div class=\"table-responsive col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n          <table class=\"table table-bordered table-striped \">\n            <thead>\n              <tr>\n                <th>\u53d7\u6ce8\u756a\u53f7</th>\n                <th>\u53d7\u6ce8\u65e5\u6642</th>\n                <th>\u9867\u5ba2\u6c0f\u540d</th>\n                <th>\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9</th>\n                <th>\u5546\u54c1\u540d</th>\n                <th>\u5358\u4fa1</th>\n                <th>\u500b\u6570</th>\n                <th>\u5408\u8a08\u4fa1\u683c</th>\n                <th>\u5099\u8003</th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>\n            @orderings.map { ordering =>\n              <tr>\n                <td align=\"right\">@(\"%9d\".format(ordering._1))</td>\n                <td align=\"right\">@(\"%tY/%<tm/%<td %<tH:%<tM:%<tS\".format(new Date(ordering._2)))</td>\n                <td>@ordering._4</td>\n                <td>@ordering._5</td>\n                <td>@ordering._10</td>\n                <td align=\"right\">@(\"%,d\".format(ordering._11))</td>\n                <td align=\"right\">@(\"%,d\".format(ordering._13))</td>\n                <td align=\"right\">@(\"%,d\".format((ordering._11 * ordering._13)))</td>\n                <td>@ordering._14</td>\n                <td align=\"center\"><input type=\"button\" class=\"btn btn-danger\" value=\"\u524a\u9664\" onClick='if(confirm(\"\u672c\u5f53\u306b\u524a\u9664\u3057\u3066\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f\")) {location.href=\"/orderings/@ordering._1/remove\"}'></td>\n              </tr>\n            }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n </div>\n}\n\n```\n\n### \u624b\u9806 4-6: \u30d6\u30e9\u30a6\u30b6\u3067\u3001`http://localhost:9000/` \u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\n\n<p><span itemscope itemtype=\"http://schema.org/Photograph\"><img src=\"http://cdn-ak.f.st-hatena.com/images/fotolife/k/kukita/20140806/20140806180417.png\" class=\"hatena-fotolife\" itemprop=\"image\"></span></p>\n\n\u518d\u3073\u30e2\u30c7\u30eb\u5c64\u306b\u5909\u66f4\u3092\u52a0\u3048\u305f\u305f\u3081\u3001\u30c6\u30fc\u30d6\u30eb\u30b9\u30ad\u30fc\u30de\u306e\u5909\u66f4\uff08DROP TABLE \u2192 CREATE TABLE\uff09\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\n`CREATE TABLE` \u6587\u306b\u52a0\u3048\u3066\u3001\u5916\u90e8\u30ad\u30fc\u5236\u7d04\u3092\u4e0e\u3048\u308b\u305f\u3081\u306e `ALTER TABLE` \u6587\u3082\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n### \u624b\u9806 4-7: `Apply this script now!` \u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\n\n\u300c\u53d7\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u300d \u306e\u5b8c\u6210\u3067\u3059\u3002\n\n#### \u53d7\u6ce8\u767b\u9332\n\n<p><span itemscope itemtype=\"http://schema.org/Photograph\"><img src=\"http://cdn-ak.f.st-hatena.com/images/fotolife/k/kukita/20140806/20140806180432.png\" class=\"hatena-fotolife\" itemprop=\"image\"></span></p>\n\n#### \u53d7\u6ce8\u60c5\u5831\u4e00\u89a7\n\n<p><span itemscope itemtype=\"http://schema.org/Photograph\"><img src=\"http://cdn-ak.f.st-hatena.com/images/fotolife/k/kukita/20140806/20140806180448.png\" class=\"hatena-fotolife\" itemprop=\"image\"></span></p>\n\n---\n\n\u4f5c\u6210\u3057\u305f \u300c\u53d7\u6ce8\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u300d \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306b\u4fdd\u5b58\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n[https://github.com/kukita/play-scala-order-management-system](https://github.com/kukita/play-scala-order-management-system)\n\n\u4ee5\u4e0a\n"}