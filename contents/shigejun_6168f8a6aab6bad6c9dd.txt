{"tags": ["CakePHP", "cakephp3"], "context": "\n\nMailer \u3067\u30e2\u30c7\u30eb\u3092\u4f7f\u3044\u305f\u3044\nCakePHP3\u306b\u306f Resuable-email \u3068\u3044\u3046\u4ed5\u7d44\u307f\u304c\u3042\u308a\u3001Mailer \u30af\u30e9\u30b9\u3092\u5229\u7528\u3059\u308b\u4e8b\u3067\u3001\u30e1\u30fc\u30eb\u9001\u4fe1\u306b\u95a2\u9023\u3059\u308b\u51e6\u7406\u3092\u5225\u30af\u30e9\u30b9\u306b\u5207\u308a\u96e2\u305b\u307e\u3059\u3002\napi\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u898b\u308b\u3068\u3001ModelAwareTrait\u3092\u6307\u5b9a\u3055\u308c\u3066\u304a\u308a\u3001\u30e2\u30c7\u30eb\u3082\u5229\u7528\u53ef\u80fd\u306a\u306e\u304b\u3068\u601d\u3044Model\u3092\u5229\u7528\u3057\u4f7f\u3063\u3066\u307f\u308b\u3068\u3001\nInvalidArgumentException\n\nUnknown repository type \"Table\". Make sure you register a type before trying to use it.\n\n\u6012\u3089\u308c\u305f\u3002model\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u624b\u6bb5\u304c\u767b\u9332\u3055\u308c\u3066\u306a\u3044\u3068\u3044\u3046\u610f\u5473\u306a\u306e\u3067\u3001\n\u4ee5\u4e0b\u3067\u5bfe\u5fdc\nnamespace App\\Mailer;\n\nuse Cake\\Mailer\\Mailer;\n\nclass UserMailer extends Mailer\n{\n\n    public function __construct(\\Cake\\Mailer\\Email $email = null)\n    {\n        parent::__construct($email);\n\n        /**\n         * loadModel\u3092\u5229\u7528\u53ef\u80fd\u306b\u3059\u308b\n         * modelFactory \u306bTableRegistory::get \u3092\u6307\u5b9a\u3002\n         */\n        $this->modelFactory('Table', ['Cake\\ORM\\TableRegistry', 'get']); \n\n        $this->loadModel('Users');\n    }\n\n\n\n    public function notify($data)\n    {\n        $users = $this->Users->find('target');\n        .....\n    }\n}\n\n\u3067Model\u3092\u5229\u7528\u53ef\u80fd\u3068\u306a\u3063\u305f\u3002\n# Mailer \u3067\u30e2\u30c7\u30eb\u3092\u4f7f\u3044\u305f\u3044\n\nCakePHP3\u306b\u306f [Resuable-email](http://book.cakephp.org/3.0/en/core-libraries/email.html#creating-reusable-emails) \u3068\u3044\u3046\u4ed5\u7d44\u307f\u304c\u3042\u308a\u3001Mailer \u30af\u30e9\u30b9\u3092\u5229\u7528\u3059\u308b\u4e8b\u3067\u3001\u30e1\u30fc\u30eb\u9001\u4fe1\u306b\u95a2\u9023\u3059\u308b\u51e6\u7406\u3092\u5225\u30af\u30e9\u30b9\u306b\u5207\u308a\u96e2\u305b\u307e\u3059\u3002\n\n[api\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://api.cakephp.org/3.2/class-Cake.Mailer.Mailer.html)\u3092\u898b\u308b\u3068\u3001ModelAwareTrait\u3092\u6307\u5b9a\u3055\u308c\u3066\u304a\u308a\u3001\u30e2\u30c7\u30eb\u3082\u5229\u7528\u53ef\u80fd\u306a\u306e\u304b\u3068\u601d\u3044Model\u3092\u5229\u7528\u3057\u4f7f\u3063\u3066\u307f\u308b\u3068\u3001\n\n```\nInvalidArgumentException\n\nUnknown repository type \"Table\". Make sure you register a type before trying to use it.\n```\n\n\u6012\u3089\u308c\u305f\u3002model\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u624b\u6bb5\u304c\u767b\u9332\u3055\u308c\u3066\u306a\u3044\u3068\u3044\u3046\u610f\u5473\u306a\u306e\u3067\u3001\n\u4ee5\u4e0b\u3067\u5bfe\u5fdc\n\n```php\nnamespace App\\Mailer;\n\nuse Cake\\Mailer\\Mailer;\n\nclass UserMailer extends Mailer\n{\n\n    public function __construct(\\Cake\\Mailer\\Email $email = null)\n    {\n        parent::__construct($email);\n\n        /**\n         * loadModel\u3092\u5229\u7528\u53ef\u80fd\u306b\u3059\u308b\n         * modelFactory \u306bTableRegistory::get \u3092\u6307\u5b9a\u3002\n         */\n        $this->modelFactory('Table', ['Cake\\ORM\\TableRegistry', 'get']); \n        \n        $this->loadModel('Users');\n    }\n\n  \n\n    public function notify($data)\n    {\n        $users = $this->Users->find('target');\n        .....\n    }\n}\n```\n\n\u3067Model\u3092\u5229\u7528\u53ef\u80fd\u3068\u306a\u3063\u305f\u3002\n"}