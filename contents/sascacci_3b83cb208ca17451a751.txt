{"context": "Web Music \u30cf\u30c3\u30ab\u30bd\u30f3#5 \uff20Google Japan (2016/7/30)\u304c\u958b\u50ac\u3055\u308c\u307e\u3059\uff01 \u30c6\u30fc\u30de\u306f\u300cDJ/VJ\u300d\u3067\u3059\u306e\u3067\u3001\u5b9c\u3057\u3051\u308c\u3070\u3001\u3053\u3061\u3089\u306e\u30b5\u30f3\u30d7\u30eb\u3082\u53c2\u8003\u306b\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u307e\u305a\u306f\u52d5\u4f5c\u30b5\u30f3\u30d7\u30eb\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\n\n\u30b5\u30f3\u30d7\u30eb\n\n\u2191Chrome\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u30de\u30a4\u30af\u3067\u62fe\u3063\u305f\u97f3\u306b\u53cd\u5fdc\u3057\u3066\u5e73\u9762\u304c\u63fa\u3089\u304e\u307e\u3059\u3002\n\u5916\u90e8MIDI\u6a5f\u5668\u3092\u63a5\u7d9a\u3057\u3066\u3001Control Change(CC)\u3092\u9001\u308b\u3068\u8996\u70b9\uff08\u30ab\u30e1\u30e9\u30fb\u30a2\u30f3\u30b0\u30eb\uff09\u304c\u5909\u308f\u308a\u307e\u3059\u3002\n\n\n\n\n\n\n\u6982\u8981\n\ngetUserMedia \u3067\u30de\u30a4\u30af\u304b\u3089\u306e\u97f3\u58f0\u3092\u62fe\u3063\u3066\u3001WebAudioAPI\u306eanalyzerNode getFloatTimeDomainData()\u3067\u6ce2\u5f62\u60c5\u5831\u3092\u53d6\u5f97\u3002\n\u305d\u306eWebAudio\u304b\u3089\u30b2\u30c3\u30c8\u3057\u305f\u60c5\u5831\u3092\u4f7f\u3063\u3066 Three.js \u3067\u4f5c\u3063\u305f Plane \u3092\u63fa\u3089\u3057\u3066\u3044\u307e\u3059\u3002\nWebMIDI\u306f\u3001CC\u3092\u53d7\u3051\u308b\u3068 Three.js\u306e\u30ab\u30e1\u30e9\u306e\u89d2\u5ea6\u304c\u5909\u308f\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n\u6e96\u5099\n\nthree.min.js\u306f\u5225\u9014http://threejs.org/\u304b\u3089\u5165\u624b\u3057\u3066\u304f\u3060\u3055\u3044\u3002zip\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3068\u3001build\u30d5\u30a9\u30eb\u30c0\u5185\u306b\u3042\u308a\u307e\u3059\u3002\u3042\u3068\u306f\u3001\u4ee5\u4e0b\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u30b3\u30d4\u30da\u3059\u308c\u3070\u52d5\u304f\u306f\u305a\u3067\u3059\u304c\u3001getUserMedia\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001https\u3067\u306a\u3044\u3068\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002\n\n\n\u30bd\u30fc\u30b9\u89e3\u8aac\n<!DOCTYPE html>\n<html>\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n<title> Vj Smpl Three.js </title>\n<style>\n    body {\n        cursor:crosshair;\n        margin: 0px;\n        overflow: hidden;\n    }\n</style>\n</head>\n\n<body onload=\"setup()\">\n<script src=\"three.min.js\"></script>\n\n<script>\n\n// Web Audio\u3000\u306e\u521d\u671f\u5316\nwindow.AudioContext = window.AudioContext;\nvar context = new AudioContext();\nvar analyser = context.createAnalyser();\n\n// three.js\u3067\u4f7f\u3046\u5909\u6570\nvar scene=null;\nvar camera=null;\nvar renderer=null;\n\nvar radius = 500;\nvar angle = 0;\nvar plane = null;\n\n// \u30de\u30a4\u30af\u306e\u97f3\u58f0\u3092\u53d6\u5f97\u3002\u3000WebAudio\u306eanalyser\u306b\u308f\u305f\u3057\u3066\u3044\u308b\u3002\nnavigator.getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia);\nnavigator.getUserMedia(\n    { video:false, audio:true },\n    function(stream) {\n        var microphone = context.createMediaStreamSource(stream);\n        microphone.connect(analyser);\n    },\n    function(error) { return; }\n);\n\n// \u753b\u9762\u306e\u30ea\u30b5\u30a4\u30ba\nfunction resize() {\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize( window.innerWidth, window.innerHeight );\n}\n\n// three.js \u306e\u30ab\u30e1\u30e9\u3068\u304b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u304b\u30e2\u30ed\u30e2\u30ed\u521d\u671f\u5316\nfunction three_init() \n{\n    // \u307e\u305a\u30b7\u30fc\u30f3\u3092\u3064\u304f\u308a\u307e\u3059\u3002\n    scene = new THREE.Scene();\n    // \u6b21\u306b\u30ab\u30e1\u30e9\u3092\u3064\u304f\u308a\u307e\u3059\u3002\n    camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 2000);\n    // \u30ab\u30e1\u30e9\u3092\u30b7\u30fc\u30f3\u306b\u8ffd\u52a0\u3002\n    scene.add(camera);\n    // \u30ab\u30e1\u30e9\u4f4d\u7f6e\u3092\u8a2d\u5b9a\n    camera.position.z = radius;\n    // \u30ec\u30f3\u30c0\u30e9\u30fc\u3092DOM\u4e0a\u306b\u8a2d\u7f6e\u3059\u308b\n    renderer = new THREE.WebGLRenderer({antialias: true});\n    renderer.setSize(window.innerWidth, window.innerHeight);    \n    document.body.appendChild(renderer.domElement);\n    // \u80cc\u666f\u306e\u8272\n    renderer.setClearColor(0x000000);\n\n    // \u5e73\u9762\u3092\u751f\u6210\n    three_plane_init();\n}\n\n// \u5e73\u9762\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u751f\u6210\u3057\u3066scene\u306b\u3000add\nfunction three_plane_init()\n{\n    // \u5e73\u9762\u306e\u30de\u30c6\u30ea\u30a2\u30eb\u3092\u8a2d\u5b9a\n    var mat = new THREE.MeshBasicMaterial( { color: 0xFFFFFF, wireframe: true } );\n    // \u30b5\u30a4\u30ba\u3068\u30b0\u30ea\u30c3\u30c9\u3092\u8a2d\u5b9a\u3057\u3066\u5f62\u72b6\u3092\u6c7a\u3081\u308b\n    var geo = new THREE.PlaneGeometry (500, 500, 20, 20);\n    // \u30de\u30c6\u30ea\u30a2\u30eb\u3068\u5f62\u72b6\u3092\u3082\u3068\u306b\u7269\u4f53\u3092\u751f\u6210\u3057\u307e\u3059\n    plane = new THREE.Mesh(geo, mat);\n\n    // \u6c34\u5e73\u9762\u306b\u306a\u308b\u3088\u3046\u306b90\u5ea6\u56de\u8ee2\n    plane.rotation.set(Math.PI/2,0,0);\n\n    // \u5e73\u9762\u3092\u30b7\u30fc\u30f3\u306b\u8ffd\u52a0\n    scene.add( plane );\n}\n\n// Web MIDI\u3000API\u3000\u306e\u521d\u671f\u5316\nfunction web_midi_init()\n{\n    navigator.requestMIDIAccess({sysex:false}).then( success, failure );\n}\n\n// Web MIDI\u306e\u521d\u671f\u5316\u304c\u5931\u6557\u3057\u305f\u3068\u304d\u306b\u547c\u3070\u308c\u308b\u95a2\u6570\nfunction failure( error ) { }\n\n// Web MIDI\u306e\u521d\u671f\u5316\u304c\u6210\u529f\u3057\u305f\u3068\u304d\u306b\u547c\u3070\u308c\u308b\u95a2\u6570\nfunction success( m ) {\n    var inputs = null;\n    var midi=m;\n\n    if (typeof midi.inputs === \"function\") {\n        inputs = midi.inputs();\n    } else {\n        var inputIterator = midi.inputs.values();\n        inputs = [];\n        for (var o = inputIterator.next(); !o.done; o = inputIterator.next()) {\n            inputs.push(o.value)\n        }\n    }\n    // \u5168\u3066\u306eMIDI\u6a5f\u5668\u306e\u5165\u529b\u3092\u53d7\u3051\u308b\n    for (var i = 0; i < inputs.length; i++) {\n        inputs[i].onmidimessage = handleMIDIMessage;\n    }\n}\n\n// Web MIDI \u5165\u529b\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\n// CC\u3092\u53d7\u3051\u305f\u3089\u30ab\u30e1\u30e9\u306eangle\u304c\u5909\u5316\u3059\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3002\nfunction handleMIDIMessage( ev ) {\n    switch(ev.data[0] & 0xF0) {\n    case 0x90: // Note On\n        break;\n    case 0x80: // Note Off\n        break;\n    case 0xB0: // CC\n        // MIDI 0-127\u306e\u5024\u30920-2PI\u306b\u5909\u63db\n        angle = 2 * Math.PI * ev.data[2] / 127;\n        break;\n    default:\n        break;\n    }\n}\n\n// \u30ab\u30e1\u30e9\u306e\u30a2\u30f3\u30b0\u30eb\u8a2d\u5b9a\nfunction camera_update()\n{\n    // \u30ab\u30e1\u30e9\u4f4d\u7f6e\u3092\u8a2d\u5b9a\n    camera.position.x = radius*Math.cos(angle);\n    camera.position.y = 200;\n    camera.position.z = radius*Math.sin(angle);\n\n    // \u5e38\u306b\u539f\u70b9\u3092\u5411\u304f\u3088\u3046\u306b\n    camera.lookAt(new THREE.Vector3( 0, 0, 0 ));\n}\n\n// \u5e73\u9762\u306b\u6ce2\u5f62\u306e\u63fa\u3089\u304e\u3092\u4ed8\u52a0\nfunction plane_update(waveData)\n{\n    // update\u306e\u30d5\u30e9\u30b0\u3092\u7acb\u3066\u308b\n    plane.geometry.verticesNeedUpdate = true;\n\n    // WebAudio AnalyzerNode\u304b\u3089\u53d6\u5f97\u3057\u305f\u30c7\u30fc\u30bf\u3067\u5e73\u9762\u306ez\u5ea7\u6a19\u3092\u52d5\u304b\u3059\n    for (var i = 0; i < plane.geometry.vertices.length; i++) {\n        var vertex = plane.geometry.vertices[i];\n        vertex.z = waveData[i%waveData.length]*100;\n    }\n\n}\n\n// \u521d\u671f\u5316\nfunction setup(e)\n{\n    three_init();\n    web_midi_init();\n    window.addEventListener(\"resize\", resize, false);\n    draw();\n}\n\n// \u6bce\u30d5\u30ec\u30fc\u30e0\u547c\u3070\u308c\u308b\u95a2\u6570\nfunction draw() {\n    // \u6ce2\u5f62\u60c5\u5831\u3092\u53d6\u5f97\n    var waveData = new Float32Array(analyser.frequencyBinCount);\n    analyser.getFloatTimeDomainData(waveData);\n\n    // \u30ab\u30e1\u30e9\u4f4d\u7f6e\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\n    camera_update();\n    // \u5e73\u9762\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\n    plane_update(waveData);\n\n    // \u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3055\u308c\u308b\n    renderer.render(scene, camera);\n\n    window.requestAnimationFrame(draw);\n}\n\n</script>\n</body></html>\n\n\n\u53c2\u8003\n\nCanvas\u3092\u4f7f\u3063\u305fVj\u30b5\u30f3\u30d7\u30eb\n\n**[Web Music \u30cf\u30c3\u30ab\u30bd\u30f3#5](http://googledevjp.blogspot.jp/2016/06/web-music-5.html) \uff20Google Japan (2016/7/30)\u304c\u958b\u50ac\u3055\u308c\u307e\u3059\uff01 \u30c6\u30fc\u30de\u306f\u300cDJ/VJ\u300d\u3067\u3059\u306e\u3067\u3001\u5b9c\u3057\u3051\u308c\u3070\u3001\u3053\u3061\u3089\u306e\u30b5\u30f3\u30d7\u30eb\u3082\u53c2\u8003\u306b\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002**\n# \u307e\u305a\u306f\u52d5\u4f5c\u30b5\u30f3\u30d7\u30eb\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n- [\u30b5\u30f3\u30d7\u30eb]\n (https://dl.dropboxusercontent.com/u/50143793/vjsmpl/vj_smpl_threejs.html)\n    - \u2191Chrome\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n    - \u30de\u30a4\u30af\u3067\u62fe\u3063\u305f\u97f3\u306b\u53cd\u5fdc\u3057\u3066\u5e73\u9762\u304c\u63fa\u3089\u304e\u307e\u3059\u3002\n    - \u5916\u90e8MIDI\u6a5f\u5668\u3092\u63a5\u7d9a\u3057\u3066\u3001Control Change(CC)\u3092\u9001\u308b\u3068\u8996\u70b9\uff08\u30ab\u30e1\u30e9\u30fb\u30a2\u30f3\u30b0\u30eb\uff09\u304c\u5909\u308f\u308a\u307e\u3059\u3002\n<img width=\"1152\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-07-21 21.36.26.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/131750/cec5ffea-c7c0-64e2-1d4f-16373dc757cb.png\">\n\n\n#\u6982\u8981\n- getUserMedia \u3067\u30de\u30a4\u30af\u304b\u3089\u306e\u97f3\u58f0\u3092\u62fe\u3063\u3066\u3001WebAudioAPI\u306eanalyzerNode getFloatTimeDomainData()\u3067\u6ce2\u5f62\u60c5\u5831\u3092\u53d6\u5f97\u3002\n- \u305d\u306eWebAudio\u304b\u3089\u30b2\u30c3\u30c8\u3057\u305f\u60c5\u5831\u3092\u4f7f\u3063\u3066 Three.js \u3067\u4f5c\u3063\u305f Plane \u3092\u63fa\u3089\u3057\u3066\u3044\u307e\u3059\u3002\n- WebMIDI\u306f\u3001CC\u3092\u53d7\u3051\u308b\u3068 Three.js\u306e\u30ab\u30e1\u30e9\u306e\u89d2\u5ea6\u304c\u5909\u308f\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002\n\n#\u6e96\u5099\n- three.min.js\u306f\u5225\u9014[http://threejs.org/](http://threejs.org/)\u304b\u3089\u5165\u624b\u3057\u3066\u304f\u3060\u3055\u3044\u3002zip\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3068\u3001build\u30d5\u30a9\u30eb\u30c0\u5185\u306b\u3042\u308a\u307e\u3059\u3002\u3042\u3068\u306f\u3001\u4ee5\u4e0b\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u30b3\u30d4\u30da\u3059\u308c\u3070\u52d5\u304f\u306f\u305a\u3067\u3059\u304c\u3001getUserMedia\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001https\u3067\u306a\u3044\u3068\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002\n\n#\u30bd\u30fc\u30b9\u89e3\u8aac\n```\n<!DOCTYPE html>\n<html>\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n<title> Vj Smpl Three.js </title>\n<style>\n\tbody {\n\t\tcursor:crosshair;\n\t\tmargin: 0px;\n\t\toverflow: hidden;\n\t}\n</style>\n</head>\n\n<body onload=\"setup()\">\n<script src=\"three.min.js\"></script>\n\n<script>\n\n// Web Audio\u3000\u306e\u521d\u671f\u5316\nwindow.AudioContext = window.AudioContext;\nvar context = new AudioContext();\nvar analyser = context.createAnalyser();\n\n// three.js\u3067\u4f7f\u3046\u5909\u6570\nvar scene=null;\nvar camera=null;\nvar renderer=null;\n\nvar radius = 500;\nvar angle = 0;\nvar plane = null;\n\n// \u30de\u30a4\u30af\u306e\u97f3\u58f0\u3092\u53d6\u5f97\u3002\u3000WebAudio\u306eanalyser\u306b\u308f\u305f\u3057\u3066\u3044\u308b\u3002\nnavigator.getUserMedia = (navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia);\nnavigator.getUserMedia(\n\t{ video:false, audio:true },\n\tfunction(stream) {\n\t\tvar microphone = context.createMediaStreamSource(stream);\n\t\tmicrophone.connect(analyser);\n\t},\n\tfunction(error) { return; }\n);\n\n// \u753b\u9762\u306e\u30ea\u30b5\u30a4\u30ba\nfunction resize() {\n\tcamera.aspect = window.innerWidth / window.innerHeight;\n\tcamera.updateProjectionMatrix();\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n}\n\n// three.js \u306e\u30ab\u30e1\u30e9\u3068\u304b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u304b\u30e2\u30ed\u30e2\u30ed\u521d\u671f\u5316\nfunction three_init() \n{\n\t// \u307e\u305a\u30b7\u30fc\u30f3\u3092\u3064\u304f\u308a\u307e\u3059\u3002\n\tscene = new THREE.Scene();\n\t// \u6b21\u306b\u30ab\u30e1\u30e9\u3092\u3064\u304f\u308a\u307e\u3059\u3002\n\tcamera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 2000);\n\t// \u30ab\u30e1\u30e9\u3092\u30b7\u30fc\u30f3\u306b\u8ffd\u52a0\u3002\n\tscene.add(camera);\n\t// \u30ab\u30e1\u30e9\u4f4d\u7f6e\u3092\u8a2d\u5b9a\n\tcamera.position.z = radius;\n\t// \u30ec\u30f3\u30c0\u30e9\u30fc\u3092DOM\u4e0a\u306b\u8a2d\u7f6e\u3059\u308b\n\trenderer = new THREE.WebGLRenderer({antialias: true});\n\trenderer.setSize(window.innerWidth, window.innerHeight);\t\n\tdocument.body.appendChild(renderer.domElement);\n\t// \u80cc\u666f\u306e\u8272\n\trenderer.setClearColor(0x000000);\n\n\t// \u5e73\u9762\u3092\u751f\u6210\n\tthree_plane_init();\n}\n\n// \u5e73\u9762\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u751f\u6210\u3057\u3066scene\u306b\u3000add\nfunction three_plane_init()\n{\n\t// \u5e73\u9762\u306e\u30de\u30c6\u30ea\u30a2\u30eb\u3092\u8a2d\u5b9a\n\tvar mat = new THREE.MeshBasicMaterial( { color: 0xFFFFFF, wireframe: true } );\n\t// \u30b5\u30a4\u30ba\u3068\u30b0\u30ea\u30c3\u30c9\u3092\u8a2d\u5b9a\u3057\u3066\u5f62\u72b6\u3092\u6c7a\u3081\u308b\n\tvar geo = new THREE.PlaneGeometry (500, 500, 20, 20);\n\t// \u30de\u30c6\u30ea\u30a2\u30eb\u3068\u5f62\u72b6\u3092\u3082\u3068\u306b\u7269\u4f53\u3092\u751f\u6210\u3057\u307e\u3059\n\tplane = new THREE.Mesh(geo, mat);\n\n\t// \u6c34\u5e73\u9762\u306b\u306a\u308b\u3088\u3046\u306b90\u5ea6\u56de\u8ee2\n\tplane.rotation.set(Math.PI/2,0,0);\n\n\t// \u5e73\u9762\u3092\u30b7\u30fc\u30f3\u306b\u8ffd\u52a0\n\tscene.add( plane );\n}\n\n// Web MIDI\u3000API\u3000\u306e\u521d\u671f\u5316\nfunction web_midi_init()\n{\n\tnavigator.requestMIDIAccess({sysex:false}).then( success, failure );\n}\n\n// Web MIDI\u306e\u521d\u671f\u5316\u304c\u5931\u6557\u3057\u305f\u3068\u304d\u306b\u547c\u3070\u308c\u308b\u95a2\u6570\nfunction failure( error ) { }\n\n// Web MIDI\u306e\u521d\u671f\u5316\u304c\u6210\u529f\u3057\u305f\u3068\u304d\u306b\u547c\u3070\u308c\u308b\u95a2\u6570\nfunction success( m ) {\n\tvar inputs = null;\n\tvar midi=m;\n\n\tif (typeof midi.inputs === \"function\") {\n\t\tinputs = midi.inputs();\n\t} else {\n\t\tvar inputIterator = midi.inputs.values();\n\t\tinputs = [];\n\t\tfor (var o = inputIterator.next(); !o.done; o = inputIterator.next()) {\n\t\t\tinputs.push(o.value)\n\t\t}\n\t}\n\t// \u5168\u3066\u306eMIDI\u6a5f\u5668\u306e\u5165\u529b\u3092\u53d7\u3051\u308b\n\tfor (var i = 0; i < inputs.length; i++) {\n\t\tinputs[i].onmidimessage = handleMIDIMessage;\n\t}\n}\n\n// Web MIDI \u5165\u529b\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\n// CC\u3092\u53d7\u3051\u305f\u3089\u30ab\u30e1\u30e9\u306eangle\u304c\u5909\u5316\u3059\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3002\nfunction handleMIDIMessage( ev ) {\n\tswitch(ev.data[0] & 0xF0) {\n\tcase 0x90: // Note On\n\t\tbreak;\n\tcase 0x80: // Note Off\n\t\tbreak;\n\tcase 0xB0: // CC\n\t\t// MIDI 0-127\u306e\u5024\u30920-2PI\u306b\u5909\u63db\n\t\tangle = 2 * Math.PI * ev.data[2] / 127;\n\t\tbreak;\n\tdefault:\n\t\tbreak;\n\t}\n}\n\n// \u30ab\u30e1\u30e9\u306e\u30a2\u30f3\u30b0\u30eb\u8a2d\u5b9a\nfunction camera_update()\n{\n\t// \u30ab\u30e1\u30e9\u4f4d\u7f6e\u3092\u8a2d\u5b9a\n\tcamera.position.x = radius*Math.cos(angle);\n\tcamera.position.y = 200;\n\tcamera.position.z = radius*Math.sin(angle);\n\n\t// \u5e38\u306b\u539f\u70b9\u3092\u5411\u304f\u3088\u3046\u306b\n\tcamera.lookAt(new THREE.Vector3( 0, 0, 0 ));\n}\n\n// \u5e73\u9762\u306b\u6ce2\u5f62\u306e\u63fa\u3089\u304e\u3092\u4ed8\u52a0\nfunction plane_update(waveData)\n{\n\t// update\u306e\u30d5\u30e9\u30b0\u3092\u7acb\u3066\u308b\n\tplane.geometry.verticesNeedUpdate = true;\n\n\t// WebAudio AnalyzerNode\u304b\u3089\u53d6\u5f97\u3057\u305f\u30c7\u30fc\u30bf\u3067\u5e73\u9762\u306ez\u5ea7\u6a19\u3092\u52d5\u304b\u3059\n\tfor (var i = 0; i < plane.geometry.vertices.length; i++) {\n\t\tvar vertex = plane.geometry.vertices[i];\n\t\tvertex.z = waveData[i%waveData.length]*100;\n\t}\n\n}\n\n// \u521d\u671f\u5316\nfunction setup(e)\n{\n\tthree_init();\n\tweb_midi_init();\n\twindow.addEventListener(\"resize\", resize, false);\n\tdraw();\n}\n\n// \u6bce\u30d5\u30ec\u30fc\u30e0\u547c\u3070\u308c\u308b\u95a2\u6570\nfunction draw() {\n\t// \u6ce2\u5f62\u60c5\u5831\u3092\u53d6\u5f97\n\tvar waveData = new Float32Array(analyser.frequencyBinCount);\n\tanalyser.getFloatTimeDomainData(waveData);\n\n\t// \u30ab\u30e1\u30e9\u4f4d\u7f6e\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\n\tcamera_update();\n\t// \u5e73\u9762\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\n\tplane_update(waveData);\n\n\t// \u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3055\u308c\u308b\n\trenderer.render(scene, camera);\n\n\twindow.requestAnimationFrame(draw);\n}\n\n</script>\n</body></html>\n```\n\n#\u53c2\u8003\n- [Canvas\u3092\u4f7f\u3063\u305fVj\u30b5\u30f3\u30d7\u30eb](http://sascacci-blog.tumblr.com/post/95651677058/web-browser-vj-tutorial)\n", "tags": ["three.js", "VJ", "WebMIDIAPI", "WebAudioAPI", "getUserMedia"]}