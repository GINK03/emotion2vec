{"context": " More than 1 year has passed since last update.\u307e\u3060etcd\u30d0\u30fc\u30b8\u30e7\u30f30.4.6\u7cfb\u306e\u60c5\u5831\u304c\u7d50\u69cb\u6b8b\u3063\u3066\u3044\u307e\u3059\u304c\u3001etcd-2.1.x\u7cfb\u3068registrator\u3092\u4f7f\u3063\u305f\u69cb\u6210\u3092docker-compose\u3067\u884c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\u4ee5\u4e0b docker-compose.yml:\netcd:\n  image: quay.io/coreos/etcd\n  ports: [\"2379:2379\", \"2380:2380\"]\n  command: >-\n    -listen-client-urls http://0.0.0.0:2379\n    -listen-peer-urls http://0.0.0.0:2380\n    -advertise-client-urls http://etcd:2379\nregistrator:\n  image: gliderlabs/registrator:latest\n  command: --internal=true etcd://etcd:2379\n  volumes:\n    - /var/run/docker.sock:/tmp/docker.sock\n  links:\n    - etcd \n\n\u3068\u308a\u3042\u3048\u305a1\u53f0\u69cb\u6210\u3067\u3059\u304c\u3001\ncurl -L http://<host ip>:2379/v2/keys | jq .\n\n\u7b49\u3068\u3059\u308c\u3070 registrator \u304c\u304d\u3061\u3093\u3068\u52d5\u4f5c\u3057\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\u307e\u3060etcd\u30d0\u30fc\u30b8\u30e7\u30f30.4.6\u7cfb\u306e\u60c5\u5831\u304c\u7d50\u69cb\u6b8b\u3063\u3066\u3044\u307e\u3059\u304c\u3001etcd-2.1.x\u7cfb\u3068registrator\u3092\u4f7f\u3063\u305f\u69cb\u6210\u3092docker-compose\u3067\u884c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\u4ee5\u4e0b `docker-compose.yml`:\n\n```yaml\netcd:\n  image: quay.io/coreos/etcd\n  ports: [\"2379:2379\", \"2380:2380\"]\n  command: >-\n    -listen-client-urls http://0.0.0.0:2379\n    -listen-peer-urls http://0.0.0.0:2380\n    -advertise-client-urls http://etcd:2379\nregistrator:\n  image: gliderlabs/registrator:latest\n  command: --internal=true etcd://etcd:2379\n  volumes:\n    - /var/run/docker.sock:/tmp/docker.sock\n  links:\n    - etcd \n```\n\n\u3068\u308a\u3042\u3048\u305a1\u53f0\u69cb\u6210\u3067\u3059\u304c\u3001\n\n```shell-session\ncurl -L http://<host ip>:2379/v2/keys | jq .\n```\n\n\u7b49\u3068\u3059\u308c\u3070 registrator \u304c\u304d\u3061\u3093\u3068\u52d5\u4f5c\u3057\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n", "tags": ["docker-compose", "etcd", "registrator"]}