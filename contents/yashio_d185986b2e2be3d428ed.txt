{"tags": ["Yii1.1", "PHP"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002cakePHP\u3060\u3068\u6a19\u6e96\u3067\u3084\u3063\u3066\u304f\u308c\u308b\u30c6\u30fc\u30d6\u30eb\u306e\u767b\u9332\u30fb\u66f4\u65b0\u65e5\u3078\u306e\u81ea\u52d5\u30bb\u30c3\u30c8\u3002\n\u6a19\u6e96\u3067\u306f\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3072\u3068\u307e\u305a\u3069\u3093\u306a\u65b9\u6cd5\u304c\u3042\u308b\u306e\u304b\u3001\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u3002\n\u305d\u306e\u524d\u306b\u3001\u30c6\u30fc\u30d6\u30eb\u306b\u4ee5\u4e0b\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u4f5c\u3063\u3066\u304a\u304d\u307e\u3059\u3002\ncreated\nmodified\n\n\u65b9\u6cd5\u305d\u306e1\nbeforeSave\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3002\u4e00\u756a\u76f4\u611f\u7684\u3002\n\nuser.php\n\n\u3000\u3000protected function beforeSave()\n    {\n            if ($this->hasAttribute('modified'))\n            {\n                    if ($this->isNewRecord)\n                            $this->created = new CDbExpression('NOW()');\n                    else\n                            $this->modified = new CDbExpression('NOW()');\n            }\n            return parent::beforeSave();\n    }\n\n\n\n\u65b9\u6cd5\u305d\u306e2\nuser.php \u5185\u306b\u3042\u308brules()\u3092\u5909\u66f4\u3059\u308b\u65b9\u6cd5\u3002\nvalidation\u306b\u95a2\u9023\u3057\u3066\u3044\u308b\u3068\u3053\u308d\u306a\u306e\u3067\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u30bb\u30c3\u30c8\u306e\u3088\u3046\u306a\n\u30a4\u30e1\u30fc\u30b8\u3067\u3057\u3087\u3046\u304b\u3002\n\nuser.php\n\n\u3000 array(\n\u3000\u3000\u3000\u3000\u3000\u3000'created,modified',\n            'default',\n        \u3000\u3000'value'=>new CDbExpression('NOW()'),\n        \u3000\u3000'setOnEmpty'=>false,'on'=>'insert'\n\u3000\u3000\u3000\u3000),\n\n\n\n\u3044\u3084\u3001\u5909\u66f4\u6642\u3082\u5165\u308c\u3066\u307b\u3057\u3044\u3088\u3063\u3066\u6642\u306b\u306f\u3053\u306e\u3088\u3046\u306b\u3057\u3066\u307f\u305f\u3002\n\u3082\u3046\u3061\u3087\u3063\u3068\u30b9\u30de\u30fc\u30c8\u306a\u66f8\u304d\u65b9\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u304c\u3002\n\nuser.php\n\n\u3000\u3000\u3000\u3000\u3000array(\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'created',\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'default',\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'value'=>new CDbExpression('NOW()'),\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'setOnEmpty'=>false,\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'on'=>'insert'\n\u3000\u3000\u3000\u3000\u3000),\n\u3000\u3000\u3000\u3000\u3000array(\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'modified',\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'default',\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'value'=>new CDbExpression('NOW()'),\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'setOnEmpty'=>false,\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'on'=>'update'\n\u3000\u3000\u3000\u3000\u3000),\n\n\n\n\u65b9\u6cd5\u305d\u306e3\nbehaviors()\u3092\u8a2d\u5b9a\u3059\u308b\u3002\nsetUpdateOnCreate\u306e\u30a4\u30d9\u30f3\u30c8\u6642\u306b\u547c\u3073\u51fa\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3002\n\nuser.php\n\npublic function behaviors()\n{\n    return array(\n        'CTimestampBehavior' => array(\n            'class' => 'zii.behaviors.CTimestampBehavior',\n            'createAttribute' => 'created',\n            'updateAttribute' => 'modified',\n            'setUpdateOnCreate' => true,\n        ),\n    );\n}\n\n\n\n\u3063\u3066\u82f1\u8a9e\u306e\u516c\u5f0f\u306b\nhttp://www.yiiframework.com/wiki/10/how-to-automate-timestamps-in-activerecord-models/\n\u3053\u3093\u306a\u8a18\u4e8b\u304c\u305d\u306e\u307e\u307e\u2026\uff01\n\u307e\u3060\u307e\u3060Yii\u3092\u89e6\u308a\u59cb\u3081\u305f\u3070\u304b\u308a\u3067\u3059\u304c\u3001\u307f\u306a\u3055\u3093\u3069\u3046\u305e\u3088\u308d\u3057\u304f\uff01\ncakePHP\u3060\u3068\u6a19\u6e96\u3067\u3084\u3063\u3066\u304f\u308c\u308b\u30c6\u30fc\u30d6\u30eb\u306e\u767b\u9332\u30fb\u66f4\u65b0\u65e5\u3078\u306e\u81ea\u52d5\u30bb\u30c3\u30c8\u3002\n\u6a19\u6e96\u3067\u306f\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3072\u3068\u307e\u305a\u3069\u3093\u306a\u65b9\u6cd5\u304c\u3042\u308b\u306e\u304b\u3001\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u305d\u306e\u524d\u306b\u3001\u30c6\u30fc\u30d6\u30eb\u306b\u4ee5\u4e0b\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u4f5c\u3063\u3066\u304a\u304d\u307e\u3059\u3002\n**created**\n**modified**\n\n#\u65b9\u6cd5\u305d\u306e1\nbeforeSave\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3002\u4e00\u756a\u76f4\u611f\u7684\u3002\n\n```php:user.php\n\n\u3000\u3000protected function beforeSave()\n    {\n            if ($this->hasAttribute('modified'))\n            {\n                    if ($this->isNewRecord)\n                            $this->created = new CDbExpression('NOW()');\n                    else\n                            $this->modified = new CDbExpression('NOW()');\n            }\n            return parent::beforeSave();\n    }\n```\n\n#\u65b9\u6cd5\u305d\u306e2\nuser.php \u5185\u306b\u3042\u308brules()\u3092\u5909\u66f4\u3059\u308b\u65b9\u6cd5\u3002\nvalidation\u306b\u95a2\u9023\u3057\u3066\u3044\u308b\u3068\u3053\u308d\u306a\u306e\u3067\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u30bb\u30c3\u30c8\u306e\u3088\u3046\u306a\n\u30a4\u30e1\u30fc\u30b8\u3067\u3057\u3087\u3046\u304b\u3002\n\n```php:user.php\n\n\u3000\tarray(\n\u3000\u3000\u3000\u3000\u3000\u3000'created,modified',\n            'default',\n        \u3000\u3000'value'=>new CDbExpression('NOW()'),\n        \u3000\u3000'setOnEmpty'=>false,'on'=>'insert'\n\u3000\u3000\u3000\u3000),\n\n```\n\n\u3044\u3084\u3001\u5909\u66f4\u6642\u3082\u5165\u308c\u3066\u307b\u3057\u3044\u3088\u3063\u3066\u6642\u306b\u306f\u3053\u306e\u3088\u3046\u306b\u3057\u3066\u307f\u305f\u3002\n\u3082\u3046\u3061\u3087\u3063\u3068\u30b9\u30de\u30fc\u30c8\u306a\u66f8\u304d\u65b9\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u304c\u3002\n\n```php:user.php\n\n\u3000\u3000\u3000\u3000\u3000array(\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'created',\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'default',\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'value'=>new CDbExpression('NOW()'),\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'setOnEmpty'=>false,\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'on'=>'insert'\n\u3000\u3000\u3000\u3000\u3000),\n\u3000\u3000\u3000\u3000\u3000array(\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'modified',\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'default',\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'value'=>new CDbExpression('NOW()'),\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'setOnEmpty'=>false,\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000'on'=>'update'\n\u3000\u3000\u3000\u3000\u3000),\n```\n\n#\u65b9\u6cd5\u305d\u306e3\nbehaviors()\u3092\u8a2d\u5b9a\u3059\u308b\u3002\nsetUpdateOnCreate\u306e\u30a4\u30d9\u30f3\u30c8\u6642\u306b\u547c\u3073\u51fa\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3002\n\n\n```php:user.php\n\npublic function behaviors()\n{\n    return array(\n        'CTimestampBehavior' => array(\n            'class' => 'zii.behaviors.CTimestampBehavior',\n            'createAttribute' => 'created',\n            'updateAttribute' => 'modified',\n            'setUpdateOnCreate' => true,\n        ),\n    );\n}\n\n```\n\n\u3063\u3066\u82f1\u8a9e\u306e\u516c\u5f0f\u306b\nhttp://www.yiiframework.com/wiki/10/how-to-automate-timestamps-in-activerecord-models/\n\u3053\u3093\u306a\u8a18\u4e8b\u304c\u305d\u306e\u307e\u307e\u2026\uff01\n\n\u307e\u3060\u307e\u3060Yii\u3092\u89e6\u308a\u59cb\u3081\u305f\u3070\u304b\u308a\u3067\u3059\u304c\u3001\u307f\u306a\u3055\u3093\u3069\u3046\u305e\u3088\u308d\u3057\u304f\uff01\n"}