{"tags": ["docker", "alpine"], "context": "\n\n\u3069\u308c\u304f\u3089\u3044\u5c0f\u3055\u304f\u306a\u308b\u306e\u304b\n\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u3059\u308b\u306b\u3082\u3001\u643a\u5e2f\u3067\u30c6\u30b6\u30ea\u30f3\u30b0\u3059\u308b\u306b\u3082\n\u3053\u308c\u304f\u3089\u3044\u5c0f\u3055\u3051\u308c\u3070\u3044\u3051\u308b\u30fb\u30fb\u304b\u3082\u3057\u308c\u306a\u3044\u30ec\u30d9\u30eb\u3002\n\n\u30b5\u30a4\u30ba1 \u3092\u6bd4\u8f03\u3057\u3066\u307f\u308b\n\n\n\n\u30a4\u30e1\u30fc\u30b8\nversion\nOfficial\nAlpine\u7248\nDockerfile\n\n\n\n\nGolang\n1.6.2\n254MB\n72MB\n\ngolang:1.6.2-alpine (Official)\n\n\nJava\n8\n243MB\n52MB\n\njava:8-alpine (Official)\n\n\n\u3000\u3000Clojure\nLeiningen 2.6.1\n257MB\n71MB\n\nclojure:alpine (Official)\n\n\n\u3000\u3000Maven\n3.3\n252MB\n51MB\npottava/maven:3.3\n\n\n\u3000\u3000Gradle\n2.11\n-\n89MB\npottava/gradle:2\n\n\n\u3000\u3000PlayFramework\n1.4\n-\n130MB\npottava/play:1.4\n\n\n\u3000\u3000AWS-DynamoDB\n-\n-\n103MB\npottava/aws-dynamodb-local\n\n\nMySQL\n5.6\n111MB\n-\n\u306a\u30572\n\n\n\nNginx\n1.11 3\n\n71MB\n19MB\n\nnginx:1.11-alpine (Official)\n\n\nNode.js\n6.3\n256MB\n16MB\npottava/nodejs:6.3\n\n\nPHP + Apache\n5.6 + 2.4\n152MB\n28MB\n\nphp:5.6-alpine (Official)\n\n\nPostgreSQL\n9.4\n100MB\n9MB\nkiasaki/alpine-postgres:9.4\n\n\nPython\n2.7\n261MB\n19MB\n\npython:2.7-alpine (Official)\n\n\n\u3000\u3000AWS-CLI\n1.10\n-\n27MB\npottava/awscli:1.10\n\n\n\u3000\u3000Sphinx\n1.4\n-\n38MB\npottava/sphinx:1.4\n\n\nRedis\n3.0\n62MB\n5MB\n\nredis:3.0-alpine (Official)\n\n\nRuby\n2.3\n276MB\n40MB\n\nruby:2.3-alpine (Official)\n\n\n\n\n\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u3067\u306a\u3044 Alpine \u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3046\u306a\u3089\n\u4e0a\u306e\u8868\u306e\u901a\u308a\u3001\u6700\u8fd1\u306f\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u3067\u3082 Alpine \u7248\u304c\u3042\u3063\u305f\u308a\u3057\u307e\u3059\u304c\n\u306a\u3051\u308c\u3070\u3001\u30b5\u30a4\u30ba\u306e\u5c0f\u3055\u306a\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u88fd\u3067\u3082\u5168\u7136\u3088\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u9078\u3076\u306a\u3089\u3001\u6700\u4f4e\u9650 Automated Build \u3067\u4f5c\u6210\u3055\u308c\u3066\u304a\u308a\nDockerfile \u304b\u3089\u64cd\u4f5c\u5c65\u6b74\u304c\u660e\u77ad\u306a\u3082\u306e4 \u304c\u3088\u3055\u305d\u3046\u3067\u3059\u3002\nADD / COPY \u3092\u3057\u3066\u3044\u308b\u3082\u306e\u306f GitHub \u306b\u884c\u3051\u3070\u4e2d\u8eab\u3092\u78ba\u304b\u3081\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u3082\u3057\u304f\u306f\u3001\u307e\u308b\u3063\u3068\u30b3\u30d4\u30fc\u3057\u3066\u81ea\u5206\u3067\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u308b\u306e\u3082\u624b\u3067\u3059\u3002\n\n\u30a2\u30d7\u30ea\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306b Alpine\n\u3044\u305a\u308c\u306b\u305b\u3088\u3001\u7279\u5b9a OS \u306e\u30b7\u30a7\u30eb\u3092\u76f4\u63a5\u53e9\u304f\u3088\u3046\u306a\u30a2\u30d7\u30ea\u3067\u306a\u3044\u9650\u308a\u3001\nAlpine \u306f\u3068\u3066\u3082\u3044\u3044\u9078\u629e\u80a2\u3068\u8a00\u3048\u305d\u3046\u3067\u3059\u3002\nGolang \u88fd\u3067\u3082\u306a\u3051\u308c\u30705\u3001Alpine \u3067\u3088\u3055\u305d\u3046\u3002\n\u53c2\u8003\u8cc7\u6599\u3067\u30b5\u30a4\u30d0\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u5c71\u7530\u3055\u3093\u304c \u66f8\u304b\u308c\u3066\u3044\u308b \u3088\u3046\u306b\n\u91cd\u3044\u30a4\u30e1\u30fc\u30b8\u306f\u307b\u3093\u3068\u306b\u3044\u3044\u3053\u3068\u304c\u3042\u308a\u307e\u305b\u3093\u3002\n\u8efd\u304f\u3057\u307e\u3057\u3087\u3046\uff01\n\n\u3069\u3046\u3084\u3063\u3066\u4f5c\u308b\u306e\u304b\n\n\u57fa\u672c\u306f\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\n\u52b9\u7387\u7684\u306b\u5b89\u5168\u306a Dockerfile \u3092\u4f5c\u308b\u306b\u306f \u306b\u3082\u30c1\u30e9\u3063\u3068\u66f8\u304d\u307e\u3057\u305f\u304c\n\u305b\u3063\u304b\u304f\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3067 Alpine \u3092\u4f7f\u3063\u3066\u3082\u3001Dockerfile \u304c\u30a4\u30b1\u3066\u306a\u3044\u3068\u53f0\u7121\u3057\u3067\u3059\u3002\n\u4ee5\u4e0b\u3042\u305f\u308a\u306b\u306f\u6ce8\u610f\u3057\u307e\u3057\u3087\u3046\uff01\n\n\u30ec\u30a4\u30e4\u306e\u6570\u3092\u6700\u5c0f\u306b\uff08&&\u3067\u306e\u30b3\u30de\u30f3\u30c9\u30c1\u30a7\u30fc\u30f3\u306a\u3069\u3092\u99c6\u4f7f\uff09\n\u540c\u4e00\u30ec\u30a4\u30e4\u30fc\u4e0a\u3067\u3001\u6700\u7d42\u7684\u306b\u4e0d\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u30fb\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u524a\u9664\u3059\u308b\nADD / COPY \u3059\u308b\u306a\u3089 .dockerignore \u3082\u66f8\u3044\u3066\u304a\u304f\n\n\napk --update add \u3068 apk --no-cache add\n\nAlpine Linux \u306f 3.3 \u304b\u3089 apk \u3067 --no-cache \u3068\u3044\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u4f7f\u3048\u307e\u3059\u3002\n\u5f93\u6765\u306f --update add \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u5f8c\u306b rm -rf /var/cache/apk/* \u3067\n\u4e0d\u8981\u306a\u30b4\u30df\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u3066\u3044\u305f\u3088\u3046\u3067\u3059\u304c\u3001\u3044\u307e\u3084 --no-cache \u3067 OK \u3067\u3059\u3002\n\napk add --virtual \u306e\u5229\u7528\napk \u3067\u306f --virtual \u3092\u6307\u5b9a\u3057\u3066\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u304c\n\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u4eee\u306e\u540d\u524d\u3092\u3064\u3051\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u3051\u3070\u3001\n\u5f8c\u3067\u305d\u308c\u3089\u3092\u4eee\u306e\u540d\u524d\u3067\u4e00\u62ec\u524a\u9664\u3067\u304d\u307e\u3059\u3002\n\n--virtual\nRUN apk add --no-cache --virtual .ruby-builddeps curl gcc make .. && \\\n    curl ... && \\\n    ... && \\\n    make install ... && \\\n    apk del .ruby-builddeps\n\n\n\u3053\u308c\u3067\u524a\u9664\u3082\u308c\u3082\u9632\u3052\u308b\u3057\u3001\u3068\u3066\u3082\u4fbf\u5229\u3067\u3059\u306d\uff01\n\napk del --purge \u306e\u5229\u7528\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u524a\u9664\u3059\u308b\u969b\u306b --purge \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6e21\u3059\u3053\u3068\u3067\u3001\n\u95a2\u9023\u3059\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3082\u5408\u308f\u305b\u3066\u524a\u9664\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u304a\u307e\u3051\n\n\u53c2\u8003\u6587\u732e\n\n\u304a\u524d\u306eDocker\u30a4\u30e1\u30fc\u30b8\u306f\u307e\u3060\u91cd\u3044\ud83d\udca2\ud83d\udca2\ud83d\udca2\nAlpine Linux \u306b\u3064\u3044\u3066\u3082\u89e6\u308c\u3089\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3068\u3066\u3082\u3044\u3044\u8cc7\u6599\uff01\n\u3000\nAlpine Linux package management\nComparison with other distros\n\u3061\u3087\u308d\u3063\u3068\u76ee\u3092\u901a\u3057\u3066\u304a\u304f\u3068\u3044\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n\nAlpine \u306e\u8aad\u307f\u65b9\n\u30a2\u30eb\u30d7\u30b9\uff08\u5c71\u8108\uff09\u3068\u304b\u30a2\u30eb\u30da\u30f3\uff08\u30b9\u30ad\u30fc\uff09\u3068\u304b\u65e5\u672c\u8a9e\u3060\u3068\u5019\u88dc\u304c\u8907\u6570\u3042\u308b\u3093\u3067\u3059\u304c\n\u767a\u97f3\u8a18\u53f7\u3092\u898b\u308b\u3068\u30a2\u30eb\u30d1\u30a4\u30f3\u306a\u6c17\u304c\u3057\u307e\u3059\u3002\u81ea\u4fe1\u304c\u306a\u3044\u306e\u3067\u304a\u3082\u3080\u308d\u306b Mac \u3067\n\nMacOSX\nsay alpine\n\n\n\u3092\u5b9f\u884c\u3057\u307e\u3057\u305f\u304c\u3001\u3084\u3063\u3071\u308a\u30a2\u30eb\u30d1\u30a4\u30f3\u3068\u805e\u3053\u3048\u308b\u6c17\u304c\u3057\u307e\u3059\u3002\n\u305f\u3076\u3093\u30a2\u30eb\u30d1\u30a4\u30f3\u306a\u306e\u3067\u3057\u3087\u3046\u30fb\u30fb\n\u3000\n\n\n\n\nDockerHub \u3067\u898b\u3048\u308b\u3001\u30c7\u30fc\u30bf\u5727\u7e2e\u72b6\u614b\u3067\u306e\u30b5\u30a4\u30ba\u00a0\u21a9\n\n\n\u73fe\u5728 Alpine \u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30de\u30cd\u30fc\u30b8\u30e3 apk \u3067 MySQL \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068 MariaDB \u304c\u5165\u308b\u72b6\u614b\u3002\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306e MySQL \u30a4\u30e1\u30fc\u30b8\u304c\u6d17\u7df4\u3055\u308c \u5b8c\u6210\u5ea6\u9ad8\u3059\u304e \u306a\u306e\u3067\u3001\u3053\u3053\u3060\u3051\u306f 111MB\u3067\u59a5\u5354\u3057\u3066\u3082\u3044\u3044\u3068\u601d\u3063\u3066\u307e\u3059..\u00a0\u21a9\n\n\n\u30d0\u30fc\u30b8\u30e7\u30f3 1.8 \u306e Alpine \u7248\u306a\u3089\u3001\u306a\u3093\u3068 3MB \u3067\u3059\u3002\u307e\u305f\u3001SSL \u3084 RealIP \u3092\u9759\u7684\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f Nginx \u304c\u307b\u3057\u3051\u308c\u3070\u3001\u3053\u3093\u306a\u611f\u3058 \u3067\u4f5c\u308c\u307e\u3059\u3002\u00a0\u21a9\n\n\ndocker history \u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u3082\u4fbf\u5229\u00a0\u21a9\n\n\nGo \u306a\u3089 Linux \u5411\u3051\u306b\u30d3\u30eb\u30c9\u3057\u305f\u3082\u306e\u3092 scratch \u306b\u7a81\u3063\u8fbc\u3080 \u65b9\u6cd5\u304c\u6700\u8efd\u91cf\u3002\u00a0\u21a9\n\n\n\n# \u3069\u308c\u304f\u3089\u3044\u5c0f\u3055\u304f\u306a\u308b\u306e\u304b\n\n\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u3059\u308b\u306b\u3082\u3001\u643a\u5e2f\u3067\u30c6\u30b6\u30ea\u30f3\u30b0\u3059\u308b\u306b\u3082\n\u3053\u308c\u304f\u3089\u3044\u5c0f\u3055\u3051\u308c\u3070\u3044\u3051\u308b\u30fb\u30fb\u304b\u3082\u3057\u308c\u306a\u3044\u30ec\u30d9\u30eb\u3002\n\n## \u30b5\u30a4\u30ba[^1] \u3092\u6bd4\u8f03\u3057\u3066\u307f\u308b\n\n| \u30a4\u30e1\u30fc\u30b8 | version | Official | Alpine\u7248 | Dockerfile\n|:-----------|:-----------|------------:|------------:|:------------|\n| Golang | 1.6.2 | [254MB](https://hub.docker.com/r/library/golang/tags/) | 72MB | [golang:1.6.2-alpine](https://github.com/docker-library/golang/blob/master/1.6/alpine/Dockerfile) (Official)\n| Java | 8 | [243MB](https://hub.docker.com/r/library/java/tags/) | [52MB](https://hub.docker.com/r/library/java/tags/) | [java:8-alpine](https://github.com/docker-library/openjdk/blob/master/8-jdk/alpine/Dockerfile) (Official)\n| \u3000\u3000Clojure | Leiningen 2.6.1 | [257MB](https://hub.docker.com/r/library/clojure/tags/) | [71MB](https://hub.docker.com/r/library/clojure/tags/) | [clojure:alpine](https://github.com/Quantisan/docker-clojure/blob/master/alpine/Dockerfile) (Official)\n| \u3000\u3000Maven | 3.3 | [252MB](https://hub.docker.com/r/library/maven/tags/) | [51MB](https://hub.docker.com/r/pottava/maven/tags/) | [pottava/maven:3.3](https://github.com/pottava/docker-maven/blob/master/versions/3.3/Dockerfile)\n| \u3000\u3000Gradle | 2.11 | - | [89MB](https://hub.docker.com/r/pottava/gradle/tags/) | [pottava/gradle:2](https://github.com/pottava/docker-gradle/blob/master/versions/2/Dockerfile)\n| \u3000\u3000PlayFramework | 1.4 | - | [130MB](https://hub.docker.com/r/pottava/play/tags/) | [pottava/play:1.4](https://github.com/pottava/docker-playframework/blob/master/versions/1.4/Dockerfile)\n| \u3000\u3000AWS-DynamoDB | - | - | [103MB](https://hub.docker.com/r/pottava/aws-dynamodb-local/tags/) | [pottava/aws-dynamodb-local](https://github.com/pottava/aws-dynamodb-local/blob/master/versions/latest/Dockerfile)\n| MySQL | 5.6 | [111MB](https://hub.docker.com/r/library/mysql/tags/) | - | \u306a\u3057[^2]\n| Nginx | 1.11 [^3] | [71MB](https://hub.docker.com/r/library/nginx/tags/) | [19MB](https://hub.docker.com/r/library/nginx/tags/) | [nginx:1.11-alpine](https://github.com/nginxinc/docker-nginx/blob/master/mainline/alpine/Dockerfile) (Official)\n| Node.js | 6.3 | [256MB](https://hub.docker.com/r/library/node/tags/) | [16MB](https://hub.docker.com/r/pottava/nodejs/tags/) | [pottava/nodejs:6.3](https://github.com/pottava/docker-nodejs/blob/master/versions/6.3/Dockerfile)\n| PHP + Apache | 5.6 + 2.4 | [152MB](https://hub.docker.com/r/library/php/tags/) | [28MB](https://hub.docker.com/r/library/php/tags/) | [php:5.6-alpine](https://github.com/docker-library/php/blob/master/5.6/alpine/Dockerfile) (Official)\n| PostgreSQL | 9.4 | [100MB](https://hub.docker.com/r/library/postgres/tags/) | [9MB](https://hub.docker.com/r/kiasaki/alpine-postgres/tags/) | [kiasaki/alpine-postgres:9.4](https://github.com/kiasaki/docker-alpine-postgres/blob/master/Dockerfile)\n| Python | 2.7 | [261MB](https://hub.docker.com/r/library/python/tags/) | 19MB | [python:2.7-alpine](https://github.com/docker-library/python/blob/master/2.7/alpine/Dockerfile) (Official)\n| \u3000\u3000AWS-CLI | 1.10 | - | [27MB](https://hub.docker.com/r/pottava/awscli/tags/) | [pottava/awscli:1.10](https://github.com/pottava/docker-awscli/blob/master/versions/1.10/Dockerfile)\n| \u3000\u3000Sphinx | 1.4 | - | [38MB](https://hub.docker.com/r/pottava/sphinx/tags/) | [pottava/sphinx:1.4](https://github.com/pottava/docker-sphinx/blob/master/versions/1.4/Dockerfile)\n| Redis | 3.0 | [62MB](https://hub.docker.com/r/library/redis/tags/) | 5MB | [redis:3.0-alpine](https://github.com/docker-library/redis/blob/master/3.0/alpine/Dockerfile) (Official)\n| Ruby | 2.3 | [276MB](https://hub.docker.com/r/library/ruby/tags/) | 40MB | [ruby:2.3-alpine](https://github.com/docker-library/ruby/blob/master/2.3/alpine/Dockerfile) (Official)\n\n## \u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u3067\u306a\u3044 Alpine \u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3046\u306a\u3089\n\n\u4e0a\u306e\u8868\u306e\u901a\u308a\u3001\u6700\u8fd1\u306f\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u3067\u3082 Alpine \u7248\u304c\u3042\u3063\u305f\u308a\u3057\u307e\u3059\u304c\n\u306a\u3051\u308c\u3070\u3001\u30b5\u30a4\u30ba\u306e\u5c0f\u3055\u306a\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u88fd\u3067\u3082\u5168\u7136\u3088\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u9078\u3076\u306a\u3089\u3001\u6700\u4f4e\u9650 `Automated Build` \u3067\u4f5c\u6210\u3055\u308c\u3066\u304a\u308a\nDockerfile \u304b\u3089\u64cd\u4f5c\u5c65\u6b74\u304c\u660e\u77ad\u306a\u3082\u306e[^4] \u304c\u3088\u3055\u305d\u3046\u3067\u3059\u3002\nADD / COPY \u3092\u3057\u3066\u3044\u308b\u3082\u306e\u306f GitHub \u306b\u884c\u3051\u3070\u4e2d\u8eab\u3092\u78ba\u304b\u3081\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u3082\u3057\u304f\u306f\u3001\u307e\u308b\u3063\u3068\u30b3\u30d4\u30fc\u3057\u3066\u81ea\u5206\u3067\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u308b\u306e\u3082\u624b\u3067\u3059\u3002\n\n## \u30a2\u30d7\u30ea\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u306b Alpine\n\n\u3044\u305a\u308c\u306b\u305b\u3088\u3001\u7279\u5b9a OS \u306e\u30b7\u30a7\u30eb\u3092\u76f4\u63a5\u53e9\u304f\u3088\u3046\u306a\u30a2\u30d7\u30ea\u3067\u306a\u3044\u9650\u308a\u3001\nAlpine \u306f\u3068\u3066\u3082\u3044\u3044\u9078\u629e\u80a2\u3068\u8a00\u3048\u305d\u3046\u3067\u3059\u3002\nGolang \u88fd\u3067\u3082\u306a\u3051\u308c\u3070[^5]\u3001Alpine \u3067\u3088\u3055\u305d\u3046\u3002\n\n\u53c2\u8003\u8cc7\u6599\u3067\u30b5\u30a4\u30d0\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u5c71\u7530\u3055\u3093\u304c [\u66f8\u304b\u308c\u3066\u3044\u308b](https://speakerdeck.com/stormcat24/oqian-falsedockerimezihamadazhong-i?slide=20) \u3088\u3046\u306b\n\u91cd\u3044\u30a4\u30e1\u30fc\u30b8\u306f\u307b\u3093\u3068\u306b\u3044\u3044\u3053\u3068\u304c\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u8efd\u304f\u3057\u307e\u3057\u3087\u3046\uff01\n\n# \u3069\u3046\u3084\u3063\u3066\u4f5c\u308b\u306e\u304b\n\n## \u57fa\u672c\u306f\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\n\n[\u52b9\u7387\u7684\u306b\u5b89\u5168\u306a Dockerfile \u3092\u4f5c\u308b\u306b\u306f](/pottava/items/452bf80e334bc1fee69a) \u306b\u3082\u30c1\u30e9\u3063\u3068\u66f8\u304d\u307e\u3057\u305f\u304c\n\u305b\u3063\u304b\u304f\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3067 Alpine \u3092\u4f7f\u3063\u3066\u3082\u3001Dockerfile \u304c\u30a4\u30b1\u3066\u306a\u3044\u3068\u53f0\u7121\u3057\u3067\u3059\u3002\n\u4ee5\u4e0b\u3042\u305f\u308a\u306b\u306f\u6ce8\u610f\u3057\u307e\u3057\u3087\u3046\uff01\n\n* \u30ec\u30a4\u30e4\u306e\u6570\u3092\u6700\u5c0f\u306b\uff08&&\u3067\u306e\u30b3\u30de\u30f3\u30c9\u30c1\u30a7\u30fc\u30f3\u306a\u3069\u3092\u99c6\u4f7f\uff09\n* \u540c\u4e00\u30ec\u30a4\u30e4\u30fc\u4e0a\u3067\u3001\u6700\u7d42\u7684\u306b\u4e0d\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u30fb\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u524a\u9664\u3059\u308b\n* ADD / COPY \u3059\u308b\u306a\u3089 `.dockerignore` \u3082\u66f8\u3044\u3066\u304a\u304f\n\n## `apk --update add` \u3068 `apk --no-cache add`\n\nAlpine Linux \u306f 3.3 \u304b\u3089 apk \u3067 `--no-cache` \u3068\u3044\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u4f7f\u3048\u307e\u3059\u3002\n\u5f93\u6765\u306f `--update add` \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u5f8c\u306b `rm -rf /var/cache/apk/*` \u3067\n\u4e0d\u8981\u306a\u30b4\u30df\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u3066\u3044\u305f\u3088\u3046\u3067\u3059\u304c\u3001\u3044\u307e\u3084 `--no-cache` \u3067 OK \u3067\u3059\u3002\n\n## `apk add --virtual` \u306e\u5229\u7528\n\napk \u3067\u306f `--virtual` \u3092\u6307\u5b9a\u3057\u3066\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u304c\n\u3053\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u4eee\u306e\u540d\u524d\u3092\u3064\u3051\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u3051\u3070\u3001\n\u5f8c\u3067\u305d\u308c\u3089\u3092\u4eee\u306e\u540d\u524d\u3067\u4e00\u62ec\u524a\u9664\u3067\u304d\u307e\u3059\u3002\n\n```bash:--virtual\nRUN apk add --no-cache --virtual .ruby-builddeps curl gcc make .. && \\\n    curl ... && \\\n    ... && \\\n    make install ... && \\\n    apk del .ruby-builddeps\n```\n\n\u3053\u308c\u3067\u524a\u9664\u3082\u308c\u3082\u9632\u3052\u308b\u3057\u3001\u3068\u3066\u3082\u4fbf\u5229\u3067\u3059\u306d\uff01\n\n## `apk del --purge` \u306e\u5229\u7528\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u524a\u9664\u3059\u308b\u969b\u306b `--purge` \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6e21\u3059\u3053\u3068\u3067\u3001\n\u95a2\u9023\u3059\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3082\u5408\u308f\u305b\u3066\u524a\u9664\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n# \u304a\u307e\u3051\n\n## \u53c2\u8003\u6587\u732e\n* [\u304a\u524d\u306eDocker\u30a4\u30e1\u30fc\u30b8\u306f\u307e\u3060\u91cd\u3044\ud83d\udca2\ud83d\udca2\ud83d\udca2](https://speakerdeck.com/stormcat24/oqian-falsedockerimezihamadazhong-i)\nAlpine Linux \u306b\u3064\u3044\u3066\u3082\u89e6\u308c\u3089\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3068\u3066\u3082\u3044\u3044\u8cc7\u6599\uff01\n\u3000\n\n* [Alpine Linux package management](http://wiki.alpinelinux.org/wiki/Alpine_Linux_package_management)\n[Comparison with other distros](http://wiki.alpinelinux.org/wiki/Comparison_with_other_distros)\n\u3061\u3087\u308d\u3063\u3068\u76ee\u3092\u901a\u3057\u3066\u304a\u304f\u3068\u3044\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n## Alpine \u306e\u8aad\u307f\u65b9\n\n\u30a2\u30eb\u30d7\u30b9\uff08\u5c71\u8108\uff09\u3068\u304b\u30a2\u30eb\u30da\u30f3\uff08\u30b9\u30ad\u30fc\uff09\u3068\u304b\u65e5\u672c\u8a9e\u3060\u3068\u5019\u88dc\u304c\u8907\u6570\u3042\u308b\u3093\u3067\u3059\u304c\n\u767a\u97f3\u8a18\u53f7\u3092\u898b\u308b\u3068\u30a2\u30eb\u30d1\u30a4\u30f3\u306a\u6c17\u304c\u3057\u307e\u3059\u3002\u81ea\u4fe1\u304c\u306a\u3044\u306e\u3067\u304a\u3082\u3080\u308d\u306b Mac \u3067\n\n```bash:MacOSX\nsay alpine\n```\n\n\u3092\u5b9f\u884c\u3057\u307e\u3057\u305f\u304c\u3001\u3084\u3063\u3071\u308a\u30a2\u30eb\u30d1\u30a4\u30f3\u3068\u805e\u3053\u3048\u308b\u6c17\u304c\u3057\u307e\u3059\u3002\n\u305f\u3076\u3093\u30a2\u30eb\u30d1\u30a4\u30f3\u306a\u306e\u3067\u3057\u3087\u3046\u30fb\u30fb\n\n\u3000\n\n[^1]: DockerHub \u3067\u898b\u3048\u308b\u3001\u30c7\u30fc\u30bf\u5727\u7e2e\u72b6\u614b\u3067\u306e\u30b5\u30a4\u30ba\n[^2]: \u73fe\u5728 Alpine \u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u30de\u30cd\u30fc\u30b8\u30e3 apk \u3067 MySQL \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068 MariaDB \u304c\u5165\u308b\u72b6\u614b\u3002\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306e MySQL \u30a4\u30e1\u30fc\u30b8\u304c\u6d17\u7df4\u3055\u308c [\u5b8c\u6210\u5ea6\u9ad8\u3059\u304e](http://dqn.sakusakutto.jp/2015/10/docker_mysqld_tutorial.html) \u306a\u306e\u3067\u3001\u3053\u3053\u3060\u3051\u306f 111MB\u3067\u59a5\u5354\u3057\u3066\u3082\u3044\u3044\u3068\u601d\u3063\u3066\u307e\u3059..\n[^3]: \u30d0\u30fc\u30b8\u30e7\u30f3 1.8 \u306e Alpine \u7248\u306a\u3089\u3001\u306a\u3093\u3068 [3MB](https://hub.docker.com/r/pottava/nginx/tags/) \u3067\u3059\u3002\u307e\u305f\u3001SSL \u3084 RealIP \u3092\u9759\u7684\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f Nginx \u304c\u307b\u3057\u3051\u308c\u3070\u3001[\u3053\u3093\u306a\u611f\u3058](https://github.com/pottava/docker-nginx/blob/master/versions/1.9/Dockerfile) \u3067\u4f5c\u308c\u307e\u3059\u3002\n[^4]: `docker history` \u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u3082\u4fbf\u5229\n[^5]: Go \u306a\u3089 [Linux \u5411\u3051\u306b\u30d3\u30eb\u30c9\u3057\u305f\u3082\u306e\u3092 scratch \u306b\u7a81\u3063\u8fbc\u3080](http://blog.codeship.com/building-minimal-docker-containers-for-go-applications/) \u65b9\u6cd5\u304c\u6700\u8efd\u91cf\u3002\n"}