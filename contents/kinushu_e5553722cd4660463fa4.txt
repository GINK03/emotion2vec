{"context": " More than 1 year has passed since last update.\n\n\u624b\u304c\u304b\u308a\nhttp://server-setting.info/centos/loglotation.html\nyum install logrotate\naws\u304b\u3001yum\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3082\u306e\u306f\u81ea\u52d5\u7684\u306b logrotate \u306e\u8a2d\u5b9a\u3092\u3057\u3066\u304f\u308c\u3066\u308b\u306e\u304b\u306a\u3002\n\n\u3084\u3063\u305f\u3053\u3068\u307e\u3068\u3081\n/www \u4e0b\u306e (\u30a2\u30d7\u30ea\u30d5\u30a9\u30eb\u30c0)/log/*.log \u30d5\u30a1\u30a4\u30eb\u306b\u3064\u3044\u3066\n1\u65e5\u3054\u3068\u5909\u308f\u308a\u3001\u306730\u65e5\u9593\u6b8b\u3059\u30ed\u30b0\u30ed\u30fc\u30c6\u30fc\u30c8\u3092\u8a2d\u5b9a\u3057\u305f\u3002\n\n\u57fa\u672c\u8a2d\u5b9a\n\u30b0\u30ed\u30fc\u30d0\u30eb\u306a\u8a2d\u5b9a\n/etc/logrotate.conf\n\u500b\u5225\u8a2d\u5b9a\n/etc/logrotate.d\n[XXX logrotate.d]# cat httpd\n/var/log/httpd/*log {\nmissingok\nnotifempty\nsharedscripts\ndelaycompress\npostrotate\n/sbin/service httpd reload > /dev/null 2>/dev/null || true\nendscript\n}\n\n\u4ee5\u4e0b\u3092\u8ffd\u52a0\u8a2d\u5b9a\u3057\u3068\u304f\ndaily\ndateext\ncompress\nrotate 30\n\n\u5b9f\u884c\u3067\u304d\u308b\u304b\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3002\nlogrotate -dv ./httpd\n\n\n-d : \u30c7\u30d0\u30c3\u30b0\u5b9f\u884c\u3001\u5b9f\u884c\u3057\u305f\u3089\u3069\u3046\u306a\u308b\u304b\u8a66\u3057\u3066\u304f\u308c\u308b\n-v \u8a73\u7d30\u8868\u793a\n\n\u5168\u4f53\u5b9f\u884c\u306f\n\n/usr/sbin/logrotate /etc/logrotate.conf\n\n\n\u81ea\u52d5\u5b9f\u884c\u3057\u3066\u308b\u306e\u304b\uff1f\u78ba\u8a8d\ncat /var/lib/logrotate.status\n\n\u5404\u9805\u76ee\u304c\u3044\u3064\u30ed\u30fc\u30c6\u30fc\u30c8\u3055\u308c\u305f\u304b\u3053\u308c\u3067\u308f\u304b\u308b\u3002\n\ncron\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b\uff1f\n/etc/cron.daily\n[XXX cron.daily]# cat logrotate\n#!/bin/sh\n(\u7565)\n/usr/sbin/logrotate /etc/logrotate.conf >/dev/null 2>&1\n(\u7565)\n\ncron\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u308b\u3068\u5224\u65ad\u3002\n## \u624b\u304c\u304b\u308a\n\nhttp://server-setting.info/centos/loglotation.html\n\nyum install logrotate\n\naws\u304b\u3001yum\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3082\u306e\u306f\u81ea\u52d5\u7684\u306b logrotate \u306e\u8a2d\u5b9a\u3092\u3057\u3066\u304f\u308c\u3066\u308b\u306e\u304b\u306a\u3002\n\n## \u3084\u3063\u305f\u3053\u3068\u307e\u3068\u3081\n\n/www \u4e0b\u306e (\u30a2\u30d7\u30ea\u30d5\u30a9\u30eb\u30c0)/log/*.log \u30d5\u30a1\u30a4\u30eb\u306b\u3064\u3044\u3066\n1\u65e5\u3054\u3068\u5909\u308f\u308a\u3001\u306730\u65e5\u9593\u6b8b\u3059\u30ed\u30b0\u30ed\u30fc\u30c6\u30fc\u30c8\u3092\u8a2d\u5b9a\u3057\u305f\u3002\n\n## \u57fa\u672c\u8a2d\u5b9a\n\n\u30b0\u30ed\u30fc\u30d0\u30eb\u306a\u8a2d\u5b9a\n/etc/logrotate.conf\n\n\u500b\u5225\u8a2d\u5b9a\n/etc/logrotate.d\n\n```\n[XXX logrotate.d]# cat httpd\n/var/log/httpd/*log {\nmissingok\nnotifempty\nsharedscripts\ndelaycompress\npostrotate\n/sbin/service httpd reload > /dev/null 2>/dev/null || true\nendscript\n}\n```\n\n\u4ee5\u4e0b\u3092\u8ffd\u52a0\u8a2d\u5b9a\u3057\u3068\u304f\n\n```\ndaily\ndateext\ncompress\nrotate 30\n```\n\n\u5b9f\u884c\u3067\u304d\u308b\u304b\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3002\n\n```\nlogrotate -dv ./httpd\n```\n\n+ -d : \u30c7\u30d0\u30c3\u30b0\u5b9f\u884c\u3001\u5b9f\u884c\u3057\u305f\u3089\u3069\u3046\u306a\u308b\u304b\u8a66\u3057\u3066\u304f\u308c\u308b\n+ -v \u8a73\u7d30\u8868\u793a\n\n\u5168\u4f53\u5b9f\u884c\u306f\n```\n/usr/sbin/logrotate /etc/logrotate.conf\n```\n\n## \u81ea\u52d5\u5b9f\u884c\u3057\u3066\u308b\u306e\u304b\uff1f\u78ba\u8a8d\n\n```\ncat /var/lib/logrotate.status\n```\n\n\u5404\u9805\u76ee\u304c\u3044\u3064\u30ed\u30fc\u30c6\u30fc\u30c8\u3055\u308c\u305f\u304b\u3053\u308c\u3067\u308f\u304b\u308b\u3002\n\n## cron\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b\uff1f\n\n```\n/etc/cron.daily\n[XXX cron.daily]# cat logrotate\n#!/bin/sh\n(\u7565)\n/usr/sbin/logrotate /etc/logrotate.conf >/dev/null 2>&1\n(\u7565)\n```\ncron\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u308b\u3068\u5224\u65ad\u3002\n", "tags": ["logrotate"]}