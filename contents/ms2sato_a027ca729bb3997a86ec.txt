{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\nhttp://qiita.com/ms2sato/items/7c07b2079b48c49fad2a\nhttp://qiita.com/ms2sato/items/eed1e3c929ac8f6195a9\nhttp://qiita.com/ms2sato/items/5bd201c84dab858ee501\n\nhttp://qiita.com/ms2sato/items/901d8c5ca77c1133522c \nhttp://qiita.com/ms2sato/items/9b102144f221f9ac5bf8\n\n\u306e\u7d9a\u304d\u3002\n\n\u5404\u7a2e\u8abf\u6574\n\u30e1\u30fc\u30eb\u9001\u4fe1\u3092\u5b8c\u6210\u3055\u305b\u307e\u3059\u3002\u305d\u308c\u305e\u308c\u6574\u3048\u308b\u3060\u3051\u3067\u3059\u3002\n\napp.rb\nrequire 'rubygems'\nrequire 'bundler'\nBundler.require\n\nrequire 'sinatra'\nrequire 'sinatra/reloader'\nrequire 'rest_client'\n\nget '/' do\n  erb :index  \nend\n\nget '/about' do\n  erb :about\nend\n\npost '/confirm' do\n  @email = params[:email]\n  @message = params[:message]\n  erb :confirm\nend\n\npost '/send_mail' do\n  email = params[:email]\n  message = params[:message]\n  send_message(email, message)  \n\n  erb :thanks\nend\n\ndef send_message(email, message)\n    RestClient.post \"https://api:key-[secret...]\"\\\n      \"@api.mailgun.net/v3/sandbox[secret...].mailgun.org/messages\",\n      :from => \"\u304a\u554f\u3044\u5408\u308f\u305b <xxx@xxx.com>\",\n      :to => \"MasashiSato <xxx@xxx.com>\",\n      :subject => \"\u304a\u554f\u3044\u5408\u308f\u305b\u304c\u304d\u307e\u3057\u305f\uff01\",\n      :text => \"email: #{email}\u3055\u3093\u304b\u3089\u304a\u554f\u3044\u5408\u308f\u305b\u304c\u304d\u307e\u3057\u305f\u3002\u672c\u6587: #{message}\"\nend\n\n\n\nviews/confirm.erb\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n</head>\n<body>\n  <h1>\u304a\u554f\u3044\u5408\u308f\u305b\u5185\u5bb9\u78ba\u8a8d</h1>\n  <div>\n    <div>\n      email: <%=@email%>\n    </div>  \n    <div>\n      \u672c\u6587:\n      <p>\n        <%=@message%>\n      </p>\n    </div>    \n  </div>\n  <form action=\"send_mail\" method=\"POST\">\n    <input type=\"hidden\" value=\"<%=@email%>\" name=\"email\">\n    <input type=\"hidden\" value=\"<%=@message%>\" name=\"message\">\n    <input type=\"submit\" value=\"\u9001\u4fe1\u3059\u308b\">\n  </form>\n</body>\n</html>\n\n\n\u9001\u4fe1\u5f8c\u306e\u30da\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nthanks.erb\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n</head>\n<body>\n<h1>\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f</h1>\n<p>\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002\u304a\u8fd4\u4e8b\u304c\u304f\u308b\u307e\u3067\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u4e0b\u3055\u3044\u3002</p>\n<p><a href=\"/\">\u30c8\u30c3\u30d7\u3078\u623b\u308b</a></p>\n</body>\n</html>\n\n\n\n\u304a\u3057\u307e\u3044\u306b\n\u3068\u308a\u3042\u3048\u305a\u3053\u3053\u307e\u3067\u3067\u3001\u554f\u3044\u5408\u308f\u305b\u5185\u5bb9\u306e\u30e1\u30fc\u30eb\u9001\u4fe1\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\u308f\u30fc\u3044\uff01\u305f\u3060\u3001\u3068\u308a\u3042\u3048\u305a\u5b9f\u88c5\u304c\u5165\u3063\u3066\u3044\u308b\u3060\u3051\u3067\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u9762\u3084\u30a8\u30e9\u30fc\u51e6\u7406\u304c\u5168\u304f\u306a\u3044\u306e\u3067\u5b9f\u904b\u7528\u306b\u306f\u8010\u3048\u307e\u305b\u3093\u3002\u3054\u6ce8\u610f\u3092\u3002\n# \u306f\u3058\u3081\u306b\n\n1. http://qiita.com/ms2sato/items/7c07b2079b48c49fad2a\n1. http://qiita.com/ms2sato/items/eed1e3c929ac8f6195a9\n1. http://qiita.com/ms2sato/items/5bd201c84dab858ee501\n1. http://qiita.com/ms2sato/items/901d8c5ca77c1133522c \n1. http://qiita.com/ms2sato/items/9b102144f221f9ac5bf8\n\n\u306e\u7d9a\u304d\u3002\n\n# \u5404\u7a2e\u8abf\u6574\n\n\u30e1\u30fc\u30eb\u9001\u4fe1\u3092\u5b8c\u6210\u3055\u305b\u307e\u3059\u3002\u305d\u308c\u305e\u308c\u6574\u3048\u308b\u3060\u3051\u3067\u3059\u3002\n\n```app.rb\nrequire 'rubygems'\nrequire 'bundler'\nBundler.require\n\nrequire 'sinatra'\nrequire 'sinatra/reloader'\nrequire 'rest_client'\n\nget '/' do\n  erb :index  \nend\n\nget '/about' do\n  erb :about\nend\n\npost '/confirm' do\n  @email = params[:email]\n  @message = params[:message]\n  erb :confirm\nend\n\npost '/send_mail' do\n  email = params[:email]\n  message = params[:message]\n  send_message(email, message)  \n\n  erb :thanks\nend\n\ndef send_message(email, message)\n    RestClient.post \"https://api:key-[secret...]\"\\\n      \"@api.mailgun.net/v3/sandbox[secret...].mailgun.org/messages\",\n      :from => \"\u304a\u554f\u3044\u5408\u308f\u305b <xxx@xxx.com>\",\n      :to => \"MasashiSato <xxx@xxx.com>\",\n      :subject => \"\u304a\u554f\u3044\u5408\u308f\u305b\u304c\u304d\u307e\u3057\u305f\uff01\",\n      :text => \"email: #{email}\u3055\u3093\u304b\u3089\u304a\u554f\u3044\u5408\u308f\u305b\u304c\u304d\u307e\u3057\u305f\u3002\u672c\u6587: #{message}\"\nend\n```\n\n```html+erb:views/confirm.erb\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n</head>\n<body>\n  <h1>\u304a\u554f\u3044\u5408\u308f\u305b\u5185\u5bb9\u78ba\u8a8d</h1>\n  <div>\n    <div>\n      email: <%=@email%>\n    </div>  \n    <div>\n      \u672c\u6587:\n      <p>\n        <%=@message%>\n      </p>\n    </div>    \n  </div>\n  <form action=\"send_mail\" method=\"POST\">\n    <input type=\"hidden\" value=\"<%=@email%>\" name=\"email\">\n    <input type=\"hidden\" value=\"<%=@message%>\" name=\"message\">\n    <input type=\"submit\" value=\"\u9001\u4fe1\u3059\u308b\">\n  </form>\n</body>\n</html>\n```\n\n\u9001\u4fe1\u5f8c\u306e\u30da\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```html+erb:thanks.erb\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n</head>\n<body>\n<h1>\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f</h1>\n<p>\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002\u304a\u8fd4\u4e8b\u304c\u304f\u308b\u307e\u3067\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u4e0b\u3055\u3044\u3002</p>\n<p><a href=\"/\">\u30c8\u30c3\u30d7\u3078\u623b\u308b</a></p>\n</body>\n</html>\n```\n\n# \u304a\u3057\u307e\u3044\u306b\n\n\u3068\u308a\u3042\u3048\u305a\u3053\u3053\u307e\u3067\u3067\u3001\u554f\u3044\u5408\u308f\u305b\u5185\u5bb9\u306e\u30e1\u30fc\u30eb\u9001\u4fe1\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\u308f\u30fc\u3044\uff01\u305f\u3060\u3001\u3068\u308a\u3042\u3048\u305a\u5b9f\u88c5\u304c\u5165\u3063\u3066\u3044\u308b\u3060\u3051\u3067\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u9762\u3084\u30a8\u30e9\u30fc\u51e6\u7406\u304c\u5168\u304f\u306a\u3044\u306e\u3067\u5b9f\u904b\u7528\u306b\u306f\u8010\u3048\u307e\u305b\u3093\u3002\u3054\u6ce8\u610f\u3092\u3002\n\n\n", "tags": ["Ruby", "Sinatra"]}