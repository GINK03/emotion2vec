{"context": " More than 1 year has passed since last update.AWS\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u958b\u3044\u3066\u3001\u307e\u305a\u306f\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u4fdd\u5b58\u5834\u6240\u3068\u3057\u3066S3\u306ebucket\u3092\u7528\u610f\u3057\u307e\u3059\u3002\nhttps://console.aws.amazon.com/s3/home\nGemfile\u306b\u4ee5\u4e0b\u3092\u8db3\u3057\u307e\u3059\u3002\n\nGemfile\ngem 'paperclip'\ngem 'aws-s3'\ngem 'aws-sdk'\n\n\nS3\u63a5\u7d9a\u8a2d\u5b9a\u7528\u306e\u30d5\u30a1\u30a4\u30ebconfig/s3.yml\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u63a5\u7d9a\u60c5\u5831\u306fAWS\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u306fs3_host_name\u3092\u8aac\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u3053\u306f\u8efd\u304f\u306f\u307e\u308a\u307e\u3057\u305f\u3002\n\nconfig/s3.yml\ndevelopment:\n  bucket: hoge-bucket\n  access_key_id: xxxx\n  secret_access_key: xxxx\n  s3_host_name: s3-ap-northeast-1.amazonaws.com\n\nproduction:\n  bucket: hoge-bucket\n  access_key_id: xxxx\n  secret_access_key: xxxx\n  s3_host_name: s3-ap-northeast-1.amazonaws.com\n\n\n\u30e2\u30c7\u30eb\u306emigration\u30d5\u30a1\u30a4\u30eb\u306b\u753b\u50cf\u7528\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n2012..._create_items.rb\nclass CreateItems < ActiveRecord::Migration\n  def change\n    create_table :items do |t|\n      t.string :photo_file_name\n      t.string :photo_content_type\n      t.integer :photo_file_size\n      t.datetime :photo_updated_at\n    end\n  end\nend\n\n\n\u30e2\u30c7\u30eb\u5b9a\u7fa9\u306b\u753b\u50cf\u7528\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nitem.rb\nclass Item < ActiveRecord::Base\n  attr_accessible :photo\n\n  has_attached_file :photo,\n                    :styles => {\n                      :thumb  => \"100x100\",\n                      :medium => \"200x200\",\n                      :large => \"600x400\"\n                    },\n                    :storage => :s3,\n                    :s3_credentials => File.join(Rails.root, 'config', 's3.yml'),\n                    :path => \":attachment/:id/:style.:extension\"\nend\n\n\n\u30d5\u30a9\u30fc\u30e0\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u6a5f\u80fd\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nmultipart\u8aac\u5b9a\u3092\u3057\u3066\u3001file_field\u3067\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u7528\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n_form.html.erb\n<%= form_for(@item, :html => {:multipart => true}) do |f| %>\n  <div class=\"field\">\n    <%= f.label :photo %><br />\n    <%= f.file_field :photo %>\n  </div>\n<% end %>\n\n\n\u753b\u50cf\u3092\u8868\u793a\u3059\u308b\u90e8\u5206\u3092\u66f8\u304d\u52a0\u3048\u307e\u3059\u3002\n\nshow.html.erb\n<p>\n  <b>Photo:</b>\n  <%= image_tag @item.photo(:medium) %>\n  <%= image_tag @item.photo(:thumb) %>\n  <%= image_tag @item.photo(:large) %>\n</p>\n\n\n\u4ee5\u4e0a\u3067\u3059\u3002\nheroku\u4e0a\u3067\u3082\u3059\u3093\u306a\u308a\u3067\u304d\u307e\u3057\u305f\u3002\n-\n\u53c2\u8003:http://d.hatena.ne.jp/d4-1977/20120529/1338303498\n\nAWS\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u958b\u3044\u3066\u3001\u307e\u305a\u306f\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u4fdd\u5b58\u5834\u6240\u3068\u3057\u3066S3\u306ebucket\u3092\u7528\u610f\u3057\u307e\u3059\u3002\nhttps://console.aws.amazon.com/s3/home\n\nGemfile\u306b\u4ee5\u4e0b\u3092\u8db3\u3057\u307e\u3059\u3002\n\n```Ruby:Gemfile\ngem 'paperclip'\ngem 'aws-s3'\ngem 'aws-sdk'\n```\n\nS3\u63a5\u7d9a\u8a2d\u5b9a\u7528\u306e\u30d5\u30a1\u30a4\u30ebconfig/s3.yml\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u63a5\u7d9a\u60c5\u5831\u306fAWS\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n**\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u306fs3_host_name\u3092\u8aac\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u3053\u306f\u8efd\u304f\u306f\u307e\u308a\u307e\u3057\u305f\u3002**\n\n```config/s3.yml\ndevelopment:\n  bucket: hoge-bucket\n  access_key_id: xxxx\n  secret_access_key: xxxx\n  s3_host_name: s3-ap-northeast-1.amazonaws.com\n\nproduction:\n  bucket: hoge-bucket\n  access_key_id: xxxx\n  secret_access_key: xxxx\n  s3_host_name: s3-ap-northeast-1.amazonaws.com\n```\n\n\u30e2\u30c7\u30eb\u306emigration\u30d5\u30a1\u30a4\u30eb\u306b\u753b\u50cf\u7528\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```Ruby:2012..._create_items.rb\nclass CreateItems < ActiveRecord::Migration\n  def change\n    create_table :items do |t|\n      t.string :photo_file_name\n      t.string :photo_content_type\n      t.integer :photo_file_size\n      t.datetime :photo_updated_at\n    end\n  end\nend\n```\n\n\u30e2\u30c7\u30eb\u5b9a\u7fa9\u306b\u753b\u50cf\u7528\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```Ruby:item.rb\nclass Item < ActiveRecord::Base\n  attr_accessible :photo\n\n  has_attached_file :photo,\n                    :styles => {\n                      :thumb  => \"100x100\",\n                      :medium => \"200x200\",\n                      :large => \"600x400\"\n                    },\n                    :storage => :s3,\n                    :s3_credentials => File.join(Rails.root, 'config', 's3.yml'),\n                    :path => \":attachment/:id/:style.:extension\"\nend\n```\n\n\u30d5\u30a9\u30fc\u30e0\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u6a5f\u80fd\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nmultipart\u8aac\u5b9a\u3092\u3057\u3066\u3001file_field\u3067\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u7528\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```Ruby:_form.html.erb\n<%= form_for(@item, :html => {:multipart => true}) do |f| %>\n  <div class=\"field\">\n    <%= f.label :photo %><br />\n    <%= f.file_field :photo %>\n  </div>\n<% end %>\n```\n\n\u753b\u50cf\u3092\u8868\u793a\u3059\u308b\u90e8\u5206\u3092\u66f8\u304d\u52a0\u3048\u307e\u3059\u3002\n\n```Ruby:show.html.erb\n<p>\n  <b>Photo:</b>\n  <%= image_tag @item.photo(:medium) %>\n  <%= image_tag @item.photo(:thumb) %>\n  <%= image_tag @item.photo(:large) %>\n</p>\n```\n\n\u4ee5\u4e0a\u3067\u3059\u3002\nheroku\u4e0a\u3067\u3082\u3059\u3093\u306a\u308a\u3067\u304d\u307e\u3057\u305f\u3002\n\n-\n\n\u53c2\u8003:http://d.hatena.ne.jp/d4-1977/20120529/1338303498\n", "tags": ["AWS", "Rails", "Ruby", "S3"]}