{"context": " More than 1 year has passed since last update.\n\nedit spec_helper.rb\n\nhttp => https and port 5985 => 5986\nArgs for new()\n\n\nspec_helper.rb\nrequire 'serverspec'\nrequire 'winrm'\n\nset :backend, :winrm\n\nuser = '<your admin user>'\npass = '<your admin pass>'\nendpoint = \"https://#{ENV['TARGET_HOST']}:5986/wsman\"\n\n#winrm = ::WinRM::WinRMWebService.new(endpoint, :ssl, :user => user, :pass => pass, :basic_auth_only => true)\nwinrm = ::WinRM::WinRMWebService.new(endpoint, :ssl, :user => user, :pass => pass, :basic_auth_only => false, :no_ssl_peer_verification => true)\nwinrm.set_timeout 300 # 5 minutes max timeout for any operation\nSpecinfra.configuration.winrm = winrm\n\n\n\n\nDo not allow Basic-Auth And Unencrypted!\nDo not set bellow Windows Side params! It is traditional method.\nwinrm set winrm/config/service/auth @{Basic=\"true\"}\nwinrm set winrm/config/service @{AllowUnencrypted=\"true\"}\n\n\nMemo\n\nAnsible > 1.9 support Winrm https & no basic-auth\nwinrm default ports (5985: http  5986: https)\n\n\n# edit spec_helper.rb\n\n1. http => https and port 5985 => 5986\n2. Args for new()\n\n```ruby:spec_helper.rb\nrequire 'serverspec'\nrequire 'winrm'\n\nset :backend, :winrm\n\nuser = '<your admin user>'\npass = '<your admin pass>'\nendpoint = \"https://#{ENV['TARGET_HOST']}:5986/wsman\"\n\n#winrm = ::WinRM::WinRMWebService.new(endpoint, :ssl, :user => user, :pass => pass, :basic_auth_only => true)\nwinrm = ::WinRM::WinRMWebService.new(endpoint, :ssl, :user => user, :pass => pass, :basic_auth_only => false, :no_ssl_peer_verification => true)\nwinrm.set_timeout 300 # 5 minutes max timeout for any operation\nSpecinfra.configuration.winrm = winrm\n\n```\n\n# Do not allow Basic-Auth And Unencrypted!\nDo not set bellow Windows Side params! It is traditional method.\n\n\n```\nwinrm set winrm/config/service/auth @{Basic=\"true\"}\nwinrm set winrm/config/service @{AllowUnencrypted=\"true\"}\n```\n\n\n# Memo\n1. Ansible > 1.9 support Winrm https & no basic-auth\n2. winrm default ports (5985: http  5986: https)\n", "tags": ["Windows", "serverspec", "WinRM"]}