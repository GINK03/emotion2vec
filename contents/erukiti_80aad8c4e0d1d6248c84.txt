{"context": " More than 1 year has passed since last update.Amazon S3 \u4e92\u63db\u306e KVS \u3067\u3042\u308b Riak-CS \u3092 Mac \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u305f\u3002\n\n\u4eca\u56de\u306e\u30dd\u30a4\u30f3\u30c8\n\nhomebrew \u306b\u306f Riak \u306e brew \u306f\u3042\u308b\u3082\u306e\u306e\u3001RiakCS \u306e brew \u304c\u306a\u3044\u306e\u3068\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u65b0\u3057\u3059\u304e\u308b\u305f\u3081\u3001Riak / RiakCS / stanchion \u3092\u305d\u308c\u305e\u308c\u3001\u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u30d0\u30a4\u30ca\u30ea\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u843d\u3068\u3057\u3066\u304d\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3002\n\u30d0\u30a4\u30ca\u30ea\u3092\u5c55\u958b\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u5b9f\u884c\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u30c7\u30fc\u30bf\u3092\u5225\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u7f6e\u304f\u5834\u5408 (/var\u4e0b\u306a\u3069) \u306f\u3001\u8a2d\u5b9a\u3092\u3044\u3058\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\nbrew \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b s3cmd \u306f\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u304f\u3066\u4e00\u90e8\u30b3\u30de\u30f3\u30c9\u304c\u5bfe\u5fdc\u3057\u3066\u306a\u3044\u306a\u3069\u306e\u554f\u984c\u304c\u3042\u308b\u3002\n\u6700\u65b0\u306e s3cmd \u3092\u4f7f\u3046\u3068\u30c7\u30d5\u30a9\u30eb\u30c8\u72b6\u614b\u3067\u306f RiakCS \u304c\u8a8d\u8a3c\u3067\u554f\u984c\u304c\u751f\u3058\u308b\u306e\u3067\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u8a2d\u5b9a\u306e\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n\nRiak / RiakCS / Stanchion \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nRiak\n$ wget http://s3.amazonaws.com/downloads.basho.com/riak/1.4/1.4.12/osx/10.8/riak-1.4.12-OSX-x86_64.tar.gz\n$ tar riak-1.4.12-OSX-x86_64.tar.gz\n\nConfiguring Riak for CS \u3092\u53c2\u8003\u306b riak-1.4.12/etc/app.config \u3092\u3044\u3058\u308b\n$ vi riak-1.4.12/etc/app.config\n\n\nriak_kv \u306e {storage_backend, riak_kv_bitcask_backend}, \u306e\u884c\u3092\u6d88\u3059\nriak_kv \u306b\u3001\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3059\u308b\n\n            {add_paths, [\"../riak-cs-1.5.3/lib/riak_cs-1.5.3/ebin\"]},\n            {storage_backend, riak_cs_kv_multi_backend},\n            {multi_backend_prefix_list, [{<<\"0b:\">>, be_blocks}]},\n            {multi_backend_default, be_default},\n            {multi_backend, [\n                {be_default, riak_kv_eleveldb_backend, [\n                    {max_open_files, 50},\n                    {data_root, \"./data/leveldb\"}\n                ]},\n                {be_blocks, riak_kv_bitcask_backend, [\n                    {data_root, \"./data/bitcask\"}\n                ]}\n            ]},\n\n\nriak_core \u306b\u3001{default_bucket_props, [{allow_mult, true}]}, \u3092\u8ffd\u52a0\u3059\u308b\n\n\nStanchion\n$ wget http://s3.amazonaws.com/downloads.basho.com/stanchion/1.5/1.5.0/osx/10.8/stanchion-1.5.0-OSX-x86_64.tar.gz\n$ tar stanchion-1.5.0-OSX-x86_64.tar.gz\n\n\nRiakCS\n$ wget http://s3.amazonaws.com/downloads.basho.com/riak-cs/1.5/1.5.3/osx/10.8/riak-cs-1.5.3-OSX-x86_64.tar.gz\n$ tar zxvf riak-cs-1.5.3-OSX-x86_64.tar.gz\n\n$ vi riak-cs-1.5.3/etc/app.config\n\n\nriak_cs \u306e\u3001{anonymous_user_creation, false}, \u306e\u884c\u306e false \u3092 true \u306b\u66f8\u304d\u63db\u3048\u308b\n\n\n\u8d77\u52d5\n$ riak-1.4.12/bin/riak start\n$ riak-1.4.12/bin/riak ping\npong\n$ stanchion-1.5.0/bin/stanchion start\n$ stanchion-1.5.0/bin/stanchion ping\npong\n$ riak-cs-1.5.3/bin/riak-cs start\n$ riak-cs-1.5.3/bin/riak-cs ping\npong\n\n\nauth key \u306e\u767a\u884c\n$ curl -H 'Content-Type: application/json' -X POST http://localhost:8080/riak-cs/user --data '{\"email\":\"test@example.org\", \"name\":\"admin\"}'\n{\"email\":\"test@example.org\",\"display_name\":\"admin\",\"name\":\"admin\",\"key_id\":\"HOGEHOGEHOGE\",\"key_secret\":\"hogehoge==\",\"id\":\"0b32a21c1f4\",\"status\":\"enabled\"}\n\n\nkey_id \u3068 key_secret \u3092\u63a7\u3048\u3066\u304a\u3053\u3046\u3002\n\n\n\u8a2d\u5b9a\u306e\u66f4\u65b0\n$ vi stanchion-1.5.0/etc/app.config\n$ vi riak-cs-1.5.3/etc/app.config\n\nstanchion\u3068riak-cs\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u305d\u308c\u305e\u308c\u306e\n              {admin_key, \"admin-key\"},\n              {admin_secret, \"admin-secret\"},\n\nadmin-key \u306b key_id, admin-secret \u306b key_secret \u3092\u66f8\u304d\u63db\u3048\u308b\u3002\n\u307e\u305f\u3001riak-cs \u306e {anonymous_user_creation, false}, \u306e\u884c\u3092\u3001true \u306b\u3057\u3066\u3044\u305f\u306e\u3092 false \u306b\u623b\u3059\u306e\u3092\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\u3002\n$ stanchion-1.5.0/bin/stanchion stop\nok\n$ stanchion-1.5.0/bin/stanchion start\n$ stanchion-1.5.0/bin/stanchion ping\npong\n$ riak-cs-1.5.3/bin/riak-cs stop\nok\n$ riak-cs-1.5.3/bin/riak-cs start\n$ riak-cs-1.5.3/bin/riak-cs ping\npong\n\n\ns3cmd \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ git clone https://github.com/s3tools/s3cmd.git\n$ cd s3cmd\n$ python setup.py install\n\n\ns3cmd \u306e\u8a2d\u5b9a\n$ s3cmd --configure\n\n\nproxy \u306b\u3001127.0.0.1 \u3068 8080 \u3092\u6307\u5b9a\u3059\u308b\n\n$ vi ~/.s3cfg\n\n\n\nsignature_v2 = False \u306e False \u3092 True \u306b\u66f8\u304d\u63db\u3048\u308b\n\n\n\u30c6\u30b9\u30c8\n$ s3cmd mb s3://test\nBucket 's3://test/' created\n$ vi hoge.txt\n\u307b\u3052\u30fc\n$ s3cmd put hoge.txt s3://test/\nWARNING: Module python-magic is not available. Guessing MIME types based on file extensions.\nasking for bucket location\nhoge.txt -> s3://test/hoge.txt  [1 of 1]\n 11 of 11   100% in    0s   137.23 B/s  done\n$ vi policy.json\n{\n  \"Version\":\"2008-10-17\",\n  \"Statement\":[{\n    \"Sid\":\"AllowPublicRead\",\n        \"Effect\":\"Allow\",\n      \"Principal\": {\n            \"AWS\": \"*\"\n         },\n      \"Action\":[\"s3:GetObject\"],\n      \"Resource\":[\"arn:aws:s3:::test/*\"\n      ]\n    }\n  ]\n}\n$ s3cmd setpolicy policy.json s3://test\n$ curl http://localhost:8080/test/hoge.txt\n\u307b\u3052\u30fc\n\n\n\n\u30a8\u30e9\u30fc\u304b\u306a\u3068\u601d\u3063\u305f\u3089\n\ns3cmd \u306a\u3089\u3070 -d \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u308b\u3068\u8a73\u7d30\u306a\u30c7\u30d0\u30c3\u30b0\u60c5\u5831\u304c\u898b\u3089\u308c\u308b\nriak-1.4.12/log/ stanchion-1.5.0/log riak-cs-1.5.3/log/ \u4e0b\u306a\u3069\u3001\u305d\u308c\u305e\u308c\u306e\u30ed\u30b0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u898b\u308b\u3068\u3001\u539f\u56e0\u304c\u308f\u304b\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u66f8\u304d\u9593\u9055\u3048\u306f\u308f\u308a\u3068\u767a\u751f\u3059\u308b\u5272\u306b\u308f\u304b\u308a\u306b\u304f\u3044\u96f0\u56f2\u6c17\u304c\u3042\u308b\u3002\n\nAmazon S3 \u4e92\u63db\u306e KVS \u3067\u3042\u308b Riak-CS \u3092 Mac \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u305f\u3002\n\n\u4eca\u56de\u306e\u30dd\u30a4\u30f3\u30c8\n--------------\n\n* homebrew \u306b\u306f Riak \u306e brew \u306f\u3042\u308b\u3082\u306e\u306e\u3001RiakCS \u306e brew \u304c\u306a\u3044\u306e\u3068\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u65b0\u3057\u3059\u304e\u308b\u305f\u3081\u3001Riak / RiakCS / stanchion \u3092\u305d\u308c\u305e\u308c\u3001\u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u30d0\u30a4\u30ca\u30ea\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u843d\u3068\u3057\u3066\u304d\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3002\n* \u30d0\u30a4\u30ca\u30ea\u3092\u5c55\u958b\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u5b9f\u884c\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u30c7\u30fc\u30bf\u3092\u5225\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u7f6e\u304f\u5834\u5408 (/var\u4e0b\u306a\u3069) \u306f\u3001\u8a2d\u5b9a\u3092\u3044\u3058\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n* brew \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b s3cmd \u306f\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u304f\u3066\u4e00\u90e8\u30b3\u30de\u30f3\u30c9\u304c\u5bfe\u5fdc\u3057\u3066\u306a\u3044\u306a\u3069\u306e\u554f\u984c\u304c\u3042\u308b\u3002\n* \u6700\u65b0\u306e s3cmd \u3092\u4f7f\u3046\u3068\u30c7\u30d5\u30a9\u30eb\u30c8\u72b6\u614b\u3067\u306f RiakCS \u304c\u8a8d\u8a3c\u3067\u554f\u984c\u304c\u751f\u3058\u308b\u306e\u3067\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u8a2d\u5b9a\u306e\u5fc5\u8981\u304c\u3042\u308b\u3002\n\nRiak / RiakCS / Stanchion \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n----------------------------------------\n\n### Riak\n\n```\n$ wget http://s3.amazonaws.com/downloads.basho.com/riak/1.4/1.4.12/osx/10.8/riak-1.4.12-OSX-x86_64.tar.gz\n$ tar riak-1.4.12-OSX-x86_64.tar.gz\n```\n\n[Configuring Riak for CS](http://docs.basho.com/riakcs/latest/cookbooks/configuration/Configuring-Riak/) \u3092\u53c2\u8003\u306b riak-1.4.12/etc/app.config \u3092\u3044\u3058\u308b\n\n```\n$ vi riak-1.4.12/etc/app.config\n```\n\n* riak_kv \u306e ```{storage_backend, riak_kv_bitcask_backend},``` \u306e\u884c\u3092\u6d88\u3059\n* riak_kv \u306b\u3001\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3059\u308b\n\n```\n            {add_paths, [\"../riak-cs-1.5.3/lib/riak_cs-1.5.3/ebin\"]},\n            {storage_backend, riak_cs_kv_multi_backend},\n            {multi_backend_prefix_list, [{<<\"0b:\">>, be_blocks}]},\n            {multi_backend_default, be_default},\n            {multi_backend, [\n                {be_default, riak_kv_eleveldb_backend, [\n                    {max_open_files, 50},\n                    {data_root, \"./data/leveldb\"}\n                ]},\n                {be_blocks, riak_kv_bitcask_backend, [\n                    {data_root, \"./data/bitcask\"}\n                ]}\n            ]},\n```\n\n* riak_core \u306b\u3001```{default_bucket_props, [{allow_mult, true}]},``` \u3092\u8ffd\u52a0\u3059\u308b\n\n### Stanchion\n\n```\n$ wget http://s3.amazonaws.com/downloads.basho.com/stanchion/1.5/1.5.0/osx/10.8/stanchion-1.5.0-OSX-x86_64.tar.gz\n$ tar stanchion-1.5.0-OSX-x86_64.tar.gz\n```\n\n### RiakCS\n\n```\n$ wget http://s3.amazonaws.com/downloads.basho.com/riak-cs/1.5/1.5.3/osx/10.8/riak-cs-1.5.3-OSX-x86_64.tar.gz\n$ tar zxvf riak-cs-1.5.3-OSX-x86_64.tar.gz\n```\n\n```\n$ vi riak-cs-1.5.3/etc/app.config\n```\n\n* riak_cs \u306e\u3001```{anonymous_user_creation, false},``` \u306e\u884c\u306e false \u3092 true \u306b\u66f8\u304d\u63db\u3048\u308b\n\n### \u8d77\u52d5\n\n```\n$ riak-1.4.12/bin/riak start\n$ riak-1.4.12/bin/riak ping\npong\n$ stanchion-1.5.0/bin/stanchion start\n$ stanchion-1.5.0/bin/stanchion ping\npong\n$ riak-cs-1.5.3/bin/riak-cs start\n$ riak-cs-1.5.3/bin/riak-cs ping\npong\n```\n\n### auth key \u306e\u767a\u884c\n\n```\n$ curl -H 'Content-Type: application/json' -X POST http://localhost:8080/riak-cs/user --data '{\"email\":\"test@example.org\", \"name\":\"admin\"}'\n{\"email\":\"test@example.org\",\"display_name\":\"admin\",\"name\":\"admin\",\"key_id\":\"HOGEHOGEHOGE\",\"key_secret\":\"hogehoge==\",\"id\":\"0b32a21c1f4\",\"status\":\"enabled\"}\n```\n\n* key_id \u3068 key_secret \u3092\u63a7\u3048\u3066\u304a\u3053\u3046\u3002\n\n### \u8a2d\u5b9a\u306e\u66f4\u65b0\n\n```\n$ vi stanchion-1.5.0/etc/app.config\n$ vi riak-cs-1.5.3/etc/app.config\n```\n\nstanchion\u3068riak-cs\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u305d\u308c\u305e\u308c\u306e\n\n```\n              {admin_key, \"admin-key\"},\n              {admin_secret, \"admin-secret\"},\n```\n\nadmin-key \u306b key_id, admin-secret \u306b key_secret \u3092\u66f8\u304d\u63db\u3048\u308b\u3002\n\n\u307e\u305f\u3001riak-cs \u306e ```{anonymous_user_creation, false},``` \u306e\u884c\u3092\u3001true \u306b\u3057\u3066\u3044\u305f\u306e\u3092 false \u306b\u623b\u3059\u306e\u3092\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\u3002\n\n```\n$ stanchion-1.5.0/bin/stanchion stop\nok\n$ stanchion-1.5.0/bin/stanchion start\n$ stanchion-1.5.0/bin/stanchion ping\npong\n$ riak-cs-1.5.3/bin/riak-cs stop\nok\n$ riak-cs-1.5.3/bin/riak-cs start\n$ riak-cs-1.5.3/bin/riak-cs ping\npong\n```\n\n### s3cmd \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ git clone https://github.com/s3tools/s3cmd.git\n$ cd s3cmd\n$ python setup.py install\n```\n\n### s3cmd \u306e\u8a2d\u5b9a\n\n```\n$ s3cmd --configure\n```\n\n* proxy \u306b\u3001127.0.0.1 \u3068 8080 \u3092\u6307\u5b9a\u3059\u308b\n\n```\n$ vi ~/.s3cfg\n```\n\n* ```signature_v2 = False``` \u306e False \u3092 True \u306b\u66f8\u304d\u63db\u3048\u308b\n\n### \u30c6\u30b9\u30c8\n\n```\n$ s3cmd mb s3://test\nBucket 's3://test/' created\n$ vi hoge.txt\n\u307b\u3052\u30fc\n$ s3cmd put hoge.txt s3://test/\nWARNING: Module python-magic is not available. Guessing MIME types based on file extensions.\nasking for bucket location\nhoge.txt -> s3://test/hoge.txt  [1 of 1]\n 11 of 11   100% in    0s   137.23 B/s  done\n$ vi policy.json\n{\n  \"Version\":\"2008-10-17\",\n  \"Statement\":[{\n    \"Sid\":\"AllowPublicRead\",\n        \"Effect\":\"Allow\",\n      \"Principal\": {\n            \"AWS\": \"*\"\n         },\n      \"Action\":[\"s3:GetObject\"],\n      \"Resource\":[\"arn:aws:s3:::test/*\"\n      ]\n    }\n  ]\n}\n$ s3cmd setpolicy policy.json s3://test\n$ curl http://localhost:8080/test/hoge.txt\n\u307b\u3052\u30fc\n\n```\n\n\u30a8\u30e9\u30fc\u304b\u306a\u3068\u601d\u3063\u305f\u3089\n--------------------\n\n* s3cmd \u306a\u3089\u3070 -d \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u308b\u3068\u8a73\u7d30\u306a\u30c7\u30d0\u30c3\u30b0\u60c5\u5831\u304c\u898b\u3089\u308c\u308b\n* riak-1.4.12/log/ stanchion-1.5.0/log riak-cs-1.5.3/log/ \u4e0b\u306a\u3069\u3001\u305d\u308c\u305e\u308c\u306e\u30ed\u30b0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u898b\u308b\u3068\u3001\u539f\u56e0\u304c\u308f\u304b\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n* \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u66f8\u304d\u9593\u9055\u3048\u306f\u308f\u308a\u3068\u767a\u751f\u3059\u308b\u5272\u306b\u308f\u304b\u308a\u306b\u304f\u3044\u96f0\u56f2\u6c17\u304c\u3042\u308b\u3002\n", "tags": ["S3", "s3cmd", "riak1.4.12", "stanchion1.5.0", "RiakCS1.5.3"]}