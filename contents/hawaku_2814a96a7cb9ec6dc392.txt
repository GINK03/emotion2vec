{"context": " More than 1 year has passed since last update.\u5bfe\u5fdc\u3068\u3057\u3066\u306fntp\u3092\u66f4\u65b0\u3059\u308c\u3070\u3044\u3044\u3060\u3051\u3067\u3059\u3002\nhttps://alas.aws.amazon.com/ALAS-2014-462.html\n\nPlaybook\u3092\u66f8\u304f\u5834\u5408\n\nPlayBook\u306e\u4f5c\u6210\n\nupdate.yml\n- hosts: all\n  sudo: yes\n  gather_facts: no\n  vars:\n    pkg: ntp\n\n  tasks:\n    - name: yum clean\n      shell: yum clean all\n\n    - name: before-check\n      shell: yum list \"{{pkg}}\"\n      register: result\n    - debug: var=result.stdout_lines\n\n    - name: update \"{{pkg}}\"\n      yum: name=\"{{pkg}}\" state=latest\n\n    - name: check again\n      shell: yum list \"{{pkg}}\"\n      register: result\n    - debug: var=result.stdout_lines\n\n\n\nPlayBook\u306e\u5b9f\u884c\nPlaybook\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u3053\u306ePlaybook\u3092\u5b9f\u884c\u3057\u3066ntp\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u307e\u3059\u3002\nansible-playbook -i inventory update.yml\n\n\nPlaybook\u3092\u66f8\u304b\u306a\u3044\u5834\u5408\nPlaybook\u3092\u66f8\u304f\u307e\u3067\u3082\u306a\u3044\u3063\u3066\u3068\u304d\u306f\u3001\u30ea\u30e2\u30fc\u30c9\u30b3\u30de\u30f3\u30c9\u3067\u3082ntp\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u306f\u53ef\u80fd\u3067\u3059\u3002\nansible -i inventory all --sudo -m shell -a \"yum clean all\"\nansible -i inventory all --sudo -m shell -a \"yum list ntp\"\nansible -i inventory all --sudo -m shell -a \"yum update ntp -y\"\nansible -i inventory all --sudo -m shell -a \"yum list ntp\"\n\n\u5bfe\u5fdc\u3068\u3057\u3066\u306fntp\u3092\u66f4\u65b0\u3059\u308c\u3070\u3044\u3044\u3060\u3051\u3067\u3059\u3002\nhttps://alas.aws.amazon.com/ALAS-2014-462.html\n\n# Playbook\u3092\u66f8\u304f\u5834\u5408\n\n## PlayBook\u306e\u4f5c\u6210\n```bash:update.yml\n- hosts: all\n  sudo: yes\n  gather_facts: no\n  vars:\n    pkg: ntp\n\n  tasks:\n    - name: yum clean\n      shell: yum clean all\n\n    - name: before-check\n      shell: yum list \"{{pkg}}\"\n      register: result\n    - debug: var=result.stdout_lines\n\n    - name: update \"{{pkg}}\"\n      yum: name=\"{{pkg}}\" state=latest\n\n    - name: check again\n      shell: yum list \"{{pkg}}\"\n      register: result\n    - debug: var=result.stdout_lines\n```\n\n## PlayBook\u306e\u5b9f\u884c\nPlaybook\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u3053\u306ePlaybook\u3092\u5b9f\u884c\u3057\u3066ntp\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u307e\u3059\u3002\n\n```bash\nansible-playbook -i inventory update.yml\n```\n\n# Playbook\u3092\u66f8\u304b\u306a\u3044\u5834\u5408\nPlaybook\u3092\u66f8\u304f\u307e\u3067\u3082\u306a\u3044\u3063\u3066\u3068\u304d\u306f\u3001\u30ea\u30e2\u30fc\u30c9\u30b3\u30de\u30f3\u30c9\u3067\u3082ntp\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u306f\u53ef\u80fd\u3067\u3059\u3002\n\n```bash\nansible -i inventory all --sudo -m shell -a \"yum clean all\"\nansible -i inventory all --sudo -m shell -a \"yum list ntp\"\nansible -i inventory all --sudo -m shell -a \"yum update ntp -y\"\nansible -i inventory all --sudo -m shell -a \"yum list ntp\"\n```\n", "tags": ["Ansible", "ntp", "Linux"]}