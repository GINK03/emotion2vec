{"tags": ["fluentd", "Mac", "td-agent"], "context": "\n\n\u6982\u8981\n\nmac\u306bfluentd(td-agent)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u624b\u9806\u3067\u3059\u3002\n\n\n\u74b0\u5883\n\nOS X Yosemite(\u30d0\u30fc\u30b8\u30e7\u30f310.10.5)\nfluentd-0.12.19(td-agent-2.3.0-0)\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\n\n\n\u516c\u5f0f\u30b5\u30a4\u30c8\u304b\u3089td-agent\u306edmg\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n\n\u6700\u65b0\u7248\u306ftd-agent-2.3.0-0.dmg\u3067\u3057\u305f\uff082016/05/14\u6642\u70b9\uff09 \n\n\n\ndmg\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3067td-agent-2.3.0-0.pkg\u304c\u3067\u304d\u308b\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u5168\u3066\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\n\n\ntd-agent\u306e\u8d77\u52d5\u30fb\u505c\u6b62\u30b3\u30de\u30f3\u30c9\n\n# \u8d77\u52d5\nsudo launchctl load /Library/LaunchDaemons/td-agent.plist\n# \u505c\u6b62\nsudo launchctl unload /Library/LaunchDaemons/td-agent.plist\n\n\n\u305d\u306e\u4ed6\n\n# td-agent\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\n/opt/td-agent\n\n# td-agent\u306e\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\n/var/log/td-agent/td-agent.log \n\n# td-agent\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n/var/etc/td-agent/td-agent.conf\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\n\u5185\u5bb9\n\n\u5165\u529b(Input Plugin)\u3068\u3057\u3066\u3001in_exec(\u65e5\u4ed8\u3001\u30db\u30b9\u30c8\u540d\u3001OS\u30d0\u30fc\u30b8\u30e7\u30f3\u306eTSV\u5f62\u5f0f\u306b\u306a\u308b\u3088\u3046\u306becho\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\uff09\n\nexec Input Plugin\n\n\n\u51fa\u529b(Output Plugin)\u3068\u3057\u3066\u3001out_stdout(\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u306b\u51fa\u529b\u3055\u308c\u307e\u3059) \n\n\n\u624b\u9806\n\n\n/var/etc/td-agent/td-agent.conf\u3092\u7de8\u96c6\n\n\nformat\u3068keys\u3067\u3001dateTime,hostName,osVersion\u306e\u30bf\u30d6\u533a\u5207\u308a\u3060\u3088\u3068\u6307\u5b9a\u3057\u3066\u307e\u3059\ntime_key\u306f\u3001dateTime\u3092\u4f7f\u3046\u3088\u3046\u306b\u6307\u5b9a\n\u30bf\u30b0\u540d\u306f\u3001\u306a\u3093\u3067\u3082\u826f\u3044\u304c\u3053\u3053\u3067\u306f\u3001info.mac\n\u65e5\u4ed8\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306ftime_format\u3067\u6307\u5b9a\n\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u9593\u9694\u306f10\u79d2\nOS\u540d\u306e\u53d6\u5f97\u306f\u3001sw_vers -productName\n\nOS\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u53d6\u5f97\u306f\u3001sw_vers -productVersion\n\n\n\n\n<source>\n  @type exec\n  format tsv\n  command echo \"$(date +'%Y-%m-%d %H:%M:%S')\\t$(hostname)\\t$(sw_vers -productName) $(sw_vers -productVersion)\"\n  keys dateTime,hostName,osVersion\n  time_key dateTime\n  tag info.mac\n  time_format %Y-%m-%d %H:%M:%S\n  run_interval 10s\n</source>\n\n<match>\n  @type stdout\n</match>\n\n\ntd-agent\u306e\u518d\u8d77\u52d5\n\nsudo launchctl unload /Library/LaunchDaemons/td-agent.plist\nsudo launchctl load /Library/LaunchDaemons/td-agent.plist\n\n\n\u30ed\u30b0\u78ba\u8a8d(stdout\u306e\u5185\u5bb9\u304c\u898b\u308c\u308b\uff09\n\n2016-05-14 10:41:32 +0900 info.mac: {\"hostName\":\"raimus94-no-MacBook-Air.local\",\"osName\":\"Mac OS X 10.10.5\"}\n2016-05-14 10:41:42 +0900 info.mac: {\"hostName\":\"raimus94-no-MacBook-Air.local\",\"osName\":\"Mac OS X 10.10.5\"}\n2016-05-14 10:41:52 +0900 info.mac: {\"hostName\":\"raimus94-no-MacBook-Air.local\",\"osName\":\"Mac OS X 10.10.5\"}\n\n# \u6982\u8981\n\n- mac\u306bfluentd(td-agent)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u624b\u9806\u3067\u3059\u3002\n\n# \u74b0\u5883\n\n- OS X Yosemite(\u30d0\u30fc\u30b8\u30e7\u30f310.10.5)\n- fluentd-0.12.19(td-agent-2.3.0-0)\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\n\n- [\u516c\u5f0f\u30b5\u30a4\u30c8](http://www.fluentd.org/download)\u304b\u3089td-agent\u306edmg\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n  - \u6700\u65b0\u7248\u306ftd-agent-2.3.0-0.dmg\u3067\u3057\u305f\uff082016/05/14\u6642\u70b9\uff09 \n- dmg\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3067td-agent-2.3.0-0.pkg\u304c\u3067\u304d\u308b\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n  - \u5168\u3066\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-05-14 8.51.34.png](https://qiita-image-store.s3.amazonaws.com/0/106550/5394bc91-ae39-3391-da80-694a96508588.png)\n\n- td-agent\u306e\u8d77\u52d5\u30fb\u505c\u6b62\u30b3\u30de\u30f3\u30c9\n\n``` \n# \u8d77\u52d5\nsudo launchctl load /Library/LaunchDaemons/td-agent.plist\n# \u505c\u6b62\nsudo launchctl unload /Library/LaunchDaemons/td-agent.plist\n```\n\n- \u305d\u306e\u4ed6\n\n```\n# td-agent\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\n/opt/td-agent\n\n# td-agent\u306e\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\n/var/log/td-agent/td-agent.log \n\n# td-agent\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n/var/etc/td-agent/td-agent.conf\n```\n\n# \u52d5\u4f5c\u78ba\u8a8d\n\n## \u5185\u5bb9\n- \u5165\u529b(Input Plugin)\u3068\u3057\u3066\u3001in_exec(\u65e5\u4ed8\u3001\u30db\u30b9\u30c8\u540d\u3001OS\u30d0\u30fc\u30b8\u30e7\u30f3\u306eTSV\u5f62\u5f0f\u306b\u306a\u308b\u3088\u3046\u306becho\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\uff09  \n  - [exec Input Plugin](http://docs.fluentd.org/articles/in_exec)\n- \u51fa\u529b(Output Plugin)\u3068\u3057\u3066\u3001out_stdout(\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u306b\u51fa\u529b\u3055\u308c\u307e\u3059) \n\n\n\n## \u624b\u9806\n- `/var/etc/td-agent/td-agent.conf`\u3092\u7de8\u96c6\n  - format\u3068keys\u3067\u3001dateTime,hostName,osVersion\u306e\u30bf\u30d6\u533a\u5207\u308a\u3060\u3088\u3068\u6307\u5b9a\u3057\u3066\u307e\u3059\n  - time_key\u306f\u3001dateTime\u3092\u4f7f\u3046\u3088\u3046\u306b\u6307\u5b9a\n  - \u30bf\u30b0\u540d\u306f\u3001\u306a\u3093\u3067\u3082\u826f\u3044\u304c\u3053\u3053\u3067\u306f\u3001info.mac\n  - \u65e5\u4ed8\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306ftime_format\u3067\u6307\u5b9a\n  - \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u9593\u9694\u306f10\u79d2\n  - OS\u540d\u306e\u53d6\u5f97\u306f\u3001`sw_vers -productName`\n  - OS\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u53d6\u5f97\u306f\u3001`sw_vers -productVersion`\n\n```\n<source>\n  @type exec\n  format tsv\n  command echo \"$(date +'%Y-%m-%d %H:%M:%S')\\t$(hostname)\\t$(sw_vers -productName) $(sw_vers -productVersion)\"\n  keys dateTime,hostName,osVersion\n  time_key dateTime\n  tag info.mac\n  time_format %Y-%m-%d %H:%M:%S\n  run_interval 10s\n</source>\n\n<match>\n  @type stdout\n</match>\n```\n\n- td-agent\u306e\u518d\u8d77\u52d5\n\n```\nsudo launchctl unload /Library/LaunchDaemons/td-agent.plist\nsudo launchctl load /Library/LaunchDaemons/td-agent.plist\n```\n\n- \u30ed\u30b0\u78ba\u8a8d(stdout\u306e\u5185\u5bb9\u304c\u898b\u308c\u308b\uff09\n\n```\n2016-05-14 10:41:32 +0900 info.mac: {\"hostName\":\"raimus94-no-MacBook-Air.local\",\"osName\":\"Mac OS X 10.10.5\"}\n2016-05-14 10:41:42 +0900 info.mac: {\"hostName\":\"raimus94-no-MacBook-Air.local\",\"osName\":\"Mac OS X 10.10.5\"}\n2016-05-14 10:41:52 +0900 info.mac: {\"hostName\":\"raimus94-no-MacBook-Air.local\",\"osName\":\"Mac OS X 10.10.5\"}\n```\n\n"}