{"context": "http://qiita.com/izumin5210/items/cd2f9f48fbe1fdcaf628 \u306e\u7d9a\u7de8\nsinatra-reloader\u3092\u4f7f\u308f\u306a\u3051\u308c\u3070\u3082\u3063\u3068\u697d\u306b\u306a\u308b\u6c17\u304c\u3059\u308b\u2026\n\n\n\u5c0e\u5165\n\u3068\u308a\u3042\u3048\u305asinatra-contrib\u3068`activesupport'\u3092\u5165\u308c\u308b\uff0e\n\nGemfile\n# \u524d\u7565\n\ngem 'sinatra'\ngem 'sinatra-contrib'\ngem 'activesupport'\n\n# \u5f8c\u7565\n\n\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u4f8b\nconfig/boot.rb\u3092\u7528\u610f\u3057\uff0c\u6700\u521d\u306b\u3053\u308c\u3092\u8aad\u307e\u305b\u308b\u3088\u3046\u306b\u3059\u308b\uff0e\n.\n\u251c\u2500\u2500 Gemfile\n\u251c\u2500\u2500 Gemfile.lock\n\u251c\u2500\u2500 config\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 boot.rb\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 database.yml\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 global\n\u251c\u2500\u2500 config.ru\n\u251c\u2500\u2500 lib\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 models\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ...\n\u2502\n...\n\n\u30aa\u30fc\u30c8\u30ed\u30fc\u30c9\u306bActiveSupport::Dependencies\u3092\u5229\u7528\u3059\u308b\u306e\u3067\uff0c\u30d5\u30a1\u30a4\u30eb\u540d\u3068\u305d\u306e\u4e2d\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u308bmodule/class\u540d\u306f\u305d\u306e\u898f\u7d04\u306b\u5f93\u308f\u306a\u3044\u3068\u3044\u3051\u306a\u3044\uff0e\ne.g.\n\n\n./lib/models/user.rb => User\n\n\n./lib/models/app/user.rb => App::User\n\n\n\n\u6709\u52b9\u5316\n\nClassic Application\n\n\u30aa\u30fc\u30c8\u30ed\u30fc\u30c9\nActiveSupport::Dependencies.autoload_paths\u306b\u5bfe\u8c61\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff08\u3053\u3053\u3067\u306f./lib\u4ee5\u4e0b\u306e\u5404\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff09\u3092\u55b0\u308f\u305b\u308b\uff0e\n\nconfig/boot.rb\nROOT_DIR = File.join(File.expand_path(File.dirname(__FILE__)), '..')\nSOURCES_DIR = File.join(ROOT_DIR, 'lib')\nActiveSupport::Dependencies.autoload_paths = Dir[File.join(SOURCES_DIR, '**')]\n\n\n\n\u30aa\u30fc\u30c8\u30ea\u30ed\u30fc\u30c9\n\u3069\u3053\u304b\u3067sinatra/reloader\u3092\u6709\u52b9\u5316\u3059\u308b\uff0e\u305d\u306e\u5f8c\uff0c\u30aa\u30fc\u30c8\u30ea\u30ed\u30fc\u30c9\u3057\u305f\u3044\u30d5\u30a1\u30a4\u30eb\uff08\u3053\u3053\u3067\u306f./lib\u4ee5\u4e0b\u306e\u5404*.rb\u30d5\u30a1\u30a4\u30eb\uff09\u3092also_reload\u306b\u55b0\u308f\u305b\u308b\uff0e\n\nlib/app/app.rb\nrequire 'sinatra'\n\nif development?\n  require 'sinatra/reloader'\n  Dir[File.join(SOURCES_DIR, '**', '*.rb')].each { |f| also_reload f }\nend\n\n\n\nModular Application\n\n\u30aa\u30fc\u30c8\u30ed\u30fc\u30c9\nClassic\u306e\u3068\u304d\u3068\u540c\u3058\uff0e\n\n\u30aa\u30fc\u30c8\u30ea\u30ed\u30fc\u30c9\n\u3060\u3044\u305f\u3044\u4f3c\u305f\u3088\u3046\u306a\u611f\u3058\uff0e\n\napp.rb\nrequire 'sinatra/reloader' if development?\n\nclass App < Sinatra::Base\n  configure :development do\n    register Sinatra::Reloader\n    Dir[File.join(SOURCES_DIR, '**', '*.rb')].each { |f| also_reload f }\n  end\n\n  # snip.\nend\n\n\n\n\u53c2\u8003\n\nSinatra::Reloader (part of Sinatra::Contrib)\nActiveSupport::Dependencies\n\nhttp://qiita.com/izumin5210/items/cd2f9f48fbe1fdcaf628 \u306e\u7d9a\u7de8\n\nsinatra-reloader\u3092\u4f7f\u308f\u306a\u3051\u308c\u3070\u3082\u3063\u3068\u697d\u306b\u306a\u308b\u6c17\u304c\u3059\u308b\u2026\n\n---\n\n## \u5c0e\u5165\n\n\u3068\u308a\u3042\u3048\u305a`sinatra-contrib`\u3068`activesupport'\u3092\u5165\u308c\u308b\uff0e\n\n```ruby:Gemfile\n# \u524d\u7565\n\ngem 'sinatra'\ngem 'sinatra-contrib'\ngem 'activesupport'\n\n# \u5f8c\u7565\n```\n\n\n## \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u4f8b\n`config/boot.rb`\u3092\u7528\u610f\u3057\uff0c\u6700\u521d\u306b\u3053\u308c\u3092\u8aad\u307e\u305b\u308b\u3088\u3046\u306b\u3059\u308b\uff0e\n\n```\n.\n\u251c\u2500\u2500 Gemfile\n\u251c\u2500\u2500 Gemfile.lock\n\u251c\u2500\u2500 config\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 boot.rb\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 database.yml\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 global\n\u251c\u2500\u2500 config.ru\n\u251c\u2500\u2500 lib\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 models\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ...\n\u2502\n...\n```\n\n\u30aa\u30fc\u30c8\u30ed\u30fc\u30c9\u306b`ActiveSupport::Dependencies`\u3092\u5229\u7528\u3059\u308b\u306e\u3067\uff0c\u30d5\u30a1\u30a4\u30eb\u540d\u3068\u305d\u306e\u4e2d\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u308bmodule/class\u540d\u306f\u305d\u306e\u898f\u7d04\u306b\u5f93\u308f\u306a\u3044\u3068\u3044\u3051\u306a\u3044\uff0e\n\ne.g.\n\n- `./lib/models/user.rb` => `User`\n- `./lib/models/app/user.rb` => `App::User`\n\n## \u6709\u52b9\u5316\n\n### Classic Application\n#### \u30aa\u30fc\u30c8\u30ed\u30fc\u30c9\n\n`ActiveSupport::Dependencies.autoload_paths`\u306b\u5bfe\u8c61\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff08\u3053\u3053\u3067\u306f`./lib`\u4ee5\u4e0b\u306e\u5404\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff09\u3092\u55b0\u308f\u305b\u308b\uff0e\n\n```ruby:config/boot.rb\nROOT_DIR = File.join(File.expand_path(File.dirname(__FILE__)), '..')\nSOURCES_DIR = File.join(ROOT_DIR, 'lib')\nActiveSupport::Dependencies.autoload_paths = Dir[File.join(SOURCES_DIR, '**')]\n```\n\n#### \u30aa\u30fc\u30c8\u30ea\u30ed\u30fc\u30c9\n\u3069\u3053\u304b\u3067`sinatra/reloader`\u3092\u6709\u52b9\u5316\u3059\u308b\uff0e\u305d\u306e\u5f8c\uff0c\u30aa\u30fc\u30c8\u30ea\u30ed\u30fc\u30c9\u3057\u305f\u3044\u30d5\u30a1\u30a4\u30eb\uff08\u3053\u3053\u3067\u306f`./lib`\u4ee5\u4e0b\u306e\u5404`*.rb`\u30d5\u30a1\u30a4\u30eb\uff09\u3092`also_reload`\u306b\u55b0\u308f\u305b\u308b\uff0e\n\n```ruby:lib/app/app.rb\nrequire 'sinatra'\n\nif development?\n  require 'sinatra/reloader'\n  Dir[File.join(SOURCES_DIR, '**', '*.rb')].each { |f| also_reload f }\nend\n```\n\n### Modular Application\n#### \u30aa\u30fc\u30c8\u30ed\u30fc\u30c9\nClassic\u306e\u3068\u304d\u3068\u540c\u3058\uff0e\n\n#### \u30aa\u30fc\u30c8\u30ea\u30ed\u30fc\u30c9\n\u3060\u3044\u305f\u3044\u4f3c\u305f\u3088\u3046\u306a\u611f\u3058\uff0e\n\n```ruby:app.rb\nrequire 'sinatra/reloader' if development?\n\nclass App < Sinatra::Base\n  configure :development do\n    register Sinatra::Reloader\n    Dir[File.join(SOURCES_DIR, '**', '*.rb')].each { |f| also_reload f }\n  end\n\n  # snip.\nend\n```\n\n# \u53c2\u8003\n- [Sinatra::Reloader (part of Sinatra::Contrib)](http://www.sinatrarb.com/contrib/reloader.html)\n- [ActiveSupport::Dependencies](http://api.rubyonrails.org/classes/ActiveSupport/Dependencies.html)\n", "tags": ["Ruby", "Sinatra"]}