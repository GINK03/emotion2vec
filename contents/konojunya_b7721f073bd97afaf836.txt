{"context": "\n\n\u81ea\u5df1\u7d39\u4ecb\nHAL\u5927\u962a2\u56de\u751f\u306e\u3058\u3085\u3093\u3058\u3085\u3093\u3067\u3059\u3002\n\u666e\u6bb5\u306f\u3001\u5b66\u6821\u3068\u30a2\u30eb\u30d0\u30a4\u30c8\u3067\u6bce\u65e5\u3092\u904e\u3054\u3057\u3066\u3044\u307e\u3059\u3002\n\u3088\u304f\u30a4\u30d9\u30f3\u30c8\u306b\u51fa\u3066\u308b\u306e\u3067\u3082\u3057\u3054\u4e00\u7dd2\u306b\u306a\u308b\u3053\u3068\u304c\u3042\u308c\u3070\u304a\u8a71\u3057\u3057\u307e\u3057\u3087\u3046\uff01\n\n\u3064\u304f\u3063\u305f\u3082\u306e\n\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3067\u4ed6\u8a00\u8a9e\u3078\u5909\u63db\u3067\u304d\u308b\u3082\u306e\u3092\u3064\u304f\u308a\u307e\u3057\u305f\u3002\nmicrosoft\u306etranslate api\u3092\u4f7f\u308f\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n\n\u5b9f\u88c5\n\u3068\u3044\u3063\u3066\u3082\u3001 @n0bisuke \u3055\u3093\u306e\u8a18\u4e8b\u3092\u307b\u307c\u30d1\u30af\u3063\u3066\u3082\u3089\u3048\u308c\u3070\u5927\u4e08\u592b\u3067\u3059\u3002\nMicrosoft Translator Text API\u3092Node.js\u304b\u3089\u4f7f\u3063\u3066\u307f\u308b\nfunction getAccessToken(callback) {\n    let body = '';\n    let data = {\n        'client_id': process.env.MS_TRANSLATE_ID,\n        'client_secret': process.env.MS_TRANSLATE_SECRET,\n        'scope': 'http://api.microsofttranslator.com',\n        'grant_type': 'client_credentials'\n    };\n\n    let req = https.request({\n        host: 'datamarket.accesscontrol.windows.net',\n        path: '/v2/OAuth2-13',\n        method: 'POST'\n    }, (res) => {\n        res.setEncoding('utf8');\n        res.on('data', (chunk) => {\n            body += chunk;\n        }).on('end', () => {\n            let resData = JSON.parse(body);\n            callback(resData.access_token);\n        });\n    }).on('error', (err) => {\n        console.log(err);\n    });\n    req.write(qs.stringify(data));\n    req.end();\n}\n\nfunction translate(token, text,from,to, callback) {\n    let options = 'from='+from+'&to='+to+'&text=' + qs.escape(text) +'&oncomplete=translated';\n    let body = '';\n    let req = http.request({\n        host: 'api.microsofttranslator.com',\n        path: '/V2/Ajax.svc/Translate?' + options,\n        method: 'GET',\n        headers: {\n            \"Authorization\": 'Bearer ' + token\n        }\n    }, (res) => {\n        res.setEncoding('utf8');\n        res.on('data', (chunk) => {\n            body += chunk;\n        }).on('end', () => {\n            eval(body);\n        });\n    }).on('error', (err) => {\n        console.log(err);\n    });\n    req.end();\n\n    function translated(text) {\n        callback(text);\n    }\n}\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u304b\u306d\u3002\n\u3067\u306f\u3001\u30e1\u30a4\u30f3\u306e\u90e8\u5206\u3092\u3064\u304f\u3063\u3066\u3044\u304d\u307e\u3059\u3002\nvar text = process.argv[2] //\u5909\u63db\u3059\u308b\u30c6\u30ad\u30b9\u30c8\nvar translate_type = process.argv[3] || \"ja/en\" // \u3069\u306e\u3088\u3046\u306b\u5909\u63db\u3059\u308b\u304b\n\ntranslate_type = translate_type.split(\"/\");\n\n\ngetAccessToken((token) => {\n  translate(token, text,translate_type[0],translate_type[1], (translated) => {\n      console.log(translated);\n  });\n});\n\n\n\u3068\u3066\u3082\u9069\u5f53\u306a\u30b3\u30fc\u30c9\u3067\u3059\u304c\u52d5\u304d\u307e\u3059\uff08\uff09\n\n\u30b3\u30de\u30f3\u30c9\u306b\u3059\u308b\n\u3055\u3066\u3002\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\u306b\u3059\u308b\u305f\u3081\u306b\u306f\u30b3\u30de\u30f3\u30c9\u306b\u3057\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\n\u3053\u308c\u306b\u306fpackage.json\u3092\u5c11\u3057\u3044\u3058\u308a\u307e\u3059\u3002\n{\n  \"name\": \"translate-command\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"app.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/konojunya/translate-command.git\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"bugs\": {\n    \"url\": \"https://github.com/konojunya/translate-command/issues\"\n  },\n  \"homepage\": \"https://github.com/konojunya/translate-command#readme\"\n\n\u307f\u306a\u3055\u3093\u3001\u4f3c\u305f\u3088\u3046\u306a\u611f\u3058\u306e package.json \u3092\u3082\u3063\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\uff08\u50d5\u306e\u306f npm init -y\u3000\u3067\u3059\uff09\n\u3053\u3053\u306b\u5c11\u3057\u66f8\u304d\u52a0\u3048\u307e\u3059\u3002\n\"bin\": {\n  \"translate\": \"bin/app.js\"\n}\n\n\u3053\u306e3\u884c\u3092\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\uff01\n\u306a\u304a\u3001\u3053\u306e\u6642\u306ekey\u306b\u306a\u3063\u3066\u308b\u90e8\u5206\u304c\u30b3\u30de\u30f3\u30c9\u81ea\u4f53\u306b\u306a\u308b\u306e\u3067\u3001\u7af6\u5408\u3057\u306a\u3044\u3088\u3046\u306b\u3001\u6253\u3061\u3084\u3059\u3044\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3055\u3066\u3001\u51e6\u7406\u81ea\u4f53\u3092\u66f8\u3044\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u3092 app.js \u3068\u3057\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\u5168\u4f53\u306e\u69cb\u9020\u3092\u307f\u3066\u3044\u304d\u307e\u3059\u3002\n\u4eca\u56de\u3064\u304f\u3063\u305f package.json \u3068 app.js \u306e\u95a2\u4fc2\u306f\u3053\u306e\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\ntranslate/\n  - package.json\n  - bin/\n    - app.js\n\nbin/app.js \u3068\u3057\u307e\u3059\u3002\u305d\u3057\u3066\u3001 translate \u306e\u968e\u5c64\u3067\nnpm install -g \u3068\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3059\u308b\u3068\u3001 translate \u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u3042\u3068\u306f\u3001\u597d\u304d\u306a\u3088\u3046\u306b\u7ffb\u8a33\u3092\u697d\u3057\u3093\u3067\u304f\u3060\u3055\u3044\uff01\n\u305f\u3060\u3057\u3001\u4eca\u56de\u4f7f\u7528\u3057\u305fAPI\u306f200\u4e07\u6587\u5b57\u307e\u3067\u306f\u7121\u6599\u3067\u3059\u304c\u3001\u305d\u306e\u5f8c\u306f\u6709\u6599\u306e\u3088\u3046\u3067\u3059\u3002\n\u304a\u6c17\u3092\u3064\u3051\u304f\u3060\u3055\u3044\u3002\n\n\u3042\u3068\u304c\u304d\ntranslate-command\nGitHub\u306b\u30b3\u30fc\u30c9\u3092\u3042\u3052\u3066\u3044\u307e\u3059\u3002\nMS\u306eAPI Key\u3060\u3051\u53d6\u5f97\u3057\u3066\u74b0\u5883\u5909\u6570\u306b\u304b\u3044\u3066\u304a\u3051\u3070\u3001installation\u3068\u66f8\u3044\u3066\u3044\u308b\u5834\u6240\u306e\u901a\u308a\u306b\u3059\u308c\u3070\u52d5\u304d\u307e\u3059\uff01\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\u3064\u304f\u3063\u3066\u3001\u826f\u304d\u30b7\u30a7\u30eb\u751f\u6d3b\u3092...\n# \u81ea\u5df1\u7d39\u4ecb\n\nHAL\u5927\u962a2\u56de\u751f\u306e\u3058\u3085\u3093\u3058\u3085\u3093\u3067\u3059\u3002\n\n\u666e\u6bb5\u306f\u3001\u5b66\u6821\u3068\u30a2\u30eb\u30d0\u30a4\u30c8\u3067\u6bce\u65e5\u3092\u904e\u3054\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3088\u304f\u30a4\u30d9\u30f3\u30c8\u306b\u51fa\u3066\u308b\u306e\u3067\u3082\u3057\u3054\u4e00\u7dd2\u306b\u306a\u308b\u3053\u3068\u304c\u3042\u308c\u3070\u304a\u8a71\u3057\u3057\u307e\u3057\u3087\u3046\uff01\n\n# \u3064\u304f\u3063\u305f\u3082\u306e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2017-02-11 18.31.05.png](https://qiita-image-store.s3.amazonaws.com/0/90347/9b28a8cc-3691-e389-8c3d-7ec3f75112b0.png)\n\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3067\u4ed6\u8a00\u8a9e\u3078\u5909\u63db\u3067\u304d\u308b\u3082\u306e\u3092\u3064\u304f\u308a\u307e\u3057\u305f\u3002\n\nmicrosoft\u306etranslate api\u3092\u4f7f\u308f\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n\n# \u5b9f\u88c5\n\n\u3068\u3044\u3063\u3066\u3082\u3001 @n0bisuke \u3055\u3093\u306e\u8a18\u4e8b\u3092\u307b\u307c\u30d1\u30af\u3063\u3066\u3082\u3089\u3048\u308c\u3070\u5927\u4e08\u592b\u3067\u3059\u3002\n\n[Microsoft Translator Text API\u3092Node.js\u304b\u3089\u4f7f\u3063\u3066\u307f\u308b](http://qiita.com/n0bisuke/items/350752978b16f4429b31)\n\n```js\nfunction getAccessToken(callback) {\n\tlet body = '';\n\tlet data = {\n\t\t'client_id': process.env.MS_TRANSLATE_ID,\n\t\t'client_secret': process.env.MS_TRANSLATE_SECRET,\n\t\t'scope': 'http://api.microsofttranslator.com',\n\t\t'grant_type': 'client_credentials'\n\t};\n\n\tlet req = https.request({\n\t\thost: 'datamarket.accesscontrol.windows.net',\n\t\tpath: '/v2/OAuth2-13',\n\t\tmethod: 'POST'\n\t}, (res) => {\n\t\tres.setEncoding('utf8');\n\t\tres.on('data', (chunk) => {\n\t\t\tbody += chunk;\n\t\t}).on('end', () => {\n\t\t\tlet resData = JSON.parse(body);\n\t\t\tcallback(resData.access_token);\n\t\t});\n\t}).on('error', (err) => {\n\t\tconsole.log(err);\n\t});\n\treq.write(qs.stringify(data));\n\treq.end();\n}\n\nfunction translate(token, text,from,to, callback) {\n\tlet options = 'from='+from+'&to='+to+'&text=' + qs.escape(text) +'&oncomplete=translated';\n\tlet body = '';\n\tlet req = http.request({\n\t\thost: 'api.microsofttranslator.com',\n\t\tpath: '/V2/Ajax.svc/Translate?' + options,\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t\"Authorization\": 'Bearer ' + token\n\t\t}\n\t}, (res) => {\n\t\tres.setEncoding('utf8');\n\t\tres.on('data', (chunk) => {\n\t\t\tbody += chunk;\n\t\t}).on('end', () => {\n\t\t\teval(body);\n\t\t});\n\t}).on('error', (err) => {\n\t\tconsole.log(err);\n\t});\n\treq.end();\n\n\tfunction translated(text) {\n\t\tcallback(text);\n\t}\n}\n```\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u304b\u306d\u3002\n\n\u3067\u306f\u3001\u30e1\u30a4\u30f3\u306e\u90e8\u5206\u3092\u3064\u304f\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n```js\nvar text = process.argv[2] //\u5909\u63db\u3059\u308b\u30c6\u30ad\u30b9\u30c8\nvar translate_type = process.argv[3] || \"ja/en\" // \u3069\u306e\u3088\u3046\u306b\u5909\u63db\u3059\u308b\u304b\n\ntranslate_type = translate_type.split(\"/\");\n\n\ngetAccessToken((token) => {\n  translate(token, text,translate_type[0],translate_type[1], (translated) => {\n      console.log(translated);\n  });\n});\n\n```\n\n\u3068\u3066\u3082\u9069\u5f53\u306a\u30b3\u30fc\u30c9\u3067\u3059\u304c\u52d5\u304d\u307e\u3059\uff08\uff09\n\n# \u30b3\u30de\u30f3\u30c9\u306b\u3059\u308b\n\n\u3055\u3066\u3002\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\u306b\u3059\u308b\u305f\u3081\u306b\u306f\u30b3\u30de\u30f3\u30c9\u306b\u3057\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\n\n\u3053\u308c\u306b\u306fpackage.json\u3092\u5c11\u3057\u3044\u3058\u308a\u307e\u3059\u3002\n\n```json\n{\n  \"name\": \"translate-command\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"app.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/konojunya/translate-command.git\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"bugs\": {\n    \"url\": \"https://github.com/konojunya/translate-command/issues\"\n  },\n  \"homepage\": \"https://github.com/konojunya/translate-command#readme\"\n```\n\n\u307f\u306a\u3055\u3093\u3001\u4f3c\u305f\u3088\u3046\u306a\u611f\u3058\u306e `package.json` \u3092\u3082\u3063\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\uff08\u50d5\u306e\u306f `npm init -y`\u3000\u3067\u3059\uff09\n\n\u3053\u3053\u306b\u5c11\u3057\u66f8\u304d\u52a0\u3048\u307e\u3059\u3002\n\n```json\n\"bin\": {\n  \"translate\": \"bin/app.js\"\n}\n```\n\n\u3053\u306e3\u884c\u3092\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\uff01\n\n\u306a\u304a\u3001\u3053\u306e\u6642\u306ekey\u306b\u306a\u3063\u3066\u308b\u90e8\u5206\u304c\u30b3\u30de\u30f3\u30c9\u81ea\u4f53\u306b\u306a\u308b\u306e\u3067\u3001\u7af6\u5408\u3057\u306a\u3044\u3088\u3046\u306b\u3001\u6253\u3061\u3084\u3059\u3044\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u3055\u3066\u3001\u51e6\u7406\u81ea\u4f53\u3092\u66f8\u3044\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u3092 `app.js` \u3068\u3057\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\n\u5168\u4f53\u306e\u69cb\u9020\u3092\u307f\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u4eca\u56de\u3064\u304f\u3063\u305f `package.json` \u3068 `app.js` \u306e\u95a2\u4fc2\u306f\u3053\u306e\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\ntranslate/\n  - package.json\n  - bin/\n    - app.js\n```\n\n`bin/app.js` \u3068\u3057\u307e\u3059\u3002\u305d\u3057\u3066\u3001 `translate` \u306e\u968e\u5c64\u3067\n\n`npm install -g` \u3068\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u3059\u308b\u3068\u3001 `translate` \u3068\u3044\u3046\u30b3\u30de\u30f3\u30c9\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u3042\u3068\u306f\u3001\u597d\u304d\u306a\u3088\u3046\u306b\u7ffb\u8a33\u3092\u697d\u3057\u3093\u3067\u304f\u3060\u3055\u3044\uff01\n\n\u305f\u3060\u3057\u3001\u4eca\u56de\u4f7f\u7528\u3057\u305fAPI\u306f200\u4e07\u6587\u5b57\u307e\u3067\u306f\u7121\u6599\u3067\u3059\u304c\u3001\u305d\u306e\u5f8c\u306f\u6709\u6599\u306e\u3088\u3046\u3067\u3059\u3002\n\n\u304a\u6c17\u3092\u3064\u3051\u304f\u3060\u3055\u3044\u3002\n\n# \u3042\u3068\u304c\u304d\n\n[translate-command](https://github.com/konojunya/translate-command)\n\nGitHub\u306b\u30b3\u30fc\u30c9\u3092\u3042\u3052\u3066\u3044\u307e\u3059\u3002\n\nMS\u306eAPI Key\u3060\u3051\u53d6\u5f97\u3057\u3066\u74b0\u5883\u5909\u6570\u306b\u304b\u3044\u3066\u304a\u3051\u3070\u3001installation\u3068\u66f8\u3044\u3066\u3044\u308b\u5834\u6240\u306e\u901a\u308a\u306b\u3059\u308c\u3070\u52d5\u304d\u307e\u3059\uff01\n\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\u3064\u304f\u3063\u3066\u3001\u826f\u304d\u30b7\u30a7\u30eb\u751f\u6d3b\u3092...\n", "tags": ["Node.js", "command", "tool"]}