{"context": " More than 1 year has passed since last update.===========================\nGitlab 5.0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (CentOS 6.5)\nGitlab\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 5.0 -> 6.0\nGitlab\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 6.0 -> 7.2\n\u306e\u5f8c\u306b\u884c\u3063\u305f\u4f5c\u696d\u3067\u3059\u3002\n\nRequirements\n\nCentOS (Tested on 6.5)\nruby (Tested on 2.1.2)\n\n\nUpgrade\n\ngitlab\u505c\u6b62\n\nservice gitlab stop\n\n\n\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n\nsu - git\ncd /home/git/gitlab\nbundle exec rake gitlab:backup:create RAILS_ENV=production\n\n\n\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u3067Gitlab\u672c\u4f53\u3092\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\n\nsu - git\ncd /home/git/gitlab\nif [ -f bin/upgrade.rb ]; then ruby bin/upgrade.rb; else ruby script/upgrade.rb; fi\n\n\nunicorn\u306etimeout\u309260\u79d2\u306b\u4fee\u6b63\u3059\u308b\uff08\u65e2\u306b\u8a2d\u5b9a\u3057\u3066\u3042\u308c\u3070\u305d\u306e\u307e\u307e\uff09\n\nvim config/unicorn.rb\n\n-timeout 30\n+timeout 60\n\n\nmysql\u306e\u63a5\u7d9a\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b\n\nproduction:\n\n-pool: 5\n+pool: 10\n+collation: utf8_general_ci\n\npool\u3092\u5897\u3084\u3057\u3066\u3044\u308b\u3002\n\ngitlab-shell\u3092\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\n\nsu - git\ncd /home/git/gitlab-shell\ngit checkout v2.2.0\n\n\ngitlab-shell\u304c\u5229\u7528\u3059\u308bgitlab\u306eURL\u3092\u4fee\u6b63\n\ncd /home/git/gitlab-shell\nvim config.yml\n\n-gitlab_url: \"http://localhost:3000/\"\n+gitlab_url: \"https://gitlab.example.com/\"\n\nvim lib/gitlab_config.rb\n\n-@config['gitlab_url'] ||= \"http://localhost:3000/\"\n+@config['gitlab_url'] ||= \"https://gitlab.example.com/\"\n\n\n\u8d77\u52d5\n\nservice gitlab start\n\n\nTrouble shooting\n\n\u30ed\u30b0\u3092\u898b\u3066\u307f\u308b\n\ncd /home/git/gitlab/log\ntail -f *.log\n\n\n\nActionView::Template::Error\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u3066500\u306b\u306a\u308b\n\nconfig/gitlab.yml\u5185\u306egit\u306epath\u304c\u5408\u3063\u3066\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\nsubmodule\u3092\u542b\u3080\u30d5\u30a9\u30eb\u30c0\u3067500\u306b\u306a\u308b\n\nsubmodule\u3092\u524a\u9664\u3067\u89e3\u6c7a\u3057\u307e\u3059\u3002\u3082\u3046\u4e00\u5ea6\u8ffd\u52a0\u3059\u308c\u3070\u623b\u308b\u304b\u3082\u3002\n\n\u65e5\u672c\u8a9e\u3092\u542b\u3080\u30bf\u30b0\u30fb\u30d6\u30e9\u30f3\u30c1\n\n\u6d88\u3057\u307e\u3057\u3087\u3046\u3002\n===========================\n\n[Gitlab 5.0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (CentOS 6.5)](http://qiita.com/shufo/items/6fb1bd067ec7e5d47902)\n[Gitlab\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 5.0 -> 6.0](http://qiita.com/shufo/items/f27e62e23b048a5721c0)\n[Gitlab\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8 6.0 -> 7.2](http://qiita.com/shufo/items/77dae2474f153c2c8c03)\n\n\u306e\u5f8c\u306b\u884c\u3063\u305f\u4f5c\u696d\u3067\u3059\u3002\n\n\n## Requirements\n\n- CentOS (Tested on 6.5)\n- ruby (Tested on 2.1.2)\n\n## Upgrade\n\n- gitlab\u505c\u6b62\n\n```\nservice gitlab stop\n```\n\n- \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n\n```\nsu - git\ncd /home/git/gitlab\nbundle exec rake gitlab:backup:create RAILS_ENV=production\n```\n\n- \u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u3067Gitlab\u672c\u4f53\u3092\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\n\n```\nsu - git\ncd /home/git/gitlab\nif [ -f bin/upgrade.rb ]; then ruby bin/upgrade.rb; else ruby script/upgrade.rb; fi\n```\n\n- unicorn\u306etimeout\u309260\u79d2\u306b\u4fee\u6b63\u3059\u308b\uff08\u65e2\u306b\u8a2d\u5b9a\u3057\u3066\u3042\u308c\u3070\u305d\u306e\u307e\u307e\uff09\n\n```\nvim config/unicorn.rb\n```\n\n```diff\n-timeout 30\n+timeout 60\n```\n\n- mysql\u306e\u63a5\u7d9a\u8a2d\u5b9a\u3092\u5909\u66f4\u3059\u308b\n\n```diff\nproduction:\n\n-pool: 5\n+pool: 10\n+collation: utf8_general_ci\n```\n\npool\u3092\u5897\u3084\u3057\u3066\u3044\u308b\u3002\n\n- gitlab-shell\u3092\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\n\n```\nsu - git\ncd /home/git/gitlab-shell\ngit checkout v2.2.0\n```\n\n- gitlab-shell\u304c\u5229\u7528\u3059\u308bgitlab\u306eURL\u3092\u4fee\u6b63\n\n```\ncd /home/git/gitlab-shell\nvim config.yml\n```\n\n```diff\n-gitlab_url: \"http://localhost:3000/\"\n+gitlab_url: \"https://gitlab.example.com/\"\n```\n\n```\nvim lib/gitlab_config.rb\n```\n\n```diff\n-@config['gitlab_url'] ||= \"http://localhost:3000/\"\n+@config['gitlab_url'] ||= \"https://gitlab.example.com/\"\n```\n\n\n\n- \u8d77\u52d5\n\n```\nservice gitlab start\n```\n\n## Trouble shooting\n\n- \u30ed\u30b0\u3092\u898b\u3066\u307f\u308b\n\n```\ncd /home/git/gitlab/log\ntail -f *.log\n```\n\n- `ActionView::Template::Error`\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u3066500\u306b\u306a\u308b\n\n`config/gitlab.yml`\u5185\u306egit\u306epath\u304c\u5408\u3063\u3066\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\n- submodule\u3092\u542b\u3080\u30d5\u30a9\u30eb\u30c0\u3067500\u306b\u306a\u308b\n\nsubmodule\u3092\u524a\u9664\u3067\u89e3\u6c7a\u3057\u307e\u3059\u3002\u3082\u3046\u4e00\u5ea6\u8ffd\u52a0\u3059\u308c\u3070\u623b\u308b\u304b\u3082\u3002\n\n- \u65e5\u672c\u8a9e\u3092\u542b\u3080\u30bf\u30b0\u30fb\u30d6\u30e9\u30f3\u30c1\n\n\u6d88\u3057\u307e\u3057\u3087\u3046\u3002\n", "tags": ["GitLab"]}