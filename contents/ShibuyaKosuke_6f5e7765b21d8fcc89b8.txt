{"context": " More than 1 year has passed since last update.smarty_plugins \u306b\u653e\u308a\u8fbc\u3080\u3060\u3051\u3067\u3059\u3002\n\nfunction.pagination.php\n<?php\n\n/**\n * function.pagination.php\n */\nfunction smarty_function_pagination($params)\n{\n    //\u30ec\u30b3\u30fc\u30c9\u306e\u7dcf\u6570\n    $intTotal = (isset($params['total']) && 0 < $params['total']) ?\n        $params['total'] :\n        0;\n\n    //\u30ec\u30b3\u30fc\u30c9\u7dcf\u6570\u304c\u30bc\u30ed\u306e\u3068\u304d\u306f\u4f55\u3082\u51fa\u529b\u3057\u306a\u3044\n    if (0 === $intTotal) {\n        return '';\n    }\n\n    //\u30da\u30fc\u30b8\u3042\u305f\u308a\u306e\u8868\u793a\u30ec\u30b3\u30fc\u30c9\u6570\n    $intLimit = (isset($params['limit']) && 0 < $params['limit']) ?\n        $params['limit'] :\n        10;\n\n    //\u73fe\u5728\u8868\u793a\u4e2d\u306e\u30da\u30fc\u30b8\u756a\u53f7\uff08\u30bc\u30ed\u30b9\u30bf\u30fc\u30c8\uff09\n    $intCurrentPage = (-1 < filter_input(INPUT_GET, 'page')) ?\n        filter_input(INPUT_GET, 'page') :\n        0;\n\n    //\u30da\u30fc\u30b8\u306e\u6700\u5927\u6570\n    $intMaxpage = ceil($intTotal / $intLimit);\n\n    //\u73fe\u5728\u30da\u30fc\u30b8\u306e\u524d\u5f8c\uff13\u30da\u30fc\u30b8\u3092\u51fa\u529b\n    $intStartpage = (2 < $intCurrentPage) ? $intCurrentPage - 3 : 0;\n    $intEndpage = (($intStartpage + 7) < $intMaxpage) ? $intStartpage + 7 : $intMaxpage;\n\n    //url\u7d44\u307f\u7acb\u3066\n    $urlparams = filter_input_array(INPUT_GET);\n\n    $items = [];\n\n    //\u6700\u521d\n    $urlparams['page'] = 0;\n    $items[] = sprintf('<span><a href=\"?%s\">%s</a></span>'\n        , http_build_query($urlparams)\n        , '\u6700\u521d'\n    );\n\n    //\u8868\u793a\u4e2d\u306e\u30da\u30fc\u30b8\u304c\u5148\u982d\u3067\u306f\u306a\u3044\u6642\n    if (0 < $intCurrentPage) {\n        $urlparams['page'] = $intCurrentPage - 1;\n        $items[] = sprintf('<span><a href=\"?%s\">%s</a></span>'\n            , http_build_query($urlparams)\n            , '\u524d\u3078'\n        );\n    }\n\n    for ($i = $intStartpage; $i < $intEndpage; $i++) {\n        $urlparams['page'] = $i;\n        $items[] = sprintf('<span%s><a href=\"?%s\">%s</a></span>'\n            , ($intCurrentPage == $i) ? ' class=\"current\"' : ''\n            , http_build_query($urlparams)\n            , $i + 1\n        );\n    }\n\n    //\u8868\u793a\u4e2d\u306e\u30da\u30fc\u30b8\u304c\u6700\u5f8c\u3067\u306f\u306a\u3044\u6642\n    if ($intCurrentPage < $intMaxpage) {\n        $urlparams['page'] = $intCurrentPage + 1;\n        $items[] = sprintf('<span><a href=\"?%s\">%s</a></span>'\n            , http_build_query($urlparams)\n            , '\u6b21\u3078'\n        );\n    }\n\n    //\u6700\u5f8c\n    $urlparams['page'] = $intMaxpage - 1;\n    $items[] = sprintf('<span><a href=\"?%s\">%s</a></span>'\n        , http_build_query($urlparams)\n        , '\u6700\u5f8c'\n    );\n\n    return implode(PHP_EOL, $items);\n}\n\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5074\u304b\u3089\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u8868\u793a\u3057\u307e\u3059\u3002\n\n*.tpl\n{pagination total=100 limit=10}\n\n\n\nsmarty_plugins \u306b\u653e\u308a\u8fbc\u3080\u3060\u3051\u3067\u3059\u3002\n\n```php:function.pagination.php\n<?php\n\n/**\n * function.pagination.php\n */\nfunction smarty_function_pagination($params)\n{\n\t//\u30ec\u30b3\u30fc\u30c9\u306e\u7dcf\u6570\n\t$intTotal = (isset($params['total']) && 0 < $params['total']) ?\n\t\t$params['total'] :\n\t\t0;\n\n\t//\u30ec\u30b3\u30fc\u30c9\u7dcf\u6570\u304c\u30bc\u30ed\u306e\u3068\u304d\u306f\u4f55\u3082\u51fa\u529b\u3057\u306a\u3044\n\tif (0 === $intTotal) {\n\t\treturn '';\n\t}\n\n\t//\u30da\u30fc\u30b8\u3042\u305f\u308a\u306e\u8868\u793a\u30ec\u30b3\u30fc\u30c9\u6570\n\t$intLimit = (isset($params['limit']) && 0 < $params['limit']) ?\n\t\t$params['limit'] :\n\t\t10;\n\n\t//\u73fe\u5728\u8868\u793a\u4e2d\u306e\u30da\u30fc\u30b8\u756a\u53f7\uff08\u30bc\u30ed\u30b9\u30bf\u30fc\u30c8\uff09\n\t$intCurrentPage = (-1 < filter_input(INPUT_GET, 'page')) ?\n\t\tfilter_input(INPUT_GET, 'page') :\n\t\t0;\n\n\t//\u30da\u30fc\u30b8\u306e\u6700\u5927\u6570\n\t$intMaxpage = ceil($intTotal / $intLimit);\n\n\t//\u73fe\u5728\u30da\u30fc\u30b8\u306e\u524d\u5f8c\uff13\u30da\u30fc\u30b8\u3092\u51fa\u529b\n\t$intStartpage = (2 < $intCurrentPage) ? $intCurrentPage - 3 : 0;\n\t$intEndpage = (($intStartpage + 7) < $intMaxpage) ? $intStartpage + 7 : $intMaxpage;\n\n\t//url\u7d44\u307f\u7acb\u3066\n\t$urlparams = filter_input_array(INPUT_GET);\n\n\t$items = [];\n\n\t//\u6700\u521d\n\t$urlparams['page'] = 0;\n\t$items[] = sprintf('<span><a href=\"?%s\">%s</a></span>'\n\t\t, http_build_query($urlparams)\n\t\t, '\u6700\u521d'\n\t);\n\n\t//\u8868\u793a\u4e2d\u306e\u30da\u30fc\u30b8\u304c\u5148\u982d\u3067\u306f\u306a\u3044\u6642\n\tif (0 < $intCurrentPage) {\n\t\t$urlparams['page'] = $intCurrentPage - 1;\n\t\t$items[] = sprintf('<span><a href=\"?%s\">%s</a></span>'\n\t\t\t, http_build_query($urlparams)\n\t\t\t, '\u524d\u3078'\n\t\t);\n\t}\n\n\tfor ($i = $intStartpage; $i < $intEndpage; $i++) {\n\t\t$urlparams['page'] = $i;\n\t\t$items[] = sprintf('<span%s><a href=\"?%s\">%s</a></span>'\n\t\t\t, ($intCurrentPage == $i) ? ' class=\"current\"' : ''\n\t\t\t, http_build_query($urlparams)\n\t\t\t, $i + 1\n\t\t);\n\t}\n\n\t//\u8868\u793a\u4e2d\u306e\u30da\u30fc\u30b8\u304c\u6700\u5f8c\u3067\u306f\u306a\u3044\u6642\n\tif ($intCurrentPage < $intMaxpage) {\n\t\t$urlparams['page'] = $intCurrentPage + 1;\n\t\t$items[] = sprintf('<span><a href=\"?%s\">%s</a></span>'\n\t\t\t, http_build_query($urlparams)\n\t\t\t, '\u6b21\u3078'\n\t\t);\n\t}\n\n\t//\u6700\u5f8c\n\t$urlparams['page'] = $intMaxpage - 1;\n\t$items[] = sprintf('<span><a href=\"?%s\">%s</a></span>'\n\t\t, http_build_query($urlparams)\n\t\t, '\u6700\u5f8c'\n\t);\n\n\treturn implode(PHP_EOL, $items);\n}\n\n```\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5074\u304b\u3089\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u8868\u793a\u3057\u307e\u3059\u3002\n\n```html:*.tpl\n{pagination total=100 limit=10}\n```\n", "tags": ["Smarty", "PHP"]}