{"tags": ["passenger5.0.13", "Rails4.2.3", "Apache"], "context": " More than 1 year has passed since last update.\u30b0\u30b0\u308b\u3068\u53e4\u3044\u60c5\u5831\u304c\u305f\u304f\u3055\u3093\u3067\u3066\u304d\u3066\u3001\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u8cbc\u308b\u3068\u304b\u8cbc\u3089\u306a\u3044\u3068\u304b\u3001\u8cbc\u3089\u306a\u3044\u3068\u52d5\u304b\u306a\u3044\u3068\u3044\u3046\u5185\u5bb9\u3082\u3042\u3063\u305f\u308a\u3067\u3088\u304f\u308f\u304b\u3089\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u3061\u3083\u3093\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u3093\u3067\u7406\u89e3\u306e\u7bc4\u7587\u3067\u307e\u3068\u3081\u307e\u3057\u305f\u3002\nPassenger 5.0.13 + Rails 4.2.3 \u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\n\u4f8b1. \u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3060\u3051Rails\u30a2\u30d7\u30ea\n\u6b21\u306e\u306f / \u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3068\u304d\u306f\u3001\u9759\u7684\u306aHTML /var/www/default/index.html \u3092\u898b\u3066 /app1 \u306e\u5834\u5408\u306f /var/www/app1 \u306b capistrano \u3067\u30c7\u30d7\u30ed\u30a4\u3057\u305f Rails \u30a2\u30d7\u30ea\u3092\u898b\u308b\u4f8b\u306e\u8a2d\u5b9a\u3067\u3059\u3002\n\n\n\nURL Path\nRails root\n\n\n\n\n/\n/var/www/default/index.html\n\n\n/app1\n/var/www/app1/current\n\n\n\n\nhttpd.conf\n<VirtualHost *:80>\n  ServerName xxx.sakura.ne.jp\n\n  DocumentRoot /var/www/default\n  <Directory /var/www/default>\n    Allow from all\n    Options -MultiViews\n  </Directory>\n\n  <Directory /var/www/*/current/public>\n    Allow from all\n    Options -MultiViews\n  </Directory>\n\n  # app2\u3092\u4f5c\u308b\u5834\u5408\u306f\u6b21\u306e5\u884c\u3092\u30b3\u30d4\u30da\u3067\u5897\u3084\u3057\u3066app2\u306b\u3059\u308b\n  Alias /app1 /var/www/app1/current/public\n  <Location /app1>\n    PassengerBaseURI /app1\n    PassengerAppRoot /var/www/app1/current\n  </Location>\n</VirtualHost>\n\n\n\n\u4f8b2. \u5168\u90e8Rails\u30a2\u30d7\u30ea\n\u6b21\u306e\u306f / \u3082Rails\u30a2\u30d7\u30ea app0 \u306b\u306a\u3063\u3066\u3044\u308b\u4f8b\u3067\u3059\u3002\n\n\n\nURL Path\nRails root\n\n\n\n\n/\n/var/www/app0/current\n\n\n/app1\n/var/www/app1/current\n\n\n\n\nhttpd.conf\n<VirtualHost *:80>\n  ServerName xxx.sakura.ne.jp\n\n  <Directory /var/www/*/current/public>\n    Allow from all\n    Options -MultiViews\n  </Directory>\n\n  DocumentRoot /var/www/app0/current/public\n\n  # app2\u3092\u4f5c\u308b\u5834\u5408\u306f\u6b21\u306e5\u884c\u3092\u30b3\u30d4\u30da\u3067\u5897\u3084\u3057\u3066app2\u306b\u3059\u308b\n  Alias /app1 /var/www/app1/current/public\n  <Location /app1>\n    PassengerBaseURI /app1\n    PassengerAppRoot /var/www/app1/current\n  </Location>\n</VirtualHost>\n\n\nRails\u30a2\u30d7\u30ea\u306e\u30c7\u30d7\u30ed\u30a4\u5148\u306f /var/www/* \u4ee5\u4e0b\u306b\u307e\u3068\u3081\u308b\u3053\u3068\u3067\u3001Directory\u8a2d\u5b9a\u3092\u5171\u901a\u5316\u3057\u3066\u3044\u307e\u3059\u3002\n\u307e\u305fRails\u306f\u3001Passenger\u304c\u8a2d\u5b9a\u3057\u3066\u304f\u308c\u308b\u74b0\u5883\u5909\u6570 RAILS_RELATIVE_URL_ROOT \u3092\u8003\u616e\u3057\u3066\u3001\u81ea\u52d5\u7684\u306b\u305a\u3089\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u3001\u6614\u306f\u3084\u3051\u306b\u96e3\u3057\u304b\u3063\u305f\u8a18\u61b6\u304c\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u4eca\u3067\u306f\u7279\u5225\u306b\u4f55\u304b\u3059\u308b\u5fc5\u8981\u306f\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\u30b0\u30b0\u308b\u3068\u53e4\u3044\u60c5\u5831\u304c\u305f\u304f\u3055\u3093\u3067\u3066\u304d\u3066\u3001\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u8cbc\u308b\u3068\u304b\u8cbc\u3089\u306a\u3044\u3068\u304b\u3001\u8cbc\u3089\u306a\u3044\u3068\u52d5\u304b\u306a\u3044\u3068\u3044\u3046\u5185\u5bb9\u3082\u3042\u3063\u305f\u308a\u3067\u3088\u304f\u308f\u304b\u3089\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u3061\u3083\u3093\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u3093\u3067\u7406\u89e3\u306e\u7bc4\u7587\u3067\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\nPassenger 5.0.13 + Rails 4.2.3 \u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\n# \u4f8b1. \u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3060\u3051Rails\u30a2\u30d7\u30ea\n\n\u6b21\u306e\u306f / \u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3068\u304d\u306f\u3001\u9759\u7684\u306aHTML /var/www/default/index.html \u3092\u898b\u3066 /app1 \u306e\u5834\u5408\u306f /var/www/app1 \u306b capistrano \u3067\u30c7\u30d7\u30ed\u30a4\u3057\u305f Rails \u30a2\u30d7\u30ea\u3092\u898b\u308b\u4f8b\u306e\u8a2d\u5b9a\u3067\u3059\u3002\n\n| URL Path| Rails root |\n|:-------|:----------------------------|\n| /      | /var/www/default/index.html |\n| /app1  | /var/www/app1/current       |\n\n```httpd.conf\n<VirtualHost *:80>\n  ServerName xxx.sakura.ne.jp\n\n  DocumentRoot /var/www/default\n  <Directory /var/www/default>\n    Allow from all\n    Options -MultiViews\n  </Directory>\n\n  <Directory /var/www/*/current/public>\n    Allow from all\n    Options -MultiViews\n  </Directory>\n\n  # app2\u3092\u4f5c\u308b\u5834\u5408\u306f\u6b21\u306e5\u884c\u3092\u30b3\u30d4\u30da\u3067\u5897\u3084\u3057\u3066app2\u306b\u3059\u308b\n  Alias /app1 /var/www/app1/current/public\n  <Location /app1>\n    PassengerBaseURI /app1\n    PassengerAppRoot /var/www/app1/current\n  </Location>\n</VirtualHost>\n```\n\n# \u4f8b2. \u5168\u90e8Rails\u30a2\u30d7\u30ea\n\n\u6b21\u306e\u306f / \u3082Rails\u30a2\u30d7\u30ea app0 \u306b\u306a\u3063\u3066\u3044\u308b\u4f8b\u3067\u3059\u3002\n\n| URL Path| Rails root |\n|:-------|:----------------------------|\n| /      | /var/www/app0/current       |\n| /app1  | /var/www/app1/current       |\n\n```httpd.conf\n<VirtualHost *:80>\n  ServerName xxx.sakura.ne.jp\n\n  <Directory /var/www/*/current/public>\n    Allow from all\n    Options -MultiViews\n  </Directory>\n\n  DocumentRoot /var/www/app0/current/public\n\n  # app2\u3092\u4f5c\u308b\u5834\u5408\u306f\u6b21\u306e5\u884c\u3092\u30b3\u30d4\u30da\u3067\u5897\u3084\u3057\u3066app2\u306b\u3059\u308b\n  Alias /app1 /var/www/app1/current/public\n  <Location /app1>\n    PassengerBaseURI /app1\n    PassengerAppRoot /var/www/app1/current\n  </Location>\n</VirtualHost>\n```\n\nRails\u30a2\u30d7\u30ea\u306e\u30c7\u30d7\u30ed\u30a4\u5148\u306f /var/www/* \u4ee5\u4e0b\u306b\u307e\u3068\u3081\u308b\u3053\u3068\u3067\u3001Directory\u8a2d\u5b9a\u3092\u5171\u901a\u5316\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u307e\u305fRails\u306f\u3001Passenger\u304c\u8a2d\u5b9a\u3057\u3066\u304f\u308c\u308b\u74b0\u5883\u5909\u6570 RAILS_RELATIVE_URL_ROOT \u3092\u8003\u616e\u3057\u3066\u3001\u81ea\u52d5\u7684\u306b\u305a\u3089\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u3001\u6614\u306f\u3084\u3051\u306b\u96e3\u3057\u304b\u3063\u305f\u8a18\u61b6\u304c\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u4eca\u3067\u306f\u7279\u5225\u306b\u4f55\u304b\u3059\u308b\u5fc5\u8981\u306f\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\n"}