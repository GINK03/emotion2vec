{"tags": ["Git", "Ruby", "rake"], "context": " More than 1 year has passed since last update.Rake\u304b\u3089\u300c\u5e74\u6708\u65e5.\u305d\u306e\u65e5\u306e\u30ea\u30ea\u30fc\u30b9\u30ab\u30a6\u30f3\u30c8\u300d\u306a\u308b\u30ea\u30ea\u30fc\u30b9\u7528\u306eGit\u30bf\u30b0\u3092\u6253\u3061\u307e\u3059\u3002\nRuby\u306f\u521d\u3081\u3066\u89e6\u308b\u306e\u3067\u3001\u3082\u3063\u3068\u3044\u3044\u65b9\u6cd5\u304c\u3042\u308b\u304b\u3082\u2026\u2026\u3002\nrequire \"open3\"\nrequire \"time\"\n\ntask :add_release_tag do\n  day = Time.now.strftime(\"%Y%m%d\")\n  ver = 0\n  tag = \"#{day}.#{ver}\"\n  while Open3.capture3(\"git show #{tag}\")[2].exitstatus == 0\n    ver += 1\n    tag = \"#{day}.#{ver}\"\n  end\n\n  `git tag -a #{tag} -m \"release tag by rake\"`\n  `git push #{ENV[\"REMOTE_REPOGITORY\"]} --tags`\nend\n\n\u30ea\u30ea\u30fc\u30b9\u6642\u306b\u884c\u3046\u4ed6\u306e\u30bf\u30b9\u30af\u3068\u7e8f\u3081\u3066\u304a\u304f\u3068\u826f\u3044\u611f\u3058\u3002\ntask :release => [:prepare, :deploy, :add_release_tag]\n\nRake\u304b\u3089\u300c\u5e74\u6708\u65e5.\u305d\u306e\u65e5\u306e\u30ea\u30ea\u30fc\u30b9\u30ab\u30a6\u30f3\u30c8\u300d\u306a\u308b\u30ea\u30ea\u30fc\u30b9\u7528\u306eGit\u30bf\u30b0\u3092\u6253\u3061\u307e\u3059\u3002\nRuby\u306f\u521d\u3081\u3066\u89e6\u308b\u306e\u3067\u3001\u3082\u3063\u3068\u3044\u3044\u65b9\u6cd5\u304c\u3042\u308b\u304b\u3082\u2026\u2026\u3002\n\n```rb\nrequire \"open3\"\nrequire \"time\"\n\ntask :add_release_tag do\n  day = Time.now.strftime(\"%Y%m%d\")\n  ver = 0\n  tag = \"#{day}.#{ver}\"\n  while Open3.capture3(\"git show #{tag}\")[2].exitstatus == 0\n    ver += 1\n    tag = \"#{day}.#{ver}\"\n  end\n\n  `git tag -a #{tag} -m \"release tag by rake\"`\n  `git push #{ENV[\"REMOTE_REPOGITORY\"]} --tags`\nend\n```\n\n\u30ea\u30ea\u30fc\u30b9\u6642\u306b\u884c\u3046\u4ed6\u306e\u30bf\u30b9\u30af\u3068\u7e8f\u3081\u3066\u304a\u304f\u3068\u826f\u3044\u611f\u3058\u3002\n\n```rb\ntask :release => [:prepare, :deploy, :add_release_tag]\n```\n"}