{"context": " More than 1 year has passed since last update.VMware \u304b\u3089 KVM \u3078\u306e\u30b3\u30f3\u30d0\u30fc\u30c8(CentOS5) \u3092\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30f3\u30d0\u30fc\u30c8\u3092\u884c\u3046\u969b\u306b\u53c2\u8003\u306b\u3057\u305f\u3002\n\nVMware ESXi 5.x -- guest CentOS 5.7 --> KVM\n\n\u305d\u306e\u969b\u306b\u81ea\u5206\u304c\u3064\u307e\u3065\u3044\u305f\u30d1\u30bf\u30fc\u30f3\u3068\u305d\u306e\u5bfe\u51e6\u306e\u65b9\u6cd5\u3092\u66f8\u304f\u3002\n\n\u524d\u63d0\n\nKVM HostOS : CentOS6.5\n\u4ee5\u4e0b\u306f\u3059\u3079\u3066KVM HostOS\u4e0a\u3067\u306e\u3067\u304d\u3054\u3068\n\n\nkpartx \u304c\u306a\u3044\n\ncommand\nyum install kpartx\n\n\n\nkpartx -a /dev/loop0\u304c\u5931\u6557\u3059\u308b\n\nkpartx -a /dev/loop0 \u304c\u7a7a\u5b9f\u884c\u3057\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u3048\u308b\n\u3053\u308c\u306f\u81ea\u5206\u304c raw \u30d5\u30a1\u30a4\u30eb\u3067\u306a\u304f qcow2 \u306a\u30d5\u30a1\u30a4\u30eb\u3092\u5bfe\u8c61\u306b\u64cd\u4f5c\u3057\u3066\u3044\u305f\u304b\u3089\u3060\u3068\u7406\u89e3\u3057\u3001\n\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u6307\u5b9a\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u5bfe\u5fdc\u3057\u305f\u3002\n\nqemu-img\nNG : qemu-img convert ${VM_IMG}.vmdk -O qcow2 ${KVM_IMG_DIR}/${KVM_NAME}.img\nOK : qemu-img convert ${VM_IMG}.vmdk -O raw   ${KVM_IMG_DIR}/${KVM_NAME}.img\n\n\n\nkpartx -a /dev/loop0 \u3067\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u308b\n\nkpartx\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\n# kpartx  -a /dev/loop0\nkpartx: relocation error: kpartx: symbol dm_task_get_info_with_deferred_remove, version Base not\ndefined in file libdevmapper.so.1.02 with link time reference\n\n\n\u3068\u3044\u3046\u611f\u3058\u3002\n\ncommand\nyum update device-mapper-libs\n\n\n\u3068\u3059\u308b\u3053\u3068\u3067\u89e3\u6c7a\u3057\u305f\u3002\n[VMware \u304b\u3089 KVM \u3078\u306e\u30b3\u30f3\u30d0\u30fc\u30c8(CentOS5)](http://qiita.com/bambiz/items/6c0851d6ce0cd2462555) \u3092\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30f3\u30d0\u30fc\u30c8\u3092\u884c\u3046\u969b\u306b\u53c2\u8003\u306b\u3057\u305f\u3002\n```\nVMware ESXi 5.x -- guest CentOS 5.7 --> KVM\n```\n\u305d\u306e\u969b\u306b\u81ea\u5206\u304c\u3064\u307e\u3065\u3044\u305f\u30d1\u30bf\u30fc\u30f3\u3068\u305d\u306e\u5bfe\u51e6\u306e\u65b9\u6cd5\u3092\u66f8\u304f\u3002\n\n# \u524d\u63d0\n* KVM HostOS : CentOS6.5\n* \u4ee5\u4e0b\u306f\u3059\u3079\u3066KVM HostOS\u4e0a\u3067\u306e\u3067\u304d\u3054\u3068\n\n## kpartx \u304c\u306a\u3044\n```c:command\nyum install kpartx\n```\n\n## kpartx -a /dev/loop0\u304c\u5931\u6557\u3059\u308b\n### kpartx -a /dev/loop0 \u304c\u7a7a\u5b9f\u884c\u3057\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u3048\u308b\n\u3053\u308c\u306f\u81ea\u5206\u304c raw \u30d5\u30a1\u30a4\u30eb\u3067\u306a\u304f qcow2 \u306a\u30d5\u30a1\u30a4\u30eb\u3092\u5bfe\u8c61\u306b\u64cd\u4f5c\u3057\u3066\u3044\u305f\u304b\u3089\u3060\u3068\u7406\u89e3\u3057\u3001\n\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u6307\u5b9a\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u5bfe\u5fdc\u3057\u305f\u3002\n\n```c:qemu-img\nNG : qemu-img convert ${VM_IMG}.vmdk -O qcow2 ${KVM_IMG_DIR}/${KVM_NAME}.img\nOK : qemu-img convert ${VM_IMG}.vmdk -O raw   ${KVM_IMG_DIR}/${KVM_NAME}.img\n```\n\n### kpartx -a /dev/loop0 \u3067\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u308b\n\n```c:kpartx\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\n# kpartx  -a /dev/loop0\nkpartx: relocation error: kpartx: symbol dm_task_get_info_with_deferred_remove, version Base not\ndefined in file libdevmapper.so.1.02 with link time reference\n```\n\n\u3068\u3044\u3046\u611f\u3058\u3002\n\n```c:command\nyum update device-mapper-libs\n```\n\n\u3068\u3059\u308b\u3053\u3068\u3067\u89e3\u6c7a\u3057\u305f\u3002\n", "tags": ["KVM\uff11"]}