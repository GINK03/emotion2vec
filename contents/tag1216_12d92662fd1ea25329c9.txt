{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nGSON\u3067Java\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089JSON\u3092\u69cb\u7bc9\u3059\u308b\u306b\u306f\u5927\u96d1\u628a\u306b\u8a00\u3046\u3068\u4ee5\u4e0b\u306e\uff12\u901a\u308a\u304c\u3042\u308b\u3002\n\ngson.toJson()\u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u81ea\u52d5\u3067JSON\u306b\u5909\u63db\u3059\u308b\nJsonObject\u3084JsonWriter\u3092\u4f7f\u3063\u3066\u81ea\u5206\u3067JSON\u3092\u69cb\u7bc9\u3059\u308b\n\n\u4e00\u822c\u7684\u306b\u306f1\u306e\u65b9\u6cd5\u3092\u4f7f\u7528\u3059\u308b\u4e8b\u304c\u591a\u3044\u3051\u3069\u30012\u306e\u65b9\u6cd5\u3092\u4f7f\u308f\u306a\u304f\u3066\u306f\u306a\u3089\u306a\u3044\u30b1\u30fc\u30b9\u3082\u3042\u308b\u3002\n\u4eca\u56de\u306f2\u306eJsonObject\u3092\u4f7f\u3063\u3066Json\u3092\u69cb\u7bc9\u3059\u308b\u51e6\u7406\u3092\u3001\u76f4\u63a5JsonObject\u3092\u4f7f\u3063\u305f\u30b3\u30fc\u30c9\u3068\u3001\u30d3\u30eb\u30c0\u30fc\u3092\u4f5c\u6210\u3057\u3066\u4f7f\u3063\u305f\u30b3\u30fc\u30c9\u3092\u6bd4\u8f03\u3057\u3066\u307f\u305f\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\n\u4f7f\u7528\u3059\u308b\u30c7\u30fc\u30bf\u306fQiita\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u3092\u53c2\u8003\u306bItem\u3001User\u3001Tag\u306e\uff13\u30af\u30e9\u30b9\u3092\u7528\u610f\u3057\u305f\u3002\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306flombok\u3092\u4f7f\u3063\u3066\u751f\u6210\u3059\u308b\u3002\n\nItem.java\n@AllArgsConstructor\npublic class Item {\n    public String id;\n    public String title;\n    public User user;\n    public List<Tag> tags;\n}\n\n\n\nUser.java\n@AllArgsConstructor\npublic class User {\n    public String id;\n    public String name;\n}\n\n\n\nTag.java\n@AllArgsConstructor\npublic class Tag {\n    public String url;\n}\n\n\n\n\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\n        List<Item> items = Arrays.asList(\n                new Item(\"item1\", \"title1\",\n                        new User(\"user1\", \"user1\"), \n                        Arrays.asList(new Tag(\"tag1\"), new Tag(\"tag2\"))),\n                new Item(\"item2\", \"title2\",\n                        new User(\"user2\", \"user2\"), \n                        Arrays.asList(new Tag(\"tag2\"), new Tag(\"tag3\")))\n        );\n\n\n\n\n\u671f\u5f85\u3055\u308c\u308bJSON\u306e\u7d50\u679c\n[\n  {\n    \"id\": \"item1\",\n    \"title\": \"title1\",\n    \"user\": {\n      \"id\": \"user1\",\n      \"name\": \"user1\"\n    },\n    \"tags\": [\n      {\"url\": \"tag1\"},\n      {\"url\": \"tag2\"}\n    ]\n  },\n  {\n    \"id\": \"item2\",\n    \"title\": \"title2\",\n    \"user\": {\n      \"id\": \"user2\",\n      \"name\": \"user2\"\n    },\n    \"tags\": [\n      {\"url\": \"tag2\"},\n      {\"url\": \"tag3\"}\n    ]\n  }\n]\n\n\n\nJsonObject\u3092\u76f4\u63a5\u4f7f\u3063\u305f\u30b3\u30fc\u30c9\n\u307e\u305a\u306fJsonObject\u3068JsonArray\u3092\u76f4\u63a5\u4f7f\u3063\u305fJava7\u306e\u30b3\u30fc\u30c9\u3002\n\u8907\u96d1\u306a\u30b3\u30fc\u30c9\u3067\u306f\u306a\u3044\u3051\u3069\u3001\u3053\u3053\u304b\u3089\u3069\u3046\u3044\u3046JSON\u304c\u51fa\u529b\u3055\u308c\u308b\u306e\u304b\u3092\u8aad\u307f\u53d6\u308b\u306e\u306f\u96e3\u3057\u3044\u3002\n\nJava7\u3067JsonObject\u3068JsonArray\u3092\u76f4\u63a5\u4f7f\u3063\u305f\u30b3\u30fc\u30c9\n        JsonArray array = new JsonArray();\n        for (Item item : items) {\n            JsonObject itemJson = new JsonObject();\n            itemJson.addProperty(\"id\", item.id);\n            itemJson.addProperty(\"title\", item.title);\n\n            JsonObject userJson = new JsonObject();\n            userJson.addProperty(\"id\", item.user.id);\n            userJson.addProperty(\"name\", item.user.name);\n            itemJson.add(\"user\", userJson);\n\n            JsonArray tagArray = new JsonArray();\n            for (Tag tag : item.tags) {\n                JsonObject tagJson = new JsonObject();\n                tagJson.addProperty(\"url\", tag.url);\n                tagArray.add(tagJson);\n            }\n            itemJson.add(\"tags\", tagArray);\n\n            array.add(itemJson);\n        }\n\n\n\u6b21\u306bJava8\u306eStreamAPI\u3092\u4f7f\u3063\u305f\u30b3\u30fc\u30c9\u3002\n\u3069\u3046\u3057\u3066\u3053\u3046\u306a\u3063\u305f\u3063\u3066\u304f\u3089\u3044\u4f59\u8a08\u306b\u3072\u3069\u304f\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u3002\n\nJava8\u3067JsonObject\u3068JsonArray\u3092\u76f4\u63a5\u4f7f\u3063\u305f\u30b3\u30fc\u30c9\n        Collector<JsonElement, JsonArray, JsonArray> toJsonArray = Collector.of( \n                JsonArray::new,\n                JsonArray::add,\n                (a, b) -> { a.addAll(b); return a; }\n        );\n        JsonArray array = items.stream()\n                .map(item -> {\n                    JsonObject itemJson = new JsonObject();\n                    itemJson.addProperty(\"id\", item.id);\n                    itemJson.addProperty(\"title\", item.title);\n\n                    JsonObject userJson = new JsonObject();\n                    userJson.addProperty(\"id\", item.user.id);\n                    userJson.addProperty(\"name\", item.user.name);\n                    itemJson.add(\"user\", userJson);\n\n                    JsonArray tagArray = item.tags.stream()\n                            .map(tag -> {\n                                JsonObject tagJson = new JsonObject();\n                                tagJson.addProperty(\"url\", tag.url);\n                                return tagJson;\n                            })\n                            .collect(toJsonArray);\n                    itemJson.add(\"tags\", tagArray);\n\n                    return itemJson;\n                })\n                .collect(toJsonArray);\n        return array;\n\n\n\n\u30d3\u30eb\u30c0\u30fc\u3092\u4f5c\u3063\u3066\u6539\u5584\n\u5148\u306e\u30b3\u30fc\u30c9\u3092\u6539\u5584\u3059\u308b\u305f\u3081\u306bJSON\u3092\u69cb\u7bc9\u3059\u308b\u70ba\u306e\u30d3\u30eb\u30c0\u30fc\u3092\u4f5c\u3063\u3066\u307f\u308b\u3002\n\u53c2\u8003\u306b\u3057\u305f\u306e\u306f Java API for JSON Processing(JSR 353) \u306e\u30d3\u30eb\u30c0\u30fc\u30af\u30e9\u30b9\u3002\n\u3053\u308c\u306bStreamAPI\u7528\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u3044\u304f\u3064\u304b\u8ffd\u52a0\u3057\u305f\u3002\nJsonObjectBuilder\nJsonArrayBuilder\nJson\n\nJsonObjectBuilder.java\npublic class JsonObjectBuilder {\n    private JsonObject jsonObject = new JsonObject();\n    public JsonObject build() {\n        return jsonObject;\n    }\n    public JsonObjectBuilder add(String name, JsonElement json) {\n        jsonObject.add(name, json);\n        return this;\n    }\n    public JsonObjectBuilder add(String name, String value) {\n        jsonObject.addProperty(name, value);\n        return this;\n    }\n}\n\n\n\nJsonArrayBuilder.java\npublic class JsonArrayBuilder {\n    private JsonArray jsonArray = new JsonArray();\n    public JsonArray build() {\n        return jsonArray;\n    }    \n    public JsonArrayBuilder add(JsonElement json) {\n        jsonArray.add(json);\n        return this;\n    }\n    public JsonArrayBuilder addAll(JsonArrayBuilder builder) {\n        jsonArray.addAll(builder.build());\n        return this;\n    }\n    public JsonArrayBuilder add(String value) {\n        jsonArray.add(new JsonPrimitive(value));\n        return this;\n    }    \n}\n\n\n\nJson.java\npublic class Json {\n    private Json() {}\n    public static JsonObjectBuilder createObjectBuilder() {\n        return new JsonObjectBuilder();\n    }\n    public static JsonArrayBuilder createArrayBuilder() {\n        return new JsonArrayBuilder();\n    }\n    public static <T> JsonArray toJsonArray(Collection<T> list, Function<T, JsonElement> toJson) {\n        return list.stream()\n            .map(toJson)\n            .collect(toJsonArray());\n    }    \n    public static Collector<JsonElement, JsonArrayBuilder, JsonArray> toJsonArray() {\n        return Collector.of(\n                Json::createArrayBuilder,\n                JsonArrayBuilder::add,\n                JsonArrayBuilder::addAll,\n                JsonArrayBuilder::build);\n    }\n}\n\n\n\u306f\u3058\u3081\u306b\u66f8\u3044\u305f\u30b3\u30fc\u30c9\u3092\u30d3\u30eb\u30c0\u30fc\u3092\u4f7f\u3063\u3066\u66f8\u304d\u76f4\u3057\u3066\u307f\u308b\u3002\n\u30b3\u30fc\u30c9\u306e\u69cb\u9020\u304cJson\u306e\u69cb\u9020\u3068\u307b\u307c\u4e00\u81f4\u3059\u308b\u306e\u3067\u8aad\u307f\u6613\u304f\u306a\u3063\u305f\u3002\n\nJava8\u3067\u30d3\u30eb\u30c0\u30fc\u3092\u4f7f\u3063\u305f\u30b3\u30fc\u30c9\n        JsonArray itemArray = \n                Json.toJsonArray(items, item -> Json.createObjectBuilder()\n                        .add(\"id\", item.id)\n                        .add(\"title\", item.title)\n                        .add(\"user\", Json.createObjectBuilder()\n                                .add(\"id\", item.user.id)\n                                .add(\"name\", item.user.name)\n                                .build()\n                        )\n                        .add(\"tags\", Json.toJsonArray(item.tags, tag -> Json.createObjectBuilder()\n                                .add(\"url\", tag.url)\n                                .build()\n                        ))\n                        .build()\n                );\n\n\n\nJava7\u3067\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\nJava7\u3067\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u306b\u306f\u3001Function\u306b\u76f8\u5f53\u3059\u308b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u4f5c\u308a\u3001StreamAPI\u3092\u4f7f\u3046\u90e8\u5206\u3092for\u6587\u3067\u66f8\u304d\u76f4\u305b\u3070\u826f\u3044\u3002\n\nToJson.java\npublic interface ToJson<T> {\n    public JsonElement apply(T src);\n}\n\n\n\nJson.java\n    public static <T> JsonArray toJsonArray2(Collection<T> list, ToJson<T> toJson) {\n        JsonArrayBuilder array = Json.createArrayBuilder();\n        for (T e : list) {\n            array.add(toJson.apply(e));\n        }\n        return array.build();\n    }\n\n\n\u305f\u3060\u3057\u547c\u3073\u51fa\u3059\u90e8\u5206\u306f\u30e9\u30e0\u30c0\u5f0f\u304c\u4f7f\u3048\u306a\u3044\u306e\u3067\u30cd\u30b9\u30c8\u304c\u6df1\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3002\n\u3053\u308c\u306f\u5143\u306e\u307b\u3046\u304c\u3044\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\nJava7\n        JsonArray itemArray = \n                Json.toJsonArray2(items, new ToJson<Item>() {\n                    @Override\n                    public JsonElement apply(Item item) {\n                        return Json.createObjectBuilder()\n                                .add(\"id\", item.id)\n                                .add(\"title\", item.title)\n                                .add(\"user\", Json.createObjectBuilder()\n                                        .add(\"id\", item.user.id)\n                                        .add(\"name\", item.user.name)\n                                        .build()\n                                )\n                                .add(\"tags\", Json.toJsonArray2(item.tags, new ToJson<Tag>() {\n                                    @Override\n                                    public JsonElement apply(Tag tag) {\n                                        return Json.createObjectBuilder()\n                                                .add(\"url\", tag.url)\n                                                .build();\n                                    }\n                                }))\n                                .build();\n                    }\n                });\n\n\n\n\u6700\u5f8c\u306b\nGSON\u306b\u9650\u3089\u305a\u3001\u826f\u304f\u51fa\u6765\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3042\u3063\u3066\u3082\u90e8\u5206\u7684\u306b\u4f7f\u3044\u306b\u304f\u3044\u7b87\u6240\u3084\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306e\u4f7f\u7528\u5f62\u614b\u3068\u5408\u308f\u306a\u3044\u3068\u3044\u3046\u4e8b\u306f\u3088\u304f\u3042\u308b\u3002\n\u300c\u3053\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u4f7f\u3048\u306a\u3044\u300d\u3068\u5224\u65ad\u3059\u308b\u524d\u306b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u30af\u30e9\u30b9\u7b49\u3067\u306e\u6539\u5584\u3092\u691c\u8a0e\u3059\u308b\u4e8b\u3082\u5927\u4e8b\u3060\u3068\u601d\u3063\u305f\u3002\n\u4eca\u56de\u306fGSON\u306eJsonObject\u3092\u4f7f\u3063\u305f\u4f8b\u3092\u6319\u3052\u305f\u3051\u3069\u3001JsonWriter\u3092\u4f7f\u3063\u305f\u5834\u5408\u3084Gson\u4ee5\u5916\u306eJson\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3082\u5fdc\u7528\u3067\u304d\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3002\n\n\u53c2\u8003\ngoogle-gson\nJava API for JSON Processing(JSR 353)\u3092\u89e6\u3063\u3066\u307f\u307e\u3057\u305f\u30fc - Challenge Java EE !\n\n# \u306f\u3058\u3081\u306b\n\nGSON\u3067Java\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089JSON\u3092\u69cb\u7bc9\u3059\u308b\u306b\u306f\u5927\u96d1\u628a\u306b\u8a00\u3046\u3068\u4ee5\u4e0b\u306e\uff12\u901a\u308a\u304c\u3042\u308b\u3002\n\n1. gson.toJson()\u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u81ea\u52d5\u3067JSON\u306b\u5909\u63db\u3059\u308b\n1. JsonObject\u3084JsonWriter\u3092\u4f7f\u3063\u3066\u81ea\u5206\u3067JSON\u3092\u69cb\u7bc9\u3059\u308b\n\n\u4e00\u822c\u7684\u306b\u306f1\u306e\u65b9\u6cd5\u3092\u4f7f\u7528\u3059\u308b\u4e8b\u304c\u591a\u3044\u3051\u3069\u30012\u306e\u65b9\u6cd5\u3092\u4f7f\u308f\u306a\u304f\u3066\u306f\u306a\u3089\u306a\u3044\u30b1\u30fc\u30b9\u3082\u3042\u308b\u3002\n\n\u4eca\u56de\u306f2\u306eJsonObject\u3092\u4f7f\u3063\u3066Json\u3092\u69cb\u7bc9\u3059\u308b\u51e6\u7406\u3092\u3001\u76f4\u63a5JsonObject\u3092\u4f7f\u3063\u305f\u30b3\u30fc\u30c9\u3068\u3001\u30d3\u30eb\u30c0\u30fc\u3092\u4f5c\u6210\u3057\u3066\u4f7f\u3063\u305f\u30b3\u30fc\u30c9\u3092\u6bd4\u8f03\u3057\u3066\u307f\u305f\u3002\n\n# \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\n\n\u4f7f\u7528\u3059\u308b\u30c7\u30fc\u30bf\u306fQiita\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u3092\u53c2\u8003\u306bItem\u3001User\u3001Tag\u306e\uff13\u30af\u30e9\u30b9\u3092\u7528\u610f\u3057\u305f\u3002\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306flombok\u3092\u4f7f\u3063\u3066\u751f\u6210\u3059\u308b\u3002\n\n```java:Item.java\n@AllArgsConstructor\npublic class Item {\n    public String id;\n    public String title;\n    public User user;\n    public List<Tag> tags;\n}\n```\n```java:User.java\n@AllArgsConstructor\npublic class User {\n    public String id;\n    public String name;\n}\n```\n```java:Tag.java\n@AllArgsConstructor\npublic class Tag {\n    public String url;\n}\n```\n```java:\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\n        List<Item> items = Arrays.asList(\n                new Item(\"item1\", \"title1\",\n                        new User(\"user1\", \"user1\"), \n                        Arrays.asList(new Tag(\"tag1\"), new Tag(\"tag2\"))),\n                new Item(\"item2\", \"title2\",\n                        new User(\"user2\", \"user2\"), \n                        Arrays.asList(new Tag(\"tag2\"), new Tag(\"tag3\")))\n        );\n\n```\n```json:\u671f\u5f85\u3055\u308c\u308bJSON\u306e\u7d50\u679c\n[\n  {\n    \"id\": \"item1\",\n    \"title\": \"title1\",\n    \"user\": {\n      \"id\": \"user1\",\n      \"name\": \"user1\"\n    },\n    \"tags\": [\n      {\"url\": \"tag1\"},\n      {\"url\": \"tag2\"}\n    ]\n  },\n  {\n    \"id\": \"item2\",\n    \"title\": \"title2\",\n    \"user\": {\n      \"id\": \"user2\",\n      \"name\": \"user2\"\n    },\n    \"tags\": [\n      {\"url\": \"tag2\"},\n      {\"url\": \"tag3\"}\n    ]\n  }\n]\n```\n\n# JsonObject\u3092\u76f4\u63a5\u4f7f\u3063\u305f\u30b3\u30fc\u30c9\n\n\u307e\u305a\u306fJsonObject\u3068JsonArray\u3092\u76f4\u63a5\u4f7f\u3063\u305fJava7\u306e\u30b3\u30fc\u30c9\u3002\n\u8907\u96d1\u306a\u30b3\u30fc\u30c9\u3067\u306f\u306a\u3044\u3051\u3069\u3001\u3053\u3053\u304b\u3089\u3069\u3046\u3044\u3046JSON\u304c\u51fa\u529b\u3055\u308c\u308b\u306e\u304b\u3092\u8aad\u307f\u53d6\u308b\u306e\u306f\u96e3\u3057\u3044\u3002\n\n```java:Java7\u3067JsonObject\u3068JsonArray\u3092\u76f4\u63a5\u4f7f\u3063\u305f\u30b3\u30fc\u30c9\n        JsonArray array = new JsonArray();\n        for (Item item : items) {\n            JsonObject itemJson = new JsonObject();\n            itemJson.addProperty(\"id\", item.id);\n            itemJson.addProperty(\"title\", item.title);\n\n            JsonObject userJson = new JsonObject();\n            userJson.addProperty(\"id\", item.user.id);\n            userJson.addProperty(\"name\", item.user.name);\n            itemJson.add(\"user\", userJson);\n            \n            JsonArray tagArray = new JsonArray();\n            for (Tag tag : item.tags) {\n                JsonObject tagJson = new JsonObject();\n                tagJson.addProperty(\"url\", tag.url);\n                tagArray.add(tagJson);\n            }\n            itemJson.add(\"tags\", tagArray);\n            \n            array.add(itemJson);\n        }\n```\n\n\u6b21\u306bJava8\u306eStreamAPI\u3092\u4f7f\u3063\u305f\u30b3\u30fc\u30c9\u3002\n\u3069\u3046\u3057\u3066\u3053\u3046\u306a\u3063\u305f\u3063\u3066\u304f\u3089\u3044\u4f59\u8a08\u306b\u3072\u3069\u304f\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u3002\n\n```java:Java8\u3067JsonObject\u3068JsonArray\u3092\u76f4\u63a5\u4f7f\u3063\u305f\u30b3\u30fc\u30c9\n        Collector<JsonElement, JsonArray, JsonArray> toJsonArray = Collector.of( \n                JsonArray::new,\n                JsonArray::add,\n                (a, b) -> { a.addAll(b); return a; }\n        );\n        JsonArray array = items.stream()\n                .map(item -> {\n                    JsonObject itemJson = new JsonObject();\n                    itemJson.addProperty(\"id\", item.id);\n                    itemJson.addProperty(\"title\", item.title);\n\n                    JsonObject userJson = new JsonObject();\n                    userJson.addProperty(\"id\", item.user.id);\n                    userJson.addProperty(\"name\", item.user.name);\n                    itemJson.add(\"user\", userJson);\n                    \n                    JsonArray tagArray = item.tags.stream()\n                            .map(tag -> {\n                                JsonObject tagJson = new JsonObject();\n                                tagJson.addProperty(\"url\", tag.url);\n                                return tagJson;\n                            })\n                            .collect(toJsonArray);\n                    itemJson.add(\"tags\", tagArray);\n                    \n                    return itemJson;\n                })\n                .collect(toJsonArray);\n        return array;\n```\n\n# \u30d3\u30eb\u30c0\u30fc\u3092\u4f5c\u3063\u3066\u6539\u5584\n\n\u5148\u306e\u30b3\u30fc\u30c9\u3092\u6539\u5584\u3059\u308b\u305f\u3081\u306bJSON\u3092\u69cb\u7bc9\u3059\u308b\u70ba\u306e\u30d3\u30eb\u30c0\u30fc\u3092\u4f5c\u3063\u3066\u307f\u308b\u3002\n\u53c2\u8003\u306b\u3057\u305f\u306e\u306f Java API for JSON Processing(JSR 353) \u306e\u30d3\u30eb\u30c0\u30fc\u30af\u30e9\u30b9\u3002\n\u3053\u308c\u306bStreamAPI\u7528\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u3044\u304f\u3064\u304b\u8ffd\u52a0\u3057\u305f\u3002\n\n[JsonObjectBuilder](http://docs.oracle.com/javaee/7/api/javax/json/JsonObjectBuilder.html)\n[JsonArrayBuilder](http://docs.oracle.com/javaee/7/api/javax/json/JsonArrayBuilder.html)\n[Json](http://docs.oracle.com/javaee/7/api/javax/json/Json.html)\n\n```java:JsonObjectBuilder.java\npublic class JsonObjectBuilder {\n    private JsonObject jsonObject = new JsonObject();\n    public JsonObject build() {\n        return jsonObject;\n    }\n    public JsonObjectBuilder add(String name, JsonElement json) {\n        jsonObject.add(name, json);\n        return this;\n    }\n    public JsonObjectBuilder add(String name, String value) {\n        jsonObject.addProperty(name, value);\n        return this;\n    }\n}\n```\n```java:JsonArrayBuilder.java\npublic class JsonArrayBuilder {\n    private JsonArray jsonArray = new JsonArray();\n    public JsonArray build() {\n        return jsonArray;\n    }    \n    public JsonArrayBuilder add(JsonElement json) {\n        jsonArray.add(json);\n        return this;\n    }\n    public JsonArrayBuilder addAll(JsonArrayBuilder builder) {\n        jsonArray.addAll(builder.build());\n        return this;\n    }\n    public JsonArrayBuilder add(String value) {\n        jsonArray.add(new JsonPrimitive(value));\n        return this;\n    }    \n}\n```\n```java:Json.java\npublic class Json {\n    private Json() {}\n    public static JsonObjectBuilder createObjectBuilder() {\n        return new JsonObjectBuilder();\n    }\n    public static JsonArrayBuilder createArrayBuilder() {\n        return new JsonArrayBuilder();\n    }\n    public static <T> JsonArray toJsonArray(Collection<T> list, Function<T, JsonElement> toJson) {\n        return list.stream()\n            .map(toJson)\n            .collect(toJsonArray());\n    }    \n    public static Collector<JsonElement, JsonArrayBuilder, JsonArray> toJsonArray() {\n        return Collector.of(\n                Json::createArrayBuilder,\n                JsonArrayBuilder::add,\n                JsonArrayBuilder::addAll,\n                JsonArrayBuilder::build);\n    }\n}\n```\n\n\u306f\u3058\u3081\u306b\u66f8\u3044\u305f\u30b3\u30fc\u30c9\u3092\u30d3\u30eb\u30c0\u30fc\u3092\u4f7f\u3063\u3066\u66f8\u304d\u76f4\u3057\u3066\u307f\u308b\u3002\n\u30b3\u30fc\u30c9\u306e\u69cb\u9020\u304cJson\u306e\u69cb\u9020\u3068\u307b\u307c\u4e00\u81f4\u3059\u308b\u306e\u3067\u8aad\u307f\u6613\u304f\u306a\u3063\u305f\u3002\n\n```java:Java8\u3067\u30d3\u30eb\u30c0\u30fc\u3092\u4f7f\u3063\u305f\u30b3\u30fc\u30c9\n        JsonArray itemArray = \n                Json.toJsonArray(items, item -> Json.createObjectBuilder()\n                        .add(\"id\", item.id)\n                        .add(\"title\", item.title)\n                        .add(\"user\", Json.createObjectBuilder()\n                                .add(\"id\", item.user.id)\n                                .add(\"name\", item.user.name)\n                                .build()\n                        )\n                        .add(\"tags\", Json.toJsonArray(item.tags, tag -> Json.createObjectBuilder()\n                                .add(\"url\", tag.url)\n                                .build()\n                        ))\n                        .build()\n                );\n```\n\n# Java7\u3067\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\n\nJava7\u3067\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u306b\u306f\u3001Function\u306b\u76f8\u5f53\u3059\u308b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u4f5c\u308a\u3001StreamAPI\u3092\u4f7f\u3046\u90e8\u5206\u3092for\u6587\u3067\u66f8\u304d\u76f4\u305b\u3070\u826f\u3044\u3002\n\n```java:ToJson.java\npublic interface ToJson<T> {\n    public JsonElement apply(T src);\n}\n```\n```Json.java\n    public static <T> JsonArray toJsonArray2(Collection<T> list, ToJson<T> toJson) {\n        JsonArrayBuilder array = Json.createArrayBuilder();\n        for (T e : list) {\n            array.add(toJson.apply(e));\n        }\n        return array.build();\n    }\n```\n\n\u305f\u3060\u3057\u547c\u3073\u51fa\u3059\u90e8\u5206\u306f\u30e9\u30e0\u30c0\u5f0f\u304c\u4f7f\u3048\u306a\u3044\u306e\u3067\u30cd\u30b9\u30c8\u304c\u6df1\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3002\n\u3053\u308c\u306f\u5143\u306e\u307b\u3046\u304c\u3044\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n```java:Java7\n        JsonArray itemArray = \n                Json.toJsonArray2(items, new ToJson<Item>() {\n                    @Override\n                    public JsonElement apply(Item item) {\n                        return Json.createObjectBuilder()\n                                .add(\"id\", item.id)\n                                .add(\"title\", item.title)\n                                .add(\"user\", Json.createObjectBuilder()\n                                        .add(\"id\", item.user.id)\n                                        .add(\"name\", item.user.name)\n                                        .build()\n                                )\n                                .add(\"tags\", Json.toJsonArray2(item.tags, new ToJson<Tag>() {\n                                    @Override\n                                    public JsonElement apply(Tag tag) {\n                                        return Json.createObjectBuilder()\n                                                .add(\"url\", tag.url)\n                                                .build();\n                                    }\n                                }))\n                                .build();\n                    }\n                });\n```\n\n# \u6700\u5f8c\u306b\n\nGSON\u306b\u9650\u3089\u305a\u3001\u826f\u304f\u51fa\u6765\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3042\u3063\u3066\u3082\u90e8\u5206\u7684\u306b\u4f7f\u3044\u306b\u304f\u3044\u7b87\u6240\u3084\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306e\u4f7f\u7528\u5f62\u614b\u3068\u5408\u308f\u306a\u3044\u3068\u3044\u3046\u4e8b\u306f\u3088\u304f\u3042\u308b\u3002\n\u300c\u3053\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u4f7f\u3048\u306a\u3044\u300d\u3068\u5224\u65ad\u3059\u308b\u524d\u306b\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u30af\u30e9\u30b9\u7b49\u3067\u306e\u6539\u5584\u3092\u691c\u8a0e\u3059\u308b\u4e8b\u3082\u5927\u4e8b\u3060\u3068\u601d\u3063\u305f\u3002\n\n\u4eca\u56de\u306fGSON\u306eJsonObject\u3092\u4f7f\u3063\u305f\u4f8b\u3092\u6319\u3052\u305f\u3051\u3069\u3001JsonWriter\u3092\u4f7f\u3063\u305f\u5834\u5408\u3084Gson\u4ee5\u5916\u306eJson\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3082\u5fdc\u7528\u3067\u304d\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3002\n\n# \u53c2\u8003\n\n[google-gson](https://code.google.com/p/google-gson/)\n[Java API for JSON Processing(JSR 353)\u3092\u89e6\u3063\u3066\u307f\u307e\u3057\u305f\u30fc - Challenge Java EE !](http://kikutaro777.hatenablog.com/entry/2013/07/18/193956)\n", "tags": ["Java", "java8", "GSON", "JSON"]}