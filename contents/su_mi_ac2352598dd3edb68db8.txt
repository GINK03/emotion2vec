{"context": " More than 1 year has passed since last update.\u305f\u307e\u306bZF2\u3092\u4f7f\u3063\u305f\u308a\u3059\u308b\u3051\u3069\u3001\u3044\u3064\u3082\u4f7f\u3044\u65b9\u5fd8\u308c\u3066\u8abf\u3079\u3066\u308b\u6c17\u304c\u3059\u308b\u306e\u3067\u30e1\u30e2\u3068\u3057\u3066\u6b8b\u3057\u3066\u304a\u304f\u3001\u3061\u306a\u307f\u306bMysql\u3092\u60f3\u5b9a\n\n\u30a2\u30c0\u30d7\u30bf\u306e\u751f\u6210\n$adapter = new \\Zend\\Db\\Adapter\\Adapter(array(\n            'driver'        => 'Pdo',\n            'dsn'           => 'mysql:dbname=DB\u306e\u540d\u524d;host=\u30db\u30b9\u30c8\u540d',\n            'username'      => '\u30e6\u30fc\u30b6\u540d',\n            'password'      => '\u30d1\u30b9\u30ef\u30fc\u30c9',\n            'driver_option' => array(\n                \\PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \\'UTF8\\''\n            ),\n        ));\n\n\nTableGateway\u306e\u751f\u6210\n //\u7279\u306b\u6307\u5b9a\u3057\u306a\u3044\u3068\u7d50\u679c\u306farrayobject\u306b\u306a\u308b\n $tableGateway = new \\Zend\\Db\\TableGateway\\TableGateway('\u30c6\u30fc\u30d6\u30eb\u540d', $adapter);\n\n //\u914d\u5217\u306b\u3057\u305f\u3044\u5834\u5408\u306f\u3053\u3093\u306a\u611f\u3058\n $resultSet    = new \\Zend\\Db\\ResultSet\\ResultSet(ResultSet::TYPE_ARRAY);\n $tableGateway = new \\Zend\\Db\\TableGateway\\TableGateway('\u30c6\u30fc\u30d6\u30eb\u540d', $adapter, null, $resultSet);\n\n\nSELECT\nselect\u5b9f\u884c\n$tableGateway = new \\Zend\\Db\\TableGateway\\TableGateway('user', $adapter);\n$select = $tableGateway->getSql()->select();\n$res = $tableGateway->selectWith($select);\n\n\u6761\u4ef6\u6307\u5b9a\n\n$select->where->equalTo('col', '\u5024');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" = '\u5024'\n\n$select->where->notEqualTo('col', '\u5024')\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" != '\u5024'\n\n$select->where->greaterThan('col', '\u5024');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" > '\u5024'\n\n$select->where->greaterThanOrEqualTo('col', '\u5024');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" >= '\u5024'\n\n$select->where->lessThan('col', '\u5024');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" < '\u5024'\n\n$select->where->lessThanOrEqualTo('col', '\u5024');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" <= '\u5024'\n\n$select->where->in('col', array('\u50241', '\u50242'));\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" IN ('\u50241', '\u50242')\n\n$select->where->isNull('col');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" IS NULL\n\n$select->where->isNotNull('col')\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" IS NOT NULL\n\n$select->where->between('col', 'min', 'max');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" BETWEEN 'min' AND 'max'\n\n$select->where->equalTo('col', '\u5024')\n              ->or\n              ->equalTo('col2', '\u50242');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" = '\u5024' OR \"col2\" = '\u50242'\n\n$select->where->equalTo('col', '\u50241')\n              ->NEST\n              ->equalTo('col2', '\u50242')\n              ->or\n              ->equalTo('col3', '\u50243')\n              ->UNNEST;\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" = '\u50241' AND (\"col2\" = '\u50242' OR \"col3\" = '\u50243')\n\n$select->where->like('col', '%\u50241%');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" LIKE '%\u50241%'\n\n$select->where->notLike('col', '%\u50241%');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" NOT LIKE '%\u50241%'\n\n\n\u30ab\u30e9\u30e0\u306e\u6307\u5b9a\n $select->columns(array('col1','col2'));\n //SELECT \"user\".\"col1\" AS \"col1\", \"user\".\"col2\" AS \"col2\" FROM \"user\"\n\n $select->quantifier(\\Zend\\Db\\Sql\\Select::QUANTIFIER_DISTINCT)\n        ->columns(array('col1','col2'));\n //SELECT DISTINCT \"user\".\"col1\" AS \"col1\", \"user\".\"col2\" AS \"col2\" FROM \"user\"\n\n $select->columns(array('colcol' => 'col1'));\n //SELECT \"user\".\"col1\" AS \"colcol\" FROM \"user\"\n\n $select->columns(array('count' => new \\Zend\\Db\\Sql\\Predicate\\Expression('COUNT(*)')));\n //SELECT COUNT(*) AS \"count\" FROM \"user\"\n\n\nFROM\u53e5\u306b\u30b5\u30d6\u30af\u30a8\u30ea\n\n $select = $tableGateway->getSql()->select();\n $select2 = new \\Zend\\Db\\Sql\\Select();\n $select2->from(array('select' => $select));\n //SELECT \"select\".* FROM (SELECT \"user\".* FROM \"user\") AS \"select\"\n\nunion\n$select = $tableGateway->getSql()->select();\n$select2 = new \\Zend\\Db\\Sql\\Select();\n$select2->from('user');\n$select2->combine($select);\n//( SELECT \"user\".* FROM \"user\" ) UNION ( SELECT \"user\".* FROM \"user\" )\n\n\njoin\n$select->join('table', 'user.id = table.id', array('col'));\n//SELECT \"user\".*, \"table\".\"col\" AS \"col\" FROM \"user\" INNER JOIN \"table\" ON \"user\".\"id\" = \"table\".\"id\"\n\n$select->join('table', 'user.id = table.id', array('col'), $select::JOIN_LEFT);\n//SELECT \"user\".*, \"table\".\"col\" AS \"col\" FROM \"user\" LEFT JOIN \"table\" ON \"user\".\"id\" = \"table\".\"id\"\n\n\n\n\u305f\u307e\u306bZF2\u3092\u4f7f\u3063\u305f\u308a\u3059\u308b\u3051\u3069\u3001\u3044\u3064\u3082\u4f7f\u3044\u65b9\u5fd8\u308c\u3066\u8abf\u3079\u3066\u308b\u6c17\u304c\u3059\u308b\u306e\u3067\u30e1\u30e2\u3068\u3057\u3066\u6b8b\u3057\u3066\u304a\u304f\u3001\u3061\u306a\u307f\u306bMysql\u3092\u60f3\u5b9a\n\n#\u30a2\u30c0\u30d7\u30bf\u306e\u751f\u6210\n```php\n$adapter = new \\Zend\\Db\\Adapter\\Adapter(array(\n            'driver'        => 'Pdo',\n            'dsn'           => 'mysql:dbname=DB\u306e\u540d\u524d;host=\u30db\u30b9\u30c8\u540d',\n            'username'      => '\u30e6\u30fc\u30b6\u540d',\n            'password'      => '\u30d1\u30b9\u30ef\u30fc\u30c9',\n            'driver_option' => array(\n                \\PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \\'UTF8\\''\n            ),\n        ));\n```\n\n#TableGateway\u306e\u751f\u6210\n```php\n //\u7279\u306b\u6307\u5b9a\u3057\u306a\u3044\u3068\u7d50\u679c\u306farrayobject\u306b\u306a\u308b\n $tableGateway = new \\Zend\\Db\\TableGateway\\TableGateway('\u30c6\u30fc\u30d6\u30eb\u540d', $adapter);\n \n //\u914d\u5217\u306b\u3057\u305f\u3044\u5834\u5408\u306f\u3053\u3093\u306a\u611f\u3058\n $resultSet    = new \\Zend\\Db\\ResultSet\\ResultSet(ResultSet::TYPE_ARRAY);\n $tableGateway = new \\Zend\\Db\\TableGateway\\TableGateway('\u30c6\u30fc\u30d6\u30eb\u540d', $adapter, null, $resultSet);\n```\n\n#SELECT\n\nselect\u5b9f\u884c\n\n```php\n$tableGateway = new \\Zend\\Db\\TableGateway\\TableGateway('user', $adapter);\n$select = $tableGateway->getSql()->select();\n$res = $tableGateway->selectWith($select);\n```\n\n\u6761\u4ef6\u6307\u5b9a\n\n```php\n\n$select->where->equalTo('col', '\u5024');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" = '\u5024'\n\n$select->where->notEqualTo('col', '\u5024')\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" != '\u5024'\n\n$select->where->greaterThan('col', '\u5024');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" > '\u5024'\n\n$select->where->greaterThanOrEqualTo('col', '\u5024');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" >= '\u5024'\n\n$select->where->lessThan('col', '\u5024');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" < '\u5024'\n\n$select->where->lessThanOrEqualTo('col', '\u5024');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" <= '\u5024'\n\n$select->where->in('col', array('\u50241', '\u50242'));\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" IN ('\u50241', '\u50242')\n\n$select->where->isNull('col');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" IS NULL\n\n$select->where->isNotNull('col')\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" IS NOT NULL\n\n$select->where->between('col', 'min', 'max');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" BETWEEN 'min' AND 'max'\n\n$select->where->equalTo('col', '\u5024')\n              ->or\n              ->equalTo('col2', '\u50242');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" = '\u5024' OR \"col2\" = '\u50242'\n\n$select->where->equalTo('col', '\u50241')\n              ->NEST\n              ->equalTo('col2', '\u50242')\n              ->or\n              ->equalTo('col3', '\u50243')\n              ->UNNEST;\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" = '\u50241' AND (\"col2\" = '\u50242' OR \"col3\" = '\u50243')\n\n$select->where->like('col', '%\u50241%');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" LIKE '%\u50241%'\n\n$select->where->notLike('col', '%\u50241%');\n//SELECT \"user\".* FROM \"user\" WHERE \"col\" NOT LIKE '%\u50241%'\n\n```\n\n\u30ab\u30e9\u30e0\u306e\u6307\u5b9a\n\n```php\n $select->columns(array('col1','col2'));\n //SELECT \"user\".\"col1\" AS \"col1\", \"user\".\"col2\" AS \"col2\" FROM \"user\"\n \n $select->quantifier(\\Zend\\Db\\Sql\\Select::QUANTIFIER_DISTINCT)\n        ->columns(array('col1','col2'));\n //SELECT DISTINCT \"user\".\"col1\" AS \"col1\", \"user\".\"col2\" AS \"col2\" FROM \"user\"\n \n $select->columns(array('colcol' => 'col1'));\n //SELECT \"user\".\"col1\" AS \"colcol\" FROM \"user\"\n \n $select->columns(array('count' => new \\Zend\\Db\\Sql\\Predicate\\Expression('COUNT(*)')));\n //SELECT COUNT(*) AS \"count\" FROM \"user\"\n\n```\n\nFROM\u53e5\u306b\u30b5\u30d6\u30af\u30a8\u30ea\n\n```php\n\n $select = $tableGateway->getSql()->select();\n $select2 = new \\Zend\\Db\\Sql\\Select();\n $select2->from(array('select' => $select));\n //SELECT \"select\".* FROM (SELECT \"user\".* FROM \"user\") AS \"select\"\n```\n\nunion\n\n```php\n$select = $tableGateway->getSql()->select();\n$select2 = new \\Zend\\Db\\Sql\\Select();\n$select2->from('user');\n$select2->combine($select);\n//( SELECT \"user\".* FROM \"user\" ) UNION ( SELECT \"user\".* FROM \"user\" )\n\n```\n\njoin\n\n```php\n$select->join('table', 'user.id = table.id', array('col'));\n//SELECT \"user\".*, \"table\".\"col\" AS \"col\" FROM \"user\" INNER JOIN \"table\" ON \"user\".\"id\" = \"table\".\"id\"\n\n$select->join('table', 'user.id = table.id', array('col'), $select::JOIN_LEFT);\n//SELECT \"user\".*, \"table\".\"col\" AS \"col\" FROM \"user\" LEFT JOIN \"table\" ON \"user\".\"id\" = \"table\".\"id\"\n\n```\n", "tags": ["PHP", "zf2"]}