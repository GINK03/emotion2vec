{"context": "\u74b0\u5883\u69cb\u7bc9\nJPA \u306e\u57fa\u672c\u7684\u306a\u8a71\nJPQL \u306e\u8a71\nCriteria API \u306e\u8a71\n\u30b3\u30fc\u30c9\n\u30de\u30c3\u30d4\u30f3\u30b0\u65b9\u6cd5\u3060\u3051\u3092\u78ba\u8a8d\u3057\u3084\u3059\u3044\u3088\u3046\u306b\u3057\u305f\u4e00\u89a7\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\nJPA \u30de\u30c3\u30d4\u30f3\u30b0\u30ab\u30bf\u30ed\u30b0 - Qiita\n\n\u306f\u3058\u3081\u306b\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u3067\u8003\u3048\u3089\u308c\u305f\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u3068\u3001\u6b63\u898f\u5316\u306a\u3069\u3092\u8003\u616e\u3057\u3066\u8003\u3048\u3089\u308c\u305f\u30ea\u30ec\u30fc\u30b7\u30e7\u30ca\u30eb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30c6\u30fc\u30d6\u30eb\u3067\u306f\u3001\u30c7\u30fc\u30bf\u306e\u6301\u305f\u305b\u65b9\u306b\u9055\u3044\u304c\u751f\u307e\u308c\u308b\u3002\n\u3053\u306e\u9055\u3044\u3092\u30a4\u30f3\u30d4\u30fc\u30c0\u30f3\u30b9\u30df\u30b9\u30de\u30c3\u30c1\u3068\u8a00\u3046\u3002\n\u30a4\u30f3\u30d4\u30fc\u30c0\u30f3\u30b9\u30df\u30b9\u30de\u30c3\u30c1\u3092\u89e3\u6c7a\u3059\u308b\u306b\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304b\u3089\u53d6\u5f97\u3057\u305f\u30ec\u30b3\u30fc\u30c9\u3092\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u51e6\u7406\u304c\u5fc5\u8981\u306b\u306a\u308b\uff08\u3055\u3089\u306b\u3001\u6c38\u7d9a\u5316\u3059\u308b\u3068\u304d\u306f\u9006\u5909\u63db\u304c\u5fc5\u8981\uff09\u3002\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u30c6\u30fc\u30d6\u30eb\u306e\u69cb\u9020\u304c\uff11\u5bfe\uff11\u3067\u5bfe\u5fdc\u3057\u3066\u3044\u308c\u3070\u3001\u3053\u306e\u5909\u63db\u306f\u305d\u3053\u307e\u3067\u5927\u5909\u3067\u306f\u306a\u3044\u3002\n\u3057\u304b\u3057\u3001\u305d\u3046\u3067\u306a\u3044\u5834\u5408\u3001\u5909\u63db\u3092\u81ea\u529b\u3067\u5b9f\u88c5\u3059\u308b\u306e\u306f\u975e\u5e38\u306b\u9aa8\u304c\u6298\u308c\u308b\u3002\nO/R \u30de\u30c3\u30d1\u30fc\u306f\u3053\u306e\u5909\u63db\u3092\u81ea\u52d5\u3067\u3084\u3063\u3066\u304f\u308c\u308b\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3001 JPA \u3067\u306f\u3001\u69d8\u3005\u306a\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u306e\u5b9f\u88c5\u306b\u5177\u4f53\u7684\u306a\u6280\u8853\u8981\u7d20\u3067\u3042\u308b JPA \u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u308b\u3053\u3068\u306b\u82e5\u5e72\u306e\u62d2\u7d76\u53cd\u5fdc\u304c\u8d77\u3053\u308a\u305d\u3046\u306b\u306a\u308b\u304c\u3001\u305d\u3053\u306f\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u81ea\u52d5\u5316\u3067\u304d\u308b\u3053\u3068\u3068\u306e\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\u3068\u3057\u3066\u76ee\u3092\u3064\u3080\u308b\u3079\u304d\u304b\u306a\u3068\u500b\u4eba\u7684\u306b\u601d\u3063\u3066\u3044\u308b\u3002\n\n\u57fa\u672c\u7de8\n\n\u57fa\u672c\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nReimu.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\n@Entity\npublic class Reimu {\n    @Id\n    private Long id;\n\n    @Override\n    public String toString() {\n        return \"Reimu{\" + \"id=\" + id + '}';\n    }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\nCREATE TABLE `reimu` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306f\u540c\u3058\u540d\u524d\u306e\u30c6\u30fc\u30d6\u30eb\u3068\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u308b\u3002\n\n\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u540d\u524d\u306f\u3001\u7279\u306b\u6307\u5b9a\u3057\u306a\u3051\u308c\u3070\u30af\u30e9\u30b9\u540d\u3068\u540c\u3058\u306b\u306a\u308b\u3002\n\n\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306b\u306f\u3001\u5fc5\u305a\uff11\u3064\u306f @Id \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u5fc5\u8981\u3002\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306f\u3001 public \u307e\u305f\u306f protected \u3067\u3001\u5f15\u6570\u306e\u7121\u3044\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u5fc5\u8981\u3002\n\u30d5\u30a3\u30fc\u30eb\u30c9\u306f\u3001\u53ef\u8996\u6027\u304c private \u3067\u3082\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u304d\u308b\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30d5\u30a3\u30fc\u30eb\u30c9\u306f\u540c\u3058\u540d\u524d\u306e\u30ab\u30e9\u30e0\u3068\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u308b\u3002\n\n\n\u30c6\u30fc\u30d6\u30eb\u540d\u30fb\u30ab\u30e9\u30e0\u540d\u3092\u6307\u5b9a\u3059\u308b\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nKirisameMarisa.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"kirisame_marisa\")\npublic class KirisameMarisa {\n    @Id\n    @Column(name = \"id_column\")\n    private Long id;\n\n    @Override\n    public String toString() {\n        return \"KirisameMarisa{\" + \"id=\" + id + '}';\n    }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\nCREATE TABLE `kirisame_marisa` (\n  `id_column` int(11) NOT NULL AUTO_INCREMENT,\n  PRIMARY KEY (`id_column`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d\u3068\u30c6\u30fc\u30d6\u30eb\u540d\u304c\u7570\u306a\u308b\u5834\u5408\u306f\u3001 @Table \u3067\u30af\u30e9\u30b9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3001 name \u5c5e\u6027\u3067\u30c6\u30fc\u30d6\u30eb\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u3068\u30ab\u30e9\u30e0\u540d\u304c\u7570\u306a\u308b\u5834\u5408\u306f\u3001 @Column \u3067\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3001 name \u5c5e\u6027\u3067\u30ab\u30e9\u30e0\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\nID \u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u8a2d\u5b9a\u3059\u308b\n\u4f8b\u3048\u3070\u3001 MySQL \u306e\u5834\u5408\u306f AUTO_INCREMENT \u306e\u4ed5\u7d44\u307f\u3092\u4f7f\u3063\u3066 ID \u304c\u63a1\u756a\u3055\u308c\u308b\u3002\n\u307e\u305f\u3001 Oracle \u306e\u5834\u5408\u306f\u30b7\u30fc\u30b1\u30f3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f7f\u3063\u3066 ID \u3092\u63a1\u756a\u3059\u308b\u3002\nID \u304c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4ee5\u5916\u306e\u4ed5\u7d44\u307f\u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3068\u3001 persist() \u3059\u308b\u3068\u304d\u306b\u305d\u306e\u4ed5\u7d44\u3092\u5229\u7528\u3057\u3066 ID \u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u3002\n\u307e\u305f\u3001 ID \u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u3001 persist() \u3057\u305f\u5f8c\u306b\u81ea\u52d5\u751f\u6210\u3055\u308c\u305f ID \u3092\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\uff08\u8a2d\u5b9a\u3057\u3066\u3044\u306a\u3044\u3068\u3001\u53d6\u5f97\u3067\u304d\u306a\u3044\uff09\u3002\n\nMySQL \u306e AUTO_INCREMENT\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nSinGyoku.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class SinGyoku {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    private String value;\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n    @Override\n    public String toString() {\n        return \"SinGyoku{\" + \"id=\" + id + \", value=\" + value + '}';\n    }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\nCREATE TABLE `singyoku` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `value` varchar(45) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n    SinGyoku sinGyoku = new SinGyoku();\n    sinGyoku.setValue(\"test\");\n\n    this.em.persist(sinGyoku);\n\n    System.out.println(sinGyoku);\n\n    this.em.flush();\n\n    System.out.println(sinGyoku);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   SinGyoku{id=null, value=test}\n\u60c5\u5831:   SinGyoku{id=1, value=test}\n\n\n\n\n@GeneratedValue \u3067\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u3002\n\nstrategy \u5c5e\u6027\u306b\u3001\u305d\u306e\u9805\u76ee\u304c\u3069\u306e\u3088\u3046\u306b\u3057\u3066\u751f\u6210\u3055\u308c\u308b\u304b\u3092\u6307\u5b9a\u3059\u308b\u3002\nMySQL \u306e AUTO_INCREMENT \u3067\u306f\u3001 GenerationType.IDENTITY \u3092\u6307\u5b9a\u3059\u308b\u3002\nMySQL \u306e AUTO_INCREMENT \u306f INSERT \u6587\u3092\u767a\u884c\u3059\u308b\u3068\u304d\u306b ID \u3092\u63a1\u756a\u3059\u308b\u3002\u3088\u3063\u3066 EntityManager#flush() \u3067\u660e\u793a\u7684\u306b\u30b3\u30df\u30c3\u30c8\u3092\u5b9f\u884c\u3057\u306a\u3044\u3068\u3001\u81ea\u52d5\u751f\u6210\u3055\u308c\u305f ID \u3092\u53d6\u5f97\u3067\u304d\u306a\u3044\u3002\n\n\nOracle \u306e\u30b7\u30fc\u30b1\u30f3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\u203bOracle \u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306e JDBC Connection Pool \u3068 JDBC Resource \u3092\u4e88\u3081 GlassFish \u306b\u767b\u9332\u3057\u3066\u304a\u304f\u3053\u3068\uff08\u30b5\u30f3\u30d7\u30eb\u5b9f\u88c5\u3067\u306f\u3001 OracleUnit \u3068\u3044\u3046\u540d\u524d\u3067\u6c38\u7d9a\u30e6\u30cb\u30c3\u30c8\u3092\u5b9a\u7fa9\u3057\u305f\uff09\u3002\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.SequenceGenerator;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"yuugen_magan\")\npublic class YuugenMagan {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"yuugen_magan_seq_gen\")\n    @SequenceGenerator(name = \"yuugen_magan_seq_gen\", sequenceName = \"yuugen_magan_seq\", allocationSize = 1)\n    private Long id;\n    private String value;\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n    @Override\n    public String toString() {\n        return \"YuugenMagan{\" + \"id=\" + id + \", value=\" + value + '}';\n    }\n}\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\nCREATE TABLE yuugen_magan (\n    ID NUMBER(10),\n    VALUE VARCHAR2(128),\n    PRIMARY KEY(ID)\n);\n\nCREATE SEQUENCE yuugen_magan_seq;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n    YuugenMagan yuugenMagan = new YuugenMagan();\n    yuugenMagan.setValue(\"test\");\n\n    this.em.persist(yuugenMagan);\n    System.out.println(yuugenMagan);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   YuugenMagan{id=1, value=test}\n\n\n\n\u30b7\u30fc\u30b1\u30f3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f\u3001 @GeneratedValue \u306e strategy \u306b GenerationType.SEQUENCE \u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\ngenerator \u5c5e\u6027\u306b\u306f\u3001 ID \u3092\u751f\u6210\u3059\u308b\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u306e\u540d\u524d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u306e\u5b9a\u7fa9\u306f\u3001 @SequenceGenerator \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u884c\u3046\u3002\n\nname \u5c5e\u6027\u306b\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u306e\u540d\u524d\u3092\u6307\u5b9a\u3057\u3001 sequenceName \u5c5e\u6027\u3067\u30b7\u30fc\u30b1\u30f3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u540d\u524d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\u30b7\u30fc\u30b1\u30f3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5834\u5408\u306f\u3001\u30b3\u30df\u30c3\u30c8\u524d\u3067\u3082 EntityManager \u304c\u6b21\u306e\u30b7\u30fc\u30b1\u30f3\u30b9\u5024\u3092\u53d6\u5f97\u3067\u304d\u308b\u306e\u3067\u3001 flush() \u3059\u308b\u524d\u3067\u3082\u81ea\u52d5\u751f\u6210\u3055\u308c\u305f ID \u3092\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\nallocationSize \u306f\u30b7\u30fc\u30b1\u30f3\u30b9\u5024\u306e\u5897\u5206\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u306f 50\uff09\u3002\n\n\n\u30b7\u30fc\u30b1\u30f3\u30b9\u751f\u6210\u7528\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u7528\u3059\u308b\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nElis.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.TableGenerator;\n\n@Entity\npublic class Elis {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.TABLE, generator = \"elis_seq_generator\")\n    @TableGenerator(name = \"elis_seq_generator\",\n                    table = \"seq_generator\",\n                    pkColumnName = \"table_name\",\n                    valueColumnName = \"sequence_number\",\n                    pkColumnValue = \"elis\",\n                    allocationSize = 1)\n    private Long id;\n    private String value;\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n    @Override\n    public String toString() {\n        return \"Elis{\" + \"id=\" + id + \", value=\" + value + '}';\n    }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n\nCREATE TABLE `elis` (\n  `id` int(11) NOT NULL,\n  `value` varchar(45) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `seq_generator` (\n  `table_name` varchar(128) NOT NULL,\n  `sequence_number` int(11) NOT NULL,\n  PRIMARY KEY (`table_name`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n    Elis elis = new Elis();\n    elis.setValue(\"test\");\n\n    this.em.persist(elis);\n    System.out.println(elis);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   Elis{id=1, value=test}\n\n\n\n\u30b7\u30fc\u30b1\u30f3\u30b9\u3092\u63a1\u756a\u3059\u308b\u305f\u3081\u306e\u5c02\u7528\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001 strategy \u306b GenerationType.TABLE \u3092\u6307\u5b9a\u3059\u308b\u3002\n\ngenerator \u306b\u306f\u3001 @TableGenerator \u3067\u5b9a\u7fa9\u3057\u305f\u540d\u524d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n@TableGenerator \u3067\u306f\u3001\u30b7\u30fc\u30b1\u30f3\u30b9\u63a1\u756a\u7528\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u60c5\u5831\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n\n\n\n\n\u5c5e\u6027\n\u8aac\u660e\n\n\n\n\nname\n\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u306e\u540d\u524d\n\n\ntable\n\u30b7\u30fc\u30b1\u30f3\u30b9\u3092\u63a1\u756a\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u306e\u540d\u524d\n\n\npkColumnName\n\u30b7\u30fc\u30b1\u30f3\u30b9\u63a1\u756a\u30c6\u30fc\u30d6\u30eb\u306e\u884c\u3092\u7279\u5b9a\u3059\u308b\u305f\u3081\u306e\u30ab\u30e9\u30e0\u306e\u540d\u524d\n\n\nvalueColumnName\n\u30b7\u30fc\u30b1\u30f3\u30b9\u5024\u3092\u4fdd\u5b58\u3057\u3066\u304a\u304f\u30ab\u30e9\u30e0\u306e\u540d\u524d\n\n\npkColumnValue\n\u3053\u306e\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u304c\u63a1\u756a\u306b\u7528\u3044\u308b\u884c\u3092\u7279\u5b9a\u3059\u308b\u305f\u3081\u306e\u5024\u3002pkColumnName \u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u5024\u3002\n\n\nallocationSize\n\u30b7\u30fc\u30b1\u30f3\u30b9\u306e\u5897\u5206\u5024\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u306f 50\uff09\n\n\n\n\n\u8907\u5408\u4e3b\u30ad\u30fc\u3068\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\n@EmbeddedId \u3092\u4f7f\u7528\u3057\u305f\u30d1\u30bf\u30fc\u30f3\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nSariel.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.EmbeddedId;\nimport javax.persistence.Entity;\n\n@Entity\npublic class Sariel {\n\n    @EmbeddedId\n    private SarielKey key;\n    private String value;\n\n    public void setKey(SarielKey key) {\n        this.key = key;\n    }\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n    @Override\n    public String toString() {\n        return \"Sariel{\" + \"key=\" + key + \", value=\" + value + '}';\n    }\n}\n\n\n\nSarielKey.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.io.Serializable;\nimport java.util.Objects;\nimport javax.persistence.Embeddable;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\n\n@Embeddable\npublic class SarielKey implements Serializable {\n\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long key1;\n    private String key2;\n\n    public void setKey2(String key2) {\n        this.key2 = key2;\n    }\n\n    @Override\n    public String toString() {\n        return \"SarielKey{\" + \"key1=\" + key1 + \", key2=\" + key2 + '}';\n    }\n\n    @Override\n    public int hashCode() {\n        // \u7701\u7565\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        // \u7701\u7565\n    }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\nCREATE TABLE `sariel` (\n  `key1` int(11) NOT NULL AUTO_INCREMENT,\n  `key2` varchar(32) NOT NULL,\n  `value` varchar(45) DEFAULT NULL,\n  PRIMARY KEY (`key1`,`key2`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n    SarielKey key = new SarielKey();\n    key.setKey2(\"test\");\n\n    Sariel sariel = new Sariel();\n    sariel.setKey(key);\n    sariel.setValue(\"TEST\");\n\n    this.em.persist(sariel);\n\n    this.em.flush();\n\n    System.out.println(sariel);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   Sariel{key=SarielKey{key1=1, key2=test}, value=TEST}\n\n\n\n\u8907\u5408\u4e3b\u30ad\u30fc\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u5834\u5408\u306e\uff11\u3064\u306e\u65b9\u6cd5\u3068\u3057\u3066\u3001 @EmbeddedId \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u305f\u65b9\u6cd5\u304c\u3042\u308b\u3002\n\u8907\u5408\u4e3b\u30ad\u30fc\u306b\u6307\u5b9a\u3057\u305f\u30ab\u30e9\u30e0\u3092\u6301\u3064\u4e3b\u30ad\u30fc\u7528\u306e\u30af\u30e9\u30b9\uff08SarielKey\uff09\u3092\u4f5c\u6210\u3057\u3001\u305d\u306e\u30af\u30e9\u30b9\u3092 @Embeddable \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\u30e1\u30a4\u30f3\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u5074\uff08Sariel\uff09\u306b\u306f\u3001\u4e3b\u30ad\u30fc\u7528\u306e\u30af\u30e9\u30b9\u3092\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u6301\u305f\u305b\u3001 @EmbeddedId \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\u4e3b\u30ad\u30fc\u306e\u4e00\u610f\u6027\u3092\u4fdd\u8a3c\u3059\u308b\u305f\u3081\u3001 equals() \u3068 hashCode() \u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3059\u308b\uff08\u30b3\u30fc\u30c9\u306f NetBeans \u306e\u6a5f\u80fd\u3067\u81ea\u52d5\u751f\u6210\u3057\u305f\u3082\u306e\uff09\u3002\n\n\nequals() \u3068 hashCode() \u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3059\u308b\u7406\u7531\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e equals() \u30e1\u30bd\u30c3\u30c9\u306f\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u540c\u3058\u304b\u3069\u3046\u304b\u3092\u6bd4\u8f03\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\u3064\u307e\u308a\u3001\u30ad\u30fc\u9805\u76ee\u306b\u540c\u3058\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u3066\u3082\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u7570\u306a\u308c\u3070 equals() \u30e1\u30bd\u30c3\u30c9\u306f false \u3092\u8fd4\u3057\u3066\u3057\u307e\u3046\u3002\n\u305d\u3046\u306a\u308b\u3068\u3001\u540c\u3058\u30ad\u30fc\u9805\u76ee\u3092\u3082\u3064\u7570\u306a\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u751f\u6210\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u751f\u307e\u308c\u3001\u4e3b\u30ad\u30fc\u306e\u4e00\u610f\u6027\u304c\u4fdd\u8a3c\u3055\u308c\u306a\u304f\u306a\u308b\u3002\n\u3053\u306e\u305f\u3081\u3001\u30ad\u30fc\u9805\u76ee\u3092\u6301\u3064\u30af\u30e9\u30b9\u306f equals() \u30e1\u30bd\u30c3\u30c9\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\u305d\u3057\u3066\u3001 equals() \u30e1\u30bd\u30c3\u30c9\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3059\u308b\u306e\u3067\u3001\u5408\u308f\u305b\u3066 hashCode() \u3082\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\uff08\u8a73\u3057\u304f\u306f Effective Java \u3092\u53c2\u7167\uff09\u3002\n\n@IdClass \u3092\u4f7f\u7528\u3057\u305f\u30d1\u30bf\u30fc\u30f3\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nMima.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.IdClass;\n\n@Entity\n@IdClass(MimaKey.class)\npublic class Mima {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long key1;\n    @Id\n    private String key2;\n    private String value;\n\n    public void setKey2(String key2) {\n        this.key2 = key2;\n    }\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n    @Override\n    public String toString() {\n        return \"Mima{\" + \"key1=\" + key1 + \", key2=\" + key2 + \", value=\" + value + '}';\n    }\n}\n\n\n\nMimaKey.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.io.Serializable;\nimport java.util.Objects;\n\npublic class MimaKey implements Serializable {\n\n    private Long key1;\n    private String key2;\n\n    @Override\n    public int hashCode() {\n        // \u7701\u7565\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        // \u7701\u7565\n    }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\nCREATE TABLE `mima` (\n  `key1` int(11) NOT NULL AUTO_INCREMENT,\n  `key2` varchar(45) NOT NULL,\n  `value` varchar(45) DEFAULT NULL,\n  PRIMARY KEY (`key1`,`key2`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n    Mima mima = new Mima();\n\n    mima.setKey2(\"key2\");\n    mima.setValue(\"test\");\n\n    this.em.persist(mima);\n\n    this.em.flush();\n\n    System.out.println(mima);\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   Mima{key1=2, key2=key2, value=test}\n\n\n\n\n@IdClass \u3092\u4f7f\u3046\u3053\u3068\u3067\u8907\u5408\u4e3b\u30ad\u30fc\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\u3053\u306e\u5834\u5408\u3001\u4e3b\u30ad\u30fc\u306e\u9805\u76ee\u306f\u30e1\u30a4\u30f3\u3068\u306a\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u5074\uff08Hoge\uff09\u306b\u5b9a\u7fa9\u3057\u3001 @Id \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\n@IdClass \u306b\u6307\u5b9a\u3057\u305f\u30af\u30e9\u30b9\u306b\u306f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4e00\u5207\u4ed8\u4e0e\u305b\u305a\u306b\u8907\u5408\u4e3b\u30ad\u30fc\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\n\n\u3064\u307e\u308a\u3001\u8907\u5408\u4e3b\u30ad\u30fc\u304c\u65e2\u5b58\u306e\u30af\u30e9\u30b9\u3067\u3001\u81ea\u7531\u306b\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u5909\u3048\u3089\u308c\u306a\u3044\u3068\u304d\u3068\u304b\u306b\u4f7f\u3048\u308b\u3068\u3044\u3046\u3053\u3068\u304b\uff1f\n\u3067\u3082\u3001 equals() \u3068 hashCode() \u304c\u6b63\u3057\u304f\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3055\u308c\u3066\u3044\u306a\u3044\u3068\u3001\u4e3b\u30ad\u30fc\u306e\u4e00\u610f\u6027\u304c\u62c5\u4fdd\u3055\u308c\u306a\u304f\u306a\u308b\u306e\u3067\u6ce8\u610f\u304c\u5fc5\u8981\u305d\u3046\u3002\n\n\n\n\n\u65e5\u4ed8\u9805\u76ee\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nKikuri.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.Date;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Temporal;\nimport javax.persistence.TemporalType;\n\n@Entity\npublic class Kikuri {\n\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Temporal(TemporalType.DATE)\n    private Date date;\n    @Temporal(TemporalType.TIME)\n    private Date time;\n    @Temporal(TemporalType.TIMESTAMP)\n    private Date datetime;\n\n    public void setDate(Date date) {\n        this.date = this.time = this.datetime = date;\n    }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\nCREATE TABLE `kikuri` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `date` date DEFAULT NULL,\n  `time` time DEFAULT NULL,\n  `datetime` datetime DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n    Kikuri kikuri = new Kikuri();\n    kikuri.setDate(new Date());\n\n    this.em.persist(kikuri);\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u5b9f\u884c\u5f8c\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u72b6\u614b\u3002\n\n\n\u65e5\u4ed8\u9805\u76ee\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u5834\u5408\u306f\u3001 @Temporal \u3067\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\n@Temporal \u306e\u5024\u306b\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4e0a\u306e\u8a73\u7d30\u306a\u578b\uff08DATE, TIME, TIMESTAMP\uff09\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\nDATE \u306f\u65e5\u4ed8\u3060\u3051\u3002\n\nTIME \u306f\u6642\u523b\u3060\u3051\u3002\n\nTIMESTAMP \u306f\u65e5\u4ed8\u3068\u6642\u523b\u306e\u4e21\u65b9\u3002\n\n\n\n\nJava8 \u3067\u8ffd\u52a0\u3055\u308c\u305f LocalTime \u3068\u304b\u306f\u4f7f\u3048\u308b\uff1f\n\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u3092\u81ea\u4f5c\u3059\u308c\u3070\u4f7f\u3048\u308b\u3063\u307d\u3044\uff1f\nUsing the Java 8 DateTime Classes with JPA! | Java.net\n\n\u7279\u5b9a\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u6c38\u7d9a\u5316\u306e\u5bfe\u8c61\u5916\u306b\u3059\u308b\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nKonngara.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Transient;\n\n@Entity\npublic class Konngara {\n\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    private String value;\n    @Transient\n    private String ignore;\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n    public void setIgnore(String ignore) {\n        this.ignore = ignore;\n    }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\nCREATE TABLE `konngara` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `value` varchar(45) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\n\n@Transient \u3067\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3068\u3001\u305d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306f\u6c38\u7d9a\u5316\u306e\u5bfe\u8c61\u5916\u306b\u306a\u308a\u3001\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u306f\u7121\u8996\u3055\u308c\u308b\u3002\n\n\n\u5217\u6319\u578b\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u52d5\u304d\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nGenji.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class Genji {\n\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    @Column(name = \"enum_value\")\n    private GenjiEnum enumValue;\n\n    public void setEnumValue(GenjiEnum enumValue) {\n        this.enumValue = enumValue;\n    }\n}\n\n\n\nGenjiEnum.java\npackage sample.javaee.jpa.entity.mapping;\n\npublic enum GenjiEnum {\n    HOGE, FUGA, PIYO;\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\nCREATE TABLE `genji` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `enum_value` int(11) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n    Genji genji = new Genji();\n    genji.setEnumValue(GenjiEnum.HOGE);\n\n    this.em.persist(genji);\n\n    genji = new Genji();\n    genji.setEnumValue(GenjiEnum.FUGA);\n\n    this.em.persist(genji);\n\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u5b9f\u884c\u5f8c\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u72b6\u614b\u3002\n\n\nenum \u306e\u9805\u76ee\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u5bfe\u5fdc\u3059\u308b\u5e8f\u6570\u304c\u4fdd\u5b58\u3055\u308c\u308b\u3002\n\u3057\u304b\u3057\u3001\u3053\u308c\u3060\u3068\u5217\u6319\u5b50\u306e\u9806\u756a\u3092\u5165\u308c\u66ff\u3048\u305f\u9014\u7aef\u306b\u30c7\u30fc\u30bf\u304c\u6b63\u3057\u304f\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u306a\u304f\u306a\u308b\u3002\n\n\n\u6587\u5b57\u5217\u3067\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nRika.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.EnumType;\nimport javax.persistence.Enumerated;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class Rika {\n\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    @Column(name = \"enum_value\")\n    @Enumerated(EnumType.STRING)\n    private RikaEnum enumValue;\n\n    public void setEnumValue(RikaEnum enumValue) {\n        this.enumValue = enumValue;\n    }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\nCREATE TABLE `rika` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `enum_value` varchar(45) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n    Rika rika = new Rika();\n    rika.setEnumValue(RikaEnum.HOGE);\n\n    this.em.persist(rika);\n\n    rika = new Rika();\n    rika.setEnumValue(RikaEnum.FUGA);\n\n    this.em.persist(rika);\n\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u5f8c\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u69d8\u5b50.\n\n\n\n@Enumerated \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3066\u3001 EnumType.STRING \u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u5e8f\u6570\u3067\u306f\u306a\u304f\u6587\u5b57\u5217\u3067 enum \u306e\u60c5\u5831\u3092\u8a18\u9332\u3067\u304d\u308b\u3002\n\u3053\u308c\u306a\u3089\u3001\u5217\u6319\u5b50\u306e\u9806\u756a\u3092\u66f8\u304d\u5909\u3048\u3066\u3082\u30c7\u30fc\u30bf\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u4e0d\u6574\u5408\u304c\u8d77\u3053\u308b\u3053\u3068\u306f\u306a\u3044\u3002\n\n\n\u57fa\u672c\u578b\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u30de\u30c3\u30d4\u30f3\u30b0\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nMeira.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.CollectionTable;\nimport javax.persistence.Column;\nimport javax.persistence.ElementCollection;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.OrderBy;\n\n@Entity\npublic class Meira {\n\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ElementCollection(fetch = FetchType.EAGER)\n    @CollectionTable(name = \"meira_list_value\")\n    @Column(name = \"value\")\n    @OrderBy(\"DESC\")\n    private List<String> list;\n\n    @Override\n    public String toString() {\n        return \"Meira{\" + \"id=\" + id + \", list=\" + list + '}';\n    }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n\n\nCREATE TABLE `meira` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `meira_list_value` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `meira_id` int(11) NOT NULL,\n  `value` varchar(45) DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  KEY `meira_fk_idx` (`meira_id`),\n  CONSTRAINT `meira_fk` FOREIGN KEY (`meira_id`) REFERENCES `meira` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n    Meira meira = this.em.find(Meira.class, 1L);\n    System.out.println(meira);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   Meira{id=1, list=[zzz, yyy, xxx]}\n\n\n\n\n@ElementCollection \u3067\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u578b\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3068\u3001\u305d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u57fa\u672c\u578b\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3067\u3042\u308b\u3053\u3068\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\n\n\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u578b\u306e\u5bfe\u8c61\u306f\u3001 Collection, Set, List\u3002\n\u57fa\u672c\u578b\u3068\u306f\u3001\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3067\u306f\u306a\u3044\u578b\u306e\u3053\u3068\u3002\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u578b\u3001 String \u578b\u3001\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\uff08\u8a73\u7d30\u5f8c\u8ff0\uff09\u306a\u3069\u306e\u3053\u3068\u3092\u6307\u3059\u3002\n\nfetch \u5c5e\u6027\u306b FetchType.EAGER \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u5373\u6642\u30ed\u30fc\u30c9\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\uff08\u8a73\u7d30\u5f8c\u8ff0\uff09\u3002\n\n\n\n@CollectionTable \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u3001\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u5404\u8981\u7d20\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\u7701\u7565\u3057\u305f\u5834\u5408\u306f\u3001\u300c\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d_\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\uff08meira_list\uff09\u300d\u3067\u89e3\u6c7a\u3055\u308c\u308b\u3002\n\n\n\n@Column \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u3001\u3069\u306e\u30ab\u30e9\u30e0\u306e\u5024\u3092\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u8981\u7d20\u3068\u3057\u3066\u53d6\u5f97\u3059\u308b\u306e\u304b\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\u7701\u7565\u3057\u305f\u5834\u5408\u306f\u3001\u300c\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\uff08list\uff09\u300d\u3067\u89e3\u6c7a\u3055\u308c\u308b\u3002\n\n\n\u30bd\u30fc\u30c8\u6761\u4ef6\u3092\u6307\u5b9a\u3057\u305f\u3044\u5834\u5408\u306f\u3001 @OrderBy \u3067\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\n\n\u7d50\u5408\u306b\u7528\u3044\u308b\u30ab\u30e9\u30e0\u540d\u306e\u89e3\u6c7a\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5834\u5408\u3001\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d_\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u30ad\u30fc\u30d7\u30ed\u30d1\u30c6\u30a3\u540d \u3067\u89e3\u6c7a\u3055\u308c\u308b\u3002\n\u3064\u307e\u308a\u3001\u524d\u8ff0\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u5834\u5408\u306f Meira_id \u3067\u89e3\u6c7a\u3055\u308c\u308b\u3002\nmeira_list_value \u30c6\u30fc\u30d6\u30eb\u3068 meria \u30c6\u30fc\u30d6\u30eb\u3068\u7d50\u5408\u3059\u308b\u3068\u304d\u306e\u30ab\u30e9\u30e0\u540d\u306f\u3001\u3061\u3087\u3046\u3069\u3053\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3068\u540c\u3058\u306b\u306a\u3063\u3066\u3044\u308b\uff08meria_id\uff09\u3002\n\u305d\u306e\u305f\u3081\u3001\u7279\u306b\u6307\u5b9a\u306a\u3057\u3067\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3002\n\u3082\u3057\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3068\u5b9f\u969b\u306e\u30ab\u30e9\u30e0\u540d\u304c\u7570\u306a\u308b\u5834\u5408\uff08\u4eee\u306b meria_table_id \u3068\u3057\u305f\u5834\u5408\uff09\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3002\n    @ElementCollection(fetch = FetchType.EAGER)\n-   @CollectionTable(name = \"meira_list_value\")\n+   @CollectionTable(\n+       name = \"meira_list_value\",\n+       joinColumns = @JoinColumn(name = \"meria_table_id\")    \n+   )\n    @Column(name = \"value\")\n    @OrderBy(\"DESC\")\n    private List<String> list;\n\n\n\n@CollectionTable \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e joinColumns \u5c5e\u6027\u3067\u8a2d\u5b9a\u3059\u308b\u3002\n\n\n\u5373\u6642\u30ed\u30fc\u30c9\u3068\u9045\u5ef6\u30ed\u30fc\u30c9\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304c\u4ed6\u306e\u30af\u30e9\u30b9\u3092\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\uff08List \u3084 Set\uff09\u3067\u6301\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u9045\u5ef6\u30ed\u30fc\u30c9\u304c\u9069\u7528\u3055\u308c\u308b\u3002\n\u9045\u5ef6\u30ed\u30fc\u30c9\u306e\u5834\u5408\u3001\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304c EntityManager#find(Class, Object) \u306a\u3069\u3067 DB \u304b\u3089\u30ed\u30fc\u30c9\u3055\u308c\u305f\u6642\u70b9\u3067\u306f\u3001\u307e\u3060\u305d\u306e\u9805\u76ee\u306f DB \u304b\u3089\u53d6\u5f97\u3055\u308c\u3066\u3044\u306a\u3044\u3002\n\u5024\u304c\u53d6\u5f97\u3055\u308c\u308b\u306e\u306f\u3001\u305d\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u304b\u3089\u5b9f\u969b\u306b\u5024\u3092\u53d6\u5f97\u3057\u3088\u3046\u3068\u3057\u305f\u3068\u304d\u306b\u306a\u308b\u3002\n\u524d\u8ff0\u306e Meira \u30af\u30e9\u30b9\u306b\u3001 lazyList \u3068\u3044\u3046\u9045\u5ef6\u30ed\u30fc\u30c9\u3059\u308b\u30ea\u30b9\u30c8\u3092\u8ffd\u52a0\u3057\u3066\u3001\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3002\n\nMeira.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.CollectionTable;\nimport javax.persistence.Column;\nimport javax.persistence.ElementCollection;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.OrderBy;\n\n@Entity\npublic class Meira {\n\n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ElementCollection(fetch = FetchType.EAGER)\n    @CollectionTable(name = \"meira_list_value\")\n    @Column(name = \"value\")\n    @OrderBy(\"DESC\")\n    private List<String> list;\n\n+   @ElementCollection\n+   @CollectionTable(name = \"meira_list_value\")\n+   @Column(name = \"value\")\n+   public List<String> lazyList;\n\n    @Override\n    public String toString() {\n-       return \"Meira{\" + \"id=\" + id + \", list=\" + list}';\n+       return \"Meira{\" + \"id=\" + id + \", list=\" + list + \", lazyList=\" + lazyList + '}';\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n    Meira meira = this.em.find(Meira.class, 1L);\n    System.out.println(meira);\n\n+   for (String value : meira.lazyList) {\n+       System.out.println(value);\n+   }\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   Meira{id=1, list=[zzz, yyy, xxx], lazyList={IndirectList: not instantiated}}\n\u60c5\u5831:   xxx\n\u60c5\u5831:   yyy\n\u60c5\u5831:   zzz\n\n\n\n\u9045\u5ef6\u30ed\u30fc\u30c9\u306e\u5834\u5408\u3001 list \u3092\u305f\u3060 toString() \u3057\u305f\u3060\u3051\u3067\u306f\u3001\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u304c\u5206\u304b\u308b\u3002\n\u3057\u304b\u3057\u3001\u62e1\u5f35 for \u6587\u306a\u3069\u3092\u4f7f\u3063\u3066 List \u304b\u3089\u5024\u3092\u53d6\u5f97\u3059\u308b\u3068\u3001\u5b9f\u969b\u306e\u5024\u304c\u53d6\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\n\u305d\u308c\u305e\u308c\u306e\u30e1\u30ea\u30c3\u30c8\u3068\u30c7\u30e1\u30ea\u30c3\u30c8\n\n\n\n-\n\u30e1\u30ea\u30c3\u30c8\n\u30c7\u30e1\u30ea\u30c3\u30c8\n\n\n\n\n\u5373\u6642\u30ed\u30fc\u30c9\n\u691c\u7d22\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u5834\u5408\u306f\u3001\u4e88\u3081\u30ed\u30fc\u30c9\u3057\u3066\u304a\u304f\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u7d50\u5c40\u4f7f\u7528\u3057\u306a\u304f\u3066\u3082\u8aad\u307f\u8fbc\u3093\u3067\u3057\u307e\u3046\u3002\n\n\n\u9045\u5ef6\u30ed\u30fc\u30c9\nDB \u3068\u306e\u30a2\u30af\u30bb\u30b9\u3092\u5fc5\u8981\u306a\u3068\u304d\u3060\u3051\u306b\u9650\u5b9a\u3067\u304d\u308b\u3002\n\u4e88\u3081\u30ed\u30fc\u30c9\u3057\u3066\u304a\u3051\u306a\u3044\u3002\n\n\n\n\u57fa\u672c\u306f\u9045\u5ef6\u30ed\u30fc\u30c9\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\uff09\u3067\u3001\u5b9f\u969b\u306b\u52d5\u304b\u3057\u3066\u307f\u305f\u3089\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306b\u5f71\u97ff\u304c\u3042\u3063\u305f\u5834\u5408\u306f\u5373\u6642\u30ed\u30fc\u30c9\u306b\u3059\u308b\u3001\u304f\u3089\u3044\u306e\u65b9\u91dd\u3067\u3088\u3044\u304b\u3068\u3002\n\u3088\u304f\u8a00\u308f\u308c\u3066\u3044\u308b\u304c\u3001\u52d5\u304b\u3057\u3066\u3082\u306a\u3044\u306e\u306b\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u6c17\u306b\u3057\u3066\u7121\u99c4\u306b\u8a2d\u5b9a\u3084\u30e2\u30c7\u30eb\u3092\u3044\u3058\u304f\u308a\u307e\u308f\u3057\u3066\u3057\u307e\u3046\u3001\u3068\u3044\u3046\u306e\u306f\u907f\u3051\u305f\u65b9\u304c\u3044\u3044\u3002\n\u307e\u305f\u3001 JPA 2.1 (Java EE 7) \u3067\u306f\u3001 Entity Graph \u3068\u3044\u3046\u4ed5\u7d44\u307f\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3002\u3053\u308c\u3092\u5229\u7528\u3059\u308b\u3068\u3001\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u9593\u306e\u95a2\u9023\u3092\u3069\u3053\u307e\u3067\u6398\u308a\u4e0b\u3052\u3066\u4e00\u5ea6\u306b\u8aad\u307f\u8fbc\u3080\u304b\u306a\u3069\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\uff08\u8a73\u7d30\u5f8c\u8ff0\uff09\u3002\n\n\u30bd\u30fc\u30c8\u7528\u306e\u30ab\u30e9\u30e0\u3092\u4f7f\u7528\u3059\u308b\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nShinki.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.Column;\nimport javax.persistence.ElementCollection;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.Id;\nimport javax.persistence.OrderColumn;\n\n@Entity\npublic class Shinki {\n    @Id\n    private Long id;\n\n    @ElementCollection(fetch = FetchType.EAGER)\n    @Column(name = \"value\")\n    @OrderColumn(name = \"order\")\n    private List<String> list;\n\n    @Override\n    public String toString() {\n        return \"Shinki{\" + \"id=\" + id + \", list=\" + list + '}';\n    }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n\n\nCREATE TABLE `shinki` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `shinki_list` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `shinki_id` int(11) NOT NULL,\n  `order` int(11) NOT NULL,\n  `value` varchar(45) DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  KEY `shinki_list_fk_idx` (`shinki_id`),\n  CONSTRAINT `shinki_list_fk` FOREIGN KEY (`shinki_id`) REFERENCES `shinki` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n Shinki shinki = this.em.find(Shinki.class, 1L);\n System.out.println(shinki);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: Shinki{id=1, list={[piyo, fuga, hoge]}}\n\n\n\n\n@OrderColumn \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u30bd\u30fc\u30c8\u306e\u30ad\u30fc\u3068\u306a\u308b\u30ab\u30e9\u30e0\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\nMap \u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nEren.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.Map;\nimport javax.persistence.CollectionTable;\nimport javax.persistence.Column;\nimport javax.persistence.ElementCollection;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.MapKeyColumn;\n\n@Entity\npublic class Eren {\n\n @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n private Long id;\n\n @ElementCollection(fetch = FetchType.EAGER)\n @CollectionTable(name = \"eren_map_value\")\n @MapKeyColumn(name = \"key\")\n @Column(name = \"value\")\n private Map<String, String> map;\n\n @Override\n public String toString() {\n return \"Eren{\" + \"id=\" + id + \", map=\" + map + '}';\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n\n\nCREATE TABLE `eren` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `eren_map_value` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `eren_id` int(11) NOT NULL,\n `key` varchar(45) NOT NULL,\n `value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`),\n KEY `eren_map_velu_fk_idx` (`eren_id`),\n CONSTRAINT `eren_map_velu_fk` FOREIGN KEY (`eren_id`) REFERENCES `eren` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n Eren eren = this.em.find(Eren.class, 1L);\n\n System.out.println(eren);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\n\u60c5\u5831: Eren{id=1, map={fuga=FUGA, piyo=PIYO, hoge=HOGE}}\n\n\n\n\n@MapKeyColumn \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001 Map \u306e\u30ad\u30fc\u30d0\u30ea\u30e5\u30fc\u3068 DB \u306e\u5024\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n@MapKeyColumn \u306e name \u306b\u306f\u3001 Map \u306e\u30ad\u30fc\u3068\u306a\u308b\u5024\u3092\u6301\u3064\u30ab\u30e9\u30e0\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\u305d\u308c\u4ee5\u5916\u306f\u3001\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u3068\u304d\u3068\u540c\u3058\u8981\u9818\u3067\u8a2d\u5b9a\u3059\u308b\u3002\n\nString \u4ee5\u5916\u306b\u3082\u3001\u4ed6\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306a\u3069\u3092\u30ad\u30fc\u3084\u30d0\u30ea\u30e5\u30fc\u306b\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\n\n\u975e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30af\u30e9\u30b9\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nKotohime.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Embedded;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class Kotohime {\n\n @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n private Long id;\n private String value;\n @Embedded\n private EmbeddedKotohime embeddedKotohime;\n\n @Override\n public String toString() {\n return \"Kotohime{\" + \"id=\" + id + \", value=\" + value + \", embeddedKotohime=\" + embeddedKotohime + '}';\n }\n}\n\n\n\nEmbeddedKotohime.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Column;\nimport javax.persistence.Embeddable;\n\n@Embeddable\npublic class EmbeddedKotohime {\n\n @Column(name = \"embedded_value\")\n private String embeddedValue;\n\n @Override\n public String toString() {\n return \"EmbeddedKotohime{\" + \"embeddedValue=\" + embeddedValue + '}';\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n\nCREATE TABLE `kotohime` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `value` varchar(45) DEFAULT NULL,\n `embedded_value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n Kotohime kotohime = this.em.find(Kotohime.class, 1L);\n\n System.out.println(kotohime);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\n\u60c5\u5831: Kotohime{id=1, value=hoge, embeddedKotohime=EmbeddedKotohime{embeddedValue=HOGE}}\n\n\n\n\n@Embeddable \u3067\u30af\u30e9\u30b9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u975e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30af\u30e9\u30b9\u3092\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n@Embeddable \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30af\u30e9\u30b9\u3092\u3001 \u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9 \u3068\u547c\u3076\u3002\n\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\u306f ID \u3092\u6301\u305f\u306a\u3044 = \u8b58\u5225\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\u3001\u3059\u306a\u308f\u3061 DDD \u306e ValueObject \u306b\u8a72\u5f53\u3059\u308b\u3002\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u5074\u3067\u306f\u3001 @Embedded \u3092\u4f7f\u3063\u3066\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\u3067\u3042\u308b\u3053\u3068\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\u306e List \u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nKanaAnaberaru.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.CollectionTable;\nimport javax.persistence.ElementCollection;\nimport javax.persistence.Embedded;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"kana_anaberaru\")\npublic class KanaAnaberaru {\n @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n private Long id;\n\n @Embedded\n @ElementCollection(fetch = FetchType.EAGER)\n @CollectionTable(\n name = \"kana_anaberaru_list_value\",\n joinColumns = @JoinColumn(name = \"kana_anaberaru_id\")\n )\n private List<EmbeddedKanaAnaberaru> embeddedKanaAnaberaruList;\n\n @Override\n public String toString() {\n return \"KanaAnaberaru{\" + \"id=\" + id + \", embeddedKanaAnaberaruList=\" + embeddedKanaAnaberaruList + '}';\n }\n}\n\n\n\nEmbeddedKanaAnaberaru.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Column;\nimport javax.persistence.Embeddable;\n\n@Embeddable\npublic class EmbeddedKanaAnaberaru {\n @Column(name = \"embedded_value\")\n private String embeddedValue;\n\n @Override\n public String toString() {\n return \"EmbeddedKanaAnaberaru{\" + \"embeddedValue=\" + embeddedValue + '}';\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30fc\u30d9\u30fc\u30b9\n\n\n\nCREATE TABLE `kana_anaberaru` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `kana_anaberaru_list_value` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `kana_anaberaru_id` int(11) NOT NULL,\n `embedded_value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`),\n KEY `kana_anaberaru_list_value_fk_idx` (`kana_anaberaru_id`),\n CONSTRAINT `kana_anaberaru_list_value_fk` FOREIGN KEY (`kana_anaberaru_id`) REFERENCES `kana_anaberaru` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n KanaAnaberaru kotohime = this.em.find(KanaAnaberaru.class, 1L);\n\n System.out.println(kotohime);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: KanaAnaberaru{id=1, embeddedKanaAnaberaruList=[EmbeddedKanaAnaberaru{embeddedValue=hoge}, EmbeddedKanaAnaberaru{embeddedValue=fuga}, EmbeddedKanaAnaberaru{embeddedValue=piyo}]}\n\n\n\n\n@Embedded \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u8ffd\u52a0\u3059\u308c\u3070\u3001\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\u3092 List \u3067\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\n\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\u3092 Map \u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nAsakuraRikako.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.Map;\nimport javax.persistence.CollectionTable;\nimport javax.persistence.ElementCollection;\nimport javax.persistence.Embedded;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"asakura_rikako\")\npublic class AsakuraRikako {\n\n @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n private Long id;\n\n @Embedded\n @ElementCollection(fetch = FetchType.EAGER)\n @CollectionTable(\n name = \"asakura_rikako_map_values\",\n joinColumns = @JoinColumn(name = \"asakura_rikako_id\")\n )\n private Map<AsakuraRikakoKey, AsakuraRikakoValue> map;\n\n @Override\n public String toString() {\n return \"AsakuraRikako{\" + \"id=\" + id + \", map=\" + map + '}';\n }\n}\n\n\n\nAsakuraRikakoKey.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.Objects;\nimport javax.persistence.Column;\nimport javax.persistence.Embeddable;\n\n@Embeddable\npublic class AsakuraRikakoKey {\n @Column(name = \"embedded_key\")\n private String key;\n\n @Override\n public String toString() {\n return \"AsakuraRikakoKey{\" + \"key=\" + key + '}';\n }\n\n @Override\n public int hashCode() {\n // NetBeans \u3067\u81ea\u52d5\u751f\u6210\n }\n\n @Override\n public boolean equals(Object obj) {\n // NetBeans \u3067\u81ea\u52d5\u751f\u6210\n }\n}\n\n\n\nAsakuraRikakoValue.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Column;\nimport javax.persistence.Embeddable;\n\n@Embeddable\npublic class AsakuraRikakoValue {\n @Column(name = \"embedded_value\")\n private String value;\n\n @Override\n public String toString() {\n return \"AsakuraRikakoValue{\" + \"value=\" + value + '}';\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n\n\nCREATE TABLE `asakura_rikako` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `asakura_rikako_map_values` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `asakura_rikako_id` int(11) NOT NULL,\n `embedded_key` varchar(45) NOT NULL,\n `embedded_value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`),\n KEY `asakura_rikako_map_values_fk_idx` (`asakura_rikako_id`),\n CONSTRAINT `asakura_rikako_map_values_fk` FOREIGN KEY (`asakura_rikako_id`) REFERENCES `asakura_rikako` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n AsakuraRikako asakuraRikako = this.em.find(AsakuraRikako.class, 1L);\n\n System.out.println(asakuraRikako);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: AsakuraRikako{id=1, map={AsakuraRikakoKey{key=fuga}=AsakuraRikakoValue{value=FUGA}, AsakuraRikakoKey{key=piyo}=AsakuraRikakoValue{value=PIYO}, AsakuraRikakoKey{key=hoge}=AsakuraRikakoValue{value=HOGE}}}\n\n\n\n\n@Embedded \u3092\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u3001\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\u3092 Map \u306e\u30ad\u30fc\u3084\u30d0\u30ea\u30e5\u30fc\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\nLob \u30ab\u30e9\u30e0\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nPatchouliKnowledge.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Lob;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"patchouli_knowledge\")\npublic class PatchouliKnowledge {\n @Id\n private Long id;\n @Lob\n @Column(name = \"blob_value\")\n private byte[] blobValue;\n @Lob\n @Column(name = \"clob_value\")\n private String clobValue;\n\n public void setBlobValue(byte[] blobValue) {\n this.blobValue = blobValue;\n }\n\n public void setClobValue(String clobValue) {\n this.clobValue = clobValue;\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\nCREATE TABLE `patchouli_knowledge` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `blob_value` blob,\n `clob_value` longtext,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n PatchouliKnowledge patchouliKnowledge = new PatchouliKnowledge();\n patchouliKnowledge.setBlobValue(\"blob text\".getBytes(Charset.forName(\"UTF-8\")));\n patchouliKnowledge.setClobValue(\"clob text\");\n\n this.em.persist(patchouliKnowledge);\n\n\n\u5b9f\u884c\u5f8c\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u69d8\u5b50\u3002\n\n\n\n@Lob \u3067\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3068\u3001 LOB \u578b\u306e\u30c7\u30fc\u30bf\u3068\u3057\u3066\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u304d\u308b\u3002\nBLOB \u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u308b\u304b\u3001 CLOB \u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u308b\u304b\u306f\u3001\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u578b\u306b\u3088\u3063\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u6c7a\u5b9a\u3055\u308c\u308b\u3002\n\n\n\nbyte[]\u3001 Byte[]\u3001 Serializable \u306e\u5834\u5408\u306f BLOB\u3002\n\nchar[]\u3001 Character[]\u3001 String \u306e\u5834\u5408\u306f CLOB\u3002\n\n\n\n\n\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u30de\u30c3\u30d4\u30f3\u30b0\n\u8907\u6570\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304c\u95a2\u9023\u3092\u6301\u3064\u5834\u5408\u306e\u3001 DB \u3068\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u65b9\u6cd5\u306b\u3064\u3044\u3066\u3002\n\n\uff11\u5bfe\uff11\n\n\u5358\u65b9\u5411\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nKitashirakawaChiyuri.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"kitashirakawa_chiyuri\")\npublic class KitashirakawaChiyuri {\n @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n private Long id;\n @JoinColumn(name = \"okazaki_yumemi_id\")\n private OkazakiYumemi okazakiYumemi;\n\n @Override\n public String toString() {\n return \"KitashirakawaChiyuri{\" + \"id=\" + id + \", okazakiYumemi=\" + okazakiYumemi + '}';\n }\n}\n\n\n\nOkazakiYumemi.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"okazaki_yumemi\")\npublic class OkazakiYumemi {\n @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n private Long id;\n\n @Override\n public String toString() {\n return \"OkazakiYumemi{\" + \"id=\" + id + '}';\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n\n\nCREATE TABLE `kitashirakawa_chiyuri` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `okazaki_yumemi_id` int(11) NOT NULL,\n PRIMARY KEY (`id`),\n KEY `kitashirakawa_chiyuri_fk_idx` (`okazaki_yumemi_id`),\n CONSTRAINT `kitashirakawa_chiyuri_fk` FOREIGN KEY (`okazaki_yumemi_id`) REFERENCES `okazaki_yumemi` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `okazaki_yumemi` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n KitashirakawaChiyuri kitashirakawaChiyuri = this.em.find(KitashirakawaChiyuri.class, 1L);\n\n System.out.println(kitashirakawaChiyuri);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: KitashirakawaChiyuri{id=1, okazakiYumemi=OkazakiYumemi{id=1}}\n\n\n\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u9593\u306e\u591a\u91cd\u5ea6\u304c\uff11\u5bfe\uff11\u3067\u3001\u95a2\u9023\u306e\u5411\u304d\u304c\u5358\u65b9\u5411\u306e\u5834\u5408\u306f\u3001\u7279\u306b\u4f55\u3082\u6307\u5b9a\u3059\u308b\u3053\u3068\u306a\u304f\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u305f\u3060\u3057\u3001\u7d50\u5408\u306b\u7528\u3044\u3089\u308c\u308b\u30ab\u30e9\u30e0\u540d\u304c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f \u30d5\u30a3\u30fc\u30eb\u30c9\u540d_\u76f8\u624b\u306e\u30ad\u30fc\u30ab\u30e9\u30e0\u540d \u3067\u89e3\u6c7a\u3055\u308c\u308b\uff08okazakiYumemi_id\uff09\u306e\u3067\u3001 @JoinColumn \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u7d50\u5408\u306b\u7528\u3044\u308b\u30ab\u30e9\u30e0\u540d\u3092\u660e\u793a\u3057\u3066\u3044\u308b\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d5\u30a7\u30c3\u30c1\u65b9\u6cd5\u306f EAGER \u306b\u306a\u308b\u3002\u3053\u308c\u3092\u5909\u66f4\u3057\u305f\u3044\u5834\u5408\u306f\u3001 @OneToOne(fetch = FetchType.LAZY) \u306e\u6307\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n\n\u53cc\u65b9\u5411\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nOrange.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\n@Entity\npublic class Orange {\n @Id\n private Long id;\n\n private Kurumi kurumi;\n\n public Long getId() {\n return id;\n }\n\n @Override\n public String toString() {\n return \"Orange{\" + \"id=\" + id + \", kurumi.id=\" + kurumi.getId() + '}';\n }\n}\n\n\n\nKurumi.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.OneToOne;\n\n@Entity\npublic class Kurumi {\n @Id\n private Long id;\n\n @OneToOne(mappedBy = \"kurumi\")\n private Orange orange;\n\n public Long getId() {\n return id;\n }\n\n @Override\n public String toString() {\n return \"Kurumi{\" + \"id=\" + id + \", orange.id=\" + orange.getId() + '}';\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n\n\nCREATE TABLE `kurumi` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `orange` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `kurumi_id` int(11) NOT NULL,\n PRIMARY KEY (`id`),\n KEY `orange_fk_idx` (`kurumi_id`),\n CONSTRAINT `orange_fk` FOREIGN KEY (`kurumi_id`) REFERENCES `kurumi` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n Orange orange = this.em.find(Orange.class, 1L);\n System.out.println(orange);\n\n Kurumi kurumi = this.em.find(Kurumi.class, 2L);\n System.out.println(kurumi);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: Orange{id=1, kurumi.id=1}\n\u60c5\u5831: Kurumi{id=2, orange.id=2}\n\n\n\nDB \u306e\u30c6\u30fc\u30d6\u30eb\u4e0a\u3067\u3001\u95a2\u9023\u3059\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306e\u30ab\u30e9\u30e0\u3092\u6301\u3063\u3066\u3044\u308b\u65b9\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092 \u6240\u6709\u8005 \u3068\u547c\u3076\u3002\n\n\n\u3082\u3057\u304f\u306f\u3001\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 A \u304c\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 B \u306e\u53c2\u7167\u3092\u6301\u3063\u3066\u3044\u308b\u5834\u5408\u3001 A \u3092\u6240\u6709\u8005\u3068\u547c\u3076\u3002\n\n\n\u9006\u5074\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u3001 \u88ab\u6240\u6709\u8005 \u3068\u547c\u3076\u3002\n\n\n\u4e0a\u8a18\u4f8b\u3067\u3044\u3046\u3068\u3001 Orange \u304c\u6240\u6709\u8005\u3067\u3001 Kurumi \u304c\u88ab\u6240\u6709\u8005\u3068\u306a\u308b\u3002\n\n\n\u3057\u304b\u3057\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304c\u76f8\u4e92\u53c2\u7167\u3057\u3066\u3044\u308b\u3068\u3001\u305d\u308c\u3060\u3051\u3067\u306f\u3069\u3061\u3089\u304c\u6240\u6709\u8005\u3067\u3069\u3061\u3089\u304c\u88ab\u6240\u6709\u8005\u306a\u306e\u304b\u5224\u65ad\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3002\n\u305d\u3053\u3067\u3001 Kurumi \u304c\u88ab\u6240\u6709\u8005\u3067\u3042\u308b\u3053\u3068\u3092\u660e\u793a\u3059\u308b\u305f\u3081\u306b\u3001 @OneToOne \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e mappedBy \u5c5e\u6027\u3092\u4f7f\u7528\u3059\u308b\u3002\n\n\n\nmappedBy \u306b\u306f\u3001\u6240\u6709\u8005\u304c\u6301\u3063\u3066\u3044\u308b\u88ab\u6240\u6709\u8005\u3092\u6307\u3059\u30d7\u30ed\u30d1\u30c6\u30a3\u540d\u3092\u6307\u5b9a\u3059\u308b\uff08\u4e0a\u8a18\u4f8b\u306e\u5834\u5408\u306f\u3001 kurumi\uff09\u3002\n\n\n\n\u305d\u3082\u305d\u3082\u76f8\u4e92\u53c2\u7167\u3059\u308b\u3088\u3046\u306a\u30af\u30e9\u30b9\u8a2d\u8a08\u306f\u30c0\u30e1\u3058\u3083\u306d\uff1f\n\n\uff11\u5bfe\u591a\n\n\u5358\u65b9\u5411\n\n\u7d50\u5408\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u7528\u3059\u308b\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nElliy.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.JoinTable;\nimport javax.persistence.OneToMany;\n\n@Entity\npublic class Elliy {\n @Id\n private Long id;\n\n @OneToMany(fetch = FetchType.EAGER)\n @JoinTable(inverseJoinColumns = @JoinColumn(name = \"yuuka_id\"))\n private List<Yuuka> yuukaList;\n\n @Override\n public String toString() {\n return \"Elliy{\" + \"id=\" + id + \", yuukaList=\" + yuukaList + '}';\n }\n}\n\n\n\nYuuka.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\n@Entity\npublic class Yuuka {\n @Id\n private Long id;\n\n @Override\n public String toString() {\n return \"Yuuka{\" + \"id=\" + id + '}';\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n\n\n\nCREATE TABLE `elliy` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `yuuka` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `elliy_yuuka` (\n `elliy_id` int(11) NOT NULL,\n `yuuka_id` int(11) NOT NULL,\n PRIMARY KEY (`elliy_id`,`yuuka_id`),\n KEY `elliy_yuuka_fk1_idx` (`elliy_id`),\n KEY `elliy_yuuka_fk2_idx` (`yuuka_id`),\n CONSTRAINT `elliy_yuuka_fk1` FOREIGN KEY (`elliy_id`) REFERENCES `elliy` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,\n CONSTRAINT `elliy_yuuka_fk2` FOREIGN KEY (`yuuka_id`) REFERENCES `yuuka` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n Elliy elliy = this.em.find(Elliy.class, 1L);\n System.out.println(elliy);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: Elliy{id=1, yuukaList=[Yuuka{id=1}, Yuuka{id=2}, Yuuka{id=3}, Yuuka{id=4}]}\n\n\n\n\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u3063\u3066\uff11\u5bfe\u591a\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u30b1\u30fc\u30b9\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30c6\u30fc\u30d6\u30eb\u540d\u3084\u30ab\u30e9\u30e0\u540d\u304c\u89e3\u6c7a\u3055\u308c\u308b\u3002\n\n\n\n\n\u5bfe\u8c61\n\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3067\u89e3\u6c7a\u3055\u308c\u305f\u5834\u5408\n\u4f8b\n\n\n\n\n\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u540d\n\u6240\u6709\u8005\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d_\u88ab\u6240\u6709\u8005\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d\nElliy_Yuuka\n\n\n\u6240\u6709\u8005\u3092\u7d50\u5408\u3059\u308b\u305f\u3081\u306e\u30ab\u30e9\u30e0\u540d\n\u6240\u6709\u8005\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d_ID\u9805\u76ee\u540d\nElliy_id\n\n\n\u88ab\u6240\u6709\u8005\u3092\u7d50\u5408\u3059\u308b\u305f\u3081\u306e\u30ab\u30e9\u30e0\u540d\n\u30d7\u30ed\u30d1\u30c6\u30a3\u540d_ID\u9805\u76ee\u540d\nyuukaList_id\n\n\n\n\n\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e\u540d\u524d\u3068\u6240\u6709\u8005\u5074\u3092\u7d50\u5408\u3059\u308b\u305f\u3081\u306e\u30ab\u30e9\u30e0\u540d\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u3067\u3082\u554f\u984c\u306a\u3044\u3002\n\u3057\u304b\u3057\u3001\u88ab\u6240\u6709\u8005\u5074\u3092\u7d50\u5408\u3059\u308b\u305f\u3081\u306e\u30ab\u30e9\u30e0\u540d\u304c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u3060\u3068\u554f\u984c\u304c\u3042\u308b\u3002\n\u305d\u3053\u3067\u3001 @JoinTable \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e inverseJoinColumns \u5c5e\u6027\u3092\u4f7f\u3063\u3066\u30ab\u30e9\u30e0\u540d\u3092\u660e\u793a\u7684\u306b\u6307\u5b9a\u3057\u3066\u3044\u308b\u3002\n\u4eca\u56de\u306f\u5fc5\u8981\u306a\u304b\u3063\u305f\u304c\u3001\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u540d\u3084\u6240\u6709\u8005\u3092\u7d50\u5408\u3059\u308b\u305f\u3081\u306e\u30ab\u30e9\u30e0\u540d\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n\n @JoinTable(\n name = \"relation_table_name\",\n joinColumns = @JoinColumn(name = \"join_column\")\n )\n private List<Yuuka> yuukaList;\n\n\n\nname \u5c5e\u6027\u3067\u3001\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e\u540d\u524d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\njoinColumns \u5c5e\u6027\u3067\u3001\u6240\u6709\u8005\u5074\u3092\u7d50\u5408\u3059\u308b\u305f\u3081\u306e\u30ab\u30e9\u30e0\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\u7d50\u5408\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u7528\u3057\u306a\u3044\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nMugetsu.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.OneToMany;\n\n@Entity\npublic class Mugetsu {\n @Id\n private Long id;\n\n @OneToMany(fetch = FetchType.EAGER)\n @JoinColumn(name = \"mugetsu_id\")\n private List<Gengetsu> gengetsuList;\n\n @Override\n public String toString() {\n return \"Mugetsu{\" + \"id=\" + id + \", gengetsuList=\" + gengetsuList + '}';\n }\n}\n\n\n\nGengetsu.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\n@Entity\npublic class Gengetsu {\n @Id\n private Long id;\n\n @Override\n public String toString() {\n return \"Gengetsu{\" + \"id=\" + id + '}';\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n\n\nCREATE TABLE `mugetsu` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `gengetsu` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `mugetsu_id` int(11) NOT NULL,\n PRIMARY KEY (`id`),\n KEY `gengetsu_fk_idx` (`mugetsu_id`),\n CONSTRAINT `gengetsu_fk` FOREIGN KEY (`mugetsu_id`) REFERENCES `mugetsu` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n Mugetsu mugetsu = this.em.find(Mugetsu.class, 1L);\n System.out.println(mugetsu);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: Mugetsu{id=1, gengetsuList=[Gengetsu{id=1}, Gengetsu{id=2}, Gengetsu{id=3}]}\n\n\n\n\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u308f\u306a\u3044\u5358\u7d14\u306a\u30b1\u30fc\u30b9\u3002\n\uff11\u5bfe\u591a\u306e\u95a2\u9023\u3092\u89e3\u6c7a\u3059\u308b\u5834\u5408\u3001 JPA \u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u3063\u305f\u65b9\u6cd5\u3092\u60f3\u5b9a\u3057\u3066\u95a2\u9023\u306e\u89e3\u6c7a\u3092\u884c\u304a\u3046\u3068\u3059\u308b\u3002\n\u305d\u3046\u3067\u306f\u306a\u304f\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306b\u5358\u7d14\u306a\u65b9\u6cd5\u3067\uff11\u5bfe\u591a\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u6240\u6709\u8005\u5074\u306b @JoinColumn \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n\n\u7d50\u5408\u6761\u4ef6\u3068\u306a\u308b\u30ab\u30e9\u30e0\u306e\u540d\u524d\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068 \u30d7\u30ed\u30d1\u30c6\u30a3\u540d_ID\u30ab\u30e9\u30e0\u540d \u3067\u89e3\u6c7a\u3055\u308c\u308b\uff08\u4e0a\u8ff0\u306e\u4f8b\u306e\u5834\u5408\u306f gengetsuList_id\uff09\u3002\n\u3053\u308c\u3092\u4e0a\u66f8\u304d\u3059\u308b\u5834\u5408\u306f\u3001 name \u5c5e\u6027\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\n\n\u53cc\u65b9\u5411\n\n\u7d50\u5408\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u7528\u3059\u308b\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nSara.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.JoinTable;\nimport javax.persistence.OneToMany;\n\n@Entity\npublic class Sara {\n @Id\n private Long id;\n\n @OneToMany(fetch = FetchType.EAGER)\n @JoinTable(\n inverseJoinColumns = @JoinColumn(name = \"luize_id\")\n )\n private List<Luize> luizeList;\n\n public Long getId() {\n return id;\n }\n\n @Override\n public String toString() {\n return \"Sara{\" + \"id=\" + id + \", luizeList=\" + luizeList + '}';\n }\n}\n\n\n\nLuize.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.JoinTable;\n\n@Entity\npublic class Luize {\n @Id\n private Long id;\n\n @JoinTable(name=\"sara_luize\")\n private Sara sara;\n\n @Override\n public String toString() {\n return \"Luize{\" + \"id=\" + id + \", sara.id=\" + sara.getId() + '}';\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n\n\n\nCREATE TABLE `sara` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `luize` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `sara_luize` (\n `sara_id` int(11) NOT NULL,\n `luize_id` int(11) NOT NULL,\n PRIMARY KEY (`sara_id`,`luize_id`),\n KEY `sara_luize_fk1_idx` (`sara_id`),\n KEY `sara_luize_fk2_idx` (`luize_id`),\n CONSTRAINT `sara_luize_fk1` FOREIGN KEY (`sara_id`) REFERENCES `sara` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,\n CONSTRAINT `sara_luize_fk2` FOREIGN KEY (`luize_id`) REFERENCES `luize` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n Sara sara = this.em.find(Sara.class, 1L);\n System.out.println(sara);\n\n Luize luize = this.em.find(Luize.class, 1L);\n System.out.println(luize);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: Sara{id=1, luizeList=[Luize{id=1, sara.id=1}, Luize{id=2, sara.id=1}, Luize{id=3, sara.id=1}]}\n\u60c5\u5831: Luize{id=1, sara.id=1}\n\n\n\n\u591a\u306e\u65b9\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff08Luize \u30af\u30e9\u30b9\uff09\u304c\u6301\u3064\u30d5\u30a3\u30fc\u30eb\u30c9\uff08sara\uff09\u3092\u3001 @JoinTable \u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3066\u30c6\u30fc\u30d6\u30eb\u540d\u3092\u660e\u793a\u3059\u308b\u3002\n\u3053\u308c\u3092\u3057\u306a\u3044\u3068\u3001\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u304c luize_sara \u3067\u89e3\u6c7a\u3055\u308c\u3066\u3057\u307e\u3046\u3002\n\nLuize \u30af\u30e9\u30b9\u306e sara \u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u30d5\u30a7\u30c3\u30c1\u3092\u5909\u66f4\u3057\u305f\u3044\u5834\u5408\u306f\u3001 @ManyToOne \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\u3002\n\n\n\u7d50\u5408\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u7528\u3057\u306a\u3044\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nYuki.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.OneToMany;\n\n@Entity\npublic class Yuki {\n @Id\n private Long id;\n\n @OneToMany(fetch = FetchType.EAGER)\n @JoinColumn(name = \"yuki_id\")\n private List<Mai> maiList;\n\n public Long getId() {\n return id;\n }\n\n @Override\n public String toString() {\n return \"Yuki{\" + \"id=\" + id + \", maiList=\" + maiList + '}';\n }\n}\n\n\n\nMai.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\n@Entity\npublic class Mai {\n @Id\n private Long id;\n\n private Yuki yuki;\n\n @Override\n public String toString() {\n return \"Mai{\" + \"id=\" + id + \", yuki.id=\" + yuki.getId() + '}';\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n\n\nCREATE TABLE `yuki` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `mai` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `yuki_id` int(11) NOT NULL,\n PRIMARY KEY (`id`),\n KEY `mai_fk_idx` (`yuki_id`),\n CONSTRAINT `mai_fk` FOREIGN KEY (`yuki_id`) REFERENCES `yuki` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n Yuki yuki = this.em.find(Yuki.class, 1L);\n System.out.println(yuki);\n\n Mai mai = this.em.find(Mai.class, 1L);\n System.out.println(mai);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: Yuki{id=1, maiList=[Mai{id=1, yuki.id=1}, Mai{id=2, yuki.id=1}, Mai{id=3, yuki.id=1}]}\n\u60c5\u5831: Mai{id=1, yuki.id=1}\n\n\n\n\u591a\uff08Mai\uff09\u304b\u3089\uff11\uff08Yuki\uff09\u5074\u3092\u7d50\u5408\u3059\u308b\u3068\u304d\u306e\u30ab\u30e9\u30e0\u540d\u306f\u3001\uff11\u5bfe\uff11\u306e\u3068\u304d\u3068\u540c\u3058\u65b9\u6cd5\u3067\u89e3\u6c7a\u3055\u308c\u308b\u3002\n\u660e\u793a\u3057\u305f\u3044\u5834\u5408\u306f\u3001 @JoinColumn \u3092\u4f7f\u3046\u3002\n\n\n\u591a\u5bfe\u591a\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nAlice.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.JoinTable;\nimport javax.persistence.ManyToMany;\n\n@Entity\npublic class Alice {\n @Id\n private Long id;\n\n @ManyToMany(fetch = FetchType.EAGER)\n @JoinTable(\n joinColumns = @JoinColumn(name = \"alice_id\"),\n inverseJoinColumns = @JoinColumn(name = \"yumeko_id\")\n )\n private List<Yumeko> yumekoList;\n\n public Long getId() {\n return id;\n }\n\n @Override\n public String toString() {\n List<String> ids = new ArrayList<>();\n\n for (Yumeko yumeko : this.yumekoList) {\n ids.add(String.valueOf(yumeko.getId()));\n }\n\n return \"Alice{\" + \"id=\" + id + \", yumekoList=\" + String.join(\", \", ids) + '}';\n }\n}\n\n\n\nYumeko.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.Id;\nimport javax.persistence.ManyToMany;\n\n@Entity\npublic class Yumeko {\n @Id\n private Long id;\n\n @ManyToMany(fetch = FetchType.EAGER, mappedBy = \"yumekoList\")\n private List<Alice> aliceList;\n\n public Long getId() {\n return id;\n }\n\n @Override\n public String toString() {\n List<String> ids = new ArrayList<>();\n\n for (Alice alice : this.aliceList) {\n ids.add(String.valueOf(alice.getId()));\n }\n\n return \"Yumeko{\" + \"id=\" + id + \", aliceList=\" + String.join(\", \", ids) + '}';\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n\n\n\nCREATE TABLE `alice` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `yumeko` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `alice_yumeko` (\n `alice_id` int(11) NOT NULL,\n `yumeko_id` int(11) NOT NULL,\n PRIMARY KEY (`alice_id`,`yumeko_id`),\n KEY `alice_yumeko_fk1_idx` (`alice_id`),\n KEY `alice_yumeko_fk2_idx` (`yumeko_id`),\n CONSTRAINT `alice_yumeko_fk1` FOREIGN KEY (`alice_id`) REFERENCES `alice` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,\n CONSTRAINT `alice_yumeko_fk2` FOREIGN KEY (`yumeko_id`) REFERENCES `yumeko` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n Alice alice = this.em.find(Alice.class, 1L);\n System.out.println(alice);\n\n Yumeko yumeko = this.em.find(Yumeko.class, 1L);\n System.out.println(yumeko);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: Alice{id=1, yumekoList=1, 2, 3}\n\u60c5\u5831: Yumeko{id=1, aliceList=1, 2}\n\n\n\n\u53cc\u65b9\u5411\u306e\u591a\u5bfe\u591a\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u5834\u5408\u306f\u3001 @ManyToMany \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u3002\n\u3069\u3061\u3089\u304b\u4e00\u65b9\u3092\u6240\u6709\u8005\u306b\u6c7a\u3081\u3066\u3001\u305d\u3061\u3089\u306b @JoinTable \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u7d50\u5408\u306e\u6761\u4ef6\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\u88ab\u6240\u6709\u8005\u5074\u306f\u3001 @ManyToMany \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e mappedBy \u5c5e\u6027\u3067\u3001\u6240\u6709\u8005\u5074\u306e\u3069\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u7d10\u4ed8\u3044\u3066\u3044\u308b\u306e\u304b\u3060\u3051\u3092\u6307\u5b9a\u3059\u308c\u3070\u3044\u3044\u3002\n\u5b9f\u88c5\u3057\u3066\u3066\u6c17\u3065\u3044\u305f\u3051\u3069\u3001 toString() \u30e1\u30bd\u30c3\u30c9\u5185\u3067 Stream API \u3092\u4f7f\u3046\u3068\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ed\u30fc\u30c9\u6642\u306b\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3063\u307d\u3044\u3002\u539f\u56e0\u306f\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3002\u4ed5\u65b9\u306a\u3044\u306e\u3067\u3001 for \u6587\u3092\u4f7f\u3063\u3066\u6587\u5b57\u5217\u3092\u6574\u5f62\u3057\u3066\u3044\u308b\u3002\n\n\n\u7d99\u627f\u306e\u30de\u30c3\u30d4\u30f3\u30b0\n\n\u30af\u30e9\u30b9\u968e\u5c64\u306b\u5c5e\u3059\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\uff11\u3064\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nParentRumia.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"rumia\")\npublic class ParentRumia {\n @Id\n protected Long id;\n\n protected String name;\n\n public void setName(String name) {\n this.name = name;\n }\n\n @Override\n public String toString() {\n return \"ParentRumia{\" + \"id=\" + id + \", name=\" + name + '}';\n }\n}\n\n\n\nChildRumia.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\n\n@Entity\npublic class ChildRumia extends ParentRumia {\n\n private String value;\n\n public void setValue(String value) {\n this.value = value;\n }\n\n @Override\n public String toString() {\n return \"ChildRumia{id=\" + id + \", name=\" + name + \", value=\" + value + '}';\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\nCREATE TABLE `rumia` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `dtype` varchar(45) NOT NULL,\n `name` varchar(45) DEFAULT NULL,\n `value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n ParentRumia parentRumia = new ParentRumia();\n parentRumia.setName(\"parent name\");\n\n this.em.persist(parentRumia);\n\n ChildRumia childRumia = new ChildRumia();\n childRumia.setName(\"child name\");\n childRumia.setValue(\"child value\");\n\n this.em.persist(childRumia);\n\n\n\u5b9f\u884c\u5f8c\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u69d8\u5b50\u3002\n\n\n\u7279\u306b\u6307\u5b9a\u304c\u7121\u3044\u5834\u5408\u3001\uff11\u3064\u306e\u30af\u30e9\u30b9\u968e\u5c64\u306b\u5c5e\u3059\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306f\u3001\uff11\u3064\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u308b\u3002\n\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u308b\u30c6\u30fc\u30d6\u30eb\u306e\u540d\u524d\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u968e\u5c64\u306e\u30eb\u30fc\u30c8\u3068\u306a\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d\u3067\u89e3\u6c7a\u3055\u308c\u308b\u3002\n\u30c6\u30fc\u30d6\u30eb\u306b\u306f dtype \u3068\u3044\u3046\u540d\u524d\u306e\u6587\u5b57\u5217\u578b\u306e\u30ab\u30e9\u30e0\u3092\u7528\u610f\u3057\u3066\u304a\u304f\u3002\n\n\n\u3053\u306e\u30ab\u30e9\u30e0\u306b\u3001\u305d\u306e\u30ec\u30b3\u30fc\u30c9\u304c\u3069\u306e\u30af\u30e9\u30b9\u306e\u30c7\u30fc\u30bf\u306a\u306e\u304b\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306e\u5024\u304c\u683c\u7d0d\u3055\u308c\u308b\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u540d\u524d\u304c\u683c\u7d0d\u3055\u308c\u308b\u3002\n\n\n\u30c6\u30fc\u30d6\u30eb\u306b\u306f\u3001\u30af\u30e9\u30b9\u968e\u5c64\u306e\u5404\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304c\u6301\u3064\u5168\u3066\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u5bfe\u5fdc\u3059\u308b\u30ab\u30e9\u30e0\u3092\u7528\u610f\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\n\n\u30e1\u30ea\u30c3\u30c8\n\n\u30c7\u30fc\u30bf\u306e\u6301\u3061\u65b9\u304c\u5358\u7d14\u3067\u7406\u89e3\u3057\u3084\u3059\u3044\u3002\n\u691c\u7d22\u6642\u306b\u30c6\u30fc\u30d6\u30eb\u306e JOIN \u304c\u5fc5\u8981\u306a\u3044\u3002\n\n\n\u30c7\u30e1\u30ea\u30c3\u30c8\n\n\u968e\u5c64\u306b\u30af\u30e9\u30b9\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3068\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u30ab\u30e9\u30e0\u3082\u5909\u66f4\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\u9805\u76ee\u306b NOT NULL \u5236\u7d04\u3092\u8a2d\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3002\n\n\n\u5b50\u30af\u30e9\u30b9\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u30ab\u30e9\u30e0\u306b\u306f\u3001\u89aa\u30af\u30e9\u30b9\u306e\u30ec\u30b3\u30fc\u30c9\u3067\u306f NULL \u5024\u304c\u8a2d\u5b9a\u3055\u308c\u308b\u305f\u3081\u3002\n\n\n\n\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d\u3092\u4fdd\u5b58\u3059\u308b\u30ab\u30e9\u30e0\u306e\u540d\u524d\u3084\u5024\u3092\u5909\u66f4\u3059\u308b\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f DTYPE \u3068\u3044\u3046\u6587\u5b57\u5217\u578b\u306e\u30ab\u30e9\u30e0\u306b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d\u304c\u4fdd\u5b58\u3055\u308c\u308b\u3002\n\u3053\u308c\u306f\u3001 @DiscriminatorColumn \u3068 @DiscriminatorValue \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nParentDaiyousei.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.DiscriminatorColumn;\nimport javax.persistence.DiscriminatorType;\nimport javax.persistence.DiscriminatorValue;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"daiyousei\")\n@DiscriminatorColumn(name = \"entity_type\", discriminatorType = DiscriminatorType.INTEGER)\n@DiscriminatorValue(\"1\")\npublic class ParentDaiyousei {\n @Id\n private Long id;\n private String value;\n\n public void setValue(String value) {\n this.value = value;\n }\n}\n\n\n\nChildDaiyousei.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.DiscriminatorValue;\nimport javax.persistence.Entity;\n\n@Entity\n@DiscriminatorValue(\"2\")\npublic class ChildDaiyousei extends ParentDaiyousei {\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\nCREATE TABLE `daiyousei` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `entity_type` int(11) NOT NULL,\n `value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n ParentDaiyousei parentDaiyousei = new ParentDaiyousei();\n parentDaiyousei.setValue(\"parent value\");\n\n this.em.persist(parentDaiyousei);\n\n ChildDaiyousei childDaiyousei = new ChildDaiyousei();\n childDaiyousei.setValue(\"child value\");\n\n this.em.persist(childDaiyousei);\n\n\n\u5b9f\u884c\u5f8c\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u69d8\u5b50\u3002\n\n\n\u30eb\u30fc\u30c8\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092 @DiscriminatorColumn \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3066\u3001 name \u5c5e\u6027\u3067\u30ab\u30e9\u30e0\u306e\u540d\u524d\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\ndiscriminatorType \u5c5e\u6027\u3067\u578b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u5404\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3067\u306a\u3093\u3068\u3044\u3046\u5024\u3092\u8a2d\u5b9a\u3059\u308b\u304b\u306f\u3001 @DiscriminatorValue \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u6307\u5b9a\u3059\u308b\u3002\n\n\n\u30b5\u30d6\u30af\u30e9\u30b9\u3054\u3068\u306b\u30c6\u30fc\u30d6\u30eb\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nParentCirno.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Inheritance;\nimport javax.persistence.InheritanceType;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"parent_cirno\")\n@Inheritance(strategy = InheritanceType.JOINED)\npublic class ParentCirno {\n @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n protected Long id;\n\n protected String name;\n\n public void setName(String name) {\n this.name = name;\n }\n\n @Override\n public String toString() {\n return \"ParentCirno{\" + \"id=\" + id + \", name=\" + name + '}';\n }\n}\n\n\n\nChildCirno.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"child_cirno\")\npublic class ChildCirno extends ParentCirno {\n\n private String value;\n\n public void setValue(String value) {\n this.value = value;\n }\n\n @Override\n public String toString() {\n return \"ChildCirno{\" + \"id=\" + id + \", name=\" + name + \", value=\" + value + '}';\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\nCREATE TABLE `parent_cirno` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `name` varchar(45) DEFAULT NULL,\n `dtype` varchar(45) NOT NULL,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `child_cirno` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`),\n KEY `child_cirno_fk_idx` (`id`),\n CONSTRAINT `child_cirno_fk` FOREIGN KEY (`id`) REFERENCES `parent_cirno` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n ParentCirno parentCirno = new ParentCirno();\n parentCirno.setName(\"parent name\");\n\n this.em.persist(parentCirno);\n\n ChildCirno childCirno = new ChildCirno();\n childCirno.setName(\"child name\");\n childCirno.setValue(\"child value\");\n\n this.em.persist(childCirno);\n\n\n\u5b9f\u884c\u5f8c\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u69d8\u5b50\u3002\n\n\n\n\u30eb\u30fc\u30c8\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092 @Inheritance \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3001 strategy \u306b InheritanceType.JOINED \u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u3001 InheritanceType.SINGLE_TABLE \u3092\u6307\u5b9a\u3057\u305f\u306e\u3068\u540c\u3058\u306b\u306a\u308b\u3002\n\n\n\u3059\u308b\u3068\u3001\u30af\u30e9\u30b9\u968e\u5c64\u4e0a\u306e\u5404\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u3001\u305d\u308c\u305e\u308c\u500b\u5225\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u5404\u30c6\u30fc\u30d6\u30eb\u306f\u3001 PK \u3092\u5916\u90e8\u53c2\u7167\u5236\u7d04\u3067\u7d10\u4ed8\u3051\u308b\u3002\n\u30eb\u30fc\u30c8\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u306f\u3001\u30af\u30e9\u30b9\u3092\u7279\u5b9a\u3059\u308b\u305f\u3081\u306e dtype \u30ab\u30e9\u30e0\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n\n\n\u3053\u3061\u3089\u3082 @DiscriminatorColumn \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\n\n\n\u30e1\u30ea\u30c3\u30c8\n\n\u9805\u76ee\u306b NOT NULL \u5236\u7d04\u3092\u8a2d\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u308b\uff08SINGLE_TABLE \u3068\u6bd4\u3079\u305f\u5834\u5408\u306e\u8a71\uff09\u3002\n\u30c7\u30fc\u30bf\u304c\u6b63\u898f\u5316\u3055\u308c\u308b\u3002\n\n\n\u30c7\u30e1\u30ea\u30c3\u30c8\n\n\u30b5\u30d6\u30af\u30e9\u30b9\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u53d6\u5f97\u3059\u308b\u306b\u306f\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u7d50\u5408\u304c\u5fc5\u8981\u306b\u306a\u308b\u3002\n\n\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3054\u3068\u306b\u72ec\u7acb\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nParentHongMeiling.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Inheritance;\nimport javax.persistence.InheritanceType;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"parent_hong_meiling\")\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\npublic class ParentHongMeiling {\n @Id\n private Long id;\n\n private String name;\n\n public void setName(String name) {\n this.name = name;\n }\n}\n\n\n\nChildHongMeiling.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"child_hong_meiling\")\npublic class ChildHongMeiling extends ParentHongMeiling {\n private String value;\n\n public void setValue(String value) {\n this.value = value;\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\nCREATE TABLE `parent_hong_meiling` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `name` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `child_hong_meiling` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `name` varchar(45) DEFAULT NULL,\n `value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n ParentHongMeiling parentHongMeiling = new ParentHongMeiling();\n parentHongMeiling.setName(\"parent name\");\n\n this.em.persist(parentHongMeiling);\n\n ChildHongMeiling childHongMeiling = new ChildHongMeiling();\n childHongMeiling.setName(\"child name\");\n childHongMeiling.setValue(\"child value\");\n\n this.em.persist(childHongMeiling);\n\n\n\u5b9f\u884c\u5f8c\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u72b6\u614b\u3002\n\n\n\n\n@Inheritance \u3067 InheritanceType.TABLE_PER_CLASS \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u5404\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u305d\u308c\u305e\u308c\u72ec\u7acb\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u304d\u308b\u3002\n\n\n\u30e1\u30ea\u30c3\u30c8\n\n\nSINGLE_TABLE \u3068\u540c\u69d8\u3067\u3001\u5358\u4e00\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u691c\u7d22\u3067\u30c6\u30fc\u30d6\u30eb\u306e JOIN \u304c\u767a\u751f\u3059\u308b\u3053\u3068\u306f\u306a\u3044\u3002\n\n\n\u30c7\u30e1\u30ea\u30c3\u30c8\n\n\u30c7\u30fc\u30bf\u304c\u6b63\u898f\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u3002\n\u591a\u614b\u3092\u5229\u7528\u3057\u305f\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u3042\u3063\u305f\u5834\u5408\u3001\u30c7\u30fc\u30bf\u306e\u8aad\u307f\u8fbc\u307f\u3067\u8907\u6570\u56de\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30a2\u30af\u30bb\u30b9\u304c\u767a\u751f\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002\n\n\n\u4f8b\u3048\u3070\u3001 List<ParentHongMeiling> \u3068\u3044\u3046\u578b\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u3042\u3063\u305f\u5834\u5408\u3001\u30ea\u30b9\u30c8\u306e\u4e2d\u8eab\u306f\u5b9f\u306f ParentHongMeiling \u3068 ChildHongMeiling \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u5165\u308a\u4e71\u308c\u3066\u5165\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u5f97\u308b\u3002\n\u305d\u306e\u5834\u5408\u3001 parent_hong_meiling \u3068 child_hong_meiling \u306e\u30c6\u30fc\u30d6\u30eb\u306b\u305d\u308c\u305e\u308c\u691c\u7d22\u3057\u306b\u3044\u304b\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\nUNION \u304c\u4f7f\u3048\u308c\u3070\u3044\u3044\u304c\u3001\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3082\u5b58\u5728\u3059\u308b\u3002\n\n\n\u3053\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u65b9\u6cd5\u306f\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u3089\u3057\u3044\uff08\u5b9f\u88c5\u3055\u308c\u3066\u3044\u306a\u304f\u3066\u3082 JPA \u306e\u4ed5\u69d8\u7684\u306b\u306f\u304b\u307e\u308f\u306a\u3044\uff09\u3002\n\n\n\u305d\u306e\u4ed6\n\n\u30de\u30c3\u30d4\u30f3\u30b0\u306e\u305f\u3081\u3060\u3051\u306e\u30b9\u30fc\u30d1\u30fc\u30af\u30e9\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nMappedKoakuma.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Id;\nimport javax.persistence.MappedSuperclass;\n\n@MappedSuperclass\npublic class MappedKoakuma {\n @Id\n private Long id;\n\n private String name;\n\n public void setName(String name) {\n this.name = name;\n }\n}\n\n\n\nKoakuma.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\n\n@Entity\npublic class Koakuma extends MappedKoakuma {\n\n private String value;\n\n public void setValue(String value) {\n this.value = value;\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\nCREATE TABLE `koakuma` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `name` varchar(45) DEFAULT NULL,\n `value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n Koakuma koakuma = new Koakuma();\n koakuma.setName(\"name\");\n koakuma.setValue(\"value\");\n\n this.em.persist(koakuma);\n\n\n\u5b9f\u884c\u5f8c\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u69d8\u5b50\u3002\n\n\n\n@MappedSuperclass \u3067\u30af\u30e9\u30b9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3068\u3001\u305d\u306e\u30af\u30e9\u30b9\u306f\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3068\u3057\u3066\u306f\u6271\u308f\u308c\u305a\u3001\u30de\u30c3\u30d4\u30f3\u30b0\u306e\u5b9a\u7fa9\u3060\u3051\u304c\u6709\u52b9\u306b\u306a\u308b\u3002\n\u65e2\u5b58\u306e\u5b9f\u88c5\u3067\u5171\u901a\u9805\u76ee\u304c\u89aa\u30af\u30e9\u30b9\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3051\u3069\u3001\u305d\u306e\u30af\u30e9\u30b9\u306f\u6c38\u7d9a\u5316\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\u3001\u3068\u3044\u3046\u5834\u5408\u306b\u4f7f\u3048\u308b\u3068\u601d\u308f\u308c\u308b\u3002\n\u65b0\u898f\u306b\u4f5c\u308b\u306e\u3067\u3042\u308c\u3070\u3001\u5171\u901a\u9805\u76ee\u306f\u7d99\u627f\u95a2\u4fc2\u3067\u89e3\u6c7a\u3059\u308b\u3088\u308a\u3082\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\u3092\u5229\u7528\u3057\u3066\u4f9d\u5b58\u95a2\u4fc2\u3067\u89e3\u6c7a\u3057\u305f\u65b9\u304c\u3044\u3044\u3068\u601d\u3046\u3002\n\n\nEntity Graph \u3067\u95a2\u9023\u3059\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u8aad\u307f\u8fbc\u307f\u3092\u5236\u5fa1\u3059\u308b\n\u95a2\u9023\u3059\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u3069\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u30ed\u30fc\u30c9\u3059\u308b\u304b\u3069\u3046\u304b\u306f\u3001\u3053\u308c\u307e\u3067\u306f\u30d5\u30a3\u30fc\u30eb\u30c9\u5358\u4f4d\u306b\u9759\u7684\u306b\u3057\u304b\u6307\u5b9a\u3067\u304d\u306a\u304b\u3063\u305f\uff08\u5373\u6642\u30ed\u30fc\u30c9\u3068\u9045\u5ef6\u30ed\u30fc\u30c9\uff09\u3002\n\u3064\u307e\u308a\u3001\u3042\u308b\u691c\u7d22\u306e\u3068\u304d\u306f\u5373\u6642\u30ed\u30fc\u30c9\u3057\u305f\u3044\u3051\u3069\u3001\u5225\u306e\u691c\u7d22\u306e\u3068\u304d\u306f\u9045\u5ef6\u30ed\u30fc\u30c9\u306b\u3057\u305f\u3044\u3001\u3068\u3044\u3046\u7d30\u304b\u3044\u5236\u5fa1\u306f\u3067\u304d\u306a\u304b\u3063\u305f\u3002\n\u3057\u304b\u3057\u3001 JPA 2.1 \u3067\u8ffd\u52a0\u3055\u308c\u305f Entity Graph \u3092\u4f7f\u3048\u3070\u3001\u3053\u306e\u5236\u5fa1\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nIzayoiSakuya.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.NamedAttributeNode;\nimport javax.persistence.NamedEntityGraph;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"izayoi_sakuya\")\n@NamedEntityGraph(\n name = \"IzayoiSakuya.remiliaScarletList\",\n attributeNodes = @NamedAttributeNode(\"remiliaScarletList\")\n)\npublic class IzayoiSakuya {\n @Id\n private Long id;\n @JoinColumn(name = \"izayoi_sakuya_id\")\n private List<RemiliaScarlet> remiliaScarletList;\n @JoinColumn(name = \"izayoi_sakuya_id\")\n private List<FrandreScarlet> frandreScarletList;\n\n @Override\n public String toString() {\n return \"IzayoiSakuya{\" + \"id=\" + id + \", remiliaScarletList=\" + remiliaScarletList + \", frandreScarletList=\" + frandreScarletList + '}';\n }\n}\n\n\n\nRemiliaScarlet.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"remilia_scarlet\")\npublic class RemiliaScarlet {\n @Id\n private Long id;\n\n @Override\n public String toString() {\n return \"RemiliaScarlet{\" + \"id=\" + id + '}';\n }\n}\n\n\n\nFrandreScarlet.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"frandre_scarlet\")\npublic class FrandreScarlet {\n @Id\n private Long id;\n\n @Override\n public String toString() {\n return \"FrandreScarlet{\" + \"id=\" + id + '}';\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n\n\n\nCREATE TABLE `izayoi_sakuya` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `frandre_scarlet` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `izayoi_sakuya_id` int(11) NOT NULL,\n PRIMARY KEY (`id`),\n KEY `frandre_scarlet_fk_idx` (`izayoi_sakuya_id`),\n CONSTRAINT `frandre_scarlet_fk` FOREIGN KEY (`izayoi_sakuya_id`) REFERENCES `izayoi_sakuya` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `remilia_scarlet` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `izayoi_sakuya_id` int(11) NOT NULL,\n PRIMARY KEY (`id`),\n KEY `remilia_scarlet_fk_idx` (`izayoi_sakuya_id`),\n CONSTRAINT `remilia_scarlet_fk` FOREIGN KEY (`izayoi_sakuya_id`) REFERENCES `izayoi_sakuya` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n // \u30c7\u30d5\u30a9\u30eb\u30c8\n IzayoiSakuya izayoiSakuya = this.em.find(IzayoiSakuya.class, 1L);\n System.out.println(izayoiSakuya);\n\n // Entity Graph \u3092\u6307\u5b9a\n EntityGraph graph = this.em.getEntityGraph(\"IzayoiSakuya.remiliaScarletList\");\n\n Map<String, Object> hint = new HashMap<>();\n hint.put(\"javax.persistence.fetchgraph\", graph);\n\n izayoiSakuya = this.em.find(IzayoiSakuya.class, 2L, hint);\n System.out.println(izayoiSakuya);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: IzayoiSakuya{id=1, remiliaScarletList={IndirectList: not instantiated}, frandreScarletList={IndirectList: not instantiated}}\n\u60c5\u5831: IzayoiSakuya{id=2, remiliaScarletList={[RemiliaScarlet{id=4}, RemiliaScarlet{id=5}]}, frandreScarletList={IndirectList: not instantiated}}\n\n\n\n\n@NamedEntityGraph \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001 Entity Graph \u3092\u9759\u7684\u306b\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\nname \u5c5e\u6027\u3067 Entity Graph \u306e\u540d\u524d\u3092\u3001 attributeNodes \u5c5e\u6027\u3067\u5373\u6642\u30ed\u30fc\u30c9\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u6307\u5b9a\u3059\u308b\u3002\nEntity Graph \u3092\u4f7f\u3046\u304b\u3069\u3046\u304b\u306f\u3001 EntityManager.find() \u306e\u6700\u5f8c\u306b Map \u3092\u6e21\u3059\u3053\u3068\u3067\u6307\u5b9a\u3067\u304d\u308b\u3002\n\n\nEntity Graph \u306f\u3001 EntityManager#getEntityGraph(String) \u3092\u4f7f\u3063\u3066\u53d6\u5f97\u3067\u304d\u308b\u3002\n\u30ad\u30fc\u306b javax.persistence.fetchgraph \u3092\u3001\u5024\u306b Entity Graph \u3092\u8a2d\u5b9a\u3057\u305f Map \u3092\u3001 find() \u30e1\u30bd\u30c3\u30c9\u306b\u6e21\u3059\u3002\n\njavax.persistence.loadgraph \u3063\u3066\u3044\u3046\u306e\u3082\u6307\u5b9a\u3067\u304d\u308b\u307f\u305f\u3044\u3060\u3051\u3069\u3001 fetchgraph \u3068\u306e\u9055\u3044\u304c\u3088\u304f\u5206\u304b\u3089\u306a\u304b\u3063\u305f\u3002\u3002\u3002\n\n\nEntity Graph \u3092\u6307\u5b9a\u3057\u305f\u3068\u304d\u3060\u3051\u3001 attributeNodes \u3067\u8a2d\u5b9a\u3057\u305f\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u5373\u6642\u30ed\u30fc\u30c9\u3055\u308c\u308b\u3002\n\nsubgraphs \u5c5e\u6027\u3092\u6307\u5b9a\u3059\u308c\u3070\u3001\u3055\u3089\u306b\u6398\u308a\u4e0b\u3052\u3066\u8aad\u307f\u8fbc\u307f\u65b9\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\nEntity Graph \u3092\u52d5\u7684\u306b\u4f5c\u6210\u3059\u308b\n\nMappingEjb.java\n EntityGraph dynamicGraph = this.em.createEntityGraph(IzayoiSakuya.class);\n dynamicGraph.addAttributeNodes(\"frandreScarletList\");\n\n hint = new HashMap<>();\n hint.put(\"javax.persistence.fetchgraph\", dynamicGraph);\n\n izayoiSakuya = this.em.find(IzayoiSakuya.class, 3L, hint);\n System.out.println(izayoiSakuya);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: IzayoiSakuya{id=3, remiliaScarletList={IndirectList: not instantiated}, frandreScarletList={[FrandreScarlet{id=6}, FrandreScarlet{id=7}]}}\n\n\n\n\nEntityManager#createEntityGraph(Class) \u3067\u3001 Entity Graph \u3092\u52d5\u7684\u306b\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\n\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u3092\u4f7f\u7528\u3059\u308b\nJPA 2.1 \u3067\u3001\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u3068\u3044\u3046\u4ed5\u7d44\u307f\u304c\u8ffd\u52a0\u3055\u308c\u305f\u3002\n\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u3092\u4f7f\u3048\u3070\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u81ea\u7531\u306b\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\n\n\nLettyWhiterock.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Convert;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\nimport sample.javaee.jpa.converter.LettyWhiterockConverter;\n\n@Entity\n@Table(name = \"letty_whiterock\")\npublic class LettyWhiterock {\n @Id\n private Long id;\n\n @Convert(converter = LettyWhiterockConverter.class)\n private String value;\n\n @Override\n public String toString() {\n return \"LettyWhiterock{\" + \"id=\" + id + \", value=\" + value + '}';\n }\n}\n\n\n\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\n\nLettyWhiterockConverter.java\npackage sample.javaee.jpa.converter;\n\nimport java.util.Objects;\nimport javax.persistence.AttributeConverter;\nimport javax.persistence.Converter;\n\n@Converter\npublic class LettyWhiterockConverter implements AttributeConverter<String, Integer>{\n\n @Override\n public Integer convertToDatabaseColumn(String attribute) {\n return \"hoge\".equals(attribute) ? 1 : 0;\n }\n\n @Override\n public String convertToEntityAttribute(Integer dbData) {\n return Objects.equals(dbData, 1) ? \"hoge\" : \"fuga\";\n }\n}\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n\nCREATE TABLE `letty_whiterock` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `value` int(11) DEFAULT NULL,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nMappingEjb.java\n LettyWhiterock lettyWhiterock = this.em.find(LettyWhiterock.class, 1L);\n System.out.println(lettyWhiterock);\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: LettyWhiterock{id=1, value=hoge}\n\n\n\n\nAttributeConverter \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u3067\u3001\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\n\nconvertToDatabaseColumn() \u30e1\u30bd\u30c3\u30c9\u3067\u300cJava \u2192 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u300d\u306e\u5909\u63db\u3092\u5b9f\u88c5\u3059\u308b\u3002\n\nconvertToEntityAttribute() \u30e1\u30bd\u30c3\u30c9\u3067\u300c\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 \u2192 Java\u300d\u306e\u5909\u63db\u3092\u5b9f\u88c5\u3059\u308b\u3002\n\n\n\n@Converter \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001 JavaEE \u30b5\u30fc\u30d0\u30fc\u304c\u81ea\u52d5\u3067\u305d\u306e\u30af\u30e9\u30b9\u3092\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u3068\u3057\u3066\u8a8d\u8b58\u3057\u3066\u304f\u308c\u308b\u3002\n\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u3092\u4f7f\u7528\u3059\u308b\u3068\u304d\u306f\u3001\u30d5\u30a3\u30fc\u30eb\u30c9\u3092 @Convert \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3066\u3001 converter \u5c5e\u6027\u3067\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u306e Class \u3092\u6307\u5b9a\u3059\u308b\u3002\n\n@Converter \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e autoApply \u5c5e\u6027\u306b true \u3092\u8a2d\u5b9a\u3059\u308b\u3068\u3001 @Convet \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u306a\u304f\u3066\u3082\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u578b\u304b\u3089\u63a8\u6e2c\u3057\u3066\u81ea\u52d5\u3067\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u304c\u9069\u7528\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\uff08Integer \u306a\u3069\u57fa\u672c\u7684\u306a\u578b\u306b\u3082\u9069\u7528\u3055\u308c\u308b\u306e\u3067\u3001\u72ec\u81ea\u306e\u578b\u4ee5\u5916\u3067\u306f\u4f7f\u308f\u306a\u3044\u65b9\u304c\u3044\u3044\uff09\u3002\n\n\n\u53c2\u8003\n\nAmazon.co.jp\uff1a Beginning Java EE 6 GlassFish 3\u3067\u59cb\u3081\u308b\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30baJava (Programmer\u2019s SELECTION): Antonio Goncalves, \u65e5\u672c\u30aa\u30e9\u30af\u30eb\u682a\u5f0f\u4f1a\u793e, \u682a\u5f0f\u4f1a\u793e\u30d7\u30ed\u30b7\u30b9\u30c6\u30e0\u30a8\u30eb\u30aa\u30fc\u30b7\u30fc: \u672c\nAmazon.co.jp\uff1a Enterprise JavaBeans 3.1 \u7b2c6\u7248: Andrew Lee Rubinger, Bill Burke, \u4f50\u85e4 \u76f4\u751f, \u6728\u4e0b \u54f2\u4e5f: \u672c\nJava Persistence/ElementCollection - Wikibooks, open books for an open world\nweb\u7528\u8a9e\u8f9e\u5178 - \u30a4\u30f3\u30d4\u30fc\u30c0\u30f3\u30b9\u30fb\u30df\u30b9\u30de\u30c3\u30c1\n\u6771\u65b9Project\u306e\u767b\u5834\u4eba\u7269 - Wikipedia\nForward Everyday: JPA 2.1: Entity Graph\nThoughts on Java: JPA 2.1 Entity Graph - Part 1: Named entity graphs\nGet current JTA transaction status from CMT EJB \u00ab Piotr Nowicki's Homepage\nJava Persistence/What is new in JPA 2.1? - Wikibooks, open books for an open world\nJavaEE 7 JPA 2.1\u306e\u65b0\u6a5f\u80fd\u30b3\u30f3\u30d0\u30fc\u30bf - \u3057\u3093\u3055\u3093\u306e\u51fa\u5f35\u6240\u3000\u306f\u3066\u306a\u7de8\n\n[\u74b0\u5883\u69cb\u7bc9](http://qiita.com/opengl-8080/items/aeda0d8bad42af3113bd)\n[JPA \u306e\u57fa\u672c\u7684\u306a\u8a71](http://qiita.com/opengl-8080/items/e4840aa3e33b42ae0d6b)\n[JPQL \u306e\u8a71](http://qiita.com/opengl-8080/items/e074330b5f4862d9995f)\n[Criteria API \u306e\u8a71](http://qiita.com/opengl-8080/items/6e3e03e4c90cd3d5e211)\n\n[\u30b3\u30fc\u30c9](https://github.com/opengl8080-javaee-samples/jpa)\n\n\u30de\u30c3\u30d4\u30f3\u30b0\u65b9\u6cd5\u3060\u3051\u3092\u78ba\u8a8d\u3057\u3084\u3059\u3044\u3088\u3046\u306b\u3057\u305f\u4e00\u89a7\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n[JPA \u30de\u30c3\u30d4\u30f3\u30b0\u30ab\u30bf\u30ed\u30b0 - Qiita](http://qiita.com/opengl-8080/items/5190ee953cfbab5ce3e9)\n\n\n#\u306f\u3058\u3081\u306b\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u3067\u8003\u3048\u3089\u308c\u305f\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u3068\u3001\u6b63\u898f\u5316\u306a\u3069\u3092\u8003\u616e\u3057\u3066\u8003\u3048\u3089\u308c\u305f\u30ea\u30ec\u30fc\u30b7\u30e7\u30ca\u30eb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30c6\u30fc\u30d6\u30eb\u3067\u306f\u3001\u30c7\u30fc\u30bf\u306e\u6301\u305f\u305b\u65b9\u306b\u9055\u3044\u304c\u751f\u307e\u308c\u308b\u3002\n\u3053\u306e\u9055\u3044\u3092\u30a4\u30f3\u30d4\u30fc\u30c0\u30f3\u30b9\u30df\u30b9\u30de\u30c3\u30c1\u3068\u8a00\u3046\u3002\n\n\u30a4\u30f3\u30d4\u30fc\u30c0\u30f3\u30b9\u30df\u30b9\u30de\u30c3\u30c1\u3092\u89e3\u6c7a\u3059\u308b\u306b\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u304b\u3089\u53d6\u5f97\u3057\u305f\u30ec\u30b3\u30fc\u30c9\u3092\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u51e6\u7406\u304c\u5fc5\u8981\u306b\u306a\u308b\uff08\u3055\u3089\u306b\u3001\u6c38\u7d9a\u5316\u3059\u308b\u3068\u304d\u306f\u9006\u5909\u63db\u304c\u5fc5\u8981\uff09\u3002\n\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u30c6\u30fc\u30d6\u30eb\u306e\u69cb\u9020\u304c\uff11\u5bfe\uff11\u3067\u5bfe\u5fdc\u3057\u3066\u3044\u308c\u3070\u3001\u3053\u306e\u5909\u63db\u306f\u305d\u3053\u307e\u3067\u5927\u5909\u3067\u306f\u306a\u3044\u3002\n\u3057\u304b\u3057\u3001\u305d\u3046\u3067\u306a\u3044\u5834\u5408\u3001\u5909\u63db\u3092\u81ea\u529b\u3067\u5b9f\u88c5\u3059\u308b\u306e\u306f\u975e\u5e38\u306b\u9aa8\u304c\u6298\u308c\u308b\u3002\n\nO/R \u30de\u30c3\u30d1\u30fc\u306f\u3053\u306e\u5909\u63db\u3092\u81ea\u52d5\u3067\u3084\u3063\u3066\u304f\u308c\u308b\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3001 JPA \u3067\u306f\u3001\u69d8\u3005\u306a\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n\u30c9\u30e1\u30a4\u30f3\u30e2\u30c7\u30eb\u306e\u5b9f\u88c5\u306b\u5177\u4f53\u7684\u306a\u6280\u8853\u8981\u7d20\u3067\u3042\u308b JPA \u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u308b\u3053\u3068\u306b\u82e5\u5e72\u306e\u62d2\u7d76\u53cd\u5fdc\u304c\u8d77\u3053\u308a\u305d\u3046\u306b\u306a\u308b\u304c\u3001\u305d\u3053\u306f\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u81ea\u52d5\u5316\u3067\u304d\u308b\u3053\u3068\u3068\u306e\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\u3068\u3057\u3066\u76ee\u3092\u3064\u3080\u308b\u3079\u304d\u304b\u306a\u3068\u500b\u4eba\u7684\u306b\u601d\u3063\u3066\u3044\u308b\u3002\n\n#\u57fa\u672c\u7de8\n##\u57fa\u672c\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/80753290-49b6-70bf-f4a6-abcdb8a830b4.jpeg)\n\n```java:Reimu.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\n@Entity\npublic class Reimu {\n    @Id\n    private Long id;\n\n    @Override\n    public String toString() {\n        return \"Reimu{\" + \"id=\" + id + '}';\n    }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/5a377398-77e0-9623-85e5-4327e342cdff.jpeg)\n\n\n```sql:\nCREATE TABLE `reimu` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n- \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306f\u540c\u3058\u540d\u524d\u306e\u30c6\u30fc\u30d6\u30eb\u3068\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u308b\u3002\n    - \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u540d\u524d\u306f\u3001\u7279\u306b\u6307\u5b9a\u3057\u306a\u3051\u308c\u3070\u30af\u30e9\u30b9\u540d\u3068\u540c\u3058\u306b\u306a\u308b\u3002\n- \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306b\u306f\u3001\u5fc5\u305a\uff11\u3064\u306f `@Id` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u5fc5\u8981\u3002\n- \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306f\u3001 public \u307e\u305f\u306f protected \u3067\u3001\u5f15\u6570\u306e\u7121\u3044\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u5fc5\u8981\u3002\n- \u30d5\u30a3\u30fc\u30eb\u30c9\u306f\u3001\u53ef\u8996\u6027\u304c private \u3067\u3082\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u304d\u308b\u3002\n- \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30d5\u30a3\u30fc\u30eb\u30c9\u306f\u540c\u3058\u540d\u524d\u306e\u30ab\u30e9\u30e0\u3068\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u308b\u3002\n\n##\u30c6\u30fc\u30d6\u30eb\u540d\u30fb\u30ab\u30e9\u30e0\u540d\u3092\u6307\u5b9a\u3059\u308b\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/5798af0d-1cb9-cb35-d9ba-7b85e3c3c250.jpeg)\n\n```java:KirisameMarisa.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"kirisame_marisa\")\npublic class KirisameMarisa {\n    @Id\n    @Column(name = \"id_column\")\n    private Long id;\n\n    @Override\n    public String toString() {\n        return \"KirisameMarisa{\" + \"id=\" + id + '}';\n    }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/3716497e-76f2-1d56-db8f-7306496e90c9.jpeg)\n\n```sql:\nCREATE TABLE `kirisame_marisa` (\n  `id_column` int(11) NOT NULL AUTO_INCREMENT,\n  PRIMARY KEY (`id_column`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n- \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d\u3068\u30c6\u30fc\u30d6\u30eb\u540d\u304c\u7570\u306a\u308b\u5834\u5408\u306f\u3001 `@Table` \u3067\u30af\u30e9\u30b9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3001 `name` \u5c5e\u6027\u3067\u30c6\u30fc\u30d6\u30eb\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002\n- \u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u3068\u30ab\u30e9\u30e0\u540d\u304c\u7570\u306a\u308b\u5834\u5408\u306f\u3001 `@Column` \u3067\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3001 `name` \u5c5e\u6027\u3067\u30ab\u30e9\u30e0\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n##ID \u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u8a2d\u5b9a\u3059\u308b\n\u4f8b\u3048\u3070\u3001 MySQL \u306e\u5834\u5408\u306f AUTO_INCREMENT \u306e\u4ed5\u7d44\u307f\u3092\u4f7f\u3063\u3066 ID \u304c\u63a1\u756a\u3055\u308c\u308b\u3002\n\u307e\u305f\u3001 Oracle \u306e\u5834\u5408\u306f\u30b7\u30fc\u30b1\u30f3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f7f\u3063\u3066 ID \u3092\u63a1\u756a\u3059\u308b\u3002\n\nID \u304c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4ee5\u5916\u306e\u4ed5\u7d44\u307f\u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3068\u3001 `persist()` \u3059\u308b\u3068\u304d\u306b\u305d\u306e\u4ed5\u7d44\u3092\u5229\u7528\u3057\u3066 ID \u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u3002\n\u307e\u305f\u3001 ID \u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u3001 `persist()` \u3057\u305f\u5f8c\u306b\u81ea\u52d5\u751f\u6210\u3055\u308c\u305f ID \u3092\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\uff08\u8a2d\u5b9a\u3057\u3066\u3044\u306a\u3044\u3068\u3001\u53d6\u5f97\u3067\u304d\u306a\u3044\uff09\u3002\n\n###MySQL \u306e AUTO_INCREMENT\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/34e45fca-6c28-8792-eeb2-b2f4aa637028.jpeg)\n\n```java:SinGyoku.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class SinGyoku {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    private String value;\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n    @Override\n    public String toString() {\n        return \"SinGyoku{\" + \"id=\" + id + \", value=\" + value + '}';\n    }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/1a48c7ce-3965-c43d-6d3f-ab6ac07149e9.jpeg)\n\n```sql:\nCREATE TABLE `singyoku` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `value` varchar(45) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n    SinGyoku sinGyoku = new SinGyoku();\n    sinGyoku.setValue(\"test\");\n    \n    this.em.persist(sinGyoku);\n    \n    System.out.println(sinGyoku);\n    \n    this.em.flush();\n    \n    System.out.println(sinGyoku);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   SinGyoku{id=null, value=test}\n\u60c5\u5831:   SinGyoku{id=1, value=test}\n```\n\n- `@GeneratedValue` \u3067\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u3002\n- `strategy` \u5c5e\u6027\u306b\u3001\u305d\u306e\u9805\u76ee\u304c\u3069\u306e\u3088\u3046\u306b\u3057\u3066\u751f\u6210\u3055\u308c\u308b\u304b\u3092\u6307\u5b9a\u3059\u308b\u3002\n- MySQL \u306e AUTO_INCREMENT \u3067\u306f\u3001 `GenerationType.IDENTITY` \u3092\u6307\u5b9a\u3059\u308b\u3002\n- MySQL \u306e AUTO_INCREMENT \u306f INSERT \u6587\u3092\u767a\u884c\u3059\u308b\u3068\u304d\u306b ID \u3092\u63a1\u756a\u3059\u308b\u3002\u3088\u3063\u3066 `EntityManager#flush()` \u3067\u660e\u793a\u7684\u306b\u30b3\u30df\u30c3\u30c8\u3092\u5b9f\u884c\u3057\u306a\u3044\u3068\u3001\u81ea\u52d5\u751f\u6210\u3055\u308c\u305f ID \u3092\u53d6\u5f97\u3067\u304d\u306a\u3044\u3002\n\n###Oracle \u306e\u30b7\u30fc\u30b1\u30f3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\u203bOracle \u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306e JDBC Connection Pool \u3068 JDBC Resource \u3092\u4e88\u3081 GlassFish \u306b\u767b\u9332\u3057\u3066\u304a\u304f\u3053\u3068\uff08\u30b5\u30f3\u30d7\u30eb\u5b9f\u88c5\u3067\u306f\u3001 `OracleUnit` \u3068\u3044\u3046\u540d\u524d\u3067\u6c38\u7d9a\u30e6\u30cb\u30c3\u30c8\u3092\u5b9a\u7fa9\u3057\u305f\uff09\u3002\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/ddc3f119-23b0-960a-4689-9cd0179d7029.jpeg)\n\n```java:\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.SequenceGenerator;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"yuugen_magan\")\npublic class YuugenMagan {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = \"yuugen_magan_seq_gen\")\n    @SequenceGenerator(name = \"yuugen_magan_seq_gen\", sequenceName = \"yuugen_magan_seq\", allocationSize = 1)\n    private Long id;\n    private String value;\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n    @Override\n    public String toString() {\n        return \"YuugenMagan{\" + \"id=\" + id + \", value=\" + value + '}';\n    }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n```sql:\nCREATE TABLE yuugen_magan (\n    ID NUMBER(10),\n    VALUE VARCHAR2(128),\n    PRIMARY KEY(ID)\n);\n\nCREATE SEQUENCE yuugen_magan_seq;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n    YuugenMagan yuugenMagan = new YuugenMagan();\n    yuugenMagan.setValue(\"test\");\n    \n    this.em.persist(yuugenMagan);\n    System.out.println(yuugenMagan);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   YuugenMagan{id=1, value=test}\n```\n\n- \u30b7\u30fc\u30b1\u30f3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f\u3001 `@GeneratedValue` \u306e `strategy` \u306b `GenerationType.SEQUENCE` \u3092\u6307\u5b9a\u3059\u308b\u3002\n    - `generator` \u5c5e\u6027\u306b\u306f\u3001 ID \u3092\u751f\u6210\u3059\u308b\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u306e\u540d\u524d\u3092\u6307\u5b9a\u3059\u308b\u3002\n    - \u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u306e\u5b9a\u7fa9\u306f\u3001 `@SequenceGenerator` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u884c\u3046\u3002\n    - `name` \u5c5e\u6027\u306b\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u306e\u540d\u524d\u3092\u6307\u5b9a\u3057\u3001 `sequenceName` \u5c5e\u6027\u3067\u30b7\u30fc\u30b1\u30f3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u540d\u524d\u3092\u6307\u5b9a\u3059\u308b\u3002\n- \u30b7\u30fc\u30b1\u30f3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5834\u5408\u306f\u3001\u30b3\u30df\u30c3\u30c8\u524d\u3067\u3082 EntityManager \u304c\u6b21\u306e\u30b7\u30fc\u30b1\u30f3\u30b9\u5024\u3092\u53d6\u5f97\u3067\u304d\u308b\u306e\u3067\u3001 `flush()` \u3059\u308b\u524d\u3067\u3082\u81ea\u52d5\u751f\u6210\u3055\u308c\u305f ID \u3092\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n- `allocationSize` \u306f\u30b7\u30fc\u30b1\u30f3\u30b9\u5024\u306e\u5897\u5206\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u306f 50\uff09\u3002\n\n###\u30b7\u30fc\u30b1\u30f3\u30b9\u751f\u6210\u7528\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u7528\u3059\u308b\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/db9f9635-82dd-2ac5-892c-36ebc53dd86b.jpeg)\n\n```java:Elis.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.TableGenerator;\n\n@Entity\npublic class Elis {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.TABLE, generator = \"elis_seq_generator\")\n    @TableGenerator(name = \"elis_seq_generator\",\n                    table = \"seq_generator\",\n                    pkColumnName = \"table_name\",\n                    valueColumnName = \"sequence_number\",\n                    pkColumnValue = \"elis\",\n                    allocationSize = 1)\n    private Long id;\n    private String value;\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n    @Override\n    public String toString() {\n        return \"Elis{\" + \"id=\" + id + \", value=\" + value + '}';\n    }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/d6d88f40-5ca3-0fcc-7cfc-e215ef2f386a.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/fbd7feda-3ec9-89fe-4b3a-6c3f5ad31e7d.jpeg)\n\n```sql:\nCREATE TABLE `elis` (\n  `id` int(11) NOT NULL,\n  `value` varchar(45) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `seq_generator` (\n  `table_name` varchar(128) NOT NULL,\n  `sequence_number` int(11) NOT NULL,\n  PRIMARY KEY (`table_name`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n    Elis elis = new Elis();\n    elis.setValue(\"test\");\n    \n    this.em.persist(elis);\n    System.out.println(elis);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   Elis{id=1, value=test}\n```\n\n- \u30b7\u30fc\u30b1\u30f3\u30b9\u3092\u63a1\u756a\u3059\u308b\u305f\u3081\u306e\u5c02\u7528\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001 `strategy` \u306b `GenerationType.TABLE` \u3092\u6307\u5b9a\u3059\u308b\u3002\n- `generator` \u306b\u306f\u3001 `@TableGenerator` \u3067\u5b9a\u7fa9\u3057\u305f\u540d\u524d\u3092\u6307\u5b9a\u3059\u308b\u3002\n- `@TableGenerator` \u3067\u306f\u3001\u30b7\u30fc\u30b1\u30f3\u30b9\u63a1\u756a\u7528\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u60c5\u5831\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n\n| \u5c5e\u6027            | \u8aac\u660e                                                                                    |\n| :--             | :--                                                                                     |\n| name            | \u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u306e\u540d\u524d                                                                      |\n| table           | \u30b7\u30fc\u30b1\u30f3\u30b9\u3092\u63a1\u756a\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u306e\u540d\u524d                                                      |\n| pkColumnName    | \u30b7\u30fc\u30b1\u30f3\u30b9\u63a1\u756a\u30c6\u30fc\u30d6\u30eb\u306e\u884c\u3092\u7279\u5b9a\u3059\u308b\u305f\u3081\u306e\u30ab\u30e9\u30e0\u306e\u540d\u524d                                  |\n| valueColumnName | \u30b7\u30fc\u30b1\u30f3\u30b9\u5024\u3092\u4fdd\u5b58\u3057\u3066\u304a\u304f\u30ab\u30e9\u30e0\u306e\u540d\u524d                                                  |\n| pkColumnValue   | \u3053\u306e\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u304c\u63a1\u756a\u306b\u7528\u3044\u308b\u884c\u3092\u7279\u5b9a\u3059\u308b\u305f\u3081\u306e\u5024\u3002`pkColumnName` \u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u5024\u3002 |\n| allocationSize  | \u30b7\u30fc\u30b1\u30f3\u30b9\u306e\u5897\u5206\u5024\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u306f 50\uff09                                                   |\n\n##\u8907\u5408\u4e3b\u30ad\u30fc\u3068\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n###@EmbeddedId \u3092\u4f7f\u7528\u3057\u305f\u30d1\u30bf\u30fc\u30f3\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/a979d39d-b033-6716-9c79-081c5b5eef42.jpeg)\n\n```java:Sariel.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.EmbeddedId;\nimport javax.persistence.Entity;\n\n@Entity\npublic class Sariel {\n    \n    @EmbeddedId\n    private SarielKey key;\n    private String value;\n\n    public void setKey(SarielKey key) {\n        this.key = key;\n    }\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n    @Override\n    public String toString() {\n        return \"Sariel{\" + \"key=\" + key + \", value=\" + value + '}';\n    }\n}\n```\n\n```java:SarielKey.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.io.Serializable;\nimport java.util.Objects;\nimport javax.persistence.Embeddable;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\n\n@Embeddable\npublic class SarielKey implements Serializable {\n    \n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long key1;\n    private String key2;\n\n    public void setKey2(String key2) {\n        this.key2 = key2;\n    }\n    \n    @Override\n    public String toString() {\n        return \"SarielKey{\" + \"key1=\" + key1 + \", key2=\" + key2 + '}';\n    }\n\n    @Override\n    public int hashCode() {\n        // \u7701\u7565\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        // \u7701\u7565\n    }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/a0fe335c-1e75-2ac0-fd3c-db2f20691662.jpeg)\n\n```sql:\nCREATE TABLE `sariel` (\n  `key1` int(11) NOT NULL AUTO_INCREMENT,\n  `key2` varchar(32) NOT NULL,\n  `value` varchar(45) DEFAULT NULL,\n  PRIMARY KEY (`key1`,`key2`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n    SarielKey key = new SarielKey();\n    key.setKey2(\"test\");\n    \n    Sariel sariel = new Sariel();\n    sariel.setKey(key);\n    sariel.setValue(\"TEST\");\n    \n    this.em.persist(sariel);\n    \n    this.em.flush();\n    \n    System.out.println(sariel);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   Sariel{key=SarielKey{key1=1, key2=test}, value=TEST}\n```\n\n- \u8907\u5408\u4e3b\u30ad\u30fc\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u5834\u5408\u306e\uff11\u3064\u306e\u65b9\u6cd5\u3068\u3057\u3066\u3001 `@EmbeddedId` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u305f\u65b9\u6cd5\u304c\u3042\u308b\u3002\n- \u8907\u5408\u4e3b\u30ad\u30fc\u306b\u6307\u5b9a\u3057\u305f\u30ab\u30e9\u30e0\u3092\u6301\u3064\u4e3b\u30ad\u30fc\u7528\u306e\u30af\u30e9\u30b9\uff08`SarielKey`\uff09\u3092\u4f5c\u6210\u3057\u3001\u305d\u306e\u30af\u30e9\u30b9\u3092 `@Embeddable` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n- \u30e1\u30a4\u30f3\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u5074\uff08`Sariel`\uff09\u306b\u306f\u3001\u4e3b\u30ad\u30fc\u7528\u306e\u30af\u30e9\u30b9\u3092\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u6301\u305f\u305b\u3001 `@EmbeddedId` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n- \u4e3b\u30ad\u30fc\u306e\u4e00\u610f\u6027\u3092\u4fdd\u8a3c\u3059\u308b\u305f\u3081\u3001 `equals()` \u3068 `hashCode()` \u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3059\u308b\uff08\u30b3\u30fc\u30c9\u306f NetBeans \u306e\u6a5f\u80fd\u3067\u81ea\u52d5\u751f\u6210\u3057\u305f\u3082\u306e\uff09\u3002\n\n####equals() \u3068 hashCode() \u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3059\u308b\u7406\u7531\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e `equals()` \u30e1\u30bd\u30c3\u30c9\u306f\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u540c\u3058\u304b\u3069\u3046\u304b\u3092\u6bd4\u8f03\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n\u3064\u307e\u308a\u3001\u30ad\u30fc\u9805\u76ee\u306b\u540c\u3058\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u3066\u3082\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u7570\u306a\u308c\u3070 `equals()` \u30e1\u30bd\u30c3\u30c9\u306f false \u3092\u8fd4\u3057\u3066\u3057\u307e\u3046\u3002\n\u305d\u3046\u306a\u308b\u3068\u3001\u540c\u3058\u30ad\u30fc\u9805\u76ee\u3092\u3082\u3064\u7570\u306a\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u751f\u6210\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u751f\u307e\u308c\u3001\u4e3b\u30ad\u30fc\u306e\u4e00\u610f\u6027\u304c\u4fdd\u8a3c\u3055\u308c\u306a\u304f\u306a\u308b\u3002\n\n\u3053\u306e\u305f\u3081\u3001\u30ad\u30fc\u9805\u76ee\u3092\u6301\u3064\u30af\u30e9\u30b9\u306f `equals()` \u30e1\u30bd\u30c3\u30c9\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\u305d\u3057\u3066\u3001 `equals()` \u30e1\u30bd\u30c3\u30c9\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3059\u308b\u306e\u3067\u3001\u5408\u308f\u305b\u3066 `hashCode()` \u3082\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\uff08\u8a73\u3057\u304f\u306f Effective Java \u3092\u53c2\u7167\uff09\u3002\n\n###@IdClass \u3092\u4f7f\u7528\u3057\u305f\u30d1\u30bf\u30fc\u30f3\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/145aa4d7-20c2-fd31-660e-0bc9ede305f0.jpeg)\n\n```java:Mima.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.IdClass;\n\n@Entity\n@IdClass(MimaKey.class)\npublic class Mima {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long key1;\n    @Id\n    private String key2;\n    private String value;\n\n    public void setKey2(String key2) {\n        this.key2 = key2;\n    }\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n    @Override\n    public String toString() {\n        return \"Mima{\" + \"key1=\" + key1 + \", key2=\" + key2 + \", value=\" + value + '}';\n    }\n}\n```\n\n```java:MimaKey.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.io.Serializable;\nimport java.util.Objects;\n\npublic class MimaKey implements Serializable {\n    \n    private Long key1;\n    private String key2;\n\n    @Override\n    public int hashCode() {\n        // \u7701\u7565\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        // \u7701\u7565\n    }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/66769f3d-853a-3e2d-b607-4d3196f93e18.jpeg)\n\n```sql:\nCREATE TABLE `mima` (\n  `key1` int(11) NOT NULL AUTO_INCREMENT,\n  `key2` varchar(45) NOT NULL,\n  `value` varchar(45) DEFAULT NULL,\n  PRIMARY KEY (`key1`,`key2`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:\n    Mima mima = new Mima();\n    \n    mima.setKey2(\"key2\");\n    mima.setValue(\"test\");\n    \n    this.em.persist(mima);\n    \n    this.em.flush();\n    \n    System.out.println(mima);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   Mima{key1=2, key2=key2, value=test}\n```\n\n- `@IdClass` \u3092\u4f7f\u3046\u3053\u3068\u3067\u8907\u5408\u4e3b\u30ad\u30fc\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n- \u3053\u306e\u5834\u5408\u3001\u4e3b\u30ad\u30fc\u306e\u9805\u76ee\u306f\u30e1\u30a4\u30f3\u3068\u306a\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u5074\uff08`Hoge`\uff09\u306b\u5b9a\u7fa9\u3057\u3001 `@Id` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n- `@IdClass` \u306b\u6307\u5b9a\u3057\u305f\u30af\u30e9\u30b9\u306b\u306f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4e00\u5207\u4ed8\u4e0e\u305b\u305a\u306b\u8907\u5408\u4e3b\u30ad\u30fc\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n    - \u3064\u307e\u308a\u3001\u8907\u5408\u4e3b\u30ad\u30fc\u304c\u65e2\u5b58\u306e\u30af\u30e9\u30b9\u3067\u3001\u81ea\u7531\u306b\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u5909\u3048\u3089\u308c\u306a\u3044\u3068\u304d\u3068\u304b\u306b\u4f7f\u3048\u308b\u3068\u3044\u3046\u3053\u3068\u304b\uff1f\n    - \u3067\u3082\u3001 `equals()` \u3068 `hashCode()` \u304c\u6b63\u3057\u304f\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3055\u308c\u3066\u3044\u306a\u3044\u3068\u3001\u4e3b\u30ad\u30fc\u306e\u4e00\u610f\u6027\u304c\u62c5\u4fdd\u3055\u308c\u306a\u304f\u306a\u308b\u306e\u3067\u6ce8\u610f\u304c\u5fc5\u8981\u305d\u3046\u3002\n\n##\u65e5\u4ed8\u9805\u76ee\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/f94c877e-7c49-a2d0-23eb-620966b172bc.jpeg)\n\n```java:Kikuri.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.Date;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Temporal;\nimport javax.persistence.TemporalType;\n\n@Entity\npublic class Kikuri {\n    \n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    \n    @Temporal(TemporalType.DATE)\n    private Date date;\n    @Temporal(TemporalType.TIME)\n    private Date time;\n    @Temporal(TemporalType.TIMESTAMP)\n    private Date datetime;\n    \n    public void setDate(Date date) {\n        this.date = this.time = this.datetime = date;\n    }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/ce23efb1-d6e4-a9c9-1335-1df69612f642.jpeg)\n\n\n```sql:\nCREATE TABLE `kikuri` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `date` date DEFAULT NULL,\n  `time` time DEFAULT NULL,\n  `datetime` datetime DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:\n    Kikuri kikuri = new Kikuri();\n    kikuri.setDate(new Date());\n    \n    this.em.persist(kikuri);\n```\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u5b9f\u884c\u5f8c\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u72b6\u614b\u3002\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/91c2f2eb-7551-2c9a-6395-e276317c6653.jpeg)\n\n- \u65e5\u4ed8\u9805\u76ee\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u5834\u5408\u306f\u3001 `@Temporal` \u3067\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n- `@Temporal` \u306e\u5024\u306b\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4e0a\u306e\u8a73\u7d30\u306a\u578b\uff08`DATE`, `TIME`, `TIMESTAMP`\uff09\u3092\u6307\u5b9a\u3059\u308b\u3002\n    - `DATE` \u306f\u65e5\u4ed8\u3060\u3051\u3002\n    - `TIME` \u306f\u6642\u523b\u3060\u3051\u3002\n    - `TIMESTAMP` \u306f\u65e5\u4ed8\u3068\u6642\u523b\u306e\u4e21\u65b9\u3002\n\n###Java8 \u3067\u8ffd\u52a0\u3055\u308c\u305f LocalTime \u3068\u304b\u306f\u4f7f\u3048\u308b\uff1f\n\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u3092\u81ea\u4f5c\u3059\u308c\u3070\u4f7f\u3048\u308b\u3063\u307d\u3044\uff1f\n\n[Using the Java 8 DateTime Classes with JPA! | Java.net](https://weblogs.java.net/blog/montanajava/archive/2014/06/17/using-java-8-datetime-classes-jpa)\n\n##\u7279\u5b9a\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u6c38\u7d9a\u5316\u306e\u5bfe\u8c61\u5916\u306b\u3059\u308b\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/e67f4eaf-90f3-f295-a9a7-b0e0f5e92b1f.jpeg)\n\n```java:Konngara.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Transient;\n\n@Entity\npublic class Konngara {\n    \n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    private String value;\n    @Transient\n    private String ignore;\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n    public void setIgnore(String ignore) {\n        this.ignore = ignore;\n    }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/9e3ce76e-8bf5-2b79-70e5-4476ed83f3d3.jpeg)\n\n```sql:\nCREATE TABLE `konngara` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `value` varchar(45) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n- `@Transient` \u3067\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3068\u3001\u305d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306f\u6c38\u7d9a\u5316\u306e\u5bfe\u8c61\u5916\u306b\u306a\u308a\u3001\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u306f\u7121\u8996\u3055\u308c\u308b\u3002\n\n##\u5217\u6319\u578b\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n###\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u52d5\u304d\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/03a9845a-30a6-640c-d55e-624e01a6e106.jpeg)\n\n```java:Genji.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class Genji {\n    \n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    @Column(name = \"enum_value\")\n    private GenjiEnum enumValue;\n\n    public void setEnumValue(GenjiEnum enumValue) {\n        this.enumValue = enumValue;\n    }\n}\n```\n\n```java:GenjiEnum.java\npackage sample.javaee.jpa.entity.mapping;\n\npublic enum GenjiEnum {\n    HOGE, FUGA, PIYO;\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/f7dc5b4c-817d-feb0-21b7-a2338ac4bd6c.jpeg)\n\n```sql:\nCREATE TABLE `genji` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `enum_value` int(11) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n    Genji genji = new Genji();\n    genji.setEnumValue(GenjiEnum.HOGE);\n    \n    this.em.persist(genji);\n    \n    genji = new Genji();\n    genji.setEnumValue(GenjiEnum.FUGA);\n    \n    this.em.persist(genji);\n```\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u5b9f\u884c\u5f8c\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u72b6\u614b\u3002\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/2e9c2c48-e5e5-b742-0604-9ff035ec40a9.jpeg)\n\n- enum \u306e\u9805\u76ee\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u5bfe\u5fdc\u3059\u308b\u5e8f\u6570\u304c\u4fdd\u5b58\u3055\u308c\u308b\u3002\n- \u3057\u304b\u3057\u3001\u3053\u308c\u3060\u3068\u5217\u6319\u5b50\u306e\u9806\u756a\u3092\u5165\u308c\u66ff\u3048\u305f\u9014\u7aef\u306b\u30c7\u30fc\u30bf\u304c\u6b63\u3057\u304f\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u306a\u304f\u306a\u308b\u3002\n\n###\u6587\u5b57\u5217\u3067\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/fc5c5595-23c1-8874-886a-5a3c34673299.jpeg)\n\n```java:Rika.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.EnumType;\nimport javax.persistence.Enumerated;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class Rika {\n    \n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    @Column(name = \"enum_value\")\n    @Enumerated(EnumType.STRING)\n    private RikaEnum enumValue;\n\n    public void setEnumValue(RikaEnum enumValue) {\n        this.enumValue = enumValue;\n    }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/f83cb0e9-bad7-1af0-46d8-66ee29e6b05a.jpeg)\n\n```sql:\nCREATE TABLE `rika` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `enum_value` varchar(45) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n    Rika rika = new Rika();\n    rika.setEnumValue(RikaEnum.HOGE);\n    \n    this.em.persist(rika);\n    \n    rika = new Rika();\n    rika.setEnumValue(RikaEnum.FUGA);\n    \n    this.em.persist(rika);\n```\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u5f8c\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u69d8\u5b50.\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/3493d194-6093-deea-cd05-03d591fa213e.jpeg)\n\n- `@Enumerated` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3066\u3001 `EnumType.STRING` \u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u5e8f\u6570\u3067\u306f\u306a\u304f\u6587\u5b57\u5217\u3067 enum \u306e\u60c5\u5831\u3092\u8a18\u9332\u3067\u304d\u308b\u3002\n- \u3053\u308c\u306a\u3089\u3001\u5217\u6319\u5b50\u306e\u9806\u756a\u3092\u66f8\u304d\u5909\u3048\u3066\u3082\u30c7\u30fc\u30bf\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u4e0d\u6574\u5408\u304c\u8d77\u3053\u308b\u3053\u3068\u306f\u306a\u3044\u3002\n\n##\u57fa\u672c\u578b\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u30de\u30c3\u30d4\u30f3\u30b0\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/38783c66-46c8-de6e-ee88-6092f367d562.jpeg)\n\n```java:Meira.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.CollectionTable;\nimport javax.persistence.Column;\nimport javax.persistence.ElementCollection;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.OrderBy;\n\n@Entity\npublic class Meira {\n    \n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    \n    @ElementCollection(fetch = FetchType.EAGER)\n    @CollectionTable(name = \"meira_list_value\")\n    @Column(name = \"value\")\n    @OrderBy(\"DESC\")\n    private List<String> list;\n\n    @Override\n    public String toString() {\n        return \"Meira{\" + \"id=\" + id + \", list=\" + list + '}';\n    }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/0c535740-1987-d02e-d04f-36a50ea20745.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/542f0220-1141-d8e6-26da-dc79b28c59fa.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/7f623d84-3d9e-f7b5-c5c0-802d4c05b917.jpeg)\n\n```sql:\nCREATE TABLE `meira` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `meira_list_value` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `meira_id` int(11) NOT NULL,\n  `value` varchar(45) DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  KEY `meira_fk_idx` (`meira_id`),\n  CONSTRAINT `meira_fk` FOREIGN KEY (`meira_id`) REFERENCES `meira` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n    Meira meira = this.em.find(Meira.class, 1L);\n    System.out.println(meira);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   Meira{id=1, list=[zzz, yyy, xxx]}\n```\n\n- `@ElementCollection` \u3067\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u578b\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3068\u3001\u305d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u57fa\u672c\u578b\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3067\u3042\u308b\u3053\u3068\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n    - \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u578b\u306e\u5bfe\u8c61\u306f\u3001 `Collection`, `Set`, `List`\u3002\n    - \u57fa\u672c\u578b\u3068\u306f\u3001\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3067\u306f\u306a\u3044\u578b\u306e\u3053\u3068\u3002\u30d7\u30ea\u30df\u30c6\u30a3\u30d6\u578b\u3001 String \u578b\u3001\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\uff08\u8a73\u7d30\u5f8c\u8ff0\uff09\u306a\u3069\u306e\u3053\u3068\u3092\u6307\u3059\u3002\n    - `fetch` \u5c5e\u6027\u306b `FetchType.EAGER` \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u5373\u6642\u30ed\u30fc\u30c9\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\uff08\u8a73\u7d30\u5f8c\u8ff0\uff09\u3002\n- `@CollectionTable` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u3001\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u5404\u8981\u7d20\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u6307\u5b9a\u3059\u308b\u3002\n    - \u7701\u7565\u3057\u305f\u5834\u5408\u306f\u3001\u300c\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d_\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\uff08`meira_list`\uff09\u300d\u3067\u89e3\u6c7a\u3055\u308c\u308b\u3002\n- `@Column` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u3001\u3069\u306e\u30ab\u30e9\u30e0\u306e\u5024\u3092\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u8981\u7d20\u3068\u3057\u3066\u53d6\u5f97\u3059\u308b\u306e\u304b\u3092\u6307\u5b9a\u3059\u308b\u3002\n    - \u7701\u7565\u3057\u305f\u5834\u5408\u306f\u3001\u300c\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\uff08`list`\uff09\u300d\u3067\u89e3\u6c7a\u3055\u308c\u308b\u3002\n- \u30bd\u30fc\u30c8\u6761\u4ef6\u3092\u6307\u5b9a\u3057\u305f\u3044\u5834\u5408\u306f\u3001 `@OrderBy` \u3067\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\n###\u7d50\u5408\u306b\u7528\u3044\u308b\u30ab\u30e9\u30e0\u540d\u306e\u89e3\u6c7a\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5834\u5408\u3001**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d_\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u30ad\u30fc\u30d7\u30ed\u30d1\u30c6\u30a3\u540d** \u3067\u89e3\u6c7a\u3055\u308c\u308b\u3002\n\u3064\u307e\u308a\u3001\u524d\u8ff0\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u5834\u5408\u306f `Meira_id` \u3067\u89e3\u6c7a\u3055\u308c\u308b\u3002\n\n`meira_list_value` \u30c6\u30fc\u30d6\u30eb\u3068 `meria` \u30c6\u30fc\u30d6\u30eb\u3068\u7d50\u5408\u3059\u308b\u3068\u304d\u306e\u30ab\u30e9\u30e0\u540d\u306f\u3001\u3061\u3087\u3046\u3069\u3053\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3068\u540c\u3058\u306b\u306a\u3063\u3066\u3044\u308b\uff08`meria_id`\uff09\u3002\n\u305d\u306e\u305f\u3081\u3001\u7279\u306b\u6307\u5b9a\u306a\u3057\u3067\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3002\n\n\u3082\u3057\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3068\u5b9f\u969b\u306e\u30ab\u30e9\u30e0\u540d\u304c\u7570\u306a\u308b\u5834\u5408\uff08\u4eee\u306b `meria_table_id` \u3068\u3057\u305f\u5834\u5408\uff09\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3002\n\n```diff:\n    @ElementCollection(fetch = FetchType.EAGER)\n-   @CollectionTable(name = \"meira_list_value\")\n+   @CollectionTable(\n+       name = \"meira_list_value\",\n+       joinColumns = @JoinColumn(name = \"meria_table_id\")    \n+   )\n    @Column(name = \"value\")\n    @OrderBy(\"DESC\")\n    private List<String> list;\n```\n\n- `@CollectionTable` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e `joinColumns` \u5c5e\u6027\u3067\u8a2d\u5b9a\u3059\u308b\u3002\n\n###\u5373\u6642\u30ed\u30fc\u30c9\u3068\u9045\u5ef6\u30ed\u30fc\u30c9\n\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304c\u4ed6\u306e\u30af\u30e9\u30b9\u3092\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\uff08`List` \u3084 `Set`\uff09\u3067\u6301\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u9045\u5ef6\u30ed\u30fc\u30c9\u304c\u9069\u7528\u3055\u308c\u308b\u3002\n\n\u9045\u5ef6\u30ed\u30fc\u30c9\u306e\u5834\u5408\u3001\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304c `EntityManager#find(Class, Object)` \u306a\u3069\u3067 DB \u304b\u3089\u30ed\u30fc\u30c9\u3055\u308c\u305f\u6642\u70b9\u3067\u306f\u3001\u307e\u3060\u305d\u306e\u9805\u76ee\u306f DB \u304b\u3089\u53d6\u5f97\u3055\u308c\u3066\u3044\u306a\u3044\u3002\n\u5024\u304c\u53d6\u5f97\u3055\u308c\u308b\u306e\u306f\u3001\u305d\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u304b\u3089\u5b9f\u969b\u306b\u5024\u3092\u53d6\u5f97\u3057\u3088\u3046\u3068\u3057\u305f\u3068\u304d\u306b\u306a\u308b\u3002\n\n\u524d\u8ff0\u306e `Meira` \u30af\u30e9\u30b9\u306b\u3001 `lazyList` \u3068\u3044\u3046\u9045\u5ef6\u30ed\u30fc\u30c9\u3059\u308b\u30ea\u30b9\u30c8\u3092\u8ffd\u52a0\u3057\u3066\u3001\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3002\n\n```diff:Meira.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.CollectionTable;\nimport javax.persistence.Column;\nimport javax.persistence.ElementCollection;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.OrderBy;\n\n@Entity\npublic class Meira {\n    \n    @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    \n    @ElementCollection(fetch = FetchType.EAGER)\n    @CollectionTable(name = \"meira_list_value\")\n    @Column(name = \"value\")\n    @OrderBy(\"DESC\")\n    private List<String> list;\n    \n+   @ElementCollection\n+   @CollectionTable(name = \"meira_list_value\")\n+   @Column(name = \"value\")\n+   public List<String> lazyList;\n\n    @Override\n    public String toString() {\n-       return \"Meira{\" + \"id=\" + id + \", list=\" + list}';\n+       return \"Meira{\" + \"id=\" + id + \", list=\" + list + \", lazyList=\" + lazyList + '}';\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```diff:MappingEjb.java\n    Meira meira = this.em.find(Meira.class, 1L);\n    System.out.println(meira);\n    \n+   for (String value : meira.lazyList) {\n+       System.out.println(value);\n+   }\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   Meira{id=1, list=[zzz, yyy, xxx], lazyList={IndirectList: not instantiated}}\n\u60c5\u5831:   xxx\n\u60c5\u5831:   yyy\n\u60c5\u5831:   zzz\n```\n\n- \u9045\u5ef6\u30ed\u30fc\u30c9\u306e\u5834\u5408\u3001 `list` \u3092\u305f\u3060 `toString()` \u3057\u305f\u3060\u3051\u3067\u306f\u3001\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u304c\u5206\u304b\u308b\u3002\n- \u3057\u304b\u3057\u3001\u62e1\u5f35 for \u6587\u306a\u3069\u3092\u4f7f\u3063\u3066 List \u304b\u3089\u5024\u3092\u53d6\u5f97\u3059\u308b\u3068\u3001\u5b9f\u969b\u306e\u5024\u304c\u53d6\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n####\u305d\u308c\u305e\u308c\u306e\u30e1\u30ea\u30c3\u30c8\u3068\u30c7\u30e1\u30ea\u30c3\u30c8\n| -          | \u30e1\u30ea\u30c3\u30c8                                   | \u30c7\u30e1\u30ea\u30c3\u30c8                                                                   |\n| :--        | :--                                        | :--                                                                          |\n| \u5373\u6642\u30ed\u30fc\u30c9 | \u691c\u7d22\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u5834\u5408\u306f\u3001\u4e88\u3081\u30ed\u30fc\u30c9\u3057\u3066\u304a\u304f\u3053\u3068\u304c\u3067\u304d\u308b\u3002                | \u7d50\u5c40\u4f7f\u7528\u3057\u306a\u304f\u3066\u3082\u8aad\u307f\u8fbc\u3093\u3067\u3057\u307e\u3046\u3002 |\n| \u9045\u5ef6\u30ed\u30fc\u30c9 | DB \u3068\u306e\u30a2\u30af\u30bb\u30b9\u3092\u5fc5\u8981\u306a\u3068\u304d\u3060\u3051\u306b\u9650\u5b9a\u3067\u304d\u308b\u3002 | \u4e88\u3081\u30ed\u30fc\u30c9\u3057\u3066\u304a\u3051\u306a\u3044\u3002                                                |\n\n\u57fa\u672c\u306f\u9045\u5ef6\u30ed\u30fc\u30c9\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\uff09\u3067\u3001\u5b9f\u969b\u306b\u52d5\u304b\u3057\u3066\u307f\u305f\u3089\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306b\u5f71\u97ff\u304c\u3042\u3063\u305f\u5834\u5408\u306f\u5373\u6642\u30ed\u30fc\u30c9\u306b\u3059\u308b\u3001\u304f\u3089\u3044\u306e\u65b9\u91dd\u3067\u3088\u3044\u304b\u3068\u3002\n\u3088\u304f\u8a00\u308f\u308c\u3066\u3044\u308b\u304c\u3001\u52d5\u304b\u3057\u3066\u3082\u306a\u3044\u306e\u306b\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u6c17\u306b\u3057\u3066\u7121\u99c4\u306b\u8a2d\u5b9a\u3084\u30e2\u30c7\u30eb\u3092\u3044\u3058\u304f\u308a\u307e\u308f\u3057\u3066\u3057\u307e\u3046\u3001\u3068\u3044\u3046\u306e\u306f\u907f\u3051\u305f\u65b9\u304c\u3044\u3044\u3002\n\n\u307e\u305f\u3001 JPA 2.1 (Java EE 7) \u3067\u306f\u3001 Entity Graph \u3068\u3044\u3046\u4ed5\u7d44\u307f\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3002\u3053\u308c\u3092\u5229\u7528\u3059\u308b\u3068\u3001\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u9593\u306e\u95a2\u9023\u3092\u3069\u3053\u307e\u3067\u6398\u308a\u4e0b\u3052\u3066\u4e00\u5ea6\u306b\u8aad\u307f\u8fbc\u3080\u304b\u306a\u3069\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\uff08\u8a73\u7d30\u5f8c\u8ff0\uff09\u3002\n\n###\u30bd\u30fc\u30c8\u7528\u306e\u30ab\u30e9\u30e0\u3092\u4f7f\u7528\u3059\u308b\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/ca6f56df-9ff8-658d-e315-ca2a62c1ab83.jpeg)\n\n```java:Shinki.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.Column;\nimport javax.persistence.ElementCollection;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.Id;\nimport javax.persistence.OrderColumn;\n\n@Entity\npublic class Shinki {\n    @Id\n    private Long id;\n    \n    @ElementCollection(fetch = FetchType.EAGER)\n    @Column(name = \"value\")\n    @OrderColumn(name = \"order\")\n    private List<String> list;\n\n    @Override\n    public String toString() {\n        return \"Shinki{\" + \"id=\" + id + \", list=\" + list + '}';\n    }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/459612ed-5747-5aac-7aa1-395d94da3aec.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/283a5a45-a92f-8724-dca9-205baaced33c.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/c9b780f7-0252-71b2-075f-1b64dda9e050.jpeg)\n\n```sql:\nCREATE TABLE `shinki` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `shinki_list` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `shinki_id` int(11) NOT NULL,\n  `order` int(11) NOT NULL,\n  `value` varchar(45) DEFAULT NULL,\n  PRIMARY KEY (`id`),\n  KEY `shinki_list_fk_idx` (`shinki_id`),\n  CONSTRAINT `shinki_list_fk` FOREIGN KEY (`shinki_id`) REFERENCES `shinki` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n Shinki shinki = this.em.find(Shinki.class, 1L);\n System.out.println(shinki);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: Shinki{id=1, list={[piyo, fuga, hoge]}}\n```\n\n- `@OrderColumn` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u30bd\u30fc\u30c8\u306e\u30ad\u30fc\u3068\u306a\u308b\u30ab\u30e9\u30e0\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n##Map \u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/c308bb1e-4c8a-0a13-787b-9e66bd3cd744.jpeg)\n\n```java:Eren.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.Map;\nimport javax.persistence.CollectionTable;\nimport javax.persistence.Column;\nimport javax.persistence.ElementCollection;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.MapKeyColumn;\n\n@Entity\npublic class Eren {\n\n @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n private Long id;\n\n @ElementCollection(fetch = FetchType.EAGER)\n @CollectionTable(name = \"eren_map_value\")\n @MapKeyColumn(name = \"key\")\n @Column(name = \"value\")\n private Map<String, String> map;\n\n @Override\n public String toString() {\n return \"Eren{\" + \"id=\" + id + \", map=\" + map + '}';\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/a457c5da-96c1-b617-1308-800cb89f2bd8.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/d1388e02-c08a-74da-6402-83fc093ca8f8.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/9db10dfb-cf34-2c25-837f-5ac65e2e0967.jpeg)\n\n```sql:\nCREATE TABLE `eren` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nCREATE TABLE `eren_map_value` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `eren_id` int(11) NOT NULL,\n `key` varchar(45) NOT NULL,\n `value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`),\n KEY `eren_map_velu_fk_idx` (`eren_id`),\n CONSTRAINT `eren_map_velu_fk` FOREIGN KEY (`eren_id`) REFERENCES `eren` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n Eren eren = this.em.find(Eren.class, 1L);\n\n System.out.println(eren);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\n\u60c5\u5831: Eren{id=1, map={fuga=FUGA, piyo=PIYO, hoge=HOGE}}\n```\n\n- `@MapKeyColumn` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001 `Map` \u306e\u30ad\u30fc\u30d0\u30ea\u30e5\u30fc\u3068 DB \u306e\u5024\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n- `@MapKeyColumn` \u306e `name` \u306b\u306f\u3001 `Map` \u306e\u30ad\u30fc\u3068\u306a\u308b\u5024\u3092\u6301\u3064\u30ab\u30e9\u30e0\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002\n- \u305d\u308c\u4ee5\u5916\u306f\u3001\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u306e\u3068\u304d\u3068\u540c\u3058\u8981\u9818\u3067\u8a2d\u5b9a\u3059\u308b\u3002\n- `String` \u4ee5\u5916\u306b\u3082\u3001\u4ed6\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306a\u3069\u3092\u30ad\u30fc\u3084\u30d0\u30ea\u30e5\u30fc\u306b\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\n##\u975e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30af\u30e9\u30b9\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/cbdc4d33-e186-2c47-62f4-f13411cb4564.jpeg)\n\n```java:Kotohime.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Embedded;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class Kotohime {\n\n @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n private Long id;\n private String value;\n @Embedded\n private EmbeddedKotohime embeddedKotohime;\n\n @Override\n public String toString() {\n return \"Kotohime{\" + \"id=\" + id + \", value=\" + value + \", embeddedKotohime=\" + embeddedKotohime + '}';\n }\n}\n```\n\n```java:EmbeddedKotohime.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Column;\nimport javax.persistence.Embeddable;\n\n@Embeddable\npublic class EmbeddedKotohime {\n\n @Column(name = \"embedded_value\")\n private String embeddedValue;\n\n @Override\n public String toString() {\n return \"EmbeddedKotohime{\" + \"embeddedValue=\" + embeddedValue + '}';\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/83e38292-92af-7abd-03d8-88d4915ce33b.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/d7460101-e072-9b3c-c1d8-1e79dc39f63d.jpeg)\n\n```sql:\nCREATE TABLE `kotohime` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `value` varchar(45) DEFAULT NULL,\n `embedded_value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n Kotohime kotohime = this.em.find(Kotohime.class, 1L);\n\n System.out.println(kotohime);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\n\u60c5\u5831: Kotohime{id=1, value=hoge, embeddedKotohime=EmbeddedKotohime{embeddedValue=HOGE}}\n```\n\n- `@Embeddable` \u3067\u30af\u30e9\u30b9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u975e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u30af\u30e9\u30b9\u3092\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n- `@Embeddable` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30af\u30e9\u30b9\u3092\u3001 **\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9** \u3068\u547c\u3076\u3002\n- \u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\u306f ID \u3092\u6301\u305f\u306a\u3044 = \u8b58\u5225\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\u3001\u3059\u306a\u308f\u3061 DDD \u306e ValueObject \u306b\u8a72\u5f53\u3059\u308b\u3002\n- \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u5074\u3067\u306f\u3001 `@Embedded` \u3092\u4f7f\u3063\u3066\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\u3067\u3042\u308b\u3053\u3068\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n###\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\u306e List \u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/54bf64fc-baa1-c267-8fed-3450e03206b9.jpeg)\n\n```java:KanaAnaberaru.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.CollectionTable;\nimport javax.persistence.ElementCollection;\nimport javax.persistence.Embedded;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"kana_anaberaru\")\npublic class KanaAnaberaru {\n @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n private Long id;\n\n @Embedded\n @ElementCollection(fetch = FetchType.EAGER)\n @CollectionTable(\n name = \"kana_anaberaru_list_value\",\n joinColumns = @JoinColumn(name = \"kana_anaberaru_id\")\n )\n private List<EmbeddedKanaAnaberaru> embeddedKanaAnaberaruList;\n\n @Override\n public String toString() {\n return \"KanaAnaberaru{\" + \"id=\" + id + \", embeddedKanaAnaberaruList=\" + embeddedKanaAnaberaruList + '}';\n }\n}\n```\n\n```java:EmbeddedKanaAnaberaru.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Column;\nimport javax.persistence.Embeddable;\n\n@Embeddable\npublic class EmbeddedKanaAnaberaru {\n @Column(name = \"embedded_value\")\n private String embeddedValue;\n\n @Override\n public String toString() {\n return \"EmbeddedKanaAnaberaru{\" + \"embeddedValue=\" + embeddedValue + '}';\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30fc\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/5c24b1dc-9924-9f53-8e11-1af5aade9730.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/e2790973-9819-50a0-4244-1a013950de31.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/f0ff3ecd-b383-f1d7-559b-d2c2b0b89f80.jpeg)\n\n```sql:\nCREATE TABLE `kana_anaberaru` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `kana_anaberaru_list_value` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `kana_anaberaru_id` int(11) NOT NULL,\n `embedded_value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`),\n KEY `kana_anaberaru_list_value_fk_idx` (`kana_anaberaru_id`),\n CONSTRAINT `kana_anaberaru_list_value_fk` FOREIGN KEY (`kana_anaberaru_id`) REFERENCES `kana_anaberaru` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;\n```\n\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n KanaAnaberaru kotohime = this.em.find(KanaAnaberaru.class, 1L);\n\n System.out.println(kotohime);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: KanaAnaberaru{id=1, embeddedKanaAnaberaruList=[EmbeddedKanaAnaberaru{embeddedValue=hoge}, EmbeddedKanaAnaberaru{embeddedValue=fuga}, EmbeddedKanaAnaberaru{embeddedValue=piyo}]}\n```\n\n- `@Embedded` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u8ffd\u52a0\u3059\u308c\u3070\u3001\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\u3092 List \u3067\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n###\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\u3092 Map \u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/23d0d75c-6361-a860-976d-eaf1ec2bc826.jpeg)\n\n```java:AsakuraRikako.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.Map;\nimport javax.persistence.CollectionTable;\nimport javax.persistence.ElementCollection;\nimport javax.persistence.Embedded;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"asakura_rikako\")\npublic class AsakuraRikako {\n\n @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n private Long id;\n\n @Embedded\n @ElementCollection(fetch = FetchType.EAGER)\n @CollectionTable(\n name = \"asakura_rikako_map_values\",\n joinColumns = @JoinColumn(name = \"asakura_rikako_id\")\n )\n private Map<AsakuraRikakoKey, AsakuraRikakoValue> map;\n\n @Override\n public String toString() {\n return \"AsakuraRikako{\" + \"id=\" + id + \", map=\" + map + '}';\n }\n}\n```\n\n```java:AsakuraRikakoKey.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.Objects;\nimport javax.persistence.Column;\nimport javax.persistence.Embeddable;\n\n@Embeddable\npublic class AsakuraRikakoKey {\n @Column(name = \"embedded_key\")\n private String key;\n\n @Override\n public String toString() {\n return \"AsakuraRikakoKey{\" + \"key=\" + key + '}';\n }\n\n @Override\n public int hashCode() {\n // NetBeans \u3067\u81ea\u52d5\u751f\u6210\n }\n\n @Override\n public boolean equals(Object obj) {\n // NetBeans \u3067\u81ea\u52d5\u751f\u6210\n }\n}\n```\n\n```java:AsakuraRikakoValue.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Column;\nimport javax.persistence.Embeddable;\n\n@Embeddable\npublic class AsakuraRikakoValue {\n @Column(name = \"embedded_value\")\n private String value;\n\n @Override\n public String toString() {\n return \"AsakuraRikakoValue{\" + \"value=\" + value + '}';\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/fbde618b-069e-6ed0-dfae-b454290ebe1f.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/ea58482e-b783-48c5-305e-2ab1c28a5df5.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/f62df319-612b-5cea-ffcf-8ec67bb658a3.jpeg)\n\n```sql:\nCREATE TABLE `asakura_rikako` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `asakura_rikako_map_values` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `asakura_rikako_id` int(11) NOT NULL,\n `embedded_key` varchar(45) NOT NULL,\n `embedded_value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`),\n KEY `asakura_rikako_map_values_fk_idx` (`asakura_rikako_id`),\n CONSTRAINT `asakura_rikako_map_values_fk` FOREIGN KEY (`asakura_rikako_id`) REFERENCES `asakura_rikako` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n AsakuraRikako asakuraRikako = this.em.find(AsakuraRikako.class, 1L);\n\n System.out.println(asakuraRikako);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: AsakuraRikako{id=1, map={AsakuraRikakoKey{key=fuga}=AsakuraRikakoValue{value=FUGA}, AsakuraRikakoKey{key=piyo}=AsakuraRikakoValue{value=PIYO}, AsakuraRikakoKey{key=hoge}=AsakuraRikakoValue{value=HOGE}}}\n```\n\n- `@Embedded` \u3092\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u3001\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\u3092 Map \u306e\u30ad\u30fc\u3084\u30d0\u30ea\u30e5\u30fc\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n##Lob \u30ab\u30e9\u30e0\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/11952110-db93-1983-3091-e6705aa8d9d5.jpeg)\n\n```java:PatchouliKnowledge.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Lob;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"patchouli_knowledge\")\npublic class PatchouliKnowledge {\n @Id\n private Long id;\n @Lob\n @Column(name = \"blob_value\")\n private byte[] blobValue;\n @Lob\n @Column(name = \"clob_value\")\n private String clobValue;\n\n public void setBlobValue(byte[] blobValue) {\n this.blobValue = blobValue;\n }\n\n public void setClobValue(String clobValue) {\n this.clobValue = clobValue;\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/55b01f1e-a0e7-6bab-1e6c-424accb7063e.jpeg)\n\n```sql:\nCREATE TABLE `patchouli_knowledge` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `blob_value` blob,\n `clob_value` longtext,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n PatchouliKnowledge patchouliKnowledge = new PatchouliKnowledge();\n patchouliKnowledge.setBlobValue(\"blob text\".getBytes(Charset.forName(\"UTF-8\")));\n patchouliKnowledge.setClobValue(\"clob text\");\n\n this.em.persist(patchouliKnowledge);\n```\n\n\u5b9f\u884c\u5f8c\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u69d8\u5b50\u3002\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/a634200e-dd34-ea5f-fcc9-6dc2e21d3bb4.jpeg)\n\n- `@Lob` \u3067\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3068\u3001 LOB \u578b\u306e\u30c7\u30fc\u30bf\u3068\u3057\u3066\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u304d\u308b\u3002\n- BLOB \u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u308b\u304b\u3001 CLOB \u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u308b\u304b\u306f\u3001\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u578b\u306b\u3088\u3063\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u6c7a\u5b9a\u3055\u308c\u308b\u3002\n - `byte[]`\u3001 `Byte[]`\u3001 `Serializable` \u306e\u5834\u5408\u306f BLOB\u3002\n - `char[]`\u3001 `Character[]`\u3001 `String` \u306e\u5834\u5408\u306f CLOB\u3002\n\n#\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u30de\u30c3\u30d4\u30f3\u30b0\n\u8907\u6570\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304c\u95a2\u9023\u3092\u6301\u3064\u5834\u5408\u306e\u3001 DB \u3068\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u65b9\u6cd5\u306b\u3064\u3044\u3066\u3002\n\n##\uff11\u5bfe\uff11\n###\u5358\u65b9\u5411\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/f494d44e-bae3-b24f-3d4a-15f9c30236f1.jpeg)\n\n```java:KitashirakawaChiyuri.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"kitashirakawa_chiyuri\")\npublic class KitashirakawaChiyuri {\n @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n private Long id;\n @JoinColumn(name = \"okazaki_yumemi_id\")\n private OkazakiYumemi okazakiYumemi;\n\n @Override\n public String toString() {\n return \"KitashirakawaChiyuri{\" + \"id=\" + id + \", okazakiYumemi=\" + okazakiYumemi + '}';\n }\n}\n```\n\n```java:OkazakiYumemi.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"okazaki_yumemi\")\npublic class OkazakiYumemi {\n @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n private Long id;\n\n @Override\n public String toString() {\n return \"OkazakiYumemi{\" + \"id=\" + id + '}';\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/828b5e1c-93ab-01c1-2d1f-4e515e47680e.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/7c5243d7-6604-fcd7-1aeb-31ff54c6d8b8.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/516711ce-227d-99cc-0589-7e5580267ed2.jpeg)\n\n```sql:\nCREATE TABLE `kitashirakawa_chiyuri` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `okazaki_yumemi_id` int(11) NOT NULL,\n PRIMARY KEY (`id`),\n KEY `kitashirakawa_chiyuri_fk_idx` (`okazaki_yumemi_id`),\n CONSTRAINT `kitashirakawa_chiyuri_fk` FOREIGN KEY (`okazaki_yumemi_id`) REFERENCES `okazaki_yumemi` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `okazaki_yumemi` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n KitashirakawaChiyuri kitashirakawaChiyuri = this.em.find(KitashirakawaChiyuri.class, 1L);\n\n System.out.println(kitashirakawaChiyuri);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: KitashirakawaChiyuri{id=1, okazakiYumemi=OkazakiYumemi{id=1}}\n```\n\n- \u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u9593\u306e\u591a\u91cd\u5ea6\u304c\uff11\u5bfe\uff11\u3067\u3001\u95a2\u9023\u306e\u5411\u304d\u304c\u5358\u65b9\u5411\u306e\u5834\u5408\u306f\u3001\u7279\u306b\u4f55\u3082\u6307\u5b9a\u3059\u308b\u3053\u3068\u306a\u304f\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n- \u305f\u3060\u3057\u3001\u7d50\u5408\u306b\u7528\u3044\u3089\u308c\u308b\u30ab\u30e9\u30e0\u540d\u304c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f **\u30d5\u30a3\u30fc\u30eb\u30c9\u540d_\u76f8\u624b\u306e\u30ad\u30fc\u30ab\u30e9\u30e0\u540d** \u3067\u89e3\u6c7a\u3055\u308c\u308b\uff08`okazakiYumemi_id`\uff09\u306e\u3067\u3001 `@JoinColumn` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u7d50\u5408\u306b\u7528\u3044\u308b\u30ab\u30e9\u30e0\u540d\u3092\u660e\u793a\u3057\u3066\u3044\u308b\u3002\n- \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d5\u30a7\u30c3\u30c1\u65b9\u6cd5\u306f `EAGER` \u306b\u306a\u308b\u3002\u3053\u308c\u3092\u5909\u66f4\u3057\u305f\u3044\u5834\u5408\u306f\u3001 `@OneToOne(fetch = FetchType.LAZY)` \u306e\u6307\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n###\u53cc\u65b9\u5411\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/4170a1e9-f0c5-d9b8-8bfd-2f3f74744acb.jpeg)\n\n```java:Orange.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\n@Entity\npublic class Orange {\n @Id\n private Long id;\n\n private Kurumi kurumi;\n\n public Long getId() {\n return id;\n }\n\n @Override\n public String toString() {\n return \"Orange{\" + \"id=\" + id + \", kurumi.id=\" + kurumi.getId() + '}';\n }\n}\n```\n\n```java:Kurumi.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.OneToOne;\n\n@Entity\npublic class Kurumi {\n @Id\n private Long id;\n\n @OneToOne(mappedBy = \"kurumi\")\n private Orange orange;\n\n public Long getId() {\n return id;\n }\n\n @Override\n public String toString() {\n return \"Kurumi{\" + \"id=\" + id + \", orange.id=\" + orange.getId() + '}';\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/007ac854-e51c-5f81-bc5d-0ecaf80506b8.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/1f5dd404-f99c-560b-f709-43b2cb1c65b4.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/681b25c6-29a7-5b6f-abf4-3ad0871da96c.jpeg)\n\n```sql:\nCREATE TABLE `kurumi` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `orange` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `kurumi_id` int(11) NOT NULL,\n PRIMARY KEY (`id`),\n KEY `orange_fk_idx` (`kurumi_id`),\n CONSTRAINT `orange_fk` FOREIGN KEY (`kurumi_id`) REFERENCES `kurumi` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n Orange orange = this.em.find(Orange.class, 1L);\n System.out.println(orange);\n\n Kurumi kurumi = this.em.find(Kurumi.class, 2L);\n System.out.println(kurumi);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: Orange{id=1, kurumi.id=1}\n\u60c5\u5831: Kurumi{id=2, orange.id=2}\n```\n\n- DB \u306e\u30c6\u30fc\u30d6\u30eb\u4e0a\u3067\u3001\u95a2\u9023\u3059\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306e\u30ab\u30e9\u30e0\u3092\u6301\u3063\u3066\u3044\u308b\u65b9\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092 **\u6240\u6709\u8005** \u3068\u547c\u3076\u3002\n - \u3082\u3057\u304f\u306f\u3001\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 A \u304c\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3 B \u306e\u53c2\u7167\u3092\u6301\u3063\u3066\u3044\u308b\u5834\u5408\u3001 A \u3092\u6240\u6709\u8005\u3068\u547c\u3076\u3002\n- \u9006\u5074\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u3001 **\u88ab\u6240\u6709\u8005** \u3068\u547c\u3076\u3002\n - \u4e0a\u8a18\u4f8b\u3067\u3044\u3046\u3068\u3001 `Orange` \u304c\u6240\u6709\u8005\u3067\u3001 `Kurumi` \u304c\u88ab\u6240\u6709\u8005\u3068\u306a\u308b\u3002\n- \u3057\u304b\u3057\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304c\u76f8\u4e92\u53c2\u7167\u3057\u3066\u3044\u308b\u3068\u3001\u305d\u308c\u3060\u3051\u3067\u306f\u3069\u3061\u3089\u304c\u6240\u6709\u8005\u3067\u3069\u3061\u3089\u304c\u88ab\u6240\u6709\u8005\u306a\u306e\u304b\u5224\u65ad\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3002\n- \u305d\u3053\u3067\u3001 `Kurumi` \u304c\u88ab\u6240\u6709\u8005\u3067\u3042\u308b\u3053\u3068\u3092\u660e\u793a\u3059\u308b\u305f\u3081\u306b\u3001 `@OneToOne` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e `mappedBy` \u5c5e\u6027\u3092\u4f7f\u7528\u3059\u308b\u3002\n - `mappedBy` \u306b\u306f\u3001\u6240\u6709\u8005\u304c\u6301\u3063\u3066\u3044\u308b\u88ab\u6240\u6709\u8005\u3092\u6307\u3059\u30d7\u30ed\u30d1\u30c6\u30a3\u540d\u3092\u6307\u5b9a\u3059\u308b\uff08\u4e0a\u8a18\u4f8b\u306e\u5834\u5408\u306f\u3001 `kurumi`\uff09\u3002\n\n~~\u305d\u3082\u305d\u3082\u76f8\u4e92\u53c2\u7167\u3059\u308b\u3088\u3046\u306a\u30af\u30e9\u30b9\u8a2d\u8a08\u306f\u30c0\u30e1\u3058\u3083\u306d\uff1f~~\n\n##\uff11\u5bfe\u591a\n###\u5358\u65b9\u5411\n####\u7d50\u5408\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u7528\u3059\u308b\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/f1620846-4d6c-26e2-0186-66270d43a427.jpeg)\n\n```java:Elliy.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.JoinTable;\nimport javax.persistence.OneToMany;\n\n@Entity\npublic class Elliy {\n @Id\n private Long id;\n\n @OneToMany(fetch = FetchType.EAGER)\n @JoinTable(inverseJoinColumns = @JoinColumn(name = \"yuuka_id\"))\n private List<Yuuka> yuukaList;\n\n @Override\n public String toString() {\n return \"Elliy{\" + \"id=\" + id + \", yuukaList=\" + yuukaList + '}';\n }\n}\n```\n\n```java:Yuuka.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\n@Entity\npublic class Yuuka {\n @Id\n private Long id;\n\n @Override\n public String toString() {\n return \"Yuuka{\" + \"id=\" + id + '}';\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/26222dad-4b2b-fb65-7aa8-9a3f9992cd34.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/a24d8b3e-c51c-8475-9c62-3c2f3fdf6f21.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/241c8520-f20f-3169-34b8-f03c12aff878.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/81dacee1-d569-43e8-5617-42ba512ff67e.jpeg)\n\n```sql:\nCREATE TABLE `elliy` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `yuuka` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `elliy_yuuka` (\n `elliy_id` int(11) NOT NULL,\n `yuuka_id` int(11) NOT NULL,\n PRIMARY KEY (`elliy_id`,`yuuka_id`),\n KEY `elliy_yuuka_fk1_idx` (`elliy_id`),\n KEY `elliy_yuuka_fk2_idx` (`yuuka_id`),\n CONSTRAINT `elliy_yuuka_fk1` FOREIGN KEY (`elliy_id`) REFERENCES `elliy` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,\n CONSTRAINT `elliy_yuuka_fk2` FOREIGN KEY (`yuuka_id`) REFERENCES `yuuka` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n Elliy elliy = this.em.find(Elliy.class, 1L);\n System.out.println(elliy);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: Elliy{id=1, yuukaList=[Yuuka{id=1}, Yuuka{id=2}, Yuuka{id=3}, Yuuka{id=4}]}\n```\n\n- \u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u3063\u3066\uff11\u5bfe\u591a\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u30b1\u30fc\u30b9\u3002\n- \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30c6\u30fc\u30d6\u30eb\u540d\u3084\u30ab\u30e9\u30e0\u540d\u304c\u89e3\u6c7a\u3055\u308c\u308b\u3002\n\n| \u5bfe\u8c61 | \u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3067\u89e3\u6c7a\u3055\u308c\u305f\u5834\u5408 | \u4f8b |\n| :-- | :-- | :-- |\n| \u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u540d | \u6240\u6709\u8005\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d_\u88ab\u6240\u6709\u8005\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d | `Elliy_Yuuka` |\n| \u6240\u6709\u8005\u3092\u7d50\u5408\u3059\u308b\u305f\u3081\u306e\u30ab\u30e9\u30e0\u540d | \u6240\u6709\u8005\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d_ID\u9805\u76ee\u540d | `Elliy_id` |\n| \u88ab\u6240\u6709\u8005\u3092\u7d50\u5408\u3059\u308b\u305f\u3081\u306e\u30ab\u30e9\u30e0\u540d | \u30d7\u30ed\u30d1\u30c6\u30a3\u540d_ID\u9805\u76ee\u540d | `yuukaList_id` |\n\n- \u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e\u540d\u524d\u3068\u6240\u6709\u8005\u5074\u3092\u7d50\u5408\u3059\u308b\u305f\u3081\u306e\u30ab\u30e9\u30e0\u540d\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u3067\u3082\u554f\u984c\u306a\u3044\u3002\n- \u3057\u304b\u3057\u3001\u88ab\u6240\u6709\u8005\u5074\u3092\u7d50\u5408\u3059\u308b\u305f\u3081\u306e\u30ab\u30e9\u30e0\u540d\u304c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u3060\u3068\u554f\u984c\u304c\u3042\u308b\u3002\n- \u305d\u3053\u3067\u3001 `@JoinTable` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e `inverseJoinColumns` \u5c5e\u6027\u3092\u4f7f\u3063\u3066\u30ab\u30e9\u30e0\u540d\u3092\u660e\u793a\u7684\u306b\u6307\u5b9a\u3057\u3066\u3044\u308b\u3002\n- \u4eca\u56de\u306f\u5fc5\u8981\u306a\u304b\u3063\u305f\u304c\u3001\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u540d\u3084\u6240\u6709\u8005\u3092\u7d50\u5408\u3059\u308b\u305f\u3081\u306e\u30ab\u30e9\u30e0\u540d\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n\n```java:\n @JoinTable(\n name = \"relation_table_name\",\n joinColumns = @JoinColumn(name = \"join_column\")\n )\n private List<Yuuka> yuukaList;\n```\n\n- `name` \u5c5e\u6027\u3067\u3001\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u306e\u540d\u524d\u3092\u6307\u5b9a\u3059\u308b\u3002\n- `joinColumns` \u5c5e\u6027\u3067\u3001\u6240\u6709\u8005\u5074\u3092\u7d50\u5408\u3059\u308b\u305f\u3081\u306e\u30ab\u30e9\u30e0\u540d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n####\u7d50\u5408\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u7528\u3057\u306a\u3044\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/e9b3b083-8139-1f1c-b3e9-4a2916884ca0.jpeg)\n\n```java:Mugetsu.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.OneToMany;\n\n@Entity\npublic class Mugetsu {\n @Id\n private Long id;\n\n @OneToMany(fetch = FetchType.EAGER)\n @JoinColumn(name = \"mugetsu_id\")\n private List<Gengetsu> gengetsuList;\n\n @Override\n public String toString() {\n return \"Mugetsu{\" + \"id=\" + id + \", gengetsuList=\" + gengetsuList + '}';\n }\n}\n```\n\n```java:Gengetsu.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\n@Entity\npublic class Gengetsu {\n @Id\n private Long id;\n\n @Override\n public String toString() {\n return \"Gengetsu{\" + \"id=\" + id + '}';\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/6b5aa59a-abad-1245-f5b2-d9ff74ffc42d.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/852662cb-ac17-6a91-0ede-19a70f2b6730.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/c211f75d-80f5-59a6-d21b-b3dfec66ed26.jpeg)\n\n```sql:\nCREATE TABLE `mugetsu` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `gengetsu` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `mugetsu_id` int(11) NOT NULL,\n PRIMARY KEY (`id`),\n KEY `gengetsu_fk_idx` (`mugetsu_id`),\n CONSTRAINT `gengetsu_fk` FOREIGN KEY (`mugetsu_id`) REFERENCES `mugetsu` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n Mugetsu mugetsu = this.em.find(Mugetsu.class, 1L);\n System.out.println(mugetsu);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: Mugetsu{id=1, gengetsuList=[Gengetsu{id=1}, Gengetsu{id=2}, Gengetsu{id=3}]}\n```\n\n- \u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u308f\u306a\u3044\u5358\u7d14\u306a\u30b1\u30fc\u30b9\u3002\n- \uff11\u5bfe\u591a\u306e\u95a2\u9023\u3092\u89e3\u6c7a\u3059\u308b\u5834\u5408\u3001 JPA \u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u3063\u305f\u65b9\u6cd5\u3092\u60f3\u5b9a\u3057\u3066\u95a2\u9023\u306e\u89e3\u6c7a\u3092\u884c\u304a\u3046\u3068\u3059\u308b\u3002\n- \u305d\u3046\u3067\u306f\u306a\u304f\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306b\u5358\u7d14\u306a\u65b9\u6cd5\u3067\uff11\u5bfe\u591a\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u6240\u6709\u8005\u5074\u306b `@JoinColumn` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n - \u7d50\u5408\u6761\u4ef6\u3068\u306a\u308b\u30ab\u30e9\u30e0\u306e\u540d\u524d\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068 `\u30d7\u30ed\u30d1\u30c6\u30a3\u540d_ID\u30ab\u30e9\u30e0\u540d` \u3067\u89e3\u6c7a\u3055\u308c\u308b\uff08\u4e0a\u8ff0\u306e\u4f8b\u306e\u5834\u5408\u306f `gengetsuList_id`\uff09\u3002\n - \u3053\u308c\u3092\u4e0a\u66f8\u304d\u3059\u308b\u5834\u5408\u306f\u3001 `name` \u5c5e\u6027\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n###\u53cc\u65b9\u5411\n####\u7d50\u5408\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u7528\u3059\u308b\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/b98f0f6b-bcde-a126-512b-2562c8b344ca.jpeg)\n\n```java:Sara.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.JoinTable;\nimport javax.persistence.OneToMany;\n\n@Entity\npublic class Sara {\n @Id\n private Long id;\n\n @OneToMany(fetch = FetchType.EAGER)\n @JoinTable(\n inverseJoinColumns = @JoinColumn(name = \"luize_id\")\n )\n private List<Luize> luizeList;\n\n public Long getId() {\n return id;\n }\n\n @Override\n public String toString() {\n return \"Sara{\" + \"id=\" + id + \", luizeList=\" + luizeList + '}';\n }\n}\n```\n\n```java:Luize.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.JoinTable;\n\n@Entity\npublic class Luize {\n @Id\n private Long id;\n\n @JoinTable(name=\"sara_luize\")\n private Sara sara;\n\n @Override\n public String toString() {\n return \"Luize{\" + \"id=\" + id + \", sara.id=\" + sara.getId() + '}';\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/5a152c5c-c00b-e07d-4351-44eecb8f9183.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/6160b027-4b1b-f596-3485-ecffaa61f0c8.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/ec8b755e-7515-727c-220f-59377356f63d.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/832fcdfe-7151-0716-72a6-7f5cf0fa1381.jpeg)\n\n```sql:\nCREATE TABLE `sara` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `luize` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `sara_luize` (\n `sara_id` int(11) NOT NULL,\n `luize_id` int(11) NOT NULL,\n PRIMARY KEY (`sara_id`,`luize_id`),\n KEY `sara_luize_fk1_idx` (`sara_id`),\n KEY `sara_luize_fk2_idx` (`luize_id`),\n CONSTRAINT `sara_luize_fk1` FOREIGN KEY (`sara_id`) REFERENCES `sara` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,\n CONSTRAINT `sara_luize_fk2` FOREIGN KEY (`luize_id`) REFERENCES `luize` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n Sara sara = this.em.find(Sara.class, 1L);\n System.out.println(sara);\n\n Luize luize = this.em.find(Luize.class, 1L);\n System.out.println(luize);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: Sara{id=1, luizeList=[Luize{id=1, sara.id=1}, Luize{id=2, sara.id=1}, Luize{id=3, sara.id=1}]}\n\u60c5\u5831: Luize{id=1, sara.id=1}\n```\n\n- \u591a\u306e\u65b9\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\uff08`Luize` \u30af\u30e9\u30b9\uff09\u304c\u6301\u3064\u30d5\u30a3\u30fc\u30eb\u30c9\uff08`sara`\uff09\u3092\u3001 `@JoinTable` \u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3066\u30c6\u30fc\u30d6\u30eb\u540d\u3092\u660e\u793a\u3059\u308b\u3002\n- \u3053\u308c\u3092\u3057\u306a\u3044\u3068\u3001\u95a2\u9023\u30c6\u30fc\u30d6\u30eb\u304c `luize_sara` \u3067\u89e3\u6c7a\u3055\u308c\u3066\u3057\u307e\u3046\u3002\n- `Luize` \u30af\u30e9\u30b9\u306e `sara` \u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u30d5\u30a7\u30c3\u30c1\u3092\u5909\u66f4\u3057\u305f\u3044\u5834\u5408\u306f\u3001 `@ManyToOne` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\u3002\n\n####\u7d50\u5408\u30c6\u30fc\u30d6\u30eb\u3092\u4f7f\u7528\u3057\u306a\u3044\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/18e6f0c0-dd7d-bf89-5a3c-1ed1f844df03.jpeg)\n\n\n```java:Yuki.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.OneToMany;\n\n@Entity\npublic class Yuki {\n @Id\n private Long id;\n\n @OneToMany(fetch = FetchType.EAGER)\n @JoinColumn(name = \"yuki_id\")\n private List<Mai> maiList;\n\n public Long getId() {\n return id;\n }\n\n @Override\n public String toString() {\n return \"Yuki{\" + \"id=\" + id + \", maiList=\" + maiList + '}';\n }\n}\n```\n\n```java:Mai.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\n@Entity\npublic class Mai {\n @Id\n private Long id;\n\n private Yuki yuki;\n\n @Override\n public String toString() {\n return \"Mai{\" + \"id=\" + id + \", yuki.id=\" + yuki.getId() + '}';\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/88a62b75-5b30-7db6-0671-f6bd962260e2.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/e3f81b0b-1e37-f2a9-2606-112aad7f8a7c.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/447a7b62-77a4-abdf-840a-30898489a849.jpeg)\n\n```sql:\nCREATE TABLE `yuki` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `mai` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `yuki_id` int(11) NOT NULL,\n PRIMARY KEY (`id`),\n KEY `mai_fk_idx` (`yuki_id`),\n CONSTRAINT `mai_fk` FOREIGN KEY (`yuki_id`) REFERENCES `yuki` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n Yuki yuki = this.em.find(Yuki.class, 1L);\n System.out.println(yuki);\n\n Mai mai = this.em.find(Mai.class, 1L);\n System.out.println(mai);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: Yuki{id=1, maiList=[Mai{id=1, yuki.id=1}, Mai{id=2, yuki.id=1}, Mai{id=3, yuki.id=1}]}\n\u60c5\u5831: Mai{id=1, yuki.id=1}\n```\n\n- \u591a\uff08`Mai`\uff09\u304b\u3089\uff11\uff08`Yuki`\uff09\u5074\u3092\u7d50\u5408\u3059\u308b\u3068\u304d\u306e\u30ab\u30e9\u30e0\u540d\u306f\u3001\uff11\u5bfe\uff11\u306e\u3068\u304d\u3068\u540c\u3058\u65b9\u6cd5\u3067\u89e3\u6c7a\u3055\u308c\u308b\u3002\n- \u660e\u793a\u3057\u305f\u3044\u5834\u5408\u306f\u3001 `@JoinColumn` \u3092\u4f7f\u3046\u3002\n\n##\u591a\u5bfe\u591a\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/7d24dcca-d4c9-b0e5-fa6f-51645d85a8d2.jpeg)\n\n```java:Alice.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.JoinTable;\nimport javax.persistence.ManyToMany;\n\n@Entity\npublic class Alice {\n @Id\n private Long id;\n\n @ManyToMany(fetch = FetchType.EAGER)\n @JoinTable(\n joinColumns = @JoinColumn(name = \"alice_id\"),\n inverseJoinColumns = @JoinColumn(name = \"yumeko_id\")\n )\n private List<Yumeko> yumekoList;\n\n public Long getId() {\n return id;\n }\n\n @Override\n public String toString() {\n List<String> ids = new ArrayList<>();\n\n for (Yumeko yumeko : this.yumekoList) {\n ids.add(String.valueOf(yumeko.getId()));\n }\n\n return \"Alice{\" + \"id=\" + id + \", yumekoList=\" + String.join(\", \", ids) + '}';\n }\n}\n```\n\n```java:Yumeko.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.Id;\nimport javax.persistence.ManyToMany;\n\n@Entity\npublic class Yumeko {\n @Id\n private Long id;\n\n @ManyToMany(fetch = FetchType.EAGER, mappedBy = \"yumekoList\")\n private List<Alice> aliceList;\n\n public Long getId() {\n return id;\n }\n\n @Override\n public String toString() {\n List<String> ids = new ArrayList<>();\n\n for (Alice alice : this.aliceList) {\n ids.add(String.valueOf(alice.getId()));\n }\n\n return \"Yumeko{\" + \"id=\" + id + \", aliceList=\" + String.join(\", \", ids) + '}';\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/7f2978f7-d6a5-213b-ddf0-500b6e7645cb.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/09ad4d6d-1a2b-2c36-b857-474823ae4434.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/78349b0f-71cb-5227-8657-c993d930a2e2.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/436a5965-86f2-431c-f38a-614cb702c33e.jpeg)\n\n```sql:\nCREATE TABLE `alice` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `yumeko` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `alice_yumeko` (\n `alice_id` int(11) NOT NULL,\n `yumeko_id` int(11) NOT NULL,\n PRIMARY KEY (`alice_id`,`yumeko_id`),\n KEY `alice_yumeko_fk1_idx` (`alice_id`),\n KEY `alice_yumeko_fk2_idx` (`yumeko_id`),\n CONSTRAINT `alice_yumeko_fk1` FOREIGN KEY (`alice_id`) REFERENCES `alice` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,\n CONSTRAINT `alice_yumeko_fk2` FOREIGN KEY (`yumeko_id`) REFERENCES `yumeko` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n Alice alice = this.em.find(Alice.class, 1L);\n System.out.println(alice);\n\n Yumeko yumeko = this.em.find(Yumeko.class, 1L);\n System.out.println(yumeko);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: Alice{id=1, yumekoList=1, 2, 3}\n\u60c5\u5831: Yumeko{id=1, aliceList=1, 2}\n```\n\n- \u53cc\u65b9\u5411\u306e\u591a\u5bfe\u591a\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u5834\u5408\u306f\u3001 `@ManyToMany` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u3002\n- \u3069\u3061\u3089\u304b\u4e00\u65b9\u3092\u6240\u6709\u8005\u306b\u6c7a\u3081\u3066\u3001\u305d\u3061\u3089\u306b `@JoinTable` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u7d50\u5408\u306e\u6761\u4ef6\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n- \u88ab\u6240\u6709\u8005\u5074\u306f\u3001 `@ManyToMany` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e `mappedBy` \u5c5e\u6027\u3067\u3001\u6240\u6709\u8005\u5074\u306e\u3069\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u7d10\u4ed8\u3044\u3066\u3044\u308b\u306e\u304b\u3060\u3051\u3092\u6307\u5b9a\u3059\u308c\u3070\u3044\u3044\u3002\n- \u5b9f\u88c5\u3057\u3066\u3066\u6c17\u3065\u3044\u305f\u3051\u3069\u3001 `toString()` \u30e1\u30bd\u30c3\u30c9\u5185\u3067 Stream API \u3092\u4f7f\u3046\u3068\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ed\u30fc\u30c9\u6642\u306b\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3063\u307d\u3044\u3002\u539f\u56e0\u306f\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3002\u4ed5\u65b9\u306a\u3044\u306e\u3067\u3001 for \u6587\u3092\u4f7f\u3063\u3066\u6587\u5b57\u5217\u3092\u6574\u5f62\u3057\u3066\u3044\u308b\u3002\n\n#\u7d99\u627f\u306e\u30de\u30c3\u30d4\u30f3\u30b0\n##\u30af\u30e9\u30b9\u968e\u5c64\u306b\u5c5e\u3059\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\uff11\u3064\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/e25376f1-4431-1f07-b30c-6dca4ecd774d.jpeg)\n\n```java:ParentRumia.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"rumia\")\npublic class ParentRumia {\n @Id\n protected Long id;\n\n protected String name;\n\n public void setName(String name) {\n this.name = name;\n }\n\n @Override\n public String toString() {\n return \"ParentRumia{\" + \"id=\" + id + \", name=\" + name + '}';\n }\n}\n```\n\n```java:ChildRumia.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\n\n@Entity\npublic class ChildRumia extends ParentRumia {\n\n private String value;\n\n public void setValue(String value) {\n this.value = value;\n }\n\n @Override\n public String toString() {\n return \"ChildRumia{id=\" + id + \", name=\" + name + \", value=\" + value + '}';\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/2707de69-c4a2-2db0-401d-9fd4982cf673.jpeg)\n\n```sql:\nCREATE TABLE `rumia` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `dtype` varchar(45) NOT NULL,\n `name` varchar(45) DEFAULT NULL,\n `value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n ParentRumia parentRumia = new ParentRumia();\n parentRumia.setName(\"parent name\");\n\n this.em.persist(parentRumia);\n\n ChildRumia childRumia = new ChildRumia();\n childRumia.setName(\"child name\");\n childRumia.setValue(\"child value\");\n\n this.em.persist(childRumia);\n```\n\n\u5b9f\u884c\u5f8c\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u69d8\u5b50\u3002\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/f48dcc2d-091e-5954-135b-1ea97864be8b.jpeg)\n\n- \u7279\u306b\u6307\u5b9a\u304c\u7121\u3044\u5834\u5408\u3001\uff11\u3064\u306e\u30af\u30e9\u30b9\u968e\u5c64\u306b\u5c5e\u3059\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306f\u3001\uff11\u3064\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u308b\u3002\n- \u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u308b\u30c6\u30fc\u30d6\u30eb\u306e\u540d\u524d\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u968e\u5c64\u306e\u30eb\u30fc\u30c8\u3068\u306a\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d\u3067\u89e3\u6c7a\u3055\u308c\u308b\u3002\n- \u30c6\u30fc\u30d6\u30eb\u306b\u306f `dtype` \u3068\u3044\u3046\u540d\u524d\u306e\u6587\u5b57\u5217\u578b\u306e\u30ab\u30e9\u30e0\u3092\u7528\u610f\u3057\u3066\u304a\u304f\u3002\n - \u3053\u306e\u30ab\u30e9\u30e0\u306b\u3001\u305d\u306e\u30ec\u30b3\u30fc\u30c9\u304c\u3069\u306e\u30af\u30e9\u30b9\u306e\u30c7\u30fc\u30bf\u306a\u306e\u304b\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306e\u5024\u304c\u683c\u7d0d\u3055\u308c\u308b\u3002\n - \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u540d\u524d\u304c\u683c\u7d0d\u3055\u308c\u308b\u3002\n- \u30c6\u30fc\u30d6\u30eb\u306b\u306f\u3001\u30af\u30e9\u30b9\u968e\u5c64\u306e\u5404\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304c\u6301\u3064\u5168\u3066\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306b\u5bfe\u5fdc\u3059\u308b\u30ab\u30e9\u30e0\u3092\u7528\u610f\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\n###\u30e1\u30ea\u30c3\u30c8\n- \u30c7\u30fc\u30bf\u306e\u6301\u3061\u65b9\u304c\u5358\u7d14\u3067\u7406\u89e3\u3057\u3084\u3059\u3044\u3002\n- \u691c\u7d22\u6642\u306b\u30c6\u30fc\u30d6\u30eb\u306e JOIN \u304c\u5fc5\u8981\u306a\u3044\u3002\n\n###\u30c7\u30e1\u30ea\u30c3\u30c8\n- \u968e\u5c64\u306b\u30af\u30e9\u30b9\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3068\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u30ab\u30e9\u30e0\u3082\u5909\u66f4\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n- \u9805\u76ee\u306b NOT NULL \u5236\u7d04\u3092\u8a2d\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3002\n - \u5b50\u30af\u30e9\u30b9\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u30ab\u30e9\u30e0\u306b\u306f\u3001\u89aa\u30af\u30e9\u30b9\u306e\u30ec\u30b3\u30fc\u30c9\u3067\u306f NULL \u5024\u304c\u8a2d\u5b9a\u3055\u308c\u308b\u305f\u3081\u3002\n\n###\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d\u3092\u4fdd\u5b58\u3059\u308b\u30ab\u30e9\u30e0\u306e\u540d\u524d\u3084\u5024\u3092\u5909\u66f4\u3059\u308b\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f `DTYPE` \u3068\u3044\u3046\u6587\u5b57\u5217\u578b\u306e\u30ab\u30e9\u30e0\u306b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u540d\u304c\u4fdd\u5b58\u3055\u308c\u308b\u3002\n\u3053\u308c\u306f\u3001 `@DiscriminatorColumn` \u3068 `@DiscriminatorValue` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/4444b7cf-d931-38ff-10aa-828df0b870ff.jpeg)\n\n```java:ParentDaiyousei.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.DiscriminatorColumn;\nimport javax.persistence.DiscriminatorType;\nimport javax.persistence.DiscriminatorValue;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"daiyousei\")\n@DiscriminatorColumn(name = \"entity_type\", discriminatorType = DiscriminatorType.INTEGER)\n@DiscriminatorValue(\"1\")\npublic class ParentDaiyousei {\n @Id\n private Long id;\n private String value;\n\n public void setValue(String value) {\n this.value = value;\n }\n}\n```\n\n```java:ChildDaiyousei.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.DiscriminatorValue;\nimport javax.persistence.Entity;\n\n@Entity\n@DiscriminatorValue(\"2\")\npublic class ChildDaiyousei extends ParentDaiyousei {\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/a70d5310-37cd-7ac4-475b-d7eee7df12d2.jpeg)\n\n```sql:\nCREATE TABLE `daiyousei` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `entity_type` int(11) NOT NULL,\n `value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n ParentDaiyousei parentDaiyousei = new ParentDaiyousei();\n parentDaiyousei.setValue(\"parent value\");\n\n this.em.persist(parentDaiyousei);\n\n ChildDaiyousei childDaiyousei = new ChildDaiyousei();\n childDaiyousei.setValue(\"child value\");\n\n this.em.persist(childDaiyousei);\n```\n\n\u5b9f\u884c\u5f8c\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u69d8\u5b50\u3002\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/22ea4cc8-62e3-8b44-536b-1201e5678792.jpeg)\n\n- \u30eb\u30fc\u30c8\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092 `@DiscriminatorColumn` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3066\u3001 `name` \u5c5e\u6027\u3067\u30ab\u30e9\u30e0\u306e\u540d\u524d\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n- `discriminatorType` \u5c5e\u6027\u3067\u578b\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n- \u5404\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3067\u306a\u3093\u3068\u3044\u3046\u5024\u3092\u8a2d\u5b9a\u3059\u308b\u304b\u306f\u3001 `@DiscriminatorValue` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u6307\u5b9a\u3059\u308b\u3002\n\n##\u30b5\u30d6\u30af\u30e9\u30b9\u3054\u3068\u306b\u30c6\u30fc\u30d6\u30eb\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/e5524e8c-91b0-374f-a6e8-b0024fa7791f.jpeg)\n\n```java:ParentCirno.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.Inheritance;\nimport javax.persistence.InheritanceType;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"parent_cirno\")\n@Inheritance(strategy = InheritanceType.JOINED)\npublic class ParentCirno {\n @Id @GeneratedValue(strategy = GenerationType.IDENTITY)\n protected Long id;\n\n protected String name;\n\n public void setName(String name) {\n this.name = name;\n }\n\n @Override\n public String toString() {\n return \"ParentCirno{\" + \"id=\" + id + \", name=\" + name + '}';\n }\n}\n```\n\n```java:ChildCirno.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"child_cirno\")\npublic class ChildCirno extends ParentCirno {\n\n private String value;\n\n public void setValue(String value) {\n this.value = value;\n }\n\n @Override\n public String toString() {\n return \"ChildCirno{\" + \"id=\" + id + \", name=\" + name + \", value=\" + value + '}';\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/e6b80e1d-a000-f75a-f9a4-3b8d3c4d2ff4.jpeg)\n\n```sql:\nCREATE TABLE `parent_cirno` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `name` varchar(45) DEFAULT NULL,\n `dtype` varchar(45) NOT NULL,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `child_cirno` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`),\n KEY `child_cirno_fk_idx` (`id`),\n CONSTRAINT `child_cirno_fk` FOREIGN KEY (`id`) REFERENCES `parent_cirno` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n ParentCirno parentCirno = new ParentCirno();\n parentCirno.setName(\"parent name\");\n\n this.em.persist(parentCirno);\n\n ChildCirno childCirno = new ChildCirno();\n childCirno.setName(\"child name\");\n childCirno.setValue(\"child value\");\n\n this.em.persist(childCirno);\n```\n\n\u5b9f\u884c\u5f8c\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u69d8\u5b50\u3002\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/549978f8-4cad-cdea-8a70-98e0ad1e303e.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/4133f4dd-b65c-9f87-c6d2-cce4aa497bbc.jpeg)\n\n- \u30eb\u30fc\u30c8\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092 `@Inheritance` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3001 `strategy` \u306b `InheritanceType.JOINED` \u3092\u6307\u5b9a\u3059\u308b\u3002\n - \u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u3001 `InheritanceType.SINGLE_TABLE` \u3092\u6307\u5b9a\u3057\u305f\u306e\u3068\u540c\u3058\u306b\u306a\u308b\u3002\n- \u3059\u308b\u3068\u3001\u30af\u30e9\u30b9\u968e\u5c64\u4e0a\u306e\u5404\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u3001\u305d\u308c\u305e\u308c\u500b\u5225\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n- \u5404\u30c6\u30fc\u30d6\u30eb\u306f\u3001 PK \u3092\u5916\u90e8\u53c2\u7167\u5236\u7d04\u3067\u7d10\u4ed8\u3051\u308b\u3002\n- \u30eb\u30fc\u30c8\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u306f\u3001\u30af\u30e9\u30b9\u3092\u7279\u5b9a\u3059\u308b\u305f\u3081\u306e `dtype` \u30ab\u30e9\u30e0\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n - \u3053\u3061\u3089\u3082 `@DiscriminatorColumn` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n###\u30e1\u30ea\u30c3\u30c8\n- \u9805\u76ee\u306b NOT NULL \u5236\u7d04\u3092\u8a2d\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u308b\uff08`SINGLE_TABLE` \u3068\u6bd4\u3079\u305f\u5834\u5408\u306e\u8a71\uff09\u3002\n- \u30c7\u30fc\u30bf\u304c\u6b63\u898f\u5316\u3055\u308c\u308b\u3002\n\n###\u30c7\u30e1\u30ea\u30c3\u30c8\n- \u30b5\u30d6\u30af\u30e9\u30b9\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u53d6\u5f97\u3059\u308b\u306b\u306f\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u7d50\u5408\u304c\u5fc5\u8981\u306b\u306a\u308b\u3002\n\n##\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3054\u3068\u306b\u72ec\u7acb\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/551d60da-2aa4-04e1-698f-a206a96a9863.jpeg)\n\n```java:ParentHongMeiling.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Inheritance;\nimport javax.persistence.InheritanceType;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"parent_hong_meiling\")\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\npublic class ParentHongMeiling {\n @Id\n private Long id;\n\n private String name;\n\n public void setName(String name) {\n this.name = name;\n }\n}\n```\n\n```java:ChildHongMeiling.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"child_hong_meiling\")\npublic class ChildHongMeiling extends ParentHongMeiling {\n private String value;\n\n public void setValue(String value) {\n this.value = value;\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/d6361fd0-79d1-10ea-cce4-acf164adefeb.jpeg)\n\n```sql:\nCREATE TABLE `parent_hong_meiling` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `name` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `child_hong_meiling` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `name` varchar(45) DEFAULT NULL,\n `value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n ParentHongMeiling parentHongMeiling = new ParentHongMeiling();\n parentHongMeiling.setName(\"parent name\");\n\n this.em.persist(parentHongMeiling);\n\n ChildHongMeiling childHongMeiling = new ChildHongMeiling();\n childHongMeiling.setName(\"child name\");\n childHongMeiling.setValue(\"child value\");\n\n this.em.persist(childHongMeiling);\n```\n\n\u5b9f\u884c\u5f8c\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u72b6\u614b\u3002\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/071b379f-09fd-7931-0eab-dfecdb526401.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/727aa0ca-2dc0-0188-d685-56c9618fdef9.jpeg)\n\n- `@Inheritance` \u3067 `InheritanceType.TABLE_PER_CLASS` \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u5404\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u305d\u308c\u305e\u308c\u72ec\u7acb\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u304d\u308b\u3002\n\n###\u30e1\u30ea\u30c3\u30c8\n- `SINGLE_TABLE` \u3068\u540c\u69d8\u3067\u3001\u5358\u4e00\u306e\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u691c\u7d22\u3067\u30c6\u30fc\u30d6\u30eb\u306e JOIN \u304c\u767a\u751f\u3059\u308b\u3053\u3068\u306f\u306a\u3044\u3002\n\n###\u30c7\u30e1\u30ea\u30c3\u30c8\n- \u30c7\u30fc\u30bf\u304c\u6b63\u898f\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u3002\n- \u591a\u614b\u3092\u5229\u7528\u3057\u305f\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u3042\u3063\u305f\u5834\u5408\u3001\u30c7\u30fc\u30bf\u306e\u8aad\u307f\u8fbc\u307f\u3067\u8907\u6570\u56de\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30a2\u30af\u30bb\u30b9\u304c\u767a\u751f\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002\n - \u4f8b\u3048\u3070\u3001 `List<ParentHongMeiling>` \u3068\u3044\u3046\u578b\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u3042\u3063\u305f\u5834\u5408\u3001\u30ea\u30b9\u30c8\u306e\u4e2d\u8eab\u306f\u5b9f\u306f `ParentHongMeiling` \u3068 `ChildHongMeiling` \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u5165\u308a\u4e71\u308c\u3066\u5165\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u5f97\u308b\u3002\n - \u305d\u306e\u5834\u5408\u3001 `parent_hong_meiling` \u3068 `child_hong_meiling` \u306e\u30c6\u30fc\u30d6\u30eb\u306b\u305d\u308c\u305e\u308c\u691c\u7d22\u3057\u306b\u3044\u304b\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n - `UNION` \u304c\u4f7f\u3048\u308c\u3070\u3044\u3044\u304c\u3001\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3082\u5b58\u5728\u3059\u308b\u3002\n- \u3053\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u65b9\u6cd5\u306f\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u3089\u3057\u3044\uff08\u5b9f\u88c5\u3055\u308c\u3066\u3044\u306a\u304f\u3066\u3082 JPA \u306e\u4ed5\u69d8\u7684\u306b\u306f\u304b\u307e\u308f\u306a\u3044\uff09\u3002\n\n#\u305d\u306e\u4ed6\n##\u30de\u30c3\u30d4\u30f3\u30b0\u306e\u305f\u3081\u3060\u3051\u306e\u30b9\u30fc\u30d1\u30fc\u30af\u30e9\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/98849656-2247-8458-4a75-a4294c629c9c.jpeg)\n\n```java:MappedKoakuma.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Id;\nimport javax.persistence.MappedSuperclass;\n\n@MappedSuperclass\npublic class MappedKoakuma {\n @Id\n private Long id;\n\n private String name;\n\n public void setName(String name) {\n this.name = name;\n }\n}\n```\n\n```java:Koakuma.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\n\n@Entity\npublic class Koakuma extends MappedKoakuma {\n\n private String value;\n\n public void setValue(String value) {\n this.value = value;\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/e0719886-dc23-5aa9-5934-4549ffc70322.jpeg)\n\n```sql:\nCREATE TABLE `koakuma` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `name` varchar(45) DEFAULT NULL,\n `value` varchar(45) DEFAULT NULL,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n Koakuma koakuma = new Koakuma();\n koakuma.setName(\"name\");\n koakuma.setValue(\"value\");\n\n this.em.persist(koakuma);\n```\n\n\u5b9f\u884c\u5f8c\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u69d8\u5b50\u3002\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/38642d66-b23a-4d95-cffb-ae2916c8aa8c.jpeg)\n\n- `@MappedSuperclass` \u3067\u30af\u30e9\u30b9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3068\u3001\u305d\u306e\u30af\u30e9\u30b9\u306f\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3068\u3057\u3066\u306f\u6271\u308f\u308c\u305a\u3001\u30de\u30c3\u30d4\u30f3\u30b0\u306e\u5b9a\u7fa9\u3060\u3051\u304c\u6709\u52b9\u306b\u306a\u308b\u3002\n- \u65e2\u5b58\u306e\u5b9f\u88c5\u3067\u5171\u901a\u9805\u76ee\u304c\u89aa\u30af\u30e9\u30b9\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3051\u3069\u3001\u305d\u306e\u30af\u30e9\u30b9\u306f\u6c38\u7d9a\u5316\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\u3001\u3068\u3044\u3046\u5834\u5408\u306b\u4f7f\u3048\u308b\u3068\u601d\u308f\u308c\u308b\u3002\n- \u65b0\u898f\u306b\u4f5c\u308b\u306e\u3067\u3042\u308c\u3070\u3001\u5171\u901a\u9805\u76ee\u306f\u7d99\u627f\u95a2\u4fc2\u3067\u89e3\u6c7a\u3059\u308b\u3088\u308a\u3082\u7d44\u307f\u8fbc\u307f\u53ef\u80fd\u30af\u30e9\u30b9\u3092\u5229\u7528\u3057\u3066\u4f9d\u5b58\u95a2\u4fc2\u3067\u89e3\u6c7a\u3057\u305f\u65b9\u304c\u3044\u3044\u3068\u601d\u3046\u3002\n\n\n##Entity Graph \u3067\u95a2\u9023\u3059\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306e\u8aad\u307f\u8fbc\u307f\u3092\u5236\u5fa1\u3059\u308b\n\u95a2\u9023\u3059\u308b\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u3069\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u30ed\u30fc\u30c9\u3059\u308b\u304b\u3069\u3046\u304b\u306f\u3001\u3053\u308c\u307e\u3067\u306f\u30d5\u30a3\u30fc\u30eb\u30c9\u5358\u4f4d\u306b\u9759\u7684\u306b\u3057\u304b\u6307\u5b9a\u3067\u304d\u306a\u304b\u3063\u305f\uff08\u5373\u6642\u30ed\u30fc\u30c9\u3068\u9045\u5ef6\u30ed\u30fc\u30c9\uff09\u3002\n\u3064\u307e\u308a\u3001\u3042\u308b\u691c\u7d22\u306e\u3068\u304d\u306f\u5373\u6642\u30ed\u30fc\u30c9\u3057\u305f\u3044\u3051\u3069\u3001\u5225\u306e\u691c\u7d22\u306e\u3068\u304d\u306f\u9045\u5ef6\u30ed\u30fc\u30c9\u306b\u3057\u305f\u3044\u3001\u3068\u3044\u3046\u7d30\u304b\u3044\u5236\u5fa1\u306f\u3067\u304d\u306a\u304b\u3063\u305f\u3002\n\n\u3057\u304b\u3057\u3001 JPA 2.1 \u3067\u8ffd\u52a0\u3055\u308c\u305f Entity Graph \u3092\u4f7f\u3048\u3070\u3001\u3053\u306e\u5236\u5fa1\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/200872e6-6824-8366-993d-b93456b9e21b.jpeg)\n\n```java:IzayoiSakuya.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport java.util.List;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.NamedAttributeNode;\nimport javax.persistence.NamedEntityGraph;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"izayoi_sakuya\")\n@NamedEntityGraph(\n name = \"IzayoiSakuya.remiliaScarletList\",\n attributeNodes = @NamedAttributeNode(\"remiliaScarletList\")\n)\npublic class IzayoiSakuya {\n @Id\n private Long id;\n @JoinColumn(name = \"izayoi_sakuya_id\")\n private List<RemiliaScarlet> remiliaScarletList;\n @JoinColumn(name = \"izayoi_sakuya_id\")\n private List<FrandreScarlet> frandreScarletList;\n\n @Override\n public String toString() {\n return \"IzayoiSakuya{\" + \"id=\" + id + \", remiliaScarletList=\" + remiliaScarletList + \", frandreScarletList=\" + frandreScarletList + '}';\n }\n}\n```\n\n```java:RemiliaScarlet.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"remilia_scarlet\")\npublic class RemiliaScarlet {\n @Id\n private Long id;\n\n @Override\n public String toString() {\n return \"RemiliaScarlet{\" + \"id=\" + id + '}';\n }\n}\n```\n\n```java:FrandreScarlet.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\n\n@Entity\n@Table(name = \"frandre_scarlet\")\npublic class FrandreScarlet {\n @Id\n private Long id;\n\n @Override\n public String toString() {\n return \"FrandreScarlet{\" + \"id=\" + id + '}';\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/db232921-d5d4-843e-d11a-56ee2eab277f.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/dc889ee9-bfae-3668-be89-7796aa37b4cd.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/0c3d56c8-2e99-3bda-66e7-3ef3b38f3482.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/6421ca04-b540-535d-27fb-5cd48ca47130.jpeg)\n\n```sql:\nCREATE TABLE `izayoi_sakuya` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `frandre_scarlet` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `izayoi_sakuya_id` int(11) NOT NULL,\n PRIMARY KEY (`id`),\n KEY `frandre_scarlet_fk_idx` (`izayoi_sakuya_id`),\n CONSTRAINT `frandre_scarlet_fk` FOREIGN KEY (`izayoi_sakuya_id`) REFERENCES `izayoi_sakuya` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8;\n\nCREATE TABLE `remilia_scarlet` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `izayoi_sakuya_id` int(11) NOT NULL,\n PRIMARY KEY (`id`),\n KEY `remilia_scarlet_fk_idx` (`izayoi_sakuya_id`),\n CONSTRAINT `remilia_scarlet_fk` FOREIGN KEY (`izayoi_sakuya_id`) REFERENCES `izayoi_sakuya` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION\n) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n // \u30c7\u30d5\u30a9\u30eb\u30c8\n IzayoiSakuya izayoiSakuya = this.em.find(IzayoiSakuya.class, 1L);\n System.out.println(izayoiSakuya);\n\n // Entity Graph \u3092\u6307\u5b9a\n EntityGraph graph = this.em.getEntityGraph(\"IzayoiSakuya.remiliaScarletList\");\n\n Map<String, Object> hint = new HashMap<>();\n hint.put(\"javax.persistence.fetchgraph\", graph);\n\n izayoiSakuya = this.em.find(IzayoiSakuya.class, 2L, hint);\n System.out.println(izayoiSakuya);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: IzayoiSakuya{id=1, remiliaScarletList={IndirectList: not instantiated}, frandreScarletList={IndirectList: not instantiated}}\n\u60c5\u5831: IzayoiSakuya{id=2, remiliaScarletList={[RemiliaScarlet{id=4}, RemiliaScarlet{id=5}]}, frandreScarletList={IndirectList: not instantiated}}\n```\n\n- `@NamedEntityGraph` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001 Entity Graph \u3092\u9759\u7684\u306b\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n- `name` \u5c5e\u6027\u3067 Entity Graph \u306e\u540d\u524d\u3092\u3001 `attributeNodes` \u5c5e\u6027\u3067\u5373\u6642\u30ed\u30fc\u30c9\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u6307\u5b9a\u3059\u308b\u3002\n- Entity Graph \u3092\u4f7f\u3046\u304b\u3069\u3046\u304b\u306f\u3001 `EntityManager.find()` \u306e\u6700\u5f8c\u306b Map \u3092\u6e21\u3059\u3053\u3068\u3067\u6307\u5b9a\u3067\u304d\u308b\u3002\n - Entity Graph \u306f\u3001 `EntityManager#getEntityGraph(String)` \u3092\u4f7f\u3063\u3066\u53d6\u5f97\u3067\u304d\u308b\u3002\n - \u30ad\u30fc\u306b `javax.persistence.fetchgraph` \u3092\u3001\u5024\u306b Entity Graph \u3092\u8a2d\u5b9a\u3057\u305f Map \u3092\u3001 `find()` \u30e1\u30bd\u30c3\u30c9\u306b\u6e21\u3059\u3002\n - `javax.persistence.loadgraph` \u3063\u3066\u3044\u3046\u306e\u3082\u6307\u5b9a\u3067\u304d\u308b\u307f\u305f\u3044\u3060\u3051\u3069\u3001 `fetchgraph` \u3068\u306e\u9055\u3044\u304c\u3088\u304f\u5206\u304b\u3089\u306a\u304b\u3063\u305f\u3002\u3002\u3002\n- Entity Graph \u3092\u6307\u5b9a\u3057\u305f\u3068\u304d\u3060\u3051\u3001 `attributeNodes` \u3067\u8a2d\u5b9a\u3057\u305f\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u5373\u6642\u30ed\u30fc\u30c9\u3055\u308c\u308b\u3002\n- `subgraphs` \u5c5e\u6027\u3092\u6307\u5b9a\u3059\u308c\u3070\u3001\u3055\u3089\u306b\u6398\u308a\u4e0b\u3052\u3066\u8aad\u307f\u8fbc\u307f\u65b9\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n###Entity Graph \u3092\u52d5\u7684\u306b\u4f5c\u6210\u3059\u308b\n```java:MappingEjb.java\n EntityGraph dynamicGraph = this.em.createEntityGraph(IzayoiSakuya.class);\n dynamicGraph.addAttributeNodes(\"frandreScarletList\");\n\n hint = new HashMap<>();\n hint.put(\"javax.persistence.fetchgraph\", dynamicGraph);\n\n izayoiSakuya = this.em.find(IzayoiSakuya.class, 3L, hint);\n System.out.println(izayoiSakuya);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: IzayoiSakuya{id=3, remiliaScarletList={IndirectList: not instantiated}, frandreScarletList={[FrandreScarlet{id=6}, FrandreScarlet{id=7}]}}\n```\n\n- `EntityManager#createEntityGraph(Class)` \u3067\u3001 Entity Graph \u3092\u52d5\u7684\u306b\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n##\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u3092\u4f7f\u7528\u3059\u308b\nJPA 2.1 \u3067\u3001\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u3068\u3044\u3046\u4ed5\u7d44\u307f\u304c\u8ffd\u52a0\u3055\u308c\u305f\u3002\n\n\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u3092\u4f7f\u3048\u3070\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u306e\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u81ea\u7531\u306b\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n**\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/e345a298-dbcd-ad8d-e984-dc020318f04f.jpeg)\n\n```java:LettyWhiterock.java\npackage sample.javaee.jpa.entity.mapping;\n\nimport javax.persistence.Convert;\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\nimport javax.persistence.Table;\nimport sample.javaee.jpa.converter.LettyWhiterockConverter;\n\n@Entity\n@Table(name = \"letty_whiterock\")\npublic class LettyWhiterock {\n @Id\n private Long id;\n\n @Convert(converter = LettyWhiterockConverter.class)\n private String value;\n\n @Override\n public String toString() {\n return \"LettyWhiterock{\" + \"id=\" + id + \", value=\" + value + '}';\n }\n}\n```\n\n**\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc**\n\n```java:LettyWhiterockConverter.java\npackage sample.javaee.jpa.converter;\n\nimport java.util.Objects;\nimport javax.persistence.AttributeConverter;\nimport javax.persistence.Converter;\n\n@Converter\npublic class LettyWhiterockConverter implements AttributeConverter<String, Integer>{\n\n @Override\n public Integer convertToDatabaseColumn(String attribute) {\n return \"hoge\".equals(attribute) ? 1 : 0;\n }\n\n @Override\n public String convertToEntityAttribute(Integer dbData) {\n return Objects.equals(dbData, 1) ? \"hoge\" : \"fuga\";\n }\n}\n```\n\n**\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9**\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/d3531aa5-e7ec-c9d8-a19a-4dfdf608fc31.jpeg)\n\n![javaee-jpa.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/e4f25629-ed8c-1d86-3338-301cb0f0efe7.jpeg)\n\n```sql:\nCREATE TABLE `letty_whiterock` (\n `id` int(11) NOT NULL AUTO_INCREMENT,\n `value` int(11) DEFAULT NULL,\n PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```java:MappingEjb.java\n LettyWhiterock lettyWhiterock = this.em.find(LettyWhiterock.class, 1L);\n System.out.println(lettyWhiterock);\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831: LettyWhiterock{id=1, value=hoge}\n```\n\n- `AttributeConverter` \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u3067\u3001\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n - `convertToDatabaseColumn()` \u30e1\u30bd\u30c3\u30c9\u3067\u300cJava \u2192 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u300d\u306e\u5909\u63db\u3092\u5b9f\u88c5\u3059\u308b\u3002\n - `convertToEntityAttribute()` \u30e1\u30bd\u30c3\u30c9\u3067\u300c\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 \u2192 Java\u300d\u306e\u5909\u63db\u3092\u5b9f\u88c5\u3059\u308b\u3002\n- `@Converter` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001 JavaEE \u30b5\u30fc\u30d0\u30fc\u304c\u81ea\u52d5\u3067\u305d\u306e\u30af\u30e9\u30b9\u3092\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u3068\u3057\u3066\u8a8d\u8b58\u3057\u3066\u304f\u308c\u308b\u3002\n- \u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u3092\u4f7f\u7528\u3059\u308b\u3068\u304d\u306f\u3001\u30d5\u30a3\u30fc\u30eb\u30c9\u3092 `@Convert` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3066\u3001 `converter` \u5c5e\u6027\u3067\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u306e Class \u3092\u6307\u5b9a\u3059\u308b\u3002\n- `@Converter` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e `autoApply` \u5c5e\u6027\u306b `true` \u3092\u8a2d\u5b9a\u3059\u308b\u3068\u3001 `@Convet` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u306a\u304f\u3066\u3082\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u578b\u304b\u3089\u63a8\u6e2c\u3057\u3066\u81ea\u52d5\u3067\u30b3\u30f3\u30d0\u30fc\u30bf\u30fc\u304c\u9069\u7528\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\uff08`Integer` \u306a\u3069\u57fa\u672c\u7684\u306a\u578b\u306b\u3082\u9069\u7528\u3055\u308c\u308b\u306e\u3067\u3001\u72ec\u81ea\u306e\u578b\u4ee5\u5916\u3067\u306f\u4f7f\u308f\u306a\u3044\u65b9\u304c\u3044\u3044\uff09\u3002\n\n\n#\u53c2\u8003\n- [Amazon.co.jp\uff1a Beginning Java EE 6 GlassFish 3\u3067\u59cb\u3081\u308b\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30baJava (Programmer\u2019s SELECTION): Antonio Goncalves, \u65e5\u672c\u30aa\u30e9\u30af\u30eb\u682a\u5f0f\u4f1a\u793e, \u682a\u5f0f\u4f1a\u793e\u30d7\u30ed\u30b7\u30b9\u30c6\u30e0\u30a8\u30eb\u30aa\u30fc\u30b7\u30fc: \u672c][]\n- [Amazon.co.jp\uff1a Enterprise JavaBeans 3.1 \u7b2c6\u7248: Andrew Lee Rubinger, Bill Burke, \u4f50\u85e4 \u76f4\u751f, \u6728\u4e0b \u54f2\u4e5f: \u672c][]\n- [Java Persistence/ElementCollection - Wikibooks, open books for an open world][]\n- [web\u7528\u8a9e\u8f9e\u5178 - \u30a4\u30f3\u30d4\u30fc\u30c0\u30f3\u30b9\u30fb\u30df\u30b9\u30de\u30c3\u30c1][]\n- [\u6771\u65b9Project\u306e\u767b\u5834\u4eba\u7269 - Wikipedia][]\n- [Forward Everyday: JPA 2.1: Entity Graph][]\n- [Thoughts on Java: JPA 2.1 Entity Graph - Part 1: Named entity graphs][]\n- [Get current JTA transaction status from CMT EJB \u00ab Piotr Nowicki's Homepage](http://piotrnowicki.com/2011/09/get-current-jta-transaction-status-from-cmt-ejb/)\n- [Java Persistence/What is new in JPA 2.1? - Wikibooks, open books for an open world][]\n- [JavaEE 7 JPA 2.1\u306e\u65b0\u6a5f\u80fd\u30b3\u30f3\u30d0\u30fc\u30bf - \u3057\u3093\u3055\u3093\u306e\u51fa\u5f35\u6240\u3000\u306f\u3066\u306a\u7de8][]\n\n[JavaEE 7 JPA 2.1\u306e\u65b0\u6a5f\u80fd\u30b3\u30f3\u30d0\u30fc\u30bf - \u3057\u3093\u3055\u3093\u306e\u51fa\u5f35\u6240\u3000\u306f\u3066\u306a\u7de8]: http://d.hatena.ne.jp/shin/20130627/p1\n[Java Persistence/What is new in JPA 2.1? - Wikibooks, open books for an open world]: http://en.wikibooks.org/wiki/Java_Persistence/What_is_new_in_JPA_2.1%3F\n[Thoughts on Java: JPA 2.1 Entity Graph - Part 1: Named entity graphs]: http://www.thoughts-on-java.org/2014/03/jpa-21-entity-graph-part-1-named-entity.html\n[Forward Everyday: JPA 2.1: Entity Graph]: http://hantsy.blogspot.jp/2013/12/jpa-21-entity-graph.html\n[Amazon.co.jp\uff1a Enterprise JavaBeans 3.1 \u7b2c6\u7248: Andrew Lee Rubinger, Bill Burke, \u4f50\u85e4 \u76f4\u751f, \u6728\u4e0b \u54f2\u4e5f: \u672c]: http://www.amazon.co.jp/Enterprise-JavaBeans-3-1-Andrew-Rubinger/dp/4873115086/ref=sr_1_1?s=books&ie=UTF8&qid=1423309914&sr=1-1&keywords=enterprise+javabeans+3.1\n[Amazon.co.jp\uff1a Beginning Java EE 6 GlassFish 3\u3067\u59cb\u3081\u308b\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30baJava (Programmer\u2019s SELECTION): Antonio Goncalves, \u65e5\u672c\u30aa\u30e9\u30af\u30eb\u682a\u5f0f\u4f1a\u793e, \u682a\u5f0f\u4f1a\u793e\u30d7\u30ed\u30b7\u30b9\u30c6\u30e0\u30a8\u30eb\u30aa\u30fc\u30b7\u30fc: \u672c]: http://www.amazon.co.jp/Beginning-GlassFish-3%E3%81%A7%E5%A7%8B%E3%82%81%E3%82%8B%E3%82%A8%E3%83%B3%E3%82%BF%E3%83%BC%E3%83%97%E3%83%A9%E3%82%A4%E3%82%BAJava-Programmer%E2%80%99s-SELECTION/dp/4798124605\n[\u6771\u65b9Project\u306e\u767b\u5834\u4eba\u7269 - Wikipedia]: http://ja.wikipedia.org/wiki/%E6%9D%B1%E6%96%B9Project%E3%81%AE%E7%99%BB%E5%A0%B4%E4%BA%BA%E7%89%A9\n[web\u7528\u8a9e\u8f9e\u5178 - \u30a4\u30f3\u30d4\u30fc\u30c0\u30f3\u30b9\u30fb\u30df\u30b9\u30de\u30c3\u30c1]: http://www23.atwiki.jp/sevenlives/pages/903.html\n[Java Persistence/ElementCollection - Wikibooks, open books for an open world]: http://en.wikibooks.org/wiki/Java_Persistence/ElementCollection\n", "tags": ["jpa", "JavaEE", "Java", "glassfish"]}