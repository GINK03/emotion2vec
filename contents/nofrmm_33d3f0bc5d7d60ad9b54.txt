{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nrpm\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u5834\u5408\u306bconfigure\u304c\u5909\u66f4\u3067\u304d\u305a\u3001make\u304b\u3089\u3001\u3068\u8abf\u3079\u3066\u3044\u304f\u3068\u3001RPM\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308bSRPM\u304c\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002\n\u30b4\u30fc\u30eb\u306fnginx\u306econfigure\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u8ffd\u52a0\u524a\u9664\u3068\u7d50\u679c\u306e\u78ba\u8a8d\u3067\u3059\u3002\n\n\u6ce8\u610f\n\u3053\u3061\u3089\u306b\u66f8\u3044\u3066\u3042\u308b\u306e\u306f\u58ca\u3057\u3066\u3082\u3044\u3044\u74b0\u5883\u3067\u306e\u5c65\u6b74\u3067\u3042\u308a\u3001\u4ed6\u306e\u30e6\u30fc\u30b6\u3068\u306e\u5171\u6709\u30b5\u30fc\u30d0\u3067\u306e\u64cd\u4f5c\u306f\u614e\u91cd\u306b\u884c\u3063\u3066\u3044\u305f\u3060\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u74b0\u5883\nsakuraVPS\u306bMac\u304b\u3089\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u63a5\u7d9a\n\n\u4f5c\u696d\u624b\u9806\n\nrpm\u7528\u306e\u30e6\u30fc\u30b6\u4f5c\u6210\nrpmbuild\u3092\u4f7f\u3046\u306b\u3042\u305f\u3063\u3066\u306f\u3001root\u3068\u304b\u3067\u3084\u3063\u3061\u3083\u30c0\u30e1\u3068\u304b\n\u666e\u6bb5\u4f7f\u3044\u306e\u3068\u3053\u308d\u3067\u5165\u308c\u308b\u3068\u3054\u3061\u3083\u3054\u3061\u3083\u3059\u308b\u3068\u304b\u3042\u308a\u3001\u5225\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3057\u307e\u3059\n\n$ sudo useradd rpmbuilder\n$ sudo passwd rpmbuilder\n\n\nrpmbuild\u306e\u6e96\u5099\n\n$ sudo su - rpmbuilder\n$ mkdir -p ~/rpm/{BUILD,RPMS,SOURCES,SPECS,SRPMS}\n\n\nrpmmacros\u3092\u8a2d\u5b9a\necho '%_topdir %(echo $HOME)/rpm' > ~/.rpmmacros\n\nrpm\u3092\u4f5c\u6210\n\n$ cd ~/\n$ wget http://nginx.org/packages/centos/6/SRPMS/nginx-1.4.7-1.el6.ngx.src.rpm\n$ rpm -ivh nginx-1.4.7-1.el6.ngx.src.rpm \n$ cd ~/rpm/SRPMS/\n$ vim nginx.spec\n\n\u3053\u3053\u3089\u3078\u3093\u3092\u4fee\u6b63\n%build\n./configure \\\n        --prefix=%{_sysconfdir}/nginx \\\n        --sbin-path=%{_sbindir}/nginx \\\n        --conf-path=%{_sysconfdir}/nginx/nginx.conf \\\n        --error-log-path=%{_localstatedir}/log/nginx/error.log \\\n        --http-log-path=%{_localstatedir}/log/nginx/access.log \\\n        --pid-path=%{_localstatedir}/run/nginx.pid \\\n        --lock-path=%{_localstatedir}/run/nginx.lock \\\n        --http-client-body-temp-path=%{_localstatedir}/cache/nginx/client_temp \\\n        --http-proxy-temp-path=%{_localstatedir}/cache/nginx/proxy_temp \\\n        --http-fastcgi-temp-path=%{_localstatedir}/cache/nginx/fastcgi_temp \\\n        --http-uwsgi-temp-path=%{_localstatedir}/cache/nginx/uwsgi_temp \\\n        --http-scgi-temp-path=%{_localstatedir}/cache/nginx/scgi_temp \\\n        --user=%{nginx_user} \\\n        --group=%{nginx_group} \\\n        --with-http_ssl_module \\\n        --with-http_realip_module \\\n        --with-http_addition_module \\\n        --with-http_sub_module \\\n        --with-http_dav_module \\\n        --with-http_flv_module \\\n        --with-http_mp4_module \\\n        --with-http_gunzip_module \\\n        --with-http_gzip_static_module \\\n        --with-http_random_index_module \\\n        --with-http_secure_link_module \\\n        --with-http_stub_status_module \\\n        --with-file-aio \\\n        --with-ipv6 \\\n        --with-debug \\\n        --with-cc-opt=\"%{optflags} $(pcre-config --cflags)\" \\\n\n\n$ rpmbuild -ba nginx.spec\n\n\u3053\u3053\u3067\u30a8\u30e9\u30fc\u306b\u8868\u793a\u3055\u308c\u305f\u4f9d\u5b58\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3057\u307e\u3059\n\n$ sudo yum install openssl-devel zlib-devel pcre-devel\n$ rpmbuild -ba nginx.spec\n\n/home/rpmbuilder/rpm/RPMS/x86_64/\u306brpm\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002\n\u5148\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u305f\u3082\u306e\u3092\u6d88\u3057\u307e\u3059\u3002\n\n$ sudo rpm -e nginx-release-centos-6-0.el6.ngx.noarch\n\nnginx\u5168\u3066\u306a\u304f\u306a\u3063\u3066\u3044\u308b\u306e\u3092\u78ba\u8a8d\n\n$ rpm -qa | grep nginx\n\n\u4f5c\u6210\u3057\u305frpm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n$ sudo rpm -ivh /home/rpmbuilder/rpm/RPMS/x86_64/nginx-1.4.7-1.el6.ngx.x86_64.rpm \n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fconfigure\u3092\u78ba\u8a8d\n\n$ nginx -V\n\n\n\u53c2\u8003URL\n\u3044\u307e\u3055\u3089\u805e\u3051\u306a\u3044rpmbuild\u3053\u3068\u306f\u3058\u3081\nhttp://blog.tnmt.info/2011/04/29/rpmbuild-for-beginner/\n\u3055\u304f\u3089\u306eVPS \u4e57\u308a\u63db\u3048\u5099\u5fd8\u9332 (Nginx \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb rpmbuild \u7de8)\nhttp://code-life.net/?p=2404\nRebuild a Source RPM\nhttp://wiki.centos.org/HowTos/RebuildSRPM\nRPM\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff0f\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306b\u306f\nhttp://www.atmarkit.co.jp/flinux/rensai/linuxtips/049instrpm.html\n\n\u3055\u3044\u3054\u306b\n\u304a\u307e\u3058\u306a\u3044\u7684\u306b\u66f8\u3044\u3066\u3044\u308b\u3068\u5206\u304b\u3089\u306a\u3044\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002\n\u500b\u4eba\u7684\u306bsrc\u304b\u3089\u306emake\u6d3e\u306a\u306e\u3067rpm\u3067\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u610f\u5473\u3092\u8abf\u3079\u308b\u3068\u3053\u308d\n\u304b\u3089rpm -ivh\u3068 rpm -Uvh\u304b\u3089\u3001rpm\u3067\u8ffd\u52a0\u3057\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u524a\u9664\u306a\u3069\u306e\u7406\u89e3\u304c\u5fc5\u8981\u3067\u3057\u305f\u3002\n\u3053\u306e\u3042\u3068\u306e\u4f5c\u696d\u3067\u306f\u8a3c\u660e\u66f8\u306e\u8a2d\u5b9a\u3084service\u3067\u306e\u8d77\u52d5\u306a\u3069\u3092\u884c\u3044\u307e\u3059\u3002\n\u305d\u306e\u8fba\u308a\u306f\u3053\u3053\u3089\u8fba\u306b\u8a18\u8f09\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u5272\u611b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u304a\u307e\u3051\n\nspdy\u306e\u78ba\u8a8d\u65b9\u6cd5\nfirefox\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\nhttps://addons.mozilla.org/ja/firefox/addon/spdy-indicator/\n\u3084\nchrome\u306eURL\u30b9\u30ad\u30fc\u30de\uff08\u3067\u3044\u3044\u306e\u304b\u306a\u30fb\u30fb\u30fb\uff09\u3092\u4f7f\u3046\u65b9\u6cd5\n\nchrome://net-internals/#spdy\n\n\u304c\u591a\u304b\u3063\u305f\u306e\u3067\u3001\u30c1\u30a7\u30c3\u30af\u30b5\u30a4\u30c8\u3092\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u4f7f\u3063\u3066\u307e\u3059\nspdy/2\u306f\u4eca\u3055\u3089\u30c0\u30bb\u30fc\u304b\u3089spdy/3\u4f7f\u3048\n\u306a\u3069\u3001\u7684\u78ba\u306a\u8a3a\u65ad\u3092\u3057\u3066\u304f\u308c\u307e\u3059\u3002\nhttp://spdycheck.org/\n\n#\u306f\u3058\u3081\u306b\nrpm\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u5834\u5408\u306bconfigure\u304c\u5909\u66f4\u3067\u304d\u305a\u3001make\u304b\u3089\u3001\u3068\u8abf\u3079\u3066\u3044\u304f\u3068\u3001RPM\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308bSRPM\u304c\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002\n\u30b4\u30fc\u30eb\u306fnginx\u306econfigure\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u8ffd\u52a0\u524a\u9664\u3068\u7d50\u679c\u306e\u78ba\u8a8d\u3067\u3059\u3002\n##\u6ce8\u610f\n\u3053\u3061\u3089\u306b\u66f8\u3044\u3066\u3042\u308b\u306e\u306f\u58ca\u3057\u3066\u3082\u3044\u3044\u74b0\u5883\u3067\u306e\u5c65\u6b74\u3067\u3042\u308a\u3001\u4ed6\u306e\u30e6\u30fc\u30b6\u3068\u306e\u5171\u6709\u30b5\u30fc\u30d0\u3067\u306e\u64cd\u4f5c\u306f\u614e\u91cd\u306b\u884c\u3063\u3066\u3044\u305f\u3060\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n#\u74b0\u5883\nsakuraVPS\u306bMac\u304b\u3089\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u63a5\u7d9a\n#\u4f5c\u696d\u624b\u9806\n##rpm\u7528\u306e\u30e6\u30fc\u30b6\u4f5c\u6210\nrpmbuild\u3092\u4f7f\u3046\u306b\u3042\u305f\u3063\u3066\u306f\u3001root\u3068\u304b\u3067\u3084\u3063\u3061\u3083\u30c0\u30e1\u3068\u304b\n\u666e\u6bb5\u4f7f\u3044\u306e\u3068\u3053\u308d\u3067\u5165\u308c\u308b\u3068\u3054\u3061\u3083\u3054\u3061\u3083\u3059\u308b\u3068\u304b\u3042\u308a\u3001\u5225\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3057\u307e\u3059\n>$ sudo useradd rpmbuilder\n>$ sudo passwd rpmbuilder\n\n##rpmbuild\u306e\u6e96\u5099\n\n>$ sudo su - rpmbuilder\n> $ mkdir -p ~/rpm/{BUILD,RPMS,SOURCES,SPECS,SRPMS}\n\n###rpmmacros\u3092\u8a2d\u5b9a\necho '%_topdir %(echo $HOME)/rpm' > ~/.rpmmacros\n\n##rpm\u3092\u4f5c\u6210\n> $ cd ~/\n$ wget http://nginx.org/packages/centos/6/SRPMS/nginx-1.4.7-1.el6.ngx.src.rpm\n$ rpm -ivh nginx-1.4.7-1.el6.ngx.src.rpm \n$ cd ~/rpm/SRPMS/\n$ vim nginx.spec\n\n\u3053\u3053\u3089\u3078\u3093\u3092\u4fee\u6b63\n\n```spec\n%build\n./configure \\\n        --prefix=%{_sysconfdir}/nginx \\\n        --sbin-path=%{_sbindir}/nginx \\\n        --conf-path=%{_sysconfdir}/nginx/nginx.conf \\\n        --error-log-path=%{_localstatedir}/log/nginx/error.log \\\n        --http-log-path=%{_localstatedir}/log/nginx/access.log \\\n        --pid-path=%{_localstatedir}/run/nginx.pid \\\n        --lock-path=%{_localstatedir}/run/nginx.lock \\\n        --http-client-body-temp-path=%{_localstatedir}/cache/nginx/client_temp \\\n        --http-proxy-temp-path=%{_localstatedir}/cache/nginx/proxy_temp \\\n        --http-fastcgi-temp-path=%{_localstatedir}/cache/nginx/fastcgi_temp \\\n        --http-uwsgi-temp-path=%{_localstatedir}/cache/nginx/uwsgi_temp \\\n        --http-scgi-temp-path=%{_localstatedir}/cache/nginx/scgi_temp \\\n        --user=%{nginx_user} \\\n        --group=%{nginx_group} \\\n        --with-http_ssl_module \\\n        --with-http_realip_module \\\n        --with-http_addition_module \\\n        --with-http_sub_module \\\n        --with-http_dav_module \\\n        --with-http_flv_module \\\n        --with-http_mp4_module \\\n        --with-http_gunzip_module \\\n        --with-http_gzip_static_module \\\n        --with-http_random_index_module \\\n        --with-http_secure_link_module \\\n        --with-http_stub_status_module \\\n        --with-file-aio \\\n        --with-ipv6 \\\n        --with-debug \\\n        --with-cc-opt=\"%{optflags} $(pcre-config --cflags)\" \\\n```\n\n>$ rpmbuild -ba nginx.spec\n\n\u3053\u3053\u3067\u30a8\u30e9\u30fc\u306b\u8868\u793a\u3055\u308c\u305f\u4f9d\u5b58\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3057\u307e\u3059\n\n>$ sudo yum install openssl-devel zlib-devel pcre-devel\n$ rpmbuild -ba nginx.spec\n\n/home/rpmbuilder/rpm/RPMS/x86_64/\u306brpm\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u5148\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u305f\u3082\u306e\u3092\u6d88\u3057\u307e\u3059\u3002\n>$ sudo rpm -e nginx-release-centos-6-0.el6.ngx.noarch\n\nnginx\u5168\u3066\u306a\u304f\u306a\u3063\u3066\u3044\u308b\u306e\u3092\u78ba\u8a8d\n>$ rpm -qa | grep nginx\n\n\u4f5c\u6210\u3057\u305frpm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n>$ sudo rpm -ivh /home/rpmbuilder/rpm/RPMS/x86_64/nginx-1.4.7-1.el6.ngx.x86_64.rpm \n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fconfigure\u3092\u78ba\u8a8d\n>$ nginx -V\n\n#\u53c2\u8003URL\n\n\u3044\u307e\u3055\u3089\u805e\u3051\u306a\u3044rpmbuild\u3053\u3068\u306f\u3058\u3081\nhttp://blog.tnmt.info/2011/04/29/rpmbuild-for-beginner/\n\n\u3055\u304f\u3089\u306eVPS \u4e57\u308a\u63db\u3048\u5099\u5fd8\u9332 (Nginx \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb rpmbuild \u7de8)\nhttp://code-life.net/?p=2404\n\nRebuild a Source RPM\nhttp://wiki.centos.org/HowTos/RebuildSRPM\n\nRPM\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff0f\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306b\u306f\nhttp://www.atmarkit.co.jp/flinux/rensai/linuxtips/049instrpm.html\n#\u3055\u3044\u3054\u306b\n\u304a\u307e\u3058\u306a\u3044\u7684\u306b\u66f8\u3044\u3066\u3044\u308b\u3068\u5206\u304b\u3089\u306a\u3044\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002\n\u500b\u4eba\u7684\u306bsrc\u304b\u3089\u306emake\u6d3e\u306a\u306e\u3067rpm\u3067\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u610f\u5473\u3092\u8abf\u3079\u308b\u3068\u3053\u308d\n\u304b\u3089`rpm -ivh`\u3068 `rpm -Uvh`\u304b\u3089\u3001rpm\u3067\u8ffd\u52a0\u3057\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u524a\u9664\u306a\u3069\u306e\u7406\u89e3\u304c\u5fc5\u8981\u3067\u3057\u305f\u3002\n\n\u3053\u306e\u3042\u3068\u306e\u4f5c\u696d\u3067\u306f\u8a3c\u660e\u66f8\u306e\u8a2d\u5b9a\u3084service\u3067\u306e\u8d77\u52d5\u306a\u3069\u3092\u884c\u3044\u307e\u3059\u3002\n\u305d\u306e\u8fba\u308a\u306f[\u3053\u3053\u3089\u8fba](http://qiita.com/nofrmm/items/2c4e13e26914098bb584#3-6)\u306b\u8a18\u8f09\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u5272\u611b\u3057\u3066\u3044\u307e\u3059\u3002\n\n#\u304a\u307e\u3051\n##spdy\u306e\u78ba\u8a8d\u65b9\u6cd5\n\nfirefox\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\nhttps://addons.mozilla.org/ja/firefox/addon/spdy-indicator/\n\u3084\nchrome\u306eURL\u30b9\u30ad\u30fc\u30de\uff08\u3067\u3044\u3044\u306e\u304b\u306a\u30fb\u30fb\u30fb\uff09\u3092\u4f7f\u3046\u65b9\u6cd5\n> chrome://net-internals/#spdy\n\n\u304c\u591a\u304b\u3063\u305f\u306e\u3067\u3001\u30c1\u30a7\u30c3\u30af\u30b5\u30a4\u30c8\u3092\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n `\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u4f7f\u3063\u3066\u307e\u3059`\n`spdy/2\u306f\u4eca\u3055\u3089\u30c0\u30bb\u30fc\u304b\u3089spdy/3\u4f7f\u3048`\n\u306a\u3069\u3001\u7684\u78ba\u306a\u8a3a\u65ad\u3092\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\nhttp://spdycheck.org/\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-04-07 0.56.09.png](https://qiita-image-store.s3.amazonaws.com/0/12362/504383fd-48b2-71ad-5cc3-07b34e9a9040.png)", "tags": ["nginx", "rpm", "configure", "SakuraVPS", "SPDY"]}