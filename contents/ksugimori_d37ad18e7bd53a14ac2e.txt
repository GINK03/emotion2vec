{"context": "\n\njsoup\nJava\u3067 HTML \u306e\u30d1\u30fc\u30b9\u3092\u884c\u3046\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3002\n\u516c\u5f0f\u30b5\u30a4\u30c8\u306e Cookbook \u304c\u30b7\u30f3\u30d7\u30eb\u3067\u5206\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\nCSS, jQuery \u306e\u30bb\u30ec\u30af\u30bf\u3063\u307d\u3044\u63a2\u7d22\u304c\u53ef\u80fd\u306a\u306e\u3067\u6bd4\u8f03\u7684\u4f7f\u3044\u3084\u3059\u305d\u3046\u3002\n\n\u4f5c\u3063\u3066\u307f\u305f\u30b3\u30fc\u30c9\nYahoo!\u30cb\u30e5\u30fc\u30b9\u306e\u30c8\u30d4\u30c3\u30af\u30b9\u4e00\u89a7\u30da\u30fc\u30b8\u304b\u3089\u6307\u5b9a\u3057\u305f\u65e5\u4ed8\u306e\u30c8\u30d4\u30c3\u30af\u30b9\u4e00\u89a7\u3092\u53d6\u5f97\u3002\n\u5229\u7528\u4fa1\u5024\u306a\u3044\u6c17\u304c\u3057\u307e\u3059\u304cJSON\u5f62\u5f0f\u3067\u51fa\u529b\u3082\u3057\u307e\u3059\u3002\n\nTopic.java\npackage ksugimori.sample.jsoup;\n\npublic class Topic {\n    private String title;\n    private String url;\n    private String category;\n    private String date;\n\n    /**\n     * Constructor\n     */\n    public Topic(String title, String url, String category, String date) {\n        this.title = title;\n        this.url = url;\n        this.category = category;\n        this.date = date;\n    }\n\n    public String toString() {\n        StringBuilder s = new StringBuilder();\n        s.append(String.format(\" Title   : %s%n\", this.title));\n        s.append(String.format(\" Category: %s%n\", this.category));\n        s.append(String.format(\" Date    : %s%n\", this.date));\n        s.append(String.format(\" URL     : %s%n\", this.url));\n        return s.toString();\n    }\n\n    public String toJSON() {\n        String keyValFormat = \"\\\"%s\\\": \\\"%s\\\"\";\n        StringBuilder s = new StringBuilder();\n        s.append(\"{\");\n        s.append(String.format(keyValFormat, \"title\"   , this.title   )).append(\", \");\n        s.append(String.format(keyValFormat, \"url\"     , this.url     )).append(\", \");\n        s.append(String.format(keyValFormat, \"category\", this.category)).append(\", \");\n        s.append(String.format(keyValFormat, \"date\",     this.date    ));\n        s.append(\"}\");\n\n        return s.toString();\n    }\n}\n\n\n\nYahooTopicsParser.java\npackage ksugimori.sample.jsoup;\n\nimport java.io.IOException;\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.Date;\nimport java.util.List;\n\nimport org.jsoup.Jsoup;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.nodes.Element;\nimport org.jsoup.select.Elements;\n\npublic class YahooTopicsParser {\n    public static final String DATE_FORMAT = \"yyyyMMdd\";\n    public static final String URL = \"http://news.yahoo.co.jp/list/\";\n\n    /**\n     * \u6307\u5b9a\u3057\u305f\u65e5\u4ed8\u306e Topics \u3092\u53d6\u5f97\u3057\u307e\u3059\n     * \n     * @param date \u5bfe\u8c61\u65e5\u4ed8\n     * @return Topic \u306e\u30ea\u30b9\u30c8\n     */\n    public static List<Topic> parseAll(Date date) {\n        String dateStr = new SimpleDateFormat(DATE_FORMAT).format(date);\n\n        try {\n            Document doc = Jsoup.connect(URL).data(\"d\", dateStr).get(); // \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u3092 Connection.data() \u3067\u6307\u5b9a \n            Elements topicElements = doc.select(\"ul.list li\"); // Topics \u306e\u30ea\u30b9\u30c8\u3092\u62bd\u51fa\n            List<Topic> topicList = new ArrayList<Topic>();\n            for (Element element : topicElements) {\n                topicList.add(parse(element));\n            }\n            return topicList;\n        } catch (IOException e) {\n            System.out.println(\"Something wrong.\");\n            return Collections.emptyList();\n        }\n    }\n\n    /**\n     * \uff11\u30c8\u30d4\u30c3\u30af\u306e\u5185\u5bb9\u3092\u53d6\u5f97\u3057\u307e\u3059\n     * \n     * @param element \n     * @return Topic \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n     */\n    private static Topic parse(Element element) {\n        String title = element.select(\"span.ttl\").first().text();\n        String url = element.select(\"a\").first().attr(\"href\");\n        String category = element.select(\"span.cate\").first().text();\n        String date = element.select(\"span.date\").first().text();\n\n        return new Topic(title, url, category, date);\n    }\n}\n\n\n\nMain.java\npackage ksugimori.sample.jsoup;\n\nimport java.util.Date;\n\npublic class Main {\n    public static void main(String[] args) {\n        Date today = new Date();\n        for (Topic topic : YahooTopicsParser.parseAll(today)) {\n            System.out.println(topic.toJSON());\n            System.out.println(topic);\n        }\n    }\n}\n\n\n\n\u51fa\u529b\u4f8b\n{\"title\": \"\u91ce\u751f\u30c8\u30ad \u4eca\u5b63\u521d\u306e\u62b1\u5375\u59cb\u307e\u308b\", \"url\": \"http://news.yahoo.co.jp/pickup/6195256\", \"category\": \"\u79d1\u5b66\", \"date\": \"2016\u5e743\u670821\u65e5 22\u664221\u5206\"}\n Title   : \u91ce\u751f\u30c8\u30ad \u4eca\u5b63\u521d\u306e\u62b1\u5375\u59cb\u307e\u308b\n Category: \u79d1\u5b66\n Date    : 2016\u5e743\u670821\u65e5 22\u664221\u5206\n URL     : http://news.yahoo.co.jp/pickup/6195256\n\n...\n\n# jsoup\nJava\u3067 HTML \u306e\u30d1\u30fc\u30b9\u3092\u884c\u3046\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3002\n\u516c\u5f0f\u30b5\u30a4\u30c8\u306e [Cookbook](http://jsoup.org/cookbook/) \u304c\u30b7\u30f3\u30d7\u30eb\u3067\u5206\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\n\nCSS, jQuery \u306e\u30bb\u30ec\u30af\u30bf\u3063\u307d\u3044\u63a2\u7d22\u304c\u53ef\u80fd\u306a\u306e\u3067\u6bd4\u8f03\u7684\u4f7f\u3044\u3084\u3059\u305d\u3046\u3002\n\n# \u4f5c\u3063\u3066\u307f\u305f\u30b3\u30fc\u30c9\nYahoo!\u30cb\u30e5\u30fc\u30b9\u306e\u30c8\u30d4\u30c3\u30af\u30b9\u4e00\u89a7\u30da\u30fc\u30b8\u304b\u3089\u6307\u5b9a\u3057\u305f\u65e5\u4ed8\u306e\u30c8\u30d4\u30c3\u30af\u30b9\u4e00\u89a7\u3092\u53d6\u5f97\u3002\n\u5229\u7528\u4fa1\u5024\u306a\u3044\u6c17\u304c\u3057\u307e\u3059\u304cJSON\u5f62\u5f0f\u3067\u51fa\u529b\u3082\u3057\u307e\u3059\u3002\n\n```java:Topic.java\npackage ksugimori.sample.jsoup;\n\npublic class Topic {\n    private String title;\n    private String url;\n    private String category;\n    private String date;\n\n    /**\n     * Constructor\n     */\n    public Topic(String title, String url, String category, String date) {\n        this.title = title;\n        this.url = url;\n        this.category = category;\n        this.date = date;\n    }\n\n    public String toString() {\n        StringBuilder s = new StringBuilder();\n        s.append(String.format(\" Title   : %s%n\", this.title));\n        s.append(String.format(\" Category: %s%n\", this.category));\n        s.append(String.format(\" Date    : %s%n\", this.date));\n        s.append(String.format(\" URL     : %s%n\", this.url));\n        return s.toString();\n    }\n\n    public String toJSON() {\n        String keyValFormat = \"\\\"%s\\\": \\\"%s\\\"\";\n        StringBuilder s = new StringBuilder();\n        s.append(\"{\");\n        s.append(String.format(keyValFormat, \"title\"   , this.title   )).append(\", \");\n        s.append(String.format(keyValFormat, \"url\"     , this.url     )).append(\", \");\n        s.append(String.format(keyValFormat, \"category\", this.category)).append(\", \");\n        s.append(String.format(keyValFormat, \"date\",     this.date    ));\n        s.append(\"}\");\n\n        return s.toString();\n    }\n}\n```\n\n```java:YahooTopicsParser.java\npackage ksugimori.sample.jsoup;\n\nimport java.io.IOException;\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.Date;\nimport java.util.List;\n\nimport org.jsoup.Jsoup;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.nodes.Element;\nimport org.jsoup.select.Elements;\n\npublic class YahooTopicsParser {\n    public static final String DATE_FORMAT = \"yyyyMMdd\";\n    public static final String URL = \"http://news.yahoo.co.jp/list/\";\n\n    /**\n     * \u6307\u5b9a\u3057\u305f\u65e5\u4ed8\u306e Topics \u3092\u53d6\u5f97\u3057\u307e\u3059\n     * \n     * @param date \u5bfe\u8c61\u65e5\u4ed8\n     * @return Topic \u306e\u30ea\u30b9\u30c8\n     */\n    public static List<Topic> parseAll(Date date) {\n        String dateStr = new SimpleDateFormat(DATE_FORMAT).format(date);\n\n        try {\n            Document doc = Jsoup.connect(URL).data(\"d\", dateStr).get(); // \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u3092 Connection.data() \u3067\u6307\u5b9a \n            Elements topicElements = doc.select(\"ul.list li\"); // Topics \u306e\u30ea\u30b9\u30c8\u3092\u62bd\u51fa\n            List<Topic> topicList = new ArrayList<Topic>();\n            for (Element element : topicElements) {\n                topicList.add(parse(element));\n            }\n            return topicList;\n        } catch (IOException e) {\n            System.out.println(\"Something wrong.\");\n            return Collections.emptyList();\n        }\n    }\n\n    /**\n     * \uff11\u30c8\u30d4\u30c3\u30af\u306e\u5185\u5bb9\u3092\u53d6\u5f97\u3057\u307e\u3059\n     * \n     * @param element \n     * @return Topic \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n     */\n    private static Topic parse(Element element) {\n        String title = element.select(\"span.ttl\").first().text();\n        String url = element.select(\"a\").first().attr(\"href\");\n        String category = element.select(\"span.cate\").first().text();\n        String date = element.select(\"span.date\").first().text();\n\n        return new Topic(title, url, category, date);\n    }\n}\n```\n\n```java:Main.java\npackage ksugimori.sample.jsoup;\n\nimport java.util.Date;\n\npublic class Main {\n    public static void main(String[] args) {\n        Date today = new Date();\n        for (Topic topic : YahooTopicsParser.parseAll(today)) {\n            System.out.println(topic.toJSON());\n            System.out.println(topic);\n        }\n    }\n}\n```\n\n#\u51fa\u529b\u4f8b\n```\n{\"title\": \"\u91ce\u751f\u30c8\u30ad \u4eca\u5b63\u521d\u306e\u62b1\u5375\u59cb\u307e\u308b\", \"url\": \"http://news.yahoo.co.jp/pickup/6195256\", \"category\": \"\u79d1\u5b66\", \"date\": \"2016\u5e743\u670821\u65e5 22\u664221\u5206\"}\n Title   : \u91ce\u751f\u30c8\u30ad \u4eca\u5b63\u521d\u306e\u62b1\u5375\u59cb\u307e\u308b\n Category: \u79d1\u5b66\n Date    : 2016\u5e743\u670821\u65e5 22\u664221\u5206\n URL     : http://news.yahoo.co.jp/pickup/6195256\n\n...\n```\n", "tags": ["Java", "jsoup", "\u30e1\u30e2"]}