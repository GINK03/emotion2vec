{"context": "2017/2/3 \u66f4\u65b0\n\u30b3\u30e1\u30f3\u30c8\u3067\u3054\u6559\u6388\u3044\u305f\u3060\u3044\u305f\u3068\u304a\u308a\u3001android:selectedItemPosition\u3068\u3044\u3046\u5b9a\u7fa9\u6e08\u307fattribute\u304c\u65e2\u306b\u5b58\u5728\u3057\u3066\u3044\u307e\u3057\u305f\u306e\u3067\u305d\u3061\u3089\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u6539\u3081\u307e\u3057\u305f\u3002\n\u53c2\u8003\uff1aAndroid data binding\u3067\u5b9a\u7fa9\u6e08\u307f\u306e\u5c5e\u6027\u30ea\u30b9\u30c8 - Qiita\n\n\u9078\u629e\u80a2\u3068\u3057\u3066\u306e\u30c6\u30ad\u30b9\u30c8\u3067\u306f\u306a\u304f\u9078\u629e\u4f4d\u7f6e\u306b\u5fdc\u3058\u305f\u30b3\u30fc\u30c9\u5024\u3092\u53d6\u5f97\u3057\u305f\u3044\u3068\u304b\u3001\u5225\u306e\u51e6\u7406\u306b\u5fdc\u3058\u3066\u30b3\u30fc\u30c9\u5074\u304b\u3089Spinner\u306e\u9078\u629e\u4f4d\u7f6e\u3092\u64cd\u4f5c\u3057\u305f\u3044\u3068\u3044\u3046\u3088\u3046\u306a\u3053\u3068\u3063\u3066\u30ae\u30e7\u30fc\u30e0\u30a2\u30d7\u30ea\u3067\u306f\u3088\u304f\u3042\u308b\u3053\u3068\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\u4eca\u307e\u3067\u306fActivity\u306a\u308aFragment\u306a\u308a\u306b\u30b4\u30ea\u30b4\u30ea\u51e6\u7406\u3092\u66f8\u3044\u3066\u3044\u307e\u3057\u305f\u304c\u3001DataBinding\u3092\u5c0e\u5165\u3057\u3066\u3082\u3046\u3061\u3087\u3063\u3068\u52b9\u7387\u3088\u304f\u3067\u304d\u306a\u3044\u304b\u3068\u8003\u3048\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30b3\u30fc\u30c9\n\nBindingAdapter\nAdapterView.selectedItemPosition\u3092\u5229\u7528\u3057\u307e\u3059\u306e\u3067\u3001TextView\u306eandroid:text attribute\u306bString\u3092\u30d0\u30a4\u30f3\u30c9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u8a18\u8ff0\u3092\u52a0\u3048\u308b\u3060\u3051\u3067\u3059\u3002\npublic class DataBindingAdapter {\n    @BindingAdapter(\"android:text\")\n    public static void setTextViewText(TextView textView, String text) {\n        if (text != null) {\n            textView.setText(text);\n        } else {\n            textView.setText(\"\");\n        }\n    }\n}\n\n\nViewModel\n\u4eca\u56de\u306f\u30b5\u30f3\u30d7\u30eb\u306e\u305f\u3081ViewModel\u3060\u3051\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\npublic class MainViewModel extends BaseObservable {\n    private final String[] values;\n    private final View.OnClickListener onClickListener;\n\n    private String selectedText;\n    private int selectedPosition;\n\n    public MainViewModel(String[] values) {\n        this.values = values;\n        this.onClickListener = new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                setSelectedPosition(0);\n            }\n        };\n    }\n\n    public View.OnClickListener getOnClickListener() {\n        return onClickListener;\n    }\n\n    @Bindable\n    public String getSelectedText() {\n        return selectedText;\n    }\n\n    @Bindable\n    public int getSelectedPosition() {\n        return selectedPosition;\n    }\n\n    public void setSelectedText(String selectedText) {\n        this.selectedText = selectedText;\n        notifyPropertyChanged(BR.selectedText);\n    }\n\n    public void setSelectedPosition(int selectedPosition) {\n        this.selectedPosition = selectedPosition;\n        notifyPropertyChanged(BR.selectedPosition);\n        setSelectedText(this.values[selectedPosition]);\n    }\n}\n\n\n\u30ec\u30a4\u30a2\u30a6\u30c8\nactivity_main.xml\u306e\u30ec\u30a4\u30a2\u30a6\u30c8\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002Spinner\u306e\u9078\u629e\u80a2\u306b\u5fdc\u3058\u305f\u30c6\u30ad\u30b9\u30c8\u3092TextView\u306b\u8868\u793a\u3059\u308b\u306e\u3068\u3001Butten\u3092\u62bc\u3057\u305f\u3089Spinner\u306e\u9078\u629e\u4f4d\u7f6e\u3092\u5148\u982d\u306b\u30ea\u30bb\u30c3\u30c8\u3059\u308b\u306e\u304c\u76ee\u6a19\u3067\u3059\u3002\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<layout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    >\n    <data>\n        <variable\n            name=\"viewModel\"\n            type=\"com.example.trs.spinnerbindingsample.MainViewModel\"/>\n    </data>\n    <RelativeLayout\n        android:id=\"@+id/activity_main\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:paddingBottom=\"@dimen/activity_vertical_margin\"\n        android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n        android:paddingRight=\"@dimen/activity_horizontal_margin\"\n        android:paddingTop=\"@dimen/activity_vertical_margin\"\n        tools:context=\"com.example.trs.spinnerbindingsample.MainActivity\">\n        <Spinner\n            android:id=\"@+id/spinner\"\n            android:layout_alignParentTop=\"true\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:entries=\"@array/spinner_code\"\n            android:selectedItemPosition=\"@={viewModel.selectedPosition}\"\n            />\n        <TextView\n            android:id=\"@+id/text\"\n            android:layout_below=\"@id/spinner\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:textSize=\"20sp\"\n            android:text=\"@{viewModel.selectedText}\"\n            />\n        <Button\n            android:layout_below=\"@id/text\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"\u30ea\u30bb\u30c3\u30c8\"\n            android:onClick=\"@{viewModel.onClickListener}\"\n            />\n    </RelativeLayout>\n</layout>\n\nMainActivity.java\u306fDataBinding\u3092\u5b9a\u7fa9\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    ActivityMainBinding binding = DataBindingUtil.setContentView(this, R.layout.activity_main);\n    MainViewModel viewModel = new MainViewModel(getResources().getStringArray(R.array.spinner_value));\n    binding.setViewModel(viewModel);\n}\n\n\n\u30ea\u30bd\u30fc\u30b9\nSpinner\u3067\u8868\u793a\u3059\u308b\u305f\u3081\u306estring-array\u3068\u305d\u308c\u306b\u5fdc\u3058\u305f\u30c6\u30ad\u30b9\u30c8\u3092\u53ce\u3081\u305fstring-array\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<resources>\n    <string-array name=\"spinner_code\">\n        <item>\u6211\u304c\u540d\u306f\u30d6\u30ea\u30e5\u30f3\u30d2\u30eb\u30c7\uff01</item>\n        <item>\u95c7\u306b\u98f2\u307e\u308c\u3088\uff01</item>\n        <item>\u7169\u308f\u3057\u3044\u592a\u967d\u306d\uff01</item>\n        <item>\u6211\u304c\u53cb\u3088\uff01</item>\n        <item>\u6211\u306b\u529b\u3092\uff01</item>\n    </string-array>\n    <string-array name=\"spinner_value\">\n        <item>\u795e\u5d0e\u862d\u5b50\u3067\u3059\uff01</item>\n        <item>\u304a\u75b2\u308c\u69d8\u3067\u3059\uff01</item>\n        <item>\u304a\u306f\u3088\u3046\u3054\u3056\u3044\u307e\u3059\uff01</item>\n        <item>\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u3055\u3093\uff01</item>\n        <item>\u30ec\u30c3\u30b9\u30f3\u304a\u9858\u3044\u3057\u307e\u3059\uff01</item>\n    </string-array>\n</resources>\n\n\n\u5b9f\u884c\n\n\n\n\n\u53c2\u8003\njava - Android spinner Data Binding using XML and show the selected values - Stack Overflow\nAndroid BindingAdapter order of execution? - Stack Overflow\n\u4eca\u66f4\u9045\u308c\u3066DataBinding\u4e8b\u59cb\u3081(3.7) - exception think\n\n2017/2/3 \u66f4\u65b0\n\n\u30b3\u30e1\u30f3\u30c8\u3067\u3054\u6559\u6388\u3044\u305f\u3060\u3044\u305f\u3068\u304a\u308a\u3001android:selectedItemPosition\u3068\u3044\u3046\u5b9a\u7fa9\u6e08\u307fattribute\u304c\u65e2\u306b\u5b58\u5728\u3057\u3066\u3044\u307e\u3057\u305f\u306e\u3067\u305d\u3061\u3089\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u6539\u3081\u307e\u3057\u305f\u3002\n\u53c2\u8003\uff1a[Android data binding\u3067\u5b9a\u7fa9\u6e08\u307f\u306e\u5c5e\u6027\u30ea\u30b9\u30c8 - Qiita](http://qiita.com/kobakei/items/5e902dd24005e6768ac4)\n\n---\n\n\u9078\u629e\u80a2\u3068\u3057\u3066\u306e\u30c6\u30ad\u30b9\u30c8\u3067\u306f\u306a\u304f\u9078\u629e\u4f4d\u7f6e\u306b\u5fdc\u3058\u305f\u30b3\u30fc\u30c9\u5024\u3092\u53d6\u5f97\u3057\u305f\u3044\u3068\u304b\u3001\u5225\u306e\u51e6\u7406\u306b\u5fdc\u3058\u3066\u30b3\u30fc\u30c9\u5074\u304b\u3089Spinner\u306e\u9078\u629e\u4f4d\u7f6e\u3092\u64cd\u4f5c\u3057\u305f\u3044\u3068\u3044\u3046\u3088\u3046\u306a\u3053\u3068\u3063\u3066\u30ae\u30e7\u30fc\u30e0\u30a2\u30d7\u30ea\u3067\u306f\u3088\u304f\u3042\u308b\u3053\u3068\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u4eca\u307e\u3067\u306fActivity\u306a\u308aFragment\u306a\u308a\u306b\u30b4\u30ea\u30b4\u30ea\u51e6\u7406\u3092\u66f8\u3044\u3066\u3044\u307e\u3057\u305f\u304c\u3001DataBinding\u3092\u5c0e\u5165\u3057\u3066\u3082\u3046\u3061\u3087\u3063\u3068\u52b9\u7387\u3088\u304f\u3067\u304d\u306a\u3044\u304b\u3068\u8003\u3048\u3066\u307f\u307e\u3057\u305f\u3002\n\n# \u30b3\u30fc\u30c9\n\n## BindingAdapter\n\nAdapterView.selectedItemPosition\u3092\u5229\u7528\u3057\u307e\u3059\u306e\u3067\u3001TextView\u306eandroid:text attribute\u306bString\u3092\u30d0\u30a4\u30f3\u30c9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u8a18\u8ff0\u3092\u52a0\u3048\u308b\u3060\u3051\u3067\u3059\u3002\n\n```java\npublic class DataBindingAdapter {\n    @BindingAdapter(\"android:text\")\n    public static void setTextViewText(TextView textView, String text) {\n        if (text != null) {\n            textView.setText(text);\n        } else {\n            textView.setText(\"\");\n        }\n    }\n}\n```\n\n## ViewModel\n\n\u4eca\u56de\u306f\u30b5\u30f3\u30d7\u30eb\u306e\u305f\u3081ViewModel\u3060\u3051\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\n```java\npublic class MainViewModel extends BaseObservable {\n    private final String[] values;\n    private final View.OnClickListener onClickListener;\n\n    private String selectedText;\n    private int selectedPosition;\n\n    public MainViewModel(String[] values) {\n        this.values = values;\n        this.onClickListener = new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                setSelectedPosition(0);\n            }\n        };\n    }\n\n    public View.OnClickListener getOnClickListener() {\n        return onClickListener;\n    }\n\n    @Bindable\n    public String getSelectedText() {\n        return selectedText;\n    }\n\n    @Bindable\n    public int getSelectedPosition() {\n        return selectedPosition;\n    }\n\n    public void setSelectedText(String selectedText) {\n        this.selectedText = selectedText;\n        notifyPropertyChanged(BR.selectedText);\n    }\n\n    public void setSelectedPosition(int selectedPosition) {\n        this.selectedPosition = selectedPosition;\n        notifyPropertyChanged(BR.selectedPosition);\n        setSelectedText(this.values[selectedPosition]);\n    }\n}\n```\n\n## \u30ec\u30a4\u30a2\u30a6\u30c8\n\nactivity_main.xml\u306e\u30ec\u30a4\u30a2\u30a6\u30c8\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002Spinner\u306e\u9078\u629e\u80a2\u306b\u5fdc\u3058\u305f\u30c6\u30ad\u30b9\u30c8\u3092TextView\u306b\u8868\u793a\u3059\u308b\u306e\u3068\u3001Butten\u3092\u62bc\u3057\u305f\u3089Spinner\u306e\u9078\u629e\u4f4d\u7f6e\u3092\u5148\u982d\u306b\u30ea\u30bb\u30c3\u30c8\u3059\u308b\u306e\u304c\u76ee\u6a19\u3067\u3059\u3002\n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<layout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    >\n    <data>\n        <variable\n            name=\"viewModel\"\n            type=\"com.example.trs.spinnerbindingsample.MainViewModel\"/>\n    </data>\n    <RelativeLayout\n        android:id=\"@+id/activity_main\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:paddingBottom=\"@dimen/activity_vertical_margin\"\n        android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n        android:paddingRight=\"@dimen/activity_horizontal_margin\"\n        android:paddingTop=\"@dimen/activity_vertical_margin\"\n        tools:context=\"com.example.trs.spinnerbindingsample.MainActivity\">\n        <Spinner\n            android:id=\"@+id/spinner\"\n            android:layout_alignParentTop=\"true\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:entries=\"@array/spinner_code\"\n            android:selectedItemPosition=\"@={viewModel.selectedPosition}\"\n            />\n        <TextView\n            android:id=\"@+id/text\"\n            android:layout_below=\"@id/spinner\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:textSize=\"20sp\"\n            android:text=\"@{viewModel.selectedText}\"\n            />\n        <Button\n            android:layout_below=\"@id/text\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"\u30ea\u30bb\u30c3\u30c8\"\n            android:onClick=\"@{viewModel.onClickListener}\"\n            />\n    </RelativeLayout>\n</layout>\n```\n\nMainActivity.java\u306fDataBinding\u3092\u5b9a\u7fa9\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n\n```java\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    ActivityMainBinding binding = DataBindingUtil.setContentView(this, R.layout.activity_main);\n    MainViewModel viewModel = new MainViewModel(getResources().getStringArray(R.array.spinner_value));\n    binding.setViewModel(viewModel);\n}\n```\n\n## \u30ea\u30bd\u30fc\u30b9\n\nSpinner\u3067\u8868\u793a\u3059\u308b\u305f\u3081\u306estring-array\u3068\u305d\u308c\u306b\u5fdc\u3058\u305f\u30c6\u30ad\u30b9\u30c8\u3092\u53ce\u3081\u305fstring-array\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<resources>\n    <string-array name=\"spinner_code\">\n        <item>\u6211\u304c\u540d\u306f\u30d6\u30ea\u30e5\u30f3\u30d2\u30eb\u30c7\uff01</item>\n        <item>\u95c7\u306b\u98f2\u307e\u308c\u3088\uff01</item>\n        <item>\u7169\u308f\u3057\u3044\u592a\u967d\u306d\uff01</item>\n        <item>\u6211\u304c\u53cb\u3088\uff01</item>\n        <item>\u6211\u306b\u529b\u3092\uff01</item>\n    </string-array>\n    <string-array name=\"spinner_value\">\n        <item>\u795e\u5d0e\u862d\u5b50\u3067\u3059\uff01</item>\n        <item>\u304a\u75b2\u308c\u69d8\u3067\u3059\uff01</item>\n        <item>\u304a\u306f\u3088\u3046\u3054\u3056\u3044\u307e\u3059\uff01</item>\n        <item>\u30d7\u30ed\u30c7\u30e5\u30fc\u30b5\u30fc\u3055\u3093\uff01</item>\n        <item>\u30ec\u30c3\u30b9\u30f3\u304a\u9858\u3044\u3057\u307e\u3059\uff01</item>\n    </string-array>\n</resources>\n```\n\n# \u5b9f\u884c\n\n![\u521d\u671f\u72b6\u614b](https://qiita-image-store.s3.amazonaws.com/0/21354/f7ea83ea-a9d6-7a91-6e67-0043d36eed2b.png)\n\n![Spinner\u5c55\u958b\u3057\u3066\u9078\u629e](https://qiita-image-store.s3.amazonaws.com/0/21354/92b2978c-6211-b653-9a56-4809ee9f7181.png)\n\n![\u9078\u629e\u5f8c](https://qiita-image-store.s3.amazonaws.com/0/21354/9c3deee2-adc8-3d79-6a07-17ae99d3cb6e.png)\n\n# \u53c2\u8003\n\n[java - Android spinner Data Binding using XML and show the selected values - Stack Overflow](http://stackoverflow.com/questions/37874091/android-spinner-data-binding-using-xml-and-show-the-selected-values)\n\n[Android BindingAdapter order of execution? - Stack Overflow](http://stackoverflow.com/questions/40932933/android-bindingadapter-order-of-execution)\n\n[\u4eca\u66f4\u9045\u308c\u3066DataBinding\u4e8b\u59cb\u3081(3.7) - exception think](http://exception-think.hatenablog.com/entry/20161118/1479479400)\n", "tags": ["Android", "DataBinding"]}