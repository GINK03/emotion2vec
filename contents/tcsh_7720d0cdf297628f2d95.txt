{"context": " More than 1 year has passed since last update.AWS CLI\u3092\u5229\u7528\u3057\u3066\u3001ECS\u4e0a\u306b\u30bf\u30b9\u30af\u5b9a\u7fa9\u3092\u767b\u9332\u3001\u30bf\u30b9\u30af\u5b9f\u884c\u3001\u30bf\u30b9\u30af\u5b9a\u7fa9\u306e\u524a\u9664\u3092\u3057\u3066\u307f\u307e\u3059\u3002\n\u53c2\u8003: http://docs.aws.amazon.com/AmazonECS/latest/developerguide/ECS_AWSCLI.html#AWSCLI_register_task_definition\n\n\u524d\u63d0\u6761\u4ef6\n\nECS\u3078\u306e\u6a29\u9650\n\nECS\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\n\nAWS CLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\n\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\nAWS CLI 1.7.36\n\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws --version\n\n\n\n\u7d50\u679c(\u4f8b)\n      aws-cli/1.7.28 Python/2.7.5 Darwin/13.4.0\n\n\n\n0. \u6e96\u5099\n\n0.1. \u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u6c7a\u5b9a\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nexport AWS_DEFAULT_REGION='ap-northeast-1'\n\n\n\n0.2. \u5909\u6570\u306e\u78ba\u8a8d\n\n\u5909\u6570\u306e\u78ba\u8a8d\naws configure list\n\n\n\n\u7d50\u679c(\u4f8b)\n            Name                    Value             Type    Location\n            ----                    -----             ----    --------\n         profile   ec2ecs_full-prjZ-mbp13              env    AWS_DEFAULT_PROFILE\n      access_key     ****************LOAQ shared-credentials-file\n      secret_key     ****************I1O1 shared-credentials-file\n          region           ap-northeast-1              env    AWS_DEFAULT_REGION\n\n\n\n1. \u4e8b\u524d\u4f5c\u696d\n\n1.1. \u30bf\u30b9\u30af\u5b9a\u7fa9\u540d\u306e\u6c7a\u5b9a\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nECS_TASK_DEFINITION_NAME='sleep360'\n\n\n\u540c\u3058\u540d\u524d\u306e\u30bf\u30b9\u30af\u5b9a\u7fa9\u540d\u304c\u5b58\u5728\u3057\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\naws ecs describe-task-definition \\\n        --task-definition ${ECS_TASK_DEFINITION_NAME}\n\n\n\n\u7d50\u679c(\u4f8b)\n      A client error (ClientException) occurred when calling the DescribeTaskDefinition operation: Unable to describe task definition.\n\n\n\n1.2. \u30bf\u30b9\u30af\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nFILE_ECS_TASK_DEFINITION='sleep360.json'\n\n\n\n\u30b3\u30de\u30f3\u30c9\ncat << EOF > ${FILE_ECS_TASK_DEFINITION}\n{\n        \"containerDefinitions\": [\n          {\n            \"name\": \"sleep\",\n            \"image\": \"busybox\",\n            \"cpu\": 10,\n            \"command\": [\n              \"sleep\",\n              \"360\"\n            ],\n            \"memory\": 10,\n            \"essential\": true\n          }\n        ],\n        \"family\": \"sleep360\"\n}\nEOF\n\n\nJSON\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u58ca\u308c\u3066\u306a\u3044\u304b\u5fc5\u305a\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\njsonlint -q ${FILE_ECS_TASK_DEFINITION}\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n\n2. \u30bf\u30b9\u30af\u5b9a\u7fa9\u306e\u767b\u9332\n\n2.1. \u30bf\u30b9\u30af\u5b9a\u7fa9\u306e\u4f5c\u6210\n\n\u30b3\u30de\u30f3\u30c9\naws ecs register-task-definition \\\n        --cli-input-json file://${FILE_ECS_TASK_DEFINITION}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"taskDefinition\": {\n          \"status\": \"ACTIVE\",\n          \"family\": \"sleep360\",\n          \"volumes\": [],\n          \"taskDefinitionArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task-definition/sleep360:1\",\n          \"containerDefinitions\": [\n              {\n                  \"environment\": [],\n                  \"name\": \"sleep\",\n                  \"mountPoints\": [],\n                  \"image\": \"busybox\",\n                  \"cpu\": 10,\n                  \"portMappings\": [],\n                  \"command\": [\n                      \"sleep\",\n                      \"360\"\n                  ],\n                  \"memory\": 10,\n                  \"essential\": true,\n                  \"volumesFrom\": []\n              }\n          ],\n          \"revision\": 1\n        }\n      }\n\n\n\n2.2. \u30bf\u30b9\u30af\u5b9a\u7fa9\u306e\u4e00\u89a7\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\naws ecs list-task-definition-families \\\n        --family-prefix ${ECS_TASK_DEFINITION_NAME}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"families\": [\n          \"sleep360\"\n        ]\n      }\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws ecs list-task-definitions \\\n         --family-prefix ${ECS_TASK_DEFINITION_NAME}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"taskDefinitionArns\": [\n          \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task-definition/sleep360:1\"\n        ]\n      }\n\n\n\n2.3. \u30bf\u30b9\u30af\u5b9a\u7fa9\u306e\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\naws ecs describe-task-definition \\\n        --task-definition ${ECS_TASK_DEFINITION_NAME}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"taskDefinition\": {\n          \"status\": \"ACTIVE\",\n          \"family\": \"sleep360\",\n          \"volumes\": [],\n          \"taskDefinitionArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task-definition/sleep360:1\",\n          \"containerDefinitions\": [\n              {\n                  \"environment\": [],\n                  \"name\": \"sleep\",\n                  \"mountPoints\": [],\n                  \"image\": \"busybox\",\n                  \"cpu\": 10,\n                  \"portMappings\": [],\n                  \"command\": [\n                      \"sleep\",\n                      \"360\"\n                  ],\n                  \"memory\": 10,\n                  \"essential\": true,\n                  \"volumesFrom\": []\n              }\n          ],\n          \"revision\": 1\n        }\n      }\n\n\n\n3. \u30bf\u30b9\u30af\u306e\u5b9f\u884c\n\n3.1. \u30bf\u30b9\u30af\u306e\u5b9f\u884c\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6570\u306e\u6307\u5b9a\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nECS_INSTANCE_COUNT='1'\n\n\n\n3.2. \u30bf\u30b9\u30af\u306e\u5b9f\u884c\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n        ECS_TASK_DEFINITION_NAME: ${ECS_TASK_DEFINITION_NAME}\n        ECS_CLUSTER_NAME: ${ECS_CLUSTER_NAME}\n        ECS_INSTANCE_COUNT: ${ECS_INSTANCE_COUNT}\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws ecs run-task \\\n        --task-definition ${ECS_TASK_DEFINITION_NAME} \\\n        --cluster ${ECS_CLUSTER_NAME} \\\n        --count ${ECS_INSTANCE_COUNT}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"failures\": [],\n        \"tasks\": [\n          {\n              \"taskArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n              \"overrides\": {\n                  \"containerOverrides\": [\n                      {\n                          \"name\": \"sleep\"\n                      }\n                  ]\n              },\n              \"lastStatus\": \"PENDING\",\n              \"containerInstanceArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:container-instance/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n              \"clusterArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:cluster/handson-cluster\",\n              \"desiredStatus\": \"RUNNING\",\n              \"taskDefinitionArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task-definition/sleep360:1\",\n              \"containers\": [\n                  {\n                      \"containerArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:container/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n                      \"taskArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n                      \"lastStatus\": \"PENDING\",\n                      \"name\": \"sleep\"\n                  }\n              ]\n          }\n        ]\n      }\n\n\n\n3.3. \u30bf\u30b9\u30af\u4e00\u89a7\u306e\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\naws ecs list-tasks \\\n        --cluster ${ECS_CLUSTER_NAME}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"taskArns\": [\n          \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\"\n        ]\n      }\n\n\n\n3.4. \u7a3c\u52d5\u30bf\u30b9\u30af\u306e\u5185\u5bb9\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\nARRAY_ECS_TASKS_UUID=$( \\\n        aws ecs list-tasks \\\n          --cluster ${ECS_CLUSTER_NAME} \\\n          --query 'taskArns[]' \\\n          --output text | \\\n        sed 's|^arn:.*/||' \\\n) \\\n        && echo ${ARRAY_ECS_TASKS_UUID}\n\n\n\n\u7d50\u679c(\u4f8b)\n      xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws ecs describe-tasks \\\n        --tasks \"${ARRAY_ECS_TASKS_UUID}\" \\\n        --cluster ${ECS_CLUSTER_NAME}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"failures\": [],\n        \"tasks\": [\n          {\n              \"taskArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/f703ae48-07a0-410c-9ee5-c1e894512445\",\n              \"overrides\": {\n                  \"containerOverrides\": [\n                      {\n                          \"name\": \"sleep\"\n                      }\n                  ]\n              },\n              \"lastStatus\": \"RUNNING\",\n              \"containerInstanceArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:container-instance/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n              \"clusterArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:cluster/handson-cluster\",\n              \"desiredStatus\": \"RUNNING\",\n              \"taskDefinitionArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task-definition/sleep360:1\",\n              \"containers\": [\n                  {\n                      \"containerArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:container/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n                      \"taskArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n                      \"name\": \"sleep\",\n                      \"networkBindings\": [],\n                      \"lastStatus\": \"RUNNING\",\n                      \"exitCode\": 0\n                  }\n              ]\n            }\n          ]\n        }\n\n\n\n\u5909\u6570\u306e\u8a2d\u5b9a\nECS_TASK_UUID=$(echo ${ARRAY_ECS_TASKS_UUID} | sed 's/ .*$//') \\\n          && echo ${ECS_TASK_UUID}\n\n\n\n3.5. \u7a3c\u52d5\u30bf\u30b9\u30af\u306e\u4e2d\u65ad\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n        ECS_TASK_UUID:    ${ECS_TASK_UUID}\n        ECS_CLUSTER_NAME: ${ECS_CLUSTER_NAME}\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws ecs stop-task \\\n        --task ${ECS_TASK_UUID} \\\n        --cluster ${ECS_CLUSTER_NAME}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"task\": {\n          \"taskArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/824a4122-be46-4371-b85d-896c3f0ba33e\",\n          \"overrides\": {\n              \"containerOverrides\": [\n                  {\n                      \"name\": \"sleep\"\n                  }\n              ]\n          },\n          \"lastStatus\": \"RUNNING\",\n          \"containerInstanceArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:container-instance/2e6ab46e-6696-4a7c-b948-f7cbcd983b01\",\n          \"clusterArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:cluster/handson-cluster\",\n          \"desiredStatus\": \"STOPPED\",\n          \"taskDefinitionArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task-definition/sleep360:1\",\n          \"containers\": [\n              {\n                  \"containerArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:container/f2b6cf52-5b37-4775-baff-bedfa21fb04c\",\n                  \"taskArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/824a4122-be46-4371-b85d-896c3f0ba33e\",\n                  \"name\": \"sleep\",\n                  \"networkBindings\": [],\n                  \"lastStatus\": \"RUNNING\",\n                  \"exitCode\": 0\n              }\n          ]\n        }\n      }\n\n\n\n\u30b3\u30de\u30f3\u30c9\nECS_TASK_STATUS_DESIRED=$( \\\n        aws ecs describe-tasks \\\n          --tasks \"${ARRAY_ECS_TASKS_UUID}\" \\\n          --cluster ${ECS_CLUSTER_NAME} \\\n          --query 'tasks[].desiredStatus' \\\n          --output text \\\n) \\\n        && echo ${ECS_TASK_STATUS_DESIRED}\n\n\n\n\u7d50\u679c(\u4f8b)\n      STOPPED\n\n\n\n\u30b3\u30de\u30f3\u30c9\nECS_TASK_STATUS_LAST=$( \\\n        aws ecs describe-tasks \\\n          --tasks \"${ARRAY_ECS_TASKS_UUID}\" \\\n          --cluster ${ECS_CLUSTER_NAME} \\\n          --query 'tasks[].lastStatus' \\\n          --output text \\\n) \\\n        && echo ${ECS_TASK_STATUS_LAST}\n\n\n\n\u7d50\u679c(\u4f8b)\n      STOPPED\n\n\n\n3.6. \u7279\u5b9a\u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u306e\u30bf\u30b9\u30af\u306e\u5b9f\u884c&\u505c\u6b62\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n        ECS_TASK_DEFINITION_NAME: ${ECS_TASK_DEFINITION_NAME}\n        ECS_CLUSTER_NAME:         ${ECS_CLUSTER_NAME}\n        ECS_INSTANCES:           \"${ECS_INSTANCES}\"\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws ecs start-task \\\n        --task-definition ${ECS_TASK_DEFINITION_NAME} \\\n        --cluster ${ECS_CLUSTER_NAME} \\\n        --container-instances \"${ECS_INSTANCES}\"\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"failures\": [],\n        \"tasks\": [\n          {\n              \"taskArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/3322b402-ab6b-4d22-98bc-e2f48a83dc63\",\n              \"overrides\": {\n                  \"containerOverrides\": [\n                      {\n                          \"name\": \"sleep\"\n                      }\n                  ]\n              },\n              \"lastStatus\": \"PENDING\",\n              \"containerInstanceArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:container-instance/2e6ab46e-6696-4a7c-b948-f7cbcd983b01\",\n              \"clusterArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:cluster/handson-cluster\",\n              \"desiredStatus\": \"RUNNING\",\n              \"taskDefinitionArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task-definition/sleep360:1\",\n              \"containers\": [\n                  {\n                      \"containerArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:container/b907fa72-2efb-4120-affe-0f70cd32005e\",\n                      \"taskArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/3322b402-ab6b-4d22-98bc-e2f48a83dc63\",\n                      \"lastStatus\": \"PENDING\",\n                      \"name\": \"sleep\"\n                  }\n              ]\n          }\n        ]\n      }\n\n\n\n\u30b3\u30de\u30f3\u30c9\nARRAY_ECS_TASKS_UUID=$( \\\n        aws ecs list-tasks \\\n          --cluster ${ECS_CLUSTER_NAME} \\\n          --query 'taskArns[]' \\\n          --output text | \\\n        sed 's|^arn:.*/||' \\\n) \\\n        && echo ${ARRAY_ECS_TASKS_UUID}\n\n\n\n\u7d50\u679c(\u4f8b)\n      xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n\n\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n        ECS_TASK_UUID:    ${ECS_TASK_UUID}\n        ECS_CLUSTER_NAME: ${ECS_CLUSTER_NAME}\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws ecs stop-task \\\n        --task ${ECS_TASK_UUID} \\\n        --cluster ${ECS_CLUSTER_NAME}\n\n\n\n\u30b3\u30de\u30f3\u30c9\nECS_TASK_STATUS_LAST=$( \\\n        aws ecs describe-tasks \\\n          --tasks \"${ARRAY_ECS_TASKS_UUID}\" \\\n          --cluster ${ECS_CLUSTER_NAME} \\\n          --query 'tasks[].lastStatus' \\\n          --output text \\\n) \\\n        && echo ${ECS_TASK_STATUS_LAST}\n\n\n\n\u7d50\u679c(\u4f8b)\n      STOPPED\n\n\n\n4. \u30bf\u30b9\u30af\u5b9a\u7fa9\u306e\u524a\u9664\n\u30bf\u30b9\u30af\u5b9a\u7fa9\u306e\u524a\u9664\u306b\u306f\u3001\u30ea\u30d3\u30b8\u30e7\u30f3\u60c5\u5831\u304c\u5fc5\u8981\u306b\u306a\u308b\u306e\u3067\u3001\u30bf\u30b9\u30af\u5b9a\u7fa9\u304b\u3089\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\nECS_TASK_DEFINITION_REVISION=$( \\\n        aws ecs describe-task-definition \\\n          --task-definition ${ECS_TASK_DEFINITION_NAME} \\\n          --query 'taskDefinition.revision' \\\n          --output text \\\n) \\\n        && echo ${ECS_TASK_DEFINITION_REVISION}\n\n\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\n        ECS_TASK_DEFINITION_NAME:     ${ECS_TASK_DEFINITION_NAME}\n        ECS_TASK_DEFINITION_REVISION: ${ECS_TASK_DEFINITION_REVISION}\n\nETX\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws ecs deregister-task-definition \\\n        --task-definition ${ECS_TASK_DEFINITION_NAME}:${ECS_TASK_DEFINITION_REVISION}\n\n\n\n\u7d50\u679c(\u4f8b)\n      {\n        \"taskDefinition\": {\n          \"status\": \"INACTIVE\",\n          \"family\": \"sleep360\",\n          \"volumes\": [],\n          \"taskDefinitionArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task-definition/sleep360:1\",\n          \"containerDefinitions\": [\n              {\n                  \"environment\": [],\n                  \"name\": \"sleep\",\n                  \"mountPoints\": [],\n                  \"image\": \"busybox\",\n                  \"cpu\": 10,\n                  \"portMappings\": [],\n                  \"command\": [\n                      \"sleep\",\n                      \"360\"\n                  ],\n                  \"memory\": 10,\n                  \"essential\": true,\n                  \"volumesFrom\": []\n              }\n          ],\n          \"revision\": 1\n        }\n      }\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws ecs describe-task-definition \\\n        --task-definition ${ECS_TASK_DEFINITION_NAME}\n\n\n\n\u7d50\u679c(\u4f8b)\n      A client error (ClientException) occurred when calling the DescribeTaskDefinition operation: Unable to describe task definition.\n\n\n\n\u5b8c\u4e86\nAWS CLI\u3092\u5229\u7528\u3057\u3066\u3001ECS\u4e0a\u306b\u30bf\u30b9\u30af\u5b9a\u7fa9\u3092\u767b\u9332\u3001\u30bf\u30b9\u30af\u5b9f\u884c\u3001\u30bf\u30b9\u30af\u5b9a\u7fa9\u306e\u524a\u9664\u3092\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u53c2\u8003: http://docs.aws.amazon.com/AmazonECS/latest/developerguide/ECS_AWSCLI.html#AWSCLI_register_task_definition\n\n\n\n\u524d\u63d0\u6761\u4ef6\n========\n\n\nECS\u3078\u306e\u6a29\u9650\n-----------\n\n* ECS\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\n\nAWS CLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n-------------------\n\n* \u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\n  * AWS CLI 1.7.36\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws --version\n```\n\n```text:\u7d50\u679c(\u4f8b):\n      aws-cli/1.7.28 Python/2.7.5 Darwin/13.4.0\n```\n\n\n0. \u6e96\u5099\n=======\n\n\n0.1. \u30ea\u30fc\u30b8\u30e7\u30f3\u306e\u6c7a\u5b9a\n---------------------\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nexport AWS_DEFAULT_REGION='ap-northeast-1'\n```\n\n\n0.2. \u5909\u6570\u306e\u78ba\u8a8d\n---------------\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\naws configure list\n```\n\n```text:\u7d50\u679c(\u4f8b):\n            Name                    Value             Type    Location\n            ----                    -----             ----    --------\n         profile   ec2ecs_full-prjZ-mbp13              env    AWS_DEFAULT_PROFILE\n      access_key     ****************LOAQ shared-credentials-file\n      secret_key     ****************I1O1 shared-credentials-file\n          region           ap-northeast-1              env    AWS_DEFAULT_REGION\n```\n\n1. \u4e8b\u524d\u4f5c\u696d\n===========\n\n\n1.1. \u30bf\u30b9\u30af\u5b9a\u7fa9\u540d\u306e\u6c7a\u5b9a\n-----------------------\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nECS_TASK_DEFINITION_NAME='sleep360'\n```\n\n\u540c\u3058\u540d\u524d\u306e\u30bf\u30b9\u30af\u5b9a\u7fa9\u540d\u304c\u5b58\u5728\u3057\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws ecs describe-task-definition \\\n        --task-definition ${ECS_TASK_DEFINITION_NAME}\n```\n\n```text:\u7d50\u679c(\u4f8b):\n      A client error (ClientException) occurred when calling the DescribeTaskDefinition operation: Unable to describe task definition.\n```\n\n\n1.2. \u30bf\u30b9\u30af\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n-----------------------------\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nFILE_ECS_TASK_DEFINITION='sleep360.json'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\ncat << EOF > ${FILE_ECS_TASK_DEFINITION}\n{\n        \"containerDefinitions\": [\n          {\n            \"name\": \"sleep\",\n            \"image\": \"busybox\",\n            \"cpu\": 10,\n            \"command\": [\n              \"sleep\",\n              \"360\"\n            ],\n            \"memory\": 10,\n            \"essential\": true\n          }\n        ],\n        \"family\": \"sleep360\"\n}\nEOF\n```\n\nJSON\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u58ca\u308c\u3066\u306a\u3044\u304b\u5fc5\u305a\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\njsonlint -q ${FILE_ECS_TASK_DEFINITION}\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n\n2. \u30bf\u30b9\u30af\u5b9a\u7fa9\u306e\u767b\u9332\n===================\n\n\n2.1. \u30bf\u30b9\u30af\u5b9a\u7fa9\u306e\u4f5c\u6210\n---------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws ecs register-task-definition \\\n        --cli-input-json file://${FILE_ECS_TASK_DEFINITION}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"taskDefinition\": {\n          \"status\": \"ACTIVE\",\n          \"family\": \"sleep360\",\n          \"volumes\": [],\n          \"taskDefinitionArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task-definition/sleep360:1\",\n          \"containerDefinitions\": [\n              {\n                  \"environment\": [],\n                  \"name\": \"sleep\",\n                  \"mountPoints\": [],\n                  \"image\": \"busybox\",\n                  \"cpu\": 10,\n                  \"portMappings\": [],\n                  \"command\": [\n                      \"sleep\",\n                      \"360\"\n                  ],\n                  \"memory\": 10,\n                  \"essential\": true,\n                  \"volumesFrom\": []\n              }\n          ],\n          \"revision\": 1\n        }\n      }\n```\n\n\n2.2. \u30bf\u30b9\u30af\u5b9a\u7fa9\u306e\u4e00\u89a7\u78ba\u8a8d\n-------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws ecs list-task-definition-families \\\n        --family-prefix ${ECS_TASK_DEFINITION_NAME}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"families\": [\n          \"sleep360\"\n        ]\n      }\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws ecs list-task-definitions \\\n         --family-prefix ${ECS_TASK_DEFINITION_NAME}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"taskDefinitionArns\": [\n          \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task-definition/sleep360:1\"\n        ]\n      }\n```\n\n\n2.3. \u30bf\u30b9\u30af\u5b9a\u7fa9\u306e\u78ba\u8a8d\n---------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws ecs describe-task-definition \\\n        --task-definition ${ECS_TASK_DEFINITION_NAME}\n```\n\n```json:\u7d50\u679c(\u4f8b)\n      {\n        \"taskDefinition\": {\n          \"status\": \"ACTIVE\",\n          \"family\": \"sleep360\",\n          \"volumes\": [],\n          \"taskDefinitionArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task-definition/sleep360:1\",\n          \"containerDefinitions\": [\n              {\n                  \"environment\": [],\n                  \"name\": \"sleep\",\n                  \"mountPoints\": [],\n                  \"image\": \"busybox\",\n                  \"cpu\": 10,\n                  \"portMappings\": [],\n                  \"command\": [\n                      \"sleep\",\n                      \"360\"\n                  ],\n                  \"memory\": 10,\n                  \"essential\": true,\n                  \"volumesFrom\": []\n              }\n          ],\n          \"revision\": 1\n        }\n      }\n```\n\n\n3. \u30bf\u30b9\u30af\u306e\u5b9f\u884c\n===============\n\n\n3.1. \u30bf\u30b9\u30af\u306e\u5b9f\u884c\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6570\u306e\u6307\u5b9a\n-------------------------------------\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nECS_INSTANCE_COUNT='1'\n```\n\n\n3.2. \u30bf\u30b9\u30af\u306e\u5b9f\u884c\n-----------------\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n        ECS_TASK_DEFINITION_NAME: ${ECS_TASK_DEFINITION_NAME}\n        ECS_CLUSTER_NAME: ${ECS_CLUSTER_NAME}\n        ECS_INSTANCE_COUNT: ${ECS_INSTANCE_COUNT}\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws ecs run-task \\\n        --task-definition ${ECS_TASK_DEFINITION_NAME} \\\n        --cluster ${ECS_CLUSTER_NAME} \\\n        --count ${ECS_INSTANCE_COUNT}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"failures\": [],\n        \"tasks\": [\n          {\n              \"taskArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n              \"overrides\": {\n                  \"containerOverrides\": [\n                      {\n                          \"name\": \"sleep\"\n                      }\n                  ]\n              },\n              \"lastStatus\": \"PENDING\",\n              \"containerInstanceArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:container-instance/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n              \"clusterArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:cluster/handson-cluster\",\n              \"desiredStatus\": \"RUNNING\",\n              \"taskDefinitionArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task-definition/sleep360:1\",\n              \"containers\": [\n                  {\n                      \"containerArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:container/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n                      \"taskArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n                      \"lastStatus\": \"PENDING\",\n                      \"name\": \"sleep\"\n                  }\n              ]\n          }\n        ]\n      }\n```\n\n\n3.3. \u30bf\u30b9\u30af\u4e00\u89a7\u306e\u78ba\u8a8d\n---------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws ecs list-tasks \\\n        --cluster ${ECS_CLUSTER_NAME}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"taskArns\": [\n          \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\"\n        ]\n      }\n```\n\n\n3.4. \u7a3c\u52d5\u30bf\u30b9\u30af\u306e\u5185\u5bb9\u78ba\u8a8d\n-------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nARRAY_ECS_TASKS_UUID=$( \\\n        aws ecs list-tasks \\\n          --cluster ${ECS_CLUSTER_NAME} \\\n          --query 'taskArns[]' \\\n          --output text | \\\n        sed 's|^arn:.*/||' \\\n) \\\n        && echo ${ARRAY_ECS_TASKS_UUID}\n```\n\n```text:\u7d50\u679c(\u4f8b)\n      xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws ecs describe-tasks \\\n        --tasks \"${ARRAY_ECS_TASKS_UUID}\" \\\n        --cluster ${ECS_CLUSTER_NAME}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"failures\": [],\n        \"tasks\": [\n          {\n              \"taskArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/f703ae48-07a0-410c-9ee5-c1e894512445\",\n              \"overrides\": {\n                  \"containerOverrides\": [\n                      {\n                          \"name\": \"sleep\"\n                      }\n                  ]\n              },\n              \"lastStatus\": \"RUNNING\",\n              \"containerInstanceArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:container-instance/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n              \"clusterArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:cluster/handson-cluster\",\n              \"desiredStatus\": \"RUNNING\",\n              \"taskDefinitionArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task-definition/sleep360:1\",\n              \"containers\": [\n                  {\n                      \"containerArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:container/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n                      \"taskArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n                      \"name\": \"sleep\",\n                      \"networkBindings\": [],\n                      \"lastStatus\": \"RUNNING\",\n                      \"exitCode\": 0\n                  }\n              ]\n            }\n          ]\n        }\n```\n\n```bash:\u5909\u6570\u306e\u8a2d\u5b9a:\nECS_TASK_UUID=$(echo ${ARRAY_ECS_TASKS_UUID} | sed 's/ .*$//') \\\n          && echo ${ECS_TASK_UUID}\n```\n\n\n3.5. \u7a3c\u52d5\u30bf\u30b9\u30af\u306e\u4e2d\u65ad\n---------------------\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n        ECS_TASK_UUID:    ${ECS_TASK_UUID}\n        ECS_CLUSTER_NAME: ${ECS_CLUSTER_NAME}\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws ecs stop-task \\\n        --task ${ECS_TASK_UUID} \\\n        --cluster ${ECS_CLUSTER_NAME}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"task\": {\n          \"taskArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/824a4122-be46-4371-b85d-896c3f0ba33e\",\n          \"overrides\": {\n              \"containerOverrides\": [\n                  {\n                      \"name\": \"sleep\"\n                  }\n              ]\n          },\n          \"lastStatus\": \"RUNNING\",\n          \"containerInstanceArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:container-instance/2e6ab46e-6696-4a7c-b948-f7cbcd983b01\",\n          \"clusterArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:cluster/handson-cluster\",\n          \"desiredStatus\": \"STOPPED\",\n          \"taskDefinitionArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task-definition/sleep360:1\",\n          \"containers\": [\n              {\n                  \"containerArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:container/f2b6cf52-5b37-4775-baff-bedfa21fb04c\",\n                  \"taskArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/824a4122-be46-4371-b85d-896c3f0ba33e\",\n                  \"name\": \"sleep\",\n                  \"networkBindings\": [],\n                  \"lastStatus\": \"RUNNING\",\n                  \"exitCode\": 0\n              }\n          ]\n        }\n      }\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nECS_TASK_STATUS_DESIRED=$( \\\n        aws ecs describe-tasks \\\n          --tasks \"${ARRAY_ECS_TASKS_UUID}\" \\\n          --cluster ${ECS_CLUSTER_NAME} \\\n          --query 'tasks[].desiredStatus' \\\n          --output text \\\n) \\\n        && echo ${ECS_TASK_STATUS_DESIRED}\n```\n\n```text:\u7d50\u679c(\u4f8b):\n      STOPPED\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nECS_TASK_STATUS_LAST=$( \\\n        aws ecs describe-tasks \\\n          --tasks \"${ARRAY_ECS_TASKS_UUID}\" \\\n          --cluster ${ECS_CLUSTER_NAME} \\\n          --query 'tasks[].lastStatus' \\\n          --output text \\\n) \\\n        && echo ${ECS_TASK_STATUS_LAST}\n```\n\n```text:\u7d50\u679c(\u4f8b):\n      STOPPED\n```\n\n\n3.6. \u7279\u5b9a\u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u306e\u30bf\u30b9\u30af\u306e\u5b9f\u884c&\u505c\u6b62\n----------------------------------------------------\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n        ECS_TASK_DEFINITION_NAME: ${ECS_TASK_DEFINITION_NAME}\n        ECS_CLUSTER_NAME:         ${ECS_CLUSTER_NAME}\n        ECS_INSTANCES:           \"${ECS_INSTANCES}\"\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws ecs start-task \\\n        --task-definition ${ECS_TASK_DEFINITION_NAME} \\\n        --cluster ${ECS_CLUSTER_NAME} \\\n        --container-instances \"${ECS_INSTANCES}\"\n```\n\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"failures\": [],\n        \"tasks\": [\n          {\n              \"taskArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/3322b402-ab6b-4d22-98bc-e2f48a83dc63\",\n              \"overrides\": {\n                  \"containerOverrides\": [\n                      {\n                          \"name\": \"sleep\"\n                      }\n                  ]\n              },\n              \"lastStatus\": \"PENDING\",\n              \"containerInstanceArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:container-instance/2e6ab46e-6696-4a7c-b948-f7cbcd983b01\",\n              \"clusterArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:cluster/handson-cluster\",\n              \"desiredStatus\": \"RUNNING\",\n              \"taskDefinitionArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task-definition/sleep360:1\",\n              \"containers\": [\n                  {\n                      \"containerArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:container/b907fa72-2efb-4120-affe-0f70cd32005e\",\n                      \"taskArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task/3322b402-ab6b-4d22-98bc-e2f48a83dc63\",\n                      \"lastStatus\": \"PENDING\",\n                      \"name\": \"sleep\"\n                  }\n              ]\n          }\n        ]\n      }\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nARRAY_ECS_TASKS_UUID=$( \\\n        aws ecs list-tasks \\\n          --cluster ${ECS_CLUSTER_NAME} \\\n          --query 'taskArns[]' \\\n          --output text | \\\n        sed 's|^arn:.*/||' \\\n) \\\n        && echo ${ARRAY_ECS_TASKS_UUID}\n```\n\n```text:\u7d50\u679c(\u4f8b)\n      xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n```\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n        ECS_TASK_UUID:    ${ECS_TASK_UUID}\n        ECS_CLUSTER_NAME: ${ECS_CLUSTER_NAME}\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws ecs stop-task \\\n        --task ${ECS_TASK_UUID} \\\n        --cluster ${ECS_CLUSTER_NAME}\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nECS_TASK_STATUS_LAST=$( \\\n        aws ecs describe-tasks \\\n          --tasks \"${ARRAY_ECS_TASKS_UUID}\" \\\n          --cluster ${ECS_CLUSTER_NAME} \\\n          --query 'tasks[].lastStatus' \\\n          --output text \\\n) \\\n        && echo ${ECS_TASK_STATUS_LAST}\n```\n\n```text:\u7d50\u679c(\u4f8b):\n      STOPPED\n```\n\n\n4. \u30bf\u30b9\u30af\u5b9a\u7fa9\u306e\u524a\u9664\n===================\n\n\u30bf\u30b9\u30af\u5b9a\u7fa9\u306e\u524a\u9664\u306b\u306f\u3001\u30ea\u30d3\u30b8\u30e7\u30f3\u60c5\u5831\u304c\u5fc5\u8981\u306b\u306a\u308b\u306e\u3067\u3001\u30bf\u30b9\u30af\u5b9a\u7fa9\u304b\u3089\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nECS_TASK_DEFINITION_REVISION=$( \\\n        aws ecs describe-task-definition \\\n          --task-definition ${ECS_TASK_DEFINITION_NAME} \\\n          --query 'taskDefinition.revision' \\\n          --output text \\\n) \\\n        && echo ${ECS_TASK_DEFINITION_REVISION}\n```\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\n        ECS_TASK_DEFINITION_NAME:     ${ECS_TASK_DEFINITION_NAME}\n        ECS_TASK_DEFINITION_REVISION: ${ECS_TASK_DEFINITION_REVISION}\n\nETX\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws ecs deregister-task-definition \\\n        --task-definition ${ECS_TASK_DEFINITION_NAME}:${ECS_TASK_DEFINITION_REVISION}\n```\n\n```json:\u7d50\u679c(\u4f8b):\n      {\n        \"taskDefinition\": {\n          \"status\": \"INACTIVE\",\n          \"family\": \"sleep360\",\n          \"volumes\": [],\n          \"taskDefinitionArn\": \"arn:aws:ecs:ap-northeast-1:XXXXXXXXXXXX:task-definition/sleep360:1\",\n          \"containerDefinitions\": [\n              {\n                  \"environment\": [],\n                  \"name\": \"sleep\",\n                  \"mountPoints\": [],\n                  \"image\": \"busybox\",\n                  \"cpu\": 10,\n                  \"portMappings\": [],\n                  \"command\": [\n                      \"sleep\",\n                      \"360\"\n                  ],\n                  \"memory\": 10,\n                  \"essential\": true,\n                  \"volumesFrom\": []\n              }\n          ],\n          \"revision\": 1\n        }\n      }\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws ecs describe-task-definition \\\n        --task-definition ${ECS_TASK_DEFINITION_NAME}\n```\n\n```text:\u7d50\u679c(\u4f8b):\n      A client error (ClientException) occurred when calling the DescribeTaskDefinition operation: Unable to describe task definition.\n```\n\n\n\u5b8c\u4e86\n====\n", "tags": ["AWS", "aws-cli", "ECS"]}