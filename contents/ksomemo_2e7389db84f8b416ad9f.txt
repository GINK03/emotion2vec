{"context": "\n\n\u3044\u304d\u306a\u308a\u3060\u3051\u3069\u7d50\u8ad6\n\nawk\u3067\u306e$xxx\u306f\u30d5\u30a3\u30fc\u30eb\u30c9\u3068\u3057\u3066\u6271\u308f\u308c\u308b\n\n$\u5909\u6570\u3092awk\u5185\u3067\u4f7f\u3046\u3068\u5b58\u5728\u3057\u306a\u3044\u30d5\u30a3\u30fc\u30eb\u30c9\u306a\u306e\u3067\u30a8\u30e9\u30fc\u3068\u306a\u308b\n\n$\u5909\u6570\u3092\u30b7\u30f3\u30b0\u30eb\u30af\u30a9\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u5909\u6570\u304f\u304f\u308b\u3068\u3001\u30d5\u30a3\u30fc\u30eb\u30c9\u3068\u3057\u3066\u6271\u308f\u308c\u306a\u304f\u306a\u308b\n\u30b7\u30a7\u30eb\u5909\u6570\u3068\u3057\u3066\u5c55\u958b\u3055\u308c\u308b\n\n\u307e\u305f\u306f, v\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3059\u308b\u3002\u3053\u3061\u3089\u306e\u307b\u3046\u304c\u610f\u56f3\u304c\u4f1d\u308f\u3063\u3066\u3088\u3044\u3002\n\n\u4f8b\n#!/bin/sh\nvar=123456\necho \"1,2,3\" | awk -F,               '{print $1 \",\" '$1'}'\necho \"1,2,3\" | awk -F,               '{print $1 \",\" \"$1\"}'\necho \"1,2,3\" | awk -F,               '{print $1 \",\" '$var'}'\necho \"1,2,3\" | awk -F,               '{print $1 \",\" \"'$var'\"}'\necho \"1,2,3\" | awk -F, -v var=\"$var\" '{print $1 \",\" $var}'\necho \"1,2,3\" | awk -F, -v var=\"$var\" '{print $1 \",\" var}'\necho \"1,2,3\" | awk -F,               '{print $1 \",\" $var}'\n\ntest.sh 111\n\n1,111\n1,$1\n1,123456\n1,123456\n1,\n1,123456\nawk: illegal field $(), name \"var\"\n input record number 1, file\n source line number 1\n\n\n\u5b9f\u7528\u4f8b\n\n\u65e5\u4ed8\u304c\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u542b\u307e\u308c\u308bTSV\u3092\u4f7f\u3046\n\u4e00\u90e8\u306e\u5217\u3092\u4f7f\u3063\u3066\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092CSV\u306b\u3059\u308b\n\u6700\u5f8c\u306e\u5217\u306b\u65e5\u4ed8\u3092\u8ffd\u52a0\u3059\u308b\n\n\nCode\n#!/bin/sh\n\nTOTAL_FILE=\"total.csv\"\nFILE_NAME_LEN=$(expr length \"$TOTAL_FILE\")\necho \"${TOTAL_FILE}(file name length: ${FILE_NAME_LEN})\"\n\necho -n \"\" > $TOTAL_FILE\nfor f in $(ls *.tsv); do\n    date=${f:20:4}/${f:24:2}/${f:26:2}\n    awk '{ print $1 \",\" \"'$date'\"}' $f > \"with_date_${f}.csv\"\n    cat \"with_date_${f}.csv\" >> $TOTAL_FILE\ndone\n\n## \u3044\u304d\u306a\u308a\u3060\u3051\u3069\u7d50\u8ad6\n\n* awk\u3067\u306e`$xxx`\u306f\u30d5\u30a3\u30fc\u30eb\u30c9\u3068\u3057\u3066\u6271\u308f\u308c\u308b\n* `$\u5909\u6570`\u3092awk\u5185\u3067\u4f7f\u3046\u3068\u5b58\u5728\u3057\u306a\u3044\u30d5\u30a3\u30fc\u30eb\u30c9\u306a\u306e\u3067\u30a8\u30e9\u30fc\u3068\u306a\u308b\n* `$\u5909\u6570`\u3092\u30b7\u30f3\u30b0\u30eb\u30af\u30a9\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u5909\u6570\u304f\u304f\u308b\u3068\u3001\u30d5\u30a3\u30fc\u30eb\u30c9\u3068\u3057\u3066\u6271\u308f\u308c\u306a\u304f\u306a\u308b\n* \u30b7\u30a7\u30eb\u5909\u6570\u3068\u3057\u3066\u5c55\u958b\u3055\u308c\u308b\n\n\u307e\u305f\u306f, v\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0\u3059\u308b\u3002\u3053\u3061\u3089\u306e\u307b\u3046\u304c\u610f\u56f3\u304c\u4f1d\u308f\u3063\u3066\u3088\u3044\u3002\n\n## \u4f8b\n\n```bash\n#!/bin/sh\nvar=123456\necho \"1,2,3\" | awk -F,               '{print $1 \",\" '$1'}'\necho \"1,2,3\" | awk -F,               '{print $1 \",\" \"$1\"}'\necho \"1,2,3\" | awk -F,               '{print $1 \",\" '$var'}'\necho \"1,2,3\" | awk -F,               '{print $1 \",\" \"'$var'\"}'\necho \"1,2,3\" | awk -F, -v var=\"$var\" '{print $1 \",\" $var}'\necho \"1,2,3\" | awk -F, -v var=\"$var\" '{print $1 \",\" var}'\necho \"1,2,3\" | awk -F,               '{print $1 \",\" $var}'\n```\n\n```bash\ntest.sh 111\n \n1,111\n1,$1\n1,123456\n1,123456\n1,\n1,123456\nawk: illegal field $(), name \"var\"\n input record number 1, file\n source line number 1\n```\n\n## \u5b9f\u7528\u4f8b\n* \u65e5\u4ed8\u304c\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u542b\u307e\u308c\u308bTSV\u3092\u4f7f\u3046\n* \u4e00\u90e8\u306e\u5217\u3092\u4f7f\u3063\u3066\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092CSV\u306b\u3059\u308b\n* \u6700\u5f8c\u306e\u5217\u306b\u65e5\u4ed8\u3092\u8ffd\u52a0\u3059\u308b\n\n## Code\n\n```bash\n#!/bin/sh\n\nTOTAL_FILE=\"total.csv\"\nFILE_NAME_LEN=$(expr length \"$TOTAL_FILE\")\necho \"${TOTAL_FILE}(file name length: ${FILE_NAME_LEN})\"\n\necho -n \"\" > $TOTAL_FILE\nfor f in $(ls *.tsv); do\n\tdate=${f:20:4}/${f:24:2}/${f:26:2}\n\tawk '{ print $1 \",\" \"'$date'\"}' $f > \"with_date_${f}.csv\"\n\tcat \"with_date_${f}.csv\" >> $TOTAL_FILE\ndone\n```\n", "tags": ["memo"]}