{"context": " More than 1 year has passed since last update.\u306a\u306b\u3068\u306a\u304fsvn\u3067\u304b\u3044\u3066\u307f\u305f\u3002\n\u52d5\u4f5c\u4fdd\u8a3c\u306f\u3067\u304d\u307e\u305b\u306c\u3002\n\u3082\u3063\u3068\u7c21\u6f54\u306a\u66f8\u304d\u65b9\u3042\u308b\u3088\u3046\u306a...\n\nprecompile.rb\n namespace :assets do                                                              \n    task :precompile, :roles => :webs do                                            \n      revs = []                                                                     \n      [                                                                             \n        current_path,                                                               \n        release_path                                                                \n      ].each{|i|\n        revs << capture(\"cd #{i} && svnversion\").chomp.gsub(/M/, '')\n      }       \n      lines = revs.uniq.size < 2 ? 0 :                                              \n        capture(\"cd #{release_path} && svn log -v -r#{revs.join(':')} | grep 'app/assets' | wc -l\").to_i                                                                                                    \n      if lines > 0                                                                  \n        p \"precompile\"                                                              \n        run %Q{cd #{latest_release} && #{rake} RAILS_ENV=#{rails_env} #{asset_env} assets:precompile}\n      else                                                                          \n        p \"skipping precompile\"                                                     \n      end                                                                           \n    end                                                                             \n  end                  \n\n\n\u306a\u306b\u3068\u306a\u304fsvn\u3067\u304b\u3044\u3066\u307f\u305f\u3002\n\u52d5\u4f5c\u4fdd\u8a3c\u306f\u3067\u304d\u307e\u305b\u306c\u3002\n\u3082\u3063\u3068\u7c21\u6f54\u306a\u66f8\u304d\u65b9\u3042\u308b\u3088\u3046\u306a...\n\n```ruby:precompile.rb\n namespace :assets do                                                              \n    task :precompile, :roles => :webs do                                            \n      revs = []                                                                     \n      [                                                                             \n        current_path,                                                               \n        release_path                                                                \n      ].each{|i|\n        revs << capture(\"cd #{i} && svnversion\").chomp.gsub(/M/, '')\n      }       \n      lines = revs.uniq.size < 2 ? 0 :                                              \n        capture(\"cd #{release_path} && svn log -v -r#{revs.join(':')} | grep 'app/assets' | wc -l\").to_i                                                                                                    \n      if lines > 0                                                                  \n        p \"precompile\"                                                              \n        run %Q{cd #{latest_release} && #{rake} RAILS_ENV=#{rails_env} #{asset_env} assets:precompile}\n      else                                                                          \n        p \"skipping precompile\"                                                     \n      end                                                                           \n    end                                                                             \n  end                  \n```", "tags": ["Rails", "capistrano"]}