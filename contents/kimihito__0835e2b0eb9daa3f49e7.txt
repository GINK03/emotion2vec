{"tags": ["Rails", "devise"], "context": " More than 1 year has passed since last update.\n\n\u53c2\u8003\nHow To: Redirect back to current page after sign in, sign out, sign up, update \u00b7 plataformatec/devise Wiki\nsession[:previous_url] \u306b\u3044\u308c\u308b\u3088\u3046\u306b\u3059\u308c\u3070\u3044\u3044\u3002\nApplicationController \u3067\nafter_filter :store_location\n\ndef store_location\n # \u4eca\u56de\u306e\u5834\u5408\u306f\u3001 /users/sign_in , /users/sign_up, /users/password \u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3068\u304d\u3001ajax\u3067\u306e\u3084\u308a\u3068\u308a\u306fsession\u306b\u306f\u4fdd\u5b58\u3057\u306a\u3044\u3002\n    if (request.fullpath != \"/users/sign_in\" && \\\n        request.fullpath != \"/users/sign_up\" && \\\n        request.fullpath != \"/users/password\" && \\\n        !request.xhr?) # don't store ajax calls\n      session[:previous_url] = request.fullpath \n    end\nend\n\n#\u30ed\u30b0\u30a4\u30f3\u5f8c\u306e\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3092\u30ed\u30b0\u30a4\u30f3\u524d\u306e\u30da\u30fc\u30b8\u306b\u3059\u308b\u5834\u5408\ndef after_sign_in_path_for(resource)\n  session[:previous_url] || root_path\nend\n\n#\u30ed\u30b0\u30a2\u30a6\u30c8\u5f8c\u306e\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3092\u30ed\u30b0\u30a2\u30a6\u30c8\u524d\u306e\u30da\u30fc\u30b8\u306b\u3059\u308b\u5834\u5408\ndef after_sign_out_path_for(resource)\n  session[:previous_url] || root_path\nend\n\n\n###\u53c2\u8003\n\n[How To: Redirect back to current page after sign in, sign out, sign up, update \u00b7 plataformatec/devise Wiki](https://github.com/plataformatec/devise/wiki/How-To:-Redirect-back-to-current-page-after-sign-in,-sign-out,-sign-up,-update)\n\nsession[:previous_url] \u306b\u3044\u308c\u308b\u3088\u3046\u306b\u3059\u308c\u3070\u3044\u3044\u3002\n\nApplicationController \u3067\n\n```ruby:\nafter_filter :store_location\n\ndef store_location\n # \u4eca\u56de\u306e\u5834\u5408\u306f\u3001 /users/sign_in , /users/sign_up, /users/password \u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3068\u304d\u3001ajax\u3067\u306e\u3084\u308a\u3068\u308a\u306fsession\u306b\u306f\u4fdd\u5b58\u3057\u306a\u3044\u3002\n    if (request.fullpath != \"/users/sign_in\" && \\\n        request.fullpath != \"/users/sign_up\" && \\\n        request.fullpath != \"/users/password\" && \\\n        !request.xhr?) # don't store ajax calls\n      session[:previous_url] = request.fullpath \n    end\nend\n\n#\u30ed\u30b0\u30a4\u30f3\u5f8c\u306e\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3092\u30ed\u30b0\u30a4\u30f3\u524d\u306e\u30da\u30fc\u30b8\u306b\u3059\u308b\u5834\u5408\ndef after_sign_in_path_for(resource)\n  session[:previous_url] || root_path\nend\n\n#\u30ed\u30b0\u30a2\u30a6\u30c8\u5f8c\u306e\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3092\u30ed\u30b0\u30a2\u30a6\u30c8\u524d\u306e\u30da\u30fc\u30b8\u306b\u3059\u308b\u5834\u5408\ndef after_sign_out_path_for(resource)\n  session[:previous_url] || root_path\nend\n```\n\n"}