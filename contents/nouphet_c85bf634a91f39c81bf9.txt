{"tags": ["CentOS", "Mac", "vagrant", "development", "Virtualization"], "context": " More than 1 year has passed since last update.\n\nOS\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\n\n\n\u4eca\u56de\u4f7f\u7528\u3057\u3066\u3044\u308b\u74b0\u5883\n\n\u30de\u30b7\u30f3\uff1aMacbook Air(MaxOS X 10.7.4)\n\u4eee\u60f3\u74b0\u5883\uff1aVirtual Box 4.2.6 r82870\nXCode 4.5.2\n\n\n\u4e8b\u524d\u306bCommand Line Tools\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\n\n\n\n\nRVM\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nbash -s stable < <(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer)\n\nsource ~/.bash_profile\n\nrvm install 1.9.3\nrvm use 1.9.3\nrvm --default 1.9.3\n\n\n.bash_profile\u306e\u78ba\u8a8d\nPATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting\nsource \"$HOME/.rvm/scripts/rvm\"\n\n\nVagrant\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ngem install vagrant\n\n\nVeeWee\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nVeeWee\u306fBox\u30d5\u30a1\u30a4\u30eb\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u751f\u6210\u3057\u3066\u304f\u308c\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u3059\u3002\nBundler\u304c\u5165\u3063\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\nbundle -v\n\nBundler\u304c\u5165\u3063\u3066\u3044\u306a\u3051\u308c\u3070\u5165\u308c\u308b\ngem install bundler\n\n\nVeeWee\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\ngit clone git://github.com/jedi4ever/veewee.git\n\nVeeWee\u306e.rvmrc\u3092\u66f8\u304d\u63db\u3048\u308b\n1.9.2 \u3068\u306a\u3063\u3066\u3044\u308b\u90e8\u5206\u3092 1.9.3 \u306b\u5909\u66f4\nvim veewee/.rvmrc\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b9f\u884c\ncd veewee\nbundle install\n\n\u3053\u3053\u306ebundle install\u3067\u3064\u307e\u305a\u3044\u305f\u3068\u304d\u306fbundle -v\u3092\u5b9f\u884c\u3057\u3066\u307f\u3066\u4e0b\u8a18\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u305f\u3089\u5bfe\u5fdc\u3059\u308b\n$ bundle -v\nERROR: Gem bundler is not installed, run `gem install bundler` first.\n\nrvm reload\n\n\u305d\u308c\u3067\u3082\u30c0\u30e1\u306a\u5834\u5408\u3001\u8907\u6570\u306ebundler\u304c\u5165\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u3082\u3042\u308b\u306e\u3067\u3001gem uninstall bundler\u3092\u8a66\u3057\u3066\u307f\u308b\u3002\n\u6e21\u3057\u306e\u5834\u5408\u306f\u4e0b\u8a18\u306e\u69d8\u306b2\u7a2e\u985e\u5165\u3063\u3066\u3044\u305f\u306e\u3067\u3044\u3063\u305f\u3093\u524a\u9664\u3002\n$ gem uninstall bundler\n\nSelect gem to uninstall:\n 1. bundler-1.1.5\n 2. bundler-1.2.3\n 3. All versions\n> 3\nSuccessfully uninstalled bundler-1.1.5\n\nYou have requested to uninstall the gem:\n    bundler-1.2.3\nlog4r-1.1.10 depends on [bundler (>= 1.0.0)]\norm_adapter-0.4.0 depends on [bundler (>= 1.0.0)]\npaperclip-3.2.0 depends on [bundler (>= 0)]\nrails-3.2.8 depends on [bundler (~> 1.0)]\nthor-0.16.0 depends on [bundler (~> 1.0)]\nuglifier-1.3.0 depends on [bundler (~> 1.0)]\nuglifier-1.2.7 depends on [bundler (~> 1.0)]\nIf you remove this gems, one or more dependencies will not be met.\nContinue with Uninstall? [Yn]  y\nRemove executables:\n    bundle\n\nin addition to the gem? [Yn]  y\nRemoving bundle\nSuccessfully uninstalled bundler-1.2.3\n\n\u203b \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u79fb\u52d5\u3059\u308b\u3068\u30b7\u30a7\u30eb\u304c\u8a8d\u8b58\u3057\u3066\u3044\u308b\u72b6\u614b\u304c\u5909\u308f\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u79fb\u52d5\u3057\u3066\u307e\u305fbundler\u304c\u3046\u307e\u304f\u8a8d\u8b58\u3055\u308c\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3042\u308c\u3070rvm reload\u3068\u3059\u308b\u3068\u826f\u3044\u3002\n\n\u518d\u5ea6bundler\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nrvm reload\ngem install bundler\n\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u5b9a\u7fa9\nCentOS 6.3 \u306e\u74b0\u5883\u3092\u4f5c\u6210\u3059\u308b\u3002\n\u3053\u306e\u30b3\u30de\u30f3\u30c9\u306fveewee\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u3067\u5b9f\u884c\u3059\u308b\u3002\nbundle exec vagrant basebox define centos_64_x86_64 CentOS-6.3-x86_64-minimal\n\n\u305d\u3046\u3059\u308b\u3068definations\u306b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u4f5c\u6210\u3055\u308c\u308b\u306e\u3067\u3001\u305d\u308c\u3089\u3092\u7de8\u96c6\u3059\u308b\u3002\n\ndefinition.rb \u3092\u7de8\u96c6\n\u30df\u30e9\u30fc\u306e\u53c2\u7167\u5148\u3092\u5909\u66f4\n:iso_file => \"CentOS-6.3-x86_64-minimal.iso\",\n:iso_src => \"ftp://ftp.riken.jp/Linux/centos/6.3/isos/x86_64/CentOS-6.3-x86_64-minimal.iso\",\n\n\nks.cfg\u3092\u7de8\u96c6\n\u3053\u308c\u306fCentOS\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u306e\u30ad\u30c3\u30af\u30b9\u30bf\u30fc\u30c8\u7528\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u3001\u65e5\u672c\u8a9e\u5bfe\u5fdc\u3001\u65e5\u672c\u6642\u9593\u5bfe\u5fdc\u306b\u3059\u308b\u3002\ninstall\ncdrom\nlang ja_JP.UTF-8\nkeyboard us\nnetwork --bootproto=dhcp\nrootpw --iscrypted $1$damlkd,f$UC/u5pUts5QiU3ow.CSso/\nfirewall --enabled --service=ssh\nauthconfig --enableshadow --passalgo=sha512\nselinux --disabled\ntimezone Asia/Tokyo\nbootloader --location=mbr\n\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u30d3\u30eb\u30c9\nvagrant basebox build centos_64_x86_64\n\n[centos_64_x86_64] Downloading vbox guest additions iso v 4.2.6 - http://download.virtualbox.org/virtualbox/4.2.6/VBoxGuestAdditions_4.2.6.iso\nFetching file:  62% |oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo                                                                      |  26.5MB 351.8KB/s ETA:   0:00:47\n\n\u3057\u3070\u3089\u304f\u5f85\u3064\u3002\u9014\u4e2d\u3067iso\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u304b\u805e\u3044\u3066\u304f\u308b\u306e\u3067yes\u3068\u3059\u308b\u3002\n\u81ea\u52d5\u7684\u306b\u4eee\u60f3\u30de\u30b7\u30f3\u304c\u8d77\u52d5\u3059\u308b\u306e\u3067\u3001\u307e\u305f\u3057\u3070\u3089\u304f\u653e\u7f6e\u3002\n\u30d7\u30ed\u30f3\u30d7\u30c8\u306b\n[centos_64_x86_64] The box centos_64_x86_64 was build successfully!\n[centos_64_x86_64] You can now login to the box with:\n[vagrant] ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -p 7222 -l veewee 127.0.0.1\n\n\u3068\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u3053\u306e\u30b3\u30de\u30f3\u30c9ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -p 7222 -l veewee 127.0.0.1\u3067veewee\u3068\u3044\u3046\u30d1\u30b9\u30ef\u30fc\u30c9\u3067ssh\u30ed\u30b0\u30a4\u30f3\u304c\u53ef\u80fd\u3002\n\u3053\u306e\u72b6\u614b\u306b\u306a\u3063\u305f\u3089\u4e00\u5ea6\u843d\u3068\u3057\u307e\u3059\u3002\nshutdown -h now\n\n\nbox\u30d5\u30a1\u30a4\u30eb\u3078\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\n\u69cb\u7bc9\u3057\u305f\u4eee\u60f3\u74b0\u5883\u3092box\u30d5\u30a1\u30a4\u30eb\u306b\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002\nbundle exec veewee vbox export 'centos_64_x86_64'\n\n$ bundle exec veewee vbox export 'centos_64_x86_64' \nCreating a temporary directory for export\nAdding additional files\nCreating Vagrantfile\nExporting the box\nExecuting VBoxManage export centos_64_x86_64 --output /var/folders/0g/thkrchb92p56ypt61cmb2jfh0000gn/T/d20130812-7484-yssofx/box.ovf\n0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%\nSuccessfully exported 1 machine(s).\nPackaging the box\nCleaning up temporary directory\n\nTo import it into vagrant type:\nvagrant box add 'centos_64_x86_64' '/Users/nouphet/chefStudy/veewee/centos_64_x86_64.box'\n\nTo use it:\nvagrant init 'centos_64_x86_64'\nvagrant up\nvagrant ssh\n\n\n\u4eee\u60f3\u74b0\u5883\u306e\u767b\u9332\u3068\u521d\u671f\u5316\n\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3057\u305fbox\u3092\u767b\u9332\u3057\u307e\u3059\u3002\nvagrant box add 'centos_64_x86_64' 'centos_64_x86_64.box'\n\n\nbox\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4f5c\u6210\nveewee\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304b\u3089\u629c\u3051\u3066\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nunalias vagrant\nmkdir -p ~/box/centos_64_x86_64\ncd ~/box/centos_64_x86_64.box\n\n\nbox\u3092\u767b\u9332\u3057\u3066\u8d77\u52d5\n\u3044\u3088\u3044\u3088\u767b\u9332\u3057\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002\nvagrant box add centos_64_x86_64 ~/box/centos_64_x86_64\n\nvagrant init centos_64_x86_64\n\n\u203b \u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bVagrantfile\u304c\u4f5c\u6210\u3055\u308c\u308b\n$ vagrant up\n[default] Importing base box 'centos_64_x86_64'...\n[default] Matching MAC address for NAT networking...\n[default] Clearing any previously set forwarded ports...\n[default] Fixed port collision for 22 => 2222. Now on port 2200.\n[default] Forwarding ports...\n[default] -- 22 => 2200 (adapter 1)\n[default] Creating shared folders metadata...\n[default] Clearing any previously set network interfaces...\n[default] Booting VM...\n[default] Waiting for VM to boot. This can take a few minutes.\n[default] VM booted and ready for use!\n[default] Mounting shared folders...\n[default] -- v-root: /vagrant\n\n\u3053\u3053\u307e\u3067\u8868\u793a\u3055\u308c\u305f\u3089\u8d77\u52d5\u304c\u5b8c\u4e86\u3057\u3066\u3044\u308b\u306e\u3067ssh\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\n\u30ed\u30b0\u30a4\u30f3\u3059\u308b\nvagrant ssh\nWelcome to your Vagrant-built virtual machine.\n[vagrant@localhost ~]$\n\n\u3072\u3048\u30fc\uff01\u611f\u52d5\u3067\u3059\u3002 ^^\n\n\u958b\u767a\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\n\n\u4eca\u56de\u306f\u4fbf\u5229\u306aChef-solo\u3092\u4f7f\u3063\u3066\u74b0\u5883\u306e\u69cb\u7bc9\u3092\u884c\u306a\u3063\u3066\u307f\u307e\u3059\u3002\n\nChef-solo\u3092\u8a2d\u5b9a\n\u30db\u30b9\u30c8\u5074\u306e\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea~/box/centos_64_x86_64(Vagrantfile\u306e\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea)\u304cVirtualBox\u306e\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u3068\u3057\u3066/vagrant\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u3053\u3067\u4f5c\u696d\u3057\u307e\u3059\u3002\ncd /vagrant/\nknife cookbook create myrecipe -o cookbooks\nWARNING: No knife configuration file found\n** Creating cookbook myrecipe\n** Creating README for cookbook: myrecipe\n** Creating CHANGELOG for cookbook: myrecipe\n** Creating metadata for cookbook: myrecipe\n\n\u9014\u4e2d\u3067WARNING\u304c\u51fa\u307e\u3059\u304c\u3001knife\u30b3\u30de\u30f3\u30c9\u3092\u6700\u521d\u306b\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067OK\u3067\u3059\u3002\n\u3053\u308c\u3067\u4f55\u3082\u3057\u306a\u3044cookbook\u306e\u96db\u5f62\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\u6b21\u306bVagrantfile\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n\u524d\u8ff0\u306e\u901a\u308aVagrantfile\u306f\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308b\u306e\u3067\u3001\u30db\u30b9\u30c8OS\u5074\u3067\u7de8\u96c6\u3057\u3066\u3082\u4eee\u60f3\u74b0\u5883\u5074\u3067\u7de8\u96c6\u3057\u3066\u3082OK\u3067\u3059\u3002\n(\u305f\u3060\u3057\u3053\u306e\u6642\u70b9\u3067\u306fvi\u3057\u304b\u5165\u3063\u3066\u307e\u305b\u3093)\u3002\n\u4eca\u56de\u306f\u30db\u30b9\u30c8OS\u5074\u304b\u3089\u7de8\u96c6\u3057\u3066\u307f\u307e\u3059\u3002\ncd ~/box/centos_64_x86_64\nvim Vagrantfile\n\n\u4e00\u756a\u4e0b\u306b\u8ffd\u8a18\nVagrant::Config.run do |config|\n  config.vm.provision :chef_solo do |chef|\n    chef.cookbooks_path = \"cookbooks\"\n    chef.add_recipe \"myrecipe\"\n  end\nend\n\n\u3053\u3053\u3067\u3044\u3063\u305f\u3093\u518d\u8d77\u52d5\u3002\nvagrant reload\n\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u307e\u305avim\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3059\u3002\n\u3044\u3064\u3082\u3060\u3068 yum install \u3059\u308b\u306e\u304c\u65e9\u3044\u306e\u3067\u3059\u304c\u3001\u4eca\u56de\u306fChef-solo\u3092\u4f7f\u3063\u3066\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u306e\u3067 cookbooks/myrecipe/recipes/default.rb \u306b\u4e00\u884c\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\ncookbooks/myrecipe/recipes/default.rb\npackage \"vim-enhanced\"\n\n\n\u30db\u30b9\u30c8OS\u5074\u3067vagrant provision\u3092\u5b9f\u884c\u3002\nvagrant provision\n\nvagrant provision\n[default] Running provisioner: Vagrant::Provisioners::ChefSolo...\n[default] Generating chef JSON and uploading...\n[default] Running chef-solo...\n[2013-01-02T15:56:22+09:00] INFO: *** Chef 10.16.4 ***\n[2013-01-02T15:56:22+09:00] INFO: Setting the run_list to [\"recipe[myrecipe]\"] from JSON\n[2013-01-02T15:56:22+09:00] INFO: Run List is [recipe[myrecipe]]\n[2013-01-02T15:56:22+09:00] INFO: Run List expands to [myrecipe]\n[2013-01-02T15:56:22+09:00] INFO: Starting Chef Run for localhost\n[2013-01-02T15:56:22+09:00] INFO: Running start handlers\n[2013-01-02T15:56:22+09:00] INFO: Start handlers complete.\n[2013-01-02T15:56:22+09:00] INFO: Processing package[vim-enhanced] action install (myrecipe::default line 9)\n[2013-01-02T15:56:47+09:00] INFO: package[vim-enhanced] installing vim-enhanced-7.2.411-1.8.el6 from base repository\n[2013-01-02T15:57:03+09:00] INFO: Chef Run complete in 40.950383 seconds\n[2013-01-02T15:57:03+09:00] INFO: Running report handlers\n[2013-01-02T15:57:03+09:00] INFO: Report handlers complete\n\n\u4eee\u60f3\u74b0\u5883\u5074\u3067\u306f\u4f55\u3082\u3057\u3066\u3044\u306a\u3044\u306e\u306bvim\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\uff01\uff01\n\u3053\u3046\u3084\u3063\u3066\u5b9a\u7fa9\u3092\u66f8\u3044\u3066\u3044\u304f\u4e8b\u3067\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3066\u3044\u304f\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u4f55\u3088\u308a\u3001\u3053\u306e\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u306f\u30db\u30b9\u30c8OS\u5074\u306e\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306b\u5b58\u5728\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u5143\u306b\u540c\u3058\u8a2d\u5b9a\u306eOS\u304c\u3044\u304f\u3064\u3067\u3082\u624b\u8efd\u306b\u69cb\u7bc9\u3067\u304d\u308b\u3068\u3044\u3046\u5bf8\u6cd5\u3067\u3059\u3002\n\u3067\u306f\u4eca\u5ea6\u306fhttpdphp54mysql-server\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\ncookbooks/myrecipe/recipes/default.rb\n\n\n\n\n#OS\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\n----\n\n###\u4eca\u56de\u4f7f\u7528\u3057\u3066\u3044\u308b\u74b0\u5883\n- \u30de\u30b7\u30f3\uff1aMacbook Air(MaxOS X 10.7.4)\n- \u4eee\u60f3\u74b0\u5883\uff1aVirtual Box 4.2.6 r82870\n- XCode 4.5.2\n - \u4e8b\u524d\u306bCommand Line Tools\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\n\n###RVM\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\nbash -s stable < <(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer)\n\nsource ~/.bash_profile\n\nrvm install 1.9.3\nrvm use 1.9.3\nrvm --default 1.9.3\n```\n\n###.bash_profile\u306e\u78ba\u8a8d\n\n```\nPATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting\nsource \"$HOME/.rvm/scripts/rvm\"\n```\n\n###Vagrant\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\ngem install vagrant\n```\n\n##VeeWee\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nVeeWee\u306fBox\u30d5\u30a1\u30a4\u30eb\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u751f\u6210\u3057\u3066\u304f\u308c\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u3059\u3002\n\nBundler\u304c\u5165\u3063\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\n\n```\nbundle -v\n```\n\nBundler\u304c\u5165\u3063\u3066\u3044\u306a\u3051\u308c\u3070\u5165\u308c\u308b\n\n```\ngem install bundler\n```\n\n####VeeWee\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n```\ngit clone git://github.com/jedi4ever/veewee.git\n```\n\nVeeWee\u306e.rvmrc\u3092\u66f8\u304d\u63db\u3048\u308b\n1.9.2 \u3068\u306a\u3063\u3066\u3044\u308b\u90e8\u5206\u3092 1.9.3 \u306b\u5909\u66f4\n\n```.rvmrc\u306e\u66f8\u304d\u63db\u3048(veewee\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u306b\u3042\u308b)\nvim veewee/.rvmrc\n```\n\n####\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b9f\u884c\n\n```\ncd veewee\nbundle install\n```\n\n\u3053\u3053\u306e`bundle install`\u3067\u3064\u307e\u305a\u3044\u305f\u3068\u304d\u306f`bundle -v`\u3092\u5b9f\u884c\u3057\u3066\u307f\u3066\u4e0b\u8a18\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u305f\u3089\u5bfe\u5fdc\u3059\u308b\n\n```bundle\u304c\u6b63\u5e38\u306b\u8a8d\u8b58\u3055\u308c\u3066\u3044\u308b\u304b\u306e\u78ba\u8a8d\n$ bundle -v\nERROR: Gem bundler is not installed, run `gem install bundler` first.\n```\n\n```\u5bfe\u5fdc\nrvm reload\n```\n\n\u305d\u308c\u3067\u3082\u30c0\u30e1\u306a\u5834\u5408\u3001\u8907\u6570\u306e`bundler`\u304c\u5165\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u3082\u3042\u308b\u306e\u3067\u3001`gem uninstall bundler`\u3092\u8a66\u3057\u3066\u307f\u308b\u3002\n\u6e21\u3057\u306e\u5834\u5408\u306f\u4e0b\u8a18\u306e\u69d8\u306b2\u7a2e\u985e\u5165\u3063\u3066\u3044\u305f\u306e\u3067\u3044\u3063\u305f\u3093\u524a\u9664\u3002\n\n```\u8907\u6570bundler\u304c\u5165\u3063\u3066\u3044\u308b\u304b\u306e\u78ba\u8a8d\u3068\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ gem uninstall bundler\n\nSelect gem to uninstall:\n 1. bundler-1.1.5\n 2. bundler-1.2.3\n 3. All versions\n> 3\nSuccessfully uninstalled bundler-1.1.5\n\nYou have requested to uninstall the gem:\n\tbundler-1.2.3\nlog4r-1.1.10 depends on [bundler (>= 1.0.0)]\norm_adapter-0.4.0 depends on [bundler (>= 1.0.0)]\npaperclip-3.2.0 depends on [bundler (>= 0)]\nrails-3.2.8 depends on [bundler (~> 1.0)]\nthor-0.16.0 depends on [bundler (~> 1.0)]\nuglifier-1.3.0 depends on [bundler (~> 1.0)]\nuglifier-1.2.7 depends on [bundler (~> 1.0)]\nIf you remove this gems, one or more dependencies will not be met.\nContinue with Uninstall? [Yn]  y\nRemove executables:\n\tbundle\n\nin addition to the gem? [Yn]  y\nRemoving bundle\nSuccessfully uninstalled bundler-1.2.3\n```\n\n\u203b \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u79fb\u52d5\u3059\u308b\u3068\u30b7\u30a7\u30eb\u304c\u8a8d\u8b58\u3057\u3066\u3044\u308b\u72b6\u614b\u304c\u5909\u308f\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u79fb\u52d5\u3057\u3066\u307e\u305fbundler\u304c\u3046\u307e\u304f\u8a8d\u8b58\u3055\u308c\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3042\u308c\u3070`rvm reload`\u3068\u3059\u308b\u3068\u826f\u3044\u3002\n\n####\u518d\u5ea6bundler\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bundler\u3092\u518d\u8a8d\u8b58\u3055\u305b\u308b\nrvm reload\ngem install bundler\n```\n\n####\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u5b9a\u7fa9\n\nCentOS 6.3 \u306e\u74b0\u5883\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n\u3053\u306e\u30b3\u30de\u30f3\u30c9\u306fveewee\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u3067\u5b9f\u884c\u3059\u308b\u3002\n\n```\nbundle exec vagrant basebox define centos_64_x86_64 CentOS-6.3-x86_64-minimal\n```\n\n\u305d\u3046\u3059\u308b\u3068definations\u306b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u4f5c\u6210\u3055\u308c\u308b\u306e\u3067\u3001\u305d\u308c\u3089\u3092\u7de8\u96c6\u3059\u308b\u3002\n\n####`definition.rb` \u3092\u7de8\u96c6\n\n\u30df\u30e9\u30fc\u306e\u53c2\u7167\u5148\u3092\u5909\u66f4\n\n```\n:iso_file => \"CentOS-6.3-x86_64-minimal.iso\",\n:iso_src => \"ftp://ftp.riken.jp/Linux/centos/6.3/isos/x86_64/CentOS-6.3-x86_64-minimal.iso\",\n```\n\n####`ks.cfg`\u3092\u7de8\u96c6\n\n\u3053\u308c\u306fCentOS\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u306e\u30ad\u30c3\u30af\u30b9\u30bf\u30fc\u30c8\u7528\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u3001\u65e5\u672c\u8a9e\u5bfe\u5fdc\u3001\u65e5\u672c\u6642\u9593\u5bfe\u5fdc\u306b\u3059\u308b\u3002\n\n```\ninstall\ncdrom\nlang ja_JP.UTF-8\nkeyboard us\nnetwork --bootproto=dhcp\nrootpw --iscrypted $1$damlkd,f$UC/u5pUts5QiU3ow.CSso/\nfirewall --enabled --service=ssh\nauthconfig --enableshadow --passalgo=sha512\nselinux --disabled\ntimezone Asia/Tokyo\nbootloader --location=mbr\n```\n\n####\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u30d3\u30eb\u30c9\n\n```\nvagrant basebox build centos_64_x86_64\n\n[centos_64_x86_64] Downloading vbox guest additions iso v 4.2.6 - http://download.virtualbox.org/virtualbox/4.2.6/VBoxGuestAdditions_4.2.6.iso\nFetching file:  62% |oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo                                                                      |  26.5MB 351.8KB/s ETA:   0:00:47\n```\n\n\u3057\u3070\u3089\u304f\u5f85\u3064\u3002\u9014\u4e2d\u3067iso\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u304b\u805e\u3044\u3066\u304f\u308b\u306e\u3067yes\u3068\u3059\u308b\u3002\n\n\u81ea\u52d5\u7684\u306b\u4eee\u60f3\u30de\u30b7\u30f3\u304c\u8d77\u52d5\u3059\u308b\u306e\u3067\u3001\u307e\u305f\u3057\u3070\u3089\u304f\u653e\u7f6e\u3002\n\n\u30d7\u30ed\u30f3\u30d7\u30c8\u306b\n\n```\n[centos_64_x86_64] The box centos_64_x86_64 was build successfully!\n[centos_64_x86_64] You can now login to the box with:\n[vagrant] ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -p 7222 -l veewee 127.0.0.1\n```\n\u3068\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u3053\u306e\u30b3\u30de\u30f3\u30c9`ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -p 7222 -l veewee 127.0.0.1`\u3067veewee\u3068\u3044\u3046\u30d1\u30b9\u30ef\u30fc\u30c9\u3067ssh\u30ed\u30b0\u30a4\u30f3\u304c\u53ef\u80fd\u3002\n\n\u3053\u306e\u72b6\u614b\u306b\u306a\u3063\u305f\u3089\u4e00\u5ea6\u843d\u3068\u3057\u307e\u3059\u3002\n\n```\nshutdown -h now\n```\n\n####box\u30d5\u30a1\u30a4\u30eb\u3078\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\n\n\u69cb\u7bc9\u3057\u305f\u4eee\u60f3\u74b0\u5883\u3092box\u30d5\u30a1\u30a4\u30eb\u306b\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002\n\n```\nbundle exec veewee vbox export 'centos_64_x86_64'\n```\n```\n$ bundle exec veewee vbox export 'centos_64_x86_64' \nCreating a temporary directory for export\nAdding additional files\nCreating Vagrantfile\nExporting the box\nExecuting VBoxManage export centos_64_x86_64 --output /var/folders/0g/thkrchb92p56ypt61cmb2jfh0000gn/T/d20130812-7484-yssofx/box.ovf\n0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%\nSuccessfully exported 1 machine(s).\nPackaging the box\nCleaning up temporary directory\n\nTo import it into vagrant type:\nvagrant box add 'centos_64_x86_64' '/Users/nouphet/chefStudy/veewee/centos_64_x86_64.box'\n\nTo use it:\nvagrant init 'centos_64_x86_64'\nvagrant up\nvagrant ssh\n```\n\n####\u4eee\u60f3\u74b0\u5883\u306e\u767b\u9332\u3068\u521d\u671f\u5316\n\n\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3057\u305fbox\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\n```\nvagrant box add 'centos_64_x86_64' 'centos_64_x86_64.box'\n```\n\n####box\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4f5c\u6210\nveewee\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304b\u3089\u629c\u3051\u3066\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```box\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4f5c\u6210\nunalias vagrant\nmkdir -p ~/box/centos_64_x86_64\ncd ~/box/centos_64_x86_64.box\n```\n\n####box\u3092\u767b\u9332\u3057\u3066\u8d77\u52d5\n\u3044\u3088\u3044\u3088\u767b\u9332\u3057\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\nvagrant box add centos_64_x86_64 ~/box/centos_64_x86_64\n\nvagrant init centos_64_x86_64\n```\n\u203b \u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bVagrantfile\u304c\u4f5c\u6210\u3055\u308c\u308b\n\n```\n$ vagrant up\n[default] Importing base box 'centos_64_x86_64'...\n[default] Matching MAC address for NAT networking...\n[default] Clearing any previously set forwarded ports...\n[default] Fixed port collision for 22 => 2222. Now on port 2200.\n[default] Forwarding ports...\n[default] -- 22 => 2200 (adapter 1)\n[default] Creating shared folders metadata...\n[default] Clearing any previously set network interfaces...\n[default] Booting VM...\n[default] Waiting for VM to boot. This can take a few minutes.\n[default] VM booted and ready for use!\n[default] Mounting shared folders...\n[default] -- v-root: /vagrant\n```\n\n\u3053\u3053\u307e\u3067\u8868\u793a\u3055\u308c\u305f\u3089\u8d77\u52d5\u304c\u5b8c\u4e86\u3057\u3066\u3044\u308b\u306e\u3067ssh\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\n####\u30ed\u30b0\u30a4\u30f3\u3059\u308b\n\n```\nvagrant ssh\nWelcome to your Vagrant-built virtual machine.\n[vagrant@localhost ~]$\n```\n\n\u3072\u3048\u30fc\uff01\u611f\u52d5\u3067\u3059\u3002 ^^\n\n#\u958b\u767a\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\n----\n\n\u4eca\u56de\u306f\u4fbf\u5229\u306a`Chef-solo`\u3092\u4f7f\u3063\u3066\u74b0\u5883\u306e\u69cb\u7bc9\u3092\u884c\u306a\u3063\u3066\u307f\u307e\u3059\u3002\n\n##Chef-solo\u3092\u8a2d\u5b9a\n\u30db\u30b9\u30c8\u5074\u306e\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea`~/box/centos_64_x86_64`(Vagrantfile\u306e\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea)\u304cVirtualBox\u306e\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u3068\u3057\u3066/vagrant\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u3053\u3067\u4f5c\u696d\u3057\u307e\u3059\u3002\n\n```\ncd /vagrant/\nknife cookbook create myrecipe -o cookbooks\nWARNING: No knife configuration file found\n** Creating cookbook myrecipe\n** Creating README for cookbook: myrecipe\n** Creating CHANGELOG for cookbook: myrecipe\n** Creating metadata for cookbook: myrecipe\n```\n\n\u9014\u4e2d\u3067`WARNING`\u304c\u51fa\u307e\u3059\u304c\u3001knife\u30b3\u30de\u30f3\u30c9\u3092\u6700\u521d\u306b\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067OK\u3067\u3059\u3002\n\n\u3053\u308c\u3067\u4f55\u3082\u3057\u306a\u3044cookbook\u306e\u96db\u5f62\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\u6b21\u306bVagrantfile\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n\u524d\u8ff0\u306e\u901a\u308aVagrantfile\u306f\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308b\u306e\u3067\u3001\u30db\u30b9\u30c8OS\u5074\u3067\u7de8\u96c6\u3057\u3066\u3082\u4eee\u60f3\u74b0\u5883\u5074\u3067\u7de8\u96c6\u3057\u3066\u3082OK\u3067\u3059\u3002\n(\u305f\u3060\u3057\u3053\u306e\u6642\u70b9\u3067\u306fvi\u3057\u304b\u5165\u3063\u3066\u307e\u305b\u3093)\u3002\n\n\u4eca\u56de\u306f\u30db\u30b9\u30c8OS\u5074\u304b\u3089\u7de8\u96c6\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\ncd ~/box/centos_64_x86_64\nvim Vagrantfile\n```\n\n\u4e00\u756a\u4e0b\u306b\u8ffd\u8a18\n\n```Vagrantfile\nVagrant::Config.run do |config|\n  config.vm.provision :chef_solo do |chef|\n    chef.cookbooks_path = \"cookbooks\"\n    chef.add_recipe \"myrecipe\"\n  end\nend\n```\n\n\u3053\u3053\u3067\u3044\u3063\u305f\u3093\u518d\u8d77\u52d5\u3002\n\n```bash\nvagrant reload\n```\n\n##\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u307e\u305avim\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3059\u3002\n\u3044\u3064\u3082\u3060\u3068 `yum install` \u3059\u308b\u306e\u304c\u65e9\u3044\u306e\u3067\u3059\u304c\u3001\u4eca\u56de\u306fChef-solo\u3092\u4f7f\u3063\u3066\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u306e\u3067 `cookbooks/myrecipe/recipes/default.rb` \u306b\u4e00\u884c\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```cookbooks/myrecipe/recipes/default.rb\npackage \"vim-enhanced\"\n```\n\n\u30db\u30b9\u30c8OS\u5074\u3067`vagrant provision`\u3092\u5b9f\u884c\u3002\n\n```bash\nvagrant provision\n```\n\n```\nvagrant provision\n[default] Running provisioner: Vagrant::Provisioners::ChefSolo...\n[default] Generating chef JSON and uploading...\n[default] Running chef-solo...\n[2013-01-02T15:56:22+09:00] INFO: *** Chef 10.16.4 ***\n[2013-01-02T15:56:22+09:00] INFO: Setting the run_list to [\"recipe[myrecipe]\"] from JSON\n[2013-01-02T15:56:22+09:00] INFO: Run List is [recipe[myrecipe]]\n[2013-01-02T15:56:22+09:00] INFO: Run List expands to [myrecipe]\n[2013-01-02T15:56:22+09:00] INFO: Starting Chef Run for localhost\n[2013-01-02T15:56:22+09:00] INFO: Running start handlers\n[2013-01-02T15:56:22+09:00] INFO: Start handlers complete.\n[2013-01-02T15:56:22+09:00] INFO: Processing package[vim-enhanced] action install (myrecipe::default line 9)\n[2013-01-02T15:56:47+09:00] INFO: package[vim-enhanced] installing vim-enhanced-7.2.411-1.8.el6 from base repository\n[2013-01-02T15:57:03+09:00] INFO: Chef Run complete in 40.950383 seconds\n[2013-01-02T15:57:03+09:00] INFO: Running report handlers\n[2013-01-02T15:57:03+09:00] INFO: Report handlers complete\n```\n\n\u4eee\u60f3\u74b0\u5883\u5074\u3067\u306f\u4f55\u3082\u3057\u3066\u3044\u306a\u3044\u306e\u306b`vim`\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\uff01\uff01\n\n\u3053\u3046\u3084\u3063\u3066\u5b9a\u7fa9\u3092\u66f8\u3044\u3066\u3044\u304f\u4e8b\u3067\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3066\u3044\u304f\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u4f55\u3088\u308a\u3001\u3053\u306e\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u306f\u30db\u30b9\u30c8OS\u5074\u306e\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306b\u5b58\u5728\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u5143\u306b\u540c\u3058\u8a2d\u5b9a\u306eOS\u304c\u3044\u304f\u3064\u3067\u3082\u624b\u8efd\u306b\u69cb\u7bc9\u3067\u304d\u308b\u3068\u3044\u3046\u5bf8\u6cd5\u3067\u3059\u3002\n\n\u3067\u306f\u4eca\u5ea6\u306f`httpd``php54``mysql-server`\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```cookbooks/myrecipe/recipes/default.rb\n\n```\n"}