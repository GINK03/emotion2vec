{"tags": ["Conoha", "PHP", "openstack"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u8a18\u4e8b\u306f\u300cConoHa Advent Calendar2015\u300d\u306e20\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n19\u65e5\u76ee\u306f@wakadannacom\u3055\u3093\u306e\u300cConoHa\u306bNutanix CE\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u304b\u691c\u8a0e\u3060\u3051\u3057\u3066\u307f\u305f\u300d\n21\u65e5\u76ee\u306f@keita299\u3055\u3093\u306e\u300cConoHa \u306e \u30e1\u30fc\u30eb API \u3067\u30a2\u30c9\u30ec\u30b9\u306e\u767b\u9332\u30fb\u4e00\u89a7\u30fb\u524a\u9664\u3092\u3059\u308b\u3002\u300d\n\u3067\u3057\u305f\u3002\n\n\u3053\u3093\u306b\u3061\u306f\u3001\u3072\u308d\u306e\u3076\u3067\u3059( \u00b4 \u03c9 ` )\n\u5148\u65e5Twitter\u3067\u3053\u3093\u306a\u767a\u8a00\u3092\u3057\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u3061\u3087\u3063\u3068\u30d5\u30a9\u30ed\u30fc\u30a2\u30c3\u30d7\u306a\u3069\u3092\u517c\u306d\u3066\u3001php-opencloud\u306e\u5c0e\u5165\u7de8\u3092\u66f8\u3044\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u57fa\u672c\u7684\u306b\u672c\u5bb6\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u6cbf\u3063\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u81ea\u5206\u3067\u8aad\u3093\u3067\u5b9f\u88c5\u3067\u304d\u3066\u3057\u307e\u3046\u65b9\u306f\u8aad\u3080\u5fc5\u8981\u306a\u3044\u304b\u3082\u3067\u3059\u3002\n\n@aWebprogrammer \u3053\u3093\u3070\u3093\u306f\u3002ConoHa\u3067SDK\u306f\u3054\u7528\u610f\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u4e2d\u306e\u4eba\u7684\u306b\u306fphp-opencloud\u304c\u304a\u3059\u3059\u3081\u3067\u3059 https://t.co/jyWT7fEK3d\u2014 Hironobu Saitoh (@hironobu_s) 2015, 12\u6708 20\n\n\nPHP\u3067ConoHa API\u3092\u4f7f\u3046\nConoHa API\u306fOpenStack + \u03b1\u306a\u69cb\u6210\u3068\u306a\u3063\u3066\u3044\u3066\u3001\u8981\u306f\u5358\u7d14\u306aREST API\u3067\u3059\u3002\nConoHa API\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\nPHP\u306f\u3068\u306b\u304b\u304fHTTP\u30a2\u30af\u30bb\u30b9\u304c\u7c21\u5358\u306b\u3067\u304d\u308b\u306e\u3067\u3001SDK\u3092\u7528\u3044\u306a\u304f\u3066\u3082API\u53e9\u304f\u306e\u306f\u7c21\u5358\u3067\u3059\u3002\u3053\u3046\u3044\u3046\u306e\u3001\u3042\u308b\u610f\u5473\u3059\u3054\u3044\u30fb\u30fb\u30fb\u3002\n$body = file_get_contents('http://example.com/');\n\n\u305d\u3057\u3066\u3001ConoHa API(OpenStack API\u3082)\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\u5404\u30b5\u30fc\u30d3\u30b9(Compute, Network, Storage\u306a\u3069)\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u524d\u306bIdentity\u3092\u4f7f\u3063\u3066\u8a8d\u8a3c\u3092\u6e08\u307e\u305b\u3001\u30c8\u30fc\u30af\u30f3\u3092\u3042\u3089\u304b\u3058\u3081\u53d6\u5f97\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u3057\u3066\u30c8\u30fc\u30af\u30f3\u306f\u6709\u52b9\u671f\u9650\u304c\u3042\u308a\u3001\u305d\u306e\u9593\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u3066\u7f6e\u3044\u305f\u65b9\u304c\u52b9\u7387\u3088\u304fAPI\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002(\u8a73\u3057\u304f\u306f\u4ee5\u4e0b\u306e\u30b9\u30e9\u30a4\u30c915\u30da\u30fc\u30b8\u3092\u53c2\u7167)\n\n\u30d1\u30d6\u30ea\u30c3\u30af\u30af\u30e9\u30a6\u30c9ConoHa\u3092\u4f7f\u3063\u3066OpenStack API\u3092\u7406\u89e3\u3059\u308b\nSDK\u306f\u3053\u306e\u8fba\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3092\u3046\u307e\u304f\u62bd\u8c61\u5316\u3057\u3066\u304f\u308c\u307e\u3059\u3002\u30c8\u30fc\u30af\u30f3\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u306f\u3042\u308b\u7a0b\u5ea6\u81ea\u5206\u3067\u66f8\u304b\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u304c\u3001\u307e\u3041\u305d\u308c\u3067\u3082\u7c21\u5358\u306b\u66f8\u3051\u307e\u3059\u3002\n\nphp-opencloud\nphp-opencloud\u306fRackspace\u304c\u958b\u767a\u3057\u3066\u3044\u308bPHP\u306eOpenStack SDK\u3067\u3059\u3002Rackspace\u306fOpenStack\u30d9\u30fc\u30b9\u306e\u30d1\u30d6\u30ea\u30c3\u30af\u30af\u30e9\u30a6\u30c9\u3092\u5c55\u958b\u3057\u3066\u3044\u308b\u4f01\u696d\u3067\u3059\u304c\u3001\u3082\u3068\u3082\u3068OpenStack\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3082Rackspace\u306b\u3088\u3063\u3066\u59cb\u3081\u3089\u308c\u305f\u3082\u306e\u3067\u3059\u3002\n\nRackspace API\u306fOpenStack\u3092\u62e1\u5f35\u3057\u305f\u3082\u306e\u3067\u3001php-opencloud\u3082\u305d\u308c\u306b\u5bfe\u5fdc\u3057\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002\u3067\u3059\u304c\u3001php-opencloud\u306f\u305d\u306e\u62e1\u5f35\u90e8\u5206\u3092\u9664\u3044\u305f\u30d4\u30e5\u30a2\u306aOpenStack\u3092\u6271\u3046\u305f\u3081\u306e\u30af\u30e9\u30b9\u3082\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u57fa\u672c\u7684\u306bRackspace\u5411\u3051\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u8aad\u3080\u3068\u304d\u306f\u305d\u306e\u8fba\u306b\u6ce8\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nphp-opencloud\nphp-opencloud(GitHub)\nRackspace\u306f\u500b\u4eba\u3067\u3082\u4f7f\u3048\u308b\u306e\u3067\u3001ConoHa\u4ee5\u5916\u306eOpenStack\u74b0\u5883\u3092\u89e6\u3063\u3066\u307f\u305f\u3044\u65b9\u306f\u4f7f\u3063\u3066\u307f\u308b\u3068\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002(\u3061\u306a\u307f\u306b\u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210\u3059\u308b\u3068\u82f1\u8a9e\u3067\u78ba\u8a8d\u306e\u96fb\u8a71\u304c\u304b\u304b\u3063\u3066\u304d\u307e\u3059\u3002\u79c1\u306f\u77e5\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u30a2\u30ef\u30a2\u30ef\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u304c\u3001\u5411\u3053\u3046\u306e\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u3082\u305d\u3046\u3044\u3046\u306e\u6163\u308c\u3066\u308b\u3088\u3046\u306a\u306e\u3067\u4f55\u3068\u304b\u306a\u308a\u307e\u3057\u305f\u30fb\u30fb\u30fb)\n\n\u4f7f\u3063\u3066\u307f\u308b\n\u3067\u306f\u4f7f\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002php-opencloud\u306fPHP5.4\u4ee5\u4e0a\u3068composer\u304c\u5fc5\u8981\u3067\u3059\u3002VPS\u306a\u3069\u3067PHP\u74b0\u5883\u3092\u7acb\u3066\u3066\u3082\u826f\u3044\u306e\u3067\u3059\u304c\u3001\u4eca\u56de\u306fDocker\u3067\u3055\u304f\u3063\u3068PHP\u74b0\u5883\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\nmkdir php-opencloud && cd php-opencloud\ndocker pull php.5.6\ndocker run -v `pwd`:/php-opencloud -ti --rm --name php56 php:5.6 /bin/bash\n\n\u30b3\u30f3\u30c6\u30ca\u306b\u5165\u3063\u305f\u3089git\u3092\u8ffd\u52a0\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\napt-get update\napt-get install -y git\n\n\u305d\u3057\u3066composer\u3068php-opencloud\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\ncd php-opencloud\ncurl -sS https://getcomposer.org/installer | php\n./composer.phar require rackspace/php-opencloud\n(\u7d50\u69cb\u6642\u9593\u304b\u304b\u308b)\nls -la\ntotal 1240\ndrwxrwxr-x  3 1000 1000    4096 Dec 23 05:49 .\ndrwxr-xr-x 53 root root    4096 Dec 23 05:47 ..\n-rw-r--r--  1 root root      70 Dec 23 05:47 composer.json\n-rw-r--r--  1 root root   11253 Dec 23 05:49 composer.lock\n-rwxr-xr-x  1 root root 1238152 Dec 23 05:42 composer.phar\ndrwxr-xr-x  8 root root    4096 Dec 23 05:49 vendor\n\n\u3042\u3068\u306f\u3001\u3053\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u57fa\u672c\u7684\u306a\u3053\u3068\n\u672c\u5bb6\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u306fRackspace setup\u3068OpenStack setup\u30682\u3064\u306e\u65b9\u6cd5\u304c\u8f09\u3063\u3066\u3044\u307e\u3059\u3002\u5148\u307b\u3069\u66f8\u3044\u305f\u3068\u304a\u308a\u3001php-opencloud\u306f\u57fa\u672c\u7684\u306bRackspace\u5411\u3051\u3060\u304b\u3089\u3067\u3059\u3002\nConoHa\u3067\u4f7f\u3046\u5834\u5408\u306f\u5f8c\u8005\u306eOpenStack setup\u306e\u5185\u5bb9\u3067\u9032\u3081\u307e\u3059\u3002\u4f7f\u3046\u306e\u306fOpenStack\\OpenStack\u3067\u3001\u3042\u3068\u306f\u540d\u524d\u7a7a\u9593\u3092use\u3057\u3066OpenStack\u30af\u30e9\u30b9\u3092new\u3059\u308c\u3070OK\u3067\u3059\u3002\u5178\u578b\u7684\u306a\u66f8\u304d\u65b9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n<?php\n\nuse OpenCloud\\OpenStack;\nuse Guzzle\\Http\\Exception\\ClientErrorResponseException;\n\nrequire_once __DIR__ . '/vendor/autoload.php';\n\n$opts = [\n    'username' => 'gncu********',\n    'password' => 'password',\n    'tenantName' => 'gnct*******',\n];\n\ntry {\n    $client = new OpenStack('https://identity.tyo1.conoha.io/v2.0', $opts);\n    $client->authenticate();\n\n    // \u3053\u3053\u306b\u5b9f\u88c5\u3092\u66f8\u304f\n\n} catch(ClientErrorResponseException $ex) {\n    // error\n    echo $ex->getMessage();\n}\n\n$opts\u306b\u306fAPI\u306a\u8a8d\u8a3c\u60c5\u5831\u3092\u66f8\u304d\u307e\u3059\u3002\u3053\u308c\u306fConoHa\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d1\u30cd\u30eb\u306e\u300cAPI\u300d\u30e1\u30cb\u30e5\u30fc\u306b\u3042\u308a\u307e\u3059\u3002\n\n\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3046\n\u5148\u307b\u3069\u306e\u30b3\u30fc\u30c9\u3067$client\u306f\u3042\u304f\u307e\u3067REST API\u3092\u6271\u3046\u305f\u3081\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306a\u3060\u3051\u3067\u3001Compute, Network, Storage\u306a\u3069\u306f\u307e\u305f\u5225\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u30b5\u30fc\u30d3\u30b9\u306e\u4e00\u89a7(Catalog)\u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u5148\u307b\u3069\u306e\u30b3\u30fc\u30c9\u306e\u300c\u3053\u3053\u306b\u5b9f\u88c5\u3092\u66f8\u304f\u300d\u306b\u4e0b\u8a18\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n<?php\n\n$catalog = $client->getCatalog();\nforeach($catalog->getItems() as $item) {\n    foreach($item->getEndpoints() as $endpoint) {\n        echo sprintf(\"name:%s type:%s region:%s url:%s\\n\",\n                     $item->getName(),\n                     $item->getType(),\n                     $endpoint->region,\n                     $endpoint->publicURL);\n    }\n}\n\n\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059(\u4f0f\u305b\u5b57\u306e\u90e8\u5206\u306fTenantID\u3067\u30e6\u30fc\u30b6\u6bce\u306b\u7570\u306a\u308a\u307e\u3059)\u3002\u3053\u306ename\u3068type\u306b\u6ce8\u76ee\u3057\u3066\u4e0b\u3055\u3044\u3002\u305d\u308c\u305e\u308c\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3046\u306b\u306f\u3053\u308c\u3089\u3092\u6307\u5b9a\u3057\u3066\u30b5\u30fc\u30d3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\nname:Account Service type:account region:tyo1 url:https://account.tyo1.conoha.io/v1/****************************\nname:Database Hosting Service type:databasehosting region:tyo1 url:https://database-hosting.tyo1.conoha.io/v1\nname:Network Service type:network region:tyo1 url:https://networking.tyo1.conoha.io\nname:Volume Service type:volumev2 region:tyo1 url:https://block-storage.tyo1.conoha.io/v2/****************************\nname:Image Service type:image region:tyo1 url:https://image-service.tyo1.conoha.io\nname:Compute Service type:compute region:tyo1 url:https://compute.tyo1.conoha.io/v2/****************************\nname:Mail Hosting Service type:mailhosting region:tyo1 url:https://mail-hosting.tyo1.conoha.io/v1\nname:DNS Service type:dns region:tyo1 url:https://dns-service.tyo1.conoha.io\nname:Object Storage Service type:object-store region:tyo1 url:https://object-storage.tyo1.conoha.io/v1/nc_****************************\nname:Identity Service type:identity region:sjc1 url:https://identity.sjc1.conoha.io/v2.0\nname:Identity Service type:identity region:tyo1 url:https://identity.tyo1.conoha.io/v2.0\nname:Identity Service type:identity region:sin1 url:https://identity.sin1.conoha.io/v2.0\n\n\nCompute Service\u3092\u4f7f\u3046\n\u30b5\u30fc\u30d3\u30b9\u306f\u8272\u3005\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u308f\u304b\u308a\u3084\u3059\u3044\u3068\u3053\u308d\u3067Compute\u3092\u4f7f\u3063\u3066VPS\u3092\u7acb\u3066\u3066\u307f\u307e\u3057\u3087\u3046(API\u306e\u8aac\u660e\u3059\u308b\u3068\u304d\u306e\u5b9a\u756a\u3067\u3059\u304c)\u3002Compute Service\u306f\u3001OpenStack\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u6271\u3046\u30b5\u30fc\u30d3\u30b9\u3067\u3001ConoHa\u3067\u306fVPS\u3092\u6271\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u306a\u304a\u3001\u3053\u3053\u3067\u7d39\u4ecb\u3059\u308b\u6a5f\u80fd\u306f\u4e00\u90e8\u3067\u3001\u8a73\u7d30\u306f\u672c\u5bb6\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u3054\u89a7\u4e0b\u3055\u3044\u3002\n\u30b5\u30fc\u30d3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u53d6\u5f97\u3057\u307e\u3059\u3002\u5f15\u6570\u306bname\u3068region\u3092\u6e21\u3057\u307e\u3059\u3002\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3057\u3066\u4f55\u304b\u5b9f\u884c\u3059\u308b\u5834\u5408\u306f\u5168\u3066\u3053\u306e$compute\u3092\u4ecb\u3057\u3066\u884c\u3044\u307e\u3059\u3002\n$compute = $client->computeService('Compute Service', 'tyo1');\n\n\nflavor\u3092\u53d6\u5f97\u3057\u3066\u307f\u308b\nOpenStack\u3067flavor\u3068\u3044\u3046\u306e\u306f\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u5b9a\u7fa9\u3092\u8868\u3057\u307e\u3059\u3002CPU\u30b3\u30a2\u6570\u3001\u30e1\u30e2\u30ea\u3001\u30b9\u30c8\u30ec\u30fc\u30b8\u306a\u3069\u3067\u3059\u306d\u3002ConoHa\u3067\u306fVPS\u306e\u30d7\u30e9\u30f3\u3092\u6307\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u5148\u307b\u3069\u306e\u300c\u3053\u3053\u306b\u5b9f\u88c5\u3092\u66f8\u304f\u300d\u306e\u3068\u3053\u308d\u306b\u633f\u5165\u3057\u307e\u3059\u3002\u3053\u308c\u3060\u3051\u3067\u3059\u3001SDK\u306e\u4fbf\u5229\u306a\u3068\u3053\u308d\u3067\u3059\u306d\u3002\n<?php\n$compute = $client->computeService('Compute Service', 'tyo1');\nforeach($compute->flavorList() as $img) {\n    echo sprintf(\"id:%s name:%s\\n\", $img->id, $img->name);\n}\n\n\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u3067\u3059\u3002\nid:294639c7-72ba-43a5-8ff2-513c8995b869 name:g-2gb\nid:3aa001cd-95b6-46c9-a91e-e62d6f7f06a3 name:g-16gb\nid:62e8fb4b-6a26-46cd-be13-e5bbf5614d15 name:g-4gb\nid:7eea7469-0d85-4f82-8050-6ae742394681 name:g-1gb\nid:965affd4-d9e8-4ffb-b9a9-624d63e2d83f name:g-8gb\nid:a20905c6-3733-46c4-81cc-458c7dca1bae name:g-32gb\nid:c2a97b05-1b4b-4038-bbcb-343201659279 name:g-64gb\n\n\n\u30a4\u30e1\u30fc\u30b8\u4e00\u89a7\u3092\u53d6\u5f97\u3057\u3066\u307f\u308b\n\u300c\u30a4\u30e1\u30fc\u30b8\u300d\u306fOpenStack\u3067\u306f\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u30c7\u30a3\u30b9\u30af\u30a4\u30e1\u30fc\u30b8\u306e\u3053\u3068\u3067\u3001ConoHa\u3067\u306fOS\u306e\u30a4\u30e1\u30fc\u30b8\u3084\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u30a4\u30e1\u30fc\u30b8\u306a\u3069\u8272\u3005\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u57fa\u672c\u7684\u306bflavor\u3068\u30e1\u30bd\u30c3\u30c9\u304c\u9055\u3046\u3060\u3051\u3067\u540c\u3058\u3088\u3046\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\u30b3\u30fc\u30c9\u7684\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002flavor\u3068\u30e1\u30bd\u30c3\u30c9\u304c\u9055\u3046\u3060\u3051\u3067\u3059\u3002\n<?php\nforeach($compute->imageList() as $img) {\n    echo sprintf(\"id:%s name:%s\\n\", $img->id, $img->name);\n}\n\n\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u3067\u3059\nid:8f19ff24-3ff9-4beb-9603-d67dead1fc00 name:vmi-wp-kusanagi-centos-7\nid:edf80c2c-fdf7-45ee-b625-9e18d40cedc6 name:vmi-zabbix-2.4-centos-7\nid:e090aed7-5949-45ec-93f0-e735d8d0d29e name:s-abe-master\nid:6b3a81fa-9ca1-4fb3-b000-e1495620a119 name:vmi-piwik-2.15-centos-6.7\nid:7cab9247-1253-4bfd-8e4d-026fcd9168e3 name:vmi-drupal-8.0-centos-7\nid:9f89b30b-09a4-4606-b27a-c33794559d51 name:ubuntu14-clean\nid:238801ae-7256-453c-9133-5202aa39a621 name:vmi-opensuse-42.1-amd64\n(\u4ee5\u4e0b\u7565)\n\n\n\u4eee\u60f3\u30de\u30b7\u30f3(VM)\u3092\u4f5c\u6210\u3059\u308b\n\u3067\u306f\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\u3053\u3053\u306f\u3061\u3087\u3063\u3068\u4e00\u624b\u9593\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\nVM\u4f5c\u6210API\u306b\u306fsecurity_groups\u3068adminPass\u3068\u3044\u3046\u8a00\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308b\u306e\u3067\u3059\u304c\u3001php-opencloud\u306f\u3053\u308c\u3089\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u306a\u306e\u3067\u3001\u3053\u3053\u306fphp-opencloud\u306eOpenStack\\Compute\\Resource\\Server\u3092\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3001API\u3078\u306e\u30ea\u30af\u30a8\u30b9\u30c8JSON\u306b2\u3064\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u8ffd\u52a0\u3057\u3066\u3001createJSON()\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u3066JSON\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002adminPass\u306f\u5143\u306e\u30af\u30e9\u30b9\u306b\u30d7\u30ed\u30d1\u30c6\u30a3\u5b9a\u7fa9\u306f\u3042\u308b\u306e\u3067\u3059\u304c\u3001createJson()\u5185\u3067\u306f\u4f7f\u7528\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u3053\u308c\u306f\u30d0\u30b0\u3063\u307d\u3044\u3067\u3059\u306d\u3002\nclass ConoHa extends Server {\n    protected $security_groups = [];\n\n    protected function createJson() {\n        $server = parent::createJson();\n\n        // adminPass\n        if($this->getProperty('adminPass') != null) {\n            $server->server->adminPass = $this->getProperty('adminPass');\n        }\n\n        // security_groups\n        $security_groups = $this->getProperty('security_groups');\n        if (count($security_groups) > 0) {\n            $server->server->security_groups = $security_groups;\n        }\n        return $server;\n    }\n}\n\n\u5b9f\u969b\u306bVM\u3092\u4f5c\u6210\u3059\u308b\u90e8\u5206\u306e\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u3067\u3059\u3002ConoHa\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u3063\u3066create()\u3092\u547c\u3073\u307e\u3059\u3002\u5f15\u6570\u306fVM\u4f5c\u6210\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001\u4e00\u89a7\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3042\u308a\u307e\u3059\u3002\u4ed6\u306b\u3088\u304f\u4f7f\u3044\u305d\u3046\u306a\u3082\u306e\u3067keypair\u3068\u8a00\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308a\u3001VM\u306b\u8a2d\u5b9a\u3059\u308bSSH\u516c\u958b\u9375\u3092\u6307\u5b9a\u3059\u308b\u3068\u304d\u306b\u4f7f\u3044\u307e\u3059\u3002\n\u30b3\u30fc\u30c9\u5168\u6587\u306f\u9577\u304f\u306a\u308b\u306e\u3067Gist\u306b\u7f6e\u3044\u3066\u3042\u308a\u307e\u3059\u3002\n\n$compute = $client->computeService('Compute Service', 'tyo1');\ntry {\n    // ConoHa\u30af\u30e9\u30b9\u3092\u4f7f\u308f\u306a\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\n    // $server = $compute->server()\n\n    $server = new ConoHa($compute);\n\n    $create_opts = [\n        'name' => 'test-vps',\n        'imageId' => 'edc9457e-e4a8-4974-8217-c254d215b460',\n        'flavorId' => '7eea7469-0d85-4f82-8050-6ae742394681',\n        'adminPass' => '***********',\n        \"security_groups\" => [\n            [\n                \"name\" => \"default\",\n            ],\n            [\n                \"name\" => \"gncs-ipv4-all\",\n            ],\n            [\n                \"name\" => \"gncs-ipv6-all\",\n            ]\n        ],\n    ];\n    $resp = $server->create($create_opts);\n\n} catch(BadResponseException $ex) {\n    echo $ex->getResponse();\n}\n\n\n\n\u30c8\u30fc\u30af\u30f3\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\nOpenStack API\u306f\u8a8d\u8a3c\u5b9f\u884c\u5f8c\u306b\u30c8\u30fc\u30af\u30f3\u304c\u767a\u884c\u3055\u308c\u3001\u30b5\u30fc\u30d3\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u969b\u306b\u305d\u308c\u304c\u4f7f\u308f\u308c\u308b\u3053\u3068\u306f\u65e2\u306b\u66f8\u304d\u307e\u3057\u305f\u3002\u3053\u306e\u30c8\u30fc\u30af\u30f3\u3092\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u306b\u66f8\u304d\u51fa\u3057\u3066\u304a\u3044\u3066\u30012\u56de\u76ee\u4ee5\u964d\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u305f\u969b\u306b\u4f7f\u3044\u56de\u3059\u3053\u3068\u3067\u8a8d\u8a3c\u3092\u30b9\u30ad\u30c3\u30d7\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nOpenStack\u30aa\u30d6\u30b8\u30a7\u30af\u30c8$client\u306b\u306fexportCredentials()\u3068importCredentials()\u3068\u3044\u30462\u3064\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308a\u307e\u3059\u3002exportCredentials()\u306f\u30c8\u30fc\u30af\u30f3\u3092\u542b\u3080\u8a8d\u8a3c\u60c5\u5831\u3092\u66f8\u304d\u51fa\u3057\u3001importCredentials()\u306f\u305d\u306e\u8a8d\u8a3c\u60c5\u5831\u3092\u8aad\u307f\u8fbc\u3080\u3068\u304d\u306b\u4f7f\u3044\u307e\u3059\u3002importCredentials()\u3067\u8aad\u307f\u8fbc\u3093\u3060\u8a8d\u8a3c\u60c5\u5831\u304c\u7121\u52b9(\u30c8\u30fc\u30af\u30f3\u306e\u6709\u52b9\u671f\u9650\u5207\u308c\u306a\u3069)\u3060\u3063\u305f\u5834\u5408\u3067\u3082\u3001SDK\u304c\u81ea\u52d5\u7684\u306b\u518d\u8a8d\u8a3c\u3092\u884c\u3063\u3066\u304f\u308c\u307e\u3059\u3002\u4fbf\u5229\u3002\n\u3055\u3066\u3001\u5b9f\u969b\u306b\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u8a8d\u8a3c\u60c5\u5831\u306fPHP\u306estdClass\u306a\u306e\u3067\u3001\u3053\u308c\u3092serialize()\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u51fa\u3057\u307e\u3059\u3002\n$opts = [\n    'username' => 'gncu********',\n    'password' => 'password',\n    'tenantName' => 'gnct*******',\n];\n\n$client = new OpenStack('https://identity.tyo1.conoha.io/v2.0', $opts);\n\n$cachefile = 'credentials.dat';\nif (file_exists($cachefile)) {\n    $str_credential = file_get_contents($cachefile);\n    $credentials = unserialize($str_credential);\n    if($credentials) {\n        $client->importCredentials($credentials);\n    }\n}\n\n$token = $client->getTokenObject();\nif(!$token || $token->hasExpired()) {\n    $client->authenticate();\n    file_put_contents($cachefile, serialize($client->exportCredentials()));\n}\n\n\n\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u4f7f\u3046\n\u305d\u3046\u3044\u3048\u3070\u6614\u3053\u306e\u3079\u3093\u306b\u66f8\u3044\u305f\u306e\u3067\u3001\u3088\u304b\u3063\u305f\u3089\u3053\u3061\u3089\u3082\u3054\u89a7\u4e0b\u3055\u3044\u3002\u8a8d\u8a3c\u90e8\u5206\u306f\u65e7ConoHa\u5411\u3051\u306e\u8aac\u660e\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u305d\u308c\u4ee5\u5916\u306f\u305d\u306e\u307e\u307e\u4f7f\u3048\u307e\u3059\u3002\nConoHa\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u4f7f\u3063\u3066\u307f\u3088\u3046(SDK+\u5fdc\u7528\u7de8)\n\n\u304a\u308f\u308a\u306b\nREST API\u3092\u305d\u306e\u307e\u307e\u53e9\u3044\u3066\u3082\u826f\u3044\u306e\u3067\u3059\u304c\u3001SDK\u3092\u4f7f\u3046\u3068\u3060\u3044\u3076\u697d\u3067\u304d\u308b\u306e\u3067\u3069\u3093\u3069\u3093\u4f7f\u3046\u3068\u826f\u3044\u3068\u601d\u3044\u307e\u3059(VM\u4f5c\u6210\u306f\u3061\u3087\u3063\u3068\u5927\u5909\u3067\u3057\u305f\u304c\u3001\u3001\u3001)\u3002\u305f\u3060\u3001php-opencloud\u3068ConoHa API\u4e21\u65b9\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u7768\u3081\u3063\u3053\u3057\u306a\u304c\u3089\u4f5c\u696d\u3059\u308b\u3088\u3046\u306a\u611f\u3058\u306b\u306a\u308b\u306e\u3067\u3001\u307e\u3041\u3053\u308c\u306f\u9811\u5f35\u308b\u3057\u304b\u306a\u3044\u304b\u306a\u3068\u3002\nPHP\u306f\u5229\u7528\u8005\u3082\u591a\u3044\u3067\u3059\u3057\u3001\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u304a\u5f79\u306b\u7acb\u3063\u305f\u3089\u4f55\u3088\u308a\u3067\u3059( \u00b4 \u03c9 ` )\n\u3053\u306e\u8a18\u4e8b\u306f[\u300cConoHa Advent Calendar2015\u300d](http://qiita.com/advent-calendar/2015/conoha)\u306e20\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n19\u65e5\u76ee\u306f[@wakadannacom](https://twitter.com/wakadannacom)\u3055\u3093\u306e[\u300cConoHa\u306bNutanix CE\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u304b\u691c\u8a0e\u3060\u3051\u3057\u3066\u307f\u305f\u300d](http://qiita.com/wakadannacom/items/08fe4748ede67df2938e)\n21\u65e5\u76ee\u306f[@keita299](https://twitter.com/keika299)\u3055\u3093\u306e[\u300cConoHa \u306e \u30e1\u30fc\u30eb API \u3067\u30a2\u30c9\u30ec\u30b9\u306e\u767b\u9332\u30fb\u4e00\u89a7\u30fb\u524a\u9664\u3092\u3059\u308b\u3002\u300d](http://qiita.com/keika299/items/e7fe510b57b08170838b)\n\u3067\u3057\u305f\u3002\n\n----------------------------\n\n\u3053\u3093\u306b\u3061\u306f\u3001\u3072\u308d\u306e\u3076\u3067\u3059( \u00b4 \u03c9 ` )\n\n\u5148\u65e5Twitter\u3067\u3053\u3093\u306a\u767a\u8a00\u3092\u3057\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u3061\u3087\u3063\u3068\u30d5\u30a9\u30ed\u30fc\u30a2\u30c3\u30d7\u306a\u3069\u3092\u517c\u306d\u3066\u3001[php-opencloud](http://php-opencloud.com/)\u306e\u5c0e\u5165\u7de8\u3092\u66f8\u3044\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u57fa\u672c\u7684\u306b\u672c\u5bb6\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u6cbf\u3063\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u81ea\u5206\u3067\u8aad\u3093\u3067\u5b9f\u88c5\u3067\u304d\u3066\u3057\u307e\u3046\u65b9\u306f\u8aad\u3080\u5fc5\u8981\u306a\u3044\u304b\u3082\u3067\u3059\u3002\n\n<blockquote class=\"twitter-tweet\" data-conversation=\"none\" lang=\"ja\"><p lang=\"ja\" dir=\"ltr\"><a href=\"https://twitter.com/aWebprogrammer\">@aWebprogrammer</a> \u3053\u3093\u3070\u3093\u306f\u3002ConoHa\u3067SDK\u306f\u3054\u7528\u610f\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u4e2d\u306e\u4eba\u7684\u306b\u306fphp-opencloud\u304c\u304a\u3059\u3059\u3081\u3067\u3059 <a href=\"https://t.co/jyWT7fEK3d\">https://t.co/jyWT7fEK3d</a></p>&mdash; Hironobu Saitoh (@hironobu_s) <a href=\"https://twitter.com/hironobu_s/status/678561726581706753\">2015, 12\u6708 20</a></blockquote>\n<script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\n# PHP\u3067ConoHa API\u3092\u4f7f\u3046\n\nConoHa API\u306fOpenStack + \u03b1\u306a\u69cb\u6210\u3068\u306a\u3063\u3066\u3044\u3066\u3001\u8981\u306f\u5358\u7d14\u306aREST API\u3067\u3059\u3002\n\n[ConoHa API\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://www.conoha.jp/docs/index.html)\n\nPHP\u306f\u3068\u306b\u304b\u304fHTTP\u30a2\u30af\u30bb\u30b9\u304c\u7c21\u5358\u306b\u3067\u304d\u308b\u306e\u3067\u3001SDK\u3092\u7528\u3044\u306a\u304f\u3066\u3082API\u53e9\u304f\u306e\u306f\u7c21\u5358\u3067\u3059\u3002\u3053\u3046\u3044\u3046\u306e\u3001\u3042\u308b\u610f\u5473\u3059\u3054\u3044\u30fb\u30fb\u30fb\u3002\n\n```php\n$body = file_get_contents('http://example.com/');\n```\n\n\u305d\u3057\u3066\u3001ConoHa API(OpenStack API\u3082)\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\u5404\u30b5\u30fc\u30d3\u30b9(Compute, Network, Storage\u306a\u3069)\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u524d\u306bIdentity\u3092\u4f7f\u3063\u3066\u8a8d\u8a3c\u3092\u6e08\u307e\u305b\u3001\u30c8\u30fc\u30af\u30f3\u3092\u3042\u3089\u304b\u3058\u3081\u53d6\u5f97\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u3057\u3066\u30c8\u30fc\u30af\u30f3\u306f\u6709\u52b9\u671f\u9650\u304c\u3042\u308a\u3001\u305d\u306e\u9593\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u3066\u7f6e\u3044\u305f\u65b9\u304c\u52b9\u7387\u3088\u304fAPI\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002(\u8a73\u3057\u304f\u306f\u4ee5\u4e0b\u306e\u30b9\u30e9\u30a4\u30c915\u30da\u30fc\u30b8\u3092\u53c2\u7167)\n\n<img width=\"456\" alt=\"api-workflow.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/44152/4508ae70-0e99-d8cf-8a3d-c0b0d4e6cfd8.png\">\n\n[\u30d1\u30d6\u30ea\u30c3\u30af\u30af\u30e9\u30a6\u30c9ConoHa\u3092\u4f7f\u3063\u3066OpenStack API\u3092\u7406\u89e3\u3059\u308b](http://www.slideshare.net/hironobusaitoh/conohaopenstack-api)\n\nSDK\u306f\u3053\u306e\u8fba\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u3092\u3046\u307e\u304f\u62bd\u8c61\u5316\u3057\u3066\u304f\u308c\u307e\u3059\u3002\u30c8\u30fc\u30af\u30f3\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u306f\u3042\u308b\u7a0b\u5ea6\u81ea\u5206\u3067\u66f8\u304b\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u304c\u3001\u307e\u3041\u305d\u308c\u3067\u3082\u7c21\u5358\u306b\u66f8\u3051\u307e\u3059\u3002\n\n## php-opencloud \n\nphp-opencloud\u306f[Rackspace](http://www.rackspace.com/)\u304c\u958b\u767a\u3057\u3066\u3044\u308bPHP\u306eOpenStack SDK\u3067\u3059\u3002Rackspace\u306fOpenStack\u30d9\u30fc\u30b9\u306e\u30d1\u30d6\u30ea\u30c3\u30af\u30af\u30e9\u30a6\u30c9\u3092\u5c55\u958b\u3057\u3066\u3044\u308b\u4f01\u696d\u3067\u3059\u304c\u3001\u3082\u3068\u3082\u3068OpenStack\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3082Rackspace\u306b\u3088\u3063\u3066\u59cb\u3081\u3089\u308c\u305f\u3082\u306e\u3067\u3059\u3002\n\n<img width=\"321\" alt=\"php-opencloud_by_rackspace.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/44152/af0d46f3-d957-1e42-bdd5-a67564580dd8.png\">\n\nRackspace API\u306fOpenStack\u3092\u62e1\u5f35\u3057\u305f\u3082\u306e\u3067\u3001php-opencloud\u3082\u305d\u308c\u306b\u5bfe\u5fdc\u3057\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002\u3067\u3059\u304c\u3001php-opencloud\u306f\u305d\u306e\u62e1\u5f35\u90e8\u5206\u3092\u9664\u3044\u305f\u30d4\u30e5\u30a2\u306aOpenStack\u3092\u6271\u3046\u305f\u3081\u306e\u30af\u30e9\u30b9\u3082\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u57fa\u672c\u7684\u306bRackspace\u5411\u3051\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u8aad\u3080\u3068\u304d\u306f\u305d\u306e\u8fba\u306b\u6ce8\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n[php-opencloud](http://php-opencloud.com/)\n[php-opencloud(GitHub)](https://github.com/rackspace/php-opencloud)\n\nRackspace\u306f\u500b\u4eba\u3067\u3082\u4f7f\u3048\u308b\u306e\u3067\u3001ConoHa\u4ee5\u5916\u306eOpenStack\u74b0\u5883\u3092\u89e6\u3063\u3066\u307f\u305f\u3044\u65b9\u306f\u4f7f\u3063\u3066\u307f\u308b\u3068\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002(\u3061\u306a\u307f\u306b\u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210\u3059\u308b\u3068\u82f1\u8a9e\u3067\u78ba\u8a8d\u306e\u96fb\u8a71\u304c\u304b\u304b\u3063\u3066\u304d\u307e\u3059\u3002\u79c1\u306f\u77e5\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u30a2\u30ef\u30a2\u30ef\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u304c\u3001\u5411\u3053\u3046\u306e\u30aa\u30da\u30ec\u30fc\u30bf\u30fc\u3082\u305d\u3046\u3044\u3046\u306e\u6163\u308c\u3066\u308b\u3088\u3046\u306a\u306e\u3067\u4f55\u3068\u304b\u306a\u308a\u307e\u3057\u305f\u30fb\u30fb\u30fb)\n\n# \u4f7f\u3063\u3066\u307f\u308b\n\n\u3067\u306f\u4f7f\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002php-opencloud\u306fPHP5.4\u4ee5\u4e0a\u3068[composer](https://getcomposer.org/)\u304c\u5fc5\u8981\u3067\u3059\u3002VPS\u306a\u3069\u3067PHP\u74b0\u5883\u3092\u7acb\u3066\u3066\u3082\u826f\u3044\u306e\u3067\u3059\u304c\u3001\u4eca\u56de\u306fDocker\u3067\u3055\u304f\u3063\u3068PHP\u74b0\u5883\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\n```shell\nmkdir php-opencloud && cd php-opencloud\ndocker pull php.5.6\ndocker run -v `pwd`:/php-opencloud -ti --rm --name php56 php:5.6 /bin/bash\n```\n\n\u30b3\u30f3\u30c6\u30ca\u306b\u5165\u3063\u305f\u3089git\u3092\u8ffd\u52a0\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\n\n```shell\napt-get update\napt-get install -y git\n```\n\n\u305d\u3057\u3066composer\u3068php-opencloud\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\n\n```shell\ncd php-opencloud\ncurl -sS https://getcomposer.org/installer | php\n./composer.phar require rackspace/php-opencloud\n(\u7d50\u69cb\u6642\u9593\u304b\u304b\u308b)\nls -la\ntotal 1240\ndrwxrwxr-x  3 1000 1000    4096 Dec 23 05:49 .\ndrwxr-xr-x 53 root root    4096 Dec 23 05:47 ..\n-rw-r--r--  1 root root      70 Dec 23 05:47 composer.json\n-rw-r--r--  1 root root   11253 Dec 23 05:49 composer.lock\n-rwxr-xr-x  1 root root 1238152 Dec 23 05:42 composer.phar\ndrwxr-xr-x  8 root root    4096 Dec 23 05:49 vendor\n```\n\n\u3042\u3068\u306f\u3001\u3053\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u3002\n\n## \u57fa\u672c\u7684\u306a\u3053\u3068\n\n\u672c\u5bb6\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u306fRackspace setup\u3068OpenStack setup\u30682\u3064\u306e\u65b9\u6cd5\u304c[\u8f09\u3063\u3066\u3044\u307e\u3059](http://docs.php-opencloud.com/en/latest/services/identity/index.html)\u3002\u5148\u307b\u3069\u66f8\u3044\u305f\u3068\u304a\u308a\u3001php-opencloud\u306f\u57fa\u672c\u7684\u306bRackspace\u5411\u3051\u3060\u304b\u3089\u3067\u3059\u3002\n\nConoHa\u3067\u4f7f\u3046\u5834\u5408\u306f\u5f8c\u8005\u306eOpenStack setup\u306e\u5185\u5bb9\u3067\u9032\u3081\u307e\u3059\u3002\u4f7f\u3046\u306e\u306fOpenStack\\OpenStack\u3067\u3001\u3042\u3068\u306f\u540d\u524d\u7a7a\u9593\u3092use\u3057\u3066OpenStack\u30af\u30e9\u30b9\u3092new\u3059\u308c\u3070OK\u3067\u3059\u3002\u5178\u578b\u7684\u306a\u66f8\u304d\u65b9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```php\n<?php\n\nuse OpenCloud\\OpenStack;\nuse Guzzle\\Http\\Exception\\ClientErrorResponseException;\n\nrequire_once __DIR__ . '/vendor/autoload.php';\n\n$opts = [\n    'username' => 'gncu********',\n    'password' => 'password',\n    'tenantName' => 'gnct*******',\n];\n\ntry {\n    $client = new OpenStack('https://identity.tyo1.conoha.io/v2.0', $opts);\n\t$client->authenticate();\n\n\t// \u3053\u3053\u306b\u5b9f\u88c5\u3092\u66f8\u304f\n\n} catch(ClientErrorResponseException $ex) {\n    // error\n    echo $ex->getMessage();\n}\n```\n\n$opts\u306b\u306fAPI\u306a\u8a8d\u8a3c\u60c5\u5831\u3092\u66f8\u304d\u307e\u3059\u3002\u3053\u308c\u306fConoHa\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d1\u30cd\u30eb\u306e\u300cAPI\u300d\u30e1\u30cb\u30e5\u30fc\u306b\u3042\u308a\u307e\u3059\u3002\n\n\n## \u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3046\n\n\u5148\u307b\u3069\u306e\u30b3\u30fc\u30c9\u3067$client\u306f\u3042\u304f\u307e\u3067REST API\u3092\u6271\u3046\u305f\u3081\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306a\u3060\u3051\u3067\u3001Compute, Network, Storage\u306a\u3069\u306f\u307e\u305f\u5225\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u30b5\u30fc\u30d3\u30b9\u306e\u4e00\u89a7(Catalog)\u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u5148\u307b\u3069\u306e\u30b3\u30fc\u30c9\u306e\u300c\u3053\u3053\u306b\u5b9f\u88c5\u3092\u66f8\u304f\u300d\u306b\u4e0b\u8a18\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n\n```php\n<?php\n\n$catalog = $client->getCatalog();\nforeach($catalog->getItems() as $item) {\n    foreach($item->getEndpoints() as $endpoint) {\n        echo sprintf(\"name:%s type:%s region:%s url:%s\\n\",\n                     $item->getName(),\n                     $item->getType(),\n                     $endpoint->region,\n                     $endpoint->publicURL);\n    }\n}\n```\n\n\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059(\u4f0f\u305b\u5b57\u306e\u90e8\u5206\u306fTenantID\u3067\u30e6\u30fc\u30b6\u6bce\u306b\u7570\u306a\u308a\u307e\u3059)\u3002\u3053\u306ename\u3068type\u306b\u6ce8\u76ee\u3057\u3066\u4e0b\u3055\u3044\u3002\u305d\u308c\u305e\u308c\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3046\u306b\u306f\u3053\u308c\u3089\u3092\u6307\u5b9a\u3057\u3066\u30b5\u30fc\u30d3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```shell-session\nname:Account Service type:account region:tyo1 url:https://account.tyo1.conoha.io/v1/****************************\nname:Database Hosting Service type:databasehosting region:tyo1 url:https://database-hosting.tyo1.conoha.io/v1\nname:Network Service type:network region:tyo1 url:https://networking.tyo1.conoha.io\nname:Volume Service type:volumev2 region:tyo1 url:https://block-storage.tyo1.conoha.io/v2/****************************\nname:Image Service type:image region:tyo1 url:https://image-service.tyo1.conoha.io\nname:Compute Service type:compute region:tyo1 url:https://compute.tyo1.conoha.io/v2/****************************\nname:Mail Hosting Service type:mailhosting region:tyo1 url:https://mail-hosting.tyo1.conoha.io/v1\nname:DNS Service type:dns region:tyo1 url:https://dns-service.tyo1.conoha.io\nname:Object Storage Service type:object-store region:tyo1 url:https://object-storage.tyo1.conoha.io/v1/nc_****************************\nname:Identity Service type:identity region:sjc1 url:https://identity.sjc1.conoha.io/v2.0\nname:Identity Service type:identity region:tyo1 url:https://identity.tyo1.conoha.io/v2.0\nname:Identity Service type:identity region:sin1 url:https://identity.sin1.conoha.io/v2.0\n```\n\n## Compute Service\u3092\u4f7f\u3046\n\n\u30b5\u30fc\u30d3\u30b9\u306f\u8272\u3005\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u308f\u304b\u308a\u3084\u3059\u3044\u3068\u3053\u308d\u3067Compute\u3092\u4f7f\u3063\u3066VPS\u3092\u7acb\u3066\u3066\u307f\u307e\u3057\u3087\u3046(API\u306e\u8aac\u660e\u3059\u308b\u3068\u304d\u306e\u5b9a\u756a\u3067\u3059\u304c)\u3002[Compute Service](http://docs.php-opencloud.com/en/latest/services/compute/index.html)\u306f\u3001OpenStack\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u6271\u3046\u30b5\u30fc\u30d3\u30b9\u3067\u3001ConoHa\u3067\u306fVPS\u3092\u6271\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u306a\u304a\u3001\u3053\u3053\u3067\u7d39\u4ecb\u3059\u308b\u6a5f\u80fd\u306f\u4e00\u90e8\u3067\u3001\u8a73\u7d30\u306f[\u672c\u5bb6\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://docs.php-opencloud.com/en/latest/services/compute/index.html)\u3092\u3054\u89a7\u4e0b\u3055\u3044\u3002\n\n\u30b5\u30fc\u30d3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u53d6\u5f97\u3057\u307e\u3059\u3002\u5f15\u6570\u306bname\u3068region\u3092\u6e21\u3057\u307e\u3059\u3002\u30b5\u30fc\u30d3\u30b9\u306b\u5bfe\u3057\u3066\u4f55\u304b\u5b9f\u884c\u3059\u308b\u5834\u5408\u306f\u5168\u3066\u3053\u306e$compute\u3092\u4ecb\u3057\u3066\u884c\u3044\u307e\u3059\u3002\n\n```php\n$compute = $client->computeService('Compute Service', 'tyo1');\n```\n\n### flavor\u3092\u53d6\u5f97\u3057\u3066\u307f\u308b\n\nOpenStack\u3067flavor\u3068\u3044\u3046\u306e\u306f\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u5b9a\u7fa9\u3092\u8868\u3057\u307e\u3059\u3002CPU\u30b3\u30a2\u6570\u3001\u30e1\u30e2\u30ea\u3001\u30b9\u30c8\u30ec\u30fc\u30b8\u306a\u3069\u3067\u3059\u306d\u3002ConoHa\u3067\u306fVPS\u306e\u30d7\u30e9\u30f3\u3092\u6307\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u5148\u307b\u3069\u306e\u300c\u3053\u3053\u306b\u5b9f\u88c5\u3092\u66f8\u304f\u300d\u306e\u3068\u3053\u308d\u306b\u633f\u5165\u3057\u307e\u3059\u3002\u3053\u308c\u3060\u3051\u3067\u3059\u3001SDK\u306e\u4fbf\u5229\u306a\u3068\u3053\u308d\u3067\u3059\u306d\u3002\n\n```php\n<?php\n$compute = $client->computeService('Compute Service', 'tyo1');\nforeach($compute->flavorList() as $img) {\n    echo sprintf(\"id:%s name:%s\\n\", $img->id, $img->name);\n}\n```\n\n\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u3067\u3059\u3002\n\n```\nid:294639c7-72ba-43a5-8ff2-513c8995b869 name:g-2gb\nid:3aa001cd-95b6-46c9-a91e-e62d6f7f06a3 name:g-16gb\nid:62e8fb4b-6a26-46cd-be13-e5bbf5614d15 name:g-4gb\nid:7eea7469-0d85-4f82-8050-6ae742394681 name:g-1gb\nid:965affd4-d9e8-4ffb-b9a9-624d63e2d83f name:g-8gb\nid:a20905c6-3733-46c4-81cc-458c7dca1bae name:g-32gb\nid:c2a97b05-1b4b-4038-bbcb-343201659279 name:g-64gb\n```\n\n### \u30a4\u30e1\u30fc\u30b8\u4e00\u89a7\u3092\u53d6\u5f97\u3057\u3066\u307f\u308b\n\n\u300c\u30a4\u30e1\u30fc\u30b8\u300d\u306fOpenStack\u3067\u306f\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u30c7\u30a3\u30b9\u30af\u30a4\u30e1\u30fc\u30b8\u306e\u3053\u3068\u3067\u3001ConoHa\u3067\u306fOS\u306e\u30a4\u30e1\u30fc\u30b8\u3084\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u30a4\u30e1\u30fc\u30b8\u306a\u3069\u8272\u3005\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u57fa\u672c\u7684\u306bflavor\u3068\u30e1\u30bd\u30c3\u30c9\u304c\u9055\u3046\u3060\u3051\u3067\u540c\u3058\u3088\u3046\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30b3\u30fc\u30c9\u7684\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002flavor\u3068\u30e1\u30bd\u30c3\u30c9\u304c\u9055\u3046\u3060\u3051\u3067\u3059\u3002\n\n```php\n<?php\nforeach($compute->imageList() as $img) {\n    echo sprintf(\"id:%s name:%s\\n\", $img->id, $img->name);\n}\n```\n\n\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u3067\u3059\n\n```shell\nid:8f19ff24-3ff9-4beb-9603-d67dead1fc00 name:vmi-wp-kusanagi-centos-7\nid:edf80c2c-fdf7-45ee-b625-9e18d40cedc6 name:vmi-zabbix-2.4-centos-7\nid:e090aed7-5949-45ec-93f0-e735d8d0d29e name:s-abe-master\nid:6b3a81fa-9ca1-4fb3-b000-e1495620a119 name:vmi-piwik-2.15-centos-6.7\nid:7cab9247-1253-4bfd-8e4d-026fcd9168e3 name:vmi-drupal-8.0-centos-7\nid:9f89b30b-09a4-4606-b27a-c33794559d51 name:ubuntu14-clean\nid:238801ae-7256-453c-9133-5202aa39a621 name:vmi-opensuse-42.1-amd64\n(\u4ee5\u4e0b\u7565)\n```\n\n## \u4eee\u60f3\u30de\u30b7\u30f3(VM)\u3092\u4f5c\u6210\u3059\u308b\n\n\u3067\u306f\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\u3053\u3053\u306f\u3061\u3087\u3063\u3068\u4e00\u624b\u9593\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\n[VM\u4f5c\u6210API](https://www.conoha.jp/docs/compute-create_vm.html)\u306b\u306fsecurity_groups\u3068adminPass\u3068\u3044\u3046\u8a00\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308b\u306e\u3067\u3059\u304c\u3001php-opencloud\u306f\u3053\u308c\u3089\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u306a\u306e\u3067\u3001\u3053\u3053\u306fphp-opencloud\u306eOpenStack\\Compute\\Resource\\Server\u3092\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3001API\u3078\u306e\u30ea\u30af\u30a8\u30b9\u30c8JSON\u306b2\u3064\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u8ffd\u52a0\u3057\u3066\u3001createJSON()\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u3066JSON\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002adminPass\u306f\u5143\u306e\u30af\u30e9\u30b9\u306b\u30d7\u30ed\u30d1\u30c6\u30a3\u5b9a\u7fa9\u306f\u3042\u308b\u306e\u3067\u3059\u304c\u3001createJson()\u5185\u3067\u306f\u4f7f\u7528\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u3053\u308c\u306f\u30d0\u30b0\u3063\u307d\u3044\u3067\u3059\u306d\u3002\n\n```php\nclass ConoHa extends Server {\n    protected $security_groups = [];\n\n    protected function createJson() {\n        $server = parent::createJson();\n\n        // adminPass\n        if($this->getProperty('adminPass') != null) {\n            $server->server->adminPass = $this->getProperty('adminPass');\n        }\n\n        // security_groups\n        $security_groups = $this->getProperty('security_groups');\n        if (count($security_groups) > 0) {\n            $server->server->security_groups = $security_groups;\n        }\n        return $server;\n    }\n}\n```\n\n\u5b9f\u969b\u306bVM\u3092\u4f5c\u6210\u3059\u308b\u90e8\u5206\u306e\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u3067\u3059\u3002ConoHa\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u3063\u3066create()\u3092\u547c\u3073\u307e\u3059\u3002\u5f15\u6570\u306fVM\u4f5c\u6210\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001\u4e00\u89a7\u306f[\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://docs.php-opencloud.com/en/latest/services/compute/servers.html)\u306b\u3042\u308a\u307e\u3059\u3002\u4ed6\u306b\u3088\u304f\u4f7f\u3044\u305d\u3046\u306a\u3082\u306e\u3067keypair\u3068\u8a00\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308a\u3001VM\u306b\u8a2d\u5b9a\u3059\u308bSSH\u516c\u958b\u9375\u3092\u6307\u5b9a\u3059\u308b\u3068\u304d\u306b\u4f7f\u3044\u307e\u3059\u3002\n\n\u30b3\u30fc\u30c9\u5168\u6587\u306f\u9577\u304f\u306a\u308b\u306e\u3067[Gist](https://gist.github.com/hironobu-s/eb9413ff01739acf4264)\u306b\u7f6e\u3044\u3066\u3042\u308a\u307e\u3059\u3002\n\n```php\n\n$compute = $client->computeService('Compute Service', 'tyo1');\ntry {\n    // ConoHa\u30af\u30e9\u30b9\u3092\u4f7f\u308f\u306a\u3044\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\n    // $server = $compute->server()\n\n    $server = new ConoHa($compute);\n\n    $create_opts = [\n        'name' => 'test-vps',\n        'imageId' => 'edc9457e-e4a8-4974-8217-c254d215b460',\n        'flavorId' => '7eea7469-0d85-4f82-8050-6ae742394681',\n        'adminPass' => '***********',\n        \"security_groups\" => [\n            [\n                \"name\" => \"default\",\n            ],\n            [\n                \"name\" => \"gncs-ipv4-all\",\n            ],\n            [\n                \"name\" => \"gncs-ipv6-all\",\n            ]\n        ],\n    ];\n    $resp = $server->create($create_opts);\n\n} catch(BadResponseException $ex) {\n    echo $ex->getResponse();\n}\n\n```\n\n# \u30c8\u30fc\u30af\u30f3\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\n\nOpenStack API\u306f\u8a8d\u8a3c\u5b9f\u884c\u5f8c\u306b\u30c8\u30fc\u30af\u30f3\u304c\u767a\u884c\u3055\u308c\u3001\u30b5\u30fc\u30d3\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u969b\u306b\u305d\u308c\u304c\u4f7f\u308f\u308c\u308b\u3053\u3068\u306f\u65e2\u306b\u66f8\u304d\u307e\u3057\u305f\u3002\u3053\u306e\u30c8\u30fc\u30af\u30f3\u3092\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u306b\u66f8\u304d\u51fa\u3057\u3066\u304a\u3044\u3066\u30012\u56de\u76ee\u4ee5\u964d\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u305f\u969b\u306b\u4f7f\u3044\u56de\u3059\u3053\u3068\u3067\u8a8d\u8a3c\u3092\u30b9\u30ad\u30c3\u30d7\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nOpenStack\u30aa\u30d6\u30b8\u30a7\u30af\u30c8$client\u306b\u306fexportCredentials()\u3068importCredentials()\u3068\u3044\u30462\u3064\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308a\u307e\u3059\u3002exportCredentials()\u306f\u30c8\u30fc\u30af\u30f3\u3092\u542b\u3080\u8a8d\u8a3c\u60c5\u5831\u3092\u66f8\u304d\u51fa\u3057\u3001importCredentials()\u306f\u305d\u306e\u8a8d\u8a3c\u60c5\u5831\u3092\u8aad\u307f\u8fbc\u3080\u3068\u304d\u306b\u4f7f\u3044\u307e\u3059\u3002importCredentials()\u3067\u8aad\u307f\u8fbc\u3093\u3060\u8a8d\u8a3c\u60c5\u5831\u304c\u7121\u52b9(\u30c8\u30fc\u30af\u30f3\u306e\u6709\u52b9\u671f\u9650\u5207\u308c\u306a\u3069)\u3060\u3063\u305f\u5834\u5408\u3067\u3082\u3001SDK\u304c\u81ea\u52d5\u7684\u306b\u518d\u8a8d\u8a3c\u3092\u884c\u3063\u3066\u304f\u308c\u307e\u3059\u3002\u4fbf\u5229\u3002\n\n\u3055\u3066\u3001\u5b9f\u969b\u306b\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u8a8d\u8a3c\u60c5\u5831\u306fPHP\u306estdClass\u306a\u306e\u3067\u3001\u3053\u308c\u3092serialize()\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u51fa\u3057\u307e\u3059\u3002\n\n```php\n$opts = [\n    'username' => 'gncu********',\n    'password' => 'password',\n    'tenantName' => 'gnct*******',\n];\n\n$client = new OpenStack('https://identity.tyo1.conoha.io/v2.0', $opts);\n\n$cachefile = 'credentials.dat';\nif (file_exists($cachefile)) {\n    $str_credential = file_get_contents($cachefile);\n    $credentials = unserialize($str_credential);\n    if($credentials) {\n        $client->importCredentials($credentials);\n    }\n}\n\n$token = $client->getTokenObject();\nif(!$token || $token->hasExpired()) {\n    $client->authenticate();\n    file_put_contents($cachefile, serialize($client->exportCredentials()));\n}\n\n```\n\n# \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u4f7f\u3046\n\n\u305d\u3046\u3044\u3048\u3070\u6614\u3053\u306e\u3079\u3093\u306b\u66f8\u3044\u305f\u306e\u3067\u3001\u3088\u304b\u3063\u305f\u3089\u3053\u3061\u3089\u3082\u3054\u89a7\u4e0b\u3055\u3044\u3002\u8a8d\u8a3c\u90e8\u5206\u306f\u65e7ConoHa\u5411\u3051\u306e\u8aac\u660e\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u305d\u308c\u4ee5\u5916\u306f\u305d\u306e\u307e\u307e\u4f7f\u3048\u307e\u3059\u3002\n\n[ConoHa\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u4f7f\u3063\u3066\u307f\u3088\u3046(SDK+\u5fdc\u7528\u7de8)](https://www.conoha.jp/conoben/archives/3487)\n\n# \u304a\u308f\u308a\u306b\n\nREST API\u3092\u305d\u306e\u307e\u307e\u53e9\u3044\u3066\u3082\u826f\u3044\u306e\u3067\u3059\u304c\u3001SDK\u3092\u4f7f\u3046\u3068\u3060\u3044\u3076\u697d\u3067\u304d\u308b\u306e\u3067\u3069\u3093\u3069\u3093\u4f7f\u3046\u3068\u826f\u3044\u3068\u601d\u3044\u307e\u3059(VM\u4f5c\u6210\u306f\u3061\u3087\u3063\u3068\u5927\u5909\u3067\u3057\u305f\u304c\u3001\u3001\u3001)\u3002\u305f\u3060\u3001php-opencloud\u3068ConoHa API\u4e21\u65b9\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u7768\u3081\u3063\u3053\u3057\u306a\u304c\u3089\u4f5c\u696d\u3059\u308b\u3088\u3046\u306a\u611f\u3058\u306b\u306a\u308b\u306e\u3067\u3001\u307e\u3041\u3053\u308c\u306f\u9811\u5f35\u308b\u3057\u304b\u306a\u3044\u304b\u306a\u3068\u3002\n\nPHP\u306f\u5229\u7528\u8005\u3082\u591a\u3044\u3067\u3059\u3057\u3001\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u304a\u5f79\u306b\u7acb\u3063\u305f\u3089\u4f55\u3088\u308a\u3067\u3059( \u00b4 \u03c9 ` )\n"}