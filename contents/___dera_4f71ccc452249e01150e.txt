{"context": "Heroku\u306b\u30dc\u30c3\u30c8\u3092\u3044\u3063\u3071\u3044\u4f5c\u308a\u305f\u3044\u306e\u3067\u3001\u81ea\u52d5\u5316\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u3064\u304f\u3063\u3066\u307f\u307e\u3057\u305f\n\nSlack\u7528\u306eHubot\u4f5c\u6210\nHeroku\u306b\u30c7\u30d7\u30ed\u30a4\n\n\n\u5fc5\u8981\u306a\u3082\u306e\n\nHeroku\u30a2\u30ab\u30a6\u30f3\u30c8\nSlack\u306eHUBOT_SLACK_TOKEN\n\n\n\u30b9\u30af\u30ea\u30d7\u30c8\n\nmake_hubot.sh\nfunction install(){\n    if ! which $1 > /dev/null 2>&1 ; then  brew install -g $1 ; fi\n    if ! which $1 > /dev/null 2>&1 ; then  npm  install -g $1 ; fi\n}\n\nfunction yo_hubot(){\n    expect -c \"\nset timeout -1\nspawn yo hubot\nexpect \\\"Owner\\\";        send \\\"${HUBOT_NAME}\\n\\\"\nexpect \\\"Bot name\\\";     send \\\"${HUBOT_NAME}\\n\\\"\nexpect \\\"Description\\\";  send \\\"${HUBOT_NAME}\\n\\\"\nexpect \\\"Bot adapter\\\";  send \\\"slack\\n\\\"\nexpect \\\"Everything looks all right!\\\";    exit 0\n\"\n}\n\nHUBOT_NAME=my_hubot\nHUBOT_SLACK_TEAM=my_team\nexport HUBOT_SLACK_TOKEN=xoxb-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\ndeclare -a apps=(\"node\" \"npm\" \"hubot\" \"yo\" \"generator-hubot\" \"coffee-script\" \"redis\" \"expect\")\nfor app in ${apps[@]}; do\n    echo $app\n    install $app\ndone\n\nbot_dir=`pwd`/hubot-${HUBOT_NAME}\nscript_path=`pwd`/${HUBOT_NAME}.coffee\nrm -rf $bot_dir\nmkdir  $bot_dir\ncd     $bot_dir\n\nyo_hubot\nrm hubot-scripts.json\n# \u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b`${HUBOT_NAME}.coffee`\u304c\u3042\u308c\u3070\u8a2d\u7f6e\ncp $script_path $bot_dir/scripts/${HUBOT_NAME}.coffee\n\nredis-cli shutdown\nredis-server &\nln -sfv /usr/local/opt/redis/*.plist ~/Library/LaunchAgents\nlaunchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.redis.plist\n\n./bin/hubot --adapter slack\n\ngit init\ngit add .\ngit commit -m \"init ${HUBOT_NAME}\"\n\nheroku login\nheroku create $HUBOT_NAME\nheroku config:set \\\nHUBOT_SLACK_TOKEN=$HUBOT_SLACK_TOKEN \\\nHUBOT_SLACK_TEAM=$HUBOT_SLACK_TEAM \\\nHUBOT_SLACK_BOTNAME=$HUBOT_NAME \\\nHUBOT_HEROKU_KEEPALIVE_URL=$(heroku apps:info -s  | grep web_url | cut -d= -f2)\ngit push heroku master\nheroku logs -t\n\n\n\n\u5b9f\u884c\nvi make_hubot.sh # \u30dc\u30c3\u30c8\u540d\u3084\u30c8\u30fc\u30af\u30f3\u3092\u7de8\u96c6\u3057\u307e\u3059\nsh make_hubot.sh\n\nHeroku\u306b\u30dc\u30c3\u30c8\u3092\u3044\u3063\u3071\u3044\u4f5c\u308a\u305f\u3044\u306e\u3067\u3001\u81ea\u52d5\u5316\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u3064\u304f\u3063\u3066\u307f\u307e\u3057\u305f\n\n 1. Slack\u7528\u306eHubot\u4f5c\u6210\n 2. Heroku\u306b\u30c7\u30d7\u30ed\u30a4\n\n# \u5fc5\u8981\u306a\u3082\u306e\n - Heroku\u30a2\u30ab\u30a6\u30f3\u30c8\n - Slack\u306eHUBOT_SLACK_TOKEN\n\n# \u30b9\u30af\u30ea\u30d7\u30c8\n\n```bash:make_hubot.sh\nfunction install(){\n    if ! which $1 > /dev/null 2>&1 ; then  brew install -g $1 ; fi\n    if ! which $1 > /dev/null 2>&1 ; then  npm  install -g $1 ; fi\n}\n\nfunction yo_hubot(){\n    expect -c \"\nset timeout -1\nspawn yo hubot\nexpect \\\"Owner\\\";        send \\\"${HUBOT_NAME}\\n\\\"\nexpect \\\"Bot name\\\";     send \\\"${HUBOT_NAME}\\n\\\"\nexpect \\\"Description\\\";  send \\\"${HUBOT_NAME}\\n\\\"\nexpect \\\"Bot adapter\\\";  send \\\"slack\\n\\\"\nexpect \\\"Everything looks all right!\\\";    exit 0\n\"\n}\n\nHUBOT_NAME=my_hubot\nHUBOT_SLACK_TEAM=my_team\nexport HUBOT_SLACK_TOKEN=xoxb-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n\ndeclare -a apps=(\"node\" \"npm\" \"hubot\" \"yo\" \"generator-hubot\" \"coffee-script\" \"redis\" \"expect\")\nfor app in ${apps[@]}; do\n    echo $app\n    install $app\ndone\n\nbot_dir=`pwd`/hubot-${HUBOT_NAME}\nscript_path=`pwd`/${HUBOT_NAME}.coffee\nrm -rf $bot_dir\nmkdir  $bot_dir\ncd     $bot_dir\n\nyo_hubot\nrm hubot-scripts.json\n# \u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b`${HUBOT_NAME}.coffee`\u304c\u3042\u308c\u3070\u8a2d\u7f6e\ncp $script_path $bot_dir/scripts/${HUBOT_NAME}.coffee\n\nredis-cli shutdown\nredis-server &\nln -sfv /usr/local/opt/redis/*.plist ~/Library/LaunchAgents\nlaunchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.redis.plist\n\n./bin/hubot --adapter slack\n\ngit init\ngit add .\ngit commit -m \"init ${HUBOT_NAME}\"\n\nheroku login\nheroku create $HUBOT_NAME\nheroku config:set \\\nHUBOT_SLACK_TOKEN=$HUBOT_SLACK_TOKEN \\\nHUBOT_SLACK_TEAM=$HUBOT_SLACK_TEAM \\\nHUBOT_SLACK_BOTNAME=$HUBOT_NAME \\\nHUBOT_HEROKU_KEEPALIVE_URL=$(heroku apps:info -s  | grep web_url | cut -d= -f2)\ngit push heroku master\nheroku logs -t\n```\n\n# \u5b9f\u884c\n\n```shell-session\nvi make_hubot.sh # \u30dc\u30c3\u30c8\u540d\u3084\u30c8\u30fc\u30af\u30f3\u3092\u7de8\u96c6\u3057\u307e\u3059\nsh make_hubot.sh\n```\n", "tags": ["Hubot"]}