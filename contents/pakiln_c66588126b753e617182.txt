{"context": " More than 1 year has passed since last update.http://localhost/webapp1\u3068http://localhost/webapp2\u306a\u3069\u306e\u30a2\u30af\u30bb\u30b9\u3067\u3001\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306ePhalcon\u3092\u52d5\u304b\u3059\u8a2d\u5b9a\u4f8b\u3067\u3059\u3002\n/vagrant/webapp1\u3068/vagrant/webapp2_server\u306bphalcon\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u3042\u308b\u3053\u3068\u3092\u524d\u63d0\u3002\n/vagrant/webapp1\n          \u251c\u2500\u2500 app\n          \u2514\u2500\u2500 public\n              \u2514\u2500\u2500 index.php\n\n/vagrant/webapp2_server\n          \u251c\u2500\u2500 app\n          \u2514\u2500\u2500 public\n              \u2514\u2500\u2500 index.php\n\nhttp://localhost/webapp1\u306a\u3089/vagrant/webapp1/public/index.php\u3092\u3001\nhttp://localhost/webapp2\u306a\u3089/vagrant/webapp2_server/public/index.php\u3092\u5b9f\u884c\u3055\u305b\u307e\u3059\u3002\n\nphalcon_subdirectory.conf\n    # URL1\u3064\u76ee\u306e\u30bb\u30b0\u30e1\u30f3\u30c8\u3068\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d\u304c\u4e00\u81f4\u3057\u3066\u3044\u308b\u5834\u5408(\u6c4e\u7528)\n    if ($request_uri ~ /(?<phalcon_subdirectory>\\w+)) {\n        set $root_path /vagrant/$phalcon_subdirectory/public;\n    }\n    # URL1\u3064\u76ee\u306e\u30bb\u30b0\u30e1\u30f3\u30c8\u3068\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d\u304c\u4e00\u81f4\u3057\u3066\u3044\u306a\u3044\u5834\u5408(/webapp2\u3092webapp2_server\u306b\u5bfe\u5fdc)\n    if ($request_uri ~ /webapp2) {\n        set $root_path /vagrant/webapp2_server/public;\n    }\n\n    location ~ ^/(?<phalcon_subdirectory>\\w+)/(.+\\.php)$ {\n        include        fastcgi_params;\n        fastcgi_pass   127.0.0.1:9000;\n        fastcgi_index  index.php;\n\n        # http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_split_path_info\n        # 1\u3064\u76ee\u306f$fastcgi_script_name\u30012\u3064\u76ee\u306f$fastcgi_path_info\u306b\u30bb\u30c3\u30c8\u3055\u308c\u308b\n        fastcgi_split_path_info ^/\\w+(/.+\\.php)(.*)$;\n\n        fastcgi_param  SCRIPT_FILENAME  $root_path$fastcgi_script_name;\n\n        # \u30a2\u30d7\u30ea\u4efb\u610f\u306eSERVER\u5909\u6570\n        fastcgi_param  PHALCON_SUBDIRECTORY $phalcon_subdirectory;\n        fastcgi_param  APP_ENV local;\n    }\n\n\n    location ~ ^/\\w+(.+)? {\n\n        location ~ ^/\\w+/\\.ht {\n            deny  all;\n        }\n\n        alias $root_path$1;\n\n        if (!-f $request_filename) {\n            rewrite ^/(\\w+)/?(.+)?$ /$1/index.php?_url=/$2 last;\n        }\n    }\n\n\n\n`http://localhost/webapp1`\u3068`http://localhost/webapp2`\u306a\u3069\u306e\u30a2\u30af\u30bb\u30b9\u3067\u3001\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306ePhalcon\u3092\u52d5\u304b\u3059\u8a2d\u5b9a\u4f8b\u3067\u3059\u3002\n\n/vagrant/webapp1\u3068/vagrant/webapp2_server\u306bphalcon\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u3042\u308b\u3053\u3068\u3092\u524d\u63d0\u3002\n\n```\n/vagrant/webapp1\n          \u251c\u2500\u2500 app\n          \u2514\u2500\u2500 public\n              \u2514\u2500\u2500 index.php\n\n/vagrant/webapp2_server\n          \u251c\u2500\u2500 app\n          \u2514\u2500\u2500 public\n              \u2514\u2500\u2500 index.php\n```\n\n`http://localhost/webapp1`\u306a\u3089/vagrant/webapp1/public/index.php\u3092\u3001\n`http://localhost/webapp2`\u306a\u3089/vagrant/webapp2_server/public/index.php\u3092\u5b9f\u884c\u3055\u305b\u307e\u3059\u3002\n\n\n```phalcon_subdirectory.conf\n    # URL1\u3064\u76ee\u306e\u30bb\u30b0\u30e1\u30f3\u30c8\u3068\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d\u304c\u4e00\u81f4\u3057\u3066\u3044\u308b\u5834\u5408(\u6c4e\u7528)\n    if ($request_uri ~ /(?<phalcon_subdirectory>\\w+)) {\n        set $root_path /vagrant/$phalcon_subdirectory/public;\n    }\n    # URL1\u3064\u76ee\u306e\u30bb\u30b0\u30e1\u30f3\u30c8\u3068\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d\u304c\u4e00\u81f4\u3057\u3066\u3044\u306a\u3044\u5834\u5408(/webapp2\u3092webapp2_server\u306b\u5bfe\u5fdc)\n    if ($request_uri ~ /webapp2) {\n        set $root_path /vagrant/webapp2_server/public;\n    }\n\n    location ~ ^/(?<phalcon_subdirectory>\\w+)/(.+\\.php)$ {\n        include        fastcgi_params;\n        fastcgi_pass   127.0.0.1:9000;\n        fastcgi_index  index.php;\n\n        # http://nginx.org/en/docs/http/ngx_http_fastcgi_module.html#fastcgi_split_path_info\n        # 1\u3064\u76ee\u306f$fastcgi_script_name\u30012\u3064\u76ee\u306f$fastcgi_path_info\u306b\u30bb\u30c3\u30c8\u3055\u308c\u308b\n        fastcgi_split_path_info ^/\\w+(/.+\\.php)(.*)$;\n\n        fastcgi_param  SCRIPT_FILENAME  $root_path$fastcgi_script_name;\n\n        # \u30a2\u30d7\u30ea\u4efb\u610f\u306eSERVER\u5909\u6570\n        fastcgi_param  PHALCON_SUBDIRECTORY $phalcon_subdirectory;\n        fastcgi_param  APP_ENV local;\n    }\n\n\n    location ~ ^/\\w+(.+)? {\n\n        location ~ ^/\\w+/\\.ht {\n            deny  all;\n        }\n\n        alias $root_path$1;\n\n        if (!-f $request_filename) {\n            rewrite ^/(\\w+)/?(.+)?$ /$1/index.php?_url=/$2 last;\n        }\n    }\n```\n", "tags": ["PHP", "Phalcon", "nginx"]}