{"context": "\n\nTL;DR\n\nauto-retirment\u306e\u8a2d\u5b9a\u304c\u6709\u52b9\u306b\u306a\u308bbase platform \u306f 64bit Amazon Linux 2015.09 v2.0.8 running Multi-container Docker 1.9.1 (Generic)\n\ninstance terminate\u6642\u306b mackerel-agent\u306edocker process\u306b\u5bfe\u3057\u3066\u7d42\u4e86\u30b7\u30b0\u30ca\u30eb\u304c\u6295\u3052\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\n\n\u3053\u3053\u3067\u3042\u3052\u305f\u554f\u984c\u70b9\u304c\u89e3\u6c7a\u3055\u308c\u305f\nmackerel-agent\u306eversion\u306f 0.30.0\n\ndocker image\u306etag 0.30.0-2\n\n\n\n\nDockerrun.aws.json\n\nDockerrun.aws.json\n{\n  \"AWSEBDockerrunVersion\": 2,\n  \"containerDefinitions\": [\n~~snip~~\n    {\n      \"name\": \"mackerel-agent\",\n      \"image\": \"mackerel/mackerel-agent\",\n      \"memory\": 512,\n      \"links\": [\n        \"app-server\",\n        \"nginx-proxy\"\n      ],\n      \"essential\": true,\n      \"environment\": [\n        {\"name\": \"apikey\",  \"value\": \"API_KEY\"},\n        {\"name\": \"include\", \"value\": \"/etc/mackerel-agent/conf.d/*\"},\n        {\"name\": \"auto_retirement\",  \"value\": \"true\"},\n        {\"name\": \"enable_docker_plugin\",  \"value\": \"true\"}\n      ],\n~snip~\n    }\n  ],\n~snip~\n\n}\n\n\n\ndocker-plugin \u306f environment\u3067\u8a2d\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u8ffd\u52a0\n\n\n\n\nversion\nauto-retirment\nrun\n\n\n\n\n64bit Amazon Linux 2016.03 v2.1.0 running Multi-container Docker 1.9.1 (Generic)\n?\nx\n\n\n64bit Amazon Linux 2015.09 v2.0.8 running Multi-container Docker 1.9.1 (Generic)\no\no\n\n\n64bit Amazon Linux 2015.03 v1.4.6 running Multi-container Docker 1.6.2 (Generic)\nx\no\n\n\n64bit Amazon Linux 2015.03 v1.4.1 running Multi-container Docker 1.6.0 (Generic)\nx\no\n\n\n64bit Amazon Linux 2015.03 v1.4.0 running Multi-container Docker 1.6.0 (Generic)\nx\no\n\n\n\n\n\u6ce8\u610f\n\n\u6700\u65b0\u306ebase platform\u3067\u3042\u308b 64bit Amazon Linux 2016.03 v2.1.0 running Multi-container Docker 1.9.1 (Generic) \u306f mackerel-agent\u304c\u8d77\u52d5\u3067\u304d\u306a\u3044\n\n\n\n/startup.sh: line 23: 8 Trace/breakpoint trap /usr/local/bin/mackerel-agent $opts \u3068\u3044\u3046\u30ed\u30b0\u3092\u5410\u3044\u3066\u6b7b\u3093\u3067\u3044\u308b\n\n\n\n\n\u8ffd\u8a18 (2016/06/28)\n\n\n64bit Amazon Linux 2016.03 v2.1.3 running Multi-container Docker 1.11.1 (Generic) \u3068 mackerel-agent:0.31.2 \u306e\u7d44\u307f\u5408\u308f\u305b\u306f\u8d77\u52d5\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f (\u4ee5\u4e0b\u306e\u5bfe\u5fdc\u306b\u3088\u308b\u3082\u306e)\n\n\nserver\u5074\u306edocker \u304c1.11.1\u306b\u306a\u3063\u305f\u3053\u3068\nmackerel-agent\u304cAmazonLinux2016.03\u5bfe\u5fdc\u6e08\u307f\u306e\u3082\u306e\u306b\u306a\u3063\u305f\u3053\u3068\n\n\n\n\n\n\nversion\nauto-retirment\nrun\nmackerel-agent\n\n\n\n\n64bit Amazon Linux 2016.03 v2.1.3 running Multi-container Docker 1.11.1 (Generic)\no\no\n0.31.2 (centos:7, docker1.11.2)\n\n\n\n# TL;DR\n- auto-retirment\u306e\u8a2d\u5b9a\u304c\u6709\u52b9\u306b\u306a\u308bbase platform \u306f ``` 64bit Amazon Linux 2015.09 v2.0.8 running Multi-container Docker 1.9.1 (Generic) ```\n- instance terminate\u6642\u306b mackerel-agent\u306edocker process\u306b\u5bfe\u3057\u3066\u7d42\u4e86\u30b7\u30b0\u30ca\u30eb\u304c\u6295\u3052\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\n- [\u3053\u3053\u3067](http://qiita.com/tknzk/items/0f1bea740e077801ce0b#auto-retirement)\u3042\u3052\u305f\u554f\u984c\u70b9\u304c\u89e3\u6c7a\u3055\u308c\u305f\n- mackerel-agent\u306eversion\u306f ``` 0.30.0 ```\n- docker image\u306etag ``` 0.30.0-2 ```\n\n<img width=\"823\" alt=\"eb_base_platform.jpg\" src=\"https://qiita-image-store.s3.amazonaws.com/0/3447/22cbc43c-1ad2-3cef-e286-3e9fb1bc64ca.jpeg\">\n\n\n# Dockerrun.aws.json\n\n```Dockerrun.aws.json\n{\n  \"AWSEBDockerrunVersion\": 2,\n  \"containerDefinitions\": [\n~~snip~~\n    {\n      \"name\": \"mackerel-agent\",\n      \"image\": \"mackerel/mackerel-agent\",\n      \"memory\": 512,\n      \"links\": [\n        \"app-server\",\n        \"nginx-proxy\"\n      ],\n      \"essential\": true,\n      \"environment\": [\n        {\"name\": \"apikey\",  \"value\": \"API_KEY\"},\n        {\"name\": \"include\", \"value\": \"/etc/mackerel-agent/conf.d/*\"},\n        {\"name\": \"auto_retirement\",  \"value\": \"true\"},\n        {\"name\": \"enable_docker_plugin\",  \"value\": \"true\"}\n      ],\n~snip~\n    }\n  ],\n~snip~\n\n}\n```\n\n- docker-plugin \u306f environment\u3067\u8a2d\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u8ffd\u52a0\n\n| version | auto-retirment | run |\n|:--------|:---------------|:----|\n| 64bit Amazon Linux 2016.03 v2.1.0 running Multi-container Docker 1.9.1 (Generic)  | ? | x |\n| 64bit Amazon Linux 2015.09 v2.0.8 running Multi-container Docker 1.9.1 (Generic)  | o | o |\n| 64bit Amazon Linux 2015.03 v1.4.6 running Multi-container Docker 1.6.2 (Generic)  | x | o |\n| 64bit Amazon Linux 2015.03 v1.4.1 running Multi-container Docker 1.6.0 (Generic)  | x | o |\n| 64bit Amazon Linux 2015.03 v1.4.0 running Multi-container Docker 1.6.0 (Generic)  | x | o |\n\n\n# \u6ce8\u610f\n- \u6700\u65b0\u306ebase platform\u3067\u3042\u308b ``` 64bit Amazon Linux 2016.03 v2.1.0 running Multi-container Docker 1.9.1 (Generic) ``` \u306f mackerel-agent\u304c\u8d77\u52d5\u3067\u304d\u306a\u3044\n   - ``` /startup.sh: line 23: 8 Trace/breakpoint trap /usr/local/bin/mackerel-agent $opts ``` \u3068\u3044\u3046\u30ed\u30b0\u3092\u5410\u3044\u3066\u6b7b\u3093\u3067\u3044\u308b\n\n# \u8ffd\u8a18 (2016/06/28)\n- ``` 64bit Amazon Linux 2016.03 v2.1.3 running Multi-container Docker 1.11.1 (Generic) ``` \u3068 ``` mackerel-agent:0.31.2 ``` \u306e\u7d44\u307f\u5408\u308f\u305b\u306f\u8d77\u52d5\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f (\u4ee5\u4e0b\u306e\u5bfe\u5fdc\u306b\u3088\u308b\u3082\u306e)\n    - server\u5074\u306edocker \u304c1.11.1\u306b\u306a\u3063\u305f\u3053\u3068\n    - mackerel-agent\u304cAmazonLinux2016.03\u5bfe\u5fdc\u6e08\u307f\u306e\u3082\u306e\u306b\u306a\u3063\u305f\u3053\u3068\n\n| version | auto-retirment | run | mackerel-agent | \n|:--------|:---------------|:----|:---------------|\n| 64bit Amazon Linux 2016.03 v2.1.3 running Multi-container Docker 1.11.1 (Generic)  | o | o | 0.31.2 (centos:7, docker1.11.2) |\n", "tags": ["ElasticBeanstalk", "docker", "Mackerel"]}