{"context": " More than 1 year has passed since last update.\n\n\u3084\u308a\u305f\u304b\u3063\u305f\u3053\u3068\n\u3042\u308brails project\u306edir\u4ee5\u4e0b\u306b\u3066\u3001\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\n\ncrontab\n0 * * * * cd $HOME/u/app/; rails runner -e production \"Hoge.run()\"\n\n\ncron\u3067\u5b9f\u884c\u3059\u308b\u3068\u3001\u74b0\u5883\u5909\u6570\u306a\u3069\u304c\u8aad\u307f\u8fbc\u307e\u308c\u3066\u3044\u306a\u3044\u305f\u3081\u3001PATH\u304c\u901a\u3063\u3066\u306a\u304b\u3063\u305f\u308a\u3001\u3068\u76db\u5927\u306b\u6012\u3089\u308c\u308b\u3002\n\nbash -lc\n\u53c2\u8003\uff1acron \u5b9f\u884c\u6642\u306b\u30ed\u30b0\u30a4\u30f3\u30b7\u30a7\u30eb(bash)\u3068\u540c\u3058\u74b0\u5883\u5909\u6570\u3067\u52d5\u304b\u3057\u305f\u3044 - yukku++\n\u30ed\u30b0\u30a4\u30f3\u30b7\u30a7\u30eb\u3068\u540c\u69d8\u306e\u74b0\u5883\u5909\u6570\u306b\u3059\u308b\u305f\u3081\u306b\u3001\u30b7\u30a7\u30eb\u306b\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6e21\u3057\u3066\u304b\u3089\u5b9f\u884c\u3059\u308b\u3002\nbash\u306e\u5834\u5408\u306f-l\u3068\u306a\u308b\n\nrbenv\u3092load\u3059\u308b\nrbenv\u95a2\u9023\u306e\u8a2d\u5b9a\u3092\u8aad\u307f\u8fbc\u3080\u3002\n\uff08\u81ea\u5206\u306e\u5834\u5408\u3001\u5c11\u3057\u524d\u306b\u3001bundle install --binstubs\u3092rails4\u74b0\u5883\u5316\u3067\u3084\u3063\u3066\u3057\u307e\u3044\u3001\u89e3\u6c7a\u306b\u304f\u308d\u3046\u3057\u305f\u306e\u3067\u3001\u305d\u306e\u3068\u304d\u306e\u4f55\u304b\u3082\u5f71\u97ff\u3057\u3066\u3044\u305f\u306e\u304b\u3082\u3002\u3002\uff1f\nruby script using rbenv in cron - Stack Overflow\nRails4\u304b\u3089--binstubs\u304c\u4f7f\u3048\u306a\u304f\u306a\u308b\u4ef6 - Qiita\nrails\u306e\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u304c\u4f7f\u3048\u306a\u304f\u306a\u308b\u554f\u984c\u306e\u539f\u56e0\u306fbinstubs - PILOG\nrbenv\u95a2\u4fc2\u8aad\u307f\u8fbc\u307f\u306e\u53c2\u8003: ruby script using rbenv in cron - Stack Overflow\n\n\nbash.sh\n*/1 * * * * /bin/bash -c '. $HOME/.rbenv/loader.sh ; cd /data/app/; ruby -v'\n\n\nThe '.' before '$HOME/.rbenv/loader.sh' is important, it runs the script in the current shell\nOr without loader, which is better\n*/1 * * * * /bin/bash -c 'export PATH=\"$HOME/.rbenv/bin:$PATH\" ; eval \"$(rbenv init -)\"; cd /data/app/; ruby -v'\n\n\n\u53c2\u8003\u306b\u66f8\u304d\u63db\u3048\u3066\u307f\u308b\n\nbash.sh\n0 * * * * /bin/bash -lc 'export PATH=\"$HOME/.rbenv/bin:$PATH\" ; eval \"$(rbenv init -)\"; cd $HOME/u/app/; rails runner -e production \"Hoge.run()\"'\n\n\n# \u3084\u308a\u305f\u304b\u3063\u305f\u3053\u3068\n\u3042\u308brails project\u306edir\u4ee5\u4e0b\u306b\u3066\u3001\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\n\n```lang:crontab\n0 * * * * cd $HOME/u/app/; rails runner -e production \"Hoge.run()\"\n```\n\ncron\u3067\u5b9f\u884c\u3059\u308b\u3068\u3001\u74b0\u5883\u5909\u6570\u306a\u3069\u304c\u8aad\u307f\u8fbc\u307e\u308c\u3066\u3044\u306a\u3044\u305f\u3081\u3001PATH\u304c\u901a\u3063\u3066\u306a\u304b\u3063\u305f\u308a\u3001\u3068\u76db\u5927\u306b\u6012\u3089\u308c\u308b\u3002\n\n### bash -lc\n\u53c2\u8003\uff1a[cron \u5b9f\u884c\u6642\u306b\u30ed\u30b0\u30a4\u30f3\u30b7\u30a7\u30eb(bash)\u3068\u540c\u3058\u74b0\u5883\u5909\u6570\u3067\u52d5\u304b\u3057\u305f\u3044 - yukku++](http://blog.44uk.net/2012/07/16/cron-in-login-env/)\n\n\u30ed\u30b0\u30a4\u30f3\u30b7\u30a7\u30eb\u3068\u540c\u69d8\u306e\u74b0\u5883\u5909\u6570\u306b\u3059\u308b\u305f\u3081\u306b\u3001\u30b7\u30a7\u30eb\u306b\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6e21\u3057\u3066\u304b\u3089\u5b9f\u884c\u3059\u308b\u3002\nbash\u306e\u5834\u5408\u306f`-l`\u3068\u306a\u308b\n\n### rbenv\u3092load\u3059\u308b\nrbenv\u95a2\u9023\u306e\u8a2d\u5b9a\u3092\u8aad\u307f\u8fbc\u3080\u3002\n\n\uff08\u81ea\u5206\u306e\u5834\u5408\u3001\u5c11\u3057\u524d\u306b\u3001`bundle install --binstubs`\u3092rails4\u74b0\u5883\u5316\u3067\u3084\u3063\u3066\u3057\u307e\u3044\u3001\u89e3\u6c7a\u306b\u304f\u308d\u3046\u3057\u305f\u306e\u3067\u3001\u305d\u306e\u3068\u304d\u306e\u4f55\u304b\u3082\u5f71\u97ff\u3057\u3066\u3044\u305f\u306e\u304b\u3082\u3002\u3002\uff1f\n\n[ruby script using rbenv in cron - Stack Overflow](http://stackoverflow.com/questions/8434922/ruby-script-using-rbenv-in-cron)\n[Rails4\u304b\u3089--binstubs\u304c\u4f7f\u3048\u306a\u304f\u306a\u308b\u4ef6 - Qiita](http://qiita.com/naoty_k/items/01c41578e611b038da6e)\n[rails\u306e\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u304c\u4f7f\u3048\u306a\u304f\u306a\u308b\u554f\u984c\u306e\u539f\u56e0\u306fbinstubs - PILOG](http://xoyip.hatenablog.com/entry/2013/12/14/203805)\n\n\nrbenv\u95a2\u4fc2\u8aad\u307f\u8fbc\u307f\u306e\u53c2\u8003: [ruby script using rbenv in cron - Stack Overflow](http://stackoverflow.com/questions/8434922/ruby-script-using-rbenv-in-cron)\n\n>```lang:bash.sh\n*/1 * * * * /bin/bash -c '. $HOME/.rbenv/loader.sh ; cd /data/app/; ruby -v'\n```\nThe '.' before '$HOME/.rbenv/loader.sh' is important, it runs the script in the current shell\nOr without loader, which is better\n\n>```\n*/1 * * * * /bin/bash -c 'export PATH=\"$HOME/.rbenv/bin:$PATH\" ; eval \"$(rbenv init -)\"; cd /data/app/; ruby -v'\n```\n\n\u53c2\u8003\u306b\u66f8\u304d\u63db\u3048\u3066\u307f\u308b\n\n```lang:bash.sh\n0 * * * * /bin/bash -lc 'export PATH=\"$HOME/.rbenv/bin:$PATH\" ; eval \"$(rbenv init -)\"; cd $HOME/u/app/; rails runner -e production \"Hoge.run()\"'\n```\n", "tags": ["rbenv", "Rails"]}