{"context": "\n\n\u300a\u8ab2\u984c\u300b\nVPC\u5185\u3067\u306e\u307f\u540d\u524d\u89e3\u6c7a\u3092\u3067\u304d\u308b\u3088\u3046\u306bRoute 53\u3067Private DNS\u3092\u8a2d\u5b9a\u3059\u308b\n\u30fbPrivate DNS\u306b\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u3059\u308b\nsub.example.com A xxx.xxx.xxx.xxx\n\n\u300a\u524d\u63d0\u6761\u4ef6\u300b\n\u30fbAWS\u306e\u69cb\u6210\nVPC\u306bEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u4e00\u3064\n\n\u300a\u624b\u9806\u300b\n\n\u25bcRoute 53\u306e\u8a2d\u5b9a\n\n\u30fbHosted zones\u306e\u4f5c\u6210\n\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30db\u30b9\u30c8\u30be\u30fc\u30f3\u3092\u4f5c\u6210\u3057\u3066\u5bfe\u8c61\u306eVPC\u306b\u95a2\u9023\u4ed8\u3051\u308b\n\n\n1. \u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc[Hosted zones]\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001[Create Hosted Zone]\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\n2. Hosted zones\u306e\u60c5\u5831\u3092\u5165\u529b\u3057\u3001[Create]\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\nDomain Name : example.com\nComment     : \u4efb\u610f\u306e\u30b3\u30e1\u30f3\u30c8\nType        : Private Hosted Zone for Amazon VPC\nVPC ID      : \u5bfe\u8c61\u306eVPC    \n\nNS\u30ec\u30b3\u30fc\u30c9\u3068SOA\u30ec\u30b3\u30fc\u30c9\u304c\u767b\u9332\u3055\u308c\u305fHosted zones\u304c\u4f5c\u6210\u3055\u308c\u308b\n\n3. [Create Record Set]\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\n4. Record \u60c5\u5831\u3092\u5165\u529b\u3057\u3001[Create]\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\nName           : sub.example.com.\nType           : A \u2013 IPv4 address\nAlias          : No\nTTL (Seconds)  : 300\nValue          : xxx.xxx.xxx.xxx\uff08\u5bfe\u8c61IP\u30a2\u30c9\u30ec\u30b9\uff09\nRouting Policy : simple\n\nRouting Policy\u3067\u69d8\u3005\u306e\u30eb\u30fc\u30eb\u3067\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u304c\u53ef\u80fd\u3002simple\u306f\u901a\u5e38\u306eDNS\u3002\n\u8a73\u7d30\u306f\u300c\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30dd\u30ea\u30b7\u30fc\u306e\u9078\u629e\u300d\u3092\u53c2\u7167\n\n\n\u25bcVPC\u306e\u8a2d\u5b9a\n\n\u30fbPrivate Hosted Zone\u3092\u5229\u7528\u3067\u304d\u308b\u69d8\u306b\u8a2d\u5b9a\n\u53c2\u7167\uff1aAmazon Route 53 - \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30db\u30b9\u30c8\u30be\u30fc\u30f3\u306e\u4f7f\u7528\n\n\n1. \u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc[VPC]\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u5bfe\u8c61\u306eVPC\u3092\u9078\u629e\n\n2. [\u30a2\u30af\u30b7\u30e7\u30f3]-[DNS \u89e3\u6c7a\u306e\u7de8\u96c6]\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u8a2d\u5b9a\u5909\u66f4\u3057[\u4fdd\u5b58]\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\nDNS\u89e3\u6c7a : \u306f\u3044\n\u203benableDnsHostnames\u3092true\n\n\n3. [\u30a2\u30af\u30b7\u30e7\u30f3]-[DNS \u30db\u30b9\u30c8\u540d\u306e\u7de8\u96c6]\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u8a2d\u5b9a\u5909\u66f4\u3057[\u4fdd\u5b58]\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\nDNS \u30db\u30b9\u30c8\u540d\u306e\u7de8\u96c6 : \u306f\u3044\n\u203benableDnsSupport\u3092true\n\n\n\n\u25bc\u540d\u524d\u89e3\u6c7a\u306e\u78ba\u8a8d\nVPC\u306b\u5c5e\u3059\u308bEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304b\u3089nslookup\u306e\u5b9f\u884c\n\n\n\u8a2d\u5b9a\u524d\n$ nslookup sub.example.com\nServer:         10.0.0.2\nAddress:        10.0.0.2#53\n\n** server can't find sub.example.com: NXDOMAIN\n\n\n\n\u8a2d\u5b9a\u5f8c\n$ nslookup sub.example.com\nServer:         10.0.0.2\nAddress:        10.0.0.2#53\n\nNon-authoritative answer:\nName:   sub.example.com\nAddress: xxx.xxx.xxx.xxx\n\n\n\u6b63\u3057\u304f\u8a2d\u5b9a\u3057\u305fIP\u30a2\u30c9\u30ec\u30b9\u304c\u8fd4\u3063\u3066\u304f\u308c\u3070OK\n\n#\u300a\u8ab2\u984c\u300b\nVPC\u5185\u3067\u306e\u307f\u540d\u524d\u89e3\u6c7a\u3092\u3067\u304d\u308b\u3088\u3046\u306bRoute 53\u3067Private DNS\u3092\u8a2d\u5b9a\u3059\u308b\n\n\u30fbPrivate DNS\u306b\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u3059\u308b\nsub.example.com A xxx.xxx.xxx.xxx\n\n\n#\u300a\u524d\u63d0\u6761\u4ef6\u300b\n\u30fbAWS\u306e\u69cb\u6210\nVPC\u306bEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u4e00\u3064\n\n\n#\u300a\u624b\u9806\u300b\n##\u25bcRoute 53\u306e\u8a2d\u5b9a\n###\u30fbHosted zones\u306e\u4f5c\u6210\n\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30db\u30b9\u30c8\u30be\u30fc\u30f3\u3092\u4f5c\u6210\u3057\u3066\u5bfe\u8c61\u306eVPC\u306b\u95a2\u9023\u4ed8\u3051\u308b\n>####1. \u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc[Hosted zones]\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001[Create Hosted Zone]\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n####2. Hosted zones\u306e\u60c5\u5831\u3092\u5165\u529b\u3057\u3001[Create]\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n    Domain Name : example.com\n    Comment     : \u4efb\u610f\u306e\u30b3\u30e1\u30f3\u30c8\n    Type        : Private Hosted Zone for Amazon VPC\n    VPC ID      : \u5bfe\u8c61\u306eVPC    \nNS\u30ec\u30b3\u30fc\u30c9\u3068SOA\u30ec\u30b3\u30fc\u30c9\u304c\u767b\u9332\u3055\u308c\u305fHosted zones\u304c\u4f5c\u6210\u3055\u308c\u308b\n####3. [Create Record Set]\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n####4. Record \u60c5\u5831\u3092\u5165\u529b\u3057\u3001[Create]\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n    Name           : sub.example.com.\n    Type           : A \u2013 IPv4 address\n    Alias          : No\n    TTL (Seconds)  : 300\n    Value          : xxx.xxx.xxx.xxx\uff08\u5bfe\u8c61IP\u30a2\u30c9\u30ec\u30b9\uff09\n    Routing Policy : simple\nRouting Policy\u3067\u69d8\u3005\u306e\u30eb\u30fc\u30eb\u3067\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u304c\u53ef\u80fd\u3002simple\u306f\u901a\u5e38\u306eDNS\u3002\n\u8a73\u7d30\u306f\u300c[\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30dd\u30ea\u30b7\u30fc\u306e\u9078\u629e](https://docs.aws.amazon.com/ja_jp/Route53/latest/DeveloperGuide/routing-policy.html)\u300d\u3092\u53c2\u7167\n\n##\u25bcVPC\u306e\u8a2d\u5b9a\n###\u30fbPrivate Hosted Zone\u3092\u5229\u7528\u3067\u304d\u308b\u69d8\u306b\u8a2d\u5b9a\n\u53c2\u7167\uff1a[Amazon Route 53 - \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30db\u30b9\u30c8\u30be\u30fc\u30f3\u306e\u4f7f\u7528]\n(http://docs.aws.amazon.com/ja_jp/Route53/latest/DeveloperGuide/hosted-zones-private.html)\n>####1. \u30b5\u30a4\u30c9\u30e1\u30cb\u30e5\u30fc[VPC]\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u5bfe\u8c61\u306eVPC\u3092\u9078\u629e\n####2. [\u30a2\u30af\u30b7\u30e7\u30f3]-[DNS \u89e3\u6c7a\u306e\u7de8\u96c6]\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u8a2d\u5b9a\u5909\u66f4\u3057[\u4fdd\u5b58]\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n    DNS\u89e3\u6c7a : \u306f\u3044\n    \u203benableDnsHostnames\u3092true\n####3. [\u30a2\u30af\u30b7\u30e7\u30f3]-[DNS \u30db\u30b9\u30c8\u540d\u306e\u7de8\u96c6]\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u8a2d\u5b9a\u5909\u66f4\u3057[\u4fdd\u5b58]\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n    DNS \u30db\u30b9\u30c8\u540d\u306e\u7de8\u96c6 : \u306f\u3044\n    \u203benableDnsSupport\u3092true\n\n##\u25bc\u540d\u524d\u89e3\u6c7a\u306e\u78ba\u8a8d\nVPC\u306b\u5c5e\u3059\u308bEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304b\u3089nslookup\u306e\u5b9f\u884c\n>```bash:\u8a2d\u5b9a\u524d\n$ nslookup sub.example.com\nServer:         10.0.0.2\nAddress:        10.0.0.2#53\n>\n** server can't find sub.example.com: NXDOMAIN\n```\n>\n```bash:\u8a2d\u5b9a\u5f8c\n$ nslookup sub.example.com\nServer:         10.0.0.2\nAddress:        10.0.0.2#53\n>\nNon-authoritative answer:\nName:   sub.example.com\nAddress: xxx.xxx.xxx.xxx\n```\n\u6b63\u3057\u304f\u8a2d\u5b9a\u3057\u305fIP\u30a2\u30c9\u30ec\u30b9\u304c\u8fd4\u3063\u3066\u304f\u308c\u3070OK\n", "tags": ["AWS", "route53", "vpc"]}