{"context": " More than 1 year has passed since last update.Symfony2.7 \u65b0\u6a5f\u80fd\u30b7\u30ea\u30fc\u30ba\u3002\u3086\u308b\u3044\u65e5\u672c\u8a9e\u7ffb\u8a33\u3002\u305d\u306e2\nhttp://symfony.com/blog/new-in-symfony-2-7-serialization-groups\nSymfony Serializer Component \u3078\u306e\u65b0\u6a5f\u80fd\u3068\u3057\u3066\u3001Serialization Groups \u3068\u3044\u3046\u6a5f\u80fd\u304c\u8ffd\u52a0\u3055\u308c\u305f\u3002\n\u305d\u3082\u305d\u3082\u3001Serializaer Component \u306f\u3001PHP\u306e\u30c7\u30fc\u30bf\u3092\u6c38\u7d9a\u5316\u306a\u3069\u76ee\u7684\u306e\u305f\u3081\u3001\u4ed6\u306e\u5f62\u5f0f (XML, JSON, YAML...) \u306b\u5909\u63db\u3059\u308b\u6a5f\u80fd\u3092\u6301\u3063\u3066\u3044\u308b\u3002(http://symfony.com/doc/current/components/serializer.html)\n\u5834\u6240\u306b\u3088\u3063\u3066\u306f\u4e00\u90e8\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u307f Serialize \u3057\u305f\u3044\u3068\u3044\u3046\u5834\u9762\u306b\u304a\u3044\u3066\u3001Annotation \u3092\u4f7f\u3044\u3001Group \u3092\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u306e\u5fc5\u8981\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308a\u3001@Groups \u30a2\u30ce\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u3001\u30b0\u30eb\u30fc\u30d7\u540d\u3092\u6307\u5b9a\u3002\u5c5e\u3059\u308b\u30b0\u30eb\u30fc\u30d7\u3092\u8907\u6570\u6307\u5b9a\u3067\u304d\u308b\u4ed5\u69d8\u306e\u3088\u3046\u3060\u3002\u540c\u3058\u304f\u3001YAML\u3001XML\u3067\u3082\u540c\u3058\u3088\u3046\u306a\u3053\u3068\u304c\u53ef\u80fd\u3002\n\nProduct.php\nuse Symfony\\Component\\Serializer\\Annotation\\Groups;\n\nclass Product\n{\n    /**\n     * @Groups({\"admins\"})\n     */\n    public $itemsSold;\n\n    /**\n     * @Groups({\"admins\", \"affiliates\"})\n     */\n    public $commission;\n\n    /**\n     * @Groups({\"admins\", \"affiliates\", \"users\"})\n     */\n    public $price;\n}\n\n\n\nsample.yaml\nBucyou\\Product:\n    attributes:\n        itemSold:\n            groups: [\"admins\"]\n        commission:\n            groups: [\"admins\", \"affiliates\"]\n        price:\n            groups: [\"admins\", \"affiliates\", \"users\"]\n\n\nnormalize() \u3067\u3001groups \u3092\u9650\u5b9a\u3057\u3066\u53d6\u308a\u51fa\u3059\u3002\u8907\u6570\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3002\u8a72\u5f53\u3059\u308b\u30b0\u30eb\u30fc\u30d7\u306e\u30c7\u30fc\u30bf\u306e\u307f\u3092\u8fd4\u3059\u3088\u3046\u3060\u3002\n\nannotationSample.php\n<?php\n\nrequire_once __DIR__.'/vendor/autoload.php';\n\nuse Symfony\\Component\\Serializer\\Serializer;\nuse Symfony\\Component\\Serializer\\Normalizer\\GetSetMethodNormalizer;\nuse Symfony\\Component\\Serializer\\Mapping\\Loader\\AnnotationLoader;\nuse Symfony\\Component\\Serializer\\Mapping\\Factory\\ClassMetadataFactory;\nuse Symfony\\Component\\Serializer\\Normalizer\\PropertyNormalizer;\nuse Doctrine\\Common\\Annotations\\AnnotationReader;\nuse Doctrine\\Common\\Annotations\\AnnotationRegistry;\nuse Bucyou\\Product;\n\n$product = new Product();\n$product->itemSold = 20;\n$product->commission = 7.5;\n$product->price = 19.99;\n\nAnnotationRegistry::registerFile(__DIR__.'/vendor/symfony/serializer/Symfony/Component/Serializer/Annotation/Groups.php');\n$classMetadataFactory = new ClassMetadataFactory(new AnnotationLoader(new AnnotationReader()));\n$normalizer = new PropertyNormalizer($classMetadataFactory);\n$serializer = new Serializer([$normalizer]);\n\nvar_dump($serializer->normalize($product, null, ['groups' => ['admins']]));\n/*\narray(3) {\n  'itemSold' =>\n  int(20)\n  'commission' =>\n  double(7.5)\n  'price' =>\n  double(19.99)\n}\n */\nvar_dump($serializer->normalize($product, null, ['groups' => ['affiliates']]));\n/*\narray(2) {\n  'commission' =>\n  double(7.5)\n  'price' =>\n  double(19.99)\n}\n*/\nvar_dump($serializer->normalize($product, null, ['groups' => ['users']]));\n/*\narray(1) {\n  'price' =>\n  double(19.99)\n}\n*/\nvar_dump($serializer->normalize($product, null, ['groups' => ['affiliates', 'users']]));\n/*\narray(2) {\n  'commission' =>\n  double(7.5)\n  'price' =>\n  double(19.99)\n}\n*/\n\n\n\nyamlSample.php\n<?php\n\nrequire_once __DIR__.'/vendor/autoload.php';\n\nuse Symfony\\Component\\Serializer\\Serializer;\nuse Symfony\\Component\\Serializer\\Normalizer\\GetSetMethodNormalizer;\nuse Symfony\\Component\\Serializer\\Mapping\\Loader\\YamlFileLoader;\nuse Symfony\\Component\\Serializer\\Mapping\\Factory\\ClassMetadataFactory;\nuse Symfony\\Component\\Serializer\\Normalizer\\PropertyNormalizer;\nuse Doctrine\\Common\\Annotations\\AnnotationReader;\nuse Doctrine\\Common\\Annotations\\AnnotationRegistry;\nuse Bucyou\\Product;\n\n$product = new Product();\n$product->itemSold = 20;\n$product->commission = 7.5;\n$product->price = 19.99;\n\n$classMetadataFactory = new ClassMetadataFactory(new YamlFileLoader(__DIR__.'/sample.yml'));\n$normalizer = new PropertyNormalizer($classMetadataFactory);\n$serializer = new Serializer([$normalizer]);\n\nvar_dump($serializer->normalize($product, null, ['groups' => ['admins']]));\n/*\narray(3) {\n  'itemSold' =>\n  int(20)\n  'commission' =>\n  double(7.5)\n  'price' =>\n  double(19.99)\n}\n */\nvar_dump($serializer->normalize($product, null, ['groups' => ['affiliates']]));\n/*\narray(2) {\n  'commission' =>\n  double(7.5)\n  'price' =>\n  double(19.99)\n}\n*/\nvar_dump($serializer->normalize($product, null, ['groups' => ['users']]));\n/*\narray(1) {\n  'price' =>\n  double(19.99)\n}\n*/\nvar_dump($serializer->normalize($product, null, ['groups' => ['affiliates', 'users']]));\n/*\narray(2) {\n  'commission' =>\n  double(7.5)\n  'price' =>\n  double(19.99)\n}\n*/\n\n\n(XML\u306f\u306a\u3093\u304b\u30c0\u30eb\u304f\u306a\u3063\u3066\u307e\u3060\u66f8\u3044\u3066\u306a\u3044w)\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089: https://github.com/kawahara/serializerSample\ndenormalize() \u6642\u3082\u3001\u540c\u3058\u3088\u3046\u306b\u30b0\u30eb\u30fc\u30d7\u3092\u9069\u7528\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3002\n\u4eca\u306e\u3068\u3053\u308d\u3001Symfony \u6a19\u6e96\u306e Bundle \u3067\u3053\u306e\u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u306f\u898b\u3064\u3051\u3089\u308c\u306a\u304b\u3063\u305f\u304c\u3001\u8a2d\u5b9a\u5024\u306a\u3069\u3092\u9650\u5b9a\u3057\u3066\u5b89\u5168\u306b\u53d6\u308a\u51fa\u3057\u305f\u3044\u3068\u8a00\u3046\u6642\u306b\u4f7f\u3048\u308b\u3060\u308d\u3046\u3002\n\nSymfony2.7 \u65b0\u6a5f\u80fd\u30b7\u30ea\u30fc\u30ba\u3002\u3086\u308b\u3044\u65e5\u672c\u8a9e\u7ffb\u8a33\u3002\u305d\u306e2\n\nhttp://symfony.com/blog/new-in-symfony-2-7-serialization-groups\n\nSymfony Serializer Component \u3078\u306e\u65b0\u6a5f\u80fd\u3068\u3057\u3066\u3001Serialization Groups \u3068\u3044\u3046\u6a5f\u80fd\u304c\u8ffd\u52a0\u3055\u308c\u305f\u3002\n\u305d\u3082\u305d\u3082\u3001Serializaer Component \u306f\u3001PHP\u306e\u30c7\u30fc\u30bf\u3092\u6c38\u7d9a\u5316\u306a\u3069\u76ee\u7684\u306e\u305f\u3081\u3001\u4ed6\u306e\u5f62\u5f0f (XML, JSON, YAML...) \u306b\u5909\u63db\u3059\u308b\u6a5f\u80fd\u3092\u6301\u3063\u3066\u3044\u308b\u3002(http://symfony.com/doc/current/components/serializer.html)\n\u5834\u6240\u306b\u3088\u3063\u3066\u306f\u4e00\u90e8\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u307f Serialize \u3057\u305f\u3044\u3068\u3044\u3046\u5834\u9762\u306b\u304a\u3044\u3066\u3001Annotation \u3092\u4f7f\u3044\u3001Group \u3092\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\n\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u306e\u5fc5\u8981\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308a\u3001`@Groups` \u30a2\u30ce\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u3001\u30b0\u30eb\u30fc\u30d7\u540d\u3092\u6307\u5b9a\u3002\u5c5e\u3059\u308b\u30b0\u30eb\u30fc\u30d7\u3092\u8907\u6570\u6307\u5b9a\u3067\u304d\u308b\u4ed5\u69d8\u306e\u3088\u3046\u3060\u3002\u540c\u3058\u304f\u3001YAML\u3001XML\u3067\u3082\u540c\u3058\u3088\u3046\u306a\u3053\u3068\u304c\u53ef\u80fd\u3002\n\n```php:Product.php\nuse Symfony\\Component\\Serializer\\Annotation\\Groups;\n\nclass Product\n{\n    /**\n     * @Groups({\"admins\"})\n     */\n    public $itemsSold;\n\n    /**\n     * @Groups({\"admins\", \"affiliates\"})\n     */\n    public $commission;\n\n    /**\n     * @Groups({\"admins\", \"affiliates\", \"users\"})\n     */\n    public $price;\n}\n```\n\n```yaml:sample.yaml\nBucyou\\Product:\n    attributes:\n        itemSold:\n            groups: [\"admins\"]\n        commission:\n            groups: [\"admins\", \"affiliates\"]\n        price:\n            groups: [\"admins\", \"affiliates\", \"users\"]\n```\n\n`normalize()` \u3067\u3001`groups` \u3092\u9650\u5b9a\u3057\u3066\u53d6\u308a\u51fa\u3059\u3002\u8907\u6570\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3002\u8a72\u5f53\u3059\u308b\u30b0\u30eb\u30fc\u30d7\u306e\u30c7\u30fc\u30bf\u306e\u307f\u3092\u8fd4\u3059\u3088\u3046\u3060\u3002\n\n```php:annotationSample.php\n<?php\n\nrequire_once __DIR__.'/vendor/autoload.php';\n\nuse Symfony\\Component\\Serializer\\Serializer;\nuse Symfony\\Component\\Serializer\\Normalizer\\GetSetMethodNormalizer;\nuse Symfony\\Component\\Serializer\\Mapping\\Loader\\AnnotationLoader;\nuse Symfony\\Component\\Serializer\\Mapping\\Factory\\ClassMetadataFactory;\nuse Symfony\\Component\\Serializer\\Normalizer\\PropertyNormalizer;\nuse Doctrine\\Common\\Annotations\\AnnotationReader;\nuse Doctrine\\Common\\Annotations\\AnnotationRegistry;\nuse Bucyou\\Product;\n\n$product = new Product();\n$product->itemSold = 20;\n$product->commission = 7.5;\n$product->price = 19.99;\n\nAnnotationRegistry::registerFile(__DIR__.'/vendor/symfony/serializer/Symfony/Component/Serializer/Annotation/Groups.php');\n$classMetadataFactory = new ClassMetadataFactory(new AnnotationLoader(new AnnotationReader()));\n$normalizer = new PropertyNormalizer($classMetadataFactory);\n$serializer = new Serializer([$normalizer]);\n\nvar_dump($serializer->normalize($product, null, ['groups' => ['admins']]));\n/*\narray(3) {\n  'itemSold' =>\n  int(20)\n  'commission' =>\n  double(7.5)\n  'price' =>\n  double(19.99)\n}\n */\nvar_dump($serializer->normalize($product, null, ['groups' => ['affiliates']]));\n/*\narray(2) {\n  'commission' =>\n  double(7.5)\n  'price' =>\n  double(19.99)\n}\n*/\nvar_dump($serializer->normalize($product, null, ['groups' => ['users']]));\n/*\narray(1) {\n  'price' =>\n  double(19.99)\n}\n*/\nvar_dump($serializer->normalize($product, null, ['groups' => ['affiliates', 'users']]));\n/*\narray(2) {\n  'commission' =>\n  double(7.5)\n  'price' =>\n  double(19.99)\n}\n*/\n```\n\n```php:yamlSample.php\n<?php\n\nrequire_once __DIR__.'/vendor/autoload.php';\n\nuse Symfony\\Component\\Serializer\\Serializer;\nuse Symfony\\Component\\Serializer\\Normalizer\\GetSetMethodNormalizer;\nuse Symfony\\Component\\Serializer\\Mapping\\Loader\\YamlFileLoader;\nuse Symfony\\Component\\Serializer\\Mapping\\Factory\\ClassMetadataFactory;\nuse Symfony\\Component\\Serializer\\Normalizer\\PropertyNormalizer;\nuse Doctrine\\Common\\Annotations\\AnnotationReader;\nuse Doctrine\\Common\\Annotations\\AnnotationRegistry;\nuse Bucyou\\Product;\n\n$product = new Product();\n$product->itemSold = 20;\n$product->commission = 7.5;\n$product->price = 19.99;\n\n$classMetadataFactory = new ClassMetadataFactory(new YamlFileLoader(__DIR__.'/sample.yml'));\n$normalizer = new PropertyNormalizer($classMetadataFactory);\n$serializer = new Serializer([$normalizer]);\n\nvar_dump($serializer->normalize($product, null, ['groups' => ['admins']]));\n/*\narray(3) {\n  'itemSold' =>\n  int(20)\n  'commission' =>\n  double(7.5)\n  'price' =>\n  double(19.99)\n}\n */\nvar_dump($serializer->normalize($product, null, ['groups' => ['affiliates']]));\n/*\narray(2) {\n  'commission' =>\n  double(7.5)\n  'price' =>\n  double(19.99)\n}\n*/\nvar_dump($serializer->normalize($product, null, ['groups' => ['users']]));\n/*\narray(1) {\n  'price' =>\n  double(19.99)\n}\n*/\nvar_dump($serializer->normalize($product, null, ['groups' => ['affiliates', 'users']]));\n/*\narray(2) {\n  'commission' =>\n  double(7.5)\n  'price' =>\n  double(19.99)\n}\n*/\n```\n\n(XML\u306f\u306a\u3093\u304b\u30c0\u30eb\u304f\u306a\u3063\u3066\u307e\u3060\u66f8\u3044\u3066\u306a\u3044w)\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089: https://github.com/kawahara/serializerSample\n\n`denormalize()` \u6642\u3082\u3001\u540c\u3058\u3088\u3046\u306b\u30b0\u30eb\u30fc\u30d7\u3092\u9069\u7528\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3002\n\n\n\u4eca\u306e\u3068\u3053\u308d\u3001Symfony \u6a19\u6e96\u306e Bundle \u3067\u3053\u306e\u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u306f\u898b\u3064\u3051\u3089\u308c\u306a\u304b\u3063\u305f\u304c\u3001\u8a2d\u5b9a\u5024\u306a\u3069\u3092\u9650\u5b9a\u3057\u3066\u5b89\u5168\u306b\u53d6\u308a\u51fa\u3057\u305f\u3044\u3068\u8a00\u3046\u6642\u306b\u4f7f\u3048\u308b\u3060\u308d\u3046\u3002\n", "tags": ["PHP", "Symfony22.7"]}