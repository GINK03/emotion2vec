{"tags": ["WordPress", "Bluemix", "Alchemy"], "context": " More than 1 year has passed since last update.Alchemy\u3068\u3044\u3046\u753b\u50cf\u304b\u3089\u30bf\u30b0\u3092\u53d6\u5f97\u3067\u304d\u308bAPI\u304c\u3042\u308a\u307e\u3059\u3002\nhttp://www.alchemyapi.com/api/image-tagging/urls.html\n\u3053\u308c\u3092\u4f7f\u3063\u3066WordPress\u306b\u753b\u50cf\u3092\u6295\u7a3f\u3057\u305f\u3089\u81ea\u52d5\u7684\u306b\u30bf\u30b0\u4ed8\u3051\u3067\u304d\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\u4ed6\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u540c\u69d8\u306b/wp-contents/plugins\u914d\u4e0b\u306b\u7f6e\u3044\u3066\u6709\u52b9\u5316\u3059\u308c\u3070\u52d5\u304f\u3068\u601d\u3044\u307e\u3059\u3002\uff08\u3042\u3093\u307e\u308a\u8a66\u3057\u3066\u307e\u305b\u3093\uff09\nAlchemy\u306e\u958b\u767a\u8005\u30ad\u30fc\u306f\u3001\u3054\u81ea\u8eab\u3067\u53d6\u5f97\u304f\u3060\u3055\u3044\u306a\u3002\n<?php\n/*\nPlugin Name: add tag with alchemy\nPlugin URI: http://barcelona-prototype.com/wordpress\nDescription: add tag with alchemy\nAuthor: t.uehara\nVersion: 0.0.1\n*/\n\nadd_filter('post_updated','add_tag_with_alchemy');\n\nfunction add_tag_with_alchemy($id){\n    $key = \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\";\n    $base = \"http://access.alchemyapi.com/calls/url/URLGetRankedImageKeywords?apikey=\".$key.\"&forceShowAll=1&outputMode=json&url=\";\n    $text = get_post($id,'ARRAY_A')['post_content'];\n    $preg = '(https?://[-_.!~*\\'()a-zA-Z0-9;/?:@&=+$,%#]+)';\n    if(preg_match_all($preg, $text, $result) !== false){\n        foreach($result[0] as $value){\n            if(preg_match(\"/jpg/\",$value)){\n                $json = file_get_contents($base.$value);\n                $imageKeywords = json_decode($json)->imageKeywords[0]->text;\n                wp_set_post_tags($id,$imageKeywords);\n            }\n        }\n    }\n    return null;\n}\n\nIFTTT\u3092\u4f7f\u3063\u3066Twitter\u3084Facebook\u306b\u6295\u7a3f\u3055\u308c\u305f\u753b\u50cf\u3092\u7247\u3063\u7aef\u304b\u3089\u30bf\u30ae\u30f3\u30b0\u3059\u308b\u306e\u3082\u9762\u767d\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\nAlchemy\u3068\u3044\u3046\u753b\u50cf\u304b\u3089\u30bf\u30b0\u3092\u53d6\u5f97\u3067\u304d\u308bAPI\u304c\u3042\u308a\u307e\u3059\u3002\nhttp://www.alchemyapi.com/api/image-tagging/urls.html\n\n\u3053\u308c\u3092\u4f7f\u3063\u3066WordPress\u306b\u753b\u50cf\u3092\u6295\u7a3f\u3057\u305f\u3089\u81ea\u52d5\u7684\u306b\u30bf\u30b0\u4ed8\u3051\u3067\u304d\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\u4ed6\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u540c\u69d8\u306b/wp-contents/plugins\u914d\u4e0b\u306b\u7f6e\u3044\u3066\u6709\u52b9\u5316\u3059\u308c\u3070\u52d5\u304f\u3068\u601d\u3044\u307e\u3059\u3002\uff08\u3042\u3093\u307e\u308a\u8a66\u3057\u3066\u307e\u305b\u3093\uff09\n\nAlchemy\u306e\u958b\u767a\u8005\u30ad\u30fc\u306f\u3001\u3054\u81ea\u8eab\u3067\u53d6\u5f97\u304f\u3060\u3055\u3044\u306a\u3002\n\n```php\n<?php\n/*\nPlugin Name: add tag with alchemy\nPlugin URI: http://barcelona-prototype.com/wordpress\nDescription: add tag with alchemy\nAuthor: t.uehara\nVersion: 0.0.1\n*/\n\nadd_filter('post_updated','add_tag_with_alchemy');\n\nfunction add_tag_with_alchemy($id){\n    $key = \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\";\n    $base = \"http://access.alchemyapi.com/calls/url/URLGetRankedImageKeywords?apikey=\".$key.\"&forceShowAll=1&outputMode=json&url=\";\n    $text = get_post($id,'ARRAY_A')['post_content'];\n    $preg = '(https?://[-_.!~*\\'()a-zA-Z0-9;/?:@&=+$,%#]+)';\n    if(preg_match_all($preg, $text, $result) !== false){\n        foreach($result[0] as $value){\n            if(preg_match(\"/jpg/\",$value)){\n                $json = file_get_contents($base.$value);\n                $imageKeywords = json_decode($json)->imageKeywords[0]->text;\n                wp_set_post_tags($id,$imageKeywords);\n            }\n        }\n    }\n    return null;\n}\n```\nIFTTT\u3092\u4f7f\u3063\u3066Twitter\u3084Facebook\u306b\u6295\u7a3f\u3055\u308c\u305f\u753b\u50cf\u3092\u7247\u3063\u7aef\u304b\u3089\u30bf\u30ae\u30f3\u30b0\u3059\u308b\u306e\u3082\u9762\u767d\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n"}