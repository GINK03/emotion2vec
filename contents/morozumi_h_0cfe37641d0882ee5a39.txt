{"tags": ["AWS", "CloudFormation"], "context": " More than 1 year has passed since last update.AWS CloudFormation \uff08 \u8a2d\u5b9a\u7ba1\u7406 & \u30af\u30e9\u30a6\u30c9\u306e\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\uff09| \u30a2\u30de\u30be\u30f3 \u30a6\u30a7\u30d6 \u30b5\u30fc\u30d3\u30b9\uff08AWS \u65e5\u672c\u8a9e\uff09\nCloudFormation\u306f\u3068\u3066\u3082\u3088\u3044\u30c4\u30fc\u30eb\u3067\u3059\u304c\u30010\u30d9\u30fc\u30b9\u304b\u3089\u8a18\u8ff0\u3057\u3088\u3046\u3068\u601d\u3046\u3068\u3068\u3066\u3082\u5927\u5909\u3067\u3059\u3088\u306d\u3002\n\u3068\u3042\u308b\u7814\u4fee\u306b\u3066\u3001AWS CloudFormation\u306e\u5468\u8fba\u30c4\u30fc\u30eb\u3092\u6559\u3048\u3066\u3082\u3089\u3063\u305f\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\nVisualOps\nVisualOps\n\nVisualOps\u306f\u3001GUI\u3092\u7528\u3044\u3066CloudFormation\u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u3001\u30ed\u30b0\u30a4\u30f3\u3092\u884c\u3046\u3068\u4ee5\u4e0b\u306e\u69d8\u306a\u7ba1\u7406\u753b\u9762\u3092\u8868\u793a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\uff08AWS\u30a2\u30ab\u30a6\u30f3\u30c8\u3068\u306e\u30d2\u30e2\u4ed8\u3092\u884c\u3046\u3068\u3001VisualOps\u304b\u3089\u76f4\u63a5AWS\u4e0a\u306bCloudFormation\u3092\u4f7f\u7528\u3057\u3066\u74b0\u5883\u3092\u69cb\u7bc9\u3067\u304d\u308b\u3088\u3046\u3067\u3059\uff09\n\n\u8a66\u3057\u306b\u3001\u30b5\u30f3\u30d7\u30eb\u3067\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u300csample-apache-hadoop-v1\u300d\u3092\u9078\u629e\u3057\u3066\u307f\u307e\u3059\u3002\n\n\n\u3053\u306e\u3088\u3046\u306b\u3001Hadoop\u306e\u69cb\u6210\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nExport\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u3001CloudFormation\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\nsample-apache-hadoop-v1.json\n{\n   \"AWSTemplateFormatVersion\":\"2010-09-09\",\n   \"Parameters\":{\n      \"KeyPair2DefaultKP\":{\n         \"Default\":\"KeyPair2DefaultKP\",\n         \"Type\":\"String\",\n         \"Description\":\"\"\n      },\n      \"VisualOpsStackVersion\":{\n         \"Default\":\"2014-02-17\",\n         \"Type\":\"String\",\n         \"Description\":\"\"\n      }\n   },\n   \"Description\":\"Cloudformation generated by VisualOps\",\n   \"Resources\":{\n      \"SecurityGroup2hmasters2Ingress23\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"FromPort\":\"8020\",\n            \"ToPort\":\"8020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2hmasters2Ingress22\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"FromPort\":\"9000\",\n            \"ToPort\":\"9000\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2hmasters2Ingress21\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"FromPort\":\"9000\",\n            \"ToPort\":\"9000\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2hmasters2Ingress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"FromPort\":\"8020\",\n            \"ToPort\":\"8020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2relay2Ingress22\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"FromPort\":\"0\",\n            \"ToPort\":\"65535\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"IpProtocol\":\"-1\"\n         }\n      },\n      \"SecurityGroup2relay2Ingress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"ToPort\":\"22\",\n            \"FromPort\":\"22\",\n            \"CidrIp\":\"0.0.0.0/0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2hmasters2IpPermissions22\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"FromPort\":\"8020\",\n            \"ToPort\":\"8020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2DefaultSG2Ingress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"ToPort\":\"22\",\n            \"FromPort\":\"22\",\n            \"CidrIp\":\"0.0.0.0/0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2DefaultSG2Ingress21\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"FromPort\":\"50070\",\n            \"ToPort\":\"50070\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2datanode2Ingress21\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"FromPort\":\"50020\",\n            \"ToPort\":\"50020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"VPC2vpc\":{\n         \"Type\":\"AWS::EC2::VPC\",\n         \"Properties\":{\n            \"CidrBlock\":\"10.0.0.0/16\",\n            \"EnableDnsSupport\":true,\n            \"InstanceTenancy\":\"default\",\n            \"EnableDnsHostnames\":false\n         }\n      },\n      \"SecurityGroup2DefaultSG2IpPermissionsEgress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"65535\",\n            \"FromPort\":\"0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"IpProtocol\":\"-1\"\n         }\n      },\n      \"Instance2NAT\":{\n         \"Type\":\"AWS::EC2::Instance\",\n         \"Properties\":{\n            \"Monitoring\":\"true\",\n            \"ImageId\":\"ami-bba18dd2\",\n            \"BlockDeviceMappings\":[\n               {\n                  \"DeviceName\":\"/dev/sda1\",\n                  \"Ebs\":{\n                     \"SnapshotId\":\"snap-b4ef17a9\",\n                     \"VolumeSize\":8,\n                     \"VolumeType\":\"standard\"\n                  }\n               }\n            ],\n            \"KeyName\":{\n               \"Ref\":\"KeyPair2DefaultKP\"\n            },\n            \"InstanceType\":\"t1.micro\",\n            \"NetworkInterfaces\":[\n               {\n                  \"SubnetId\":{\n                     \"Ref\":\"Subnet2subnet2\"\n                  },\n                  \"DeviceIndex\":\"0\",\n                  \"GroupSet\":[\n                     {\n                        \"Ref\":\"SecurityGroup2relay\"\n                     }\n                  ],\n                  \"PrivateIpAddresses\":[\n                     {\n                        \"Primary\":true,\n                        \"PrivateIpAddress\":\"10.0.2.4\"\n                     }\n                  ],\n                  \"AssociatePublicIpAddress\":true\n               }\n            ]\n         }\n      },\n      \"RouteTable2RT12RouteSet21\":{\n         \"Type\":\"AWS::EC2::Route\",\n         \"Properties\":{\n            \"GatewayId\":{\n               \"Ref\":\"InternetGateway2Internetgateway\"\n            },\n            \"DestinationCidrBlock\":\"0.0.0.0/0\",\n            \"RouteTableId\":{\n               \"Ref\":\"RouteTable2RT1\"\n            }\n         }\n      },\n      \"SecurityGroup2datanode2IpPermissions22\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"FromPort\":\"50020\",\n            \"ToPort\":\"50020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2datanode2IpPermissionsEgress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"8020\",\n            \"FromPort\":\"8020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"NetworkInterface2NameNodeeni0\":{\n         \"Type\":\"AWS::EC2::NetworkInterface\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet0\"\n            },\n            \"SourceDestCheck\":true,\n            \"GroupSet\":[\n               {\n                  \"Ref\":\"SecurityGroup2DefaultSG\"\n               },\n               {\n                  \"Ref\":\"SecurityGroup2hmasters\"\n               }\n            ],\n            \"PrivateIpAddresses\":[\n               {\n                  \"Primary\":true,\n                  \"PrivateIpAddress\":\"10.0.0.5\"\n               }\n            ]\n         }\n      },\n      \"SecurityGroup2hmasters2IpPermissionsEgress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"65535\",\n            \"FromPort\":\"0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"-1\",\n            \"CidrIp\":\"0.0.0.0/0\"\n         }\n      },\n      \"NetworkInterface2DataNodeGroupAeni0\":{\n         \"Type\":\"AWS::EC2::NetworkInterface\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet0\"\n            },\n            \"SourceDestCheck\":true,\n            \"GroupSet\":[\n               {\n                  \"Ref\":\"SecurityGroup2DefaultSG\"\n               },\n               {\n                  \"Ref\":\"SecurityGroup2datanode\"\n               }\n            ],\n            \"PrivateIpAddresses\":[\n               {\n                  \"Primary\":true,\n                  \"PrivateIpAddress\":\"10.0.0.4\"\n               }\n            ]\n         }\n      },\n      \"SecurityGroup2DefaultSG\":{\n         \"Type\":\"AWS::EC2::SecurityGroup\",\n         \"Properties\":{\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"GroupDescription\":\"Default Security Group\"\n         }\n      },\n      \"RouteTable2RT02RouteSet21\":{\n         \"Type\":\"AWS::EC2::Route\",\n         \"Properties\":{\n            \"DestinationCidrBlock\":\"0.0.0.0/0\",\n            \"NetworkInterfaceId\":{\n               \"Ref\":\"NetworkInterface2NATeni0\"\n            },\n            \"RouteTableId\":{\n               \"Ref\":\"RouteTable2RT0\"\n            }\n         }\n      },\n      \"SecurityGroup2datanode2Egress23\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"9000\",\n            \"FromPort\":\"9000\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2relay2Ingress21\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"ToPort\":\"80\",\n            \"FromPort\":\"80\",\n            \"CidrIp\":\"0.0.0.0/0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"NetworkInterface2DataNodeGroupCeni0\":{\n         \"Type\":\"AWS::EC2::NetworkInterface\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet3\"\n            },\n            \"SourceDestCheck\":true,\n            \"GroupSet\":[\n               {\n                  \"Ref\":\"SecurityGroup2DefaultSG\"\n               },\n               {\n                  \"Ref\":\"SecurityGroup2datanode\"\n               }\n            ],\n            \"PrivateIpAddresses\":[\n               {\n                  \"Primary\":true,\n                  \"PrivateIpAddress\":\"10.0.3.4\"\n               }\n            ]\n         }\n      },\n      \"SecurityGroup2relay2Egress21\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"50070\",\n            \"FromPort\":\"50070\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2relay2Egress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"65535\",\n            \"FromPort\":\"0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"IpProtocol\":\"-1\",\n            \"CidrIp\":\"0.0.0.0/0\"\n         }\n      },\n      \"SecurityGroup2DefaultSG2IpPermissions22\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"FromPort\":\"50070\",\n            \"ToPort\":\"50070\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"NetworkInterface2DataNodeGroupBeni0\":{\n         \"Type\":\"AWS::EC2::NetworkInterface\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet1\"\n            },\n            \"SourceDestCheck\":true,\n            \"GroupSet\":[\n               {\n                  \"Ref\":\"SecurityGroup2DefaultSG\"\n               },\n               {\n                  \"Ref\":\"SecurityGroup2datanode\"\n               }\n            ],\n            \"PrivateIpAddresses\":[\n               {\n                  \"Primary\":true,\n                  \"PrivateIpAddress\":\"10.0.1.4\"\n               }\n            ]\n         }\n      },\n      \"Subnet2subnet2\":{\n         \"Type\":\"AWS::EC2::Subnet\",\n         \"Properties\":{\n            \"Tags\":[\n\n            ],\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"CidrBlock\":\"10.0.2.0/24\",\n            \"AvailabilityZone\":\"us-east-1a\"\n         }\n      },\n      \"Subnet2subnet3\":{\n         \"Type\":\"AWS::EC2::Subnet\",\n         \"Properties\":{\n            \"Tags\":[\n\n            ],\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"CidrBlock\":\"10.0.3.0/24\",\n            \"AvailabilityZone\":\"us-east-1d\"\n         }\n      },\n      \"Subnet2subnet0\":{\n         \"Type\":\"AWS::EC2::Subnet\",\n         \"Properties\":{\n            \"Tags\":[\n\n            ],\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"CidrBlock\":\"10.0.0.0/24\",\n            \"AvailabilityZone\":\"us-east-1a\"\n         }\n      },\n      \"Subnet2subnet1\":{\n         \"Type\":\"AWS::EC2::Subnet\",\n         \"Properties\":{\n            \"Tags\":[\n\n            ],\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"CidrBlock\":\"10.0.1.0/24\",\n            \"AvailabilityZone\":\"us-east-1b\"\n         }\n      },\n      \"Instance2DataNodeGroupB\":{\n         \"Type\":\"AWS::EC2::Instance\",\n         \"Properties\":{\n            \"Monitoring\":\"true\",\n            \"ImageId\":\"ami-bba18dd2\",\n            \"BlockDeviceMappings\":[\n               {\n                  \"DeviceName\":\"/dev/sda1\",\n                  \"Ebs\":{\n                     \"SnapshotId\":\"snap-b4ef17a9\",\n                     \"VolumeSize\":8,\n                     \"VolumeType\":\"standard\"\n                  }\n               }\n            ],\n            \"KeyName\":{\n               \"Ref\":\"KeyPair2DefaultKP\"\n            },\n            \"InstanceType\":\"t1.micro\",\n            \"NetworkInterfaces\":[\n               {\n                  \"DeviceIndex\":\"0\",\n                  \"NetworkInterfaceId\":{\n                     \"Ref\":\"NetworkInterface2DataNodeGroupBeni0\"\n                  }\n               }\n            ]\n         }\n      },\n      \"NetworkAcl2DefaultACL2AssociationSet22\":{\n         \"Type\":\"AWS::EC2::SubnetNetworkAclAssociation\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet0\"\n            },\n            \"NetworkAclId\":{\n               \"Ref\":\"NetworkAcl2DefaultACL\"\n            }\n         }\n      },\n      \"NetworkAcl2DefaultACL2AssociationSet23\":{\n         \"Type\":\"AWS::EC2::SubnetNetworkAclAssociation\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet2\"\n            },\n            \"NetworkAclId\":{\n               \"Ref\":\"NetworkAcl2DefaultACL\"\n            }\n         }\n      },\n      \"NetworkAcl2DefaultACL2AssociationSet20\":{\n         \"Type\":\"AWS::EC2::SubnetNetworkAclAssociation\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet3\"\n            },\n            \"NetworkAclId\":{\n               \"Ref\":\"NetworkAcl2DefaultACL\"\n            }\n         }\n      },\n      \"NetworkAcl2DefaultACL2AssociationSet21\":{\n         \"Type\":\"AWS::EC2::SubnetNetworkAclAssociation\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet1\"\n            },\n            \"NetworkAclId\":{\n               \"Ref\":\"NetworkAcl2DefaultACL\"\n            }\n         }\n      },\n      \"NetworkAcl2DefaultACL\":{\n         \"Type\":\"AWS::EC2::NetworkAcl\",\n         \"Properties\":{\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"Tags\":[\n\n            ]\n         }\n      },\n      \"Instance2NameNode\":{\n         \"Type\":\"AWS::EC2::Instance\",\n         \"Properties\":{\n            \"Monitoring\":\"true\",\n            \"ImageId\":\"ami-bba18dd2\",\n            \"BlockDeviceMappings\":[\n               {\n                  \"DeviceName\":\"/dev/sda1\",\n                  \"Ebs\":{\n                     \"SnapshotId\":\"snap-b4ef17a9\",\n                     \"VolumeSize\":8,\n                     \"VolumeType\":\"standard\"\n                  }\n               }\n            ],\n            \"KeyName\":{\n               \"Ref\":\"KeyPair2DefaultKP\"\n            },\n            \"InstanceType\":\"t1.micro\",\n            \"NetworkInterfaces\":[\n               {\n                  \"DeviceIndex\":\"0\",\n                  \"NetworkInterfaceId\":{\n                     \"Ref\":\"NetworkInterface2NameNodeeni0\"\n                  }\n               }\n            ]\n         }\n      },\n      \"Instance2DataNodeGroupC\":{\n         \"Type\":\"AWS::EC2::Instance\",\n         \"Properties\":{\n            \"Monitoring\":\"true\",\n            \"ImageId\":\"ami-bba18dd2\",\n            \"BlockDeviceMappings\":[\n               {\n                  \"DeviceName\":\"/dev/sda1\",\n                  \"Ebs\":{\n                     \"SnapshotId\":\"snap-b4ef17a9\",\n                     \"VolumeSize\":8,\n                     \"VolumeType\":\"standard\"\n                  }\n               }\n            ],\n            \"KeyName\":{\n               \"Ref\":\"KeyPair2DefaultKP\"\n            },\n            \"InstanceType\":\"t1.micro\",\n            \"NetworkInterfaces\":[\n               {\n                  \"DeviceIndex\":\"0\",\n                  \"NetworkInterfaceId\":{\n                     \"Ref\":\"NetworkInterface2DataNodeGroupCeni0\"\n                  }\n               }\n            ]\n         }\n      },\n      \"SecurityGroup2relay\":{\n         \"Type\":\"AWS::EC2::SecurityGroup\",\n         \"Properties\":{\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"GroupDescription\":\"Custom Security Group\"\n         }\n      },\n      \"NetworkInterface2SecondaryNameNodeeni0\":{\n         \"Type\":\"AWS::EC2::NetworkInterface\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet1\"\n            },\n            \"SourceDestCheck\":true,\n            \"GroupSet\":[\n               {\n                  \"Ref\":\"SecurityGroup2DefaultSG\"\n               },\n               {\n                  \"Ref\":\"SecurityGroup2hmasters\"\n               }\n            ],\n            \"PrivateIpAddresses\":[\n               {\n                  \"Primary\":true,\n                  \"PrivateIpAddress\":\"10.0.1.5\"\n               }\n            ]\n         }\n      },\n      \"SecurityGroup2hmasters\":{\n         \"Type\":\"AWS::EC2::SecurityGroup\",\n         \"Properties\":{\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"GroupDescription\":\"Custom Security Group\"\n         }\n      },\n      \"NetworkAcl2DefaultACL2EntrySet20\":{\n         \"Type\":\"AWS::EC2::NetworkAclEntry\",\n         \"Properties\":{\n            \"NetworkAclId\":{\n               \"Ref\":\"NetworkAcl2DefaultACL\"\n            },\n            \"RuleNumber\":100,\n            \"Protocol\":-1,\n            \"PortRange\":{\n               \"To\":\"\",\n               \"From\":\"\"\n            },\n            \"Egress\":true,\n            \"RuleAction\":\"allow\",\n            \"Icmp\":{\n               \"Code\":\"\",\n               \"Type\":\"\"\n            },\n            \"CidrBlock\":\"0.0.0.0/0\"\n         }\n      },\n      \"Instance2SecondaryNameNode\":{\n         \"Type\":\"AWS::EC2::Instance\",\n         \"Properties\":{\n            \"Monitoring\":\"true\",\n            \"ImageId\":\"ami-bba18dd2\",\n            \"BlockDeviceMappings\":[\n               {\n                  \"DeviceName\":\"/dev/sda1\",\n                  \"Ebs\":{\n                     \"SnapshotId\":\"snap-b4ef17a9\",\n                     \"VolumeSize\":8,\n                     \"VolumeType\":\"standard\"\n                  }\n               }\n            ],\n            \"KeyName\":{\n               \"Ref\":\"KeyPair2DefaultKP\"\n            },\n            \"InstanceType\":\"t1.micro\",\n            \"NetworkInterfaces\":[\n               {\n                  \"DeviceIndex\":\"0\",\n                  \"NetworkInterfaceId\":{\n                     \"Ref\":\"NetworkInterface2SecondaryNameNodeeni0\"\n                  }\n               }\n            ]\n         }\n      },\n      \"SecurityGroup2relay2IpPermissionsEgress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"50070\",\n            \"FromPort\":\"50070\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2hmasters2Egress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"8020\",\n            \"FromPort\":\"8020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2hmasters2Egress21\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"9000\",\n            \"FromPort\":\"9000\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2hmasters2Egress22\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"65535\",\n            \"FromPort\":\"0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"-1\",\n            \"CidrIp\":\"0.0.0.0/0\"\n         }\n      },\n      \"RouteTable2RT12AssociationSet20\":{\n         \"Type\":\"AWS::EC2::SubnetRouteTableAssociation\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet2\"\n            },\n            \"RouteTableId\":{\n               \"Ref\":\"RouteTable2RT1\"\n            }\n         }\n      },\n      \"SecurityGroup2datanode2Egress24\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"8020\",\n            \"FromPort\":\"8020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"Instance2DataNodeGroupA\":{\n         \"Type\":\"AWS::EC2::Instance\",\n         \"Properties\":{\n            \"Monitoring\":\"true\",\n            \"ImageId\":\"ami-bba18dd2\",\n            \"BlockDeviceMappings\":[\n               {\n                  \"DeviceName\":\"/dev/sda1\",\n                  \"Ebs\":{\n                     \"SnapshotId\":\"snap-b4ef17a9\",\n                     \"VolumeSize\":8,\n                     \"VolumeType\":\"standard\"\n                  }\n               }\n            ],\n            \"KeyName\":{\n               \"Ref\":\"KeyPair2DefaultKP\"\n            },\n            \"InstanceType\":\"t1.micro\",\n            \"NetworkInterfaces\":[\n               {\n                  \"DeviceIndex\":\"0\",\n                  \"NetworkInterfaceId\":{\n                     \"Ref\":\"NetworkInterface2DataNodeGroupAeni0\"\n                  }\n               }\n            ]\n         }\n      },\n      \"SecurityGroup2datanode2Egress22\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"65535\",\n            \"FromPort\":\"0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"-1\",\n            \"CidrIp\":\"0.0.0.0/0\"\n         }\n      },\n      \"SecurityGroup2datanode2Egress21\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"50020\",\n            \"FromPort\":\"50020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2datanode2Egress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"50010\",\n            \"FromPort\":\"50010\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"RouteTable2RT02AssociationSet23\":{\n         \"Type\":\"AWS::EC2::SubnetRouteTableAssociation\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet1\"\n            },\n            \"RouteTableId\":{\n               \"Ref\":\"RouteTable2RT0\"\n            }\n         }\n      },\n      \"RouteTable2RT02AssociationSet22\":{\n         \"Type\":\"AWS::EC2::SubnetRouteTableAssociation\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet0\"\n            },\n            \"RouteTableId\":{\n               \"Ref\":\"RouteTable2RT0\"\n            }\n         }\n      },\n      \"RouteTable2RT1\":{\n         \"Type\":\"AWS::EC2::RouteTable\",\n         \"Properties\":{\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"Tags\":[\n\n            ]\n         }\n      },\n      \"SecurityGroup2DefaultSG2Egress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"65535\",\n            \"FromPort\":\"0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"IpProtocol\":\"-1\"\n         }\n      },\n      \"RouteTable2RT02AssociationSet24\":{\n         \"Type\":\"AWS::EC2::SubnetRouteTableAssociation\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet3\"\n            },\n            \"RouteTableId\":{\n               \"Ref\":\"RouteTable2RT0\"\n            }\n         }\n      },\n      \"NetworkAcl2DefaultACL2EntrySet22\":{\n         \"Type\":\"AWS::EC2::NetworkAclEntry\",\n         \"Properties\":{\n            \"NetworkAclId\":{\n               \"Ref\":\"NetworkAcl2DefaultACL\"\n            },\n            \"RuleNumber\":100,\n            \"Protocol\":-1,\n            \"PortRange\":{\n               \"To\":\"\",\n               \"From\":\"\"\n            },\n            \"RuleAction\":\"allow\",\n            \"Icmp\":{\n               \"Code\":\"\",\n               \"Type\":\"\"\n            },\n            \"CidrBlock\":\"0.0.0.0/0\"\n         }\n      },\n      \"RouteTable2RT0\":{\n         \"Type\":\"AWS::EC2::RouteTable\",\n         \"Properties\":{\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"Tags\":[\n\n            ]\n         }\n      },\n      \"SecurityGroup2datanode2Ingress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"FromPort\":\"50010\",\n            \"ToPort\":\"50010\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"AttachInternetGateway\":{\n         \"Type\":\"AWS::EC2::VPCGatewayAttachment\",\n         \"Properties\":{\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"InternetGatewayId\":{\n               \"Ref\":\"InternetGateway2Internetgateway\"\n            }\n         }\n      },\n      \"SecurityGroup2datanode\":{\n         \"Type\":\"AWS::EC2::SecurityGroup\",\n         \"Properties\":{\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"GroupDescription\":\"Custom Security Group\"\n         }\n      },\n      \"SecurityGroup2relay2IpPermissions22\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"FromPort\":\"0\",\n            \"ToPort\":\"65535\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"IpProtocol\":\"-1\"\n         }\n      },\n      \"InternetGateway2Internetgateway\":{\n         \"Type\":\"AWS::EC2::InternetGateway\",\n         \"Properties\":{\n\n         }\n      }\n   }\n}\n\n\n\u56f3\u3068\u3057\u3066\u4fdd\u5b58\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u306e\u3067\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u8a08\u3092VisualOps\u3092\u4f7f\u3063\u3066\u4f5c\u6210\u3057\u3001CloudFormation\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b\u3068\u3044\u3063\u305f\u4f7f\u3044\u65b9\u304c\u826f\u3044\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\nCoffeeFormation\nj3tm0t0/csfn\nCloudFormation - CoffeeFormation - Qiita\nCoffeeScript\u3067CloudFormation\u3092\u66f8\u3044\u3066\u3057\u307e\u304a\u3046\u3068\u3044\u3046\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3002\n\u4f55\u304c\u4e00\u756a\u5b09\u3057\u304b\u3068\u3044\u3046\u3068\u3001\u30b3\u30e1\u30f3\u30c8\u304c\u304b\u3051\u308b\uff01\uff01\nCloudFormation\u306fJSON\u5f62\u5f0f\u3067\u8a18\u8ff0\u3059\u308b\u305f\u3081\u3001\u30b3\u30e1\u30f3\u30c8\u304c\u66f8\u3051\u306a\u3044\u3093\u3067\u3059\u3088\u306d\u3002\nCoffeeFormation\u3092\u4f7f\u7528\u3059\u308c\u3070\u3001\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u308b\uff01\n\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u3092\u8003\u3048\u308b\u3068\u3001CoffeeFormation\u3092\u4f7f\u3046\u306e\u304c\u826f\u3044\u3067\u3059\u306d\u3002\nCloudFormation - CoffeeFormation - Qiita\n\u3053\u3061\u3089\u306b\u4f5c\u8005\u306e\u65b9\u304c\u3001Qiita\u306b\u66f8\u3044\u3066\u304f\u3060\u3055\u3063\u3066\u307e\u3059\u3002\n# \u30b3\u30e1\u30f3\u30c8\u66f8\u3051\u308b\uff01\nResources.Bucket=\n  Type: \"AWS::S3::Bucket\"\n  Properties:\n    BucketName: \"my-special-bucket\"\n\n\u3053\u3046\u304b\u304f\u3068\n{\n  \"AWSTemplateFormatVersion\": \"2010-09-09\",\n  \"Resources\": {\n    \"Bucket\": {\n      \"Type\": \"AWS::S3::Bucket\",\n      \"Properties\": {\n        \"BucketName\": \"my-special-bucket\"\n      }\n    }\n  }\n}\n\n\u3053\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3002\u3059\u3070\u3089\u3057\u3044\u3002\n\ntroposphere\ncloudtools/troposphere \u00b7 GitHub\n\u3053\u3061\u3089\u306f\u3001Python\u3092\u4f7f\u7528\u3057\u3066CloudFormation\u306eJSON\u3092\u751f\u6210\u3059\u308b\u3088\u3046\u3067\u3059\u3002\n>>> from troposphere import Ref, Template\n>>> import troposphere.ec2 as ec2\n>>> t = Template()\n>>> instance = ec2.Instance(\"myinstance\")\n>>> instance.ImageId = \"ami-951945d0\"\n>>> instance.InstanceType = \"t1.micro\"\n>>> t.add_resource(instance)\n<troposphere.ec2.Instance object at 0x101bf3390>\n>>> print(t.to_json())\n{\n    \"Resources\": {\n        \"myinstance\": {\n            \"Properties\": {\n                \"ImageId\": \"ami-951945d0\",\n                \"InstanceType\": \"t1.micro\"\n            },\n            \"Type\": \"AWS::EC2::Instance\"\n        }\n    }\n}\n\n\nCloudFormation \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\uff08\u516c\u5f0f\uff09\nAWS\u306e\u516c\u5f0f\u30b5\u30a4\u30c8\u306b\u3001CloudFormation\u306e\u5404\u7a2e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8 - AWS CloudFormation \uff08 \u8a2d\u5b9a\u7ba1\u7406 & \u30af\u30e9\u30a6\u30c9\u306e\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\uff09| \u30a2\u30de\u30be\u30f3 \u30a6\u30a7\u30d6 \u30b5\u30fc\u30d3\u30b9\uff08AWS \u65e5\u672c\u8a9e\uff09\n[AWS CloudFormation \uff08 \u8a2d\u5b9a\u7ba1\u7406 & \u30af\u30e9\u30a6\u30c9\u306e\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\uff09| \u30a2\u30de\u30be\u30f3 \u30a6\u30a7\u30d6 \u30b5\u30fc\u30d3\u30b9\uff08AWS \u65e5\u672c\u8a9e\uff09](http://aws.amazon.com/jp/cloudformation/)\n\nCloudFormation\u306f\u3068\u3066\u3082\u3088\u3044\u30c4\u30fc\u30eb\u3067\u3059\u304c\u30010\u30d9\u30fc\u30b9\u304b\u3089\u8a18\u8ff0\u3057\u3088\u3046\u3068\u601d\u3046\u3068\u3068\u3066\u3082\u5927\u5909\u3067\u3059\u3088\u306d\u3002\n\u3068\u3042\u308b\u7814\u4fee\u306b\u3066\u3001[AWS CloudFormation](http://aws.amazon.com/jp/cloudformation/)\u306e\u5468\u8fba\u30c4\u30fc\u30eb\u3092\u6559\u3048\u3066\u3082\u3089\u3063\u305f\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n# VisualOps\n[VisualOps](http://www.visualops.io/)\n![visualops.png](https://qiita-image-store.s3.amazonaws.com/0/18582/9840299e-e68e-6cc8-4435-f74d2ef96d8f.png)\n\nVisualOps\u306f\u3001GUI\u3092\u7528\u3044\u3066CloudFormation\u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u3001\u30ed\u30b0\u30a4\u30f3\u3092\u884c\u3046\u3068\u4ee5\u4e0b\u306e\u69d8\u306a\u7ba1\u7406\u753b\u9762\u3092\u8868\u793a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\uff08AWS\u30a2\u30ab\u30a6\u30f3\u30c8\u3068\u306e\u30d2\u30e2\u4ed8\u3092\u884c\u3046\u3068\u3001VisualOps\u304b\u3089\u76f4\u63a5AWS\u4e0a\u306bCloudFormation\u3092\u4f7f\u7528\u3057\u3066\u74b0\u5883\u3092\u69cb\u7bc9\u3067\u304d\u308b\u3088\u3046\u3067\u3059\uff09\n![visualops2.png](https://qiita-image-store.s3.amazonaws.com/0/18582/c2a200fa-bf34-b6ba-efb0-9de4de34c010.png)\n\n\u8a66\u3057\u306b\u3001\u30b5\u30f3\u30d7\u30eb\u3067\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u300csample-apache-hadoop-v1\u300d\u3092\u9078\u629e\u3057\u3066\u307f\u307e\u3059\u3002\n\n![visualops3.png](https://qiita-image-store.s3.amazonaws.com/0/18582/f69ceef7-eb52-756c-5f35-335b29ecba47.png)\n\n![visualops4.png](https://qiita-image-store.s3.amazonaws.com/0/18582/1000e889-f676-49e1-2db8-e1212caf1ee1.png)\n\n\u3053\u306e\u3088\u3046\u306b\u3001Hadoop\u306e\u69cb\u6210\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nExport\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u3001CloudFormation\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n![visualops5.png](https://qiita-image-store.s3.amazonaws.com/0/18582/b02118f6-4c65-3aba-e16a-c247bbbe6b07.png)\n\n```json:sample-apache-hadoop-v1.json\n{\n   \"AWSTemplateFormatVersion\":\"2010-09-09\",\n   \"Parameters\":{\n      \"KeyPair2DefaultKP\":{\n         \"Default\":\"KeyPair2DefaultKP\",\n         \"Type\":\"String\",\n         \"Description\":\"\"\n      },\n      \"VisualOpsStackVersion\":{\n         \"Default\":\"2014-02-17\",\n         \"Type\":\"String\",\n         \"Description\":\"\"\n      }\n   },\n   \"Description\":\"Cloudformation generated by VisualOps\",\n   \"Resources\":{\n      \"SecurityGroup2hmasters2Ingress23\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"FromPort\":\"8020\",\n            \"ToPort\":\"8020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2hmasters2Ingress22\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"FromPort\":\"9000\",\n            \"ToPort\":\"9000\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2hmasters2Ingress21\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"FromPort\":\"9000\",\n            \"ToPort\":\"9000\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2hmasters2Ingress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"FromPort\":\"8020\",\n            \"ToPort\":\"8020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2relay2Ingress22\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"FromPort\":\"0\",\n            \"ToPort\":\"65535\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"IpProtocol\":\"-1\"\n         }\n      },\n      \"SecurityGroup2relay2Ingress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"ToPort\":\"22\",\n            \"FromPort\":\"22\",\n            \"CidrIp\":\"0.0.0.0/0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2hmasters2IpPermissions22\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"FromPort\":\"8020\",\n            \"ToPort\":\"8020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2DefaultSG2Ingress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"ToPort\":\"22\",\n            \"FromPort\":\"22\",\n            \"CidrIp\":\"0.0.0.0/0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2DefaultSG2Ingress21\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"FromPort\":\"50070\",\n            \"ToPort\":\"50070\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2datanode2Ingress21\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"FromPort\":\"50020\",\n            \"ToPort\":\"50020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"VPC2vpc\":{\n         \"Type\":\"AWS::EC2::VPC\",\n         \"Properties\":{\n            \"CidrBlock\":\"10.0.0.0/16\",\n            \"EnableDnsSupport\":true,\n            \"InstanceTenancy\":\"default\",\n            \"EnableDnsHostnames\":false\n         }\n      },\n      \"SecurityGroup2DefaultSG2IpPermissionsEgress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"65535\",\n            \"FromPort\":\"0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"IpProtocol\":\"-1\"\n         }\n      },\n      \"Instance2NAT\":{\n         \"Type\":\"AWS::EC2::Instance\",\n         \"Properties\":{\n            \"Monitoring\":\"true\",\n            \"ImageId\":\"ami-bba18dd2\",\n            \"BlockDeviceMappings\":[\n               {\n                  \"DeviceName\":\"/dev/sda1\",\n                  \"Ebs\":{\n                     \"SnapshotId\":\"snap-b4ef17a9\",\n                     \"VolumeSize\":8,\n                     \"VolumeType\":\"standard\"\n                  }\n               }\n            ],\n            \"KeyName\":{\n               \"Ref\":\"KeyPair2DefaultKP\"\n            },\n            \"InstanceType\":\"t1.micro\",\n            \"NetworkInterfaces\":[\n               {\n                  \"SubnetId\":{\n                     \"Ref\":\"Subnet2subnet2\"\n                  },\n                  \"DeviceIndex\":\"0\",\n                  \"GroupSet\":[\n                     {\n                        \"Ref\":\"SecurityGroup2relay\"\n                     }\n                  ],\n                  \"PrivateIpAddresses\":[\n                     {\n                        \"Primary\":true,\n                        \"PrivateIpAddress\":\"10.0.2.4\"\n                     }\n                  ],\n                  \"AssociatePublicIpAddress\":true\n               }\n            ]\n         }\n      },\n      \"RouteTable2RT12RouteSet21\":{\n         \"Type\":\"AWS::EC2::Route\",\n         \"Properties\":{\n            \"GatewayId\":{\n               \"Ref\":\"InternetGateway2Internetgateway\"\n            },\n            \"DestinationCidrBlock\":\"0.0.0.0/0\",\n            \"RouteTableId\":{\n               \"Ref\":\"RouteTable2RT1\"\n            }\n         }\n      },\n      \"SecurityGroup2datanode2IpPermissions22\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"FromPort\":\"50020\",\n            \"ToPort\":\"50020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2datanode2IpPermissionsEgress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"8020\",\n            \"FromPort\":\"8020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"NetworkInterface2NameNodeeni0\":{\n         \"Type\":\"AWS::EC2::NetworkInterface\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet0\"\n            },\n            \"SourceDestCheck\":true,\n            \"GroupSet\":[\n               {\n                  \"Ref\":\"SecurityGroup2DefaultSG\"\n               },\n               {\n                  \"Ref\":\"SecurityGroup2hmasters\"\n               }\n            ],\n            \"PrivateIpAddresses\":[\n               {\n                  \"Primary\":true,\n                  \"PrivateIpAddress\":\"10.0.0.5\"\n               }\n            ]\n         }\n      },\n      \"SecurityGroup2hmasters2IpPermissionsEgress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"65535\",\n            \"FromPort\":\"0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"-1\",\n            \"CidrIp\":\"0.0.0.0/0\"\n         }\n      },\n      \"NetworkInterface2DataNodeGroupAeni0\":{\n         \"Type\":\"AWS::EC2::NetworkInterface\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet0\"\n            },\n            \"SourceDestCheck\":true,\n            \"GroupSet\":[\n               {\n                  \"Ref\":\"SecurityGroup2DefaultSG\"\n               },\n               {\n                  \"Ref\":\"SecurityGroup2datanode\"\n               }\n            ],\n            \"PrivateIpAddresses\":[\n               {\n                  \"Primary\":true,\n                  \"PrivateIpAddress\":\"10.0.0.4\"\n               }\n            ]\n         }\n      },\n      \"SecurityGroup2DefaultSG\":{\n         \"Type\":\"AWS::EC2::SecurityGroup\",\n         \"Properties\":{\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"GroupDescription\":\"Default Security Group\"\n         }\n      },\n      \"RouteTable2RT02RouteSet21\":{\n         \"Type\":\"AWS::EC2::Route\",\n         \"Properties\":{\n            \"DestinationCidrBlock\":\"0.0.0.0/0\",\n            \"NetworkInterfaceId\":{\n               \"Ref\":\"NetworkInterface2NATeni0\"\n            },\n            \"RouteTableId\":{\n               \"Ref\":\"RouteTable2RT0\"\n            }\n         }\n      },\n      \"SecurityGroup2datanode2Egress23\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"9000\",\n            \"FromPort\":\"9000\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2relay2Ingress21\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"ToPort\":\"80\",\n            \"FromPort\":\"80\",\n            \"CidrIp\":\"0.0.0.0/0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"NetworkInterface2DataNodeGroupCeni0\":{\n         \"Type\":\"AWS::EC2::NetworkInterface\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet3\"\n            },\n            \"SourceDestCheck\":true,\n            \"GroupSet\":[\n               {\n                  \"Ref\":\"SecurityGroup2DefaultSG\"\n               },\n               {\n                  \"Ref\":\"SecurityGroup2datanode\"\n               }\n            ],\n            \"PrivateIpAddresses\":[\n               {\n                  \"Primary\":true,\n                  \"PrivateIpAddress\":\"10.0.3.4\"\n               }\n            ]\n         }\n      },\n      \"SecurityGroup2relay2Egress21\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"50070\",\n            \"FromPort\":\"50070\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2relay2Egress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"65535\",\n            \"FromPort\":\"0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"IpProtocol\":\"-1\",\n            \"CidrIp\":\"0.0.0.0/0\"\n         }\n      },\n      \"SecurityGroup2DefaultSG2IpPermissions22\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"FromPort\":\"50070\",\n            \"ToPort\":\"50070\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"NetworkInterface2DataNodeGroupBeni0\":{\n         \"Type\":\"AWS::EC2::NetworkInterface\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet1\"\n            },\n            \"SourceDestCheck\":true,\n            \"GroupSet\":[\n               {\n                  \"Ref\":\"SecurityGroup2DefaultSG\"\n               },\n               {\n                  \"Ref\":\"SecurityGroup2datanode\"\n               }\n            ],\n            \"PrivateIpAddresses\":[\n               {\n                  \"Primary\":true,\n                  \"PrivateIpAddress\":\"10.0.1.4\"\n               }\n            ]\n         }\n      },\n      \"Subnet2subnet2\":{\n         \"Type\":\"AWS::EC2::Subnet\",\n         \"Properties\":{\n            \"Tags\":[\n\n            ],\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"CidrBlock\":\"10.0.2.0/24\",\n            \"AvailabilityZone\":\"us-east-1a\"\n         }\n      },\n      \"Subnet2subnet3\":{\n         \"Type\":\"AWS::EC2::Subnet\",\n         \"Properties\":{\n            \"Tags\":[\n\n            ],\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"CidrBlock\":\"10.0.3.0/24\",\n            \"AvailabilityZone\":\"us-east-1d\"\n         }\n      },\n      \"Subnet2subnet0\":{\n         \"Type\":\"AWS::EC2::Subnet\",\n         \"Properties\":{\n            \"Tags\":[\n\n            ],\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"CidrBlock\":\"10.0.0.0/24\",\n            \"AvailabilityZone\":\"us-east-1a\"\n         }\n      },\n      \"Subnet2subnet1\":{\n         \"Type\":\"AWS::EC2::Subnet\",\n         \"Properties\":{\n            \"Tags\":[\n\n            ],\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"CidrBlock\":\"10.0.1.0/24\",\n            \"AvailabilityZone\":\"us-east-1b\"\n         }\n      },\n      \"Instance2DataNodeGroupB\":{\n         \"Type\":\"AWS::EC2::Instance\",\n         \"Properties\":{\n            \"Monitoring\":\"true\",\n            \"ImageId\":\"ami-bba18dd2\",\n            \"BlockDeviceMappings\":[\n               {\n                  \"DeviceName\":\"/dev/sda1\",\n                  \"Ebs\":{\n                     \"SnapshotId\":\"snap-b4ef17a9\",\n                     \"VolumeSize\":8,\n                     \"VolumeType\":\"standard\"\n                  }\n               }\n            ],\n            \"KeyName\":{\n               \"Ref\":\"KeyPair2DefaultKP\"\n            },\n            \"InstanceType\":\"t1.micro\",\n            \"NetworkInterfaces\":[\n               {\n                  \"DeviceIndex\":\"0\",\n                  \"NetworkInterfaceId\":{\n                     \"Ref\":\"NetworkInterface2DataNodeGroupBeni0\"\n                  }\n               }\n            ]\n         }\n      },\n      \"NetworkAcl2DefaultACL2AssociationSet22\":{\n         \"Type\":\"AWS::EC2::SubnetNetworkAclAssociation\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet0\"\n            },\n            \"NetworkAclId\":{\n               \"Ref\":\"NetworkAcl2DefaultACL\"\n            }\n         }\n      },\n      \"NetworkAcl2DefaultACL2AssociationSet23\":{\n         \"Type\":\"AWS::EC2::SubnetNetworkAclAssociation\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet2\"\n            },\n            \"NetworkAclId\":{\n               \"Ref\":\"NetworkAcl2DefaultACL\"\n            }\n         }\n      },\n      \"NetworkAcl2DefaultACL2AssociationSet20\":{\n         \"Type\":\"AWS::EC2::SubnetNetworkAclAssociation\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet3\"\n            },\n            \"NetworkAclId\":{\n               \"Ref\":\"NetworkAcl2DefaultACL\"\n            }\n         }\n      },\n      \"NetworkAcl2DefaultACL2AssociationSet21\":{\n         \"Type\":\"AWS::EC2::SubnetNetworkAclAssociation\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet1\"\n            },\n            \"NetworkAclId\":{\n               \"Ref\":\"NetworkAcl2DefaultACL\"\n            }\n         }\n      },\n      \"NetworkAcl2DefaultACL\":{\n         \"Type\":\"AWS::EC2::NetworkAcl\",\n         \"Properties\":{\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"Tags\":[\n\n            ]\n         }\n      },\n      \"Instance2NameNode\":{\n         \"Type\":\"AWS::EC2::Instance\",\n         \"Properties\":{\n            \"Monitoring\":\"true\",\n            \"ImageId\":\"ami-bba18dd2\",\n            \"BlockDeviceMappings\":[\n               {\n                  \"DeviceName\":\"/dev/sda1\",\n                  \"Ebs\":{\n                     \"SnapshotId\":\"snap-b4ef17a9\",\n                     \"VolumeSize\":8,\n                     \"VolumeType\":\"standard\"\n                  }\n               }\n            ],\n            \"KeyName\":{\n               \"Ref\":\"KeyPair2DefaultKP\"\n            },\n            \"InstanceType\":\"t1.micro\",\n            \"NetworkInterfaces\":[\n               {\n                  \"DeviceIndex\":\"0\",\n                  \"NetworkInterfaceId\":{\n                     \"Ref\":\"NetworkInterface2NameNodeeni0\"\n                  }\n               }\n            ]\n         }\n      },\n      \"Instance2DataNodeGroupC\":{\n         \"Type\":\"AWS::EC2::Instance\",\n         \"Properties\":{\n            \"Monitoring\":\"true\",\n            \"ImageId\":\"ami-bba18dd2\",\n            \"BlockDeviceMappings\":[\n               {\n                  \"DeviceName\":\"/dev/sda1\",\n                  \"Ebs\":{\n                     \"SnapshotId\":\"snap-b4ef17a9\",\n                     \"VolumeSize\":8,\n                     \"VolumeType\":\"standard\"\n                  }\n               }\n            ],\n            \"KeyName\":{\n               \"Ref\":\"KeyPair2DefaultKP\"\n            },\n            \"InstanceType\":\"t1.micro\",\n            \"NetworkInterfaces\":[\n               {\n                  \"DeviceIndex\":\"0\",\n                  \"NetworkInterfaceId\":{\n                     \"Ref\":\"NetworkInterface2DataNodeGroupCeni0\"\n                  }\n               }\n            ]\n         }\n      },\n      \"SecurityGroup2relay\":{\n         \"Type\":\"AWS::EC2::SecurityGroup\",\n         \"Properties\":{\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"GroupDescription\":\"Custom Security Group\"\n         }\n      },\n      \"NetworkInterface2SecondaryNameNodeeni0\":{\n         \"Type\":\"AWS::EC2::NetworkInterface\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet1\"\n            },\n            \"SourceDestCheck\":true,\n            \"GroupSet\":[\n               {\n                  \"Ref\":\"SecurityGroup2DefaultSG\"\n               },\n               {\n                  \"Ref\":\"SecurityGroup2hmasters\"\n               }\n            ],\n            \"PrivateIpAddresses\":[\n               {\n                  \"Primary\":true,\n                  \"PrivateIpAddress\":\"10.0.1.5\"\n               }\n            ]\n         }\n      },\n      \"SecurityGroup2hmasters\":{\n         \"Type\":\"AWS::EC2::SecurityGroup\",\n         \"Properties\":{\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"GroupDescription\":\"Custom Security Group\"\n         }\n      },\n      \"NetworkAcl2DefaultACL2EntrySet20\":{\n         \"Type\":\"AWS::EC2::NetworkAclEntry\",\n         \"Properties\":{\n            \"NetworkAclId\":{\n               \"Ref\":\"NetworkAcl2DefaultACL\"\n            },\n            \"RuleNumber\":100,\n            \"Protocol\":-1,\n            \"PortRange\":{\n               \"To\":\"\",\n               \"From\":\"\"\n            },\n            \"Egress\":true,\n            \"RuleAction\":\"allow\",\n            \"Icmp\":{\n               \"Code\":\"\",\n               \"Type\":\"\"\n            },\n            \"CidrBlock\":\"0.0.0.0/0\"\n         }\n      },\n      \"Instance2SecondaryNameNode\":{\n         \"Type\":\"AWS::EC2::Instance\",\n         \"Properties\":{\n            \"Monitoring\":\"true\",\n            \"ImageId\":\"ami-bba18dd2\",\n            \"BlockDeviceMappings\":[\n               {\n                  \"DeviceName\":\"/dev/sda1\",\n                  \"Ebs\":{\n                     \"SnapshotId\":\"snap-b4ef17a9\",\n                     \"VolumeSize\":8,\n                     \"VolumeType\":\"standard\"\n                  }\n               }\n            ],\n            \"KeyName\":{\n               \"Ref\":\"KeyPair2DefaultKP\"\n            },\n            \"InstanceType\":\"t1.micro\",\n            \"NetworkInterfaces\":[\n               {\n                  \"DeviceIndex\":\"0\",\n                  \"NetworkInterfaceId\":{\n                     \"Ref\":\"NetworkInterface2SecondaryNameNodeeni0\"\n                  }\n               }\n            ]\n         }\n      },\n      \"SecurityGroup2relay2IpPermissionsEgress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"50070\",\n            \"FromPort\":\"50070\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2hmasters2Egress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"8020\",\n            \"FromPort\":\"8020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2hmasters2Egress21\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"9000\",\n            \"FromPort\":\"9000\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2hmasters2Egress22\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"65535\",\n            \"FromPort\":\"0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2hmasters\"\n            },\n            \"IpProtocol\":\"-1\",\n            \"CidrIp\":\"0.0.0.0/0\"\n         }\n      },\n      \"RouteTable2RT12AssociationSet20\":{\n         \"Type\":\"AWS::EC2::SubnetRouteTableAssociation\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet2\"\n            },\n            \"RouteTableId\":{\n               \"Ref\":\"RouteTable2RT1\"\n            }\n         }\n      },\n      \"SecurityGroup2datanode2Egress24\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"8020\",\n            \"FromPort\":\"8020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"Instance2DataNodeGroupA\":{\n         \"Type\":\"AWS::EC2::Instance\",\n         \"Properties\":{\n            \"Monitoring\":\"true\",\n            \"ImageId\":\"ami-bba18dd2\",\n            \"BlockDeviceMappings\":[\n               {\n                  \"DeviceName\":\"/dev/sda1\",\n                  \"Ebs\":{\n                     \"SnapshotId\":\"snap-b4ef17a9\",\n                     \"VolumeSize\":8,\n                     \"VolumeType\":\"standard\"\n                  }\n               }\n            ],\n            \"KeyName\":{\n               \"Ref\":\"KeyPair2DefaultKP\"\n            },\n            \"InstanceType\":\"t1.micro\",\n            \"NetworkInterfaces\":[\n               {\n                  \"DeviceIndex\":\"0\",\n                  \"NetworkInterfaceId\":{\n                     \"Ref\":\"NetworkInterface2DataNodeGroupAeni0\"\n                  }\n               }\n            ]\n         }\n      },\n      \"SecurityGroup2datanode2Egress22\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"65535\",\n            \"FromPort\":\"0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"-1\",\n            \"CidrIp\":\"0.0.0.0/0\"\n         }\n      },\n      \"SecurityGroup2datanode2Egress21\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"50020\",\n            \"FromPort\":\"50020\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"SecurityGroup2datanode2Egress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"50010\",\n            \"FromPort\":\"50010\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"RouteTable2RT02AssociationSet23\":{\n         \"Type\":\"AWS::EC2::SubnetRouteTableAssociation\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet1\"\n            },\n            \"RouteTableId\":{\n               \"Ref\":\"RouteTable2RT0\"\n            }\n         }\n      },\n      \"RouteTable2RT02AssociationSet22\":{\n         \"Type\":\"AWS::EC2::SubnetRouteTableAssociation\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet0\"\n            },\n            \"RouteTableId\":{\n               \"Ref\":\"RouteTable2RT0\"\n            }\n         }\n      },\n      \"RouteTable2RT1\":{\n         \"Type\":\"AWS::EC2::RouteTable\",\n         \"Properties\":{\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"Tags\":[\n\n            ]\n         }\n      },\n      \"SecurityGroup2DefaultSG2Egress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupEgress\",\n         \"Properties\":{\n            \"ToPort\":\"65535\",\n            \"FromPort\":\"0\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"DestinationSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2DefaultSG\"\n            },\n            \"IpProtocol\":\"-1\"\n         }\n      },\n      \"RouteTable2RT02AssociationSet24\":{\n         \"Type\":\"AWS::EC2::SubnetRouteTableAssociation\",\n         \"Properties\":{\n            \"SubnetId\":{\n               \"Ref\":\"Subnet2subnet3\"\n            },\n            \"RouteTableId\":{\n               \"Ref\":\"RouteTable2RT0\"\n            }\n         }\n      },\n      \"NetworkAcl2DefaultACL2EntrySet22\":{\n         \"Type\":\"AWS::EC2::NetworkAclEntry\",\n         \"Properties\":{\n            \"NetworkAclId\":{\n               \"Ref\":\"NetworkAcl2DefaultACL\"\n            },\n            \"RuleNumber\":100,\n            \"Protocol\":-1,\n            \"PortRange\":{\n               \"To\":\"\",\n               \"From\":\"\"\n            },\n            \"RuleAction\":\"allow\",\n            \"Icmp\":{\n               \"Code\":\"\",\n               \"Type\":\"\"\n            },\n            \"CidrBlock\":\"0.0.0.0/0\"\n         }\n      },\n      \"RouteTable2RT0\":{\n         \"Type\":\"AWS::EC2::RouteTable\",\n         \"Properties\":{\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"Tags\":[\n\n            ]\n         }\n      },\n      \"SecurityGroup2datanode2Ingress20\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"FromPort\":\"50010\",\n            \"ToPort\":\"50010\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2datanode\"\n            },\n            \"IpProtocol\":\"tcp\"\n         }\n      },\n      \"AttachInternetGateway\":{\n         \"Type\":\"AWS::EC2::VPCGatewayAttachment\",\n         \"Properties\":{\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"InternetGatewayId\":{\n               \"Ref\":\"InternetGateway2Internetgateway\"\n            }\n         }\n      },\n      \"SecurityGroup2datanode\":{\n         \"Type\":\"AWS::EC2::SecurityGroup\",\n         \"Properties\":{\n            \"VpcId\":{\n               \"Ref\":\"VPC2vpc\"\n            },\n            \"GroupDescription\":\"Custom Security Group\"\n         }\n      },\n      \"SecurityGroup2relay2IpPermissions22\":{\n         \"Type\":\"AWS::EC2::SecurityGroupIngress\",\n         \"Properties\":{\n            \"SourceSecurityGroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"FromPort\":\"0\",\n            \"ToPort\":\"65535\",\n            \"GroupId\":{\n               \"Ref\":\"SecurityGroup2relay\"\n            },\n            \"IpProtocol\":\"-1\"\n         }\n      },\n      \"InternetGateway2Internetgateway\":{\n         \"Type\":\"AWS::EC2::InternetGateway\",\n         \"Properties\":{\n\n         }\n      }\n   }\n}\n```\n\n\u56f3\u3068\u3057\u3066\u4fdd\u5b58\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u306e\u3067\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u8a08\u3092VisualOps\u3092\u4f7f\u3063\u3066\u4f5c\u6210\u3057\u3001CloudFormation\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b\u3068\u3044\u3063\u305f\u4f7f\u3044\u65b9\u304c\u826f\u3044\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\n\n# CoffeeFormation\n[j3tm0t0/csfn](https://github.com/j3tm0t0/csfn)\n[CloudFormation - CoffeeFormation - Qiita](http://qiita.com/j3tm0t0/items/37af51dbe302ad46ad7a)\n\nCoffeeScript\u3067CloudFormation\u3092\u66f8\u3044\u3066\u3057\u307e\u304a\u3046\u3068\u3044\u3046\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3002\n\u4f55\u304c\u4e00\u756a\u5b09\u3057\u304b\u3068\u3044\u3046\u3068\u3001\u30b3\u30e1\u30f3\u30c8\u304c\u304b\u3051\u308b\uff01\uff01\n\nCloudFormation\u306fJSON\u5f62\u5f0f\u3067\u8a18\u8ff0\u3059\u308b\u305f\u3081\u3001\u30b3\u30e1\u30f3\u30c8\u304c\u66f8\u3051\u306a\u3044\u3093\u3067\u3059\u3088\u306d\u3002\nCoffeeFormation\u3092\u4f7f\u7528\u3059\u308c\u3070\u3001\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u308b\uff01\n\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u3092\u8003\u3048\u308b\u3068\u3001CoffeeFormation\u3092\u4f7f\u3046\u306e\u304c\u826f\u3044\u3067\u3059\u306d\u3002\n\n[CloudFormation - CoffeeFormation - Qiita](http://qiita.com/j3tm0t0/items/37af51dbe302ad46ad7a)\n\u3053\u3061\u3089\u306b\u4f5c\u8005\u306e\u65b9\u304c\u3001Qiita\u306b\u66f8\u3044\u3066\u304f\u3060\u3055\u3063\u3066\u307e\u3059\u3002\n\n```coffeescript\n# \u30b3\u30e1\u30f3\u30c8\u66f8\u3051\u308b\uff01\nResources.Bucket=\n  Type: \"AWS::S3::Bucket\"\n  Properties:\n    BucketName: \"my-special-bucket\"\n```\n\n\u3053\u3046\u304b\u304f\u3068\n\n```json\n{\n  \"AWSTemplateFormatVersion\": \"2010-09-09\",\n  \"Resources\": {\n    \"Bucket\": {\n      \"Type\": \"AWS::S3::Bucket\",\n      \"Properties\": {\n        \"BucketName\": \"my-special-bucket\"\n      }\n    }\n  }\n}\n```\n\n\u3053\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3002\u3059\u3070\u3089\u3057\u3044\u3002\n\n# troposphere\n[cloudtools/troposphere \u00b7 GitHub](https://github.com/cloudtools/troposphere)\n\n\u3053\u3061\u3089\u306f\u3001Python\u3092\u4f7f\u7528\u3057\u3066CloudFormation\u306eJSON\u3092\u751f\u6210\u3059\u308b\u3088\u3046\u3067\u3059\u3002\n\n```pycon\n>>> from troposphere import Ref, Template\n>>> import troposphere.ec2 as ec2\n>>> t = Template()\n>>> instance = ec2.Instance(\"myinstance\")\n>>> instance.ImageId = \"ami-951945d0\"\n>>> instance.InstanceType = \"t1.micro\"\n>>> t.add_resource(instance)\n<troposphere.ec2.Instance object at 0x101bf3390>\n>>> print(t.to_json())\n{\n    \"Resources\": {\n        \"myinstance\": {\n            \"Properties\": {\n                \"ImageId\": \"ami-951945d0\",\n                \"InstanceType\": \"t1.micro\"\n            },\n            \"Type\": \"AWS::EC2::Instance\"\n        }\n    }\n}\n```\n\n\n# CloudFormation \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\uff08\u516c\u5f0f\uff09\nAWS\u306e\u516c\u5f0f\u30b5\u30a4\u30c8\u306b\u3001CloudFormation\u306e\u5404\u7a2e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n[\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8 - AWS CloudFormation \uff08 \u8a2d\u5b9a\u7ba1\u7406 & \u30af\u30e9\u30a6\u30c9\u306e\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\uff09| \u30a2\u30de\u30be\u30f3 \u30a6\u30a7\u30d6 \u30b5\u30fc\u30d3\u30b9\uff08AWS \u65e5\u672c\u8a9e\uff09](http://aws.amazon.com/jp/cloudformation/aws-cloudformation-templates/)\n"}