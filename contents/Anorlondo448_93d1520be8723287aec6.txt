{"context": "\n\n\u306f\u3058\u3081\u306b\nRuby on Rails \u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u65e5\u672c\u8a9e\u8a33\u7248(\u7b2c4\u7248)\u306e\u7b2c9\u7ae0\u306b\u3066\u3001\u300c\u30c6\u30b9\u30c8\u5185\u3067\u306f cookies \u30e1\u30bd\u30c3\u30c9\u306b\u30b7\u30f3\u30dc\u30eb\u304c\u4f7f\u7528\u3067\u304d\u306a\u3044\u300d\u554f\u984c\u304c\u3042\u308b\u3068\u306e\u8a18\u8ff0\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\n\u5b9f\u306f\u3082\u3046\uff11\u3064\u5730\u5473\u306a\u554f\u984c\u304c\u3042\u308a\u307e\u3059 (\u7b46\u8005\u306f\u3053\u308c\u3067\u4f55\u6642\u9593\u3082\u8e93\u3044\u3066\u3057\u307e\u3044\u307e\u3057\u305f...)\u3002\u30c6\u30b9\u30c8\u5185\u3067\u306fcookies\u30e1\u30bd\u30c3\u30c9\u306b\u30b7\u30f3\u30dc\u30eb\u3092\u4f7f\u7528\u3067\u304d\u306a\u3044\u3001\u3068\u3044\u3046\u554f\u984c\u3067\u3059\u3002\u305d\u306e\u305f\u3081\u3001\ncookies[:remember_token]\n\n\u4e0a\u306e\u30b3\u30fc\u30c9\u306f\u5e38\u306bnil\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002 \u3042\u308a\u304c\u305f\u3044\u3053\u3068\u306b\u3001\u6587\u5b57\u5217\u30ad\u30fc\u306a\u3089cookies\u3067\u4f7f\u7528\u3067\u304d\u308b\u306e\u3067\u3001\ncookies['remember_token']\n\n\u4e0a\u306e\u3088\u3046\u306b\u66f8\u3051\u3070\u671f\u5f85\u3069\u304a\u308a\u306b\u5024\u304c\u8fd4\u3055\u308c\u307e\u3059\u3002\nRuby on Rails\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u65e5\u672c\u8a9e\u8a33\u7248\u7b2c4\u7248 9.3.1 [Remember me] \u30dc\u30c3\u30af\u30b9\u3092\u30c6\u30b9\u30c8\u3059\u308b \u3088\u308a\u5f15\u7528\nhttps://railstutorial.jp/chapters/advanced_login?version=5.0#sec-testing_the_remember_me_box\n\n\u3053\u308c\u304c\u306a\u305c\u306a\u306e\u304b\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u3002\n\ncookies \u30e1\u30bd\u30c3\u30c9\u306f\u4f55\u8005\u306a\u306e\u304b\uff1f\n\nRails\u4e0a\u3067\u306f\u4f55\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306a\u306e\u304b\uff1f\n\u307e\u305a\u3001 web-console \u3067\u898b\u3066\u307f\u307e\u3059\u3002\nclass StaticPagesController < ApplicationController\n\n  def home\n+   console\n  end\n\n\nActionDispatch::Cookies::CookieJar \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3059\u3002\nString\u3001Symbol\u306e\u4e21\u65b9\u306e\u30ad\u30fc\u3067value\u306b\u30a2\u30af\u30bb\u30b9\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u4e0a\u3067\u306f\u4f55\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306a\u306e\u304b\uff1f\n\u6b21\u306b\u3001\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u3067 binding.pry \u3092\u3057\u3066\u8abf\u3079\u3066\u307f\u307e\u3059\u3002\n  test \"login with remembering\" do\n    log_in_as(@user, remember_me: '1')\n+   binding.pry\n    assert_equal cookies['remember_token'], assigns(:user).remember_token\n  end\n\n$ rails test test/integration/users_login_test.rb\nRun options: --seed 11138\n\n# Running:\n\n\nFrom: test/integration/users_login_test.rb @ line 43 UsersLoginTest#test_login_with_remembering:\n\n    40: test \"login with remembering\" do\n    41:   log_in_as(@user, remember_me: '1')\n    42:   binding.pry\n => 43:   assert_equal cookies['remember_token'], assigns(:user).remember_token\n    44: end\n\n[1] pry(#<UsersLoginTest>)> cookies.class\n=> Rack::Test::CookieJar\n[2] pry(#<UsersLoginTest>)> cookies['remember_token']\n=> \"xosbwurfBfRnYu5Y5XBjpA\"\n[3] pry(#<UsersLoginTest>)> cookies[:remember_token]\n=> nil\n\n\u3053\u3061\u3089\u306f Rack::Test::CookieJar \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3059\u3002\n\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306e\u901a\u308a\u3001Symbol\u3067\u306fvalue\u306b\u30a2\u30af\u30bb\u30b9\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n\nActionDispatch::Cookies::CookieJar \u3092\u8abf\u3079\u308b\nhttps://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/cookies.rb#L315L317\ndef [](name)\n  @cookies[name.to_s]\nend\n\n[] \u30e1\u30bd\u30c3\u30c9\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u3066\u3001\u5f15\u6570 name \u3092 to_s\u3057\u3066\u5fc5\u305aString\u306b\u76f4\u3059\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u3067\nString\u3001Symbol\u4e21\u65b9\u3067value\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u308b\u3093\u3067\u3059\u306d\u3002\n\nRack::Test::CookieJar \u3092\u8abf\u3079\u308b\n\u4e00\u65b9\u3001\u3053\u3061\u3089\u306f\u3069\u3046\u3067\u3057\u3087\u3046\u304b\uff1f\nhttps://github.com/brynary/rack-test/blob/master/lib/rack/test/cookie_jar.rb#L108-L112\ndef [](name)\n  cookies = hash_for(nil)\n  # TODO: Should be case insensitive\n  cookies[name] && cookies[name].value\nend\n\n\u3053\u3061\u3089\u3082 [] \u30e1\u30bd\u30c3\u30c9\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u3066\u307e\u3059\u304c\u3001\u5f15\u6570 name \u3092 to_s \u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\n\u307e\u3068\u3081\n\nrails\u3068rack-test\u3067 [] \u30e1\u30bd\u30c3\u30c9\u306e\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u306e\u4ed5\u65b9\u304c\u7570\u306a\u308b\u305f\u3081\u3001\u4f7f\u3048\u308b\u5f15\u6570\u306e\u7a2e\u985e\u304c\u7570\u306a\u3063\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u3002\nrack-test\u3067\u3082\u3001 name.to_s \u3068\u3059\u308c\u3070\u52d5\u304d\u305d\u3046\u3002\n\u3069\u3063\u3061\u306e\u3084\u308a\u65b9\u304c\u6b63\u3057\u3044\u304b\u308f\u304b\u3089\u306a\u3044\u304c\u3001\u30a4\u30e1\u30fc\u30b8\u7684\u306brails\u304c\u89aa\u5207\u3059\u304e\u308b\uff1f\n\n\n\u611f\u60f3\n\n\u3053\u3046\u3044\u3046\u5185\u5bb9\u3053\u305d\u3001\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u5185\u3067\u6df1\u6398\u308a\u3057\u3066\u6b32\u3057\u3044\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\n# \u306f\u3058\u3081\u306b\n\n[Ruby on Rails \u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u65e5\u672c\u8a9e\u8a33\u7248(\u7b2c4\u7248)](https://railstutorial.jp/)\u306e\u7b2c9\u7ae0\u306b\u3066\u3001\u300c\u30c6\u30b9\u30c8\u5185\u3067\u306f `cookies` \u30e1\u30bd\u30c3\u30c9\u306b\u30b7\u30f3\u30dc\u30eb\u304c\u4f7f\u7528\u3067\u304d\u306a\u3044\u300d\u554f\u984c\u304c\u3042\u308b\u3068\u306e\u8a18\u8ff0\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\n\n> \u5b9f\u306f\u3082\u3046\uff11\u3064\u5730\u5473\u306a\u554f\u984c\u304c\u3042\u308a\u307e\u3059 (\u7b46\u8005\u306f\u3053\u308c\u3067\u4f55\u6642\u9593\u3082\u8e93\u3044\u3066\u3057\u307e\u3044\u307e\u3057\u305f...)\u3002\u30c6\u30b9\u30c8\u5185\u3067\u306fcookies\u30e1\u30bd\u30c3\u30c9\u306b\u30b7\u30f3\u30dc\u30eb\u3092\u4f7f\u7528\u3067\u304d\u306a\u3044\u3001\u3068\u3044\u3046\u554f\u984c\u3067\u3059\u3002\u305d\u306e\u305f\u3081\u3001\n>\n> ```rb\n> cookies[:remember_token]\n> ```\n>\n> \u4e0a\u306e\u30b3\u30fc\u30c9\u306f\u5e38\u306bnil\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002 \u3042\u308a\u304c\u305f\u3044\u3053\u3068\u306b\u3001\u6587\u5b57\u5217\u30ad\u30fc\u306a\u3089cookies\u3067\u4f7f\u7528\u3067\u304d\u308b\u306e\u3067\u3001\n> \n> ```rb\n> cookies['remember_token']\n> ```\n> \n> \u4e0a\u306e\u3088\u3046\u306b\u66f8\u3051\u3070\u671f\u5f85\u3069\u304a\u308a\u306b\u5024\u304c\u8fd4\u3055\u308c\u307e\u3059\u3002\n>\n> Ruby on Rails\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u65e5\u672c\u8a9e\u8a33\u7248\u7b2c4\u7248 9.3.1 [Remember me] \u30dc\u30c3\u30af\u30b9\u3092\u30c6\u30b9\u30c8\u3059\u308b \u3088\u308a\u5f15\u7528\n> https://railstutorial.jp/chapters/advanced_login?version=5.0#sec-testing_the_remember_me_box\n\n\u3053\u308c\u304c\u306a\u305c\u306a\u306e\u304b\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u3002\n\n# cookies \u30e1\u30bd\u30c3\u30c9\u306f\u4f55\u8005\u306a\u306e\u304b\uff1f\n\n## Rails\u4e0a\u3067\u306f\u4f55\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306a\u306e\u304b\uff1f\n\n\u307e\u305a\u3001 `web-console` \u3067\u898b\u3066\u307f\u307e\u3059\u3002\n\n```diff\nclass StaticPagesController < ApplicationController\n\n  def home\n+   console\n  end\n```\n\n![web-console.png](https://qiita-image-store.s3.amazonaws.com/0/15187/4a14a45f-3fc8-dd82-0e65-83eaf6f23aa7.png)\n\n\n`ActionDispatch::Cookies::CookieJar` \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3059\u3002\nString\u3001Symbol\u306e\u4e21\u65b9\u306e\u30ad\u30fc\u3067value\u306b\u30a2\u30af\u30bb\u30b9\u304c\u3067\u304d\u307e\u3059\u3002\n\n## \u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u4e0a\u3067\u306f\u4f55\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306a\u306e\u304b\uff1f\n\n\u6b21\u306b\u3001\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u3067 `binding.pry` \u3092\u3057\u3066\u8abf\u3079\u3066\u307f\u307e\u3059\u3002\n\n```diff\n  test \"login with remembering\" do\n    log_in_as(@user, remember_me: '1')\n+   binding.pry\n    assert_equal cookies['remember_token'], assigns(:user).remember_token\n  end\n```\n\n```sh\n$ rails test test/integration/users_login_test.rb\nRun options: --seed 11138\n\n# Running:\n\n\nFrom: test/integration/users_login_test.rb @ line 43 UsersLoginTest#test_login_with_remembering:\n\n    40: test \"login with remembering\" do\n    41:   log_in_as(@user, remember_me: '1')\n    42:   binding.pry\n => 43:   assert_equal cookies['remember_token'], assigns(:user).remember_token\n    44: end\n\n[1] pry(#<UsersLoginTest>)> cookies.class\n=> Rack::Test::CookieJar\n[2] pry(#<UsersLoginTest>)> cookies['remember_token']\n=> \"xosbwurfBfRnYu5Y5XBjpA\"\n[3] pry(#<UsersLoginTest>)> cookies[:remember_token]\n=> nil\n```\n\n\u3053\u3061\u3089\u306f `Rack::Test::CookieJar` \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3059\u3002\n\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306e\u901a\u308a\u3001Symbol\u3067\u306fvalue\u306b\u30a2\u30af\u30bb\u30b9\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n\n# ActionDispatch::Cookies::CookieJar \u3092\u8abf\u3079\u308b\n\nhttps://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/cookies.rb#L315L317\n\n```rb\ndef [](name)\n  @cookies[name.to_s]\nend\n```\n\n`[]` \u30e1\u30bd\u30c3\u30c9\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u3066\u3001\u5f15\u6570 `name` \u3092 `to_s`\u3057\u3066\u5fc5\u305aString\u306b\u76f4\u3059\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u3067\nString\u3001Symbol\u4e21\u65b9\u3067value\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u308b\u3093\u3067\u3059\u306d\u3002\n\n# Rack::Test::CookieJar \u3092\u8abf\u3079\u308b\n\n\u4e00\u65b9\u3001\u3053\u3061\u3089\u306f\u3069\u3046\u3067\u3057\u3087\u3046\u304b\uff1f\n\nhttps://github.com/brynary/rack-test/blob/master/lib/rack/test/cookie_jar.rb#L108-L112\n\n```rb\ndef [](name)\n  cookies = hash_for(nil)\n  # TODO: Should be case insensitive\n  cookies[name] && cookies[name].value\nend\n```\n\n\u3053\u3061\u3089\u3082 `[]` \u30e1\u30bd\u30c3\u30c9\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u3066\u307e\u3059\u304c\u3001\u5f15\u6570 `name` \u3092 `to_s` \u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\n## \u307e\u3068\u3081\n\n* rails\u3068rack-test\u3067 `[]` \u30e1\u30bd\u30c3\u30c9\u306e\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u306e\u4ed5\u65b9\u304c\u7570\u306a\u308b\u305f\u3081\u3001\u4f7f\u3048\u308b\u5f15\u6570\u306e\u7a2e\u985e\u304c\u7570\u306a\u3063\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u3002\n* rack-test\u3067\u3082\u3001 `name.to_s` \u3068\u3059\u308c\u3070\u52d5\u304d\u305d\u3046\u3002\n* \u3069\u3063\u3061\u306e\u3084\u308a\u65b9\u304c\u6b63\u3057\u3044\u304b\u308f\u304b\u3089\u306a\u3044\u304c\u3001\u30a4\u30e1\u30fc\u30b8\u7684\u306brails\u304c\u89aa\u5207\u3059\u304e\u308b\uff1f\n\n## \u611f\u60f3\n\n* \u3053\u3046\u3044\u3046\u5185\u5bb9\u3053\u305d\u3001\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u5185\u3067\u6df1\u6398\u308a\u3057\u3066\u6b32\u3057\u3044\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\n", "tags": ["Rails", "rails\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb", "Ruby"]}