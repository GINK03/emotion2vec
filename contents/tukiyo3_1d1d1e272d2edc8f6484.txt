{"context": " More than 1 year has passed since last update.\n\n\u53c2\u8003\n\nubuntu\u3067solr\u52d5\u304b\u3057\u3066\u307f\u308b\u3002 - podhmo\u306e\u65e5\u8a18\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo apt-get install -y solr-tomcat\n\n\n\u753b\u9762\u78ba\u8a8d\n\n\nhttp://localhost:8080/solr \u306b\u30a2\u30af\u30bb\u30b9\n\n\n\n\nSolr Admin\u3092\u30af\u30ea\u30c3\u30af\n\n\n\nSearch \u3092\u62bc\u3059\u3068\u691c\u7d22\u304c\u3067\u304d\u308b\u69d8\u5b50\u3002\n\n\n\u8a2d\u5b9a\u4fee\u6b63\n\n/etc/solr/conf/schema.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<schema name=\"example\" version=\"1.4\">\n  <types>\n    <!-- The StrField type is not analyzed, but indexed/stored verbatim. -->\n    <fieldType name=\"string\" class=\"solr.StrField\" sortMissingLast=\"true\" omitNorms=\"true\"/>\n    <fieldType name=\"long\" class=\"solr.TrieLongField\" precisionStep=\"0\" omitNorms=\"true\" positionIncrementGap=\"0\"/>\n    <fieldType name=\"text_ja\" class=\"solr.TextField\" positionIncrementGap=\"100\">\n      <analyzer>\n        <tokenizer class=\"solr.CJKTokenizerFactory\"/>\n      </analyzer>\n    </fieldType>\n  </types>\n  <fields>\n    <field name=\"id\" type=\"string\" indexed=\"true\" stored=\"true\" required=\"true\" /> \n    <field name=\"title\" type=\"text_ja\" indexed=\"true\" stored=\"true\" />\n    <field name=\"body\" type=\"text_ja\" indexed=\"true\" stored=\"true\" />\n\n  </fields>\n  <uniqueKey>id</uniqueKey>\n  <defaultSearchField>body</defaultSearchField>\n  <solrQueryParser defaultOperator=\"AND\"/>\n</schema>\n\n\nsudo /etc/init.d/tomcat6 restart\n\n\n\u30c7\u30fc\u30bf\u6295\u5165\nsudo pip install solrpy\n\n\na.py\n# -*- coding: utf-8 -*-\nimport solr\ns = solr.SolrConnection(\"http://localhost:8080/solr\")\ns.add(id=1, title=u\"ja\", body=u\"\u65e5\u672c\u8a9e\u3067\u304a\uff4b\")\ns.commit()\n\n\npython a.py\n\n\n\u78ba\u8a8d\n\nSearch\u30dc\u30bf\u30f3\u62bc\u4e0b\n\n\n\u30c7\u30fc\u30bf\u304c\u5165\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\n## \u53c2\u8003\n\n* [ubuntu\u3067solr\u52d5\u304b\u3057\u3066\u307f\u308b\u3002 - podhmo\u306e\u65e5\u8a18](http://d.hatena.ne.jp/podhmo/20120420/1334889220)\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash:\nsudo apt-get install -y solr-tomcat\n```\n\n## \u753b\u9762\u78ba\u8a8d\n\n* http://localhost:8080/solr \u306b\u30a2\u30af\u30bb\u30b9\n\n![s1.png](https://qiita-image-store.s3.amazonaws.com/0/25728/8f4552d0-99c0-f389-b7ff-59c5a80020d0.png)\n\n* `Solr Admin`\u3092\u30af\u30ea\u30c3\u30af\n\n![s2.png](https://qiita-image-store.s3.amazonaws.com/0/25728/f7df7967-f8b9-7c4a-bee6-e474931c959b.png)\n\n* Search \u3092\u62bc\u3059\u3068\u691c\u7d22\u304c\u3067\u304d\u308b\u69d8\u5b50\u3002\n\n## \u8a2d\u5b9a\u4fee\u6b63\n\n```xml:/etc/solr/conf/schema.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<schema name=\"example\" version=\"1.4\">\n  <types>\n    <!-- The StrField type is not analyzed, but indexed/stored verbatim. -->\n    <fieldType name=\"string\" class=\"solr.StrField\" sortMissingLast=\"true\" omitNorms=\"true\"/>\n    <fieldType name=\"long\" class=\"solr.TrieLongField\" precisionStep=\"0\" omitNorms=\"true\" positionIncrementGap=\"0\"/>\n    <fieldType name=\"text_ja\" class=\"solr.TextField\" positionIncrementGap=\"100\">\n      <analyzer>\n        <tokenizer class=\"solr.CJKTokenizerFactory\"/>\n      </analyzer>\n    </fieldType>\n  </types>\n  <fields>\n    <field name=\"id\" type=\"string\" indexed=\"true\" stored=\"true\" required=\"true\" /> \n    <field name=\"title\" type=\"text_ja\" indexed=\"true\" stored=\"true\" />\n    <field name=\"body\" type=\"text_ja\" indexed=\"true\" stored=\"true\" />\n    \n  </fields>\n  <uniqueKey>id</uniqueKey>\n  <defaultSearchField>body</defaultSearchField>\n  <solrQueryParser defaultOperator=\"AND\"/>\n</schema>\n```\n\n```bash:\nsudo /etc/init.d/tomcat6 restart\n```\n\n## \u30c7\u30fc\u30bf\u6295\u5165\n\n```bash:\nsudo pip install solrpy\n```\n\n```py:a.py\n# -*- coding: utf-8 -*-\nimport solr\ns = solr.SolrConnection(\"http://localhost:8080/solr\")\ns.add(id=1, title=u\"ja\", body=u\"\u65e5\u672c\u8a9e\u3067\u304a\uff4b\")\ns.commit()\n```\n\n```bash:\npython a.py\n```\n\n## \u78ba\u8a8d\n\n* Search\u30dc\u30bf\u30f3\u62bc\u4e0b\n\n![s3.png](https://qiita-image-store.s3.amazonaws.com/0/25728/2c69da15-002f-5520-4e78-3dd47b5b5be2.png)\n\n\u30c7\u30fc\u30bf\u304c\u5165\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\n", "tags": ["solr"]}