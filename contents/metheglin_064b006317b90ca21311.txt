{"context": " More than 1 year has passed since last update.\n\nGoal\n\nohai\u3067\u53d6\u5f97\u3067\u304d\u308b\u30b9\u30c6\u30fc\u30bf\u30b9\u4e00\u89a7\u3092\u78ba\u8a8d\u3059\u308b\n\u30b9\u30c6\u30fc\u30bf\u30b9\u3092itamae\u3067\u8868\u793a\u3055\u305b\u3066\u307f\u308b\n\n\nManual\ngem which ohai\n  # ohai\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d1\u30b9\u3092\u78ba\u8a8d\n\ngrep -R \"provides\" -h <ohai\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d1\u30b9>/lib/ohai/plugins | sed 's/^[\\s ]*//g' | sed \"s/\\\\\\\"/\\'/g\" | sort | uniq | grep \"^provides\"\n  # \u203bCentOS6.5\u3068MacOSX\u3067\u52d5\u4f5c\u78ba\u8a8d\n\n\u25a0\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\n\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u3060\u3068\u3053\u3046\u306a\u308b.\ngrep -R \"provides\" -h `gem which ohai | perl -e '@p=split(/\\//,<STDIN>);pop(@p);print join(\"/\",@p).\"/ohai/plugins\";'` | sed 's/^[\\s ]*//g' | sed \"s/\\\\\\\"/\\'/g\" | sort | uniq | grep \"^provides\"\n  # \u203bCentOS6.5\u3068MacOSX\u3067\u52d5\u4f5c\u78ba\u8a8d\n\nprovides 'azure'\nprovides 'block_device'\nprovides 'chef_packages/chef'\nprovides 'chef_packages/ohai'\nprovides 'cloud'\nprovides 'cloud_v2'\nprovides 'command'\nprovides 'command/ps'\nprovides 'counters/network', 'counters/network/interfaces'\nprovides 'cpu'\nprovides 'digital_ocean'\nprovides 'dmi'\nprovides 'domain', 'hostname', 'fqdn', 'machinename'\nprovides 'ec2'\nprovides 'etc', 'current_user'\nprovides 'eucalyptus'\nprovides 'filesystem'\nprovides 'gce'\nprovides 'idletime', 'idletime_seconds' # linux only\nprovides 'init_package'\nprovides 'ipaddress', 'ip6address', 'macaddress'\nprovides 'joyent'\nprovides 'kernel', 'kernel/modules'\nprovides 'keys'\nprovides 'keys/ssh'\nprovides 'languages'\nprovides 'languages/c'\nprovides 'languages/elixir'\nprovides 'languages/erlang'\nprovides 'languages/go'\nprovides 'languages/groovy'\nprovides 'languages/java'\nprovides 'languages/lua'\nprovides 'languages/mono'\nprovides 'languages/nodejs'\nprovides 'languages/perl'\nprovides 'languages/php'\nprovides 'languages/powershell'\nprovides 'languages/python'\nprovides 'languages/ruby'\nprovides 'languages/rust'\nprovides 'linode'\nprovides 'lsb'\nprovides 'mdadm'\nprovides 'memory'\nprovides 'memory', 'memory/swap'\nprovides 'network', 'counters/network'\nprovides 'network', 'network/interfaces'\nprovides 'network/interfaces/adapters/route'\nprovides 'network/listeners'\nprovides 'network_ip_scope', 'privateaddress'\nprovides 'ohai_time'\nprovides 'openstack'\nprovides 'os', 'os_version'\nprovides 'platform', 'platform_version', 'platform_build', 'platform_family'\nprovides 'platform', 'platform_version', 'platform_family'\nprovides 'rackspace'\nprovides 'root_group'\nprovides 'system_profile'\nprovides 'uptime', 'uptime_seconds'\nprovides 'virtualization'\nprovides 'virtualization/#{info}'\nprovides 'virtualization/guest_id'\nprovides 'zpools'\n\n\nCheck\nitamae\u3092\u4f7f\u3063\u3066\u9069\u5f53\u306b\u3044\u304f\u3064\u304b\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u30d4\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u3066\u8868\u793a\u3055\u305b\u3066\u307f\u308b.\n\nrecipe.rb\nrequire 'pp'\n\np \"------- platform ------- \"\npp node[:platform]\n\np \"------- ipaddress ------- \"\npp node[:ipaddress]\n\np \"------- command/ps ------- \"\npp node[:command][:ps]\n\np \"------- cpu ------- \"\npp node[:cpu]\n\np \"------- filesystem ------- \"\npp node[:filesystem]\n\np \"------- current_user ------- \"\npp node[:current_user]\n\np \"------- os -------\"\npp node[:os]\n\np \"------- uptime -------\"\npp node[:uptime]\n\n\nitamae local --ohai recipe.rb\n\n\"------- platform ------- \"\n\"mac_os_x\"\n\"------- ipaddress ------- \"\n\"192.168.2.100\"\n\"------- command/ps ------- \"\n\"ps -ef\"\n\"------- cpu ------- \"\n{\"real\"=>2,\n \"total\"=>4,\n \"mhz\"=>2500,\n \"vendor_id\"=>\"GenuineIntel\",\n \"model_name\"=>\"Intel(R) Core(TM) i5-3210M CPU @ 2.50GHz\",\n \"model\"=>58,\n \"family\"=>6,\n \"stepping\"=>9,\n \"flags\"=>\n  [\"fpu\",\n   \"vme\",\n   \"de\",\n   \"pse\",\n   \"tsc\",\n   \"msr\",\n   \"pae\",\n   \"mce\",\n   \"cx8\",\n   \"apic\",\n   \"sep\",\n   \"mtrr\",\n   \"pge\",\n   \"mca\",\n   \"cmov\",\n   \"pat\",\n   \"pse36\",\n   \"clfsh\",\n   \"ds\",\n   \"acpi\",\n   \"mmx\",\n   \"fxsr\",\n   \"sse\",\n   \"sse2\",\n   \"ss\",\n   \"htt\",\n   \"tm\",\n   \"pbe\",\n   \"sse3\",\n   \"pclmulqdq\",\n   \"dtes64\",\n   \"mon\",\n   \"dscpl\",\n   \"vmx\",\n   \"est\",\n   \"tm2\",\n   \"ssse3\",\n   \"cx16\",\n   \"tpr\",\n   \"pdcm\",\n   \"sse4.1\",\n   \"sse4.2\",\n   \"x2apic\",\n   \"popcnt\",\n   \"aes\",\n   \"pcid\",\n   \"xsave\",\n   \"osxsave\",\n   \"tsctmr\",\n   \"avx1.0\",\n   \"rdrand\",\n   \"f16c\"]}\n\"------- filesystem ------- \"\n{\"/dev/disk1\"=>\n  {\"block_size\"=>512,\n   \"kb_size\"=>117286912,\n   \"kb_used\"=>111143428,\n   \"kb_available\"=>5887484,\n   \"percent_used\"=>\"95%\",\n   \"mount\"=>\"/\",\n   \"fs_type\"=>\"hfs\",\n   \"mount_options\"=>[\"NFS exported\", \"local\", \"journaled\"]},\n \"devfs\"=>\n  {\"block_size\"=>512,\n   \"kb_size\"=>333,\n   \"kb_used\"=>333,\n   \"kb_available\"=>0,\n   \"percent_used\"=>\"100%\",\n   \"mount\"=>\"/dev\",\n   \"fs_type\"=>\"devfs\",\n   \"mount_options\"=>[\"local\", \"nobrowse\"]},\n \"map -hosts\"=>\n  {\"block_size\"=>512,\n   \"kb_size\"=>0,\n   \"kb_used\"=>0,\n   \"kb_available\"=>0,\n   \"percent_used\"=>\"100%\",\n   \"mount\"=>\"/net\",\n   \"fs_type\"=>\"autofs\",\n   \"mount_options\"=>[\"nosuid\", \"automounted\", \"nobrowse\"]},\n \"map auto_home\"=>\n  {\"block_size\"=>512,\n   \"kb_size\"=>0,\n   \"kb_used\"=>0,\n   \"kb_available\"=>0,\n   \"percent_used\"=>\"100%\",\n   \"mount\"=>\"/home\",\n   \"fs_type\"=>\"autofs\",\n   \"mount_options\"=>[\"automounted\", \"nobrowse\"]},\n \"/dev/disk2s3\"=>\n  {\"block_size\"=>512,\n   \"kb_size\"=>390952852,\n   \"kb_used\"=>325596108,\n   \"kb_available\"=>65356744,\n   \"percent_used\"=>\"84%\",\n   \"mount\"=>\"/Volumes/TimeMachine\",\n   \"fs_type\"=>\"hfs\",\n   \"mount_options\"=>[\"local\", \"nodev\", \"nosuid\", \"journaled\"]},\n \"/dev/disk2s5\"=>\n  {\"block_size\"=>512,\n   \"kb_size\"=>97171548,\n   \"kb_used\"=>41044544,\n   \"kb_available\"=>56127004,\n   \"percent_used\"=>\"43%\",\n   \"mount\"=>\"/Volumes/Dynamo\",\n   \"fs_type\"=>\"hfs\",\n   \"mount_options\"=>[\"local\", \"nodev\", \"nosuid\", \"journaled\", \"noowners\"]},\n \"localhost:/7Pu_uSHTbhGSOyLay6Vpzx\"=>\n  {\"block_size\"=>512,\n   \"kb_size\"=>117286912,\n   \"kb_used\"=>117286912,\n   \"kb_available\"=>0,\n   \"percent_used\"=>\"100%\",\n   \"mount\"=>\"/Volumes/MobileBackups\",\n   \"fs_type\"=>\"mtmfs\",\n   \"mount_options\"=>[\"nosuid\", \"read-only\", \"nobrowse\"]}}\n\"------- current_user ------- \"\n\"metheglin\"\n\"------- os -------\"\n\"darwin\"\n\"------- uptime -------\"\n\"2 hours 36 minutes 03 seconds\"\n\n\nReferences\n\nhttps://docs.chef.io/ohai.html\nhttp://heartbeats.jp/hbblog/2013/06/use-ohai.html\n\n\n# Goal\n\n* ohai\u3067\u53d6\u5f97\u3067\u304d\u308b\u30b9\u30c6\u30fc\u30bf\u30b9\u4e00\u89a7\u3092\u78ba\u8a8d\u3059\u308b\n* \u30b9\u30c6\u30fc\u30bf\u30b9\u3092itamae\u3067\u8868\u793a\u3055\u305b\u3066\u307f\u308b\n\n# Manual\n\n```\ngem which ohai\n  # ohai\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d1\u30b9\u3092\u78ba\u8a8d\n\ngrep -R \"provides\" -h <ohai\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d1\u30b9>/lib/ohai/plugins | sed 's/^[\\s ]*//g' | sed \"s/\\\\\\\"/\\'/g\" | sort | uniq | grep \"^provides\"\n  # \u203bCentOS6.5\u3068MacOSX\u3067\u52d5\u4f5c\u78ba\u8a8d\n```\n\n\u25a0\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\n\n\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u3060\u3068\u3053\u3046\u306a\u308b.\n\n```\ngrep -R \"provides\" -h `gem which ohai | perl -e '@p=split(/\\//,<STDIN>);pop(@p);print join(\"/\",@p).\"/ohai/plugins\";'` | sed 's/^[\\s ]*//g' | sed \"s/\\\\\\\"/\\'/g\" | sort | uniq | grep \"^provides\"\n  # \u203bCentOS6.5\u3068MacOSX\u3067\u52d5\u4f5c\u78ba\u8a8d\n```\n\n```\nprovides 'azure'\nprovides 'block_device'\nprovides 'chef_packages/chef'\nprovides 'chef_packages/ohai'\nprovides 'cloud'\nprovides 'cloud_v2'\nprovides 'command'\nprovides 'command/ps'\nprovides 'counters/network', 'counters/network/interfaces'\nprovides 'cpu'\nprovides 'digital_ocean'\nprovides 'dmi'\nprovides 'domain', 'hostname', 'fqdn', 'machinename'\nprovides 'ec2'\nprovides 'etc', 'current_user'\nprovides 'eucalyptus'\nprovides 'filesystem'\nprovides 'gce'\nprovides 'idletime', 'idletime_seconds' # linux only\nprovides 'init_package'\nprovides 'ipaddress', 'ip6address', 'macaddress'\nprovides 'joyent'\nprovides 'kernel', 'kernel/modules'\nprovides 'keys'\nprovides 'keys/ssh'\nprovides 'languages'\nprovides 'languages/c'\nprovides 'languages/elixir'\nprovides 'languages/erlang'\nprovides 'languages/go'\nprovides 'languages/groovy'\nprovides 'languages/java'\nprovides 'languages/lua'\nprovides 'languages/mono'\nprovides 'languages/nodejs'\nprovides 'languages/perl'\nprovides 'languages/php'\nprovides 'languages/powershell'\nprovides 'languages/python'\nprovides 'languages/ruby'\nprovides 'languages/rust'\nprovides 'linode'\nprovides 'lsb'\nprovides 'mdadm'\nprovides 'memory'\nprovides 'memory', 'memory/swap'\nprovides 'network', 'counters/network'\nprovides 'network', 'network/interfaces'\nprovides 'network/interfaces/adapters/route'\nprovides 'network/listeners'\nprovides 'network_ip_scope', 'privateaddress'\nprovides 'ohai_time'\nprovides 'openstack'\nprovides 'os', 'os_version'\nprovides 'platform', 'platform_version', 'platform_build', 'platform_family'\nprovides 'platform', 'platform_version', 'platform_family'\nprovides 'rackspace'\nprovides 'root_group'\nprovides 'system_profile'\nprovides 'uptime', 'uptime_seconds'\nprovides 'virtualization'\nprovides 'virtualization/#{info}'\nprovides 'virtualization/guest_id'\nprovides 'zpools'\n```\n\n# Check\n\nitamae\u3092\u4f7f\u3063\u3066\u9069\u5f53\u306b\u3044\u304f\u3064\u304b\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u30d4\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u3066\u8868\u793a\u3055\u305b\u3066\u307f\u308b.\n\n```recipe.rb\nrequire 'pp'\n\np \"------- platform ------- \"\npp node[:platform]\n\np \"------- ipaddress ------- \"\npp node[:ipaddress]\n\np \"------- command/ps ------- \"\npp node[:command][:ps]\n\np \"------- cpu ------- \"\npp node[:cpu]\n\np \"------- filesystem ------- \"\npp node[:filesystem]\n\np \"------- current_user ------- \"\npp node[:current_user]\n\np \"------- os -------\"\npp node[:os]\n\np \"------- uptime -------\"\npp node[:uptime]\n```\n\n```\nitamae local --ohai recipe.rb\n```\n\n```\n\"------- platform ------- \"\n\"mac_os_x\"\n\"------- ipaddress ------- \"\n\"192.168.2.100\"\n\"------- command/ps ------- \"\n\"ps -ef\"\n\"------- cpu ------- \"\n{\"real\"=>2,\n \"total\"=>4,\n \"mhz\"=>2500,\n \"vendor_id\"=>\"GenuineIntel\",\n \"model_name\"=>\"Intel(R) Core(TM) i5-3210M CPU @ 2.50GHz\",\n \"model\"=>58,\n \"family\"=>6,\n \"stepping\"=>9,\n \"flags\"=>\n  [\"fpu\",\n   \"vme\",\n   \"de\",\n   \"pse\",\n   \"tsc\",\n   \"msr\",\n   \"pae\",\n   \"mce\",\n   \"cx8\",\n   \"apic\",\n   \"sep\",\n   \"mtrr\",\n   \"pge\",\n   \"mca\",\n   \"cmov\",\n   \"pat\",\n   \"pse36\",\n   \"clfsh\",\n   \"ds\",\n   \"acpi\",\n   \"mmx\",\n   \"fxsr\",\n   \"sse\",\n   \"sse2\",\n   \"ss\",\n   \"htt\",\n   \"tm\",\n   \"pbe\",\n   \"sse3\",\n   \"pclmulqdq\",\n   \"dtes64\",\n   \"mon\",\n   \"dscpl\",\n   \"vmx\",\n   \"est\",\n   \"tm2\",\n   \"ssse3\",\n   \"cx16\",\n   \"tpr\",\n   \"pdcm\",\n   \"sse4.1\",\n   \"sse4.2\",\n   \"x2apic\",\n   \"popcnt\",\n   \"aes\",\n   \"pcid\",\n   \"xsave\",\n   \"osxsave\",\n   \"tsctmr\",\n   \"avx1.0\",\n   \"rdrand\",\n   \"f16c\"]}\n\"------- filesystem ------- \"\n{\"/dev/disk1\"=>\n  {\"block_size\"=>512,\n   \"kb_size\"=>117286912,\n   \"kb_used\"=>111143428,\n   \"kb_available\"=>5887484,\n   \"percent_used\"=>\"95%\",\n   \"mount\"=>\"/\",\n   \"fs_type\"=>\"hfs\",\n   \"mount_options\"=>[\"NFS exported\", \"local\", \"journaled\"]},\n \"devfs\"=>\n  {\"block_size\"=>512,\n   \"kb_size\"=>333,\n   \"kb_used\"=>333,\n   \"kb_available\"=>0,\n   \"percent_used\"=>\"100%\",\n   \"mount\"=>\"/dev\",\n   \"fs_type\"=>\"devfs\",\n   \"mount_options\"=>[\"local\", \"nobrowse\"]},\n \"map -hosts\"=>\n  {\"block_size\"=>512,\n   \"kb_size\"=>0,\n   \"kb_used\"=>0,\n   \"kb_available\"=>0,\n   \"percent_used\"=>\"100%\",\n   \"mount\"=>\"/net\",\n   \"fs_type\"=>\"autofs\",\n   \"mount_options\"=>[\"nosuid\", \"automounted\", \"nobrowse\"]},\n \"map auto_home\"=>\n  {\"block_size\"=>512,\n   \"kb_size\"=>0,\n   \"kb_used\"=>0,\n   \"kb_available\"=>0,\n   \"percent_used\"=>\"100%\",\n   \"mount\"=>\"/home\",\n   \"fs_type\"=>\"autofs\",\n   \"mount_options\"=>[\"automounted\", \"nobrowse\"]},\n \"/dev/disk2s3\"=>\n  {\"block_size\"=>512,\n   \"kb_size\"=>390952852,\n   \"kb_used\"=>325596108,\n   \"kb_available\"=>65356744,\n   \"percent_used\"=>\"84%\",\n   \"mount\"=>\"/Volumes/TimeMachine\",\n   \"fs_type\"=>\"hfs\",\n   \"mount_options\"=>[\"local\", \"nodev\", \"nosuid\", \"journaled\"]},\n \"/dev/disk2s5\"=>\n  {\"block_size\"=>512,\n   \"kb_size\"=>97171548,\n   \"kb_used\"=>41044544,\n   \"kb_available\"=>56127004,\n   \"percent_used\"=>\"43%\",\n   \"mount\"=>\"/Volumes/Dynamo\",\n   \"fs_type\"=>\"hfs\",\n   \"mount_options\"=>[\"local\", \"nodev\", \"nosuid\", \"journaled\", \"noowners\"]},\n \"localhost:/7Pu_uSHTbhGSOyLay6Vpzx\"=>\n  {\"block_size\"=>512,\n   \"kb_size\"=>117286912,\n   \"kb_used\"=>117286912,\n   \"kb_available\"=>0,\n   \"percent_used\"=>\"100%\",\n   \"mount\"=>\"/Volumes/MobileBackups\",\n   \"fs_type\"=>\"mtmfs\",\n   \"mount_options\"=>[\"nosuid\", \"read-only\", \"nobrowse\"]}}\n\"------- current_user ------- \"\n\"metheglin\"\n\"------- os -------\"\n\"darwin\"\n\"------- uptime -------\"\n\"2 hours 36 minutes 03 seconds\"\n```\n\n# References\n\n* https://docs.chef.io/ohai.html\n* http://heartbeats.jp/hbblog/2013/06/use-ohai.html\n", "tags": ["itamae", "chef", "ohai"]}