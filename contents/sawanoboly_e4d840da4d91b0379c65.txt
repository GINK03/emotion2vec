{"context": " More than 1 year has passed since last update.\n\n\u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u304b\u30891\u5e74\u4ee5\u4e0a\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002 \u6c17\u3092\u3064\u3051\u3066\u306d\u3002\n\n\u524d\u56de Chef\u3067Source\u304b\u3089\u4f55\u304b\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bCookbook\u306e\u30a6\u30a9\u30fc\u30af\u30b9\u30eb\u30fc \u3067\u3001IRC\u30b5\u30fc\u30d0\u306engircd\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u306btarball\u3092\u5c55\u958b\u3057\u3066make\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3092\u51fa\u3057\u307e\u3057\u305f\u3002\n\u6298\u89d2\u306a\u306e\u3067\u540c\u3058\u3053\u3068\u3092 LWRP(Lightweight Resources and Providers) \u3067\u8868\u3059\u3053\u3068\u3067LWRP\u306b\u3064\u3044\u3066\u89e3\u8aac\u3092\u3057\u3066\u307f\u307e\u3059\u3002\n\u3053\u308c\u3082Github\u3067Cookbook\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u30bf\u30b0\u306fv0.2.1\u3002 higanworks-cookbooks/ngircd_smartos(v0.2.1)\n\nLWRP\u306e\u53d6\u308a\u6271\u3044\n\u524d\u56de\u4f5c\u6210\u3057\u305f\u30ec\u30b7\u30d4\u3067\u306f\u4ee5\u4e0b\u306e\u4e8b\u3092\u3084\u308a\u307e\u3057\u305f\u3002\n\n\ntarball\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\ncoufigure && make && make install\n\nLWRP\u306f\u95a2\u6570\u307f\u305f\u3044\u306b\u6349\u3048\u3089\u308c\u304c\u3061\u306a\u306e\u3067\u3001\u4e00\u9023\u306econfigure, make\u3092\u4f7f\u3044\u307e\u308f\u305b\u308b\u3088\u3046\u306b\u307e\u3068\u3081\u3066\u304a\u304f\u3068\u3053\u308d\u304b\u306a\uff1f \u3068\u601d\u308f\u308c\u3066\u3044\u305f\u308a\u3057\u307e\u3059\u304c\u3001\u5b9f\u306f\u305d\u3046\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u305d\u3046\u3044\u3046\u306e\u306f Definitions \u3067\u3042\u3063\u305f\u308a\u3001 Libraries\u306e\u5f79\u56de\u308a\u3067\u3059\u306d\u3001LWRP\u306e\u8003\u3048\u65b9\u3068\u306f\u307e\u305f\u5225\u306e\u8a71\u3067\u3059\u3002\n\nResouces\u306e\u5b9a\u7fa9\n\u3055\u3066Resouces\u3067\u3059\u3002\nChef\u306f\u30ec\u30b7\u30d4\u306enew_resource\u3068\u73fe\u72b6\u306ecurrent_resouce\u3092\u6bd4\u8f03\u3057\u3066Converge\u3059\u308b\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306a\u306e\u3067\u3001\u305d\u3053\u3092\u4e2d\u5fc3\u306b\u8003\u3048\u3066\u3044\u304d\u307e\u3059\u3002\n\u524d\u56de\u306engircd\u306e\u30ec\u30b7\u30d4\u3067\u5927\u4e8b\u306a\u8981\u7d20\u3060\u3063\u305f\u306e\u306f\u306a\u3093\u3067\u3057\u3087\u3046\u304b\u3002\n\u30ea\u30e2\u30fc\u30c8\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\uff1f \u30b3\u30f3\u30d5\u30a3\u30b0\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\uff1f make\u306e\u3084\u308a\u65b9\uff1f \u305d\u308c\u3089\u306f\u5b9f\u969b\u306e\u3068\u3053\u308dResouce\u306e\u5b9a\u7fa9\u3068\u306f\u95a2\u9023\u304c\u7121\u304f\u3066\u3082\u56f0\u308a\u307e\u305b\u3093\u3002\n\u6975\u7aef\u306a\u8a71\u3001ngircd\u306e\u30d0\u30a4\u30ca\u30ea\u304c\u76ee\u5f53\u3066\u306e\u5834\u6240\u306b\u3042\u308c\u3070OK\u3067\u3059\u3002\n\nngircd\u306b\u3064\u3044\u3066\u306eAttributes\nResource\u306f\u6c7a\u307e\u308a\u307e\u3057\u305f\u3001\u3067\u306f\u305d\u308c\u306e\u6301\u3064\u8981\u7d20\u3092\u3064\u3051\u3066\u884c\u304d\u307e\u3057\u3087\u3046\u3002\n\u76ee\u5f53\u3066\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3084include\u3057\u3066\u3044\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5b9a\u7fa9\u53ef\u80fd\u306b\u3057\u3066\u3001\u9069\u5207\u306a\u3082\u306e\u306b\u3057\u305f\u3044\u3067\u3059\u306d\u3002\n\u3068\u308a\u3042\u3048\u305aVersion\u60c5\u5831\u3092\u53d6\u308a\u307e\u3059\u3002\n\nShell-Out\n$ ngircd -V\nngIRCd 20.2-IRCPLUS+SSL+SYSLOG+ZLIB-x86_64/pc/solaris2.11\nCopyright (c)2001-2013 Alexander Barton (<alex@barton.de>) and Contributors.\nHomepage: <http://ngircd.barton.de/>\n\nThis is free software; see the source for copying conditions. There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\n\n\u3072\u3069\u3044\u3088\u3001Ops\u6012\u308b\u3088\u3002\n20.2-IRCPLUS+SSL+SYSLOG+ZLIB\u3001\u3053\u306e\u3078\u3093\u304b\u3089ngircd\u30d0\u30a4\u30ca\u30ea\u306e\u8981\u7d20\u3092\u5b9a\u7fa9\u3067\u304d\u305d\u3046\u3067\u3059\u3002\n\nVersion\u3092\u8981\u7d20\u306b\n\u30d0\u30a4\u30ca\u30ea\u306battibute[version]\u3092\u6301\u305f\u305b\u308b\u305f\u3081\u306b\u30d1\u30fc\u30b9\u3057\u3066\u307f\u307e\u3059\u3002\n\nIrb-Out\n> `ngircd -V`.split[1].split('-')[0]\n=> \"20.2\"\n\n\n\u30a2\u30fc\u30ab\u30a4\u30d6\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3068\u4e00\u81f4\u3057\u3066\u3044\u3066\u826f\u3044\u611f\u3058\u3067\u3059\u3002\n\ninclude\u3057\u3066\u3044\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8981\u7d20\u306b\n\u30d0\u30a4\u30ca\u30ea\u306battibute[option]\u3092\u6301\u305f\u305b\u308b\u305f\u3081\u306b\u30d1\u30fc\u30b9\u3057\u3066\u307f\u307e\u3059\u3002\n\nIrb-Out\n> `ngircd -V`.split[1].split('-')[1].split('+')\n=> [\"IRCPLUS\", \"SSL\", \"SYSLOG\", \"ZLIB\"]\n\n\n\u3053\u308c\u306f\u307e\u3042\u3001SSL\u3042\u305f\u308a\u306b\u6c17\u3092\u3064\u3051\u308c\u3070\u3044\u3044\u304b\u306a\u3068\u601d\u3044\u3064\u3064\u3001\u4e00\u5fdcArray\u306b\u3002\n\n\u30ec\u30b7\u30d4\u306b\u66f8\u304f\u5185\u5bb9\nRecouce\u3068attributs\u3092\u6c7a\u3081\u305f\u306e\u3067\u3001\u30ec\u30b7\u30d4\u306b\u306f\u6b21\u306e\u3088\u3046\u306b\u66f8\u3051\u3070\u3042\u3068\u306f\u3088\u308d\u3057\u304f\u3084\u3063\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nrecipes/binary.rb\nngircd_smartos_binary 'ngircd' do\n  action :create\n  version '20.2'\n  options [\"SSL\"]\nend\n\n\ncurrent_resouce\u306eversion\u304c\u9055\u3046\u3001\u307e\u305f\u306foption\u306e\u30a2\u30ec\u30a4\u306b\u76ee\u7684\u306e\u3082\u306e\u304c\u5165\u3063\u3066\u3044\u306a\u3051\u308c\u3070Convergence\u3092\u8d77\u3053\u3057\u3066\u3082\u3089\u3044\u307e\u3059\u3002\n\u3082\u3061\u308d\u3093\u30d0\u30a4\u30ca\u30ea\u672c\u4f53\u304c\u7121\u3051\u308c\u3070\u624b\u6bb5\u306f\u7279\u306b\u554f\u308f\u306a\u3044\u306e\u3067\u7f6e\u304f\u3088\u3046\u306b\u3068\u3044\u3046\u4e8b\u3067\u3082\u3042\u308a\u307e\u3059\u3002\n\nLWRP\u7248Cookbook[ngircd]\u3092\u30a6\u30a9\u30fc\u30af\u30b9\u30eb\u30fc\n\u6bd4\u8f03\u3057\u3084\u3059\u3044\u3088\u3046\u524d\u56de\u306e\u30ec\u30b7\u30d4\u3092\u307b\u307c\u4f7f\u3044\u307e\u308f\u3057\u3064\u3064\u3001LWRP[NgircdSmartosBinary]\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u9806\u306b\u6ce8\u91c8\u3092\u5165\u308c\u3066\u307f\u307e\u3059\u3002\n\nattributes\nattributes\u306f\u5927\u304d\u304f\u5909\u308f\u3063\u3066\u307e\u305b\u3093\u3002version,options\u306e\u7701\u7565\u6642\u306b\u4f7f\u3046\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5024\u3092\u8ffd\u52a0\u3057\u305f\u3053\u3068\u3001arch_file\u306e\u6307\u5b9a\u3067version\u3092\u4f7f\u3044\u307e\u308f\u305b\u308b\u3088\u3046\u306b\u3057\u305f\u304f\u3089\u3044\u3067\u3059\u3002\n\nattributes/default.rb\n## base settings\ndefault['ngircd']['prefix_dir'] = '/opt/local'\ndefault['ngircd']['conf_dir'] = ::File.join(node['ngircd']['prefix_dir'], 'etc')\ndefault['ngircd']['version'] = '20.2'\ndefault['ngircd']['config_options'] = [\"SSL\"]\n\n\n## repository\ndefault['ngircd']['site_url'] = 'http://ngircd.barton.de/pub/ngircd/'\ndefault['ngircd']['arch_file'] = \"ngircd-#{node['ngircd']['version']}.tar.gz\"\n\n## for tempolary working\ndefault['ngircd']['working_dir'] = ::File.join(Chef::Config[:file_cache_path], 'ngircd')\n\n\n\nResources\n\u3055\u3066resource\u3067\u3059\u304c\u3001\u30b7\u30f3\u30d7\u30eb\u3067\u3059\u3002\n\u6307\u5b9a\u3067\u304d\u308bActions\u3001\u305d\u308c\u3068\u8981\u7d20\u306e\u578b\u3084\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3001\u5fc5\u9808\u304b\u3069\u3046\u304b\u3092\u3053\u3053\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\nresources/binary.rb\nactions :create, :delete\n\ndefault_action :create\n\nattribute :version, :kind_of => String, :default => node['ngircd']['version']\nattribute :options, :kind_of => Array, :default => node['ngircd']['config_options']\n\n\nCookbook\u306eresouces/\u4ee5\u4e0b\u306b\u5b9a\u7fa9\u3057\u305f\u30ea\u30bd\u30fc\u30b9\u306f\u3001Chef\u5b9f\u884c\u6642\u306b\u306fNameSpace\u304c\u4e0e\u3048\u3089\u308c\u307e\u3059\u3002\u5927\u96d1\u628a\u306bcookbook\u306e\u540d\u524d\uff0b\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u5909\u63db\u3055\u308c\u308b\u306e\u3067\u899a\u3048\u3066\u304a\u304f\u3068\u3088\u3044\u3067\u3059\u3002\n\nProviders\n\u305d\u3057\u3066\u30c4\u30b1\u3092\u5168\u90e8\u6255\u3046\u5834\u6240\u3001Providers\u3067\u3059\u3002Definitions \u3084 Libraries\u306b\u3088\u308b\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u306e\u4f59\u5730\u306f\u5341\u5206\u306b\u3042\u308a\u307e\u3059\u304c\u524d\u56de\u30ec\u30b7\u30d4\u306e\u4f7f\u3044\u56de\u3057\u3068\u3044\u3046\u3053\u3068\u3067\u3002\n\u307e\u305a\u306f\u3056\u3063\u3068\u773a\u3081\u308b\u3060\u3051\u3067\u3001\u3060\u3044\u305f\u3044\u4f55\u3092\u3057\u3066\u3044\u308b\u304b\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u3061\u306a\u307f\u306baction :delete\u306e\u90e8\u5206\u306f\u4f5c\u3063\u3066\u307e\u305b\u3093\u3001unlink\u3067\u6e08\u3080\u3093\u3067\u3059\u304c\u3002\n\nproviders/binary.rb\naction :create do\n  directory node['ngircd']['working_dir'] do\n    action :create\n  end\n\n  unless new_resource.version == @current_resource.version and new_resource.options - @current_resource.options == []\n    ::Chef::Log.info \"Install ngircd\"\n    node.set['ngircd']['arch_file'] = \"ngircd-#{new_resource.version}.tar.gz\"\n\n    remote_file ::File.join(node['ngircd']['working_dir'], node['ngircd']['arch_file']) do\n      action :create\n      source node['ngircd']['site_url'] + node['ngircd']['arch_file']\n    end\n\n    bash 'make and install ngircd' do\n      action :run\n      flags '-ex'\n      cwd node['ngircd']['working_dir']\n      code <<-EOH\ntar xzf #{node['ngircd']['arch_file']}\ncd #{::File.basename(node['ngircd']['arch_file'], '.tar.gz')}\n./configure #{node['ngircd']['configure_flags']}\nmake -j2\nmake install\nEOH\n    end\n\n    ## clean up workdir\n    directory ::File.join(node['ngircd']['working_dir'], ::File.basename(node['ngircd']['arch_file'], '.tar.gz')) do\n      action :delete\n      recursive true\n    end\n\n    new_resource.updated_by_last_action(true)\n  end\nend\n\ndef load_current_resource\n  @current_resource = Chef::Resource::NgircdSmartosBinary.new(new_resource.name)\n  if ::File.exist?(::File.join(node['ngircd']['prefix_dir'], 'sbin/ngircd'))\n    @current_resource.version `ngircd -V`.split[1].split('-')[0]\n    @current_resource.options `ngircd -V`.split[1].split(\"-\")[1].split(\"+\")\n  else\n    @current_resource.version '0.0'\n    @current_resource.options []\n  end\nend\n\n\n\naction :create do\n\u30ec\u30b7\u30d4\u306b\u3053\u306eResouce\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u305f\u6642\u306b:create\u306b\u5bfe\u3057\u3066\u4f55\u3092\u3059\u308b\u304b\u3001\u305d\u306e\u307e\u307e\u3067\u3059\u306d\u3002\n\nunless new_resource.version == @current_resource (\u4ee5\u4e0b\u7565\n\u307e\u3055\u306b\u3053\u3053\u3067  new_resource\u3068\u73fe\u72b6\u306ecurrent_resouce\u3092\u6bd4\u8f03  \u304c\u884c\u308f\u308c\u307e\u3059\u3002\n\u9055\u3063\u305f\u5834\u5408\u3001\u3068\u306b\u304b\u304fnew_resource\u306b\u5408\u308f\u305b\u308b\u3088\u3046\u306b\u51e6\u7406\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u3002\n\ndef load_current_resource\n\u3061\u3087\u3063\u3068\u4e00\u756a\u4e0b\u306b\u98db\u3093\u3067\u3001def load_current_resource\u3067\u3059\u3002\n@current_resource\u3092\u8aad\u3080\u3068\u3053\u306edef\u304c\u547c\u3070\u308c\u307e\u3059\u3001\u65e2\u5b58\u306e\u30d0\u30a4\u30ca\u30ea\u306b\u5bfe\u3057\u3066attributes\u3092\u53ce\u96c6\u3057\u3066\u3044\u307e\u3059\u306d\u3002\n\nnode.set['ngircd']['arch_file']\n\u30ea\u30e2\u30fc\u30c8\u53d6\u5f97\u5bfe\u8c61\u306eattribute\u3092set\u3067\u4e0a\u66f8\u304d\u3057\u307e\u3059\u3002attributes\u3059\u3079\u3066\u3092\u30ea\u30d3\u30eb\u30c9\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u304c\u624b\u3063\u53d6\u308a\u65e9\u3055\u3067set\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\nremote_file ::File.join(node['ngircd']['working_dir'], node['ngircd']['arch_file']) \u4ee5\u964d\n\u3053\u3053\u3067\u524d\u56de\u306e\u30ec\u30b7\u30d4\u304c\u5f79\u306b\u7acb\u3064\u3001\u3068\u3044\u3046\u304b\u307b\u307c\u4f7f\u3044\u307e\u308f\u3057\u3067\u3059\u3002\n\u30dd\u30a4\u30f3\u30c8\u3068\u3057\u3066\u306f\n\n\nbash 'make and install ngircd' \u306b\u5b9f\u884c\u6761\u4ef6\u304c\u306a\u3044\u3001action :run\u306b\u3057\u3066\u3044\u308b\u3002\n\n\n\u3053\u3053\u306b\u5165\u3063\u305f\u6642\u70b9\u3067\u7121\u6761\u4ef6\u3067\u5b9f\u884c\u3057\u3066OK\u3067\u3059\u3088\u306d\u3002\n\n\n\nremote_file\u304cnotify\u3057\u306a\u3044\n\n\n\u540c\u4e0a\u306a\u611f\u3058\u3067\u3059\u3001\u9806\u5e8f\u3082\u5909\u3048\u3066\u307e\u3059\u3002\n\n\n## clean up workdir\n\n\n\u30d3\u30eb\u30c9\u5f8c\u306f\u4e00\u5fdc\u6383\u9664\u3057\u3066\u304a\u3053\u3046\u304b\u306a\u3068\u3001\u8ffd\u52a0\u3057\u3066\u307e\u3059\u3002\n\n\n\n\nnew_resource.updated_by_last_action(true)\n\u30ec\u30b7\u30d4\u5185\u3067notify\u306e\u30d5\u30e9\u30b0\u3092\u7acb\u3066\u307e\u3059\u3002\nngircd_smartos_binary\u306bnotification\u3092\u3055\u305b\u308b\u5834\u5408\u306b\u5fc5\u8981\u3067\u3059\u304c\u3001\u4f55\u304b\u3057\u3089Conversion\u5b9f\u884c\u304c\u306a\u3055\u308c\u308b\u6642\u306f\u7121\u6761\u4ef6\u3067\u7acb\u3066\u3066\u304a\u304f\u306e\u304c\u3088\u3044\u3067\u3057\u3087\u3046\u3002\n\n\u5b9f\u884c\u3057\u3066\u307f\u308b\n\u524d\u8ff0\u306e\u30ec\u30b7\u30d4\u306e\u5185\u5bb9\u3092\u5b9f\u884c\u3057\u307e\u3057\u305f\u3002chef-shell\u3067\u3082OK\u3067\u3059\u3002\n\n\u30d0\u30a4\u30ca\u30ea\u304c\u306a\u3044\u72b6\u614b\u3067\u5b9f\u65bd or \u306a\u306b\u304b\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u9055\u3046\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u9055\u3046\u5834\u5408\naction :create\u306e\u5185\u5bb9\u304c\u3059\u3079\u3066\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f\u3002\n\nShell-out\n$ chef-solo -c solo.rb -o 'ngircd_smartos::binary' \nStarting Chef Client, version 11.4.4\n[2013-05-01T23:18:01+09:00] WARN: Run List override has been provided.\n[2013-05-01T23:18:01+09:00] WARN: Original Run List: []\n[2013-05-01T23:18:01+09:00] WARN: Overridden Run List: [recipe[ngircd_smartos::binary]]\nCompiling Cookbooks...\nConverging 1 resources\nRecipe: ngircd_smartos::binary\n  * ngircd_smartos_binary[ngircd] action create\n\nRecipe: <Dynamically Defined Resource>\n  * directory[/var/tmp/chef/ngircd] action create (up to date)\n  * remote_file[/var/tmp/chef/ngircd/ngircd-20.2.tar.gz] action create (up to date)\n  * bash[make and install ngircd] action run\n    - execute \"bash\" -ex \"/tmp/chef-script20130501-84816-19exjd8\"\n\n  * directory[/var/tmp/chef/ngircd/ngircd-20.2] action delete\n    - delete existing directory /var/tmp/chef/ngircd/ngircd-20.2\n\nChef Client finished, 3 resources updated\n\n\n\n\u3082\u3046\u4e00\u5ea6\u5b9f\u884c\u3057\u3066\u307f\u308b\u3001up to date\n\nnew_resouce == current_resource \u3068\u5224\u65ad\u3057\u305f\u306e\u3067\u3068\u304f\u306b\u5f71\u97ff\u306e\u3042\u308b\u52d5\u4f5c\u306f\u3057\u3066\u307e\u305b\u3093\u306d\u3002\n\nShell-out\n$ chef-solo -c solo.rb -o 'ngircd_smartos::binary' \nStarting Chef Client, version 11.4.4\n[2013-05-02T00:53:41+09:00] WARN: Run List override has been provided.\n[2013-05-02T00:53:41+09:00] WARN: Original Run List: []\n[2013-05-02T00:53:41+09:00] WARN: Overridden Run List: [recipe[ngircd_smartos::binary]]\nCompiling Cookbooks...\nConverging 1 resources\nRecipe: ngircd_smartos::binary\n  * ngircd_smartos_binary[ngircd] action create (up to date)\nRecipe: <Dynamically Defined Resource>\n  * directory[/var/tmp/chef/ngircd] action create (up to date)\nChef Client finished, 0 resources updated\n\n\n\n\u304a\u308f\u308a\u306b\nLWRP\u306e\u52d8\u6240\u3001\u3072\u3044\u3066\u306fConvergence\u3092\u5b9f\u73fe\u3059\u308b\u70ba\u306e\u30ea\u30bd\u30fc\u30b9\u6bd4\u8f03\u306b\u3064\u3044\u3066\u4f1d\u308f\u3063\u305f\u3067\u3057\u3087\u3046\u304b\u3002\nOpsCode\u516c\u5f0f\u3084Community Cookbook\u3067\u306f\u3082\u3063\u3068\u6ca2\u5c71\u306e - \u4f8b\u3048\u3070mongodb\u306eSharding\u3092LWRP\u3067\u5b9a\u7fa9\u3059\u308b\u306a\u3069 - \u8272\u3005\u3068\u9762\u767d\u3044\u4f8b\u304c\u898b\u3089\u308c\u307e\u3059\u3002\nchef_gem\u30ea\u30bd\u30fc\u30b9\u3092\u4f7f\u3048\u3070\u5c11\u3005\u306egem\u306a\u3089\u30ec\u30b7\u30d4/Providers\u5185\u3067\u4f7f\u3048\u308b\u306e\u3067\u3001\u5b9a\u7fa9\u3068\u53ce\u675f\u306e\u57fa\u672c\u3092\u62bc\u3055\u3048\u3066\u304a\u3051\u3070\u3068\u3066\u3082\u4fbf\u5229\u306bLWRP\u3092\u6d3b\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u304b\u3082\uff1f\n<!-- too_old -->\n> **\u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u304b\u30891\u5e74\u4ee5\u4e0a\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002** \u6c17\u3092\u3064\u3051\u3066\u306d\u3002\n\n\n\u524d\u56de [Chef\u3067Source\u304b\u3089\u4f55\u304b\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bCookbook\u306e\u30a6\u30a9\u30fc\u30af\u30b9\u30eb\u30fc](http://qiita.com/items/9c09afc49f5229f646ed) \u3067\u3001IRC\u30b5\u30fc\u30d0\u306e`ngircd`\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u306btarball\u3092\u5c55\u958b\u3057\u3066make\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3092\u51fa\u3057\u307e\u3057\u305f\u3002\n\n\u6298\u89d2\u306a\u306e\u3067\u540c\u3058\u3053\u3068\u3092 **LWRP(Lightweight Resources and Providers)** \u3067\u8868\u3059\u3053\u3068\u3067LWRP\u306b\u3064\u3044\u3066\u89e3\u8aac\u3092\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u3053\u308c\u3082Github\u3067Cookbook\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u30bf\u30b0\u306f`v0.2.1`\u3002 [higanworks-cookbooks/ngircd_smartos(v0.2.1)](https://github.com/higanworks-cookbooks/ngircd_smartos/tree/v0.2.1)\n\n\n# LWRP\u306e\u53d6\u308a\u6271\u3044\n\n[\u524d\u56de](http://qiita.com/items/9c09afc49f5229f646ed)\u4f5c\u6210\u3057\u305f\u30ec\u30b7\u30d4\u3067\u306f\u4ee5\u4e0b\u306e\u4e8b\u3092\u3084\u308a\u307e\u3057\u305f\u3002\n\n1. `tarball`\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n2. `coufigure && make && make install`\n\n`LWRP`\u306f\u95a2\u6570\u307f\u305f\u3044\u306b\u6349\u3048\u3089\u308c\u304c\u3061\u306a\u306e\u3067\u3001\u4e00\u9023\u306e`configure, make`\u3092\u4f7f\u3044\u307e\u308f\u305b\u308b\u3088\u3046\u306b\u307e\u3068\u3081\u3066\u304a\u304f\u3068\u3053\u308d\u304b\u306a\uff1f \u3068\u601d\u308f\u308c\u3066\u3044\u305f\u308a\u3057\u307e\u3059\u304c\u3001\u5b9f\u306f\u305d\u3046\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u305d\u3046\u3044\u3046\u306e\u306f [Definitions](http://docs.opscode.com/essentials_cookbook_definitions.html) \u3067\u3042\u3063\u305f\u308a\u3001 [Libraries](http://docs.opscode.com/essentials_cookbook_libraries.html)\u306e\u5f79\u56de\u308a\u3067\u3059\u306d\u3001`LWRP`\u306e\u8003\u3048\u65b9\u3068\u306f\u307e\u305f\u5225\u306e\u8a71\u3067\u3059\u3002\n\n## Resouces\u306e\u5b9a\u7fa9\n\n\u3055\u3066**Resouces**\u3067\u3059\u3002\nChef\u306f\u30ec\u30b7\u30d4\u306e`new_resource`\u3068\u73fe\u72b6\u306e`current_resouce`\u3092\u6bd4\u8f03\u3057\u3066**Converge**\u3059\u308b\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306a\u306e\u3067\u3001\u305d\u3053\u3092\u4e2d\u5fc3\u306b\u8003\u3048\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u524d\u56de\u306e`ngircd`\u306e\u30ec\u30b7\u30d4\u3067\u5927\u4e8b\u306a\u8981\u7d20\u3060\u3063\u305f\u306e\u306f\u306a\u3093\u3067\u3057\u3087\u3046\u304b\u3002\n\u30ea\u30e2\u30fc\u30c8\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\uff1f \u30b3\u30f3\u30d5\u30a3\u30b0\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\uff1f make\u306e\u3084\u308a\u65b9\uff1f \u305d\u308c\u3089\u306f\u5b9f\u969b\u306e\u3068\u3053\u308dResouce\u306e\u5b9a\u7fa9\u3068\u306f\u95a2\u9023\u304c\u7121\u304f\u3066\u3082\u56f0\u308a\u307e\u305b\u3093\u3002\n\n\u6975\u7aef\u306a\u8a71\u3001`ngircd`\u306e\u30d0\u30a4\u30ca\u30ea\u304c\u76ee\u5f53\u3066\u306e\u5834\u6240\u306b\u3042\u308c\u3070OK\u3067\u3059\u3002\n\n\n## ngircd\u306b\u3064\u3044\u3066\u306eAttributes\n\nResource\u306f\u6c7a\u307e\u308a\u307e\u3057\u305f\u3001\u3067\u306f\u305d\u308c\u306e\u6301\u3064\u8981\u7d20\u3092\u3064\u3051\u3066\u884c\u304d\u307e\u3057\u3087\u3046\u3002\n\u76ee\u5f53\u3066\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3084include\u3057\u3066\u3044\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5b9a\u7fa9\u53ef\u80fd\u306b\u3057\u3066\u3001\u9069\u5207\u306a\u3082\u306e\u306b\u3057\u305f\u3044\u3067\u3059\u306d\u3002\n\n\u3068\u308a\u3042\u3048\u305aVersion\u60c5\u5831\u3092\u53d6\u308a\u307e\u3059\u3002\n\n```bash:Shell-Out\n$ ngircd -V\nngIRCd 20.2-IRCPLUS+SSL+SYSLOG+ZLIB-x86_64/pc/solaris2.11\nCopyright (c)2001-2013 Alexander Barton (<alex@barton.de>) and Contributors.\nHomepage: <http://ngircd.barton.de/>\n\nThis is free software; see the source for copying conditions. There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n```\n\n<del>\u3072\u3069\u3044\u3088\u3001Ops\u6012\u308b\u3088\u3002</del>\n\n`20.2-IRCPLUS+SSL+SYSLOG+ZLIB`\u3001\u3053\u306e\u3078\u3093\u304b\u3089`ngircd`\u30d0\u30a4\u30ca\u30ea\u306e\u8981\u7d20\u3092\u5b9a\u7fa9\u3067\u304d\u305d\u3046\u3067\u3059\u3002\n\n### Version\u3092\u8981\u7d20\u306b\n\n\u30d0\u30a4\u30ca\u30ea\u306battibute[version]\u3092\u6301\u305f\u305b\u308b\u305f\u3081\u306b\u30d1\u30fc\u30b9\u3057\u3066\u307f\u307e\u3059\u3002\n\n```ruby:Irb-Out\n> `ngircd -V`.split[1].split('-')[0]\n=> \"20.2\"\n```\n\n\u30a2\u30fc\u30ab\u30a4\u30d6\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3068\u4e00\u81f4\u3057\u3066\u3044\u3066\u826f\u3044\u611f\u3058\u3067\u3059\u3002\n\n### include\u3057\u3066\u3044\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8981\u7d20\u306b\n\n\u30d0\u30a4\u30ca\u30ea\u306battibute[option]\u3092\u6301\u305f\u305b\u308b\u305f\u3081\u306b\u30d1\u30fc\u30b9\u3057\u3066\u307f\u307e\u3059\u3002\n\n```ruby:Irb-Out\n> `ngircd -V`.split[1].split('-')[1].split('+')\n=> [\"IRCPLUS\", \"SSL\", \"SYSLOG\", \"ZLIB\"]\n```\n\n\u3053\u308c\u306f\u307e\u3042\u3001SSL\u3042\u305f\u308a\u306b\u6c17\u3092\u3064\u3051\u308c\u3070\u3044\u3044\u304b\u306a\u3068\u601d\u3044\u3064\u3064\u3001\u4e00\u5fdcArray\u306b\u3002\n\n\n## \u30ec\u30b7\u30d4\u306b\u66f8\u304f\u5185\u5bb9\n\n`Recouce`\u3068`attributs`\u3092\u6c7a\u3081\u305f\u306e\u3067\u3001\u30ec\u30b7\u30d4\u306b\u306f\u6b21\u306e\u3088\u3046\u306b\u66f8\u3051\u3070\u3042\u3068\u306f\u3088\u308d\u3057\u304f\u3084\u3063\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```ruby:recipes/binary.rb \nngircd_smartos_binary 'ngircd' do\n  action :create\n  version '20.2'\n  options [\"SSL\"]\nend\n```\n`current_resouce`\u306e`version`\u304c\u9055\u3046\u3001\u307e\u305f\u306f`option`\u306e\u30a2\u30ec\u30a4\u306b\u76ee\u7684\u306e\u3082\u306e\u304c\u5165\u3063\u3066\u3044\u306a\u3051\u308c\u3070**Convergence**\u3092\u8d77\u3053\u3057\u3066\u3082\u3089\u3044\u307e\u3059\u3002\n\u3082\u3061\u308d\u3093\u30d0\u30a4\u30ca\u30ea\u672c\u4f53\u304c\u7121\u3051\u308c\u3070**\u624b\u6bb5\u306f\u7279\u306b\u554f\u308f\u306a\u3044\u306e\u3067**\u7f6e\u304f\u3088\u3046\u306b\u3068\u3044\u3046\u4e8b\u3067\u3082\u3042\u308a\u307e\u3059\u3002\n\n\n# LWRP\u7248Cookbook[ngircd]\u3092\u30a6\u30a9\u30fc\u30af\u30b9\u30eb\u30fc\n\n\u6bd4\u8f03\u3057\u3084\u3059\u3044\u3088\u3046\u524d\u56de\u306e\u30ec\u30b7\u30d4\u3092\u307b\u307c\u4f7f\u3044\u307e\u308f\u3057\u3064\u3064\u3001`LWRP[NgircdSmartosBinary]`\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u9806\u306b\u6ce8\u91c8\u3092\u5165\u308c\u3066\u307f\u307e\u3059\u3002\n\n## attributes\n\nattributes\u306f\u5927\u304d\u304f\u5909\u308f\u3063\u3066\u307e\u305b\u3093\u3002`version,options`\u306e\u7701\u7565\u6642\u306b\u4f7f\u3046\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5024\u3092\u8ffd\u52a0\u3057\u305f\u3053\u3068\u3001`arch_file`\u306e\u6307\u5b9a\u3067`version`\u3092\u4f7f\u3044\u307e\u308f\u305b\u308b\u3088\u3046\u306b\u3057\u305f\u304f\u3089\u3044\u3067\u3059\u3002\n\n```ruby:attributes/default.rb\n## base settings\ndefault['ngircd']['prefix_dir'] = '/opt/local'\ndefault['ngircd']['conf_dir'] = ::File.join(node['ngircd']['prefix_dir'], 'etc')\ndefault['ngircd']['version'] = '20.2'\ndefault['ngircd']['config_options'] = [\"SSL\"]\n\n\n## repository\ndefault['ngircd']['site_url'] = 'http://ngircd.barton.de/pub/ngircd/'\ndefault['ngircd']['arch_file'] = \"ngircd-#{node['ngircd']['version']}.tar.gz\"\n\n## for tempolary working\ndefault['ngircd']['working_dir'] = ::File.join(Chef::Config[:file_cache_path], 'ngircd')\n```\n\n## Resources\n\n\u3055\u3066resource\u3067\u3059\u304c\u3001\u30b7\u30f3\u30d7\u30eb\u3067\u3059\u3002\n\u6307\u5b9a\u3067\u304d\u308b`Actions`\u3001\u305d\u308c\u3068\u8981\u7d20\u306e\u578b\u3084\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3001\u5fc5\u9808\u304b\u3069\u3046\u304b\u3092\u3053\u3053\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n```ruby:resources/binary.rb\nactions :create, :delete\n\ndefault_action :create\n\nattribute :version, :kind_of => String, :default => node['ngircd']['version']\nattribute :options, :kind_of => Array, :default => node['ngircd']['config_options']\n```\n\nCookbook\u306e`resouces/`\u4ee5\u4e0b\u306b\u5b9a\u7fa9\u3057\u305f\u30ea\u30bd\u30fc\u30b9\u306f\u3001Chef\u5b9f\u884c\u6642\u306b\u306f`NameSpace`\u304c\u4e0e\u3048\u3089\u308c\u307e\u3059\u3002\u5927\u96d1\u628a\u306b`cookbook\u306e\u540d\u524d\uff0b\u30d5\u30a1\u30a4\u30eb\u540d`\u306b\u5909\u63db\u3055\u308c\u308b\u306e\u3067\u899a\u3048\u3066\u304a\u304f\u3068\u3088\u3044\u3067\u3059\u3002\n\n\n## Providers\n\n\u305d\u3057\u3066**\u30c4\u30b1\u3092\u5168\u90e8\u6255\u3046\u5834\u6240**\u3001`Providers`\u3067\u3059\u3002[Definitions](http://docs.opscode.com/essentials_cookbook_definitions.html) \u3084 [Libraries](http://docs.opscode.com/essentials_cookbook_libraries.html)\u306b\u3088\u308b\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u306e\u4f59\u5730\u306f\u5341\u5206\u306b\u3042\u308a\u307e\u3059\u304c\u524d\u56de\u30ec\u30b7\u30d4\u306e\u4f7f\u3044\u56de\u3057\u3068\u3044\u3046\u3053\u3068\u3067\u3002\n\n\n\u307e\u305a\u306f\u3056\u3063\u3068\u773a\u3081\u308b\u3060\u3051\u3067\u3001\u3060\u3044\u305f\u3044\u4f55\u3092\u3057\u3066\u3044\u308b\u304b\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u3061\u306a\u307f\u306b`action :delete`\u306e\u90e8\u5206\u306f\u4f5c\u3063\u3066\u307e\u305b\u3093\u3001`unlink`\u3067\u6e08\u3080\u3093\u3067\u3059\u304c\u3002\n\n```ruby:providers/binary.rb\naction :create do\n  directory node['ngircd']['working_dir'] do\n    action :create\n  end\n\n  unless new_resource.version == @current_resource.version and new_resource.options - @current_resource.options == []\n    ::Chef::Log.info \"Install ngircd\"\n    node.set['ngircd']['arch_file'] = \"ngircd-#{new_resource.version}.tar.gz\"\n\n    remote_file ::File.join(node['ngircd']['working_dir'], node['ngircd']['arch_file']) do\n      action :create\n      source node['ngircd']['site_url'] + node['ngircd']['arch_file']\n    end\n\n    bash 'make and install ngircd' do\n      action :run\n      flags '-ex'\n      cwd node['ngircd']['working_dir']\n      code <<-EOH\ntar xzf #{node['ngircd']['arch_file']}\ncd #{::File.basename(node['ngircd']['arch_file'], '.tar.gz')}\n./configure #{node['ngircd']['configure_flags']}\nmake -j2\nmake install\nEOH\n    end\n\n    ## clean up workdir\n    directory ::File.join(node['ngircd']['working_dir'], ::File.basename(node['ngircd']['arch_file'], '.tar.gz')) do\n      action :delete\n      recursive true\n    end\n\n    new_resource.updated_by_last_action(true)\n  end\nend\n\ndef load_current_resource\n  @current_resource = Chef::Resource::NgircdSmartosBinary.new(new_resource.name)\n  if ::File.exist?(::File.join(node['ngircd']['prefix_dir'], 'sbin/ngircd'))\n    @current_resource.version `ngircd -V`.split[1].split('-')[0]\n    @current_resource.options `ngircd -V`.split[1].split(\"-\")[1].split(\"+\")\n  else\n    @current_resource.version '0.0'\n    @current_resource.options []\n  end\nend\n```\n\n### action :create do\n\n\u30ec\u30b7\u30d4\u306b\u3053\u306e`Resouce`\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u305f\u6642\u306b`:create`\u306b\u5bfe\u3057\u3066\u4f55\u3092\u3059\u308b\u304b\u3001\u305d\u306e\u307e\u307e\u3067\u3059\u306d\u3002\n\n###   unless new_resource.version == @current_resource (\u4ee5\u4e0b\u7565\n\n\u307e\u3055\u306b\u3053\u3053\u3067  `new_resource`**\u3068\u73fe\u72b6\u306e**`current_resouce`**\u3092\u6bd4\u8f03**  \u304c\u884c\u308f\u308c\u307e\u3059\u3002\n\u9055\u3063\u305f\u5834\u5408\u3001\u3068\u306b\u304b\u304f`new_resource`\u306b\u5408\u308f\u305b\u308b\u3088\u3046\u306b\u51e6\u7406\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u3002\n\n### def load_current_resource\n\n\u3061\u3087\u3063\u3068\u4e00\u756a\u4e0b\u306b\u98db\u3093\u3067\u3001`def load_current_resource`\u3067\u3059\u3002\n`@current_resource`\u3092\u8aad\u3080\u3068\u3053\u306edef\u304c\u547c\u3070\u308c\u307e\u3059\u3001\u65e2\u5b58\u306e\u30d0\u30a4\u30ca\u30ea\u306b\u5bfe\u3057\u3066`attributes`\u3092\u53ce\u96c6\u3057\u3066\u3044\u307e\u3059\u306d\u3002\n\n### node.set['ngircd']['arch_file']\n\n\u30ea\u30e2\u30fc\u30c8\u53d6\u5f97\u5bfe\u8c61\u306eattribute\u3092`set`\u3067\u4e0a\u66f8\u304d\u3057\u307e\u3059\u3002`attributes`\u3059\u3079\u3066\u3092\u30ea\u30d3\u30eb\u30c9\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u304c\u624b\u3063\u53d6\u308a\u65e9\u3055\u3067`set`\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\n### remote_file ::File.join(node['ngircd']['working_dir'], node['ngircd']['arch_file']) \u4ee5\u964d\n\n\u3053\u3053\u3067[\u524d\u56de\u306e\u30ec\u30b7\u30d4](http://qiita.com/items/9c09afc49f5229f646ed)\u304c\u5f79\u306b\u7acb\u3064\u3001\u3068\u3044\u3046\u304b\u307b\u307c\u4f7f\u3044\u307e\u308f\u3057\u3067\u3059\u3002\n\n\u30dd\u30a4\u30f3\u30c8\u3068\u3057\u3066\u306f\n\n- `bash 'make and install ngircd'` \u306b\u5b9f\u884c\u6761\u4ef6\u304c\u306a\u3044\u3001`action :run`\u306b\u3057\u3066\u3044\u308b\u3002\n  - \u3053\u3053\u306b\u5165\u3063\u305f\u6642\u70b9\u3067\u7121\u6761\u4ef6\u3067\u5b9f\u884c\u3057\u3066OK\u3067\u3059\u3088\u306d\u3002\n- `remote_file`\u304cnotify\u3057\u306a\u3044\n  - \u540c\u4e0a\u306a\u611f\u3058\u3067\u3059\u3001\u9806\u5e8f\u3082\u5909\u3048\u3066\u307e\u3059\u3002\n- ## clean up workdir\n  - \u30d3\u30eb\u30c9\u5f8c\u306f\u4e00\u5fdc\u6383\u9664\u3057\u3066\u304a\u3053\u3046\u304b\u306a\u3068\u3001\u8ffd\u52a0\u3057\u3066\u307e\u3059\u3002\n\n\n### new_resource.updated_by_last_action(true)\n\n\u30ec\u30b7\u30d4\u5185\u3067notify\u306e\u30d5\u30e9\u30b0\u3092\u7acb\u3066\u307e\u3059\u3002\n`ngircd_smartos_binary`\u306b`notification`\u3092\u3055\u305b\u308b\u5834\u5408\u306b\u5fc5\u8981\u3067\u3059\u304c\u3001\u4f55\u304b\u3057\u3089Conversion\u5b9f\u884c\u304c\u306a\u3055\u308c\u308b\u6642\u306f\u7121\u6761\u4ef6\u3067\u7acb\u3066\u3066\u304a\u304f\u306e\u304c\u3088\u3044\u3067\u3057\u3087\u3046\u3002\n\n## \u5b9f\u884c\u3057\u3066\u307f\u308b\n\n\u524d\u8ff0\u306e\u30ec\u30b7\u30d4\u306e\u5185\u5bb9\u3092\u5b9f\u884c\u3057\u307e\u3057\u305f\u3002`chef-shell`\u3067\u3082OK\u3067\u3059\u3002\n\n### \u30d0\u30a4\u30ca\u30ea\u304c\u306a\u3044\u72b6\u614b\u3067\u5b9f\u65bd or \u306a\u306b\u304b\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u9055\u3046\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u9055\u3046\u5834\u5408\n\n`action :create`\u306e\u5185\u5bb9\u304c\u3059\u3079\u3066\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f\u3002\n\n```bash:Shell-out\n$ chef-solo -c solo.rb -o 'ngircd_smartos::binary' \nStarting Chef Client, version 11.4.4\n[2013-05-01T23:18:01+09:00] WARN: Run List override has been provided.\n[2013-05-01T23:18:01+09:00] WARN: Original Run List: []\n[2013-05-01T23:18:01+09:00] WARN: Overridden Run List: [recipe[ngircd_smartos::binary]]\nCompiling Cookbooks...\nConverging 1 resources\nRecipe: ngircd_smartos::binary\n  * ngircd_smartos_binary[ngircd] action create\n\nRecipe: <Dynamically Defined Resource>\n  * directory[/var/tmp/chef/ngircd] action create (up to date)\n  * remote_file[/var/tmp/chef/ngircd/ngircd-20.2.tar.gz] action create (up to date)\n  * bash[make and install ngircd] action run\n    - execute \"bash\" -ex \"/tmp/chef-script20130501-84816-19exjd8\"\n\n  * directory[/var/tmp/chef/ngircd/ngircd-20.2] action delete\n    - delete existing directory /var/tmp/chef/ngircd/ngircd-20.2\n\nChef Client finished, 3 resources updated\n```\n\n\n### \u3082\u3046\u4e00\u5ea6\u5b9f\u884c\u3057\u3066\u307f\u308b\u3001`up to date`\n\n`new_resouce == current_resource` \u3068\u5224\u65ad\u3057\u305f\u306e\u3067\u3068\u304f\u306b\u5f71\u97ff\u306e\u3042\u308b\u52d5\u4f5c\u306f\u3057\u3066\u307e\u305b\u3093\u306d\u3002\n\n```bash:Shell-out\n$ chef-solo -c solo.rb -o 'ngircd_smartos::binary' \nStarting Chef Client, version 11.4.4\n[2013-05-02T00:53:41+09:00] WARN: Run List override has been provided.\n[2013-05-02T00:53:41+09:00] WARN: Original Run List: []\n[2013-05-02T00:53:41+09:00] WARN: Overridden Run List: [recipe[ngircd_smartos::binary]]\nCompiling Cookbooks...\nConverging 1 resources\nRecipe: ngircd_smartos::binary\n  * ngircd_smartos_binary[ngircd] action create (up to date)\nRecipe: <Dynamically Defined Resource>\n  * directory[/var/tmp/chef/ngircd] action create (up to date)\nChef Client finished, 0 resources updated\n```\n\n\n## \u304a\u308f\u308a\u306b\n\n`LWRP`\u306e\u52d8\u6240\u3001\u3072\u3044\u3066\u306f`Convergence`\u3092\u5b9f\u73fe\u3059\u308b\u70ba\u306e\u30ea\u30bd\u30fc\u30b9\u6bd4\u8f03\u306b\u3064\u3044\u3066\u4f1d\u308f\u3063\u305f\u3067\u3057\u3087\u3046\u304b\u3002\n\nOpsCode\u516c\u5f0f\u3084`Community Cookbook`\u3067\u306f\u3082\u3063\u3068\u6ca2\u5c71\u306e - \u4f8b\u3048\u3070`mongodb`\u306eSharding\u3092LWRP\u3067\u5b9a\u7fa9\u3059\u308b\u306a\u3069 - \u8272\u3005\u3068\u9762\u767d\u3044\u4f8b\u304c\u898b\u3089\u308c\u307e\u3059\u3002\n`chef_gem`\u30ea\u30bd\u30fc\u30b9\u3092\u4f7f\u3048\u3070\u5c11\u3005\u306egem\u306a\u3089\u30ec\u30b7\u30d4/Providers\u5185\u3067\u4f7f\u3048\u308b\u306e\u3067\u3001\u5b9a\u7fa9\u3068\u53ce\u675f\u306e\u57fa\u672c\u3092\u62bc\u3055\u3048\u3066\u304a\u3051\u3070\u3068\u3066\u3082\u4fbf\u5229\u306bLWRP\u3092\u6d3b\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u304b\u3082\uff1f\n\n", "tags": ["Ruby", "infrastructure", "chef", "lwrp"]}