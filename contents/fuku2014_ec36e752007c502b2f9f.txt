{"context": "\n\n\u6982\u8981\n\u8fd1\u5e74\u306e\u30bd\u30fc\u30b7\u30e3\u30eb\u30b2\u30fc\u30e0\u3067\u306f\u6b20\u304b\u305b\u306a\u3044\u8981\u7d20\u3067\u3042\u308b \u30ac\u30c1\u30e3\u3002\n\u30ac\u30c1\u30e3\u3092\u5f15\u304f\u306e\u304c\uff11\u756a\u306e\u697d\u3057\u307f\u3068\u3044\u3046\u30e6\u30fc\u30b6\u30fc\u3082\u591a\u304f\u3001\u6700\u65e9\u30a2\u30d7\u30ea\u306e\u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u3068\u3082\u8a00\u3048\u307e\u3059\u3002\n\u4eca\u56de\u306f\u305d\u3093\u306a\u30ac\u30c1\u30e3\u3092\u5f15\u304f\u3060\u3051\u306e\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3082\u8f09\u305b\u3066\u3042\u308b\u306e\u3067\u3001\u30bd\u30fc\u30b7\u30e3\u30eb\u30b2\u30fc\u30e0\u3092\u4f5c\u3063\u3066\u307f\u305f\u3044\u65b9\u3084Swift\u306e\u52c9\u5f37\u3092\u3057\u3066\u3044\u308b\u65b9\u306e\u53c2\u8003\u306b\u306a\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30a2\u30d7\u30ea\u7d39\u4ecb\nToday's Lunch\u3068\u3044\u3046\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\u300c\u4eca\u65e5\u306e\u3054\u98ef\u306a\u306b\u305f\u3079\u3088\u3046\u300d\u3068\u8ff7\u3063\u305f\u6642\u306b\u30ac\u30c1\u30e3\u3067\u6c7a\u3081\u3088\u3046\u3068\u3044\u3046\u30a2\u30d7\u30ea\u3067\u3059\u3002\n\u98df\u3079\u7269\u306e\u4e2d\u306b\u306f\u8d85\u6fc0\u30ec\u30a2\u306a\u30a2\u30a4\u30c6\u30e0\u3082\u3042\u308b\u306e\u3067\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\u3092\u76ee\u6307\u3057\u3066\u697d\u3057\u3080\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n\n\u30bd\u30fc\u30b9\ngithub\n\n\u30c7\u30fc\u30bf\u306e\u7528\u610f\n\u307e\u305a\u306f\u30ac\u30c1\u30e3\u3067\u51fa\u73fe\u3059\u308bItem\u306e\u30c7\u30fc\u30bf\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\njson\u30d5\u30a1\u30a4\u30eb\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\nlunch.json\n{\n    \"foods\": [ \n        {\n            \"name\": \"\u304a\u306b\u304e\u308a\", \n            \"rate\": 50, \n            \"star\": \"\u2606\"\n        }, \n        {\n            \"name\": \"\u30cf\u30f3\u30d0\u30fc\u30ac\u30fc\", \n            \"rate\": 25, \n            \"star\": \"\u2606\u2606\"\n        }, \n        {\n            \"name\": \"\u30b3\u30ed\u30c3\u30b1\u5b9a\u98df\", \n            \"rate\": 15, \n            \"star\": \"\u2606\u2606\u2606\"\n        }, \n        {\n            \"name\": \"\u304b\u3089\u63da\u3052\u5b9a\u98df\", \n            \"rate\": 7, \n            \"star\": \"\u2606\u2606\u2606\u2606\"\n        },\n        {\n            \"name\": \"\u713c\u8089\u30e9\u30f3\u30c1\", \n            \"rate\": 3, \n            \"star\": \"\u2606\u2606\u2606\u2606\u2606\"\n        }\n    ]\n}\n\n\nitem\u306b\u306f\u540d\u524d\u3068\u78ba\u7387\u3068\u30ec\u30a2\u30ea\u30c6\u30a3\u3067\u3042\u308b\u2606\u304c\u5b9a\u7fa9\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\u4e00\u822c\u7684\u306a\u30bd\u30fc\u30b7\u30e3\u30eb\u30b2\u30fc\u30e0\u306e\u30ac\u30c1\u30e3\u3082\u3053\u308c\u304f\u3089\u3044\u306e\u78ba\u7387\u3067\u3059\u306d\u3002\n\u2b50\ufe0f5\u304c\u51fa\u305f\u3089\u30e9\u30c3\u30ad\u30fc!\n\n\u69cb\u6210\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306fiOS\u5411\u3051\u306b\u4f5c\u3063\u305f\u306e\u3067Swift3.0\u3067\u3059\u3002\n\u901a\u5e38\u30ac\u30c1\u30e3\u306e\u30ed\u30b8\u30c3\u30af\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u306f\u306a\u304f\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3068\u601d\u3046\u306e\u3067\u3001\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068\u305d\u308c\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u30b5\u30fc\u30d0\u30fc\u3082\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001\u81ea\u5206\u3067\u30b5\u30fc\u30d0\u30fc\u3092\u7528\u610f\u3059\u308b\u3068\u306a\u308b\u3068\u30b5\u30fc\u30d0\u30fc\u81ea\u4f53\u306e\u30a4\u30f3\u30d5\u30e9\u6599\u91d1\u306f\u3082\u3061\u308d\u3093\u3001\u30b5\u30fc\u30d0\u30fc\u306e\u69cb\u7bc9\u3084\u904b\u7528\u306b\u3082\u81a8\u5927\u306a\u5de5\u6570\u3092\u53d6\u3089\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u305d\u3093\u306a\u304a\u60a9\u307f\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u306b\u3001\u4eca\u56de\u306f2016/10/25\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u3070\u304b\u308a\u306e\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u3068\u3044\u3046\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u3068\u306f\uff1f\n\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30af\u30e9\u30a6\u30c9\u4e0a\u3067\u5b9f\u884c\u3067\u304d\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\n\u3059\u3050\u306bNode.js\u306e\u5b9f\u884c\u74b0\u5883\u304c\u624b\u306b\u5165\u308b\u306e\u3067\u3001[\u30b5\u30fc\u30d0\u30fc\u4e0d\u8981] [\u74b0\u5883\u69cb\u7bc9\u4e0d\u8981]  [\u904b\u7528\u4e0d\u8981] \u3068\u5927\u5909\u4fbf\u5229\u3067\u3059\u3002\n\u3055\u3089\u306b\u901a\u5e38\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u7528\u610f\u3059\u308b\u306e\u3068\u6bd4\u3079\u3066\u4f4e\u30b3\u30b9\u30c8\u3067\u904b\u7528\u3067\u304d\u308b\u30e1\u30ea\u30c3\u30c8\u3082\u3042\u308a\u307e\u3059\u3002\n\u4f8b\u3068\u3057\u3066\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u306eIaaS\u3067\u904b\u7528\u3057\u305f\u5834\u5408\u3068\u30b3\u30b9\u30c8\u3092\u6bd4\u8f03\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30ac\u30c1\u30e3\u304c\u6708\u306b10,000\u56de\u5b9f\u884c\u3055\u308c\u305f\u5834\u5408\n\n\n\n\n\n\u6708\u984d\u30b3\u30b9\u30c8\n\n\n\n\n\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9 mediumu\u30b5\u30fc\u30d0\u30fc \n24,200\u5186\n\n\n\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\n1,000\u5186 + 300\u5186\n\n\n\n\u203b \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u51e6\u7406\u6642\u9593\u306f1\u56de0.\uff11\u79d2\u3068\u3057\u3066\u307e\u3059\u3002\n\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u5b8c\u5168\u91cd\u91cf\u8ab2\u91d1\u306a\u306e\u3067\u3001\u5b9f\u884c\u56de\u6570\u3068\u51e6\u7406\u6642\u9593\u306b\u5fdc\u3058\u3066\u8ab2\u91d1\u3055\u308c\u307e\u3059\u3002\n\u3064\u307e\u308a\u3001\u901a\u5e38\u306e\u30b5\u30fc\u30d0\u30fc\u306e\u3088\u3046\u306b\u30a2\u30d7\u30ea\u304c\u4eba\u6c17\u3067\u306a\u304f\u3066\u58f2\u308a\u4e0a\u3052\u304c\u306a\u3044\u306e\u306b\u30b5\u30fc\u30d0\u30fc\u306e\u6599\u91d1\u3092\u53d6\u3089\u308c\u3066\u3057\u307e\u3046\u3068\u3044\u3046\u3053\u3068\u3082\u306a\u3044\u306e\u3067\u5b89\u5fc3\u3067\u3059\u3002\n\u9006\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u305f\u304f\u3055\u3093\u5b9f\u884c\u3055\u308c\u3066\u91d1\u984d\u304c\u304b\u304b\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u305d\u308c\u3060\u3051\u30a2\u30d7\u30ea\u306e\u58f2\u4e0a\u3082\u4e0a\u304c\u3063\u3066\u3044\u308b\u3063\u3066\u3053\u3068\u3067\u3059\u306d\u3002\n\u305d\u306e\u5834\u5408\u3082\u81ea\u5206\u3067\u30b5\u30fc\u30d0\u30fc\u306e\u30b9\u30da\u30c3\u30af\u3092\u3042\u3052\u305f\u308a\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3059\u308b\u5fc5\u8981\u3082\u306a\u3044\u306e\u3067\u4fbf\u5229\u3067\u3059\u3002\n\n\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u767b\u9332\u3059\u308b\n\u30af\u30a4\u30c3\u30af\u30b9\u30bf\u30fc\u30c8\u3092\u53c2\u8003\u306b\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u306e\u767b\u9332\u3092\u5b8c\u4e86\u3055\u305b\u307e\u3059\u3002\n\u4ee5\u4e0a\u3067\u6e96\u5099\u306f\u5b8c\u4e86\u3067\u3059\u3001\u3044\u3088\u3044\u3088\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f7f\u3063\u3066\u30ac\u30c1\u30e3\u3092\u5b9f\u884c\u3055\u308c\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u3002\n\nNode.js\u3067\u30ac\u30c1\u30e3\u3092\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3059\u308b\n\u3053\u3061\u3089\u304c\u5b8c\u6210\u5f62\u306e\u30bd\u30fc\u30b9\u306b\u306a\u308a\u307e\u3059\u3002\n\nscript.js\nconst URL = 'https://lunch.jp-east-2.os.cloud.nifty.com/lunch.json';\n\nlet http = require('https');\nmodule.exports = (req, res) => {\n  http.get(URL, (result) => {\n    let body = '';\n    result.setEncoding('utf8');\n\n    result.on('data', (chunk) => {\n      body += chunk;\n    });\n\n    result.on('end', (result) => {\n      data = JSON.parse(body);\n      let max = 0;\n      data.foods.forEach(d => {\n        max += d[\"rate\"];\n      });\n\n      let rate = Math.floor(Math.random() * max);\n      for (var d of data.foods) {\n        max -= d[\"rate\"];\n        if (max <= rate) {\n          res.send(JSON.stringify(d));\n        }\n      }\n    });\n  });\n}\n\n\n\n\u30dd\u30a4\u30f3\u30c8\n\n\u307e\u305a\u306f\u5148\u307b\u3069\u7528\u610f\u3057\u305f\u30ac\u30c1\u30e3\u3067\u51fa\u73fe\u3059\u308bItem\u30c7\u30fc\u30bf\u306ejson\u3092\u8aad\u307f\u8fbc\u3080\n\u4eca\u56de\u306f\u30c7\u30fc\u30bf\u3092\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u7f6e\u3044\u3066\u308b\u306e\u3067\u305d\u3053\u304b\u3089\u53d6\u5f97\n\u305d\u306e\u5f8cjson\u30c7\u30fc\u30bf\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u78ba\u7387\u306e\u7d2f\u8a08\u3092\u6c42\u3081\u3001\u4e71\u6570\u3092\u751f\u6210\u3057\u3066\u30de\u30c3\u30c1\u3059\u308b\u30a2\u30a4\u30c6\u30e0\u3092\u8fd4\u3059\n\n\u65e9\u901f\u3053\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u767b\u9332\u3057\u3001\u305f\u3081\u306b\u3057\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d1\u30cd\u30eb\u304b\u3089\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u2b50\ufe0f1\u306e\u30ab\u30c4\u4e3c\u304c\u51fa\u307e\u3057\u305f\u3002\n\nswift\u304b\u3089\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u547c\u3073\u51fa\u3059\n\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f7f\u3063\u3066\u30ac\u30c1\u30e3\u306e\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u304c\u5b8c\u4e86\u3057\u305f\u306e\u3067\u3001\u4eca\u5ea6\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u3068\u306a\u308biOS\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u306fAPI\u3092\u516c\u958b\u3057\u3066\u3044\u308b\u306e\u3067\u5358\u7d14\u306bswift\u304b\u3089\u3053\u308c\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u3066\u3042\u3052\u308c\u3070OK\u3067\u3059\u3002\n\u4e00\u898b\u96e3\u3057\u305d\u3046\u306b\u898b\u3048\u308bAPI\u306e\u8a8d\u8a3c\u306a\u306e\u3067\u3059\u304c\u3001\u5b9f\u306f\u3053\u308cAWS\u306e\u8a8d\u8a3c\u3068\u307e\u3063\u305f\u304f\u540c\u3058\u4ed5\u69d8\u306b\u306a\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u3067\u3059\u306e\u3067\u3001aws-sdk-ios\u3092\u4f7f\u3063\u3066\u7c21\u5358\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\n\naws-sdk-ios\u3092\u4f7f\u3063\u3066API\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b\n\u8a8d\u8a3c\u90e8\u5206\u306fAWSCore\u306b\u3042\u308b\u306e\u3067\u3001CocoaPods\u306a\u3069\u3067\u3053\u308c\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u307e\u3059\u3002\n\nPodfile\nlatform :ios, '8.0'\n\ntarget 'todaysLunch' do\n  pod 'AWSCore'\nend\n\n\naws-sdk-ios\u306fObjective-C\u3067\u66f8\u304b\u308c\u3066\u3044\u308b\u306e\u3067\u3001swift\u304b\u3089\u547c\u3079\u308b\u3088\u3046\u306bBridgeHeader\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nBridgeHeader.h\n#import \"AWSCore.h\"\n\n\n\u6e96\u5099\u304c\u6574\u3063\u305f\u306e\u3067\u3001\u5b9f\u969b\u306b\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u306eAPI\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u3066\u307f\u307e\u3059\u3002\n\nScript.swift\nclass Script: NSObject, XMLParserDelegate {\n\n    var endpoint: URL\n    var version: String\n    var credentialsProvider: AWSStaticCredentialsProvider\n\n    var currentElementName = \"\"\n    var responseData       = \"\"\n\n    init(endpoint: String, version: String, accessKey: String, secretKey: String){\n        self.endpoint = URL(string: String(format: \"%@/%@\",endpoint,version))!\n        self.version = version\n        self.credentialsProvider = AWSStaticCredentialsProvider(accessKey: accessKey,secretKey: secretKey)\n    }\n\n    func executeScript(scriptIdentifier: String, method: String, query: String = \"null\", body: String  = \"null\", header: String = \"null\", callback: @escaping (String, String?) -> Void) {\n        let action   = \"ExecuteScript\"\n        let httpBody = String(format: \"ScriptIdentifier=%@&Method=%@&Query=%@&Header=%@&Body=%@\",scriptIdentifier,method,query,header,body)\n        let req = makeReqest(body: httpBody, action: action)\n        let task = URLSession.shared.dataTask(with: req as URLRequest, completionHandler: {data, response, error in\n            if error == nil {\n                let parser = XMLParser(data: data! as Data)\n                parser.delegate = self\n                parser.parse()\n                callback(self.responseData as String, nil)\n            } else {\n                callback(\"\", error!.localizedDescription)\n            }\n        })\n        task.resume()\n    }\n\n    func makeReqest(body: String, action: String) -> NSMutableURLRequest {\n        let req: NSMutableURLRequest = NSMutableURLRequest(url: self.endpoint)\n        let date = Date()\n        let formatter = DateFormatter()\n        formatter.dateFormat = AWSDateISO8601DateFormat2\n\n        req.httpMethod = \"POST\"\n        req.httpBody = body.data(using: String.Encoding.utf8)\n        req.setValue(formatter.string(from: date), forHTTPHeaderField:\"X-Amz-Date\")\n        req.addValue(String(format: \"%@.%@\",self.version,action), forHTTPHeaderField: \"X-Amz-Target\")\n        req.addValue(\"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\", forHTTPHeaderField: \"Accept\")\n        req.addValue(\"application/x-www-form-urlencoded\", forHTTPHeaderField: \"Content-Type\")\n\n        let signer: AWSSignatureV4Signer = AWSSignatureV4Signer(\n            credentialsProvider: self.credentialsProvider,\n            endpoint: AWSEndpoint.init(region: AWSRegionType.usEast1, service: AWSServiceType.lambda, url: self.endpoint))\n        signer.interceptRequest(req)\n        return req\n    }\n\n    func parser(_ parser: XMLParser, didStartElement elementName: String, namespaceURI: String?, qualifiedName qName: String?, attributes attributeDict: [String : String]) {\n        currentElementName = elementName\n    }\n\n    func parser(_ parser: XMLParser, foundCharacters string: String) {\n        if currentElementName == \"ResponseData\" {\n            responseData = string\n        }\n    }\n}\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\nlet script = Script(endpoint:  \"https://script.api.cloud.nifty.com\",\n                    version:   \"2015-09-01\",\n                    accessKey: MY_ACCESS_KEY,\n                    secretKey: MY_SECRET_KEY)\n\nscript.executeScript(scriptIdentifier: \"hoge.js\", method: \"GET\") { (response, error) -> Void in\n\n  if error != nil {\n      print(error)\n  }\n\n  let json = try! JSONSerialization.jsonObject(with: response.data(using: String.Encoding.utf8)!) as! [String: AnyObject]\n  print(json)\n}\n\n\n\u30dd\u30a4\u30f3\u30c8\n\nACCESS_KEY\u3068SECRET_KEY\u306f\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d1\u30cd\u30eb\u304b\u3089\u53d6\u5f97\u3057\u305f\u81ea\u5206\u306e\u30ad\u30fc\u3092\u4f7f\u3046\naws-sdk-ios\u306eAWSSignatureV4Signer\u30af\u30e9\u30b9\u3092\u4f7f\u3063\u3066\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3060\u3051\nAPI\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u3068\u3057\u3066XML\u304c\u8fd4\u3055\u308c\u308b\u306e\u3067\u300cResponseData\u300d\u3092\u53d6\u5f97\u3059\u308c\u3070\u5b8c\u4e86\n\n\n\u307e\u3068\u3081\nswift\u304b\u3089\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u308c\u3070\u3001\u305d\u306e\u7d50\u679c\u3092\u753b\u9762\u306b\u8868\u793a\u3055\u305b\u3066\u3042\u3052\u308b\u3060\u3051\u3067\u30a2\u30d7\u30ea\u306f\u5b8c\u6210\u3067\u3059\uff01\n\n\u30bd\u30fc\u30b9\u306e\u5168\u4f53\u306fgithub\u306b\u3082\u3042\u3052\u3066\u3042\u308a\u307e\u3059\u306e\u3067\u3053\u3061\u3089\u3082\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\u3044\u304b\u304c\u3067\u3057\u305f\u3067\u3057\u3087\u3046\u304b\uff1f\n\u666e\u901a\u306b\u4f5c\u3063\u305f\u3089\u7d50\u69cb\u5927\u5909\u306aiOS\u3068\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u306e\u9023\u643a\u30a2\u30d7\u30ea\u304c\u3053\u3093\u306a\u7c21\u5358\u306b\u4f5c\u308c\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\u3084\u3063\u3071\u308a\u81ea\u5206\u3067\u30b5\u30fc\u30d0\u30fc\u3092\u7528\u610f\u3057\u306a\u304f\u3066\u3044\u3044\u306e\u306f\u697d\u3067\u3044\u3044\u3067\u3059\u306d\u3002\n\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u3068\u3066\u3082\u4fbf\u5229\u306a\u30b5\u30fc\u30d3\u30b9\u3060\u3068\u601d\u3046\u306e\u3067\u3001\u7686\u3055\u3093\u3082\u305c\u3072\u4f7f\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\u4ee5\u4e0a\u3001\u300cNIFTY Advent Calendar 2016\u300d\u306e1\u65e5\u76ee\u306e\u8a18\u4e8b\u3068\u3057\u3066\u3001\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u969b\u306e\u30a2\u30d7\u30ea\u3067\u4f7f\u3063\u3066\u307f\u305f\u8a71\u3092\u8a18\u8f09\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n# \u6982\u8981\n\n\u8fd1\u5e74\u306e\u30bd\u30fc\u30b7\u30e3\u30eb\u30b2\u30fc\u30e0\u3067\u306f\u6b20\u304b\u305b\u306a\u3044\u8981\u7d20\u3067\u3042\u308b **\u30ac\u30c1\u30e3**\u3002\n\u30ac\u30c1\u30e3\u3092\u5f15\u304f\u306e\u304c\uff11\u756a\u306e\u697d\u3057\u307f\u3068\u3044\u3046\u30e6\u30fc\u30b6\u30fc\u3082\u591a\u304f\u3001\u6700\u65e9\u30a2\u30d7\u30ea\u306e\u30e1\u30a4\u30f3\u30b3\u30f3\u30c6\u30f3\u30c4\u3068\u3082\u8a00\u3048\u307e\u3059\u3002\n\u4eca\u56de\u306f\u305d\u3093\u306a\u30ac\u30c1\u30e3\u3092\u5f15\u304f\u3060\u3051\u306e\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3082\u8f09\u305b\u3066\u3042\u308b\u306e\u3067\u3001\u30bd\u30fc\u30b7\u30e3\u30eb\u30b2\u30fc\u30e0\u3092\u4f5c\u3063\u3066\u307f\u305f\u3044\u65b9\u3084Swift\u306e\u52c9\u5f37\u3092\u3057\u3066\u3044\u308b\u65b9\u306e\u53c2\u8003\u306b\u306a\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n\n# \u30a2\u30d7\u30ea\u7d39\u4ecb\nToday's Lunch\u3068\u3044\u3046\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\u300c\u4eca\u65e5\u306e\u3054\u98ef\u306a\u306b\u305f\u3079\u3088\u3046\u300d\u3068\u8ff7\u3063\u305f\u6642\u306b\u30ac\u30c1\u30e3\u3067\u6c7a\u3081\u3088\u3046\u3068\u3044\u3046\u30a2\u30d7\u30ea\u3067\u3059\u3002\n\u98df\u3079\u7269\u306e\u4e2d\u306b\u306f\u8d85\u6fc0\u30ec\u30a2\u306a\u30a2\u30a4\u30c6\u30e0\u3082\u3042\u308b\u306e\u3067\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\u3092\u76ee\u6307\u3057\u3066\u697d\u3057\u3080\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n<img width=\"375\" alt=\"Simulator Screen Shot 2016.11.22 0.24.07.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/63169/0e9f9678-7885-9d2d-e6f5-1fb5e2d94bdb.png\">\n\n\n# \u30bd\u30fc\u30b9\n[github](https://github.com/fuku2014/todays-lunch)\n\n# \u30c7\u30fc\u30bf\u306e\u7528\u610f\n\u307e\u305a\u306f\u30ac\u30c1\u30e3\u3067\u51fa\u73fe\u3059\u308bItem\u306e\u30c7\u30fc\u30bf\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\njson\u30d5\u30a1\u30a4\u30eb\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\n```json:lunch.json\n{\n    \"foods\": [ \n        {\n            \"name\": \"\u304a\u306b\u304e\u308a\", \n            \"rate\": 50, \n            \"star\": \"\u2606\"\n        }, \n        {\n            \"name\": \"\u30cf\u30f3\u30d0\u30fc\u30ac\u30fc\", \n            \"rate\": 25, \n            \"star\": \"\u2606\u2606\"\n        }, \n        {\n            \"name\": \"\u30b3\u30ed\u30c3\u30b1\u5b9a\u98df\", \n            \"rate\": 15, \n            \"star\": \"\u2606\u2606\u2606\"\n        }, \n        {\n            \"name\": \"\u304b\u3089\u63da\u3052\u5b9a\u98df\", \n            \"rate\": 7, \n            \"star\": \"\u2606\u2606\u2606\u2606\"\n        },\n        {\n            \"name\": \"\u713c\u8089\u30e9\u30f3\u30c1\", \n            \"rate\": 3, \n            \"star\": \"\u2606\u2606\u2606\u2606\u2606\"\n        }\n    ]\n}\n```\n\nitem\u306b\u306f\u540d\u524d\u3068\u78ba\u7387\u3068\u30ec\u30a2\u30ea\u30c6\u30a3\u3067\u3042\u308b\u2606\u304c\u5b9a\u7fa9\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\u4e00\u822c\u7684\u306a\u30bd\u30fc\u30b7\u30e3\u30eb\u30b2\u30fc\u30e0\u306e\u30ac\u30c1\u30e3\u3082\u3053\u308c\u304f\u3089\u3044\u306e\u78ba\u7387\u3067\u3059\u306d\u3002\n\u2b50\ufe0f5\u304c\u51fa\u305f\u3089\u30e9\u30c3\u30ad\u30fc!\n\n# \u69cb\u6210\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306fiOS\u5411\u3051\u306b\u4f5c\u3063\u305f\u306e\u3067Swift3.0\u3067\u3059\u3002\n\n\u901a\u5e38\u30ac\u30c1\u30e3\u306e\u30ed\u30b8\u30c3\u30af\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u306f\u306a\u304f\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3068\u601d\u3046\u306e\u3067\u3001\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068\u305d\u308c\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u30b5\u30fc\u30d0\u30fc\u3082\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001\u81ea\u5206\u3067\u30b5\u30fc\u30d0\u30fc\u3092\u7528\u610f\u3059\u308b\u3068\u306a\u308b\u3068\u30b5\u30fc\u30d0\u30fc\u81ea\u4f53\u306e\u30a4\u30f3\u30d5\u30e9\u6599\u91d1\u306f\u3082\u3061\u308d\u3093\u3001\u30b5\u30fc\u30d0\u30fc\u306e\u69cb\u7bc9\u3084\u904b\u7528\u306b\u3082\u81a8\u5927\u306a\u5de5\u6570\u3092\u53d6\u3089\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u305d\u3093\u306a\u304a\u60a9\u307f\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u306b\u3001\u4eca\u56de\u306f2016/10/25\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u3070\u304b\u308a\u306e[\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8](http://cloud.nifty.com/service/script.htm)\u3068\u3044\u3046\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n## \u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u3068\u306f\uff1f\n\u3053\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30af\u30e9\u30a6\u30c9\u4e0a\u3067\u5b9f\u884c\u3067\u304d\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\n\u3059\u3050\u306bNode.js\u306e\u5b9f\u884c\u74b0\u5883\u304c\u624b\u306b\u5165\u308b\u306e\u3067\u3001[*\u30b5\u30fc\u30d0\u30fc\u4e0d\u8981*] [*\u74b0\u5883\u69cb\u7bc9\u4e0d\u8981*]  [*\u904b\u7528\u4e0d\u8981*] \u3068\u5927\u5909\u4fbf\u5229\u3067\u3059\u3002\n\n\u3055\u3089\u306b\u901a\u5e38\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u7528\u610f\u3059\u308b\u306e\u3068\u6bd4\u3079\u3066\u4f4e\u30b3\u30b9\u30c8\u3067\u904b\u7528\u3067\u304d\u308b\u30e1\u30ea\u30c3\u30c8\u3082\u3042\u308a\u307e\u3059\u3002\n\u4f8b\u3068\u3057\u3066\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u306eIaaS\u3067\u904b\u7528\u3057\u305f\u5834\u5408\u3068\u30b3\u30b9\u30c8\u3092\u6bd4\u8f03\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n* \u30ac\u30c1\u30e3\u304c\u6708\u306b10,000\u56de\u5b9f\u884c\u3055\u308c\u305f\u5834\u5408\n\n|                                      |              \u6708\u984d\u30b3\u30b9\u30c8  |     \n|:-----------------|------------------:|\n| [\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9 mediumu\u30b5\u30fc\u30d0\u30fc ](http://cloud.nifty.com/price/)      |              24,200\u5186 |          \n| [\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8](http://cloud.nifty.com/price/ep.htm#script)         |            1,000\u5186 + 300\u5186 | \n\u203b \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u51e6\u7406\u6642\u9593\u306f1\u56de0.\uff11\u79d2\u3068\u3057\u3066\u307e\u3059\u3002\n\n\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u5b8c\u5168\u91cd\u91cf\u8ab2\u91d1\u306a\u306e\u3067\u3001\u5b9f\u884c\u56de\u6570\u3068\u51e6\u7406\u6642\u9593\u306b\u5fdc\u3058\u3066\u8ab2\u91d1\u3055\u308c\u307e\u3059\u3002\n\u3064\u307e\u308a\u3001\u901a\u5e38\u306e\u30b5\u30fc\u30d0\u30fc\u306e\u3088\u3046\u306b\u30a2\u30d7\u30ea\u304c\u4eba\u6c17\u3067\u306a\u304f\u3066\u58f2\u308a\u4e0a\u3052\u304c\u306a\u3044\u306e\u306b\u30b5\u30fc\u30d0\u30fc\u306e\u6599\u91d1\u3092\u53d6\u3089\u308c\u3066\u3057\u307e\u3046\u3068\u3044\u3046\u3053\u3068\u3082\u306a\u3044\u306e\u3067\u5b89\u5fc3\u3067\u3059\u3002\n\u9006\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u305f\u304f\u3055\u3093\u5b9f\u884c\u3055\u308c\u3066\u91d1\u984d\u304c\u304b\u304b\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u305d\u308c\u3060\u3051\u30a2\u30d7\u30ea\u306e\u58f2\u4e0a\u3082\u4e0a\u304c\u3063\u3066\u3044\u308b\u3063\u3066\u3053\u3068\u3067\u3059\u306d\u3002\n\u305d\u306e\u5834\u5408\u3082\u81ea\u5206\u3067\u30b5\u30fc\u30d0\u30fc\u306e\u30b9\u30da\u30c3\u30af\u3092\u3042\u3052\u305f\u308a\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3059\u308b\u5fc5\u8981\u3082\u306a\u3044\u306e\u3067\u4fbf\u5229\u3067\u3059\u3002\n\n## \u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u3078\u767b\u9332\u3059\u308b\n\n[\u30af\u30a4\u30c3\u30af\u30b9\u30bf\u30fc\u30c8](http://cloud.nifty.com/guide/script/quickstart.htm)\u3092\u53c2\u8003\u306b[\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8](http://cloud.nifty.com/service/script.htm)\u3078\u306e\u767b\u9332\u3092\u5b8c\u4e86\u3055\u305b\u307e\u3059\u3002\n\u4ee5\u4e0a\u3067\u6e96\u5099\u306f\u5b8c\u4e86\u3067\u3059\u3001\u3044\u3088\u3044\u3088\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f7f\u3063\u3066\u30ac\u30c1\u30e3\u3092\u5b9f\u884c\u3055\u308c\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u3002\n\n# Node.js\u3067\u30ac\u30c1\u30e3\u3092\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3059\u308b\n\n\u3053\u3061\u3089\u304c\u5b8c\u6210\u5f62\u306e\u30bd\u30fc\u30b9\u306b\u306a\u308a\u307e\u3059\u3002\n\n```js:script.js\nconst URL = 'https://lunch.jp-east-2.os.cloud.nifty.com/lunch.json';\n\nlet http = require('https');\nmodule.exports = (req, res) => {\n  http.get(URL, (result) => {\n    let body = '';\n    result.setEncoding('utf8');\n\n    result.on('data', (chunk) => {\n      body += chunk;\n    });\n\n    result.on('end', (result) => {\n      data = JSON.parse(body);\n      let max = 0;\n      data.foods.forEach(d => {\n        max += d[\"rate\"];\n      });\n\n      let rate = Math.floor(Math.random() * max);\n      for (var d of data.foods) {\n        max -= d[\"rate\"];\n        if (max <= rate) {\n          res.send(JSON.stringify(d));\n        }\n      }\n    });\n  });\n}\n```\n\n## \u30dd\u30a4\u30f3\u30c8\n* \u307e\u305a\u306f\u5148\u307b\u3069\u7528\u610f\u3057\u305f\u30ac\u30c1\u30e3\u3067\u51fa\u73fe\u3059\u308bItem\u30c7\u30fc\u30bf\u306ejson\u3092\u8aad\u307f\u8fbc\u3080\n* \u4eca\u56de\u306f\u30c7\u30fc\u30bf\u3092[\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8](http://cloud.nifty.com/service/obj_storage.htm)\u306b\u7f6e\u3044\u3066\u308b\u306e\u3067\u305d\u3053\u304b\u3089\u53d6\u5f97\n* \u305d\u306e\u5f8cjson\u30c7\u30fc\u30bf\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u78ba\u7387\u306e\u7d2f\u8a08\u3092\u6c42\u3081\u3001\u4e71\u6570\u3092\u751f\u6210\u3057\u3066\u30de\u30c3\u30c1\u3059\u308b\u30a2\u30a4\u30c6\u30e0\u3092\u8fd4\u3059\n\n\u65e9\u901f\u3053\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u767b\u9332\u3057\u3001\u305f\u3081\u306b\u3057\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d1\u30cd\u30eb\u304b\u3089\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n![script.png](https://qiita-image-store.s3.amazonaws.com/0/63169/1eb64629-7821-63ed-12a9-41b4d0be9107.png)\n\n\u2b50\ufe0f1\u306e\u30ab\u30c4\u4e3c\u304c\u51fa\u307e\u3057\u305f\u3002\n\n# swift\u304b\u3089\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u547c\u3073\u51fa\u3059\n\n\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f7f\u3063\u3066\u30ac\u30c1\u30e3\u306e\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u304c\u5b8c\u4e86\u3057\u305f\u306e\u3067\u3001\u4eca\u5ea6\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u3068\u306a\u308biOS\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u306f[API](http://cloud.nifty.com/api/script/)\u3092\u516c\u958b\u3057\u3066\u3044\u308b\u306e\u3067\u5358\u7d14\u306bswift\u304b\u3089\u3053\u308c\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u3066\u3042\u3052\u308c\u3070OK\u3067\u3059\u3002\n\n\u4e00\u898b\u96e3\u3057\u305d\u3046\u306b\u898b\u3048\u308b[API\u306e\u8a8d\u8a3c](http://cloud.nifty.com/api/script/start.htm)\u306a\u306e\u3067\u3059\u304c\u3001\u5b9f\u306f\u3053\u308cAWS\u306e\u8a8d\u8a3c\u3068\u307e\u3063\u305f\u304f\u540c\u3058\u4ed5\u69d8\u306b\u306a\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u3067\u3059\u306e\u3067\u3001[aws-sdk-ios](https://github.com/aws/aws-sdk-ios)\u3092\u4f7f\u3063\u3066\u7c21\u5358\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\n\n## aws-sdk-ios\u3092\u4f7f\u3063\u3066API\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b\n\n\u8a8d\u8a3c\u90e8\u5206\u306fAWSCore\u306b\u3042\u308b\u306e\u3067\u3001CocoaPods\u306a\u3069\u3067\u3053\u308c\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u307e\u3059\u3002\n\n```:Podfile\nlatform :ios, '8.0'\n\ntarget 'todaysLunch' do\n  pod 'AWSCore'\nend\n```\naws-sdk-ios\u306fObjective-C\u3067\u66f8\u304b\u308c\u3066\u3044\u308b\u306e\u3067\u3001swift\u304b\u3089\u547c\u3079\u308b\u3088\u3046\u306bBridgeHeader\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```:BridgeHeader.h\n#import \"AWSCore.h\"\n```\n\n\u6e96\u5099\u304c\u6574\u3063\u305f\u306e\u3067\u3001\u5b9f\u969b\u306b\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u306eAPI\u3092\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u3066\u307f\u307e\u3059\u3002\n\n```swift:Script.swift\nclass Script: NSObject, XMLParserDelegate {\n    \n    var endpoint: URL\n    var version: String\n    var credentialsProvider: AWSStaticCredentialsProvider\n    \n    var currentElementName = \"\"\n    var responseData       = \"\"\n    \n    init(endpoint: String, version: String, accessKey: String, secretKey: String){\n        self.endpoint = URL(string: String(format: \"%@/%@\",endpoint,version))!\n        self.version = version\n        self.credentialsProvider = AWSStaticCredentialsProvider(accessKey: accessKey,secretKey: secretKey)\n    }\n    \n    func executeScript(scriptIdentifier: String, method: String, query: String = \"null\", body: String  = \"null\", header: String = \"null\", callback: @escaping (String, String?) -> Void) {\n        let action   = \"ExecuteScript\"\n        let httpBody = String(format: \"ScriptIdentifier=%@&Method=%@&Query=%@&Header=%@&Body=%@\",scriptIdentifier,method,query,header,body)\n        let req = makeReqest(body: httpBody, action: action)\n        let task = URLSession.shared.dataTask(with: req as URLRequest, completionHandler: {data, response, error in\n            if error == nil {\n                let parser = XMLParser(data: data! as Data)\n                parser.delegate = self\n                parser.parse()\n                callback(self.responseData as String, nil)\n            } else {\n                callback(\"\", error!.localizedDescription)\n            }\n        })\n        task.resume()\n    }\n    \n    func makeReqest(body: String, action: String) -> NSMutableURLRequest {\n        let req: NSMutableURLRequest = NSMutableURLRequest(url: self.endpoint)\n        let date = Date()\n        let formatter = DateFormatter()\n        formatter.dateFormat = AWSDateISO8601DateFormat2\n        \n        req.httpMethod = \"POST\"\n        req.httpBody = body.data(using: String.Encoding.utf8)\n        req.setValue(formatter.string(from: date), forHTTPHeaderField:\"X-Amz-Date\")\n        req.addValue(String(format: \"%@.%@\",self.version,action), forHTTPHeaderField: \"X-Amz-Target\")\n        req.addValue(\"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\", forHTTPHeaderField: \"Accept\")\n        req.addValue(\"application/x-www-form-urlencoded\", forHTTPHeaderField: \"Content-Type\")\n        \n        let signer: AWSSignatureV4Signer = AWSSignatureV4Signer(\n            credentialsProvider: self.credentialsProvider,\n            endpoint: AWSEndpoint.init(region: AWSRegionType.usEast1, service: AWSServiceType.lambda, url: self.endpoint))\n        signer.interceptRequest(req)\n        return req\n    }\n    \n    func parser(_ parser: XMLParser, didStartElement elementName: String, namespaceURI: String?, qualifiedName qName: String?, attributes attributeDict: [String : String]) {\n        currentElementName = elementName\n    }\n    \n    func parser(_ parser: XMLParser, foundCharacters string: String) {\n        if currentElementName == \"ResponseData\" {\n            responseData = string\n        }\n    }\n}\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\n\n```swift:\nlet script = Script(endpoint:  \"https://script.api.cloud.nifty.com\",\n                    version:   \"2015-09-01\",\n                    accessKey: MY_ACCESS_KEY,\n                    secretKey: MY_SECRET_KEY)\n        \nscript.executeScript(scriptIdentifier: \"hoge.js\", method: \"GET\") { (response, error) -> Void in\n\n  if error != nil {\n      print(error)\n  }\n\n  let json = try! JSONSerialization.jsonObject(with: response.data(using: String.Encoding.utf8)!) as! [String: AnyObject]\n  print(json)\n}\n```\n\n###  \u30dd\u30a4\u30f3\u30c8\n\n* ACCESS_KEY\u3068SECRET_KEY\u306f\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d1\u30cd\u30eb\u304b\u3089\u53d6\u5f97\u3057\u305f\u81ea\u5206\u306e\u30ad\u30fc\u3092\u4f7f\u3046\n* aws-sdk-ios\u306eAWSSignatureV4Signer\u30af\u30e9\u30b9\u3092\u4f7f\u3063\u3066\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3060\u3051\n* API\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u3068\u3057\u3066XML\u304c\u8fd4\u3055\u308c\u308b\u306e\u3067\u300cResponseData\u300d\u3092\u53d6\u5f97\u3059\u308c\u3070\u5b8c\u4e86\n\n# \u307e\u3068\u3081\n\nswift\u304b\u3089\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u308c\u3070\u3001\u305d\u306e\u7d50\u679c\u3092\u753b\u9762\u306b\u8868\u793a\u3055\u305b\u3066\u3042\u3052\u308b\u3060\u3051\u3067\u30a2\u30d7\u30ea\u306f\u5b8c\u6210\u3067\u3059\uff01\n\n<img width=\"414\" alt=\"Simulator Screen Shot 2016.11.22 0.45.17.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/63169/66b30379-3958-44bd-47c3-f3154142dfed.png\">\n\n\n\u30bd\u30fc\u30b9\u306e\u5168\u4f53\u306f[github](https://github.com/fuku2014/todays-lunch)\u306b\u3082\u3042\u3052\u3066\u3042\u308a\u307e\u3059\u306e\u3067\u3053\u3061\u3089\u3082\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\n\u3044\u304b\u304c\u3067\u3057\u305f\u3067\u3057\u3087\u3046\u304b\uff1f\n\u666e\u901a\u306b\u4f5c\u3063\u305f\u3089\u7d50\u69cb\u5927\u5909\u306aiOS\u3068\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u306e\u9023\u643a\u30a2\u30d7\u30ea\u304c\u3053\u3093\u306a\u7c21\u5358\u306b\u4f5c\u308c\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\u3084\u3063\u3071\u308a\u81ea\u5206\u3067\u30b5\u30fc\u30d0\u30fc\u3092\u7528\u610f\u3057\u306a\u304f\u3066\u3044\u3044\u306e\u306f\u697d\u3067\u3044\u3044\u3067\u3059\u306d\u3002\n\n[\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8](http://cloud.nifty.com/api/script/)\u306f\u3068\u3066\u3082\u4fbf\u5229\u306a\u30b5\u30fc\u30d3\u30b9\u3060\u3068\u601d\u3046\u306e\u3067\u3001\u7686\u3055\u3093\u3082\u305c\u3072\u4f7f\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u4ee5\u4e0a\u3001\u300c[NIFTY Advent Calendar 2016](http://qiita.com/advent-calendar/2016/nifty)\u300d\u306e1\u65e5\u76ee\u306e\u8a18\u4e8b\u3068\u3057\u3066\u3001\u30cb\u30d5\u30c6\u30a3\u30af\u30e9\u30a6\u30c9\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u969b\u306e\u30a2\u30d7\u30ea\u3067\u4f7f\u3063\u3066\u307f\u305f\u8a71\u3092\u8a18\u8f09\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n", "tags": ["Swift", "Swift3.0", "Node.js", "NiftyCloud"]}