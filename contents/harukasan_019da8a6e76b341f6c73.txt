{"context": " More than 1 year has passed since last update.Google Cloud Dataflow\u304cpublic beta\u306b\u306a\u3063\u3066\u304b\u3089\u8a66\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u305f\u306e\u3067\u3001\u3088\u3046\u3084\u304f\u8a66\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u305f\u3002Google Cloud Dataflow\u304c\u4f55\u306a\u306e\u304b\u77e5\u308a\u305f\u3044\u6642\u306f\u6b21\u306e\u30b9\u30e9\u30a4\u30c9\u3092\u8aad\u3080\u3068\u826f\u3044\u3002\n\nGoogle Cloud Dataflow \u3092\u7406\u89e3\u3059\u308b - #bq_sushi\n\n\n\u5fc5\u8981\u306a\u3082\u306e\n\nGoogle Cloud Platform\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\nJava 8\nMaven\n\nJava 7\u3067\u306f\u52d5\u304b\u306a\u304b\u3063\u305f\u6c17\u304c\u3059\u308b\u306e\u3067\u3001Java 8\u3092\u3042\u3089\u304b\u3058\u3081\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304a\u3053\u3046\u3002Maven\u306fMac\u74b0\u5883\u3067\u3042\u308c\u3070Homebrew\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3002\n\nDataflow API\u3092\u6709\u52b9\u306b\u3059\u308b\n\u3042\u3089\u304b\u3058\u3081Dataflow API\u3092GCP\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u6709\u52b9\u306b\u3057\u3066\u304a\u3053\u3046\u3002\u30b3\u30f3\u30bd\u30fc\u30eb\u306eUI\u304c\u5909\u308f\u3063\u3066\u3066\u3061\u3087\u3063\u3068\u3073\u3073\u3063\u305f\u3051\u3069\u3001\u691c\u7d22\u3067\u304d\u308b\u306e\u3067\u7c21\u5358\u306b\u898b\u3064\u304b\u308b\u3002\n\n\nDataflow SDK for Java \u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\nGoogle Cloud Dataflow\u306eSDK\u306fGithub\u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3053\u308c\u3092clone\u3057\u3066\u304f\u308b\u3002\n$ git clone git@github.com:GoogleCloudPlatform/DataflowJavaSDK.git\n\nSDK\u306e\u30d3\u30eb\u30c9\u306fmvn\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3067\u304d\u308b\u3002\u6642\u9593\u304c\u304b\u304b\u308b\u306e\u3067\u3057\u3070\u3089\u304f\u5f85\u3068\u3046\u3002\n$ mvn clean install\n[INFO] Scanning for projects...\n...\n[INFO] Reactor Summary:\n[INFO]\n[INFO] Google Cloud Dataflow Java SDK - Parent ............ SUCCESS [  0.475 s]\n[INFO] Google Cloud Dataflow Java SDK - All ............... SUCCESS [02:36 min]\n[INFO] Google Cloud Dataflow Java Examples - All .......... SUCCESS [ 12.342 s]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 02:49 min\n[INFO] Finished at: 2015-05-28T18:17:45+09:00\n[INFO] Final Memory: 90M/773M\n[INFO] ------------------------------------------------------------------------\n\n\u6210\u529f\u3059\u308b\u3068\u3053\u3093\u306a\u611f\u3058\u3067\u8868\u793a\u3055\u308c\u308b\u3002\u3053\u308c\u3067\u30b5\u30f3\u30d7\u30eb\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u304c\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306f\u305a\u3060\u3002\n\nWordCount\u3092\u5b9f\u884c\u3057\u3066\u307f\u308b\n\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306eWordCount\u3092\u5b9f\u884c\u3057\u3066\u307f\u3088\u3046\u3002\u30b7\u30a7\u30a4\u30af\u30b9\u30d4\u30a2\u306e\u30c6\u30ad\u30b9\u30c8\u304b\u3089\u5358\u8a9e\u3054\u3068\u306b\u30ab\u30a6\u30f3\u30c8\u3059\u308b\u3088\u304f\u3042\u308b\u3084\u3064\u3060\u3002BigQuery\u3067\u3044\u3046\u3068\u3053\u3093\u306a\u304b\u3093\u3058(\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306f\u9055\u3046\u304b\u3082)\u3002\nSELECT\n  COUNT(word) AS count,\n  word\nFROM [publicdata:samples.shakespeare]\nGROUP BY word\n\n\n\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u3068\u51fa\u529b\u5148\u306e\u30d0\u30b1\u30c3\u30c8\u3092\u7528\u610f\u3059\u308b\n\nCloud Dataflow\u3067\u306f\u30b3\u30f3\u30d1\u30a4\u30eb\u6e08\u307f\u306ejar\u3068\u7d50\u679c\u306e\u51fa\u529b\u5148\u3068\u3057\u3066Google Cloud Storage\u3092\u4f7f\u7528\u3059\u308b\uff08\u51fa\u529b\u5148\u306fBigQuery\u306b\u5909\u3048\u308b\u3053\u3068\u3082\u3067\u304d\u308b)\u3002\u3042\u3089\u304b\u3058\u3081\u51fa\u529b\u5148\u306e\u30d0\u30b1\u30c3\u30c8\u3092\u7528\u610f\u3057\u3066\u304a\u3053\u3046\u3002\u30d0\u30b1\u30c3\u30c8\u306fgsutil\u30b3\u30de\u30f3\u30c9\u3067\u7528\u610f\u3057\u3066\u3082\u826f\u3044\u3057\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u4f5c\u3063\u3066\u3082\u826f\u3044\u3002\n\n\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3059\u308b\nGCE\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5916\u3067\u52d5\u304b\u3059\u3068\u6b21\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u529b\u3055\u308c\u308b\u3002\n[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.1:java (default-cli) on project google-cloud-dataflow-java-examples-all: An exception occured while executing the Java class. null: InvocationTargetException: Failed to construct instance from factory method com.google.cloud.dataflow.sdk.runners.BlockingDataflowPipelineRunner#fromOptions: Unable to get application default credentials. Please see https://developers.google.com/accounts/docs/application-default-credentials for details on how to specify credentials. This version of the SDK is dependent on the gcloud core component version 2015.02.05 or newer to be able to get credentials from the currently authorized user via gcloud auth. The Application Default Credentials are not available. They are available if running in Google Compute Engine. Otherwise, the environment variable GOOGLE_APPLICATION_CREDENTIALS must be defined pointing to a file defining the credentials. See https://developers.google.com/accounts/docs/application-default-credentials for more information. -> [Help 1]\n\n\u3053\u306e\u30a8\u30e9\u30fc\u306f\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u74b0\u5883\u5909\u6570GOOGLE_APPLICATION_CREDENTIALS\u306b\u6e21\u3059\u3053\u3068\u3067\u89e3\u6c7a\u3067\u304d\u308b\u3002\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u30d5\u30a1\u30a4\u30eb\u306f\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u65b0\u305f\u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3092\u767a\u884c\u3059\u308b\u3053\u3068\u3067\u53d6\u5f97\u3067\u304d\u308b\u3002\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308c\u3070\u3059\u3079\u3066\u306eGCP\u306eAPI\u304c\u5229\u7528\u3067\u304d\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u5916\u90e8\u306b\u6f0f\u6d29\u3057\u306a\u3044\u3088\u3046\u306b\u6271\u3044\u306b\u306f\u6c17\u3092\u3064\u3051\u3088\u3046\u3002\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fJSON\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092GOOGLE_APPLICATION_CREDENTIALS\u306b\u30bb\u30c3\u30c8\u3059\u308b\u3002\n\n\u30b8\u30e7\u30d6\u3092\u5b9f\u884c\u3059\u308b\n\u3053\u3053\u307e\u3067\u3067\u524d\u6e96\u5099\u306f\u5b8c\u4e86\u3060\u3002\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u3068\u51fa\u529b\u5148\u306e\u30d0\u30b1\u30c3\u30c8\u3092\u6307\u5b9a\u3057\u3066WordCount\u3092\u5b9f\u884c\u3057\u3066\u307f\u3088\u3046\u3002\n$ export export GOOGLE_APPLICATION_CREDENTIALS=/Users/harukasan/****.json\n$ PROJECT=\"(\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d)\"\n$ STAGING=\"gs://dataflow-testing-staging/wordcount\"\n$ OUTPUT=\"gs://dataflow-testing-output/wordcount\"\n$ mvn exec:java -pl examples \\\n  -Dexec.mainClass=com.google.cloud.dataflow.examples.WordCount \\\n  -Dexec.args=\"--project=${PROJECT} \\\n               --stagingLocation=${STAGING} \\\n               --runner=BlockingDataflowPipelineRunner \\\n               --output=${OUTPUT}\"\n[INFO] Scanning for projects...\n...\n\n\u5b9f\u884c\u4e2d\u306f\u7aef\u672b\u306b\u3082\u306a\u306b\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u304b\u8868\u793a\u3055\u308c\u308b\u3057\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u3082\u30b0\u30e9\u30d5\u30a3\u30ab\u30eb\u306b\u30ed\u30b0\u3092\u898b\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u5b9f\u969b\u306b\u30d0\u30c3\u30c1\u3092\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u3057\u3066\u52d5\u4f5c\u3055\u305b\u3066\u3044\u308b\u6642\u306b\u306f\u4fbf\u5229\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n\u7d50\u679c\u306fGoogle Cloud Storage\u306b\u51fa\u529b\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u78ba\u8a8d\u3057\u3066\u307f\u3088\u3046\u3002\n\n\u305d\u308c\u305e\u308c\u306e\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u306b\u306f\u5404\u884c\u306b\u30ef\u30fc\u30c9\u3054\u3068\u306e\u30ab\u30a6\u30f3\u30c8\u304c\u8a18\u9332\u3055\u308c\u3066\u3044\u308b\u3002\n\nwordcount-00000-of-00009\nstoops: 1\nknapped: 1\nwas: 46\nsense: 5\nvassal: 1\ngraves: 1\nbuilding: 1\nshadowy: 1\n...\n\n\n\nWordCount\u306f\u4f55\u3092\u3084\u3063\u3066\u3044\u308b\u306e\u304b\n\u305b\u3063\u304b\u304f\u306a\u306e\u3067WordCount\u306f\u4f55\u3092\u3057\u3066\u3044\u308b\u306e\u304b\u898b\u3066\u307f\u3088\u3046\u3002main()\u306e\u51e6\u7406\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\nexamples/src/main/java/com/google/cloud/dataflow/examples/WordCount.java\n  public static void main(String[] args) {\n    Options options = PipelineOptionsFactory.fromArgs(args).withValidation().as(Options.class);\n    Pipeline p = Pipeline.create(options);\n\n    p.apply(TextIO.Read.named(\"ReadLines\").from(options.getInput()))\n     .apply(new CountWords())\n     .apply(TextIO.Write.named(\"WriteCounts\")\n         .to(options.getOutput())\n         .withNumShards(options.getNumShards()));\n\n    p.run();\n  }\n\n\n\u3053\u3053\u3067\u306f\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u4f5c\u6210\u3057\u3001\u3044\u304f\u3064\u304b\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092apply\u306b\u6e21\u3057\u3066\u3044\u308b\u3002TextIO\u306f\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u66f8\u304d\u3092\u3059\u308b\u305f\u3081\u306e\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u3067\u3001Google Cloud Storage\u304b\u3089\u306e\u8aad\u307f\u66f8\u304d\u3092\u7c21\u5358\u306b\u8a18\u8ff0\u3067\u304d\u308b\u3002\n\u5b9f\u969b\u306e\u96c6\u8a08\u3092\u884c\u3063\u3066\u3044\u308b\u306e\u306fCountWords\u30af\u30e9\u30b9\u3060\u3002CountWords\u30af\u30e9\u30b9\u306fPTransform<PCollection<String>, PCollection<String>>\u3092\u7d99\u627f\u3057\u3066\u3044\u308b\u3002Dataflow SDK\u3067\u306fPTransform\u3092\u7d99\u627f\u3057\u3066\u30c7\u30fc\u30bf\u3092transform\u3059\u308b\u51e6\u7406\u3092\u8a18\u8ff0\u3059\u308b\u3002\n\nexamples/src/main/java/com/google/cloud/dataflow/examples/WordCount.java\n  public static class CountWords extends PTransform<PCollection<String>, PCollection<String>> {\n    private static final long serialVersionUID = 0;\n\n    @Override\n    public PCollection<String> apply(PCollection<String> lines) {\n\n      // 1\u884c\u304b\u3089\u30ef\u30fc\u30c9\u3092\u62bd\u51fa\u3059\u308b\n      PCollection<String> words = lines.apply(\n          ParDo.of(new ExtractWordsFn()));\n\n      // \u30ef\u30fc\u30c9\u3092\u30ab\u30a6\u30f3\u30c8\u3059\u308b\n      PCollection<KV<String, Long>> wordCounts =\n          words.apply(Count.<String>perElement());\n\n      // \u30ef\u30fc\u30c9\u3068\u30ab\u30a6\u30f3\u30c8\u3054\u3068\u306b\u51fa\u529b\u3059\u308b\u6587\u5b57\u5217\u306b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3059\u308b\n      PCollection<String> results = wordCounts.apply(\n          ParDo.of(new FormatCountsFn()));\n\n      return results;\n    }\n  }\n\n\nDataflow SDK\u3067\u306f\u30c7\u30fc\u30bf\u3092PCollection\u30af\u30e9\u30b9\u3067\u8868\u73fe\u3059\u308b\u3002PCollection\u306fInteger\u3084String\u3068\u3044\u3063\u305f\u30c7\u30fc\u30bf\u3092\u8907\u6570\u683c\u7d0d\u3059\u308b\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u3067\u3001PCollection\u306eapply\u30e1\u30bd\u30c3\u30c9\u306b\u51e6\u7406\u3092\u884c\u3046\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3059\u3053\u3068\u3067\u30c7\u30fc\u30bf\u306e\u5909\u5f62\u3092\u884c\u3046\u3002\n\n\u884c\u304b\u3089\u30ef\u30fc\u30c9\u3092\u62bd\u51fa\u3059\u308b\n\u4f8b\u3068\u3057\u3066\u884c\u304b\u3089\u30ef\u30fc\u30c9\u3092\u62bd\u51fa\u3059\u308b\u51e6\u7406\u3092\u898b\u3066\u307f\u3088\u3046\u3002lines\u306eapply\u30e1\u30bd\u30c3\u30c9\u306b\u5bfe\u3057ParDo.of(new ExtractWordsFn())\u3092\u6e21\u3057\u3066\u3044\u308b\u3002ParDo\u306fCloud Dataflow\u306b\u304a\u3044\u3066\u4e26\u5217\u51e6\u7406\u3092\u884c\u3046\u305f\u3081\u306e\u30b3\u30a2\u3068\u306a\u308b\u4ed5\u7d44\u307f\u3067\u3001MapReduce\u306b\u304a\u3051\u308bMapper\u306b\u8fd1\u3044\u51e6\u7406\u3092\u884c\u3046\u3002\u3064\u307e\u308a\u3001\u5165\u529b\u3055\u308c\u305fPCollection\u3092\u8981\u7d20\u3054\u3068\u306b\u5206\u6563\u3057\u3001\u51e6\u7406\u3092\u5b9f\u884c\u3057\u3066\u304f\u308c\u308b\u308f\u3051\u3060\u3002ParDo\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u884c\u3054\u3068\u306b\u5206\u6563\u3057\u3066\u5358\u8a9e\u306b\u5206\u5272\u3059\u308b\u51e6\u7406\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3002\nParDo\u306b\u306fDoFn\u3092\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3059\u3002ExtractWordsFn\u306e\u5b9f\u88c5\u3092\u898b\u3066\u307f\u3088\u3046\u3002DoFn<String, String>\u306fString\u3092\u5165\u529b\u3057\u3001String\u3092\u51fa\u529b\u3059\u308b\u51e6\u7406\u3092\u793a\u3059\u3002\u8981\u7d20\u306e\u51e6\u7406\u306fprocessElement\u30e1\u30bd\u30c3\u30c9\u3067\u884c\u3046\u3002\u3053\u3053\u3067\u306f\u6b63\u898f\u8868\u73fe\u306b\u3088\u308b\u5206\u5272\u304c\u884c\u308f\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\nexamples/src/main/java/com/google/cloud/dataflow/examples/WordCount.java\n  static class ExtractWordsFn extends DoFn<String, String> {\n    private static final long serialVersionUID = 0;\n\n    private final Aggregator<Long, Long> emptyLines =\n        createAggregator(\"emptyLines\", new Sum.SumLongFn());\n\n    @Override\n    public void processElement(ProcessContext c) {\n      // Keep track of the number of empty lines. (When using the [Blocking]DataflowPipelineRunner,\n      // Aggregators are shown in the monitoring UI.)\n      if (c.element().trim().isEmpty()) {\n        emptyLines.addValue(1L);\n      }\n\n      // Split the line into words.\n      String[] words = c.element().split(\"[^a-zA-Z']+\");\n\n      // Output each word encountered into the output PCollection.\n      for (String word : words) {\n        if (!word.isEmpty()) {\n          c.output(word);\n        }\n      }\n    }\n  }\n\n\nAggregator\u306f\u96c6\u8a08\u306b\u4f7f\u3046\u30af\u30e9\u30b9\u3067\u3001\u3053\u3053\u3067\u306f\u7a7a\u884c\u3092\u96c6\u8a08\u3059\u308b\u305f\u3081\u306bAggregator\u3092\u7528\u3044\u3066\u3044\u308b\u3002Aggregator\u306e\u5024\u306f\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\u30ef\u30fc\u30c9\u3054\u3068\u306b\u30ab\u30a6\u30f3\u30c8\u3059\u308b\n\u30ef\u30fc\u30c9\u3054\u3068\u306b\u30ab\u30a6\u30f3\u30c8\u3092\u884c\u3063\u3066\u3044\u308b\u306e\u306fCount\u3060\u3002Dataflow SDK\u3067\u306f\u3001Count\u3084Sum\u306a\u3069\u3088\u304f\u4f7f\u3046\u96c6\u8a08\u51e6\u7406\u304c\u3044\u304f\u3064\u304b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u3066\u7c21\u5358\u306b\u5229\u7528\u3067\u304d\u308b\u3002\n\nexamples/src/main/java/com/google/cloud/dataflow/examples/WordCount.java\n      // \u30ef\u30fc\u30c9\u3092\u30ab\u30a6\u30f3\u30c8\u3059\u308b\n      PCollection<KV<String, Long>> wordCounts =\n          words.apply(Count.<String>perElement());\n\n\n\n\u307e\u3068\u3081\n\u672c\u7a3f\u3067\u306fGoogle Cloud Dataflow\u4e0a\u3067\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u52d5\u304b\u3059\u307e\u3067\u306e\u7c21\u5358\u306a\u6d41\u308c\u3068\u3001\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306eWordCount\u304c\u4f55\u3092\u3084\u3063\u3066\u3044\u308b\u306e\u304b\u7c21\u5358\u306b\u8aac\u660e\u3057\u305f\u3002\u5b9f\u969b\u306b\u3069\u306e\u3088\u3046\u306b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u8a18\u8ff0\u3059\u308b\u304b\u306fDataflow Programming Model\u3092\u8aad\u3080\u3068\u306a\u3093\u3068\u306a\u304f\u96f0\u56f2\u6c17\u304c\u308f\u304b\u308b\u304b\u3068\u601d\u3046\u3002\nBigQuery\u304b\u3089\u306e\u5165\u51fa\u529b\u3092\u884c\u3046BigQueryTornadoes\u3084\u3001\u30b9\u30e9\u30a4\u30c9\u3067\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308b\u30aa\u30fc\u30c8\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\u3092\u884c\u3046AutoComplete\u306a\u3069\u3044\u304f\u3064\u304b\u306e\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3082SDK\u306b\u4ed8\u5c5e\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u8aad\u3080\u306e\u3082\u826f\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\u6b21\u56de\u304c\u3042\u308c\u3070\u3001\u3053\u308c\u3089\u306e\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u7d39\u4ecb\u3059\u308b\u304b\u3001\u5b9f\u969b\u306bCloud Dataflow\u3067\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u6210\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3059\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\nGoogle Cloud Dataflow\u304cpublic beta\u306b\u306a\u3063\u3066\u304b\u3089\u8a66\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u305f\u306e\u3067\u3001\u3088\u3046\u3084\u304f\u8a66\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u305f\u3002Google Cloud Dataflow\u304c\u4f55\u306a\u306e\u304b\u77e5\u308a\u305f\u3044\u6642\u306f\u6b21\u306e\u30b9\u30e9\u30a4\u30c9\u3092\u8aad\u3080\u3068\u826f\u3044\u3002\n\n- [Google Cloud Dataflow \u3092\u7406\u89e3\u3059\u308b - #bq_sushi](http://www.slideshare.net/GoogleCloudPlatformJP/google-cloud-dataflow-bqsushi)\n\n## \u5fc5\u8981\u306a\u3082\u306e\n\n- Google Cloud Platform\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\n- Java 8\n- Maven\n\nJava 7\u3067\u306f\u52d5\u304b\u306a\u304b\u3063\u305f\u6c17\u304c\u3059\u308b\u306e\u3067\u3001Java 8\u3092\u3042\u3089\u304b\u3058\u3081\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304a\u3053\u3046\u3002Maven\u306fMac\u74b0\u5883\u3067\u3042\u308c\u3070Homebrew\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3002\n\n## Dataflow API\u3092\u6709\u52b9\u306b\u3059\u308b\n\n\u3042\u3089\u304b\u3058\u3081Dataflow API\u3092GCP\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u6709\u52b9\u306b\u3057\u3066\u304a\u3053\u3046\u3002\u30b3\u30f3\u30bd\u30fc\u30eb\u306eUI\u304c\u5909\u308f\u3063\u3066\u3066\u3061\u3087\u3063\u3068\u3073\u3073\u3063\u305f\u3051\u3069\u3001\u691c\u7d22\u3067\u304d\u308b\u306e\u3067\u7c21\u5358\u306b\u898b\u3064\u304b\u308b\u3002\n\n![](https://qiita-image-store.s3.amazonaws.com/0/5218/2b6d152c-2752-fd61-c8f0-8b6064c73d6c.png)\n\n\n## Dataflow SDK for Java \u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\n\nGoogle Cloud Dataflow\u306eSDK\u306fGithub\u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3053\u308c\u3092clone\u3057\u3066\u304f\u308b\u3002\n\n```\n$ git clone git@github.com:GoogleCloudPlatform/DataflowJavaSDK.git\n```\n\nSDK\u306e\u30d3\u30eb\u30c9\u306f`mvn`\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3067\u304d\u308b\u3002\u6642\u9593\u304c\u304b\u304b\u308b\u306e\u3067\u3057\u3070\u3089\u304f\u5f85\u3068\u3046\u3002\n\n```\n$ mvn clean install\n[INFO] Scanning for projects...\n...\n[INFO] Reactor Summary:\n[INFO]\n[INFO] Google Cloud Dataflow Java SDK - Parent ............ SUCCESS [  0.475 s]\n[INFO] Google Cloud Dataflow Java SDK - All ............... SUCCESS [02:36 min]\n[INFO] Google Cloud Dataflow Java Examples - All .......... SUCCESS [ 12.342 s]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 02:49 min\n[INFO] Finished at: 2015-05-28T18:17:45+09:00\n[INFO] Final Memory: 90M/773M\n[INFO] ------------------------------------------------------------------------\n```\n\n\u6210\u529f\u3059\u308b\u3068\u3053\u3093\u306a\u611f\u3058\u3067\u8868\u793a\u3055\u308c\u308b\u3002\u3053\u308c\u3067\u30b5\u30f3\u30d7\u30eb\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u304c\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306f\u305a\u3060\u3002\n\n## WordCount\u3092\u5b9f\u884c\u3057\u3066\u307f\u308b\n\n\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306eWordCount\u3092\u5b9f\u884c\u3057\u3066\u307f\u3088\u3046\u3002\u30b7\u30a7\u30a4\u30af\u30b9\u30d4\u30a2\u306e\u30c6\u30ad\u30b9\u30c8\u304b\u3089\u5358\u8a9e\u3054\u3068\u306b\u30ab\u30a6\u30f3\u30c8\u3059\u308b\u3088\u304f\u3042\u308b\u3084\u3064\u3060\u3002BigQuery\u3067\u3044\u3046\u3068\u3053\u3093\u306a\u304b\u3093\u3058(\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306f\u9055\u3046\u304b\u3082)\u3002\n\n```sql\nSELECT\n  COUNT(word) AS count,\n  word\nFROM [publicdata:samples.shakespeare]\nGROUP BY word\n```\n\n### \u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u3068\u51fa\u529b\u5148\u306e\u30d0\u30b1\u30c3\u30c8\u3092\u7528\u610f\u3059\u308b\n\n![](https://qiita-image-store.s3.amazonaws.com/0/5218/a9496595-3ccf-decf-561a-147df380fe81.png)\n\nCloud Dataflow\u3067\u306f\u30b3\u30f3\u30d1\u30a4\u30eb\u6e08\u307f\u306ejar\u3068\u7d50\u679c\u306e\u51fa\u529b\u5148\u3068\u3057\u3066Google Cloud Storage\u3092\u4f7f\u7528\u3059\u308b\uff08\u51fa\u529b\u5148\u306fBigQuery\u306b\u5909\u3048\u308b\u3053\u3068\u3082\u3067\u304d\u308b)\u3002\u3042\u3089\u304b\u3058\u3081\u51fa\u529b\u5148\u306e\u30d0\u30b1\u30c3\u30c8\u3092\u7528\u610f\u3057\u3066\u304a\u3053\u3046\u3002\u30d0\u30b1\u30c3\u30c8\u306f`gsutil`\u30b3\u30de\u30f3\u30c9\u3067\u7528\u610f\u3057\u3066\u3082\u826f\u3044\u3057\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u4f5c\u3063\u3066\u3082\u826f\u3044\u3002\n\n\n### \u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3059\u308b\n\nGCE\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5916\u3067\u52d5\u304b\u3059\u3068\u6b21\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u529b\u3055\u308c\u308b\u3002\n\n```\n[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.1:java (default-cli) on project google-cloud-dataflow-java-examples-all: An exception occured while executing the Java class. null: InvocationTargetException: Failed to construct instance from factory method com.google.cloud.dataflow.sdk.runners.BlockingDataflowPipelineRunner#fromOptions: Unable to get application default credentials. Please see https://developers.google.com/accounts/docs/application-default-credentials for details on how to specify credentials. This version of the SDK is dependent on the gcloud core component version 2015.02.05 or newer to be able to get credentials from the currently authorized user via gcloud auth. The Application Default Credentials are not available. They are available if running in Google Compute Engine. Otherwise, the environment variable GOOGLE_APPLICATION_CREDENTIALS must be defined pointing to a file defining the credentials. See https://developers.google.com/accounts/docs/application-default-credentials for more information. -> [Help 1]\n```\n\n\u3053\u306e\u30a8\u30e9\u30fc\u306f\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092\u74b0\u5883\u5909\u6570`GOOGLE_APPLICATION_CREDENTIALS`\u306b\u6e21\u3059\u3053\u3068\u3067\u89e3\u6c7a\u3067\u304d\u308b\u3002\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u30d5\u30a1\u30a4\u30eb\u306f\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u65b0\u305f\u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3092\u767a\u884c\u3059\u308b\u3053\u3068\u3067\u53d6\u5f97\u3067\u304d\u308b\u3002\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308c\u3070\u3059\u3079\u3066\u306eGCP\u306eAPI\u304c\u5229\u7528\u3067\u304d\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u5916\u90e8\u306b\u6f0f\u6d29\u3057\u306a\u3044\u3088\u3046\u306b\u6271\u3044\u306b\u306f\u6c17\u3092\u3064\u3051\u3088\u3046\u3002\n\n![](https://qiita-image-store.s3.amazonaws.com/0/5218/9b994397-809d-f890-8c85-24c9e4dda00a.png)\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fJSON\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\u3092`GOOGLE_APPLICATION_CREDENTIALS`\u306b\u30bb\u30c3\u30c8\u3059\u308b\u3002\n\n### \u30b8\u30e7\u30d6\u3092\u5b9f\u884c\u3059\u308b\n\n\u3053\u3053\u307e\u3067\u3067\u524d\u6e96\u5099\u306f\u5b8c\u4e86\u3060\u3002\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u3068\u51fa\u529b\u5148\u306e\u30d0\u30b1\u30c3\u30c8\u3092\u6307\u5b9a\u3057\u3066WordCount\u3092\u5b9f\u884c\u3057\u3066\u307f\u3088\u3046\u3002\n\n```sh\n$ export export GOOGLE_APPLICATION_CREDENTIALS=/Users/harukasan/****.json\n$ PROJECT=\"(\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d)\"\n$ STAGING=\"gs://dataflow-testing-staging/wordcount\"\n$ OUTPUT=\"gs://dataflow-testing-output/wordcount\"\n$ mvn exec:java -pl examples \\\n  -Dexec.mainClass=com.google.cloud.dataflow.examples.WordCount \\\n  -Dexec.args=\"--project=${PROJECT} \\\n               --stagingLocation=${STAGING} \\\n               --runner=BlockingDataflowPipelineRunner \\\n               --output=${OUTPUT}\"\n[INFO] Scanning for projects...\n...\n```\n\n\u5b9f\u884c\u4e2d\u306f\u7aef\u672b\u306b\u3082\u306a\u306b\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u304b\u8868\u793a\u3055\u308c\u308b\u3057\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u3082\u30b0\u30e9\u30d5\u30a3\u30ab\u30eb\u306b\u30ed\u30b0\u3092\u898b\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u5b9f\u969b\u306b\u30d0\u30c3\u30c1\u3092\u30b9\u30b1\u30b8\u30e5\u30fc\u30ea\u30f3\u30b0\u3057\u3066\u52d5\u4f5c\u3055\u305b\u3066\u3044\u308b\u6642\u306b\u306f\u4fbf\u5229\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n![](https://qiita-image-store.s3.amazonaws.com/0/5218/f97348ba-deb5-b86c-f5ad-ba665c37aec4.png)\n\n\u7d50\u679c\u306fGoogle Cloud Storage\u306b\u51fa\u529b\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u78ba\u8a8d\u3057\u3066\u307f\u3088\u3046\u3002\n\n![](https://qiita-image-store.s3.amazonaws.com/0/5218/2bad5f0d-7d61-fd7d-4238-0faf07676e8c.png)\n\n\u305d\u308c\u305e\u308c\u306e\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u306b\u306f\u5404\u884c\u306b\u30ef\u30fc\u30c9\u3054\u3068\u306e\u30ab\u30a6\u30f3\u30c8\u304c\u8a18\u9332\u3055\u308c\u3066\u3044\u308b\u3002\n\n```text:wordcount-00000-of-00009\nstoops: 1\nknapped: 1\nwas: 46\nsense: 5\nvassal: 1\ngraves: 1\nbuilding: 1\nshadowy: 1\n...\n```\n\n## WordCount\u306f\u4f55\u3092\u3084\u3063\u3066\u3044\u308b\u306e\u304b\n\n\u305b\u3063\u304b\u304f\u306a\u306e\u3067WordCount\u306f\u4f55\u3092\u3057\u3066\u3044\u308b\u306e\u304b\u898b\u3066\u307f\u3088\u3046\u3002`main()`\u306e\u51e6\u7406\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n```examples/src/main/java/com/google/cloud/dataflow/examples/WordCount.java\n  public static void main(String[] args) {\n    Options options = PipelineOptionsFactory.fromArgs(args).withValidation().as(Options.class);\n    Pipeline p = Pipeline.create(options);\n\n    p.apply(TextIO.Read.named(\"ReadLines\").from(options.getInput()))\n     .apply(new CountWords())\n     .apply(TextIO.Write.named(\"WriteCounts\")\n         .to(options.getOutput())\n         .withNumShards(options.getNumShards()));\n\n    p.run();\n  }\n```\n\n\u3053\u3053\u3067\u306f\u3001\u30d1\u30a4\u30d7\u30e9\u30a4\u30f3\u3092\u4f5c\u6210\u3057\u3001\u3044\u304f\u3064\u304b\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092`apply`\u306b\u6e21\u3057\u3066\u3044\u308b\u3002`TextIO`\u306f\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u66f8\u304d\u3092\u3059\u308b\u305f\u3081\u306e\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u3067\u3001Google Cloud Storage\u304b\u3089\u306e\u8aad\u307f\u66f8\u304d\u3092\u7c21\u5358\u306b\u8a18\u8ff0\u3067\u304d\u308b\u3002\n\n\n\u5b9f\u969b\u306e\u96c6\u8a08\u3092\u884c\u3063\u3066\u3044\u308b\u306e\u306f`CountWords`\u30af\u30e9\u30b9\u3060\u3002`CountWords`\u30af\u30e9\u30b9\u306f`PTransform<PCollection<String>, PCollection<String>>`\u3092\u7d99\u627f\u3057\u3066\u3044\u308b\u3002Dataflow SDK\u3067\u306f`PTransform`\u3092\u7d99\u627f\u3057\u3066\u30c7\u30fc\u30bf\u3092transform\u3059\u308b\u51e6\u7406\u3092\u8a18\u8ff0\u3059\u308b\u3002\n\n```examples/src/main/java/com/google/cloud/dataflow/examples/WordCount.java\n  public static class CountWords extends PTransform<PCollection<String>, PCollection<String>> {\n    private static final long serialVersionUID = 0;\n\n    @Override\n    public PCollection<String> apply(PCollection<String> lines) {\n\n      // 1\u884c\u304b\u3089\u30ef\u30fc\u30c9\u3092\u62bd\u51fa\u3059\u308b\n      PCollection<String> words = lines.apply(\n          ParDo.of(new ExtractWordsFn()));\n\n      // \u30ef\u30fc\u30c9\u3092\u30ab\u30a6\u30f3\u30c8\u3059\u308b\n      PCollection<KV<String, Long>> wordCounts =\n          words.apply(Count.<String>perElement());\n\n      // \u30ef\u30fc\u30c9\u3068\u30ab\u30a6\u30f3\u30c8\u3054\u3068\u306b\u51fa\u529b\u3059\u308b\u6587\u5b57\u5217\u306b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3059\u308b\n      PCollection<String> results = wordCounts.apply(\n          ParDo.of(new FormatCountsFn()));\n\n      return results;\n    }\n  }\n```\n\nDataflow SDK\u3067\u306f\u30c7\u30fc\u30bf\u3092[PCollection](https://cloud.google.com/dataflow/model/pcollection)\u30af\u30e9\u30b9\u3067\u8868\u73fe\u3059\u308b\u3002`PCollection`\u306f`Integer`\u3084`String`\u3068\u3044\u3063\u305f\u30c7\u30fc\u30bf\u3092\u8907\u6570\u683c\u7d0d\u3059\u308b\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u3067\u3001PCollection\u306e`apply`\u30e1\u30bd\u30c3\u30c9\u306b\u51e6\u7406\u3092\u884c\u3046\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3059\u3053\u3068\u3067\u30c7\u30fc\u30bf\u306e\u5909\u5f62\u3092\u884c\u3046\u3002\n\n### \u884c\u304b\u3089\u30ef\u30fc\u30c9\u3092\u62bd\u51fa\u3059\u308b\n\n\u4f8b\u3068\u3057\u3066\u884c\u304b\u3089\u30ef\u30fc\u30c9\u3092\u62bd\u51fa\u3059\u308b\u51e6\u7406\u3092\u898b\u3066\u307f\u3088\u3046\u3002`lines`\u306e`apply`\u30e1\u30bd\u30c3\u30c9\u306b\u5bfe\u3057`ParDo.of(new ExtractWordsFn())`\u3092\u6e21\u3057\u3066\u3044\u308b\u3002`ParDo`\u306fCloud Dataflow\u306b\u304a\u3044\u3066\u4e26\u5217\u51e6\u7406\u3092\u884c\u3046\u305f\u3081\u306e\u30b3\u30a2\u3068\u306a\u308b\u4ed5\u7d44\u307f\u3067\u3001MapReduce\u306b\u304a\u3051\u308b`Mapper`\u306b\u8fd1\u3044\u51e6\u7406\u3092\u884c\u3046\u3002\u3064\u307e\u308a\u3001\u5165\u529b\u3055\u308c\u305f`PCollection`\u3092\u8981\u7d20\u3054\u3068\u306b\u5206\u6563\u3057\u3001\u51e6\u7406\u3092\u5b9f\u884c\u3057\u3066\u304f\u308c\u308b\u308f\u3051\u3060\u3002`ParDo`\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u884c\u3054\u3068\u306b\u5206\u6563\u3057\u3066\u5358\u8a9e\u306b\u5206\u5272\u3059\u308b\u51e6\u7406\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n`ParDo`\u306b\u306f`DoFn`\u3092\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3059\u3002`ExtractWordsFn`\u306e\u5b9f\u88c5\u3092\u898b\u3066\u307f\u3088\u3046\u3002`DoFn<String, String>`\u306f`String`\u3092\u5165\u529b\u3057\u3001`String`\u3092\u51fa\u529b\u3059\u308b\u51e6\u7406\u3092\u793a\u3059\u3002\u8981\u7d20\u306e\u51e6\u7406\u306f`processElement`\u30e1\u30bd\u30c3\u30c9\u3067\u884c\u3046\u3002\u3053\u3053\u3067\u306f\u6b63\u898f\u8868\u73fe\u306b\u3088\u308b\u5206\u5272\u304c\u884c\u308f\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\n```examples/src/main/java/com/google/cloud/dataflow/examples/WordCount.java\n  static class ExtractWordsFn extends DoFn<String, String> {\n    private static final long serialVersionUID = 0;\n\n    private final Aggregator<Long, Long> emptyLines =\n        createAggregator(\"emptyLines\", new Sum.SumLongFn());\n\n    @Override\n    public void processElement(ProcessContext c) {\n      // Keep track of the number of empty lines. (When using the [Blocking]DataflowPipelineRunner,\n      // Aggregators are shown in the monitoring UI.)\n      if (c.element().trim().isEmpty()) {\n        emptyLines.addValue(1L);\n      }\n\n      // Split the line into words.\n      String[] words = c.element().split(\"[^a-zA-Z']+\");\n\n      // Output each word encountered into the output PCollection.\n      for (String word : words) {\n        if (!word.isEmpty()) {\n          c.output(word);\n        }\n      }\n    }\n  }\n```\n\n`Aggregator`\u306f\u96c6\u8a08\u306b\u4f7f\u3046\u30af\u30e9\u30b9\u3067\u3001\u3053\u3053\u3067\u306f\u7a7a\u884c\u3092\u96c6\u8a08\u3059\u308b\u305f\u3081\u306b`Aggregator`\u3092\u7528\u3044\u3066\u3044\u308b\u3002`Aggregator`\u306e\u5024\u306f\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n### \u30ef\u30fc\u30c9\u3054\u3068\u306b\u30ab\u30a6\u30f3\u30c8\u3059\u308b\n\n\u30ef\u30fc\u30c9\u3054\u3068\u306b\u30ab\u30a6\u30f3\u30c8\u3092\u884c\u3063\u3066\u3044\u308b\u306e\u306f`Count`\u3060\u3002Dataflow SDK\u3067\u306f\u3001`Count`\u3084`Sum`\u306a\u3069\u3088\u304f\u4f7f\u3046\u96c6\u8a08\u51e6\u7406\u304c\u3044\u304f\u3064\u304b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u3066\u7c21\u5358\u306b\u5229\u7528\u3067\u304d\u308b\u3002\n\n```examples/src/main/java/com/google/cloud/dataflow/examples/WordCount.java\n      // \u30ef\u30fc\u30c9\u3092\u30ab\u30a6\u30f3\u30c8\u3059\u308b\n      PCollection<KV<String, Long>> wordCounts =\n          words.apply(Count.<String>perElement());\n```\n\n## \u307e\u3068\u3081\n\n\u672c\u7a3f\u3067\u306fGoogle Cloud Dataflow\u4e0a\u3067\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u52d5\u304b\u3059\u307e\u3067\u306e\u7c21\u5358\u306a\u6d41\u308c\u3068\u3001\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306eWordCount\u304c\u4f55\u3092\u3084\u3063\u3066\u3044\u308b\u306e\u304b\u7c21\u5358\u306b\u8aac\u660e\u3057\u305f\u3002\u5b9f\u969b\u306b\u3069\u306e\u3088\u3046\u306b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u8a18\u8ff0\u3059\u308b\u304b\u306f[Dataflow Programming Model](https://cloud.google.com/dataflow/model/programming-model)\u3092\u8aad\u3080\u3068\u306a\u3093\u3068\u306a\u304f\u96f0\u56f2\u6c17\u304c\u308f\u304b\u308b\u304b\u3068\u601d\u3046\u3002\n\nBigQuery\u304b\u3089\u306e\u5165\u51fa\u529b\u3092\u884c\u3046[BigQueryTornadoes](https://github.com/GoogleCloudPlatform/DataflowJavaSDK/blob/master/examples/src/main/java/com/google/cloud/dataflow/examples/BigQueryTornadoes.java)\u3084\u3001\u30b9\u30e9\u30a4\u30c9\u3067\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308b\u30aa\u30fc\u30c8\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\u3092\u884c\u3046[AutoComplete](https://github.com/GoogleCloudPlatform/DataflowJavaSDK/blob/master/examples/src/main/java/com/google/cloud/dataflow/examples/AutoComplete.java)\u306a\u3069\u3044\u304f\u3064\u304b\u306e\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3082SDK\u306b\u4ed8\u5c5e\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u8aad\u3080\u306e\u3082\u826f\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\u6b21\u56de\u304c\u3042\u308c\u3070\u3001\u3053\u308c\u3089\u306e\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u7d39\u4ecb\u3059\u308b\u304b\u3001\u5b9f\u969b\u306bCloud Dataflow\u3067\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u6210\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3059\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n", "tags": ["GoogleCloudPlatform", "GoogleCloudDataflow"]}