{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u4ee5\u524d, AngularJS\u3067D3.js\u3092\u30e9\u30c3\u30d7\u3057\u3066\u307f\u3088\u3046\u306e\u30a8\u30f3\u30c8\u30ea\u3067, \u300c\u3044\u304b\u306b\u3057\u3066AngularJS\u3068D3.js\u3092\u7d71\u5408\u3059\u308b\u304b\u300d\u3092\u8a18\u8f09\u3057\u305f.\n\u305d\u306e\u5f8c, \u81ea\u5206\u3067\u5e7e\u3064\u304bAngularJS\u3068D3.js\u4e21\u65b9\u3092\u4f7f\u3063\u305fApplication\u3092\u4f5c\u3063\u305f\u308a, http://alexandros.resin.io/angular-d3-svg/ \u306e\u30d6\u30ed\u30b0\u3092\u8aad\u3093\u3060\u308a\u3057\u305f\u4e0a\u3067, \u53cc\u65b9\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u4e21\u65b9\u3092\u4f7f\u3046\u969b\u306e\u77e5\u898b\u304c\u5897\u3048\u305f\u306e\u3067, \u3053\u308c\u3092\u6a5f\u306b\u3082\u3046\u4e00\u5ea6\u6574\u7406\u3057\u3066\u307f\u3088\u3046\u304b\u3068.\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u3057\u3066\u306e\u6bd4\u8f03\nAngularJS\u3068D3.js, \u53cc\u65b9\u3092\u89e6\u3063\u3066\u307f\u3066\u601d\u3046\u306e\u306f, \u7279\u306b\u30b3\u30a2\u306a\u90e8\u5206\u306b\u3064\u3044\u3066, \u5099\u3048\u3066\u3044\u308b\u6a5f\u80fd\u304c\u91cd\u8907\u3057\u3066\u3044\u305f\u308a, \u540c\u7b49\u6a5f\u80fd\u3078\u306e\u5b9f\u88c5\u30a2\u30d7\u30ed\u30fc\u30c1\u304c\u7570\u306a\u308b\u306a\u3041\u3001\u3068\u3044\u3046\u3053\u3068.\n\n\n\n#\n\u6bd4\u8f03\u9805\u76ee\nAngular's way\nD3's way\n\n\n\n\n1.\nView\u69cb\u7bc9\u30b9\u30bf\u30f3\u30b9\nDeclarative(\u5ba3\u8a00\u7684)\nFunctional(\u624b\u7d9a\u7684)\n\n\n2.\n\u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\n\nngModel \u3084 {{...}}\n\nd3.selectAll(\u301c).data(\u301c)\n\n\n3.\nCollection CRUD\u8ffd\u8de1\nngRepeat\n\nenter(), exit()\n\n\n\n4.\nLayout\u6a5f\u80fd\n\u7121\n\nd3.layout.force \u7b49\n\n\n5.\nSVG utility\n\u7121\n\nd3.svg.arc \u7b49\n\n\n\n\u7279\u5fb4\u7684\u306a\u306e\u306f, 1.\u301c3.\u306e\u90e8\u5206\u3060\u308d\u3046.\n\u307e\u3041, 4.\u30685.\u306f\u53ef\u8996\u5316\u306b\u7279\u5316\u3057\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3042\u308bD3.js\u3060\u3051\u304c\u5099\u3048\u3066\u3044\u308b\u306e\u306f\u9055\u548c\u611f\u7121\u3044\u3057...\n\u4ee5\u4e0b\u3067, \u305d\u308c\u305e\u308c\u306e\u6a5f\u80fd\u6bce\u306b\u8003\u3048\u65b9\u3092\u898b\u3066\u3044\u304f.\n\nView\u69cb\u7bc9\u30b9\u30bf\u30f3\u30b9\n\u307e\u305a\u306fView\u306b\u5bfe\u3059\u308b\u30b9\u30bf\u30f3\u30b9\u304b\u3089. \n\u300cSVG\u306e\u9818\u57df\u3078 (x, y)=(100, 100)\u306b\u534a\u5f8420\u306e\u5186\u3092\u63cf\u753b\u3059\u308b\u300d\u3092\u4f8b\u306b\u8003\u3048\u3066\u307f\u308b.\n\nAngular's way\n\u5ba3\u8a00\u7684. HTML\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u7528\u3044\u3066, \u30de\u30fc\u30af\u30a2\u30c3\u30d7\u3057\u3066\u3044\u304f.\n<svg>\n  <circle cx=\"100\" cy=\"100\" r=\"20\"></circle>\n</svg>\n\n\nD3's way\n\u624b\u7d9a\u7684. jQuery\u30e9\u30a4\u30af\u306aDOM\u64cd\u4f5c\u95a2\u6570\u3067DOM\u3092\u7d44\u307f\u7acb\u3066\u3066\u884c\u304f.\nvar svg = d3.select('body').append('svg');\nsvg.append('circle')\n  .attr('cx', 100)\n  .attr('cy', 100)\n  .attr('r', 20);\n\n\n\u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\n\nAngular's way\nngModel\u3084, {{...}}\u7b49\u306eDirective\u3092HTML\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067, Scope\u306e\u30c7\u30fc\u30bf\u304cView\u3078\u30d0\u30a4\u30f3\u30c9\u3055\u308c\u308b.\n\u88cf\u5074\u3067\u306f, Directive\u306e\u5b9f\u88c5\u306b\u3088\u308a, $scope.$watch\u3084$scope.$watchCollection\u304c\u52d5\u4f5c\u3059\u308b.\n\nD3's way\nD3\u306e\u5834\u5408, \u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u306fCollection\u306b\u5bfe\u3057\u3066\u884c\u3046.\nd3.selectAll(\u30bb\u30ec\u30af\u30bf).data(\u30b3\u30ec\u30af\u30b7\u30e7\u30f3) \u3068\u3059\u308b\u3053\u3068\u3067, \u30bb\u30ec\u30af\u30bf\u5bfe\u8c61\u306eDOM\u3068\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u304c1:1\u3067\u7d10\u4ed8\u3051\u3089\u308c\u308b.\n\u3053\u3044\u3064\u304c\u3042\u3063\u3066\u3053\u305d\u306e\"Data Driven Document\"\u3068\u8a00\u3063\u3066\u3082\u904e\u8a00\u3067\u306f\u306a\u3044\u304f\u3089\u3044.\ndata()\u30e1\u30bd\u30c3\u30c9\u3067Collection\u3068\u306e\u7d10\u4ed8\u3051\u3092\u5b9f\u65bd\u3057\u305f\u5f8c\u306f, attr\u30e1\u30bd\u30c3\u30c9\u7b49\u3092\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u3067\u547c\u3073\u51fa\u3059\u3053\u3068\u3067, \u30c7\u30fc\u30bf\u5024\u306e\u52a0\u5de5 -> DOM\u5c5e\u6027\u5024\u3078\u306e\u30bb\u30c3\u30c8 \u3092\u30af\u30ed\u30fc\u30b8\u30e3\u3067\u51e6\u7406\u3067\u304d\u308b.\nd3.selectAll('circle').data([100, 200, 300])\n  .attr('cx', function (d) { return d;})\n  .attr('r', function (d) {return Math.sqrt(d);});\n\n\nCollection CRUD\u8ffd\u8de1\nAngularJS, D3.js\u5171\u306b\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u6271\u3046\u305f\u3081\u306e\u4ed5\u7d44\u307f\u304c\u3042\u308b.\n\u7279\u306b\u3069\u3061\u3089\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3082, \u914d\u5217\u8981\u7d20 <-> DOM\u8981\u7d20 \u30921:1\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u6a5f\u69cb\u3068, Collection\u5074\u306e\u8981\u7d20\u6570\u5897\u6e1b\u307e\u3067\u542b\u3081\u3066\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b.\n\nAngular's way\nngRepeat Directive\u304c, Collection\n\nmain.js\nfunction MainCtrl(){\n  this.datum = [\n    {cx: 100, cy: 50, r: 50},\n    {cx: 100, cy: 150, r: 30},\n    {cx: 100, cy: 250, r: 20}\n  ];\n}\n\n\n\nmain.html\n<div ng-controller=\"MainCtrl as main\">\n  <svg>\n    <circle ng-repeat=\"data in main.datum\"\n      ng-attr-cx=\"{{data.cx}}\"\n      ng-attr-cy=\"{{data.cy}}\"\n      ng-attr-r=\"{{::data.r}}\" >\n    </circle>\n  </svg>\n</div>\n\n\nngRepeat \u306f Collection(\u4e0a\u8a18\u306e\u5834\u5408, main.datum)\u306e\u8981\u7d20\u6570\u304c\u5909\u52d5\u3057\u305f\u5834\u5408, \u5897\u5206(\u6e1b\u5206)\u306e\u307f\u3092\u518d\u63cf\u753b\u3059\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b.\n\u306a\u304a, \u4e0a\u8a18\u306eView\u306e\u30b5\u30f3\u30d7\u30eb\u30672\u70b9\u88dc\u8db3:\n\n\nng-attr-*\n<circle> \u7b49, SVG\u8981\u7d20\u4e2d\u306eattribute\u306bScope\u306e\u5024\u3092\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3059\u308b\u969b, cx={{...}} \u3068\u3059\u308b\u3068, \u4e00\u898b\u4f55\u306e\u554f\u984c\u3082\u306a\u304fRendering\u3055\u308c\u308b\u304c, \u30b3\u30f3\u30bd\u30fc\u30eb\u306bError: Invalid value for <circle> attribute cx=\u4ee5\u4e0b\u7565 \u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u3092\u5410\u304f\u3053\u3068\u304c\u3042\u308b.\n\u3053\u306e\u30a8\u30e9\u30fc\u306e\u539f\u56e0\u306f, AngularJS\u306eDirective\u30ac\u30a4\u30c9\u306b\u3082\u3042\u308b\u901a\u308a, SVG\u306eDOM API\u304c\u53b3\u5bc6\u306b\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u884c\u3046\u305f\u3081.\n\u56de\u907f\u3059\u308b\u305f\u3081\u306b\u306f, ng-attr-\u3092\u30d0\u30a4\u30f3\u30c9\u3057\u305f\u3044\u5c5e\u6027\u306b\u4ed8\u4e0e\u3059\u308c\u3070\u3088\u3044.\n\n{{::\u301c}\nAngularJS 1.3.x\u304b\u3089\u5c0e\u5165\u3055\u308c\u305fOne Time Binding. \u4e00\u56de\u3060\u3051\u8a55\u4fa1\u3059\u308c\u3070\u3088\u3044\u5f0f\u306b\u7528\u3044\u308b.\n\n\nD3's way\nvar datum = [\n  {cx: 100, cy: 50, r: 50},\n  {cx: 100, cy: 150, r: 30},\n  {cx: 100, cy: 250, r: 20}\n];\n\nvar render = function (datum) {\n  var svg = d3.select('svg#viz'), selection = svg.selectAll('circle').data(datum);\n  selection.enter()\n    .append('circle')\n    .attr('r', function(d){return d.r});\n\n  selection\n    .attr('cx', function(d){return d.cx})\n    .attr('cy', function(d){return d.cy});\n\n  selection.exit()\n    .remove();\n\n};\n\nrender(datum);\n\nD3.js\u306e\u5834\u5408\u3001d3.selectAll(data)\u306b\u3001\u4ee5\u4e0b\u306e\u90e8\u5206\u96c6\u5408\u3092\u53d6\u308a\u6271\u3046\u70ba\u306eAPI\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b:\n\n\nenter(): \u73fe\u6642\u70b9\u3067\u306fDOM\u306b\u5b58\u5728\u3057\u306a\u3044\u304c, \u63cf\u753b\u3055\u308c\u308b\u3079\u304dCollection\u8981\u7d20\u306e\u90e8\u5206\u96c6\u5408\n\nexit(): Collection\u8981\u7d20\u306b\u306f\u65e2\u306b\u5b58\u5728\u3057\u306a\u3044\u304c, DOM\u30c4\u30ea\u30fc\u306b\u53d6\u308a\u6b8b\u3055\u308c\u3066\u3044\u308bDOM\u8981\u7d20\u96c6\u5408\n\n\u3057\u305f\u304c\u3063\u3066, enter()\u306e\u7d50\u679c\u306fDOM\u306b append, exit()\u306e\u7d50\u679c\u306fDOM\u304b\u3089remove() \u3068\u3044\u3046\u69d8\u306b, \u63cf\u753b\u7528\u306e\u95a2\u6570(\u4e0a\u8a18\u306erender())\u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\u3053\u3068\u3067, \nCollection\u306e\u72b6\u614b\u3092\u610f\u8b58\u3059\u308b\u3053\u3068\u306a\u304f, Collection\u5909\u66f4\u767a\u751f\u6642\u306b\u90fd\u5ea6\u90fd\u5ea6render()\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u3067, DOM\u3068Collection\u306e\u72b6\u614b\u3092\u540c\u671f\u3057\u7d9a\u3051\u308b\u3053\u3068\u304c\u51fa\u6765\u308b.\n\nLayout, SVG utility\n\u307e\u3041, Angular\u306b\u3001\u305d\u3053\u307e\u3067\u53ef\u8996\u5316\u306b\u7279\u5316\u3057\u305f\u6a5f\u80fd\u306f\u306a\u3044\u3067\u3059\u3088\u306d...\nD3\u306e\u3088\u3044\u3068\u3053\u308d\u306f, \u3055\u304f\u3063\u3068\u4f7f\u3048\u308bLayout(d3.layout.chord\u3084d3.layout.force)\u304c\u63c3\u3063\u3066\u3044\u305f\u308a, \u9762\u5012\u306aSVG\u306e\u5404\u7a2e\u5c5e\u6027\u3092\u8a08\u7b97\u3059\u308b\u305f\u3081\u306e\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\u304c\u30d3\u30eb\u30c8\u30a4\u30f3\u3055\u308c\u3066\u3044\u308b\u70b9.\n\n\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3\n\u3068\u307e\u3041, \u3053\u3053\u307e\u3067\u3067AngularJS, D3.js\u306e\u4f3c\u3066\u3044\u308b\u70b9\u30fb\u7570\u306a\u308b\u70b9\u3092\u898b\u3066\u304d\u305f.\n\u3053\u308c\u3089\u3092\u8e0f\u307e\u3048\u305f\u4e0a\u3067, \u4e21\u8005\u3092\u540c\u6642\u306b\u5229\u7528\u3059\u308b\u969b\u306e\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3\u3092\u8003\u3048\u3066\u307f\u308b.\n\nD3\u3092\u4e3b\u4f53\u3068\u3059\u308b\u65b9\u6cd5\n\u53ef\u8996\u5316\u9818\u57df\u914d\u4e0b\u306eView\u69cb\u7bc9, \u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0, \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u5236\u5fa1\u3064\u3044\u3066, D3.js\u5074\u306e\u6a5f\u80fd\u3092\u5229\u7528\u3059\u308b\u30d1\u30bf\u30fc\u30f3.\n\u4e0a\u8a18\u3067, \u300cD3.js's way\u300d\u3068\u3057\u3066\u304d\u305f\u5b9f\u88c5\u65b9\u6cd5\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u3044\u304f.\n\u66f8\u7c4d\u306eAngularJS\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9, D3 on AngularJS \u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u65b9\u6cd5\u3082, \u3053\u3061\u3089\u306e\u30d1\u30bf\u30fc\u30f3\u306b\u5c5e\u3057\u3066\u3044\u308b.\n\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u306e\u7279\u5fb4\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308b.\n\n\u53ef\u8996\u5316\u9818\u57df\u306b\u5bfe\u3057\u3066Directive\u3092\u4f5c\u6210\u3057, Directive\u914d\u4e0b\u306eDOM\u3092D3.js\u306e\u30e1\u30bd\u30c3\u30c9\u3067\u624b\u7d9a\u7684\u306b\u7d44\u307f\u7acb\u3066\u308b.\nDirective\u306e\u5f15\u6570\u3068\u3057\u3066, \u53ef\u8996\u5316\u5bfe\u8c61\u306e\u30c7\u30fc\u30bf\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u304c\u683c\u7d0d\u3055\u308c\u305fScope\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u53d7\u3051\u53d6\u308b.\n\n$scope.$watchCollection \u3084 $scope.$watch(... , ... , true) (deep watch) \u3092\u7528\u3044\u3066, $scope\u306e\u5024\u5909\u52d5\u6642\u306b\u52d5\u4f5c\u3059\u308bListener\u3092\u767b\u9332.\n\u4e0a\u8a18Listener\u306e\u5185\u90e8\u3067, d3.selectAll(...).data(...) \u306e enter() \u3084 exit()\u3092\u547c\u3073\u51fa\u3057, \u8981\u7d20\u306e\u8ffd\u52a0/\u524a\u9664\u306eDOM\u64cd\u4f5c\u3092d3\u7684\u306b\u8a18\u8ff0.\n\n\u4e0a\u8a18\u306e\u30d1\u30bf\u30fc\u30f3\u304c\u6709\u7528\u306a\u306e\u306f, \u4e0b\u8a18\u3060\u308d\u3046\u304b.\n\n\u5b9f\u88c5\u3057\u305f\u3044\u53ef\u8996\u5316\u30a2\u30d7\u30ea\u304cD3.js\u306e\u30b3\u30fc\u30c9\u3068\u3057\u3066\u51fa\u6765\u3042\u304c\u3063\u3066\u304a\u308a, AngularJS\u3078\u306e\u7e4b\u304e\u90e8\u5206\u3092\u4f5c\u3063\u3066\u3057\u307e\u3048\u3070\u826f\u3044\u30b1\u30fc\u30b9\n\n\u88cf\u3092\u8fd4\u3059\u3068, \u3053\u306e\u30d1\u30bf\u30fc\u30f3\u306b\u306f\u4ee5\u4e0b\u306e\u30c7\u30e1\u30ea\u30c3\u30c8\u304c\u4f34\u3046.\n\n\u53ef\u8996\u5316\u90e8\u5206\u306e\u5b9f\u88c5\u5909\u66f4\u306b\u306fDirective\u4fee\u6b63\u304c\u5fc5\u305a\u4f34\u3046.\nDirective\u306eLink\u95a2\u6570(\u305d\u308c\u3082$scope.$watch\u306b\u767b\u9332\u3059\u308bListener)\u306b\u30b3\u30fc\u30c9\u306e\u5927\u534a\u304c\u96c6\u4e2d\u3057, Directive\u306e\u30b3\u30fc\u30c9\u304c\u5de8\u5927\u5316\u3057\u304c\u3061.\nDOM\u64cd\u4f5c\u3092D3.js\u306b\u59d4\u8b72\u3059\u308b\u305f\u3081, \u30e6\u30fc\u30b6\u30a4\u30f3\u30bf\u30e9\u30af\u30b7\u30e7\u30f3\u306bngClick\u3084ngMouseover\u304c\u5229\u7528\u51fa\u6765\u306a\u3044\n\n\nAngular\u3092\u4e3b\u4f53\u3068\u3059\u308b\u65b9\u6cd5\n\u3082\u3046\u4e00\u3064\u306e\u30d1\u30bf\u30fc\u30f3\u306f, View\u69cb\u7bc9, \u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0, \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u5909\u52d5\u6642\u306eDOM\u5236\u5fa1\u5168\u3066\u3092AngularJS\u30d9\u30fc\u30b9\u3067\u5b9f\u88c5\u3059\u308b\u30d1\u30bf\u30fc\u30f3.\n\u601d\u60f3\u7684\u306b\u306f Radian \u306f\u3053\u3061\u3089\u306e\u30d1\u30bf\u30fc\u30f3\u306b\u8fd1\u3044(Expression\u304cAngularJS\u306e\u3082\u306e\u3068\u306f\u7570\u306a\u308b\u304c).\n\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u306e\u7279\u5fb4\u306f\u4e0b\u8a18\u3067\u3042\u308b:\n\n\u53ef\u8996\u5316\u9818\u57df\u5185\u90e8\u3082\u542b\u3081, DOM\u306fAnguarJS\u306eHTML\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u69cb\u6210\u3057\u3066\u3044\u304f.\nSVG\u306e\u5c5e\u6027\u306b\u3064\u3044\u3066\u3082, ng-attr-cx={{...}} \u306e\u3088\u3046\u306b\u3057, HTML\u306b\u76f4\u63a5\u8a18\u8f09\u3057\u3066\u3044\u304f.\nD3\u306e\u5229\u7528\u306f, Layout\u69cb\u7bc9\u3084SVG\u4fbf\u5229\u6a5f\u80fd(d3.svg.line())\u306b\u7559\u3081\u308b.\n\n\u30e1\u30ea\u30c3\u30c8\u306f\u4ee5\u4e0b\u3042\u305f\u308a\u304b:\n\n\u53ef\u8996\u5316\u9818\u57df\u542b\u3081, HTML\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067View\u304c\u69cb\u6210\u3055\u308c\u308b\u305f\u3081, \u5909\u66f4\u304c\u5bb9\u6613.\nD3.js\u306e\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u3067\u983b\u767a\u3057\u3066\u3044\u305f\u30af\u30ed\u30fc\u30b8\u30e3\u304c\u6e1b\u308b\u5206, \u30b3\u30fc\u30c9\u306f\u3059\u3063\u304d\u308a\u3059\u308b.\n\nAngular\u4e3b\u4f53\u306e\u65b9\u6cd5\u3067\u5b9f\u88c5\u3057\u305f\u5834\u5408\u306e\u30c7\u30e1\u30ea\u30c3\u30c8\u306f\u4e0b\u8a18\u304b.\n\n\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3(ngAnimate)\u3068\u306e\u76f8\u6027\u304c\u5fae\u5999.\nD3\u4e3b\u4f53\u306e\u65b9\u6cd5\u3067\u3042\u308c\u3070, .attr('width', functoin(){...}) \u306b transition()\u3092\u565b\u307e\u3059\u3060\u3051\u3067, \u30cb\u30e5\u30eb\u30cb\u30e5\u30eb\u5e45\u3092\u5897\u3084\u3057\u305f\u308a\u304c\u7c21\u5358\u3067\u3042\u3063\u305f. Angular\u4e3b\u4f53\u306e\u5834\u5408, ngAnimate\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3046\u3053\u3068\u306b\u306a\u308b\u306e\u3060\u304c, CSS\u5c5e\u6027\u30d9\u30fc\u30b9\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u304c\u57fa\u672c\u306e\u305f\u3081, SVG\u8981\u7d20\u306e\u5c5e\u6027\u3092tween\u3055\u305b\u308b\u3088\u3046\u306a\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u306b\u306f\u4e0d\u5411\u304d\u306a\u5370\u8c61\u304c\u3042\u308b.\n\n\n\u5b9f\u88c5\u30b5\u30f3\u30d7\u30eb\n\u4ee5\u524d\u306e\u30a8\u30f3\u30c8\u30ea\u3067\u3082\u53d6\u308a\u4e0a\u3052\u305f\u304c, \u4e0b\u56f3\u306e\u3088\u3046\u306a\u30b5\u30f3\u30d7\u30eb\u306b\u5bfe\u3057\u3066, D3\u4e3b\u4f53\u306e\u5b9f\u88c5\u4f8b, Angular\u4e3b\u4f53\u306e\u5b9f\u88c5\u4f8b\u3092\u898b\u3066\u3044\u3053\u3046\u3068\u601d\u3046.\n\n\n\u6e96\u5099\uff1a\u53ef\u8996\u5316\u3068\u95a2\u4fc2\u306e\u7121\u3044\u5171\u901a\u90e8\u5206\u5b9f\u88c5\n\u30c7\u30fc\u30bf\u3092\u3044\u3058\u308b\u30a2\u30d7\u30ea\u90e8\u5206.\n\napp/main/main.controller.js\n'use strict';\n\nangular.module('angularD3SampleApp').controller('MainCtrl', function () {\n\n  var main = this;\n\n  main.sampleData= [\n    {name:'Chrome', users: 500},\n    {name:'Internet Explorer', users: 200},\n    {name:'Safari', users: 300}\n  ];\n\n  main.newData = {name: '', users: 0};\n\n  main.add = function(){\n    main.sampleData.push(main.newData);\n    main.newData = {name: '', users: 0};\n  };\n\n  main.remove = function($index){\n    main.sampleData.splice($index, 1);\n  };\n\n});\n\n\n\napp/main/main.html\n<div class=\"header\">\n  <h3>D3 Sample</h3>\n</div>\n<div class=\"row marketing\" ng-controller=\"MainCtrl as main\">\n  <div class=\"col-md-12\">\n    <table class=\"table\">\n      <thead>\n        <tr><th>#</th><th>name</th><th>users</th><th>action</th></tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat=\"data in main.sampleData\"><!-- data iteration {{{ -->\n          <td>{{$index + 1}}</td>\n          <td>{{data.name}}</td>\n          <td> <input type=\"number\" size=\"5\" class=\"form-control input-sm\" ng-model=\"data.users\"> </td>\n          <td>\n            <button class=\"btn btn-sm btn-danger\" ng-click=\"main.remove($index);\">\n              <span class=\"glyphicon glyphicon-minus-sign\"></span>\n              remove\n            </button>\n          </td>\n        </tr><!-- }}} end iteration -->\n        <tr><!-- new data {{{ -->\n          <td>new</td>\n          <td> <input type=\"text\" size=\"10\" placeholder=\"input name\" class=\"form-control input-sm\" ng-model=\"main.newData.name\"> </td>\n          <td> <input type=\"number\" size=\"5\" class=\"form-control input-sm\" ng-model=\"main.newData.users\"> </td>\n          <td>\n            <button class=\"btn btn-success btn-sm\" ng-click=\"main.add()\">\n              <span class=\"glyphicon glyphicon-plus-sign\"></span>\n              add\n            </button>\n          </td>\n        </tr><!--}}} new data -->\n      </tbody>\n    </table>\n  </div>\n  <div class=\"col-md-12\">\n    <div>\n      <!-- \u2605\u2605 D3\u4e3b\u4f53\u306e\u5834\u5408 \u2605\u2605-->\n      <d3-bar data=\"main.sampleData\" key=\"name\" value-prop=\"users\" label=\"name\"></d3-bar>\n\n      <!-- \u2605\u2605 Angular\u4e3b\u4f53\u306e\u5834\u5408 \u2605\u2605-->\n      <div ng-include=\"'app/viz/barLayout.html'\"></div>\n    </div>\n  </div>\n</div>\n\n\n\u4e0a\u8a18\u306e<!-- \u2605\u2605 \u2605\u2605 -->\u90e8\u5206\u306f, D3\u4e3b\u4f53 or Angular\u4e3b\u4f53\u306e\u3069\u3061\u3089\u304b\u4e00\u65b9\u3092\u6b8b\u3059\u3079\u3057.\n\nD3\u4e3b\u4f53\u3068\u3057\u305f\u5834\u5408\u306e\u53ef\u8996\u5316\u9818\u57df\u5b9f\u88c5\njsfiddle\u306b\u52d5\u4f5c\u30b3\u30fc\u30c9\u3042\u308a\n<svg> \u8981\u7d20\u914d\u4e0b\u306eDOM(SVG)\u306e\u69cb\u7bc9, Collection\u3068\u306e\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0, \u8981\u7d20\u306e\u5897\u6e1b\u8ffd\u8de1\u3059\u3079\u3066\u3092D3\u306e\u30e1\u30bd\u30c3\u30c9\u3067\u5b9f\u73fe\u3059\u308b.\nDOM\u306b\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081, Angular\u3068\u306e\u7cca\u4ed8\u3051\u90e8\u5206\u306fDirective\u3067\u5b9f\u73fe\u3059\u308b\u5f62\u3068\u306a\u308b.\n\ncomponents/d3/d3Bar.directive.js\n'use strict';\n\nangular.module('angularD3SampleApp').directive('d3Bar', function (d3, $parse) {\n  return{\n    restrict: 'EAC',\n    scope: {data: '=', key: '@', valueProp: '@', label: '@'},\n    link: function (scope, element) {\n      var svg = d3.select(element[0]).append('svg').style('width', '100%');\n      var colorScale = d3.scale.category20();\n\n      var watched = {};\n\n      var getId = $parse(scope.key || 'id');\n      var getValue = $parse(scope.valueProp || 'value');\n      var getLabel = $parse(scope.label || 'name');\n\n      scope.$watchCollection('data', function () {\n        if(!scope.data){\n          return;\n        }\n\n        var dataSet = svg.selectAll('g.data-group').data(scope.data, getId);\n\n        var createdGroup = dataSet.enter()\n        .append('g').classed('data-group', true)\n        .each(function(d){\n          var self = d3.select(this);\n          watched[getId(d)] = scope.$watch(function () {\n            return getValue(d);\n          }, function(v){\n            self.select('rect').attr('width', v);\n          });\n        });\n        createdGroup.append('rect')\n        .attr('x', 130)\n        .attr('height', 18)\n        .attr('fill', function (d) {\n          return colorScale(d.name);\n        });\n        createdGroup.append('text').text(getLabel).attr('height', 15);\n\n        dataSet.exit().each(function(d){\n          var id = getId(d);\n          watched[id]();\n          delete watched[id];\n        }).remove();\n\n        dataSet.each(function (d, i) {\n          var self = d3.select(this);\n          self.select('rect').attr('y', i * 25);\n          self.select('text').attr('y', i * 25 + 15);\n        });\n      });\n    }\n  };\n});\n\n\n\u4e0a\u8a18\u306ed3Bar Directive\u306b\u3064\u3044\u3066\u306f, \u4ee5\u524d\u306e\u30a8\u30f3\u30c8\u30ea\u3067\u3082\u8aac\u660e\u3057\u305f\u901a\u308a\u306e\u305f\u3081, \u89e3\u8aac\u306b\u3064\u3044\u3066\u306f, \u3053\u3061\u3089\u3092\u53c2\u7167\u3055\u308c\u305f\u3057.\n\nAngular\u4e3b\u4f53\u3068\u3057\u305f\u5834\u5408\u306e\u53ef\u8996\u5316\u9818\u57df\u5b9f\u88c5\njsfiddle\u306b\u52d5\u4f5c\u30b3\u30fc\u30c9\u3042\u308a\n\u4e0a\u8ff0\u306e\u901a\u308a, Angular\u4e3b\u4f53\u306e\u65b9\u6cd5\u3067\u306f, \u53ef\u8996\u5316\u90e8\u5206\u3082D3\u306f\u4f7f\u308f\u305a\u306b, ngRepeat\u3084AngularJS\u306e\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0({{...}})\u3092\u7528\u3044\u3066View\u3092\u69cb\u7bc9\u3057\u3066\u3044\u304f:\n\napp/viz/barLayout.html\n<svg ng-controller=\"BarLayoutCtrl as barLayout\" style=\"width:100%;\">\n  <g ng-repeat=\"data in main.sampleData track by data.name\">\n    <text ng-attr-y=\"{{$index*25+15}}\" height=\"15\">\n      {{::data.name}}\n    </text>\n    <rect\n      x=\"130\"\n      ng-attr-y=\"{{$index*25}}\"\n      ng-attr-width=\"{{data.users}}\"\n      height=\"18\"\n      fill=\"{{::barLayout.fill(data.name)}}\"\n    >\n    </rect>\n  </g>\n</svg>\n\n\n\u3053\u306e\u4f8b\u306e\u3088\u3046\u306a, \u5358\u7d14\u306a\u68d2\u30b0\u30e9\u30d5\u3067\u3042\u308c\u3070, D3\u306e\u6d3b\u8e8d\u3059\u308b\u4f59\u5730\u306f\u6b86\u3069\u306a\u304f, \u8f9b\u3046\u3058\u3066\u68d2\u306e\u5857\u308a\u3064\u3076\u3057\u8272(fill\u5c5e\u6027)\u3092\u6c7a\u5b9a\u3059\u308b\u90e8\u5206\u3067, d3.scale.category20\u3092\u4f7f\u3063\u3066\u3044\u308b\u7a0b\u5ea6.\n\napp/viz/barLayout.controller.js\n'use strict';\n\nangular.module('angularD3SampleApp').controller('BarLayoutCtrl', function (d3) {\n  var barLayout = this;\n  var colorScale = d3.scale.category20();\n\n  barLayout.fill = function (id) {\n    return colorScale(id);\n  };\n\n});\n\n\n\nLayout\u306e\u5229\u7528\u4f8b(\u30c9\u30fc\u30ca\u30c4\u30c1\u30e3\u30fc\u30c8)\n\u524d\u56de\u3082, Layout\u3092\u5229\u7528\u3059\u308b\u4f8b\u3068\u3057\u3066, \u30c9\u30fc\u30ca\u30c4\u30c1\u30e3\u30fc\u30c8(d3.layout.pie)\u3092\u5185\u90e8\u7684\u306b\u5229\u7528\u3057\u305fDirective\u3092\u793a\u3057\u305f.\n\u4eca\u56de\u3082\u540c\u3058\u304f, Angular\u4e3b\u4f53\u306e\u65b9\u6cd5\u3067\u30c9\u30fc\u30ca\u30c4\u30c1\u30e3\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u305f\u3089, \u3069\u306e\u3088\u3046\u306b\u306a\u308b\u304b\u3092\u793a\u3057\u3066\u307f\u308b.\n...\u3068\u3044\u3046\u3088\u308a, \u68d2\u30b0\u30e9\u30d5\u306e\u4f8b\u3060\u3068, \u300cD3.js\u7121\u304f\u3066\u3082\u3088\u304f\u306d\uff1f\u300d\u3068\u3044\u3046\u7d50\u8ad6\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u305d\u3046\u306a\u306e\u3067, D3\u306b\u5b58\u5728\u3059\u308b\u304cAngular\u306b\u306f\u5b58\u5728\u3057\u306a\u3044\u300cLayout, SVG utility\u300d\u3092\u5229\u7528\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3082\u4f8b\u793a\u3059\u308b\u3053\u3068\u3068\u3059\u308b.\n\u4e0a\u8a18\u306eapp/biz/barLayout.html, app/biz/barLayout.controller.js\u3092\u4e0b\u8a18\u3067\u7f6e\u304d\u63db\u3048\u308b\uff1a\n(jsfiddle\u306b\u52d5\u4f5c\u30b3\u30fc\u30c9\u6709\u308a)\n\napp/biz/pieLayout.html\n<svg ng-controller=\"PieLayoutCtrl as pieLayout\" style=\"width:100%; height:420px\">\n  <g transform=\"translate(200,200)\">\n    <path\n      ng-repeat=\"part in pieLayout.parts track by part.data.name\"\n      ng-attr-d=\"{{pieLayout.arc(part)}}\"\n      fill=\"{{::pieLayout.fill(part.data.name)}}\"\n    >\n    </path>\n  </g>\n</svg>\n\n\n\napp/biz/pieLaytou.controller.js\n'use strict';\n\nangular.module('angularD3SampleApp').controller('PieLayoutCtrl', function (d3, $scope) {\n  var pieLayout = this;\n  var colorScale = d3.scale.category20();\n  var arc = d3.svg.arc().outerRadius(200).innerRadius(100);\n\n  pieLayout.fill = function (id) {\n    return colorScale(id);\n  };\n\n  pieLayout.arc = function (part) {\n    return arc(part);\n  };\n\n  $scope.$watch('main.sampleData', function (datum) {\n    pieLayout.parts = d3.layout.pie().value(function (data) {\n      return data.users;\n    }).sort(null)(datum);\n  }, true);\n\n});\n\n\n\u30c9\u30fc\u30ca\u30c4\u30c1\u30e3\u30fc\u30c8\u306e\u6247\u578b\u90e8\u5206\u306eSVG\u306f, <path d=\"...\">\u3067\u8868\u3055\u308c\u308b\u304c, \u3053\u306ed\u5c5e\u6027\u3092D3\u7121\u3057\u306bAngular\u3060\u3051\u3067\u8a08\u7b97\u3059\u308b\u306e\u306f\u76f8\u5f53\u9762\u5012\u304f\u3055\u3044\u304c,  d3.svg.arc()\u3068d3.layout.pie\u3092\u3046\u307e\u304f\u4f7f\u3048\u3070\u77ac\u6bba\u3067\u3042\u308b.\n\nController\u5206\u5272\n\u5148\u306e\u68d2\u30b0\u30e9\u30d5\u306e\u4f8b\u3067\u3082\u610f\u56f3\u7684\u306b\u5206\u5272\u3057\u3066\u3044\u305f\u306e\u3060\u3051\u308c\u3069, Angular\u4e3b\u4f53\u306e\u65b9\u6cd5\u3067\u306f, \u53ef\u8996\u5316\u90e8\u5206\u304cScope\u3068\u306a\u308b\u3088\u3046\u306b\u5b50Controller\u3092\u7528\u610f\u3057\u3066\u3044\u305f.\n\u3053\u308c\u306f\u3001\u300cScope\u306e\u30c7\u30fc\u30bf\u306b\u5f93\u5c5e\u3059\u308b\u53ef\u8996\u5316\u8981\u7d20(=\u5ea7\u6a19\u60c5\u5831, \u8272, etc...)\u3092\u53d6\u308a\u4ed5\u5207\u308bViewModel\u300d\u3092\u5225\u9014, \u30e1\u30a4\u30f3\u306eScope\u306e\u4e0b\u4f4d\u306b\u7528\u610f\u3057\u3066\u304a\u304d\u305f\u304b\u3063\u305f\u3089\u3060.\n\u4eca\u56de\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u8a00\u3046\u306a\u3089,  MainCtrl\u306f\u300c\u68d2\u30b0\u30e9\u30d5\u306e\u500b\u5225\u306e\u8272\u300d\u306b\u95a2\u5fc3\u3092\u62b1\u304f\u3079\u304d\u3067\u306f\u306a\u3044\u304c, \u8272\u306f\u68d2\u30b0\u30e9\u30d5\u306e\u30c7\u30fc\u30bf\u540d\u79f0\u304b\u3089\u6c7a\u5b9a\u3057\u3066\u3044\u308b. \n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u81ea\u4f53\u304c\u5fc5\u305a\u3057\u3082, \u300c\u30c7\u30fc\u30bf\u306e\u7de8\u96c6\u90e8\u5206\u300d + \u300c\u30c7\u30fc\u30bf\u306e\u53ef\u8996\u5316\u90e8\u5206\u300d\u3067\u69cb\u6210\u3055\u308c\u308b\u3068\u306f\u9650\u3089\u306a\u3044\u306e\u3067, \u5e38\u306b\u7de8\u96c6\u90e8\u5206\u3092\u89aa, \u53ef\u8996\u5316\u90e8\u5206\u3092\u5b50\u3068\u3057\u305fController\u5206\u5272\u304c\u6210\u308a\u7acb\u3064\u3068\u306f\u8a00\u3048\u306a\u3044\u304c, AngularJS\u4e3b\u4f53\u306e\u65b9\u6cd5\u3067\u5b9f\u88c5\u3057\u305f\u5834\u5408\u306b, Fat Controller\u3068\u306a\u3089\u306a\u3044\u305f\u3081\u306b\u3082\u3001\u5fc3\u304c\u3051\u3066\u304a\u304d\u305f\u3044\u30dd\u30a4\u30f3\u30c8\u3067\u306f\u306a\u3044\u3060\u308d\u3046\u304b.\n\n\u307e\u3068\u3081\n\nAngularJS\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067D3.js\u3092\u7528\u3044\u305f\u53ef\u8996\u5316\u3092\u884c\u3046\u5834\u5408, \u4ee5\u4e0b\u306e2\u901a\u308a\u304c\u3042\u308b\n\n\n\u53ef\u8996\u5316\u9818\u57df\u3092Directive\u3068\u3057, Directive\u5185\u90e8\u3067\u306fD3.js\u30e1\u30a4\u30f3\u3067\u5b9f\u88c5\u3059\u308b\nCollection\u3068\u306e\u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u306fAngular\u306b\u4e00\u672c\u5316\u3057, D3.js\u306fSVG\u306e\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u3068\u3057\u3066\u306e\u307f\u7528\u3044\u308b\n\n\n\n\u7d50\u5c40, 1. \u3068 2., \u3069\u3061\u3089\u304c\u3044\u3044\u306e\u304b\uff1f \u3068\u3044\u3046\u7591\u554f\u306b\u5bfe\u3057\u3066\u3067\u3042\u308b\u304c, \u50d5\u306f\u500b\u4eba\u7684\u306b\u306f 2.\u306e Angular\u4e3b\u4f53\u3068\u3059\u308b\u65b9\u6cd5\u304c\u826f\u3044\u3068\u601d\u3063\u3066\u3044\u308b.\n\u300cView\u3092HTML + \u03b1 \u3067\u5ba3\u8a00\u7684\u306b\u69cb\u7bc9\u3067\u304d\u308b\u300d\u306fAngularJS\u3067\u306e\u6c17\u306b\u5165\u3063\u3066\u3044\u308b\u70b9\u306e\u4e00\u3064\u3060\u3057, View\u69cb\u7bc9\u65b9\u6cd5\u304c2\u901a\u308a\u3067\u6df7\u5728\u3057\u3066\u3044\u308b\u3068, \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5168\u4f53\u306e\u7d71\u4e00\u611f\u3068\u3044\u3046\u304b, \u898b\u901a\u3057\u304c\u60aa\u304f\u306a\u308b\u306e\u306f\u907f\u3051\u305f\u3044\u3068\u8003\u3048\u3066\u3044\u308b\u304b\u3089\u3060.\n\n\u53c2\u8003\n\n\nhttp://alexandros.resin.io/angular-d3-svg/ 1\u5e74\u8fd1\u304f\u524d & \u82f1\u8a9e \u3067\u3059\u304c, \u5c0e\u5165\u90e8\u306e\u8aac\u660e\u306f\u8aad\u307f\u7269\u3068\u3057\u3066\u3082\u304a\u3082\u3057\u308d\u3044\u306e\u3067\u662f\u975e\n\n## \u306f\u3058\u3081\u306b\n\n\u4ee5\u524d, [AngularJS\u3067D3.js\u3092\u30e9\u30c3\u30d7\u3057\u3066\u307f\u3088\u3046](http://qiita.com/Quramy/items/b701b824c2f42c683aa7)\u306e\u30a8\u30f3\u30c8\u30ea\u3067, \u300c\u3044\u304b\u306b\u3057\u3066AngularJS\u3068D3.js\u3092\u7d71\u5408\u3059\u308b\u304b\u300d\u3092\u8a18\u8f09\u3057\u305f.\n\n\u305d\u306e\u5f8c, \u81ea\u5206\u3067\u5e7e\u3064\u304bAngularJS\u3068D3.js\u4e21\u65b9\u3092\u4f7f\u3063\u305fApplication\u3092\u4f5c\u3063\u305f\u308a, http://alexandros.resin.io/angular-d3-svg/ \u306e\u30d6\u30ed\u30b0\u3092\u8aad\u3093\u3060\u308a\u3057\u305f\u4e0a\u3067, \u53cc\u65b9\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u4e21\u65b9\u3092\u4f7f\u3046\u969b\u306e\u77e5\u898b\u304c\u5897\u3048\u305f\u306e\u3067, \u3053\u308c\u3092\u6a5f\u306b\u3082\u3046\u4e00\u5ea6\u6574\u7406\u3057\u3066\u307f\u3088\u3046\u304b\u3068.\n\n## \u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u3057\u3066\u306e\u6bd4\u8f03\n\nAngularJS\u3068D3.js, \u53cc\u65b9\u3092\u89e6\u3063\u3066\u307f\u3066\u601d\u3046\u306e\u306f, \u7279\u306b\u30b3\u30a2\u306a\u90e8\u5206\u306b\u3064\u3044\u3066, \u5099\u3048\u3066\u3044\u308b\u6a5f\u80fd\u304c\u91cd\u8907\u3057\u3066\u3044\u305f\u308a, \u540c\u7b49\u6a5f\u80fd\u3078\u306e\u5b9f\u88c5\u30a2\u30d7\u30ed\u30fc\u30c1\u304c\u7570\u306a\u308b\u306a\u3041\u3001\u3068\u3044\u3046\u3053\u3068.\n\n\n| #   | \u6bd4\u8f03\u9805\u76ee              | Angular's way                 | D3's way                    |\n|:----|----------------------|-------------------------------|-----------------------------|\n| 1.  | View\u69cb\u7bc9\u30b9\u30bf\u30f3\u30b9       | Declarative(\u5ba3\u8a00\u7684)           | Functional(\u624b\u7d9a\u7684)          |\n| 2.  | \u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0  | `ngModel` \u3084 `{{...}}`     | `d3.selectAll(\u301c).data(\u301c)`   |\n| 3.  | Collection CRUD\u8ffd\u8de1  | `ngRepeat`                    | `enter()`, `exit()`         |\n| 4.  | Layout\u6a5f\u80fd           | \u7121                            | `d3.layout.force` \u7b49       |\n| 5.  | SVG utility          | \u7121                            | `d3.svg.arc` \u7b49           |\n\n\n\u7279\u5fb4\u7684\u306a\u306e\u306f, 1.\u301c3.\u306e\u90e8\u5206\u3060\u308d\u3046.\n\u307e\u3041, 4.\u30685.\u306f\u53ef\u8996\u5316\u306b\u7279\u5316\u3057\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3042\u308bD3.js\u3060\u3051\u304c\u5099\u3048\u3066\u3044\u308b\u306e\u306f\u9055\u548c\u611f\u7121\u3044\u3057...\n\n\u4ee5\u4e0b\u3067, \u305d\u308c\u305e\u308c\u306e\u6a5f\u80fd\u6bce\u306b\u8003\u3048\u65b9\u3092\u898b\u3066\u3044\u304f.\n\n### View\u69cb\u7bc9\u30b9\u30bf\u30f3\u30b9\n\n\u307e\u305a\u306fView\u306b\u5bfe\u3059\u308b\u30b9\u30bf\u30f3\u30b9\u304b\u3089. \n\u300cSVG\u306e\u9818\u57df\u3078 (x, y)=(100, 100)\u306b\u534a\u5f8420\u306e\u5186\u3092\u63cf\u753b\u3059\u308b\u300d\u3092\u4f8b\u306b\u8003\u3048\u3066\u307f\u308b.\n\n#### Angular's way\n\u5ba3\u8a00\u7684. HTML\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u7528\u3044\u3066, \u30de\u30fc\u30af\u30a2\u30c3\u30d7\u3057\u3066\u3044\u304f.\n\n```html\n<svg>\n  <circle cx=\"100\" cy=\"100\" r=\"20\"></circle>\n</svg>\n```\n\n#### D3's way\n\u624b\u7d9a\u7684. jQuery\u30e9\u30a4\u30af\u306aDOM\u64cd\u4f5c\u95a2\u6570\u3067DOM\u3092\u7d44\u307f\u7acb\u3066\u3066\u884c\u304f.\n\n```js\nvar svg = d3.select('body').append('svg');\nsvg.append('circle')\n  .attr('cx', 100)\n  .attr('cy', 100)\n  .attr('r', 20);\n```\n\n### \u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\n\n#### Angular's way\n`ngModel`\u3084, `{{...}}`\u7b49\u306eDirective\u3092HTML\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067, Scope\u306e\u30c7\u30fc\u30bf\u304cView\u3078\u30d0\u30a4\u30f3\u30c9\u3055\u308c\u308b.\n\u88cf\u5074\u3067\u306f, Directive\u306e\u5b9f\u88c5\u306b\u3088\u308a, `$scope.$watch`\u3084`$scope.$watchCollection`\u304c\u52d5\u4f5c\u3059\u308b.\n\n#### D3's way\n\nD3\u306e\u5834\u5408, \u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u306fCollection\u306b\u5bfe\u3057\u3066\u884c\u3046.\n\n`d3.selectAll(\u30bb\u30ec\u30af\u30bf).data(\u30b3\u30ec\u30af\u30b7\u30e7\u30f3)` \u3068\u3059\u308b\u3053\u3068\u3067, \u30bb\u30ec\u30af\u30bf\u5bfe\u8c61\u306eDOM\u3068\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u304c1:1\u3067\u7d10\u4ed8\u3051\u3089\u308c\u308b.\n\u3053\u3044\u3064\u304c\u3042\u3063\u3066\u3053\u305d\u306e\"Data Driven Document\"\u3068\u8a00\u3063\u3066\u3082\u904e\u8a00\u3067\u306f\u306a\u3044\u304f\u3089\u3044.\n\n`data()`\u30e1\u30bd\u30c3\u30c9\u3067Collection\u3068\u306e\u7d10\u4ed8\u3051\u3092\u5b9f\u65bd\u3057\u305f\u5f8c\u306f, `attr`\u30e1\u30bd\u30c3\u30c9\u7b49\u3092\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u3067\u547c\u3073\u51fa\u3059\u3053\u3068\u3067, \u30c7\u30fc\u30bf\u5024\u306e\u52a0\u5de5 -> DOM\u5c5e\u6027\u5024\u3078\u306e\u30bb\u30c3\u30c8 \u3092\u30af\u30ed\u30fc\u30b8\u30e3\u3067\u51e6\u7406\u3067\u304d\u308b.\n\n```js\nd3.selectAll('circle').data([100, 200, 300])\n  .attr('cx', function (d) { return d;})\n  .attr('r', function (d) {return Math.sqrt(d);});\n```\n\n### Collection CRUD\u8ffd\u8de1\nAngularJS, D3.js\u5171\u306b\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u6271\u3046\u305f\u3081\u306e\u4ed5\u7d44\u307f\u304c\u3042\u308b.\n\n\u7279\u306b\u3069\u3061\u3089\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3082, \u914d\u5217\u8981\u7d20 <-> DOM\u8981\u7d20 \u30921:1\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u6a5f\u69cb\u3068, Collection\u5074\u306e\u8981\u7d20\u6570\u5897\u6e1b\u307e\u3067\u542b\u3081\u3066\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b.\n\n#### Angular's way\n`ngRepeat` Directive\u304c, Collection\n\n```js:main.js\nfunction MainCtrl(){\n  this.datum = [\n    {cx: 100, cy: 50, r: 50},\n    {cx: 100, cy: 150, r: 30},\n    {cx: 100, cy: 250, r: 20}\n  ];\n}\n```\n\n```html:main.html\n<div ng-controller=\"MainCtrl as main\">\n  <svg>\n    <circle ng-repeat=\"data in main.datum\"\n      ng-attr-cx=\"{{data.cx}}\"\n      ng-attr-cy=\"{{data.cy}}\"\n      ng-attr-r=\"{{::data.r}}\" >\n    </circle>\n  </svg>\n</div>\n```\n\n`ngRepeat` \u306f Collection(\u4e0a\u8a18\u306e\u5834\u5408, `main.datum`)\u306e\u8981\u7d20\u6570\u304c\u5909\u52d5\u3057\u305f\u5834\u5408, \u5897\u5206(\u6e1b\u5206)\u306e\u307f\u3092\u518d\u63cf\u753b\u3059\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b.\n\n\u306a\u304a, \u4e0a\u8a18\u306eView\u306e\u30b5\u30f3\u30d7\u30eb\u30672\u70b9\u88dc\u8db3:\n\n+ `ng-attr-*`  \n`<circle>` \u7b49, SVG\u8981\u7d20\u4e2d\u306eattribute\u306bScope\u306e\u5024\u3092\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3059\u308b\u969b, `cx={{...}}` \u3068\u3059\u308b\u3068, \u4e00\u898b\u4f55\u306e\u554f\u984c\u3082\u306a\u304fRendering\u3055\u308c\u308b\u304c, \u30b3\u30f3\u30bd\u30fc\u30eb\u306b` Error: Invalid value for <circle> attribute cx=\u4ee5\u4e0b\u7565` \u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u3092\u5410\u304f\u3053\u3068\u304c\u3042\u308b.  \n\u3053\u306e\u30a8\u30e9\u30fc\u306e\u539f\u56e0\u306f, [AngularJS\u306eDirective\u30ac\u30a4\u30c9](https://docs.angularjs.org/guide/directive#-ngattr-attribute-bindings)\u306b\u3082\u3042\u308b\u901a\u308a, SVG\u306eDOM API\u304c\u53b3\u5bc6\u306b\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u884c\u3046\u305f\u3081.  \n\u56de\u907f\u3059\u308b\u305f\u3081\u306b\u306f, `ng-attr-`\u3092\u30d0\u30a4\u30f3\u30c9\u3057\u305f\u3044\u5c5e\u6027\u306b\u4ed8\u4e0e\u3059\u308c\u3070\u3088\u3044.\n+ `{{::\u301c}`  \nAngularJS 1.3.x\u304b\u3089\u5c0e\u5165\u3055\u308c\u305f[One Time Binding](https://docs.angularjs.org/guide/expression#one-time-binding). \u4e00\u56de\u3060\u3051\u8a55\u4fa1\u3059\u308c\u3070\u3088\u3044\u5f0f\u306b\u7528\u3044\u308b.\n\n\n#### D3's way\n\n```js\nvar datum = [\n  {cx: 100, cy: 50, r: 50},\n  {cx: 100, cy: 150, r: 30},\n  {cx: 100, cy: 250, r: 20}\n];\n\nvar render = function (datum) {\n  var svg = d3.select('svg#viz'), selection = svg.selectAll('circle').data(datum);\n  selection.enter()\n    .append('circle')\n    .attr('r', function(d){return d.r});\n\n  selection\n    .attr('cx', function(d){return d.cx})\n    .attr('cy', function(d){return d.cy});\n\n  selection.exit()\n    .remove();\n\n};\n\nrender(datum);\n```\n\nD3.js\u306e\u5834\u5408\u3001`d3.selectAll(data)`\u306b\u3001\u4ee5\u4e0b\u306e\u90e8\u5206\u96c6\u5408\u3092\u53d6\u308a\u6271\u3046\u70ba\u306eAPI\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b:\n\n + `enter()`: \u73fe\u6642\u70b9\u3067\u306fDOM\u306b\u5b58\u5728\u3057\u306a\u3044\u304c, \u63cf\u753b\u3055\u308c\u308b\u3079\u304dCollection\u8981\u7d20\u306e\u90e8\u5206\u96c6\u5408\n + `exit()`: Collection\u8981\u7d20\u306b\u306f\u65e2\u306b\u5b58\u5728\u3057\u306a\u3044\u304c, DOM\u30c4\u30ea\u30fc\u306b\u53d6\u308a\u6b8b\u3055\u308c\u3066\u3044\u308bDOM\u8981\u7d20\u96c6\u5408\n\n\u3057\u305f\u304c\u3063\u3066, `enter()`\u306e\u7d50\u679c\u306fDOM\u306b `append`, `exit()`\u306e\u7d50\u679c\u306fDOM\u304b\u3089`remove()` \u3068\u3044\u3046\u69d8\u306b, \u63cf\u753b\u7528\u306e\u95a2\u6570(\u4e0a\u8a18\u306e`render()`)\u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\u3053\u3068\u3067, \nCollection\u306e\u72b6\u614b\u3092\u610f\u8b58\u3059\u308b\u3053\u3068\u306a\u304f, Collection\u5909\u66f4\u767a\u751f\u6642\u306b\u90fd\u5ea6\u90fd\u5ea6`render()`\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u3067, DOM\u3068Collection\u306e\u72b6\u614b\u3092\u540c\u671f\u3057\u7d9a\u3051\u308b\u3053\u3068\u304c\u51fa\u6765\u308b.\n\n### Layout, SVG utility\n\u307e\u3041, Angular\u306b\u3001\u305d\u3053\u307e\u3067\u53ef\u8996\u5316\u306b\u7279\u5316\u3057\u305f\u6a5f\u80fd\u306f\u306a\u3044\u3067\u3059\u3088\u306d...\n\nD3\u306e\u3088\u3044\u3068\u3053\u308d\u306f, \u3055\u304f\u3063\u3068\u4f7f\u3048\u308bLayout(`d3.layout.chord`\u3084`d3.layout.force`)\u304c\u63c3\u3063\u3066\u3044\u305f\u308a, \u9762\u5012\u306aSVG\u306e\u5404\u7a2e\u5c5e\u6027\u3092\u8a08\u7b97\u3059\u308b\u305f\u3081\u306e\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u95a2\u6570\u304c\u30d3\u30eb\u30c8\u30a4\u30f3\u3055\u308c\u3066\u3044\u308b\u70b9.\n\n## \u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3\n\n\u3068\u307e\u3041, \u3053\u3053\u307e\u3067\u3067AngularJS, D3.js\u306e\u4f3c\u3066\u3044\u308b\u70b9\u30fb\u7570\u306a\u308b\u70b9\u3092\u898b\u3066\u304d\u305f.\n\n\u3053\u308c\u3089\u3092\u8e0f\u307e\u3048\u305f\u4e0a\u3067, \u4e21\u8005\u3092\u540c\u6642\u306b\u5229\u7528\u3059\u308b\u969b\u306e\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3\u3092\u8003\u3048\u3066\u307f\u308b.\n\n### D3\u3092\u4e3b\u4f53\u3068\u3059\u308b\u65b9\u6cd5\n\n\u53ef\u8996\u5316\u9818\u57df\u914d\u4e0b\u306eView\u69cb\u7bc9, \u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0, \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u5236\u5fa1\u3064\u3044\u3066, D3.js\u5074\u306e\u6a5f\u80fd\u3092\u5229\u7528\u3059\u308b\u30d1\u30bf\u30fc\u30f3.\n\n\u4e0a\u8a18\u3067, \u300cD3.js's way\u300d\u3068\u3057\u3066\u304d\u305f\u5b9f\u88c5\u65b9\u6cd5\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u3044\u304f.\n\n\u66f8\u7c4d\u306e[AngularJS\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](http://www.amazon.co.jp/AngularJS%E3%83%AA%E3%83%95%E3%82%A1%E3%83%AC%E3%83%B3%E3%82%B9-%E6%B1%A0%E6%B7%BB-%E6%98%8E%E5%AE%8F/dp/4844336681), [D3 on AngularJS](https://leanpub.com/d3angularjs) \u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u65b9\u6cd5\u3082, \u3053\u3061\u3089\u306e\u30d1\u30bf\u30fc\u30f3\u306b\u5c5e\u3057\u3066\u3044\u308b.\n\n\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u306e\u7279\u5fb4\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308b.\n\n+ \u53ef\u8996\u5316\u9818\u57df\u306b\u5bfe\u3057\u3066Directive\u3092\u4f5c\u6210\u3057, Directive\u914d\u4e0b\u306eDOM\u3092D3.js\u306e\u30e1\u30bd\u30c3\u30c9\u3067\u624b\u7d9a\u7684\u306b\u7d44\u307f\u7acb\u3066\u308b.\n+ Directive\u306e\u5f15\u6570\u3068\u3057\u3066, \u53ef\u8996\u5316\u5bfe\u8c61\u306e\u30c7\u30fc\u30bf\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u304c\u683c\u7d0d\u3055\u308c\u305fScope\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u53d7\u3051\u53d6\u308b.\n+ `$scope.$watchCollection` \u3084 `$scope.$watch(... , ... , true)` (deep watch) \u3092\u7528\u3044\u3066, `$scope`\u306e\u5024\u5909\u52d5\u6642\u306b\u52d5\u4f5c\u3059\u308bListener\u3092\u767b\u9332.\n+ \u4e0a\u8a18Listener\u306e\u5185\u90e8\u3067, `d3.selectAll(...).data(...)` \u306e `enter()` \u3084 `exit()`\u3092\u547c\u3073\u51fa\u3057, \u8981\u7d20\u306e\u8ffd\u52a0/\u524a\u9664\u306eDOM\u64cd\u4f5c\u3092d3\u7684\u306b\u8a18\u8ff0.\n\n\u4e0a\u8a18\u306e\u30d1\u30bf\u30fc\u30f3\u304c\u6709\u7528\u306a\u306e\u306f, \u4e0b\u8a18\u3060\u308d\u3046\u304b.\n\n+ \u5b9f\u88c5\u3057\u305f\u3044\u53ef\u8996\u5316\u30a2\u30d7\u30ea\u304cD3.js\u306e\u30b3\u30fc\u30c9\u3068\u3057\u3066\u51fa\u6765\u3042\u304c\u3063\u3066\u304a\u308a, AngularJS\u3078\u306e\u7e4b\u304e\u90e8\u5206\u3092\u4f5c\u3063\u3066\u3057\u307e\u3048\u3070\u826f\u3044\u30b1\u30fc\u30b9\n\n\u88cf\u3092\u8fd4\u3059\u3068, \u3053\u306e\u30d1\u30bf\u30fc\u30f3\u306b\u306f\u4ee5\u4e0b\u306e\u30c7\u30e1\u30ea\u30c3\u30c8\u304c\u4f34\u3046.\n\n+ \u53ef\u8996\u5316\u90e8\u5206\u306e\u5b9f\u88c5\u5909\u66f4\u306b\u306fDirective\u4fee\u6b63\u304c\u5fc5\u305a\u4f34\u3046.\n+ Directive\u306eLink\u95a2\u6570(\u305d\u308c\u3082`$scope.$watch`\u306b\u767b\u9332\u3059\u308bListener)\u306b\u30b3\u30fc\u30c9\u306e\u5927\u534a\u304c\u96c6\u4e2d\u3057, Directive\u306e\u30b3\u30fc\u30c9\u304c\u5de8\u5927\u5316\u3057\u304c\u3061.\n+ DOM\u64cd\u4f5c\u3092D3.js\u306b\u59d4\u8b72\u3059\u308b\u305f\u3081, \u30e6\u30fc\u30b6\u30a4\u30f3\u30bf\u30e9\u30af\u30b7\u30e7\u30f3\u306b`ngClick`\u3084`ngMouseover`\u304c\u5229\u7528\u51fa\u6765\u306a\u3044\n\n\n### Angular\u3092\u4e3b\u4f53\u3068\u3059\u308b\u65b9\u6cd5\n\n\u3082\u3046\u4e00\u3064\u306e\u30d1\u30bf\u30fc\u30f3\u306f, View\u69cb\u7bc9, \u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0, \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u5909\u52d5\u6642\u306eDOM\u5236\u5fa1\u5168\u3066\u3092AngularJS\u30d9\u30fc\u30b9\u3067\u5b9f\u88c5\u3059\u308b\u30d1\u30bf\u30fc\u30f3.\n\n\u601d\u60f3\u7684\u306b\u306f [Radian](http://openbrainsrc.github.io/Radian/) \u306f\u3053\u3061\u3089\u306e\u30d1\u30bf\u30fc\u30f3\u306b\u8fd1\u3044(Expression\u304cAngularJS\u306e\u3082\u306e\u3068\u306f\u7570\u306a\u308b\u304c).\n\n\u3053\u306e\u30d1\u30bf\u30fc\u30f3\u306e\u7279\u5fb4\u306f\u4e0b\u8a18\u3067\u3042\u308b:\n\n+ \u53ef\u8996\u5316\u9818\u57df\u5185\u90e8\u3082\u542b\u3081, DOM\u306fAnguarJS\u306eHTML\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u69cb\u6210\u3057\u3066\u3044\u304f.\n+ SVG\u306e\u5c5e\u6027\u306b\u3064\u3044\u3066\u3082, `ng-attr-cx={{...}}` \u306e\u3088\u3046\u306b\u3057, HTML\u306b\u76f4\u63a5\u8a18\u8f09\u3057\u3066\u3044\u304f.\n+ D3\u306e\u5229\u7528\u306f, Layout\u69cb\u7bc9\u3084SVG\u4fbf\u5229\u6a5f\u80fd(d3.svg.line())\u306b\u7559\u3081\u308b.\n\n\u30e1\u30ea\u30c3\u30c8\u306f\u4ee5\u4e0b\u3042\u305f\u308a\u304b:\n\n+ \u53ef\u8996\u5316\u9818\u57df\u542b\u3081, HTML\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067View\u304c\u69cb\u6210\u3055\u308c\u308b\u305f\u3081, \u5909\u66f4\u304c\u5bb9\u6613.\n+ D3.js\u306e\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u3067\u983b\u767a\u3057\u3066\u3044\u305f\u30af\u30ed\u30fc\u30b8\u30e3\u304c\u6e1b\u308b\u5206, \u30b3\u30fc\u30c9\u306f\u3059\u3063\u304d\u308a\u3059\u308b.\n\nAngular\u4e3b\u4f53\u306e\u65b9\u6cd5\u3067\u5b9f\u88c5\u3057\u305f\u5834\u5408\u306e\u30c7\u30e1\u30ea\u30c3\u30c8\u306f\u4e0b\u8a18\u304b.\n\n+ \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3(`ngAnimate`)\u3068\u306e\u76f8\u6027\u304c\u5fae\u5999.  \nD3\u4e3b\u4f53\u306e\u65b9\u6cd5\u3067\u3042\u308c\u3070, `.attr('width', functoin(){...})` \u306b `transition()`\u3092\u565b\u307e\u3059\u3060\u3051\u3067, \u30cb\u30e5\u30eb\u30cb\u30e5\u30eb\u5e45\u3092\u5897\u3084\u3057\u305f\u308a\u304c\u7c21\u5358\u3067\u3042\u3063\u305f. Angular\u4e3b\u4f53\u306e\u5834\u5408, `ngAnimate`\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3046\u3053\u3068\u306b\u306a\u308b\u306e\u3060\u304c, CSS\u5c5e\u6027\u30d9\u30fc\u30b9\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u304c\u57fa\u672c\u306e\u305f\u3081, SVG\u8981\u7d20\u306e\u5c5e\u6027\u3092tween\u3055\u305b\u308b\u3088\u3046\u306a\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u306b\u306f\u4e0d\u5411\u304d\u306a\u5370\u8c61\u304c\u3042\u308b.\n\n## \u5b9f\u88c5\u30b5\u30f3\u30d7\u30eb\n[\u4ee5\u524d\u306e\u30a8\u30f3\u30c8\u30ea](http://qiita.com/Quramy/items/b701b824c2f42c683aa7)\u3067\u3082\u53d6\u308a\u4e0a\u3052\u305f\u304c, \u4e0b\u56f3\u306e\u3088\u3046\u306a\u30b5\u30f3\u30d7\u30eb\u306b\u5bfe\u3057\u3066, D3\u4e3b\u4f53\u306e\u5b9f\u88c5\u4f8b, Angular\u4e3b\u4f53\u306e\u5b9f\u88c5\u4f8b\u3092\u898b\u3066\u3044\u3053\u3046\u3068\u601d\u3046.\n\n![cap01.png](https://qiita-image-store.s3.amazonaws.com/0/8808/8c69e1ce-ed98-971f-9dcf-291252bfc9d8.png)\n\n### \u6e96\u5099\uff1a\u53ef\u8996\u5316\u3068\u95a2\u4fc2\u306e\u7121\u3044\u5171\u901a\u90e8\u5206\u5b9f\u88c5\n\u30c7\u30fc\u30bf\u3092\u3044\u3058\u308b\u30a2\u30d7\u30ea\u90e8\u5206.\n\n```js:app/main/main.controller.js\n'use strict';\n\nangular.module('angularD3SampleApp').controller('MainCtrl', function () {\n\n  var main = this;\n\n  main.sampleData= [\n    {name:'Chrome', users: 500},\n    {name:'Internet Explorer', users: 200},\n    {name:'Safari', users: 300}\n  ];\n\n  main.newData = {name: '', users: 0};\n\n  main.add = function(){\n    main.sampleData.push(main.newData);\n    main.newData = {name: '', users: 0};\n  };\n\n  main.remove = function($index){\n    main.sampleData.splice($index, 1);\n  };\n\n});\n```\n\n```html:app/main/main.html\n<div class=\"header\">\n  <h3>D3 Sample</h3>\n</div>\n<div class=\"row marketing\" ng-controller=\"MainCtrl as main\">\n  <div class=\"col-md-12\">\n    <table class=\"table\">\n      <thead>\n        <tr><th>#</th><th>name</th><th>users</th><th>action</th></tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat=\"data in main.sampleData\"><!-- data iteration {{{ -->\n          <td>{{$index + 1}}</td>\n          <td>{{data.name}}</td>\n          <td> <input type=\"number\" size=\"5\" class=\"form-control input-sm\" ng-model=\"data.users\"> </td>\n          <td>\n            <button class=\"btn btn-sm btn-danger\" ng-click=\"main.remove($index);\">\n              <span class=\"glyphicon glyphicon-minus-sign\"></span>\n              remove\n            </button>\n          </td>\n        </tr><!-- }}} end iteration -->\n        <tr><!-- new data {{{ -->\n          <td>new</td>\n          <td> <input type=\"text\" size=\"10\" placeholder=\"input name\" class=\"form-control input-sm\" ng-model=\"main.newData.name\"> </td>\n          <td> <input type=\"number\" size=\"5\" class=\"form-control input-sm\" ng-model=\"main.newData.users\"> </td>\n          <td>\n            <button class=\"btn btn-success btn-sm\" ng-click=\"main.add()\">\n              <span class=\"glyphicon glyphicon-plus-sign\"></span>\n              add\n            </button>\n          </td>\n        </tr><!--}}} new data -->\n      </tbody>\n    </table>\n  </div>\n  <div class=\"col-md-12\">\n    <div>\n      <!-- \u2605\u2605 D3\u4e3b\u4f53\u306e\u5834\u5408 \u2605\u2605-->\n      <d3-bar data=\"main.sampleData\" key=\"name\" value-prop=\"users\" label=\"name\"></d3-bar>\n\n      <!-- \u2605\u2605 Angular\u4e3b\u4f53\u306e\u5834\u5408 \u2605\u2605-->\n      <div ng-include=\"'app/viz/barLayout.html'\"></div>\n    </div>\n  </div>\n</div>\n```\n\n\u4e0a\u8a18\u306e`<!-- \u2605\u2605 \u2605\u2605 -->`\u90e8\u5206\u306f, D3\u4e3b\u4f53 or Angular\u4e3b\u4f53\u306e\u3069\u3061\u3089\u304b\u4e00\u65b9\u3092\u6b8b\u3059\u3079\u3057.\n\n### D3\u4e3b\u4f53\u3068\u3057\u305f\u5834\u5408\u306e\u53ef\u8996\u5316\u9818\u57df\u5b9f\u88c5\n\n[jsfiddle\u306b\u52d5\u4f5c\u30b3\u30fc\u30c9\u3042\u308a](http://jsfiddle.net/Quramy/cudnzkms/)\n\n`<svg>` \u8981\u7d20\u914d\u4e0b\u306eDOM(SVG)\u306e\u69cb\u7bc9, Collection\u3068\u306e\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0, \u8981\u7d20\u306e\u5897\u6e1b\u8ffd\u8de1\u3059\u3079\u3066\u3092D3\u306e\u30e1\u30bd\u30c3\u30c9\u3067\u5b9f\u73fe\u3059\u308b.\n\nDOM\u306b\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081, Angular\u3068\u306e\u7cca\u4ed8\u3051\u90e8\u5206\u306fDirective\u3067\u5b9f\u73fe\u3059\u308b\u5f62\u3068\u306a\u308b.\n\n```js:components/d3/d3Bar.directive.js\n'use strict';\n\nangular.module('angularD3SampleApp').directive('d3Bar', function (d3, $parse) {\n  return{\n    restrict: 'EAC',\n    scope: {data: '=', key: '@', valueProp: '@', label: '@'},\n    link: function (scope, element) {\n      var svg = d3.select(element[0]).append('svg').style('width', '100%');\n      var colorScale = d3.scale.category20();\n\n      var watched = {};\n\n      var getId = $parse(scope.key || 'id');\n      var getValue = $parse(scope.valueProp || 'value');\n      var getLabel = $parse(scope.label || 'name');\n\n      scope.$watchCollection('data', function () {\n        if(!scope.data){\n          return;\n        }\n\n        var dataSet = svg.selectAll('g.data-group').data(scope.data, getId);\n\n        var createdGroup = dataSet.enter()\n        .append('g').classed('data-group', true)\n        .each(function(d){\n          var self = d3.select(this);\n          watched[getId(d)] = scope.$watch(function () {\n            return getValue(d);\n          }, function(v){\n            self.select('rect').attr('width', v);\n          });\n        });\n        createdGroup.append('rect')\n        .attr('x', 130)\n        .attr('height', 18)\n        .attr('fill', function (d) {\n          return colorScale(d.name);\n        });\n        createdGroup.append('text').text(getLabel).attr('height', 15);\n\n        dataSet.exit().each(function(d){\n          var id = getId(d);\n          watched[id]();\n          delete watched[id];\n        }).remove();\n\n        dataSet.each(function (d, i) {\n          var self = d3.select(this);\n          self.select('rect').attr('y', i * 25);\n          self.select('text').attr('y', i * 25 + 15);\n        });\n      });\n    }\n  };\n});\n```\n\n\u4e0a\u8a18\u306e`d3Bar` Directive\u306b\u3064\u3044\u3066\u306f, \u4ee5\u524d\u306e\u30a8\u30f3\u30c8\u30ea\u3067\u3082\u8aac\u660e\u3057\u305f\u901a\u308a\u306e\u305f\u3081, \u89e3\u8aac\u306b\u3064\u3044\u3066\u306f, [\u3053\u3061\u3089](http://qiita.com/Quramy/items/b701b824c2f42c683aa7#3-5)\u3092\u53c2\u7167\u3055\u308c\u305f\u3057.\n\n### Angular\u4e3b\u4f53\u3068\u3057\u305f\u5834\u5408\u306e\u53ef\u8996\u5316\u9818\u57df\u5b9f\u88c5\n\n[jsfiddle\u306b\u52d5\u4f5c\u30b3\u30fc\u30c9\u3042\u308a](http://jsfiddle.net/Quramy/tw6gvn5k/)\n\n\u4e0a\u8ff0\u306e\u901a\u308a, Angular\u4e3b\u4f53\u306e\u65b9\u6cd5\u3067\u306f, \u53ef\u8996\u5316\u90e8\u5206\u3082D3\u306f\u4f7f\u308f\u305a\u306b, `ngRepeat`\u3084AngularJS\u306e\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0(`{{...}}`)\u3092\u7528\u3044\u3066View\u3092\u69cb\u7bc9\u3057\u3066\u3044\u304f:\n\n```html:app/viz/barLayout.html\n<svg ng-controller=\"BarLayoutCtrl as barLayout\" style=\"width:100%;\">\n  <g ng-repeat=\"data in main.sampleData track by data.name\">\n    <text ng-attr-y=\"{{$index*25+15}}\" height=\"15\">\n      {{::data.name}}\n    </text>\n    <rect\n      x=\"130\"\n      ng-attr-y=\"{{$index*25}}\"\n      ng-attr-width=\"{{data.users}}\"\n      height=\"18\"\n      fill=\"{{::barLayout.fill(data.name)}}\"\n    >\n    </rect>\n  </g>\n</svg>\n```\n\n\u3053\u306e\u4f8b\u306e\u3088\u3046\u306a, \u5358\u7d14\u306a\u68d2\u30b0\u30e9\u30d5\u3067\u3042\u308c\u3070, D3\u306e\u6d3b\u8e8d\u3059\u308b\u4f59\u5730\u306f\u6b86\u3069\u306a\u304f, \u8f9b\u3046\u3058\u3066\u68d2\u306e\u5857\u308a\u3064\u3076\u3057\u8272(`fill`\u5c5e\u6027)\u3092\u6c7a\u5b9a\u3059\u308b\u90e8\u5206\u3067, `d3.scale.category20`\u3092\u4f7f\u3063\u3066\u3044\u308b\u7a0b\u5ea6.\n\n```js:app/viz/barLayout.controller.js\n'use strict';\n\nangular.module('angularD3SampleApp').controller('BarLayoutCtrl', function (d3) {\n  var barLayout = this;\n  var colorScale = d3.scale.category20();\n\n  barLayout.fill = function (id) {\n    return colorScale(id);\n  };\n\n});\n```\n\n### Layout\u306e\u5229\u7528\u4f8b(\u30c9\u30fc\u30ca\u30c4\u30c1\u30e3\u30fc\u30c8)\n[\u524d\u56de](http://qiita.com/Quramy/items/b701b824c2f42c683aa7#2-3)\u3082, Layout\u3092\u5229\u7528\u3059\u308b\u4f8b\u3068\u3057\u3066, \u30c9\u30fc\u30ca\u30c4\u30c1\u30e3\u30fc\u30c8(`d3.layout.pie`)\u3092\u5185\u90e8\u7684\u306b\u5229\u7528\u3057\u305fDirective\u3092\u793a\u3057\u305f.\n\u4eca\u56de\u3082\u540c\u3058\u304f, Angular\u4e3b\u4f53\u306e\u65b9\u6cd5\u3067\u30c9\u30fc\u30ca\u30c4\u30c1\u30e3\u30fc\u30c8\u306b\u7f6e\u304d\u63db\u3048\u305f\u3089, \u3069\u306e\u3088\u3046\u306b\u306a\u308b\u304b\u3092\u793a\u3057\u3066\u307f\u308b.\n\n...\u3068\u3044\u3046\u3088\u308a, \u68d2\u30b0\u30e9\u30d5\u306e\u4f8b\u3060\u3068, \u300cD3.js\u7121\u304f\u3066\u3082\u3088\u304f\u306d\uff1f\u300d\u3068\u3044\u3046\u7d50\u8ad6\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u305d\u3046\u306a\u306e\u3067, D3\u306b\u5b58\u5728\u3059\u308b\u304cAngular\u306b\u306f\u5b58\u5728\u3057\u306a\u3044\u300cLayout, SVG utility\u300d\u3092\u5229\u7528\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3082\u4f8b\u793a\u3059\u308b\u3053\u3068\u3068\u3059\u308b.\n\n\u4e0a\u8a18\u306e`app/biz/barLayout.html`, `app/biz/barLayout.controller.js`\u3092\u4e0b\u8a18\u3067\u7f6e\u304d\u63db\u3048\u308b\uff1a\n([jsfiddle\u306b\u52d5\u4f5c\u30b3\u30fc\u30c9\u6709\u308a](http://jsfiddle.net/Quramy/q5m6sa8p/))\n\n```html:app/biz/pieLayout.html\n<svg ng-controller=\"PieLayoutCtrl as pieLayout\" style=\"width:100%; height:420px\">\n  <g transform=\"translate(200,200)\">\n    <path\n      ng-repeat=\"part in pieLayout.parts track by part.data.name\"\n      ng-attr-d=\"{{pieLayout.arc(part)}}\"\n      fill=\"{{::pieLayout.fill(part.data.name)}}\"\n    >\n    </path>\n  </g>\n</svg>\n```\n\n```js:app/biz/pieLaytou.controller.js\n'use strict';\n\nangular.module('angularD3SampleApp').controller('PieLayoutCtrl', function (d3, $scope) {\n  var pieLayout = this;\n  var colorScale = d3.scale.category20();\n  var arc = d3.svg.arc().outerRadius(200).innerRadius(100);\n\n  pieLayout.fill = function (id) {\n    return colorScale(id);\n  };\n\n  pieLayout.arc = function (part) {\n    return arc(part);\n  };\n\n  $scope.$watch('main.sampleData', function (datum) {\n    pieLayout.parts = d3.layout.pie().value(function (data) {\n      return data.users;\n    }).sort(null)(datum);\n  }, true);\n\n});\n```\n\n\u30c9\u30fc\u30ca\u30c4\u30c1\u30e3\u30fc\u30c8\u306e\u6247\u578b\u90e8\u5206\u306eSVG\u306f, `<path d=\"...\">`\u3067\u8868\u3055\u308c\u308b\u304c, \u3053\u306ed\u5c5e\u6027\u3092D3\u7121\u3057\u306bAngular\u3060\u3051\u3067\u8a08\u7b97\u3059\u308b\u306e\u306f\u76f8\u5f53\u9762\u5012\u304f\u3055\u3044\u304c,  `d3.svg.arc()`\u3068`d3.layout.pie`\u3092\u3046\u307e\u304f\u4f7f\u3048\u3070\u77ac\u6bba\u3067\u3042\u308b.\n\n### Controller\u5206\u5272\n\u5148\u306e\u68d2\u30b0\u30e9\u30d5\u306e\u4f8b\u3067\u3082\u610f\u56f3\u7684\u306b\u5206\u5272\u3057\u3066\u3044\u305f\u306e\u3060\u3051\u308c\u3069, Angular\u4e3b\u4f53\u306e\u65b9\u6cd5\u3067\u306f, \u53ef\u8996\u5316\u90e8\u5206\u304cScope\u3068\u306a\u308b\u3088\u3046\u306b\u5b50Controller\u3092\u7528\u610f\u3057\u3066\u3044\u305f.\n\u3053\u308c\u306f\u3001\u300cScope\u306e\u30c7\u30fc\u30bf\u306b\u5f93\u5c5e\u3059\u308b\u53ef\u8996\u5316\u8981\u7d20(=\u5ea7\u6a19\u60c5\u5831, \u8272, etc...)\u3092\u53d6\u308a\u4ed5\u5207\u308bViewModel\u300d\u3092\u5225\u9014, \u30e1\u30a4\u30f3\u306eScope\u306e\u4e0b\u4f4d\u306b\u7528\u610f\u3057\u3066\u304a\u304d\u305f\u304b\u3063\u305f\u3089\u3060.\n\u4eca\u56de\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u8a00\u3046\u306a\u3089,  `MainCtrl`\u306f\u300c\u68d2\u30b0\u30e9\u30d5\u306e\u500b\u5225\u306e\u8272\u300d\u306b\u95a2\u5fc3\u3092\u62b1\u304f\u3079\u304d\u3067\u306f\u306a\u3044\u304c, \u8272\u306f\u68d2\u30b0\u30e9\u30d5\u306e\u30c7\u30fc\u30bf\u540d\u79f0\u304b\u3089\u6c7a\u5b9a\u3057\u3066\u3044\u308b. \n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u81ea\u4f53\u304c\u5fc5\u305a\u3057\u3082, \u300c\u30c7\u30fc\u30bf\u306e\u7de8\u96c6\u90e8\u5206\u300d + \u300c\u30c7\u30fc\u30bf\u306e\u53ef\u8996\u5316\u90e8\u5206\u300d\u3067\u69cb\u6210\u3055\u308c\u308b\u3068\u306f\u9650\u3089\u306a\u3044\u306e\u3067, \u5e38\u306b\u7de8\u96c6\u90e8\u5206\u3092\u89aa, \u53ef\u8996\u5316\u90e8\u5206\u3092\u5b50\u3068\u3057\u305fController\u5206\u5272\u304c\u6210\u308a\u7acb\u3064\u3068\u306f\u8a00\u3048\u306a\u3044\u304c, AngularJS\u4e3b\u4f53\u306e\u65b9\u6cd5\u3067\u5b9f\u88c5\u3057\u305f\u5834\u5408\u306b, Fat Controller\u3068\u306a\u3089\u306a\u3044\u305f\u3081\u306b\u3082\u3001\u5fc3\u304c\u3051\u3066\u304a\u304d\u305f\u3044\u30dd\u30a4\u30f3\u30c8\u3067\u306f\u306a\u3044\u3060\u308d\u3046\u304b.\n\n## \u307e\u3068\u3081\n\n+ AngularJS\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067D3.js\u3092\u7528\u3044\u305f\u53ef\u8996\u5316\u3092\u884c\u3046\u5834\u5408, \u4ee5\u4e0b\u306e2\u901a\u308a\u304c\u3042\u308b\n 1. \u53ef\u8996\u5316\u9818\u57df\u3092Directive\u3068\u3057, Directive\u5185\u90e8\u3067\u306fD3.js\u30e1\u30a4\u30f3\u3067\u5b9f\u88c5\u3059\u308b\n 2. Collection\u3068\u306e\u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u306fAngular\u306b\u4e00\u672c\u5316\u3057, D3.js\u306fSVG\u306e\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\u3068\u3057\u3066\u306e\u307f\u7528\u3044\u308b\n\n\u7d50\u5c40, 1. \u3068 2., \u3069\u3061\u3089\u304c\u3044\u3044\u306e\u304b\uff1f \u3068\u3044\u3046\u7591\u554f\u306b\u5bfe\u3057\u3066\u3067\u3042\u308b\u304c, \u50d5\u306f\u500b\u4eba\u7684\u306b\u306f 2.\u306e Angular\u4e3b\u4f53\u3068\u3059\u308b\u65b9\u6cd5\u304c\u826f\u3044\u3068\u601d\u3063\u3066\u3044\u308b.\n\n\u300cView\u3092HTML + \u03b1 \u3067\u5ba3\u8a00\u7684\u306b\u69cb\u7bc9\u3067\u304d\u308b\u300d\u306fAngularJS\u3067\u306e\u6c17\u306b\u5165\u3063\u3066\u3044\u308b\u70b9\u306e\u4e00\u3064\u3060\u3057, View\u69cb\u7bc9\u65b9\u6cd5\u304c2\u901a\u308a\u3067\u6df7\u5728\u3057\u3066\u3044\u308b\u3068, \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5168\u4f53\u306e\u7d71\u4e00\u611f\u3068\u3044\u3046\u304b, \u898b\u901a\u3057\u304c\u60aa\u304f\u306a\u308b\u306e\u306f\u907f\u3051\u305f\u3044\u3068\u8003\u3048\u3066\u3044\u308b\u304b\u3089\u3060.\n\n## \u53c2\u8003\n\n+ http://alexandros.resin.io/angular-d3-svg/ 1\u5e74\u8fd1\u304f\u524d & \u82f1\u8a9e \u3067\u3059\u304c, \u5c0e\u5165\u90e8\u306e\u8aac\u660e\u306f\u8aad\u307f\u7269\u3068\u3057\u3066\u3082\u304a\u3082\u3057\u308d\u3044\u306e\u3067\u662f\u975e\n", "tags": ["AngularJS", "d3.js", "JavaScript"]}