{"context": "\uff08\u6ce8\uff092015\u5e74\u306b\u66f8\u3044\u305f\u8a18\u4e8b\u3092\u8a66\u9a13\u7684\u306b Qiita \u306b\u3042\u3052\u3066\u307f\u305f\u3082\u306e\u3067\u3059\u306e\u3067\u3001\u5185\u5bb9\u304c\u53e4\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002\n\n\u57fa\u672c\nMiddleman::Extension\u3000\u304b\u3089\u6d3e\u751f\u3055\u305b\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u308a\uff08Middleman::Hello::Extension\uff09\u3001\n\u305d\u3053\u306b helper \u95a2\u6570\u306e\u8ffd\u52a0\u3001 resource \u306e manipulate\u3001hook \u306e\u8ffd\u52a0\u306a\u3069\u3059\u308b\u3002\n\u305d\u3057\u3066Middleman::Extension.register(:hello, Middleman::Hello::Extension) \u3057\u305f\u4e0a\u3067\u3001\nconfig.rb \u3067 activate :hello \u3055\u305b\u308c\u3070\u6709\u52b9\u306b\u306a\u308b\u3002\n\n\u53c2\u8003\n\nMiddleman \u30ab\u30b9\u30bf\u30e0\u62e1\u5f35\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb - Qiita\nBuilding Middleman Extensions | Blank Page Tech\n\n\ngem\n% bundle gem middleman-hello \u3068\u3057 gem \u306e\u3072\u306a\u5f62\u3092\u4f5c\u308b\u3002\n\u30d5\u30a1\u30a4\u30eb\u69cb\u6210\u306f\u3044\u3058\u308b\u3002\n\u251c\u2500\u2500 Gemfile\n\u251c\u2500\u2500 lib\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 middleman-hello\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 extension.rb\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 version.rb\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 middleman-hello.rb\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 middleman_extension.rb\n\u251c\u2500\u2500 LICENSE.txt\n\u251c\u2500\u2500 middleman-hello.gemspec\n\u251c\u2500\u2500 README.md\n\n\nlib/middleman-hello.rb\nversion\u60c5\u5831\u3068 extension \u672c\u4f53\u3092\u8aad\u307f\u8fbc\u307f\u3001register \u3059\u308b\u3002\nrequire \"middleman-hello/version\"\n\n\n::Middleman::Extensions.register(:hello) do\n  require 'middleman-hello/extension'\n  ::Middleman::Hello::Extension\nend\n\n\nlib/middleman_extension.rb\nmiddleman \u672c\u4f53\u306b\u81ea\u62e1\u5f35\u3092\u8aad\u307f\u8fbc\u307e\u305b\u308b\u305f\u3081\u306b\u5fc5\u8981\u3002\nMiddleman::Extensions.load_extensions_in_path() \u3067\u8aad\u307e\u308c\u308b\u3002\n\u3053\u308c\u5fd8\u308c\u308b\u3068 template \u304c\u52d5\u304b\u306a\u3044\u306e\u3067\u6ce8\u610f\u3002\n\u306a\u304a '-' \u3067\u306f\u306a\u304f '_' \u306a\u306e\u3067\u3088\u308a\u6ce8\u610f\u3002\nrequire \"middleman-hello\"\n\n\nlib/middleman-hello/version.rb\nversion \u60c5\u5831\u66f8\u304f\u3060\u3051\u3002\nmodule Middleman\n  module Hello\n    VERSION = \"0.0.1\"\n  end\nend\n\n\nlib/middleman-hello/extension.rb\nextension \u672c\u4f53\u3002\u30d8\u30eb\u30d1\u30fc\u95a2\u6570\u66f8\u304f\u306a\u308a resource \u306b module \u8ffd\u52a0\u3059\u308b\u306a\u308a\nproxy\u8ffd\u52a0\u3059\u308b\u306a\u308a\u3002\nmodule Middleman\n  module Hello\n    class Extension < Middleman::Extension\n      ...\n    end\n  end\nend\n\n\n\nconfig.rb\n\u3053\u3053\u307e\u3067\u6e96\u5099\u3057\u305f\u3089 activate :hello \u3068\u3059\u308b\u3068\u3001\n\u62e1\u5f35\u6a5f\u80fd\u304c\u6709\u52b9\u306b\u306a\u308b\u3002\n\nhelper\u95a2\u6570\n\u7c21\u5358\u306a\u3082\u306e\u304b\u3089\n\nconfig.rb:helpers do\nconfig.rb \u306b\u66f8\u304d\u4e0b\u3059\uff1a\n% vi config.rb\nhelpers do\n  def hello\n    \"Hello, World\"\n  end\nend\n\n\nextension.defined_helpers=[]\nMiddleman::Extension.defined_helpers \u3092\u4f7f\u3046\uff1a\nmodule Middleman\n  module Hello\n    module Helpers\n      def hello\n        \"Hello, World\"\n      end\n    end\n    class Extension < Middleman::Extension\n      self.defined_helpers = [Helpers]\n    end\n  end\nend\n\n\noption\nclass Extension\noption\n\ndef init\n  app.set :hello_settings, options\n  ..\n\n\n\u72ec\u81ea\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\nmiddleman init PROJ --tempate hello \u3067 source/ \u306a\u3069\u3092\u542b\u3081\u3066\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308c\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u308b\u3002\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u7fa4\nlib/middleman-hello/template/ \u4ee5\u4e0b\u306b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u4f7f\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u304f\u3002\nMiddleman::Template::Base \u304b\u3089\u6d3e\u751f\u3055\u305b\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4f5c\u6210\u3092\u884c\u3046\u3002\n\u4e3b\u306b build_scaffold()\u3002\nlib/middleman-hello/template/\n\u251c\u2500\u2500 config.tt\n\u251c\u2500\u2500 shared\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 Gemfile\n\u2514\u2500\u2500 source\n    \u2514\u2500\u2500 index.html.md\n\nThor, invoke \u306a\u3069\u3092\u4f7f\u3063\u3066\u308b\u3082\u3088\u3046\u3002\n\n\u4f5c\u6210\u8a2d\u5b9a\nMiddleman::Templates::Base \u304b\u3089\u6d3e\u751f\u3055\u305b\u3066 build_scaffold() \u3067\u5b9f\u4f53\u3092\u30b3\u30d4\u30fc\u306a\u3069\u3059\u308b\u3002\nMiddleman::Templates.register() \u3067\u767b\u9332\u3059\u308b\u3002\n% vi lib/middleman-aks/template.rb\nrequire 'middleman-core/templates'\n\nmodule Middleman\n  module Hello\n    class Template < Middleman::Templates::Base\n     class_option \"css_dir\",\n        default: \"stylesheets\",\n        desc: 'The path to the css files'\n      class_option \"js_dir\",\n        default: \"javascripts\",\n        desc: 'The path to the javascript files'\n      class_option \"images_dir\",\n        default: \"images\",\n        desc: 'The path to the image files'\n\n      def self.source_root\n        File.join(File.dirname(__FILE__), 'template')\n      end\n\n      def build_scaffold\n        template \"config.tt\", File.join(location, \"config.rb\")\n\n        source = File.join(location, \"source\")\n        directory \"source\", source\n\n        [:css_dir, :js_dir, :images_dir].each do |dir|\n          empty_directory File.join(source, options[dir])\n        end\n      end\n    end\n  end\nend\n\n\nMiddleman::Templates.register(:aks, Middleman::Aks::Template)\n\n\n\u30c7\u30d0\u30c3\u30b0\u6642\n~/.middleman/hello \u306b template.rb \u3092\u7f6e\u304f\u3068 Middleman::Templates::Local \u304c\u305d\u308c\u3092\u898b\u308b\u3002\n% mkdir -p  ~/.middleman/hello && cd ~/.middleman/hello\n% ln -s <extdevdir>/lib/middleman-hello/template.rb .\n% ln -s <extdevdir>/lib/middleman-hello/template .\n\n\uff08\u6ce8\uff092015\u5e74\u306b\u66f8\u3044\u305f\u8a18\u4e8b\u3092\u8a66\u9a13\u7684\u306b Qiita \u306b\u3042\u3052\u3066\u307f\u305f\u3082\u306e\u3067\u3059\u306e\u3067\u3001\u5185\u5bb9\u304c\u53e4\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002\n\n## \u57fa\u672c\nMiddleman::Extension\u3000\u304b\u3089\u6d3e\u751f\u3055\u305b\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u308a\uff08Middleman::Hello::Extension\uff09\u3001\n\u305d\u3053\u306b helper \u95a2\u6570\u306e\u8ffd\u52a0\u3001 resource \u306e manipulate\u3001hook \u306e\u8ffd\u52a0\u306a\u3069\u3059\u308b\u3002\n\u305d\u3057\u3066Middleman::Extension.register(:hello, Middleman::Hello::Extension) \u3057\u305f\u4e0a\u3067\u3001\nconfig.rb \u3067 activate :hello \u3055\u305b\u308c\u3070\u6709\u52b9\u306b\u306a\u308b\u3002\n\n### \u53c2\u8003\n\n- [Middleman \u30ab\u30b9\u30bf\u30e0\u62e1\u5f35\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb - Qiita](http://qiita.com/yterajima/items/42ea2529795823832d5c)\n- [Building Middleman Extensions | Blank Page Tech](http://willschenk.com/building-middleman-extensions/)\n\n## gem\n% bundle gem middleman-hello \u3068\u3057 gem \u306e\u3072\u306a\u5f62\u3092\u4f5c\u308b\u3002\n\u30d5\u30a1\u30a4\u30eb\u69cb\u6210\u306f\u3044\u3058\u308b\u3002\n\n```\n\u251c\u2500\u2500 Gemfile\n\u251c\u2500\u2500 lib\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 middleman-hello\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 extension.rb\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 version.rb\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 middleman-hello.rb\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 middleman_extension.rb\n\u251c\u2500\u2500 LICENSE.txt\n\u251c\u2500\u2500 middleman-hello.gemspec\n\u251c\u2500\u2500 README.md\n```\n\n### lib/middleman-hello.rb\n\nversion\u60c5\u5831\u3068 extension \u672c\u4f53\u3092\u8aad\u307f\u8fbc\u307f\u3001register \u3059\u308b\u3002\n\n```ruby\nrequire \"middleman-hello/version\"\n\n\n::Middleman::Extensions.register(:hello) do\n  require 'middleman-hello/extension'\n  ::Middleman::Hello::Extension\nend\n```\n\n### lib/middleman_extension.rb\n\nmiddleman \u672c\u4f53\u306b\u81ea\u62e1\u5f35\u3092\u8aad\u307f\u8fbc\u307e\u305b\u308b\u305f\u3081\u306b\u5fc5\u8981\u3002\nMiddleman::Extensions.load_extensions_in_path() \u3067\u8aad\u307e\u308c\u308b\u3002\n\u3053\u308c\u5fd8\u308c\u308b\u3068 template \u304c\u52d5\u304b\u306a\u3044\u306e\u3067\u6ce8\u610f\u3002\n\u306a\u304a '-' \u3067\u306f\u306a\u304f '_' \u306a\u306e\u3067\u3088\u308a\u6ce8\u610f\u3002\n\n```ruby\nrequire \"middleman-hello\"\n```\n\n\n### lib/middleman-hello/version.rb\n\nversion \u60c5\u5831\u66f8\u304f\u3060\u3051\u3002\n\n```ruby\nmodule Middleman\n  module Hello\n    VERSION = \"0.0.1\"\n  end\nend\n```\n### lib/middleman-hello/extension.rb\n\nextension \u672c\u4f53\u3002\u30d8\u30eb\u30d1\u30fc\u95a2\u6570\u66f8\u304f\u306a\u308a resource \u306b module \u8ffd\u52a0\u3059\u308b\u306a\u308a\nproxy\u8ffd\u52a0\u3059\u308b\u306a\u308a\u3002\n\n\n```ruby\nmodule Middleman\n  module Hello\n    class Extension < Middleman::Extension\n\t  ...\n\tend\n  end\nend\n  \n```\n### config.rb\n\u3053\u3053\u307e\u3067\u6e96\u5099\u3057\u305f\u3089 activate :hello \u3068\u3059\u308b\u3068\u3001\n\u62e1\u5f35\u6a5f\u80fd\u304c\u6709\u52b9\u306b\u306a\u308b\u3002\n\n\n## helper\u95a2\u6570\n\u7c21\u5358\u306a\u3082\u306e\u304b\u3089\n\n### config.rb:helpers do\n\nconfig.rb \u306b\u66f8\u304d\u4e0b\u3059\uff1a\n\n```ruby\n% vi config.rb\nhelpers do\n  def hello\n    \"Hello, World\"\n  end\nend\n```\n\n### extension.defined_helpers=[]\nMiddleman::Extension.defined_helpers \u3092\u4f7f\u3046\uff1a\n\n```ruby\nmodule Middleman\n  module Hello\n    module Helpers\n\t  def hello\n\t\t\"Hello, World\"\n\t  end\n    end\n\tclass Extension < Middleman::Extension\n  \t  self.defined_helpers = [Helpers]\n\tend\n  end\nend\n```\n\n\n## option\n\n```\nclass Extension\noption\n\ndef init\n  app.set :hello_settings, options\n  ..\n```\n\n\n## \u72ec\u81ea\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\n\nmiddleman init PROJ --tempate hello \u3067 source/ \u306a\u3069\u3092\u542b\u3081\u3066\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308c\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u308b\u3002\n\n### \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u7fa4 \n\nlib/middleman-hello/template/ \u4ee5\u4e0b\u306b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u4f7f\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u304f\u3002\nMiddleman::Template::Base \u304b\u3089\u6d3e\u751f\u3055\u305b\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4f5c\u6210\u3092\u884c\u3046\u3002\n\u4e3b\u306b build_scaffold()\u3002\n\n\n```\nlib/middleman-hello/template/\n\u251c\u2500\u2500 config.tt\n\u251c\u2500\u2500 shared\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 Gemfile\n\u2514\u2500\u2500 source\n    \u2514\u2500\u2500 index.html.md\n```\n\n\nThor, invoke \u306a\u3069\u3092\u4f7f\u3063\u3066\u308b\u3082\u3088\u3046\u3002\n\n### \u4f5c\u6210\u8a2d\u5b9a\n\nMiddleman::Templates::Base \u304b\u3089\u6d3e\u751f\u3055\u305b\u3066 build_scaffold() \u3067\u5b9f\u4f53\u3092\u30b3\u30d4\u30fc\u306a\u3069\u3059\u308b\u3002\nMiddleman::Templates.register() \u3067\u767b\u9332\u3059\u308b\u3002\n\n```ruby \n% vi lib/middleman-aks/template.rb\nrequire 'middleman-core/templates'\n\nmodule Middleman\n  module Hello\n    class Template < Middleman::Templates::Base\n     class_option \"css_dir\",\n        default: \"stylesheets\",\n        desc: 'The path to the css files'\n      class_option \"js_dir\",\n        default: \"javascripts\",\n        desc: 'The path to the javascript files'\n      class_option \"images_dir\",\n        default: \"images\",\n        desc: 'The path to the image files'\n\n      def self.source_root\n        File.join(File.dirname(__FILE__), 'template')\n      end\n\n      def build_scaffold\n        template \"config.tt\", File.join(location, \"config.rb\")\n\n        source = File.join(location, \"source\")\n        directory \"source\", source\n\n        [:css_dir, :js_dir, :images_dir].each do |dir|\n          empty_directory File.join(source, options[dir])\n        end\n      end\n    end\n  end\nend\n\n\nMiddleman::Templates.register(:aks, Middleman::Aks::Template)\n```\n### \u30c7\u30d0\u30c3\u30b0\u6642\n\n~/.middleman/hello \u306b template.rb \u3092\u7f6e\u304f\u3068 Middleman::Templates::Local \u304c\u305d\u308c\u3092\u898b\u308b\u3002\n\n```sh\n% mkdir -p  ~/.middleman/hello && cd ~/.middleman/hello\n% ln -s <extdevdir>/lib/middleman-hello/template.rb .\n% ln -s <extdevdir>/lib/middleman-hello/template .\n```\n", "tags": ["Ruby", "middleman"]}