{"tags": ["\u81ea\u52d5\u5316"], "context": " More than 1 year has passed since last update.google\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3067\u6b66\u5668\u306e\u6027\u80fd\u3068\u304b\u3001\u30e2\u30f3\u30b9\u30bf\u30fc\u306e\u51fa\u73fe\u4f4d\u7f6e\u3068\u304b\u3001\u3044\u308d\u3044\u308d\u3068\u30d0\u30e9\u30f3\u30b9\u8abf\u6574\u3057\u305f\u3044\u3002\u305d\u308c\u3089\u3092\u6700\u7d42\u7684\u306b\u306fjson\u306b\u3057\u3066\u30b3\u30fc\u30c9\u3067\u8aad\u307f\u51fa\u3057\u3059\u308b\u3002\n\u3053\u308c\u306f\u4f55\u767e\u4e07\u56de\u3068\u3084\u3063\u3066\u3044\u304f\u4e00\u9023\u306e\u4f5c\u696d\u306a\u306e\u3067\u3001\u3053\u308c\u3092\u81ea\u52d5\u5316\u3059\u308b\u3002\ngoogle\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8->csv->json\n\u307e\u305a\u3001\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3067csv\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\nchrome\u3067\u3042\u308c\u3070\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306e\u5168\u3066\u8868\u793a\u3067\u3001url\u304c\u8868\u793a\u3055\u308c\u308b\u3002\n\u6ce8\u610f\u70b9\u3068\u3057\u3066\u306f\u3001\u3053\u3053\u3067\u3001\u30b7\u30fc\u30c8\u306f\u5171\u6709\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u30c0\u30e1\u3002\n\u305d\u3057\u305f\u3089curl\u3067\u5f15\u3063\u5f35\u3063\u3066\u3053\u308c\u308b\u3002\n\ncsv2json.rb\n\n#!/usr/bin/ruby\nrequire 'rubygems'\nrequire 'json'\nrequire 'csv'\n\ndef integer_string?(str)\n          Integer(str)\n            true\nrescue ArgumentError\n          false\nend\n\nlines = CSV.open(ARGV[0]).readlines\nkeys = lines.delete lines.first\nkeys.drop(1)\n\nFile.open(ARGV[1], \"w\") do |f|\n        a = Hash.new([])\n        data = lines.map do |values|\n                eqpId = values.at(0)\n                values.drop(1)\n                values.map! do |v|\n                        if v\n                                 if integer_string?(v)\n                                        v.to_i\n                                 else\n                                        v.to_s\n                                 end\n                        else\n                                v = \"\"\n                        end\n                end\n                a[eqpId] = Hash[keys.zip(values)]\n        end\n        #f.puts JSON.pretty_generate(data)\n        f.puts JSON.pretty_generate(a)\nend\n\n\n\n\nmk.sh\n#!/bin/sh\nset -e\nWORKDIR=_work\nRELDIR=_release\n\nrm -rf $WORKDIR\nmkdir $WORKDIR\ncp ./*.rb ./$WORKDIR\ncd $WORKDIR\n\n#\u5404\u7a2ecsv\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9,json\u5316\n#URL\u306f\u90fd\u5408\u4e0a\u3001\u7701\u304f\necho 'curl \"URL\" > eqp.csv'\ncurl \"URL\" > eqp.csv\necho 'ruby csv2json.rb eqp.csv eqp.json'\nruby csv2json.rb eqp.csv eqp.json\n\n#\u3053\u306e\u3088\u3046\u306b\u5909\u63db\u3092\u5fc5\u8981\u306a\u304b\u305a\u304b\u3051\u308b\u3002\n\n#\u30d0\u30fc\u30b8\u30e7\u30f3\nTIME=`date '+%y%m%d%H%M%S'`   \necho \"{\\\"version\\\":${TIME}}\" > version.json\n\n#\u307e\u3068\u3081\u308b    \nrm -rf $RELDIR\nmkdir $RELDIR\ncp ./*.json ./$RELDIR\ncd $RELDIR\n\n#zip\u5316\u3057\u3001\u30b5\u30fc\u30d0\u306a\u3069\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\nzip -r masterdata.zip * \nsudo cp masterdata.zip /Library/WebServer/Documents/\n\n\ngoogle\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3067\u6b66\u5668\u306e\u6027\u80fd\u3068\u304b\u3001\u30e2\u30f3\u30b9\u30bf\u30fc\u306e\u51fa\u73fe\u4f4d\u7f6e\u3068\u304b\u3001\u3044\u308d\u3044\u308d\u3068\u30d0\u30e9\u30f3\u30b9\u8abf\u6574\u3057\u305f\u3044\u3002\u305d\u308c\u3089\u3092\u6700\u7d42\u7684\u306b\u306fjson\u306b\u3057\u3066\u30b3\u30fc\u30c9\u3067\u8aad\u307f\u51fa\u3057\u3059\u308b\u3002\n\u3053\u308c\u306f\u4f55\u767e\u4e07\u56de\u3068\u3084\u3063\u3066\u3044\u304f\u4e00\u9023\u306e\u4f5c\u696d\u306a\u306e\u3067\u3001\u3053\u308c\u3092\u81ea\u52d5\u5316\u3059\u308b\u3002\n\ngoogle\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8->csv->json\n\u307e\u305a\u3001\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3067csv\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\nchrome\u3067\u3042\u308c\u3070\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306e\u5168\u3066\u8868\u793a\u3067\u3001url\u304c\u8868\u793a\u3055\u308c\u308b\u3002\n\u6ce8\u610f\u70b9\u3068\u3057\u3066\u306f\u3001\u3053\u3053\u3067\u3001\u30b7\u30fc\u30c8\u306f\u5171\u6709\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u30c0\u30e1\u3002\n\u305d\u3057\u305f\u3089curl\u3067\u5f15\u3063\u5f35\u3063\u3066\u3053\u308c\u308b\u3002\n\n```rb:csv2json.rb\n\n#!/usr/bin/ruby\nrequire 'rubygems'\nrequire 'json'\nrequire 'csv'\n\ndef integer_string?(str)\n          Integer(str)\n            true\nrescue ArgumentError\n          false\nend\n\nlines = CSV.open(ARGV[0]).readlines\nkeys = lines.delete lines.first\nkeys.drop(1)\n\nFile.open(ARGV[1], \"w\") do |f|\n        a = Hash.new([])\n        data = lines.map do |values|\n                eqpId = values.at(0)\n                values.drop(1)\n                values.map! do |v|\n                        if v\n                                 if integer_string?(v)\n                                        v.to_i\n                                 else\n                                        v.to_s\n                                 end\n                        else\n                                v = \"\"\n                        end\n                end\n                a[eqpId] = Hash[keys.zip(values)]\n        end\n        #f.puts JSON.pretty_generate(data)\n        f.puts JSON.pretty_generate(a)\nend\n\n```\n\n```bash:mk.sh\n#!/bin/sh\nset -e\nWORKDIR=_work\nRELDIR=_release\n\nrm -rf $WORKDIR\nmkdir $WORKDIR\ncp ./*.rb ./$WORKDIR\ncd $WORKDIR\n\n#\u5404\u7a2ecsv\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9,json\u5316\n#URL\u306f\u90fd\u5408\u4e0a\u3001\u7701\u304f\necho 'curl \"URL\" > eqp.csv'\ncurl \"URL\" > eqp.csv\necho 'ruby csv2json.rb eqp.csv eqp.json'\nruby csv2json.rb eqp.csv eqp.json\n\n#\u3053\u306e\u3088\u3046\u306b\u5909\u63db\u3092\u5fc5\u8981\u306a\u304b\u305a\u304b\u3051\u308b\u3002\n         \n#\u30d0\u30fc\u30b8\u30e7\u30f3\nTIME=`date '+%y%m%d%H%M%S'`   \necho \"{\\\"version\\\":${TIME}}\" > version.json\n\n#\u307e\u3068\u3081\u308b    \nrm -rf $RELDIR\nmkdir $RELDIR\ncp ./*.json ./$RELDIR\ncd $RELDIR\n    \n#zip\u5316\u3057\u3001\u30b5\u30fc\u30d0\u306a\u3069\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\nzip -r masterdata.zip * \nsudo cp masterdata.zip /Library/WebServer/Documents/\n```\n"}