{"context": " More than 1 year has passed since last update.Ruby\u521d\u5fc3\u8005\u304cPopClip\u306eExtension\u306b\u6311\u6226\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30c6\u30ad\u30b9\u30c8\u3092Markdown\u306b\u5909\u63db\u3057\u307e\u3059\u3002\n\u30d5\u30a1\u30a4\u30eb\u306fhokupod/popclip\u306b\u4e0a\u3052\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u30c6\u30ad\u30b9\u30c8\n\u30bf\u30a4\u30c8\u30eb\n    \u898b\u51fa\u30572\n    \u898b\u51fa\u30572\n        \u30ea\u30b9\u30c8\n        \u30ea\u30b9\u30c8\n        \u30ea\u30b9\u30c8\n    \u898b\u51fa\u30572\n        \u898b\u51fa\u30573\n            \u30ea\u30b9\u30c8\n            \u30ea\u30b9\u30c8\n\n\n\u51fa\u529b\u7d50\u679c\n\u30bf\u30a4\u30c8\u30eb\n========\n## \u898b\u51fa\u30572\n## \u898b\u51fa\u30572\n- \u30ea\u30b9\u30c8\n- \u30ea\u30b9\u30c8\n- \u30ea\u30b9\u30c8\n\n## \u898b\u51fa\u30572\n### \u898b\u51fa\u30573\n- \u30ea\u30b9\u30c8\n- \u30ea\u30b9\u30c8\n\n\nPopClip\u30bd\u30fc\u30b9\n\ntxt2md.rb\n#!/usr/bin/ruby\n# -*- coding: utf-8 -*-\n\n$KCODE = 'u'\n\nclass Markdown\n  attr_reader :count\n  def initialize(text)\n    @indent = /\\t|\\s{4}/\n    # \u65e5\u672c\u8a9e\u6fc1\u70b9\u5bfe\u5fdc\n    @text   = text.gsub(@indent, '')\n                  .tr(\"\\u309B\\u309C\", \"\\u3099\\u309A\")\n                  .encode('UTF-8', 'UTF-8-MAC')\n    @count  = text.scan(@indent).size\n  end\n\n  def title\n    \"#{@text}\\n========\\n\"\n  end\n\n  def heading\n    \"#{'#' * (@count + 1)} #{@text}\"\n  end\n\n  def list\n    \"- #{@text}\\n\\n\"\n  end\n\n  def list_last\n    \"- #{@text}\"\n  end\nend\n\n# ENV['POPCLIP_TEXT'] <= \u3053\u3053\u306b\u9078\u629e\u3057\u305f\u30c6\u30ad\u30b9\u30c8\u304c\u683c\u7d0d\u3057\u914d\u5217\u306b\u5909\u63db\ntext_in = ENV['POPCLIP_TEXT'].to_s.split(\"\\n\")\n\n# Markdown\u306e\u30b9\u30bf\u30a4\u30eb\u3092\u5224\u5b9a\u3059\u308b\u305f\u3081\u306e\u6b63\u898f\u8868\u73fe\nheading_prefix = /^#.*/\nlist_prefix = /^-\\s/\nwrite_text = []\n\nbefore_style = 0\nbefore_text = ''\ni = 0\n\n# \u914d\u5217\u3092\u9006\u304b\u3089\u56de\u3057\u3066\u30b9\u30bf\u30a4\u30eb\u3092\u5224\u5b9a\ntext_in.reverse_each do |paragraph|\n  md = Markdown.new(paragraph)\n  heading_check = before_text.scan(heading_prefix).size\n  list_check = before_text.scan(list_prefix).size\n\n  # Markdown\u306e\u30b9\u30bf\u30a4\u30eb\u3092\u5224\u5b9a\u3057\u914d\u5217\u306b\u683c\u7d0d\n  if md.count == 0\n    write_text << md.title\n  elsif before_style < md.count && list_check == 0\n    write_text << md.list\n  elsif before_style <= md.count && list_check != 0 && heading_check == 0\n    write_text << md.list_last\n  else\n    write_text << md.heading\n  end\n\n  # \u4e00\u3064\u524d\u306e\u30b9\u30bf\u30a4\u30eb\u60c5\u5831\u3092\u683c\u7d0d\n  before_style = md.count\n  before_text = write_text.last\n  i += 1\nend\n\n# \u6574\u5f62\u6e08\u307f\u30c6\u30ad\u30b9\u30c8\u3092\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\nwrite_text.reverse_each do |md|\n  puts md\nend\n\n\n\n\u8ab2\u984c\n\n\u8907\u6570\u884c\u306e\u8981\u7d20\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u3002\nRuby\u3089\u3057\u3044\u66f8\u304d\u65b9\u304c\u308f\u304b\u3063\u3066\u3044\u306a\u3044\u3002\n\u2191\u30a2\u30c9\u30d0\u30a4\u30b9\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n\nRuby\u521d\u5fc3\u8005\u304cPopClip\u306eExtension\u306b\u6311\u6226\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30c6\u30ad\u30b9\u30c8\u3092Markdown\u306b\u5909\u63db\u3057\u307e\u3059\u3002\n\u30d5\u30a1\u30a4\u30eb\u306f[hokupod/popclip](https://github.com/hokupod/popclip)\u306b\u4e0a\u3052\u3066\u304a\u304d\u307e\u3059\u3002\n\n\n#### \u30b5\u30f3\u30d7\u30eb\u30c6\u30ad\u30b9\u30c8\n    \u30bf\u30a4\u30c8\u30eb\n\t\t\u898b\u51fa\u30572\n\t\t\u898b\u51fa\u30572\n\t\t\t\u30ea\u30b9\u30c8\n\t\t\t\u30ea\u30b9\u30c8\n\t\t\t\u30ea\u30b9\u30c8\n\t\t\u898b\u51fa\u30572\n\t\t\t\u898b\u51fa\u30573\n\t\t\t\t\u30ea\u30b9\u30c8\n\t\t\t\t\u30ea\u30b9\u30c8\n\n\n#### \u51fa\u529b\u7d50\u679c\n\n\n    \u30bf\u30a4\u30c8\u30eb\n    ========\n    ## \u898b\u51fa\u30572\n    ## \u898b\u51fa\u30572\n    - \u30ea\u30b9\u30c8\n    - \u30ea\u30b9\u30c8\n    - \u30ea\u30b9\u30c8\n    \n    ## \u898b\u51fa\u30572\n    ### \u898b\u51fa\u30573\n    - \u30ea\u30b9\u30c8\n    - \u30ea\u30b9\u30c8\n\n\n#### PopClip\u30bd\u30fc\u30b9\n\n\n```ruby:txt2md.rb\n#!/usr/bin/ruby\n# -*- coding: utf-8 -*-\n\n$KCODE = 'u'\n\nclass Markdown\n  attr_reader :count\n  def initialize(text)\n    @indent = /\\t|\\s{4}/\n    # \u65e5\u672c\u8a9e\u6fc1\u70b9\u5bfe\u5fdc\n    @text   = text.gsub(@indent, '')\n                  .tr(\"\\u309B\\u309C\", \"\\u3099\\u309A\")\n                  .encode('UTF-8', 'UTF-8-MAC')\n    @count  = text.scan(@indent).size\n  end\n\n  def title\n    \"#{@text}\\n========\\n\"\n  end\n\n  def heading\n    \"#{'#' * (@count + 1)} #{@text}\"\n  end\n\n  def list\n    \"- #{@text}\\n\\n\"\n  end\n\n  def list_last\n    \"- #{@text}\"\n  end\nend\n\n# ENV['POPCLIP_TEXT'] <= \u3053\u3053\u306b\u9078\u629e\u3057\u305f\u30c6\u30ad\u30b9\u30c8\u304c\u683c\u7d0d\u3057\u914d\u5217\u306b\u5909\u63db\ntext_in = ENV['POPCLIP_TEXT'].to_s.split(\"\\n\")\n\n# Markdown\u306e\u30b9\u30bf\u30a4\u30eb\u3092\u5224\u5b9a\u3059\u308b\u305f\u3081\u306e\u6b63\u898f\u8868\u73fe\nheading_prefix = /^#.*/\nlist_prefix = /^-\\s/\nwrite_text = []\n\nbefore_style = 0\nbefore_text = ''\ni = 0\n\n# \u914d\u5217\u3092\u9006\u304b\u3089\u56de\u3057\u3066\u30b9\u30bf\u30a4\u30eb\u3092\u5224\u5b9a\ntext_in.reverse_each do |paragraph|\n  md = Markdown.new(paragraph)\n  heading_check = before_text.scan(heading_prefix).size\n  list_check = before_text.scan(list_prefix).size\n\n  # Markdown\u306e\u30b9\u30bf\u30a4\u30eb\u3092\u5224\u5b9a\u3057\u914d\u5217\u306b\u683c\u7d0d\n  if md.count == 0\n    write_text << md.title\n  elsif before_style < md.count && list_check == 0\n    write_text << md.list\n  elsif before_style <= md.count && list_check != 0 && heading_check == 0\n    write_text << md.list_last\n  else\n    write_text << md.heading\n  end\n\n  # \u4e00\u3064\u524d\u306e\u30b9\u30bf\u30a4\u30eb\u60c5\u5831\u3092\u683c\u7d0d\n  before_style = md.count\n  before_text = write_text.last\n  i += 1\nend\n\n# \u6574\u5f62\u6e08\u307f\u30c6\u30ad\u30b9\u30c8\u3092\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\nwrite_text.reverse_each do |md|\n  puts md\nend\n```\n\n\n#### \u8ab2\u984c\n\n- \u8907\u6570\u884c\u306e\u8981\u7d20\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u3002\n- Ruby\u3089\u3057\u3044\u66f8\u304d\u65b9\u304c\u308f\u304b\u3063\u3066\u3044\u306a\u3044\u3002  \n\u2191\u30a2\u30c9\u30d0\u30a4\u30b9\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n", "tags": ["Ruby", "Markdown", "Popclip"]}