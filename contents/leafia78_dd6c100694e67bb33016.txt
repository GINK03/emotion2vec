{"context": "\n\n\u3053\u308c\u306f\u4f55\n\u3053\u306e\u8a18\u4e8b\u3092Node.js\u3067\u66f8\u304d\u76f4\u3057\u307e\u3057\u305f\nConsumerKey,ConsumerKeySecret\u3068TwitterID\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6e21\u3059\u3060\u3051\u3067AccessToken\u3068AccessTokenSecret\u3092\u8fd4\u3057\u3066\u304f\u308c\u308b\u3084\u3064\u3067\u3059\u3002\n\n\u4f7f\u3044\u65b9\n$ npm i request\n$ npm i crypto\n$ node token.js\n\n\n\u30b3\u30fc\u30c9\n\u3068\u3066\u3082\u6c5a\u3044\u3002\n\ntoken.js\nvar request = require('request'),\n    crypto = require('crypto');\n\nvar sn = '',\n    pw = '',\n    ck = '3rJOl1ODzm9yZy63FACdg',\n    cs = '5jPoQ5kQvMJFDYRNE8bQ4rHuds4xJqhvgNJM4awaE8',\n    url = 'https://api.twitter.com/oauth/access_token'\n\nvar params = {\n    x_auth_mode     : 'client_auth',\n    x_auth_password : pw,\n    x_auth_username : sn,\n}\n\nvar oauth = {\n    oauth_consumer_key      : ck,\n    oauth_nonce             : CreateOauthNonce(10),\n    oauth_signature_method  : 'HMAC-SHA1',\n    oauth_timestamp         : Math.floor(new Date().getTime() / 1000),\n    oauth_token             : '',\n    oauth_version           : '1.0a',\n}\n\nvar key = [ cs, '' ];\n\n\ncopy_oauth = [];\nObject.keys(oauth).forEach(function (key) {\n    copy_oauth[key] = oauth[key];\n});\nbase = merge(copy_oauth,params);\n\n\nbaseStr = \"\";\nObject.keys(base).forEach(function (key) {\n    baseStr += key + \"=\" + base[key] + \"&\";\n});\n\nencodeArr = [\n    'POST',\n    url,\n    baseStr.slice(0,-1)/*.replace(\"+\",\"%20\").replace(\"%7E\",\"~\")*/\n];\n\nencodeArr = encodeArr.map(function(element, index, array) {\n    return encodeURIComponent(element);\n});\n\nkey = key.map(function(element, index, array) {\n    return encodeURIComponent(element);\n});\n\nvar hmac = crypto.createHmac('sha1', key.join('&'));\n    hmac.update(encodeArr.join('&')); \n    oauth.oauth_signature = hmac.digest('base64');\n\nitems = [];\nObject.keys(oauth).forEach(function (key) {\n    items.push(encodeURIComponent(key) + '=\"' + encodeURIComponent(oauth[key]) + '\"');\n});\n\nheader = 'OAuth ' + items.join(', ');\n\nvar headers = {\n    Authorization: header\n}\n\nvar options = {\n    url: url,\n    method: 'POST',\n    headers: headers,\n    json: true,\n    form: params\n}\n\n\nrequest(options, function (error, response, body) {\n    if(body.indexOf('&') == -1){\n        var Obj = body;\n    } else {\n        var res = body.split('&');\n        var Obj = {};\n\n        for (var i = res.length - 1; i >= 0; i--) {\n            var sp = res[i].split('=');\n            eval(\"Obj.\" + sp[0] + \"='\" + sp[1] + \"';\");\n        }\n    }\n    console.log(Obj)\n});\n\nfunction CreateOauthNonce(n){\n    md5sum = crypto.createHash('md5');\n    var req = \"0123456789\";\n    var res = \"\";\n    var len = req.length;\n    for (var i = 0; i < n; i++){\n        res += req.charAt(Math.floor(len * Math.random()));\n    }\n    return md5sum.update(res).digest('hex');\n}\n\nfunction merge(obj1, obj2) {\n    if (!obj2) {\n        obj2 = {};\n    }\n    for (var attrname in obj2) {\n        if (obj2.hasOwnProperty(attrname)) {\n            obj1[attrname] = obj2[attrname];\n        }\n    }\n    return obj1;\n};\n\n\n\n\n\u7d50\u679c\n{ x_auth_expires: '0',\n  screen_name: 'leafia78',\n  user_id: '767274445203308545',\n  oauth_token_secret: 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',\n  oauth_token: 'xxxxxxxxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' }\n\n#\u3053\u308c\u306f\u4f55\n[\u3053\u306e\u8a18\u4e8b](http://qiita.com/_Ghostrick_/items/5de99ab104ec83cf3a42)\u3092Node.js\u3067\u66f8\u304d\u76f4\u3057\u307e\u3057\u305f\n\nConsumerKey,ConsumerKeySecret\u3068TwitterID\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6e21\u3059\u3060\u3051\u3067AccessToken\u3068AccessTokenSecret\u3092\u8fd4\u3057\u3066\u304f\u308c\u308b\u3084\u3064\u3067\u3059\u3002\n\n#\u4f7f\u3044\u65b9\n```sh:\n$ npm i request\n$ npm i crypto\n$ node token.js\n```\n\n#\u30b3\u30fc\u30c9\n\u3068\u3066\u3082\u6c5a\u3044\u3002\n\n```javascript:token.js\nvar request = require('request'),\n\tcrypto = require('crypto');\n\nvar sn = '',\n    pw = '',\n    ck = '3rJOl1ODzm9yZy63FACdg',\n    cs = '5jPoQ5kQvMJFDYRNE8bQ4rHuds4xJqhvgNJM4awaE8',\n    url = 'https://api.twitter.com/oauth/access_token'\n\nvar params = {\n\tx_auth_mode     : 'client_auth',\n    x_auth_password : pw,\n    x_auth_username : sn,\n}\n\nvar oauth = {\n    oauth_consumer_key      : ck,\n    oauth_nonce             : CreateOauthNonce(10),\n    oauth_signature_method  : 'HMAC-SHA1',\n    oauth_timestamp         : Math.floor(new Date().getTime() / 1000),\n    oauth_token             : '',\n    oauth_version           : '1.0a',\n}\n\nvar key = [ cs, '' ];\n\n\ncopy_oauth = [];\nObject.keys(oauth).forEach(function (key) {\n    copy_oauth[key] = oauth[key];\n});\nbase = merge(copy_oauth,params);\n\n\nbaseStr = \"\";\nObject.keys(base).forEach(function (key) {\n    baseStr += key + \"=\" + base[key] + \"&\";\n});\n\nencodeArr = [\n    'POST',\n    url,\n    baseStr.slice(0,-1)/*.replace(\"+\",\"%20\").replace(\"%7E\",\"~\")*/\n];\n\nencodeArr = encodeArr.map(function(element, index, array) {\n    return encodeURIComponent(element);\n});\n\nkey = key.map(function(element, index, array) {\n    return encodeURIComponent(element);\n});\n\nvar hmac = crypto.createHmac('sha1', key.join('&'));\n    hmac.update(encodeArr.join('&')); \n    oauth.oauth_signature = hmac.digest('base64');\n\nitems = [];\nObject.keys(oauth).forEach(function (key) {\n    items.push(encodeURIComponent(key) + '=\"' + encodeURIComponent(oauth[key]) + '\"');\n});\n\nheader = 'OAuth ' + items.join(', ');\n\nvar headers = {\n \tAuthorization: header\n}\n\nvar options = {\n\turl: url,\n\tmethod: 'POST',\n\theaders: headers,\n\tjson: true,\n\tform: params\n}\n\n\nrequest(options, function (error, response, body) {\n    if(body.indexOf('&') == -1){\n        var Obj = body;\n    } else {\n        var res = body.split('&');\n        var Obj = {};\n\n        for (var i = res.length - 1; i >= 0; i--) {\n            var sp = res[i].split('=');\n            eval(\"Obj.\" + sp[0] + \"='\" + sp[1] + \"';\");\n        }\n    }\n    console.log(Obj)\n});\n\nfunction CreateOauthNonce(n){\n\tmd5sum = crypto.createHash('md5');\n    var req = \"0123456789\";\n    var res = \"\";\n    var len = req.length;\n    for (var i = 0; i < n; i++){\n        res += req.charAt(Math.floor(len * Math.random()));\n    }\n    return md5sum.update(res).digest('hex');\n}\n\nfunction merge(obj1, obj2) {\n    if (!obj2) {\n        obj2 = {};\n    }\n    for (var attrname in obj2) {\n        if (obj2.hasOwnProperty(attrname)) {\n            obj1[attrname] = obj2[attrname];\n        }\n    }\n    return obj1;\n};\n\n```\n\n#\u7d50\u679c\n```js\n{ x_auth_expires: '0',\n  screen_name: 'leafia78',\n  user_id: '767274445203308545',\n  oauth_token_secret: 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',\n  oauth_token: 'xxxxxxxxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' }\n```\n", "tags": ["Node.js", "JavaScript", "Twitter", "TwitterAPI"]}