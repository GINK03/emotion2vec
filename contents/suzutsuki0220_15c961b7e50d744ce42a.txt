{"context": " More than 1 year has passed since last update.\n\nTokyo Tyrant\u3068\u306f\nKey-Value Store(KVS)\u306e\u4e00\u7a2e\u3067\u3001DBMS\u3088\u308a\u3082\u9ad8\u901f\u306b\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u66f8\u304d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u305f\u3081\u3001\n\u30ad\u30e3\u30c3\u30b7\u30e5\u60c5\u5831\u306a\u3069\u306e\u983b\u7e41\u306b\u66f4\u65b0\u3055\u308c\u308b\u30c7\u30fc\u30bf\u306e\u4fdd\u5b58\u306b\u4f7f\u7528\u3055\u308c\u308b\nTokyo Tyrant\u306fTokyo Cabinet\u3068\u7d44\u307f\u5408\u308f\u305b\u3066\u4f7f\u3044\u3001Tokyo Cabinet\u306f\u5b9f\u969b\u306b\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u66f8\u304d\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u30b3\u30f3\u30c6\u30ca\u3067\u3001\nTokyo Tyrant\u306f\u305d\u308c\u3092\u64cd\u4f5c\u3059\u308b\u305f\u3081\u306e\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u63d0\u4f9b\u3059\u308b\n\u3053\u3053\u3067\u306f\u4fbf\u5b9c\u4e0a\u3001Tokyo Tyrant\u3068Tokyo Cabinet\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u69cb\u6210\u3057\u305f\u3082\u306e\u3092Tokyo Tyrant\u3068\u8868\u8a18\u3059\u308b\n\nURL\nTokyo Tyrant: network interface of Tokyo Cabinet\nhttp://fallabs.com/tokyotyrant/\nDBM\u306b\u3088\u308b\u30c6\u30fc\u30d6\u30eb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 \u305d\u306e\u53c2 (Mixi::Engineers::Blog)\nhttp://alpha.mixi.co.jp/entry/2009/10705/\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\n\nTokyo Cabinet: 1.4.48\nTokyo Tyrant: 1.1.41\n\n\nconfigure\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\u3092${PREFIX_DIR}\u3067\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u9069\u5b9c\u5909\u66f4(/usr\u3084/usr/local\u306a\u3069)\u3057\u3066\u304f\u3060\u3055\u3044\nPREFIX_DIR=/opt/tokyotyrant\n\n\nTokyo Cabinet\n    ./configure \\\n            --prefix=${PREFIX_DIR} \\\n            --libdir=${TARGETLIB_DIR} \\\n            --sysconfdir=${PREFIX_DIR}/conf \\\n            --localstatedir=${PREFIX_DIR}/var \\\n            --enable-shared \\\n            --disable-debug \\\n            --disable-devel\n\n\nTokyo Tyrant\n   ./configure \\\n            --prefix=${PREFIX_DIR} \\\n            --libdir=${TARGETLIB_DIR} \\\n            --sysconfdir=${PREFIX_DIR}/conf \\\n            --localstatedir=${PREFIX_DIR}/var \\\n            --with-tc=${PREFIX_DIR} \\\n            --enable-shared \\\n            --disable-debug \\\n            --disable-devel\n\n\n\n\nmake\n$ make\n# make install\n\n\n\u30b3\u30de\u30f3\u30c9\u306b\u3088\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u64cd\u4f5c\n\n\n\u5024\u3092\u53d6\u5f97\n\n$ tcrmgr get localhost ${key}\n\n\n\n\u5024\u3092\u30bb\u30c3\u30c8\n\n$ tcrmgr put localhost ${key} ${value}\n\n\n\n\u5024\u3092\u524a\u9664\n\n$ tcrmgr out localhost ${key}\n\n\n\n\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u5168\u3066\u306e\u30ad\u30fc\u3092\u53d6\u5f97\n\n$ tcrmgr list localhost\n\n\n\n\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u5168\u3066\u306e\u30c7\u30fc\u30bf\u306e\u30ad\u30fc\u3068\u5024\u3092\u53d6\u5f97\n\n$ tcrmgr list -pv -sep '|' localhost\n\n\n\n\u30c7\u30fc\u30bf\u3092\u5168\u3066\u524a\u9664\u3059\u308b\n\n$ tcrmgr vanish localhost\n\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u6700\u9069\u5316\u3059\u308b\n\n$ tcrmgr optimize localhost\n\n\n\n\n\u30c7\u30fc\u30bf\u69cb\u9020\n\u30d5\u30a1\u30a4\u30eb\u306e\u30b5\u30d5\u30a3\u30c3\u30af\u30b9\u3067\u5909\u308f\u308b\u3002ttserver\u8d77\u52d5\u6642\u306b\u6307\u5b9a\u3059\u308b\n\u4f8b) tct\u3092\u6307\u5b9a\u3057\u3066table database\u578b\u3067\u52d5\u4f5c\n$ ttserver /tmp/ttserver.tct\n\n\n\n\n\u30b5\u30d5\u30a3\u30c3\u30af\u30b9\n\u5f62\u5f0f\n\n\n\n\n\u6307\u5b9a\u306a\u3057\nhash database\n\n\n+\ntree database\n\n\n.tch\nhash database\n\n\n.tcb\ntree database\n\n\n.tcf\nfixed length database\n\n\n.tct\ntable database\n\n\n\n\u30c7\u30fc\u30bf\u69cb\u9020\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u306e\u30da\u30fc\u30b8\u3092\u53c2\u8003 (slide share\u306e17\u30da\u30fc\u30b8\u76ee)\nhttp://www.akirakoyasu.net/2011/12/11/tokyo-cabinet-and-tokyo-tyrant/\n\nC\u8a00\u8a9eAPI\nfallabs\u306e \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9 \u3092\u898b\u308c\u3070\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9\u304c\u5206\u304b\u308b\nAPI\u306e\u4ed5\u69d8\u306b\u3064\u3044\u3066\u306f\u3001Tokyo Tyrant\u306e tcrdb.h \u3092\u78ba\u8a8d\u3059\u308c\u3070\u3088\u3044\n\n\n\u30ec\u30b3\u30fc\u30c9\u3092\u683c\u7d0d\u3059\u308b\uff08\u4e0a\u66f8\u304d\u30e2\u30fc\u30c9\uff09\n\n\nbool tcrdbtblput(TCRDB *rdb, const void *pkbuf, int pksiz, TCMAP *cols);\n\n\n\n\u30ec\u30b3\u30fc\u30c9\u3092\u683c\u7d0d\u3059\u308b\uff08\u65e2\u5b58\u5024\u512a\u5148\u30e2\u30fc\u30c9\uff09\n\n\nbool tcrdbtblputkeep(TCRDB *rdb, const void *pkbuf, int pksiz, TCMAP *cols);\n\n\n\n\u30ec\u30b3\u30fc\u30c9\u3092\u683c\u7d0d\u3059\u308b\uff08\u30ab\u30e9\u30e0\u8ffd\u52a0\u30e2\u30fc\u30c9\uff09\n\n\nbool tcrdbtblputcat(TCRDB *rdb, const void *pkbuf, int pksiz, TCMAP *cols);\n\n\n\n\u30ec\u30b3\u30fc\u30c9\u3092\u524a\u9664\u3059\u308b\n\n\nbool tcrdbtblout(TCRDB *rdb, const void *pkbuf, int pksiz);\n\n\n\n\u30ec\u30b3\u30fc\u30c9\u3092\u53d6\u5f97\u3059\u308b\n\n\nTCMAP *tcrdbtblget(TCRDB *rdb, const void *pkbuf, int pksiz);\n\n\n\n\u30b3\u30e9\u30e0\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\n\n\nbool tcrdbtblsetindex(TCRDB *rdb, const char *name, int type);\n\n\n\n\u30e6\u30cb\u30fc\u30af\u306aID\u756a\u53f7\u3092\u63a1\u756a\u3059\u308b\n\n\nint64_t tcrdbtblgenuid(TCRDB *rdb);\n\n\n\n\u30af\u30a8\u30ea\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\u3059\u308b\n\n\nRDBQRY *tcrdbqrynew(TCRDB *rdb);\n\n\n\n\u30af\u30a8\u30ea\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u7834\u68c4\u3059\u308b\n\n\nvoid tcrdbqrydel(RDBQRY *qry);\n\n\n\n\u30af\u30a8\u30ea\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u7d5e\u308a\u8fbc\u307f\u6761\u4ef6\u3092\u8ffd\u52a0\u3059\u308b\n\n\nvoid tcrdbqryaddcond(RDBQRY *qry, const char *name, int op, const char *expr);\n\n\n\n\u30af\u30a8\u30ea\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u7d50\u679c\u306e\u9806\u5e8f\u3092\u8a2d\u5b9a\u3059\u308b\n\n\nvoid tcrdbqrysetorder(RDBQRY *qry, const char *name, int type);\n\n\n\n\u30af\u30a8\u30ea\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u7d50\u679c\u306e\u6700\u5927\u53d6\u5f97\u4ef6\u6570\u3092\u8a2d\u5b9a\u3059\u308b\n\n\nvoid tcrdbqrysetmax(RDBQRY *qry, int max);\n\n\n\n\u691c\u7d22\u3092\u884c\u3063\u3066\u4e3b\u30ad\u30fc\u306e\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n\n\nTCLIST *tcrdbqrysearch(RDBQRY *qry);\n\n\n\n\u691c\u7d22\u3092\u884c\u3063\u3066\u8a72\u5f53\u306e\u30ec\u30b3\u30fc\u30c9\u3092\u524a\u9664\u3059\u308b\n\n\nbool tcrdbqrysearchout(RDBQRY *qry);\n\n\n\n\n\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u69cb\u7bc9\n\n\u6e96\u5099\n\n\n\u30de\u30b9\u30bf\u306e\u66f4\u65b0\u30ed\u30b0\u7f6e\u304d\u5834\u3092\u7528\u610f\u3059\u308b\n\n\u30de\u30b9\u30bf\u5074\n$ mkdir /tmp/ulog-master\n\n\n\n\u30b9\u30ec\u30fc\u30d6\u306e\u66f4\u65b0\u30ed\u30b0\u7f6e\u304d\u5834\u3092\u7528\u610f\u3059\u308b\n\n\u30b9\u30ec\u30fc\u30d6\u5074\n$ mkdir /tmp/ulog-slave\n\n\n\n\n\u8d77\u52d5\n\n\n\u30de\u30b9\u30bf\u306e\u8d77\u52d5\n\n$ ttserver -port 1978 -sid 1 -ulog /tmp/ulog-master /tmp/casket-master.tch\n\n\n\n\u30b9\u30ec\u30fc\u30d6\u306e\u8d77\u52d5\n\n$ ttserver -port 1979 -sid 2 -ulog /tmp/ulog-slave -mhost %%master_host%% -mport 1978 -rts /tmp/slave.rts /tmp/casket-slave.tch\n\n\n\u203b %%master_host%% \u306f\u30de\u30b9\u30bf\u306e\u30db\u30b9\u30c8\u540d(\u307e\u305f\u306fIP\u30a2\u30c9\u30ec\u30b9)\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\n\u203b \u8907\u6570\u306e\u30b9\u30ec\u30fc\u30d6\u3092\u7acb\u3066\u308b\u5834\u5408\u306f\"-sid\"\u306e\u5024\u304c\u88ab\u3089\u306a\u3044\u3088\u3046\u306b\u3001\u4efb\u610f\u306e\u5024\u3092\u5272\u308a\u5f53\u3066\u3066\u304f\u3060\u3055\u3044\n\n\n\u78ba\u8a8d\n\n\n\u30de\u30b9\u30bf\u306b\u30c7\u30fc\u30bf\u3092\u767b\u9332\n\n$ tcrmgr put -port 1978 %%master_host%% tako ika\n\n\n\u203b %%master_host%% \u306f\u30de\u30b9\u30bf\u306e\u30db\u30b9\u30c8\u540d(\u307e\u305f\u306fIP\u30a2\u30c9\u30ec\u30b9)\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\n\n\u30de\u30b9\u30bf\u306e\u30c7\u30fc\u30bf\u3092\u691c\u7d22\n\n$ tcrmgr get -port 1978 %%master_host%% tako\n\n\n\u203b %%master_host%% \u306f\u30de\u30b9\u30bf\u306e\u30db\u30b9\u30c8\u540d(\u307e\u305f\u306fIP\u30a2\u30c9\u30ec\u30b9)\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\n\n\u30b9\u30ec\u30fc\u30d6\u306e\u30c7\u30fc\u30bf\u3092\u691c\u7d22\n\n$ tcrmgr get -port 1979 %%slave_host%% tako\n\n\n\u203b %%slave_host%% \u306f\u30b9\u30ec\u30fc\u30d6\u306e\u30db\u30b9\u30c8\u540d(\u307e\u305f\u306fIP\u30a2\u30c9\u30ec\u30b9)\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\n\n\n\u53c2\u8003\nTokyo Tyrant\u306b\u3088\u308bHA\u30cf\u30c3\u30b7\u30e5DB\u30b5\u30fc\u30d0\u306e\u69cb\u7bc9\nhttp://alpha.mixi.co.jp/entry/2008/10692/\n# Tokyo Tyrant\u3068\u306f\n\nKey-Value Store(KVS)\u306e\u4e00\u7a2e\u3067\u3001DBMS\u3088\u308a\u3082\u9ad8\u901f\u306b\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u66f8\u304d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u305f\u3081\u3001\n\u30ad\u30e3\u30c3\u30b7\u30e5\u60c5\u5831\u306a\u3069\u306e\u983b\u7e41\u306b\u66f4\u65b0\u3055\u308c\u308b\u30c7\u30fc\u30bf\u306e\u4fdd\u5b58\u306b\u4f7f\u7528\u3055\u308c\u308b\n\nTokyo Tyrant\u306fTokyo Cabinet\u3068\u7d44\u307f\u5408\u308f\u305b\u3066\u4f7f\u3044\u3001Tokyo Cabinet\u306f\u5b9f\u969b\u306b\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u66f8\u304d\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u30b3\u30f3\u30c6\u30ca\u3067\u3001\nTokyo Tyrant\u306f\u305d\u308c\u3092\u64cd\u4f5c\u3059\u308b\u305f\u3081\u306e\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u63d0\u4f9b\u3059\u308b\n\n\u3053\u3053\u3067\u306f\u4fbf\u5b9c\u4e0a\u3001Tokyo Tyrant\u3068Tokyo Cabinet\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u69cb\u6210\u3057\u305f\u3082\u306e\u3092Tokyo Tyrant\u3068\u8868\u8a18\u3059\u308b\n\n## URL\n\nTokyo Tyrant: network interface of Tokyo Cabinet\nhttp://fallabs.com/tokyotyrant/\n\nDBM\u306b\u3088\u308b\u30c6\u30fc\u30d6\u30eb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 \u305d\u306e\u53c2 (Mixi::Engineers::Blog)\nhttp://alpha.mixi.co.jp/entry/2009/10705/\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n### \u30d0\u30fc\u30b8\u30e7\u30f3\n\n* Tokyo Cabinet: 1.4.48\n* Tokyo Tyrant: 1.1.41\n\n### configure\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\u3092${PREFIX_DIR}\u3067\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u9069\u5b9c\u5909\u66f4(/usr\u3084/usr/local\u306a\u3069)\u3057\u3066\u304f\u3060\u3055\u3044\n<pre>\nPREFIX_DIR=/opt/tokyotyrant\n</pre>\n\n* Tokyo Cabinet\n<pre>\n        ./configure \\\n                --prefix=${PREFIX_DIR} \\\n                --libdir=${TARGETLIB_DIR} \\\n                --sysconfdir=${PREFIX_DIR}/conf \\\n                --localstatedir=${PREFIX_DIR}/var \\\n                --enable-shared \\\n                --disable-debug \\\n                --disable-devel\n</pre>\n* Tokyo Tyrant\n<pre>\n       ./configure \\\n                --prefix=${PREFIX_DIR} \\\n                --libdir=${TARGETLIB_DIR} \\\n                --sysconfdir=${PREFIX_DIR}/conf \\\n                --localstatedir=${PREFIX_DIR}/var \\\n                --with-tc=${PREFIX_DIR} \\\n                --enable-shared \\\n                --disable-debug \\\n                --disable-devel\n</pre>\n\n### make\n<pre>\n$ make\n# make install\n</pre>\n\n## \u30b3\u30de\u30f3\u30c9\u306b\u3088\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u64cd\u4f5c\n\n* \u5024\u3092\u53d6\u5f97\n<pre>\n$ tcrmgr get localhost ${key}\n</pre>\n\n* \u5024\u3092\u30bb\u30c3\u30c8\n<pre>\n$ tcrmgr put localhost ${key} ${value}\n</pre>\n \n* \u5024\u3092\u524a\u9664\n<pre>\n$ tcrmgr out localhost ${key}\n</pre>\n\n* \u767b\u9332\u3055\u308c\u3066\u3044\u308b\u5168\u3066\u306e\u30ad\u30fc\u3092\u53d6\u5f97\n<pre>\n$ tcrmgr list localhost\n</pre>\n\n* \u767b\u9332\u3055\u308c\u3066\u3044\u308b\u5168\u3066\u306e\u30c7\u30fc\u30bf\u306e\u30ad\u30fc\u3068\u5024\u3092\u53d6\u5f97\n<pre>\n$ tcrmgr list -pv -sep '|' localhost\n</pre>\n\n* \u30c7\u30fc\u30bf\u3092\u5168\u3066\u524a\u9664\u3059\u308b\n<pre>\n$ tcrmgr vanish localhost\n</pre>\n\n* \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u6700\u9069\u5316\u3059\u308b\n<pre>\n$ tcrmgr optimize localhost\n</pre>\n\n## \u30c7\u30fc\u30bf\u69cb\u9020\n\n\u30d5\u30a1\u30a4\u30eb\u306e\u30b5\u30d5\u30a3\u30c3\u30af\u30b9\u3067\u5909\u308f\u308b\u3002ttserver\u8d77\u52d5\u6642\u306b\u6307\u5b9a\u3059\u308b\n\n\u4f8b) tct\u3092\u6307\u5b9a\u3057\u3066table database\u578b\u3067\u52d5\u4f5c\n<pre>\n$ ttserver /tmp/ttserver.tct\n</pre>\n\n\u30b5\u30d5\u30a3\u30c3\u30af\u30b9|\u5f62\u5f0f\n-----------|-----\n\u6307\u5b9a\u306a\u3057|hash database\n+|tree database\n.tch|hash database\n.tcb|tree database\n.tcf|fixed length database\n.tct|table database\n\n\u30c7\u30fc\u30bf\u69cb\u9020\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u306e\u30da\u30fc\u30b8\u3092\u53c2\u8003 (slide share\u306e17\u30da\u30fc\u30b8\u76ee)\nhttp://www.akirakoyasu.net/2011/12/11/tokyo-cabinet-and-tokyo-tyrant/\n\n## C\u8a00\u8a9eAPI\n\nfallabs\u306e [\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9](http://fallabs.com/tokyotyrant/spex.html) \u3092\u898b\u308c\u3070\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9\u304c\u5206\u304b\u308b\nAPI\u306e\u4ed5\u69d8\u306b\u3064\u3044\u3066\u306f\u3001Tokyo Tyrant\u306e tcrdb.h \u3092\u78ba\u8a8d\u3059\u308c\u3070\u3088\u3044\n\n* \u30ec\u30b3\u30fc\u30c9\u3092\u683c\u7d0d\u3059\u308b\uff08\u4e0a\u66f8\u304d\u30e2\u30fc\u30c9\uff09\n<pre><code class=\"C\">\nbool tcrdbtblput(TCRDB *rdb, const void *pkbuf, int pksiz, TCMAP *cols);\n</code></pre>\n\n* \u30ec\u30b3\u30fc\u30c9\u3092\u683c\u7d0d\u3059\u308b\uff08\u65e2\u5b58\u5024\u512a\u5148\u30e2\u30fc\u30c9\uff09\n<pre><code class=\"C\">\nbool tcrdbtblputkeep(TCRDB *rdb, const void *pkbuf, int pksiz, TCMAP *cols);\n</code></pre>\n\n* \u30ec\u30b3\u30fc\u30c9\u3092\u683c\u7d0d\u3059\u308b\uff08\u30ab\u30e9\u30e0\u8ffd\u52a0\u30e2\u30fc\u30c9\uff09\n<pre><code class=\"C\">\nbool tcrdbtblputcat(TCRDB *rdb, const void *pkbuf, int pksiz, TCMAP *cols);\n</code></pre>\n\n* \u30ec\u30b3\u30fc\u30c9\u3092\u524a\u9664\u3059\u308b\n<pre><code class=\"C\">\nbool tcrdbtblout(TCRDB *rdb, const void *pkbuf, int pksiz);\n</code></pre>\n\n* \u30ec\u30b3\u30fc\u30c9\u3092\u53d6\u5f97\u3059\u308b\n<pre><code class=\"C\">\nTCMAP *tcrdbtblget(TCRDB *rdb, const void *pkbuf, int pksiz);\n</code></pre>\n\n* \u30b3\u30e9\u30e0\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\n<pre><code class=\"C\">\nbool tcrdbtblsetindex(TCRDB *rdb, const char *name, int type);\n</code></pre>\n\n* \u30e6\u30cb\u30fc\u30af\u306aID\u756a\u53f7\u3092\u63a1\u756a\u3059\u308b\n<pre><code class=\"C\">\nint64_t tcrdbtblgenuid(TCRDB *rdb);\n</code></pre>\n\n* \u30af\u30a8\u30ea\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\u3059\u308b\n<pre><code class=\"C\">\nRDBQRY *tcrdbqrynew(TCRDB *rdb);\n</code></pre>\n\n* \u30af\u30a8\u30ea\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u7834\u68c4\u3059\u308b\n<pre><code class=\"C\">\nvoid tcrdbqrydel(RDBQRY *qry);\n</code></pre>\n\n* \u30af\u30a8\u30ea\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u7d5e\u308a\u8fbc\u307f\u6761\u4ef6\u3092\u8ffd\u52a0\u3059\u308b\n<pre><code class=\"C\">\nvoid tcrdbqryaddcond(RDBQRY *qry, const char *name, int op, const char *expr);\n</code></pre>\n\n* \u30af\u30a8\u30ea\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u7d50\u679c\u306e\u9806\u5e8f\u3092\u8a2d\u5b9a\u3059\u308b\n<pre><code class=\"C\">\nvoid tcrdbqrysetorder(RDBQRY *qry, const char *name, int type);\n</code></pre>\n\n* \u30af\u30a8\u30ea\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u7d50\u679c\u306e\u6700\u5927\u53d6\u5f97\u4ef6\u6570\u3092\u8a2d\u5b9a\u3059\u308b\n<pre><code class=\"C\">\nvoid tcrdbqrysetmax(RDBQRY *qry, int max);\n</code></pre>\n\n* \u691c\u7d22\u3092\u884c\u3063\u3066\u4e3b\u30ad\u30fc\u306e\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n<pre><code class=\"C\">\nTCLIST *tcrdbqrysearch(RDBQRY *qry);\n</code></pre>\n\n* \u691c\u7d22\u3092\u884c\u3063\u3066\u8a72\u5f53\u306e\u30ec\u30b3\u30fc\u30c9\u3092\u524a\u9664\u3059\u308b\n<pre><code class=\"C\">\nbool tcrdbqrysearchout(RDBQRY *qry);\n</code></pre>\n\n## \u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u69cb\u7bc9\n\n### \u6e96\u5099\n\n1. \u30de\u30b9\u30bf\u306e\u66f4\u65b0\u30ed\u30b0\u7f6e\u304d\u5834\u3092\u7528\u610f\u3059\u308b\n<pre>\n\u30de\u30b9\u30bf\u5074\n$ mkdir /tmp/ulog-master\n</pre>\n\n2. \u30b9\u30ec\u30fc\u30d6\u306e\u66f4\u65b0\u30ed\u30b0\u7f6e\u304d\u5834\u3092\u7528\u610f\u3059\u308b\n<pre>\n\u30b9\u30ec\u30fc\u30d6\u5074\n$ mkdir /tmp/ulog-slave\n</pre>\n\n### \u8d77\u52d5\n* \u30de\u30b9\u30bf\u306e\u8d77\u52d5\n<pre>\n$ ttserver -port 1978 -sid 1 -ulog /tmp/ulog-master /tmp/casket-master.tch\n</pre>\n\n* \u30b9\u30ec\u30fc\u30d6\u306e\u8d77\u52d5\n<pre>\n$ ttserver -port 1979 -sid 2 -ulog /tmp/ulog-slave -mhost %%master_host%% -mport 1978 -rts /tmp/slave.rts /tmp/casket-slave.tch\n</pre>\n\u203b %%master_host%% \u306f\u30de\u30b9\u30bf\u306e\u30db\u30b9\u30c8\u540d(\u307e\u305f\u306fIP\u30a2\u30c9\u30ec\u30b9)\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\n\u203b \u8907\u6570\u306e\u30b9\u30ec\u30fc\u30d6\u3092\u7acb\u3066\u308b\u5834\u5408\u306f\"-sid\"\u306e\u5024\u304c\u88ab\u3089\u306a\u3044\u3088\u3046\u306b\u3001\u4efb\u610f\u306e\u5024\u3092\u5272\u308a\u5f53\u3066\u3066\u304f\u3060\u3055\u3044\n\n### \u78ba\u8a8d\n\n1. \u30de\u30b9\u30bf\u306b\u30c7\u30fc\u30bf\u3092\u767b\u9332\n<pre>\n$ tcrmgr put -port 1978 %%master_host%% tako ika\n</pre>\n\u203b %%master_host%% \u306f\u30de\u30b9\u30bf\u306e\u30db\u30b9\u30c8\u540d(\u307e\u305f\u306fIP\u30a2\u30c9\u30ec\u30b9)\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\n\n2. \u30de\u30b9\u30bf\u306e\u30c7\u30fc\u30bf\u3092\u691c\u7d22\n<pre>\n$ tcrmgr get -port 1978 %%master_host%% tako\n</pre>\n\u203b %%master_host%% \u306f\u30de\u30b9\u30bf\u306e\u30db\u30b9\u30c8\u540d(\u307e\u305f\u306fIP\u30a2\u30c9\u30ec\u30b9)\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\n\n3. \u30b9\u30ec\u30fc\u30d6\u306e\u30c7\u30fc\u30bf\u3092\u691c\u7d22\n<pre>\n$ tcrmgr get -port 1979 %%slave_host%% tako\n</pre>\n\u203b %%slave_host%% \u306f\u30b9\u30ec\u30fc\u30d6\u306e\u30db\u30b9\u30c8\u540d(\u307e\u305f\u306fIP\u30a2\u30c9\u30ec\u30b9)\u306b\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\n\n### \u53c2\u8003\n\nTokyo Tyrant\u306b\u3088\u308bHA\u30cf\u30c3\u30b7\u30e5DB\u30b5\u30fc\u30d0\u306e\u69cb\u7bc9\nhttp://alpha.mixi.co.jp/entry/2008/10692/\n", "tags": ["tokyotyrant", "C\u8a00\u8a9e", "Linux", "KVS"]}