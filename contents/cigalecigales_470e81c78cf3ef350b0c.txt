{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u300cRuby\u306b\u3088\u308b\u30af\u30ed\u30fc\u30e9\u30fc\u958b\u767a\u6280\u6cd5\u300d\u3092\u8aad\u307f\u7d42\u308f\u3063\u3066\u3001\u30af\u30ed\u30fc\u30e9\u30fc\u3092\u4f5c\u3063\u3066\u307f\u305f\u304f\u306a\u308a\u307e\u3057\u305f\u3002\uff08\u307e\u3060\u4f5c\u3063\u3066\u307e\u305b\u3093\uff09\n\u597d\u304d\u306a\u30b8\u30e3\u30f3\u30eb\u306e\u753b\u50cf\u3092\u96c6\u3081\u3066\u304f\u308c\u308b\u3082\u306e\u3092\u4f5c\u308d\u3046\u3068\u601d\u3063\u305f\u3082\u306e\u306e\u3001\u30ed\u30fc\u30ab\u30eb\u306b\u753b\u50cf\u304c\u305f\u307e\u308b\u3068\u5acc\u306a\u306e\u3067\u3088\u304f\u4f7f\u3046Google Drive\u306b\u4e0a\u3052\u3068\u3044\u3066\u6b32\u3057\u3044\u3068\u601d\u3063\u3066\u8abf\u3079\u3066\u307f\u305f\u3089API\u304c\u3042\u308b\u307f\u305f\u3044\u306a\u306e\u3067\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u74b0\u5883\n\nMacBook Air\uff08Yosemite\uff09\nRuby\uff082.1.2\uff09\n\n\n\u624b\u9806\n\n1. Google Developers Console\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u306a\u3069\u306e\u53d6\u5f97\nGoogle Developers Console\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u300c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u300d\u3092\u62bc\u4e0b\u3057\u307e\u3059\u3002\n\n\u300c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u300d\u306b\u597d\u304d\u306a\u540d\u524d\u3092\u4ed8\u3051\u307e\u3059\u3002\n\u300c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID\u300d\u306f\u305d\u306e\u307e\u307e\u3067\u3082\u5927\u4e08\u592b\u3067\u3059\u3002\n\nAPI\u3068\u8a8d\u8a3c\u3000\uff1e\u3000API\u3000\u3092\u9078\u629e\u3057\u3001\u6709\u52b9\u306aAPI\u304c\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u300cDrive API\u300d\u3068\u300cDrive SDK\u300d\u304cOFF\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067ON\u306b\u3057\u307e\u3059\u3002\n\nAPI\u3068\u8a8d\u8a3c\u3000\uff1e\u3000\u8a8d\u8a3c\u60c5\u5831\u3000\u3092\u9078\u629e\u3057\u3001\u300c\u65b0\u3057\u3044\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3092\u4f5c\u6210\u300d\u3092\u62bc\u4e0b\u3057\u307e\u3059\u3002\n\n\u300c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u300d\u3092\u9078\u629e\u3057\u3001\u300c\u540c\u610f\u753b\u9762\u3092\u8a2d\u5b9a\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u300c\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u300d\u3092\u9078\u629e\u3057\u3001\u300c\u30b5\u30fc\u30d3\u30b9\u540d\u300d\u3092\u5165\u529b\u3057\u3066\u300c\u4fdd\u5b58\u300d\u3092\u62bc\u3057\u307e\u3059\u3002\n\n\u300c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u300d\u3092\u9078\u629e\u3057\u3001\u300c\u305d\u306e\u4ed6\u300d\u3092\u9078\u629e\u3057\u3066\u300c\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3092\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u3059\u308b\u3068\u3053\u306e\u3088\u3046\u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u306a\u3069\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u306f\u3053\u306e\u5024\u3092\u4f7f\u7528\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n[\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID]\n127036428910-2cihomq21p413jtu4ebmf4kvefi8v9p1.apps.googleusercontent.com\n\n[\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b7\u30fc\u30af\u30ec\u30c3\u30c8]\n2KR6kOI2hOs0QSKqqltrkyfi\n\n[\u30ea\u30c0\u30a4\u30ec\u30af\u30c8URI]\nhttp://localhost\n\n\n2. Authorization Code\u306e\u53d6\u5f97\n\u4ee5\u4e0b\u306eURL\u306e\u300c\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u300d\u3068\u300c\u30ea\u30c0\u30a4\u30ec\u30af\u30c8URI\u300d\u306b\u3055\u3063\u304dGoogle Developers Console\u3067\u53d6\u5f97\u3057\u305f\u60c5\u5831\u3068\u7f6e\u304d\u63db\u3048\u307e\u3059\u3002\nhttps://accounts.google.com/o/oauth2/auth\n?client_id=\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\n&redirect_uri=\u30ea\u30c0\u30a4\u30ec\u30af\u30c8URI\n&scope=https://www.googleapis.com/auth/drive\n&response_type=code\n\n\u79c1\u306e\u5834\u5408\u3060\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\nhttps://accounts.google.com/o/oauth2/auth\n?client_id=127036428910-2cihomq21p413jtu4ebmf4kvefi8v9p1.apps.googleusercontent.com\n&redirect_uri=http://localhost\n&scope=https://www.googleapis.com/auth/drive\n&response_type=code\n\n\u30d6\u30e9\u30a6\u30b6\u3092\u7acb\u3061\u4e0a\u3052\u3066\u3001\u4e0a\u8a18\u306eURL\u3092\u8cbc\u308a\u4ed8\u3051\u3066\u30a8\u30f3\u30bf\u30fc\u3092\u62bc\u3057\u307e\u3059\u3002\n\n\u3059\u308b\u3068\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30ed\u30b0\u30a4\u30f3\u3092\u6c42\u3081\u3089\u308c\u308b\u306e\u3067\u3001\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3044Google Drive\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\u4e0b\u306e\u3088\u3046\u306a\u753b\u9762\u306b\u306a\u308b\u306e\u3067\u300c\u627f\u8a8d\u3059\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u30da\u30fc\u30b8\u304c\u958b\u3051\u306a\u3044\u3068\u51fa\u307e\u3059\u3002\n\n\u3053\u306e\u30da\u30fc\u30b8\u306e\u30a2\u30c9\u30ec\u30b9\u30d0\u30fc\u304b\u3089URL\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n\u30b3\u30d4\u30fc\u3057\u305fURL\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\u3053\u306eURL\u306e\u300c4/oIZC2ivBC4zV5subNiN6bou8uowe0Ix9L9TB5jDKUKs.IgN5uoclywkaBrG_bnfDxpI4cUOelgI\u300d\u306e\u90e8\u5206\u3092\u3053\u306e\u5148\u3067\u4f7f\u3044\u307e\u3059\u3002\nhttp://localhost/?code=4/oIZC2ivBC4zV5subNiN6bou8uowe0Ix9L9TB5jDKUKs.IgN5uoclywkaBrG_bnfDxpI4cUOelgI\n\n\n3. \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u53d6\u5f97\n\u4ee5\u4e0b\u306e[]\u3067\u56f2\u3093\u3060\u90e8\u5206\u3092\u81ea\u5206\u306e\u60c5\u5831\u306b\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\ncurl -d client_id=[\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID] -d client_secret=[\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b7\u30fc\u30af\u30ec\u30c3\u30c8] -d redirect_uri=[\u30ea\u30c0\u30a4\u30ec\u30af\u30c8URI] -d grant_type=authorization_code -d code=[Authorization Code] https://accounts.google.com/o/oauth2/token\n\n\u79c1\u306e\u5834\u5408\u3060\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\ncurl -d client_id=127036428910-2cihomq21p413jtu4ebmf4kvefi8v9p1.apps.googleusercontent.com -d client_secret=2KR6kOI2hOs0QSKqqltrkyfi -d redirect_uri=http://localhost -d grant_type=authorization_code -d code=4/oIZC2ivBC4zV5subNiN6bou8uowe0Ix9L9TB5jDKUKs.IgN5uoclywkaBrG_bnfDxpI4cUOelgI https://accounts.google.com/o/oauth2/token\n\n\u4e0a\u8a18\u3092\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u5b9f\u884c\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u69d8\u306a\u3082\u306e\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\n\u4e00\u756a\u4e0b\u306e\u304c\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\u3067\u3059\u3002\n{\n  \"access_token\" : \"ya29.DwGisAjZTMSJH6biEjydYXIp6JaXRmYnh21CrW09XpSZzbyRtlg9xmONE1TD7tDDawQgpTjHgZD0kA\",\n  \"token_type\" : \"Bearer\",\n  \"expires_in\" : 3600,\n  \"refresh_token\" : \"1/djoROZFMLKPHygvCqtREUAnF7ddeG-3mtXagaXwXAUg\"\n}\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u306e\u304c\u51fa\u305f\u5834\u5408\u306f\u306a\u306b\u304b\u6307\u5b9a\u304c\u9593\u9055\u3063\u3066\u307e\u3059\u3002\n{\n  \"error\" : \"invalid_grant\"\n}\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u306e\u304c\u51fa\u305f\u5834\u5408\u306f2.\u306eAuthorization Code\u306e\u53d6\u5f97\u306eURL\u3092\u3082\u3046\u4e00\u56de\u30d6\u30e9\u30a6\u30b6\u306b\u8cbc\u308a\u4ed8\u3051\u3066\u8a8d\u8a3c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u5024\u304c\u5909\u308f\u3063\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\u65b0\u3057\u3044\u5024\u3092\u53d6\u5f97\u3057\u3066\u304b\u3089curl\u30b3\u30de\u30f3\u30c9\u3092\u66f8\u304d\u63db\u3048\u3066\u3082\u3046\u4e00\u56de\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n{\n  \"error\" : \"invalid_grant\",\n  \"error_description\" : \"Code was already redeemed.\"\n}\n\n\n4. \u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u518d\u53d6\u5f97\n\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u306f\u6709\u52b9\u671f\u9650\u304c\u3042\u308b\u3089\u3057\u304f\u3001\u671f\u9650\u304c\u5207\u308c\u305f\u5834\u5408\u306f\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u518d\u53d6\u5f97\u304c\u5fc5\u8981\u3089\u3057\u3044\u3067\u3059\u3002\n\u4ee5\u4e0b\u306e[]\u306e\u90e8\u5206\u3092\u81ea\u5206\u306e\u60c5\u5831\u306b\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\ncurl -d client_id=[\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID] -d client_secret=[\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b7\u30fc\u30af\u30ec\u30c3\u30c8] -d refresh_token=[\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3] -d grant_type=refresh_token https://accounts.google.com/o/oauth2/token\n\n\u79c1\u306e\u5834\u5408\u4ee5\u4e0b\u306e\u69d8\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u308c\u3092\u307e\u305f\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\ncurl -d client_id=127036428910-2cihomq21p413jtu4ebmf4kvefi8v9p1.apps.googleusercontent.com -d client_secret=2KR6kOI2hOs0QSKqqltrkyfi -d refresh_token=1/djoROZFMLKPHygvCqtREUAnF7ddeG-3mtXagaXwXAUg -d grant_type=refresh_token https://accounts.google.com/o/oauth2/token\n\n\u3059\u308b\u3068\u3053\u3093\u306a\u306e\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\n\u3053\u308c\u3067\u3084\u3063\u3068Ruby\u5074\u304b\u3089GoogleDrive\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n{\n  \"access_token\" : \"ya29.DwHCrzGUsuzSUnFUKCHUugHXh3lTbYuBkn0fHk4lA33zxdGiFxT8palk5rvmR4PYlGqhlfFsRWzTBA\",\n  \"token_type\" : \"Bearer\",\n  \"expires_in\" : 3600\n}\n\n\n5. Ruby\u3067Google Drive\u306b\u30a2\u30af\u30bb\u30b9\n\u307e\u305a\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u3066gem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ gem install google_drive\n\n\u4ee5\u4e0b\u306e\u69d8\u306a\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u307e\u3059\u3002\n\ngoogle-api-get-list.rb\nrequire 'google/api_client'\nrequire 'google_drive'\n\nCLIENT_ID = \"127036428910-2cihomq21p413jtu4ebmf4kvefi8v9p1.apps.googleusercontent.com\"\nCLIENT_SECRET = \"2KR6kOI2hOs0QSKqqltrkyfi\"\nREFRESH_TOKEN = \"ya29.DwHCrzGUsuzSUnFUKCHUugHXh3lTbYuBkn0fHk4lA33zxdGiFxT8palk5rvmR4PYlGqhlfFsRWzTBA\"\n\nclient = OAuth2::Client.new(\n    CLIENT_ID, CLIENT_SECRET,\n    :site => \"https://accounts.google.com\",\n    :token_url => \"/o/oauth2/token\",\n    :authorize_url => \"/o/oauth2/auth\"\n)\n\nauth_token = OAuth2::AccessToken.from_hash(client, { :refresh_token => REFRESH_TOKEN, :expires_at => 3600 })\nauth_token = auth_token.refresh!\n\nsession = GoogleDrive.login_with_oauth(auth_token.token)\n\nfor file in session.files\n    puts file.title\nend\n\n\n\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u5b9f\u884c\u3057\u3066\u307f\u308b\u3068\u3001\u3053\u3093\u306a\u304b\u3093\u3058\u306bGoogle Drive\u306b\u3042\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u30ea\u30b9\u30c8\u304c\u51fa\u307e\u3059\u3002\n$ ruby google-api-get-list.rb\nIMG_0456.JPG\nIMG_0454.JPG\nIMG_0455.JPG\nIMG_0451.JPG\n(\u7701\u7565)\n\n\u4ee5\u4e0b\u306e\u90e8\u5206\u3092\n\ngoogle-api-get-list.rb\nfor file in session.files\n    puts file.title\nend\n\n\n\u3053\u3093\u306a\u98a8\u306b\u66f8\u304d\u63db\u3048\u3066\u5b9f\u884c\u3059\u308b\u3068\u3001Google Drive\u306b\u4f5c\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u304c\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u307e\u3059\u3002\n\ngoogle-api-get-list.rb\nfile_name = \"Test\" + Time.now.strftime('%Y-%m-%d_%H:%M:%S') + \".txt\"\nfile = File.open(file_name, 'w')\nfile.puts(\"Test Upload!!\")\nfile.close\n\nsession.upload_from_file(file_name, file_name, :convert => false)\n\n\n\n\u307e\u3068\u3081\n\u3053\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3001Ruby\u3067Google Drive\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u73fe\u72b6\u300c\u3084\u3063\u305f\u30fc\u52d5\u3044\u305f\u30fc\uff01\u300d\u306a\u72b6\u614b\u306a\u305f\u3081\u3001\u7d30\u304b\u3044\u90e8\u5206\u306f\u8abf\u3079\u308c\u3066\u306a\u3044\u3067\u3059\u3002\n\u3053\u308c\u304b\u3089\u8abf\u3079\u307e\u3059\u3002\n\uff0a\u8aac\u660e\u3067\u4f7f\u3063\u3066\u3044\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u306a\u3069\u306f\u524a\u9664\u6e08\u307f\u3067\u3059\u3002\n\n\u53c2\u8003\u30b5\u30a4\u30c8\n\nRuby\u3067GoogleDrive API\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3059\u308b\ngimite/google-drive-ruby\nUsing OAuth 2.0 to Access Google APIs\n\n# \u306f\u3058\u3081\u306b\n\u300c[*Ruby\u306b\u3088\u308b\u30af\u30ed\u30fc\u30e9\u30fc\u958b\u767a\u6280\u6cd5*](http://www.amazon.co.jp/Ruby%E3%81%AB%E3%82%88%E3%82%8B%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%A9%E3%83%BC%E9%96%8B%E7%99%BA%E6%8A%80%E6%B3%95-%E5%B7%A1%E5%9B%9E%E3%83%BB%E8%A7%A3%E6%9E%90%E6%A9%9F%E8%83%BD%E3%81%AE%E5%AE%9F%E8%A3%85%E3%81%A821%E3%81%AE%E9%81%8B%E7%94%A8%E4%BE%8B-%E3%82%8B%E3%81%B3%E3%81%8D%E3%81%A1/dp/4797380357/ref=sr_1_1?s=books&ie=UTF8&qid=1422921103&sr=1-1&keywords=ruby+%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%A9%E3%83%BC)\u300d\u3092\u8aad\u307f\u7d42\u308f\u3063\u3066\u3001\u30af\u30ed\u30fc\u30e9\u30fc\u3092\u4f5c\u3063\u3066\u307f\u305f\u304f\u306a\u308a\u307e\u3057\u305f\u3002\uff08\u307e\u3060\u4f5c\u3063\u3066\u307e\u305b\u3093\uff09\n\u597d\u304d\u306a\u30b8\u30e3\u30f3\u30eb\u306e\u753b\u50cf\u3092\u96c6\u3081\u3066\u304f\u308c\u308b\u3082\u306e\u3092\u4f5c\u308d\u3046\u3068\u601d\u3063\u305f\u3082\u306e\u306e\u3001\u30ed\u30fc\u30ab\u30eb\u306b\u753b\u50cf\u304c\u305f\u307e\u308b\u3068\u5acc\u306a\u306e\u3067\u3088\u304f\u4f7f\u3046Google Drive\u306b\u4e0a\u3052\u3068\u3044\u3066\u6b32\u3057\u3044\u3068\u601d\u3063\u3066\u8abf\u3079\u3066\u307f\u305f\u3089API\u304c\u3042\u308b\u307f\u305f\u3044\u306a\u306e\u3067\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n### \u74b0\u5883\n* MacBook Air\uff08Yosemite\uff09\n* Ruby\uff082.1.2\uff09\n\n# \u624b\u9806\n\n### 1. Google Developers Console\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u306a\u3069\u306e\u53d6\u5f97\n[*Google Developers Console*](https://console.developers.google.com/project)\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u300c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u300d\u3092\u62bc\u4e0b\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-02-03 19.54.20.png](https://qiita-image-store.s3.amazonaws.com/0/48912/a027567f-067c-063d-939e-e829398d7ba7.png)\n\n\u300c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u300d\u306b\u597d\u304d\u306a\u540d\u524d\u3092\u4ed8\u3051\u307e\u3059\u3002\n\u300c\u30d7\u30ed\u30b8\u30a7\u30af\u30c8ID\u300d\u306f\u305d\u306e\u307e\u307e\u3067\u3082\u5927\u4e08\u592b\u3067\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-02-03 19.54.55.png](https://qiita-image-store.s3.amazonaws.com/0/48912/d63689d7-5afc-0e8c-3b45-36eaf165d535.png)\n\nAPI\u3068\u8a8d\u8a3c\u3000\uff1e\u3000API\u3000\u3092\u9078\u629e\u3057\u3001\u6709\u52b9\u306aAPI\u304c\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u300cDrive API\u300d\u3068\u300cDrive SDK\u300d\u304cOFF\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067ON\u306b\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-02-03 19.56.51.png](https://qiita-image-store.s3.amazonaws.com/0/48912/ab95666d-c899-3beb-a172-fbeea45b28ca.png)\n\nAPI\u3068\u8a8d\u8a3c\u3000\uff1e\u3000\u8a8d\u8a3c\u60c5\u5831\u3000\u3092\u9078\u629e\u3057\u3001\u300c\u65b0\u3057\u3044\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3092\u4f5c\u6210\u300d\u3092\u62bc\u4e0b\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-02-03 19.57.18.png](https://qiita-image-store.s3.amazonaws.com/0/48912/292e4b5c-37e0-19d9-6afa-c698ec5fad3b.png)\n\n\u300c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u300d\u3092\u9078\u629e\u3057\u3001\u300c\u540c\u610f\u753b\u9762\u3092\u8a2d\u5b9a\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-02-03 19.57.44.png](https://qiita-image-store.s3.amazonaws.com/0/48912/e5273b9d-386d-1703-bcac-f8ee4b40b1b7.png)\n\n\u300c\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u300d\u3092\u9078\u629e\u3057\u3001\u300c\u30b5\u30fc\u30d3\u30b9\u540d\u300d\u3092\u5165\u529b\u3057\u3066\u300c\u4fdd\u5b58\u300d\u3092\u62bc\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-02-03 19.58.17.png](https://qiita-image-store.s3.amazonaws.com/0/48912/3c522a7b-8326-592f-8118-148aa74154c0.png)\n\n\u300c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u300d\u3092\u9078\u629e\u3057\u3001\u300c\u305d\u306e\u4ed6\u300d\u3092\u9078\u629e\u3057\u3066\u300c\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3092\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-02-03 19.58.41.png](https://qiita-image-store.s3.amazonaws.com/0/48912/06768d07-ef99-4f80-ac43-d5ee3857515e.png)\n\n\u3059\u308b\u3068\u3053\u306e\u3088\u3046\u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u306a\u3069\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-02-03 19.59.13.png](https://qiita-image-store.s3.amazonaws.com/0/48912/d2865d8a-f09c-ac3e-2859-4f7c8019f52f.png)\n\n\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u306f\u3053\u306e\u5024\u3092\u4f7f\u7528\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n```bash\n[\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID]\n127036428910-2cihomq21p413jtu4ebmf4kvefi8v9p1.apps.googleusercontent.com\n\n[\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b7\u30fc\u30af\u30ec\u30c3\u30c8]\n2KR6kOI2hOs0QSKqqltrkyfi\n\n[\u30ea\u30c0\u30a4\u30ec\u30af\u30c8URI]\nhttp://localhost\n```\n\n\n### 2. Authorization Code\u306e\u53d6\u5f97\n\n\u4ee5\u4e0b\u306eURL\u306e\u300c\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u300d\u3068\u300c\u30ea\u30c0\u30a4\u30ec\u30af\u30c8URI\u300d\u306b\u3055\u3063\u304dGoogle Developers Console\u3067\u53d6\u5f97\u3057\u305f\u60c5\u5831\u3068\u7f6e\u304d\u63db\u3048\u307e\u3059\u3002\n\n```bash\nhttps://accounts.google.com/o/oauth2/auth\n?client_id=\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\n&redirect_uri=\u30ea\u30c0\u30a4\u30ec\u30af\u30c8URI\n&scope=https://www.googleapis.com/auth/drive\n&response_type=code\n```\n\n\u79c1\u306e\u5834\u5408\u3060\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\n```bash\nhttps://accounts.google.com/o/oauth2/auth\n?client_id=127036428910-2cihomq21p413jtu4ebmf4kvefi8v9p1.apps.googleusercontent.com\n&redirect_uri=http://localhost\n&scope=https://www.googleapis.com/auth/drive\n&response_type=code\n```\n\n\u30d6\u30e9\u30a6\u30b6\u3092\u7acb\u3061\u4e0a\u3052\u3066\u3001\u4e0a\u8a18\u306eURL\u3092\u8cbc\u308a\u4ed8\u3051\u3066\u30a8\u30f3\u30bf\u30fc\u3092\u62bc\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-02-03 20.06.46.png](https://qiita-image-store.s3.amazonaws.com/0/48912/c854643b-ee2f-f1f6-fbda-87085fc80336.png)\n\n\u3059\u308b\u3068\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30ed\u30b0\u30a4\u30f3\u3092\u6c42\u3081\u3089\u308c\u308b\u306e\u3067\u3001\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3044Google Drive\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\u4e0b\u306e\u3088\u3046\u306a\u753b\u9762\u306b\u306a\u308b\u306e\u3067\u300c\u627f\u8a8d\u3059\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-02-03 20.07.34.png](https://qiita-image-store.s3.amazonaws.com/0/48912/eff07198-7720-d888-2a8f-e97baec73b7d.png)\n\n\u30da\u30fc\u30b8\u304c\u958b\u3051\u306a\u3044\u3068\u51fa\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-02-03 20.07.55.png](https://qiita-image-store.s3.amazonaws.com/0/48912/9ec8adf9-e0b2-453d-c7b0-b32aa35f8c45.png)\n\n\u3053\u306e\u30da\u30fc\u30b8\u306e\u30a2\u30c9\u30ec\u30b9\u30d0\u30fc\u304b\u3089URL\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-02-03 20.08.07.png](https://qiita-image-store.s3.amazonaws.com/0/48912/68902e33-0f9c-458f-8f5e-d91028c7f4f0.png)\n\n\u30b3\u30d4\u30fc\u3057\u305fURL\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\u3053\u306eURL\u306e\u300c4/oIZC2ivBC4zV5subNiN6bou8uowe0Ix9L9TB5jDKUKs.IgN5uoclywkaBrG_bnfDxpI4cUOelgI\u300d\u306e\u90e8\u5206\u3092\u3053\u306e\u5148\u3067\u4f7f\u3044\u307e\u3059\u3002\n\n```bash\nhttp://localhost/?code=4/oIZC2ivBC4zV5subNiN6bou8uowe0Ix9L9TB5jDKUKs.IgN5uoclywkaBrG_bnfDxpI4cUOelgI\n```\n\n### 3. \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u53d6\u5f97\n\n\u4ee5\u4e0b\u306e[]\u3067\u56f2\u3093\u3060\u90e8\u5206\u3092\u81ea\u5206\u306e\u60c5\u5831\u306b\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\n```bash\ncurl -d client_id=[\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID] -d client_secret=[\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b7\u30fc\u30af\u30ec\u30c3\u30c8] -d redirect_uri=[\u30ea\u30c0\u30a4\u30ec\u30af\u30c8URI] -d grant_type=authorization_code -d code=[Authorization Code] https://accounts.google.com/o/oauth2/token\n```\n\n\u79c1\u306e\u5834\u5408\u3060\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\n```bash\ncurl -d client_id=127036428910-2cihomq21p413jtu4ebmf4kvefi8v9p1.apps.googleusercontent.com -d client_secret=2KR6kOI2hOs0QSKqqltrkyfi -d redirect_uri=http://localhost -d grant_type=authorization_code -d code=4/oIZC2ivBC4zV5subNiN6bou8uowe0Ix9L9TB5jDKUKs.IgN5uoclywkaBrG_bnfDxpI4cUOelgI https://accounts.google.com/o/oauth2/token\n```\n\n\u4e0a\u8a18\u3092\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u5b9f\u884c\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u69d8\u306a\u3082\u306e\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\n\u4e00\u756a\u4e0b\u306e\u304c\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\u3067\u3059\u3002\n\n```bash\n{\n  \"access_token\" : \"ya29.DwGisAjZTMSJH6biEjydYXIp6JaXRmYnh21CrW09XpSZzbyRtlg9xmONE1TD7tDDawQgpTjHgZD0kA\",\n  \"token_type\" : \"Bearer\",\n  \"expires_in\" : 3600,\n  \"refresh_token\" : \"1/djoROZFMLKPHygvCqtREUAnF7ddeG-3mtXagaXwXAUg\"\n}\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u306e\u304c\u51fa\u305f\u5834\u5408\u306f\u306a\u306b\u304b\u6307\u5b9a\u304c\u9593\u9055\u3063\u3066\u307e\u3059\u3002\n\n```bash\n{\n  \"error\" : \"invalid_grant\"\n}\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u306e\u304c\u51fa\u305f\u5834\u5408\u306f2.\u306eAuthorization Code\u306e\u53d6\u5f97\u306eURL\u3092\u3082\u3046\u4e00\u56de\u30d6\u30e9\u30a6\u30b6\u306b\u8cbc\u308a\u4ed8\u3051\u3066\u8a8d\u8a3c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u5024\u304c\u5909\u308f\u3063\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\u65b0\u3057\u3044\u5024\u3092\u53d6\u5f97\u3057\u3066\u304b\u3089curl\u30b3\u30de\u30f3\u30c9\u3092\u66f8\u304d\u63db\u3048\u3066\u3082\u3046\u4e00\u56de\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash\n{\n  \"error\" : \"invalid_grant\",\n  \"error_description\" : \"Code was already redeemed.\"\n}\n```\n\n### 4. \u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u518d\u53d6\u5f97\n\n\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306b\u306f\u6709\u52b9\u671f\u9650\u304c\u3042\u308b\u3089\u3057\u304f\u3001\u671f\u9650\u304c\u5207\u308c\u305f\u5834\u5408\u306f\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\u304b\u3089\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u518d\u53d6\u5f97\u304c\u5fc5\u8981\u3089\u3057\u3044\u3067\u3059\u3002\n\n\u4ee5\u4e0b\u306e[]\u306e\u90e8\u5206\u3092\u81ea\u5206\u306e\u60c5\u5831\u306b\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\n```bash\ncurl -d client_id=[\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID] -d client_secret=[\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b7\u30fc\u30af\u30ec\u30c3\u30c8] -d refresh_token=[\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3] -d grant_type=refresh_token https://accounts.google.com/o/oauth2/token\n```\n\n\u79c1\u306e\u5834\u5408\u4ee5\u4e0b\u306e\u69d8\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u308c\u3092\u307e\u305f\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```bash\ncurl -d client_id=127036428910-2cihomq21p413jtu4ebmf4kvefi8v9p1.apps.googleusercontent.com -d client_secret=2KR6kOI2hOs0QSKqqltrkyfi -d refresh_token=1/djoROZFMLKPHygvCqtREUAnF7ddeG-3mtXagaXwXAUg -d grant_type=refresh_token https://accounts.google.com/o/oauth2/token\n```\n\n\u3059\u308b\u3068\u3053\u3093\u306a\u306e\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\n\u3053\u308c\u3067\u3084\u3063\u3068Ruby\u5074\u304b\u3089GoogleDrive\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n\n```bash\n{\n  \"access_token\" : \"ya29.DwHCrzGUsuzSUnFUKCHUugHXh3lTbYuBkn0fHk4lA33zxdGiFxT8palk5rvmR4PYlGqhlfFsRWzTBA\",\n  \"token_type\" : \"Bearer\",\n  \"expires_in\" : 3600\n}\n```\n\n### 5. Ruby\u3067Google Drive\u306b\u30a2\u30af\u30bb\u30b9\n\n\u307e\u305a\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u3066gem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```bash\n$ gem install google_drive\n```\n\n\u4ee5\u4e0b\u306e\u69d8\u306a\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u307e\u3059\u3002\n\n```rb:google-api-get-list.rb\nrequire 'google/api_client'\nrequire 'google_drive'\n\nCLIENT_ID = \"127036428910-2cihomq21p413jtu4ebmf4kvefi8v9p1.apps.googleusercontent.com\"\nCLIENT_SECRET = \"2KR6kOI2hOs0QSKqqltrkyfi\"\nREFRESH_TOKEN = \"ya29.DwHCrzGUsuzSUnFUKCHUugHXh3lTbYuBkn0fHk4lA33zxdGiFxT8palk5rvmR4PYlGqhlfFsRWzTBA\"\n\nclient = OAuth2::Client.new(\n\tCLIENT_ID, CLIENT_SECRET,\n\t:site => \"https://accounts.google.com\",\n\t:token_url => \"/o/oauth2/token\",\n\t:authorize_url => \"/o/oauth2/auth\"\n)\n\nauth_token = OAuth2::AccessToken.from_hash(client, { :refresh_token => REFRESH_TOKEN, :expires_at => 3600 })\nauth_token = auth_token.refresh!\n\nsession = GoogleDrive.login_with_oauth(auth_token.token)\n\nfor file in session.files\n\tputs file.title\nend\n```\n\n\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u5b9f\u884c\u3057\u3066\u307f\u308b\u3068\u3001\u3053\u3093\u306a\u304b\u3093\u3058\u306bGoogle Drive\u306b\u3042\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u30ea\u30b9\u30c8\u304c\u51fa\u307e\u3059\u3002\n\n```bash\n$ ruby google-api-get-list.rb\nIMG_0456.JPG\nIMG_0454.JPG\nIMG_0455.JPG\nIMG_0451.JPG\n(\u7701\u7565)\n```\n\n\u4ee5\u4e0b\u306e\u90e8\u5206\u3092\n\n```rb:google-api-get-list.rb\nfor file in session.files\n\tputs file.title\nend\n```\n\n\u3053\u3093\u306a\u98a8\u306b\u66f8\u304d\u63db\u3048\u3066\u5b9f\u884c\u3059\u308b\u3068\u3001Google Drive\u306b\u4f5c\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u304c\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u307e\u3059\u3002\n\n```rb:google-api-get-list.rb\nfile_name = \"Test\" + Time.now.strftime('%Y-%m-%d_%H:%M:%S') + \".txt\"\nfile = File.open(file_name, 'w')\nfile.puts(\"Test Upload!!\")\nfile.close\n\nsession.upload_from_file(file_name, file_name, :convert => false)\n```\n\n# \u307e\u3068\u3081\n\n\u3053\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3001Ruby\u3067Google Drive\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u73fe\u72b6\u300c\u3084\u3063\u305f\u30fc\u52d5\u3044\u305f\u30fc\uff01\u300d\u306a\u72b6\u614b\u306a\u305f\u3081\u3001\u7d30\u304b\u3044\u90e8\u5206\u306f\u8abf\u3079\u308c\u3066\u306a\u3044\u3067\u3059\u3002\n\u3053\u308c\u304b\u3089\u8abf\u3079\u307e\u3059\u3002\n\n\uff0a\u8aac\u660e\u3067\u4f7f\u3063\u3066\u3044\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u306a\u3069\u306f\u524a\u9664\u6e08\u307f\u3067\u3059\u3002\n\n# \u53c2\u8003\u30b5\u30a4\u30c8\n\n* [*Ruby\u3067GoogleDrive API\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3059\u308b*](http://tagamidaiki.com/ruby-google-drive-api-accesstoken/)\n* [*gimite/google-drive-ruby*](https://github.com/gimite/google-drive-ruby)\n* [*Using OAuth 2.0 to Access Google APIs*](https://developers.google.com/accounts/docs/OAuth2?hl=ja#serviceaccount)\n", "tags": ["GoogleDrive", "googleapi", "Ruby2.1.2"]}