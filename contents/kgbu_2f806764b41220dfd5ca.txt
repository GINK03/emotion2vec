{"context": " More than 1 year has passed since last update.\n\nDISCLAIMER\n\u307e\u305a\u3001official\u304b\u3064\u6700\u65b0\u306e\u60c5\u5831\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nRunning Your Own Application at Startup\u3000http://wiki.qnap.com/wiki/Autorun.sh\n\u4ee5\u4e0b\u3001\u81ea\u5206\u7528\u306e\u30e1\u30e2\u306e\u6563\u9038\u3092\u9632\u3050\u305f\u3081\u3001\u3082\u3057\u304f\u306f\u8ab0\u304b\u306e\u30d2\u30f3\u30c8\u306b\u306a\u308c\u3070\u3068\u6587\u66f8\u5316\u3057\u307e\u3057\u305f\u3002\n\u307e\u305f\u3001\u5b9f\u969b\u306e\u8a2d\u5b9a\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u554f\u984c\u306a\u3069\u304c\u3042\u308a\u3001\u305d\u306e\u307e\u307e\u516c\u958b\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u9069\u5f53\u306b\u7de8\u96c6\u3057\u3066\u3042\u308b\u305f\u3081\u3001 \u3053\u306e\u307e\u307e\u3067\u306f\u6b63\u3057\u3044\u52d5\u4f5c\u306f\u3057\u306a\u3044\u53ef\u80fd\u6027\u304c\u9ad8\u3044\u3067\u3059\u3002 \n\u3053\u306e\u30e1\u30e2\u3092\u8a66\u3057\u305f\u306e\u306fQNAP Systems Inc\u306eTS-220\u3068\u3044\u3046NAS\u3067\u3059\u3002\nhttp://www.qnap.com/jp/index.php?lang=jp&sn=699&c=328&sc=601&t=610&n=18427\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306fQTS 4.0 (\u4e2d\u8eab\u306fLinux\u3067uname -r\u3059\u308b\u30682.6.33.2\u3068\u3044\u3046\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\uff09\n\n\u305d\u3082\u305d\u3082\nQNAP\u306eNAS\u306eOS\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u306e\u8a2d\u5b9a\u3092\u518d\u8d77\u52d5\u306e\u5ea6\u306b\u521d\u671f\u5316\u3057\u3066\u3057\u307e\u3046\u3088\u3046\u3067\u3059\uff08\u81ea\u5206\u306f\u307e\u3060\u8a66\u3057\u3066\u3044\u306a\u3044\u304c\u3001\u6b21\u306e\u30b5\u30a4\u30c8\u306a\u3069\u306b\u8a18\u8f09\u304c\u3042\u308a\u307e\u3059\u3002 http://motd.jugem.jp/?eid=188 \u305f\u3060\u3053\u308c\u306f\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u8a71\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002)\n\u3060\u304b\u3089ssh\u3084telnet\u3067\u63a5\u7d9a\u3057\u3066\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u3066\u3082\u3001\u518d\u8d77\u52d5\u3059\u308b\u3068\u30aa\u30b8\u30e3\u30f3\u3002\u9006\u306b\u8003\u3048\u308c\u3070\u3001\u3069\u3093\u3060\u3051\u3044\u3058\u3063\u3066\u3081\u3061\u3083\u3081\u3061\u3083\u306b\u3057\u3066\u3082\u518d\u8d77\u52d5\u3059\u308c\u3070\u305d\u308c\u306a\u308a\u306b\u52d5\u304f\uff08\u304b\u3082\u3057\u308c\u306a\u3044\uff09\u3068\u3044\u3046fool proof\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\uff08\u73fe\u5728\u306eQTS 4.0\u3067\u3082\u305d\u3046\u304b\u3069\u3046\u304b\u306f\u4fdd\u8a3c\u3067\u304d\u307e\u305b\u3093\uff09\n\u306a\u306e\u3067\u3001\u8a2d\u5b9a\u3092\u3044\u3058\u308b\u5834\u5408\u306b\u306f\n\n\u521d\u671f\u5316\u3055\u308c\u306a\u3044\u9818\u57df\u3092\u78ba\u4fdd\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u521d\u671f\u5316\u3055\u308c\u306a\u3044\u9818\u57df\u306b\u30b3\u30d4\u30fc\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30b3\u30d4\u30fc\u3092\u5909\u66f4\u3057\u3066\uff08\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3057\u3068\u304f\u3079\u304d\uff09\u3001\u5143\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u4e0a\u66f8\u304d\u3059\u308b\n\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u307e\u305f\u306freconfig\u3057\u3066\u52d5\u4f5c\u3092\u78ba\u8a8d\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u3001\u521d\u671f\u5316\u3055\u308c\u306a\u3044\u9818\u57df\u306b\u3042\u308b\u3082\u306e\u306b\u5dee\u3057\u66ff\u3048\u308bshell\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\nNAS\u306e\u8d77\u52d5\u6642\u306b\u5b9f\u884c\u3055\u308c\u308b\u30b3\u30de\u30f3\u30c9\u3092\u30b5\u30fc\u30d3\u30b9\u6bce\u306b\u6307\u5b9a\u3067\u304d\u308b/etc/config/qpkg.conf\u306bftp\u7528\u306e\u9805\u76ee\u3092\u8ffd\u52a0\u3059\u308b\n\n\n\u305d\u308c\u3067\u306f\u9806\u3092\u8ffd\u3063\u3066\n\n\u521d\u671f\u5316\u3055\u308c\u306a\u3044\u9818\u57df\u3092\u78ba\u4fdd\nmkdir -p /share/MD0_DATA/.dpkg/autorun\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u521d\u671f\u5316\u3055\u308c\u306a\u3044\u9818\u57df\u306b\u30b3\u30d4\u30fc\nNOW=`date +%Y%m%d-%H%M%S`\ncp /etc/config/proftpd.conf /share/MD0_DATA/.dpkg/autorun/proftpd.conf.$NOW.backup\ncp /etc/config/proftpd.conf /share/MD0_DATA/.dpkg/autorun/proftpd.conf\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30b3\u30d4\u30fc\u3092\u5909\u66f4\u3057\u3066\uff08\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3057\u3068\u304f\u3079\u304d\uff09\u3001\u5143\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u4e0a\u66f8\u304d\u3059\u308b\nvi /share/MD0_DATA/.dpkg/autorun/proftpd.conf\ncp /share/MD0_DATA/.dpkg/autorun/proftpd.conf /etc/config/proftpd.conf\n\n\n\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u307e\u305f\u306freconfig\u3057\u3066\u52d5\u4f5c\u3092\u78ba\u8a8d\n\u518d\u8d77\u52d5\n/etc/init.d/ftp.sh restart\n\nreconfig (\u8a2d\u5b9a\u306ereload\uff09\n/etc/init.d/ftp.sh reconfig\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u3001\u521d\u671f\u5316\u3055\u308c\u306a\u3044\u9818\u57df\u306b\u3042\u308b\u3082\u306e\u306b\u5dee\u3057\u66ff\u3048\u308bshell\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\nvi /share/MD0_DATA/.dpkg/autorun/setupftp.sh\n\n\u5185\u5bb9\n#!/bin/sh\ncp /etc/config/proftpd.conf /share/MD0_DATA/.dpkg/autorun/proftpd.conf.`/bin/date +%Y%m%d%H%M%S`.boot.backup\ncp /share/MD0_DATA/.dpkg/autorun/proftpd.conf /etc/config/proftpd.conf\n/etc/init.d/ftp.sh restart\n\n\u5b9f\u884c\u53ef\u80fd\u306a\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\nchmod +x /share/MD0_DATA/.dpkg/autorun/setupftp.sh                                                                                                         \n\n\nNAS\u306e\u8d77\u52d5\u6642\u306b\u5b9f\u884c\u3055\u308c\u308b\u30b3\u30de\u30f3\u30c9\u3092\u30b5\u30fc\u30d3\u30b9\u6bce\u306b\u6307\u5b9a\u3067\u304d\u308b/etc/config/qpkg.conf\u306bftp\u7528\u306e\u9805\u76ee\u3092\u8ffd\u52a0\u3059\u308b\n[autorun]\nName = autorun\nVersion = 0.1\nAuthor = kgbu\nDate = 2014-07-06\nShell = /share/MD0_DATA/.qpkg/autorun/setupftp.sh\nInstall_Path = /share/MD0_DATA/.qpkg/autorun\nQPKG_File = autorun.qpkg\nEnable = TRUE\n\n\n\u3069\u3093\u306a\u3053\u3068\u304c\u3057\u305f\u304b\u3063\u305f\u304b\n\u6ce8\u610f\uff01\uff09\u4ee5\u4e0b\u306e\u5909\u66f4\u306f\u4ed6\u306e\u30b5\u30fc\u30d3\u30b9\u3068\u306e\u6574\u5408\u6027\u3092\u8003\u3048\u308c\u3070\u5b9f\u65bd\u3059\u3079\u304d\u3067\u306f\u306a\u304f\u3001\u305f\u307e\u305f\u307eFTP\u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066\u3060\u3051\u904b\u7528\u3059\u308b\u30b1\u30fc\u30b9\u3060\u3063\u305f\u306e\u3067\u5b9f\u65bd\u3057\u305f\u3002\n\nUmask\u304c000\u306a\u306e\u304c\u6c17\u6301\u3061\u60aa\u304b\u3063\u305f\u306e\u3067\u3001\u5909\u3048\u305f\u304b\u3063\u305f\u3002(\u305d\u308c\u3092\u3044\u3046\u306a\u3089RootLogin on\u3082\u5909\u3048\u305f\u3044\u3067\u3059\u304c\uff09\u305f\u3060\u3001\u3053\u308c\u3092\u5909\u3048\u305f\u5834\u5408\u306b\u3001\u4ed6\u306e\u30b5\u30fc\u30d3\u30b9\u3068\u306e\u6574\u5408\u6027\u304c\u4fdd\u305f\u308c\u308b\u304b\u306f\u7591\u554f\u3067\u3059\u3002\nFTP\u306e\u7279\u6a29\u30e6\u30fc\u30b6\u30fc\uff08\u4f8b\u3048\u3070 ftpadmin \uff09\u304c\u3001\u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5185\u5bb9\u3092\u8aad\u307f\u66f8\u304d\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3064\u3064\u3001\u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306fchroot(proftpd\u306e\u5834\u5408\u306fDefaultRoot\u306e\u8a2d\u5b9a)\u3055\u308c\u305f\u307e\u307e\u306b\u3057\u305f\u304b\u3063\u305f\u3002\u3053\u308c\u306fFTP\u306e\u7279\u6a29\u30e6\u30fc\u30b6\u30fc\u306e\u5c5e\u3059\u308bgroup\u3092DefaultRoot\u3067\u72ec\u81ea\u306e\u8a2d\u5b9a\u306b\u3057\u3066\u3001\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u8a2d\u5b9a(/etc/passwd)\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u5b9f\u73fe\u3067\u304d\u308b\u3002\n\nDefaultRoot ~ ftpadmin\nDefaultRoot /share\n\n\u3068\u3053\u308d\u3067\u3001\u3053\u306eNAS\u306eproftpd\u3067\u306f\u3001chroot(DefaultRoot\u3092\u6307\u5b9a)\u3057\u305f\u5834\u5408\u3001\u30ed\u30b0\u30a4\u30f3\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u66f8\u304d\u8fbc\u307f\u304c\u3067\u304d\u306a\u3044\u3002\u30ed\u30b0\u30a4\u30f3\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092/etc/passwd\u3092\u3044\u3058\u3063\u3066\u3044\u308d\u3044\u308d\u8a2d\u5b9a\u3057\u3066\u307f\u305f\u304c\u30c0\u30e1\u3060\u3063\u305f\u3002\n\u3053\u306e\u4ef6\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u3067\u3082\u6307\u6458\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\nhttp://www.big-55.com/2013/02/qnap_ftps%E3%81%A7%E5%A4%96%E9%83%A8%E3%81%8B%E3%82%89%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9_proftpd-conf%E3%82%92%E3%81%84%E3%81%98%E3%82%8B/\n\n# DISCLAIMER\n\u307e\u305a\u3001official\u304b\u3064\u6700\u65b0\u306e\u60c5\u5831\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nRunning Your Own Application at Startup\u3000http://wiki.qnap.com/wiki/Autorun.sh\n\n\u4ee5\u4e0b\u3001\u81ea\u5206\u7528\u306e\u30e1\u30e2\u306e\u6563\u9038\u3092\u9632\u3050\u305f\u3081\u3001\u3082\u3057\u304f\u306f\u8ab0\u304b\u306e\u30d2\u30f3\u30c8\u306b\u306a\u308c\u3070\u3068\u6587\u66f8\u5316\u3057\u307e\u3057\u305f\u3002\n\u307e\u305f\u3001\u5b9f\u969b\u306e\u8a2d\u5b9a\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u554f\u984c\u306a\u3069\u304c\u3042\u308a\u3001\u305d\u306e\u307e\u307e\u516c\u958b\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u9069\u5f53\u306b\u7de8\u96c6\u3057\u3066\u3042\u308b\u305f\u3081\u3001 __\u3053\u306e\u307e\u307e\u3067\u306f\u6b63\u3057\u3044\u52d5\u4f5c\u306f\u3057\u306a\u3044\u53ef\u80fd\u6027\u304c\u9ad8\u3044\u3067\u3059\u3002__ \n\n\u3053\u306e\u30e1\u30e2\u3092\u8a66\u3057\u305f\u306e\u306fQNAP Systems Inc\u306eTS-220\u3068\u3044\u3046NAS\u3067\u3059\u3002\nhttp://www.qnap.com/jp/index.php?lang=jp&sn=699&c=328&sc=601&t=610&n=18427\n\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306fQTS 4.0 (\u4e2d\u8eab\u306fLinux\u3067```uname -r```\u3059\u308b\u30682.6.33.2\u3068\u3044\u3046\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\uff09\n\n# \u305d\u3082\u305d\u3082\nQNAP\u306eNAS\u306eOS\u306f\u3001\u30b5\u30fc\u30d3\u30b9\u306e\u8a2d\u5b9a\u3092\u518d\u8d77\u52d5\u306e\u5ea6\u306b\u521d\u671f\u5316\u3057\u3066\u3057\u307e\u3046\u3088\u3046\u3067\u3059\uff08\u81ea\u5206\u306f\u307e\u3060\u8a66\u3057\u3066\u3044\u306a\u3044\u304c\u3001\u6b21\u306e\u30b5\u30a4\u30c8\u306a\u3069\u306b\u8a18\u8f09\u304c\u3042\u308a\u307e\u3059\u3002 http://motd.jugem.jp/?eid=188 \u305f\u3060\u3053\u308c\u306f\u53e4\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u8a71\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002)\n\u3060\u304b\u3089ssh\u3084telnet\u3067\u63a5\u7d9a\u3057\u3066\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u3066\u3082\u3001\u518d\u8d77\u52d5\u3059\u308b\u3068\u30aa\u30b8\u30e3\u30f3\u3002\u9006\u306b\u8003\u3048\u308c\u3070\u3001\u3069\u3093\u3060\u3051\u3044\u3058\u3063\u3066\u3081\u3061\u3083\u3081\u3061\u3083\u306b\u3057\u3066\u3082\u518d\u8d77\u52d5\u3059\u308c\u3070\u305d\u308c\u306a\u308a\u306b\u52d5\u304f\uff08\u304b\u3082\u3057\u308c\u306a\u3044\uff09\u3068\u3044\u3046fool proof\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\uff08\u73fe\u5728\u306eQTS 4.0\u3067\u3082\u305d\u3046\u304b\u3069\u3046\u304b\u306f\u4fdd\u8a3c\u3067\u304d\u307e\u305b\u3093\uff09\n\n\u306a\u306e\u3067\u3001\u8a2d\u5b9a\u3092\u3044\u3058\u308b\u5834\u5408\u306b\u306f\n\n1. \u521d\u671f\u5316\u3055\u308c\u306a\u3044\u9818\u57df\u3092\u78ba\u4fdd\n1. \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u521d\u671f\u5316\u3055\u308c\u306a\u3044\u9818\u57df\u306b\u30b3\u30d4\u30fc\n1. \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30b3\u30d4\u30fc\u3092\u5909\u66f4\u3057\u3066\uff08\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3057\u3068\u304f\u3079\u304d\uff09\u3001\u5143\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u4e0a\u66f8\u304d\u3059\u308b\n1. \u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u307e\u305f\u306freconfig\u3057\u3066\u52d5\u4f5c\u3092\u78ba\u8a8d\n1. \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u3001\u521d\u671f\u5316\u3055\u308c\u306a\u3044\u9818\u57df\u306b\u3042\u308b\u3082\u306e\u306b\u5dee\u3057\u66ff\u3048\u308bshell\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\n1. NAS\u306e\u8d77\u52d5\u6642\u306b\u5b9f\u884c\u3055\u308c\u308b\u30b3\u30de\u30f3\u30c9\u3092\u30b5\u30fc\u30d3\u30b9\u6bce\u306b\u6307\u5b9a\u3067\u304d\u308b```/etc/config/qpkg.conf```\u306bftp\u7528\u306e\u9805\u76ee\u3092\u8ffd\u52a0\u3059\u308b\n\n# \u305d\u308c\u3067\u306f\u9806\u3092\u8ffd\u3063\u3066\n\n## \u521d\u671f\u5316\u3055\u308c\u306a\u3044\u9818\u57df\u3092\u78ba\u4fdd\n\n```\nmkdir -p /share/MD0_DATA/.dpkg/autorun\n```\n\n## \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u521d\u671f\u5316\u3055\u308c\u306a\u3044\u9818\u57df\u306b\u30b3\u30d4\u30fc\n\n```\nNOW=`date +%Y%m%d-%H%M%S`\ncp /etc/config/proftpd.conf /share/MD0_DATA/.dpkg/autorun/proftpd.conf.$NOW.backup\ncp /etc/config/proftpd.conf /share/MD0_DATA/.dpkg/autorun/proftpd.conf\n```\n\n## \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30b3\u30d4\u30fc\u3092\u5909\u66f4\u3057\u3066\uff08\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3057\u3068\u304f\u3079\u304d\uff09\u3001\u5143\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u4e0a\u66f8\u304d\u3059\u308b\n\n```\nvi /share/MD0_DATA/.dpkg/autorun/proftpd.conf\ncp /share/MD0_DATA/.dpkg/autorun/proftpd.conf /etc/config/proftpd.conf\n```\n\n## \u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u307e\u305f\u306freconfig\u3057\u3066\u52d5\u4f5c\u3092\u78ba\u8a8d\n\n\u518d\u8d77\u52d5\n\n```\n/etc/init.d/ftp.sh restart\n```\n\nreconfig (\u8a2d\u5b9a\u306ereload\uff09\n\n```\n/etc/init.d/ftp.sh reconfig\n```\n\n## \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u3001\u521d\u671f\u5316\u3055\u308c\u306a\u3044\u9818\u57df\u306b\u3042\u308b\u3082\u306e\u306b\u5dee\u3057\u66ff\u3048\u308bshell\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\n\n```\nvi /share/MD0_DATA/.dpkg/autorun/setupftp.sh\n```\n\n\u5185\u5bb9\n\n```{bash}\n#!/bin/sh\ncp /etc/config/proftpd.conf /share/MD0_DATA/.dpkg/autorun/proftpd.conf.`/bin/date +%Y%m%d%H%M%S`.boot.backup\ncp /share/MD0_DATA/.dpkg/autorun/proftpd.conf /etc/config/proftpd.conf\n/etc/init.d/ftp.sh restart\n```\n\n\u5b9f\u884c\u53ef\u80fd\u306a\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\n\n```\nchmod +x /share/MD0_DATA/.dpkg/autorun/setupftp.sh                                                                                                         \n```\n\n## NAS\u306e\u8d77\u52d5\u6642\u306b\u5b9f\u884c\u3055\u308c\u308b\u30b3\u30de\u30f3\u30c9\u3092\u30b5\u30fc\u30d3\u30b9\u6bce\u306b\u6307\u5b9a\u3067\u304d\u308b/etc/config/qpkg.conf\u306bftp\u7528\u306e\u9805\u76ee\u3092\u8ffd\u52a0\u3059\u308b\n\n```\n[autorun]\nName = autorun\nVersion = 0.1\nAuthor = kgbu\nDate = 2014-07-06\nShell = /share/MD0_DATA/.qpkg/autorun/setupftp.sh\nInstall_Path = /share/MD0_DATA/.qpkg/autorun\nQPKG_File = autorun.qpkg\nEnable = TRUE\n```\n\n# \u3069\u3093\u306a\u3053\u3068\u304c\u3057\u305f\u304b\u3063\u305f\u304b\n\n\u6ce8\u610f\uff01\uff09\u4ee5\u4e0b\u306e\u5909\u66f4\u306f\u4ed6\u306e\u30b5\u30fc\u30d3\u30b9\u3068\u306e\u6574\u5408\u6027\u3092\u8003\u3048\u308c\u3070\u5b9f\u65bd\u3059\u3079\u304d\u3067\u306f\u306a\u304f\u3001\u305f\u307e\u305f\u307eFTP\u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066\u3060\u3051\u904b\u7528\u3059\u308b\u30b1\u30fc\u30b9\u3060\u3063\u305f\u306e\u3067\u5b9f\u65bd\u3057\u305f\u3002\n\n+ Umask\u304c000\u306a\u306e\u304c\u6c17\u6301\u3061\u60aa\u304b\u3063\u305f\u306e\u3067\u3001\u5909\u3048\u305f\u304b\u3063\u305f\u3002(\u305d\u308c\u3092\u3044\u3046\u306a\u3089RootLogin on\u3082\u5909\u3048\u305f\u3044\u3067\u3059\u304c\uff09\u305f\u3060\u3001\u3053\u308c\u3092\u5909\u3048\u305f\u5834\u5408\u306b\u3001\u4ed6\u306e\u30b5\u30fc\u30d3\u30b9\u3068\u306e\u6574\u5408\u6027\u304c\u4fdd\u305f\u308c\u308b\u304b\u306f\u7591\u554f\u3067\u3059\u3002\n+ FTP\u306e\u7279\u6a29\u30e6\u30fc\u30b6\u30fc\uff08\u4f8b\u3048\u3070 __ftpadmin__ \uff09\u304c\u3001\u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5185\u5bb9\u3092\u8aad\u307f\u66f8\u304d\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3064\u3064\u3001\u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306fchroot(proftpd\u306e\u5834\u5408\u306fDefaultRoot\u306e\u8a2d\u5b9a)\u3055\u308c\u305f\u307e\u307e\u306b\u3057\u305f\u304b\u3063\u305f\u3002\u3053\u308c\u306fFTP\u306e\u7279\u6a29\u30e6\u30fc\u30b6\u30fc\u306e\u5c5e\u3059\u308bgroup\u3092DefaultRoot\u3067\u72ec\u81ea\u306e\u8a2d\u5b9a\u306b\u3057\u3066\u3001\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u8a2d\u5b9a(/etc/passwd)\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u5b9f\u73fe\u3067\u304d\u308b\u3002\n\n```\nDefaultRoot ~ ftpadmin\nDefaultRoot /share\n```\n\n\u3068\u3053\u308d\u3067\u3001\u3053\u306eNAS\u306eproftpd\u3067\u306f\u3001chroot(DefaultRoot\u3092\u6307\u5b9a)\u3057\u305f\u5834\u5408\u3001\u30ed\u30b0\u30a4\u30f3\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u66f8\u304d\u8fbc\u307f\u304c\u3067\u304d\u306a\u3044\u3002\u30ed\u30b0\u30a4\u30f3\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092/etc/passwd\u3092\u3044\u3058\u3063\u3066\u3044\u308d\u3044\u308d\u8a2d\u5b9a\u3057\u3066\u307f\u305f\u304c\u30c0\u30e1\u3060\u3063\u305f\u3002\n\u3053\u306e\u4ef6\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u3067\u3082\u6307\u6458\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\nhttp://www.big-55.com/2013/02/qnap_ftps%E3%81%A7%E5%A4%96%E9%83%A8%E3%81%8B%E3%82%89%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9_proftpd-conf%E3%82%92%E3%81%84%E3%81%98%E3%82%8B/\n\n", "tags": ["Qnap", "proftpd"]}