{"context": " More than 1 year has passed since last update.\u4eca\u65e5\u306f\u3001Docker\u306e\u30c7\u30a3\u30b9\u30af\u7ba1\u7406\u306b\u3064\u3044\u3066\u8abf\u3079\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u53c2\u8003\u30da\u30fc\u30b8\n\u4e2d\u4e95\u3055\u3093\u306e\u3053\u306e\u30da\u30fc\u30b8\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\n* RHEL7\u306b\u304a\u3051\u308bDocker\u306e\u30c7\u30a3\u30b9\u30af\u30a4\u30e1\u30fc\u30b8\u7ba1\u7406\u65b9\u5f0f\n* \u7b2c68\u56de\u3000Docker\u30b9\u30c8\u30ec\u30fc\u30b8\u30c9\u30e9\u30a4\u30d0\u30fc\u306e\u6027\u80fd\u6bd4\u8f03 (\u4e2d\u4e95\u60a6\u53f8) \n* Fedora22\u306eDocker\u3067overlayfs\u30c9\u30e9\u30a4\u30d0\u30fc\u3092\u5229\u7528\u3059\u308b\u624b\u9806\n\u3053\u306e\u3042\u305f\u308a\u306e\u60c5\u5831\u3092\u3082\u3068\u306bDocker\u306b\u3064\u3044\u3066\u6574\u7406\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nDocker\u306e\u30c7\u30a3\u30b9\u30af\u7ba1\u7406\n\u4e2d\u4e95\u3055\u3093\u306e\u30da\u30fc\u30b8\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u901a\u308a\u3001Docker\u3067\u306fDevice Mapper\u306b\u3088\u308bThin-Provisioning\u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\nDevice Mapper\u306b\u3088\u308bThin-Provisioning\u6a5f\u80fd\u306f\u3001RedHat\u304cDocker\u3092ubuntu\u4ee5\u5916\u306eLinux\u3067\u3082\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3001Linux\u30ab\u30fc\u30cd\u30eb\u3067\u52d5\u4f5c\u3067\u304d\u308b\u3088\u3046\u306b\u8ffd\u52a0\u3057\u305f\u6a5f\u80fd\u3067\u3059\u3002\u305f\u3044\u3078\u3093\u3042\u308a\u304c\u305f\u3044\u3067\u3059\u306d\u3002\n\n\u25a0Docker\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306e\u30c7\u30a3\u30b9\u30af\u30a4\u30e1\u30fc\u30b8\nDocker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u306a\u3044\u3068\u304d\u306f\u3053\u306e\u3088\u3046\u306a\u72b6\u614b\u3067\u3059\u3002\n# df -h\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9            \u30b5\u30a4\u30ba  \u4f7f\u7528  \u6b8b\u308a \u4f7f\u7528% \u30de\u30a6\u30f3\u30c8\u4f4d\u7f6e\n/dev/mapper/centos-root    18G 1001M   17G    6% /\ndevtmpfs                  905M     0  905M    0% /dev\ntmpfs                     914M     0  914M    0% /dev/shm\ntmpfs                     914M  8.5M  905M    1% /run\ntmpfs                     914M     0  914M    0% /sys/fs/cgroup\n/dev/sda1                 497M  162M  336M   33% /boot\n# lsblk \nNAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nsda               8:0    0   20G  0 disk \n\u251c\u2500sda1            8:1    0  500M  0 part /boot\n\u2514\u2500sda2            8:2    0 19.5G  0 part \n  \u251c\u2500centos-root 253:0    0 17.5G  0 lvm  /\n  \u2514\u2500centos-swap 253:1    0    2G  0 lvm  [SWAP]\nsr0              11:0    1 1024M  0 rom  \n\nDocker\u3092\u8d77\u52d5\u3059\u308b\u3068\u3001\u3053\u306e\u3088\u3046\u306a\u30d7\u30ed\u30bb\u30b9\u304c\u8d77\u52d5\u3057\u3066\u3044\u307e\u3059\u306d\u3002\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u51e6\u7406\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059\u3002\nroot      19324  19297  0 09:21 ?        00:00:00 mkfs.ext4 -E nodiscard,lazy_itable_init=0,lazy_journal_init=0 /dev/mapper/docker-253:0-20253-base\n\n\u30c7\u30a3\u30b9\u30af\u306f\u3053\u306e\u3088\u3046\u306b\u5909\u308f\u308a\u3001\u30eb\u30fc\u30d7\u30d0\u30c3\u30af\u30c7\u30d0\u30a4\u30b9\u304c\u51fa\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n# df -h\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9            \u30b5\u30a4\u30ba  \u4f7f\u7528  \u6b8b\u308a \u4f7f\u7528% \u30de\u30a6\u30f3\u30c8\u4f4d\u7f6e\n/dev/mapper/centos-root    18G  1.3G   17G    8% /\ndevtmpfs                  905M     0  905M    0% /dev\ntmpfs                     914M     0  914M    0% /dev/shm\ntmpfs                     914M  8.6M  905M    1% /run\ntmpfs                     914M     0  914M    0% /sys/fs/cgroup\n/dev/sda1                 497M  162M  336M   33% /boot\n[root@DockerDirect ~]# lsblk \nNAME                         MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nsda                            8:0    0   20G  0 disk \n\u251c\u2500sda1                         8:1    0  500M  0 part /boot\n\u2514\u2500sda2                         8:2    0 19.5G  0 part \n  \u251c\u2500centos-root              253:0    0 17.5G  0 lvm  /\n  \u2514\u2500centos-swap              253:1    0    2G  0 lvm  [SWAP]\nsr0                           11:0    1 1024M  0 rom  \nloop0                          7:0    0  100G  0 loop \n\u2514\u2500docker-253:0-20253-pool    253:2    0  100G  0 dm   \n  \u2514\u2500docker-253:0-20253-base  253:3    0   10G  0 dm   \nloop1                          7:1    0    2G  0 loop \n\u2514\u2500docker-253:0-20253-pool    253:2    0  100G  0 dm   \n  \u2514\u2500docker-253:0-20253-base  253:3    0   10G  0 dm   \n\nloop0\u3068loop1\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\nloset\u30b3\u30de\u30f3\u30c9\u3055\u3089\u306b\u78ba\u8a8d\u3059\u308b\u3068\u3001\n# losetup \nNAME       SIZELIMIT OFFSET AUTOCLEAR RO BACK-FILE\n/dev/loop0         0      0         1  0 /var/lib/docker/devicemapper/devicemapper/data\n/dev/loop1         0      0         1  0 /var/lib/docker/devicemapper/devicemapper/metadata\n\n\u3064\u307e\u308a\u4f5c\u6210\u3055\u308c\u305f\u30eb\u30fc\u30d7\u30d0\u30c3\u30af\u30c7\u30d0\u30a4\u30b9/dev/loop0\u3084/dev/loop1\u306f\u3001/var/lib/docker/devicemapper/devicemapper\u306b\u7d10\u3065\u3044\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u3053\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u8eab\u306f\u3053\u306e\u3088\u3046\u306a\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002\n# ls -lh /var/lib/docker/devicemapper/devicemapper/\n\u5408\u8a08 293M\n-rw-------. 1 root root 100G  7\u6708 25 08:52 data\n-rw-------. 1 root root 2.0G  7\u6708 25 08:54 metadata\n\n# qemu-img info data\nimage: data\nfile format: raw\nvirtual size: 100G (107374182400 bytes)\ndisk size: 292M\n\n# qemu-img info metadata\nimage: metadata\nfile format: raw\nvirtual size: 2.0G (2147483648 bytes)\ndisk size: 740K\n\ndata\u30d5\u30a1\u30a4\u30eb\u3082metadata\u30d5\u30a1\u30a4\u30eb\u3082raw(\u30b9\u30d1\u30fc\u30b9)\u30d5\u30a1\u30a4\u30eb\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u306d\u3002\n\n\u25a0\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\u3059\u308b\u3068\uff1f\n\u307e\u305a\u306f\u3001\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3057\u3087\u3046\n# docker pull centos \nlatest: Pulling from docker.io/centos\nf1b10cd84249: Pull complete \nc852f6d61e65: Pull complete\n7322fbe74aa5: Already exists \ndocker.io/centos:latest: The image you are pulling has been verified. Important: image verification is a tech preview feature and should not be relied on to provide security.\nDigest: sha256:57554136c655abb33ecb7bb790b1db0279668d3763c3b81f31bc6c4e60e4a1f3\nStatus: Downloaded newer image for docker.io/centos:latest\n\n# docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\ndocker.io/centos    latest              7322fbe74aa5        5 weeks ago         172.2 MB\n\nCentos:latest\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3057\u305f\u304c\u3001\u3055\u3041\u3069\u3046\u306a\u3063\u305f\u3067\u3057\u3087\u3046\u304b\u3002\n# qemu-img  info data\nimage: data\nfile format: raw\nvirtual size: 100G (107374182400 bytes)\ndisk size: 484M\n\n# qemu-img  info metadata \nimage: metadata\nfile format: raw\nvirtual size: 2.0G (2147483648 bytes)\ndisk size: 904K\n\n292M\u304b\u3089484M\u306b\u5897\u3048\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n192M\u5897\u3048\u3066\u3044\u307e\u3059\u304b\u3089\u3001\u307b\u307c\u30a4\u30e1\u30fc\u30b8\u5206(172.2MB)\u304f\u3089\u3044\u304c\u5897\u3048\u305f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u306d\u3002\n\u53d6\u5f97\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3082/var/lib/docker/devicemapper/devicemapper/data\u30d5\u30a1\u30a4\u30eb\u5185\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u25a0\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3059\u308b\u3068\uff1f\n\u3067\u306f\u3001Docker\u30b3\u30f3\u30c6\u30ca\u30921\u500b\u8d77\u52d5\u3057\u3066\u307f\u307e\u3057\u3087\u3046\n# docker run -it --name test00 centos /bin/bash                                                                  \nUsage of loopback devices is strongly discouraged for production use. Either use `--storage-opt dm.thinpooldev` or use `--storage-opt dm.no_warn_on_loop_devices=true` to suppress this warning.\n[root@46bed6620c0b /]# \n# docker ps -a\nCONTAINER ID        IMAGE               COMMAND             CREATED              STATUS              PORTS               NAMES\n46bed6620c0b        centos:latest       \"/bin/bash\"         About a minute ago   Up About a minute                       test00  \n\nCtrl+PQ\u3067\u629c\u3051\u308c\u307e\u3059\u3002exit\u306f\u3057\u306a\u3044\u3088\u3046\u306b\u3002\u3002\u3002\n# qemu-img  info data\nimage: data\nfile format: raw\nvirtual size: 100G (107374182400 bytes)\ndisk size: 485M\n\n# qemu-img  info metadata\nimage: metadata\nfile format: raw\nvirtual size: 2.0G (2147483648 bytes)\ndisk size: 956K\n\ndata\u306e\u30c7\u30a3\u30b9\u30af\u30b5\u30a4\u30ba\u306f\u3001484M\u304b\u3089485M\u3068\u307b\u3068\u3093\u3069\u5897\u3048\u3066\u3044\u306a\u3044\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u30b3\u30f3\u30c6\u30ca\u3068\u3057\u3066\u3001/bin/bash\u3092\u52d5\u304b\u3059\u306e\u306b\u8ffd\u52a0\u306e\u30c7\u30a3\u30b9\u30af\u306f\u5fc5\u8981\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3001\n\u304b\u306a\u308a\u30c7\u30a3\u30b9\u30af\u30b9\u30da\u30fc\u30b9\u304c\u7bc0\u7d04\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u3067\u306f\u3001\u3053\u306e\u3068\u304d\u3001loop\u30c7\u30d0\u30a4\u30b9\u306f\u3069\u3046\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3057\u3087\u3046\u304b\u3002\n# lsblk \nNAME                                                                                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\n...\nloop0                                                                                     7:0    0  100G  0 loop \n\u2514\u2500docker-253:0-20253-pool                                                               253:2    0  100G  0 dm   \n  \u251c\u2500docker-253:0-20253-base                                                             253:3    0   10G  0 dm   \n  \u2514\u2500docker-253:0-20253-46bed6620c0b12328d9cd95110dab4a360c5a31875837184e36ef585b750d8e9 253:4    0   10G  0 dm   \nloop1                                                                                     7:1    0    2G  0 loop \n\u2514\u2500docker-253:0-20253-pool                                                               253:2    0  100G  0 dm   \n  \u251c\u2500docker-253:0-20253-base                                                             253:3    0   10G  0 dm   \n  \u2514\u2500docker-253:0-20253-46bed6620c0b12328d9cd95110dab4a360c5a31875837184e36ef585b750d8e9 253:4    0   10G  0 dm   \n\ndocker-253:0-20253-46bed6620c0b12328d9cd95110dab4a360c5a31875837184e36ef585b750d8e9\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u306d\u3002\n\u30b3\u30f3\u30c6\u30ca\u5185\u90e8\u3092\u898b\u3066\u307f\u308b\u3068\u308f\u304b\u308a\u307e\u3059\u304c\u3001\u4f5c\u6210\u3055\u308c\u305f\u30c7\u30a3\u30b9\u30af\u304c\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n# df -h\nFilesystem                                                                                       Size  Used Avail Use% Mounted on\n/dev/mapper/docker-253:0-20253-46bed6620c0b12328d9cd95110dab4a360c5a31875837184e36ef585b750d8e9  9.8G  219M  9.0G   3% /\ntmpfs                                                                                            914M     0  914M   0% /dev\nshm                                                                                               64M     0   64M   0% /dev/shm\ntmpfs                                                                                            914M     0  914M   0% /run/secrets\n/dev/mapper/centos-root                                                                           18G  1.5G   16G   9% /etc/hosts\ntmpfs                                                                                            914M     0  914M   0% /proc/kcore\ntmpfs                                                                                            914M     0  914M   0% /proc/timer_stats\n\n\u3067\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u3092\u7d42\u4e86\u3057\u3066\u307f\u307e\u3059\u3002\n# lsblk\nNAME                        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\n...\nloop0                         7:0    0  100G  0 loop \n\u2514\u2500docker-253:0-20253-pool   253:2    0  100G  0 dm   \n  \u2514\u2500docker-253:0-20253-base 253:3    0   10G  0 dm   \nloop1                         7:1    0    2G  0 loop \n\u2514\u2500docker-253:0-20253-pool   253:2    0  100G  0 dm   \n  \u2514\u2500docker-253:0-20253-base 253:3    0   10G  0 dm  \n\n\u30eb\u30fc\u30d7\u30d0\u30c3\u30af\u30c7\u30d0\u30a4\u30b9\u304c\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\ndocker rm  test00\u3092\u5b9f\u884c\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u30c7\u30a3\u30b9\u30af\u306e\u4f7f\u7528\u91cf\n\u30c7\u30a3\u30b9\u30af\u306e\u4f7f\u7528\u91cf\u306e\u8abf\u67fb\u3092\u3059\u308b\u305f\u3081\u306b\u3001\u3082\u3046\u5c11\u3057\u308f\u304b\u308a\u3084\u3059\u3044\u8a66\u9a13\u3092\u3057\u307e\u3059\u3002\nDocker\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u3001100M\u7a0b\u5ea6\u306e\u30c7\u30fc\u30bf\u3092\u66f8\u304d\u8fbc\u307f\u307e\u3059\u3002\n# docker run -it --name test01 centos /bin/dd if=/dev/zero of=zero.file count=102400 bs=1024                   \nUsage of loopback devices is strongly discouraged for production use. Either use `--storage-opt dm.thinpooldev` or use `--storage-opt dm.no_warn_on_loop_devices=true` to suppress this warning.\n                                                 102400+0 records in\n102400+0 records out\n104857600 bytes (105 MB) copied, 0.214952 s, 488 MB/s\n\n\u305d\u3046\u3059\u308b\u3068\u30c7\u30a3\u30b9\u30af\u306f\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n# losetup\nNAME       SIZELIMIT OFFSET AUTOCLEAR RO BACK-FILE\n/dev/loop0         0      0         1  0 /var/lib/docker/devicemapper/devicemapper/data\n/dev/loop1         0      0         1  0 /var/lib/docker/devicemapper/devicemapper/metadata\n\n# lsblk \nNAME                        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\n...\nloop0                         7:0    0  100G  0 loop \n\u2514\u2500docker-253:0-20253-pool   253:2    0  100G  0 dm   \n  \u2514\u2500docker-253:0-20253-base 253:3    0   10G  0 dm   \nloop1                         7:1    0    2G  0 loop \n\u2514\u2500docker-253:0-20253-pool   253:2    0  100G  0 dm   \n  \u2514\u2500docker-253:0-20253-base 253:3    0   10G  0 dm   \n\n# qemu-img  info data\nimage: data\nfile format: raw\nvirtual size: 100G (107374182400 bytes)\ndisk size: 585M\n\n# qemu-img  info metadata                                                                                        \nimage: metadata\nfile format: raw\nvirtual size: 2.0G (2147483648 bytes)\ndisk size: 1.1M\n\n# docker ps -a\nCONTAINER ID        IMAGE               COMMAND                CREATED             STATUS                     PORTS               NAMES\n75347df847b3        centos:latest       \"/bin/dd if=/dev/zer   3 minutes ago       Exited (0) 3 minutes ago                       test01  \n\nDocker\u3067\u306f\u30a4\u30e1\u30fc\u30b8\u3092\u8d77\u52d5\u3059\u308b\u3068\u3001\u30c7\u30a3\u30b9\u30af\u304c\u5897\u3048\u3066\u3044\u307e\u3059\u3002\ndata\u306f484M\u304b\u3089585M\u306b100M\u304f\u3089\u3044\u5897\u3048\u3066\u3044\u307e\u3059\u3002\u66f8\u304d\u8fbc\u3093\u3060\u5206\u3060\u3051\u5897\u3048\u308b\u3002\n\u5f53\u7136\u306e\u7d50\u679c\u3067\u3059\u3002\n\n\u30c7\u30a3\u30b9\u30af\u306e\u30e1\u30bf\u60c5\u5831\n\u3053\u306e\u3068\u304d\u3001\u30c7\u30a3\u30b9\u30af\u306b\u66f8\u304d\u8fbc\u3093\u3060\u60c5\u5831\u306f\u3001/var/lib/docker/devicemapper/metadata\u4ee5\u4e0b\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n# find ./ -type f -print -exec /bin/bash -c 'cat {} | python -mjson.tool' \\;\n./transaction-metadata\n{\n    \"device_hash\": \"75347df847b334b01ee5d01dd7b5a1a0ad5a0127738df9de28325fd6a1ce05c6\",\n    \"device_id\": 8,\n    \"open_transaction_id\": 10\n}\n./base\n{\n    \"device_id\": 1,\n    \"initialized\": true,\n    \"size\": 10737418240,\n    \"transaction_id\": 1\n}\n./f1b10cd842498c23d206ee0cbeaa9de8d2ae09ff3c7af2723a9e337a6965d639\n{\n    \"device_id\": 2,\n    \"initialized\": false,\n    \"size\": 10737418240,\n    \"transaction_id\": 2\n}\n...(\u7565)\n./7322fbe74aa5632b33a400959867c8ac4290e9c5112877a7754be70cfe5d66e9\n{\n    \"device_id\": 4,\n    \"initialized\": false,\n    \"size\": 10737418240,\n    \"transaction_id\": 4\n}\n./75347df847b334b01ee5d01dd7b5a1a0ad5a0127738df9de28325fd6a1ce05c6-init\n{\n    \"device_id\": 7,\n    \"initialized\": false,\n    \"size\": 10737418240,\n    \"transaction_id\": 9\n}\n...(\u7565)\n\n\n\u524a\u9664\u5f8c\u306e\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u91cf\u306f\uff1f\n\n\u25a0\u30b3\u30f3\u30c6\u30ca\u306e\u30c7\u30a3\u30b9\u30af\u524a\u9664\n\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3057\u3066\u307f\u307e\u3059\u3002\u304d\u308c\u3044\u306b\u4f5c\u6210\u3059\u308b\u524d\u306e\u30b5\u30a4\u30ba\u306b\u623b\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n# qemu-img  info data                                                                                  \nimage: data\nfile format: raw\nvirtual size: 100G (107374182400 bytes)\ndisk size: 585M\n\n# docker rm test01\ntest01\n\n# qemu-img info data                                                                                            \nimage: data\nfile format: raw\nvirtual size: 100G (107374182400 bytes)\ndisk size: 484M\n\n\n\n\u25a0\u30a4\u30e1\u30fc\u30b8\u306e\u524a\u9664\n\u30a4\u30e1\u30fc\u30b8\u3092\u524a\u9664\u3057\u3066\u307f\u307e\u3059\u3002\u304d\u308c\u3044\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u524d\u306e\u30b5\u30a4\u30ba\u306b\u623b\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n# docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\ndocker.io/centos    latest              7322fbe74aa5        5 weeks ago         172.2 MB\n\n# docker rm 7322fbe74aa5                                                                                         \nError response from daemon: no such id: 7322fbe74aa5\nFATA[0000] Error: failed to remove one or more containers \n\n# docker rmi 7322fbe74aa5\nUntagged: docker.io/centos:latest\nDeleted: 7322fbe74aa5632b33a400959867c8ac4290e9c5112877a7754be70cfe5d66e9\nDeleted: c852f6d61e65cddf1e8af1f6cd7db78543bfb83cdcd36845541cf6d9dfef20a0\nDeleted: f1b10cd842498c23d206ee0cbeaa9de8d2ae09ff3c7af2723a9e337a6965d639\n\n# qemu-img  info data\nimage: data\nfile format: raw\nvirtual size: 100G (107374182400 bytes)\ndisk size: 292M\n\n\u4eca\u65e5\u306f\u3001Docker\u306e\u30c7\u30a3\u30b9\u30af\u7ba1\u7406\u306b\u3064\u3044\u3066\u8abf\u3079\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n#\u53c2\u8003\u30da\u30fc\u30b8\n\u4e2d\u4e95\u3055\u3093\u306e\u3053\u306e\u30da\u30fc\u30b8\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\n* [RHEL7\u306b\u304a\u3051\u308bDocker\u306e\u30c7\u30a3\u30b9\u30af\u30a4\u30e1\u30fc\u30b8\u7ba1\u7406\u65b9\u5f0f](http://enakai00.hatenablog.com/entry/20140420/1397981156)\n* [\u7b2c68\u56de\u3000Docker\u30b9\u30c8\u30ec\u30fc\u30b8\u30c9\u30e9\u30a4\u30d0\u30fc\u306e\u6027\u80fd\u6bd4\u8f03 (\u4e2d\u4e95\u60a6\u53f8) ](http://www.school.ctc-g.co.jp/columns/nakai/nakai68.html)\n* [Fedora22\u306eDocker\u3067overlayfs\u30c9\u30e9\u30a4\u30d0\u30fc\u3092\u5229\u7528\u3059\u308b\u624b\u9806](http://enakai00.hatenablog.com/entry/2015/06/28/204932)\n\u3053\u306e\u3042\u305f\u308a\u306e\u60c5\u5831\u3092\u3082\u3068\u306bDocker\u306b\u3064\u3044\u3066\u6574\u7406\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n#Docker\u306e\u30c7\u30a3\u30b9\u30af\u7ba1\u7406\n\u4e2d\u4e95\u3055\u3093\u306e\u30da\u30fc\u30b8\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u901a\u308a\u3001Docker\u3067\u306fDevice Mapper\u306b\u3088\u308bThin-Provisioning\u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\nDevice Mapper\u306b\u3088\u308bThin-Provisioning\u6a5f\u80fd\u306f\u3001RedHat\u304cDocker\u3092ubuntu\u4ee5\u5916\u306eLinux\u3067\u3082\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3001Linux\u30ab\u30fc\u30cd\u30eb\u3067\u52d5\u4f5c\u3067\u304d\u308b\u3088\u3046\u306b\u8ffd\u52a0\u3057\u305f\u6a5f\u80fd\u3067\u3059\u3002\u305f\u3044\u3078\u3093\u3042\u308a\u304c\u305f\u3044\u3067\u3059\u306d\u3002\n\n##\u25a0Docker\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306e\u30c7\u30a3\u30b9\u30af\u30a4\u30e1\u30fc\u30b8\nDocker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u306a\u3044\u3068\u304d\u306f\u3053\u306e\u3088\u3046\u306a\u72b6\u614b\u3067\u3059\u3002\n\n```\n# df -h\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9            \u30b5\u30a4\u30ba  \u4f7f\u7528  \u6b8b\u308a \u4f7f\u7528% \u30de\u30a6\u30f3\u30c8\u4f4d\u7f6e\n/dev/mapper/centos-root    18G 1001M   17G    6% /\ndevtmpfs                  905M     0  905M    0% /dev\ntmpfs                     914M     0  914M    0% /dev/shm\ntmpfs                     914M  8.5M  905M    1% /run\ntmpfs                     914M     0  914M    0% /sys/fs/cgroup\n/dev/sda1                 497M  162M  336M   33% /boot\n# lsblk \nNAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nsda               8:0    0   20G  0 disk \n\u251c\u2500sda1            8:1    0  500M  0 part /boot\n\u2514\u2500sda2            8:2    0 19.5G  0 part \n  \u251c\u2500centos-root 253:0    0 17.5G  0 lvm  /\n  \u2514\u2500centos-swap 253:1    0    2G  0 lvm  [SWAP]\nsr0              11:0    1 1024M  0 rom  \n```\n\nDocker\u3092\u8d77\u52d5\u3059\u308b\u3068\u3001\u3053\u306e\u3088\u3046\u306a\u30d7\u30ed\u30bb\u30b9\u304c\u8d77\u52d5\u3057\u3066\u3044\u307e\u3059\u306d\u3002\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u51e6\u7406\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\nroot      19324  19297  0 09:21 ?        00:00:00 mkfs.ext4 -E nodiscard,lazy_itable_init=0,lazy_journal_init=0 /dev/mapper/docker-253:0-20253-base\n```\n\n\u30c7\u30a3\u30b9\u30af\u306f\u3053\u306e\u3088\u3046\u306b\u5909\u308f\u308a\u3001\u30eb\u30fc\u30d7\u30d0\u30c3\u30af\u30c7\u30d0\u30a4\u30b9\u304c\u51fa\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n```\n# df -h\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9            \u30b5\u30a4\u30ba  \u4f7f\u7528  \u6b8b\u308a \u4f7f\u7528% \u30de\u30a6\u30f3\u30c8\u4f4d\u7f6e\n/dev/mapper/centos-root    18G  1.3G   17G    8% /\ndevtmpfs                  905M     0  905M    0% /dev\ntmpfs                     914M     0  914M    0% /dev/shm\ntmpfs                     914M  8.6M  905M    1% /run\ntmpfs                     914M     0  914M    0% /sys/fs/cgroup\n/dev/sda1                 497M  162M  336M   33% /boot\n[root@DockerDirect ~]# lsblk \nNAME                         MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\nsda                            8:0    0   20G  0 disk \n\u251c\u2500sda1                         8:1    0  500M  0 part /boot\n\u2514\u2500sda2                         8:2    0 19.5G  0 part \n  \u251c\u2500centos-root              253:0    0 17.5G  0 lvm  /\n  \u2514\u2500centos-swap              253:1    0    2G  0 lvm  [SWAP]\nsr0                           11:0    1 1024M  0 rom  \nloop0                          7:0    0  100G  0 loop \n\u2514\u2500docker-253:0-20253-pool    253:2    0  100G  0 dm   \n  \u2514\u2500docker-253:0-20253-base  253:3    0   10G  0 dm   \nloop1                          7:1    0    2G  0 loop \n\u2514\u2500docker-253:0-20253-pool    253:2    0  100G  0 dm   \n  \u2514\u2500docker-253:0-20253-base  253:3    0   10G  0 dm   \n```\n\nloop0\u3068loop1\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\nloset\u30b3\u30de\u30f3\u30c9\u3055\u3089\u306b\u78ba\u8a8d\u3059\u308b\u3068\u3001\n\n```\n# losetup \nNAME       SIZELIMIT OFFSET AUTOCLEAR RO BACK-FILE\n/dev/loop0         0      0         1  0 /var/lib/docker/devicemapper/devicemapper/data\n/dev/loop1         0      0         1  0 /var/lib/docker/devicemapper/devicemapper/metadata\n```\n\n\u3064\u307e\u308a\u4f5c\u6210\u3055\u308c\u305f\u30eb\u30fc\u30d7\u30d0\u30c3\u30af\u30c7\u30d0\u30a4\u30b9/dev/loop0\u3084/dev/loop1\u306f\u3001/var/lib/docker/devicemapper/devicemapper\u306b\u7d10\u3065\u3044\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u3053\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u8eab\u306f\u3053\u306e\u3088\u3046\u306a\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002\n\n```\n# ls -lh /var/lib/docker/devicemapper/devicemapper/\n\u5408\u8a08 293M\n-rw-------. 1 root root 100G  7\u6708 25 08:52 data\n-rw-------. 1 root root 2.0G  7\u6708 25 08:54 metadata\n\n# qemu-img info data\nimage: data\nfile format: raw\nvirtual size: 100G (107374182400 bytes)\ndisk size: 292M\n\n# qemu-img info metadata\nimage: metadata\nfile format: raw\nvirtual size: 2.0G (2147483648 bytes)\ndisk size: 740K\n```\n\ndata\u30d5\u30a1\u30a4\u30eb\u3082metadata\u30d5\u30a1\u30a4\u30eb\u3082raw(\u30b9\u30d1\u30fc\u30b9)\u30d5\u30a1\u30a4\u30eb\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u306d\u3002\n\n##\u25a0\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\u3059\u308b\u3068\uff1f\n\u307e\u305a\u306f\u3001\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3057\u3087\u3046\n\n```\n# docker pull centos \nlatest: Pulling from docker.io/centos\nf1b10cd84249: Pull complete \nc852f6d61e65: Pull complete\n7322fbe74aa5: Already exists \ndocker.io/centos:latest: The image you are pulling has been verified. Important: image verification is a tech preview feature and should not be relied on to provide security.\nDigest: sha256:57554136c655abb33ecb7bb790b1db0279668d3763c3b81f31bc6c4e60e4a1f3\nStatus: Downloaded newer image for docker.io/centos:latest\n\n# docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\ndocker.io/centos    latest              7322fbe74aa5        5 weeks ago         172.2 MB\n```\n\nCentos:latest\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3057\u305f\u304c\u3001\u3055\u3041\u3069\u3046\u306a\u3063\u305f\u3067\u3057\u3087\u3046\u304b\u3002\n\n```\n# qemu-img  info data\nimage: data\nfile format: raw\nvirtual size: 100G (107374182400 bytes)\ndisk size: 484M\n\n# qemu-img  info metadata \nimage: metadata\nfile format: raw\nvirtual size: 2.0G (2147483648 bytes)\ndisk size: 904K\n```\n\n292M\u304b\u3089484M\u306b\u5897\u3048\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n192M\u5897\u3048\u3066\u3044\u307e\u3059\u304b\u3089\u3001\u307b\u307c\u30a4\u30e1\u30fc\u30b8\u5206(172.2MB)\u304f\u3089\u3044\u304c\u5897\u3048\u305f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u306d\u3002\n\u53d6\u5f97\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3082/var/lib/docker/devicemapper/devicemapper/data\u30d5\u30a1\u30a4\u30eb\u5185\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n##\u25a0\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3059\u308b\u3068\uff1f\n\u3067\u306f\u3001Docker\u30b3\u30f3\u30c6\u30ca\u30921\u500b\u8d77\u52d5\u3057\u3066\u307f\u307e\u3057\u3087\u3046\n\n```\n# docker run -it --name test00 centos /bin/bash                                                                  \nUsage of loopback devices is strongly discouraged for production use. Either use `--storage-opt dm.thinpooldev` or use `--storage-opt dm.no_warn_on_loop_devices=true` to suppress this warning.\n[root@46bed6620c0b /]# \n# docker ps -a\nCONTAINER ID        IMAGE               COMMAND             CREATED              STATUS              PORTS               NAMES\n46bed6620c0b        centos:latest       \"/bin/bash\"         About a minute ago   Up About a minute                       test00  \n```\n\nCtrl+PQ\u3067\u629c\u3051\u308c\u307e\u3059\u3002exit\u306f\u3057\u306a\u3044\u3088\u3046\u306b\u3002\u3002\u3002\n\n```\n# qemu-img  info data\nimage: data\nfile format: raw\nvirtual size: 100G (107374182400 bytes)\ndisk size: 485M\n\n# qemu-img  info metadata\nimage: metadata\nfile format: raw\nvirtual size: 2.0G (2147483648 bytes)\ndisk size: 956K\n```\n\ndata\u306e\u30c7\u30a3\u30b9\u30af\u30b5\u30a4\u30ba\u306f\u3001484M\u304b\u3089485M\u3068\u307b\u3068\u3093\u3069\u5897\u3048\u3066\u3044\u306a\u3044\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u30b3\u30f3\u30c6\u30ca\u3068\u3057\u3066\u3001/bin/bash\u3092\u52d5\u304b\u3059\u306e\u306b\u8ffd\u52a0\u306e\u30c7\u30a3\u30b9\u30af\u306f\u5fc5\u8981\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3001\n\u304b\u306a\u308a\u30c7\u30a3\u30b9\u30af\u30b9\u30da\u30fc\u30b9\u304c\u7bc0\u7d04\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u3067\u306f\u3001\u3053\u306e\u3068\u304d\u3001loop\u30c7\u30d0\u30a4\u30b9\u306f\u3069\u3046\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3057\u3087\u3046\u304b\u3002\n\n```\n# lsblk \nNAME                                                                                    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\n...\nloop0                                                                                     7:0    0  100G  0 loop \n\u2514\u2500docker-253:0-20253-pool                                                               253:2    0  100G  0 dm   \n  \u251c\u2500docker-253:0-20253-base                                                             253:3    0   10G  0 dm   \n  \u2514\u2500docker-253:0-20253-46bed6620c0b12328d9cd95110dab4a360c5a31875837184e36ef585b750d8e9 253:4    0   10G  0 dm   \nloop1                                                                                     7:1    0    2G  0 loop \n\u2514\u2500docker-253:0-20253-pool                                                               253:2    0  100G  0 dm   \n  \u251c\u2500docker-253:0-20253-base                                                             253:3    0   10G  0 dm   \n  \u2514\u2500docker-253:0-20253-46bed6620c0b12328d9cd95110dab4a360c5a31875837184e36ef585b750d8e9 253:4    0   10G  0 dm   \n```\n\ndocker-253:0-20253-46bed6620c0b12328d9cd95110dab4a360c5a31875837184e36ef585b750d8e9\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u306d\u3002\n\n\u30b3\u30f3\u30c6\u30ca\u5185\u90e8\u3092\u898b\u3066\u307f\u308b\u3068\u308f\u304b\u308a\u307e\u3059\u304c\u3001\u4f5c\u6210\u3055\u308c\u305f\u30c7\u30a3\u30b9\u30af\u304c\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n```\n# df -h\nFilesystem                                                                                       Size  Used Avail Use% Mounted on\n/dev/mapper/docker-253:0-20253-46bed6620c0b12328d9cd95110dab4a360c5a31875837184e36ef585b750d8e9  9.8G  219M  9.0G   3% /\ntmpfs                                                                                            914M     0  914M   0% /dev\nshm                                                                                               64M     0   64M   0% /dev/shm\ntmpfs                                                                                            914M     0  914M   0% /run/secrets\n/dev/mapper/centos-root                                                                           18G  1.5G   16G   9% /etc/hosts\ntmpfs                                                                                            914M     0  914M   0% /proc/kcore\ntmpfs                                                                                            914M     0  914M   0% /proc/timer_stats\n```\n\n\u3067\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u3092\u7d42\u4e86\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\n# lsblk\nNAME                        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\n...\nloop0                         7:0    0  100G  0 loop \n\u2514\u2500docker-253:0-20253-pool   253:2    0  100G  0 dm   \n  \u2514\u2500docker-253:0-20253-base 253:3    0   10G  0 dm   \nloop1                         7:1    0    2G  0 loop \n\u2514\u2500docker-253:0-20253-pool   253:2    0  100G  0 dm   \n  \u2514\u2500docker-253:0-20253-base 253:3    0   10G  0 dm  \n```\n\n\u30eb\u30fc\u30d7\u30d0\u30c3\u30af\u30c7\u30d0\u30a4\u30b9\u304c\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\ndocker rm  test00\u3092\u5b9f\u884c\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\n#\u30c7\u30a3\u30b9\u30af\u306e\u4f7f\u7528\u91cf\n\u30c7\u30a3\u30b9\u30af\u306e\u4f7f\u7528\u91cf\u306e\u8abf\u67fb\u3092\u3059\u308b\u305f\u3081\u306b\u3001\u3082\u3046\u5c11\u3057\u308f\u304b\u308a\u3084\u3059\u3044\u8a66\u9a13\u3092\u3057\u307e\u3059\u3002\nDocker\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u3001100M\u7a0b\u5ea6\u306e\u30c7\u30fc\u30bf\u3092\u66f8\u304d\u8fbc\u307f\u307e\u3059\u3002\n\n```\n# docker run -it --name test01 centos /bin/dd if=/dev/zero of=zero.file count=102400 bs=1024                   \nUsage of loopback devices is strongly discouraged for production use. Either use `--storage-opt dm.thinpooldev` or use `--storage-opt dm.no_warn_on_loop_devices=true` to suppress this warning.\n                                                 102400+0 records in\n102400+0 records out\n104857600 bytes (105 MB) copied, 0.214952 s, 488 MB/s\n```\n\n\u305d\u3046\u3059\u308b\u3068\u30c7\u30a3\u30b9\u30af\u306f\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\n# losetup\nNAME       SIZELIMIT OFFSET AUTOCLEAR RO BACK-FILE\n/dev/loop0         0      0         1  0 /var/lib/docker/devicemapper/devicemapper/data\n/dev/loop1         0      0         1  0 /var/lib/docker/devicemapper/devicemapper/metadata\n\n# lsblk \nNAME                        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT\n...\nloop0                         7:0    0  100G  0 loop \n\u2514\u2500docker-253:0-20253-pool   253:2    0  100G  0 dm   \n  \u2514\u2500docker-253:0-20253-base 253:3    0   10G  0 dm   \nloop1                         7:1    0    2G  0 loop \n\u2514\u2500docker-253:0-20253-pool   253:2    0  100G  0 dm   \n  \u2514\u2500docker-253:0-20253-base 253:3    0   10G  0 dm   \n\n# qemu-img  info data\nimage: data\nfile format: raw\nvirtual size: 100G (107374182400 bytes)\ndisk size: 585M\n\n# qemu-img  info metadata                                                                                        \nimage: metadata\nfile format: raw\nvirtual size: 2.0G (2147483648 bytes)\ndisk size: 1.1M\n\n# docker ps -a\nCONTAINER ID        IMAGE               COMMAND                CREATED             STATUS                     PORTS               NAMES\n75347df847b3        centos:latest       \"/bin/dd if=/dev/zer   3 minutes ago       Exited (0) 3 minutes ago                       test01  \n```\n\nDocker\u3067\u306f\u30a4\u30e1\u30fc\u30b8\u3092\u8d77\u52d5\u3059\u308b\u3068\u3001\u30c7\u30a3\u30b9\u30af\u304c\u5897\u3048\u3066\u3044\u307e\u3059\u3002\ndata\u306f484M\u304b\u3089585M\u306b100M\u304f\u3089\u3044\u5897\u3048\u3066\u3044\u307e\u3059\u3002\u66f8\u304d\u8fbc\u3093\u3060\u5206\u3060\u3051\u5897\u3048\u308b\u3002\n\u5f53\u7136\u306e\u7d50\u679c\u3067\u3059\u3002\n\n#\u30c7\u30a3\u30b9\u30af\u306e\u30e1\u30bf\u60c5\u5831\n\u3053\u306e\u3068\u304d\u3001\u30c7\u30a3\u30b9\u30af\u306b\u66f8\u304d\u8fbc\u3093\u3060\u60c5\u5831\u306f\u3001/var/lib/docker/devicemapper/metadata\u4ee5\u4e0b\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\n```\n# find ./ -type f -print -exec /bin/bash -c 'cat {} | python -mjson.tool' \\;\n./transaction-metadata\n{\n    \"device_hash\": \"75347df847b334b01ee5d01dd7b5a1a0ad5a0127738df9de28325fd6a1ce05c6\",\n    \"device_id\": 8,\n    \"open_transaction_id\": 10\n}\n./base\n{\n    \"device_id\": 1,\n    \"initialized\": true,\n    \"size\": 10737418240,\n    \"transaction_id\": 1\n}\n./f1b10cd842498c23d206ee0cbeaa9de8d2ae09ff3c7af2723a9e337a6965d639\n{\n    \"device_id\": 2,\n    \"initialized\": false,\n    \"size\": 10737418240,\n    \"transaction_id\": 2\n}\n...(\u7565)\n./7322fbe74aa5632b33a400959867c8ac4290e9c5112877a7754be70cfe5d66e9\n{\n    \"device_id\": 4,\n    \"initialized\": false,\n    \"size\": 10737418240,\n    \"transaction_id\": 4\n}\n./75347df847b334b01ee5d01dd7b5a1a0ad5a0127738df9de28325fd6a1ce05c6-init\n{\n    \"device_id\": 7,\n    \"initialized\": false,\n    \"size\": 10737418240,\n    \"transaction_id\": 9\n}\n...(\u7565)\n```\n\n#\u524a\u9664\u5f8c\u306e\u30c7\u30a3\u30b9\u30af\u4f7f\u7528\u91cf\u306f\uff1f\n##\u25a0\u30b3\u30f3\u30c6\u30ca\u306e\u30c7\u30a3\u30b9\u30af\u524a\u9664\n\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3057\u3066\u307f\u307e\u3059\u3002\u304d\u308c\u3044\u306b\u4f5c\u6210\u3059\u308b\u524d\u306e\u30b5\u30a4\u30ba\u306b\u623b\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n```\n# qemu-img  info data                                                                                  \nimage: data\nfile format: raw\nvirtual size: 100G (107374182400 bytes)\ndisk size: 585M\n\n# docker rm test01\ntest01\n\n# qemu-img info data                                                                                            \nimage: data\nfile format: raw\nvirtual size: 100G (107374182400 bytes)\ndisk size: 484M\n\n```\n\n##\u25a0\u30a4\u30e1\u30fc\u30b8\u306e\u524a\u9664\n\u30a4\u30e1\u30fc\u30b8\u3092\u524a\u9664\u3057\u3066\u307f\u307e\u3059\u3002\u304d\u308c\u3044\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u524d\u306e\u30b5\u30a4\u30ba\u306b\u623b\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\n```\n# docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\ndocker.io/centos    latest              7322fbe74aa5        5 weeks ago         172.2 MB\n\n# docker rm 7322fbe74aa5                                                                                         \nError response from daemon: no such id: 7322fbe74aa5\nFATA[0000] Error: failed to remove one or more containers \n\n# docker rmi 7322fbe74aa5\nUntagged: docker.io/centos:latest\nDeleted: 7322fbe74aa5632b33a400959867c8ac4290e9c5112877a7754be70cfe5d66e9\nDeleted: c852f6d61e65cddf1e8af1f6cd7db78543bfb83cdcd36845541cf6d9dfef20a0\nDeleted: f1b10cd842498c23d206ee0cbeaa9de8d2ae09ff3c7af2723a9e337a6965d639\n\n# qemu-img  info data\nimage: data\nfile format: raw\nvirtual size: 100G (107374182400 bytes)\ndisk size: 292M\n```\n\n\n\n\n", "tags": ["docker", "directLVM", "lvm", "loopbackLVM", "centos7"]}