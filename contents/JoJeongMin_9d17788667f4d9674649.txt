{"context": "\n\n\u76ee\u6b21\n\n\u30b4\u30fc\u30eb\nCakePHP 3 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nCakePHP3 \u521d\u671f\u8a2d\u5b9a\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\nBake\n\u767b\u9332\u3001\u7de8\u96c6\u3001\u524a\u9664\u3092\u3084\u3063\u3066\u307f\u3088\u3046\u3002\n\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306e\u4f5c\u6210\n\n\n1. \u30b4\u30fc\u30eb\nCakePHP3\u306eBake\u3067\u7c21\u5358\u306bProject\u3092\u4f5c\u6210\u3057\n\u89e6\u3063\u3066\u307f\u308b\u3002\n\n2. CakePHP 3 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u307e\u305aCakePHP3 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3057\u3087\u3046\uff01\n\n\u30b7\u30b9\u30c6\u30e0\u8981\u4ef6\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u524d\u306bCakePHP3\u306e\u30b7\u30b9\u30c6\u30e0\u8981\u4ef6\u3092\u77e5\u308a\u307e\u3057\u3087\u3046\uff01\n\nHTTP\u30b5\u30fc\u30d0\u30fc(\u4f8b: Apache\u3002mod_rewrite \u304c\u63a8\u5968\u3055\u308c\u307e\u3059\u304c\u3001\u5fc5\u9808\u3067\u306f\u3042\u308a\u307e\u305b\u3093)\nPHP 5.6 \u4ee5\u4e0a (PHP 7 \u3082\u542b\u3080)\nPHP mbstring \u62e1\u5f35\nPHP intl \u62e1\u5f35\nDB(\u5fc5\u305a\u5fc5\u8981\u3067\u306f\u3042\u308a\u307e\u305b\u3093)\n\n\nMySQL (5.1.10 \u4ee5\u4e0a)\nPostgreSQL\nMicrosoft SQL Server (2008 \u4ee5\u4e0a)\nSQLite 3\n\n\n\n\u4eca\u56de\u306fMySQL or PostgreSQL\u60f3\u5b9a\n* \u7d44\u307f\u8fbc\u307f\u306e\u30c9\u30e9\u30a4\u30d0\u306f\u5168\u3066 PDO \u3092\u5fc5\u8981\u3068\u3057\u307e\u3059\u3002 \u6b63\u3057\u3044 PDO \u62e1\u5f35\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u304b\u5fc5\u305a\u78ba\u304b\u3081\u3066\u304f\u3060\u3055\u3044\u3002\n\nCakePHP \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u59cb\u3081\u308b\u524d\u306b\u3001PHP \u30d0\u30fc\u30b8\u30e7\u30f3\u304cPHP 5.6 \u4ee5\u4e0a\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u53c2\u8003\uff1ahttp://book.cakephp.org/3.0/ja/installation.html\n*\u53e9\u304f\u5834\u6240\u306f\u3069\u3053\u3067\u3082\u3088\u3044\ncommand\n    php -v\n\n\nCakePHP3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nCakePHP \u306e\u516c\u5f0f\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u3068\u3057\u3066\u3001\u4f9d\u5b58\u6027\u7ba1\u7406\u30c4\u30fc\u30eb Composer \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\ncommand\n    cd /var/www/html/\n    curl -s https://getcomposer.org/installer | php\n\noutput\n\nAll settings correct for using Composer\nDownloading 1.0.0...\n\nComposer successfully installed to: /var/www/html/htdocs/hands-on/composer.phar\nUse it: php composer.phar\n\n\ncomposer.phar \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u78ba\u8a8d\n\ncommand\n    cd /var/www/html/\n    ls -la\n\noutput\n    composer.phar\n\n\nCakePHP3 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\ncommand\n    cd /var/www/html/\n    php composer.phar create-project --prefer-dist cakephp/app {{project name}}\n\nWriting lock file\nGenerating autoload files\n> Cake\\Composer\\Installer\\PluginInstaller::postAutoloadDump\n> App\\Console\\Installer::postInstall\nCreated `config/app.php` file\nSet Folder Permissions ? (Default to Y) [Y,n]? Y\n\nURL\n    http://{{\u81ea\u5206\u306eIP}}/{{project name}}/\n\n\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u78ba\u8a8d\n\n\u57fa\u672c\u7684\u306b\u306f\u4e0b\u8a18\u306e\u69cb\u6210\u306eProject\u304c\u3067\u304d\u307e\u3059\u3002\n/{{project name}}\n    /bin // \u5b9f\u884c\u53ef\u80fd\u306aCake\u30b3\u30f3\u30bd\u30fc\u30eb\u304c\u5165\u308a\u307e\u3059\u3002\n    /config // CakePHP \u304c\u4f7f\u7528\u3059\u308b\uff08\u6570\u500b\u306e\uff09\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u5165\u308b\u5834\u6240\u3067\u3059\u3002 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u306e\u8a73\u7d30\u3001\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u3001\u30b3\u30a2\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u304c\u3053\u3053\u306b\u5165\u308a\u307e\u3059\u3002\n    /logs\n    /plugins // \u3042\u306a\u305f\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u4f7f\u3046\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u5165\u308a\u307e\u3059\u3002\n    /src // \u4f5c\u6210\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u304c\u5165\u308b\u5834\u6240\u3067\u3059\u3002 \u3042\u306a\u305f\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u3053\u3053\u306b\u5165\u308c\u307e\u3059\u3002\n    /tests // \u3042\u306a\u305f\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u304c\u5165\u308b\u5834\u6240\u3067\u3059\u3002\n    /tmp // CakePHP \u306e\u4e00\u6642\u7684\u306a\u30c7\u30fc\u30bf\u304c\u5165\u308b\u5834\u6240\u3067\u3059\u3002\n    /vendor // CakePHP \u3068\u4ed6\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u5165\u308b\u5834\u6240\u3067\u3059\u3002 \u3053\u306e\u30d5\u30a9\u30eb\u30c0\u306e\u4e2d\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u52dd\u624b\u306b\u7de8\u96c6 \u3057\u306a\u3044 \u3068\u8a93\u3063\u3066\u304f\u3060\u3055\u3044\u3002 \u3053\u308c\u306f\u30b3\u30a2 (\u5fc3\u81d3\u90e8\u5206) \u3067\u3001\u3053\u3053\u3092\u3044\u3058\u3063\u3066\u3057\u307e\u3046\u3068\u3001\u79c1\u305f\u3061\u306f\u3082\u3046\u52a9\u3051\u3092\u5dee\u3057\u4f38\u3079\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n    /webroot // \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u3042\u306a\u305f\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d1\u30d6\u30ea\u30c3\u30af\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u3067\u3059\u3002\n    .editorconfig\n    .gitignore\n    .htaccess\n    .travis.yml\n    composer.json\n    index.php\n    phpunit.xml.dist\n    README.md\n\n\u4f5c\u3063\u305fProject\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\u3053\u3053\u307e\u3067\u304cCakePHP3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u3067\u3059\u3002\n\u6b21\u306b\u306fCakePHP3 \u521d\u671f\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u307f\u307e\u3059\u3002\n\n2. CakePHP3 \u521d\u671f\u8a2d\u5b9a\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u4f5c\u6210\nDB\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n* postgres\u306e\u5834\u5408\ncommand\n    cd /var/www/html/\n    psql -U postgres\n    postgres=# create database {{DB name}};\n    CREATE DATABASE\n\n* mysql\u306e\u5834\u5408\ncommand\n    cd /var/www/html/\n    mysql -u root -p\n    create database {{DB name}};\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u8a2d\u5b9a\n\u4eca\u4f5c\u3063\u305fDB\u3092CakePHP3\u306b\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046\u3002\ncommand\n    vim /var/www/html/{{project name}}/app/config/app.php\n\n* /var/www/html/{{project name}}/app/config/app.php\n220\u884c\u76ee\n\nvim\n    // Postgres\u306e\u65b9\u306f\u3001test\u306edriver\u3082\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n    'Datasources' => [\n            'default' => [\n                'className' => 'Cake\\Database\\Connection',\n                // 'driver' => 'Cake\\Database\\Driver\\Mysql',\n                'driver' => 'Cake\\Database\\Driver\\Postgres',\n                'persistent' => false,\n                'host' => 'localhost',\n                /**\n                 * CakePHP will use the default DB port based on the driver selected\n                 * MySQL on MAMP uses port 8889, MAMP users will want to uncomment\n                 * the following line and set the port accordingly\n                 */\n                //'port' => 'non_standard_port_number',\n                'username' => '{username}', // 231\u884c\n                'password' => '{password}', // 232\u884c\n                'database' => '{{DB name}}', // 233\u884c\n                'encoding' => 'utf8',\n                'timezone' => 'UTC',\n                'flags' => [],\n                'cacheMetadata' => true,\n                'log' => false,\n            ]\n    ]\n\n\n\u30ad\u30e3\u30c3\u30b7\u30e5\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u8a2d\u5b9a\n* /var/www/html/{{project name}}/app/config/app.php\n85\u884c\u76ee\n\n    'Cache' => [\n        'default' => [\n            'className' => 'File',\n            'path' => CACHE,\n            'url' => env('CACHE_DEFAULT_URL', null),\n        ],\n\n        /**\n         * Configure the cache used for general framework caching.\n         * Translation cache files are stored with this configuration.\n         * Duration will be set to '+1 year' in bootstrap.php when debug = false\n         */\n        '_cake_core_' => [ \n            'className' => 'File',\n            'prefix' => 'myapp_cake_core_',\n            'path' => CACHE . 'persistent/',\n            'serialize' => true,\n            'duration' => '+2 minutes',\n            'url' => env('CACHE_CAKECORE_URL', null),\n            'mask' => 0666, // 104\u884c\n        ],\n\n        /**\n         * Configure the cache for model and datasource caches. This cache\n         * configuration is used to store schema descriptions, and table listings\n         * in connections.\n         * Duration will be set to '+1 year' in bootstrap.php when debug = false\n         */\n        '_cake_model_' => [\n            'className' => 'File',\n            'prefix' => 'myapp_cake_model_',\n            'path' => CACHE . 'models/',\n            'serialize' => true,\n            'duration' => '+2 minutes',\n            'url' => env('CACHE_CAKEMODEL_URL', null),\n            'mask' => 0666, // 120\u884c\n        ],\n    ],\n\n\n3. \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\n\u60c5\u5831\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306eTable\u306emigration\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u53c2\u8003\uff1ahttp://book.cakephp.org/3.0/ja/migrations.html\n\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n* /var/www/html/{{project name}}\n\ncommand\n    // accounts \u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\n    bin/cake bake migration CreateUsers name:text description:text username:text password:text created modified\n\n\n\u30b7\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\nLogin\u30e6\u30fc\u30b6\u30fc\u306e\u521d\u671f\u5024\u3092\u8a2d\u5b9a\u3059\u308b\u30b7\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n* /var/www/html/{{project name}}\n\ncommand\n    bin/cake bake seed Users\n\n\u30b7\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63\n* /var/www/html/{{project name}}\n\ncommand\n    vim config/Seeds/UsersSeed.php\n\n* /var/www/html/{{project name}}/config/Seeds/UsersSeed.php\n3\u884c\u76ee\n\nvim\n    use Cake\\Auth\\DefaultPasswordHasher;  \n\n* /var/www/html/{{project name}}/config/Seeds/UsersSeed.php\n19\u884c\u76ee\n\nvim\n    public function run()\n    {\n        $data = [\n          [\n              'name'            => 'AccountA',\n              'description'     => '',\n              'username'        => 'admin',\n              'password'        => (new DefaultPasswordHasher)->hash('admin'),\n              'created'         => date('Y-m-d H:i:s'),\n              'modified'        => date('Y-m-d H:i:s'),\n          ]\n        ];\n    }\n\n\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u5b9f\u884c\n\u8a2d\u5b9a\u3057\u305fmigration\u30d5\u30a1\u30a4\u30eb\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n* /var/www/html/{{project name}}\n\ncommand\n    bin/cake migrations migrate\n\n\n\u30b7\u30fc\u30c9\u5b9f\u884c\n* /var/www/html/{{project name}}\n\ncommand\n    bin/cake migrations seed --seed UsersSeed\n\n\n5. Bake\n\u57fa\u672c\u7684\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092 \u7d20\u65e9\u304f\u751f\u6210\u3059\u308b\u305f\u3081\u306b bake \u30b3\u30f3\u30bd\u30fc\u30eb \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n* /var/www/html/{{project name}}\n\nbin/cake bake all users\n\n\n\u78ba\u8a8d\n\n\u4e00\u89a7 \uff1a http://{{\u81ea\u5206\u306eIP}}/{{project name}}/users\n\u767b\u9332 \uff1a http://{{\u81ea\u5206\u306eIP}}/{{project name}}/users/add\n\u7de8\u96c6 \uff1a http://{{\u81ea\u5206\u306eIP}}/{{project name}}/users/edit/{{id}}\n\n\n6. \u767b\u9332\u3001\u7de8\u96c6\u3001\u524a\u9664\u3092\u3084\u3063\u3066\u307f\u3088\u3046\n\n\u4e00\u89a7\nURL\nhttp://{{\u81ea\u5206\u306eIP}}/{{project name}}/users\n\n\n\n\u767b\u9332\nURL\nhttp://{{\u81ea\u5206\u306eIP}}/{{project name}}/users/add\n\n\n\n\u8a73\u7d30\nURL\nhttp://{{\u81ea\u5206\u306eIP}}/{{project name}}/users/view/{{id}}\n\n\n\n\u7de8\u96c6\nURL\nhttp://{{\u81ea\u5206\u306eIP}}/{{project name}}/users/edit/{{id}}\n\n\n\n\u524a\u9664\n\u4e00\u89a7\u753b\u9762\u306b\u3042\u308bdelete\u3092\u62bc\u3057\u3066\u307f\u307e\u3057\u3087\u3046\uff01\n\n\n7. \u30ed\u30b0\u30a4\u30f3\u53ca\u3073\u30ed\u30b0\u30a2\u30a6\u30c8\u6a5f\u80fd\n\nAuth\nCakePHP\u306b\u306f\u8a8d\u8a3c\u6a5f\u80fd\u306a\u3069\u3092\u5b9f\u88c5\u3057\u3084\u3059\u304f\u3059\u308bAuth\u30b3\u30f3\u30dd\u30fc\u30cd\u30c3\u30c8\u304c\u6a19\u6e96\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u307e\u305aAuth\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3057\u3087\u3046\u3002\n\nsrc/Controller/AppController.php \u306e\u4fee\u6b63\n\ncommand\n    vim src/Controller/AppController.php\n\nvim\n    public function initialize()\n    {\n        parent::initialize();\n\n        $this->loadComponent('RequestHandler');\u3000// RequestHandler\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3002\u5165\u529b\u3055\u308c\u305f\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u306a\u3069\u306b\u4f7f\u7528\n        $this->loadComponent('Flash');\u3000// Flash\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3002\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u8868\u793a\u306a\u3069\u306b\u4f7f\u7528\n        $this->loadComponent('Auth', [\u3000// Auth\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u8aad\u307f\u8fbc\u307f\n            'authenticate' => [\n                'Form' => [\u3000// \u8a8d\u8a3c\u306e\u7a2e\u985e\u3092\u6307\u5b9a\u3002Form,Basic,Digest\u304c\u4f7f\u3048\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306fForm\n                    // 'userModel' => 'Users', // \u30c7\u30d5\u30a9\u30eb\u30c8\u3067Users\u306b\u306a\u3063\u3066\u3044\u308b\n                    'fields' => [\u3000// \u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u4f7f\u3046\u30ab\u30e9\u30e0\u306e\u6307\u5b9a\u3002\u7701\u7565\u3057\u305f\u5834\u5408\u306fusername\u3068password\u306b\u306a\u308b\n                        'username' => 'username', // \u30e6\u30fc\u30b6\u30fc\u540d\u306e\u30ab\u30e9\u30e0\u3092\u6307\u5b9a\n                        'password' => 'password' //\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u4f7f\u3046\u30ab\u30e9\u30e0\u3092\u6307\u5b9a\n                    ]\n                ]\n            ],\n            'loginRedirect' => [ // \u30ed\u30b0\u30a4\u30f3\u5f8c\u306b\u9077\u79fb\u3059\u308b\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\n                'controller' => 'Users',\n                'action' => 'index'\n            ],\n            'loginAction' => [ // \u30ed\u30b0\u30a2\u30a6\u30c8\u5f8c\u306b\u9077\u79fb\u3059\u308b\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\n                'controller' => 'Users',\n                'action' => 'login',\n            ],\n        ]);\n    }\n\n\n\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3068\u30ed\u30b0\u30a2\u30a6\u30c8\u6a5f\u80fd\u306e\u4f5c\u6210\n\u307e\u305aUsersController\u306blogin\u3068logout action\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\ncommand\n    vim src/Controller/AccountsController.php\n\nvim\n    public function login()\n    {\n        if ($this->request->is('post')) {\n            $user = $this->Auth->identify();\n            if ($user) {\n                $this->Auth->setUser($user);\n                return $this->redirect($this->Auth->redirectUrl());\n            }\n            $this->Flash->error(__('Invalid username or password, try again'));\n        }\n    }\n\n    public function logout()\n    {\n        return $this->redirect($this->Auth->logout());\n    }\n\nsrc/Template/Accounts/login.ctp \u306e\u4f5c\u6210\ncommand\n    vim src/Template/Accounts/login.ctp\n\nvim\n    <!-- File: src/Template/Users/login.ctp -->\n    <div class=\"users form\">\n        <?= $this->Flash->render('auth') ?>\n        <?= $this->Form->create() ?>\n            <fieldset>\n                <legend><?= __('Please enter your username and password') ?></legend>\n                <?= $this->Form->input('username') ?>\n                <?= $this->Form->input('password') ?>\n            </fieldset>\n        <?= $this->Form->button(__('Login')); ?>\n        <?= $this->Form->end() ?>\n    </div>\n\n\nPassword\u6697\u53f7\u5316\nCakePHP3\u304b\u3089\u306fGetter\u3001Setter\u3068\u3044\u3046\u6982\u5ff5\u304c\u3067\u304d\u307e\u3057\u305f\u3002\nPassword\u6697\u53f7\u5316\u306fSetter\u3092\u4f7f\u3063\u3066\u3001\u8a2d\u5b9a\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\ncommand\n    vim src/Model/Entity/Account.php \n\nvim\n    use Cake\\Auth\\DefaultPasswordHasher;\n\nvim\n    protected function _setPassword($password)\n    {\n        return (new DefaultPasswordHasher)->hash($password);\n    }\n\n## \u76ee\u6b21\n\n1. \u30b4\u30fc\u30eb\n2. CakePHP 3 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n3. CakePHP3 \u521d\u671f\u8a2d\u5b9a\n4. \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\n5. Bake\n6. \u767b\u9332\u3001\u7de8\u96c6\u3001\u524a\u9664\u3092\u3084\u3063\u3066\u307f\u3088\u3046\u3002\n7. \u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306e\u4f5c\u6210\n\n## 1. \u30b4\u30fc\u30eb\n\nCakePHP3\u306eBake\u3067\u7c21\u5358\u306bProject\u3092\u4f5c\u6210\u3057\n\u89e6\u3063\u3066\u307f\u308b\u3002\n\n## 2. CakePHP 3 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u307e\u305aCakePHP3 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3057\u3087\u3046\uff01\n\n### \u30b7\u30b9\u30c6\u30e0\u8981\u4ef6\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u524d\u306bCakePHP3\u306e\u30b7\u30b9\u30c6\u30e0\u8981\u4ef6\u3092\u77e5\u308a\u307e\u3057\u3087\u3046\uff01\n\n - HTTP\u30b5\u30fc\u30d0\u30fc(\u4f8b: Apache\u3002mod_rewrite \u304c\u63a8\u5968\u3055\u308c\u307e\u3059\u304c\u3001\u5fc5\u9808\u3067\u306f\u3042\u308a\u307e\u305b\u3093)\n - PHP 5.6 \u4ee5\u4e0a (PHP 7 \u3082\u542b\u3080)\n - PHP mbstring \u62e1\u5f35\n - PHP intl \u62e1\u5f35\n - DB(\u5fc5\u305a\u5fc5\u8981\u3067\u306f\u3042\u308a\u307e\u305b\u3093)\n   - MySQL (5.1.10 \u4ee5\u4e0a)\n   - PostgreSQL\n   - Microsoft SQL Server (2008 \u4ee5\u4e0a)\n   - SQLite 3\n   \n\u4eca\u56de\u306fMySQL or PostgreSQL\u60f3\u5b9a\n* \u7d44\u307f\u8fbc\u307f\u306e\u30c9\u30e9\u30a4\u30d0\u306f\u5168\u3066 PDO \u3092\u5fc5\u8981\u3068\u3057\u307e\u3059\u3002 \u6b63\u3057\u3044 PDO \u62e1\u5f35\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u304b\u5fc5\u305a\u78ba\u304b\u3081\u3066\u304f\u3060\u3055\u3044\u3002\n\n### CakePHP \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u59cb\u3081\u308b\u524d\u306b\u3001PHP \u30d0\u30fc\u30b8\u30e7\u30f3\u304cPHP 5.6 \u4ee5\u4e0a\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u53c2\u8003\uff1ahttp://book.cakephp.org/3.0/ja/installation.html\n\n```\n*\u53e9\u304f\u5834\u6240\u306f\u3069\u3053\u3067\u3082\u3088\u3044\ncommand\n    php -v\n```\n\n### CakePHP3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n- CakePHP \u306e\u516c\u5f0f\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u3068\u3057\u3066\u3001\u4f9d\u5b58\u6027\u7ba1\u7406\u30c4\u30fc\u30eb Composer \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```\ncommand\n    cd /var/www/html/\n    curl -s https://getcomposer.org/installer | php\n```\n\n```\noutput\n\nAll settings correct for using Composer\nDownloading 1.0.0...\n\nComposer successfully installed to: /var/www/html/htdocs/hands-on/composer.phar\nUse it: php composer.phar\n```\n\n- composer.phar \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u78ba\u8a8d\n\n```\ncommand\n    cd /var/www/html/\n    ls -la\n```\n\n```\noutput\n    composer.phar\n```\n\n### CakePHP3 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\n\n```\ncommand\n    cd /var/www/html/\n    php composer.phar create-project --prefer-dist cakephp/app {{project name}}\n```\n\n```\nWriting lock file\nGenerating autoload files\n> Cake\\Composer\\Installer\\PluginInstaller::postAutoloadDump\n> App\\Console\\Installer::postInstall\nCreated `config/app.php` file\nSet Folder Permissions ? (Default to Y) [Y,n]? Y\n```\n\n```\nURL\n    http://{{\u81ea\u5206\u306eIP}}/{{project name}}/\n```\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/74128/cd80dfa4-93c9-1b4d-0751-c24ce9ab58c9.png)\n![image](https://qiita-image-store.s3.amazonaws.com/0/74128/9752e1c4-e92c-09fd-cff6-826ad627b4da.png)\n\n\n- \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u78ba\u8a8d\n\n\u57fa\u672c\u7684\u306b\u306f\u4e0b\u8a18\u306e\u69cb\u6210\u306eProject\u304c\u3067\u304d\u307e\u3059\u3002\n\n```\n/{{project name}}\n    /bin // \u5b9f\u884c\u53ef\u80fd\u306aCake\u30b3\u30f3\u30bd\u30fc\u30eb\u304c\u5165\u308a\u307e\u3059\u3002\n    /config // CakePHP \u304c\u4f7f\u7528\u3059\u308b\uff08\u6570\u500b\u306e\uff09\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u5165\u308b\u5834\u6240\u3067\u3059\u3002 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u306e\u8a73\u7d30\u3001\u30d6\u30fc\u30c8\u30b9\u30c8\u30e9\u30c3\u30d7\u3001\u30b3\u30a2\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u304c\u3053\u3053\u306b\u5165\u308a\u307e\u3059\u3002\n    /logs\n    /plugins // \u3042\u306a\u305f\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u4f7f\u3046\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u5165\u308a\u307e\u3059\u3002\n    /src // \u4f5c\u6210\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u304c\u5165\u308b\u5834\u6240\u3067\u3059\u3002 \u3042\u306a\u305f\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u3053\u3053\u306b\u5165\u308c\u307e\u3059\u3002\n    /tests // \u3042\u306a\u305f\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u304c\u5165\u308b\u5834\u6240\u3067\u3059\u3002\n    /tmp // CakePHP \u306e\u4e00\u6642\u7684\u306a\u30c7\u30fc\u30bf\u304c\u5165\u308b\u5834\u6240\u3067\u3059\u3002\n    /vendor // CakePHP \u3068\u4ed6\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u5165\u308b\u5834\u6240\u3067\u3059\u3002 \u3053\u306e\u30d5\u30a9\u30eb\u30c0\u306e\u4e2d\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u52dd\u624b\u306b\u7de8\u96c6 \u3057\u306a\u3044 \u3068\u8a93\u3063\u3066\u304f\u3060\u3055\u3044\u3002 \u3053\u308c\u306f\u30b3\u30a2 (\u5fc3\u81d3\u90e8\u5206) \u3067\u3001\u3053\u3053\u3092\u3044\u3058\u3063\u3066\u3057\u307e\u3046\u3068\u3001\u79c1\u305f\u3061\u306f\u3082\u3046\u52a9\u3051\u3092\u5dee\u3057\u4f38\u3079\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n    /webroot // \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u3042\u306a\u305f\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d1\u30d6\u30ea\u30c3\u30af\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u3067\u3059\u3002\n    .editorconfig\n    .gitignore\n    .htaccess\n    .travis.yml\n    composer.json\n    index.php\n    phpunit.xml.dist\n    README.md\n```\n\n\u4f5c\u3063\u305fProject\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\u3053\u3053\u307e\u3067\u304cCakePHP3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u3067\u3059\u3002\n\u6b21\u306b\u306fCakePHP3 \u521d\u671f\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u307f\u307e\u3059\u3002\n\n## 2. CakePHP3 \u521d\u671f\u8a2d\u5b9a\n\n### \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u4f5c\u6210\n\nDB\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```\n* postgres\u306e\u5834\u5408\ncommand\n    cd /var/www/html/\n    psql -U postgres\n    postgres=# create database {{DB name}};\n    CREATE DATABASE\n```\n\n```\n* mysql\u306e\u5834\u5408\ncommand\n    cd /var/www/html/\n    mysql -u root -p\n    create database {{DB name}};\n```\n\n### \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u8a2d\u5b9a\n\n\u4eca\u4f5c\u3063\u305fDB\u3092CakePHP3\u306b\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046\u3002\n\n```\ncommand\n    vim /var/www/html/{{project name}}/app/config/app.php\n```\n\n```\n* /var/www/html/{{project name}}/app/config/app.php\n220\u884c\u76ee\n\nvim\n    // Postgres\u306e\u65b9\u306f\u3001test\u306edriver\u3082\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n    'Datasources' => [\n            'default' => [\n                'className' => 'Cake\\Database\\Connection',\n                // 'driver' => 'Cake\\Database\\Driver\\Mysql',\n                'driver' => 'Cake\\Database\\Driver\\Postgres',\n                'persistent' => false,\n                'host' => 'localhost',\n                /**\n                 * CakePHP will use the default DB port based on the driver selected\n                 * MySQL on MAMP uses port 8889, MAMP users will want to uncomment\n                 * the following line and set the port accordingly\n                 */\n                //'port' => 'non_standard_port_number',\n                'username' => '{username}', // 231\u884c\n                'password' => '{password}', // 232\u884c\n                'database' => '{{DB name}}', // 233\u884c\n                'encoding' => 'utf8',\n                'timezone' => 'UTC',\n                'flags' => [],\n                'cacheMetadata' => true,\n                'log' => false,\n            ]\n    ]\n```\n\n### \u30ad\u30e3\u30c3\u30b7\u30e5\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u8a2d\u5b9a\n\n```\n* /var/www/html/{{project name}}/app/config/app.php\n85\u884c\u76ee\n\n    'Cache' => [\n        'default' => [\n            'className' => 'File',\n            'path' => CACHE,\n            'url' => env('CACHE_DEFAULT_URL', null),\n        ],\n\n        /**\n         * Configure the cache used for general framework caching.\n         * Translation cache files are stored with this configuration.\n         * Duration will be set to '+1 year' in bootstrap.php when debug = false\n         */\n        '_cake_core_' => [ \n            'className' => 'File',\n            'prefix' => 'myapp_cake_core_',\n            'path' => CACHE . 'persistent/',\n            'serialize' => true,\n            'duration' => '+2 minutes',\n            'url' => env('CACHE_CAKECORE_URL', null),\n            'mask' => 0666, // 104\u884c\n        ],\n\n        /**\n         * Configure the cache for model and datasource caches. This cache\n         * configuration is used to store schema descriptions, and table listings\n         * in connections.\n         * Duration will be set to '+1 year' in bootstrap.php when debug = false\n         */\n        '_cake_model_' => [\n            'className' => 'File',\n            'prefix' => 'myapp_cake_model_',\n            'path' => CACHE . 'models/',\n            'serialize' => true,\n            'duration' => '+2 minutes',\n            'url' => env('CACHE_CAKEMODEL_URL', null),\n            'mask' => 0666, // 120\u884c\n        ],\n    ],\n```\n\n## 3. \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\n\n\u60c5\u5831\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306eTable\u306emigration\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u53c2\u8003\uff1ahttp://book.cakephp.org/3.0/ja/migrations.html\n\n### \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n\n```\n* /var/www/html/{{project name}}\n\ncommand\n    // accounts \u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\n    bin/cake bake migration CreateUsers name:text description:text username:text password:text created modified\n```\n\n### \u30b7\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n\nLogin\u30e6\u30fc\u30b6\u30fc\u306e\u521d\u671f\u5024\u3092\u8a2d\u5b9a\u3059\u308b\u30b7\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```\n* /var/www/html/{{project name}}\n\ncommand\n    bin/cake bake seed Users\n```\n\n\u30b7\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63\n\n```\n* /var/www/html/{{project name}}\n\ncommand\n    vim config/Seeds/UsersSeed.php\n```\n\n```\n* /var/www/html/{{project name}}/config/Seeds/UsersSeed.php\n3\u884c\u76ee\n\nvim\n    use Cake\\Auth\\DefaultPasswordHasher;  \n```\n\n```\n* /var/www/html/{{project name}}/config/Seeds/UsersSeed.php\n19\u884c\u76ee\n\nvim\n    public function run()\n    {\n        $data = [\n          [\n              'name'            => 'AccountA',\n              'description'     => '',\n              'username'        => 'admin',\n              'password'        => (new DefaultPasswordHasher)->hash('admin'),\n              'created'         => date('Y-m-d H:i:s'),\n              'modified'        => date('Y-m-d H:i:s'),\n          ]\n        ];\n    }\n```\n\n### \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u5b9f\u884c\n\n\u8a2d\u5b9a\u3057\u305fmigration\u30d5\u30a1\u30a4\u30eb\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```\n* /var/www/html/{{project name}}\n\ncommand\n    bin/cake migrations migrate\n```\n\n### \u30b7\u30fc\u30c9\u5b9f\u884c\n\n```\n* /var/www/html/{{project name}}\n\ncommand\n    bin/cake migrations seed --seed UsersSeed\n```\n\n## 5. Bake\n\n\u57fa\u672c\u7684\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092 \u7d20\u65e9\u304f\u751f\u6210\u3059\u308b\u305f\u3081\u306b bake \u30b3\u30f3\u30bd\u30fc\u30eb \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n\n```\n* /var/www/html/{{project name}}\n\nbin/cake bake all users\n```\n\n- \u78ba\u8a8d\n\n```\n\u4e00\u89a7 \uff1a http://{{\u81ea\u5206\u306eIP}}/{{project name}}/users\n\u767b\u9332 \uff1a http://{{\u81ea\u5206\u306eIP}}/{{project name}}/users/add\n\u7de8\u96c6 \uff1a http://{{\u81ea\u5206\u306eIP}}/{{project name}}/users/edit/{{id}}\n```\n\n## 6. \u767b\u9332\u3001\u7de8\u96c6\u3001\u524a\u9664\u3092\u3084\u3063\u3066\u307f\u3088\u3046\n\n### \u4e00\u89a7\n\n```\nURL\nhttp://{{\u81ea\u5206\u306eIP}}/{{project name}}/users\n```\n\n<img width=\"642\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-13 20.04.55.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/74128/9c1db416-5697-1669-cfe2-34764d6ec1db.png\">\n\n### \u767b\u9332\n\n```\nURL\nhttp://{{\u81ea\u5206\u306eIP}}/{{project name}}/users/add\n```\n\n<img width=\"1246\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-13 20.11.15.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/74128/6b4202d1-4723-3c58-d3a2-699b1f384fae.png\">\n\n\n\n### \u8a73\u7d30\n\n```\nURL\nhttp://{{\u81ea\u5206\u306eIP}}/{{project name}}/users/view/{{id}}\n```\n\n<img width=\"656\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-13 20.05.14.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/74128/f612e1c8-c2ab-d25f-8e66-3be945233b07.png\">\n\n\n### \u7de8\u96c6\n\n```\nURL\nhttp://{{\u81ea\u5206\u306eIP}}/{{project name}}/users/edit/{{id}}\n```\n\n<img width=\"1207\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-13 20.05.29.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/74128/c1236b6a-2700-6f75-7565-29b44ec8f5d5.png\">\n\n\n### \u524a\u9664\n\n\u4e00\u89a7\u753b\u9762\u306b\u3042\u308bdelete\u3092\u62bc\u3057\u3066\u307f\u307e\u3057\u3087\u3046\uff01\n\n<img width=\"1264\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-13 20.14.34.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/74128/61414074-322a-a28c-90a2-d7a33080c4f8.png\">\n\n\n## 7. \u30ed\u30b0\u30a4\u30f3\u53ca\u3073\u30ed\u30b0\u30a2\u30a6\u30c8\u6a5f\u80fd\n\n### Auth\n\nCakePHP\u306b\u306f\u8a8d\u8a3c\u6a5f\u80fd\u306a\u3069\u3092\u5b9f\u88c5\u3057\u3084\u3059\u304f\u3059\u308bAuth\u30b3\u30f3\u30dd\u30fc\u30cd\u30c3\u30c8\u304c\u6a19\u6e96\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u307e\u305aAuth\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3057\u3087\u3046\u3002\n\n- src/Controller/AppController.php \u306e\u4fee\u6b63\n\n```\ncommand\n    vim src/Controller/AppController.php\n```\n\n```\nvim\n    public function initialize()\n    {\n        parent::initialize();\n\n        $this->loadComponent('RequestHandler');\u3000// RequestHandler\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3002\u5165\u529b\u3055\u308c\u305f\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u306a\u3069\u306b\u4f7f\u7528\n        $this->loadComponent('Flash');\u3000// Flash\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3002\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u8868\u793a\u306a\u3069\u306b\u4f7f\u7528\n        $this->loadComponent('Auth', [\u3000// Auth\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u8aad\u307f\u8fbc\u307f\n            'authenticate' => [\n                'Form' => [\u3000// \u8a8d\u8a3c\u306e\u7a2e\u985e\u3092\u6307\u5b9a\u3002Form,Basic,Digest\u304c\u4f7f\u3048\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306fForm\n                    // 'userModel' => 'Users', // \u30c7\u30d5\u30a9\u30eb\u30c8\u3067Users\u306b\u306a\u3063\u3066\u3044\u308b\n                    'fields' => [\u3000// \u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u4f7f\u3046\u30ab\u30e9\u30e0\u306e\u6307\u5b9a\u3002\u7701\u7565\u3057\u305f\u5834\u5408\u306fusername\u3068password\u306b\u306a\u308b\n                        'username' => 'username', // \u30e6\u30fc\u30b6\u30fc\u540d\u306e\u30ab\u30e9\u30e0\u3092\u6307\u5b9a\n                        'password' => 'password' //\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u4f7f\u3046\u30ab\u30e9\u30e0\u3092\u6307\u5b9a\n                    ]\n                ]\n            ],\n            'loginRedirect' => [ // \u30ed\u30b0\u30a4\u30f3\u5f8c\u306b\u9077\u79fb\u3059\u308b\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\n                'controller' => 'Users',\n                'action' => 'index'\n            ],\n            'loginAction' => [ // \u30ed\u30b0\u30a2\u30a6\u30c8\u5f8c\u306b\u9077\u79fb\u3059\u308b\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\n                'controller' => 'Users',\n                'action' => 'login',\n            ],\n        ]);\n    }\n```\n### \u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3068\u30ed\u30b0\u30a2\u30a6\u30c8\u6a5f\u80fd\u306e\u4f5c\u6210\n\n\u307e\u305aUsersController\u306blogin\u3068logout action\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```\ncommand\n    vim src/Controller/AccountsController.php\n```\n\n```\nvim\n    public function login()\n    {\n        if ($this->request->is('post')) {\n            $user = $this->Auth->identify();\n            if ($user) {\n                $this->Auth->setUser($user);\n                return $this->redirect($this->Auth->redirectUrl());\n            }\n            $this->Flash->error(__('Invalid username or password, try again'));\n        }\n    }\n\n    public function logout()\n    {\n        return $this->redirect($this->Auth->logout());\n    }\n```\n\nsrc/Template/Accounts/login.ctp \u306e\u4f5c\u6210\n\n```\ncommand\n    vim src/Template/Accounts/login.ctp\n```\n\n```\nvim\n    <!-- File: src/Template/Users/login.ctp -->\n    <div class=\"users form\">\n        <?= $this->Flash->render('auth') ?>\n        <?= $this->Form->create() ?>\n            <fieldset>\n                <legend><?= __('Please enter your username and password') ?></legend>\n                <?= $this->Form->input('username') ?>\n                <?= $this->Form->input('password') ?>\n            </fieldset>\n        <?= $this->Form->button(__('Login')); ?>\n        <?= $this->Form->end() ?>\n    </div>\n```\n\n### Password\u6697\u53f7\u5316\n\nCakePHP3\u304b\u3089\u306fGetter\u3001Setter\u3068\u3044\u3046\u6982\u5ff5\u304c\u3067\u304d\u307e\u3057\u305f\u3002\nPassword\u6697\u53f7\u5316\u306fSetter\u3092\u4f7f\u3063\u3066\u3001\u8a2d\u5b9a\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```\ncommand\n    vim src/Model/Entity/Account.php \n```\n\n```\nvim\n    use Cake\\Auth\\DefaultPasswordHasher;\n```\n\n```\nvim\n    protected function _setPassword($password)\n    {\n        return (new DefaultPasswordHasher)->hash($password);\n    }\n```\n\n", "tags": ["cakephp3"]}