{"context": "\n\n1 \u74b0\u5883\n[root@master1 ~]# cat /etc/redhat-release\nCentOS Linux release 7.1.1503 (Core)\n\n\n\n2 \u73fe\u5728\u306e\u30e9\u30f3\u30ec\u30d9\u30eb\n[root@master1 ~]# systemctl get-default\nmulti-user.target\n\n\n\n3 k8s,etcd,Docker\u306e\u30e6\u30cb\u30c3\u30c8\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u306e\u683c\u7d0d\u5834\u6240(/usr/lib/systemd/system\u914d\u4e0b)\n[root@master1 ~]# ls -la /etc/systemd/system/multi-user.target.wants|grep -e kube -e etcd -e docker\nlrwxrwxrwx. 1 root root   38 11\u6708  9 20:13 docker.service -> /usr/lib/systemd/system/docker.service\nlrwxrwxrwx. 1 root root   36 11\u6708 14 20:07 etcd.service -> /usr/lib/systemd/system/etcd.service\nlrwxrwxrwx. 1 root root   46 11\u6708 16 20:11 kube-apiserver.service -> /usr/lib/systemd/system/kube-apiserver.service\nlrwxrwxrwx. 1 root root   55 11\u6708 18 20:01 kube-controller-manager.service -> /usr/lib/systemd/system/kube-controller-manager.service\nlrwxrwxrwx. 1 root root   42 11\u6708 18 20:01 kube-proxy.service -> /usr/lib/systemd/system/kube-proxy.service\nlrwxrwxrwx. 1 root root   46 11\u6708 18 20:01 kube-scheduler.service -> /usr/lib/systemd/system/kube-scheduler.service\nlrwxrwxrwx. 1 root root   39 11\u6708 16 20:11 kubelet.service -> /usr/lib/systemd/system/kubelet.service\n[root@master1 ~]#\n\n\n\n4 \u8d77\u52d5\u9806\u5e8f\n[Unit]\nDescription=Docker Application Container Engine\nAfter=network.target rhel-push-plugin.socket\nWants=docker-storage-setup.service\n\n[Unit]\nDescription=Etcd Server\nAfter=network.target\nAfter=network-online.target\nWants=network-online.target\n\n[Unit]\nDescription=Kubernetes API Server\nAfter=network.target\nAfter=etcd.service\n\n[Unit]\nDescription=Kubernetes Kube-Proxy Server\nAfter=network.target\n\n[Unit]\nDescription=Kubernetes Kubelet Server\nAfter=docker.service\nRequires=docker.service\n\n[Unit]\nDescription=Kubernetes Controller Manager\n\n[Unit]\nDescription=Kubernetes Scheduler Plugin\n\n\n\n5 \u8d77\u52d5\u6642\u306b\u8aad\u307f\u8fbc\u3080\u74b0\u5883\u5909\u6570\n\n\n\n\u30b5\u30fc\u30d3\u30b9\u540d\n\u8aad\u307f\u8fbc\u3080\u74b0\u5883\u5909\u6570\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb(EnvironmentFile\u5b9a\u7fa9)\n\u5099\u8003\n\n\n\n\ndocker.service\n/etc/sysconfig/docker\n\u74b0\u5883\u5909\u6570\u3068\u3057\u3066 GOTRACEBACK=crash \u3092\u8aad\u307f\u8fbc\u3080\n\n\n\n/etc/sysconfig/docker-storage\n\n\n\n\n/etc/sysconfig/docker-network\n\n\n\netcd.service\n/etc/etcd/etcd.conf\n\n\n\nkube-apiserver.service\n/etc/kubernetes/config\nk8s\u95a2\u9023\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u5171\u901a\u306e\n\n\n\n/etc/kubernetes/apiserver\n\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb(config)\u3092\u8aad\u307f\u8fbc\u3093\u3060\u3042\u3068\n\n\nkube-proxy.service\n/etc/kubernetes/config\n\u500b\u5225\u306e\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\n\n\n\n/etc/kubernetes/proxy\n\n\n\nkubelet.service\n/etc/kubernetes/config\n\n\n\n\n/etc/kubernetes/proxy\n\n\n\nkube-controller-manager.service\n/etc/kubernetes/config\n\n\n\n\n/etc/kubernetes/proxy\n\n\n\nkube-scheduler.service\n/etc/kubernetes/config\n\n\n\n\n/etc/kubernetes/proxy\n\n\n\n\n#1 \u74b0\u5883\n\n```\n[root@master1 ~]# cat /etc/redhat-release\nCentOS Linux release 7.1.1503 (Core)\n\n```\n\n\n#2 \u73fe\u5728\u306e\u30e9\u30f3\u30ec\u30d9\u30eb\n\n```\n[root@master1 ~]# systemctl get-default\nmulti-user.target\n\n```\n\n\n#3 k8s,etcd,Docker\u306e\u30e6\u30cb\u30c3\u30c8\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u306e\u683c\u7d0d\u5834\u6240(/usr/lib/systemd/system\u914d\u4e0b)\n\n```\n[root@master1 ~]# ls -la /etc/systemd/system/multi-user.target.wants|grep -e kube -e etcd -e docker\nlrwxrwxrwx. 1 root root   38 11\u6708  9 20:13 docker.service -> /usr/lib/systemd/system/docker.service\nlrwxrwxrwx. 1 root root   36 11\u6708 14 20:07 etcd.service -> /usr/lib/systemd/system/etcd.service\nlrwxrwxrwx. 1 root root   46 11\u6708 16 20:11 kube-apiserver.service -> /usr/lib/systemd/system/kube-apiserver.service\nlrwxrwxrwx. 1 root root   55 11\u6708 18 20:01 kube-controller-manager.service -> /usr/lib/systemd/system/kube-controller-manager.service\nlrwxrwxrwx. 1 root root   42 11\u6708 18 20:01 kube-proxy.service -> /usr/lib/systemd/system/kube-proxy.service\nlrwxrwxrwx. 1 root root   46 11\u6708 18 20:01 kube-scheduler.service -> /usr/lib/systemd/system/kube-scheduler.service\nlrwxrwxrwx. 1 root root   39 11\u6708 16 20:11 kubelet.service -> /usr/lib/systemd/system/kubelet.service\n[root@master1 ~]#\n\n```\n\n\n#4 \u8d77\u52d5\u9806\u5e8f\n\n\n```\n[Unit]\nDescription=Docker Application Container Engine\nAfter=network.target rhel-push-plugin.socket\nWants=docker-storage-setup.service\n\n[Unit]\nDescription=Etcd Server\nAfter=network.target\nAfter=network-online.target\nWants=network-online.target\n\n[Unit]\nDescription=Kubernetes API Server\nAfter=network.target\nAfter=etcd.service\n\n[Unit]\nDescription=Kubernetes Kube-Proxy Server\nAfter=network.target\n\n[Unit]\nDescription=Kubernetes Kubelet Server\nAfter=docker.service\nRequires=docker.service\n\n[Unit]\nDescription=Kubernetes Controller Manager\n\n[Unit]\nDescription=Kubernetes Scheduler Plugin\n\n```\n\n\n\n#5 \u8d77\u52d5\u6642\u306b\u8aad\u307f\u8fbc\u3080\u74b0\u5883\u5909\u6570\n\n\n| \u30b5\u30fc\u30d3\u30b9\u540d                     | \u8aad\u307f\u8fbc\u3080\u74b0\u5883\u5909\u6570\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb(EnvironmentFile\u5b9a\u7fa9)  |\u5099\u8003 |\n|:------------------------------|:------------------------------|:------------|\n|docker.service                 |/etc/sysconfig/docker          |\u74b0\u5883\u5909\u6570\u3068\u3057\u3066 GOTRACEBACK=crash \u3092\u8aad\u307f\u8fbc\u3080    |\n|                               |/etc/sysconfig/docker-storage  |   |\n|                               |/etc/sysconfig/docker-network  |   |\n|etcd.service                   |/etc/etcd/etcd.conf            |   |\n|kube-apiserver.service         |/etc/kubernetes/config         |k8s\u95a2\u9023\u306e\u30b5\u30fc\u30d3\u30b9\u306f\u5171\u901a\u306e             |\n|                               |/etc/kubernetes/apiserver      |\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb(config)\u3092\u8aad\u307f\u8fbc\u3093\u3060\u3042\u3068   |\n|kube-proxy.service             |/etc/kubernetes/config         |\u500b\u5225\u306e\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080           |\n|                               |/etc/kubernetes/proxy          |   |\n|kubelet.service                |/etc/kubernetes/config         |   |\n|                               |/etc/kubernetes/proxy          |   |\n|kube-controller-manager.service|/etc/kubernetes/config         |   |\n|                               |/etc/kubernetes/proxy          |   |\n|kube-scheduler.service         |/etc/kubernetes/config         |   |\n|                               |/etc/kubernetes/proxy          |   |\n\n", "tags": ["kubernetes", "systemd"]}