{"context": "Django:1.10\nDjango\u3067\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u8a8d\u8a3c\u30b7\u30b9\u30c6\u30e0\u3067\u30ed\u30b0\u30a4\u30f3\u5931\u6557\u6642\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\u3055\u305b\u305f\u3044\u3002\n\u3069\u3046\u3084\u3089\u3001Form\u306eadd_error\u3092\u4f7f\u3048\u3070\u3088\u3055\u305d\u3046\u3002\nThe Forms API | Django documentation | Django\nhttps://docs.djangoproject.com/en/1.10/ref/forms/api/#django.forms.Form.add_error\nform\u3092\u7528\u610f\u3057\u3066\u3001\n\nforms.py\nfrom django import forms\n\nclass LoginForm(forms.Form):\n    username = forms.CharField(label='LOGIN_ID', max_length=30)\n    password = forms.CharField(\n            label='PASSWORD', max_length=128, widget=forms.PasswordInput())\n\n\nview\u3067form\u306badd_error\u3057\u3066\u3001\n\nviews.py\nfrom django.contrib.auth import authenticate, login\nfrom django.shortcuts import get_object_or_404, redirect, render\n\nfrom .forms import LoginForm\n\ndef user_login(request):\n    form = LoginForm()\n    return render(request, 'polls/login.html', {'form': form})\n\ndef authentication(request):\n    form = LoginForm(request.POST)\n    if form.is_valid():\n        username = form.cleaned_data['username']\n        password = form.cleaned_data['password']\n        user = authenticate(username=username, password=password)\n        if user is not None:\n            if user.is_active:\n                login(request, user)\n                return redirect('polls:index')\n    form.add_error(None, 'LOGIN_ID\u3001\u307e\u305f\u306fPASSWORD\u304c\u9055\u3044\u307e\u3059\u3002')\n    return render(request, 'polls/login.html', {'form': form})\n\n\ntemplate\u3067\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3060\u3051\u3002\n(add_error\u306e\u7b2c1\u5f15\u6570\u3092NONE\u306b\u3057\u305f\u306e\u3067\u3001non_field_errors\u304b\u3089\u53d6\u5f97\u3059\u308b)\n\nlogin.html\n\u30fb\u30fb\u30fb\n{% for error in form.non_field_errors %}\n    <p>{{ error }}</p>\n{% endfor %}\n\u30fb\u30fb\u30fb\n\n\n\u3053\u3093\u306a\u611f\u3058\u306b\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n\nDjango:1.10\n\nDjango\u3067\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u8a8d\u8a3c\u30b7\u30b9\u30c6\u30e0\u3067\u30ed\u30b0\u30a4\u30f3\u5931\u6557\u6642\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\u3055\u305b\u305f\u3044\u3002\n\n\u3069\u3046\u3084\u3089\u3001Form\u306eadd_error\u3092\u4f7f\u3048\u3070\u3088\u3055\u305d\u3046\u3002\n\nThe Forms API | Django documentation | Django\nhttps://docs.djangoproject.com/en/1.10/ref/forms/api/#django.forms.Form.add_error\n\nform\u3092\u7528\u610f\u3057\u3066\u3001\n\n```python:forms.py\nfrom django import forms\n\nclass LoginForm(forms.Form):\n    username = forms.CharField(label='LOGIN_ID', max_length=30)\n    password = forms.CharField(\n            label='PASSWORD', max_length=128, widget=forms.PasswordInput())\n```\n\nview\u3067form\u306badd_error\u3057\u3066\u3001\n\n```python:views.py\nfrom django.contrib.auth import authenticate, login\nfrom django.shortcuts import get_object_or_404, redirect, render\n\nfrom .forms import LoginForm\n\ndef user_login(request):\n    form = LoginForm()\n    return render(request, 'polls/login.html', {'form': form})\n\ndef authentication(request):\n    form = LoginForm(request.POST)\n    if form.is_valid():\n        username = form.cleaned_data['username']\n        password = form.cleaned_data['password']\n        user = authenticate(username=username, password=password)\n        if user is not None:\n            if user.is_active:\n                login(request, user)\n                return redirect('polls:index')\n    form.add_error(None, 'LOGIN_ID\u3001\u307e\u305f\u306fPASSWORD\u304c\u9055\u3044\u307e\u3059\u3002')\n    return render(request, 'polls/login.html', {'form': form})\n```\n\ntemplate\u3067\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3060\u3051\u3002\n(add_error\u306e\u7b2c1\u5f15\u6570\u3092NONE\u306b\u3057\u305f\u306e\u3067\u3001non_field_errors\u304b\u3089\u53d6\u5f97\u3059\u308b)\n\n```html:login.html\n\u30fb\u30fb\u30fb\n{% for error in form.non_field_errors %}\n    <p>{{ error }}</p>\n{% endfor %}\n\u30fb\u30fb\u30fb\n```\n\n\u3053\u3093\u306a\u611f\u3058\u306b\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n\n![\u7121\u984c.png](https://qiita-image-store.s3.amazonaws.com/0/147868/934d2771-268c-fe9a-c613-20604f53c72c.png)\n", "tags": ["Python", "Django"]}