{"context": "\n\n\u30b3\u30ec\u306f\u4f55\nTurbolinks 5.0.0 \u3078\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u306e\u8a18\u9332\u3067\u3059\u3002\n\n\u8ab2\u984c\n\u3055\u3089\u3063\u3068 bundle update \u3067\u30a4\u30b1\u308b\u304b\u3068\u601d\u3044\u304d\u3084\u3001\u3044\u304f\u3064\u304b\u5bfe\u5fdc\u304c\u5fc5\u8981\u306a\u7b87\u6240\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\n\u30da\u30fc\u30b8\u5185\u30ea\u30f3\u30af\u3067\u30a4\u30d9\u30f3\u30c8\u767a\u706b\u3057\u3066\u3057\u307e\u3046\u4ef6\njquery-turbolinks \u5bfe\u5fdc\nnprogress-rails \u4e0d\u8981\n\n\n\u5bfe\u5fdc\n\n\u30da\u30fc\u30b8\u5185\u30ea\u30f3\u30af\u3067\u30a4\u30d9\u30f3\u30c8\u767a\u706b\u3057\u3066\u3057\u307e\u3046\u4ef6\n<a href=\"#hoge\">\u30a2\u30f3\u30ab\u30fc</a>\n\n\u306a\u3069\u3001\u30da\u30fc\u30b8\u5185\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u30a4\u30d9\u30f3\u30c8\u304c\u767a\u706b\u3057\u3001\u30ea\u30ed\u30fc\u30c9\u304c\u8d70\u3063\u3066\u3057\u307e\u3046\u3088\u3046\u3067\u3059\u3002\n\u2193 \u3067\u66ab\u5b9a\u5bfe\u5fdc\u3068\u3057\u307e\u3057\u305f\u3002\n\napp/assets/javascripts/turbolinks-compatibility.coffee\n# HACK: \u30da\u30fc\u30b8\u5185\u30ea\u30f3\u30af\u3067\u767a\u706b\u3057\u3066\u3057\u307e\u3046\u554f\u984c\u3078\u306e\u5bfe\u5fdc\n# Turbolinks should follow same-page anchor links without reloading the page\n# https://github.com/turbolinks/turbolinks/issues/75\nTurbolinks.Controller.prototype.nodeIsVisitableOld = Turbolinks.Controller.prototype.nodeIsVisitable\nTurbolinks.Controller.prototype.nodeIsVisitable = (node) ->\n  node.getAttribute('href') && node.getAttribute('href')[0] != '#' && Turbolinks.Controller.prototype.nodeIsVisitableOld(node)\n\n\n\njquery-turbolinks \u5bfe\u5fdc\n\u30a4\u30d9\u30f3\u30c8\u540d\u304c\u5909\u308f\u3063\u3066\u3044\u308b\u305f\u3081\u3001jquery-turbolinks \u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u306f\u8aad\u307f\u66ff\u3048\u304c\u5fc5\u8981\u3067\u3059\u3002\n\napp/assets/javascripts/turbolinks-compatibility.coffee\n# HACK: jquery-turbolinks \u5bfe\u5fdc\n# https://github.com/turbolinks/turbolinks/blob/master/src/turbolinks/compatibility.coffee\n{defer, dispatch} = Turbolinks\n\nhandleEvent = (eventName, handler) ->\n  document.addEventListener(eventName, handler, false)\n\ntranslateEvent = ({from, to}) ->\n  handler = (event) ->\n    event = dispatch(to, target: event.target, cancelable: event.cancelable, data: event.data)\n    event.preventDefault() if event.defaultPrevented\n  handleEvent(from, handler)\n\ntranslateEvent from: \"turbolinks:click\", to: \"page:before-change\"\ntranslateEvent from: \"turbolinks:request-start\", to: \"page:fetch\"\ntranslateEvent from: \"turbolinks:request-end\", to: \"page:receive\"\ntranslateEvent from: \"turbolinks:before-cache\", to: \"page:before-unload\"\ntranslateEvent from: \"turbolinks:render\", to: \"page:update\"\ntranslateEvent from: \"turbolinks:load\", to: \"page:change\"\ntranslateEvent from: \"turbolinks:load\", to: \"page:update\"\n\nloaded = false\nhandleEvent \"DOMContentLoaded\", ->\n  defer ->\n    loaded = true\nhandleEvent \"turbolinks:load\", ->\n  if loaded\n    dispatch(\"page:load\")\n\njQuery?(document).on \"ajaxSuccess\", (event, xhr, settings) ->\n  if jQuery.trim(xhr.responseText).length > 0\n    dispatch(\"page:update\")\n\n\n\nnprogress-rails \u4e0d\u8981\nTurbolinks \u306e\u6a19\u6e96\u6a5f\u80fd\u3067\u30d7\u30ed\u30b0\u30ec\u30b9\u30d0\u30fc\u3092\u8868\u793a\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n\u3053\u308c\u307e\u3067\u304a\u4e16\u8a71\u306b\u306a\u3063\u305f nprogress-rails \u3068\u306f\u304a\u5225\u308c\u3067\u3059  \u3002\n\u30b9\u30bf\u30a4\u30eb\u306f .turbolinks-progress-bar \u3067\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u53ef\u80fd  \u3067\u3059\u3002\n\napp/assets/stylesheets/turbolinks_progressbar.scss\n.turbolinks-progress-bar {\n  background-color: orange;\n}\n\n\n\n\u53c2\u8003\n\nHow to Upgrade to Turbolinks 5 - GoRails\nTurbolinks should follow same-page anchor links without reloading the page \u00b7 Issue #75 \u00b7 turbolinks/turbolinks\n\n# \u30b3\u30ec\u306f\u4f55\n\nTurbolinks 5.0.0 \u3078\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u306e\u8a18\u9332\u3067\u3059\u3002\n\n# \u8ab2\u984c\n\n\u3055\u3089\u3063\u3068 `bundle update` \u3067\u30a4\u30b1\u308b\u304b\u3068\u601d\u3044\u304d\u3084\u3001\u3044\u304f\u3064\u304b\u5bfe\u5fdc\u304c\u5fc5\u8981\u306a\u7b87\u6240\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\n- \u30da\u30fc\u30b8\u5185\u30ea\u30f3\u30af\u3067\u30a4\u30d9\u30f3\u30c8\u767a\u706b\u3057\u3066\u3057\u307e\u3046\u4ef6\n- jquery-turbolinks \u5bfe\u5fdc\n- nprogress-rails \u4e0d\u8981\n\n# \u5bfe\u5fdc\n\n## \u30da\u30fc\u30b8\u5185\u30ea\u30f3\u30af\u3067\u30a4\u30d9\u30f3\u30c8\u767a\u706b\u3057\u3066\u3057\u307e\u3046\u4ef6\n\n```html\n<a href=\"#hoge\">\u30a2\u30f3\u30ab\u30fc</a>\n```\n\n\u306a\u3069\u3001\u30da\u30fc\u30b8\u5185\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u30a4\u30d9\u30f3\u30c8\u304c\u767a\u706b\u3057\u3001\u30ea\u30ed\u30fc\u30c9\u304c\u8d70\u3063\u3066\u3057\u307e\u3046\u3088\u3046\u3067\u3059\u3002\n\u2193 \u3067\u66ab\u5b9a\u5bfe\u5fdc\u3068\u3057\u307e\u3057\u305f\u3002\n\n```coffeescript:app/assets/javascripts/turbolinks-compatibility.coffee\n# HACK: \u30da\u30fc\u30b8\u5185\u30ea\u30f3\u30af\u3067\u767a\u706b\u3057\u3066\u3057\u307e\u3046\u554f\u984c\u3078\u306e\u5bfe\u5fdc\n# Turbolinks should follow same-page anchor links without reloading the page\n# https://github.com/turbolinks/turbolinks/issues/75\nTurbolinks.Controller.prototype.nodeIsVisitableOld = Turbolinks.Controller.prototype.nodeIsVisitable\nTurbolinks.Controller.prototype.nodeIsVisitable = (node) ->\n  node.getAttribute('href') && node.getAttribute('href')[0] != '#' && Turbolinks.Controller.prototype.nodeIsVisitableOld(node)\n```\n\n## jquery-turbolinks \u5bfe\u5fdc\n\n\u30a4\u30d9\u30f3\u30c8\u540d\u304c\u5909\u308f\u3063\u3066\u3044\u308b\u305f\u3081\u3001jquery-turbolinks \u306b\u4f9d\u5b58\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u306f\u8aad\u307f\u66ff\u3048\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n```coffeescript:app/assets/javascripts/turbolinks-compatibility.coffee\n# HACK: jquery-turbolinks \u5bfe\u5fdc\n# https://github.com/turbolinks/turbolinks/blob/master/src/turbolinks/compatibility.coffee\n{defer, dispatch} = Turbolinks\n\nhandleEvent = (eventName, handler) ->\n  document.addEventListener(eventName, handler, false)\n\ntranslateEvent = ({from, to}) ->\n  handler = (event) ->\n    event = dispatch(to, target: event.target, cancelable: event.cancelable, data: event.data)\n    event.preventDefault() if event.defaultPrevented\n  handleEvent(from, handler)\n\ntranslateEvent from: \"turbolinks:click\", to: \"page:before-change\"\ntranslateEvent from: \"turbolinks:request-start\", to: \"page:fetch\"\ntranslateEvent from: \"turbolinks:request-end\", to: \"page:receive\"\ntranslateEvent from: \"turbolinks:before-cache\", to: \"page:before-unload\"\ntranslateEvent from: \"turbolinks:render\", to: \"page:update\"\ntranslateEvent from: \"turbolinks:load\", to: \"page:change\"\ntranslateEvent from: \"turbolinks:load\", to: \"page:update\"\n\nloaded = false\nhandleEvent \"DOMContentLoaded\", ->\n  defer ->\n    loaded = true\nhandleEvent \"turbolinks:load\", ->\n  if loaded\n    dispatch(\"page:load\")\n\njQuery?(document).on \"ajaxSuccess\", (event, xhr, settings) ->\n  if jQuery.trim(xhr.responseText).length > 0\n    dispatch(\"page:update\")\n```\n\n\n## nprogress-rails \u4e0d\u8981\n\nTurbolinks \u306e\u6a19\u6e96\u6a5f\u80fd\u3067\u30d7\u30ed\u30b0\u30ec\u30b9\u30d0\u30fc\u3092\u8868\u793a\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n\u3053\u308c\u307e\u3067\u304a\u4e16\u8a71\u306b\u306a\u3063\u305f `nprogress-rails` \u3068\u306f\u304a\u5225\u308c\u3067\u3059 :pray: \u3002\n\n\u30b9\u30bf\u30a4\u30eb\u306f `.turbolinks-progress-bar` \u3067\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u53ef\u80fd :lipstick: \u3067\u3059\u3002\n\n```scss:app/assets/stylesheets/turbolinks_progressbar.scss\n.turbolinks-progress-bar {\n  background-color: orange;\n}\n```\n\n# \u53c2\u8003\n\n- [How to Upgrade to Turbolinks 5 - GoRails](https://gorails.com/episodes/upgrade-to-turbolinks-5?autoplay=1)\n- [Turbolinks should follow same-page anchor links without reloading the page \u00b7 Issue #75 \u00b7 turbolinks/turbolinks](https://github.com/turbolinks/turbolinks/issues/75)\n", "tags": ["turbolinks", "Rails5"]}