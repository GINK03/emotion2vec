{"context": " More than 1 year has passed since last update.\n\nPostfix + Dovecot \u3067\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3057\u3066\u307f\u305f\u3002\n\n\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u3044\u305f\u30da\u30fc\u30b8\n\nhttp://centossrv.com/postfix.shtml\nhttp://park1.wakwak.com/~ima/centos_postfix_relay0001.html\nhttp://www.postfix-jp.info/trans-2.3/jhtml/postconf.5.html\n\n\n\u74b0\u5883\n\n\u30b5\u30af\u30e9VPS\nCentOS 6.4\npostfix-2.6.6\ndovecot-2.0.9\ncyrus-sasl-2.1.23\n\n\nPostfix\u306e\u8a2d\u5b9a(Gmail\u3068\u9023\u643a)\n/etc/postfix/main.cf\u3092\u7de8\u96c6\u3002\nmyhostname = mail.test.com\nmydomain = test.com\nmyorigin = $mydomain\n\ninet_interfaces = all\ninet_protocols = ipv4\n\nmydestination = $myhostname, localhost.$mydomain, localhost, $mydomain\n\nunknown_local_recipient_reject_code = 550\n\nmynetworks_style = 192.168.32.0/23, 127.0.0.0/8\nmynetworks = 192.168.32.0/23, 127.0.0.0/8\n\nrelay_domains = $mydestination\nrelayhost = [smtp.gmail.com]:587\n\nhome_mailbox = Maildir/\n\nsmtpd_banner = $myhostname ESMTP unknown\n\nsmtp_use_tls = yes\nsmtp_sasl_auth_enable = yes\nsmtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd\nsmtp_sasl_tls_security_options = noanonymous\nsmtp_sasl_mechanism_filter = plain\nsmtp_sasl_security_options = \nsmtp_tls_CApath = /etc/pki/tls/certs/ca-bundle.crt\n\nsmtpd_tls_auth_only = no\nsmtpd_sasl_auth_enable = yes\nsmtpd_sasl_local_domain = $myhostname\nsmtpd_recipient_restrictions = permit_mynetworks, permit_sasl_authenticated, reject_unauth_destination\n\nmessage_size_limit = 10485760\n\n\n\nGmail\u306eSASL\u8a8d\u8a3c\u6e96\u5099\n>vi /etc/postfix/sasl_passwd\n[smtp.gmail.com]:587 test@gmail.com:password\n>postmap hash:/etc/postfix/sasl_passwd\n>postfix reload\n\n\n\u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5\n>service postfix restart\n\n\n\u69cb\u7bc9\u6642\u306b\u8a70\u307e\u3063\u305f\u3068\u3053\u308d\u3002\nGmail\u306e\u8a8d\u8a3c\u304c\u901a\u3089\u306a\u3044\n/var/log/maillog\u3092\u78ba\u8a8d\u3002\n(SASL authentication failed; server smtp.gamil.com[74.125.23.109] said: 534-5.7.9 Application-specific password required. Learn more at?534 5.7.9 http://support.google.com/accounts/bin/answer.py?answer=185833 1sm2519459pdw.87 - gstmp)\n\n/etc/postfix/sasl_passwd\u306b\u9023\u643a\u3059\u308bGmail\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u306email-address:password\u3092\u8a18\u5165\u3059\u308b\u5fc5\u8981\u6027\u304c\u3042\u308b\u304c\u3001\u5168\u304f\u8a8d\u8a3c\u304c\u901a\u3089\u305a\u306b\u5916\u90e8\u306b\u30e1\u30fc\u30eb\u304c\u9001\u308c\u306a\u304b\u3063\u305f\u30fb\u30fb\u30fb\u3002\n\u306e\u3067\u3001\nGmail\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7528\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u53d6\u5f97\u3057\u3001\u8a18\u5165\u3059\u308b\u3053\u3068\u3067\u89e3\u6c7a\u3067\u304d\u305f\u3002\n\n\u3061\u3087\u3063\u3068\u3057\u305f\u8a70\u307e\u308b\u3068\u3053\u308d\n\n\u30b5\u30fc\u30d3\u30b9\u304c\u7acb\u3061\u4e0a\u304c\u3063\u3066\u3044\u308b\u304b\n\u30dd\u30fc\u30c8\u304c\u958b\u3044\u3066\u3044\u308b\u304b\n\n\nSMTP:25\nPOP3:110\n\n\nmynetworks\u306e\u8a2d\u5b9a\u304c\u30db\u30b9\u30c8\u30a2\u30c9\u30ec\u30b9\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u304b\nmyhostname\u304c\u540d\u524d\u89e3\u6c7a\u3067\u304d\u308b\u3088\u3046\u306bDNS\u8a2d\u5b9a\u3067\u304d\u3066\u3044\u308b\u304b\n\n\n\nDovecot\u306e\u8a2d\u5b9a\n/etc/dovecot/10-auth.conf\u3092\u7de8\u96c6\u3002\ndisable_p;aintext_auth = no\n\n/etc/dovecot/10-mail.conf\u3092\u7de8\u96c6\u3002\nmail_location = maildir:~/Maildir\n\n\n\u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5\nservice dovecot restart\n\n# Postfix + Dovecot \u3067\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3057\u3066\u307f\u305f\u3002\n\n#### \u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u3044\u305f\u30da\u30fc\u30b8\n* http://centossrv.com/postfix.shtml\n* http://park1.wakwak.com/~ima/centos_postfix_relay0001.html\n* http://www.postfix-jp.info/trans-2.3/jhtml/postconf.5.html\n\n#### \u74b0\u5883\n* \u30b5\u30af\u30e9VPS\n* CentOS 6.4\n* postfix-2.6.6\n* dovecot-2.0.9\n* cyrus-sasl-2.1.23\n\n## Postfix\u306e\u8a2d\u5b9a(Gmail\u3068\u9023\u643a)\n/etc/postfix/main.cf\u3092\u7de8\u96c6\u3002\n\n```\nmyhostname = mail.test.com\nmydomain = test.com\nmyorigin = $mydomain\n\ninet_interfaces = all\ninet_protocols = ipv4\n\nmydestination = $myhostname, localhost.$mydomain, localhost, $mydomain\n\nunknown_local_recipient_reject_code = 550\n\nmynetworks_style = 192.168.32.0/23, 127.0.0.0/8\nmynetworks = 192.168.32.0/23, 127.0.0.0/8\n\nrelay_domains = $mydestination\nrelayhost = [smtp.gmail.com]:587\n\nhome_mailbox = Maildir/\n\nsmtpd_banner = $myhostname ESMTP unknown\n\nsmtp_use_tls = yes\nsmtp_sasl_auth_enable = yes\nsmtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd\nsmtp_sasl_tls_security_options = noanonymous\nsmtp_sasl_mechanism_filter = plain\nsmtp_sasl_security_options = \nsmtp_tls_CApath = /etc/pki/tls/certs/ca-bundle.crt\n\nsmtpd_tls_auth_only = no\nsmtpd_sasl_auth_enable = yes\nsmtpd_sasl_local_domain = $myhostname\nsmtpd_recipient_restrictions = permit_mynetworks, permit_sasl_authenticated, reject_unauth_destination\n\nmessage_size_limit = 10485760\n \n```\n\n## Gmail\u306eSASL\u8a8d\u8a3c\u6e96\u5099\n```\n>vi /etc/postfix/sasl_passwd\n[smtp.gmail.com]:587 test@gmail.com:password\n>postmap hash:/etc/postfix/sasl_passwd\n>postfix reload\n```\n\n## \u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5\n```bash\n>service postfix restart\n```\n\n\n### \u69cb\u7bc9\u6642\u306b\u8a70\u307e\u3063\u305f\u3068\u3053\u308d\u3002\nGmail\u306e\u8a8d\u8a3c\u304c\u901a\u3089\u306a\u3044\n\n/var/log/maillog\u3092\u78ba\u8a8d\u3002\n\n```\n(SASL authentication failed; server smtp.gamil.com[74.125.23.109] said: 534-5.7.9 Application-specific password required. Learn more at?534 5.7.9 http://support.google.com/accounts/bin/answer.py?answer=185833 1sm2519459pdw.87 - gstmp)\n```\n\n/etc/postfix/sasl_passwd\u306b\u9023\u643a\u3059\u308bGmail\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u306email-address:password\u3092\u8a18\u5165\u3059\u308b\u5fc5\u8981\u6027\u304c\u3042\u308b\u304c\u3001\u5168\u304f\u8a8d\u8a3c\u304c\u901a\u3089\u305a\u306b\u5916\u90e8\u306b\u30e1\u30fc\u30eb\u304c\u9001\u308c\u306a\u304b\u3063\u305f\u30fb\u30fb\u30fb\u3002\n\u306e\u3067\u3001\nGmail\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7528\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u53d6\u5f97\u3057\u3001\u8a18\u5165\u3059\u308b\u3053\u3068\u3067\u89e3\u6c7a\u3067\u304d\u305f\u3002\n\n### \u3061\u3087\u3063\u3068\u3057\u305f\u8a70\u307e\u308b\u3068\u3053\u308d\n* \u30b5\u30fc\u30d3\u30b9\u304c\u7acb\u3061\u4e0a\u304c\u3063\u3066\u3044\u308b\u304b\n* \u30dd\u30fc\u30c8\u304c\u958b\u3044\u3066\u3044\u308b\u304b\n  * SMTP:25\n  * POP3:110\n* mynetworks\u306e\u8a2d\u5b9a\u304c\u30db\u30b9\u30c8\u30a2\u30c9\u30ec\u30b9\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u304b\n* myhostname\u304c\u540d\u524d\u89e3\u6c7a\u3067\u304d\u308b\u3088\u3046\u306bDNS\u8a2d\u5b9a\u3067\u304d\u3066\u3044\u308b\u304b\n\n****\n\n## Dovecot\u306e\u8a2d\u5b9a\n\n/etc/dovecot/10-auth.conf\u3092\u7de8\u96c6\u3002\n\n```\ndisable_p;aintext_auth = no\n```\n\n/etc/dovecot/10-mail.conf\u3092\u7de8\u96c6\u3002\n\n```\nmail_location = maildir:~/Maildir\n```\n\n## \u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5\n\n```\nservice dovecot restart\n```\n", "tags": ["LinuxCentOS6.4", "dovecot2.0.9", "postfix2.6.6"]}