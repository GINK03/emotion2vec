{"context": "\u4e45\u3057\u3076\u308a\u306b\u3084\u308a\u76f4\u3057\u305f\u3089CLI\u304c\u6539\u826f\u3055\u308c\u3066\u3044\u305f\u306e\u3068\u3001\u8a2d\u5b9a\u3092\u3059\u3050\u5fd8\u308c\u308b\u306e\u3067\u81ea\u5206\u7528\u306e\u30e1\u30e2\u3067\u3059\u3002SSH\u63a5\u7d9a\u306f\u3067\u304d\u3066\u3044\u308b\u524d\u63d0\u3002\u30de\u30cb\u30e5\u30a2\u30eb\u3084\u30d5\u30a9\u30fc\u30e9\u30e0\u7b49\u3067\u306fcURL\u306e\u4f8b\u304c\u591a\u3044\u306e\u3067\u3001\u3053\u3053\u3067\u306fPostman\u306e\u4f8b\u3068\u3057\u307e\u3059\u3002\n\u516c\u5f0f\u306f\u3053\u306e\u3042\u305f\u308a\u3002\n\u8a2d\u5b9a\nAPI\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\n\nIOS-version\nCSR-1#show flash: | i .pkg\n 17  289154944 Jan 31 2017 23:05:47 +00:00 /bootflash/csr1000v-mono-universalk9.03.16.05.S.155-3.S5-ext.SPA.pkg\nCSR-1#\nCSR-1#show version | i 15\nCisco IOS Software, CSR1000V Software (X86_64_LINUX_IOSD-UNIVERSALK9-M), Version 15.5(3)S5, RELEASE SOFTWARE (fc2)\n\n\n\n\u8a2d\u5b9a\n\u51fa\u305f\u5f53\u521d\u3088\u308a\u305a\u3044\u3076\u3093\u3059\u3063\u304d\u308a\u3057\u307e\u3057\u305f\u3002\n\nIOS-config\ntransport-map type persistent webui https-webui\n secure-server\n!\nusername cisco privilege 15 password 0 cisco\n!\nvirtual-service csr_mgmt\n ip shared host-interface GigabitEthernet1\n activate\n!\nno ip http server\nip http authentication local\nip http secure-server\n!         \ntransport type persistent webui input https-webui\n\n\nREST-API\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u3068\u30aa\u30d7\u30b7\u30e7\u30f3\u8a2d\u5b9a\u3002\n\nIOS-rest\nCSR-1(config)#remote-management \nCSR-1(cfg-remote-mgmt)#?\n  default      Set a command to its defaults\n  exit         exit remote management configuration submode\n  no           Negate a command or set its defaults\n  pnsc         Prime Network Services Controller and Policy Agent configuration\n  restful-api  RESTful API\n\nCSR-1(cfg-remote-mgmt)#rest\nCSR-1(cfg-remote-mgmt)#restful-api ?\n  autosave        Automatic configuration saving interval\n  local-port      Local port for secure access to RESTful API\n  single-session  Limit RESTful API to one session at a time\n  <cr>\n\n\n\n\u78ba\u8a8d\n\nIOS-show\nCSR-1#show virtual-service detail \nVirtual service csr_mgmt detail\n  State                 : Activated\n  Package information\n    Name                : iosxe-remote-mgmt.03.16.05.S.155-3.S5-ext.ova\n    Path                : bootflash:/iosxe-remote-mgmt.03.16.05.S.155-3.S5-ext.ova\n    Application\n      Name              : csr_mgmt\n      Installed version : 03.16.04\n      Description       : CSR-MGMT\n    Signing\n      Key type          : Cisco development key\n      Method            : SHA-1\n    Licensing\n      Name              : Not Available\n      Version           : Not Available\n\n  Detailed guest status\n\n----------------------------------------------------------------------\nProcess               Status            Uptime           # of restarts\n----------------------------------------------------------------------\nnginx                  UP         0Y 0W 0D  1: 2: 2        0\nclimgr                 UP         0Y 0W 0D  1: 2: 2        0\nrestful_api            UP         0Y 0W 0D  1: 2: 2        0\nfcgicpa                Down      \npnscag                 Down      \npnscdme                Down      \n----------------------------------------------------------------------\nFeature         Status                 Configuration\n----------------------------------------------------------------------\nRestful API   Disabled, UP             \nPNSC          Disabled, Down\n\nNetwork stats:\n eth0: RX  packets:1868, TX  packets:6\n eth1: RX  packets:185, TX  packets:139\n\nCoredump file(s): lost+found\n\n  Activated profile name: None\n  Resource reservation\n    Disk                : 756 MB\n    Memory              : 512 MB\n    CPU                 : 5% system CPU\n\n  Attached devices\n    Type              Name        Alias            \n    ---------------------------------------------\n    NIC               ieobc_1     ieobc            \n    NIC               dp_1_33     net2             \n    Disk              _rootfs                      \n    Disk              /opt/var                     \n    Disk              /opt/va...                   \n    Serial/shell                  serial0          \n    Serial/aux                    serial1          \n    Serial/Syslog                 serial2          \n    Serial/Trace                  serial3          \n    Watchdog          watchdo...                   \n\n  Network interfaces\n    MAC address             Attached to interface           \n    ------------------------------------------------------\n    54:0E:00:0B:0C:02       ieobc_1                         \n    00:50:56:A2:22:D3       VirtualPortGroup33              \n\n  Guest interface\n  ---\n  Interface: eth1\n  ip address: 10.71.130.57/21\n\n  ---\n\n  Guest routes\n  ---\n  Address/Mask                         Next Hop                          Intf.\n-------------------------------------------------------------------------------\n\n  ---\n\n  Resource admission (without profile) : passed\n    Disk space    : 756MB\n    Memory        : 512MB \n    CPU           : 5% system CPU \n    VCPUs         : Not specified\n\n\n\nPOSTMAN\u3067Token\u53d6\u5f97\n\n\u30c8\u30fc\u30af\u30f3\u30b5\u30fc\u30d3\u30b9\u306eAPI\u306bPOST\n\u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\uff08\u30d8\u30c3\u30c0\u306f\u81ea\u52d5\u88dc\u5b8c\u3057\u3066\u304f\u308c\u307e\u3059\uff09\n\u30d8\u30c3\u30c0\u306b Accept Application/json \u3092\u8ffd\u52a0\n\n\n\n\u3053\u308c\u3067\u5b9f\u884c\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306btoken-id\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\u4ee5\u964d\u306f\u3053\u308c\u3092X-Auth-Token\u3068\u3057\u3066\u30d8\u30c3\u30c0\u306b\u5165\u308c\u308b\u3068\u3001\u8aad\u307f\u66f8\u304d\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n\n\nPOSTMAN\u3067\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u60c5\u5831\u53d6\u5f97\u3059\u308b\u4f8b\n\n\u4ee5\u4e0a\u3067\u3059\u3002\n\u4e45\u3057\u3076\u308a\u306b\u3084\u308a\u76f4\u3057\u305f\u3089CLI\u304c\u6539\u826f\u3055\u308c\u3066\u3044\u305f\u306e\u3068\u3001\u8a2d\u5b9a\u3092\u3059\u3050\u5fd8\u308c\u308b\u306e\u3067\u81ea\u5206\u7528\u306e\u30e1\u30e2\u3067\u3059\u3002SSH\u63a5\u7d9a\u306f\u3067\u304d\u3066\u3044\u308b\u524d\u63d0\u3002\u30de\u30cb\u30e5\u30a2\u30eb\u3084\u30d5\u30a9\u30fc\u30e9\u30e0\u7b49\u3067\u306fcURL\u306e\u4f8b\u304c\u591a\u3044\u306e\u3067\u3001\u3053\u3053\u3067\u306fPostman\u306e\u4f8b\u3068\u3057\u307e\u3059\u3002\n\n\u516c\u5f0f\u306f\u3053\u306e\u3042\u305f\u308a\u3002\n[\u8a2d\u5b9a](http://www.cisco.com/c/en/us/td/docs/routers/csr1000/software/configuration/b_CSR1000v_Configuration_Guide/b_CSR1000v_Configuration_Guide_chapter_01101.html)\n[API\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](http://www.cisco.com/c/en/us/td/docs/routers/csr1000/software/restapi/restapi.html)\n\n```Cisco:IOS-version\nCSR-1#show flash: | i .pkg\n 17  289154944 Jan 31 2017 23:05:47 +00:00 /bootflash/csr1000v-mono-universalk9.03.16.05.S.155-3.S5-ext.SPA.pkg\nCSR-1#\nCSR-1#show version | i 15\nCisco IOS Software, CSR1000V Software (X86_64_LINUX_IOSD-UNIVERSALK9-M), Version 15.5(3)S5, RELEASE SOFTWARE (fc2)\n```\n\n##\u8a2d\u5b9a\n\u51fa\u305f\u5f53\u521d\u3088\u308a\u305a\u3044\u3076\u3093\u3059\u3063\u304d\u308a\u3057\u307e\u3057\u305f\u3002\n\n```Cisco:IOS-config\ntransport-map type persistent webui https-webui\n secure-server\n!\nusername cisco privilege 15 password 0 cisco\n!\nvirtual-service csr_mgmt\n ip shared host-interface GigabitEthernet1\n activate\n!\nno ip http server\nip http authentication local\nip http secure-server\n!         \ntransport type persistent webui input https-webui\n```\n\nREST-API\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u3068\u30aa\u30d7\u30b7\u30e7\u30f3\u8a2d\u5b9a\u3002\n\n```Cisco:IOS-rest\nCSR-1(config)#remote-management \nCSR-1(cfg-remote-mgmt)#?\n  default      Set a command to its defaults\n  exit         exit remote management configuration submode\n  no           Negate a command or set its defaults\n  pnsc         Prime Network Services Controller and Policy Agent configuration\n  restful-api  RESTful API\n\nCSR-1(cfg-remote-mgmt)#rest\nCSR-1(cfg-remote-mgmt)#restful-api ?\n  autosave        Automatic configuration saving interval\n  local-port      Local port for secure access to RESTful API\n  single-session  Limit RESTful API to one session at a time\n  <cr>\n```\n\n##\u78ba\u8a8d\n\n```Cisco:IOS-show\nCSR-1#show virtual-service detail \nVirtual service csr_mgmt detail\n  State                 : Activated\n  Package information\n    Name                : iosxe-remote-mgmt.03.16.05.S.155-3.S5-ext.ova\n    Path                : bootflash:/iosxe-remote-mgmt.03.16.05.S.155-3.S5-ext.ova\n    Application\n      Name              : csr_mgmt\n      Installed version : 03.16.04\n      Description       : CSR-MGMT\n    Signing\n      Key type          : Cisco development key\n      Method            : SHA-1\n    Licensing\n      Name              : Not Available\n      Version           : Not Available\n\n  Detailed guest status\n    \n----------------------------------------------------------------------\nProcess               Status            Uptime           # of restarts\n----------------------------------------------------------------------\nnginx                  UP         0Y 0W 0D  1: 2: 2        0\nclimgr                 UP         0Y 0W 0D  1: 2: 2        0\nrestful_api            UP         0Y 0W 0D  1: 2: 2        0\nfcgicpa                Down      \npnscag                 Down      \npnscdme                Down      \n----------------------------------------------------------------------\nFeature         Status                 Configuration\n----------------------------------------------------------------------\nRestful API   Disabled, UP             \nPNSC          Disabled, Down\n\nNetwork stats:\n eth0: RX  packets:1868, TX  packets:6\n eth1: RX  packets:185, TX  packets:139\n\nCoredump file(s): lost+found\n \n  Activated profile name: None\n  Resource reservation\n    Disk                : 756 MB\n    Memory              : 512 MB\n    CPU                 : 5% system CPU\n\n  Attached devices\n    Type              Name        Alias            \n    ---------------------------------------------\n    NIC               ieobc_1     ieobc            \n    NIC               dp_1_33     net2             \n    Disk              _rootfs                      \n    Disk              /opt/var                     \n    Disk              /opt/va...                   \n    Serial/shell                  serial0          \n    Serial/aux                    serial1          \n    Serial/Syslog                 serial2          \n    Serial/Trace                  serial3          \n    Watchdog          watchdo...                   \n\n  Network interfaces\n    MAC address             Attached to interface           \n    ------------------------------------------------------\n    54:0E:00:0B:0C:02       ieobc_1                         \n    00:50:56:A2:22:D3       VirtualPortGroup33              \n\n  Guest interface\n  ---\n  Interface: eth1\n  ip address: 10.71.130.57/21\n\n  ---\n\n  Guest routes\n  ---\n  Address/Mask                         Next Hop                          Intf.\n-------------------------------------------------------------------------------\n\n  ---\n\n  Resource admission (without profile) : passed\n    Disk space    : 756MB\n    Memory        : 512MB \n    CPU           : 5% system CPU \n    VCPUs         : Not specified\n```\n\n##POSTMAN\u3067Token\u53d6\u5f97\n- \u30c8\u30fc\u30af\u30f3\u30b5\u30fc\u30d3\u30b9\u306eAPI\u306bPOST\n- \u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\uff08\u30d8\u30c3\u30c0\u306f\u81ea\u52d5\u88dc\u5b8c\u3057\u3066\u304f\u308c\u307e\u3059\uff09\n- \u30d8\u30c3\u30c0\u306b Accept Application/json \u3092\u8ffd\u52a0\n\n![SS 2017-03-10 13.47.56.png](https://qiita-image-store.s3.amazonaws.com/0/157325/ef631bae-02e8-dfaf-043e-d4d32cff0601.png)\n\n![SS 2017-03-10 13.48.27.png](https://qiita-image-store.s3.amazonaws.com/0/157325/6829b5f0-155c-4bcc-7232-07f4441334f4.png)\n\n\u3053\u308c\u3067\u5b9f\u884c\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306btoken-id\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\u4ee5\u964d\u306f\u3053\u308c\u3092X-Auth-Token\u3068\u3057\u3066\u30d8\u30c3\u30c0\u306b\u5165\u308c\u308b\u3068\u3001\u8aad\u307f\u66f8\u304d\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n\n![SS 2017-03-10 13.48.42.png](https://qiita-image-store.s3.amazonaws.com/0/157325/8f291b73-8f8f-4751-df3c-ff61763e2a15.png)\n\n##POSTMAN\u3067\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u60c5\u5831\u53d6\u5f97\u3059\u308b\u4f8b\n\n![SS 2017-03-10 13.56.03.png](https://qiita-image-store.s3.amazonaws.com/0/157325/f628846a-51be-c7c3-2a3b-2cf2123b8e4c.png)\n\n\u4ee5\u4e0a\u3067\u3059\u3002\n\n\n\n\n\n\n\n", "tags": ["Cisco", "REST-API", "Network"]}