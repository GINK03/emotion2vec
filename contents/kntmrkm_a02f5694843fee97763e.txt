{"context": " More than 1 year has passed since last update.\n\n\u74b0\u5883\n\nRails 4.1.5\nPostgreSQL 9.3.5\n\n\npg 0.17.1\n\n\npoltergeist-1.5.1\ncapybara-2.4.1\nrspec-3.0.0\nQt 4.8.6\nPhantomjs 1.9.7\n\n\n\u30a8\u30e9\u30fc\u5185\u5bb9\n\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u4e0d\u898f\u5247\u306b\u767a\u751f\u3059\u308b\u3002\nPoltergeist\u30fbWebkit\u3069\u3061\u3089\u3067\u3082\u767a\u751f\u3002\nAn error occurred in an after hook\n  ActiveModel::MissingAttributeError: missing attribute: encrypted_password\n\nNoMethodError:\n  undefined method `fields' for nil:NilClass\n\nAn error occurred in an after hook\n  ActiveRecord::StatementInvalid: PG::UnableToSend: extraneous data in \"T\" message\n\nPG::UnableToSend: another command is already in progress\n\n\u305d\u306e\u4ed6\u3001\u30c6\u30b9\u30c8\u5b9f\u884c\u6642\u306b\u30cf\u30f3\u30b0\u30a2\u30c3\u30d7\u3059\u308b\u3002postgres\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u5f37\u5236\u7d42\u4e86\u3067\u30c6\u30b9\u30c8\u3092\u7d42\u4e86\u3067\u304d\u308b\u3002\n\uff08PG::ConnectionBad: PQsocket() can't get socket descriptor: SAVEPOINT active_record_1\uff09\n\n\u78ba\u8a8d\u3067\u304d\u3066\u3044\u308bIssue\u306a\u3069\n\njosevalim / shared_connection.rb\nLots of Postgres errors in RSpec integration test with Zeus\n\n\n\u8a66\u3057\u305f\u3053\u3068\u30fb\u5bfe\u5fdc\u7b56\n\nJavascript\u306e\u51e6\u7406\u306e\u7d42\u4e86\u3092\u5f85\u3064\n\u4e0a\u8a18\u306eIssue\u306b\u3082\u8f09\u3063\u3066\u3044\u308b\u304c\u3001\u4ee5\u4e0b\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u3001\u30c6\u30b9\u30c8\u4e2d\u306bwait_for_ajax\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\n\u51e6\u7406\u304c\u6b63\u5e38\u306b\u884c\u308f\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\nmodule WaitForAjax\n  def wait_for_ajax\n    Timeout.timeout(Capybara.default_wait_time) do\n      loop until finished_all_ajax_requests?\n    end\n  end\n\n  def finished_all_ajax_requests?\n    page.evaluate_script('jQuery.active').zero?\n  end\nend\n\n\ngem pg \u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u5f85\u3063\u3066\u307f\u308b\n\u6700\u521d\u306fPotergeist\u3067\u767a\u751f\u3057\u3001Webkit\u306b\u5909\u66f4\u3057\u3066\u3082\u767a\u751f\u3057\u305f\u3053\u3068\u304b\u3089\u3001PostgreSQL\u4f9d\u5b58\u306e\u30a8\u30e9\u30fc\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\u3068\u601d\u3063\u3066\u3001pg\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8997\u3044\u3066\u307f\u308b\u3068\u30d0\u30fc\u30b8\u30e7\u30f30.18\u304c\u3082\u3046\u3059\u3050\u3067\u305d\u3046\u306a\u611f\u3058\u3002\n\u95a2\u4fc2\u3042\u308a\u305d\u3046\u306aissue\uff08PG.connect ignores connect_timeout\uff09\u3082\u3042\u308b\u306e\u3067\u3001gem\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u5f85\u3063\u3066\u307f\u3088\u3046\u3068\u601d\u3046\u3002\n\n#### \u74b0\u5883\n\n- Rails 4.1.5\n- PostgreSQL 9.3.5\n  - pg 0.17.1\n- poltergeist-1.5.1\n- capybara-2.4.1\n- rspec-3.0.0\n- Qt 4.8.6\n- Phantomjs 1.9.7\n\n\n### \u30a8\u30e9\u30fc\u5185\u5bb9\n\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u4e0d\u898f\u5247\u306b\u767a\u751f\u3059\u308b\u3002\nPoltergeist\u30fbWebkit\u3069\u3061\u3089\u3067\u3082\u767a\u751f\u3002\n\n```bash\nAn error occurred in an after hook\n  ActiveModel::MissingAttributeError: missing attribute: encrypted_password\n```\n\n```bash\nNoMethodError:\n  undefined method `fields' for nil:NilClass\n```\n\n```bash\nAn error occurred in an after hook\n  ActiveRecord::StatementInvalid: PG::UnableToSend: extraneous data in \"T\" message\n```\n\n```bash\nPG::UnableToSend: another command is already in progress\n```\n\n\u305d\u306e\u4ed6\u3001\u30c6\u30b9\u30c8\u5b9f\u884c\u6642\u306b\u30cf\u30f3\u30b0\u30a2\u30c3\u30d7\u3059\u308b\u3002postgres\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u5f37\u5236\u7d42\u4e86\u3067\u30c6\u30b9\u30c8\u3092\u7d42\u4e86\u3067\u304d\u308b\u3002\n\uff08`PG::ConnectionBad: PQsocket() can't get socket descriptor: SAVEPOINT active_record_1`\uff09\n\n### \u78ba\u8a8d\u3067\u304d\u3066\u3044\u308bIssue\u306a\u3069\n\n- [josevalim / shared_connection.rb](https://gist.github.com/josevalim/470808)\n- [Lots of Postgres errors in RSpec integration test with Zeus](http://stackoverflow.com/questions/21081956/lots-of-postgres-errors-in-rspec-integration-test-with-zeus)\n\n\n\n### \u8a66\u3057\u305f\u3053\u3068\u30fb\u5bfe\u5fdc\u7b56\n\n#### Javascript\u306e\u51e6\u7406\u306e\u7d42\u4e86\u3092\u5f85\u3064\n\n\u4e0a\u8a18\u306eIssue\u306b\u3082\u8f09\u3063\u3066\u3044\u308b\u304c\u3001\u4ee5\u4e0b\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u3001\u30c6\u30b9\u30c8\u4e2d\u306b`wait_for_ajax`\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\n\u51e6\u7406\u304c\u6b63\u5e38\u306b\u884c\u308f\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\n```ruby\nmodule WaitForAjax\n  def wait_for_ajax\n    Timeout.timeout(Capybara.default_wait_time) do\n      loop until finished_all_ajax_requests?\n    end\n  end\n\n  def finished_all_ajax_requests?\n    page.evaluate_script('jQuery.active').zero?\n  end\nend\n```\n\n#### gem pg \u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u5f85\u3063\u3066\u307f\u308b\n\n\u6700\u521d\u306fPotergeist\u3067\u767a\u751f\u3057\u3001Webkit\u306b\u5909\u66f4\u3057\u3066\u3082\u767a\u751f\u3057\u305f\u3053\u3068\u304b\u3089\u3001PostgreSQL\u4f9d\u5b58\u306e\u30a8\u30e9\u30fc\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\u3068\u601d\u3063\u3066\u3001pg\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8997\u3044\u3066\u307f\u308b\u3068\u30d0\u30fc\u30b8\u30e7\u30f30.18\u304c\u3082\u3046\u3059\u3050\u3067\u305d\u3046\u306a\u611f\u3058\u3002\n\n\u95a2\u4fc2\u3042\u308a\u305d\u3046\u306aissue\uff08[PG.connect ignores connect_timeout](https://bitbucket.org/ged/ruby-pg/issue/188/pgconnect-ignores-connect_timeout)\uff09\u3082\u3042\u308b\u306e\u3067\u3001gem\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u5f85\u3063\u3066\u307f\u3088\u3046\u3068\u601d\u3046\u3002\n\n\n\n\n\n", "tags": ["Capybara", "PostgreSQL", "RSpec", "Rails", "poltergeist"]}