{"context": " More than 1 year has passed since last update.\n\n\u52d5\u6a5f\u3068\u304b\nCaveman2\u3067LMS\u3063\u307d\u3044\u3082\u306e\u3092\u4f5c\u308b\u306b\u3042\u305f\u3063\u3066\uff0cHTTPS\u4f7f\u308f\u306a\u3044\u3068\u99c4\u76ee\u3060\u308d\u3046\u3068\u601d\u3063\u3066\u8abf\u3079\u305f\u3082\u306e\u306e\uff0c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u305d\u308c\u3063\u307d\u3044\u8a18\u8ff0\u3092\u898b\u3064\u3051\u3089\u308c\u307e\u305b\u3093\u3067\u3057\u305f\u3002\nClack\u306ehunchentoot\u306ehandler\u306erun\u3068\u304b\u3092\u898b\u308b\u3068ssl\u3092\u4f7f\u3048\u305d\u3046\u306a\u306e\u3067\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u6e96\u5099\n\n\u74b0\u5883\nMac OSX 10.10.1\nClozure Common Lisp 1.10\nquicklisp 2014-12-17\nOpenSSL 0.9.8za 5 Jun 2014\n\u30b5\u30fc\u30d0\u306fHunchentoot\u3067\u3059\u3002 (toot\u3068wookie\u3067\u3082\u540c\u69d8\u304b\u3082\uff1f)\n\n\u8a3c\u660e\u66f8\u4f5c\u6210\n\u6700\u8fd1\u306fOpenSSL\u304b\u3089\u6d3e\u751f\u3057\u305fLibreSSL\u3068\u304bGoogle\u306e\u3068\u304b\u3082\u3042\u308b\u3093\u3067\u3059\u306d\u3002\n\u3068\u308a\u3042\u3048\u305aOpenSSL\u3092\u4f7f\u3044\u307e\u3059\u3002\n$ openssl genrsa 2048 > oreore.key\n$ openssl req -new -key oreore.key > oreore.csr\n\u751f\u6210\u3055\u308c\u305fcsr\u30d5\u30a1\u30a4\u30eb\u3092\u8a8d\u8a3c\u5c40\u306b\u7f72\u540d\u3057\u3066\u3082\u3089\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306f\u52d5\u3051\u3070\u826f\u3044\u306e\u3067\u30aa\u30ec\u30aa\u30ec\u3057\u307e\u3059\u3002\n$ openssl x509 -days 3652 -req -signkey oreore.key < oreore.csr > oreore.crt\n\u751f\u6210\u3057\u305fkey\u30d5\u30a1\u30a4\u30eb\u3068crt\u30d5\u30a1\u30a4\u30eb\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u76f4\u4e0b\u306bssl\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4f5c\u3063\u3066\u653e\u308a\u8fbc\u307f\u307e\u3057\u305f\u3002\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5074\u306e\u8a2d\u5b9a\nmain.lisp\u3042\u305f\u308a\u306b\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u66f8\u3044\u3066\u304a\u304d\u307e\u3059\u3002\n(defvar *ssl-key-file*\n  (merge-pathnames \"ssl/oreore.key\" myapp.config:*application-root*))\n\n(defvar *ssl-cert-file*\n  (merge-pathnames \"ssl/oreore.crt\" myapp.config:*application-root*))\n\n\u3053\u308c\u3060\u3051\u3002\u3042\u3068\u306f\n>(start :port 5000 :ssl t :ssl-key-file *ssl-key-file* :ssl-cert-file *ssl-cert-file*)\n\n\u3059\u308c\u3070\u52d5\u304f\u306f\u305a\u3067\u3059\u3002\n\uff08password\u8a2d\u5b9a\u3057\u305f\u5834\u5408\u306f:ssl-key-password \"password\"\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\uff09\n\u3053\u308c\u3067https://localhost:5000/\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\uff0c\n\u898b\u4e8b\u306b\u30d6\u30e9\u30a6\u30b6\u306b\u6012\u3089\u308c\u3066\uff0c\n[2014-12-31 01:48:01 [ERROR]] Error while processing connection: A failure in the SSL library occurred on handle #<A Foreign Pointer #x626B60> (return code: 1). SSL error queue:\nerror:14094418:SSL routines:SSL3_READ_BYTES:tlsv1 alert unknown ca\n\n\u306a\u3093\u3066\u8a00\u308f\u308c\u307e\u3059\u3002\u30aa\u30ec\u30aa\u30ec\u306a\u306e\u3067\u6211\u6162\u3057\u307e\u3059\u3002\n\u30d6\u30e9\u30a6\u30b6\u3067\u4f8b\u5916\u3092\u8a31\u53ef\u3059\u308c\u3070\u30b5\u30a4\u30c8\u3092\u898b\u308c\u307e\u3059\u3002\n\uff08Chrome\u3060\u3068\u3053\u306e\u6bb5\u968e\u3067\u8a3c\u660e\u66f8\u306e\u4e2d\u307e\u3067\u898b\u308c\u308b\u3093\u3067\u3059\u306d\u3002\uff09\n\u3061\u306a\u307f\u306b:port 443\u3092\u6307\u5b9a\u3059\u308b\u3068\nError #<USOCKET:OPERATION-NOT-PERMITTED-ERROR #x302003EFD40D>\n   [Condition of type USOCKET:OPERATION-NOT-PERMITTED-ERROR]\n\n\u3067\u3059\u3063\u3066\u3002\u3081\u3093\u3069\u304f\u3055\u305d\u3046\u306a\u306e\u3067port 5000\u3067\u4f7f\u3046\u4e8b\u306b\u3057\u307e\u3059\u3002\n\n\u304a\u308f\u308a\u306b\n\u3068\u308a\u3042\u3048\u305a\u52d5\u3044\u305f\u306e\u3067\u6e80\u8db3\u3067\u3059\u3002\n\u672c\u756a\u3067\u306f\u8a3c\u660e\u66f8\u306f\u3061\u3083\u3093\u3068\u8cb7\u3046\u4e88\u5b9a\u3067\u3059\u3002\n\u5f53\u521d\u306f\u81ea\u5206\u3067\u30b3\u30fc\u30c9\u66f8\u304b\u306a\u3044\u3068\u99c4\u76ee\u3060\u308d\u3046\u3068\u601d\u3063\u3066\u304a\u3063\u304b\u306a\u3073\u3063\u304f\u308a\u30bd\u30fc\u30b9\u8aad\u3093\u3067\u305f\u306e\u3067\u3059\u304c\uff0c\n\u7d50\u5c40\uff11\u884c\u3082\u66f8\u304b\u305a\u306b\u6e08\u307f\u307e\u3057\u305f\u3002\n\u3053\u308c\u3067\u5b89\u5fc3\u3057\u3066\u30d5\u30a9\u30fc\u30e0\u8a8d\u8a3c\u304c\u3067\u304d\u307e\u3059\u3002\n##\u52d5\u6a5f\u3068\u304b##\nCaveman2\u3067LMS\u3063\u307d\u3044\u3082\u306e\u3092\u4f5c\u308b\u306b\u3042\u305f\u3063\u3066\uff0cHTTPS\u4f7f\u308f\u306a\u3044\u3068\u99c4\u76ee\u3060\u308d\u3046\u3068\u601d\u3063\u3066\u8abf\u3079\u305f\u3082\u306e\u306e\uff0c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u305d\u308c\u3063\u307d\u3044\u8a18\u8ff0\u3092\u898b\u3064\u3051\u3089\u308c\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\nClack\u306e[hunchentoot\u306ehandler](https://github.com/fukamachi/clack/blob/master/src/core/handler/hunchentoot.lisp)\u306e`run`\u3068\u304b\u3092\u898b\u308b\u3068`ssl`\u3092\u4f7f\u3048\u305d\u3046\u306a\u306e\u3067\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n##\u6e96\u5099##\n###\u74b0\u5883###\nMac OSX 10.10.1\nClozure Common Lisp 1.10\nquicklisp 2014-12-17\nOpenSSL 0.9.8za 5 Jun 2014\n\u30b5\u30fc\u30d0\u306fHunchentoot\u3067\u3059\u3002 (toot\u3068wookie\u3067\u3082\u540c\u69d8\u304b\u3082\uff1f)\n\n###\u8a3c\u660e\u66f8\u4f5c\u6210###\n\u6700\u8fd1\u306fOpenSSL\u304b\u3089\u6d3e\u751f\u3057\u305fLibreSSL\u3068\u304bGoogle\u306e\u3068\u304b\u3082\u3042\u308b\u3093\u3067\u3059\u306d\u3002\n\u3068\u308a\u3042\u3048\u305aOpenSSL\u3092\u4f7f\u3044\u307e\u3059\u3002\n`$ openssl genrsa 2048 > oreore.key`\n`$ openssl req -new -key oreore.key > oreore.csr`\n\u751f\u6210\u3055\u308c\u305fcsr\u30d5\u30a1\u30a4\u30eb\u3092\u8a8d\u8a3c\u5c40\u306b\u7f72\u540d\u3057\u3066\u3082\u3089\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306f\u52d5\u3051\u3070\u826f\u3044\u306e\u3067\u30aa\u30ec\u30aa\u30ec\u3057\u307e\u3059\u3002\n`$ openssl x509 -days 3652 -req -signkey oreore.key < oreore.csr > oreore.crt`\n\n\u751f\u6210\u3057\u305fkey\u30d5\u30a1\u30a4\u30eb\u3068crt\u30d5\u30a1\u30a4\u30eb\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u76f4\u4e0b\u306b`ssl`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4f5c\u3063\u3066\u653e\u308a\u8fbc\u307f\u307e\u3057\u305f\u3002\n\n##\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5074\u306e\u8a2d\u5b9a##\nmain.lisp\u3042\u305f\u308a\u306b\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u66f8\u3044\u3066\u304a\u304d\u307e\u3059\u3002\n\n```cl:\n(defvar *ssl-key-file*\n  (merge-pathnames \"ssl/oreore.key\" myapp.config:*application-root*))\n\n(defvar *ssl-cert-file*\n  (merge-pathnames \"ssl/oreore.crt\" myapp.config:*application-root*))\n```\n\u3053\u308c\u3060\u3051\u3002\u3042\u3068\u306f\n\n```cl:\n>(start :port 5000 :ssl t :ssl-key-file *ssl-key-file* :ssl-cert-file *ssl-cert-file*)\n```\n\u3059\u308c\u3070\u52d5\u304f\u306f\u305a\u3067\u3059\u3002\n\uff08password\u8a2d\u5b9a\u3057\u305f\u5834\u5408\u306f`:ssl-key-password \"password\"`\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\uff09\n\u3053\u308c\u3067`https://localhost:5000/`\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\uff0c\n\u898b\u4e8b\u306b\u30d6\u30e9\u30a6\u30b6\u306b\u6012\u3089\u308c\u3066\uff0c\n\n```\n[2014-12-31 01:48:01 [ERROR]] Error while processing connection: A failure in the SSL library occurred on handle #<A Foreign Pointer #x626B60> (return code: 1). SSL error queue:\nerror:14094418:SSL routines:SSL3_READ_BYTES:tlsv1 alert unknown ca\n```\n\u306a\u3093\u3066\u8a00\u308f\u308c\u307e\u3059\u3002\u30aa\u30ec\u30aa\u30ec\u306a\u306e\u3067\u6211\u6162\u3057\u307e\u3059\u3002\n\u30d6\u30e9\u30a6\u30b6\u3067\u4f8b\u5916\u3092\u8a31\u53ef\u3059\u308c\u3070\u30b5\u30a4\u30c8\u3092\u898b\u308c\u307e\u3059\u3002\n\uff08Chrome\u3060\u3068\u3053\u306e\u6bb5\u968e\u3067\u8a3c\u660e\u66f8\u306e\u4e2d\u307e\u3067\u898b\u308c\u308b\u3093\u3067\u3059\u306d\u3002\uff09\n\n\u3061\u306a\u307f\u306b`:port 443`\u3092\u6307\u5b9a\u3059\u308b\u3068\n\n```\nError #<USOCKET:OPERATION-NOT-PERMITTED-ERROR #x302003EFD40D>\n   [Condition of type USOCKET:OPERATION-NOT-PERMITTED-ERROR]\n```\n\u3067\u3059\u3063\u3066\u3002\u3081\u3093\u3069\u304f\u3055\u305d\u3046\u306a\u306e\u3067port 5000\u3067\u4f7f\u3046\u4e8b\u306b\u3057\u307e\u3059\u3002\n\n\n##\u304a\u308f\u308a\u306b##\n\u3068\u308a\u3042\u3048\u305a\u52d5\u3044\u305f\u306e\u3067\u6e80\u8db3\u3067\u3059\u3002\n\u672c\u756a\u3067\u306f\u8a3c\u660e\u66f8\u306f\u3061\u3083\u3093\u3068\u8cb7\u3046\u4e88\u5b9a\u3067\u3059\u3002\n\n\u5f53\u521d\u306f\u81ea\u5206\u3067\u30b3\u30fc\u30c9\u66f8\u304b\u306a\u3044\u3068\u99c4\u76ee\u3060\u308d\u3046\u3068\u601d\u3063\u3066\u304a\u3063\u304b\u306a\u3073\u3063\u304f\u308a\u30bd\u30fc\u30b9\u8aad\u3093\u3067\u305f\u306e\u3067\u3059\u304c\uff0c\n\u7d50\u5c40\uff11\u884c\u3082\u66f8\u304b\u305a\u306b\u6e08\u307f\u307e\u3057\u305f\u3002\n\n\u3053\u308c\u3067\u5b89\u5fc3\u3057\u3066\u30d5\u30a9\u30fc\u30e0\u8a8d\u8a3c\u304c\u3067\u304d\u307e\u3059\u3002\n", "tags": ["caveman2", "memo"]}