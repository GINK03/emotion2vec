{"tags": ["Unity", "GoogleAppsScript"], "context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u4ee5\u4e0b\u306e\u30eb\u30fc\u30eb\u3067\u30bf\u30c3\u30c1\u30b8\u30a7\u30b9\u30c1\u30e3\u30fc\u306e\u7ba1\u7406\u3059\u308b\u3082\u306e\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\n\u4f55\u3082\u306a\u3044\u3068\u3053\u308d\u3092\u30bf\u30c3\u30c1\u3057\u305f\u3089\u30c6\u30ad\u30b9\u30c8\u304c\u9032\u3080\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30bf\u30c3\u30c1\u3059\u308b\u3068\u3001\u30bf\u30c3\u30c1\u3055\u308c\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u6d88\u3048\u308b\n\u4e0a\u4e0b\u5de6\u53f3\u306b\u30d5\u30ea\u30c3\u30af\u3057\u305f\u3089\u3001\u30c6\u30ad\u30b9\u30c8\u304c\u9032\u3080\u884c\u6570\u3092\u5909\u66f4\u3059\u308b\n\n\n\u5de6: 1\n\u53f3: 2\n\u4e0a: 3\n\u4e0b: 4\n\n\n\u30b8\u30a7\u30b9\u30c1\u30e3\u30fc\u306e\u512a\u5148\u9806\u4f4d\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3001\u4e0a\u4f4d\u30b8\u30a7\u30b9\u30c1\u30e3\u30fc\u304c\u5224\u5b9a\u3055\u308c\u305f\u5834\u5408\u306f\u4e0b\u4f4d\u30b8\u30a7\u30b9\u30c1\u30e3\u30fc\u3092\u5b9f\u884c\u3057\u306a\u3044\n\n\n\u30d5\u30ea\u30c3\u30af\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30bf\u30c3\u30c1\u3057\u305f\n\u306a\u306b\u3082\u306a\u3044\u3068\u3053\u308d\u3092\u30bf\u30c3\u30c1\u3057\u305f\n\n\n\u3061\u3087\u3063\u3068\u3067\u3082\u6307\u3092\u52d5\u304b\u3057\u305f\u3089\u305d\u306e\u30bf\u30c3\u30c1\u306f\u30d5\u30ea\u30c3\u30af\u3068\u307f\u306a\u3059\n\u3061\u3087\u3063\u3068\u3067\u3082\u6307\u3092\u52d5\u304b\u3057\u305f\u3089\u305d\u306e\u30bf\u30c3\u30c1\u306f\u30d5\u30ea\u30c3\u30af\u3068\u307f\u306a\u3059\u304c\u3001\u59cb\u70b9\u304b\u3089\u3042\u3093\u307e\u308a\u52d5\u3044\u3066\u306a\u304b\u3063\u305f\u3089\u30d5\u30ea\u30c3\u30af\u30a2\u30af\u30b7\u30e7\u30f3\u306f\u884c\u308f\u306a\u3044\n\u30b8\u30a7\u30b9\u30c1\u30e3\u30fc\u306f\u6307\u3092\u96e2\u3057\u305f\u77ac\u9593\u306e\u72b6\u614b\u3067\u5224\u5b9a\u3059\u308b\n\n\n\n\u30bd\u30fc\u30b9\nGitHub\u306b\u7f6e\u3044\u3066\u307e\u3059\u306e\u3067\u3088\u308d\u3057\u3051\u308c\u3070\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\nhttps://github.com/hideyuki-hori/TestTouch\n\n\u8868\u793a\u3059\u308b\u30c6\u30ad\u30b9\u30c8(\u30b7\u30ca\u30ea\u30aa)\u3092\u4f5c\u308b\n\u3053\u306e\u9805\u76ee\u306e\u30b4\u30fc\u30eb\u306fScriptableObject\u306b\u30c6\u30ad\u30b9\u30c8\u30c7\u30fc\u30bf\u304c\u5165\u3063\u3066\u3044\u308b\u3053\u3068\u3067\u3059\u3002\nGoogle Spreadsheet\u3067\u30b7\u30ca\u30ea\u30aa\u3092\u66f8\u3044\u3066\u3001\u305d\u308c\u3092Unity\u304b\u3089Get\u901a\u4fe1\u3067\u53d6\u3063\u3066\u304d\u3066Editor\u3067ScriptableObject\u306b\n\u6d41\u3057\u3053\u3080\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\nGoogle Spreadsheet\u306b\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\u30c6\u30ad\u30b9\u30c8(\u30b7\u30ca\u30ea\u30aa)\u306fGoogle Spreadsheet\u306b\u66f8\u3044\u3066\u3001\u305d\u308c\u3092ScriptableObject\u306b\u5909\u63db\u3057\u307e\u3059\u3002\n\u4ee5\u524d\u305d\u3046\u3044\u3046\u30cd\u30bf\u3092\u6295\u7a3f\u3057\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306f\u5dee\u5206\u306e\u307f\u66f8\u304d\u307e\u3059\u306e\u3067\u3001\u8a73\u7d30\u306f\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\nhttp://qiita.com/hideyuki_hori/items/32dd3d65dd447dabe282\n\n\u30c0\u30df\u30fc\u30c7\u30fc\u30bf\u3092\u5165\u529b\n\n\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u304b\u3089\u30c7\u30fc\u30bf\u3092\u3044\u305f\u3060\u304d\u307e\u3059\u3002\nhttp://lipsum.sugutsukaeru.jp/index.cgi\n\nGet\u901a\u4fe1\u306e\u623b\u308a\u5024\u3092\u4f5c\u308b\n\u4ee5\u4e0b\u306e\u30bd\u30fc\u30b9\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\napp.gas\nfunction doGet(e) {\n  var sheetName = e.parameter.sheetName;\n  var sheet = SpreadsheetApp.openById('SHEET ID');  \n\n  if (sheet.getSheets().some(function(s) {\n    return s.getSheetName() === sheetName;\n  })) {\n    Array.prototype.flatten = function() {\n      return Array.prototype.concat.apply([], this);\n    };\n    var divide = parseInt(e.parameter.divide);\n    var _s = UnderscoreString.load();\n    var texts = sheet.getSheetByName(sheetName).getRange('A:A').getValues()\n    .filter(function(row) {\n      return row[0] !== '';\n    })\n    .map(function(row) {\n      return _s.chop(row[0], divide);\n    })\n    .flatten();\n    return ContentService\n      .createTextOutput(JSON.stringify(texts))\n      .setMimeType(ContentService.MimeType.JSON);\n  }\n}\n\n\n\n\u30c0\u30df\u30fc\u30c7\u30fc\u30bf\u306f1\u884c\u3042\u305f\u308a\u306e\u6587\u5b57\u6570\u304c\u7d50\u69cb\u3042\u308a\u307e\u3059\u3002\n\u3053\u306e\u307e\u307e\u8868\u793a\u3059\u308b\u3068\u8868\u793a\u3057\u304d\u308c\u306a\u3044\u306e\u3067\u3001\u6307\u5b9a\u6587\u5b57\u6570\u3067\u5206\u5272\u3057\u306a\u304c\u3089\u623b\u308a\u5024\u3092\u4f5c\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\nUnderscore.string\u3092\u5165\u308c\u308b\n\u6307\u5b9a\u6587\u5b57\u6570\u3067\u5206\u5272\u3059\u308b\u305f\u3081\u306bUnderscore.string\u306echop\u95a2\u6570\u304c\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u3053\u3053\u304c\u3059\u3054\u304f\u5206\u304b\u308a\u3084\u3059\u304b\u3063\u305f\u3067\u3059\u3002\nhttp://qiita.com/jsoizo/items/948e23231417d203eefa\n\n\u914d\u5217\u3092\u5e73\u3089\u306b\u3059\u308b\nmap\u306b\u304b\u3051\u306a\u304c\u3089\u30c7\u30fc\u30bf\u5206\u5272\u3059\u308b\u3068\u3001\u30dc\u30c3\u30b3\u30dc\u30b3\u306a\u914d\u5217\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n// \u3053\u3093\u306a\u611f\u3058\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u2026\n[\n    'aaaaa',\n    ['bbbbb', 'cccccccc', 'ddddd'],\n    ['ee', 'fffff']\n];\n\n\u306a\u306e\u3067flatten\u95a2\u6570\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\nhttp://qiita.com/shuhei/items/5a3d3a779b64a81b8c8d\nArray.prototype.flatten = function() {\n    return Array.prototype.concat.apply([], this);\n};\n\nprototype\u6c5a\u67d3\u306b\u306a\u3063\u3061\u3083\u3046\u306e\u3067\u3059\u304c\u3001\u305d\u3093\u306a\u9577\u3044\u51e6\u7406\u3067\u3082\u306a\u3044\u3057\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u3067\u7e4b\u3052\u305f\u3089\u304b\u3063\u3053\u3044\u3044\u306a\u3068\u601d\u3044\n\u305d\u3046\u3057\u307e\u3057\u305f\u3002\ngas\u3067\u3082Underscore\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u305d\u3061\u3089\u3092\u4f7f\u7528\u3057\u3066\u3082\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nhttps://github.com/simula-innovation/gas-underscore\nhttp://underscorejs.org/#flatten\n\n\u516c\u958b\n\u3042\u3068\u306fweb\u30a2\u30d7\u30ea\u3067\u516c\u958b\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\nEditor\u3092\u4f5c\u308b\n\u524d\u56de\u306e\u8a18\u4e8b\u304b\u3089\u305d\u3093\u306a\u306b\u5909\u308f\u3063\u3066\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u4e00\u5fdc\u30bd\u30fc\u30b9\u3092\u8cbc\u308a\u307e\u3059\u3002\n1\u884c\u3042\u305f\u308a\u306e\u6587\u5b57\u6570\u304c\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\nScenarioWriter.cs\nusing MiniJSON;\nusing UnityEditor;\nusing UnityEngine;\nusing System.Linq;\nusing System.Collections;\nusing System.Collections.Generic;\n\npublic class ScenarioWriter : EditorWindow {\n\n    string _sheetName;\n    string _divide;\n    string _message;\n\n    string Url {\n        get {\n            return \"https://script.google.com/macros/s/AKfycbz-MdhdluwB_ti3OoZtOE3SuU_nbG0l_YbnvLSLOeiTtg1_304/exec\"\n                + \"?sheetName=\" + _sheetName\n                + \"&divide=\" + _divide;\n        }\n    }\n\n    string Outout {\n        get {\n            return \"Assets/Scenarios/\" + _sheetName + \".asset\";\n        }\n    }\n\n    [MenuItem(\"Window/Scenario Writer\")]\n    static void Open() {\n        GetWindow<ScenarioWriter>();\n    }\n\n    void OnGUI() {\n        EditorGUILayout.Space();\n        _sheetName = EditorGUILayout.TextField(\n            \"sheet name\",\n            _sheetName,\n        GUILayout.Height(20.0f));\n            _divide = EditorGUILayout.TextField(\n            \"divide\",\n            _divide,\n        GUILayout.Height(20.0f));\n        EditorGUILayout.Space();\n\n        if (GUILayout.Button(\"Create\", GUILayout.Width(50.0f))) {\n            EditorCoroutine.Start(Run());\n        }\n\n        EditorGUILayout.Space();\n        EditorGUILayout.LabelField(_message);\n    }\n\n    IEnumerator Run() {\n        var download = new WWW(Url);\n        _message = \"download\";\n        while (!download.isDone) {\n            _message += \".\";\n            yield return new EditorCoroutine.WaitForSeconds(0.1f);\n        }\n        var json = (List<object>)Json.Deserialize(download.text);\n        if (json != null) {\n            var scenario = CreateScriptableObject<Scenario>(Outout);\n            scenario.hideFlags = HideFlags.NotEditable;\n            scenario.texts = json.Select(j => j.ToString()).ToArray();\n            Debug.Log(\"complete.\");\n        }\n        else {\n            Debug.LogError(download.text);\n        }\n        _message = \"\";\n    }\n\n    T CreateScriptableObject<T>(string output) where T : ScriptableObject {\n        var res = ScriptableObject.CreateInstance<T>();\n        AssetDatabase.CreateAsset((ScriptableObject)res, output);\n        return res;\n    }\n}\n\n\n\nScriptableObject\u306b\u3059\u308b\n\n1\u884c\u5f53\u305f\u308a14\u6587\u5b57\u304c\u4e01\u5ea6\u826f\u304b\u3063\u305f\u3067\u3059\u3002\nCreate\u3092\u62bc\u3057\u307e\u3059\u3002\n\n\u30bf\u30c3\u30c1\u5224\u5b9a\u51e6\u7406\u3092\u4f5c\u308b\n\u30bf\u30c3\u30c1\u64cd\u4f5c\u306f3\u3064\u306e\u30af\u30e9\u30b9\u306b\u5206\u3051\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n1. Detector: Input\u30af\u30e9\u30b9\u304b\u3089\u5165\u529b\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3001TouchPhase\u306b\u5fdc\u3058\u305f\u51e6\u7406\u306b\u5206\u5c90\u3055\u305b\u308b\n2. Rule: Detector\u304c\u5207\u308a\u5206\u3051\u305f\u51e6\u7406\u3092\u5143\u306b\u30bf\u30c3\u30c1\u30eb\u30fc\u30eb\u3092\u4f5c\u308b\n3. Controller: \u30bf\u30c3\u30c1\u3055\u308c\u305f\u6642\u306e\u5177\u4f53\u7684\u306a\u632f\u308b\u821e\u3044\u3092\u8a2d\u5b9a\u3059\u308b\n\u5404\u30af\u30e9\u30b9\u9593\u306f\u7d99\u627f\u3067\u304f\u3063\u3064\u3051\u307e\u3057\u305f\u3002\n\nDetector.cs\nusing UnityEngine;\n\nnamespace TouchBehaviours {\n\n    public abstract class Detector : MonoBehaviour {\n\n        Touch _previous;\n\n        protected abstract void OnTouchStart(Touch current);\n        protected abstract void OnTouchCanceled(Touch current, Touch previous);\n        protected abstract void OnTouchEnded(Touch current, Touch previous);\n        protected abstract void OnTouchMoved(Touch current, Touch previous);\n        protected abstract void OnTouchStationary(Touch current, Touch previous);\n\n        void Update() {\n            if (0 < Input.touchCount) {\n                var current = Input.touches[0];\n                switch (current.phase) {\n                    case TouchPhase.Began:\n                        OnTouchStart(current);\n                        break;\n                    case TouchPhase.Canceled:\n                        OnTouchCanceled(current, _previous);\n                        break;\n                    case TouchPhase.Ended:\n                        OnTouchEnded(current, _previous);\n                        break;\n                    case TouchPhase.Moved:\n                        OnTouchMoved(current, _previous);\n                        break;\n                    default:\n                        OnTouchStationary(current, _previous);\n                        break;\n                }\n                _previous = current;\n            }\n        }\n    }\n}\n\n\n\nRule.cs\nusing UnityEngine;\n\nnamespace TouchBehaviours {\n\n    public abstract class Rule : Detector {\n\n        [SerializeField]\n        Camera _camera;\n        [SerializeField]\n        float _difference = 10.0f;\n\n        TouchState _currentTouchState = TouchState.None;\n        Touch _start;\n\n        protected abstract void OnTouch();\n        protected abstract void OnTouch(GameObject go);\n        protected abstract void OnSwipeLeft();\n        protected abstract void OnSwipeRight();\n        protected abstract void OnSwipeUp();\n        protected abstract void OnSwipeDown();\n\n        protected override void OnTouchStart(Touch current) {\n            _currentTouchState = TouchState.Start;\n            _start = current;\n        }\n\n        protected override void OnTouchCanceled(Touch current, Touch previous) {\n            OnTouchEnded(current, previous);\n        }\n\n        protected override void OnTouchEnded(Touch current, Touch previous) {\n            switch (_currentTouchState) {\n                case TouchState.Swipe:\n                    Swiped(_start, current);\n                    break;\n                default:\n                    Touched(current);\n                    break;\n            }\n            _currentTouchState = TouchState.None;\n        }\n\n        protected override void OnTouchMoved(Touch current, Touch previous) {\n            _currentTouchState = TouchState.Swipe;\n        }\n\n        protected override void OnTouchStationary(Touch current, Touch previous) {\n            if (_currentTouchState != TouchState.Swipe) {\n                _currentTouchState = TouchState.Stationary;\n            }\n        }   \n\n        void Touched(Touch touch) {\n            var position = _camera.ScreenToWorldPoint(touch.position);\n            var collider2D = Physics2D.OverlapPoint(position);\n            if (collider2D) {\n                OnTouch(collider2D.gameObject);\n            }\n            else {\n                OnTouch();\n            }\n        }\n\n        void Swiped(Touch start, Touch end) {\n            var x = start.position.x - end.position.x;\n            var y = start.position.y - end.position.y;\n            var absX = Mathf.Abs(start.position.x - end.position.x);\n            var absY = Mathf.Abs(start.position.y - end.position.y);\n\n            if (absX < absY && _difference < absY) {\n                if (y < 0) {\n                    OnSwipeUp();\n                }\n                else {\n                    OnSwipeDown();\n                }\n            }\n            else if (_difference < absX) {\n                if (x < 0) {\n                    OnSwipeRight();\n                }\n                else {\n                    OnSwipeLeft();\n                }\n            }\n        }\n    }\n}\n\n\n\nController.cs\nusing UnityEngine;\nusing UnityEngine.UI;\nusing System.Linq;\nusing TouchBehaviours;\n\npublic class Controller : Rule {\n\n    [SerializeField]\n    Text _text;\n    [SerializeField]\n    Scenario _scenario;\n\n    int _amount = 1;\n    int _index = -1;\n\n    public bool HasNext {\n        get {\n            return _index <= _scenario.texts.Length;\n        }\n    }\n\n    string Text {\n        get {\n            var slice = Slice;\n            _index += _amount;\n            return string.Join(\"\\n\", slice);\n        }\n    }\n\n    string[] Slice {\n        get {\n            return _scenario.texts\n                .Skip(_index + 1)\n                .Take((_index + 1 + _amount) <= _scenario.texts.Length\n                    ? _amount\n                    : _scenario.texts.Length - (_index + 1 + _amount))\n                .ToArray();\n        }\n    }\n\n    protected override void OnTouch(GameObject go) {\n        go.GetComponent<Balloon>().OnTouch();\n    }\n\n    protected override void OnTouch() {\n        if (HasNext) {\n            _text.text = Text;\n        }\n        else {\n            _text.text = \"end.\";\n        }\n    }\n\n    protected override void OnSwipeLeft() {\n        _amount = 1;\n    }\n\n    protected override void OnSwipeRight() {\n        _amount = 2;\n    }\n\n    protected override void OnSwipeUp() {\n        _amount = 3;\n    }\n\n    protected override void OnSwipeDown() {\n        _amount = 4;\n    }\n}\n\n\n\n\u30bf\u30c3\u30c1\u3059\u308b\u3082\u306e\u3092\u4f5c\u308b\n\u9069\u5f53\u306a\u753b\u50cf\u3092\u4f5c\u3063\u3066\u3001\u30e9\u30f3\u30c0\u30e0\u306b\u6d6e\u4e0a\u3055\u305b\u308b\u7269\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n1. Generator: \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u767a\u751f\u3055\u305b\u308bScript\n2. Balloon: \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u304f\u3063\u3064\u3051\u308bScript\n\nGenerator.cs\nusing UnityEngine;\nusing System.Collections;\n\npublic class Generator : MonoBehaviour {\n\n    [SerializeField]\n    Controller _controller;\n    [SerializeField]\n    GameObject[] _balloons;\n    [SerializeField]\n    Tips.Random.Float _wait;\n    [SerializeField]\n    Tips.Random.Float _x;\n\n    GameObject Target {\n        get {\n            return _balloons[Random.Range(0, _balloons.Length)];\n        }\n    }\n\n    Vector2 Position {\n        get {\n            return new Vector2(_x.Value, -2);\n        }\n    }\n\n    IEnumerator Start() {\n        while (_controller.HasNext) {\n            var balloon = Instantiate(Target) as GameObject;\n            balloon.transform.position = Position;\n            yield return new WaitForSeconds(_wait.Value);\n        }\n    }\n}\n\n\n\n\nBalloon.cs\nusing UnityEngine;\nusing System.Collections;\n\n[RequireComponent(typeof(BoxCollider2D))]\npublic class Balloon : MonoBehaviour {\n\n    [SerializeField]\n    Tips.Random.Float _wait;\n    [SerializeField]\n    Tips.Random.Float _move;\n\n    Rigidbody2D _rigidbody2D;\n\n    Rigidbody2D Rigidbody2DSelf {\n        get {\n            _rigidbody2D = _rigidbody2D ?? GetComponent<Rigidbody2D>();\n            return _rigidbody2D;\n        }\n    }\n\n    public void OnTouch() {\n        Destroy(gameObject);\n    }\n\n    IEnumerator Start() {\n        while (true) {\n            Rigidbody2DSelf.AddForce(new Vector2(0.0f, _move.Value));\n            yield return new WaitForSeconds(_wait.Value);\n        }\n    }\n}\n\n\n\n\u6700\u5f8c\u306b\n\nHierarchy\n\u3053\u3093\u306a\u611f\u3058\u306b\u914d\u7f6e\u3057\u3066\u3044\u307e\u3059\u3002\n\n\nScenario\u30d5\u30a1\u30a4\u30eb\u300ctest\u300d\u306e\u30c7\u30fc\u30bf\u304c\u4f55\u6545\u304b\u6d88\u3048\u308b\u6642\u304c\u3042\u308b\n\u306a\u3093\u306a\u3093\u3067\u3057\u3087\u3046\u304b\u3002\n\u3082\u3057GitHub\u304b\u3089\u843d\u3068\u3057\u3066\u3044\u305f\u3060\u3051\u308b\u3088\u3046\u3067\u3057\u305f\u3089\u3001\u304a\u624b\u6570\u3067\u3059\u304cScenario\u30d5\u30a1\u30a4\u30eb\u300ctest\u300d\u306e\u30c7\u30fc\u30bf\u304c\n\u5165\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u3054\u78ba\u8a8d\u3044\u305f\u3060\u304d\u3001\u3082\u3057\u6d88\u3048\u3066\u308b\u306a\u3089Window/Scenario Writer\u304b\u3089\u30c7\u30fc\u30bf\u3092DL\u3001Controller\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\n\u518d\u30a2\u30bf\u30c3\u30c1\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u5730\u5473\u306b\u30cf\u30de\u3063\u305f\u3053\u3068\n\nCamera#ScreenToWorldPoint\u304c\u3061\u3083\u3093\u3068\u3057\u3066\u304f\u308c\u306a\u3044\n2D\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30bf\u30c3\u30c1\u5224\u5b9a\u306e\u305f\u3081\u3001Camera#ScreenToWorldPoint\u3092\u4f7f\u3063\u3066\u308b\u306e\u3067\u3059\u304c\n\u30ab\u30e1\u30e9\u306eProjection\u3092\u300cOrthographic\u300d\u306b\u3057\u3066\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n\nScriptableObject\u306e\u30e1\u30f3\u30d0\u30fc\u306f\u5909\u66f4\u3055\u308c\u305f\u72b6\u614b\u3092\u6301\u3064\n\u672c\u5f53\u306fController\u30af\u30e9\u30b9\u306e\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\u51e6\u7406\u3068\u3001\u307e\u3060\u8868\u793a\u3059\u308b\u30c6\u30ad\u30b9\u30c8\u304c\u3042\u308b\u304b\u5224\u5b9a\u3059\u308b\u51e6\u7406\u306f\nScenario\u30af\u30e9\u30b9\u306b\u6301\u305f\u305b\u305f\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u305d\u3046\u3059\u308b\u3068\u73fe\u5728\u306eindex\u60c5\u5831\u3092\u30e1\u30f3\u30d0\u30fc\u306b\u6301\u305f\u305b\u306a\u304f\u3066\u306f\u3044\u3051\u307e\u305b\u3093\u3002\n\u30b2\u30fc\u30e0\u3092\u7d42\u4e86\u3057\u3066\u3082Unity\u3092\u518d\u8d77\u52d5\u3059\u308b\u307e\u3067\u521d\u671f\u5316\u3055\u308c\u306a\u3044\u306e\u3067\u3001\u6b21\u56de\u8d77\u52d5\u3057\u305f\u6642\u306b\u4ee5\u524d\u306e\u72b6\u614b\u3092\u6301\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u666e\u901a\u306bController\u30af\u30e9\u30b9\u306b\u4e0a\u8a18\u51e6\u7406\u3092\u6301\u305f\u305b\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\u6b21\u4f5c\u308b\u6642\u306f\u3001ScriptableObject\u3092\u7ba1\u7406\u3059\u308b\u30af\u30e9\u30b9\u3092\u4f5c\u308d\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n# \u306f\u3058\u3081\u306b\n\u4ee5\u4e0b\u306e\u30eb\u30fc\u30eb\u3067\u30bf\u30c3\u30c1\u30b8\u30a7\u30b9\u30c1\u30e3\u30fc\u306e\u7ba1\u7406\u3059\u308b\u3082\u306e\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\n1. \u4f55\u3082\u306a\u3044\u3068\u3053\u308d\u3092\u30bf\u30c3\u30c1\u3057\u305f\u3089\u30c6\u30ad\u30b9\u30c8\u304c\u9032\u3080\n2. \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30bf\u30c3\u30c1\u3059\u308b\u3068\u3001\u30bf\u30c3\u30c1\u3055\u308c\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u6d88\u3048\u308b\n3. \u4e0a\u4e0b\u5de6\u53f3\u306b\u30d5\u30ea\u30c3\u30af\u3057\u305f\u3089\u3001\u30c6\u30ad\u30b9\u30c8\u304c\u9032\u3080\u884c\u6570\u3092\u5909\u66f4\u3059\u308b\n\t1. \u5de6: 1\n\t2. \u53f3: 2\n\t3. \u4e0a: 3\n\t4. \u4e0b: 4\n4. \u30b8\u30a7\u30b9\u30c1\u30e3\u30fc\u306e\u512a\u5148\u9806\u4f4d\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3001\u4e0a\u4f4d\u30b8\u30a7\u30b9\u30c1\u30e3\u30fc\u304c\u5224\u5b9a\u3055\u308c\u305f\u5834\u5408\u306f\u4e0b\u4f4d\u30b8\u30a7\u30b9\u30c1\u30e3\u30fc\u3092\u5b9f\u884c\u3057\u306a\u3044\n\t5. \u30d5\u30ea\u30c3\u30af\n\t6. \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30bf\u30c3\u30c1\u3057\u305f\n\t7. \u306a\u306b\u3082\u306a\u3044\u3068\u3053\u308d\u3092\u30bf\u30c3\u30c1\u3057\u305f\n5. \u3061\u3087\u3063\u3068\u3067\u3082\u6307\u3092\u52d5\u304b\u3057\u305f\u3089\u305d\u306e\u30bf\u30c3\u30c1\u306f\u30d5\u30ea\u30c3\u30af\u3068\u307f\u306a\u3059\n6. \u3061\u3087\u3063\u3068\u3067\u3082\u6307\u3092\u52d5\u304b\u3057\u305f\u3089\u305d\u306e\u30bf\u30c3\u30c1\u306f\u30d5\u30ea\u30c3\u30af\u3068\u307f\u306a\u3059\u304c\u3001\u59cb\u70b9\u304b\u3089\u3042\u3093\u307e\u308a\u52d5\u3044\u3066\u306a\u304b\u3063\u305f\u3089\u30d5\u30ea\u30c3\u30af\u30a2\u30af\u30b7\u30e7\u30f3\u306f\u884c\u308f\u306a\u3044\n7. \u30b8\u30a7\u30b9\u30c1\u30e3\u30fc\u306f\u6307\u3092\u96e2\u3057\u305f\u77ac\u9593\u306e\u72b6\u614b\u3067\u5224\u5b9a\u3059\u308b\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-02 7.43.39.jpg](https://qiita-image-store.s3.amazonaws.com/0/61624/f2bd9c55-96bd-8e95-106a-509ee46a738e.jpeg \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-02 7.43.39.jpg\")\n\n## \u30bd\u30fc\u30b9\nGitHub\u306b\u7f6e\u3044\u3066\u307e\u3059\u306e\u3067\u3088\u308d\u3057\u3051\u308c\u3070\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\nhttps://github.com/hideyuki-hori/TestTouch\n\n# \u8868\u793a\u3059\u308b\u30c6\u30ad\u30b9\u30c8(\u30b7\u30ca\u30ea\u30aa)\u3092\u4f5c\u308b\n\u3053\u306e\u9805\u76ee\u306e\u30b4\u30fc\u30eb\u306fScriptableObject\u306b\u30c6\u30ad\u30b9\u30c8\u30c7\u30fc\u30bf\u304c\u5165\u3063\u3066\u3044\u308b\u3053\u3068\u3067\u3059\u3002\nGoogle Spreadsheet\u3067\u30b7\u30ca\u30ea\u30aa\u3092\u66f8\u3044\u3066\u3001\u305d\u308c\u3092Unity\u304b\u3089Get\u901a\u4fe1\u3067\u53d6\u3063\u3066\u304d\u3066Editor\u3067ScriptableObject\u306b\n\u6d41\u3057\u3053\u3080\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-03 0.48.07.jpg](https://qiita-image-store.s3.amazonaws.com/0/61624/1c2965fc-31a6-4c69-99c8-bddc8c9d3211.jpeg \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-03 0.48.07.jpg\")\n\n# Google Spreadsheet\u306b\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\u30c6\u30ad\u30b9\u30c8(\u30b7\u30ca\u30ea\u30aa)\u306fGoogle Spreadsheet\u306b\u66f8\u3044\u3066\u3001\u305d\u308c\u3092ScriptableObject\u306b\u5909\u63db\u3057\u307e\u3059\u3002\n\u4ee5\u524d\u305d\u3046\u3044\u3046\u30cd\u30bf\u3092\u6295\u7a3f\u3057\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306f\u5dee\u5206\u306e\u307f\u66f8\u304d\u307e\u3059\u306e\u3067\u3001\u8a73\u7d30\u306f\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\nhttp://qiita.com/hideyuki_hori/items/32dd3d65dd447dabe282\n\n## \u30c0\u30df\u30fc\u30c7\u30fc\u30bf\u3092\u5165\u529b\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-03 0.50.47.jpg](https://qiita-image-store.s3.amazonaws.com/0/61624/f34370e7-0efa-184c-9908-993a9fe89e74.jpeg \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-03 0.50.47.jpg\")\n\n\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u304b\u3089\u30c7\u30fc\u30bf\u3092\u3044\u305f\u3060\u304d\u307e\u3059\u3002\nhttp://lipsum.sugutsukaeru.jp/index.cgi\n\n## Get\u901a\u4fe1\u306e\u623b\u308a\u5024\u3092\u4f5c\u308b\n\n\u4ee5\u4e0b\u306e\u30bd\u30fc\u30b9\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\n```app.gas\nfunction doGet(e) {\n  var sheetName = e.parameter.sheetName;\n  var sheet = SpreadsheetApp.openById('SHEET ID');  \n  \n  if (sheet.getSheets().some(function(s) {\n    return s.getSheetName() === sheetName;\n  })) {\n    Array.prototype.flatten = function() {\n      return Array.prototype.concat.apply([], this);\n    };\n    var divide = parseInt(e.parameter.divide);\n    var _s = UnderscoreString.load();\n    var texts = sheet.getSheetByName(sheetName).getRange('A:A').getValues()\n    .filter(function(row) {\n      return row[0] !== '';\n    })\n    .map(function(row) {\n      return _s.chop(row[0], divide);\n    })\n    .flatten();\n    return ContentService\n      .createTextOutput(JSON.stringify(texts))\n      .setMimeType(ContentService.MimeType.JSON);\n  }\n}\n\n```\n\n\u30c0\u30df\u30fc\u30c7\u30fc\u30bf\u306f1\u884c\u3042\u305f\u308a\u306e\u6587\u5b57\u6570\u304c\u7d50\u69cb\u3042\u308a\u307e\u3059\u3002\n\u3053\u306e\u307e\u307e\u8868\u793a\u3059\u308b\u3068\u8868\u793a\u3057\u304d\u308c\u306a\u3044\u306e\u3067\u3001\u6307\u5b9a\u6587\u5b57\u6570\u3067\u5206\u5272\u3057\u306a\u304c\u3089\u623b\u308a\u5024\u3092\u4f5c\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n## Underscore.string\u3092\u5165\u308c\u308b\n\u6307\u5b9a\u6587\u5b57\u6570\u3067\u5206\u5272\u3059\u308b\u305f\u3081\u306bUnderscore.string\u306echop\u95a2\u6570\u304c\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u3053\u3053\u304c\u3059\u3054\u304f\u5206\u304b\u308a\u3084\u3059\u304b\u3063\u305f\u3067\u3059\u3002\nhttp://qiita.com/jsoizo/items/948e23231417d203eefa\n\n## \u914d\u5217\u3092\u5e73\u3089\u306b\u3059\u308b\nmap\u306b\u304b\u3051\u306a\u304c\u3089\u30c7\u30fc\u30bf\u5206\u5272\u3059\u308b\u3068\u3001\u30dc\u30c3\u30b3\u30dc\u30b3\u306a\u914d\u5217\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n```\n// \u3053\u3093\u306a\u611f\u3058\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u2026\n[\n\t'aaaaa',\n\t['bbbbb', 'cccccccc', 'ddddd'],\n\t['ee', 'fffff']\n];\n```\n\n\u306a\u306e\u3067flatten\u95a2\u6570\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\nhttp://qiita.com/shuhei/items/5a3d3a779b64a81b8c8d\n\n```\nArray.prototype.flatten = function() {\n\treturn Array.prototype.concat.apply([], this);\n};\n```\n\nprototype\u6c5a\u67d3\u306b\u306a\u3063\u3061\u3083\u3046\u306e\u3067\u3059\u304c\u3001\u305d\u3093\u306a\u9577\u3044\u51e6\u7406\u3067\u3082\u306a\u3044\u3057\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u3067\u7e4b\u3052\u305f\u3089\u304b\u3063\u3053\u3044\u3044\u306a\u3068\u601d\u3044\n\u305d\u3046\u3057\u307e\u3057\u305f\u3002\ngas\u3067\u3082Underscore\u304c\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u305d\u3061\u3089\u3092\u4f7f\u7528\u3057\u3066\u3082\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nhttps://github.com/simula-innovation/gas-underscore\nhttp://underscorejs.org/#flatten\n\n## \u516c\u958b\n\u3042\u3068\u306fweb\u30a2\u30d7\u30ea\u3067\u516c\u958b\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n## Editor\u3092\u4f5c\u308b\n\u524d\u56de\u306e\u8a18\u4e8b\u304b\u3089\u305d\u3093\u306a\u306b\u5909\u308f\u3063\u3066\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u4e00\u5fdc\u30bd\u30fc\u30b9\u3092\u8cbc\u308a\u307e\u3059\u3002\n1\u884c\u3042\u305f\u308a\u306e\u6587\u5b57\u6570\u304c\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n```ScenarioWriter.cs\nusing MiniJSON;\nusing UnityEditor;\nusing UnityEngine;\nusing System.Linq;\nusing System.Collections;\nusing System.Collections.Generic;\n\npublic class ScenarioWriter : EditorWindow {\n\t\n\tstring _sheetName;\n\tstring _divide;\n\tstring _message;\n\n\tstring Url {\n\t\tget {\n\t\t\treturn \"https://script.google.com/macros/s/AKfycbz-MdhdluwB_ti3OoZtOE3SuU_nbG0l_YbnvLSLOeiTtg1_304/exec\"\n\t\t\t\t+ \"?sheetName=\" + _sheetName\n\t\t\t\t+ \"&divide=\" + _divide;\n\t\t}\n\t}\n\n\tstring Outout {\n\t\tget {\n\t\t\treturn \"Assets/Scenarios/\" + _sheetName + \".asset\";\n\t\t}\n\t}\n\n\t[MenuItem(\"Window/Scenario Writer\")]\n\tstatic void Open() {\n\t\tGetWindow<ScenarioWriter>();\n\t}\n\n\tvoid OnGUI() {\n\t\tEditorGUILayout.Space();\n\t\t_sheetName = EditorGUILayout.TextField(\n\t\t\t\"sheet name\",\n\t\t\t_sheetName,\n\t\tGUILayout.Height(20.0f));\n\t\t\t_divide = EditorGUILayout.TextField(\n\t\t\t\"divide\",\n\t\t\t_divide,\n\t\tGUILayout.Height(20.0f));\n\t\tEditorGUILayout.Space();\n\n\t\tif (GUILayout.Button(\"Create\", GUILayout.Width(50.0f))) {\n\t\t\tEditorCoroutine.Start(Run());\n\t\t}\n\n\t\tEditorGUILayout.Space();\n\t\tEditorGUILayout.LabelField(_message);\n\t}\n\n\tIEnumerator Run() {\n\t\tvar download = new WWW(Url);\n\t\t_message = \"download\";\n\t\twhile (!download.isDone) {\n\t\t\t_message += \".\";\n\t\t\tyield return new EditorCoroutine.WaitForSeconds(0.1f);\n\t\t}\n\t\tvar json = (List<object>)Json.Deserialize(download.text);\n\t\tif (json != null) {\n\t\t\tvar scenario = CreateScriptableObject<Scenario>(Outout);\n\t\t\tscenario.hideFlags = HideFlags.NotEditable;\n\t\t\tscenario.texts = json.Select(j => j.ToString()).ToArray();\n\t\t\tDebug.Log(\"complete.\");\n\t\t}\n\t\telse {\n\t\t\tDebug.LogError(download.text);\n\t\t}\n\t\t_message = \"\";\n\t}\n\n\tT CreateScriptableObject<T>(string output) where T : ScriptableObject {\n\t\tvar res = ScriptableObject.CreateInstance<T>();\n\t\tAssetDatabase.CreateAsset((ScriptableObject)res, output);\n\t\treturn res;\n\t}\n}\n```\n\n## ScriptableObject\u306b\u3059\u308b\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-03 1.10.26.jpg](https://qiita-image-store.s3.amazonaws.com/0/61624/6ddc4d2a-fa9b-249d-30d8-8c5f66bcda95.jpeg \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-03 1.10.26.jpg\")\n\n1\u884c\u5f53\u305f\u308a14\u6587\u5b57\u304c\u4e01\u5ea6\u826f\u304b\u3063\u305f\u3067\u3059\u3002\nCreate\u3092\u62bc\u3057\u307e\u3059\u3002\n\n\n# \u30bf\u30c3\u30c1\u5224\u5b9a\u51e6\u7406\u3092\u4f5c\u308b\n\u30bf\u30c3\u30c1\u64cd\u4f5c\u306f3\u3064\u306e\u30af\u30e9\u30b9\u306b\u5206\u3051\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n1. Detector: Input\u30af\u30e9\u30b9\u304b\u3089\u5165\u529b\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3001TouchPhase\u306b\u5fdc\u3058\u305f\u51e6\u7406\u306b\u5206\u5c90\u3055\u305b\u308b\n2. Rule: Detector\u304c\u5207\u308a\u5206\u3051\u305f\u51e6\u7406\u3092\u5143\u306b\u30bf\u30c3\u30c1\u30eb\u30fc\u30eb\u3092\u4f5c\u308b\n3. Controller: \u30bf\u30c3\u30c1\u3055\u308c\u305f\u6642\u306e\u5177\u4f53\u7684\u306a\u632f\u308b\u821e\u3044\u3092\u8a2d\u5b9a\u3059\u308b\n\n\u5404\u30af\u30e9\u30b9\u9593\u306f\u7d99\u627f\u3067\u304f\u3063\u3064\u3051\u307e\u3057\u305f\u3002\n\n```Detector.cs\nusing UnityEngine;\n\nnamespace TouchBehaviours {\n\n\tpublic abstract class Detector : MonoBehaviour {\n\t\t\n\t\tTouch _previous;\n\n\t\tprotected abstract void OnTouchStart(Touch current);\n\t\tprotected abstract void OnTouchCanceled(Touch current, Touch previous);\n\t\tprotected abstract void OnTouchEnded(Touch current, Touch previous);\n\t\tprotected abstract void OnTouchMoved(Touch current, Touch previous);\n\t\tprotected abstract void OnTouchStationary(Touch current, Touch previous);\n\n\t\tvoid Update() {\n\t\t\tif (0 < Input.touchCount) {\n\t\t\t\tvar current = Input.touches[0];\n\t\t\t\tswitch (current.phase) {\n\t\t\t\t\tcase TouchPhase.Began:\n\t\t\t\t\t\tOnTouchStart(current);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase TouchPhase.Canceled:\n\t\t\t\t\t\tOnTouchCanceled(current, _previous);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase TouchPhase.Ended:\n\t\t\t\t\t\tOnTouchEnded(current, _previous);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase TouchPhase.Moved:\n\t\t\t\t\t\tOnTouchMoved(current, _previous);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tOnTouchStationary(current, _previous);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t_previous = current;\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n```Rule.cs\nusing UnityEngine;\n\nnamespace TouchBehaviours {\n\n\tpublic abstract class Rule : Detector {\n\n\t\t[SerializeField]\n\t\tCamera _camera;\n\t\t[SerializeField]\n\t\tfloat _difference = 10.0f;\n\n\t\tTouchState _currentTouchState = TouchState.None;\n\t\tTouch _start;\n\n\t\tprotected abstract void OnTouch();\n\t\tprotected abstract void OnTouch(GameObject go);\n\t\tprotected abstract void OnSwipeLeft();\n\t\tprotected abstract void OnSwipeRight();\n\t\tprotected abstract void OnSwipeUp();\n\t\tprotected abstract void OnSwipeDown();\n\n\t\tprotected override void OnTouchStart(Touch current) {\n\t\t\t_currentTouchState = TouchState.Start;\n\t\t\t_start = current;\n\t\t}\n\n\t\tprotected override void OnTouchCanceled(Touch current, Touch previous) {\n\t\t\tOnTouchEnded(current, previous);\n\t\t}\n\n\t\tprotected override void OnTouchEnded(Touch current, Touch previous) {\n\t\t\tswitch (_currentTouchState) {\n\t\t\t\tcase TouchState.Swipe:\n\t\t\t\t\tSwiped(_start, current);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tTouched(current);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t_currentTouchState = TouchState.None;\n\t\t}\n\n\t\tprotected override void OnTouchMoved(Touch current, Touch previous) {\n\t\t\t_currentTouchState = TouchState.Swipe;\n\t\t}\n\n\t\tprotected override void OnTouchStationary(Touch current, Touch previous) {\n\t\t\tif (_currentTouchState != TouchState.Swipe) {\n\t\t\t\t_currentTouchState = TouchState.Stationary;\n\t\t\t}\n\t\t}\t\n\n\t\tvoid Touched(Touch touch) {\n\t\t\tvar position = _camera.ScreenToWorldPoint(touch.position);\n\t\t\tvar collider2D = Physics2D.OverlapPoint(position);\n\t\t\tif (collider2D) {\n\t\t\t\tOnTouch(collider2D.gameObject);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tOnTouch();\n\t\t\t}\n\t\t}\n\t\t\n\t\tvoid Swiped(Touch start, Touch end) {\n\t\t\tvar x = start.position.x - end.position.x;\n\t\t\tvar y = start.position.y - end.position.y;\n\t\t\tvar absX = Mathf.Abs(start.position.x - end.position.x);\n\t\t\tvar absY = Mathf.Abs(start.position.y - end.position.y);\n\t\t\t\n\t\t\tif (absX < absY && _difference < absY) {\n\t\t\t\tif (y < 0) {\n\t\t\t\t\tOnSwipeUp();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tOnSwipeDown();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (_difference < absX) {\n\t\t\t\tif (x < 0) {\n\t\t\t\t\tOnSwipeRight();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tOnSwipeLeft();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\n\n```Controller.cs\nusing UnityEngine;\nusing UnityEngine.UI;\nusing System.Linq;\nusing TouchBehaviours;\n\npublic class Controller : Rule {\n\t\n\t[SerializeField]\n\tText _text;\n\t[SerializeField]\n\tScenario _scenario;\n\t\n\tint _amount = 1;\n\tint _index = -1;\n\n\tpublic bool HasNext {\n\t\tget {\n\t\t\treturn _index <= _scenario.texts.Length;\n\t\t}\n\t}\n\t\n\tstring Text {\n\t\tget {\n\t\t\tvar slice = Slice;\n\t\t\t_index += _amount;\n\t\t\treturn string.Join(\"\\n\", slice);\n\t\t}\n\t}\n\n\tstring[] Slice {\n\t\tget {\n\t\t\treturn _scenario.texts\n\t\t\t\t.Skip(_index + 1)\n\t\t\t\t.Take((_index + 1 + _amount) <= _scenario.texts.Length\n\t\t\t\t\t? _amount\n\t\t\t\t\t: _scenario.texts.Length - (_index + 1 + _amount))\n\t\t\t\t.ToArray();\n\t\t}\n\t}\n\n\tprotected override void OnTouch(GameObject go) {\n\t\tgo.GetComponent<Balloon>().OnTouch();\n\t}\n\n\tprotected override void OnTouch() {\n\t\tif (HasNext) {\n\t\t\t_text.text = Text;\n\t\t}\n\t\telse {\n\t\t\t_text.text = \"end.\";\n\t\t}\n\t}\n\n\tprotected override void OnSwipeLeft() {\n\t\t_amount = 1;\n\t}\n\n\tprotected override void OnSwipeRight() {\n\t\t_amount = 2;\n\t}\n\n\tprotected override void OnSwipeUp() {\n\t\t_amount = 3;\n\t}\n\n\tprotected override void OnSwipeDown() {\n\t\t_amount = 4;\n\t}\n}\n```\n\n# \u30bf\u30c3\u30c1\u3059\u308b\u3082\u306e\u3092\u4f5c\u308b\n\u9069\u5f53\u306a\u753b\u50cf\u3092\u4f5c\u3063\u3066\u3001\u30e9\u30f3\u30c0\u30e0\u306b\u6d6e\u4e0a\u3055\u305b\u308b\u7269\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n1. Generator: \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u767a\u751f\u3055\u305b\u308bScript\n2. Balloon: \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u304f\u3063\u3064\u3051\u308bScript\n\n\n```Generator.cs\nusing UnityEngine;\nusing System.Collections;\n\npublic class Generator : MonoBehaviour {\n\n\t[SerializeField]\n\tController _controller;\n\t[SerializeField]\n\tGameObject[] _balloons;\n\t[SerializeField]\n\tTips.Random.Float _wait;\n\t[SerializeField]\n\tTips.Random.Float _x;\n\n\tGameObject Target {\n\t\tget {\n\t\t\treturn _balloons[Random.Range(0, _balloons.Length)];\n\t\t}\n\t}\n\n\tVector2 Position {\n\t\tget {\n\t\t\treturn new Vector2(_x.Value, -2);\n\t\t}\n\t}\n\n\tIEnumerator Start() {\n\t\twhile (_controller.HasNext) {\n\t\t\tvar balloon = Instantiate(Target) as GameObject;\n\t\t\tballoon.transform.position = Position;\n\t\t\tyield return new WaitForSeconds(_wait.Value);\n\t\t}\n\t}\n}\n\n```\n\n```Balloon.cs\nusing UnityEngine;\nusing System.Collections;\n\n[RequireComponent(typeof(BoxCollider2D))]\npublic class Balloon : MonoBehaviour {\n\n\t[SerializeField]\n\tTips.Random.Float _wait;\n\t[SerializeField]\n\tTips.Random.Float _move;\n\n\tRigidbody2D _rigidbody2D;\n\t\n\tRigidbody2D Rigidbody2DSelf {\n\t\tget {\n\t\t\t_rigidbody2D = _rigidbody2D ?? GetComponent<Rigidbody2D>();\n\t\t\treturn _rigidbody2D;\n\t\t}\n\t}\n\n\tpublic void OnTouch() {\n\t\tDestroy(gameObject);\n\t}\n\n\tIEnumerator Start() {\n\t\twhile (true) {\n\t\t\tRigidbody2DSelf.AddForce(new Vector2(0.0f, _move.Value));\n\t\t\tyield return new WaitForSeconds(_wait.Value);\n\t\t}\n\t}\n}\n```\n# \u6700\u5f8c\u306b\n## Hierarchy\n\u3053\u3093\u306a\u611f\u3058\u306b\u914d\u7f6e\u3057\u3066\u3044\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-03 1.13.37.jpg](https://qiita-image-store.s3.amazonaws.com/0/61624/3829dd14-62dd-44b1-6c6b-470b3bc4d193.jpeg \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-03 1.13.37.jpg\")\n\n## Scenario\u30d5\u30a1\u30a4\u30eb\u300ctest\u300d\u306e\u30c7\u30fc\u30bf\u304c\u4f55\u6545\u304b\u6d88\u3048\u308b\u6642\u304c\u3042\u308b\n\u306a\u3093\u306a\u3093\u3067\u3057\u3087\u3046\u304b\u3002\n\u3082\u3057GitHub\u304b\u3089\u843d\u3068\u3057\u3066\u3044\u305f\u3060\u3051\u308b\u3088\u3046\u3067\u3057\u305f\u3089\u3001\u304a\u624b\u6570\u3067\u3059\u304cScenario\u30d5\u30a1\u30a4\u30eb\u300ctest\u300d\u306e\u30c7\u30fc\u30bf\u304c\n\u5165\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u3054\u78ba\u8a8d\u3044\u305f\u3060\u304d\u3001\u3082\u3057\u6d88\u3048\u3066\u308b\u306a\u3089Window/Scenario Writer\u304b\u3089\u30c7\u30fc\u30bf\u3092DL\u3001Controller\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\n\u518d\u30a2\u30bf\u30c3\u30c1\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n## \u5730\u5473\u306b\u30cf\u30de\u3063\u305f\u3053\u3068\n### Camera#ScreenToWorldPoint\u304c\u3061\u3083\u3093\u3068\u3057\u3066\u304f\u308c\u306a\u3044\n2D\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30bf\u30c3\u30c1\u5224\u5b9a\u306e\u305f\u3081\u3001Camera#ScreenToWorldPoint\u3092\u4f7f\u3063\u3066\u308b\u306e\u3067\u3059\u304c\n\u30ab\u30e1\u30e9\u306eProjection\u3092\u300cOrthographic\u300d\u306b\u3057\u3066\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-03 1.32.58.jpg](https://qiita-image-store.s3.amazonaws.com/0/61624/cecc4cd2-dfbe-9670-dd7e-59ec8eb33e7b.jpeg \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-03 1.32.58.jpg\")\n\n### ScriptableObject\u306e\u30e1\u30f3\u30d0\u30fc\u306f\u5909\u66f4\u3055\u308c\u305f\u72b6\u614b\u3092\u6301\u3064\n\u672c\u5f53\u306fController\u30af\u30e9\u30b9\u306e\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\u51e6\u7406\u3068\u3001\u307e\u3060\u8868\u793a\u3059\u308b\u30c6\u30ad\u30b9\u30c8\u304c\u3042\u308b\u304b\u5224\u5b9a\u3059\u308b\u51e6\u7406\u306f\nScenario\u30af\u30e9\u30b9\u306b\u6301\u305f\u305b\u305f\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u305d\u3046\u3059\u308b\u3068\u73fe\u5728\u306eindex\u60c5\u5831\u3092\u30e1\u30f3\u30d0\u30fc\u306b\u6301\u305f\u305b\u306a\u304f\u3066\u306f\u3044\u3051\u307e\u305b\u3093\u3002\n\n\u30b2\u30fc\u30e0\u3092\u7d42\u4e86\u3057\u3066\u3082Unity\u3092\u518d\u8d77\u52d5\u3059\u308b\u307e\u3067\u521d\u671f\u5316\u3055\u308c\u306a\u3044\u306e\u3067\u3001\u6b21\u56de\u8d77\u52d5\u3057\u305f\u6642\u306b\u4ee5\u524d\u306e\u72b6\u614b\u3092\u6301\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u666e\u901a\u306bController\u30af\u30e9\u30b9\u306b\u4e0a\u8a18\u51e6\u7406\u3092\u6301\u305f\u305b\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\u6b21\u4f5c\u308b\u6642\u306f\u3001ScriptableObject\u3092\u7ba1\u7406\u3059\u308b\u30af\u30e9\u30b9\u3092\u4f5c\u308d\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n"}