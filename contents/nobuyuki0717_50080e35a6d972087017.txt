{"context": "\n\n\u554f\u984c\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u306bPhalcon\\Session\\Adapter\\Redis\u3092\u4f7f\u7528\u3057\u305f\u969b\u306bSegmentation Fault\u304c\u767a\u751f\u3059\u308b\u3002\n\n\u539f\u56e0\n\u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u306a\u3044\u6bb5\u968e\u3067session_start()\u3057\u305f\u969b\u306b\nsession_set_save_handler()\u3067\u767b\u9332\u3055\u308c\u305fwrite()\u304c\u7a7a\u6587\u5b57\u3092\u4fdd\u5b58\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u3002\n\n\u5bfe\u51e6\u6cd5\ndata\u306e\u5b58\u5728\u30c1\u30a7\u30c3\u30af\u3092\u8ffd\u52a0\u3057\u3066compiel\u3057\u76f4\u3059\u3002\n\nredis.zep\n(\u7701\u7565)\n    /**\n     * {@inheritdoc}\n     */\n    public function write(string sessionId, string data)\n    {\n        // data\u304c\u7a7a\u306e\u5834\u5408\u306f\u66f8\u304d\u8fbc\u307e\u306a\u3044\n        if empty data {\n            return;\n        }\n\n        this->_redis->save(sessionId, data, this->_lifetime);\n    }\n\n\n\u975ecompile\u306e\u5834\u5408(yum\u7b49\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u5834\u5408)\u306f\u30b5\u30d6\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3066override\u3059\u308b\u3002\n\nRedis.php\n<?php\n\nnamespace MyApp\\Session\\Adapter;\n\nclass Redis extends \\Phalcon\\Session\\Adapter\\Redis\n{\n    /**\n     * {@inheritdoc}\n     */\n    public function write($sessionId, $data)\n    {\n        // data\u304c\u7a7a\u306e\u5834\u5408\u306f\u66f8\u304d\u8fbc\u307e\u306a\u3044\n        if (empty($data)) {\n            return;\n        }\n\n        $this->_redis->save($sessionId, $data, $this->_lifetime);\n    }\n}\n\n\n\u5fdc\u6025\u51e6\u7f6e\u306a\u611f\u304c\u5f37\u3044\u3067\u3059\u304c\u3001\u4e00\u5148\u305a\u3053\u308c\u3067\n\n\u74b0\u5883\n\nPHP 5.6.18\nPhalcon 2.0.10\n\n\n## \u554f\u984c\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u306bPhalcon\\Session\\Adapter\\Redis\u3092\u4f7f\u7528\u3057\u305f\u969b\u306bSegmentation Fault\u304c\u767a\u751f\u3059\u308b\u3002\n\n## \u539f\u56e0\n\u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u306a\u3044\u6bb5\u968e\u3067session_start()\u3057\u305f\u969b\u306b\nsession_set_save_handler()\u3067\u767b\u9332\u3055\u308c\u305fwrite()\u304c\u7a7a\u6587\u5b57\u3092\u4fdd\u5b58\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u3002\n\n## \u5bfe\u51e6\u6cd5\ndata\u306e\u5b58\u5728\u30c1\u30a7\u30c3\u30af\u3092\u8ffd\u52a0\u3057\u3066compiel\u3057\u76f4\u3059\u3002\n\n``` redis.zep\n(\u7701\u7565)\n\t/**\n\t * {@inheritdoc}\n\t */\n\tpublic function write(string sessionId, string data)\n\t{\n\t\t// data\u304c\u7a7a\u306e\u5834\u5408\u306f\u66f8\u304d\u8fbc\u307e\u306a\u3044\n\t\tif empty data {\n\t\t\treturn;\n\t\t}\n\n\t\tthis->_redis->save(sessionId, data, this->_lifetime);\n\t}\n```\n\n\u975ecompile\u306e\u5834\u5408(yum\u7b49\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u5834\u5408)\u306f\u30b5\u30d6\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3066override\u3059\u308b\u3002\n\n```Redis.php\n<?php\n\nnamespace MyApp\\Session\\Adapter;\n\nclass Redis extends \\Phalcon\\Session\\Adapter\\Redis\n{\n\t/**\n\t * {@inheritdoc}\n\t */\n\tpublic function write($sessionId, $data)\n\t{\n\t\t// data\u304c\u7a7a\u306e\u5834\u5408\u306f\u66f8\u304d\u8fbc\u307e\u306a\u3044\n\t\tif (empty($data)) {\n\t\t\treturn;\n\t\t}\n\n\t\t$this->_redis->save($sessionId, $data, $this->_lifetime);\n\t}\n}\n```\n\n\u5fdc\u6025\u51e6\u7f6e\u306a\u611f\u304c\u5f37\u3044\u3067\u3059\u304c\u3001\u4e00\u5148\u305a\u3053\u308c\u3067\n\n## \u74b0\u5883\n* PHP 5.6.18\n* Phalcon 2.0.10\n", "tags": ["Phalcon", "PHP"]}