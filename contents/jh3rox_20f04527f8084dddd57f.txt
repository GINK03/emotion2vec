{"context": "ubuntu+CUDA8.0\u3067\u6a5f\u68b0\u5b66\u7fd2\u3059\u308b\u969b\u306e\u8a2d\u5b9a\u30e1\u30e2\u3002anaconda(numpy/matplotlib), scikit-learn, chainer\u3092\u5165\u308c\u307e\u3059\u3002\n\nPC\u4ed5\u69d8\n\nPC: GTune NEXTGEAR i650PA7-SP3\nMB: Z170-S01 MSI\nCPU: Intel Core i7-6700K CPU 4.0GHz x 8\nGPU: Geforce GTX1080\nMemory: 32GB\nSSD: 256GB\nHDD: 2TB\nOS: Ubuntu 16.04 64bit + Windows 10 Home 64bit\n\n\nubuntu\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\n\n\nubuntu16.04 LTS\u3092DL\u3057\u3066iso\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\nUEFI (BIOS)\u306b\u5165\u308b\n\n\nUEFI menu\u3067secure boot\u3092\u3053\u3068\u3054\u3068\u304f\u7121\u52b9\u5316\u3059\u308b\nDVD\u304b\u3089ubuntu\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\n\u30d6\u30fc\u30c8\u9078\u629e\u753b\u9762\u3067install ubuntu\u306e\u30e9\u30a4\u30f3\u3067\u300ce\u300d\u3092\u62bc\u3057\u3066\u4ee5\u4e0b\u3092\u5909\u66f4\u3001\u305d\u306e\u5f8cF10\u3067\u8d77\u52d5\n\n\n\u5909\u66f4\u524d: quiet splash\n\u5909\u66f4\u5f8c\uff1anomodeset\n\n\ninstall\n\n\nboot: 128 MB(\u5c11\u306a\u3044\u304b\u3082), ext4\nswap: \u30e1\u30e2\u30ea\u91cf\u306e1\u301c2\u500d(e.g. 64000 MB), swap\n/: \u6b8b\u308a\u5168\u3066, ext4\n\u30d6\u30fc\u30c8\u30ed\u30fc\u30c0\u30fc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bHDD: boot\u3092\u5165\u308c\u305fdev/sdc\n\n\n\n\nubuntu\u57fa\u672c\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\n\u74b0\u5883\u3092\u6700\u65b0\u306b\u3059\u308b\n\n\nterminal\nsudo apt-get update\nsudo apt-get -y upgrade\nsudo apt-get -y dist-upgrade\nsudo apt-get install git\nsudo apt-get install python-pip\n\n\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u82f1\u8a9e\u8868\u8a18\u306b\u3059\u308b\n\n\nterminal\nLANG=C xdg-user-dirs-gtk-update\n\n\n\nvim\u3067\u77e2\u5370\u30ad\u30fc\u3092\u62bc\u3059\u3068ABD\u306a\u3069\u304c\u51fa\u308b\u554f\u984c\u3092\u89e3\u6d88\n\n\nterminal\ntouch ~/.vimrc\nvi ~/.vimrc\nset nocompatible\u3000#vimrc\u306b\u8ffd\u8a18\n\n\n\n\u5185\u8535HDD\u3092\u81ea\u52d5\u30de\u30a6\u30f3\u30c8\n\n\nterminal\nsudo fdisk -l  # /dev/sda2\u304c\u5f53\u8a72HDD\nsudo blkid /dev/sda2  # UUID\u78ba\u8a8d\n\n# fstab\u306bUUID\u3092\u8ffd\u8a18\nsudo vi /etc/fstab\nUUID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx       /media/USER/HDD2TB        ext4    defaults        0       0  #fstab\n\n\n\nUSB Wifi\u30c9\u30e9\u30a4\u30d0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(\u81ea\u5206\u304c\u4f7f\u3063\u3066\u3044\u308b\u306e\u306fWI-U3-866D)\nmac\u304b\u3089SSH\u63a5\u7d9a\u3057\u305f\u3044\u306e\u3067\u3001ubuntu\u306bopenssh\u3092\u5165\u308c\u308b\u3002\n\n\nterminal\nsudo apt-get install openssh-server\n\n\n\nOSX_terminal\nrm ~/.ssh/known_hosts # Host key verification failed.\u30a8\u30e9\u30fc\u306e\u56de\u907f\nssh IP_ADDRESS # \u3053\u308c\u3067\u3064\u306a\u304c\u308b\u306f\u305a\n\n\n\ndropbox\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\u3053\u3053\u304b\u3089ubuntu\u306edeb\u30d5\u30a1\u30a4\u30eb\u3092DL\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\u306a\u304aSSD\u306e\u5bb9\u91cf\u304c\u8db3\u308a\u306a\u304b\u3063\u305f\u306e\u3067\u5225\u306e\u5185\u8535HDD\u306b\u540c\u671f\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\n\nterminal\nsudo dpkg -i dropbox_2015.10.28_amd64.deb\ndropbox start -i\n\n\n\nCUDA\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u6700\u521d\u306b\u3084\u308b\u3053\u3068\n\n\nterminal\nsudo add-apt-repository ppa:graphics-drivers/ppa\nsudo apt-get update\nsudo apt-get install nvidia-367\nsudo apt-get install mesa-common-dev\nsudo apt-get install freeglut3-dev\n\n\n\n\nCUDA 8.0 \u3092DL(deb)\u3057\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\nterminal\nsudo dpkg -i \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u540d.deb\nsudo apt-get update\nsudo apt-get install cuda\n\n\n\n\ncuDNN 5.1 \u3092DL\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002DL\u3059\u308b\u524d\u306b\u767b\u9332\u304c\u5fc5\u8981\u3002\n\n\nterminal\ntar -zxf cudnn-8.0-linux-x64-v5.1.tgz\nsudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64/\nsudo cp cuda/include/cudnn.h /usr/local/cuda/include/\nsudo chmod a+r /usr/local/cuda/include/cudnn.h /usr/local/cuda/lib64/libcudnn*\n\n\n\n.bashrc\u306b\u3066CUDA\u3068cuDNN\u3078\u306e\u30d1\u30b9\u3092\u901a\u3059\n\n\n.bashrc\n# CUDA Toolkit\nexport CUDA_ROOT=/usr/local/cuda\nexport PATH=/usr/local/cuda/bin:${PATH:+:${PATH}}\nexport LD_LIBRARY_PATH=/usr/local/cuda/lib64:${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}\nexport CPATH=/usr/local/cuda/include:$CPATH\n\n# cuDNN\nexport LIBRARY_PATH=/usr/local/cuda/lib64:$LIBRARY_PATH\n\n\n\nbashrc\u53cd\u6620\n\n\nterminal\nsource .bashrc\n\n\n\nGPU\u306e\u52d5\u4f5c\u78ba\u8a8d\u3002\u3061\u3083\u3093\u3068Samples\u306emake\u304c\u901a\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u3002make\u306e\u969b\u306bcuda_runtime.h\u304c\u306a\u3044\u3068\u304b\u8a00\u308f\u308c\u305f\u3089 sudo -E \u3067make\u3059\u308b\u3068\u3046\u307e\u304f\u3044\u304f\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n\nterminal\nnvidia-smi # GTX-1080\u3068\u8868\u793a\u3055\u308c\u308b\u306f\u305a\nnvcc -V # \u30a8\u30e9\u30fc\u306a\u3057\u3092\u78ba\u8a8d\n./NVIDIA_CUDA-8.0_Samples/1_Utilities/deviceQuery/deviceQuery # Result=PASS\u3068\u306a\u308b\u3053\u3068\u3092\u78ba\u8a8d\ncd NVIDIA_CUDA-8.0_Samples/5_Simulations/nbody\nmake\n./nbody -benchmark -numbodies=256000 -device=0\n\n\n\n\u305d\u306e\u4ed6\u958b\u767a\u74b0\u5883\n\npyenv\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\nterminal\ngit clone https://github.com/yyuu/pyenv.git ~/.pyenv\necho 'export PYENV_ROOT=\"$HOME/.pyenv\"' >> ~/.bashrc\necho 'export PATH=\"$PYENV_ROOT/bin:$PATH\"' >> ~/.bashrc\necho 'eval \"$(pyenv init -)\"' >> ~/.bashrc\nsource ~/.bashrc\n\n\n\nanaconda\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\nterminal\npyenv install -l | grep ana  # \u6700\u65b0\u7248\u3092\u78ba\u8a8d\u3002anaconda2-4.1.1\npyenv install anaconda2-4.1.1\npyenv rehash\npyenv global anaconda2-4.1.1\necho 'export PATH=\"$PYENV_ROOT/versions/anaconda2-4.1.1bin/:$PATH\"' >> ~/.bashrc\nsource ~/.bashrc\n\n\n\nscikit-learn\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\nterminal\nsudo apt-get install python-sklearn\n\n\n\nffmpeg\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\nterminal\nsudo add-apt-repository ppa:jonathonf/ffmpeg-3\nsudo apt update && sudo apt install ffmpeg libav-tools x264 x265\nffmpeg -version #  ffmpeg 3.1.4.1\n\n\n\nchainer\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\nterminal\npip install chainer\n\n# MNIST\u3067\u52d5\u4f5c\u78ba\u8a8d\nwget https://github.com/pfnet/chainer/archive/v1.16.0.tar.gz\ntar xzf v1.16.0.tar.gz\npython chainer-1.16.0/examples/mnist/train_mnist.py #CPU\u30e2\u30fc\u30c9OK\npython chainer-1.16.0/examples/mnist/train_mnist.py -g=0 #GPU\u30e2\u30fc\u30c9OK\n\n\n\n\u5f8c\u65e5\u3084\u308b\u3053\u3068\n\nCaffe+OpenCV\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\n\u53c2\u8003\n\nGTX-1080 \u306a\u3069 GeForce \u3092 Ubuntu 16.04 LTS \u3067 CUDA-8.0RC \u3068\u5171\u306b\u4f7f\u3046\nUbuntu16.04\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089GTX1080/CUDA8.0RC\u3067caffe\u3092\u30d3\u30eb\u30c9\n\n\nubuntu+CUDA8.0\u3067\u6a5f\u68b0\u5b66\u7fd2\u3059\u308b\u969b\u306e\u8a2d\u5b9a\u30e1\u30e2\u3002anaconda(numpy/matplotlib), scikit-learn, chainer\u3092\u5165\u308c\u307e\u3059\u3002\n\n## PC\u4ed5\u69d8\n- PC: GTune NEXTGEAR i650PA7-SP3\n- MB: Z170-S01 MSI\n- CPU: Intel Core i7-6700K CPU 4.0GHz x 8\n- GPU: Geforce GTX1080\n- Memory: 32GB\n- SSD: 256GB\n- HDD: 2TB\n- OS: Ubuntu 16.04 64bit + Windows 10 Home 64bit\n\n## ubuntu\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\n- [ubuntu16.04 LTS](https://www.ubuntulinux.jp/News/ubuntu1604-ja-remix)\u3092DL\u3057\u3066iso\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n- UEFI (BIOS)\u306b\u5165\u308b\n  - UEFI menu\u3067secure boot\u3092\u3053\u3068\u3054\u3068\u304f\u7121\u52b9\u5316\u3059\u308b\n  - DVD\u304b\u3089ubuntu\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n- \u30d6\u30fc\u30c8\u9078\u629e\u753b\u9762\u3067install ubuntu\u306e\u30e9\u30a4\u30f3\u3067\u300ce\u300d\u3092\u62bc\u3057\u3066\u4ee5\u4e0b\u3092\u5909\u66f4\u3001\u305d\u306e\u5f8cF10\u3067\u8d77\u52d5\n  - \u5909\u66f4\u524d: quiet splash\n  - \u5909\u66f4\u5f8c\uff1anomodeset\n- install\n  - boot: 128 MB(\u5c11\u306a\u3044\u304b\u3082), ext4\n  - swap: \u30e1\u30e2\u30ea\u91cf\u306e1\u301c2\u500d(e.g. 64000 MB), swap\n  - /: \u6b8b\u308a\u5168\u3066, ext4\n  - \u30d6\u30fc\u30c8\u30ed\u30fc\u30c0\u30fc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bHDD: boot\u3092\u5165\u308c\u305fdev/sdc\n\n\n## ubuntu\u57fa\u672c\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n- \u74b0\u5883\u3092\u6700\u65b0\u306b\u3059\u308b\n\n```shell-session:terminal\nsudo apt-get update\nsudo apt-get -y upgrade\nsudo apt-get -y dist-upgrade\nsudo apt-get install git\nsudo apt-get install python-pip\n```\n\n- \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u82f1\u8a9e\u8868\u8a18\u306b\u3059\u308b\n\n```shell-session:terminal\nLANG=C xdg-user-dirs-gtk-update\n```\n\n- vim\u3067\u77e2\u5370\u30ad\u30fc\u3092\u62bc\u3059\u3068ABD\u306a\u3069\u304c\u51fa\u308b\u554f\u984c\u3092\u89e3\u6d88\n\n```shell-session:terminal\ntouch ~/.vimrc\nvi ~/.vimrc\nset nocompatible\u3000#vimrc\u306b\u8ffd\u8a18\n```\n\n- \u5185\u8535HDD\u3092\u81ea\u52d5\u30de\u30a6\u30f3\u30c8\n\n```shell-session:terminal\nsudo fdisk -l  # /dev/sda2\u304c\u5f53\u8a72HDD\nsudo blkid /dev/sda2  # UUID\u78ba\u8a8d\n\n# fstab\u306bUUID\u3092\u8ffd\u8a18\nsudo vi /etc/fstab\nUUID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx       /media/USER/HDD2TB        ext4    defaults        0       0  #fstab\n```\n\n- USB Wifi\u30c9\u30e9\u30a4\u30d0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(\u81ea\u5206\u304c\u4f7f\u3063\u3066\u3044\u308b\u306e\u306f[WI-U3-866D](http://k9q.hateblo.jp/entry/2016/07/23/220519))\n\n- mac\u304b\u3089SSH\u63a5\u7d9a\u3057\u305f\u3044\u306e\u3067\u3001ubuntu\u306bopenssh\u3092\u5165\u308c\u308b\u3002\n\n```shell-session:terminal\nsudo apt-get install openssh-server\n```\n\n```shell-session:OSX_terminal\nrm ~/.ssh/known_hosts # Host key verification failed.\u30a8\u30e9\u30fc\u306e\u56de\u907f\nssh IP_ADDRESS # \u3053\u308c\u3067\u3064\u306a\u304c\u308b\u306f\u305a\n```\n\n- dropbox\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002[\u3053\u3053](https://www.dropbox.com/install-linux)\u304b\u3089ubuntu\u306edeb\u30d5\u30a1\u30a4\u30eb\u3092DL\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\u306a\u304aSSD\u306e\u5bb9\u91cf\u304c\u8db3\u308a\u306a\u304b\u3063\u305f\u306e\u3067\u5225\u306e\u5185\u8535HDD\u306b\u540c\u671f\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\n```shell-session:terminal\nsudo dpkg -i dropbox_2015.10.28_amd64.deb\ndropbox start -i\n```\n\n\n## CUDA\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n- \u6700\u521d\u306b\u3084\u308b\u3053\u3068\n\n```shell-session:terminal\nsudo add-apt-repository ppa:graphics-drivers/ppa\nsudo apt-get update\nsudo apt-get install nvidia-367\nsudo apt-get install mesa-common-dev\nsudo apt-get install freeglut3-dev\n```\n\n- [CUDA 8.0](https://developer.nvidia.com/cuda-downloads) \u3092DL(deb)\u3057\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```shell-session:terminal\nsudo dpkg -i \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u540d.deb\nsudo apt-get update\nsudo apt-get install cuda\n```\n\n- [cuDNN 5.1](https://developer.nvidia.com/cudnn) \u3092DL\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002DL\u3059\u308b\u524d\u306b\u767b\u9332\u304c\u5fc5\u8981\u3002\n\n```shell-session:terminal\ntar -zxf cudnn-8.0-linux-x64-v5.1.tgz\nsudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64/\nsudo cp cuda/include/cudnn.h /usr/local/cuda/include/\nsudo chmod a+r /usr/local/cuda/include/cudnn.h /usr/local/cuda/lib64/libcudnn*\n```\n\n- .bashrc\u306b\u3066CUDA\u3068cuDNN\u3078\u306e\u30d1\u30b9\u3092\u901a\u3059\n\n```shell-session:.bashrc\n# CUDA Toolkit\nexport CUDA_ROOT=/usr/local/cuda\nexport PATH=/usr/local/cuda/bin:${PATH:+:${PATH}}\nexport LD_LIBRARY_PATH=/usr/local/cuda/lib64:${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}\nexport CPATH=/usr/local/cuda/include:$CPATH\n\n# cuDNN\nexport LIBRARY_PATH=/usr/local/cuda/lib64:$LIBRARY_PATH\n```\n\n- bashrc\u53cd\u6620\n\n```shell-session:terminal\nsource .bashrc\n```\n\n- GPU\u306e\u52d5\u4f5c\u78ba\u8a8d\u3002\u3061\u3083\u3093\u3068Samples\u306emake\u304c\u901a\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u3002make\u306e\u969b\u306bcuda_runtime.h\u304c\u306a\u3044\u3068\u304b\u8a00\u308f\u308c\u305f\u3089 sudo -E \u3067make\u3059\u308b\u3068\u3046\u307e\u304f\u3044\u304f\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n```shell-session:terminal\nnvidia-smi # GTX-1080\u3068\u8868\u793a\u3055\u308c\u308b\u306f\u305a\nnvcc -V # \u30a8\u30e9\u30fc\u306a\u3057\u3092\u78ba\u8a8d\n./NVIDIA_CUDA-8.0_Samples/1_Utilities/deviceQuery/deviceQuery # Result=PASS\u3068\u306a\u308b\u3053\u3068\u3092\u78ba\u8a8d\ncd NVIDIA_CUDA-8.0_Samples/5_Simulations/nbody\nmake\n./nbody -benchmark -numbodies=256000 -device=0\n```\n\n## \u305d\u306e\u4ed6\u958b\u767a\u74b0\u5883\n\n- pyenv\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```shell-session:terminal\ngit clone https://github.com/yyuu/pyenv.git ~/.pyenv\necho 'export PYENV_ROOT=\"$HOME/.pyenv\"' >> ~/.bashrc\necho 'export PATH=\"$PYENV_ROOT/bin:$PATH\"' >> ~/.bashrc\necho 'eval \"$(pyenv init -)\"' >> ~/.bashrc\nsource ~/.bashrc\n```\n\n- anaconda\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```shell-session:terminal\npyenv install -l | grep ana  # \u6700\u65b0\u7248\u3092\u78ba\u8a8d\u3002anaconda2-4.1.1\npyenv install anaconda2-4.1.1\npyenv rehash\npyenv global anaconda2-4.1.1\necho 'export PATH=\"$PYENV_ROOT/versions/anaconda2-4.1.1bin/:$PATH\"' >> ~/.bashrc\nsource ~/.bashrc\n```\n\n- scikit-learn\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```shell-session:terminal\nsudo apt-get install python-sklearn\n```\n\n- ffmpeg\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```shell-session:terminal\nsudo add-apt-repository ppa:jonathonf/ffmpeg-3\nsudo apt update && sudo apt install ffmpeg libav-tools x264 x265\nffmpeg -version #  ffmpeg 3.1.4.1\n```\n\n- chainer\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```shell-session:terminal\npip install chainer\n\n# MNIST\u3067\u52d5\u4f5c\u78ba\u8a8d\nwget https://github.com/pfnet/chainer/archive/v1.16.0.tar.gz\ntar xzf v1.16.0.tar.gz\npython chainer-1.16.0/examples/mnist/train_mnist.py #CPU\u30e2\u30fc\u30c9OK\npython chainer-1.16.0/examples/mnist/train_mnist.py -g=0 #GPU\u30e2\u30fc\u30c9OK\n```\n\n\n## \u5f8c\u65e5\u3084\u308b\u3053\u3068\n- Caffe+OpenCV\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\n## \u53c2\u8003\n- [GTX-1080 \u306a\u3069 GeForce \u3092 Ubuntu 16.04 LTS \u3067 CUDA-8.0RC \u3068\u5171\u306b\u4f7f\u3046](http://qiita.com/hidenorly/items/a3eb3a0375e6703d163b)\n- [Ubuntu16.04\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089GTX1080/CUDA8.0RC\u3067caffe\u3092\u30d3\u30eb\u30c9](http://mokotixfemilar.hatenablog.com/entry/2016/07/13/025433)\n", "tags": ["Ubuntu", "gtx1080", "\u6a5f\u68b0\u5b66\u7fd2", "CUDA"]}