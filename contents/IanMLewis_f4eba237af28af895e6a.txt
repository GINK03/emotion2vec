{"context": " More than 1 year has passed since last update.Mostly did the stuff here:\nhttps://help.ubuntu.com/community/MacBookPro11-1/Saucy\n\nInstall\nI created an Ubuntu USB thumb drive for install. I had a previous MacBook Pro with Ubuntu on it so I just used the startup disk creator as described here: http://www.ubuntu.com/download/desktop/create-a-usb-stick-on-ubuntu\nI resized the Mac OSX partition on the MacOSX side using Disk Utility. I left only 20GB for Mac OSX and created ~200GB of free space.\nI selected the option to encrypt my home directory. EncryptedHome is described here: https://help.ubuntu.com/community/EncryptedHome\n\nBoot Management\nFor boot management I installed rEFIind on the Mac OS side. It worked out of the box and I haven't modified any settings.\n\nWireless\nAs written in the Ubuntu community help, the wireless would stop working after suspend/resume.\nI needed to fix the wireless so I added the following script to /etc/pm/sleep.d/99_wireless_fix\nI put this script in /etc/pm/sleep.d/99_wireless_fix\n#!/bin/sh\n\n# Fix wireless after suspend/resume\n# See: https://help.ubuntu.com/community/MacBookPro11-1/Saucy#wireless\ncase \"$1\" in\n    resume|thaw)\n        service network-manager stop\n        rm /var/lib/NetworkManager/NetworkManager.state\n        service network-manager start\n    ;;\nesac\n\n\nSpeakers\nThe speakers didn't work after suspend/resume.\nI put this script in /etc/pm/sleep.d/99_speakers_fix\n#!/bin/sh\n# Fix speakers after suspend/resume\n# See: https://help.ubuntu.com/community/MacBookPro11-1/Saucy#Speakers\ncase \"$1\" in\n    resume|thaw)\n        hda-verb /dev/snd/hwC1D0 0x1 set_gpio_mask 1\n        sleep 1\n        hda-verb /dev/snd/hwC1D0 0x1 set_gpio_direction 1\n        sleep 1\n        hda-verb /dev/snd/hwC1D0 0x1 set_gpio_data 1\n        ;;\nesac\n\n\nSATA\nI got error messages when shutting down that looked like this:\n[  882.793794] ata1: exception Emask 0x10 SAct 0x0 SErr 0x10000 action 0xe frozen\n[  882.793798] ata1: irq_stat 0x00400000, PHY RDY changed\n[  882.793799] ata1: SError: { PHYRdyChg }\n[  882.793803] ata1: hard resetting link\n\nI didn't have any real problems but this kind of thing could possible corrupt data so I wanted to fix it.\nSATA controllers can be set in different modes for high performance (when connected to a power supply) and for low power (when running on a battery). I found that there is a bug in the SATA controller when the SATA drive is set for maximum performance.\nhttps://bugzilla.kernel.org/show_bug.cgi?id=62351\nThe workaround was to create a power management script to keep the SATA drive in low power.\nI put this script in /etc/pm/power.d/sata_alpm\nThis is a copy of the script found at /usr/lib/pm-utils/power.d/sata_alpm. That script changes the\npower mode when the power adapter is connected/disconnected but I modified it so that the\ndrive always runs in low power mode.\n#!/bin/sh\n\n. \"${PM_FUNCTIONS}\"\n\nSATA_ALPM_ENABLE=${SATA_ALPM_ENABLE:-false}\n\nhelp() {\ncat <<EOF\n$0: SATA link power management\n\nThis hook tries to save power by allowing SATA controllers to\nreduce power usage when the SATA subsystem is otherwise idle.\n\nThis adds a little bit of latency to drive accesses in\nexchange for moderate power savings if you are not using the drive.\n\nThis hook has 1 parameter:\nSATA_ALPM_ENABLE = whether to use SATA ALPM on battery.\nDefaults to \"false\".\n\nEOF\n}\n\nset_sata_alpm() {\n    # see kernel commit 6013efd8860bf15c1f86f365332642cfe557152f\n    kv=\"$(uname -r)\"\n    [ \"$kv\" ] || exit $NA  #for paranoia's sake\n    [ \"${kv%-*}\" \\< \"2.6.33\" ] && exit $NA  # avoid fs corruption\n    for f in /sys/class/scsi_host/host*; do\n    [ -w \"$f/link_power_management_policy\" ] || continue\n    printf \"Setting SATA ALPM on %s to %s...\" \"${f##*/}\" \"$1\"\n    echo \"$1\" > \"$f/link_power_management_policy\" && echo Done. || \\\n        echo Failed.\n    done\n}\n\ncase $1 in\n    true) [ \"$SATA_ALPM_ENABLE\" = true ] && set_sata_alpm min_power;;\n    # Commented out to fix SATA issues.\n    # See: https://bugzilla.kernel.org/show_bug.cgi?id=62351\n    #false) set_sata_alpm max_performance;;\n    false) set_sata_alpm min_power;;\n    help) help;;\n    *) exit $NA;;\nesac\n\nexit 0\n\n\nKeyboard\nI heavily modify the keyboard so I didn't do anything related to keyboard layout.\nMy keyboard layout is described here (Japanese): http://www.ianlewis.org/jp/japanese-106-key-dvorak-keyboard-layout\n\nICC Profile\nI installed the Mac OS ICC profile as described in the Ubuntu community document:\nhttps://help.ubuntu.com/community/MacBookPro11-1/Saucy#Retina_display_ICC_profile\n\nSmall Pixels\n\nWindow Borders\nI increased the border size of windows and increased the text size as explained here:\nhttps://help.ubuntu.com/community/MacBookPro11-1/Saucy#Issues_due_to_tiny_pixels_on_the_retina_display\nI edited /usr/share/themes/Ambiance/metacity-1/metacity-theme-1.xml and changed the following settings under \n<distance name=\"left_width\" value=\"4\"/>\n<distance name=\"right_width\" value=\"4\"/>\n<distance name=\"bottom_height\" value=\"4\"/>\n\n\nGnome\nI increased size of text in gnome but I prefer to keep the text a bit smaller than the size in the original article, so I set the text scaling factor to 1.2 rather than 1.8:\n gsettings set org.gnome.desktop.interface text-scaling-factor 1.2\n\n\nChrome\nI increased the default zoom in Chrome to 120% under the settings.\n\nUnity\nThe Unity sidebar buttons are pretty small so you can change it by increasing the System Settings => Display => Launcher Icon Size.\nMostly did the stuff here:\n\nhttps://help.ubuntu.com/community/MacBookPro11-1/Saucy\n\nInstall\n===========\n\nI created an Ubuntu USB thumb drive for install. I had a previous MacBook Pro with Ubuntu on it so I just used the startup disk creator as described here: http://www.ubuntu.com/download/desktop/create-a-usb-stick-on-ubuntu\n\nI resized the Mac OSX partition on the MacOSX side using Disk Utility. I left only 20GB for Mac OSX and created ~200GB of free space.\n\nI selected the option to encrypt my home directory. EncryptedHome is described here: https://help.ubuntu.com/community/EncryptedHome\n\nBoot Management\n==================\n\nFor boot management I installed [rEFIind](http://www.rodsbooks.com/refind/) on the Mac OS side. It worked out of the box and I haven't modified any settings.\n\nWireless\n============\n\nAs written in the Ubuntu community help, the wireless would stop working after suspend/resume.\nI needed to fix the wireless so I added the following script to /etc/pm/sleep.d/99_wireless_fix\n\nI put this script in /etc/pm/sleep.d/99_wireless_fix\n\n```bash\n#!/bin/sh\n\n# Fix wireless after suspend/resume\n# See: https://help.ubuntu.com/community/MacBookPro11-1/Saucy#wireless\ncase \"$1\" in\n    resume|thaw)\n        service network-manager stop\n        rm /var/lib/NetworkManager/NetworkManager.state\n        service network-manager start\n    ;;\nesac\n```\n\nSpeakers\n=============\n\nThe speakers didn't work after suspend/resume.\n\nI put this script in /etc/pm/sleep.d/99_speakers_fix\n\n```bash\n#!/bin/sh\n# Fix speakers after suspend/resume\n# See: https://help.ubuntu.com/community/MacBookPro11-1/Saucy#Speakers\ncase \"$1\" in\n    resume|thaw)\n        hda-verb /dev/snd/hwC1D0 0x1 set_gpio_mask 1\n        sleep 1\n        hda-verb /dev/snd/hwC1D0 0x1 set_gpio_direction 1\n        sleep 1\n        hda-verb /dev/snd/hwC1D0 0x1 set_gpio_data 1\n        ;;\nesac\n```\n\nSATA\n==========\n\nI got error messages when shutting down that looked like this:\n\n    [  882.793794] ata1: exception Emask 0x10 SAct 0x0 SErr 0x10000 action 0xe frozen\n    [  882.793798] ata1: irq_stat 0x00400000, PHY RDY changed\n    [  882.793799] ata1: SError: { PHYRdyChg }\n    [  882.793803] ata1: hard resetting link\n\nI didn't have any real problems but this kind of thing could possible corrupt data so I wanted to fix it.\n\nSATA controllers can be set in different modes for high performance (when connected to a power supply) and for low power (when running on a battery). I found that there is a bug in the SATA controller when the SATA drive is set for maximum performance.\n\nhttps://bugzilla.kernel.org/show_bug.cgi?id=62351\n\nThe workaround was to create a power management script to keep the SATA drive in low power.\n\nI put this script in /etc/pm/power.d/sata_alpm\n\nThis is a copy of the script found at /usr/lib/pm-utils/power.d/sata_alpm. That script changes the\npower mode when the power adapter is connected/disconnected but I modified it so that the\ndrive always runs in low power mode.\n\n```bash\n#!/bin/sh\n\n. \"${PM_FUNCTIONS}\"\n\nSATA_ALPM_ENABLE=${SATA_ALPM_ENABLE:-false}\n\nhelp() {\ncat <<EOF\n$0: SATA link power management\n\nThis hook tries to save power by allowing SATA controllers to\nreduce power usage when the SATA subsystem is otherwise idle.\n\nThis adds a little bit of latency to drive accesses in\nexchange for moderate power savings if you are not using the drive.\n\nThis hook has 1 parameter:\nSATA_ALPM_ENABLE = whether to use SATA ALPM on battery.\nDefaults to \"false\".\n\nEOF\n}\n\nset_sata_alpm() {\n    # see kernel commit 6013efd8860bf15c1f86f365332642cfe557152f\n    kv=\"$(uname -r)\"\n    [ \"$kv\" ] || exit $NA  #for paranoia's sake\n    [ \"${kv%-*}\" \\< \"2.6.33\" ] && exit $NA  # avoid fs corruption\n    for f in /sys/class/scsi_host/host*; do\n\t[ -w \"$f/link_power_management_policy\" ] || continue\n\tprintf \"Setting SATA ALPM on %s to %s...\" \"${f##*/}\" \"$1\"\n\techo \"$1\" > \"$f/link_power_management_policy\" && echo Done. || \\\n\t    echo Failed.\n    done\n}\n\ncase $1 in\n    true) [ \"$SATA_ALPM_ENABLE\" = true ] && set_sata_alpm min_power;;\n    # Commented out to fix SATA issues.\n    # See: https://bugzilla.kernel.org/show_bug.cgi?id=62351\n    #false) set_sata_alpm max_performance;;\n    false) set_sata_alpm min_power;;\n    help) help;;\n    *) exit $NA;;\nesac\n\nexit 0\n```\n\nKeyboard\n=============\n\nI heavily modify the keyboard so I didn't do anything related to keyboard layout.\n\nMy keyboard layout is described here (Japanese): http://www.ianlewis.org/jp/japanese-106-key-dvorak-keyboard-layout\n\nICC Profile\n=============\n\nI installed the Mac OS ICC profile as described in the Ubuntu community document:\nhttps://help.ubuntu.com/community/MacBookPro11-1/Saucy#Retina_display_ICC_profile\n\nSmall Pixels\n=============\n\nWindow Borders\n-------------------\n\nI increased the border size of windows and increased the text size as explained here:\n\nhttps://help.ubuntu.com/community/MacBookPro11-1/Saucy#Issues_due_to_tiny_pixels_on_the_retina_display\n\nI edited /usr/share/themes/Ambiance/metacity-1/metacity-theme-1.xml and changed the following settings under <frame_geometry name=\"frame_geometry_normal\" ...>\n\n```xml\n<distance name=\"left_width\" value=\"4\"/>\n<distance name=\"right_width\" value=\"4\"/>\n<distance name=\"bottom_height\" value=\"4\"/>\n```\n\nGnome\n--------------\n\nI increased size of text in gnome but I prefer to keep the text a bit smaller than the size in the original article, so I set the text scaling factor to 1.2 rather than 1.8:\n\n     gsettings set org.gnome.desktop.interface text-scaling-factor 1.2\n\nChrome\n-----------\n\nI increased the default zoom in Chrome to 120% under the settings.\n\nUnity\n--------\n\nThe Unity sidebar buttons are pretty small so you can change it by increasing the System Settings => Display => Launcher Icon Size.\n", "tags": ["Ubuntu13.10", "MacbookPro11-1"]}