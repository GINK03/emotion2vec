{"context": " More than 1 year has passed since last update.Swift\u3067XML\u5f62\u5f0f\u306eAPI\u9001\u53d7\u4fe1\u3092\u3059\u308b\u65b9\u6cd5\u304c\u307b\u3068\u3093\u3069\u66f8\u304b\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\u5916\u90e8API\u306b\u3088\u3063\u3066\u306f\u307b\u3068\u3093\u3069\u304cJSON\u5f62\u5f0f\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001API\u306e\u90fd\u5408\u4e0aXML\u3067\u306e\u53d7\u3051\u6e21\u3057\u3092\u305b\u3056\u308b\u3092\u5f97\u306a\u3044\u5834\u5408\u3082\u3042\u308b\u3068\u601d\u3046\u306e\u3067\u53c2\u8003\u306b\u306a\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u4eca\u56de\u306fGracenote API\u3092\u5229\u7528\u3057\u307e\u3057\u305f\nhttps://developer.gracenote.com/ja/web-api\n\nViewController.swift\nimport UIKit\n\nclass ViewController: UIViewController ,NSXMLParserDelegate{\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n\n        //XML\n        let str = \"<QUERIES><AUTH><CLIENT>XXXXXXX-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</CLIENT><USER>XXXXXXXXXXXXXXXXXX-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</USER></AUTH><QUERY CMD='ALBUM_SEARCH'><MODE>SINGLE_BEST_COVER</MODE><TEXT TYPE='ARTIST'>perfume</TEXT><TEXT TYPE='ALBUM_TITLE'>GAME</TEXT><TEXT TYPE='TRACK_TITLE'>\u30c1\u30e7\u30b3\u30ec\u30a4\u30c8\u30fb\u30c7\u30a3\u30b9\u30b3</TEXT><OPTION><PARAMETER>SELECT_EXTENDED</PARAMETER><VALUE>COVER,REVIEW,ARTIST_BIOGRAPHY,ARTIST_IMAGE,ARTIST_OET,MOOD,TEMPO</VALUE></OPTION><OPTION><PARAMETER>SELECT_DETAIL</PARAMETER><VALUE>GENRE:3LEVEL,MOOD:2LEVEL,TEMPO:3LEVEL,ARTIST_ORIGIN:4LEVEL,ARTIST_ERA:2LEVEL,ARTIST_TYPE:2LEVEL</VALUE></OPTION></QUERY></QUERIES>\"\n\n        //UTF-8\u306b\u30a8\u30f3\u30b3\u30fc\u30c9\n        let xmlData = str.dataUsingEncoding(NSUTF8StringEncoding)\n\n        //URL\u306e\u6307\u5b9a\n        var url: NSURL! = NSURL(string: \"https://c5824512.web.cddbp.net/webapi/xml/1.0/\")\n        var request = NSMutableURLRequest(URL: url)\n\n        //XML\u30d8\u30c3\u30c0\u30fc\u306e\u6307\u5b9a\n        request.setValue(\"application/xml\", forHTTPHeaderField: \"Content-type\")\n\n        //POST\u3092\u6307\u5b9a\n        request.HTTPMethod = \"POST\"\n\n        //Data\u3092\u30bb\u30c3\u30c8\n        request.HTTPBody = xmlData\n\n        //request\u3092\u9001\u4fe1\n        NSURLConnection.sendAsynchronousRequest(request,queue: NSOperationQueue.mainQueue(),completionHandler: response)\n\n    }\n\n    //\u8fd4\u3063\u3066\u304d\u305fAPI\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\n    func response(res: NSURLResponse!, data: NSData!, error: NSError!){\n\n        //XML\u306b\u5909\u63db\n        var parser : NSXMLParser? = NSXMLParser(data: data)\n        if parser != nil {\n            parser!.delegate = self\n            parser!.parse()\n        } else {\n            // \u30d1\u30fc\u30b9\u306b\u5931\u6557\u3057\u305f\u6642\n            println(\"failed to parse XML\")\n        }\n\n    }\n\n    //\u53d6\u5f97\u3057\u305fXML\u3092\u30a8\u30ec\u30e1\u30f3\u30c8\u6bce\u306b\u53d6\u5f97\n    func parser(parser: NSXMLParser,didStartElement elementName: String,namespaceURI: String?,qualifiedName: String?,attributes attributeDict: [NSObject : AnyObject])\n    {\n        println(elementName)\n    }\n\n    override func didReceiveMemoryWarning() {\n        super.didReceiveMemoryWarning()\n        // Dispose of any resources that can be recreated.\n    }\n}\n\n\n\nXML\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\u65b9\u6cd5\u3082\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001XML\u3082\u66f8\u304d\u63db\u3048\u305f\u308a\u3059\u308b\u3068\u601d\u3046\u306e\u3067\u76f4\u63a5\u66f8\u304d\u307e\u3057\u305f\u3002\n\u307e\u3060\u307e\u3060\u52c9\u5f37\u4e0d\u8db3\u306a\u306e\u3067\u3082\u3063\u3068\u7c21\u6f54\u306b\u6e08\u3080\u65b9\u6cd5\u304c\u3042\u308b\u3093\u3067\u3059\u304b\u306d...\n\u203b\u6ce8\u610f\nXXXXXXX\u306e\u6240\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3060\u3063\u305f\u308a\u3001APIKey\u3060\u3063\u305f\u308a\u3059\u308b\u306e\u3067\u3001\u305d\u306e\u307e\u307e\u30b3\u30d4\u30da\u3060\u3068\u52d5\u304d\u307e\u305b\u3093\u3002\nSwift\u3067XML\u5f62\u5f0f\u306eAPI\u9001\u53d7\u4fe1\u3092\u3059\u308b\u65b9\u6cd5\u304c\u307b\u3068\u3093\u3069\u66f8\u304b\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\u5916\u90e8API\u306b\u3088\u3063\u3066\u306f\u307b\u3068\u3093\u3069\u304cJSON\u5f62\u5f0f\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001API\u306e\u90fd\u5408\u4e0aXML\u3067\u306e\u53d7\u3051\u6e21\u3057\u3092\u305b\u3056\u308b\u3092\u5f97\u306a\u3044\u5834\u5408\u3082\u3042\u308b\u3068\u601d\u3046\u306e\u3067\u53c2\u8003\u306b\u306a\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3061\u306a\u307f\u306b\u4eca\u56de\u306fGracenote API\u3092\u5229\u7528\u3057\u307e\u3057\u305f\nhttps://developer.gracenote.com/ja/web-api\n\n```ViewController.swift\nimport UIKit\n\nclass ViewController: UIViewController ,NSXMLParserDelegate{\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n\n        //XML\n        let str = \"<QUERIES><AUTH><CLIENT>XXXXXXX-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</CLIENT><USER>XXXXXXXXXXXXXXXXXX-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</USER></AUTH><QUERY CMD='ALBUM_SEARCH'><MODE>SINGLE_BEST_COVER</MODE><TEXT TYPE='ARTIST'>perfume</TEXT><TEXT TYPE='ALBUM_TITLE'>GAME</TEXT><TEXT TYPE='TRACK_TITLE'>\u30c1\u30e7\u30b3\u30ec\u30a4\u30c8\u30fb\u30c7\u30a3\u30b9\u30b3</TEXT><OPTION><PARAMETER>SELECT_EXTENDED</PARAMETER><VALUE>COVER,REVIEW,ARTIST_BIOGRAPHY,ARTIST_IMAGE,ARTIST_OET,MOOD,TEMPO</VALUE></OPTION><OPTION><PARAMETER>SELECT_DETAIL</PARAMETER><VALUE>GENRE:3LEVEL,MOOD:2LEVEL,TEMPO:3LEVEL,ARTIST_ORIGIN:4LEVEL,ARTIST_ERA:2LEVEL,ARTIST_TYPE:2LEVEL</VALUE></OPTION></QUERY></QUERIES>\"\n        \n        //UTF-8\u306b\u30a8\u30f3\u30b3\u30fc\u30c9\n        let xmlData = str.dataUsingEncoding(NSUTF8StringEncoding)\n        \n        //URL\u306e\u6307\u5b9a\n        var url: NSURL! = NSURL(string: \"https://c5824512.web.cddbp.net/webapi/xml/1.0/\")\n        var request = NSMutableURLRequest(URL: url)\n        \n        //XML\u30d8\u30c3\u30c0\u30fc\u306e\u6307\u5b9a\n        request.setValue(\"application/xml\", forHTTPHeaderField: \"Content-type\")\n        \n        //POST\u3092\u6307\u5b9a\n        request.HTTPMethod = \"POST\"\n        \n        //Data\u3092\u30bb\u30c3\u30c8\n        request.HTTPBody = xmlData\n        \n        //request\u3092\u9001\u4fe1\n        NSURLConnection.sendAsynchronousRequest(request,queue: NSOperationQueue.mainQueue(),completionHandler: response)\n\n    }\n    \n    //\u8fd4\u3063\u3066\u304d\u305fAPI\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\n    func response(res: NSURLResponse!, data: NSData!, error: NSError!){\n        \n        //XML\u306b\u5909\u63db\n        var parser : NSXMLParser? = NSXMLParser(data: data)\n        if parser != nil {\n            parser!.delegate = self\n            parser!.parse()\n        } else {\n            // \u30d1\u30fc\u30b9\u306b\u5931\u6557\u3057\u305f\u6642\n            println(\"failed to parse XML\")\n        }\n        \n    }\n    \n    //\u53d6\u5f97\u3057\u305fXML\u3092\u30a8\u30ec\u30e1\u30f3\u30c8\u6bce\u306b\u53d6\u5f97\n    func parser(parser: NSXMLParser,didStartElement elementName: String,namespaceURI: String?,qualifiedName: String?,attributes attributeDict: [NSObject : AnyObject])\n    {\n        println(elementName)\n    }\n \n    override func didReceiveMemoryWarning() {\n        super.didReceiveMemoryWarning()\n        // Dispose of any resources that can be recreated.\n    }\n}\n\n```\n\nXML\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\u65b9\u6cd5\u3082\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001XML\u3082\u66f8\u304d\u63db\u3048\u305f\u308a\u3059\u308b\u3068\u601d\u3046\u306e\u3067\u76f4\u63a5\u66f8\u304d\u307e\u3057\u305f\u3002\n\n\u307e\u3060\u307e\u3060\u52c9\u5f37\u4e0d\u8db3\u306a\u306e\u3067\u3082\u3063\u3068\u7c21\u6f54\u306b\u6e08\u3080\u65b9\u6cd5\u304c\u3042\u308b\u3093\u3067\u3059\u304b\u306d...\n\n\u203b\u6ce8\u610f\nXXXXXXX\u306e\u6240\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8ID\u3060\u3063\u305f\u308a\u3001APIKey\u3060\u3063\u305f\u308a\u3059\u308b\u306e\u3067\u3001\u305d\u306e\u307e\u307e\u30b3\u30d4\u30da\u3060\u3068\u52d5\u304d\u307e\u305b\u3093\u3002\n", "tags": ["Swift", "iOS", "XML"]}