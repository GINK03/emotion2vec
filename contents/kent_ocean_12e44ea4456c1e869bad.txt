{"context": "\u4eca\u56de\u306f Amazon Linux \u306b python3 \u3068 Flask \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u305f\u6642\u306b JSON \u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3059 API \u30b5\u30fc\u30d0\u3092\u4f5c\u308b\u624b\u9806\u3092\u6574\u7406\u3057\u307e\u3057\u305f\u3002\n\n\u524d\u63d0\u6761\u4ef6\n\u4eca\u56de\u306e\u8a18\u4e8b\u306f\u4ee5\u4e0b\u306e\u74b0\u5883\u3067\u624b\u9806\u3092\u691c\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n\n\nVersion\n\n\n\n\nOS\nAmazon Linux AMI 2016.03.3 (ami-374db956)\n\n\n\n\n\u5c0e\u5165\u3059\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n\u4eca\u56de\u306e\u8a18\u4e8b\u3067\u5b9f\u969b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u4ee5\u4e0b\u306e\u901a\u308a\n\n\n\n\nVersion\n\n\n\n\nPython\n3.5.2\n\n\nFlask\n0.11.1\n\n\n\n\nEC2 \u3067 Amazon Linux \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\n\u8aac\u660e\u7701\u7565\u3057\u307e\u3059\u3002\n\nyum \u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\nsudo yum update\n\n\ngcc \u3084 ssl \u7b49\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nPython \u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u306b\u5fc5\u8981\u306a gcc \u3084\u3001pip \u306e\u5b9f\u884c\u306b\u5fc5\u8981\u306a ssl \u306a\u3069\u8af8\u3005\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\n\u203b openssl\u3092\u5165\u308c\u3066\u304a\u304b\u306a\u3044\u3068\u3001\u5f8c\u306e\u30b9\u30c6\u30c3\u30d7\u3067 Python \u3092 make install \u3059\u308b\u3068\u304d\u306b\nIgnoring ensurepip failure: pip 7.1.2 requires SSL/TLS\n\u3068\u3044\u3046\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\u3002\nsudo yum install gcc-c++\nsudo yum install openssl-devel\nsudo yum install sqlite-devel\n\n\nPython3 \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ncd /tmp\nwget https://www.python.org/ftp/python/3.5.2/Python-3.5.2.tgz\ntar zxvf Python-3.5.2.tgz\ncd Python-3.5.2\n./configure --prefix=$HOME/local\nmake\nmake install\n\n\nPython 3.5 \u306b\u5207\u308a\u66ff\u3048\n\u4eca\u56de\u4f7f\u3063\u3066\u3044\u308b Amazon Linux AMI 2016.03.3 \u306b\u306f\u6700\u521d\u304b\u3089 virtualenv \u304c\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\u5165\u3063\u3066\u3044\u306a\u3044\u5834\u5408\u306f pip install virtualenv \u3092\u5b9f\u884c\u3057\u3001virtualenv \u3092\u5165\u308c\u3066\u304f\u3060\u3055\u3044\u3002\nvirtualenv --python $HOME/local/bin/python3.5 ~/py352\nsource $HOME/py352/bin/activate\n\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\npython --version\nPython 3.5.2\n\n\npip \u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\npython 3.5 \u306e pip \u3092\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u307e\u3059\npip install --upgrade pip\n\n\n\u30ed\u30b0\u30a4\u30f3\u6642\u306b Python3.5 \u306b\u5207\u308a\u66ff\u308f\u308b\u3088\u3046\u8a2d\u5b9a\necho 'source $HOME/py352/bin/activate' >> ~/.bash_profile\n\n\nFlask \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\npip install flask\n\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u3092\u4f5c\u6210\nsudo mkdir -p /var/www/flask\n\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u76f4\u4e0b\u306b\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u4f5c\u6210\ncd /var/www/flask\nsudo vim test.py\n\n\ntest.py\nfrom flask import Flask\n\napp = Flask(__name__)\napp.config['SECRET_KEY'] = 'secret!'\n\n@app.route('/')\ndef hello_world():\n    return \"Hello World!\"\n\nif __name__ == '__main__':\n    app.run(port=8000,host='0.0.0.0')\n\n\n(\u203b host='0,0,0,0' \u3068\u6307\u5b9a\u3057\u306a\u3044\u3068\u5916\u90e8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u306e\u3067\u6ce8\u610f)\n\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\npython test.py\n\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\nhttp://(IP Address):8000\n\u300cHello world!\u300d\u3068\u8868\u793a\u3055\u308c\u305f\u3089\u6210\u529f\u3067\u3059\u3002\n\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9 2 \u3092\u4f5c\u6210\n\u4eca\u5ea6\u306f\u3001\nhttp://(IP Address)/calc/x,y\n\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3068\u304d\u306b\nx \u3068 y \u3092\u6f14\u7b97\u3057\u305f\u7d50\u679c\u3092\u8fd4\u3059 API \u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\ntest2.py\nfrom flask import Flask, jsonify\n\napp = Flask(__name__)\napp.config['SECRET_KEY'] = 'secret!'\napp.config['JSON_AS_ASCII'] = False #\u65e5\u672c\u8a9e\u304c\u6587\u5b57\u5316\u3051\u3057\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n\n@app.route('/calc/<num1>,<num2>')\ndef hello_world(num1, num2):\n  add = int(num1) + int(num2)\n  sub = int(num1) - int(num2)\n  mul = int(num1) * int(num2)\n  div = int(num1) / int(num2)\n  result = {\n    \"Result\":{\n      \"\u8db3\u3057\u7b97\": str(add),\n      \"\u5f15\u304d\u7b97\": str(sub),\n      \"\u639b\u3051\u7b97\": str(mul),\n      \"\u5272\u308a\u7b97\": str(div)\n      }\n  }\n  return jsonify(ResultSet=result)\n\nif __name__ == '__main__':\n    app.run(port=8000,host='0.0.0.0')\n\n\n\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\npython test2.py\n\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\nhttp://(IP Address):8000/calc/123,456\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f\u3067\u3059\u3002\n{\n  \"ResultSet\": {\n    \"Result\": {\n      \"\u5272\u308a\u7b97\": \"0.26973684210526316\", \n      \"\u5f15\u304d\u7b97\": \"-333\", \n      \"\u639b\u3051\u7b97\": \"56088\", \n      \"\u8db3\u3057\u7b97\": \"579\"\n    }\n  }\n}\n\n\n\u7d9a\u304d\n\u3053\u306e\u8a18\u4e8b\u306f\u4ee5\u4e0b\u306b\u7d9a\u304d\u307e\u3059\u3002\nAmazon Linux \u306b python3 + Flask + uWSGI + nginx \u3092\u5c0e\u5165\u3057\u3001\u672c\u756a\u904b\u7528\u306b\u8010\u3048\u308b\u30a6\u30a7\u30d6\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\nhttp://qiita.com/kent_ocean/items/1d8e0d6e0b853b424fcf\n\n\u4eca\u56de\u306f Amazon Linux \u306b python3 \u3068 Flask \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u305f\u6642\u306b JSON \u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3059 API \u30b5\u30fc\u30d0\u3092\u4f5c\u308b\u624b\u9806\u3092\u6574\u7406\u3057\u307e\u3057\u305f\u3002\n\n#\u524d\u63d0\u6761\u4ef6\n\n\u4eca\u56de\u306e\u8a18\u4e8b\u306f\u4ee5\u4e0b\u306e\u74b0\u5883\u3067\u624b\u9806\u3092\u691c\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002\n\n|      | Version | \n|:-----------|:------------|\n| OS       | Amazon Linux AMI 2016.03.3 (ami-374db956) |\n\n\n#\u5c0e\u5165\u3059\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\u4eca\u56de\u306e\u8a18\u4e8b\u3067\u5b9f\u969b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u4ee5\u4e0b\u306e\u901a\u308a\n\n|      | Version | \n|:-----------|:------------|\n| Python     | 3.5.2    |\n| Flask      | 0.11.1   |\n\n\n#EC2 \u3067 Amazon Linux \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\n\n\u8aac\u660e\u7701\u7565\u3057\u307e\u3059\u3002\n\n#yum \u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\n\n```\nsudo yum update\n```\n\n#gcc \u3084 ssl \u7b49\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nPython \u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u306b\u5fc5\u8981\u306a gcc \u3084\u3001pip \u306e\u5b9f\u884c\u306b\u5fc5\u8981\u306a ssl \u306a\u3069\u8af8\u3005\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\n\n\u203b openssl\u3092\u5165\u308c\u3066\u304a\u304b\u306a\u3044\u3068\u3001\u5f8c\u306e\u30b9\u30c6\u30c3\u30d7\u3067 Python \u3092 make install \u3059\u308b\u3068\u304d\u306b\nIgnoring ensurepip failure: pip 7.1.2 requires SSL/TLS\n\u3068\u3044\u3046\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\u3002\n\n```\nsudo yum install gcc-c++\nsudo yum install openssl-devel\nsudo yum install sqlite-devel\n```\n\n#Python3 \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\ncd /tmp\nwget https://www.python.org/ftp/python/3.5.2/Python-3.5.2.tgz\ntar zxvf Python-3.5.2.tgz\ncd Python-3.5.2\n./configure --prefix=$HOME/local\nmake\nmake install\n```\n\n###Python 3.5 \u306b\u5207\u308a\u66ff\u3048\n\n\u4eca\u56de\u4f7f\u3063\u3066\u3044\u308b Amazon Linux AMI 2016.03.3 \u306b\u306f\u6700\u521d\u304b\u3089 virtualenv \u304c\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\u5165\u3063\u3066\u3044\u306a\u3044\u5834\u5408\u306f pip install virtualenv \u3092\u5b9f\u884c\u3057\u3001virtualenv \u3092\u5165\u308c\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\nvirtualenv --python $HOME/local/bin/python3.5 ~/py352\nsource $HOME/py352/bin/activate\n```\n\n###\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n\n```\npython --version\nPython 3.5.2\n```\n\n###pip \u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\n\npython 3.5 \u306e pip \u3092\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u307e\u3059\n\n```\npip install --upgrade pip\n```\n\n###\u30ed\u30b0\u30a4\u30f3\u6642\u306b Python3.5 \u306b\u5207\u308a\u66ff\u308f\u308b\u3088\u3046\u8a2d\u5b9a\n\n```\necho 'source $HOME/py352/bin/activate' >> ~/.bash_profile\n```\n\n#Flask \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\npip install flask\n```\n\n#\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u3092\u4f5c\u6210\n\n```\nsudo mkdir -p /var/www/flask\n```\n\n#\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u76f4\u4e0b\u306b\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u4f5c\u6210\n\n```\ncd /var/www/flask\nsudo vim test.py\n```\n\n\n```test.py\nfrom flask import Flask\n\napp = Flask(__name__)\napp.config['SECRET_KEY'] = 'secret!'\n\n@app.route('/')\ndef hello_world():\n    return \"Hello World!\"\n\nif __name__ == '__main__':\n    app.run(port=8000,host='0.0.0.0')\n```\n\n(\u203b host='0,0,0,0' \u3068\u6307\u5b9a\u3057\u306a\u3044\u3068\u5916\u90e8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u306e\u3067\u6ce8\u610f)\n\n##\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\n\n```\npython test.py\n```\n\n#\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\n\n`http://(IP Address):8000`\n\n\u300cHello world!\u300d\u3068\u8868\u793a\u3055\u308c\u305f\u3089\u6210\u529f\u3067\u3059\u3002\n\n\n\n#\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9 2 \u3092\u4f5c\u6210\n\n\u4eca\u5ea6\u306f\u3001\n`http://(IP Address)/calc/x,y`\n\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3068\u304d\u306b\nx \u3068 y \u3092\u6f14\u7b97\u3057\u305f\u7d50\u679c\u3092\u8fd4\u3059 API \u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\n\n```test2.py\nfrom flask import Flask, jsonify\n\napp = Flask(__name__)\napp.config['SECRET_KEY'] = 'secret!'\napp.config['JSON_AS_ASCII'] = False #\u65e5\u672c\u8a9e\u304c\u6587\u5b57\u5316\u3051\u3057\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n\n@app.route('/calc/<num1>,<num2>')\ndef hello_world(num1, num2):\n  add = int(num1) + int(num2)\n  sub = int(num1) - int(num2)\n  mul = int(num1) * int(num2)\n  div = int(num1) / int(num2)\n  result = {\n    \"Result\":{\n      \"\u8db3\u3057\u7b97\": str(add),\n      \"\u5f15\u304d\u7b97\": str(sub),\n      \"\u639b\u3051\u7b97\": str(mul),\n      \"\u5272\u308a\u7b97\": str(div)\n      }\n  }\n  return jsonify(ResultSet=result)\n\nif __name__ == '__main__':\n    app.run(port=8000,host='0.0.0.0')\n```\n\n##\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u5b9f\u884c\n\n```\npython test2.py\n```\n\n\n##\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\n\n`http://(IP Address):8000/calc/123,456`\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f\u3067\u3059\u3002\n\n```\n{\n  \"ResultSet\": {\n    \"Result\": {\n      \"\u5272\u308a\u7b97\": \"0.26973684210526316\", \n      \"\u5f15\u304d\u7b97\": \"-333\", \n      \"\u639b\u3051\u7b97\": \"56088\", \n      \"\u8db3\u3057\u7b97\": \"579\"\n    }\n  }\n}\n```\n\n#\u7d9a\u304d\n\n\u3053\u306e\u8a18\u4e8b\u306f\u4ee5\u4e0b\u306b\u7d9a\u304d\u307e\u3059\u3002\n\nAmazon Linux \u306b python3 + Flask + uWSGI + nginx \u3092\u5c0e\u5165\u3057\u3001\u672c\u756a\u904b\u7528\u306b\u8010\u3048\u308b\u30a6\u30a7\u30d6\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\nhttp://qiita.com/kent_ocean/items/1d8e0d6e0b853b424fcf\n", "tags": ["python3", "Flask", "Python"]}