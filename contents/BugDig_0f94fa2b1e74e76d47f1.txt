{"tags": ["OSX", "C++", "iOS", "LLDB"], "context": " More than 1 year has passed since last update.\u5fae\u5999\u306bgdb\u3068\u9055\u3046\u305f\u3081\u3001\u30e1\u30e2\n\nLLDB \u8d77\u52d5\u65b9\u6cd5\nlldb -f ./$(TARGET)\n\n\n\u5b9f\u884c\nlldb\u30d7\u30ed\u30f3\u30d7\u30c8\u306b\u3066\n(lldb)r\n\n'r'\u306e\u4e00\u6587\u5b57\u3060\u3051\u3067\u30ea\u30bb\u30c3\u30c8\uff06RUN\n\nbreak\n(lldb)br set -n SomeFunc()\n\n\u95a2\u6570\u540d\u306a\u3069\u306f\u9014\u4e2d\u5165\u529b\u3067\u3082[TAB]\u88dc\u5b8c\u304c\u52b9\u304d\u307e\u3059.\n(lldb)br set -n CSome::UpdateView()\n\n(lldb)br set -f some.c -l 113\n\nsome.cpp \u306e113\u884c\u76ee\u306bbreak\u3092\u6253\u3061\u307e\u3059.\n113\u884c\u76ee\u306b\u6709\u52b9\u306a\u30b3\u30fc\u30c9\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u3067\u3082\u3001\n\u4ed8\u8fd1\u306e\u6709\u52b9\u306a\u30b3\u30fc\u30c9\u306bbreak\u3092\u6253\u3061\u8fbc\u3093\u3067\u3082\u3089\u3048\u307e\u3059\u3002\n\nbreak-point \u4e00\u89a7\u8868\u793a\n(lldb)br li\n\n\u30d5\u30eb\u30b9\u30da\u30eb\"break list\" \u3067\u3082\u53ef\u3060\u304c\u3001\"br li\" \u3067\u77ed\u7e2e\u3067\u3082\u53ef\u3002\nCurrent breakpoints:\n\n4: name = 'main', locations = 1, resolved = 1, hit count = 1\n  4.1: where = gsh`main + 30 at gshell.cpp:545, address = 0x00000001000031ee, resolved, hit count = 1\n\n5: name = 'Doc2Win::UpdateView()', locations = 1, resolved = 1, hit count = 0\n  5.1: where = gsh`Doc2Win::UpdateView() + 12 at document2window.cpp:72, address = 0x000000010000991c, resolved, hit count = 0\n\n\nStep\u5b9f\u884c\n(lldb)s\n\n's' 1\u6587\u5b57\u3067OK\n\nContinue\u5b9f\u884c\n(lldb)c\n\n'c' 1\u6587\u5b57\u3067OK\n\nWATCH\u5909\u6570\u306e\u8ffd\u52a0\n(lldb)watch set var \u5909\u6570\u540d\n\n\nWATCH\u5909\u6570\u306e\u5217\u6319\n(lldb)watch list\n\nNumber of supported hardware watchpoints: 4\nCurrent watchpoints:\nWatchpoint 1: addr = 0x100046750 size = 4 state = disabled type = w\n    watchpoint spec = 'pid_root'\n    new value: 0\n\n\n\u5168\u30b9\u30ec\u30c3\u30c9\u5217\u6319\n(lldb)th list\n\nProcess 12205 stopped\n* thread #1: tid = 0x46462, 0x00007fff8c76e306 libsystem_kernel.dylib`__read_nocancel + 10, queue = 'com.apple.main-thread', stop reason = signal SIGSTOP\n  thread #2: tid = 0x46480, 0x00007fff8c76e486 libsystem_kernel.dylib`__semwait_signal + 10\n  thread #3: tid = 0x46481, 0x00007fff8c76e486 libsystem_kernel.dylib`__semwait_signal + 10\n  thread #4: tid = 0x46482, 0x00007fff8c76e486 libsystem_kernel.dylib`__semwait_signal + 10\n\n\n\u30b9\u30ec\u30c3\u30c9\u9078\u629e\nth list \u3067\u8868\u793a\u3055\u308c\u3066\u3044\u308b #n \u3067\u30ab\u30ec\u30f3\u30c8\u30b9\u30ec\u30c3\u30c9\u3092\u9078\u629e\u3057\u307e\u3059\n(lldb)th sel 2\u3000\u3000\u3000#2\u3092\u9078\u629e\u3057\u305f\u3044\u5834\u5408\u306f2\u3060\u3051\u3002'#'\u306f\u4e0d\u8981\n\n* thread #2: tid = 0x46480, 0x00007fff8c76e486 libsystem_kernel.dylib`__semwait_signal + 10\n    frame #0: 0x00007fff8c76e486 libsystem_kernel.dylib`__semwait_signal + 10\nlibsystem_kernel.dylib`__semwait_signal + 10:\n-> 0x7fff8c76e486:  jae    0x7fff8c76e490            ; __semwait_signal + 20\n   0x7fff8c76e488:  movq   %rax, %rdi\n   0x7fff8c76e48b:  jmp    0x7fff8c769cc8            ; cerror\n   0x7fff8c76e490:  retq\n\n\nFrame\u60c5\u5831\u51fa\u529b\n(lldb)fr info\n\nframe #0: 0x00007fff8c76e306 libsystem_kernel.dylib`__read_nocancel + 10\n\n\nFrame\u9078\u629e\n(lldb)fr sel 6\n\nframe #6: 0x0000000100004344 gsh`PromptRunLoop() + 820 at gshell.cpp:235\n   232              StrReplaceCmdLine.clear();\n   233          }\n   234\n-> 235          int ch = GSHELL_Getc();\n   236          if( EOF == (s8)ch )             continue;\n   237          if( IsCR(ch) )\n   238          {\n\n\nFrame\u5185\u306e\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3092\u5168\u3066\u8868\u793a\n(lldb)fr va\n\n(int) ch = 1\n\n\n\u30d0\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\n(lldb)bt\n\n\u3053\u308c\u306fgdb\u3068\u540c\u3058\u3067\u3059\u3002\n* thread #1: tid = 0x43bf0, 0x000000010002dba6 gsh`Logger::Logger(this=0x0000000100200000, fname_log=0x0000000100042af2, bNoHeader=false, bDump=true) + 38 at logger.cpp:148, queue = 'com.apple.main-thread', stop reason = step in\n  * frame #0: 0x000000010002dba6 gsh`Logger::Logger(this=0x0000000100200000, fname_log=0x0000000100042af2, bNoHeader=false, bDump=true) + 38 at logger.cpp:148\n    frame #1: 0x000000010000321e gsh`main(argc=1, argv=0x00007fff5fbff988) + 78 at gshell.cpp:545\n    frame #2: 0x00007fff88abd5c9 libdyld.dylib`start + 1\n    frame #3: 0x00007fff88abd5c9 libdyld.dylib`start + 1\n\n\n\u5168\u3066\u306e\u30b9\u30ec\u30c3\u30c9\u306e\u30d0\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\n(lldb)bt all\n\n\n\u30c7\u30d0\u30c3\u30b0\u5bfe\u8c61\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u4e00\u6642\u4e2d\u65ad\nCTRL-C\n\n^C\u3067\u4e2d\u65ad\u3055\u305b\u308b\u3068\u3001\u30c7\u30d0\u30c3\u30ac\u306e\u30d7\u30ed\u30f3\u30d7\u30c8\u306b\u623b\u308a\u307e\u3059\u3002\n\n\u7d42\u4e86\n(lldb)quit\n\n\n\u5fae\u5999\u306bgdb\u3068\u9055\u3046\u305f\u3081\u3001\u30e1\u30e2\n\n## LLDB \u8d77\u52d5\u65b9\u6cd5\n\n```\nlldb -f ./$(TARGET)\n```\n\n\n##\u5b9f\u884c\n\nlldb\u30d7\u30ed\u30f3\u30d7\u30c8\u306b\u3066\n\n```\n(lldb)r\n```\n\n'r'\u306e\u4e00\u6587\u5b57\u3060\u3051\u3067\u30ea\u30bb\u30c3\u30c8\uff06RUN\n\n\n##break\n\n\n```\u95a2\u6570break\n(lldb)br set -n SomeFunc()\n```\n\n\u95a2\u6570\u540d\u306a\u3069\u306f\u9014\u4e2d\u5165\u529b\u3067\u3082[TAB]\u88dc\u5b8c\u304c\u52b9\u304d\u307e\u3059.\n\n```c++\u30e1\u30f3\u30d0\u30e1\u30bd\u30c3\u30c9break\n(lldb)br set -n CSome::UpdateView()\n```\n\n```File\u540d/\u884c\u756a\u53f7\u6307\u5b9abreak\n(lldb)br set -f some.c -l 113\n```\n\nsome.cpp \u306e113\u884c\u76ee\u306bbreak\u3092\u6253\u3061\u307e\u3059.\n113\u884c\u76ee\u306b\u6709\u52b9\u306a\u30b3\u30fc\u30c9\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u3067\u3082\u3001\n\u4ed8\u8fd1\u306e\u6709\u52b9\u306a\u30b3\u30fc\u30c9\u306bbreak\u3092\u6253\u3061\u8fbc\u3093\u3067\u3082\u3089\u3048\u307e\u3059\u3002\n\n##break-point \u4e00\u89a7\u8868\u793a\n\n```breakpoint\u5168\u3066\u8868\u793a\n(lldb)br li\n```\n\n\u30d5\u30eb\u30b9\u30da\u30eb\"break list\" \u3067\u3082\u53ef\u3060\u304c\u3001\"br li\" \u3067\u77ed\u7e2e\u3067\u3082\u53ef\u3002\n\n\n\n```\u51fa\u529b\u30b5\u30f3\u30d7\u30eb\nCurrent breakpoints:\n\n4: name = 'main', locations = 1, resolved = 1, hit count = 1\n  4.1: where = gsh`main + 30 at gshell.cpp:545, address = 0x00000001000031ee, resolved, hit count = 1\n\n5: name = 'Doc2Win::UpdateView()', locations = 1, resolved = 1, hit count = 0\n  5.1: where = gsh`Doc2Win::UpdateView() + 12 at document2window.cpp:72, address = 0x000000010000991c, resolved, hit count = 0\n```\n\n## Step\u5b9f\u884c\n\n```\n(lldb)s\n```\n\n's' 1\u6587\u5b57\u3067OK\n\n\n## Continue\u5b9f\u884c\n\n```\n(lldb)c\n```\n\n'c' 1\u6587\u5b57\u3067OK\n\n\n## WATCH\u5909\u6570\u306e\u8ffd\u52a0\n\n```\n(lldb)watch set var \u5909\u6570\u540d\n```\n\n## WATCH\u5909\u6570\u306e\u5217\u6319\n\n```\n(lldb)watch list\n```\n\n```\u51fa\u529b\u30b5\u30f3\u30d7\u30eb\nNumber of supported hardware watchpoints: 4\nCurrent watchpoints:\nWatchpoint 1: addr = 0x100046750 size = 4 state = disabled type = w\n    watchpoint spec = 'pid_root'\n    new value: 0\n```\n\n\n## \u5168\u30b9\u30ec\u30c3\u30c9\u5217\u6319\n\n```\n(lldb)th list\n```\n\n```\nProcess 12205 stopped\n* thread #1: tid = 0x46462, 0x00007fff8c76e306 libsystem_kernel.dylib`__read_nocancel + 10, queue = 'com.apple.main-thread', stop reason = signal SIGSTOP\n  thread #2: tid = 0x46480, 0x00007fff8c76e486 libsystem_kernel.dylib`__semwait_signal + 10\n  thread #3: tid = 0x46481, 0x00007fff8c76e486 libsystem_kernel.dylib`__semwait_signal + 10\n  thread #4: tid = 0x46482, 0x00007fff8c76e486 libsystem_kernel.dylib`__semwait_signal + 10\n```\n\n## \u30b9\u30ec\u30c3\u30c9\u9078\u629e\n\nth list \u3067\u8868\u793a\u3055\u308c\u3066\u3044\u308b #n \u3067\u30ab\u30ec\u30f3\u30c8\u30b9\u30ec\u30c3\u30c9\u3092\u9078\u629e\u3057\u307e\u3059\n\n```\n(lldb)th sel 2\u3000\u3000\u3000#2\u3092\u9078\u629e\u3057\u305f\u3044\u5834\u5408\u306f2\u3060\u3051\u3002'#'\u306f\u4e0d\u8981\n```\n\n```\u51fa\u529b\u30b5\u30f3\u30d7\u30eb\n* thread #2: tid = 0x46480, 0x00007fff8c76e486 libsystem_kernel.dylib`__semwait_signal + 10\n    frame #0: 0x00007fff8c76e486 libsystem_kernel.dylib`__semwait_signal + 10\nlibsystem_kernel.dylib`__semwait_signal + 10:\n-> 0x7fff8c76e486:  jae    0x7fff8c76e490            ; __semwait_signal + 20\n   0x7fff8c76e488:  movq   %rax, %rdi\n   0x7fff8c76e48b:  jmp    0x7fff8c769cc8            ; cerror\n   0x7fff8c76e490:  retq\n```\n\n## Frame\u60c5\u5831\u51fa\u529b\n\n```\n(lldb)fr info\n```\n\n```\u51fa\u529b\u30b5\u30f3\u30d7\u30eb\nframe #0: 0x00007fff8c76e306 libsystem_kernel.dylib`__read_nocancel + 10\n```\n\n## Frame\u9078\u629e\n```\n(lldb)fr sel 6\n```\n\n```\u51fa\u529b\u30b5\u30f3\u30d7\u30eb\nframe #6: 0x0000000100004344 gsh`PromptRunLoop() + 820 at gshell.cpp:235\n   232 \t\t\t\tStrReplaceCmdLine.clear();\n   233 \t\t\t}\n   234\n-> 235 \t\t\tint ch = GSHELL_Getc();\n   236 \t\t\tif( EOF == (s8)ch )\t\t\t\tcontinue;\n   237 \t\t\tif( IsCR(ch) )\n   238 \t\t\t{\n```\n\n### Frame\u5185\u306e\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3092\u5168\u3066\u8868\u793a\n\n```\n(lldb)fr va\n```\n\n```\u51fa\u529b\u30b5\u30f3\u30d7\u30eb\n(int) ch = 1\n```\n\n\n\n\n\n\n\n## \u30d0\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\n\n```\n(lldb)bt\n```\n\u3053\u308c\u306fgdb\u3068\u540c\u3058\u3067\u3059\u3002\n\n```\u51fa\u529b\u30b5\u30f3\u30d7\u30eb\n* thread #1: tid = 0x43bf0, 0x000000010002dba6 gsh`Logger::Logger(this=0x0000000100200000, fname_log=0x0000000100042af2, bNoHeader=false, bDump=true) + 38 at logger.cpp:148, queue = 'com.apple.main-thread', stop reason = step in\n  * frame #0: 0x000000010002dba6 gsh`Logger::Logger(this=0x0000000100200000, fname_log=0x0000000100042af2, bNoHeader=false, bDump=true) + 38 at logger.cpp:148\n    frame #1: 0x000000010000321e gsh`main(argc=1, argv=0x00007fff5fbff988) + 78 at gshell.cpp:545\n    frame #2: 0x00007fff88abd5c9 libdyld.dylib`start + 1\n    frame #3: 0x00007fff88abd5c9 libdyld.dylib`start + 1\n```\n\n## \u5168\u3066\u306e\u30b9\u30ec\u30c3\u30c9\u306e\u30d0\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\n\n```\n(lldb)bt all\n```\n \n\n\n## \u30c7\u30d0\u30c3\u30b0\u5bfe\u8c61\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u4e00\u6642\u4e2d\u65ad\n\n```\nCTRL-C\n```\n^C\u3067\u4e2d\u65ad\u3055\u305b\u308b\u3068\u3001\u30c7\u30d0\u30c3\u30ac\u306e\u30d7\u30ed\u30f3\u30d7\u30c8\u306b\u623b\u308a\u307e\u3059\u3002\n\n\n## \u7d42\u4e86\n\n```\n(lldb)quit\n```\n"}