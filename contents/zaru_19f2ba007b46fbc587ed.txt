{"tags": ["mecab"], "context": " More than 1 year has passed since last update.Mecab\u69d8\u3067\u9ad8\u901f\u6c17\u8efd\u306b\u5f62\u614b\u7d20\u89e3\u6790\u304c\u3067\u304d\u307e\u3059\u3002\u5c0e\u5165\u3082\u697d\u3067\u3059\u3057\u3001\u5404\u7a2e\u30d7\u30ed\u30b0\u30e9\u30e0\u304b\u3089\u547c\u3073\u51fa\u3059\u306e\u3082\u7c21\u5358\u3067\u3059\u3002\u57fa\u672c\u306fIPA\u8f9e\u66f8\u3092\u4f7f\u3046\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u5fa1\u5b58\u77e5\u306e\u901a\u308a\u30cd\u30c3\u30c8\u30b9\u30e9\u30f3\u30b0\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u308a\u3001\u56fa\u6709\u540d\u8a5e\u306b\u306f\u5f31\u304b\u3063\u305f\u308a\u3057\u307e\u3059\u3002\u306a\u306e\u3067\u3001\u4eca\u56de\u306f\u30cb\u30b3\u30cb\u30b3\u5927\u767e\u79d1 \u306f\u3066\u306a\u30ad\u30fc\u30ef\u30fc\u30c9 Wikipedia\u304b\u3089\u30c7\u30fc\u30bf\u3092\u5f15\u3063\u5f35\u3063\u3066\u304d\u3066\u8f9e\u66f8\u3092\u5f37\u5316\u3057\u3066\u3042\u3052\u307e\u3059\u3002\n\n\u5404\u7a2e\u30c7\u30fc\u30bf\u306e\u7528\u610f\n\nWikipedia\n$ wget http://dumps.wikimedia.org/jawiki/latest/jawiki-latest-all-titles-in-ns0.gz\n$ gunzip jawiki-latest-all-titles-in-ns0.gz\n\n\n\u306f\u3066\u306a\u30ad\u30fc\u30ef\u30fc\u30c9\n$ wget http://d.hatena.ne.jp/images/keyword/keywordlist_furigana.csv\n$ nkf -w --overwrite keywordlist_furigana.csv\n\n\n\u30cb\u30b3\u30cb\u30b3\u5927\u767e\u79d1\n\n\u30cb\u30b3\u30cb\u30b3\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\n\n\u3053\u3061\u3089\u304b\u3089\u300c\u30cb\u30b3\u30cb\u30b3\u5927\u767e\u79d1\u30c7\u30fc\u30bf\u300d\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002head.zip\u306e\u65b9\u3067\u3059\u3002\n$ unzip head.zip\n\n\n\u5909\u63db\u30b9\u30af\u30ea\u30d7\u30c8\n\nconvert.rb\nrequire 'csv'\n\ndef output(title, type)\n  title_length = title.length\n  return nil unless title_length > 3\n\n  score = [-36000.0, -400 * (title_length ** 1.5)].max.to_i\n  [title, nil, nil, score, '\u540d\u8a5e', '\u4e00\u822c', '*', '*', '*', '*', title, '*', '*', type]\nend\n\nCSV.open(\"user.csv\", 'w') do |csv|\n  # niconico\n  Dir::foreach('./niconico') do |f|\n    next unless f =~ /^head[0-9]{4}\\.csv$/\n    open(\"./niconico/#{f}\").each do |line|\n      title = line.split(',')[1].gsub('\"','')\n      out = output(title, 'niconico')\n      csv << out unless out.nil?\n    end\n  end\n\n  # hatena\n  open('keywordlist_furigana.csv').each do |line|\n   title = line.split(\"\\t\")[1].strip\n\n   out = output(title, 'hatena')\n   csv << out unless out.nil?\n  end\n\n  # Wikipedia\n  open('jawiki-latest-all-titles-in-ns0').each do |line|\n    title = line.strip\n\n    next if title =~ %r(^[+-.$()?*/&%!\"'_,]+)\n    next if title =~ /^[-.0-9]+$/\n    next if title =~ /\u66d6\u6627\u3055\u56de\u907f/\n    next if title =~ /_\\(/\n    next if title =~ /^PJ:/\n    next if title =~ /\u306e\u767b\u5834\u4eba\u7269/\n    next if title =~ /\u4e00\u89a7/\n\n    title.gsub!('_', ' ')\n\n    out = output(title, 'wikipedia')\n    csv << out unless out.nil?\n  end\nend\n\n\n\u3053\u306eRuby\u30b9\u30af\u30ea\u30d7\u30c8\u3067CSV\u306b\u5909\u63db\u3057\u3066\u3042\u3052\u307e\u3059\u3002\u305d\u3057\u3066\u3001mecab-dict-index\u3092\u4f7f\u3063\u3066dic\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u63db\u3059\u308c\u3070\u7d42\u4e86\u3067\u3059\u3002\n$ ruby convert.ruby\n$ mv user.csv /usr/local/lib/mecab/dic/ipadic\n$ cd /usr/local/lib/mecab/dic/ipadic\n$ /usr/local/libexec/mecab/mecab-dict-index -d /usr/local/lib/mecab/dic/ipadic -u user.dic -f utf-8 -t utf-8 user.csv\n\n\n\u30e6\u30fc\u30b6\u8f9e\u66f8\u3092\u4f7f\u3046\n$ mecab -u user.dic\n\u304a\u306b\u304f\u3060\u3044\u3059\u304d!\u30bc\u30a6\u30b7\u304f\u3093\n\u304a\u306b\u304f\u3060\u3044\u3059\u304d!\u30bc\u30a6\u30b7\u304f\u3093   \u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u304a\u306b\u304f\u3060\u3044\u3059\u304d!\u30bc\u30a6\u30b7\u304f\u3093,*,*,niconico\nEOS\n\n\u3061\u3083\u3093\u3068\u30bc\u30a6\u30b7\u304f\u3093\u304c\u8a8d\u8b58\u3055\u308c\u307e\u3057\u305f\u306d\u3002\u305f\u3060\u3001\u8a18\u53f7\u306a\u3069\u304c\u542b\u307e\u308c\u308b\u30b2\u30fc\u30e0\u3068\u304b\u30a2\u30cb\u30e1\u3068\u304b\u306e\u56fa\u6709\u540d\u8a5e\u306e\u4e00\u81f4\u306f\u7d50\u69cb\u96e3\u3057\u3044\u3067\u3059\u306d\u3002\u3053\u3053\u3089\u3078\u3093\u306e\u8868\u8a18\u3086\u308c\u306b\u5bfe\u5fdc\u3059\u308b\u306b\u306f\u3001\u3069\u3046\u3059\u308b\u306e\u304c\u3044\u3044\u3093\u3060\u308d\u3046\u304b\u3002\n\nMecab\u69d8\u3067\u9ad8\u901f\u6c17\u8efd\u306b\u5f62\u614b\u7d20\u89e3\u6790\u304c\u3067\u304d\u307e\u3059\u3002\u5c0e\u5165\u3082\u697d\u3067\u3059\u3057\u3001\u5404\u7a2e\u30d7\u30ed\u30b0\u30e9\u30e0\u304b\u3089\u547c\u3073\u51fa\u3059\u306e\u3082\u7c21\u5358\u3067\u3059\u3002\u57fa\u672c\u306fIPA\u8f9e\u66f8\u3092\u4f7f\u3046\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u5fa1\u5b58\u77e5\u306e\u901a\u308a\u30cd\u30c3\u30c8\u30b9\u30e9\u30f3\u30b0\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u308a\u3001\u56fa\u6709\u540d\u8a5e\u306b\u306f\u5f31\u304b\u3063\u305f\u308a\u3057\u307e\u3059\u3002\u306a\u306e\u3067\u3001\u4eca\u56de\u306f\u30cb\u30b3\u30cb\u30b3\u5927\u767e\u79d1 \u306f\u3066\u306a\u30ad\u30fc\u30ef\u30fc\u30c9 Wikipedia\u304b\u3089\u30c7\u30fc\u30bf\u3092\u5f15\u3063\u5f35\u3063\u3066\u304d\u3066\u8f9e\u66f8\u3092\u5f37\u5316\u3057\u3066\u3042\u3052\u307e\u3059\u3002\n\n# \u5404\u7a2e\u30c7\u30fc\u30bf\u306e\u7528\u610f\n\n## Wikipedia\n\n```\n$ wget http://dumps.wikimedia.org/jawiki/latest/jawiki-latest-all-titles-in-ns0.gz\n$ gunzip jawiki-latest-all-titles-in-ns0.gz\n```\n\n## \u306f\u3066\u306a\u30ad\u30fc\u30ef\u30fc\u30c9\n\n```\n$ wget http://d.hatena.ne.jp/images/keyword/keywordlist_furigana.csv\n$ nkf -w --overwrite keywordlist_furigana.csv\n```\n\n## \u30cb\u30b3\u30cb\u30b3\u5927\u767e\u79d1\n\n- [\u30cb\u30b3\u30cb\u30b3\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8](http://www.nii.ac.jp/cscenter/idr/nico/nico.html)\n\n\u3053\u3061\u3089\u304b\u3089\u300c\u30cb\u30b3\u30cb\u30b3\u5927\u767e\u79d1\u30c7\u30fc\u30bf\u300d\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002`head.zip`\u306e\u65b9\u3067\u3059\u3002\n\n```\n$ unzip head.zip\n```\n\n# \u5909\u63db\u30b9\u30af\u30ea\u30d7\u30c8\n\n```ruby:convert.rb\nrequire 'csv'\n\ndef output(title, type)\n  title_length = title.length\n  return nil unless title_length > 3\n\n  score = [-36000.0, -400 * (title_length ** 1.5)].max.to_i\n  [title, nil, nil, score, '\u540d\u8a5e', '\u4e00\u822c', '*', '*', '*', '*', title, '*', '*', type]\nend\n\nCSV.open(\"user.csv\", 'w') do |csv|\n  # niconico\n  Dir::foreach('./niconico') do |f|\n  \tnext unless f =~ /^head[0-9]{4}\\.csv$/\n    open(\"./niconico/#{f}\").each do |line|\n      title = line.split(',')[1].gsub('\"','')\n      out = output(title, 'niconico')\n      csv << out unless out.nil?\n    end\n  end\n\n  # hatena\n  open('keywordlist_furigana.csv').each do |line|\n   title = line.split(\"\\t\")[1].strip\n\n   out = output(title, 'hatena')\n   csv << out unless out.nil?\n  end\n\n  # Wikipedia\n  open('jawiki-latest-all-titles-in-ns0').each do |line|\n    title = line.strip\n\n    next if title =~ %r(^[+-.$()?*/&%!\"'_,]+)\n    next if title =~ /^[-.0-9]+$/\n    next if title =~ /\u66d6\u6627\u3055\u56de\u907f/\n    next if title =~ /_\\(/\n    next if title =~ /^PJ:/\n    next if title =~ /\u306e\u767b\u5834\u4eba\u7269/\n    next if title =~ /\u4e00\u89a7/\n\n    title.gsub!('_', ' ')\n\n    out = output(title, 'wikipedia')\n    csv << out unless out.nil?\n  end\nend\n```\n\n\u3053\u306eRuby\u30b9\u30af\u30ea\u30d7\u30c8\u3067CSV\u306b\u5909\u63db\u3057\u3066\u3042\u3052\u307e\u3059\u3002\u305d\u3057\u3066\u3001mecab-dict-index\u3092\u4f7f\u3063\u3066dic\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u63db\u3059\u308c\u3070\u7d42\u4e86\u3067\u3059\u3002\n\n```\n$ ruby convert.ruby\n$ mv user.csv /usr/local/lib/mecab/dic/ipadic\n$ cd /usr/local/lib/mecab/dic/ipadic\n$ /usr/local/libexec/mecab/mecab-dict-index -d /usr/local/lib/mecab/dic/ipadic -u user.dic -f utf-8 -t utf-8 user.csv\n```\n\n# \u30e6\u30fc\u30b6\u8f9e\u66f8\u3092\u4f7f\u3046\n\n```\n$ mecab -u user.dic\n\u304a\u306b\u304f\u3060\u3044\u3059\u304d!\u30bc\u30a6\u30b7\u304f\u3093\n\u304a\u306b\u304f\u3060\u3044\u3059\u304d!\u30bc\u30a6\u30b7\u304f\u3093\t\u540d\u8a5e,\u4e00\u822c,*,*,*,*,\u304a\u306b\u304f\u3060\u3044\u3059\u304d!\u30bc\u30a6\u30b7\u304f\u3093,*,*,niconico\nEOS\n```\n\n\u3061\u3083\u3093\u3068\u30bc\u30a6\u30b7\u304f\u3093\u304c\u8a8d\u8b58\u3055\u308c\u307e\u3057\u305f\u306d\u3002\u305f\u3060\u3001\u8a18\u53f7\u306a\u3069\u304c\u542b\u307e\u308c\u308b\u30b2\u30fc\u30e0\u3068\u304b\u30a2\u30cb\u30e1\u3068\u304b\u306e\u56fa\u6709\u540d\u8a5e\u306e\u4e00\u81f4\u306f\u7d50\u69cb\u96e3\u3057\u3044\u3067\u3059\u306d\u3002\u3053\u3053\u3089\u3078\u3093\u306e\u8868\u8a18\u3086\u308c\u306b\u5bfe\u5fdc\u3059\u308b\u306b\u306f\u3001\u3069\u3046\u3059\u308b\u306e\u304c\u3044\u3044\u3093\u3060\u308d\u3046\u304b\u3002\n\n"}