{"context": "\u7d50\u5408\u6587\u5b57\u5217\u3092Unicode\u6b63\u898f\u5316\u3067\u5408\u6210\u3059\u308b\u65b9\u6cd5\u306e\u5371\u967a\u6027 \u3067\u306f\u3001\u7d50\u5408\u6587\u5b57\u5217\u3092\u89e3\u6d88\u3059\u308b\u65b9\u6cd5\u3068\u3057\u3066NFC\u3092\u9069\u7528\u3059\u308b\u3053\u3068\u306e\u5371\u967a\u6027\u3092\u8aac\u660e\u3057\u307e\u3057\u305f\u3002\u305d\u308c\u3067\u306f\u3069\u3046\u3057\u305f\u3089\u3044\u3044\u306e\u304b\u3092\u3053\u3053\u3067\u8003\u3048\u3066\u307f\u307e\u3059\u3002\n\n\u8003\u5bdf\n\u7d50\u5408\u6587\u5b57\u5217\u3092\u89e3\u6d88\u3059\u308b\u73fe\u5b9f\u7684\u306a\u65b9\u6cd5\u306f\u300cComposition Exclusion\u3092\u51e6\u7406\u5bfe\u8c61\u304b\u3089\u9664\u3044\u3066NFC\u3092\u9069\u7528\u3059\u308b\u300d\u3060\u3068\u601d\u3044\u307e\u3059\u3002\u305d\u3053\u3067Composition Exclusion\u3092\u6b63\u898f\u8868\u73fe\u306b\u3057\u3066\u307f\u305f\u306e\u304c\u3053\u3061\u3089\u3002\n\u3053\u308c\u3092\u3082\u3068\u306b\u3057\u3066happyscript\u3055\u3093\u304c\u66f8\u3044\u3066\u304f\u308c\u305fPerl\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u3053\u3061\u3089\u3002\n\nsafetyNFC.pl\n#!/usr/bin/perl\n\nuse strict;\nuse Unicode::Normalize;\nuse utf8;  #-\u30bd\u30fc\u30b9\u304cUTF8\u3060\u3068\u3044\u3046\u5ba3\u8a00\nuse Encode;\nbinmode STDOUT, \":utf8\";  #-\u753b\u9762\u306b\u51fa\u529b\u3057\u305f\u3044\u6587\u5b57\u30b3\u30fc\u30c9\nbinmode STDERR, \":utf8\";  #-\u30a8\u30e9\u30fc\u51fa\u529b\u306b\u4f7f\u3044\u305f\u3044\u6587\u5b57\u30b3\u30fc\u30c9\nbinmode STDIN, \":utf8\";  #-\u6a19\u6e96\u5165\u529b\u304b\u3089\u5165\u3063\u3066\u304f\u308b\u6587\u5b57\u30b3\u30fc\u30c9\n\nmy $Target;\nmy $myReg = '[^\\x{0340}\\x{0341}\\x{0343}\\x{0344}\\x{0374}\\x{037E}\\x{0387}\\x{0958}-\\x{095F}\\x{09DC}\\x{09DD}\\x{09DF}\\x{0A33}\\x{0A36}\\x{0A59}-\\x{0A5B}\\x{0A5E}\\x{0B5C}\\x{0B5D}\\x{0F43}\\x{0F4D}\\x{0F52}\\x{0F57}\\x{0F5C}\\x{0F69}\\x{0F73}\\x{0F75}\\x{0F76}\\x{0F78}\\x{0F81}\\x{0F93}\\x{0F9D}\\x{0FA2}\\x{0FA7}\\x{0FAC}\\x{0FB9}\\x{1F71}\\x{1F73}\\x{1F75}\\x{1F77}\\x{1F79}\\x{1F7B}\\x{1F7D}\\x{1FBB}\\x{1FBE}\\x{1FC9}\\x{1FCB}\\x{1FD3}\\x{1FDB}\\x{1FE3}\\x{1FEB}\\x{1FEE}\\x{1FEF}\\x{1FF9}\\x{1FFB}\\x{1FFD}\\x{2000}\\x{2001}\\x{2126}\\x{212A}\\x{212B}\\x{2329}\\x{232A}\\x{2ADC}\\x{F900}-\\x{FAFF}\\x{FB1D}\\x{FB1F}\\x{FB2A}-\\x{FB36}\\x{FB38}-\\x{FB3C}\\x{FB3E}\\x{FB40}\\x{FB41}\\x{FB43}\\x{FB44}\\x{FB46}-\\x{FB4E}\\x{1D15E}-\\x{1D164}\\x{1D1BB}-\\x{1D1C0}\\x{2F800}-\\x{2FA1F}]+';\n\nif ($#ARGV > -1) {\n   $Target = decode('utf8',$ARGV[0]);\n} else {\n   while (<STDIN>) {\n      $Target .= $_;\n   }\n}\n\n$Target =~ s/($myReg)/NFC($1)/eg;\n\nprint $Target;\n\n\n\u4ed6\u306e\u8a00\u8a9e\u306b\u3082\u5fdc\u7528\u3067\u304d\u308b\u3068\u601d\u3046\u306e\u3067\u3059\u304c\u3001\u3069\u3046\u3067\u3057\u3087\u3046\u304b\u3002\n\n\u30b3\u30e1\u30f3\u30c8\u3067Unicode\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u6b63\u898f\u8868\u73fe\u30d1\u30bf\u30fc\u30f3\u3092\u6559\u3048\u3066\u3082\u3089\u3044\u307e\u3057\u305f\u3002Perl\u306f\u3053\u3053\u304c\u5145\u5b9f\u3057\u3066\u3044\u308b\u306e\u3067\u3044\u3044\u3067\u3059\u306d\uff5e\n\n[\u7d50\u5408\u6587\u5b57\u5217\u3092Unicode\u6b63\u898f\u5316\u3067\u5408\u6210\u3059\u308b\u65b9\u6cd5\u306e\u5371\u967a\u6027](http://qiita.com/monokano/items/d4c37d9bc9833eaeda6e) \u3067\u306f\u3001\u7d50\u5408\u6587\u5b57\u5217\u3092\u89e3\u6d88\u3059\u308b\u65b9\u6cd5\u3068\u3057\u3066NFC\u3092\u9069\u7528\u3059\u308b\u3053\u3068\u306e\u5371\u967a\u6027\u3092\u8aac\u660e\u3057\u307e\u3057\u305f\u3002\u305d\u308c\u3067\u306f\u3069\u3046\u3057\u305f\u3089\u3044\u3044\u306e\u304b\u3092\u3053\u3053\u3067\u8003\u3048\u3066\u307f\u307e\u3059\u3002\n\n# \u8003\u5bdf\n\u7d50\u5408\u6587\u5b57\u5217\u3092\u89e3\u6d88\u3059\u308b\u73fe\u5b9f\u7684\u306a\u65b9\u6cd5\u306f\u300c[Composition Exclusion](http://www.unicode.org/Public/UNIDATA/CompositionExclusions.txt)\u3092\u51e6\u7406\u5bfe\u8c61\u304b\u3089\u9664\u3044\u3066NFC\u3092\u9069\u7528\u3059\u308b\u300d\u3060\u3068\u601d\u3044\u307e\u3059\u3002\u305d\u3053\u3067Composition Exclusion\u3092\u6b63\u898f\u8868\u73fe\u306b\u3057\u3066\u307f\u305f\u306e\u304c[\u3053\u3061\u3089](http://bit.ly/2e3a8Vh)\u3002\n\n\u3053\u308c\u3092\u3082\u3068\u306b\u3057\u3066[happyscript](http://qiita.com/happyscript)\u3055\u3093\u304c\u66f8\u3044\u3066\u304f\u308c\u305fPerl\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u3053\u3061\u3089\u3002\n\n```perl:safetyNFC.pl\n#!/usr/bin/perl\n\nuse strict;\nuse Unicode::Normalize;\nuse utf8;  #-\u30bd\u30fc\u30b9\u304cUTF8\u3060\u3068\u3044\u3046\u5ba3\u8a00\nuse Encode;\nbinmode STDOUT, \":utf8\";  #-\u753b\u9762\u306b\u51fa\u529b\u3057\u305f\u3044\u6587\u5b57\u30b3\u30fc\u30c9\nbinmode STDERR, \":utf8\";  #-\u30a8\u30e9\u30fc\u51fa\u529b\u306b\u4f7f\u3044\u305f\u3044\u6587\u5b57\u30b3\u30fc\u30c9\nbinmode STDIN, \":utf8\";  #-\u6a19\u6e96\u5165\u529b\u304b\u3089\u5165\u3063\u3066\u304f\u308b\u6587\u5b57\u30b3\u30fc\u30c9\n\nmy $Target;\nmy $myReg = '[^\\x{0340}\\x{0341}\\x{0343}\\x{0344}\\x{0374}\\x{037E}\\x{0387}\\x{0958}-\\x{095F}\\x{09DC}\\x{09DD}\\x{09DF}\\x{0A33}\\x{0A36}\\x{0A59}-\\x{0A5B}\\x{0A5E}\\x{0B5C}\\x{0B5D}\\x{0F43}\\x{0F4D}\\x{0F52}\\x{0F57}\\x{0F5C}\\x{0F69}\\x{0F73}\\x{0F75}\\x{0F76}\\x{0F78}\\x{0F81}\\x{0F93}\\x{0F9D}\\x{0FA2}\\x{0FA7}\\x{0FAC}\\x{0FB9}\\x{1F71}\\x{1F73}\\x{1F75}\\x{1F77}\\x{1F79}\\x{1F7B}\\x{1F7D}\\x{1FBB}\\x{1FBE}\\x{1FC9}\\x{1FCB}\\x{1FD3}\\x{1FDB}\\x{1FE3}\\x{1FEB}\\x{1FEE}\\x{1FEF}\\x{1FF9}\\x{1FFB}\\x{1FFD}\\x{2000}\\x{2001}\\x{2126}\\x{212A}\\x{212B}\\x{2329}\\x{232A}\\x{2ADC}\\x{F900}-\\x{FAFF}\\x{FB1D}\\x{FB1F}\\x{FB2A}-\\x{FB36}\\x{FB38}-\\x{FB3C}\\x{FB3E}\\x{FB40}\\x{FB41}\\x{FB43}\\x{FB44}\\x{FB46}-\\x{FB4E}\\x{1D15E}-\\x{1D164}\\x{1D1BB}-\\x{1D1C0}\\x{2F800}-\\x{2FA1F}]+';\n\nif ($#ARGV > -1) {\n   $Target = decode('utf8',$ARGV[0]);\n} else {\n   while (<STDIN>) {\n      $Target .= $_;\n   }\n}\n\n$Target =~ s/($myReg)/NFC($1)/eg;\n\nprint $Target;\n```\n\u4ed6\u306e\u8a00\u8a9e\u306b\u3082\u5fdc\u7528\u3067\u304d\u308b\u3068\u601d\u3046\u306e\u3067\u3059\u304c\u3001\u3069\u3046\u3067\u3057\u3087\u3046\u304b\u3002\n\n* \u30b3\u30e1\u30f3\u30c8\u3067Unicode\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u6b63\u898f\u8868\u73fe\u30d1\u30bf\u30fc\u30f3\u3092\u6559\u3048\u3066\u3082\u3089\u3044\u307e\u3057\u305f\u3002Perl\u306f\u3053\u3053\u304c\u5145\u5b9f\u3057\u3066\u3044\u308b\u306e\u3067\u3044\u3044\u3067\u3059\u306d\uff5e\n", "tags": ["unicode", "Perl"]}