{"context": "Rack \u306f\u3001\u30d5\u30a1\u30a4\u30eb\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306a\u3069\u3001multipart \u306a\u30b3\u30f3\u30c6\u30f3\u30c8\u30bf\u30a4\u30d7\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51e6\u7406\u3059\u308b\u3068\u304d\u306b\u3001\u9001\u3089\u308c\u3066\u304d\u305f\u30c7\u30fc\u30bf\u3092\u30c6\u30f3\u30dd\u30e9\u30ea\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u4fdd\u5b58\u3059\u308b\u3002\nhttps://github.com/rack/rack/blob/1.6.4/lib/rack/multipart/parser.rb#L21-L22\nhttps://github.com/rack/rack/blob/1.6.4/lib/rack/multipart/parser.rb#L135\nruby \u306e Tempfile \u30af\u30e9\u30b9\u3092\u4f7f\u3063\u3066\u30c6\u30f3\u30dd\u30e9\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u3063\u3066\u3044\u308b\u3002Tempfile \u306f #close!\uff08\u307e\u305f\u306f #close(true)\uff09\u3057\u305f\u3089\u30c6\u30f3\u30dd\u30e9\u30ea\u30d5\u30a1\u30a4\u30eb\u3082\u524a\u9664\u3059\u308b\u304c\u3001\u305d\u3046\u3067\u306a\u3044\u3068 GC \u3055\u308c\u308b\u304b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u4e86\u3059\u308b\u307e\u3067\u6b8b\u308a\u7d9a\u3051\u3066\u3057\u307e\u3046\u3002\nhttps://github.com/ruby/ruby/blob/v2_2_0/lib/tempfile.rb#L180-L183\nhttps://github.com/ruby/ruby/blob/v2_2_0/lib/tempfile.rb#L131\n\u3059\u3050\u306b close! \u3057\u3066\u304f\u308c\u306a\u3044\u304b\u306a\u30fc\u3001\u3068 Rack \u3092\u773a\u3081\u3066\u3044\u305f\u3089\u3001Rack::TempfileReaper \u3068\u3044\u3046\u3082\u306e\u304c\u3042\u3063\u305f\u3002Eliminate dependency on garbage collection for cleanup of Tempfiles created by Rack for multipart form data \u3068\u3044\u3046 PR \u3067\u5165\u3063\u305f\u3089\u3057\u3044\u3002\nconfig/application.rb \u3042\u305f\u308a\u306b config.middleware.use Rack::TempfileReaper \u3068\u66f8\u3044\u3066\u3053\u3044\u3064\u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u3066\u304a\u3051\u3070\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u4f7f\u3063\u305f Tempfile \u3092 close! \u3057\u3066\u304f\u308c\u308b\u3002\u7d50\u679c\u30c6\u30f3\u30dd\u30e9\u30ea\u30d5\u30a1\u30a4\u30eb\u3082\u3059\u3050\u306b\u6d88\u3048\u308b  \nRack \u306f\u3001\u30d5\u30a1\u30a4\u30eb\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306a\u3069\u3001multipart \u306a\u30b3\u30f3\u30c6\u30f3\u30c8\u30bf\u30a4\u30d7\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51e6\u7406\u3059\u308b\u3068\u304d\u306b\u3001\u9001\u3089\u308c\u3066\u304d\u305f\u30c7\u30fc\u30bf\u3092\u30c6\u30f3\u30dd\u30e9\u30ea\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u4fdd\u5b58\u3059\u308b\u3002\n\nhttps://github.com/rack/rack/blob/1.6.4/lib/rack/multipart/parser.rb#L21-L22\nhttps://github.com/rack/rack/blob/1.6.4/lib/rack/multipart/parser.rb#L135\n\nruby \u306e Tempfile \u30af\u30e9\u30b9\u3092\u4f7f\u3063\u3066\u30c6\u30f3\u30dd\u30e9\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u3063\u3066\u3044\u308b\u3002Tempfile \u306f `#close!`\uff08\u307e\u305f\u306f `#close(true)`\uff09\u3057\u305f\u3089\u30c6\u30f3\u30dd\u30e9\u30ea\u30d5\u30a1\u30a4\u30eb\u3082\u524a\u9664\u3059\u308b\u304c\u3001\u305d\u3046\u3067\u306a\u3044\u3068 GC \u3055\u308c\u308b\u304b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u4e86\u3059\u308b\u307e\u3067\u6b8b\u308a\u7d9a\u3051\u3066\u3057\u307e\u3046\u3002\n\nhttps://github.com/ruby/ruby/blob/v2_2_0/lib/tempfile.rb#L180-L183\nhttps://github.com/ruby/ruby/blob/v2_2_0/lib/tempfile.rb#L131\n\n\u3059\u3050\u306b close! \u3057\u3066\u304f\u308c\u306a\u3044\u304b\u306a\u30fc\u3001\u3068 Rack \u3092\u773a\u3081\u3066\u3044\u305f\u3089\u3001[Rack::TempfileReaper](https://github.com/rack/rack/blob/1.6.4/lib/rack/tempfile_reaper.rb) \u3068\u3044\u3046\u3082\u306e\u304c\u3042\u3063\u305f\u3002[Eliminate dependency on garbage collection for cleanup of Tempfiles created by Rack for multipart form data](https://github.com/rack/rack/pull/671) \u3068\u3044\u3046 PR \u3067\u5165\u3063\u305f\u3089\u3057\u3044\u3002\n\nconfig/application.rb \u3042\u305f\u308a\u306b `config.middleware.use Rack::TempfileReaper` \u3068\u66f8\u3044\u3066\u3053\u3044\u3064\u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u3066\u304a\u3051\u3070\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u4f7f\u3063\u305f Tempfile \u3092 close! \u3057\u3066\u304f\u308c\u308b\u3002\u7d50\u679c\u30c6\u30f3\u30dd\u30e9\u30ea\u30d5\u30a1\u30a4\u30eb\u3082\u3059\u3050\u306b\u6d88\u3048\u308b :smile: \n", "tags": ["Rails", "rack"]}