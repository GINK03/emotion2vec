{"context": "fuelPHP\u3067\u30e6\u30cb\u30c3\u30c8\u30fb\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30c6\u30b9\u30c8\u3057\u3088\u3046\u3068\u601d\u3063\u305f\u3089\u610f\u5916\u306b\u60c5\u5831\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\n\u524d\u6e96\u5099\n\nPHPUnit\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306ecomposer.json\u306erequire\u306bphpunit\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\ncomposer.json\n    \"require\": {\n        \"php\": \">=5.3.3\",\n        \"composer/installers\": \"~1.0\",\n        \"fuel/docs\": \"1.7.2\",\n        \"fuel/core\": \"1.7.2\",\n        \"fuel/auth\": \"1.7.2\",\n        \"fuel/email\": \"1.7.2\",\n        \"fuel/oil\": \"1.7.2\",\n        \"fuel/orm\": \"1.7.2\",\n        \"fuel/parser\": \"1.7.2\",\n        \"fuelphp/upload\": \"2.0.1\",\n        \"monolog/monolog\": \"1.5.*\",\n        \"michelf/php-markdown\": \"1.4.0\",\n        \"phpunit/phpunit\": \"3.7.*\" \u2190 \u8ffd\u52a0\n    }\n\n\n\ncomposer\u7d4c\u7531\u3067PHPUnit\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ncomposer\u3092\u5b9f\u884c\u3057\u3066PHPUnit\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ php composer.phar install\n\noil\u30b3\u30de\u30f3\u30c9\u304b\u3089\u5b9f\u884c\u53ef\u80fd\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nfuel/app/config.oil.php\n<?php\nreturn array(\n    'phpunit' => array(\n        'binary_path' => 'fuel/vendor/phpunit/phpunit/composer/bin/phpunit',\n    ),\n);\n\n\n\n\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3046\u524d\u306b\u3001\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u3092\u3084\u3063\u3066\u307f\u307e\u3059\u3002\n\u30e1\u30f3\u30d0\u30fc\u30e2\u30c7\u30eb\u306bID\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u30d7\u30ed\u30d1\u30c6\u30a3\u304c\u5b58\u5728\u3057\u3001\u3069\u3061\u3089\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3082required\u306a\u30b1\u30fc\u30b9\u3092\u8003\u3048\u307e\u3059\u3002\n$ oil g scaffold member member_id:varchar[32] password:varchar[32]\n$ oil refine migrate\n\n\u751f\u6210\u3055\u308c\u305fmember\u30e2\u30c7\u30eb\u3092\u898b\u3066\u307f\u307e\u3059\u3002\n\nfuel/app/classes/model/member.php\nuse Orm\\Model;\n\nclass Model_Member extends Model\n{\n    protected static $_properties = array(\n        'id',\n        'member_id',\n        'password',\n        'created_at',\n        'updated_at',\n    );\n\n    protected static $_observers = array(\n        'Orm\\Observer_CreatedAt' => array(\n            'events' => array('before_insert'),\n            'mysql_timestamp' => false,\n        ),\n        'Orm\\Observer_UpdatedAt' => array(\n            'events' => array('before_save'),\n            'mysql_timestamp' => false,\n        ),\n    );\n\n    public static function validate($factory)\n    {\n        $val = Validation::forge($factory);\n        $val->add_field('member_id', 'Member Id', 'required|max_length[32]');\n        $val->add_field('password', 'Password', 'required|max_length[32]');\n\n        return $val;\n    }\n\n}\n\n\nmember_id\u3068password\u304crequired\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u203b \u5b9f\u969b\u306b\u306f\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u6697\u53f7\u5316\u3057\u306a\u3044\u3068\u30c0\u30e1\u3067\u3059\u304c\u3001\u4fbf\u5b9c\u7684\u306b\u5e73\u6587\u3068\u3057\u307e\u3059\u3002\n\u3053\u306e\u72b6\u614b\u3067member\u306e\u30e2\u30c7\u30eb\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\n\nfuel/app/tests/model/member.php\n<?php\n/**\n * Model Post class tests\n * \n * @group Model\n * @group Member\n */\n\nclass Test_Model_Member extends \\TestCase\n{\n  public function test_create_member(){\n    $count = count(Model_Member::find(\"all\"));\n\n    $member = Model_Member::forge(array(\n      'member_id' => \"member_id\",\n      'password' => 'password',\n    ));\n\n    $member->save();\n\n    $update_count = count(Model_Member::find(\"all\"));\n\n    $this->assertEquals($count+1,$update_count);\n\n  }\n}\n\n\n\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ php oil test\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/core/phpunit.xml\n\n...............................................................  63 / 376 ( 16%)\n............................................................... 126 / 376 ( 33%)\n............................................................... 189 / 376 ( 50%)\n............................................................... 252 / 376 ( 67%)\n............................................................... 315 / 376 ( 83%)\n.............................................................\n\nTime: 454 ms, Memory: 19.50Mb\n\nOK (376 tests, 448 assertions)\n\n\u901a\u308a\u307e\u3057\u305f\u3002\n\u3053\u3053\u3067\u3001\u8a66\u3057\u306bmember_id\u306enull\u3092\u8a31\u5bb9\u3057\u3066\u307f\u307e\u3059\u3002\nmagic migration\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308a\u307e\u3059\u3002\nfuelPHP\u306emagic migration\u306b\u306f\u3001\u30ab\u30e9\u30e0\u306e\u5c5e\u6027\u3060\u3051\u3092\u5909\u3048\u308bmigration\u304c\u306a\u3044\u306e\u3067\u3001rename\u306emagic migration\u3092\u30d9\u30fc\u30b9\u306b\u3057\u307e\u3059\u3002\n$ oil  g migration rename_field_member_id_to_member_id_in_members\n        Creating migration: /home/unko/sample/fuel/app/migrations/002_rename_field_member_id_to_member_id_in_members.php\n\nnull\u5236\u7d04\u3092\u306f\u305a\u3059\n\nfuel/app/migrations/002_rename_field_member_id_to_member_id_in_members.php\n<?php\n\nnamespace Fuel\\Migrations;\n\nclass Rename_field_member_id_to_member_id_in_members\n{\n    public function up()\n    {\n        \\DBUtil::modify_fields('members', array(\n          'member_id' => array('name' => 'member_id', 'type' => 'varchar', 'constraint' => 32, 'null' => true) //\u2190 null\u3092\u8a31\u5bb9\n        ));\n    }\n\n    public function down()\n    {\n    \\DBUtil::modify_fields('members', array(\n            'member_id' => array('name' => 'member_id', 'type' => 'varchar', 'constraint' => 32)\n        ));\n    }\n}\n\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ oil r migrate\nPerformed migrations for app:default:\n002_rename_field_member_id_to_member_id_in_members\n\n\u3053\u306e\u72b6\u614b\u3067\u3001\u5148\u307b\u3069\u306etests/model/member.php\u3092\u4fee\u6b63\u3057\u3001member_id\u3092\u8a2d\u5b9a\u3057\u306a\u3044\u3067\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\nfuel/app/tests/model/member.php\nclass Test_Model_Member extends \\TestCase\n{\n  public function test_create_member(){\n    $count = count(Model_Member::find(\"all\"));\n\n    $member = Model_Member::forge(array(\n      // 'member_id' => \"member_id\", \u2190 member_id\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n      'password' => 'password',\n    ));\n\n    $member->save();\n\n    $update_count = count(Model_Member::find(\"all\"));\n\n    $this->assertEquals($count+1,$update_count);\n\n  }\n}\n\n\nmembers\u30c6\u30fc\u30d6\u30eb\u306fmember_id\u306fnull\u3092\u8a31\u5bb9\u3057\u307e\u3059\u304c\u3001member\u30e2\u30c7\u30eb\u306emember_id\u306frequired\u306a\u306e\u3067\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u306b\u306a\u308b\u306f\u305a\u3002\n$ php oil test\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/core/phpunit.xml\n\n...............................................................  63 / 376 ( 16%)\n............................................................... 126 / 376 ( 33%)\n............................................................... 189 / 376 ( 50%)\n............................................................... 252 / 376 ( 67%)\n............................................................... 315 / 376 ( 83%)\n.............................................................\n\nTime: 440 ms, Memory: 19.75Mb\n\nOK (376 tests, 448 assertions)\n\n\u30d5\u30a1\u30c3\uff1f\uff01\n\u30c6\u30fc\u30d6\u30eb\u3092\u898b\u3066\u307f\u308b\u3068\u30fb\u30fb\nmysql> select * from members;\n+----+-----------+----------+------------+------------+\n| id | member_id | password | created_at | updated_at |\n+----+-----------+----------+------------+------------+\n|  1 | member_id | password | 1405664980 | 1405664980 |\n|  2 | member_id | password | 1405664990 | 1405664990 |\n|  3 | member_id | password | 1405664998 | 1405664998 |\n|  4 | NULL      | password | 1405665773 | 1405665773 |\u2190 \uff1f\uff01\n+----+-----------+----------+------------+------------+\n\n\u5b9f\u306ffuelPHP\u306f\u30e2\u30c7\u30eb\u3068\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u304c\u7d10\u3065\u3044\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u3053\u306e\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u3067\u306f\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u304c\u30c1\u30a7\u30c3\u30af\u3067\u304d\u307e\u305b\u3093\u3002ORM\u306e$_properties\u306b\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3057\u3001Fieldset::add_model\u3057\u305f\u30e2\u30c7\u30eb\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u30e2\u30c7\u30eb\u3068\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3001\u30d5\u30a9\u30fc\u30e0\u3092\u7d10\u3065\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u304c\u3001\u4eca\u56de\u306fscaffold\u3057\u305f\u30bd\u30fc\u30b9\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u30e2\u30c7\u30eb\u3068\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u304c\u7d10\u3065\u3044\u3066\u3044\u307e\u305b\u3093\u3002\nmember\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u8a18\u8ff0\u304b\u3089\u3082\u305d\u306e\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\nfuel/app/classes/controller/member.php\n\n    public function action_create()\n    {\n        if (Input::method() == 'POST')\n        {\n            $val = Model_Member::validate('create');\n\n            if ($val->run())\u3000//\u2190\u3053\u3053\u3067\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u5b9f\u884c\n            {\n                $member = Model_Member::forge(array(\n                    'member_id' => Input::post('member_id'),\n                    'password' => Input::post('password'),\n                ));\n\n                if ($member and $member->save())\u3000//\u2190\u30e2\u30c7\u30eb\u4fdd\u5b58\n                {\n                    Session::set_flash('success', 'Added member #'.$member->id.'.');\n\n                    Response::redirect('member');\n                }\n\n                else\n                {\n                    Session::set_flash('error', 'Could not save member.');\n                }\n            }\n            else\n            {\n                Session::set_flash('error', $val->error());\n            }\n        }\n\n        $this->template->title = \"Members\";\n        $this->template->content = View::forge('member/create');\n\n    }\n\n\n\u3067\u306ffuelPHP\u3067\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306e\u5358\u4f53\u30c6\u30b9\u30c8\u3092\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308b\u304b\uff1f\n\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u5c02\u7528\u306e\u30c6\u30b9\u30c8\u3092\u5225\u9014\u7528\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nfuel/app/tests/model/member.php\n //\u30c6\u30b9\u30c8\u8ffd\u52a0\n  public function test_validation_member(){\n\n    $val = Model_Member::validate('create');\n\n    $member = array(\n      'password' => 'password',\n    );\n\n    $res = $val->run($member);\n\n    $this->assertEquals($res,false);\n  }\n\n\n\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ php oil test\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/core/phpunit.xml\n\n...............................................................  63 / 377 ( 16%)\n............................................................... 126 / 377 ( 33%)\n............................................................... 189 / 377 ( 50%)\n............................................................... 252 / 377 ( 66%)\n............................................................... 315 / 377 ( 83%)\n..............................................................\n\nTime: 443 ms, Memory: 19.75Mb\n\nOK (377 tests, 449 assertions)\n\n\u30e2\u30c7\u30eb\u306e\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u306b\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u542b\u3081\u308b\u306e\u304c\u6b63\u3057\u3044\u306e\u304b\u3069\u3046\u304b\u306f\u3055\u3066\u304a\u304d\u3001\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306e\u30c1\u30a7\u30c3\u30af\u3068\u30e2\u30c7\u30eb\u306e\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30c6\u30b9\u30c8\n\u6b21\u306b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u3054\u3068\u306e\u6a5f\u80fd\u30c6\u30b9\u30c8\u3092\u884c\u3044\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u524d\u6e96\u5099\nfuelPHP\u754c\u9688\u3067\u306f\u6709\u540d\u306a\u8a71\u3089\u3057\u3044\u306e\u3067\u3059\u304c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30bd\u30fc\u30b9\u3060\u3068\u3001\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u6642\u306bexit\u3055\u308c\u3066\u3057\u307e\u3063\u3066unitTest\u3054\u3068\u7d42\u4e86\u3059\u308b\u306e\u3067\u30c6\u30b9\u30c8\u304c\u3046\u307e\u304f\u52d5\u3044\u3066\u304f\u308c\u307e\u305b\u3093\u3002\n\u305f\u3081\u3057\u306b\u5b58\u5728\u3057\u306a\u3044id\u3067view\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u547c\u3073\u51fa\u3059\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\n\nfuel/app/tests/controller/member.php\n<?php\n/**\n * Controller Post class tests\n * \n * @group Controller\n * @group Member\n */\n\nclass Test_Controller_Member extends \\TestCase\n{\n  public function test_create_member(){\n    $response = Request::forge('member/view')\n      ->set_method('GET')\n      ->execute([\"id\"=>100])\n      ->response();\n  }\n}\n\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ php oil test group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/core/phpunit.xml\n\n...[unko@localhost sample]$\n\n\u30c6\u30b9\u30c8\u81ea\u4f53\u304c\u9014\u4e2d\u3067\u7d42\u4e86\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\u3053\u308c\u3067\u306f\u30c6\u30b9\u30c8\u306b\u306a\u3089\u306a\u3044\u306e\u3067\u3001\u56de\u907f\u3059\u308b\u305f\u3081\u306e\u30d5\u30c3\u30af\u7528\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u30d5\u30c3\u30af\u30d1\u30c3\u30b1\u30fc\u30b8\u306f\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\nFuelPHP\u3010\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3011-- \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u30c6\u30b9\u30c8\u306e\u65b9\u6cd5 --\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30c6\u30b9\u30c8\u306e\u307f\u304c\u4f7f\u7528\u3059\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\noil\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u3072\u306a\u5f62\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ oil g package my\n        Creating file: /home/unko/sample/fuel/packages/my/classes/my.php\n        Creating file: /home/unko/sample/fuel/packages/my/config/my.php\n        Creating file: /home/unko/sample/fuel/packages/my/bootstrap.php\n\nclasses/my.php\u3092\u958b\u304d\u3001redirect\u30e1\u30bd\u30c3\u30c9\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u307e\u3059\u3002\n\nfuel/packages/classes/my.php\n<?php\n\nnamespace My;\n\nclass MyException extends \\FuelException {}\n\nclass Response extends \\Fuel\\Core\\Response\n{\n    /**\n     * Override Fuel\\Core\\Response redirect method\n     *\n     * @param   string  $url     The url\n     * @param   string  $method  The redirect method\n     * @param   int     $code    The redirect status code\n     *\n     * @return  void\n     */\n    public static function redirect($url = '', $method = 'location', $code = 302)\n    {\n        $response = new static;\n        $response->set_status($code);\n\n        if (strpos($url, '://') === false)\n        {\n            $url = $url !== '' ? \\Uri::create($url) : \\Uri::base();\n        }\n\n        strpos($url, '*') !== false and $url = \\Uri::segment_replace($url);\n\n        if ($method == 'location')\n        {\n            $response->set_header('Location', $url);\n        }\n        elseif ($method == 'refresh')\n        {\n            $response->set_header('Refresh', '0;url='.$url);\n        }\n        else\n        {\n            return;\n        }\n\n        if (\\Fuel\\Core\\Fuel::$env != 'test')\n        {\n            $response->send(true);\n            exit;\n        }\n\n        $response->send(true);\n    }\n}\n\n\n\u5408\u308f\u305b\u3066bootstrap.php\u3082\u4fee\u6b63\u3057\u307e\u3059\u3002\n\nfuel/packages/bootstrap.php\n<?php\n\nAutoloader::add_core_namespace('My');\n\nAutoloader::add_classes(array(\n    'My\\\\Response' => __DIR__ . '/classes/my.php',\n    'My\\\\MyException' => __DIR__ . '/classes/my.php',\n\n));\n\n\n\u3053\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u306fcore\u306e\u6319\u52d5\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3059\u308b\u306e\u3067\u3001\u672c\u756a\u74b0\u5883\u306b\u306f\u542b\u3081\u305a\u3001config.php\u306ealways_load\u306b\u306f\u542b\u3081\u305a\u3001\u30c6\u30b9\u30c8\u74b0\u5883\u306e\u307f\u3067\u4f7f\u7528\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nPHPUnit\u306e\u307fmy\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f7f\u7528\u3055\u305b\u308b\u3088\u3046\u306bbootstrap_phpunit.php\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7528\u306b\u30b3\u30d4\u30fc\u3057\u3001\u305d\u308c\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\n$ cp fuel/core/bootstrap_phpunit.php fuel/app/tests/\n\n\nfuel/app/tests/bootstrap_phpunit.php\n// \u672b\u5c3e\u306b\u8ffd\u52a0\nPackage::load('my');\n\n\nphpunit.xml\u3082\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5c02\u7528\u306e\u3082\u306e\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n$ cp fuel/core/phpunit.xml  fuel/app/\n\n\nfuel/app/phpunit.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<phpunit colors=\"true\" stopOnFailure=\"false\" bootstrap=\"./tests/bootstrap_phpunit.php\"> \u2190 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5c02\u7528\u306ebootstrap_phpunit.php\u306b\u5909\u66f4\n    <php>\n        <server name=\"doc_root\" value=\"fuel/public\"/>\n        <server name=\"app_path\" value=\"fuel/app\"/>\n        <server name=\"core_path\" value=\"fuel/core\"/>\n        <server name=\"package_path\" value=\"fuel/packages\"/>\n        <server name=\"vendor_path\" value=\"fuel/vendor\"/>\n        <server name=\"FUEL_ENV\" value=\"test\"/>\n    </php>\n    <testsuites>\n        <testsuite name=\"core\">\n            <directory suffix=\".php\">../core/tests</directory>\n        </testsuite>\n        <testsuite name=\"packages\">\n            <directory suffix=\".php\">../packages/*/tests</directory>\n        </testsuite>\n        <testsuite name=\"app\">\n            <directory suffix=\".php\">../app/tests</directory>\n        </testsuite>\n        <testsuite name=\"modules\">\n            <directory suffix=\".php\">../app/modules/*/tests</directory>\n        </testsuite>\n    </testsuites>\n</phpunit>\n\n\n\u30c6\u30b9\u30c8\u3092\u518d\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ php oil test group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/core/phpunit.xml\n\n....\n\nTime: 253 ms, Memory: 16.00Mb\n\nOK (3 tests, 0 assertions)\n\n\u4eca\u5ea6\u306f\u6b63\u5e38\u306b\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\n\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3068\u306f\u76f4\u63a5\u95a2\u4fc2\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u30c6\u30b9\u30c8\u304b\u3089\u547c\u3073\u51fa\u3055\u308c\u308bView\u306f\u306a\u305c\u304bAsset\u30af\u30e9\u30b9\u304c\u52d5\u3044\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u3001\u30d1\u30b9\u89e3\u6c7a\u306e\u30a8\u30e9\u30fc\u8868\u793a\u3092\u7121\u52b9\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nfuel/core/config/asset.php\n    'fail_silently' => true,\u3000\u2190 doc_root\u304c\u6b63\u3057\u304f\u6307\u5b9a\u3055\u308c\u3066\u3044\u308c\u3070\u3053\u306e\u51e6\u7406\u306f\u4e0d\u8981\n\n\nphpunit.xml\u306edoc_root\u304c\u8aa4\u3063\u3066\u3044\u305f\u305f\u3081\u767a\u751f\u3057\u3066\u307e\u3057\u305f\u3002doc_root\u3092\u6b63\u3057\u304ffuel/public\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308c\u3070\u3053\u306e\u7b87\u6240\u306f\u4e0d\u8981\u3067\u3059\u3002\n\nview\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30c6\u30b9\u30c8\u3092\u884c\u3046\n\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u3066\u3082\u30c6\u30b9\u30c8\u304c\u7d42\u4e86\u3057\u306a\u304f\u306a\u3063\u305f\u306e\u3067\u3001view\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u547c\u3073\u51fa\u3057\u3001\u5b58\u5728\u3057\u3066\u3044\u308bID\u306a\u3089\u3070\u8a73\u7d30\u753b\u9762\u3092\u3001\u305d\u3046\u3067\u306a\u3051\u308c\u3070\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\u3002\n\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\nfuel/app/tests/controller/member.php\n  public function test_view_member(){\n    $response = Request::forge('member/view')\n      ->set_method('GET')\n      ->execute([\"id\" => 1]) //\u2190 \u5b58\u5728\u3059\u308bID\u306b\n      ->response();\n\n    $this->assertTag(array('tag' => 'span','class' => 'muted', 'content' =>'#1'),$response->body->__toString()); //\u2190 \u5b58\u5728\u3059\u308b\u5834\u5408\u3001\u8868\u793a\u3055\u308c\u308b\u3079\u304dHTML\u30bf\u30b0\u306e\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3\n  }  \n\n\nassertTag\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3044\u3001\u6b63\u5e38\u7cfb\u3067\u3042\u308c\u3070\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u306e\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\u304cHTML\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u304b\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ php oil test group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/core/phpunit.xml\n\n....\n\nTime: 246 ms, Memory: 16.25Mb\n\nOK (3 tests, 1 assertion)\n\n\u6210\u529f\u3057\u307e\u3057\u305f\u3002\n\u6b21\u306b\u3001DB\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u306a\u3044id\u3067member\u306eview\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u5834\u5408\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\u3002\nmember\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306f\u3001\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u304c\u767a\u751f\u3059\u308b\u3068template\u306b\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u8a2d\u5b9a\u305b\u305a\u306b\u7d42\u4e86\u3059\u308b\u305f\u3081\u3001assertTags\u306b\u3088\u308b\u30c1\u30a7\u30c3\u30af\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n\u306a\u306e\u3067\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u305f\u304b\u3069\u3046\u304b\u3092\u5224\u5b9a\u3059\u308b\u305f\u3081\u306e\u5c02\u7528\u30d7\u30ed\u30d1\u30c6\u30a3\u3092my.php\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nfuel/packages/my/classes/my.php\n<?php\n\nnamespace My;\n\nclass MyException extends \\FuelException {}\n\nclass Response extends \\Fuel\\Core\\Response\n{\n    /**\n     * Override Fuel\\Core\\Response redirect method\n     *\n     * @param   string  $url     The url\n     * @param   string  $method  The redirect method\n     * @param   int     $code    The redirect status code\n     *\n     * @return  void\n     */\n    public static function redirect($url = '', $method = 'location', $code = 302)\n    {\n        $response = new static;\n        $response->set_status($code);\n\n        if (strpos($url, '://') === false)\n        {\n            $url = $url !== '' ? \\Uri::create($url) : \\Uri::base();\n        }\n\n        strpos($url, '*') !== false and $url = \\Uri::segment_replace($url);\n\n        if ($method == 'location')\n        {\n            $response->set_header('Location', $url);\n        }\n        elseif ($method == 'refresh')\n        {\n            $response->set_header('Refresh', '0;url='.$url);\n        }\n        else\n        {\n            return;\n        }\n\n        //\u30c6\u30b9\u30c8\u3067\u306f\u306a\u3044\u5834\u5408\u306fexit\u3092\u5b9f\u884c\n        if (\\Fuel\\Core\\Fuel::$env != 'test')\n        {\n            $response->send(true);\n            exit;\n        }\n\n    Response::$redirect_status = $code; //\u2190\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306e$code\u3092\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30e1\u30f3\u30d0\u306b\u4ee3\u5165\n    Response::$redirect_url = $url; //\u2190\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306e$url\u3092\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30e1\u30f3\u30d0\u306b\u4ee3\u5165\n        $response->send(true);\n    }\n\n    private static $redirect_status = null;// \u2190 \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u6642\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e\u30e1\u30f3\u30d0\u3092\u8ffd\u52a0\n    private static $redirect_url =\"\"; //\u2190 \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u6642\u306eURL\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e\u30e1\u30f3\u30d0\u3092\u8ffd\u52a0\n\n    public static function get_redirect_status(){ //\u2190 \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u6642\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e\u30b2\u30c3\u30bf\u30fc\n      return Response::$redirect_status;\n    }\n\n    public static function get_redirect_url(){ //\u2190 \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u6642\u306eURL\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e\u30b2\u30c3\u30bf\u30fc\n      return Response::$redirect_url;\n    }\n}\n\n\n\u5b58\u5728\u3057\u306a\u3044\u30e1\u30f3\u30d0ID\u3092\u6307\u5b9a\u3057\u3001member_index\u3078\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nfuel/php/tests/controller/member.php\n\n// \u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\n  public function test_view_member_was_nothing(){\n    $response = Request::forge('member/view')\n      ->set_method('GET')\n      ->execute([\"id\" => 999999])\n      ->response();\n\n    $this->assertEquals(\"302\",Response::get_redirect_status()); //\u2190 \u8ffd\u52a0\u3057\u305f\u5c02\u7528\u30e1\u30bd\u30c3\u30c9\u3067\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u30c1\u30a7\u30c3\u30af\n    $this->assertEquals(\"member\",Response::get_redirect_url());//\u2190 \u5c02\u7528\u30e1\u30bd\u30c3\u30c9\u3067\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u5148\u306eURL\u3092\u30c1\u30a7\u30c3\u30af\n  }\n\n\n\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ oil t group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/app/phpunit.xml\n\n....\n\nTime: 278 ms, Memory: 17.50Mb\n\nOK (5 tests, 3 assertions)\n\n\u6210\u529f\u3057\u307e\u3057\u305f\u3002\n\u3053\u3053\u307e\u3067\u3067\u3001\u5b58\u5728\u3059\u308bID\u304c\u3042\u3063\u305f\u5834\u5408\u306fmember\u8a73\u7d30\u3092\u3001\u306a\u3051\u308c\u3070\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u308b\u3068\u3053\u308d\u307e\u3067\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u30c6\u30b9\u30c8\u304c\u3067\u304d\u305f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\nisnert\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30c6\u30b9\u30c8\u3092\u884c\u3046\n\u4eca\u5ea6\u306f\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u7d4c\u7531\u3067member\u3092\u65b0\u898f\u767b\u9332\u3057\u3001\u8aa4\u3063\u305f\u5024\u304c\u5165\u529b\u3055\u308c\u305f\u3089\u30a8\u30e9\u30fc\u306b\u306a\u308b\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\u3002\nmember\u8ffd\u52a0\u306e\u6b63\u5e38\u7cfb\u30c6\u30b9\u30c8\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\nfuel/app/tests/controller/member.php\n  // insert\u306e\u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\n  public function test_create_member(){\n    $count = count(Model_Member::find(\"all\"));\n\n    $_POST[\"member_id\"] = \"test_user\"; //\u2190 \u5165\u529b\u5024\u3092$_POST\u3067\u76f4\u63a5\u6307\u5b9a\n    $_POST[\"password\"] = \"password\";\n\n    $response = Request::forge('member/create')\n      ->set_method('POST')\n      ->execute()\n      ->response();\n\n    $this->assertTag(array('tag' => 'strong', 'content' =>'Success'),$response->body->__toString()); //\u2190 \u6b63\u5e38\u7d42\u4e86\u6642\u306e\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\n    $this->assertEquals($count+1,count(Model_Member::find(\"all\"))); //\u2190 insert\u304c\u5b9f\u884c\u3055\u308c\u3001\u30ec\u30b3\u30fc\u30c9\u304c1\u4ef6\u8ffd\u52a0\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\n  }\n\n\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ oil t group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/app/phpunit.xml\n\n......\n\nTime: 274 ms, Memory: 17.50Mb\n\nOK (6 tests, 5 assertions)\n\n\u6b63\u5e38\u306b\u7d42\u4e86\u3057\u307e\u3057\u305f\u3002\n\u4eca\u5ea6\u306f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u672a\u5165\u529b\u3068\u3057\u3001\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u306b\u306a\u308b\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\nfuel/app/tests/controller/member.php\n  // \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\n  public function test_create_member_error(){\n    $count = count(Model_Member::find(\"all\"));\n\n    $_POST[\"member_id\"] = \"test_user\";\n    // \u308f\u3056\u3068password\u3092\u6307\u5b9a\u3057\u306a\u3044\n\n    $response = Request::forge('member/create')\n      ->set_method('POST')\n      ->execute()\n      ->response();\n\n    $this->assertTag(array('tag' => 'strong', 'content' =>'Error'),$response->body->__toString());\n    $this->assertEquals($count,count(Model_Member::find(\"all\")));\n  }\n\n\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ oil t group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/app/phpunit.xml\n\n......E\n\nTime: 276 ms, Memory: 17.50Mb\n\nThere was 1 error:\n\n1) Test_Controller_Member::test_create_member_error\nDomainException: Form instance already exists, cannot be recreated. Use instance() instead of forge() to retrieve the existing instance.\n\n/home/unko/sample/fuel/core/classes/validation.php:57\n/home/unko/sample/fuel/app/classes/model/member.php:27\n/home/unko/sample/fuel/app/classes/controller/member.php:32\n/home/unko/sample/fuel/core/classes/request.php:444\n/home/unko/sample/fuel/app/tests/controller/member.php:51\n\nFAILURES!\nTests: 7, Assertions: 5, Errors: 1.\n\n\u4f8b\u5916\u304c\u767a\u751f\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8a73\u3057\u304f\u898b\u3066\u307f\u307e\u3059\u3002\nDomainException: Form instance already exists, cannot be recreated. Use instance() instead of forge() to retrieve the existing instance.\n\n/home/unko/sample/fuel/core/classes/validation.php:57\n/home/unko/sample/fuel/app/classes/model/member.php:27\n\n\u9759\u7684\u547c\u3073\u51fa\u3057\u3092\u3057\u305f\u3064\u3082\u308a\u304c\u3001instance\u3092\u4f7f\u7528\u3057\u308d\u3068\u8a00\u308f\u308c\u308b\u306e\u3082\u3061\u3087\u3063\u3068\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3093\u3067\u3059\u304c\u3001fuelPHP\u3067\u306fcore\u306evalidation.php\u3068\u3001\u305d\u308c\u304c\u4f9d\u5b58\u3057\u3066\u3044\u308bfieldset.php\u3067\u9045\u5ef6\u9759\u7684\u675f\u7e1b\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u500b\u6240\u304c\u3042\u308a\u3001\u9023\u7d9a\u3057\u3066validation\u3092run\u3059\u308b\u30c6\u30b9\u30c8\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u4ee5\u524d\u306bnew static\u3057\u305f\u30af\u30e9\u30b9\u304c\u521d\u671f\u5316\u3055\u308c\u305a\u3001\u4f8b\u5916\u3092\u767a\u751f\u3055\u305b\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u3053\u308c\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u306b\u3001\u9045\u5ef6\u9759\u7684\u675f\u7e1b\u3055\u308c\u3066\u3044\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u521d\u671f\u5316\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u3068\u3053\u308d\u3067new static\u3063\u3066\u8a18\u8ff0\u3001\u3061\u3087\u3063\u3068\u9055\u548c\u611f\u304c\u3042\u308b\u3093\u3067\u3059\u304c\u3053\u308c\u3063\u3066\u666e\u901a\u306a\u3093\u3067\u3059\u304b\u306d\u3002\n\nfuel/packages/my/classes/fieldset_ex.php\n<?php\n\nnamespace My;\n\nclass Fieldset extends \\Fuel\\Core\\Fieldset {\n  //fieldset\u306e$_instances\u3092\u521d\u671f\u5316\u3059\u308b\u30e1\u30bd\u30c3\u30c9\n  public static function reset(){\n    parent::$_instances = array();\n  }\n}\n\n\nmy\u30d1\u30c3\u30b1\u30fc\u30b8\u306ebootstrap.php\u306bfieldset_ex.php\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nfuel/packages/my/bootstrap.php\n<?php\n\nAutoloader::add_core_namespace('My');\n\nAutoloader::add_classes(array(\n    'My\\\\Response' => __DIR__ . '/classes/my.php',\n    'My\\\\MyException' => __DIR__ . '/classes/my.php',\n    'My\\\\Fieldset' => __DIR__ . '/classes/fieldset_ex.php', //\u2190 \u8ffd\u52a0\n));\n\n\n\u30c6\u30b9\u30c8test_create_member_error\u306eRequest::execute()\u3088\u308a\u3082\u524d\u306bFieldset::reset()\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nfuel/app/tests/controller/member.php\n  public function test_create_member_error(){\n\n    Fieldset::reset(); //\u2190\u8ffd\u52a0\n\n    $count = count(Model_Member::find(\"all\"));\n\n    $_POST[\"member_id\"] = \"test_user2\";\n\n    $response = Request::forge('member/create')\n      ->set_method('POST')\n      ->execute()\n      ->response();\n\n    $this->assertTag(array('tag' => 'strong', 'content' =>'Error'),$response->body->__toString());\n    $this->assertEquals($count,count(Model_Member::find(\"all\")));\n  }\n\n\n\u30c6\u30b9\u30c8\u3092\u518d\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ oil t group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/app/phpunit.xml\n\n......E\n\nTime: 290 ms, Memory: 17.50Mb\n\nThere was 1 error:\n\n1) Test_Controller_Member::test_create_member_error\nFuel\\Core\\Database_Exception: SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'password' cannot be null with query: \"INSERT INTO `members` (`member_id`, `password`, `created_at`, `updated_at`) VALUES ('test_user2', null, 1406185977, 1406185977)\"\n\n/home/unko/sample/fuel/core/classes/database/pdo/connection.php:270\n/home/unko/sample/fuel/core/classes/database/pdo/connection.php:237\n/home/unko/sample/fuel/core/classes/database/query.php:287\n/home/unko/sample/fuel/packages/orm/classes/query.php:1424\n/home/unko/sample/fuel/packages/orm/classes/model.php:1357\n/home/unko/sample/fuel/packages/orm/classes/model.php:1301\n/home/unko/sample/fuel/app/classes/controller/member.php:41\n/home/unko/sample/fuel/core/classes/request.php:444\n/home/unko/sample/fuel/app/tests/controller/member.php:53\n\nCaused by\nPDOException: SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'password' cannot be null\n\n/home/unko/sample/fuel/core/classes/database/pdo/connection.php:237\n/home/unko/sample/fuel/core/classes/database/query.php:287\n/home/unko/sample/fuel/packages/orm/classes/query.php:1424\n/home/unko/sample/fuel/packages/orm/classes/model.php:1357\n/home/unko/sample/fuel/packages/orm/classes/model.php:1301\n/home/unko/sample/fuel/app/classes/controller/member.php:41\n/home/unko/sample/fuel/core/classes/request.php:444\n/home/unko/sample/fuel/app/tests/controller/member.php:53\n\nFAILURES!\nTests: 7, Assertions: 5, Errors: 1.\n\n\u4eca\u5ea6\u306fINSERT\u306eNULL\u5236\u7d04\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\nfieldset\u306einstances\u3092\u521d\u671f\u5316\u3057\u3066\u3082fieldset\u304c\u5185\u90e8\u3067\u4f7f\u7528\u3057\u3066\u3044\u308b$input\u3082\u9045\u5ef6\u9759\u7684\u675f\u7e1b\u3068\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001$input\u3068$_POST\u306e\u5185\u5bb9\u306b\u30a2\u30f3\u30de\u30c3\u30c1\u304c\u767a\u751f\u3057\u3001\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u901a\u904e\u3057\u3066SQL\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3088\u3046\u3067\u3059\u3002\n\u3053\u308c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u3001$input\u3092\u30ea\u30bb\u30c3\u30c8\u3059\u308b\u305f\u3081\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u305f\u3060\u3057fuelPHP\u306ecore/Input\u30af\u30e9\u30b9\u306f\u62e1\u5f35\u3067\u304d\u306a\u3044\u306e\u3067\u3001Input\u3092\u7d99\u627f\u3057\u305fInputEX\u30af\u30e9\u30b9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nfuel/packages/my/classes/input_ex.php\n<?php\n\nnamespace My;\n\nclass InputEX extends \\Fuel\\Core\\Input {\n  public static function reset(){\n    parent::$input = null;\n  }\n}\n\n\nmy\u30d1\u30c3\u30b1\u30fc\u30b8\u306ebootstrap.php\u306binput_ex.php\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nfuel/packages/my/bootstrap.php\n<?php\n\nAutoloader::add_core_namespace('My');\n\nAutoloader::add_classes(array(\n    'My\\\\Response' => __DIR__ . '/classes/my.php',\n    'My\\\\MyException' => __DIR__ . '/classes/my.php',\n    'My\\\\Fieldset' => __DIR__ . '/classes/fieldset_ex.php',\n    'My\\\\InputEx' => __DIR__ . '/classes/input_ex.php', //\u2190 \u8ffd\u52a0\n\n));\n\n\n\u30c6\u30b9\u30c8test_create_member_error\u306bInputEx::reset()\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nfuel/app/tests/controller/member.php\n  public function test_create_member_error(){\n\n    InputEx::reset(); //\u2190 \u8ffd\u52a0\n    Fieldset::reset();\n\n    $count = count(Model_Member::find(\"all\"));\n\n    $_POST[\"member_id\"] = \"test_user2\";\n\n    $response = Request::forge('member/create')\n      ->set_method('POST')\n      ->execute()\n      ->response();\n\n    $this->assertTag(array('tag' => 'strong', 'content' =>'Error'),$response->body->__toString());\n    $this->assertEquals($count,count(Model_Member::find(\"all\")));\n  }\n\n\n\n\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ oil t group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/app/phpunit.xml\n\n.......\n\nTime: 278 ms, Memory: 17.75Mb\n\nOK (7 tests, 7 assertions)\n\n\u901a\u308a\u307e\u3057\u305f\uff01\n\u3053\u306e\u72b6\u614b\u3060\u3068\u30c6\u30b9\u30e1\u30bd\u30c3\u30c9\u3059\u3079\u3066\u306breset\u306e\u547c\u3073\u51fa\u3057\u3092\u8a18\u8ff0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u3042\u307e\u308a\u3044\u3051\u3066\u306a\u3044\u306e\u3067setUp()\u30e1\u30bd\u30c3\u30c9\u3067\u51e6\u7406\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\nfuel/app/tests/controller/member.php\n\n  //setUp\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\n  protected function setUp(){\n    Session::destroy(); //\u2190 \u3064\u3044\u3067\u306b\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u521d\u671f\u5316\u3082\u8ffd\u52a0\n    Request::reset_request(true); //\u2190 \u3064\u3044\u3067\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u521d\u671f\u5316\u3082\u8ffd\u52a0\n    InputEx::reset();\n    Fieldset::reset();\n  }\n\n\n\u3053\u308c\u3067\u30a4\u30f3\u30b5\u30fc\u30c8\u3001\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3001\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30c6\u30b9\u30c8\u304c\u3067\u304d\u308b\u74b0\u5883\u304c\u6574\u3044\u307e\u3057\u305f\uff01\n\nedit\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30c6\u30b9\u30c8\u3092\u884c\u3046\n\u7d9a\u3044\u3066\u65e2\u5b58\u306e\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u66f4\u65b0\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\u3002\n\u65e2\u5b58\u30c7\u30fc\u30bf\u306e\u66f4\u65b0\u30c6\u30b9\u30c8\u3092\u884c\u3046\u305f\u3081\u306b\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u65e2\u5b9a\u306e\u72b6\u614b\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001fuelPHP\u304a\u3088\u3073PHPUnit\u306b\u306f\u305d\u306e\u3088\u3046\u306a\u6a5f\u80fd\u304c\u3042\u308a\u307e\u305b\u3093\u3002\n\u3057\u304b\u3057\u306a\u304c\u3089FuelPHP \u3067\u306e PHPUnit \u306b\u3088\u308b\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u3067\u30d5\u30a3\u30af\u30b9\u30c1\u30e3\u6a5f\u80fd\u3092\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u65b9\u304c\u3044\u307e\u3059\u306e\u3067\u3001\u3053\u308c\u3092\u4f7f\u308f\u305b\u3066\u3082\u3089\u3044\u307e\u3059\u3002\nFuelPHP \u3067\u306e PHPUnit \u306b\u3088\u308b\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u306e\u624b\u9806\u306b\u6cbf\u3063\u3066dbfixt\u30bf\u30b9\u30af\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3057\u3001\u65e2\u5b58\u306e\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30d5\u30a3\u30af\u30b9\u30c1\u30e3\u30c7\u30fc\u30bf\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n$ oil r dbfixt:generate members\n\n\u6210\u529f\u3059\u308b\u3068fuel/app/tests/fixture\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30c6\u30fc\u30d6\u30eb\u540d_fixt.yml\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\nfuel/app/tests/fixture/members_fixt.yml\n---\n- \n  id: 1\n  member_id: member_id\n  password: password\n  created_at: 1405664980\n  updated_at: 1405664980\n- \n  id: 2\n  member_id: member_id\n  password: password\n  created_at: 1405664990\n  updated_at: 1405664990\n- \n  id: 3\n  member_id: member_id\n  password: password\n  created_at: 1405664998\n  updated_at: 1405664998\n\n\n\u540c\u69d8\u306b\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u5185\u306e$tables\u3067\u6307\u5b9a\u3055\u308c\u305f\u30c6\u30fc\u30d6\u30eb\u306e\u30c7\u30fc\u30bf\u3092yml\u306e\u5185\u5bb9\u3067\u66f4\u65b0\u3059\u308b\u305f\u3081\u30af\u30e9\u30b9\u3092fuel/app/classes/dbtestcase.php\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u6bce\u30c6\u30b9\u30c8\u5b9f\u884c\u6642\u306bmembers\u30c6\u30fc\u30d6\u30eb\u3092members_fixt.yml\u306e\u5185\u5bb9\u3067\u884c\u4f7f\u3059\u308b\u305f\u3081\u3001\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\n\nfuel/app/tests/controller/member.php\n<?php\n/**\n * Controller Post class tests\n * \n * @group Controller\n * @group Member\n */\nclass Test_Controller_Member extends \\DbTestCase\u3000//\u2190 \u7d99\u627f\u5143\u3092DbTestCase\u306b\u5909\u66f4\n{\n\n  protected $tables = ['members' => 'members']; //\u2190 fixture.yml\u306e\u5185\u5bb9\u3067\u66f4\u65b0\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u3092\u8a18\u8ff0\n\n  protected function setUp(){\n    Request::reset_request(true);\n    InputEx::reset();\n    Fieldset::reset();\n    parent::setUp(); //\u2190 DbTestCase\u306esetUp()\u3092\u30b3\u30fc\u30eb\u3059\u308b\u305f\u3081\u306b\u8ffd\u52a0\n  }\n\n\n\u3053\u308c\u3067\u6bce\u56de\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u524d\u306bmembers\u30c6\u30fc\u30d6\u30eb\u306e\u30c7\u30fc\u30bf\u304cmembers_fixt.yml\u306e\u5185\u5bb9\u3067\u30ea\u30bb\u30c3\u30c8\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u53d6\u5f97\u3057\u305f\u30c7\u30fc\u30bf\u3092\u66f4\u65b0\u3059\u308b\u30c6\u30b9\u30c8\u3068\u3001\u66f4\u65b0\u306b\u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\nfuelPHP\u306eORM\u30e2\u30c7\u30eb\u306f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u5909\u66f4\u5f8c\u306e\u30ec\u30b3\u30fc\u30c9\u306fORM\u3092\u4f7f\u7528\u305b\u305a\u3001\u30af\u30a8\u30ea\u30d3\u30eb\u30c0\u3067\u53d6\u5f97\u3057\u3066\u3044\u307e\u3059\u3002\n\nfuel/app/tests/controller/member.php\n\n  //\u66f4\u65b0\u30c6\u30b9\u30c8\u3000\u6b63\u5e38\u7cfb\n  public function test_update_member(){\n\n    $update_member_id = \"test_user_updated\";\n    $id = 1;\n\n    $_POST[\"member_id\"] = $update_member_id;\n    $_POST[\"password\"] = \"password\";\n\n    $response = Request::forge('member/edit')\n      ->set_method('POST')\n      ->execute([\"id\" => $id])\n      ->response();\n\n    $updated_user = DB::select()->from(\"members\")->where(\"id\",$id)->execute(); //\u2190 \u30af\u30a8\u30ea\u30d3\u30eb\u30c0\u3092\u4f7f\u7528\n\n    $this->assertEquals($update_member_id,$updated_user[0][\"member_id\"]);\n    $this->assertEquals(\"302\",Response::get_redirect_status());\n\n  }\n\n  //\u66f4\u65b0\u30c6\u30b9\u30c8\u3000\u30a8\u30e9\u30fc\u7cfb\n  public function test_update_member_error(){\n\n    $update_member_id = \"test_user_updated\";\n    $id = 3;\n\n    $_POST[\"member_id\"] = $update_member_id;\n    $_POST[\"password\"] = \"123456789012345678901234567890123\";\n\n    $response = Request::forge('member/edit')\n      ->set_method('POST')\n      ->execute([\"id\" => $id])\n      ->response();\n\n    $updated_user = DB::select()->from(\"members\")->where(\"id\",$id)->execute(); //\u2190 \u30af\u30a8\u30ea\u30d3\u30eb\u30c0\u3092\u4f7f\u7528\n\n    $this->assertEquals(\"member_id\",$updated_user[0][\"member_id\"]);\n    $this->assertTag(array('tag' => 'strong', 'content' =>'Error'),$response->body->__toString());\n    $this->assertTag(array('tag' => 'div', 'attributes' => array('class' =>'alert'), 'descendant' => array('tag' => 'p', 'content' => 'The field Password may not contain more than 32 characters.')),$response->body->__toString());\n  }\n\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ oil t group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/app/phpunit.xml\n\n..........\n\nTime: 451 ms, Memory: 18.25Mb\n\nOK (10 tests, 12 assertions)\n\n\u901a\u308a\u307e\u3057\u305f\u3002\nassertTags\u306e\u4f7f\u7528\u306b\u3088\u308a\u3001\u30a8\u30e9\u30fc\u6587\u8a00\uff08'The field Password may not contain more than 32 characters.\uff09\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3082\u78ba\u8a8d\u3067\u304d\u3066\u3044\u307e\u3059\u3002\n\ndelete\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30c6\u30b9\u30c8\u3092\u884c\u3046\n\u6700\u5f8c\u306bDelete\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\u3002\n\u524a\u9664\u306b\u6210\u529f\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3068\u3001\u5931\u6557\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u306e\u30c6\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nfuel/app/tests/controller/member.php\n  // \u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\n  public function test_delete_member(){\n\n    $count = count(Model_Member::find(\"all\"));\n\n    $id = 1;\n\n    $response = Request::forge('member/delete')\n      ->set_method('POST')\n      ->execute([\"id\" => $id])\n      ->response();\n\n    $updated_user = DB::select()->from(\"members\")->where(\"id\",$id)->execute();\n\n    $this->assertEquals(0, count($updated_user));\n    $this->assertEquals(\"302\",Response::get_redirect_status());\n    $this->assertEquals($count - 1,count(Model_Member::find(\"all\")));\n\n  }\n\n  public function test_delete_member_error(){\n\n    $count = count(Model_Member::find(\"all\"));\n\n    $id = 100;\n\n    $response = Request::forge('member/delete')\n      ->set_method('POST')\n      ->execute([\"id\" => $id])\n      ->response();\n\n    $this->assertEquals(\"302\",Response::get_redirect_status());\n    $this->assertEquals($count, count(Model_Member::find(\"all\")));\n  }\n\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\u3000\n$ oil t group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/app/phpunit.xml\n\n............\n\nTime: 484 ms, Memory: 18.50Mb\n\nOK (12 tests, 17 assertions)\n\n\u6210\u529f\u3057\u307e\u3057\u305f\u3002\n\n\u901a\u3057\u3066\u5b9f\u884c\u3059\u308b\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3068\u30e2\u30c7\u30eb\u306e\u30c6\u30b9\u30c8\u3092\u901a\u3057\u3066\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n$ oil t\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/app/phpunit.xml\n\n...............................................................  63 / 387 ( 16%)\n............................................................... 126 / 387 ( 32%)\n............................................................... 189 / 387 ( 48%)\n............................................................... 252 / 387 ( 65%)\n............................................................... 315 / 387 ( 81%)\n............................................................... 378 / 387 ( 97%)\n.........\n\nTime: 674 ms, Memory: 21.25Mb\n\nOK (387 tests, 466 assertions)\n\n\u30c6\u30b9\u30c8\u304b\u304f\u306b\u3093\uff01\u3000\u3088\u304b\u3063\u305f\u2661\n\u3053\u308c\u3067\u3001\u30e2\u30c7\u30eb\u3068\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306eCRUD\u30c6\u30b9\u30c8\u3059\u3079\u3066\u3092PHPUnit\u306e\u307f\u3067\u5b9f\u65bd\u3067\u304d\u308b\u74b0\u5883\u304c\u69cb\u7bc9\u3067\u304d\u307e\u3057\u305f\uff01\n\n\u307e\u3068\u3081\nFuelPHP\u3067\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3046\u65b9\u6cd5\u304c\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\u3084\u308a\u65b9\u3092\u8abf\u3079\u308b\u904e\u7a0b\u3067\u3001PHP\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067Jenkins+Phing\u3067CI\u3055\u308c\u3066\u3044\u308b\u4eba\u306e\u30d6\u30ed\u30b0\u3092\u7d50\u69cb\u76ee\u306b\u3057\u307e\u3057\u305f\u304c\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\uff08\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30ca\u30eb\uff09\u30c6\u30b9\u30c8\u306e\u81ea\u52d5\u5316\u306b\u3064\u3044\u3066\u306f\u60c5\u5831\u304c\u306a\u304b\u3063\u305f\u3088\u3046\u306b\u601d\u3048\u307e\u3059\u3002\nStackOverflow\u3067\u691c\u7d22\u3057\u305f\u3089\u3001\u305d\u308cSelenium\u3067\u3067\u304d\u308b\u3088\u307f\u305f\u3044\u306a\u30b3\u30e1\u30f3\u30c8\u304c\u7d50\u69cb\u3042\u3063\u3066\u3001PHPer\u7206\u767a\u3057\u305f\u3089\u3044\u3044\u306e\u306b\u3068\u601d\u3044\u307e\u3057\u305f\u304c\u3001\u4eca\u56de\u307e\u3068\u3081\u305f\u624b\u9806\u306b\u3088\u308aPHPUnit\u306e\u307f\u3067\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30c6\u30b9\u30c8\u307e\u3067\u53ef\u80fd\u3068\u3044\u3046\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u306e\u3067\u3001\u540c\u69d8\u306e\u60a9\u307f\u3092\u6301\u3063\u3066\u308b\u4eba\u306f\u305c\u3072\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002\n\u307e\u305f\u5225\u306b\u9055\u3046\u65b9\u6cd5\u3067\u3084\u3063\u3066\u3044\u308b\u3001\u3084\u3063\u3066\u3044\u305f\u306a\u3069\u60c5\u5831\u304c\u3042\u308c\u3070\u305c\u3072\u5171\u6709\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\u3010\u8ffd\u8a18\u3011\n\u203b\u30b3\u30e1\u30f3\u30c8\u3067\u6307\u6458\u3044\u305f\u3060\u3044\u305f\u7b87\u6240\u3092\u8a02\u6b63\u3057\u307e\u3057\u305f\u3002\nfuelPHP\u3067\u30e6\u30cb\u30c3\u30c8\u30fb\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30c6\u30b9\u30c8\u3057\u3088\u3046\u3068\u601d\u3063\u305f\u3089\u610f\u5916\u306b\u60c5\u5831\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\n#\u524d\u6e96\u5099\n##PHPUnit\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e`composer.json`\u306erequire\u306bphpunit\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```json:composer.json\n    \"require\": {\n        \"php\": \">=5.3.3\",\n        \"composer/installers\": \"~1.0\",\n        \"fuel/docs\": \"1.7.2\",\n        \"fuel/core\": \"1.7.2\",\n        \"fuel/auth\": \"1.7.2\",\n        \"fuel/email\": \"1.7.2\",\n        \"fuel/oil\": \"1.7.2\",\n        \"fuel/orm\": \"1.7.2\",\n        \"fuel/parser\": \"1.7.2\",\n        \"fuelphp/upload\": \"2.0.1\",\n        \"monolog/monolog\": \"1.5.*\",\n        \"michelf/php-markdown\": \"1.4.0\",\n        \"phpunit/phpunit\": \"3.7.*\" \u2190 \u8ffd\u52a0\n    }\n```\n\n##composer\u7d4c\u7531\u3067PHPUnit\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ncomposer\u3092\u5b9f\u884c\u3057\u3066PHPUnit\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n$ php composer.phar install\n```\n\noil\u30b3\u30de\u30f3\u30c9\u304b\u3089\u5b9f\u884c\u53ef\u80fd\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```php:fuel/app/config.oil.php\n<?php\nreturn array(\n    'phpunit' => array(\n        'binary_path' => 'fuel/vendor/phpunit/phpunit/composer/bin/phpunit',\n    ),\n);\n```\n\n#\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3046\u524d\u306b\u3001\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u3092\u3084\u3063\u3066\u307f\u307e\u3059\u3002\n\n\u30e1\u30f3\u30d0\u30fc\u30e2\u30c7\u30eb\u306bID\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u30d7\u30ed\u30d1\u30c6\u30a3\u304c\u5b58\u5728\u3057\u3001\u3069\u3061\u3089\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3082**required**\u306a\u30b1\u30fc\u30b9\u3092\u8003\u3048\u307e\u3059\u3002\n\n```\n$ oil g scaffold member member_id:varchar[32] password:varchar[32]\n$ oil refine migrate\n```\n\n\u751f\u6210\u3055\u308c\u305f`member`\u30e2\u30c7\u30eb\u3092\u898b\u3066\u307f\u307e\u3059\u3002\n\n```php:fuel/app/classes/model/member.php\nuse Orm\\Model;\n\nclass Model_Member extends Model\n{\n\tprotected static $_properties = array(\n\t\t'id',\n\t\t'member_id',\n\t\t'password',\n\t\t'created_at',\n\t\t'updated_at',\n\t);\n\n\tprotected static $_observers = array(\n\t\t'Orm\\Observer_CreatedAt' => array(\n\t\t\t'events' => array('before_insert'),\n\t\t\t'mysql_timestamp' => false,\n\t\t),\n\t\t'Orm\\Observer_UpdatedAt' => array(\n\t\t\t'events' => array('before_save'),\n\t\t\t'mysql_timestamp' => false,\n\t\t),\n\t);\n\n\tpublic static function validate($factory)\n\t{\n\t\t$val = Validation::forge($factory);\n\t\t$val->add_field('member_id', 'Member Id', 'required|max_length[32]');\n\t\t$val->add_field('password', 'Password', 'required|max_length[32]');\n\n\t\treturn $val;\n\t}\n\n}\n```\n\n`member_id`\u3068`password`\u304c**required**\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n**\u203b \u5b9f\u969b\u306b\u306f\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u6697\u53f7\u5316\u3057\u306a\u3044\u3068\u30c0\u30e1\u3067\u3059\u304c\u3001\u4fbf\u5b9c\u7684\u306b\u5e73\u6587\u3068\u3057\u307e\u3059\u3002**\n\n\u3053\u306e\u72b6\u614b\u3067`member`\u306e\u30e2\u30c7\u30eb\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\n\n```php:fuel/app/tests/model/member.php\n<?php\n/**\n * Model Post class tests\n * \n * @group Model\n * @group Member\n */\n\nclass Test_Model_Member extends \\TestCase\n{\n  public function test_create_member(){\n    $count = count(Model_Member::find(\"all\"));\n\n    $member = Model_Member::forge(array(\n      'member_id' => \"member_id\",\n      'password' => 'password',\n    ));\n\n    $member->save();\n\n    $update_count = count(Model_Member::find(\"all\"));\n\n    $this->assertEquals($count+1,$update_count);\n\n  }\n}\n```\n\n\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n$ php oil test\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/core/phpunit.xml\n\n...............................................................  63 / 376 ( 16%)\n............................................................... 126 / 376 ( 33%)\n............................................................... 189 / 376 ( 50%)\n............................................................... 252 / 376 ( 67%)\n............................................................... 315 / 376 ( 83%)\n.............................................................\n\nTime: 454 ms, Memory: 19.50Mb\n\nOK (376 tests, 448 assertions)\n```\n\n\u901a\u308a\u307e\u3057\u305f\u3002\n\n\u3053\u3053\u3067\u3001\u8a66\u3057\u306b`member_id`\u306e`null`\u3092\u8a31\u5bb9\u3057\u3066\u307f\u307e\u3059\u3002\n\n`magic migration`\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308a\u307e\u3059\u3002\n\nfuelPHP\u306e`magic migration`\u306b\u306f\u3001\u30ab\u30e9\u30e0\u306e\u5c5e\u6027\u3060\u3051\u3092\u5909\u3048\u308bmigration\u304c\u306a\u3044\u306e\u3067\u3001`rename`\u306e`magic migration`\u3092\u30d9\u30fc\u30b9\u306b\u3057\u307e\u3059\u3002\n\n```\n$ oil  g migration rename_field_member_id_to_member_id_in_members\n        Creating migration: /home/unko/sample/fuel/app/migrations/002_rename_field_member_id_to_member_id_in_members.php\n```\n\nnull\u5236\u7d04\u3092\u306f\u305a\u3059\n\n```php:fuel/app/migrations/002_rename_field_member_id_to_member_id_in_members.php\n<?php\n\nnamespace Fuel\\Migrations;\n\nclass Rename_field_member_id_to_member_id_in_members\n{\n\tpublic function up()\n\t{\n\t\t\\DBUtil::modify_fields('members', array(\n\t\t  'member_id' => array('name' => 'member_id', 'type' => 'varchar', 'constraint' => 32, 'null' => true) //\u2190 null\u3092\u8a31\u5bb9\n\t\t));\n\t}\n\n\tpublic function down()\n\t{\n\t\\DBUtil::modify_fields('members', array(\n\t\t\t'member_id' => array('name' => 'member_id', 'type' => 'varchar', 'constraint' => 32)\n\t\t));\n\t}\n}\n```\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n$ oil r migrate\nPerformed migrations for app:default:\n002_rename_field_member_id_to_member_id_in_members\n```\n\n\u3053\u306e\u72b6\u614b\u3067\u3001\u5148\u307b\u3069\u306e`tests/model/member.php`\u3092\u4fee\u6b63\u3057\u3001`member_id`\u3092\u8a2d\u5b9a\u3057\u306a\u3044\u3067\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```php:fuel/app/tests/model/member.php\nclass Test_Model_Member extends \\TestCase\n{\n  public function test_create_member(){\n    $count = count(Model_Member::find(\"all\"));\n\n    $member = Model_Member::forge(array(\n      // 'member_id' => \"member_id\", \u2190 member_id\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n      'password' => 'password',\n    ));\n\n    $member->save();\n\n    $update_count = count(Model_Member::find(\"all\"));\n\n    $this->assertEquals($count+1,$update_count);\n\n  }\n}\n```\n\n`members`\u30c6\u30fc\u30d6\u30eb\u306f`member_id`\u306f`null`\u3092\u8a31\u5bb9\u3057\u307e\u3059\u304c\u3001`member`\u30e2\u30c7\u30eb\u306e`member_id`\u306f**required**\u306a\u306e\u3067\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u306b\u306a\u308b\u306f\u305a\u3002\n\n```\n$ php oil test\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/core/phpunit.xml\n\n...............................................................  63 / 376 ( 16%)\n............................................................... 126 / 376 ( 33%)\n............................................................... 189 / 376 ( 50%)\n............................................................... 252 / 376 ( 67%)\n............................................................... 315 / 376 ( 83%)\n.............................................................\n\nTime: 440 ms, Memory: 19.75Mb\n\nOK (376 tests, 448 assertions)\n```\n\n**\u30d5\u30a1\u30c3\uff1f\uff01**\n\n\u30c6\u30fc\u30d6\u30eb\u3092\u898b\u3066\u307f\u308b\u3068\u30fb\u30fb\n\n```mysql\nmysql> select * from members;\n+----+-----------+----------+------------+------------+\n| id | member_id | password | created_at | updated_at |\n+----+-----------+----------+------------+------------+\n|  1 | member_id | password | 1405664980 | 1405664980 |\n|  2 | member_id | password | 1405664990 | 1405664990 |\n|  3 | member_id | password | 1405664998 | 1405664998 |\n|  4 | NULL      | password | 1405665773 | 1405665773 |\u2190 \uff1f\uff01\n+----+-----------+----------+------------+------------+\n```\n\n~~\u5b9f\u306ffuelPHP\u306f\u30e2\u30c7\u30eb\u3068\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u304c\u7d10\u3065\u3044\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u3053\u306e\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u3067\u306f\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u304c\u30c1\u30a7\u30c3\u30af\u3067\u304d\u307e\u305b\u3093\u3002~~ORM\u306e`$_properties`\u306b\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\u3057\u3001`Fieldset::add_model`\u3057\u305f\u30e2\u30c7\u30eb\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u30e2\u30c7\u30eb\u3068\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3001\u30d5\u30a9\u30fc\u30e0\u3092\u7d10\u3065\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u304c\u3001\u4eca\u56de\u306fscaffold\u3057\u305f\u30bd\u30fc\u30b9\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u30e2\u30c7\u30eb\u3068\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u304c\u7d10\u3065\u3044\u3066\u3044\u307e\u305b\u3093\u3002\n\n`member`\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u8a18\u8ff0\u304b\u3089\u3082\u305d\u306e\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n```php:fuel/app/classes/controller/member.php\n\n\tpublic function action_create()\n\t{\n\t\tif (Input::method() == 'POST')\n\t\t{\n\t\t\t$val = Model_Member::validate('create');\n\n\t\t\tif ($val->run())\u3000//\u2190\u3053\u3053\u3067\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u5b9f\u884c\n\t\t\t{\n\t\t\t\t$member = Model_Member::forge(array(\n\t\t\t\t\t'member_id' => Input::post('member_id'),\n\t\t\t\t\t'password' => Input::post('password'),\n\t\t\t\t));\n\n\t\t\t\tif ($member and $member->save())\u3000//\u2190\u30e2\u30c7\u30eb\u4fdd\u5b58\n\t\t\t\t{\n\t\t\t\t\tSession::set_flash('success', 'Added member #'.$member->id.'.');\n\n\t\t\t\t\tResponse::redirect('member');\n\t\t\t\t}\n\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tSession::set_flash('error', 'Could not save member.');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tSession::set_flash('error', $val->error());\n\t\t\t}\n\t\t}\n\n\t\t$this->template->title = \"Members\";\n\t\t$this->template->content = View::forge('member/create');\n\n\t}\n```\n\n\u3067\u306ffuelPHP\u3067\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306e\u5358\u4f53\u30c6\u30b9\u30c8\u3092\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308b\u304b\uff1f\n\n\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u5c02\u7528\u306e\u30c6\u30b9\u30c8\u3092\u5225\u9014\u7528\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```php:fuel/app/tests/model/member.php\n //\u30c6\u30b9\u30c8\u8ffd\u52a0\n  public function test_validation_member(){\n\n    $val = Model_Member::validate('create');\n\n    $member = array(\n      'password' => 'password',\n    );\n\n    $res = $val->run($member);\n\n    $this->assertEquals($res,false);\n  }\n```\n\n\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n$ php oil test\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/core/phpunit.xml\n\n...............................................................  63 / 377 ( 16%)\n............................................................... 126 / 377 ( 33%)\n............................................................... 189 / 377 ( 50%)\n............................................................... 252 / 377 ( 66%)\n............................................................... 315 / 377 ( 83%)\n..............................................................\n\nTime: 443 ms, Memory: 19.75Mb\n\nOK (377 tests, 449 assertions)\n```\n\n~~\u30e2\u30c7\u30eb\u306e\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u306b\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u542b\u3081\u308b\u306e\u304c\u6b63\u3057\u3044\u306e\u304b\u3069\u3046\u304b\u306f\u3055\u3066\u304a\u304d\u3001~~\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306e\u30c1\u30a7\u30c3\u30af\u3068\u30e2\u30c7\u30eb\u306e\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\n\n#\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30c6\u30b9\u30c8\n\n\u6b21\u306b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u3054\u3068\u306e\u6a5f\u80fd\u30c6\u30b9\u30c8\u3092\u884c\u3044\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n#\u524d\u6e96\u5099\nfuelPHP\u754c\u9688\u3067\u306f\u6709\u540d\u306a\u8a71\u3089\u3057\u3044\u306e\u3067\u3059\u304c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30bd\u30fc\u30b9\u3060\u3068\u3001\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u6642\u306bexit\u3055\u308c\u3066\u3057\u307e\u3063\u3066unitTest\u3054\u3068\u7d42\u4e86\u3059\u308b\u306e\u3067\u30c6\u30b9\u30c8\u304c\u3046\u307e\u304f\u52d5\u3044\u3066\u304f\u308c\u307e\u305b\u3093\u3002\n\n\u305f\u3081\u3057\u306b\u5b58\u5728\u3057\u306a\u3044id\u3067view\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u547c\u3073\u51fa\u3059\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\n\n```php:fuel/app/tests/controller/member.php\n<?php\n/**\n * Controller Post class tests\n * \n * @group Controller\n * @group Member\n */\n\nclass Test_Controller_Member extends \\TestCase\n{\n  public function test_create_member(){\n    $response = Request::forge('member/view')\n      ->set_method('GET')\n      ->execute([\"id\"=>100])\n      ->response();\n  }\n}\n```\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n\n```\n$ php oil test group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/core/phpunit.xml\n\n...[unko@localhost sample]$\n```\n\n**\u30c6\u30b9\u30c8\u81ea\u4f53\u304c\u9014\u4e2d\u3067\u7d42\u4e86\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002**\n\n\n\u3053\u308c\u3067\u306f\u30c6\u30b9\u30c8\u306b\u306a\u3089\u306a\u3044\u306e\u3067\u3001\u56de\u907f\u3059\u308b\u305f\u3081\u306e\u30d5\u30c3\u30af\u7528\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30d5\u30c3\u30af\u30d1\u30c3\u30b1\u30fc\u30b8\u306f\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n[FuelPHP\u3010\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3011-- \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u30c6\u30b9\u30c8\u306e\u65b9\u6cd5 --](http://qiita.com/ryurock/items/d785336cf6554576fa77)\n\n\n##\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30c6\u30b9\u30c8\u306e\u307f\u304c\u4f7f\u7528\u3059\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\noil\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u3072\u306a\u5f62\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```\n$ oil g package my\n        Creating file: /home/unko/sample/fuel/packages/my/classes/my.php\n        Creating file: /home/unko/sample/fuel/packages/my/config/my.php\n        Creating file: /home/unko/sample/fuel/packages/my/bootstrap.php\n```\n\n`classes/my.php`\u3092\u958b\u304d\u3001redirect\u30e1\u30bd\u30c3\u30c9\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u307e\u3059\u3002\n\n```php:fuel/packages/classes/my.php\n<?php\n\nnamespace My;\n\nclass MyException extends \\FuelException {}\n\nclass Response extends \\Fuel\\Core\\Response\n{\n    /**\n     * Override Fuel\\Core\\Response redirect method\n     *\n     * @param   string  $url     The url\n     * @param   string  $method  The redirect method\n     * @param   int     $code    The redirect status code\n     *\n     * @return  void\n     */\n    public static function redirect($url = '', $method = 'location', $code = 302)\n    {\n        $response = new static;\n        $response->set_status($code);\n\n        if (strpos($url, '://') === false)\n        {\n            $url = $url !== '' ? \\Uri::create($url) : \\Uri::base();\n        }\n\n        strpos($url, '*') !== false and $url = \\Uri::segment_replace($url);\n\n        if ($method == 'location')\n        {\n            $response->set_header('Location', $url);\n        }\n        elseif ($method == 'refresh')\n        {\n            $response->set_header('Refresh', '0;url='.$url);\n        }\n        else\n        {\n            return;\n        }\n\n        if (\\Fuel\\Core\\Fuel::$env != 'test')\n        {\n            $response->send(true);\n            exit;\n        }\n\n        $response->send(true);\n    }\n}\n```\n\n\u5408\u308f\u305b\u3066`bootstrap.php`\u3082\u4fee\u6b63\u3057\u307e\u3059\u3002\n\n```php:fuel/packages/bootstrap.php\n<?php\n\nAutoloader::add_core_namespace('My');\n\nAutoloader::add_classes(array(\n\t'My\\\\Response' => __DIR__ . '/classes/my.php',\n\t'My\\\\MyException' => __DIR__ . '/classes/my.php',\n\n));\n```\n\n\u3053\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u306f`core`\u306e\u6319\u52d5\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3059\u308b\u306e\u3067\u3001\u672c\u756a\u74b0\u5883\u306b\u306f\u542b\u3081\u305a\u3001`config.php`\u306e`always_load`\u306b\u306f\u542b\u3081\u305a\u3001\u30c6\u30b9\u30c8\u74b0\u5883\u306e\u307f\u3067\u4f7f\u7528\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nPHPUnit\u306e\u307f`my`\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f7f\u7528\u3055\u305b\u308b\u3088\u3046\u306b`bootstrap_phpunit.php`\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7528\u306b\u30b3\u30d4\u30fc\u3057\u3001\u305d\u308c\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\n\n```\n$ cp fuel/core/bootstrap_phpunit.php fuel/app/tests/\n```\n\n```php:fuel/app/tests/bootstrap_phpunit.php\n// \u672b\u5c3e\u306b\u8ffd\u52a0\nPackage::load('my');\n```\n\n`phpunit.xml`\u3082\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5c02\u7528\u306e\u3082\u306e\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\n```\n$ cp fuel/core/phpunit.xml  fuel/app/\n```\n\n```php:fuel/app/phpunit.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<phpunit colors=\"true\" stopOnFailure=\"false\" bootstrap=\"./tests/bootstrap_phpunit.php\"> \u2190 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5c02\u7528\u306ebootstrap_phpunit.php\u306b\u5909\u66f4\n\t<php>\n\t\t<server name=\"doc_root\" value=\"fuel/public\"/>\n\t\t<server name=\"app_path\" value=\"fuel/app\"/>\n\t\t<server name=\"core_path\" value=\"fuel/core\"/>\n\t\t<server name=\"package_path\" value=\"fuel/packages\"/>\n\t\t<server name=\"vendor_path\" value=\"fuel/vendor\"/>\n\t\t<server name=\"FUEL_ENV\" value=\"test\"/>\n\t</php>\n\t<testsuites>\n\t\t<testsuite name=\"core\">\n\t\t\t<directory suffix=\".php\">../core/tests</directory>\n\t\t</testsuite>\n\t\t<testsuite name=\"packages\">\n\t\t\t<directory suffix=\".php\">../packages/*/tests</directory>\n\t\t</testsuite>\n\t\t<testsuite name=\"app\">\n\t\t\t<directory suffix=\".php\">../app/tests</directory>\n\t\t</testsuite>\n\t\t<testsuite name=\"modules\">\n\t\t\t<directory suffix=\".php\">../app/modules/*/tests</directory>\n\t\t</testsuite>\n\t</testsuites>\n</phpunit>\n```\n\n\u30c6\u30b9\u30c8\u3092\u518d\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n$ php oil test group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/core/phpunit.xml\n\n....\n\nTime: 253 ms, Memory: 16.00Mb\n\nOK (3 tests, 0 assertions)\n```\n\n\u4eca\u5ea6\u306f\u6b63\u5e38\u306b\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\n\n~~\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3068\u306f\u76f4\u63a5\u95a2\u4fc2\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u30c6\u30b9\u30c8\u304b\u3089\u547c\u3073\u51fa\u3055\u308c\u308bView\u306f\u306a\u305c\u304bAsset\u30af\u30e9\u30b9\u304c\u52d5\u3044\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u3001\u30d1\u30b9\u89e3\u6c7a\u306e\u30a8\u30e9\u30fc\u8868\u793a\u3092\u7121\u52b9\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002~~\n\n```php:fuel/core/config/asset.php\n\t'fail_silently' => true,\u3000\u2190 doc_root\u304c\u6b63\u3057\u304f\u6307\u5b9a\u3055\u308c\u3066\u3044\u308c\u3070\u3053\u306e\u51e6\u7406\u306f\u4e0d\u8981\n```\n\n<b><font color=\"red\">phpunit.xml\u306edoc_root\u304c\u8aa4\u3063\u3066\u3044\u305f\u305f\u3081\u767a\u751f\u3057\u3066\u307e\u3057\u305f\u3002doc_root\u3092\u6b63\u3057\u304f`fuel/public`\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308c\u3070\u3053\u306e\u7b87\u6240\u306f\u4e0d\u8981\u3067\u3059\u3002</font></b>\n\n##view\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30c6\u30b9\u30c8\u3092\u884c\u3046\n\n\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u3066\u3082\u30c6\u30b9\u30c8\u304c\u7d42\u4e86\u3057\u306a\u304f\u306a\u3063\u305f\u306e\u3067\u3001**view\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u547c\u3073\u51fa\u3057\u3001\u5b58\u5728\u3057\u3066\u3044\u308bID\u306a\u3089\u3070\u8a73\u7d30\u753b\u9762\u3092\u3001\u305d\u3046\u3067\u306a\u3051\u308c\u3070\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b**\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\n```php:fuel/app/tests/controller/member.php\n  public function test_view_member(){\n    $response = Request::forge('member/view')\n      ->set_method('GET')\n      ->execute([\"id\" => 1]) //\u2190 \u5b58\u5728\u3059\u308bID\u306b\n      ->response();\n    \n    $this->assertTag(array('tag' => 'span','class' => 'muted', 'content' =>'#1'),$response->body->__toString()); //\u2190 \u5b58\u5728\u3059\u308b\u5834\u5408\u3001\u8868\u793a\u3055\u308c\u308b\u3079\u304dHTML\u30bf\u30b0\u306e\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3\n  }  \n```\n\n`assertTag`\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3044\u3001\u6b63\u5e38\u7cfb\u3067\u3042\u308c\u3070\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u306e\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\u304cHTML\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u304b\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n$ php oil test group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/core/phpunit.xml\n\n....\n\nTime: 246 ms, Memory: 16.25Mb\n\nOK (3 tests, 1 assertion)\n```\n\n\u6210\u529f\u3057\u307e\u3057\u305f\u3002\n\n\u6b21\u306b\u3001DB\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u306a\u3044id\u3067member\u306eview\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u5834\u5408\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\u3002\n\n`member`\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306f\u3001\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u304c\u767a\u751f\u3059\u308b\u3068template\u306b\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u8a2d\u5b9a\u305b\u305a\u306b\u7d42\u4e86\u3059\u308b\u305f\u3081\u3001assertTags\u306b\u3088\u308b\u30c1\u30a7\u30c3\u30af\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n\n\u306a\u306e\u3067\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u305f\u304b\u3069\u3046\u304b\u3092\u5224\u5b9a\u3059\u308b\u305f\u3081\u306e\u5c02\u7528\u30d7\u30ed\u30d1\u30c6\u30a3\u3092`my.php`\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```php:fuel/packages/my/classes/my.php\n<?php\n\nnamespace My;\n\nclass MyException extends \\FuelException {}\n\nclass Response extends \\Fuel\\Core\\Response\n{\n    /**\n     * Override Fuel\\Core\\Response redirect method\n     *\n     * @param   string  $url     The url\n     * @param   string  $method  The redirect method\n     * @param   int     $code    The redirect status code\n     *\n     * @return  void\n     */\n    public static function redirect($url = '', $method = 'location', $code = 302)\n    {\n        $response = new static;\n        $response->set_status($code);\n\n        if (strpos($url, '://') === false)\n        {\n            $url = $url !== '' ? \\Uri::create($url) : \\Uri::base();\n        }\n\n        strpos($url, '*') !== false and $url = \\Uri::segment_replace($url);\n\n        if ($method == 'location')\n        {\n            $response->set_header('Location', $url);\n        }\n        elseif ($method == 'refresh')\n        {\n            $response->set_header('Refresh', '0;url='.$url);\n        }\n        else\n        {\n            return;\n        }\n\n        //\u30c6\u30b9\u30c8\u3067\u306f\u306a\u3044\u5834\u5408\u306fexit\u3092\u5b9f\u884c\n        if (\\Fuel\\Core\\Fuel::$env != 'test')\n        {\n            $response->send(true);\n            exit;\n        }\n\n\tResponse::$redirect_status = $code; //\u2190\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306e$code\u3092\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30e1\u30f3\u30d0\u306b\u4ee3\u5165\n\tResponse::$redirect_url = $url; //\u2190\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306e$url\u3092\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u30e1\u30f3\u30d0\u306b\u4ee3\u5165\n        $response->send(true);\n    }\n\n    private static $redirect_status = null;// \u2190 \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u6642\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e\u30e1\u30f3\u30d0\u3092\u8ffd\u52a0\n    private static $redirect_url =\"\"; //\u2190 \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u6642\u306eURL\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e\u30e1\u30f3\u30d0\u3092\u8ffd\u52a0\n\n    public static function get_redirect_status(){ //\u2190 \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u6642\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e\u30b2\u30c3\u30bf\u30fc\n      return Response::$redirect_status;\n    }\n\n    public static function get_redirect_url(){ //\u2190 \u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u6642\u306eURL\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u306e\u30b2\u30c3\u30bf\u30fc\n      return Response::$redirect_url;\n    }\n}\n```\n\n\u5b58\u5728\u3057\u306a\u3044\u30e1\u30f3\u30d0ID\u3092\u6307\u5b9a\u3057\u3001`member_index`\u3078\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b\u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```php:fuel/php/tests/controller/member.php\n\n// \u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\n  public function test_view_member_was_nothing(){\n    $response = Request::forge('member/view')\n      ->set_method('GET')\n      ->execute([\"id\" => 999999])\n      ->response();\n\n    $this->assertEquals(\"302\",Response::get_redirect_status()); //\u2190 \u8ffd\u52a0\u3057\u305f\u5c02\u7528\u30e1\u30bd\u30c3\u30c9\u3067\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u30c1\u30a7\u30c3\u30af\n    $this->assertEquals(\"member\",Response::get_redirect_url());//\u2190 \u5c02\u7528\u30e1\u30bd\u30c3\u30c9\u3067\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u5148\u306eURL\u3092\u30c1\u30a7\u30c3\u30af\n  }\n```\n\n\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n$ oil t group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/app/phpunit.xml\n\n....\n\nTime: 278 ms, Memory: 17.50Mb\n\nOK (5 tests, 3 assertions)\n```\n\n\u6210\u529f\u3057\u307e\u3057\u305f\u3002\n\n\u3053\u3053\u307e\u3067\u3067\u3001**\u5b58\u5728\u3059\u308bID\u304c\u3042\u3063\u305f\u5834\u5408\u306fmember\u8a73\u7d30\u3092\u3001\u306a\u3051\u308c\u3070\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u308b**\u3068\u3053\u308d\u307e\u3067\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u30c6\u30b9\u30c8\u304c\u3067\u304d\u305f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n##isnert\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30c6\u30b9\u30c8\u3092\u884c\u3046\n\n\u4eca\u5ea6\u306f\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u7d4c\u7531\u3067**member\u3092\u65b0\u898f\u767b\u9332\u3057\u3001\u8aa4\u3063\u305f\u5024\u304c\u5165\u529b\u3055\u308c\u305f\u3089\u30a8\u30e9\u30fc\u306b\u306a\u308b**\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\u3002\n\nmember\u8ffd\u52a0\u306e\u6b63\u5e38\u7cfb\u30c6\u30b9\u30c8\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```php:fuel/app/tests/controller/member.php\n  // insert\u306e\u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\n  public function test_create_member(){\n    $count = count(Model_Member::find(\"all\"));\n\n    $_POST[\"member_id\"] = \"test_user\"; //\u2190 \u5165\u529b\u5024\u3092$_POST\u3067\u76f4\u63a5\u6307\u5b9a\n    $_POST[\"password\"] = \"password\";\n\n    $response = Request::forge('member/create')\n      ->set_method('POST')\n      ->execute()\n      ->response();\n\n    $this->assertTag(array('tag' => 'strong', 'content' =>'Success'),$response->body->__toString()); //\u2190 \u6b63\u5e38\u7d42\u4e86\u6642\u306e\u30d5\u30e9\u30c3\u30b7\u30e5\u30e1\u30c3\u30bb\u30fc\u30b8\n    $this->assertEquals($count+1,count(Model_Member::find(\"all\"))); //\u2190 insert\u304c\u5b9f\u884c\u3055\u308c\u3001\u30ec\u30b3\u30fc\u30c9\u304c1\u4ef6\u8ffd\u52a0\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\n  }\n\n```\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n$ oil t group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/app/phpunit.xml\n\n......\n\nTime: 274 ms, Memory: 17.50Mb\n\nOK (6 tests, 5 assertions)\n```\n\n\u6b63\u5e38\u306b\u7d42\u4e86\u3057\u307e\u3057\u305f\u3002\n\n\u4eca\u5ea6\u306f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u672a\u5165\u529b\u3068\u3057\u3001\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u306b\u306a\u308b\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```php:fuel/app/tests/controller/member.php\n  // \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\n  public function test_create_member_error(){\n    $count = count(Model_Member::find(\"all\"));\n\n    $_POST[\"member_id\"] = \"test_user\";\n    // \u308f\u3056\u3068password\u3092\u6307\u5b9a\u3057\u306a\u3044\n\n    $response = Request::forge('member/create')\n      ->set_method('POST')\n      ->execute()\n      ->response();\n\n    $this->assertTag(array('tag' => 'strong', 'content' =>'Error'),$response->body->__toString());\n    $this->assertEquals($count,count(Model_Member::find(\"all\")));\n  }\n\n```\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n$ oil t group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/app/phpunit.xml\n\n......E\n\nTime: 276 ms, Memory: 17.50Mb\n\nThere was 1 error:\n\n1) Test_Controller_Member::test_create_member_error\nDomainException: Form instance already exists, cannot be recreated. Use instance() instead of forge() to retrieve the existing instance.\n\n/home/unko/sample/fuel/core/classes/validation.php:57\n/home/unko/sample/fuel/app/classes/model/member.php:27\n/home/unko/sample/fuel/app/classes/controller/member.php:32\n/home/unko/sample/fuel/core/classes/request.php:444\n/home/unko/sample/fuel/app/tests/controller/member.php:51\n\nFAILURES!\nTests: 7, Assertions: 5, Errors: 1.\n```\n\n\u4f8b\u5916\u304c\u767a\u751f\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8a73\u3057\u304f\u898b\u3066\u307f\u307e\u3059\u3002\n\n```\nDomainException: Form instance already exists, cannot be recreated. Use instance() instead of forge() to retrieve the existing instance.\n\n/home/unko/sample/fuel/core/classes/validation.php:57\n/home/unko/sample/fuel/app/classes/model/member.php:27\n```\n\n~~\u9759\u7684\u547c\u3073\u51fa\u3057\u3092\u3057\u305f\u3064\u3082\u308a\u304c\u3001instance\u3092\u4f7f\u7528\u3057\u308d\u3068\u8a00\u308f\u308c\u308b\u306e\u3082\u3061\u3087\u3063\u3068\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3093\u3067\u3059\u304c\u3001~~fuelPHP\u3067\u306f`core`\u306e`validation.php`\u3068\u3001\u305d\u308c\u304c\u4f9d\u5b58\u3057\u3066\u3044\u308b`fieldset.php`\u3067\u9045\u5ef6\u9759\u7684\u675f\u7e1b\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u500b\u6240\u304c\u3042\u308a\u3001\u9023\u7d9a\u3057\u3066`validation`\u3092`run`\u3059\u308b\u30c6\u30b9\u30c8\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u4ee5\u524d\u306b`new static`\u3057\u305f\u30af\u30e9\u30b9\u304c\u521d\u671f\u5316\u3055\u308c\u305a\u3001\u4f8b\u5916\u3092\u767a\u751f\u3055\u305b\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u3053\u308c\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u306b\u3001\u9045\u5ef6\u9759\u7684\u675f\u7e1b\u3055\u308c\u3066\u3044\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u521d\u671f\u5316\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n~~\u3068\u3053\u308d\u3067new static\u3063\u3066\u8a18\u8ff0\u3001\u3061\u3087\u3063\u3068\u9055\u548c\u611f\u304c\u3042\u308b\u3093\u3067\u3059\u304c\u3053\u308c\u3063\u3066\u666e\u901a\u306a\u3093\u3067\u3059\u304b\u306d\u3002~~\n\n```php:fuel/packages/my/classes/fieldset_ex.php\n<?php\n\nnamespace My;\n\nclass Fieldset extends \\Fuel\\Core\\Fieldset {\n  //fieldset\u306e$_instances\u3092\u521d\u671f\u5316\u3059\u308b\u30e1\u30bd\u30c3\u30c9\n  public static function reset(){\n    parent::$_instances = array();\n  }\n}\n```\n\n`my`\u30d1\u30c3\u30b1\u30fc\u30b8\u306e`bootstrap.php`\u306b`fieldset_ex.php`\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```php:fuel/packages/my/bootstrap.php\n<?php\n\nAutoloader::add_core_namespace('My');\n\nAutoloader::add_classes(array(\n\t'My\\\\Response' => __DIR__ . '/classes/my.php',\n\t'My\\\\MyException' => __DIR__ . '/classes/my.php',\n\t'My\\\\Fieldset' => __DIR__ . '/classes/fieldset_ex.php', //\u2190 \u8ffd\u52a0\n));\n```\n\n\u30c6\u30b9\u30c8`test_create_member_error`\u306e`Request::execute()`\u3088\u308a\u3082\u524d\u306b`Fieldset::reset()`\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```php:fuel/app/tests/controller/member.php\n  public function test_create_member_error(){\n\n    Fieldset::reset(); //\u2190\u8ffd\u52a0\n\n    $count = count(Model_Member::find(\"all\"));\n\n    $_POST[\"member_id\"] = \"test_user2\";\n\n    $response = Request::forge('member/create')\n      ->set_method('POST')\n      ->execute()\n      ->response();\n\n    $this->assertTag(array('tag' => 'strong', 'content' =>'Error'),$response->body->__toString());\n    $this->assertEquals($count,count(Model_Member::find(\"all\")));\n  }\n```\n\n\u30c6\u30b9\u30c8\u3092\u518d\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n$ oil t group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/app/phpunit.xml\n\n......E\n\nTime: 290 ms, Memory: 17.50Mb\n\nThere was 1 error:\n\n1) Test_Controller_Member::test_create_member_error\nFuel\\Core\\Database_Exception: SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'password' cannot be null with query: \"INSERT INTO `members` (`member_id`, `password`, `created_at`, `updated_at`) VALUES ('test_user2', null, 1406185977, 1406185977)\"\n\n/home/unko/sample/fuel/core/classes/database/pdo/connection.php:270\n/home/unko/sample/fuel/core/classes/database/pdo/connection.php:237\n/home/unko/sample/fuel/core/classes/database/query.php:287\n/home/unko/sample/fuel/packages/orm/classes/query.php:1424\n/home/unko/sample/fuel/packages/orm/classes/model.php:1357\n/home/unko/sample/fuel/packages/orm/classes/model.php:1301\n/home/unko/sample/fuel/app/classes/controller/member.php:41\n/home/unko/sample/fuel/core/classes/request.php:444\n/home/unko/sample/fuel/app/tests/controller/member.php:53\n\nCaused by\nPDOException: SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'password' cannot be null\n\n/home/unko/sample/fuel/core/classes/database/pdo/connection.php:237\n/home/unko/sample/fuel/core/classes/database/query.php:287\n/home/unko/sample/fuel/packages/orm/classes/query.php:1424\n/home/unko/sample/fuel/packages/orm/classes/model.php:1357\n/home/unko/sample/fuel/packages/orm/classes/model.php:1301\n/home/unko/sample/fuel/app/classes/controller/member.php:41\n/home/unko/sample/fuel/core/classes/request.php:444\n/home/unko/sample/fuel/app/tests/controller/member.php:53\n\nFAILURES!\nTests: 7, Assertions: 5, Errors: 1.\n```\n\n\u4eca\u5ea6\u306fINSERT\u306eNULL\u5236\u7d04\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n\n`fieldset`\u306e`instances`\u3092\u521d\u671f\u5316\u3057\u3066\u3082`fieldset`\u304c\u5185\u90e8\u3067\u4f7f\u7528\u3057\u3066\u3044\u308b`$input`\u3082\u9045\u5ef6\u9759\u7684\u675f\u7e1b\u3068\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001`$input`\u3068`$_POST`\u306e\u5185\u5bb9\u306b\u30a2\u30f3\u30de\u30c3\u30c1\u304c\u767a\u751f\u3057\u3001\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3092\u901a\u904e\u3057\u3066SQL\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u3053\u308c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u3001`$input`\u3092\u30ea\u30bb\u30c3\u30c8\u3059\u308b\u305f\u3081\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\u305f\u3060\u3057[fuelPHP\u306ecore/Input\u30af\u30e9\u30b9\u306f\u62e1\u5f35\u3067\u304d\u306a\u3044](http://fuelphp.jp/docs/1.6/general/extending_core.html)\u306e\u3067\u3001Input\u3092\u7d99\u627f\u3057\u305fInputEX\u30af\u30e9\u30b9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```php:fuel/packages/my/classes/input_ex.php\n<?php\n\nnamespace My;\n\nclass InputEX extends \\Fuel\\Core\\Input {\n  public static function reset(){\n    parent::$input = null;\n  }\n}\n```\n`my`\u30d1\u30c3\u30b1\u30fc\u30b8\u306e`bootstrap.php`\u306b`input_ex.php`\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```php:fuel/packages/my/bootstrap.php\n<?php\n\nAutoloader::add_core_namespace('My');\n\nAutoloader::add_classes(array(\n\t'My\\\\Response' => __DIR__ . '/classes/my.php',\n\t'My\\\\MyException' => __DIR__ . '/classes/my.php',\n\t'My\\\\Fieldset' => __DIR__ . '/classes/fieldset_ex.php',\n\t'My\\\\InputEx' => __DIR__ . '/classes/input_ex.php', //\u2190 \u8ffd\u52a0\n\n));\n```\n\n\u30c6\u30b9\u30c8`test_create_member_error`\u306b`InputEx::reset()`\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```php:fuel/app/tests/controller/member.php\n  public function test_create_member_error(){\n\n    InputEx::reset(); //\u2190 \u8ffd\u52a0\n    Fieldset::reset();\n\n    $count = count(Model_Member::find(\"all\"));\n\n    $_POST[\"member_id\"] = \"test_user2\";\n\n    $response = Request::forge('member/create')\n      ->set_method('POST')\n      ->execute()\n      ->response();\n\n    $this->assertTag(array('tag' => 'strong', 'content' =>'Error'),$response->body->__toString());\n    $this->assertEquals($count,count(Model_Member::find(\"all\")));\n  }\n\n```\n\n\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n$ oil t group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/app/phpunit.xml\n\n.......\n\nTime: 278 ms, Memory: 17.75Mb\n\nOK (7 tests, 7 assertions)\n```\n\n**\u901a\u308a\u307e\u3057\u305f\uff01**\n\n\u3053\u306e\u72b6\u614b\u3060\u3068\u30c6\u30b9\u30e1\u30bd\u30c3\u30c9\u3059\u3079\u3066\u306b`reset`\u306e\u547c\u3073\u51fa\u3057\u3092\u8a18\u8ff0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u3042\u307e\u308a\u3044\u3051\u3066\u306a\u3044\u306e\u3067`setUp()`\u30e1\u30bd\u30c3\u30c9\u3067\u51e6\u7406\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```php:fuel/app/tests/controller/member.php\n\n  //setUp\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\n  protected function setUp(){\n    Session::destroy(); //\u2190 \u3064\u3044\u3067\u306b\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u521d\u671f\u5316\u3082\u8ffd\u52a0\n    Request::reset_request(true); //\u2190 \u3064\u3044\u3067\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u521d\u671f\u5316\u3082\u8ffd\u52a0\n    InputEx::reset();\n    Fieldset::reset();\n  }\n```\n\n\u3053\u308c\u3067**\u30a4\u30f3\u30b5\u30fc\u30c8\u3001\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3001\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30c6\u30b9\u30c8\u304c\u3067\u304d\u308b\u74b0\u5883**\u304c\u6574\u3044\u307e\u3057\u305f\uff01\n\n##edit\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30c6\u30b9\u30c8\u3092\u884c\u3046\n\n\u7d9a\u3044\u3066\u65e2\u5b58\u306e\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u66f4\u65b0\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u65e2\u5b58\u30c7\u30fc\u30bf\u306e\u66f4\u65b0\u30c6\u30b9\u30c8\u3092\u884c\u3046\u305f\u3081\u306b\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u65e2\u5b9a\u306e\u72b6\u614b\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001fuelPHP\u304a\u3088\u3073PHPUnit\u306b\u306f\u305d\u306e\u3088\u3046\u306a\u6a5f\u80fd\u304c\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u3057\u304b\u3057\u306a\u304c\u3089[FuelPHP \u3067\u306e PHPUnit \u306b\u3088\u308b\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8](http://d.hatena.ne.jp/Kenji_s/20111110/1320922825)\u3067\u30d5\u30a3\u30af\u30b9\u30c1\u30e3\u6a5f\u80fd\u3092\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u65b9\u304c\u3044\u307e\u3059\u306e\u3067\u3001\u3053\u308c\u3092\u4f7f\u308f\u305b\u3066\u3082\u3089\u3044\u307e\u3059\u3002\n\n[FuelPHP \u3067\u306e PHPUnit \u306b\u3088\u308b\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8](http://d.hatena.ne.jp/Kenji_s/20111110/1320922825)\u306e\u624b\u9806\u306b\u6cbf\u3063\u3066`dbfixt`\u30bf\u30b9\u30af\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3057\u3001\u65e2\u5b58\u306e\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30d5\u30a3\u30af\u30b9\u30c1\u30e3\u30c7\u30fc\u30bf\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\n```\n$ oil r dbfixt:generate members\n```\n\n\u6210\u529f\u3059\u308b\u3068`fuel/app/tests/fixture`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b`\u30c6\u30fc\u30d6\u30eb\u540d_fixt.yml`\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n```yml:fuel/app/tests/fixture/members_fixt.yml\n---\n- \n  id: 1\n  member_id: member_id\n  password: password\n  created_at: 1405664980\n  updated_at: 1405664980\n- \n  id: 2\n  member_id: member_id\n  password: password\n  created_at: 1405664990\n  updated_at: 1405664990\n- \n  id: 3\n  member_id: member_id\n  password: password\n  created_at: 1405664998\n  updated_at: 1405664998\n```\n\n\u540c\u69d8\u306b\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u5185\u306e`$tables`\u3067\u6307\u5b9a\u3055\u308c\u305f\u30c6\u30fc\u30d6\u30eb\u306e\u30c7\u30fc\u30bf\u3092yml\u306e\u5185\u5bb9\u3067\u66f4\u65b0\u3059\u308b\u305f\u3081\u30af\u30e9\u30b9\u3092`fuel/app/classes/dbtestcase.php`\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\u6bce\u30c6\u30b9\u30c8\u5b9f\u884c\u6642\u306b`members`\u30c6\u30fc\u30d6\u30eb\u3092`members_fixt.yml`\u306e\u5185\u5bb9\u3067\u884c\u4f7f\u3059\u308b\u305f\u3081\u3001\u30c6\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\n\n```php:fuel/app/tests/controller/member.php\n<?php\n/**\n * Controller Post class tests\n * \n * @group Controller\n * @group Member\n */\nclass Test_Controller_Member extends \\DbTestCase\u3000//\u2190 \u7d99\u627f\u5143\u3092DbTestCase\u306b\u5909\u66f4\n{\n\n  protected $tables = ['members' => 'members']; //\u2190 fixture.yml\u306e\u5185\u5bb9\u3067\u66f4\u65b0\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u3092\u8a18\u8ff0\n\n  protected function setUp(){\n    Request::reset_request(true);\n    InputEx::reset();\n    Fieldset::reset();\n    parent::setUp(); //\u2190 DbTestCase\u306esetUp()\u3092\u30b3\u30fc\u30eb\u3059\u308b\u305f\u3081\u306b\u8ffd\u52a0\n  }\n```\n\n\u3053\u308c\u3067\u6bce\u56de\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u524d\u306b`members`\u30c6\u30fc\u30d6\u30eb\u306e\u30c7\u30fc\u30bf\u304c`members_fixt.yml`\u306e\u5185\u5bb9\u3067\u30ea\u30bb\u30c3\u30c8\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u53d6\u5f97\u3057\u305f\u30c7\u30fc\u30bf\u3092\u66f4\u65b0\u3059\u308b\u30c6\u30b9\u30c8\u3068\u3001\u66f4\u65b0\u306b\u5931\u6557\u3059\u308b\u30c6\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\n\nfuelPHP\u306eORM\u30e2\u30c7\u30eb\u306f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u5909\u66f4\u5f8c\u306e\u30ec\u30b3\u30fc\u30c9\u306fORM\u3092\u4f7f\u7528\u305b\u305a\u3001\u30af\u30a8\u30ea\u30d3\u30eb\u30c0\u3067\u53d6\u5f97\u3057\u3066\u3044\u307e\u3059\u3002\n\n```php:fuel/app/tests/controller/member.php\n\n  //\u66f4\u65b0\u30c6\u30b9\u30c8\u3000\u6b63\u5e38\u7cfb\n  public function test_update_member(){\n\n    $update_member_id = \"test_user_updated\";\n    $id = 1;\n\n    $_POST[\"member_id\"] = $update_member_id;\n    $_POST[\"password\"] = \"password\";\n\n    $response = Request::forge('member/edit')\n      ->set_method('POST')\n      ->execute([\"id\" => $id])\n      ->response();\n\n    $updated_user = DB::select()->from(\"members\")->where(\"id\",$id)->execute(); //\u2190 \u30af\u30a8\u30ea\u30d3\u30eb\u30c0\u3092\u4f7f\u7528\n\n    $this->assertEquals($update_member_id,$updated_user[0][\"member_id\"]);\n    $this->assertEquals(\"302\",Response::get_redirect_status());\n\n  }\n\n  //\u66f4\u65b0\u30c6\u30b9\u30c8\u3000\u30a8\u30e9\u30fc\u7cfb\n  public function test_update_member_error(){\n\n    $update_member_id = \"test_user_updated\";\n    $id = 3;\n\n    $_POST[\"member_id\"] = $update_member_id;\n    $_POST[\"password\"] = \"123456789012345678901234567890123\";\n\n    $response = Request::forge('member/edit')\n      ->set_method('POST')\n      ->execute([\"id\" => $id])\n      ->response();\n\n    $updated_user = DB::select()->from(\"members\")->where(\"id\",$id)->execute(); //\u2190 \u30af\u30a8\u30ea\u30d3\u30eb\u30c0\u3092\u4f7f\u7528\n\n    $this->assertEquals(\"member_id\",$updated_user[0][\"member_id\"]);\n    $this->assertTag(array('tag' => 'strong', 'content' =>'Error'),$response->body->__toString());\n    $this->assertTag(array('tag' => 'div', 'attributes' => array('class' =>'alert'), 'descendant' => array('tag' => 'p', 'content' => 'The field Password may not contain more than 32 characters.')),$response->body->__toString());\n  }\n```\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n$ oil t group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/app/phpunit.xml\n\n..........\n\nTime: 451 ms, Memory: 18.25Mb\n\nOK (10 tests, 12 assertions)\n```\n\n**\u901a\u308a\u307e\u3057\u305f\u3002**\n\nassertTags\u306e\u4f7f\u7528\u306b\u3088\u308a\u3001\u30a8\u30e9\u30fc\u6587\u8a00\uff08'The field Password may not contain more than 32 characters.\uff09\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3082\u78ba\u8a8d\u3067\u304d\u3066\u3044\u307e\u3059\u3002\n\n##delete\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30c6\u30b9\u30c8\u3092\u884c\u3046\n\n\u6700\u5f8c\u306bDelete\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u524a\u9664\u306b\u6210\u529f\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3068\u3001\u5931\u6557\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u306e\u30c6\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```php:fuel/app/tests/controller/member.php\n  // \u30c6\u30b9\u30c8\u3092\u8ffd\u52a0\n  public function test_delete_member(){\n\n    $count = count(Model_Member::find(\"all\"));\n\n    $id = 1;\n\n    $response = Request::forge('member/delete')\n      ->set_method('POST')\n      ->execute([\"id\" => $id])\n      ->response();\n\n    $updated_user = DB::select()->from(\"members\")->where(\"id\",$id)->execute();\n\n    $this->assertEquals(0, count($updated_user));\n    $this->assertEquals(\"302\",Response::get_redirect_status());\n    $this->assertEquals($count - 1,count(Model_Member::find(\"all\")));\n\n  }\n\n  public function test_delete_member_error(){\n\n    $count = count(Model_Member::find(\"all\"));\n\n    $id = 100;\n\n    $response = Request::forge('member/delete')\n      ->set_method('POST')\n      ->execute([\"id\" => $id])\n      ->response();\n\n    $this->assertEquals(\"302\",Response::get_redirect_status());\n    $this->assertEquals($count, count(Model_Member::find(\"all\")));\n  }\n```\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\u3000\n\n```\n$ oil t group=Controller\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/app/phpunit.xml\n\n............\n\nTime: 484 ms, Memory: 18.50Mb\n\nOK (12 tests, 17 assertions)\n```\n\n\u6210\u529f\u3057\u307e\u3057\u305f\u3002\n\n#\u901a\u3057\u3066\u5b9f\u884c\u3059\u308b\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3068\u30e2\u30c7\u30eb\u306e\u30c6\u30b9\u30c8\u3092\u901a\u3057\u3066\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\n$ oil t\nTests Running...This may take a few moments.\nPHPUnit 3.7.37 by Sebastian Bergmann.\n\nConfiguration read from /home/unko/sample/fuel/app/phpunit.xml\n\n...............................................................  63 / 387 ( 16%)\n............................................................... 126 / 387 ( 32%)\n............................................................... 189 / 387 ( 48%)\n............................................................... 252 / 387 ( 65%)\n............................................................... 315 / 387 ( 81%)\n............................................................... 378 / 387 ( 97%)\n.........\n\nTime: 674 ms, Memory: 21.25Mb\n\nOK (387 tests, 466 assertions)\n```\n\n**\u30c6\u30b9\u30c8\u304b\u304f\u306b\u3093\uff01\u3000\u3088\u304b\u3063\u305f\u2661**\n\n\u3053\u308c\u3067\u3001\u30e2\u30c7\u30eb\u3068\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306eCRUD\u30c6\u30b9\u30c8\u3059\u3079\u3066\u3092PHPUnit\u306e\u307f\u3067\u5b9f\u65bd\u3067\u304d\u308b\u74b0\u5883\u304c\u69cb\u7bc9\u3067\u304d\u307e\u3057\u305f\uff01\n\n#\u307e\u3068\u3081\nFuelPHP\u3067\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3046\u65b9\u6cd5\u304c\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\n\u3084\u308a\u65b9\u3092\u8abf\u3079\u308b\u904e\u7a0b\u3067\u3001PHP\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067Jenkins+Phing\u3067CI\u3055\u308c\u3066\u3044\u308b\u4eba\u306e\u30d6\u30ed\u30b0\u3092\u7d50\u69cb\u76ee\u306b\u3057\u307e\u3057\u305f\u304c\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\uff08\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30ca\u30eb\uff09\u30c6\u30b9\u30c8\u306e\u81ea\u52d5\u5316\u306b\u3064\u3044\u3066\u306f\u60c5\u5831\u304c\u306a\u304b\u3063\u305f\u3088\u3046\u306b\u601d\u3048\u307e\u3059\u3002\n\nStackOverflow\u3067\u691c\u7d22\u3057\u305f\u3089\u3001**\u305d\u308cSelenium\u3067\u3067\u304d\u308b\u3088**\u307f\u305f\u3044\u306a\u30b3\u30e1\u30f3\u30c8\u304c\u7d50\u69cb\u3042\u3063\u3066\u3001**PHPer\u7206\u767a\u3057\u305f\u3089\u3044\u3044\u306e\u306b**\u3068\u601d\u3044\u307e\u3057\u305f\u304c\u3001\u4eca\u56de\u307e\u3068\u3081\u305f\u624b\u9806\u306b\u3088\u308aPHPUnit\u306e\u307f\u3067\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u30c6\u30b9\u30c8\u307e\u3067\u53ef\u80fd\u3068\u3044\u3046\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u306e\u3067\u3001\u540c\u69d8\u306e\u60a9\u307f\u3092\u6301\u3063\u3066\u308b\u4eba\u306f\u305c\u3072\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002\n\n\u307e\u305f\u5225\u306b\u9055\u3046\u65b9\u6cd5\u3067\u3084\u3063\u3066\u3044\u308b\u3001\u3084\u3063\u3066\u3044\u305f\u306a\u3069\u60c5\u5831\u304c\u3042\u308c\u3070\u305c\u3072\u5171\u6709\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n\u3010\u8ffd\u8a18\u3011\n\u203b\u30b3\u30e1\u30f3\u30c8\u3067\u6307\u6458\u3044\u305f\u3060\u3044\u305f\u7b87\u6240\u3092\u8a02\u6b63\u3057\u307e\u3057\u305f\u3002\n", "tags": ["FuelPHP1.7"]}