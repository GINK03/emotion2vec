{"context": " More than 1 year has passed since last update.\u66f8\u304d\u6368\u3066\u3002optima\u4fbf\u5229\u3001\u3067\u3082\u62e1\u5f35\u3057\u306b\u304f\u3044\u3002\u305d\u306e\u62e1\u5f35\u30a2\u30a4\u30c7\u30a3\u30a2\u306e\u4e00\u3064\u3002\n\n\u69cb\u60f3 : \u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1 + \u63a2\u7d22\nfind-if \u30d1\u30bf\u30fc\u30f3\u3002alist\u30d1\u30bf\u30fc\u30f3\u3084\u6b63\u898f\u8868\u73fe\u30de\u30c3\u30c1\u30d1\u30bf\u30fc\u30f3\u3082\u3053\u306e\u4ef2\u9593\u3060\u3068\u601d\u3046\u3002\n\u304a\u305d\u3089\u304f\u4e00\u3064\u306e\u30af\u30e9\u30b9\u3092\u5f62\u4f5c\u308b\u306f\u305a\u3002\n(defun fn1 (tree)\n (match tree\n  ((list* first second (and even (find-if #'evenp)))\n   (print (list first second even)))))\n\n(fn1 '(1 2 5 7 8 9 .....))\n; -->\n; (1 2 8)\n\n\n\u69cb\u60f3 : \u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1 + \u53cd\u5fa9\ndolist \u30d1\u30bf\u30fc\u30f3\u3001map \u30d1\u30bf\u30fc\u30f3\n(defun fn1 (tree)\n (match tree\n  ((list* first second (dolist (x) (list y z)))\n   (print (list first second y z)))))\n\n(fn1 '(1 2 (3 4) (5 6) (7 8) .....))\n; -->\n;\n;(1 2 3 4)\n;(1 2 5 6)\n;(1 2 7 8)\n;...\n\n\u4eca\u307e\u3067\u306f\u5206\u89e3\u3057\u3066\u304b\u3089dolist\u3084map\u306b\u98df\u308f\u305b\u3066\u3001\u307e\u305fmatch\u3057\u306a\u304f\u3066\u306f\u3044\u3051\u306a\u304b\u3063\u305f(\u4e0b\u306e\u4f8b)\u3002\n\u3042\u308c\u3070\u4fbf\u5229\u3002\n(defun fn1 (tree)\n (match tree\n  ((list* first second sublis)\n   (dolist (x sublis)\n     (match x\n       ((list y z)\n        (print (list first second y z))))))))))\n\n(fn1 '(1 2 (3 4) (5 6) (7 8) .....))\n; -->\n;\n;(1 2 3 4)\n;(1 2 5 6)\n;(1 2 7 8)\n;...\n\n\u624b\u5143\u306b\u3042\u308boptima-clone\u306b\u3042\u308b Pattern transformer \u3092\u62e1\u5f35\u3059\u308c\u3070\u3001\n\u539f\u7406\u7684\u306b\u306f\u3053\u3046\u3044\u3046\u3053\u3068\u304c\u7c21\u5358\u306b\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308b\u306f\u305a\u3002\n\n\u307e\u3068\u3081\n\u3082\u3068\u3082\u3068\u3001\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1 = destructuring + conditional \u3060\u3063\u305f\u308f\u3051\u3060\u3051\u3069\u3001\n\u307b\u304b\u306b\u3082\u3044\u308d\u3044\u308d\u304f\u3063\u3064\u3051\u3089\u308c\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3002\u305f\u3060\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u751f\u6210\u3059\u308b\u306e\u306f\u307e\u305a\u305d\u3046\u3060\u306a\u3002\n\u3042\u3068\u306f\u3001\u65e9\u304f\u6642\u9593\u4f5c\u3063\u3066\u901f\u3044\u30e6\u30cb\u30d5\u30a3\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u88c5\u3057\u305f\u3044\u3002\n\n\u304a\u307e\u3051\n\u3053\u3093\u306a\u304f\u3060\u3089\u306a\u3044\u3053\u3068\u3092\u8003\u3048\u3066\u3044\u305f\u306e\u306f\u3001\ncons tree \u306e\u5f62\u306b\u306a\u3063\u3066\u3044\u308b\u5b9f\u9a13\u30c7\u30fc\u30bf\u3092\n\u8996\u899a\u7684\u306b \u3046\u307e\u304f\u7d44\u307f\u66ff\u3048\u3089\u308c\u308b\u65b9\u6cd5\u304c\u3042\u308c\u3070\u3044\u3044\u306a\u3068\u601d\u3063\u3066\u3044\u305f\u304b\u3089\u3002\n\u3067\u3001\u4eca\u56de\u306f optima \u306f\u4f7f\u308f\u305a destructuring-bind \u3092\u4f7f\u3063\u3066\u3044\u305f\u3093\u3060\u3051\u3069\u3001\n\u306a\u304b\u306a\u304b\u4f7f\u3044\u3084\u3059\u3044\u30de\u30af\u30ed\u306b\u306a\u3063\u305f\u3002\n;; cons tree \u3092\u3068\u308b\u3002&rest \u306b\u3042\u305f\u308b\u3068\u3053\u308d\u3067\u30eb\u30fc\u30d7\u3059\u308b\u3002\n(defun my-format (tree)\n  (with-record (configuration &rest (domain &rest (problem cost time memory))) tree\n    (format t \"~@{~a~^, ~}~%\" configuration domain problem cost time memory)))\n\nAAAI15-RESULTS> (my-format '(TEMPLATE-LAMA (BARMAN (P01 573 1802.06\n 468608) (P02 -1 -1 -1) (P03 674 1802.19 513584) (P04 666 1801.9\n 584208)) (CELL-ASSEMBLY-NONEG-NOCOST (P01 126 112.68 360816) (P02 323\n 1802.63 45600) (P03 474 1801.94 52256) (P04 1407 1802.6 59296))))\n\n;TEMPLATE-LAMA, BARMAN, P01, 573, 1802.06, 468608\n;TEMPLATE-LAMA, BARMAN, P02, -1, -1, -1\n;TEMPLATE-LAMA, BARMAN, P03, 674, 1802.19, 513584\n;TEMPLATE-LAMA, BARMAN, P04, 666, 1801.9, 584208\n;TEMPLATE-LAMA, CELL-ASSEMBLY-NONEG-NOCOST, P01, 126, 112.68, 360816\n;TEMPLATE-LAMA, CELL-ASSEMBLY-NONEG-NOCOST, P02, 323, 1802.63, 45600\n;TEMPLATE-LAMA, CELL-ASSEMBLY-NONEG-NOCOST, P03, 474, 1801.94, 52256\n;TEMPLATE-LAMA, CELL-ASSEMBLY-NONEG-NOCOST, P04, 1407, 1802.6, 59296\n\n\n;; \u7b2c\u4e8c\u5f3e\n\n(defun table1 (tree)\n  (let (hash)\n    (with-record (configuration\n                  &rest\n                  (domain &rest (problem cost time memory))) tree\n      (when (plusp cost)\n        (setf (getf (getf hash configuration) domain)\n              (1+ (or (getf (getf hash configuration) domain) 0)))))\n    (print hash)\n    (with-record (&rest _ (&rest _  count)) hash\n      (print count))))\n\nAAAI15-RESULTS> (table1 '(TEMPLATE-LAMA (BARMAN (P01 573 1802.06\n 468608) (P02 -1 -1 -1) (P03 674 1802.19 513584) (P04 666 1801.9\n 584208)) (CELL-ASSEMBLY-NONEG-NOCOST (P01 126 112.68 360816) (P02 323\n 1802.63 45600) (P03 474 1801.94 52256) (P04 1407 1802.6 59296))))\n\n;(TEMPLATE-LAMA (CELL-ASSEMBLY-NONEG-NOCOST 4 BARMAN 3)) \n;4 \n;3 \n\n\n\n\u66f8\u304d\u6368\u3066\u3002optima\u4fbf\u5229\u3001\u3067\u3082\u62e1\u5f35\u3057\u306b\u304f\u3044\u3002\u305d\u306e\u62e1\u5f35\u30a2\u30a4\u30c7\u30a3\u30a2\u306e\u4e00\u3064\u3002\n\n## \u69cb\u60f3 : \u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1 + \u63a2\u7d22\n\nfind-if \u30d1\u30bf\u30fc\u30f3\u3002alist\u30d1\u30bf\u30fc\u30f3\u3084\u6b63\u898f\u8868\u73fe\u30de\u30c3\u30c1\u30d1\u30bf\u30fc\u30f3\u3082\u3053\u306e\u4ef2\u9593\u3060\u3068\u601d\u3046\u3002\n\u304a\u305d\u3089\u304f\u4e00\u3064\u306e\u30af\u30e9\u30b9\u3092\u5f62\u4f5c\u308b\u306f\u305a\u3002\n\n```cl\n(defun fn1 (tree)\n (match tree\n  ((list* first second (and even (find-if #'evenp)))\n   (print (list first second even)))))\n\n(fn1 '(1 2 5 7 8 9 .....))\n; -->\n; (1 2 8)\n```\n\n## \u69cb\u60f3 : \u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1 + \u53cd\u5fa9\n\ndolist \u30d1\u30bf\u30fc\u30f3\u3001map \u30d1\u30bf\u30fc\u30f3\n\n```cl\n(defun fn1 (tree)\n (match tree\n  ((list* first second (dolist (x) (list y z)))\n   (print (list first second y z)))))\n\n(fn1 '(1 2 (3 4) (5 6) (7 8) .....))\n; -->\n;\n;(1 2 3 4)\n;(1 2 5 6)\n;(1 2 7 8)\n;...\n```\n\n\u4eca\u307e\u3067\u306f\u5206\u89e3\u3057\u3066\u304b\u3089dolist\u3084map\u306b\u98df\u308f\u305b\u3066\u3001\u307e\u305fmatch\u3057\u306a\u304f\u3066\u306f\u3044\u3051\u306a\u304b\u3063\u305f(\u4e0b\u306e\u4f8b)\u3002\n\u3042\u308c\u3070\u4fbf\u5229\u3002\n\n```cl\n(defun fn1 (tree)\n (match tree\n  ((list* first second sublis)\n   (dolist (x sublis)\n     (match x\n       ((list y z)\n        (print (list first second y z))))))))))\n\n(fn1 '(1 2 (3 4) (5 6) (7 8) .....))\n; -->\n;\n;(1 2 3 4)\n;(1 2 5 6)\n;(1 2 7 8)\n;...\n```\n\n\u624b\u5143\u306b\u3042\u308boptima-clone\u306b\u3042\u308b Pattern transformer \u3092\u62e1\u5f35\u3059\u308c\u3070\u3001\n\u539f\u7406\u7684\u306b\u306f\u3053\u3046\u3044\u3046\u3053\u3068\u304c\u7c21\u5358\u306b\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308b\u306f\u305a\u3002\n\n## \u307e\u3068\u3081\n\n\u3082\u3068\u3082\u3068\u3001\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1 = destructuring + conditional \u3060\u3063\u305f\u308f\u3051\u3060\u3051\u3069\u3001\n\u307b\u304b\u306b\u3082\u3044\u308d\u3044\u308d\u304f\u3063\u3064\u3051\u3089\u308c\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3002\u305f\u3060\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u751f\u6210\u3059\u308b\u306e\u306f\u307e\u305a\u305d\u3046\u3060\u306a\u3002\n\u3042\u3068\u306f\u3001\u65e9\u304f\u6642\u9593\u4f5c\u3063\u3066\u901f\u3044\u30e6\u30cb\u30d5\u30a3\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u88c5\u3057\u305f\u3044\u3002\n\n## \u304a\u307e\u3051\n\n\u3053\u3093\u306a\u304f\u3060\u3089\u306a\u3044\u3053\u3068\u3092\u8003\u3048\u3066\u3044\u305f\u306e\u306f\u3001\ncons tree \u306e\u5f62\u306b\u306a\u3063\u3066\u3044\u308b\u5b9f\u9a13\u30c7\u30fc\u30bf\u3092\n**\u8996\u899a\u7684\u306b** \u3046\u307e\u304f\u7d44\u307f\u66ff\u3048\u3089\u308c\u308b\u65b9\u6cd5\u304c\u3042\u308c\u3070\u3044\u3044\u306a\u3068\u601d\u3063\u3066\u3044\u305f\u304b\u3089\u3002\n\u3067\u3001\u4eca\u56de\u306f optima \u306f\u4f7f\u308f\u305a destructuring-bind \u3092\u4f7f\u3063\u3066\u3044\u305f\u3093\u3060\u3051\u3069\u3001\n\u306a\u304b\u306a\u304b\u4f7f\u3044\u3084\u3059\u3044\u30de\u30af\u30ed\u306b\u306a\u3063\u305f\u3002\n\n```cl\n;; cons tree \u3092\u3068\u308b\u3002&rest \u306b\u3042\u305f\u308b\u3068\u3053\u308d\u3067\u30eb\u30fc\u30d7\u3059\u308b\u3002\n(defun my-format (tree)\n  (with-record (configuration &rest (domain &rest (problem cost time memory))) tree\n    (format t \"~@{~a~^, ~}~%\" configuration domain problem cost time memory)))\n\nAAAI15-RESULTS> (my-format '(TEMPLATE-LAMA (BARMAN (P01 573 1802.06\n 468608) (P02 -1 -1 -1) (P03 674 1802.19 513584) (P04 666 1801.9\n 584208)) (CELL-ASSEMBLY-NONEG-NOCOST (P01 126 112.68 360816) (P02 323\n 1802.63 45600) (P03 474 1801.94 52256) (P04 1407 1802.6 59296))))\n\n;TEMPLATE-LAMA, BARMAN, P01, 573, 1802.06, 468608\n;TEMPLATE-LAMA, BARMAN, P02, -1, -1, -1\n;TEMPLATE-LAMA, BARMAN, P03, 674, 1802.19, 513584\n;TEMPLATE-LAMA, BARMAN, P04, 666, 1801.9, 584208\n;TEMPLATE-LAMA, CELL-ASSEMBLY-NONEG-NOCOST, P01, 126, 112.68, 360816\n;TEMPLATE-LAMA, CELL-ASSEMBLY-NONEG-NOCOST, P02, 323, 1802.63, 45600\n;TEMPLATE-LAMA, CELL-ASSEMBLY-NONEG-NOCOST, P03, 474, 1801.94, 52256\n;TEMPLATE-LAMA, CELL-ASSEMBLY-NONEG-NOCOST, P04, 1407, 1802.6, 59296\n\n\n;; \u7b2c\u4e8c\u5f3e\n\n(defun table1 (tree)\n  (let (hash)\n    (with-record (configuration\n                  &rest\n                  (domain &rest (problem cost time memory))) tree\n      (when (plusp cost)\n        (setf (getf (getf hash configuration) domain)\n              (1+ (or (getf (getf hash configuration) domain) 0)))))\n    (print hash)\n    (with-record (&rest _ (&rest _  count)) hash\n      (print count))))\n\nAAAI15-RESULTS> (table1 '(TEMPLATE-LAMA (BARMAN (P01 573 1802.06\n 468608) (P02 -1 -1 -1) (P03 674 1802.19 513584) (P04 666 1801.9\n 584208)) (CELL-ASSEMBLY-NONEG-NOCOST (P01 126 112.68 360816) (P02 323\n 1802.63 45600) (P03 474 1801.94 52256) (P04 1407 1802.6 59296))))\n\n;(TEMPLATE-LAMA (CELL-ASSEMBLY-NONEG-NOCOST 4 BARMAN 3)) \n;4 \n;3 \n\n```\n", "tags": ["common-lisp", "\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1"]}