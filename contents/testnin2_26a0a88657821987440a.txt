{"tags": ["Bluemix", "cdn", "fastly", "ShinobiLayer"], "context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nBluemix\u306b\u3082CDN\u304c\u30d9\u30fc\u30bf\u7248\u3067\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u3088\u3046\u306a\u306e\u3067\u3001\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n2016\u5e743\u67083\u65e5\u73fe\u5728\u306e\u4e3b\u306a\u5236\u7d04\u3068\u3057\u3066\u3001\n\n\u300c\u7c73\u56fd\u5357\u90e8\u300d\u3067\u306e\u307f\u672c\u30b5\u30fc\u30d3\u30b9\u3092\u9078\u629e\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\nHTTP\u306f\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u304c\u3001HTTPS\u306f\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n\n\n1. \u30e9\u30f3\u30bf\u30a4\u30e0\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8cfc\u5165\u3068\u30c9\u30e1\u30a4\u30f3\u8a2d\u5b9a\n\n\u30e9\u30f3\u30bf\u30a4\u30e0\u3068\u3057\u3066\u300cSDK for Node.js\u2122\u300d\u3092\u8cfc\u5165\u3002\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\u306f\u3001shinobilayer01\u3068\u3059\u308b\uff08\u3088\u3063\u3066\u30db\u30b9\u30c8\u540d\u306fshinobilayer01.mybluemix.net\u3068\u306a\u308b\uff09\u3002\n\u300c\u7d4c\u8def\u3068\u30a2\u30d7\u30ea\u30fb\u30a2\u30af\u30bb\u30b9\u306e\u7de8\u96c6\u300d\u3092\u9078\u629e\n\n\n\u300c\u30c9\u30e1\u30a4\u30f3\u306e\u7ba1\u7406\u300d\u3092\u9078\u629e\n\n\n\u30c9\u30e1\u30a4\u30f3\u3092\u8ffd\u52a0\u3059\u308b\u3002\u4eca\u56de\u306f\u79c1\u306fmysl01.com\u3068\u3044\u3046\u30c9\u30e1\u30a4\u30f3\u3092\u6301\u3064DNS\u3092\u6301\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u306eDNS\u30c9\u30e1\u30a4\u30f3\u3092\u767b\u9332\u3002\n\n\n\u518d\u5ea6\u300c\u7d4c\u8def\u3068\u30a2\u30d7\u30ea\u30fb\u30a2\u30af\u30bb\u30b9\u306e\u7de8\u96c6\u300d\u3092\u9078\u629e\n\n\n\u8ffd\u52a0\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u306b\u4e0b\u3057\u3066\u30db\u30b9\u30c8\u540d\u3092\u8ffd\u52a0\u3002\n\n\n\n\u3053\u308c\u306b\u3088\u308a\u3001\u3053\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u3066\n\nshinobilayer01.mybluemix.net\uff08\u30b7\u30b9\u30c6\u30e0\u30c9\u30e1\u30a4\u30f3: ORIGIN ROUTE\u306b\u76f8\u5f53 \uff09\nbluemixcdn01.mysl01.com\uff08\u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\uff1aAPP URL\u306b\u76f8\u5f53\uff09\n\n\u304c\u8ffd\u52a0\u3055\u308c\u305f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n2. CDN\u30b5\u30fc\u30d3\u30b9\u8cfc\u5165\u3068\u8a2d\u5b9a\n\nCDN\u3092\u8cfc\u5165\n\n\nAPP URL\uff08\u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u30d9\u30fc\u30b9\u306eURL\uff09\u3068ORIGIN ROUTE\uff08\u30b7\u30b9\u30c6\u30e0\u30c9\u30e1\u30a4\u30f3\u30d9\u30fc\u30b9\u306eURL)\u3092\u5165\u529b\u3002\u3053\u308c\u306b\u3088\u308a\u3001CNAME\u304ccdn.bluemix.net\u306b\u306a\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\u3000\u30a8\u30e9\u30fc\u306f\u51fa\u3066\u3044\u308b\u3051\u3069\u3044\u3063\u305f\u3093\u3053\u3053\u3067\u306f\u7121\u8996\u3057\u3066\u3088\u3044\u3002\n\n\n\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09\u30c7\u30d5\u30a9\u30eb\u30c8\u306eTTL\u306f\u304a\u8a66\u3057\u7528\u9014\u3068\u3057\u3066\u306f\u9577\u3059\u304e\u308b\u306e\u306760\u79d2\u306b\u3059\u308b\u3002\n\n\n\n\n3. DNS\u8a2d\u5b9a\nbluemixcdn01.mysl01.com\u306eCNAME\u3068\u3057\u3066cdn.bluemix.net\u304c\u767b\u9332\u3059\u308b\u305f\u3081\u306b\u3001DNS\u3092\u7de8\u96c6\u3059\u308b\u3002\n\n\n4. \u30c6\u30b9\u30c8\u3068\u8003\u5bdf\u3002\n# curl -I http://bluemixcdn01.mysl01.com/\nHTTP/1.1 200 OK\nX-Backside-Transport: OK OK\nCache-Control: public, max-age=0\nContent-Type: text/html; charset=UTF-8\nEtag: W/\"347-15337a80e90\"\nLast-Modified: Wed, 02 Mar 2016 14:07:54 GMT\nX-Cf-Requestid: 4fd791c8-4b75-4c62-654d-6e3474315bad\nX-Powered-By: Express\nX-Client-IP: xx.xx.xx.xx\nX-Global-Transaction-ID: 593764285\nContent-Length: 839\nAccept-Ranges: bytes\nDate: Wed, 02 Mar 2016 16:10:08 GMT\nVia: 1.1 varnish\nAge: 11\nConnection: keep-alive\nX-Served-By: cache-nrt6133-NRT\nX-Cache: HIT\nX-Cache-Hits: 2\nX-Timer: S1456935008.369276,VS0,VE0\n\n\n# curl -I http://cdn.bluemix.net -H \"host: bluemixcdn01.mysl01.com\"\nHTTP/1.1 200 OK\nX-Backside-Transport: OK OK\nCache-Control: public, max-age=0\nContent-Type: text/html; charset=UTF-8\nEtag: W/\"347-15337a80e90\"\nLast-Modified: Wed, 02 Mar 2016 14:07:54 GMT\nX-Cf-Requestid: 0747a0f3-eb19-4677-4d82-28872e8068f4\nX-Powered-By: Express\nX-Client-IP: xx.xx.xx.xx\nX-Global-Transaction-ID: 702885789\nContent-Length: 839\nAccept-Ranges: bytes\nDate: Wed, 02 Mar 2016 16:09:13 GMT\nVia: 1.1 varnish\nAge: 21\nConnection: keep-alive\nX-Served-By: cache-nrt6129-NRT\nX-Cache: HIT\nX-Cache-Hits: 6\nX-Timer: S1456934953.943458,VS0,VE0\n\n# nslookup cdn.bluemix.net\nServer:         10.0.80.11\nAddress:        10.0.80.11#53\n\nNon-authoritative answer:\ncdn.bluemix.net canonical name = global.prod.fastly.net.\nglobal.prod.fastly.net  canonical name = global-ssl.fastly.net.\nglobal-ssl.fastly.net   canonical name = fallback.global-ssl.fastly.net.\nName:   fallback.global-ssl.fastly.net\nAddress: xxx.xxx.xxx.xxx\n\n\nBluemix\u306fSoftLayer\u306e\u4e0a\u3067\u7a3c\u52d5\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3066\u3063\u304d\u308a\u3053\u306eCDN\u30b5\u30fc\u30d3\u30b9\u3082EdgeCast\u3067\u52d5\u3044\u3066\u3044\u308b\u3082\u306e\u3060\u3068\u601d\u3063\u3066\u3044\u305f\u304c\u3001Fastly CDN\u3063\u307d\u3044\u3002\nX-Cache\u304cHIT\u306b\u306a\u3063\u3066\u3044\u305f\u3089\u30ad\u30e3\u30c3\u30b7\u30e5\u30d2\u30c3\u30c8\u3002X-Cache-Hits\u3067\u30d2\u30c3\u30c8\u56de\u6570\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3088\u3046\u3060\u3002\n\u7e70\u308a\u8fd4\u3057\u5b9f\u65bd\u3057\u3066\u307f\u308b\u3068\u3001\u300cX-Served-By\u300d\u306e\u7b87\u6240\u304c\u983b\u7e41\u306b\u5909\u66f4\u3055\u308c\u3066\u3001\u306a\u304b\u306a\u304bX-Cache-Hits\u306e\u6570\u304c\u5897\u3048\u306a\u3044\u30025\u56deWeb\u30a2\u30af\u30bb\u30b9\u3057\u305f\u30894\u56de\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u308b\u3068\u3044\u3046\u8a33\u3067\u306f\u306a\u304f\u30015\u56de\u3068\u3082\u5225\u3005\u306eEdgeServer\u7d4c\u7531\u3067\u30a2\u30af\u30bb\u30b9\u3055\u308c\u305f\u305f\u3081\u306b\u5168\u3066\u304c1st Hit\u3067\u3057\u305f\u3068\u3044\u3046\u3053\u3068\u3082\u3042\u308a\u3048\u305d\u3046\u3002\n\u3088\u304f\u30a2\u30af\u30bb\u30b9\u304c\u8a70\u307e\u308b\u30fb\u30fb\u30fb\u3002\n\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u30af\u30ea\u30a2\uff08Purge Cache\uff09\u3092\u5b9f\u65bd\u3059\u308b\u3068\u3088\u3044\u3002\n\n\n\n#\u306f\u3058\u3081\u306b\nBluemix\u306b\u3082CDN\u304c\u30d9\u30fc\u30bf\u7248\u3067\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u3088\u3046\u306a\u306e\u3067\u3001\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n2016\u5e743\u67083\u65e5\u73fe\u5728\u306e\u4e3b\u306a\u5236\u7d04\u3068\u3057\u3066\u3001\n\n- \u300c\u7c73\u56fd\u5357\u90e8\u300d\u3067\u306e\u307f\u672c\u30b5\u30fc\u30d3\u30b9\u3092\u9078\u629e\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n- HTTP\u306f\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u304c\u3001HTTPS\u306f\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n\n#1. \u30e9\u30f3\u30bf\u30a4\u30e0\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8cfc\u5165\u3068\u30c9\u30e1\u30a4\u30f3\u8a2d\u5b9a\n\n1. \u30e9\u30f3\u30bf\u30a4\u30e0\u3068\u3057\u3066\u300cSDK for Node.js\u2122\u300d\u3092\u8cfc\u5165\u3002\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\u306f\u3001shinobilayer01\u3068\u3059\u308b\uff08\u3088\u3063\u3066\u30db\u30b9\u30c8\u540d\u306f`shinobilayer01.mybluemix.net`\u3068\u306a\u308b\uff09\u3002\n2. \u300c\u7d4c\u8def\u3068\u30a2\u30d7\u30ea\u30fb\u30a2\u30af\u30bb\u30b9\u306e\u7de8\u96c6\u300d\u3092\u9078\u629e<br>\n![002.jpg](https://qiita-image-store.s3.amazonaws.com/0/62127/1a229bc3-87e9-4400-c852-32218cfc3b61.jpeg)\n3. \u300c\u30c9\u30e1\u30a4\u30f3\u306e\u7ba1\u7406\u300d\u3092\u9078\u629e<br>\n![003.jpg](https://qiita-image-store.s3.amazonaws.com/0/62127/4a6cda5d-44f1-2a9a-237e-45eed8f770d2.jpeg)\n4. \u30c9\u30e1\u30a4\u30f3\u3092\u8ffd\u52a0\u3059\u308b\u3002\u4eca\u56de\u306f\u79c1\u306fmysl01.com\u3068\u3044\u3046\u30c9\u30e1\u30a4\u30f3\u3092\u6301\u3064DNS\u3092\u6301\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u306eDNS\u30c9\u30e1\u30a4\u30f3\u3092\u767b\u9332\u3002<br>\n![004.jpg](https://qiita-image-store.s3.amazonaws.com/0/62127/a0234d8b-e178-dd5b-d328-e9475b63a82b.jpeg)\n5. \u518d\u5ea6\u300c\u7d4c\u8def\u3068\u30a2\u30d7\u30ea\u30fb\u30a2\u30af\u30bb\u30b9\u306e\u7de8\u96c6\u300d\u3092\u9078\u629e<br>\n![002.jpg](https://qiita-image-store.s3.amazonaws.com/0/62127/1a229bc3-87e9-4400-c852-32218cfc3b61.jpeg)\n6. \u8ffd\u52a0\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u306b\u4e0b\u3057\u3066\u30db\u30b9\u30c8\u540d\u3092\u8ffd\u52a0\u3002\n![005.jpg](https://qiita-image-store.s3.amazonaws.com/0/62127/0809756f-bfaa-453f-55e1-248d86952d0b.jpeg)\n\n\u3053\u308c\u306b\u3088\u308a\u3001\u3053\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u3066\n\n- shinobilayer01.mybluemix.net\uff08\u30b7\u30b9\u30c6\u30e0\u30c9\u30e1\u30a4\u30f3: ORIGIN ROUTE\u306b\u76f8\u5f53 \uff09\n- bluemixcdn01.mysl01.com\uff08\u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\uff1aAPP URL\u306b\u76f8\u5f53\uff09\n\n\u304c\u8ffd\u52a0\u3055\u308c\u305f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n#2. CDN\u30b5\u30fc\u30d3\u30b9\u8cfc\u5165\u3068\u8a2d\u5b9a\n\n1. CDN\u3092\u8cfc\u5165<br>\n![001.jpg](https://qiita-image-store.s3.amazonaws.com/0/62127/eb890755-768c-42ad-65bb-394bd58eee1b.jpeg)\n2. APP URL\uff08\u30ab\u30b9\u30bf\u30e0\u30c9\u30e1\u30a4\u30f3\u30d9\u30fc\u30b9\u306eURL\uff09\u3068ORIGIN ROUTE\uff08\u30b7\u30b9\u30c6\u30e0\u30c9\u30e1\u30a4\u30f3\u30d9\u30fc\u30b9\u306eURL)\u3092\u5165\u529b\u3002\u3053\u308c\u306b\u3088\u308a\u3001**CNAME\u304ccdn.bluemix.net\u306b\u306a\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002**\u3000\u30a8\u30e9\u30fc\u306f\u51fa\u3066\u3044\u308b\u3051\u3069\u3044\u3063\u305f\u3093\u3053\u3053\u3067\u306f\u7121\u8996\u3057\u3066\u3088\u3044\u3002<br>\n![006.jpg](https://qiita-image-store.s3.amazonaws.com/0/62127/29e87779-3978-3ed0-aee9-701443c412e2.jpeg)\n3. \uff08\u30aa\u30d7\u30b7\u30e7\u30f3\uff09\u30c7\u30d5\u30a9\u30eb\u30c8\u306eTTL\u306f\u304a\u8a66\u3057\u7528\u9014\u3068\u3057\u3066\u306f\u9577\u3059\u304e\u308b\u306e\u306760\u79d2\u306b\u3059\u308b\u3002\n![007.jpg](https://qiita-image-store.s3.amazonaws.com/0/62127/39ee09a5-d505-3e21-11a2-6a290a1b7a37.jpeg)\n\n\n\n#3. DNS\u8a2d\u5b9a\nbluemixcdn01.mysl01.com\u306eCNAME\u3068\u3057\u3066cdn.bluemix.net\u304c\u767b\u9332\u3059\u308b\u305f\u3081\u306b\u3001DNS\u3092\u7de8\u96c6\u3059\u308b\u3002\n![009.jpg](https://qiita-image-store.s3.amazonaws.com/0/62127/2a2d872a-5f89-5140-99f3-6ff0a670a975.jpeg)\n\n\n#4. \u30c6\u30b9\u30c8\u3068\u8003\u5bdf\u3002\n\n```\n# curl -I http://bluemixcdn01.mysl01.com/\nHTTP/1.1 200 OK\nX-Backside-Transport: OK OK\nCache-Control: public, max-age=0\nContent-Type: text/html; charset=UTF-8\nEtag: W/\"347-15337a80e90\"\nLast-Modified: Wed, 02 Mar 2016 14:07:54 GMT\nX-Cf-Requestid: 4fd791c8-4b75-4c62-654d-6e3474315bad\nX-Powered-By: Express\nX-Client-IP: xx.xx.xx.xx\nX-Global-Transaction-ID: 593764285\nContent-Length: 839\nAccept-Ranges: bytes\nDate: Wed, 02 Mar 2016 16:10:08 GMT\nVia: 1.1 varnish\nAge: 11\nConnection: keep-alive\nX-Served-By: cache-nrt6133-NRT\nX-Cache: HIT\nX-Cache-Hits: 2\nX-Timer: S1456935008.369276,VS0,VE0\n\n\n# curl -I http://cdn.bluemix.net -H \"host: bluemixcdn01.mysl01.com\"\nHTTP/1.1 200 OK\nX-Backside-Transport: OK OK\nCache-Control: public, max-age=0\nContent-Type: text/html; charset=UTF-8\nEtag: W/\"347-15337a80e90\"\nLast-Modified: Wed, 02 Mar 2016 14:07:54 GMT\nX-Cf-Requestid: 0747a0f3-eb19-4677-4d82-28872e8068f4\nX-Powered-By: Express\nX-Client-IP: xx.xx.xx.xx\nX-Global-Transaction-ID: 702885789\nContent-Length: 839\nAccept-Ranges: bytes\nDate: Wed, 02 Mar 2016 16:09:13 GMT\nVia: 1.1 varnish\nAge: 21\nConnection: keep-alive\nX-Served-By: cache-nrt6129-NRT\nX-Cache: HIT\nX-Cache-Hits: 6\nX-Timer: S1456934953.943458,VS0,VE0\n\n# nslookup cdn.bluemix.net\nServer:         10.0.80.11\nAddress:        10.0.80.11#53\n\nNon-authoritative answer:\ncdn.bluemix.net canonical name = global.prod.fastly.net.\nglobal.prod.fastly.net  canonical name = global-ssl.fastly.net.\nglobal-ssl.fastly.net   canonical name = fallback.global-ssl.fastly.net.\nName:   fallback.global-ssl.fastly.net\nAddress: xxx.xxx.xxx.xxx\n```\n\n- Bluemix\u306fSoftLayer\u306e\u4e0a\u3067\u7a3c\u52d5\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3066\u3063\u304d\u308a\u3053\u306eCDN\u30b5\u30fc\u30d3\u30b9\u3082EdgeCast\u3067\u52d5\u3044\u3066\u3044\u308b\u3082\u306e\u3060\u3068\u601d\u3063\u3066\u3044\u305f\u304c\u3001Fastly CDN\u3063\u307d\u3044\u3002\n- X-Cache\u304cHIT\u306b\u306a\u3063\u3066\u3044\u305f\u3089\u30ad\u30e3\u30c3\u30b7\u30e5\u30d2\u30c3\u30c8\u3002X-Cache-Hits\u3067\u30d2\u30c3\u30c8\u56de\u6570\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3088\u3046\u3060\u3002\n- \u7e70\u308a\u8fd4\u3057\u5b9f\u65bd\u3057\u3066\u307f\u308b\u3068\u3001\u300cX-Served-By\u300d\u306e\u7b87\u6240\u304c\u983b\u7e41\u306b\u5909\u66f4\u3055\u308c\u3066\u3001\u306a\u304b\u306a\u304bX-Cache-Hits\u306e\u6570\u304c\u5897\u3048\u306a\u3044\u30025\u56deWeb\u30a2\u30af\u30bb\u30b9\u3057\u305f\u30894\u56de\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u308b\u3068\u3044\u3046\u8a33\u3067\u306f\u306a\u304f\u30015\u56de\u3068\u3082\u5225\u3005\u306eEdgeServer\u7d4c\u7531\u3067\u30a2\u30af\u30bb\u30b9\u3055\u308c\u305f\u305f\u3081\u306b\u5168\u3066\u304c1st Hit\u3067\u3057\u305f\u3068\u3044\u3046\u3053\u3068\u3082\u3042\u308a\u3048\u305d\u3046\u3002\n- \u3088\u304f\u30a2\u30af\u30bb\u30b9\u304c\u8a70\u307e\u308b\u30fb\u30fb\u30fb\u3002\n- \u5fc5\u8981\u306b\u5fdc\u3058\u3066\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u30af\u30ea\u30a2\uff08Purge Cache\uff09\u3092\u5b9f\u65bd\u3059\u308b\u3068\u3088\u3044\u3002\n![008.jpg](https://qiita-image-store.s3.amazonaws.com/0/62127/f8191ab4-9bab-c324-70d2-b8de7e4f5623.jpeg)\n\n"}