{"context": " More than 1 year has passed since last update.OpenCV iOS - Video Processing\u3092\u5b9f\u969b\u306b\u52d5\u304b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\nIncluding OpenCV library in your iOS project\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u65b0\u898f\u4f5c\u6210\n\n\nstoryboard\u306f\u4f7f\u3063\u305f\u3053\u3068\u304c\u306a\u3044\u306e\u3067Empty Application\u3067\u4f5c\u6210\u3002\n\n\nopencv2.framework\u306e\u7d44\u307f\u8fbc\u307f\u3002\n-Prefix.pch\u306bopencv.hpp\u3092\u8ffd\u52a0\u3002\n\n\nExample video frame processing project\n\nUser Interface\n\nViewController\u3092\u65b0\u898f\u4f5c\u6210\u3057\u3066\u30ab\u30e1\u30e9\u7528\u306eImageView\u3068\u30dc\u30bf\u30f3\u3092\u8f09\u305b\u308b\u3002\n\n\n\u62e1\u5f35\u5b50\u306f.mm\u306b\u3059\u308b\u3002\n\u30dc\u30bf\u30f3\u306fStart/Stop\u306e\u30c8\u30b0\u30eb\u306b\u3059\u308b\u3002\n\n\nPortrait\u306e\u307f\u5bfe\u5fdc\u3002\n\n\n\u8a2d\u5b9a\uff08General - Deployment Info\uff09\u306eLandscape Left\u3068Landscape Right\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3059\u3002\n\n\n\n\nAppDelegate.m\n#import \"ViewController.h\"\n\n- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions\n{\n    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];\n    // Override point for customization after application launch.\n    self.window.backgroundColor = [UIColor whiteColor];\n    self.window.rootViewController = [[ViewController alloc] init];\n    [self.window makeKeyAndVisible];\n    return YES;\n}\n\n\n\nViewController.mm\n@interface ViewController ()\n{\n  BOOL shooting;\n  UIButton *button;\n}\n@end\n\n- (void)pushButton\n{\n  NSString *str;\n  if( shooting )\n  {\n    str = @\"Start\";\n  }\n  else\n  {\n    str = @\"Stop\";\n  }\n  [button setTitle:str forState:UIControlStateNormal];\n  shooting = !shooting;\n}\n\n- (void)viewDidLoad\n{\n  //camera view\n  UIImageView *camera = [[UIImageView alloc] initWithFrame:self.view.frame];\n  [self.view addSubview:camera];\n\n  //button\n  CGFloat sw = self.view.frame.size.width;\n  CGFloat sh = self.view.frame.size.height;\n  CGFloat w = sw/2;\n  CGFloat h = w/3;\n  button = [UIButton buttonWithType:UIButtonTypeRoundedRect];\n  button.frame = CGRectMake( (sw-w)/2, sh-h-h/2, w, h );\n  [button addTarget:self action:@selector(pushButton) forControlEvents:UIControlEventTouchUpInside];\n  button.backgroundColor = [UIColor orangeColor];\n  [self.view addSubview:button];\n\n  //initial\n  shooting = !NO;\n  [self pushButton];\n}\n\n\n\nAdding the Camera\n\nCvVideoCamera\u306e\u30e1\u30f3\u30d0grayscale\u306fgrayscaleMode\u306b\u540d\u524d\u304c\u5909\u308f\u3063\u3066\u305f\u3002(2.4.9)\n\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u8ffd\u52a0\u3002\n\n\nViewController.mm\n@interface ViewController ()\n{\n  CvVideoCamera *videoCamera;\n}\n@end\n\n- (void)viewDidLoad\n{\n  //camera\n  videoCamera = [[CvVideoCamera alloc] initWithParentView:camera];\n  videoCamera.defaultAVCaptureDevicePosition = AVCaptureDevicePositionFront;\n  videoCamera.defaultAVCaptureSessionPreset = AVCaptureSessionPresetHigh;\n  videoCamera.defaultAVCaptureVideoOrientation = AVCaptureVideoOrientationPortrait;\n  videoCamera.defaultFPS = 30;\n  videoCamera.grayscaleMode = NO;\n}\n\n\n\nProcessing frames\n\nDelegate\u3092\u8ffd\u52a0\u3002\n\n\nViewController.mm\n@interface ViewController () <CvVideoCameraDelegate>\n\n#ifdef __cplusplus\n- (void)processImage:(cv::Mat &)image\n{\n}\n#endif\n\n- (void)viewDidLoad\n{\n  videoCamera.delegate = self;\n}\n\n\n\nBasic video processing\n\nViewController.mm\n- (void)processImage:(cv::Mat &)image\n{\n  cv::Mat image_copy;\n  cv::cvtColor( image, image_copy, CV_BGRA2BGR );\n\n  //invert\n  cv::bitwise_not( image_copy, image_copy );\n  cv::cvtColor( image_copy, image, CV_BGR2BGRA );\n}\n\n\n\nStart! (and Stop)\n\nViewController.mm\n- (void)pushButton\n{\n  if( shooting )\n  {\n    [videoCamera stop];\n  }\n  else\n  {\n    [videoCamera start];\n  }\n}\n\n\n\nHints Problems\n\n\nStart/Stop\u3092\u7e70\u308a\u8fd4\u3059\u3068\u731b\u70c8\u306b\u30e1\u30e2\u30ea\u30ea\u30fc\u30af\u3059\u308b\u3002\n\n\u30ea\u30fc\u30af\u306f\u3057\u3066\u306a\u3044\u3063\u307d\u3044\u3002Start\u6642\u306b\u7570\u5e38\u306a\u30b5\u30a4\u30ba\u306e\u30e1\u30e2\u30ea\u3092\u78ba\u4fdd\u3057\u3066\u3044\u308b\u6a21\u69d8\u3002\n\n\n\u6a2a\u3092\u5411\u3051\u305f\u72b6\u614b\u3067Start\u3059\u308b\u3068\u30ab\u30e1\u30e9\u304c\u6a2a\u3092\u5411\u3044\u3066\u3044\u308b\u3002\n\n[OpenCV iOS - Video Processing](http://docs.opencv.org/doc/tutorials/ios/video_processing/video_processing.html)\u3092\u5b9f\u969b\u306b\u52d5\u304b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n# Including OpenCV library in your iOS project\n* \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u65b0\u898f\u4f5c\u6210\n * storyboard\u306f\u4f7f\u3063\u305f\u3053\u3068\u304c\u306a\u3044\u306e\u3067Empty Application\u3067\u4f5c\u6210\u3002\n* opencv2.framework\u306e\u7d44\u307f\u8fbc\u307f\u3002\n* -Prefix.pch\u306bopencv.hpp\u3092\u8ffd\u52a0\u3002\n\n## Example video frame processing project\n\n### User Interface\n* ViewController\u3092\u65b0\u898f\u4f5c\u6210\u3057\u3066\u30ab\u30e1\u30e9\u7528\u306eImageView\u3068\u30dc\u30bf\u30f3\u3092\u8f09\u305b\u308b\u3002\n * \u62e1\u5f35\u5b50\u306f.mm\u306b\u3059\u308b\u3002\n * \u30dc\u30bf\u30f3\u306fStart/Stop\u306e\u30c8\u30b0\u30eb\u306b\u3059\u308b\u3002\n* Portrait\u306e\u307f\u5bfe\u5fdc\u3002\n * \u8a2d\u5b9a\uff08General - Deployment Info\uff09\u306e`Landscape Left`\u3068`Landscape Right`\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3059\u3002\n\n```objc:AppDelegate.m\n#import \"ViewController.h\"\n\n- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions\n{\n    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];\n    // Override point for customization after application launch.\n    self.window.backgroundColor = [UIColor whiteColor];\n    self.window.rootViewController = [[ViewController alloc] init];\n    [self.window makeKeyAndVisible];\n    return YES;\n}\n```\n\n```objc:ViewController.mm\n@interface ViewController ()\n{\n  BOOL shooting;\n  UIButton *button;\n}\n@end\n\n- (void)pushButton\n{\n  NSString *str;\n  if( shooting )\n  {\n    str = @\"Start\";\n  }\n  else\n  {\n    str = @\"Stop\";\n  }\n  [button setTitle:str forState:UIControlStateNormal];\n  shooting = !shooting;\n}\n\n- (void)viewDidLoad\n{\n  //camera view\n  UIImageView *camera = [[UIImageView alloc] initWithFrame:self.view.frame];\n  [self.view addSubview:camera];\n  \n  //button\n  CGFloat sw = self.view.frame.size.width;\n  CGFloat sh = self.view.frame.size.height;\n  CGFloat w = sw/2;\n  CGFloat h = w/3;\n  button = [UIButton buttonWithType:UIButtonTypeRoundedRect];\n  button.frame = CGRectMake( (sw-w)/2, sh-h-h/2, w, h );\n  [button addTarget:self action:@selector(pushButton) forControlEvents:UIControlEventTouchUpInside];\n  button.backgroundColor = [UIColor orangeColor];\n  [self.view addSubview:button];\n  \n  //initial\n  shooting = !NO;\n  [self pushButton];\n}\n```\n\n### Adding the Camera\n* CvVideoCamera\u306e\u30e1\u30f3\u30d0`grayscale`\u306f`grayscaleMode`\u306b\u540d\u524d\u304c\u5909\u308f\u3063\u3066\u305f\u3002(2.4.9)\n* \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u8ffd\u52a0\u3002\n\n```objc:ViewController.mm\n@interface ViewController ()\n{\n  CvVideoCamera *videoCamera;\n}\n@end\n\n- (void)viewDidLoad\n{\n  //camera\n  videoCamera = [[CvVideoCamera alloc] initWithParentView:camera];\n  videoCamera.defaultAVCaptureDevicePosition = AVCaptureDevicePositionFront;\n  videoCamera.defaultAVCaptureSessionPreset = AVCaptureSessionPresetHigh;\n  videoCamera.defaultAVCaptureVideoOrientation = AVCaptureVideoOrientationPortrait;\n  videoCamera.defaultFPS = 30;\n  videoCamera.grayscaleMode = NO;\n}\n```\n\n### Processing frames\n* Delegate\u3092\u8ffd\u52a0\u3002\n\n```objc:ViewController.mm\n@interface ViewController () <CvVideoCameraDelegate>\n\n#ifdef __cplusplus\n- (void)processImage:(cv::Mat &)image\n{\n}\n#endif\n\n- (void)viewDidLoad\n{\n  videoCamera.delegate = self;\n}\n```\n\n### Basic video processing\n```objc:ViewController.mm\n- (void)processImage:(cv::Mat &)image\n{\n  cv::Mat image_copy;\n  cv::cvtColor( image, image_copy, CV_BGRA2BGR );\n  \n  //invert\n  cv::bitwise_not( image_copy, image_copy );\n  cv::cvtColor( image_copy, image, CV_BGR2BGRA );\n}\n```\n\n### Start! (and Stop)\n```objc:ViewController.mm\n- (void)pushButton\n{\n  if( shooting )\n  {\n    [videoCamera stop];\n  }\n  else\n  {\n    [videoCamera start];\n  }\n}\n```\n\n### ~~Hints~~ Problems\n* ~~Start/Stop\u3092\u7e70\u308a\u8fd4\u3059\u3068\u731b\u70c8\u306b\u30e1\u30e2\u30ea\u30ea\u30fc\u30af\u3059\u308b\u3002~~\n * \u30ea\u30fc\u30af\u306f\u3057\u3066\u306a\u3044\u3063\u307d\u3044\u3002Start\u6642\u306b\u7570\u5e38\u306a\u30b5\u30a4\u30ba\u306e\u30e1\u30e2\u30ea\u3092\u78ba\u4fdd\u3057\u3066\u3044\u308b\u6a21\u69d8\u3002\n* \u6a2a\u3092\u5411\u3051\u305f\u72b6\u614b\u3067Start\u3059\u308b\u3068\u30ab\u30e1\u30e9\u304c\u6a2a\u3092\u5411\u3044\u3066\u3044\u308b\u3002\n", "tags": ["iOS7", "Xcode5.1.1", "OpenCV2.4.9"]}