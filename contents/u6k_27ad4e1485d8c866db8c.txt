{"context": " More than 1 year has passed since last update.OpenShift\u4e0a\u3067Redmine\u3092\u69cb\u7bc9\u30fb\u904b\u7528\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u304c\u3067\u304d\u308b\u8a2d\u5b9a\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u307e\u305f\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u3082\u53e4\u304b\u3063\u305f\u3067\u3059\u3002\u305d\u3053\u3067\u3001Redmine\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3092\u884c\u3044\u307e\u3057\u305f\u3002\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u624b\u9806\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n\u69cb\u7bc9\u624b\u9806\n\u524d\u56de\u306fopenshift/openshift-redmine-quickstart\u3067Redmine\u3092\u69cb\u7bc9\u3057\u307e\u3057\u305f\u3002\u6539\u3081\u3066\u826f\u3044\u69cb\u7bc9\u624b\u9806\u306f\u306a\u3044\u304b\u3068\u63a2\u3057\u305f\u3089\u3001Redmine 2.4\u3092\u898b\u3064\u3051\u307e\u3057\u305f\u3002\n\u3053\u306e\u624b\u9806\u3060\u3068\u3001\u30dc\u30bf\u30f31\u62bc\u3057\u3067\u69cb\u7bc9\u3067\u304d\u308b\u4e0a\u306b\u3001\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3067\u304d\u308b\u8a2d\u5b9a\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u69cb\u7bc9\u4f5c\u696d\u3092\u5b9f\u65bd\u3059\u308b\u624b\u9806\u3092\u8003\u3048\u307e\u3057\u305f\u3002\n\n\u65e7Redmine\u306e\u30c7\u30fc\u30bf(MySQL\u3001\u30d5\u30a1\u30a4\u30eb)\u3092\u30c0\u30f3\u30d7\u3059\u308b\u3002\n\u4e0a\u8a18\u624b\u9806\u3067\u3001\u65b0Redmine\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u307f\u308b\u3002\n\n\n\u30c7\u30d7\u30ed\u30a4\u5f8c\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u3001\u30c1\u30b1\u30c3\u30c8\u4f5c\u6210\u306a\u3069\u3067\u52d5\u4f5c\u78ba\u8a8d\u3059\u308b\u3002\n\n\n\u65b0Redmine\u306b\u30c7\u30fc\u30bf\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u3002\n\u3057\u3070\u3089\u304f\u4f7f\u3063\u305f\u5f8c\u3001\u554f\u984c\u7121\u3044\u3068\u5224\u65ad\u3057\u305f\u3089\u3001\u65e7Redmine\u3092\u524a\u9664\u3059\u308b\u3002\n\n\n\u65e7Redmine\u306e\u30c7\u30fc\u30bf\u3092\u30c0\u30f3\u30d7\nMySQL\u30c7\u30fc\u30bf\u3092\u30c0\u30f3\u30d7\u3057\u3001\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002MySQL\u3078\u306e\u63a5\u7d9a\u3001ssh\u63a5\u7d9a\u306e\u65b9\u6cd5\u306fOpenShift\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u63a5\u7d9a\u30fb\u30c0\u30f3\u30d7\u3057\u307e\u3059\u3002\n\n\u65b0Redmine\u3092\u69cb\u7bc9\nRedmine 2.4\u306e\u624b\u9806\u3067\u69cb\u7bc9\u3057\u307e\u3057\u305f\u3002\u5fc5\u8981\u60c5\u5831\u3092\u5165\u529b\u3057\u3066\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3060\u3051\u306a\u306e\u3067\u3001\u7279\u306b\u8ff7\u3046\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u30c7\u30d7\u30ed\u30a4\u5f8c\u3001\u5ff5\u306e\u70ba\u306b\u30c7\u30d7\u30ed\u30a4\u72b6\u6cc1\u3092\u78ba\u8a8d\u3057\u305f\u3002rhc show-app\u30b3\u30de\u30f3\u30c9\u3067\u30a2\u30d7\u30ea\u60c5\u5831\u3092\u78ba\u8a8d\u3057\u305f\u3068\u3053\u308d\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n>rhc show-app myredmine\nDL is deprecated, please use Fiddle\nmyredmine @ http://myredmine-u6kapps.rhcloud.com/ (uuid: 5507c99dfcf933bc9c000162)\n----------------------------------------------------------------------------------\n  Domain:          u6kapps\n  Created:         3:28 PM\n  Gears:           2 (defaults to small)\n  Git URL:         ssh://5507c99dfcf933bc9c000162@myredmine-u6kapps.rhcloud.com/~/git/myredmine.git/\n  Initial Git URL: https://github.com/openshift/openshift-redmine-quickstart.git\n  SSH:             5507c99dfcf933bc9c000162@myredmine-u6kapps.rhcloud.com\n  Deployment:      auto (on git push)\n\n  mysql-5.5 (MySQL 5.5)\n  ---------------------\n    Gears:          1 small\n    Connection URL: mysql://$OPENSHIFT_MYSQL_DB_HOST:$OPENSHIFT_MYSQL_DB_PORT/\n    Database Name:  myredmine\n    Password:       ***\n    Username:       ***\n\n  haproxy-1.4 (Web Load Balancer)\n  -------------------------------\n    Gears: Located with ruby-1.9\n\n  ruby-1.9 (Ruby 1.9)\n  -------------------\n    Scaling: x1 (minimum: 1, maximum: available) on small gears\n\nMySQL\u63a5\u7d9a\u60c5\u5831\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002MySQL\u30db\u30b9\u30c8\u3068\u30dd\u30fc\u30c8\u756a\u53f7\u304c\u74b0\u5883\u5909\u6570\u3067\u3059\u304c\u3001\u3053\u308c\u306f\u3053\u308c\u3067\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\nssh\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3001MySQL\u63a5\u7d9a\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n> mysql -h $OPENSHIFT_MYSQL_DB_HOST -P $OPENSHIFT_MYSQL_DB_PORT -u *** --password=***\nReading table information for completion of table and column names\nYou can turn off this feature to get a quicker startup with -A\n\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 8\nServer version: 5.5.41 MySQL Community Server (GPL)\n\nCopyright (c) 2000, 2014, Oracle and/or its affiliates. All rights reserved.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> \n\n\u63a5\u7d9a\u3067\u304d\u307e\u3057\u305f\u3002\u3064\u3044\u3067\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3082\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\nmysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| myredmine          |\n| mysql              |\n| performance_schema |\n+--------------------+\n4 rows in set (0.00 sec)\n\n\u3068\u308a\u3042\u3048\u305a\u3001\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u65b0Redmine\u3067\u52d5\u4f5c\u78ba\u8a8d\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u65b0Redmine\u306b\u30c7\u30fc\u30bf\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\nmyredmine\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4e8b\u524d\u30c0\u30f3\u30d7\u3057\u305f\u30c7\u30fc\u30bf\u3068\u5165\u308c\u66ff\u3048\u307e\u3059\u3002\n\u307e\u305a\u3001myredmine\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u524a\u9664\u3057\u3066\u3001\u4f5c\u6210\u3057\u76f4\u3057\u307e\u3059\u3002\nmysql> drop database myredmine;\nQuery OK, 0 rows affected (0.02 sec)\n\nmysql> create database myredmine character set utf8;\nQuery OK, 1 row affected (0.00 sec)\n\n\u65e2\u5b58Redmine\u306eMySQL\u30c0\u30f3\u30d7\u30c7\u30fc\u30bf\u3092OpenShift\u30db\u30b9\u30c8\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066MySQL\u306b\u30c7\u30fc\u30bf\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002\n> mysql -h $OPENSHIFT_MYSQL_DB_HOST -P $OPENSHIFT_MYSQL_DB_PORT -u *** --password=*** myredmine < redmine_20150317-164347.sql\n\n\u30a4\u30f3\u30dd\u30fc\u30c8\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n> mysql -h $OPENSHIFT_MYSQL_DB_HOST -P $OPENSHIFT_MYSQL_DB_PORT -u *** --password=*** myredmine\n\nmysql> show tables;\n+-------------------------------------+\n| Tables_in_myredmine                 |\n+-------------------------------------+\n| attachments                         |\n| auth_sources                        |\n| boards                              |\n| changes                             |\n| changeset_parents                   |\n| changesets                          |\n| changesets_issues                   |\n| comments                            |\n| custom_fields                       |\n| custom_fields_projects              |\n| custom_fields_roles                 |\n| custom_fields_trackers              |\n| custom_values                       |\n| documents                           |\n| enabled_modules                     |\n| enumerations                        |\n| groups_users                        |\n| issue_categories                    |\n| issue_relations                     |\n| issue_statuses                      |\n| issues                              |\n| journal_details                     |\n| journals                            |\n| member_roles                        |\n| members                             |\n| messages                            |\n| news                                |\n| open_id_authentication_associations |\n| open_id_authentication_nonces       |\n| projects                            |\n| projects_trackers                   |\n| queries                             |\n| queries_roles                       |\n| repositories                        |\n| roles                               |\n| schema_migrations                   |\n| settings                            |\n| time_entries                        |\n| tokens                              |\n| trackers                            |\n| user_preferences                    |\n| users                               |\n| versions                            |\n| watchers                            |\n| wiki_content_versions               |\n| wiki_contents                       |\n| wiki_pages                          |\n| wiki_redirects                      |\n| wikis                               |\n| workflows                           |\n+-------------------------------------+\n50 rows in set (0.01 sec)\n\nmysql> select count(1) from issues;\n+----------+\n| count(1) |\n+----------+\n|     3261 |\n+----------+\n1 row in set (0.01 sec)\n\n\u30a4\u30f3\u30dd\u30fc\u30c8\u306f\u3067\u304d\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u6b21\u306bDB\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001OpenShift\u30db\u30b9\u30c8\u4e0a\u3067rake\u3092\u76f4\u63a5\u5b9f\u884c\u3059\u308b\u65b9\u6cd5\u304c\u5206\u304b\u308a\u307e\u305b\u3093\u3002git push\u3059\u308b\u3068\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306a\u3069\u4e00\u9023\u306e\u51e6\u7406\u304c\u81ea\u52d5\u7684\u306b\u5b9f\u884c\u3055\u308c\u308b\u3053\u3068\u306f\u77e5\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u3067\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\ngit clone\u3057\u3066\u9069\u5f53\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u64cd\u4f5c\u3057\u3066git push\u3057\u3066\u307f\u307e\u3059\u3002\n> vi README.md\n> git add README.md\n> git commit -m commit\n> git push\nwarning: push.default is unset; its implicit value is changing in\nGit 2.0 from 'matching' to 'simple'. To squelch this message\nand maintain the current behavior after the default changes, use:\n\n  git config --global push.default matching\n\nTo squelch this message and adopt the new behavior now, use:\n\n  git config --global push.default simple\n\nSee 'git help config' and search for 'push.default' for further information.\n(the 'simple' mode was introduced in Git 1.7.11. Use the similar mode\n'current' instead of 'simple' if you sometimes use older versions of Git)\n\nCounting objects: 5, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (3/3), done.\nWriting objects: 100% (3/3), 318 bytes, done.\nTotal 3 (delta 2), reused 0 (delta 0)\nremote: Stopping Ruby cartridge\nremote: Waiting for stop to finish\nremote: Waiting for stop to finish\nremote: Waiting for stop to finish\nremote: Waiting for stop to finish\nremote: Waiting for stop to finish\nremote: Waiting for stop to finish\nremote: Waiting for stop to finish\nremote: Waiting for stop to finish\nremote: Syncing git content to other proxy gears\nremote: Saving away previously bundled RubyGems\nremote: Building git ref 'master', commit 5d7b3f0\nremote: Building Ruby cartridge\nremote: Restoring previously bundled RubyGems\nremote: NOTE: You can commit .openshift/markers/force_clean_build to force a clean bundle\nremote: NOTE: Skipping 'bundle install' because Gemfile is not modified.\nremote: Preparing build for deployment\nremote: Deployment id is 3fd2bb5a\nremote: Activating deployment\nremote: HAProxy already running\nremote: HAProxy instance is started\nremote: Compilation of assets is disabled or assets not detected.\nremote: Starting Ruby cartridge\nremote: ------------------------\nremote: Selected DBMS: mysql\nremote: ------------------------\nremote: Migrating database\nremote: Generating secret token\nremote: -------------------------\nremote: Git Post-Receive Result: success\nremote: Activation status: success\nremote: Deployment completed with status: success\nTo /var/lib/openshift/5507c99dfcf933bc9c000162//git/myredmine.git/\n   3def682..5d7b3f0  master -> master\n\nDB\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3001\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30c8\u30fc\u30af\u30f3\u306e\u751f\u6210\u304c\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u8a2d\u5b9a\u306e\u79fb\u884c\n\u65e2\u5b58Redmine\u306e\u65b0Redmine\u306b\u79fb\u884c\u3057\u307e\u3059\u3002\n\u65e2\u5b58Redmine\u3092git clone\u3057\u3066config/configuration.yml\u3092\u78ba\u8a8d\u3057\u305f\u3068\u3053\u308d\u3001\u30e1\u30fc\u30eb\u9001\u4fe1\u8a2d\u5b9a\u3092\u66f8\u3044\u3066\u3044\u307e\u3057\u305f\u3002\ndefault:\n  email_delivery:\n    delivery_method: :smtp\n    smtp_settings:\n      address: smtp.gmail.com\n      port: 587\n      domain: smtp.gmail.com\n      authentication: :login\n      user_name: \"u6k.apps@gmail.com\"\n      password: \"***\"\n      enable_starttls_auto: true\n\n\u540c\u69d8\u306e\u8a2d\u5b9a\u3092\u3001\u65b0Redmine\u306b\u3082\u66f8\u304d\u307e\u3059\u3002\n\u307e\u305a\u3001\u65b0Redmine\u3092git clone\u3057\u307e\u3059\u3002Git\u30ea\u30dd\u30b8\u30c8\u30eaURL\u306frhc show-app\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\nconfig/configuration.yml\u3092\u4f5c\u6210\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001.gitignore\u306bconfig/configuration.yml\u304c\u7121\u8996\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n> vi .gitignore\n\nconfig/configuration.yml.sample\u3092config/configuration.yml\u306b\u30b3\u30d4\u30fc\u3057\u3066\u3001\u4e0a\u8a18\u8a2d\u5b9a\u3092\u66f8\u304d\u307e\u3059\u3002\n> cp config/configuration.yml.sample config/configuration.yml\n> vi config/configuration.yml\n\n\u7de8\u96c6\u3092\u30b3\u30df\u30c3\u30c8\u3057\u3066\u3001git push\u3057\u307e\u3059\u3002\n> git add .gitignore\n> git add config/configuration.yml\n> git commit -m \"update config\"\n> git push\n\n\n\u30c6\u30fc\u30de\u306e\u79fb\u884c\n\u4ee5\u524d\u306fgitmike\u3092\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u3002\u9762\u5012\u306a\u306e\u3067\u5f8c\u3067\u9069\u7528\u3057\u3088\u3046\u3002\n\n\u304a\u308f\u308a\u306b\n\u4ee5\u4e0a\u3067\u3001\u65b0Redmine\u306e\u69cb\u7bc9\u3068\u30c7\u30fc\u30bf\u30fb\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306f\u5b8c\u4e86\u3067\u3059\u30021\u30f6\u6708\u7a0b\u5ea6\u4f7f\u3044\u307e\u3057\u305f\u304c\u7279\u306b\u554f\u984c\u306f\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001\u65e7Redmine\u306f\u524a\u9664\u3057\u307e\u3057\u305f\u3002\n\n(\u304a\u307e\u3051)Jenkins\u30b8\u30e7\u30d6\u8a2d\u5b9a - \u5b9a\u671f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\nJenkins\u3067Redmine\u306eMySQL\u30c7\u30fc\u30bf\u30c0\u30f3\u30d7\u3092\u5b9a\u671f\u7684\u306b\u53d6\u5f97\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u306e\u30b8\u30e7\u30d6\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\nssh -i /etc/jenkins/id_rsa_openshift ***@myredmine-u6kapps.rhcloud.com -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null \"mysqldump -h ***-u6kapps.rhcloud.com -P 59861 -u *** --password=*** --lock-all-tables myredmine\" | gzip | sudo tee /var/owncloud/u6k/files/backup/Redmine_on_OpenShift/myredmine_`date +%Y%m%d-%H%M%S`.sql.gz\n\nrhc show-app\u3067\u306fMySQL\u30db\u30b9\u30c8\u540d\u3001\u30dd\u30fc\u30c8\u756a\u53f7\u304c\u74b0\u5883\u5909\u6570\u3067\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u4e0a\u8a18\u30b3\u30de\u30f3\u30c9\u306b\u74b0\u5883\u5909\u6570\u3092\u6307\u5b9a\u3057\u3066\u3082\u7a7a\u306b\u306a\u308b\u3060\u3051\u306a\u306e\u3067\u3001\u4ed5\u65b9\u306a\u3044\u306e\u3067OpenShift\u30db\u30b9\u30c8\u306bssh\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3001\u74b0\u5883\u5909\u6570\u306e\u5177\u4f53\u7684\u306a\u5024\u3092\u8abf\u3079\u307e\u3057\u305f\u3002\n> echo $OPENSHIFT_MYSQL_DB_HOST\n***-u6kapps.rhcloud.com\n> echo $OPENSHIFT_MYSQL_DB_PORT\n59861\n\nJenkins\u30b8\u30e7\u30d6\u3092\u624b\u52d5\u5b9f\u884c\u3057\u3066\u3001\u60f3\u5b9a\u901a\u308a\u306bDB\u30c0\u30f3\u30d7\u30c7\u30fc\u30bf\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\nOpenShift\u4e0a\u3067Redmine\u3092\u69cb\u7bc9\u30fb\u904b\u7528\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u304c\u3067\u304d\u308b\u8a2d\u5b9a\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u307e\u305f\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u3082\u53e4\u304b\u3063\u305f\u3067\u3059\u3002\u305d\u3053\u3067\u3001Redmine\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3092\u884c\u3044\u307e\u3057\u305f\u3002\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u624b\u9806\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n<!-- more -->\n\n# \u69cb\u7bc9\u624b\u9806\n\n\u524d\u56de\u306f[openshift/openshift-redmine-quickstart](https://github.com/openshift/openshift-redmine-quickstart)\u3067Redmine\u3092\u69cb\u7bc9\u3057\u307e\u3057\u305f\u3002\u6539\u3081\u3066\u826f\u3044\u69cb\u7bc9\u624b\u9806\u306f\u306a\u3044\u304b\u3068\u63a2\u3057\u305f\u3089\u3001[Redmine 2.4](https://hub.openshift.com/quickstarts/5-redmine-2-4)\u3092\u898b\u3064\u3051\u307e\u3057\u305f\u3002\n\n\u3053\u306e\u624b\u9806\u3060\u3068\u3001\u30dc\u30bf\u30f31\u62bc\u3057\u3067\u69cb\u7bc9\u3067\u304d\u308b\u4e0a\u306b\u3001\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3067\u304d\u308b\u8a2d\u5b9a\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u69cb\u7bc9\u4f5c\u696d\u3092\u5b9f\u65bd\u3059\u308b\u624b\u9806\u3092\u8003\u3048\u307e\u3057\u305f\u3002\n\n* \u65e7Redmine\u306e\u30c7\u30fc\u30bf(MySQL\u3001\u30d5\u30a1\u30a4\u30eb)\u3092\u30c0\u30f3\u30d7\u3059\u308b\u3002\n* \u4e0a\u8a18\u624b\u9806\u3067\u3001\u65b0Redmine\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u307f\u308b\u3002\n\t* \u30c7\u30d7\u30ed\u30a4\u5f8c\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u3001\u30c1\u30b1\u30c3\u30c8\u4f5c\u6210\u306a\u3069\u3067\u52d5\u4f5c\u78ba\u8a8d\u3059\u308b\u3002\n* \u65b0Redmine\u306b\u30c7\u30fc\u30bf\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u3002\n* \u3057\u3070\u3089\u304f\u4f7f\u3063\u305f\u5f8c\u3001\u554f\u984c\u7121\u3044\u3068\u5224\u65ad\u3057\u305f\u3089\u3001\u65e7Redmine\u3092\u524a\u9664\u3059\u308b\u3002\n\n# \u65e7Redmine\u306e\u30c7\u30fc\u30bf\u3092\u30c0\u30f3\u30d7\n\nMySQL\u30c7\u30fc\u30bf\u3092\u30c0\u30f3\u30d7\u3057\u3001\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002MySQL\u3078\u306e\u63a5\u7d9a\u3001ssh\u63a5\u7d9a\u306e\u65b9\u6cd5\u306fOpenShift\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u63a5\u7d9a\u30fb\u30c0\u30f3\u30d7\u3057\u307e\u3059\u3002\n\n# \u65b0Redmine\u3092\u69cb\u7bc9\n\n[Redmine 2.4](https://hub.openshift.com/quickstarts/5-redmine-2-4)\u306e\u624b\u9806\u3067\u69cb\u7bc9\u3057\u307e\u3057\u305f\u3002\u5fc5\u8981\u60c5\u5831\u3092\u5165\u529b\u3057\u3066\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3060\u3051\u306a\u306e\u3067\u3001\u7279\u306b\u8ff7\u3046\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u30c7\u30d7\u30ed\u30a4\u5f8c\u3001\u5ff5\u306e\u70ba\u306b\u30c7\u30d7\u30ed\u30a4\u72b6\u6cc1\u3092\u78ba\u8a8d\u3057\u305f\u3002`rhc show-app`\u30b3\u30de\u30f3\u30c9\u3067\u30a2\u30d7\u30ea\u60c5\u5831\u3092\u78ba\u8a8d\u3057\u305f\u3068\u3053\u308d\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n\n```\n>rhc show-app myredmine\nDL is deprecated, please use Fiddle\nmyredmine @ http://myredmine-u6kapps.rhcloud.com/ (uuid: 5507c99dfcf933bc9c000162)\n----------------------------------------------------------------------------------\n  Domain:          u6kapps\n  Created:         3:28 PM\n  Gears:           2 (defaults to small)\n  Git URL:         ssh://5507c99dfcf933bc9c000162@myredmine-u6kapps.rhcloud.com/~/git/myredmine.git/\n  Initial Git URL: https://github.com/openshift/openshift-redmine-quickstart.git\n  SSH:             5507c99dfcf933bc9c000162@myredmine-u6kapps.rhcloud.com\n  Deployment:      auto (on git push)\n\n  mysql-5.5 (MySQL 5.5)\n  ---------------------\n    Gears:          1 small\n    Connection URL: mysql://$OPENSHIFT_MYSQL_DB_HOST:$OPENSHIFT_MYSQL_DB_PORT/\n    Database Name:  myredmine\n    Password:       ***\n    Username:       ***\n\n  haproxy-1.4 (Web Load Balancer)\n  -------------------------------\n    Gears: Located with ruby-1.9\n\n  ruby-1.9 (Ruby 1.9)\n  -------------------\n    Scaling: x1 (minimum: 1, maximum: available) on small gears\n```\n\nMySQL\u63a5\u7d9a\u60c5\u5831\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002MySQL\u30db\u30b9\u30c8\u3068\u30dd\u30fc\u30c8\u756a\u53f7\u304c\u74b0\u5883\u5909\u6570\u3067\u3059\u304c\u3001\u3053\u308c\u306f\u3053\u308c\u3067\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\nssh\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3001MySQL\u63a5\u7d9a\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n> mysql -h $OPENSHIFT_MYSQL_DB_HOST -P $OPENSHIFT_MYSQL_DB_PORT -u *** --password=***\nReading table information for completion of table and column names\nYou can turn off this feature to get a quicker startup with -A\n\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 8\nServer version: 5.5.41 MySQL Community Server (GPL)\n\nCopyright (c) 2000, 2014, Oracle and/or its affiliates. All rights reserved.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> \n```\n\n\u63a5\u7d9a\u3067\u304d\u307e\u3057\u305f\u3002\u3064\u3044\u3067\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3082\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\nmysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| myredmine          |\n| mysql              |\n| performance_schema |\n+--------------------+\n4 rows in set (0.00 sec)\n```\n\n\u3068\u308a\u3042\u3048\u305a\u3001\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u65b0Redmine\u3067\u52d5\u4f5c\u78ba\u8a8d\u3092\u884c\u3044\u307e\u3059\u3002\n\n# \u65b0Redmine\u306b\u30c7\u30fc\u30bf\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\n\n`myredmine`\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4e8b\u524d\u30c0\u30f3\u30d7\u3057\u305f\u30c7\u30fc\u30bf\u3068\u5165\u308c\u66ff\u3048\u307e\u3059\u3002\n\n\u307e\u305a\u3001`myredmine`\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u524a\u9664\u3057\u3066\u3001\u4f5c\u6210\u3057\u76f4\u3057\u307e\u3059\u3002\n\n```\nmysql> drop database myredmine;\nQuery OK, 0 rows affected (0.02 sec)\n\nmysql> create database myredmine character set utf8;\nQuery OK, 1 row affected (0.00 sec)\n```\n\n\u65e2\u5b58Redmine\u306eMySQL\u30c0\u30f3\u30d7\u30c7\u30fc\u30bf\u3092OpenShift\u30db\u30b9\u30c8\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066MySQL\u306b\u30c7\u30fc\u30bf\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u307e\u3059\u3002\n\n```\n> mysql -h $OPENSHIFT_MYSQL_DB_HOST -P $OPENSHIFT_MYSQL_DB_PORT -u *** --password=*** myredmine < redmine_20150317-164347.sql\n```\n\n\u30a4\u30f3\u30dd\u30fc\u30c8\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\n> mysql -h $OPENSHIFT_MYSQL_DB_HOST -P $OPENSHIFT_MYSQL_DB_PORT -u *** --password=*** myredmine\n\nmysql> show tables;\n+-------------------------------------+\n| Tables_in_myredmine                 |\n+-------------------------------------+\n| attachments                         |\n| auth_sources                        |\n| boards                              |\n| changes                             |\n| changeset_parents                   |\n| changesets                          |\n| changesets_issues                   |\n| comments                            |\n| custom_fields                       |\n| custom_fields_projects              |\n| custom_fields_roles                 |\n| custom_fields_trackers              |\n| custom_values                       |\n| documents                           |\n| enabled_modules                     |\n| enumerations                        |\n| groups_users                        |\n| issue_categories                    |\n| issue_relations                     |\n| issue_statuses                      |\n| issues                              |\n| journal_details                     |\n| journals                            |\n| member_roles                        |\n| members                             |\n| messages                            |\n| news                                |\n| open_id_authentication_associations |\n| open_id_authentication_nonces       |\n| projects                            |\n| projects_trackers                   |\n| queries                             |\n| queries_roles                       |\n| repositories                        |\n| roles                               |\n| schema_migrations                   |\n| settings                            |\n| time_entries                        |\n| tokens                              |\n| trackers                            |\n| user_preferences                    |\n| users                               |\n| versions                            |\n| watchers                            |\n| wiki_content_versions               |\n| wiki_contents                       |\n| wiki_pages                          |\n| wiki_redirects                      |\n| wikis                               |\n| workflows                           |\n+-------------------------------------+\n50 rows in set (0.01 sec)\n\nmysql> select count(1) from issues;\n+----------+\n| count(1) |\n+----------+\n|     3261 |\n+----------+\n1 row in set (0.01 sec)\n```\n\n\u30a4\u30f3\u30dd\u30fc\u30c8\u306f\u3067\u304d\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u6b21\u306bDB\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001OpenShift\u30db\u30b9\u30c8\u4e0a\u3067`rake`\u3092\u76f4\u63a5\u5b9f\u884c\u3059\u308b\u65b9\u6cd5\u304c\u5206\u304b\u308a\u307e\u305b\u3093\u3002`git push`\u3059\u308b\u3068\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306a\u3069\u4e00\u9023\u306e\u51e6\u7406\u304c\u81ea\u52d5\u7684\u306b\u5b9f\u884c\u3055\u308c\u308b\u3053\u3068\u306f\u77e5\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u3067\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n\n`git clone`\u3057\u3066\u9069\u5f53\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u64cd\u4f5c\u3057\u3066`git push`\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\n> vi README.md\n> git add README.md\n> git commit -m commit\n> git push\nwarning: push.default is unset; its implicit value is changing in\nGit 2.0 from 'matching' to 'simple'. To squelch this message\nand maintain the current behavior after the default changes, use:\n\n  git config --global push.default matching\n\nTo squelch this message and adopt the new behavior now, use:\n\n  git config --global push.default simple\n\nSee 'git help config' and search for 'push.default' for further information.\n(the 'simple' mode was introduced in Git 1.7.11. Use the similar mode\n'current' instead of 'simple' if you sometimes use older versions of Git)\n\nCounting objects: 5, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (3/3), done.\nWriting objects: 100% (3/3), 318 bytes, done.\nTotal 3 (delta 2), reused 0 (delta 0)\nremote: Stopping Ruby cartridge\nremote: Waiting for stop to finish\nremote: Waiting for stop to finish\nremote: Waiting for stop to finish\nremote: Waiting for stop to finish\nremote: Waiting for stop to finish\nremote: Waiting for stop to finish\nremote: Waiting for stop to finish\nremote: Waiting for stop to finish\nremote: Syncing git content to other proxy gears\nremote: Saving away previously bundled RubyGems\nremote: Building git ref 'master', commit 5d7b3f0\nremote: Building Ruby cartridge\nremote: Restoring previously bundled RubyGems\nremote: NOTE: You can commit .openshift/markers/force_clean_build to force a clean bundle\nremote: NOTE: Skipping 'bundle install' because Gemfile is not modified.\nremote: Preparing build for deployment\nremote: Deployment id is 3fd2bb5a\nremote: Activating deployment\nremote: HAProxy already running\nremote: HAProxy instance is started\nremote: Compilation of assets is disabled or assets not detected.\nremote: Starting Ruby cartridge\nremote: ------------------------\nremote: Selected DBMS: mysql\nremote: ------------------------\nremote: Migrating database\nremote: Generating secret token\nremote: -------------------------\nremote: Git Post-Receive Result: success\nremote: Activation status: success\nremote: Deployment completed with status: success\nTo /var/lib/openshift/5507c99dfcf933bc9c000162//git/myredmine.git/\n   3def682..5d7b3f0  master -> master\n```\n\nDB\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3001\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30c8\u30fc\u30af\u30f3\u306e\u751f\u6210\u304c\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f\u3002\n\n# \u8a2d\u5b9a\u306e\u79fb\u884c\n\n\u65e2\u5b58Redmine\u306e\u65b0Redmine\u306b\u79fb\u884c\u3057\u307e\u3059\u3002\n\n\u65e2\u5b58Redmine\u3092`git clone`\u3057\u3066`config/configuration.yml`\u3092\u78ba\u8a8d\u3057\u305f\u3068\u3053\u308d\u3001\u30e1\u30fc\u30eb\u9001\u4fe1\u8a2d\u5b9a\u3092\u66f8\u3044\u3066\u3044\u307e\u3057\u305f\u3002\n\n```\ndefault:\n  email_delivery:\n    delivery_method: :smtp\n    smtp_settings:\n      address: smtp.gmail.com\n      port: 587\n      domain: smtp.gmail.com\n      authentication: :login\n      user_name: \"u6k.apps@gmail.com\"\n      password: \"***\"\n      enable_starttls_auto: true\n```\n\n\u540c\u69d8\u306e\u8a2d\u5b9a\u3092\u3001\u65b0Redmine\u306b\u3082\u66f8\u304d\u307e\u3059\u3002\n\n\u307e\u305a\u3001\u65b0Redmine\u3092`git clone`\u3057\u307e\u3059\u3002Git\u30ea\u30dd\u30b8\u30c8\u30eaURL\u306f`rhc show-app`\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n`config/configuration.yml`\u3092\u4f5c\u6210\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001`.gitignore`\u306b`config/configuration.yml`\u304c\u7121\u8996\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u524a\u9664\u3057\u307e\u3059\u3002\n\n```\n> vi .gitignore\n```\n\n`config/configuration.yml.sample`\u3092`config/configuration.yml`\u306b\u30b3\u30d4\u30fc\u3057\u3066\u3001\u4e0a\u8a18\u8a2d\u5b9a\u3092\u66f8\u304d\u307e\u3059\u3002\n\n```\n> cp config/configuration.yml.sample config/configuration.yml\n> vi config/configuration.yml\n```\n\n\u7de8\u96c6\u3092\u30b3\u30df\u30c3\u30c8\u3057\u3066\u3001`git push`\u3057\u307e\u3059\u3002\n\n```\n> git add .gitignore\n> git add config/configuration.yml\n> git commit -m \"update config\"\n> git push\n```\n\n# \u30c6\u30fc\u30de\u306e\u79fb\u884c\n\n\u4ee5\u524d\u306fgitmike\u3092\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u3002\u9762\u5012\u306a\u306e\u3067\u5f8c\u3067\u9069\u7528\u3057\u3088\u3046\u3002\n\n# \u304a\u308f\u308a\u306b\n\n\u4ee5\u4e0a\u3067\u3001\u65b0Redmine\u306e\u69cb\u7bc9\u3068\u30c7\u30fc\u30bf\u30fb\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306f\u5b8c\u4e86\u3067\u3059\u30021\u30f6\u6708\u7a0b\u5ea6\u4f7f\u3044\u307e\u3057\u305f\u304c\u7279\u306b\u554f\u984c\u306f\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001\u65e7Redmine\u306f\u524a\u9664\u3057\u307e\u3057\u305f\u3002\n\n# (\u304a\u307e\u3051)Jenkins\u30b8\u30e7\u30d6\u8a2d\u5b9a - \u5b9a\u671f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n\nJenkins\u3067Redmine\u306eMySQL\u30c7\u30fc\u30bf\u30c0\u30f3\u30d7\u3092\u5b9a\u671f\u7684\u306b\u53d6\u5f97\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u306e\u30b8\u30e7\u30d6\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\n```\nssh -i /etc/jenkins/id_rsa_openshift ***@myredmine-u6kapps.rhcloud.com -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null \"mysqldump -h ***-u6kapps.rhcloud.com -P 59861 -u *** --password=*** --lock-all-tables myredmine\" | gzip | sudo tee /var/owncloud/u6k/files/backup/Redmine_on_OpenShift/myredmine_`date +%Y%m%d-%H%M%S`.sql.gz\n```\n\n`rhc show-app`\u3067\u306fMySQL\u30db\u30b9\u30c8\u540d\u3001\u30dd\u30fc\u30c8\u756a\u53f7\u304c\u74b0\u5883\u5909\u6570\u3067\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u4e0a\u8a18\u30b3\u30de\u30f3\u30c9\u306b\u74b0\u5883\u5909\u6570\u3092\u6307\u5b9a\u3057\u3066\u3082\u7a7a\u306b\u306a\u308b\u3060\u3051\u306a\u306e\u3067\u3001\u4ed5\u65b9\u306a\u3044\u306e\u3067OpenShift\u30db\u30b9\u30c8\u306bssh\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3001\u74b0\u5883\u5909\u6570\u306e\u5177\u4f53\u7684\u306a\u5024\u3092\u8abf\u3079\u307e\u3057\u305f\u3002\n\n```\n> echo $OPENSHIFT_MYSQL_DB_HOST\n***-u6kapps.rhcloud.com\n> echo $OPENSHIFT_MYSQL_DB_PORT\n59861\n```\n\nJenkins\u30b8\u30e7\u30d6\u3092\u624b\u52d5\u5b9f\u884c\u3057\u3066\u3001\u60f3\u5b9a\u901a\u308a\u306bDB\u30c0\u30f3\u30d7\u30c7\u30fc\u30bf\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n", "tags": ["Redmine", "openshift"]}