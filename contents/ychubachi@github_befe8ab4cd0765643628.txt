{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u524d\u56de\u304b\u3089\u306e\u7d9a\u304d\u3067\u3059\uff0e\n\u524d\u56de\u306e\u8a2d\u5b9a\u306e\u307e\u307e\u3067\u306fchef\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u53e4\u3044\u3082\u306e\uff0810.14.2\uff09\u304cvagrant\u304b\u3089\u5185\u90e8\u7684\u306b\u8d77\u52d5\u3055\u308c\u307e\u3057\u305f\uff0e\u3053\u308c\u3067\u306frbenv\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\uff0e\u307e\u305f\uff0c\u95a2\u9023\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u524d\u306bapt-get update\u3092\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\uff0e\n\nvagrant\u306b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8ffd\u52a0\nchef\u306e\u6700\u65b0\u7248\uff08Chef 11.4.4\uff09\u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306b\uff0cvagrant\u306b\u3082\u3046\u3072\u3068\u3064\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8ffd\u52a0\u3057\u307e\u3059\uff0e\n$ vagrant plugin install vagrant-omnibus\nInstalling the 'vagrant-omnibus' plugin.  This can take a few minutes...\nInstalled the plugin 'vagrant-omnibus (1.1.0)'!\n\n\u73fe\u5728\u306evagrant pulgin\u306e\u72b6\u6cc1\u306f\u6b21\u306e\u3068\u304a\u308a\u3067\u3059\uff0e\n$ vagrant plugin list\nvagrant-berkshelf (1.3.2)\nvagrant-omnibus (1.1.0)\n\n\nchef\u306e\u6700\u65b0\u7248\u3092\u6307\u5b9a\u3059\u308b\nVagrantfile\u3067chef_version\u3092\u6307\u5b9a\u3057\u307e\u3059\uff0e\u5909\u66f4\u306e\u5dee\u5206\u306f\u6b21\u306e\u3068\u304a\u308a\u3067\u3059\uff0e\n\nVagrantfile\ndiff --git a/Vagrantfile b/Vagrantfile\nindex dbb240a..e3a5d5d 100644\n--- a/Vagrantfile\n+++ b/Vagrantfile\n@@ -61,6 +61,7 @@ Vagrant.configure(\"2\") do |config|\n   # Enabling the Berkshelf plugin. To enable this globally, add this configuration\n   # option to your ~/.vagrant.d/Vagrantfile file\n   config.berkshelf.enabled = true\n+  config.omnibus.chef_version = :latest\n\n   # An array of symbols representing groups of cookbook described in the Vagrantfile\n   # to exclusively install and copy to Vagrant's shelf.\n\n\n\u4e00\u884c\u8ffd\u52a0\u3057\u305f\u3060\u3051\u3067\u3059\u306d\uff0e\n\nBerksfile\u306e\u7de8\u96c6\n\u3053\u3053\u3067\u306fapt\u306ecookbook\u3092\u6307\u5b9a\u3057\u307e\u3059\uff0e\u3053\u308c\u306f\uff0capt-get update\u3092\u5b9f\u884c\u3055\u305b\u308b\u305f\u3081\u306e\u3082\u306e\u3067\u3059\uff0erbenv\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5fc5\u8981\u306a\u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u3067\u3059\uff0e\u6b8b\u308a\u306f\uff0cruby_build\u3068rbenv\u95a2\u9023\u306e\u8a2d\u5b9a\u306b\u306a\u308a\u307e\u3059\uff0eBerksfile\u306e\u5dee\u5206\u306f\u6b21\u306e\u3068\u304a\u308a\u3067\u3059\uff0e\n\nBerksfile\ndiff --git a/Berksfile b/Berksfile\nindex 6d86dcf..79cace7 100644\n--- a/Berksfile\n+++ b/Berksfile\n@@ -1,4 +1,7 @@\n site :opscode\n\n metadata\n+cookbook 'apt'\n cookbook 'git'\n+cookbook 'ruby_build'\n+cookbook 'rbenv', github: \"fnichol/chef-rbenv\"\n\n\n\nVagrantfile\u306e\u4fee\u6b63\nVagrantfile\u3082\u4fee\u6b63\u3057\u307e\u3059\uff0echef.run_list\u306b\uff0capt::default\u30ec\u30b7\u30d4\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\uff0e\u3053\u308c\u306b\u3088\u308a\uff0capt-get update\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\uff0e\u52a0\u3048\u3066\uff0crbenv\u306e\u8a2d\u5b9a\u3082\u8ffd\u52a0\u3057\u307e\u3059\uff0e\n\nVagrantfile\ndiff --git a/Vagrantfile b/Vagrantfile\nindex e3a5d5d..ec6caf8 100644\n--- a/Vagrantfile\n+++ b/Vagrantfile\n@@ -77,12 +77,27 @@ Vagrant.configure(\"2\") do |config|\n         :server_root_password => 'rootpass',\n         :server_debian_password => 'debpass',\n         :server_repl_password => 'replpass'\n+      },\n+      rbenv: {\n+        user_installs: [{\n+          user: \"vagrant\",\n+          rubies: [\"2.0.0-p195\"],\n+          global: \"2.0.0-p195\",\n+          gems: {\n+            \"2.0.0-p195\" => [\n+              {name: \"bundler\"}\n+            ]\n+          }\n+        }]\n       }\n     }\n\n     chef.run_list = [\n         \"recipe[precise::default]\",\n-        \"git\"\n+        \"recipe[apt::default]\",\n+        \"git\",\n+        \"ruby_build\",\n+        \"rbenv::user\"\n     ]\n   end\n end\n\n\n\nvagrant\u3067provision\u3092\u5b9f\u884c\n$ vagrant provision\n\n\u305a\u3089\u30fc\u3063\u3068\u30ed\u30b0\u304c\u51fa\u3066\uff0cruby\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u76f8\u5f53\u5f85\u305f\u3055\u308c\u307e\u3059\uff0e\u624b\u5143\u306e\u74b0\u5883\u30671430.25\u79d2\u304b\u304b\u308a\u307e\u3057\u305f\uff0e\n\nruby\u306e\u52d5\u4f5c\u78ba\u8a8d\n\u3067\u3082\uff0c\u5b8c\u4e86\u3059\u308b\u3068rbenv\u7d4c\u7531\u3067ruby\u304c\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\uff0e\n$ vagrant ssh\nvagrant@precise:~$ rbenv versions\n  system\n* 2.0.0-p195 (set by /home/vagrant/.rbenv/version)\nvagrant@precise:~$ ruby -v\nruby 2.0.0p195 (2013-05-14 revision 40734) [i686-linux]\n\n\u304d\u3061\u3093\u3068ruby\u304c\u52d5\u4f5c\u3057\u3066\u3044\u307e\u3059\uff0e\n\n\u304a\u308f\u308a\u306b\nchef\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u9055\u3044\u306e\u89e3\u6d88\u3068apt-get update\u3092\u5b9f\u884c\u3055\u305b\u308b\u3053\u3068\u306e\u5fc5\u8981\u6027\u306b\u6c17\u3065\u304f\u305f\u3081\u306b\u624b\u9593\u53d6\u308a\u307e\u3057\u305f\u304c\uff0c\u305d\u308c\u4ee5\u5916\u306e\u8a2d\u5b9a\u306f\u697d\u52dd\u3067\u3057\u305f\uff0e\u3073\u3063\u304f\u308a\u3067\u3059\u306d\uff0e\n\u6b21\u56de\u306f\uff0cberks\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210\u3057\u305fCookbook\u306e\u4e2d\u8eab\u306b\u3064\u3044\u3066\u3067\u3059\uff0e\n\n\u53c2\u8003\u6587\u732e\n\nhttp://misheska.com/blog/2013/06/16/getting-started-writing-chef-cookbooks-the-berkshelf-way/\nhttp://qiita.com/ogomr/items/98a33f47f6ba050adac4\nhttps://github.com/dergachev/vagrant_redmine/blob/master/NOTES.md#apt-get-install-error-code-100\n\n# \u306f\u3058\u3081\u306b\n[\u524d\u56de](http://qiita.com/ychubachi@github/items/8c57481b85865e562c47)\u304b\u3089\u306e\u7d9a\u304d\u3067\u3059\uff0e\n\n\u524d\u56de\u306e\u8a2d\u5b9a\u306e\u307e\u307e\u3067\u306fchef\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u53e4\u3044\u3082\u306e\uff0810.14.2\uff09\u304cvagrant\u304b\u3089\u5185\u90e8\u7684\u306b\u8d77\u52d5\u3055\u308c\u307e\u3057\u305f\uff0e\u3053\u308c\u3067\u306frbenv\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\uff0e\u307e\u305f\uff0c\u95a2\u9023\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u524d\u306bapt-get update\u3092\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\uff0e\n\n# vagrant\u306b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8ffd\u52a0\nchef\u306e\u6700\u65b0\u7248\uff08Chef 11.4.4\uff09\u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306b\uff0cvagrant\u306b\u3082\u3046\u3072\u3068\u3064\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8ffd\u52a0\u3057\u307e\u3059\uff0e\n\n```bash\n$ vagrant plugin install vagrant-omnibus\nInstalling the 'vagrant-omnibus' plugin.  This can take a few minutes...\nInstalled the plugin 'vagrant-omnibus (1.1.0)'!\n```\n\n\u73fe\u5728\u306evagrant pulgin\u306e\u72b6\u6cc1\u306f\u6b21\u306e\u3068\u304a\u308a\u3067\u3059\uff0e\n\n```bash\n$ vagrant plugin list\nvagrant-berkshelf (1.3.2)\nvagrant-omnibus (1.1.0)\n```\n\n# chef\u306e\u6700\u65b0\u7248\u3092\u6307\u5b9a\u3059\u308b\n\nVagrantfile\u3067chef_version\u3092\u6307\u5b9a\u3057\u307e\u3059\uff0e\u5909\u66f4\u306e\u5dee\u5206\u306f\u6b21\u306e\u3068\u304a\u308a\u3067\u3059\uff0e\n\n```diff:Vagrantfile\ndiff --git a/Vagrantfile b/Vagrantfile\nindex dbb240a..e3a5d5d 100644\n--- a/Vagrantfile\n+++ b/Vagrantfile\n@@ -61,6 +61,7 @@ Vagrant.configure(\"2\") do |config|\n   # Enabling the Berkshelf plugin. To enable this globally, add this configuration\n   # option to your ~/.vagrant.d/Vagrantfile file\n   config.berkshelf.enabled = true\n+  config.omnibus.chef_version = :latest\n \n   # An array of symbols representing groups of cookbook described in the Vagrantfile\n   # to exclusively install and copy to Vagrant's shelf.\n```\n\u4e00\u884c\u8ffd\u52a0\u3057\u305f\u3060\u3051\u3067\u3059\u306d\uff0e\n\n# Berksfile\u306e\u7de8\u96c6\n\n\u3053\u3053\u3067\u306fapt\u306ecookbook\u3092\u6307\u5b9a\u3057\u307e\u3059\uff0e\u3053\u308c\u306f\uff0capt-get update\u3092\u5b9f\u884c\u3055\u305b\u308b\u305f\u3081\u306e\u3082\u306e\u3067\u3059\uff0erbenv\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5fc5\u8981\u306a\u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u3067\u3059\uff0e\u6b8b\u308a\u306f\uff0cruby_build\u3068rbenv\u95a2\u9023\u306e\u8a2d\u5b9a\u306b\u306a\u308a\u307e\u3059\uff0eBerksfile\u306e\u5dee\u5206\u306f\u6b21\u306e\u3068\u304a\u308a\u3067\u3059\uff0e\n\n```diff:Berksfile\ndiff --git a/Berksfile b/Berksfile\nindex 6d86dcf..79cace7 100644\n--- a/Berksfile\n+++ b/Berksfile\n@@ -1,4 +1,7 @@\n site :opscode\n \n metadata\n+cookbook 'apt'\n cookbook 'git'\n+cookbook 'ruby_build'\n+cookbook 'rbenv', github: \"fnichol/chef-rbenv\"\n```\n\n# Vagrantfile\u306e\u4fee\u6b63\n\nVagrantfile\u3082\u4fee\u6b63\u3057\u307e\u3059\uff0echef.run_list\u306b\uff0capt::default\u30ec\u30b7\u30d4\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\uff0e\u3053\u308c\u306b\u3088\u308a\uff0capt-get update\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\uff0e\u52a0\u3048\u3066\uff0crbenv\u306e\u8a2d\u5b9a\u3082\u8ffd\u52a0\u3057\u307e\u3059\uff0e\n\n```diff:Vagrantfile\ndiff --git a/Vagrantfile b/Vagrantfile\nindex e3a5d5d..ec6caf8 100644\n--- a/Vagrantfile\n+++ b/Vagrantfile\n@@ -77,12 +77,27 @@ Vagrant.configure(\"2\") do |config|\n         :server_root_password => 'rootpass',\n         :server_debian_password => 'debpass',\n         :server_repl_password => 'replpass'\n+      },\n+      rbenv: {\n+        user_installs: [{\n+          user: \"vagrant\",\n+          rubies: [\"2.0.0-p195\"],\n+          global: \"2.0.0-p195\",\n+          gems: {\n+            \"2.0.0-p195\" => [\n+              {name: \"bundler\"}\n+            ]\n+          }\n+        }]\n       }\n     }\n \n     chef.run_list = [\n         \"recipe[precise::default]\",\n-        \"git\"\n+        \"recipe[apt::default]\",\n+        \"git\",\n+        \"ruby_build\",\n+        \"rbenv::user\"\n     ]\n   end\n end\n```\n\n# vagrant\u3067provision\u3092\u5b9f\u884c\n\n```bash\n$ vagrant provision\n```\n\n\u305a\u3089\u30fc\u3063\u3068\u30ed\u30b0\u304c\u51fa\u3066\uff0cruby\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u76f8\u5f53\u5f85\u305f\u3055\u308c\u307e\u3059\uff0e\u624b\u5143\u306e\u74b0\u5883\u30671430.25\u79d2\u304b\u304b\u308a\u307e\u3057\u305f\uff0e\n\n# ruby\u306e\u52d5\u4f5c\u78ba\u8a8d\n\n\u3067\u3082\uff0c\u5b8c\u4e86\u3059\u308b\u3068rbenv\u7d4c\u7531\u3067ruby\u304c\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\uff0e\n\n```bash\n$ vagrant ssh\nvagrant@precise:~$ rbenv versions\n  system\n* 2.0.0-p195 (set by /home/vagrant/.rbenv/version)\nvagrant@precise:~$ ruby -v\nruby 2.0.0p195 (2013-05-14 revision 40734) [i686-linux]\n```\n\u304d\u3061\u3093\u3068ruby\u304c\u52d5\u4f5c\u3057\u3066\u3044\u307e\u3059\uff0e\n\n# \u304a\u308f\u308a\u306b\n\nchef\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u9055\u3044\u306e\u89e3\u6d88\u3068apt-get update\u3092\u5b9f\u884c\u3055\u305b\u308b\u3053\u3068\u306e\u5fc5\u8981\u6027\u306b\u6c17\u3065\u304f\u305f\u3081\u306b\u624b\u9593\u53d6\u308a\u307e\u3057\u305f\u304c\uff0c\u305d\u308c\u4ee5\u5916\u306e\u8a2d\u5b9a\u306f\u697d\u52dd\u3067\u3057\u305f\uff0e\u3073\u3063\u304f\u308a\u3067\u3059\u306d\uff0e\n\n[\u6b21\u56de](http://qiita.com/ychubachi@github/items/d286ccab0fa0d501a45c)\u306f\uff0cberks\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210\u3057\u305fCookbook\u306e\u4e2d\u8eab\u306b\u3064\u3044\u3066\u3067\u3059\uff0e\n\n# \u53c2\u8003\u6587\u732e\n- http://misheska.com/blog/2013/06/16/getting-started-writing-chef-cookbooks-the-berkshelf-way/\n- http://qiita.com/ogomr/items/98a33f47f6ba050adac4\n- https://github.com/dergachev/vagrant_redmine/blob/master/NOTES.md#apt-get-install-error-code-100", "tags": ["chef-solo", "Berkshelf", "knife-solo", "vagrant", "Ubuntu"]}