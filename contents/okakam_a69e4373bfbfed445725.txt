{"context": " More than 1 year has passed since last update.\n\nrepcached \u3068\u306f\uff1f\nmemcached \u306b Replication \u6a5f\u80fd\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nVer2\u4ee5\u964d\u3067\u306f \u30de\u30eb\u30c1\u30de\u30b9\u30bf\u30fc\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002\n\u4f7f\u3044\u65b9\u306a\u3069\u306f\u5225\u306e\u8a18\u4e8b\u3067\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\n\u4eca\u56de\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u89e3\u8aac\u3057\u307e\u3059\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\n\n1. \u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nsudo su -\n\n## \u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum install libevent libevent-devel\n\n## Compile\u3059\u308b\u74b0\u5883\u304c\u30a4\u30f3\u30b9\u30c8\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u6642\u306f\u4ee5\u4e0b\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nyum install gcc make\n\n## memcached \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ncd /usr/local/src\nwget http://sourceforge.net/projects/repcached/files/repcached/2.2.1-1.2.8/memcached-1.2.8-repcached-2.2.1.tar.gz\ntar zxvf memcached-1.2.8-repcached-2.2.1.tar.gz\ncd memcached-1.2.8-repcached-2.2.1\n./configure --build=x86_64-unknown-linux-gnu --enable-replication --enable-64bit \nmake\nmake install\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\nmemcached -h\n\n\u30d8\u30eb\u30d7\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\nmemcached 1.2.8\nrepcached 2.2.1\n-p <num>      TCP port number to listen on (default: 11211)\n-U <num>      UDP port number to listen on (default: 11211, 0 is off)\n-s <file>     unix socket path to listen on (disables network support)\n-a <mask>     access mask for unix socket, in octal (default 0700)```\n....\n....\n\n\n2. \u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u308b\n\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3067\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3059\u308b\nvi /etc/rc.d/init.d/repcashed\n\n\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4e2d\u8eab\u306f\u3053\u3061\u3089\n#! /bin/sh\n#\n# chkconfig: - 55 45\n# description:  The memcached daemon is a network memory cache service.\n# processname: memcached\n# config: /etc/sysconfig/repcached\n# pidfile: /var/run/memcached/memcached.pid\n\n# Standard LSB functions\n#. /lib/lsb/init-functions\n\n# Source function library.\n. /etc/init.d/functions\n\nEXEC=/usr/local/bin/memcached\nREPHOST=localhost\n\nPORT=11211\nUSER=memcached\nMAXCONN=1024\nCACHESIZE=64\nOPTIONS=\"\"\n\nif [ -f /etc/sysconfig/repcached ];then\n        . /etc/sysconfig/repcached\nfi\n\n# Check that networking is up.\n. /etc/sysconfig/network\n\nif [ \"$NETWORKING\" = \"no\" ]\nthen\n        exit 0\nfi\n\nRETVAL=0\nprog=\"repcached(memcached)\"\nPIDFILE=/var/run/memcached/repcached.pid\nLOCKFILE=/var/lock/subsys/repcached\n\nstart () {\n        echo -n $\"Starting $prog: \"\n\n        daemon --pidfile $PIDFILE $EXEC -d -x $REPHOST -p $PORT -u $USER -m $CACHESIZE -c $MAXCONN -P $PIDFILE $OPTIONS\n        RETVAL=$?\n        echo\n        [ $RETVAL -eq 0 ] && touch $LOCKFILE\n}\nstop () {\n        echo -n $\"Stopping $prog: \"\n        killproc -p $PIDFILE $EXEC\n        RETVAL=$?\n        echo\n        if [ $RETVAL -eq 0 ] ; then\n                rm -f $LOCKFILE $PIDFILE\n        fi\n}\n\nrestart () {\n        stop\n        start\n}\n\n# See how we were called.\ncase \"$1\" in\n  start)\n        start\n        ;;\n  stop)\n        stop\n        ;;\n  status)\n        status -p $PIDFILE $prog\n        RETVAL=$?\n        ;;\n  restart|reload|force-reload)\n        restart\n        ;;\n  condrestart|try-restart)\n        [ -f $LOCKFILE ] && restart || :\n        ;;\n  *)\n        echo $\"Usage: $0 {start|stop|status|restart|reload|force-reload|condrestart|try-restart}\"\n        RETVAL=2\n        ;;\nesac\n\nexit $RETVAL\n\n\n3. \u30b5\u30fc\u30d3\u30b9\u306b\u767b\u9332\u3059\u308b\nchmod +x /etc/rc.d/init.d/repcashed\nchkconfig --add repcached\nchkconfig repcached on\n\n\u78ba\u8a8d\nchkconfig --list | grep repcashed\n\n\n4. config \u30d5\u30a1\u30a4\u30eb \u3092\u7de8\u96c6\nvi /etc/sysconfig/repcached\n\nConfig\u30d5\u30a1\u30a4\u30eb\u4e2d\u8eab\u306f\u3053\u3061\u3089\nPORT=\"11211\"\nUSER=\"memcached\"\nMAXCONN=\"1024\"\nCACHESIZE=\"\u4f7f\u7528\u3059\u308b\u30ad\u30e3\u30c3\u30b7\u30e5\u306eMaxSize\"\nOPTIONS=\"\"\nREPHOST=\"\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5148\u30db\u30b9\u30c8\u306eIP Address\"\n\n\n5. \u8d77\u52d5\u3059\u308b\n\u30b9\u30bf\u30fc\u30c8\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u8d77\u52d5\u3057\u307e\u3059\u3002  \n/etc/init.d/repcashed start\n\ntelnet \u3067\u63a5\u7d9a\u3057\u3066\u307f\u3066\u78ba\u8a8d\ntelnet localhost:11211\u3000\u3000<- telnet \u3067\u63a5\u7d9a\u3057\u3066\u307f\u308b\n\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\n\nstats                    <- status \u3092\u53d6\u5f97\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092\u6295\u3052\u3066\u307f\u308b\n\nSTAT pid 1432\nSTAT uptime 12656\nSTAT time 1453956042\nSTAT version 1.2.8\nSTAT pointer_size 64\n...\n...\n\nquit                     <- \u5207\u65ad\n\n\u4ee5\u4e0a\u3068\u306a\u308a\u307e\u3059\u3002\n# repcached \u3068\u306f\uff1f\nmemcached \u306b Replication \u6a5f\u80fd\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nVer2\u4ee5\u964d\u3067\u306f \u30de\u30eb\u30c1\u30de\u30b9\u30bf\u30fc\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002  \n\u4f7f\u3044\u65b9\u306a\u3069\u306f\u5225\u306e\u8a18\u4e8b\u3067\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\n\u4eca\u56de\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u89e3\u8aac\u3057\u307e\u3059\u3002\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\n## 1. \u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n```bash\nsudo su -\n\n## \u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum install libevent libevent-devel\n\n## Compile\u3059\u308b\u74b0\u5883\u304c\u30a4\u30f3\u30b9\u30c8\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u6642\u306f\u4ee5\u4e0b\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nyum install gcc make\n\n## memcached \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ncd /usr/local/src\nwget http://sourceforge.net/projects/repcached/files/repcached/2.2.1-1.2.8/memcached-1.2.8-repcached-2.2.1.tar.gz\ntar zxvf memcached-1.2.8-repcached-2.2.1.tar.gz\ncd memcached-1.2.8-repcached-2.2.1\n./configure --build=x86_64-unknown-linux-gnu --enable-replication --enable-64bit \nmake\nmake install\n```\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n\n```bash\nmemcached -h\n```\n\n\u30d8\u30eb\u30d7\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\n\n```bash\nmemcached 1.2.8\nrepcached 2.2.1\n-p <num>      TCP port number to listen on (default: 11211)\n-U <num>      UDP port number to listen on (default: 11211, 0 is off)\n-s <file>     unix socket path to listen on (disables network support)\n-a <mask>     access mask for unix socket, in octal (default 0700)```\n....\n....\n```\n\n## 2. \u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u308b\n\n\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3067\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3059\u308b\n\n```bash\nvi /etc/rc.d/init.d/repcashed\n```\n\n\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4e2d\u8eab\u306f\u3053\u3061\u3089\n\n```sh\n#! /bin/sh\n#\n# chkconfig: - 55 45\n# description:  The memcached daemon is a network memory cache service.\n# processname: memcached\n# config: /etc/sysconfig/repcached\n# pidfile: /var/run/memcached/memcached.pid\n\n# Standard LSB functions\n#. /lib/lsb/init-functions\n\n# Source function library.\n. /etc/init.d/functions\n\nEXEC=/usr/local/bin/memcached\nREPHOST=localhost\n\nPORT=11211\nUSER=memcached\nMAXCONN=1024\nCACHESIZE=64\nOPTIONS=\"\"\n\nif [ -f /etc/sysconfig/repcached ];then\n        . /etc/sysconfig/repcached\nfi\n\n# Check that networking is up.\n. /etc/sysconfig/network\n\nif [ \"$NETWORKING\" = \"no\" ]\nthen\n        exit 0\nfi\n\nRETVAL=0\nprog=\"repcached(memcached)\"\nPIDFILE=/var/run/memcached/repcached.pid\nLOCKFILE=/var/lock/subsys/repcached\n\nstart () {\n        echo -n $\"Starting $prog: \"\n\n        daemon --pidfile $PIDFILE $EXEC -d -x $REPHOST -p $PORT -u $USER -m $CACHESIZE -c $MAXCONN -P $PIDFILE $OPTIONS\n        RETVAL=$?\n        echo\n        [ $RETVAL -eq 0 ] && touch $LOCKFILE\n}\nstop () {\n        echo -n $\"Stopping $prog: \"\n        killproc -p $PIDFILE $EXEC\n        RETVAL=$?\n        echo\n        if [ $RETVAL -eq 0 ] ; then\n                rm -f $LOCKFILE $PIDFILE\n        fi\n}\n\nrestart () {\n        stop\n        start\n}\n\n# See how we were called.\ncase \"$1\" in\n  start)\n        start\n        ;;\n  stop)\n        stop\n        ;;\n  status)\n        status -p $PIDFILE $prog\n        RETVAL=$?\n        ;;\n  restart|reload|force-reload)\n        restart\n        ;;\n  condrestart|try-restart)\n        [ -f $LOCKFILE ] && restart || :\n        ;;\n  *)\n        echo $\"Usage: $0 {start|stop|status|restart|reload|force-reload|condrestart|try-restart}\"\n        RETVAL=2\n        ;;\nesac\n\nexit $RETVAL\n```\n## 3. \u30b5\u30fc\u30d3\u30b9\u306b\u767b\u9332\u3059\u308b\n\n```bash\nchmod +x /etc/rc.d/init.d/repcashed\nchkconfig --add repcached\nchkconfig repcached on\n```\n\n\u78ba\u8a8d\n\n```bash\nchkconfig --list | grep repcashed\n```\n\n## 4. config \u30d5\u30a1\u30a4\u30eb \u3092\u7de8\u96c6\n\n```bash\nvi /etc/sysconfig/repcached\n```\n\nConfig\u30d5\u30a1\u30a4\u30eb\u4e2d\u8eab\u306f\u3053\u3061\u3089\n\n```text\nPORT=\"11211\"\nUSER=\"memcached\"\nMAXCONN=\"1024\"\nCACHESIZE=\"\u4f7f\u7528\u3059\u308b\u30ad\u30e3\u30c3\u30b7\u30e5\u306eMaxSize\"\nOPTIONS=\"\"\nREPHOST=\"\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5148\u30db\u30b9\u30c8\u306eIP Address\"\n```\n\n## 5. \u8d77\u52d5\u3059\u308b\n\n\u30b9\u30bf\u30fc\u30c8\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u8d77\u52d5\u3057\u307e\u3059\u3002  \n\n```bash\n/etc/init.d/repcashed start\n```\n\ntelnet \u3067\u63a5\u7d9a\u3057\u3066\u307f\u3066\u78ba\u8a8d\n\n```bash\ntelnet localhost:11211\u3000\u3000<- telnet \u3067\u63a5\u7d9a\u3057\u3066\u307f\u308b\n\nTrying 127.0.0.1...\nConnected to 127.0.0.1.\nEscape character is '^]'.\n\nstats                    <- status \u3092\u53d6\u5f97\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092\u6295\u3052\u3066\u307f\u308b\n\nSTAT pid 1432\nSTAT uptime 12656\nSTAT time 1453956042\nSTAT version 1.2.8\nSTAT pointer_size 64\n...\n...\n\nquit                     <- \u5207\u65ad\n```\n\n\u4ee5\u4e0a\u3068\u306a\u308a\u307e\u3059\u3002\n", "tags": ["repcached", "CentOS6.x", "Memcached", "CentOS6", "CentOS"]}