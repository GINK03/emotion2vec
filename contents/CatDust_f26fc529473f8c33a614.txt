{"context": "Pepper\u3067Get, Post\u306e\u901a\u4fe1\u3092\u884c\u3046\u3053\u3068\u304c\u3042\u308a\u307e\u3057\u305f\u306e\u3067\u3001\u5fd8\u308c\u306a\u3044\u305f\u3081\u306b\u30e1\u30e2\u3002\n\nGET\u30ea\u30af\u30a8\u30b9\u30c8\n\u30b7\u30f3\u30d7\u30eb\u306b\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u30b5\u30fc\u30d0\u30fc\u306b\u53d6\u5f97\u3057\u306b\u884c\u304f\u3082\u306e\u3067\u3059\u3002\nURL\u306b\u30e6\u30fc\u30b6\u30fcID\u3092\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3068\u3057\u3066\u9001\u308a\u307e\u3059\u3002\nChoregraphe\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\n\u51e6\u7406\u306e\u6d41\u308c\n1.\u3000Pepper\u306b\u756a\u53f7\uff08\u30e6\u30fc\u30b6\u30fcID\uff09\u3092\u8a00\u3046\uff081~4\uff09\n2.\u3000Switch\u30671~4\u306e\u3069\u308c\u304b\u3092\u5224\u5225\u3059\u308b\n3.\u3000Python Script\u30dc\u30c3\u30af\u30b9\uff08HTTP GET\uff09\u3067\u30b5\u30fc\u30d0\u30fc\u306b\u30e6\u30fc\u30b6\u30fc\u540d\u3092Get\u3057\u306b\u884c\u304f\u3002\n4.\u3000\u3082\u3057HTTP\u901a\u4fe1\u6642\u9593\u304c15\u79d2\u3092\u904e\u304e\u305f\u3089\u3001\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3059\u308b\uff08Wait\u30dc\u30c3\u30af\u30b9\uff09\u3002\n5.\u3000HTTP GET\u306e\u4e2d\u3067\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u6b63\u5e38\u306b\u5e30\u3063\u3066\u304d\u3066\u3044\u308b\u5834\u5408\u306f\u3001Success Say\u3001\u5931\u6557\u306e\u5834\u5408\u306f\u3001Failure Say\n\u203bSwitch\u306b\u3088\u308a\u5f15\u304d\u6e21\u3055\u308c\u308b\u5024\u306f\u3001GET\u306e\u969b\u306b\u4f7f\u7528\u3059\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3068\u8003\u3048\u3066\u304f\u3060\u3055\u3044\u3002\nPython Script\u30dc\u30c3\u30af\u30b9\u306e\u4e2d\u306e\u30b3\u30fc\u30c9\n\nHTTPGET\nimport urllib2, json\n\nclass MyClass(GeneratedClass):\n    def __init__(self):\n        GeneratedClass.__init__(self)\n\n    def onLoad(self):\n        self.userName = None\n\n    def onUnload(self):\n        #put clean-up code here\n        pass\n\n    def onInput_onStart(self, p):\n        #p\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u306eID\n        if  len(str(p)) > 0:\n            #GET\u306eURL\uff08URL+\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\uff09\n            url = \"https://example.com/users/\" + str(p)\n\n            try:\n                r = urllib2.urlopen(url)\n\n                #\u30eb\u30fc\u30c8\u306eJSON\u30c7\u30fc\u30bf\n                root = json.loads(r.read())\n\n                #\u5fc5\u8981\u306a\u9805\u76ee\u3092UTF8\u3067\u30a8\u30f3\u30b3\u30fc\u30c9\u3059\u308b\n                self.userName = root[\"user\"][\"userName\"].encode(\"utf-8\")\n\n                #userName\u304c\u3042\u308c\u3070\u30c7\u30fc\u30bf\u3042\u308a\u3001\u306a\u3051\u308c\u3070\u306a\u3057\uff08\u4eca\u56de\u306e\u4ed5\u69d8\uff09\n                if len(self.userName) > 0:\n                    self.logger.info(self.userName)\n                    self.onSuccess(self.userName)\n                else:\n                    self.onFailure()\n\n            except urllib2.HTTPError, e:    #HTTP\u30a8\u30e9\u30fc\n                self.logger.info(e.msg)\n                self.onFailure()\n\n            except urllib2.URLError, e:    #\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3067\u304d\u306a\u3044\u5834\u5408\n                self.logger.info(e)\n                self.onFailure()\n\n        else:\n            self.logger.info(\"failure\")\n            self.onFailure()\n\n    def onInput_onStop(self):\n        self.onUnload() #it is recommended to reuse the clean-up as the box is stopped\n        self.onStopped() #activate the output of the box\n\n\n\n\nPOST\u30ea\u30af\u30a8\u30b9\u30c8\n\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u3092\u66f4\u65b0\u3059\u308b\u305f\u3081\u306ePOST\u51e6\u7406\n\u5229\u7528\u3059\u308b\u524d\u306b\u3001requests\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\uff08\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u53c2\u8003\u3092\u53c2\u7167\uff09\n\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u7b49\u306f\u3001GET\u3068\u540c\u3058\u65b9\u6cd5\u3092\u4f7f\u7528\u3059\u308b\u3002\n\u4ee5\u4e0b\u3001POST\u3092\u884c\u3046\u3068\u304d\u306ePython Script\u30dc\u30c3\u30af\u30b9\u306e\u30b3\u30fc\u30c9\n\nHTTPPOST\nimport requests\n\nclass MyClass(GeneratedClass):\n    def __init__(self):\n        GeneratedClass.__init__(self)\n\n    def onLoad(self):\n        self.memory = ALProxy(\"ALMemory\")\n        self.pts = None\n    def onUnload(self):\n        #put clean-up code here\n        pass\n\n    def onInput_onStart(self):\n        #Pepper\u306e\u30e1\u30e2\u30ea\u306e\u4e2d\u306b\u683c\u7d0d\u3055\u308c\u305f\u60c5\u5831\u3067\u30b5\u30fc\u30d0\u30fc\u306e\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u3092\u66f8\u304d\u63db\u3048\u308b\n        #self.pts = self.memory.getData(\"Sample/P\")\n        #userId = self.memory.getData(\"Sample/UserId\")\n\n        #\u66f4\u65b0\u3059\u308b\u60c5\u5831\n        payload = {\n            \"userId\":\"1\",\n            \"points\":6\n        }\n\n        #POST\u306eURL\n        self.url = \"https://example.com/points/\"\n\n        try:\n            self.r = requests.post(self.url, data=json.dumps(payload))\n            self.logger.info(self.r.status_code)    #\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u306e\u53d6\u5f97\n            self.logger.info(\"success\")\n            self.onSuccess()    #\u6210\u529f\u3057\u305f\u3068\u304d\u306e\u51e6\u7406\u3078\uff08\u51fa\u529b\u306e\u540d\u524d\uff09\n\n        except requests.exceptions.RequestException as e:    #\u4f8b\u5916\u767a\u751f\n            self.logger.info(\"failure\")\n            self.logger.info(e)\n            self.onFailure()    #\u5931\u6557\u3057\u305f\u3068\u304d\u306e\u51e6\u7406\u3078\uff08\u51fa\u529b\u306e\u540d\u524d\uff09\n\n\n\n    def onInput_onStop(self):\n        self.onUnload() #it is recommended to reuse the clean-up as the box is stopped\n        self.onStopped() #activate the output of the box\n\n\n\u53c2\u8003\nPOST\u306eRequests\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nhttp://qiita.com/hththt/items/14bfc2bf23192b020371\nPOST\u306eRequest\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u4f7f\u3044\u65b9\nhttp://requests-docs-ja.readthedocs.io/en/latest/user/quickstart/\nPepper\u3067Get, Post\u306e\u901a\u4fe1\u3092\u884c\u3046\u3053\u3068\u304c\u3042\u308a\u307e\u3057\u305f\u306e\u3067\u3001\u5fd8\u308c\u306a\u3044\u305f\u3081\u306b\u30e1\u30e2\u3002\n\n##GET\u30ea\u30af\u30a8\u30b9\u30c8\n\u30b7\u30f3\u30d7\u30eb\u306b\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u30b5\u30fc\u30d0\u30fc\u306b\u53d6\u5f97\u3057\u306b\u884c\u304f\u3082\u306e\u3067\u3059\u3002\nURL\u306b\u30e6\u30fc\u30b6\u30fcID\u3092\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3068\u3057\u3066\u9001\u308a\u307e\u3059\u3002\n\nChoregraphe\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-11-11 11.36.13.png](https://qiita-image-store.s3.amazonaws.com/0/68056/490345fb-6abb-49be-3c87-28dac7addc0a.png)\n\n\u51e6\u7406\u306e\u6d41\u308c\n1.\u3000Pepper\u306b\u756a\u53f7\uff08\u30e6\u30fc\u30b6\u30fcID\uff09\u3092\u8a00\u3046\uff081~4\uff09\n2.\u3000Switch\u30671~4\u306e\u3069\u308c\u304b\u3092\u5224\u5225\u3059\u308b\n3.\u3000Python Script\u30dc\u30c3\u30af\u30b9\uff08HTTP GET\uff09\u3067\u30b5\u30fc\u30d0\u30fc\u306b\u30e6\u30fc\u30b6\u30fc\u540d\u3092Get\u3057\u306b\u884c\u304f\u3002\n4.\u3000\u3082\u3057HTTP\u901a\u4fe1\u6642\u9593\u304c15\u79d2\u3092\u904e\u304e\u305f\u3089\u3001\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3059\u308b\uff08Wait\u30dc\u30c3\u30af\u30b9\uff09\u3002\n5.\u3000HTTP GET\u306e\u4e2d\u3067\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u6b63\u5e38\u306b\u5e30\u3063\u3066\u304d\u3066\u3044\u308b\u5834\u5408\u306f\u3001Success Say\u3001\u5931\u6557\u306e\u5834\u5408\u306f\u3001Failure Say\n\n\u203bSwitch\u306b\u3088\u308a\u5f15\u304d\u6e21\u3055\u308c\u308b\u5024\u306f\u3001GET\u306e\u969b\u306b\u4f7f\u7528\u3059\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3068\u8003\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\nPython Script\u30dc\u30c3\u30af\u30b9\u306e\u4e2d\u306e\u30b3\u30fc\u30c9\n\n```ruby:HTTPGET\nimport urllib2, json\n\nclass MyClass(GeneratedClass):\n    def __init__(self):\n        GeneratedClass.__init__(self)\n\n    def onLoad(self):\n        self.userName = None\n\n    def onUnload(self):\n        #put clean-up code here\n        pass\n\n    def onInput_onStart(self, p):\n        #p\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u306eID\n        if  len(str(p)) > 0:\n            #GET\u306eURL\uff08URL+\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\uff09\n            url = \"https://example.com/users/\" + str(p)\n            \n            try:\n                r = urllib2.urlopen(url)\n\n                #\u30eb\u30fc\u30c8\u306eJSON\u30c7\u30fc\u30bf\n                root = json.loads(r.read())\n\n                #\u5fc5\u8981\u306a\u9805\u76ee\u3092UTF8\u3067\u30a8\u30f3\u30b3\u30fc\u30c9\u3059\u308b\n                self.userName = root[\"user\"][\"userName\"].encode(\"utf-8\")\n\n                #userName\u304c\u3042\u308c\u3070\u30c7\u30fc\u30bf\u3042\u308a\u3001\u306a\u3051\u308c\u3070\u306a\u3057\uff08\u4eca\u56de\u306e\u4ed5\u69d8\uff09\n                if len(self.userName) > 0:\n                    self.logger.info(self.userName)\n                    self.onSuccess(self.userName)\n                else:\n                    self.onFailure()\n                    \n            except urllib2.HTTPError, e:    #HTTP\u30a8\u30e9\u30fc\n                self.logger.info(e.msg)\n                self.onFailure()\n                \n            except urllib2.URLError, e:    #\u30b5\u30fc\u30d0\u30fc\u306b\u63a5\u7d9a\u3067\u304d\u306a\u3044\u5834\u5408\n                self.logger.info(e)\n                self.onFailure()\n                \n        else:\n            self.logger.info(\"failure\")\n            self.onFailure()\n\n    def onInput_onStop(self):\n        self.onUnload() #it is recommended to reuse the clean-up as the box is stopped\n        self.onStopped() #activate the output of the box\n\n```\n\n##POST\u30ea\u30af\u30a8\u30b9\u30c8\n\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u3092\u66f4\u65b0\u3059\u308b\u305f\u3081\u306ePOST\u51e6\u7406\n\n\u5229\u7528\u3059\u308b\u524d\u306b\u3001requests\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\uff08\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u53c2\u8003\u3092\u53c2\u7167\uff09\n\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u7b49\u306f\u3001GET\u3068\u540c\u3058\u65b9\u6cd5\u3092\u4f7f\u7528\u3059\u308b\u3002\n\u4ee5\u4e0b\u3001POST\u3092\u884c\u3046\u3068\u304d\u306ePython Script\u30dc\u30c3\u30af\u30b9\u306e\u30b3\u30fc\u30c9\n\n```ruby:HTTPPOST\nimport requests\n\nclass MyClass(GeneratedClass):\n    def __init__(self):\n        GeneratedClass.__init__(self)\n\n    def onLoad(self):\n        self.memory = ALProxy(\"ALMemory\")\n        self.pts = None\n    def onUnload(self):\n        #put clean-up code here\n        pass\n\n    def onInput_onStart(self):\n        #Pepper\u306e\u30e1\u30e2\u30ea\u306e\u4e2d\u306b\u683c\u7d0d\u3055\u308c\u305f\u60c5\u5831\u3067\u30b5\u30fc\u30d0\u30fc\u306e\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u3092\u66f8\u304d\u63db\u3048\u308b\n        #self.pts = self.memory.getData(\"Sample/P\")\n        #userId = self.memory.getData(\"Sample/UserId\")\n\n        #\u66f4\u65b0\u3059\u308b\u60c5\u5831\n        payload = {\n            \"userId\":\"1\",\n            \"points\":6\n        }\n\n        #POST\u306eURL\n        self.url = \"https://example.com/points/\"\n        \n        try:\n            self.r = requests.post(self.url, data=json.dumps(payload))\n            self.logger.info(self.r.status_code)    #\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u306e\u53d6\u5f97\n            self.logger.info(\"success\")\n            self.onSuccess()    #\u6210\u529f\u3057\u305f\u3068\u304d\u306e\u51e6\u7406\u3078\uff08\u51fa\u529b\u306e\u540d\u524d\uff09\n        \n        except requests.exceptions.RequestException as e:    #\u4f8b\u5916\u767a\u751f\n            self.logger.info(\"failure\")\n            self.logger.info(e)\n            self.onFailure()    #\u5931\u6557\u3057\u305f\u3068\u304d\u306e\u51e6\u7406\u3078\uff08\u51fa\u529b\u306e\u540d\u524d\uff09\n            \n        \n            \n    def onInput_onStop(self):\n        self.onUnload() #it is recommended to reuse the clean-up as the box is stopped\n        self.onStopped() #activate the output of the box\n```\n\n\u53c2\u8003\nPOST\u306eRequests\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n[http://qiita.com/hththt/items/14bfc2bf23192b020371](http://qiita.com/hththt/items/14bfc2bf23192b020371)\n\nPOST\u306eRequest\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u4f7f\u3044\u65b9\n[http://requests-docs-ja.readthedocs.io/en/latest/user/quickstart/](http://requests-docs-ja.readthedocs.io/en/latest/user/quickstart/)\n", "tags": ["Pepper"]}