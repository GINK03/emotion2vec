{"context": "\n\n\u306f\u3058\u3081\u306b\nLINE Messaging API\u3092SpringBoot\u3067\u5b9f\u88c5\u3059\u308bSDK\u304c\u516c\u5f0f\u304b\u3089\u3067\u3066\u3044\u305f\u306e\u3067\u8a66\u3059\u3002\nLINE Messaging API\u306f\u3001https\u3067\u306e\u901a\u4fe1\u304c\u524d\u63d0\u306a\u306e\u3067\u3001Heroku\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4(\u7121\u6599)\u3057\u3066\u30c6\u30b9\u30c8\u3059\u308b\u3002\n\n\u624b\u9806\n\u57fa\u672c\u7684\u306b\u306f\u3001\u516c\u5f0fSDK\u306egithub\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u306e\u3068\u304a\u308a\u5b9f\u65bd\u3057\u307e\u3059\u304c\u3001bot\u306e\u5185\u5bb9\u3092\u767a\u8a00\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u306e\u30e6\u30fc\u30b6\u30fcID\u3092\u8fd4\u4fe1\u3059\u308b\u51e6\u7406\u306b\u3057\u307e\u3057\u305f\u3002\n\u81ea\u5206\u306eLINE\u306e\u30e6\u30fc\u30b6\u30fcID\u3092\u77e5\u308b\u8853\u304c\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u3001reply\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304b\u3089\u53d6\u5f97\u3057\u305f\u304b\u3063\u305f\u3068\u3044\u3046\u306e\u3082\u3042\u308a\u307e\u3059\u3002\n\u203b\u8a73\u3057\u3044\u4eba\u306f\u6559\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\nSpringBoot\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\nLINE Messaging API\u306e\u516c\u5f0fSDK\u306eline-bot-spring-boot\u3092gradle\u306e\u4f9d\u5b58\u306b\u8ffd\u52a0\nsample\u3092\u53c2\u8003\u306bSpringBoot\u306e\u8d77\u52d5\u30af\u30e9\u30b9\u306b\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\nHeroku\u306b\u30c7\u30d7\u30ed\u30a4\nLINE Messaging API\u306eMessaging API Developer Trial\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u8ffd\u52a0(\u3082\u308d\u3082\u308d\u306e\u8a2d\u5b9a\u3068\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3068\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97)\nHeroku\u306e\u8a2d\u5b9a\u306b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3068\u30c8\u30fc\u30af\u30f3\u3092\u8a2d\u5b9a\n\u52d5\u4f5c\u78ba\u8a8d\n\n\n\u8a73\u7d30\n\nSpringBoot\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306bSpringBoot\u306e\u96db\u5f62\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\nSpring Boot\u3092Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u306e\u304c\u5287\u7684\u306b\u7c21\u5358\u306b\u306a\u3063\u3066\u3044\u308b\u4ef6\n\u203bHeroku\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3068\u3053\u308d\u307e\u3067\u5b9f\u65bd\u3059\u308b\n\nLINE Messaging API\u306e\u516c\u5f0fSDK\u3092gradle\u306e\u4f9d\u5b58\u306b\u8ffd\u52a0\nbuild.gradle\u306edependencies\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\ndependencies {\n  compile('com.linecorp.bot:line-bot-spring-boot:1.3.0') // \u30b3\u30b3\u3092\u8ffd\u52a0\n  compile('org.springframework.boot:spring-boot-starter-actuator')\n  compile('org.springframework.boot:spring-boot-starter-web')\n  testCompile('org.springframework.boot:spring-boot-starter-test')\n}\n\n\nsample\u3092\u53c2\u8003\u306bSpringBoot\u306e\u8d77\u52d5\u30af\u30e9\u30b9\u306b\u30b3\u30fc\u30c9\u8ffd\u52a0\n\u516c\u5f0fSDK\u306esample\u5b9f\u88c5\u3092\u53c2\u8003\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306bSpringBoot\u306e\u8d77\u52d5\u30af\u30e9\u30b9\u3092\u4fee\u6b63\n\u30b5\u30f3\u30c9\u30a4\u30c3\u30c1\u30b3\u30e1\u30f3\u30c8\u3067\u4fee\u6b63\u7b87\u6240\u3092\u8a18\u8f09\u3057\u3066\u3044\u307e\u3059\u3002\u30af\u30e9\u30b9\u306b\u3082@LineMessageHandler\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u306e\u3092\u308f\u3059\u308c\u305a\u306b\u3002\nimport\u306fsample\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\npackage com.example;\n\nimport com.linecorp.bot.client.LineMessagingService;\nimport com.linecorp.bot.model.ReplyMessage;\nimport com.linecorp.bot.model.event.Event;\nimport com.linecorp.bot.model.event.MessageEvent;\nimport com.linecorp.bot.model.event.message.TextMessageContent;\nimport com.linecorp.bot.model.message.TextMessage;\nimport com.linecorp.bot.model.response.BotApiResponse;\nimport com.linecorp.bot.spring.boot.annotation.EventMapping;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\nimport java.util.Collections;\n\n@SpringBootApplication\n@LineMessageHandler //----- \u30b3\u30b3\u3092\u8ffd\u52a0\npublic class DemoApplication {\n\n  public static void main(String[] args) {\n    SpringApplication.run(DemoApplication.class, args);\n  }\n\n//----- \u3053\u3053\u304b\u3089 -----\n  @Autowired\n  private LineMessagingService lineMessagingService;\n\n  @EventMapping\n  public void handleTextMessageEvent(MessageEvent<TextMessageContent> event) throws Exception {\n    System.out.println(\"event: \" + event);\n    final BotApiResponse apiResponse = lineMessagingService\n        .replyMessage(new ReplyMessage(event.getReplyToken(),\n                                       Collections.singletonList(new TextMessage(event.getSource().getUserId()))))\n        .execute().body();\n    System.out.println(\"Sent messages: \" + apiResponse);\n  }\n\n  @EventMapping\n  public void defaultMessageEvent(Event event) {\n    System.out.println(\"event: \" + event);\n  }\n//----- \u3053\u3053\u307e\u3067\u8ffd\u52a0 -----\n\n}\n\n\n\nHeroku\u306b\u30c7\u30d7\u30ed\u30a4\ngit commit -am \"add line bot\"\ngit push heroku master\n\n\u30c7\u30d7\u30ed\u30a4\u306f\u6210\u529f\u3059\u308b\u306f\u305a\u3002Heroku\u306e\u30ed\u30b0\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001\nheroku logs --tail\n\n\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\n\n\u629c\u7c8b\n2016-11-23T12:34:48.860128+00:00 app[web.1]: Field error in object 'line.bot' on field 'channelToken': rejected value [null]; codes [NotNull.line.bot.channelToken,NotNull.channelToken,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [line.bot.channelToken,channelToken]; arguments []; default message [channelToken]]; default message [may not be null]\n2016-11-23T12:34:48.860129+00:00 app[web.1]: Field error in object 'line.bot' on field 'channelSecret': rejected value [null]; codes [NotNull.line.bot.channelSecret,NotNull.channelSecret,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [line.bot.channelSecret,channelSecret]; arguments []; default message [channelSecret]]; default message [may not be null]\n\n\n\u5168\u4f53\n2016-11-23T12:34:25.585995+00:00 heroku[web.1]: Starting process with command `java -Dserver.port=26054 $JAVA_OPTS -jar build/libs/*.jar`\n2016-11-23T12:34:28.350814+00:00 app[web.1]: Create a Procfile to customize the command used to run this process: https://devcenter.heroku.com/articles/procfile\n2016-11-23T12:34:28.363096+00:00 app[web.1]: Setting JAVA_TOOL_OPTIONS defaults based on dyno size. Custom settings will override them.\n2016-11-23T12:34:28.370890+00:00 app[web.1]: Picked up JAVA_TOOL_OPTIONS: -Xmx350m -Xss512k -Dfile.encoding=UTF-8\n2016-11-23T12:34:33.611174+00:00 app[web.1]: \n2016-11-23T12:34:33.611223+00:00 app[web.1]:   .   ____          _            __ _ _\n2016-11-23T12:34:33.611274+00:00 app[web.1]:  /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n2016-11-23T12:34:33.611327+00:00 app[web.1]: ( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n2016-11-23T12:34:33.611374+00:00 app[web.1]:  \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n2016-11-23T12:34:33.611423+00:00 app[web.1]:   '  |____| .__|_| |_|_| |_\\__, | / / / /\n2016-11-23T12:34:33.611471+00:00 app[web.1]:  =========|_|==============|___/=/_/_/_/\n2016-11-23T12:34:33.616715+00:00 app[web.1]:  :: Spring Boot ::        (v1.4.2.RELEASE)\n2016-11-23T12:34:33.616758+00:00 app[web.1]: \n2016-11-23T12:34:35.077856+00:00 app[web.1]: 2016-11-23 12:34:35.043  INFO 4 --- [           main] com.example.DemoApplication              : Starting DemoApplication on 3fec34e1-1683-4668-b572-8d779c0b0d2a with PID 4 (/app/build/libs/demo-0.0.1-SNAPSHOT.jar started by u52915 in /app)\n2016-11-23T12:34:35.099269+00:00 app[web.1]: 2016-11-23 12:34:35.078  INFO 4 --- [           main] com.example.DemoApplication              : No active profile set, falling back to default profiles: default\n2016-11-23T12:34:35.786319+00:00 app[web.1]: 2016-11-23 12:34:35.770  INFO 4 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@6659c656: startup date [Wed Nov 23 12:34:35 UTC 2016]; root of context hierarchy\n2016-11-23T12:34:45.729917+00:00 app[web.1]: 2016-11-23 12:34:45.729  INFO 4 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat initialized with port(s): 26054 (http)\n2016-11-23T12:34:45.758893+00:00 app[web.1]: 2016-11-23 12:34:45.758  INFO 4 --- [           main] o.apache.catalina.core.StandardService   : Starting service Tomcat\n2016-11-23T12:34:45.761198+00:00 app[web.1]: 2016-11-23 12:34:45.760  INFO 4 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.6\n2016-11-23T12:34:46.348214+00:00 app[web.1]: 2016-11-23 12:34:46.346  INFO 4 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2016-11-23T12:34:46.349784+00:00 app[web.1]: 2016-11-23 12:34:46.349  INFO 4 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 10608 ms\n2016-11-23T12:34:48.252663+00:00 app[web.1]: 2016-11-23 12:34:48.252  INFO 4 --- [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean  : Mapping servlet: 'dispatcherServlet' to [/]\n2016-11-23T12:34:48.290693+00:00 app[web.1]: 2016-11-23 12:34:48.290  INFO 4 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'metricsFilter' to: [/*]\n2016-11-23T12:34:48.291348+00:00 app[web.1]: 2016-11-23 12:34:48.291  INFO 4 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'characterEncodingFilter' to: [/*]\n2016-11-23T12:34:48.291501+00:00 app[web.1]: 2016-11-23 12:34:48.291  INFO 4 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]\n2016-11-23T12:34:48.291646+00:00 app[web.1]: 2016-11-23 12:34:48.291  INFO 4 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'httpPutFormContentFilter' to: [/*]\n2016-11-23T12:34:48.291783+00:00 app[web.1]: 2016-11-23 12:34:48.291  INFO 4 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'requestContextFilter' to: [/*]\n2016-11-23T12:34:48.291919+00:00 app[web.1]: 2016-11-23 12:34:48.291  INFO 4 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'webRequestLoggingFilter' to: [/*]\n2016-11-23T12:34:48.292078+00:00 app[web.1]: 2016-11-23 12:34:48.291  INFO 4 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'applicationContextIdFilter' to: [/*]\n2016-11-23T12:34:48.852189+00:00 app[web.1]: 2016-11-23 12:34:48.851 ERROR 4 --- [           main] o.s.b.b.PropertiesConfigurationFactory   : Properties configuration failed validation\n2016-11-23T12:34:48.852531+00:00 app[web.1]: 2016-11-23 12:34:48.852 ERROR 4 --- [           main] o.s.b.b.PropertiesConfigurationFactory   : Field error in object 'line.bot' on field 'channelToken': rejected value [null]; codes [NotNull.line.bot.channelToken,NotNull.channelToken,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [line.bot.channelToken,channelToken]; arguments []; default message [channelToken]]; default message [may not be null]\n2016-11-23T12:34:48.856823+00:00 app[web.1]: 2016-11-23 12:34:48.852 ERROR 4 --- [           main] o.s.b.b.PropertiesConfigurationFactory   : Field error in object 'line.bot' on field 'channelSecret': rejected value [null]; codes [NotNull.line.bot.channelSecret,NotNull.channelSecret,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [line.bot.channelSecret,channelSecret]; arguments []; default message [channelSecret]]; default message [may not be null]\n2016-11-23T12:34:48.860126+00:00 app[web.1]: 2016-11-23 12:34:48.859  WARN 4 --- [           main] ationConfigEmbeddedWebApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'demoApplication': Unsatisfied dependency expressed through field 'lineMessagingService'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'com.linecorp.bot.spring.boot.LineBotAutoConfiguration': Unsatisfied dependency expressed through field 'lineBotProperties'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'line.bot-com.linecorp.bot.spring.boot.LineBotProperties': Could not bind properties to LineBotProperties (prefix=line.bot, ignoreInvalidFields=false, ignoreUnknownFields=true, ignoreNestedProperties=false); nested exception is org.springframework.validation.BindException: org.springframework.boot.bind.RelaxedDataBinder$RelaxedBeanPropertyBindingResult: 2 errors\n2016-11-23T12:34:48.860128+00:00 app[web.1]: Field error in object 'line.bot' on field 'channelToken': rejected value [null]; codes [NotNull.line.bot.channelToken,NotNull.channelToken,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [line.bot.channelToken,channelToken]; arguments []; default message [channelToken]]; default message [may not be null]\n2016-11-23T12:34:48.860129+00:00 app[web.1]: Field error in object 'line.bot' on field 'channelSecret': rejected value [null]; codes [NotNull.line.bot.channelSecret,NotNull.channelSecret,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [line.bot.channelSecret,channelSecret]; arguments []; default message [channelSecret]]; default message [may not be null]\n2016-11-23T12:34:48.864487+00:00 app[web.1]: 2016-11-23 12:34:48.864  INFO 4 --- [           main] o.apache.catalina.core.StandardService   : Stopping service Tomcat\n2016-11-23T12:34:49.049475+00:00 app[web.1]: 2016-11-23 12:34:49.047  INFO 4 --- [           main] utoConfigurationReportLoggingInitializer : \n2016-11-23T12:34:49.049477+00:00 app[web.1]: \n2016-11-23T12:34:49.049478+00:00 app[web.1]: Error starting ApplicationContext. To display the auto-configuration report re-run your application with 'debug' enabled.\n2016-11-23T12:34:49.142077+00:00 app[web.1]: 2016-11-23 12:34:49.141 ERROR 4 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \n2016-11-23T12:34:49.142090+00:00 app[web.1]: \n2016-11-23T12:34:49.142091+00:00 app[web.1]: ***************************\n2016-11-23T12:34:49.142092+00:00 app[web.1]: APPLICATION FAILED TO START\n2016-11-23T12:34:49.142092+00:00 app[web.1]: ***************************\n2016-11-23T12:34:49.142093+00:00 app[web.1]: \n2016-11-23T12:34:49.142094+00:00 app[web.1]: Description:\n2016-11-23T12:34:49.142094+00:00 app[web.1]: \n2016-11-23T12:34:49.142095+00:00 app[web.1]: Binding to target LineBotProperties(channelToken=null, channelSecret=null, apiEndPoint=https://api.line.me/, connectTimeout=10000, readTimeout=10000, writeTimeout=10000, handler=LineBotProperties.Handler(enabled=true, path=/callback)) failed:\n2016-11-23T12:34:49.142096+00:00 app[web.1]: \n2016-11-23T12:34:49.142097+00:00 app[web.1]:     Property: line.bot.channelToken\n2016-11-23T12:34:49.142097+00:00 app[web.1]:     Value: null\n2016-11-23T12:34:49.142098+00:00 app[web.1]:     Reason: may not be null\n2016-11-23T12:34:49.142098+00:00 app[web.1]: \n2016-11-23T12:34:49.142099+00:00 app[web.1]:     Property: line.bot.channelSecret\n2016-11-23T12:34:49.142100+00:00 app[web.1]:     Value: null\n2016-11-23T12:34:49.142100+00:00 app[web.1]:     Reason: may not be null\n2016-11-23T12:34:49.142101+00:00 app[web.1]: \n2016-11-23T12:34:49.142102+00:00 app[web.1]: \n2016-11-23T12:34:49.142102+00:00 app[web.1]: Action:\n2016-11-23T12:34:49.142103+00:00 app[web.1]: \n2016-11-23T12:34:49.142103+00:00 app[web.1]: Update your application's configuration\n2016-11-23T12:34:49.142104+00:00 app[web.1]: \n2016-11-23T12:34:49.346537+00:00 heroku[web.1]: Process exited with status 1\n2016-11-23T12:34:49.361013+00:00 heroku[web.1]: State changed from starting to crashed\n\n\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3082\u3053\u3053\u307e\u3067\u304f\u308c\u3070OK\n\nLINE Messaging API\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u8ffd\u52a0\n\u307e\u305a\u3001LINE BUSINESS CENTER\u3067\u30a2\u30ab\u30a6\u30f3\u30c8\u767b\u9332\u304c\u5fc5\u8981\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u3001\u672a\u767b\u9332\u306e\u4eba\u306f\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u308c\u3066\u8a8d\u8a3c(LINE\u306b4\u6841\u306e\u30b3\u30fc\u30c9\u304c\u9001\u3089\u308c\u3066\u304f\u308b)\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n\u307e\u305f\u3001\u516c\u5f0f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u308f\u304b\u308a\u3084\u3059\u3044\u52d5\u753b(36\u79d2)\u304c\u3042\u308b\u306e\u3067\u305d\u308c\u3092\u898b\u305f\u307b\u3046\u304c\u65e9\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\nMessaging API\u306e\u30da\u30fc\u30b8\u306e\u300cDevelper Trial\u3092\u59cb\u3081\u308b\u300d\u306e\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\n\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u4f5c\u6210\u753b\u9762\u304c\u3067\u308b\u306e\u3067\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u540d\u306b\u9069\u5f53\u306a\u540d\u524d\u3068\u3001\u696d\u7a2e\u3092\u9069\u5f53\u306b\u9078\u629e\u3057\u3001\u300c\u78ba\u8a8d\u3059\u308b\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\n\u78ba\u8a8d\u753b\u9762\u306b\u9077\u79fb\u3059\u308b\u306e\u3067\u300c\u7533\u3057\u8fbc\u3080\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\n\u4ee5\u4e0b\u306e\u753b\u9762\u306b\u9077\u79fb\u3059\u308b\u306e\u3067\u3001\u300cLINE@MANAGER\u3078\u300d\u306e\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\nBot\u8a2d\u5b9a\u306e\u753b\u9762\u306b\u9077\u79fb\u3059\u308b\u306e\u3067\u300cAPI\u3092\u5229\u7528\u3059\u308b\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\n\u518d\u5ea6\u6ce8\u610f\u4e8b\u9805\u304c\u78ba\u8a8d\u3055\u308c\u308b\u306e\u3067\u300c\u78ba\u8a8d\u300d\u3092\u30af\u30ea\u30c3\u30af\n\n\u300c\u6210\u529f\u3057\u307e\u3057\u305f\u300d\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3067\u308b\u306e\u3067\u300cOK\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\nBot\u8a2d\u5b9a\u753b\u9762\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\n\nWebhook\u9001\u4fe1 \u300c\u5229\u7528\u3059\u308b\u300d\n\u81ea\u52d5\u5fdc\u7b54\u30e1\u30c3\u30bb\u30fc\u30b8 \u300c\u5229\u7528\u3057\u306a\u3044\u300d(\u4efb\u610f)\n\u53cb\u3060\u3061\u8ffd\u52a0\u6642\u3042\u3044\u3055\u3064 \u300c\u5229\u7528\u3057\u306a\u3044\u300d(\u4efb\u610f)\n\n\n\u300c\u6210\u529f\u3057\u307e\u3057\u305f\u300d\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3067\u308b\u306e\u3067\u300cOK\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\nLINE BUSINESS CENTER\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u30ea\u30b9\u30c8\u306b\u623b\u3063\u3066\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u300cMessaging API\u300d\u306e\u898b\u51fa\u3057\u306e\u53f3\u306b\u3042\u308b\u300cLINE Developers\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\n\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u8a2d\u5b9a\u753b\u9762\u3067\u4ee5\u4e0b\u3092\u5b9f\u65bd\n\nWebhook URL\u306bHeroku\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306eURL\u3092\u8a2d\u5b9a\n\n\n\u4eca\u56de\u306esample\u3067\u306f\u3001Heroku\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3URL\u304chttps://salty-badlands-47970.herokuapp.com/\u3060\u3063\u305f\u306e\u3067\u3001https://salty-badlands-47970.herokuapp.com/callback\u3068\u8a2d\u5b9a\u3059\u308b\n\n\nChannel Secret\u3092\u300cSHOW\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u30e1\u30e2\u308b\nChannel Access Token\u3092\u300cISSUE\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u767a\u884c\u3057\u3001\u30e1\u30e2\u308b\n\n\n\n\nHeroku\u306e\u8a2d\u5b9a\u306b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3068\u30c8\u30fc\u30af\u30f3\u3092\u8a2d\u5b9a\nLINE\u7ba1\u7406\u753b\u9762\u3067\u53d6\u5f97\u3057\u305f\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3068\u30c8\u30fc\u30af\u30f3\u3092heroku\u306eCLI\u3092\u5229\u7528\u3057\u3066\u74b0\u5883\u5909\u6570\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u516c\u5f0fSDK\u306e\u8aac\u660e\u306e\u3068\u304a\u308aHeroku\u306e\u7ba1\u7406\u753b\u9762\u3067\u3082\u51fa\u6765\u307e\u3059\u3002\n\u4ee5\u4e0b\u3092\u5b9f\u884c\n\u276f heroku config:set LINE_BOT_CHANNEL_TOKEN={\u30e1\u30e2\u3063\u305fChannel Access Token} LINE_BOT_CHANNEL_SECRET={\u30e1\u30e2\u3063\u305fChannel Secret}\nSetting LINE_BOT_CHANNEL_TOKEN, LINE_BOT_CHANNEL_SECRET and restarting \u2b22 salty-badlands-47970... done, v9\nLINE_BOT_CHANNEL_SECRET: {\u30e1\u30e2\u3063\u305fChannel Secret}\nLINE_BOT_CHANNEL_TOKEN: {\u30e1\u30e2\u3063\u305fChannel Access Token}\n\n\u6b63\u3057\u304f\u8a2d\u5b9a\u3055\u308c\u305f\u304b\u4e0d\u5b89\u306a\u5834\u5408\u306fheroku config\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\n\u4e0a\u8a18\u306eheroku config:set\u30b3\u30de\u30f3\u30c9\u3067\u3001Heroku\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u81ea\u52d5\u7684\u306b\u518d\u8d77\u52d5\u3057\u3066\u3044\u308b\u306f\u305a\u306a\u306e\u3067\u3001heroku logs\u30b3\u30de\u30f3\u30c9\u3067\u8d77\u52d5\u72b6\u614b\u3092\u78ba\u8a8d\n\u30fb\u30fb\u30fb\u4e2d\u7565\u30fb\u30fb\u30fb\n2016-11-23T12:45:11.027942+00:00 app[web.1]: 2016-11-23 12:45:11.027  INFO 4 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup\n2016-11-23T12:45:11.039393+00:00 app[web.1]: 2016-11-23 12:45:11.039  INFO 4 --- [           main] o.s.c.support.DefaultLifecycleProcessor  : Starting beans in phase 0\n2016-11-23T12:45:11.165588+00:00 app[web.1]: 2016-11-23 12:45:11.163  INFO 4 --- [           main] c.l.b.s.b.s.LineMessageHandlerSupport    : Registered LINE Messaging API event handler: count = 0\n2016-11-23T12:45:11.211816+00:00 app[web.1]: 2016-11-23 12:45:11.211  INFO 4 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat started on port(s): 31911 (http)\n2016-11-23T12:45:11.218260+00:00 app[web.1]: 2016-11-23 12:45:11.218  INFO 4 --- [           main] com.example.DemoApplication              : Started DemoApplication in 8.773 seconds (JVM running for 9.902)\n2016-11-23T12:45:11.605169+00:00 heroku[web.1]: State changed from starting to up\n\n\u8d77\u52d5\u3057\u3066\u3044\u307e\u3057\u305f\u3002\n\u8d77\u52d5\u30ed\u30b0\u306e\u4e2d\u306b\u3053\u308c\u304c\u3042\u308b\u3068\u5b8c\u74a7\n2016-11-23T12:45:09.878281+00:00 app[web.1]: 2016-11-23 12:45:09.878  INFO 4 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped \"{[/callback],methods=[POST]}\" onto public void com.linecorp.bot.spring.boot.support.LineMessageHandlerSupport.callback(java.util.List<com.linecorp.bot.model.event.Event>)\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\u81ea\u5206\u306eLINE\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u8ffd\u52a0\u3057\u305fBOT\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u53cb\u3060\u3061\u306b\u3057\u3066(ID\u691c\u7d22\u306a\u3069\u3092\u5229\u7528)\u3001\u306a\u306b\u304b\u767a\u8a00\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u81ea\u5206\u306euserId\u304c\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u8fd4\u5374\u3055\u308c\u307e\u3059\u3002\nsample\u3067\u4f5c\u6210\u3057\u305fBOT\u3067\u3059\u304c\u3001\u3057\u3070\u3089\u304f\u6b8b\u3057\u3066\u304a\u304f\u306e\u3067\u5358\u7d14\u306b\u30e6\u30fc\u30b6\u30fcID\u304c\u77e5\u308a\u305f\u3044\u4eba\u306f\u4f55\u304b\u8a71\u3057\u304b\u3051\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n# \u306f\u3058\u3081\u306b\nLINE Messaging API\u3092SpringBoot\u3067\u5b9f\u88c5\u3059\u308bSDK\u304c\u516c\u5f0f\u304b\u3089\u3067\u3066\u3044\u305f\u306e\u3067\u8a66\u3059\u3002\nLINE Messaging API\u306f\u3001https\u3067\u306e\u901a\u4fe1\u304c\u524d\u63d0\u306a\u306e\u3067\u3001Heroku\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4(\u7121\u6599)\u3057\u3066\u30c6\u30b9\u30c8\u3059\u308b\u3002\n\n# \u624b\u9806\n\n\u57fa\u672c\u7684\u306b\u306f\u3001[\u516c\u5f0fSDK](https://github.com/line/line-bot-sdk-java/tree/master/sample-spring-boot-echo)\u306egithub\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u306e\u3068\u304a\u308a\u5b9f\u65bd\u3057\u307e\u3059\u304c\u3001bot\u306e\u5185\u5bb9\u3092\u767a\u8a00\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u306e\u30e6\u30fc\u30b6\u30fcID\u3092\u8fd4\u4fe1\u3059\u308b\u51e6\u7406\u306b\u3057\u307e\u3057\u305f\u3002\n\u81ea\u5206\u306eLINE\u306e\u30e6\u30fc\u30b6\u30fcID\u3092\u77e5\u308b\u8853\u304c\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u3001reply\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304b\u3089\u53d6\u5f97\u3057\u305f\u304b\u3063\u305f\u3068\u3044\u3046\u306e\u3082\u3042\u308a\u307e\u3059\u3002\n\u203b\u8a73\u3057\u3044\u4eba\u306f\u6559\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n1. SpringBoot\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\n2. LINE Messaging API\u306e\u516c\u5f0fSDK\u306e`line-bot-spring-boot`\u3092gradle\u306e\u4f9d\u5b58\u306b\u8ffd\u52a0\n3. sample\u3092\u53c2\u8003\u306bSpringBoot\u306e\u8d77\u52d5\u30af\u30e9\u30b9\u306b\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\n4. Heroku\u306b\u30c7\u30d7\u30ed\u30a4\n4. LINE Messaging API\u306e`Messaging API Developer Trial`\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u8ffd\u52a0(\u3082\u308d\u3082\u308d\u306e\u8a2d\u5b9a\u3068\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3068\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97)\n5. Heroku\u306e\u8a2d\u5b9a\u306b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3068\u30c8\u30fc\u30af\u30f3\u3092\u8a2d\u5b9a\n6. \u52d5\u4f5c\u78ba\u8a8d\n\n# \u8a73\u7d30\n\n## SpringBoot\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306bSpringBoot\u306e\u96db\u5f62\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\n\n[Spring Boot\u3092Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u306e\u304c\u5287\u7684\u306b\u7c21\u5358\u306b\u306a\u3063\u3066\u3044\u308b\u4ef6](http://qiita.com/gosshys/items/6d409a245a108ad25202)\n\n\u203bHeroku\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3068\u3053\u308d\u307e\u3067\u5b9f\u65bd\u3059\u308b\n\n## LINE Messaging API\u306e\u516c\u5f0fSDK\u3092gradle\u306e\u4f9d\u5b58\u306b\u8ffd\u52a0\n\nbuild.gradle\u306e`dependencies`\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\n\n```\ndependencies {\n  compile('com.linecorp.bot:line-bot-spring-boot:1.3.0') // \u30b3\u30b3\u3092\u8ffd\u52a0\n  compile('org.springframework.boot:spring-boot-starter-actuator')\n  compile('org.springframework.boot:spring-boot-starter-web')\n  testCompile('org.springframework.boot:spring-boot-starter-test')\n}\n```\n\n## sample\u3092\u53c2\u8003\u306bSpringBoot\u306e\u8d77\u52d5\u30af\u30e9\u30b9\u306b\u30b3\u30fc\u30c9\u8ffd\u52a0\n\n[\u516c\u5f0fSDK\u306esample\u5b9f\u88c5](https://github.com/line/line-bot-sdk-java/blob/master/sample-spring-boot-echo/src/main/java/com/example/bot/spring/echo/EchoApplication.java)\u3092\u53c2\u8003\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306bSpringBoot\u306e\u8d77\u52d5\u30af\u30e9\u30b9\u3092\u4fee\u6b63\n\n\u30b5\u30f3\u30c9\u30a4\u30c3\u30c1\u30b3\u30e1\u30f3\u30c8\u3067\u4fee\u6b63\u7b87\u6240\u3092\u8a18\u8f09\u3057\u3066\u3044\u307e\u3059\u3002\u30af\u30e9\u30b9\u306b\u3082`@LineMessageHandler`\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u306e\u3092\u308f\u3059\u308c\u305a\u306b\u3002\nimport\u306fsample\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\npackage com.example;\n\nimport com.linecorp.bot.client.LineMessagingService;\nimport com.linecorp.bot.model.ReplyMessage;\nimport com.linecorp.bot.model.event.Event;\nimport com.linecorp.bot.model.event.MessageEvent;\nimport com.linecorp.bot.model.event.message.TextMessageContent;\nimport com.linecorp.bot.model.message.TextMessage;\nimport com.linecorp.bot.model.response.BotApiResponse;\nimport com.linecorp.bot.spring.boot.annotation.EventMapping;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\nimport java.util.Collections;\n\n@SpringBootApplication\n@LineMessageHandler //----- \u30b3\u30b3\u3092\u8ffd\u52a0\npublic class DemoApplication {\n\n  public static void main(String[] args) {\n    SpringApplication.run(DemoApplication.class, args);\n  }\n\n//----- \u3053\u3053\u304b\u3089 -----\n  @Autowired\n  private LineMessagingService lineMessagingService;\n\n  @EventMapping\n  public void handleTextMessageEvent(MessageEvent<TextMessageContent> event) throws Exception {\n    System.out.println(\"event: \" + event);\n    final BotApiResponse apiResponse = lineMessagingService\n        .replyMessage(new ReplyMessage(event.getReplyToken(),\n                                       Collections.singletonList(new TextMessage(event.getSource().getUserId()))))\n        .execute().body();\n    System.out.println(\"Sent messages: \" + apiResponse);\n  }\n\n  @EventMapping\n  public void defaultMessageEvent(Event event) {\n    System.out.println(\"event: \" + event);\n  }\n//----- \u3053\u3053\u307e\u3067\u8ffd\u52a0 -----\n\n}\n\n```\n\n## Heroku\u306b\u30c7\u30d7\u30ed\u30a4\n\n```\ngit commit -am \"add line bot\"\ngit push heroku master\n```\n\n\u30c7\u30d7\u30ed\u30a4\u306f\u6210\u529f\u3059\u308b\u306f\u305a\u3002Heroku\u306e\u30ed\u30b0\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001\n\n```\nheroku logs --tail\n```\n\n\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\n\n### \u629c\u7c8b\n\n```\n2016-11-23T12:34:48.860128+00:00 app[web.1]: Field error in object 'line.bot' on field 'channelToken': rejected value [null]; codes [NotNull.line.bot.channelToken,NotNull.channelToken,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [line.bot.channelToken,channelToken]; arguments []; default message [channelToken]]; default message [may not be null]\n2016-11-23T12:34:48.860129+00:00 app[web.1]: Field error in object 'line.bot' on field 'channelSecret': rejected value [null]; codes [NotNull.line.bot.channelSecret,NotNull.channelSecret,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [line.bot.channelSecret,channelSecret]; arguments []; default message [channelSecret]]; default message [may not be null]\n```\n\n### \u5168\u4f53\n\n```\n2016-11-23T12:34:25.585995+00:00 heroku[web.1]: Starting process with command `java -Dserver.port=26054 $JAVA_OPTS -jar build/libs/*.jar`\n2016-11-23T12:34:28.350814+00:00 app[web.1]: Create a Procfile to customize the command used to run this process: https://devcenter.heroku.com/articles/procfile\n2016-11-23T12:34:28.363096+00:00 app[web.1]: Setting JAVA_TOOL_OPTIONS defaults based on dyno size. Custom settings will override them.\n2016-11-23T12:34:28.370890+00:00 app[web.1]: Picked up JAVA_TOOL_OPTIONS: -Xmx350m -Xss512k -Dfile.encoding=UTF-8\n2016-11-23T12:34:33.611174+00:00 app[web.1]: \n2016-11-23T12:34:33.611223+00:00 app[web.1]:   .   ____          _            __ _ _\n2016-11-23T12:34:33.611274+00:00 app[web.1]:  /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n2016-11-23T12:34:33.611327+00:00 app[web.1]: ( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n2016-11-23T12:34:33.611374+00:00 app[web.1]:  \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n2016-11-23T12:34:33.611423+00:00 app[web.1]:   '  |____| .__|_| |_|_| |_\\__, | / / / /\n2016-11-23T12:34:33.611471+00:00 app[web.1]:  =========|_|==============|___/=/_/_/_/\n2016-11-23T12:34:33.616715+00:00 app[web.1]:  :: Spring Boot ::        (v1.4.2.RELEASE)\n2016-11-23T12:34:33.616758+00:00 app[web.1]: \n2016-11-23T12:34:35.077856+00:00 app[web.1]: 2016-11-23 12:34:35.043  INFO 4 --- [           main] com.example.DemoApplication              : Starting DemoApplication on 3fec34e1-1683-4668-b572-8d779c0b0d2a with PID 4 (/app/build/libs/demo-0.0.1-SNAPSHOT.jar started by u52915 in /app)\n2016-11-23T12:34:35.099269+00:00 app[web.1]: 2016-11-23 12:34:35.078  INFO 4 --- [           main] com.example.DemoApplication              : No active profile set, falling back to default profiles: default\n2016-11-23T12:34:35.786319+00:00 app[web.1]: 2016-11-23 12:34:35.770  INFO 4 --- [           main] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@6659c656: startup date [Wed Nov 23 12:34:35 UTC 2016]; root of context hierarchy\n2016-11-23T12:34:45.729917+00:00 app[web.1]: 2016-11-23 12:34:45.729  INFO 4 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat initialized with port(s): 26054 (http)\n2016-11-23T12:34:45.758893+00:00 app[web.1]: 2016-11-23 12:34:45.758  INFO 4 --- [           main] o.apache.catalina.core.StandardService   : Starting service Tomcat\n2016-11-23T12:34:45.761198+00:00 app[web.1]: 2016-11-23 12:34:45.760  INFO 4 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.6\n2016-11-23T12:34:46.348214+00:00 app[web.1]: 2016-11-23 12:34:46.346  INFO 4 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2016-11-23T12:34:46.349784+00:00 app[web.1]: 2016-11-23 12:34:46.349  INFO 4 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 10608 ms\n2016-11-23T12:34:48.252663+00:00 app[web.1]: 2016-11-23 12:34:48.252  INFO 4 --- [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean  : Mapping servlet: 'dispatcherServlet' to [/]\n2016-11-23T12:34:48.290693+00:00 app[web.1]: 2016-11-23 12:34:48.290  INFO 4 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'metricsFilter' to: [/*]\n2016-11-23T12:34:48.291348+00:00 app[web.1]: 2016-11-23 12:34:48.291  INFO 4 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'characterEncodingFilter' to: [/*]\n2016-11-23T12:34:48.291501+00:00 app[web.1]: 2016-11-23 12:34:48.291  INFO 4 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]\n2016-11-23T12:34:48.291646+00:00 app[web.1]: 2016-11-23 12:34:48.291  INFO 4 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'httpPutFormContentFilter' to: [/*]\n2016-11-23T12:34:48.291783+00:00 app[web.1]: 2016-11-23 12:34:48.291  INFO 4 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'requestContextFilter' to: [/*]\n2016-11-23T12:34:48.291919+00:00 app[web.1]: 2016-11-23 12:34:48.291  INFO 4 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'webRequestLoggingFilter' to: [/*]\n2016-11-23T12:34:48.292078+00:00 app[web.1]: 2016-11-23 12:34:48.291  INFO 4 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'applicationContextIdFilter' to: [/*]\n2016-11-23T12:34:48.852189+00:00 app[web.1]: 2016-11-23 12:34:48.851 ERROR 4 --- [           main] o.s.b.b.PropertiesConfigurationFactory   : Properties configuration failed validation\n2016-11-23T12:34:48.852531+00:00 app[web.1]: 2016-11-23 12:34:48.852 ERROR 4 --- [           main] o.s.b.b.PropertiesConfigurationFactory   : Field error in object 'line.bot' on field 'channelToken': rejected value [null]; codes [NotNull.line.bot.channelToken,NotNull.channelToken,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [line.bot.channelToken,channelToken]; arguments []; default message [channelToken]]; default message [may not be null]\n2016-11-23T12:34:48.856823+00:00 app[web.1]: 2016-11-23 12:34:48.852 ERROR 4 --- [           main] o.s.b.b.PropertiesConfigurationFactory   : Field error in object 'line.bot' on field 'channelSecret': rejected value [null]; codes [NotNull.line.bot.channelSecret,NotNull.channelSecret,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [line.bot.channelSecret,channelSecret]; arguments []; default message [channelSecret]]; default message [may not be null]\n2016-11-23T12:34:48.860126+00:00 app[web.1]: 2016-11-23 12:34:48.859  WARN 4 --- [           main] ationConfigEmbeddedWebApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'demoApplication': Unsatisfied dependency expressed through field 'lineMessagingService'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'com.linecorp.bot.spring.boot.LineBotAutoConfiguration': Unsatisfied dependency expressed through field 'lineBotProperties'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'line.bot-com.linecorp.bot.spring.boot.LineBotProperties': Could not bind properties to LineBotProperties (prefix=line.bot, ignoreInvalidFields=false, ignoreUnknownFields=true, ignoreNestedProperties=false); nested exception is org.springframework.validation.BindException: org.springframework.boot.bind.RelaxedDataBinder$RelaxedBeanPropertyBindingResult: 2 errors\n2016-11-23T12:34:48.860128+00:00 app[web.1]: Field error in object 'line.bot' on field 'channelToken': rejected value [null]; codes [NotNull.line.bot.channelToken,NotNull.channelToken,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [line.bot.channelToken,channelToken]; arguments []; default message [channelToken]]; default message [may not be null]\n2016-11-23T12:34:48.860129+00:00 app[web.1]: Field error in object 'line.bot' on field 'channelSecret': rejected value [null]; codes [NotNull.line.bot.channelSecret,NotNull.channelSecret,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [line.bot.channelSecret,channelSecret]; arguments []; default message [channelSecret]]; default message [may not be null]\n2016-11-23T12:34:48.864487+00:00 app[web.1]: 2016-11-23 12:34:48.864  INFO 4 --- [           main] o.apache.catalina.core.StandardService   : Stopping service Tomcat\n2016-11-23T12:34:49.049475+00:00 app[web.1]: 2016-11-23 12:34:49.047  INFO 4 --- [           main] utoConfigurationReportLoggingInitializer : \n2016-11-23T12:34:49.049477+00:00 app[web.1]: \n2016-11-23T12:34:49.049478+00:00 app[web.1]: Error starting ApplicationContext. To display the auto-configuration report re-run your application with 'debug' enabled.\n2016-11-23T12:34:49.142077+00:00 app[web.1]: 2016-11-23 12:34:49.141 ERROR 4 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \n2016-11-23T12:34:49.142090+00:00 app[web.1]: \n2016-11-23T12:34:49.142091+00:00 app[web.1]: ***************************\n2016-11-23T12:34:49.142092+00:00 app[web.1]: APPLICATION FAILED TO START\n2016-11-23T12:34:49.142092+00:00 app[web.1]: ***************************\n2016-11-23T12:34:49.142093+00:00 app[web.1]: \n2016-11-23T12:34:49.142094+00:00 app[web.1]: Description:\n2016-11-23T12:34:49.142094+00:00 app[web.1]: \n2016-11-23T12:34:49.142095+00:00 app[web.1]: Binding to target LineBotProperties(channelToken=null, channelSecret=null, apiEndPoint=https://api.line.me/, connectTimeout=10000, readTimeout=10000, writeTimeout=10000, handler=LineBotProperties.Handler(enabled=true, path=/callback)) failed:\n2016-11-23T12:34:49.142096+00:00 app[web.1]: \n2016-11-23T12:34:49.142097+00:00 app[web.1]:     Property: line.bot.channelToken\n2016-11-23T12:34:49.142097+00:00 app[web.1]:     Value: null\n2016-11-23T12:34:49.142098+00:00 app[web.1]:     Reason: may not be null\n2016-11-23T12:34:49.142098+00:00 app[web.1]: \n2016-11-23T12:34:49.142099+00:00 app[web.1]:     Property: line.bot.channelSecret\n2016-11-23T12:34:49.142100+00:00 app[web.1]:     Value: null\n2016-11-23T12:34:49.142100+00:00 app[web.1]:     Reason: may not be null\n2016-11-23T12:34:49.142101+00:00 app[web.1]: \n2016-11-23T12:34:49.142102+00:00 app[web.1]: \n2016-11-23T12:34:49.142102+00:00 app[web.1]: Action:\n2016-11-23T12:34:49.142103+00:00 app[web.1]: \n2016-11-23T12:34:49.142103+00:00 app[web.1]: Update your application's configuration\n2016-11-23T12:34:49.142104+00:00 app[web.1]: \n2016-11-23T12:34:49.346537+00:00 heroku[web.1]: Process exited with status 1\n2016-11-23T12:34:49.361013+00:00 heroku[web.1]: State changed from starting to crashed\n```\n\n\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3082\u3053\u3053\u307e\u3067\u304f\u308c\u3070OK\n\n## LINE Messaging API\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u8ffd\u52a0\n\n\u307e\u305a\u3001[LINE BUSINESS CENTER](https://business.line.me/ja/companies/1235502/)\u3067\u30a2\u30ab\u30a6\u30f3\u30c8\u767b\u9332\u304c\u5fc5\u8981\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u3001\u672a\u767b\u9332\u306e\u4eba\u306f\u767b\u9332\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u308c\u3066\u8a8d\u8a3c(LINE\u306b4\u6841\u306e\u30b3\u30fc\u30c9\u304c\u9001\u3089\u308c\u3066\u304f\u308b)\u3059\u308b\u3060\u3051\u3067\u3059\u3002\n\n\u307e\u305f\u3001\u516c\u5f0f\u306e[\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://developers.line.me/messaging-api/getting-started#create_lineat)\u306b\u308f\u304b\u308a\u3084\u3059\u3044\u52d5\u753b(36\u79d2)\u304c\u3042\u308b\u306e\u3067\u305d\u308c\u3092\u898b\u305f\u307b\u3046\u304c\u65e9\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\n[Messaging API](https://business.line.me/ja/companies/1235502/services/bot)\u306e\u30da\u30fc\u30b8\u306e\u300cDevelper Trial\u3092\u59cb\u3081\u308b\u300d\u306e\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n![image](https://qiita-image-store.s3.amazonaws.com/0/38174/de0e1103-dd15-4374-0fca-93a24d25fa5c.png)\n\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u4f5c\u6210\u753b\u9762\u304c\u3067\u308b\u306e\u3067\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u540d\u306b\u9069\u5f53\u306a\u540d\u524d\u3068\u3001\u696d\u7a2e\u3092\u9069\u5f53\u306b\u9078\u629e\u3057\u3001\u300c\u78ba\u8a8d\u3059\u308b\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n![image](https://qiita-image-store.s3.amazonaws.com/0/38174/3b528342-5b44-bd34-b899-109db2b31a8a.png)\n\u78ba\u8a8d\u753b\u9762\u306b\u9077\u79fb\u3059\u308b\u306e\u3067\u300c\u7533\u3057\u8fbc\u3080\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n![image](https://qiita-image-store.s3.amazonaws.com/0/38174/d6f47f42-7839-01fd-247b-91b7c5a73b0d.png)\n\u4ee5\u4e0b\u306e\u753b\u9762\u306b\u9077\u79fb\u3059\u308b\u306e\u3067\u3001\u300cLINE@MANAGER\u3078\u300d\u306e\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n![image](https://qiita-image-store.s3.amazonaws.com/0/38174/35d26a9c-91e2-3617-543a-eb4a30e9d9c1.png)\nBot\u8a2d\u5b9a\u306e\u753b\u9762\u306b\u9077\u79fb\u3059\u308b\u306e\u3067\u300cAPI\u3092\u5229\u7528\u3059\u308b\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n![image](https://qiita-image-store.s3.amazonaws.com/0/38174/f361be84-e6be-f20a-b4f2-5e10d7c04eac.png)\n\n\u518d\u5ea6\u6ce8\u610f\u4e8b\u9805\u304c\u78ba\u8a8d\u3055\u308c\u308b\u306e\u3067\u300c\u78ba\u8a8d\u300d\u3092\u30af\u30ea\u30c3\u30af\n![image](https://qiita-image-store.s3.amazonaws.com/0/38174/5341bab4-3c10-f25b-7df6-eeb35af03e6c.png)\n\n\u300c\u6210\u529f\u3057\u307e\u3057\u305f\u300d\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3067\u308b\u306e\u3067\u300cOK\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n![image](https://qiita-image-store.s3.amazonaws.com/0/38174/79e8cd87-a4de-70dc-ec40-d9c0c9469db1.png)\n\nBot\u8a2d\u5b9a\u753b\u9762\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\n\n- Webhook\u9001\u4fe1 \u300c\u5229\u7528\u3059\u308b\u300d\n- \u81ea\u52d5\u5fdc\u7b54\u30e1\u30c3\u30bb\u30fc\u30b8 \u300c\u5229\u7528\u3057\u306a\u3044\u300d(\u4efb\u610f)\n- \u53cb\u3060\u3061\u8ffd\u52a0\u6642\u3042\u3044\u3055\u3064 \u300c\u5229\u7528\u3057\u306a\u3044\u300d(\u4efb\u610f)\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/38174/2b53054e-94b0-fc8d-f617-4ea740ac6d35.png)\n\u300c\u6210\u529f\u3057\u307e\u3057\u305f\u300d\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3067\u308b\u306e\u3067\u300cOK\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n![image](https://qiita-image-store.s3.amazonaws.com/0/38174/b4cb74f2-0b3b-4220-1f21-4e847b54f57f.png)\n[LINE BUSINESS CENTER\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u30ea\u30b9\u30c8](https://business.line.me/ja/companies/1235502/accounts?ownerType=company&roleType=operator)\u306b\u623b\u3063\u3066\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u300cMessaging API\u300d\u306e\u898b\u51fa\u3057\u306e\u53f3\u306b\u3042\u308b\u300cLINE Developers\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n![image](https://qiita-image-store.s3.amazonaws.com/0/38174/187c0b29-ecfd-3282-5419-41047c81b749.png)\n\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u8a2d\u5b9a\u753b\u9762\u3067\u4ee5\u4e0b\u3092\u5b9f\u65bd\n\n- Webhook URL\u306bHeroku\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306eURL\u3092\u8a2d\u5b9a\n  - \u4eca\u56de\u306esample\u3067\u306f\u3001Heroku\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3URL\u304c`https://salty-badlands-47970.herokuapp.com/`\u3060\u3063\u305f\u306e\u3067\u3001`https://salty-badlands-47970.herokuapp.com/callback`\u3068\u8a2d\u5b9a\u3059\u308b\n- Channel Secret\u3092\u300cSHOW\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u30e1\u30e2\u308b\n- Channel Access Token\u3092\u300cISSUE\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u767a\u884c\u3057\u3001\u30e1\u30e2\u308b\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/38174/925caf68-cc7c-bd05-05a0-fcfdc226ab83.png)\n![image](https://qiita-image-store.s3.amazonaws.com/0/38174/ee491818-a3c8-a2bc-a934-c9fbbd4d89de.png)\n\n## Heroku\u306e\u8a2d\u5b9a\u306b\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3068\u30c8\u30fc\u30af\u30f3\u3092\u8a2d\u5b9a\n\nLINE\u7ba1\u7406\u753b\u9762\u3067\u53d6\u5f97\u3057\u305f\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3068\u30c8\u30fc\u30af\u30f3\u3092heroku\u306eCLI\u3092\u5229\u7528\u3057\u3066\u74b0\u5883\u5909\u6570\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n[\u516c\u5f0fSDK](https://github.com/line/line-bot-sdk-java/tree/master/sample-spring-boot-echo#step-3)\u306e\u8aac\u660e\u306e\u3068\u304a\u308aHeroku\u306e\u7ba1\u7406\u753b\u9762\u3067\u3082\u51fa\u6765\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u3092\u5b9f\u884c\n\n```\n\u276f heroku config:set LINE_BOT_CHANNEL_TOKEN={\u30e1\u30e2\u3063\u305fChannel Access Token} LINE_BOT_CHANNEL_SECRET={\u30e1\u30e2\u3063\u305fChannel Secret}\nSetting LINE_BOT_CHANNEL_TOKEN, LINE_BOT_CHANNEL_SECRET and restarting \u2b22 salty-badlands-47970... done, v9\nLINE_BOT_CHANNEL_SECRET: {\u30e1\u30e2\u3063\u305fChannel Secret}\nLINE_BOT_CHANNEL_TOKEN: {\u30e1\u30e2\u3063\u305fChannel Access Token}\n```\n\n\u6b63\u3057\u304f\u8a2d\u5b9a\u3055\u308c\u305f\u304b\u4e0d\u5b89\u306a\u5834\u5408\u306f`heroku config`\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\n\n\u4e0a\u8a18\u306e`heroku config:set`\u30b3\u30de\u30f3\u30c9\u3067\u3001Heroku\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u81ea\u52d5\u7684\u306b\u518d\u8d77\u52d5\u3057\u3066\u3044\u308b\u306f\u305a\u306a\u306e\u3067\u3001`heroku logs`\u30b3\u30de\u30f3\u30c9\u3067\u8d77\u52d5\u72b6\u614b\u3092\u78ba\u8a8d\n\n```\n\u30fb\u30fb\u30fb\u4e2d\u7565\u30fb\u30fb\u30fb\n2016-11-23T12:45:11.027942+00:00 app[web.1]: 2016-11-23 12:45:11.027  INFO 4 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup\n2016-11-23T12:45:11.039393+00:00 app[web.1]: 2016-11-23 12:45:11.039  INFO 4 --- [           main] o.s.c.support.DefaultLifecycleProcessor  : Starting beans in phase 0\n2016-11-23T12:45:11.165588+00:00 app[web.1]: 2016-11-23 12:45:11.163  INFO 4 --- [           main] c.l.b.s.b.s.LineMessageHandlerSupport    : Registered LINE Messaging API event handler: count = 0\n2016-11-23T12:45:11.211816+00:00 app[web.1]: 2016-11-23 12:45:11.211  INFO 4 --- [           main] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat started on port(s): 31911 (http)\n2016-11-23T12:45:11.218260+00:00 app[web.1]: 2016-11-23 12:45:11.218  INFO 4 --- [           main] com.example.DemoApplication              : Started DemoApplication in 8.773 seconds (JVM running for 9.902)\n2016-11-23T12:45:11.605169+00:00 heroku[web.1]: State changed from starting to up\n```\n\n\u8d77\u52d5\u3057\u3066\u3044\u307e\u3057\u305f\u3002\n\n\u8d77\u52d5\u30ed\u30b0\u306e\u4e2d\u306b\u3053\u308c\u304c\u3042\u308b\u3068\u5b8c\u74a7\n\n```\n2016-11-23T12:45:09.878281+00:00 app[web.1]: 2016-11-23 12:45:09.878  INFO 4 --- [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped \"{[/callback],methods=[POST]}\" onto public void com.linecorp.bot.spring.boot.support.LineMessageHandlerSupport.callback(java.util.List<com.linecorp.bot.model.event.Event>)\n```\n\n## \u52d5\u4f5c\u78ba\u8a8d\n\n\u81ea\u5206\u306eLINE\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u8ffd\u52a0\u3057\u305fBOT\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u53cb\u3060\u3061\u306b\u3057\u3066(ID\u691c\u7d22\u306a\u3069\u3092\u5229\u7528)\u3001\u306a\u306b\u304b\u767a\u8a00\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/38174/91d33685-cd39-eb41-dc7e-7cd2cd6a75bd.png)\n\n\u81ea\u5206\u306euserId\u304c\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u8fd4\u5374\u3055\u308c\u307e\u3059\u3002\n\nsample\u3067\u4f5c\u6210\u3057\u305fBOT\u3067\u3059\u304c\u3001\u3057\u3070\u3089\u304f\u6b8b\u3057\u3066\u304a\u304f\u306e\u3067\u5358\u7d14\u306b\u30e6\u30fc\u30b6\u30fcID\u304c\u77e5\u308a\u305f\u3044\u4eba\u306f\u4f55\u304b\u8a71\u3057\u304b\u3051\u3066\u304f\u3060\u3055\u3044\u3002\n\n<img src=\"http://qr-official.line.me/L/_LZCXsSfPh.png\">\n<a href=\"https://line.me/R/ti/p/%40zlk4352h\"><img height=\"36\" border=\"0\" alt=\"\u53cb\u3060\u3061\u8ffd\u52a0\" src=\"https://scdn.line-apps.com/n/line_add_friends/btn/ja.png\"></a>\n", "tags": ["spring-boot", "Heroku", "LINEmessagingAPI"]}