{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\n\u3064\u304e\u306e\u3088\u3046\u306a\u30b5\u30d6\u30af\u30a8\u30ea\u306b\u56fa\u5b9a\u5024\u6587\u5b57\u5217\u306e\u30ab\u30e9\u30e0\u30a8\u30a4\u30ea\u30a2\u30b9\u3092 WHERE \u53e5\u3067\u5229\u7528\u3057\u305f\u30af\u30a8\u30ea\u304c\u5b9f\u884c\u3067\u304d\u306a\u3044\uff0e\n\nSELECT\n m.id, m.name, m.dt, m.service, m.device\nFROM (\n SELECT \n   id, name, dt, service, \"mb\" AS device\n FROM\n   test_fix_value_column_alias010\n) m\nWHERE\n device = 'mb'\n\n\n\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\n\n\nFAILED: SemanticException MetaException(message:Error parsing partition filter : MismatchedTokenException(19!=8))\n\n\n\u4eee\u5b9a\u3068\u3057\u3066\u306e\u7d50\u8ad6\n\u30b5\u30d6\u30af\u30a8\u30ea\u306b\u56fa\u5b9a\u6587\u5b57\u5217\u3067\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u53d6\u308a\uff0cWHERE \u53e5\u306b\u305d\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u306e\u30ab\u30e9\u30e0\u3092\u5229\u7528\u3057\u305f\u6761\u4ef6\u304c\u3042\u308b\u3068\u30d1\u30fc\u30b9\u3067\u304d\u306a\u3044\n\n\u59d1\u606f\u306a\u89e3\u6c7a\u7b56\n\u56fa\u5b9a\u5024\u6587\u5b57\u5217\u3067\u30ab\u30e9\u30e0\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u3068\u3063\u305f\u30ab\u30e9\u30e0\u306e\u7b49\u5024\u5224\u5b9a\u3092 LIKE \u306b\u3059\u308c\u3070\u30af\u30a8\u30ea\u304c\u5b9f\u884c\u3067\u304d\u308b\n\n\u691c\u8a3c\u306e\u6e96\u5099\n\nHadoop\nCDH 4.3 (Hive 0.10.0)\n\n\n\u691c\u8a3c\u7528 HiveTBL\n\nDROP TABLE IF EXISTS test_fix_value_column_alias010;\nCREATE TABLE IF NOT EXISTS test_fix_value_column_alias010 (\n   id INT,\n   name STRING\n)\nPARTITIONED BY (dt STRING, service STRING)\nROW FORMAT DELIMITED FIELDS TERMINATED BY ',';>>\n\n\n\u691c\u8a3c\u7528\u30c7\u30fc\u30bf\n\n1,aaaa\n2,bbbb\n3,cccc\n4,dddd\n\n\nLOAD DATA\n\nLOAD DATA LOCAL INPATH '/tmp/data.csv'\nOVERWRITE INTO TABLE test_fix_value_column_alias010 \n PARTITION (dt = '2013-06-29', service = 'hoge');\nLOAD DATA LOCAL INPATH '/tmp/data.csv'\nOVERWRITE INTO TABLE test_fix_value_column_alias010 \n PARTITION (dt = '2013-06-29', service = 'fuga');\n\n\n\u691c\u8a3c\n\u3064\u304e\u306e\uff13\u3064\u306e\u72b6\u6cc1\u3067\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u3066\u6b63\u5e38\u306b\u5b9f\u884c\u3067\u304d\u308b\u304b\u691c\u8a3c\u3057\u305f\uff0e\n1 \u30b5\u30d6\u30af\u30a8\u30ea\u5316\u3057\u306a\u3044\u3067\u56fa\u5b9a\u6587\u5b57\u5024\uff08\u6587\u5b57\u5217\uff09\u3092\u542b\u3093\u3060\u30ab\u30e9\u30e0\u306e SELECT\n2 \u30b5\u30d6\u30af\u30a8\u30ea\u5316\u3057\u3066\u56fa\u5b9a\u6587\u5b57\u5024\uff08\u6587\u5b57\u5217\uff09\u3092\u542b\u3093\u3060\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\u3059\u308b\u304c WHERE \u53e5\u306b\u306f\u95a2\u4fc2\u306a\u3044 SELECT\n3 \u30b5\u30d6\u30af\u30a8\u30ea\u304b\u3057\u3066\u56fa\u5b9a\u6587\u5b57\u5024\uff08\u6587\u5b57\u5217\uff09\u3092\u542b\u3093\u3060\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\u3057 WHERE \u53e5\u306b\u542b\u3081\u305f SELECT\n\u3053\u306e\uff13\u3064\u306e\u72b6\u6cc1\u4e0b\u3067\uff0c\uff11\u3068\uff12\u306f\u6b63\u5e38\u306b\u30af\u30a8\u30ea\u304c\u5b9f\u884c\u3055\u308c\u305f\uff0e\n\u3057\u304b\u3057\uff0c\uff13\u3067\u306f\u30af\u30a8\u30ea\u304c\u30d1\u30fc\u30b9\u3067\u304d\u306a\u3044\u3068\u3044\u3046\u73fe\u8c61\u304c\u78ba\u8a8d\u3055\u308c\u305f\uff0e\n\u4ee5\u4e0a\uff0c\u4eee\u5b9a\u3068\u3057\u3066\u306f\uff0c\u30b5\u30d6\u30af\u30a8\u30ea\u3067\u56fa\u5b9a\u5024\u3092\u30a8\u30a4\u30ea\u30a2\u30b9\u3068\u3057\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\u3057\u305f\u3068\u304d\uff0cWHERE \u53e5\u3067\u305d\u306e\u30ab\u30e9\u30e0\u3092\u5229\u7528\u3057\u305f\u3068\u304d\u306b\u30d1\u30fc\u30b9\u3067\u304d\u306a\u3044\uff0e\n\n\u691c\u8a3c010\uff1a\u30b5\u30d6\u30af\u30a8\u30ea\u5316\u3057\u306a\u3044\u3067\u5358\u7d14\u306b SELECT\n\u7d50\u679c\uff1a\u6210\u529f\n\nSELECT \n id, name, dt, service, \"mb\" AS device\nFROM\n test_fix_value_column_alias010\nWHERE\n dt = '2013-06-29'\n AND service = 'hoge'\nLIMIT 10;\n1       aaaa    2013-06-29      hoge    mb\n2       bbbb    2013-06-29      hoge    mb\n...\n\n\n\u691c\u8a3c020\uff1a\u30b5\u30d6\u30af\u30a8\u30ea\u5316\u3059\u308b\u304c\u56fa\u5b9a\u6587\u5b57\u5217\u3092\u30a8\u30a4\u30ea\u30a2\u30b9\u3068\u3057\u305f\u30ab\u30e9\u30e0\u3092 WHERE \u53e5\u306b\u542b\u3081\u306a\u3044 SELECT\n\u7d50\u679c\uff1a\u6210\u529f\n\nSELECT \n id, name, dt, service, \"mb\" AS device\nFROM\n test_fix_value_column_alias010\nWHERE\n dt = '2013-06-29'\n AND service = 'hoge'\nLIMIT 10;\n1       aaaa    2013-06-29      hoge    mb\n2       bbbb    2013-06-29      hoge    mb\n...\nSELECT\n m.id, m.name, m.dt, m.service, m.device\nFROM (\n SELECT \n   id, name, dt, service, \"mb\" AS device\n FROM\n   test_fix_value_column_alias010\n) m\nWHERE\n m.dt = '2013-06-29'\n AND name IS NOT NULL\n AND service IS NOT NULL\nLIMIT 10;\n1       aaaa    2013-06-29      fuga    mb\n2       bbbb    2013-06-29      fuga    mb\n...\n\n\n\u691c\u8a3c030\uff1a\u30b5\u30d6\u30af\u30a8\u30ea\u5316\u3057\u3066\u56fa\u5b9a\u6587\u5b57\u5217\u3092\u30a8\u30a4\u30ea\u30a2\u30b9\u3068\u3057\u305f\u30ab\u30e9\u30e0\u3092 WHERE \u53e5\u306b\u542b\u3081\u305f SELECT\n\u7d50\u679c\uff1a\u5931\u6557\n\nSELECT\n m.id, m.name, m.dt, m.service, m.device\nFROM (\n SELECT \n   id, name, dt, service, \"mb\" AS device\n FROM\n   test_fix_value_column_alias010\n) m\nWHERE\n device = 'mb'\nLIMIT 10;\nFAILED: SemanticException MetaException(message:Error parsing partition filter : MismatchedTokenException(19!=8))\nSELECT\n m.id, m.name, m.dt, m.service, m.device\nFROM (\n SELECT \n   id, name, dt, service, \"mb\" AS device\n FROM\n   test_fix_value_column_alias010\n) m\nWHERE\n m.dt = '2013-06-29'\n AND device = 'mb'\nLIMIT 10;\n-- FAILED: SemanticException MetaException(message:Error parsing partition filter : MismatchedTokenException(19!=8))\n\n# \u6982\u8981\n\n\u3064\u304e\u306e\u3088\u3046\u306a\u30b5\u30d6\u30af\u30a8\u30ea\u306b\u56fa\u5b9a\u5024\u6587\u5b57\u5217\u306e\u30ab\u30e9\u30e0\u30a8\u30a4\u30ea\u30a2\u30b9\u3092 WHERE \u53e5\u3067\u5229\u7528\u3057\u305f\u30af\u30a8\u30ea\u304c\u5b9f\u884c\u3067\u304d\u306a\u3044\uff0e\n\n>SELECT\n>  m.id, m.name, m.dt, m.service, m.device\n>FROM (\n>  SELECT \n>    id, name, dt, service, \"mb\" AS device\n>  FROM\n>    test_fix_value_column_alias010\n>) m\n>WHERE\n>  device = 'mb'\n\n- \u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\n\n> FAILED: SemanticException MetaException(message:Error parsing partition filter : MismatchedTokenException(19!=8))\n\n# \u4eee\u5b9a\u3068\u3057\u3066\u306e\u7d50\u8ad6\n\n\u30b5\u30d6\u30af\u30a8\u30ea\u306b\u56fa\u5b9a\u6587\u5b57\u5217\u3067\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u53d6\u308a\uff0cWHERE \u53e5\u306b\u305d\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u306e\u30ab\u30e9\u30e0\u3092\u5229\u7528\u3057\u305f\u6761\u4ef6\u304c\u3042\u308b\u3068\u30d1\u30fc\u30b9\u3067\u304d\u306a\u3044\n\n# \u59d1\u606f\u306a\u89e3\u6c7a\u7b56\n\n\u56fa\u5b9a\u5024\u6587\u5b57\u5217\u3067\u30ab\u30e9\u30e0\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u3068\u3063\u305f\u30ab\u30e9\u30e0\u306e\u7b49\u5024\u5224\u5b9a\u3092 LIKE \u306b\u3059\u308c\u3070\u30af\u30a8\u30ea\u304c\u5b9f\u884c\u3067\u304d\u308b\n\n# \u691c\u8a3c\u306e\u6e96\u5099\n\n- Hadoop\nCDH 4.3 (Hive 0.10.0)\n\n## \u691c\u8a3c\u7528 HiveTBL\n\n>DROP TABLE IF EXISTS test_fix_value_column_alias010;\n>CREATE TABLE IF NOT EXISTS test_fix_value_column_alias010 (\n>    id INT,\n>    name STRING\n>)\n>PARTITIONED BY (dt STRING, service STRING)\n>ROW FORMAT DELIMITED FIELDS TERMINATED BY ',';>>\n\n## \u691c\u8a3c\u7528\u30c7\u30fc\u30bf\n\n> 1,aaaa\n> 2,bbbb\n> 3,cccc\n> 4,dddd\n\n## LOAD DATA\n\n>LOAD DATA LOCAL INPATH '/tmp/data.csv'\n>OVERWRITE INTO TABLE test_fix_value_column_alias010 \n>  PARTITION (dt = '2013-06-29', service = 'hoge');\n>LOAD DATA LOCAL INPATH '/tmp/data.csv'\n>OVERWRITE INTO TABLE test_fix_value_column_alias010 \n>  PARTITION (dt = '2013-06-29', service = 'fuga');\n\n# \u691c\u8a3c\n\n\u3064\u304e\u306e\uff13\u3064\u306e\u72b6\u6cc1\u3067\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u3066\u6b63\u5e38\u306b\u5b9f\u884c\u3067\u304d\u308b\u304b\u691c\u8a3c\u3057\u305f\uff0e\n\n1 \u30b5\u30d6\u30af\u30a8\u30ea\u5316\u3057\u306a\u3044\u3067\u56fa\u5b9a\u6587\u5b57\u5024\uff08\u6587\u5b57\u5217\uff09\u3092\u542b\u3093\u3060\u30ab\u30e9\u30e0\u306e SELECT\n2 \u30b5\u30d6\u30af\u30a8\u30ea\u5316\u3057\u3066\u56fa\u5b9a\u6587\u5b57\u5024\uff08\u6587\u5b57\u5217\uff09\u3092\u542b\u3093\u3060\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\u3059\u308b\u304c WHERE \u53e5\u306b\u306f\u95a2\u4fc2\u306a\u3044 SELECT\n3 \u30b5\u30d6\u30af\u30a8\u30ea\u304b\u3057\u3066\u56fa\u5b9a\u6587\u5b57\u5024\uff08\u6587\u5b57\u5217\uff09\u3092\u542b\u3093\u3060\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\u3057 WHERE \u53e5\u306b\u542b\u3081\u305f SELECT\n\n\u3053\u306e\uff13\u3064\u306e\u72b6\u6cc1\u4e0b\u3067\uff0c\uff11\u3068\uff12\u306f\u6b63\u5e38\u306b\u30af\u30a8\u30ea\u304c\u5b9f\u884c\u3055\u308c\u305f\uff0e\n\u3057\u304b\u3057\uff0c\uff13\u3067\u306f\u30af\u30a8\u30ea\u304c\u30d1\u30fc\u30b9\u3067\u304d\u306a\u3044\u3068\u3044\u3046\u73fe\u8c61\u304c\u78ba\u8a8d\u3055\u308c\u305f\uff0e\n\n\u4ee5\u4e0a\uff0c\u4eee\u5b9a\u3068\u3057\u3066\u306f\uff0c\u30b5\u30d6\u30af\u30a8\u30ea\u3067\u56fa\u5b9a\u5024\u3092\u30a8\u30a4\u30ea\u30a2\u30b9\u3068\u3057\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\u3057\u305f\u3068\u304d\uff0cWHERE \u53e5\u3067\u305d\u306e\u30ab\u30e9\u30e0\u3092\u5229\u7528\u3057\u305f\u3068\u304d\u306b\u30d1\u30fc\u30b9\u3067\u304d\u306a\u3044\uff0e\n\n## \u691c\u8a3c010\uff1a\u30b5\u30d6\u30af\u30a8\u30ea\u5316\u3057\u306a\u3044\u3067\u5358\u7d14\u306b SELECT\n\n\u7d50\u679c\uff1a\u6210\u529f\n\n>SELECT \n>  id, name, dt, service, \"mb\" AS device\n>FROM\n>  test_fix_value_column_alias010\n>WHERE\n>  dt = '2013-06-29'\n>  AND service = 'hoge'\n>LIMIT 10;\n>\n>1       aaaa    2013-06-29      hoge    mb\n>2       bbbb    2013-06-29      hoge    mb\n>...\n\n## \u691c\u8a3c020\uff1a\u30b5\u30d6\u30af\u30a8\u30ea\u5316\u3059\u308b\u304c\u56fa\u5b9a\u6587\u5b57\u5217\u3092\u30a8\u30a4\u30ea\u30a2\u30b9\u3068\u3057\u305f\u30ab\u30e9\u30e0\u3092 WHERE \u53e5\u306b\u542b\u3081\u306a\u3044 SELECT\n\n\u7d50\u679c\uff1a\u6210\u529f\n\n>SELECT \n>  id, name, dt, service, \"mb\" AS device\n>FROM\n>  test_fix_value_column_alias010\n>WHERE\n>  dt = '2013-06-29'\n>  AND service = 'hoge'\n>LIMIT 10;\n>\n>1       aaaa    2013-06-29      hoge    mb\n>2       bbbb    2013-06-29      hoge    mb\n>...\n\n>SELECT\n>  m.id, m.name, m.dt, m.service, m.device\n>FROM (\n>  SELECT \n>    id, name, dt, service, \"mb\" AS device\n>  FROM\n>    test_fix_value_column_alias010\n>) m\n>WHERE\n>  m.dt = '2013-06-29'\n>  AND name IS NOT NULL\n>  AND service IS NOT NULL\n>LIMIT 10;\n>\n>1       aaaa    2013-06-29      fuga    mb\n>2       bbbb    2013-06-29      fuga    mb\n>...\n\n## \u691c\u8a3c030\uff1a\u30b5\u30d6\u30af\u30a8\u30ea\u5316\u3057\u3066\u56fa\u5b9a\u6587\u5b57\u5217\u3092\u30a8\u30a4\u30ea\u30a2\u30b9\u3068\u3057\u305f\u30ab\u30e9\u30e0\u3092 WHERE \u53e5\u306b\u542b\u3081\u305f SELECT\n\n\u7d50\u679c\uff1a\u5931\u6557\n\n>SELECT\n>  m.id, m.name, m.dt, m.service, m.device\n>FROM (\n>  SELECT \n>    id, name, dt, service, \"mb\" AS device\n>  FROM\n>    test_fix_value_column_alias010\n>) m\n>WHERE\n>  device = 'mb'\n>LIMIT 10;\n>\n>FAILED: SemanticException MetaException(message:Error parsing partition filter : MismatchedTokenException(19!=8))\n\n>SELECT\n>  m.id, m.name, m.dt, m.service, m.device\n>FROM (\n>  SELECT \n>    id, name, dt, service, \"mb\" AS device\n>  FROM\n>    test_fix_value_column_alias010\n>) m\n>WHERE\n>  m.dt = '2013-06-29'\n>  AND device = 'mb'\n>LIMIT 10;\n>\n>-- FAILED: SemanticException MetaException(message:Error parsing partition filter : MismatchedTokenException(19!=8))", "tags": ["hive"]}