{"context": " More than 1 year has passed since last update.\u305d\u3093\u306a\u3053\u3093\u306a\u30676\u65e5\u76ee\u3067\u3059\u3002\u4eca\u65e5\u306f\u5f0a\u793e\u306e\u3068\u3042\u308b\u30b2\u30fc\u30e0\u304b\u3089TD\u3078\u306e\u30af\u30a8\u30ea\u306b\u4f7f\u3063\u3066\u3044\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u3064\u3044\u3066\u7c21\u5358\u306b\u3054\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nPHP TreasureData Api Client\nsotarok\u304c\u304c\u4f5c\u3063\u305fphp-treasure-data\u3068\u3044\u3046TD API\u304c\u3042\u308b\u306e\u306f\u77e5\u3063\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3084\u3093\u3054\u3068\u306a\u304d\u4e8b\u60c5+Proxy\u5468\u308a\u306e\u30b5\u30dd\u30fc\u30c8\u3068\u304b\u3092\u5165\u308c\u305f\u308a\u3059\u308b\u306e\u3067\u3064\u304f\u3063\u305f\u306e\u304c\u4e0b\u8a18\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\nhttps://github.com/chobie/treasuredata-api-client\n\u5b9f\u88c5\u304c\u53bb\u5e74\u306a\u306e\u3067\u4eca\u306e\u6700\u65b0\u306e\u6a5f\u80fd\u306f\u305d\u3093\u306a\u306b\u7121\u304b\u3063\u305f\u308a\u3059\u308b\u3068\u601d\u3046\u3093\u3067\u3059\u304c\u3001\u5fc5\u8981\u306a\u6a5f\u80fd\u306f\u3060\u3044\u305f\u3044\u63c3\u3063\u3066\u3044\u308b\u306f\u305a\u3002\nKEEP IN MIND\u306e\u6240\u3092\u3092\u898b\u8fd4\u3059\u3068\u30e1\u30e2\u30ea\u5229\u7528\u7387\u3067\u30c1\u30e7\u30c3\u30c8\u52b9\u7387\u7684\u306a\u306f\u305a\u3001\u3068\u304b\u306a\u308b\u3079\u304f\u5c0f\u3055\u306a\u914d\u5217\u4f7f\u3046\u3088\u3046\u306b\u3057\u3066\u308b\u306e\u3067\u6bd4\u8f03\u7684\u5b89\u5b9a\u3057\u3066\u308b\u3088\u30fc\u3063\u3066\u306e\u3092\u30aa\u30b7\u3066\u305f\u307f\u305f\u3044\u306a\u306e\u3067\u3059\u304c\u3001\u5b9f\u6e2c\u3057\u3066\u306a\u3044\u3057\u307e\u3041\u3001\u3068\u308a\u3042\u3048\u305a\u66f8\u3044\u3066\u307f\u305f\u304f\u3089\u3044\u306e\u3082\u306e\u3060\u3063\u305f\u3068\u601d\u3046\u3093\u3067\u3068\u308a\u3042\u3048\u305a\u6a2a\u306b\u7f6e\u3044\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\nTreasure Data API\nhttp://docs.treasuredata.com/articles/rest-api\nTD\u306eAPI\u306b\u3064\u3044\u3066\u306f\u4e0a\u8a18URL\u306b\u8a73\u7d30\u306a\u8a18\u8f09\u304c\u3042\u308a\u307e\u3059\u3001\u304c\u30bd\u30fc\u30b9\u307f\u305f\u307b\u3046\u304c\u8272\u3005\u3068\u9762\u767d\u3044\u3068\u500b\u4eba\u7684\u306b\u601d\u3063\u3066\u3044\u307e\u3059\u3002\n\u57fa\u672c\u7684\u306b\u307b\u3068\u3093\u3069\u3059\u3079\u3066\u306e\u64cd\u4f5c\u304cREST API\u7d4c\u7531\u3067\u884c\u3048\u308b\u306e\u3082TD\u306e\u30e1\u30ea\u30c3\u30c8\u3067\u3059\u306d\u3002\n\n\u5b9f\u884c\u4f8b\n\u30aa\u30fc\u30eb\u30c9\u30b9\u30bf\u30a4\u30eb\u306aPHP\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u306e\u3067\u540c\u68b1\u306eautoloader\u3092\u4f7f\u3046\u304bComposer\u7d4c\u7531\u3067\u5229\u7528\u51fa\u6765\u307e\u3059\u3002\ncomposer\u306e\u5834\u5408\u306f\u4e0b\u8a18\u3092require\u306b\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n{\n   \"require\": {\n       \"chobie/treasuredata-api-client\": \"dev-master\"\n    }\n}\n\n[https://github.com/chobie/treasuredata-api-client/blob/master/examples/issue\\_query.php]\n\u305d\u308c\u3067\u306fQuery\u5b9f\u884c\u304b\u3089\u53d6\u5f97\u3059\u308b\u307e\u3067\u5f85\u3064\u5b9f\u88c5\u306e\u4f8b\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n<?php\nrequire_once join(DIRECTORY_SEPARATOR, array(dirname(dirname(__FILE__)), \"src\", \"TreasureData\", \"Autoloader.php\"));\ndate_default_timezone_set(\"UTC\");\nTreasureData_Autoloader::register();\n\n$api = TreasureData_APIFactory::createClient(array(\n    \"api_key\" => \"<PUT YOUR API KEY HERE(see ~/.td/td.conf)>\",\n));\n\n$message = $api->issueHiveQuery(\"testdb\", \"select v['code'] as code, count(1) as cnt from www_access group by v['code']\", 0)\n                ->getResult();\n\n/* @var TreasureData_API_Message_IssueJob $message */\n\nprintf(\"# Issuing job_id %s successful\\n\", $message->getJobId());\nprintf(\"# polling job status. this will 30 over seconds...\\n\");\n\nwhile (true) {\n    printf(\"# Issuing job status api. we wait 10 seconds after issuing api.\\n\");\n\n    $st = $api->getJobStatus($message->getJobId())->getResult();\n    /* @var TreasureData_API_Message_JobStatus $status */\n    if ($st->isSuccess()) {\n        $result = $api->getJobResult($message->getJobId())->getResult();\n        break;\n    } else if ($st->isError()) {\n        throw new RuntimeException(sprintf(\"job_id %s returns error\", $message->getJobId()));\n    } else {\n        printf(\".\");\n        var_dump($st);\n        sleep(10);\n    }\n}\n\nvar_dump($result);\n\nruby\u7b49\u306e\u5834\u5408\u306f\u516c\u5f0f\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3048\u3070\u3044\u3044\u3093\u3067\u3059\u304c\u3001PHP\u3060\u3068\u30c7\u30d5\u30a1\u30af\u30c8\u30b9\u30bf\u30f3\u30c0\u30fc\u30c9\u304c\u306a\u3044\u306e\u3067\u72b6\u6cc1\u306b\u4f75\u305b\u3066\u597d\u304d\u306a\u306e\u3092\u4f7f\u3046\u3068\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u305f\u3076\u3093\u5f8c\u306e\u65b9\u3067\u3053\u308c\u3092\u4f7f\u3063\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5074\u8996\u70b9\u3067\u306e\u8a18\u4e8b\u3092\u306a\u3093\u304b\u66f8\u304f\u3068\u601d\u3046\u306e\u3067\u3054\u671f\u5f85\uff01\n\n\u305d\u3093\u306a\u3053\u3093\u306a\u30676\u65e5\u76ee\u3067\u3059\u3002\u4eca\u65e5\u306f\u5f0a\u793e\u306e\u3068\u3042\u308b\u30b2\u30fc\u30e0\u304b\u3089TD\u3078\u306e\u30af\u30a8\u30ea\u306b\u4f7f\u3063\u3066\u3044\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u3064\u3044\u3066\u7c21\u5358\u306b\u3054\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n## PHP TreasureData Api Client\n\nsotarok\u304c\u304c\u4f5c\u3063\u305f[php-treasure-data](https://github.com/crocos/php-treasure-data)\u3068\u3044\u3046TD API\u304c\u3042\u308b\u306e\u306f\u77e5\u3063\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3084\u3093\u3054\u3068\u306a\u304d\u4e8b\u60c5+Proxy\u5468\u308a\u306e\u30b5\u30dd\u30fc\u30c8\u3068\u304b\u3092\u5165\u308c\u305f\u308a\u3059\u308b\u306e\u3067\u3064\u304f\u3063\u305f\u306e\u304c\u4e0b\u8a18\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\n\nhttps://github.com/chobie/treasuredata-api-client\n\n\n\u5b9f\u88c5\u304c\u53bb\u5e74\u306a\u306e\u3067\u4eca\u306e\u6700\u65b0\u306e\u6a5f\u80fd\u306f\u305d\u3093\u306a\u306b\u7121\u304b\u3063\u305f\u308a\u3059\u308b\u3068\u601d\u3046\u3093\u3067\u3059\u304c\u3001\u5fc5\u8981\u306a\u6a5f\u80fd\u306f\u3060\u3044\u305f\u3044\u63c3\u3063\u3066\u3044\u308b\u306f\u305a\u3002\n\nKEEP IN MIND\u306e\u6240\u3092\u3092\u898b\u8fd4\u3059\u3068\u30e1\u30e2\u30ea\u5229\u7528\u7387\u3067\u30c1\u30e7\u30c3\u30c8\u52b9\u7387\u7684\u306a\u306f\u305a\u3001\u3068\u304b\u306a\u308b\u3079\u304f\u5c0f\u3055\u306a\u914d\u5217\u4f7f\u3046\u3088\u3046\u306b\u3057\u3066\u308b\u306e\u3067\u6bd4\u8f03\u7684\u5b89\u5b9a\u3057\u3066\u308b\u3088\u30fc\u3063\u3066\u306e\u3092\u30aa\u30b7\u3066\u305f\u307f\u305f\u3044\u306a\u306e\u3067\u3059\u304c\u3001\u5b9f\u6e2c\u3057\u3066\u306a\u3044\u3057\u307e\u3041\u3001\u3068\u308a\u3042\u3048\u305a\u66f8\u3044\u3066\u307f\u305f\u304f\u3089\u3044\u306e\u3082\u306e\u3060\u3063\u305f\u3068\u601d\u3046\u3093\u3067\u3068\u308a\u3042\u3048\u305a\u6a2a\u306b\u7f6e\u3044\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n# Treasure Data API\n\nhttp://docs.treasuredata.com/articles/rest-api\n\nTD\u306eAPI\u306b\u3064\u3044\u3066\u306f\u4e0a\u8a18URL\u306b\u8a73\u7d30\u306a\u8a18\u8f09\u304c\u3042\u308a\u307e\u3059\u3001\u304c[\u30bd\u30fc\u30b9](https://github.com/treasure-data/td)\u307f\u305f\u307b\u3046\u304c\u8272\u3005\u3068\u9762\u767d\u3044\u3068\u500b\u4eba\u7684\u306b\u601d\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u57fa\u672c\u7684\u306b\u307b\u3068\u3093\u3069\u3059\u3079\u3066\u306e\u64cd\u4f5c\u304cREST API\u7d4c\u7531\u3067\u884c\u3048\u308b\u306e\u3082TD\u306e\u30e1\u30ea\u30c3\u30c8\u3067\u3059\u306d\u3002\n\n## \u5b9f\u884c\u4f8b\n\n\u30aa\u30fc\u30eb\u30c9\u30b9\u30bf\u30a4\u30eb\u306aPHP\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u306e\u3067\u540c\u68b1\u306eautoloader\u3092\u4f7f\u3046\u304bComposer\u7d4c\u7531\u3067\u5229\u7528\u51fa\u6765\u307e\u3059\u3002\n\ncomposer\u306e\u5834\u5408\u306f\u4e0b\u8a18\u3092require\u306b\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\n{\n   \"require\": {\n       \"chobie/treasuredata-api-client\": \"dev-master\"\n    }\n}\n```\n\n[https://github.com/chobie/treasuredata-api-client/blob/master/examples/issue\\_query.php]\n\n\u305d\u308c\u3067\u306fQuery\u5b9f\u884c\u304b\u3089\u53d6\u5f97\u3059\u308b\u307e\u3067\u5f85\u3064\u5b9f\u88c5\u306e\u4f8b\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```php\n<?php\nrequire_once join(DIRECTORY_SEPARATOR, array(dirname(dirname(__FILE__)), \"src\", \"TreasureData\", \"Autoloader.php\"));\ndate_default_timezone_set(\"UTC\");\nTreasureData_Autoloader::register();\n\n$api = TreasureData_APIFactory::createClient(array(\n    \"api_key\" => \"<PUT YOUR API KEY HERE(see ~/.td/td.conf)>\",\n));\n\n$message = $api->issueHiveQuery(\"testdb\", \"select v['code'] as code, count(1) as cnt from www_access group by v['code']\", 0)\n                ->getResult();\n\n/* @var TreasureData_API_Message_IssueJob $message */\n\nprintf(\"# Issuing job_id %s successful\\n\", $message->getJobId());\nprintf(\"# polling job status. this will 30 over seconds...\\n\");\n\nwhile (true) {\n    printf(\"# Issuing job status api. we wait 10 seconds after issuing api.\\n\");\n\n    $st = $api->getJobStatus($message->getJobId())->getResult();\n    /* @var TreasureData_API_Message_JobStatus $status */\n    if ($st->isSuccess()) {\n        $result = $api->getJobResult($message->getJobId())->getResult();\n        break;\n    } else if ($st->isError()) {\n        throw new RuntimeException(sprintf(\"job_id %s returns error\", $message->getJobId()));\n    } else {\n        printf(\".\");\n        var_dump($st);\n        sleep(10);\n    }\n}\n\nvar_dump($result);\n```\n\nruby\u7b49\u306e\u5834\u5408\u306f\u516c\u5f0f\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3048\u3070\u3044\u3044\u3093\u3067\u3059\u304c\u3001PHP\u3060\u3068\u30c7\u30d5\u30a1\u30af\u30c8\u30b9\u30bf\u30f3\u30c0\u30fc\u30c9\u304c\u306a\u3044\u306e\u3067\u72b6\u6cc1\u306b\u4f75\u305b\u3066\u597d\u304d\u306a\u306e\u3092\u4f7f\u3046\u3068\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u305f\u3076\u3093\u5f8c\u306e\u65b9\u3067\u3053\u308c\u3092\u4f7f\u3063\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5074\u8996\u70b9\u3067\u306e\u8a18\u4e8b\u3092\u306a\u3093\u304b\u66f8\u304f\u3068\u601d\u3046\u306e\u3067\u3054\u671f\u5f85\uff01\n", "tags": ["TreasureData", "PHP"]}