{"tags": ["NetBSD", "AdventCalendar"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u74b0\u5883\u3067NetBSD-hpcmips\u306a\u30ab\u30fc\u30cd\u30eb\u3092\u30d3\u30eb\u30c9\u3057\u3066\u307f\u308b\n\n\nNetBSD\u306e\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u74b0\u5883\nNetBSD\u306fMIPS\u3084PowerPC,SH\u3084VAX,SPARC\u3068\u3044\u3063\u305f\u3001Intel\u7cfb\u4ee5\u5916\u306eCPU\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3067\u3082\u52d5\u4f5c\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u306f\u3001\u81ea\u8eab\u3067\u30ab\u30fc\u30cd\u30eb\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3068\u304b\u306a\u308a\u6642\u9593\u304c\u304b\u304b\u3063\u305f\u308a\u3059\u308b\u3082\u306e\u3082\u3042\u308a\u307e\u3059\u3002NetBSD\u3067\u306f\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u306b\u5bfe\u5fdc\u3057\u305f\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u304c\u7528\u610f\u3055\u308c\u3066\u304a\u308a\u3001\u4ed6\u306eCPU\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u5411\u3051\u306b\u30ab\u30fc\u30cd\u30eb\u3092\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u3053\u3068\u304c\u5bb9\u6613\u306b\u884c\u3048\u307e\u3059\u3002\n\u4eca\u65e5\u306eNetBSD Advent Calendar\u3067\u306f\u3001\u3053\u306e\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u306e\u69cb\u7bc9\u3068\u3001\u3053\u308c\u3092\u5229\u7528\u3057\u3066\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305fNetBSD-hpcmips\u306a\u30ab\u30fc\u30cd\u30eb\u3092\u5b9f\u6a5f(\u521d\u4ee3\u30b7\u30b0\u30de\u30ea\u30aa\u30f3)\u3067\u52d5\u304b\u3057\u3066\u307f\u308b\u8a18\u4e8b\u3092\u66f8\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u524d\u6e96\u5099\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u5c55\u958b\n\u307e\u305a\u306fNetBSD\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u5c55\u958b\u3057\u307e\u3059\u3002\u524d\u56de\u306e\u30ab\u30fc\u30cd\u30eb\u30b3\u30f3\u30d1\u30a4\u30eb\u306e\u8a18\u4e8b\u3068\u540c\u3058\u304f\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u4e0a\u3067\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3066\u307f\u307e\u3059\u3002\n\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u30bd\u30fc\u30b9CD-ROM(NetBSD-5.1.5-source.iso)\u3092\u30bb\u30c3\u30c8\u3057\u3066\u3001NetBSD\u5074\u304b\u3089\u4ee5\u4e0b\u306e\u624b\u9806\u3067mount\u3057\u307e\u3059\u3002/cdrom\u3068\u3044\u3046\u30de\u30a6\u30f3\u30c8\u30dd\u30a4\u30f3\u30c8\u304c\u5b58\u5728\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u3053\u306bmount\u3059\u308b\u3068\u3088\u3055\u305d\u3046\u3067\u3059\u3002\nnibossy ~ $ sudo mount -t cd9660 /dev/cd0a /cdrom\nnibossy ~ $ mount | grep cdrom\n/dev/cd0a on /cdrom type cd9660 (read-only, local)\n\nNetBSD\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4e00\u5f0f\u3092\u5c55\u958b\u3057\u307e\u3059\u3002\u5c55\u958b\u5148\u306e\u30c8\u30c3\u30d7\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\"-C /\"\u3068\u3057\u3066\u3044\u308b\u70b9\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nnibossy ~ $ sudo -i\nnbsd515_yuusyabu# cd /cdrom/source/sets/\nnbsd515_yuusyabu# ls\nMD5          gnusrc.tgz   src.tgz      xsrc.tgz\nSHA512       sharesrc.tgz syssrc.tgz\n# for i in *.tgz; do tar zxvf $i -C / ; done\n\n\n\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u306e\u69cb\u7bc9\n\u6b21\u306b\u3001NetBSD-hpcmips\u3092\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u3068\u3044\u3063\u3066\u3082\u3001\u5c55\u958b\u3057\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306b\u542b\u307e\u308c\u308bbuild.sh\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u5168\u90e8\u3084\u3063\u3066\u304f\u308c\u308b\u306e\u3067\u3001\u305d\u3093\u306a\u306b\u96e3\u3057\u304f\u3042\u308a\u307e\u305b\u3093\u3002\n/usr/src/BUILDING\u3092\u898b\u308b\u3068\u3001build.sh\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n# cat BUILDING\nBUILDING(8)             NetBSD System Manager's Manual             BUILDING(8)\n\nNAME\n     BUILDING -- Procedure for building NetBSD from source code\n...\u4e2d\u7565...\n     build.sh       Bourne-compatible shell script used for building the host\n                    build tools and the NetBSD system from scratch.  Can be\n                    used for both native and cross builds, and should be used\n                    instead of make(1) for any source tree that is updated and\n                    recompiled regularly.\n\n\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u306e\u683c\u7d0d\u5148\u3068\u3057\u3066/usr/cross/NetBSD-5.1.5/hpcmips\u3092\u6307\u5b9a\u3057\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\nnibossy ~ $ sudo -i\n# cd /usr/src/\n# mkdir /usr/cross\n# uname -r\n5.1.5\n# ./build.sh -m hpcmips -a mipsel -T /usr/cross/NetBSD-5.1.5/hpcmips -r -o -U tools\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n# time ./build.sh -m hpcmips -a mipsel -T /usr/cross/NetBSD-5.1.5/hpcmips -r -o -U tools\n===> build.sh started: Thu Dec 18 02:09:55 JST 2014\n===> NetBSD version:   5.1.5\n===> MACHINE:          hpcmips\n===> MACHINE_ARCH:     mipsel\n===> Build platform:   NetBSD 5.1.5 amd64\n===> HOST_SH:          /bin/sh\n===> No /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbmake, needs building.\n===> Bootstrapping nbmake\n...\u4e2d\u7565...\n===> build.sh ended:   Thu Dec 18 02:16:29 JST 2014\n===> Summary of results:\n         build.sh command: ./build.sh -m hpcmips -a mipsel -T /usr/cross/NetBSD-5.1.5/hpcmips -r -o -U tools\n         build.sh started: Thu Dec 18 02:09:55 JST 2014\n         NetBSD version:   5.1.5\n         MACHINE:          hpcmips\n         MACHINE_ARCH:     mipsel\n         Build platform:   NetBSD 5.1.5 amd64\n         HOST_SH:          /bin/sh\n         No /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbmake, needs building.\n         Bootstrapping nbmake\n         TOOLDIR path:     /usr/cross/NetBSD-5.1.5/hpcmips\n         DESTDIR path:     /usr/src/destdir.hpcmips\n         RELEASEDIR path:  /usr/src/releasedir\n         Removing /usr/cross/NetBSD-5.1.5/hpcmips\n         Removing /usr/src/destdir.hpcmips\n         Created /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbmake\n         makewrapper:      /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbmake-hpcmips\n         Updated /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbmake-hpcmips\n         Tools built to /usr/cross/NetBSD-5.1.5/hpcmips\n         build.sh ended:   Thu Dec 18 02:16:29 JST 2014\n===> .\n  394.82s real   283.10s user    62.80s system\n\n\u3053\u3053\u307e\u3067\u3067\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u7528\u306e\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u306e\u6e96\u5099\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\nhpcmips\u5411\u3051\u306e\u30ab\u30fc\u30cd\u30eb\u3092\u30af\u30ed\u30b9\u30d3\u30eb\u30c9\u3057\u3066\u307f\u308b\n\n\u30ab\u30fc\u30cd\u30eb\u306e\u30d3\u30eb\u30c9\n\u5358\u306b\u30ab\u30fc\u30cd\u30eb\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3060\u3051\u3067\u306f\u9762\u767d\u307f\u306b\u6b20\u3051\u308b\u306e\u3067\u3001NetBSD\u30ab\u30fc\u30cd\u30eb\u3092\u30d3\u30eb\u30c9\u3057\u3066\u307f\u308b\u306e\u8a18\u4e8b\u306b\u306a\u3089\u3044\u3001\u30ab\u30fc\u30cd\u30eb\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u5c11\u3057\u4fee\u6b63\u3057\u3066\u307f\u307e\u3059\u3002\u3053\u306e\u8a18\u4e8b\u3067\u306fNetBSD-6.1.5\u3092\u5bfe\u8c61\u306b\u3057\u305f\u624b\u9806\u3067\u3057\u305f\u304c\u3001\u4eca\u56de\u306f\u90fd\u5408\u4e0a\u3001NetBSD-5.1.5\u3092\u5bfe\u8c61\u306b\u3057\u307e\u3059\u3002\n\u3053\u306eNetBSD-5.1.5\u3067\u3082\u8d77\u52d5\u6642\u306b\u597d\u304d\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3059\u3002\u305f\u3060\u3001NetBSD-6.1.5\u3067\u306f\u8d77\u52d5\u6642\u306b\u547c\u3070\u308c\u3066\u3044\u305fbanner()\u95a2\u6570\u304c\u5b58\u5728\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\u305d\u3053\u3067\u3001\"total memory\"\u3068\u3044\u3046\u6587\u5b57\u5217\u3092\u5143\u306b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092grep\u3057\u3066\u307f\u307e\u3059\u3002sys/arch/hpcmips/hpcmips/machdep.c\u3092\u4fee\u6b63\u3059\u308c\u3070\u3088\u3055\u305d\u3046\u3067\u3059\u3002\nnibossy ~ $ cd /usr/src/sys\nnibossy sys $ find . -type f | grep \\\\.c$ | xargs grep 'total memory' | grep hpcmips\n./arch/hpcmips/hpcmips/machdep.c:       printf(\"total memory = %s\\n\", pbuf);\n./arch/hpcmips/hpcmips/machdep.c:               printf(\"total memory banks = %d\\n\", mem_cluster_cnt);\n\nsys/arch/hpcmips/hpcmips/machdep.c\u3092\u898b\u308b\u3068\u3001cpu_startup()\u3068\u3044\u3046\u95a2\u6570\u306e\u4e2d\u3067\"total memory\"\u3092\u51fa\u529b\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u306b\u81ea\u5206\u306e\u597d\u304d\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\u3059\u308b\u51e6\u7406\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nsys/arch/hpcmips/hpcmips/machdep.c:\n    538 /*\n    539  * Machine-dependent startup code.\n    540  * allocate memory for variable-sized tables, initialize CPU.\n    541  */\n    542 void\n    543 cpu_startup()\n    544 {\n    ...\n    558         printf(\"%s%s\", copyright, version);\n    559         sprintf(cpu_model, \"%s (%s)\", platid_name(&platid), cpu_name);\n    560         printf(\"%s\\n\", cpu_model);\n    561         format_bytes(pbuf, sizeof(pbuf), ctob(physmem));\n    562         printf(\"total memory = %s\\n\", pbuf);\n    563         if (bootverbose) {\n    564                 /* show again when verbose mode */\n    565                 printf(\"total memory banks = %d\\n\", mem_cluster_cnt);\n    ...\n    592         printf(\"avail memory = %s\\n\", pbuf);\n    593 }\n\n\u4eca\u56de\u306f\u300c\u7d50\u57ce\u53cb\u5948\u306f\u52c7\u8005\u3067\u3042\u308b\u300d\u306eWikipedia\u306e\u8a18\u4e8b\u306e\u4e00\u90e8\u3092\u8868\u793a\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u4fee\u6b63\u5185\u5bb9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n# diff -u arch/hpcmips/hpcmips/machdep.c.orig arch/hpcmips/hpcmips/machdep.c\n--- arch/hpcmips/hpcmips/machdep.c.orig 2014-12-18 02:43:53.000000000 +0900\n+++ arch/hpcmips/hpcmips/machdep.c      2014-12-18 02:56:07.000000000 +0900\n@@ -590,6 +590,11 @@\n #endif\n        format_bytes(pbuf, sizeof(pbuf), ptoa(uvmexp.free));\n        printf(\"avail memory = %s\\n\", pbuf);\n+\n+       printf(\"Y^ki Y^na wa Ysha de Aru (Y^na Y^ki is a Hero) is \\n\");\n+       printf(\"a Japanese anime television series produced by \\n\");\n+       printf(\"Studio Gokumi and directed by Seiji Kishi as part of \\n\");\n+       printf(\"a media project called Takahiro IV Project. \\n\");\n }\n\n void\n\n\n\u30ab\u30fc\u30cd\u30eb\u306e\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\nNetBSD-hpcmips\u306a\u30ab\u30fc\u30cd\u30eb\u3092\u30d3\u30eb\u30c9\u3059\u308b\u969b\u3001\u4e00\u70b9\u78ba\u8a8d\u3057\u3066\u304a\u304f\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u306f\u5b9f\u6a5f\u306eCPU\u304cTX39XX\u306a\u306e\u304b\u3001VR41XX\u306e\u3069\u3061\u3089\u306a\u306e\u304b\u3001\u3068\u3044\u3046\u70b9\u3067\u3059\u3002\u79c1\u304c\u6301\u3063\u3066\u3044\u308b\u306e\u306f\u521d\u4ee3\u30b7\u30b0\u30de\u30ea\u30aa\u30f3\u3067\u3001Wikipedia\u306b\u3088\u308b\u3068\u3001CPU\u306fVR4121(MIPS)\u3067\u3059\u3002\nhpcmips\u306e\u30ab\u30fc\u30cd\u30eb\u30b3\u30f3\u30d5\u30a3\u30b0\u306b\u306f\u3001VR41XX\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u4f7f\u3044\u307e\u3059\u3002\n# cd /usr/src/sys/arch/hpcmips/conf/\n# ls\nCVS                 MPC303              VR41XX              std.hpcmips.tx39\nGENERIC             NULLCONF            files.hpcmips       std.hpcmips.vr41\nINSTALL_TX3912      RAMDISK             ioconf.incl.hpcmips std.lcard\nLCARD               TX3912              majors.hpcmips\nLROUTER             TX3922              std.hpcmips\n\n\u30ab\u30fc\u30cd\u30eb\u30b3\u30f3\u30d5\u30a3\u30b0\u3092\u597d\u304d\u306a\u540d\u524d\u3067\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u77e2\u6fa4\u306b\u3053...\u3067\u306f\u306a\u304f\u3001\u306b\u307c\u3063\u3057\u30fc\u306b\u3057\u3066\u307f\u307e\u3059(\u81ea\u5206\u3067\u5206\u304b\u308c\u3070\u3069\u3093\u306a\u540d\u524d\u3067\u3082OK\u3067\u3059)\u3002\n# cp VR41XX NIBOSSY\n\n\n\u30ab\u30fc\u30cd\u30eb\u3092\u30d3\u30eb\u30c9\u3059\u308b\n\u3053\u3053\u304b\u3089\u30ab\u30fc\u30cd\u30eb\u3092\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u307e\u3059\u3002\u3068\u3044\u3063\u3066\u3082\u3001\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u7528\u306e\u30b3\u30de\u30f3\u30c9(\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3)\u3092\u4f7f\u3046\u3068\u3044\u3046\u3060\u3051\u3067\u3001\u624b\u9806\u3068\u3057\u3066\u306fNetBSD\u30ab\u30fc\u30cd\u30eb\u3092\u30d3\u30eb\u30c9\u3057\u3066\u307f\u308b\u3067\u7d39\u4ecb\u3057\u305f\u624b\u9806\u3068\u540c\u3058\u3067\u3059\u3002\n\u3053\u3093\u306a\u611f\u3058\u3067\u3001\u540c\u3058\u624b\u9806\u3067\u4ed6\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u5411\u3051\u306eNetBSD\u30ab\u30fc\u30cd\u30eb\u304c\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u53ef\u80fd\u3068\u3044\u3046\u304a\u624b\u8efd\u3055\u304cNetBSD\u3092\u4f7f\u3046\u5229\u70b9\u306e\u4e00\u3064\u3067\u3059\u306d\uff01\n# /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbconfig NIBOSSY\nBuild directory is ../compile/NIBOSSY\nDon't forget to run \"make depend\"\n# cd ../compile/NIBOSSY/\n# /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbmake-hpcmips depend\n# /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbmake-hpcmips\n\n\u305d\u3046\u3053\u3046\u8a00\u3063\u3066\u3044\u308b\u3046\u3061\u306b\u3001\u30ab\u30fc\u30cd\u30eb\u306e\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u5b8c\u4e86\u3067\u3059\u3002\n# time /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbmake-hpcmips\n...\u4e2d\u7565...\nNetBSD 5.1.5 (NIBOSSY) #0: Thu Dec 18 03:08:47 JST 2014\n   text    data     bss     dec     hex filename\n3091252   59840  381400 3532492  35e6cc netbsd\n  123.10s real   107.22s user    13.90s system\n\nfile\u30b3\u30de\u30f3\u30c9\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u7a2e\u985e\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002amd64\u306a\u74b0\u5883\u3067hpcmips(MIPS)\u306aNetBSD\u30ab\u30fc\u30cd\u30eb\u304c\u751f\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n# uname -a \nNetBSD nbsd515_yuusyabu 5.1.5 NetBSD 5.1.5 (GENERIC) #0: Sat Nov 15 19:01:43 UTC 2014  snj@b45.netbsd.org:/home/builds/ab/netbsd-5-1-5-RELEASE/amd64/201411151803Z-obj/home/source/ab/netbsd-5-1-5-RELEASE/src/sys/arch/amd64/compile/GENERIC amd64\n# file ./netbsd\n./netbsd: ELF 32-bit LSB executable, MIPS, MIPS-II version 1 (SYSV), statically linked, for NetBSD 5.1.5, not stripped\n\n\u5ff5\u306e\u305f\u3081\u3001\u30db\u30f3\u30c8\u306bNIBOSSY\u30b3\u30f3\u30d5\u30a3\u30b0\u304c\u4f7f\u308f\u308c\u3066\u3044\u308b\u306e\u304b\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\u3061\u3083\u3093\u3068NIBOSSY\u306a\u30b3\u30f3\u30d5\u30a3\u30b0\u3067\u3059\u306d\u3002\n# strings ./netbsd | grep -i nibossy\n@(#)NetBSD 5.1.5 (NIBOSSY) #0: Thu Dec 18 03:08:47 JST 2014\n        root@nbsd515_yuusyabu:/usr/src/sys/arch/hpcmips/compile/NIBOSSY\nNetBSD 5.1.5 (NIBOSSY) #0: Thu Dec 18 03:08:47 JST 2014\n        root@nbsd515_yuusyabu:/usr/src/sys/arch/hpcmips/compile/NIBOSSY\nNIBOSSY\n\n\u30ab\u30fc\u30cd\u30eb\u30b5\u30a4\u30ba\u306f3.8M\u307b\u3069\u3002\n# ls -lha ./netbsd\n-rwxr-xr-x  1 root  wheel  3.8M Dec 18 03:08 ./netbsd\n\n\u3064\u3044\u3067\u306b\u30d0\u30a4\u30ca\u30ea\u306e\u4e2d\u8eab\u3082\u5c11\u3057\u898b\u3066\u307f\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n# /usr/cross/NetBSD-5.1.5/hpcmips/bin/mipsel--netbsd-objdump -CxS ./netbsd | grep -A 20 '<main>:'\n8015385c <main>:\n8015385c:       27bdffb8        addiu   sp,sp,-72\n80153860:       afbf0040        sw      ra,64(sp)\n80153864:       afb10034        sw      s1,52(sp)\n80153868:       afb3003c        sw      s3,60(sp)\n8015386c:       afb20038        sw      s2,56(sp)\n80153870:       afb00030        sw      s0,48(sp)\n80153874:       8ee3000c        lw      v1,12(s7)\n80153878:       3c028030        lui     v0,0x8030\n8015387c:       2451d0e0        addiu   s1,v0,-12064\n80153880:       ae23000c        sw      v1,12(s1)\n80153884:       0c0888b4        jal     802222d0 <consinit>\n80153888:       00000000        nop\n8015388c:       0c05a469        jal     801691a4 <kernel_lock_init>\n80153890:       00000000        nop\n80153894:       0c065923        jal     8019648c <once_init>\n80153898:       00000000        nop\n8015389c:       3c048034        lui     a0,0x8034\n801538a0:       00003021        move    a2,zero\n801538a4:       24845dc0        addiu   a0,a0,24000\n801538a8:       0c05b19f        jal     8016c67c <mutex_init>\n\n\u8208\u5473\u304c\u3042\u308b\u65b9\u306f\u3001\u4ee5\u4e0b\u306eURL\u3067MIPS\u306e\u547d\u4ee4\u304c\u89e3\u8aac\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u7167\u3089\u3057\u5408\u308f\u305b\u3066\u307f\u308b\u306e\u3082\u9762\u767d\u3044\u304b\u3068\u3002\n\nR3000\u547d\u4ee4\u89e3\u8aac\n\n\nhttp://www21.big.or.jp/~dram/kouza/r3000_ex.html\n\n\n\n\nNIBOSSY\u30b3\u30f3\u30d5\u30a3\u30b0\u306a\u30ab\u30fc\u30cd\u30eb\u3067\u8d77\u52d5\u3057\u3066\u307f\u308b\n\u3067\u306f\u65e9\u901f\u3001\u30d3\u30eb\u30c9\u3057\u305fNIBOSSY\u30b3\u30f3\u30d5\u30a3\u30b0\u306a\u30ab\u30fc\u30cd\u30eb\u3092\u5b9f\u6a5f\u3067\u8d77\u52d5\u3055\u305b\u3066\u307f\u307e\u3059\u3002\n\u307e\u305a\u3001WindowsCE\u4e0a\u3067hpcboot.exe\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n\"DoCoMo Sigmarion\"\u306a\u8a2d\u5b9a\u304c\u65e2\u306b\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u6307\u5b9a\u3057\u3001\u8d77\u52d5\u3059\u308b\u30ab\u30fc\u30cd\u30eb\u3068\u3057\u3066\u3001\u5148\u307b\u3069\u30d3\u30eb\u30c9\u3057\u305fNetBSD\u30ab\u30fc\u30cd\u30eb(\u4e88\u3081FAT\u9818\u57df\u306b\u30b3\u30d4\u30fc\u3057\u3066\u304a\u304f)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\"Boot\"\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u3001\u8af8\u3005\u306e\u8a2d\u5b9a\u3068NetBSD\u30ab\u30fc\u30cd\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u304c\u884c\u308f\u308c...\n\nNetBSD-hpcmips\u304c\u8d77\u52d5\u3057\u59cb\u3081\u307e\u3059\u3002\u3088\u304f\u898b\u308b\u3068\u3001\u5148\u307b\u3069\u8ffd\u52a0\u3057\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\uff01\n\n\u7121\u4e8b\u306b\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305fNetBSD-hpcmips\u306a\u30ab\u30fc\u30cd\u30eb\u3067\u8d77\u52d5\u3067\u304d\u307e\u3057\u305f\u3002\n\n\n\u307e\u3068\u3081\n\u6628\u65e5\u306b\u5f15\u304d\u7d9a\u304d\u3001NetBSD-hpcmips\u306a\u30cd\u30bf\u3067\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u30d0\u30a4\u30ca\u30ea\u304c\u5b9f\u6a5f\u3067\u52d5\u4f5c\u3059\u308b\u3068\u3001\u300c\u3088\u3063\u3057\u3083\u30fc\u3001\u52d5\u3044\u305f\u30fc\uff01\u300d\u611f\u304c\u3042\u308a\u307e\u3059\u306d\u3002\n\u660e\u65e5\u304b\u3089\u306f@tisihara\u3055\u3093\u306eAdvent Calendar\u306b\u306a\u308a\u307e\u3059\u3002\u304a\u697d\u3057\u307f\u306b\uff01\n# \u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u74b0\u5883\u3067NetBSD-hpcmips\u306a\u30ab\u30fc\u30cd\u30eb\u3092\u30d3\u30eb\u30c9\u3057\u3066\u307f\u308b\n\n![img002.JPG](https://qiita-image-store.s3.amazonaws.com/0/61137/af011efe-eeb5-31af-aad3-c6501979e72d.jpeg)\n\n## NetBSD\u306e\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u74b0\u5883\n\nNetBSD\u306fMIPS\u3084PowerPC,SH\u3084VAX,SPARC\u3068\u3044\u3063\u305f\u3001Intel\u7cfb\u4ee5\u5916\u306eCPU\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3067\u3082\u52d5\u4f5c\u3057\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306b\u306f\u3001\u81ea\u8eab\u3067\u30ab\u30fc\u30cd\u30eb\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3068\u304b\u306a\u308a\u6642\u9593\u304c\u304b\u304b\u3063\u305f\u308a\u3059\u308b\u3082\u306e\u3082\u3042\u308a\u307e\u3059\u3002NetBSD\u3067\u306f\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u306b\u5bfe\u5fdc\u3057\u305f\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u304c\u7528\u610f\u3055\u308c\u3066\u304a\u308a\u3001\u4ed6\u306eCPU\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u5411\u3051\u306b\u30ab\u30fc\u30cd\u30eb\u3092\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u3053\u3068\u304c\u5bb9\u6613\u306b\u884c\u3048\u307e\u3059\u3002\n\n\u4eca\u65e5\u306eNetBSD Advent Calendar\u3067\u306f\u3001\u3053\u306e\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u306e\u69cb\u7bc9\u3068\u3001\u3053\u308c\u3092\u5229\u7528\u3057\u3066\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305fNetBSD-hpcmips\u306a\u30ab\u30fc\u30cd\u30eb\u3092\u5b9f\u6a5f(\u521d\u4ee3\u30b7\u30b0\u30de\u30ea\u30aa\u30f3)\u3067\u52d5\u304b\u3057\u3066\u307f\u308b\u8a18\u4e8b\u3092\u66f8\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n## \u524d\u6e96\u5099\n\n### \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u5c55\u958b\n\n\u307e\u305a\u306fNetBSD\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u5c55\u958b\u3057\u307e\u3059\u3002[\u524d\u56de\u306e\u30ab\u30fc\u30cd\u30eb\u30b3\u30f3\u30d1\u30a4\u30eb\u306e\u8a18\u4e8b](http://qiita.com/furandon_pig/items/d9b2782372edc1b93263 \"NetBSD\u30ab\u30fc\u30cd\u30eb\u3092\u30d3\u30eb\u30c9\u3057\u3066\u307f\u308b\")\u3068\u540c\u3058\u304f\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u4e0a\u3067\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u30bd\u30fc\u30b9CD-ROM(NetBSD-5.1.5-source.iso)\u3092\u30bb\u30c3\u30c8\u3057\u3066\u3001NetBSD\u5074\u304b\u3089\u4ee5\u4e0b\u306e\u624b\u9806\u3067mount\u3057\u307e\u3059\u3002/cdrom\u3068\u3044\u3046\u30de\u30a6\u30f3\u30c8\u30dd\u30a4\u30f3\u30c8\u304c\u5b58\u5728\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u3053\u306bmount\u3059\u308b\u3068\u3088\u3055\u305d\u3046\u3067\u3059\u3002\n\n```sh\nnibossy ~ $ sudo mount -t cd9660 /dev/cd0a /cdrom\nnibossy ~ $ mount | grep cdrom\n/dev/cd0a on /cdrom type cd9660 (read-only, local)\n```\n\nNetBSD\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4e00\u5f0f\u3092\u5c55\u958b\u3057\u307e\u3059\u3002\u5c55\u958b\u5148\u306e\u30c8\u30c3\u30d7\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\"-C /\"\u3068\u3057\u3066\u3044\u308b\u70b9\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```sh\nnibossy ~ $ sudo -i\nnbsd515_yuusyabu# cd /cdrom/source/sets/\nnbsd515_yuusyabu# ls\nMD5          gnusrc.tgz   src.tgz      xsrc.tgz\nSHA512       sharesrc.tgz syssrc.tgz\n# for i in *.tgz; do tar zxvf $i -C / ; done\n```\n\n## \u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u306e\u69cb\u7bc9\n\n\u6b21\u306b\u3001NetBSD-hpcmips\u3092\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u3068\u3044\u3063\u3066\u3082\u3001\u5c55\u958b\u3057\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306b\u542b\u307e\u308c\u308bbuild.sh\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u5168\u90e8\u3084\u3063\u3066\u304f\u308c\u308b\u306e\u3067\u3001\u305d\u3093\u306a\u306b\u96e3\u3057\u304f\u3042\u308a\u307e\u305b\u3093\u3002\n\n/usr/src/BUILDING\u3092\u898b\u308b\u3068\u3001build.sh\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\n# cat BUILDING\nBUILDING(8)             NetBSD System Manager's Manual             BUILDING(8)\n\nNAME\n     BUILDING -- Procedure for building NetBSD from source code\n...\u4e2d\u7565...\n     build.sh       Bourne-compatible shell script used for building the host\n                    build tools and the NetBSD system from scratch.  Can be\n                    used for both native and cross builds, and should be used\n                    instead of make(1) for any source tree that is updated and\n                    recompiled regularly.\n```\n\n\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u306e\u683c\u7d0d\u5148\u3068\u3057\u3066/usr/cross/NetBSD-5.1.5/hpcmips\u3092\u6307\u5b9a\u3057\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\nnibossy ~ $ sudo -i\n# cd /usr/src/\n# mkdir /usr/cross\n# uname -r\n5.1.5\n# ./build.sh -m hpcmips -a mipsel -T /usr/cross/NetBSD-5.1.5/hpcmips -r -o -U tools\n```\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n```sh\n# time ./build.sh -m hpcmips -a mipsel -T /usr/cross/NetBSD-5.1.5/hpcmips -r -o -U tools\n===> build.sh started: Thu Dec 18 02:09:55 JST 2014\n===> NetBSD version:   5.1.5\n===> MACHINE:          hpcmips\n===> MACHINE_ARCH:     mipsel\n===> Build platform:   NetBSD 5.1.5 amd64\n===> HOST_SH:          /bin/sh\n===> No /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbmake, needs building.\n===> Bootstrapping nbmake\n...\u4e2d\u7565...\n===> build.sh ended:   Thu Dec 18 02:16:29 JST 2014\n===> Summary of results:\n         build.sh command: ./build.sh -m hpcmips -a mipsel -T /usr/cross/NetBSD-5.1.5/hpcmips -r -o -U tools\n         build.sh started: Thu Dec 18 02:09:55 JST 2014\n         NetBSD version:   5.1.5\n         MACHINE:          hpcmips\n         MACHINE_ARCH:     mipsel\n         Build platform:   NetBSD 5.1.5 amd64\n         HOST_SH:          /bin/sh\n         No /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbmake, needs building.\n         Bootstrapping nbmake\n         TOOLDIR path:     /usr/cross/NetBSD-5.1.5/hpcmips\n         DESTDIR path:     /usr/src/destdir.hpcmips\n         RELEASEDIR path:  /usr/src/releasedir\n         Removing /usr/cross/NetBSD-5.1.5/hpcmips\n         Removing /usr/src/destdir.hpcmips\n         Created /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbmake\n         makewrapper:      /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbmake-hpcmips\n         Updated /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbmake-hpcmips\n         Tools built to /usr/cross/NetBSD-5.1.5/hpcmips\n         build.sh ended:   Thu Dec 18 02:16:29 JST 2014\n===> .\n  394.82s real   283.10s user    62.80s system\n```\n\n\u3053\u3053\u307e\u3067\u3067\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u7528\u306e\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3\u306e\u6e96\u5099\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n## hpcmips\u5411\u3051\u306e\u30ab\u30fc\u30cd\u30eb\u3092\u30af\u30ed\u30b9\u30d3\u30eb\u30c9\u3057\u3066\u307f\u308b\n\n### \u30ab\u30fc\u30cd\u30eb\u306e\u30d3\u30eb\u30c9\n\n\u5358\u306b\u30ab\u30fc\u30cd\u30eb\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3060\u3051\u3067\u306f\u9762\u767d\u307f\u306b\u6b20\u3051\u308b\u306e\u3067\u3001[NetBSD\u30ab\u30fc\u30cd\u30eb\u3092\u30d3\u30eb\u30c9\u3057\u3066\u307f\u308b](http://qiita.com/furandon_pig/items/d9b2782372edc1b93263 \"NetBSD\u30ab\u30fc\u30cd\u30eb\u3092\u30d3\u30eb\u30c9\u3057\u3066\u307f\u308b\")\u306e\u8a18\u4e8b\u306b\u306a\u3089\u3044\u3001\u30ab\u30fc\u30cd\u30eb\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u5c11\u3057\u4fee\u6b63\u3057\u3066\u307f\u307e\u3059\u3002\u3053\u306e\u8a18\u4e8b\u3067\u306fNetBSD-6.1.5\u3092\u5bfe\u8c61\u306b\u3057\u305f\u624b\u9806\u3067\u3057\u305f\u304c\u3001\u4eca\u56de\u306f\u90fd\u5408\u4e0a\u3001NetBSD-5.1.5\u3092\u5bfe\u8c61\u306b\u3057\u307e\u3059\u3002\n\n\u3053\u306eNetBSD-5.1.5\u3067\u3082\u8d77\u52d5\u6642\u306b\u597d\u304d\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3059\u3002\u305f\u3060\u3001NetBSD-6.1.5\u3067\u306f\u8d77\u52d5\u6642\u306b\u547c\u3070\u308c\u3066\u3044\u305fbanner()\u95a2\u6570\u304c\u5b58\u5728\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\n\u305d\u3053\u3067\u3001\"total memory\"\u3068\u3044\u3046\u6587\u5b57\u5217\u3092\u5143\u306b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092grep\u3057\u3066\u307f\u307e\u3059\u3002sys/arch/hpcmips/hpcmips/machdep.c\u3092\u4fee\u6b63\u3059\u308c\u3070\u3088\u3055\u305d\u3046\u3067\u3059\u3002\n\n```sh\nnibossy ~ $ cd /usr/src/sys\nnibossy sys $ find . -type f | grep \\\\.c$ | xargs grep 'total memory' | grep hpcmips\n./arch/hpcmips/hpcmips/machdep.c:       printf(\"total memory = %s\\n\", pbuf);\n./arch/hpcmips/hpcmips/machdep.c:               printf(\"total memory banks = %d\\n\", mem_cluster_cnt);\n```\n\nsys/arch/hpcmips/hpcmips/machdep.c\u3092\u898b\u308b\u3068\u3001cpu_startup()\u3068\u3044\u3046\u95a2\u6570\u306e\u4e2d\u3067\"total memory\"\u3092\u51fa\u529b\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u306b\u81ea\u5206\u306e\u597d\u304d\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\u3059\u308b\u51e6\u7406\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```c\nsys/arch/hpcmips/hpcmips/machdep.c:\n    538 /*\n    539  * Machine-dependent startup code.\n    540  * allocate memory for variable-sized tables, initialize CPU.\n    541  */\n    542 void\n    543 cpu_startup()\n    544 {\n    ...\n    558         printf(\"%s%s\", copyright, version);\n    559         sprintf(cpu_model, \"%s (%s)\", platid_name(&platid), cpu_name);\n    560         printf(\"%s\\n\", cpu_model);\n    561         format_bytes(pbuf, sizeof(pbuf), ctob(physmem));\n    562         printf(\"total memory = %s\\n\", pbuf);\n    563         if (bootverbose) {\n    564                 /* show again when verbose mode */\n    565                 printf(\"total memory banks = %d\\n\", mem_cluster_cnt);\n    ...\n    592         printf(\"avail memory = %s\\n\", pbuf);\n    593 }\n```\n\n\u4eca\u56de\u306f\u300c[\u7d50\u57ce\u53cb\u5948\u306f\u52c7\u8005\u3067\u3042\u308b](http://yuyuyu.tv \"\u7d50\u57ce\u53cb\u5948\u306f\u52c7\u8005\u3067\u3042\u308b\")\u300d\u306e[Wikipedia\u306e\u8a18\u4e8b](http://en.wikipedia.org/wiki/Y\u016bki_Y\u016bna_wa_Y\u016bsha_de_Aru \"Y\u016bki Y\u016bna wa Y\u016bsha de Aru\")\u306e\u4e00\u90e8\u3092\u8868\u793a\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u4fee\u6b63\u5185\u5bb9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n\n```sh\n# diff -u arch/hpcmips/hpcmips/machdep.c.orig arch/hpcmips/hpcmips/machdep.c\n--- arch/hpcmips/hpcmips/machdep.c.orig 2014-12-18 02:43:53.000000000 +0900\n+++ arch/hpcmips/hpcmips/machdep.c      2014-12-18 02:56:07.000000000 +0900\n@@ -590,6 +590,11 @@\n #endif\n        format_bytes(pbuf, sizeof(pbuf), ptoa(uvmexp.free));\n        printf(\"avail memory = %s\\n\", pbuf);\n+\n+       printf(\"Y^ki Y^na wa Ysha de Aru (Y^na Y^ki is a Hero) is \\n\");\n+       printf(\"a Japanese anime television series produced by \\n\");\n+       printf(\"Studio Gokumi and directed by Seiji Kishi as part of \\n\");\n+       printf(\"a media project called Takahiro IV Project. \\n\");\n }\n\n void\n```\n\n### \u30ab\u30fc\u30cd\u30eb\u306e\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\n\nNetBSD-hpcmips\u306a\u30ab\u30fc\u30cd\u30eb\u3092\u30d3\u30eb\u30c9\u3059\u308b\u969b\u3001\u4e00\u70b9\u78ba\u8a8d\u3057\u3066\u304a\u304f\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u306f\u5b9f\u6a5f\u306eCPU\u304cTX39XX\u306a\u306e\u304b\u3001VR41XX\u306e\u3069\u3061\u3089\u306a\u306e\u304b\u3001\u3068\u3044\u3046\u70b9\u3067\u3059\u3002\u79c1\u304c\u6301\u3063\u3066\u3044\u308b\u306e\u306f\u521d\u4ee3\u30b7\u30b0\u30de\u30ea\u30aa\u30f3\u3067\u3001[Wikipedia](http://ja.wikipedia.org/wiki/\u30e2\u30d0\u30a4\u30eb\u30ae\u30a2 \"\u30e2\u30d0\u30a4\u30eb\u30ae\u30a2\")\u306b\u3088\u308b\u3068\u3001CPU\u306fVR4121(MIPS)\u3067\u3059\u3002\n\nhpcmips\u306e\u30ab\u30fc\u30cd\u30eb\u30b3\u30f3\u30d5\u30a3\u30b0\u306b\u306f\u3001VR41XX\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n```sh\n# cd /usr/src/sys/arch/hpcmips/conf/\n# ls\nCVS                 MPC303              VR41XX              std.hpcmips.tx39\nGENERIC             NULLCONF            files.hpcmips       std.hpcmips.vr41\nINSTALL_TX3912      RAMDISK             ioconf.incl.hpcmips std.lcard\nLCARD               TX3912              majors.hpcmips\nLROUTER             TX3922              std.hpcmips\n```\n\n\u30ab\u30fc\u30cd\u30eb\u30b3\u30f3\u30d5\u30a3\u30b0\u3092\u597d\u304d\u306a\u540d\u524d\u3067\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u77e2\u6fa4\u306b\u3053...\u3067\u306f\u306a\u304f\u3001[\u306b\u307c\u3063\u3057\u30fc](http://dic.nicovideo.jp/a/\u4e09\u597d\u590f\u51dc \"\u4e09\u597d\u590f\u51dc\")\u306b\u3057\u3066\u307f\u307e\u3059(\u81ea\u5206\u3067\u5206\u304b\u308c\u3070\u3069\u3093\u306a\u540d\u524d\u3067\u3082OK\u3067\u3059)\u3002\n\n```sh\n# cp VR41XX NIBOSSY\n```\n\n### \u30ab\u30fc\u30cd\u30eb\u3092\u30d3\u30eb\u30c9\u3059\u308b\n\n\u3053\u3053\u304b\u3089\u30ab\u30fc\u30cd\u30eb\u3092\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u307e\u3059\u3002\u3068\u3044\u3063\u3066\u3082\u3001\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u7528\u306e\u30b3\u30de\u30f3\u30c9(\u30c4\u30fc\u30eb\u30c1\u30a7\u30a4\u30f3)\u3092\u4f7f\u3046\u3068\u3044\u3046\u3060\u3051\u3067\u3001\u624b\u9806\u3068\u3057\u3066\u306f[NetBSD\u30ab\u30fc\u30cd\u30eb\u3092\u30d3\u30eb\u30c9\u3057\u3066\u307f\u308b](http://qiita.com/furandon_pig/items/d9b2782372edc1b93263 \"NetBSD\u30ab\u30fc\u30cd\u30eb\u3092\u30d3\u30eb\u30c9\u3057\u3066\u307f\u308b\")\u3067\u7d39\u4ecb\u3057\u305f\u624b\u9806\u3068\u540c\u3058\u3067\u3059\u3002\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u3001\u540c\u3058\u624b\u9806\u3067\u4ed6\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u5411\u3051\u306eNetBSD\u30ab\u30fc\u30cd\u30eb\u304c\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u53ef\u80fd\u3068\u3044\u3046\u304a\u624b\u8efd\u3055\u304cNetBSD\u3092\u4f7f\u3046\u5229\u70b9\u306e\u4e00\u3064\u3067\u3059\u306d\uff01\n\n```sh\n# /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbconfig NIBOSSY\nBuild directory is ../compile/NIBOSSY\nDon't forget to run \"make depend\"\n# cd ../compile/NIBOSSY/\n# /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbmake-hpcmips depend\n# /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbmake-hpcmips\n```\n\n\u305d\u3046\u3053\u3046\u8a00\u3063\u3066\u3044\u308b\u3046\u3061\u306b\u3001\u30ab\u30fc\u30cd\u30eb\u306e\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u5b8c\u4e86\u3067\u3059\u3002\n\n```sh\n# time /usr/cross/NetBSD-5.1.5/hpcmips/bin/nbmake-hpcmips\n...\u4e2d\u7565...\nNetBSD 5.1.5 (NIBOSSY) #0: Thu Dec 18 03:08:47 JST 2014\n   text    data     bss     dec     hex filename\n3091252   59840  381400 3532492  35e6cc netbsd\n  123.10s real   107.22s user    13.90s system\n```\n\nfile\u30b3\u30de\u30f3\u30c9\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u7a2e\u985e\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002amd64\u306a\u74b0\u5883\u3067hpcmips(MIPS)\u306aNetBSD\u30ab\u30fc\u30cd\u30eb\u304c\u751f\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```sh\n# uname -a \nNetBSD nbsd515_yuusyabu 5.1.5 NetBSD 5.1.5 (GENERIC) #0: Sat Nov 15 19:01:43 UTC 2014  snj@b45.netbsd.org:/home/builds/ab/netbsd-5-1-5-RELEASE/amd64/201411151803Z-obj/home/source/ab/netbsd-5-1-5-RELEASE/src/sys/arch/amd64/compile/GENERIC amd64\n# file ./netbsd\n./netbsd: ELF 32-bit LSB executable, MIPS, MIPS-II version 1 (SYSV), statically linked, for NetBSD 5.1.5, not stripped\n```\n\n\u5ff5\u306e\u305f\u3081\u3001\u30db\u30f3\u30c8\u306bNIBOSSY\u30b3\u30f3\u30d5\u30a3\u30b0\u304c\u4f7f\u308f\u308c\u3066\u3044\u308b\u306e\u304b\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\u3061\u3083\u3093\u3068NIBOSSY\u306a\u30b3\u30f3\u30d5\u30a3\u30b0\u3067\u3059\u306d\u3002\n\n```sh\n# strings ./netbsd | grep -i nibossy\n@(#)NetBSD 5.1.5 (NIBOSSY) #0: Thu Dec 18 03:08:47 JST 2014\n        root@nbsd515_yuusyabu:/usr/src/sys/arch/hpcmips/compile/NIBOSSY\nNetBSD 5.1.5 (NIBOSSY) #0: Thu Dec 18 03:08:47 JST 2014\n        root@nbsd515_yuusyabu:/usr/src/sys/arch/hpcmips/compile/NIBOSSY\nNIBOSSY\n```\n\n\u30ab\u30fc\u30cd\u30eb\u30b5\u30a4\u30ba\u306f3.8M\u307b\u3069\u3002\n\n```sh\n# ls -lha ./netbsd\n-rwxr-xr-x  1 root  wheel  3.8M Dec 18 03:08 ./netbsd\n```\n\n\u3064\u3044\u3067\u306b\u30d0\u30a4\u30ca\u30ea\u306e\u4e2d\u8eab\u3082\u5c11\u3057\u898b\u3066\u307f\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n\n```sh\n# /usr/cross/NetBSD-5.1.5/hpcmips/bin/mipsel--netbsd-objdump -CxS ./netbsd | grep -A 20 '<main>:'\n8015385c <main>:\n8015385c:       27bdffb8        addiu   sp,sp,-72\n80153860:       afbf0040        sw      ra,64(sp)\n80153864:       afb10034        sw      s1,52(sp)\n80153868:       afb3003c        sw      s3,60(sp)\n8015386c:       afb20038        sw      s2,56(sp)\n80153870:       afb00030        sw      s0,48(sp)\n80153874:       8ee3000c        lw      v1,12(s7)\n80153878:       3c028030        lui     v0,0x8030\n8015387c:       2451d0e0        addiu   s1,v0,-12064\n80153880:       ae23000c        sw      v1,12(s1)\n80153884:       0c0888b4        jal     802222d0 <consinit>\n80153888:       00000000        nop\n8015388c:       0c05a469        jal     801691a4 <kernel_lock_init>\n80153890:       00000000        nop\n80153894:       0c065923        jal     8019648c <once_init>\n80153898:       00000000        nop\n8015389c:       3c048034        lui     a0,0x8034\n801538a0:       00003021        move    a2,zero\n801538a4:       24845dc0        addiu   a0,a0,24000\n801538a8:       0c05b19f        jal     8016c67c <mutex_init>\n```\n\n\u8208\u5473\u304c\u3042\u308b\u65b9\u306f\u3001\u4ee5\u4e0b\u306eURL\u3067MIPS\u306e\u547d\u4ee4\u304c\u89e3\u8aac\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u7167\u3089\u3057\u5408\u308f\u305b\u3066\u307f\u308b\u306e\u3082\u9762\u767d\u3044\u304b\u3068\u3002\n\n * R3000\u547d\u4ee4\u89e3\u8aac\n   * http://www21.big.or.jp/~dram/kouza/r3000_ex.html\n\n## NIBOSSY\u30b3\u30f3\u30d5\u30a3\u30b0\u306a\u30ab\u30fc\u30cd\u30eb\u3067\u8d77\u52d5\u3057\u3066\u307f\u308b\n\n\u3067\u306f\u65e9\u901f\u3001\u30d3\u30eb\u30c9\u3057\u305fNIBOSSY\u30b3\u30f3\u30d5\u30a3\u30b0\u306a\u30ab\u30fc\u30cd\u30eb\u3092\u5b9f\u6a5f\u3067\u8d77\u52d5\u3055\u305b\u3066\u307f\u307e\u3059\u3002\n\n\u307e\u305a\u3001WindowsCE\u4e0a\u3067hpcboot.exe\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n![20000101125634.png](https://qiita-image-store.s3.amazonaws.com/0/61137/63d58595-4f61-876f-daac-f067b290f257.png)\n\n\"DoCoMo Sigmarion\"\u306a\u8a2d\u5b9a\u304c\u65e2\u306b\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u6307\u5b9a\u3057\u3001\u8d77\u52d5\u3059\u308b\u30ab\u30fc\u30cd\u30eb\u3068\u3057\u3066\u3001\u5148\u307b\u3069\u30d3\u30eb\u30c9\u3057\u305fNetBSD\u30ab\u30fc\u30cd\u30eb(\u4e88\u3081FAT\u9818\u57df\u306b\u30b3\u30d4\u30fc\u3057\u3066\u304a\u304f)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n![20000101125706.png](https://qiita-image-store.s3.amazonaws.com/0/61137/4690efd6-c693-345c-a96b-4326f8de8705.png)\n\n\"Boot\"\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u3001\u8af8\u3005\u306e\u8a2d\u5b9a\u3068NetBSD\u30ab\u30fc\u30cd\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u304c\u884c\u308f\u308c...\n\n![20000101131101.png](https://qiita-image-store.s3.amazonaws.com/0/61137/6def7e09-a883-d067-8497-e41197e2893d.png)\n\nNetBSD-hpcmips\u304c\u8d77\u52d5\u3057\u59cb\u3081\u307e\u3059\u3002\u3088\u304f\u898b\u308b\u3068\u3001\u5148\u307b\u3069\u8ffd\u52a0\u3057\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\uff01\n\n![img002.JPG](https://qiita-image-store.s3.amazonaws.com/0/61137/ed73207c-7da3-761d-a7be-760be0596a1b.jpeg)\n\n\u7121\u4e8b\u306b\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305fNetBSD-hpcmips\u306a\u30ab\u30fc\u30cd\u30eb\u3067\u8d77\u52d5\u3067\u304d\u307e\u3057\u305f\u3002\n\n![img001.JPG](https://qiita-image-store.s3.amazonaws.com/0/61137/710c6576-0570-7a3f-79c8-aa0dbdf1657e.jpeg)\n\n## \u307e\u3068\u3081\n\n\u6628\u65e5\u306b\u5f15\u304d\u7d9a\u304d\u3001NetBSD-hpcmips\u306a\u30cd\u30bf\u3067\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\u30af\u30ed\u30b9\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u30d0\u30a4\u30ca\u30ea\u304c\u5b9f\u6a5f\u3067\u52d5\u4f5c\u3059\u308b\u3068\u3001\u300c\u3088\u3063\u3057\u3083\u30fc\u3001\u52d5\u3044\u305f\u30fc\uff01\u300d\u611f\u304c\u3042\u308a\u307e\u3059\u306d\u3002\n\n\u660e\u65e5\u304b\u3089\u306f[@tisihara](https://twitter.com/tisihara \"@tisihara\")\u3055\u3093\u306eAdvent Calendar\u306b\u306a\u308a\u307e\u3059\u3002\u304a\u697d\u3057\u307f\u306b\uff01\n"}