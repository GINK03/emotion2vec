{"context": " More than 1 year has passed since last update.\u3053\u306e\u8a18\u4e8b\u306f Sencha Advent Calendar 2013 18\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\u4eca\u56deExt Direct\u3092\u4f7f\u7528\u3057\u3066\u307f\u308b\u306b\u3042\u305f\u3063\u3066\u66f8\u304d\u7559\u3081\u305f\u3082\u306e\u3067\u3059\u3002\n\u4f55\u304b\u8aa4\u308a\u304c\u3042\u308c\u3070\u3054\u6559\u793a\u304f\u3060\u3055\u3044\uff01\n\nExt Direct\u3068\u306f\nExtJS\u304b\u3089\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u4fbf\u5229\u306a\u4ed5\u7d44\u307f\uff01\n\n\u76ee\u6a19\nGrid\u306bExt Direct\u3092\u5229\u7528\u3057\u3066\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u53d6\u5f97\u3057\u305f\u30ec\u30b3\u30fc\u30c9\u3092\u8868\u793a\u3055\u305b\u308b\u3002\n\nExt\u5074\n\nview\nExt.define('MyApp.view.List', {\n    extend: 'Ext.grid.Panel',\n    alias: 'widget.myapp-list',\n    width: 300,\n    height: 500,\n    store: 'List',\n    columns: [{\n        dataIndex: 'id',\n        width: 100,\n        text: '\u793e\u54e1\u756a\u53f7'\n    }, {\n        dataIndex: 'name',\n        flex: 2,\n        text: '\u540d\u524d'\n    }, {\n        dataIndex: 'sex',\n        flex: 1.3,\n        text: '\u6027\u5225'\n    }, {\n        dataIndex: 'age',\n        flex: 1,\n        text: '\u5e74\u9f62'\n    }]\n});\n\n\nstore\nproxy\u30b3\u30f3\u30d5\u30a3\u30b0\u306etype\u306b\u306fdirect\u3092\u6307\u5b9a\u3001directFn\u306b\u547c\u3073\u51fa\u3057\u305f\u3044\u30e1\u30bd\u30c3\u30c9\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\nExt.define('MyApp.store.List', {\n    extend: 'Ext.data.Store',\n    model: 'MyApp.model.List',\n    autoLoad: true,\n    proxy: {\n        type: 'direct',\n        directFn: 'MyAppList.getList',\n        reader: {\n            type: 'json',\n            root: 'items'\n        }\n    }\n});\n\n\nmodel\nExt.define('MyApp.model.List', {\n    extend: 'Ext.data.Model',\n    fields: [\n        'id',\n        'name',\n        'sex',\n        'age'\n    ]\n});\n\n\n\nPHP\u5074\napp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u540c\u3058\u968e\u5c64\u306bphp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nphp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u69cb\u6210\u306b\u306a\u308a\u307e\u3059\u3002\n\n\nclasses/MyAppList.php\n\u3053\u306e\u4e2d\u306bExt Direct\u304b\u3089\u547c\u3073\u51fa\u3059\u30e1\u30bd\u30c3\u30c9\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u5358\u7d14\u306bDB\u304b\u3089\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u306e\u307f\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002\n<?php\nclass MyAppList\n{\n    public function getList() {\n\n        $_result = array();\n        $result = array();\n        $rows = array();\n\n        $conn = mysql_connect('host', 'user', 'passowd');\n        if (!$conn) {\n            return false;\n        }\n        mysql_select_db('hoge', $conn);\n\n        $sql = 'SELECT * FROM staffs';\n\n        $_result = mysql_query($sql, $conn);\n        while ($row = mysql_fetch_array($_result)) {\n            array_push($rows, array(\n                'id' => $row['id'],\n                'name' => $row['name'],\n                'role' => $row['role'],\n                'sex' => $row['sex'],\n                'age' => $row['age']\n            ));\n        }\n\n        $result['items'] = $rows;\n\n        mysql_close($conn);\n\n        return $result;\n    }\n}\n\n\nconfig.php\nconfig.php\u306b\u306fExt Direct\u3067\u547c\u3073\u51fa\u3059\u30af\u30e9\u30b9\u540d\u3068\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u5148\u307b\u3069\u306eMyAppList\u30af\u30e9\u30b9\u306egetList\u30e1\u30bd\u30c3\u30c9\u306e\u307f\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n<?php\n$API = array(\n    'MyAppList' => array(\n        'methods' => array(\n            'getList' => array(\n                'len' => 0\n            )\n        )\n    )\n);\n\n\nindex.html\n\u4ee5\u4e0b\u3092\u8ffd\u8a18\u3057\u307e\u3059\u3002\n    <script src=\"php/api.php\"></script>\n\n\n\u5b8c\u6210\n\u30b0\u30ea\u30c3\u30c9\u306bDB\u304b\u3089\u53d6\u5f97\u3057\u305f\u30ec\u30b3\u30fc\u30c9\u304c\u8868\u793a\u3055\u308c\u307e\u3057\u305f\uff01\u3084\u3063\u305f\u306d\uff01\n\n\n\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u306e\u5b9f\u884c\nExt Direct\u3067\u547c\u3073\u51fa\u3059\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u88c5\u3059\u308b\u969b\u306f\u3001Web Inspector\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u76f4\u63a5\u547c\u3073\u51fa\u3057\u3066\u3084\u308b\u3068\u30c7\u30d0\u30c3\u30b0\u6bd4\u8f03\u7684\u697d\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\u3042\u3068\u304c\u304d\n\u307e\u3060api.php\u3068router.php\u306e\u30bd\u30fc\u30b9\u3092\u8ffd\u3048\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u4eca\u5f8c\u306f\u305d\u3053\u306e\u52d5\u304d\u3082\u5408\u308f\u305b\u3066\u5b66\u3093\u3067\u3044\u304d\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u8a18\u4e8b\u306f [Sencha Advent Calendar 2013](http://www.adventar.org/calendars/1370) 18\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n \n\u4eca\u56deExt Direct\u3092\u4f7f\u7528\u3057\u3066\u307f\u308b\u306b\u3042\u305f\u3063\u3066\u66f8\u304d\u7559\u3081\u305f\u3082\u306e\u3067\u3059\u3002\n\u4f55\u304b\u8aa4\u308a\u304c\u3042\u308c\u3070\u3054\u6559\u793a\u304f\u3060\u3055\u3044\uff01\n \n## Ext Direct\u3068\u306f\n \nExtJS\u304b\u3089\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u4fbf\u5229\u306a\u4ed5\u7d44\u307f\uff01\n \n## \u76ee\u6a19\n \nGrid\u306bExt Direct\u3092\u5229\u7528\u3057\u3066\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u53d6\u5f97\u3057\u305f\u30ec\u30b3\u30fc\u30c9\u3092\u8868\u793a\u3055\u305b\u308b\u3002\n \n## Ext\u5074\n \n### view\n\n<pre>\nExt.define('MyApp.view.List', {\n    extend: 'Ext.grid.Panel',\n    alias: 'widget.myapp-list',\n    width: 300,\n    height: 500,\n    store: 'List',\n    columns: [{\n        dataIndex: 'id',\n        width: 100,\n        text: '\u793e\u54e1\u756a\u53f7'\n    }, {\n        dataIndex: 'name',\n        flex: 2,\n        text: '\u540d\u524d'\n    }, {\n        dataIndex: 'sex',\n        flex: 1.3,\n        text: '\u6027\u5225'\n    }, {\n        dataIndex: 'age',\n        flex: 1,\n        text: '\u5e74\u9f62'\n    }]\n});\n</pre>\n\n### store\n\nproxy\u30b3\u30f3\u30d5\u30a3\u30b0\u306etype\u306b\u306fdirect\u3092\u6307\u5b9a\u3001directFn\u306b\u547c\u3073\u51fa\u3057\u305f\u3044\u30e1\u30bd\u30c3\u30c9\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n<pre>\nExt.define('MyApp.store.List', {\n    extend: 'Ext.data.Store',\n    model: 'MyApp.model.List',\n    autoLoad: true,\n    proxy: {\n        type: 'direct',\n        directFn: 'MyAppList.getList',\n        reader: {\n            type: 'json',\n            root: 'items'\n        }\n    }\n});\n</pre>\n\n### model\n\n<pre>\nExt.define('MyApp.model.List', {\n    extend: 'Ext.data.Model',\n    fields: [\n        'id',\n        'name',\n        'sex',\n        'age'\n    ]\n});\n\n</pre>\n\n## PHP\u5074\n \napp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u540c\u3058\u968e\u5c64\u306bphp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nphp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u69cb\u6210\u306b\u306a\u308a\u307e\u3059\u3002\n\n![kaisou.png](https://qiita-image-store.s3.amazonaws.com/0/20136/0c2ba88d-b141-a8d6-6c4f-ddc559eda5d0.png)\n    \n### classes/MyAppList.php\n\n\u3053\u306e\u4e2d\u306bExt Direct\u304b\u3089\u547c\u3073\u51fa\u3059\u30e1\u30bd\u30c3\u30c9\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u5358\u7d14\u306bDB\u304b\u3089\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u306e\u307f\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002\n\n    <?php\n    class MyAppList\n    {\n        public function getList() {\n\n            $_result = array();\n            $result = array();\n            $rows = array();\n\n            $conn = mysql_connect('host', 'user', 'passowd');\n            if (!$conn) {\n                return false;\n            }\n            mysql_select_db('hoge', $conn);\n\n            $sql = 'SELECT * FROM staffs';\n\n            $_result = mysql_query($sql, $conn);\n            while ($row = mysql_fetch_array($_result)) {\n                array_push($rows, array(\n                    'id' => $row['id'],\n                    'name' => $row['name'],\n                    'role' => $row['role'],\n                    'sex' => $row['sex'],\n                    'age' => $row['age']\n                ));\n            }\n\n            $result['items'] = $rows;\n\n            mysql_close($conn);\n\n            return $result;\n        }\n    }\n\n### config.php\n\nconfig.php\u306b\u306fExt Direct\u3067\u547c\u3073\u51fa\u3059\u30af\u30e9\u30b9\u540d\u3068\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002  \n\u3053\u3053\u3067\u306f\u5148\u307b\u3069\u306eMyAppList\u30af\u30e9\u30b9\u306egetList\u30e1\u30bd\u30c3\u30c9\u306e\u307f\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\n    <?php\n    $API = array(\n        'MyAppList' => array(\n            'methods' => array(\n                'getList' => array(\n                    'len' => 0\n                )\n            )\n        )\n    );\n\n### index.html\n\n\u4ee5\u4e0b\u3092\u8ffd\u8a18\u3057\u307e\u3059\u3002\n\n        <script src=\"php/api.php\"></script>\n\n\n## \u5b8c\u6210\n\n\u30b0\u30ea\u30c3\u30c9\u306bDB\u304b\u3089\u53d6\u5f97\u3057\u305f\u30ec\u30b3\u30fc\u30c9\u304c\u8868\u793a\u3055\u308c\u307e\u3057\u305f\uff01\u3084\u3063\u305f\u306d\uff01\n\n![grid.png](https://qiita-image-store.s3.amazonaws.com/0/20136/b7e36e7a-b08d-8ddc-be18-d2647572009f.png)\n\n \n## \u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u306e\u5b9f\u884c\n \nExt Direct\u3067\u547c\u3073\u51fa\u3059\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u88c5\u3059\u308b\u969b\u306f\u3001Web Inspector\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u76f4\u63a5\u547c\u3073\u51fa\u3057\u3066\u3084\u308b\u3068\u30c7\u30d0\u30c3\u30b0\u6bd4\u8f03\u7684\u697d\u306b\u306a\u308a\u307e\u3059\u3002\n\n![terminal.png](https://qiita-image-store.s3.amazonaws.com/0/20136/79e90234-802f-3a74-48af-f4238c9cf79f.png)\n\n## \u3042\u3068\u304c\u304d\n\n\u307e\u3060api.php\u3068router.php\u306e\u30bd\u30fc\u30b9\u3092\u8ffd\u3048\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u4eca\u5f8c\u306f\u305d\u3053\u306e\u52d5\u304d\u3082\u5408\u308f\u305b\u3066\u5b66\u3093\u3067\u3044\u304d\u305f\u3044\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\n\n", "tags": ["Sencha"]}