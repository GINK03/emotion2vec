{"tags": ["solr", "Rails"], "context": " More than 1 year has passed since last update.\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089\u8d77\u52d5\u307e\u3067\n\nGemfile\ngem 'sunspot_rails'\ngem 'sunspot_solr' \n\n\n\n\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\nrails generate sunspot_rails:install\n\n\n\nsolr\u3092\u8d77\u52d5\nbundle exec rake sunspot:solr:start\n\n\n\n\u65e2\u5b58\u306e\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u518dIndex\nmodel\u306esearchable\u3092\u898b\u3066\u308b\u306e\u3067\nsearchable\u306e\u5185\u5bb9\u3092\u5909\u66f4\u3057\u305f\u6642\u3082\u5b9f\u884c\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u307f\u305f\u3044\n\nIndex\u3092\u518d\u4f5c\u6210\nbundle exec rake sunspot:solr:reindex\n\n\n\n\u691c\u7d22\n\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9\n\nmodel\nhas_many :bookmarks\n\nsearchable do\n  text :title\n  text :content\n  double :rating\n  integer :user_id\n\n  string :tags, :multiple => true do\n    bookmarks.map {|b| b.tag}\n  end    \nend\n\n\n\ncontroller\nresult = Recipe.search do\n  fulltext params[:q]\nend\n@recipes = result.results\n\n\nwith\u3067\u8ffd\u52a0\u6761\u4ef6\u3092\u6307\u5b9a\u53ef\u80fd\n\ncontroller\nresult = Recipe.search do\n  fulltext params[:q]\n\n  with :rating, 1\n  with :user_id, user_id if user_id.present?\nend\n@recipes = result.results\n\n\n\u69d8\u3005\u306a\u6761\u4ef6\u6307\u5b9a\n\ncontroller\nwith :rating, 1 # rating = 1\nwith(:rating).less_than 1 # rating < 1\nwith(:rating).less_than_or_equal_to 1 # rating <= 1\nwith(:rating).greater_than 1 # rating > 1\nwith(:rating).greater_than_or_equal_to 1 # rating >= 1\n\n\nmultiple\u306aField\u306b\u5bfe\u3059\u308b\u6761\u4ef6\u6307\u5b9a\n\ncontroller\nwith :tags, [1, 2] # 1 or 2\nwith(:tags).all_of [1, 2]   # 1 and 2\n\n\n\u30da\u30fc\u30b8\u30f3\u30b0\u3082\u51fa\u6765\u308b\n\ncontroller\nresult = Recipe.search do\n  fulltext params[:q]\n\n  with :user_id, user_id if user_id.present?\n  paginate :page => 1, :per_page => 10\nend\n@recipes = result.results\n\n\n\n##\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089\u8d77\u52d5\u307e\u3067\n```ruby:Gemfile\ngem 'sunspot_rails'\ngem 'sunspot_solr' \n```\n\n```bash:\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\nrails generate sunspot_rails:install\n```\n\n```bash:solr\u3092\u8d77\u52d5\nbundle exec rake sunspot:solr:start\n```\n\n##\u65e2\u5b58\u306e\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u518dIndex\nmodel\u306esearchable\u3092\u898b\u3066\u308b\u306e\u3067\nsearchable\u306e\u5185\u5bb9\u3092\u5909\u66f4\u3057\u305f\u6642\u3082\u5b9f\u884c\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u307f\u305f\u3044\n\n```bash:Index\u3092\u518d\u4f5c\u6210\nbundle exec rake sunspot:solr:reindex\n```\n\n##\u691c\u7d22\n***\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9***\n\n```ruby:model\nhas_many :bookmarks\n\nsearchable do\n  text :title\n  text :content\n  double :rating\n  integer :user_id\n    \n  string :tags, :multiple => true do\n    bookmarks.map {|b| b.tag}\n  end    \nend\n```\n\n```ruby:controller\nresult = Recipe.search do\n  fulltext params[:q]\nend\n@recipes = result.results\n```\n\n***with\u3067\u8ffd\u52a0\u6761\u4ef6\u3092\u6307\u5b9a\u53ef\u80fd***\n\n```ruby:controller\nresult = Recipe.search do\n  fulltext params[:q]\n\n  with :rating, 1\n  with :user_id, user_id if user_id.present?\nend\n@recipes = result.results\n```\n\n***\u69d8\u3005\u306a\u6761\u4ef6\u6307\u5b9a***\n\n```ruby:controller\nwith :rating, 1 # rating = 1\nwith(:rating).less_than 1 # rating < 1\nwith(:rating).less_than_or_equal_to 1 # rating <= 1\nwith(:rating).greater_than 1 # rating > 1\nwith(:rating).greater_than_or_equal_to 1 # rating >= 1\n```\n***multiple\u306aField\u306b\u5bfe\u3059\u308b\u6761\u4ef6\u6307\u5b9a***\n\n```ruby:controller\nwith :tags, [1, 2] # 1 or 2\nwith(:tags).all_of [1, 2]   # 1 and 2\n```\n\n***\u30da\u30fc\u30b8\u30f3\u30b0\u3082\u51fa\u6765\u308b***\n\n```ruby:controller\nresult = Recipe.search do\n  fulltext params[:q]\n\n  with :user_id, user_id if user_id.present?\n  paginate :page => 1, :per_page => 10\nend\n@recipes = result.results\n```"}