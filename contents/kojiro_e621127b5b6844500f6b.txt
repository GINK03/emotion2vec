{"context": " More than 1 year has passed since last update.postfix \u306e\u30ed\u30b0\u7b49\u306b\u304a\u3044\u3066\n\u5358\u4f4d\u6642\u9593\u5f53\u305f\u308a\u306e\u7279\u5b9a\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u96c6\u8a08\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u4f8b\n\u3000\"status=sent\" \u3000postfix \u304c\u9001\u4fe1/\u8ee2\u9001\u3057\u305f\u30e1\u30fc\u30eb\u6570/\u79d2\u3092\u96c6\u8a08\u3057\u305f\u4f8b\n\n\ncount.sh\n#!/bin/bash\ncount=0\nbefore=\"\"\nkeyword=\"status=sent\"\n\ntail -f /var/log/maillog | grep --line-buffered \"$keyword\"|\nwhile read line;do\n  now=$(echo $line|cut -f2 -d' ')\n  if [ \"$before\" = \"$now\" ];then\n    count=$[count+1]\n    echo -ne \"$now $count\\r\"\n  else\n    if [ \"$before\" ] ;then\n      echo -ne \"$before $count\\n\"\n    fi\n    echo -ne \"$now 1\\r\"\n    count=1\n    before=$now\n  fi\ndone\n\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3000\u4ef6\u6570/\u79d2\u3000\u3067\u306e\u96c6\u8a08\u3067\u304d\u308b\u3002\n[user@hogehoge ~]$ sh ./count.sh\n16:40:37 1\n16:40:37 1\n16:41:19 1\n16:41:20 2\n16:41:21 2\n16:41:22 2\n16:41:23 2\n16:41:24 1\n16:41:25 2\n16:41:26 2\n16:41:27 2\n16:41:28 1\n16:41:29 2\npostfix \u306e\u30ed\u30b0\u7b49\u306b\u304a\u3044\u3066\n\u5358\u4f4d\u6642\u9593\u5f53\u305f\u308a\u306e\u7279\u5b9a\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u96c6\u8a08\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u4f8b\n\n\u3000\"status=sent\" \u3000postfix \u304c\u9001\u4fe1/\u8ee2\u9001\u3057\u305f\u30e1\u30fc\u30eb\u6570/\u79d2\u3092\u96c6\u8a08\u3057\u305f\u4f8b\n\n\n----------------------------------------------------------------------\n\n\n```bash:count.sh\n#!/bin/bash\ncount=0\nbefore=\"\"\nkeyword=\"status=sent\"\n\ntail -f /var/log/maillog | grep --line-buffered \"$keyword\"|\nwhile read line;do\n  now=$(echo $line|cut -f2 -d' ')\n  if [ \"$before\" = \"$now\" ];then\n    count=$[count+1]\n    echo -ne \"$now $count\\r\"\n  else\n    if [ \"$before\" ] ;then\n      echo -ne \"$before $count\\n\"\n    fi\n    echo -ne \"$now 1\\r\"\n    count=1\n    before=$now\n  fi\ndone\n```\n\n----------------------------------------------------------------------\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3000\u4ef6\u6570/\u79d2\u3000\u3067\u306e\u96c6\u8a08\u3067\u304d\u308b\u3002\n\n[user@hogehoge ~]$ sh ./count.sh\n16:40:37 1\n16:40:37 1\n16:41:19 1\n16:41:20 2\n16:41:21 2\n16:41:22 2\n16:41:23 2\n16:41:24 1\n16:41:25 2\n16:41:26 2\n16:41:27 2\n16:41:28 1\n16:41:29 2\n", "tags": ["postfix", "Bash", "grep"]}