{"tags": ["alpinelinux", "docker", "nginx", "alpine"], "context": "\n\nTL;DR\n\nalpinelinux\u306eedge branch\u3067 nginx 1.9.14\u306e docker image\u3092build\u3059\u308b\n\n\nDockerfile\nFROM alpine:edge\n\nMAINTAINER Takumi Kanzaki\n\nRUN apk upgrade\nRUN apk add --no-cache --virtual .nginx-builddeps \\\n    ca-certificates \\\n    nginx=1.9.14-r0\n\n# forward request and error logs to docker log collector\nRUN ln -sf /dev/stdout /var/log/nginx/access.log\nRUN ln -sf /dev/stderr /var/log/nginx/error.log\n\n# nginx.conf\nCOPY nginx.conf /etc/nginx/nginx.conf\n\nVOLUME [\"/var/cache/nginx\"]\n\nEXPOSE 80 443\n\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n\n\n\ndocker build\ndocker build -t nginx:1.9.14-alpine-edge --no-cache .\n\n\nversion/configure option \u78ba\u8a8d\n\n-> % docker run nginx:1.9.14-apline-edge nginx -V\nnginx version: nginx/1.9.14\nbuilt with OpenSSL 1.0.2g  1 Mar 2016\nTLS SNI support enabled\nconfigure arguments: --prefix=/var/lib/nginx --sbin-path=/usr/sbin/nginx --conf-path=/etc/nginx/nginx.conf --pid-path=/run/nginx/nginx.pid --lock-path=/run/nginx/nginx.lock --http-client-body-temp-path=/var/lib/nginx/tmp/client_body --http-proxy-temp-path=/var/lib/nginx/tmp/proxy --http-fastcgi-temp-path=/var/lib/nginx/tmp/fastcgi --http-uwsgi-temp-path=/var/lib/nginx/tmp/uwsgi --http-scgi-temp-path=/var/lib/nginx/tmp/scgi --user=nginx --group=nginx --with-ipv6 --with-file-aio --with-pcre-jit --with-http_dav_module --with-http_ssl_module --with-http_stub_status_module --with-http_gzip_static_module --with-http_v2_module --with-http_auth_request_module --with-mail --with-mail_ssl_module\n\n\nimage size\n\nalpine:3.3 \u306e nginx1.8.1\u3068\u306e\u6bd4\u8f03\n\n-> % docker images | grep nginx\nnginx     1.9.14-apline-simple              18c6b823fe55        3 minutes ago       6.746 MB\nnginx     1.8.1-apline-simple               7c3832639116        5 hours ago         7.393 MB\n\n# TL;DR\n- alpinelinux\u306eedge branch\u3067 nginx 1.9.14\u306e docker image\u3092build\u3059\u308b\n\n# Dockerfile\n\n```\nFROM alpine:edge\n\nMAINTAINER Takumi Kanzaki\n\nRUN apk upgrade\nRUN apk add --no-cache --virtual .nginx-builddeps \\\n    ca-certificates \\\n    nginx=1.9.14-r0\n\n# forward request and error logs to docker log collector\nRUN ln -sf /dev/stdout /var/log/nginx/access.log\nRUN ln -sf /dev/stderr /var/log/nginx/error.log\n\n# nginx.conf\nCOPY nginx.conf /etc/nginx/nginx.conf\n\nVOLUME [\"/var/cache/nginx\"]\n\nEXPOSE 80 443\n\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n\n```\n\n# docker build\n\n```\ndocker build -t nginx:1.9.14-alpine-edge --no-cache .\n```\n\n# version/configure option \u78ba\u8a8d\n\n> -> % docker run nginx:1.9.14-apline-edge nginx -V\nnginx version: nginx/1.9.14\nbuilt with OpenSSL 1.0.2g  1 Mar 2016\nTLS SNI support enabled\nconfigure arguments: --prefix=/var/lib/nginx --sbin-path=/usr/sbin/nginx --conf-path=/etc/nginx/nginx.conf --pid-path=/run/nginx/nginx.pid --lock-path=/run/nginx/nginx.lock --http-client-body-temp-path=/var/lib/nginx/tmp/client_body --http-proxy-temp-path=/var/lib/nginx/tmp/proxy --http-fastcgi-temp-path=/var/lib/nginx/tmp/fastcgi --http-uwsgi-temp-path=/var/lib/nginx/tmp/uwsgi --http-scgi-temp-path=/var/lib/nginx/tmp/scgi --user=nginx --group=nginx --with-ipv6 --with-file-aio --with-pcre-jit --with-http_dav_module --with-http_ssl_module --with-http_stub_status_module --with-http_gzip_static_module --with-http_v2_module --with-http_auth_request_module --with-mail --with-mail_ssl_module\n\n\n# image size\n- alpine:3.3 \u306e nginx1.8.1\u3068\u306e\u6bd4\u8f03\n\n```\n-> % docker images | grep nginx\nnginx     1.9.14-apline-simple              18c6b823fe55        3 minutes ago       6.746 MB\nnginx     1.8.1-apline-simple               7c3832639116        5 hours ago         7.393 MB\n"}