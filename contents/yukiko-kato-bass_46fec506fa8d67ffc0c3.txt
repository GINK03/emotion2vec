{"context": " More than 1 year has passed since last update.Rails4+ruby-2.0.0-p247\nAPNs\u306eGem\u3063\u3066\u30b0\u30b0\u3063\u3066\u3082\u30a4\u30de\u30a4\u30c1\u3060\u3063\u305f\u3093\u3060\u304c\u3001\u305d\u306e\u4e2d\u3067\u3082\u308f\u304b\u308a\u3084\u3059\u304b\u3063\u305fGrocer\u3092\u4f7f\u3063\u3066\u307f\u305f\u3002\nGrocer -- https://github.com/grocer/grocer\n\u307b\u3068\u3093\u3069README\u306b\u66f8\u3044\u3066\u3042\u308b\u901a\u308a\u3067\u52d5\u3044\u305f\u3002\u89aa\u5207\u3002\n\u672c\u5f53\u306f\u3001\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u8a2d\u5b9a\u306f\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7cfb\u306b\u66f8\u3044\u305f\u65b9\u304c\u3044\u3044\u3093\u3060\u308d\u3046\u306a\u3002\u3002\ngem 'grocer'\n\n\npusher.rb\nrequire 'grocer'\n\n  @@grocer_pusher = Grocer.pusher(\n      certificate: File.join(Rails.root, \"config\", \"production_apns.pem\"),\n      passphrase: \"\",\n      gateway: \"gateway.push.apple.com\",\n      port: 2195,\n      retries: 3\n  )\n\n  def async_send_apns(sender_id, reciever)\n\n    target_devices = User.find(reciever.id).devices\n    if target_devices.present?\n      target_devices.each do |device|\n        notification = Grocer::Notification.new(\n          device_token: device.token,\n          alert: self.apns_for_message(sender_id),\n          badge: 1,\n          expiry: Time.now + 60*60*60,\n          identifier: 1234,\n          content_available: true,\n          custom: {user_id: sender_id}\n        )\n        @@grocer_pusher.push(notification)\n      end\n    end\n  end\n\n\n\u30a2\u30d7\u30ea\u306b\u3088\u3063\u3066\u306f\u3001\u72ec\u81ea\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u3044\u3053\u3068\u3082\u3042\u308b\u306e\u3067\u3001\u305d\u3053\u306fcustom\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u3066\u3001\u305d\u308c\u3092\u4f7f\u3048\u3070\u826f\u3055\u305d\u3046\u3002\ncustom: {user_id: sender_id}\n\n\u4eca\u56de\u306fuser_id\u304c\u6b32\u3057\u304b\u3063\u305f\u306e\u3067\u3001custom\u306b\u8ffd\u52a0\u3057\u305f\u3002\n\u672c\u5bb6\u306eREADME\u306b\u66f8\u3044\u3066\u3042\u308b\u3068\u304a\u308a\u3001\u53ef\u5909\u3067\u3044\u304f\u3064\u304b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4ed8\u4e0e\u3059\u308b\u3053\u3068\u3082\u51fa\u6765\u305d\u3046\u3002\u2193\u3053\u3093\u306a\u611f\u3058\ncustom: {\n    \"acme2\": [\"bang\", \"whiz\"]\n  }\n\n\u4eca\u56de\u306fiOS\u3060\u3051\u3060\u3063\u305f\u3051\u3069\u3001passbook\u3084safari\u3078\u306enotification\u3082\u51fa\u6765\u308b\u307f\u305f\u3044\u3002\n\u6a5f\u4f1a\u304c\u3042\u308c\u3070\u3044\u308d\u3044\u308d\u8a66\u3057\u3066\u307f\u305f\u3044\u3002\n\nRails4+ruby-2.0.0-p247\nAPNs\u306eGem\u3063\u3066\u30b0\u30b0\u3063\u3066\u3082\u30a4\u30de\u30a4\u30c1\u3060\u3063\u305f\u3093\u3060\u304c\u3001\u305d\u306e\u4e2d\u3067\u3082\u308f\u304b\u308a\u3084\u3059\u304b\u3063\u305fGrocer\u3092\u4f7f\u3063\u3066\u307f\u305f\u3002\n\nGrocer -- https://github.com/grocer/grocer\n\n\u307b\u3068\u3093\u3069README\u306b\u66f8\u3044\u3066\u3042\u308b\u901a\u308a\u3067\u52d5\u3044\u305f\u3002\u89aa\u5207\u3002\n\u672c\u5f53\u306f\u3001\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u8a2d\u5b9a\u306f\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7cfb\u306b\u66f8\u3044\u305f\u65b9\u304c\u3044\u3044\u3093\u3060\u308d\u3046\u306a\u3002\u3002\n\n```Gemfile\ngem 'grocer'\n```\n\n\n```pusher.rb\nrequire 'grocer'\n\n  @@grocer_pusher = Grocer.pusher(\n      certificate: File.join(Rails.root, \"config\", \"production_apns.pem\"),\n      passphrase: \"\",\n      gateway: \"gateway.push.apple.com\",\n      port: 2195,\n      retries: 3\n  )\n\n  def async_send_apns(sender_id, reciever)\n\n    target_devices = User.find(reciever.id).devices\n    if target_devices.present?\n      target_devices.each do |device|\n        notification = Grocer::Notification.new(\n          device_token: device.token,\n          alert: self.apns_for_message(sender_id),\n          badge: 1,\n          expiry: Time.now + 60*60*60,\n          identifier: 1234,\n          content_available: true,\n          custom: {user_id: sender_id}\n        )\n        @@grocer_pusher.push(notification)\n      end\n    end\n  end\n```\n\n\u30a2\u30d7\u30ea\u306b\u3088\u3063\u3066\u306f\u3001\u72ec\u81ea\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u3044\u3053\u3068\u3082\u3042\u308b\u306e\u3067\u3001\u305d\u3053\u306fcustom\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u3066\u3001\u305d\u308c\u3092\u4f7f\u3048\u3070\u826f\u3055\u305d\u3046\u3002\n\n```\ncustom: {user_id: sender_id}\n```\n\n\u4eca\u56de\u306fuser_id\u304c\u6b32\u3057\u304b\u3063\u305f\u306e\u3067\u3001custom\u306b\u8ffd\u52a0\u3057\u305f\u3002\n\u672c\u5bb6\u306eREADME\u306b\u66f8\u3044\u3066\u3042\u308b\u3068\u304a\u308a\u3001\u53ef\u5909\u3067\u3044\u304f\u3064\u304b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4ed8\u4e0e\u3059\u308b\u3053\u3068\u3082\u51fa\u6765\u305d\u3046\u3002\u2193\u3053\u3093\u306a\u611f\u3058\n\n```\ncustom: {\n    \"acme2\": [\"bang\", \"whiz\"]\n  }\n```\n\n\u4eca\u56de\u306fiOS\u3060\u3051\u3060\u3063\u305f\u3051\u3069\u3001passbook\u3084safari\u3078\u306enotification\u3082\u51fa\u6765\u308b\u307f\u305f\u3044\u3002\n\u6a5f\u4f1a\u304c\u3042\u308c\u3070\u3044\u308d\u3044\u308d\u8a66\u3057\u3066\u307f\u305f\u3044\u3002", "tags": ["Rails", "Ruby", "APNS", "iOS"]}