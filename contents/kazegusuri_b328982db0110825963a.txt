{"tags": ["fluentd"], "context": " More than 1 year has passed since last update.Fluentd\u3092\u518d\u8d77\u52d5\u3059\u308b\u3068\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u304c\u7a81\u7136\u5168\u3066\u306a\u304f\u306a\u3063\u3066\u56f0\u3063\u305f\u306e\u3067\u3069\u3046\u3057\u3066\u305d\u3046\u306a\u3063\u305f\u306e\u304b\u8abf\u3079\u3066\u307f\u305f\u3002\n\nFluentd\u306e\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\n\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u3068\u3044\u3046\u306e\u306fBufferedOutput\u30d7\u30e9\u30b0\u30a4\u30f3\u3067buffer_type file\u3092\u6307\u5b9a\u3057\u3066buffer_path\u306b\u3067\u304d\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u3053\u3068\u3002\u3053\u3053\u306b\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u4f7f\u3046\u30c7\u30fc\u30bf\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001Fluentd\u3092\u6b62\u3081\u3066\u3082\u6b21\u56de\u8d77\u52d5\u6642\u306b\u518d\u9001\u304c\u884c\u308f\u308c\u308b\u3002\n\n\u554f\u984c\n\u4f8b\u3068\u3057\u3066out_forward\u3092\u4f7f\u3046\u3068\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u306e\u3088\u3046\u306bbuffer/foo.bar.baz\u306b\u30d0\u30c3\u30d5\u30a1\u3092\u4fdd\u5b58\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u305f\u3002\n<match test>\n  type forward\n\n  buffer_type file\n  buffer_path buffer/foo.bar.baz\n  ...\n</match>\n\n\u3053\u306e\u8a2d\u5b9a\u3067\u51e6\u7406\u304c\u8ffd\u3044\u3064\u304b\u305a\u306b\u30ad\u30e5\u30fc\u304c\u6e9c\u307e\u3063\u3066\u3044\u304f\u3068\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u304c\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u6e9c\u307e\u3063\u3066\u3044\u304f\n$ ls -1 buffer/\nfoo.bar.baz.test.b50b56bd280da5547.log\nfoo.bar.baz.test.q50b56bb78fd8ea6c.log\nfoo.bar.baz.test.q50b56bb9d0c2643f.log\n\n\u30d0\u30c3\u30d5\u30a1\u304c\u6b8b\u3063\u305f\u72b6\u614b\u3067Fluentd\u3092\u518d\u8d77\u52d5\u3057\u3066\u3057\u3070\u3089\u304f\u5f85\u3064\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u3067\u3066\u3044\u305f\u3002\n2014-12-29 17:35:09 +0900 [error]: fluent/output.rb:155:rescue in run: error on output thread error=\"No such file or directory @ sys_fail2 - (buffer/foo.bar.baz.test.b50b56bd280da5547.log, buffer/foo.bar.baz.test.q50b56bd280da5547.log)\"\n\n\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u304c\u7121\u3044\u3068\u3044\u3046\u30a8\u30e9\u30fc\u3002\u305d\u3093\u306a\u308f\u3051\u304c\u306a\u3044\u3068\u601d\u3044\u3064\u3064\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u898b\u308b\u3068\u5168\u3066\u306a\u304f\u306a\u3063\u3066\u3044\u305f\u3002\n\n\u539f\u56e0\n\u5b9f\u969b\u306b\u4f7f\u3063\u3066\u3044\u305f\u8a2d\u5b9a\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u3066\u3001forward\u306e\u524d\u306b\u5225\u306eBufferedOutput\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u305f\u3002\n<match other>\n  type exec\n  command cat\n  buffer_path buffer/foo.bar\n  ...\n</match>\n\n<match test>\n  type forward\n\n  buffer_type file\n  buffer_path buffer/foo.bar.baz\n  ...\n</match>\n\n\u3053\u3053\u3067\u554f\u984c\u306a\u306e\u306fbuffer_path\u304c\u524d\u65b9\u4e00\u81f4\u3059\u308b\u3088\u3046\u306a\u30d1\u30b9\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068(\u5b9f\u969b\u306b\u306f\u3082\u3046\u5c11\u3057\u7d30\u304b\u3044\u6761\u4ef6\u304c\u3042\u308a\u307e\u3059\u304c)\u3002\u3053\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u306b\u306a\u3063\u3066\u3044\u308b\u3068\u3001test\u306e\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u304cother\u306e\u65b9\u306e\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u3082\u6271\u308f\u308c\u3066\u3057\u307e\u3046\u305f\u3081\u3001other\u5074\u306e\u65b9\u3067\u51e6\u7406\u304c\u7d42\u308f\u308b\u3068\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u304c\u524a\u9664\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u51e6\u7406\u306e\u6d41\u308c\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nFluentd\u3092\u518d\u8d77\u52d5\n\nother\u304cbuffer/foo.bar.*.log \u306b\u30de\u30c3\u30c1\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u767b\u9332\n\ntest\u304cbuffer/foo.bar.baz.*.log \u306b\u30de\u30c3\u30c1\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u767b\u9332\n\nother\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u5148\u306b\u5b9f\u884c\u3055\u308c\u3001\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b\n\ntest\u3092\u5b9f\u884c\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u304c\u7121\u3044\u306e\u3067\u30a8\u30e9\u30fc\n\n\n\u5bfe\u5fdc\u7b56\n\u5bfe\u5fdc\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u3002\n\nbuffer_path\u304c\u524d\u65b9\u4e00\u81f4\u3057\u306a\u3044\u3088\u3046\u306b\u6ce8\u610f\u3059\u308b(\u4f8b: foo.buffer, foo.bar.buffer\n\n\u30d1\u30b9\u306e\u672b\u5c3e\u3092\u7d71\u4e00\u3059\u308b\n\n\nbuffer_path\u306b. (dot)\u3092\u4f7f\u308f\u306a\u3044(\u4f8b: foo_bar, foo_bar_baz)\n\nbuffer_path\u306b*\u3092\u4f7f\u3063\u305f\u5834\u5408\u306f\u751f\u6210\u3055\u308c\u308b\u30d1\u30b9\u304c\u7570\u306a\u308b\u306e\u3067\u4e0a\u8a18\u306e\u5bfe\u5fdc\u3060\u3051\u3067\u306f\u3046\u307e\u304f\u3044\u304d\u307e\u305b\u3093\u3002\u304a\u305d\u3089\u304f\u90e8\u5206\u6587\u5b57\u5217\u306b\u306a\u3089\u306a\u3044\u3088\u3046\u306b\u6ce8\u610f\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u6c17\u304c\u3057\u307e\u3059(\u8981\u78ba\u8a8d)\u3002\n\u3069\u3061\u3089\u306b\u305b\u3088BufferedOutput\u3067No such file or directory\u304c\u51fa\u3066\u3044\u308b\u3088\u3046\u306a\u3089\u30ed\u30b9\u30c8\u3057\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u9ad8\u3044\u306e\u3067\u6ce8\u610f\u3057\u3066\u4e0b\u3055\u3044\u3002\nFluentd\u3092\u518d\u8d77\u52d5\u3059\u308b\u3068\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u304c\u7a81\u7136\u5168\u3066\u306a\u304f\u306a\u3063\u3066\u56f0\u3063\u305f\u306e\u3067\u3069\u3046\u3057\u3066\u305d\u3046\u306a\u3063\u305f\u306e\u304b\u8abf\u3079\u3066\u307f\u305f\u3002\n\n## Fluentd\u306e\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\n\n\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u3068\u3044\u3046\u306e\u306fBufferedOutput\u30d7\u30e9\u30b0\u30a4\u30f3\u3067`buffer_type file`\u3092\u6307\u5b9a\u3057\u3066`buffer_path`\u306b\u3067\u304d\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u3053\u3068\u3002\u3053\u3053\u306b\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u4f7f\u3046\u30c7\u30fc\u30bf\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001Fluentd\u3092\u6b62\u3081\u3066\u3082\u6b21\u56de\u8d77\u52d5\u6642\u306b\u518d\u9001\u304c\u884c\u308f\u308c\u308b\u3002\n\n## \u554f\u984c\n\n\u4f8b\u3068\u3057\u3066out_forward\u3092\u4f7f\u3046\u3068\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u306e\u3088\u3046\u306b`buffer/foo.bar.baz`\u306b\u30d0\u30c3\u30d5\u30a1\u3092\u4fdd\u5b58\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u305f\u3002\n\n```\n<match test>\n  type forward\n\n  buffer_type file\n  buffer_path buffer/foo.bar.baz\n  ...\n</match>\n```\n\n\u3053\u306e\u8a2d\u5b9a\u3067\u51e6\u7406\u304c\u8ffd\u3044\u3064\u304b\u305a\u306b\u30ad\u30e5\u30fc\u304c\u6e9c\u307e\u3063\u3066\u3044\u304f\u3068\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u304c\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u6e9c\u307e\u3063\u3066\u3044\u304f\n\n```\n$ ls -1 buffer/\nfoo.bar.baz.test.b50b56bd280da5547.log\nfoo.bar.baz.test.q50b56bb78fd8ea6c.log\nfoo.bar.baz.test.q50b56bb9d0c2643f.log\n```\n\n\u30d0\u30c3\u30d5\u30a1\u304c\u6b8b\u3063\u305f\u72b6\u614b\u3067Fluentd\u3092\u518d\u8d77\u52d5\u3057\u3066\u3057\u3070\u3089\u304f\u5f85\u3064\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u3067\u3066\u3044\u305f\u3002\n\n```\n2014-12-29 17:35:09 +0900 [error]: fluent/output.rb:155:rescue in run: error on output thread error=\"No such file or directory @ sys_fail2 - (buffer/foo.bar.baz.test.b50b56bd280da5547.log, buffer/foo.bar.baz.test.q50b56bd280da5547.log)\"\n```\n\n\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u304c\u7121\u3044\u3068\u3044\u3046\u30a8\u30e9\u30fc\u3002\u305d\u3093\u306a\u308f\u3051\u304c\u306a\u3044\u3068\u601d\u3044\u3064\u3064\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u898b\u308b\u3068**\u5168\u3066\u306a\u304f\u306a\u3063\u3066\u3044\u305f**\u3002\n\n\n## \u539f\u56e0\n\n\u5b9f\u969b\u306b\u4f7f\u3063\u3066\u3044\u305f\u8a2d\u5b9a\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u3066\u3001forward\u306e\u524d\u306b\u5225\u306eBufferedOutput\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u305f\u3002\n\n```\n<match other>\n  type exec\n  command cat\n  buffer_path buffer/foo.bar\n  ...\n</match>\n\n<match test>\n  type forward\n\n  buffer_type file\n  buffer_path buffer/foo.bar.baz\n  ...\n</match>\n```\n\n\u3053\u3053\u3067\u554f\u984c\u306a\u306e\u306f**buffer_path\u304c\u524d\u65b9\u4e00\u81f4\u3059\u308b\u3088\u3046\u306a\u30d1\u30b9**\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068(\u5b9f\u969b\u306b\u306f\u3082\u3046\u5c11\u3057\u7d30\u304b\u3044\u6761\u4ef6\u304c\u3042\u308a\u307e\u3059\u304c)\u3002\u3053\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u306b\u306a\u3063\u3066\u3044\u308b\u3068\u3001`test`\u306e\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u304c`other`\u306e\u65b9\u306e\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u3082\u6271\u308f\u308c\u3066\u3057\u307e\u3046\u305f\u3081\u3001**other\u5074\u306e\u65b9\u3067\u51e6\u7406\u304c\u7d42\u308f\u308b\u3068\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u304c\u524a\u9664\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059**\u3002\n\n\u51e6\u7406\u306e\u6d41\u308c\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n1. Fluentd\u3092\u518d\u8d77\u52d5\n2. `other`\u304c`buffer/foo.bar.*.log` \u306b\u30de\u30c3\u30c1\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u767b\u9332\n3. `test`\u304c`buffer/foo.bar.baz.*.log` \u306b\u30de\u30c3\u30c1\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u767b\u9332\n4. `other`\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u5148\u306b\u5b9f\u884c\u3055\u308c\u3001\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3059\u308b\n5. `test`\u3092\u5b9f\u884c\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u30d0\u30c3\u30d5\u30a1\u30d5\u30a1\u30a4\u30eb\u304c\u7121\u3044\u306e\u3067\u30a8\u30e9\u30fc\n\n## \u5bfe\u5fdc\u7b56\n\n\u5bfe\u5fdc\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u3002\n\n- buffer_path\u304c\u524d\u65b9\u4e00\u81f4\u3057\u306a\u3044\u3088\u3046\u306b\u6ce8\u610f\u3059\u308b(\u4f8b: `foo.buffer`, `foo.bar.buffer`\n - \u30d1\u30b9\u306e\u672b\u5c3e\u3092\u7d71\u4e00\u3059\u308b\n- buffer_path\u306b`.` (dot)\u3092\u4f7f\u308f\u306a\u3044(\u4f8b: `foo_bar`, `foo_bar_baz`)\n\nbuffer_path\u306b`*`\u3092\u4f7f\u3063\u305f\u5834\u5408\u306f\u751f\u6210\u3055\u308c\u308b\u30d1\u30b9\u304c\u7570\u306a\u308b\u306e\u3067\u4e0a\u8a18\u306e\u5bfe\u5fdc\u3060\u3051\u3067\u306f\u3046\u307e\u304f\u3044\u304d\u307e\u305b\u3093\u3002\u304a\u305d\u3089\u304f\u90e8\u5206\u6587\u5b57\u5217\u306b\u306a\u3089\u306a\u3044\u3088\u3046\u306b\u6ce8\u610f\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u6c17\u304c\u3057\u307e\u3059(\u8981\u78ba\u8a8d)\u3002\n\n\u3069\u3061\u3089\u306b\u305b\u3088BufferedOutput\u3067No such file or directory\u304c\u51fa\u3066\u3044\u308b\u3088\u3046\u306a\u3089\u30ed\u30b9\u30c8\u3057\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u9ad8\u3044\u306e\u3067\u6ce8\u610f\u3057\u3066\u4e0b\u3055\u3044\u3002\n"}