{"context": " More than 1 year has passed since last update.import Rx from 'rx';\nimport https from 'https';\n\nlet promise = Rx.Observable.create(observer => {\n      const req = https.request(url, res => {\n        if (res.statusCode === 429) {\n          const err = new Error('TooManyRequests');\n          err.waitTime = Number(res.headers['retry-after']) * 1000;\n          return observer.onError(err);\n        }\n        res.setEncoding('utf8');\n        res.on('data', chunk => observer.onNext(chunk));\n        res.on('end', () => observer.onCompleted());\n        res.on('error', err => observer.onError(err));\n      });\n      req.setTimeout(this.timeout, () => req.abort());\n      req.on('error', err => observer.onError(err));\n      req.end();\n    })\n      .reduce((prev, next) => prev + next)\n      .map(JSON.parse)\n      .toPromise(Promise);\n\n\n\u5f97\u3089\u308c\u305f\u77e5\u898b\n\nhttps.request\u3068http.request\u306f\u540c\u3058\u306a\u3088\u3046\u3060?\u3002\nIncomingMessage\u578b\u3067\u3042\u308bres\u304cclose\u30a4\u30d9\u30f3\u30c8\u304ctrigger\u3055\u308c\u308b\u3053\u3068\u306f\u3042\u307e\u308a\u306a\u3044\n\nrequest\u30e2\u30b8\u30e5\u30fc\u30eb\u306fhttp.request\u3092\u7528\u3044\u3066\u3044\u306a\u3044\u2190\u3084\u3063\u3071\u305d\u3093\u306a\u3053\u3068\u306a\u304b\u3063\u305f\n\n\n```js\nimport Rx from 'rx';\nimport https from 'https';\n\nlet promise = Rx.Observable.create(observer => {\n      const req = https.request(url, res => {\n        if (res.statusCode === 429) {\n          const err = new Error('TooManyRequests');\n          err.waitTime = Number(res.headers['retry-after']) * 1000;\n          return observer.onError(err);\n        }\n        res.setEncoding('utf8');\n        res.on('data', chunk => observer.onNext(chunk));\n        res.on('end', () => observer.onCompleted());\n        res.on('error', err => observer.onError(err));\n      });\n      req.setTimeout(this.timeout, () => req.abort());\n      req.on('error', err => observer.onError(err));\n      req.end();\n    })\n      .reduce((prev, next) => prev + next)\n      .map(JSON.parse)\n      .toPromise(Promise);\n```\n\n#\u5f97\u3089\u308c\u305f\u77e5\u898b\n * https.request\u3068http.request\u306f\u540c\u3058\u306a\u3088\u3046\u3060?\u3002\n * IncomingMessage\u578b\u3067\u3042\u308bres\u304cclose\u30a4\u30d9\u30f3\u30c8\u304ctrigger\u3055\u308c\u308b\u3053\u3068\u306f\u3042\u307e\u308a\u306a\u3044\n * ~~request\u30e2\u30b8\u30e5\u30fc\u30eb\u306fhttp.request\u3092\u7528\u3044\u3066\u3044\u306a\u3044~~\u2190\u3084\u3063\u3071\u305d\u3093\u306a\u3053\u3068\u306a\u304b\u3063\u305f\n", "tags": ["JavaScript", "RxJS", "Node.js"]}