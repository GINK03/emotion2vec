{"tags": ["lambda", "spring-boot"], "context": "lambda\u3067Spring Boo\uff54\u3067\u66f8\u304b\u308c\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\uff11\uff15\u5206\u306b1\u56de\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u5b9f\u884c\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u30011\u56de\u76ee\u306f\u3046\u307e\u304f\u3044\u304f\u306e\u3060\u304c\u30012\u56de\u76ee\u4ee5\u964d\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u3002\n{\n  \"errorMessage\": \"Unable to register MBean [org.springframework.cloud.context.environment.EnvironmentManager@7bd6185a] with key 'environmentManager'; nested exception is javax.management.InstanceAlreadyExistsException: org.springframework.cloud.context.environment:name=environmentManager,type=EnvironmentManager\",\n  \"errorType\": \"org.springframework.jmx.export.UnableToRegisterMBeanException\",\n  \"stackTrace\": [\n    \"org.springframework.jmx.export.MBeanExporter.registerBeanNameOrInstance(MBeanExporter.java:625)\",\n    \"org.springframework.jmx.export.MBeanExporter.registerBeans(MBeanExporter.java:550)\",\n    \"org.springframework.jmx.export.MBeanExporter.afterSingletonsInstantiated(MBeanExporter.java:432)\",\n    \"org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:792)\",\n    \"org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:839)\",\n    \"org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:538)\",\n    \"org.springframework.boot.SpringApplication.refresh(SpringApplication.java:766)\",\n    \"org.springframework.boot.SpringApplication.createAndRefreshContext(SpringApplication.java:361)\",\n    \"org.springframework.boot.SpringApplication.run(SpringApplication.java:307)\",\n    \"jp.co.recruit.rtc.hoc.elbconnector.ElbConnectorMain.handleRequest(ElbConnectorMain.java:44)\",\n    \"sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\",\n    \"sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\",\n    \"sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\",\n    \"java.lang.reflect.Method.invoke(Method.java:498)\"\n  ],\n  \"cause\": {\n    \"errorMessage\": \"org.springframework.cloud.context.environment:name=environmentManager,type=EnvironmentManager\",\n    \"errorType\": \"javax.management.InstanceAlreadyExistsException\",\n    \"stackTrace\": [\n      \"com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)\",\n      \"com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)\",\n      \"com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)\",\n      \"com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)\",\n      \"com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)\",\n      \"com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)\",\n      \"org.springframework.jmx.support.MBeanRegistrationSupport.doRegister(MBeanRegistrationSupport.java:195)\",\n      \"org.springframework.jmx.export.MBeanExporter.registerBeanInstance(MBeanExporter.java:678)\",\n      \"org.springframework.jmx.export.MBeanExporter.registerBeanNameOrInstance(MBeanExporter.java:615)\",\n      \"org.springframework.jmx.export.MBeanExporter.registerBeans(MBeanExporter.java:550)\",\n      \"org.springframework.jmx.export.MBeanExporter.afterSingletonsInstantiated(MBeanExporter.java:432)\",\n      \"org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:792)\",\n      \"org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:839)\",\n      \"org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:538)\",\n      \"org.springframework.boot.SpringApplication.refresh(SpringApplication.java:766)\",\n      \"org.springframework.boot.SpringApplication.createAndRefreshContext(SpringApplication.java:361)\",\n      \"org.springframework.boot.SpringApplication.run(SpringApplication.java:307)\",\n      \"jp.co.recruit.rtc.hoc.elbconnector.ElbConnectorMain.handleRequest(ElbConnectorMain.java:44)\",\n      \"sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\",\n      \"sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\",\n      \"sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\",\n      \"java.lang.reflect.Method.invoke(Method.java:498)\"\n    ]\n  }\n}\n\n\u8abf\u3079\u308b\u3068\u3001\u3053\u308c\u306fSpring\u304cJMX\u3092\u4f7f\u3046\u305f\u3081\u306eMBean\u3092\u767b\u9332\u3057\u3066\u304f\u308c\u308b\u306e\u3060\u304c\u3001ApplicationContext\u3092\u4f5c\u308b\u5ea6\u306b\u767b\u9332\u3055\u308c\u308b\u3002\nLambda\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u5b9f\u884c\u3067\u306f\uff11\u56de\u76ee\u30682\u56de\u76ee\u4ee5\u964d\u306f\u540c\u4e00\u306eJVM\u5185\u3067\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306a\u306e\u3067\u30011\u56de\u306b\u5b9f\u884c\u3057\u305f\u3068\u304d\u306bMBean\u3092\u767b\u9332\u3057\u30012\u56de\u76ee\u306b\u5b9f\u884c\u3057\u305f\u3068\u304d\u306b\u540c\u3058MBean\u3092\u767b\u9332\u3057\u3088\u3046\u3068\u3057\u3066\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3044\u308b\u6a21\u69d8\u3002\n\u3053\u308c\u3092\u56de\u907f\u3059\u308b\u306b\u306f\u3001JMX\u81ea\u4f53\u3092\u7121\u52b9\u306b\u3057\u3066\u3057\u307e\u3048\u3070MBean\u306f\u767b\u9332\u3055\u308c\u306a\u3044\u3002\n\u5177\u4f53\u7684\u306b\u306fapplication.properties\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3059\u308c\u3070OK\u3002\nspring.jmx.enabled=false\n\nlambda\u3067Spring Boo\uff54\u3067\u66f8\u304b\u308c\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\uff11\uff15\u5206\u306b1\u56de\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u5b9f\u884c\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u30011\u56de\u76ee\u306f\u3046\u307e\u304f\u3044\u304f\u306e\u3060\u304c\u30012\u56de\u76ee\u4ee5\u964d\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u3002\n\n```\n{\n  \"errorMessage\": \"Unable to register MBean [org.springframework.cloud.context.environment.EnvironmentManager@7bd6185a] with key 'environmentManager'; nested exception is javax.management.InstanceAlreadyExistsException: org.springframework.cloud.context.environment:name=environmentManager,type=EnvironmentManager\",\n  \"errorType\": \"org.springframework.jmx.export.UnableToRegisterMBeanException\",\n  \"stackTrace\": [\n    \"org.springframework.jmx.export.MBeanExporter.registerBeanNameOrInstance(MBeanExporter.java:625)\",\n    \"org.springframework.jmx.export.MBeanExporter.registerBeans(MBeanExporter.java:550)\",\n    \"org.springframework.jmx.export.MBeanExporter.afterSingletonsInstantiated(MBeanExporter.java:432)\",\n    \"org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:792)\",\n    \"org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:839)\",\n    \"org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:538)\",\n    \"org.springframework.boot.SpringApplication.refresh(SpringApplication.java:766)\",\n    \"org.springframework.boot.SpringApplication.createAndRefreshContext(SpringApplication.java:361)\",\n    \"org.springframework.boot.SpringApplication.run(SpringApplication.java:307)\",\n    \"jp.co.recruit.rtc.hoc.elbconnector.ElbConnectorMain.handleRequest(ElbConnectorMain.java:44)\",\n    \"sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\",\n    \"sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\",\n    \"sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\",\n    \"java.lang.reflect.Method.invoke(Method.java:498)\"\n  ],\n  \"cause\": {\n    \"errorMessage\": \"org.springframework.cloud.context.environment:name=environmentManager,type=EnvironmentManager\",\n    \"errorType\": \"javax.management.InstanceAlreadyExistsException\",\n    \"stackTrace\": [\n      \"com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:437)\",\n      \"com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerWithRepository(DefaultMBeanServerInterceptor.java:1898)\",\n      \"com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:966)\",\n      \"com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:900)\",\n      \"com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:324)\",\n      \"com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522)\",\n      \"org.springframework.jmx.support.MBeanRegistrationSupport.doRegister(MBeanRegistrationSupport.java:195)\",\n      \"org.springframework.jmx.export.MBeanExporter.registerBeanInstance(MBeanExporter.java:678)\",\n      \"org.springframework.jmx.export.MBeanExporter.registerBeanNameOrInstance(MBeanExporter.java:615)\",\n      \"org.springframework.jmx.export.MBeanExporter.registerBeans(MBeanExporter.java:550)\",\n      \"org.springframework.jmx.export.MBeanExporter.afterSingletonsInstantiated(MBeanExporter.java:432)\",\n      \"org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:792)\",\n      \"org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:839)\",\n      \"org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:538)\",\n      \"org.springframework.boot.SpringApplication.refresh(SpringApplication.java:766)\",\n      \"org.springframework.boot.SpringApplication.createAndRefreshContext(SpringApplication.java:361)\",\n      \"org.springframework.boot.SpringApplication.run(SpringApplication.java:307)\",\n      \"jp.co.recruit.rtc.hoc.elbconnector.ElbConnectorMain.handleRequest(ElbConnectorMain.java:44)\",\n      \"sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\",\n      \"sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\",\n      \"sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\",\n      \"java.lang.reflect.Method.invoke(Method.java:498)\"\n    ]\n  }\n}\n```\n\n\u8abf\u3079\u308b\u3068\u3001\u3053\u308c\u306fSpring\u304cJMX\u3092\u4f7f\u3046\u305f\u3081\u306eMBean\u3092\u767b\u9332\u3057\u3066\u304f\u308c\u308b\u306e\u3060\u304c\u3001ApplicationContext\u3092\u4f5c\u308b\u5ea6\u306b\u767b\u9332\u3055\u308c\u308b\u3002\nLambda\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u5b9f\u884c\u3067\u306f\uff11\u56de\u76ee\u30682\u56de\u76ee\u4ee5\u964d\u306f\u540c\u4e00\u306eJVM\u5185\u3067\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306a\u306e\u3067\u30011\u56de\u306b\u5b9f\u884c\u3057\u305f\u3068\u304d\u306bMBean\u3092\u767b\u9332\u3057\u30012\u56de\u76ee\u306b\u5b9f\u884c\u3057\u305f\u3068\u304d\u306b\u540c\u3058MBean\u3092\u767b\u9332\u3057\u3088\u3046\u3068\u3057\u3066\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3044\u308b\u6a21\u69d8\u3002\n\n\u3053\u308c\u3092\u56de\u907f\u3059\u308b\u306b\u306f\u3001JMX\u81ea\u4f53\u3092\u7121\u52b9\u306b\u3057\u3066\u3057\u307e\u3048\u3070MBean\u306f\u767b\u9332\u3055\u308c\u306a\u3044\u3002\n\u5177\u4f53\u7684\u306b\u306fapplication.properties\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3059\u308c\u3070OK\u3002\n\n```\nspring.jmx.enabled=false\n```\n"}