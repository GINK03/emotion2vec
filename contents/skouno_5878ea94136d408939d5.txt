{"context": "\n\n\u524d\u63d0\nBacula\u304b\u3089\u306e\u30ea\u30b9\u30c8\u30a2\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u9593\u9055\u3063\u3066\u4e0a\u66f8\u304d\u3059\u308b\u3053\u3068\u3092\u907f\u3051\u308b\u305f\u3081\u3001bacula-dir\u306eJob\u30ea\u30bd\u30fc\u30b9\u3067\u6307\u5b9a\u3057\u305f\u5834\u6240\u306b\u5fa9\u5143\u3055\u308c\u307e\u3059\u3002\n\n/etc/bacula/bacula-dir.conf\nJob {\n  Name = \"RestoreFiles\"\n  Type = Restore\n  Client=bacula-fd\n  FileSet=\"Full Set\"\n  Storage = File1\n  Pool = File\n  Messages = Standard\n  Where = /tmp/bacula-restores \u2190\u3053\u3053\n}\n\n\n\n\u30ea\u30b9\u30c8\u30a2\u624b\u9806\n\u3053\u3053\u3067\u306fconsole\u3067\u306e\u624b\u9806\u3092\u307e\u3068\u3081\u307e\u3059\u3002\n\n\u30ea\u30b9\u30c8\u30a2\u306e\u6e96\u5099\n\nbconsole\u3092\u8d77\u52d5\n[root@bacula ~]# bconsole\nConnecting to Director 192.168.10.10:9101\n1000 OK: 1 bacula-dir Version: 7.0.5 (28 July 2014)\nEnter a period to cancel a command.\n*\n\n\n\u30ea\u30b9\u30c8\u30a2\u65b9\u5f0f\u306e\u9078\u629e\n*restore\nAutomatically selected Catalog: MyCatalog\nUsing Catalog \"MyCatalog\"\n\nFirst you select one or more JobIds that contain files\nto be restored. You will be presented several methods\nof specifying the JobIds. Then you will be allowed to\nselect which files from those JobIds are to be restored.\n\nTo select the JobIds, you have the following choices:\n     1: List last 20 Jobs run\n     2: List Jobs where a given File is saved\n     3: Enter list of comma separated JobIds to select\n     4: Enter SQL list command\n     5: Select the most recent backup for a client\n     6: Select backup for a client before a specified time\n     7: Enter a list of files to restore\n     8: Enter a list of files to restore before a specified time\n     9: Find the JobIds of the most recent backup for a client\n    10: Find the JobIds for a backup for a client before a specified time\n    11: Enter a list of directories to restore for found JobIds\n    12: Select full restore to a specified Job date\n    13: Cancel\nSelect item:  (1-13): \n\n\u3053\u3053\u3067\u306f\u300c5\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u30ea\u30b9\u30c8\u30a2\u3059\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u9078\u629e\nSelect item:  (1-13): 5\nDefined Clients:\n     1: bacula-fd\n     2: client2-fd\nSelect the Client (1-2): \n\n\nFile Set\u306e\u9078\u629e\nSelect the Client (1-2): 2\nThe defined FileSet resources are:\n     1: Catalog\n     2: Full Set\nSelect FileSet resource (1-2): \n\n\u300c2\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\nSelect FileSet resource (1-2): 2\n+-------+-------+----------+------------+---------------------+------------+\n| JobId | Level | JobFiles | JobBytes   | StartTime           | VolumeName |\n+-------+-------+----------+------------+---------------------+------------+\n|    10 | F     |    1,356 | 21,294,579 | 2016-07-26 16:49:04 | Full-0001  |\n|    18 | I     |        1 |          0 | 2016-07-27 02:00:00 | Inc-0002   |\n+-------+-------+----------+------------+---------------------+------------+\nYou have selected the following JobIds: 10,18\n\nBuilding directory tree for JobId(s) 10,18 ...  +++++++++++++++++++++++++++++++++++++++++++\n1,216 files inserted into the tree.\n\nYou are now entering file selection mode where you add (mark) and\nremove (unmark) files to be restored. No files are initially added, unless\nyou used the \"all\" keyword on the command line.\nEnter \"done\" to leave this mode.\n\ncwd is: /\n$ \n\n\u76f4\u8fd1\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30c7\u30fc\u30bf\u304c\u8868\u793a\u3055\u308c\u3001\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u304c\u300c$\u300d\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u3053\u307e\u3067\u3067\u30ea\u30b9\u30c8\u30a2\u306e\u6e96\u5099\u304c\u5b8c\u4e86\u3067\u3059\u3002\n\n\u30ea\u30b9\u30c8\u30a2\u306e\u5b9f\u884c\n\u30ea\u30b9\u30c8\u30a2\u306f\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u3066\u3042\u308b\u30c7\u30fc\u30bf\u5168\u3066\u3092\u30ea\u30b9\u30c8\u30a2\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3057\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u3093\u3067\u7279\u5b9a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u307f\u30ea\u30b9\u30c8\u30a2\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\u30b3\u30de\u30f3\u30c9\u306fLinux\u306e\u30b3\u30de\u30f3\u30c9\u3068\u540c\u69d8\u306e\u64cd\u4f5c\u304c\u53ef\u80fd\u3067\u3059\u3002\n$ ls\netc/\n$ cd etc/ \ncwd is: /etc/\n$ ls\n.java/\n.pwd.lock\n.updated\nDIR_COLORS\nDIR_COLORS.256color\nDIR_COLORS.lightbgcolor\nGREP_COLORS\nNetworkManager/\nX11/\nadjtime\n(\u7565)\n\n\u30ea\u30b9\u30c8\u30a2\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306fmark \u30d5\u30a1\u30a4\u30eb\u540d\u3067\u9078\u629e\u3057\u307e\u3059\u3002\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5168\u3066\u9078\u629e\u3059\u308b\u5834\u5408\u306fmark *\u3068\u3057\u307e\u3059\u3002\n$ mark test \n1 file marked.\n$ \n\n\u30ea\u30b9\u30c8\u30a2\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u305f\u3089done\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\nOK to run? (yes/mod/no):\u306fyes\u3067\u3002\n$ done\nBootstrap records written to /var/spool/bacula/bacula-dir.restore.2.bsr\n\nThe Job will require the following (*=>InChanger):\n   Volume(s)                 Storage(s)                SD Device(s)\n===========================================================================\n\n   Full-0001                    File                    FileStorage              \n\nVolumes marked with \"*\" are in the Autochanger.\n\n\n1 file selected to be restored.\n\nUsing Catalog \"MyCatalog\"\nRun Restore job\nJobName:         RestoreFiles\nBootstrap:       /var/spool/bacula/bacula-dir.restore.2.bsr\nWhere:           /var/bacula/restore\nReplace:         always\nFileSet:         Full Set\nBackup Client:   bacula-fd\nRestore Client:  bacula-fd\nStorage:         File\nWhen:            2016-07-27 11:58:49\nCatalog:         MyCatalog\nPriority:        10\nOK to run? (yes/mod/no): yes\nJob queued. JobId=21\n*\n\n\n\u78ba\u8a8d\n\u5fa9\u5143\u5148\u30b5\u30fc\u30d0\u306e/tmp/bacula-restores/etc/\u306b\u623b\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3067\u304d\u308c\u3070\u7d42\u4e86\u3067\u3059\u3002\n\n\u53c2\u8003\n\n\u30ea\u30b9\u30c8\u30a2\u624b\u9806 | Bacula\nLunaTear: Bacula (6) bacula-dir.conf 1\n\n# \u524d\u63d0\nBacula\u304b\u3089\u306e\u30ea\u30b9\u30c8\u30a2\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u9593\u9055\u3063\u3066\u4e0a\u66f8\u304d\u3059\u308b\u3053\u3068\u3092\u907f\u3051\u308b\u305f\u3081\u3001bacula-dir\u306eJob\u30ea\u30bd\u30fc\u30b9\u3067\u6307\u5b9a\u3057\u305f\u5834\u6240\u306b\u5fa9\u5143\u3055\u308c\u307e\u3059\u3002\n\n```text:/etc/bacula/bacula-dir.conf\nJob {\n  Name = \"RestoreFiles\"\n  Type = Restore\n  Client=bacula-fd\n  FileSet=\"Full Set\"\n  Storage = File1\n  Pool = File\n  Messages = Standard\n  Where = /tmp/bacula-restores \u2190\u3053\u3053\n}\n```\n\n# \u30ea\u30b9\u30c8\u30a2\u624b\u9806\n\u3053\u3053\u3067\u306fconsole\u3067\u306e\u624b\u9806\u3092\u307e\u3068\u3081\u307e\u3059\u3002\n\n## \u30ea\u30b9\u30c8\u30a2\u306e\u6e96\u5099\n\n#### bconsole\u3092\u8d77\u52d5\n\n```\n[root@bacula ~]# bconsole\nConnecting to Director 192.168.10.10:9101\n1000 OK: 1 bacula-dir Version: 7.0.5 (28 July 2014)\nEnter a period to cancel a command.\n*\n```\n\n#### \u30ea\u30b9\u30c8\u30a2\u65b9\u5f0f\u306e\u9078\u629e\n\n```\n*restore\nAutomatically selected Catalog: MyCatalog\nUsing Catalog \"MyCatalog\"\n\nFirst you select one or more JobIds that contain files\nto be restored. You will be presented several methods\nof specifying the JobIds. Then you will be allowed to\nselect which files from those JobIds are to be restored.\n\nTo select the JobIds, you have the following choices:\n     1: List last 20 Jobs run\n     2: List Jobs where a given File is saved\n     3: Enter list of comma separated JobIds to select\n     4: Enter SQL list command\n     5: Select the most recent backup for a client\n     6: Select backup for a client before a specified time\n     7: Enter a list of files to restore\n     8: Enter a list of files to restore before a specified time\n     9: Find the JobIds of the most recent backup for a client\n    10: Find the JobIds for a backup for a client before a specified time\n    11: Enter a list of directories to restore for found JobIds\n    12: Select full restore to a specified Job date\n    13: Cancel\nSelect item:  (1-13): \n```\n\u3053\u3053\u3067\u306f\u300c5\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n#### \u30ea\u30b9\u30c8\u30a2\u3059\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u9078\u629e\n\n```\nSelect item:  (1-13): 5\nDefined Clients:\n     1: bacula-fd\n     2: client2-fd\nSelect the Client (1-2): \n```\n\n#### File Set\u306e\u9078\u629e\n\n```\nSelect the Client (1-2): 2\nThe defined FileSet resources are:\n     1: Catalog\n     2: Full Set\nSelect FileSet resource (1-2): \n```\n\u300c2\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n```\nSelect FileSet resource (1-2): 2\n+-------+-------+----------+------------+---------------------+------------+\n| JobId | Level | JobFiles | JobBytes   | StartTime           | VolumeName |\n+-------+-------+----------+------------+---------------------+------------+\n|    10 | F     |    1,356 | 21,294,579 | 2016-07-26 16:49:04 | Full-0001  |\n|    18 | I     |        1 |          0 | 2016-07-27 02:00:00 | Inc-0002   |\n+-------+-------+----------+------------+---------------------+------------+\nYou have selected the following JobIds: 10,18\n\nBuilding directory tree for JobId(s) 10,18 ...  +++++++++++++++++++++++++++++++++++++++++++\n1,216 files inserted into the tree.\n\nYou are now entering file selection mode where you add (mark) and\nremove (unmark) files to be restored. No files are initially added, unless\nyou used the \"all\" keyword on the command line.\nEnter \"done\" to leave this mode.\n\ncwd is: /\n$ \n```\n\u76f4\u8fd1\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30c7\u30fc\u30bf\u304c\u8868\u793a\u3055\u308c\u3001\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u304c\u300c$\u300d\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u3053\u307e\u3067\u3067\u30ea\u30b9\u30c8\u30a2\u306e\u6e96\u5099\u304c\u5b8c\u4e86\u3067\u3059\u3002\n\n## \u30ea\u30b9\u30c8\u30a2\u306e\u5b9f\u884c\n\n\u30ea\u30b9\u30c8\u30a2\u306f\u3001\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u3066\u3042\u308b\u30c7\u30fc\u30bf\u5168\u3066\u3092\u30ea\u30b9\u30c8\u30a2\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3057\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u3093\u3067\u7279\u5b9a\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u307f\u30ea\u30b9\u30c8\u30a2\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\u30b3\u30de\u30f3\u30c9\u306fLinux\u306e\u30b3\u30de\u30f3\u30c9\u3068\u540c\u69d8\u306e\u64cd\u4f5c\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n```\n$ ls\netc/\n$ cd etc/ \ncwd is: /etc/\n$ ls\n.java/\n.pwd.lock\n.updated\nDIR_COLORS\nDIR_COLORS.256color\nDIR_COLORS.lightbgcolor\nGREP_COLORS\nNetworkManager/\nX11/\nadjtime\n(\u7565)\n```\n\n\u30ea\u30b9\u30c8\u30a2\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306f`mark \u30d5\u30a1\u30a4\u30eb\u540d`\u3067\u9078\u629e\u3057\u307e\u3059\u3002\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5168\u3066\u9078\u629e\u3059\u308b\u5834\u5408\u306f`mark *`\u3068\u3057\u307e\u3059\u3002\n\n```\n$ mark test \n1 file marked.\n$ \n```\n\n\u30ea\u30b9\u30c8\u30a2\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u305f\u3089`done`\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n`OK to run? (yes/mod/no):`\u306f`yes`\u3067\u3002\n\n```\n$ done\nBootstrap records written to /var/spool/bacula/bacula-dir.restore.2.bsr\n\nThe Job will require the following (*=>InChanger):\n   Volume(s)                 Storage(s)                SD Device(s)\n===========================================================================\n   \n   Full-0001                    File                    FileStorage              \n\nVolumes marked with \"*\" are in the Autochanger.\n\n\n1 file selected to be restored.\n\nUsing Catalog \"MyCatalog\"\nRun Restore job\nJobName:         RestoreFiles\nBootstrap:       /var/spool/bacula/bacula-dir.restore.2.bsr\nWhere:           /var/bacula/restore\nReplace:         always\nFileSet:         Full Set\nBackup Client:   bacula-fd\nRestore Client:  bacula-fd\nStorage:         File\nWhen:            2016-07-27 11:58:49\nCatalog:         MyCatalog\nPriority:        10\nOK to run? (yes/mod/no): yes\nJob queued. JobId=21\n*\n```\n\n# \u78ba\u8a8d\n\u5fa9\u5143\u5148\u30b5\u30fc\u30d0\u306e`/tmp/bacula-restores/etc/`\u306b\u623b\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3067\u304d\u308c\u3070\u7d42\u4e86\u3067\u3059\u3002\n\n# \u53c2\u8003\n- [\u30ea\u30b9\u30c8\u30a2\u624b\u9806 | Bacula](https://www.bacula.jp/restore)\n- [LunaTear: Bacula (6) bacula-dir.conf 1](http://lunatear.net/archives/001067.html)\n", "tags": ["bacula", "\u30d0\u30c3\u30af\u30a2\u30c3\u30d7", "\u30ea\u30b9\u30c8\u30a2"]}