{"context": "\u30fbRAID\u306e\u69cb\u6210\n\u3000mdadm --create --verbose --level=1 --metadata=1.2 --chunk=64 --raid-devices=2 /dev/md0 /dev/sdb1 /dev/sdc1\n\u30fb\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n\u3000mdadm --detail --scan >> /etc/mdadm.conf\n\u30fb\u30b9\u30af\u30e9\u30d3\u30f3\u30b0\u30d5\u30e9\u30b0\u3092\u7acb\u3066\u308b\n\u3000echo check > /sys/block/md0/md/sync_action\n\u30fb\u30a8\u30e9\u30fc\u30e1\u30fc\u30eb\u306e\u9001\u4fe1\u30c6\u30b9\u30c8\n\u3000mdadm --monitor --scan --test -1\n\u30fb\u7279\u5b9a\u306e\u30c7\u30a3\u30b9\u30af\u306b\u30d5\u30a7\u30a4\u30eb\u30d5\u30e9\u30b0\u3092\u4ed8\u3051\u308b\n\u3000mdadm --manage --fail /dev/md0 /dev/sda1\n\u30fb\u30d5\u30a7\u30a4\u30eb\u3057\u305f\u30c7\u30a3\u30b9\u30af\u3092\u53d6\u308a\u9664\u304f\n\u3000mdadm -r /dev/md0 /dev/sdb1\n\u30fb\u30b9\u30fc\u30d1\u30fc\u30d6\u30ed\u30c3\u30af\u306eraid\u60c5\u5831\u3092\u524a\u9664\u3059\u308b\uff08\u524a\u9664\u3057\u306a\u3044\u3068\u6b21\u56de\u3001\u518d\u69cb\u6210\u3067\u53d6\u308a\u8fbc\u307e\u308c\u305f\u3068\u304d\u306b\u554f\u984c\u304c\u8d77\u3053\u308b\uff09\n\u3000mdadm --zero-superblock /dev/sdb1\n\u30fb\u5f37\u5236\u7684\u306b\u518d\u69cb\u6210\u3059\u308b\n\u3000mdadm \u2014assemble /dev/md0 \u2014force \u2014run /dev/sd[bcdefghijk]1\n\u30fb\u30a2\u30ec\u30a4\u3092\u505c\u6b62\u3059\u308b\n\u3000mdadm \u2014stop /dev/md0\n\u30fb\u30a2\u30ec\u30a4\u306b\u30c7\u30a3\u30b9\u30af\u3092\u8ffd\u52a0\n\u3000mdadm --add /dev/md127 /dev/sdb1\n\u30fb\u5168\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306e\u30b7\u30ea\u30a2\u30eb\u3092\u77e5\u308a\u305f\u3044\n\u3000hdparm -i /dev/sd[a-z] | grep -E \"(dev|Serial)\"\n\u30fbzfs\u306etank\u3092import\n\u3000zpool import tank\n\u30fbRAID\u306e\u69cb\u6210\n\u3000mdadm --create --verbose --level=1 --metadata=1.2 --chunk=64 --raid-devices=2 /dev/md0 /dev/sdb1 /dev/sdc1\n\n\u30fb\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n\u3000mdadm --detail --scan >> /etc/mdadm.conf\n\n\u30fb\u30b9\u30af\u30e9\u30d3\u30f3\u30b0\u30d5\u30e9\u30b0\u3092\u7acb\u3066\u308b\n\u3000echo check > /sys/block/md0/md/sync_action\n\n\u30fb\u30a8\u30e9\u30fc\u30e1\u30fc\u30eb\u306e\u9001\u4fe1\u30c6\u30b9\u30c8\n\u3000mdadm --monitor --scan --test -1\n\n\u30fb\u7279\u5b9a\u306e\u30c7\u30a3\u30b9\u30af\u306b\u30d5\u30a7\u30a4\u30eb\u30d5\u30e9\u30b0\u3092\u4ed8\u3051\u308b\n\u3000mdadm --manage --fail /dev/md0 /dev/sda1\n\n\u30fb\u30d5\u30a7\u30a4\u30eb\u3057\u305f\u30c7\u30a3\u30b9\u30af\u3092\u53d6\u308a\u9664\u304f\n\u3000mdadm -r /dev/md0 /dev/sdb1\n\n\u30fb\u30b9\u30fc\u30d1\u30fc\u30d6\u30ed\u30c3\u30af\u306eraid\u60c5\u5831\u3092\u524a\u9664\u3059\u308b\uff08\u524a\u9664\u3057\u306a\u3044\u3068\u6b21\u56de\u3001\u518d\u69cb\u6210\u3067\u53d6\u308a\u8fbc\u307e\u308c\u305f\u3068\u304d\u306b\u554f\u984c\u304c\u8d77\u3053\u308b\uff09\n\u3000mdadm --zero-superblock /dev/sdb1\n\n\u30fb\u5f37\u5236\u7684\u306b\u518d\u69cb\u6210\u3059\u308b\n\u3000mdadm \u2014assemble /dev/md0 \u2014force \u2014run /dev/sd[bcdefghijk]1\n\n\u30fb\u30a2\u30ec\u30a4\u3092\u505c\u6b62\u3059\u308b\n\u3000mdadm \u2014stop /dev/md0\n\n\u30fb\u30a2\u30ec\u30a4\u306b\u30c7\u30a3\u30b9\u30af\u3092\u8ffd\u52a0\n\u3000mdadm --add /dev/md127 /dev/sdb1\n\n\u30fb\u5168\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306e\u30b7\u30ea\u30a2\u30eb\u3092\u77e5\u308a\u305f\u3044\n\u3000hdparm -i /dev/sd[a-z] | grep -E \"(dev|Serial)\"\n\n\u30fbzfs\u306etank\u3092import\n\u3000zpool import tank\n", "tags": ["mdadm", "RAID", "ZFS", "hdparm"]}