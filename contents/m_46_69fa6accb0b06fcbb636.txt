{"context": " More than 1 year has passed since last update.\u3053\u306e\u8a18\u4e8b\u306fDrupal Advent Calendar 2015\u306e14\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n11\u670819\u65e5\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u3070\u304b\u308a\u306eDrupal8\u306f\u3001GUI\u3067\u306e\u753b\u9762\u64cd\u4f5c\u3084\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u3082\u5237\u65b0\u3055\u308c\u3066\u3044\u3066\u3001\u3053\u308c\u307e\u3067\u4ee5\u4e0a\u306b\u5229\u4fbf\u6027\u304c\u5411\u4e0a\u3057\u3066\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001Drupal\u3092CUI\u304b\u3089\u64cd\u4f5c\u3059\u308bDrush\u3082D8\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3067\u5b9f\u884c\u53ef\u80fd\u306aDrush\u3092\u65e2\u306b\u5229\u7528\u3057\u3066\u3001\u30c7\u30fc\u30bf\u7ba1\u7406\u306e\u81ea\u52d5\u5316\u3092\u884c\u3063\u3066\u3044\u308b\u65b9\u3082\u5c45\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u6539\u3081\u3066\u3053\u306e\u8a18\u4e8b\u3067\u306fDrupal8\uff20CentOS7\u306e\u52d5\u4f5c\u74b0\u5883\u4e0b\u306bcomposer\u7d4c\u7531\u3067Drush\u306e8.0.1\u3092\u5165\u308c\u3001\u5b9f\u969b\u52d5\u4f5c\u3059\u308b\u307e\u3067\u3092\u8a18\u3057\u3066\u884c\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nDrupal8\uff20CentOS7\u306e\u69cb\u7bc9\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3001Drupal Advent Calendar 2015\u306e4\u65e5\u76ee\u306e\u8a18\u4e8b\u3068\u3057\u3066\u81ea\u5206\u304c\u6295\u7a3f\u3057\u305f\u8a18\u4e8b\u300cCentOS7\u306b D8\u3092\u5165\u308c\u3066\u307f\u305f\u300d\nhttp://qiita.com/m_46/items/2acd238253e9fb1a45fd\n\u3092\u3054\u53c2\u8003\u9802\u3051\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n\u4ee5\u5f8c\u306f\u3001\u69cb\u7bc9\u304c\u5b8c\u4e86\u3057\u305fCentOS7\uff20Drupal8\u306e\u74b0\u5883\u4e0b\u3067\u306edrush\u5c0e\u5165\u624b\u9806\u3067\u3059\u3002\n\ncomposer\u306e\u5c0e\u5165\n\u307e\u305a\u306fcurl\u7d4c\u7531\u3067composer\u3092\u5c0e\u5165\u3057\u307e\u3059\u3002\n[root@cent7d8 ~]# curl -sS https://getcomposer.org/installer | php\n\u52d5\u4f5c\u78ba\u8a8d\u3092\u3057\u307e\u3059\u3002\n[root@cent7d8 ~]# php composer.phar\ncomposer\u304c\u5c55\u958b\u3055\u308c\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n[root@cent7d8 ~]# mkdir /root/.composer\ncomposer.phar\u3092\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306b\u683c\u7d0d\u3057\u307e\u3059\u3002\n[root@cent7d8 ~]# mv ./composer.phar .composer/\n\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n/root/.bash_profile\nalias composer='php /root/.composer/composer.phar'\n\n\n\u305d\u306e\u5f8c\u3001\u300c.bash_profile\u300d\u306b\u8a18\u8ff0\u3057\u305f\u74b0\u5883\u5909\u6570\u3092\u9069\u7528\u3057\u307e\u3059\u3002\n[root@cent7d8 ~]# source ~/.bash_profile\nhelp\u30b3\u30de\u30f3\u30c9\u7b49\u3092\u5b9f\u884c\u3057\u3066\u307f\u3066\u554f\u984c\u7121\u304f\u5b9f\u884c\u3067\u304d\u305f\u3089composer\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u5b8c\u4e86\u3067\u3059\u3002\n[root@cent7d8 ~]# composer help\n\ncomposer\u7d4c\u7531\u306edrush\u306e\u5c0e\u5165\ncomposer\u7d4c\u7531\u3067drush8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n[root@cent7d8 ~]# composer global require drush/drush:8.*\n\ndrush\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306e\u753b\u9762\u51fa\u529b\nChanged current directory to /root/.composer\n./composer.json has been created\nLoading composer repositories with package information\nUpdating dependencies (including require-dev)\n  - Installing pear/console_table (1.2.1)\n    Downloading: 100%\n\n  - Installing symfony/polyfill-mbstring (v1.0.0)\n    Downloading: 100%\n\n  - Installing symfony/var-dumper (v2.8.0)\n    Downloading: 100%\n\n  - Installing symfony/yaml (v2.7.7)\n    Downloading: 100%\n\n  - Installing jakub-onderka/php-console-color (0.1)\n    Downloading: 100%\n\n  - Installing jakub-onderka/php-console-highlighter (v0.3.2)\n    Downloading: 100%\n\n  - Installing dnoegel/php-xdg-base-dir (0.1)\n    Downloading: 100%\n\n  - Installing nikic/php-parser (v2.0.0)\n    Downloading: 100%\n\n  - Installing symfony/console (v3.0.0)\n    Downloading: 100%\n\n  - Installing psy/psysh (v0.6.1)\n    Downloading: 100%\n\n  - Installing drush/drush (8.0.1)\n    Downloading: 100%\n\npear/console_table suggests installing pear/Console_Color2 (>=0.1.2)\nsymfony/var-dumper suggests installing ext-symfony_debug ()\nsymfony/console suggests installing symfony/event-dispatcher ()\nsymfony/console suggests installing symfony/process ()\nsymfony/console suggests installing psr/log (For using the console logger)\npsy/psysh suggests installing ext-posix (If you have PCNTL, you'll want the POSIX extension as well.)\npsy/psysh suggests installing ext-pdo-sqlite (The doc command requires SQLite to work.)\ndrush/drush suggests installing drush/config-extra (Provides configuration workflow commands, such as config-merge.)\nWriting lock file\nGenerating autoload files\n\n\n\u3053\u3053\u307e\u3067\u753b\u9762\u304c\u51fa\u308c\u3070\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3067\u3059\u3002\n\u6b21\u306bdrush\u306e\u74b0\u5883\u5909\u6570\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\nvi\uff4d\uff1a/root/.bash_profile\nPATH=\"/root/.composer/vendor/bin:$PATH\"\n\n\n\u518d\u5ea6\u74b0\u5883\u5909\u6570\u3092\u9069\u7528\u3057\u307e\u3059\u3002\n[root@cent7d8 ~]# source ~/.bash_profile\ndrush\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\u3092\u3057\u307e\u3059\u30028.0.1\u304ccomposer\u7d4c\u7531\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u51fa\u6765\u308b\u73fe\u6642\u70b9\u3067\u306e\u6700\u65b0\u7248\u3068\u306a\u308a\u307e\u3059\u3002\n\ndrush\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n[root@cent7d8 ~]# drush --version\n Drush Version   :  8.0.1\n\n\n\ndrush\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\n\u65e9\u901fdrush\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n\ndrush\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c\n[root@cent7d8 ~]# drush\nExecute a drush command. Run `drush help [command]` to view command-specific help.  Run `drush topic` to read even more documentation.\n\nGlobal options (see `drush topic core-global-options` for the full list):\n -d, --debug                               Display even more information, including internal messages.\n -h, --help                                This help system.\n -n, --no                                  Assume 'no' as answer to all prompts.\n -r <path>, --root=<path>                  Drupal root directory to use (default: current directory).\n -s, --simulate                            Simulate all relevant actions (don't actually change the system).\n -l <http://example.com:8888>,             URI of the drupal site to use (only needed in multisite environments or when running on an alternate\n --uri=<http://example.com:8888>           port).\n -v, --verbose                             Display extra information about the command.\n -y, --yes                                 Assume 'yes' as answer to all prompts.\n\nCore Drush commands: (core)\n archive-dump (ard,    Backup your code, files, and database into a single file.\n archive-backup, arb)\n archive-restore       Expand a site archive into a Drupal web site.\n (arr)\n browse                Display a link to a given path or open link in a browser.\n core-cli (php)        Open an interactive shell on a Drupal site.\n core-config (conf,    Edit drushrc, site alias, and Drupal settings.php files.\n config)\n core-cron (cron)      Run all cron hooks in all active modules for specified site.\n core-execute (exec,   Execute a shell command. Usually used with a site alias.\n execute)\n core-init (init)      Enrich the bash startup file with completion and aliases. Copy .drushrc file to ~/.drush\n core-quick-drupal     Download, install, serve and login to Drupal with minimal configuration and dependencies.\n (qd, cutie)\n core-requirements     Provides information about things that may be wrong in your Drupal installation, if any.\n (status-report, rq)\n core-rsync (rsync)    Rsync the Drupal tree to/from another server using ssh.\n core-status (status,  Provides a birds-eye view of the current Drupal installation, if any.\n st)\n core-topic (topic)    Read detailed documentation on a given topic.\n drupal-directory      Return the filesystem path for modules/themes and other key folders.\n (dd)\n entity-updates        Apply pending entity schema updates.\n (entup)\n help                  Print this help message. See `drush help help` for more options.\n image-derive (id)     Create an image derivative.\n image-flush (if)      Flush all derived images for a given style.\n php-eval (eval, ev)   Evaluate arbitrary php code after bootstrapping Drupal (if available).\n php-script (scr)      Run php script(s).\n queue-list            Returns a list of all defined queues\n queue-run             Run a specific queue by name\n shell-alias (sha)     Print all known shell alias records.\n site-alias (sa)       Print site alias records for all known site aliases and local sites.\n site-install (si)     Install Drupal along with modules/themes/configuration using the specified install profile.\n site-set (use)        Set a site alias to work on that will persist for the current session.\n site-ssh (ssh)        Connect to a Drupal site's server via SSH for an interactive session or to run a shell command\n twig-compile (twigc)  Compile all Twig template(s).\n updatedb (updb)       Apply any database updates required (as with running update.php).\n updatedb-status       List any pending database updates.\n (updbst)\n variable-delete       Delete a variable.\n (vdel)\n variable-get (vget)   Get a list of some or all site variables and values.\n variable-set (vset)   Set a variable.\n version               Show drush version.\nCache commands: (cache)\n cache-clear (cc)      Clear a specific cache, or all drupal caches.\n cache-get (cg)        Fetch a cached object and display it.\n cache-rebuild (cr,    Rebuild a Drupal 8 site and clear all its caches.\n rebuild)\n cache-set (cs)        Cache an object expressed in JSON or var_export() format.\nConfig commands: (config)\n config-edit (cedit)   Open a config file in a text editor. Edits are imported into active configration after closing editor.\n config-export (cex)   Export configuration to a directory.\n config-get (cget)     Display a config value, or a whole configuration object.\n config-import (cim)   Import config from a config directory.\n config-list (cli)     List config names by prefix.\n config-pull (cpull)   Export and transfer config from one environment to another.\n config-set (cset)     Set config value directly.\nField commands: (field)\n field-clone           Clone a field and all its instances.\n field-create          Create fields and instances. Returns urls for field editing.\n field-delete          Delete a field and its instances.\n field-info            View information about fields, field_types, and widgets.\n field-update          Return URL for field editing web page.\nMake commands: (make)\n make                  Turns a makefile into a working Drupal codebase.\n make-convert          Convert a legacy makefile into YAML format.\n make-generate         Generate a makefile from the current Drupal site.\n (generate-makefile)\n make-lock             Process a makefile and outputs an equivalent makefile with projects version *resolved*. Respects pinned versions.\n make-update           Process a makefile and outputs an equivalent makefile with projects version resolved to latest available.\nProject manager commands: (pm)\n pm-disable (dis)      Disable one or more extensions (modules or themes).\n pm-download (dl)      Download projects from drupal.org or other sources.\n pm-enable (en)        Enable one or more extensions (modules or themes).\n pm-info (pmi)         Show detailed info for one or more extensions (modules or themes).\n pm-list (pml)         Show a list of available extensions (modules and themes).\n pm-projectinfo        Show a report of available projects and their extensions.\n (pmpi)\n pm-refresh (rf)       Refresh update status information.\n pm-releasenotes       Print release notes for given projects.\n (rln)\n pm-releases (rl)      Print release information for given projects.\n pm-uninstall (pmu)    Uninstall one or more modules.\n pm-update (up)        Update Drupal core and contrib projects and apply any pending database updates (Same as pm-updatecode + updatedb).\n pm-updatecode (upc)   Update Drupal core and contrib projects to latest recommended releases.\n pm-updatestatus       Show a report of available minor updates to Drupal core and contrib projects.\n (ups)\nRole commands: (role)\n role-add-perm (rap)   Grant specified permission(s) to a role.\n role-create (rcrt)    Create a new role.\n role-delete (rdel)    Delete a role.\n role-list (rls)       Display a list of all roles defined on the system.  If a role name is provided as an argument, then all of the permissions of\n                       that role will be listed.  If a permission name is provided as an option, then all of the roles that have been granted that\n                       permission will be listed.\n role-remove-perm      Remove specified permission(s) from a role.\n (rmp)\nRunserver commands: (runserver)\n runserver (rs)        Runs PHP's built-in http server for development.\nSQL commands: (sql)\n sql-cli (sqlc)        Open a SQL command-line interface using Drupal's credentials.\n sql-connect           A string for connecting to the DB.\n sql-create            Create a database.\n sql-drop              Drop all tables in a given database.\n sql-dump              Exports the Drupal DB as SQL using mysqldump or equivalent.\n sql-query (sqlq)      Execute a query against a database.\n sql-sanitize          Run sanitization operations on the current database.\n (sqlsan)\n sql-sync              Copies the database contents from a source site to a target site. Transfers the database dump via rsync.\nSearch commands: (search)\n search-index          Index the remaining search items without wiping the index.\n search-reindex        Force the search index to be rebuilt.\n search-status         Show how many items remain to be indexed out of the total.\nState commands: (state)\n state-delete (sdel)   Delete a state value.\n state-get (sget)      Display a state value.\n state-set (sset)      Set a state value.\nUser commands: (user)\n user-add-role (urol)  Add a role to the specified user accounts.\n user-block (ublk)     Block the specified user(s).\n user-cancel (ucan)    Cancel a user account with the specified name.\n user-create (ucrt)    Create a user account with the specified name.\n user-information      Print information about the specified user(s).\n (uinf)\n user-login (uli)      Display a one time login link for the given user account (defaults to uid 1).\n user-password (upwd)  (Re)Set the password for the user account with the specified name.\n user-remove-role      Remove a role from the specified user accounts.\n (urrol)\n user-unblock (uublk)  Unblock the specified user(s).\nWatchdog commands: (watchdog)\n watchdog-delete      Delete watchdog messages.\n (wd-del, wd-delete)\n watchdog-list        Show available message types and severity levels. A prompt will ask for a choice to show watchdog messages.\n (wd-list)\n watchdog-show        Show watchdog messages.\n (wd-show, ws)\n\n\n\ndrush\u306esh\u5316\n\u305d\u306e\u5f8c\u3001\u5b9f\u884c\u3059\u308b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30b3\u30de\u30f3\u30c9\u3092sh\u306b\u66f8\u304d\u51fa\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u3053\u3053\u3067\u306f6\u6642\u9593\u304a\u304d\u306bDrupal\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u30af\u30ea\u30a2\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092sh\u5316\u3057\u3066\u307f\u307e\u3059\u3002\n\n/root/cache-clear.sh\n#!/bin/sh\n\ncd {drupal\u306e\u30eb\u30fc\u30c8\u30d1\u30b9}\ndrush cc all\n\n\nsh\u306e\u5b9f\u884c\u6a29\u9650\u8ffd\u52a0\n[root@cent7d8 ~]# chmod +x /root/cache-clear.sh\n\u4ee5\u4e0a\u3067sh\u306e\u4f5c\u6210\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\nsh\u306ecrontab\u3078\u306e\u767b\u9332\n\u305d\u306e\u5f8ccrontab\u306b\u767b\u9332\u3057\u307e\u3059\u3002\n[root@cent7d8 ~]# crontab -e\n* */6 * * *  sh /root/cache-clear.sh >/dev/null 2>&1\n\n\u4e0a\u8a18\u306e\u8a2d\u5b9a\u30676\u6642\u9593\u9593\u9694\u3067\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30af\u30ea\u30a2\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\n\u305d\u306e\u4ed6\u306edrush\u30b3\u30de\u30f3\u30c9\n\u305d\u306e\u4ed6\u3001\u4ee5\u4e0b\u306f\u4f7f\u7528\u983b\u5ea6\u304c\u9ad8\u3044\u3067\u3042\u308d\u3046\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\n- core \u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\ndrush pm-update\n\n- \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\ndrush archive-dump\n\n- \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30e2\u30fc\u30c9\ndrush vset maintenance_mode 1 --yes\n\n- \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30e2\u30fc\u30c9\u89e3\u9664\ndrush vset maintenance_mode 0 --yes\n\n\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30e2\u30fc\u30c9\u304b\u3089\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3084\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30af\u30ea\u30a2\u307e\u3067\u306f\u81ea\u52d5\u5316\u3092\u5b9f\u88c5\u3059\u308b\u4e8b\u306f\u53ef\u80fd\u3067\u3059\u304c\u3001\u4e8b\u524d\u306b\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092\u300c-d\u300d\u3067\u30c7\u30d0\u30c3\u30b0\u3057\u3066\u307f\u305f\u308a\u300c-s\u300d\u3067\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\u3057\u3066\u307f\u305f\u308a\u300c-v\u300d\u3067\u30ed\u30b0\u51fa\u529b\u3092\u3057\u3066\u5b9f\u884c\u7d50\u679c\u304c\u6b63\u5e38\u7d42\u4e86\u3059\u308b\u306a\u3069\u3092\u78ba\u304b\u3081\u305f\u5f8c\u3067\u81ea\u52d5\u5316\u3092\u884c\u3048\u3070\u3001\u3088\u308a\u7cbe\u5ea6\u306e\u9ad8\u3044\u81ea\u52d5\u5316\u3092\u5b9f\u88c5\u51fa\u6765\u308b\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u8003\u3048\u307e\u3059\u3002\n\n\u307e\u3068\u3081\n\u30b1\u30fc\u30b9\u306b\u3088\u3063\u3066\u306f\u81ea\u52d5\u5316\u306f\u53b3\u3057\u3044\u5834\u5408\u3082\u3042\u308b\u304b\u3082\u77e5\u308c\u307e\u305b\u3093\u304c\u3001\u3053\u308c\u307e\u3067\u624b\u52d5\u3067\u884c\u3063\u3066\u304d\u305f\u51e6\u7406\u3092\u5b9a\u671f\u81ea\u52d5\u5b9f\u884c\u3059\u308b\u4e8b\u3067\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u904b\u55b6\u306e\u81ea\u52d5\u5316\u3092\u5b9f\u73fe\u3055\u305b\u308b\u3068\u3044\u3046\u610f\u5473\u3067\u306f\u3001\u3053\u306e\u6a5f\u80fd\u3092\u6d3b\u7528\u3057\u306a\u3044\u624b\u306f\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u3053\u308c\u306b\u3066\u79c1\u306e\u300cDrupal Advent Calendar 2015\u300d\u306e12\u670814\u65e5\u5206\u306e\u6295\u7a3f\u3092\u7d42\u4e86\u3057\u307e\u3059\u3002\n\u6700\u5f8c\u307e\u3067\u306e\u95b2\u89a7\u3001\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\n\u3053\u306e\u8a18\u4e8b\u306fDrupal Advent Calendar 2015\u306e14\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n11\u670819\u65e5\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u3070\u304b\u308a\u306eDrupal8\u306f\u3001GUI\u3067\u306e\u753b\u9762\u64cd\u4f5c\u3084\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u3082\u5237\u65b0\u3055\u308c\u3066\u3044\u3066\u3001\u3053\u308c\u307e\u3067\u4ee5\u4e0a\u306b\u5229\u4fbf\u6027\u304c\u5411\u4e0a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u307e\u305f\u3001Drupal\u3092CUI\u304b\u3089\u64cd\u4f5c\u3059\u308bDrush\u3082D8\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3067\u5b9f\u884c\u53ef\u80fd\u306aDrush\u3092\u65e2\u306b\u5229\u7528\u3057\u3066\u3001\u30c7\u30fc\u30bf\u7ba1\u7406\u306e\u81ea\u52d5\u5316\u3092\u884c\u3063\u3066\u3044\u308b\u65b9\u3082\u5c45\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u6539\u3081\u3066\u3053\u306e\u8a18\u4e8b\u3067\u306fDrupal8\uff20CentOS7\u306e\u52d5\u4f5c\u74b0\u5883\u4e0b\u306bcomposer\u7d4c\u7531\u3067Drush\u306e8.0.1\u3092\u5165\u308c\u3001\u5b9f\u969b\u52d5\u4f5c\u3059\u308b\u307e\u3067\u3092\u8a18\u3057\u3066\u884c\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nDrupal8\uff20CentOS7\u306e\u69cb\u7bc9\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3001Drupal Advent Calendar 2015\u306e4\u65e5\u76ee\u306e\u8a18\u4e8b\u3068\u3057\u3066\u81ea\u5206\u304c\u6295\u7a3f\u3057\u305f\u8a18\u4e8b\u300cCentOS7\u306b D8\u3092\u5165\u308c\u3066\u307f\u305f\u300d\nhttp://qiita.com/m_46/items/2acd238253e9fb1a45fd\n\u3092\u3054\u53c2\u8003\u9802\u3051\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u4ee5\u5f8c\u306f\u3001\u69cb\u7bc9\u304c\u5b8c\u4e86\u3057\u305fCentOS7\uff20Drupal8\u306e\u74b0\u5883\u4e0b\u3067\u306edrush\u5c0e\u5165\u624b\u9806\u3067\u3059\u3002\n\n#composer\u306e\u5c0e\u5165\n\u307e\u305a\u306fcurl\u7d4c\u7531\u3067composer\u3092\u5c0e\u5165\u3057\u307e\u3059\u3002\n\n`[root@cent7d8 ~]# curl -sS https://getcomposer.org/installer | php`\n\n\u52d5\u4f5c\u78ba\u8a8d\u3092\u3057\u307e\u3059\u3002\n`[root@cent7d8 ~]# php composer.phar`\n\ncomposer\u304c\u5c55\u958b\u3055\u308c\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n`[root@cent7d8 ~]# mkdir /root/.composer`\n\ncomposer.phar\u3092\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306b\u683c\u7d0d\u3057\u307e\u3059\u3002\n`[root@cent7d8 ~]# mv ./composer.phar .composer/`\n\n\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n```vim:/root/.bash_profile\nalias composer='php /root/.composer/composer.phar'\n```\n\n\u305d\u306e\u5f8c\u3001\u300c.bash_profile\u300d\u306b\u8a18\u8ff0\u3057\u305f\u74b0\u5883\u5909\u6570\u3092\u9069\u7528\u3057\u307e\u3059\u3002\n`[root@cent7d8 ~]# source ~/.bash_profile`\n\nhelp\u30b3\u30de\u30f3\u30c9\u7b49\u3092\u5b9f\u884c\u3057\u3066\u307f\u3066\u554f\u984c\u7121\u304f\u5b9f\u884c\u3067\u304d\u305f\u3089composer\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u5b8c\u4e86\u3067\u3059\u3002\n`[root@cent7d8 ~]# composer help`\n\n#composer\u7d4c\u7531\u306edrush\u306e\u5c0e\u5165\ncomposer\u7d4c\u7531\u3067drush8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n`[root@cent7d8 ~]# composer global require drush/drush:8.*`\n\n```vim:drush\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306e\u753b\u9762\u51fa\u529b\nChanged current directory to /root/.composer\n./composer.json has been created\nLoading composer repositories with package information\nUpdating dependencies (including require-dev)\n  - Installing pear/console_table (1.2.1)\n    Downloading: 100%\n\n  - Installing symfony/polyfill-mbstring (v1.0.0)\n    Downloading: 100%\n\n  - Installing symfony/var-dumper (v2.8.0)\n    Downloading: 100%\n\n  - Installing symfony/yaml (v2.7.7)\n    Downloading: 100%\n\n  - Installing jakub-onderka/php-console-color (0.1)\n    Downloading: 100%\n\n  - Installing jakub-onderka/php-console-highlighter (v0.3.2)\n    Downloading: 100%\n\n  - Installing dnoegel/php-xdg-base-dir (0.1)\n    Downloading: 100%\n\n  - Installing nikic/php-parser (v2.0.0)\n    Downloading: 100%\n\n  - Installing symfony/console (v3.0.0)\n    Downloading: 100%\n\n  - Installing psy/psysh (v0.6.1)\n    Downloading: 100%\n\n  - Installing drush/drush (8.0.1)\n    Downloading: 100%\n\npear/console_table suggests installing pear/Console_Color2 (>=0.1.2)\nsymfony/var-dumper suggests installing ext-symfony_debug ()\nsymfony/console suggests installing symfony/event-dispatcher ()\nsymfony/console suggests installing symfony/process ()\nsymfony/console suggests installing psr/log (For using the console logger)\npsy/psysh suggests installing ext-posix (If you have PCNTL, you'll want the POSIX extension as well.)\npsy/psysh suggests installing ext-pdo-sqlite (The doc command requires SQLite to work.)\ndrush/drush suggests installing drush/config-extra (Provides configuration workflow commands, such as config-merge.)\nWriting lock file\nGenerating autoload files\n```\n\n\u3053\u3053\u307e\u3067\u753b\u9762\u304c\u51fa\u308c\u3070\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3067\u3059\u3002\n\n\u6b21\u306bdrush\u306e\u74b0\u5883\u5909\u6570\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\n```vi\uff4d\uff1a/root/.bash_profile\nPATH=\"/root/.composer/vendor/bin:$PATH\"\n```\n\n\u518d\u5ea6\u74b0\u5883\u5909\u6570\u3092\u9069\u7528\u3057\u307e\u3059\u3002\n`[root@cent7d8 ~]# source ~/.bash_profile`\n\ndrush\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\u3092\u3057\u307e\u3059\u30028.0.1\u304ccomposer\u7d4c\u7531\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u51fa\u6765\u308b\u73fe\u6642\u70b9\u3067\u306e\u6700\u65b0\u7248\u3068\u306a\u308a\u307e\u3059\u3002\n\n```vi\uff4d:drush\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n[root@cent7d8 ~]# drush --version\n Drush Version   :  8.0.1\n```\n#drush\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\n\u65e9\u901fdrush\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n\n```vim:drush\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c\n[root@cent7d8 ~]# drush\nExecute a drush command. Run `drush help [command]` to view command-specific help.  Run `drush topic` to read even more documentation.\n\nGlobal options (see `drush topic core-global-options` for the full list):\n -d, --debug                               Display even more information, including internal messages.\n -h, --help                                This help system.\n -n, --no                                  Assume 'no' as answer to all prompts.\n -r <path>, --root=<path>                  Drupal root directory to use (default: current directory).\n -s, --simulate                            Simulate all relevant actions (don't actually change the system).\n -l <http://example.com:8888>,             URI of the drupal site to use (only needed in multisite environments or when running on an alternate\n --uri=<http://example.com:8888>           port).\n -v, --verbose                             Display extra information about the command.\n -y, --yes                                 Assume 'yes' as answer to all prompts.\n\nCore Drush commands: (core)\n archive-dump (ard,    Backup your code, files, and database into a single file.\n archive-backup, arb)\n archive-restore       Expand a site archive into a Drupal web site.\n (arr)\n browse                Display a link to a given path or open link in a browser.\n core-cli (php)        Open an interactive shell on a Drupal site.\n core-config (conf,    Edit drushrc, site alias, and Drupal settings.php files.\n config)\n core-cron (cron)      Run all cron hooks in all active modules for specified site.\n core-execute (exec,   Execute a shell command. Usually used with a site alias.\n execute)\n core-init (init)      Enrich the bash startup file with completion and aliases. Copy .drushrc file to ~/.drush\n core-quick-drupal     Download, install, serve and login to Drupal with minimal configuration and dependencies.\n (qd, cutie)\n core-requirements     Provides information about things that may be wrong in your Drupal installation, if any.\n (status-report, rq)\n core-rsync (rsync)    Rsync the Drupal tree to/from another server using ssh.\n core-status (status,  Provides a birds-eye view of the current Drupal installation, if any.\n st)\n core-topic (topic)    Read detailed documentation on a given topic.\n drupal-directory      Return the filesystem path for modules/themes and other key folders.\n (dd)\n entity-updates        Apply pending entity schema updates.\n (entup)\n help                  Print this help message. See `drush help help` for more options.\n image-derive (id)     Create an image derivative.\n image-flush (if)      Flush all derived images for a given style.\n php-eval (eval, ev)   Evaluate arbitrary php code after bootstrapping Drupal (if available).\n php-script (scr)      Run php script(s).\n queue-list            Returns a list of all defined queues\n queue-run             Run a specific queue by name\n shell-alias (sha)     Print all known shell alias records.\n site-alias (sa)       Print site alias records for all known site aliases and local sites.\n site-install (si)     Install Drupal along with modules/themes/configuration using the specified install profile.\n site-set (use)        Set a site alias to work on that will persist for the current session.\n site-ssh (ssh)        Connect to a Drupal site's server via SSH for an interactive session or to run a shell command\n twig-compile (twigc)  Compile all Twig template(s).\n updatedb (updb)       Apply any database updates required (as with running update.php).\n updatedb-status       List any pending database updates.\n (updbst)\n variable-delete       Delete a variable.\n (vdel)\n variable-get (vget)   Get a list of some or all site variables and values.\n variable-set (vset)   Set a variable.\n version               Show drush version.\nCache commands: (cache)\n cache-clear (cc)      Clear a specific cache, or all drupal caches.\n cache-get (cg)        Fetch a cached object and display it.\n cache-rebuild (cr,    Rebuild a Drupal 8 site and clear all its caches.\n rebuild)\n cache-set (cs)        Cache an object expressed in JSON or var_export() format.\nConfig commands: (config)\n config-edit (cedit)   Open a config file in a text editor. Edits are imported into active configration after closing editor.\n config-export (cex)   Export configuration to a directory.\n config-get (cget)     Display a config value, or a whole configuration object.\n config-import (cim)   Import config from a config directory.\n config-list (cli)     List config names by prefix.\n config-pull (cpull)   Export and transfer config from one environment to another.\n config-set (cset)     Set config value directly.\nField commands: (field)\n field-clone           Clone a field and all its instances.\n field-create          Create fields and instances. Returns urls for field editing.\n field-delete          Delete a field and its instances.\n field-info            View information about fields, field_types, and widgets.\n field-update          Return URL for field editing web page.\nMake commands: (make)\n make                  Turns a makefile into a working Drupal codebase.\n make-convert          Convert a legacy makefile into YAML format.\n make-generate         Generate a makefile from the current Drupal site.\n (generate-makefile)\n make-lock             Process a makefile and outputs an equivalent makefile with projects version *resolved*. Respects pinned versions.\n make-update           Process a makefile and outputs an equivalent makefile with projects version resolved to latest available.\nProject manager commands: (pm)\n pm-disable (dis)      Disable one or more extensions (modules or themes).\n pm-download (dl)      Download projects from drupal.org or other sources.\n pm-enable (en)        Enable one or more extensions (modules or themes).\n pm-info (pmi)         Show detailed info for one or more extensions (modules or themes).\n pm-list (pml)         Show a list of available extensions (modules and themes).\n pm-projectinfo        Show a report of available projects and their extensions.\n (pmpi)\n pm-refresh (rf)       Refresh update status information.\n pm-releasenotes       Print release notes for given projects.\n (rln)\n pm-releases (rl)      Print release information for given projects.\n pm-uninstall (pmu)    Uninstall one or more modules.\n pm-update (up)        Update Drupal core and contrib projects and apply any pending database updates (Same as pm-updatecode + updatedb).\n pm-updatecode (upc)   Update Drupal core and contrib projects to latest recommended releases.\n pm-updatestatus       Show a report of available minor updates to Drupal core and contrib projects.\n (ups)\nRole commands: (role)\n role-add-perm (rap)   Grant specified permission(s) to a role.\n role-create (rcrt)    Create a new role.\n role-delete (rdel)    Delete a role.\n role-list (rls)       Display a list of all roles defined on the system.  If a role name is provided as an argument, then all of the permissions of\n                       that role will be listed.  If a permission name is provided as an option, then all of the roles that have been granted that\n                       permission will be listed.\n role-remove-perm      Remove specified permission(s) from a role.\n (rmp)\nRunserver commands: (runserver)\n runserver (rs)        Runs PHP's built-in http server for development.\nSQL commands: (sql)\n sql-cli (sqlc)        Open a SQL command-line interface using Drupal's credentials.\n sql-connect           A string for connecting to the DB.\n sql-create            Create a database.\n sql-drop              Drop all tables in a given database.\n sql-dump              Exports the Drupal DB as SQL using mysqldump or equivalent.\n sql-query (sqlq)      Execute a query against a database.\n sql-sanitize          Run sanitization operations on the current database.\n (sqlsan)\n sql-sync              Copies the database contents from a source site to a target site. Transfers the database dump via rsync.\nSearch commands: (search)\n search-index          Index the remaining search items without wiping the index.\n search-reindex        Force the search index to be rebuilt.\n search-status         Show how many items remain to be indexed out of the total.\nState commands: (state)\n state-delete (sdel)   Delete a state value.\n state-get (sget)      Display a state value.\n state-set (sset)      Set a state value.\nUser commands: (user)\n user-add-role (urol)  Add a role to the specified user accounts.\n user-block (ublk)     Block the specified user(s).\n user-cancel (ucan)    Cancel a user account with the specified name.\n user-create (ucrt)    Create a user account with the specified name.\n user-information      Print information about the specified user(s).\n (uinf)\n user-login (uli)      Display a one time login link for the given user account (defaults to uid 1).\n user-password (upwd)  (Re)Set the password for the user account with the specified name.\n user-remove-role      Remove a role from the specified user accounts.\n (urrol)\n user-unblock (uublk)  Unblock the specified user(s).\nWatchdog commands: (watchdog)\n watchdog-delete      Delete watchdog messages.\n (wd-del, wd-delete)\n watchdog-list        Show available message types and severity levels. A prompt will ask for a choice to show watchdog messages.\n (wd-list)\n watchdog-show        Show watchdog messages.\n (wd-show, ws)\n```\n\n#drush\u306esh\u5316\n\u305d\u306e\u5f8c\u3001\u5b9f\u884c\u3059\u308b\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30b3\u30de\u30f3\u30c9\u3092sh\u306b\u66f8\u304d\u51fa\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u3053\u3053\u3067\u306f6\u6642\u9593\u304a\u304d\u306bDrupal\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u30af\u30ea\u30a2\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092sh\u5316\u3057\u3066\u307f\u307e\u3059\u3002\n\n```vi\uff4d:/root/cache-clear.sh\n#!/bin/sh\n\ncd {drupal\u306e\u30eb\u30fc\u30c8\u30d1\u30b9}\ndrush cc all\n```\n\nsh\u306e\u5b9f\u884c\u6a29\u9650\u8ffd\u52a0\n`[root@cent7d8 ~]# chmod +x /root/cache-clear.sh`\n\n\u4ee5\u4e0a\u3067sh\u306e\u4f5c\u6210\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n#sh\u306ecrontab\u3078\u306e\u767b\u9332\n\u305d\u306e\u5f8ccrontab\u306b\u767b\u9332\u3057\u307e\u3059\u3002\n\n`[root@cent7d8 ~]# crontab -e`\n\n```vi\uff4d\uff1acrontab\n* */6 * * *  sh /root/cache-clear.sh >/dev/null 2>&1\n```\n\n\u4e0a\u8a18\u306e\u8a2d\u5b9a\u30676\u6642\u9593\u9593\u9694\u3067\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30af\u30ea\u30a2\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\n#\u305d\u306e\u4ed6\u306edrush\u30b3\u30de\u30f3\u30c9\n\u305d\u306e\u4ed6\u3001\u4ee5\u4e0b\u306f\u4f7f\u7528\u983b\u5ea6\u304c\u9ad8\u3044\u3067\u3042\u308d\u3046\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\n\n```\n- core \u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\ndrush pm-update\n\n- \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\ndrush archive-dump\n\n- \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30e2\u30fc\u30c9\ndrush vset maintenance_mode 1 --yes\n\n- \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30e2\u30fc\u30c9\u89e3\u9664\ndrush vset maintenance_mode 0 --yes\n```\n\n\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30e2\u30fc\u30c9\u304b\u3089\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3084\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u30af\u30ea\u30a2\u307e\u3067\u306f\u81ea\u52d5\u5316\u3092\u5b9f\u88c5\u3059\u308b\u4e8b\u306f\u53ef\u80fd\u3067\u3059\u304c\u3001\u4e8b\u524d\u306b\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092\u300c-d\u300d\u3067\u30c7\u30d0\u30c3\u30b0\u3057\u3066\u307f\u305f\u308a\u300c-s\u300d\u3067\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\u3057\u3066\u307f\u305f\u308a\u300c-v\u300d\u3067\u30ed\u30b0\u51fa\u529b\u3092\u3057\u3066\u5b9f\u884c\u7d50\u679c\u304c\u6b63\u5e38\u7d42\u4e86\u3059\u308b\u306a\u3069\u3092\u78ba\u304b\u3081\u305f\u5f8c\u3067\u81ea\u52d5\u5316\u3092\u884c\u3048\u3070\u3001\u3088\u308a\u7cbe\u5ea6\u306e\u9ad8\u3044\u81ea\u52d5\u5316\u3092\u5b9f\u88c5\u51fa\u6765\u308b\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u8003\u3048\u307e\u3059\u3002\n#\u307e\u3068\u3081\n\u30b1\u30fc\u30b9\u306b\u3088\u3063\u3066\u306f\u81ea\u52d5\u5316\u306f\u53b3\u3057\u3044\u5834\u5408\u3082\u3042\u308b\u304b\u3082\u77e5\u308c\u307e\u305b\u3093\u304c\u3001\u3053\u308c\u307e\u3067\u624b\u52d5\u3067\u884c\u3063\u3066\u304d\u305f\u51e6\u7406\u3092\u5b9a\u671f\u81ea\u52d5\u5b9f\u884c\u3059\u308b\u4e8b\u3067\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u904b\u55b6\u306e\u81ea\u52d5\u5316\u3092\u5b9f\u73fe\u3055\u305b\u308b\u3068\u3044\u3046\u610f\u5473\u3067\u306f\u3001\u3053\u306e\u6a5f\u80fd\u3092\u6d3b\u7528\u3057\u306a\u3044\u624b\u306f\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3053\u308c\u306b\u3066\u79c1\u306e\u300cDrupal Advent Calendar 2015\u300d\u306e12\u670814\u65e5\u5206\u306e\u6295\u7a3f\u3092\u7d42\u4e86\u3057\u307e\u3059\u3002\n\n\u6700\u5f8c\u307e\u3067\u306e\u95b2\u89a7\u3001\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\n", "tags": ["Drupal", "centos7", "PHP7"]}