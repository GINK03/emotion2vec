{"tags": ["PostGIS"], "context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u4eca\u56de\u306f\u3001\u30dd\u30ea\u30b4\u30f3\u3054\u3068\u306b\u5e73\u9762\u76f4\u89d2\u5ea7\u6a19\u7cfb\u306e\u7cfb\u756a\u53f7\u3092\u5165\u308c\u3066\u3044\u304d\u307e\u3059\u3002\n\nsyscode\u3092\u5165\u308c\u3066\u3044\u304f\n\nI\u7cfb\nI\u7cfb\u306f\u3001\u9577\u5d0e\u770c\u3068\u9e7f\u5150\u5cf6\u770c\u897f\u90e8\u96e2\u5cf6\u3068\u304c\u5bfe\u8c61\u3067\u3059\u3002\n\u9577\u5d0e\u770c\u306b\u3064\u3044\u3066\u306f\u3001pcode=42\u3067\u7247\u304c\u3064\u304d\u307e\u3059\u3002\nUPDATE g_jpr SET syscode=1\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND g_mncpl.pcode=42;\n\n\n\n\u300c\u9e7f\u5150\u5cf6\u770c\u306e\u3046\u3061\u3001\u5317\u65b9\u5317\u7def32\u5ea6\u5357\u65b9\u5317\u7def27\u5ea6\u897f\u65b9\u6771\u7d4c128\u5ea618\u5206\u6771\u65b9\u6771\u7d4c130\u5ea6\u3092\u5883\u754c\u7dda\u3068\u3059\u308b\u533a\u57df\u5185\uff08\u5944\u7f8e\u7fa4\u5cf6\u306f\u6771\u7d4c130\u5ea613\u5206\u307e\u3067\u3092\u542b\u3080\u3002)\u306b\u3042\u308b\u3059\u3079\u3066\u306e\u5cf6\u3001\u5c0f\u5cf6\u3001\u74b0\u7901\u53ca\u3073\u5ca9\u7901\u300d\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u300c\u5317\u65b9\u5317\u7def32\u5ea6\u5357\u65b9\u5317\u7def27\u5ea6\u897f\u65b9\u6771\u7d4c128\u5ea618\u5206\u6771\u65b9\u6771\u7d4c130\u5ea6\u3092\u5883\u754c\u7dda\u3068\u3059\u308b\u533a\u57df\u300d\u306fPOLYGON((128.3 27, 130 27, 130 32, 128.3 32, 128.3 27))\u3068\u306a\u308a\u307e\u3059\u3002\u3053\u308c\u3092QGIS\u306b\u63cf\u753b\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u9e7f\u5150\u5cf6\u770c\u559c\u754c\u753a\u306e\u5cf6\u304c\u30aa\u30fc\u30d0\u30e9\u30c3\u30d7\u3057\u3066\u3057\u307e\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u304c\u300c\uff08\u5944\u7f8e\u7fa4\u5cf6\u306f\u6771\u7d4c130\u5ea613\u5206\u307e\u3067\u3092\u542b\u3080\u3002)\u300d\u3092\u3064\u3051\u3066\u3044\u308b\u7406\u7531\u306e\u3088\u3046\u3067\u3059\u3002\nPOLYGON((128.3 27, 130.22 27, 130.22 29, 128.3 29, 128.3 27))\u3092\u8868\u793a\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u559c\u754c\u753a\u306e\u5cf6\u304c\u3059\u3063\u307d\u308a\u5165\u308a\u307e\u3057\u305f\u3002\n\u3053\u308c\u3092\u3072\u3068\u3064\u306e\u30dd\u30ea\u30b4\u30f3\u3067\u8868\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nSELECT ST_AsText(\n  ST_Union(\n    'POLYGON((128.3 27, 130 27, 130 32, 128.3 32, 128.3 27))'::GEOMETRY,\n    'POLYGON((128.3 27, 130.22 27, 130.22 29, 128.3 29, 128.3 27))'::GEOMETRY\n  )\n);\n\n                                       st_astext                                       \n---------------------------------------------------------------------------------------\n POLYGON((130 27,128.3 27,128.3 29,128.3 32,130 32,130 29,130.22 29,130.22 27,130 27))\n(1 \u884c)\n\nQGIS\u3067\u8868\u793a\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3053\u308c\u3092I\u7cfb\u9818\u57df\u3068\u3057\u307e\u3059\u3002\n\u884c\u653f\u533a\u57df\u30dd\u30ea\u30b4\u30f3\u306e\u3046\u3061\u3001\u9e7f\u5150\u5cf6\u770c\u3067\u3042\u3063\u3066\u3001I\u7cfb\u9818\u57df\u306e\u5185\u5074\u306b\u3042\u308b\u3082\u306e\u3092I\u7cfb\u3068\u3059\u308bUPDATE\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\nUPDATE g_jpr SET syscode=1\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND g_mncpl.pcode=46\n    AND ST_Covers('SRID=4612;POLYGON((130 27,128.3 27,128.3 29,128.3 32,130 32,130 29,130.22 29,130.22 27,130 27))'::GEOMETRY,geom);\n\n\nII\u7cfb\nII\u7cfb\u306f\u3001\u798f\u5ca1\u3001\u4f50\u8cc0\u3001\u718a\u672c\u3001\u5927\u5206\u3001\u5bae\u5d0e\u3068\u9e7f\u5150\u5cf6\u770c\u306e\u3046\u3061I\u7cfb\u306b\u542b\u307e\u308c\u308b\u3082\u306e\u4ee5\u5916\u3001\u3067\u3059\u3002\n\u307e\u305a\u306f\u3001\u9e7f\u5150\u5cf6\u4ee5\u5916\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u307e\u3059\u3002\nUPDATE g_jpr SET syscode=2\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=40\n    OR g_mncpl.pcode=41\n    OR g_mncpl.pcode=43\n    OR g_mncpl.pcode=44\n    OR g_mncpl.pcode=45\n  );\n\n\u9e7f\u5150\u5cf6\u770c\u306b\u3064\u3044\u3066\u306fI\u7cfb\u3068\u6307\u5b9a\u3055\u308c\u305f\u30dd\u30ea\u30b4\u30f3\u3092\u9664\u3044\u305f\u3082\u306e\u3068\u3057\u307e\u3059\u3002\u3053\u308c\u306e\u5224\u5b9a\u306e\u305f\u3081\u306bsyscode IS NULL\u3092WHERE\u7bc0\u306b\u5165\u308c\u307e\u3059\u3002\nUPDATE g_jpr SET syscode=2\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode\n    AND g_mncpl.pcode=46\n    AND g_jpr.syscode IS NULL;\n\n\nIII\u7cfb\u304b\u3089X\u7cfb (IX\u7cfb\u6771\u4eac\u3092\u9664\u304f)\n\u3053\u306e\u3078\u3093\u306f\u3001\u5e9c\u770c\u5185\u3067\u7cfb\u3092\u307e\u305f\u3050\u3053\u3068\u304c\u306a\u3044\u306e\u3067\u3001\u975e\u5e38\u306b\u697d\u306b\u9032\u3081\u3089\u308c\u307e\u3059\u3002\n-- 3 \u5c71\u53e3 \u5cf6\u6839 \u5e83\u5cf6\nUPDATE g_jpr SET syscode=3\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=32\n    OR g_mncpl.pcode=34\n    OR g_mncpl.pcode=35\n  );\n-- 4 \u9999\u5ddd \u611b\u5a9b \u5fb3\u5cf6 \u9ad8\u77e5\nUPDATE g_jpr SET syscode=4\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=36\n    OR g_mncpl.pcode=37\n    OR g_mncpl.pcode=38\n    OR g_mncpl.pcode=39\n  );\n-- 5 \u5175\u5eab\u770c \u9ce5\u53d6\u770c \u5ca1\u5c71\u770c\nUPDATE g_jpr SET syscode=5\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=28\n    OR g_mncpl.pcode=31\n    OR g_mncpl.pcode=33\n  );\n-- 6 \u4eac\u90fd\u5e9c \u5927\u962a\u5e9c \u798f\u4e95\u770c \u6ecb\u8cc0\u770c \u4e09\u91cd\u770c \u5948\u826f\u770c \u548c\u6b4c\u5c71\u770c\nUPDATE g_jpr SET syscode=6\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=18\n    OR g_mncpl.pcode=24\n    OR g_mncpl.pcode=25\n    OR g_mncpl.pcode=26\n    OR g_mncpl.pcode=27\n    OR g_mncpl.pcode=29\n    OR g_mncpl.pcode=30\n  );\n-- 7 \u77f3\u5ddd\u770c \u5bcc\u5c71\u770c \u5c90\u961c\u770c \u611b\u77e5\u770c\nUPDATE g_jpr SET syscode=7\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=16\n    OR g_mncpl.pcode=17\n    OR g_mncpl.pcode=21\n    OR g_mncpl.pcode=23\n  );\n-- 8 \u65b0\u6f5f\u770c \u9577\u91ce\u770c \u5c71\u68a8\u770c \u9759\u5ca1\u770c\nUPDATE g_jpr SET syscode=8\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=15\n    OR g_mncpl.pcode=20\n    OR g_mncpl.pcode=19\n    OR g_mncpl.pcode=22\n  );\n-- 9 \u798f\u5cf6\u770c \u6803\u6728\u770c \u8328\u57ce\u770c \u57fc\u7389\u770c \u5343\u8449\u770c \u7fa4\u99ac\u770c \u795e\u5948\u5ddd\u770c (\u6771\u4eac\u90fd\u3092\u9664\u304f)\nUPDATE g_jpr SET syscode=9\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=7\n    OR g_mncpl.pcode=8\n    OR g_mncpl.pcode=9\n    OR g_mncpl.pcode=10\n    OR g_mncpl.pcode=11\n    OR g_mncpl.pcode=12\n    OR g_mncpl.pcode=14\n  );\n-- 10 \u9752\u68ee\u770c \u79cb\u7530\u770c \u5c71\u5f62\u770c \u5ca9\u624b\u770c \u5bae\u57ce\u770c\nUPDATE g_jpr SET syscode=10\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=2\n    OR g_mncpl.pcode=3\n    OR g_mncpl.pcode=4\n    OR g_mncpl.pcode=5\n    OR g_mncpl.pcode=6\n  );\n\n\nXI\u7cfb\n\u5317\u6d77\u9053\u306f\u3001\u307f\u3063\u3064\u306e\u7cfb\u306b\u5206\u304b\u308c\u307e\u3059\u3002\n\u307e\u305a\u3001\u6771\u90e8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n-- 11 \u5c0f\u6a3d\u5e02\u3000\u51fd\u9928\u5e02\u3000\u4f0a\u9054\u5e02\u3000\u5317\u6597\u5e02\u3000\u8c4a\u6d66\u753a\u3000\u58ee\u77a5\u753a\u3000\u6d1e\u723a\u6e56\u753a\n-- \u3000\u5317\u6d77\u9053\u5f8c\u5fd7\u7dcf\u5408\u632f\u8208\u5c40\u306e\u6240\u7ba1\u533a\u57df\n-- \u3000\u5317\u6d77\u9053\u6e21\u5cf6\u7dcf\u5408\u632f\u8208\u5c40\u306e\u6240\u7ba1\u5730\u57df\n-- \u3000\u5317\u6d77\u9053\u6a9c\u5c71\u632f\u8208\u5c40\u306e\u6240\u7ba1\u533a\u57df\nUPDATE g_jpr SET syscode=11\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.mcode=1203\n    OR g_mncpl.mcode=1202\n    OR g_mncpl.mcode=1233\n    OR g_mncpl.mcode=1236\n    OR g_mncpl.mcode=1571\n    OR g_mncpl.mcode=1575\n    OR g_mncpl.mcode=1584\n    OR g_mncpl.bname='\u5f8c\u5fd7\u7dcf\u5408\u632f\u8208\u5c40'\n    OR g_mncpl.bname='\u6e21\u5cf6\u7dcf\u5408\u632f\u8208\u5c40'\n    OR g_mncpl.bname='\u6a9c\u5c71\u632f\u8208\u5c40'\n  );\n\n\nXIII\u7cfb\n\u7d9a\u3044\u3066\u3001XII\u7cfb\u3092\u3068\u3070\u3057\u3066\u3001\u897f\u90e8\u306eXIII\u7cfb\u306b\u884c\u304d\u307e\u3059\u3002\n-- 13 \u5317\u898b\u5e02\u3000\u5e2f\u5e83\u5e02\u3000\u91e7\u8def\u5e02\u3000\u7db2\u8d70\u5e02\u3000\u6839\u5ba4\u5e02\u3000\u7f8e\u5e4c\u753a\u3000\u6d25\u5225\u753a\u3000\u659c\u91cc\u753a\u3000\u6e05\u91cc\u753a\n-- \u3000\u5c0f\u6e05\u6c34\u753a\u3000\u8a13\u5b50\u5e9c\u753a\u3000\u7f6e\u6238\u753a\u3000\u4f50\u5442\u9593\u753a\u3000\u5927\u7a7a\u753a\n-- \u3000\u5317\u6d77\u9053\u5341\u52dd\u7dcf\u5408\u632f\u8208\u5c40\u306e\u6240\u7ba1\u533a\u57df\u3000\u5317\u6d77\u9053\u91e7\u8def\u7dcf\u5408\u632f\u8208\u5c40\u306e\u6240\u7ba1\u533a\u57df\u3000\u5317\u6d77\u9053\u6839\u5ba4\u632f\u8208\u5c40\u306e\u6240\u7ba1\u533a\u57df\nUPDATE g_jpr SET syscode=13\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.mcode=1208\n    OR g_mncpl.mcode=1207\n    OR g_mncpl.mcode=1206\n    OR g_mncpl.mcode=1211\n    OR g_mncpl.mcode=1223\n    OR g_mncpl.mcode=1543\n    OR g_mncpl.mcode=1544\n    OR g_mncpl.mcode=1545\n    OR g_mncpl.mcode=1546\n    OR g_mncpl.mcode=1547\n    OR g_mncpl.mcode=1549\n    OR g_mncpl.mcode=1550\n    OR g_mncpl.mcode=1552\n    OR g_mncpl.mcode=1564\n    OR g_mncpl.bname='\u5341\u52dd\u7dcf\u5408\u632f\u8208\u5c40'\n    OR g_mncpl.bname='\u91e7\u8def\u7dcf\u5408\u632f\u8208\u5c40'\n    OR g_mncpl.bname='\u6839\u5ba4\u632f\u8208\u5c40'\n  );\n\n\nXII\u7cfb\u306e\u524d\u306b\nXII\u7cfb\u306f\u3001\u5317\u6d77\u9053\u306e\u3046\u3061XI\u7cfb\u3067\u3082XIII\u7cfb\u3067\u3082\u306a\u3044\u5730\u57df\u304c\u5bfe\u8c61\u3067\u3059\u3002\nXII\u7cfb\u3092\u6307\u5b9a\u3059\u308b\u969b\u306b\u306f\u3001\u5f8c\u8ff0\u3057\u307e\u3059\u304c\u3001\u90fd\u9053\u5e9c\u770c\u30b3\u30fc\u30c9\u304c1\u3067\u3001\u304b\u3064\u3001syscode\u304cNULL\u3067\u3042\u308b\u30ec\u30b3\u30fc\u30c9\u306esyscode\u309212\u306b\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\nXI\u7cfb\u307e\u305f\u306fXIII\u7cfb\u3092\u6307\u5b9a\u3059\u308b\u969b\u306eWHERE\u7bc0\u306b\u9593\u9055\u3044\u304c\u3042\u3063\u3066\u3001\u672c\u6765\u306fXI\u7cfb\u307e\u305f\u306fXIII\u7cfb\u306b\u542b\u307e\u308c\u308b\u3079\u304d\u306a\u306e\u306bsyscode\u304cNULL\u306e\u307e\u307e\u3067\u3042\u308b\u306e\u304c\u6b8b\u3063\u3066\u3044\u308b\u5834\u5408\u306b\u3001XII\u7cfb\u3092\u6307\u5b9a\u3059\u308b\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u672c\u6765\u306f11\u307e\u305f\u306f13\u304c\u5165\u308b\u3079\u304d\u3068\u3053\u308d\u306b12\u304c\u5165\u3063\u3066\u3057\u307e\u3046\u304b\u3082\u77e5\u308c\u307e\u305b\u3093\u3002\n\u3053\u3053\u3067\u5fc5\u305a\u3001QGIS\u306a\u3069\u3067\u78ba\u8a8d\u3057\u3066\u4e0b\u3055\u3044\u3002\n\nQGIS\u3067syscode\u3054\u3068\u306b\u8272\u5206\u3051\u3057\u3066\u898b\u3066\u307f\u3088\u3046\nQGIS\u3067PostGIS\u306e\u30c7\u30fc\u30bf\u3092\u898b\u3066\u307f\u3088\u3046\u3084WMS\u3067\u5730\u57df\u3092\u7d5e\u308a\u8fbc\u3093\u3060\u3046\u3048\u3067PostGIS\u30ec\u30a4\u30e4\u3092\u8868\u793a\u3059\u308b\u3092\u53c2\u8003\u306b\u3001\u5317\u6d77\u9053\u3092\u8868\u793a\u3057\u3001g_jpr\u30ec\u30a4\u30e4\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u3053\u3053\u3067\u3001\u30ec\u30a4\u30e4\u30da\u30a4\u30f3\u306eg_jpr\u30ec\u30a4\u30e4\u3092\u53f3\u30af\u30ea\u30c3\u30af\u3067\u304a\u3055\u3048\u3066\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30e1\u30cb\u30e5\u30fc\u3092\u51fa\u3057\u3001\u300c\u30d7\u30ed\u30d1\u30c6\u30a3\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u300c\u30ec\u30a4\u30e4\u30d7\u30ed\u30d1\u30c6\u30a3\u300d\u30c0\u30a4\u30a2\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u5de6\u5074\u306e\u30bf\u30d6\u3092\u300c\u30b9\u30bf\u30a4\u30eb\u300d\u306b\u3057\u3066\u3001\u5de6\u4e0a\u9685\u306e\u300c\u5171\u901a\u30b7\u30f3\u30dc\u30eb\u300d\u3068\u306a\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u3092\u300c\u5206\u985e\u3055\u308c\u305f\u300d\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n\u65b0\u305f\u306b\u73fe\u308c\u305f\u30c9\u30ed\u30c3\u30d7\u30dc\u30c3\u30af\u30b9\u3067\u8272\u5206\u3051\u8868\u793a\u5bfe\u8c61\u3068\u3059\u308b\u30ab\u30e9\u30e0\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u4eca\u56de\u306fsyscode\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u4f55\u3082\u8003\u3048\u305a\u306b\u753b\u9762\u4e2d\u592e\u304b\u3089\u5de6\u4e0b\u5bc4\u308a\u306b\u3042\u308b\u300c\u5206\u985e\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u753b\u9762\u4e2d\u592e\u306bsyscode\u306e\u5024\u3068\u8272\u3068\u306e\u7d44\u307f\u5408\u308f\u305b\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u300cOK\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u8272\u5206\u3051\u3055\u308c\u305f\u5730\u56f3\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3053\u306e\u4f8b\u3067\u306f\u3001syscode\u3092\u5168\u90e8\u6307\u5b9a\u3057\u305f\u5f8c\u306e\u3082\u306e\u3067\u3059\u306e\u3067\u30011\u304b\u308917\u306b\u5206\u985e\u3055\u308c\u307e\u3059\u304c\u3001\u73fe\u6642\u70b9\u3067\u306f1\u304b\u308911\u306813\u3057\u304b\u5024\u304c\u306a\u304f\u300112\u500b\u306e\u7d44\u307f\u5408\u308f\u305b\u3057\u304b\u5b58\u5728\u3057\u307e\u305b\u3093\u3002\n\u65b0\u305f\u306b\u6307\u5b9a\u3059\u308b\u305f\u3073\u306b\u3001\u3053\u306e\u30bf\u30d6\u3092\u958b\u304d\u300c\u5168\u524a\u9664\u300d\u300c\u5206\u985e\u300d\u3092\u9806\u306b\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u65b0\u305f\u306asyscode\u3082\u542b\u3080\u8272\u4e00\u89a7\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n\nXII\u7cfb\nXI\u7cfb\u3068XIII\u7cfb\u306e\u78ba\u8a8d\u304c\u7d42\u308f\u3063\u305f\u3089\u3001\u5317\u6d77\u9053\u306e\u6700\u5f8c\u3068\u306a\u308b\u3001XII\u7cfb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\nUPDATE g_jpr SET syscode=12\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode\n    AND g_mncpl.pcode=1\n    AND syscode IS NULL;\n\n\nXIV\u7cfb\nXIV\u7cfb\u306f\u6771\u4eac\u90fd\u306e\u3046\u3061\u300c\u5317\u7def28\u5ea6\u304b\u3089\u5357\u3067\u3042\u308a\u3001\u304b\u3064\u6771\u7d4c140\u5ea630\u5206\u304b\u3089\u6771\u3067\u3042\u308a\u6771\u7d4c143\u5ea6\u304b\u3089\u897f\u3067\u3042\u308b\u533a\u57df\u300d\u3067\u3059\u3002\n\u5357\u7aef\u306f\u66f8\u3044\u3066\u3044\u307e\u305b\u3093\u3002\u8a08\u7b97\u3057\u3066\u5357\u7aef\u3092\u51fa\u3057\u3066\u3082\u3044\u3044\u3068\u3044\u3048\u3070\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u308f\u304c\u56fd\u306e\u9818\u571f\u306f\u660e\u3089\u304b\u306b\u5317\u534a\u7403\u306b\u3057\u304b\u306a\u3044\u306e\u3067\u3001\u8d64\u9053\u4e0a\u307e\u3067\u5357\u7aef\u3092\u4f38\u3070\u3057\u3066\u3057\u307e\u3063\u305f\u65b9\u304c\u3001\u8003\u3048\u308b\u5fc5\u8981\u304c\u7121\u3044\u306e\u3067\u697d\u3067\u3059\u3002\n\u9818\u57df\u30dd\u30ea\u30b4\u30f3\u306fPOLYGON((140.5 0, 143 0, 143 28, 140.5 28, 140.5 0))\u3068\u306a\u308a\u307e\u3059\u3002\n\n-- 14 \u6771\u4eac\u90fd \uff0a\u5317\u7def28\u5ea6\u304b\u3089\u5357\u3067\u3042\u308a\u3001\u304b\u3064\u6771\u7d4c140\u5ea630\u5206\u304b\u3089\u6771\u3067\u3042\u308a\u6771\u7d4c143\u5ea6\u304b\u3089\u897f\u3067\u3042\u308b\u533a\u57df\nUPDATE g_jpr SET syscode=14\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND g_mncpl.pcode=13\n    AND ST_Within(g_jpr.geom, 'SRID=4612;POLYGON((140.5 0, 143 0, 143 28, 140.5 28, 140.5 0))'::GEOMETRY);\n\n\nXV\u7cfb\nXV\u7cfb\u306f\u3001\u6c96\u7e04\u770c\u306e\u3046\u3061\u300c\u6771\u7d4c126\u5ea6\u304b\u3089\u6771\u3067\u3042\u308a\u3001\u304b\u3064\u6771\u7d4c130\u5ea6\u304b\u3089\u897f\u3067\u3042\u308b\u533a\u57df\u300d\u3067\u3059\u3002\n\u4eca\u5ea6\u306f\u5317\u7aef\u3082\u3042\u308a\u307e\u305b\u3093\u3002\u5317\u7aef\u306f90\u5ea6\u306b\u3057\u3066\u3001``POLYGON((126 0, 130 0, 130 90, 126 90, 126 0))''\u3068\u3057\u307e\u3059\u3002\n\n\u9e7f\u5150\u5cf6\u770c\u306f\u3053\u306e\u9818\u57df\u306b\u30aa\u30fc\u30d0\u30e9\u30c3\u30d7\u3057\u307e\u3059\u304c\u3001WHERE\u7bc0\u3067\u6c96\u7e04\u770c\u306b\u9650\u5b9a\u3057\u3066\u3044\u308b\u306e\u3067\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n-- 15 \u6c96\u7e04\u770c \u6771\u7d4c126\u5ea6\u304b\u3089\u6771\u3067\u3042\u308a\u3001\u304b\u3064\u6771\u7d4c130\u5ea6\u304b\u3089\u897f\u3067\u3042\u308b\u533a\u57df\nUPDATE g_jpr SET syscode=15\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND g_mncpl.pcode=47\n    AND ST_Within(g_jpr.geom, 'SRID=4612;POLYGON((126 0, 130 0, 130 90, 126 90, 126 0))'::GEOMETRY);\n\n\nXVI\u7cfb\u304a\u3088\u3073XVII\u7cfb\nXVI\u7cfb\u306f\u3001\u6c96\u7e04\u770c\u3067\u300c\u6771\u7d4c126\u5ea6\u304b\u3089\u897f\u3067\u3042\u308b\u5730\u57df\u300d\u3059\u306a\u308f\u3061POLYGON((0 0, 126 0, 126 90, 0 90, 0 0))\u306e\u9818\u57df\u306b\u3042\u308b\u3082\u306e\u3067\u3059\u3002\nXVII\u7cfb\u306f\u3001\u6c96\u7e04\u770c\u3067\u300c\u6771\u7d4c130\u5ea6\u304b\u3089\u6771\u3067\u3042\u308b\u533a\u57df\u300d\u3059\u306a\u308f\u3061POLYGON((130 0, 180 0, 180 90, 130 90, 130 0))\u306e\u9818\u57df\u306b\u3042\u308b\u3082\u306e\u3067\u3059\u3002\n\n\u3084\u306f\u308a\u3001\u4ed6\u306e\u90fd\u9053\u5e9c\u770c\u3068\u3082\u30a4\u30f3\u30bf\u30bb\u30af\u30c8\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u6c96\u7e04\u770c\u306e\u307f\u3068\u8003\u3048\u3001\u7121\u8996\u3057\u307e\u3059\u3002\n-- 16 \u6c96\u7e04\u770c \u6771\u7d4c126\u5ea6\u304b\u3089\u897f\u3067\u3042\u308b\u533a\u57df\nUPDATE g_jpr SET syscode=16 WHERE pcode=47 AND ST_Covers('SRID=4612;POLYGON((0 0, 126 0, 126 90, 0 90, 0 0))'::GEOMETRY,the_geom);\n-- 17 \u6c96\u7e04\u770c \u6771\u7d4c130\u5ea6\u304b\u3089\u6771\u3067\u3042\u308b\u533a\u57df\nUPDATE g_jpr SET syscode=17 WHERE pcode=47 AND ST_Covers('SRID=4612;POLYGON((130 0, 180 0, 180 90, 130 90, 130 0))'::GEOMETRY, the_geom);\n\n\nXVIII\u7cfb\u3068XIX\u7cfb\nXVIII\u7cfb\u306f\u3001\u6771\u4eac\u90fd\u306e\u3046\u3061\u300c\u5317\u7def28\u5ea6\u304b\u3089\u5357\u3067\u3042\u308a\u3001\u304b\u3064\u6771\u7d4c140\u5ea630\u5206\u304b\u3089\u897f\u3067\u3042\u308b\u533a\u57df\u300d\u3068\u306a\u3063\u3066\u3044\u308b\u5730\u57df\u3067\u3001XIX\u7cfb\u306f\u3001\u6771\u4eac\u90fd\u306e\u3046\u3061\u300c\u5317\u7def28\u5ea6\u304b\u3089\u5357\u3067\u3042\u308a\u3001\u304b\u3064\u6771\u7d4c143\u5ea6\u304b\u3089\u6771\u3067\u3042\u308b\u533a\u57df\u300d\u3067\u3059\u3002\n\u9818\u57df\u30dd\u30ea\u30b4\u30f3\u306f\u3001XVIII\u7cfb\u306b\u3064\u3044\u3066\u306fPOLYGON((0 0, 140.5 0, 140.5 28, 0 28, 0 0))\u3001XIX\u7cfb\u306b\u3064\u3044\u3066\u306f\u3001``POLYGON((143 0, 170 0, 170 28, 143 28, 143 0))''\u3068\u306a\u308a\u307e\u3059\u3002\n-- 18 \u6771\u4eac\u90fd \u5317\u7def28\u5ea6\u304b\u3089\u5357\u3067\u3042\u308a\u3001\u304b\u3064\u6771\u7d4c140\u5ea630\u5206\u304b\u3089\u897f\u3067\u3042\u308b\u533a\u57df\nUPDATE g_jpr SET syscode=18\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND g_mncpl.pcode=13\n    AND ST_Within(g_jpr.geom, 'SRID=4612;POLYGON((0 0, 140.5 0, 140.5 28, 0 28, 0 0))'::GEOMETRY);\n-- 19 \u6771\u4eac\u90fd \u5317\u7def28\u5ea6\u304b\u3089\u5357\u3067\u3042\u308a\u3001\u304b\u3064\u6771\u7d4c143\u5ea6\u304b\u3089\u6771\u3067\u3042\u308b\u533a\u57df\nUPDATE g_jpr SET syscode=19\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND g_mncpl.pcode=13\n    AND ST_Within(g_jpr.geom, 'SRID=4612;POLYGON((143 0, 170 0, 170 28, 143 28, 143 0))'::GEOMETRY);\n\n\nIX\u7cfb\n\u6771\u4eac\u90fd\u306e\u3046\u3061\u3001XIV\u7cfb\u3001XVIII\u7cfb\u307e\u305f\u306fXIX\u7cfb\u306e\u3044\u305a\u308c\u306b\u3082\u5c5e\u3055\u306a\u3044\u5730\u57df\u3067\u3059\u3002\nUPDATE g_jpr SET syscode=9\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode\n    AND g_mncpl.pcode=13\n    AND syscode IS NULL;\n\n\n\u3060\u3044\u305f\u3044\u898b\u308b\n\u307e\u305a\u306f\u3001syscode\u304cNULL\u306b\u306a\u3063\u3066\u3044\u308b\u30ec\u30b3\u30fc\u30c9\u304c\u306a\u3044\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\ndb=# SELECT mcode, syscode, geom FROM g_jpr WHERE syscode IS NULL;\n mcode | syscode | geom \n-------+---------+------\n(0 \u884c)\n\n\u3042\u3068\u3001\u304a\u304b\u3057\u3044syscode\u304c\u4ed8\u3044\u3066\u3044\u306a\u3044\u304b\u3092\u307f\u307e\u3059\u304c\u3001\u300c\u3056\u3063\u304f\u308a\u300d\u3067\u3044\u304d\u307e\u3057\u3087\u3046\u3002\nCREATE TABLE w_syscode (\n  gid SERIAL PRIMARY KEY,\n  syscode INT UNIQUE,\n  geom GEOMETRY(POLYGON,4612)\n);\nCREATE INDEX ix_w_syscode_geom ON w_syscode USING GiST (geom);\n\nINSERT INTO w_syscode(syscode, geom)\nSELECT\n  syscode,\n  ST_ConvexHull(ST_Collect(geom))\nFROM g_jpr GROUP BY syscode;\n\nST_ConvxHull\u306f\u3001\u51f8\u5305\u3092\u751f\u6210\u3059\u308b\u95a2\u6570\u3067\u3059\u3002\u51f8\u5305\u306f\u3001\u5f15\u6570\u3067\u4e0e\u3048\u305f\u30b8\u30aa\u30e1\u30c8\u30ea\u3092\u5305\u542b\u3059\u308b\u3001\u6700\u5c0f\u306e\u3001\u51f8\u306e\u30dd\u30ea\u30b4\u30f3\u3067\u3059\u3002\u4e0a\u306e\u4f8b\u3060\u3068\u3001syscode\u3054\u3068\u306b\u307e\u3068\u3081\u3089\u308c\u305f\u30de\u30eb\u30c1\u30dd\u30ea\u30b4\u30f3\u306e\u51f8\u5305\u3068\u306a\u308a\u307e\u3059\u3002\n\u751f\u6210\u306b\u306f\u3042\u307e\u308a\u6642\u9593\u304c\u304b\u304b\u3089\u306a\u3044\u3067\u3059\u3057\u3001\u30ce\u30fc\u30c9\u6570\u304c\u5927\u5e45\u306b\u6e1b\u308b\u306e\u3067\u8868\u793a\u3055\u305b\u308b\u969b\u306b\u6642\u9593\u304c\u5927\u5e45\u77ed\u7e2e\u3055\u308c\u307e\u3059\u3002\n\u4e0a\u306e\u4f8b\u3092QGIS\u3067\u8868\u793a\u3059\u308b\u3068\u3001\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u6642\u9593\u304c\u304b\u304b\u308b\u3067\u3059\u304c\u3001\u5e73\u9762\u76f4\u89d2\u5ea7\u6a19\u7cfb\u306e\u7cfb\u756a\u53f7\u3054\u3068\u306e\u30dd\u30ea\u30b4\u30f3\u3092ST_Union\u3067\u4f5c\u3063\u3066\u307f\u305f\u3089\u3001\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\n\u304a\u308f\u308a\u306b\n\u30dd\u30ea\u30b4\u30f3\u3054\u3068\u306b\u5e73\u9762\u76f4\u89d2\u5ea7\u6a19\u7cfb\u306e\u7cfb\u756a\u53f7\u3092\u5165\u308c\u3066\u3044\u304d\u307e\u3057\u305f\u3002\n\u305d\u306e\u969b\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u30b8\u30aa\u30e1\u30c8\u30ea\u3068WKT\u3067\u751f\u6210\u3057\u305f\u30b8\u30aa\u30e1\u30c8\u30ea\u3068\u3092''ST_Within''\u3067\u7a7a\u9593\u95a2\u4fc2\u3092\u30c6\u30b9\u30c8\u3057\u305f\u308a\u3001QGIS\u3067\u8272\u5206\u3051\u8868\u793a\u3092\u3057\u3066\u78ba\u8a8d\u3057\u306a\u304c\u3089\u9032\u3081\u305f\u308a\u3001PostGIS\u3068\u76f4\u63a5\u95a2\u4fc2\u306a\u3044\u64cd\u4f5c\u3092\u3057\u305f\u308a\u3068\u3001\u3042\u308c\u3053\u308c\u4f7f\u3044\u306a\u304c\u3089\u9032\u3081\u307e\u3057\u305f\u3002\n\u3053\u306e\u30c7\u30fc\u30bf\u306b\u4f4d\u7f6e\u53c2\u7167\u60c5\u5831\u3092\u9023\u7d50\u3055\u305b\u308b\u306e\u306f\u3001\u4eca\u56de\u3088\u308a\u3082\u9762\u5012\u3067\u3059\u3057\u3001PostgreSQL/PostGIS\u304b\u3089\u5916\u308c\u3066\u3044\u304d\u307e\u3059\u3002\u79c1\u306e\u5834\u5408\u306fPerl\u3092\u3088\u304f\u4f7f\u3044\u307e\u3059\u3002\u6c17\u304c\u5411\u3044\u305f\u3089\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\n\n\u51fa\u5178\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001\u56fd\u571f\u6570\u5024\u60c5\u5831\uff08\u884c\u653f\u533a\u57df\uff09\u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\n\u307e\u305f\u3001\u5e73\u9762\u76f4\u89d2\u5ea7\u6a19\u7cfb\u306e\u9069\u7528\u7bc4\u56f2\u3092\u793a\u3059\u753b\u50cf\u306e\u4f5c\u6210\u306b\u969b\u3057\u3066\u306f\u3001\u57fa\u76e4\u5730\u56f3\u60c5\u5831\u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\n# \u306f\u3058\u3081\u306b\n\n\u4eca\u56de\u306f\u3001\u30dd\u30ea\u30b4\u30f3\u3054\u3068\u306b\u5e73\u9762\u76f4\u89d2\u5ea7\u6a19\u7cfb\u306e\u7cfb\u756a\u53f7\u3092\u5165\u308c\u3066\u3044\u304d\u307e\u3059\u3002\n\n# syscode\u3092\u5165\u308c\u3066\u3044\u304f\n\n## I\u7cfb\n\nI\u7cfb\u306f\u3001\u9577\u5d0e\u770c\u3068\u9e7f\u5150\u5cf6\u770c\u897f\u90e8\u96e2\u5cf6\u3068\u304c\u5bfe\u8c61\u3067\u3059\u3002\n\n\u9577\u5d0e\u770c\u306b\u3064\u3044\u3066\u306f\u3001pcode=42\u3067\u7247\u304c\u3064\u304d\u307e\u3059\u3002\n\n```\nUPDATE g_jpr SET syscode=1\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND g_mncpl.pcode=42;\n\n\n```\n\n\u300c\u9e7f\u5150\u5cf6\u770c\u306e\u3046\u3061\u3001\u5317\u65b9\u5317\u7def32\u5ea6\u5357\u65b9\u5317\u7def27\u5ea6\u897f\u65b9\u6771\u7d4c128\u5ea618\u5206\u6771\u65b9\u6771\u7d4c130\u5ea6\u3092\u5883\u754c\u7dda\u3068\u3059\u308b\u533a\u57df\u5185\uff08\u5944\u7f8e\u7fa4\u5cf6\u306f\u6771\u7d4c130\u5ea613\u5206\u307e\u3067\u3092\u542b\u3080\u3002)\u306b\u3042\u308b\u3059\u3079\u3066\u306e\u5cf6\u3001\u5c0f\u5cf6\u3001\u74b0\u7901\u53ca\u3073\u5ca9\u7901\u300d\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u300c\u5317\u65b9\u5317\u7def32\u5ea6\u5357\u65b9\u5317\u7def27\u5ea6\u897f\u65b9\u6771\u7d4c128\u5ea618\u5206\u6771\u65b9\u6771\u7d4c130\u5ea6\u3092\u5883\u754c\u7dda\u3068\u3059\u308b\u533a\u57df\u300d\u306f``POLYGON((128.3 27, 130 27, 130 32, 128.3 32, 128.3 27))``\u3068\u306a\u308a\u307e\u3059\u3002\u3053\u308c\u3092QGIS\u306b\u63cf\u753b\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n![I\u7cfb\u9818\u57df\u306e\u4e00\u90e8](https://qiita-image-store.s3.amazonaws.com/0/51701/59ecf3ba-afc9-49f2-2fd2-3222b7de5c06.png)\n\n\u9e7f\u5150\u5cf6\u770c\u559c\u754c\u753a\u306e\u5cf6\u304c\u30aa\u30fc\u30d0\u30e9\u30c3\u30d7\u3057\u3066\u3057\u307e\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u304c\u300c\uff08\u5944\u7f8e\u7fa4\u5cf6\u306f\u6771\u7d4c130\u5ea613\u5206\u307e\u3067\u3092\u542b\u3080\u3002)\u300d\u3092\u3064\u3051\u3066\u3044\u308b\u7406\u7531\u306e\u3088\u3046\u3067\u3059\u3002\n\n``POLYGON((128.3 27, 130.22 27, 130.22 29, 128.3 29, 128.3 27))``\u3092\u8868\u793a\u3057\u3066\u307f\u307e\u3059\u3002\n\n![\u5944\u7f8e\u7fa4\u5cf6\u306e\u9818\u57df](https://qiita-image-store.s3.amazonaws.com/0/51701/01d2a36e-4c23-8617-ab1e-b9672eec80d8.png)\n\n\u559c\u754c\u753a\u306e\u5cf6\u304c\u3059\u3063\u307d\u308a\u5165\u308a\u307e\u3057\u305f\u3002\n\n\u3053\u308c\u3092\u3072\u3068\u3064\u306e\u30dd\u30ea\u30b4\u30f3\u3067\u8868\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```\nSELECT ST_AsText(\n  ST_Union(\n    'POLYGON((128.3 27, 130 27, 130 32, 128.3 32, 128.3 27))'::GEOMETRY,\n    'POLYGON((128.3 27, 130.22 27, 130.22 29, 128.3 29, 128.3 27))'::GEOMETRY\n  )\n);\n\n                                       st_astext                                       \n---------------------------------------------------------------------------------------\n POLYGON((130 27,128.3 27,128.3 29,128.3 32,130 32,130 29,130.22 29,130.22 27,130 27))\n(1 \u884c)\n```\n\nQGIS\u3067\u8868\u793a\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n![I\u7cfb\u306e\u9818\u57df](https://qiita-image-store.s3.amazonaws.com/0/51701/649b2077-ddec-9555-8ea8-cf00ae4debff.png)\n\n\u3053\u308c\u3092I\u7cfb\u9818\u57df\u3068\u3057\u307e\u3059\u3002\n\n\u884c\u653f\u533a\u57df\u30dd\u30ea\u30b4\u30f3\u306e\u3046\u3061\u3001\u9e7f\u5150\u5cf6\u770c\u3067\u3042\u3063\u3066\u3001I\u7cfb\u9818\u57df\u306e\u5185\u5074\u306b\u3042\u308b\u3082\u306e\u3092I\u7cfb\u3068\u3059\u308b``UPDATE``\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\nUPDATE g_jpr SET syscode=1\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND g_mncpl.pcode=46\n    AND ST_Covers('SRID=4612;POLYGON((130 27,128.3 27,128.3 29,128.3 32,130 32,130 29,130.22 29,130.22 27,130 27))'::GEOMETRY,geom);\n```\n\n## II\u7cfb\nII\u7cfb\u306f\u3001\u798f\u5ca1\u3001\u4f50\u8cc0\u3001\u718a\u672c\u3001\u5927\u5206\u3001\u5bae\u5d0e\u3068\u9e7f\u5150\u5cf6\u770c\u306e\u3046\u3061I\u7cfb\u306b\u542b\u307e\u308c\u308b\u3082\u306e\u4ee5\u5916\u3001\u3067\u3059\u3002\n\n\u307e\u305a\u306f\u3001\u9e7f\u5150\u5cf6\u4ee5\u5916\u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u307e\u3059\u3002\n\n```\nUPDATE g_jpr SET syscode=2\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=40\n    OR g_mncpl.pcode=41\n    OR g_mncpl.pcode=43\n    OR g_mncpl.pcode=44\n    OR g_mncpl.pcode=45\n  );\n```\n\n\u9e7f\u5150\u5cf6\u770c\u306b\u3064\u3044\u3066\u306fI\u7cfb\u3068\u6307\u5b9a\u3055\u308c\u305f\u30dd\u30ea\u30b4\u30f3\u3092\u9664\u3044\u305f\u3082\u306e\u3068\u3057\u307e\u3059\u3002\u3053\u308c\u306e\u5224\u5b9a\u306e\u305f\u3081\u306b``syscode IS NULL``\u3092WHERE\u7bc0\u306b\u5165\u308c\u307e\u3059\u3002\n\n```\nUPDATE g_jpr SET syscode=2\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode\n    AND g_mncpl.pcode=46\n    AND g_jpr.syscode IS NULL;\n```\n\n## III\u7cfb\u304b\u3089X\u7cfb (IX\u7cfb\u6771\u4eac\u3092\u9664\u304f)\n\n\u3053\u306e\u3078\u3093\u306f\u3001\u5e9c\u770c\u5185\u3067\u7cfb\u3092\u307e\u305f\u3050\u3053\u3068\u304c\u306a\u3044\u306e\u3067\u3001\u975e\u5e38\u306b\u697d\u306b\u9032\u3081\u3089\u308c\u307e\u3059\u3002\n\n```\n-- 3 \u5c71\u53e3 \u5cf6\u6839 \u5e83\u5cf6\nUPDATE g_jpr SET syscode=3\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=32\n    OR g_mncpl.pcode=34\n    OR g_mncpl.pcode=35\n  );\n-- 4 \u9999\u5ddd \u611b\u5a9b \u5fb3\u5cf6 \u9ad8\u77e5\nUPDATE g_jpr SET syscode=4\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=36\n    OR g_mncpl.pcode=37\n    OR g_mncpl.pcode=38\n    OR g_mncpl.pcode=39\n  );\n-- 5 \u5175\u5eab\u770c \u9ce5\u53d6\u770c \u5ca1\u5c71\u770c\nUPDATE g_jpr SET syscode=5\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=28\n    OR g_mncpl.pcode=31\n    OR g_mncpl.pcode=33\n  );\n-- 6 \u4eac\u90fd\u5e9c \u5927\u962a\u5e9c \u798f\u4e95\u770c \u6ecb\u8cc0\u770c \u4e09\u91cd\u770c \u5948\u826f\u770c \u548c\u6b4c\u5c71\u770c\nUPDATE g_jpr SET syscode=6\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=18\n    OR g_mncpl.pcode=24\n    OR g_mncpl.pcode=25\n    OR g_mncpl.pcode=26\n    OR g_mncpl.pcode=27\n    OR g_mncpl.pcode=29\n    OR g_mncpl.pcode=30\n  );\n-- 7 \u77f3\u5ddd\u770c \u5bcc\u5c71\u770c \u5c90\u961c\u770c \u611b\u77e5\u770c\nUPDATE g_jpr SET syscode=7\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=16\n    OR g_mncpl.pcode=17\n    OR g_mncpl.pcode=21\n    OR g_mncpl.pcode=23\n  );\n-- 8 \u65b0\u6f5f\u770c \u9577\u91ce\u770c \u5c71\u68a8\u770c \u9759\u5ca1\u770c\nUPDATE g_jpr SET syscode=8\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=15\n    OR g_mncpl.pcode=20\n    OR g_mncpl.pcode=19\n    OR g_mncpl.pcode=22\n  );\n-- 9 \u798f\u5cf6\u770c \u6803\u6728\u770c \u8328\u57ce\u770c \u57fc\u7389\u770c \u5343\u8449\u770c \u7fa4\u99ac\u770c \u795e\u5948\u5ddd\u770c (\u6771\u4eac\u90fd\u3092\u9664\u304f)\nUPDATE g_jpr SET syscode=9\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=7\n    OR g_mncpl.pcode=8\n    OR g_mncpl.pcode=9\n    OR g_mncpl.pcode=10\n    OR g_mncpl.pcode=11\n    OR g_mncpl.pcode=12\n    OR g_mncpl.pcode=14\n  );\n-- 10 \u9752\u68ee\u770c \u79cb\u7530\u770c \u5c71\u5f62\u770c \u5ca9\u624b\u770c \u5bae\u57ce\u770c\nUPDATE g_jpr SET syscode=10\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.pcode=2\n    OR g_mncpl.pcode=3\n    OR g_mncpl.pcode=4\n    OR g_mncpl.pcode=5\n    OR g_mncpl.pcode=6\n  );\n```\n\n## XI\u7cfb\n\n\u5317\u6d77\u9053\u306f\u3001\u307f\u3063\u3064\u306e\u7cfb\u306b\u5206\u304b\u308c\u307e\u3059\u3002\n\n\u307e\u305a\u3001\u6771\u90e8\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n-- 11 \u5c0f\u6a3d\u5e02\u3000\u51fd\u9928\u5e02\u3000\u4f0a\u9054\u5e02\u3000\u5317\u6597\u5e02\u3000\u8c4a\u6d66\u753a\u3000\u58ee\u77a5\u753a\u3000\u6d1e\u723a\u6e56\u753a\n-- \u3000\u5317\u6d77\u9053\u5f8c\u5fd7\u7dcf\u5408\u632f\u8208\u5c40\u306e\u6240\u7ba1\u533a\u57df\n-- \u3000\u5317\u6d77\u9053\u6e21\u5cf6\u7dcf\u5408\u632f\u8208\u5c40\u306e\u6240\u7ba1\u5730\u57df\n-- \u3000\u5317\u6d77\u9053\u6a9c\u5c71\u632f\u8208\u5c40\u306e\u6240\u7ba1\u533a\u57df\nUPDATE g_jpr SET syscode=11\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.mcode=1203\n    OR g_mncpl.mcode=1202\n    OR g_mncpl.mcode=1233\n    OR g_mncpl.mcode=1236\n    OR g_mncpl.mcode=1571\n    OR g_mncpl.mcode=1575\n    OR g_mncpl.mcode=1584\n    OR g_mncpl.bname='\u5f8c\u5fd7\u7dcf\u5408\u632f\u8208\u5c40'\n    OR g_mncpl.bname='\u6e21\u5cf6\u7dcf\u5408\u632f\u8208\u5c40'\n    OR g_mncpl.bname='\u6a9c\u5c71\u632f\u8208\u5c40'\n  );\n```\n\n## XIII\u7cfb\n\n\u7d9a\u3044\u3066\u3001XII\u7cfb\u3092\u3068\u3070\u3057\u3066\u3001\u897f\u90e8\u306eXIII\u7cfb\u306b\u884c\u304d\u307e\u3059\u3002\n\n```\n-- 13 \u5317\u898b\u5e02\u3000\u5e2f\u5e83\u5e02\u3000\u91e7\u8def\u5e02\u3000\u7db2\u8d70\u5e02\u3000\u6839\u5ba4\u5e02\u3000\u7f8e\u5e4c\u753a\u3000\u6d25\u5225\u753a\u3000\u659c\u91cc\u753a\u3000\u6e05\u91cc\u753a\n-- \u3000\u5c0f\u6e05\u6c34\u753a\u3000\u8a13\u5b50\u5e9c\u753a\u3000\u7f6e\u6238\u753a\u3000\u4f50\u5442\u9593\u753a\u3000\u5927\u7a7a\u753a\n-- \u3000\u5317\u6d77\u9053\u5341\u52dd\u7dcf\u5408\u632f\u8208\u5c40\u306e\u6240\u7ba1\u533a\u57df\u3000\u5317\u6d77\u9053\u91e7\u8def\u7dcf\u5408\u632f\u8208\u5c40\u306e\u6240\u7ba1\u533a\u57df\u3000\u5317\u6d77\u9053\u6839\u5ba4\u632f\u8208\u5c40\u306e\u6240\u7ba1\u533a\u57df\nUPDATE g_jpr SET syscode=13\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND (\n    g_mncpl.mcode=1208\n    OR g_mncpl.mcode=1207\n    OR g_mncpl.mcode=1206\n    OR g_mncpl.mcode=1211\n    OR g_mncpl.mcode=1223\n    OR g_mncpl.mcode=1543\n    OR g_mncpl.mcode=1544\n    OR g_mncpl.mcode=1545\n    OR g_mncpl.mcode=1546\n    OR g_mncpl.mcode=1547\n    OR g_mncpl.mcode=1549\n    OR g_mncpl.mcode=1550\n    OR g_mncpl.mcode=1552\n    OR g_mncpl.mcode=1564\n    OR g_mncpl.bname='\u5341\u52dd\u7dcf\u5408\u632f\u8208\u5c40'\n    OR g_mncpl.bname='\u91e7\u8def\u7dcf\u5408\u632f\u8208\u5c40'\n    OR g_mncpl.bname='\u6839\u5ba4\u632f\u8208\u5c40'\n  );\n```\n\n## XII\u7cfb\u306e\u524d\u306b\n\nXII\u7cfb\u306f\u3001\u5317\u6d77\u9053\u306e\u3046\u3061XI\u7cfb\u3067\u3082XIII\u7cfb\u3067\u3082\u306a\u3044\u5730\u57df\u304c\u5bfe\u8c61\u3067\u3059\u3002\n\nXII\u7cfb\u3092\u6307\u5b9a\u3059\u308b\u969b\u306b\u306f\u3001\u5f8c\u8ff0\u3057\u307e\u3059\u304c\u3001\u90fd\u9053\u5e9c\u770c\u30b3\u30fc\u30c9\u304c1\u3067\u3001\u304b\u3064\u3001syscode\u304cNULL\u3067\u3042\u308b\u30ec\u30b3\u30fc\u30c9\u306esyscode\u309212\u306b\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nXI\u7cfb\u307e\u305f\u306fXIII\u7cfb\u3092\u6307\u5b9a\u3059\u308b\u969b\u306e``WHERE``\u7bc0\u306b\u9593\u9055\u3044\u304c\u3042\u3063\u3066\u3001\u672c\u6765\u306fXI\u7cfb\u307e\u305f\u306fXIII\u7cfb\u306b\u542b\u307e\u308c\u308b\u3079\u304d\u306a\u306e\u306bsyscode\u304cNULL\u306e\u307e\u307e\u3067\u3042\u308b\u306e\u304c\u6b8b\u3063\u3066\u3044\u308b\u5834\u5408\u306b\u3001XII\u7cfb\u3092\u6307\u5b9a\u3059\u308b\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u672c\u6765\u306f11\u307e\u305f\u306f13\u304c\u5165\u308b\u3079\u304d\u3068\u3053\u308d\u306b12\u304c\u5165\u3063\u3066\u3057\u307e\u3046\u304b\u3082\u77e5\u308c\u307e\u305b\u3093\u3002\n\n\u3053\u3053\u3067\u5fc5\u305a\u3001QGIS\u306a\u3069\u3067\u78ba\u8a8d\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n### QGIS\u3067syscode\u3054\u3068\u306b\u8272\u5206\u3051\u3057\u3066\u898b\u3066\u307f\u3088\u3046\n\n[QGIS\u3067PostGIS\u306e\u30c7\u30fc\u30bf\u3092\u898b\u3066\u307f\u3088\u3046](http://qiita.com/yellow_73/items/0845451b792f4bc33e90)\u3084[WMS\u3067\u5730\u57df\u3092\u7d5e\u308a\u8fbc\u3093\u3060\u3046\u3048\u3067PostGIS\u30ec\u30a4\u30e4\u3092\u8868\u793a\u3059\u308b](http://qiita.com/yellow_73/items/665e37bad38633e56b9a)\u3092\u53c2\u8003\u306b\u3001\u5317\u6d77\u9053\u3092\u8868\u793a\u3057\u3001g_jpr\u30ec\u30a4\u30e4\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u3001\u30ec\u30a4\u30e4\u30da\u30a4\u30f3\u306eg_jpr\u30ec\u30a4\u30e4\u3092\u53f3\u30af\u30ea\u30c3\u30af\u3067\u304a\u3055\u3048\u3066\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30e1\u30cb\u30e5\u30fc\u3092\u51fa\u3057\u3001\u300c\u30d7\u30ed\u30d1\u30c6\u30a3\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n![g_jpr\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30e1\u30cb\u30e5\u30fc\u3092\u51fa\u3057\u3066\u3044\u308b\u3068\u3053\u308d](https://qiita-image-store.s3.amazonaws.com/0/51701/8790e505-3124-95ab-32ea-9085c5327941.png)\n\n\u300c\u30ec\u30a4\u30e4\u30d7\u30ed\u30d1\u30c6\u30a3\u300d\u30c0\u30a4\u30a2\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u5de6\u5074\u306e\u30bf\u30d6\u3092\u300c\u30b9\u30bf\u30a4\u30eb\u300d\u306b\u3057\u3066\u3001\u5de6\u4e0a\u9685\u306e\u300c\u5171\u901a\u30b7\u30f3\u30dc\u30eb\u300d\u3068\u306a\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u3092\u300c\u5206\u985e\u3055\u308c\u305f\u300d\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n![\u300c\u5206\u985e\u3055\u308c\u305f\u300d\u3092\u9078\u629e\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u3068\u3053\u308d](https://qiita-image-store.s3.amazonaws.com/0/51701/3604d46d-d42f-4f7a-efb3-0de127dd9688.png)\n\n\u65b0\u305f\u306b\u73fe\u308c\u305f\u30c9\u30ed\u30c3\u30d7\u30dc\u30c3\u30af\u30b9\u3067\u8272\u5206\u3051\u8868\u793a\u5bfe\u8c61\u3068\u3059\u308b\u30ab\u30e9\u30e0\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u4eca\u56de\u306f``syscode``\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n![syscode\u3092\u9078\u629e\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u3068\u3053\u308d](https://qiita-image-store.s3.amazonaws.com/0/51701/acf04654-31ae-47e5-9498-3f0ceaf6f865.png)\n\n\u4f55\u3082\u8003\u3048\u305a\u306b\u753b\u9762\u4e2d\u592e\u304b\u3089\u5de6\u4e0b\u5bc4\u308a\u306b\u3042\u308b\u300c\u5206\u985e\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n![\u300c\u5206\u985e\u300d\u30dc\u30bf\u30f3\u3092\u793a\u3057\u305f\u753b\u50cf](https://qiita-image-store.s3.amazonaws.com/0/51701/111ca36e-f262-e7d5-7e8e-31986e04302e.png)\n\n\u753b\u9762\u4e2d\u592e\u306b``syscode``\u306e\u5024\u3068\u8272\u3068\u306e\u7d44\u307f\u5408\u308f\u305b\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n![\u5024\u3068\u8272\u306e\u7d44\u307f\u5408\u308f\u305b\u4e00\u89a7\u3092\u8868\u793a\u3057\u3066\u3044\u308b\u3068\u3053\u308d](https://qiita-image-store.s3.amazonaws.com/0/51701/794182b7-fec8-1847-bf9b-f678d80c6b86.png)\n\n\u300cOK\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u8272\u5206\u3051\u3055\u308c\u305f\u5730\u56f3\u306b\u306a\u308a\u307e\u3059\u3002\n\n![\u8272\u5206\u3051\u3055\u308c\u305f\u5730\u56f3\u3092\u8868\u793a\u3057\u3066\u3044\u308b\u3068\u3053\u308d](https://qiita-image-store.s3.amazonaws.com/0/51701/f63e0868-8da5-6851-7dac-bd12289295ef.png)\n\n\u3053\u306e\u4f8b\u3067\u306f\u3001syscode\u3092\u5168\u90e8\u6307\u5b9a\u3057\u305f\u5f8c\u306e\u3082\u306e\u3067\u3059\u306e\u3067\u30011\u304b\u308917\u306b\u5206\u985e\u3055\u308c\u307e\u3059\u304c\u3001\u73fe\u6642\u70b9\u3067\u306f1\u304b\u308911\u306813\u3057\u304b\u5024\u304c\u306a\u304f\u300112\u500b\u306e\u7d44\u307f\u5408\u308f\u305b\u3057\u304b\u5b58\u5728\u3057\u307e\u305b\u3093\u3002\n\n\u65b0\u305f\u306b\u6307\u5b9a\u3059\u308b\u305f\u3073\u306b\u3001\u3053\u306e\u30bf\u30d6\u3092\u958b\u304d\u300c\u5168\u524a\u9664\u300d\u300c\u5206\u985e\u300d\u3092\u9806\u306b\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u65b0\u305f\u306asyscode\u3082\u542b\u3080\u8272\u4e00\u89a7\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n![\u300c\u5168\u524a\u9664\u300d\u3068\u300c\u5206\u985e\u300d\u30dc\u30bf\u30f3\u3092\u793a\u3057\u305f\u753b\u50cf](https://qiita-image-store.s3.amazonaws.com/0/51701/c5375a96-2c12-e44e-e6aa-cff58803b3a2.png)\n\n\n## XII\u7cfb\n\nXI\u7cfb\u3068XIII\u7cfb\u306e\u78ba\u8a8d\u304c\u7d42\u308f\u3063\u305f\u3089\u3001\u5317\u6d77\u9053\u306e\u6700\u5f8c\u3068\u306a\u308b\u3001XII\u7cfb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```\nUPDATE g_jpr SET syscode=12\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode\n    AND g_mncpl.pcode=1\n    AND syscode IS NULL;\n```\n\n## XIV\u7cfb\n\nXIV\u7cfb\u306f\u6771\u4eac\u90fd\u306e\u3046\u3061\u300c\u5317\u7def28\u5ea6\u304b\u3089\u5357\u3067\u3042\u308a\u3001\u304b\u3064\u6771\u7d4c140\u5ea630\u5206\u304b\u3089\u6771\u3067\u3042\u308a\u6771\u7d4c143\u5ea6\u304b\u3089\u897f\u3067\u3042\u308b\u533a\u57df\u300d\u3067\u3059\u3002\n\u5357\u7aef\u306f\u66f8\u3044\u3066\u3044\u307e\u305b\u3093\u3002\u8a08\u7b97\u3057\u3066\u5357\u7aef\u3092\u51fa\u3057\u3066\u3082\u3044\u3044\u3068\u3044\u3048\u3070\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u308f\u304c\u56fd\u306e\u9818\u571f\u306f\u660e\u3089\u304b\u306b\u5317\u534a\u7403\u306b\u3057\u304b\u306a\u3044\u306e\u3067\u3001\u8d64\u9053\u4e0a\u307e\u3067\u5357\u7aef\u3092\u4f38\u3070\u3057\u3066\u3057\u307e\u3063\u305f\u65b9\u304c\u3001\u8003\u3048\u308b\u5fc5\u8981\u304c\u7121\u3044\u306e\u3067\u697d\u3067\u3059\u3002\n\n\u9818\u57df\u30dd\u30ea\u30b4\u30f3\u306f``POLYGON((140.5 0, 143 0, 143 28, 140.5 28, 140.5 0))``\u3068\u306a\u308a\u307e\u3059\u3002\n\n![XIV\u7cfb](https://qiita-image-store.s3.amazonaws.com/0/51701/a8907c77-f3bf-7dc8-c48e-a7c785b57ed8.png)\n\n\n```\n-- 14 \u6771\u4eac\u90fd \uff0a\u5317\u7def28\u5ea6\u304b\u3089\u5357\u3067\u3042\u308a\u3001\u304b\u3064\u6771\u7d4c140\u5ea630\u5206\u304b\u3089\u6771\u3067\u3042\u308a\u6771\u7d4c143\u5ea6\u304b\u3089\u897f\u3067\u3042\u308b\u533a\u57df\nUPDATE g_jpr SET syscode=14\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND g_mncpl.pcode=13\n    AND ST_Within(g_jpr.geom, 'SRID=4612;POLYGON((140.5 0, 143 0, 143 28, 140.5 28, 140.5 0))'::GEOMETRY);\n```\n\n## XV\u7cfb\n\nXV\u7cfb\u306f\u3001\u6c96\u7e04\u770c\u306e\u3046\u3061\u300c\u6771\u7d4c126\u5ea6\u304b\u3089\u6771\u3067\u3042\u308a\u3001\u304b\u3064\u6771\u7d4c130\u5ea6\u304b\u3089\u897f\u3067\u3042\u308b\u533a\u57df\u300d\u3067\u3059\u3002\n\n\u4eca\u5ea6\u306f\u5317\u7aef\u3082\u3042\u308a\u307e\u305b\u3093\u3002\u5317\u7aef\u306f90\u5ea6\u306b\u3057\u3066\u3001``POLYGON((126 0, 130 0, 130 90, 126 90, 126 0))''\u3068\u3057\u307e\u3059\u3002\n\n![XV\u7cfb](https://qiita-image-store.s3.amazonaws.com/0/51701/f9be5c73-18d9-5349-13c2-bc54117e46db.png)\n\n\u9e7f\u5150\u5cf6\u770c\u306f\u3053\u306e\u9818\u57df\u306b\u30aa\u30fc\u30d0\u30e9\u30c3\u30d7\u3057\u307e\u3059\u304c\u3001``WHERE``\u7bc0\u3067\u6c96\u7e04\u770c\u306b\u9650\u5b9a\u3057\u3066\u3044\u308b\u306e\u3067\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\n```\n-- 15 \u6c96\u7e04\u770c \u6771\u7d4c126\u5ea6\u304b\u3089\u6771\u3067\u3042\u308a\u3001\u304b\u3064\u6771\u7d4c130\u5ea6\u304b\u3089\u897f\u3067\u3042\u308b\u533a\u57df\nUPDATE g_jpr SET syscode=15\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND g_mncpl.pcode=47\n    AND ST_Within(g_jpr.geom, 'SRID=4612;POLYGON((126 0, 130 0, 130 90, 126 90, 126 0))'::GEOMETRY);\n```\n\n## XVI\u7cfb\u304a\u3088\u3073XVII\u7cfb\n\nXVI\u7cfb\u306f\u3001\u6c96\u7e04\u770c\u3067\u300c\u6771\u7d4c126\u5ea6\u304b\u3089\u897f\u3067\u3042\u308b\u5730\u57df\u300d\u3059\u306a\u308f\u3061``POLYGON((0 0, 126 0, 126 90, 0 90, 0 0))``\u306e\u9818\u57df\u306b\u3042\u308b\u3082\u306e\u3067\u3059\u3002\n\nXVII\u7cfb\u306f\u3001\u6c96\u7e04\u770c\u3067\u300c\u6771\u7d4c130\u5ea6\u304b\u3089\u6771\u3067\u3042\u308b\u533a\u57df\u300d\u3059\u306a\u308f\u3061``POLYGON((130 0, 180 0, 180 90, 130 90, 130 0))``\u306e\u9818\u57df\u306b\u3042\u308b\u3082\u306e\u3067\u3059\u3002\n\n![XVI\u7cfb\u3068XVII\u7cfb](https://qiita-image-store.s3.amazonaws.com/0/51701/d30728dc-def6-f9cd-4126-3036a7909343.png)\n\n\u3084\u306f\u308a\u3001\u4ed6\u306e\u90fd\u9053\u5e9c\u770c\u3068\u3082\u30a4\u30f3\u30bf\u30bb\u30af\u30c8\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u6c96\u7e04\u770c\u306e\u307f\u3068\u8003\u3048\u3001\u7121\u8996\u3057\u307e\u3059\u3002\n\n```\n-- 16 \u6c96\u7e04\u770c \u6771\u7d4c126\u5ea6\u304b\u3089\u897f\u3067\u3042\u308b\u533a\u57df\nUPDATE g_jpr SET syscode=16 WHERE pcode=47 AND ST_Covers('SRID=4612;POLYGON((0 0, 126 0, 126 90, 0 90, 0 0))'::GEOMETRY,the_geom);\n-- 17 \u6c96\u7e04\u770c \u6771\u7d4c130\u5ea6\u304b\u3089\u6771\u3067\u3042\u308b\u533a\u57df\nUPDATE g_jpr SET syscode=17 WHERE pcode=47 AND ST_Covers('SRID=4612;POLYGON((130 0, 180 0, 180 90, 130 90, 130 0))'::GEOMETRY, the_geom);\n```\n\n## XVIII\u7cfb\u3068XIX\u7cfb\n\nXVIII\u7cfb\u306f\u3001\u6771\u4eac\u90fd\u306e\u3046\u3061\u300c\u5317\u7def28\u5ea6\u304b\u3089\u5357\u3067\u3042\u308a\u3001\u304b\u3064\u6771\u7d4c140\u5ea630\u5206\u304b\u3089\u897f\u3067\u3042\u308b\u533a\u57df\u300d\u3068\u306a\u3063\u3066\u3044\u308b\u5730\u57df\u3067\u3001XIX\u7cfb\u306f\u3001\u6771\u4eac\u90fd\u306e\u3046\u3061\u300c\u5317\u7def28\u5ea6\u304b\u3089\u5357\u3067\u3042\u308a\u3001\u304b\u3064\u6771\u7d4c143\u5ea6\u304b\u3089\u6771\u3067\u3042\u308b\u533a\u57df\u300d\u3067\u3059\u3002\n\n\u9818\u57df\u30dd\u30ea\u30b4\u30f3\u306f\u3001XVIII\u7cfb\u306b\u3064\u3044\u3066\u306f``POLYGON((0 0, 140.5 0, 140.5 28, 0 28, 0 0))``\u3001XIX\u7cfb\u306b\u3064\u3044\u3066\u306f\u3001``POLYGON((143 0, 170 0, 170 28, 143 28, 143 0))''\u3068\u306a\u308a\u307e\u3059\u3002\n\n```\n-- 18 \u6771\u4eac\u90fd \u5317\u7def28\u5ea6\u304b\u3089\u5357\u3067\u3042\u308a\u3001\u304b\u3064\u6771\u7d4c140\u5ea630\u5206\u304b\u3089\u897f\u3067\u3042\u308b\u533a\u57df\nUPDATE g_jpr SET syscode=18\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND g_mncpl.pcode=13\n    AND ST_Within(g_jpr.geom, 'SRID=4612;POLYGON((0 0, 140.5 0, 140.5 28, 0 28, 0 0))'::GEOMETRY);\n-- 19 \u6771\u4eac\u90fd \u5317\u7def28\u5ea6\u304b\u3089\u5357\u3067\u3042\u308a\u3001\u304b\u3064\u6771\u7d4c143\u5ea6\u304b\u3089\u6771\u3067\u3042\u308b\u533a\u57df\nUPDATE g_jpr SET syscode=19\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode AND g_mncpl.pcode=13\n    AND ST_Within(g_jpr.geom, 'SRID=4612;POLYGON((143 0, 170 0, 170 28, 143 28, 143 0))'::GEOMETRY);\n```\n\n## IX\u7cfb\n\n\u6771\u4eac\u90fd\u306e\u3046\u3061\u3001XIV\u7cfb\u3001XVIII\u7cfb\u307e\u305f\u306fXIX\u7cfb\u306e\u3044\u305a\u308c\u306b\u3082\u5c5e\u3055\u306a\u3044\u5730\u57df\u3067\u3059\u3002\n\n```\nUPDATE g_jpr SET syscode=9\n  FROM g_mncpl\n  WHERE g_jpr.mcode=g_mncpl.mcode\n    AND g_mncpl.pcode=13\n    AND syscode IS NULL;\n```\n\n# \u3060\u3044\u305f\u3044\u898b\u308b\n\n\u307e\u305a\u306f\u3001syscode\u304cNULL\u306b\u306a\u3063\u3066\u3044\u308b\u30ec\u30b3\u30fc\u30c9\u304c\u306a\u3044\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\ndb=# SELECT mcode, syscode, geom FROM g_jpr WHERE syscode IS NULL;\n mcode | syscode | geom \n-------+---------+------\n(0 \u884c)\n```\n\n\u3042\u3068\u3001\u304a\u304b\u3057\u3044syscode\u304c\u4ed8\u3044\u3066\u3044\u306a\u3044\u304b\u3092\u307f\u307e\u3059\u304c\u3001\u300c\u3056\u3063\u304f\u308a\u300d\u3067\u3044\u304d\u307e\u3057\u3087\u3046\u3002\n\n```\nCREATE TABLE w_syscode (\n  gid SERIAL PRIMARY KEY,\n  syscode INT UNIQUE,\n  geom GEOMETRY(POLYGON,4612)\n);\nCREATE INDEX ix_w_syscode_geom ON w_syscode USING GiST (geom);\n\nINSERT INTO w_syscode(syscode, geom)\nSELECT\n  syscode,\n  ST_ConvexHull(ST_Collect(geom))\nFROM g_jpr GROUP BY syscode;\n```\n\n``ST_ConvxHull``\u306f\u3001\u51f8\u5305\u3092\u751f\u6210\u3059\u308b\u95a2\u6570\u3067\u3059\u3002\u51f8\u5305\u306f\u3001\u5f15\u6570\u3067\u4e0e\u3048\u305f\u30b8\u30aa\u30e1\u30c8\u30ea\u3092\u5305\u542b\u3059\u308b\u3001\u6700\u5c0f\u306e\u3001\u51f8\u306e\u30dd\u30ea\u30b4\u30f3\u3067\u3059\u3002\u4e0a\u306e\u4f8b\u3060\u3068\u3001syscode\u3054\u3068\u306b\u307e\u3068\u3081\u3089\u308c\u305f\u30de\u30eb\u30c1\u30dd\u30ea\u30b4\u30f3\u306e\u51f8\u5305\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u751f\u6210\u306b\u306f\u3042\u307e\u308a\u6642\u9593\u304c\u304b\u304b\u3089\u306a\u3044\u3067\u3059\u3057\u3001\u30ce\u30fc\u30c9\u6570\u304c\u5927\u5e45\u306b\u6e1b\u308b\u306e\u3067\u8868\u793a\u3055\u305b\u308b\u969b\u306b\u6642\u9593\u304c\u5927\u5e45\u77ed\u7e2e\u3055\u308c\u307e\u3059\u3002\n\n\u4e0a\u306e\u4f8b\u3092QGIS\u3067\u8868\u793a\u3059\u308b\u3068\u3001\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n![syscode\u3054\u3068\u306e\u30dd\u30ea\u30b4\u30f3\u3092\u307e\u3068\u3081\u3066\u51f8\u5305\u306b\u3057\u305f\u3082\u306e](https://qiita-image-store.s3.amazonaws.com/0/51701/cc26a27f-b408-5aa6-6721-1b924b31f83d.png)\n\n\u6642\u9593\u304c\u304b\u304b\u308b\u3067\u3059\u304c\u3001\u5e73\u9762\u76f4\u89d2\u5ea7\u6a19\u7cfb\u306e\u7cfb\u756a\u53f7\u3054\u3068\u306e\u30dd\u30ea\u30b4\u30f3\u3092``ST_Union``\u3067\u4f5c\u3063\u3066\u307f\u305f\u3089\u3001\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n![\u5e73\u9762\u76f4\u89d2\u5ea7\u6a19\u7cfb\u5730\u56f3](https://qiita-image-store.s3.amazonaws.com/0/51701/b36be9a3-4656-50c4-a507-72dea02711aa.png)\n\n# \u304a\u308f\u308a\u306b\n\n\u30dd\u30ea\u30b4\u30f3\u3054\u3068\u306b\u5e73\u9762\u76f4\u89d2\u5ea7\u6a19\u7cfb\u306e\u7cfb\u756a\u53f7\u3092\u5165\u308c\u3066\u3044\u304d\u307e\u3057\u305f\u3002\n\n\u305d\u306e\u969b\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u30b8\u30aa\u30e1\u30c8\u30ea\u3068WKT\u3067\u751f\u6210\u3057\u305f\u30b8\u30aa\u30e1\u30c8\u30ea\u3068\u3092''ST_Within''\u3067\u7a7a\u9593\u95a2\u4fc2\u3092\u30c6\u30b9\u30c8\u3057\u305f\u308a\u3001QGIS\u3067\u8272\u5206\u3051\u8868\u793a\u3092\u3057\u3066\u78ba\u8a8d\u3057\u306a\u304c\u3089\u9032\u3081\u305f\u308a\u3001PostGIS\u3068\u76f4\u63a5\u95a2\u4fc2\u306a\u3044\u64cd\u4f5c\u3092\u3057\u305f\u308a\u3068\u3001\u3042\u308c\u3053\u308c\u4f7f\u3044\u306a\u304c\u3089\u9032\u3081\u307e\u3057\u305f\u3002\n\n\u3053\u306e\u30c7\u30fc\u30bf\u306b\u4f4d\u7f6e\u53c2\u7167\u60c5\u5831\u3092\u9023\u7d50\u3055\u305b\u308b\u306e\u306f\u3001\u4eca\u56de\u3088\u308a\u3082\u9762\u5012\u3067\u3059\u3057\u3001PostgreSQL/PostGIS\u304b\u3089\u5916\u308c\u3066\u3044\u304d\u307e\u3059\u3002\u79c1\u306e\u5834\u5408\u306fPerl\u3092\u3088\u304f\u4f7f\u3044\u307e\u3059\u3002\u6c17\u304c\u5411\u3044\u305f\u3089\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\n\n# \u51fa\u5178\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001\u56fd\u571f\u6570\u5024\u60c5\u5831\uff08\u884c\u653f\u533a\u57df\uff09\u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\n\u307e\u305f\u3001\u5e73\u9762\u76f4\u89d2\u5ea7\u6a19\u7cfb\u306e\u9069\u7528\u7bc4\u56f2\u3092\u793a\u3059\u753b\u50cf\u306e\u4f5c\u6210\u306b\u969b\u3057\u3066\u306f\u3001\u57fa\u76e4\u5730\u56f3\u60c5\u5831\u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\n"}