{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\nJMX\u3092\u4f7f\u3046\u3053\u3068\u3067java\u5185\u90e8\u306e\u60c5\u5831\u3092\u4e38\u898b\u3048\u306b\u3067\u304d\u307e\u3059\u3002GUI\u3067\u306fjconsole\u3092\u4f7f\u3048\u3070\u3088\u3044\u306e\u3067\u3059\u304c\u30ed\u30b0\u51fa\u529b\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\u601d\u3063\u305f\u3088\u308a\u7c21\u5358\u306b\u3067\u304d\u305d\u3046\u3060\u3063\u305f\u306e\u3067\u52e2\u3044\u3067\u6a5f\u80fd\u3092\u8ffd\u52a0\u3057\u305f\u7248\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\u8272\u3005\u4fbf\u5229\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306f\u3053\u3061\u3089\u304b\u3089\u3069\u3046\u305e\n\u3042\u3002\u3061\u306a\u307f\u306b\u30bf\u30a4\u30c8\u30eb\u3067\u8aa4\u89e3\u3057\u3066\u307b\u3057\u304f\u306f\u306a\u3044\u306e\u3067\u3059\u304c\u3001JMX\u306ftomcat\u306b\u9650\u3063\u305f\u8a71\u3067\u306f\u306a\u3044\u3067\u3059\u3002\n\n\n\u6e96\u5099\uff1aJMX\u30dd\u30fc\u30c8\u3092\u958b\u653e\u3059\u308b\n\nLinux\u306e\u5834\u5408\nsetenv.sh\u3092bin\u306e\u4e0b\u306b\u4f5c\u3063\u3066\u3001CATALINA_OPTS\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nWindows\u306e\u5834\u5408\ntomcatXw.exe\u3092\u8d77\u52d5\u3057\u3001Java\u30bf\u30d6\u3001Java Option\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u8a2d\u5b9a\u5185\u5bb9\n\n-Dcom.sun.management.jmxremote=true\n-Dcom.sun.management.jmxremote.port=7085\n-Dcom.sun.management.jmxremote.ssl=false\n-Dcom.sun.management.jmxremote.authenticate=false\n\n\n\uff08\u53c2\u8003\uff09JMX\u306e\u63a5\u7d9a\u3067\u5229\u7528\u3059\u308bID/PW\u306a\u3069\u306f\u5916\u90e8\u30d5\u30a1\u30a4\u30eb\u5316\u306a\u3069\u3082\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u306d\u3002\nTomcat7 Monitoring and Managing Tomcat Enabling JMX Remote\nTomcat8 Monitoring and Managing Tomcat Enabling JMX Remote\n\n\n\n\u30ed\u30b0\u51fa\u529b\u3059\u308b\u2460\n\nCommand-line JMX Client\u3092\u4f7f\u3046\u3068\u5e78\u305b\u306b\u306a\u308a\u305d\u3046\u3067\u3059\u306e\u3067\u65e9\u901f\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\n\njava -jar cmdline-jmxclient-0.10.3.jar - [\u63a5\u7d9a\u5148] [BEAN] [COMMAND]\n\n\nBEAN\u3068COMMAND\u306e\u90e8\u5206\u306bObjectName\u3068Attirbutes\u306e\u540d\u524d\u3092\u6e21\u3057\u3066\u3042\u3052\u308c\u3070\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002(\"\u306f\\\u3067\u30a8\u30b9\u30b1\u30fc\u30d7\u3059\u308b\u306e\u3092\u304a\u5fd8\u308c\u306a\u304f\uff09\n\njava -jar cmdline-jmxclient-0.10.3.jar - localhost:7085 Catalina:clas\ns=javax.sql.DataSource,context=/,host=localhost,name=\\\"jdbc/postgres\\\",type=DataSource numActive\n\n\n\u51fa\u529b\u7d50\u679c\n\n10/22/2015 11:53:10 +0900 org.archive.jmx.Client numActive: 0\n\n\n\u3042\u3068\u306fawk\u3057\u3066\u6570\u5024\u3060\u3051\u629c\u3051\u3070\u95be\u5024\u306e\u76e3\u8996\u306a\u3069\u306b\u3082\u4f7f\u3048\u305d\u3046\u3067\u3059\u306d\n\n\n\u30ed\u30b0\u51fa\u529b\u3059\u308b\u2461\n\u2460\u3067\u3082\u3044\u3044\u3093\u3060\u3051\u3069\u3001\u3046\u30fc\u3093\u3002\u306a\u3093\u304b\u7269\u8db3\u308a\u306a\u3044\uff01\u3068\u3044\u3046\u3053\u3068\u3067\u2460\u3092\u6539\u826f\u3057\u305f\u7248\u306e\u30c4\u30fc\u30eb\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\nJava6\u4ee5\u964d\u3067\u3042\u308c\u3070\u52d5\u304f\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3069\u3053\u304c\u9032\u5316\u3057\u3066\u308b\uff1f\n\n\u30d8\u30c3\u30c0\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\n\u5b9a\u671f\u7684\u306b\u5b9f\u884c\u3067\u304d\u307e\u3059\n\u8907\u6570\u306e\u9805\u76ee\u3092CSV\u5f62\u5f0f\u3067\u540c\u6642\u306b\u51fa\u529b\u3067\u304d\u307e\u3059\n\u65e5\u4ed8\u306e\u5f62\u5f0f\u3092\u5909\u66f4\u3067\u304d\u307e\u3059\n\u30d5\u30a1\u30a4\u30eb\u51fa\u529b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\n\n\n\u5b9f\u884c\u306e\u4ed5\u65b9\n\u30b7\u30f3\u30d7\u30eb\u306b\u5b9f\u884c\u3059\u308b\u306b\u306f\u2460\u3068\u540c\u3058\u3088\u3046\u306a\u611f\u3058\u3067\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\uff11\uff0e\u307e\u305a\u306f\u3053\u3053\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\uff12\uff0e\u3055\u304d\u307b\u3069\u3068\u3088\u3046\u306b\u3001JNDI DataSource\u306enumActive\u3092\u51fa\u529b\u3057\u3066\u307f\u307e\u3059\u3002\njava -jar jmx-cmdclient-0.1.0.jar localhost:7085 \"Catalina:clas\ns=javax.sql.DataSource,context=/,host=localhost,name=\\\"jdbc/postgres\\\",type=DataSource\" \"numActive\"\n\n\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u540d\u306e\u4e00\u89a7\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\uff11\uff0eJMX\u306eURL\u3060\u3051\u6307\u5b9a\u3057\u3066\u3042\u3052\u307e\u3059\u3002\njava -jar jmx-cmdclient-0.1.0.jar localhost:7085\n\n\uff12\uff0e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u540d\u306e\u4e00\u89a7\u304c\u53d6\u5f97\u3067\u304d\u307e\u3057\u305f\u3002\njava.lang:type=ClassLoading\njava.lang:type=Compilation\njava.lang:type=GarbageCollector,name=PS MarkSweep\njava.lang:type=GarbageCollector,name=PS Scavenge\njava.lang:type=Memory\n\n\n\u3000\u5b9a\u671f\u7684\u306b\u5b9f\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30e1\u30e2\u30ea\u306e\u60c5\u5831\u3092\u5b9a\u671f\u7684\u306b\u51fa\u529b\u3057\u3066\u307f\u307e\u3059\u3002\u5f15\u6570\u306e\u6700\u5f8c\u306bInterval(sec)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\njava -jar jmx-cmdclient-0.1.0.jar localhost:7085 \"java.lang:type=Memory\" \"HeapMemoryUsage\" 1\n\nHeapMemoryUsage@committed,HeapMemoryUsage@init,HeapMemoryUsage@max,HeapMemoryUsage@used\n2015-10-23 09:51:55.593,133955584,134217728,238616576,35819368\n2015-10-23 09:51:56.596,133955584,134217728,238616576,35843488\n2015-10-23 09:51:57.599,133955584,134217728,238616576,35843488\n2015-10-23 09:51:58.601,133955584,134217728,238616576,35941744\n2015-10-23 09:51:59.604,133955584,134217728,238616576,35941744\n\n\n\u8907\u6570\u306e\u9805\u76ee\u3092CSV\u5f62\u5f0f\u3067\u540c\u6642\u306b\u51fa\u529b\u3067\u304d\u307e\u3059\n\nJNDI DataSource\u306enumActive\u3068numIdle\u3092\u540c\u6642\u306b\u51fa\u529b\u3057\u3066\u307f\u307e\u3059\u3002\n\n\uff11\uff0e\u307e\u305a\u306fmetrics\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\nmetrics.sample1\n\"Catalina:type=DataSource,context=/,host=localhost,class=javax.sql.DataSource,name=\"jdbc/postgres\"\" \"numActive\"\n\"Catalina:type=DataSource,context=/,host=localhost,class=javax.sql.DataSource,name=\"jdbc/postgres\"\" \"numIdle\"\n\n\uff12\uff0e\u5f15\u6570\u306bmetrics\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u3066\u3042\u3052\u307e\u3059\u3002\n\n\n\njava -Dpath=./metrics -jar jmx-cmdclient-0.1.0.jar localhost:7085\n```\n\uff13\uff0e\u8907\u6570\u306e\u9805\u76ee\u304c\u5b9a\u671f\u7684\u306b\u51fa\u529b\u3055\u308c\u307e\u3057\u305f\u3002\nnumActive,numIdle\n2015-10-23 09:57:59.228,0,0\n2015-10-23 09:58:00.230,0,0\n2015-10-23 09:58:01.232,0,0\n2015-10-23 09:58:02.235,0,0\n\n\n\u65e5\u4ed8\u306e\u5f62\u5f0f\u3092\u5909\u66f4\u3059\u308b\n\n\u5185\u90e8\u3067\u306flogback\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u3001logback.xml\u3092\u5b9f\u884c\u6642\u306b\u6307\u5b9a\u3057\u3066\u3042\u3052\u307e\u3059\u3002\n\n\uff11\uff0elogback.xml\u3092\u7528\u610f\u3059\u308b\u3002\u65e5\u4ed8\u3092/\u533a\u5207\u308a\u306b\u3057\u3066\u30df\u30ea\u79d2\u306f\u51fa\u529b\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\nlogback.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE logback>\n<configuration>\n\n    <property name=\"DEFAULT_PATTERN\" value=\"%d{yyyy/MM/dd HH:mm:ss},%m%n\" />\n    <property name=\"SIMPLE_PATTERN\" value=\"%m%n\" />\n\n    <appender name=\"DEFAULT\" class=\"ch.qos.logback.core.ConsoleAppender\">\n        <encoder>\n            <pattern>${DEFAULT_PATTERN}</pattern>\n            <charset>UTF8</charset>\n        </encoder>\n    </appender>\n\n    <appender name=\"SIMPLE\" class=\"ch.qos.logback.core.ConsoleAppender\">\n        <encoder>\n            <pattern>${SIMPLE_PATTERN}</pattern>\n            <charset>UTF8</charset>\n        </encoder>\n    </appender>\n\n    <logger name=\"simple\" level=\"INFO\">\n        <appender-ref ref=\"SIMPLE\" />\n    </logger>\n\n    <logger name=\"default\" level=\"INFO\">\n        <appender-ref ref=\"DEFAULT\" />\n    </logger>\n\n    <logger name=\"ch.qos.logback\" level=\"ERROR\" />\n\n</configuration>\n\n\n\uff12\uff0e\u5f15\u6570\u306b\uff11\u3067\u5909\u66f4\u3057\u305flogback.xml\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\njava -Dlogback.configurationFile=./logback.xml -jar jmx-cmdclient-0.1\n.0.jar localhost:7085 \"java.lang:type=Memory\" \"HeapMemoryUsage\" 1\n\n\uff13\uff0e\u65e5\u4ed8\u304c/\u533a\u5207\u308a\u3067\u30df\u30ea\u79d2\u304c\u51fa\u529b\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nHeapMemoryUsage@committed,HeapMemoryUsage@init,HeapMemoryUsage@max,HeapMemoryUsage@used\n2015/10/23 10:01:37,133955584,134217728,238616576,29214400\n2015/10/23 10:01:38,133955584,134217728,238616576,29214400\n2015/10/23 10:01:39,133955584,134217728,238616576,29214400\n\n\n\u540c\u3058\u3088\u3046\u306blogback.xml\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u65e5\u4ed8\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u30ed\u30fc\u30ea\u30f3\u30b0\u308b\u3088\u3046\u306b\u3082\u3067\u304d\u307e\u3059\u306d\n\n\n\u8272\u3005\u306a\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u53d6\u5f97\u3057\u3066\u307f\u308b\n\uff11\uff0e metrics\u30d5\u30a1\u30a4\u30eb\u306b\u8272\u3005\u6307\u5b9a\u3057\u3066\u307f\u307e\u3059\u3002\n\nmetrics.sample2\n\"java.lang:type=Memory\" \"HeapMemoryUsage\"\n\"java.lang:name=PS Perm Gen,type=MemoryPool\" \"Usage\"\n\"java.lang:name=PS Eden Space,type=MemoryPool\" \"Usage\"\n\"Catalina:type=DataSource,context=/,host=localhost,class=javax.sql.DataSource,name=\"jdbc/postgres\"\" \"numActive\"\n\"Catalina:type=DataSource,context=/,host=localhost,class=javax.sql.DataSource,name=\"jdbc/postgres\"\" \"numIdle\"\n\"Catalina:name=\"http-apr-8080\",type=GlobalRequestProcessor\" \"bytesSent\"\n\"Catalina:name=\"http-apr-8080\",type=GlobalRequestProcessor\" \"bytesReceived\"\n\"Catalina:name=\"http-apr-8080\",type=GlobalRequestProcessor\" \"errorCount\"\n\"Catalina:name=\"http-apr-8080\",type=GlobalRequestProcessor\" \"maxTime\"\n\"Catalina:name=\"http-apr-8080\",type=GlobalRequestProcessor\" \"requestCount\"\n\"Catalina:type=Manager,context=/,host=localhost\" \"activeSessions\"\n\"Catalina:type=Manager,context=/,host=localhost\" \"sessionCounter\"\n\"Catalina:type=Manager,context=/,host=localhost\" \"expiredSessions\"\n\n\n\uff12\uff0e\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\njava -Dpath=./metrics.sample2 -jar jmx-cmdclient-0.1.0.jar localhost:7085 1\n\n\uff13\uff0e\u8272\u3005\u3067\u307e\u3057\u305f\u306d\u3002\u6027\u80fd\u6e2c\u5b9a\u3059\u308b\u3068\u304d\u306e\u76e3\u8996\u306a\u3093\u304b\u306b\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u3067\u3057\u3087\u3046\u304b\nHeapMemoryUsage@committed,HeapMemoryUsage@init,HeapMemoryUsage@max,HeapMemoryUsage@used,Usage@commit\nted,Usage@init,Usage@max,Usage@used,Usage@committed,Usage@init,Usage@max,Usage@used,numActive,numIdl\ne,bytesSent,bytesReceived,errorCount,maxTime,requestCount,activeSessions,sessionCounter,expiredSessi\nons\n2015-10-23 10:36:04.155,133955584,134217728,238616576,34799952,20971520,16777216,67108864,19881848,44171264,33554432,88932352,27702448,0,0,64697,0,2,1088,8,0,0,0\n2015-10-23 10:36:05.167,133955584,134217728,238616576,35337304,20971520,16777216,67108864,19881848,44171264,33554432,88932352,28239800,0,0,64697,0,2,1088,8,0,0,0\n2015-10-23 10:36:06.179,133955584,134217728,238616576,35463576,20971520,16777216,67108864,19881848,44171264,33554432,88932352,28366072,0,0,64697,0,2,1088,8,0,0,0\n\n# \u306f\u3058\u3081\u306b\n\n* JMX\u3092\u4f7f\u3046\u3053\u3068\u3067java\u5185\u90e8\u306e\u60c5\u5831\u3092\u4e38\u898b\u3048\u306b\u3067\u304d\u307e\u3059\u3002GUI\u3067\u306fjconsole\u3092\u4f7f\u3048\u3070\u3088\u3044\u306e\u3067\u3059\u304c\u30ed\u30b0\u51fa\u529b\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n* \u601d\u3063\u305f\u3088\u308a\u7c21\u5358\u306b\u3067\u304d\u305d\u3046\u3060\u3063\u305f\u306e\u3067\u52e2\u3044\u3067[\u6a5f\u80fd\u3092\u8ffd\u52a0\u3057\u305f\u7248](https://github.com/uzresk/jmx-cmdclient)\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\u8272\u3005\u4fbf\u5229\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n* [\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306f\u3053\u3061\u3089\u304b\u3089\u3069\u3046\u305e](https://github.com/uzresk/jmx-cmdclient/releases)\n* \u3042\u3002\u3061\u306a\u307f\u306b\u30bf\u30a4\u30c8\u30eb\u3067\u8aa4\u89e3\u3057\u3066\u307b\u3057\u304f\u306f\u306a\u3044\u306e\u3067\u3059\u304c\u3001JMX\u306ftomcat\u306b\u9650\u3063\u305f\u8a71\u3067\u306f\u306a\u3044\u3067\u3059\u3002\n\n## \u6e96\u5099\uff1aJMX\u30dd\u30fc\u30c8\u3092\u958b\u653e\u3059\u308b\n\n* Linux\u306e\u5834\u5408\nsetenv.sh\u3092bin\u306e\u4e0b\u306b\u4f5c\u3063\u3066\u3001CATALINA_OPTS\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n* Windows\u306e\u5834\u5408\ntomcatXw.exe\u3092\u8d77\u52d5\u3057\u3001Java\u30bf\u30d6\u3001Java Option\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n* \u8a2d\u5b9a\u5185\u5bb9\n\n```\n-Dcom.sun.management.jmxremote=true\n-Dcom.sun.management.jmxremote.port=7085\n-Dcom.sun.management.jmxremote.ssl=false\n-Dcom.sun.management.jmxremote.authenticate=false\n```\n\n* \uff08\u53c2\u8003\uff09JMX\u306e\u63a5\u7d9a\u3067\u5229\u7528\u3059\u308bID/PW\u306a\u3069\u306f\u5916\u90e8\u30d5\u30a1\u30a4\u30eb\u5316\u306a\u3069\u3082\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u306d\u3002\n[Tomcat7 Monitoring and Managing Tomcat Enabling JMX Remote](https://tomcat.apache.org/tomcat-7.0-doc/monitoring.html#Enabling_JMX_Remote)\n[Tomcat8 Monitoring and Managing Tomcat Enabling JMX Remote]\n(https://tomcat.apache.org/tomcat-8.0-doc/monitoring.html#Enabling_JMX_Remote)\n\n# \u30ed\u30b0\u51fa\u529b\u3059\u308b\u2460\n\n* [Command-line JMX Client](http://crawler.archive.org/cmdline-jmxclient/)\u3092\u4f7f\u3046\u3068\u5e78\u305b\u306b\u306a\u308a\u305d\u3046\u3067\u3059\u306e\u3067\u65e9\u901f\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n* \u30b3\u30de\u30f3\u30c9\n\n```\njava -jar cmdline-jmxclient-0.10.3.jar - [\u63a5\u7d9a\u5148] [BEAN] [COMMAND]\n```\n\n* BEAN\u3068COMMAND\u306e\u90e8\u5206\u306bObjectName\u3068Attirbutes\u306e\u540d\u524d\u3092\u6e21\u3057\u3066\u3042\u3052\u308c\u3070\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002(\"\u306f\\\u3067\u30a8\u30b9\u30b1\u30fc\u30d7\u3059\u308b\u306e\u3092\u304a\u5fd8\u308c\u306a\u304f\uff09\n\n```\njava -jar cmdline-jmxclient-0.10.3.jar - localhost:7085 Catalina:clas\ns=javax.sql.DataSource,context=/,host=localhost,name=\\\"jdbc/postgres\\\",type=DataSource numActive\n```\n\n* \u51fa\u529b\u7d50\u679c\n\n```\n10/22/2015 11:53:10 +0900 org.archive.jmx.Client numActive: 0\n```\n\n* \u3042\u3068\u306fawk\u3057\u3066\u6570\u5024\u3060\u3051\u629c\u3051\u3070\u95be\u5024\u306e\u76e3\u8996\u306a\u3069\u306b\u3082\u4f7f\u3048\u305d\u3046\u3067\u3059\u306d\n\n# \u30ed\u30b0\u51fa\u529b\u3059\u308b\u2461\n\n\u2460\u3067\u3082\u3044\u3044\u3093\u3060\u3051\u3069\u3001\u3046\u30fc\u3093\u3002\u306a\u3093\u304b\u7269\u8db3\u308a\u306a\u3044\uff01\u3068\u3044\u3046\u3053\u3068\u3067\u2460\u3092\u6539\u826f\u3057\u305f\u7248\u306e\u30c4\u30fc\u30eb\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\nJava6\u4ee5\u964d\u3067\u3042\u308c\u3070\u52d5\u304f\u3068\u601d\u3044\u307e\u3059\u3002\n\n## \u3069\u3053\u304c\u9032\u5316\u3057\u3066\u308b\uff1f\n\n* \u30d8\u30c3\u30c0\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\n* \u5b9a\u671f\u7684\u306b\u5b9f\u884c\u3067\u304d\u307e\u3059\n* \u8907\u6570\u306e\u9805\u76ee\u3092CSV\u5f62\u5f0f\u3067\u540c\u6642\u306b\u51fa\u529b\u3067\u304d\u307e\u3059\n* \u65e5\u4ed8\u306e\u5f62\u5f0f\u3092\u5909\u66f4\u3067\u304d\u307e\u3059\n* \u30d5\u30a1\u30a4\u30eb\u51fa\u529b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\n\n## \u5b9f\u884c\u306e\u4ed5\u65b9\n\n\u30b7\u30f3\u30d7\u30eb\u306b\u5b9f\u884c\u3059\u308b\u306b\u306f\u2460\u3068\u540c\u3058\u3088\u3046\u306a\u611f\u3058\u3067\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\n\uff11\uff0e[\u307e\u305a\u306f\u3053\u3053\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002](https://github.com/uzresk/jmx-cmdclient/releases)\n\n\uff12\uff0e\u3055\u304d\u307b\u3069\u3068\u3088\u3046\u306b\u3001JNDI DataSource\u306enumActive\u3092\u51fa\u529b\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\njava -jar jmx-cmdclient-0.1.0.jar localhost:7085 \"Catalina:clas\ns=javax.sql.DataSource,context=/,host=localhost,name=\\\"jdbc/postgres\\\",type=DataSource\" \"numActive\"\n```\n\n## \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u540d\u306e\u4e00\u89a7\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n\uff11\uff0eJMX\u306eURL\u3060\u3051\u6307\u5b9a\u3057\u3066\u3042\u3052\u307e\u3059\u3002\n\n```\njava -jar jmx-cmdclient-0.1.0.jar localhost:7085\n```\n\n\uff12\uff0e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u540d\u306e\u4e00\u89a7\u304c\u53d6\u5f97\u3067\u304d\u307e\u3057\u305f\u3002\n\n```\njava.lang:type=ClassLoading\njava.lang:type=Compilation\njava.lang:type=GarbageCollector,name=PS MarkSweep\njava.lang:type=GarbageCollector,name=PS Scavenge\njava.lang:type=Memory\n```\n\n##\u3000\u5b9a\u671f\u7684\u306b\u5b9f\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n* \u30e1\u30e2\u30ea\u306e\u60c5\u5831\u3092\u5b9a\u671f\u7684\u306b\u51fa\u529b\u3057\u3066\u307f\u307e\u3059\u3002\u5f15\u6570\u306e\u6700\u5f8c\u306bInterval(sec)\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```\njava -jar jmx-cmdclient-0.1.0.jar localhost:7085 \"java.lang:type=Memory\" \"HeapMemoryUsage\" 1\n```\n\n```\nHeapMemoryUsage@committed,HeapMemoryUsage@init,HeapMemoryUsage@max,HeapMemoryUsage@used\n2015-10-23 09:51:55.593,133955584,134217728,238616576,35819368\n2015-10-23 09:51:56.596,133955584,134217728,238616576,35843488\n2015-10-23 09:51:57.599,133955584,134217728,238616576,35843488\n2015-10-23 09:51:58.601,133955584,134217728,238616576,35941744\n2015-10-23 09:51:59.604,133955584,134217728,238616576,35941744\n```\n\n## \u8907\u6570\u306e\u9805\u76ee\u3092CSV\u5f62\u5f0f\u3067\u540c\u6642\u306b\u51fa\u529b\u3067\u304d\u307e\u3059\n\n* JNDI DataSource\u306enumActive\u3068numIdle\u3092\u540c\u6642\u306b\u51fa\u529b\u3057\u3066\u307f\u307e\u3059\u3002\n\n\uff11\uff0e\u307e\u305a\u306fmetrics\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\n```metrics.sample1\n\"Catalina:type=DataSource,context=/,host=localhost,class=javax.sql.DataSource,name=\"jdbc/postgres\"\" \"numActive\"\n\"Catalina:type=DataSource,context=/,host=localhost,class=javax.sql.DataSource,name=\"jdbc/postgres\"\" \"numIdle\"\n\n\uff12\uff0e\u5f15\u6570\u306bmetrics\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u3066\u3042\u3052\u307e\u3059\u3002\n\n```\njava -Dpath=./metrics -jar jmx-cmdclient-0.1.0.jar localhost:7085\n```\n\n\uff13\uff0e\u8907\u6570\u306e\u9805\u76ee\u304c\u5b9a\u671f\u7684\u306b\u51fa\u529b\u3055\u308c\u307e\u3057\u305f\u3002\n\n```\nnumActive,numIdle\n2015-10-23 09:57:59.228,0,0\n2015-10-23 09:58:00.230,0,0\n2015-10-23 09:58:01.232,0,0\n2015-10-23 09:58:02.235,0,0\n```\n\n## \u65e5\u4ed8\u306e\u5f62\u5f0f\u3092\u5909\u66f4\u3059\u308b\n\n* \u5185\u90e8\u3067\u306flogback\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u3001logback.xml\u3092\u5b9f\u884c\u6642\u306b\u6307\u5b9a\u3057\u3066\u3042\u3052\u307e\u3059\u3002\n\n\uff11\uff0elogback.xml\u3092\u7528\u610f\u3059\u308b\u3002\u65e5\u4ed8\u3092/\u533a\u5207\u308a\u306b\u3057\u3066\u30df\u30ea\u79d2\u306f\u51fa\u529b\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\n```logback.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE logback>\n<configuration>\n\n\t<property name=\"DEFAULT_PATTERN\" value=\"%d{yyyy/MM/dd HH:mm:ss},%m%n\" />\n\t<property name=\"SIMPLE_PATTERN\" value=\"%m%n\" />\n\n\t<appender name=\"DEFAULT\" class=\"ch.qos.logback.core.ConsoleAppender\">\n\t\t<encoder>\n\t\t\t<pattern>${DEFAULT_PATTERN}</pattern>\n\t\t\t<charset>UTF8</charset>\n\t\t</encoder>\n\t</appender>\n\n\t<appender name=\"SIMPLE\" class=\"ch.qos.logback.core.ConsoleAppender\">\n\t\t<encoder>\n\t\t\t<pattern>${SIMPLE_PATTERN}</pattern>\n\t\t\t<charset>UTF8</charset>\n\t\t</encoder>\n\t</appender>\n\n\t<logger name=\"simple\" level=\"INFO\">\n\t\t<appender-ref ref=\"SIMPLE\" />\n\t</logger>\n\n\t<logger name=\"default\" level=\"INFO\">\n\t\t<appender-ref ref=\"DEFAULT\" />\n\t</logger>\n\n\t<logger name=\"ch.qos.logback\" level=\"ERROR\" />\n\t \n</configuration>\n```\n\n\uff12\uff0e\u5f15\u6570\u306b\uff11\u3067\u5909\u66f4\u3057\u305flogback.xml\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```\njava -Dlogback.configurationFile=./logback.xml -jar jmx-cmdclient-0.1\n.0.jar localhost:7085 \"java.lang:type=Memory\" \"HeapMemoryUsage\" 1\n```\n\n\uff13\uff0e\u65e5\u4ed8\u304c/\u533a\u5207\u308a\u3067\u30df\u30ea\u79d2\u304c\u51fa\u529b\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n```\nHeapMemoryUsage@committed,HeapMemoryUsage@init,HeapMemoryUsage@max,HeapMemoryUsage@used\n2015/10/23 10:01:37,133955584,134217728,238616576,29214400\n2015/10/23 10:01:38,133955584,134217728,238616576,29214400\n2015/10/23 10:01:39,133955584,134217728,238616576,29214400\n```\n\n* \u540c\u3058\u3088\u3046\u306blogback.xml\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u65e5\u4ed8\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u30ed\u30fc\u30ea\u30f3\u30b0\u308b\u3088\u3046\u306b\u3082\u3067\u304d\u307e\u3059\u306d\n\n## \u8272\u3005\u306a\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u53d6\u5f97\u3057\u3066\u307f\u308b\n\n\uff11\uff0e metrics\u30d5\u30a1\u30a4\u30eb\u306b\u8272\u3005\u6307\u5b9a\u3057\u3066\u307f\u307e\u3059\u3002\n\n```metrics.sample2\n\"java.lang:type=Memory\" \"HeapMemoryUsage\"\n\"java.lang:name=PS Perm Gen,type=MemoryPool\" \"Usage\"\n\"java.lang:name=PS Eden Space,type=MemoryPool\" \"Usage\"\n\"Catalina:type=DataSource,context=/,host=localhost,class=javax.sql.DataSource,name=\"jdbc/postgres\"\" \"numActive\"\n\"Catalina:type=DataSource,context=/,host=localhost,class=javax.sql.DataSource,name=\"jdbc/postgres\"\" \"numIdle\"\n\"Catalina:name=\"http-apr-8080\",type=GlobalRequestProcessor\" \"bytesSent\"\n\"Catalina:name=\"http-apr-8080\",type=GlobalRequestProcessor\" \"bytesReceived\"\n\"Catalina:name=\"http-apr-8080\",type=GlobalRequestProcessor\" \"errorCount\"\n\"Catalina:name=\"http-apr-8080\",type=GlobalRequestProcessor\" \"maxTime\"\n\"Catalina:name=\"http-apr-8080\",type=GlobalRequestProcessor\" \"requestCount\"\n\"Catalina:type=Manager,context=/,host=localhost\" \"activeSessions\"\n\"Catalina:type=Manager,context=/,host=localhost\" \"sessionCounter\"\n\"Catalina:type=Manager,context=/,host=localhost\" \"expiredSessions\"\n```\n\n\uff12\uff0e\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\n\n```\njava -Dpath=./metrics.sample2 -jar jmx-cmdclient-0.1.0.jar localhost:7085 1\n```\n\n\uff13\uff0e\u8272\u3005\u3067\u307e\u3057\u305f\u306d\u3002\u6027\u80fd\u6e2c\u5b9a\u3059\u308b\u3068\u304d\u306e\u76e3\u8996\u306a\u3093\u304b\u306b\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u3067\u3057\u3087\u3046\u304b\n\n```\nHeapMemoryUsage@committed,HeapMemoryUsage@init,HeapMemoryUsage@max,HeapMemoryUsage@used,Usage@commit\nted,Usage@init,Usage@max,Usage@used,Usage@committed,Usage@init,Usage@max,Usage@used,numActive,numIdl\ne,bytesSent,bytesReceived,errorCount,maxTime,requestCount,activeSessions,sessionCounter,expiredSessi\nons\n2015-10-23 10:36:04.155,133955584,134217728,238616576,34799952,20971520,16777216,67108864,19881848,44171264,33554432,88932352,27702448,0,0,64697,0,2,1088,8,0,0,0\n2015-10-23 10:36:05.167,133955584,134217728,238616576,35337304,20971520,16777216,67108864,19881848,44171264,33554432,88932352,28239800,0,0,64697,0,2,1088,8,0,0,0\n2015-10-23 10:36:06.179,133955584,134217728,238616576,35463576,20971520,16777216,67108864,19881848,44171264,33554432,88932352,28366072,0,0,64697,0,2,1088,8,0,0,0\n```\n", "tags": ["Java", "Tomcat", "JMX"]}