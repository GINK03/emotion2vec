{"context": "class Animal { kind: string }\nclass Dog extends Animal { dog_type: string }\n\nfunction showDogType(dog: Dog) { console.log(dog.dog_type) }\n\n// \u4ee3\u5165\u4e0d\u53ef\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u307b\u3057\u3044\nconst someAnimalFunc: (animal: Animal) => void = showDogType\n\n// \u5b9f\u969b\u306f\u3053\u3053\u3067\u30e9\u30f3\u30bf\u30a4\u30e0\u30a8\u30e9\u30fc\nsomeAnimalFunc(new Animal())\n\n\u3053\u306e\u30b3\u30fc\u30c9\u304c\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u306b\u306a\u3089\u305a, \u5b9f\u884c\u6642\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u3053\u3068\u306b\u3064\u3044\u3066.\n\nTL;DR\n\n\u578b\u30b7\u30b9\u30c6\u30e0\u306e\u5065\u5168\u6027 (\u578b\u306e\u77db\u76fe\u304c\u751f\u3058\u306a\u3044\u3053\u3068) vs \u5229\u4fbf\u6027\u306e\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\u304b\u3089, \u73fe\u5728\u306e TypeScript \u306f\u5065\u5168\u6027\u3092\u8ae6\u3081\u3066\u3044\u308b\n\n\n\u95a2\u6570\u578b\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3064\u3044\u3066 bivariant (\u5171\u5909\u304b\u3064\u53cd\u5909), \u623b\u308a\u5024\u306b\u3064\u3044\u3066\u5171\u5909\u3068\u3057\u3066\u3044\u308b\n\n\n\u5065\u5168\u6027\u3092\u5f97\u308b\u305f\u3081\u306e\u63d0\u6848 (\u95a2\u6570\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3064\u3044\u3066\u53cd\u5909\u3068\u3059\u308b) \u304c\u8b70\u8ad6\u3055\u308c\u3066\u3044\u308b\n\n\n\u95a2\u6570\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u95a2\u3057\u3066\u306e\u6027\u8cea: \u53cd\u5909\u6027\n\u4e00\u822c\u306b\u95a2\u6570\u578b\u306b\u306f\u6b21\u306e\u6027\u8cea\u304c\u6c42\u3081\u3089\u308c\u308b.\ntype F1 = (x: P1) => void\ntype F2 = (x: P2) => void\n\n\n\u6027\u8cea: P1 \u304c P2 \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u3067\u3042\u308b \u21d2 F2 \u304c F1 \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u3067\u3042\u308b\n\n\u3053\u306e\u6027\u8cea\u306f \u53cd\u5909\u6027 \u3068\u547c\u3070\u308c\u308b. (F1, F2 \u306b\u5bfe\u3057\u3066 P1, P2 \u306e\u95a2\u4fc2\u304c\u9006\u8ee2\u3057\u3066\u3044\u308b\u3053\u3068\u306b\u6ce8\u610f)\n\u5177\u4f53\u7684\u306a\u4f8b\u3067\u306f,\ntype DogFunc = (x: Dog) => void\ntype AnimalFunc = (x: Animal) => void\n\nAnimal \u578b\u306e\u5165\u529b\u3092\u671f\u5f85\u3059\u308b AnimalFunc \u3092 DogFunc \u578b\u306b\u4ee3\u5165\u3057\u3066\u3082\u554f\u984c\u306a\u304f\u52d5\u4f5c\u3059\u308b\u3079\u304d\u3067\u3042\u308b. \u4e00\u65b9\u3067 Dog \u578b\u306e\u5165\u529b\u3092\u671f\u5f85\u3059\u308b DogFunc \u3092 AnimalFunc \u306b\u4ee3\u5165\u3067\u304d\u3066\u3057\u307e\u3046\u3068, Dog \u578b\u4ee5\u5916\u306e Animal \u30b5\u30d6\u30bf\u30a4\u30d7 (Cat \u578b\u3068\u304b) \u3092\u6e21\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a, \u77db\u76fe\u304c\u751f\u3058\u308b.\n\n\u5171\u5909\u306a Array \u3068\u5171\u5909\u306a\u95a2\u6570\u30d1\u30e9\u30e1\u30fc\u30bf\n\u3068\u3053\u308d\u3067, Dog[] \u306f Animal[] \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u3068\u307f\u306a\u3059\u3079\u304d\u3060\u308d\u3046\u304b. \u73fe\u5728\u306e TypeScript \u306f Dog[] \u3092 Animal[] \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u3068 \u307f\u306a\u3057\u3066\u3044\u308b. \u3064\u307e\u308a\u4ee5\u4e0b\u306e\u6027\u8cea\u3092\u8a8d\u3081\u3066\u3044\u308b.\n\n\u6027\u8cea: P1 \u304c P2 \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u3067\u3042\u308b \u21d2 P1[] \u304c P2[] \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u3067\u3042\u308b\n\n\u3053\u306e\u6027\u8cea\u306f \u5171\u5909\u6027 \u3068\u547c\u3070\u308c\u308b.\nDog[] \u304c Animal[] \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u3067\u3042\u308b\u304b\u5426\u304b\u3092\u5224\u5b9a\u3059\u308b\u969b, \u30b3\u30f3\u30d1\u30a4\u30e9\u306f\u6b21\u306e\u3088\u3046\u306a\u5224\u5b9a\u3092\u884c\u3046.\n\n\nDog[] \u306f Animal[] \u578b\u306b\u4ee3\u5165\u53ef\u80fd\u304b?\n\n\n\nDog[] \u306e\u5168\u3066\u306e\u30e1\u30f3\u30d0 (\u30d7\u30ed\u30d1\u30c6\u30a3, \u30e1\u30bd\u30c3\u30c9) \u304c Animal[] \u578b\u306b\u4ee3\u5165\u53ef\u80fd\u304b?\n\n\n\nDog[].push \u30e1\u30bd\u30c3\u30c9\u306f Animal[].push \u578b\u306b\u4ee3\u5165\u53ef\u80fd\u304b?\n\n\n\u95a2\u6570\u578b (x: Dog) => number \u306f (x: Animal) => number \u306b\u4ee3\u5165\u53ef\u80fd\u304b?\n\n\n\n\n\n\n\n\u3053\u3053\u3067\u3055\u3063\u304d\u306e\u8b70\u8ad6\u3092\u601d\u3044\u51fa\u3059.\n\n\u95a2\u6570\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u53cd\u5909\u6027: Animal \u3092 Dog \u306b\u4ee3\u5165\u53ef\u80fd \u21d2 (x: Dog) => number \u3092 (x: Animal) => number \u306b\u4ee3\u5165\u53ef\u80fd\n\nAnimal \u306f Dog \u306b\u4ee3\u5165\u53ef\u80fd\u3067\u306f\u306a\u3044. \u95a2\u6570\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u53cd\u5909\u6027\u304c\u6210\u308a\u7acb\u3064\u3068\u3059\u308b\u3068, \u300c\u578b (x: Dog) => number \u306f (x: Animal) => number \u306b\u4ee3\u5165\u53ef\u80fd\u304b?\u300d\u306e\u7b54\u3048\u306f no \u3068\u306a\u308b. \u3059\u306a\u308f\u3061\u300cDog[] \u306f Animal[] \u578b\u306b\u4ee3\u5165\u53ef\u80fd\u304b?\u300d\u306e\u7b54\u3048\u306f no \u3068\u306a\u3063\u3066\u3057\u307e\u3046.\n\u305d\u3053\u3067 TypeScript \u3067\u306f\u95a2\u6570\u30d1\u30e9\u30e1\u30fc\u30bf\u3092 bivariant (\u5171\u5909\u304b\u3064\u53cd\u5909) \u3068\u3059\u308b\u3053\u3068\u3067\u3053\u308c\u3092\u89e3\u6c7a\u3057\u3066\u3044\u308b.\n\u3064\u307e\u308a\u4ee5\u4e0b\u306e\u6027\u8cea\u3092\u8a31\u3057\u3066\u3044\u308b.\n\nAnimal \u3092 Dog \u306b\u4ee3\u5165\u53ef\u80fd \u3082\u3057\u304f\u306f Dog \u3092 Animal \u306b\u4ee3\u5165\u53ef\u80fd \u21d2 (x: Dog) => number \u3092 (x: Animal) => number \u306b\u4ee3\u5165\u53ef\u80fd\n\n\u3053\u306e\u6027\u8cea\u306f\u578b\u30b7\u30b9\u30c6\u30e0\u306e\u5065\u5168\u6027\u3092\u640d\u306a\u3044\u5192\u982d\u30b3\u30fc\u30c9\u306e\u3088\u3046\u306a\u77db\u76fe\u3092\u751f\u3080\u304c, TypeScript \u3067\u306f Array \u578b\u3092\u5171\u5909\u306b\u3059\u308b\u305f\u3081\u306e\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\u3068\u3057\u3066\u3053\u306e\u77db\u76fe\u3092\u98f2\u3093\u3067\u3044\u308b.\n\n\u5065\u5168\u6027: Flow \u306e\u4f8b\nFlow \u3067\u306f\u95a2\u6570\u578b\u3092\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u95a2\u3057\u3066\u53cd\u5909, \u623b\u308a\u5024\u306b\u95a2\u3057\u3066\u5171\u5909\u3068\u3057\u3066\u3044\u308b.\n\u3059\u306a\u308f\u3061,\ntype F1 = (x: P1) => R1;\ntype F2 = (x: P2) => R2;\n\nP1 \u304c P2 \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u304b\u3064 R2 \u304c R1 \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u306a\u3089\u3070, F2 \u306f F1 \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u3067\u3042\u308b, \u3068\u3057\u3066\u3044\u308b.\n\u305d\u306e\u7d50\u679c, \u5065\u5168\u6027\u306f\u4fdd\u305f\u308c\u308b\u4e00\u65b9\u3067, Array \u306e\u5171\u5909\u6027\u3092\u8ae6\u3081\u3066\u3044\u308b. (Dog[] \u3092 Animal[] \u578b\u306b\u4ee3\u5165\u3067\u304d\u306a\u3044)\n\n\u5065\u5168\u6027: TypeScript \u3067\u306e\u8b70\u8ad6\n\u5b9f\u306f 2014 \u5e74\u304b\u3089\u95a2\u6570\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53cd\u5909\u3068\u3059\u308b\u3079\u304d\u3068\u3044\u3046\u63d0\u6848\u304c \u8b70\u8ad6\u3055\u308c\u3066\u3044\u308b.\n\n\u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u306b\u3068\u3063\u3066\u5171\u5909 / \u53cd\u5909\u306e\u6982\u5ff5\u306e\u7406\u89e3\u304c\u96e3\u3057\u3044\u3053\u3068\n\u5065\u5168\u3067\u306f\u306a\u3044\u304c\u5b9f\u7528\u7684\u306a\u30d1\u30bf\u30fc\u30f3\u304c\u591a\u3044\u3053\u3068\nArray \u306e\u5171\u5909\u6027\u3092\u6368\u3066\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3053\u3068\n\n\u306a\u3069\u3092\u7406\u7531\u306b\u53d7\u3051\u5165\u308c\u3089\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u304c, Promise \u578b\u306e\u4e0d\u6574\u5408 (\u5f8c\u8ff0) \u306a\u3069\u306e\u5927\u304d\u306a\u554f\u984c\u304b\u3089, \u72b6\u6cc1\u304c\u5f90\u3005\u306b \u5909\u5316\u3057\u3066\u3044\u308b.\n\nPromise \u578b\u306e\u4e0d\u6574\u5408\n\u3054\u304f\u5358\u7d14\u5316\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u554f\u984c\u304c\u751f\u3058\u3066\u3044\u308b.\ninterface Promise2<T> {\n    then<U>(cb: (value: T) => Promise2<U>): Promise2<U>;    \n}\nvar animal: Promise2<Animal> = null as any\nvar dog: Promise2<Dog> = null as any\n\nanimal = dog // OK (then \u306e\u53cd\u5909\u6027)\ndog = animal // NG \u306b\u3057\u305f\u3044\u304c, then \u306e bivariance \u306e\u305f\u3081\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u901a\u308b\n\n\nLink\n\nWhy are function parameters bivariant? | FAQ \u00b7 Microsoft/TypeScript Wiki https://github.com/Microsoft/TypeScript/wiki/FAQ#why-are-function-parameters-bivariant\n\nFlow | Variance https://flowtype.org/docs/variance.html#function-types\n\nProposal: covariance and contravariance generic type arguments annotations \u00b7 Issue #10717 \u00b7 Microsoft/TypeScript https://github.com/Microsoft/TypeScript/issues/10717\n\nCovariance / Contravariance Annotations \u00b7 Issue #1394 \u00b7 Microsoft/TypeScript https://github.com/Microsoft/TypeScript/issues/1394\n\n\n```ts\nclass Animal { kind: string }\nclass Dog extends Animal { dog_type: string }\n\nfunction showDogType(dog: Dog) { console.log(dog.dog_type) }\n\n// \u4ee3\u5165\u4e0d\u53ef\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u307b\u3057\u3044\nconst someAnimalFunc: (animal: Animal) => void = showDogType\n\n// \u5b9f\u969b\u306f\u3053\u3053\u3067\u30e9\u30f3\u30bf\u30a4\u30e0\u30a8\u30e9\u30fc\nsomeAnimalFunc(new Animal())\n```\n\n\u3053\u306e\u30b3\u30fc\u30c9\u304c\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u306b\u306a\u3089\u305a, \u5b9f\u884c\u6642\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u3053\u3068\u306b\u3064\u3044\u3066.\n\n# TL;DR\n\n- \u578b\u30b7\u30b9\u30c6\u30e0\u306e\u5065\u5168\u6027 (\u578b\u306e\u77db\u76fe\u304c\u751f\u3058\u306a\u3044\u3053\u3068) vs \u5229\u4fbf\u6027\u306e\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\u304b\u3089, \u73fe\u5728\u306e TypeScript \u306f\u5065\u5168\u6027\u3092\u8ae6\u3081\u3066\u3044\u308b\n    - \u95a2\u6570\u578b\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3064\u3044\u3066 bivariant (\u5171\u5909\u304b\u3064\u53cd\u5909), \u623b\u308a\u5024\u306b\u3064\u3044\u3066\u5171\u5909\u3068\u3057\u3066\u3044\u308b\n- \u5065\u5168\u6027\u3092\u5f97\u308b\u305f\u3081\u306e\u63d0\u6848 (\u95a2\u6570\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3064\u3044\u3066\u53cd\u5909\u3068\u3059\u308b) \u304c\u8b70\u8ad6\u3055\u308c\u3066\u3044\u308b\n\n# \u95a2\u6570\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u95a2\u3057\u3066\u306e\u6027\u8cea: \u53cd\u5909\u6027\n\n\u4e00\u822c\u306b\u95a2\u6570\u578b\u306b\u306f\u6b21\u306e\u6027\u8cea\u304c\u6c42\u3081\u3089\u308c\u308b.\n\n```ts\ntype F1 = (x: P1) => void\ntype F2 = (x: P2) => void\n```\n\n> \u6027\u8cea: `P1` \u304c `P2` \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u3067\u3042\u308b \u21d2 `F2` \u304c `F1` \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u3067\u3042\u308b\n\n\u3053\u306e\u6027\u8cea\u306f **\u53cd\u5909\u6027** \u3068\u547c\u3070\u308c\u308b. (`F1`, `F2` \u306b\u5bfe\u3057\u3066 `P1`, `P2` \u306e\u95a2\u4fc2\u304c\u9006\u8ee2\u3057\u3066\u3044\u308b\u3053\u3068\u306b\u6ce8\u610f)\n\n\u5177\u4f53\u7684\u306a\u4f8b\u3067\u306f,\n\n```ts\ntype DogFunc = (x: Dog) => void\ntype AnimalFunc = (x: Animal) => void\n```\n\n`Animal` \u578b\u306e\u5165\u529b\u3092\u671f\u5f85\u3059\u308b `AnimalFunc` \u3092 `DogFunc` \u578b\u306b\u4ee3\u5165\u3057\u3066\u3082\u554f\u984c\u306a\u304f\u52d5\u4f5c\u3059\u308b\u3079\u304d\u3067\u3042\u308b. \u4e00\u65b9\u3067 `Dog` \u578b\u306e\u5165\u529b\u3092\u671f\u5f85\u3059\u308b `DogFunc` \u3092 `AnimalFunc` \u306b\u4ee3\u5165\u3067\u304d\u3066\u3057\u307e\u3046\u3068, `Dog` \u578b\u4ee5\u5916\u306e `Animal` \u30b5\u30d6\u30bf\u30a4\u30d7 (`Cat` \u578b\u3068\u304b) \u3092\u6e21\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a, \u77db\u76fe\u304c\u751f\u3058\u308b.\n\n# \u5171\u5909\u306a Array \u3068\u5171\u5909\u306a\u95a2\u6570\u30d1\u30e9\u30e1\u30fc\u30bf\n\n\u3068\u3053\u308d\u3067, `Dog[]` \u306f `Animal[]` \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u3068\u307f\u306a\u3059\u3079\u304d\u3060\u308d\u3046\u304b. \u73fe\u5728\u306e TypeScript \u306f `Dog[]` \u3092 `Animal[]` \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u3068 **\u307f\u306a\u3057\u3066\u3044\u308b**. \u3064\u307e\u308a\u4ee5\u4e0b\u306e\u6027\u8cea\u3092\u8a8d\u3081\u3066\u3044\u308b.\n\n> \u6027\u8cea: `P1` \u304c `P2` \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u3067\u3042\u308b \u21d2 `P1[]` \u304c `P2[]` \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u3067\u3042\u308b\n\n\u3053\u306e\u6027\u8cea\u306f **\u5171\u5909\u6027** \u3068\u547c\u3070\u308c\u308b.\n\n`Dog[]` \u304c `Animal[]` \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u3067\u3042\u308b\u304b\u5426\u304b\u3092\u5224\u5b9a\u3059\u308b\u969b, \u30b3\u30f3\u30d1\u30a4\u30e9\u306f\u6b21\u306e\u3088\u3046\u306a\u5224\u5b9a\u3092\u884c\u3046.\n\n- `Dog[]` \u306f `Animal[]` \u578b\u306b\u4ee3\u5165\u53ef\u80fd\u304b?\n    - `Dog[]` \u306e\u5168\u3066\u306e\u30e1\u30f3\u30d0 (\u30d7\u30ed\u30d1\u30c6\u30a3, \u30e1\u30bd\u30c3\u30c9) \u304c `Animal[]` \u578b\u306b\u4ee3\u5165\u53ef\u80fd\u304b?\n        - `Dog[].push` \u30e1\u30bd\u30c3\u30c9\u306f `Animal[].push` \u578b\u306b\u4ee3\u5165\u53ef\u80fd\u304b?\n            - \u95a2\u6570\u578b `(x: Dog) => number` \u306f `(x: Animal) => number` \u306b\u4ee3\u5165\u53ef\u80fd\u304b?\n\n\u3053\u3053\u3067\u3055\u3063\u304d\u306e\u8b70\u8ad6\u3092\u601d\u3044\u51fa\u3059.\n\n> \u95a2\u6570\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u53cd\u5909\u6027: `Animal` \u3092 `Dog` \u306b\u4ee3\u5165\u53ef\u80fd \u21d2 `(x: Dog) => number` \u3092 `(x: Animal) => number` \u306b\u4ee3\u5165\u53ef\u80fd\n\n`Animal` \u306f `Dog` \u306b\u4ee3\u5165\u53ef\u80fd\u3067\u306f\u306a\u3044. \u95a2\u6570\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u53cd\u5909\u6027\u304c\u6210\u308a\u7acb\u3064\u3068\u3059\u308b\u3068, \u300c\u578b `(x: Dog) => number` \u306f `(x: Animal) => number` \u306b\u4ee3\u5165\u53ef\u80fd\u304b?\u300d\u306e\u7b54\u3048\u306f no \u3068\u306a\u308b. \u3059\u306a\u308f\u3061\u300c`Dog[]` \u306f `Animal[]` \u578b\u306b\u4ee3\u5165\u53ef\u80fd\u304b?\u300d\u306e\u7b54\u3048\u306f no \u3068\u306a\u3063\u3066\u3057\u307e\u3046.\n\n\u305d\u3053\u3067 TypeScript \u3067\u306f\u95a2\u6570\u30d1\u30e9\u30e1\u30fc\u30bf\u3092 **bivariant** (\u5171\u5909\u304b\u3064\u53cd\u5909) \u3068\u3059\u308b\u3053\u3068\u3067\u3053\u308c\u3092\u89e3\u6c7a\u3057\u3066\u3044\u308b.\n\n\u3064\u307e\u308a\u4ee5\u4e0b\u306e\u6027\u8cea\u3092\u8a31\u3057\u3066\u3044\u308b.\n\n> `Animal` \u3092 `Dog` \u306b\u4ee3\u5165\u53ef\u80fd **\u3082\u3057\u304f\u306f** `Dog` \u3092 `Animal` \u306b\u4ee3\u5165\u53ef\u80fd \u21d2 `(x: Dog) => number` \u3092 `(x: Animal) => number` \u306b\u4ee3\u5165\u53ef\u80fd\n\n\u3053\u306e\u6027\u8cea\u306f\u578b\u30b7\u30b9\u30c6\u30e0\u306e\u5065\u5168\u6027\u3092\u640d\u306a\u3044\u5192\u982d\u30b3\u30fc\u30c9\u306e\u3088\u3046\u306a\u77db\u76fe\u3092\u751f\u3080\u304c, TypeScript \u3067\u306f Array \u578b\u3092\u5171\u5909\u306b\u3059\u308b\u305f\u3081\u306e\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\u3068\u3057\u3066\u3053\u306e\u77db\u76fe\u3092\u98f2\u3093\u3067\u3044\u308b.\n\n# \u5065\u5168\u6027: Flow \u306e\u4f8b\n\nFlow \u3067\u306f\u95a2\u6570\u578b\u3092\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u95a2\u3057\u3066\u53cd\u5909, \u623b\u308a\u5024\u306b\u95a2\u3057\u3066\u5171\u5909\u3068\u3057\u3066\u3044\u308b.\n\n\u3059\u306a\u308f\u3061,\n\n```ts\ntype F1 = (x: P1) => R1;\ntype F2 = (x: P2) => R2;\n```\n\nP1 \u304c P2 \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u304b\u3064 R2 \u304c R1 \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u306a\u3089\u3070, F2 \u306f F1 \u306e\u30b5\u30d6\u30bf\u30a4\u30d7\u3067\u3042\u308b, \u3068\u3057\u3066\u3044\u308b.\n\n\u305d\u306e\u7d50\u679c, \u5065\u5168\u6027\u306f\u4fdd\u305f\u308c\u308b\u4e00\u65b9\u3067, Array \u306e\u5171\u5909\u6027\u3092\u8ae6\u3081\u3066\u3044\u308b. (`Dog[]` \u3092 `Animal[]` \u578b\u306b\u4ee3\u5165\u3067\u304d\u306a\u3044)\n\n# \u5065\u5168\u6027: TypeScript \u3067\u306e\u8b70\u8ad6\n\n\u5b9f\u306f 2014 \u5e74\u304b\u3089\u95a2\u6570\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53cd\u5909\u3068\u3059\u308b\u3079\u304d\u3068\u3044\u3046\u63d0\u6848\u304c [\u8b70\u8ad6\u3055\u308c\u3066\u3044\u308b](https://github.com/Microsoft/TypeScript/issues/1394#issuecomment-250319666).\n\n- \u30a8\u30f3\u30c9\u30e6\u30fc\u30b6\u306b\u3068\u3063\u3066\u5171\u5909 / \u53cd\u5909\u306e\u6982\u5ff5\u306e\u7406\u89e3\u304c\u96e3\u3057\u3044\u3053\u3068\n- \u5065\u5168\u3067\u306f\u306a\u3044\u304c\u5b9f\u7528\u7684\u306a\u30d1\u30bf\u30fc\u30f3\u304c\u591a\u3044\u3053\u3068\n- Array \u306e\u5171\u5909\u6027\u3092\u6368\u3066\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3053\u3068\n\n\u306a\u3069\u3092\u7406\u7531\u306b\u53d7\u3051\u5165\u308c\u3089\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u304c, `Promise` \u578b\u306e\u4e0d\u6574\u5408 (\u5f8c\u8ff0) \u306a\u3069\u306e\u5927\u304d\u306a\u554f\u984c\u304b\u3089, \u72b6\u6cc1\u304c\u5f90\u3005\u306b [\u5909\u5316\u3057\u3066\u3044\u308b](https://github.com/Microsoft/TypeScript/issues/1394#issuecomment-250319666).\n\n## `Promise` \u578b\u306e\u4e0d\u6574\u5408\n\n\u3054\u304f\u5358\u7d14\u5316\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u554f\u984c\u304c\u751f\u3058\u3066\u3044\u308b.\n\n```ts\ninterface Promise2<T> {\n    then<U>(cb: (value: T) => Promise2<U>): Promise2<U>;    \n}\nvar animal: Promise2<Animal> = null as any\nvar dog: Promise2<Dog> = null as any\n\nanimal = dog // OK (then \u306e\u53cd\u5909\u6027)\ndog = animal // NG \u306b\u3057\u305f\u3044\u304c, then \u306e bivariance \u306e\u305f\u3081\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u901a\u308b\n```\n\n# Link\n\n- Why are function parameters bivariant? | FAQ \u00b7 Microsoft/TypeScript Wiki https://github.com/Microsoft/TypeScript/wiki/FAQ#why-are-function-parameters-bivariant\n- Flow | Variance https://flowtype.org/docs/variance.html#function-types\n- Proposal: covariance and contravariance generic type arguments annotations \u00b7 Issue #10717 \u00b7 Microsoft/TypeScript https://github.com/Microsoft/TypeScript/issues/10717\n- Covariance / Contravariance Annotations \u00b7 Issue #1394 \u00b7 Microsoft/TypeScript https://github.com/Microsoft/TypeScript/issues/1394\n", "tags": ["TypeScript", "flow"]}