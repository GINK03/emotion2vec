{"tags": ["d3.js", "SPARQL", "HTML", "JavaScript"], "context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nRDF\u7528\u30af\u30a8\u30ea\u8a00\u8a9e\u300cSPARQL\u300d\u306e\u30af\u30a8\u30ea\u3092\u3001\nDBPedia\uff08Wikipedia\uff09\u3078\u767a\u884c\u3059\u308bHTML\u30d5\u30a1\u30a4\u30eb\u3092\u516c\u958b\u3059\u308b\u3002\n\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u30fb\u5909\u63db\u51e6\u7406\u306fD3.js\u3067\u884c\u3063\u3066\u3044\u308b\u3002\n\n\u30c7\u30e2\nhttp://bl.ocks.org/nezuQ/raw/7292356/\n\n\u30b3\u30fc\u30c9\n\nindex.html\n<!DOCTYPE html>\n<meta charset=\"utf-8\">\n<style>\n.result {\n    border: 2px black solid;\n}\n.result th,.result td {\n    border: 1px gray solid;\n}\n\n</style>\n<body onload=\"init();\">\n<script src=\"http://d3js.org/d3.v3.min.js\" charset=\"utf-8\"></script>\n<span>SPARQL EndPoint URL\uff1a</span>\n<br/>\n<input type=\"text\" id=\"txtUrl\" style=\"width: 250px\" />\n<br/>\n<span>Default Graph IRI\uff1a</span>\n<br/>\n<input type=\"text\" id=\"txtGraphUri\" style=\"width: 250px\" />\n<br/>\n<span>Query Text\uff1a</span>\n<br/>\n<textarea id=\"txtQuery\" style=\"width: 800px; height:50px; vertical-align:top;\"></textarea>\n<br/>\n<input type=\"button\" value=\"\u691c\u7d22\" onclick=\"search(txtUrl.value,txtGraphUri.value,txtQuery.value);\" />\n<br/>\n<script>\nvar txtUrl;\nvar txtGraphUri;\nvar txtQuery;\n\nfunction init() { \n    txtUrl = document.getElementById(\"txtUrl\");\n    txtUrl.value = \"http://ja.dbpedia.org/sparql\";\n    txtGraphUri = document.getElementById(\"txtGraphUri\");\n    txtGraphUri.value = \"http://ja.dbpedia.org\";\n    txtQuery = document.getElementById(\"txtQuery\");\n    txtQuery.value = \"select distinct * where { <http://ja.dbpedia.org/resource/\u6771\u4eac\u90fd> ?p ?o . }\";\n}\n\nfunction search(url,graphuri,query) {\n    d3.select(\".result\").remove();\n    var url = txtUrl.value;\n    var graphuri = txtGraphUri.value;\n    var query = txtQuery.value;\n    d3.json(url + \"?default-graph-uri=\" + encodeURIComponent(graphuri) + \"&query=\" + encodeURIComponent(query) + \"&format=application%2Fsparql-results%2Bjson&timeout=0&debug=on\",\n        function (error, json) {\n            var links = json[\"results\"][\"bindings\"];\n            if(0 < links.length){\n                var headernames = Object.keys(links[0]);\n                var table = d3.select(\"body\").append(\"table\").attr(\"class\", \"result\");\n                var headerrow = table.append(\"tr\");\n                var header = headerrow.selectAll(\"th\")\n                    .data(headernames)\n                    .enter()\n                    .append(\"th\")\n                    .html(function (d) { return d; });\n                var row = table\n                    .selectAll(\"tr\")\n                    .data(links)\n                    .enter()\n                    .append(\"tr\");\n                var data = row.each(function (d) {\n                    var self = d3.select(this);\n                    headernames.forEach(function (name) {\n                        if(d[name].value.match('^http.+')){\n                            self.append(\"td\").html('<a href=\"javascript:searchByURL(\\'' + d[name].value + '\\');\" >' + d[name].value + '</a>');\n                        }else{\n                            self.append(\"td\").text(d[name].value);\n                        }\n                    });\n                });\n            };\n        });\n}\n\nfunction searchByURL(uri){\n    txtUrl.value = uri.match('http://[^/]+')[0] + '/sparql';\n    txtGraphUri.value = uri.match('http://[^/]+')[0] ;\n    txtQuery.value = \"select distinct * where { <\" + uri + \"> ?p ?o .}\";\n    search(txtUrl.value,txtGraphUri.value,txtQuery.value);\n}\n\n</script>\n</body>\n\n\n#\u6982\u8981\n[RDF\u7528\u30af\u30a8\u30ea\u8a00\u8a9e\u300cSPARQL\u300d](http://www.asahi-net.or.jp/~ax2s-kmtn/internet/rdf/rdf-sparql-query.html)\u306e\u30af\u30a8\u30ea\u3092\u3001\n[DBPedia](http://ja.dbpedia.org/)\uff08Wikipedia\uff09\u3078\u767a\u884c\u3059\u308bHTML\u30d5\u30a1\u30a4\u30eb\u3092\u516c\u958b\u3059\u308b\u3002\n\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u30fb\u5909\u63db\u51e6\u7406\u306f[D3.js](http://ja.d3js.node.ws/)\u3067\u884c\u3063\u3066\u3044\u308b\u3002\n\n#\u30c7\u30e2\nhttp://bl.ocks.org/nezuQ/raw/7292356/\n\n#\u30b3\u30fc\u30c9\n```html:index.html\n<!DOCTYPE html>\n<meta charset=\"utf-8\">\n<style>\n.result {\n    border: 2px black solid;\n}\n.result th,.result td {\n    border: 1px gray solid;\n}\n \n</style>\n<body onload=\"init();\">\n<script src=\"http://d3js.org/d3.v3.min.js\" charset=\"utf-8\"></script>\n<span>SPARQL EndPoint URL\uff1a</span>\n<br/>\n<input type=\"text\" id=\"txtUrl\" style=\"width: 250px\" />\n<br/>\n<span>Default Graph IRI\uff1a</span>\n<br/>\n<input type=\"text\" id=\"txtGraphUri\" style=\"width: 250px\" />\n<br/>\n<span>Query Text\uff1a</span>\n<br/>\n<textarea id=\"txtQuery\" style=\"width: 800px; height:50px; vertical-align:top;\"></textarea>\n<br/>\n<input type=\"button\" value=\"\u691c\u7d22\" onclick=\"search(txtUrl.value,txtGraphUri.value,txtQuery.value);\" />\n<br/>\n<script>\nvar txtUrl;\nvar txtGraphUri;\nvar txtQuery;\n \nfunction init() { \n    txtUrl = document.getElementById(\"txtUrl\");\n    txtUrl.value = \"http://ja.dbpedia.org/sparql\";\n    txtGraphUri = document.getElementById(\"txtGraphUri\");\n    txtGraphUri.value = \"http://ja.dbpedia.org\";\n    txtQuery = document.getElementById(\"txtQuery\");\n    txtQuery.value = \"select distinct * where { <http://ja.dbpedia.org/resource/\u6771\u4eac\u90fd> ?p ?o . }\";\n}\n \nfunction search(url,graphuri,query) {\n    d3.select(\".result\").remove();\n    var url = txtUrl.value;\n    var graphuri = txtGraphUri.value;\n    var query = txtQuery.value;\n    d3.json(url + \"?default-graph-uri=\" + encodeURIComponent(graphuri) + \"&query=\" + encodeURIComponent(query) + \"&format=application%2Fsparql-results%2Bjson&timeout=0&debug=on\",\n        function (error, json) {\n            var links = json[\"results\"][\"bindings\"];\n            if(0 < links.length){\n                var headernames = Object.keys(links[0]);\n                var table = d3.select(\"body\").append(\"table\").attr(\"class\", \"result\");\n                var headerrow = table.append(\"tr\");\n                var header = headerrow.selectAll(\"th\")\n                    .data(headernames)\n                    .enter()\n                    .append(\"th\")\n                    .html(function (d) { return d; });\n                var row = table\n                    .selectAll(\"tr\")\n                    .data(links)\n                    .enter()\n                    .append(\"tr\");\n                var data = row.each(function (d) {\n                    var self = d3.select(this);\n                    headernames.forEach(function (name) {\n                        if(d[name].value.match('^http.+')){\n                            self.append(\"td\").html('<a href=\"javascript:searchByURL(\\'' + d[name].value + '\\');\" >' + d[name].value + '</a>');\n                        }else{\n                            self.append(\"td\").text(d[name].value);\n                        }\n                    });\n                });\n            };\n        });\n}\n \nfunction searchByURL(uri){\n    txtUrl.value = uri.match('http://[^/]+')[0] + '/sparql';\n    txtGraphUri.value = uri.match('http://[^/]+')[0] ;\n    txtQuery.value = \"select distinct * where { <\" + uri + \"> ?p ?o .}\";\n    search(txtUrl.value,txtGraphUri.value,txtQuery.value);\n}\n    \n</script>\n</body>\n```"}