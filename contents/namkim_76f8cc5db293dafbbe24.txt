{"context": "\n\nDjango \u30e2\u30c7\u30eb\u306e\u30c6\u30fc\u30d6\u30eb\u540d\u3068\u30ab\u30e9\u30e0\u540d\u3092\u540c\u6642\u306b\u5909\u66f4\u306e\u624b\u9806\n\n\u5909\u66f4\u524d\nclass AAA(models.Model):\n    name = models.CharField()\n\n    class Meta:\n        db_table = 'aaa'\n\nclass BBB(models.Model):\n    name = models.CharField()\n    aaa = models.ForeignKey(AAA)\n\n\n\n\u5909\u66f4\u5f8c\nclass CCC(models.Model):\n    name = models.CharField()\n\n    class Meta:\n        db_table = 'ccc'\n\nclass FooTwo(models.Model):\n    name = models.CharField()\n    ccc = models.ForeignKey(CCC)\n\n\n\u4fee\u6b63\u624b\u9806\n(1). models.py\u4fee\u6b63\nclass CCC(models.Model): <- AAA\u3092CCC\u306b\u4fee\u6b63\n    name = models.CharField()\n\n    class Meta:\n        db_table = 'ccc' <- aaa\u3092ccc\u306b\u4fee\u6b63\n\nclass FooTwo(models.Model):\n    name = models.CharField()\n    aaa = models.ForeignKey(CCC)\u3000<- ForeignKey(AAA)\u3092ForeignKey(CCC)\u306b\u4fee\u6b63\n\n(2). schemammigration\u5f8cmigration\u30d5\u30a1\u30a4\u30eb\u3092\u4ee5\u4e0b\u306b\u4fee\u6b63\n    def forwards(self, orm):\n        db.rename_table('aaa', 'ccc')\n\n    def backwards(self, orm):\n        pass\n\n(3). migrate\n - \u30c6\u30fc\u30d6\u30eb\u540d\u304c\u5909\u66f4\u3055\u308c\u305f\u304b\u3092\u78ba\u8a8d\u3059\u308b AAA -> CCC\n(4). models.py\u4fee\u6b63 \nclass CCC(models.Model):\n    name = models.CharField()\n\n    class Meta:\n        db_table = 'ccc'\n\nclass FooTwo(models.Model):\n    name = models.CharField()\n    ccc = models.ForeignKey(CCC)\u3000<- aaa\u3092ccc\u306b\u4fee\u6b63\n\n(5). schemammigration\u5f8cmigration\u30d5\u30a1\u30a4\u30eb\u3092\u4ee5\u4e0b\u306b\u4fee\u6b63\n    def forwards(self, orm):\n        db.rename_column('ccc', 'aaa', 'ccc')\n\n    def backwards(self, orm):\n        pass\n\n(6). migrate\n - \u30ab\u30e9\u30e0\u540d\u304c\u5909\u66f4\u3055\u308c\u305f\u304b\u3092\u78ba\u8a8d\u3059\u308b aaa -> ccc\n## Django \u30e2\u30c7\u30eb\u306e\u30c6\u30fc\u30d6\u30eb\u540d\u3068\u30ab\u30e9\u30e0\u540d\u3092\u540c\u6642\u306b\u5909\u66f4\u306e\u624b\u9806\n\n## \u5909\u66f4\u524d\n```\nclass AAA(models.Model):\n    name = models.CharField()\n    \n    class Meta:\n        db_table = 'aaa'\n\nclass BBB(models.Model):\n    name = models.CharField()\n    aaa = models.ForeignKey(AAA)\n    \n```\n\n\n## \u5909\u66f4\u5f8c\n```\nclass CCC(models.Model):\n    name = models.CharField()\n\n    class Meta:\n        db_table = 'ccc'\n\nclass FooTwo(models.Model):\n    name = models.CharField()\n    ccc = models.ForeignKey(CCC)\n```\n\n\n## \u4fee\u6b63\u624b\u9806\n\n(1). models.py\u4fee\u6b63\n\n```\nclass CCC(models.Model): <- AAA\u3092CCC\u306b\u4fee\u6b63\n    name = models.CharField()\n\n    class Meta:\n        db_table = 'ccc' <- aaa\u3092ccc\u306b\u4fee\u6b63\n\nclass FooTwo(models.Model):\n    name = models.CharField()\n    aaa = models.ForeignKey(CCC)\u3000<- ForeignKey(AAA)\u3092ForeignKey(CCC)\u306b\u4fee\u6b63\n```\n\n(2). schemammigration\u5f8cmigration\u30d5\u30a1\u30a4\u30eb\u3092\u4ee5\u4e0b\u306b\u4fee\u6b63\n\n```\n    def forwards(self, orm):\n        db.rename_table('aaa', 'ccc')\n\n    def backwards(self, orm):\n        pass\n```\n(3). migrate\n - \u30c6\u30fc\u30d6\u30eb\u540d\u304c\u5909\u66f4\u3055\u308c\u305f\u304b\u3092\u78ba\u8a8d\u3059\u308b AAA -> CCC\n \n(4). models.py\u4fee\u6b63 \n\n```\nclass CCC(models.Model):\n    name = models.CharField()\n\n    class Meta:\n        db_table = 'ccc'\n\nclass FooTwo(models.Model):\n    name = models.CharField()\n    ccc = models.ForeignKey(CCC)\u3000<- aaa\u3092ccc\u306b\u4fee\u6b63\n```\n\n\n(5). schemammigration\u5f8cmigration\u30d5\u30a1\u30a4\u30eb\u3092\u4ee5\u4e0b\u306b\u4fee\u6b63\n\n```\n    def forwards(self, orm):\n        db.rename_column('ccc', 'aaa', 'ccc')\n\n    def backwards(self, orm):\n        pass\n```\n\n(6). migrate\n - \u30ab\u30e9\u30e0\u540d\u304c\u5909\u66f4\u3055\u308c\u305f\u304b\u3092\u78ba\u8a8d\u3059\u308b aaa -> ccc\n", "tags": ["MySQL", "Django", "Python", "ForeignKey"]}