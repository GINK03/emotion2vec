{"context": "SesClient\u3092\u5229\u7528\u3057\u3066\u3002sendEmail\u3067\u306f\u51fa\u6765\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3002\n$client = SesClient::factory([\n                                 'key'     => 'aws key',\n                                 'secret'  => 'aws secret',\n                                 'version' => 'latest',\n                                 'region'  => '', // us-east-1\u306a\u3069\n                             ]);\n\n$to = \"xxx@xxx\";\n$from = \"xxx@xxx\";\n\n$subject = \"\u30c6\u30b9\u30c8\u30e1\u30fc\u30eb\u4ef6\u540d\u3067\u3059\";\n$body = \"\u30c6\u30b9\u30c8\u30e1\u30fc\u30eb\\n\u672c\u6587\u3067\u3059\";\n\n$message = createRawMessage($to, $from, $subject, $body, [\"attach.pdf\", \"attach.jpg\"]);\n\n$result = $client->sendRawEmail([\n                                    'Source'       => $from,\n                                    'Destinations' => [$to],\n                                    'RawMessage'   => [\n                                        'Data' => base64_encode($message),\n                                    ],\n                                ]);\n\n\n\nfunction createRawMessage($to, $source, $subject, $body, $filepaths)\n{\n\n    $charset = 'ISO-2022-JP';\n    $finfo = finfo_open(FILEINFO_MIME_TYPE);\n\n    $boundaryStr = uniqid(rand()); //\u30d0\u30a6\u30f3\u30c0\u30ea\u6587\u5b57\u5217\n    $subject = str_replace(\"\\r\", \"\", mb_encode_mimeheader($subject));\n    $body = mb_convert_encoding($body, $charset);\n\n    $message = \"To: \" . $to . \"\\n\";\n    $message .= \"From: \" . $source . \"\\n\";\n    $message .= \"Subject: \" . $subject = str_replace(\"\\r\", \"\", $subject) . \"\\n\";\n    $message .= \"MIME-Version: 1.0\\n\";\n    $message .= 'Content-Type: multipart/mixed; boundary=\"' . $boundaryStr . '\"';\n    $message .= \"\\n\\n\";\n    $message .= \"--\" . $boundaryStr . \"\\n\";\n    $message .= 'Content-Type: text/plain; charset=' . $charset;\n    $message .= \"\\n\";\n    $message .= \"Content-Transfer-Encoding: 7bit\\n\";\n    $message .= \"Content-Disposition: inline\\n\";\n    $message .= \"\\n\";\n    $message .= $body;\n    $message .= \"\\n\";\n    foreach ($filepaths as $filepath) {\n        $message .= \"\\n\";\n        $path_parts = pathinfo($filepath);\n        $filename = $path_parts['basename'];\n        $mimetype = finfo_file($finfo, $filename);\n        $message .= \"--\" . $boundaryStr . \"\\n\";\n        $message .= 'Content-Type: ' . $mimetype . '; name=\"' . $filename . '\"';\n        $message .= \"\\n\";\n        $message .= \"Content-Transfer-Encoding: base64\\n\";\n        $message .= 'Content-Disposition: attachment; filename=\"' . $filename . '\"';\n        $message .= \"\\n\\n\";\n        $message .= base64_encode(file_get_contents($filepath));\n        $message .= \"\\n\";\n    }\n    return $message;\n\n}\n\n\n\u8b1d\u8f9e \u53c2\u8003URL\nhttps://www.codeproject.com/articles/786596/how-to-use-amazon-ses-to-send-email-from-php\nSesClient\u3092\u5229\u7528\u3057\u3066\u3002sendEmail\u3067\u306f\u51fa\u6765\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3002\n\n\n\n```php\n$client = SesClient::factory([\n                                 'key'     => 'aws key',\n                                 'secret'  => 'aws secret',\n                                 'version' => 'latest',\n                                 'region'  => '', // us-east-1\u306a\u3069\n                             ]);\n\n$to = \"xxx@xxx\";\n$from = \"xxx@xxx\";\n\n$subject = \"\u30c6\u30b9\u30c8\u30e1\u30fc\u30eb\u4ef6\u540d\u3067\u3059\";\n$body = \"\u30c6\u30b9\u30c8\u30e1\u30fc\u30eb\\n\u672c\u6587\u3067\u3059\";\n\n$message = createRawMessage($to, $from, $subject, $body, [\"attach.pdf\", \"attach.jpg\"]);\n\n$result = $client->sendRawEmail([\n                                    'Source'       => $from,\n                                    'Destinations' => [$to],\n                                    'RawMessage'   => [\n                                        'Data' => base64_encode($message),\n                                    ],\n                                ]);\n\n\n\nfunction createRawMessage($to, $source, $subject, $body, $filepaths)\n{\n\n    $charset = 'ISO-2022-JP';\n    $finfo = finfo_open(FILEINFO_MIME_TYPE);\n\n    $boundaryStr = uniqid(rand()); //\u30d0\u30a6\u30f3\u30c0\u30ea\u6587\u5b57\u5217\n    $subject = str_replace(\"\\r\", \"\", mb_encode_mimeheader($subject));\n    $body = mb_convert_encoding($body, $charset);\n\n    $message = \"To: \" . $to . \"\\n\";\n    $message .= \"From: \" . $source . \"\\n\";\n    $message .= \"Subject: \" . $subject = str_replace(\"\\r\", \"\", $subject) . \"\\n\";\n    $message .= \"MIME-Version: 1.0\\n\";\n    $message .= 'Content-Type: multipart/mixed; boundary=\"' . $boundaryStr . '\"';\n    $message .= \"\\n\\n\";\n    $message .= \"--\" . $boundaryStr . \"\\n\";\n    $message .= 'Content-Type: text/plain; charset=' . $charset;\n    $message .= \"\\n\";\n    $message .= \"Content-Transfer-Encoding: 7bit\\n\";\n    $message .= \"Content-Disposition: inline\\n\";\n    $message .= \"\\n\";\n    $message .= $body;\n    $message .= \"\\n\";\n    foreach ($filepaths as $filepath) {\n        $message .= \"\\n\";\n        $path_parts = pathinfo($filepath);\n        $filename = $path_parts['basename'];\n        $mimetype = finfo_file($finfo, $filename);\n        $message .= \"--\" . $boundaryStr . \"\\n\";\n        $message .= 'Content-Type: ' . $mimetype . '; name=\"' . $filename . '\"';\n        $message .= \"\\n\";\n        $message .= \"Content-Transfer-Encoding: base64\\n\";\n        $message .= 'Content-Disposition: attachment; filename=\"' . $filename . '\"';\n        $message .= \"\\n\\n\";\n        $message .= base64_encode(file_get_contents($filepath));\n        $message .= \"\\n\";\n    }\n    return $message;\n\n}\n\n```\n\n\u8b1d\u8f9e \u53c2\u8003URL\nhttps://www.codeproject.com/articles/786596/how-to-use-amazon-ses-to-send-email-from-php\n\n\n", "tags": ["PHP", "AWS", "ses"]}