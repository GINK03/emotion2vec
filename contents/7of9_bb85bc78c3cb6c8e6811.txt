{"context": "\n\u52d5\u4f5c\u74b0\u5883\nDIGILENT ZYBO\nVivado 2015.4 on Windows 8.1 pro(64bit)\nAnalog Discovery 2 (\u4ee5\u4e0bAD2) : Wave generator\u3067sin curve\u3092\u751f\u6210\u3059\u308b\n\n\nPmod\u30b3\u30cd\u30af\u30bf\u304b\u3089AD\u53d6\u8fbc\u307f\u3092\u3057\u305f\u3044\u3002\nhttps://forums.xilinx.com/t5/Zynq-All-Programmable-SoC/XADC-on-ZyBo-PMOD/td-p/516935\n\u3092\u898b\u308b\u3068\u4ee5\u4e0b\u3092XADC Wizard\u306b\u3066\u8ffd\u52a0\u3059\u308c\u3070\u3088\u3044\u3088\u3046\u3060\u3002\n\nvauxn14\nvauxp14\n\n\u4f5c\u696d\u306e\u4e3b\u306a\u6d41\u308c\u306f\u4ee5\u4e0b\u3068\u5927\u534a\u304c\u304b\u3076\u308b\nhttp://qiita.com/7of9/items/2e714e66d4a6c78c4a02\n\n\u95a2\u9023\u8cc7\u6599\nPmod\u30b3\u30cd\u30af\u30bf http://www.marutsu.co.jp/contents/shop/marutsu/datasheet/595400.pdf\n\nVivado\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n\nProject Name: 160709_pmodXADC\n\n\nRTL Project (Do not specify sources at this time \u306f\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304a\u304f)\n\n\nZYBO\u6307\u5b9a\n\n\nCreate Block Design\n\nDesign name: design_1\nadd IP: ZYNQ7 Processing System\nRun Block Automation\nadd IP: XADC Wizard\nRun Connection Automation\n\n\nXADC\u306e\u8a2d\u5b9a\nPmod XADC (Pmod JA)\u3092XADC\u53d6\u8fbc\u307f\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n\nxadc_wiz_0\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3057\u3066Re-customize IP\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u958b\u304f\n\n\n\nADC Setup\u30bf\u30d6\u3092\u958b\u304f\nExternal Multiplexer\u306e\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\nVAUXP14 VAUXN14\u3092\u9078\u629e\u3059\u308b\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\n\nRe-customize IP\u30a6\u30a3\u30f3\u30c9\u30a6\u306b\u3066OK\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u9589\u3058\u308b\n\nxadc_wiz_0\u306bVaux14\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3002\n\n\n\uff0bVaux14\u306e\u300c\uff0b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u5c55\u958b\u8868\u793a\u3059\u308b\n\n\nvauxn14\u3068vauxp14\u304c\u8868\u793a\u3055\u308c\u308b\n\n\n\n\n\nvauxn14\u4e0a\u306b\u3066\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066\u300cMake External\u300d\u3092\u9078\u629e\u3057\u3066\u5916\u90e8\u30dd\u30fc\u30c8\u3092\u8ffd\u52a0\u3059\u308b\nvauxp14\u4e0a\u306b\u3066\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066\u300cMake External\u300d\u3092\u9078\u629e\u3057\u3066\u5916\u90e8\u30dd\u30fc\u30c8\u3092\u8ffd\u52a0\u3059\u308b\n\n\u4ee5\u4e0b\u306e2\u3064\u306e\u30dd\u30fc\u30c8\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3002\n\n\nHDL Wrapper\u4f5c\u6210\n\nSources\u30a6\u30a3\u30f3\u30c9\u30a6\u306b\u304a\u3044\u3066\u3001design_1\u4e0a\u306b\u3066\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066\u300cCreate HDL Wrapper...\u300d\u3092\u9078\u629e\u3059\u308b\n\n\nLet Vivado manager wrapper and auto-update\n\n\n\n\n\u5236\u7d04\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\nXDC\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u3063\u3066\u304a\u304f\u3002\nZYBO\u7528\u306bDIGILENT\u304b\u3089\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u304c\u3001\u3053\u3053\u3067\u306f\u65b0\u898f\u4f5c\u6210\u3059\u308b\u3002\n\nSources\u30a6\u30a3\u30f3\u30c9\u30a6\u306b\u304a\u3044\u3066\u3001Constraints > constrs_1\u4e0a\u306b\u3066\u53f3\u30af\u30ea\u30c3\u30af\u3001\u300cAdd Source\u300d\u9078\u629e\nAdd or create constraints\u9078\u629e\u3057\u3066\u3001Next\nCreate File\u3092\u30af\u30ea\u30c3\u30af\nFile name: pmodXADC.xdc \u3068\u3057\u305f\nFinish\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066Add Sources\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u9589\u3058\u308b\n\n\nRun Implementation\u5b9f\u884c\n\nGenerate Bistream\u307e\u3067\u5b9f\u884c\u3057\u3066\u3082\u30a8\u30e9\u30fc\u3068\u306a\u308b\u306e\u3067\u3001Run Implementation\u3092\u5b9f\u884c\u3059\u308b\nImplementation Completed\u304c\u8868\u793a\u3055\u308c\u305f\u3089Open Implementation Design\u3092\u9078\u629e\u3057\u3066OK\u3092\u30af\u30ea\u30c3\u30af\n\u753b\u9762\u4e0b\u306eI/O Ports\u30bf\u30d6\u3092\u9078\u629e\u3057\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5c55\u958b\u8868\u793a\u3059\u308b\n\n\nScaler ports\u4ee5\u4e0b\u306b\u3042\u308b\n\n\n\n\n\nvauxn14 / vauxp14\u306e\u8a2d\u5b9a\nvauxn14 / vauxp14\u306b\u95a2\u3057\u3066\u4ee5\u4e0b\u306e3\u3064\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\n\nI/O Std\u3092default\u304b\u3089LVCMOS33\u306a\u3069\u306e\u56fa\u5b9a\u5024\u306b\u3059\u308b\nSite\u306bPmod\u306e\u30b3\u30cd\u30af\u30bf\u306e\u30d4\u30f3\u3092\u6307\u5b9a\u3059\u308b\nFixed\u306e\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\nSite\u306e\u5272\u308a\u5f53\u3066\u306f\u4ee5\u4e0b\u306ep25\u306b\u8a18\u8f09\u306e\u56f3\u3092\u53c2\u8003\u306b\u3059\u308b\u3002\nhttp://www.marutsu.co.jp/contents/shop/marutsu/datasheet/595400.pdf\nXADC\u306e\u5834\u5408\u306fPmod JA(XADC)\u30b3\u30cd\u30af\u30bf\u3092\u4f7f\u3046\u3002\u305d\u306e\u4e2d\u3067\u3082JA1:N15\u3068JA7:N16\u3092\u4f7f\u3046\u3088\u3046\u3060\u3002\n\n\n\u4e0a\u8a18\u53c2\u8003\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3002\n\n\n\nCtrl+S\u3067\u4fdd\u5b58\u3059\u308b\nOut of Date Design\u3068\u3044\u3046\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u51fa\u308b\u306e\u3067OK\u3092\u30af\u30ea\u30c3\u30af\nSave Constraints\u3068\u3044\u3046\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u51fa\u308b\u306e\u3067Select an existing file\u3092\u9078\u629e\u3057\u3066OK (\u65b0\u898f\u4f5c\u6210\u3057\u305fpmodXADC.xdc\u306b\u4e0a\u66f8\u304d\u3059\u308b\u3053\u3068\u306b\u306a\u308b)\n\n\nXDC\u30d5\u30a1\u30a4\u30eb\u306e\u78ba\u8a8d\n\u4e0a\u8a18\u306b\u3088\u308apmodXADC.xdc\u30d5\u30a1\u30a4\u30eb\u304c\u5909\u66f4\u3055\u308c\u305f\u3002\n\nOpen Block Design\u3092\u30af\u30ea\u30c3\u30af\nSources\u306eConstraints > constrs_1 > pmodXADC.xdc\u3092\u958b\u304f\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3055\u308c\u3066\u3044\u308b\n\n\npmodXADC.xdc\nset_property IOSTANDARD LVCMOS33 [get_ports vauxn14]\nset_property IOSTANDARD LVCMOS33 [get_ports vauxp14]\nset_property PACKAGE_PIN N16 [get_ports vauxn14]\n\n\nset_property PACKAGE_PIN\u306eN15\u306b\u5bfe\u5fdc\u3059\u308b\u884c\u304c\u306a\u3044\u304c\u4ee5\u964d\u306e\u51e6\u7406\u3067\u306f\u4e00\u5fdc\u53d6\u8fbc\u307f\u306f\u3067\u304d\u3066\u3044\u308b\u3002\u3002\n\nGenerate Bitstream\n\nGenerate Bitstream\u3092\u5b9f\u884c\u3059\u308b\n\n\nExport\n\nFile > Export > Export Hardware...\n\n\nInclude bitstream\u30c1\u30a7\u30c3\u30af\u3057\u3066OK\u30af\u30ea\u30c3\u30af\n\n\nFile > Launch SDK\n\n\nOK\u30af\u30ea\u30c3\u30af\n\n\n\n\nXSDK\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n\n\nFile > New > Application Project\n\nProject name: pmodXADC\nNext\u30af\u30ea\u30c3\u30af\nHellow World\u3092\u9078\u629e\u3057\u3066Finish\n\n\nProject Explorer\u306epmodXADC > src > helloworld.c\u3092\u4ee5\u4e0b\u306e\u30bd\u30fc\u30b9\u306b\u66f8\u63db\u3048\u308b\u3002\n\n\nhelloworld.c\n#include <stdio.h>\n#include \"platform.h\"\n#include \"xadcps.h\"\n\n#define XPAR_AXI_XADC_0_DEVICE_ID ( XPAR_XADC_WIZ_0_DEVICE_ID )\n\nstatic XAdcPs  XADCInst; //XADC\n\nstatic void adc_config(XAdcPs *XADCInstPtr, u16 XAdcDeviceId);\n\nint main()\n{\n    init_platform();\n\n    adc_config(&XADCInst,XPAR_AXI_XADC_0_DEVICE_ID );\n\n    return 0;\n}\n\nstatic void adc_config(XAdcPs *XADCInstPtr, u16 XAdcDeviceId)\n{\n    XAdcPs_Config *ConfigPtr;\n    u32 rawData;\n    float voltage;\n\n    ConfigPtr = XAdcPs_LookupConfig(XPAR_AXI_XADC_0_DEVICE_ID);\n    XAdcPs_CfgInitialize(XADCInstPtr,ConfigPtr,ConfigPtr->BaseAddress);\n    XAdcPs_SetSequencerMode(XADCInstPtr,XADCPS_SEQ_MODE_SINGCHAN);\n\n    //  XAdcPs_SetSeqInputMode(XADCInstPtr, XADCPS_SEQ_MODE_ONEPASS);\n    XAdcPs_SetSeqInputMode(XADCInstPtr, XADCPS_SEQ_MODE_SAFE);\n\n    XAdcPs_SetSeqChEnables(XADCInstPtr, (XADCPS_CH_AUX_MIN+14) );\n\n    while(1){\n        rawData = XAdcPs_GetAdcData(XADCInstPtr, XADCPS_CH_AUX_MIN+14);\n//      voltage = XAdcPs_RawToVoltage(rawData);\n        voltage = (float)rawData / 65536.0;\n        printf(\"%lu %.2f\\n\\r\", rawData, voltage);\n        sleep(1); // sec\n    }\n}\n\n\nXADCPS_CH_AUX_MIN+14\u3068\u3044\u3046\u306e\u306fvaux*14\u306b\u5bfe\u5fdc\u3059\u308b\u3088\u3046\u3060\u3002\n\nAD\u51fa\u529b\u306e\u6e96\u5099\nPmod\u304b\u3089\u306eXADC\u53d6\u8fbc\u307f\u306e\u8a66\u9a13\u306e\u305f\u3081\u3001AD2\u306eWave Generator\u6a5f\u80fd\u3092\u4f7f\u3063\u305f\u3002\nAD2\u304c\u306a\u3044\u5834\u5408\u306f\u30010-1V\u7bc4\u56f2\u306e\u96fb\u5727\u3092\u51fa\u529b\u3059\u308b\u3082\u306e\u3092\u7528\u610f\u3059\u308b\u3053\u3068\u3002\nAD2\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u3092\u884c\u30440-1V\u306e\u9593\u306esin curve\u3092\u5468\u671f10\u79d2\u3067\u51fa\u3059\u3088\u3046\u306b\u3057\u305f\u3002\n\nAD2\u3068ZYBO\u306e\u63a5\u7d9a\u306f\u4ee5\u4e0b\u3068\u3057\u305f\u3002\n\nAD2: W1 <--> ZYBO: Pmod JA Pin1\nAD2: GND <--> ZYBO: Pmod JA Pin7\n\n\n\u5b9f\u884c\n\nTeraTerm\u306a\u3069\u3092\u7acb\u3061\u4e0a\u3052\u3066115200bps\u306b\u3057\u3066\u304a\u304f\nZYBO\u306e\u96fb\u6e90\u6295\u5165\n\u30e1\u30cb\u30e5\u30fc Xilinx Tools > Program FPGA > Program\u3092\u30af\u30ea\u30c3\u30af\nProject Explorer\u306epmodXADC > Binaries > pmodXADC.elf\u4e0a\u3067\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001Run As > 1. Launch on Hardware (System Debugger)\u3067\u5b9f\u884c\u3059\u308b\n\nTeraTerm\u306e\u753b\u9762\u306bAD\u53d6\u8fbc\u307f\u5024\u304c\u8868\u793a\u3055\u308c\u305f\u3002\u53f3\u5074\u306e\u5024\u304c0-1V\u306e\u9593\u3092\u884c\u304d\u6765\u3057\u3066\u3044\u308b\u3002\n48614 0.74\n62194 0.95\n64399 0.98\n54410 0.83\n36064 0.55\n16388 0.25\n2952 0.05\n708 0.01\n10759 0.16\n28858 0.44\n48863 0.75\n62170 0.95\n64241 0.98\n54460 0.83\n36021 0.55\n16426 0.25\n2697 0.04\n\n\n\u306f\u307e\u3063\u305f\u70b9\n\n\u5dee\u52d5\u5165\u529b\u306a\u306e\u306b\u3001ZYBO\u306eGND\u30d4\u30f3\u306bAD2:GND\u3092\u63a5\u7d9a\u3057\u3066\u3044\u305f\n\n\n\u5024\u304c5\u79d2\u9593\u304f\u3089\u3044\u8868\u793a\u3055\u308c\u3001\u6b8b\u308a5\u79d2\u306f0\u3068\u306a\u3063\u305f\n\n\n\n```txt:\u52d5\u4f5c\u74b0\u5883\nDIGILENT ZYBO\nVivado 2015.4 on Windows 8.1 pro(64bit)\nAnalog Discovery 2 (\u4ee5\u4e0bAD2) : Wave generator\u3067sin curve\u3092\u751f\u6210\u3059\u308b\n```\n\nPmod\u30b3\u30cd\u30af\u30bf\u304b\u3089AD\u53d6\u8fbc\u307f\u3092\u3057\u305f\u3044\u3002\n\nhttps://forums.xilinx.com/t5/Zynq-All-Programmable-SoC/XADC-on-ZyBo-PMOD/td-p/516935\n\u3092\u898b\u308b\u3068\u4ee5\u4e0b\u3092XADC Wizard\u306b\u3066\u8ffd\u52a0\u3059\u308c\u3070\u3088\u3044\u3088\u3046\u3060\u3002\n\n- vauxn14\n- vauxp14\n\n\u4f5c\u696d\u306e\u4e3b\u306a\u6d41\u308c\u306f\u4ee5\u4e0b\u3068\u5927\u534a\u304c\u304b\u3076\u308b\nhttp://qiita.com/7of9/items/2e714e66d4a6c78c4a02\n\n## \u95a2\u9023\u8cc7\u6599\n\nPmod\u30b3\u30cd\u30af\u30bf http://www.marutsu.co.jp/contents/shop/marutsu/datasheet/595400.pdf\n\n## Vivado\n\n### \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n\n- Project Name: 160709_pmodXADC\n  - RTL Project (Do not specify sources at this time \u306f\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304a\u304f)\n- ZYBO\u6307\u5b9a\n\n### Create Block Design\n\n- Design name: design_1\n- add IP: ZYNQ7 Processing System\n- Run Block Automation\n- add IP: XADC Wizard\n- Run Connection Automation\n\n### XADC\u306e\u8a2d\u5b9a\n\nPmod XADC (Pmod JA)\u3092XADC\u53d6\u8fbc\u307f\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n\n- xadc_wiz_0\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3057\u3066Re-customize IP\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u958b\u304f\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/81b1f082-5214-a89e-8ad3-c7a22bcdd179.png)\n\n- ADC Setup\u30bf\u30d6\u3092\u958b\u304f\n- External Multiplexer\u306e\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n- VAUXP14 VAUXN14\u3092\u9078\u629e\u3059\u308b\n  \n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\n  ![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/1efdfef5-57e7-ba92-4a70-6defc5b03280.png)\n\n- Re-customize IP\u30a6\u30a3\u30f3\u30c9\u30a6\u306b\u3066OK\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u9589\u3058\u308b\n\nxadc_wiz_0\u306bVaux14\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3002\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/83cf3cd9-91fc-3578-ee95-069601f0a3a8.png)\n\n- \uff0bVaux14\u306e\u300c\uff0b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u5c55\u958b\u8868\u793a\u3059\u308b\n  - vauxn14\u3068vauxp14\u304c\u8868\u793a\u3055\u308c\u308b\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/603c3f26-550b-23ed-9885-9dd0be68061e.png)\n\n- vauxn14\u4e0a\u306b\u3066\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066\u300cMake External\u300d\u3092\u9078\u629e\u3057\u3066\u5916\u90e8\u30dd\u30fc\u30c8\u3092\u8ffd\u52a0\u3059\u308b\n- vauxp14\u4e0a\u306b\u3066\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066\u300cMake External\u300d\u3092\u9078\u629e\u3057\u3066\u5916\u90e8\u30dd\u30fc\u30c8\u3092\u8ffd\u52a0\u3059\u308b\n\n\u4ee5\u4e0b\u306e2\u3064\u306e\u30dd\u30fc\u30c8\u304c\u8ffd\u52a0\u3055\u308c\u308b\u3002\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/db2416fa-6633-9d24-fa09-2b0cc3f3d3b6.png)\n\n### HDL Wrapper\u4f5c\u6210\n\n- Sources\u30a6\u30a3\u30f3\u30c9\u30a6\u306b\u304a\u3044\u3066\u3001design_1\u4e0a\u306b\u3066\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066\u300cCreate HDL Wrapper...\u300d\u3092\u9078\u629e\u3059\u308b\n  - Let Vivado manager wrapper and auto-update\n\n### \u5236\u7d04\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n\nXDC\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u3063\u3066\u304a\u304f\u3002\nZYBO\u7528\u306bDIGILENT\u304b\u3089\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u304c\u3001\u3053\u3053\u3067\u306f\u65b0\u898f\u4f5c\u6210\u3059\u308b\u3002\n\n- Sources\u30a6\u30a3\u30f3\u30c9\u30a6\u306b\u304a\u3044\u3066\u3001Constraints > constrs_1\u4e0a\u306b\u3066\u53f3\u30af\u30ea\u30c3\u30af\u3001\u300cAdd Source\u300d\u9078\u629e\n- Add or create constraints\u9078\u629e\u3057\u3066\u3001Next\n- Create File\u3092\u30af\u30ea\u30c3\u30af\n- File name: pmodXADC.xdc \u3068\u3057\u305f\n- Finish\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066Add Sources\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u9589\u3058\u308b\n\n### Run Implementation\u5b9f\u884c\n\n- Generate Bistream\u307e\u3067\u5b9f\u884c\u3057\u3066\u3082\u30a8\u30e9\u30fc\u3068\u306a\u308b\u306e\u3067\u3001Run Implementation\u3092\u5b9f\u884c\u3059\u308b\n- Implementation Completed\u304c\u8868\u793a\u3055\u308c\u305f\u3089Open Implementation Design\u3092\u9078\u629e\u3057\u3066OK\u3092\u30af\u30ea\u30c3\u30af\n- \u753b\u9762\u4e0b\u306eI/O Ports\u30bf\u30d6\u3092\u9078\u629e\u3057\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5c55\u958b\u8868\u793a\u3059\u308b\n  - Scaler ports\u4ee5\u4e0b\u306b\u3042\u308b\n \n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/58cb941e-6366-f614-a247-e679a14693ef.png)\n\n### vauxn14 / vauxp14\u306e\u8a2d\u5b9a\n\nvauxn14 / vauxp14\u306b\u95a2\u3057\u3066\u4ee5\u4e0b\u306e3\u3064\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\n\n1. I/O Std\u3092default\u304b\u3089LVCMOS33\u306a\u3069\u306e\u56fa\u5b9a\u5024\u306b\u3059\u308b\n2. Site\u306bPmod\u306e\u30b3\u30cd\u30af\u30bf\u306e\u30d4\u30f3\u3092\u6307\u5b9a\u3059\u308b\n3. Fixed\u306e\u30c1\u30a7\u30c3\u30af\u3092\u3064\u3051\u308b\n\nSite\u306e\u5272\u308a\u5f53\u3066\u306f\u4ee5\u4e0b\u306ep25\u306b\u8a18\u8f09\u306e\u56f3\u3092\u53c2\u8003\u306b\u3059\u308b\u3002\nhttp://www.marutsu.co.jp/contents/shop/marutsu/datasheet/595400.pdf\n\nXADC\u306e\u5834\u5408\u306fPmod JA(XADC)\u30b3\u30cd\u30af\u30bf\u3092\u4f7f\u3046\u3002\u305d\u306e\u4e2d\u3067\u3082JA1:N15\u3068JA7:N16\u3092\u4f7f\u3046\u3088\u3046\u3060\u3002\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/c43b530e-0cdf-bce5-8a27-0bcde6edee22.png)\n\n- \u4e0a\u8a18\u53c2\u8003\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3002\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/2948aa09-ef77-91d8-d1a4-f011a87f6551.png)\n\n- Ctrl+S\u3067\u4fdd\u5b58\u3059\u308b\n- Out of Date Design\u3068\u3044\u3046\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u51fa\u308b\u306e\u3067OK\u3092\u30af\u30ea\u30c3\u30af\n- Save Constraints\u3068\u3044\u3046\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u51fa\u308b\u306e\u3067Select an existing file\u3092\u9078\u629e\u3057\u3066OK (\u65b0\u898f\u4f5c\u6210\u3057\u305fpmodXADC.xdc\u306b\u4e0a\u66f8\u304d\u3059\u308b\u3053\u3068\u306b\u306a\u308b)\n\n### XDC\u30d5\u30a1\u30a4\u30eb\u306e\u78ba\u8a8d\n\n\u4e0a\u8a18\u306b\u3088\u308apmodXADC.xdc\u30d5\u30a1\u30a4\u30eb\u304c\u5909\u66f4\u3055\u308c\u305f\u3002\n\n- Open Block Design\u3092\u30af\u30ea\u30c3\u30af\n- Sources\u306eConstraints > constrs_1 > pmodXADC.xdc\u3092\u958b\u304f\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3055\u308c\u3066\u3044\u308b\n\n```pmodXADC.xdc\nset_property IOSTANDARD LVCMOS33 [get_ports vauxn14]\nset_property IOSTANDARD LVCMOS33 [get_ports vauxp14]\nset_property PACKAGE_PIN N16 [get_ports vauxn14]\n```\n\n<font color=red>set_property PACKAGE_PIN\u306eN15\u306b\u5bfe\u5fdc\u3059\u308b\u884c\u304c\u306a\u3044\u304c\u4ee5\u964d\u306e\u51e6\u7406\u3067\u306f\u4e00\u5fdc\u53d6\u8fbc\u307f\u306f\u3067\u304d\u3066\u3044\u308b\u3002</font>\u3002\n\n### Generate Bitstream\n\n- Generate Bitstream\u3092\u5b9f\u884c\u3059\u308b\n\n### Export\n\n- File > Export > Export Hardware...\n  - Include bitstream\u30c1\u30a7\u30c3\u30af\u3057\u3066OK\u30af\u30ea\u30c3\u30af\n- File > Launch SDK\n  - OK\u30af\u30ea\u30c3\u30af\n\n## XSDK\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n\n- File > New > Application Project\n  - Project name: pmodXADC\n  - Next\u30af\u30ea\u30c3\u30af\n  - Hellow World\u3092\u9078\u629e\u3057\u3066Finish\n\n- Project Explorer\u306epmodXADC > src > helloworld.c\u3092\u4ee5\u4e0b\u306e\u30bd\u30fc\u30b9\u306b\u66f8\u63db\u3048\u308b\u3002\n\n```helloworld.c\n#include <stdio.h>\n#include \"platform.h\"\n#include \"xadcps.h\"\n\n#define XPAR_AXI_XADC_0_DEVICE_ID ( XPAR_XADC_WIZ_0_DEVICE_ID )\n\nstatic XAdcPs  XADCInst; //XADC\n\nstatic void adc_config(XAdcPs *XADCInstPtr, u16 XAdcDeviceId);\n\nint main()\n{\n    init_platform();\n\n    adc_config(&XADCInst,XPAR_AXI_XADC_0_DEVICE_ID );\n\n    return 0;\n}\n\nstatic void adc_config(XAdcPs *XADCInstPtr, u16 XAdcDeviceId)\n{\n    XAdcPs_Config *ConfigPtr;\n    u32 rawData;\n    float voltage;\n\n    ConfigPtr = XAdcPs_LookupConfig(XPAR_AXI_XADC_0_DEVICE_ID);\n    XAdcPs_CfgInitialize(XADCInstPtr,ConfigPtr,ConfigPtr->BaseAddress);\n    XAdcPs_SetSequencerMode(XADCInstPtr,XADCPS_SEQ_MODE_SINGCHAN);\n\n    //  XAdcPs_SetSeqInputMode(XADCInstPtr, XADCPS_SEQ_MODE_ONEPASS);\n    XAdcPs_SetSeqInputMode(XADCInstPtr, XADCPS_SEQ_MODE_SAFE);\n\n    XAdcPs_SetSeqChEnables(XADCInstPtr, (XADCPS_CH_AUX_MIN+14) );\n\n    while(1){\n        rawData = XAdcPs_GetAdcData(XADCInstPtr, XADCPS_CH_AUX_MIN+14);\n//      voltage = XAdcPs_RawToVoltage(rawData);\n        voltage = (float)rawData / 65536.0;\n        printf(\"%lu %.2f\\n\\r\", rawData, voltage);\n        sleep(1); // sec\n    }\n}\n```\n\nXADCPS_CH_AUX_MIN+14\u3068\u3044\u3046\u306e\u306fvaux*14\u306b\u5bfe\u5fdc\u3059\u308b\u3088\u3046\u3060\u3002\n\n\n### AD\u51fa\u529b\u306e\u6e96\u5099\n\nPmod\u304b\u3089\u306eXADC\u53d6\u8fbc\u307f\u306e\u8a66\u9a13\u306e\u305f\u3081\u3001AD2\u306eWave Generator\u6a5f\u80fd\u3092\u4f7f\u3063\u305f\u3002\nAD2\u304c\u306a\u3044\u5834\u5408\u306f\u30010-1V\u7bc4\u56f2\u306e\u96fb\u5727\u3092\u51fa\u529b\u3059\u308b\u3082\u306e\u3092\u7528\u610f\u3059\u308b\u3053\u3068\u3002\n\nAD2\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u3092\u884c\u30440-1V\u306e\u9593\u306esin curve\u3092\u5468\u671f10\u79d2\u3067\u51fa\u3059\u3088\u3046\u306b\u3057\u305f\u3002\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/2670e4ea-7ba1-2532-3191-57d96584ef41.png)\n\nAD2\u3068ZYBO\u306e\u63a5\u7d9a\u306f\u4ee5\u4e0b\u3068\u3057\u305f\u3002\n\n- AD2: W1 <--> ZYBO: Pmod JA Pin1\n- AD2: GND <--> ZYBO: Pmod JA Pin7\n\n### \u5b9f\u884c\n\n- TeraTerm\u306a\u3069\u3092\u7acb\u3061\u4e0a\u3052\u3066115200bps\u306b\u3057\u3066\u304a\u304f\n- ZYBO\u306e\u96fb\u6e90\u6295\u5165\n- \u30e1\u30cb\u30e5\u30fc Xilinx Tools > Program FPGA > Program\u3092\u30af\u30ea\u30c3\u30af\n- Project Explorer\u306epmodXADC > Binaries > pmodXADC.elf\u4e0a\u3067\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001Run As > 1. Launch on Hardware (System Debugger)\u3067\u5b9f\u884c\u3059\u308b\n\nTeraTerm\u306e\u753b\u9762\u306bAD\u53d6\u8fbc\u307f\u5024\u304c\u8868\u793a\u3055\u308c\u305f\u3002\u53f3\u5074\u306e\u5024\u304c0-1V\u306e\u9593\u3092\u884c\u304d\u6765\u3057\u3066\u3044\u308b\u3002\n\n```\n48614 0.74\n62194 0.95\n64399 0.98\n54410 0.83\n36064 0.55\n16388 0.25\n2952 0.05\n708 0.01\n10759 0.16\n28858 0.44\n48863 0.75\n62170 0.95\n64241 0.98\n54460 0.83\n36021 0.55\n16426 0.25\n2697 0.04\n```\n\n## \u306f\u307e\u3063\u305f\u70b9\n\n- \u5dee\u52d5\u5165\u529b\u306a\u306e\u306b\u3001ZYBO\u306eGND\u30d4\u30f3\u306bAD2:GND\u3092\u63a5\u7d9a\u3057\u3066\u3044\u305f\n  - \u5024\u304c5\u79d2\u9593\u304f\u3089\u3044\u8868\u793a\u3055\u308c\u3001\u6b8b\u308a5\u79d2\u306f0\u3068\u306a\u3063\u305f\n\n", "tags": ["zybo", "Pmod", "AD2", "Primer", "XADC"]}