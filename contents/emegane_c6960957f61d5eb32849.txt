{"context": " More than 1 year has passed since last update.Symfony2\u3067\u306f\u3001Monolog\u3092\u901a\u3058\u3066\u30ed\u30ae\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u672c\u756a\u74b0\u5883\u306e\u5834\u5408 app/logs/prod.log \u3078\u51fa\u529b\u3055\u308c\u307e\u3059\u304c\u3001\u5225\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u30ed\u30b0\u3092\u51fa\u529b\u3057\u305f\u3044\u3068\u304d\u306f\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u30ed\u30ac\u30fc\u3092\u4f5c\u6210\u3057\u3066\u3001\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u305f\u3068\u3048\u3070\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u4ed8\u3051\u3066\u304b\u3089\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3059\u307e\u3067\u306e\u6642\u9593\u3092\u8a08\u6e2c\u3057\u3066\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30ed\u30b0\u3092 app/logs/prod.performance.log \u306b\u51fa\u529b\u3057\u305f\u3044\u5834\u5408\u3001\n\u307e\u305a\u306f\u3001services.xml\u306b\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u30ed\u30ac\u30fc Acme\\DemoBundle\\Logger\\PerformanceLogger \u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\nservices.xml\n<?xml version=\"1.0\" ?>\n\n<container xmlns=\"http://symfony.com/schema/dic/services\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd\">\n\n    <parameters>\n        <parameter key=\"acme_demo.performance.logger.class\">Acme\\DemoBundle\\Logger\\PerformanceLogger</parameter>\n        <parameter key=\"acme_demo.performance.logger_handler.class\">Monolog\\Handler\\StreamHandler</parameter>\n    </parameters>\n\n    <services>\n        <service id=\"acme_demo.performance.logger\" class=\"%acme_demo.performance.logger.class%\">\n            <argument>performance</argument>\n            <call method=\"pushHandler\">\n                <argument type=\"service\" id=\"acme_demo.performance.logger_handler\" />\n            </call>\n        </service>\n\n        <service id=\"acme_demo.performance.logger_handler\" class=\"%acme_demo.performance.logger_handler.class%\">\n            <argument>%kernel.logs_dir%/%kernel.environment%.performance.log</argument>\n        </service>\n    </services>\n</container>\n\n\nAcme\\DemoBundle\\Logger\\PerformanceLogger \u306f\u3001Symfony\\Bridge\\Monolog\\Logger \u3092\u7d99\u627f\u3057\u3001\u5fc5\u8981\u306a\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nPerformanceLogger.php\n<?php\nnamespace Acme\\DemoBundle\\Logger;\nuse Symfony\\Bridge\\Monolog\\Logger;\n\nclass PerformanceLogger extends Logger\n{\n    public function measure($startTime, $endTime)\n    {\n        $processTime = $endTime - $startTime;\n\n        $message = $processTime;\n\n        return $this->addRecord(self::INFO, $message, array());\n    }\n}\n\n\n\u3042\u3068\u306f\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u304b\u3089\u547c\u3073\u51fa\u3059\u3060\u3051\u3067\u3059\u3002\n\nDefaultController.php\n<?php\nnamespace Acme\\DemoBundle\\Controller;\nuse Symfony\\Bundle\\FrameworkBundle\\Controller\\Controller;\nuse Symfony\\Component\\HttpFoundation\\Response;\nuse Symfony\\Component\\HttpFoundation\\Request;\n\nclass DefaultController extends Controller\n{\n    public function indexAction(Request $request)\n    {\n        // Start time\n        $startTime = microtime(true);\n\n        // Logging\n        $logger = $this->get('acme_demo.performance.logger');\n        $logger->measure($startTime, microtime(true));\n    }\n}\n\n\nSymfony2\u3067\u306f\u3001[Monolog\u3092\u901a\u3058\u3066\u30ed\u30ae\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059](http://docs.symfony.gr.jp/symfony2/cookbook/logging/monolog.html)\u3002\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u672c\u756a\u74b0\u5883\u306e\u5834\u5408 `app/logs/prod.log` \u3078\u51fa\u529b\u3055\u308c\u307e\u3059\u304c\u3001\u5225\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u30ed\u30b0\u3092\u51fa\u529b\u3057\u305f\u3044\u3068\u304d\u306f\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u30ed\u30ac\u30fc\u3092\u4f5c\u6210\u3057\u3066\u3001\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\n- - -\n\n\u305f\u3068\u3048\u3070\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u4ed8\u3051\u3066\u304b\u3089\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3059\u307e\u3067\u306e\u6642\u9593\u3092\u8a08\u6e2c\u3057\u3066\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30ed\u30b0\u3092 `app/logs/prod.performance.log` \u306b\u51fa\u529b\u3057\u305f\u3044\u5834\u5408\u3001\n\n\u307e\u305a\u306f\u3001services.xml\u306b\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u30ed\u30ac\u30fc `Acme\\DemoBundle\\Logger\\PerformanceLogger` \u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\n```xml:services.xml\n<?xml version=\"1.0\" ?>\n\n<container xmlns=\"http://symfony.com/schema/dic/services\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd\">\n\n    <parameters>\n        <parameter key=\"acme_demo.performance.logger.class\">Acme\\DemoBundle\\Logger\\PerformanceLogger</parameter>\n        <parameter key=\"acme_demo.performance.logger_handler.class\">Monolog\\Handler\\StreamHandler</parameter>\n    </parameters>\n\n    <services>\n        <service id=\"acme_demo.performance.logger\" class=\"%acme_demo.performance.logger.class%\">\n            <argument>performance</argument>\n            <call method=\"pushHandler\">\n                <argument type=\"service\" id=\"acme_demo.performance.logger_handler\" />\n            </call>\n        </service>\n\n        <service id=\"acme_demo.performance.logger_handler\" class=\"%acme_demo.performance.logger_handler.class%\">\n            <argument>%kernel.logs_dir%/%kernel.environment%.performance.log</argument>\n        </service>\n    </services>\n</container>\n```\n\n`Acme\\DemoBundle\\Logger\\PerformanceLogger` \u306f\u3001`Symfony\\Bridge\\Monolog\\Logger` \u3092\u7d99\u627f\u3057\u3001\u5fc5\u8981\u306a\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```php:PerformanceLogger.php\n<?php\nnamespace Acme\\DemoBundle\\Logger;\nuse Symfony\\Bridge\\Monolog\\Logger;\n\nclass PerformanceLogger extends Logger\n{\n    public function measure($startTime, $endTime)\n    {\n        $processTime = $endTime - $startTime;\n\n        $message = $processTime;\n\n        return $this->addRecord(self::INFO, $message, array());\n    }\n}\n```\n\n\u3042\u3068\u306f\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u304b\u3089\u547c\u3073\u51fa\u3059\u3060\u3051\u3067\u3059\u3002\n\n```php:DefaultController.php\n<?php\nnamespace Acme\\DemoBundle\\Controller;\nuse Symfony\\Bundle\\FrameworkBundle\\Controller\\Controller;\nuse Symfony\\Component\\HttpFoundation\\Response;\nuse Symfony\\Component\\HttpFoundation\\Request;\n\nclass DefaultController extends Controller\n{\n    public function indexAction(Request $request)\n    {\n        // Start time\n        $startTime = microtime(true);\n        \n        // Logging\n        $logger = $this->get('acme_demo.performance.logger');\n        $logger->measure($startTime, microtime(true));\n    }\n}", "tags": ["Symfony2"]}