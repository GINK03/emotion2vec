{"context": "\n\u52d5\u4f5c\u74b0\u5883\nC++ Builder XE4\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u683c\u5b50\u72b6\u914d\u7f6e\u306eTCheckBox\u306eChecked\u3092\u884c\u5217\u3067\u53d6\u5f97\u3059\u308b\u3002\n\nTag\u3092\u4f7f\u3063\u3066\u307f\u305f\u3002\n\nUnit1.cpp\n//---------------------------------------------------------------------------\n\n#include <vcl.h>\n#pragma hdrstop\n\n#include \"Unit1.h\"\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm1 *Form1;\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner)\n    : TForm(Owner)\n{\n}\n//---------------------------------------------------------------------------\n\n/*\nTag\u306e\u8a2d\u5b9a ( 3\u884c3\u5217 )\n101 102 103\n201 202 203\n301 302 303\n*/\n\nvoid __fastcall TForm1::B_readClick(TObject *Sender)\n{\n    bool mtrx[3][3];\n\n    for(int idx=0; idx < this->ComponentCount; idx++) {\n        if (dynamic_cast<TCheckBox *>(this->Components[idx]) == NULL) {\n            continue;\n        }\n\n        TCheckBox *srcPtr = (TCheckBox *)this->Components[idx];\n        int tag = srcPtr->Tag;\n\n        if (tag < 101 || tag > 303) { // \u5bfe\u8c61\u3068\u306a\u308bTCheckBox\u306e\u8b58\u5225 (TODO: Tag\u5024\u4ee5\u5916\u306e\u8b58\u5225)\n            continue;\n        }\n        int col = tag % 100 - 1;\n        int lin = tag / 100 - 1;\n        mtrx[lin][col] = srcPtr->Checked;\n    }\n\n    int nop=1; // for breakpoint ( to check mtrx[][] )\n}\n//---------------------------------------------------------------------------\n\n\n\u4e0a\u8a18\u306eint nop=1;\u306e\u884c\u3067\u505c\u6b62\u3057\u3066\u3001mtrx[][]\u3092\u898b\u308b\u3068\u4ee5\u4e0b\u3068\u306a\u3063\u305f\u3002\n\n\u7121\u95a2\u4fc2\u306eTCheckBox\u3092\u7121\u8996\u3059\u308b\u8b58\u5225\u65b9\u6cd5\u306f\u8981\u691c\u8a0e\u3002\n10\u884c10\u5217\u306e\u8aad\u53d6\u308a\u306b\u3044\u3044\u3060\u308d\u3046\u304b\u3002\n\ncode v0.2\n\u4e0a\u8a18\u306e\u30b3\u30fc\u30c9\u304b\u3089\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u3066\u307f\u305f\u3002\n\nTForm\u30dd\u30a4\u30f3\u30bf\u6307\u5b9a\n\u89aa\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u540d\u6307\u5b9a\nline, column\u4f4d\u7f6e\u6307\u5b9a\n\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u3001\u4efb\u610f\u306e\u4f4d\u7f6e\u306eChecked\u72b6\u614b\u3092\u53d6\u5f97\u3057\u3084\u3059\u304f\u306a\u308b\u3002\n\nUnit1.cpp\n//---------------------------------------------------------------------------\n\n#include <vcl.h>\n#pragma hdrstop\n\n#include \"Unit1.h\"\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm1 *Form1;\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner)\n    : TForm(Owner)\n{\n}\n//---------------------------------------------------------------------------\n\nbool __fastcall TForm1::getChecked(TForm *formPtr, String parentName, int lineIdx, int columnIdx, int *errCodePtr)\n{\n    if (errCodePtr == NULL) {\n        return false;\n    }\n\n    int li, ci; // 0\u59cb\u307e\u308a\n    String prntNam;\n    bool found = false;\n    TCheckBox *srcPtr;\n\n    for(int idx = 0; idx < formPtr->ComponentCount; idx++) {\n        if (dynamic_cast<TCheckBox *>(formPtr->Components[idx]) == NULL) {\n            continue;\n        }\n\n        prntNam = formPtr->Components[idx]->GetParentComponent()->Name;\n        if (prntNam != parentName) {\n            continue;\n        }\n\n        srcPtr = (TCheckBox *)formPtr->Components[idx];\n        ci = srcPtr->Tag % 100 - 1;\n        li = srcPtr->Tag / 100 - 1;\n\n        if (li == lineIdx && ci == columnIdx) {\n            found = true;\n            break;\n        }\n    }\n\n    if (found) {\n        *errCodePtr = NO_ERR;\n        return srcPtr->Checked;\n    }\n\n    *errCodePtr = ERR_OUT_OF_RANGE;\n    return false;\n}\n//---------------------------------------------------------------------------\n\nvoid __fastcall TForm1::B_checkPanel1Click(TObject *Sender)\n{\n    bool res;\n\n    String prntNam = L\"Panel1\";\n    int errCode;\n    String msg;\n\n    for(int li = 0; li < 3; li++) { // li: line index\n        msg = L\"\";\n        for(int ci = 0; ci < 3; ci++) { // ci: columne index\n            res = getChecked(this, prntNam, li, ci, &errCode);\n            if ( errCode == TForm1::NO_ERR ) {\n                msg = msg + L\" \" + BoolToStr(res);\n            } else {\n                msg = msg + L\" x \";\n            }\n        }\n        OutputDebugString(msg.c_str());\n    }\n}\nvoid __fastcall TForm1::B_checkPanel2Click(TObject *Sender)\n{\n    bool res;\n\n    String prntNam = L\"Panel2\";\n    int errCode;\n    String msg;\n\n    for(int li = 0; li < 3; li++) { // li: line index\n        msg = L\"\";\n        for(int ci = 0; ci < 3; ci++) { // ci: columne index\n            res = getChecked(this, prntNam, li, ci, &errCode);\n            if ( errCode == TForm1::NO_ERR ) {\n                msg = msg + L\" \" + BoolToStr(res);\n            } else {\n                msg = msg + L\" x \";\n            }\n        }\n        OutputDebugString(msg.c_str());\n    }\n}\n//---------------------------------------------------------------------------\n\n\n\nUnit1.h\n//---------------------------------------------------------------------------\n\n#ifndef Unit1H\n#define Unit1H\n//---------------------------------------------------------------------------\n#include <System.Classes.hpp>\n#include <Vcl.Controls.hpp>\n#include <Vcl.StdCtrls.hpp>\n#include <Vcl.Forms.hpp>\n#include <Vcl.ExtCtrls.hpp>\n//---------------------------------------------------------------------------\nclass TForm1 : public TForm\n{\n__published:    // IDE \u3067\u7ba1\u7406\u3055\u308c\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n    TPanel *Panel1;\n    TPanel *Panel2;\n    TCheckBox *CheckBox1;\n    TCheckBox *CheckBox2;\n    TCheckBox *CheckBox3;\n    TCheckBox *CheckBox4;\n    TCheckBox *CheckBox5;\n    TCheckBox *CheckBox6;\n    TCheckBox *CheckBox7;\n    TCheckBox *CheckBox8;\n    TCheckBox *CheckBox9;\n    TCheckBox *CheckBox10;\n    TCheckBox *CheckBox11;\n    TCheckBox *CheckBox12;\n    TCheckBox *CheckBox13;\n    TButton *B_checkPanel1;\n    TButton *B_checkPanel2;\n    void __fastcall B_checkPanel1Click(TObject *Sender);\n    void __fastcall B_checkPanel2Click(TObject *Sender);\nprivate:    // \u30e6\u30fc\u30b6\u30fc\u5ba3\u8a00\npublic:     // \u30e6\u30fc\u30b6\u30fc\u5ba3\u8a00\n    enum {\n        NO_ERR = 0,\n        ERR_OUT_OF_RANGE,\n    };\n\n    bool __fastcall getChecked(TForm *formPtr, String parentName, int lineIdx, int columnIdx, int *errCodePtr);\n\n    __fastcall TForm1(TComponent* Owner);\n};\n//---------------------------------------------------------------------------\nextern PACKAGE TForm1 *Form1;\n//---------------------------------------------------------------------------\n#endif\n\n\n\n\ncheckPanel1\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u6642\u306e\u7d50\u679c\n\n\u7d50\u679c\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b:  -1 0 -1 \u30d7\u30ed\u30bb\u30b9 Project1.exe (2392)\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b:  -1 -1 -1 \u30d7\u30ed\u30bb\u30b9 Project1.exe (2392)\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b:  -1 0 -1 \u30d7\u30ed\u30bb\u30b9 Project1.exe (2392)\n\n\n\ncheckPanel2\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u6642\u306e\u7d50\u679c\n\n\u7d50\u679c\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b:  -1 0 x  \u30d7\u30ed\u30bb\u30b9 Project1.exe (2392)\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b:  -1 -1 x  \u30d7\u30ed\u30bb\u30b9 Project1.exe (2392)\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b:  x  x  x  \u30d7\u30ed\u30bb\u30b9 Project1.exe (2392)\n\n\n-1: Checked\nx: \u7bc4\u56f2\u5916\u30a8\u30e9\u30fc\n```txt:\u52d5\u4f5c\u74b0\u5883\nC++ Builder XE4\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u683c\u5b50\u72b6\u914d\u7f6e\u306eTCheckBox\u306eChecked\u3092\u884c\u5217\u3067\u53d6\u5f97\u3059\u308b\u3002\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/c8c57c25-6486-5ef8-7d75-6ddd4b9906b3.png)\n\nTag\u3092\u4f7f\u3063\u3066\u307f\u305f\u3002\n\n```Unit1.cpp\n//---------------------------------------------------------------------------\n\n#include <vcl.h>\n#pragma hdrstop\n\n#include \"Unit1.h\"\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm1 *Form1;\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner)\n\t: TForm(Owner)\n{\n}\n//---------------------------------------------------------------------------\n\n/*\nTag\u306e\u8a2d\u5b9a ( 3\u884c3\u5217 )\n101 102 103\n201 202 203\n301 302 303\n*/\n\nvoid __fastcall TForm1::B_readClick(TObject *Sender)\n{\n\tbool mtrx[3][3];\n\n\tfor(int idx=0; idx < this->ComponentCount; idx++) {\n\t\tif (dynamic_cast<TCheckBox *>(this->Components[idx]) == NULL) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tTCheckBox *srcPtr = (TCheckBox *)this->Components[idx];\n\t\tint tag = srcPtr->Tag;\n\n\t\tif (tag < 101 || tag > 303) { // \u5bfe\u8c61\u3068\u306a\u308bTCheckBox\u306e\u8b58\u5225 (TODO: Tag\u5024\u4ee5\u5916\u306e\u8b58\u5225)\n\t\t\tcontinue;\n\t\t}\n\t\tint col = tag % 100 - 1;\n\t\tint lin = tag / 100 - 1;\n\t\tmtrx[lin][col] = srcPtr->Checked;\n\t}\n\n\tint nop=1; // for breakpoint ( to check mtrx[][] )\n}\n//---------------------------------------------------------------------------\n```\n\n\u4e0a\u8a18\u306eint nop=1;\u306e\u884c\u3067\u505c\u6b62\u3057\u3066\u3001mtrx[][]\u3092\u898b\u308b\u3068\u4ee5\u4e0b\u3068\u306a\u3063\u305f\u3002\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/036f68c1-3c89-ab54-fee2-bffd1ec51998.png)\n\n\u7121\u95a2\u4fc2\u306eTCheckBox\u3092\u7121\u8996\u3059\u308b\u8b58\u5225\u65b9\u6cd5\u306f\u8981\u691c\u8a0e\u3002\n\n10\u884c10\u5217\u306e\u8aad\u53d6\u308a\u306b\u3044\u3044\u3060\u308d\u3046\u304b\u3002\n\n\n## code v0.2\n\n\u4e0a\u8a18\u306e\u30b3\u30fc\u30c9\u304b\u3089\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u3066\u307f\u305f\u3002\n\n- TForm\u30dd\u30a4\u30f3\u30bf\u6307\u5b9a\n- \u89aa\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u540d\u6307\u5b9a\n- line, column\u4f4d\u7f6e\u6307\u5b9a\n\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u3001\u4efb\u610f\u306e\u4f4d\u7f6e\u306eChecked\u72b6\u614b\u3092\u53d6\u5f97\u3057\u3084\u3059\u304f\u306a\u308b\u3002\n\n```Unit1.cpp\n//---------------------------------------------------------------------------\n\n#include <vcl.h>\n#pragma hdrstop\n\n#include \"Unit1.h\"\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm1 *Form1;\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner)\n\t: TForm(Owner)\n{\n}\n//---------------------------------------------------------------------------\n\nbool __fastcall TForm1::getChecked(TForm *formPtr, String parentName, int lineIdx, int columnIdx, int *errCodePtr)\n{\n\tif (errCodePtr == NULL) {\n\t\treturn false;\n\t}\n\n\tint li, ci; // 0\u59cb\u307e\u308a\n\tString prntNam;\n\tbool found = false;\n\tTCheckBox *srcPtr;\n\n\tfor(int idx = 0; idx < formPtr->ComponentCount; idx++) {\n\t\tif (dynamic_cast<TCheckBox *>(formPtr->Components[idx]) == NULL) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tprntNam = formPtr->Components[idx]->GetParentComponent()->Name;\n\t\tif (prntNam != parentName) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tsrcPtr = (TCheckBox *)formPtr->Components[idx];\n\t\tci = srcPtr->Tag % 100 - 1;\n\t\tli = srcPtr->Tag / 100 - 1;\n\n\t\tif (li == lineIdx && ci == columnIdx) {\n\t\t\tfound = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (found) {\n\t\t*errCodePtr = NO_ERR;\n\t\treturn srcPtr->Checked;\n\t}\n\n\t*errCodePtr = ERR_OUT_OF_RANGE;\n\treturn false;\n}\n//---------------------------------------------------------------------------\n\nvoid __fastcall TForm1::B_checkPanel1Click(TObject *Sender)\n{\n\tbool res;\n\n\tString prntNam = L\"Panel1\";\n\tint errCode;\n\tString msg;\n\n\tfor(int li = 0; li < 3; li++) { // li: line index\n\t\tmsg = L\"\";\n\t\tfor(int ci = 0; ci < 3; ci++) {\t// ci: columne index\n\t\t\tres = getChecked(this, prntNam, li, ci, &errCode);\n\t\t\tif ( errCode == TForm1::NO_ERR ) {\n\t\t\t\tmsg = msg + L\" \" + BoolToStr(res);\n\t\t\t} else {\n\t\t\t\tmsg = msg + L\" x \";\n\t\t\t}\n\t\t}\n\t\tOutputDebugString(msg.c_str());\n\t}\n}\nvoid __fastcall TForm1::B_checkPanel2Click(TObject *Sender)\n{\n\tbool res;\n\n\tString prntNam = L\"Panel2\";\n\tint errCode;\n\tString msg;\n\n\tfor(int li = 0; li < 3; li++) { // li: line index\n\t\tmsg = L\"\";\n\t\tfor(int ci = 0; ci < 3; ci++) {\t// ci: columne index\n\t\t\tres = getChecked(this, prntNam, li, ci, &errCode);\n\t\t\tif ( errCode == TForm1::NO_ERR ) {\n\t\t\t\tmsg = msg + L\" \" + BoolToStr(res);\n\t\t\t} else {\n\t\t\t\tmsg = msg + L\" x \";\n\t\t\t}\n\t\t}\n\t\tOutputDebugString(msg.c_str());\n\t}\n}\n//---------------------------------------------------------------------------\n```\n\n```Unit1.h\n//---------------------------------------------------------------------------\n\n#ifndef Unit1H\n#define Unit1H\n//---------------------------------------------------------------------------\n#include <System.Classes.hpp>\n#include <Vcl.Controls.hpp>\n#include <Vcl.StdCtrls.hpp>\n#include <Vcl.Forms.hpp>\n#include <Vcl.ExtCtrls.hpp>\n//---------------------------------------------------------------------------\nclass TForm1 : public TForm\n{\n__published:\t// IDE \u3067\u7ba1\u7406\u3055\u308c\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\tTPanel *Panel1;\n\tTPanel *Panel2;\n\tTCheckBox *CheckBox1;\n\tTCheckBox *CheckBox2;\n\tTCheckBox *CheckBox3;\n\tTCheckBox *CheckBox4;\n\tTCheckBox *CheckBox5;\n\tTCheckBox *CheckBox6;\n\tTCheckBox *CheckBox7;\n\tTCheckBox *CheckBox8;\n\tTCheckBox *CheckBox9;\n\tTCheckBox *CheckBox10;\n\tTCheckBox *CheckBox11;\n\tTCheckBox *CheckBox12;\n\tTCheckBox *CheckBox13;\n\tTButton *B_checkPanel1;\n\tTButton *B_checkPanel2;\n\tvoid __fastcall B_checkPanel1Click(TObject *Sender);\n\tvoid __fastcall B_checkPanel2Click(TObject *Sender);\nprivate:\t// \u30e6\u30fc\u30b6\u30fc\u5ba3\u8a00\npublic:\t\t// \u30e6\u30fc\u30b6\u30fc\u5ba3\u8a00\n\tenum {\n\t\tNO_ERR = 0,\n\t\tERR_OUT_OF_RANGE,\n\t};\n\n\tbool __fastcall getChecked(TForm *formPtr, String parentName, int lineIdx, int columnIdx, int *errCodePtr);\n\n\t__fastcall TForm1(TComponent* Owner);\n};\n//---------------------------------------------------------------------------\nextern PACKAGE TForm1 *Form1;\n//---------------------------------------------------------------------------\n#endif\n```\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/1cb8dfc0-8513-35ab-551c-155ce9036615.png)\n\n### checkPanel1\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u6642\u306e\u7d50\u679c\n\n```txt:\u7d50\u679c\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b:  -1 0 -1 \u30d7\u30ed\u30bb\u30b9 Project1.exe (2392)\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b:  -1 -1 -1 \u30d7\u30ed\u30bb\u30b9 Project1.exe (2392)\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b:  -1 0 -1 \u30d7\u30ed\u30bb\u30b9 Project1.exe (2392)\n```\n\n### checkPanel2\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u6642\u306e\u7d50\u679c\n\n```txt:\u7d50\u679c\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b:  -1 0 x  \u30d7\u30ed\u30bb\u30b9 Project1.exe (2392)\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b:  -1 -1 x  \u30d7\u30ed\u30bb\u30b9 Project1.exe (2392)\n\u30c7\u30d0\u30c3\u30b0\u51fa\u529b:  x  x  x  \u30d7\u30ed\u30bb\u30b9 Project1.exe (2392)\n```\n\n-1: Checked\nx: \u7bc4\u56f2\u5916\u30a8\u30e9\u30fc\n\n\n\n", "tags": ["cppBuilder"]}