{"context": " More than 1 year has passed since last update.Testing Sencha Apps by Mats Bryntse (Sencha Touch North West Meetup)\n\u3068\u3044\u3046\u52d5\u753b\u3092\u898b\u3066Siesta\u306b\u8208\u5473\u3092\u6301\u3063\u305f\u306e\u3067\u3001\u3055\u308f\u308a\u59cb\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u3053\u306e\u753b\u9762\u306f\u3001\u3053\u306e\u8a18\u4e8b\u306e\u6700\u5f8c\u306e\u30c6\u30b9\u30c8\u3001GridPanel\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u305f\u3068\u304d\u306e\u753b\u9762\u3067\u3059\u3002\u753b\u9762\u4e0a\u3067\u30c6\u30b9\u30c8\u3092\u9078\u629e\u3057\u3066\u5b9f\u884c\u3055\u305b\u308b\u3002\u30d3\u30b8\u30e5\u30a2\u30eb\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u30c6\u30b9\u30c8\u3067\u306f\u3001\u305d\u306e\u8868\u793a\u3082\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u5192\u982d\u306e\u30d3\u30c7\u30aa\u3092\u898b\u3066\u3044\u3066\u3082\u3001\u3068\u3066\u3082\u30ef\u30af\u30ef\u30af\u3059\u308b\u3088\u3046\u306a\u4f5c\u308a\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\nSiesta\u306e\u914d\u7f6e\nSiesta\u306eexample\u306b\u5f93\u3063\u3066\u6b21\u306e\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n  \u25be public_html/\n    \u25be ex_siesta/\n      \u25b8 app/\n      \u25b8 data/\n      \u25b8 resources/\n      \u25b8 siesta/   <-- Siesta\u306eSDK\n      \u25b8 tests/\n        test_harness.html\n        test_harness.js\n        app.js\n        index.html\n    \u25b8 extjs/        <-- Ext JS \u306eSDK\n\n\u30c6\u30b9\u30c8\u306e\u8d77\u70b9\u3068\u306a\u308b\u306e\u306f\u3001test_harness.html \u3068 test_harness.js \u3067\u3059\u3002\ntest_harness.html\n<!DOCTYPE html>\n<html>\n    <head>\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"../../extjs/resources/css/ext-all.css\"/>\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"siesta/resources/css/siesta-all.css\">\n\n        <script type=\"text/javascript\" src=\"../../extjs/ext-all.js\"></script>\n        <script type=\"text/javascript\" src=\"siesta/siesta-all.js\"></script>\n\n        <script type=\"text/javascript\" src=\"test_harness.js\"></script>\n    </head>\n\n    <body>\n    </body>\n</html>\n\nCSS\u3068JS\u3001\u305d\u308c\u305e\u308cExt JS\u3068Siesta\u306e\u3082\u306e\u3092\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002\n\u6700\u5f8c\u306b\u3001test_harness.js\u3092\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002\n\nHarness\ntest_harness.js\nvar Harness = Siesta.Harness.Browser.ExtJS;\n\nHarness.configure({\n    title       : 'MVC Test Suite',\n    loaderPath  : { 'EX' : 'app' },\n\n    preload : [\n       &quot;../extjs/resources/css/ext-all.css&quot;,\n       &quot;../extjs/ext-all-debug.js&quot;\n    ]\n\n});\n\nHarness.start({\n    group: 'Sanity',\n    items: [\n        'tests/010_sanity.t.js'\n    ]\n},{\n    group: 'Model',\n    items: [\n        'tests/021_employee.t.js',\n        'tests/022_depertment.t.js'\n    ]\n},{\n    group: 'View',\n    items: [\n        'tests/031_list.t.js',\n        'tests/032_grid.t.js'\n    ]\n});\n\nHarness\u306e\u8a2d\u5b9a\n\n\nloaderPath\nloaderPath\u306b\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u540d\u524d\u7a7a\u9593\u3078\u306e\u30d1\u30b9\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\n(Ext.loader\u306b\u8a2d\u5b9a\u3059\u308b\u306e\u3068\u540c\u3058\u3067\u3059\u306d)\n\npreload\npreload\u306b\u306f\u5404\u30c6\u30b9\u30c8\u3092\u30ed\u30fc\u30c9\u3059\u308b\u524d\u306b\u30ed\u30fc\u30c9\u3059\u3079\u304d\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n\u5b9f\u969b\u306e\u30c6\u30b9\u30c8\u306f\u3001\u3053\u306e\u5834\u5408tests\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e0b\u306b\u7f6e\u304d\u307e\u3059\u3002\n\u305d\u308c\u305e\u308c\u306e\u30c6\u30b9\u30c8\u306f\u3001\u5b8c\u5168\u306b\u72ec\u7acb\u3057\u3066\u5b9f\u884c\u3055\u308c\u30b0\u30ed\u30fc\u30d0\u30eb\u30b9\u30b3\u30fc\u30d7\u3082\u30af\u30ea\u30fc\u30f3\u30ca\u30c3\u30d7\u3055\u308c\u307e\u3059\u3002\ntests/010_sanity.t.js\nStartTest(function(t) {\n    t.diag(&quot;Sanity test, loading classes on demand and verifying they were indeed loaded.&quot;);\n\n    t.ok(Ext, 'ExtJS is here');\n    t.requireOk('EX.controller.Main');\n});\n\nStartTest\u3068\u3044\u3046\u95a2\u6570\u306e\u5f15\u6570\u306b\u7121\u540d\u95a2\u6570\u3092\u6e21\u3057\u3066\u3044\u307e\u3059\u3002\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306f\nStartTest(function (t) { .... })\n\u3067\u30e9\u30c3\u30d7\u3057\u307e\u3059\u3002\nStartTest\u306b\u6e21\u3059\u95a2\u6570\u306b\u7b2c1\u5f15\u6570\u3068\u3057\u3066\u6e21\u3055\u308c\u308b\u5f15\u6570(\u524d\u8a18\u306et)\u306f\u3001Siesta.Test\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3059\u3002\n\u3067\u3001Siesta.Test \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u306f\u3044\u304f\u3064\u304b\u306e\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\n\u305d\u308c\u3092\u4f7f\u3063\u3066\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u884c\u304d\u307e\u3059\u3002\u3053\u3053\u3067\u4f7f\u3063\u3066\u3044\u308b\u306e\u306f\u6b21\u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3059\u3002\n\n\nok\u30e1\u30bd\u30c3\u30c9\n\u5024\u304c\u771f\u306b\u306a\u308b\u5834\u5408\u306b\u30c6\u30b9\u30c8\u3092\u30d1\u30b9\u3057\u307e\u3059\n\nrequireOk\u30e1\u30bd\u30c3\u30c9\nSiesta.Test.ExtJS\u30af\u30e9\u30b9\u306e\u30e1\u30bd\u30c3\u30c9\u3002Ext.require()\u3067\u6307\u5b9a\u3057\u305f\u30af\u30e9\u30b9\u3092\u30ed\u30fc\u30c9\u3057\u3066\u3001\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u305f\u3089\u3001\u305d\u308c\u3092\u5b9f\u884c\u3059\u308b\u3002\n\ndone\u30e1\u30bd\u30c3\u30c9\n\u3053\u3053\u3067\u306f\u4f7f\u3063\u3066\u307e\u305b\u3093\u304c\u3001\u30c6\u30b9\u30c8\u3092\u7d42\u4e86\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u3002\n\n\nModel\u306e\u30c6\u30b9\u30c8\nStartTest(function(t) {\n\n    t.requireOk('EX.model.Employee', function() {\n        var mod = Ext.create('EX.model.Employee', {\n            name: '\u9b3c\u74e6\u3000\u6a29\u4e09',\n            department_id: 1,\n            email: 'gonzo@onigawara.com',\n            gender: '\u7537',\n            age: 33\n        });\n\n        t.is(mod.genderEn(), 'male', 'genderEn works ok');\n        t.is(mod.get('email'), 'gonzo@onigawara.com', 'Could read email');\n    });\n});\n\n\n\nis\u30e1\u30bd\u30c3\u30c9\n1\u3064\u76ee\u30682\u3064\u76ee\u306e\u5f15\u6570\u304c\u7b49\u3057\u3051\u308c\u3070\u30c6\u30b9\u30c8\u3092\u30d1\u30b9\u3057\u307e\u3059\n\ngenderEn\u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u306f\u3001Model\u3067\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u30e1\u30bd\u30c3\u30c9\u3067\ngenderEn: function(value) {\n    var me = this,\n        gender = me.get('gender');\n\n    if(gender == '\u7537'){\n        return 'male';\n    } else if(gender == '\u5973'){\n        return 'female';\n    } else {\n        return gender;\n    }\n}\n\n\u3053\u3093\u306a\u611f\u3058\u306e\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u3002\u3053\u306e\u30c6\u30b9\u30c8\u3067\u306f\u3001is\u30e1\u30bd\u30c3\u30c9\u3067\u305d\u306e\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u3066\u3044\u308b\u306e\u3068\u3001\n\u666e\u901a\u306bget\u30e1\u30bd\u30c3\u30c9\u3067email\u3092\u8aad\u307f\u51fa\u3057\u3066\u3001\u5024\u3092\u6bd4\u8f03\u3057\u3066\u307f\u3066\u3044\u307e\u3059\u3002\n\nStore\u306e\u30c6\u30b9\u30c8\nStartTest(function(t) {\n    t.requireOk('EX.store.Departments', function() {\n        var s = Ext.create('EX.store.Departments'),\n            async = t.beginAsync();\n\n        s.load({\n            callback: function() {\n                var c, m;\n\n                t.pass('loaded');\n                c = s.getCount();\n                t.isGreater(c, 0, Ext.String.format('\u30ec\u30b3\u30fc\u30c9\u304c{0}\u4ef6', c));\n                m = s.getAt(0);\n                t.ok(m, Ext.String.format('\u6700\u521d\u306e\u30ec\u30b3\u30fc\u30c9\u306ename:{0}', m.get('name')));\n                t.endAsync(async);\n            }\n        });\n\n    });\n});\n\n\u30b9\u30c8\u30a2\u306e\u30c6\u30b9\u30c8\u3067\u306f\u3001\u30b9\u30c8\u30a2\u3092load\u3057\u305f\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3067\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3057\u305f\u3002\n\u975e\u540c\u671f\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u4f7f\u3063\u305f\u30c6\u30b9\u30c8\u3092\u3059\u308b\u5834\u5408\u306f\u3001beginAsync/ednAsync\u3092\u4f7f\u3063\u3066\u3001\u305d\u306e\u975e\u540c\u671f\u547c\u3073\u51fa\u3057\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u3001\n\u30c6\u30b9\u30c8\u304c\u7d42\u4e86\u3057\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nView \u306e\u30c6\u30b9\u30c8\nGrid\u3092\u30c6\u30b9\u30c8\u3057\u3066\u307f\u307e\u3059\u3002\nStartTest(function(t) {\n    t.requireOk(\n        [\n            'EX.model.Employee', \n            'EX.store.Employees', \n            'EX.model.Department', \n            'EX.store.Departments', \n            'EX.view.Grid'\n        ], \n        function() {\n            var grid;\n\n            Ext.create('EX.store.Employees',{\n                storeId: 'Employees'\n            });\n            Ext.create('EX.store.Departments', {\n                storeId: 'Departments'\n            });\n\n            grid = Ext.create('EX.view.Grid',{\n                renderTo: Ext.getBody()\n            });\n\n            t.waitForRowsVisible(grid, function() {\n                t.is(grid.store.getCount(), grid.getView().getNodes().length, 'Rendered all data in store ok');\n                t.matchGridCellContent(grid, 0, 1, grid.store.first().get('name'), 'Found full name in first cell');\n            });\n        }\n    );\n});\n\n\u30c6\u30b9\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u307e\u3067\u3001\u3061\u3087\u3063\u3068\u30cf\u30de\u308a\u307e\u3057\u305f\u3002\n\u4e0a\u8a18\u3067\u3001\u30b9\u30c8\u30a2\u3092\u751f\u6210\u3059\u308b\u6642\u306b\u3001storeId\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30b9\u30c8\u30a2\u306b\u306fstoreId\u306e\u5b9a\u7fa9\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u901a\u5e38\u3001Grid\u3067\u306fstore\u30b3\u30f3\u30d5\u30a3\u30b0\u306b\u6587\u5b57\u5217\u3067\u30b9\u30c8\u30a2\u3092\u6307\u5b9a\u3057\u307e\u3059\u306d\u3002\nExt.define('EX.view.Grid', {\n    store: 'Users'\n    :\n    :\n});\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3088\u306d\u3002\u3053\u3053\u3067\u6307\u5b9a\u3057\u3066\u3044\u308b 'Users' \u3063\u3066\u3044\u3046\u306e\u306f\u3001\u30b9\u30c8\u30a2\u306estoreId\u306b\u306a\u308a\u307e\u3059\u3002\nMVC\u3067\u306fstoreId\u3092\u3064\u3051\u3066\u3044\u306a\u304f\u3066\u3082\u3001\u30af\u30e9\u30b9\u540d\u304b\u3089storeId\u3092\u751f\u6210\u3057\u3066\u30b9\u30c8\u30a2\u3092StoreManager\u306b\u767b\u9332\u3057\u3066\u304f\u308c\u307e\u3059\u304c\u3001\n\u30c6\u30b9\u30c8\u306e\u72b6\u614b\u3067\u306f\u305d\u3093\u306a\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u3067\u3059\u306e\u3067\u3001\u30b9\u30c8\u30a2\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3059\u308b\u3068\u304d\u306bstoreId\u3092\u6307\u5b9a\u3057\u3066\u3084\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u3067\u3001\u30b0\u30ea\u30c3\u30c9\u3092\u751f\u6210\u3057\u3066\u3084\u308b\u3068\u3001Siesta\u306e\u753b\u9762\u306b\u3061\u3083\u3093\u3068Grid\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\nt.waitForRowsVisible \u3092\u4f7f\u3063\u305f\u30c6\u30b9\u30c8\u306f\u3001Siesta\u306e\u30b5\u30f3\u30d7\u30eb\u306e\u4e2d\u306b\u3042\u3063\u305f\u3082\u306e\u3067\u3059\u3002\n\u3053\u3046\u3044\u3063\u305fExt JS\u306e\u30c6\u30b9\u30c8\u306b\u7279\u5316\u3057\u305f\u30e1\u30bd\u30c3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u306f\u3044\u3044\u3067\u3059\u306d\u3002\n[Testing Sencha Apps by Mats Bryntse (Sencha Touch North West Meetup)](http://www.youtube.com/watch?v=nhokEFzzjcI&feature=youtu.be&hd=1)\n\u3068\u3044\u3046\u52d5\u753b\u3092\u898b\u3066Siesta\u306b\u8208\u5473\u3092\u6301\u3063\u305f\u306e\u3067\u3001\u3055\u308f\u308a\u59cb\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\n![](http://extjs.sunvisor.net/wp-content/uploads/2012/11/siesta.png)\n\n\u3053\u306e\u753b\u9762\u306f\u3001\u3053\u306e\u8a18\u4e8b\u306e\u6700\u5f8c\u306e\u30c6\u30b9\u30c8\u3001GridPanel\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u305f\u3068\u304d\u306e\u753b\u9762\u3067\u3059\u3002\u753b\u9762\u4e0a\u3067\u30c6\u30b9\u30c8\u3092\u9078\u629e\u3057\u3066\u5b9f\u884c\u3055\u305b\u308b\u3002\u30d3\u30b8\u30e5\u30a2\u30eb\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u30c6\u30b9\u30c8\u3067\u306f\u3001\u305d\u306e\u8868\u793a\u3082\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u5192\u982d\u306e\u30d3\u30c7\u30aa\u3092\u898b\u3066\u3044\u3066\u3082\u3001\u3068\u3066\u3082\u30ef\u30af\u30ef\u30af\u3059\u308b\u3088\u3046\u306a\u4f5c\u308a\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n### Siesta\u306e\u914d\u7f6e\n\nSiesta\u306eexample\u306b\u5f93\u3063\u3066\u6b21\u306e\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n      \u25be public_html/\n        \u25be ex_siesta/\n          \u25b8 app/\n          \u25b8 data/\n          \u25b8 resources/\n          \u25b8 siesta/   <-- Siesta\u306eSDK\n          \u25b8 tests/\n            test_harness.html\n            test_harness.js\n            app.js\n            index.html\n        \u25b8 extjs/        <-- Ext JS \u306eSDK\n\n\u30c6\u30b9\u30c8\u306e\u8d77\u70b9\u3068\u306a\u308b\u306e\u306f\u3001test_harness.html \u3068 test_harness.js \u3067\u3059\u3002\n\n**test_harness.html**\n\n    <!DOCTYPE html>\n    <html>\n        <head>\n            <link rel=\"stylesheet\" type=\"text/css\" href=\"../../extjs/resources/css/ext-all.css\"/>\n            <link rel=\"stylesheet\" type=\"text/css\" href=\"siesta/resources/css/siesta-all.css\">\n            \n            <script type=\"text/javascript\" src=\"../../extjs/ext-all.js\"></script>\n            <script type=\"text/javascript\" src=\"siesta/siesta-all.js\"></script>\n\n            <script type=\"text/javascript\" src=\"test_harness.js\"></script>\n        </head>\n        \n        <body>\n        </body>\n    </html>\n\nCSS\u3068JS\u3001\u305d\u308c\u305e\u308cExt JS\u3068Siesta\u306e\u3082\u306e\u3092\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002\n\u6700\u5f8c\u306b\u3001`test_harness.js`\u3092\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002\n\n### Harness\n\n**test_harness.js**\n\n    var Harness = Siesta.Harness.Browser.ExtJS;\n\n    Harness.configure({\n        title       : 'MVC Test Suite',\n        loaderPath  : { 'EX' : 'app' },\n        \n        preload : [\n           &quot;../extjs/resources/css/ext-all.css&quot;,\n           &quot;../extjs/ext-all-debug.js&quot;\n        ]\n        \n    });\n\n    Harness.start({\n        group: 'Sanity',\n        items: [\n            'tests/010_sanity.t.js'\n        ]\n    },{\n        group: 'Model',\n        items: [\n            'tests/021_employee.t.js',\n            'tests/022_depertment.t.js'\n        ]\n    },{\n        group: 'View',\n        items: [\n            'tests/031_list.t.js',\n            'tests/032_grid.t.js'\n        ]\n    });\n\nHarness\u306e\u8a2d\u5b9a\n\n+ **`loaderPath`**\n  loaderPath\u306b\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u540d\u524d\u7a7a\u9593\u3078\u306e\u30d1\u30b9\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\n  (Ext.loader\u306b\u8a2d\u5b9a\u3059\u308b\u306e\u3068\u540c\u3058\u3067\u3059\u306d)\n+ **`preload`**  \n  preload\u306b\u306f\u5404\u30c6\u30b9\u30c8\u3092\u30ed\u30fc\u30c9\u3059\u308b\u524d\u306b\u30ed\u30fc\u30c9\u3059\u3079\u304d\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n## \u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n\n\u5b9f\u969b\u306e\u30c6\u30b9\u30c8\u306f\u3001\u3053\u306e\u5834\u5408tests\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e0b\u306b\u7f6e\u304d\u307e\u3059\u3002\n\u305d\u308c\u305e\u308c\u306e\u30c6\u30b9\u30c8\u306f\u3001\u5b8c\u5168\u306b\u72ec\u7acb\u3057\u3066\u5b9f\u884c\u3055\u308c\u30b0\u30ed\u30fc\u30d0\u30eb\u30b9\u30b3\u30fc\u30d7\u3082\u30af\u30ea\u30fc\u30f3\u30ca\u30c3\u30d7\u3055\u308c\u307e\u3059\u3002\n\n**tests/010_sanity.t.js**\n\n    StartTest(function(t) {\n        t.diag(&quot;Sanity test, loading classes on demand and verifying they were indeed loaded.&quot;);\n        \n        t.ok(Ext, 'ExtJS is here');\n        t.requireOk('EX.controller.Main');\n    });\n\nStartTest\u3068\u3044\u3046\u95a2\u6570\u306e\u5f15\u6570\u306b\u7121\u540d\u95a2\u6570\u3092\u6e21\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306f\n`StartTest(function (t) { .... })`\n\u3067\u30e9\u30c3\u30d7\u3057\u307e\u3059\u3002\nStartTest\u306b\u6e21\u3059\u95a2\u6570\u306b\u7b2c1\u5f15\u6570\u3068\u3057\u3066\u6e21\u3055\u308c\u308b\u5f15\u6570(\u524d\u8a18\u306e`t`)\u306f\u3001Siesta.Test\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u3059\u3002\n\u3067\u3001Siesta.Test \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u306f\u3044\u304f\u3064\u304b\u306e\u30a2\u30b5\u30fc\u30b7\u30e7\u30f3\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\n\u305d\u308c\u3092\u4f7f\u3063\u3066\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u884c\u304d\u307e\u3059\u3002\u3053\u3053\u3067\u4f7f\u3063\u3066\u3044\u308b\u306e\u306f\u6b21\u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3059\u3002\n\n+ **`ok`\u30e1\u30bd\u30c3\u30c9**  \n  \u5024\u304c\u771f\u306b\u306a\u308b\u5834\u5408\u306b\u30c6\u30b9\u30c8\u3092\u30d1\u30b9\u3057\u307e\u3059\n+ **`requireOk`\u30e1\u30bd\u30c3\u30c9**  \n  Siesta.Test.ExtJS\u30af\u30e9\u30b9\u306e\u30e1\u30bd\u30c3\u30c9\u3002Ext.require()\u3067\u6307\u5b9a\u3057\u305f\u30af\u30e9\u30b9\u3092\u30ed\u30fc\u30c9\u3057\u3066\u3001\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u305f\u3089\u3001\u305d\u308c\u3092\u5b9f\u884c\u3059\u308b\u3002\n+ **`done`\u30e1\u30bd\u30c3\u30c9**  \n  \u3053\u3053\u3067\u306f\u4f7f\u3063\u3066\u307e\u305b\u3093\u304c\u3001\u30c6\u30b9\u30c8\u3092\u7d42\u4e86\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u3002\n\n### Model\u306e\u30c6\u30b9\u30c8\n\n    StartTest(function(t) {\n\n        t.requireOk('EX.model.Employee', function() {\n            var mod = Ext.create('EX.model.Employee', {\n                name: '\u9b3c\u74e6\u3000\u6a29\u4e09',\n                department_id: 1,\n                email: 'gonzo@onigawara.com',\n                gender: '\u7537',\n                age: 33\n            });\n            \n            t.is(mod.genderEn(), 'male', 'genderEn works ok');\n            t.is(mod.get('email'), 'gonzo@onigawara.com', 'Could read email');\n        });\n    });\n\n+ **`is`\u30e1\u30bd\u30c3\u30c9**  \n  1\u3064\u76ee\u30682\u3064\u76ee\u306e\u5f15\u6570\u304c\u7b49\u3057\u3051\u308c\u3070\u30c6\u30b9\u30c8\u3092\u30d1\u30b9\u3057\u307e\u3059\n\ngenderEn\u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u306f\u3001Model\u3067\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u30e1\u30bd\u30c3\u30c9\u3067\n\n    genderEn: function(value) {\n        var me = this,\n            gender = me.get('gender');\n\n        if(gender == '\u7537'){\n            return 'male';\n        } else if(gender == '\u5973'){\n            return 'female';\n        } else {\n            return gender;\n        }\n    }\n\n\u3053\u3093\u306a\u611f\u3058\u306e\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u3002\u3053\u306e\u30c6\u30b9\u30c8\u3067\u306f\u3001is\u30e1\u30bd\u30c3\u30c9\u3067\u305d\u306e\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u3066\u3044\u308b\u306e\u3068\u3001\n\u666e\u901a\u306bget\u30e1\u30bd\u30c3\u30c9\u3067email\u3092\u8aad\u307f\u51fa\u3057\u3066\u3001\u5024\u3092\u6bd4\u8f03\u3057\u3066\u307f\u3066\u3044\u307e\u3059\u3002\n\n### Store\u306e\u30c6\u30b9\u30c8\n\n    StartTest(function(t) {\n        t.requireOk('EX.store.Departments', function() {\n            var s = Ext.create('EX.store.Departments'),\n                async = t.beginAsync();\n\n            s.load({\n                callback: function() {\n                    var c, m;\n\n                    t.pass('loaded');\n                    c = s.getCount();\n                    t.isGreater(c, 0, Ext.String.format('\u30ec\u30b3\u30fc\u30c9\u304c{0}\u4ef6', c));\n                    m = s.getAt(0);\n                    t.ok(m, Ext.String.format('\u6700\u521d\u306e\u30ec\u30b3\u30fc\u30c9\u306ename:{0}', m.get('name')));\n                    t.endAsync(async);\n                }\n            });\n            \n        });\n    });\n\n\u30b9\u30c8\u30a2\u306e\u30c6\u30b9\u30c8\u3067\u306f\u3001\u30b9\u30c8\u30a2\u3092load\u3057\u305f\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3067\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u307e\u3057\u305f\u3002\n\n\u975e\u540c\u671f\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u4f7f\u3063\u305f\u30c6\u30b9\u30c8\u3092\u3059\u308b\u5834\u5408\u306f\u3001beginAsync/ednAsync\u3092\u4f7f\u3063\u3066\u3001\u305d\u306e\u975e\u540c\u671f\u547c\u3073\u51fa\u3057\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u3001\n\u30c6\u30b9\u30c8\u304c\u7d42\u4e86\u3057\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n### View \u306e\u30c6\u30b9\u30c8\n\nGrid\u3092\u30c6\u30b9\u30c8\u3057\u3066\u307f\u307e\u3059\u3002\n\n    StartTest(function(t) {\n        t.requireOk(\n            [\n                'EX.model.Employee', \n                'EX.store.Employees', \n                'EX.model.Department', \n                'EX.store.Departments', \n                'EX.view.Grid'\n            ], \n            function() {\n                var grid;\n                \n                Ext.create('EX.store.Employees',{\n                    storeId: 'Employees'\n                });\n                Ext.create('EX.store.Departments', {\n                    storeId: 'Departments'\n                });\n\n                grid = Ext.create('EX.view.Grid',{\n                    renderTo: Ext.getBody()\n                });\n\n                t.waitForRowsVisible(grid, function() {\n                    t.is(grid.store.getCount(), grid.getView().getNodes().length, 'Rendered all data in store ok');\n                    t.matchGridCellContent(grid, 0, 1, grid.store.first().get('name'), 'Found full name in first cell');\n                });\n            }\n        );\n    });\n\n\u30c6\u30b9\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u307e\u3067\u3001\u3061\u3087\u3063\u3068\u30cf\u30de\u308a\u307e\u3057\u305f\u3002\n\u4e0a\u8a18\u3067\u3001\u30b9\u30c8\u30a2\u3092\u751f\u6210\u3059\u308b\u6642\u306b\u3001storeId\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30b9\u30c8\u30a2\u306b\u306fstoreId\u306e\u5b9a\u7fa9\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u901a\u5e38\u3001Grid\u3067\u306fstore\u30b3\u30f3\u30d5\u30a3\u30b0\u306b\u6587\u5b57\u5217\u3067\u30b9\u30c8\u30a2\u3092\u6307\u5b9a\u3057\u307e\u3059\u306d\u3002\n\n    Ext.define('EX.view.Grid', {\n        store: 'Users'\n        :\n        :\n    });\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3088\u306d\u3002\u3053\u3053\u3067\u6307\u5b9a\u3057\u3066\u3044\u308b 'Users' \u3063\u3066\u3044\u3046\u306e\u306f\u3001\u30b9\u30c8\u30a2\u306estoreId\u306b\u306a\u308a\u307e\u3059\u3002\nMVC\u3067\u306fstoreId\u3092\u3064\u3051\u3066\u3044\u306a\u304f\u3066\u3082\u3001\u30af\u30e9\u30b9\u540d\u304b\u3089storeId\u3092\u751f\u6210\u3057\u3066\u30b9\u30c8\u30a2\u3092StoreManager\u306b\u767b\u9332\u3057\u3066\u304f\u308c\u307e\u3059\u304c\u3001\n\u30c6\u30b9\u30c8\u306e\u72b6\u614b\u3067\u306f\u305d\u3093\u306a\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u3067\u3059\u306e\u3067\u3001\u30b9\u30c8\u30a2\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3059\u308b\u3068\u304d\u306bstoreId\u3092\u6307\u5b9a\u3057\u3066\u3084\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3067\u3001\u30b0\u30ea\u30c3\u30c9\u3092\u751f\u6210\u3057\u3066\u3084\u308b\u3068\u3001Siesta\u306e\u753b\u9762\u306b\u3061\u3083\u3093\u3068Grid\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\nt.waitForRowsVisible \u3092\u4f7f\u3063\u305f\u30c6\u30b9\u30c8\u306f\u3001Siesta\u306e\u30b5\u30f3\u30d7\u30eb\u306e\u4e2d\u306b\u3042\u3063\u305f\u3082\u306e\u3067\u3059\u3002\n\u3053\u3046\u3044\u3063\u305fExt JS\u306e\u30c6\u30b9\u30c8\u306b\u7279\u5316\u3057\u305f\u30e1\u30bd\u30c3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u306f\u3044\u3044\u3067\u3059\u306d\u3002\n\n", "tags": ["JavaScript", "ExtJS", "Siesta"]}