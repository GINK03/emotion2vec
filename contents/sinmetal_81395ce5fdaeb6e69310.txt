{"tags": ["GoogleCloudStorage", "GoogleCloudPlatform"], "context": "Web Site\u306b\u306e\u305b\u308b\u30a2\u30a4\u30b3\u30f3\u306e\u753b\u50cf\u306a\u3093\u304b\u3092\u9069\u5f53\u306bGoogle Cloud Storage (\u4ee5\u4e0bGCS)\u3067\u516c\u958b\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\n\u6599\u91d1\u306f\u7121\u6599\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u7121\u6599\u304c\u826f\u3044\u5834\u5408\u306f\u5225\u306e\u65b9\u6cd5\u3092\u304a\u3059\u3059\u3081\u3057\u307e\u3059\u3002\n\nStep 0 Google Cloud Platform Project\u306e\u4f5c\u6210\n\u7121\u6599\u30c8\u30e9\u30a4\u30a2\u30eb \u8fba\u308a\u304b\u3089\u9069\u5f53\u306bGCP Project\u3092\u4f5c\u308a\u307e\u3057\u3087\u3046\u3002\n\nStep 1 Bucket\u3092\u4f5c\u308b\n\nGCP Project\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089Storage\u3092\u9078\u629e\n\u30d0\u30b1\u30c3\u30c8\u306e\u4f5c\u6210\u3092\u9078\u629e\n\n\nBucket\u540d\n\n\u30d5\u30a1\u30a4\u30eb\u516c\u958b\u6642\u306eURL\u306b\u542b\u307e\u308c\u308b\u306e\u3067\u3001\u516c\u958b\u3055\u308c\u3066\u826f\u3044\u540d\u524d\u304b\u3064DNS\u306e\u547d\u540d\u898f\u5247\u306b\u5f93\u3046\u5fc5\u8981\u304c\u3042\u308b\u3002\nGCS\u5168\u4f53\u3067Unique\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n\nBucket Class\n\nStandard \u3092\u9078\u629e\u3059\u308b\n\n\nLocale\n\nAsia \u3092\u9078\u629e\u3059\u308b\n\n\nStep 2 Bucket\u306e\u4e2d\u306b\u30d5\u30a1\u30a4\u30eb\u3092Upload\u3059\u308b\n\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067Upload\u3059\u308b or gsutil\u3092\u5229\u7528\u3057\u3066Upload\u3059\u308b\ngsutil example\ngsutil cp arcanine.png gs://hoge/sinmetal.png\n\n\nStep 3 Object\u306eACL\u3092\u5909\u66f4\u3059\u308b\n\u4e00\u822c\u516c\u958b\u3092\u307d\u3061\u3063\u3068\u62bc\u3059\u3068\u516c\u958b\u72b6\u614b\u306b\u306a\u308b\ngsutil example\ngsutil acl ch -u AllUsers:R gs://hoge/sinmetal.png\n\n\nStep 4 Cache Control Header\u306e\u8abf\u6574\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067Edge Cache\u306b\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u306eExpire\u3092\u8abf\u6574\u3059\u308b\n\nOption\n\u30d5\u30a1\u30a4\u30ebUpload, \u30ad\u30e3\u30c3\u30b7\u30e5\u30d8\u30c3\u30c0\u30fc\u306e\u8a2d\u5b9a, ACL\u306e\u8a2d\u5b9a\u307e\u3067\u3001\u4e00\u767a\u3067\u3084\u308b\u30b3\u30de\u30f3\u30c9\u306f\u4ee5\u4e0b\ngsutil -h \"Cache-Control: public,max-age=60\" cp -a public-read arcanine.png gs://hoge/sinmetal.png\n\nWeb Site\u306b\u306e\u305b\u308b\u30a2\u30a4\u30b3\u30f3\u306e\u753b\u50cf\u306a\u3093\u304b\u3092\u9069\u5f53\u306b[Google Cloud Storage](https://cloud.google.com/storage/) (\u4ee5\u4e0bGCS)\u3067\u516c\u958b\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\n\n\u6599\u91d1\u306f\u7121\u6599\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u7121\u6599\u304c\u826f\u3044\u5834\u5408\u306f\u5225\u306e\u65b9\u6cd5\u3092\u304a\u3059\u3059\u3081\u3057\u307e\u3059\u3002\n\n# Step 0 Google Cloud Platform Project\u306e\u4f5c\u6210\n\n[\u7121\u6599\u30c8\u30e9\u30a4\u30a2\u30eb](https://cloud.google.com/free-trial/?hl=ja) \u8fba\u308a\u304b\u3089\u9069\u5f53\u306bGCP Project\u3092\u4f5c\u308a\u307e\u3057\u3087\u3046\u3002\n\n# Step 1 Bucket\u3092\u4f5c\u308b\n\n* GCP Project\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089Storage\u3092\u9078\u629e\n* \u30d0\u30b1\u30c3\u30c8\u306e\u4f5c\u6210\u3092\u9078\u629e\n\n## Bucket\u540d\n\n* \u30d5\u30a1\u30a4\u30eb\u516c\u958b\u6642\u306eURL\u306b\u542b\u307e\u308c\u308b\u306e\u3067\u3001\u516c\u958b\u3055\u308c\u3066\u826f\u3044\u540d\u524d\u304b\u3064DNS\u306e\u547d\u540d\u898f\u5247\u306b\u5f93\u3046\u5fc5\u8981\u304c\u3042\u308b\u3002\n* GCS\u5168\u4f53\u3067Unique\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n## Bucket Class\n\n* Standard \u3092\u9078\u629e\u3059\u308b\n\n## Locale\n\n* Asia \u3092\u9078\u629e\u3059\u308b\n\n# Step 2 Bucket\u306e\u4e2d\u306b\u30d5\u30a1\u30a4\u30eb\u3092Upload\u3059\u308b\n\n\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067Upload\u3059\u308b or gsutil\u3092\u5229\u7528\u3057\u3066Upload\u3059\u308b\n\ngsutil example\n\n```\ngsutil cp arcanine.png gs://hoge/sinmetal.png\n```\n\n# Step 3 Object\u306eACL\u3092\u5909\u66f4\u3059\u308b\n\n\u4e00\u822c\u516c\u958b\u3092\u307d\u3061\u3063\u3068\u62bc\u3059\u3068\u516c\u958b\u72b6\u614b\u306b\u306a\u308b\n\ngsutil example\n\n```\ngsutil acl ch -u AllUsers:R gs://hoge/sinmetal.png\n```\n\n# Step 4 Cache Control Header\u306e\u8abf\u6574\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067Edge Cache\u306b\u30ad\u30e3\u30c3\u30b7\u30e5\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u306eExpire\u3092\u8abf\u6574\u3059\u308b\n\n# Option\n\n\u30d5\u30a1\u30a4\u30ebUpload, \u30ad\u30e3\u30c3\u30b7\u30e5\u30d8\u30c3\u30c0\u30fc\u306e\u8a2d\u5b9a, ACL\u306e\u8a2d\u5b9a\u307e\u3067\u3001\u4e00\u767a\u3067\u3084\u308b\u30b3\u30de\u30f3\u30c9\u306f\u4ee5\u4e0b\n\n```\ngsutil -h \"Cache-Control: public,max-age=60\" cp -a public-read arcanine.png gs://hoge/sinmetal.png\n```\n\n"}