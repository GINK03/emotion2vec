{"context": "\u203b\u3053\u306e\u624b\u9806\u306fSPSS Modeler\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u304a\u6301\u3061\u3067\u306a\u3044\u65b9\u306f\u3001\u3054\u3081\u3093\u306a\u3055\u3044\u3002\n\u5c11\u3057Watson IoT Platform\u3092\u4f7f\u3063\u3066\u3044\u3089\u3063\u3057\u3083\u308b\u3001\u3068\u3044\u3046\u304b\u305f\u306e\u305f\u3081\u306e\u30ac\u30a4\u30c9\u3067\u3059\u3002\nWatson IoT Platform\u3092\u4f7f\u3063\u3066\u307f\u308b\u3067IoT\u30a2\u30d7\u30ea\u3092\u6e96\u5099\u3057\u307e\u3057\u305f\u3002\nPredictive Analytics\u3092\u4f7f\u3063\u3066\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306bIoT\u30c7\u30fc\u30bf\u3092\u89e3\u6790\u3057\u307e\u3059\u3002\n\nPredictive Analytics\u3092\u7528\u610f\u3057\u307e\u3059\n\nBluemix\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u300c\u30c7\u30fc\u30bf\uff06\u5206\u6790\u300d\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300cPredictive Analytics\u300d\u30b5\u30fc\u30d3\u30b9\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3057\u307e\u3059\n\n\u4f7f\u7528\u3057\u3066\u3044\u308bIoT\u30a2\u30d7\u30ea\u306e\u300c\u63a5\u7d9a\u300d\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305fPredictive Analytics\u30b5\u30fc\u30d3\u30b9\u3092\u63a5\u7d9a\u3057\u307e\u3059\u3002\n\n\u63a5\u7d9a\u3055\u308c\u305f\u3089\u3001\u300c\u8cc7\u683c\u60c5\u5831\u306e\u8868\u793a\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u8868\u793a\u3055\u308c\u308baccess_key\u3068url\u3092\u66f8\u304d\u3068\u3081\u3066\u304a\u304d\u307e\u3059\uff08\u753b\u9762\u306f\u7701\u7565\uff09\nPredictive Analytics\u306e\u30bf\u30a4\u30eb\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u753b\u9762\u3078\u5165\u308a\u307e\u3059\u3002\n\u753b\u9762\u53f3\u7aef\u306e\u300cNew Model Stream\u300d\u306bstr\u30d5\u30a1\u30a4\u30eb\u3092\u30c9\u30ed\u30c3\u30d7\u3059\u308b\u304b\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nContext\u3092\u6307\u5b9a\u3059\u308b\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u4efb\u610f\u306e\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u3053\u306e\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u304c\u30d6\u30e9\u30a6\u30b6\u753b\u9762\u306e\u4e0a\u306e\u307b\u3046\u306b\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u304c\u3042\u308b\u306e\u3067\u753b\u9762\u3092\u4e0a\u3078\u30b9\u30af\u30ed\u30fc\u30eb\u3057\u3066\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u753b\u9762\u306b\u623b\u308a\u3001\u753b\u9762\u4e0b\u90e8\u306bContextID\u3068\u3068\u3082\u306bdeploy\u3055\u308c\u305fstr\u30d5\u30a1\u30a4\u30eb\u304c\u8868\u793a\u3055\u308c\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\nNode-RED\u304b\u3089\u547c\u3073\u51fa\u3057\u307e\u3059\n\nNode-RED\u306efunction\u30ce\u30fc\u30c9\u304b\u3089\u4e0a\u8a18\u306ePredictive Analytics\u30b5\u30fc\u30d3\u30b9\u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\n\nMethod\u306fPOST\u3001URL\u306b\u4e0b\u8a18\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\nhttps://palbyp.pmservice.ibmcloud.com/pm/v1/score/\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u5024?accesskey=\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u5024(172\u6841)\nInject\u30ce\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u9069\u5f53\u306a\u30c7\u30fc\u30bf\u3092\u9001\u4ed8\u3057\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u30b9\u30b3\u30a2\u30ea\u30f3\u30b0\u3067\u304d\u308b\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\u9001\u4ed8\u3059\u308b\u5024\u306e\u6307\u5b9a\u65b9\u6cd5\u306f\u3001{'tablename':'\u30c6\u30fc\u30d6\u30eb\u540d','header':['\u9805\u76ee1', '\u9805\u76ee2', '\u9805\u76ee3',...],'data':[[\u50241, \u50242, \u50243,...]]}\u306e\u5f62\u5f0f\u306b\u3057\u307e\u3059\u3002\n\u4f8b\uff1a{'tablename':'test_data.txt','header':['time', 'accel', 'gyro', 'temp', 'humid', 'outcome'],'data':[[100008, 331, 22, 35, 48, 0]]}\n\n\n\u30b5\u30f3\u30d7\u30eb\n\n\uff08\u8fd1\u65e5\u4e2d\u306b\u63d0\u4f9b\u4e88\u5b9a\uff09\n\n\n\n\n\u30b5\u30f3\u30d7\u30eb\u30d5\u30ed\u30fc\uff11\n\n\n\n[{\"id\":\"e8616ab3.913248\",\"type\":\"http request\",\"z\":\"70883484.827c6c\",\"name\":\"\u4e88\u6e2c\u30e2\u30c7\u30eb\u3078\u306e\u554f\u3044\u5408\u308f\u305b\",\"method\":\"POST\",\"ret\":\"txt\",\"url\":\"\",\"x\":640,\"y\":120,\"wires\":[[\"3831e97e.344a2e\"]]},{\"id\":\"ff1239b3.c2937\",\"type\":\"debug\",\"z\":\"70883484.827c6c\",\"name\":\"\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":810,\"y\":320,\"wires\":[]},{\"id\":\"51769a01.f5c2c4\",\"type\":\"template\",\"z\":\"70883484.827c6c\",\"name\":\"\u7dca\u6025\u30a2\u30af\u30b7\u30e7\u30f3\",\"field\":\"\",\"fieldType\":\"msg\",\"syntax\":\"mustache\",\"template\":\"\u6a5f\u68b0\u304c\u58ca\u308c\u307e\u3059\uff01\u3059\u3050\u505c\u6b62\u3057\u3066\u304f\u3060\u3055\u3044\uff01\uff01\",\"x\":660,\"y\":300,\"wires\":[[\"ff1239b3.c2937\",\"d3fb7051.c149d8\"]]},{\"id\":\"3831e97e.344a2e\",\"type\":\"function\",\"z\":\"70883484.827c6c\",\"name\":\"\u4e88\u6e2c\u7d50\u679c\u306e\u62bd\u51fa\",\"func\":\"var obj = JSON.parse(msg.payload);\\nvar predVal = obj[0].data[0][6];\\nvar propensity = obj[0].data[0][7];\\n\\nmsg.propensity = ( Math.round( propensity * 10000 ) ) / 100;\\n\\nif ( predVal == \\\"0\\\") {\\n    msg.prediction = \\\"\u58ca\u308c\u308b\\\";\\n} else {\\n    msg.prediction = \\\"\u3046\u307e\u304f\u3044\u304f\\\";\\n}\\n\\nmsg.payload = \\\"\u78ba\u7387\\\" + msg.propensity + \\\"\uff05\u3067\\\" + msg.prediction + \\\"\u3068\u601d\u3044\u307e\u3059\u3002\\\";\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":120,\"y\":300,\"wires\":[[\"1945de52.3be322\",\"f2ebd32a.a0ead8\",\"4408ea26.209cbc\",\"43df4be7.a05efc\"]]},{\"id\":\"4466fd20.ab94ac\",\"type\":\"function\",\"z\":\"70883484.827c6c\",\"name\":\"\u554f\u3044\u5408\u308f\u305b\u5024\u306e\u6e96\u5099\",\"func\":\"msg.payload = {'tablename':'test_data.txt','header':\\n['time', 'accel', 'gyro', 'temp', 'humid', 'outcome'],\\n'data':[[100007, 3, 12, 30, 50, 1]]};return msg;\",\"outputs\":1,\"noerr\":0,\"x\":360,\"y\":120,\"wires\":[[\"e8616ab3.913248\"]]},{\"id\":\"935f5363.f5907\",\"type\":\"inject\",\"z\":\"70883484.827c6c\",\"name\":\"\u5927\u4e08\u592b\u306a\u30b1\u30fc\u30b9\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":140,\"y\":120,\"wires\":[[\"4466fd20.ab94ac\"]]},{\"id\":\"de10d25c.05cd88\",\"type\":\"function\",\"z\":\"70883484.827c6c\",\"name\":\"\u554f\u3044\u5408\u308f\u305b\u5024\u306e\u6e96\u5099\",\"func\":\"msg.payload = {'tablename':'test_data.txt','header':\\n['time', 'accel', 'gyro', 'temp', 'humid', 'outcome'],\\n'data':[[100008, 331, 22, 35, 48, 0]]};\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":360,\"y\":60,\"wires\":[[\"e8616ab3.913248\"]]},{\"id\":\"d6b8f346.36bb88\",\"type\":\"inject\",\"z\":\"70883484.827c6c\",\"name\":\"\u58ca\u308c\u308b\u30b1\u30fc\u30b9\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":130,\"y\":60,\"wires\":[[\"de10d25c.05cd88\"]]},{\"id\":\"8420ecb.439c21\",\"type\":\"function\",\"z\":\"70883484.827c6c\",\"name\":\"\u554f\u3044\u5408\u308f\u305b\u5024\u306e\u6e96\u5099\",\"func\":\"msg.payload = \\n{'tablename':'test_data.txt','header':\\n['time', 'accel', 'gyro', 'temp', 'humid', 'outcome'],\\n'data':[[100008, 10, 5, 40, 40, 1]]};\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":360,\"y\":180,\"wires\":[[\"e8616ab3.913248\"]]},{\"id\":\"dce80875.6d876\",\"type\":\"inject\",\"z\":\"70883484.827c6c\",\"name\":\"\u58ca\u308c\u305d\u3046\u306a\u30b1\u30fc\u30b9\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":140,\"y\":180,\"wires\":[[\"8420ecb.439c21\"]]},{\"id\":\"1945de52.3be322\",\"type\":\"debug\",\"z\":\"70883484.827c6c\",\"name\":\"\",\"active\":false,\"console\":\"false\",\"complete\":\"prediction\",\"x\":320,\"y\":380,\"wires\":[]},{\"id\":\"f2ebd32a.a0ead8\",\"type\":\"debug\",\"z\":\"70883484.827c6c\",\"name\":\"\",\"active\":false,\"console\":\"false\",\"complete\":\"propensity\",\"x\":320,\"y\":420,\"wires\":[]},{\"id\":\"a12dc9c9.161c18\",\"type\":\"switch\",\"z\":\"70883484.827c6c\",\"name\":\"\u95be\u5024\u3067\u5224\u5b9a\",\"property\":\"propensity\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"gte\",\"v\":\"80\",\"vt\":\"str\"}],\"checkall\":\"true\",\"outputs\":1,\"x\":490,\"y\":300,\"wires\":[[\"51769a01.f5c2c4\"]]},{\"id\":\"4408ea26.209cbc\",\"type\":\"switch\",\"z\":\"70883484.827c6c\",\"name\":\"\u300c\u58ca\u308c\u308b\u300d\u5834\u5408\",\"property\":\"prediction\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"eq\",\"v\":\"\u58ca\u308c\u308b\",\"vt\":\"str\"}],\"checkall\":\"true\",\"outputs\":1,\"x\":320,\"y\":300,\"wires\":[[\"a12dc9c9.161c18\"]]},{\"id\":\"43df4be7.a05efc\",\"type\":\"debug\",\"z\":\"70883484.827c6c\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":310,\"y\":340,\"wires\":[]},{\"id\":\"d3fb7051.c149d8\",\"type\":\"e-mail\",\"z\":\"70883484.827c6c\",\"server\":\"smtp.gmail.com\",\"port\":\"465\",\"name\":\"\",\"dname\":\"\",\"x\":810,\"y\":280,\"wires\":[]}]\n\n\n\n\u30b5\u30f3\u30d7\u30eb\u30d5\u30ed\u30fc\uff12\n\n\n\n[{\"id\":\"dcc0f34a.df6b98\",\"type\":\"template\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u5371\u967a\",\"field\":\"\",\"fieldType\":\"msg\",\"syntax\":\"mustache\",\"template\":\"\u4e88\u6e2c\u5024 ({{payload}}) \u306f\u5371\u967a\u3067\u3059\uff01\u70b9\u691c\u3057\u3066\u304f\u3060\u3055\u3044\uff01\uff01\",\"x\":590,\"y\":320,\"wires\":[[\"b4d809e9.f0794\"]]},{\"id\":\"b4d809e9.f0794\",\"type\":\"debug\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u7d50\u679c\u306e\u51fa\u529b\",\"active\":false,\"console\":\"false\",\"complete\":\"payload\",\"x\":750,\"y\":300,\"wires\":[]},{\"id\":\"1302ed57.eaa183\",\"type\":\"template\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u5b89\u5168\",\"field\":\"\",\"fieldType\":\"msg\",\"syntax\":\"mustache\",\"template\":\"\u4e88\u6e2c\u5024 ({{payload}}) \u306f\u5b89\u5168\u3067\u3059\u3002\",\"x\":590,\"y\":280,\"wires\":[[\"b4d809e9.f0794\"]]},{\"id\":\"6b4768d7.bce78\",\"type\":\"switch\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u4e88\u6e2c\u7d50\u679c\u304b\u3089\u306e\u30a2\u30af\u30b7\u30e7\u30f3\",\"property\":\"payload\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"lte\",\"v\":\"0.45\",\"vt\":\"str\"},{\"t\":\"gt\",\"v\":\"0.45\",\"vt\":\"str\"}],\"checkall\":\"true\",\"outputs\":2,\"x\":380,\"y\":300,\"wires\":[[\"1302ed57.eaa183\"],[\"dcc0f34a.df6b98\"]]},{\"id\":\"a28a0f6d.a770b\",\"type\":\"function\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u4e88\u6e2c\u7d50\u679c\u306e\u62bd\u51fa\",\"func\":\"var obj = JSON.parse(msg.payload);\\nmsg.payload = obj[0].data[0][6];\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":140,\"y\":300,\"wires\":[[\"6b4768d7.bce78\"]]},{\"id\":\"d149a597.fb587\",\"type\":\"http request\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u4e88\u6e2c\u30e2\u30c7\u30eb\u3078\u306e\u554f\u3044\u5408\u308f\u305b\",\"method\":\"POST\",\"ret\":\"txt\",\"url\":\"https://palbyp.pmservice.ibmcloud.com/pm/v1/score/<context_id\u5024>?accesskey=<\u30a2\u30af\u30bb\u30b9\u30ad\u30fc>\",\"x\":660,\"y\":160,\"wires\":[[\"3707b134.cf97d6\",\"a28a0f6d.a770b\"]]},{\"id\":\"fd5c586d.9ea348\",\"type\":\"function\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u554f\u3044\u5408\u308f\u305b\u5024\u306e\u6e96\u5099\",\"func\":\"msg.payload = {'tablename':'demo_data.txt','header':['ID', 'DATE', 'ACCEL', 'TEMP', 'HUMID', 'VENDOR', 'GENERATION', 'NUMPART', 'NUMJOINT', 'HOWMAINTAINED', 'RENTAL', 'STOCK', 'LEASE', 'RISK'],'data':[[100756, 44, 59944, 30, 40, 'PartUSA', 'standard', 1, 2, 'monthly', 'yes', 2, 0, 'rankA']]};\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":360,\"y\":160,\"wires\":[[\"33689096.b9559\",\"d149a597.fb587\"]]},{\"id\":\"f7f5b4f4.6a1a8\",\"type\":\"inject\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u7a3c\u50cd\u30c7\u30fc\u30bf\",\"topic\":\"\",\"payload\":\"{                 \\\"tablename\\\":\\\"demo_data_160615_02.txt\\\",                  \\\"header\\\":[\\\"ID\\\", \\\"DATE\\\", \\\"ACCEL\\\", \\\"TEMP\\\", \\\"HUMID\\\", \\\"VENDOR\\\", \\\"GENERATION\\\", \\\"NUMPART\\\", \\\"NUMJOINT\\\", \\\"HOWMAINTAINED\\\", \\\"RENTAL\\\", \\\"STOCK\\\", \\\"LEASE\\\", \\\"RISK\\\"],                  \\\"data\\\":[[100756, 44, 59944, 30, 40, \\\"PartUSA\\\", \\\"standard\\\", 1, 2, \\\"monthly\\\", \\\"yes\\\", 2, 0, \\\"rankA\\\"]]             }   \",\"payloadType\":\"json\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":120,\"y\":160,\"wires\":[[\"fd5c586d.9ea348\"]]},{\"id\":\"33689096.b9559\",\"type\":\"debug\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\",\"active\":false,\"console\":\"false\",\"complete\":\"false\",\"x\":600,\"y\":100,\"wires\":[]},{\"id\":\"3707b134.cf97d6\",\"type\":\"debug\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\",\"active\":false,\"console\":\"false\",\"complete\":\"false\",\"x\":780,\"y\":240,\"wires\":[]},{\"id\":\"c8352660.937ea\",\"type\":\"function\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u554f\u3044\u5408\u308f\u305b\u5024\u306e\u6e96\u5099\",\"func\":\"msg.payload = {'tablename':'demo_data.txt','header':['ID', 'DATE', 'ACCEL', 'TEMP', 'HUMID', 'VENDOR', 'GENERATION', 'NUMPART', 'NUMJOINT', 'HOWMAINTAINED', 'RENTAL', 'STOCK', 'LEASE', 'RISK'],'data':[[100668, 35, 59692, 10, 30, 'IndiaGear', 'hybrid', 1, 1, 'monthly', 'yes', 1, 0, 'rankC']]};\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":360,\"y\":100,\"wires\":[[\"d149a597.fb587\"]]},{\"id\":\"88a47558.d7a788\",\"type\":\"inject\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":120,\"y\":100,\"wires\":[[\"c8352660.937ea\"]]}]\n\n\n\u203b\u3053\u306e\u624b\u9806\u306fSPSS Modeler\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u304a\u6301\u3061\u3067\u306a\u3044\u65b9\u306f\u3001\u3054\u3081\u3093\u306a\u3055\u3044\u3002\n\n\u5c11\u3057Watson IoT Platform\u3092\u4f7f\u3063\u3066\u3044\u3089\u3063\u3057\u3083\u308b\u3001\u3068\u3044\u3046\u304b\u305f\u306e\u305f\u3081\u306e\u30ac\u30a4\u30c9\u3067\u3059\u3002\n[Watson IoT Platform\u3092\u4f7f\u3063\u3066\u307f\u308b](http://qiita.com/egplnt/items/af867711a7191923b2ff)\u3067IoT\u30a2\u30d7\u30ea\u3092\u6e96\u5099\u3057\u307e\u3057\u305f\u3002\nPredictive Analytics\u3092\u4f7f\u3063\u3066\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306bIoT\u30c7\u30fc\u30bf\u3092\u89e3\u6790\u3057\u307e\u3059\u3002\n\n#Predictive Analytics\u3092\u7528\u610f\u3057\u307e\u3059\n1. Bluemix\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u300c\u30c7\u30fc\u30bf\uff06\u5206\u6790\u300d\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300cPredictive Analytics\u300d\u30b5\u30fc\u30d3\u30b9\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3057\u307e\u3059\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-17 13.41.12.png](https://qiita-image-store.s3.amazonaws.com/0/125842/8036708f-c479-01a0-0db7-5468c3146762.png)\n\n2. \u4f7f\u7528\u3057\u3066\u3044\u308bIoT\u30a2\u30d7\u30ea\u306e\u300c\u63a5\u7d9a\u300d\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u4e0a\u8a18\u3067\u4f5c\u6210\u3057\u305fPredictive Analytics\u30b5\u30fc\u30d3\u30b9\u3092\u63a5\u7d9a\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-17 13.47.21.png](https://qiita-image-store.s3.amazonaws.com/0/125842/ad5f359c-2d66-48cf-33df-d06324a3b697.png)\n\n3. \u63a5\u7d9a\u3055\u308c\u305f\u3089\u3001\u300c\u8cc7\u683c\u60c5\u5831\u306e\u8868\u793a\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u8868\u793a\u3055\u308c\u308b`access_key`\u3068`url`\u3092\u66f8\u304d\u3068\u3081\u3066\u304a\u304d\u307e\u3059\uff08\u753b\u9762\u306f\u7701\u7565\uff09\n4. Predictive Analytics\u306e\u30bf\u30a4\u30eb\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u753b\u9762\u3078\u5165\u308a\u307e\u3059\u3002\n5. \u753b\u9762\u53f3\u7aef\u306e\u300cNew Model Stream\u300d\u306bstr\u30d5\u30a1\u30a4\u30eb\u3092\u30c9\u30ed\u30c3\u30d7\u3059\u308b\u304b\u30d5\u30a1\u30a4\u30eb\u9078\u629e\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-17 13.51.31.png](https://qiita-image-store.s3.amazonaws.com/0/125842/dfc71b6c-9758-d05d-7380-524cf3a8a66b.png)\n\n6. Context\u3092\u6307\u5b9a\u3059\u308b\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u4efb\u610f\u306e\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u3053\u306e\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u304c\u30d6\u30e9\u30a6\u30b6\u753b\u9762\u306e\u4e0a\u306e\u307b\u3046\u306b\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u304c\u3042\u308b\u306e\u3067\u753b\u9762\u3092\u4e0a\u3078\u30b9\u30af\u30ed\u30fc\u30eb\u3057\u3066\u78ba\u8a8d\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-17 13.53.55.png](https://qiita-image-store.s3.amazonaws.com/0/125842/f1fb21eb-5442-5ee0-4384-31fe7e24e509.png)\n\n7. \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u753b\u9762\u306b\u623b\u308a\u3001\u753b\u9762\u4e0b\u90e8\u306bContextID\u3068\u3068\u3082\u306bdeploy\u3055\u308c\u305fstr\u30d5\u30a1\u30a4\u30eb\u304c\u8868\u793a\u3055\u308c\u308b\u4e8b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n#Node-RED\u304b\u3089\u547c\u3073\u51fa\u3057\u307e\u3059\n1. Node-RED\u306efunction\u30ce\u30fc\u30c9\u304b\u3089\u4e0a\u8a18\u306ePredictive Analytics\u30b5\u30fc\u30d3\u30b9\u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-17 13.56.28.png](https://qiita-image-store.s3.amazonaws.com/0/125842/13818c7c-d1e2-8beb-6d43-2ad5dfba7e23.png)\n\n2. Method\u306f`POST`\u3001URL\u306b\u4e0b\u8a18\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n`https://palbyp.pmservice.ibmcloud.com/pm/v1/score/\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u5024?accesskey=\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u5024(172\u6841)`\n3. `Inject`\u30ce\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u9069\u5f53\u306a\u30c7\u30fc\u30bf\u3092\u9001\u4ed8\u3057\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u30b9\u30b3\u30a2\u30ea\u30f3\u30b0\u3067\u304d\u308b\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n4. \u9001\u4ed8\u3059\u308b\u5024\u306e\u6307\u5b9a\u65b9\u6cd5\u306f\u3001`{'tablename':'\u30c6\u30fc\u30d6\u30eb\u540d','header':['\u9805\u76ee1', '\u9805\u76ee2', '\u9805\u76ee3',...],'data':[[\u50241, \u50242, \u50243,...]]}`\u306e\u5f62\u5f0f\u306b\u3057\u307e\u3059\u3002\n5. \u4f8b\uff1a`{'tablename':'test_data.txt','header':['time', 'accel', 'gyro', 'temp', 'humid', 'outcome'],'data':[[100008, 331, 22, 35, 48, 0]]}`\n\n#\u30b5\u30f3\u30d7\u30eb\n1. \uff08\u8fd1\u65e5\u4e2d\u306b\u63d0\u4f9b\u4e88\u5b9a\uff09\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-17 14.44.55.png](https://qiita-image-store.s3.amazonaws.com/0/125842/c84b902a-9d0c-b519-7e1e-1f798b2835cb.png)\n\n- \u30b5\u30f3\u30d7\u30eb\u30d5\u30ed\u30fc\uff11\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-17 14.41.04.png](https://qiita-image-store.s3.amazonaws.com/0/125842/4ef92a56-f3d4-3a99-193c-92e1d42bc364.png)\n\n```\n[{\"id\":\"e8616ab3.913248\",\"type\":\"http request\",\"z\":\"70883484.827c6c\",\"name\":\"\u4e88\u6e2c\u30e2\u30c7\u30eb\u3078\u306e\u554f\u3044\u5408\u308f\u305b\",\"method\":\"POST\",\"ret\":\"txt\",\"url\":\"\",\"x\":640,\"y\":120,\"wires\":[[\"3831e97e.344a2e\"]]},{\"id\":\"ff1239b3.c2937\",\"type\":\"debug\",\"z\":\"70883484.827c6c\",\"name\":\"\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":810,\"y\":320,\"wires\":[]},{\"id\":\"51769a01.f5c2c4\",\"type\":\"template\",\"z\":\"70883484.827c6c\",\"name\":\"\u7dca\u6025\u30a2\u30af\u30b7\u30e7\u30f3\",\"field\":\"\",\"fieldType\":\"msg\",\"syntax\":\"mustache\",\"template\":\"\u6a5f\u68b0\u304c\u58ca\u308c\u307e\u3059\uff01\u3059\u3050\u505c\u6b62\u3057\u3066\u304f\u3060\u3055\u3044\uff01\uff01\",\"x\":660,\"y\":300,\"wires\":[[\"ff1239b3.c2937\",\"d3fb7051.c149d8\"]]},{\"id\":\"3831e97e.344a2e\",\"type\":\"function\",\"z\":\"70883484.827c6c\",\"name\":\"\u4e88\u6e2c\u7d50\u679c\u306e\u62bd\u51fa\",\"func\":\"var obj = JSON.parse(msg.payload);\\nvar predVal = obj[0].data[0][6];\\nvar propensity = obj[0].data[0][7];\\n\\nmsg.propensity = ( Math.round( propensity * 10000 ) ) / 100;\\n\\nif ( predVal == \\\"0\\\") {\\n    msg.prediction = \\\"\u58ca\u308c\u308b\\\";\\n} else {\\n    msg.prediction = \\\"\u3046\u307e\u304f\u3044\u304f\\\";\\n}\\n\\nmsg.payload = \\\"\u78ba\u7387\\\" + msg.propensity + \\\"\uff05\u3067\\\" + msg.prediction + \\\"\u3068\u601d\u3044\u307e\u3059\u3002\\\";\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":120,\"y\":300,\"wires\":[[\"1945de52.3be322\",\"f2ebd32a.a0ead8\",\"4408ea26.209cbc\",\"43df4be7.a05efc\"]]},{\"id\":\"4466fd20.ab94ac\",\"type\":\"function\",\"z\":\"70883484.827c6c\",\"name\":\"\u554f\u3044\u5408\u308f\u305b\u5024\u306e\u6e96\u5099\",\"func\":\"msg.payload = {'tablename':'test_data.txt','header':\\n['time', 'accel', 'gyro', 'temp', 'humid', 'outcome'],\\n'data':[[100007, 3, 12, 30, 50, 1]]};return msg;\",\"outputs\":1,\"noerr\":0,\"x\":360,\"y\":120,\"wires\":[[\"e8616ab3.913248\"]]},{\"id\":\"935f5363.f5907\",\"type\":\"inject\",\"z\":\"70883484.827c6c\",\"name\":\"\u5927\u4e08\u592b\u306a\u30b1\u30fc\u30b9\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":140,\"y\":120,\"wires\":[[\"4466fd20.ab94ac\"]]},{\"id\":\"de10d25c.05cd88\",\"type\":\"function\",\"z\":\"70883484.827c6c\",\"name\":\"\u554f\u3044\u5408\u308f\u305b\u5024\u306e\u6e96\u5099\",\"func\":\"msg.payload = {'tablename':'test_data.txt','header':\\n['time', 'accel', 'gyro', 'temp', 'humid', 'outcome'],\\n'data':[[100008, 331, 22, 35, 48, 0]]};\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":360,\"y\":60,\"wires\":[[\"e8616ab3.913248\"]]},{\"id\":\"d6b8f346.36bb88\",\"type\":\"inject\",\"z\":\"70883484.827c6c\",\"name\":\"\u58ca\u308c\u308b\u30b1\u30fc\u30b9\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":130,\"y\":60,\"wires\":[[\"de10d25c.05cd88\"]]},{\"id\":\"8420ecb.439c21\",\"type\":\"function\",\"z\":\"70883484.827c6c\",\"name\":\"\u554f\u3044\u5408\u308f\u305b\u5024\u306e\u6e96\u5099\",\"func\":\"msg.payload = \\n{'tablename':'test_data.txt','header':\\n['time', 'accel', 'gyro', 'temp', 'humid', 'outcome'],\\n'data':[[100008, 10, 5, 40, 40, 1]]};\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":360,\"y\":180,\"wires\":[[\"e8616ab3.913248\"]]},{\"id\":\"dce80875.6d876\",\"type\":\"inject\",\"z\":\"70883484.827c6c\",\"name\":\"\u58ca\u308c\u305d\u3046\u306a\u30b1\u30fc\u30b9\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":140,\"y\":180,\"wires\":[[\"8420ecb.439c21\"]]},{\"id\":\"1945de52.3be322\",\"type\":\"debug\",\"z\":\"70883484.827c6c\",\"name\":\"\",\"active\":false,\"console\":\"false\",\"complete\":\"prediction\",\"x\":320,\"y\":380,\"wires\":[]},{\"id\":\"f2ebd32a.a0ead8\",\"type\":\"debug\",\"z\":\"70883484.827c6c\",\"name\":\"\",\"active\":false,\"console\":\"false\",\"complete\":\"propensity\",\"x\":320,\"y\":420,\"wires\":[]},{\"id\":\"a12dc9c9.161c18\",\"type\":\"switch\",\"z\":\"70883484.827c6c\",\"name\":\"\u95be\u5024\u3067\u5224\u5b9a\",\"property\":\"propensity\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"gte\",\"v\":\"80\",\"vt\":\"str\"}],\"checkall\":\"true\",\"outputs\":1,\"x\":490,\"y\":300,\"wires\":[[\"51769a01.f5c2c4\"]]},{\"id\":\"4408ea26.209cbc\",\"type\":\"switch\",\"z\":\"70883484.827c6c\",\"name\":\"\u300c\u58ca\u308c\u308b\u300d\u5834\u5408\",\"property\":\"prediction\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"eq\",\"v\":\"\u58ca\u308c\u308b\",\"vt\":\"str\"}],\"checkall\":\"true\",\"outputs\":1,\"x\":320,\"y\":300,\"wires\":[[\"a12dc9c9.161c18\"]]},{\"id\":\"43df4be7.a05efc\",\"type\":\"debug\",\"z\":\"70883484.827c6c\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":310,\"y\":340,\"wires\":[]},{\"id\":\"d3fb7051.c149d8\",\"type\":\"e-mail\",\"z\":\"70883484.827c6c\",\"server\":\"smtp.gmail.com\",\"port\":\"465\",\"name\":\"\",\"dname\":\"\",\"x\":810,\"y\":280,\"wires\":[]}]\n\n```\n\n- \u30b5\u30f3\u30d7\u30eb\u30d5\u30ed\u30fc\uff12\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-06-28 13.52.19.png](https://qiita-image-store.s3.amazonaws.com/0/125842/4f25fe68-1301-c983-4d42-f1230c45ddd9.png)\n\n```\n[{\"id\":\"dcc0f34a.df6b98\",\"type\":\"template\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u5371\u967a\",\"field\":\"\",\"fieldType\":\"msg\",\"syntax\":\"mustache\",\"template\":\"\u4e88\u6e2c\u5024 ({{payload}}) \u306f\u5371\u967a\u3067\u3059\uff01\u70b9\u691c\u3057\u3066\u304f\u3060\u3055\u3044\uff01\uff01\",\"x\":590,\"y\":320,\"wires\":[[\"b4d809e9.f0794\"]]},{\"id\":\"b4d809e9.f0794\",\"type\":\"debug\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u7d50\u679c\u306e\u51fa\u529b\",\"active\":false,\"console\":\"false\",\"complete\":\"payload\",\"x\":750,\"y\":300,\"wires\":[]},{\"id\":\"1302ed57.eaa183\",\"type\":\"template\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u5b89\u5168\",\"field\":\"\",\"fieldType\":\"msg\",\"syntax\":\"mustache\",\"template\":\"\u4e88\u6e2c\u5024 ({{payload}}) \u306f\u5b89\u5168\u3067\u3059\u3002\",\"x\":590,\"y\":280,\"wires\":[[\"b4d809e9.f0794\"]]},{\"id\":\"6b4768d7.bce78\",\"type\":\"switch\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u4e88\u6e2c\u7d50\u679c\u304b\u3089\u306e\u30a2\u30af\u30b7\u30e7\u30f3\",\"property\":\"payload\",\"propertyType\":\"msg\",\"rules\":[{\"t\":\"lte\",\"v\":\"0.45\",\"vt\":\"str\"},{\"t\":\"gt\",\"v\":\"0.45\",\"vt\":\"str\"}],\"checkall\":\"true\",\"outputs\":2,\"x\":380,\"y\":300,\"wires\":[[\"1302ed57.eaa183\"],[\"dcc0f34a.df6b98\"]]},{\"id\":\"a28a0f6d.a770b\",\"type\":\"function\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u4e88\u6e2c\u7d50\u679c\u306e\u62bd\u51fa\",\"func\":\"var obj = JSON.parse(msg.payload);\\nmsg.payload = obj[0].data[0][6];\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":140,\"y\":300,\"wires\":[[\"6b4768d7.bce78\"]]},{\"id\":\"d149a597.fb587\",\"type\":\"http request\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u4e88\u6e2c\u30e2\u30c7\u30eb\u3078\u306e\u554f\u3044\u5408\u308f\u305b\",\"method\":\"POST\",\"ret\":\"txt\",\"url\":\"https://palbyp.pmservice.ibmcloud.com/pm/v1/score/<context_id\u5024>?accesskey=<\u30a2\u30af\u30bb\u30b9\u30ad\u30fc>\",\"x\":660,\"y\":160,\"wires\":[[\"3707b134.cf97d6\",\"a28a0f6d.a770b\"]]},{\"id\":\"fd5c586d.9ea348\",\"type\":\"function\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u554f\u3044\u5408\u308f\u305b\u5024\u306e\u6e96\u5099\",\"func\":\"msg.payload = {'tablename':'demo_data.txt','header':['ID', 'DATE', 'ACCEL', 'TEMP', 'HUMID', 'VENDOR', 'GENERATION', 'NUMPART', 'NUMJOINT', 'HOWMAINTAINED', 'RENTAL', 'STOCK', 'LEASE', 'RISK'],'data':[[100756, 44, 59944, 30, 40, 'PartUSA', 'standard', 1, 2, 'monthly', 'yes', 2, 0, 'rankA']]};\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":360,\"y\":160,\"wires\":[[\"33689096.b9559\",\"d149a597.fb587\"]]},{\"id\":\"f7f5b4f4.6a1a8\",\"type\":\"inject\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u7a3c\u50cd\u30c7\u30fc\u30bf\",\"topic\":\"\",\"payload\":\"{                 \\\"tablename\\\":\\\"demo_data_160615_02.txt\\\",                  \\\"header\\\":[\\\"ID\\\", \\\"DATE\\\", \\\"ACCEL\\\", \\\"TEMP\\\", \\\"HUMID\\\", \\\"VENDOR\\\", \\\"GENERATION\\\", \\\"NUMPART\\\", \\\"NUMJOINT\\\", \\\"HOWMAINTAINED\\\", \\\"RENTAL\\\", \\\"STOCK\\\", \\\"LEASE\\\", \\\"RISK\\\"],                  \\\"data\\\":[[100756, 44, 59944, 30, 40, \\\"PartUSA\\\", \\\"standard\\\", 1, 2, \\\"monthly\\\", \\\"yes\\\", 2, 0, \\\"rankA\\\"]]             }   \",\"payloadType\":\"json\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":120,\"y\":160,\"wires\":[[\"fd5c586d.9ea348\"]]},{\"id\":\"33689096.b9559\",\"type\":\"debug\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\",\"active\":false,\"console\":\"false\",\"complete\":\"false\",\"x\":600,\"y\":100,\"wires\":[]},{\"id\":\"3707b134.cf97d6\",\"type\":\"debug\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\",\"active\":false,\"console\":\"false\",\"complete\":\"false\",\"x\":780,\"y\":240,\"wires\":[]},{\"id\":\"c8352660.937ea\",\"type\":\"function\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\u554f\u3044\u5408\u308f\u305b\u5024\u306e\u6e96\u5099\",\"func\":\"msg.payload = {'tablename':'demo_data.txt','header':['ID', 'DATE', 'ACCEL', 'TEMP', 'HUMID', 'VENDOR', 'GENERATION', 'NUMPART', 'NUMJOINT', 'HOWMAINTAINED', 'RENTAL', 'STOCK', 'LEASE', 'RISK'],'data':[[100668, 35, 59692, 10, 30, 'IndiaGear', 'hybrid', 1, 1, 'monthly', 'yes', 1, 0, 'rankC']]};\\nreturn msg;\\n\",\"outputs\":1,\"noerr\":0,\"x\":360,\"y\":100,\"wires\":[[\"d149a597.fb587\"]]},{\"id\":\"88a47558.d7a788\",\"type\":\"inject\",\"z\":\"6f9e4a89.ccb3cc\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":120,\"y\":100,\"wires\":[[\"c8352660.937ea\"]]}]\n\n```\n", "tags": ["watsoniotplatform", "node-red", "IoT", "wiotp", "wiotp18"]}