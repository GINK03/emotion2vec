{"context": "\u4eca\u56de\u306f systemd \u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b httpd \u3068 SysV init \u306e MongoDB \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u8a2d\u5b9a\u306a\u3069\u3057\u3066\u9055\u3044\u306a\u3069\u3092\u628a\u63e1\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u53c2\u8003\n\n\u300cSystemd\u300d\u3092\u7406\u89e3\u3059\u308b \u30fc\u30b7\u30b9\u30c6\u30e0\u8d77\u52d5\u7de8\u30fc \nSystemd\u3092\u4f7f\u3063\u3066\u3055\u304f\u3063\u3068\u81ea\u4f5c\u30b3\u30de\u30f3\u30c9\u3092\u30b5\u30fc\u30d3\u30b9\u5316\u3057\u3066\u307f\u308b\nPOSTD \u306a\u305csystemd\u306a\u306e\u304b\uff1f\n\n\nhttpd\n\u307e\u305a\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$sudo yum install httpd\n\n\u3053\u3053\u307e\u3067\u306f\u540c\u3058\u3002\n\u3067\u3082 /etc/rc.d/init.d/ \u914d\u4e0b\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u306a\u3044\u3002\n\u3069\u3053\u306b\u3042\u308b\u306e\u304b\u3068\u63a2\u3059\u3068 /usr/lib/systemd/system/httpd.service\u306b\u5bfe\u5fdc\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5185\u5bb9\u306f\u4ee5\u4e0b\u3002\n\n/usr/lib/systemd/system/httpd.service\n[Unit]\nDescription=The Apache HTTP Server\nAfter=network.target remote-fs.target nss-lookup.target\nDocumentation=man:httpd(8)\nDocumentation=man:apachectl(8)\n\n[Service]\nType=notify\nEnvironmentFile=/etc/sysconfig/httpd\nExecStart=/usr/sbin/httpd $OPTIONS -DFOREGROUND\nExecReload=/usr/sbin/httpd $OPTIONS -k graceful\nExecStop=/bin/kill -WINCH ${MAINPID}\n# We want systemd to give httpd some time to finish gracefully, but still want\n# it to kill httpd after TimeoutStopSec if something went wrong during the\n# graceful stop. Normally, Systemd sends SIGTERM signal right after the\n# ExecStop, which would kill httpd. We are sending useless SIGCONT here to give\n# httpd time to finish.\nKillSignal=SIGCONT\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n\n\n\u306a\u3093\u3068\u306a\u30fc\u304f\u66f8\u3044\u3066\u3042\u308b\u610f\u5473\u306f\u3053\u3046\u304b\u306a\u3001\u3068\u3044\u3046\u306e\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u3092\u307f\u308b\u3068\u826f\u3055\u305d\u3046\u306a\u611f\u3058\u3067\u3057\u305f\u3002\nsystemd.service\n\u8d77\u52d5\u3057\u305f\u308a\u3001\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u898b\u3066\u307f\u307e\u3059\u3002\n# \u8d77\u52d5\n$systemctl start httpd.service\n\n# \u30b9\u30c6\u30fc\u30bf\u30b9\n$systemctl status httpd.service\nhttpd.service - The Apache HTTP Server\n   Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled)\n   Active: active (running) since \u91d1 2016-07-29 22:48:14 EDT; 8s ago\n     Docs: man:httpd(8)\n           man:apachectl(8)\n Main PID: 4094 (httpd)\n   Status: \"Processing requests...\"\n   CGroup: /system.slice/httpd.service\n           \u251c\u25004094 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u25004095 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u25004096 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u25004097 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u25004098 /usr/sbin/httpd -DFOREGROUND\n           \u2514\u25004099 /usr/sbin/httpd -DFOREGROUND\n\n 7\u6708 29 22:48:14 localhost.localdomain httpd[4094]: AH00558: httpd: Could no...\n 7\u6708 29 22:48:14 localhost.localdomain systemd[1]: Started The Apache HTTP S...\nHint: Some lines were ellipsized, use -l to show in full.\n\n# \u81ea\u52d5\u8d77\u52d5\u78ba\u8a8d\n$sudo systemctl is-enabled httpd.service\ndisabled\n\n# \u81ea\u52d5\u8d77\u52d5\u6709\u52b9\u5316\n$sudo systemctl enable httpd.service\nln -s '/usr/lib/systemd/system/httpd.service' '/etc/systemd/system/multi-user.target.wants/httpd.service'\n\n# \u81ea\u52d5\u8d77\u52d5\u78ba\u8a8d\n\uff04sudo systemctl is-enabled httpd.service\nenabled\n\n\n\nMongoDB\nMongoDB \u30b5\u30fc\u30d0\u30fc\u3092 CentOS7 \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3059\u3002\n$sudo curl http://repo.mongodb.org/yum/redhat/mongodb-org.repo -o /etc/yum.repos.d/mongodb.repo\n\n$yum list --enablerepo=mongodb-org | grep mongo\n\n$ sudo yum install --enablerepo=mongodb-org mongodb-org mongodb-org-server\n\n\u3064\u3044\u3067\u306b\u81ea\u52d5\u8d77\u52d5\u3057\u3066\u307f\u307e\u3059\u3002\n$systemctl enable mongod\nmongod.service is not a native service, redirecting to /sbin/chkconfig.\nExecuting /sbin/chkconfig mongod on\nThe unit files have no [Install] section. They are not meant to be enabled\nusing systemctl.\nPossible reasons for having this kind of units are:\n1) A unit may be statically enabled by being symlinked from another unit's\n   .wants/ or .requires/ directory.\n2) A unit's purpose may be to act as a helper for some other unit which has\n   a requirement dependency on it.\n3) A unit may be started when needed via activation (socket, path, timer,\n   D-Bus, udev, scripted systemctl call, ...).\n\n\u3080\u3001\u8272\u3005\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\u30cd\u30a4\u30c6\u30a3\u30d6\u30b5\u30fc\u30d3\u30b9\u3067\u306f\u306a\u3044\u306e\u3067\u3000chkconfig \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u3068\u66f8\u3044\u3066\u307e\u3059\u306d\u3002\n/usr/lib/systemd/system/\u3092\u78ba\u8a8d\u3059\u308b\u3068 mondod.service \u304c\u306a\u3044\u3002\u3053\u3053\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u306a\u3044\u306e\u3067\u30cd\u30a4\u30c6\u30a3\u30d6\u30b5\u30fc\u30d3\u30b9\u3067\u306a\u3044\u3068\u5224\u65ad\u3057\u305f\u306e\u304b\u3057\u3089\u3002\n\u3044\u3064\u3082\u306e init \u914d\u4e0b\u3092\u307f\u308b\u3068\u3053\u3061\u3089\u306b\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u3002\n$/etc/rc.d/init.d/ |grep mongo\n-rwxr-xr-x. 1 root root  3538  7\u6708 12 14:21 mongod\n\n\u8272\u3005\u78ba\u8a8d\n# chkconfig \u30b3\u30de\u30f3\u30c9\u3067\u8868\u793a\u3055\u308c\u308b\u3002httpd\u306f\u306a\u3044\n$chkconfig --list\n\n\u6ce8\u8a18: \u3053\u306e\u51fa\u529b\u306f SysV \u30b5\u30fc\u30d3\u30b9\u306e\u307f\u3067\u3042\u308a\u3001\u30cd\u30a4\u30c6\u30a3\u30d6\u306a systemd \u306e\u30b5\u30fc\u30d3\u30b9\u306f\u542b\u307e \u308c\u3066\u3044\u307e\u305b\u3093\u3002\n      systemd services. SysV \u8a2d\u5b9a\u306e\u30c7\u30fc\u30bf\u306f\u30cd\u30a4\u30c6\u30a3\u30d6\u306a systemd \u306e\u8a2d\u5b9a\u306b\u3088\u3063\u3066\u4e0a\u66f8\u304d\u3055\u308c\u307e\u3059\u3002\n      systemd \u30b5\u30fc\u30d3\u30b9\u3092\u4e00\u89a7\u8868\u793a\u3059\u308b\u306b\u306f 'systemctl list-unit-files' \u3092\u4f7f\u7528\u3057\u3066 \u304f\u3060\u3055\u3044\u3002\n      \u7279\u5b9a\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u304a\u3044\u3066\u6709\u52b9\u5316\u3055\u308c\u3066\u3044\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u78ba\u8a8d\u3059\u308b\u306b\u306f\u3001\n      'systemctl list-dependencies [target]' \u3002\n\niprdump         0:off   1:off   2:on    3:on    4:on    5:on    6:off\niprinit         0:off   1:off   2:on    3:on    4:on    5:on    6:off\niprupdate       0:off   1:off   2:on    3:on    4:on    5:on    6:off\nmongod          0:off   1:off   2:on    3:on    4:on    5:on    6:off\nnetconsole      0:off   1:off   2:off   3:off   4:off   5:off   6:off\nnetwork         0:off   1:off   2:on    3:on    4:on    5:on    6:off\nvboxadd         0:off   1:off   2:on    3:on    4:on    5:on    6:off\nvboxadd-service 0:off   1:off   2:on    3:on    4:on    5:on    6:off\nvboxadd-x11     0:off   1:off   2:off   3:on    4:off   5:on    6:off\n\n# \u81ea\u52d5\u8d77\u52d5\u78ba\u8a8d\u3002chkconfig \u3092\u4ee3\u308f\u308a\u306b\u5b9f\u884c\u3057\u3001\u7d50\u679c\u3092\u8868\u793a\u3002\n$systemctl is-enabled mongod.service\nmongod.service is not a native service, redirecting to /sbin/chkconfig.\nExecuting /sbin/chkconfig mongod --level=5\nenabled\n\nCentOS\u3000\u3067\u3082\u65e7\u6765\u306e SysV init \u3092\u5229\u7528\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u3082\u4f7f\u3048\u3066 systemctl \u30b3\u30de\u30f3\u30c9\u3067\u3082\u3044\u3044\u611f\u3058\u306b\u3084\u3063\u3066\u304f\u308c\u308b\u3068\u3002\n\u4eca\u56de\u306f systemd \u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b httpd \u3068 SysV init \u306e MongoDB \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u8a2d\u5b9a\u306a\u3069\u3057\u3066\u9055\u3044\u306a\u3069\u3092\u628a\u63e1\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n# \u53c2\u8003\n\n+ [\u300cSystemd\u300d\u3092\u7406\u89e3\u3059\u308b \u30fc\u30b7\u30b9\u30c6\u30e0\u8d77\u52d5\u7de8\u30fc ](http://equj65.net/tech/systemd-boot/)\n+ [Systemd\u3092\u4f7f\u3063\u3066\u3055\u304f\u3063\u3068\u81ea\u4f5c\u30b3\u30de\u30f3\u30c9\u3092\u30b5\u30fc\u30d3\u30b9\u5316\u3057\u3066\u307f\u308b](http://qiita.com/DQNEO/items/0b5d0bc5d3cf407cb7ff)\n+ [POSTD \u306a\u305csystemd\u306a\u306e\u304b\uff1f](http://postd.cc/why-systemd/)\n\n# httpd\n\n\u307e\u305a\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$sudo yum install httpd\n```\n\n\u3053\u3053\u307e\u3067\u306f\u540c\u3058\u3002\n\u3067\u3082 /etc/rc.d/init.d/ \u914d\u4e0b\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u306a\u3044\u3002\n\u3069\u3053\u306b\u3042\u308b\u306e\u304b\u3068\u63a2\u3059\u3068 `/usr/lib/systemd/system/httpd.service`\u306b\u5bfe\u5fdc\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5185\u5bb9\u306f\u4ee5\u4e0b\u3002\n\n```/usr/lib/systemd/system/httpd.service\n[Unit]\nDescription=The Apache HTTP Server\nAfter=network.target remote-fs.target nss-lookup.target\nDocumentation=man:httpd(8)\nDocumentation=man:apachectl(8)\n\n[Service]\nType=notify\nEnvironmentFile=/etc/sysconfig/httpd\nExecStart=/usr/sbin/httpd $OPTIONS -DFOREGROUND\nExecReload=/usr/sbin/httpd $OPTIONS -k graceful\nExecStop=/bin/kill -WINCH ${MAINPID}\n# We want systemd to give httpd some time to finish gracefully, but still want\n# it to kill httpd after TimeoutStopSec if something went wrong during the\n# graceful stop. Normally, Systemd sends SIGTERM signal right after the\n# ExecStop, which would kill httpd. We are sending useless SIGCONT here to give\n# httpd time to finish.\nKillSignal=SIGCONT\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n```\n\n\u306a\u3093\u3068\u306a\u30fc\u304f\u66f8\u3044\u3066\u3042\u308b\u610f\u5473\u306f\u3053\u3046\u304b\u306a\u3001\u3068\u3044\u3046\u306e\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u3092\u307f\u308b\u3068\u826f\u3055\u305d\u3046\u306a\u611f\u3058\u3067\u3057\u305f\u3002\n\n[systemd.service](https://www.freedesktop.org/software/systemd/man/systemd.service.html)\n\n\u8d77\u52d5\u3057\u305f\u308a\u3001\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u898b\u3066\u307f\u307e\u3059\u3002\n\n```bash\n# \u8d77\u52d5\n$systemctl start httpd.service\n\n# \u30b9\u30c6\u30fc\u30bf\u30b9\n$systemctl status httpd.service\nhttpd.service - The Apache HTTP Server\n   Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled)\n   Active: active (running) since \u91d1 2016-07-29 22:48:14 EDT; 8s ago\n     Docs: man:httpd(8)\n           man:apachectl(8)\n Main PID: 4094 (httpd)\n   Status: \"Processing requests...\"\n   CGroup: /system.slice/httpd.service\n           \u251c\u25004094 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u25004095 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u25004096 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u25004097 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u25004098 /usr/sbin/httpd -DFOREGROUND\n           \u2514\u25004099 /usr/sbin/httpd -DFOREGROUND\n\n 7\u6708 29 22:48:14 localhost.localdomain httpd[4094]: AH00558: httpd: Could no...\n 7\u6708 29 22:48:14 localhost.localdomain systemd[1]: Started The Apache HTTP S...\nHint: Some lines were ellipsized, use -l to show in full.\n\n# \u81ea\u52d5\u8d77\u52d5\u78ba\u8a8d\n$sudo systemctl is-enabled httpd.service\ndisabled\n\n# \u81ea\u52d5\u8d77\u52d5\u6709\u52b9\u5316\n$sudo systemctl enable httpd.service\nln -s '/usr/lib/systemd/system/httpd.service' '/etc/systemd/system/multi-user.target.wants/httpd.service'\n\n# \u81ea\u52d5\u8d77\u52d5\u78ba\u8a8d\n\uff04sudo systemctl is-enabled httpd.service\nenabled\n\n```\n\n# MongoDB\n\n[MongoDB \u30b5\u30fc\u30d0\u30fc\u3092 CentOS7 \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b](https://www.saintsouth.net/blog/how-to-install-mongodb-on-centos7/)\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash\n$sudo curl http://repo.mongodb.org/yum/redhat/mongodb-org.repo -o /etc/yum.repos.d/mongodb.repo\n\n$yum list --enablerepo=mongodb-org | grep mongo\n\n$ sudo yum install --enablerepo=mongodb-org mongodb-org mongodb-org-server\n```\n\n\u3064\u3044\u3067\u306b\u81ea\u52d5\u8d77\u52d5\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash\n$systemctl enable mongod\nmongod.service is not a native service, redirecting to /sbin/chkconfig.\nExecuting /sbin/chkconfig mongod on\nThe unit files have no [Install] section. They are not meant to be enabled\nusing systemctl.\nPossible reasons for having this kind of units are:\n1) A unit may be statically enabled by being symlinked from another unit's\n   .wants/ or .requires/ directory.\n2) A unit's purpose may be to act as a helper for some other unit which has\n   a requirement dependency on it.\n3) A unit may be started when needed via activation (socket, path, timer,\n   D-Bus, udev, scripted systemctl call, ...).\n```\n\n\u3080\u3001\u8272\u3005\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\u30cd\u30a4\u30c6\u30a3\u30d6\u30b5\u30fc\u30d3\u30b9\u3067\u306f\u306a\u3044\u306e\u3067\u3000chkconfig \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u3068\u66f8\u3044\u3066\u307e\u3059\u306d\u3002\n`/usr/lib/systemd/system/`\u3092\u78ba\u8a8d\u3059\u308b\u3068 mondod.service \u304c\u306a\u3044\u3002\u3053\u3053\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u306a\u3044\u306e\u3067\u30cd\u30a4\u30c6\u30a3\u30d6\u30b5\u30fc\u30d3\u30b9\u3067\u306a\u3044\u3068\u5224\u65ad\u3057\u305f\u306e\u304b\u3057\u3089\u3002\n\n\u3044\u3064\u3082\u306e init \u914d\u4e0b\u3092\u307f\u308b\u3068\u3053\u3061\u3089\u306b\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u3002\n\n```bash\n$/etc/rc.d/init.d/ |grep mongo\n-rwxr-xr-x. 1 root root  3538  7\u6708 12 14:21 mongod\n```\n\n\u8272\u3005\u78ba\u8a8d\n\n```bash\n# chkconfig \u30b3\u30de\u30f3\u30c9\u3067\u8868\u793a\u3055\u308c\u308b\u3002httpd\u306f\u306a\u3044\n$chkconfig --list\n\n\u6ce8\u8a18: \u3053\u306e\u51fa\u529b\u306f SysV \u30b5\u30fc\u30d3\u30b9\u306e\u307f\u3067\u3042\u308a\u3001\u30cd\u30a4\u30c6\u30a3\u30d6\u306a systemd \u306e\u30b5\u30fc\u30d3\u30b9\u306f\u542b\u307e \u308c\u3066\u3044\u307e\u305b\u3093\u3002\n      systemd services. SysV \u8a2d\u5b9a\u306e\u30c7\u30fc\u30bf\u306f\u30cd\u30a4\u30c6\u30a3\u30d6\u306a systemd \u306e\u8a2d\u5b9a\u306b\u3088\u3063\u3066\u4e0a\u66f8\u304d\u3055\u308c\u307e\u3059\u3002\n      systemd \u30b5\u30fc\u30d3\u30b9\u3092\u4e00\u89a7\u8868\u793a\u3059\u308b\u306b\u306f 'systemctl list-unit-files' \u3092\u4f7f\u7528\u3057\u3066 \u304f\u3060\u3055\u3044\u3002\n      \u7279\u5b9a\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u304a\u3044\u3066\u6709\u52b9\u5316\u3055\u308c\u3066\u3044\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u78ba\u8a8d\u3059\u308b\u306b\u306f\u3001\n      'systemctl list-dependencies [target]' \u3002\n\niprdump         0:off   1:off   2:on    3:on    4:on    5:on    6:off\niprinit         0:off   1:off   2:on    3:on    4:on    5:on    6:off\niprupdate       0:off   1:off   2:on    3:on    4:on    5:on    6:off\nmongod          0:off   1:off   2:on    3:on    4:on    5:on    6:off\nnetconsole      0:off   1:off   2:off   3:off   4:off   5:off   6:off\nnetwork         0:off   1:off   2:on    3:on    4:on    5:on    6:off\nvboxadd         0:off   1:off   2:on    3:on    4:on    5:on    6:off\nvboxadd-service 0:off   1:off   2:on    3:on    4:on    5:on    6:off\nvboxadd-x11     0:off   1:off   2:off   3:on    4:off   5:on    6:off\n\n# \u81ea\u52d5\u8d77\u52d5\u78ba\u8a8d\u3002chkconfig \u3092\u4ee3\u308f\u308a\u306b\u5b9f\u884c\u3057\u3001\u7d50\u679c\u3092\u8868\u793a\u3002\n$systemctl is-enabled mongod.service\nmongod.service is not a native service, redirecting to /sbin/chkconfig.\nExecuting /sbin/chkconfig mongod --level=5\nenabled\n```\n\nCentOS\u3000\u3067\u3082\u65e7\u6765\u306e SysV init \u3092\u5229\u7528\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u3082\u4f7f\u3048\u3066 systemctl \u30b3\u30de\u30f3\u30c9\u3067\u3082\u3044\u3044\u611f\u3058\u306b\u3084\u3063\u3066\u304f\u308c\u308b\u3068\u3002\n", "tags": ["CentOS", "systemd"]}