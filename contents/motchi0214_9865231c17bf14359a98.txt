{"context": "\u601d\u3063\u305f\u4ee5\u4e0a\u306b\u7c21\u5358\u306b\u4f5c\u308c\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n\u30ad\u30fc\u30da\u30a2\u3092\u4f5c\u6210\u3059\u308b\nvar AWS = require('aws-sdk');\n\nvar ec2 = new AWS.EC2({\n    apiVersion: '2015-10-01',\n    accessKeyId: YOUR_AWS_ACCESS_KEY,\n    secretAccessKey: YOUR_AWS_SECRET_ACCESS_KEY,\n    region: REGION\n});\n\nvar params = {\n  KeyName: YOUR_KEYNAME,\n  DryRun: false\n};\nec2.createKeyPair(params, function(err, data) {\n  if (err) console.log(err, err.stack); // an error occurred\n  else     console.log(data);// successful response\n});\n\n\nNode\u3067\u5b9f\u884c\u3059\u308b\u3068\u3001\u3053\u306e\u3088\u3046\u306b\u30ad\u30fc\u306e\u60c5\u5831\u304cJSON\u3067\u8868\u793a\u3055\u308c\u308b\u3002\n$ node index.js \n{ KeyName: 'test_key',\n  KeyFingerprint: '37:31:b4::2b:XX:XX:Xf:cf',\n  KeyMaterial: '-----BEGIN RSA PRIVATE KEY-----\\nMIIEowIBAAKCAQEAmYcCaaciwzi8r2YXCObu+Afs9/+KFMs57I2tIfPnpzGj0uTkGnLdhK6BVMxf\\nwFV2c3yz/JvPVgK/+HDx03SrBIXeFADdht27Dew2rxYu/8QKBgEhF44EJaOkZL1vicPb34zsFtJpa\\nPc039MpDcKFji0+gtM+jzbCagSVm4YP3VoM3gck9sYvXjnwB69CUo4IDH+iE5SFC3ockB\\n-----END RSA PRIVATE KEY-----' }\n\n\u3042\u3068\u306f\u3053\u308c\u3092pem\u30d5\u30a1\u30a4\u30eb\u3067DL\u3059\u308c\u3070OK\u3002\n\nS3\u306b\u30ad\u30fc\u3092\u7f6e\u304f\n\u308f\u3056\u308f\u3056SDK\u3067\u30ad\u30fc\u3092\u4f5c\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u524d\u5f8c\u306e\u51e6\u7406\u542b\u3081\u3066\u81ea\u52d5\u5316\u3055\u305b\u305f\u3044\u3068\u3044\u3046\u3053\u3068\u3060\u308d\u3046\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u4f5c\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u3082S3\u306b\u653e\u308a\u8fbc\u3093\u3067\u304a\u304f\u3088\u3046\u306b\u3059\u308b\u3002\nvar AWS = require('aws-sdk');\n\nvar ec2 = new AWS.EC2({\n    apiVersion: '2015-10-01',\n    accessKeyId: YOUR_AWS_ACCESS_KEY,\n    secretAccessKey: YOUR_AWS_SECRET_ACCESS_KEY,\n    region: REGION\n});\n\nvar params = {\n  KeyName: YOUR_KEYNAME,\n  DryRun: false\n};\nec2.createKeyPair(params, function(err, data) {\n  if (err) console.log(err, err.stack); // an error occurred\n  else     sendKeyPair(data);// successful response\n});\n\n\nfunction sendKeyPair( data ) {\n\n    var config = conf.getConf();\n    AWS.config.apiVersions = {\n      s3: '2006-03-01',\n      accessKeyId: YOUR_AWS_ACCESS_KEY,\n      secretAccessKey: YOUR_AWS_SECRET_ACCESS_KEY,\n    };\n\n    var s3 = new AWS.S3();\n    var params = {\n      Bucket: YOUR_S3_BUCKET_NAME,\n      Key: data.KeyName + '.pem',\n      ACL: 'bucket-owner-full-control',\n      Body: data.KeyMaterial,\n      ContentType: 'application/x-pem-file',\n      Expires: new Date()\n    };\n    s3.putObject(params, function(err, data) {\n      if (err) console.log(err, err.stack); // an error occurred\n      else     console.log(data);           // successful response\n    });\n\n};\n\n\n\u601d\u3063\u305f\u4ee5\u4e0a\u306b\u7c21\u5358\u306b\u4f5c\u308c\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n## \u30ad\u30fc\u30da\u30a2\u3092\u4f5c\u6210\u3059\u308b\n\n```\nvar AWS = require('aws-sdk');\n\nvar ec2 = new AWS.EC2({\n\tapiVersion: '2015-10-01',\n\taccessKeyId: YOUR_AWS_ACCESS_KEY,\n\tsecretAccessKey: YOUR_AWS_SECRET_ACCESS_KEY,\n\tregion: REGION\n});\n\nvar params = {\n  KeyName: YOUR_KEYNAME,\n  DryRun: false\n};\nec2.createKeyPair(params, function(err, data) {\n  if (err) console.log(err, err.stack); // an error occurred\n  else     console.log(data);// successful response\n});\n\n```\n\nNode\u3067\u5b9f\u884c\u3059\u308b\u3068\u3001\u3053\u306e\u3088\u3046\u306b\u30ad\u30fc\u306e\u60c5\u5831\u304cJSON\u3067\u8868\u793a\u3055\u308c\u308b\u3002\n\n```\n$ node index.js \n{ KeyName: 'test_key',\n  KeyFingerprint: '37:31:b4::2b:XX:XX:Xf:cf',\n  KeyMaterial: '-----BEGIN RSA PRIVATE KEY-----\\nMIIEowIBAAKCAQEAmYcCaaciwzi8r2YXCObu+Afs9/+KFMs57I2tIfPnpzGj0uTkGnLdhK6BVMxf\\nwFV2c3yz/JvPVgK/+HDx03SrBIXeFADdht27Dew2rxYu/8QKBgEhF44EJaOkZL1vicPb34zsFtJpa\\nPc039MpDcKFji0+gtM+jzbCagSVm4YP3VoM3gck9sYvXjnwB69CUo4IDH+iE5SFC3ockB\\n-----END RSA PRIVATE KEY-----' }\n```\n\n\u3042\u3068\u306f\u3053\u308c\u3092pem\u30d5\u30a1\u30a4\u30eb\u3067DL\u3059\u308c\u3070OK\u3002\n\n##S3\u306b\u30ad\u30fc\u3092\u7f6e\u304f\n\u308f\u3056\u308f\u3056SDK\u3067\u30ad\u30fc\u3092\u4f5c\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u524d\u5f8c\u306e\u51e6\u7406\u542b\u3081\u3066\u81ea\u52d5\u5316\u3055\u305b\u305f\u3044\u3068\u3044\u3046\u3053\u3068\u3060\u308d\u3046\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u4f5c\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u3082S3\u306b\u653e\u308a\u8fbc\u3093\u3067\u304a\u304f\u3088\u3046\u306b\u3059\u308b\u3002\n\n```\nvar AWS = require('aws-sdk');\n\nvar ec2 = new AWS.EC2({\n\tapiVersion: '2015-10-01',\n\taccessKeyId: YOUR_AWS_ACCESS_KEY,\n\tsecretAccessKey: YOUR_AWS_SECRET_ACCESS_KEY,\n\tregion: REGION\n});\n\nvar params = {\n  KeyName: YOUR_KEYNAME,\n  DryRun: false\n};\nec2.createKeyPair(params, function(err, data) {\n  if (err) console.log(err, err.stack); // an error occurred\n  else     sendKeyPair(data);// successful response\n});\n\n\nfunction sendKeyPair( data ) {\n\n\tvar config = conf.getConf();\n\tAWS.config.apiVersions = {\n\t  s3: '2006-03-01',\n\t  accessKeyId: YOUR_AWS_ACCESS_KEY,\n\t  secretAccessKey: YOUR_AWS_SECRET_ACCESS_KEY,\n\t};\n\n\tvar s3 = new AWS.S3();\n\tvar params = {\n\t  Bucket: YOUR_S3_BUCKET_NAME,\n\t  Key: data.KeyName + '.pem',\n\t  ACL: 'bucket-owner-full-control',\n\t  Body: data.KeyMaterial,\n\t  ContentType: 'application/x-pem-file',\n\t  Expires: new Date()\n\t};\n\ts3.putObject(params, function(err, data) {\n\t  if (err) console.log(err, err.stack); // an error occurred\n\t  else     console.log(data);           // successful response\n\t});\n\n};\n\n```\n", "tags": ["aws-sdk"]}