{"tags": ["MIDI", "Arduino", "C++"], "context": "Arduino(?)\u306b\u7e4b\u3044\u3060\u53ef\u5909\u62b5\u6297\u3092\u672c\u5f53\u306b\u56de\u3057\u305f\u6642\u3060\u3051\u5024\u3092\u53d7\u3051\u3068\u308b\u306b\u306f\uff1f\u304c\u52c9\u5f37\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u306a\u308b\u307b\u3069\u3001\u3053\u3046\u3084\u308b\u306e\u304b!\n\u3067\u3001\n\n\u5e73\u5747\u5316\u3057\u3066\u3001\n\u5024\u304c\u5909\u3063\u305f\u3068\u304d\u3060\u3051\u51fa\u529b\n\n\u3068\u3044\u3046\u306e\u304c\u3084\u308a\u3084\u3059\u3044\u3088\u3046\u306b\u95a2\u6570\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u79fb\u52d5\u5e73\u5747\u3092\u51fa\u529b\u3059\u308b\u95a2\u6570\nint averageStream(int val){\n    static const int MODULUS = 8;\n    static int val_hist[MODULUS];\n    static int sum=0;\n    static byte i_mod=0;\n\n    sum += ( val - val_hist[i_mod] );\n    val_hist[i_mod] = val;\n    i_mod = ++i_mod % MODULUS;\n    return sum / MODULUS;\n}\n\n\u5024\u3092\u5165\u529b\u3059\u308b\u3068\u76f4\u8fd18\u500b\u306e\u79fb\u52d5\u5e73\u5747\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\n\n\u5024\u304c\u5909\u3063\u305f\u304b\u3092\u5224\u5b9a\u3059\u308b\u95a2\u6570\nboolean isChanged(int val){\n    static const int MODULUS = 4;\n    static int val_hist[MODULUS];\n    static byte i_mod=0;\n\n    val_hist[i_mod] = val;\n    i_mod = ++i_mod % MODULUS;\n    for(int j = 0; j < MODULUS - 1; j++){\n        if( val == val_hist[ (i_mod + j) % MODULUS ] ) return false;\n    };\n    return true;\n}\n\n\u76f4\u8fd1\u306e\u4e09\u3064\u306e\u5024\u3068\u6bd4\u3079\u3066\u540c\u3058\u3082\u306e\u304c\u3042\u308c\u3070\u507d\u3001\u3067\u306a\u3051\u308c\u3070\u771f\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n\u307e\u3068\u3081\n\u6700\u8fd1static\u306e\u4f7f\u3044\u3069\u3053\u308d\u304c\u5224\u3063\u305f\u306e\u3067\u9023\u767a\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u3053\u308c\u3067\u4e00\u500b\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u3044\u3051\u308b\u3067\u3057\u3087\u3046\u3002\n\u3067\u306f\u8907\u6570\u306b\u3057\u305f\u3044\u3068\u304d\u306f?\n\n\u30af\u30e9\u30b9\u306b\u5909\u6570\u3068\u95a2\u6570\u3092\u767b\u9332\u3057\u3066\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u3063\u3066...\n\n\u307f\u305f\u3044\u306a\u611f\u3058\u306a\u306e\u304b\u3057\u3089\u3002\u3053\u3061\u3089\u65b9\u9762\u306e\u6d41\u5100\u306b\u758e\u3044\u3082\u3093\u3067...\n\n[Arduino(?)\u306b\u7e4b\u3044\u3060\u53ef\u5909\u62b5\u6297\u3092\u672c\u5f53\u306b\u56de\u3057\u305f\u6642\u3060\u3051\u5024\u3092\u53d7\u3051\u3068\u308b\u306b\u306f\uff1f](http://qiita.com/tadfmac/items/0aa8b07385dc557ff387)\u304c\u52c9\u5f37\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u306a\u308b\u307b\u3069\u3001\u3053\u3046\u3084\u308b\u306e\u304b!\n\u3067\u3001\n\n+ \u5e73\u5747\u5316\u3057\u3066\u3001\n+ \u5024\u304c\u5909\u3063\u305f\u3068\u304d\u3060\u3051\u51fa\u529b\n\n\u3068\u3044\u3046\u306e\u304c\u3084\u308a\u3084\u3059\u3044\u3088\u3046\u306b\u95a2\u6570\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n#\u79fb\u52d5\u5e73\u5747\u3092\u51fa\u529b\u3059\u308b\u95a2\u6570\n\n```cpp\nint averageStream(int val){\n    static const int MODULUS = 8;\n    static int val_hist[MODULUS];\n    static int sum=0;\n    static byte i_mod=0;\n    \n    sum += ( val - val_hist[i_mod] );\n    val_hist[i_mod] = val;\n    i_mod = ++i_mod % MODULUS;\n    return sum / MODULUS;\n}\n```\n\n\u5024\u3092\u5165\u529b\u3059\u308b\u3068\u76f4\u8fd18\u500b\u306e\u79fb\u52d5\u5e73\u5747\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\n\n#\u5024\u304c\u5909\u3063\u305f\u304b\u3092\u5224\u5b9a\u3059\u308b\u95a2\u6570\n\n```cpp\nboolean isChanged(int val){\n    static const int MODULUS = 4;\n    static int val_hist[MODULUS];\n    static byte i_mod=0;\n    \n    val_hist[i_mod] = val;\n    i_mod = ++i_mod % MODULUS;\n    for(int j = 0; j < MODULUS - 1; j++){\n        if( val == val_hist[ (i_mod + j) % MODULUS ] ) return false;\n    };\n    return true;\n}\n```\n\n\u76f4\u8fd1\u306e\u4e09\u3064\u306e\u5024\u3068\u6bd4\u3079\u3066\u540c\u3058\u3082\u306e\u304c\u3042\u308c\u3070\u507d\u3001\u3067\u306a\u3051\u308c\u3070\u771f\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n#\u307e\u3068\u3081\n\u6700\u8fd1static\u306e\u4f7f\u3044\u3069\u3053\u308d\u304c\u5224\u3063\u305f\u306e\u3067\u9023\u767a\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u3053\u308c\u3067\u4e00\u500b\u306e\u30dc\u30ea\u30e5\u30fc\u30e0\u306f\u3044\u3051\u308b\u3067\u3057\u3087\u3046\u3002\n\n\u3067\u306f\u8907\u6570\u306b\u3057\u305f\u3044\u3068\u304d\u306f?\n\n+ \u30af\u30e9\u30b9\u306b\u5909\u6570\u3068\u95a2\u6570\u3092\u767b\u9332\u3057\u3066\n+ \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u3063\u3066...\n\n\u307f\u305f\u3044\u306a\u611f\u3058\u306a\u306e\u304b\u3057\u3089\u3002\u3053\u3061\u3089\u65b9\u9762\u306e\u6d41\u5100\u306b\u758e\u3044\u3082\u3093\u3067...\n"}