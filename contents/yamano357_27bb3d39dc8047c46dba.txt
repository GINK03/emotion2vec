{"context": "\n\n\u6982\u8981\n\u300e\u65b0\u3057\u304d\u3000\u5e74\u306e\u59cb\u3081\u306e\u3000\u3046\u308c\u3057\u304d\u306f\u3000\u53e4\u304d\u4eba\u3069\u3061\u3000\u3042\u3078\u308b\u306a\u308a\u3051\u308a\u300f\n\u3000\u4ee5\u524d\u306b{tensorflow}\u306ePython\u30e9\u30a4\u30d6\u30e9\u30ea\u3092import\u3059\u308b\u95a2\u6570\u3092\u7528\u3044\u308b\u3053\u3068\u3067\u3001gensim\u3092\u6d3b\u7528\u3067\u304d\u308b\u3068\u3044\u3046\u8a18\u4e8b\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\u3000\u3053\u308c\u306b\u3088\u308a\u3001R/RStudio\u4e0a\u3067\u3059\u3079\u3066\u3092\u7ba1\u7406\u3057\u305f\u3044/\u3055\u308c\u305f\u3044R\u304a\u3058\u3055\u3093\uff08\u91cd\u5ea6\u306aR\u30e6\u30fc\u30b6\u30fc\u3092\u6307\u3059\u3002\u5973\u6027\u3067\u3082\u300c\u304a\u3058\u3055\u3093\u300d\u3068\u547c\u79f0\u3059\u308b\u306e\u3067\u3001\u6dd1\u5973\u306e\u65b9\u3005\u306f\u3054\u914d\u616e\u3044\u305f\u3060\u304d\u305f\u3044\uff09\u306e\u3067\u304d\u308b\u5e45\u304c\u5e83\u304c\u3063\u305f\u3068\u8a00\u3048\u307e\u3059\u3002\n\u3000\u4eca\u56de\u306f\u3055\u3089\u306bTensorflow\u3068Theano\u306e\u30e9\u30c3\u30d1\u30fc\u3067\u3042\u308bKeras\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u7528\u3044\u3066\u30e2\u30c7\u30eb\u3092\u69cb\u7bc9\u3057\u3001\u65b0\u5e74\u306e\u6328\u62f6\u306b\u3088\u3055\u305d\u3046\u306a\u77ed\u6b4c\u306e\u751f\u6210\u3092\u8a66\u307f\u307e\u3057\u305f\u3002\u5177\u4f53\u7684\u306b\u306f\u300c\u4e0a\u306e\u53e5\u3092\u5165\u529b\u3059\u308b\u3053\u3068\u3067\u4e0b\u306e\u53e5\u3092\u751f\u6210\u3059\u308b\u300d\u3068\u3044\u3046\u30bf\u30b9\u30af\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\u3000\u306a\u304a\u3001{tensorflow}\u81ea\u4f53\u306e\u8a2d\u5b9a\u3084\u4f7f\u3044\u65b9\u306a\u3069\u306f{tensorflow}\u3067\u30c7\u30fc\u30bf\u5206\u6790\u306eHello World\u3067\u3042\u308biris\u30c7\u30fc\u30bf\u306e\u5206\u985e\u3092\u884c\u3063\u305f\u8a18\u4e8b\u3092\u3054\u53c2\u8003\u304f\u3060\u3055\u3044\u3002\n\u3000\u307e\u305f\u3001Keras\u81ea\u4f53\u306e\u4f7f\u3044\u65b9\u306f\u4e0b\u8a18\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306a\u3069\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\nKeras Documentation\n\n\n\u5143\u30c7\u30fc\u30bf\u306b\u3064\u3044\u3066\n\u3000\u548c\u6b4c\u3092\u63b2\u8f09\u3057\u3066\u3044\u308b\u30b5\u30a4\u30c8\u3092\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u3066\u96c6\u3081\u305f\u30c7\u30fc\u30bf\u3092\u672c\u30bf\u30b9\u30af\u3067\u306f\u7528\u3044\u307e\u3057\u305f\u3002\n\u3000\u30c7\u30fc\u30bf\u3068\u3057\u3066\u306f\u3001\u6b21\u306e\u3088\u3046\u306bu1\u304b\u3089u3\u307e\u3067\u304c\u4e0a\u306e\u53e5\u3067l1\u304b\u3089l2\u307e\u3067\u304c\u4e0b\u306e\u53e5\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u548c\u6b4c\u30c7\u30fc\u30bf\n> tanka_text\n# A tibble: 230,071 \u00d7 5\n           u1               u2         u3             l1             l2\n        <chr>            <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d   \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u304b\u3059\u304b\u306e\u3084\u307e\u306b \u306f\u3084\u305f\u3061\u306b\u3051\u308a\n2  \u304d\u306e\u3075\u3053\u305d   \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u306f\u308b\u306e\u304b\u3059\u307f\u306e \u305f\u3061\u306b\u3051\u308b\u305d\u3082\n3  \u3042\u3059\u3088\u308a\u306f   \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3042\u3057\u305f\u306e\u306f\u3089\u306f \u3051\u3075\u305d\u3084\u304f\u3081\u308b\n4  \u3046\u3081\u306e\u306f\u306a   \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3042\u307e\u304d\u308b\u3086\u304d\u306e \u306a\u3078\u3066\u3075\u308c\u308c\u306f\n5  \u305f\u304b\u3084\u3068\u306e   \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u304d\u3088\u304d\u3064\u304d\u3088\u306b \u3053\u3053\u3089\u3061\u308a\u304f\u308b\n6  \u304d\u3066\u307f\u3078\u304d \u3072\u3068\u3082\u3042\u3089\u306a\u304f\u306b \u308f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u3064\u306f\u306a \u3061\u308a\u306c\u3068\u3082\u3088\u3057\n7  \u308f\u304b\u305b\u3053\u306b \u307f\u305b\u3080\u3068\u304a\u3082\u3072\u3057 \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3086\u304d\u306e\u3075\u308c\u308c\u306f\n8  \u3046\u3081\u306e\u306f\u306a   \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3064\u3068\u3068\u306a\u3064\u3051\u3066 \u3088\u305d\u3078\u3066\u3082\u307f\u3080\n9  \u3086\u304d\u3055\u3080\u307f   \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u306a\u307b\u3053\u306e\u3053\u308d\u306f \u3057\u304b\u3068\u3042\u308b\u304b\u306f\n10 \u3046\u3081\u306e\u306f\u306a   \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3044\u307e\u307e\u3066\u3044\u3082\u304b \u3044\u3066\u3066\u3042\u3072\u307f\u306c\n# ... with 230,061 more rows\n\n\n\n\u30b3\u30fc\u30d1\u30b9\u4f5c\u6210\n\u3000\u4e01\u5be7\u306b\u53ce\u96c6\u3057\u305f\u548c\u6b4c\u30c7\u30fc\u30bf\u3092\u77ed\u6b4c\u751f\u6210\u30bf\u30b9\u30af\u306b\u5229\u7528\u3059\u308b\u305f\u3081\u3001\u3059\u3079\u3066\u306e\u53e5\u304c\u3072\u3089\u304c\u306a\u306e\u307f\u304b\u3089\u6210\u308a\u3001\u5404\u53e5\u306e\u6587\u5b57\u6570\u304c5/7/5/7/7\u306e\u6b4c\u306b\u9650\u5b9a\u3057\u307e\u3059\u3002\n\n\u548c\u6b4c\u30b3\u30fc\u30d1\u30b9\u4f5c\u6210\ntanka_char_len <- tanka_text %>% \n  dplyr::mutate_all(.funs = dplyr::funs(len = stringr::str_length(string = .))) %>% \n  dplyr::summarise_all(.funs = dplyr::funs(tb = list(table(.))))\n> normalize_tanka_text <- tanka_text %>% \n  dplyr::mutate_all(.funs = dplyr::funs(len = stringr::str_length(string = .))) %>% \n  # \u5404\u53e5\u306e\u6587\u5b57\u6570\u3092\u7528\u3044\u3066\u3001\u4e0a\u306e\u53e5\u304c3\u3067\u4e0b\u306e\u53e5\u304c2\u306e\u77ed\u6b4c\u306b\u9650\u5b9a\n  dplyr::filter((u1_len == 5 & u2_len == 7 & u3_len == 5) & (l1_len == 7 & l2_len == 7)) %>% \n  dplyr::select_(.dots = c(\"u1\", \"u2\", \"u3\", \"l1\", \"l2\")) %>% \n  # \u3072\u3089\u304c\u306a\u306e\u307f\u306b\u9650\u5b9a\n  dplyr::filter(\n    !(\n      stringi::stri_detect_regex(str = u1, pattern = \"\\\\P{Hiragana}\") |\n        stringi::stri_detect_regex(str = u2, pattern = \"\\\\P{Hiragana}\") | \n        stringi::stri_detect_regex(str = u3, pattern = \"\\\\P{Hiragana}\") | \n        stringi::stri_detect_regex(str = l1, pattern = \"\\\\P{Hiragana}\") | \n        stringi::stri_detect_regex(str = l2, pattern = \"\\\\P{Hiragana}\")\n    )\n  ) %>% \n  print\n\n# A tibble: 150,330 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u304b\u3059\u304b\u306e\u3084\u307e\u306b \u306f\u3084\u305f\u3061\u306b\u3051\u308a\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u306f\u308b\u306e\u304b\u3059\u307f\u306e \u305f\u3061\u306b\u3051\u308b\u305d\u3082\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3042\u3057\u305f\u306e\u306f\u3089\u306f \u3051\u3075\u305d\u3084\u304f\u3081\u308b\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3042\u307e\u304d\u308b\u3086\u304d\u306e \u306a\u3078\u3066\u3075\u308c\u308c\u306f\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u304d\u3088\u304d\u3064\u304d\u3088\u306b \u3053\u3053\u3089\u3061\u308a\u304f\u308b\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3064\u3068\u3068\u306a\u3064\u3051\u3066 \u3088\u305d\u3078\u3066\u3082\u307f\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u306a\u307b\u3053\u306e\u3053\u308d\u306f \u3057\u304b\u3068\u3042\u308b\u304b\u306f\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3044\u307e\u307e\u3066\u3044\u3082\u304b \u3044\u3066\u3066\u3042\u3072\u307f\u306c\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3088\u308b\u3088\u308b\u304d\u3064\u3064 \u307f\u3080\u3072\u3068\u3082\u304b\u306a\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u304b\u306f\u3064\u306a\u304f\u306a\u308a \u3042\u3055\u3086\u3075\u3053\u3068\u306b\n# ... with 150,320 more rows\n\n\n# \u30b3\u30fc\u30d1\u30b9\u30b5\u30a4\u30ba\n> nrow(x = normalize_tanka_text)\n[1] 150330\n\n# \u6587\u5b57\u7a2e\n> chars <- normalize_tanka_text %>% \n  unlist %>% \n  stringr::str_split(string = ., pattern = \"\") %>% \n  dplyr::combine() %>% \n  stringi::stri_unique(str = .) %>% \n  stringr::str_sort(x = .) %>% \n  print\n\n [1] \"\u3042\" \"\u3044\" \"\u3046\" \"\u3048\" \"\u304a\" \"\u304b\" \"\u304d\" \"\u304f\" \"\u3050\" \"\u3051\" \"\u3053\" \"\u3054\" \"\u3055\" \"\u3057\" \"\u3059\" \"\u305b\" \"\u305d\" \"\u305f\"\n[19] \"\u3061\" \"\u3064\" \"\u3066\" \"\u3068\" \"\u306a\" \"\u306b\" \"\u306c\" \"\u306d\" \"\u306e\" \"\u306f\" \"\u3072\" \"\u3075\" \"\u3078\" \"\u307b\" \"\u307e\" \"\u307f\" \"\u3080\" \"\u3081\"\n[37] \"\u3082\" \"\u3084\" \"\u3086\" \"\u3088\" \"\u3089\" \"\u308a\" \"\u308b\" \"\u308c\" \"\u308d\" \"\u308f\" \"\u3090\" \"\u3091\" \"\u3092\"\n\n# \u6587\u5b57\u7a2e\u6570\uff08\u51fa\u529b\u5c64\u306e\u6570\u3068\u3057\u3066\u5229\u7528\uff09\n> chars_len <- as.integer(x = length(x = chars)) %>% \n  print\n[1] 49\n\n\n\n\u30e2\u30c7\u30eb\u4f5c\u6210\u306b\u304a\u3051\u308b\u4e8b\u524d\u6e96\u5099\n\u3000\u30e2\u30c7\u30eb\u4f5c\u6210\u306b\u5148\u7acb\u3061\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u8aad\u307f\u8fbc\u307f\u304b\u3089\u5b9a\u6570\u3084\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\u3000\u307e\u305f\u3001\u5408\u308f\u305b\u3066Keras\u3067\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u30c7\u30fc\u30bf\u306e\u5f62\u3092\u5909\u63db\u3057\u3066\u3044\u307e\u3059\u3002\u4eca\u56de\u306f\u7279\u306barray\u306e\u51e6\u7406\u304c\u3042\u308a\u3001tidyverse\u306b\u6163\u308c\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u3068\u6271\u3044\u306b\u304f\u3044\u3068\u611f\u3058\u3066\u3057\u307e\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff08Numpy\u3092\u4f7f\u3044\u6163\u308c\u3066\u3044\u308b\u3068\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff09\u3002\n\n\u5b9a\u7fa9\u90e8\n\n\u30e9\u30a4\u30d6\u30eb\u30e9\u30ea\u8aad\u307f\u8fbc\u307f\nlibrary(tidyverse)\nlibrary(tensorflow)\nlibrary(quanteda)\nlibrary(caret)\n\n# Keras\u3092R\u4e0a\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b{tensorflow}\u306eimport\u95a2\u6570\u3067\u8aad\u307f\u8fbc\u307f\nkeras <- tensorflow::import(module = \"keras\")\n\n\n\n\u5b9a\u6570\u5b9a\u7fa9\n# MAX_LEN\u3067\u751f\u6210\u3059\u308b\u6587\u5b57\u5e45\u3092\u8a2d\u5b9a\n# STEP\u3067\u4e0a\u306e\u53e5\u306e\u307f\u306b\u9650\u5b9a\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\nSET_TEXT_PARAM <- list(\n  MAX_LEN = as.integer(x = 5 + 7 + 5 + 7 + 7),\n  STEP = as.integer(x = 5 + 7 + 5)\n)\n\n\n\n\u95a2\u6570\u5b9a\u7fa9\n# \u5165\u529b\u6587\u3092\u6587\u5b57N-gram\u306b\u5206\u5272\n# \u672c\u30bf\u30b9\u30af\u3067\u306f\u77ed\u6b4c\u6587\u5b57\u5217\u30921\u6587\u5b57\u305a\u3064\u5206\u5272\u3059\u308b\u306e\u306b\u6d3b\u7528\n# @sent: \u5bfe\u8c61\u6587\n# @n: N-gram\u306eN\nparseNgram <- function (sent, n = 5) {\n  return(\n    dplyr::bind_rows(\n      lapply(\n        X = stringr::str_split(string = sent, pattern = \"\"),\n        FUN = function (ch) {\n          dplyr::data_frame(\n            ch = quanteda::ngrams(ch, n = n, concatenator = \" \")\n          )\n        }\n      )\n    )\n  )\n}\n\n# One-Hot\u8868\u73fe\u306b\u5909\u63db\u3059\u308b\u305f\u3081\u306e\u4e8b\u524d\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n# @seed_text: \u5909\u63db\u5bfe\u8c61\u306e\u6587\uff08sent\u3068\u3044\u3046\u540d\u524d\u304c\u3064\u3051\u3089\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\uff09\n# @chars: \u30b3\u30fc\u30d1\u30b9\u4e2d\u3067\u51fa\u73fe\u3059\u308b\u6587\u5b57\u96c6\u5408\uff08\u30dc\u30ad\u30e3\u30d6\u30e9\u30ea\uff09\ncreateOneHotSeed <- function (\n  seed_text, chars\n) {\n  return (\n    seed_text %>% \n      tibble::rownames_to_column(var = \"did\") %>% \n      dplyr::mutate(did = as.integer(x = did)) %>% \n      dplyr::group_by(did) %>% \n      dplyr::do(parseNgram(sent = .$sent, n = 1)) %>% \n      dplyr::mutate(sid = dplyr::row_number(x = did)) %>% \n      tidytext::unnest_tokens(\n        output = char, input = ch,\n        token = stringr::str_split, pattern = \" \", to_lower = FALSE\n      ) %>% \n      dplyr::ungroup(x = .) %>% \n      dplyr::mutate(char = factor(x = .$char, levels = chars))\n  )\n}\n\n# \u5b66\u7fd2\u7d50\u679c\u304b\u3089\u6587\u5b57\u3092\u751f\u6210\n# @x: \u5b66\u7fd2\u3057\u305f\u30e2\u30c7\u30eb\u306b\u30c7\u30fc\u30bf\u3092\u9069\u7528(predict)\u3055\u305b\u305f\u7d50\u679c\uff08array\u3092\u524d\u63d0\uff09\n# @chars: \u30b3\u30fc\u30d1\u30b9\u4e2d\u3067\u51fa\u73fe\u3059\u308b\u6587\u5b57\u96c6\u5408\uff08\u30dc\u30ad\u30e3\u30d6\u30e9\u30ea\uff09\ngenChars <- function (x, chars) {\n  gen_char <- apply(\n    X = x,\n    MARGIN = 1, \n    FUN = function (xx) {\n      probas <- rmultinom(n = 1L, size = 1L, prob = xx / sum(xx))[, 1]\n      return (\n        chars[which.max(x = probas)]\n      )\n    }\n  )\n  return (stringr::str_c(gen_char, collapse = \"\"))\n}\n\n# \u5143\u30c7\u30fc\u30bf\u306e\u4e0a\u306e\u53e5\u3068\u751f\u6210\u3057\u305f\u4e0b\u306e\u53e5\u3092\u9023\u7d50\uff08@tanka_upper\u3068@result\u306e\u9806\u756a\u304c\u5909\u308f\u3063\u3066\u3044\u306a\u3044\u524d\u63d0\uff09\n# @tanka_upper: \u9023\u7d50\u3055\u305b\u308b\u77ed\u6b4c\u306e\u4e0a\u306e\u53e5\n# @result: \u5b66\u7fd2\u3057\u305f\u30e2\u30c7\u30eb\u306b\u30c7\u30fc\u30bf\u3092\u9069\u7528(predict)\u3055\u305b\u305f\u7d50\u679c\uff08array\u3092\u524d\u63d0\uff09\n# @chars: \u30b3\u30fc\u30d1\u30b9\u4e2d\u3067\u51fa\u73fe\u3059\u308b\u6587\u5b57\u96c6\u5408\uff08\u30dc\u30ad\u30e3\u30d6\u30e9\u30ea\uff09\n# @diversity: \u591a\u69d8\u6027\u30d1\u30e9\u30e1\u30fc\u30bf\n# @target_num: \u9023\u7d50\u30c7\u30fc\u30bf\u6570\nmergeTankaUpperLower <- function (\n  tanka_upper, result, chars,\n  diversity, target_num = 10\n) {\n  return (\n    dplyr::bind_cols(\n      tanka_upper %>% \n        dplyr::select(u1, u2, u3) %>% \n        head(n = target_num),\n      dplyr::data_frame(\n        lower = apply(\n          X = exp(x = log(x = result[seq(from = 1, to = target_num), ,]) / diversity),\n          MARGIN = 1,\n          FUN = genChars, chars = chars\n        )\n      ) %>% \n        dplyr::mutate(\n          l1 = stringr::str_sub(string = .$lower, start = 1, end = 7),\n          l2 = stringr::str_sub(string = .$lower, start = 8, end = 14)\n        ) %>% \n        dplyr::select(-lower)\n    )\n  )\n}\n\n# \u65b0\u898f\u9069\u7528\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n# @org_upper_str: \u65b0\u3057\u304f\u9069\u7528\u3059\u308b\u4e0a\u306e\u53e5\uff08\u6587\u5b57\u5217\u30d9\u30af\u30c8\u30eb\uff09\n# @chars: \u30b3\u30fc\u30d1\u30b9\u4e2d\u3067\u51fa\u73fe\u3059\u308b\u6587\u5b57\u96c6\u5408\uff08\u30dc\u30ad\u30e3\u30d6\u30e9\u30ea\uff09\n# @dummy_seed: One-hot\u8868\u73fe\u3078\u306e\u5909\u63db\u306b\u7528\u3044\u305fdummyVars\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08{caret}\u306e\u30c0\u30df\u30fc\u5909\u6570\u4f5c\u6210\u95a2\u6570\u3092\u5229\u7528\uff09\n# @step: \u4e0a\u306e\u53e5\u306e\u6587\u5b57\u6570\ngenOrgX <- function (\n  org_upper_str,\n  chars, dummy_seed, step\n) {\n\n  org_tanka_one_hot_seed <- dplyr::data_frame(sent = org_upper_str) %>% \n    createOneHotSeed(seed_text = ., chars = chars)\n\n  return (\n    array(\n      data = dplyr::as_data_frame(\n        x = predict(object = dummy_seed, newdata = org_tanka_one_hot_seed)\n      ) %>% \n        dplyr::select(-did, -sid) %>% \n        as.matrix,\n      dim = c(max(org_tanka_one_hot_seed$did), step, length(x = chars))\n    )\n  )\n}\n\n\n\n\u30c7\u30fc\u30bf\u524d\u51e6\u7406\n\u3000Keras\u306b\u306f\u30c6\u30ad\u30b9\u30c8\u524d\u51e6\u7406\u7528\u95a2\u6570\u3068\u3057\u3066\u4e0b\u8a18\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001R\u304b\u3089\u5229\u7528\u3067\u304d\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u81ea\u524d\u3067\u30b3\u30c4\u30b3\u30c4\u51e6\u7406\u3057\u307e\u3059\u3002\n\u3000\u3053\u3053\u3067\u306f{caret}\u306edummyVars\u3092\u6d3b\u7528\u3057\u3066One-hot\u8868\u73fe\u306b\u5909\u63db\u3057\u3001\u5404\u53e5\u6bce\u306barray\u306b\u683c\u7d0d\u3057\u3066\u3001\u3055\u3089\u306baperm\u3067\u6b21\u5143\uff08Python\u3067\u306fshape\u306b\u8a72\u5f53\u3059\u308b\u3067\u3057\u3087\u3046\u304b\uff09\u3092\u5165\u308c\u66ff\u3048\u3066\u3044\u307e\u3059\uff08\u540c\u3058\u3088\u3046\u306bNumpy\u306ereshape\u306b\u8a72\u5f53\uff09\u3002\n\nKeras - Text Preprocess\n\n\n\u524d\u51e6\u7406\ntanka_one_hot_seed <- normalize_tanka_text %>% \n  tidyr::unite_(col = \"sent\", from = c(\"u1\", \"u2\", \"u3\", \"l1\", \"l2\"), sep = \"\") %>% \n  createOneHotSeed(seed_text = ., chars = chars)\n\n> tanka_one_hot_seed %>% \n  dplyr::filter(is.element(el = .$did, set = c(1))) %>% \n  as.data.frame()\n   did sid char\n1    1   1   \u304d\n2    1   2   \u306e\n3    1   3   \u3075\n4    1   4   \u3053\n5    1   5   \u305d\n6    1   6   \u3068\n7    1   7   \u3057\n8    1   8   \u306f\n9    1   9   \u304f\n10   1  10   \u308c\n11   1  11   \u3057\n12   1  12   \u304b\n13   1  13   \u306f\n14   1  14   \u308b\n15   1  15   \u304b\n16   1  16   \u3059\n17   1  17   \u307f\n18   1  18   \u304b\n19   1  19   \u3059\n20   1  20   \u304b\n21   1  21   \u306e\n22   1  22   \u3084\n23   1  23   \u307e\n24   1  24   \u306b\n25   1  25   \u306f\n26   1  26   \u3084\n27   1  27   \u305f\n28   1  28   \u3061\n29   1  29   \u306b\n30   1  30   \u3051\n31   1  31   \u308a\n\n# \u30c0\u30df\u30fc\u5909\u6570\u4f5c\u6210\u95a2\u6570\u3092\u4f7f\u3063\u3066One-hot\u8868\u73fe\u3078\uff08\u3053\u3053\u3067\u4f5c\u6210\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u5f8c\u8ff0\u306e\u65b0\u898f\u30c7\u30fc\u30bf\u9069\u7528\u3067\u3082\u5229\u7528\uff09\ntanka_dummy <- caret::dummyVars(formula = ~ did + sid + char, data = tanka_one_hot_seed)\ntanka_one_hot <- dplyr::as_data_frame(\n  x = predict(object = tanka_dummy, newdata = tanka_one_hot_seed)\n)\n\n> tanka_one_hot %>% \n  dplyr::filter(did == 1) %>% \n  dplyr::select(-did, -sid)\n# A tibble: 31 \u00d7 49\n   char.\u3042 char.\u3044 char.\u3046 char.\u3048 char.\u304a char.\u304b char.\u304d char.\u304f char.\u3050 char.\u3051 char.\u3053 char.\u3054 char.\u3055 char.\u3057 char.\u3059 char.\u305b char.\u305d\n     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1        0       0       0       0       0       0       1       0       0       0       0       0       0       0       0       0       0\n2        0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0\n3        0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0\n4        0       0       0       0       0       0       0       0       0       0       1       0       0       0       0       0       0\n5        0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       1\n6        0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0\n7        0       0       0       0       0       0       0       0       0       0       0       0       0       1       0       0       0\n8        0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0\n9        0       0       0       0       0       0       0       1       0       0       0       0       0       0       0       0       0\n10       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0\n# ... with 21 more rows, and 32 more variables: char.\u305f <dbl>, char.\u3061 <dbl>, char.\u3064 <dbl>, char.\u3066 <dbl>, char.\u3068 <dbl>, char.\u306a <dbl>,\n#   char.\u306b <dbl>, char.\u306c <dbl>, char.\u306d <dbl>, char.\u306e <dbl>, char.\u306f <dbl>, char.\u3072 <dbl>, char.\u3075 <dbl>, char.\u3078 <dbl>, char.\u307b <dbl>,\n#   char.\u307e <dbl>, char.\u307f <dbl>, char.\u3080 <dbl>, char.\u3081 <dbl>, char.\u3082 <dbl>, char.\u3084 <dbl>, char.\u3086 <dbl>, char.\u3088 <dbl>, char.\u3089 <dbl>,\n#   char.\u308a <dbl>, char.\u308b <dbl>, char.\u308c <dbl>, char.\u308d <dbl>, char.\u308f <dbl>, char.\u3090 <dbl>, char.\u3091 <dbl>, char.\u3092 <dbl>\n\n\n# \u5b66\u7fd2\u30c7\u30fc\u30bf\u3092Keras\u3067\u4f7f\u3046\u305f\u3081\u306b(, , )\u306e\u5f62\u5f0f\uff08array\uff09\u306b\u5909\u63db\nX <- aperm(\n  a = sapply(\n    X = split(x = tanka_one_hot, f = tanka_one_hot$did),\n    FUN = function (x) {\n      return(\n        x %>%\n          # \u4e0a\u306e\u53e5\n          dplyr::filter(sid <= SET_TEXT_PARAM$STEP) %>% \n          dplyr::select(-did, -sid) %>% \n          as.matrix\n      )\n    },\n    simplify = \"array\"\n  ),\n  perm = c(3, 1, 2)\n)\n> dim(x = X)\n[1] 150330     17     49\n\n# \u4e00\u6587\u5b57\u305a\u30641\u304c\u7acb\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\uff08\u30d5\u30e9\u30b0\u304c\u7acb\u3064\u30c7\u30fc\u30bf\u304c\u5404\u884c\u30671\u3057\u304b\u306a\u3044\uff09\n> all(apply(X = apply(X = X, MARGIN = 2, FUN = rowSums) == 1, MARGIN = 1, FUN = all))\n[1] TRUE\n\n\n# y\u3067\u3082\u540c\u69d8\u306b\u5909\u63db\nY <- aperm(\n  a = sapply(\n    X = split(x = tanka_one_hot, f = tanka_one_hot$did),\n    FUN = function (x) {\n      y <- x %>% \n        # \u4e0b\u306e\u53e5\n        dplyr::filter(sid > SET_TEXT_PARAM$STEP) %>% \n        dplyr::select(-did, -sid) %>% \n        as.matrix\n      return (\n        # \u4e0b\u306e\u53e5\u306e\u65b9\u304c\u6587\u5b57\u6570\u304c\u5c11\u306a\u3044\u306e\u3067X\u3068\u540c\u3058\u6b21\u5143\u306b\u306a\u308b\u3088\u3046\u306b0\u57cb\u3081\n        rbind(\n          y,\n          matrix(data = 0, nrow = SET_TEXT_PARAM$STEP - nrow(x = y), ncol = ncol(x = y))\n        )\n      )\n    },\n    simplify = \"array\"\n  ),\n  perm = c(3, 1, 2)\n)\n> dim(x = Y)\n[1] 150330     17     49\n\n\n\n\u30e2\u30c7\u30eb\u4f5c\u6210\n\u3000Keras\u3067\u5229\u7528\u3059\u308b\u30c7\u30fc\u30bf\u524d\u51e6\u7406\u304c\u7d42\u308f\u308a\u307e\u3057\u305f\u306e\u3067\u3001\u3053\u3053\u304b\u3089\u30e2\u30c7\u30eb\u306e\u5b9a\u7fa9\u3092\u306f\u3058\u3081\u307e\u3059\u3002\n\u3000\u4eca\u56de\u306fLSTM-RNN\u306b\u3088\u308b\u751f\u6210\u306b\u6311\u6226\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002Keras\u3067\u306fLSTM\u30e2\u30c7\u30eb\u3092\u5229\u7528\u3067\u304d\u308b\u95a2\u6570\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u3053\u308c\u3092\u7528\u3044\u307e\u3057\u305f\u3002\n\u3000\u306a\u304a\u3001\u3044\u308d\u3044\u308d\u306a\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u69cb\u7bc9\u3057\u307e\u3057\u305f\u304c\u3001\u30e2\u30c7\u30eb\u4f5c\u6210\u306b\u95a2\u3059\u308b\u8abf\u67fb\u3084\u5b66\u7fd2\u304c\u8db3\u308a\u3066\u3044\u306a\u3044\u307e\u305b\u3093\u306e\u3067\u3001\u3088\u308a\u3088\u3044\u65b9\u6cd5\u3084\u624b\u6bb5\u306a\u3069\u3042\u308c\u3070\u3054\u6307\u5c0e\u3044\u305f\u3060\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002\n\nExample script to generate text from Nietzsche's writings.\nAdd a character-based RNN example.\n\n\nLSTM\nmodel <- keras$models$Sequential()\nmodel$add(\n  layer = keras$layers$LSTM(\n    output_dim = 128L, input_shape = c(SET_TEXT_PARAM$STEP, chars_len),\n    return_sequences = TRUE\n  )\n)\nmodel$add(\n  layer = keras$layers$LSTM(\n    output_dim = 128L,\n    return_sequences = TRUE, activation = \"relu\"\n  )\n)\nmodel$add(\n  layer = keras$layers$TimeDistributed(\n    layer = keras$layers$Dense(output_dim = chars_len, activation = \"softmax\")\n  )\n)\nmodel$compile(loss = \"categorical_crossentropy\", optimizer = \"rmsprop\")\n\n> model$summary()\nLayer (type)                     Output Shape          Param #     Connected to                     \n====================================================================================================\nlstm_1 (LSTM)                    (None, 17, 128)       91136       lstm_input_1[0][0]               \n____________________________________________________________________________________________________\nlstm_2 (LSTM)                    (None, 17, 128)       131584      lstm_1[0][0]                     \n____________________________________________________________________________________________________\ntimedistributed_1 (TimeDistribute(None, 17, 49)        6321        lstm_2[0][0]                     \n====================================================================================================\nTotal params: 229041\n____________________________________________________________________________________________________\n\n\n# Epoch\u6570\u304c30\u3068\u5c11\u306a\u3044\u304c\u3001\u3053\u308c\u3067\u30822.5\u6642\u9593\u307b\u3069\u304b\u304b\u308b\n# \u4eca\u56de\u306f\u624b\u7fd2\u3044\u3068\u3057\u3066\u5c0f\u3055\u3081\u3067\u5b9f\u884c\u3057\u305f\n> model$fit(x = X, y = Y, batch_size = 1000L, nb_epoch = 30L, shuffle = TRUE)\nEpoch 1/30\n150330/150330 [==============================] - 289s - loss: 3.0063   \nEpoch 2/30\n150330/150330 [==============================] - 288s - loss: 2.9062   \nEpoch 3/30\n150330/150330 [==============================] - 287s - loss: 2.8078   \nEpoch 4/30\n150330/150330 [==============================] - 288s - loss: 2.7971   \nEpoch 5/30\n150330/150330 [==============================] - 287s - loss: 2.7936   \nEpoch 6/30\n150330/150330 [==============================] - 288s - loss: 2.7921   \nEpoch 7/30\n150330/150330 [==============================] - 288s - loss: 2.7913   \nEpoch 8/30\n150330/150330 [==============================] - 288s - loss: 2.7907   \nEpoch 9/30\n150330/150330 [==============================] - 288s - loss: 2.7902   \nEpoch 10/30\n150330/150330 [==============================] - 288s - loss: 2.7898   \nEpoch 11/30\n150330/150330 [==============================] - 288s - loss: 2.7893   \nEpoch 12/30\n150330/150330 [==============================] - 288s - loss: 2.7887   \nEpoch 13/30\n150330/150330 [==============================] - 289s - loss: 2.7882   \nEpoch 14/30\n150330/150330 [==============================] - 288s - loss: 2.7874   \nEpoch 15/30\n150330/150330 [==============================] - 288s - loss: 2.7869   \nEpoch 16/30\n150330/150330 [==============================] - 288s - loss: 2.7861   \nEpoch 17/30\n150330/150330 [==============================] - 288s - loss: 2.7854   \nEpoch 18/30\n150330/150330 [==============================] - 288s - loss: 2.7847   \nEpoch 19/30\n150330/150330 [==============================] - 288s - loss: 2.7840   \nEpoch 20/30\n150330/150330 [==============================] - 288s - loss: 2.7833   \nEpoch 21/30\n150330/150330 [==============================] - 288s - loss: 2.7826   \nEpoch 22/30\n150330/150330 [==============================] - 288s - loss: 2.7818   \nEpoch 23/30\n150330/150330 [==============================] - 288s - loss: 2.7811   \nEpoch 24/30\n150330/150330 [==============================] - 288s - loss: 2.7801   \nEpoch 25/30\n150330/150330 [==============================] - 288s - loss: 2.7793   \nEpoch 26/30\n150330/150330 [==============================] - 288s - loss: 2.7785   \nEpoch 27/30\n150330/150330 [==============================] - 288s - loss: 2.7776   \nEpoch 28/30\n150330/150330 [==============================] - 288s - loss: 2.7766   \nEpoch 29/30\n150330/150330 [==============================] - 288s - loss: 2.7757   \nEpoch 30/30\n150330/150330 [==============================] - 297s - loss: 2.7750   \nHistory\n\n\n# \u5b66\u7fd2\u30c7\u30fc\u30bf\u3092\u9069\u7528\u3057\u305f\u7d50\u679c\u304b\u3089\u4e0b\u306e\u53e5\u3092\u751f\u6210\n# \u6b4c\u4eba\u304c\u8a60\u3093\u3060\u4e0a\u306e\u53e5\u3068\u6bd4\u3079\u3066\u62d9\u3055\u304c\u6ea2\u308c\u308b\nresult_predict <- model$predict(x = X[, , , drop = FALSE])[, seq(from = 1, to = SET_TEXT_PARAM$MAX_LEN - SET_TEXT_PARAM$STEP ), ]\n> gen_tanka <- mergeTankaUpperLower(\n  tanka_upper = normalize_tanka_text, result = result_predict, chars = chars,\n  diversity = 1.0, target_num = nrow(x = normalize_tanka_text)\n)\n# A tibble: 150,330 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u307e\u307e\u307f\u304b\u305b\u3089\u3066 \u307e\u308a\u3051\u308c\u308a\u304b\u308a\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u307e\u308f\u304f\u307f\u3072\u304d\u3080 \u3057\u304b\u304f\u3068\u305f\u3078\u3082\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3064\u305f\u304b\u3053\u3053\u306f\u304b \u304b\u3057\u3053\u306a\u305d\u306a\u3081\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u306f\u305b\u306e\u3042\u3068\u308c\u306e \u3088\u304b\u3084\u3046\u3059\u3064\u3080\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u306f\u304d\u3082\u306b\u3088\u3092\u306e \u307f\u304d\u3082\u306a\u306d\u3057\u306f\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306a\u306b\u308a\u3053\u3064\u3057\u306e \u306d\u3075\u306f\u3042\u308c\u3089\u3057\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3042\u3053\u3057\u304d\u3064\u306a\u306f \u304b\u304b\u308c\u306e\u3089\u304b\u306a\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3053\u308b\u305f\u307e\u306e\u3053\u306f \u3055\u3086\u304b\u304a\u308a\u304b\u308d\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3053\u3051\u307f\u304d\u3089\u304b\u306e \u304a\u3055\u3055\u3042\u305d\u304b\u308a\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u3064\u308c\u306f\u308a\u305f\u304d\u3059 \u305f\u304d\u306e\u305b\u305f\u304b\u304f\n# ... with 150,320 more rows\n\n\n# \u591a\u69d8\u6027\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u7570\u306a\u308b\u53e5\u304c\u751f\u6210\u3055\u308c\u308b\u3002\ntemperature <- 1.0\norg_exp_result_predict <- exp(x = log(x = result_predict) / temperature)\nset.seed(seed = 71)\n> genChars(x = org_exp_result_predict[1, , ], chars = chars)\n[1] \"\u304b\u308c\u304b\u306b\u306a\u305f\u304b\u3044\u3082\u306b\u306a\u304b\u306c\u3080\"\n\ntemperature <- 0.9\norg_exp_result_predict <- exp(x = log(x = result_predict) / temperature)\nset.seed(seed = 71)\n> genChars(x = org_exp_result_predict[1, , ], chars = chars)\n[1] \"\u304b\u3091\u3068\u306e\u305f\u304b\u306f\u3053\u306b\u306e\u3044\u306c\u3089\u3080\"\n\n\n# \u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u5c0f\u3055\u304f\u306a\u308b\u306b\u3064\u308c\u3066\u591a\u69d8\u6027\u304c\u306a\u304f\u306a\u308b\u3002\nset.seed(seed = 71)\n> lapply(\n  X = seq(from = 0.9, to = 0.1, by = - 0.1),\n  FUN = mergeTankaUpperLower,\n  tanka_upper = normalize_tanka_text, result = result_predict, chars = chars,\n  target_num = 10\n)\n[[1]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u304b\u3091\u3068\u306e\u305f\u304b\u306f \u3053\u306b\u306e\u3044\u306c\u3089\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3064\u3078\u308f\u304b\u3089\u306a\u306e \u306a\u3084\u306e\u304b\u307e\u304b\u3068\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u306a\u306b\u305f\u306a\u307f\u307e\u306b \u306d\u308b\u3072\u306a\u306e\u306a\u308a\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3044\u305d\u3082\u3075\u3089\u3057\u3066 \u3057\u308d\u306e\u3057\u304b\u3057\u3066\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3068\u305f\u304d\u304f\u304b\u307e\u306b \u305f\u304f\u306e\u3053\u304f\u3089\u3080\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u307e\u306b\u308b\u306f\u3059\u3068\u306e \u305d\u308b\u306e\u306a\u308b\u305f\u308c\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u307f\u305f\u306e\u3080\u306f\u3055\u3059 \u304a\u3061\u3061\u3057\u308b\u304b\u305b\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3084\u308d\u3072\u306a\u307b\u304f\u308b \u3053\u3075\u3092\u3064\u305d\u304b\u308a\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3051\u3051\u306d\u3059\u304b\u3089\u304d \u3055\u304d\u306e\u306e\u3057\u304b\u3057\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u3053\u306f\u307f\u307f\u3055\u306f\u306e \u3084\u304d\u3082\u304a\u305d\u306a\u306a\n\n[[2]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u306a\u308a\u306e\u3053\u306a\u308c\u3082 \u304f\u304d\u307e\u306c\u3092\u306f\u3082\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3080\u3051\u3092\u304b\u306a\u306d\u306e \u306f\u3068\u3092\u305b\u308a\u3051\u3092\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u304a\u3068\u3089\u306e\u304d\u305f\u305d \u3042\u3068\u306e\u306a\u306e\u3051\u304d\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3072\u3064\u3092\u308a\u304d\u3068\u3092 \u3044\u3066\u3092\u304b\u308b\u308b\u3051\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3082\u307f\u306b\u306e\u307f\u304b\u306e \u3057\u3061\u304b\u3057\u3064\u304b\u3075\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u304b\u307b\u306a\u3084\u3046\u304b\u306e \u304f\u308b\u307e\u306f\u308a\u3051\u308b\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3044\u305f\u306e\u306b\u307e\u3053\u306f \u3042\u3057\u3082\u3059\u306f\u3051\u308a\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3092\u306e\u304b\u3044\u304d\u304d\u3084 \u3075\u304d\u306e\u305d\u306a\u3051\u308c\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u305f\u3089\u3046\u3064\u306f\u307f\u306e \u3088\u308c\u3057\u3044\u304b\u3051\u308c\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u306a\u3078\u308c\u3061\u304b\u304b\u306c \u3059\u304b\u3075\u3051\u3061\u3068\u3080\n\n[[3]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u305f\u3059\u3057\u3078\u3084\u306d\u306e \u305f\u3068\u306e\u3092\u305f\u304b\u306a\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u304d\u304d\u3081\u306f\u3061\u304d\u306e \u3042\u304d\u306e\u304b\u306e\u3051\u3051\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u304b\u306e\u305f\u304b\u308c\u3089\u306e \u304b\u3068\u3084\u306a\u308b\u304b\u3080\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3042\u3082\u306e\u3053\u304d\u307f\u306e \u304d\u3057\u3082\u307e\u308b\u3068\u306a\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u307e\u304d\u3082\u305f\u3066\u3053\u306b \u3068\u3064\u306e\u307e\u308a\u304b\u306a\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3064\u3084\u306a\u308a\u304b\u304b\u304f \u306f\u304d\u307f\u304f\u308b\u304b\u306a\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u304a\u307b\u306e\u305d\u3055\u308a\u306e \u3042\u308c\u305d\u3057\u305d\u3057\u3066\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u306d\u304d\u306e\u308b\u3088\u3051\u306e \u306a\u308b\u306e\u304a\u3089\u3051\u3080\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3044\u308b\u305f\u3053\u3084\u3068\u3084 \u307e\u3082\u306d\u3059\u306a\u3059\u308b\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u306a\u3064\u3088\u307f\u305f\u307f\u306b \u306a\u3068\u304b\u3072\u308b\u305d\u3080\n\n[[4]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u304a\u3089\u3082\u306b\u307f\u3089\u3082 \u304a\u3068\u306b\u3051\u3059\u3089\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u305f\u304b\u3084\u306e\u304f\u308a\u306b \u307f\u304d\u306b\u304b\u3089\u304b\u3089\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u304a\u308b\u3072\u304f\u3068\u3089\u306e \u3068\u304d\u306e\u3064\u3082\u304b\u3084\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3075\u307e\u306b\u306e\u3064\u3055\u306e \u3053\u3089\u306b\u306b\u3089\u3064\u306a\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3042\u3082\u306e\u306e\u3068\u3089\u3092 \u304a\u308a\u3092\u305f\u3089\u3089\u3064\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306f\u3084\u306b\u3078\u304b\u308d\u306e \u3042\u3068\u3057\u307b\u308b\u3051\u3057\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u304b\u304d\u306e\u3082\u3072\u3068\u305d \u3082\u3068\u306f\u306a\u308b\u3089\u3080\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u304d\u308c\u3072\u306b\u3082\u308d\u306b \u3057\u308b\u304b\u3057\u308b\u3051\u304d\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3057\u304b\u306f\u306e\u304b\u3089\u306b \u306a\u3068\u306f\u306a\u308a\u304b\u3080\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u305f\u3068\u307f\u3082\u3084\u308d\u306e \u304d\u305f\u306a\u3092\u3082\u3089\u306f\n\n[[5]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3057\u304b\u306e\u306e\u306f\u308c\u3068 \u3042\u306e\u306e\u3064\u308b\u306a\u308a\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u304a\u3072\u3072\u306f\u306f\u307e\u306e \u3057\u3064\u306e\u304b\u305d\u3089\u308b\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u304a\u304b\u3088\u306f\u305f\u3089\u306e \u304a\u3053\u306e\u307e\u308a\u304b\u304d\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u304b\u308b\u306e\u3068\u3055\u304b\u306e \u307e\u308a\u306e\u306a\u3082\u3089\u3066\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u304b\u305f\u306b\u3072\u304d\u3078\u3082 \u3053\u3068\u306e\u3089\u307e\u308b\u308b\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3042\u307f\u3088\u3082\u304b\u307f\u306b \u304a\u3089\u3057\u304d\u308a\u3057\u306a\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u304a\u305f\u3089\u3082\u3084\u308a\u306e \u307e\u304b\u3092\u306a\u308b\u3051\u3080\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3053\u304b\u306e\u304f\u3053\u3068\u306b \u306f\u308b\u306f\u307f\u308a\u3089\u3057\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3084\u3059\u306f\u306b\u304b\u3068\u306f \u304b\u308b\u304b\u3053\u308a\u304b\u308a\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u308f\u304d\u306e\u3086\u306e\u304d\u308b \u306a\u304d\u304b\u306f\u306e\u306a\u3057\n\n[[6]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3082\u305f\u3068\u306a\u3064\u305f\u306e \u3042\u304d\u306e\u3055\u308b\u304b\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3044\u3064\u3088\u306b\u3082\u308a\u308b \u304b\u3089\u306e\u304b\u308a\u304b\u308b\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3044\u306a\u304b\u306e\u306e\u306b\u306e \u305f\u304b\u306e\u306a\u308b\u3051\u308a\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u305f\u3064\u306b\u308b\u304b\u3068\u306e \u304b\u304d\u306e\u304b\u306e\u3051\u306a\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3053\u306a\u306e\u306e\u306a\u307e\u306b \u3053\u3057\u3082\u3057\u308a\u304b\u308a\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306a\u308a\u306b\u304b\u3072\u304d\u306e \u3046\u3082\u306e\u3051\u308b\u3051\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3044\u3082\u306e\u306a\u3053\u3078\u306e \u306f\u304b\u306e\u306a\u305d\u3051\u3080\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u306f\u308a\u306e\u308b\u304f\u308d\u306b \u307e\u304d\u306e\u306f\u308a\u306a\u3080\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3042\u306f\u304b\u306a\u307f\u3057\u305d \u3042\u308c\u306e\u304b\u308a\u3089\u308a\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u304f\u3057\u3075\u3053\u3057\u306f\u306e \u304b\u3081\u305f\u304d\u308a\u3051\u308a\n\n[[7]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3064\u304d\u306e\u306e\u304b\u3089\u306e \u304b\u304b\u306e\u306a\u308b\u304b\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3044\u3068\u306b\u306e\u306f\u3089\u306e \u3042\u305f\u306e\u306a\u308a\u304b\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u306a\u306f\u308d\u306b\u306f\u3068\u306e \u306a\u308b\u306e\u306a\u308b\u304b\u3080\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u304b\u306a\u306b\u306e\u304b\u3068\u306e \u305f\u308b\u306e\u306a\u308b\u304b\u308a\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3072\u304b\u306e\u306e\u304b\u3068\u306e \u304b\u308b\u306e\u3057\u3064\u306a\u3080\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306a\u305f\u306e\u304b\u3053\u307e\u306e \u3042\u304d\u306e\u306a\u308b\u304b\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u306a\u3089\u306e\u306e\u3053\u3057\u306e \u3042\u308d\u306e\u306a\u305d\u3051\u3080\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3044\u3064\u3057\u306e\u305f\u3068\u306b \u3080\u308a\u306e\u306a\u308b\u304b\u3080\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3044\u304d\u304b\u306e\u3053\u3068\u306b \u306a\u307f\u306e\u306a\u308a\u304b\u3080\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u3075\u308c\u306e\u306b\u3064\u304d\u306e \u307f\u308b\u3055\u306a\u3089\u3089\u308b\n\n[[8]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3053\u304d\u306e\u3082\u304b\u3068\u308b \u3042\u304b\u306e\u306a\u308a\u304b\u306a\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u304b\u304b\u306e\u306e\u304b\u3068\u306b \u3042\u3068\u306e\u306a\u308a\u3051\u306a\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u304b\u304d\u306e\u306e\u304b\u3089\u306e \u3042\u3068\u306e\u306a\u308b\u304b\u308a\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3057\u304b\u306e\u306e\u304b\u3068\u306e \u306a\u3068\u306e\u306a\u308a\u3051\u3080\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u304b\u304d\u306e\u306e\u304b\u3068\u306e \u304b\u304d\u304b\u306a\u306e\u304b\u3080\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u304b\u307e\u3057\u308b\u304b\u3051\u306e \u3042\u308b\u306e\u306a\u308a\u304b\u308a\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3042\u3064\u306e\u306e\u3084\u3089\u306e \u3053\u304d\u306e\u3057\u308a\u304b\u3080\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u307e\u304b\u306e\u308b\u304b\u3068\u306e \u3042\u308b\u306e\u306a\u308a\u3051\u308a\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3042\u304d\u306e\u306e\u304b\u3068\u306e \u3046\u304b\u306e\u306a\u308a\u304b\u3080\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u3042\u305f\u306e\u306e\u304b\u308c\u306e \u3053\u3082\u306e\u306a\u308b\u306a\u3080\n\n[[9]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3044\u304b\u306e\u306e\u304b\u3068\u306e \u3042\u304d\u306e\u306a\u308a\u304b\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3044\u304b\u306e\u306e\u304b\u3089\u306e \u3042\u304d\u306e\u306a\u308a\u304b\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3044\u304b\u306e\u306e\u304b\u3068\u306e \u3042\u304d\u306e\u306a\u308a\u304b\u3080\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u304b\u304b\u306e\u306b\u304b\u3068\u306e \u3042\u308b\u306e\u306a\u308a\u3051\u306f\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3042\u304d\u306e\u306e\u304b\u3068\u306e \u3042\u304d\u306e\u306a\u306e\u304b\u3080\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306a\u308b\u306b\u306e\u304b\u3068\u306e \u3042\u304d\u306e\u306a\u308a\u304b\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3042\u304b\u306e\u306e\u304b\u3089\u306e \u3042\u304d\u306e\u306a\u308a\u304b\u3080\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u306a\u304b\u306e\u306e\u304b\u3068\u306e \u3053\u304d\u306e\u306a\u308a\u3051\u308a\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3042\u304b\u306e\u306e\u304b\u3068\u306e \u3044\u304d\u306e\u306a\u308a\u304b\u3080\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u3042\u304b\u306e\u306e\u304b\u3068\u306e \u3053\u304d\u306e\u306a\u308a\u304b\u3080\n\n\n\n\u30e2\u30c7\u30eb\u5909\u66f4\n\u3000\u4e0a\u8a18\u3067\u7528\u3044\u305fLSTM\u306e\u4ed6\u306bGRU\u30e2\u30c7\u30eb\u3082\u540c\u3058\u3088\u3046\u306b\u4f7f\u3048\u307e\u3059\u3002\u8a73\u3057\u3044\u8aac\u660e\u306f\u4ed6\u306e\u30da\u30fc\u30b8\u306b\u8b72\u308a\u307e\u3059\u304c\u3001Keras\u3067\u306f\u3053\u3061\u3089\u3082\u5b9a\u7fa9\u3055\u308c\u3066\u304a\u308a\u3001\u3059\u3050\u306b\u5229\u7528\u3067\u304d\u307e\u3059\u3002\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u3001\u3053\u3061\u3089\u3082\u5b9f\u884c\u3057\u3066\u6bd4\u8f03\u3057\u307e\u3057\u3087\u3046\u3002\n\nGRU\n# \u5404\u5c64\u306e\u8a2d\u5b9a\u306f\u540c\u3058\ngru_model <- keras$models$Sequential()\ngru_model$add(\n  layer = keras$layers$GRU(\n    output_dim = 128L, input_shape = c(SET_TEXT_PARAM$STEP, chars_len),\n    return_sequences = TRUE\n  )\n)\ngru_model$add(\n  layer = keras$layers$GRU(\n    output_dim = 128L,\n    return_sequences = TRUE, activation = \"relu\"\n  )\n)\ngru_model$add(\n  layer = keras$layers$TimeDistributed(\n    layer = keras$layers$Dense(output_dim = chars_len, activation = \"softmax\")\n  )\n)\ngru_model$compile(loss = \"categorical_crossentropy\", optimizer = \"rmsprop\")\n\n> gru_model$summary()\n____________________________________________________________________________________________________\nLayer (type)                     Output Shape          Param #     Connected to                     \n====================================================================================================\ngru_1 (GRU)                      (None, 17, 128)       68352       gru_input_1[0][0]                \n____________________________________________________________________________________________________\ngru_2 (GRU)                      (None, 17, 128)       98688       gru_1[0][0]                      \n____________________________________________________________________________________________________\ntimedistributed_2 (TimeDistribute(None, 17, 49)        6321        gru_2[0][0]                      \n====================================================================================================\nTotal params: 173361\n____________________________________________________________________________________________________\n\n\n# LSTM\u3088\u308a\u306f\u65e9\u3044\u304c\u30012\u6642\u9593\u8fd1\u304f\u304b\u304b\u308b\n> gru_model$fit(x = X, y = Y, batch_size = 1000L, nb_epoch = 30L, shuffle = TRUE)\nEpoch 1/30\n150330/150330 [==============================] - 236s - loss: 2.9939   \nEpoch 2/30\n150330/150330 [==============================] - 221s - loss: 2.8423   \nEpoch 3/30\n150330/150330 [==============================] - 222s - loss: 2.8003   \nEpoch 4/30\n150330/150330 [==============================] - 222s - loss: 2.7927   \nEpoch 5/30\n150330/150330 [==============================] - 222s - loss: 2.7897   \nEpoch 6/30\n150330/150330 [==============================] - 223s - loss: 2.7875   \nEpoch 7/30\n150330/150330 [==============================] - 223s - loss: 2.7857   \nEpoch 8/30\n150330/150330 [==============================] - 223s - loss: 2.7841   \nEpoch 9/30\n150330/150330 [==============================] - 223s - loss: 2.7827   \nEpoch 10/30\n150330/150330 [==============================] - 223s - loss: 2.7813   \nEpoch 11/30\n150330/150330 [==============================] - 223s - loss: 2.7798   \nEpoch 12/30\n150330/150330 [==============================] - 223s - loss: 2.7784   \nEpoch 13/30\n150330/150330 [==============================] - 223s - loss: 2.7769   \nEpoch 14/30\n150330/150330 [==============================] - 224s - loss: 2.7754   \nEpoch 15/30\n150330/150330 [==============================] - 223s - loss: 2.7738   \nEpoch 16/30\n150330/150330 [==============================] - 223s - loss: 2.7721   \nEpoch 17/30\n150330/150330 [==============================] - 223s - loss: 2.7705   \nEpoch 18/30\n150330/150330 [==============================] - 223s - loss: 2.7689   \nEpoch 19/30\n150330/150330 [==============================] - 223s - loss: 2.7671   \nEpoch 20/30\n150330/150330 [==============================] - 223s - loss: 2.7654   \nEpoch 21/30\n150330/150330 [==============================] - 223s - loss: 2.7636   \nEpoch 22/30\n150330/150330 [==============================] - 223s - loss: 2.7619   \nEpoch 23/30\n150330/150330 [==============================] - 223s - loss: 2.7600   \nEpoch 24/30\n150330/150330 [==============================] - 223s - loss: 2.7583   \nEpoch 25/30\n150330/150330 [==============================] - 223s - loss: 2.7564   \nEpoch 26/30\n150330/150330 [==============================] - 223s - loss: 2.7546   \nEpoch 27/30\n150330/150330 [==============================] - 224s - loss: 2.7527   \nEpoch 28/30\n150330/150330 [==============================] - 223s - loss: 2.7508   \nEpoch 29/30\n150330/150330 [==============================] - 223s - loss: 2.7489   \nEpoch 30/30\n150330/150330 [==============================] - 224s - loss: 2.7470   \nHistory\n\n\n# LSTM\u3068\u540c\u69d8\u3001\u5b66\u7fd2\u30c7\u30fc\u30bf\u3092\u9069\u7528\u3057\u305f\u7d50\u679c\u304b\u3089\u4e0b\u306e\u53e5\u3092\u751f\u6210\ngru_result_predict <- gru_model$predict(x = X[, , , drop = FALSE])[, seq(from = 1, to = SET_TEXT_PARAM$MAX_LEN - SET_TEXT_PARAM$STEP ), ]\n> gen_gru_tanka <- mergeTankaUpperLower(\n  tanka_upper = normalize_tanka_text, result = gru_result_predict, chars = chars,\n  diversity = 1.0, target_num = nrow(x = normalize_tanka_text)\n)\n# A tibble: 150,330 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u306a\u305f\u306e\u3068\u3042\u3084\u3084 \u3057\u307e\u306f\u308d\u3066\u3080\u308a\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u307e\u3068\u306e\u306b\u3068\u3089\u3059 \u306a\u3059\u308d\u3053\u3080\u3057\u308a\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u306f\u3081\u3057\u307f\u307b\u3068\u3082 \u3059\u3068\u306b\u3084\u308b\u304b\u3084\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3084\u304b\u304d\u3053\u307e\u3082\u3092 \u306f\u3061\u304f\u307e\u308b\u3051\u304d\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u304a\u306d\u3057\u3081\u3075\u304b\u304d \u304a\u3064\u307e\u3092\u3057\u3078\u305b\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3053\u308b\u3088\u306f\u308c\u3086\u308b \u304b\u307e\u306b\u3055\u306b\u307b\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u304b\u304d\u306f\u3057\u3068\u306b\u306f \u3042\u3064\u308b\u3092\u307f\u306a\u308a\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u304f\u307f\u306b\u308b\u306a\u308d\u306b \u3086\u307b\u3072\u306e\u3075\u3075\u3080\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3046\u3057\u3082\u307e\u308c\u304f\u306e \u306a\u3055\u3059\u306a\u306e\u3084\u306f\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u307e\u3089\u3089\u3057\u3055\u3059\u306f \u306a\u304b\u308a\u304d\u304b\u308c\u306f\n# ... with 150,320 more rows\n\n\n# LSTM\u30e2\u30c7\u30eb\u3068\u540c\u3058\u3088\u3046\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5909\u3048\u3066\u7570\u306a\u308b\u53e5\u3092\u751f\u6210\nset.seed(seed = 71)\n> lapply(\n  X = seq(from = 0.9, to = 0.1, by = - 0.1),\n  FUN = mergeTankaUpperLower,\n  tanka_upper = normalize_tanka_text, result = gru_result_predict, chars = chars,\n  target_num = 10\n)\n[[1]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u304b\u3092\u3068\u306e\u305f\u304b\u306f \u3053\u306b\u306e\u3044\u306c\u3089\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3064\u3078\u308f\u304b\u308c\u3057\u305d \u3086\u3084\u306e\u304b\u307e\u304b\u3068\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u306a\u306b\u305f\u306a\u305f\u3068\u306b \u3086\u3057\u308d\u306e\u306a\u306d\u308c\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u306f\u3055\u3082\u3075\u3089\u3057\u3066 \u3057\u308b\u3057\u3059\u3057\u304b\u3057\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3042\u3064\u3068\u306c\u304f\u308c\u306e \u3053\u304d\u3084\u3092\u304d\u3053\u3082\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3044\u304b\u3075\u3092\u304b\u308d\u306e \u3042\u304d\u3064\u307f\u308b\u306a\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u304b\u304b\u304a\u3068\u3089\u307e\u306e \u3055\u3068\u306e\u3057\u3059\u306b\u3080\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u307e\u3075\u306b\u306e\u307f\u306e\u306f \u306e\u304f\u3092\u3081\u308a\u306f\u308b\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3075\u3051\u3089\u304b\u3089\u304d\u306e \u307e\u3057\u3057\u3064\u308b\u3078\u3057\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u307b\u306f\u305f\u3088\u306f\u306a\u3068 \u306a\u307b\u3057\u308c\u3081\u306a\u3092\n\n[[2]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3053\u3075\u306e\u307f\u3055\u304d\u306e \u306a\u308b\u3080\u3057\u308b\u3053\u306a\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3044\u306b\u308c\u3064\u304b\u307e\u306e \u3053\u306a\u306e\u304d\u308b\u307f\u308b\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u307e\u304d\u307f\u306f\u304b\u3089\u306f \u3072\u3068\u306a\u3068\u3082\u304b\u304d\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u306f\u307e\u3053\u304b\u3059\u308d\u306b \u305f\u3082\u308b\u3064\u308b\u308a\u3082\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3046\u304f\u307e\u3061\u304b\u307f\u3092 \u306a\u304f\u306e\u306a\u3059\u304b\u3089\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u304a\u3089\u305f\u305d\u307e\u306b\u306b \u3053\u305b\u305f\u306a\u308a\u3075\u308c\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3044\u3082\u3088\u3082\u3061\u3089\u304d \u306a\u304b\u3044\u304d\u304d\u3051\u306a\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u304a\u3075\u306f\u3053\u3080\u3068\u3078 \u3072\u307f\u3064\u306f\u3084\u306a\u308b\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u304b\u306e\u3068\u3044\u304b\u3068\u3084 \u306f\u3064\u3072\u3078\u3059\u3051\u3075\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u304b\u3059\u306c\u3061\u3042\u3066\u3092 \u304a\u3059\u3057\u306a\u304f\u3089\u306a\n\n[[3]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u304b\u3086\u3084\u3082\u3088\u306a\u308b \u3055\u304d\u3072\u3053\u3082\u3089\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u307f\u306d\u304b\u3066\u3084\u3089\u3080 \u304a\u308d\u306b\u3088\u3082\u3089\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3044\u3084\u307f\u3057\u3064\u3072\u3080 \u305f\u3068\u306e\u304d\u3089\u3064\u307f\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3075\u308a\u304b\u3053\u306b\u308b\u306b \u307f\u3089\u306e\u304a\u3075\u3051\u3080\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3044\u304f\u306f\u3068\u3068\u308a\u306f \u306f\u305f\u308a\u3057\u3089\u304b\u304d\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3051\u3082\u306b\u304d\u3057\u3068\u306e \u3042\u306d\u308b\u3057\u308b\u3051\u308b\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3042\u3082\u306e\u306e\u304d\u306f\u306b \u307f\u304d\u3084\u305f\u308b\u304b\u306a\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u308f\u306e\u306e\u3068\u3053\u3064\u3082 \u306a\u308b\u306e\u3057\u308a\u307e\u306a\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3053\u308c\u306a\u3072\u307b\u306f\u3092 \u306a\u3092\u306b\u3053\u308b\u304b\u3082\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u3044\u304b\u3092\u307f\u3068\u3066\u308b \u304f\u308c\u306e\u304f\u304f\u305f\u308b\n\n[[4]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3084\u3075\u307e\u308a\u3053\u304d\u306e \u3042\u305d\u306e\u3075\u308b\u3089\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3044\u3068\u306e\u306e\u304b\u3051\u306f \u306a\u3068\u306f\u3053\u308b\u308a\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u304b\u306e\u305f\u306e\u304d\u3068\u306b \u3072\u3082\u3092\u304d\u308b\u3051\u306a\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3042\u308d\u3057\u306e\u304b\u3068\u306e \u3042\u3072\u306e\u3064\u308b\u304b\u3092\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u307e\u304b\u306e\u306e\u304b\u308a\u304d \u306a\u307f\u308a\u304b\u308a\u304b\u306a\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306f\u306a\u3091\u304b\u3057\u304f\u306b \u307f\u306a\u304b\u3057\u3089\u3089\u308a\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u306f\u3082\u3057\u306b\u3068\u305f\u306b \u3044\u308c\u3061\u3084\u3068\u3057\u304f\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3053\u3059\u306e\u304b\u3089\u307e\u306e \u306a\u308b\u306f\u306a\u308a\u304b\u306a\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3053\u304b\u306b\u306e\u304b\u306a\u3082 \u305d\u307b\u3082\u3057\u308b\u304b\u308c\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u306b\u3089\u308b\u306e\u3064\u3068\u306f \u3044\u307b\u306e\u3064\u304f\u307f\u3057\n\n[[5]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3044\u304b\u306e\u306e\u3072\u307e\u308b \u3086\u3068\u308b\u3057\u304d\u306a\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3044\u307f\u306d\u306e\u3053\u305f\u305d \u3042\u3075\u306e\u306f\u304b\u3053\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3088\u307e\u306e\u3053\u3064\u306b\u306e \u3053\u3082\u306e\u3057\u308b\u3089\u306a\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3044\u304b\u3082\u306e\u304b\u308a\u306b \u3046\u304d\u306b\u304b\u3082\u3068\u306f\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u307f\u3089\u3092\u304f\u304b\u305f\u306e \u3044\u3068\u305d\u306f\u308a\u304b\u306a\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3042\u308c\u306e\u3064\u3068\u3068\u306e \u3042\u304d\u305d\u304b\u305d\u306a\u308b\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u307e\u306f\u3072\u306e\u306a\u3057\u306e \u306a\u3064\u306e\u306a\u308b\u3051\u308b\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u305f\u3082\u306e\u308b\u304b\u3068\u306e \u3042\u308b\u3084\u304d\u308a\u3051\u3080\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u304b\u305f\u3092\u304f\u3057\u3091\u306f \u307e\u3082\u308b\u306a\u308c\u304b\u3080\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u306a\u3068\u305f\u304f\u306f\u308d\u306e \u3053\u305f\u306e\u3055\u3059\u304f\u3066\n\n[[6]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3042\u3068\u3072\u3075\u304b\u3089\u306b \u3042\u304d\u305d\u3082\u308b\u3089\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u306a\u305f\u306b\u306e\u307f\u305f\u306e \u304a\u306e\u306e\u3068\u308b\u3051\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3053\u3057\u3066\u306e\u304b\u3068\u306e \u306a\u304d\u306e\u306a\u308b\u304b\u3080\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3044\u307f\u304b\u305f\u304b\u307f\u306f \u305f\u308b\u306e\u306a\u308a\u3051\u3082\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3053\u3057\u3082\u306e\u304b\u304d\u3082 \u306a\u308b\u307e\u3068\u3089\u304b\u306a\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3044\u304d\u306e\u306e\u304b\u3068\u306e \u3042\u308a\u3082\u306a\u308b\u3051\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3053\u3084\u306b\u3068\u3057\u306f\u306e \u3042\u307e\u306e\u306a\u304d\u3051\u308a\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3053\u304d\u306e\u306f\u304b\u3068\u306b \u306a\u304b\u306e\u3057\u308a\u304b\u308a\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3042\u304d\u306b\u306e\u3057\u304d\u306f \u307f\u307e\u306e\u3068\u306b\u3057\u3080\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u3053\u3057\u3075\u3053\u3057\u306f\u308b \u306a\u3066\u3082\u306a\u308b\u308a\u3080\n\n[[7]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u306a\u306a\u306e\u3068\u3072\u308c\u308b \u3042\u304d\u306e\u306a\u308a\u3089\u308b\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u304b\u304b\u306e\u306e\u307f\u305f\u306e \u3042\u304d\u306e\u3068\u308b\u3089\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u304a\u306f\u3092\u306e\u304d\u304b\u306e \u305f\u304d\u306b\u3053\u308b\u304b\u3080\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u306f\u304d\u306e\u306e\u304b\u3068\u306e \u306a\u308c\u306e\u3042\u308a\u3051\u306f\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u305f\u304d\u306e\u306f\u304b\u308a\u306b \u3057\u304d\u306e\u304b\u306e\u304b\u306a\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306f\u304d\u306b\u306f\u304b\u3068\u306e \u3042\u304d\u306e\u306a\u308b\u3051\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u306a\u308b\u306e\u306e\u3059\u3068\u306b \u3057\u308b\u306e\u304b\u308b\u3051\u308b\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3053\u3064\u3057\u306e\u304b\u307e\u306e \u3042\u3068\u306e\u306a\u308a\u3051\u3080\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3044\u3068\u306b\u304b\u304b\u3068\u306f \u3053\u304b\u306e\u306a\u305d\u304b\u308b\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u304b\u3082\u306e\u306e\u304b\u305f\u306b \u304b\u3068\u3082\u306a\u307e\u3068\u306f\n\n[[8]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3042\u304b\u306e\u306e\u304b\u3068\u306e \u3042\u308b\u306e\u306a\u308a\u304b\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3044\u304d\u306e\u306b\u304b\u3068\u306e \u3044\u304d\u306e\u306a\u3053\u3089\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3044\u304d\u306e\u3082\u304b\u3068\u306e \u304b\u3068\u304b\u306a\u308b\u3089\u3080\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u306f\u304b\u306b\u3082\u304b\u3068\u306e \u3042\u304b\u306e\u306a\u308a\u3051\u3080\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3053\u304b\u306e\u306e\u304b\u3068\u306e \u306a\u308a\u306e\u306a\u308b\u304b\u3080\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306a\u308b\u306e\u304b\u304b\u308a\u306b \u3042\u308b\u306e\u304b\u308b\u304b\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3042\u3068\u306e\u306e\u306f\u3089\u306b \u3042\u304d\u306e\u306a\u308b\u3051\u308b\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3042\u3089\u306b\u306e\u304b\u3068\u306e \u3042\u308d\u306e\u306a\u308a\u3051\u308b\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u306a\u3068\u306e\u306e\u304b\u3068\u3082 \u306a\u3068\u3084\u306a\u305d\u304b\u3080\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u306a\u304d\u306b\u306e\u304b\u307f\u306f \u305f\u3068\u306e\u306a\u306e\u3089\u306f\n\n[[9]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3053\u304b\u306e\u306e\u304b\u304d\u306e \u3042\u304d\u306e\u306a\u308b\u3051\u308a\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3044\u304b\u306e\u306e\u304b\u304d\u306e \u3042\u304d\u306e\u306a\u306e\u3089\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3044\u304d\u306e\u306e\u304b\u3068\u306e \u3042\u3068\u306e\u306a\u308b\u304b\u306a\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u305f\u308b\u306e\u306e\u304b\u308a\u306e \u3042\u304d\u306e\u306a\u308a\u3051\u3080\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3042\u304d\u306e\u306e\u304b\u3068\u306e \u3042\u304d\u306e\u306a\u306e\u304b\u3080\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306a\u304d\u306e\u306e\u304b\u3068\u306e \u3042\u304d\u306e\u306a\u308b\u304b\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3042\u304b\u306e\u306e\u304b\u3089\u306b \u3042\u307e\u306e\u306a\u308b\u3051\u308b\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u304b\u304d\u306e\u306e\u304b\u3068\u306e \u3042\u308b\u306e\u306a\u308a\u304b\u308b\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u306a\u304d\u306e\u306e\u304b\u3068\u306e \u306a\u3068\u306e\u306a\u308a\u304b\u308b\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u3042\u304d\u306e\u306e\u304b\u3089\u306e \u306a\u3068\u306e\u306a\u306e\u3089\u306f\n\n\n\u3000LSTM\u3082GRU\u3082\u7532\u4e59\u3064\u3051\u304c\u305f\u3044\u3067\u3059\u306d\u3002\n\n\u30e2\u30c7\u30eb\u3067\u904a\u3076\n\u3000\u65b0\u5e74\u306a\u306e\u3067\u300c\u3042\u305f\u3089\u3057\u304d\u300d\u3067\u59cb\u307e\u308b\u4e0a\u306e\u53e5\u3092\u7528\u3044\u3066\u3001\u304a\u6b63\u6708\u306b\u3075\u3055\u308f\u3057\u305d\u3046\u306a\u4e0b\u306e\u53e5\u3092\u751f\u6210\u3092\u8a66\u307f\u307e\u3057\u305f\u3002\n\n\u65b0\u5e74\u306b\u5408\u3063\u305f\u53e5\u306e\u751f\u6210\u306b\u6311\u6226\n> normalize_tanka_text %>% \n  dplyr::filter(u1 == \"\u3042\u305f\u3089\u3057\u304d\") %>% \n  dplyr::distinct()\n# A tibble: 25 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u3042\u305f\u3089\u3057\u304d \u306f\u308b\u306e\u3084\u307e\u3078\u306e \u306f\u306a\u306e\u307f\u305d \u3068\u3053\u308d\u3082\u308f\u304b\u3059 \u3055\u304d\u306b\u3051\u308b\u304b\u306a\n2  \u3042\u305f\u3089\u3057\u304d \u306f\u308b\u306e\u3084\u307e\u3078\u306e \u306f\u306a\u306e\u307f\u305d \u3068\u3053\u308d\u3082\u308f\u304b\u3059 \u3055\u304d\u306b\u3061\u308a\u3051\u308b\n3  \u3042\u305f\u3089\u3057\u304d \u3046\u308c\u3078\u306f\u304a\u307b\u304f \u3055\u3080\u304d\u3088\u306e \u306a\u304b\u304d\u3088\u308a\u3053\u305d \u306f\u3057\u307e\u308a\u306b\u3051\u308b\n4  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u3057\u308b\u3059\u3068\u306a\u3089\u3057 \u3086\u304d\u306e\u3075\u308c\u308b\u306f\n5  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306f \u3044\u3084\u3068\u3057\u306b \u3086\u304d\u3075\u307f\u306a\u3089\u3057 \u3064\u306d\u304b\u304f\u306b\u3082\u304b\n6  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u306f\u3064\u306f\u308b\u306e \u3051\u3075\u3075\u308b\u3086\u304d\u306e \u3044\u3084\u3057\u3051\u3088\u3053\u3068\n7  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3044\u3084\u3068\u3057\u306b \u3086\u304d\u3075\u307f\u3061\u3089\u3057 \u3064\u306d\u306a\u3089\u306c\u304b\u3082\n8  \u3042\u305f\u3089\u3057\u304d \u3046\u308c\u3078\u306f\u304a\u307b\u304f \u3055\u3080\u304d\u3088\u306e \u306a\u304b\u304d\u3088\u308a\u3053\u305d \u306f\u3057\u307e\u308a\u306b\u3051\u308c\n9  \u3042\u305f\u3089\u3057\u304d \u306f\u308b\u306b\u3082\u3055\u3089\u306b \u306b\u306c\u307e\u3064\u306f \u3061\u3068\u305b\u3053\u3048\u3053\u306c \u3057\u308b\u3078\u306a\u308a\u3051\u308a\n10 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3075\u308b\u304d\u3072\u3068\u3068\u3061 \u3042\u3078\u308b\u306a\u308a\u3051\u308a\n# ... with 15 more rows\n\n# \u300c\u3042\u305f\u3089\u3057\u304d\u3068\u3057\u306e\u306f\u3057\u3081\u306b\u3068\u3088\u306e\u3068\u3057\u300d\u3068\u300c\u3042\u305f\u3089\u3057\u304d\u3068\u3057\u306e\u306f\u3057\u3081\u306e\u3046\u308c\u3057\u304d\u306f\u300d\u3092\u9078\u629e\norg_upper_seed_str <- c(\"\u3042\u305f\u3089\u3057\u304d\u3068\u3057\u306e\u306f\u3057\u3081\u306b\u3068\u3088\u306e\u3068\u3057\", \"\u3042\u305f\u3089\u3057\u304d\u3068\u3057\u306e\u306f\u3057\u3081\u306e\u3046\u308c\u3057\u304d\u306f\")\norg_x <- genOrgX(\n  org_upper_str = org_upper_seed_str,\n  chars = chars, dummy_seed = tanka_dummy, step = SET_TEXT_PARAM$STEP\n)\n\n\n# LSTM\u30e2\u30c7\u30eb\nset.seed(seed = 71)\nlapply(\n  X = seq(from = 1.0, to = 0.5, by = - 0.1),\n  FUN = mergeTankaUpperLower,\n  tanka_upper = normalize_tanka_text %>% \n    dplyr::filter(\n      u1 == \"\u3042\u305f\u3089\u3057\u304d\" & \n        (u2 ==  \"\u3068\u3057\u306e\u306f\u3057\u3081\u306b\" & u3 == \"\u3068\u3088\u306e\u3068\u3057\") | \n        (u2 ==  \"\u3068\u3057\u306e\u306f\u3057\u3081\u306e\" & u3 == \"\u3046\u308c\u3057\u304d\u306f\")\n    ) %>% \n    head(n = 2),\n  result = model$predict(x = org_x[, , , drop = FALSE])[, seq(from = 1, to = SET_TEXT_PARAM$MAX_LEN - SET_TEXT_PARAM$STEP ), ],\n  chars = chars, target_num = 2\n)\n[[1]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u304b\u3092\u3088\u306e\u304b\u3086\u306b \u306a\u304b\u306c\u308f\u3082\u304b\u304d\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3080\u307b\u3089\u306e\u304b\u304b\u308b \u304d\u3081\u307f\u3055\u3066\u304b\u3068\n\n[[2]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u306a\u306b\u305f\u306a\u307f\u307e\u306b \u3057\u307e\u306b\u306a\u306e\u306d\u308c\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3086\u306a\u3082\u3075\u304b\u3057\u306b \u3042\u3051\u3057\u306a\u307f\u3059\u3057\n\n[[3]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u304b\u3057\u3066\u3068\u305f\u304d\u304f \u304b\u307e\u308a\u3042\u304d\u3084\u3080\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u3057\u306e\u306a\u3053\u3089\u308a \u3042\u307b\u3068\u3044\u306b\u3051\u3092\n\n[[4]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u3068\u308c\u3082\u304b\u304a\u3068\u306e \u304a\u307f\u304f\u3082\u306c\u306a\u307e\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304a\u3061\u3061\u306e\u304b\u306a\u306e \u304a\u3068\u3092\u306a\u3089\u3072\u3080\n\n[[5]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u305f\u307f\u3092\u3064\u304b\u308a\u306b \u3046\u3051\u3089\u304b\u3089\u304b\u3057\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3068\u3086\u3057\u306e\u306f\u308a\u306e \u3042\u3059\u306e\u304b\u306e\u3089\u3081\n\n[[6]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u304a\u304d\u3084\u304d\u3053\u3068\u3082 \u304b\u304b\u307b\u307f\u308a\u304b\u306a\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304d\u304d\u306f\u3075\u306f\u308c\u306e \u3053\u307f\u3057\u306a\u308a\u3057\u306b\n\n\n# GRU\u30e2\u30c7\u30eb\nset.seed(seed = 71)\nlapply(\n  X = seq(from = 1.0, to = 0.5, by = - 0.1),\n  FUN = mergeTankaUpperLower,\n  tanka_upper = normalize_tanka_text %>% \n    dplyr::filter(\n      u1 == \"\u3042\u305f\u3089\u3057\u304d\" & \n        (u2 ==  \"\u3068\u3057\u306e\u306f\u3057\u3081\u306b\" & u3 == \"\u3068\u3088\u306e\u3068\u3057\") | \n        (u2 ==  \"\u3068\u3057\u306e\u306f\u3057\u3081\u306e\" & u3 == \"\u3046\u308c\u3057\u304d\u306f\")\n    ) %>% \n    head(n = 2),\n  result = gru_model$predict(x = org_x[, , , drop = FALSE])[, seq(from = 1, to = SET_TEXT_PARAM$MAX_LEN - SET_TEXT_PARAM$STEP ), ],\n  chars = chars, target_num = 2\n)\n[[1]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u304b\u3091\u3088\u306e\u304b\u3086\u306b \u306a\u304b\u306c\u307e\u308f\u3051\u304d\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3080\u307b\u3089\u306e\u304b\u304b\u308b \u304d\u3081\u307f\u3055\u306e\u3068\u306a\n\n[[2]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u3088\u3082\u306e\u304d\u3086\u307b\u308b \u3044\u306e\u306a\u306d\u308c\u3057\u3080\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3088\u3088\u3064\u3057\u3051\u3053\u3057 \u3086\u305f\u3059\u3057\u304b\u3057\u3084\n\n[[3]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u304a\u305f\u304d\u304f\u304b\u307e\u306b \u3061\u304d\u3084\u3089\u3057\u306a\u308a\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u3059\u308d\u308f\u3068\u3068\u306b \u307f\u3064\u304b\u306a\u308a\u3068\u306a\n\n[[4]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u3044\u307f\u307f\u304f\u3064\u3064\u3068 \u306a\u305f\u3059\u306b\u3061\u3051\u306a\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306a\u306a\u306b\u306e\u307f\u3089\u3082 \u3092\u3072\u3061\u306a\u3089\u304b\u3092\n\n[[5]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u306c\u3051\u3086\u307f\u3068\u3086\u306e \u304f\u307f\u308d\u306f\u308b\u306a\u3057\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u304d\u3088\u306f\u306a\u3068\u306f \u3084\u308b\u3088\u307f\u308a\u304b\u306a\n\n[[6]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u304d\u304d\u306e\u304b\u307f\u307f\u3084 \u306a\u308b\u3053\u307e\u3066\u304b\u3092\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307e\u304b\u3064\u306e\u307f\u305b\u306e \u3075\u304d\u306e\u3057\u3068\u304b\u308b\n\n\n\u3000\u7d50\u679c\u306b\u6e80\u8db3\u304c\u3044\u304b\u306a\u304b\u3063\u305f\u306e\u3067\u3001\"\u3042\u305f\u3089\u3057\u304d\u3068\u3057\u306e\u306f\u3057\u3081\u306e\u3046\u308c\u3057\u304d\u306f\"\u306b\u9650\u5b9a\u3057\u3001\u304b\u3064\u591a\u69d8\u6027\u30d1\u30e9\u30e1\u30fc\u30bf\u30921.0\u3067\u305f\u304f\u3055\u3093\u751f\u6210\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u305f\u304f\u3055\u3093\u751f\u6210\u3057\u3066\u307f\u308b\nset.seed(seed = 71)\n> dplyr::bind_rows(\n  lapply(\n    X = rep(x = 1.0, times = 50),\n    FUN = mergeTankaUpperLower,\n    tanka_upper = normalize_tanka_text %>% \n      dplyr::filter(u1 == \"\u3042\u305f\u3089\u3057\u304d\" & u2 ==  \"\u3068\u3057\u306e\u306f\u3057\u3081\u306e\" & u3 == \"\u3046\u308c\u3057\u304d\u306f\") %>% \n      head(n = 2),\n    result = gru_model$predict(x = org_x[, , , drop = FALSE])[, seq(from = 1, to = SET_TEXT_PARAM$MAX_LEN - SET_TEXT_PARAM$STEP ), ],\n    chars = chars, target_num = 2\n  )\n) %>% \n    as.data.frame()\n            u1             u2         u3             l1             l2\n1   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u3091\u3088\u306e\u304b\u3086\u306b \u306a\u304b\u306c\u307e\u308f\u3051\u304d\n2   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3080\u307b\u3089\u306e\u304b\u304b\u308b \u304d\u3081\u307f\u3055\u306e\u3068\u306a\n3   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3088\u3082\u307f\u3088\u3078\u3089\u306e \u3053\u3064\u3068\u3088\u308c\u3051\u308b\n4   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u3075\u3064\u3057\u3051\u3053\u3057 \u3086\u305f\u3059\u3057\u304b\u3057\u3084\n5   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304a\u305f\u304d\u304f\u304b\u307e\u306b \u3061\u304d\u3084\u308f\u3064\u3051\u3080\n6   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3075\u305f\u3082\u3078\u3068\u3068\u3068 \u3042\u3092\u308d\u306a\u3082\u3068\u3092\n7   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305f\u304f\u306e\u3055\u3068\u3089\u3059 \u304a\u3061\u3061\u307e\u308b\u307f\u3080\n8   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3084\u304f\u306f\u304d\u3064\u304f\u308b \u3089\u304d\u308c\u305d\u3091\u306e\u3051\n9   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306d\u3059\u306e\u3068\u304a\u3080\u306b \u3059\u3057\u3064\u3053\u306b\u3051\u3082\n10  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u307b\u306f\u304a\u304b\u308d\u308b \u3051\u3068\u305d\u304b\u3089\u308c\u3089\n11  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306a\u307f\u306a\u307b\u306e\u307f\u306e \u3075\u306a\u3082\u3078\u3057\u304b\u308b\n12  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304a\u306a\u306d\u308c\u3053\u308b\u306e \u305b\u306a\u306e\u304d\u308c\u306d\u304d\n13  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3044\u304d\u306e\u308b\u304d\u3078\u3092 \u3072\u305d\u3084\u3064\u308a\u308a\u3080\n14  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u307e\u3053\u3066\u3089\u308c\u306f \u3053\u306d\u3082\u307f\u306e\u306a\u3080\n15  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u304f\u3061\u3057\u3061\u304b\u308b \u306e\u3082\u304b\u305f\u3089\u304b\u306a\n16  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3072\u3089\u305f\u306f\u3082\u306f\u306e \u304a\u305f\u306e\u306a\u308b\u304b\u306b\n17  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u3057\u3082\u3059\u306f\u308d\u306b \u307f\u304b\u306b\u3044\u3057\u3051\u306a\n18  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304a\u306e\u304a\u307f\u3059\u306a\u308b \u3042\u306f\u3080\u3055\u305b\u308d\u3066\n19  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305f\u305f\u3081\u306e\u3068\u3081\u306e \u3068\u3078\u3072\u3078\u3059\u3051\u306a\n20  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304d\u304b\u3059\u304b\u3064\u305f\u3068 \u307b\u3066\u3072\u306a\u304f\u308c\u3064\n21  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u308d\u3075\u3084\u307e\u304f\u3082 \u3086\u3089\u306e\u3061\u307b\u304b\u306a\n22  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306b\u304b\u306e\u305f\u304b\u3066\u306e \u3080\u3091\u308c\u306d\u306a\u3089\u3066\n23  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3082\u3084\u306f\u306c\u3068\u3057\u3082 \u308f\u3064\u306f\u304b\u308a\u304b\u3057\n24  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u3064\u3066\u3053\u3057\u3051\u3068 \u3053\u3051\u3057\u306a\u308b\u3053\u3080\n25  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u306f\u306a\u308a\u304a\u304d\u304f \u306f\u304d\u307f\u304f\u308b\u304b\u306a\n26  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304a\u307b\u306e\u305d\u3057\u3089\u306e \u304b\u3053\u306f\u3078\u3082\u3057\u306e\n27  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u3075\u304b\u307e\u305f\u304b\u306e \u306a\u308b\u306e\u3064\u308b\u306f\u304d\n28  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u3068\u3053\u3084\u3068\u3042\u3082 \u307e\u3082\u3059\u3053\u3059\u306a\u308a\n29  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3053\u306f\u306e\u308b\u307f\u308a\u306b \u304a\u3089\u307f\u307b\u306f\u3088\u3080\n30  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305d\u3082\u3057\u3053\u3064\u307e\u306e \u3042\u304d\u304b\u304b\u306e\u3064\u3057\n31  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3059\u3068\u3066\u3092\u3046\u308c\u306e \u307f\u3075\u308c\u3064\u305d\u307e\u306a\n32  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3075\u304d\u306f\u305d\u306e\u3075\u3082 \u307f\u307e\u306e\u3055\u3082\u3089\u3080\n33  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3072\u3082\u3092\u3042\u3082\u308a\u306b \u306b\u3089\u307f\u3051\u3072\u3089\u3080\n34  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3046\u304b\u308a\u3057\u305f\u3061\u306e \u307e\u307b\u308b\u304f\u3053\u3051\u306a\n35  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3057\u304d\u3044\u308b\u306a\u308c\u305d \u3044\u3075\u307b\u3089\u3048\u306a\u308b\n36  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307e\u304b\u308b\u306f\u3072\u3068\u305d \u3082\u3068\u306f\u308c\u308b\u3057\u3057\n37  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u306f\u308b\u307e\u3057\u3068\u308b \u305f\u305f\u308c\u3064\u3053\u304b\u304f\n38  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3082\u306a\u3057\u304b\u3044\u3053\u3059 \u307e\u3089\u308d\u306a\u308b\u306a\u308b\n39  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305f\u306e\u3082\u305f\u3086\u3068\u306e \u304b\u306f\u307b\u305f\u306a\u3051\u308b\n40  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u3078\u306e\u3059\u3042\u3088\u3092 \u3044\u3068\u305f\u3068\u308a\u3064\u304f\n41  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306a\u306b\u307f\u3057\u3064\u308b\u306f \u3046\u308b\u306a\u304b\u3092\u304f\u308b\n42  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306e\u3068\u3084\u307f\u306d\u3084\u3080 \u308f\u3061\u306e\u3053\u308a\u307f\u306a\n43  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u304b\u3078\u306f\u3042\u306b\u3084 \u3046\u3061\u306c\u305d\u308a\u3048\u306f\n44  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306f\u306e\u304a\u3082\u3064\u3051\u306c \u3084\u3048\u3082\u3053\u306d\u3068\u3055\n45  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u305f\u306e\u3066\u3072\u3057\u306b \u3046\u3072\u3068\u305d\u308a\u306a\u3080\n46  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305d\u3084\u306b\u304a\u3044\u308c\u305d \u3053\u305d\u3072\u304b\u306b\u3057\u308b\n47  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3053\u304f\u306e\u306e\u307f\u3057\u3092 \u306a\u3089\u3072\u3064\u308b\u3051\u3080\n48  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u3053\u3086\u3082\u305f\u306f\u304d \u3042\u3051\u306f\u304b\u308d\u304b\u304d\n49  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304a\u3082\u305b\u306f\u3075\u306a\u306e \u304b\u308d\u3084\u306a\u308a\u3089\u306a\n50  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305f\u3082\u3072\u304d\u306a\u308c\u306e \u3042\u308c\u307b\u3082\u308b\u3064\u3066\n51  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u307e\u3057\u307f\u304b\u3048\u304d \u3086\u3082\u3084\u304b\u308c\u3088\u306a\n52  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3044\u308c\u304f\u3082\u3075\u3068\u306f \u3055\u3059\u3061\u3081\u304b\u308d\u304f\n53  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u3061\u3080\u3066\u3082\u3086\u3082 \u3082\u306f\u308c\u3092\u305f\u3086\u3057\n54  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306b\u304f\u3053\u304f\u3057\u3053\u3092 \u306a\u307e\u306e\u308f\u308a\u304b\u306e\n55  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3046\u3048\u308b\u308c\u3082\u3084\u306e \u3042\u3075\u306f\u3057\u306b\u3055\u306a\n56  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u308f\u308c\u3072\u306e\u304f\u3053\u306e \u307e\u306d\u304b\u304d\u3082\u306a\u306f\n57  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305d\u3086\u3057\u3068\u3053\u3055\u308b \u304b\u307b\u306a\u3057\u3051\u304b\u308a\n58  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3044\u3075\u306b\u3084\u3042\u305b\u306e \u3042\u307e\u306a\u307f\u3057\u305d\u308c\n59  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3044\u307b\u3053\u304b\u3044\u3075\u306b \u307f\u3048\u3068\u3057\u3089\u3057\u306f\n60  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3061\u3089\u306e\u304d\u305f\u3086\u306e \u3075\u304d\u308c\u3053\u3089\u306f\u305b\n61  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304d\u307b\u306b\u308b\u306a\u3051\u3080 \u3046\u304b\u3084\u307b\u3075\u304b\u3080\n62  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3082\u304b\u305f\u3068\u305f\u306d\u306e \u3080\u3068\u308a\u306a\u3064\u304b\u304d\n63  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304f\u3064\u306e\u308b\u304d\u3053\u3082 \u3084\u3066\u304b\u3089\u3053\u3078\u306a\n64  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3080\u307e\u307e\u3068\u308c\u304b\u306f \u3042\u3092\u305f\u3057\u308a\u305b\u306a\n65  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307e\u304b\u306e\u3064\u307f\u304a\u306e \u3084\u307f\u3072\u3092\u308b\u306a\u3092\n66  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305b\u307e\u3057\u308a\u307b\u3089\u306e \u3042\u308b\u306b\u3082\u305d\u3053\u3080\n67  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3055\u306f\u305f\u3064\u3057\u304f\u306e \u3046\u304b\u3080\u305f\u306b\u3089\u308a\n68  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304d\u306a\u3044\u3066\u3055\u3064\u306e \u3072\u3064\u3055\u3042\u308d\u3064\u3092\n69  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3080\u3072\u306e\u306f\u307f\u305f\u306c \u3088\u307e\u306e\u306b\u3082\u306e\u308a\n70  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305d\u308c\u3072\u3072\u307b\u306f\u3068 \u3042\u308b\u306b\u306a\u3051\u305f\u308b\n71  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304f\u304b\u307e\u3078\u3068\u304f\u306b \u3059\u304b\u304b\u3068\u306e\u3051\u3057\n72  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3057\u3059\u306b\u3066\u3086\u3042\u308b \u304b\u304d\u308c\u3057\u3089\u306a\u3066\n73  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3046\u3082\u306f\u308d\u3057\u3089\u306b \u3051\u308b\u3084\u308f\u3082\u306a\u3066\n74  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3051\u305f\u3072\u3066\u308a\u305f\u3055 \u3064\u307e\u306e\u304b\u308a\u308b\u3081\n75  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3064\u3089\u304d\u3082\u3082\u3055\u3082 \u3086\u3061\u3072\u3084\u308b\u305d\u306f\n76  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u305f\u3072\u306e\u3080\u306a\u306f \u304b\u3068\u306b\u3059\u304f\u304b\u306b\n77  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u304b\u308a\u306b\u3082\u306f\u3082 \u304b\u305d\u306a\u306a\u308a\u304b\u308a\n78  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307e\u304f\u304b\u306e\u306f\u307e\u306e \u3061\u3089\u3082\u3046\u306e\u3084\u306a\n79  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u304d\u3044\u3082\u3064\u3089\u3080 \u3061\u3068\u3084\u304b\u306f\u3055\u3068\n80  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3044\u306f\u304d\u304d\u3044\u304d\u3082 \u306a\u307f\u3082\u3066\u307e\u306a\u3082\n81  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u3064\u306f\u3075\u3081\u3075\u306f \u3061\u3066\u308c\u3048\u306b\u306c\u306a\n82  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305b\u3078\u305b\u306b\u304b\u3048\u3092 \u307e\u3081\u3066\u3088\u3061\u308c\u3086\n83  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3086\u3059\u304b\u3057\u304d\u306e\u3082 \u307f\u308d\u308b\u3084\u306b\u3089\u3068\n84  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306a\u3055\u308a\u308b\u307b\u307e\u304d \u304b\u3089\u307e\u306a\u306e\u3089\u306a\n85  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306a\u307f\u305f\u305d\u3042\u304f\u3084 \u3053\u3061\u3072\u304d\u308a\u306d\u308a\n86  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3064\u304d\u308c\u3082\u3057\u3068\u306b \u306a\u3068\u305d\u3057\u3086\u307b\u306f\n87  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3082\u3088\u3057\u3092\u3092\u3086\u3082 \u3084\u3072\u3044\u306a\u304d\u306c\u3080\n88  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u3084\u3078\u3086\u3068\u306a\u3075 \u3053\u3082\u305f\u305f\u3068\u3068\u308b\n89  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3075\u306e\u3046\u306b\u3053\u304b\u306f \u3086\u308b\u3061\u306a\u3082\u3078\u3080\n90  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3061\u3059\u3072\u304d\u304d\u304b\u306f \u3042\u3072\u3057\u304b\u3089\u306d\u3051\n91  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3044\u3055\u306f\u3068\u304b\u3057\u308b \u307f\u308f\u3082\u3053\u3084\u3059\u3080\n92  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u3086\u3092\u3053\u304f\u3078\u306e \u307f\u304b\u305f\u3057\u308b\u304b\u3080\n93  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3046\u3081\u304b\u3059\u3059\u308d\u3082 \u304a\u308c\u3066\u305d\u308b\u306b\u3091\n94  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3072\u304d\u305b\u306e\u305b\u308c\u306e \u306f\u304d\u305f\u304b\u308a\u3089\u306f\n95  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304f\u3057\u305f\u306e\u3042\u3055\u306f \u307f\u3082\u305d\u305f\u306f\u3059\u308c\n96  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3053\u3082\u3061\u3068\u304b\u304b\u3082 \u305f\u3066\u308a\u307e\u307e\u3082\u304d\n97  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304f\u307b\u3072\u3044\u305f\u306d\u3082 \u3042\u304d\u3082\u308f\u308a\u306a\u3066\n98  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304a\u304f\u306f\u306e\u3084\u305f\u3084 \u3066\u305f\u3089\u306a\u3053\u304b\u3084\n99  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u308b\u307f\u3084\u3089\u3061\u3088 \u3042\u3089\u305d\u3092\u308a\u307f\u308b\n100 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u3089\u306e\u304d\u3055\u3051\u306b \u304b\u308c\u3057\u307f\u308a\u3057\u305b\n\n\n\u3000\u975e\u5e38\u306b\u6b8b\u5ff5\u3067\u3059\u304c\u3001\u3044\u3044\u611f\u3058\u306e\u53e5\u306f\u898b\u5f53\u305f\u308a\u307e\u305b\u3093\u3002\n\n\u307e\u3068\u3081\n\u3000{tensorflow}\u306eimport\u95a2\u6570\u3092\u5229\u7528\u3057\u3066R\u4e0a\u304b\u3089Keras\u3092\u7528\u3044\u305f\u30e2\u30c7\u30eb\u3092\u69cb\u7bc9\u3057\u3001\u77ed\u6b4c\u306e\u30c7\u30fc\u30bf\u3092\u9069\u7528\u3057\u3066\u4e0b\u306e\u53e5\u3092\u751f\u6210\u3059\u308b\u3053\u3068\u306b\u6311\u6226\u3057\u307e\u3057\u305f\u3002\u30e2\u30c7\u30eb\u81ea\u4f53\u306f\u52d5\u4f5c\u3057\u3066\u751f\u6210\u81ea\u4f53\u306f\u53ef\u80fd\u3067\u3057\u305f\u304c\u3001\u53ca\u7b2c\u70b9\u3092\u4e0e\u3048\u3089\u308c\u308b\u3088\u3046\u306a\u6b4c\u306f\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u3000\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u8981\u56e0\u3068\u3057\u3066\u3001Epoch\u6570\u304c\u5c11\u306a\u3044\u70b9\u304c\u8003\u3048\u3089\u308c\u307e\u3059\u3002\u3082\u3063\u3068\u5b66\u7fd2\u3092\u56de\u3057\u3066\u307f\u305f\u304fGPU\u30d1\u30ef\u30fc\u3092\u6b32\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u9ad8\u3044\u30de\u30cd\u30fc\u304c\u5fc5\u8981\u306a\u3063\u3066\u4e00\u500b\u4eba\u3067\u306f\u624b\u304c\u51fa\u305b\u305d\u3046\u306b\u3042\u308a\u307e\u305b\u3093\u3002\n\u3000\u307e\u305f\u3001\u30e2\u30c7\u30eb\u306e\u4e00\u65b0\u3082\u6539\u5584\u6848\u306b\u6319\u3052\u3089\u308c\u307e\u3059\u3002\u4eca\u56de\u306fRNN-LSTM/GRU\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u30bf\u30b9\u30af\u3068\u3057\u3066\u306fSequence-to-Sequence\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u306e\u65b9\u304c\u9069\u3057\u3066\u3044\u308b\u3068\u8003\u3048\u3089\u308c\u307e\u3059\u3002Sequence-to-Sequence\u306b\u95a2\u3057\u3066\u306fKeras\u306eIssue\u304c\u7acb\u3063\u3066\u304a\u308a\u3001\u4eca\u5f8c\u306e\u53d6\u308a\u8fbc\u307f\u3092\u671f\u5f85\u3057\u3066\u3044\u307e\u3059\uff08Attension\u30e2\u30c7\u30eb\u3068\u304b\u3082\uff09\u3002\n\u3000\u52a0\u3048\u3066\u4eca\u56de\u306f\u300c\u53e5\u6570 \u00d7 \u6587\u5b57\u306eOne-hot\u8868\u73fe\u300d\u306e\u30c7\u30fc\u30bf\u3092\u4e0a\u306e\u53e5\u3068\u4e0b\u306e\u53e5\u3067\u5bfe\u5fdc\u3065\u3051\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u753b\u50cf\u3067\u3088\u304f\u63a1\u7528\u3055\u308c\u3066\u3044\u308bCNN\u306b\u3088\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3082\u4f7f\u3048\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u3082\u3061\u308d\u3093\u3001\u7cfb\u5217\u30c7\u30fc\u30bf\u3068\u3057\u3066STEP\u30b5\u30a4\u30ba\u3067\u53e5\u3092\u5207\u308a\u3001\u4e00\u6587\u5b57\u305a\u3064\u751f\u6210\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3082\u3044\u3044\u3068\u601d\u3044\u307e\u3059\uff08\u3080\u3057\u308d\u3053\u3061\u3089\u306e\u65b9\u3092\u8a66\u3057\u3066\u307f\u308b\u3079\u304d\u3067\u3057\u305f\uff09\u3002\n\u3000\u3044\u308d\u3044\u308d\u3068\u8a66\u305b\u305d\u3046\u306a\u306e\u3067\u6298\u3092\u898b\u3066\u89e6\u3063\u3066\u307f\u307e\u3059\u3002\n\u3000gensim\u306b\u7d9a\u3044\u3066Keras\u3092R\u4e0a\u3067\u6d3b\u7528\u3057\u305f\u6240\u611f\u3092\u307e\u3068\u3081\u308b\u3068\u3001\u6b8b\u5ff5\u306a\u304c\u3089Python\u3067\u4f7f\u3048\u308b\u6a5f\u80fd\u3092\u305d\u306e\u307e\u307e\u3068\u3044\u3046\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u624b\u8efd\u306b\u8a66\u3059\u5206\u306b\u306f\u3088\u3044\u3067\u3059\u304c\u3001\u3044\u304f\u3064\u304b\u306e\u95a2\u6570\u304c\u5229\u7528\u3067\u304d\u306a\u304b\u3063\u305f\u308a\uff08gensim\u3092\u5229\u7528\u3057\u305f\u8a18\u4e8b\u3082\u53c2\u7167\u306e\u3053\u3068\u3002\u305f\u3060\u3057\u3001\u5b9f\u884c\u74b0\u5883\u306b\u3088\u3063\u3066\u5229\u7528\u3067\u304d\u305f\u306e\u3067\u8abf\u67fb\u304c\u5fc5\u8981\uff09\u3001Python\u306elist\u5f62\u5f0f\u3078\u306e\u578b\u5909\u63db\u304c\u3067\u304d\u305a\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4e0e\u3048\u3089\u308c\u306a\u3044\u3068\u3044\u3046\u58c1\u306b\u3076\u3061\u3042\u305f\u308a\u307e\u3057\u305f\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u8907\u96d1\u306a\u30e2\u30c7\u30eb\u3092Keras\u3067\u4f5c\u6210\u3059\u308b\u969b\u306b\u5f79\u7acb\u3064callback\u3084merge\u306a\u3069\u306e\u6a5f\u80fd\u304c~\u5229\u7528\u3067\u304d\u306a\u304f\u3066\u3001\u3042\u308c\u3053\u308c\u8a66\u3057\u307e\u3057\u305f\u304cPython\u3067\u66f8\u304f\u3068\u3044\u3046\u306e\u304c\u30b7\u30f3\u30d7\u30eb\u3067\u30d9\u30b9\u30c8\u306a\u89e3\u306b\u306a\u308a\u305d\u3046\u3067\u3059\uff08\u3053\u3061\u3089\u306ftensowflow\u306a\u3044\u3057\u306f{tensowflow}\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u3042\u3052\u308b\u3001\u307e\u305f\u306f\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u5b9f\u884c\u53ef\u80fd\u306b\u306a\u308a\u3001EarlyStopping\u3082TensorBoard\u3082\u52d5\u4f5c\u3057\u307e\u3057\u305f\uff09\u3002\n\u3000\u7121\u7406\u3084\u308aKeras\u3092\u547c\u3073\u51fa\u3059\u3088\u308a\u3082\u3001R\u3067\u4f7f\u3046\u306a\u3089{tensowflow}\u3084{mxnet}\u304c\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u306d\u3002\n\u3000\n\u3000\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u4eca\u5e74\u306fPython\u3092\u52c9\u5f37\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u53c2\u8003\n\nThe Unreasonable Effectiveness of Recurrent Neural Networks\nMulti-layer Recurrent Neural Networks (LSTM, GRU, RNN) for character-level language models in Torch\n\u308f\u304b\u308bLSTM \uff5e \u6700\u8fd1\u306e\u52d5\u5411\u3068\u5171\u306b\nLSTM\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u6982\u8981\n\u518d\u5e30\u578b\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8b1b\u7fa9\u30b7\u30ea\u30fc\u30ba\u30fb\u7b2c1\u90e8: RNN\u5165\u9580\n\u3053\u308c\u3092\u7406\u89e3\u3067\u304d\u308c\u3070\u81ea\u7136\u8a00\u8a9e\u51e6\u7406\u3082\u3067\u304d\u3061\u3083\u3046\uff1f MNIST\u3067RNN(LSTM)\u3092\u89e6\u308a\u306a\u304c\u3089\u89e3\u8aac\nRNN\u306b\u304a\u3051\u308bDropout\u306e\u9069\u7528\u306b\u3064\u3044\u3066\nLSTM\u3092\u8d85\u3048\u308b\u671f\u5f85\u306e\u65b0\u661f\u3001QRNN\ncharacter-level CNN\u3067\u30af\u30ea\u30b9\u30de\u30b9\u3092\u751f\u304d\u629c\u304f\n\u6df1\u5c64\u30ea\u30ab\u30ec\u30f3\u30c8\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u7528\u3044\u305f\u65e5\u672c\u8a9e\u8ff0\u8a9e\u9805\u69cb\u9020\u89e3\u6790\nRecurrent Neural Network Tutorial for Artists\nLSTM sequence to sequence architectures (Encoding question)\nshashankg7/Seq2Seq\nfarizrahman4u/seq2seq\n\u6700\u8fd1\u306eDeep Learning (NLP) \u754c\u9688\u306b\u304a\u3051\u308bAttention\u4e8b\u60c5\nImplementation of Sequence Generative Adversarial Nets with Policy Gradient\n\u30c6\u30ad\u30b9\u30c8\u751f\u6210\u30e2\u30c7\u30eb -SeqGAN-\n\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u4f5c\u66f2\u3092\u3059\u308b! Magenta\u3092\u52d5\u304b\u3059\nGoogle Magenta\u304c\u65b0\u305f\u306b\u516c\u958b\u3057\u305f2\u3064\u306e\u4f5c\u66f2\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af(Lookback RNN,Attention RNN)\n\u6df1\u5c64\u5b66\u7fd2\u3067\u81ea\u52d5\u4f5c\u66f2\uff08Stacked LSTM\u7de8\uff09 [DW 6\u65e5\u76ee]\n\u8907\u6570\u306e\u8457\u8005\u3092\u30c6\u30ad\u30b9\u30c8\u60c5\u5831\u3092\u6df7\u305c\u5408\u308f\u305b\u305fRNN\u3068\u9577\u6587\u306e\u6539\u5584\u624b\u6cd5\nCNN\u3092\u5229\u7528\u3057\u305f\u30bb\u30f3\u30c1\u30e1\u30f3\u30c8\u5206\u6790\nMXNet- Char RNN Example\nDeep Learning\u3067\u904a\u3076(3): LSTM-RNN\u3067\u590f\u76ee\u6f31\u77f3\u3063\u307d\u3044\u6587\u7ae0\u306e\u751f\u6210\u306b\u30c8\u30e9\u30a4\u3057\u3066\u307f\u308b\n\n\n\u5b9f\u884c\u74b0\u5883\n\nR\u5b9f\u884c\u74b0\u5883\n> devtools::session_info()\nSession info -------------------------------------------------------------------------------------\n setting  value                       \n version  R version 3.3.2 (2016-10-31)\n system   x86_64, darwin15.6.0        \n ui       RStudio (1.0.136)           \n language (EN)                        \n collate  ja_JP.UTF-8                 \n tz       Asia/Tokyo                  \n date     2017-01-03                  \n\nPackages -----------------------------------------------------------------------------------------\n package      * version date       source                             \n assertthat     0.1     2013-12-06 CRAN (R 3.3.2)                     \n car            2.1-4   2016-12-02 CRAN (R 3.3.2)                     \n caret        * 6.0-73  2016-11-10 CRAN (R 3.3.2)                     \n codetools      0.2-15  2016-10-05 CRAN (R 3.3.2)                     \n colorspace     1.3-2   2016-12-14 CRAN (R 3.3.2)                     \n devtools       1.12.0  2016-12-05 CRAN (R 3.3.2)                     \n digest         0.6.10  2016-08-02 CRAN (R 3.3.2)                     \n foreach        1.4.3   2015-10-13 CRAN (R 3.3.1)                     \n ggplot2      * 2.2.0   2016-11-11 CRAN (R 3.3.2)                     \n gtable         0.2.0   2016-02-26 CRAN (R 3.3.2)                     \n iterators      1.0.8   2015-10-13 CRAN (R 3.3.1)                     \n lattice      * 0.20-34 2016-09-06 CRAN (R 3.3.2)                     \n lazyeval       0.2.0   2016-06-12 CRAN (R 3.3.2)                     \n lme4           1.1-12  2016-04-16 CRAN (R 3.3.2)                     \n magrittr       1.5     2014-11-22 CRAN (R 3.3.2)                     \n MASS           7.3-45  2016-04-21 CRAN (R 3.3.2)                     \n Matrix         1.2-7.1 2016-09-01 CRAN (R 3.3.2)                     \n MatrixModels   0.4-1   2015-08-22 CRAN (R 3.3.2)                     \n memoise        1.0.0   2016-01-29 CRAN (R 3.3.2)                     \n mgcv           1.8-15  2016-09-14 CRAN (R 3.3.2)                     \n minqa          1.2.4   2014-10-09 CRAN (R 3.3.2)                     \n ModelMetrics   1.1.0   2016-08-26 CRAN (R 3.3.2)                     \n munsell        0.4.3   2016-02-13 CRAN (R 3.3.2)                     \n nlme           3.1-128 2016-05-10 CRAN (R 3.3.2)                     \n nloptr         1.0.4   2014-08-04 CRAN (R 3.3.2)                     \n nnet           7.3-12  2016-02-02 CRAN (R 3.3.2)                     \n pbkrtest       0.4-6   2016-01-27 CRAN (R 3.3.2)                     \n plyr           1.8.4   2016-06-08 CRAN (R 3.3.2)                     \n quantreg       5.29    2016-09-04 CRAN (R 3.3.2)                     \n Rcpp           0.12.8  2016-11-17 CRAN (R 3.3.2)                     \n reshape2       1.4.2   2016-10-22 CRAN (R 3.3.2)                     \n RevoUtils      10.0.2  2016-11-22 local                              \n scales         0.4.1   2016-11-09 CRAN (R 3.3.2)                     \n SparseM        1.74    2016-11-10 CRAN (R 3.3.2)                     \n stringi        1.1.2   2016-10-01 CRAN (R 3.3.2)                     \n stringr        1.1.0   2016-08-19 CRAN (R 3.3.2)                     \n tensorflow   * 0.3.0   2017-01-03 Github (rstudio/tensorflow@7920fb3)\n tibble         1.2     2016-08-26 CRAN (R 3.3.2)                     \n withr          1.0.2   2016-06-20 CRAN (R 3.3.2)   \n\n\n\nPython\u5b9f\u884c\u74b0\u5883\n$ python --version\nPython 2.7.12\n\n$ pip list --format=columns | grep -e \"tensorflow\" -e \"Keras\"\nKeras                              1.1.1       \ntensorflow                         0.12.1\n\n\n# \u6982\u8981\n\n\u300e\u65b0\u3057\u304d\u3000\u5e74\u306e\u59cb\u3081\u306e\u3000\u3046\u308c\u3057\u304d\u306f\u3000\u53e4\u304d\u4eba\u3069\u3061\u3000\u3042\u3078\u308b\u306a\u308a\u3051\u308a\u300f\n\n\u3000\u4ee5\u524d\u306b{tensorflow}\u306ePython\u30e9\u30a4\u30d6\u30e9\u30ea\u3092import\u3059\u308b\u95a2\u6570\u3092\u7528\u3044\u308b\u3053\u3068\u3067\u3001[gensim\u3092\u6d3b\u7528\u3067\u304d\u308b\u3068\u3044\u3046\u8a18\u4e8b](http://qiita.com/yamano357/items/90863cf15326ebd19231)\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\u3000\u3053\u308c\u306b\u3088\u308a\u3001R/RStudio\u4e0a\u3067\u3059\u3079\u3066\u3092\u7ba1\u7406\u3057\u305f\u3044/\u3055\u308c\u305f\u3044R\u304a\u3058\u3055\u3093\uff08\u91cd\u5ea6\u306aR\u30e6\u30fc\u30b6\u30fc\u3092\u6307\u3059\u3002\u5973\u6027\u3067\u3082\u300c\u304a\u3058\u3055\u3093\u300d\u3068\u547c\u79f0\u3059\u308b\u306e\u3067\u3001\u6dd1\u5973\u306e\u65b9\u3005\u306f\u3054\u914d\u616e\u3044\u305f\u3060\u304d\u305f\u3044\uff09\u306e\u3067\u304d\u308b\u5e45\u304c\u5e83\u304c\u3063\u305f\u3068\u8a00\u3048\u307e\u3059\u3002\n\u3000\u4eca\u56de\u306f\u3055\u3089\u306bTensorflow\u3068Theano\u306e\u30e9\u30c3\u30d1\u30fc\u3067\u3042\u308bKeras\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u7528\u3044\u3066\u30e2\u30c7\u30eb\u3092\u69cb\u7bc9\u3057\u3001\u65b0\u5e74\u306e\u6328\u62f6\u306b\u3088\u3055\u305d\u3046\u306a\u77ed\u6b4c\u306e\u751f\u6210\u3092\u8a66\u307f\u307e\u3057\u305f\u3002\u5177\u4f53\u7684\u306b\u306f\u300c\u4e0a\u306e\u53e5\u3092\u5165\u529b\u3059\u308b\u3053\u3068\u3067\u4e0b\u306e\u53e5\u3092\u751f\u6210\u3059\u308b\u300d\u3068\u3044\u3046\u30bf\u30b9\u30af\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\u3000\u306a\u304a\u3001{tensorflow}\u81ea\u4f53\u306e\u8a2d\u5b9a\u3084\u4f7f\u3044\u65b9\u306a\u3069\u306f[{tensorflow}\u3067\u30c7\u30fc\u30bf\u5206\u6790\u306eHello World\u3067\u3042\u308biris\u30c7\u30fc\u30bf\u306e\u5206\u985e\u3092\u884c\u3063\u305f\u8a18\u4e8b](http://qiita.com/yamano357/items/b6f566c9eb6f19538008)\u3092\u3054\u53c2\u8003\u304f\u3060\u3055\u3044\u3002\n\u3000\u307e\u305f\u3001Keras\u81ea\u4f53\u306e\u4f7f\u3044\u65b9\u306f\u4e0b\u8a18\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306a\u3069\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\n- [Keras Documentation](https://keras.io)\n\n\n# \u5143\u30c7\u30fc\u30bf\u306b\u3064\u3044\u3066\n\u3000\u548c\u6b4c\u3092\u63b2\u8f09\u3057\u3066\u3044\u308b\u30b5\u30a4\u30c8\u3092\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u3066\u96c6\u3081\u305f\u30c7\u30fc\u30bf\u3092\u672c\u30bf\u30b9\u30af\u3067\u306f\u7528\u3044\u307e\u3057\u305f\u3002\n\u3000\u30c7\u30fc\u30bf\u3068\u3057\u3066\u306f\u3001\u6b21\u306e\u3088\u3046\u306bu1\u304b\u3089u3\u307e\u3067\u304c\u4e0a\u306e\u53e5\u3067l1\u304b\u3089l2\u307e\u3067\u304c\u4e0b\u306e\u53e5\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n```{r:\u548c\u6b4c\u30c7\u30fc\u30bf}\n> tanka_text\n# A tibble: 230,071 \u00d7 5\n           u1               u2         u3             l1             l2\n        <chr>            <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d   \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u304b\u3059\u304b\u306e\u3084\u307e\u306b \u306f\u3084\u305f\u3061\u306b\u3051\u308a\n2  \u304d\u306e\u3075\u3053\u305d   \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u306f\u308b\u306e\u304b\u3059\u307f\u306e \u305f\u3061\u306b\u3051\u308b\u305d\u3082\n3  \u3042\u3059\u3088\u308a\u306f   \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3042\u3057\u305f\u306e\u306f\u3089\u306f \u3051\u3075\u305d\u3084\u304f\u3081\u308b\n4  \u3046\u3081\u306e\u306f\u306a   \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3042\u307e\u304d\u308b\u3086\u304d\u306e \u306a\u3078\u3066\u3075\u308c\u308c\u306f\n5  \u305f\u304b\u3084\u3068\u306e   \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u304d\u3088\u304d\u3064\u304d\u3088\u306b \u3053\u3053\u3089\u3061\u308a\u304f\u308b\n6  \u304d\u3066\u307f\u3078\u304d \u3072\u3068\u3082\u3042\u3089\u306a\u304f\u306b \u308f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u3064\u306f\u306a \u3061\u308a\u306c\u3068\u3082\u3088\u3057\n7  \u308f\u304b\u305b\u3053\u306b \u307f\u305b\u3080\u3068\u304a\u3082\u3072\u3057 \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3086\u304d\u306e\u3075\u308c\u308c\u306f\n8  \u3046\u3081\u306e\u306f\u306a   \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3064\u3068\u3068\u306a\u3064\u3051\u3066 \u3088\u305d\u3078\u3066\u3082\u307f\u3080\n9  \u3086\u304d\u3055\u3080\u307f   \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u306a\u307b\u3053\u306e\u3053\u308d\u306f \u3057\u304b\u3068\u3042\u308b\u304b\u306f\n10 \u3046\u3081\u306e\u306f\u306a   \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3044\u307e\u307e\u3066\u3044\u3082\u304b \u3044\u3066\u3066\u3042\u3072\u307f\u306c\n# ... with 230,061 more rows\n```\n\n## \u30b3\u30fc\u30d1\u30b9\u4f5c\u6210\n\u3000\u4e01\u5be7\u306b\u53ce\u96c6\u3057\u305f\u548c\u6b4c\u30c7\u30fc\u30bf\u3092\u77ed\u6b4c\u751f\u6210\u30bf\u30b9\u30af\u306b\u5229\u7528\u3059\u308b\u305f\u3081\u3001\u3059\u3079\u3066\u306e\u53e5\u304c\u3072\u3089\u304c\u306a\u306e\u307f\u304b\u3089\u6210\u308a\u3001\u5404\u53e5\u306e\u6587\u5b57\u6570\u304c5/7/5/7/7\u306e\u6b4c\u306b\u9650\u5b9a\u3057\u307e\u3059\u3002\n\n```{r:\u548c\u6b4c\u30b3\u30fc\u30d1\u30b9\u4f5c\u6210}\ntanka_char_len <- tanka_text %>% \n  dplyr::mutate_all(.funs = dplyr::funs(len = stringr::str_length(string = .))) %>% \n  dplyr::summarise_all(.funs = dplyr::funs(tb = list(table(.))))\n> normalize_tanka_text <- tanka_text %>% \n  dplyr::mutate_all(.funs = dplyr::funs(len = stringr::str_length(string = .))) %>% \n  # \u5404\u53e5\u306e\u6587\u5b57\u6570\u3092\u7528\u3044\u3066\u3001\u4e0a\u306e\u53e5\u304c3\u3067\u4e0b\u306e\u53e5\u304c2\u306e\u77ed\u6b4c\u306b\u9650\u5b9a\n  dplyr::filter((u1_len == 5 & u2_len == 7 & u3_len == 5) & (l1_len == 7 & l2_len == 7)) %>% \n  dplyr::select_(.dots = c(\"u1\", \"u2\", \"u3\", \"l1\", \"l2\")) %>% \n  # \u3072\u3089\u304c\u306a\u306e\u307f\u306b\u9650\u5b9a\n  dplyr::filter(\n    !(\n      stringi::stri_detect_regex(str = u1, pattern = \"\\\\P{Hiragana}\") |\n        stringi::stri_detect_regex(str = u2, pattern = \"\\\\P{Hiragana}\") | \n        stringi::stri_detect_regex(str = u3, pattern = \"\\\\P{Hiragana}\") | \n        stringi::stri_detect_regex(str = l1, pattern = \"\\\\P{Hiragana}\") | \n        stringi::stri_detect_regex(str = l2, pattern = \"\\\\P{Hiragana}\")\n    )\n  ) %>% \n  print\n\n# A tibble: 150,330 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u304b\u3059\u304b\u306e\u3084\u307e\u306b \u306f\u3084\u305f\u3061\u306b\u3051\u308a\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u306f\u308b\u306e\u304b\u3059\u307f\u306e \u305f\u3061\u306b\u3051\u308b\u305d\u3082\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3042\u3057\u305f\u306e\u306f\u3089\u306f \u3051\u3075\u305d\u3084\u304f\u3081\u308b\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3042\u307e\u304d\u308b\u3086\u304d\u306e \u306a\u3078\u3066\u3075\u308c\u308c\u306f\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u304d\u3088\u304d\u3064\u304d\u3088\u306b \u3053\u3053\u3089\u3061\u308a\u304f\u308b\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3064\u3068\u3068\u306a\u3064\u3051\u3066 \u3088\u305d\u3078\u3066\u3082\u307f\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u306a\u307b\u3053\u306e\u3053\u308d\u306f \u3057\u304b\u3068\u3042\u308b\u304b\u306f\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3044\u307e\u307e\u3066\u3044\u3082\u304b \u3044\u3066\u3066\u3042\u3072\u307f\u306c\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3088\u308b\u3088\u308b\u304d\u3064\u3064 \u307f\u3080\u3072\u3068\u3082\u304b\u306a\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u304b\u306f\u3064\u306a\u304f\u306a\u308a \u3042\u3055\u3086\u3075\u3053\u3068\u306b\n# ... with 150,320 more rows\n\n\n# \u30b3\u30fc\u30d1\u30b9\u30b5\u30a4\u30ba\n> nrow(x = normalize_tanka_text)\n[1] 150330\n           \n# \u6587\u5b57\u7a2e\n> chars <- normalize_tanka_text %>% \n  unlist %>% \n  stringr::str_split(string = ., pattern = \"\") %>% \n  dplyr::combine() %>% \n  stringi::stri_unique(str = .) %>% \n  stringr::str_sort(x = .) %>% \n  print\n\n [1] \"\u3042\" \"\u3044\" \"\u3046\" \"\u3048\" \"\u304a\" \"\u304b\" \"\u304d\" \"\u304f\" \"\u3050\" \"\u3051\" \"\u3053\" \"\u3054\" \"\u3055\" \"\u3057\" \"\u3059\" \"\u305b\" \"\u305d\" \"\u305f\"\n[19] \"\u3061\" \"\u3064\" \"\u3066\" \"\u3068\" \"\u306a\" \"\u306b\" \"\u306c\" \"\u306d\" \"\u306e\" \"\u306f\" \"\u3072\" \"\u3075\" \"\u3078\" \"\u307b\" \"\u307e\" \"\u307f\" \"\u3080\" \"\u3081\"\n[37] \"\u3082\" \"\u3084\" \"\u3086\" \"\u3088\" \"\u3089\" \"\u308a\" \"\u308b\" \"\u308c\" \"\u308d\" \"\u308f\" \"\u3090\" \"\u3091\" \"\u3092\"\n\n# \u6587\u5b57\u7a2e\u6570\uff08\u51fa\u529b\u5c64\u306e\u6570\u3068\u3057\u3066\u5229\u7528\uff09\n> chars_len <- as.integer(x = length(x = chars)) %>% \n  print\n[1] 49\n```\n\n\n# \u30e2\u30c7\u30eb\u4f5c\u6210\u306b\u304a\u3051\u308b\u4e8b\u524d\u6e96\u5099\n\n\u3000\u30e2\u30c7\u30eb\u4f5c\u6210\u306b\u5148\u7acb\u3061\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u8aad\u307f\u8fbc\u307f\u304b\u3089\u5b9a\u6570\u3084\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\u3000\u307e\u305f\u3001\u5408\u308f\u305b\u3066Keras\u3067\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u30c7\u30fc\u30bf\u306e\u5f62\u3092\u5909\u63db\u3057\u3066\u3044\u307e\u3059\u3002\u4eca\u56de\u306f\u7279\u306barray\u306e\u51e6\u7406\u304c\u3042\u308a\u3001tidyverse\u306b\u6163\u308c\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u3068\u6271\u3044\u306b\u304f\u3044\u3068\u611f\u3058\u3066\u3057\u307e\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff08Numpy\u3092\u4f7f\u3044\u6163\u308c\u3066\u3044\u308b\u3068\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff09\u3002\n\n\n## \u5b9a\u7fa9\u90e8\n\n```{r:\u30e9\u30a4\u30d6\u30eb\u30e9\u30ea\u8aad\u307f\u8fbc\u307f}\nlibrary(tidyverse)\nlibrary(tensorflow)\nlibrary(quanteda)\nlibrary(caret)\n\n# Keras\u3092R\u4e0a\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b{tensorflow}\u306eimport\u95a2\u6570\u3067\u8aad\u307f\u8fbc\u307f\nkeras <- tensorflow::import(module = \"keras\")\n```\n\n```{r:\u5b9a\u6570\u5b9a\u7fa9}\n# MAX_LEN\u3067\u751f\u6210\u3059\u308b\u6587\u5b57\u5e45\u3092\u8a2d\u5b9a\n# STEP\u3067\u4e0a\u306e\u53e5\u306e\u307f\u306b\u9650\u5b9a\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\nSET_TEXT_PARAM <- list(\n  MAX_LEN = as.integer(x = 5 + 7 + 5 + 7 + 7),\n  STEP = as.integer(x = 5 + 7 + 5)\n)\n```\n\n```{r:\u95a2\u6570\u5b9a\u7fa9}\n# \u5165\u529b\u6587\u3092\u6587\u5b57N-gram\u306b\u5206\u5272\n# \u672c\u30bf\u30b9\u30af\u3067\u306f\u77ed\u6b4c\u6587\u5b57\u5217\u30921\u6587\u5b57\u305a\u3064\u5206\u5272\u3059\u308b\u306e\u306b\u6d3b\u7528\n# @sent: \u5bfe\u8c61\u6587\n# @n: N-gram\u306eN\nparseNgram <- function (sent, n = 5) {\n  return(\n    dplyr::bind_rows(\n      lapply(\n        X = stringr::str_split(string = sent, pattern = \"\"),\n        FUN = function (ch) {\n          dplyr::data_frame(\n            ch = quanteda::ngrams(ch, n = n, concatenator = \" \")\n          )\n        }\n      )\n    )\n  )\n}\n\n# One-Hot\u8868\u73fe\u306b\u5909\u63db\u3059\u308b\u305f\u3081\u306e\u4e8b\u524d\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n# @seed_text: \u5909\u63db\u5bfe\u8c61\u306e\u6587\uff08sent\u3068\u3044\u3046\u540d\u524d\u304c\u3064\u3051\u3089\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\uff09\n# @chars: \u30b3\u30fc\u30d1\u30b9\u4e2d\u3067\u51fa\u73fe\u3059\u308b\u6587\u5b57\u96c6\u5408\uff08\u30dc\u30ad\u30e3\u30d6\u30e9\u30ea\uff09\ncreateOneHotSeed <- function (\n  seed_text, chars\n) {\n  return (\n    seed_text %>% \n      tibble::rownames_to_column(var = \"did\") %>% \n      dplyr::mutate(did = as.integer(x = did)) %>% \n      dplyr::group_by(did) %>% \n      dplyr::do(parseNgram(sent = .$sent, n = 1)) %>% \n      dplyr::mutate(sid = dplyr::row_number(x = did)) %>% \n      tidytext::unnest_tokens(\n        output = char, input = ch,\n        token = stringr::str_split, pattern = \" \", to_lower = FALSE\n      ) %>% \n      dplyr::ungroup(x = .) %>% \n      dplyr::mutate(char = factor(x = .$char, levels = chars))\n  )\n}\n\n# \u5b66\u7fd2\u7d50\u679c\u304b\u3089\u6587\u5b57\u3092\u751f\u6210\n# @x: \u5b66\u7fd2\u3057\u305f\u30e2\u30c7\u30eb\u306b\u30c7\u30fc\u30bf\u3092\u9069\u7528(predict)\u3055\u305b\u305f\u7d50\u679c\uff08array\u3092\u524d\u63d0\uff09\n# @chars: \u30b3\u30fc\u30d1\u30b9\u4e2d\u3067\u51fa\u73fe\u3059\u308b\u6587\u5b57\u96c6\u5408\uff08\u30dc\u30ad\u30e3\u30d6\u30e9\u30ea\uff09\ngenChars <- function (x, chars) {\n  gen_char <- apply(\n    X = x,\n    MARGIN = 1, \n    FUN = function (xx) {\n      probas <- rmultinom(n = 1L, size = 1L, prob = xx / sum(xx))[, 1]\n      return (\n        chars[which.max(x = probas)]\n      )\n    }\n  )\n  return (stringr::str_c(gen_char, collapse = \"\"))\n}\n\n# \u5143\u30c7\u30fc\u30bf\u306e\u4e0a\u306e\u53e5\u3068\u751f\u6210\u3057\u305f\u4e0b\u306e\u53e5\u3092\u9023\u7d50\uff08@tanka_upper\u3068@result\u306e\u9806\u756a\u304c\u5909\u308f\u3063\u3066\u3044\u306a\u3044\u524d\u63d0\uff09\n# @tanka_upper: \u9023\u7d50\u3055\u305b\u308b\u77ed\u6b4c\u306e\u4e0a\u306e\u53e5\n# @result: \u5b66\u7fd2\u3057\u305f\u30e2\u30c7\u30eb\u306b\u30c7\u30fc\u30bf\u3092\u9069\u7528(predict)\u3055\u305b\u305f\u7d50\u679c\uff08array\u3092\u524d\u63d0\uff09\n# @chars: \u30b3\u30fc\u30d1\u30b9\u4e2d\u3067\u51fa\u73fe\u3059\u308b\u6587\u5b57\u96c6\u5408\uff08\u30dc\u30ad\u30e3\u30d6\u30e9\u30ea\uff09\n# @diversity: \u591a\u69d8\u6027\u30d1\u30e9\u30e1\u30fc\u30bf\n# @target_num: \u9023\u7d50\u30c7\u30fc\u30bf\u6570\nmergeTankaUpperLower <- function (\n  tanka_upper, result, chars,\n  diversity, target_num = 10\n) {\n  return (\n    dplyr::bind_cols(\n      tanka_upper %>% \n        dplyr::select(u1, u2, u3) %>% \n        head(n = target_num),\n      dplyr::data_frame(\n        lower = apply(\n          X = exp(x = log(x = result[seq(from = 1, to = target_num), ,]) / diversity),\n          MARGIN = 1,\n          FUN = genChars, chars = chars\n        )\n      ) %>% \n        dplyr::mutate(\n          l1 = stringr::str_sub(string = .$lower, start = 1, end = 7),\n          l2 = stringr::str_sub(string = .$lower, start = 8, end = 14)\n        ) %>% \n        dplyr::select(-lower)\n    )\n  )\n}\n\n# \u65b0\u898f\u9069\u7528\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n# @org_upper_str: \u65b0\u3057\u304f\u9069\u7528\u3059\u308b\u4e0a\u306e\u53e5\uff08\u6587\u5b57\u5217\u30d9\u30af\u30c8\u30eb\uff09\n# @chars: \u30b3\u30fc\u30d1\u30b9\u4e2d\u3067\u51fa\u73fe\u3059\u308b\u6587\u5b57\u96c6\u5408\uff08\u30dc\u30ad\u30e3\u30d6\u30e9\u30ea\uff09\n# @dummy_seed: One-hot\u8868\u73fe\u3078\u306e\u5909\u63db\u306b\u7528\u3044\u305fdummyVars\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08{caret}\u306e\u30c0\u30df\u30fc\u5909\u6570\u4f5c\u6210\u95a2\u6570\u3092\u5229\u7528\uff09\n# @step: \u4e0a\u306e\u53e5\u306e\u6587\u5b57\u6570\ngenOrgX <- function (\n  org_upper_str,\n  chars, dummy_seed, step\n) {\n  \n  org_tanka_one_hot_seed <- dplyr::data_frame(sent = org_upper_str) %>% \n    createOneHotSeed(seed_text = ., chars = chars)\n  \n  return (\n    array(\n      data = dplyr::as_data_frame(\n        x = predict(object = dummy_seed, newdata = org_tanka_one_hot_seed)\n      ) %>% \n        dplyr::select(-did, -sid) %>% \n        as.matrix,\n      dim = c(max(org_tanka_one_hot_seed$did), step, length(x = chars))\n    )\n  )\n}\n```\n\n\n## \u30c7\u30fc\u30bf\u524d\u51e6\u7406\n\u3000Keras\u306b\u306f\u30c6\u30ad\u30b9\u30c8\u524d\u51e6\u7406\u7528\u95a2\u6570\u3068\u3057\u3066\u4e0b\u8a18\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001R\u304b\u3089\u5229\u7528\u3067\u304d\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u81ea\u524d\u3067\u30b3\u30c4\u30b3\u30c4\u51e6\u7406\u3057\u307e\u3059\u3002\n\u3000\u3053\u3053\u3067\u306f{caret}\u306e`dummyVars`\u3092\u6d3b\u7528\u3057\u3066One-hot\u8868\u73fe\u306b\u5909\u63db\u3057\u3001\u5404\u53e5\u6bce\u306barray\u306b\u683c\u7d0d\u3057\u3066\u3001\u3055\u3089\u306b`aperm`\u3067\u6b21\u5143\uff08Python\u3067\u306fshape\u306b\u8a72\u5f53\u3059\u308b\u3067\u3057\u3087\u3046\u304b\uff09\u3092\u5165\u308c\u66ff\u3048\u3066\u3044\u307e\u3059\uff08\u540c\u3058\u3088\u3046\u306bNumpy\u306ereshape\u306b\u8a72\u5f53\uff09\u3002\n\n- [Keras - Text Preprocess](https://keras.io/preprocessing/text/)\n\n```{r:\u524d\u51e6\u7406}\ntanka_one_hot_seed <- normalize_tanka_text %>% \n  tidyr::unite_(col = \"sent\", from = c(\"u1\", \"u2\", \"u3\", \"l1\", \"l2\"), sep = \"\") %>% \n  createOneHotSeed(seed_text = ., chars = chars)\n\n> tanka_one_hot_seed %>% \n  dplyr::filter(is.element(el = .$did, set = c(1))) %>% \n  as.data.frame()\n   did sid char\n1    1   1   \u304d\n2    1   2   \u306e\n3    1   3   \u3075\n4    1   4   \u3053\n5    1   5   \u305d\n6    1   6   \u3068\n7    1   7   \u3057\n8    1   8   \u306f\n9    1   9   \u304f\n10   1  10   \u308c\n11   1  11   \u3057\n12   1  12   \u304b\n13   1  13   \u306f\n14   1  14   \u308b\n15   1  15   \u304b\n16   1  16   \u3059\n17   1  17   \u307f\n18   1  18   \u304b\n19   1  19   \u3059\n20   1  20   \u304b\n21   1  21   \u306e\n22   1  22   \u3084\n23   1  23   \u307e\n24   1  24   \u306b\n25   1  25   \u306f\n26   1  26   \u3084\n27   1  27   \u305f\n28   1  28   \u3061\n29   1  29   \u306b\n30   1  30   \u3051\n31   1  31   \u308a\n\n# \u30c0\u30df\u30fc\u5909\u6570\u4f5c\u6210\u95a2\u6570\u3092\u4f7f\u3063\u3066One-hot\u8868\u73fe\u3078\uff08\u3053\u3053\u3067\u4f5c\u6210\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u5f8c\u8ff0\u306e\u65b0\u898f\u30c7\u30fc\u30bf\u9069\u7528\u3067\u3082\u5229\u7528\uff09\ntanka_dummy <- caret::dummyVars(formula = ~ did + sid + char, data = tanka_one_hot_seed)\ntanka_one_hot <- dplyr::as_data_frame(\n  x = predict(object = tanka_dummy, newdata = tanka_one_hot_seed)\n)\n\n> tanka_one_hot %>% \n  dplyr::filter(did == 1) %>% \n  dplyr::select(-did, -sid)\n# A tibble: 31 \u00d7 49\n   char.\u3042 char.\u3044 char.\u3046 char.\u3048 char.\u304a char.\u304b char.\u304d char.\u304f char.\u3050 char.\u3051 char.\u3053 char.\u3054 char.\u3055 char.\u3057 char.\u3059 char.\u305b char.\u305d\n     <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>\n1        0       0       0       0       0       0       1       0       0       0       0       0       0       0       0       0       0\n2        0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0\n3        0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0\n4        0       0       0       0       0       0       0       0       0       0       1       0       0       0       0       0       0\n5        0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       1\n6        0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0\n7        0       0       0       0       0       0       0       0       0       0       0       0       0       1       0       0       0\n8        0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0\n9        0       0       0       0       0       0       0       1       0       0       0       0       0       0       0       0       0\n10       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0       0\n# ... with 21 more rows, and 32 more variables: char.\u305f <dbl>, char.\u3061 <dbl>, char.\u3064 <dbl>, char.\u3066 <dbl>, char.\u3068 <dbl>, char.\u306a <dbl>,\n#   char.\u306b <dbl>, char.\u306c <dbl>, char.\u306d <dbl>, char.\u306e <dbl>, char.\u306f <dbl>, char.\u3072 <dbl>, char.\u3075 <dbl>, char.\u3078 <dbl>, char.\u307b <dbl>,\n#   char.\u307e <dbl>, char.\u307f <dbl>, char.\u3080 <dbl>, char.\u3081 <dbl>, char.\u3082 <dbl>, char.\u3084 <dbl>, char.\u3086 <dbl>, char.\u3088 <dbl>, char.\u3089 <dbl>,\n#   char.\u308a <dbl>, char.\u308b <dbl>, char.\u308c <dbl>, char.\u308d <dbl>, char.\u308f <dbl>, char.\u3090 <dbl>, char.\u3091 <dbl>, char.\u3092 <dbl>\n\n\n# \u5b66\u7fd2\u30c7\u30fc\u30bf\u3092Keras\u3067\u4f7f\u3046\u305f\u3081\u306b(, , )\u306e\u5f62\u5f0f\uff08array\uff09\u306b\u5909\u63db\nX <- aperm(\n  a = sapply(\n    X = split(x = tanka_one_hot, f = tanka_one_hot$did),\n    FUN = function (x) {\n      return(\n        x %>%\n          # \u4e0a\u306e\u53e5\n          dplyr::filter(sid <= SET_TEXT_PARAM$STEP) %>% \n          dplyr::select(-did, -sid) %>% \n          as.matrix\n      )\n    },\n    simplify = \"array\"\n  ),\n  perm = c(3, 1, 2)\n)\n> dim(x = X)\n[1] 150330     17     49\n\n# \u4e00\u6587\u5b57\u305a\u30641\u304c\u7acb\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\uff08\u30d5\u30e9\u30b0\u304c\u7acb\u3064\u30c7\u30fc\u30bf\u304c\u5404\u884c\u30671\u3057\u304b\u306a\u3044\uff09\n> all(apply(X = apply(X = X, MARGIN = 2, FUN = rowSums) == 1, MARGIN = 1, FUN = all))\n[1] TRUE\n\n\n# y\u3067\u3082\u540c\u69d8\u306b\u5909\u63db\nY <- aperm(\n  a = sapply(\n    X = split(x = tanka_one_hot, f = tanka_one_hot$did),\n    FUN = function (x) {\n      y <- x %>% \n        # \u4e0b\u306e\u53e5\n        dplyr::filter(sid > SET_TEXT_PARAM$STEP) %>% \n        dplyr::select(-did, -sid) %>% \n        as.matrix\n      return (\n        # \u4e0b\u306e\u53e5\u306e\u65b9\u304c\u6587\u5b57\u6570\u304c\u5c11\u306a\u3044\u306e\u3067X\u3068\u540c\u3058\u6b21\u5143\u306b\u306a\u308b\u3088\u3046\u306b0\u57cb\u3081\n        rbind(\n          y,\n          matrix(data = 0, nrow = SET_TEXT_PARAM$STEP - nrow(x = y), ncol = ncol(x = y))\n        )\n      )\n    },\n    simplify = \"array\"\n  ),\n  perm = c(3, 1, 2)\n)\n> dim(x = Y)\n[1] 150330     17     49\n```\n\n\n# \u30e2\u30c7\u30eb\u4f5c\u6210\n\u3000Keras\u3067\u5229\u7528\u3059\u308b\u30c7\u30fc\u30bf\u524d\u51e6\u7406\u304c\u7d42\u308f\u308a\u307e\u3057\u305f\u306e\u3067\u3001\u3053\u3053\u304b\u3089\u30e2\u30c7\u30eb\u306e\u5b9a\u7fa9\u3092\u306f\u3058\u3081\u307e\u3059\u3002\n\u3000\u4eca\u56de\u306fLSTM-RNN\u306b\u3088\u308b\u751f\u6210\u306b\u6311\u6226\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002Keras\u3067\u306fLSTM\u30e2\u30c7\u30eb\u3092\u5229\u7528\u3067\u304d\u308b\u95a2\u6570\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u3053\u308c\u3092\u7528\u3044\u307e\u3057\u305f\u3002\n\u3000\u306a\u304a\u3001\u3044\u308d\u3044\u308d\u306a\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u69cb\u7bc9\u3057\u307e\u3057\u305f\u304c\u3001\u30e2\u30c7\u30eb\u4f5c\u6210\u306b\u95a2\u3059\u308b\u8abf\u67fb\u3084\u5b66\u7fd2\u304c\u8db3\u308a\u3066\u3044\u306a\u3044\u307e\u305b\u3093\u306e\u3067\u3001\u3088\u308a\u3088\u3044\u65b9\u6cd5\u3084\u624b\u6bb5\u306a\u3069\u3042\u308c\u3070\u3054\u6307\u5c0e\u3044\u305f\u3060\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002\n\n- [Example script to generate text from Nietzsche's writings.](https://github.com/fchollet/keras/blob/master/examples/lstm_text_generation.py)\n- [Add a character-based RNN example.](https://github.com/fchollet/keras/issues/197)\n\n```{r:LSTM}\nmodel <- keras$models$Sequential()\nmodel$add(\n  layer = keras$layers$LSTM(\n    output_dim = 128L, input_shape = c(SET_TEXT_PARAM$STEP, chars_len),\n    return_sequences = TRUE\n  )\n)\nmodel$add(\n  layer = keras$layers$LSTM(\n    output_dim = 128L,\n    return_sequences = TRUE, activation = \"relu\"\n  )\n)\nmodel$add(\n  layer = keras$layers$TimeDistributed(\n    layer = keras$layers$Dense(output_dim = chars_len, activation = \"softmax\")\n  )\n)\nmodel$compile(loss = \"categorical_crossentropy\", optimizer = \"rmsprop\")\n\n> model$summary()\nLayer (type)                     Output Shape          Param #     Connected to                     \n====================================================================================================\nlstm_1 (LSTM)                    (None, 17, 128)       91136       lstm_input_1[0][0]               \n____________________________________________________________________________________________________\nlstm_2 (LSTM)                    (None, 17, 128)       131584      lstm_1[0][0]                     \n____________________________________________________________________________________________________\ntimedistributed_1 (TimeDistribute(None, 17, 49)        6321        lstm_2[0][0]                     \n====================================================================================================\nTotal params: 229041\n____________________________________________________________________________________________________\n\n\n# Epoch\u6570\u304c30\u3068\u5c11\u306a\u3044\u304c\u3001\u3053\u308c\u3067\u30822.5\u6642\u9593\u307b\u3069\u304b\u304b\u308b\n# \u4eca\u56de\u306f\u624b\u7fd2\u3044\u3068\u3057\u3066\u5c0f\u3055\u3081\u3067\u5b9f\u884c\u3057\u305f\n> model$fit(x = X, y = Y, batch_size = 1000L, nb_epoch = 30L, shuffle = TRUE)\nEpoch 1/30\n150330/150330 [==============================] - 289s - loss: 3.0063   \nEpoch 2/30\n150330/150330 [==============================] - 288s - loss: 2.9062   \nEpoch 3/30\n150330/150330 [==============================] - 287s - loss: 2.8078   \nEpoch 4/30\n150330/150330 [==============================] - 288s - loss: 2.7971   \nEpoch 5/30\n150330/150330 [==============================] - 287s - loss: 2.7936   \nEpoch 6/30\n150330/150330 [==============================] - 288s - loss: 2.7921   \nEpoch 7/30\n150330/150330 [==============================] - 288s - loss: 2.7913   \nEpoch 8/30\n150330/150330 [==============================] - 288s - loss: 2.7907   \nEpoch 9/30\n150330/150330 [==============================] - 288s - loss: 2.7902   \nEpoch 10/30\n150330/150330 [==============================] - 288s - loss: 2.7898   \nEpoch 11/30\n150330/150330 [==============================] - 288s - loss: 2.7893   \nEpoch 12/30\n150330/150330 [==============================] - 288s - loss: 2.7887   \nEpoch 13/30\n150330/150330 [==============================] - 289s - loss: 2.7882   \nEpoch 14/30\n150330/150330 [==============================] - 288s - loss: 2.7874   \nEpoch 15/30\n150330/150330 [==============================] - 288s - loss: 2.7869   \nEpoch 16/30\n150330/150330 [==============================] - 288s - loss: 2.7861   \nEpoch 17/30\n150330/150330 [==============================] - 288s - loss: 2.7854   \nEpoch 18/30\n150330/150330 [==============================] - 288s - loss: 2.7847   \nEpoch 19/30\n150330/150330 [==============================] - 288s - loss: 2.7840   \nEpoch 20/30\n150330/150330 [==============================] - 288s - loss: 2.7833   \nEpoch 21/30\n150330/150330 [==============================] - 288s - loss: 2.7826   \nEpoch 22/30\n150330/150330 [==============================] - 288s - loss: 2.7818   \nEpoch 23/30\n150330/150330 [==============================] - 288s - loss: 2.7811   \nEpoch 24/30\n150330/150330 [==============================] - 288s - loss: 2.7801   \nEpoch 25/30\n150330/150330 [==============================] - 288s - loss: 2.7793   \nEpoch 26/30\n150330/150330 [==============================] - 288s - loss: 2.7785   \nEpoch 27/30\n150330/150330 [==============================] - 288s - loss: 2.7776   \nEpoch 28/30\n150330/150330 [==============================] - 288s - loss: 2.7766   \nEpoch 29/30\n150330/150330 [==============================] - 288s - loss: 2.7757   \nEpoch 30/30\n150330/150330 [==============================] - 297s - loss: 2.7750   \nHistory\n\n\n# \u5b66\u7fd2\u30c7\u30fc\u30bf\u3092\u9069\u7528\u3057\u305f\u7d50\u679c\u304b\u3089\u4e0b\u306e\u53e5\u3092\u751f\u6210\n# \u6b4c\u4eba\u304c\u8a60\u3093\u3060\u4e0a\u306e\u53e5\u3068\u6bd4\u3079\u3066\u62d9\u3055\u304c\u6ea2\u308c\u308b\nresult_predict <- model$predict(x = X[, , , drop = FALSE])[, seq(from = 1, to = SET_TEXT_PARAM$MAX_LEN - SET_TEXT_PARAM$STEP ), ]\n> gen_tanka <- mergeTankaUpperLower(\n  tanka_upper = normalize_tanka_text, result = result_predict, chars = chars,\n  diversity = 1.0, target_num = nrow(x = normalize_tanka_text)\n)\n# A tibble: 150,330 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u307e\u307e\u307f\u304b\u305b\u3089\u3066 \u307e\u308a\u3051\u308c\u308a\u304b\u308a\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u307e\u308f\u304f\u307f\u3072\u304d\u3080 \u3057\u304b\u304f\u3068\u305f\u3078\u3082\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3064\u305f\u304b\u3053\u3053\u306f\u304b \u304b\u3057\u3053\u306a\u305d\u306a\u3081\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u306f\u305b\u306e\u3042\u3068\u308c\u306e \u3088\u304b\u3084\u3046\u3059\u3064\u3080\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u306f\u304d\u3082\u306b\u3088\u3092\u306e \u307f\u304d\u3082\u306a\u306d\u3057\u306f\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306a\u306b\u308a\u3053\u3064\u3057\u306e \u306d\u3075\u306f\u3042\u308c\u3089\u3057\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3042\u3053\u3057\u304d\u3064\u306a\u306f \u304b\u304b\u308c\u306e\u3089\u304b\u306a\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3053\u308b\u305f\u307e\u306e\u3053\u306f \u3055\u3086\u304b\u304a\u308a\u304b\u308d\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3053\u3051\u307f\u304d\u3089\u304b\u306e \u304a\u3055\u3055\u3042\u305d\u304b\u308a\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u3064\u308c\u306f\u308a\u305f\u304d\u3059 \u305f\u304d\u306e\u305b\u305f\u304b\u304f\n# ... with 150,320 more rows\n\n\n# \u591a\u69d8\u6027\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u7570\u306a\u308b\u53e5\u304c\u751f\u6210\u3055\u308c\u308b\u3002\ntemperature <- 1.0\norg_exp_result_predict <- exp(x = log(x = result_predict) / temperature)\nset.seed(seed = 71)\n> genChars(x = org_exp_result_predict[1, , ], chars = chars)\n[1] \"\u304b\u308c\u304b\u306b\u306a\u305f\u304b\u3044\u3082\u306b\u306a\u304b\u306c\u3080\"\n\ntemperature <- 0.9\norg_exp_result_predict <- exp(x = log(x = result_predict) / temperature)\nset.seed(seed = 71)\n> genChars(x = org_exp_result_predict[1, , ], chars = chars)\n[1] \"\u304b\u3091\u3068\u306e\u305f\u304b\u306f\u3053\u306b\u306e\u3044\u306c\u3089\u3080\"\n\n\n# \u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u5c0f\u3055\u304f\u306a\u308b\u306b\u3064\u308c\u3066\u591a\u69d8\u6027\u304c\u306a\u304f\u306a\u308b\u3002\nset.seed(seed = 71)\n> lapply(\n  X = seq(from = 0.9, to = 0.1, by = - 0.1),\n  FUN = mergeTankaUpperLower,\n  tanka_upper = normalize_tanka_text, result = result_predict, chars = chars,\n  target_num = 10\n)\n[[1]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u304b\u3091\u3068\u306e\u305f\u304b\u306f \u3053\u306b\u306e\u3044\u306c\u3089\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3064\u3078\u308f\u304b\u3089\u306a\u306e \u306a\u3084\u306e\u304b\u307e\u304b\u3068\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u306a\u306b\u305f\u306a\u307f\u307e\u306b \u306d\u308b\u3072\u306a\u306e\u306a\u308a\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3044\u305d\u3082\u3075\u3089\u3057\u3066 \u3057\u308d\u306e\u3057\u304b\u3057\u3066\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3068\u305f\u304d\u304f\u304b\u307e\u306b \u305f\u304f\u306e\u3053\u304f\u3089\u3080\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u307e\u306b\u308b\u306f\u3059\u3068\u306e \u305d\u308b\u306e\u306a\u308b\u305f\u308c\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u307f\u305f\u306e\u3080\u306f\u3055\u3059 \u304a\u3061\u3061\u3057\u308b\u304b\u305b\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3084\u308d\u3072\u306a\u307b\u304f\u308b \u3053\u3075\u3092\u3064\u305d\u304b\u308a\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3051\u3051\u306d\u3059\u304b\u3089\u304d \u3055\u304d\u306e\u306e\u3057\u304b\u3057\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u3053\u306f\u307f\u307f\u3055\u306f\u306e \u3084\u304d\u3082\u304a\u305d\u306a\u306a\n\n[[2]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u306a\u308a\u306e\u3053\u306a\u308c\u3082 \u304f\u304d\u307e\u306c\u3092\u306f\u3082\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3080\u3051\u3092\u304b\u306a\u306d\u306e \u306f\u3068\u3092\u305b\u308a\u3051\u3092\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u304a\u3068\u3089\u306e\u304d\u305f\u305d \u3042\u3068\u306e\u306a\u306e\u3051\u304d\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3072\u3064\u3092\u308a\u304d\u3068\u3092 \u3044\u3066\u3092\u304b\u308b\u308b\u3051\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3082\u307f\u306b\u306e\u307f\u304b\u306e \u3057\u3061\u304b\u3057\u3064\u304b\u3075\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u304b\u307b\u306a\u3084\u3046\u304b\u306e \u304f\u308b\u307e\u306f\u308a\u3051\u308b\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3044\u305f\u306e\u306b\u307e\u3053\u306f \u3042\u3057\u3082\u3059\u306f\u3051\u308a\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3092\u306e\u304b\u3044\u304d\u304d\u3084 \u3075\u304d\u306e\u305d\u306a\u3051\u308c\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u305f\u3089\u3046\u3064\u306f\u307f\u306e \u3088\u308c\u3057\u3044\u304b\u3051\u308c\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u306a\u3078\u308c\u3061\u304b\u304b\u306c \u3059\u304b\u3075\u3051\u3061\u3068\u3080\n\n[[3]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u305f\u3059\u3057\u3078\u3084\u306d\u306e \u305f\u3068\u306e\u3092\u305f\u304b\u306a\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u304d\u304d\u3081\u306f\u3061\u304d\u306e \u3042\u304d\u306e\u304b\u306e\u3051\u3051\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u304b\u306e\u305f\u304b\u308c\u3089\u306e \u304b\u3068\u3084\u306a\u308b\u304b\u3080\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3042\u3082\u306e\u3053\u304d\u307f\u306e \u304d\u3057\u3082\u307e\u308b\u3068\u306a\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u307e\u304d\u3082\u305f\u3066\u3053\u306b \u3068\u3064\u306e\u307e\u308a\u304b\u306a\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3064\u3084\u306a\u308a\u304b\u304b\u304f \u306f\u304d\u307f\u304f\u308b\u304b\u306a\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u304a\u307b\u306e\u305d\u3055\u308a\u306e \u3042\u308c\u305d\u3057\u305d\u3057\u3066\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u306d\u304d\u306e\u308b\u3088\u3051\u306e \u306a\u308b\u306e\u304a\u3089\u3051\u3080\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3044\u308b\u305f\u3053\u3084\u3068\u3084 \u307e\u3082\u306d\u3059\u306a\u3059\u308b\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u306a\u3064\u3088\u307f\u305f\u307f\u306b \u306a\u3068\u304b\u3072\u308b\u305d\u3080\n\n[[4]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u304a\u3089\u3082\u306b\u307f\u3089\u3082 \u304a\u3068\u306b\u3051\u3059\u3089\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u305f\u304b\u3084\u306e\u304f\u308a\u306b \u307f\u304d\u306b\u304b\u3089\u304b\u3089\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u304a\u308b\u3072\u304f\u3068\u3089\u306e \u3068\u304d\u306e\u3064\u3082\u304b\u3084\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3075\u307e\u306b\u306e\u3064\u3055\u306e \u3053\u3089\u306b\u306b\u3089\u3064\u306a\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3042\u3082\u306e\u306e\u3068\u3089\u3092 \u304a\u308a\u3092\u305f\u3089\u3089\u3064\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306f\u3084\u306b\u3078\u304b\u308d\u306e \u3042\u3068\u3057\u307b\u308b\u3051\u3057\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u304b\u304d\u306e\u3082\u3072\u3068\u305d \u3082\u3068\u306f\u306a\u308b\u3089\u3080\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u304d\u308c\u3072\u306b\u3082\u308d\u306b \u3057\u308b\u304b\u3057\u308b\u3051\u304d\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3057\u304b\u306f\u306e\u304b\u3089\u306b \u306a\u3068\u306f\u306a\u308a\u304b\u3080\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u305f\u3068\u307f\u3082\u3084\u308d\u306e \u304d\u305f\u306a\u3092\u3082\u3089\u306f\n\n[[5]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3057\u304b\u306e\u306e\u306f\u308c\u3068 \u3042\u306e\u306e\u3064\u308b\u306a\u308a\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u304a\u3072\u3072\u306f\u306f\u307e\u306e \u3057\u3064\u306e\u304b\u305d\u3089\u308b\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u304a\u304b\u3088\u306f\u305f\u3089\u306e \u304a\u3053\u306e\u307e\u308a\u304b\u304d\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u304b\u308b\u306e\u3068\u3055\u304b\u306e \u307e\u308a\u306e\u306a\u3082\u3089\u3066\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u304b\u305f\u306b\u3072\u304d\u3078\u3082 \u3053\u3068\u306e\u3089\u307e\u308b\u308b\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3042\u307f\u3088\u3082\u304b\u307f\u306b \u304a\u3089\u3057\u304d\u308a\u3057\u306a\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u304a\u305f\u3089\u3082\u3084\u308a\u306e \u307e\u304b\u3092\u306a\u308b\u3051\u3080\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3053\u304b\u306e\u304f\u3053\u3068\u306b \u306f\u308b\u306f\u307f\u308a\u3089\u3057\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3084\u3059\u306f\u306b\u304b\u3068\u306f \u304b\u308b\u304b\u3053\u308a\u304b\u308a\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u308f\u304d\u306e\u3086\u306e\u304d\u308b \u306a\u304d\u304b\u306f\u306e\u306a\u3057\n\n[[6]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3082\u305f\u3068\u306a\u3064\u305f\u306e \u3042\u304d\u306e\u3055\u308b\u304b\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3044\u3064\u3088\u306b\u3082\u308a\u308b \u304b\u3089\u306e\u304b\u308a\u304b\u308b\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3044\u306a\u304b\u306e\u306e\u306b\u306e \u305f\u304b\u306e\u306a\u308b\u3051\u308a\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u305f\u3064\u306b\u308b\u304b\u3068\u306e \u304b\u304d\u306e\u304b\u306e\u3051\u306a\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3053\u306a\u306e\u306e\u306a\u307e\u306b \u3053\u3057\u3082\u3057\u308a\u304b\u308a\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306a\u308a\u306b\u304b\u3072\u304d\u306e \u3046\u3082\u306e\u3051\u308b\u3051\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3044\u3082\u306e\u306a\u3053\u3078\u306e \u306f\u304b\u306e\u306a\u305d\u3051\u3080\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u306f\u308a\u306e\u308b\u304f\u308d\u306b \u307e\u304d\u306e\u306f\u308a\u306a\u3080\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3042\u306f\u304b\u306a\u307f\u3057\u305d \u3042\u308c\u306e\u304b\u308a\u3089\u308a\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u304f\u3057\u3075\u3053\u3057\u306f\u306e \u304b\u3081\u305f\u304d\u308a\u3051\u308a\n\n[[7]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3064\u304d\u306e\u306e\u304b\u3089\u306e \u304b\u304b\u306e\u306a\u308b\u304b\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3044\u3068\u306b\u306e\u306f\u3089\u306e \u3042\u305f\u306e\u306a\u308a\u304b\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u306a\u306f\u308d\u306b\u306f\u3068\u306e \u306a\u308b\u306e\u306a\u308b\u304b\u3080\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u304b\u306a\u306b\u306e\u304b\u3068\u306e \u305f\u308b\u306e\u306a\u308b\u304b\u308a\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3072\u304b\u306e\u306e\u304b\u3068\u306e \u304b\u308b\u306e\u3057\u3064\u306a\u3080\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306a\u305f\u306e\u304b\u3053\u307e\u306e \u3042\u304d\u306e\u306a\u308b\u304b\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u306a\u3089\u306e\u306e\u3053\u3057\u306e \u3042\u308d\u306e\u306a\u305d\u3051\u3080\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3044\u3064\u3057\u306e\u305f\u3068\u306b \u3080\u308a\u306e\u306a\u308b\u304b\u3080\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3044\u304d\u304b\u306e\u3053\u3068\u306b \u306a\u307f\u306e\u306a\u308a\u304b\u3080\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u3075\u308c\u306e\u306b\u3064\u304d\u306e \u307f\u308b\u3055\u306a\u3089\u3089\u308b\n\n[[8]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3053\u304d\u306e\u3082\u304b\u3068\u308b \u3042\u304b\u306e\u306a\u308a\u304b\u306a\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u304b\u304b\u306e\u306e\u304b\u3068\u306b \u3042\u3068\u306e\u306a\u308a\u3051\u306a\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u304b\u304d\u306e\u306e\u304b\u3089\u306e \u3042\u3068\u306e\u306a\u308b\u304b\u308a\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3057\u304b\u306e\u306e\u304b\u3068\u306e \u306a\u3068\u306e\u306a\u308a\u3051\u3080\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u304b\u304d\u306e\u306e\u304b\u3068\u306e \u304b\u304d\u304b\u306a\u306e\u304b\u3080\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u304b\u307e\u3057\u308b\u304b\u3051\u306e \u3042\u308b\u306e\u306a\u308a\u304b\u308a\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3042\u3064\u306e\u306e\u3084\u3089\u306e \u3053\u304d\u306e\u3057\u308a\u304b\u3080\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u307e\u304b\u306e\u308b\u304b\u3068\u306e \u3042\u308b\u306e\u306a\u308a\u3051\u308a\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3042\u304d\u306e\u306e\u304b\u3068\u306e \u3046\u304b\u306e\u306a\u308a\u304b\u3080\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u3042\u305f\u306e\u306e\u304b\u308c\u306e \u3053\u3082\u306e\u306a\u308b\u306a\u3080\n\n[[9]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3044\u304b\u306e\u306e\u304b\u3068\u306e \u3042\u304d\u306e\u306a\u308a\u304b\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3044\u304b\u306e\u306e\u304b\u3089\u306e \u3042\u304d\u306e\u306a\u308a\u304b\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3044\u304b\u306e\u306e\u304b\u3068\u306e \u3042\u304d\u306e\u306a\u308a\u304b\u3080\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u304b\u304b\u306e\u306b\u304b\u3068\u306e \u3042\u308b\u306e\u306a\u308a\u3051\u306f\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3042\u304d\u306e\u306e\u304b\u3068\u306e \u3042\u304d\u306e\u306a\u306e\u304b\u3080\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306a\u308b\u306b\u306e\u304b\u3068\u306e \u3042\u304d\u306e\u306a\u308a\u304b\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3042\u304b\u306e\u306e\u304b\u3089\u306e \u3042\u304d\u306e\u306a\u308a\u304b\u3080\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u306a\u304b\u306e\u306e\u304b\u3068\u306e \u3053\u304d\u306e\u306a\u308a\u3051\u308a\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3042\u304b\u306e\u306e\u304b\u3068\u306e \u3044\u304d\u306e\u306a\u308a\u304b\u3080\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u3042\u304b\u306e\u306e\u304b\u3068\u306e \u3053\u304d\u306e\u306a\u308a\u304b\u3080\n```\n\n## \u30e2\u30c7\u30eb\u5909\u66f4\n\u3000\u4e0a\u8a18\u3067\u7528\u3044\u305fLSTM\u306e\u4ed6\u306bGRU\u30e2\u30c7\u30eb\u3082\u540c\u3058\u3088\u3046\u306b\u4f7f\u3048\u307e\u3059\u3002\u8a73\u3057\u3044\u8aac\u660e\u306f\u4ed6\u306e\u30da\u30fc\u30b8\u306b\u8b72\u308a\u307e\u3059\u304c\u3001Keras\u3067\u306f\u3053\u3061\u3089\u3082\u5b9a\u7fa9\u3055\u308c\u3066\u304a\u308a\u3001\u3059\u3050\u306b\u5229\u7528\u3067\u304d\u307e\u3059\u3002\u305b\u3063\u304b\u304f\u306a\u306e\u3067\u3001\u3053\u3061\u3089\u3082\u5b9f\u884c\u3057\u3066\u6bd4\u8f03\u3057\u307e\u3057\u3087\u3046\u3002\n\n```{r:GRU}\n# \u5404\u5c64\u306e\u8a2d\u5b9a\u306f\u540c\u3058\ngru_model <- keras$models$Sequential()\ngru_model$add(\n  layer = keras$layers$GRU(\n    output_dim = 128L, input_shape = c(SET_TEXT_PARAM$STEP, chars_len),\n    return_sequences = TRUE\n  )\n)\ngru_model$add(\n  layer = keras$layers$GRU(\n    output_dim = 128L,\n    return_sequences = TRUE, activation = \"relu\"\n  )\n)\ngru_model$add(\n  layer = keras$layers$TimeDistributed(\n    layer = keras$layers$Dense(output_dim = chars_len, activation = \"softmax\")\n  )\n)\ngru_model$compile(loss = \"categorical_crossentropy\", optimizer = \"rmsprop\")\n\n> gru_model$summary()\n____________________________________________________________________________________________________\nLayer (type)                     Output Shape          Param #     Connected to                     \n====================================================================================================\ngru_1 (GRU)                      (None, 17, 128)       68352       gru_input_1[0][0]                \n____________________________________________________________________________________________________\ngru_2 (GRU)                      (None, 17, 128)       98688       gru_1[0][0]                      \n____________________________________________________________________________________________________\ntimedistributed_2 (TimeDistribute(None, 17, 49)        6321        gru_2[0][0]                      \n====================================================================================================\nTotal params: 173361\n____________________________________________________________________________________________________\n\n\n# LSTM\u3088\u308a\u306f\u65e9\u3044\u304c\u30012\u6642\u9593\u8fd1\u304f\u304b\u304b\u308b\n> gru_model$fit(x = X, y = Y, batch_size = 1000L, nb_epoch = 30L, shuffle = TRUE)\nEpoch 1/30\n150330/150330 [==============================] - 236s - loss: 2.9939   \nEpoch 2/30\n150330/150330 [==============================] - 221s - loss: 2.8423   \nEpoch 3/30\n150330/150330 [==============================] - 222s - loss: 2.8003   \nEpoch 4/30\n150330/150330 [==============================] - 222s - loss: 2.7927   \nEpoch 5/30\n150330/150330 [==============================] - 222s - loss: 2.7897   \nEpoch 6/30\n150330/150330 [==============================] - 223s - loss: 2.7875   \nEpoch 7/30\n150330/150330 [==============================] - 223s - loss: 2.7857   \nEpoch 8/30\n150330/150330 [==============================] - 223s - loss: 2.7841   \nEpoch 9/30\n150330/150330 [==============================] - 223s - loss: 2.7827   \nEpoch 10/30\n150330/150330 [==============================] - 223s - loss: 2.7813   \nEpoch 11/30\n150330/150330 [==============================] - 223s - loss: 2.7798   \nEpoch 12/30\n150330/150330 [==============================] - 223s - loss: 2.7784   \nEpoch 13/30\n150330/150330 [==============================] - 223s - loss: 2.7769   \nEpoch 14/30\n150330/150330 [==============================] - 224s - loss: 2.7754   \nEpoch 15/30\n150330/150330 [==============================] - 223s - loss: 2.7738   \nEpoch 16/30\n150330/150330 [==============================] - 223s - loss: 2.7721   \nEpoch 17/30\n150330/150330 [==============================] - 223s - loss: 2.7705   \nEpoch 18/30\n150330/150330 [==============================] - 223s - loss: 2.7689   \nEpoch 19/30\n150330/150330 [==============================] - 223s - loss: 2.7671   \nEpoch 20/30\n150330/150330 [==============================] - 223s - loss: 2.7654   \nEpoch 21/30\n150330/150330 [==============================] - 223s - loss: 2.7636   \nEpoch 22/30\n150330/150330 [==============================] - 223s - loss: 2.7619   \nEpoch 23/30\n150330/150330 [==============================] - 223s - loss: 2.7600   \nEpoch 24/30\n150330/150330 [==============================] - 223s - loss: 2.7583   \nEpoch 25/30\n150330/150330 [==============================] - 223s - loss: 2.7564   \nEpoch 26/30\n150330/150330 [==============================] - 223s - loss: 2.7546   \nEpoch 27/30\n150330/150330 [==============================] - 224s - loss: 2.7527   \nEpoch 28/30\n150330/150330 [==============================] - 223s - loss: 2.7508   \nEpoch 29/30\n150330/150330 [==============================] - 223s - loss: 2.7489   \nEpoch 30/30\n150330/150330 [==============================] - 224s - loss: 2.7470   \nHistory\n\n\n# LSTM\u3068\u540c\u69d8\u3001\u5b66\u7fd2\u30c7\u30fc\u30bf\u3092\u9069\u7528\u3057\u305f\u7d50\u679c\u304b\u3089\u4e0b\u306e\u53e5\u3092\u751f\u6210\ngru_result_predict <- gru_model$predict(x = X[, , , drop = FALSE])[, seq(from = 1, to = SET_TEXT_PARAM$MAX_LEN - SET_TEXT_PARAM$STEP ), ]\n> gen_gru_tanka <- mergeTankaUpperLower(\n  tanka_upper = normalize_tanka_text, result = gru_result_predict, chars = chars,\n  diversity = 1.0, target_num = nrow(x = normalize_tanka_text)\n)\n# A tibble: 150,330 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u306a\u305f\u306e\u3068\u3042\u3084\u3084 \u3057\u307e\u306f\u308d\u3066\u3080\u308a\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u307e\u3068\u306e\u306b\u3068\u3089\u3059 \u306a\u3059\u308d\u3053\u3080\u3057\u308a\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u306f\u3081\u3057\u307f\u307b\u3068\u3082 \u3059\u3068\u306b\u3084\u308b\u304b\u3084\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3084\u304b\u304d\u3053\u307e\u3082\u3092 \u306f\u3061\u304f\u307e\u308b\u3051\u304d\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u304a\u306d\u3057\u3081\u3075\u304b\u304d \u304a\u3064\u307e\u3092\u3057\u3078\u305b\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3053\u308b\u3088\u306f\u308c\u3086\u308b \u304b\u307e\u306b\u3055\u306b\u307b\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u304b\u304d\u306f\u3057\u3068\u306b\u306f \u3042\u3064\u308b\u3092\u307f\u306a\u308a\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u304f\u307f\u306b\u308b\u306a\u308d\u306b \u3086\u307b\u3072\u306e\u3075\u3075\u3080\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3046\u3057\u3082\u307e\u308c\u304f\u306e \u306a\u3055\u3059\u306a\u306e\u3084\u306f\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u307e\u3089\u3089\u3057\u3055\u3059\u306f \u306a\u304b\u308a\u304d\u304b\u308c\u306f\n# ... with 150,320 more rows\n\n\n# LSTM\u30e2\u30c7\u30eb\u3068\u540c\u3058\u3088\u3046\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5909\u3048\u3066\u7570\u306a\u308b\u53e5\u3092\u751f\u6210\nset.seed(seed = 71)\n> lapply(\n  X = seq(from = 0.9, to = 0.1, by = - 0.1),\n  FUN = mergeTankaUpperLower,\n  tanka_upper = normalize_tanka_text, result = gru_result_predict, chars = chars,\n  target_num = 10\n)\n[[1]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u304b\u3092\u3068\u306e\u305f\u304b\u306f \u3053\u306b\u306e\u3044\u306c\u3089\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3064\u3078\u308f\u304b\u308c\u3057\u305d \u3086\u3084\u306e\u304b\u307e\u304b\u3068\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u306a\u306b\u305f\u306a\u305f\u3068\u306b \u3086\u3057\u308d\u306e\u306a\u306d\u308c\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u306f\u3055\u3082\u3075\u3089\u3057\u3066 \u3057\u308b\u3057\u3059\u3057\u304b\u3057\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3042\u3064\u3068\u306c\u304f\u308c\u306e \u3053\u304d\u3084\u3092\u304d\u3053\u3082\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3044\u304b\u3075\u3092\u304b\u308d\u306e \u3042\u304d\u3064\u307f\u308b\u306a\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u304b\u304b\u304a\u3068\u3089\u307e\u306e \u3055\u3068\u306e\u3057\u3059\u306b\u3080\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u307e\u3075\u306b\u306e\u307f\u306e\u306f \u306e\u304f\u3092\u3081\u308a\u306f\u308b\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3075\u3051\u3089\u304b\u3089\u304d\u306e \u307e\u3057\u3057\u3064\u308b\u3078\u3057\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u307b\u306f\u305f\u3088\u306f\u306a\u3068 \u306a\u307b\u3057\u308c\u3081\u306a\u3092\n\n[[2]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3053\u3075\u306e\u307f\u3055\u304d\u306e \u306a\u308b\u3080\u3057\u308b\u3053\u306a\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3044\u306b\u308c\u3064\u304b\u307e\u306e \u3053\u306a\u306e\u304d\u308b\u307f\u308b\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u307e\u304d\u307f\u306f\u304b\u3089\u306f \u3072\u3068\u306a\u3068\u3082\u304b\u304d\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u306f\u307e\u3053\u304b\u3059\u308d\u306b \u305f\u3082\u308b\u3064\u308b\u308a\u3082\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3046\u304f\u307e\u3061\u304b\u307f\u3092 \u306a\u304f\u306e\u306a\u3059\u304b\u3089\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u304a\u3089\u305f\u305d\u307e\u306b\u306b \u3053\u305b\u305f\u306a\u308a\u3075\u308c\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3044\u3082\u3088\u3082\u3061\u3089\u304d \u306a\u304b\u3044\u304d\u304d\u3051\u306a\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u304a\u3075\u306f\u3053\u3080\u3068\u3078 \u3072\u307f\u3064\u306f\u3084\u306a\u308b\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u304b\u306e\u3068\u3044\u304b\u3068\u3084 \u306f\u3064\u3072\u3078\u3059\u3051\u3075\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u304b\u3059\u306c\u3061\u3042\u3066\u3092 \u304a\u3059\u3057\u306a\u304f\u3089\u306a\n\n[[3]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u304b\u3086\u3084\u3082\u3088\u306a\u308b \u3055\u304d\u3072\u3053\u3082\u3089\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u307f\u306d\u304b\u3066\u3084\u3089\u3080 \u304a\u308d\u306b\u3088\u3082\u3089\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3044\u3084\u307f\u3057\u3064\u3072\u3080 \u305f\u3068\u306e\u304d\u3089\u3064\u307f\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3075\u308a\u304b\u3053\u306b\u308b\u306b \u307f\u3089\u306e\u304a\u3075\u3051\u3080\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3044\u304f\u306f\u3068\u3068\u308a\u306f \u306f\u305f\u308a\u3057\u3089\u304b\u304d\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3051\u3082\u306b\u304d\u3057\u3068\u306e \u3042\u306d\u308b\u3057\u308b\u3051\u308b\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3042\u3082\u306e\u306e\u304d\u306f\u306b \u307f\u304d\u3084\u305f\u308b\u304b\u306a\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u308f\u306e\u306e\u3068\u3053\u3064\u3082 \u306a\u308b\u306e\u3057\u308a\u307e\u306a\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3053\u308c\u306a\u3072\u307b\u306f\u3092 \u306a\u3092\u306b\u3053\u308b\u304b\u3082\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u3044\u304b\u3092\u307f\u3068\u3066\u308b \u304f\u308c\u306e\u304f\u304f\u305f\u308b\n\n[[4]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3084\u3075\u307e\u308a\u3053\u304d\u306e \u3042\u305d\u306e\u3075\u308b\u3089\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3044\u3068\u306e\u306e\u304b\u3051\u306f \u306a\u3068\u306f\u3053\u308b\u308a\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u304b\u306e\u305f\u306e\u304d\u3068\u306b \u3072\u3082\u3092\u304d\u308b\u3051\u306a\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3042\u308d\u3057\u306e\u304b\u3068\u306e \u3042\u3072\u306e\u3064\u308b\u304b\u3092\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u307e\u304b\u306e\u306e\u304b\u308a\u304d \u306a\u307f\u308a\u304b\u308a\u304b\u306a\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306f\u306a\u3091\u304b\u3057\u304f\u306b \u307f\u306a\u304b\u3057\u3089\u3089\u308a\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u306f\u3082\u3057\u306b\u3068\u305f\u306b \u3044\u308c\u3061\u3084\u3068\u3057\u304f\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3053\u3059\u306e\u304b\u3089\u307e\u306e \u306a\u308b\u306f\u306a\u308a\u304b\u306a\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3053\u304b\u306b\u306e\u304b\u306a\u3082 \u305d\u307b\u3082\u3057\u308b\u304b\u308c\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u306b\u3089\u308b\u306e\u3064\u3068\u306f \u3044\u307b\u306e\u3064\u304f\u307f\u3057\n\n[[5]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3044\u304b\u306e\u306e\u3072\u307e\u308b \u3086\u3068\u308b\u3057\u304d\u306a\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3044\u307f\u306d\u306e\u3053\u305f\u305d \u3042\u3075\u306e\u306f\u304b\u3053\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3088\u307e\u306e\u3053\u3064\u306b\u306e \u3053\u3082\u306e\u3057\u308b\u3089\u306a\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3044\u304b\u3082\u306e\u304b\u308a\u306b \u3046\u304d\u306b\u304b\u3082\u3068\u306f\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u307f\u3089\u3092\u304f\u304b\u305f\u306e \u3044\u3068\u305d\u306f\u308a\u304b\u306a\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3042\u308c\u306e\u3064\u3068\u3068\u306e \u3042\u304d\u305d\u304b\u305d\u306a\u308b\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u307e\u306f\u3072\u306e\u306a\u3057\u306e \u306a\u3064\u306e\u306a\u308b\u3051\u308b\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u305f\u3082\u306e\u308b\u304b\u3068\u306e \u3042\u308b\u3084\u304d\u308a\u3051\u3080\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u304b\u305f\u3092\u304f\u3057\u3091\u306f \u307e\u3082\u308b\u306a\u308c\u304b\u3080\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u306a\u3068\u305f\u304f\u306f\u308d\u306e \u3053\u305f\u306e\u3055\u3059\u304f\u3066\n\n[[6]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3042\u3068\u3072\u3075\u304b\u3089\u306b \u3042\u304d\u305d\u3082\u308b\u3089\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u306a\u305f\u306b\u306e\u307f\u305f\u306e \u304a\u306e\u306e\u3068\u308b\u3051\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3053\u3057\u3066\u306e\u304b\u3068\u306e \u306a\u304d\u306e\u306a\u308b\u304b\u3080\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u3044\u307f\u304b\u305f\u304b\u307f\u306f \u305f\u308b\u306e\u306a\u308a\u3051\u3082\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3053\u3057\u3082\u306e\u304b\u304d\u3082 \u306a\u308b\u307e\u3068\u3089\u304b\u306a\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u3044\u304d\u306e\u306e\u304b\u3068\u306e \u3042\u308a\u3082\u306a\u308b\u3051\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3053\u3084\u306b\u3068\u3057\u306f\u306e \u3042\u307e\u306e\u306a\u304d\u3051\u308a\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3053\u304d\u306e\u306f\u304b\u3068\u306b \u306a\u304b\u306e\u3057\u308a\u304b\u308a\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3042\u304d\u306b\u306e\u3057\u304d\u306f \u307f\u307e\u306e\u3068\u306b\u3057\u3080\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u3053\u3057\u3075\u3053\u3057\u306f\u308b \u306a\u3066\u3082\u306a\u308b\u308a\u3080\n\n[[7]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u306a\u306a\u306e\u3068\u3072\u308c\u308b \u3042\u304d\u306e\u306a\u308a\u3089\u308b\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u304b\u304b\u306e\u306e\u307f\u305f\u306e \u3042\u304d\u306e\u3068\u308b\u3089\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u304a\u306f\u3092\u306e\u304d\u304b\u306e \u305f\u304d\u306b\u3053\u308b\u304b\u3080\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u306f\u304d\u306e\u306e\u304b\u3068\u306e \u306a\u308c\u306e\u3042\u308a\u3051\u306f\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u305f\u304d\u306e\u306f\u304b\u308a\u306b \u3057\u304d\u306e\u304b\u306e\u304b\u306a\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306f\u304d\u306b\u306f\u304b\u3068\u306e \u3042\u304d\u306e\u306a\u308b\u3051\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u306a\u308b\u306e\u306e\u3059\u3068\u306b \u3057\u308b\u306e\u304b\u308b\u3051\u308b\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3053\u3064\u3057\u306e\u304b\u307e\u306e \u3042\u3068\u306e\u306a\u308a\u3051\u3080\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u3044\u3068\u306b\u304b\u304b\u3068\u306f \u3053\u304b\u306e\u306a\u305d\u304b\u308b\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u304b\u3082\u306e\u306e\u304b\u305f\u306b \u304b\u3068\u3082\u306a\u307e\u3068\u306f\n\n[[8]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3042\u304b\u306e\u306e\u304b\u3068\u306e \u3042\u308b\u306e\u306a\u308a\u304b\u3080\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3044\u304d\u306e\u306b\u304b\u3068\u306e \u3044\u304d\u306e\u306a\u3053\u3089\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3044\u304d\u306e\u3082\u304b\u3068\u306e \u304b\u3068\u304b\u306a\u308b\u3089\u3080\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u306f\u304b\u306b\u3082\u304b\u3068\u306e \u3042\u304b\u306e\u306a\u308a\u3051\u3080\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3053\u304b\u306e\u306e\u304b\u3068\u306e \u306a\u308a\u306e\u306a\u308b\u304b\u3080\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306a\u308b\u306e\u304b\u304b\u308a\u306b \u3042\u308b\u306e\u304b\u308b\u304b\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3042\u3068\u306e\u306e\u306f\u3089\u306b \u3042\u304d\u306e\u306a\u308b\u3051\u308b\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u3042\u3089\u306b\u306e\u304b\u3068\u306e \u3042\u308d\u306e\u306a\u308a\u3051\u308b\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u306a\u3068\u306e\u306e\u304b\u3068\u3082 \u306a\u3068\u3084\u306a\u305d\u304b\u3080\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u306a\u304d\u306b\u306e\u304b\u307f\u306f \u305f\u3068\u306e\u306a\u306e\u3089\u306f\n\n[[9]]\n# A tibble: 10 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u304d\u306e\u3075\u3053\u305d \u3068\u3057\u306f\u304f\u308c\u3057\u304b \u306f\u308b\u304b\u3059\u307f \u3053\u304b\u306e\u306e\u304b\u304d\u306e \u3042\u304d\u306e\u306a\u308b\u3051\u308a\n2  \u304d\u306e\u3075\u3053\u305d \u3064\u304d\u306f\u305f\u3061\u3057\u304b \u3044\u3064\u306e\u307e\u306b \u3044\u304b\u306e\u306e\u304b\u304d\u306e \u3042\u304d\u306e\u306a\u306e\u3089\u3080\n3  \u3042\u3059\u3088\u308a\u306f \u308f\u304b\u306a\u3064\u307e\u3080\u3068 \u304b\u305f\u3092\u304b\u306e \u3044\u304d\u306e\u306e\u304b\u3068\u306e \u3042\u3068\u306e\u306a\u308b\u304b\u306a\n4  \u3046\u3081\u306e\u306f\u306a \u305d\u308c\u3068\u3082\u307f\u3048\u3059 \u3072\u3055\u304b\u305f\u306e \u305f\u308b\u306e\u306e\u304b\u308a\u306e \u3042\u304d\u306e\u306a\u308a\u3051\u3080\n5  \u305f\u304b\u3084\u3068\u306e \u3046\u3081\u306e\u306f\u306a\u305d\u3082 \u3072\u3055\u304b\u305f\u306e \u3042\u304d\u306e\u306e\u304b\u3068\u306e \u3042\u304d\u306e\u306a\u306e\u304b\u3080\n6  \u3046\u3081\u306e\u306f\u306a \u307e\u3064\u3055\u304f\u3048\u305f\u3092 \u305f\u3092\u308a\u3082\u3066 \u306a\u304d\u306e\u306e\u304b\u3068\u306e \u3042\u304d\u306e\u306a\u308b\u304b\u3080\n7  \u3086\u304d\u3055\u3080\u307f \u3055\u3051\u3068\u304d\u304b\u308c\u306c \u3046\u3081\u306e\u306f\u306a \u3042\u304b\u306e\u306e\u304b\u3089\u306b \u3042\u307e\u306e\u306a\u308b\u3051\u308b\n8  \u3046\u3081\u306e\u306f\u306a \u3055\u304d\u3066\u3061\u308b\u3068\u306f \u3057\u3089\u306c\u304b\u3082 \u304b\u304d\u306e\u306e\u304b\u3068\u306e \u3042\u308b\u306e\u306a\u308a\u304b\u308b\n9  \u308f\u304b\u3084\u3068\u306b \u3055\u304d\u305f\u308b\u3046\u3081\u3092 \u3064\u304d\u304d\u3088\u307f \u306a\u304d\u306e\u306e\u304b\u3068\u306e \u306a\u3068\u306e\u306a\u308a\u304b\u308b\n10 \u304b\u305b\u306f\u3084\u307f \u304a\u3061\u305f\u304d\u3064\u3089\u3057 \u3057\u3089\u306a\u307f\u306b \u3042\u304d\u306e\u306e\u304b\u3089\u306e \u306a\u3068\u306e\u306a\u306e\u3089\u306f\n```\n\n\u3000LSTM\u3082GRU\u3082\u7532\u4e59\u3064\u3051\u304c\u305f\u3044\u3067\u3059\u306d\u3002\n\n\n# \u30e2\u30c7\u30eb\u3067\u904a\u3076\n\u3000\u65b0\u5e74\u306a\u306e\u3067\u300c\u3042\u305f\u3089\u3057\u304d\u300d\u3067\u59cb\u307e\u308b\u4e0a\u306e\u53e5\u3092\u7528\u3044\u3066\u3001\u304a\u6b63\u6708\u306b\u3075\u3055\u308f\u3057\u305d\u3046\u306a\u4e0b\u306e\u53e5\u3092\u751f\u6210\u3092\u8a66\u307f\u307e\u3057\u305f\u3002\n\n```{r:\u65b0\u5e74\u306b\u5408\u3063\u305f\u53e5\u306e\u751f\u6210\u306b\u6311\u6226}\n> normalize_tanka_text %>% \n  dplyr::filter(u1 == \"\u3042\u305f\u3089\u3057\u304d\") %>% \n  dplyr::distinct()\n# A tibble: 25 \u00d7 5\n           u1             u2         u3             l1             l2\n        <chr>          <chr>      <chr>          <chr>          <chr>\n1  \u3042\u305f\u3089\u3057\u304d \u306f\u308b\u306e\u3084\u307e\u3078\u306e \u306f\u306a\u306e\u307f\u305d \u3068\u3053\u308d\u3082\u308f\u304b\u3059 \u3055\u304d\u306b\u3051\u308b\u304b\u306a\n2  \u3042\u305f\u3089\u3057\u304d \u306f\u308b\u306e\u3084\u307e\u3078\u306e \u306f\u306a\u306e\u307f\u305d \u3068\u3053\u308d\u3082\u308f\u304b\u3059 \u3055\u304d\u306b\u3061\u308a\u3051\u308b\n3  \u3042\u305f\u3089\u3057\u304d \u3046\u308c\u3078\u306f\u304a\u307b\u304f \u3055\u3080\u304d\u3088\u306e \u306a\u304b\u304d\u3088\u308a\u3053\u305d \u306f\u3057\u307e\u308a\u306b\u3051\u308b\n4  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u3057\u308b\u3059\u3068\u306a\u3089\u3057 \u3086\u304d\u306e\u3075\u308c\u308b\u306f\n5  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306f \u3044\u3084\u3068\u3057\u306b \u3086\u304d\u3075\u307f\u306a\u3089\u3057 \u3064\u306d\u304b\u304f\u306b\u3082\u304b\n6  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u306f\u3064\u306f\u308b\u306e \u3051\u3075\u3075\u308b\u3086\u304d\u306e \u3044\u3084\u3057\u3051\u3088\u3053\u3068\n7  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3044\u3084\u3068\u3057\u306b \u3086\u304d\u3075\u307f\u3061\u3089\u3057 \u3064\u306d\u306a\u3089\u306c\u304b\u3082\n8  \u3042\u305f\u3089\u3057\u304d \u3046\u308c\u3078\u306f\u304a\u307b\u304f \u3055\u3080\u304d\u3088\u306e \u306a\u304b\u304d\u3088\u308a\u3053\u305d \u306f\u3057\u307e\u308a\u306b\u3051\u308c\n9  \u3042\u305f\u3089\u3057\u304d \u306f\u308b\u306b\u3082\u3055\u3089\u306b \u306b\u306c\u307e\u3064\u306f \u3061\u3068\u305b\u3053\u3048\u3053\u306c \u3057\u308b\u3078\u306a\u308a\u3051\u308a\n10 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3075\u308b\u304d\u3072\u3068\u3068\u3061 \u3042\u3078\u308b\u306a\u308a\u3051\u308a\n# ... with 15 more rows\n\n# \u300c\u3042\u305f\u3089\u3057\u304d\u3068\u3057\u306e\u306f\u3057\u3081\u306b\u3068\u3088\u306e\u3068\u3057\u300d\u3068\u300c\u3042\u305f\u3089\u3057\u304d\u3068\u3057\u306e\u306f\u3057\u3081\u306e\u3046\u308c\u3057\u304d\u306f\u300d\u3092\u9078\u629e\norg_upper_seed_str <- c(\"\u3042\u305f\u3089\u3057\u304d\u3068\u3057\u306e\u306f\u3057\u3081\u306b\u3068\u3088\u306e\u3068\u3057\", \"\u3042\u305f\u3089\u3057\u304d\u3068\u3057\u306e\u306f\u3057\u3081\u306e\u3046\u308c\u3057\u304d\u306f\")\norg_x <- genOrgX(\n  org_upper_str = org_upper_seed_str,\n  chars = chars, dummy_seed = tanka_dummy, step = SET_TEXT_PARAM$STEP\n)\n\n\n# LSTM\u30e2\u30c7\u30eb\nset.seed(seed = 71)\nlapply(\n  X = seq(from = 1.0, to = 0.5, by = - 0.1),\n  FUN = mergeTankaUpperLower,\n  tanka_upper = normalize_tanka_text %>% \n    dplyr::filter(\n      u1 == \"\u3042\u305f\u3089\u3057\u304d\" & \n        (u2 ==  \"\u3068\u3057\u306e\u306f\u3057\u3081\u306b\" & u3 == \"\u3068\u3088\u306e\u3068\u3057\") | \n        (u2 ==  \"\u3068\u3057\u306e\u306f\u3057\u3081\u306e\" & u3 == \"\u3046\u308c\u3057\u304d\u306f\")\n    ) %>% \n    head(n = 2),\n  result = model$predict(x = org_x[, , , drop = FALSE])[, seq(from = 1, to = SET_TEXT_PARAM$MAX_LEN - SET_TEXT_PARAM$STEP ), ],\n  chars = chars, target_num = 2\n)\n[[1]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u304b\u3092\u3088\u306e\u304b\u3086\u306b \u306a\u304b\u306c\u308f\u3082\u304b\u304d\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3080\u307b\u3089\u306e\u304b\u304b\u308b \u304d\u3081\u307f\u3055\u3066\u304b\u3068\n\n[[2]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u306a\u306b\u305f\u306a\u307f\u307e\u306b \u3057\u307e\u306b\u306a\u306e\u306d\u308c\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3086\u306a\u3082\u3075\u304b\u3057\u306b \u3042\u3051\u3057\u306a\u307f\u3059\u3057\n\n[[3]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u304b\u3057\u3066\u3068\u305f\u304d\u304f \u304b\u307e\u308a\u3042\u304d\u3084\u3080\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u3057\u306e\u306a\u3053\u3089\u308a \u3042\u307b\u3068\u3044\u306b\u3051\u3092\n\n[[4]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u3068\u308c\u3082\u304b\u304a\u3068\u306e \u304a\u307f\u304f\u3082\u306c\u306a\u307e\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304a\u3061\u3061\u306e\u304b\u306a\u306e \u304a\u3068\u3092\u306a\u3089\u3072\u3080\n\n[[5]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u305f\u307f\u3092\u3064\u304b\u308a\u306b \u3046\u3051\u3089\u304b\u3089\u304b\u3057\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3068\u3086\u3057\u306e\u306f\u308a\u306e \u3042\u3059\u306e\u304b\u306e\u3089\u3081\n\n[[6]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u304a\u304d\u3084\u304d\u3053\u3068\u3082 \u304b\u304b\u307b\u307f\u308a\u304b\u306a\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304d\u304d\u306f\u3075\u306f\u308c\u306e \u3053\u307f\u3057\u306a\u308a\u3057\u306b\n\n\n# GRU\u30e2\u30c7\u30eb\nset.seed(seed = 71)\nlapply(\n  X = seq(from = 1.0, to = 0.5, by = - 0.1),\n  FUN = mergeTankaUpperLower,\n  tanka_upper = normalize_tanka_text %>% \n    dplyr::filter(\n      u1 == \"\u3042\u305f\u3089\u3057\u304d\" & \n        (u2 ==  \"\u3068\u3057\u306e\u306f\u3057\u3081\u306b\" & u3 == \"\u3068\u3088\u306e\u3068\u3057\") | \n        (u2 ==  \"\u3068\u3057\u306e\u306f\u3057\u3081\u306e\" & u3 == \"\u3046\u308c\u3057\u304d\u306f\")\n    ) %>% \n    head(n = 2),\n  result = gru_model$predict(x = org_x[, , , drop = FALSE])[, seq(from = 1, to = SET_TEXT_PARAM$MAX_LEN - SET_TEXT_PARAM$STEP ), ],\n  chars = chars, target_num = 2\n)\n[[1]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u304b\u3091\u3088\u306e\u304b\u3086\u306b \u306a\u304b\u306c\u307e\u308f\u3051\u304d\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3080\u307b\u3089\u306e\u304b\u304b\u308b \u304d\u3081\u307f\u3055\u306e\u3068\u306a\n\n[[2]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u3088\u3082\u306e\u304d\u3086\u307b\u308b \u3044\u306e\u306a\u306d\u308c\u3057\u3080\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3088\u3088\u3064\u3057\u3051\u3053\u3057 \u3086\u305f\u3059\u3057\u304b\u3057\u3084\n\n[[3]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u304a\u305f\u304d\u304f\u304b\u307e\u306b \u3061\u304d\u3084\u3089\u3057\u306a\u308a\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u3059\u308d\u308f\u3068\u3068\u306b \u307f\u3064\u304b\u306a\u308a\u3068\u306a\n\n[[4]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u3044\u307f\u307f\u304f\u3064\u3064\u3068 \u306a\u305f\u3059\u306b\u3061\u3051\u306a\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306a\u306a\u306b\u306e\u307f\u3089\u3082 \u3092\u3072\u3061\u306a\u3089\u304b\u3092\n\n[[5]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u306c\u3051\u3086\u307f\u3068\u3086\u306e \u304f\u307f\u308d\u306f\u308b\u306a\u3057\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u304d\u3088\u306f\u306a\u3068\u306f \u3084\u308b\u3088\u307f\u308a\u304b\u306a\n\n[[6]]\n# A tibble: 2 \u00d7 5\n          u1             u2         u3             l1             l2\n       <chr>          <chr>      <chr>          <chr>          <chr>\n1 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306b \u3068\u3088\u306e\u3068\u3057 \u304d\u304d\u306e\u304b\u307f\u307f\u3084 \u306a\u308b\u3053\u307e\u3066\u304b\u3092\n2 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307e\u304b\u3064\u306e\u307f\u305b\u306e \u3075\u304d\u306e\u3057\u3068\u304b\u308b\n```\n\n\u3000\u7d50\u679c\u306b\u6e80\u8db3\u304c\u3044\u304b\u306a\u304b\u3063\u305f\u306e\u3067\u3001\"\u3042\u305f\u3089\u3057\u304d\u3068\u3057\u306e\u306f\u3057\u3081\u306e\u3046\u308c\u3057\u304d\u306f\"\u306b\u9650\u5b9a\u3057\u3001\u304b\u3064\u591a\u69d8\u6027\u30d1\u30e9\u30e1\u30fc\u30bf\u30921.0\u3067\u305f\u304f\u3055\u3093\u751f\u6210\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n```{r:\u305f\u304f\u3055\u3093\u751f\u6210\u3057\u3066\u307f\u308b}\nset.seed(seed = 71)\n> dplyr::bind_rows(\n  lapply(\n    X = rep(x = 1.0, times = 50),\n    FUN = mergeTankaUpperLower,\n    tanka_upper = normalize_tanka_text %>% \n      dplyr::filter(u1 == \"\u3042\u305f\u3089\u3057\u304d\" & u2 ==  \"\u3068\u3057\u306e\u306f\u3057\u3081\u306e\" & u3 == \"\u3046\u308c\u3057\u304d\u306f\") %>% \n      head(n = 2),\n    result = gru_model$predict(x = org_x[, , , drop = FALSE])[, seq(from = 1, to = SET_TEXT_PARAM$MAX_LEN - SET_TEXT_PARAM$STEP ), ],\n    chars = chars, target_num = 2\n  )\n) %>% \n    as.data.frame()\n            u1             u2         u3             l1             l2\n1   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u3091\u3088\u306e\u304b\u3086\u306b \u306a\u304b\u306c\u307e\u308f\u3051\u304d\n2   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3080\u307b\u3089\u306e\u304b\u304b\u308b \u304d\u3081\u307f\u3055\u306e\u3068\u306a\n3   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3088\u3082\u307f\u3088\u3078\u3089\u306e \u3053\u3064\u3068\u3088\u308c\u3051\u308b\n4   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u3075\u3064\u3057\u3051\u3053\u3057 \u3086\u305f\u3059\u3057\u304b\u3057\u3084\n5   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304a\u305f\u304d\u304f\u304b\u307e\u306b \u3061\u304d\u3084\u308f\u3064\u3051\u3080\n6   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3075\u305f\u3082\u3078\u3068\u3068\u3068 \u3042\u3092\u308d\u306a\u3082\u3068\u3092\n7   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305f\u304f\u306e\u3055\u3068\u3089\u3059 \u304a\u3061\u3061\u307e\u308b\u307f\u3080\n8   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3084\u304f\u306f\u304d\u3064\u304f\u308b \u3089\u304d\u308c\u305d\u3091\u306e\u3051\n9   \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306d\u3059\u306e\u3068\u304a\u3080\u306b \u3059\u3057\u3064\u3053\u306b\u3051\u3082\n10  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u307b\u306f\u304a\u304b\u308d\u308b \u3051\u3068\u305d\u304b\u3089\u308c\u3089\n11  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306a\u307f\u306a\u307b\u306e\u307f\u306e \u3075\u306a\u3082\u3078\u3057\u304b\u308b\n12  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304a\u306a\u306d\u308c\u3053\u308b\u306e \u305b\u306a\u306e\u304d\u308c\u306d\u304d\n13  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3044\u304d\u306e\u308b\u304d\u3078\u3092 \u3072\u305d\u3084\u3064\u308a\u308a\u3080\n14  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u307e\u3053\u3066\u3089\u308c\u306f \u3053\u306d\u3082\u307f\u306e\u306a\u3080\n15  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u304f\u3061\u3057\u3061\u304b\u308b \u306e\u3082\u304b\u305f\u3089\u304b\u306a\n16  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3072\u3089\u305f\u306f\u3082\u306f\u306e \u304a\u305f\u306e\u306a\u308b\u304b\u306b\n17  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u3057\u3082\u3059\u306f\u308d\u306b \u307f\u304b\u306b\u3044\u3057\u3051\u306a\n18  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304a\u306e\u304a\u307f\u3059\u306a\u308b \u3042\u306f\u3080\u3055\u305b\u308d\u3066\n19  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305f\u305f\u3081\u306e\u3068\u3081\u306e \u3068\u3078\u3072\u3078\u3059\u3051\u306a\n20  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304d\u304b\u3059\u304b\u3064\u305f\u3068 \u307b\u3066\u3072\u306a\u304f\u308c\u3064\n21  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u308d\u3075\u3084\u307e\u304f\u3082 \u3086\u3089\u306e\u3061\u307b\u304b\u306a\n22  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306b\u304b\u306e\u305f\u304b\u3066\u306e \u3080\u3091\u308c\u306d\u306a\u3089\u3066\n23  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3082\u3084\u306f\u306c\u3068\u3057\u3082 \u308f\u3064\u306f\u304b\u308a\u304b\u3057\n24  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u3064\u3066\u3053\u3057\u3051\u3068 \u3053\u3051\u3057\u306a\u308b\u3053\u3080\n25  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u306f\u306a\u308a\u304a\u304d\u304f \u306f\u304d\u307f\u304f\u308b\u304b\u306a\n26  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304a\u307b\u306e\u305d\u3057\u3089\u306e \u304b\u3053\u306f\u3078\u3082\u3057\u306e\n27  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u3075\u304b\u307e\u305f\u304b\u306e \u306a\u308b\u306e\u3064\u308b\u306f\u304d\n28  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u3068\u3053\u3084\u3068\u3042\u3082 \u307e\u3082\u3059\u3053\u3059\u306a\u308a\n29  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3053\u306f\u306e\u308b\u307f\u308a\u306b \u304a\u3089\u307f\u307b\u306f\u3088\u3080\n30  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305d\u3082\u3057\u3053\u3064\u307e\u306e \u3042\u304d\u304b\u304b\u306e\u3064\u3057\n31  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3059\u3068\u3066\u3092\u3046\u308c\u306e \u307f\u3075\u308c\u3064\u305d\u307e\u306a\n32  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3075\u304d\u306f\u305d\u306e\u3075\u3082 \u307f\u307e\u306e\u3055\u3082\u3089\u3080\n33  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3072\u3082\u3092\u3042\u3082\u308a\u306b \u306b\u3089\u307f\u3051\u3072\u3089\u3080\n34  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3046\u304b\u308a\u3057\u305f\u3061\u306e \u307e\u307b\u308b\u304f\u3053\u3051\u306a\n35  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3057\u304d\u3044\u308b\u306a\u308c\u305d \u3044\u3075\u307b\u3089\u3048\u306a\u308b\n36  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307e\u304b\u308b\u306f\u3072\u3068\u305d \u3082\u3068\u306f\u308c\u308b\u3057\u3057\n37  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u306f\u308b\u307e\u3057\u3068\u308b \u305f\u305f\u308c\u3064\u3053\u304b\u304f\n38  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3082\u306a\u3057\u304b\u3044\u3053\u3059 \u307e\u3089\u308d\u306a\u308b\u306a\u308b\n39  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305f\u306e\u3082\u305f\u3086\u3068\u306e \u304b\u306f\u307b\u305f\u306a\u3051\u308b\n40  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u3078\u306e\u3059\u3042\u3088\u3092 \u3044\u3068\u305f\u3068\u308a\u3064\u304f\n41  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306a\u306b\u307f\u3057\u3064\u308b\u306f \u3046\u308b\u306a\u304b\u3092\u304f\u308b\n42  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306e\u3068\u3084\u307f\u306d\u3084\u3080 \u308f\u3061\u306e\u3053\u308a\u307f\u306a\n43  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u304b\u3078\u306f\u3042\u306b\u3084 \u3046\u3061\u306c\u305d\u308a\u3048\u306f\n44  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306f\u306e\u304a\u3082\u3064\u3051\u306c \u3084\u3048\u3082\u3053\u306d\u3068\u3055\n45  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u305f\u306e\u3066\u3072\u3057\u306b \u3046\u3072\u3068\u305d\u308a\u306a\u3080\n46  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305d\u3084\u306b\u304a\u3044\u308c\u305d \u3053\u305d\u3072\u304b\u306b\u3057\u308b\n47  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3053\u304f\u306e\u306e\u307f\u3057\u3092 \u306a\u3089\u3072\u3064\u308b\u3051\u3080\n48  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u3053\u3086\u3082\u305f\u306f\u304d \u3042\u3051\u306f\u304b\u308d\u304b\u304d\n49  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304a\u3082\u305b\u306f\u3075\u306a\u306e \u304b\u308d\u3084\u306a\u308a\u3089\u306a\n50  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305f\u3082\u3072\u304d\u306a\u308c\u306e \u3042\u308c\u307b\u3082\u308b\u3064\u3066\n51  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u307e\u3057\u307f\u304b\u3048\u304d \u3086\u3082\u3084\u304b\u308c\u3088\u306a\n52  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3044\u308c\u304f\u3082\u3075\u3068\u306f \u3055\u3059\u3061\u3081\u304b\u308d\u304f\n53  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u3061\u3080\u3066\u3082\u3086\u3082 \u3082\u306f\u308c\u3092\u305f\u3086\u3057\n54  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306b\u304f\u3053\u304f\u3057\u3053\u3092 \u306a\u307e\u306e\u308f\u308a\u304b\u306e\n55  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3046\u3048\u308b\u308c\u3082\u3084\u306e \u3042\u3075\u306f\u3057\u306b\u3055\u306a\n56  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u308f\u308c\u3072\u306e\u304f\u3053\u306e \u307e\u306d\u304b\u304d\u3082\u306a\u306f\n57  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305d\u3086\u3057\u3068\u3053\u3055\u308b \u304b\u307b\u306a\u3057\u3051\u304b\u308a\n58  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3044\u3075\u306b\u3084\u3042\u305b\u306e \u3042\u307e\u306a\u307f\u3057\u305d\u308c\n59  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3044\u307b\u3053\u304b\u3044\u3075\u306b \u307f\u3048\u3068\u3057\u3089\u3057\u306f\n60  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3061\u3089\u306e\u304d\u305f\u3086\u306e \u3075\u304d\u308c\u3053\u3089\u306f\u305b\n61  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304d\u307b\u306b\u308b\u306a\u3051\u3080 \u3046\u304b\u3084\u307b\u3075\u304b\u3080\n62  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3082\u304b\u305f\u3068\u305f\u306d\u306e \u3080\u3068\u308a\u306a\u3064\u304b\u304d\n63  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304f\u3064\u306e\u308b\u304d\u3053\u3082 \u3084\u3066\u304b\u3089\u3053\u3078\u306a\n64  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3080\u307e\u307e\u3068\u308c\u304b\u306f \u3042\u3092\u305f\u3057\u308a\u305b\u306a\n65  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307e\u304b\u306e\u3064\u307f\u304a\u306e \u3084\u307f\u3072\u3092\u308b\u306a\u3092\n66  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305b\u307e\u3057\u308a\u307b\u3089\u306e \u3042\u308b\u306b\u3082\u305d\u3053\u3080\n67  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3055\u306f\u305f\u3064\u3057\u304f\u306e \u3046\u304b\u3080\u305f\u306b\u3089\u308a\n68  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304d\u306a\u3044\u3066\u3055\u3064\u306e \u3072\u3064\u3055\u3042\u308d\u3064\u3092\n69  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3080\u3072\u306e\u306f\u307f\u305f\u306c \u3088\u307e\u306e\u306b\u3082\u306e\u308a\n70  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305d\u308c\u3072\u3072\u307b\u306f\u3068 \u3042\u308b\u306b\u306a\u3051\u305f\u308b\n71  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304f\u304b\u307e\u3078\u3068\u304f\u306b \u3059\u304b\u304b\u3068\u306e\u3051\u3057\n72  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3057\u3059\u306b\u3066\u3086\u3042\u308b \u304b\u304d\u308c\u3057\u3089\u306a\u3066\n73  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3046\u3082\u306f\u308d\u3057\u3089\u306b \u3051\u308b\u3084\u308f\u3082\u306a\u3066\n74  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3051\u305f\u3072\u3066\u308a\u305f\u3055 \u3064\u307e\u306e\u304b\u308a\u308b\u3081\n75  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3064\u3089\u304d\u3082\u3082\u3055\u3082 \u3086\u3061\u3072\u3084\u308b\u305d\u306f\n76  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u305f\u3072\u306e\u3080\u306a\u306f \u304b\u3068\u306b\u3059\u304f\u304b\u306b\n77  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u304b\u308a\u306b\u3082\u306f\u3082 \u304b\u305d\u306a\u306a\u308a\u304b\u308a\n78  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307e\u304f\u304b\u306e\u306f\u307e\u306e \u3061\u3089\u3082\u3046\u306e\u3084\u306a\n79  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u304d\u3044\u3082\u3064\u3089\u3080 \u3061\u3068\u3084\u304b\u306f\u3055\u3068\n80  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3044\u306f\u304d\u304d\u3044\u304d\u3082 \u306a\u307f\u3082\u3066\u307e\u306a\u3082\n81  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304b\u3064\u306f\u3075\u3081\u3075\u306f \u3061\u3066\u308c\u3048\u306b\u306c\u306a\n82  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u305b\u3078\u305b\u306b\u304b\u3048\u3092 \u307e\u3081\u3066\u3088\u3061\u308c\u3086\n83  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3086\u3059\u304b\u3057\u304d\u306e\u3082 \u307f\u308d\u308b\u3084\u306b\u3089\u3068\n84  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306a\u3055\u308a\u308b\u307b\u307e\u304d \u304b\u3089\u307e\u306a\u306e\u3089\u306a\n85  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u306a\u307f\u305f\u305d\u3042\u304f\u3084 \u3053\u3061\u3072\u304d\u308a\u306d\u308a\n86  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3064\u304d\u308c\u3082\u3057\u3068\u306b \u306a\u3068\u305d\u3057\u3086\u307b\u306f\n87  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3082\u3088\u3057\u3092\u3092\u3086\u3082 \u3084\u3072\u3044\u306a\u304d\u306c\u3080\n88  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u3084\u3078\u3086\u3068\u306a\u3075 \u3053\u3082\u305f\u305f\u3068\u3068\u308b\n89  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3075\u306e\u3046\u306b\u3053\u304b\u306f \u3086\u308b\u3061\u306a\u3082\u3078\u3080\n90  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3061\u3059\u3072\u304d\u304d\u304b\u306f \u3042\u3072\u3057\u304b\u3089\u306d\u3051\n91  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3044\u3055\u306f\u3068\u304b\u3057\u308b \u307f\u308f\u3082\u3053\u3084\u3059\u3080\n92  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u3086\u3092\u3053\u304f\u3078\u306e \u307f\u304b\u305f\u3057\u308b\u304b\u3080\n93  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3046\u3081\u304b\u3059\u3059\u308d\u3082 \u304a\u308c\u3066\u305d\u308b\u306b\u3091\n94  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3072\u304d\u305b\u306e\u305b\u308c\u306e \u306f\u304d\u305f\u304b\u308a\u3089\u306f\n95  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304f\u3057\u305f\u306e\u3042\u3055\u306f \u307f\u3082\u305d\u305f\u306f\u3059\u308c\n96  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3053\u3082\u3061\u3068\u304b\u304b\u3082 \u305f\u3066\u308a\u307e\u307e\u3082\u304d\n97  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304f\u307b\u3072\u3044\u305f\u306d\u3082 \u3042\u304d\u3082\u308f\u308a\u306a\u3066\n98  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u304a\u304f\u306f\u306e\u3084\u305f\u3084 \u3066\u305f\u3089\u306a\u3053\u304b\u3084\n99  \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u307f\u308b\u307f\u3084\u3089\u3061\u3088 \u3042\u3089\u305d\u3092\u308a\u307f\u308b\n100 \u3042\u305f\u3089\u3057\u304d \u3068\u3057\u306e\u306f\u3057\u3081\u306e \u3046\u308c\u3057\u304d\u306f \u3042\u3089\u306e\u304d\u3055\u3051\u306b \u304b\u308c\u3057\u307f\u308a\u3057\u305b\n```\n\n\u3000\u975e\u5e38\u306b\u6b8b\u5ff5\u3067\u3059\u304c\u3001\u3044\u3044\u611f\u3058\u306e\u53e5\u306f\u898b\u5f53\u305f\u308a\u307e\u305b\u3093\u3002\n\n\n# \u307e\u3068\u3081\n\u3000{tensorflow}\u306eimport\u95a2\u6570\u3092\u5229\u7528\u3057\u3066R\u4e0a\u304b\u3089Keras\u3092\u7528\u3044\u305f\u30e2\u30c7\u30eb\u3092\u69cb\u7bc9\u3057\u3001\u77ed\u6b4c\u306e\u30c7\u30fc\u30bf\u3092\u9069\u7528\u3057\u3066\u4e0b\u306e\u53e5\u3092\u751f\u6210\u3059\u308b\u3053\u3068\u306b\u6311\u6226\u3057\u307e\u3057\u305f\u3002\u30e2\u30c7\u30eb\u81ea\u4f53\u306f\u52d5\u4f5c\u3057\u3066\u751f\u6210\u81ea\u4f53\u306f\u53ef\u80fd\u3067\u3057\u305f\u304c\u3001\u53ca\u7b2c\u70b9\u3092\u4e0e\u3048\u3089\u308c\u308b\u3088\u3046\u306a\u6b4c\u306f\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u3000\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u8981\u56e0\u3068\u3057\u3066\u3001Epoch\u6570\u304c\u5c11\u306a\u3044\u70b9\u304c\u8003\u3048\u3089\u308c\u307e\u3059\u3002\u3082\u3063\u3068\u5b66\u7fd2\u3092\u56de\u3057\u3066\u307f\u305f\u304fGPU\u30d1\u30ef\u30fc\u3092\u6b32\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u9ad8\u3044\u30de\u30cd\u30fc\u304c\u5fc5\u8981\u306a\u3063\u3066\u4e00\u500b\u4eba\u3067\u306f\u624b\u304c\u51fa\u305b\u305d\u3046\u306b\u3042\u308a\u307e\u305b\u3093\u3002\n\u3000\u307e\u305f\u3001\u30e2\u30c7\u30eb\u306e\u4e00\u65b0\u3082\u6539\u5584\u6848\u306b\u6319\u3052\u3089\u308c\u307e\u3059\u3002\u4eca\u56de\u306fRNN-LSTM/GRU\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u30bf\u30b9\u30af\u3068\u3057\u3066\u306fSequence-to-Sequence\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u306e\u65b9\u304c\u9069\u3057\u3066\u3044\u308b\u3068\u8003\u3048\u3089\u308c\u307e\u3059\u3002Sequence-to-Sequence\u306b\u95a2\u3057\u3066\u306fKeras\u306eIssue\u304c\u7acb\u3063\u3066\u304a\u308a\u3001\u4eca\u5f8c\u306e\u53d6\u308a\u8fbc\u307f\u3092\u671f\u5f85\u3057\u3066\u3044\u307e\u3059\uff08Attension\u30e2\u30c7\u30eb\u3068\u304b\u3082\uff09\u3002\n\u3000\u52a0\u3048\u3066\u4eca\u56de\u306f\u300c\u53e5\u6570 \u00d7 \u6587\u5b57\u306eOne-hot\u8868\u73fe\u300d\u306e\u30c7\u30fc\u30bf\u3092\u4e0a\u306e\u53e5\u3068\u4e0b\u306e\u53e5\u3067\u5bfe\u5fdc\u3065\u3051\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u753b\u50cf\u3067\u3088\u304f\u63a1\u7528\u3055\u308c\u3066\u3044\u308bCNN\u306b\u3088\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u3082\u4f7f\u3048\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u3082\u3061\u308d\u3093\u3001\u7cfb\u5217\u30c7\u30fc\u30bf\u3068\u3057\u3066STEP\u30b5\u30a4\u30ba\u3067\u53e5\u3092\u5207\u308a\u3001\u4e00\u6587\u5b57\u305a\u3064\u751f\u6210\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3082\u3044\u3044\u3068\u601d\u3044\u307e\u3059\uff08\u3080\u3057\u308d\u3053\u3061\u3089\u306e\u65b9\u3092\u8a66\u3057\u3066\u307f\u308b\u3079\u304d\u3067\u3057\u305f\uff09\u3002\n\u3000\u3044\u308d\u3044\u308d\u3068\u8a66\u305b\u305d\u3046\u306a\u306e\u3067\u6298\u3092\u898b\u3066\u89e6\u3063\u3066\u307f\u307e\u3059\u3002\n\n\u3000gensim\u306b\u7d9a\u3044\u3066Keras\u3092R\u4e0a\u3067\u6d3b\u7528\u3057\u305f\u6240\u611f\u3092\u307e\u3068\u3081\u308b\u3068\u3001\u6b8b\u5ff5\u306a\u304c\u3089Python\u3067\u4f7f\u3048\u308b\u6a5f\u80fd\u3092\u305d\u306e\u307e\u307e\u3068\u3044\u3046\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u624b\u8efd\u306b\u8a66\u3059\u5206\u306b\u306f\u3088\u3044\u3067\u3059\u304c\u3001\u3044\u304f\u3064\u304b\u306e\u95a2\u6570\u304c\u5229\u7528\u3067\u304d\u306a\u304b\u3063\u305f\u308a\uff08gensim\u3092\u5229\u7528\u3057\u305f\u8a18\u4e8b\u3082\u53c2\u7167\u306e\u3053\u3068\u3002\u305f\u3060\u3057\u3001\u5b9f\u884c\u74b0\u5883\u306b\u3088\u3063\u3066\u5229\u7528\u3067\u304d\u305f\u306e\u3067\u8abf\u67fb\u304c\u5fc5\u8981\uff09\u3001~~Python\u306elist\u5f62\u5f0f\u3078\u306e\u578b\u5909\u63db\u304c\u3067\u304d\u305a\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4e0e\u3048\u3089\u308c\u306a\u3044\u3068\u3044\u3046\u58c1\u306b\u3076\u3061\u3042\u305f\u308a\u307e\u3057\u305f\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u8907\u96d1\u306a\u30e2\u30c7\u30eb\u3092Keras\u3067\u4f5c\u6210\u3059\u308b\u969b\u306b\u5f79\u7acb\u3064callback\u3084merge\u306a\u3069\u306e\u6a5f\u80fd\u304c~\u5229\u7528\u3067\u304d\u306a\u304f\u3066\u3001\u3042\u308c\u3053\u308c\u8a66\u3057\u307e\u3057\u305f\u304cPython\u3067\u66f8\u304f\u3068\u3044\u3046\u306e\u304c\u30b7\u30f3\u30d7\u30eb\u3067\u30d9\u30b9\u30c8\u306a\u89e3\u306b\u306a\u308a\u305d\u3046\u3067\u3059~~\uff08\u3053\u3061\u3089\u306ftensowflow\u306a\u3044\u3057\u306f{tensowflow}\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u3042\u3052\u308b\u3001\u307e\u305f\u306f\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u5b9f\u884c\u53ef\u80fd\u306b\u306a\u308a\u3001EarlyStopping\u3082TensorBoard\u3082\u52d5\u4f5c\u3057\u307e\u3057\u305f\uff09\u3002\n\u3000\u7121\u7406\u3084\u308aKeras\u3092\u547c\u3073\u51fa\u3059\u3088\u308a\u3082\u3001R\u3067\u4f7f\u3046\u306a\u3089{tensowflow}\u3084{mxnet}\u304c\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u306d\u3002\n\u3000\n\u3000\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u4eca\u5e74\u306fPython\u3092\u52c9\u5f37\u3057\u307e\u3057\u3087\u3046\u3002\n\n\n# \u53c2\u8003\n- [The Unreasonable Effectiveness of Recurrent Neural Networks](http://karpathy.github.io/2015/05/21/rnn-effectiveness/)\n- [Multi-layer Recurrent Neural Networks (LSTM, GRU, RNN) for character-level language models in Torch](https://github.com/karpathy/char-rnn)\n- [\u308f\u304b\u308bLSTM \uff5e \u6700\u8fd1\u306e\u52d5\u5411\u3068\u5171\u306b](http://qiita.com/t_Signull/items/21b82be280b46f467d1b)\n- [LSTM\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u6982\u8981](http://qiita.com/KojiOhki/items/89cd7b69a8a6239d67ca)\n- [\u518d\u5e30\u578b\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8b1b\u7fa9\u30b7\u30ea\u30fc\u30ba\u30fb\u7b2c1\u90e8: RNN\u5165\u9580](http://qiita.com/kiminaka/items/87afd4a433dc655d8cfd)\n- [\u3053\u308c\u3092\u7406\u89e3\u3067\u304d\u308c\u3070\u81ea\u7136\u8a00\u8a9e\u51e6\u7406\u3082\u3067\u304d\u3061\u3083\u3046\uff1f MNIST\u3067RNN(LSTM)\u3092\u89e6\u308a\u306a\u304c\u3089\u89e3\u8aac](http://qiita.com/tawago/items/ad4e30abba9528875908)\n- [RNN\u306b\u304a\u3051\u308bDropout\u306e\u9069\u7528\u306b\u3064\u3044\u3066](http://qiita.com/yoh_okuno/items/4bcfbc10dd4d03e19690)\n- [LSTM\u3092\u8d85\u3048\u308b\u671f\u5f85\u306e\u65b0\u661f\u3001QRNN](http://qiita.com/icoxfog417/items/d77912e10a7c60ae680e)\n- [character-level CNN\u3067\u30af\u30ea\u30b9\u30de\u30b9\u3092\u751f\u304d\u629c\u304f](http://qiita.com/bokeneko/items/c0f0ce60a998304400c8)\n- [\u6df1\u5c64\u30ea\u30ab\u30ec\u30f3\u30c8\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u7528\u3044\u305f\u65e5\u672c\u8a9e\u8ff0\u8a9e\u9805\u69cb\u9020\u89e3\u6790](http://www.slideshare.net/hirokiouchi5/ss-70436298)\n- [Recurrent Neural Network Tutorial for Artists](http://blog.otoro.net/2017/01/01/recurrent-neural-network-artist/)\n\n- [LSTM sequence to sequence architectures (Encoding question)](https://github.com/fchollet/keras/issues/2496)\n- [shashankg7/Seq2Seq](https://github.com/shashankg7/Seq2Seq/blob/master/seq2seq/model.py)\n- [farizrahman4u/seq2seq](https://github.com/farizrahman4u/seq2seq)\n\n- [\u6700\u8fd1\u306eDeep Learning (NLP) \u754c\u9688\u306b\u304a\u3051\u308bAttention\u4e8b\u60c5](http://www.slideshare.net/yutakikuchi927/deep-learning-nlp-attention)\n- [Implementation of Sequence Generative Adversarial Nets with Policy Gradient](https://github.com/LantaoYu/SeqGAN)\n- [\u30c6\u30ad\u30b9\u30c8\u751f\u6210\u30e2\u30c7\u30eb -SeqGAN-](http://ksksksks2.hatenadiary.jp/entry/20161220/1482159924)\n\n- [\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u4f5c\u66f2\u3092\u3059\u308b! Magenta\u3092\u52d5\u304b\u3059](http://qiita.com/YoshikawaMasashi/items/0f6fbbe39c4381457b0a)\n- [Google Magenta\u304c\u65b0\u305f\u306b\u516c\u958b\u3057\u305f2\u3064\u306e\u4f5c\u66f2\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af(Lookback RNN,Attention RNN)](http://qiita.com/YoshikawaMasashi/items/8f36d741b297dd57faa8)\n- [\u6df1\u5c64\u5b66\u7fd2\u3067\u81ea\u52d5\u4f5c\u66f2\uff08Stacked LSTM\u7de8\uff09 [DW 6\u65e5\u76ee]](http://qiita.com/komakomako/items/de5077efa344a8689fa0)\n\n- [\u8907\u6570\u306e\u8457\u8005\u3092\u30c6\u30ad\u30b9\u30c8\u60c5\u5831\u3092\u6df7\u305c\u5408\u308f\u305b\u305fRNN\u3068\u9577\u6587\u306e\u6539\u5584\u624b\u6cd5](http://catindog.hatenablog.com/entry/2016/12/09/143014)\n- [CNN\u3092\u5229\u7528\u3057\u305f\u30bb\u30f3\u30c1\u30e1\u30f3\u30c8\u5206\u6790](http://catindog.hatenablog.com/entry/2016/08/22/102406)\n\n- [MXNet- Char RNN Example](http://mxnet.io/tutorials/r/charRnnModel.html)\n- [Deep Learning\u3067\u904a\u3076(3): LSTM-RNN\u3067\u590f\u76ee\u6f31\u77f3\u3063\u307d\u3044\u6587\u7ae0\u306e\u751f\u6210\u306b\u30c8\u30e9\u30a4\u3057\u3066\u307f\u308b](http://tjo.hatenablog.com/entry/2016/11/08/190000)\n\n\n## \u5b9f\u884c\u74b0\u5883\n```{r:R\u5b9f\u884c\u74b0\u5883}\n> devtools::session_info()\nSession info -------------------------------------------------------------------------------------\n setting  value                       \n version  R version 3.3.2 (2016-10-31)\n system   x86_64, darwin15.6.0        \n ui       RStudio (1.0.136)           \n language (EN)                        \n collate  ja_JP.UTF-8                 \n tz       Asia/Tokyo                  \n date     2017-01-03                  \n\nPackages -----------------------------------------------------------------------------------------\n package      * version date       source                             \n assertthat     0.1     2013-12-06 CRAN (R 3.3.2)                     \n car            2.1-4   2016-12-02 CRAN (R 3.3.2)                     \n caret        * 6.0-73  2016-11-10 CRAN (R 3.3.2)                     \n codetools      0.2-15  2016-10-05 CRAN (R 3.3.2)                     \n colorspace     1.3-2   2016-12-14 CRAN (R 3.3.2)                     \n devtools       1.12.0  2016-12-05 CRAN (R 3.3.2)                     \n digest         0.6.10  2016-08-02 CRAN (R 3.3.2)                     \n foreach        1.4.3   2015-10-13 CRAN (R 3.3.1)                     \n ggplot2      * 2.2.0   2016-11-11 CRAN (R 3.3.2)                     \n gtable         0.2.0   2016-02-26 CRAN (R 3.3.2)                     \n iterators      1.0.8   2015-10-13 CRAN (R 3.3.1)                     \n lattice      * 0.20-34 2016-09-06 CRAN (R 3.3.2)                     \n lazyeval       0.2.0   2016-06-12 CRAN (R 3.3.2)                     \n lme4           1.1-12  2016-04-16 CRAN (R 3.3.2)                     \n magrittr       1.5     2014-11-22 CRAN (R 3.3.2)                     \n MASS           7.3-45  2016-04-21 CRAN (R 3.3.2)                     \n Matrix         1.2-7.1 2016-09-01 CRAN (R 3.3.2)                     \n MatrixModels   0.4-1   2015-08-22 CRAN (R 3.3.2)                     \n memoise        1.0.0   2016-01-29 CRAN (R 3.3.2)                     \n mgcv           1.8-15  2016-09-14 CRAN (R 3.3.2)                     \n minqa          1.2.4   2014-10-09 CRAN (R 3.3.2)                     \n ModelMetrics   1.1.0   2016-08-26 CRAN (R 3.3.2)                     \n munsell        0.4.3   2016-02-13 CRAN (R 3.3.2)                     \n nlme           3.1-128 2016-05-10 CRAN (R 3.3.2)                     \n nloptr         1.0.4   2014-08-04 CRAN (R 3.3.2)                     \n nnet           7.3-12  2016-02-02 CRAN (R 3.3.2)                     \n pbkrtest       0.4-6   2016-01-27 CRAN (R 3.3.2)                     \n plyr           1.8.4   2016-06-08 CRAN (R 3.3.2)                     \n quantreg       5.29    2016-09-04 CRAN (R 3.3.2)                     \n Rcpp           0.12.8  2016-11-17 CRAN (R 3.3.2)                     \n reshape2       1.4.2   2016-10-22 CRAN (R 3.3.2)                     \n RevoUtils      10.0.2  2016-11-22 local                              \n scales         0.4.1   2016-11-09 CRAN (R 3.3.2)                     \n SparseM        1.74    2016-11-10 CRAN (R 3.3.2)                     \n stringi        1.1.2   2016-10-01 CRAN (R 3.3.2)                     \n stringr        1.1.0   2016-08-19 CRAN (R 3.3.2)                     \n tensorflow   * 0.3.0   2017-01-03 Github (rstudio/tensorflow@7920fb3)\n tibble         1.2     2016-08-26 CRAN (R 3.3.2)                     \n withr          1.0.2   2016-06-20 CRAN (R 3.3.2)   \n```\n\n```{shell:Python\u5b9f\u884c\u74b0\u5883}\n$ python --version\nPython 2.7.12\n\n$ pip list --format=columns | grep -e \"tensorflow\" -e \"Keras\"\nKeras                              1.1.1       \ntensorflow                         0.12.1\n```\n", "tags": ["R", "DeepLearning", "Keras", "\u81ea\u7136\u8a00\u8a9e\u51e6\u7406"]}