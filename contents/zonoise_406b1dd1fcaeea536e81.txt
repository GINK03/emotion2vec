{"tags": ["cakephp3", "GitLab", "cloud9"], "context": "\n\n\u306f\u3058\u3081\u306b\nGitlab\u306f\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u304cCI/CD\u6a5f\u80fd\u306f\u4f7f\u3063\u305f\u3053\u3068\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u5b9f\u969b\u521d\u3081\u3066\u3067\u3059\u3002\n\u524d\u63d0\n\nGitlab gitlab.com\nphp 5.5.9\ncakephp/cakephp 3.3.10\n\ncloud9\u3000\u306f\u30aa\u30f3\u30e9\u30a4\u30f3IDE\u3067\u3059\u3002\n\n\nCakePHP3 \u3067\u7c21\u5358\u306a\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\n\ncloud9 ramp\u69cb\u6210\u3067\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3092\u4f5c\u6210\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u3072\u306a\u578b\u3092\u4f5c\u6210\n composer create-project --prefer-dist cakephp/app cakephp3gitlabci\n Set Folder Permissions ? (Default to Y) [Y,n]? Y\n\n\nDocumentRoot\u306e\u8a2d\u5b9a\n\n/etc/apache2/sites-enabled/001-cloud9.conf\nDocumentRoot /home/ubuntu/workspace/cakephp3gitlabci\n\n\n\nGit Init\ngit init\ngit add -A\ngit commit -m \"first\"\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u72b6\u6cc1\u306e\u78ba\u8a8d\nRun Project Button Click\nPreview Button Click\n\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\n\nDatabase setting\ncp config/app.php config/app.c9.php\ncloud9\u7528\u306econfig/app.php\u3092\u4f5c\u6210\u3057\u3066\u30b3\u30df\u30c3\u30c8\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nconfig/app.php\n    'Datasources' => [\n        'default' => [\n            'host' => getenv('IP'),\n            'username' =>  getenv('C9_USER') ,\n            'password' => '',\n            'database' => 'c9',\n\n\n\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\n\n$ cp config/app.php config/app.c9.php  \n$ git add config/app.c9.php \n\n\ncreate migrations\nMigration\u3092\u4f5c\u6210\u3057\u3066\u5b9f\u884c\n\n$ bin/cake bake migration CreateProducts name:string description:text created modified\n$ bin/cake migrations migrate \n\n\nmodel\u3092\u4f5c\u6210\nBake\u30b3\u30de\u30f3\u30c9\u3067\u30e2\u30c7\u30eb\u4f5c\u6210\n$ bin/cake bake model Products\n\u3072\u306a\u5f62\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\nsrc/Model/Entity/Product.php\nsrc/Model/Table/ProductsTable.php\ntests/Fixture/ProductsFixture.php\ntests/TestCase/Model/Table/ProductsTableTest.php\n\nmodel test\n\u7c21\u5358\u306a\u30c6\u30b9\u30c8\u3092\u4e00\u3064\u66f8\u304d\u307e\u3059\u3002\n\ntests/TestCase/Model/Table/ProductsTableTest.php\n    public function testFind()\n    {\n        /** @var App\\Model\\Entity\\Product */\n        $product = $this->Products->find()->where(['id' => 1])->first();\n        $this->assertEquals(\"Lorem ipsum dolor sit amet\",$product->name);\n    }\n\n\ncomposer\u3067phpunit\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u5b9f\u884c\n$ composer require --dev phpunit/phpunit\n$ vender/bin/phpunit\n\n\u3053\u3053\u307e\u3067\u3067\u3001\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3067\u304d\u308b\u74b0\u5883\u306b\u306a\u308b\n\nGitLab CI \u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\n.gitlab-ci.yml\u306e\u4f5c\u6210\nDockerHub\u3092\u691c\u7d22\u3057\u3066\u3044\u305f\u3089\u3001\u305d\u306e\u307e\u307e\u4f7f\u3048\u305d\u3046\u306a\u3082\u306e\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u3053\u3053\u304b\u3089\u3001\u30b3\u30d4\u30da\u3057\u307e\u3059\u3002\nhttps://hub.docker.com/r/kaffineaddict/gitlabcakephp3/\n\nGitLab\u306bpush\n$ git remote add origin https://gitlab.com/zonoise/cakephp3_2.git                                                                \n$ git push origin master \n\n\u6700\u521d\u306f\u5931\u6557\u3057\u307e\u3059\u3002\nhttps://gyazo.com/168377d9db706c7eef079e60265c5110\n\nconfig\u306e\u8a2d\u5b9a\nGitLab\u7528\u306bconfig/app.php\u3092\u5206\u3051\u307e\u3059\u3002\n\n$ cp config/app.default.php config/app.gitlab.php\n\ngitlab-ci.yml\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u60c5\u5831\u3092\u3082\u3068\u306b\u63a5\u7d9a\u60c5\u5831\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\uff08Default\u3068test\u4e21\u65b9\uff09\n\nconfig/app.gitlab.php\n            'host' => 'mysql',\n            'username' => 'root',\n            'password' => 'mysql',\n            'database' => 'cake_test',\n\n\nconfig\u3092\u5206\u5272\u3057\u305f\u306e\u3067\u3001\u30c6\u30b9\u30c8\u304c\u8d70\u308b\u524d\u306bcp\u3059\u308b\u51e6\u7406\u3092\u8ffd\u52a0\n\ngitlab-ci.yml\n  - cp config/app.gitlab.php config/app.php\n  - bin/cake migrations migrate\n\n\n\n\u7d42\u308f\u308a\n\u30c6\u30b9\u30c8\u304c\u901a\u3063\u305f\u306e\u3067\u4eca\u56de\u306f\u3053\u3053\u307e\u3067\u306b\u306a\u308a\u307e\u3059\u3002\n\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\n\u4eca\u56de\u4f5c\u696d\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u4e0b\u8a18\u306b\u306a\u308a\u307e\u3059\u3002\nhttps://gitlab.com/zonoise/cakephp3_2\n# \u306f\u3058\u3081\u306b\nGitlab\u306f\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u304cCI/CD\u6a5f\u80fd\u306f\u4f7f\u3063\u305f\u3053\u3068\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u5b9f\u969b\u521d\u3081\u3066\u3067\u3059\u3002\n\n\u524d\u63d0\n\n+ Gitlab gitlab.com\n+ php 5.5.9\n+ cakephp/cakephp 3.3.10\n+ [cloud9](https://c9.io)\u3000\u306f\u30aa\u30f3\u30e9\u30a4\u30f3IDE\u3067\u3059\u3002\n\n# CakePHP3 \u3067\u7c21\u5358\u306a\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\n\n## cloud9 ramp\u69cb\u6210\u3067\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3092\u4f5c\u6210\n\n## \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u3072\u306a\u578b\u3092\u4f5c\u6210\n```\n composer create-project --prefer-dist cakephp/app cakephp3gitlabci\n Set Folder Permissions ? (Default to Y) [Y,n]? Y\n```\n## DocumentRoot\u306e\u8a2d\u5b9a\n``` /etc/apache2/sites-enabled/001-cloud9.conf\nDocumentRoot /home/ubuntu/workspace/cakephp3gitlabci\n```\n\n## Git Init\n```\ngit init\ngit add -A\ngit commit -m \"first\"\n```\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u72b6\u6cc1\u306e\u78ba\u8a8d\nRun Project Button Click\nPreview Button Click\n[\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8](https://gyazo.com/988925ab13e5a96c28b0257523192017)\n\n\n## Database setting \n\ncp config/app.php config/app.c9.php  \ncloud9\u7528\u306econfig/app.php\u3092\u4f5c\u6210\u3057\u3066\u30b3\u30df\u30c3\u30c8\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```php:config/app.php\n    'Datasources' => [\n        'default' => [\n            'host' => getenv('IP'),\n            'username' =>  getenv('C9_USER') ,\n            'password' => '',\n            'database' => 'c9',\n```\n\n[\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8](https://gyazo.com/46688a2bed8123ca7b93a5d585d5278a)\n```\n$ cp config/app.php config/app.c9.php  \n$ git add config/app.c9.php \n```\n\n## create migrations\n\nMigration\u3092\u4f5c\u6210\u3057\u3066\u5b9f\u884c\n```\n$ bin/cake bake migration CreateProducts name:string description:text created modified\n$ bin/cake migrations migrate \n```\n\n## model\u3092\u4f5c\u6210\nBake\u30b3\u30de\u30f3\u30c9\u3067\u30e2\u30c7\u30eb\u4f5c\u6210\n`$ bin/cake bake model Products`\n\n\u3072\u306a\u5f62\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\n`src/Model/Entity/Product.php`\n`src/Model/Table/ProductsTable.php`\n`tests/Fixture/ProductsFixture.php`\n`tests/TestCase/Model/Table/ProductsTableTest.php`\n\n## model test\n\n\u7c21\u5358\u306a\u30c6\u30b9\u30c8\u3092\u4e00\u3064\u66f8\u304d\u307e\u3059\u3002\n\n```php:tests/TestCase/Model/Table/ProductsTableTest.php\n    public function testFind()\n    {\n        /** @var App\\Model\\Entity\\Product */\n        $product = $this->Products->find()->where(['id' => 1])->first();\n        $this->assertEquals(\"Lorem ipsum dolor sit amet\",$product->name);\n    }\n```\ncomposer\u3067phpunit\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u5b9f\u884c\n\n```\n$ composer require --dev phpunit/phpunit\n$ vender/bin/phpunit\n```\n\u3053\u3053\u307e\u3067\u3067\u3001\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3067\u304d\u308b\u74b0\u5883\u306b\u306a\u308b\n\n# GitLab CI \u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\n## .gitlab-ci.yml\u306e\u4f5c\u6210\n\nDockerHub\u3092\u691c\u7d22\u3057\u3066\u3044\u305f\u3089\u3001\u305d\u306e\u307e\u307e\u4f7f\u3048\u305d\u3046\u306a\u3082\u306e\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u3053\u3053\u304b\u3089\u3001\u30b3\u30d4\u30da\u3057\u307e\u3059\u3002\nhttps://hub.docker.com/r/kaffineaddict/gitlabcakephp3/\n\n## GitLab\u306bpush\n```\n$ git remote add origin https://gitlab.com/zonoise/cakephp3_2.git                                                                \n$ git push origin master \n```\n\u6700\u521d\u306f\u5931\u6557\u3057\u307e\u3059\u3002\nhttps://gyazo.com/168377d9db706c7eef079e60265c5110\n## config\u306e\u8a2d\u5b9a\n\nGitLab\u7528\u306bconfig/app.php\u3092\u5206\u3051\u307e\u3059\u3002\n```\n$ cp config/app.default.php config/app.gitlab.php\n```\n\ngitlab-ci.yml\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u60c5\u5831\u3092\u3082\u3068\u306b\u63a5\u7d9a\u60c5\u5831\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\uff08Default\u3068test\u4e21\u65b9\uff09\n\n```php:config/app.gitlab.php\n            'host' => 'mysql',\n            'username' => 'root',\n            'password' => 'mysql',\n            'database' => 'cake_test',\n```\n\nconfig\u3092\u5206\u5272\u3057\u305f\u306e\u3067\u3001\u30c6\u30b9\u30c8\u304c\u8d70\u308b\u524d\u306bcp\u3059\u308b\u51e6\u7406\u3092\u8ffd\u52a0\n\n```php:gitlab-ci.yml\n  - cp config/app.gitlab.php config/app.php\n  - bin/cake migrations migrate\n```\n\n# \u7d42\u308f\u308a\n\u30c6\u30b9\u30c8\u304c\u901a\u3063\u305f\u306e\u3067\u4eca\u56de\u306f\u3053\u3053\u307e\u3067\u306b\u306a\u308a\u307e\u3059\u3002\n[\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8](https://gyazo.com/5576489fec917bcf19649458ee441c82)\n\n\u4eca\u56de\u4f5c\u696d\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u4e0b\u8a18\u306b\u306a\u308a\u307e\u3059\u3002\n[https://gitlab.com/zonoise/cakephp3_2](https://gitlab.com/zonoise/cakephp3_2)\n\n"}