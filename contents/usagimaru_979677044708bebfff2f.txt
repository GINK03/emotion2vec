{"tags": ["MacOSX", "NSTextView", "Cocoa"], "context": "\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5de6\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30af\u30b9\u30c8\u30e1\u30cb\u30e5\u30fc\u3092\u53f3\u306e\u3088\u3046\u306b\u3057\u305f\u3044\u3002\u8f9e\u66f8\u3001Google \u3067\u691c\u7d22\u3001\u30ab\u30c3\u30c8\u3001\u30b3\u30d4\u30fc\u3001\u30da\u30fc\u30b9\u30c8 \u306e\u90e8\u5206\u3060\u3051\u306f\u6700\u4f4e\u9650\u6b8b\u3059\u3002\u3061\u306a\u307f\u306b  Spotlight\u301c\u30c6\u30ad\u30b9\u30c8\u3092\u5168\u89d2\u306b\u5909\u63db \u306e\u90e8\u5206\u306f\u81ea\u52d5\u633f\u5165\u3055\u308c\u308b\u30b5\u30fc\u30d3\u30b9\u30e1\u30cb\u30e5\u30fc\u3067\u3001\u3053\u308c\u306f NSMenu \u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3067\u524a\u9664\u3067\u304d\u308b\u3002\n  \nextension TextDelegate: NSTextDelegate {\n// \u30b3\u30f3\u30c6\u30af\u30b9\u30c8\u30e1\u30cb\u30e5\u30fc\u3092\u8fd4\u3059\u305f\u3081\u306e\u30c7\u30ea\u30b2\u30fc\u30c8\u30e1\u30bd\u30c3\u30c9\u3002\u6a19\u6e96\u306e\u30e1\u30cb\u30e5\u30fc\u306f\u5f15\u6570\u3067\u6e21\u3055\u308c\u308b\nfunc textView(view: NSTextView, menu: NSMenu, forEvent event: NSEvent, atIndex charIndex: Int) -> NSMenu? {\n        let newMenu = NSMenu(title: \"\")\n        newMenu.allowsContextMenuPlugIns = false // \u30b5\u30fc\u30d3\u30b9\u30e1\u30cb\u30e5\u30fc\u3092\u633f\u5165\u3057\u305f\u304f\u306a\u3044\u5834\u5408\u306f false\n\n        var specialItems = 0\n        for item in menu.itemArray {\n            // \u8f9e\u66f8\u3067\u8868\u793a\u3001Google \u3067\u691c\u7d22\n            if item.action.description == \"_searchWithGoogleFromMenu:\" ||\n            item.action.description == \"_lookUpDefiniteRangeInDictionaryFromMenu:\" {\n                newMenu.addItem(item.copy() as! NSMenuItem)\n                specialItems += 1\n            }\n\n            // \u533a\u5207\u308a\u7dda\u3092\u5165\u308c\u308b\n            if specialItems == 2 {\n                newMenu.addItem(NSMenuItem.separatorItem())\n                specialItems += 1\n            }\n\n            // \u30ab\u30c3\u30c8\u3001\u30b3\u30d4\u30fc\u3001\u30da\u30fc\u30b9\u30c8\n            if item.action.description == \"cut:\" ||\n                item.action.description == \"copy:\" ||\n                item.action.description == \"paste:\" {\n                newMenu.addItem(item.copy() as! NSMenuItem)\n            }\n\n            // \u30c7\u30d0\u30c3\u30b0\u7528\n            //print(\"\\(item.target), \\(item.action.description), \\(item.title)\")\n        }\n\n        return newMenu\n    }\n}\n\n\u3042\u3068\u306f\u3088\u3057\u306a\u306b\u597d\u304d\u306a\u30e1\u30cb\u30e5\u30fc\u9805\u76ee\u3092\u633f\u5165\u3059\u308c\u3070\u826f\u3044\u3002\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5de6\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30af\u30b9\u30c8\u30e1\u30cb\u30e5\u30fc\u3092\u53f3\u306e\u3088\u3046\u306b\u3057\u305f\u3044\u3002**\u8f9e\u66f8\u3001Google \u3067\u691c\u7d22\u3001\u30ab\u30c3\u30c8\u3001\u30b3\u30d4\u30fc\u3001\u30da\u30fc\u30b9\u30c8** \u306e\u90e8\u5206\u3060\u3051\u306f\u6700\u4f4e\u9650\u6b8b\u3059\u3002\u3061\u306a\u307f\u306b  **Spotlight\u301c\u30c6\u30ad\u30b9\u30c8\u3092\u5168\u89d2\u306b\u5909\u63db** \u306e\u90e8\u5206\u306f\u81ea\u52d5\u633f\u5165\u3055\u308c\u308b\u30b5\u30fc\u30d3\u30b9\u30e1\u30cb\u30e5\u30fc\u3067\u3001\u3053\u308c\u306f NSMenu \u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3067\u524a\u9664\u3067\u304d\u308b\u3002\n<img width=\"246\" src=\"https://qiita-image-store.s3.amazonaws.com/0/3603/163707cd-e9d7-3e01-ecfd-6b25e7dd49ee.png\"> <img width=\"246\" src=\"https://qiita-image-store.s3.amazonaws.com/0/3603/792ed1f4-df48-685b-8657-f2b7601f3322.png\"> <img width=\"163\" src=\"https://qiita-image-store.s3.amazonaws.com/0/3603/6ef51b0e-372f-061c-8cd4-9859f8f2a66f.png\">\n\n```swift\nextension TextDelegate: NSTextDelegate {\n// \u30b3\u30f3\u30c6\u30af\u30b9\u30c8\u30e1\u30cb\u30e5\u30fc\u3092\u8fd4\u3059\u305f\u3081\u306e\u30c7\u30ea\u30b2\u30fc\u30c8\u30e1\u30bd\u30c3\u30c9\u3002\u6a19\u6e96\u306e\u30e1\u30cb\u30e5\u30fc\u306f\u5f15\u6570\u3067\u6e21\u3055\u308c\u308b\nfunc textView(view: NSTextView, menu: NSMenu, forEvent event: NSEvent, atIndex charIndex: Int) -> NSMenu? {\n\t\tlet newMenu = NSMenu(title: \"\")\n\t\tnewMenu.allowsContextMenuPlugIns = false // \u30b5\u30fc\u30d3\u30b9\u30e1\u30cb\u30e5\u30fc\u3092\u633f\u5165\u3057\u305f\u304f\u306a\u3044\u5834\u5408\u306f false\n\t\t\n\t\tvar specialItems = 0\n\t\tfor item in menu.itemArray {\n\t\t\t// \u8f9e\u66f8\u3067\u8868\u793a\u3001Google \u3067\u691c\u7d22\n\t\t\tif item.action.description == \"_searchWithGoogleFromMenu:\" ||\n\t\t\titem.action.description == \"_lookUpDefiniteRangeInDictionaryFromMenu:\" {\n\t\t\t\tnewMenu.addItem(item.copy() as! NSMenuItem)\n\t\t\t\tspecialItems += 1\n\t\t\t}\n\t\t\t\n\t\t\t// \u533a\u5207\u308a\u7dda\u3092\u5165\u308c\u308b\n\t\t\tif specialItems == 2 {\n\t\t\t\tnewMenu.addItem(NSMenuItem.separatorItem())\n\t\t\t\tspecialItems += 1\n\t\t\t}\n\t\t\t\n\t\t\t// \u30ab\u30c3\u30c8\u3001\u30b3\u30d4\u30fc\u3001\u30da\u30fc\u30b9\u30c8\n\t\t\tif item.action.description == \"cut:\" ||\n\t\t\t\titem.action.description == \"copy:\" ||\n\t\t\t\titem.action.description == \"paste:\" {\n\t\t\t\tnewMenu.addItem(item.copy() as! NSMenuItem)\n\t\t\t}\n\t\t\t\n\t\t\t// \u30c7\u30d0\u30c3\u30b0\u7528\n\t\t\t//print(\"\\(item.target), \\(item.action.description), \\(item.title)\")\n\t\t}\n\t\t\n\t\treturn newMenu\n\t}\n}\n```\n\n\u3042\u3068\u306f\u3088\u3057\u306a\u306b\u597d\u304d\u306a\u30e1\u30cb\u30e5\u30fc\u9805\u76ee\u3092\u633f\u5165\u3059\u308c\u3070\u826f\u3044\u3002\n"}